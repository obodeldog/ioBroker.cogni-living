function a5_0x52ac(){const _0x31b5fb=['[RECORDER]\x20Error:\x20','exitTimer','type','kontakt','getStateAsync','.NextHours.Location_1.Day_1.current.temp_value','8621280MrOANO','replace','Valve','outdoorSensorId','TRACK_EVENT','debug','accuweather','schalter','isProVersion','includes','.1.LEVEL','12DYNIuB','location','valveMapping','toISOString','schloss','LTM.rawEventLog','STATE','events.lastEvent','.LEVEL','motion','SIMULATE_SIGNAL','events.history','griff','getHours','sensorLastValues','t체r','Unknown','some','LEVEL','eventHistory','.1.TEMPERATURE','\x20from\x20','(((.+)+)+)+$','10XmXrvn','constructor','3116968aCvzpT','toString','name','heizung','klima','lampe','switch','isGracePeriodActive','weatherunderground','.1.VALVE_STATE','normal','shift','lastTrackerEventTime','light','1843160OGyHWe','temperature','setStateAsync','search','pr채senz','occupancy','length','isExit','message','temperatur','lock','rawEventLog','4RJixjY','.ACTUAL_TEMPERATURE','3361668BkdHhi','window','exports','number','thermostat','currentSystemMode','getForeignStateAsync','STATUS','bewegung','from','Temperature','parse','log','toLowerCase','splice','licht','contact','config','presence','door','map','val','round','daswetter','push','5946AbEbqH','isPresent','249369pKqRcr','value','exitGraceTimer','9930802MWAFed','.forecast.current.temperature','handle','stringify','sendToPythonWrapper','.1.ACTUAL_TEMPERATURE','pop','LTM.trainingData.sequences','now','logDuplicates','3260uSwslG','dimmer'];a5_0x52ac=function(){return _0x31b5fb;};return a5_0x52ac();}const a5_0x51eb77=a5_0x1b69;(function(_0x2c6266,_0x230250){const _0x58f830=a5_0x1b69,_0x20b8d3=_0x2c6266();while(!![]){try{const _0x271ece=-parseInt(_0x58f830(0x12b))/0x1*(-parseInt(_0x58f830(0x14b))/0x2)+-parseInt(_0x58f830(0x180))/0x3*(parseInt(_0x58f830(0x17e))/0x4)+parseInt(_0x58f830(0x138))/0x5*(parseInt(_0x58f830(0x129))/0x6)+-parseInt(_0x58f830(0x12e))/0x7+parseInt(_0x58f830(0x164))/0x8+parseInt(_0x58f830(0x140))/0x9+-parseInt(_0x58f830(0x162))/0xa*(parseInt(_0x58f830(0x172))/0xb);if(_0x271ece===_0x230250)break;else _0x20b8d3['push'](_0x20b8d3['shift']());}catch(_0x3f8df0){_0x20b8d3['push'](_0x20b8d3['shift']());}}}(a5_0x52ac,0xbf2ed));const a5_0x4dc3d0=(function(){let _0x2a7008=!![];return function(_0x59feb9,_0x2c66d3){const _0x47200b=_0x2a7008?function(){if(_0x2c66d3){const _0x160511=_0x2c66d3['apply'](_0x59feb9,arguments);return _0x2c66d3=null,_0x160511;}}:function(){};return _0x2a7008=![],_0x47200b;};}()),a5_0x5a55b6=a5_0x4dc3d0(this,function(){const _0x5bbe56=a5_0x1b69;return a5_0x5a55b6[_0x5bbe56(0x165)]()[_0x5bbe56(0x175)](_0x5bbe56(0x161))['toString']()[_0x5bbe56(0x163)](a5_0x5a55b6)[_0x5bbe56(0x175)](_0x5bbe56(0x161));});a5_0x5a55b6();'use strict';const HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,THERMO_LOG_SIZE=0x3e8,SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e;let activeSequence=[],sequenceTimer=null;async function getOutsideTemperatureNumeric(_0x4c369d){const _0x496b53=a5_0x1b69;if(_0x4c369d[_0x496b53(0x121)][_0x496b53(0x143)])try{const _0x1cc7ba=await _0x4c369d[_0x496b53(0x186)](_0x4c369d[_0x496b53(0x121)][_0x496b53(0x143)]);if(_0x1cc7ba&&_0x1cc7ba['val']!==undefined&&_0x1cc7ba[_0x496b53(0x125)]!==null)return parseFloat(_0x1cc7ba['val']);}catch(_0xcef65d){}const _0x3af03d=_0x4c369d[_0x496b53(0x121)]['weatherInstance'];if(!_0x4c369d[_0x496b53(0x121)]['useWeather']||!_0x3af03d)return null;try{let _0x2a8943='';if(_0x3af03d[_0x496b53(0x149)](_0x496b53(0x146)))_0x2a8943=_0x3af03d+'.Current.Temperature';else{if(_0x3af03d[_0x496b53(0x149)](_0x496b53(0x127)))_0x2a8943=_0x3af03d+_0x496b53(0x13f);else{if(_0x3af03d[_0x496b53(0x149)]('openweathermap'))_0x2a8943=_0x3af03d+_0x496b53(0x12f);else{if(_0x3af03d[_0x496b53(0x149)](_0x496b53(0x16c)))_0x2a8943=_0x3af03d+'.forecast.current.temp';}}}if(_0x2a8943){const _0x13ad83=await _0x4c369d[_0x496b53(0x186)](_0x2a8943);if(_0x13ad83&&_0x13ad83[_0x496b53(0x125)]!==undefined&&_0x13ad83[_0x496b53(0x125)]!==null)return parseFloat(_0x13ad83['val']);}}catch(_0x43dfc7){}return null;}async function recordThermodynamics(_0x310d44,_0x394b19,_0x1c65c3,_0x8c8a47){const _0x296749=a5_0x1b69,_0x5e42f5=await getOutsideTemperatureNumeric(_0x310d44);if(_0x5e42f5===null)return;let _0x15422c=0x0,_0xfdd861=![];if(_0x310d44[_0x296749(0x121)][_0x296749(0x14d)])try{let _0x512925=_0x310d44['config']['valveMapping'];if(typeof _0x512925==='string')_0x512925=JSON[_0x296749(0x18b)](_0x512925);if(_0x512925[_0x394b19]){const _0x1fc231=_0x512925[_0x394b19],_0x140f26=await _0x310d44['getForeignStateAsync'](_0x1fc231);if(_0x140f26&&_0x140f26[_0x296749(0x125)]!==null&&_0x140f26['val']!==undefined){let _0x41cca2=Number(_0x140f26[_0x296749(0x125)]);if(_0x41cca2<=1.05&&!_0x1fc231[_0x296749(0x149)](_0x296749(0x187))&&!_0x1fc231[_0x296749(0x149)](_0x296749(0x151)))_0x41cca2=_0x41cca2*0x64;_0x15422c=Math[_0x296749(0x126)](_0x41cca2),_0xfdd861=!![];}}}catch(_0x578a7f){}if(!_0xfdd861){const _0x3301e7=[{'from':_0x296749(0x133),'to':_0x296749(0x14a)},{'from':'.1.ACTUAL_TEMPERATURE','to':_0x296749(0x16d)},{'from':_0x296749(0x15f),'to':'.4.VALVE_STATE'},{'from':_0x296749(0x17f),'to':_0x296749(0x153)},{'from':_0x296749(0x173),'to':'level'},{'from':_0x296749(0x18a),'to':_0x296749(0x142)}];for(const _0x2c2144 of _0x3301e7){if(_0x394b19[_0x296749(0x149)](_0x2c2144[_0x296749(0x189)])){const _0x494b95=_0x394b19[_0x296749(0x141)](_0x2c2144[_0x296749(0x189)],_0x2c2144['to']);try{const _0x2faada=await _0x310d44[_0x296749(0x186)](_0x494b95);if(_0x2faada&&_0x2faada['val']!==null&&_0x2faada[_0x296749(0x125)]!==undefined){let _0x2a2d98=Number(_0x2faada['val']);if(typeof _0x2a2d98===_0x296749(0x183)){if(_0x2a2d98<=1.05&&_0x2c2144['to'][_0x296749(0x149)](_0x296749(0x15d)))_0x2a2d98=_0x2a2d98*0x64;_0x15422c=Math[_0x296749(0x126)](_0x2a2d98),_0xfdd861=!![];break;}}}catch(_0x239a80){}}}}const _0x485244=await _0x310d44[_0x296749(0x13e)]('LTM.trainingData.thermodynamics');let _0x543a0d=[];if(_0x485244&&_0x485244['val'])try{_0x543a0d=JSON[_0x296749(0x18b)](_0x485244[_0x296749(0x125)]);}catch(_0x3118b1){}_0x543a0d[_0x296749(0x128)]({'ts':Date[_0x296749(0x136)](),'room':_0x8c8a47||_0x296749(0x15b),'t_in':_0x1c65c3,'t_out':_0x5e42f5,'valve':_0x15422c});if(_0x543a0d[_0x296749(0x178)]>THERMO_LOG_SIZE)_0x543a0d[_0x296749(0x16f)]();await _0x310d44[_0x296749(0x174)]('LTM.trainingData.thermodynamics',{'val':JSON[_0x296749(0x131)](_0x543a0d),'ack':!![]});}async function saveCompletedSequence(_0x4ed10b){const _0x22b917=a5_0x1b69;try{const _0x6a9000=await _0x4ed10b[_0x22b917(0x13e)](_0x22b917(0x135));let _0x17d840=[];if(_0x6a9000&&_0x6a9000['val'])try{_0x17d840=JSON['parse'](_0x6a9000[_0x22b917(0x125)]);}catch(_0x11aef8){}const _0x18b7ab=activeSequence[0x0]['ts'],_0x5bea57=activeSequence[_0x22b917(0x124)](_0x38a0b3=>({'loc':_0x38a0b3['loc'],'t_delta':Math[_0x22b917(0x126)]((_0x38a0b3['ts']-_0x18b7ab)/0x3e8)})),_0x2c0a97={'timestamp':new Date(_0x18b7ab)[_0x22b917(0x14e)](),'steps':_0x5bea57,'duration':Math[_0x22b917(0x126)]((activeSequence[activeSequence['length']-0x1]['ts']-_0x18b7ab)/0x3e8),'daytime':new Date(_0x18b7ab)[_0x22b917(0x158)]()};_0x17d840[_0x22b917(0x128)](_0x2c0a97);if(_0x17d840[_0x22b917(0x178)]>MAX_TRAINING_SET_SIZE)_0x17d840[_0x22b917(0x16f)]();await _0x4ed10b['setStateAsync']('LTM.trainingData.sequences',{'val':JSON[_0x22b917(0x131)](_0x17d840),'ack':!![]}),_0x4ed10b['isProVersion']&&_0x4ed10b['sendToPythonWrapper']&&_0x4ed10b[_0x22b917(0x132)]('ANALYZE_SEQUENCE',{'sequence':_0x2c0a97});}catch(_0x63bc84){_0x4ed10b[_0x22b917(0x18c)]['error'](_0x22b917(0x13a)+_0x63bc84[_0x22b917(0x17a)]);}}async function recordSequence(_0x582e46,_0x48cb20){const _0x545ea6=a5_0x1b69,_0x321922=(_0x48cb20[_0x545ea6(0x13c)]||'')[_0x545ea6(0x18d)](),_0x5eff59=[_0x545ea6(0x154),_0x545ea6(0x188),'pr채senz',_0x545ea6(0x122),_0x545ea6(0x177),_0x545ea6(0x123),_0x545ea6(0x15a),'window','fenster',_0x545ea6(0x190),_0x545ea6(0x13d),_0x545ea6(0x171),_0x545ea6(0x18f),'switch','schalter',_0x545ea6(0x139),_0x545ea6(0x169)];if(!_0x5eff59[_0x545ea6(0x15c)](_0x52cd2a=>_0x321922[_0x545ea6(0x149)](_0x52cd2a)))return;if(!_0x48cb20[_0x545ea6(0x12c)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence['push']({'loc':_0x48cb20[_0x545ea6(0x14c)]||'Unknown','id':_0x48cb20['id'],'ts':Date[_0x545ea6(0x136)]()}),sequenceTimer=setTimeout(async()=>{if(activeSequence['length']>0x1)await saveCompletedSequence(_0x582e46);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}function a5_0x1b69(_0x437a09,_0x3d12a4){const _0x1fc48d=a5_0x52ac();return a5_0x1b69=function(_0x5a55b6,_0x4dc3d0){_0x5a55b6=_0x5a55b6-0x121;let _0x52acdc=_0x1fc48d[_0x5a55b6];return _0x52acdc;},a5_0x1b69(_0x437a09,_0x3d12a4);}function startExitTimer(_0x36f3a2){const _0x397c1d=a5_0x1b69;abortExitTimer(_0x36f3a2),_0x36f3a2[_0x397c1d(0x16b)]=!![],_0x36f3a2['exitGraceTimer']=setTimeout(()=>{_0x36f3a2['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x36f3a2[_0x397c1d(0x13b)]=setTimeout(()=>{const _0x4c47df=_0x397c1d;setPresence(_0x36f3a2,![]),_0x36f3a2[_0x4c47df(0x13b)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x55c2fa){const _0x599629=a5_0x1b69;if(_0x55c2fa[_0x599629(0x13b)])clearTimeout(_0x55c2fa[_0x599629(0x13b)]);if(_0x55c2fa[_0x599629(0x12d)])clearTimeout(_0x55c2fa[_0x599629(0x12d)]);_0x55c2fa[_0x599629(0x13b)]=null,_0x55c2fa[_0x599629(0x12d)]=null,_0x55c2fa[_0x599629(0x16b)]=![];}async function setPresence(_0x10ffa9,_0x27c3f5){const _0x1d47d6=a5_0x1b69;if(_0x10ffa9['isPresent']===_0x27c3f5)return;_0x10ffa9[_0x1d47d6(0x12a)]=_0x27c3f5,await _0x10ffa9[_0x1d47d6(0x174)]('system.isPresent',{'val':_0x27c3f5,'ack':!![]});}async function processSensorEvent(_0x64ff7,_0x544a7e,_0x577142,_0x56072e){const _0x5cf5fa=a5_0x1b69;if(!_0x56072e)return null;const _0x8b7f8b=_0x577142['val'],_0x449708=Date[_0x5cf5fa(0x136)](),_0x1e9893=_0x64ff7[_0x5cf5fa(0x159)][_0x544a7e],_0x5da1e1=(_0x56072e[_0x5cf5fa(0x13c)]||'')[_0x5cf5fa(0x18d)](),_0x16b210=_0x5da1e1[_0x5cf5fa(0x149)](_0x5cf5fa(0x173))||_0x5da1e1['includes'](_0x5cf5fa(0x17b))||_0x5da1e1[_0x5cf5fa(0x149)](_0x5cf5fa(0x168))||_0x5da1e1[_0x5cf5fa(0x149)](_0x5cf5fa(0x167))||_0x5da1e1[_0x5cf5fa(0x149)](_0x5cf5fa(0x184));if(_0x16b210&&typeof _0x8b7f8b===_0x5cf5fa(0x183)){if(_0x8b7f8b>0x50||_0x8b7f8b<-0x32)return _0x64ff7[_0x5cf5fa(0x18c)][_0x5cf5fa(0x145)]('[RECORDER]\x20Ignored\x20implausible\x20temperature:\x20'+_0x8b7f8b+_0x5cf5fa(0x160)+_0x544a7e),null;}_0x64ff7[_0x5cf5fa(0x159)][_0x544a7e]=_0x8b7f8b;if(!_0x56072e[_0x5cf5fa(0x137)]&&_0x1e9893!=undefined&&_0x1e9893==_0x8b7f8b)return null;_0x64ff7['isProVersion']&&_0x16b210&&recordThermodynamics(_0x64ff7,_0x544a7e,_0x8b7f8b,_0x56072e['location']);const _0x51e2e2={'timestamp':_0x449708,'id':_0x544a7e,'name':_0x56072e[_0x5cf5fa(0x166)],'type':_0x56072e[_0x5cf5fa(0x13c)],'location':_0x56072e['location'],'value':_0x8b7f8b};_0x64ff7[_0x5cf5fa(0x15e)]['unshift'](_0x51e2e2);if(_0x64ff7['eventHistory'][_0x5cf5fa(0x178)]>HISTORY_MAX_SIZE)_0x64ff7[_0x5cf5fa(0x15e)][_0x5cf5fa(0x134)]();await _0x64ff7[_0x5cf5fa(0x174)](_0x5cf5fa(0x152),{'val':JSON[_0x5cf5fa(0x131)](_0x51e2e2),'ack':!![]}),await _0x64ff7[_0x5cf5fa(0x174)](_0x5cf5fa(0x156),{'val':JSON['stringify'](_0x64ff7[_0x5cf5fa(0x15e)]),'ack':!![]});if(_0x64ff7['isProVersion']){_0x64ff7[_0x5cf5fa(0x17d)][_0x5cf5fa(0x128)](_0x51e2e2);if(_0x64ff7[_0x5cf5fa(0x17d)][_0x5cf5fa(0x178)]>RAW_LOG_MAX_SIZE)_0x64ff7[_0x5cf5fa(0x17d)][_0x5cf5fa(0x18e)](0x0,_0x64ff7[_0x5cf5fa(0x17d)][_0x5cf5fa(0x178)]-RAW_LOG_MAX_SIZE);await _0x64ff7[_0x5cf5fa(0x174)](_0x5cf5fa(0x150),{'val':JSON[_0x5cf5fa(0x131)](_0x64ff7['rawEventLog']),'ack':!![]}),recordSequence(_0x64ff7,_0x51e2e2);}if(_0x56072e[_0x5cf5fa(0x179)]&&_0x8b7f8b===!![]){if(_0x64ff7[_0x5cf5fa(0x12a)]&&!_0x64ff7['isGracePeriodActive'])startExitTimer(_0x64ff7);else{if(!_0x64ff7[_0x5cf5fa(0x12a)])setPresence(_0x64ff7,!![]);}}else{if(_0x56072e[_0x5cf5fa(0x13c)]===_0x5cf5fa(0x154)&&_0x8b7f8b===!![]){if(_0x64ff7[_0x5cf5fa(0x13b)])abortExitTimer(_0x64ff7);if(!_0x64ff7['isPresent']&&_0x64ff7[_0x5cf5fa(0x185)]===_0x5cf5fa(0x16e))setPresence(_0x64ff7,!![]);}}if(_0x64ff7[_0x5cf5fa(0x148)]&&_0x64ff7[_0x5cf5fa(0x132)]){_0x56072e['type']===_0x5cf5fa(0x154)&&_0x8b7f8b===!![]&&_0x56072e[_0x5cf5fa(0x14c)]&&_0x64ff7['sendToPythonWrapper'](_0x5cf5fa(0x155),{'room':_0x56072e['location']});const _0x344bdb=[_0x5cf5fa(0x123),'t체r',_0x5cf5fa(0x181),'fenster',_0x5cf5fa(0x157),_0x5cf5fa(0x130),_0x5cf5fa(0x17c),_0x5cf5fa(0x14f)][_0x5cf5fa(0x15c)](_0x55b360=>_0x5da1e1[_0x5cf5fa(0x149)](_0x55b360)),_0x652b36=[_0x5cf5fa(0x171),'licht',_0x5cf5fa(0x16a),_0x5cf5fa(0x147),'dimmer',_0x5cf5fa(0x169)][_0x5cf5fa(0x15c)](_0x1355bc=>_0x5da1e1[_0x5cf5fa(0x149)](_0x1355bc)),_0x15ac4a=['motion',_0x5cf5fa(0x188),_0x5cf5fa(0x176),'presence',_0x5cf5fa(0x177)][_0x5cf5fa(0x15c)](_0x458ece=>_0x5da1e1[_0x5cf5fa(0x149)](_0x458ece));if(_0x56072e[_0x5cf5fa(0x14c)]&&(_0x344bdb||_0x652b36||_0x15ac4a)){const _0x28c17e=_0x8b7f8b===!![]||typeof _0x8b7f8b===_0x5cf5fa(0x183)&&_0x8b7f8b>0x0,_0x51a1be=_0x344bdb&&!_0x28c17e&&_0x1e9893!==undefined&&_0x1e9893!=_0x8b7f8b;if(_0x28c17e||_0x51a1be){const _0x358e4d=_0x64ff7[_0x5cf5fa(0x170)]||_0x449708,_0x990ac6=(_0x449708-_0x358e4d)/0x3e8;_0x64ff7[_0x5cf5fa(0x170)]=_0x449708,_0x64ff7[_0x5cf5fa(0x132)](_0x5cf5fa(0x144),{'room':_0x56072e[_0x5cf5fa(0x14c)],'dt':_0x990ac6});}}}return _0x51e2e2;}module[a5_0x51eb77(0x182)]={'processSensorEvent':processSensorEvent,'getOutsideTemperatureNumeric':getOutsideTemperatureNumeric,'setPresence':setPresence,'abortExitTimer':abortExitTimer,'startExitTimer':startExitTimer};