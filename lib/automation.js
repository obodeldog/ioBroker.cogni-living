const a1_0x12d101=a1_0x36aa;(function(_0x39d25d,_0x26f0f6){const _0x50612a=a1_0x36aa,_0x423d5e=_0x39d25d();while(!![]){try{const _0x105f10=-parseInt(_0x50612a(0x233))/0x1+-parseInt(_0x50612a(0x236))/0x2*(-parseInt(_0x50612a(0x199))/0x3)+parseInt(_0x50612a(0x198))/0x4*(parseInt(_0x50612a(0x1f2))/0x5)+parseInt(_0x50612a(0x1bb))/0x6+-parseInt(_0x50612a(0x208))/0x7+parseInt(_0x50612a(0x228))/0x8+-parseInt(_0x50612a(0x1a5))/0x9*(parseInt(_0x50612a(0x17c))/0xa);if(_0x105f10===_0x26f0f6)break;else _0x423d5e['push'](_0x423d5e['shift']());}catch(_0xf5a484){_0x423d5e['push'](_0x423d5e['shift']());}}}(a1_0x167a,0xea73e));const a1_0x5dec87=(function(){let _0x2ada97=!![];return function(_0x2f5917,_0x18ff70){const _0x19ce33=_0x2ada97?function(){const _0x2fc61b=a1_0x36aa;if(_0x18ff70){const _0x1eb8f8=_0x18ff70[_0x2fc61b(0x1fc)](_0x2f5917,arguments);return _0x18ff70=null,_0x1eb8f8;}}:function(){};return _0x2ada97=![],_0x19ce33;};}()),a1_0x25d518=a1_0x5dec87(this,function(){const _0x32aef2=a1_0x36aa;return a1_0x25d518[_0x32aef2(0x20a)]()[_0x32aef2(0x21d)](_0x32aef2(0x230))[_0x32aef2(0x20a)]()['constructor'](a1_0x25d518)[_0x32aef2(0x21d)](_0x32aef2(0x230));});a1_0x25d518();'use strict';const aiAgent=require(a1_0x12d101(0x21c)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x5a1074){const _0x320ac2=a1_0x12d101;if(!_0x5a1074)return'';return _0x5a1074[_0x320ac2(0x195)]()['replace'](/\s+/g,'')[_0x320ac2(0x1c7)]();}function a1_0x167a(){const _0x6a7ccd=['valve','.4.SET_TEMPERATURE','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','[MPC]\x20','SET_POINT_TEMPERATURE','63LosXiq','.1.SET_POINT_TEMPERATURE','analysis.energy.activeEnforcements','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','\x20->\x20','default','common','analysis.automation.lastAction','localeCompare','until','position','error','rescue_','\x20wieder\x20auf\x20','Ist','slice','name','replace','length','manual',']:\x20Raum-Trigger\x20\x27','minutes_safe','6696588LWBoDB','getForeignStateAsync','Calendar\x20Check\x20Error:\x20','role','[WATCHDOG]\x20','open','Classic','Unbekannt','_date','find','findIndex','join','trim','.1.LEVEL','val','state','forEach','set','getForeignObjectAsync','analysis.energy.rlPenalties','.1.TEMPERATURE','summary','analysis.energy.warmupTargets','sensor','ðŸ“…\x20[MPC\x20INFO]\x20','pi_heating_demand','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','_calName','\x27\x20(Match:\x20','contact','target_temperature','normal','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','setForeignStateAsync','window','Auto-Erkennung','warn','currentSystemMode','level','.data.table','too_cold','PrÃ¤diktion:\x20','mpc_','Â°C!\x20(Puffer:\x20','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','values','unshift','analysis.energy.mpcActiveInterventions','analysis.automation.confidenceThreshold','Â°C\x20(nicht\x20','.1.ACTUAL_TEMPERATURE','entries','urlaub\x20ende','getTime','Â°C\x20(Vorlauf:\x20','168050xRhVoT','analysis.energy.schedulePreview','thermostat.setpoint','stringify','consultButler','temperature','dimmer','valve_position','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','system.mode','apply','Enforcement\x20Monitor\x20Error:\x20','stellwert','\x20wurde\x20manuell\x20erhÃ¶ht.',':\x20Absenkung\x20auf\x20','number','log','Â°C).\x20Entferne\x20Status.','push','string','map','toUpperCase','3523184hYwsyQ','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','toString','room','event','ACTUAL','ankunft','TRAIN_RL_PENALTY','[CAL]\x20','level.temperature','PERFECT','local_temperature','includes','\x20min)','config','sendToPythonWrapper','setStateAsync','location','type','getForeignObjectsAsync','./ai_agent','search','valveMapping','Manuelles\x20Mapping','.4.VALVE_STATE','split','getHours','switch','ðŸ“…\x20SMART\x20SCHEDULE\x20[','calendarInstance','filter','thermostatMapping','11265464qkvkLn',':\x20Aufheizen\x20auf\x20','info','message','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','getStateAsync','date','(((.+)+)+)+$','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','current_heating_setpoint','52465TIPucq','Â°C\x20(Kalender-Schutz)','Unknown','2jGuyAC','setpoint','\x20erreicht\x20Limit\x20(','Nicht\x20gefunden','off','sort','Â°C\x20(via\x20','unit','soll','reason','analysis.energy.warmupTimes','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','4112390HnUAGK','abs','splice','analysis.energy.warmupSources','cal_','Â°C.','openknx','_meta','add','hm-rpc','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','useCalendar','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','parse','triggerTime','score','active','\x20min).','devices','Â°C\x20<\x20','now','\x20ist\x20auf\x20','remove','target','toLowerCase','thermostat','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','140KTYOyy','2082411GoWoNf','calendarSelection',')\x20aktiv.\x20Heize\x20auf\x20','isArray','messwert','exports','\x20auf\x20'];a1_0x167a=function(){return _0x6a7ccd;};return a1_0x167a();}function a1_0x36aa(_0x2e3ff5,_0xad4366){const _0x30f7cd=a1_0x167a();return a1_0x36aa=function(_0x25d518,_0x5dec87){_0x25d518=_0x25d518-0x17a;let _0x167ae4=_0x30f7cd[_0x25d518];return _0x167ae4;},a1_0x36aa(_0x2e3ff5,_0xad4366);}function getWarmupRobust(_0x3b05a6,_0x1eea2b){const _0x10eb6f=a1_0x12d101;if(!_0x3b05a6||!_0x1eea2b)return 0x3c;if(_0x3b05a6[_0x1eea2b]!==undefined)return _0x3b05a6[_0x1eea2b];const _0x54c95f=_0x1eea2b[_0x10eb6f(0x195)]()[_0x10eb6f(0x1b6)](/Ã¤/g,'ae')['replace'](/Ã¶/g,'oe')[_0x10eb6f(0x1b6)](/Ã¼/g,'ue')[_0x10eb6f(0x1b6)](/ÃŸ/g,'ss')[_0x10eb6f(0x1b6)](/\s+/g,'_')['replace'](/[^a-z0-9_]/g,'');if(_0x3b05a6[_0x54c95f]!==undefined)return _0x3b05a6[_0x54c95f];return 0x3c;}async function logAutomationAction(_0xbfad32,_0x13166f){const _0x8ee836=a1_0x12d101;await _0xbfad32[_0x8ee836(0x218)](_0x8ee836(0x1ac),{'val':_0x13166f,'ack':!![]});try{const _0x19b948='analysis.automation.actionLog',_0x174ab1=await _0xbfad32[_0x8ee836(0x22e)](_0x19b948);let _0x4513ae=[];if(_0x174ab1&&_0x174ab1['val'])try{_0x4513ae=JSON[_0x8ee836(0x18a)](_0x174ab1[_0x8ee836(0x1c9)]);}catch(_0x57a996){}_0x4513ae[_0x8ee836(0x1e9)]({'ts':Date[_0x8ee836(0x191)](),'msg':_0x13166f});if(_0x4513ae[_0x8ee836(0x1b7)]>0x32)_0x4513ae=_0x4513ae['slice'](0x0,0x32);await _0xbfad32['setStateAsync'](_0x19b948,{'val':JSON['stringify'](_0x4513ae),'ack':!![]});}catch(_0x50889e){}}async function handlePrediction(_0x1d3729,_0x6073e6,_0x1d4fa6){const _0x10c4df=a1_0x12d101;if(!_0x6073e6||_0x6073e6===_0x10c4df(0x235))return;let _0x3bb5e2='off',_0x1eb0b3=0.6;try{const _0x40eca2=await _0x1d3729[_0x10c4df(0x22e)]('analysis.automation.mode');if(_0x40eca2&&_0x40eca2[_0x10c4df(0x1c9)])_0x3bb5e2=_0x40eca2['val'];const _0x2d1446=await _0x1d3729[_0x10c4df(0x22e)](_0x10c4df(0x1eb));if(_0x2d1446&&_0x2d1446[_0x10c4df(0x1c9)])_0x1eb0b3=_0x2d1446[_0x10c4df(0x1c9)];}catch(_0x45a75a){}if(_0x3bb5e2===_0x10c4df(0x23a)||_0x1d4fa6<_0x1eb0b3)return;const _0x470abe=Date[_0x10c4df(0x191)]();if(lastActions[_0x6073e6]&&_0x470abe-lastActions[_0x6073e6]<COOLDOWN_MS)return;const _0x5e1076=_0x1d3729['config'][_0x10c4df(0x18f)]||[],_0x5b0f18=normalize(_0x6073e6),_0x3317b8=_0x5e1076[_0x10c4df(0x1c4)](_0x36515a=>normalize(_0x36515a[_0x10c4df(0x219)])===_0x5b0f18&&(_0x36515a[_0x10c4df(0x21a)]==='light'||_0x36515a[_0x10c4df(0x21a)]===_0x10c4df(0x1f8)||_0x36515a['type']===_0x10c4df(0x223)));if(!_0x3317b8)return;const _0x3fb6e0=await aiAgent[_0x10c4df(0x1f6)](_0x1d3729,_0x6073e6,_0x3317b8[_0x10c4df(0x1b5)],_0x1d4fa6);if(!_0x3fb6e0['approved'])return;const _0x1c6e9b=_0x10c4df(0x1e4)+_0x6073e6+'\x20->\x20Schalte\x20'+_0x3317b8[_0x10c4df(0x1b5)]+'\x20('+_0x3fb6e0[_0x10c4df(0x23f)]+')';await logAutomationAction(_0x1d3729,'['+_0x3bb5e2[_0x10c4df(0x207)]()+']\x20'+_0x1c6e9b);if(_0x3bb5e2===_0x10c4df(0x18d)){const _0x543abf=await _0x1d3729['getForeignStateAsync'](_0x3317b8['id']);(!_0x543abf||!_0x543abf[_0x10c4df(0x1c9)]&&_0x543abf[_0x10c4df(0x1c9)]!==!![])&&await _0x1d3729[_0x10c4df(0x1dc)](_0x3317b8['id'],!![]),lastActions[_0x6073e6]=_0x470abe;}}async function findRelatedId(_0x47fba6,_0x45d2cc,_0x212a70=a1_0x12d101(0x237)){const _0x42a4a1=a1_0x12d101;if(_0x212a70===_0x42a4a1(0x237)&&_0x47fba6[_0x42a4a1(0x216)][_0x42a4a1(0x227)]){let _0x393288=_0x47fba6[_0x42a4a1(0x216)]['thermostatMapping'];if(typeof _0x393288===_0x42a4a1(0x205))try{_0x393288=JSON[_0x42a4a1(0x18a)](_0x393288);}catch(_0x2e6ccb){}if(_0x393288&&_0x393288[_0x45d2cc])return _0x393288[_0x45d2cc];}if(_0x212a70===_0x42a4a1(0x1a0)&&_0x47fba6[_0x42a4a1(0x216)][_0x42a4a1(0x21e)]){let _0x157f1f=_0x47fba6[_0x42a4a1(0x216)][_0x42a4a1(0x21e)];if(typeof _0x157f1f===_0x42a4a1(0x205))try{_0x157f1f=JSON[_0x42a4a1(0x18a)](_0x157f1f);}catch(_0x7fc16){}if(_0x157f1f&&_0x157f1f[_0x45d2cc])return _0x157f1f[_0x45d2cc];}let _0x11cdb6=[];if(_0x212a70===_0x42a4a1(0x237))_0x11cdb6=[{'s':_0x42a4a1(0x1ed),'t':_0x42a4a1(0x1a6)},{'s':_0x42a4a1(0x1cf),'t':_0x42a4a1(0x1a6)},{'s':_0x42a4a1(0x1cf),'t':_0x42a4a1(0x1a1)},{'s':'ACTUAL_TEMPERATURE','t':_0x42a4a1(0x1a4)},{'s':_0x42a4a1(0x213),'t':'occupied_heating_setpoint'},{'s':_0x42a4a1(0x213),'t':_0x42a4a1(0x232)},{'s':'temperature','t':_0x42a4a1(0x1d9)},{'s':_0x42a4a1(0x20d),'t':'SET'},{'s':_0x42a4a1(0x1b3),'t':'Soll'},{'s':_0x42a4a1(0x1f7),'t':_0x42a4a1(0x237)}];else _0x212a70===_0x42a4a1(0x1a0)&&(_0x11cdb6=[{'s':_0x42a4a1(0x1ed),'t':_0x42a4a1(0x1c8)},{'s':_0x42a4a1(0x1cf),'t':_0x42a4a1(0x1c8)},{'s':'.1.TEMPERATURE','t':_0x42a4a1(0x220)},{'s':_0x42a4a1(0x213),'t':_0x42a4a1(0x1d4)},{'s':_0x42a4a1(0x1f7),'t':_0x42a4a1(0x1f9)},{'s':_0x42a4a1(0x1f7),'t':_0x42a4a1(0x1e1)}]);for(const _0x261679 of _0x11cdb6){if(_0x45d2cc[_0x42a4a1(0x214)](_0x261679['s'])){const _0x2b9edf=_0x45d2cc['replace'](_0x261679['s'],_0x261679['t']),_0x44977b=await _0x47fba6[_0x42a4a1(0x1cd)](_0x2b9edf);if(_0x44977b)return _0x2b9edf;}}try{const _0x573143=_0x45d2cc['split']('.');if(_0x573143[_0x42a4a1(0x1b7)]>0x2){const _0x177e7f=_0x573143[_0x42a4a1(0x1b4)](0x0,-0x1)[_0x42a4a1(0x1c6)]('.'),_0x312ca1=await _0x47fba6[_0x42a4a1(0x21b)](_0x177e7f+'.*'),_0x4e8029=[],_0x2784e9=_0x45d2cc[_0x42a4a1(0x221)](/[._]+/)['filter'](_0x58843e=>![_0x42a4a1(0x182),'0',_0x42a4a1(0x185),'ist','wert',_0x42a4a1(0x1f7),'actual','sensor',_0x42a4a1(0x19d),_0x42a4a1(0x1ca)]['includes'](_0x58843e[_0x42a4a1(0x195)]()));for(const [_0x5695db,_0x434cb5]of Object[_0x42a4a1(0x1ee)](_0x312ca1)){if(_0x5695db===_0x45d2cc)continue;if(_0x434cb5&&_0x434cb5['common']){const _0x80e514=_0x5695db[_0x42a4a1(0x195)](),_0x4706e8=(_0x434cb5['common'][_0x42a4a1(0x1be)]||'')['toLowerCase'](),_0x78bae=(_0x434cb5[_0x42a4a1(0x1ab)][_0x42a4a1(0x23d)]||'')[_0x42a4a1(0x195)]();let _0x279af4=![];if(_0x212a70===_0x42a4a1(0x237)&&_0x434cb5['common']['write']===!![])_0x279af4=_0x80e514['includes'](_0x42a4a1(0x1cc))||_0x80e514['includes'](_0x42a4a1(0x23e))||_0x80e514[_0x42a4a1(0x214)](_0x42a4a1(0x194))||_0x4706e8[_0x42a4a1(0x214)](_0x42a4a1(0x211))||_0x4706e8[_0x42a4a1(0x214)](_0x42a4a1(0x1f4));else _0x212a70===_0x42a4a1(0x1a0)&&(_0x279af4=_0x80e514[_0x42a4a1(0x214)](_0x42a4a1(0x1e1))||_0x80e514[_0x42a4a1(0x214)](_0x42a4a1(0x1a0))||_0x80e514['includes'](_0x42a4a1(0x1fe))||_0x80e514[_0x42a4a1(0x214)](_0x42a4a1(0x1af))||_0x4706e8['includes']('level.valve')||_0x4706e8[_0x42a4a1(0x214)]('value.valve')||_0x78bae[_0x42a4a1(0x214)]('%'));if(_0x279af4){const _0x138aaa=_0x5695db[_0x42a4a1(0x221)](/[._]+/)[_0x42a4a1(0x206)](_0x343a5f=>_0x343a5f[_0x42a4a1(0x195)]());let _0x46e666=0x0;_0x2784e9[_0x42a4a1(0x1cb)](_0x25bebb=>{const _0x46d922=_0x42a4a1;if(_0x138aaa[_0x46d922(0x214)](_0x25bebb[_0x46d922(0x195)]()))_0x46e666++;}),_0x4e8029[_0x42a4a1(0x204)]({'id':_0x5695db,'score':_0x46e666});}}}if(_0x4e8029['length']>0x0){_0x4e8029[_0x42a4a1(0x23b)]((_0x11cdef,_0xd6d3c4)=>_0xd6d3c4[_0x42a4a1(0x18c)]-_0x11cdef['score']);if(_0x4e8029[0x0][_0x42a4a1(0x18c)]>0x0)return _0x4e8029[0x0]['id'];}}}catch(_0x457c2d){}return null;}async function scanThermostats(_0x3cf38b){const _0x29fda3=a1_0x12d101,_0x9365c5=_0x3cf38b[_0x29fda3(0x216)][_0x29fda3(0x18f)]||[],_0x240f11=[],_0x5e0f84=_0x9365c5[_0x29fda3(0x226)](_0x4fa72a=>_0x4fa72a['id']&&_0x4fa72a['id'][_0x29fda3(0x214)](_0x29fda3(0x1f7))||_0x4fa72a['type']&&[_0x29fda3(0x1f7),'thermostat',_0x29fda3(0x1d2)][_0x29fda3(0x214)](_0x4fa72a[_0x29fda3(0x21a)])||_0x4fa72a[_0x29fda3(0x1b5)]&&_0x4fa72a['name'][_0x29fda3(0x195)]()[_0x29fda3(0x214)]('temp'));for(const _0x43dea7 of _0x5e0f84){const _0x158351=await findRelatedId(_0x3cf38b,_0x43dea7['id'],'setpoint'),_0x489f2c=await findRelatedId(_0x3cf38b,_0x43dea7['id'],_0x29fda3(0x1a0));let _0x4269be=_0x29fda3(0x239),_0x95b21a=![],_0x4dedee=_0x3cf38b['config'][_0x29fda3(0x227)]||{};if(typeof _0x4dedee===_0x29fda3(0x205))try{_0x4dedee=JSON[_0x29fda3(0x18a)](_0x4dedee);}catch(_0xb41b40){}let _0x17fb31=_0x3cf38b['config'][_0x29fda3(0x21e)]||{};if(typeof _0x17fb31===_0x29fda3(0x205))try{_0x17fb31=JSON[_0x29fda3(0x18a)](_0x17fb31);}catch(_0x3887cc){}if(_0x4dedee[_0x43dea7['id']]&&_0x4dedee[_0x43dea7['id']]===_0x158351||_0x17fb31[_0x43dea7['id']]&&_0x17fb31[_0x43dea7['id']]===_0x489f2c)_0x4269be=_0x29fda3(0x21f),_0x95b21a=!![];else(_0x158351||_0x489f2c)&&(_0x4269be=_0x29fda3(0x1de));_0x240f11[_0x29fda3(0x204)]({'room':_0x43dea7[_0x29fda3(0x219)]||_0x29fda3(0x1c2),'sensorId':_0x43dea7['id'],'setpointId':_0x158351||'-','valveId':_0x489f2c||'-','source':_0x4269be,'isManual':_0x95b21a,'status':_0x158351&&_0x489f2c?_0x29fda3(0x212):_0x158351?'OK':'Fehlt'});}return _0x240f11[_0x29fda3(0x23b)]((_0x4da22d,_0x4cf324)=>_0x4da22d[_0x29fda3(0x20b)][_0x29fda3(0x1ad)](_0x4cf324[_0x29fda3(0x20b)]));}async function updateSchedulePreview(_0x2f4aa4){const _0x14131e=a1_0x12d101;if(!_0x2f4aa4[_0x14131e(0x216)]['useCalendar']||!_0x2f4aa4['config']['calendarInstance'])return;let _0x327e16={};try{const _0x9efa36=await _0x2f4aa4[_0x14131e(0x22e)](_0x14131e(0x17a));if(_0x9efa36&&_0x9efa36['val'])_0x327e16=JSON[_0x14131e(0x18a)](_0x9efa36[_0x14131e(0x1c9)]);}catch(_0xf18f5){}const _0x4b4881=[],_0x33f7de=Date['now'](),_0x2ead9e=0x30*0x3c*0x3c*0x3e8;try{const _0x24adfc=await _0x2f4aa4[_0x14131e(0x1bc)](_0x2f4aa4['config']['calendarInstance']+_0x14131e(0x1e2));if(!_0x24adfc||!_0x24adfc['val'])return;const _0x1cdc46=JSON['parse'](_0x24adfc[_0x14131e(0x1c9)]),_0x5b13ba=_0x2f4aa4[_0x14131e(0x216)][_0x14131e(0x19a)]||[],_0x4ad331=_0x2f4aa4[_0x14131e(0x216)][_0x14131e(0x18f)]||[],_0x3e1c8f=new Set();_0x4ad331[_0x14131e(0x1cb)](_0x283c4e=>{const _0x259123=_0x14131e;if(_0x283c4e[_0x259123(0x219)])_0x3e1c8f[_0x259123(0x184)](_0x283c4e[_0x259123(0x219)]);});for(const _0x17a439 of _0x1cdc46){if(_0x17a439[_0x14131e(0x1d6)]&&_0x5b13ba[_0x14131e(0x1b7)]>0x0&&!_0x5b13ba[_0x14131e(0x214)](_0x17a439[_0x14131e(0x1d6)]))continue;const _0x53f73e=_0x17a439[_0x14131e(0x1c3)]||_0x17a439['eventStart']||_0x17a439[_0x14131e(0x22f)];if(!_0x53f73e)continue;const _0x483aa6=new Date(_0x53f73e),_0x3f3129=_0x483aa6[_0x14131e(0x1f0)]();if(isNaN(_0x3f3129))continue;if(_0x3f3129<_0x33f7de)continue;if(_0x3f3129>_0x33f7de+_0x2ead9e)continue;const _0x52d62f=(_0x17a439[_0x14131e(0x20c)]||_0x17a439['summary']||'')[_0x14131e(0x195)]();let _0x11a9ec=![],_0x2d18dd=[],_0x4d27eb=_0x17a439['event']||_0x17a439[_0x14131e(0x1d0)]||_0x14131e(0x1c2);if(_0x52d62f['includes'](_0x14131e(0x1ef))||_0x52d62f[_0x14131e(0x214)]('rÃ¼ckkehr')||_0x52d62f[_0x14131e(0x214)](_0x14131e(0x20e)))_0x11a9ec=!![],_0x2d18dd=Array['from'](_0x3e1c8f);else for(const _0x356574 of _0x3e1c8f){if(_0x52d62f[_0x14131e(0x214)](_0x356574[_0x14131e(0x195)]()))_0x2d18dd['push'](_0x356574);}_0x2d18dd[_0x14131e(0x1b7)]>0x0&&_0x2d18dd['forEach'](_0x4588f3=>{const _0x32c30c=_0x14131e;let _0x14df99=0x3c;if(_0x11a9ec){let _0x2fab8c=0x0;Object['values'](_0x327e16)[_0x32c30c(0x1cb)](_0x3020ec=>{if(_0x3020ec>_0x2fab8c)_0x2fab8c=_0x3020ec;}),_0x14df99=_0x2fab8c>0x0?_0x2fab8c:0x78;}else _0x14df99=getWarmupRobust(_0x327e16,_0x4588f3);const _0x18cc34=new Date(_0x3f3129-_0x14df99*0xea60);_0x4b4881['push']({'eventTime':_0x3f3129,'triggerTime':_0x18cc34[_0x32c30c(0x1f0)](),'room':_0x4588f3,'minutes':_0x14df99,'reason':_0x4d27eb,'isGlobal':_0x11a9ec});});}}catch(_0x16cdad){}_0x4b4881['sort']((_0x3fe673,_0x5b0f5c)=>_0x3fe673[_0x14131e(0x18b)]-_0x5b0f5c[_0x14131e(0x18b)]);const _0x43ea72=_0x4b4881['slice'](0x0,0x5);await _0x2f4aa4[_0x14131e(0x218)](_0x14131e(0x1f3),{'val':JSON[_0x14131e(0x1f5)](_0x43ea72),'ack':!![]});}async function monitorEnforcements(_0x5e12c1){const _0x37021c=a1_0x12d101;try{const _0x6ff51=_0x37021c(0x1a7),_0x32bbbc=await _0x5e12c1[_0x37021c(0x22e)](_0x6ff51);if(!_0x32bbbc||!_0x32bbbc[_0x37021c(0x1c9)])return;let _0x45736a=[];try{_0x45736a=JSON[_0x37021c(0x18a)](_0x32bbbc[_0x37021c(0x1c9)]);}catch(_0x5d40e7){return;}if(!Array[_0x37021c(0x19c)](_0x45736a)||_0x45736a[_0x37021c(0x1b7)]===0x0)return;const _0x1a418b=Date['now'](),_0x47b20a=_0x5e12c1[_0x37021c(0x216)][_0x37021c(0x18f)]||[];let _0x4df959=![];for(let _0x273eda=_0x45736a[_0x37021c(0x1b7)]-0x1;_0x273eda>=0x0;_0x273eda--){const _0x16df9f=_0x45736a[_0x273eda];if(_0x1a418b>=_0x16df9f[_0x37021c(0x1ae)]){_0x5e12c1['log'][_0x37021c(0x22a)](_0x37021c(0x22d)+_0x16df9f['room']+_0x37021c(0x186)),_0x45736a[_0x37021c(0x17e)](_0x273eda,0x1),_0x4df959=!![];continue;}const _0x481996=_0x47b20a['find'](_0xc12d5b=>normalize(_0xc12d5b[_0x37021c(0x219)])===normalize(_0x16df9f[_0x37021c(0x20b)])&&(_0xc12d5b['type']===_0x37021c(0x1f7)||_0xc12d5b[_0x37021c(0x21a)]===_0x37021c(0x196)));if(_0x481996){const _0x32f90e=await findRelatedId(_0x5e12c1,_0x481996['id'],_0x37021c(0x237));if(_0x32f90e){const _0x25840f=await _0x5e12c1[_0x37021c(0x1bc)](_0x32f90e);_0x25840f&&typeof _0x25840f[_0x37021c(0x1c9)]===_0x37021c(0x201)&&(_0x25840f['val']<0xf&&(_0x5e12c1[_0x37021c(0x202)][_0x37021c(0x1df)]('ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x16df9f['room']+_0x37021c(0x19f)+_0x25840f[_0x37021c(0x1c9)]+_0x37021c(0x189)+_0x16df9f[_0x37021c(0x194)]+_0x37021c(0x181)),await _0x5e12c1[_0x37021c(0x1dc)](_0x32f90e,_0x16df9f[_0x37021c(0x194)]),await logAutomationAction(_0x5e12c1,'[FORCE]\x20'+_0x16df9f[_0x37021c(0x20b)]+':\x20'+_0x25840f[_0x37021c(0x1c9)]+'Â°C\x20->\x20'+_0x16df9f[_0x37021c(0x194)]+_0x37021c(0x234))));}}}_0x4df959&&await _0x5e12c1[_0x37021c(0x218)](_0x6ff51,{'val':JSON['stringify'](_0x45736a),'ack':!![]});}catch(_0x30ea8d){_0x5e12c1['log'][_0x37021c(0x1b0)](_0x37021c(0x1fd)+_0x30ea8d[_0x37021c(0x22b)]);}}async function checkCalendarTriggers(_0x1adf39){const _0x2cac00=a1_0x12d101;if(!_0x1adf39[_0x2cac00(0x216)][_0x2cac00(0x188)]||!_0x1adf39['config'][_0x2cac00(0x225)])return;await updateSchedulePreview(_0x1adf39);let _0x51bcc5={},_0x43e5b4={};try{const _0x15560e=await _0x1adf39[_0x2cac00(0x22e)](_0x2cac00(0x17a));if(_0x15560e&&_0x15560e[_0x2cac00(0x1c9)])_0x51bcc5=JSON[_0x2cac00(0x18a)](_0x15560e['val']);const _0x138916=await _0x1adf39[_0x2cac00(0x22e)](_0x2cac00(0x17f));if(_0x138916&&_0x138916[_0x2cac00(0x1c9)])_0x43e5b4=JSON[_0x2cac00(0x18a)](_0x138916[_0x2cac00(0x1c9)]);}catch(_0x4ef2d2){}let _0x4867db={'default':0x15};try{const _0x5ddfca=await _0x1adf39[_0x2cac00(0x22e)](_0x2cac00(0x1d1));if(_0x5ddfca&&_0x5ddfca['val'])_0x4867db=JSON[_0x2cac00(0x18a)](_0x5ddfca['val']);}catch(_0x4c8126){}let _0x2e8a88=[];try{const _0xd9fad8=await _0x1adf39[_0x2cac00(0x22e)](_0x2cac00(0x1a7));if(_0xd9fad8&&_0xd9fad8[_0x2cac00(0x1c9)])_0x2e8a88=JSON['parse'](_0xd9fad8[_0x2cac00(0x1c9)]);}catch(_0x3f4b5b){}try{const _0x590708=await _0x1adf39[_0x2cac00(0x1bc)](_0x1adf39[_0x2cac00(0x216)]['calendarInstance']+_0x2cac00(0x1e2));if(!_0x590708||!_0x590708[_0x2cac00(0x1c9)])return;const _0x24d724=JSON['parse'](_0x590708['val']),_0x75e4bb=Date[_0x2cac00(0x191)](),_0x556634=_0x1adf39['config']['devices']||[],_0x1965b0=_0x1adf39[_0x2cac00(0x216)][_0x2cac00(0x19a)]||[];let _0xb3033e=![];for(const _0x2d0e90 of _0x24d724){if(_0x2d0e90[_0x2cac00(0x1d6)]&&_0x1965b0[_0x2cac00(0x1b7)]>0x0&&!_0x1965b0['includes'](_0x2d0e90['_calName']))continue;const _0x145f36=_0x2d0e90[_0x2cac00(0x1c3)]||_0x2d0e90['eventStart']||_0x2d0e90[_0x2cac00(0x22f)];if(!_0x145f36)continue;const _0x1fe4ae=new Date(_0x145f36);if(isNaN(_0x1fe4ae[_0x2cac00(0x1f0)]()))continue;const _0x510568=(_0x2d0e90[_0x2cac00(0x20c)]||_0x2d0e90[_0x2cac00(0x1d0)]||'')[_0x2cac00(0x195)]();if(_0x510568[_0x2cac00(0x214)](_0x2cac00(0x1ef))||_0x510568[_0x2cac00(0x214)]('rÃ¼ckkehr')||_0x510568['includes']('ankunft')){let _0x6015fe=0x0;Object[_0x2cac00(0x1e8)](_0x51bcc5)[_0x2cac00(0x1cb)](_0x57bf38=>{if(_0x57bf38>_0x6015fe)_0x6015fe=_0x57bf38;});if(_0x6015fe===0x0)_0x6015fe=0x78;const _0x59ddac=_0x1fe4ae[_0x2cac00(0x1f0)]()-_0x6015fe*0xea60;_0x75e4bb>=_0x59ddac&&_0x75e4bb<_0x1fe4ae[_0x2cac00(0x1f0)]()&&(_0x1adf39[_0x2cac00(0x1e0)]!==_0x2cac00(0x1da)&&(_0x1adf39[_0x2cac00(0x202)]['info'](_0x2cac00(0x1a2)+_0x6015fe+_0x2cac00(0x18e)),await _0x1adf39[_0x2cac00(0x218)](_0x2cac00(0x1fb),{'val':_0x2cac00(0x1da),'ack':![]})));}for(const _0x5d822e of _0x556634){if(_0x5d822e[_0x2cac00(0x219)]){const _0x31a8c7=_0x5d822e[_0x2cac00(0x219)][_0x2cac00(0x195)](),_0x1dd1ac=(_0x5d822e[_0x2cac00(0x1b5)]||'')[_0x2cac00(0x195)]();let _0x195aaf=_0x510568[_0x2cac00(0x214)](_0x31a8c7);!_0x195aaf&&_0x1dd1ac['length']>0x3&&_0x510568[_0x2cac00(0x214)](_0x1dd1ac)&&(_0x195aaf=!![]);if(_0x195aaf){const _0x41f8c6=getWarmupRobust(_0x51bcc5,_0x5d822e[_0x2cac00(0x219)]),_0x1abcc7=_0x43e5b4[_0x5d822e['location']]||_0x2cac00(0x1c1),_0x53d7bf=_0x1fe4ae['getTime']()-_0x41f8c6*0xea60;if(_0x75e4bb>=_0x53d7bf&&_0x75e4bb<_0x1fe4ae[_0x2cac00(0x1f0)]()){const _0x59f4c3=lastActions['cal_'+_0x5d822e[_0x2cac00(0x219)]];if(_0x59f4c3&&_0x75e4bb-_0x59f4c3<CAL_COOLDOWN_MS)continue;const _0x226abf=await findRelatedId(_0x1adf39,_0x5d822e['id'],'setpoint');if(_0x226abf){let _0x35596b=_0x4867db[_0x5d822e[_0x2cac00(0x219)]];if(_0x35596b===undefined)_0x35596b=_0x4867db[_0x2cac00(0x1aa)];if(_0x35596b===undefined)_0x35596b=0x15;const _0x1745fc=await _0x1adf39['getForeignStateAsync'](_0x226abf);if(_0x1745fc&&typeof _0x1745fc[_0x2cac00(0x1c9)]==='number'&&_0x1745fc[_0x2cac00(0x1c9)]<_0x35596b-0.5){_0x1adf39[_0x2cac00(0x202)][_0x2cac00(0x22a)](_0x2cac00(0x224)+_0x1abcc7+_0x2cac00(0x1b9)+_0x5d822e[_0x2cac00(0x219)]+_0x2cac00(0x1d7)+_0x510568+_0x2cac00(0x19b)+_0x35596b+_0x2cac00(0x1f1)+_0x41f8c6+_0x2cac00(0x18e)),await _0x1adf39[_0x2cac00(0x1dc)](_0x226abf,_0x35596b),await logAutomationAction(_0x1adf39,_0x2cac00(0x210)+_0x5d822e['location']+_0x2cac00(0x1a9)+_0x35596b+_0x2cac00(0x23c)+_0x1abcc7+')'),lastActions[_0x2cac00(0x180)+_0x5d822e[_0x2cac00(0x219)]]=_0x75e4bb;const _0x1235c1=_0x2e8a88[_0x2cac00(0x1c5)](_0x40b410=>_0x40b410[_0x2cac00(0x20b)]===_0x5d822e[_0x2cac00(0x219)]);if(_0x1235c1!==-0x1)_0x2e8a88['splice'](_0x1235c1,0x1);_0x2e8a88['push']({'room':_0x5d822e[_0x2cac00(0x219)],'target':_0x35596b,'until':_0x1fe4ae['getTime']()}),_0xb3033e=!![];}}}}}}}_0xb3033e&&await _0x1adf39[_0x2cac00(0x218)](_0x2cac00(0x1a7),{'val':JSON['stringify'](_0x2e8a88),'ack':!![]});}catch(_0x232632){_0x1adf39[_0x2cac00(0x202)][_0x2cac00(0x1df)](_0x2cac00(0x1bd)+_0x232632[_0x2cac00(0x22b)]);}}async function manageMpcIntervention(_0x11182c,_0x6b07aa,_0x59a570){const _0x4d2ead=a1_0x12d101;try{const _0x3faf24=_0x4d2ead(0x1ea),_0x4b2195=await _0x11182c[_0x4d2ead(0x22e)](_0x3faf24);let _0x33ab8f=[];if(_0x4b2195&&_0x4b2195[_0x4d2ead(0x1c9)])try{_0x33ab8f=JSON[_0x4d2ead(0x18a)](_0x4b2195[_0x4d2ead(0x1c9)]);}catch(_0x2167dc){}const _0x30e92e=_0x33ab8f['indexOf'](_0x6b07aa);if(_0x59a570===_0x4d2ead(0x184))_0x30e92e===-0x1&&(_0x33ab8f[_0x4d2ead(0x204)](_0x6b07aa),await _0x11182c[_0x4d2ead(0x218)](_0x3faf24,{'val':JSON[_0x4d2ead(0x1f5)](_0x33ab8f),'ack':!![]}));else _0x59a570===_0x4d2ead(0x193)&&(_0x30e92e!==-0x1&&(_0x33ab8f[_0x4d2ead(0x17e)](_0x30e92e,0x1),await _0x11182c[_0x4d2ead(0x218)](_0x3faf24,{'val':JSON['stringify'](_0x33ab8f),'ack':!![]})));}catch(_0xca834d){}}async function cleanupGhostInterventions(_0x30f5e2){const _0x1f6748=a1_0x12d101;try{const _0x15a7cd='analysis.energy.mpcActiveInterventions',_0x480a22=await _0x30f5e2[_0x1f6748(0x22e)](_0x15a7cd);if(!_0x480a22||!_0x480a22[_0x1f6748(0x1c9)])return;const _0xc0a760=JSON[_0x1f6748(0x18a)](_0x480a22[_0x1f6748(0x1c9)]);if(!Array[_0x1f6748(0x19c)](_0xc0a760)||_0xc0a760[_0x1f6748(0x1b7)]===0x0)return;let _0x41a19a={'default':0x15};try{const _0x53e01d=await _0x30f5e2[_0x1f6748(0x22e)](_0x1f6748(0x1d1));if(_0x53e01d&&_0x53e01d[_0x1f6748(0x1c9)])_0x41a19a=JSON[_0x1f6748(0x18a)](_0x53e01d['val']);}catch(_0x326ad0){}let _0x3c87f9=[];try{const _0x43b167=await _0x30f5e2['getStateAsync']('analysis.energy.ventilationAlerts');if(_0x43b167&&_0x43b167[_0x1f6748(0x1c9)])_0x3c87f9=JSON['parse'](_0x43b167[_0x1f6748(0x1c9)]);}catch(_0x21b536){}let _0x2b6e19={},_0x496d03=![];try{const _0x5deb70=await _0x30f5e2['getStateAsync'](_0x1f6748(0x1ce));if(_0x5deb70&&_0x5deb70[_0x1f6748(0x1c9)])_0x2b6e19=JSON['parse'](_0x5deb70['val']);}catch(_0x562dbb){}if(_0x2b6e19[_0x1f6748(0x183)]){const _0x314914=Date['now']();for(const [_0x399e68,_0x575e1b]of Object[_0x1f6748(0x1ee)](_0x2b6e19[_0x1f6748(0x183)])){_0x314914-_0x575e1b>PENALTY_TTL&&(delete _0x2b6e19[_0x399e68],delete _0x2b6e19[_0x1f6748(0x183)][_0x399e68],_0x496d03=!![],_0x30f5e2['log']['info']('ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27'+_0x399e68+'\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.'));}}const _0x3a9340=_0x30f5e2[_0x1f6748(0x216)][_0x1f6748(0x18f)]||[];let _0x5b9477=![];for(let _0x15a7a4=_0xc0a760[_0x1f6748(0x1b7)]-0x1;_0x15a7a4>=0x0;_0x15a7a4--){const _0x594067=_0xc0a760[_0x15a7a4],_0x3964ec=_0x3a9340[_0x1f6748(0x1c4)](_0x363c7b=>normalize(_0x363c7b[_0x1f6748(0x219)])===normalize(_0x594067)&&(_0x363c7b[_0x1f6748(0x21a)]===_0x1f6748(0x1f7)||_0x363c7b[_0x1f6748(0x21a)]==='thermostat'));if(!_0x3964ec){_0x30f5e2['log'][_0x1f6748(0x1df)](_0x1f6748(0x1d5)+_0x594067+_0x1f6748(0x1a8)),_0xc0a760['splice'](_0x15a7a4,0x1),_0x5b9477=!![];continue;}if(_0x3964ec){const _0x151a8b=await findRelatedId(_0x30f5e2,_0x3964ec['id'],'setpoint'),_0x22dc6d=await _0x30f5e2[_0x1f6748(0x1bc)](_0x3964ec['id']);if(_0x151a8b){const _0x333652=await _0x30f5e2['getForeignStateAsync'](_0x151a8b);if(_0x333652&&typeof _0x333652[_0x1f6748(0x1c9)]===_0x1f6748(0x201)){let _0x190ed5=![],_0x576229='';Math[_0x1f6748(0x17d)](_0x333652[_0x1f6748(0x1c9)]-ECO_TEMP)>0.5&&(_0x190ed5=!![],_0x576229=_0x1f6748(0x1b8));if(!_0x190ed5&&_0x22dc6d&&typeof _0x22dc6d[_0x1f6748(0x1c9)]==='number'){const _0x3fe3ff=_0x41a19a[_0x594067]||_0x41a19a[_0x1f6748(0x1aa)]||0x15;_0x22dc6d[_0x1f6748(0x1c9)]<_0x3fe3ff+0.2&&(_0x190ed5=!![],_0x576229=_0x1f6748(0x1e3));}if(_0x190ed5){if(_0x576229===_0x1f6748(0x1b8)){_0x30f5e2[_0x1f6748(0x202)][_0x1f6748(0x22a)]('ðŸ§¹\x20[MPC\x20CLEANUP]\x20'+_0x594067+_0x1f6748(0x192)+_0x333652[_0x1f6748(0x1c9)]+_0x1f6748(0x1ec)+ECO_TEMP+_0x1f6748(0x203));const _0x23f614=lastActions['cal_'+_0x594067],_0x2e1b1c=_0x23f614&&Date[_0x1f6748(0x191)]()-_0x23f614<0x2*0x3c*0x3e8;if(!_0x2e1b1c&&_0x333652[_0x1f6748(0x1c9)]>ECO_TEMP+0.5){_0x30f5e2[_0x1f6748(0x217)]&&(_0x30f5e2[_0x1f6748(0x202)][_0x1f6748(0x22a)](_0x1f6748(0x1db)+_0x594067+_0x1f6748(0x1ff)),_0x30f5e2[_0x1f6748(0x217)](_0x1f6748(0x20f),{'room':_0x594067}));const _0x3ec042=_0x594067+'_'+new Date()[_0x1f6748(0x222)]();if(!_0x2b6e19[_0x3ec042]){_0x2b6e19[_0x3ec042]=0x1;if(!_0x2b6e19['_meta'])_0x2b6e19[_0x1f6748(0x183)]={};_0x2b6e19['_meta'][_0x3ec042]=Date[_0x1f6748(0x191)](),_0x496d03=!![];}}else _0x2e1b1c&&_0x30f5e2[_0x1f6748(0x202)][_0x1f6748(0x22a)](_0x1f6748(0x1d3)+_0x594067+_0x1f6748(0x17b));}else{if(_0x576229===_0x1f6748(0x1e3)){let _0x18c15a=![];if(_0x3c87f9[_0x1f6748(0x1c4)](_0x120621=>_0x120621[_0x1f6748(0x20b)]===_0x594067))_0x18c15a=!![];const _0x1e42f4=_0x3a9340[_0x1f6748(0x226)](_0x845ab6=>normalize(_0x845ab6[_0x1f6748(0x219)])===normalize(_0x594067)&&(_0x845ab6[_0x1f6748(0x21a)]===_0x1f6748(0x1dd)||_0x845ab6[_0x1f6748(0x21a)]==='sensor'||_0x845ab6[_0x1f6748(0x21a)]===_0x1f6748(0x1d8)));for(const _0x42ebcf of _0x1e42f4){try{const _0x24bd1a=await _0x30f5e2[_0x1f6748(0x1bc)](_0x42ebcf['id']);if(_0x24bd1a&&(_0x24bd1a['val']===!![]||_0x24bd1a['val']===0x1||String(_0x24bd1a[_0x1f6748(0x1c9)])[_0x1f6748(0x195)]()===_0x1f6748(0x1c0)))_0x18c15a=!![];}catch(_0x20bffb){}}if(_0x18c15a)_0x30f5e2['log']['info'](_0x1f6748(0x209)+_0x594067+_0x1f6748(0x197));else{const _0x4c730c=_0x41a19a[_0x594067]||_0x41a19a[_0x1f6748(0x1aa)]||0x15;_0x30f5e2[_0x1f6748(0x202)][_0x1f6748(0x22a)](_0x1f6748(0x1fa)+_0x594067+_0x1f6748(0x238)+_0x22dc6d[_0x1f6748(0x1c9)]+_0x1f6748(0x190)+(_0x4c730c+0.2)+'Â°C).\x20Sparmodus\x20beendet!'),await _0x30f5e2[_0x1f6748(0x1dc)](_0x151a8b,_0x4c730c),await logAutomationAction(_0x30f5e2,_0x1f6748(0x1bf)+_0x594067+_0x1f6748(0x187)+_0x4c730c+'Â°C'),lastActions[_0x1f6748(0x1b1)+_0x594067]=Date['now']();}}}_0xc0a760[_0x1f6748(0x17e)](_0x15a7a4,0x1),_0x5b9477=!![];}}}}}_0x5b9477&&await _0x30f5e2[_0x1f6748(0x218)](_0x15a7cd,{'val':JSON[_0x1f6748(0x1f5)](_0xc0a760),'ack':!![]}),_0x496d03&&await _0x30f5e2[_0x1f6748(0x218)]('analysis.energy.rlPenalties',{'val':JSON[_0x1f6748(0x1f5)](_0x2b6e19),'ack':!![]});}catch(_0x2609c4){}}async function applyEnergySavings(_0x557fbb,_0x5e0db2){const _0x304522=a1_0x12d101;await cleanupGhostInterventions(_0x557fbb);if(!_0x5e0db2||_0x5e0db2['length']===0x0)return;const _0x1a2fe8=_0x557fbb[_0x304522(0x216)][_0x304522(0x18f)]||[],_0x305ef0=Date[_0x304522(0x191)]();for(const _0x505963 of _0x5e0db2){const _0x1440c3=_0x505963[_0x304522(0x20b)],_0x56c69b=_0x505963[_0x304522(0x1ba)],_0x161b05=_0x505963[_0x304522(0x194)]||0x15;if(lastActions['rescue_'+_0x1440c3]&&_0x305ef0-lastActions[_0x304522(0x1b1)+_0x1440c3]<RESCUE_LOCK_MS)continue;const _0x2567e2=_0x1a2fe8[_0x304522(0x1c4)](_0x1b037b=>normalize(_0x1b037b['location'])===normalize(_0x1440c3)&&(_0x1b037b['type']==='temperature'||_0x1b037b[_0x304522(0x21a)]==='thermostat'));if(!_0x2567e2)continue;const _0x3419da=await findRelatedId(_0x557fbb,_0x2567e2['id'],_0x304522(0x237));if(_0x3419da){if(lastActions[_0x304522(0x1e5)+_0x1440c3]&&_0x305ef0-lastActions[_0x304522(0x1e5)+_0x1440c3]<0x1e*0x3c*0x3e8)continue;const _0x1c0616=await _0x557fbb[_0x304522(0x1bc)](_0x3419da);if(_0x1c0616&&typeof _0x1c0616[_0x304522(0x1c9)]===_0x304522(0x201)){const _0x53f9af=_0x1c0616[_0x304522(0x1c9)];_0x53f9af!==ECO_TEMP&&await manageMpcIntervention(_0x557fbb,_0x1440c3,_0x304522(0x193));if(_0x56c69b>0x1e)_0x53f9af>ECO_TEMP+0.5&&(_0x557fbb[_0x304522(0x202)][_0x304522(0x22a)](_0x304522(0x231)+_0x1440c3+'\x20auf\x20'+ECO_TEMP+_0x304522(0x1e6)+_0x56c69b+_0x304522(0x215)),await _0x557fbb['setForeignStateAsync'](_0x3419da,ECO_TEMP),await manageMpcIntervention(_0x557fbb,_0x1440c3,_0x304522(0x184)),lastActions[_0x304522(0x1e5)+_0x1440c3]=_0x305ef0,await logAutomationAction(_0x557fbb,_0x304522(0x1a3)+_0x1440c3+_0x304522(0x200)+ECO_TEMP+'Â°C'));else _0x56c69b<=0xf&&(_0x53f9af<_0x161b05&&(_0x557fbb[_0x304522(0x202)]['info'](_0x304522(0x22c)+_0x1440c3+_0x304522(0x1b2)+_0x161b05+'Â°C!\x20(Puffer\x20leer).'),await _0x557fbb['setForeignStateAsync'](_0x3419da,_0x161b05),await manageMpcIntervention(_0x557fbb,_0x1440c3,'remove'),lastActions[_0x304522(0x1e5)+_0x1440c3]=_0x305ef0,await logAutomationAction(_0x557fbb,_0x304522(0x1a3)+_0x1440c3+_0x304522(0x229)+_0x161b05+'Â°C')));}}else _0x557fbb[_0x304522(0x202)][_0x304522(0x1df)](_0x304522(0x1e7)+_0x1440c3+'\x20gefunden!');}}module[a1_0x12d101(0x19e)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};