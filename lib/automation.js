const a1_0x395e36=a1_0xa9a0;(function(_0x386c8d,_0x123a93){const _0x1018a5=a1_0xa9a0,_0x48f2a1=_0x386c8d();while(!![]){try{const _0x1ebcf3=parseInt(_0x1018a5(0x1db))/0x1+-parseInt(_0x1018a5(0x1cd))/0x2+parseInt(_0x1018a5(0x1a0))/0x3+-parseInt(_0x1018a5(0x195))/0x4*(-parseInt(_0x1018a5(0x1df))/0x5)+-parseInt(_0x1018a5(0x15a))/0x6*(-parseInt(_0x1018a5(0x1b9))/0x7)+-parseInt(_0x1018a5(0x19c))/0x8+parseInt(_0x1018a5(0x1d5))/0x9*(-parseInt(_0x1018a5(0x161))/0xa);if(_0x1ebcf3===_0x123a93)break;else _0x48f2a1['push'](_0x48f2a1['shift']());}catch(_0x3cde72){_0x48f2a1['push'](_0x48f2a1['shift']());}}}(a1_0xcebe,0x92e7e));const a1_0x4224b0=(function(){let _0x3d6e2a=!![];return function(_0x2595d0,_0x88fbd3){const _0x5073ff=_0x3d6e2a?function(){const _0x1b3a1c=a1_0xa9a0;if(_0x88fbd3){const _0x3a5755=_0x88fbd3[_0x1b3a1c(0x1bb)](_0x2595d0,arguments);return _0x88fbd3=null,_0x3a5755;}}:function(){};return _0x3d6e2a=![],_0x5073ff;};}()),a1_0x5017c3=a1_0x4224b0(this,function(){const _0x4ae34b=a1_0xa9a0;return a1_0x5017c3[_0x4ae34b(0x1a4)]()['search'](_0x4ae34b(0x141))[_0x4ae34b(0x1a4)]()[_0x4ae34b(0x191)](a1_0x5017c3)[_0x4ae34b(0x1e0)](_0x4ae34b(0x141));});a1_0x5017c3();'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x50873a){const _0x5069f1=a1_0xa9a0;if(!_0x50873a)return'';return _0x50873a[_0x5069f1(0x1ca)]()[_0x5069f1(0x13c)](/\s+/g,'')[_0x5069f1(0x139)]();}function getWarmupRobust(_0x3b98a9,_0x14fd08){const _0x2e6178=a1_0xa9a0;if(!_0x3b98a9||!_0x14fd08)return 0x3c;if(_0x3b98a9[_0x14fd08]!==undefined)return _0x3b98a9[_0x14fd08];const _0x2ab6f7=_0x14fd08['toLowerCase']()[_0x2e6178(0x13c)](/Ã¤/g,'ae')['replace'](/Ã¶/g,'oe')[_0x2e6178(0x13c)](/Ã¼/g,'ue')[_0x2e6178(0x13c)](/ÃŸ/g,'ss')[_0x2e6178(0x13c)](/\s+/g,'_')[_0x2e6178(0x13c)](/[^a-z0-9_]/g,'');if(_0x3b98a9[_0x2ab6f7]!==undefined)return _0x3b98a9[_0x2ab6f7];return 0x3c;}async function logAutomationAction(_0x4c5fc6,_0x2c647d){const _0x4bdc5a=a1_0xa9a0;await _0x4c5fc6[_0x4bdc5a(0x1c8)](_0x4bdc5a(0x13a),{'val':_0x2c647d,'ack':!![]});try{const _0x5d5f69='analysis.automation.actionLog',_0x1885ef=await _0x4c5fc6['getStateAsync'](_0x5d5f69);let _0x11c187=[];if(_0x1885ef&&_0x1885ef[_0x4bdc5a(0x159)])try{_0x11c187=JSON[_0x4bdc5a(0x1da)](_0x1885ef[_0x4bdc5a(0x159)]);}catch(_0x300f60){}_0x11c187['unshift']({'ts':Date[_0x4bdc5a(0x17f)](),'msg':_0x2c647d});if(_0x11c187['length']>0x32)_0x11c187=_0x11c187[_0x4bdc5a(0x15b)](0x0,0x32);await _0x4c5fc6[_0x4bdc5a(0x1c8)](_0x5d5f69,{'val':JSON[_0x4bdc5a(0x156)](_0x11c187),'ack':!![]});}catch(_0x2a98d4){}}async function handlePrediction(_0x4c6f10,_0x4b2802,_0x5c0302){const _0x20b2fc=a1_0xa9a0;if(!_0x4b2802||_0x4b2802===_0x20b2fc(0x1be))return;let _0x38e53f=_0x20b2fc(0x199),_0x399f53=0.6;try{const _0x26dd18=await _0x4c6f10['getStateAsync'](_0x20b2fc(0x1ea));if(_0x26dd18&&_0x26dd18[_0x20b2fc(0x159)])_0x38e53f=_0x26dd18['val'];const _0xbfb549=await _0x4c6f10[_0x20b2fc(0x1e8)](_0x20b2fc(0x1a3));if(_0xbfb549&&_0xbfb549[_0x20b2fc(0x159)])_0x399f53=_0xbfb549[_0x20b2fc(0x159)];}catch(_0x16deb6){}if(_0x38e53f===_0x20b2fc(0x199)||_0x5c0302<_0x399f53)return;const _0x31c093=Date[_0x20b2fc(0x17f)]();if(lastActions[_0x4b2802]&&_0x31c093-lastActions[_0x4b2802]<COOLDOWN_MS)return;const _0x39ea20=_0x4c6f10[_0x20b2fc(0x1ed)][_0x20b2fc(0x1cb)]||[],_0x1519d7=normalize(_0x4b2802),_0xf59b48=_0x39ea20['find'](_0x1d7605=>normalize(_0x1d7605[_0x20b2fc(0x1c4)])===_0x1519d7&&(_0x1d7605['type']==='light'||_0x1d7605[_0x20b2fc(0x171)]==='dimmer'||_0x1d7605[_0x20b2fc(0x171)]===_0x20b2fc(0x1a6)));if(!_0xf59b48)return;const _0x3ad2e1=await aiAgent[_0x20b2fc(0x1c6)](_0x4c6f10,_0x4b2802,_0xf59b48[_0x20b2fc(0x1c5)],_0x5c0302);if(!_0x3ad2e1[_0x20b2fc(0x14e)])return;const _0x31f7fc=_0x20b2fc(0x198)+_0x4b2802+'\x20->\x20Schalte\x20'+_0xf59b48[_0x20b2fc(0x1c5)]+'\x20('+_0x3ad2e1[_0x20b2fc(0x17a)]+')';await logAutomationAction(_0x4c6f10,'['+_0x38e53f['toUpperCase']()+']\x20'+_0x31f7fc);if(_0x38e53f==='active'){const _0x121362=await _0x4c6f10[_0x20b2fc(0x1bc)](_0xf59b48['id']);(!_0x121362||!_0x121362[_0x20b2fc(0x159)]&&_0x121362['val']!==!![])&&await _0x4c6f10['setForeignStateAsync'](_0xf59b48['id'],!![]),lastActions[_0x4b2802]=_0x31c093;}}function a1_0xcebe(){const _0x116792=['setForeignStateAsync','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','Unbekannt','contact','\x20min)','\x20wieder\x20auf\x20','entries','value.valve','analysis.energy.warmupSources','analysis.energy.rlPenalties','.1.TEMPERATURE','join','.1.SET_POINT_TEMPERATURE','common','analysis.energy.ventilationAlerts','date','isArray','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','186634uaCdGK',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','apply','getForeignStateAsync','hm-rpc','Unknown','mpc_','summary','thermostatMapping','ist','ðŸ“…\x20SMART\x20SCHEDULE\x20[','location','name','consultButler','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','setStateAsync','valveMapping','toLowerCase','devices','temp','1499654WkRviR','analysis.energy.schedulePreview','.1.ACTUAL_TEMPERATURE','room','role','ACTUAL_TEMPERATURE','push','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','355086JTXikS','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','thermostat','open','exports','parse','433952ldbBML','analysis.energy.mpcActiveInterventions','[WATCHDOG]\x20','_meta','14005viIXLt','search','currentSystemMode','Â°C\x20(via\x20','window','local_temperature','\x20gefunden!','Soll','system.mode','getStateAsync','sensor','analysis.automation.mode','Â°C!\x20(Puffer:\x20','Â°C\x20(Kalender-Schutz)','config','values','sendToPythonWrapper','thermostat.setpoint','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','filter','getForeignObjectAsync','default','abs','\x20wurde\x20manuell\x20erhÃ¶ht.','set','TRAIN_RL_PENALTY','trim','analysis.automation.lastAction','pi_heating_demand','replace','includes','PERFECT','splice','event','(((.+)+)+)+$','cal_','Manuelles\x20Mapping','valve','[CAL]\x20','write','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.',':\x20Absenkung\x20auf\x20','urlaub\x20ende','analysis.energy.warmupTimes','\x20auf\x20','ðŸ“…\x20[MPC\x20INFO]\x20','wert','approved','getHours','indexOf','score','calendarInstance','Fehlt','level.valve','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','stringify','level.temperature','[FORCE]\x20','val','216vXlbqe','slice','remove','findIndex','Calendar\x20Check\x20Error:\x20','unit','info','270bbfucS','Â°C\x20->\x20','\x20erreicht\x20Limit\x20(','Â°C\x20(nicht\x20','.1.LEVEL','_date','number','calendarSelection','temperature','[MPC]\x20','ankunft','.4.VALVE_STATE','message','split','map','stellwert','type','eventStart','triggerTime','SET','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','position','target_temperature','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','getTime','reason','SET_POINT_TEMPERATURE','getForeignObjectsAsync','length','from','now','level','add','useCalendar','Ist','Auto-Erkennung',']:\x20Raum-Trigger\x20\x27','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','Â°C.','forEach','setpoint','sort','soll','rescue_','analysis.energy.warmupTargets','analysis.energy.activeEnforcements','.data.table','Nicht\x20gefunden','constructor','too_cold','find','warn','1504akVwjw','_calName','log','PrÃ¤diktion:\x20','off','string','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','1135232yxomzF','target','Classic','normal','335265kCYXcZ','.4.SET_TEMPERATURE','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','analysis.automation.confidenceThreshold','toString','state','switch'];a1_0xcebe=function(){return _0x116792;};return a1_0xcebe();}async function findRelatedId(_0x321b2f,_0x1dc0db,_0x54cd7a=a1_0x395e36(0x189)){const _0x2535d7=a1_0x395e36;if(_0x54cd7a==='setpoint'&&_0x321b2f['config']['thermostatMapping']){let _0x6e77f0=_0x321b2f[_0x2535d7(0x1ed)][_0x2535d7(0x1c1)];if(typeof _0x6e77f0==='string')try{_0x6e77f0=JSON['parse'](_0x6e77f0);}catch(_0x10f78c){}if(_0x6e77f0&&_0x6e77f0[_0x1dc0db])return _0x6e77f0[_0x1dc0db];}if(_0x54cd7a==='valve'&&_0x321b2f[_0x2535d7(0x1ed)][_0x2535d7(0x1c9)]){let _0x2c64ae=_0x321b2f[_0x2535d7(0x1ed)][_0x2535d7(0x1c9)];if(typeof _0x2c64ae===_0x2535d7(0x19a))try{_0x2c64ae=JSON[_0x2535d7(0x1da)](_0x2c64ae);}catch(_0x5c72e9){}if(_0x2c64ae&&_0x2c64ae[_0x1dc0db])return _0x2c64ae[_0x1dc0db];}let _0x2b22=[];if(_0x54cd7a===_0x2535d7(0x189))_0x2b22=[{'s':'.1.ACTUAL_TEMPERATURE','t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x2535d7(0x1b1),'t':_0x2535d7(0x1b3)},{'s':'.1.TEMPERATURE','t':_0x2535d7(0x1a1)},{'s':_0x2535d7(0x1d2),'t':_0x2535d7(0x17b)},{'s':'local_temperature','t':'occupied_heating_setpoint'},{'s':_0x2535d7(0x1e4),'t':'current_heating_setpoint'},{'s':_0x2535d7(0x169),'t':_0x2535d7(0x177)},{'s':'ACTUAL','t':_0x2535d7(0x174)},{'s':_0x2535d7(0x183),'t':_0x2535d7(0x1e6)},{'s':_0x2535d7(0x169),'t':_0x2535d7(0x189)}];else _0x54cd7a===_0x2535d7(0x144)&&(_0x2b22=[{'s':_0x2535d7(0x1cf),'t':'.1.LEVEL'},{'s':_0x2535d7(0x1b1),'t':_0x2535d7(0x165)},{'s':'.1.TEMPERATURE','t':_0x2535d7(0x16c)},{'s':_0x2535d7(0x1e4),'t':_0x2535d7(0x13b)},{'s':_0x2535d7(0x169),'t':'valve_position'},{'s':'temperature','t':_0x2535d7(0x180)}]);for(const _0x28f98f of _0x2b22){if(_0x1dc0db['includes'](_0x28f98f['s'])){const _0x57377b=_0x1dc0db[_0x2535d7(0x13c)](_0x28f98f['s'],_0x28f98f['t']),_0x335ece=await _0x321b2f[_0x2535d7(0x133)](_0x57377b);if(_0x335ece)return _0x57377b;}}try{const _0x3ee11a=_0x1dc0db[_0x2535d7(0x16e)]('.');if(_0x3ee11a['length']>0x2){const _0x46323b=_0x3ee11a['slice'](0x0,-0x1)[_0x2535d7(0x1b2)]('.'),_0xfff16a=await _0x321b2f[_0x2535d7(0x17c)](_0x46323b+'.*'),_0xab919a=[],_0x140b26=_0x1dc0db[_0x2535d7(0x16e)](/[._]+/)[_0x2535d7(0x132)](_0x3c87b4=>!['openknx','0',_0x2535d7(0x1bd),_0x2535d7(0x1c2),_0x2535d7(0x14d),'temperature','actual','sensor','messwert',_0x2535d7(0x1a5)][_0x2535d7(0x13d)](_0x3c87b4['toLowerCase']()));for(const [_0x3983ad,_0x126de]of Object['entries'](_0xfff16a)){if(_0x3983ad===_0x1dc0db)continue;if(_0x126de&&_0x126de['common']){const _0x113751=_0x3983ad['toLowerCase'](),_0x2c66a3=(_0x126de[_0x2535d7(0x1b4)][_0x2535d7(0x1d1)]||'')['toLowerCase'](),_0x2b855c=(_0x126de[_0x2535d7(0x1b4)][_0x2535d7(0x15f)]||'')[_0x2535d7(0x1ca)]();let _0x352282=![];if(_0x54cd7a==='setpoint'&&_0x126de[_0x2535d7(0x1b4)][_0x2535d7(0x146)]===!![])_0x352282=_0x113751[_0x2535d7(0x13d)](_0x2535d7(0x137))||_0x113751['includes'](_0x2535d7(0x18b))||_0x113751[_0x2535d7(0x13d)]('target')||_0x2c66a3[_0x2535d7(0x13d)](_0x2535d7(0x157))||_0x2c66a3[_0x2535d7(0x13d)](_0x2535d7(0x130));else _0x54cd7a===_0x2535d7(0x144)&&(_0x352282=_0x113751['includes'](_0x2535d7(0x180))||_0x113751[_0x2535d7(0x13d)](_0x2535d7(0x144))||_0x113751[_0x2535d7(0x13d)](_0x2535d7(0x170))||_0x113751[_0x2535d7(0x13d)](_0x2535d7(0x176))||_0x2c66a3['includes'](_0x2535d7(0x154))||_0x2c66a3[_0x2535d7(0x13d)](_0x2535d7(0x1ae))||_0x2b855c['includes']('%'));if(_0x352282){const _0x3f170d=_0x3983ad[_0x2535d7(0x16e)](/[._]+/)[_0x2535d7(0x16f)](_0x1ac299=>_0x1ac299[_0x2535d7(0x1ca)]());let _0x446af3=0x0;_0x140b26[_0x2535d7(0x188)](_0x4d4f7c=>{const _0x33d8bb=_0x2535d7;if(_0x3f170d[_0x33d8bb(0x13d)](_0x4d4f7c['toLowerCase']()))_0x446af3++;}),_0xab919a[_0x2535d7(0x1d3)]({'id':_0x3983ad,'score':_0x446af3});}}}if(_0xab919a[_0x2535d7(0x17d)]>0x0){_0xab919a[_0x2535d7(0x18a)]((_0x4fc8b2,_0x125b93)=>_0x125b93[_0x2535d7(0x151)]-_0x4fc8b2[_0x2535d7(0x151)]);if(_0xab919a[0x0][_0x2535d7(0x151)]>0x0)return _0xab919a[0x0]['id'];}}}catch(_0x3bd558){}return null;}function a1_0xa9a0(_0x5b1e81,_0x576e4a){const _0x10673=a1_0xcebe();return a1_0xa9a0=function(_0x5017c3,_0x4224b0){_0x5017c3=_0x5017c3-0x12f;let _0xcebe6c=_0x10673[_0x5017c3];return _0xcebe6c;},a1_0xa9a0(_0x5b1e81,_0x576e4a);}async function scanThermostats(_0xa1f182){const _0x195b17=a1_0x395e36,_0x544b78=_0xa1f182['config']['devices']||[],_0x5b5636=[],_0x2bf66a=_0x544b78['filter'](_0x14cc60=>_0x14cc60['id']&&_0x14cc60['id'][_0x195b17(0x13d)](_0x195b17(0x169))||_0x14cc60[_0x195b17(0x171)]&&[_0x195b17(0x169),_0x195b17(0x1d7),_0x195b17(0x1e9)][_0x195b17(0x13d)](_0x14cc60['type'])||_0x14cc60[_0x195b17(0x1c5)]&&_0x14cc60[_0x195b17(0x1c5)][_0x195b17(0x1ca)]()[_0x195b17(0x13d)](_0x195b17(0x1cc)));for(const _0x4133de of _0x2bf66a){const _0x4d10af=await findRelatedId(_0xa1f182,_0x4133de['id'],_0x195b17(0x189)),_0x556d40=await findRelatedId(_0xa1f182,_0x4133de['id'],_0x195b17(0x144));let _0x43dc1e=_0x195b17(0x190),_0x1b5424=![],_0x11db69=_0xa1f182[_0x195b17(0x1ed)][_0x195b17(0x1c1)]||{};if(typeof _0x11db69===_0x195b17(0x19a))try{_0x11db69=JSON[_0x195b17(0x1da)](_0x11db69);}catch(_0x365b34){}let _0x173cef=_0xa1f182[_0x195b17(0x1ed)]['valveMapping']||{};if(typeof _0x173cef===_0x195b17(0x19a))try{_0x173cef=JSON[_0x195b17(0x1da)](_0x173cef);}catch(_0x1f6a6c){}if(_0x11db69[_0x4133de['id']]&&_0x11db69[_0x4133de['id']]===_0x4d10af||_0x173cef[_0x4133de['id']]&&_0x173cef[_0x4133de['id']]===_0x556d40)_0x43dc1e=_0x195b17(0x143),_0x1b5424=!![];else(_0x4d10af||_0x556d40)&&(_0x43dc1e=_0x195b17(0x184));_0x5b5636[_0x195b17(0x1d3)]({'room':_0x4133de[_0x195b17(0x1c4)]||_0x195b17(0x1a9),'sensorId':_0x4133de['id'],'setpointId':_0x4d10af||'-','valveId':_0x556d40||'-','source':_0x43dc1e,'isManual':_0x1b5424,'status':_0x4d10af&&_0x556d40?_0x195b17(0x13e):_0x4d10af?'OK':_0x195b17(0x153)});}return _0x5b5636['sort']((_0x3d74be,_0x1558cd)=>_0x3d74be[_0x195b17(0x1d0)]['localeCompare'](_0x1558cd[_0x195b17(0x1d0)]));}async function updateSchedulePreview(_0x3c9e6d){const _0x124d45=a1_0x395e36;if(!_0x3c9e6d[_0x124d45(0x1ed)][_0x124d45(0x182)]||!_0x3c9e6d[_0x124d45(0x1ed)][_0x124d45(0x152)])return;let _0x501196={};try{const _0x23b8f0=await _0x3c9e6d[_0x124d45(0x1e8)](_0x124d45(0x14a));if(_0x23b8f0&&_0x23b8f0[_0x124d45(0x159)])_0x501196=JSON[_0x124d45(0x1da)](_0x23b8f0[_0x124d45(0x159)]);}catch(_0x21b59f){}const _0x4915af=[],_0xf33510=Date['now'](),_0x3e21a0=0x30*0x3c*0x3c*0x3e8;try{const _0x1e2605=await _0x3c9e6d[_0x124d45(0x1bc)](_0x3c9e6d['config'][_0x124d45(0x152)]+_0x124d45(0x18f));if(!_0x1e2605||!_0x1e2605[_0x124d45(0x159)])return;const _0x4b6338=JSON['parse'](_0x1e2605[_0x124d45(0x159)]),_0x3511bc=_0x3c9e6d[_0x124d45(0x1ed)][_0x124d45(0x168)]||[],_0x14258b=_0x3c9e6d['config'][_0x124d45(0x1cb)]||[],_0x11c91f=new Set();_0x14258b['forEach'](_0x24f905=>{const _0x138e55=_0x124d45;if(_0x24f905[_0x138e55(0x1c4)])_0x11c91f['add'](_0x24f905[_0x138e55(0x1c4)]);});for(const _0x4de8da of _0x4b6338){if(_0x4de8da[_0x124d45(0x196)]&&_0x3511bc[_0x124d45(0x17d)]>0x0&&!_0x3511bc['includes'](_0x4de8da[_0x124d45(0x196)]))continue;const _0x138943=_0x4de8da[_0x124d45(0x166)]||_0x4de8da[_0x124d45(0x172)]||_0x4de8da[_0x124d45(0x1b6)];if(!_0x138943)continue;const _0x1a00ae=new Date(_0x138943),_0x3fb1f4=_0x1a00ae[_0x124d45(0x179)]();if(isNaN(_0x3fb1f4))continue;if(_0x3fb1f4<_0xf33510)continue;if(_0x3fb1f4>_0xf33510+_0x3e21a0)continue;const _0x2a688e=(_0x4de8da[_0x124d45(0x140)]||_0x4de8da['summary']||'')[_0x124d45(0x1ca)]();let _0x246930=![],_0x4e8a49=[],_0x30a0d3=_0x4de8da[_0x124d45(0x140)]||_0x4de8da['summary']||'Unbekannt';if(_0x2a688e[_0x124d45(0x13d)](_0x124d45(0x149))||_0x2a688e[_0x124d45(0x13d)]('rÃ¼ckkehr')||_0x2a688e['includes'](_0x124d45(0x16b)))_0x246930=!![],_0x4e8a49=Array[_0x124d45(0x17e)](_0x11c91f);else for(const _0x2cb0f5 of _0x11c91f){if(_0x2a688e['includes'](_0x2cb0f5[_0x124d45(0x1ca)]()))_0x4e8a49['push'](_0x2cb0f5);}_0x4e8a49[_0x124d45(0x17d)]>0x0&&_0x4e8a49['forEach'](_0x4ca02c=>{const _0x6d7166=_0x124d45;let _0x3c0ed6=0x3c;if(_0x246930){let _0x52b560=0x0;Object['values'](_0x501196)['forEach'](_0x54a135=>{if(_0x54a135>_0x52b560)_0x52b560=_0x54a135;}),_0x3c0ed6=_0x52b560>0x0?_0x52b560:0x78;}else _0x3c0ed6=getWarmupRobust(_0x501196,_0x4ca02c);const _0x139528=new Date(_0x3fb1f4-_0x3c0ed6*0xea60);_0x4915af['push']({'eventTime':_0x3fb1f4,'triggerTime':_0x139528[_0x6d7166(0x179)](),'room':_0x4ca02c,'minutes':_0x3c0ed6,'reason':_0x30a0d3,'isGlobal':_0x246930});});}}catch(_0x37ec32){}_0x4915af[_0x124d45(0x18a)]((_0x55cbe0,_0x1c2e01)=>_0x55cbe0[_0x124d45(0x173)]-_0x1c2e01[_0x124d45(0x173)]);const _0x17f1d3=_0x4915af['slice'](0x0,0x1e);await _0x3c9e6d[_0x124d45(0x1c8)](_0x124d45(0x1ce),{'val':JSON['stringify'](_0x17f1d3),'ack':!![]});}async function monitorEnforcements(_0x4b4ec9){const _0x23258a=a1_0x395e36;try{const _0x389a60=_0x23258a(0x18e),_0x13ae8c=await _0x4b4ec9[_0x23258a(0x1e8)](_0x389a60);if(!_0x13ae8c||!_0x13ae8c[_0x23258a(0x159)])return;let _0x14fdfe=[];try{_0x14fdfe=JSON['parse'](_0x13ae8c[_0x23258a(0x159)]);}catch(_0x18e471){return;}if(!Array[_0x23258a(0x1b7)](_0x14fdfe)||_0x14fdfe[_0x23258a(0x17d)]===0x0)return;const _0x410409=Date['now'](),_0xdf1464=_0x4b4ec9[_0x23258a(0x1ed)][_0x23258a(0x1cb)]||[];let _0x343808=![];for(let _0x2d0e05=_0x14fdfe[_0x23258a(0x17d)]-0x1;_0x2d0e05>=0x0;_0x2d0e05--){const _0x837b80=_0x14fdfe[_0x2d0e05];if(_0x410409>=_0x837b80['until']){_0x4b4ec9[_0x23258a(0x197)]['info'](_0x23258a(0x186)+_0x837b80[_0x23258a(0x1d0)]+_0x23258a(0x19b)),_0x14fdfe['splice'](_0x2d0e05,0x1),_0x343808=!![];continue;}const _0x1c9a6a=_0xdf1464[_0x23258a(0x193)](_0x5ad90f=>normalize(_0x5ad90f[_0x23258a(0x1c4)])===normalize(_0x837b80[_0x23258a(0x1d0)])&&(_0x5ad90f[_0x23258a(0x171)]===_0x23258a(0x169)||_0x5ad90f[_0x23258a(0x171)]===_0x23258a(0x1d7)));if(_0x1c9a6a){const _0x29bd31=await findRelatedId(_0x4b4ec9,_0x1c9a6a['id'],_0x23258a(0x189));if(_0x29bd31){const _0x351e79=await _0x4b4ec9[_0x23258a(0x1bc)](_0x29bd31);_0x351e79&&typeof _0x351e79['val']===_0x23258a(0x167)&&(_0x351e79['val']<0xf&&(_0x4b4ec9[_0x23258a(0x197)][_0x23258a(0x194)]('ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x837b80['room']+'\x20auf\x20'+_0x351e79[_0x23258a(0x159)]+_0x23258a(0x131)+_0x837b80[_0x23258a(0x19d)]+_0x23258a(0x187)),await _0x4b4ec9['setForeignStateAsync'](_0x29bd31,_0x837b80[_0x23258a(0x19d)]),await logAutomationAction(_0x4b4ec9,_0x23258a(0x158)+_0x837b80[_0x23258a(0x1d0)]+':\x20'+_0x351e79[_0x23258a(0x159)]+_0x23258a(0x162)+_0x837b80['target']+_0x23258a(0x1ec))));}}}_0x343808&&await _0x4b4ec9['setStateAsync'](_0x389a60,{'val':JSON['stringify'](_0x14fdfe),'ack':!![]});}catch(_0x382d32){_0x4b4ec9[_0x23258a(0x197)]['error']('Enforcement\x20Monitor\x20Error:\x20'+_0x382d32[_0x23258a(0x16d)]);}}async function checkCalendarTriggers(_0x45fbc6){const _0x2c36c4=a1_0x395e36;if(!_0x45fbc6[_0x2c36c4(0x1ed)][_0x2c36c4(0x182)]||!_0x45fbc6[_0x2c36c4(0x1ed)][_0x2c36c4(0x152)])return;await updateSchedulePreview(_0x45fbc6);let _0x1f0507={},_0x289d32={};try{const _0x549826=await _0x45fbc6[_0x2c36c4(0x1e8)](_0x2c36c4(0x14a));if(_0x549826&&_0x549826[_0x2c36c4(0x159)])_0x1f0507=JSON[_0x2c36c4(0x1da)](_0x549826[_0x2c36c4(0x159)]);const _0x4d3662=await _0x45fbc6[_0x2c36c4(0x1e8)](_0x2c36c4(0x1af));if(_0x4d3662&&_0x4d3662[_0x2c36c4(0x159)])_0x289d32=JSON[_0x2c36c4(0x1da)](_0x4d3662[_0x2c36c4(0x159)]);}catch(_0xe871d8){}let _0x2edd38={'default':0x15};try{const _0x2c4385=await _0x45fbc6[_0x2c36c4(0x1e8)](_0x2c36c4(0x18d));if(_0x2c4385&&_0x2c4385['val'])_0x2edd38=JSON['parse'](_0x2c4385['val']);}catch(_0x5394a6){}let _0x31e0a9=[];try{const _0x4c15c3=await _0x45fbc6[_0x2c36c4(0x1e8)](_0x2c36c4(0x18e));if(_0x4c15c3&&_0x4c15c3['val'])_0x31e0a9=JSON[_0x2c36c4(0x1da)](_0x4c15c3['val']);}catch(_0x6b1fa9){}try{const _0x360a89=await _0x45fbc6[_0x2c36c4(0x1bc)](_0x45fbc6[_0x2c36c4(0x1ed)][_0x2c36c4(0x152)]+_0x2c36c4(0x18f));if(!_0x360a89||!_0x360a89[_0x2c36c4(0x159)])return;const _0x7c428d=JSON[_0x2c36c4(0x1da)](_0x360a89[_0x2c36c4(0x159)]),_0x5d46dc=Date[_0x2c36c4(0x17f)](),_0x562de6=_0x45fbc6[_0x2c36c4(0x1ed)]['devices']||[],_0x513c56=_0x45fbc6[_0x2c36c4(0x1ed)][_0x2c36c4(0x168)]||[];let _0x4a4589=![];for(const _0x3ae1c2 of _0x7c428d){if(_0x3ae1c2[_0x2c36c4(0x196)]&&_0x513c56['length']>0x0&&!_0x513c56['includes'](_0x3ae1c2[_0x2c36c4(0x196)]))continue;const _0x47824f=_0x3ae1c2[_0x2c36c4(0x166)]||_0x3ae1c2[_0x2c36c4(0x172)]||_0x3ae1c2[_0x2c36c4(0x1b6)];if(!_0x47824f)continue;const _0x35b15c=new Date(_0x47824f);if(isNaN(_0x35b15c[_0x2c36c4(0x179)]()))continue;const _0x870549=(_0x3ae1c2[_0x2c36c4(0x140)]||_0x3ae1c2[_0x2c36c4(0x1c0)]||'')[_0x2c36c4(0x1ca)]();if(_0x870549[_0x2c36c4(0x13d)](_0x2c36c4(0x149))||_0x870549[_0x2c36c4(0x13d)]('rÃ¼ckkehr')||_0x870549['includes'](_0x2c36c4(0x16b))){let _0x38a435=0x0;Object[_0x2c36c4(0x1ee)](_0x1f0507)[_0x2c36c4(0x188)](_0x28829b=>{if(_0x28829b>_0x38a435)_0x38a435=_0x28829b;});if(_0x38a435===0x0)_0x38a435=0x78;const _0x672761=_0x35b15c[_0x2c36c4(0x179)]()-_0x38a435*0xea60;_0x5d46dc>=_0x672761&&_0x5d46dc<_0x35b15c['getTime']()&&(_0x45fbc6[_0x2c36c4(0x1e1)]!=='normal'&&(_0x45fbc6[_0x2c36c4(0x197)][_0x2c36c4(0x160)]('ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20'+_0x38a435+'\x20min).'),await _0x45fbc6[_0x2c36c4(0x1c8)](_0x2c36c4(0x1e7),{'val':_0x2c36c4(0x19f),'ack':![]})));}for(const _0x38cfee of _0x562de6){if(_0x38cfee[_0x2c36c4(0x1c4)]){const _0x3d7daa=_0x38cfee[_0x2c36c4(0x1c4)][_0x2c36c4(0x1ca)](),_0x4120e8=(_0x38cfee[_0x2c36c4(0x1c5)]||'')['toLowerCase']();let _0x43b94c=_0x870549[_0x2c36c4(0x13d)](_0x3d7daa);!_0x43b94c&&_0x4120e8[_0x2c36c4(0x17d)]>0x3&&_0x870549[_0x2c36c4(0x13d)](_0x4120e8)&&(_0x43b94c=!![]);if(_0x43b94c){const _0x290888=getWarmupRobust(_0x1f0507,_0x38cfee['location']),_0x8ee879=_0x289d32[_0x38cfee[_0x2c36c4(0x1c4)]]||_0x2c36c4(0x19e),_0x2513bf=_0x35b15c[_0x2c36c4(0x179)]()-_0x290888*0xea60;if(_0x5d46dc>=_0x2513bf&&_0x5d46dc<_0x35b15c[_0x2c36c4(0x179)]()){const _0x481f60=lastActions[_0x2c36c4(0x142)+_0x38cfee[_0x2c36c4(0x1c4)]];if(_0x481f60&&_0x5d46dc-_0x481f60<CAL_COOLDOWN_MS)continue;const _0x194115=await findRelatedId(_0x45fbc6,_0x38cfee['id'],_0x2c36c4(0x189));if(_0x194115){let _0x5f11e1=_0x2edd38[_0x38cfee[_0x2c36c4(0x1c4)]];if(_0x5f11e1===undefined)_0x5f11e1=_0x2edd38[_0x2c36c4(0x134)];if(_0x5f11e1===undefined)_0x5f11e1=0x15;const _0xbbdd8=await _0x45fbc6[_0x2c36c4(0x1bc)](_0x194115);if(_0xbbdd8&&typeof _0xbbdd8[_0x2c36c4(0x159)]==='number'&&_0xbbdd8[_0x2c36c4(0x159)]<_0x5f11e1-0.5){_0x45fbc6[_0x2c36c4(0x197)][_0x2c36c4(0x160)](_0x2c36c4(0x1c3)+_0x8ee879+_0x2c36c4(0x185)+_0x38cfee[_0x2c36c4(0x1c4)]+'\x27\x20(Match:\x20'+_0x870549+')\x20aktiv.\x20Heize\x20auf\x20'+_0x5f11e1+'Â°C\x20(Vorlauf:\x20'+_0x290888+'\x20min).'),await _0x45fbc6[_0x2c36c4(0x1a7)](_0x194115,_0x5f11e1),await logAutomationAction(_0x45fbc6,_0x2c36c4(0x145)+_0x38cfee[_0x2c36c4(0x1c4)]+'\x20->\x20'+_0x5f11e1+_0x2c36c4(0x1e2)+_0x8ee879+')'),lastActions[_0x2c36c4(0x142)+_0x38cfee[_0x2c36c4(0x1c4)]]=_0x5d46dc;const _0xfd75d4=_0x31e0a9[_0x2c36c4(0x15d)](_0x2f491a=>_0x2f491a[_0x2c36c4(0x1d0)]===_0x38cfee[_0x2c36c4(0x1c4)]);if(_0xfd75d4!==-0x1)_0x31e0a9[_0x2c36c4(0x13f)](_0xfd75d4,0x1);_0x31e0a9[_0x2c36c4(0x1d3)]({'room':_0x38cfee[_0x2c36c4(0x1c4)],'target':_0x5f11e1,'until':_0x35b15c[_0x2c36c4(0x179)]()}),_0x4a4589=!![];}}}}}}}_0x4a4589&&await _0x45fbc6['setStateAsync'](_0x2c36c4(0x18e),{'val':JSON[_0x2c36c4(0x156)](_0x31e0a9),'ack':!![]});}catch(_0x3ae74a){_0x45fbc6['log']['warn'](_0x2c36c4(0x15e)+_0x3ae74a[_0x2c36c4(0x16d)]);}}async function manageMpcIntervention(_0x4742e8,_0x303434,_0x7be011){const _0x51aa0e=a1_0x395e36;try{const _0x3ca421=_0x51aa0e(0x1dc),_0x447fca=await _0x4742e8[_0x51aa0e(0x1e8)](_0x3ca421);let _0x3ac953=[];if(_0x447fca&&_0x447fca['val'])try{_0x3ac953=JSON['parse'](_0x447fca[_0x51aa0e(0x159)]);}catch(_0x3180e4){}const _0xbd6e28=_0x3ac953[_0x51aa0e(0x150)](_0x303434);if(_0x7be011===_0x51aa0e(0x181))_0xbd6e28===-0x1&&(_0x3ac953['push'](_0x303434),await _0x4742e8['setStateAsync'](_0x3ca421,{'val':JSON['stringify'](_0x3ac953),'ack':!![]}));else _0x7be011===_0x51aa0e(0x15c)&&(_0xbd6e28!==-0x1&&(_0x3ac953['splice'](_0xbd6e28,0x1),await _0x4742e8['setStateAsync'](_0x3ca421,{'val':JSON['stringify'](_0x3ac953),'ack':!![]})));}catch(_0x52c603){}}async function cleanupGhostInterventions(_0x104deb){const _0x2d5207=a1_0x395e36;try{const _0xa3be6=_0x2d5207(0x1dc),_0x30d675=await _0x104deb[_0x2d5207(0x1e8)](_0xa3be6);if(!_0x30d675||!_0x30d675[_0x2d5207(0x159)])return;const _0x169ce3=JSON[_0x2d5207(0x1da)](_0x30d675[_0x2d5207(0x159)]);if(!Array[_0x2d5207(0x1b7)](_0x169ce3)||_0x169ce3['length']===0x0)return;let _0x4134c={'default':0x15};try{const _0xf8c68f=await _0x104deb['getStateAsync']('analysis.energy.warmupTargets');if(_0xf8c68f&&_0xf8c68f[_0x2d5207(0x159)])_0x4134c=JSON[_0x2d5207(0x1da)](_0xf8c68f['val']);}catch(_0x5206e2){}let _0x378ba2=[];try{const _0x3dad2c=await _0x104deb[_0x2d5207(0x1e8)](_0x2d5207(0x1b5));if(_0x3dad2c&&_0x3dad2c[_0x2d5207(0x159)])_0x378ba2=JSON[_0x2d5207(0x1da)](_0x3dad2c[_0x2d5207(0x159)]);}catch(_0x5f4f0f){}let _0x35a777={},_0x12b30a=![];try{const _0x1edbd6=await _0x104deb['getStateAsync'](_0x2d5207(0x1b0));if(_0x1edbd6&&_0x1edbd6[_0x2d5207(0x159)])_0x35a777=JSON[_0x2d5207(0x1da)](_0x1edbd6['val']);}catch(_0x2f553f){}if(_0x35a777['_meta']){const _0x26c585=Date[_0x2d5207(0x17f)]();for(const [_0x3bd40d,_0x512616]of Object[_0x2d5207(0x1ad)](_0x35a777[_0x2d5207(0x1de)])){_0x26c585-_0x512616>PENALTY_TTL&&(delete _0x35a777[_0x3bd40d],delete _0x35a777[_0x2d5207(0x1de)][_0x3bd40d],_0x12b30a=!![],_0x104deb[_0x2d5207(0x197)][_0x2d5207(0x160)]('ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27'+_0x3bd40d+_0x2d5207(0x1a2)));}}const _0x35dfef=_0x104deb[_0x2d5207(0x1ed)][_0x2d5207(0x1cb)]||[];let _0xd2846e=![];for(let _0x32ecbb=_0x169ce3['length']-0x1;_0x32ecbb>=0x0;_0x32ecbb--){const _0x5eed6f=_0x169ce3[_0x32ecbb],_0x53a763=_0x35dfef[_0x2d5207(0x193)](_0x381011=>normalize(_0x381011['location'])===normalize(_0x5eed6f)&&(_0x381011['type']===_0x2d5207(0x169)||_0x381011['type']===_0x2d5207(0x1d7)));if(!_0x53a763){_0x104deb['log'][_0x2d5207(0x194)]('ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27'+_0x5eed6f+_0x2d5207(0x1b8)),_0x169ce3[_0x2d5207(0x13f)](_0x32ecbb,0x1),_0xd2846e=!![];continue;}if(_0x53a763){const _0x1cb878=await findRelatedId(_0x104deb,_0x53a763['id'],_0x2d5207(0x189)),_0x519b47=await _0x104deb[_0x2d5207(0x1bc)](_0x53a763['id']);if(_0x1cb878){const _0x4e47a4=await _0x104deb[_0x2d5207(0x1bc)](_0x1cb878);if(_0x4e47a4&&typeof _0x4e47a4[_0x2d5207(0x159)]===_0x2d5207(0x167)){let _0x3c0e8d=![],_0x55aad0='';Math[_0x2d5207(0x135)](_0x4e47a4[_0x2d5207(0x159)]-ECO_TEMP)>0.5&&(_0x3c0e8d=!![],_0x55aad0='manual');if(!_0x3c0e8d&&_0x519b47&&typeof _0x519b47[_0x2d5207(0x159)]===_0x2d5207(0x167)){const _0x517877=_0x4134c[_0x5eed6f]||_0x4134c[_0x2d5207(0x134)]||0x15;_0x519b47[_0x2d5207(0x159)]<_0x517877+0.2&&(_0x3c0e8d=!![],_0x55aad0='too_cold');}if(_0x3c0e8d){if(_0x55aad0==='manual'){_0x104deb[_0x2d5207(0x197)]['info'](_0x2d5207(0x178)+_0x5eed6f+'\x20ist\x20auf\x20'+_0x4e47a4[_0x2d5207(0x159)]+_0x2d5207(0x164)+ECO_TEMP+'Â°C).\x20Entferne\x20Status.');const _0x4ba8f9=lastActions[_0x2d5207(0x142)+_0x5eed6f],_0x12452c=_0x4ba8f9&&Date[_0x2d5207(0x17f)]()-_0x4ba8f9<0x2*0x3c*0x3e8;if(!_0x12452c&&_0x4e47a4['val']>ECO_TEMP+0.5){_0x104deb[_0x2d5207(0x12f)]&&(_0x104deb['log'][_0x2d5207(0x160)]('ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20'+_0x5eed6f+_0x2d5207(0x136)),_0x104deb[_0x2d5207(0x12f)](_0x2d5207(0x138),{'room':_0x5eed6f}));const _0x3aa336=_0x5eed6f+'_'+new Date()[_0x2d5207(0x14f)]();if(!_0x35a777[_0x3aa336]){_0x35a777[_0x3aa336]=0x1;if(!_0x35a777[_0x2d5207(0x1de)])_0x35a777['_meta']={};_0x35a777[_0x2d5207(0x1de)][_0x3aa336]=Date[_0x2d5207(0x17f)](),_0x12b30a=!![];}}else _0x12452c&&_0x104deb['log']['info'](_0x2d5207(0x14c)+_0x5eed6f+_0x2d5207(0x155));}else{if(_0x55aad0===_0x2d5207(0x192)){let _0x4d5ae5=![];if(_0x378ba2['find'](_0x597255=>_0x597255[_0x2d5207(0x1d0)]===_0x5eed6f))_0x4d5ae5=!![];const _0x1cc17e=_0x35dfef[_0x2d5207(0x132)](_0x49ace3=>normalize(_0x49ace3['location'])===normalize(_0x5eed6f)&&(_0x49ace3['type']===_0x2d5207(0x1e3)||_0x49ace3[_0x2d5207(0x171)]===_0x2d5207(0x1e9)||_0x49ace3[_0x2d5207(0x171)]===_0x2d5207(0x1aa)));for(const _0xb1b694 of _0x1cc17e){try{const _0x471ca5=await _0x104deb['getForeignStateAsync'](_0xb1b694['id']);if(_0x471ca5&&(_0x471ca5['val']===!![]||_0x471ca5['val']===0x1||String(_0x471ca5[_0x2d5207(0x159)])[_0x2d5207(0x1ca)]()===_0x2d5207(0x1d8)))_0x4d5ae5=!![];}catch(_0x4b2d85){}}if(_0x4d5ae5)_0x104deb[_0x2d5207(0x197)][_0x2d5207(0x160)](_0x2d5207(0x1d6)+_0x5eed6f+_0x2d5207(0x147));else{const _0x143382=_0x4134c[_0x5eed6f]||_0x4134c['default']||0x15;_0x104deb[_0x2d5207(0x197)][_0x2d5207(0x160)](_0x2d5207(0x175)+_0x5eed6f+_0x2d5207(0x163)+_0x519b47['val']+'Â°C\x20<\x20'+(_0x143382+0.2)+'Â°C).\x20Sparmodus\x20beendet!'),await _0x104deb['setForeignStateAsync'](_0x1cb878,_0x143382),await logAutomationAction(_0x104deb,_0x2d5207(0x1dd)+_0x5eed6f+_0x2d5207(0x1ba)+_0x143382+'Â°C'),lastActions['rescue_'+_0x5eed6f]=Date[_0x2d5207(0x17f)]();}}}_0x169ce3[_0x2d5207(0x13f)](_0x32ecbb,0x1),_0xd2846e=!![];}}}}}_0xd2846e&&await _0x104deb[_0x2d5207(0x1c8)](_0xa3be6,{'val':JSON[_0x2d5207(0x156)](_0x169ce3),'ack':!![]}),_0x12b30a&&await _0x104deb[_0x2d5207(0x1c8)]('analysis.energy.rlPenalties',{'val':JSON[_0x2d5207(0x156)](_0x35a777),'ack':!![]});}catch(_0x6eef37){}}async function applyEnergySavings(_0x269e06,_0x2364ae){const _0x2cb626=a1_0x395e36;await cleanupGhostInterventions(_0x269e06);if(!_0x2364ae||_0x2364ae[_0x2cb626(0x17d)]===0x0)return;const _0x5cd71=_0x269e06[_0x2cb626(0x1ed)][_0x2cb626(0x1cb)]||[],_0x2e4979=Date['now']();for(const _0x2d83f7 of _0x2364ae){const _0x10057a=_0x2d83f7[_0x2cb626(0x1d0)],_0x20ba1f=_0x2d83f7['minutes_safe'],_0x122e75=_0x2d83f7[_0x2cb626(0x19d)]||0x15;if(lastActions[_0x2cb626(0x18c)+_0x10057a]&&_0x2e4979-lastActions[_0x2cb626(0x18c)+_0x10057a]<RESCUE_LOCK_MS)continue;const _0x18067e=_0x5cd71[_0x2cb626(0x193)](_0x2439fa=>normalize(_0x2439fa['location'])===normalize(_0x10057a)&&(_0x2439fa[_0x2cb626(0x171)]===_0x2cb626(0x169)||_0x2439fa[_0x2cb626(0x171)]===_0x2cb626(0x1d7)));if(!_0x18067e)continue;const _0x520946=await findRelatedId(_0x269e06,_0x18067e['id'],_0x2cb626(0x189));if(_0x520946){if(lastActions['mpc_'+_0x10057a]&&_0x2e4979-lastActions[_0x2cb626(0x1bf)+_0x10057a]<0x1e*0x3c*0x3e8)continue;const _0x461d65=await _0x269e06[_0x2cb626(0x1bc)](_0x520946);if(_0x461d65&&typeof _0x461d65['val']===_0x2cb626(0x167)){const _0x31bb0b=_0x461d65[_0x2cb626(0x159)];_0x31bb0b!==ECO_TEMP&&await manageMpcIntervention(_0x269e06,_0x10057a,_0x2cb626(0x15c));if(_0x20ba1f>0x1e)_0x31bb0b>ECO_TEMP+0.5&&(_0x269e06[_0x2cb626(0x197)][_0x2cb626(0x160)](_0x2cb626(0x1a8)+_0x10057a+_0x2cb626(0x14b)+ECO_TEMP+_0x2cb626(0x1eb)+_0x20ba1f+_0x2cb626(0x1ab)),await _0x269e06[_0x2cb626(0x1a7)](_0x520946,ECO_TEMP),await manageMpcIntervention(_0x269e06,_0x10057a,_0x2cb626(0x181)),lastActions[_0x2cb626(0x1bf)+_0x10057a]=_0x2e4979,await logAutomationAction(_0x269e06,'[MPC]\x20'+_0x10057a+_0x2cb626(0x148)+ECO_TEMP+'Â°C'));else _0x20ba1f<=0xf&&(_0x31bb0b<_0x122e75&&(_0x269e06[_0x2cb626(0x197)]['info'](_0x2cb626(0x1d4)+_0x10057a+_0x2cb626(0x1ac)+_0x122e75+'Â°C!\x20(Puffer\x20leer).'),await _0x269e06[_0x2cb626(0x1a7)](_0x520946,_0x122e75),await manageMpcIntervention(_0x269e06,_0x10057a,_0x2cb626(0x15c)),lastActions[_0x2cb626(0x1bf)+_0x10057a]=_0x2e4979,await logAutomationAction(_0x269e06,_0x2cb626(0x16a)+_0x10057a+':\x20Aufheizen\x20auf\x20'+_0x122e75+'Â°C')));}}else _0x269e06['log'][_0x2cb626(0x194)](_0x2cb626(0x1c7)+_0x10057a+_0x2cb626(0x1e5));}}module[a1_0x395e36(0x1d9)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};