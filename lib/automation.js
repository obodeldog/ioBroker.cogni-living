const a1_0x5ce881=a1_0x5751;(function(_0x2654b1,_0x16bea6){const _0x280cf9=a1_0x5751,_0x57c83c=_0x2654b1();while(!![]){try{const _0x3b6e48=-parseInt(_0x280cf9(0x124))/0x1*(parseInt(_0x280cf9(0x100))/0x2)+-parseInt(_0x280cf9(0x126))/0x3*(parseInt(_0x280cf9(0x106))/0x4)+-parseInt(_0x280cf9(0x105))/0x5+-parseInt(_0x280cf9(0x123))/0x6+parseInt(_0x280cf9(0x119))/0x7*(parseInt(_0x280cf9(0x10d))/0x8)+-parseInt(_0x280cf9(0x122))/0x9*(parseInt(_0x280cf9(0x11a))/0xa)+-parseInt(_0x280cf9(0x109))/0xb*(-parseInt(_0x280cf9(0x114))/0xc);if(_0x3b6e48===_0x16bea6)break;else _0x57c83c['push'](_0x57c83c['shift']());}catch(_0x14f434){_0x57c83c['push'](_0x57c83c['shift']());}}}(a1_0x2f0d,0x234aa));const a1_0x202a69=(function(){let _0x4a40fb=!![];return function(_0x2a9207,_0x3cec06){const _0x23e40a=_0x4a40fb?function(){const _0x4dd1ea=a1_0x5751;if(_0x3cec06){const _0x1fa6be=_0x3cec06[_0x4dd1ea(0x129)](_0x2a9207,arguments);return _0x3cec06=null,_0x1fa6be;}}:function(){};return _0x4a40fb=![],_0x23e40a;};}()),a1_0x153b37=a1_0x202a69(this,function(){const _0x234625=a1_0x5751;return a1_0x153b37[_0x234625(0x11c)]()[_0x234625(0x127)](_0x234625(0x10c))[_0x234625(0x11c)]()['constructor'](a1_0x153b37)['search'](_0x234625(0x10c));});a1_0x153b37();function a1_0x5751(_0xcf0941,_0x16a98f){const _0x55247c=a1_0x2f0d();return a1_0x5751=function(_0x153b37,_0x202a69){_0x153b37=_0x153b37-0xfc;let _0x2f0dbb=_0x55247c[_0x153b37];return _0x2f0dbb;},a1_0x5751(_0xcf0941,_0x16a98f);}'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function normalize(_0x40dd4){const _0x5bb46a=a1_0x5751;if(!_0x40dd4)return'';return _0x40dd4[_0x5bb46a(0x102)]()[_0x5bb46a(0x112)](/\s+/g,'')['trim']();}async function handlePrediction(_0x1091da,_0x42580c,_0x6dcbeb){const _0x5b06c7=a1_0x5751;if(!_0x42580c||_0x42580c==='Unknown')return;let _0x1a637c='off',_0x179da3=0.6;try{const _0x38035f=await _0x1091da[_0x5b06c7(0x12b)]('analysis.automation.mode');if(_0x38035f&&_0x38035f['val'])_0x1a637c=_0x38035f['val'];const _0x4ecb1c=await _0x1091da[_0x5b06c7(0x12b)](_0x5b06c7(0xfc));if(_0x4ecb1c&&_0x4ecb1c['val'])_0x179da3=_0x4ecb1c['val'];}catch(_0x2a6999){}if(_0x1a637c===_0x5b06c7(0x11e))return;if(_0x6dcbeb<_0x179da3)return;const _0x3080f3=Date[_0x5b06c7(0xfd)]();if(lastActions[_0x42580c]&&_0x3080f3-lastActions[_0x42580c]<COOLDOWN_MS)return;const _0x545010=_0x1091da[_0x5b06c7(0x115)][_0x5b06c7(0x125)]||[],_0x535b0d=normalize(_0x42580c),_0x2249db=_0x545010['find'](_0x1c10b0=>{const _0x2d9a99=_0x5b06c7;return normalize(_0x1c10b0[_0x2d9a99(0x120)])===_0x535b0d&&(_0x1c10b0[_0x2d9a99(0x116)]===_0x2d9a99(0xfe)||_0x1c10b0[_0x2d9a99(0x116)]===_0x2d9a99(0x103)||_0x1c10b0['type']===_0x2d9a99(0x10e));});if(!_0x2249db){const _0x1222c8=_0x5b06c7(0x113)+_0x42580c+'\x27\x20(norm:\x20\x27'+_0x535b0d+_0x5b06c7(0x12a);_0x1091da[_0x5b06c7(0x10b)]['debug'](_0x1222c8);return;}const _0x273e49=await aiAgent[_0x5b06c7(0x110)](_0x1091da,_0x42580c,_0x2249db[_0x5b06c7(0x118)],_0x6dcbeb);if(!_0x273e49[_0x5b06c7(0x11f)]){_0x1091da['log'][_0x5b06c7(0x121)]('ü§ñ\x20Butler\x20Blocked:\x20'+_0x42580c+'\x20->\x20'+_0x273e49[_0x5b06c7(0x128)]),await _0x1091da[_0x5b06c7(0x107)]('analysis.automation.lastAction',{'val':_0x5b06c7(0x117)+_0x273e49[_0x5b06c7(0x128)],'ack':!![]});return;}const _0x3efa8f=_0x5b06c7(0x11d)+_0x42580c+_0x5b06c7(0x111)+_0x2249db[_0x5b06c7(0x118)]+'\x20('+_0x273e49[_0x5b06c7(0x128)]+')';await _0x1091da[_0x5b06c7(0x107)]('analysis.automation.lastAction',{'val':'['+_0x1a637c[_0x5b06c7(0x10f)]()+']\x20'+_0x3efa8f,'ack':!![]});if(_0x1a637c===_0x5b06c7(0x108))_0x1091da['log']['info']('üëÄ\x20SIMULATION:\x20'+_0x3efa8f);else{if(_0x1a637c==='active'){_0x1091da[_0x5b06c7(0x10b)][_0x5b06c7(0x104)](_0x5b06c7(0x11b)+_0x3efa8f);const _0x3e3f95=await _0x1091da['getForeignStateAsync'](_0x2249db['id']);if(_0x3e3f95&&(_0x3e3f95[_0x5b06c7(0xff)]===!![]||_0x3e3f95[_0x5b06c7(0xff)]>0x0)){}else await _0x1091da[_0x5b06c7(0x10a)](_0x2249db['id'],!![]);lastActions[_0x42580c]=_0x3080f3;}}}module[a1_0x5ce881(0x101)]={'handlePrediction':handlePrediction};function a1_0x2f0d(){const _0x4b92f2=['type','[BLOCKED]\x20','name','7SYkxkO','10EoaiRl','‚ö°\x20ACTION:\x20','toString','Pr√§diktion:\x20','off','approved','location','debug','2573658Lxxqmn','146628QiqmWN','1979ImGiUm','devices','421089EELnop','search','reason','apply','\x27),\x20but\x20found\x20no\x20matching\x20light\x20device.','getStateAsync','analysis.automation.confidenceThreshold','now','light','val','222nQknCO','exports','toLowerCase','dimmer','info','1225205zKkdAG','8EENWLC','setStateAsync','simulate','9603YYwqGx','setForeignStateAsync','log','(((.+)+)+)+$','963912HAESCH','switch','toUpperCase','consultButler','\x20->\x20Schalte\x20','replace','üîç\x20Device-Search\x20failed:\x20Predicted\x20\x27','14844ZobaNE','config'];a1_0x2f0d=function(){return _0x4b92f2;};return a1_0x2f0d();}