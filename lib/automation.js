const a1_0x451efa=a1_0x23f4;(function(_0x4848dd,_0x53d52e){const _0xaa2df1=a1_0x23f4,_0x59bb63=_0x4848dd();while(!![]){try{const _0xa6fc73=parseInt(_0xaa2df1(0x16a))/0x1+-parseInt(_0xaa2df1(0x1e2))/0x2+parseInt(_0xaa2df1(0x1a9))/0x3+parseInt(_0xaa2df1(0x1d1))/0x4+-parseInt(_0xaa2df1(0x133))/0x5+parseInt(_0xaa2df1(0x1dc))/0x6*(parseInt(_0xaa2df1(0x1e0))/0x7)+parseInt(_0xaa2df1(0x1c7))/0x8*(-parseInt(_0xaa2df1(0x15b))/0x9);if(_0xa6fc73===_0x53d52e)break;else _0x59bb63['push'](_0x59bb63['shift']());}catch(_0x3d9201){_0x59bb63['push'](_0x59bb63['shift']());}}}(a1_0x53c0,0xa8c4a));const a1_0x13e180=(function(){let _0x4a7a60=!![];return function(_0x53e81d,_0x2fd639){const _0x589114=_0x4a7a60?function(){const _0x4e5d61=a1_0x23f4;if(_0x2fd639){const _0x39dc3c=_0x2fd639[_0x4e5d61(0x184)](_0x53e81d,arguments);return _0x2fd639=null,_0x39dc3c;}}:function(){};return _0x4a7a60=![],_0x589114;};}()),a1_0x483f87=a1_0x13e180(this,function(){const _0x32b6b6=a1_0x23f4;return a1_0x483f87[_0x32b6b6(0x1b9)]()[_0x32b6b6(0x131)]('(((.+)+)+)+$')['toString']()[_0x32b6b6(0x175)](a1_0x483f87)[_0x32b6b6(0x131)]('(((.+)+)+)+$');});a1_0x483f87();function a1_0x23f4(_0x398360,_0x20d8da){const _0x57eecf=a1_0x53c0();return a1_0x23f4=function(_0x483f87,_0x13e180){_0x483f87=_0x483f87-0x121;let _0x53c064=_0x57eecf[_0x483f87];return _0x53c064;},a1_0x23f4(_0x398360,_0x20d8da);}'use strict';const aiAgent=require(a1_0x451efa(0x1be)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x4ac2f0){const _0x48742c=a1_0x451efa;if(!_0x4ac2f0)return'';return _0x4ac2f0[_0x48742c(0x17f)]()[_0x48742c(0x1d8)](/\s+/g,'')['trim']();}function getWarmupRobust(_0x436cb9,_0x5d0b1a){const _0x2a4d58=a1_0x451efa;if(!_0x436cb9||!_0x5d0b1a)return 0x3c;if(_0x436cb9[_0x5d0b1a]!==undefined)return _0x436cb9[_0x5d0b1a];const _0x3c2814=_0x5d0b1a['toLowerCase']()[_0x2a4d58(0x1d8)](/Ã¤/g,'ae')[_0x2a4d58(0x1d8)](/Ã¶/g,'oe')[_0x2a4d58(0x1d8)](/Ã¼/g,'ue')[_0x2a4d58(0x1d8)](/ÃŸ/g,'ss')['replace'](/\s+/g,'_')['replace'](/[^a-z0-9_]/g,'');if(_0x436cb9[_0x3c2814]!==undefined)return _0x436cb9[_0x3c2814];return 0x3c;}async function logAutomationAction(_0xa4115d,_0x11efb2){const _0x58c280=a1_0x451efa;await _0xa4115d[_0x58c280(0x1a8)]('analysis.automation.lastAction',{'val':_0x11efb2,'ack':!![]});try{const _0x187758='analysis.automation.actionLog',_0x12b739=await _0xa4115d[_0x58c280(0x177)](_0x187758);let _0x26762e=[];if(_0x12b739&&_0x12b739[_0x58c280(0x172)])try{_0x26762e=JSON['parse'](_0x12b739[_0x58c280(0x172)]);}catch(_0x3b61f8){}_0x26762e['unshift']({'ts':Date[_0x58c280(0x18c)](),'msg':_0x11efb2});if(_0x26762e[_0x58c280(0x125)]>0x32)_0x26762e=_0x26762e[_0x58c280(0x1ae)](0x0,0x32);await _0xa4115d[_0x58c280(0x1a8)](_0x187758,{'val':JSON['stringify'](_0x26762e),'ack':!![]});}catch(_0x690560){}}async function handlePrediction(_0x270067,_0x220b99,_0x556ac6){const _0x4b6819=a1_0x451efa;if(!_0x220b99||_0x220b99===_0x4b6819(0x19a))return;let _0x4a86e4=_0x4b6819(0x190),_0x1b9021=0.6;try{const _0x1f8c28=await _0x270067['getStateAsync'](_0x4b6819(0x161));if(_0x1f8c28&&_0x1f8c28['val'])_0x4a86e4=_0x1f8c28[_0x4b6819(0x172)];const _0x4ec29d=await _0x270067['getStateAsync'](_0x4b6819(0x1de));if(_0x4ec29d&&_0x4ec29d[_0x4b6819(0x172)])_0x1b9021=_0x4ec29d[_0x4b6819(0x172)];}catch(_0xd1e585){}if(_0x4a86e4===_0x4b6819(0x190)||_0x556ac6<_0x1b9021)return;const _0x42a2b8=Date['now']();if(lastActions[_0x220b99]&&_0x42a2b8-lastActions[_0x220b99]<COOLDOWN_MS)return;const _0x156794=_0x270067['config'][_0x4b6819(0x174)]||[],_0x54138e=normalize(_0x220b99),_0x107d83=_0x156794[_0x4b6819(0x162)](_0x217c8d=>normalize(_0x217c8d[_0x4b6819(0x17e)])===_0x54138e&&(_0x217c8d[_0x4b6819(0x1cb)]===_0x4b6819(0x147)||_0x217c8d['type']===_0x4b6819(0x142)||_0x217c8d['type']===_0x4b6819(0x181)));if(!_0x107d83)return;const _0x4263c0=await aiAgent[_0x4b6819(0x121)](_0x270067,_0x220b99,_0x107d83[_0x4b6819(0x1d2)],_0x556ac6);if(!_0x4263c0[_0x4b6819(0x1d3)])return;const _0xb90f63=_0x4b6819(0x197)+_0x220b99+'\x20->\x20Schalte\x20'+_0x107d83[_0x4b6819(0x1d2)]+'\x20('+_0x4263c0[_0x4b6819(0x185)]+')';await logAutomationAction(_0x270067,'['+_0x4a86e4[_0x4b6819(0x18f)]()+']\x20'+_0xb90f63);if(_0x4a86e4===_0x4b6819(0x17c)){const _0x282e6e=await _0x270067[_0x4b6819(0x15a)](_0x107d83['id']);(!_0x282e6e||!_0x282e6e[_0x4b6819(0x172)]&&_0x282e6e[_0x4b6819(0x172)]!==!![])&&await _0x270067['setForeignStateAsync'](_0x107d83['id'],!![]),lastActions[_0x220b99]=_0x42a2b8;}}async function findRelatedId(_0x5c3276,_0x15ac22,_0x2f128f='setpoint'){const _0x36172b=a1_0x451efa;if(_0x2f128f===_0x36172b(0x130)&&_0x5c3276['config'][_0x36172b(0x1b3)]){let _0x3f0c91=_0x5c3276[_0x36172b(0x137)][_0x36172b(0x1b3)];if(typeof _0x3f0c91==='string')try{_0x3f0c91=JSON[_0x36172b(0x1db)](_0x3f0c91);}catch(_0x42d166){}if(_0x3f0c91&&_0x3f0c91[_0x15ac22])return _0x3f0c91[_0x15ac22];}if(_0x2f128f===_0x36172b(0x1a4)&&_0x5c3276[_0x36172b(0x137)]['valveMapping']){let _0x479cb1=_0x5c3276[_0x36172b(0x137)][_0x36172b(0x13c)];if(typeof _0x479cb1===_0x36172b(0x1ac))try{_0x479cb1=JSON[_0x36172b(0x1db)](_0x479cb1);}catch(_0x2bfb71){}if(_0x479cb1&&_0x479cb1[_0x15ac22])return _0x479cb1[_0x15ac22];}let _0x9f463=[];if(_0x2f128f===_0x36172b(0x130))_0x9f463=[{'s':_0x36172b(0x157),'t':_0x36172b(0x1bc)},{'s':_0x36172b(0x12b),'t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x36172b(0x12b),'t':'.4.SET_TEMPERATURE'},{'s':'ACTUAL_TEMPERATURE','t':'SET_POINT_TEMPERATURE'},{'s':_0x36172b(0x14d),'t':_0x36172b(0x171)},{'s':_0x36172b(0x14d),'t':_0x36172b(0x1b2)},{'s':_0x36172b(0x1da),'t':_0x36172b(0x164)},{'s':_0x36172b(0x178),'t':_0x36172b(0x179)},{'s':_0x36172b(0x129),'t':_0x36172b(0x199)},{'s':_0x36172b(0x1da),'t':_0x36172b(0x130)}];else _0x2f128f===_0x36172b(0x1a4)&&(_0x9f463=[{'s':'.1.ACTUAL_TEMPERATURE','t':'.1.LEVEL'},{'s':_0x36172b(0x12b),'t':_0x36172b(0x1e1)},{'s':_0x36172b(0x12b),'t':_0x36172b(0x18e)},{'s':_0x36172b(0x14d),'t':_0x36172b(0x1ba)},{'s':_0x36172b(0x1da),'t':_0x36172b(0x152)},{'s':_0x36172b(0x1da),'t':_0x36172b(0x14e)}]);for(const _0x15f31f of _0x9f463){if(_0x15ac22[_0x36172b(0x173)](_0x15f31f['s'])){const _0xbc0984=_0x15ac22[_0x36172b(0x1d8)](_0x15f31f['s'],_0x15f31f['t']),_0x2de250=await _0x5c3276[_0x36172b(0x151)](_0xbc0984);if(_0x2de250)return _0xbc0984;}}try{const _0x4c60d5=_0x15ac22[_0x36172b(0x13d)]('.');if(_0x4c60d5[_0x36172b(0x125)]>0x2){const _0x4f00ff=_0x4c60d5['slice'](0x0,-0x1)['join']('.'),_0x4bbdb1=await _0x5c3276['getForeignObjectsAsync'](_0x4f00ff+'.*'),_0x2b218a=[],_0xf19bc0=_0x15ac22[_0x36172b(0x13d)](/[._]+/)[_0x36172b(0x1cf)](_0x3bf937=>![_0x36172b(0x12a),'0',_0x36172b(0x124),_0x36172b(0x16d),'wert',_0x36172b(0x1da),_0x36172b(0x1d7),_0x36172b(0x1ca),_0x36172b(0x154),_0x36172b(0x1d0)][_0x36172b(0x173)](_0x3bf937['toLowerCase']()));for(const [_0x4d6e11,_0x5dd018]of Object[_0x36172b(0x139)](_0x4bbdb1)){if(_0x4d6e11===_0x15ac22)continue;if(_0x5dd018&&_0x5dd018[_0x36172b(0x159)]){const _0x10d8de=_0x4d6e11[_0x36172b(0x17f)](),_0x5dc4e4=(_0x5dd018['common'][_0x36172b(0x195)]||'')['toLowerCase'](),_0x4cb5e3=(_0x5dd018[_0x36172b(0x159)][_0x36172b(0x146)]||'')[_0x36172b(0x17f)]();let _0x26ea95=![];if(_0x2f128f===_0x36172b(0x130)&&_0x5dd018[_0x36172b(0x159)]['write']===!![])_0x26ea95=_0x10d8de[_0x36172b(0x173)](_0x36172b(0x19e))||_0x10d8de[_0x36172b(0x173)](_0x36172b(0x1d5))||_0x10d8de['includes'](_0x36172b(0x127))||_0x5dc4e4['includes'](_0x36172b(0x1cd))||_0x5dc4e4[_0x36172b(0x173)]('thermostat.setpoint');else _0x2f128f===_0x36172b(0x1a4)&&(_0x26ea95=_0x10d8de[_0x36172b(0x173)](_0x36172b(0x14e))||_0x10d8de['includes']('valve')||_0x10d8de[_0x36172b(0x173)]('stellwert')||_0x10d8de[_0x36172b(0x173)](_0x36172b(0x187))||_0x5dc4e4['includes'](_0x36172b(0x16b))||_0x5dc4e4['includes'](_0x36172b(0x18a))||_0x4cb5e3[_0x36172b(0x173)]('%'));if(_0x26ea95){const _0x114a34=_0x4d6e11['split'](/[._]+/)[_0x36172b(0x191)](_0x372262=>_0x372262[_0x36172b(0x17f)]());let _0x318c9d=0x0;_0xf19bc0[_0x36172b(0x13f)](_0x2fb7ff=>{const _0x26ca71=_0x36172b;if(_0x114a34[_0x26ca71(0x173)](_0x2fb7ff['toLowerCase']()))_0x318c9d++;}),_0x2b218a[_0x36172b(0x1d9)]({'id':_0x4d6e11,'score':_0x318c9d});}}}if(_0x2b218a[_0x36172b(0x125)]>0x0){_0x2b218a[_0x36172b(0x1df)]((_0x235da1,_0x1206b6)=>_0x1206b6[_0x36172b(0x1a3)]-_0x235da1['score']);if(_0x2b218a[0x0]['score']>0x0)return _0x2b218a[0x0]['id'];}}}catch(_0x465af6){}return null;}function a1_0x53c0(){const _0x55eb69=['Classic','.data.table','localeCompare','analysis.energy.ventilationAlerts','76336sTqDRk','info','Â°C\x20(Vorlauf:\x20','sensor','type','analysis.energy.warmupTimes','level.temperature','splice','filter','state','5366348AEZeiZ','name','approved',']:\x20Raum-Trigger\x20\x27','soll','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','actual','replace','push','temperature','parse','3882NjLMlR','room','analysis.automation.confidenceThreshold','sort','14133TJBENj','.1.LEVEL','2143490ubHEGI','consultButler','PERFECT','date','hm-rpc','length','\x20min).','target','\x20auf\x20','Ist','openknx','.1.TEMPERATURE','too_cold','Manuelles\x20Mapping','_date','event','setpoint','search','analysis.energy.schedulePreview','5200135WleIaC','_meta','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','analysis.energy.rlPenalties','config','\x20wurde\x20manuell\x20erhÃ¶ht.','entries',':\x20Absenkung\x20auf\x20','values','valveMapping','split','\x27\x20(Match:\x20','forEach','number','Calendar\x20Check\x20Error:\x20','dimmer','ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27','remove','ankunft','unit','light','ðŸ“…\x20SMART\x20SCHEDULE\x20[','error','stringify','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20',':\x20Aufheizen\x20auf\x20','local_temperature','level','isArray','urlaub\x20ende','getForeignObjectAsync','valve_position','warn','messwert','Â°C\x20(via\x20','\x20wieder\x20auf\x20','.1.ACTUAL_TEMPERATURE','indexOf','common','getForeignStateAsync','1656RaxNgp','calendarInstance','until','Â°C).\x20Entferne\x20Status.',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','TRAIN_RL_PENALTY','analysis.automation.mode','find','exports','target_temperature','\x20->\x20','Fehlt','getTime','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','sendToPythonWrapper','911902ixaiFu','level.valve','Unbekannt','ist','calendarSelection','analysis.energy.warmupTargets','setForeignStateAsync','occupied_heating_setpoint','val','includes','devices','constructor','system.mode','getStateAsync','ACTUAL','SET','abs','minutes_safe','active','triggerTime','location','toLowerCase','[MPC]\x20','switch','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','[FORCE]\x20','apply','reason','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','position','rÃ¼ckkehr',')\x20aktiv.\x20Heize\x20auf\x20','value.valve','analysis.energy.mpcActiveInterventions','now','normal','.4.VALVE_STATE','toUpperCase','off','map','temp','eventStart','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','role','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','PrÃ¤diktion:\x20','manual','Soll','Unknown','thermostat','analysis.energy.activeEnforcements','rescue_','set','Â°C\x20(Kalender-Schutz)','ðŸ“…\x20[MPC\x20INFO]\x20','Enforcement\x20Monitor\x20Error:\x20','Â°C\x20->\x20','score','valve','Â°C!\x20(Puffer:\x20','log','cal_','setStateAsync','2996976DYaUvW','add','contact','string','mpc_','slice','summary','useCalendar','default','current_heating_setpoint','thermostatMapping','getHours','_calName','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','Â°C!\x20(Puffer\x20leer).','toString','pi_heating_demand','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','.1.SET_POINT_TEMPERATURE','analysis.energy.warmupSources','./ai_agent','\x20ist\x20auf\x20','Â°C\x20<\x20','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','Auto-Erkennung'];a1_0x53c0=function(){return _0x55eb69;};return a1_0x53c0();}async function scanThermostats(_0x4a9547){const _0x304a5b=a1_0x451efa,_0x362598=_0x4a9547[_0x304a5b(0x137)]['devices']||[],_0x4e5162=[],_0x21895f=_0x362598[_0x304a5b(0x1cf)](_0xb5ccce=>_0xb5ccce['id']&&_0xb5ccce['id'][_0x304a5b(0x173)](_0x304a5b(0x1da))||_0xb5ccce[_0x304a5b(0x1cb)]&&[_0x304a5b(0x1da),_0x304a5b(0x19b),'sensor'][_0x304a5b(0x173)](_0xb5ccce['type'])||_0xb5ccce[_0x304a5b(0x1d2)]&&_0xb5ccce[_0x304a5b(0x1d2)][_0x304a5b(0x17f)]()[_0x304a5b(0x173)](_0x304a5b(0x192)));for(const _0x3a630e of _0x21895f){const _0xdf2606=await findRelatedId(_0x4a9547,_0x3a630e['id'],_0x304a5b(0x130)),_0x43cf8a=await findRelatedId(_0x4a9547,_0x3a630e['id'],'valve');let _0x251b52='Nicht\x20gefunden',_0xdee8ff=![],_0x1a5d4f=_0x4a9547[_0x304a5b(0x137)][_0x304a5b(0x1b3)]||{};if(typeof _0x1a5d4f===_0x304a5b(0x1ac))try{_0x1a5d4f=JSON['parse'](_0x1a5d4f);}catch(_0x5800e5){}let _0x41c558=_0x4a9547[_0x304a5b(0x137)][_0x304a5b(0x13c)]||{};if(typeof _0x41c558==='string')try{_0x41c558=JSON['parse'](_0x41c558);}catch(_0x4a0560){}if(_0x1a5d4f[_0x3a630e['id']]&&_0x1a5d4f[_0x3a630e['id']]===_0xdf2606||_0x41c558[_0x3a630e['id']]&&_0x41c558[_0x3a630e['id']]===_0x43cf8a)_0x251b52=_0x304a5b(0x12d),_0xdee8ff=!![];else(_0xdf2606||_0x43cf8a)&&(_0x251b52=_0x304a5b(0x1c2));_0x4e5162[_0x304a5b(0x1d9)]({'room':_0x3a630e[_0x304a5b(0x17e)]||_0x304a5b(0x16c),'sensorId':_0x3a630e['id'],'setpointId':_0xdf2606||'-','valveId':_0x43cf8a||'-','source':_0x251b52,'isManual':_0xdee8ff,'status':_0xdf2606&&_0x43cf8a?_0x304a5b(0x122):_0xdf2606?'OK':_0x304a5b(0x166)});}return _0x4e5162[_0x304a5b(0x1df)]((_0x4b531a,_0x2123a9)=>_0x4b531a['room'][_0x304a5b(0x1c5)](_0x2123a9[_0x304a5b(0x1dd)]));}async function updateSchedulePreview(_0x20115e){const _0x13000e=a1_0x451efa;if(!_0x20115e[_0x13000e(0x137)][_0x13000e(0x1b0)]||!_0x20115e[_0x13000e(0x137)][_0x13000e(0x15c)])return;let _0x4cc2ee={};try{const _0x4a600e=await _0x20115e['getStateAsync'](_0x13000e(0x1cc));if(_0x4a600e&&_0x4a600e['val'])_0x4cc2ee=JSON[_0x13000e(0x1db)](_0x4a600e['val']);}catch(_0x34a569){}const _0x498be5=[],_0x1f5e36=Date[_0x13000e(0x18c)](),_0x3d8cc1=0x30*0x3c*0x3c*0x3e8;try{const _0x5ee123=await _0x20115e[_0x13000e(0x15a)](_0x20115e[_0x13000e(0x137)]['calendarInstance']+'.data.table');if(!_0x5ee123||!_0x5ee123[_0x13000e(0x172)])return;const _0x48c0c9=JSON['parse'](_0x5ee123[_0x13000e(0x172)]),_0x2b556b=_0x20115e[_0x13000e(0x137)][_0x13000e(0x16e)]||[],_0x35c97a=_0x20115e['config'][_0x13000e(0x174)]||[],_0x1b9e17=new Set();_0x35c97a[_0x13000e(0x13f)](_0x85a830=>{const _0x18f4a7=_0x13000e;if(_0x85a830[_0x18f4a7(0x17e)])_0x1b9e17[_0x18f4a7(0x1aa)](_0x85a830['location']);});for(const _0x379eaa of _0x48c0c9){if(_0x379eaa['_calName']&&_0x2b556b[_0x13000e(0x125)]>0x0&&!_0x2b556b[_0x13000e(0x173)](_0x379eaa[_0x13000e(0x1b5)]))continue;const _0x14e12d=_0x379eaa[_0x13000e(0x12e)]||_0x379eaa[_0x13000e(0x193)]||_0x379eaa[_0x13000e(0x123)];if(!_0x14e12d)continue;const _0xf1e1d8=new Date(_0x14e12d),_0x129d76=_0xf1e1d8[_0x13000e(0x167)]();if(isNaN(_0x129d76))continue;if(_0x129d76<_0x1f5e36)continue;if(_0x129d76>_0x1f5e36+_0x3d8cc1)continue;const _0x499801=(_0x379eaa['event']||_0x379eaa['summary']||'')[_0x13000e(0x17f)]();let _0x59a721=![],_0x5492d4=[],_0x25bfdd=_0x379eaa[_0x13000e(0x12f)]||_0x379eaa[_0x13000e(0x1af)]||_0x13000e(0x16c);if(_0x499801[_0x13000e(0x173)](_0x13000e(0x150))||_0x499801['includes'](_0x13000e(0x188))||_0x499801[_0x13000e(0x173)](_0x13000e(0x145)))_0x59a721=!![],_0x5492d4=Array['from'](_0x1b9e17);else for(const _0x95dde of _0x1b9e17){if(_0x499801[_0x13000e(0x173)](_0x95dde[_0x13000e(0x17f)]()))_0x5492d4[_0x13000e(0x1d9)](_0x95dde);}_0x5492d4[_0x13000e(0x125)]>0x0&&_0x5492d4[_0x13000e(0x13f)](_0x4624ea=>{const _0x2d5dfe=_0x13000e;let _0x137e33=0x3c;if(_0x59a721){let _0x1ed6b5=0x0;Object[_0x2d5dfe(0x13b)](_0x4cc2ee)[_0x2d5dfe(0x13f)](_0x4c37c0=>{if(_0x4c37c0>_0x1ed6b5)_0x1ed6b5=_0x4c37c0;}),_0x137e33=_0x1ed6b5>0x0?_0x1ed6b5:0x78;}else _0x137e33=getWarmupRobust(_0x4cc2ee,_0x4624ea);const _0x51e465=new Date(_0x129d76-_0x137e33*0xea60);_0x498be5[_0x2d5dfe(0x1d9)]({'eventTime':_0x129d76,'triggerTime':_0x51e465[_0x2d5dfe(0x167)](),'room':_0x4624ea,'minutes':_0x137e33,'reason':_0x25bfdd,'isGlobal':_0x59a721});});}}catch(_0x5c1f0e){}_0x498be5[_0x13000e(0x1df)]((_0x2dc008,_0x454795)=>_0x2dc008[_0x13000e(0x17d)]-_0x454795[_0x13000e(0x17d)]);const _0x3cd3bb=_0x498be5['slice'](0x0,0x1e);await _0x20115e['setStateAsync'](_0x13000e(0x132),{'val':JSON[_0x13000e(0x14a)](_0x3cd3bb),'ack':!![]});}async function monitorEnforcements(_0x2a3d10){const _0x90f9b4=a1_0x451efa;try{const _0x290cd8=_0x90f9b4(0x19c),_0x12b437=await _0x2a3d10[_0x90f9b4(0x177)](_0x290cd8);if(!_0x12b437||!_0x12b437[_0x90f9b4(0x172)])return;let _0x283b0d=[];try{_0x283b0d=JSON['parse'](_0x12b437[_0x90f9b4(0x172)]);}catch(_0x1adada){return;}if(!Array[_0x90f9b4(0x14f)](_0x283b0d)||_0x283b0d[_0x90f9b4(0x125)]===0x0)return;const _0x28fc21=Date[_0x90f9b4(0x18c)](),_0x5d1bd8=_0x2a3d10[_0x90f9b4(0x137)][_0x90f9b4(0x174)]||[];let _0x40013c=![];for(let _0x18ac41=_0x283b0d[_0x90f9b4(0x125)]-0x1;_0x18ac41>=0x0;_0x18ac41--){const _0x4d6434=_0x283b0d[_0x18ac41];if(_0x28fc21>=_0x4d6434[_0x90f9b4(0x15d)]){_0x2a3d10[_0x90f9b4(0x1a6)][_0x90f9b4(0x1c8)](_0x90f9b4(0x1b6)+_0x4d6434[_0x90f9b4(0x1dd)]+_0x90f9b4(0x1d6)),_0x283b0d['splice'](_0x18ac41,0x1),_0x40013c=!![];continue;}const _0x2e5e57=_0x5d1bd8[_0x90f9b4(0x162)](_0x89099c=>normalize(_0x89099c['location'])===normalize(_0x4d6434['room'])&&(_0x89099c['type']===_0x90f9b4(0x1da)||_0x89099c['type']===_0x90f9b4(0x19b)));if(_0x2e5e57){const _0x3081eb=await findRelatedId(_0x2a3d10,_0x2e5e57['id'],'setpoint');if(_0x3081eb){const _0x2e1eaf=await _0x2a3d10['getForeignStateAsync'](_0x3081eb);_0x2e1eaf&&typeof _0x2e1eaf[_0x90f9b4(0x172)]===_0x90f9b4(0x140)&&(_0x2e1eaf[_0x90f9b4(0x172)]<0xf&&(_0x2a3d10[_0x90f9b4(0x1a6)]['warn']('ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x4d6434[_0x90f9b4(0x1dd)]+'\x20auf\x20'+_0x2e1eaf[_0x90f9b4(0x172)]+_0x90f9b4(0x1b7)+_0x4d6434['target']+'Â°C.'),await _0x2a3d10[_0x90f9b4(0x170)](_0x3081eb,_0x4d6434[_0x90f9b4(0x127)]),await logAutomationAction(_0x2a3d10,_0x90f9b4(0x183)+_0x4d6434[_0x90f9b4(0x1dd)]+':\x20'+_0x2e1eaf[_0x90f9b4(0x172)]+_0x90f9b4(0x1a2)+_0x4d6434[_0x90f9b4(0x127)]+_0x90f9b4(0x19f))));}}}_0x40013c&&await _0x2a3d10[_0x90f9b4(0x1a8)](_0x290cd8,{'val':JSON[_0x90f9b4(0x14a)](_0x283b0d),'ack':!![]});}catch(_0x163025){_0x2a3d10['log'][_0x90f9b4(0x149)](_0x90f9b4(0x1a1)+_0x163025['message']);}}async function checkCalendarTriggers(_0x2bd8bb){const _0x462c3e=a1_0x451efa;if(!_0x2bd8bb[_0x462c3e(0x137)][_0x462c3e(0x1b0)]||!_0x2bd8bb[_0x462c3e(0x137)][_0x462c3e(0x15c)])return;await updateSchedulePreview(_0x2bd8bb);let _0x999499={},_0x1f597c={};try{const _0x269a0c=await _0x2bd8bb[_0x462c3e(0x177)]('analysis.energy.warmupTimes');if(_0x269a0c&&_0x269a0c[_0x462c3e(0x172)])_0x999499=JSON['parse'](_0x269a0c[_0x462c3e(0x172)]);const _0x3f0c5d=await _0x2bd8bb['getStateAsync'](_0x462c3e(0x1bd));if(_0x3f0c5d&&_0x3f0c5d[_0x462c3e(0x172)])_0x1f597c=JSON[_0x462c3e(0x1db)](_0x3f0c5d[_0x462c3e(0x172)]);}catch(_0x447abf){}let _0x265163={'default':0x15};try{const _0x56fcff=await _0x2bd8bb[_0x462c3e(0x177)](_0x462c3e(0x16f));if(_0x56fcff&&_0x56fcff[_0x462c3e(0x172)])_0x265163=JSON['parse'](_0x56fcff[_0x462c3e(0x172)]);}catch(_0x4bc39b){}let _0x106ccb=[];try{const _0x5be58f=await _0x2bd8bb[_0x462c3e(0x177)](_0x462c3e(0x19c));if(_0x5be58f&&_0x5be58f[_0x462c3e(0x172)])_0x106ccb=JSON[_0x462c3e(0x1db)](_0x5be58f[_0x462c3e(0x172)]);}catch(_0x539585){}try{const _0x2e0cb2=await _0x2bd8bb['getForeignStateAsync'](_0x2bd8bb[_0x462c3e(0x137)]['calendarInstance']+_0x462c3e(0x1c4));if(!_0x2e0cb2||!_0x2e0cb2['val'])return;const _0x5c082b=JSON[_0x462c3e(0x1db)](_0x2e0cb2[_0x462c3e(0x172)]),_0x17825e=Date[_0x462c3e(0x18c)](),_0x599f8f=_0x2bd8bb[_0x462c3e(0x137)][_0x462c3e(0x174)]||[],_0xfaf06c=_0x2bd8bb[_0x462c3e(0x137)][_0x462c3e(0x16e)]||[];let _0x2ad7b6=![];for(const _0x396bd0 of _0x5c082b){if(_0x396bd0[_0x462c3e(0x1b5)]&&_0xfaf06c[_0x462c3e(0x125)]>0x0&&!_0xfaf06c['includes'](_0x396bd0[_0x462c3e(0x1b5)]))continue;const _0x2c8796=_0x396bd0[_0x462c3e(0x12e)]||_0x396bd0[_0x462c3e(0x193)]||_0x396bd0[_0x462c3e(0x123)];if(!_0x2c8796)continue;const _0x293ae5=new Date(_0x2c8796);if(isNaN(_0x293ae5[_0x462c3e(0x167)]()))continue;const _0x54d6b1=(_0x396bd0['event']||_0x396bd0['summary']||'')['toLowerCase']();if(_0x54d6b1[_0x462c3e(0x173)](_0x462c3e(0x150))||_0x54d6b1['includes'](_0x462c3e(0x188))||_0x54d6b1[_0x462c3e(0x173)](_0x462c3e(0x145))){let _0x10a77b=0x0;Object[_0x462c3e(0x13b)](_0x999499)['forEach'](_0x1c5722=>{if(_0x1c5722>_0x10a77b)_0x10a77b=_0x1c5722;});if(_0x10a77b===0x0)_0x10a77b=0x78;const _0x5d1cc9=_0x293ae5[_0x462c3e(0x167)]()-_0x10a77b*0xea60;_0x17825e>=_0x5d1cc9&&_0x17825e<_0x293ae5[_0x462c3e(0x167)]()&&(_0x2bd8bb['currentSystemMode']!==_0x462c3e(0x18d)&&(_0x2bd8bb[_0x462c3e(0x1a6)][_0x462c3e(0x1c8)](_0x462c3e(0x135)+_0x10a77b+_0x462c3e(0x126)),await _0x2bd8bb['setStateAsync'](_0x462c3e(0x176),{'val':_0x462c3e(0x18d),'ack':![]})));}for(const _0x1e31dd of _0x599f8f){if(_0x1e31dd[_0x462c3e(0x17e)]){const _0x333d16=_0x1e31dd['location'][_0x462c3e(0x17f)](),_0x5b1381=(_0x1e31dd[_0x462c3e(0x1d2)]||'')[_0x462c3e(0x17f)]();let _0x530611=_0x54d6b1[_0x462c3e(0x173)](_0x333d16);!_0x530611&&_0x5b1381[_0x462c3e(0x125)]>0x3&&_0x54d6b1[_0x462c3e(0x173)](_0x5b1381)&&(_0x530611=!![]);if(_0x530611){const _0x2b9842=getWarmupRobust(_0x999499,_0x1e31dd[_0x462c3e(0x17e)]),_0x578dc2=_0x1f597c[_0x1e31dd[_0x462c3e(0x17e)]]||_0x462c3e(0x1c3),_0x310fca=_0x293ae5[_0x462c3e(0x167)]()-_0x2b9842*0xea60;if(_0x17825e>=_0x310fca&&_0x17825e<_0x293ae5[_0x462c3e(0x167)]()){const _0x5c3ece=lastActions[_0x462c3e(0x1a7)+_0x1e31dd[_0x462c3e(0x17e)]];if(_0x5c3ece&&_0x17825e-_0x5c3ece<CAL_COOLDOWN_MS)continue;const _0x19f342=await findRelatedId(_0x2bd8bb,_0x1e31dd['id'],_0x462c3e(0x130));if(_0x19f342){let _0x252fde=_0x265163[_0x1e31dd[_0x462c3e(0x17e)]];if(_0x252fde===undefined)_0x252fde=_0x265163[_0x462c3e(0x1b1)];if(_0x252fde===undefined)_0x252fde=0x15;const _0x30ffe6=await _0x2bd8bb[_0x462c3e(0x15a)](_0x19f342);if(_0x30ffe6&&typeof _0x30ffe6[_0x462c3e(0x172)]===_0x462c3e(0x140)&&_0x30ffe6[_0x462c3e(0x172)]<_0x252fde-0.5){_0x2bd8bb[_0x462c3e(0x1a6)][_0x462c3e(0x1c8)](_0x462c3e(0x148)+_0x578dc2+_0x462c3e(0x1d4)+_0x1e31dd[_0x462c3e(0x17e)]+_0x462c3e(0x13e)+_0x54d6b1+_0x462c3e(0x189)+_0x252fde+_0x462c3e(0x1c9)+_0x2b9842+_0x462c3e(0x126)),await _0x2bd8bb['setForeignStateAsync'](_0x19f342,_0x252fde),await logAutomationAction(_0x2bd8bb,'[CAL]\x20'+_0x1e31dd[_0x462c3e(0x17e)]+_0x462c3e(0x165)+_0x252fde+_0x462c3e(0x155)+_0x578dc2+')'),lastActions['cal_'+_0x1e31dd[_0x462c3e(0x17e)]]=_0x17825e;const _0x5442fc=_0x106ccb['findIndex'](_0x3526a7=>_0x3526a7['room']===_0x1e31dd[_0x462c3e(0x17e)]);if(_0x5442fc!==-0x1)_0x106ccb[_0x462c3e(0x1ce)](_0x5442fc,0x1);_0x106ccb[_0x462c3e(0x1d9)]({'room':_0x1e31dd['location'],'target':_0x252fde,'until':_0x293ae5[_0x462c3e(0x167)]()}),_0x2ad7b6=!![];}}}}}}}_0x2ad7b6&&await _0x2bd8bb[_0x462c3e(0x1a8)]('analysis.energy.activeEnforcements',{'val':JSON['stringify'](_0x106ccb),'ack':!![]});}catch(_0x16ce4f){_0x2bd8bb[_0x462c3e(0x1a6)][_0x462c3e(0x153)](_0x462c3e(0x141)+_0x16ce4f['message']);}}async function manageMpcIntervention(_0x301252,_0x115759,_0x54cd0d){const _0x16f8b3=a1_0x451efa;try{const _0x42affd=_0x16f8b3(0x18b),_0x2d16aa=await _0x301252[_0x16f8b3(0x177)](_0x42affd);let _0x1a024e=[];if(_0x2d16aa&&_0x2d16aa[_0x16f8b3(0x172)])try{_0x1a024e=JSON[_0x16f8b3(0x1db)](_0x2d16aa[_0x16f8b3(0x172)]);}catch(_0x221801){}const _0x4f4e35=_0x1a024e[_0x16f8b3(0x158)](_0x115759);if(_0x54cd0d===_0x16f8b3(0x1aa))_0x4f4e35===-0x1&&(_0x1a024e[_0x16f8b3(0x1d9)](_0x115759),await _0x301252[_0x16f8b3(0x1a8)](_0x42affd,{'val':JSON[_0x16f8b3(0x14a)](_0x1a024e),'ack':!![]}));else _0x54cd0d===_0x16f8b3(0x144)&&(_0x4f4e35!==-0x1&&(_0x1a024e[_0x16f8b3(0x1ce)](_0x4f4e35,0x1),await _0x301252[_0x16f8b3(0x1a8)](_0x42affd,{'val':JSON[_0x16f8b3(0x14a)](_0x1a024e),'ack':!![]})));}catch(_0x7bdeb){}}async function cleanupGhostInterventions(_0x3c251f){const _0x487081=a1_0x451efa;try{const _0x3542ae=_0x487081(0x18b),_0x1ff7e=await _0x3c251f[_0x487081(0x177)](_0x3542ae);if(!_0x1ff7e||!_0x1ff7e[_0x487081(0x172)])return;const _0x496a13=JSON[_0x487081(0x1db)](_0x1ff7e[_0x487081(0x172)]);if(!Array[_0x487081(0x14f)](_0x496a13)||_0x496a13['length']===0x0)return;let _0x35fce6={'default':0x15};try{const _0xe387f2=await _0x3c251f[_0x487081(0x177)](_0x487081(0x16f));if(_0xe387f2&&_0xe387f2[_0x487081(0x172)])_0x35fce6=JSON['parse'](_0xe387f2[_0x487081(0x172)]);}catch(_0x21f779){}let _0x5ec3db=[];try{const _0x293e4a=await _0x3c251f['getStateAsync'](_0x487081(0x1c6));if(_0x293e4a&&_0x293e4a[_0x487081(0x172)])_0x5ec3db=JSON[_0x487081(0x1db)](_0x293e4a['val']);}catch(_0xa74f32){}let _0xac5c2d={},_0x52e011=![];try{const _0x11ee3e=await _0x3c251f[_0x487081(0x177)]('analysis.energy.rlPenalties');if(_0x11ee3e&&_0x11ee3e[_0x487081(0x172)])_0xac5c2d=JSON[_0x487081(0x1db)](_0x11ee3e[_0x487081(0x172)]);}catch(_0x4bddf2){}if(_0xac5c2d[_0x487081(0x134)]){const _0x3df60a=Date[_0x487081(0x18c)]();for(const [_0x6c2288,_0x6a5dd3]of Object[_0x487081(0x139)](_0xac5c2d['_meta'])){_0x3df60a-_0x6a5dd3>PENALTY_TTL&&(delete _0xac5c2d[_0x6c2288],delete _0xac5c2d[_0x487081(0x134)][_0x6c2288],_0x52e011=!![],_0x3c251f[_0x487081(0x1a6)][_0x487081(0x1c8)](_0x487081(0x143)+_0x6c2288+_0x487081(0x186)));}}const _0x31cdfd=_0x3c251f[_0x487081(0x137)][_0x487081(0x174)]||[];let _0x30fd5f=![];for(let _0x41d2cb=_0x496a13[_0x487081(0x125)]-0x1;_0x41d2cb>=0x0;_0x41d2cb--){const _0x5c2fc7=_0x496a13[_0x41d2cb],_0x41a626=_0x31cdfd[_0x487081(0x162)](_0x15c5cd=>normalize(_0x15c5cd[_0x487081(0x17e)])===normalize(_0x5c2fc7)&&(_0x15c5cd[_0x487081(0x1cb)]===_0x487081(0x1da)||_0x15c5cd[_0x487081(0x1cb)]===_0x487081(0x19b)));if(!_0x41a626){_0x3c251f['log']['warn']('ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27'+_0x5c2fc7+_0x487081(0x1c1)),_0x496a13[_0x487081(0x1ce)](_0x41d2cb,0x1),_0x30fd5f=!![];continue;}if(_0x41a626){const _0x1d9f6d=await findRelatedId(_0x3c251f,_0x41a626['id'],_0x487081(0x130)),_0x201084=await _0x3c251f[_0x487081(0x15a)](_0x41a626['id']);if(_0x1d9f6d){const _0x399a7f=await _0x3c251f[_0x487081(0x15a)](_0x1d9f6d);if(_0x399a7f&&typeof _0x399a7f[_0x487081(0x172)]===_0x487081(0x140)){let _0x2e4f6d=![],_0x315a95='';Math[_0x487081(0x17a)](_0x399a7f['val']-ECO_TEMP)>0.5&&(_0x2e4f6d=!![],_0x315a95='manual');if(!_0x2e4f6d&&_0x201084&&typeof _0x201084[_0x487081(0x172)]===_0x487081(0x140)){const _0x5de4a0=_0x35fce6[_0x5c2fc7]||_0x35fce6[_0x487081(0x1b1)]||0x15;_0x201084[_0x487081(0x172)]<_0x5de4a0+0.2&&(_0x2e4f6d=!![],_0x315a95=_0x487081(0x12c));}if(_0x2e4f6d){if(_0x315a95===_0x487081(0x198)){_0x3c251f['log'][_0x487081(0x1c8)](_0x487081(0x168)+_0x5c2fc7+_0x487081(0x1bf)+_0x399a7f['val']+'Â°C\x20(nicht\x20'+ECO_TEMP+_0x487081(0x15e));const _0x3d64c1=lastActions['cal_'+_0x5c2fc7],_0x11fd2f=_0x3d64c1&&Date[_0x487081(0x18c)]()-_0x3d64c1<0x2*0x3c*0x3e8;if(!_0x11fd2f&&_0x399a7f['val']>ECO_TEMP+0.5){_0x3c251f[_0x487081(0x169)]&&(_0x3c251f[_0x487081(0x1a6)][_0x487081(0x1c8)](_0x487081(0x1bb)+_0x5c2fc7+_0x487081(0x138)),_0x3c251f[_0x487081(0x169)](_0x487081(0x160),{'room':_0x5c2fc7}));const _0x20ed86=_0x5c2fc7+'_'+new Date()[_0x487081(0x1b4)]();if(!_0xac5c2d[_0x20ed86]){_0xac5c2d[_0x20ed86]=0x1;if(!_0xac5c2d[_0x487081(0x134)])_0xac5c2d['_meta']={};_0xac5c2d[_0x487081(0x134)][_0x20ed86]=Date[_0x487081(0x18c)](),_0x52e011=!![];}}else _0x11fd2f&&_0x3c251f[_0x487081(0x1a6)][_0x487081(0x1c8)](_0x487081(0x1a0)+_0x5c2fc7+'\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.');}else{if(_0x315a95==='too_cold'){let _0x34ad3d=![];if(_0x5ec3db[_0x487081(0x162)](_0x30e99d=>_0x30e99d['room']===_0x5c2fc7))_0x34ad3d=!![];const _0x438c5f=_0x31cdfd['filter'](_0x37d12d=>normalize(_0x37d12d['location'])===normalize(_0x5c2fc7)&&(_0x37d12d[_0x487081(0x1cb)]==='window'||_0x37d12d[_0x487081(0x1cb)]===_0x487081(0x1ca)||_0x37d12d[_0x487081(0x1cb)]===_0x487081(0x1ab)));for(const _0x3a3b5d of _0x438c5f){try{const _0x1431fc=await _0x3c251f[_0x487081(0x15a)](_0x3a3b5d['id']);if(_0x1431fc&&(_0x1431fc[_0x487081(0x172)]===!![]||_0x1431fc[_0x487081(0x172)]===0x1||String(_0x1431fc[_0x487081(0x172)])[_0x487081(0x17f)]()==='open'))_0x34ad3d=!![];}catch(_0x2256f9){}}if(_0x34ad3d)_0x3c251f[_0x487081(0x1a6)][_0x487081(0x1c8)](_0x487081(0x196)+_0x5c2fc7+_0x487081(0x194));else{const _0x1755b7=_0x35fce6[_0x5c2fc7]||_0x35fce6[_0x487081(0x1b1)]||0x15;_0x3c251f[_0x487081(0x1a6)]['info']('ðŸš¨\x20[MPC\x20WATCHDOG]\x20'+_0x5c2fc7+'\x20erreicht\x20Limit\x20('+_0x201084['val']+_0x487081(0x1c0)+(_0x1755b7+0.2)+'Â°C).\x20Sparmodus\x20beendet!'),await _0x3c251f[_0x487081(0x170)](_0x1d9f6d,_0x1755b7),await logAutomationAction(_0x3c251f,'[WATCHDOG]\x20'+_0x5c2fc7+_0x487081(0x15f)+_0x1755b7+'Â°C'),lastActions[_0x487081(0x19d)+_0x5c2fc7]=Date['now']();}}}_0x496a13['splice'](_0x41d2cb,0x1),_0x30fd5f=!![];}}}}}_0x30fd5f&&await _0x3c251f[_0x487081(0x1a8)](_0x3542ae,{'val':JSON[_0x487081(0x14a)](_0x496a13),'ack':!![]}),_0x52e011&&await _0x3c251f[_0x487081(0x1a8)](_0x487081(0x136),{'val':JSON[_0x487081(0x14a)](_0xac5c2d),'ack':!![]});}catch(_0x41dab3){}}async function applyEnergySavings(_0x5d6526,_0x3b52be){const _0x1508d0=a1_0x451efa;await cleanupGhostInterventions(_0x5d6526);if(!_0x3b52be||_0x3b52be[_0x1508d0(0x125)]===0x0)return;const _0x5ec028=_0x5d6526[_0x1508d0(0x137)]['devices']||[],_0x403d61=Date[_0x1508d0(0x18c)]();for(const _0x3b7bd8 of _0x3b52be){const _0x4a2fb0=_0x3b7bd8[_0x1508d0(0x1dd)],_0x2e7168=_0x3b7bd8[_0x1508d0(0x17b)],_0x14c116=_0x3b7bd8[_0x1508d0(0x127)]||0x15;if(lastActions[_0x1508d0(0x19d)+_0x4a2fb0]&&_0x403d61-lastActions[_0x1508d0(0x19d)+_0x4a2fb0]<RESCUE_LOCK_MS)continue;const _0x2c642d=_0x5ec028['find'](_0x4a7653=>normalize(_0x4a7653['location'])===normalize(_0x4a2fb0)&&(_0x4a7653[_0x1508d0(0x1cb)]==='temperature'||_0x4a7653[_0x1508d0(0x1cb)]===_0x1508d0(0x19b)));if(!_0x2c642d)continue;const _0x4e01d4=await findRelatedId(_0x5d6526,_0x2c642d['id'],_0x1508d0(0x130));if(_0x4e01d4){if(lastActions['mpc_'+_0x4a2fb0]&&_0x403d61-lastActions['mpc_'+_0x4a2fb0]<0x1e*0x3c*0x3e8)continue;const _0x379021=await _0x5d6526['getForeignStateAsync'](_0x4e01d4);if(_0x379021&&typeof _0x379021['val']===_0x1508d0(0x140)){const _0x10c848=_0x379021[_0x1508d0(0x172)];_0x10c848!==ECO_TEMP&&await manageMpcIntervention(_0x5d6526,_0x4a2fb0,_0x1508d0(0x144));if(_0x2e7168>0x1e)_0x10c848>ECO_TEMP+0.5&&(_0x5d6526['log'][_0x1508d0(0x1c8)](_0x1508d0(0x14b)+_0x4a2fb0+_0x1508d0(0x128)+ECO_TEMP+_0x1508d0(0x1a5)+_0x2e7168+'\x20min)'),await _0x5d6526[_0x1508d0(0x170)](_0x4e01d4,ECO_TEMP),await manageMpcIntervention(_0x5d6526,_0x4a2fb0,_0x1508d0(0x1aa)),lastActions[_0x1508d0(0x1ad)+_0x4a2fb0]=_0x403d61,await logAutomationAction(_0x5d6526,_0x1508d0(0x180)+_0x4a2fb0+_0x1508d0(0x13a)+ECO_TEMP+'Â°C'));else _0x2e7168<=0xf&&(_0x10c848<_0x14c116&&(_0x5d6526[_0x1508d0(0x1a6)][_0x1508d0(0x1c8)](_0x1508d0(0x182)+_0x4a2fb0+_0x1508d0(0x156)+_0x14c116+_0x1508d0(0x1b8)),await _0x5d6526[_0x1508d0(0x170)](_0x4e01d4,_0x14c116),await manageMpcIntervention(_0x5d6526,_0x4a2fb0,_0x1508d0(0x144)),lastActions['mpc_'+_0x4a2fb0]=_0x403d61,await logAutomationAction(_0x5d6526,_0x1508d0(0x180)+_0x4a2fb0+_0x1508d0(0x14c)+_0x14c116+'Â°C')));}}else _0x5d6526[_0x1508d0(0x1a6)][_0x1508d0(0x153)]('[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20'+_0x4a2fb0+'\x20gefunden!');}}module[a1_0x451efa(0x163)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};