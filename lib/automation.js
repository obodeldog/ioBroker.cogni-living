(function(_0xf01cf,_0x2c8898){const _0x11ca2d=a1_0x546a,_0x56d8b5=_0xf01cf();while(!![]){try{const _0xd6ac51=parseInt(_0x11ca2d(0x1f7))/0x1*(-parseInt(_0x11ca2d(0x1d8))/0x2)+parseInt(_0x11ca2d(0x1fb))/0x3+parseInt(_0x11ca2d(0x273))/0x4+parseInt(_0x11ca2d(0x249))/0x5*(parseInt(_0x11ca2d(0x26e))/0x6)+-parseInt(_0x11ca2d(0x1c4))/0x7*(-parseInt(_0x11ca2d(0x21a))/0x8)+-parseInt(_0x11ca2d(0x1f6))/0x9+-parseInt(_0x11ca2d(0x1e9))/0xa*(parseInt(_0x11ca2d(0x1ec))/0xb);if(_0xd6ac51===_0x2c8898)break;else _0x56d8b5['push'](_0x56d8b5['shift']());}catch(_0x20e3a1){_0x56d8b5['push'](_0x56d8b5['shift']());}}}(a1_0x32a5,0x44acb));const a1_0x53dd7b=(function(){let _0x14073b=!![];return function(_0x11f93d,_0x3a60e6){const _0x9ac26f=_0x14073b?function(){const _0x148a4c=a1_0x546a;if(_0x3a60e6){const _0x44b3d0=_0x3a60e6[_0x148a4c(0x220)](_0x11f93d,arguments);return _0x3a60e6=null,_0x44b3d0;}}:function(){};return _0x14073b=![],_0x9ac26f;};}()),a1_0x5843f3=a1_0x53dd7b(this,function(){const _0x2419dd=a1_0x546a;return a1_0x5843f3[_0x2419dd(0x234)]()[_0x2419dd(0x200)](_0x2419dd(0x1e5))['toString']()[_0x2419dd(0x1b9)](a1_0x5843f3)[_0x2419dd(0x200)]('(((.+)+)+)+$');});a1_0x5843f3();'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x4cc604){const _0x516535=a1_0x546a;if(!_0x4cc604)return'';return _0x4cc604[_0x516535(0x20f)]()[_0x516535(0x272)](/\s+/g,'')['trim']();}function getWarmupRobust(_0x29d7c2,_0x4c53bc){const _0x493b51=a1_0x546a;if(!_0x29d7c2||!_0x4c53bc)return 0x3c;if(_0x29d7c2[_0x4c53bc]!==undefined)return _0x29d7c2[_0x4c53bc];const _0x5269a2=_0x4c53bc[_0x493b51(0x20f)]()[_0x493b51(0x272)](/√§/g,'ae')[_0x493b51(0x272)](/√∂/g,'oe')['replace'](/√º/g,'ue')['replace'](/√ü/g,'ss')[_0x493b51(0x272)](/\s+/g,'_')[_0x493b51(0x272)](/[^a-z0-9_]/g,'');if(_0x29d7c2[_0x5269a2]!==undefined)return _0x29d7c2[_0x5269a2];return 0x3c;}async function logAutomationAction(_0x1e26ee,_0xe0029f){const _0x36d113=a1_0x546a;await _0x1e26ee[_0x36d113(0x275)](_0x36d113(0x22d),{'val':_0xe0029f,'ack':!![]});try{const _0x3c1044=_0x36d113(0x205),_0x3a102d=await _0x1e26ee['getStateAsync'](_0x3c1044);let _0x28e9ea=[];if(_0x3a102d&&_0x3a102d[_0x36d113(0x213)])try{_0x28e9ea=JSON['parse'](_0x3a102d['val']);}catch(_0x5498eb){}_0x28e9ea[_0x36d113(0x233)]({'ts':Date[_0x36d113(0x23a)](),'msg':_0xe0029f});if(_0x28e9ea['length']>0x32)_0x28e9ea=_0x28e9ea[_0x36d113(0x277)](0x0,0x32);await _0x1e26ee[_0x36d113(0x275)](_0x3c1044,{'val':JSON[_0x36d113(0x279)](_0x28e9ea),'ack':!![]});}catch(_0x4f214f){}}async function handlePrediction(_0x2a3e91,_0x50cad3,_0x50ea8d){const _0x27ec14=a1_0x546a;if(!_0x50cad3||_0x50cad3===_0x27ec14(0x1c9))return;let _0x1d1e1f=_0x27ec14(0x1f8),_0x50bf11=0.6;try{const _0x2b160d=await _0x2a3e91[_0x27ec14(0x212)]('analysis.automation.mode');if(_0x2b160d&&_0x2b160d['val'])_0x1d1e1f=_0x2b160d[_0x27ec14(0x213)];const _0x4ea182=await _0x2a3e91[_0x27ec14(0x212)]('analysis.automation.confidenceThreshold');if(_0x4ea182&&_0x4ea182[_0x27ec14(0x213)])_0x50bf11=_0x4ea182[_0x27ec14(0x213)];}catch(_0x6ee297){}if(_0x1d1e1f==='off'||_0x50ea8d<_0x50bf11)return;const _0x172e54=Date[_0x27ec14(0x23a)]();if(lastActions[_0x50cad3]&&_0x172e54-lastActions[_0x50cad3]<COOLDOWN_MS)return;const _0x2aeb82=_0x2a3e91[_0x27ec14(0x1f3)][_0x27ec14(0x201)]||[],_0xacf0a7=normalize(_0x50cad3),_0x5caccf=_0x2aeb82[_0x27ec14(0x241)](_0x3fc31a=>normalize(_0x3fc31a['location'])===_0xacf0a7&&(_0x3fc31a[_0x27ec14(0x246)]===_0x27ec14(0x1c7)||_0x3fc31a[_0x27ec14(0x246)]==='dimmer'||_0x3fc31a[_0x27ec14(0x246)]===_0x27ec14(0x261)));if(!_0x5caccf)return;const _0x2c6747=await aiAgent[_0x27ec14(0x1d2)](_0x2a3e91,_0x50cad3,_0x5caccf[_0x27ec14(0x1cd)],_0x50ea8d);if(!_0x2c6747[_0x27ec14(0x24c)])return;const _0x1d3a9f='Pr√§diktion:\x20'+_0x50cad3+_0x27ec14(0x278)+_0x5caccf['name']+'\x20('+_0x2c6747[_0x27ec14(0x247)]+')';await logAutomationAction(_0x2a3e91,'['+_0x1d1e1f[_0x27ec14(0x230)]()+']\x20'+_0x1d3a9f);if(_0x1d1e1f===_0x27ec14(0x255)){const _0x221e7b=await _0x2a3e91['getForeignStateAsync'](_0x5caccf['id']);(!_0x221e7b||!_0x221e7b['val']&&_0x221e7b['val']!==!![])&&await _0x2a3e91[_0x27ec14(0x226)](_0x5caccf['id'],!![]),lastActions[_0x50cad3]=_0x172e54;}}async function findRelatedId(_0x28d608,_0x5e2251,_0x5d00f0='setpoint'){const _0x2e2f30=a1_0x546a;if(_0x5d00f0==='setpoint'&&_0x28d608[_0x2e2f30(0x1f3)][_0x2e2f30(0x1cf)]){let _0x34d3a1=_0x28d608[_0x2e2f30(0x1f3)][_0x2e2f30(0x1cf)];if(typeof _0x34d3a1===_0x2e2f30(0x210))try{_0x34d3a1=JSON[_0x2e2f30(0x26c)](_0x34d3a1);}catch(_0x4b3f79){}if(_0x34d3a1&&_0x34d3a1[_0x5e2251])return _0x34d3a1[_0x5e2251];}if(_0x5d00f0===_0x2e2f30(0x1f2)&&_0x28d608['config']['valveMapping']){let _0x125e51=_0x28d608[_0x2e2f30(0x1f3)]['valveMapping'];if(typeof _0x125e51===_0x2e2f30(0x210))try{_0x125e51=JSON[_0x2e2f30(0x26c)](_0x125e51);}catch(_0x4728ee){}if(_0x125e51&&_0x125e51[_0x5e2251])return _0x125e51[_0x5e2251];}let _0x1b96ff=[];if(_0x5d00f0===_0x2e2f30(0x24d))_0x1b96ff=[{'s':_0x2e2f30(0x276),'t':_0x2e2f30(0x239)},{'s':'.1.TEMPERATURE','t':_0x2e2f30(0x239)},{'s':_0x2e2f30(0x1d4),'t':_0x2e2f30(0x271)},{'s':_0x2e2f30(0x232),'t':_0x2e2f30(0x21c)},{'s':_0x2e2f30(0x25b),'t':_0x2e2f30(0x1ca)},{'s':'local_temperature','t':_0x2e2f30(0x20a)},{'s':'temperature','t':_0x2e2f30(0x1bf)},{'s':_0x2e2f30(0x274),'t':_0x2e2f30(0x217)},{'s':_0x2e2f30(0x211),'t':_0x2e2f30(0x1f9)},{'s':'temperature','t':_0x2e2f30(0x24d)}];else _0x5d00f0==='valve'&&(_0x1b96ff=[{'s':'.1.ACTUAL_TEMPERATURE','t':_0x2e2f30(0x25f)},{'s':_0x2e2f30(0x1d4),'t':_0x2e2f30(0x25f)},{'s':'.1.TEMPERATURE','t':_0x2e2f30(0x269)},{'s':_0x2e2f30(0x25b),'t':_0x2e2f30(0x219)},{'s':_0x2e2f30(0x229),'t':_0x2e2f30(0x1c3)},{'s':_0x2e2f30(0x229),'t':_0x2e2f30(0x223)}]);for(const _0x5282f2 of _0x1b96ff){if(_0x5e2251[_0x2e2f30(0x20e)](_0x5282f2['s'])){const _0x2c120c=_0x5e2251[_0x2e2f30(0x272)](_0x5282f2['s'],_0x5282f2['t']),_0x14eb77=await _0x28d608['getForeignObjectAsync'](_0x2c120c);if(_0x14eb77)return _0x2c120c;}}try{const _0x3ea0e8=_0x5e2251['split']('.');if(_0x3ea0e8[_0x2e2f30(0x24f)]>0x2){const _0x14ac63=_0x3ea0e8[_0x2e2f30(0x277)](0x0,-0x1)[_0x2e2f30(0x1c0)]('.'),_0x24ee91=await _0x28d608[_0x2e2f30(0x21b)](_0x14ac63+'.*'),_0x5a426d=[],_0x4afc97=_0x5e2251['split'](/[._]+/)['filter'](_0x38c105=>![_0x2e2f30(0x238),'0',_0x2e2f30(0x225),_0x2e2f30(0x1d6),_0x2e2f30(0x236),'temperature',_0x2e2f30(0x1ce),_0x2e2f30(0x1cb),'messwert',_0x2e2f30(0x1fa)][_0x2e2f30(0x20e)](_0x38c105[_0x2e2f30(0x20f)]()));for(const [_0x51a577,_0x1f3d4e]of Object[_0x2e2f30(0x20d)](_0x24ee91)){if(_0x51a577===_0x5e2251)continue;if(_0x1f3d4e&&_0x1f3d4e[_0x2e2f30(0x228)]){const _0x42c061=_0x51a577[_0x2e2f30(0x20f)](),_0x1df9ea=(_0x1f3d4e[_0x2e2f30(0x228)]['role']||'')['toLowerCase'](),_0x59659f=(_0x1f3d4e[_0x2e2f30(0x228)]['unit']||'')[_0x2e2f30(0x20f)]();let _0x4f2a57=![];if(_0x5d00f0==='setpoint'&&_0x1f3d4e[_0x2e2f30(0x228)][_0x2e2f30(0x24e)]===!![])_0x4f2a57=_0x42c061[_0x2e2f30(0x20e)](_0x2e2f30(0x262))||_0x42c061[_0x2e2f30(0x20e)](_0x2e2f30(0x1c1))||_0x42c061['includes'](_0x2e2f30(0x1ea))||_0x1df9ea[_0x2e2f30(0x20e)](_0x2e2f30(0x260))||_0x1df9ea[_0x2e2f30(0x20e)](_0x2e2f30(0x235));else _0x5d00f0===_0x2e2f30(0x1f2)&&(_0x4f2a57=_0x42c061[_0x2e2f30(0x20e)](_0x2e2f30(0x223))||_0x42c061[_0x2e2f30(0x20e)](_0x2e2f30(0x1f2))||_0x42c061[_0x2e2f30(0x20e)](_0x2e2f30(0x1f4))||_0x42c061['includes'](_0x2e2f30(0x1d9))||_0x1df9ea[_0x2e2f30(0x20e)](_0x2e2f30(0x1bb))||_0x1df9ea[_0x2e2f30(0x20e)]('value.valve')||_0x59659f['includes']('%'));if(_0x4f2a57){const _0x6852d5=_0x51a577[_0x2e2f30(0x248)](/[._]+/)[_0x2e2f30(0x1cc)](_0x176cae=>_0x176cae[_0x2e2f30(0x20f)]());let _0x40c052=0x0;_0x4afc97['forEach'](_0x561f5a=>{const _0x845696=_0x2e2f30;if(_0x6852d5[_0x845696(0x20e)](_0x561f5a[_0x845696(0x20f)]()))_0x40c052++;}),_0x5a426d[_0x2e2f30(0x204)]({'id':_0x51a577,'score':_0x40c052});}}}if(_0x5a426d[_0x2e2f30(0x24f)]>0x0){_0x5a426d[_0x2e2f30(0x21f)]((_0x56b88d,_0x1cda8e)=>_0x1cda8e['score']-_0x56b88d[_0x2e2f30(0x243)]);if(_0x5a426d[0x0][_0x2e2f30(0x243)]>0x0)return _0x5a426d[0x0]['id'];}}}catch(_0x3aeec1){}return null;}async function scanThermostats(_0x18303d){const _0xcb5719=a1_0x546a,_0x214e59=_0x18303d[_0xcb5719(0x1f3)]['devices']||[],_0x5dceb3=[],_0x41e403=_0x214e59[_0xcb5719(0x26f)](_0xb13fd7=>_0xb13fd7['id']&&_0xb13fd7['id'][_0xcb5719(0x20e)](_0xcb5719(0x229))||_0xb13fd7['type']&&[_0xcb5719(0x229),_0xcb5719(0x1fd),'sensor']['includes'](_0xb13fd7[_0xcb5719(0x246)])||_0xb13fd7[_0xcb5719(0x1cd)]&&_0xb13fd7[_0xcb5719(0x1cd)][_0xcb5719(0x20f)]()[_0xcb5719(0x20e)](_0xcb5719(0x1ee)));for(const _0xd26e29 of _0x41e403){const _0xc63f4d=await findRelatedId(_0x18303d,_0xd26e29['id'],'setpoint'),_0x577e93=await findRelatedId(_0x18303d,_0xd26e29['id'],_0xcb5719(0x1f2));let _0x3a4915='Nicht\x20gefunden',_0x21c9e7=![],_0x5e22a2=_0x18303d[_0xcb5719(0x1f3)][_0xcb5719(0x1cf)]||{};if(typeof _0x5e22a2===_0xcb5719(0x210))try{_0x5e22a2=JSON[_0xcb5719(0x26c)](_0x5e22a2);}catch(_0x28fafc){}let _0x94dba6=_0x18303d[_0xcb5719(0x1f3)][_0xcb5719(0x1ed)]||{};if(typeof _0x94dba6==='string')try{_0x94dba6=JSON[_0xcb5719(0x26c)](_0x94dba6);}catch(_0x1b46e2){}if(_0x5e22a2[_0xd26e29['id']]&&_0x5e22a2[_0xd26e29['id']]===_0xc63f4d||_0x94dba6[_0xd26e29['id']]&&_0x94dba6[_0xd26e29['id']]===_0x577e93)_0x3a4915='Manuelles\x20Mapping',_0x21c9e7=!![];else(_0xc63f4d||_0x577e93)&&(_0x3a4915=_0xcb5719(0x222));_0x5dceb3[_0xcb5719(0x204)]({'room':_0xd26e29[_0xcb5719(0x23e)]||_0xcb5719(0x1dd),'sensorId':_0xd26e29['id'],'setpointId':_0xc63f4d||'-','valveId':_0x577e93||'-','source':_0x3a4915,'isManual':_0x21c9e7,'status':_0xc63f4d&&_0x577e93?'PERFECT':_0xc63f4d?'OK':'Fehlt'});}return _0x5dceb3[_0xcb5719(0x21f)]((_0x26e774,_0x4a36d3)=>_0x26e774['room'][_0xcb5719(0x1e2)](_0x4a36d3[_0xcb5719(0x242)]));}function a1_0x546a(_0x189dd8,_0x45e7f4){const _0x19eaff=a1_0x32a5();return a1_0x546a=function(_0x5843f3,_0x53dd7b){_0x5843f3=_0x5843f3-0x1b9;let _0x32a5f1=_0x19eaff[_0x5843f3];return _0x32a5f1;},a1_0x546a(_0x189dd8,_0x45e7f4);}async function updateSchedulePreview(_0xc4bfd2){const _0xf54be2=a1_0x546a;if(!_0xc4bfd2['config'][_0xf54be2(0x22c)]||!_0xc4bfd2[_0xf54be2(0x1f3)][_0xf54be2(0x253)])return;let _0x4ca98d={};try{const _0x2b7b8e=await _0xc4bfd2[_0xf54be2(0x212)](_0xf54be2(0x216));if(_0x2b7b8e&&_0x2b7b8e[_0xf54be2(0x213)])_0x4ca98d=JSON[_0xf54be2(0x26c)](_0x2b7b8e[_0xf54be2(0x213)]);}catch(_0x539303){}const _0x59d3eb=[],_0x3931db=Date[_0xf54be2(0x23a)](),_0x314a1c=0x30*0x3c*0x3c*0x3e8;try{const _0xf6edb8=await _0xc4bfd2[_0xf54be2(0x1dc)](_0xc4bfd2[_0xf54be2(0x1f3)]['calendarInstance']+_0xf54be2(0x1d3));if(!_0xf6edb8||!_0xf6edb8['val'])return;const _0x3ab3e4=JSON[_0xf54be2(0x26c)](_0xf6edb8[_0xf54be2(0x213)]),_0x929df9=_0xc4bfd2['config'][_0xf54be2(0x207)]||[],_0x36da5b=_0xc4bfd2[_0xf54be2(0x1f3)][_0xf54be2(0x201)]||[],_0x183260=new Set();_0x36da5b[_0xf54be2(0x270)](_0x569606=>{const _0x48a88a=_0xf54be2;if(_0x569606['location'])_0x183260['add'](_0x569606[_0x48a88a(0x23e)]);});for(const _0x40bec7 of _0x3ab3e4){if(_0x40bec7['_calName']&&_0x929df9[_0xf54be2(0x24f)]>0x0&&!_0x929df9[_0xf54be2(0x20e)](_0x40bec7[_0xf54be2(0x1c5)]))continue;const _0x22148b=_0x40bec7['_date']||_0x40bec7[_0xf54be2(0x214)]||_0x40bec7[_0xf54be2(0x22a)];if(!_0x22148b)continue;const _0x4702dd=new Date(_0x22148b),_0x5eaf5b=_0x4702dd['getTime']();if(isNaN(_0x5eaf5b))continue;if(_0x5eaf5b<_0x3931db)continue;if(_0x5eaf5b>_0x3931db+_0x314a1c)continue;const _0x2ef05e=(_0x40bec7['event']||_0x40bec7['summary']||'')[_0xf54be2(0x20f)]();let _0x8ebdd6=![],_0x4c1428=[],_0x70897=_0x40bec7[_0xf54be2(0x1c8)]||_0x40bec7[_0xf54be2(0x1e8)]||'Unbekannt';if(_0x2ef05e['includes']('urlaub\x20ende')||_0x2ef05e['includes'](_0xf54be2(0x1e4))||_0x2ef05e[_0xf54be2(0x20e)]('ankunft'))_0x8ebdd6=!![],_0x4c1428=Array[_0xf54be2(0x224)](_0x183260);else for(const _0x3f5925 of _0x183260){if(_0x2ef05e[_0xf54be2(0x20e)](_0x3f5925[_0xf54be2(0x20f)]()))_0x4c1428['push'](_0x3f5925);}_0x4c1428[_0xf54be2(0x24f)]>0x0&&_0x4c1428[_0xf54be2(0x270)](_0x3da8f1=>{const _0x13f715=_0xf54be2;let _0x3c95e0=0x3c;if(_0x8ebdd6){let _0x4aa0fe=0x0;Object['values'](_0x4ca98d)[_0x13f715(0x270)](_0x2470bf=>{if(_0x2470bf>_0x4aa0fe)_0x4aa0fe=_0x2470bf;}),_0x3c95e0=_0x4aa0fe>0x0?_0x4aa0fe:0x78;}else _0x3c95e0=getWarmupRobust(_0x4ca98d,_0x3da8f1);const _0x187a5a=new Date(_0x5eaf5b-_0x3c95e0*0xea60);_0x59d3eb[_0x13f715(0x204)]({'eventTime':_0x5eaf5b,'triggerTime':_0x187a5a['getTime'](),'room':_0x3da8f1,'minutes':_0x3c95e0,'reason':_0x70897,'isGlobal':_0x8ebdd6});});}}catch(_0x54e81b){}_0x59d3eb[_0xf54be2(0x21f)]((_0x4c6ccf,_0x48caba)=>_0x4c6ccf['triggerTime']-_0x48caba['triggerTime']);const _0x2db5d2=_0x59d3eb['slice'](0x0,0x1e);await _0xc4bfd2[_0xf54be2(0x275)](_0xf54be2(0x23d),{'val':JSON['stringify'](_0x2db5d2),'ack':!![]});}function a1_0x32a5(){const _0x1da2cc=[')\x20aktiv.\x20Heize\x20auf\x20','entries','includes','toLowerCase','string','Ist','getStateAsync','val','eventStart',']:\x20Raum-Trigger\x20\x27','analysis.energy.warmupTimes','SET','analysis.energy.ventilationAlerts','pi_heating_demand','8zkTbqJ','getForeignObjectsAsync','SET_POINT_TEMPERATURE','¬∞C\x20->\x20','message','sort','apply',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','Auto-Erkennung','level','from','hm-rpc','setForeignStateAsync','remove','common','temperature','date','üìÖ\x20[MPC\x20INFO]\x20','useCalendar','analysis.automation.lastAction','[WATCHDOG]\x20','Classic','toUpperCase','manual','ACTUAL_TEMPERATURE','unshift','toString','thermostat.setpoint','wert','currentSystemMode','openknx','.1.SET_POINT_TEMPERATURE','now','too_cold','[CAL]\x20','analysis.energy.schedulePreview','location','contact','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','find','room','score','window','analysis.energy.activeEnforcements','type','reason','split','5WsTYHp','_meta','number','approved','setpoint','write','length','üìÖ\x20SMART\x20SCHEDULE\x20[','abs','Enforcement\x20Monitor\x20Error:\x20','calendarInstance','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','active','[FORCE]\x20','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','mpc_','rescue_','\x20min).','local_temperature','¬∞C).\x20Sparmodus\x20beendet!','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','error','.1.LEVEL','level.temperature','switch','set','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20',':\x20Aufheizen\x20auf\x20','¬∞C\x20<\x20','üö®\x20[MPC\x20WATCHDOG]\x20','\x20wieder\x20auf\x20','analysis.energy.warmupSources','.4.VALVE_STATE','minutes_safe','info','parse','until','1399974tjOicM','filter','forEach','.4.SET_TEMPERATURE','replace','1738216FaHEdQ','ACTUAL','setStateAsync','.1.ACTUAL_TEMPERATURE','slice','\x20->\x20Schalte\x20','stringify','constructor','getTime','level.valve','cal_','¬∞C!\x20(Puffer:\x20','ankunft','target_temperature','join','soll','analysis.energy.warmupTargets','valve_position','1623790lplSVT','_calName','üî•\x20[MPC\x20ACTION]\x20Heize\x20','light','event','Unknown','occupied_heating_setpoint','sensor','map','name','actual','thermostatMapping','\x27\x20(Match:\x20','log','consultButler','.data.table','.1.TEMPERATURE','system.mode','ist','add','146hVIlBJ','position','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','¬∞C!\x20(Puffer\x20leer).','getForeignStateAsync','Unbekannt','¬∞C\x20(via\x20','analysis.energy.rlPenalties','splice','¬∞C).\x20Entferne\x20Status.','localeCompare','¬∞C.','r√ºckkehr','(((.+)+)+)+$','values','open','summary','887460xAOtSM','target','¬∞C\x20(Kalender-Schutz)','22AgMvZK','valveMapping','temp','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','\x20auf\x20','default','valve','config','stellwert','warn','1114785XPDzrB','6683dxpHca','off','Soll','state','511962fPituF','[MPC]\x20','thermostat','normal','analysis.energy.mpcActiveInterventions','search','devices','¬∞C\x20(Vorlauf:\x20','getHours','push','analysis.automation.actionLog','sendToPythonWrapper','calendarSelection','indexOf','\x20ist\x20auf\x20','current_heating_setpoint','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20'];a1_0x32a5=function(){return _0x1da2cc;};return a1_0x32a5();}async function monitorEnforcements(_0x4960e2){const _0x55efa3=a1_0x546a;try{const _0x3d5812=_0x55efa3(0x245),_0x368bae=await _0x4960e2[_0x55efa3(0x212)](_0x3d5812);if(!_0x368bae||!_0x368bae[_0x55efa3(0x213)])return;let _0x7a83eb=[];try{_0x7a83eb=JSON[_0x55efa3(0x26c)](_0x368bae[_0x55efa3(0x213)]);}catch(_0x38f37d){return;}if(!Array['isArray'](_0x7a83eb)||_0x7a83eb[_0x55efa3(0x24f)]===0x0)return;const _0x19c849=Date[_0x55efa3(0x23a)](),_0x330c5f=_0x4960e2['config'][_0x55efa3(0x201)]||[];let _0x3fe9a3=![];for(let _0x1a8196=_0x7a83eb['length']-0x1;_0x1a8196>=0x0;_0x1a8196--){const _0x31654e=_0x7a83eb[_0x1a8196];if(_0x19c849>=_0x31654e[_0x55efa3(0x26d)]){_0x4960e2[_0x55efa3(0x1d1)]['info']('üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20'+_0x31654e['room']+_0x55efa3(0x25d)),_0x7a83eb[_0x55efa3(0x1e0)](_0x1a8196,0x1),_0x3fe9a3=!![];continue;}const _0x35d798=_0x330c5f[_0x55efa3(0x241)](_0x362064=>normalize(_0x362064[_0x55efa3(0x23e)])===normalize(_0x31654e[_0x55efa3(0x242)])&&(_0x362064[_0x55efa3(0x246)]===_0x55efa3(0x229)||_0x362064[_0x55efa3(0x246)]===_0x55efa3(0x1fd)));if(_0x35d798){const _0x5e0a19=await findRelatedId(_0x4960e2,_0x35d798['id'],_0x55efa3(0x24d));if(_0x5e0a19){const _0x174bbd=await _0x4960e2[_0x55efa3(0x1dc)](_0x5e0a19);_0x174bbd&&typeof _0x174bbd['val']===_0x55efa3(0x24b)&&(_0x174bbd['val']<0xf&&(_0x4960e2[_0x55efa3(0x1d1)][_0x55efa3(0x1f5)](_0x55efa3(0x263)+_0x31654e[_0x55efa3(0x242)]+_0x55efa3(0x1f0)+_0x174bbd[_0x55efa3(0x213)]+_0x55efa3(0x1da)+_0x31654e['target']+_0x55efa3(0x1e3)),await _0x4960e2['setForeignStateAsync'](_0x5e0a19,_0x31654e['target']),await logAutomationAction(_0x4960e2,_0x55efa3(0x256)+_0x31654e[_0x55efa3(0x242)]+':\x20'+_0x174bbd[_0x55efa3(0x213)]+_0x55efa3(0x21d)+_0x31654e[_0x55efa3(0x1ea)]+_0x55efa3(0x1eb))));}}}_0x3fe9a3&&await _0x4960e2['setStateAsync'](_0x3d5812,{'val':JSON[_0x55efa3(0x279)](_0x7a83eb),'ack':!![]});}catch(_0x357f52){_0x4960e2[_0x55efa3(0x1d1)][_0x55efa3(0x25e)](_0x55efa3(0x252)+_0x357f52[_0x55efa3(0x21e)]);}}async function checkCalendarTriggers(_0x1f2bff){const _0x35b2bc=a1_0x546a;if(!_0x1f2bff['config'][_0x35b2bc(0x22c)]||!_0x1f2bff[_0x35b2bc(0x1f3)][_0x35b2bc(0x253)])return;await updateSchedulePreview(_0x1f2bff);let _0x4e867b={},_0x5c0235={};try{const _0x4dbcae=await _0x1f2bff['getStateAsync'](_0x35b2bc(0x216));if(_0x4dbcae&&_0x4dbcae[_0x35b2bc(0x213)])_0x4e867b=JSON[_0x35b2bc(0x26c)](_0x4dbcae[_0x35b2bc(0x213)]);const _0x3c48ce=await _0x1f2bff[_0x35b2bc(0x212)](_0x35b2bc(0x268));if(_0x3c48ce&&_0x3c48ce[_0x35b2bc(0x213)])_0x5c0235=JSON[_0x35b2bc(0x26c)](_0x3c48ce[_0x35b2bc(0x213)]);}catch(_0x34e22d){}let _0x20fc4e={'default':0x15};try{const _0x296cdb=await _0x1f2bff['getStateAsync']('analysis.energy.warmupTargets');if(_0x296cdb&&_0x296cdb['val'])_0x20fc4e=JSON['parse'](_0x296cdb[_0x35b2bc(0x213)]);}catch(_0x32a3f8){}let _0x158738=[];try{const _0x4b3a13=await _0x1f2bff['getStateAsync']('analysis.energy.activeEnforcements');if(_0x4b3a13&&_0x4b3a13[_0x35b2bc(0x213)])_0x158738=JSON[_0x35b2bc(0x26c)](_0x4b3a13['val']);}catch(_0x1ecfbb){}try{const _0x6f6cb7=await _0x1f2bff[_0x35b2bc(0x1dc)](_0x1f2bff['config'][_0x35b2bc(0x253)]+_0x35b2bc(0x1d3));if(!_0x6f6cb7||!_0x6f6cb7['val'])return;const _0x5b63e4=JSON[_0x35b2bc(0x26c)](_0x6f6cb7[_0x35b2bc(0x213)]),_0x5ecc06=Date['now'](),_0x163d35=_0x1f2bff[_0x35b2bc(0x1f3)][_0x35b2bc(0x201)]||[],_0x243199=_0x1f2bff[_0x35b2bc(0x1f3)][_0x35b2bc(0x207)]||[];let _0x4af860=![];for(const _0x1ce4e2 of _0x5b63e4){if(_0x1ce4e2[_0x35b2bc(0x1c5)]&&_0x243199[_0x35b2bc(0x24f)]>0x0&&!_0x243199[_0x35b2bc(0x20e)](_0x1ce4e2[_0x35b2bc(0x1c5)]))continue;const _0x28aaf7=_0x1ce4e2['_date']||_0x1ce4e2[_0x35b2bc(0x214)]||_0x1ce4e2[_0x35b2bc(0x22a)];if(!_0x28aaf7)continue;const _0x40d6dd=new Date(_0x28aaf7);if(isNaN(_0x40d6dd[_0x35b2bc(0x1ba)]()))continue;const _0x1b3e8c=(_0x1ce4e2[_0x35b2bc(0x1c8)]||_0x1ce4e2[_0x35b2bc(0x1e8)]||'')[_0x35b2bc(0x20f)]();if(_0x1b3e8c[_0x35b2bc(0x20e)]('urlaub\x20ende')||_0x1b3e8c['includes']('r√ºckkehr')||_0x1b3e8c[_0x35b2bc(0x20e)](_0x35b2bc(0x1be))){let _0x3ac6d2=0x0;Object[_0x35b2bc(0x1e6)](_0x4e867b)['forEach'](_0x37a979=>{if(_0x37a979>_0x3ac6d2)_0x3ac6d2=_0x37a979;});if(_0x3ac6d2===0x0)_0x3ac6d2=0x78;const _0x5c0523=_0x40d6dd[_0x35b2bc(0x1ba)]()-_0x3ac6d2*0xea60;_0x5ecc06>=_0x5c0523&&_0x5ecc06<_0x40d6dd[_0x35b2bc(0x1ba)]()&&(_0x1f2bff[_0x35b2bc(0x237)]!==_0x35b2bc(0x1fe)&&(_0x1f2bff[_0x35b2bc(0x1d1)][_0x35b2bc(0x26b)]('üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20'+_0x3ac6d2+_0x35b2bc(0x25a)),await _0x1f2bff[_0x35b2bc(0x275)](_0x35b2bc(0x1d5),{'val':_0x35b2bc(0x1fe),'ack':![]})));}for(const _0x5ea7ee of _0x163d35){if(_0x5ea7ee[_0x35b2bc(0x23e)]){const _0x2c90ea=_0x5ea7ee[_0x35b2bc(0x23e)][_0x35b2bc(0x20f)](),_0x4971f0=(_0x5ea7ee[_0x35b2bc(0x1cd)]||'')[_0x35b2bc(0x20f)]();let _0x529901=_0x1b3e8c[_0x35b2bc(0x20e)](_0x2c90ea);!_0x529901&&_0x4971f0[_0x35b2bc(0x24f)]>0x3&&_0x1b3e8c[_0x35b2bc(0x20e)](_0x4971f0)&&(_0x529901=!![]);if(_0x529901){const _0x59d8e9=getWarmupRobust(_0x4e867b,_0x5ea7ee[_0x35b2bc(0x23e)]),_0x3ed90a=_0x5c0235[_0x5ea7ee[_0x35b2bc(0x23e)]]||_0x35b2bc(0x22f),_0x5ef67e=_0x40d6dd[_0x35b2bc(0x1ba)]()-_0x59d8e9*0xea60;if(_0x5ecc06>=_0x5ef67e&&_0x5ecc06<_0x40d6dd[_0x35b2bc(0x1ba)]()){const _0x457c4c=lastActions[_0x35b2bc(0x1bc)+_0x5ea7ee[_0x35b2bc(0x23e)]];if(_0x457c4c&&_0x5ecc06-_0x457c4c<CAL_COOLDOWN_MS)continue;const _0x5cd50d=await findRelatedId(_0x1f2bff,_0x5ea7ee['id'],_0x35b2bc(0x24d));if(_0x5cd50d){let _0x351c82=_0x20fc4e[_0x5ea7ee[_0x35b2bc(0x23e)]];if(_0x351c82===undefined)_0x351c82=_0x20fc4e[_0x35b2bc(0x1f1)];if(_0x351c82===undefined)_0x351c82=0x15;const _0x5ad792=await _0x1f2bff[_0x35b2bc(0x1dc)](_0x5cd50d);if(_0x5ad792&&typeof _0x5ad792[_0x35b2bc(0x213)]==='number'&&_0x5ad792['val']<_0x351c82-0.5){_0x1f2bff[_0x35b2bc(0x1d1)][_0x35b2bc(0x26b)](_0x35b2bc(0x250)+_0x3ed90a+_0x35b2bc(0x215)+_0x5ea7ee[_0x35b2bc(0x23e)]+_0x35b2bc(0x1d0)+_0x1b3e8c+_0x35b2bc(0x20c)+_0x351c82+_0x35b2bc(0x202)+_0x59d8e9+_0x35b2bc(0x25a)),await _0x1f2bff['setForeignStateAsync'](_0x5cd50d,_0x351c82),await logAutomationAction(_0x1f2bff,_0x35b2bc(0x23c)+_0x5ea7ee['location']+'\x20->\x20'+_0x351c82+_0x35b2bc(0x1de)+_0x3ed90a+')'),lastActions['cal_'+_0x5ea7ee['location']]=_0x5ecc06;const _0x362d0f=_0x158738['findIndex'](_0x5c4ed3=>_0x5c4ed3['room']===_0x5ea7ee[_0x35b2bc(0x23e)]);if(_0x362d0f!==-0x1)_0x158738[_0x35b2bc(0x1e0)](_0x362d0f,0x1);_0x158738[_0x35b2bc(0x204)]({'room':_0x5ea7ee[_0x35b2bc(0x23e)],'target':_0x351c82,'until':_0x40d6dd[_0x35b2bc(0x1ba)]()}),_0x4af860=!![];}}}}}}}_0x4af860&&await _0x1f2bff[_0x35b2bc(0x275)](_0x35b2bc(0x245),{'val':JSON['stringify'](_0x158738),'ack':!![]});}catch(_0x2cca40){_0x1f2bff[_0x35b2bc(0x1d1)][_0x35b2bc(0x1f5)]('Calendar\x20Check\x20Error:\x20'+_0x2cca40[_0x35b2bc(0x21e)]);}}async function manageMpcIntervention(_0x121835,_0x3de5ca,_0x1c5d45){const _0x2c737f=a1_0x546a;try{const _0x2b7e8d='analysis.energy.mpcActiveInterventions',_0x1682a4=await _0x121835['getStateAsync'](_0x2b7e8d);let _0x450f15=[];if(_0x1682a4&&_0x1682a4['val'])try{_0x450f15=JSON['parse'](_0x1682a4['val']);}catch(_0x195988){}const _0x59f07a=_0x450f15[_0x2c737f(0x208)](_0x3de5ca);if(_0x1c5d45===_0x2c737f(0x1d7))_0x59f07a===-0x1&&(_0x450f15[_0x2c737f(0x204)](_0x3de5ca),await _0x121835[_0x2c737f(0x275)](_0x2b7e8d,{'val':JSON['stringify'](_0x450f15),'ack':!![]}));else _0x1c5d45===_0x2c737f(0x227)&&(_0x59f07a!==-0x1&&(_0x450f15[_0x2c737f(0x1e0)](_0x59f07a,0x1),await _0x121835[_0x2c737f(0x275)](_0x2b7e8d,{'val':JSON['stringify'](_0x450f15),'ack':!![]})));}catch(_0x4285c6){}}async function cleanupGhostInterventions(_0x5aeb6d){const _0x7db118=a1_0x546a;try{const _0x288868=_0x7db118(0x1ff),_0x39c439=await _0x5aeb6d[_0x7db118(0x212)](_0x288868);if(!_0x39c439||!_0x39c439[_0x7db118(0x213)])return;const _0x45e33b=JSON['parse'](_0x39c439['val']);if(!Array['isArray'](_0x45e33b)||_0x45e33b[_0x7db118(0x24f)]===0x0)return;let _0x301534={'default':0x15};try{const _0x3def35=await _0x5aeb6d[_0x7db118(0x212)](_0x7db118(0x1c2));if(_0x3def35&&_0x3def35[_0x7db118(0x213)])_0x301534=JSON[_0x7db118(0x26c)](_0x3def35['val']);}catch(_0x59dc1f){}let _0x2a5901=[];try{const _0x33d44b=await _0x5aeb6d[_0x7db118(0x212)](_0x7db118(0x218));if(_0x33d44b&&_0x33d44b[_0x7db118(0x213)])_0x2a5901=JSON['parse'](_0x33d44b['val']);}catch(_0x532521){}let _0x4dd23c={},_0x411881=![];try{const _0x4cf94f=await _0x5aeb6d[_0x7db118(0x212)](_0x7db118(0x1df));if(_0x4cf94f&&_0x4cf94f[_0x7db118(0x213)])_0x4dd23c=JSON[_0x7db118(0x26c)](_0x4cf94f[_0x7db118(0x213)]);}catch(_0x4aa4ae){}if(_0x4dd23c[_0x7db118(0x24a)]){const _0x2c8abf=Date['now']();for(const [_0x8a121c,_0x6c4dc3]of Object[_0x7db118(0x20d)](_0x4dd23c[_0x7db118(0x24a)])){_0x2c8abf-_0x6c4dc3>PENALTY_TTL&&(delete _0x4dd23c[_0x8a121c],delete _0x4dd23c[_0x7db118(0x24a)][_0x8a121c],_0x411881=!![],_0x5aeb6d[_0x7db118(0x1d1)][_0x7db118(0x26b)](_0x7db118(0x257)+_0x8a121c+'\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.'));}}const _0x719fd7=_0x5aeb6d[_0x7db118(0x1f3)][_0x7db118(0x201)]||[];let _0x500624=![];for(let _0x133970=_0x45e33b[_0x7db118(0x24f)]-0x1;_0x133970>=0x0;_0x133970--){const _0x5657a7=_0x45e33b[_0x133970],_0x1f99ad=_0x719fd7[_0x7db118(0x241)](_0x37c5de=>normalize(_0x37c5de['location'])===normalize(_0x5657a7)&&(_0x37c5de['type']===_0x7db118(0x229)||_0x37c5de[_0x7db118(0x246)]===_0x7db118(0x1fd)));if(!_0x1f99ad){_0x5aeb6d['log'][_0x7db118(0x1f5)](_0x7db118(0x240)+_0x5657a7+_0x7db118(0x1ef)),_0x45e33b[_0x7db118(0x1e0)](_0x133970,0x1),_0x500624=!![];continue;}if(_0x1f99ad){const _0x4a1527=await findRelatedId(_0x5aeb6d,_0x1f99ad['id'],_0x7db118(0x24d)),_0x8c840e=await _0x5aeb6d['getForeignStateAsync'](_0x1f99ad['id']);if(_0x4a1527){const _0x3b5cf9=await _0x5aeb6d['getForeignStateAsync'](_0x4a1527);if(_0x3b5cf9&&typeof _0x3b5cf9[_0x7db118(0x213)]===_0x7db118(0x24b)){let _0x2be117=![],_0x3a7c50='';Math[_0x7db118(0x251)](_0x3b5cf9[_0x7db118(0x213)]-ECO_TEMP)>0.5&&(_0x2be117=!![],_0x3a7c50=_0x7db118(0x231));if(!_0x2be117&&_0x8c840e&&typeof _0x8c840e[_0x7db118(0x213)]==='number'){const _0x1ef872=_0x301534[_0x5657a7]||_0x301534[_0x7db118(0x1f1)]||0x15;_0x8c840e[_0x7db118(0x213)]<_0x1ef872+0.2&&(_0x2be117=!![],_0x3a7c50=_0x7db118(0x23b));}if(_0x2be117){if(_0x3a7c50===_0x7db118(0x231)){_0x5aeb6d[_0x7db118(0x1d1)]['info']('üßπ\x20[MPC\x20CLEANUP]\x20'+_0x5657a7+_0x7db118(0x209)+_0x3b5cf9[_0x7db118(0x213)]+'¬∞C\x20(nicht\x20'+ECO_TEMP+_0x7db118(0x1e1));const _0x3cbf42=lastActions[_0x7db118(0x1bc)+_0x5657a7],_0x422e93=_0x3cbf42&&Date[_0x7db118(0x23a)]()-_0x3cbf42<0x2*0x3c*0x3e8;if(!_0x422e93&&_0x3b5cf9[_0x7db118(0x213)]>ECO_TEMP+0.5){_0x5aeb6d['sendToPythonWrapper']&&(_0x5aeb6d[_0x7db118(0x1d1)][_0x7db118(0x26b)](_0x7db118(0x20b)+_0x5657a7+'\x20wurde\x20manuell\x20erh√∂ht.'),_0x5aeb6d[_0x7db118(0x206)]('TRAIN_RL_PENALTY',{'room':_0x5657a7}));const _0x25096e=_0x5657a7+'_'+new Date()[_0x7db118(0x203)]();if(!_0x4dd23c[_0x25096e]){_0x4dd23c[_0x25096e]=0x1;if(!_0x4dd23c['_meta'])_0x4dd23c[_0x7db118(0x24a)]={};_0x4dd23c[_0x7db118(0x24a)][_0x25096e]=Date[_0x7db118(0x23a)](),_0x411881=!![];}}else _0x422e93&&_0x5aeb6d[_0x7db118(0x1d1)][_0x7db118(0x26b)](_0x7db118(0x22b)+_0x5657a7+_0x7db118(0x254));}else{if(_0x3a7c50===_0x7db118(0x23b)){let _0x1fd021=![];if(_0x2a5901[_0x7db118(0x241)](_0x17604f=>_0x17604f[_0x7db118(0x242)]===_0x5657a7))_0x1fd021=!![];const _0x3bb8e7=_0x719fd7[_0x7db118(0x26f)](_0x343c25=>normalize(_0x343c25[_0x7db118(0x23e)])===normalize(_0x5657a7)&&(_0x343c25[_0x7db118(0x246)]===_0x7db118(0x244)||_0x343c25[_0x7db118(0x246)]===_0x7db118(0x1cb)||_0x343c25[_0x7db118(0x246)]===_0x7db118(0x23f)));for(const _0x5ef81d of _0x3bb8e7){try{const _0x1c69cf=await _0x5aeb6d[_0x7db118(0x1dc)](_0x5ef81d['id']);if(_0x1c69cf&&(_0x1c69cf[_0x7db118(0x213)]===!![]||_0x1c69cf[_0x7db118(0x213)]===0x1||String(_0x1c69cf['val'])[_0x7db118(0x20f)]()===_0x7db118(0x1e7)))_0x1fd021=!![];}catch(_0x4e5f50){}}if(_0x1fd021)_0x5aeb6d[_0x7db118(0x1d1)][_0x7db118(0x26b)]('üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20'+_0x5657a7+'\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.');else{const _0x2b7286=_0x301534[_0x5657a7]||_0x301534['default']||0x15;_0x5aeb6d[_0x7db118(0x1d1)][_0x7db118(0x26b)](_0x7db118(0x266)+_0x5657a7+'\x20erreicht\x20Limit\x20('+_0x8c840e[_0x7db118(0x213)]+_0x7db118(0x265)+(_0x2b7286+0.2)+_0x7db118(0x25c)),await _0x5aeb6d[_0x7db118(0x226)](_0x4a1527,_0x2b7286),await logAutomationAction(_0x5aeb6d,_0x7db118(0x22e)+_0x5657a7+_0x7db118(0x221)+_0x2b7286+'¬∞C'),lastActions[_0x7db118(0x259)+_0x5657a7]=Date['now']();}}}_0x45e33b[_0x7db118(0x1e0)](_0x133970,0x1),_0x500624=!![];}}}}}_0x500624&&await _0x5aeb6d['setStateAsync'](_0x288868,{'val':JSON['stringify'](_0x45e33b),'ack':!![]}),_0x411881&&await _0x5aeb6d['setStateAsync'](_0x7db118(0x1df),{'val':JSON['stringify'](_0x4dd23c),'ack':!![]});}catch(_0x35a9c0){}}async function applyEnergySavings(_0x4a89fa,_0x3f3b10){const _0x368d6b=a1_0x546a;await cleanupGhostInterventions(_0x4a89fa);if(!_0x3f3b10||_0x3f3b10[_0x368d6b(0x24f)]===0x0)return;const _0x165e36=_0x4a89fa[_0x368d6b(0x1f3)][_0x368d6b(0x201)]||[],_0x362c4a=Date['now']();for(const _0x1f482c of _0x3f3b10){const _0x127190=_0x1f482c[_0x368d6b(0x242)],_0x4509c3=_0x1f482c[_0x368d6b(0x26a)],_0x46be23=_0x1f482c['target']||0x15;if(lastActions[_0x368d6b(0x259)+_0x127190]&&_0x362c4a-lastActions['rescue_'+_0x127190]<RESCUE_LOCK_MS)continue;const _0x487125=_0x165e36[_0x368d6b(0x241)](_0x6b5931=>normalize(_0x6b5931[_0x368d6b(0x23e)])===normalize(_0x127190)&&(_0x6b5931[_0x368d6b(0x246)]===_0x368d6b(0x229)||_0x6b5931[_0x368d6b(0x246)]===_0x368d6b(0x1fd)));if(!_0x487125)continue;const _0x2d3c42=await findRelatedId(_0x4a89fa,_0x487125['id'],_0x368d6b(0x24d));if(_0x2d3c42){if(lastActions[_0x368d6b(0x258)+_0x127190]&&_0x362c4a-lastActions['mpc_'+_0x127190]<0x1e*0x3c*0x3e8)continue;const _0x437ce4=await _0x4a89fa[_0x368d6b(0x1dc)](_0x2d3c42);if(_0x437ce4&&typeof _0x437ce4[_0x368d6b(0x213)]===_0x368d6b(0x24b)){const _0x270a5d=_0x437ce4['val'];_0x270a5d!==ECO_TEMP&&await manageMpcIntervention(_0x4a89fa,_0x127190,_0x368d6b(0x227));if(_0x4509c3>0x1e)_0x270a5d>ECO_TEMP+0.5&&(_0x4a89fa[_0x368d6b(0x1d1)][_0x368d6b(0x26b)]('üçÉ\x20[MPC\x20ACTION]\x20Senke\x20'+_0x127190+_0x368d6b(0x1f0)+ECO_TEMP+_0x368d6b(0x1bd)+_0x4509c3+'\x20min)'),await _0x4a89fa[_0x368d6b(0x226)](_0x2d3c42,ECO_TEMP),await manageMpcIntervention(_0x4a89fa,_0x127190,'add'),lastActions[_0x368d6b(0x258)+_0x127190]=_0x362c4a,await logAutomationAction(_0x4a89fa,_0x368d6b(0x1fc)+_0x127190+':\x20Absenkung\x20auf\x20'+ECO_TEMP+'¬∞C'));else _0x4509c3<=0xf&&(_0x270a5d<_0x46be23&&(_0x4a89fa[_0x368d6b(0x1d1)][_0x368d6b(0x26b)](_0x368d6b(0x1c6)+_0x127190+_0x368d6b(0x267)+_0x46be23+_0x368d6b(0x1db)),await _0x4a89fa[_0x368d6b(0x226)](_0x2d3c42,_0x46be23),await manageMpcIntervention(_0x4a89fa,_0x127190,_0x368d6b(0x227)),lastActions[_0x368d6b(0x258)+_0x127190]=_0x362c4a,await logAutomationAction(_0x4a89fa,_0x368d6b(0x1fc)+_0x127190+_0x368d6b(0x264)+_0x46be23+'¬∞C')));}}else _0x4a89fa[_0x368d6b(0x1d1)][_0x368d6b(0x1f5)]('[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20'+_0x127190+'\x20gefunden!');}}module['exports']={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};