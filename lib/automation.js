const a1_0x616fc8=a1_0x330e;(function(_0x457c18,_0x563503){const _0x3aba9f=a1_0x330e,_0x30de16=_0x457c18();while(!![]){try{const _0x59823b=-parseInt(_0x3aba9f(0x13e))/0x1+-parseInt(_0x3aba9f(0x127))/0x2+parseInt(_0x3aba9f(0x12d))/0x3+parseInt(_0x3aba9f(0x121))/0x4+parseInt(_0x3aba9f(0x11e))/0x5*(parseInt(_0x3aba9f(0x141))/0x6)+parseInt(_0x3aba9f(0x146))/0x7+parseInt(_0x3aba9f(0x132))/0x8;if(_0x59823b===_0x563503)break;else _0x30de16['push'](_0x30de16['shift']());}catch(_0x567a5a){_0x30de16['push'](_0x30de16['shift']());}}}(a1_0x205a,0xd94c1));const a1_0x3cb04e=(function(){let _0x4d68fb=!![];return function(_0x1f194b,_0xfd4b90){const _0xa0f38=_0x4d68fb?function(){if(_0xfd4b90){const _0x9122d0=_0xfd4b90['apply'](_0x1f194b,arguments);return _0xfd4b90=null,_0x9122d0;}}:function(){};return _0x4d68fb=![],_0xa0f38;};}()),a1_0x53a545=a1_0x3cb04e(this,function(){const _0x4acfdd=a1_0x330e;return a1_0x53a545[_0x4acfdd(0x13f)]()[_0x4acfdd(0x12b)](_0x4acfdd(0x124))[_0x4acfdd(0x13f)]()[_0x4acfdd(0x13c)](a1_0x53a545)['search'](_0x4acfdd(0x124));});a1_0x53a545();'use strict';const aiAgent=require(a1_0x616fc8(0x13a)),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function a1_0x205a(){const _0x3bdb7f=['[BLOCKED]\x20','config','devices','analysis.automation.lastAction','exports','type','5QoeTQz','getStateAsync','analysis.automation.confidenceThreshold','5699092CYdVDY','val','toLowerCase','(((.+)+)+)+$','getForeignStateAsync','name','1051786vQyeMD','PrÃ¤diktion:\x20','toUpperCase','info','search','setForeignStateAsync','1842087UMjGlE','switch','âš¡\x20ACTION:\x20','light','trim','3902144VtlBkc','off','debug','consultButler','setStateAsync','ðŸ”\x20Device-Search\x20failed:\x20Predicted\x20\x27','reason','\x20->\x20','./ai_agent','replace','constructor','analysis.automation.mode','1663582MZLLjs','toString','log','1763994wFEbXY','simulate','\x27),\x20but\x20found\x20no\x20matching\x20light\x20device.','now','\x27\x20(norm:\x20\x27','1812685JNZIqP'];a1_0x205a=function(){return _0x3bdb7f;};return a1_0x205a();}function a1_0x330e(_0x182b2d,_0x48083a){const _0x30027f=a1_0x205a();return a1_0x330e=function(_0x53a545,_0x3cb04e){_0x53a545=_0x53a545-0x118;let _0x205a1a=_0x30027f[_0x53a545];return _0x205a1a;},a1_0x330e(_0x182b2d,_0x48083a);}function normalize(_0xea21e5){const _0xd69f2d=a1_0x616fc8;if(!_0xea21e5)return'';return _0xea21e5[_0xd69f2d(0x123)]()[_0xd69f2d(0x13b)](/\s+/g,'')[_0xd69f2d(0x131)]();}async function handlePrediction(_0x32eafb,_0x3aafca,_0x3c82be){const _0x178ee2=a1_0x616fc8;if(!_0x3aafca||_0x3aafca==='Unknown')return;let _0x10885c=_0x178ee2(0x133),_0x1327db=0.6;try{const _0x5da824=await _0x32eafb[_0x178ee2(0x11f)](_0x178ee2(0x13d));if(_0x5da824&&_0x5da824[_0x178ee2(0x122)])_0x10885c=_0x5da824['val'];const _0x505dc2=await _0x32eafb['getStateAsync'](_0x178ee2(0x120));if(_0x505dc2&&_0x505dc2[_0x178ee2(0x122)])_0x1327db=_0x505dc2[_0x178ee2(0x122)];}catch(_0x4b84b1){}if(_0x10885c===_0x178ee2(0x133))return;if(_0x3c82be<_0x1327db)return;const _0x5b01c4=Date[_0x178ee2(0x144)]();if(lastActions[_0x3aafca]&&_0x5b01c4-lastActions[_0x3aafca]<COOLDOWN_MS)return;const _0x39638d=_0x32eafb[_0x178ee2(0x119)][_0x178ee2(0x11a)]||[],_0x3a7026=normalize(_0x3aafca),_0x55190c=_0x39638d['find'](_0x3c03ae=>{const _0xfe9bd0=_0x178ee2;return normalize(_0x3c03ae['location'])===_0x3a7026&&(_0x3c03ae[_0xfe9bd0(0x11d)]===_0xfe9bd0(0x130)||_0x3c03ae[_0xfe9bd0(0x11d)]==='dimmer'||_0x3c03ae[_0xfe9bd0(0x11d)]===_0xfe9bd0(0x12e));});if(!_0x55190c){const _0x504a1e=_0x178ee2(0x137)+_0x3aafca+_0x178ee2(0x145)+_0x3a7026+_0x178ee2(0x143);_0x32eafb[_0x178ee2(0x140)][_0x178ee2(0x134)](_0x504a1e);return;}const _0x96f379=await aiAgent[_0x178ee2(0x135)](_0x32eafb,_0x3aafca,_0x55190c[_0x178ee2(0x126)],_0x3c82be);if(!_0x96f379['approved']){_0x32eafb['log']['debug']('ðŸ¤–\x20Butler\x20Blocked:\x20'+_0x3aafca+_0x178ee2(0x139)+_0x96f379[_0x178ee2(0x138)]),await _0x32eafb['setStateAsync'](_0x178ee2(0x11b),{'val':_0x178ee2(0x118)+_0x96f379['reason'],'ack':!![]});return;}const _0x223db3=_0x178ee2(0x128)+_0x3aafca+'\x20->\x20Schalte\x20'+_0x55190c[_0x178ee2(0x126)]+'\x20('+_0x96f379[_0x178ee2(0x138)]+')';await _0x32eafb[_0x178ee2(0x136)]('analysis.automation.lastAction',{'val':'['+_0x10885c[_0x178ee2(0x129)]()+']\x20'+_0x223db3,'ack':!![]});if(_0x10885c===_0x178ee2(0x142))_0x32eafb[_0x178ee2(0x140)][_0x178ee2(0x12a)]('ðŸ‘€\x20SIMULATION:\x20'+_0x223db3);else{if(_0x10885c==='active'){_0x32eafb[_0x178ee2(0x140)][_0x178ee2(0x12a)](_0x178ee2(0x12f)+_0x223db3);const _0x281a5e=await _0x32eafb[_0x178ee2(0x125)](_0x55190c['id']);if(_0x281a5e&&(_0x281a5e[_0x178ee2(0x122)]===!![]||_0x281a5e[_0x178ee2(0x122)]>0x0)){}else await _0x32eafb[_0x178ee2(0x12c)](_0x55190c['id'],!![]);lastActions[_0x3aafca]=_0x5b01c4;}}}module[a1_0x616fc8(0x11c)]={'handlePrediction':handlePrediction};