const a1_0x1c23ba=a1_0x1a3d;(function(_0x39e209,_0x3712ec){const _0x38c078=a1_0x1a3d,_0x46a3e3=_0x39e209();while(!![]){try{const _0x4624a2=-parseInt(_0x38c078(0x90))/0x1+parseInt(_0x38c078(0x91))/0x2*(parseInt(_0x38c078(0xcd))/0x3)+parseInt(_0x38c078(0xc0))/0x4+-parseInt(_0x38c078(0xbf))/0x5*(-parseInt(_0x38c078(0x8d))/0x6)+-parseInt(_0x38c078(0x115))/0x7*(-parseInt(_0x38c078(0x131))/0x8)+parseInt(_0x38c078(0x10c))/0x9+parseInt(_0x38c078(0x82))/0xa*(-parseInt(_0x38c078(0xde))/0xb);if(_0x4624a2===_0x3712ec)break;else _0x46a3e3['push'](_0x46a3e3['shift']());}catch(_0x54b115){_0x46a3e3['push'](_0x46a3e3['shift']());}}}(a1_0x4b4f,0xb7ccc));const a1_0x341a1f=(function(){let _0x34336f=!![];return function(_0x2d3587,_0x131f24){const _0x529eae=_0x34336f?function(){const _0x306f1d=a1_0x1a3d;if(_0x131f24){const _0x4f39de=_0x131f24[_0x306f1d(0xa3)](_0x2d3587,arguments);return _0x131f24=null,_0x4f39de;}}:function(){};return _0x34336f=![],_0x529eae;};}()),a1_0x57ded6=a1_0x341a1f(this,function(){const _0x1e6c30=a1_0x1a3d;return a1_0x57ded6[_0x1e6c30(0x86)]()[_0x1e6c30(0xd0)](_0x1e6c30(0xce))[_0x1e6c30(0x86)]()['constructor'](a1_0x57ded6)[_0x1e6c30(0xd0)]('(((.+)+)+)+$');});a1_0x57ded6();'use strict';function a1_0x4b4f(){const _0x19bfb4=['ankunft','valveMapping','3484791FopGQe','Â°C).\x20Entferne\x20Status.','\x20min).','info','sendToPythonWrapper','devices',')\x20aktiv.\x20Heize\x20auf\x20','Calendar\x20Check\x20Error:\x20','remove','7865389DQvmFS','analysis.energy.schedulePreview','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','localeCompare','active','getStateAsync','TRAIN_RL_PENALTY','location','messwert','window','triggerTime','.1.ACTUAL_TEMPERATURE','temp','values','Unknown','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','.4.SET_TEMPERATURE','event','ACTUAL','Classic','Â°C\x20(nicht\x20','pi_heating_demand','eventStart','value.valve','setForeignStateAsync','manual','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','\x20auf\x20','8wwpxmY','contact','system.mode','target_temperature','\x20erreicht\x20Limit\x20(','parse','setpoint','reason','calendarSelection','splice','consultButler','summary','getTime','unit','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','_meta','Â°C\x20(Kalender-Schutz)','write','Enforcement\x20Monitor\x20Error:\x20','14062820PQjVmu','Â°C.','Manuelles\x20Mapping','message','toString','warn','entries','join','cal_','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','string','3770184SYigTn','ðŸ“…\x20SMART\x20SCHEDULE\x20[','.1.TEMPERATURE','842636xYHLeN','10SjOKDn','current_heating_setpoint','analysis.automation.lastAction','set','ðŸ“…\x20[MPC\x20INFO]\x20','off','[WATCHDOG]\x20','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','length','target',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','.1.SET_POINT_TEMPERATURE','calendarInstance','occupied_heating_setpoint',':\x20Aufheizen\x20auf\x20','local_temperature','indexOf','sort','apply','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','wert','too_cold','mpc_','\x20min)','openknx','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','analysis.energy.warmupTimes','[CAL]\x20','actual','.1.LEVEL','setStateAsync','filter','level.valve','analysis.energy.ventilationAlerts','replace','default','toLowerCase','open','Â°C!\x20(Puffer\x20leer).','[FORCE]\x20','getForeignObjectsAsync','type','unshift','add','_calName','Â°C).\x20Sparmodus\x20beendet!','10qmKNDx','652932SEKfXG','getForeignStateAsync','analysis.energy.activeEnforcements','findIndex','val','includes','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','valve','thermostat','push','PERFECT','Â°C\x20(via\x20','urlaub\x20ende','42585KvsEtf','(((.+)+)+)+$','\x20wieder\x20auf\x20','search','currentSystemMode','sensor','score','name','exports','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27','.4.VALVE_STATE','role','Â°C!\x20(Puffer:\x20','room','thermostatMapping','light','11RxZTqy','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','rescue_','minutes_safe','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','hm-rpc','useCalendar','forEach',']:\x20Raum-Trigger\x20\x27','temperature','from','Soll','.data.table','approved','until','split','level.temperature','map','\x20wurde\x20manuell\x20erhÃ¶ht.','./ai_agent','analysis.energy.warmupTargets','analysis.energy.warmupSources','find','common','isArray','dimmer','[MPC]\x20','state','stringify','Auto-Erkennung','rÃ¼ckkehr','SET','number','Unbekannt','abs','slice','thermostat.setpoint','\x20->\x20','_date','level',':\x20Absenkung\x20auf\x20','config','log','now'];a1_0x4b4f=function(){return _0x19bfb4;};return a1_0x4b4f();}const aiAgent=require(a1_0x1c23ba(0xf1)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x34ea06){const _0x4708e4=a1_0x1c23ba;if(!_0x34ea06)return'';return _0x34ea06[_0x4708e4(0xb5)]()[_0x4708e4(0xb3)](/\s+/g,'')['trim']();}function a1_0x1a3d(_0x370e03,_0x2d53a5){const _0x20c815=a1_0x4b4f();return a1_0x1a3d=function(_0x57ded6,_0x341a1f){_0x57ded6=_0x57ded6-0x71;let _0x4b4f53=_0x20c815[_0x57ded6];return _0x4b4f53;},a1_0x1a3d(_0x370e03,_0x2d53a5);}function getWarmupRobust(_0x53d86f,_0x335464){const _0x5f41da=a1_0x1c23ba;if(!_0x53d86f||!_0x335464)return 0x3c;if(_0x53d86f[_0x335464]!==undefined)return _0x53d86f[_0x335464];const _0x1e3e12=_0x335464[_0x5f41da(0xb5)]()['replace'](/Ã¤/g,'ae')[_0x5f41da(0xb3)](/Ã¶/g,'oe')[_0x5f41da(0xb3)](/Ã¼/g,'ue')[_0x5f41da(0xb3)](/ÃŸ/g,'ss')[_0x5f41da(0xb3)](/\s+/g,'_')[_0x5f41da(0xb3)](/[^a-z0-9_]/g,'');if(_0x53d86f[_0x1e3e12]!==undefined)return _0x53d86f[_0x1e3e12];return 0x3c;}async function logAutomationAction(_0x20af82,_0xfe10f7){const _0x4f20af=a1_0x1c23ba;await _0x20af82['setStateAsync'](_0x4f20af(0x93),{'val':_0xfe10f7,'ack':!![]});try{const _0x323f20='analysis.automation.actionLog',_0x59d4dc=await _0x20af82[_0x4f20af(0x11a)](_0x323f20);let _0x1c5374=[];if(_0x59d4dc&&_0x59d4dc[_0x4f20af(0xc4)])try{_0x1c5374=JSON['parse'](_0x59d4dc[_0x4f20af(0xc4)]);}catch(_0x426474){}_0x1c5374[_0x4f20af(0xbb)]({'ts':Date[_0x4f20af(0x109)](),'msg':_0xfe10f7});if(_0x1c5374[_0x4f20af(0x99)]>0x32)_0x1c5374=_0x1c5374[_0x4f20af(0x101)](0x0,0x32);await _0x20af82[_0x4f20af(0xaf)](_0x323f20,{'val':JSON['stringify'](_0x1c5374),'ack':!![]});}catch(_0x4866bb){}}async function handlePrediction(_0x3b605d,_0xa7b41a,_0x2d73a3){const _0x5aa244=a1_0x1c23ba;if(!_0xa7b41a||_0xa7b41a===_0x5aa244(0x123))return;let _0x4294b6=_0x5aa244(0x96),_0x4e556b=0.6;try{const _0x410dad=await _0x3b605d[_0x5aa244(0x11a)]('analysis.automation.mode');if(_0x410dad&&_0x410dad[_0x5aa244(0xc4)])_0x4294b6=_0x410dad[_0x5aa244(0xc4)];const _0x625264=await _0x3b605d[_0x5aa244(0x11a)]('analysis.automation.confidenceThreshold');if(_0x625264&&_0x625264[_0x5aa244(0xc4)])_0x4e556b=_0x625264[_0x5aa244(0xc4)];}catch(_0x5478f3){}if(_0x4294b6===_0x5aa244(0x96)||_0x2d73a3<_0x4e556b)return;const _0x3f8dd0=Date[_0x5aa244(0x109)]();if(lastActions[_0xa7b41a]&&_0x3f8dd0-lastActions[_0xa7b41a]<COOLDOWN_MS)return;const _0x48cd2c=_0x3b605d[_0x5aa244(0x107)]['devices']||[],_0x293465=normalize(_0xa7b41a),_0x363e36=_0x48cd2c['find'](_0xc420a4=>normalize(_0xc420a4[_0x5aa244(0x11c)])===_0x293465&&(_0xc420a4[_0x5aa244(0xba)]===_0x5aa244(0xdd)||_0xc420a4[_0x5aa244(0xba)]===_0x5aa244(0xf7)||_0xc420a4[_0x5aa244(0xba)]==='switch'));if(!_0x363e36)return;const _0x5d5541=await aiAgent[_0x5aa244(0x79)](_0x3b605d,_0xa7b41a,_0x363e36['name'],_0x2d73a3);if(!_0x5d5541[_0x5aa244(0xeb)])return;const _0x362cf4='PrÃ¤diktion:\x20'+_0xa7b41a+'\x20->\x20Schalte\x20'+_0x363e36['name']+'\x20('+_0x5d5541[_0x5aa244(0x76)]+')';await logAutomationAction(_0x3b605d,'['+_0x4294b6['toUpperCase']()+']\x20'+_0x362cf4);if(_0x4294b6===_0x5aa244(0x119)){const _0x22eb6f=await _0x3b605d[_0x5aa244(0xc1)](_0x363e36['id']);(!_0x22eb6f||!_0x22eb6f[_0x5aa244(0xc4)]&&_0x22eb6f[_0x5aa244(0xc4)]!==!![])&&await _0x3b605d['setForeignStateAsync'](_0x363e36['id'],!![]),lastActions[_0xa7b41a]=_0x3f8dd0;}}async function findRelatedId(_0x4921fd,_0x53a6c2,_0x58eb24=a1_0x1c23ba(0x75)){const _0x498381=a1_0x1c23ba;if(_0x58eb24===_0x498381(0x75)&&_0x4921fd[_0x498381(0x107)]['thermostatMapping']){let _0x3f13ad=_0x4921fd[_0x498381(0x107)]['thermostatMapping'];if(typeof _0x3f13ad===_0x498381(0x8c))try{_0x3f13ad=JSON['parse'](_0x3f13ad);}catch(_0xee57c6){}if(_0x3f13ad&&_0x3f13ad[_0x53a6c2])return _0x3f13ad[_0x53a6c2];}if(_0x58eb24===_0x498381(0xc7)&&_0x4921fd[_0x498381(0x107)][_0x498381(0x10b)]){let _0x1ec01e=_0x4921fd[_0x498381(0x107)][_0x498381(0x10b)];if(typeof _0x1ec01e===_0x498381(0x8c))try{_0x1ec01e=JSON[_0x498381(0x74)](_0x1ec01e);}catch(_0x23e5f4){}if(_0x1ec01e&&_0x1ec01e[_0x53a6c2])return _0x1ec01e[_0x53a6c2];}let _0x29402d=[];if(_0x58eb24===_0x498381(0x75))_0x29402d=[{'s':_0x498381(0x120),'t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x498381(0x8f),'t':_0x498381(0x9c)},{'s':_0x498381(0x8f),'t':_0x498381(0x125)},{'s':'ACTUAL_TEMPERATURE','t':'SET_POINT_TEMPERATURE'},{'s':_0x498381(0xa0),'t':_0x498381(0x9e)},{'s':_0x498381(0xa0),'t':_0x498381(0x92)},{'s':_0x498381(0xe7),'t':_0x498381(0x72)},{'s':_0x498381(0x127),'t':_0x498381(0xfd)},{'s':'Ist','t':_0x498381(0xe9)},{'s':_0x498381(0xe7),'t':_0x498381(0x75)}];else _0x58eb24===_0x498381(0xc7)&&(_0x29402d=[{'s':_0x498381(0x120),'t':_0x498381(0xae)},{'s':_0x498381(0x8f),'t':_0x498381(0xae)},{'s':'.1.TEMPERATURE','t':_0x498381(0xd8)},{'s':_0x498381(0xa0),'t':_0x498381(0x12a)},{'s':_0x498381(0xe7),'t':'valve_position'},{'s':_0x498381(0xe7),'t':_0x498381(0x105)}]);for(const _0x21a2fa of _0x29402d){if(_0x53a6c2[_0x498381(0xc5)](_0x21a2fa['s'])){const _0x122967=_0x53a6c2['replace'](_0x21a2fa['s'],_0x21a2fa['t']),_0xcc523f=await _0x4921fd['getForeignObjectAsync'](_0x122967);if(_0xcc523f)return _0x122967;}}try{const _0x54f43d=_0x53a6c2[_0x498381(0xed)]('.');if(_0x54f43d[_0x498381(0x99)]>0x2){const _0x3421bb=_0x54f43d[_0x498381(0x101)](0x0,-0x1)[_0x498381(0x89)]('.'),_0x48062d=await _0x4921fd[_0x498381(0xb9)](_0x3421bb+'.*'),_0x3b73c7=[],_0x24c99e=_0x53a6c2[_0x498381(0xed)](/[._]+/)[_0x498381(0xb0)](_0x529971=>![_0x498381(0xa9),'0',_0x498381(0xe3),'ist',_0x498381(0xa5),_0x498381(0xe7),_0x498381(0xad),_0x498381(0xd2),_0x498381(0x11d),_0x498381(0xf9)][_0x498381(0xc5)](_0x529971[_0x498381(0xb5)]()));for(const [_0x3c30d6,_0x4be585]of Object[_0x498381(0x88)](_0x48062d)){if(_0x3c30d6===_0x53a6c2)continue;if(_0x4be585&&_0x4be585[_0x498381(0xf5)]){const _0x1d9823=_0x3c30d6[_0x498381(0xb5)](),_0x1b6119=(_0x4be585[_0x498381(0xf5)][_0x498381(0xd9)]||'')[_0x498381(0xb5)](),_0xe288a2=(_0x4be585[_0x498381(0xf5)][_0x498381(0x7c)]||'')[_0x498381(0xb5)]();let _0x372dfc=![];if(_0x58eb24===_0x498381(0x75)&&_0x4be585[_0x498381(0xf5)][_0x498381(0x80)]===!![])_0x372dfc=_0x1d9823[_0x498381(0xc5)](_0x498381(0x94))||_0x1d9823[_0x498381(0xc5)]('soll')||_0x1d9823[_0x498381(0xc5)](_0x498381(0x9a))||_0x1b6119['includes'](_0x498381(0xee))||_0x1b6119[_0x498381(0xc5)](_0x498381(0x102));else _0x58eb24===_0x498381(0xc7)&&(_0x372dfc=_0x1d9823[_0x498381(0xc5)](_0x498381(0x105))||_0x1d9823['includes'](_0x498381(0xc7))||_0x1d9823[_0x498381(0xc5)]('stellwert')||_0x1d9823[_0x498381(0xc5)]('position')||_0x1b6119[_0x498381(0xc5)](_0x498381(0xb1))||_0x1b6119[_0x498381(0xc5)](_0x498381(0x12c))||_0xe288a2[_0x498381(0xc5)]('%'));if(_0x372dfc){const _0x1f5a66=_0x3c30d6[_0x498381(0xed)](/[._]+/)[_0x498381(0xef)](_0x3d3ea8=>_0x3d3ea8[_0x498381(0xb5)]());let _0x260524=0x0;_0x24c99e['forEach'](_0x470c67=>{const _0x3c41ba=_0x498381;if(_0x1f5a66['includes'](_0x470c67[_0x3c41ba(0xb5)]()))_0x260524++;}),_0x3b73c7[_0x498381(0xc9)]({'id':_0x3c30d6,'score':_0x260524});}}}if(_0x3b73c7['length']>0x0){_0x3b73c7[_0x498381(0xa2)]((_0x37535b,_0x40bdc8)=>_0x40bdc8['score']-_0x37535b['score']);if(_0x3b73c7[0x0][_0x498381(0xd3)]>0x0)return _0x3b73c7[0x0]['id'];}}}catch(_0x404718){}return null;}async function scanThermostats(_0x485c69){const _0x4789dc=a1_0x1c23ba,_0xba3f66=_0x485c69[_0x4789dc(0x107)][_0x4789dc(0x111)]||[],_0x5119d9=[],_0x5e55fb=_0xba3f66[_0x4789dc(0xb0)](_0x345878=>_0x345878['id']&&_0x345878['id']['includes']('temperature')||_0x345878[_0x4789dc(0xba)]&&['temperature',_0x4789dc(0xc8),'sensor'][_0x4789dc(0xc5)](_0x345878['type'])||_0x345878[_0x4789dc(0xd4)]&&_0x345878['name'][_0x4789dc(0xb5)]()[_0x4789dc(0xc5)](_0x4789dc(0x121)));for(const _0x3aac62 of _0x5e55fb){const _0x415d30=await findRelatedId(_0x485c69,_0x3aac62['id'],'setpoint'),_0x30b1b3=await findRelatedId(_0x485c69,_0x3aac62['id'],'valve');let _0x49e393='Nicht\x20gefunden',_0x1c5f52=![],_0x5d3727=_0x485c69['config'][_0x4789dc(0xdc)]||{};if(typeof _0x5d3727===_0x4789dc(0x8c))try{_0x5d3727=JSON[_0x4789dc(0x74)](_0x5d3727);}catch(_0x16d4c4){}let _0x5e7aed=_0x485c69['config'][_0x4789dc(0x10b)]||{};if(typeof _0x5e7aed==='string')try{_0x5e7aed=JSON[_0x4789dc(0x74)](_0x5e7aed);}catch(_0x13697f){}if(_0x5d3727[_0x3aac62['id']]&&_0x5d3727[_0x3aac62['id']]===_0x415d30||_0x5e7aed[_0x3aac62['id']]&&_0x5e7aed[_0x3aac62['id']]===_0x30b1b3)_0x49e393=_0x4789dc(0x84),_0x1c5f52=!![];else(_0x415d30||_0x30b1b3)&&(_0x49e393=_0x4789dc(0xfb));_0x5119d9[_0x4789dc(0xc9)]({'room':_0x3aac62['location']||_0x4789dc(0xff),'sensorId':_0x3aac62['id'],'setpointId':_0x415d30||'-','valveId':_0x30b1b3||'-','source':_0x49e393,'isManual':_0x1c5f52,'status':_0x415d30&&_0x30b1b3?_0x4789dc(0xca):_0x415d30?'OK':'Fehlt'});}return _0x5119d9[_0x4789dc(0xa2)]((_0x3eb687,_0x5e2c3a)=>_0x3eb687[_0x4789dc(0xdb)][_0x4789dc(0x118)](_0x5e2c3a[_0x4789dc(0xdb)]));}async function updateSchedulePreview(_0x4c5e83){const _0x3b6b9b=a1_0x1c23ba;if(!_0x4c5e83[_0x3b6b9b(0x107)]['useCalendar']||!_0x4c5e83[_0x3b6b9b(0x107)]['calendarInstance'])return;let _0x4549dc={};try{const _0x2b32c6=await _0x4c5e83[_0x3b6b9b(0x11a)](_0x3b6b9b(0xab));if(_0x2b32c6&&_0x2b32c6[_0x3b6b9b(0xc4)])_0x4549dc=JSON['parse'](_0x2b32c6[_0x3b6b9b(0xc4)]);}catch(_0x4ab94c){}const _0x3435f7=[],_0x4496d0=Date[_0x3b6b9b(0x109)](),_0x3f717d=0x30*0x3c*0x3c*0x3e8;try{const _0x14c2bc=await _0x4c5e83[_0x3b6b9b(0xc1)](_0x4c5e83[_0x3b6b9b(0x107)][_0x3b6b9b(0x9d)]+_0x3b6b9b(0xea));if(!_0x14c2bc||!_0x14c2bc[_0x3b6b9b(0xc4)])return;const _0x3053ed=JSON[_0x3b6b9b(0x74)](_0x14c2bc['val']),_0x35e4a0=_0x4c5e83['config'][_0x3b6b9b(0x77)]||[],_0x45529f=_0x4c5e83[_0x3b6b9b(0x107)][_0x3b6b9b(0x111)]||[],_0xc59813=new Set();_0x45529f[_0x3b6b9b(0xe5)](_0x31f76e=>{const _0x15e955=_0x3b6b9b;if(_0x31f76e['location'])_0xc59813[_0x15e955(0xbc)](_0x31f76e[_0x15e955(0x11c)]);});for(const _0x487295 of _0x3053ed){if(_0x487295[_0x3b6b9b(0xbd)]&&_0x35e4a0[_0x3b6b9b(0x99)]>0x0&&!_0x35e4a0[_0x3b6b9b(0xc5)](_0x487295[_0x3b6b9b(0xbd)]))continue;const _0x2a4695=_0x487295['_date']||_0x487295[_0x3b6b9b(0x12b)]||_0x487295['date'];if(!_0x2a4695)continue;const _0x5778fa=new Date(_0x2a4695),_0x98d850=_0x5778fa[_0x3b6b9b(0x7b)]();if(isNaN(_0x98d850))continue;if(_0x98d850<_0x4496d0)continue;if(_0x98d850>_0x4496d0+_0x3f717d)continue;const _0xa4fa48=(_0x487295[_0x3b6b9b(0x126)]||_0x487295[_0x3b6b9b(0x7a)]||'')[_0x3b6b9b(0xb5)]();let _0x40fd34=![],_0x3cea90=[],_0xf595d8=_0x487295[_0x3b6b9b(0x126)]||_0x487295['summary']||'Unbekannt';if(_0xa4fa48['includes']('urlaub\x20ende')||_0xa4fa48['includes'](_0x3b6b9b(0xfc))||_0xa4fa48[_0x3b6b9b(0xc5)](_0x3b6b9b(0x10a)))_0x40fd34=!![],_0x3cea90=Array[_0x3b6b9b(0xe8)](_0xc59813);else for(const _0x27f458 of _0xc59813){if(_0xa4fa48[_0x3b6b9b(0xc5)](_0x27f458['toLowerCase']()))_0x3cea90[_0x3b6b9b(0xc9)](_0x27f458);}_0x3cea90[_0x3b6b9b(0x99)]>0x0&&_0x3cea90[_0x3b6b9b(0xe5)](_0x1e9312=>{const _0x445c09=_0x3b6b9b;let _0xa3bcaa=0x3c;if(_0x40fd34){let _0x159aa6=0x0;Object[_0x445c09(0x122)](_0x4549dc)[_0x445c09(0xe5)](_0xd9c697=>{if(_0xd9c697>_0x159aa6)_0x159aa6=_0xd9c697;}),_0xa3bcaa=_0x159aa6>0x0?_0x159aa6:0x78;}else _0xa3bcaa=getWarmupRobust(_0x4549dc,_0x1e9312);const _0x552fb6=new Date(_0x98d850-_0xa3bcaa*0xea60);_0x3435f7[_0x445c09(0xc9)]({'eventTime':_0x98d850,'triggerTime':_0x552fb6[_0x445c09(0x7b)](),'room':_0x1e9312,'minutes':_0xa3bcaa,'reason':_0xf595d8,'isGlobal':_0x40fd34});});}}catch(_0x4c7f7e){}_0x3435f7[_0x3b6b9b(0xa2)]((_0x3c8787,_0x515a49)=>_0x3c8787[_0x3b6b9b(0x11f)]-_0x515a49[_0x3b6b9b(0x11f)]);const _0x594937=_0x3435f7[_0x3b6b9b(0x101)](0x0,0x5);await _0x4c5e83[_0x3b6b9b(0xaf)](_0x3b6b9b(0x116),{'val':JSON['stringify'](_0x594937),'ack':!![]});}async function monitorEnforcements(_0x45c06b){const _0x4ddf41=a1_0x1c23ba;try{const _0x4ff175='analysis.energy.activeEnforcements',_0x5c6def=await _0x45c06b['getStateAsync'](_0x4ff175);if(!_0x5c6def||!_0x5c6def[_0x4ddf41(0xc4)])return;let _0x42ea26=[];try{_0x42ea26=JSON[_0x4ddf41(0x74)](_0x5c6def[_0x4ddf41(0xc4)]);}catch(_0x3a9470){return;}if(!Array[_0x4ddf41(0xf6)](_0x42ea26)||_0x42ea26[_0x4ddf41(0x99)]===0x0)return;const _0x5e4589=Date[_0x4ddf41(0x109)](),_0x346a22=_0x45c06b[_0x4ddf41(0x107)]['devices']||[];let _0x53e627=![];for(let _0x1f855c=_0x42ea26['length']-0x1;_0x1f855c>=0x0;_0x1f855c--){const _0x205bd8=_0x42ea26[_0x1f855c];if(_0x5e4589>=_0x205bd8[_0x4ddf41(0xec)]){_0x45c06b[_0x4ddf41(0x108)][_0x4ddf41(0x10f)](_0x4ddf41(0x8b)+_0x205bd8[_0x4ddf41(0xdb)]+_0x4ddf41(0xaa)),_0x42ea26[_0x4ddf41(0x78)](_0x1f855c,0x1),_0x53e627=!![];continue;}const _0x4b6a05=_0x346a22[_0x4ddf41(0xf4)](_0x1059e1=>normalize(_0x1059e1['location'])===normalize(_0x205bd8[_0x4ddf41(0xdb)])&&(_0x1059e1[_0x4ddf41(0xba)]===_0x4ddf41(0xe7)||_0x1059e1['type']===_0x4ddf41(0xc8)));if(_0x4b6a05){const _0x18b669=await findRelatedId(_0x45c06b,_0x4b6a05['id'],_0x4ddf41(0x75));if(_0x18b669){const _0x4e4b4a=await _0x45c06b[_0x4ddf41(0xc1)](_0x18b669);_0x4e4b4a&&typeof _0x4e4b4a['val']===_0x4ddf41(0xfe)&&(_0x4e4b4a[_0x4ddf41(0xc4)]<0xf&&(_0x45c06b[_0x4ddf41(0x108)][_0x4ddf41(0x87)]('ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x205bd8[_0x4ddf41(0xdb)]+'\x20auf\x20'+_0x4e4b4a[_0x4ddf41(0xc4)]+_0x4ddf41(0x7d)+_0x205bd8[_0x4ddf41(0x9a)]+_0x4ddf41(0x83)),await _0x45c06b[_0x4ddf41(0x12d)](_0x18b669,_0x205bd8[_0x4ddf41(0x9a)]),await logAutomationAction(_0x45c06b,_0x4ddf41(0xb8)+_0x205bd8[_0x4ddf41(0xdb)]+':\x20'+_0x4e4b4a['val']+'Â°C\x20->\x20'+_0x205bd8[_0x4ddf41(0x9a)]+_0x4ddf41(0x7f))));}}}_0x53e627&&await _0x45c06b[_0x4ddf41(0xaf)](_0x4ff175,{'val':JSON['stringify'](_0x42ea26),'ack':!![]});}catch(_0x3a621d){_0x45c06b[_0x4ddf41(0x108)]['error'](_0x4ddf41(0x81)+_0x3a621d[_0x4ddf41(0x85)]);}}async function checkCalendarTriggers(_0x3a1539){const _0x5563ba=a1_0x1c23ba;if(!_0x3a1539[_0x5563ba(0x107)][_0x5563ba(0xe4)]||!_0x3a1539[_0x5563ba(0x107)]['calendarInstance'])return;await updateSchedulePreview(_0x3a1539);let _0x25a141={},_0x40a4c7={};try{const _0xf4b49f=await _0x3a1539[_0x5563ba(0x11a)](_0x5563ba(0xab));if(_0xf4b49f&&_0xf4b49f[_0x5563ba(0xc4)])_0x25a141=JSON['parse'](_0xf4b49f['val']);const _0x2e7a0d=await _0x3a1539[_0x5563ba(0x11a)](_0x5563ba(0xf3));if(_0x2e7a0d&&_0x2e7a0d[_0x5563ba(0xc4)])_0x40a4c7=JSON['parse'](_0x2e7a0d['val']);}catch(_0x5cd4d0){}let _0x20ca11={'default':0x15};try{const _0x479f64=await _0x3a1539[_0x5563ba(0x11a)](_0x5563ba(0xf2));if(_0x479f64&&_0x479f64[_0x5563ba(0xc4)])_0x20ca11=JSON['parse'](_0x479f64['val']);}catch(_0x354b4e){}let _0xdd52ae=[];try{const _0x182af6=await _0x3a1539[_0x5563ba(0x11a)](_0x5563ba(0xc2));if(_0x182af6&&_0x182af6[_0x5563ba(0xc4)])_0xdd52ae=JSON[_0x5563ba(0x74)](_0x182af6[_0x5563ba(0xc4)]);}catch(_0x193ab5){}try{const _0x50d967=await _0x3a1539[_0x5563ba(0xc1)](_0x3a1539[_0x5563ba(0x107)][_0x5563ba(0x9d)]+_0x5563ba(0xea));if(!_0x50d967||!_0x50d967[_0x5563ba(0xc4)])return;const _0x1ce416=JSON[_0x5563ba(0x74)](_0x50d967[_0x5563ba(0xc4)]),_0x1a8071=Date[_0x5563ba(0x109)](),_0x26c6e5=_0x3a1539[_0x5563ba(0x107)][_0x5563ba(0x111)]||[],_0x26290c=_0x3a1539['config'][_0x5563ba(0x77)]||[];let _0x3b34f8=![];for(const _0x32cfec of _0x1ce416){if(_0x32cfec[_0x5563ba(0xbd)]&&_0x26290c['length']>0x0&&!_0x26290c['includes'](_0x32cfec[_0x5563ba(0xbd)]))continue;const _0x552647=_0x32cfec[_0x5563ba(0x104)]||_0x32cfec[_0x5563ba(0x12b)]||_0x32cfec['date'];if(!_0x552647)continue;const _0x2688e5=new Date(_0x552647);if(isNaN(_0x2688e5[_0x5563ba(0x7b)]()))continue;const _0x6b7f68=(_0x32cfec['event']||_0x32cfec[_0x5563ba(0x7a)]||'')[_0x5563ba(0xb5)]();if(_0x6b7f68[_0x5563ba(0xc5)](_0x5563ba(0xcc))||_0x6b7f68[_0x5563ba(0xc5)](_0x5563ba(0xfc))||_0x6b7f68[_0x5563ba(0xc5)]('ankunft')){let _0x47fad2=0x0;Object[_0x5563ba(0x122)](_0x25a141)[_0x5563ba(0xe5)](_0x4953e6=>{if(_0x4953e6>_0x47fad2)_0x47fad2=_0x4953e6;});if(_0x47fad2===0x0)_0x47fad2=0x78;const _0x1ebee5=_0x2688e5[_0x5563ba(0x7b)]()-_0x47fad2*0xea60;_0x1a8071>=_0x1ebee5&&_0x1a8071<_0x2688e5[_0x5563ba(0x7b)]()&&(_0x3a1539[_0x5563ba(0xd1)]!=='normal'&&(_0x3a1539[_0x5563ba(0x108)][_0x5563ba(0x10f)](_0x5563ba(0x98)+_0x47fad2+_0x5563ba(0x10e)),await _0x3a1539[_0x5563ba(0xaf)](_0x5563ba(0x71),{'val':'normal','ack':![]})));}for(const _0x34f26e of _0x26c6e5){if(_0x34f26e[_0x5563ba(0x11c)]){const _0x5a33f2=_0x34f26e[_0x5563ba(0x11c)][_0x5563ba(0xb5)](),_0x36e54c=(_0x34f26e[_0x5563ba(0xd4)]||'')[_0x5563ba(0xb5)]();let _0x4a74e8=_0x6b7f68[_0x5563ba(0xc5)](_0x5a33f2);!_0x4a74e8&&_0x36e54c['length']>0x3&&_0x6b7f68[_0x5563ba(0xc5)](_0x36e54c)&&(_0x4a74e8=!![]);if(_0x4a74e8){const _0x52396c=getWarmupRobust(_0x25a141,_0x34f26e[_0x5563ba(0x11c)]),_0xa7b51e=_0x40a4c7[_0x34f26e[_0x5563ba(0x11c)]]||_0x5563ba(0x128),_0x18ce53=_0x2688e5['getTime']()-_0x52396c*0xea60;if(_0x1a8071>=_0x18ce53&&_0x1a8071<_0x2688e5[_0x5563ba(0x7b)]()){const _0x428434=lastActions[_0x5563ba(0x8a)+_0x34f26e['location']];if(_0x428434&&_0x1a8071-_0x428434<CAL_COOLDOWN_MS)continue;const _0x2f4672=await findRelatedId(_0x3a1539,_0x34f26e['id'],_0x5563ba(0x75));if(_0x2f4672){let _0x47277d=_0x20ca11[_0x34f26e[_0x5563ba(0x11c)]];if(_0x47277d===undefined)_0x47277d=_0x20ca11[_0x5563ba(0xb4)];if(_0x47277d===undefined)_0x47277d=0x15;const _0x345be5=await _0x3a1539[_0x5563ba(0xc1)](_0x2f4672);if(_0x345be5&&typeof _0x345be5[_0x5563ba(0xc4)]===_0x5563ba(0xfe)&&_0x345be5['val']<_0x47277d-0.5){_0x3a1539[_0x5563ba(0x108)][_0x5563ba(0x10f)](_0x5563ba(0x8e)+_0xa7b51e+_0x5563ba(0xe6)+_0x34f26e['location']+'\x27\x20(Match:\x20'+_0x6b7f68+_0x5563ba(0x112)+_0x47277d+'Â°C\x20(Vorlauf:\x20'+_0x52396c+_0x5563ba(0x10e)),await _0x3a1539[_0x5563ba(0x12d)](_0x2f4672,_0x47277d),await logAutomationAction(_0x3a1539,_0x5563ba(0xac)+_0x34f26e['location']+_0x5563ba(0x103)+_0x47277d+_0x5563ba(0xcb)+_0xa7b51e+')'),lastActions[_0x5563ba(0x8a)+_0x34f26e[_0x5563ba(0x11c)]]=_0x1a8071;const _0x263a1d=_0xdd52ae[_0x5563ba(0xc3)](_0x302da0=>_0x302da0['room']===_0x34f26e['location']);if(_0x263a1d!==-0x1)_0xdd52ae[_0x5563ba(0x78)](_0x263a1d,0x1);_0xdd52ae[_0x5563ba(0xc9)]({'room':_0x34f26e[_0x5563ba(0x11c)],'target':_0x47277d,'until':_0x2688e5[_0x5563ba(0x7b)]()}),_0x3b34f8=!![];}}}}}}}_0x3b34f8&&await _0x3a1539[_0x5563ba(0xaf)]('analysis.energy.activeEnforcements',{'val':JSON[_0x5563ba(0xfa)](_0xdd52ae),'ack':!![]});}catch(_0x9ebec1){_0x3a1539[_0x5563ba(0x108)]['warn'](_0x5563ba(0x113)+_0x9ebec1[_0x5563ba(0x85)]);}}async function manageMpcIntervention(_0xda1b3c,_0x571a13,_0x1309f2){const _0x5f39f5=a1_0x1c23ba;try{const _0xf42c63='analysis.energy.mpcActiveInterventions',_0x540720=await _0xda1b3c[_0x5f39f5(0x11a)](_0xf42c63);let _0x4373fd=[];if(_0x540720&&_0x540720['val'])try{_0x4373fd=JSON['parse'](_0x540720['val']);}catch(_0x5253bb){}const _0x24f3ef=_0x4373fd[_0x5f39f5(0xa1)](_0x571a13);if(_0x1309f2==='add')_0x24f3ef===-0x1&&(_0x4373fd[_0x5f39f5(0xc9)](_0x571a13),await _0xda1b3c['setStateAsync'](_0xf42c63,{'val':JSON['stringify'](_0x4373fd),'ack':!![]}));else _0x1309f2===_0x5f39f5(0x114)&&(_0x24f3ef!==-0x1&&(_0x4373fd['splice'](_0x24f3ef,0x1),await _0xda1b3c[_0x5f39f5(0xaf)](_0xf42c63,{'val':JSON['stringify'](_0x4373fd),'ack':!![]})));}catch(_0x533f99){}}async function cleanupGhostInterventions(_0x388f8f){const _0x21c12b=a1_0x1c23ba;try{const _0x368b40='analysis.energy.mpcActiveInterventions',_0x4fa23d=await _0x388f8f[_0x21c12b(0x11a)](_0x368b40);if(!_0x4fa23d||!_0x4fa23d[_0x21c12b(0xc4)])return;const _0x3d61a5=JSON['parse'](_0x4fa23d['val']);if(!Array[_0x21c12b(0xf6)](_0x3d61a5)||_0x3d61a5[_0x21c12b(0x99)]===0x0)return;let _0x2933c6={'default':0x15};try{const _0x396372=await _0x388f8f[_0x21c12b(0x11a)](_0x21c12b(0xf2));if(_0x396372&&_0x396372[_0x21c12b(0xc4)])_0x2933c6=JSON['parse'](_0x396372['val']);}catch(_0x4e6e79){}let _0x4d4caa=[];try{const _0x1cffb3=await _0x388f8f['getStateAsync'](_0x21c12b(0xb2));if(_0x1cffb3&&_0x1cffb3[_0x21c12b(0xc4)])_0x4d4caa=JSON[_0x21c12b(0x74)](_0x1cffb3['val']);}catch(_0x5471ff){}let _0x173bed={},_0x48dd06=![];try{const _0x2ac5fe=await _0x388f8f[_0x21c12b(0x11a)]('analysis.energy.rlPenalties');if(_0x2ac5fe&&_0x2ac5fe[_0x21c12b(0xc4)])_0x173bed=JSON[_0x21c12b(0x74)](_0x2ac5fe[_0x21c12b(0xc4)]);}catch(_0x4cd54e){}if(_0x173bed['_meta']){const _0x52fb5a=Date[_0x21c12b(0x109)]();for(const [_0x3549b8,_0x5a419d]of Object[_0x21c12b(0x88)](_0x173bed['_meta'])){_0x52fb5a-_0x5a419d>PENALTY_TTL&&(delete _0x173bed[_0x3549b8],delete _0x173bed[_0x21c12b(0x7e)][_0x3549b8],_0x48dd06=!![],_0x388f8f[_0x21c12b(0x108)][_0x21c12b(0x10f)](_0x21c12b(0xd7)+_0x3549b8+'\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.'));}}const _0xb24572=_0x388f8f[_0x21c12b(0x107)][_0x21c12b(0x111)]||[];let _0x26bceb=![];for(let _0x1c276c=_0x3d61a5['length']-0x1;_0x1c276c>=0x0;_0x1c276c--){const _0x3a77f3=_0x3d61a5[_0x1c276c],_0x1ebe0d=_0xb24572[_0x21c12b(0xf4)](_0x553fe=>normalize(_0x553fe[_0x21c12b(0x11c)])===normalize(_0x3a77f3)&&(_0x553fe[_0x21c12b(0xba)]==='temperature'||_0x553fe[_0x21c12b(0xba)]===_0x21c12b(0xc8)));if(!_0x1ebe0d){_0x388f8f['log'][_0x21c12b(0x87)]('ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27'+_0x3a77f3+_0x21c12b(0xa4)),_0x3d61a5['splice'](_0x1c276c,0x1),_0x26bceb=!![];continue;}if(_0x1ebe0d){const _0x3502d5=await findRelatedId(_0x388f8f,_0x1ebe0d['id'],_0x21c12b(0x75)),_0x5e795f=await _0x388f8f[_0x21c12b(0xc1)](_0x1ebe0d['id']);if(_0x3502d5){const _0x53674d=await _0x388f8f[_0x21c12b(0xc1)](_0x3502d5);if(_0x53674d&&typeof _0x53674d[_0x21c12b(0xc4)]===_0x21c12b(0xfe)){let _0x571302=![],_0x18df55='';Math[_0x21c12b(0x100)](_0x53674d[_0x21c12b(0xc4)]-ECO_TEMP)>0.5&&(_0x571302=!![],_0x18df55=_0x21c12b(0x12e));if(!_0x571302&&_0x5e795f&&typeof _0x5e795f[_0x21c12b(0xc4)]===_0x21c12b(0xfe)){const _0xe7198f=_0x2933c6[_0x3a77f3]||_0x2933c6[_0x21c12b(0xb4)]||0x15;_0x5e795f[_0x21c12b(0xc4)]<_0xe7198f+0.2&&(_0x571302=!![],_0x18df55=_0x21c12b(0xa6));}if(_0x571302){if(_0x18df55===_0x21c12b(0x12e)){_0x388f8f[_0x21c12b(0x108)][_0x21c12b(0x10f)](_0x21c12b(0xdf)+_0x3a77f3+'\x20ist\x20auf\x20'+_0x53674d[_0x21c12b(0xc4)]+_0x21c12b(0x129)+ECO_TEMP+_0x21c12b(0x10d));const _0x5a98f5=lastActions[_0x21c12b(0x8a)+_0x3a77f3],_0x387ba1=_0x5a98f5&&Date[_0x21c12b(0x109)]()-_0x5a98f5<0x2*0x3c*0x3e8;if(!_0x387ba1&&_0x53674d[_0x21c12b(0xc4)]>ECO_TEMP+0.5){_0x388f8f[_0x21c12b(0x110)]&&(_0x388f8f[_0x21c12b(0x108)][_0x21c12b(0x10f)](_0x21c12b(0x12f)+_0x3a77f3+_0x21c12b(0xf0)),_0x388f8f['sendToPythonWrapper'](_0x21c12b(0x11b),{'room':_0x3a77f3}));const _0x4e7d42=_0x3a77f3+'_'+new Date()['getHours']();if(!_0x173bed[_0x4e7d42]){_0x173bed[_0x4e7d42]=0x1;if(!_0x173bed['_meta'])_0x173bed['_meta']={};_0x173bed[_0x21c12b(0x7e)][_0x4e7d42]=Date['now'](),_0x48dd06=!![];}}else _0x387ba1&&_0x388f8f[_0x21c12b(0x108)]['info'](_0x21c12b(0x95)+_0x3a77f3+'\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.');}else{if(_0x18df55==='too_cold'){let _0x35c089=![];if(_0x4d4caa['find'](_0x35743a=>_0x35743a[_0x21c12b(0xdb)]===_0x3a77f3))_0x35c089=!![];const _0x43566d=_0xb24572[_0x21c12b(0xb0)](_0x36b13c=>normalize(_0x36b13c['location'])===normalize(_0x3a77f3)&&(_0x36b13c[_0x21c12b(0xba)]===_0x21c12b(0x11e)||_0x36b13c[_0x21c12b(0xba)]==='sensor'||_0x36b13c[_0x21c12b(0xba)]===_0x21c12b(0x132)));for(const _0x52bbc0 of _0x43566d){try{const _0x50b6b3=await _0x388f8f[_0x21c12b(0xc1)](_0x52bbc0['id']);if(_0x50b6b3&&(_0x50b6b3[_0x21c12b(0xc4)]===!![]||_0x50b6b3[_0x21c12b(0xc4)]===0x1||String(_0x50b6b3[_0x21c12b(0xc4)])[_0x21c12b(0xb5)]()===_0x21c12b(0xb6)))_0x35c089=!![];}catch(_0x45a595){}}if(_0x35c089)_0x388f8f[_0x21c12b(0x108)][_0x21c12b(0x10f)](_0x21c12b(0xc6)+_0x3a77f3+_0x21c12b(0xe2));else{const _0x1feccf=_0x2933c6[_0x3a77f3]||_0x2933c6[_0x21c12b(0xb4)]||0x15;_0x388f8f[_0x21c12b(0x108)][_0x21c12b(0x10f)]('ðŸš¨\x20[MPC\x20WATCHDOG]\x20'+_0x3a77f3+_0x21c12b(0x73)+_0x5e795f[_0x21c12b(0xc4)]+'Â°C\x20<\x20'+(_0x1feccf+0.2)+_0x21c12b(0xbe)),await _0x388f8f[_0x21c12b(0x12d)](_0x3502d5,_0x1feccf),await logAutomationAction(_0x388f8f,_0x21c12b(0x97)+_0x3a77f3+_0x21c12b(0x9b)+_0x1feccf+'Â°C'),lastActions['rescue_'+_0x3a77f3]=Date[_0x21c12b(0x109)]();}}}_0x3d61a5[_0x21c12b(0x78)](_0x1c276c,0x1),_0x26bceb=!![];}}}}}_0x26bceb&&await _0x388f8f['setStateAsync'](_0x368b40,{'val':JSON[_0x21c12b(0xfa)](_0x3d61a5),'ack':!![]}),_0x48dd06&&await _0x388f8f[_0x21c12b(0xaf)]('analysis.energy.rlPenalties',{'val':JSON['stringify'](_0x173bed),'ack':!![]});}catch(_0x45b0f8){}}async function applyEnergySavings(_0x46a997,_0x26858f){const _0x3ffecc=a1_0x1c23ba;await cleanupGhostInterventions(_0x46a997);if(!_0x26858f||_0x26858f[_0x3ffecc(0x99)]===0x0)return;const _0x31249f=_0x46a997['config'][_0x3ffecc(0x111)]||[],_0x343bb6=Date['now']();for(const _0x5a38cc of _0x26858f){const _0x3b7062=_0x5a38cc['room'],_0x3d796b=_0x5a38cc[_0x3ffecc(0xe1)],_0x416fa4=_0x5a38cc[_0x3ffecc(0x9a)]||0x15;if(lastActions[_0x3ffecc(0xe0)+_0x3b7062]&&_0x343bb6-lastActions[_0x3ffecc(0xe0)+_0x3b7062]<RESCUE_LOCK_MS)continue;const _0x3a609c=_0x31249f[_0x3ffecc(0xf4)](_0x53c0f9=>normalize(_0x53c0f9[_0x3ffecc(0x11c)])===normalize(_0x3b7062)&&(_0x53c0f9[_0x3ffecc(0xba)]===_0x3ffecc(0xe7)||_0x53c0f9[_0x3ffecc(0xba)]==='thermostat'));if(!_0x3a609c)continue;const _0x1fc5d6=await findRelatedId(_0x46a997,_0x3a609c['id'],_0x3ffecc(0x75));if(_0x1fc5d6){if(lastActions[_0x3ffecc(0xa7)+_0x3b7062]&&_0x343bb6-lastActions[_0x3ffecc(0xa7)+_0x3b7062]<0x1e*0x3c*0x3e8)continue;const _0x4d1007=await _0x46a997[_0x3ffecc(0xc1)](_0x1fc5d6);if(_0x4d1007&&typeof _0x4d1007['val']===_0x3ffecc(0xfe)){const _0x44d53b=_0x4d1007[_0x3ffecc(0xc4)];_0x44d53b!==ECO_TEMP&&await manageMpcIntervention(_0x46a997,_0x3b7062,'remove');if(_0x3d796b>0x1e)_0x44d53b>ECO_TEMP+0.5&&(_0x46a997['log'][_0x3ffecc(0x10f)](_0x3ffecc(0xd6)+_0x3b7062+_0x3ffecc(0x130)+ECO_TEMP+_0x3ffecc(0xda)+_0x3d796b+_0x3ffecc(0xa8)),await _0x46a997['setForeignStateAsync'](_0x1fc5d6,ECO_TEMP),await manageMpcIntervention(_0x46a997,_0x3b7062,'add'),lastActions['mpc_'+_0x3b7062]=_0x343bb6,await logAutomationAction(_0x46a997,_0x3ffecc(0xf8)+_0x3b7062+_0x3ffecc(0x106)+ECO_TEMP+'Â°C'));else _0x3d796b<=0xf&&(_0x44d53b<_0x416fa4&&(_0x46a997[_0x3ffecc(0x108)][_0x3ffecc(0x10f)](_0x3ffecc(0x117)+_0x3b7062+_0x3ffecc(0xcf)+_0x416fa4+_0x3ffecc(0xb7)),await _0x46a997[_0x3ffecc(0x12d)](_0x1fc5d6,_0x416fa4),await manageMpcIntervention(_0x46a997,_0x3b7062,_0x3ffecc(0x114)),lastActions[_0x3ffecc(0xa7)+_0x3b7062]=_0x343bb6,await logAutomationAction(_0x46a997,_0x3ffecc(0xf8)+_0x3b7062+_0x3ffecc(0x9f)+_0x416fa4+'Â°C')));}}else _0x46a997[_0x3ffecc(0x108)]['warn'](_0x3ffecc(0x124)+_0x3b7062+'\x20gefunden!');}}module[a1_0x1c23ba(0xd5)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};