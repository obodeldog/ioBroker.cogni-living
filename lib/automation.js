const a1_0x3963ca=a1_0x4770;(function(_0x5b4fcc,_0x39ada5){const _0x2a8ba3=a1_0x4770,_0x36d110=_0x5b4fcc();while(!![]){try{const _0x338283=parseInt(_0x2a8ba3(0x146))/0x1*(-parseInt(_0x2a8ba3(0x112))/0x2)+-parseInt(_0x2a8ba3(0x1b0))/0x3*(-parseInt(_0x2a8ba3(0x148))/0x4)+parseInt(_0x2a8ba3(0x14e))/0x5+-parseInt(_0x2a8ba3(0x16f))/0x6+-parseInt(_0x2a8ba3(0x1a3))/0x7+-parseInt(_0x2a8ba3(0x138))/0x8+parseInt(_0x2a8ba3(0x1d4))/0x9;if(_0x338283===_0x39ada5)break;else _0x36d110['push'](_0x36d110['shift']());}catch(_0x229e98){_0x36d110['push'](_0x36d110['shift']());}}}(a1_0xef24,0x88489));const a1_0x4c1689=(function(){let _0x188ede=!![];return function(_0x12662c,_0x431774){const _0x5215b8=_0x188ede?function(){const _0x4d143e=a1_0x4770;if(_0x431774){const _0x54fc01=_0x431774[_0x4d143e(0x123)](_0x12662c,arguments);return _0x431774=null,_0x54fc01;}}:function(){};return _0x188ede=![],_0x5215b8;};}()),a1_0x27157c=a1_0x4c1689(this,function(){const _0x17eb1f=a1_0x4770;return a1_0x27157c[_0x17eb1f(0x12c)]()['search'](_0x17eb1f(0x150))[_0x17eb1f(0x12c)]()['constructor'](a1_0x27157c)['search'](_0x17eb1f(0x150));});a1_0x27157c();'use strict';const aiAgent=require(a1_0x3963ca(0x117)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function a1_0x4770(_0x210ef2,_0x4d1872){const _0x20471e=a1_0xef24();return a1_0x4770=function(_0x27157c,_0x4c1689){_0x27157c=_0x27157c-0x10f;let _0xef2437=_0x20471e[_0x27157c];return _0xef2437;},a1_0x4770(_0x210ef2,_0x4d1872);}function normalize(_0x827142){const _0x5a6632=a1_0x3963ca;if(!_0x827142)return'';return _0x827142[_0x5a6632(0x17d)]()[_0x5a6632(0x1b3)](/\s+/g,'')[_0x5a6632(0x178)]();}function getWarmupRobust(_0x43a6d6,_0xa0054f){const _0x36cb11=a1_0x3963ca;if(!_0x43a6d6||!_0xa0054f)return 0x3c;if(_0x43a6d6[_0xa0054f]!==undefined)return _0x43a6d6[_0xa0054f];const _0x394237=_0xa0054f['toLowerCase']()[_0x36cb11(0x1b3)](/Ã¤/g,'ae')['replace'](/Ã¶/g,'oe')[_0x36cb11(0x1b3)](/Ã¼/g,'ue')[_0x36cb11(0x1b3)](/ÃŸ/g,'ss')['replace'](/\s+/g,'_')[_0x36cb11(0x1b3)](/[^a-z0-9_]/g,'');if(_0x43a6d6[_0x394237]!==undefined)return _0x43a6d6[_0x394237];return 0x3c;}async function logAutomationAction(_0x27d979,_0x4cc4a6){const _0x35a1cb=a1_0x3963ca;await _0x27d979[_0x35a1cb(0x1c9)](_0x35a1cb(0x12d),{'val':_0x4cc4a6,'ack':!![]});try{const _0x482713='analysis.automation.actionLog',_0x50fbf2=await _0x27d979['getStateAsync'](_0x482713);let _0x2d00c3=[];if(_0x50fbf2&&_0x50fbf2[_0x35a1cb(0x1ce)])try{_0x2d00c3=JSON['parse'](_0x50fbf2[_0x35a1cb(0x1ce)]);}catch(_0x358e34){}_0x2d00c3['unshift']({'ts':Date['now'](),'msg':_0x4cc4a6});if(_0x2d00c3[_0x35a1cb(0x165)]>0x32)_0x2d00c3=_0x2d00c3['slice'](0x0,0x32);await _0x27d979['setStateAsync'](_0x482713,{'val':JSON[_0x35a1cb(0x18b)](_0x2d00c3),'ack':!![]});}catch(_0x98c8e8){}}async function handlePrediction(_0x54c5d6,_0x21168b,_0x3043d5){const _0x754227=a1_0x3963ca;if(!_0x21168b||_0x21168b==='Unknown')return;let _0x5da009=_0x754227(0x16e),_0x7eec4c=0.6;try{const _0x543608=await _0x54c5d6[_0x754227(0x127)](_0x754227(0x18d));if(_0x543608&&_0x543608['val'])_0x5da009=_0x543608[_0x754227(0x1ce)];const _0x3a8a79=await _0x54c5d6[_0x754227(0x127)](_0x754227(0x161));if(_0x3a8a79&&_0x3a8a79[_0x754227(0x1ce)])_0x7eec4c=_0x3a8a79['val'];}catch(_0x9e4574){}if(_0x5da009===_0x754227(0x16e)||_0x3043d5<_0x7eec4c)return;const _0x180347=Date[_0x754227(0x18f)]();if(lastActions[_0x21168b]&&_0x180347-lastActions[_0x21168b]<COOLDOWN_MS)return;const _0x31b683=_0x54c5d6[_0x754227(0x191)][_0x754227(0x199)]||[],_0x348fb8=normalize(_0x21168b),_0x3f1a13=_0x31b683[_0x754227(0x185)](_0x17ccf8=>normalize(_0x17ccf8['location'])===_0x348fb8&&(_0x17ccf8[_0x754227(0x124)]===_0x754227(0x1cc)||_0x17ccf8[_0x754227(0x124)]===_0x754227(0x192)||_0x17ccf8['type']===_0x754227(0x155)));if(!_0x3f1a13)return;const _0x56bd5b=await aiAgent[_0x754227(0x1b7)](_0x54c5d6,_0x21168b,_0x3f1a13[_0x754227(0x10f)],_0x3043d5);if(!_0x56bd5b[_0x754227(0x170)])return;const _0xd64cce=_0x754227(0x194)+_0x21168b+_0x754227(0x1af)+_0x3f1a13[_0x754227(0x10f)]+'\x20('+_0x56bd5b[_0x754227(0x14b)]+')';await logAutomationAction(_0x54c5d6,'['+_0x5da009[_0x754227(0x19d)]()+']\x20'+_0xd64cce);if(_0x5da009===_0x754227(0x13b)){const _0x2e1277=await _0x54c5d6['getForeignStateAsync'](_0x3f1a13['id']);(!_0x2e1277||!_0x2e1277[_0x754227(0x1ce)]&&_0x2e1277[_0x754227(0x1ce)]!==!![])&&await _0x54c5d6[_0x754227(0x11b)](_0x3f1a13['id'],!![]),lastActions[_0x21168b]=_0x180347;}}async function findRelatedId(_0x2298b3,_0x34597a,_0x396397=a1_0x3963ca(0x1a9)){const _0x1d2590=a1_0x3963ca;if(_0x396397==='setpoint'&&_0x2298b3['config']['thermostatMapping']){let _0x440fb4=_0x2298b3[_0x1d2590(0x191)][_0x1d2590(0x188)];if(typeof _0x440fb4===_0x1d2590(0x164))try{_0x440fb4=JSON[_0x1d2590(0x190)](_0x440fb4);}catch(_0x2e4d12){}if(_0x440fb4&&_0x440fb4[_0x34597a])return _0x440fb4[_0x34597a];}if(_0x396397===_0x1d2590(0x12f)&&_0x2298b3[_0x1d2590(0x191)][_0x1d2590(0x159)]){let _0x34c62d=_0x2298b3[_0x1d2590(0x191)]['valveMapping'];if(typeof _0x34c62d===_0x1d2590(0x164))try{_0x34c62d=JSON[_0x1d2590(0x190)](_0x34c62d);}catch(_0x58d874){}if(_0x34c62d&&_0x34c62d[_0x34597a])return _0x34c62d[_0x34597a];}let _0x3de980=[];if(_0x396397===_0x1d2590(0x1a9))_0x3de980=[{'s':'.1.ACTUAL_TEMPERATURE','t':_0x1d2590(0x15c)},{'s':'.1.TEMPERATURE','t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x1d2590(0x1be),'t':_0x1d2590(0x130)},{'s':_0x1d2590(0x17b),'t':_0x1d2590(0x12b)},{'s':'local_temperature','t':_0x1d2590(0x1b5)},{'s':_0x1d2590(0x14a),'t':'current_heating_setpoint'},{'s':'temperature','t':'target_temperature'},{'s':_0x1d2590(0x162),'t':_0x1d2590(0x1b1)},{'s':_0x1d2590(0x176),'t':_0x1d2590(0x13e)},{'s':'temperature','t':_0x1d2590(0x1a9)}];else _0x396397===_0x1d2590(0x12f)&&(_0x3de980=[{'s':_0x1d2590(0x132),'t':_0x1d2590(0x126)},{'s':_0x1d2590(0x1be),'t':_0x1d2590(0x126)},{'s':'.1.TEMPERATURE','t':_0x1d2590(0x141)},{'s':_0x1d2590(0x14a),'t':_0x1d2590(0x18a)},{'s':'temperature','t':'valve_position'},{'s':_0x1d2590(0x177),'t':'level'}]);for(const _0xa01935 of _0x3de980){if(_0x34597a[_0x1d2590(0x143)](_0xa01935['s'])){const _0x4cd2f1=_0x34597a[_0x1d2590(0x1b3)](_0xa01935['s'],_0xa01935['t']),_0x47cde9=await _0x2298b3[_0x1d2590(0x1cb)](_0x4cd2f1);if(_0x47cde9)return _0x4cd2f1;}}try{const _0x4b4689=_0x34597a['split']('.');if(_0x4b4689[_0x1d2590(0x165)]>0x2){const _0x5fcf53=_0x4b4689[_0x1d2590(0x154)](0x0,-0x1)['join']('.'),_0x2ea000=await _0x2298b3[_0x1d2590(0x187)](_0x5fcf53+'.*'),_0x1592f7=[],_0x289a56=_0x34597a[_0x1d2590(0x1ca)](/[._]+/)['filter'](_0x5e3880=>![_0x1d2590(0x1c4),'0',_0x1d2590(0x128),_0x1d2590(0x14f),_0x1d2590(0x180),_0x1d2590(0x177),'actual',_0x1d2590(0x181),_0x1d2590(0x160),_0x1d2590(0x169)]['includes'](_0x5e3880['toLowerCase']()));for(const [_0x3ac302,_0x41cd89]of Object[_0x1d2590(0x149)](_0x2ea000)){if(_0x3ac302===_0x34597a)continue;if(_0x41cd89&&_0x41cd89[_0x1d2590(0x11a)]){const _0x580813=_0x3ac302['toLowerCase'](),_0x6a5ca6=(_0x41cd89[_0x1d2590(0x11a)][_0x1d2590(0x111)]||'')[_0x1d2590(0x17d)](),_0x1b76f2=(_0x41cd89['common'][_0x1d2590(0x1b8)]||'')['toLowerCase']();let _0x892959=![];if(_0x396397==='setpoint'&&_0x41cd89['common'][_0x1d2590(0x136)]===!![])_0x892959=_0x580813['includes'](_0x1d2590(0x17f))||_0x580813[_0x1d2590(0x143)](_0x1d2590(0x16c))||_0x580813[_0x1d2590(0x143)](_0x1d2590(0x1bb))||_0x6a5ca6[_0x1d2590(0x143)](_0x1d2590(0x121))||_0x6a5ca6['includes'](_0x1d2590(0x13c));else _0x396397===_0x1d2590(0x12f)&&(_0x892959=_0x580813['includes']('level')||_0x580813[_0x1d2590(0x143)](_0x1d2590(0x12f))||_0x580813[_0x1d2590(0x143)](_0x1d2590(0x12e))||_0x580813[_0x1d2590(0x143)](_0x1d2590(0x168))||_0x6a5ca6[_0x1d2590(0x143)](_0x1d2590(0x1c0))||_0x6a5ca6[_0x1d2590(0x143)](_0x1d2590(0x193))||_0x1b76f2[_0x1d2590(0x143)]('%'));if(_0x892959){const _0x44091d=_0x3ac302[_0x1d2590(0x1ca)](/[._]+/)[_0x1d2590(0x152)](_0x34dc1a=>_0x34dc1a['toLowerCase']());let _0x19c0d9=0x0;_0x289a56[_0x1d2590(0x1a2)](_0x4b4544=>{const _0x562085=_0x1d2590;if(_0x44091d['includes'](_0x4b4544[_0x562085(0x17d)]()))_0x19c0d9++;}),_0x1592f7['push']({'id':_0x3ac302,'score':_0x19c0d9});}}}if(_0x1592f7[_0x1d2590(0x165)]>0x0){_0x1592f7['sort']((_0x20a55d,_0x5e8926)=>_0x5e8926['score']-_0x20a55d[_0x1d2590(0x19a)]);if(_0x1592f7[0x0][_0x1d2590(0x19a)]>0x0)return _0x1592f7[0x0]['id'];}}}catch(_0x223416){}return null;}async function scanThermostats(_0x521564){const _0x3ab317=a1_0x3963ca,_0x26baba=_0x521564[_0x3ab317(0x191)]['devices']||[],_0x16fac1=[],_0x214e30=_0x26baba['filter'](_0x42d47d=>_0x42d47d['id']&&_0x42d47d['id']['includes'](_0x3ab317(0x177))||_0x42d47d[_0x3ab317(0x124)]&&['temperature',_0x3ab317(0x1cf),_0x3ab317(0x181)][_0x3ab317(0x143)](_0x42d47d[_0x3ab317(0x124)])||_0x42d47d['name']&&_0x42d47d['name']['toLowerCase']()[_0x3ab317(0x143)](_0x3ab317(0x131)));for(const _0x5e6947 of _0x214e30){const _0x53b0c3=await findRelatedId(_0x521564,_0x5e6947['id'],_0x3ab317(0x1a9)),_0x2fa030=await findRelatedId(_0x521564,_0x5e6947['id'],_0x3ab317(0x12f));let _0x4e1d9a=_0x3ab317(0x11d),_0x237be6=![],_0x2bc533=_0x521564[_0x3ab317(0x191)][_0x3ab317(0x188)]||{};if(typeof _0x2bc533==='string')try{_0x2bc533=JSON[_0x3ab317(0x190)](_0x2bc533);}catch(_0x4dbb49){}let _0x3f2940=_0x521564[_0x3ab317(0x191)][_0x3ab317(0x159)]||{};if(typeof _0x3f2940===_0x3ab317(0x164))try{_0x3f2940=JSON['parse'](_0x3f2940);}catch(_0x3f9a7c){}if(_0x2bc533[_0x5e6947['id']]&&_0x2bc533[_0x5e6947['id']]===_0x53b0c3||_0x3f2940[_0x5e6947['id']]&&_0x3f2940[_0x5e6947['id']]===_0x2fa030)_0x4e1d9a=_0x3ab317(0x144),_0x237be6=!![];else(_0x53b0c3||_0x2fa030)&&(_0x4e1d9a=_0x3ab317(0x1c6));_0x16fac1[_0x3ab317(0x1ad)]({'room':_0x5e6947[_0x3ab317(0x166)]||'Unbekannt','sensorId':_0x5e6947['id'],'setpointId':_0x53b0c3||'-','valveId':_0x2fa030||'-','source':_0x4e1d9a,'isManual':_0x237be6,'status':_0x53b0c3&&_0x2fa030?'PERFECT':_0x53b0c3?'OK':_0x3ab317(0x1c8)});}return _0x16fac1[_0x3ab317(0x139)]((_0x20743b,_0x3eecaf)=>_0x20743b[_0x3ab317(0x134)][_0x3ab317(0x1ae)](_0x3eecaf['room']));}async function updateSchedulePreview(_0x5b97d3){const _0x2885af=a1_0x3963ca;if(!_0x5b97d3['config'][_0x2885af(0x137)]||!_0x5b97d3[_0x2885af(0x191)][_0x2885af(0x182)])return;let _0x526f84={};try{const _0xa72a83=await _0x5b97d3['getStateAsync'](_0x2885af(0x172));if(_0xa72a83&&_0xa72a83[_0x2885af(0x1ce)])_0x526f84=JSON[_0x2885af(0x190)](_0xa72a83[_0x2885af(0x1ce)]);}catch(_0xd3816c){}const _0x131288=[],_0x586faa=Date[_0x2885af(0x18f)](),_0x416d2a=0x30*0x3c*0x3c*0x3e8;try{const _0x28cdeb=await _0x5b97d3[_0x2885af(0x11c)](_0x5b97d3[_0x2885af(0x191)][_0x2885af(0x182)]+_0x2885af(0x14c));if(!_0x28cdeb||!_0x28cdeb[_0x2885af(0x1ce)])return;const _0x136d6c=JSON[_0x2885af(0x190)](_0x28cdeb[_0x2885af(0x1ce)]),_0x237eac=_0x5b97d3['config'][_0x2885af(0x1b4)]||[],_0x18d15e=_0x5b97d3[_0x2885af(0x191)]['devices']||[],_0x4edcd7=new Set();_0x18d15e[_0x2885af(0x1a2)](_0x3a5526=>{const _0x4af91d=_0x2885af;if(_0x3a5526[_0x4af91d(0x166)])_0x4edcd7[_0x4af91d(0x167)](_0x3a5526[_0x4af91d(0x166)]);});for(const _0x15afa3 of _0x136d6c){if(_0x15afa3[_0x2885af(0x15d)]&&_0x237eac[_0x2885af(0x165)]>0x0&&!_0x237eac[_0x2885af(0x143)](_0x15afa3['_calName']))continue;const _0x5ca051=_0x15afa3[_0x2885af(0x198)]||_0x15afa3[_0x2885af(0x1ab)]||_0x15afa3[_0x2885af(0x129)];if(!_0x5ca051)continue;const _0x17654a=new Date(_0x5ca051),_0x407544=_0x17654a[_0x2885af(0x173)]();if(isNaN(_0x407544))continue;if(_0x407544<_0x586faa)continue;if(_0x407544>_0x586faa+_0x416d2a)continue;const _0x14c1a7=(_0x15afa3[_0x2885af(0x1a1)]||_0x15afa3[_0x2885af(0x1b2)]||'')['toLowerCase']();let _0x4539e0=![],_0x39b6f1=[],_0x2aefb2=_0x15afa3[_0x2885af(0x1a1)]||_0x15afa3['summary']||_0x2885af(0x1aa);if(_0x14c1a7['includes'](_0x2885af(0x142))||_0x14c1a7[_0x2885af(0x143)](_0x2885af(0x1c3))||_0x14c1a7[_0x2885af(0x143)](_0x2885af(0x125)))_0x4539e0=!![],_0x39b6f1=Array[_0x2885af(0x19c)](_0x4edcd7);else for(const _0x84ca77 of _0x4edcd7){if(_0x14c1a7['includes'](_0x84ca77[_0x2885af(0x17d)]()))_0x39b6f1['push'](_0x84ca77);}_0x39b6f1[_0x2885af(0x165)]>0x0&&_0x39b6f1[_0x2885af(0x1a2)](_0x3ab4b9=>{const _0x458a28=_0x2885af;let _0x451046=0x3c;if(_0x4539e0){let _0x3d810d=0x0;Object[_0x458a28(0x19f)](_0x526f84)['forEach'](_0x3f78f9=>{if(_0x3f78f9>_0x3d810d)_0x3d810d=_0x3f78f9;}),_0x451046=_0x3d810d>0x0?_0x3d810d:0x78;}else _0x451046=getWarmupRobust(_0x526f84,_0x3ab4b9);const _0xef25ea=new Date(_0x407544-_0x451046*0xea60);_0x131288['push']({'eventTime':_0x407544,'triggerTime':_0xef25ea[_0x458a28(0x173)](),'room':_0x3ab4b9,'minutes':_0x451046,'reason':_0x2aefb2,'isGlobal':_0x4539e0});});}}catch(_0x11c873){}_0x131288[_0x2885af(0x139)]((_0xcf517c,_0x142585)=>_0xcf517c[_0x2885af(0x122)]-_0x142585['triggerTime']);const _0x3fa786=_0x131288[_0x2885af(0x154)](0x0,0x1e);await _0x5b97d3[_0x2885af(0x1c9)]('analysis.energy.schedulePreview',{'val':JSON['stringify'](_0x3fa786),'ack':!![]});}async function monitorEnforcements(_0x126c65){const _0x5b995d=a1_0x3963ca;try{const _0x1c54c7=_0x5b995d(0x1c7),_0x1c261d=await _0x126c65[_0x5b995d(0x127)](_0x1c54c7);if(!_0x1c261d||!_0x1c261d[_0x5b995d(0x1ce)])return;let _0x7af819=[];try{_0x7af819=JSON['parse'](_0x1c261d[_0x5b995d(0x1ce)]);}catch(_0x127eeb){return;}if(!Array[_0x5b995d(0x186)](_0x7af819)||_0x7af819[_0x5b995d(0x165)]===0x0)return;const _0x34ed3b=Date[_0x5b995d(0x18f)](),_0x6dd1b1=_0x126c65[_0x5b995d(0x191)][_0x5b995d(0x199)]||[];let _0xea409c=![];for(let _0x10c64c=_0x7af819['length']-0x1;_0x10c64c>=0x0;_0x10c64c--){const _0x456fe6=_0x7af819[_0x10c64c];if(_0x34ed3b>=_0x456fe6[_0x5b995d(0x135)]){_0x126c65[_0x5b995d(0x19b)][_0x5b995d(0x147)](_0x5b995d(0x15a)+_0x456fe6['room']+_0x5b995d(0x1a6)),_0x7af819['splice'](_0x10c64c,0x1),_0xea409c=!![];continue;}const _0x34cc20=_0x6dd1b1[_0x5b995d(0x185)](_0x2100c8=>normalize(_0x2100c8[_0x5b995d(0x166)])===normalize(_0x456fe6[_0x5b995d(0x134)])&&(_0x2100c8['type']===_0x5b995d(0x177)||_0x2100c8[_0x5b995d(0x124)]===_0x5b995d(0x1cf)));if(_0x34cc20){const _0x43e948=await findRelatedId(_0x126c65,_0x34cc20['id'],_0x5b995d(0x1a9));if(_0x43e948){const _0x4e5e7c=await _0x126c65['getForeignStateAsync'](_0x43e948);_0x4e5e7c&&typeof _0x4e5e7c[_0x5b995d(0x1ce)]===_0x5b995d(0x1bf)&&(_0x4e5e7c['val']<0xf&&(_0x126c65[_0x5b995d(0x19b)][_0x5b995d(0x1ba)]('ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x456fe6[_0x5b995d(0x134)]+'\x20auf\x20'+_0x4e5e7c[_0x5b995d(0x1ce)]+_0x5b995d(0x1a0)+_0x456fe6['target']+_0x5b995d(0x1b9)),await _0x126c65[_0x5b995d(0x11b)](_0x43e948,_0x456fe6['target']),await logAutomationAction(_0x126c65,_0x5b995d(0x158)+_0x456fe6[_0x5b995d(0x134)]+':\x20'+_0x4e5e7c[_0x5b995d(0x1ce)]+_0x5b995d(0x157)+_0x456fe6[_0x5b995d(0x1bb)]+_0x5b995d(0x15b))));}}}_0xea409c&&await _0x126c65[_0x5b995d(0x1c9)](_0x1c54c7,{'val':JSON['stringify'](_0x7af819),'ack':!![]});}catch(_0x42f216){_0x126c65[_0x5b995d(0x19b)]['error'](_0x5b995d(0x18e)+_0x42f216[_0x5b995d(0x19e)]);}}async function checkCalendarTriggers(_0x18fd2b){const _0xf1bb41=a1_0x3963ca;if(!_0x18fd2b['config'][_0xf1bb41(0x137)]||!_0x18fd2b[_0xf1bb41(0x191)]['calendarInstance'])return;await updateSchedulePreview(_0x18fd2b);let _0x188238={},_0x2c397e={};try{const _0xf927e4=await _0x18fd2b[_0xf1bb41(0x127)](_0xf1bb41(0x172));if(_0xf927e4&&_0xf927e4[_0xf1bb41(0x1ce)])_0x188238=JSON[_0xf1bb41(0x190)](_0xf927e4[_0xf1bb41(0x1ce)]);const _0xd52deb=await _0x18fd2b[_0xf1bb41(0x127)](_0xf1bb41(0x1a7));if(_0xd52deb&&_0xd52deb['val'])_0x2c397e=JSON[_0xf1bb41(0x190)](_0xd52deb['val']);}catch(_0x4b7e40){}let _0x310055={'default':0x15};try{const _0x1e2cd2=await _0x18fd2b['getStateAsync'](_0xf1bb41(0x174));if(_0x1e2cd2&&_0x1e2cd2['val'])_0x310055=JSON['parse'](_0x1e2cd2[_0xf1bb41(0x1ce)]);}catch(_0x2b4daa){}let _0x3bb6fb=[];try{const _0x1471e1=await _0x18fd2b[_0xf1bb41(0x127)](_0xf1bb41(0x1c7));if(_0x1471e1&&_0x1471e1[_0xf1bb41(0x1ce)])_0x3bb6fb=JSON[_0xf1bb41(0x190)](_0x1471e1['val']);}catch(_0x49fa4d){}try{const _0x4c53b6=await _0x18fd2b[_0xf1bb41(0x11c)](_0x18fd2b['config'][_0xf1bb41(0x182)]+_0xf1bb41(0x14c));if(!_0x4c53b6||!_0x4c53b6['val'])return;const _0xbcd7e=JSON[_0xf1bb41(0x190)](_0x4c53b6[_0xf1bb41(0x1ce)]),_0x543e09=Date[_0xf1bb41(0x18f)](),_0x22134c=_0x18fd2b[_0xf1bb41(0x191)][_0xf1bb41(0x199)]||[],_0x283505=_0x18fd2b[_0xf1bb41(0x191)]['calendarSelection']||[];let _0xd79be=![];for(const _0x362e82 of _0xbcd7e){if(_0x362e82[_0xf1bb41(0x15d)]&&_0x283505[_0xf1bb41(0x165)]>0x0&&!_0x283505[_0xf1bb41(0x143)](_0x362e82[_0xf1bb41(0x15d)]))continue;const _0x42692d=_0x362e82['_date']||_0x362e82[_0xf1bb41(0x1ab)]||_0x362e82[_0xf1bb41(0x129)];if(!_0x42692d)continue;const _0x271553=new Date(_0x42692d);if(isNaN(_0x271553[_0xf1bb41(0x173)]()))continue;const _0x3ec3b2=(_0x362e82[_0xf1bb41(0x1a1)]||_0x362e82['summary']||'')['toLowerCase']();if(_0x3ec3b2[_0xf1bb41(0x143)](_0xf1bb41(0x142))||_0x3ec3b2['includes'](_0xf1bb41(0x1c3))||_0x3ec3b2[_0xf1bb41(0x143)](_0xf1bb41(0x125))){let _0x17544b=0x0;Object[_0xf1bb41(0x19f)](_0x188238)['forEach'](_0x308919=>{if(_0x308919>_0x17544b)_0x17544b=_0x308919;});if(_0x17544b===0x0)_0x17544b=0x78;const _0x3b7f0d=_0x271553['getTime']()-_0x17544b*0xea60;_0x543e09>=_0x3b7f0d&&_0x543e09<_0x271553[_0xf1bb41(0x173)]()&&(_0x18fd2b['currentSystemMode']!==_0xf1bb41(0x18c)&&(_0x18fd2b[_0xf1bb41(0x19b)][_0xf1bb41(0x147)](_0xf1bb41(0x11f)+_0x17544b+_0xf1bb41(0x1bc)),await _0x18fd2b[_0xf1bb41(0x1c9)]('system.mode',{'val':_0xf1bb41(0x18c),'ack':![]})));}for(const _0x435000 of _0x22134c){if(_0x435000['location']){const _0x104e5e=_0x435000['location'][_0xf1bb41(0x17d)](),_0x48ba9b=(_0x435000['name']||'')[_0xf1bb41(0x17d)]();let _0x37b316=_0x3ec3b2[_0xf1bb41(0x143)](_0x104e5e);!_0x37b316&&_0x48ba9b[_0xf1bb41(0x165)]>0x3&&_0x3ec3b2['includes'](_0x48ba9b)&&(_0x37b316=!![]);if(_0x37b316){const _0x1da34f=getWarmupRobust(_0x188238,_0x435000['location']),_0x3dd41d=_0x2c397e[_0x435000['location']]||'Classic',_0x3c9c84=_0x271553[_0xf1bb41(0x173)]()-_0x1da34f*0xea60;if(_0x543e09>=_0x3c9c84&&_0x543e09<_0x271553[_0xf1bb41(0x173)]()){const _0x41793b=lastActions[_0xf1bb41(0x16b)+_0x435000['location']];if(_0x41793b&&_0x543e09-_0x41793b<CAL_COOLDOWN_MS)continue;const _0x27bc8e=await findRelatedId(_0x18fd2b,_0x435000['id'],_0xf1bb41(0x1a9));if(_0x27bc8e){let _0xc9d426=_0x310055[_0x435000[_0xf1bb41(0x166)]];if(_0xc9d426===undefined)_0xc9d426=_0x310055[_0xf1bb41(0x16a)];if(_0xc9d426===undefined)_0xc9d426=0x15;const _0x4e9d4a=await _0x18fd2b[_0xf1bb41(0x11c)](_0x27bc8e);if(_0x4e9d4a&&typeof _0x4e9d4a[_0xf1bb41(0x1ce)]===_0xf1bb41(0x1bf)&&_0x4e9d4a[_0xf1bb41(0x1ce)]<_0xc9d426-0.5){_0x18fd2b[_0xf1bb41(0x19b)]['info'](_0xf1bb41(0x13a)+_0x3dd41d+_0xf1bb41(0x184)+_0x435000[_0xf1bb41(0x166)]+'\x27\x20(Match:\x20'+_0x3ec3b2+_0xf1bb41(0x189)+_0xc9d426+'Â°C\x20(Vorlauf:\x20'+_0x1da34f+'\x20min).'),await _0x18fd2b[_0xf1bb41(0x11b)](_0x27bc8e,_0xc9d426),await logAutomationAction(_0x18fd2b,_0xf1bb41(0x118)+_0x435000[_0xf1bb41(0x166)]+_0xf1bb41(0x1b6)+_0xc9d426+_0xf1bb41(0x114)+_0x3dd41d+')'),lastActions['cal_'+_0x435000[_0xf1bb41(0x166)]]=_0x543e09;const _0x14e08f=_0x3bb6fb[_0xf1bb41(0x151)](_0x5084ee=>_0x5084ee[_0xf1bb41(0x134)]===_0x435000['location']);if(_0x14e08f!==-0x1)_0x3bb6fb['splice'](_0x14e08f,0x1);_0x3bb6fb[_0xf1bb41(0x1ad)]({'room':_0x435000[_0xf1bb41(0x166)],'target':_0xc9d426,'until':_0x271553[_0xf1bb41(0x173)]()}),_0xd79be=!![];}}}}}}}_0xd79be&&await _0x18fd2b['setStateAsync'](_0xf1bb41(0x1c7),{'val':JSON[_0xf1bb41(0x18b)](_0x3bb6fb),'ack':!![]});}catch(_0x517f32){_0x18fd2b['log'][_0xf1bb41(0x1ba)](_0xf1bb41(0x1c5)+_0x517f32[_0xf1bb41(0x19e)]);}}async function manageMpcIntervention(_0x8fed67,_0x3c0c25,_0x266f8a){const _0x34e4ba=a1_0x3963ca;try{const _0x134206=_0x34e4ba(0x11e),_0x1744e1=await _0x8fed67[_0x34e4ba(0x127)](_0x134206);let _0x4dad7a=[];if(_0x1744e1&&_0x1744e1[_0x34e4ba(0x1ce)])try{_0x4dad7a=JSON[_0x34e4ba(0x190)](_0x1744e1['val']);}catch(_0x359ddd){}const _0x3ae56c=_0x4dad7a['indexOf'](_0x3c0c25);if(_0x266f8a===_0x34e4ba(0x167))_0x3ae56c===-0x1&&(_0x4dad7a[_0x34e4ba(0x1ad)](_0x3c0c25),await _0x8fed67[_0x34e4ba(0x1c9)](_0x134206,{'val':JSON[_0x34e4ba(0x18b)](_0x4dad7a),'ack':!![]}));else _0x266f8a===_0x34e4ba(0x1d5)&&(_0x3ae56c!==-0x1&&(_0x4dad7a['splice'](_0x3ae56c,0x1),await _0x8fed67[_0x34e4ba(0x1c9)](_0x134206,{'val':JSON[_0x34e4ba(0x18b)](_0x4dad7a),'ack':!![]})));}catch(_0x4987d6){}}async function cleanupGhostInterventions(_0x1adde5){const _0x3bd68f=a1_0x3963ca;try{const _0x4d1f22=_0x3bd68f(0x11e),_0x1f4c9b=await _0x1adde5['getStateAsync'](_0x4d1f22);if(!_0x1f4c9b||!_0x1f4c9b[_0x3bd68f(0x1ce)])return;const _0x301b5a=JSON[_0x3bd68f(0x190)](_0x1f4c9b[_0x3bd68f(0x1ce)]);if(!Array['isArray'](_0x301b5a)||_0x301b5a[_0x3bd68f(0x165)]===0x0)return;let _0x35baff={'default':0x15};try{const _0x58ce17=await _0x1adde5['getStateAsync'](_0x3bd68f(0x174));if(_0x58ce17&&_0x58ce17[_0x3bd68f(0x1ce)])_0x35baff=JSON[_0x3bd68f(0x190)](_0x58ce17['val']);}catch(_0x27aaff){}let _0x2d2ab3=[];try{const _0x50040=await _0x1adde5[_0x3bd68f(0x127)]('analysis.energy.ventilationAlerts');if(_0x50040&&_0x50040['val'])_0x2d2ab3=JSON[_0x3bd68f(0x190)](_0x50040[_0x3bd68f(0x1ce)]);}catch(_0x412752){}let _0x30b7b4={},_0x267da2=![];try{const _0x1a0f7d=await _0x1adde5[_0x3bd68f(0x127)](_0x3bd68f(0x197));if(_0x1a0f7d&&_0x1a0f7d[_0x3bd68f(0x1ce)])_0x30b7b4=JSON['parse'](_0x1a0f7d[_0x3bd68f(0x1ce)]);}catch(_0xa96449){}if(_0x30b7b4['_meta']){const _0x126b2c=Date[_0x3bd68f(0x18f)]();for(const [_0x3fcc15,_0x5067b3]of Object[_0x3bd68f(0x149)](_0x30b7b4[_0x3bd68f(0x15e)])){_0x126b2c-_0x5067b3>PENALTY_TTL&&(delete _0x30b7b4[_0x3fcc15],delete _0x30b7b4[_0x3bd68f(0x15e)][_0x3fcc15],_0x267da2=!![],_0x1adde5['log'][_0x3bd68f(0x147)](_0x3bd68f(0x179)+_0x3fcc15+_0x3bd68f(0x183)));}}const _0x57a405=_0x1adde5[_0x3bd68f(0x191)]['devices']||[];let _0x3a84ee=![];for(let _0x51603e=_0x301b5a[_0x3bd68f(0x165)]-0x1;_0x51603e>=0x0;_0x51603e--){const _0x3b7f8e=_0x301b5a[_0x51603e],_0x3ac5f2=_0x57a405[_0x3bd68f(0x185)](_0x2c73c0=>normalize(_0x2c73c0['location'])===normalize(_0x3b7f8e)&&(_0x2c73c0[_0x3bd68f(0x124)]==='temperature'||_0x2c73c0['type']===_0x3bd68f(0x1cf)));if(!_0x3ac5f2){_0x1adde5[_0x3bd68f(0x19b)][_0x3bd68f(0x1ba)](_0x3bd68f(0x16d)+_0x3b7f8e+_0x3bd68f(0x13f)),_0x301b5a[_0x3bd68f(0x110)](_0x51603e,0x1),_0x3a84ee=!![];continue;}if(_0x3ac5f2){const _0x319eba=await findRelatedId(_0x1adde5,_0x3ac5f2['id'],_0x3bd68f(0x1a9)),_0x505b9b=await _0x1adde5[_0x3bd68f(0x11c)](_0x3ac5f2['id']);if(_0x319eba){const _0x538e20=await _0x1adde5[_0x3bd68f(0x11c)](_0x319eba);if(_0x538e20&&typeof _0x538e20[_0x3bd68f(0x1ce)]===_0x3bd68f(0x1bf)){let _0x3b5fcb=![],_0x2340e3='';Math['abs'](_0x538e20['val']-ECO_TEMP)>0.5&&(_0x3b5fcb=!![],_0x2340e3='manual');if(!_0x3b5fcb&&_0x505b9b&&typeof _0x505b9b['val']===_0x3bd68f(0x1bf)){const _0x15510c=_0x35baff[_0x3b7f8e]||_0x35baff[_0x3bd68f(0x16a)]||0x15;_0x505b9b['val']<_0x15510c+0.2&&(_0x3b5fcb=!![],_0x2340e3=_0x3bd68f(0x1d1));}if(_0x3b5fcb){if(_0x2340e3===_0x3bd68f(0x1ac)){_0x1adde5[_0x3bd68f(0x19b)][_0x3bd68f(0x147)](_0x3bd68f(0x12a)+_0x3b7f8e+_0x3bd68f(0x195)+_0x538e20['val']+_0x3bd68f(0x15f)+ECO_TEMP+_0x3bd68f(0x1d3));const _0x28452e=lastActions[_0x3bd68f(0x16b)+_0x3b7f8e],_0xb084e6=_0x28452e&&Date[_0x3bd68f(0x18f)]()-_0x28452e<0x2*0x3c*0x3e8;if(!_0xb084e6&&_0x538e20[_0x3bd68f(0x1ce)]>ECO_TEMP+0.5){_0x1adde5['sendToPythonWrapper']&&(_0x1adde5[_0x3bd68f(0x19b)][_0x3bd68f(0x147)](_0x3bd68f(0x175)+_0x3b7f8e+_0x3bd68f(0x13d)),_0x1adde5[_0x3bd68f(0x1d0)]('TRAIN_RL_PENALTY',{'room':_0x3b7f8e}));const _0x3ad897=_0x3b7f8e+'_'+new Date()[_0x3bd68f(0x1cd)]();if(!_0x30b7b4[_0x3ad897]){_0x30b7b4[_0x3ad897]=0x1;if(!_0x30b7b4[_0x3bd68f(0x15e)])_0x30b7b4[_0x3bd68f(0x15e)]={};_0x30b7b4[_0x3bd68f(0x15e)][_0x3ad897]=Date['now'](),_0x267da2=!![];}}else _0xb084e6&&_0x1adde5['log'][_0x3bd68f(0x147)](_0x3bd68f(0x1c1)+_0x3b7f8e+_0x3bd68f(0x1d2));}else{if(_0x2340e3===_0x3bd68f(0x1d1)){let _0x339efb=![];if(_0x2d2ab3[_0x3bd68f(0x185)](_0x461d28=>_0x461d28['room']===_0x3b7f8e))_0x339efb=!![];const _0x451de0=_0x57a405['filter'](_0x3c7d2a=>normalize(_0x3c7d2a[_0x3bd68f(0x166)])===normalize(_0x3b7f8e)&&(_0x3c7d2a[_0x3bd68f(0x124)]===_0x3bd68f(0x116)||_0x3c7d2a[_0x3bd68f(0x124)]===_0x3bd68f(0x181)||_0x3c7d2a[_0x3bd68f(0x124)]===_0x3bd68f(0x14d)));for(const _0x63cd2b of _0x451de0){try{const _0xce5df6=await _0x1adde5[_0x3bd68f(0x11c)](_0x63cd2b['id']);if(_0xce5df6&&(_0xce5df6[_0x3bd68f(0x1ce)]===!![]||_0xce5df6['val']===0x1||String(_0xce5df6[_0x3bd68f(0x1ce)])[_0x3bd68f(0x17d)]()==='open'))_0x339efb=!![];}catch(_0x3fea3f){}}if(_0x339efb)_0x1adde5[_0x3bd68f(0x19b)][_0x3bd68f(0x147)](_0x3bd68f(0x153)+_0x3b7f8e+_0x3bd68f(0x1a5));else{const _0x5c2197=_0x35baff[_0x3b7f8e]||_0x35baff['default']||0x15;_0x1adde5[_0x3bd68f(0x19b)][_0x3bd68f(0x147)](_0x3bd68f(0x17e)+_0x3b7f8e+_0x3bd68f(0x120)+_0x505b9b[_0x3bd68f(0x1ce)]+_0x3bd68f(0x133)+(_0x5c2197+0.2)+_0x3bd68f(0x163)),await _0x1adde5[_0x3bd68f(0x11b)](_0x319eba,_0x5c2197),await logAutomationAction(_0x1adde5,_0x3bd68f(0x1a8)+_0x3b7f8e+_0x3bd68f(0x17a)+_0x5c2197+'Â°C'),lastActions['rescue_'+_0x3b7f8e]=Date['now']();}}}_0x301b5a[_0x3bd68f(0x110)](_0x51603e,0x1),_0x3a84ee=!![];}}}}}_0x3a84ee&&await _0x1adde5[_0x3bd68f(0x1c9)](_0x4d1f22,{'val':JSON[_0x3bd68f(0x18b)](_0x301b5a),'ack':!![]}),_0x267da2&&await _0x1adde5['setStateAsync']('analysis.energy.rlPenalties',{'val':JSON['stringify'](_0x30b7b4),'ack':!![]});}catch(_0x244db4){}}function a1_0xef24(){const _0x5c8e35=['ðŸš¨\x20[MPC\x20WATCHDOG]\x20','set','wert','sensor','calendarInstance','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.',']:\x20Raum-Trigger\x20\x27','find','isArray','getForeignObjectsAsync','thermostatMapping',')\x20aktiv.\x20Heize\x20auf\x20','pi_heating_demand','stringify','normal','analysis.automation.mode','Enforcement\x20Monitor\x20Error:\x20','now','parse','config','dimmer','value.valve','PrÃ¤diktion:\x20','\x20ist\x20auf\x20','\x20gefunden!','analysis.energy.rlPenalties','_date','devices','score','log','from','toUpperCase','message','values','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','event','forEach','6987624jyBTEV','[MPC]\x20','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','analysis.energy.warmupSources','[WATCHDOG]\x20','setpoint','Unbekannt','eventStart','manual','push','localeCompare','\x20->\x20Schalte\x20','93DNTtYn','SET','summary','replace','calendarSelection','occupied_heating_setpoint','\x20->\x20','consultButler','unit','Â°C.','warn','target','\x20min).','mpc_','.1.TEMPERATURE','number','level.valve','ðŸ“…\x20[MPC\x20INFO]\x20','exports','rÃ¼ckkehr','openknx','Calendar\x20Check\x20Error:\x20','Auto-Erkennung','analysis.energy.activeEnforcements','Fehlt','setStateAsync','split','getForeignObjectAsync','light','getHours','val','thermostat','sendToPythonWrapper','too_cold','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','Â°C).\x20Entferne\x20Status.','18022761uhcBxM','remove','name','splice','role','188242XIUbBz','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','Â°C\x20(via\x20',':\x20Aufheizen\x20auf\x20','window','./ai_agent','[CAL]\x20','rescue_','common','setForeignStateAsync','getForeignStateAsync','Nicht\x20gefunden','analysis.energy.mpcActiveInterventions','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','\x20erreicht\x20Limit\x20(','level.temperature','triggerTime','apply','type','ankunft','.1.LEVEL','getStateAsync','hm-rpc','date','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','SET_POINT_TEMPERATURE','toString','analysis.automation.lastAction','stellwert','valve','.4.SET_TEMPERATURE','temp','.1.ACTUAL_TEMPERATURE','Â°C\x20<\x20','room','until','write','useCalendar','3846536xUzDTu','sort','ðŸ“…\x20SMART\x20SCHEDULE\x20[','active','thermostat.setpoint','\x20wurde\x20manuell\x20erhÃ¶ht.','Soll','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','.4.VALVE_STATE','urlaub\x20ende','includes','Manuelles\x20Mapping','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','2KENsii','info','32848LJdEmj','entries','local_temperature','reason','.data.table','contact','2944420RjNgoU','ist','(((.+)+)+)+$','findIndex','map','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','slice','switch','\x20auf\x20','Â°C\x20->\x20','[FORCE]\x20','valveMapping','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','Â°C\x20(Kalender-Schutz)','.1.SET_POINT_TEMPERATURE','_calName','_meta','Â°C\x20(nicht\x20','messwert','analysis.automation.confidenceThreshold','ACTUAL','Â°C).\x20Sparmodus\x20beendet!','string','length','location','add','position','state','default','cal_','soll','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','off','3722862lowXBp','approved','minutes_safe','analysis.energy.warmupTimes','getTime','analysis.energy.warmupTargets','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','Ist','temperature','trim','ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','ACTUAL_TEMPERATURE','Â°C!\x20(Puffer:\x20','toLowerCase'];a1_0xef24=function(){return _0x5c8e35;};return a1_0xef24();}async function applyEnergySavings(_0x58eecc,_0x58c073){const _0x15c0a8=a1_0x3963ca;await cleanupGhostInterventions(_0x58eecc);if(!_0x58c073||_0x58c073['length']===0x0)return;const _0x38590e=_0x58eecc[_0x15c0a8(0x191)][_0x15c0a8(0x199)]||[],_0x11b39f=Date[_0x15c0a8(0x18f)]();for(const _0x147a23 of _0x58c073){const _0x5c4f86=_0x147a23[_0x15c0a8(0x134)],_0x42b620=_0x147a23[_0x15c0a8(0x171)],_0x1eaf1e=_0x147a23['target']||0x15;if(lastActions[_0x15c0a8(0x119)+_0x5c4f86]&&_0x11b39f-lastActions[_0x15c0a8(0x119)+_0x5c4f86]<RESCUE_LOCK_MS)continue;const _0x10d3f0=_0x38590e[_0x15c0a8(0x185)](_0x1617a3=>normalize(_0x1617a3['location'])===normalize(_0x5c4f86)&&(_0x1617a3[_0x15c0a8(0x124)]===_0x15c0a8(0x177)||_0x1617a3['type']===_0x15c0a8(0x1cf)));if(!_0x10d3f0)continue;const _0x531e57=await findRelatedId(_0x58eecc,_0x10d3f0['id'],_0x15c0a8(0x1a9));if(_0x531e57){if(lastActions['mpc_'+_0x5c4f86]&&_0x11b39f-lastActions[_0x15c0a8(0x1bd)+_0x5c4f86]<0x1e*0x3c*0x3e8)continue;const _0x11a6bb=await _0x58eecc['getForeignStateAsync'](_0x531e57);if(_0x11a6bb&&typeof _0x11a6bb[_0x15c0a8(0x1ce)]===_0x15c0a8(0x1bf)){const _0x44c7da=_0x11a6bb[_0x15c0a8(0x1ce)];_0x44c7da!==ECO_TEMP&&await manageMpcIntervention(_0x58eecc,_0x5c4f86,_0x15c0a8(0x1d5));if(_0x42b620>0x1e)_0x44c7da>ECO_TEMP+0.5&&(_0x58eecc[_0x15c0a8(0x19b)][_0x15c0a8(0x147)](_0x15c0a8(0x140)+_0x5c4f86+_0x15c0a8(0x156)+ECO_TEMP+_0x15c0a8(0x17c)+_0x42b620+'\x20min)'),await _0x58eecc[_0x15c0a8(0x11b)](_0x531e57,ECO_TEMP),await manageMpcIntervention(_0x58eecc,_0x5c4f86,_0x15c0a8(0x167)),lastActions[_0x15c0a8(0x1bd)+_0x5c4f86]=_0x11b39f,await logAutomationAction(_0x58eecc,_0x15c0a8(0x1a4)+_0x5c4f86+':\x20Absenkung\x20auf\x20'+ECO_TEMP+'Â°C'));else _0x42b620<=0xf&&(_0x44c7da<_0x1eaf1e&&(_0x58eecc[_0x15c0a8(0x19b)][_0x15c0a8(0x147)](_0x15c0a8(0x113)+_0x5c4f86+'\x20wieder\x20auf\x20'+_0x1eaf1e+'Â°C!\x20(Puffer\x20leer).'),await _0x58eecc['setForeignStateAsync'](_0x531e57,_0x1eaf1e),await manageMpcIntervention(_0x58eecc,_0x5c4f86,_0x15c0a8(0x1d5)),lastActions[_0x15c0a8(0x1bd)+_0x5c4f86]=_0x11b39f,await logAutomationAction(_0x58eecc,_0x15c0a8(0x1a4)+_0x5c4f86+_0x15c0a8(0x115)+_0x1eaf1e+'Â°C')));}}else _0x58eecc[_0x15c0a8(0x19b)][_0x15c0a8(0x1ba)](_0x15c0a8(0x145)+_0x5c4f86+_0x15c0a8(0x196));}}module[a1_0x3963ca(0x1c2)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};