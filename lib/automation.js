function a1_0x4cca(_0x29159d,_0x15e4b9){const _0x1aebb7=a1_0x212c();return a1_0x4cca=function(_0xa8dbf1,_0x54dd2f){_0xa8dbf1=_0xa8dbf1-0x13f;let _0x212c80=_0x1aebb7[_0xa8dbf1];return _0x212c80;},a1_0x4cca(_0x29159d,_0x15e4b9);}const a1_0x516591=a1_0x4cca;(function(_0x15ca51,_0x187087){const _0x221123=a1_0x4cca,_0x1c0461=_0x15ca51();while(!![]){try{const _0x23ab1b=-parseInt(_0x221123(0x19f))/0x1+parseInt(_0x221123(0x1a2))/0x2*(-parseInt(_0x221123(0x15e))/0x3)+-parseInt(_0x221123(0x1d3))/0x4*(-parseInt(_0x221123(0x18a))/0x5)+-parseInt(_0x221123(0x1d2))/0x6*(-parseInt(_0x221123(0x1eb))/0x7)+-parseInt(_0x221123(0x190))/0x8+parseInt(_0x221123(0x1b5))/0x9*(-parseInt(_0x221123(0x1f0))/0xa)+parseInt(_0x221123(0x177))/0xb*(parseInt(_0x221123(0x1db))/0xc);if(_0x23ab1b===_0x187087)break;else _0x1c0461['push'](_0x1c0461['shift']());}catch(_0x5dbb25){_0x1c0461['push'](_0x1c0461['shift']());}}}(a1_0x212c,0xb19dd));const a1_0x54dd2f=(function(){let _0x3c347a=!![];return function(_0x58e8ac,_0xeb5c1a){const _0x5893d4=_0x3c347a?function(){const _0x238034=a1_0x4cca;if(_0xeb5c1a){const _0x3327f7=_0xeb5c1a[_0x238034(0x1e0)](_0x58e8ac,arguments);return _0xeb5c1a=null,_0x3327f7;}}:function(){};return _0x3c347a=![],_0x5893d4;};}()),a1_0xa8dbf1=a1_0x54dd2f(this,function(){const _0x46629e=a1_0x4cca;return a1_0xa8dbf1[_0x46629e(0x202)]()[_0x46629e(0x184)](_0x46629e(0x1b1))[_0x46629e(0x202)]()[_0x46629e(0x1bf)](a1_0xa8dbf1)[_0x46629e(0x184)](_0x46629e(0x1b1));});a1_0xa8dbf1();'use strict';const aiAgent=require(a1_0x516591(0x141)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x1d38e0){const _0x31b5a9=a1_0x516591;if(!_0x1d38e0)return'';return _0x1d38e0[_0x31b5a9(0x140)]()[_0x31b5a9(0x1e8)](/\s+/g,'')[_0x31b5a9(0x18b)]();}function getWarmupRobust(_0x43251d,_0x10b83c){const _0x1b6e0f=a1_0x516591;if(!_0x43251d||!_0x10b83c)return 0x3c;if(_0x43251d[_0x10b83c]!==undefined)return _0x43251d[_0x10b83c];const _0x556a0d=_0x10b83c[_0x1b6e0f(0x140)]()['replace'](/√§/g,'ae')[_0x1b6e0f(0x1e8)](/√∂/g,'oe')[_0x1b6e0f(0x1e8)](/√º/g,'ue')['replace'](/√ü/g,'ss')[_0x1b6e0f(0x1e8)](/\s+/g,'_')[_0x1b6e0f(0x1e8)](/[^a-z0-9_]/g,'');if(_0x43251d[_0x556a0d]!==undefined)return _0x43251d[_0x556a0d];return 0x3c;}function a1_0x212c(){const _0x164bf9=['analysis.automation.confidenceThreshold','5680BAafdb','wert','üßπ\x20[MPC\x20CLEANUP]\x20','type','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.',')\x20aktiv.\x20Heize\x20auf\x20','Calendar\x20Check\x20Error:\x20','warn','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','.1.SET_POINT_TEMPERATURE','switch','position','TRAIN_RL_PENALTY','Classic','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','.4.SET_TEMPERATURE','manual','target','toString','entries','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','toLowerCase','./ai_agent','indexOf','cal_','messwert','summary','values','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','unit','getForeignObjectAsync','\x20min).','join','eventStart','.1.ACTUAL_TEMPERATURE','_calName','[MPC]\x20','Manuelles\x20Mapping','event','filter','üìÖ\x20[MPC\x20INFO]\x20','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','getForeignStateAsync','rescue_','parse','date','useCalendar','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','.1.LEVEL','error','setpoint','55146hRuPWO','_date','üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20','r√ºckkehr','until','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','analysis.automation.lastAction','too_cold','now','¬∞C\x20<\x20','value.valve','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','analysis.energy.warmupTargets','write','findIndex','string','setForeignStateAsync','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','Pr√§diktion:\x20','üî•\x20[MPC\x20ACTION]\x20Heize\x20','¬∞C.','score','¬∞C\x20(via\x20','¬∞C\x20(Kalender-Schutz)','¬∞C!\x20(Puffer:\x20','737KPArWD','system.mode','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','number','level.temperature','\x27\x20(Match:\x20',':\x20Aufheizen\x20auf\x20','thermostat','.1.TEMPERATURE','window','ist','pi_heating_demand','local_temperature','search','üö®\x20[MPC\x20WATCHDOG]\x20','default','analysis.automation.mode','valveMapping','Unbekannt','2036715TWORPe','trim','room','forEach','getTime','thermostatMapping','8326736ZYiOuB','Soll','add','\x20wurde\x20manuell\x20erh√∂ht.','calendarInstance','Unknown','stellwert','thermostat.setpoint','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','hm-rpc','analysis.energy.mpcActiveInterventions','find','slice','mpc_','name','869556qRaREb','calendarSelection','Ist','104tdrnEI','¬∞C).\x20Entferne\x20Status.','split','consultButler','setStateAsync','includes','reason','\x20auf\x20','remove','message','soll','SET_POINT_TEMPERATURE','currentSystemMode','analysis.energy.ventilationAlerts','getStateAsync','(((.+)+)+)+$','analysis.automation.actionLog','stringify','analysis.energy.warmupTimes','7101ERMPuT','current_heating_setpoint','common','¬∞C!\x20(Puffer\x20leer).','ACTUAL','analysis.energy.warmupSources',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','PERFECT','set','sendToPythonWrapper','constructor','off','\x20ist\x20auf\x20','occupied_heating_setpoint','valve','map','info','approved','log','dimmer','ankunft','devices','analysis.energy.rlPenalties','¬∞C).\x20Sparmodus\x20beendet!','ACTUAL_TEMPERATURE',':\x20Absenkung\x20auf\x20','toUpperCase','Enforcement\x20Monitor\x20Error:\x20','SET','174POSFFX','8hnGagv','location','¬∞C\x20->\x20','.data.table','temperature','[FORCE]\x20','localeCompare','sort','412392NTFDYR','triggerTime','val','temp','config','apply','length','_meta','analysis.energy.activeEnforcements','Nicht\x20gefunden','\x20erreicht\x20Limit\x20(','splice','normal','replace','push','role','223209tlbPzK','level','¬∞C\x20(Vorlauf:\x20','Fehlt'];a1_0x212c=function(){return _0x164bf9;};return a1_0x212c();}async function logAutomationAction(_0x1d4c8c,_0x166dcd){const _0x2d295f=a1_0x516591;await _0x1d4c8c[_0x2d295f(0x1a6)](_0x2d295f(0x164),{'val':_0x166dcd,'ack':!![]});try{const _0x15efc9=_0x2d295f(0x1b2),_0x1db2f7=await _0x1d4c8c[_0x2d295f(0x1b0)](_0x15efc9);let _0x588039=[];if(_0x1db2f7&&_0x1db2f7[_0x2d295f(0x1dd)])try{_0x588039=JSON[_0x2d295f(0x157)](_0x1db2f7['val']);}catch(_0x469248){}_0x588039['unshift']({'ts':Date[_0x2d295f(0x166)](),'msg':_0x166dcd});if(_0x588039[_0x2d295f(0x1e1)]>0x32)_0x588039=_0x588039[_0x2d295f(0x19c)](0x0,0x32);await _0x1d4c8c[_0x2d295f(0x1a6)](_0x15efc9,{'val':JSON['stringify'](_0x588039),'ack':!![]});}catch(_0x332d6e){}}async function handlePrediction(_0x1e7d77,_0x3add8c,_0x484da4){const _0x7aa218=a1_0x516591;if(!_0x3add8c||_0x3add8c===_0x7aa218(0x195))return;let _0x5439e9=_0x7aa218(0x1c0),_0x51b9d3=0.6;try{const _0x418e93=await _0x1e7d77[_0x7aa218(0x1b0)](_0x7aa218(0x187));if(_0x418e93&&_0x418e93[_0x7aa218(0x1dd)])_0x5439e9=_0x418e93[_0x7aa218(0x1dd)];const _0x513e7c=await _0x1e7d77[_0x7aa218(0x1b0)](_0x7aa218(0x1ef));if(_0x513e7c&&_0x513e7c[_0x7aa218(0x1dd)])_0x51b9d3=_0x513e7c['val'];}catch(_0x2d32bb){}if(_0x5439e9===_0x7aa218(0x1c0)||_0x484da4<_0x51b9d3)return;const _0x59b41e=Date[_0x7aa218(0x166)]();if(lastActions[_0x3add8c]&&_0x59b41e-lastActions[_0x3add8c]<COOLDOWN_MS)return;const _0x2834eb=_0x1e7d77[_0x7aa218(0x1df)]['devices']||[],_0x5a3e3a=normalize(_0x3add8c),_0x8723a9=_0x2834eb[_0x7aa218(0x19b)](_0x10c63e=>normalize(_0x10c63e['location'])===_0x5a3e3a&&(_0x10c63e['type']==='light'||_0x10c63e['type']===_0x7aa218(0x1c8)||_0x10c63e[_0x7aa218(0x1f3)]===_0x7aa218(0x1fa)));if(!_0x8723a9)return;const _0x23929c=await aiAgent[_0x7aa218(0x1a5)](_0x1e7d77,_0x3add8c,_0x8723a9[_0x7aa218(0x19e)],_0x484da4);if(!_0x23929c[_0x7aa218(0x1c6)])return;const _0x4f730b=_0x7aa218(0x170)+_0x3add8c+'\x20->\x20Schalte\x20'+_0x8723a9['name']+'\x20('+_0x23929c[_0x7aa218(0x1a8)]+')';await logAutomationAction(_0x1e7d77,'['+_0x5439e9[_0x7aa218(0x1cf)]()+']\x20'+_0x4f730b);if(_0x5439e9==='active'){const _0x1ab8f7=await _0x1e7d77['getForeignStateAsync'](_0x8723a9['id']);(!_0x1ab8f7||!_0x1ab8f7[_0x7aa218(0x1dd)]&&_0x1ab8f7['val']!==!![])&&await _0x1e7d77[_0x7aa218(0x16e)](_0x8723a9['id'],!![]),lastActions[_0x3add8c]=_0x59b41e;}}async function findRelatedId(_0x45b1cd,_0x1a9faa,_0x29bb3c=a1_0x516591(0x15d)){const _0x4c7820=a1_0x516591;if(_0x29bb3c===_0x4c7820(0x15d)&&_0x45b1cd['config']['thermostatMapping']){let _0x108576=_0x45b1cd[_0x4c7820(0x1df)]['thermostatMapping'];if(typeof _0x108576==='string')try{_0x108576=JSON[_0x4c7820(0x157)](_0x108576);}catch(_0x5b640a){}if(_0x108576&&_0x108576[_0x1a9faa])return _0x108576[_0x1a9faa];}if(_0x29bb3c===_0x4c7820(0x1c3)&&_0x45b1cd[_0x4c7820(0x1df)][_0x4c7820(0x188)]){let _0x3014ea=_0x45b1cd[_0x4c7820(0x1df)][_0x4c7820(0x188)];if(typeof _0x3014ea===_0x4c7820(0x16d))try{_0x3014ea=JSON[_0x4c7820(0x157)](_0x3014ea);}catch(_0x2b0347){}if(_0x3014ea&&_0x3014ea[_0x1a9faa])return _0x3014ea[_0x1a9faa];}let _0x32fcc7=[];if(_0x29bb3c===_0x4c7820(0x15d))_0x32fcc7=[{'s':_0x4c7820(0x14d),'t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x4c7820(0x17f),'t':_0x4c7820(0x1f9)},{'s':'.1.TEMPERATURE','t':_0x4c7820(0x1ff)},{'s':_0x4c7820(0x1cd),'t':_0x4c7820(0x1ad)},{'s':_0x4c7820(0x183),'t':_0x4c7820(0x1c2)},{'s':'local_temperature','t':_0x4c7820(0x1b6)},{'s':'temperature','t':'target_temperature'},{'s':_0x4c7820(0x1b9),'t':_0x4c7820(0x1d1)},{'s':_0x4c7820(0x1a1),'t':_0x4c7820(0x191)},{'s':_0x4c7820(0x1d7),'t':'setpoint'}];else _0x29bb3c===_0x4c7820(0x1c3)&&(_0x32fcc7=[{'s':_0x4c7820(0x14d),'t':_0x4c7820(0x15b)},{'s':_0x4c7820(0x17f),'t':_0x4c7820(0x15b)},{'s':_0x4c7820(0x17f),'t':'.4.VALVE_STATE'},{'s':_0x4c7820(0x183),'t':_0x4c7820(0x182)},{'s':'temperature','t':'valve_position'},{'s':'temperature','t':_0x4c7820(0x1ec)}]);for(const _0x5d93a1 of _0x32fcc7){if(_0x1a9faa[_0x4c7820(0x1a7)](_0x5d93a1['s'])){const _0x14fca6=_0x1a9faa['replace'](_0x5d93a1['s'],_0x5d93a1['t']),_0x480241=await _0x45b1cd[_0x4c7820(0x149)](_0x14fca6);if(_0x480241)return _0x14fca6;}}try{const _0x4d6faf=_0x1a9faa[_0x4c7820(0x1a4)]('.');if(_0x4d6faf[_0x4c7820(0x1e1)]>0x2){const _0x249626=_0x4d6faf[_0x4c7820(0x19c)](0x0,-0x1)[_0x4c7820(0x14b)]('.'),_0x358eb8=await _0x45b1cd['getForeignObjectsAsync'](_0x249626+'.*'),_0xc7b008=[],_0x2ad7a6=_0x1a9faa[_0x4c7820(0x1a4)](/[._]+/)['filter'](_0x2cdec6=>!['openknx','0',_0x4c7820(0x199),_0x4c7820(0x181),_0x4c7820(0x1f1),'temperature','actual','sensor',_0x4c7820(0x144),'state']['includes'](_0x2cdec6['toLowerCase']()));for(const [_0xa6c63b,_0x9dd9fb]of Object[_0x4c7820(0x203)](_0x358eb8)){if(_0xa6c63b===_0x1a9faa)continue;if(_0x9dd9fb&&_0x9dd9fb[_0x4c7820(0x1b7)]){const _0x4d5c4c=_0xa6c63b[_0x4c7820(0x140)](),_0x14384a=(_0x9dd9fb[_0x4c7820(0x1b7)][_0x4c7820(0x1ea)]||'')[_0x4c7820(0x140)](),_0xa9569e=(_0x9dd9fb['common'][_0x4c7820(0x148)]||'')['toLowerCase']();let _0x29a69c=![];if(_0x29bb3c===_0x4c7820(0x15d)&&_0x9dd9fb[_0x4c7820(0x1b7)][_0x4c7820(0x16b)]===!![])_0x29a69c=_0x4d5c4c[_0x4c7820(0x1a7)](_0x4c7820(0x1bd))||_0x4d5c4c[_0x4c7820(0x1a7)](_0x4c7820(0x1ac))||_0x4d5c4c[_0x4c7820(0x1a7)](_0x4c7820(0x201))||_0x14384a['includes'](_0x4c7820(0x17b))||_0x14384a['includes'](_0x4c7820(0x197));else _0x29bb3c===_0x4c7820(0x1c3)&&(_0x29a69c=_0x4d5c4c[_0x4c7820(0x1a7)](_0x4c7820(0x1ec))||_0x4d5c4c[_0x4c7820(0x1a7)](_0x4c7820(0x1c3))||_0x4d5c4c[_0x4c7820(0x1a7)](_0x4c7820(0x196))||_0x4d5c4c[_0x4c7820(0x1a7)](_0x4c7820(0x1fb))||_0x14384a[_0x4c7820(0x1a7)]('level.valve')||_0x14384a[_0x4c7820(0x1a7)](_0x4c7820(0x168))||_0xa9569e[_0x4c7820(0x1a7)]('%'));if(_0x29a69c){const _0x10018f=_0xa6c63b[_0x4c7820(0x1a4)](/[._]+/)[_0x4c7820(0x1c4)](_0x4c8b75=>_0x4c8b75['toLowerCase']());let _0xa5f8b9=0x0;_0x2ad7a6['forEach'](_0x281801=>{const _0x1cc2b7=_0x4c7820;if(_0x10018f[_0x1cc2b7(0x1a7)](_0x281801[_0x1cc2b7(0x140)]()))_0xa5f8b9++;}),_0xc7b008[_0x4c7820(0x1e9)]({'id':_0xa6c63b,'score':_0xa5f8b9});}}}if(_0xc7b008[_0x4c7820(0x1e1)]>0x0){_0xc7b008[_0x4c7820(0x1da)]((_0x53ff10,_0x574241)=>_0x574241[_0x4c7820(0x173)]-_0x53ff10['score']);if(_0xc7b008[0x0][_0x4c7820(0x173)]>0x0)return _0xc7b008[0x0]['id'];}}}catch(_0x403fde){}return null;}async function scanThermostats(_0x5e3a70){const _0x496705=a1_0x516591,_0x3cf5e0=_0x5e3a70[_0x496705(0x1df)][_0x496705(0x1ca)]||[],_0x36ab37=[],_0x55a551=_0x3cf5e0[_0x496705(0x152)](_0x4e5a02=>_0x4e5a02['id']&&_0x4e5a02['id']['includes'](_0x496705(0x1d7))||_0x4e5a02[_0x496705(0x1f3)]&&[_0x496705(0x1d7),'thermostat','sensor'][_0x496705(0x1a7)](_0x4e5a02[_0x496705(0x1f3)])||_0x4e5a02['name']&&_0x4e5a02['name'][_0x496705(0x140)]()[_0x496705(0x1a7)](_0x496705(0x1de)));for(const _0x4ebaa5 of _0x55a551){const _0x3f8ba8=await findRelatedId(_0x5e3a70,_0x4ebaa5['id'],'setpoint'),_0x1fc34d=await findRelatedId(_0x5e3a70,_0x4ebaa5['id'],_0x496705(0x1c3));let _0x1b7f1a=_0x496705(0x1e4),_0x446fab=![],_0x42b690=_0x5e3a70[_0x496705(0x1df)][_0x496705(0x18f)]||{};if(typeof _0x42b690===_0x496705(0x16d))try{_0x42b690=JSON[_0x496705(0x157)](_0x42b690);}catch(_0x57a1a7){}let _0x9c611b=_0x5e3a70[_0x496705(0x1df)][_0x496705(0x188)]||{};if(typeof _0x9c611b==='string')try{_0x9c611b=JSON['parse'](_0x9c611b);}catch(_0x479dcb){}if(_0x42b690[_0x4ebaa5['id']]&&_0x42b690[_0x4ebaa5['id']]===_0x3f8ba8||_0x9c611b[_0x4ebaa5['id']]&&_0x9c611b[_0x4ebaa5['id']]===_0x1fc34d)_0x1b7f1a=_0x496705(0x150),_0x446fab=!![];else(_0x3f8ba8||_0x1fc34d)&&(_0x1b7f1a='Auto-Erkennung');_0x36ab37['push']({'room':_0x4ebaa5[_0x496705(0x1d4)]||_0x496705(0x189),'sensorId':_0x4ebaa5['id'],'setpointId':_0x3f8ba8||'-','valveId':_0x1fc34d||'-','source':_0x1b7f1a,'isManual':_0x446fab,'status':_0x3f8ba8&&_0x1fc34d?_0x496705(0x1bc):_0x3f8ba8?'OK':_0x496705(0x1ee)});}return _0x36ab37[_0x496705(0x1da)]((_0x3cc365,_0x1a77ac)=>_0x3cc365[_0x496705(0x18c)][_0x496705(0x1d9)](_0x1a77ac['room']));}async function updateSchedulePreview(_0x189ebe){const _0x15e0ef=a1_0x516591;if(!_0x189ebe['config'][_0x15e0ef(0x159)]||!_0x189ebe[_0x15e0ef(0x1df)][_0x15e0ef(0x194)])return;let _0x211194={};try{const _0x29e6a4=await _0x189ebe['getStateAsync'](_0x15e0ef(0x1b4));if(_0x29e6a4&&_0x29e6a4[_0x15e0ef(0x1dd)])_0x211194=JSON[_0x15e0ef(0x157)](_0x29e6a4['val']);}catch(_0x5c1d1a){}const _0x5be200=[],_0x4684e6=Date['now'](),_0x14b4a2=0x30*0x3c*0x3c*0x3e8;try{const _0x87652f=await _0x189ebe['getForeignStateAsync'](_0x189ebe[_0x15e0ef(0x1df)][_0x15e0ef(0x194)]+_0x15e0ef(0x1d6));if(!_0x87652f||!_0x87652f[_0x15e0ef(0x1dd)])return;const _0x48bb6b=JSON['parse'](_0x87652f['val']),_0xa33315=_0x189ebe['config'][_0x15e0ef(0x1a0)]||[],_0x174dac=_0x189ebe['config']['devices']||[],_0x5d5b70=new Set();_0x174dac[_0x15e0ef(0x18d)](_0x1024f6=>{const _0x59ae74=_0x15e0ef;if(_0x1024f6[_0x59ae74(0x1d4)])_0x5d5b70[_0x59ae74(0x192)](_0x1024f6[_0x59ae74(0x1d4)]);});for(const _0x246701 of _0x48bb6b){if(_0x246701[_0x15e0ef(0x14e)]&&_0xa33315[_0x15e0ef(0x1e1)]>0x0&&!_0xa33315[_0x15e0ef(0x1a7)](_0x246701['_calName']))continue;const _0x5526a7=_0x246701['_date']||_0x246701[_0x15e0ef(0x14c)]||_0x246701[_0x15e0ef(0x158)];if(!_0x5526a7)continue;const _0x462bbc=new Date(_0x5526a7),_0x31e96e=_0x462bbc['getTime']();if(isNaN(_0x31e96e))continue;if(_0x31e96e<_0x4684e6)continue;if(_0x31e96e>_0x4684e6+_0x14b4a2)continue;const _0x5df869=(_0x246701['event']||_0x246701[_0x15e0ef(0x145)]||'')['toLowerCase']();let _0x550008=![],_0x2665ce=[],_0x1ec6a5=_0x246701[_0x15e0ef(0x151)]||_0x246701[_0x15e0ef(0x145)]||'Unbekannt';if(_0x5df869[_0x15e0ef(0x1a7)]('urlaub\x20ende')||_0x5df869[_0x15e0ef(0x1a7)](_0x15e0ef(0x161))||_0x5df869[_0x15e0ef(0x1a7)](_0x15e0ef(0x1c9)))_0x550008=!![],_0x2665ce=Array['from'](_0x5d5b70);else for(const _0x9e553f of _0x5d5b70){if(_0x5df869[_0x15e0ef(0x1a7)](_0x9e553f['toLowerCase']()))_0x2665ce[_0x15e0ef(0x1e9)](_0x9e553f);}_0x2665ce[_0x15e0ef(0x1e1)]>0x0&&_0x2665ce[_0x15e0ef(0x18d)](_0x44faee=>{const _0x54362c=_0x15e0ef;let _0x3189c8=0x3c;if(_0x550008){let _0xd0bade=0x0;Object[_0x54362c(0x146)](_0x211194)[_0x54362c(0x18d)](_0xde3fb8=>{if(_0xde3fb8>_0xd0bade)_0xd0bade=_0xde3fb8;}),_0x3189c8=_0xd0bade>0x0?_0xd0bade:0x78;}else _0x3189c8=getWarmupRobust(_0x211194,_0x44faee);const _0x2845a9=new Date(_0x31e96e-_0x3189c8*0xea60);_0x5be200[_0x54362c(0x1e9)]({'eventTime':_0x31e96e,'triggerTime':_0x2845a9['getTime'](),'room':_0x44faee,'minutes':_0x3189c8,'reason':_0x1ec6a5,'isGlobal':_0x550008});});}}catch(_0x272ebb){}_0x5be200[_0x15e0ef(0x1da)]((_0x23ed5a,_0x29b72c)=>_0x23ed5a[_0x15e0ef(0x1dc)]-_0x29b72c[_0x15e0ef(0x1dc)]);const _0x16c642=_0x5be200[_0x15e0ef(0x19c)](0x0,0x5);await _0x189ebe['setStateAsync']('analysis.energy.schedulePreview',{'val':JSON[_0x15e0ef(0x1b3)](_0x16c642),'ack':!![]});}async function monitorEnforcements(_0x389e87){const _0x3d8a26=a1_0x516591;try{const _0x161078=_0x3d8a26(0x1e3),_0x53ae8c=await _0x389e87[_0x3d8a26(0x1b0)](_0x161078);if(!_0x53ae8c||!_0x53ae8c[_0x3d8a26(0x1dd)])return;let _0x2b7918=[];try{_0x2b7918=JSON['parse'](_0x53ae8c[_0x3d8a26(0x1dd)]);}catch(_0x466e89){return;}if(!Array['isArray'](_0x2b7918)||_0x2b7918[_0x3d8a26(0x1e1)]===0x0)return;const _0x4442d7=Date['now'](),_0x3ea292=_0x389e87[_0x3d8a26(0x1df)][_0x3d8a26(0x1ca)]||[];let _0x43fe19=![];for(let _0x7fa6a6=_0x2b7918['length']-0x1;_0x7fa6a6>=0x0;_0x7fa6a6--){const _0x409555=_0x2b7918[_0x7fa6a6];if(_0x4442d7>=_0x409555[_0x3d8a26(0x162)]){_0x389e87[_0x3d8a26(0x1c7)][_0x3d8a26(0x1c5)](_0x3d8a26(0x147)+_0x409555['room']+_0x3d8a26(0x163)),_0x2b7918['splice'](_0x7fa6a6,0x1),_0x43fe19=!![];continue;}const _0x409bbf=_0x3ea292[_0x3d8a26(0x19b)](_0x2d0e69=>normalize(_0x2d0e69[_0x3d8a26(0x1d4)])===normalize(_0x409555[_0x3d8a26(0x18c)])&&(_0x2d0e69[_0x3d8a26(0x1f3)]==='temperature'||_0x2d0e69[_0x3d8a26(0x1f3)]===_0x3d8a26(0x17e)));if(_0x409bbf){const _0x4a2bb0=await findRelatedId(_0x389e87,_0x409bbf['id'],_0x3d8a26(0x15d));if(_0x4a2bb0){const _0x2e2eef=await _0x389e87[_0x3d8a26(0x155)](_0x4a2bb0);_0x2e2eef&&typeof _0x2e2eef[_0x3d8a26(0x1dd)]===_0x3d8a26(0x17a)&&(_0x2e2eef[_0x3d8a26(0x1dd)]<0xf&&(_0x389e87[_0x3d8a26(0x1c7)]['warn'](_0x3d8a26(0x15a)+_0x409555[_0x3d8a26(0x18c)]+_0x3d8a26(0x1a9)+_0x2e2eef[_0x3d8a26(0x1dd)]+_0x3d8a26(0x16f)+_0x409555[_0x3d8a26(0x201)]+_0x3d8a26(0x172)),await _0x389e87[_0x3d8a26(0x16e)](_0x4a2bb0,_0x409555[_0x3d8a26(0x201)]),await logAutomationAction(_0x389e87,_0x3d8a26(0x1d8)+_0x409555['room']+':\x20'+_0x2e2eef[_0x3d8a26(0x1dd)]+_0x3d8a26(0x1d5)+_0x409555[_0x3d8a26(0x201)]+_0x3d8a26(0x175))));}}}_0x43fe19&&await _0x389e87[_0x3d8a26(0x1a6)](_0x161078,{'val':JSON[_0x3d8a26(0x1b3)](_0x2b7918),'ack':!![]});}catch(_0x4d29e1){_0x389e87[_0x3d8a26(0x1c7)][_0x3d8a26(0x15c)](_0x3d8a26(0x1d0)+_0x4d29e1[_0x3d8a26(0x1ab)]);}}async function checkCalendarTriggers(_0x75b142){const _0x1da4e4=a1_0x516591;if(!_0x75b142['config']['useCalendar']||!_0x75b142[_0x1da4e4(0x1df)]['calendarInstance'])return;await updateSchedulePreview(_0x75b142);let _0x3db4a0={},_0x44681f={};try{const _0x22810d=await _0x75b142[_0x1da4e4(0x1b0)](_0x1da4e4(0x1b4));if(_0x22810d&&_0x22810d[_0x1da4e4(0x1dd)])_0x3db4a0=JSON[_0x1da4e4(0x157)](_0x22810d['val']);const _0x24510b=await _0x75b142[_0x1da4e4(0x1b0)](_0x1da4e4(0x1ba));if(_0x24510b&&_0x24510b[_0x1da4e4(0x1dd)])_0x44681f=JSON[_0x1da4e4(0x157)](_0x24510b['val']);}catch(_0x2e0725){}let _0x3a45bb={'default':0x15};try{const _0x47336a=await _0x75b142[_0x1da4e4(0x1b0)](_0x1da4e4(0x16a));if(_0x47336a&&_0x47336a[_0x1da4e4(0x1dd)])_0x3a45bb=JSON['parse'](_0x47336a[_0x1da4e4(0x1dd)]);}catch(_0x411887){}let _0x2774ee=[];try{const _0x513568=await _0x75b142['getStateAsync'](_0x1da4e4(0x1e3));if(_0x513568&&_0x513568[_0x1da4e4(0x1dd)])_0x2774ee=JSON['parse'](_0x513568[_0x1da4e4(0x1dd)]);}catch(_0x26f3fd){}try{const _0x549102=await _0x75b142['getForeignStateAsync'](_0x75b142[_0x1da4e4(0x1df)][_0x1da4e4(0x194)]+_0x1da4e4(0x1d6));if(!_0x549102||!_0x549102['val'])return;const _0x3d6894=JSON[_0x1da4e4(0x157)](_0x549102[_0x1da4e4(0x1dd)]),_0x16204d=Date['now'](),_0x2bcf40=_0x75b142[_0x1da4e4(0x1df)][_0x1da4e4(0x1ca)]||[],_0x134d49=_0x75b142[_0x1da4e4(0x1df)]['calendarSelection']||[];let _0x1329c9=![];for(const _0x3e0e50 of _0x3d6894){if(_0x3e0e50[_0x1da4e4(0x14e)]&&_0x134d49[_0x1da4e4(0x1e1)]>0x0&&!_0x134d49[_0x1da4e4(0x1a7)](_0x3e0e50[_0x1da4e4(0x14e)]))continue;const _0x24fb77=_0x3e0e50[_0x1da4e4(0x15f)]||_0x3e0e50[_0x1da4e4(0x14c)]||_0x3e0e50[_0x1da4e4(0x158)];if(!_0x24fb77)continue;const _0xf97e4f=new Date(_0x24fb77);if(isNaN(_0xf97e4f[_0x1da4e4(0x18e)]()))continue;const _0xe5b6f5=(_0x3e0e50[_0x1da4e4(0x151)]||_0x3e0e50[_0x1da4e4(0x145)]||'')[_0x1da4e4(0x140)]();if(_0xe5b6f5[_0x1da4e4(0x1a7)]('urlaub\x20ende')||_0xe5b6f5[_0x1da4e4(0x1a7)](_0x1da4e4(0x161))||_0xe5b6f5[_0x1da4e4(0x1a7)](_0x1da4e4(0x1c9))){let _0x43202b=0x0;Object['values'](_0x3db4a0)[_0x1da4e4(0x18d)](_0x24589d=>{if(_0x24589d>_0x43202b)_0x43202b=_0x24589d;});if(_0x43202b===0x0)_0x43202b=0x78;const _0x28a37d=_0xf97e4f[_0x1da4e4(0x18e)]()-_0x43202b*0xea60;_0x16204d>=_0x28a37d&&_0x16204d<_0xf97e4f[_0x1da4e4(0x18e)]()&&(_0x75b142[_0x1da4e4(0x1ae)]!=='normal'&&(_0x75b142['log'][_0x1da4e4(0x1c5)](_0x1da4e4(0x13f)+_0x43202b+'\x20min).'),await _0x75b142[_0x1da4e4(0x1a6)](_0x1da4e4(0x178),{'val':_0x1da4e4(0x1e7),'ack':![]})));}for(const _0x4ff4a6 of _0x2bcf40){if(_0x4ff4a6[_0x1da4e4(0x1d4)]){const _0x413468=_0x4ff4a6[_0x1da4e4(0x1d4)][_0x1da4e4(0x140)](),_0x82eb06=(_0x4ff4a6[_0x1da4e4(0x19e)]||'')[_0x1da4e4(0x140)]();let _0x257a3b=_0xe5b6f5[_0x1da4e4(0x1a7)](_0x413468);!_0x257a3b&&_0x82eb06['length']>0x3&&_0xe5b6f5['includes'](_0x82eb06)&&(_0x257a3b=!![]);if(_0x257a3b){const _0x323d2b=getWarmupRobust(_0x3db4a0,_0x4ff4a6[_0x1da4e4(0x1d4)]),_0x360a87=_0x44681f[_0x4ff4a6[_0x1da4e4(0x1d4)]]||_0x1da4e4(0x1fd),_0x2230ea=_0xf97e4f[_0x1da4e4(0x18e)]()-_0x323d2b*0xea60;if(_0x16204d>=_0x2230ea&&_0x16204d<_0xf97e4f['getTime']()){const _0x499044=lastActions[_0x1da4e4(0x143)+_0x4ff4a6[_0x1da4e4(0x1d4)]];if(_0x499044&&_0x16204d-_0x499044<CAL_COOLDOWN_MS)continue;const _0x26388b=await findRelatedId(_0x75b142,_0x4ff4a6['id'],'setpoint');if(_0x26388b){let _0xa2ed05=_0x3a45bb[_0x4ff4a6[_0x1da4e4(0x1d4)]];if(_0xa2ed05===undefined)_0xa2ed05=_0x3a45bb[_0x1da4e4(0x186)];if(_0xa2ed05===undefined)_0xa2ed05=0x15;const _0x4e960b=await _0x75b142['getForeignStateAsync'](_0x26388b);if(_0x4e960b&&typeof _0x4e960b[_0x1da4e4(0x1dd)]===_0x1da4e4(0x17a)&&_0x4e960b['val']<_0xa2ed05-0.5){_0x75b142[_0x1da4e4(0x1c7)][_0x1da4e4(0x1c5)]('üìÖ\x20SMART\x20SCHEDULE\x20['+_0x360a87+']:\x20Raum-Trigger\x20\x27'+_0x4ff4a6[_0x1da4e4(0x1d4)]+_0x1da4e4(0x17c)+_0xe5b6f5+_0x1da4e4(0x1f5)+_0xa2ed05+_0x1da4e4(0x1ed)+_0x323d2b+_0x1da4e4(0x14a)),await _0x75b142[_0x1da4e4(0x16e)](_0x26388b,_0xa2ed05),await logAutomationAction(_0x75b142,'[CAL]\x20'+_0x4ff4a6[_0x1da4e4(0x1d4)]+'\x20->\x20'+_0xa2ed05+_0x1da4e4(0x174)+_0x360a87+')'),lastActions['cal_'+_0x4ff4a6['location']]=_0x16204d;const _0x1b99fb=_0x2774ee[_0x1da4e4(0x16c)](_0x57e052=>_0x57e052['room']===_0x4ff4a6[_0x1da4e4(0x1d4)]);if(_0x1b99fb!==-0x1)_0x2774ee[_0x1da4e4(0x1e6)](_0x1b99fb,0x1);_0x2774ee['push']({'room':_0x4ff4a6[_0x1da4e4(0x1d4)],'target':_0xa2ed05,'until':_0xf97e4f[_0x1da4e4(0x18e)]()}),_0x1329c9=!![];}}}}}}}_0x1329c9&&await _0x75b142[_0x1da4e4(0x1a6)](_0x1da4e4(0x1e3),{'val':JSON[_0x1da4e4(0x1b3)](_0x2774ee),'ack':!![]});}catch(_0x4a9681){_0x75b142['log'][_0x1da4e4(0x1f7)](_0x1da4e4(0x1f6)+_0x4a9681[_0x1da4e4(0x1ab)]);}}async function manageMpcIntervention(_0x82cf43,_0x41521f,_0x264573){const _0x5f5433=a1_0x516591;try{const _0x1cec5a=_0x5f5433(0x19a),_0x5ca412=await _0x82cf43[_0x5f5433(0x1b0)](_0x1cec5a);let _0x4bf0b3=[];if(_0x5ca412&&_0x5ca412['val'])try{_0x4bf0b3=JSON[_0x5f5433(0x157)](_0x5ca412[_0x5f5433(0x1dd)]);}catch(_0x406694){}const _0x12ae3a=_0x4bf0b3[_0x5f5433(0x142)](_0x41521f);if(_0x264573===_0x5f5433(0x192))_0x12ae3a===-0x1&&(_0x4bf0b3[_0x5f5433(0x1e9)](_0x41521f),await _0x82cf43[_0x5f5433(0x1a6)](_0x1cec5a,{'val':JSON['stringify'](_0x4bf0b3),'ack':!![]}));else _0x264573===_0x5f5433(0x1aa)&&(_0x12ae3a!==-0x1&&(_0x4bf0b3[_0x5f5433(0x1e6)](_0x12ae3a,0x1),await _0x82cf43[_0x5f5433(0x1a6)](_0x1cec5a,{'val':JSON[_0x5f5433(0x1b3)](_0x4bf0b3),'ack':!![]})));}catch(_0x11b097){}}async function cleanupGhostInterventions(_0x5c7200){const _0x454127=a1_0x516591;try{const _0x525a28=_0x454127(0x19a),_0x3c886e=await _0x5c7200[_0x454127(0x1b0)](_0x525a28);if(!_0x3c886e||!_0x3c886e[_0x454127(0x1dd)])return;const _0x400d79=JSON[_0x454127(0x157)](_0x3c886e['val']);if(!Array['isArray'](_0x400d79)||_0x400d79[_0x454127(0x1e1)]===0x0)return;let _0x500db6={'default':0x15};try{const _0xab64a4=await _0x5c7200[_0x454127(0x1b0)](_0x454127(0x16a));if(_0xab64a4&&_0xab64a4[_0x454127(0x1dd)])_0x500db6=JSON[_0x454127(0x157)](_0xab64a4[_0x454127(0x1dd)]);}catch(_0x3b5e2f){}let _0x3bc58a=[];try{const _0x2a615f=await _0x5c7200['getStateAsync'](_0x454127(0x1af));if(_0x2a615f&&_0x2a615f[_0x454127(0x1dd)])_0x3bc58a=JSON[_0x454127(0x157)](_0x2a615f[_0x454127(0x1dd)]);}catch(_0x42bb2b){}let _0x46c826={},_0x923e09=![];try{const _0x453037=await _0x5c7200[_0x454127(0x1b0)](_0x454127(0x1cb));if(_0x453037&&_0x453037[_0x454127(0x1dd)])_0x46c826=JSON[_0x454127(0x157)](_0x453037['val']);}catch(_0x5a1821){}if(_0x46c826[_0x454127(0x1e2)]){const _0x1e13d3=Date[_0x454127(0x166)]();for(const [_0x1f243c,_0x5b719f]of Object[_0x454127(0x203)](_0x46c826['_meta'])){_0x1e13d3-_0x5b719f>PENALTY_TTL&&(delete _0x46c826[_0x1f243c],delete _0x46c826[_0x454127(0x1e2)][_0x1f243c],_0x923e09=!![],_0x5c7200['log'][_0x454127(0x1c5)](_0x454127(0x154)+_0x1f243c+_0x454127(0x198)));}}const _0x27a765=_0x5c7200['config'][_0x454127(0x1ca)]||[];let _0x5bade5=![];for(let _0xbdd5b0=_0x400d79[_0x454127(0x1e1)]-0x1;_0xbdd5b0>=0x0;_0xbdd5b0--){const _0x5748c7=_0x400d79[_0xbdd5b0],_0x6f78f1=_0x27a765[_0x454127(0x19b)](_0x3a51ca=>normalize(_0x3a51ca[_0x454127(0x1d4)])===normalize(_0x5748c7)&&(_0x3a51ca[_0x454127(0x1f3)]==='temperature'||_0x3a51ca[_0x454127(0x1f3)]===_0x454127(0x17e)));if(!_0x6f78f1){_0x5c7200[_0x454127(0x1c7)][_0x454127(0x1f7)]('üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27'+_0x5748c7+_0x454127(0x179)),_0x400d79[_0x454127(0x1e6)](_0xbdd5b0,0x1),_0x5bade5=!![];continue;}if(_0x6f78f1){const _0x126baf=await findRelatedId(_0x5c7200,_0x6f78f1['id'],_0x454127(0x15d)),_0x51f7bc=await _0x5c7200[_0x454127(0x155)](_0x6f78f1['id']);if(_0x126baf){const _0x37e1f8=await _0x5c7200[_0x454127(0x155)](_0x126baf);if(_0x37e1f8&&typeof _0x37e1f8[_0x454127(0x1dd)]===_0x454127(0x17a)){let _0x48c651=![],_0x560249='';Math['abs'](_0x37e1f8[_0x454127(0x1dd)]-ECO_TEMP)>0.5&&(_0x48c651=!![],_0x560249='manual');if(!_0x48c651&&_0x51f7bc&&typeof _0x51f7bc[_0x454127(0x1dd)]===_0x454127(0x17a)){const _0xc01885=_0x500db6[_0x5748c7]||_0x500db6[_0x454127(0x186)]||0x15;_0x51f7bc[_0x454127(0x1dd)]<_0xc01885+0.2&&(_0x48c651=!![],_0x560249=_0x454127(0x165));}if(_0x48c651){if(_0x560249===_0x454127(0x200)){_0x5c7200[_0x454127(0x1c7)][_0x454127(0x1c5)](_0x454127(0x1f2)+_0x5748c7+_0x454127(0x1c1)+_0x37e1f8[_0x454127(0x1dd)]+'¬∞C\x20(nicht\x20'+ECO_TEMP+_0x454127(0x1a3));const _0xc20ccf=lastActions[_0x454127(0x143)+_0x5748c7],_0x1ef7a7=_0xc20ccf&&Date['now']()-_0xc20ccf<0x2*0x3c*0x3e8;if(!_0x1ef7a7&&_0x37e1f8[_0x454127(0x1dd)]>ECO_TEMP+0.5){_0x5c7200[_0x454127(0x1be)]&&(_0x5c7200[_0x454127(0x1c7)][_0x454127(0x1c5)](_0x454127(0x1f8)+_0x5748c7+_0x454127(0x193)),_0x5c7200[_0x454127(0x1be)](_0x454127(0x1fc),{'room':_0x5748c7}));const _0x54908f=_0x5748c7+'_'+new Date()['getHours']();if(!_0x46c826[_0x54908f]){_0x46c826[_0x54908f]=0x1;if(!_0x46c826['_meta'])_0x46c826[_0x454127(0x1e2)]={};_0x46c826[_0x454127(0x1e2)][_0x54908f]=Date[_0x454127(0x166)](),_0x923e09=!![];}}else _0x1ef7a7&&_0x5c7200['log']['info'](_0x454127(0x153)+_0x5748c7+_0x454127(0x1fe));}else{if(_0x560249===_0x454127(0x165)){let _0x1f9822=![];if(_0x3bc58a[_0x454127(0x19b)](_0x51c9f5=>_0x51c9f5['room']===_0x5748c7))_0x1f9822=!![];const _0x2449c7=_0x27a765[_0x454127(0x152)](_0x12d8d6=>normalize(_0x12d8d6['location'])===normalize(_0x5748c7)&&(_0x12d8d6['type']===_0x454127(0x180)||_0x12d8d6[_0x454127(0x1f3)]==='sensor'||_0x12d8d6[_0x454127(0x1f3)]==='contact'));for(const _0x55e06b of _0x2449c7){try{const _0x503571=await _0x5c7200['getForeignStateAsync'](_0x55e06b['id']);if(_0x503571&&(_0x503571[_0x454127(0x1dd)]===!![]||_0x503571[_0x454127(0x1dd)]===0x1||String(_0x503571[_0x454127(0x1dd)])[_0x454127(0x140)]()==='open'))_0x1f9822=!![];}catch(_0x41c528){}}if(_0x1f9822)_0x5c7200[_0x454127(0x1c7)][_0x454127(0x1c5)](_0x454127(0x160)+_0x5748c7+_0x454127(0x1f4));else{const _0x40e9cd=_0x500db6[_0x5748c7]||_0x500db6[_0x454127(0x186)]||0x15;_0x5c7200[_0x454127(0x1c7)][_0x454127(0x1c5)](_0x454127(0x185)+_0x5748c7+_0x454127(0x1e5)+_0x51f7bc[_0x454127(0x1dd)]+_0x454127(0x167)+(_0x40e9cd+0.2)+_0x454127(0x1cc)),await _0x5c7200['setForeignStateAsync'](_0x126baf,_0x40e9cd),await logAutomationAction(_0x5c7200,'[WATCHDOG]\x20'+_0x5748c7+_0x454127(0x1bb)+_0x40e9cd+'¬∞C'),lastActions['rescue_'+_0x5748c7]=Date['now']();}}}_0x400d79['splice'](_0xbdd5b0,0x1),_0x5bade5=!![];}}}}}_0x5bade5&&await _0x5c7200['setStateAsync'](_0x525a28,{'val':JSON[_0x454127(0x1b3)](_0x400d79),'ack':!![]}),_0x923e09&&await _0x5c7200[_0x454127(0x1a6)](_0x454127(0x1cb),{'val':JSON[_0x454127(0x1b3)](_0x46c826),'ack':!![]});}catch(_0x4a1457){}}async function applyEnergySavings(_0x1483c7,_0x4a2a96){const _0xa84152=a1_0x516591;await cleanupGhostInterventions(_0x1483c7);if(!_0x4a2a96||_0x4a2a96[_0xa84152(0x1e1)]===0x0)return;const _0x118d05=_0x1483c7[_0xa84152(0x1df)][_0xa84152(0x1ca)]||[],_0x582f44=Date['now']();for(const _0x2dc72b of _0x4a2a96){const _0x650c09=_0x2dc72b[_0xa84152(0x18c)],_0x3567a7=_0x2dc72b['minutes_safe'],_0x410617=_0x2dc72b[_0xa84152(0x201)]||0x15;if(lastActions[_0xa84152(0x156)+_0x650c09]&&_0x582f44-lastActions['rescue_'+_0x650c09]<RESCUE_LOCK_MS)continue;const _0x3ed80f=_0x118d05['find'](_0x798d42=>normalize(_0x798d42[_0xa84152(0x1d4)])===normalize(_0x650c09)&&(_0x798d42['type']===_0xa84152(0x1d7)||_0x798d42[_0xa84152(0x1f3)]===_0xa84152(0x17e)));if(!_0x3ed80f)continue;const _0x226538=await findRelatedId(_0x1483c7,_0x3ed80f['id'],_0xa84152(0x15d));if(_0x226538){if(lastActions['mpc_'+_0x650c09]&&_0x582f44-lastActions['mpc_'+_0x650c09]<0x1e*0x3c*0x3e8)continue;const _0x404096=await _0x1483c7[_0xa84152(0x155)](_0x226538);if(_0x404096&&typeof _0x404096['val']==='number'){const _0x100973=_0x404096[_0xa84152(0x1dd)];_0x100973!==ECO_TEMP&&await manageMpcIntervention(_0x1483c7,_0x650c09,_0xa84152(0x1aa));if(_0x3567a7>0x1e)_0x100973>ECO_TEMP+0.5&&(_0x1483c7[_0xa84152(0x1c7)][_0xa84152(0x1c5)]('üçÉ\x20[MPC\x20ACTION]\x20Senke\x20'+_0x650c09+_0xa84152(0x1a9)+ECO_TEMP+_0xa84152(0x176)+_0x3567a7+'\x20min)'),await _0x1483c7[_0xa84152(0x16e)](_0x226538,ECO_TEMP),await manageMpcIntervention(_0x1483c7,_0x650c09,_0xa84152(0x192)),lastActions['mpc_'+_0x650c09]=_0x582f44,await logAutomationAction(_0x1483c7,_0xa84152(0x14f)+_0x650c09+_0xa84152(0x1ce)+ECO_TEMP+'¬∞C'));else _0x3567a7<=0xf&&(_0x100973<_0x410617&&(_0x1483c7['log'][_0xa84152(0x1c5)](_0xa84152(0x171)+_0x650c09+'\x20wieder\x20auf\x20'+_0x410617+_0xa84152(0x1b8)),await _0x1483c7['setForeignStateAsync'](_0x226538,_0x410617),await manageMpcIntervention(_0x1483c7,_0x650c09,'remove'),lastActions[_0xa84152(0x19d)+_0x650c09]=_0x582f44,await logAutomationAction(_0x1483c7,'[MPC]\x20'+_0x650c09+_0xa84152(0x17d)+_0x410617+'¬∞C')));}}else _0x1483c7['log'][_0xa84152(0x1f7)](_0xa84152(0x169)+_0x650c09+'\x20gefunden!');}}module['exports']={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};