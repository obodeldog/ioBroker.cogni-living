function a1_0x574b(_0x16f58f,_0x477da7){const _0x1748cc=a1_0x53af();return a1_0x574b=function(_0x23e332,_0x87e85d){_0x23e332=_0x23e332-0x145;let _0x53af31=_0x1748cc[_0x23e332];return _0x53af31;},a1_0x574b(_0x16f58f,_0x477da7);}(function(_0x110cb8,_0x5208c5){const _0x4fdf01=a1_0x574b,_0x4ced3d=_0x110cb8();while(!![]){try{const _0x2705bf=-parseInt(_0x4fdf01(0x15a))/0x1+parseInt(_0x4fdf01(0x169))/0x2+-parseInt(_0x4fdf01(0x146))/0x3+-parseInt(_0x4fdf01(0x15f))/0x4+-parseInt(_0x4fdf01(0x16e))/0x5+-parseInt(_0x4fdf01(0x155))/0x6+parseInt(_0x4fdf01(0x150))/0x7*(parseInt(_0x4fdf01(0x14d))/0x8);if(_0x2705bf===_0x5208c5)break;else _0x4ced3d['push'](_0x4ced3d['shift']());}catch(_0x25a424){_0x4ced3d['push'](_0x4ced3d['shift']());}}}(a1_0x53af,0x4c22c));const a1_0x87e85d=(function(){let _0x1de349=!![];return function(_0x84544,_0x25487f){const _0x612463=_0x1de349?function(){const _0x322c7e=a1_0x574b;if(_0x25487f){const _0x2ff616=_0x25487f[_0x322c7e(0x159)](_0x84544,arguments);return _0x25487f=null,_0x2ff616;}}:function(){};return _0x1de349=![],_0x612463;};}()),a1_0x23e332=a1_0x87e85d(this,function(){const _0x245d14=a1_0x574b;return a1_0x23e332[_0x245d14(0x14e)]()[_0x245d14(0x16d)](_0x245d14(0x152))[_0x245d14(0x14e)]()[_0x245d14(0x160)](a1_0x23e332)[_0x245d14(0x16d)](_0x245d14(0x152));});a1_0x23e332();'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function normalize(_0x4b06dc){const _0x58af47=a1_0x574b;if(!_0x4b06dc)return'';return _0x4b06dc['toLowerCase']()[_0x58af47(0x15b)](/\s+/g,'')['trim']();}async function handlePrediction(_0x21cc65,_0x3f7c90,_0x36f1c3){const _0x3c8f4f=a1_0x574b;if(!_0x3f7c90||_0x3f7c90===_0x3c8f4f(0x14f))return;let _0x219301='off',_0x2afe64=0.6;try{const _0x3cb0c8=await _0x21cc65[_0x3c8f4f(0x149)](_0x3c8f4f(0x163));if(_0x3cb0c8&&_0x3cb0c8[_0x3c8f4f(0x162)])_0x219301=_0x3cb0c8[_0x3c8f4f(0x162)];const _0xd982cd=await _0x21cc65['getStateAsync'](_0x3c8f4f(0x151));if(_0xd982cd&&_0xd982cd[_0x3c8f4f(0x162)])_0x2afe64=_0xd982cd[_0x3c8f4f(0x162)];}catch(_0x1cca18){}if(_0x219301===_0x3c8f4f(0x16b))return;if(_0x36f1c3<_0x2afe64)return;const _0x33fa4d=Date[_0x3c8f4f(0x15d)]();if(lastActions[_0x3f7c90]&&_0x33fa4d-lastActions[_0x3f7c90]<COOLDOWN_MS)return;const _0x2ef17a=_0x21cc65['config']['devices']||[],_0x755927=normalize(_0x3f7c90),_0x21b36f=_0x2ef17a[_0x3c8f4f(0x167)](_0x4eaaf8=>{const _0x5729ec=_0x3c8f4f;return normalize(_0x4eaaf8[_0x5729ec(0x157)])===_0x755927&&(_0x4eaaf8[_0x5729ec(0x158)]==='light'||_0x4eaaf8[_0x5729ec(0x158)]===_0x5729ec(0x147)||_0x4eaaf8[_0x5729ec(0x158)]===_0x5729ec(0x166));});if(!_0x21b36f){const _0x27c156='ðŸ”\x20Device-Search\x20failed:\x20Predicted\x20\x27'+_0x3f7c90+_0x3c8f4f(0x14c)+_0x755927+'\x27),\x20but\x20found\x20no\x20matching\x20light\x20device.';_0x21cc65[_0x3c8f4f(0x16a)][_0x3c8f4f(0x165)](_0x27c156);return;}const _0x566311=await aiAgent[_0x3c8f4f(0x153)](_0x21cc65,_0x3f7c90,_0x21b36f[_0x3c8f4f(0x168)],_0x36f1c3);if(!_0x566311[_0x3c8f4f(0x154)]){_0x21cc65[_0x3c8f4f(0x16a)]['debug'](_0x3c8f4f(0x14b)+_0x3f7c90+_0x3c8f4f(0x15c)+_0x566311[_0x3c8f4f(0x164)]),await _0x21cc65['setStateAsync'](_0x3c8f4f(0x15e),{'val':_0x3c8f4f(0x145)+_0x566311[_0x3c8f4f(0x164)],'ack':!![]});return;}const _0x146ed3='PrÃ¤diktion:\x20'+_0x3f7c90+'\x20->\x20Schalte\x20'+_0x21b36f[_0x3c8f4f(0x168)]+'\x20('+_0x566311[_0x3c8f4f(0x164)]+')';await _0x21cc65[_0x3c8f4f(0x148)]('analysis.automation.lastAction',{'val':'['+_0x219301['toUpperCase']()+']\x20'+_0x146ed3,'ack':!![]});if(_0x219301==='simulate')_0x21cc65[_0x3c8f4f(0x16a)][_0x3c8f4f(0x156)]('ðŸ‘€\x20SIMULATION:\x20'+_0x146ed3);else{if(_0x219301==='active'){_0x21cc65[_0x3c8f4f(0x16a)][_0x3c8f4f(0x156)](_0x3c8f4f(0x16c)+_0x146ed3);const _0x5b68df=await _0x21cc65[_0x3c8f4f(0x161)](_0x21b36f['id']);if(_0x5b68df&&(_0x5b68df[_0x3c8f4f(0x162)]===!![]||_0x5b68df[_0x3c8f4f(0x162)]>0x0)){}else await _0x21cc65[_0x3c8f4f(0x14a)](_0x21b36f['id'],!![]);lastActions[_0x3f7c90]=_0x33fa4d;}}}function a1_0x53af(){const _0x75bb24=['location','type','apply','13959WFuZxN','replace','\x20->\x20','now','analysis.automation.lastAction','1747416RabztO','constructor','getForeignStateAsync','val','analysis.automation.mode','reason','debug','switch','find','name','942556atoKMH','log','off','âš¡\x20ACTION:\x20','search','2802065ouWsVF','[BLOCKED]\x20','45432NcUfrb','dimmer','setStateAsync','getStateAsync','setForeignStateAsync','ðŸ¤–\x20Butler\x20Blocked:\x20','\x27\x20(norm:\x20\x27','40XeaVfN','toString','Unknown','1930978zzujlT','analysis.automation.confidenceThreshold','(((.+)+)+)+$','consultButler','approved','3073956peVXnQ','info'];a1_0x53af=function(){return _0x75bb24;};return a1_0x53af();}module['exports']={'handlePrediction':handlePrediction};