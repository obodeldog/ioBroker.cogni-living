const a1_0x5183f1=a1_0x775b;function a1_0x775b(_0x34757d,_0x56dacc){const _0x1d1e50=a1_0x1505();return a1_0x775b=function(_0x2a68c3,_0x34a6bd){_0x2a68c3=_0x2a68c3-0xcb;let _0x150572=_0x1d1e50[_0x2a68c3];return _0x150572;},a1_0x775b(_0x34757d,_0x56dacc);}(function(_0x71c9ef,_0x595e74){const _0x1d2371=a1_0x775b,_0x2b77c2=_0x71c9ef();while(!![]){try{const _0x5dc180=parseInt(_0x1d2371(0xd4))/0x1*(parseInt(_0x1d2371(0xec))/0x2)+-parseInt(_0x1d2371(0xcf))/0x3+-parseInt(_0x1d2371(0xe0))/0x4*(-parseInt(_0x1d2371(0xd3))/0x5)+parseInt(_0x1d2371(0xe2))/0x6+parseInt(_0x1d2371(0xe6))/0x7+parseInt(_0x1d2371(0xe3))/0x8+-parseInt(_0x1d2371(0xde))/0x9;if(_0x5dc180===_0x595e74)break;else _0x2b77c2['push'](_0x2b77c2['shift']());}catch(_0x56c1f0){_0x2b77c2['push'](_0x2b77c2['shift']());}}}(a1_0x1505,0x5e510));function a1_0x1505(){const _0x318bbd=['68VlRLfT','exports','977388HuKWZL','3383144FzQupN','location','setStateAsync','2883580UOKtcD','Unknown','(((.+)+)+)+$','[BLOCKED]\x20','analysis.automation.mode','\x20->\x20Schalte\x20','110178EnmPao','toUpperCase','getStateAsync','analysis.automation.lastAction','toLowerCase','simulate','now','log','val','ü§ñ\x20Butler\x20Blocked:\x20','off','getForeignStateAsync','1638873LSGlry','analysis.automation.confidenceThreshold','apply','debug','26755FEvFtZ','11Meyhcy','./ai_agent','reason','config','type','üîç\x20Device-Search\x20failed:\x20Predicted\x20\x27','find','devices','info','approved','6858594XUPmSe','active'];a1_0x1505=function(){return _0x318bbd;};return a1_0x1505();}const a1_0x34a6bd=(function(){let _0x8eec8b=!![];return function(_0x280ffa,_0x425639){const _0x174c4e=_0x8eec8b?function(){const _0x1c32cd=a1_0x775b;if(_0x425639){const _0x2dc8a0=_0x425639[_0x1c32cd(0xd1)](_0x280ffa,arguments);return _0x425639=null,_0x2dc8a0;}}:function(){};return _0x8eec8b=![],_0x174c4e;};}()),a1_0x2a68c3=a1_0x34a6bd(this,function(){const _0x1c9f90=a1_0x775b;return a1_0x2a68c3['toString']()['search'](_0x1c9f90(0xe8))['toString']()['constructor'](a1_0x2a68c3)['search'](_0x1c9f90(0xe8));});a1_0x2a68c3();'use strict';const aiAgent=require(a1_0x5183f1(0xd5)),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function normalize(_0x3692c4){const _0x4998b9=a1_0x5183f1;if(!_0x3692c4)return'';return _0x3692c4[_0x4998b9(0xf0)]()['replace'](/\s+/g,'')['trim']();}async function handlePrediction(_0x5bda42,_0x14ac5f,_0x21e5c1){const _0x38c835=a1_0x5183f1;if(!_0x14ac5f||_0x14ac5f===_0x38c835(0xe7))return;let _0x3f49f4=_0x38c835(0xcd),_0x27f503=0.6;try{const _0x33bc8a=await _0x5bda42['getStateAsync'](_0x38c835(0xea));if(_0x33bc8a&&_0x33bc8a[_0x38c835(0xcb)])_0x3f49f4=_0x33bc8a[_0x38c835(0xcb)];const _0x22ea6c=await _0x5bda42[_0x38c835(0xee)](_0x38c835(0xd0));if(_0x22ea6c&&_0x22ea6c[_0x38c835(0xcb)])_0x27f503=_0x22ea6c[_0x38c835(0xcb)];}catch(_0x579dcc){}if(_0x3f49f4===_0x38c835(0xcd))return;if(_0x21e5c1<_0x27f503)return;const _0x5350ec=Date[_0x38c835(0xf2)]();if(lastActions[_0x14ac5f]&&_0x5350ec-lastActions[_0x14ac5f]<COOLDOWN_MS)return;const _0x147ef3=_0x5bda42[_0x38c835(0xd7)][_0x38c835(0xdb)]||[],_0x1a8860=normalize(_0x14ac5f),_0x4d2cd5=_0x147ef3[_0x38c835(0xda)](_0x17e1dd=>{const _0x2adac2=_0x38c835;return normalize(_0x17e1dd[_0x2adac2(0xe4)])===_0x1a8860&&(_0x17e1dd[_0x2adac2(0xd8)]==='light'||_0x17e1dd[_0x2adac2(0xd8)]==='dimmer'||_0x17e1dd[_0x2adac2(0xd8)]==='switch');});if(!_0x4d2cd5){const _0x5a29ea=_0x38c835(0xd9)+_0x14ac5f+'\x27\x20(norm:\x20\x27'+_0x1a8860+'\x27),\x20but\x20found\x20no\x20matching\x20light\x20device.';_0x5bda42[_0x38c835(0xf3)][_0x38c835(0xd2)](_0x5a29ea);return;}const _0x4f5082=await aiAgent['consultButler'](_0x5bda42,_0x14ac5f,_0x4d2cd5['name'],_0x21e5c1);if(!_0x4f5082[_0x38c835(0xdd)]){_0x5bda42['log'][_0x38c835(0xd2)](_0x38c835(0xcc)+_0x14ac5f+'\x20->\x20'+_0x4f5082[_0x38c835(0xd6)]),await _0x5bda42[_0x38c835(0xe5)](_0x38c835(0xef),{'val':_0x38c835(0xe9)+_0x4f5082[_0x38c835(0xd6)],'ack':!![]});return;}const _0xd03b90='Pr√§diktion:\x20'+_0x14ac5f+_0x38c835(0xeb)+_0x4d2cd5['name']+'\x20('+_0x4f5082[_0x38c835(0xd6)]+')';await _0x5bda42[_0x38c835(0xe5)](_0x38c835(0xef),{'val':'['+_0x3f49f4[_0x38c835(0xed)]()+']\x20'+_0xd03b90,'ack':!![]});if(_0x3f49f4===_0x38c835(0xf1))_0x5bda42['log'][_0x38c835(0xdc)]('üëÄ\x20SIMULATION:\x20'+_0xd03b90);else{if(_0x3f49f4===_0x38c835(0xdf)){_0x5bda42['log'][_0x38c835(0xdc)]('‚ö°\x20ACTION:\x20'+_0xd03b90);const _0x375f85=await _0x5bda42[_0x38c835(0xce)](_0x4d2cd5['id']);if(_0x375f85&&(_0x375f85[_0x38c835(0xcb)]===!![]||_0x375f85['val']>0x0)){}else await _0x5bda42['setForeignStateAsync'](_0x4d2cd5['id'],!![]);lastActions[_0x14ac5f]=_0x5350ec;}}}module[a1_0x5183f1(0xe1)]={'handlePrediction':handlePrediction};