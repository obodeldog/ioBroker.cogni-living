const a1_0x3a2f58=a1_0xfcf1;(function(_0x424587,_0x3fc134){const _0x2c786f=a1_0xfcf1,_0x3dcf39=_0x424587();while(!![]){try{const _0x3d5434=parseInt(_0x2c786f(0x257))/0x1*(-parseInt(_0x2c786f(0x283))/0x2)+-parseInt(_0x2c786f(0x22d))/0x3*(parseInt(_0x2c786f(0x269))/0x4)+-parseInt(_0x2c786f(0x294))/0x5+parseInt(_0x2c786f(0x1f6))/0x6*(-parseInt(_0x2c786f(0x20f))/0x7)+-parseInt(_0x2c786f(0x2a6))/0x8*(parseInt(_0x2c786f(0x245))/0x9)+parseInt(_0x2c786f(0x2ab))/0xa+parseInt(_0x2c786f(0x1f5))/0xb;if(_0x3d5434===_0x3fc134)break;else _0x3dcf39['push'](_0x3dcf39['shift']());}catch(_0x598e02){_0x3dcf39['push'](_0x3dcf39['shift']());}}}(a1_0x441b,0x982cf));const a1_0xcc4f2c=(function(){let _0x38b0a8=!![];return function(_0x27bbe9,_0xbef963){const _0x5393f9=_0x38b0a8?function(){const _0x1077c9=a1_0xfcf1;if(_0xbef963){const _0x42578a=_0xbef963[_0x1077c9(0x26e)](_0x27bbe9,arguments);return _0xbef963=null,_0x42578a;}}:function(){};return _0x38b0a8=![],_0x5393f9;};}()),a1_0x29c035=a1_0xcc4f2c(this,function(){const _0x504368=a1_0xfcf1;return a1_0x29c035[_0x504368(0x1f9)]()[_0x504368(0x2af)](_0x504368(0x28b))[_0x504368(0x1f9)]()[_0x504368(0x22f)](a1_0x29c035)['search']('(((.+)+)+)+$');});function a1_0x441b(){const _0xe66e4b=['Nicht\x20gefunden','analysis.energy.ventilationAlerts','\x20wieder\x20auf\x20','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','apply','ist','actual','val','[MPC]\x20','type','messwert','reason','analysis.energy.mpcActiveInterventions','from','dimmer','number','warn','values','local_temperature','Unknown','string','thermostatMapping','\x20erreicht\x20Limit\x20(','level.valve','map','764FNfque','cal_','getHours','ankunft','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','write','(((.+)+)+)+$','./ai_agent','forEach','ACTUAL_TEMPERATURE','analysis.automation.actionLog','.4.SET_TEMPERATURE','window','\x20gefunden!','Ist','331745rtZxeF','temperature','message','üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.',':\x20Absenkung\x20auf\x20','Unbekannt','analysis.energy.warmupSources','analysis.automation.mode','wert','.4.VALVE_STATE','rescue_','sensor','¬∞C).\x20Sparmodus\x20beendet!','location','consultButler',']:\x20Raum-Trigger\x20\x27','join','3344RjrHAW','replace','getTime','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20','currentSystemMode','1858450kHRbNm',':\x20Aufheizen\x20auf\x20','toLowerCase','event','search','triggerTime','stringify','abs','Calendar\x20Check\x20Error:\x20','log','set','.1.TEMPERATURE','now','common','normal','openknx','\x20->\x20Schalte\x20','22213697bEhnDJ','2412624pBApMW','manual','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','toString','setStateAsync','off','summary','remove','.1.SET_POINT_TEMPERATURE','thermostat.setpoint','value.valve','info','analysis.energy.rlPenalties','[WATCHDOG]\x20','SET_POINT_TEMPERATURE','entries','PERFECT','room','¬∞C\x20<\x20','[CAL]\x20','name','too_cold','valve_position','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','\x27\x20(Match:\x20','14gkavLL','role','setForeignStateAsync','includes','add','¬∞C!\x20(Puffer:\x20','analysis.automation.lastAction','getForeignStateAsync','hm-rpc','getStateAsync','eventStart','¬∞C\x20(Kalender-Schutz)','\x20->\x20','target_temperature','calendarSelection','_calName','filter','occupied_heating_setpoint','state','r√ºckkehr','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','\x20auf\x20','\x20wurde\x20manuell\x20erh√∂ht.','[FORCE]\x20','devices','level','calendarInstance','push','setpoint','analysis.energy.warmupTargets','5436lBwhbU','\x20min).','constructor','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','splice','find','üßπ\x20[MPC\x20CLEANUP]\x20','_date','Enforcement\x20Monitor\x20Error:\x20','valveMapping','¬∞C!\x20(Puffer\x20leer).','¬∞C\x20(nicht\x20',')\x20aktiv.\x20Heize\x20auf\x20','score','toUpperCase','useCalendar','localeCompare','¬∞C\x20(via\x20','config','_meta','light','soll','sendToPythonWrapper','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','13023ValDAF','isArray','target','.1.ACTUAL_TEMPERATURE','urlaub\x20ende','thermostat','\x20ist\x20auf\x20','.data.table','position','Fehlt','pi_heating_demand','current_heating_setpoint','valve','default','üî•\x20[MPC\x20ACTION]\x20Heize\x20','error','analysis.energy.activeEnforcements','switch','241KnZNBv','date','\x20min)','active','split','SET','sort','mpc_','Pr√§diktion:\x20','stellwert','trim','¬∞C.','¬∞C\x20->\x20','length','.1.LEVEL','üìÖ\x20[MPC\x20INFO]\x20','parse','unit','32vvpivS'];a1_0x441b=function(){return _0xe66e4b;};return a1_0x441b();}a1_0x29c035();'use strict';const aiAgent=require(a1_0x3a2f58(0x28c)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function a1_0xfcf1(_0x277a71,_0x11ee72){const _0xa701db=a1_0x441b();return a1_0xfcf1=function(_0x29c035,_0xcc4f2c){_0x29c035=_0x29c035-0x1e9;let _0x441b80=_0xa701db[_0x29c035];return _0x441b80;},a1_0xfcf1(_0x277a71,_0x11ee72);}function normalize(_0x165d31){const _0x46c823=a1_0x3a2f58;if(!_0x165d31)return'';return _0x165d31['toLowerCase']()[_0x46c823(0x2a7)](/\s+/g,'')[_0x46c823(0x261)]();}function getWarmupRobust(_0x41960d,_0x166128){const _0x4766ba=a1_0x3a2f58;if(!_0x41960d||!_0x166128)return 0x3c;if(_0x41960d[_0x166128]!==undefined)return _0x41960d[_0x166128];const _0x2ede92=_0x166128[_0x4766ba(0x2ad)]()[_0x4766ba(0x2a7)](/√§/g,'ae')[_0x4766ba(0x2a7)](/√∂/g,'oe')[_0x4766ba(0x2a7)](/√º/g,'ue')['replace'](/√ü/g,'ss')[_0x4766ba(0x2a7)](/\s+/g,'_')[_0x4766ba(0x2a7)](/[^a-z0-9_]/g,'');if(_0x41960d[_0x2ede92]!==undefined)return _0x41960d[_0x2ede92];return 0x3c;}async function logAutomationAction(_0x122e18,_0x20f0ee){const _0x36549a=a1_0x3a2f58;await _0x122e18[_0x36549a(0x1fa)](_0x36549a(0x215),{'val':_0x20f0ee,'ack':!![]});try{const _0x11f72e=_0x36549a(0x28f),_0x29287f=await _0x122e18[_0x36549a(0x218)](_0x11f72e);let _0x14e9fa=[];if(_0x29287f&&_0x29287f['val'])try{_0x14e9fa=JSON[_0x36549a(0x267)](_0x29287f['val']);}catch(_0x3a66c6){}_0x14e9fa['unshift']({'ts':Date[_0x36549a(0x1f0)](),'msg':_0x20f0ee});if(_0x14e9fa[_0x36549a(0x264)]>0x32)_0x14e9fa=_0x14e9fa['slice'](0x0,0x32);await _0x122e18['setStateAsync'](_0x11f72e,{'val':JSON[_0x36549a(0x1ea)](_0x14e9fa),'ack':!![]});}catch(_0x4d8947){}}async function handlePrediction(_0xcd7b1d,_0xe5b47,_0xb15e25){const _0x2d2365=a1_0x3a2f58;if(!_0xe5b47||_0xe5b47===_0x2d2365(0x27d))return;let _0x5b4204=_0x2d2365(0x1fb),_0x558ea7=0.6;try{const _0x301cc3=await _0xcd7b1d[_0x2d2365(0x218)](_0x2d2365(0x29c));if(_0x301cc3&&_0x301cc3[_0x2d2365(0x271)])_0x5b4204=_0x301cc3[_0x2d2365(0x271)];const _0x481361=await _0xcd7b1d[_0x2d2365(0x218)]('analysis.automation.confidenceThreshold');if(_0x481361&&_0x481361[_0x2d2365(0x271)])_0x558ea7=_0x481361[_0x2d2365(0x271)];}catch(_0x4fd6b7){}if(_0x5b4204===_0x2d2365(0x1fb)||_0xb15e25<_0x558ea7)return;const _0x2cbefc=Date['now']();if(lastActions[_0xe5b47]&&_0x2cbefc-lastActions[_0xe5b47]<COOLDOWN_MS)return;const _0x32eea7=_0xcd7b1d[_0x2d2365(0x23f)][_0x2d2365(0x227)]||[],_0x273c74=normalize(_0xe5b47),_0x1b859b=_0x32eea7[_0x2d2365(0x232)](_0x3c1313=>normalize(_0x3c1313['location'])===_0x273c74&&(_0x3c1313[_0x2d2365(0x273)]===_0x2d2365(0x241)||_0x3c1313[_0x2d2365(0x273)]===_0x2d2365(0x278)||_0x3c1313[_0x2d2365(0x273)]===_0x2d2365(0x256)));if(!_0x1b859b)return;const _0xa40a46=await aiAgent[_0x2d2365(0x2a3)](_0xcd7b1d,_0xe5b47,_0x1b859b[_0x2d2365(0x20a)],_0xb15e25);if(!_0xa40a46['approved'])return;const _0xe9b632=_0x2d2365(0x25f)+_0xe5b47+_0x2d2365(0x1f4)+_0x1b859b[_0x2d2365(0x20a)]+'\x20('+_0xa40a46[_0x2d2365(0x275)]+')';await logAutomationAction(_0xcd7b1d,'['+_0x5b4204[_0x2d2365(0x23b)]()+']\x20'+_0xe9b632);if(_0x5b4204===_0x2d2365(0x25a)){const _0x2e2dd5=await _0xcd7b1d['getForeignStateAsync'](_0x1b859b['id']);(!_0x2e2dd5||!_0x2e2dd5['val']&&_0x2e2dd5[_0x2d2365(0x271)]!==!![])&&await _0xcd7b1d['setForeignStateAsync'](_0x1b859b['id'],!![]),lastActions[_0xe5b47]=_0x2cbefc;}}async function findRelatedId(_0x2f6a19,_0x105560,_0x25c8c3=a1_0x3a2f58(0x22b)){const _0x13b6a5=a1_0x3a2f58;if(_0x25c8c3===_0x13b6a5(0x22b)&&_0x2f6a19[_0x13b6a5(0x23f)][_0x13b6a5(0x27f)]){let _0x334144=_0x2f6a19[_0x13b6a5(0x23f)]['thermostatMapping'];if(typeof _0x334144===_0x13b6a5(0x27e))try{_0x334144=JSON[_0x13b6a5(0x267)](_0x334144);}catch(_0x2fc28f){}if(_0x334144&&_0x334144[_0x105560])return _0x334144[_0x105560];}if(_0x25c8c3===_0x13b6a5(0x251)&&_0x2f6a19['config'][_0x13b6a5(0x236)]){let _0x5535f8=_0x2f6a19[_0x13b6a5(0x23f)][_0x13b6a5(0x236)];if(typeof _0x5535f8==='string')try{_0x5535f8=JSON[_0x13b6a5(0x267)](_0x5535f8);}catch(_0x252b24){}if(_0x5535f8&&_0x5535f8[_0x105560])return _0x5535f8[_0x105560];}let _0x50ec0=[];if(_0x25c8c3===_0x13b6a5(0x22b))_0x50ec0=[{'s':_0x13b6a5(0x248),'t':_0x13b6a5(0x1fe)},{'s':_0x13b6a5(0x1ef),'t':_0x13b6a5(0x1fe)},{'s':_0x13b6a5(0x1ef),'t':_0x13b6a5(0x290)},{'s':_0x13b6a5(0x28e),'t':_0x13b6a5(0x204)},{'s':_0x13b6a5(0x27c),'t':_0x13b6a5(0x220)},{'s':'local_temperature','t':_0x13b6a5(0x250)},{'s':_0x13b6a5(0x295),'t':_0x13b6a5(0x21c)},{'s':'ACTUAL','t':_0x13b6a5(0x25c)},{'s':_0x13b6a5(0x293),'t':'Soll'},{'s':'temperature','t':_0x13b6a5(0x22b)}];else _0x25c8c3===_0x13b6a5(0x251)&&(_0x50ec0=[{'s':_0x13b6a5(0x248),'t':_0x13b6a5(0x265)},{'s':_0x13b6a5(0x1ef),'t':_0x13b6a5(0x265)},{'s':_0x13b6a5(0x1ef),'t':_0x13b6a5(0x29e)},{'s':_0x13b6a5(0x27c),'t':_0x13b6a5(0x24f)},{'s':_0x13b6a5(0x295),'t':_0x13b6a5(0x20c)},{'s':_0x13b6a5(0x295),'t':_0x13b6a5(0x228)}]);for(const _0x2b0b9b of _0x50ec0){if(_0x105560[_0x13b6a5(0x212)](_0x2b0b9b['s'])){const _0x3021af=_0x105560[_0x13b6a5(0x2a7)](_0x2b0b9b['s'],_0x2b0b9b['t']),_0xb047d1=await _0x2f6a19['getForeignObjectAsync'](_0x3021af);if(_0xb047d1)return _0x3021af;}}try{const _0x185b96=_0x105560[_0x13b6a5(0x25b)]('.');if(_0x185b96['length']>0x2){const _0x49f0e6=_0x185b96['slice'](0x0,-0x1)[_0x13b6a5(0x2a5)]('.'),_0x2512e7=await _0x2f6a19['getForeignObjectsAsync'](_0x49f0e6+'.*'),_0x307dec=[],_0x3b4cc6=_0x105560[_0x13b6a5(0x25b)](/[._]+/)['filter'](_0x5bed0f=>![_0x13b6a5(0x1f3),'0',_0x13b6a5(0x217),_0x13b6a5(0x26f),_0x13b6a5(0x29d),_0x13b6a5(0x295),_0x13b6a5(0x270),_0x13b6a5(0x2a0),_0x13b6a5(0x274),_0x13b6a5(0x221)][_0x13b6a5(0x212)](_0x5bed0f[_0x13b6a5(0x2ad)]()));for(const [_0x161529,_0x5171f2]of Object['entries'](_0x2512e7)){if(_0x161529===_0x105560)continue;if(_0x5171f2&&_0x5171f2[_0x13b6a5(0x1f1)]){const _0x1d187e=_0x161529[_0x13b6a5(0x2ad)](),_0x125150=(_0x5171f2[_0x13b6a5(0x1f1)][_0x13b6a5(0x210)]||'')[_0x13b6a5(0x2ad)](),_0x2a4300=(_0x5171f2[_0x13b6a5(0x1f1)][_0x13b6a5(0x268)]||'')[_0x13b6a5(0x2ad)]();let _0x1a5094=![];if(_0x25c8c3===_0x13b6a5(0x22b)&&_0x5171f2[_0x13b6a5(0x1f1)][_0x13b6a5(0x28a)]===!![])_0x1a5094=_0x1d187e[_0x13b6a5(0x212)](_0x13b6a5(0x1ee))||_0x1d187e[_0x13b6a5(0x212)](_0x13b6a5(0x242))||_0x1d187e[_0x13b6a5(0x212)]('target')||_0x125150['includes']('level.temperature')||_0x125150[_0x13b6a5(0x212)](_0x13b6a5(0x1ff));else _0x25c8c3===_0x13b6a5(0x251)&&(_0x1a5094=_0x1d187e['includes'](_0x13b6a5(0x228))||_0x1d187e[_0x13b6a5(0x212)]('valve')||_0x1d187e['includes'](_0x13b6a5(0x260))||_0x1d187e[_0x13b6a5(0x212)](_0x13b6a5(0x24d))||_0x125150[_0x13b6a5(0x212)](_0x13b6a5(0x281))||_0x125150[_0x13b6a5(0x212)](_0x13b6a5(0x200))||_0x2a4300[_0x13b6a5(0x212)]('%'));if(_0x1a5094){const _0x18ef24=_0x161529[_0x13b6a5(0x25b)](/[._]+/)[_0x13b6a5(0x282)](_0x2b45e9=>_0x2b45e9['toLowerCase']());let _0x27ed79=0x0;_0x3b4cc6[_0x13b6a5(0x28d)](_0x56401f=>{const _0x5a2b2f=_0x13b6a5;if(_0x18ef24[_0x5a2b2f(0x212)](_0x56401f[_0x5a2b2f(0x2ad)]()))_0x27ed79++;}),_0x307dec[_0x13b6a5(0x22a)]({'id':_0x161529,'score':_0x27ed79});}}}if(_0x307dec[_0x13b6a5(0x264)]>0x0){_0x307dec[_0x13b6a5(0x25d)]((_0x1eb510,_0x48b9db)=>_0x48b9db[_0x13b6a5(0x23a)]-_0x1eb510[_0x13b6a5(0x23a)]);if(_0x307dec[0x0][_0x13b6a5(0x23a)]>0x0)return _0x307dec[0x0]['id'];}}}catch(_0x3f8f63){}return null;}async function scanThermostats(_0x31c472){const _0x5bd366=a1_0x3a2f58,_0x182f81=_0x31c472[_0x5bd366(0x23f)][_0x5bd366(0x227)]||[],_0x53cf46=[],_0x308455=_0x182f81[_0x5bd366(0x21f)](_0x5cc602=>_0x5cc602['id']&&_0x5cc602['id']['includes'](_0x5bd366(0x295))||_0x5cc602['type']&&[_0x5bd366(0x295),_0x5bd366(0x24a),_0x5bd366(0x2a0)][_0x5bd366(0x212)](_0x5cc602[_0x5bd366(0x273)])||_0x5cc602[_0x5bd366(0x20a)]&&_0x5cc602[_0x5bd366(0x20a)][_0x5bd366(0x2ad)]()[_0x5bd366(0x212)]('temp'));for(const _0x55cd5f of _0x308455){const _0x233d78=await findRelatedId(_0x31c472,_0x55cd5f['id'],'setpoint'),_0x26a957=await findRelatedId(_0x31c472,_0x55cd5f['id'],_0x5bd366(0x251));let _0x25df67=_0x5bd366(0x26a),_0x4f734c=![],_0x1178db=_0x31c472[_0x5bd366(0x23f)][_0x5bd366(0x27f)]||{};if(typeof _0x1178db===_0x5bd366(0x27e))try{_0x1178db=JSON[_0x5bd366(0x267)](_0x1178db);}catch(_0x15dc8a){}let _0x4284ec=_0x31c472['config'][_0x5bd366(0x236)]||{};if(typeof _0x4284ec===_0x5bd366(0x27e))try{_0x4284ec=JSON[_0x5bd366(0x267)](_0x4284ec);}catch(_0x3e9fc0){}if(_0x1178db[_0x55cd5f['id']]&&_0x1178db[_0x55cd5f['id']]===_0x233d78||_0x4284ec[_0x55cd5f['id']]&&_0x4284ec[_0x55cd5f['id']]===_0x26a957)_0x25df67='Manuelles\x20Mapping',_0x4f734c=!![];else(_0x233d78||_0x26a957)&&(_0x25df67='Auto-Erkennung');_0x53cf46[_0x5bd366(0x22a)]({'room':_0x55cd5f[_0x5bd366(0x2a2)]||'Unbekannt','sensorId':_0x55cd5f['id'],'setpointId':_0x233d78||'-','valveId':_0x26a957||'-','source':_0x25df67,'isManual':_0x4f734c,'status':_0x233d78&&_0x26a957?_0x5bd366(0x206):_0x233d78?'OK':_0x5bd366(0x24e)});}return _0x53cf46[_0x5bd366(0x25d)]((_0xa020f2,_0x3a56e5)=>_0xa020f2[_0x5bd366(0x207)][_0x5bd366(0x23d)](_0x3a56e5[_0x5bd366(0x207)]));}async function updateSchedulePreview(_0x4ee4b5){const _0x407140=a1_0x3a2f58;if(!_0x4ee4b5[_0x407140(0x23f)][_0x407140(0x23c)]||!_0x4ee4b5[_0x407140(0x23f)][_0x407140(0x229)])return;let _0x1f3019={};try{const _0x3ad4c2=await _0x4ee4b5[_0x407140(0x218)]('analysis.energy.warmupTimes');if(_0x3ad4c2&&_0x3ad4c2[_0x407140(0x271)])_0x1f3019=JSON['parse'](_0x3ad4c2[_0x407140(0x271)]);}catch(_0xb3e934){}const _0x3a8195=[],_0x12bad7=Date[_0x407140(0x1f0)](),_0x3235d7=0x30*0x3c*0x3c*0x3e8;try{const _0x25f53f=await _0x4ee4b5[_0x407140(0x216)](_0x4ee4b5['config']['calendarInstance']+'.data.table');if(!_0x25f53f||!_0x25f53f['val'])return;const _0x5d73fc=JSON[_0x407140(0x267)](_0x25f53f[_0x407140(0x271)]),_0x5347de=_0x4ee4b5['config'][_0x407140(0x21d)]||[],_0xaa479f=_0x4ee4b5[_0x407140(0x23f)][_0x407140(0x227)]||[],_0x209f13=new Set();_0xaa479f[_0x407140(0x28d)](_0x45f6a1=>{const _0x5000b0=_0x407140;if(_0x45f6a1[_0x5000b0(0x2a2)])_0x209f13[_0x5000b0(0x213)](_0x45f6a1[_0x5000b0(0x2a2)]);});for(const _0x508aea of _0x5d73fc){if(_0x508aea['_calName']&&_0x5347de[_0x407140(0x264)]>0x0&&!_0x5347de[_0x407140(0x212)](_0x508aea[_0x407140(0x21e)]))continue;const _0x16b276=_0x508aea['_date']||_0x508aea[_0x407140(0x219)]||_0x508aea[_0x407140(0x258)];if(!_0x16b276)continue;const _0x7b7294=new Date(_0x16b276),_0x17ad96=_0x7b7294['getTime']();if(isNaN(_0x17ad96))continue;if(_0x17ad96<_0x12bad7)continue;if(_0x17ad96>_0x12bad7+_0x3235d7)continue;const _0x228169=(_0x508aea[_0x407140(0x2ae)]||_0x508aea[_0x407140(0x1fc)]||'')[_0x407140(0x2ad)]();let _0x2db442=![],_0x4a3c29=[],_0x370461=_0x508aea[_0x407140(0x2ae)]||_0x508aea['summary']||_0x407140(0x29a);if(_0x228169[_0x407140(0x212)](_0x407140(0x249))||_0x228169[_0x407140(0x212)](_0x407140(0x222))||_0x228169[_0x407140(0x212)]('ankunft'))_0x2db442=!![],_0x4a3c29=Array[_0x407140(0x277)](_0x209f13);else for(const _0x2d279f of _0x209f13){if(_0x228169[_0x407140(0x212)](_0x2d279f[_0x407140(0x2ad)]()))_0x4a3c29[_0x407140(0x22a)](_0x2d279f);}_0x4a3c29['length']>0x0&&_0x4a3c29['forEach'](_0x14655d=>{const _0x8d25e5=_0x407140;let _0x540790=0x3c;if(_0x2db442){let _0x2a838f=0x0;Object['values'](_0x1f3019)['forEach'](_0x1c947b=>{if(_0x1c947b>_0x2a838f)_0x2a838f=_0x1c947b;}),_0x540790=_0x2a838f>0x0?_0x2a838f:0x78;}else _0x540790=getWarmupRobust(_0x1f3019,_0x14655d);const _0x430545=new Date(_0x17ad96-_0x540790*0xea60);_0x3a8195[_0x8d25e5(0x22a)]({'eventTime':_0x17ad96,'triggerTime':_0x430545[_0x8d25e5(0x2a8)](),'room':_0x14655d,'minutes':_0x540790,'reason':_0x370461,'isGlobal':_0x2db442});});}}catch(_0x16965e){}_0x3a8195[_0x407140(0x25d)]((_0x1c9f2f,_0x4c590b)=>_0x1c9f2f['triggerTime']-_0x4c590b[_0x407140(0x1e9)]);const _0x281658=_0x3a8195['slice'](0x0,0x5);await _0x4ee4b5[_0x407140(0x1fa)]('analysis.energy.schedulePreview',{'val':JSON[_0x407140(0x1ea)](_0x281658),'ack':!![]});}async function monitorEnforcements(_0x4e1953){const _0x1f8733=a1_0x3a2f58;try{const _0x7c0811='analysis.energy.activeEnforcements',_0x385d5b=await _0x4e1953['getStateAsync'](_0x7c0811);if(!_0x385d5b||!_0x385d5b[_0x1f8733(0x271)])return;let _0x3f1c0b=[];try{_0x3f1c0b=JSON[_0x1f8733(0x267)](_0x385d5b[_0x1f8733(0x271)]);}catch(_0x9aa3){return;}if(!Array[_0x1f8733(0x246)](_0x3f1c0b)||_0x3f1c0b[_0x1f8733(0x264)]===0x0)return;const _0x4883b1=Date[_0x1f8733(0x1f0)](),_0x52c8a0=_0x4e1953[_0x1f8733(0x23f)][_0x1f8733(0x227)]||[];let _0x22ecec=![];for(let _0xd8d3c0=_0x3f1c0b[_0x1f8733(0x264)]-0x1;_0xd8d3c0>=0x0;_0xd8d3c0--){const _0x48b658=_0x3f1c0b[_0xd8d3c0];if(_0x4883b1>=_0x48b658['until']){_0x4e1953['log'][_0x1f8733(0x201)](_0x1f8733(0x26d)+_0x48b658[_0x1f8733(0x207)]+_0x1f8733(0x287)),_0x3f1c0b[_0x1f8733(0x231)](_0xd8d3c0,0x1),_0x22ecec=!![];continue;}const _0xcd43ae=_0x52c8a0[_0x1f8733(0x232)](_0x5a8463=>normalize(_0x5a8463[_0x1f8733(0x2a2)])===normalize(_0x48b658[_0x1f8733(0x207)])&&(_0x5a8463['type']===_0x1f8733(0x295)||_0x5a8463[_0x1f8733(0x273)]===_0x1f8733(0x24a)));if(_0xcd43ae){const _0x4e0b9f=await findRelatedId(_0x4e1953,_0xcd43ae['id'],_0x1f8733(0x22b));if(_0x4e0b9f){const _0x16c604=await _0x4e1953[_0x1f8733(0x216)](_0x4e0b9f);_0x16c604&&typeof _0x16c604['val']===_0x1f8733(0x279)&&(_0x16c604[_0x1f8733(0x271)]<0xf&&(_0x4e1953['log']['warn']('üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x48b658['room']+_0x1f8733(0x224)+_0x16c604[_0x1f8733(0x271)]+_0x1f8733(0x223)+_0x48b658[_0x1f8733(0x247)]+_0x1f8733(0x262)),await _0x4e1953[_0x1f8733(0x211)](_0x4e0b9f,_0x48b658[_0x1f8733(0x247)]),await logAutomationAction(_0x4e1953,_0x1f8733(0x226)+_0x48b658['room']+':\x20'+_0x16c604[_0x1f8733(0x271)]+_0x1f8733(0x263)+_0x48b658[_0x1f8733(0x247)]+_0x1f8733(0x21a))));}}}_0x22ecec&&await _0x4e1953[_0x1f8733(0x1fa)](_0x7c0811,{'val':JSON[_0x1f8733(0x1ea)](_0x3f1c0b),'ack':!![]});}catch(_0x13b2b8){_0x4e1953[_0x1f8733(0x1ed)][_0x1f8733(0x254)](_0x1f8733(0x235)+_0x13b2b8[_0x1f8733(0x296)]);}}async function checkCalendarTriggers(_0x484c59){const _0x482502=a1_0x3a2f58;if(!_0x484c59[_0x482502(0x23f)]['useCalendar']||!_0x484c59[_0x482502(0x23f)][_0x482502(0x229)])return;await updateSchedulePreview(_0x484c59);let _0x4145b6={},_0x38c57b={};try{const _0x546778=await _0x484c59['getStateAsync']('analysis.energy.warmupTimes');if(_0x546778&&_0x546778[_0x482502(0x271)])_0x4145b6=JSON[_0x482502(0x267)](_0x546778[_0x482502(0x271)]);const _0x7a7a78=await _0x484c59[_0x482502(0x218)](_0x482502(0x29b));if(_0x7a7a78&&_0x7a7a78[_0x482502(0x271)])_0x38c57b=JSON[_0x482502(0x267)](_0x7a7a78[_0x482502(0x271)]);}catch(_0x3057d7){}let _0x3c91f8={'default':0x15};try{const _0x4c6406=await _0x484c59[_0x482502(0x218)]('analysis.energy.warmupTargets');if(_0x4c6406&&_0x4c6406['val'])_0x3c91f8=JSON[_0x482502(0x267)](_0x4c6406[_0x482502(0x271)]);}catch(_0x6c689a){}let _0x1a0239=[];try{const _0x8cd48b=await _0x484c59[_0x482502(0x218)]('analysis.energy.activeEnforcements');if(_0x8cd48b&&_0x8cd48b[_0x482502(0x271)])_0x1a0239=JSON['parse'](_0x8cd48b[_0x482502(0x271)]);}catch(_0x47d600){}try{const _0x3ec497=await _0x484c59[_0x482502(0x216)](_0x484c59[_0x482502(0x23f)][_0x482502(0x229)]+_0x482502(0x24c));if(!_0x3ec497||!_0x3ec497['val'])return;const _0x53428c=JSON[_0x482502(0x267)](_0x3ec497['val']),_0x686dc7=Date[_0x482502(0x1f0)](),_0x56b046=_0x484c59[_0x482502(0x23f)][_0x482502(0x227)]||[],_0xfba9e1=_0x484c59['config'][_0x482502(0x21d)]||[];let _0x39cfc8=![];for(const _0x302843 of _0x53428c){if(_0x302843[_0x482502(0x21e)]&&_0xfba9e1[_0x482502(0x264)]>0x0&&!_0xfba9e1[_0x482502(0x212)](_0x302843[_0x482502(0x21e)]))continue;const _0x94f01f=_0x302843[_0x482502(0x234)]||_0x302843[_0x482502(0x219)]||_0x302843[_0x482502(0x258)];if(!_0x94f01f)continue;const _0x3596ef=new Date(_0x94f01f);if(isNaN(_0x3596ef[_0x482502(0x2a8)]()))continue;const _0x4768d6=(_0x302843[_0x482502(0x2ae)]||_0x302843['summary']||'')[_0x482502(0x2ad)]();if(_0x4768d6[_0x482502(0x212)](_0x482502(0x249))||_0x4768d6[_0x482502(0x212)](_0x482502(0x222))||_0x4768d6[_0x482502(0x212)](_0x482502(0x286))){let _0x140fb5=0x0;Object[_0x482502(0x27b)](_0x4145b6)['forEach'](_0x63c39=>{if(_0x63c39>_0x140fb5)_0x140fb5=_0x63c39;});if(_0x140fb5===0x0)_0x140fb5=0x78;const _0x37a185=_0x3596ef[_0x482502(0x2a8)]()-_0x140fb5*0xea60;_0x686dc7>=_0x37a185&&_0x686dc7<_0x3596ef[_0x482502(0x2a8)]()&&(_0x484c59[_0x482502(0x2aa)]!==_0x482502(0x1f2)&&(_0x484c59[_0x482502(0x1ed)]['info']('üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20'+_0x140fb5+_0x482502(0x22e)),await _0x484c59[_0x482502(0x1fa)]('system.mode',{'val':'normal','ack':![]})));}for(const _0x46d75e of _0x56b046){if(_0x46d75e['location']){const _0x73e674=_0x46d75e[_0x482502(0x2a2)][_0x482502(0x2ad)](),_0x122070=(_0x46d75e[_0x482502(0x20a)]||'')[_0x482502(0x2ad)]();let _0x2075ec=_0x4768d6[_0x482502(0x212)](_0x73e674);!_0x2075ec&&_0x122070[_0x482502(0x264)]>0x3&&_0x4768d6['includes'](_0x122070)&&(_0x2075ec=!![]);if(_0x2075ec){const _0x4ccaf8=getWarmupRobust(_0x4145b6,_0x46d75e[_0x482502(0x2a2)]),_0x543e1c=_0x38c57b[_0x46d75e[_0x482502(0x2a2)]]||'Classic',_0x2be0ec=_0x3596ef[_0x482502(0x2a8)]()-_0x4ccaf8*0xea60;if(_0x686dc7>=_0x2be0ec&&_0x686dc7<_0x3596ef[_0x482502(0x2a8)]()){const _0x550869=lastActions[_0x482502(0x284)+_0x46d75e[_0x482502(0x2a2)]];if(_0x550869&&_0x686dc7-_0x550869<CAL_COOLDOWN_MS)continue;const _0x30c968=await findRelatedId(_0x484c59,_0x46d75e['id'],_0x482502(0x22b));if(_0x30c968){let _0x177858=_0x3c91f8[_0x46d75e[_0x482502(0x2a2)]];if(_0x177858===undefined)_0x177858=_0x3c91f8[_0x482502(0x252)];if(_0x177858===undefined)_0x177858=0x15;const _0x943c84=await _0x484c59[_0x482502(0x216)](_0x30c968);if(_0x943c84&&typeof _0x943c84[_0x482502(0x271)]===_0x482502(0x279)&&_0x943c84['val']<_0x177858-0.5){_0x484c59[_0x482502(0x1ed)][_0x482502(0x201)]('üìÖ\x20SMART\x20SCHEDULE\x20['+_0x543e1c+_0x482502(0x2a4)+_0x46d75e[_0x482502(0x2a2)]+_0x482502(0x20e)+_0x4768d6+_0x482502(0x239)+_0x177858+'¬∞C\x20(Vorlauf:\x20'+_0x4ccaf8+_0x482502(0x22e)),await _0x484c59[_0x482502(0x211)](_0x30c968,_0x177858),await logAutomationAction(_0x484c59,_0x482502(0x209)+_0x46d75e[_0x482502(0x2a2)]+_0x482502(0x21b)+_0x177858+_0x482502(0x23e)+_0x543e1c+')'),lastActions[_0x482502(0x284)+_0x46d75e[_0x482502(0x2a2)]]=_0x686dc7;const _0x42c430=_0x1a0239['findIndex'](_0x39d2d3=>_0x39d2d3[_0x482502(0x207)]===_0x46d75e[_0x482502(0x2a2)]);if(_0x42c430!==-0x1)_0x1a0239['splice'](_0x42c430,0x1);_0x1a0239[_0x482502(0x22a)]({'room':_0x46d75e[_0x482502(0x2a2)],'target':_0x177858,'until':_0x3596ef['getTime']()}),_0x39cfc8=!![];}}}}}}}_0x39cfc8&&await _0x484c59[_0x482502(0x1fa)](_0x482502(0x255),{'val':JSON[_0x482502(0x1ea)](_0x1a0239),'ack':!![]});}catch(_0x290317){_0x484c59[_0x482502(0x1ed)][_0x482502(0x27a)](_0x482502(0x1ec)+_0x290317[_0x482502(0x296)]);}}async function manageMpcIntervention(_0x29b3cd,_0x2738be,_0x558f5c){const _0x522174=a1_0x3a2f58;try{const _0x380dd1=_0x522174(0x276),_0x766474=await _0x29b3cd['getStateAsync'](_0x380dd1);let _0x9dffd8=[];if(_0x766474&&_0x766474[_0x522174(0x271)])try{_0x9dffd8=JSON[_0x522174(0x267)](_0x766474[_0x522174(0x271)]);}catch(_0x230041){}const _0x15e36e=_0x9dffd8['indexOf'](_0x2738be);if(_0x558f5c===_0x522174(0x213))_0x15e36e===-0x1&&(_0x9dffd8['push'](_0x2738be),await _0x29b3cd['setStateAsync'](_0x380dd1,{'val':JSON[_0x522174(0x1ea)](_0x9dffd8),'ack':!![]}));else _0x558f5c===_0x522174(0x1fd)&&(_0x15e36e!==-0x1&&(_0x9dffd8[_0x522174(0x231)](_0x15e36e,0x1),await _0x29b3cd[_0x522174(0x1fa)](_0x380dd1,{'val':JSON[_0x522174(0x1ea)](_0x9dffd8),'ack':!![]})));}catch(_0x557246){}}async function cleanupGhostInterventions(_0x20934c){const _0x1b3a34=a1_0x3a2f58;try{const _0x2de53c=_0x1b3a34(0x276),_0x3f5426=await _0x20934c[_0x1b3a34(0x218)](_0x2de53c);if(!_0x3f5426||!_0x3f5426['val'])return;const _0x3f4f38=JSON['parse'](_0x3f5426[_0x1b3a34(0x271)]);if(!Array[_0x1b3a34(0x246)](_0x3f4f38)||_0x3f4f38[_0x1b3a34(0x264)]===0x0)return;let _0x309c91={'default':0x15};try{const _0x55f449=await _0x20934c[_0x1b3a34(0x218)](_0x1b3a34(0x22c));if(_0x55f449&&_0x55f449[_0x1b3a34(0x271)])_0x309c91=JSON[_0x1b3a34(0x267)](_0x55f449[_0x1b3a34(0x271)]);}catch(_0x2e0469){}let _0x58a9f7=[];try{const _0x5b87ef=await _0x20934c[_0x1b3a34(0x218)](_0x1b3a34(0x26b));if(_0x5b87ef&&_0x5b87ef['val'])_0x58a9f7=JSON[_0x1b3a34(0x267)](_0x5b87ef[_0x1b3a34(0x271)]);}catch(_0x5943fe){}let _0xfe0817={},_0x47fad4=![];try{const _0x4111b1=await _0x20934c[_0x1b3a34(0x218)](_0x1b3a34(0x202));if(_0x4111b1&&_0x4111b1[_0x1b3a34(0x271)])_0xfe0817=JSON['parse'](_0x4111b1['val']);}catch(_0x4d1b53){}if(_0xfe0817[_0x1b3a34(0x240)]){const _0x4840bd=Date[_0x1b3a34(0x1f0)]();for(const [_0x6440be,_0x2d43ab]of Object[_0x1b3a34(0x205)](_0xfe0817['_meta'])){_0x4840bd-_0x2d43ab>PENALTY_TTL&&(delete _0xfe0817[_0x6440be],delete _0xfe0817[_0x1b3a34(0x240)][_0x6440be],_0x47fad4=!![],_0x20934c[_0x1b3a34(0x1ed)][_0x1b3a34(0x201)](_0x1b3a34(0x1f8)+_0x6440be+_0x1b3a34(0x298)));}}const _0x40d66a=_0x20934c[_0x1b3a34(0x23f)][_0x1b3a34(0x227)]||[];let _0x392fdc=![];for(let _0xd9d46e=_0x3f4f38[_0x1b3a34(0x264)]-0x1;_0xd9d46e>=0x0;_0xd9d46e--){const _0x1ab2e3=_0x3f4f38[_0xd9d46e],_0x51d683=_0x40d66a['find'](_0x1450d8=>normalize(_0x1450d8[_0x1b3a34(0x2a2)])===normalize(_0x1ab2e3)&&(_0x1450d8['type']===_0x1b3a34(0x295)||_0x1450d8[_0x1b3a34(0x273)]==='thermostat'));if(!_0x51d683){_0x20934c[_0x1b3a34(0x1ed)][_0x1b3a34(0x27a)]('üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27'+_0x1ab2e3+_0x1b3a34(0x288)),_0x3f4f38[_0x1b3a34(0x231)](_0xd9d46e,0x1),_0x392fdc=!![];continue;}if(_0x51d683){const _0x57e87d=await findRelatedId(_0x20934c,_0x51d683['id'],_0x1b3a34(0x22b)),_0x10f540=await _0x20934c[_0x1b3a34(0x216)](_0x51d683['id']);if(_0x57e87d){const _0x1e65c=await _0x20934c[_0x1b3a34(0x216)](_0x57e87d);if(_0x1e65c&&typeof _0x1e65c[_0x1b3a34(0x271)]===_0x1b3a34(0x279)){let _0x167643=![],_0x38323e='';Math[_0x1b3a34(0x1eb)](_0x1e65c[_0x1b3a34(0x271)]-ECO_TEMP)>0.5&&(_0x167643=!![],_0x38323e=_0x1b3a34(0x1f7));if(!_0x167643&&_0x10f540&&typeof _0x10f540[_0x1b3a34(0x271)]===_0x1b3a34(0x279)){const _0x56f05b=_0x309c91[_0x1ab2e3]||_0x309c91[_0x1b3a34(0x252)]||0x15;_0x10f540[_0x1b3a34(0x271)]<_0x56f05b+0.2&&(_0x167643=!![],_0x38323e=_0x1b3a34(0x20b));}if(_0x167643){if(_0x38323e===_0x1b3a34(0x1f7)){_0x20934c[_0x1b3a34(0x1ed)][_0x1b3a34(0x201)](_0x1b3a34(0x233)+_0x1ab2e3+_0x1b3a34(0x24b)+_0x1e65c[_0x1b3a34(0x271)]+_0x1b3a34(0x238)+ECO_TEMP+'¬∞C).\x20Entferne\x20Status.');const _0x524cb3=lastActions[_0x1b3a34(0x284)+_0x1ab2e3],_0x15da44=_0x524cb3&&Date['now']()-_0x524cb3<0x2*0x3c*0x3e8;if(!_0x15da44&&_0x1e65c['val']>ECO_TEMP+0.5){_0x20934c['sendToPythonWrapper']&&(_0x20934c[_0x1b3a34(0x1ed)]['info'](_0x1b3a34(0x230)+_0x1ab2e3+_0x1b3a34(0x225)),_0x20934c[_0x1b3a34(0x243)]('TRAIN_RL_PENALTY',{'room':_0x1ab2e3}));const _0x1f8f60=_0x1ab2e3+'_'+new Date()[_0x1b3a34(0x285)]();if(!_0xfe0817[_0x1f8f60]){_0xfe0817[_0x1f8f60]=0x1;if(!_0xfe0817[_0x1b3a34(0x240)])_0xfe0817[_0x1b3a34(0x240)]={};_0xfe0817[_0x1b3a34(0x240)][_0x1f8f60]=Date['now'](),_0x47fad4=!![];}}else _0x15da44&&_0x20934c[_0x1b3a34(0x1ed)][_0x1b3a34(0x201)](_0x1b3a34(0x266)+_0x1ab2e3+'\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.');}else{if(_0x38323e==='too_cold'){let _0x11569f=![];if(_0x58a9f7[_0x1b3a34(0x232)](_0x1069f4=>_0x1069f4[_0x1b3a34(0x207)]===_0x1ab2e3))_0x11569f=!![];const _0x4ade3e=_0x40d66a[_0x1b3a34(0x21f)](_0x162b1b=>normalize(_0x162b1b[_0x1b3a34(0x2a2)])===normalize(_0x1ab2e3)&&(_0x162b1b[_0x1b3a34(0x273)]===_0x1b3a34(0x291)||_0x162b1b[_0x1b3a34(0x273)]==='sensor'||_0x162b1b['type']==='contact'));for(const _0x3dee2e of _0x4ade3e){try{const _0x292554=await _0x20934c['getForeignStateAsync'](_0x3dee2e['id']);if(_0x292554&&(_0x292554['val']===!![]||_0x292554[_0x1b3a34(0x271)]===0x1||String(_0x292554[_0x1b3a34(0x271)])['toLowerCase']()==='open'))_0x11569f=!![];}catch(_0x8f763f){}}if(_0x11569f)_0x20934c[_0x1b3a34(0x1ed)]['info'](_0x1b3a34(0x297)+_0x1ab2e3+_0x1b3a34(0x244));else{const _0x541103=_0x309c91[_0x1ab2e3]||_0x309c91[_0x1b3a34(0x252)]||0x15;_0x20934c[_0x1b3a34(0x1ed)][_0x1b3a34(0x201)]('üö®\x20[MPC\x20WATCHDOG]\x20'+_0x1ab2e3+_0x1b3a34(0x280)+_0x10f540[_0x1b3a34(0x271)]+_0x1b3a34(0x208)+(_0x541103+0.2)+_0x1b3a34(0x2a1)),await _0x20934c[_0x1b3a34(0x211)](_0x57e87d,_0x541103),await logAutomationAction(_0x20934c,_0x1b3a34(0x203)+_0x1ab2e3+_0x1b3a34(0x289)+_0x541103+'¬∞C'),lastActions['rescue_'+_0x1ab2e3]=Date[_0x1b3a34(0x1f0)]();}}}_0x3f4f38['splice'](_0xd9d46e,0x1),_0x392fdc=!![];}}}}}_0x392fdc&&await _0x20934c[_0x1b3a34(0x1fa)](_0x2de53c,{'val':JSON['stringify'](_0x3f4f38),'ack':!![]}),_0x47fad4&&await _0x20934c['setStateAsync'](_0x1b3a34(0x202),{'val':JSON[_0x1b3a34(0x1ea)](_0xfe0817),'ack':!![]});}catch(_0x59ca2e){}}async function applyEnergySavings(_0x5c7708,_0x55d7e3){const _0x510131=a1_0x3a2f58;await cleanupGhostInterventions(_0x5c7708);if(!_0x55d7e3||_0x55d7e3[_0x510131(0x264)]===0x0)return;const _0x17a053=_0x5c7708[_0x510131(0x23f)][_0x510131(0x227)]||[],_0xb12b50=Date[_0x510131(0x1f0)]();for(const _0x32c22b of _0x55d7e3){const _0x28c44d=_0x32c22b[_0x510131(0x207)],_0x1d9693=_0x32c22b['minutes_safe'],_0x4a3056=_0x32c22b[_0x510131(0x247)]||0x15;if(lastActions[_0x510131(0x29f)+_0x28c44d]&&_0xb12b50-lastActions[_0x510131(0x29f)+_0x28c44d]<RESCUE_LOCK_MS)continue;const _0x366626=_0x17a053['find'](_0x6ce039=>normalize(_0x6ce039[_0x510131(0x2a2)])===normalize(_0x28c44d)&&(_0x6ce039['type']===_0x510131(0x295)||_0x6ce039[_0x510131(0x273)]===_0x510131(0x24a)));if(!_0x366626)continue;const _0x140d2e=await findRelatedId(_0x5c7708,_0x366626['id'],'setpoint');if(_0x140d2e){if(lastActions[_0x510131(0x25e)+_0x28c44d]&&_0xb12b50-lastActions[_0x510131(0x25e)+_0x28c44d]<0x1e*0x3c*0x3e8)continue;const _0x36ed62=await _0x5c7708['getForeignStateAsync'](_0x140d2e);if(_0x36ed62&&typeof _0x36ed62[_0x510131(0x271)]===_0x510131(0x279)){const _0x32bb06=_0x36ed62['val'];_0x32bb06!==ECO_TEMP&&await manageMpcIntervention(_0x5c7708,_0x28c44d,_0x510131(0x1fd));if(_0x1d9693>0x1e)_0x32bb06>ECO_TEMP+0.5&&(_0x5c7708[_0x510131(0x1ed)][_0x510131(0x201)](_0x510131(0x2a9)+_0x28c44d+_0x510131(0x224)+ECO_TEMP+_0x510131(0x214)+_0x1d9693+_0x510131(0x259)),await _0x5c7708[_0x510131(0x211)](_0x140d2e,ECO_TEMP),await manageMpcIntervention(_0x5c7708,_0x28c44d,_0x510131(0x213)),lastActions['mpc_'+_0x28c44d]=_0xb12b50,await logAutomationAction(_0x5c7708,'[MPC]\x20'+_0x28c44d+_0x510131(0x299)+ECO_TEMP+'¬∞C'));else _0x1d9693<=0xf&&(_0x32bb06<_0x4a3056&&(_0x5c7708['log'][_0x510131(0x201)](_0x510131(0x253)+_0x28c44d+_0x510131(0x26c)+_0x4a3056+_0x510131(0x237)),await _0x5c7708[_0x510131(0x211)](_0x140d2e,_0x4a3056),await manageMpcIntervention(_0x5c7708,_0x28c44d,_0x510131(0x1fd)),lastActions[_0x510131(0x25e)+_0x28c44d]=_0xb12b50,await logAutomationAction(_0x5c7708,_0x510131(0x272)+_0x28c44d+_0x510131(0x2ac)+_0x4a3056+'¬∞C')));}}else _0x5c7708[_0x510131(0x1ed)][_0x510131(0x27a)](_0x510131(0x20d)+_0x28c44d+_0x510131(0x292));}}module['exports']={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};