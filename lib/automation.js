const a1_0x2ecf13=a1_0x4d4a;(function(_0xc03a4d,_0x343583){const _0x22713a=a1_0x4d4a,_0x3f6ade=_0xc03a4d();while(!![]){try{const _0x46e28f=-parseInt(_0x22713a(0x28d))/0x1*(-parseInt(_0x22713a(0x210))/0x2)+-parseInt(_0x22713a(0x1ec))/0x3*(-parseInt(_0x22713a(0x1fa))/0x4)+parseInt(_0x22713a(0x271))/0x5+parseInt(_0x22713a(0x298))/0x6+-parseInt(_0x22713a(0x25b))/0x7+parseInt(_0x22713a(0x268))/0x8*(parseInt(_0x22713a(0x26f))/0x9)+-parseInt(_0x22713a(0x255))/0xa;if(_0x46e28f===_0x343583)break;else _0x3f6ade['push'](_0x3f6ade['shift']());}catch(_0x536fc6){_0x3f6ade['push'](_0x3f6ade['shift']());}}}(a1_0x4637,0xbb417));const a1_0x30fcc3=(function(){let _0x148de5=!![];return function(_0x257bb4,_0x1c5eeb){const _0x2e02e4=_0x148de5?function(){const _0x5a22a0=a1_0x4d4a;if(_0x1c5eeb){const _0xa3519a=_0x1c5eeb[_0x5a22a0(0x222)](_0x257bb4,arguments);return _0x1c5eeb=null,_0xa3519a;}}:function(){};return _0x148de5=![],_0x2e02e4;};}()),a1_0x34e8f2=a1_0x30fcc3(this,function(){const _0x263ddd=a1_0x4d4a;return a1_0x34e8f2[_0x263ddd(0x26a)]()[_0x263ddd(0x203)]('(((.+)+)+)+$')[_0x263ddd(0x26a)]()[_0x263ddd(0x217)](a1_0x34e8f2)[_0x263ddd(0x203)](_0x263ddd(0x21e));});a1_0x34e8f2();'use strict';function a1_0x4d4a(_0x3e791e,_0x1402d7){const _0x2f4b25=a1_0x4637();return a1_0x4d4a=function(_0x34e8f2,_0x30fcc3){_0x34e8f2=_0x34e8f2-0x1e1;let _0x463728=_0x2f4b25[_0x34e8f2];return _0x463728;},a1_0x4d4a(_0x3e791e,_0x1402d7);}const aiAgent=require(a1_0x2ecf13(0x27c)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function a1_0x4637(){const _0x19d346=['_date','ankunft','val','approved','thermostat','switch','analysis.automation.mode','Unbekannt','manual','toLowerCase','TRAIN_RL_PENALTY','dimmer','consultButler',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','üö®\x20[MPC\x20WATCHDOG]\x20','analysis.energy.ventilationAlerts','occupied_heating_setpoint','toUpperCase','[WATCHDOG]\x20','36958840oMfcgw','üî•\x20[MPC\x20ACTION]\x20Heize\x20','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','length','type','\x20wurde\x20manuell\x20erh√∂ht.','6085142EHSkLT','stringify','Classic',':\x20Aufheizen\x20auf\x20','score','analysis.energy.warmupTimes','message','wert','.1.SET_POINT_TEMPERATURE','\x20gefunden!','calendarInstance','getForeignStateAsync','value.valve','10464688qxHohZ','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','toString','_meta','setpoint','Enforcement\x20Monitor\x20Error:\x20','from','9aBmCFG','¬∞C.','5995070MNXWES','.1.ACTUAL_TEMPERATURE','[FORCE]\x20','\x20->\x20','ACTUAL_TEMPERATURE','remove','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','forEach','.1.TEMPERATURE','valve','\x20->\x20Schalte\x20','./ai_agent','¬∞C).\x20Entferne\x20Status.','open','log','isArray','¬∞C!\x20(Puffer\x20leer).','includes','write','rescue_','event','eventStart','.4.VALVE_STATE','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20','üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20','triggerTime','set','summary','7145PqvjNZ','analysis.energy.warmupTargets','thermostatMapping','valveMapping','findIndex','[MPC]\x20','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','üìÖ\x20[MPC\x20INFO]\x20','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','mpc_','r√ºckkehr','7057398RJeNLy','splice','unit','¬∞C\x20<\x20','cal_','temp','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','local_temperature','getForeignObjectsAsync','_calName','level','¬∞C).\x20Sparmodus\x20beendet!','filter','.data.table','common','ACTUAL','config','analysis.energy.rlPenalties','messwert','temperature','Pr√§diktion:\x20','split','1899QxWoru','analysis.automation.actionLog','find','analysis.automation.lastAction','off','¬∞C\x20->\x20','info','\x20wieder\x20auf\x20','entries','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','too_cold','¬∞C\x20(via\x20','getStateAsync','useCalendar','4008BYAeNw','level.temperature','analysis.energy.activeEnforcements','setForeignStateAsync','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','setStateAsync','valve_position','devices','parse','search',')\x20aktiv.\x20Heize\x20auf\x20','warn','join','error','state','.1.LEVEL','openknx','\x20erreicht\x20Limit\x20(','exports','getForeignObjectAsync','push','date','284zQuDJZ','localeCompare','position','sort',']:\x20Raum-Trigger\x20\x27','\x20ist\x20auf\x20','default','constructor','urlaub\x20ende','sensor','Soll','unshift','replace','name','(((.+)+)+)+$','Calendar\x20Check\x20Error:\x20','\x20auf\x20','indexOf','apply','SET_POINT_TEMPERATURE','stellwert','PERFECT','add','values','number','target','string','now','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','SET','light','\x20min).','üßπ\x20[MPC\x20CLEANUP]\x20','Unknown','Fehlt','location','active','slice','room','analysis.energy.mpcActiveInterventions','getTime','¬∞C\x20(Kalender-Schutz)','window','sendToPythonWrapper','currentSystemMode','role','pi_heating_demand',':\x20Absenkung\x20auf\x20','actual','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20'];a1_0x4637=function(){return _0x19d346;};return a1_0x4637();}function normalize(_0x3f149c){if(!_0x3f149c)return'';return _0x3f149c['toLowerCase']()['replace'](/\s+/g,'')['trim']();}function getWarmupRobust(_0x2665a3,_0x4dfea5){const _0x27b28f=a1_0x2ecf13;if(!_0x2665a3||!_0x4dfea5)return 0x3c;if(_0x2665a3[_0x4dfea5]!==undefined)return _0x2665a3[_0x4dfea5];const _0x485867=_0x4dfea5[_0x27b28f(0x24b)]()[_0x27b28f(0x21c)](/√§/g,'ae')[_0x27b28f(0x21c)](/√∂/g,'oe')[_0x27b28f(0x21c)](/√º/g,'ue')[_0x27b28f(0x21c)](/√ü/g,'ss')['replace'](/\s+/g,'_')[_0x27b28f(0x21c)](/[^a-z0-9_]/g,'');if(_0x2665a3[_0x485867]!==undefined)return _0x2665a3[_0x485867];return 0x3c;}async function logAutomationAction(_0xa6e35d,_0x4d7b76){const _0x47340f=a1_0x2ecf13;await _0xa6e35d[_0x47340f(0x1ff)](_0x47340f(0x1ef),{'val':_0x4d7b76,'ack':!![]});try{const _0x4b8ec0=_0x47340f(0x1ed),_0x7540fd=await _0xa6e35d[_0x47340f(0x1f8)](_0x4b8ec0);let _0x2a6b12=[];if(_0x7540fd&&_0x7540fd[_0x47340f(0x244)])try{_0x2a6b12=JSON[_0x47340f(0x202)](_0x7540fd[_0x47340f(0x244)]);}catch(_0x3bcf89){}_0x2a6b12[_0x47340f(0x21b)]({'ts':Date['now'](),'msg':_0x4d7b76});if(_0x2a6b12[_0x47340f(0x258)]>0x32)_0x2a6b12=_0x2a6b12[_0x47340f(0x235)](0x0,0x32);await _0xa6e35d[_0x47340f(0x1ff)](_0x4b8ec0,{'val':JSON[_0x47340f(0x25c)](_0x2a6b12),'ack':!![]});}catch(_0x4b11df){}}async function handlePrediction(_0x26c48e,_0x73f3bd,_0x4aa8a6){const _0x540da2=a1_0x2ecf13;if(!_0x73f3bd||_0x73f3bd===_0x540da2(0x231))return;let _0x580025=_0x540da2(0x1f0),_0x487dc9=0.6;try{const _0x295cad=await _0x26c48e[_0x540da2(0x1f8)](_0x540da2(0x248));if(_0x295cad&&_0x295cad[_0x540da2(0x244)])_0x580025=_0x295cad[_0x540da2(0x244)];const _0x284140=await _0x26c48e[_0x540da2(0x1f8)]('analysis.automation.confidenceThreshold');if(_0x284140&&_0x284140[_0x540da2(0x244)])_0x487dc9=_0x284140[_0x540da2(0x244)];}catch(_0xa0b234){}if(_0x580025==='off'||_0x4aa8a6<_0x487dc9)return;const _0x584660=Date['now']();if(lastActions[_0x73f3bd]&&_0x584660-lastActions[_0x73f3bd]<COOLDOWN_MS)return;const _0x2e9d2d=_0x26c48e[_0x540da2(0x1e6)]['devices']||[],_0x422df3=normalize(_0x73f3bd),_0x195764=_0x2e9d2d[_0x540da2(0x1ee)](_0x10762a=>normalize(_0x10762a['location'])===_0x422df3&&(_0x10762a[_0x540da2(0x259)]===_0x540da2(0x22e)||_0x10762a[_0x540da2(0x259)]===_0x540da2(0x24d)||_0x10762a['type']===_0x540da2(0x247)));if(!_0x195764)return;const _0x372b25=await aiAgent[_0x540da2(0x24e)](_0x26c48e,_0x73f3bd,_0x195764[_0x540da2(0x21d)],_0x4aa8a6);if(!_0x372b25[_0x540da2(0x245)])return;const _0x1a72f0=_0x540da2(0x1ea)+_0x73f3bd+_0x540da2(0x27b)+_0x195764[_0x540da2(0x21d)]+'\x20('+_0x372b25['reason']+')';await logAutomationAction(_0x26c48e,'['+_0x580025[_0x540da2(0x253)]()+']\x20'+_0x1a72f0);if(_0x580025===_0x540da2(0x234)){const _0x1ad2c1=await _0x26c48e[_0x540da2(0x266)](_0x195764['id']);(!_0x1ad2c1||!_0x1ad2c1[_0x540da2(0x244)]&&_0x1ad2c1[_0x540da2(0x244)]!==!![])&&await _0x26c48e[_0x540da2(0x1fd)](_0x195764['id'],!![]),lastActions[_0x73f3bd]=_0x584660;}}async function findRelatedId(_0x42d056,_0xbb10b9,_0x1bef56=a1_0x2ecf13(0x26c)){const _0x2ccd88=a1_0x2ecf13;if(_0x1bef56==='setpoint'&&_0x42d056['config'][_0x2ccd88(0x28f)]){let _0x59d34d=_0x42d056[_0x2ccd88(0x1e6)][_0x2ccd88(0x28f)];if(typeof _0x59d34d==='string')try{_0x59d34d=JSON['parse'](_0x59d34d);}catch(_0x531703){}if(_0x59d34d&&_0x59d34d[_0xbb10b9])return _0x59d34d[_0xbb10b9];}if(_0x1bef56===_0x2ccd88(0x27a)&&_0x42d056[_0x2ccd88(0x1e6)][_0x2ccd88(0x290)]){let _0x189bd7=_0x42d056['config']['valveMapping'];if(typeof _0x189bd7===_0x2ccd88(0x22a))try{_0x189bd7=JSON[_0x2ccd88(0x202)](_0x189bd7);}catch(_0x403b19){}if(_0x189bd7&&_0x189bd7[_0xbb10b9])return _0x189bd7[_0xbb10b9];}let _0x30a55e=[];if(_0x1bef56===_0x2ccd88(0x26c))_0x30a55e=[{'s':_0x2ccd88(0x272),'t':_0x2ccd88(0x263)},{'s':'.1.TEMPERATURE','t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x2ccd88(0x279),'t':'.4.SET_TEMPERATURE'},{'s':_0x2ccd88(0x275),'t':_0x2ccd88(0x223)},{'s':_0x2ccd88(0x29f),'t':_0x2ccd88(0x252)},{'s':_0x2ccd88(0x29f),'t':'current_heating_setpoint'},{'s':_0x2ccd88(0x1e9),'t':'target_temperature'},{'s':_0x2ccd88(0x1e5),'t':_0x2ccd88(0x22d)},{'s':'Ist','t':_0x2ccd88(0x21a)},{'s':_0x2ccd88(0x1e9),'t':_0x2ccd88(0x26c)}];else _0x1bef56===_0x2ccd88(0x27a)&&(_0x30a55e=[{'s':_0x2ccd88(0x272),'t':_0x2ccd88(0x209)},{'s':_0x2ccd88(0x279),'t':_0x2ccd88(0x209)},{'s':_0x2ccd88(0x279),'t':_0x2ccd88(0x287)},{'s':_0x2ccd88(0x29f),'t':_0x2ccd88(0x23e)},{'s':_0x2ccd88(0x1e9),'t':_0x2ccd88(0x200)},{'s':_0x2ccd88(0x1e9),'t':'level'}]);for(const _0x4fe745 of _0x30a55e){if(_0xbb10b9[_0x2ccd88(0x282)](_0x4fe745['s'])){const _0x3d5c6f=_0xbb10b9[_0x2ccd88(0x21c)](_0x4fe745['s'],_0x4fe745['t']),_0x55cd9f=await _0x42d056[_0x2ccd88(0x20d)](_0x3d5c6f);if(_0x55cd9f)return _0x3d5c6f;}}try{const _0x19813d=_0xbb10b9[_0x2ccd88(0x1eb)]('.');if(_0x19813d[_0x2ccd88(0x258)]>0x2){const _0x209c67=_0x19813d[_0x2ccd88(0x235)](0x0,-0x1)[_0x2ccd88(0x206)]('.'),_0x4ad64f=await _0x42d056[_0x2ccd88(0x2a0)](_0x209c67+'.*'),_0x5d5df9=[],_0x544fec=_0xbb10b9[_0x2ccd88(0x1eb)](/[._]+/)['filter'](_0x5441d1=>![_0x2ccd88(0x20a),'0','hm-rpc','ist',_0x2ccd88(0x262),'temperature',_0x2ccd88(0x240),_0x2ccd88(0x219),_0x2ccd88(0x1e8),_0x2ccd88(0x208)][_0x2ccd88(0x282)](_0x5441d1[_0x2ccd88(0x24b)]()));for(const [_0x54a839,_0x5371a7]of Object['entries'](_0x4ad64f)){if(_0x54a839===_0xbb10b9)continue;if(_0x5371a7&&_0x5371a7[_0x2ccd88(0x1e4)]){const _0x32f20a=_0x54a839[_0x2ccd88(0x24b)](),_0x4edf35=(_0x5371a7[_0x2ccd88(0x1e4)][_0x2ccd88(0x23d)]||'')[_0x2ccd88(0x24b)](),_0x350f48=(_0x5371a7['common'][_0x2ccd88(0x29a)]||'')[_0x2ccd88(0x24b)]();let _0x4e74e2=![];if(_0x1bef56==='setpoint'&&_0x5371a7[_0x2ccd88(0x1e4)][_0x2ccd88(0x283)]===!![])_0x4e74e2=_0x32f20a[_0x2ccd88(0x282)](_0x2ccd88(0x28b))||_0x32f20a[_0x2ccd88(0x282)]('soll')||_0x32f20a[_0x2ccd88(0x282)](_0x2ccd88(0x229))||_0x4edf35[_0x2ccd88(0x282)](_0x2ccd88(0x1fb))||_0x4edf35[_0x2ccd88(0x282)]('thermostat.setpoint');else _0x1bef56==='valve'&&(_0x4e74e2=_0x32f20a[_0x2ccd88(0x282)](_0x2ccd88(0x2a2))||_0x32f20a[_0x2ccd88(0x282)](_0x2ccd88(0x27a))||_0x32f20a[_0x2ccd88(0x282)](_0x2ccd88(0x224))||_0x32f20a[_0x2ccd88(0x282)](_0x2ccd88(0x212))||_0x4edf35['includes']('level.valve')||_0x4edf35[_0x2ccd88(0x282)](_0x2ccd88(0x267))||_0x350f48[_0x2ccd88(0x282)]('%'));if(_0x4e74e2){const _0x2ff1b3=_0x54a839[_0x2ccd88(0x1eb)](/[._]+/)['map'](_0x557461=>_0x557461[_0x2ccd88(0x24b)]());let _0x32eca5=0x0;_0x544fec['forEach'](_0x337a2=>{const _0x353a1b=_0x2ccd88;if(_0x2ff1b3[_0x353a1b(0x282)](_0x337a2['toLowerCase']()))_0x32eca5++;}),_0x5d5df9[_0x2ccd88(0x20e)]({'id':_0x54a839,'score':_0x32eca5});}}}if(_0x5d5df9[_0x2ccd88(0x258)]>0x0){_0x5d5df9[_0x2ccd88(0x213)]((_0x53413f,_0x3ac85e)=>_0x3ac85e[_0x2ccd88(0x25f)]-_0x53413f[_0x2ccd88(0x25f)]);if(_0x5d5df9[0x0]['score']>0x0)return _0x5d5df9[0x0]['id'];}}}catch(_0x29975a){}return null;}async function scanThermostats(_0x28c2cb){const _0x4ee039=a1_0x2ecf13,_0x41f14c=_0x28c2cb[_0x4ee039(0x1e6)][_0x4ee039(0x201)]||[],_0x483b6e=[],_0x3e66e0=_0x41f14c['filter'](_0x5f3b9b=>_0x5f3b9b['id']&&_0x5f3b9b['id'][_0x4ee039(0x282)](_0x4ee039(0x1e9))||_0x5f3b9b[_0x4ee039(0x259)]&&['temperature','thermostat','sensor'][_0x4ee039(0x282)](_0x5f3b9b[_0x4ee039(0x259)])||_0x5f3b9b[_0x4ee039(0x21d)]&&_0x5f3b9b[_0x4ee039(0x21d)]['toLowerCase']()[_0x4ee039(0x282)](_0x4ee039(0x29d)));for(const _0x83471 of _0x3e66e0){const _0x2afaf4=await findRelatedId(_0x28c2cb,_0x83471['id'],'setpoint'),_0x1af433=await findRelatedId(_0x28c2cb,_0x83471['id'],'valve');let _0xb8cdf0='Nicht\x20gefunden',_0x33dd64=![],_0x3489f7=_0x28c2cb[_0x4ee039(0x1e6)][_0x4ee039(0x28f)]||{};if(typeof _0x3489f7===_0x4ee039(0x22a))try{_0x3489f7=JSON[_0x4ee039(0x202)](_0x3489f7);}catch(_0x7d8b52){}let _0x58c612=_0x28c2cb[_0x4ee039(0x1e6)][_0x4ee039(0x290)]||{};if(typeof _0x58c612===_0x4ee039(0x22a))try{_0x58c612=JSON['parse'](_0x58c612);}catch(_0x5d4c31){}if(_0x3489f7[_0x83471['id']]&&_0x3489f7[_0x83471['id']]===_0x2afaf4||_0x58c612[_0x83471['id']]&&_0x58c612[_0x83471['id']]===_0x1af433)_0xb8cdf0='Manuelles\x20Mapping',_0x33dd64=!![];else(_0x2afaf4||_0x1af433)&&(_0xb8cdf0='Auto-Erkennung');_0x483b6e[_0x4ee039(0x20e)]({'room':_0x83471['location']||_0x4ee039(0x249),'sensorId':_0x83471['id'],'setpointId':_0x2afaf4||'-','valveId':_0x1af433||'-','source':_0xb8cdf0,'isManual':_0x33dd64,'status':_0x2afaf4&&_0x1af433?_0x4ee039(0x225):_0x2afaf4?'OK':_0x4ee039(0x232)});}return _0x483b6e[_0x4ee039(0x213)]((_0x24b634,_0x2076f9)=>_0x24b634[_0x4ee039(0x236)][_0x4ee039(0x211)](_0x2076f9['room']));}async function updateSchedulePreview(_0x1901c6){const _0x40024f=a1_0x2ecf13;if(!_0x1901c6[_0x40024f(0x1e6)][_0x40024f(0x1f9)]||!_0x1901c6[_0x40024f(0x1e6)]['calendarInstance'])return;let _0x4dec4b={};try{const _0x26e4a0=await _0x1901c6[_0x40024f(0x1f8)](_0x40024f(0x260));if(_0x26e4a0&&_0x26e4a0[_0x40024f(0x244)])_0x4dec4b=JSON['parse'](_0x26e4a0[_0x40024f(0x244)]);}catch(_0x25993c){}const _0x3f1d78=[],_0x21839f=Date[_0x40024f(0x22b)](),_0x51f5a8=0x30*0x3c*0x3c*0x3e8;try{const _0x11e6ed=await _0x1901c6[_0x40024f(0x266)](_0x1901c6[_0x40024f(0x1e6)][_0x40024f(0x265)]+'.data.table');if(!_0x11e6ed||!_0x11e6ed[_0x40024f(0x244)])return;const _0x254273=JSON['parse'](_0x11e6ed[_0x40024f(0x244)]),_0x43f8b1=_0x1901c6[_0x40024f(0x1e6)]['calendarSelection']||[],_0x888be3=_0x1901c6['config']['devices']||[],_0x49fcc9=new Set();_0x888be3[_0x40024f(0x278)](_0x235d28=>{const _0x5ed02e=_0x40024f;if(_0x235d28[_0x5ed02e(0x233)])_0x49fcc9['add'](_0x235d28[_0x5ed02e(0x233)]);});for(const _0x1a7251 of _0x254273){if(_0x1a7251['_calName']&&_0x43f8b1['length']>0x0&&!_0x43f8b1[_0x40024f(0x282)](_0x1a7251[_0x40024f(0x2a1)]))continue;const _0x5817ba=_0x1a7251[_0x40024f(0x242)]||_0x1a7251['eventStart']||_0x1a7251[_0x40024f(0x20f)];if(!_0x5817ba)continue;const _0x586ff5=new Date(_0x5817ba),_0x38b322=_0x586ff5[_0x40024f(0x238)]();if(isNaN(_0x38b322))continue;if(_0x38b322<_0x21839f)continue;if(_0x38b322>_0x21839f+_0x51f5a8)continue;const _0x4eca1f=(_0x1a7251[_0x40024f(0x285)]||_0x1a7251[_0x40024f(0x28c)]||'')[_0x40024f(0x24b)]();let _0x4d97b2=![],_0x5887f8=[],_0x1be791=_0x1a7251[_0x40024f(0x285)]||_0x1a7251[_0x40024f(0x28c)]||_0x40024f(0x249);if(_0x4eca1f[_0x40024f(0x282)](_0x40024f(0x218))||_0x4eca1f[_0x40024f(0x282)](_0x40024f(0x297))||_0x4eca1f[_0x40024f(0x282)](_0x40024f(0x243)))_0x4d97b2=!![],_0x5887f8=Array[_0x40024f(0x26e)](_0x49fcc9);else for(const _0x3eb43e of _0x49fcc9){if(_0x4eca1f['includes'](_0x3eb43e['toLowerCase']()))_0x5887f8['push'](_0x3eb43e);}_0x5887f8[_0x40024f(0x258)]>0x0&&_0x5887f8[_0x40024f(0x278)](_0x41edb5=>{const _0x43753b=_0x40024f;let _0x895078=0x3c;if(_0x4d97b2){let _0x3a7db5=0x0;Object[_0x43753b(0x227)](_0x4dec4b)[_0x43753b(0x278)](_0x220160=>{if(_0x220160>_0x3a7db5)_0x3a7db5=_0x220160;}),_0x895078=_0x3a7db5>0x0?_0x3a7db5:0x78;}else _0x895078=getWarmupRobust(_0x4dec4b,_0x41edb5);const _0x2a945b=new Date(_0x38b322-_0x895078*0xea60);_0x3f1d78[_0x43753b(0x20e)]({'eventTime':_0x38b322,'triggerTime':_0x2a945b[_0x43753b(0x238)](),'room':_0x41edb5,'minutes':_0x895078,'reason':_0x1be791,'isGlobal':_0x4d97b2});});}}catch(_0x473dfb){}_0x3f1d78[_0x40024f(0x213)]((_0x27414e,_0x2ad6e5)=>_0x27414e['triggerTime']-_0x2ad6e5[_0x40024f(0x28a)]);const _0x41d61f=_0x3f1d78['slice'](0x0,0x5);await _0x1901c6['setStateAsync']('analysis.energy.schedulePreview',{'val':JSON[_0x40024f(0x25c)](_0x41d61f),'ack':!![]});}async function monitorEnforcements(_0x5685a0){const _0x3f5589=a1_0x2ecf13;try{const _0x11447d=_0x3f5589(0x1fc),_0x1a301d=await _0x5685a0['getStateAsync'](_0x11447d);if(!_0x1a301d||!_0x1a301d[_0x3f5589(0x244)])return;let _0x13bebb=[];try{_0x13bebb=JSON[_0x3f5589(0x202)](_0x1a301d[_0x3f5589(0x244)]);}catch(_0x27d16d){return;}if(!Array[_0x3f5589(0x280)](_0x13bebb)||_0x13bebb[_0x3f5589(0x258)]===0x0)return;const _0xb3d293=Date[_0x3f5589(0x22b)](),_0x47b34d=_0x5685a0[_0x3f5589(0x1e6)][_0x3f5589(0x201)]||[];let _0x59aab0=![];for(let _0x475d83=_0x13bebb['length']-0x1;_0x475d83>=0x0;_0x475d83--){const _0x266294=_0x13bebb[_0x475d83];if(_0xb3d293>=_0x266294['until']){_0x5685a0[_0x3f5589(0x27f)]['info'](_0x3f5589(0x277)+_0x266294[_0x3f5589(0x236)]+_0x3f5589(0x257)),_0x13bebb[_0x3f5589(0x299)](_0x475d83,0x1),_0x59aab0=!![];continue;}const _0xdae56d=_0x47b34d[_0x3f5589(0x1ee)](_0x1ca0da=>normalize(_0x1ca0da[_0x3f5589(0x233)])===normalize(_0x266294[_0x3f5589(0x236)])&&(_0x1ca0da[_0x3f5589(0x259)]===_0x3f5589(0x1e9)||_0x1ca0da[_0x3f5589(0x259)]===_0x3f5589(0x246)));if(_0xdae56d){const _0xc9b04c=await findRelatedId(_0x5685a0,_0xdae56d['id'],_0x3f5589(0x26c));if(_0xc9b04c){const _0xeeb84b=await _0x5685a0[_0x3f5589(0x266)](_0xc9b04c);_0xeeb84b&&typeof _0xeeb84b['val']===_0x3f5589(0x228)&&(_0xeeb84b[_0x3f5589(0x244)]<0xf&&(_0x5685a0[_0x3f5589(0x27f)][_0x3f5589(0x205)](_0x3f5589(0x22c)+_0x266294[_0x3f5589(0x236)]+_0x3f5589(0x220)+_0xeeb84b[_0x3f5589(0x244)]+_0x3f5589(0x29e)+_0x266294[_0x3f5589(0x229)]+_0x3f5589(0x270)),await _0x5685a0[_0x3f5589(0x1fd)](_0xc9b04c,_0x266294[_0x3f5589(0x229)]),await logAutomationAction(_0x5685a0,_0x3f5589(0x273)+_0x266294[_0x3f5589(0x236)]+':\x20'+_0xeeb84b['val']+_0x3f5589(0x1f1)+_0x266294[_0x3f5589(0x229)]+_0x3f5589(0x239))));}}}_0x59aab0&&await _0x5685a0['setStateAsync'](_0x11447d,{'val':JSON[_0x3f5589(0x25c)](_0x13bebb),'ack':!![]});}catch(_0x4d02d1){_0x5685a0['log'][_0x3f5589(0x207)](_0x3f5589(0x26d)+_0x4d02d1[_0x3f5589(0x261)]);}}async function checkCalendarTriggers(_0x338e45){const _0x35ac7d=a1_0x2ecf13;if(!_0x338e45[_0x35ac7d(0x1e6)][_0x35ac7d(0x1f9)]||!_0x338e45['config'][_0x35ac7d(0x265)])return;await updateSchedulePreview(_0x338e45);let _0xe647c4={},_0x3d2c7c={};try{const _0x5d78fe=await _0x338e45[_0x35ac7d(0x1f8)](_0x35ac7d(0x260));if(_0x5d78fe&&_0x5d78fe[_0x35ac7d(0x244)])_0xe647c4=JSON[_0x35ac7d(0x202)](_0x5d78fe[_0x35ac7d(0x244)]);const _0x22040d=await _0x338e45[_0x35ac7d(0x1f8)]('analysis.energy.warmupSources');if(_0x22040d&&_0x22040d[_0x35ac7d(0x244)])_0x3d2c7c=JSON['parse'](_0x22040d[_0x35ac7d(0x244)]);}catch(_0x48b92e){}let _0x55a320={'default':0x15};try{const _0xe4768e=await _0x338e45[_0x35ac7d(0x1f8)](_0x35ac7d(0x28e));if(_0xe4768e&&_0xe4768e[_0x35ac7d(0x244)])_0x55a320=JSON[_0x35ac7d(0x202)](_0xe4768e[_0x35ac7d(0x244)]);}catch(_0x1c1e66){}let _0x2f4783=[];try{const _0xad0fdc=await _0x338e45[_0x35ac7d(0x1f8)](_0x35ac7d(0x1fc));if(_0xad0fdc&&_0xad0fdc[_0x35ac7d(0x244)])_0x2f4783=JSON[_0x35ac7d(0x202)](_0xad0fdc['val']);}catch(_0x912ed6){}try{const _0x3902f2=await _0x338e45[_0x35ac7d(0x266)](_0x338e45[_0x35ac7d(0x1e6)][_0x35ac7d(0x265)]+_0x35ac7d(0x1e3));if(!_0x3902f2||!_0x3902f2[_0x35ac7d(0x244)])return;const _0x504400=JSON[_0x35ac7d(0x202)](_0x3902f2['val']),_0x834962=Date[_0x35ac7d(0x22b)](),_0x1956d5=_0x338e45[_0x35ac7d(0x1e6)][_0x35ac7d(0x201)]||[],_0x47e073=_0x338e45[_0x35ac7d(0x1e6)]['calendarSelection']||[];let _0x5c7509=![];for(const _0x2b6300 of _0x504400){if(_0x2b6300[_0x35ac7d(0x2a1)]&&_0x47e073['length']>0x0&&!_0x47e073[_0x35ac7d(0x282)](_0x2b6300[_0x35ac7d(0x2a1)]))continue;const _0x21ee3d=_0x2b6300[_0x35ac7d(0x242)]||_0x2b6300[_0x35ac7d(0x286)]||_0x2b6300[_0x35ac7d(0x20f)];if(!_0x21ee3d)continue;const _0x2f42ce=new Date(_0x21ee3d);if(isNaN(_0x2f42ce[_0x35ac7d(0x238)]()))continue;const _0x24ebe7=(_0x2b6300[_0x35ac7d(0x285)]||_0x2b6300['summary']||'')[_0x35ac7d(0x24b)]();if(_0x24ebe7[_0x35ac7d(0x282)](_0x35ac7d(0x218))||_0x24ebe7[_0x35ac7d(0x282)](_0x35ac7d(0x297))||_0x24ebe7[_0x35ac7d(0x282)](_0x35ac7d(0x243))){let _0x266c5c=0x0;Object[_0x35ac7d(0x227)](_0xe647c4)[_0x35ac7d(0x278)](_0x892a46=>{if(_0x892a46>_0x266c5c)_0x266c5c=_0x892a46;});if(_0x266c5c===0x0)_0x266c5c=0x78;const _0x4083a2=_0x2f42ce[_0x35ac7d(0x238)]()-_0x266c5c*0xea60;_0x834962>=_0x4083a2&&_0x834962<_0x2f42ce[_0x35ac7d(0x238)]()&&(_0x338e45[_0x35ac7d(0x23c)]!=='normal'&&(_0x338e45[_0x35ac7d(0x27f)][_0x35ac7d(0x1f2)](_0x35ac7d(0x1f5)+_0x266c5c+'\x20min).'),await _0x338e45[_0x35ac7d(0x1ff)]('system.mode',{'val':'normal','ack':![]})));}for(const _0x275c2e of _0x1956d5){if(_0x275c2e[_0x35ac7d(0x233)]){const _0xb814ca=_0x275c2e[_0x35ac7d(0x233)][_0x35ac7d(0x24b)](),_0x63fb5d=(_0x275c2e[_0x35ac7d(0x21d)]||'')['toLowerCase']();let _0x56808b=_0x24ebe7['includes'](_0xb814ca);!_0x56808b&&_0x63fb5d[_0x35ac7d(0x258)]>0x3&&_0x24ebe7[_0x35ac7d(0x282)](_0x63fb5d)&&(_0x56808b=!![]);if(_0x56808b){const _0x2b7b3f=getWarmupRobust(_0xe647c4,_0x275c2e['location']),_0x12f41a=_0x3d2c7c[_0x275c2e[_0x35ac7d(0x233)]]||_0x35ac7d(0x25d),_0x1ab4e3=_0x2f42ce[_0x35ac7d(0x238)]()-_0x2b7b3f*0xea60;if(_0x834962>=_0x1ab4e3&&_0x834962<_0x2f42ce['getTime']()){const _0x1b23ea=lastActions[_0x35ac7d(0x29c)+_0x275c2e[_0x35ac7d(0x233)]];if(_0x1b23ea&&_0x834962-_0x1b23ea<CAL_COOLDOWN_MS)continue;const _0x47511f=await findRelatedId(_0x338e45,_0x275c2e['id'],_0x35ac7d(0x26c));if(_0x47511f){let _0x281eb7=_0x55a320[_0x275c2e[_0x35ac7d(0x233)]];if(_0x281eb7===undefined)_0x281eb7=_0x55a320[_0x35ac7d(0x216)];if(_0x281eb7===undefined)_0x281eb7=0x15;const _0x1bc867=await _0x338e45[_0x35ac7d(0x266)](_0x47511f);if(_0x1bc867&&typeof _0x1bc867[_0x35ac7d(0x244)]===_0x35ac7d(0x228)&&_0x1bc867[_0x35ac7d(0x244)]<_0x281eb7-0.5){_0x338e45['log'][_0x35ac7d(0x1f2)]('üìÖ\x20SMART\x20SCHEDULE\x20['+_0x12f41a+_0x35ac7d(0x214)+_0x275c2e[_0x35ac7d(0x233)]+'\x27\x20(Match:\x20'+_0x24ebe7+_0x35ac7d(0x204)+_0x281eb7+'¬∞C\x20(Vorlauf:\x20'+_0x2b7b3f+_0x35ac7d(0x22f)),await _0x338e45[_0x35ac7d(0x1fd)](_0x47511f,_0x281eb7),await logAutomationAction(_0x338e45,'[CAL]\x20'+_0x275c2e[_0x35ac7d(0x233)]+_0x35ac7d(0x274)+_0x281eb7+_0x35ac7d(0x1f7)+_0x12f41a+')'),lastActions[_0x35ac7d(0x29c)+_0x275c2e[_0x35ac7d(0x233)]]=_0x834962;const _0x156e4a=_0x2f4783[_0x35ac7d(0x291)](_0x2d8f3f=>_0x2d8f3f[_0x35ac7d(0x236)]===_0x275c2e[_0x35ac7d(0x233)]);if(_0x156e4a!==-0x1)_0x2f4783[_0x35ac7d(0x299)](_0x156e4a,0x1);_0x2f4783[_0x35ac7d(0x20e)]({'room':_0x275c2e[_0x35ac7d(0x233)],'target':_0x281eb7,'until':_0x2f42ce[_0x35ac7d(0x238)]()}),_0x5c7509=!![];}}}}}}}_0x5c7509&&await _0x338e45[_0x35ac7d(0x1ff)](_0x35ac7d(0x1fc),{'val':JSON[_0x35ac7d(0x25c)](_0x2f4783),'ack':!![]});}catch(_0x45c02d){_0x338e45['log'][_0x35ac7d(0x205)](_0x35ac7d(0x21f)+_0x45c02d[_0x35ac7d(0x261)]);}}async function manageMpcIntervention(_0x32ff12,_0x50deb4,_0x1a77e5){const _0x32aa31=a1_0x2ecf13;try{const _0x55d0dc='analysis.energy.mpcActiveInterventions',_0x51ae05=await _0x32ff12[_0x32aa31(0x1f8)](_0x55d0dc);let _0xab4e94=[];if(_0x51ae05&&_0x51ae05['val'])try{_0xab4e94=JSON[_0x32aa31(0x202)](_0x51ae05['val']);}catch(_0x35a524){}const _0x521f2a=_0xab4e94[_0x32aa31(0x221)](_0x50deb4);if(_0x1a77e5===_0x32aa31(0x226))_0x521f2a===-0x1&&(_0xab4e94['push'](_0x50deb4),await _0x32ff12[_0x32aa31(0x1ff)](_0x55d0dc,{'val':JSON[_0x32aa31(0x25c)](_0xab4e94),'ack':!![]}));else _0x1a77e5===_0x32aa31(0x276)&&(_0x521f2a!==-0x1&&(_0xab4e94[_0x32aa31(0x299)](_0x521f2a,0x1),await _0x32ff12['setStateAsync'](_0x55d0dc,{'val':JSON[_0x32aa31(0x25c)](_0xab4e94),'ack':!![]})));}catch(_0x3c38ea){}}async function cleanupGhostInterventions(_0x5b6379){const _0x47aca6=a1_0x2ecf13;try{const _0x4f9d94=_0x47aca6(0x237),_0x30b3e5=await _0x5b6379[_0x47aca6(0x1f8)](_0x4f9d94);if(!_0x30b3e5||!_0x30b3e5['val'])return;const _0x5060d5=JSON[_0x47aca6(0x202)](_0x30b3e5[_0x47aca6(0x244)]);if(!Array['isArray'](_0x5060d5)||_0x5060d5[_0x47aca6(0x258)]===0x0)return;let _0x40908b={'default':0x15};try{const _0x3ae07a=await _0x5b6379['getStateAsync'](_0x47aca6(0x28e));if(_0x3ae07a&&_0x3ae07a[_0x47aca6(0x244)])_0x40908b=JSON[_0x47aca6(0x202)](_0x3ae07a[_0x47aca6(0x244)]);}catch(_0x14decd){}let _0x56636f=[];try{const _0x27881f=await _0x5b6379[_0x47aca6(0x1f8)](_0x47aca6(0x251));if(_0x27881f&&_0x27881f[_0x47aca6(0x244)])_0x56636f=JSON[_0x47aca6(0x202)](_0x27881f[_0x47aca6(0x244)]);}catch(_0x417409){}let _0x472d10={},_0x2bd383=![];try{const _0x4f28d6=await _0x5b6379[_0x47aca6(0x1f8)]('analysis.energy.rlPenalties');if(_0x4f28d6&&_0x4f28d6[_0x47aca6(0x244)])_0x472d10=JSON[_0x47aca6(0x202)](_0x4f28d6[_0x47aca6(0x244)]);}catch(_0x218679){}if(_0x472d10['_meta']){const _0x3a3153=Date['now']();for(const [_0x2b0d3d,_0x2a2a79]of Object[_0x47aca6(0x1f4)](_0x472d10['_meta'])){_0x3a3153-_0x2a2a79>PENALTY_TTL&&(delete _0x472d10[_0x2b0d3d],delete _0x472d10[_0x47aca6(0x26b)][_0x2b0d3d],_0x2bd383=!![],_0x5b6379[_0x47aca6(0x27f)][_0x47aca6(0x1f2)]('üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27'+_0x2b0d3d+_0x47aca6(0x295)));}}const _0x32d69c=_0x5b6379['config'][_0x47aca6(0x201)]||[];let _0x2f0d99=![];for(let _0x156cba=_0x5060d5[_0x47aca6(0x258)]-0x1;_0x156cba>=0x0;_0x156cba--){const _0x3ea59e=_0x5060d5[_0x156cba],_0x1b51a0=_0x32d69c[_0x47aca6(0x1ee)](_0xcf7ac6=>normalize(_0xcf7ac6[_0x47aca6(0x233)])===normalize(_0x3ea59e)&&(_0xcf7ac6[_0x47aca6(0x259)]===_0x47aca6(0x1e9)||_0xcf7ac6[_0x47aca6(0x259)]===_0x47aca6(0x246)));if(!_0x1b51a0){_0x5b6379[_0x47aca6(0x27f)][_0x47aca6(0x205)]('üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27'+_0x3ea59e+_0x47aca6(0x269)),_0x5060d5[_0x47aca6(0x299)](_0x156cba,0x1),_0x2f0d99=!![];continue;}if(_0x1b51a0){const _0x3caac6=await findRelatedId(_0x5b6379,_0x1b51a0['id'],_0x47aca6(0x26c)),_0x3dab8c=await _0x5b6379['getForeignStateAsync'](_0x1b51a0['id']);if(_0x3caac6){const _0x3de80e=await _0x5b6379[_0x47aca6(0x266)](_0x3caac6);if(_0x3de80e&&typeof _0x3de80e[_0x47aca6(0x244)]===_0x47aca6(0x228)){let _0x3f81df=![],_0x19b82a='';Math['abs'](_0x3de80e[_0x47aca6(0x244)]-ECO_TEMP)>0.5&&(_0x3f81df=!![],_0x19b82a=_0x47aca6(0x24a));if(!_0x3f81df&&_0x3dab8c&&typeof _0x3dab8c[_0x47aca6(0x244)]===_0x47aca6(0x228)){const _0x2a8bee=_0x40908b[_0x3ea59e]||_0x40908b[_0x47aca6(0x216)]||0x15;_0x3dab8c[_0x47aca6(0x244)]<_0x2a8bee+0.2&&(_0x3f81df=!![],_0x19b82a=_0x47aca6(0x1f6));}if(_0x3f81df){if(_0x19b82a===_0x47aca6(0x24a)){_0x5b6379[_0x47aca6(0x27f)][_0x47aca6(0x1f2)](_0x47aca6(0x230)+_0x3ea59e+_0x47aca6(0x215)+_0x3de80e[_0x47aca6(0x244)]+'¬∞C\x20(nicht\x20'+ECO_TEMP+_0x47aca6(0x27d));const _0x30c190=lastActions[_0x47aca6(0x29c)+_0x3ea59e],_0x338443=_0x30c190&&Date[_0x47aca6(0x22b)]()-_0x30c190<0x2*0x3c*0x3e8;if(!_0x338443&&_0x3de80e[_0x47aca6(0x244)]>ECO_TEMP+0.5){_0x5b6379['sendToPythonWrapper']&&(_0x5b6379['log'][_0x47aca6(0x1f2)](_0x47aca6(0x293)+_0x3ea59e+_0x47aca6(0x25a)),_0x5b6379[_0x47aca6(0x23b)](_0x47aca6(0x24c),{'room':_0x3ea59e}));const _0x7da180=_0x3ea59e+'_'+new Date()['getHours']();if(!_0x472d10[_0x7da180]){_0x472d10[_0x7da180]=0x1;if(!_0x472d10[_0x47aca6(0x26b)])_0x472d10[_0x47aca6(0x26b)]={};_0x472d10['_meta'][_0x7da180]=Date['now'](),_0x2bd383=!![];}}else _0x338443&&_0x5b6379[_0x47aca6(0x27f)][_0x47aca6(0x1f2)](_0x47aca6(0x294)+_0x3ea59e+_0x47aca6(0x1fe));}else{if(_0x19b82a===_0x47aca6(0x1f6)){let _0x3584a2=![];if(_0x56636f[_0x47aca6(0x1ee)](_0x23f0e8=>_0x23f0e8[_0x47aca6(0x236)]===_0x3ea59e))_0x3584a2=!![];const _0x5afb8c=_0x32d69c[_0x47aca6(0x1e2)](_0xe78679=>normalize(_0xe78679[_0x47aca6(0x233)])===normalize(_0x3ea59e)&&(_0xe78679[_0x47aca6(0x259)]===_0x47aca6(0x23a)||_0xe78679[_0x47aca6(0x259)]===_0x47aca6(0x219)||_0xe78679[_0x47aca6(0x259)]==='contact'));for(const _0x4e3ef9 of _0x5afb8c){try{const _0x4f0e3e=await _0x5b6379['getForeignStateAsync'](_0x4e3ef9['id']);if(_0x4f0e3e&&(_0x4f0e3e[_0x47aca6(0x244)]===!![]||_0x4f0e3e['val']===0x1||String(_0x4f0e3e[_0x47aca6(0x244)])[_0x47aca6(0x24b)]()===_0x47aca6(0x27e)))_0x3584a2=!![];}catch(_0x7b36aa){}}if(_0x3584a2)_0x5b6379['log'][_0x47aca6(0x1f2)](_0x47aca6(0x289)+_0x3ea59e+'\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.');else{const _0x53bff5=_0x40908b[_0x3ea59e]||_0x40908b[_0x47aca6(0x216)]||0x15;_0x5b6379[_0x47aca6(0x27f)]['info'](_0x47aca6(0x250)+_0x3ea59e+_0x47aca6(0x20b)+_0x3dab8c[_0x47aca6(0x244)]+_0x47aca6(0x29b)+(_0x53bff5+0.2)+_0x47aca6(0x1e1)),await _0x5b6379[_0x47aca6(0x1fd)](_0x3caac6,_0x53bff5),await logAutomationAction(_0x5b6379,_0x47aca6(0x254)+_0x3ea59e+_0x47aca6(0x24f)+_0x53bff5+'¬∞C'),lastActions[_0x47aca6(0x284)+_0x3ea59e]=Date['now']();}}}_0x5060d5[_0x47aca6(0x299)](_0x156cba,0x1),_0x2f0d99=!![];}}}}}_0x2f0d99&&await _0x5b6379[_0x47aca6(0x1ff)](_0x4f9d94,{'val':JSON[_0x47aca6(0x25c)](_0x5060d5),'ack':!![]}),_0x2bd383&&await _0x5b6379['setStateAsync'](_0x47aca6(0x1e7),{'val':JSON[_0x47aca6(0x25c)](_0x472d10),'ack':!![]});}catch(_0x282736){}}async function applyEnergySavings(_0x42ea19,_0x488240){const _0x59d52a=a1_0x2ecf13;await cleanupGhostInterventions(_0x42ea19);if(!_0x488240||_0x488240['length']===0x0)return;const _0x1f83ae=_0x42ea19['config'][_0x59d52a(0x201)]||[],_0x5ddf75=Date[_0x59d52a(0x22b)]();for(const _0x5dda76 of _0x488240){const _0x584bf9=_0x5dda76[_0x59d52a(0x236)],_0x52efd1=_0x5dda76['minutes_safe'],_0x1bcf1a=_0x5dda76[_0x59d52a(0x229)]||0x15;if(lastActions[_0x59d52a(0x284)+_0x584bf9]&&_0x5ddf75-lastActions[_0x59d52a(0x284)+_0x584bf9]<RESCUE_LOCK_MS)continue;const _0x3696cf=_0x1f83ae[_0x59d52a(0x1ee)](_0x4d0917=>normalize(_0x4d0917[_0x59d52a(0x233)])===normalize(_0x584bf9)&&(_0x4d0917['type']===_0x59d52a(0x1e9)||_0x4d0917['type']===_0x59d52a(0x246)));if(!_0x3696cf)continue;const _0x5a1db7=await findRelatedId(_0x42ea19,_0x3696cf['id'],_0x59d52a(0x26c));if(_0x5a1db7){if(lastActions[_0x59d52a(0x296)+_0x584bf9]&&_0x5ddf75-lastActions[_0x59d52a(0x296)+_0x584bf9]<0x1e*0x3c*0x3e8)continue;const _0x2fccf8=await _0x42ea19['getForeignStateAsync'](_0x5a1db7);if(_0x2fccf8&&typeof _0x2fccf8[_0x59d52a(0x244)]===_0x59d52a(0x228)){const _0x3352d6=_0x2fccf8[_0x59d52a(0x244)];_0x3352d6!==ECO_TEMP&&await manageMpcIntervention(_0x42ea19,_0x584bf9,_0x59d52a(0x276));if(_0x52efd1>0x1e)_0x3352d6>ECO_TEMP+0.5&&(_0x42ea19[_0x59d52a(0x27f)][_0x59d52a(0x1f2)](_0x59d52a(0x288)+_0x584bf9+'\x20auf\x20'+ECO_TEMP+'¬∞C!\x20(Puffer:\x20'+_0x52efd1+'\x20min)'),await _0x42ea19[_0x59d52a(0x1fd)](_0x5a1db7,ECO_TEMP),await manageMpcIntervention(_0x42ea19,_0x584bf9,_0x59d52a(0x226)),lastActions['mpc_'+_0x584bf9]=_0x5ddf75,await logAutomationAction(_0x42ea19,'[MPC]\x20'+_0x584bf9+_0x59d52a(0x23f)+ECO_TEMP+'¬∞C'));else _0x52efd1<=0xf&&(_0x3352d6<_0x1bcf1a&&(_0x42ea19[_0x59d52a(0x27f)]['info'](_0x59d52a(0x256)+_0x584bf9+_0x59d52a(0x1f3)+_0x1bcf1a+_0x59d52a(0x281)),await _0x42ea19[_0x59d52a(0x1fd)](_0x5a1db7,_0x1bcf1a),await manageMpcIntervention(_0x42ea19,_0x584bf9,'remove'),lastActions['mpc_'+_0x584bf9]=_0x5ddf75,await logAutomationAction(_0x42ea19,_0x59d52a(0x292)+_0x584bf9+_0x59d52a(0x25e)+_0x1bcf1a+'¬∞C')));}}else _0x42ea19[_0x59d52a(0x27f)][_0x59d52a(0x205)](_0x59d52a(0x241)+_0x584bf9+_0x59d52a(0x264));}}module[a1_0x2ecf13(0x20c)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};