const a1_0x4922b3=a1_0x5334;(function(_0x14b86b,_0x3bda56){const _0x45876c=a1_0x5334,_0x17d98c=_0x14b86b();while(!![]){try{const _0x116cf2=-parseInt(_0x45876c(0xf7))/0x1+-parseInt(_0x45876c(0x88))/0x2*(-parseInt(_0x45876c(0xdc))/0x3)+parseInt(_0x45876c(0x102))/0x4+parseInt(_0x45876c(0x134))/0x5*(-parseInt(_0x45876c(0xe8))/0x6)+parseInt(_0x45876c(0xe1))/0x7*(-parseInt(_0x45876c(0x12b))/0x8)+parseInt(_0x45876c(0xd0))/0x9*(parseInt(_0x45876c(0xb0))/0xa)+-parseInt(_0x45876c(0xf5))/0xb*(-parseInt(_0x45876c(0xd5))/0xc);if(_0x116cf2===_0x3bda56)break;else _0x17d98c['push'](_0x17d98c['shift']());}catch(_0x1a4c1d){_0x17d98c['push'](_0x17d98c['shift']());}}}(a1_0x560a,0x9bc61));const a1_0x5d7baf=(function(){let _0xa5c95f=!![];return function(_0x3d14b5,_0x216837){const _0x3302e7=_0xa5c95f?function(){const _0x493709=a1_0x5334;if(_0x216837){const _0x4b52d2=_0x216837[_0x493709(0x131)](_0x3d14b5,arguments);return _0x216837=null,_0x4b52d2;}}:function(){};return _0xa5c95f=![],_0x3302e7;};}()),a1_0x445724=a1_0x5d7baf(this,function(){const _0x1bc7e9=a1_0x5334;return a1_0x445724[_0x1bc7e9(0x12f)]()[_0x1bc7e9(0x13f)](_0x1bc7e9(0x95))[_0x1bc7e9(0x12f)]()[_0x1bc7e9(0x137)](a1_0x445724)[_0x1bc7e9(0x13f)](_0x1bc7e9(0x95));});a1_0x445724();'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x303ec5){const _0x27e4f0=a1_0x5334;if(!_0x303ec5)return'';return _0x303ec5[_0x27e4f0(0x80)]()[_0x27e4f0(0xcf)](/\s+/g,'')['trim']();}function getWarmupRobust(_0x5f1099,_0x37fabf){const _0x4f8e67=a1_0x5334;if(!_0x5f1099||!_0x37fabf)return 0x3c;if(_0x5f1099[_0x37fabf]!==undefined)return _0x5f1099[_0x37fabf];const _0x280eab=_0x37fabf[_0x4f8e67(0x80)]()[_0x4f8e67(0xcf)](/Ã¤/g,'ae')[_0x4f8e67(0xcf)](/Ã¶/g,'oe')['replace'](/Ã¼/g,'ue')[_0x4f8e67(0xcf)](/ÃŸ/g,'ss')[_0x4f8e67(0xcf)](/\s+/g,'_')[_0x4f8e67(0xcf)](/[^a-z0-9_]/g,'');if(_0x5f1099[_0x280eab]!==undefined)return _0x5f1099[_0x280eab];return 0x3c;}async function logAutomationAction(_0x57f117,_0x52ba46){const _0x374cb6=a1_0x5334;await _0x57f117['setStateAsync'](_0x374cb6(0xdd),{'val':_0x52ba46,'ack':!![]});try{const _0x240789=_0x374cb6(0x11d),_0x557714=await _0x57f117[_0x374cb6(0x118)](_0x240789);let _0xa45ef2=[];if(_0x557714&&_0x557714['val'])try{_0xa45ef2=JSON[_0x374cb6(0x9d)](_0x557714[_0x374cb6(0xe3)]);}catch(_0x23e035){}_0xa45ef2[_0x374cb6(0xa8)]({'ts':Date[_0x374cb6(0x122)](),'msg':_0x52ba46});if(_0xa45ef2[_0x374cb6(0xe0)]>0x32)_0xa45ef2=_0xa45ef2[_0x374cb6(0xf0)](0x0,0x32);await _0x57f117['setStateAsync'](_0x240789,{'val':JSON['stringify'](_0xa45ef2),'ack':!![]});}catch(_0x146627){}}async function handlePrediction(_0x1ef12d,_0x4683ad,_0x51c12c){const _0x534543=a1_0x5334;if(!_0x4683ad||_0x4683ad===_0x534543(0xdb))return;let _0x111a68=_0x534543(0x8a),_0x5572b7=0.6;try{const _0x1dd131=await _0x1ef12d[_0x534543(0x118)](_0x534543(0xf4));if(_0x1dd131&&_0x1dd131[_0x534543(0xe3)])_0x111a68=_0x1dd131[_0x534543(0xe3)];const _0x5b8655=await _0x1ef12d[_0x534543(0x118)](_0x534543(0x125));if(_0x5b8655&&_0x5b8655[_0x534543(0xe3)])_0x5572b7=_0x5b8655[_0x534543(0xe3)];}catch(_0x151377){}if(_0x111a68===_0x534543(0x8a)||_0x51c12c<_0x5572b7)return;const _0x650b1=Date[_0x534543(0x122)]();if(lastActions[_0x4683ad]&&_0x650b1-lastActions[_0x4683ad]<COOLDOWN_MS)return;const _0x14632a=_0x1ef12d[_0x534543(0xb9)][_0x534543(0x148)]||[],_0x345d51=normalize(_0x4683ad),_0xead188=_0x14632a[_0x534543(0xf3)](_0x5cb5ae=>normalize(_0x5cb5ae[_0x534543(0xd8)])===_0x345d51&&(_0x5cb5ae['type']===_0x534543(0x135)||_0x5cb5ae[_0x534543(0xbc)]===_0x534543(0x8e)||_0x5cb5ae[_0x534543(0xbc)]==='switch'));if(!_0xead188)return;const _0x20ac50=await aiAgent[_0x534543(0xd6)](_0x1ef12d,_0x4683ad,_0xead188[_0x534543(0xbf)],_0x51c12c);if(!_0x20ac50[_0x534543(0x13d)])return;const _0x4b2d36=_0x534543(0x110)+_0x4683ad+_0x534543(0xdf)+_0xead188[_0x534543(0xbf)]+'\x20('+_0x20ac50[_0x534543(0x10a)]+')';await logAutomationAction(_0x1ef12d,'['+_0x111a68['toUpperCase']()+']\x20'+_0x4b2d36);if(_0x111a68===_0x534543(0x113)){const _0xa600e=await _0x1ef12d[_0x534543(0x106)](_0xead188['id']);(!_0xa600e||!_0xa600e[_0x534543(0xe3)]&&_0xa600e[_0x534543(0xe3)]!==!![])&&await _0x1ef12d[_0x534543(0x10b)](_0xead188['id'],!![]),lastActions[_0x4683ad]=_0x650b1;}}async function findRelatedId(_0x296b56,_0x3fb7b0,_0xb42ab6=a1_0x4922b3(0xca)){const _0x4cbe82=a1_0x4922b3;if(_0xb42ab6==='setpoint'&&_0x296b56[_0x4cbe82(0xb9)][_0x4cbe82(0xba)]){let _0x23c796=_0x296b56[_0x4cbe82(0xb9)][_0x4cbe82(0xba)];if(typeof _0x23c796===_0x4cbe82(0x10c))try{_0x23c796=JSON[_0x4cbe82(0x9d)](_0x23c796);}catch(_0x3ecaee){}if(_0x23c796&&_0x23c796[_0x3fb7b0])return _0x23c796[_0x3fb7b0];}if(_0xb42ab6===_0x4cbe82(0xd9)&&_0x296b56['config'][_0x4cbe82(0xb2)]){let _0x48b8a9=_0x296b56['config'][_0x4cbe82(0xb2)];if(typeof _0x48b8a9===_0x4cbe82(0x10c))try{_0x48b8a9=JSON[_0x4cbe82(0x9d)](_0x48b8a9);}catch(_0xe11381){}if(_0x48b8a9&&_0x48b8a9[_0x3fb7b0])return _0x48b8a9[_0x3fb7b0];}let _0x7b0159=[];if(_0xb42ab6===_0x4cbe82(0xca))_0x7b0159=[{'s':_0x4cbe82(0x9a),'t':_0x4cbe82(0xb1)},{'s':_0x4cbe82(0xc1),'t':_0x4cbe82(0xb1)},{'s':'.1.TEMPERATURE','t':_0x4cbe82(0x12c)},{'s':_0x4cbe82(0x9b),'t':_0x4cbe82(0xee)},{'s':_0x4cbe82(0x14e),'t':'occupied_heating_setpoint'},{'s':_0x4cbe82(0x14e),'t':_0x4cbe82(0xa7)},{'s':_0x4cbe82(0x9c),'t':_0x4cbe82(0xcb)},{'s':_0x4cbe82(0xcc),'t':_0x4cbe82(0x99)},{'s':_0x4cbe82(0x133),'t':'Soll'},{'s':'temperature','t':'setpoint'}];else _0xb42ab6==='valve'&&(_0x7b0159=[{'s':_0x4cbe82(0x9a),'t':_0x4cbe82(0xc0)},{'s':_0x4cbe82(0xc1),'t':_0x4cbe82(0xc0)},{'s':_0x4cbe82(0xc1),'t':_0x4cbe82(0xd7)},{'s':_0x4cbe82(0x14e),'t':'pi_heating_demand'},{'s':_0x4cbe82(0x9c),'t':_0x4cbe82(0xc3)},{'s':_0x4cbe82(0x9c),'t':_0x4cbe82(0xbe)}]);for(const _0x3efc5c of _0x7b0159){if(_0x3fb7b0[_0x4cbe82(0x87)](_0x3efc5c['s'])){const _0x1bf644=_0x3fb7b0[_0x4cbe82(0xcf)](_0x3efc5c['s'],_0x3efc5c['t']),_0xe883e7=await _0x296b56['getForeignObjectAsync'](_0x1bf644);if(_0xe883e7)return _0x1bf644;}}try{const _0x59b2a9=_0x3fb7b0[_0x4cbe82(0x114)]('.');if(_0x59b2a9[_0x4cbe82(0xe0)]>0x2){const _0xc4de77=_0x59b2a9[_0x4cbe82(0xf0)](0x0,-0x1)[_0x4cbe82(0x107)]('.'),_0x3d73ee=await _0x296b56[_0x4cbe82(0x14f)](_0xc4de77+'.*'),_0x26cb92=[],_0x2d4e49=_0x3fb7b0[_0x4cbe82(0x114)](/[._]+/)[_0x4cbe82(0xa5)](_0x58ca7c=>!['openknx','0',_0x4cbe82(0xc7),_0x4cbe82(0x100),'wert',_0x4cbe82(0x9c),_0x4cbe82(0xac),_0x4cbe82(0xb5),_0x4cbe82(0x14b),_0x4cbe82(0xda)][_0x4cbe82(0x87)](_0x58ca7c[_0x4cbe82(0x80)]()));for(const [_0x43eafe,_0x1ede85]of Object[_0x4cbe82(0xec)](_0x3d73ee)){if(_0x43eafe===_0x3fb7b0)continue;if(_0x1ede85&&_0x1ede85[_0x4cbe82(0x12d)]){const _0xa7cbad=_0x43eafe[_0x4cbe82(0x80)](),_0x15d625=(_0x1ede85['common'][_0x4cbe82(0x103)]||'')[_0x4cbe82(0x80)](),_0x97e736=(_0x1ede85[_0x4cbe82(0x12d)][_0x4cbe82(0x91)]||'')[_0x4cbe82(0x80)]();let _0x3ec86d=![];if(_0xb42ab6==='setpoint'&&_0x1ede85[_0x4cbe82(0x12d)][_0x4cbe82(0xbd)]===!![])_0x3ec86d=_0xa7cbad[_0x4cbe82(0x87)]('set')||_0xa7cbad[_0x4cbe82(0x87)]('soll')||_0xa7cbad[_0x4cbe82(0x87)](_0x4cbe82(0x108))||_0x15d625[_0x4cbe82(0x87)](_0x4cbe82(0x82))||_0x15d625[_0x4cbe82(0x87)](_0x4cbe82(0xc9));else _0xb42ab6===_0x4cbe82(0xd9)&&(_0x3ec86d=_0xa7cbad[_0x4cbe82(0x87)](_0x4cbe82(0xbe))||_0xa7cbad[_0x4cbe82(0x87)]('valve')||_0xa7cbad[_0x4cbe82(0x87)](_0x4cbe82(0xd4))||_0xa7cbad[_0x4cbe82(0x87)](_0x4cbe82(0x146))||_0x15d625['includes'](_0x4cbe82(0xd1))||_0x15d625['includes'](_0x4cbe82(0xfd))||_0x97e736[_0x4cbe82(0x87)]('%'));if(_0x3ec86d){const _0x9c662a=_0x43eafe[_0x4cbe82(0x114)](/[._]+/)[_0x4cbe82(0xff)](_0x11e1b4=>_0x11e1b4[_0x4cbe82(0x80)]());let _0x122d5d=0x0;_0x2d4e49[_0x4cbe82(0xc6)](_0x4d8535=>{const _0x3cf195=_0x4cbe82;if(_0x9c662a[_0x3cf195(0x87)](_0x4d8535[_0x3cf195(0x80)]()))_0x122d5d++;}),_0x26cb92[_0x4cbe82(0x105)]({'id':_0x43eafe,'score':_0x122d5d});}}}if(_0x26cb92[_0x4cbe82(0xe0)]>0x0){_0x26cb92['sort']((_0x3762aa,_0x25592e)=>_0x25592e[_0x4cbe82(0xa4)]-_0x3762aa[_0x4cbe82(0xa4)]);if(_0x26cb92[0x0][_0x4cbe82(0xa4)]>0x0)return _0x26cb92[0x0]['id'];}}}catch(_0x100aca){}return null;}async function scanThermostats(_0x76af5f){const _0xc8c0ee=a1_0x4922b3,_0x4a3e85=_0x76af5f[_0xc8c0ee(0xb9)][_0xc8c0ee(0x148)]||[],_0x5175fd=[],_0x43ecf8=_0x4a3e85[_0xc8c0ee(0xa5)](_0x25b1ee=>_0x25b1ee['id']&&_0x25b1ee['id'][_0xc8c0ee(0x87)](_0xc8c0ee(0x9c))||_0x25b1ee[_0xc8c0ee(0xbc)]&&[_0xc8c0ee(0x9c),_0xc8c0ee(0x96),_0xc8c0ee(0xb5)]['includes'](_0x25b1ee['type'])||_0x25b1ee[_0xc8c0ee(0xbf)]&&_0x25b1ee[_0xc8c0ee(0xbf)][_0xc8c0ee(0x80)]()[_0xc8c0ee(0x87)](_0xc8c0ee(0x86)));for(const _0x56b43e of _0x43ecf8){const _0x205531=await findRelatedId(_0x76af5f,_0x56b43e['id'],_0xc8c0ee(0xca)),_0x17af03=await findRelatedId(_0x76af5f,_0x56b43e['id'],_0xc8c0ee(0xd9));let _0x2de2f6=_0xc8c0ee(0xfb),_0x1b1921=![],_0x343578=_0x76af5f[_0xc8c0ee(0xb9)][_0xc8c0ee(0xba)]||{};if(typeof _0x343578===_0xc8c0ee(0x10c))try{_0x343578=JSON[_0xc8c0ee(0x9d)](_0x343578);}catch(_0x5f0581){}let _0x406966=_0x76af5f[_0xc8c0ee(0xb9)][_0xc8c0ee(0xb2)]||{};if(typeof _0x406966==='string')try{_0x406966=JSON[_0xc8c0ee(0x9d)](_0x406966);}catch(_0x239bbf){}if(_0x343578[_0x56b43e['id']]&&_0x343578[_0x56b43e['id']]===_0x205531||_0x406966[_0x56b43e['id']]&&_0x406966[_0x56b43e['id']]===_0x17af03)_0x2de2f6=_0xc8c0ee(0x90),_0x1b1921=!![];else(_0x205531||_0x17af03)&&(_0x2de2f6=_0xc8c0ee(0xe4));_0x5175fd[_0xc8c0ee(0x105)]({'room':_0x56b43e[_0xc8c0ee(0xd8)]||_0xc8c0ee(0x93),'sensorId':_0x56b43e['id'],'setpointId':_0x205531||'-','valveId':_0x17af03||'-','source':_0x2de2f6,'isManual':_0x1b1921,'status':_0x205531&&_0x17af03?_0xc8c0ee(0x140):_0x205531?'OK':_0xc8c0ee(0x11c)});}return _0x5175fd[_0xc8c0ee(0x145)]((_0x3496da,_0x39dfab)=>_0x3496da[_0xc8c0ee(0xd2)][_0xc8c0ee(0x10d)](_0x39dfab[_0xc8c0ee(0xd2)]));}async function updateSchedulePreview(_0x2ece90){const _0x2eb275=a1_0x4922b3;if(!_0x2ece90[_0x2eb275(0xb9)][_0x2eb275(0x126)]||!_0x2ece90[_0x2eb275(0xb9)][_0x2eb275(0x130)])return;let _0x51645b={};try{const _0x456516=await _0x2ece90['getStateAsync'](_0x2eb275(0xf9));if(_0x456516&&_0x456516[_0x2eb275(0xe3)])_0x51645b=JSON[_0x2eb275(0x9d)](_0x456516['val']);}catch(_0x17c9ec){}const _0x7119c3=[],_0x5b9351=Date[_0x2eb275(0x122)](),_0x24d8df=0x30*0x3c*0x3c*0x3e8;try{const _0x3b669c=await _0x2ece90['getForeignStateAsync'](_0x2ece90[_0x2eb275(0xb9)][_0x2eb275(0x130)]+'.data.table');if(!_0x3b669c||!_0x3b669c[_0x2eb275(0xe3)])return;const _0x7089b8=JSON[_0x2eb275(0x9d)](_0x3b669c[_0x2eb275(0xe3)]),_0x1891d5=_0x2ece90['config'][_0x2eb275(0xb4)]||[],_0x1d9168=_0x2ece90[_0x2eb275(0xb9)][_0x2eb275(0x148)]||[],_0xcd09e5=new Set();_0x1d9168[_0x2eb275(0xc6)](_0x31c108=>{const _0x221342=_0x2eb275;if(_0x31c108[_0x221342(0xd8)])_0xcd09e5['add'](_0x31c108[_0x221342(0xd8)]);});for(const _0x2afa05 of _0x7089b8){if(_0x2afa05['_calName']&&_0x1891d5[_0x2eb275(0xe0)]>0x0&&!_0x1891d5[_0x2eb275(0x87)](_0x2afa05[_0x2eb275(0xb7)]))continue;const _0x424f02=_0x2afa05[_0x2eb275(0x14d)]||_0x2afa05[_0x2eb275(0x13b)]||_0x2afa05['date'];if(!_0x424f02)continue;const _0x4e84d9=new Date(_0x424f02),_0x3400ae=_0x4e84d9[_0x2eb275(0x147)]();if(isNaN(_0x3400ae))continue;if(_0x3400ae<_0x5b9351)continue;if(_0x3400ae>_0x5b9351+_0x24d8df)continue;const _0x59e757=(_0x2afa05[_0x2eb275(0xa1)]||_0x2afa05['summary']||'')[_0x2eb275(0x80)]();let _0x2f1b30=![],_0x3b1e20=[],_0x27151f=_0x2afa05[_0x2eb275(0xa1)]||_0x2afa05[_0x2eb275(0x89)]||'Unbekannt';if(_0x59e757[_0x2eb275(0x87)](_0x2eb275(0x9f))||_0x59e757[_0x2eb275(0x87)](_0x2eb275(0x13a))||_0x59e757[_0x2eb275(0x87)]('ankunft'))_0x2f1b30=!![],_0x3b1e20=Array[_0x2eb275(0xc2)](_0xcd09e5);else for(const _0x31bb53 of _0xcd09e5){if(_0x59e757[_0x2eb275(0x87)](_0x31bb53[_0x2eb275(0x80)]()))_0x3b1e20[_0x2eb275(0x105)](_0x31bb53);}_0x3b1e20[_0x2eb275(0xe0)]>0x0&&_0x3b1e20[_0x2eb275(0xc6)](_0x2bb068=>{const _0x2c29ee=_0x2eb275;let _0x92751=0x3c;if(_0x2f1b30){let _0x2c8d83=0x0;Object[_0x2c29ee(0x85)](_0x51645b)[_0x2c29ee(0xc6)](_0x5d5ac4=>{if(_0x5d5ac4>_0x2c8d83)_0x2c8d83=_0x5d5ac4;}),_0x92751=_0x2c8d83>0x0?_0x2c8d83:0x78;}else _0x92751=getWarmupRobust(_0x51645b,_0x2bb068);const _0x5e3d52=new Date(_0x3400ae-_0x92751*0xea60);_0x7119c3['push']({'eventTime':_0x3400ae,'triggerTime':_0x5e3d52[_0x2c29ee(0x147)](),'room':_0x2bb068,'minutes':_0x92751,'reason':_0x27151f,'isGlobal':_0x2f1b30});});}}catch(_0x335ac6){}_0x7119c3[_0x2eb275(0x145)]((_0x504909,_0x4f615e)=>_0x504909[_0x2eb275(0xaf)]-_0x4f615e[_0x2eb275(0xaf)]);const _0x20a6c9=_0x7119c3['slice'](0x0,0x5);await _0x2ece90[_0x2eb275(0xd3)](_0x2eb275(0x14a),{'val':JSON['stringify'](_0x20a6c9),'ack':!![]});}async function monitorEnforcements(_0x5ad550){const _0x4ae3bf=a1_0x4922b3;try{const _0x131a62='analysis.energy.activeEnforcements',_0x18d3a9=await _0x5ad550[_0x4ae3bf(0x118)](_0x131a62);if(!_0x18d3a9||!_0x18d3a9[_0x4ae3bf(0xe3)])return;let _0x9a8b61=[];try{_0x9a8b61=JSON[_0x4ae3bf(0x9d)](_0x18d3a9[_0x4ae3bf(0xe3)]);}catch(_0x3062c8){return;}if(!Array[_0x4ae3bf(0x92)](_0x9a8b61)||_0x9a8b61[_0x4ae3bf(0xe0)]===0x0)return;const _0x57a1ac=Date['now'](),_0xcd1f8=_0x5ad550[_0x4ae3bf(0xb9)]['devices']||[];let _0x2f36e3=![];for(let _0x1308bb=_0x9a8b61[_0x4ae3bf(0xe0)]-0x1;_0x1308bb>=0x0;_0x1308bb--){const _0x4f7061=_0x9a8b61[_0x1308bb];if(_0x57a1ac>=_0x4f7061['until']){_0x5ad550[_0x4ae3bf(0x115)]['info'](_0x4ae3bf(0x119)+_0x4f7061[_0x4ae3bf(0xd2)]+_0x4ae3bf(0xfa)),_0x9a8b61[_0x4ae3bf(0x117)](_0x1308bb,0x1),_0x2f36e3=!![];continue;}const _0x14fea5=_0xcd1f8['find'](_0x3ffbac=>normalize(_0x3ffbac['location'])===normalize(_0x4f7061[_0x4ae3bf(0xd2)])&&(_0x3ffbac[_0x4ae3bf(0xbc)]===_0x4ae3bf(0x9c)||_0x3ffbac[_0x4ae3bf(0xbc)]==='thermostat'));if(_0x14fea5){const _0x3ba853=await findRelatedId(_0x5ad550,_0x14fea5['id'],_0x4ae3bf(0xca));if(_0x3ba853){const _0x5a8d61=await _0x5ad550['getForeignStateAsync'](_0x3ba853);_0x5a8d61&&typeof _0x5a8d61['val']===_0x4ae3bf(0xb3)&&(_0x5a8d61['val']<0xf&&(_0x5ad550['log'][_0x4ae3bf(0x12e)]('ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x4f7061[_0x4ae3bf(0xd2)]+_0x4ae3bf(0xf2)+_0x5a8d61[_0x4ae3bf(0xe3)]+_0x4ae3bf(0x150)+_0x4f7061['target']+_0x4ae3bf(0xc8)),await _0x5ad550[_0x4ae3bf(0x10b)](_0x3ba853,_0x4f7061[_0x4ae3bf(0x108)]),await logAutomationAction(_0x5ad550,_0x4ae3bf(0x136)+_0x4f7061[_0x4ae3bf(0xd2)]+':\x20'+_0x5a8d61[_0x4ae3bf(0xe3)]+_0x4ae3bf(0x8d)+_0x4f7061[_0x4ae3bf(0x108)]+_0x4ae3bf(0x127))));}}}_0x2f36e3&&await _0x5ad550['setStateAsync'](_0x131a62,{'val':JSON[_0x4ae3bf(0x142)](_0x9a8b61),'ack':!![]});}catch(_0x209265){_0x5ad550[_0x4ae3bf(0x115)][_0x4ae3bf(0xe7)](_0x4ae3bf(0x10f)+_0x209265['message']);}}async function checkCalendarTriggers(_0x50d57e){const _0x2df8a3=a1_0x4922b3;if(!_0x50d57e['config'][_0x2df8a3(0x126)]||!_0x50d57e[_0x2df8a3(0xb9)][_0x2df8a3(0x130)])return;await updateSchedulePreview(_0x50d57e);let _0x119093={},_0xf7c138={};try{const _0x4b19d3=await _0x50d57e[_0x2df8a3(0x118)](_0x2df8a3(0xf9));if(_0x4b19d3&&_0x4b19d3['val'])_0x119093=JSON['parse'](_0x4b19d3[_0x2df8a3(0xe3)]);const _0x5db3e=await _0x50d57e['getStateAsync'](_0x2df8a3(0xa2));if(_0x5db3e&&_0x5db3e['val'])_0xf7c138=JSON[_0x2df8a3(0x9d)](_0x5db3e[_0x2df8a3(0xe3)]);}catch(_0x10fe0b){}let _0x3d54a9={'default':0x15};try{const _0x1c69d7=await _0x50d57e[_0x2df8a3(0x118)](_0x2df8a3(0xf6));if(_0x1c69d7&&_0x1c69d7[_0x2df8a3(0xe3)])_0x3d54a9=JSON[_0x2df8a3(0x9d)](_0x1c69d7[_0x2df8a3(0xe3)]);}catch(_0x2e66a4){}let _0x5d7f5f=[];try{const _0x559d91=await _0x50d57e[_0x2df8a3(0x118)](_0x2df8a3(0x141));if(_0x559d91&&_0x559d91[_0x2df8a3(0xe3)])_0x5d7f5f=JSON['parse'](_0x559d91[_0x2df8a3(0xe3)]);}catch(_0x13e4bb){}try{const _0x2678ae=await _0x50d57e[_0x2df8a3(0x106)](_0x50d57e[_0x2df8a3(0xb9)][_0x2df8a3(0x130)]+_0x2df8a3(0x8b));if(!_0x2678ae||!_0x2678ae[_0x2df8a3(0xe3)])return;const _0x1a9e88=JSON[_0x2df8a3(0x9d)](_0x2678ae[_0x2df8a3(0xe3)]),_0x26a3f3=Date[_0x2df8a3(0x122)](),_0x4ac40d=_0x50d57e[_0x2df8a3(0xb9)][_0x2df8a3(0x148)]||[],_0x55e1c0=_0x50d57e[_0x2df8a3(0xb9)][_0x2df8a3(0xb4)]||[];let _0x5f4bb4=![];for(const _0x4b825f of _0x1a9e88){if(_0x4b825f[_0x2df8a3(0xb7)]&&_0x55e1c0['length']>0x0&&!_0x55e1c0[_0x2df8a3(0x87)](_0x4b825f[_0x2df8a3(0xb7)]))continue;const _0x3bafdf=_0x4b825f[_0x2df8a3(0x14d)]||_0x4b825f['eventStart']||_0x4b825f['date'];if(!_0x3bafdf)continue;const _0x38a0e3=new Date(_0x3bafdf);if(isNaN(_0x38a0e3[_0x2df8a3(0x147)]()))continue;const _0x1568da=(_0x4b825f['event']||_0x4b825f[_0x2df8a3(0x89)]||'')['toLowerCase']();if(_0x1568da[_0x2df8a3(0x87)](_0x2df8a3(0x9f))||_0x1568da['includes'](_0x2df8a3(0x13a))||_0x1568da['includes']('ankunft')){let _0x2389db=0x0;Object[_0x2df8a3(0x85)](_0x119093)[_0x2df8a3(0xc6)](_0x4e0308=>{if(_0x4e0308>_0x2389db)_0x2389db=_0x4e0308;});if(_0x2389db===0x0)_0x2389db=0x78;const _0x324cb4=_0x38a0e3['getTime']()-_0x2389db*0xea60;_0x26a3f3>=_0x324cb4&&_0x26a3f3<_0x38a0e3['getTime']()&&(_0x50d57e[_0x2df8a3(0x83)]!==_0x2df8a3(0x84)&&(_0x50d57e[_0x2df8a3(0x115)]['info'](_0x2df8a3(0x120)+_0x2389db+_0x2df8a3(0xa6)),await _0x50d57e['setStateAsync'](_0x2df8a3(0xc4),{'val':_0x2df8a3(0x84),'ack':![]})));}for(const _0x572e87 of _0x4ac40d){if(_0x572e87['location']){const _0x252b2f=_0x572e87[_0x2df8a3(0xd8)]['toLowerCase'](),_0x184282=(_0x572e87[_0x2df8a3(0xbf)]||'')[_0x2df8a3(0x80)]();let _0x4f6c94=_0x1568da['includes'](_0x252b2f);!_0x4f6c94&&_0x184282[_0x2df8a3(0xe0)]>0x3&&_0x1568da['includes'](_0x184282)&&(_0x4f6c94=!![]);if(_0x4f6c94){const _0x214fa2=getWarmupRobust(_0x119093,_0x572e87['location']),_0x1823d2=_0xf7c138[_0x572e87['location']]||_0x2df8a3(0x101),_0x480456=_0x38a0e3['getTime']()-_0x214fa2*0xea60;if(_0x26a3f3>=_0x480456&&_0x26a3f3<_0x38a0e3[_0x2df8a3(0x147)]()){const _0x541ffd=lastActions[_0x2df8a3(0xe9)+_0x572e87[_0x2df8a3(0xd8)]];if(_0x541ffd&&_0x26a3f3-_0x541ffd<CAL_COOLDOWN_MS)continue;const _0x4ee3e5=await findRelatedId(_0x50d57e,_0x572e87['id'],_0x2df8a3(0xca));if(_0x4ee3e5){let _0x5c7e44=_0x3d54a9[_0x572e87[_0x2df8a3(0xd8)]];if(_0x5c7e44===undefined)_0x5c7e44=_0x3d54a9[_0x2df8a3(0xa9)];if(_0x5c7e44===undefined)_0x5c7e44=0x15;const _0x2da953=await _0x50d57e['getForeignStateAsync'](_0x4ee3e5);if(_0x2da953&&typeof _0x2da953['val']==='number'&&_0x2da953[_0x2df8a3(0xe3)]<_0x5c7e44-0.5){_0x50d57e['log']['info'](_0x2df8a3(0x116)+_0x1823d2+_0x2df8a3(0x149)+_0x572e87['location']+_0x2df8a3(0x8c)+_0x1568da+_0x2df8a3(0x9e)+_0x5c7e44+_0x2df8a3(0x98)+_0x214fa2+'\x20min).'),await _0x50d57e[_0x2df8a3(0x10b)](_0x4ee3e5,_0x5c7e44),await logAutomationAction(_0x50d57e,_0x2df8a3(0x11e)+_0x572e87[_0x2df8a3(0xd8)]+_0x2df8a3(0xfc)+_0x5c7e44+_0x2df8a3(0x104)+_0x1823d2+')'),lastActions[_0x2df8a3(0xe9)+_0x572e87[_0x2df8a3(0xd8)]]=_0x26a3f3;const _0x27034e=_0x5d7f5f[_0x2df8a3(0x143)](_0x5d2058=>_0x5d2058[_0x2df8a3(0xd2)]===_0x572e87[_0x2df8a3(0xd8)]);if(_0x27034e!==-0x1)_0x5d7f5f[_0x2df8a3(0x117)](_0x27034e,0x1);_0x5d7f5f[_0x2df8a3(0x105)]({'room':_0x572e87[_0x2df8a3(0xd8)],'target':_0x5c7e44,'until':_0x38a0e3[_0x2df8a3(0x147)]()}),_0x5f4bb4=!![];}}}}}}}_0x5f4bb4&&await _0x50d57e[_0x2df8a3(0xd3)]('analysis.energy.activeEnforcements',{'val':JSON[_0x2df8a3(0x142)](_0x5d7f5f),'ack':!![]});}catch(_0x530c5e){_0x50d57e[_0x2df8a3(0x115)]['warn'](_0x2df8a3(0x14c)+_0x530c5e['message']);}}async function manageMpcIntervention(_0x27b868,_0x5c4f0c,_0x173f03){const _0x101cd1=a1_0x4922b3;try{const _0x38f307=_0x101cd1(0xfe),_0x165142=await _0x27b868[_0x101cd1(0x118)](_0x38f307);let _0x5d3f5a=[];if(_0x165142&&_0x165142['val'])try{_0x5d3f5a=JSON['parse'](_0x165142[_0x101cd1(0xe3)]);}catch(_0x13dd23){}const _0x3a018a=_0x5d3f5a[_0x101cd1(0x11f)](_0x5c4f0c);if(_0x173f03===_0x101cd1(0xad))_0x3a018a===-0x1&&(_0x5d3f5a[_0x101cd1(0x105)](_0x5c4f0c),await _0x27b868[_0x101cd1(0xd3)](_0x38f307,{'val':JSON[_0x101cd1(0x142)](_0x5d3f5a),'ack':!![]}));else _0x173f03===_0x101cd1(0xcd)&&(_0x3a018a!==-0x1&&(_0x5d3f5a['splice'](_0x3a018a,0x1),await _0x27b868[_0x101cd1(0xd3)](_0x38f307,{'val':JSON[_0x101cd1(0x142)](_0x5d3f5a),'ack':!![]})));}catch(_0x4c0208){}}async function cleanupGhostInterventions(_0x2a1ba2){const _0x5d2626=a1_0x4922b3;try{const _0x543e36=_0x5d2626(0xfe),_0x21826f=await _0x2a1ba2[_0x5d2626(0x118)](_0x543e36);if(!_0x21826f||!_0x21826f[_0x5d2626(0xe3)])return;const _0x1c6fc3=JSON['parse'](_0x21826f[_0x5d2626(0xe3)]);if(!Array[_0x5d2626(0x92)](_0x1c6fc3)||_0x1c6fc3[_0x5d2626(0xe0)]===0x0)return;let _0x37b4de={'default':0x15};try{const _0x4e6af9=await _0x2a1ba2['getStateAsync'](_0x5d2626(0xf6));if(_0x4e6af9&&_0x4e6af9[_0x5d2626(0xe3)])_0x37b4de=JSON['parse'](_0x4e6af9['val']);}catch(_0x16acb5){}let _0x2d8144=[];try{const _0xfa3c72=await _0x2a1ba2[_0x5d2626(0x118)]('analysis.energy.ventilationAlerts');if(_0xfa3c72&&_0xfa3c72[_0x5d2626(0xe3)])_0x2d8144=JSON['parse'](_0xfa3c72[_0x5d2626(0xe3)]);}catch(_0x52da65){}let _0x5bcef3={},_0xe2ce46=![];try{const _0x2f6b0c=await _0x2a1ba2[_0x5d2626(0x118)]('analysis.energy.rlPenalties');if(_0x2f6b0c&&_0x2f6b0c[_0x5d2626(0xe3)])_0x5bcef3=JSON['parse'](_0x2f6b0c[_0x5d2626(0xe3)]);}catch(_0x13072c){}if(_0x5bcef3[_0x5d2626(0x112)]){const _0x34533c=Date[_0x5d2626(0x122)]();for(const [_0x2c8694,_0x190d08]of Object[_0x5d2626(0xec)](_0x5bcef3[_0x5d2626(0x112)])){_0x34533c-_0x190d08>PENALTY_TTL&&(delete _0x5bcef3[_0x2c8694],delete _0x5bcef3[_0x5d2626(0x112)][_0x2c8694],_0xe2ce46=!![],_0x2a1ba2[_0x5d2626(0x115)]['info']('ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27'+_0x2c8694+_0x5d2626(0x109)));}}const _0x467d67=_0x2a1ba2[_0x5d2626(0xb9)][_0x5d2626(0x148)]||[];let _0x1d257a=![];for(let _0x38f027=_0x1c6fc3['length']-0x1;_0x38f027>=0x0;_0x38f027--){const _0x3c14eb=_0x1c6fc3[_0x38f027],_0x27e307=_0x467d67[_0x5d2626(0xf3)](_0x3e3a40=>normalize(_0x3e3a40[_0x5d2626(0xd8)])===normalize(_0x3c14eb)&&(_0x3e3a40[_0x5d2626(0xbc)]===_0x5d2626(0x9c)||_0x3e3a40['type']===_0x5d2626(0x96)));if(!_0x27e307){_0x2a1ba2['log'][_0x5d2626(0x12e)]('ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27'+_0x3c14eb+_0x5d2626(0x8f)),_0x1c6fc3[_0x5d2626(0x117)](_0x38f027,0x1),_0x1d257a=!![];continue;}if(_0x27e307){const _0x44f882=await findRelatedId(_0x2a1ba2,_0x27e307['id'],_0x5d2626(0xca)),_0x3f8222=await _0x2a1ba2[_0x5d2626(0x106)](_0x27e307['id']);if(_0x44f882){const _0x10af6a=await _0x2a1ba2[_0x5d2626(0x106)](_0x44f882);if(_0x10af6a&&typeof _0x10af6a['val']===_0x5d2626(0xb3)){let _0xa7980c=![],_0xf793af='';Math[_0x5d2626(0xe5)](_0x10af6a[_0x5d2626(0xe3)]-ECO_TEMP)>0.5&&(_0xa7980c=!![],_0xf793af=_0x5d2626(0x128));if(!_0xa7980c&&_0x3f8222&&typeof _0x3f8222[_0x5d2626(0xe3)]===_0x5d2626(0xb3)){const _0x238122=_0x37b4de[_0x3c14eb]||_0x37b4de[_0x5d2626(0xa9)]||0x15;_0x3f8222[_0x5d2626(0xe3)]<_0x238122+0.2&&(_0xa7980c=!![],_0xf793af=_0x5d2626(0x94));}if(_0xa7980c){if(_0xf793af==='manual'){_0x2a1ba2[_0x5d2626(0x115)]['info'](_0x5d2626(0xbb)+_0x3c14eb+_0x5d2626(0xe2)+_0x10af6a[_0x5d2626(0xe3)]+_0x5d2626(0x13c)+ECO_TEMP+_0x5d2626(0xde));const _0x272be8=lastActions['cal_'+_0x3c14eb],_0x104ce4=_0x272be8&&Date['now']()-_0x272be8<0x2*0x3c*0x3e8;if(!_0x104ce4&&_0x10af6a[_0x5d2626(0xe3)]>ECO_TEMP+0.5){_0x2a1ba2[_0x5d2626(0x97)]&&(_0x2a1ba2[_0x5d2626(0x115)][_0x5d2626(0x11b)](_0x5d2626(0x123)+_0x3c14eb+_0x5d2626(0x121)),_0x2a1ba2[_0x5d2626(0x97)](_0x5d2626(0xce),{'room':_0x3c14eb}));const _0x2e0309=_0x3c14eb+'_'+new Date()[_0x5d2626(0xe6)]();if(!_0x5bcef3[_0x2e0309]){_0x5bcef3[_0x2e0309]=0x1;if(!_0x5bcef3[_0x5d2626(0x112)])_0x5bcef3[_0x5d2626(0x112)]={};_0x5bcef3['_meta'][_0x2e0309]=Date[_0x5d2626(0x122)](),_0xe2ce46=!![];}}else _0x104ce4&&_0x2a1ba2[_0x5d2626(0x115)][_0x5d2626(0x11b)](_0x5d2626(0xf1)+_0x3c14eb+_0x5d2626(0xeb));}else{if(_0xf793af===_0x5d2626(0x94)){let _0x55a824=![];if(_0x2d8144[_0x5d2626(0xf3)](_0x2b2288=>_0x2b2288[_0x5d2626(0xd2)]===_0x3c14eb))_0x55a824=!![];const _0x1eaba1=_0x467d67['filter'](_0x3e9934=>normalize(_0x3e9934[_0x5d2626(0xd8)])===normalize(_0x3c14eb)&&(_0x3e9934[_0x5d2626(0xbc)]===_0x5d2626(0xa0)||_0x3e9934['type']===_0x5d2626(0xb5)||_0x3e9934[_0x5d2626(0xbc)]===_0x5d2626(0x111)));for(const _0x4c5a05 of _0x1eaba1){try{const _0x2112eb=await _0x2a1ba2['getForeignStateAsync'](_0x4c5a05['id']);if(_0x2112eb&&(_0x2112eb[_0x5d2626(0xe3)]===!![]||_0x2112eb[_0x5d2626(0xe3)]===0x1||String(_0x2112eb['val'])[_0x5d2626(0x80)]()===_0x5d2626(0xc5)))_0x55a824=!![];}catch(_0x4e7ed5){}}if(_0x55a824)_0x2a1ba2[_0x5d2626(0x115)]['info'](_0x5d2626(0xef)+_0x3c14eb+_0x5d2626(0xf8));else{const _0x1b0d21=_0x37b4de[_0x3c14eb]||_0x37b4de[_0x5d2626(0xa9)]||0x15;_0x2a1ba2[_0x5d2626(0x115)]['info'](_0x5d2626(0x12a)+_0x3c14eb+'\x20erreicht\x20Limit\x20('+_0x3f8222[_0x5d2626(0xe3)]+'Â°C\x20<\x20'+(_0x1b0d21+0.2)+_0x5d2626(0xa3)),await _0x2a1ba2[_0x5d2626(0x10b)](_0x44f882,_0x1b0d21),await logAutomationAction(_0x2a1ba2,_0x5d2626(0x138)+_0x3c14eb+_0x5d2626(0x139)+_0x1b0d21+'Â°C'),lastActions[_0x5d2626(0xae)+_0x3c14eb]=Date[_0x5d2626(0x122)]();}}}_0x1c6fc3['splice'](_0x38f027,0x1),_0x1d257a=!![];}}}}}_0x1d257a&&await _0x2a1ba2[_0x5d2626(0xd3)](_0x543e36,{'val':JSON[_0x5d2626(0x142)](_0x1c6fc3),'ack':!![]}),_0xe2ce46&&await _0x2a1ba2[_0x5d2626(0xd3)](_0x5d2626(0xb8),{'val':JSON[_0x5d2626(0x142)](_0x5bcef3),'ack':!![]});}catch(_0x50f34a){}}function a1_0x560a(){const _0x4476f6=['PERFECT','analysis.energy.activeEnforcements','stringify','findIndex','\x20min)','sort','position','getTime','devices',']:\x20Raum-Trigger\x20\x27','analysis.energy.schedulePreview','messwert','Calendar\x20Check\x20Error:\x20','_date','local_temperature','getForeignObjectsAsync','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','toLowerCase','mpc_','level.temperature','currentSystemMode','normal','values','temp','includes','11564WAqxav','summary','off','.data.table','\x27\x20(Match:\x20','Â°C\x20->\x20','dimmer','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','Manuelles\x20Mapping','unit','isArray','Unbekannt','too_cold','(((.+)+)+)+$','thermostat','sendToPythonWrapper','Â°C\x20(Vorlauf:\x20','SET','.1.ACTUAL_TEMPERATURE','ACTUAL_TEMPERATURE','temperature','parse',')\x20aktiv.\x20Heize\x20auf\x20','urlaub\x20ende','window','event','analysis.energy.warmupSources','Â°C).\x20Sparmodus\x20beendet!','score','filter','\x20min).','current_heating_setpoint','unshift','default','\x20wieder\x20auf\x20','\x20gefunden!','actual','add','rescue_','triggerTime','640Kylygm','.1.SET_POINT_TEMPERATURE','valveMapping','number','calendarSelection','sensor','Â°C!\x20(Puffer\x20leer).','_calName','analysis.energy.rlPenalties','config','thermostatMapping','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','type','write','level','name','.1.LEVEL','.1.TEMPERATURE','from','valve_position','system.mode','open','forEach','hm-rpc','Â°C.','thermostat.setpoint','setpoint','target_temperature','ACTUAL','remove','TRAIN_RL_PENALTY','replace','84312EdCKEg','level.valve','room','setStateAsync','stellwert','60ATjkmg','consultButler','.4.VALVE_STATE','location','valve','state','Unknown','507ljQxGb','analysis.automation.lastAction','Â°C).\x20Entferne\x20Status.','\x20->\x20Schalte\x20','length','7cPflYF','\x20ist\x20auf\x20','val','Auto-Erkennung','abs','getHours','error','114zMBzGF','cal_','minutes_safe','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','entries','[MPC]\x20','SET_POINT_TEMPERATURE','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','slice','ðŸ“…\x20[MPC\x20INFO]\x20','\x20auf\x20','find','analysis.automation.mode','2524918GUSLqa','analysis.energy.warmupTargets','891006EepKtc','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','analysis.energy.warmupTimes','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','Nicht\x20gefunden','\x20->\x20','value.valve','analysis.energy.mpcActiveInterventions','map','ist','Classic','1246280RJWPBp','role','Â°C\x20(via\x20','push','getForeignStateAsync','join','target','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','reason','setForeignStateAsync','string','localeCompare',':\x20Absenkung\x20auf\x20','Enforcement\x20Monitor\x20Error:\x20','PrÃ¤diktion:\x20','contact','_meta','active','split','log','ðŸ“…\x20SMART\x20SCHEDULE\x20[','splice','getStateAsync','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','info','Fehlt','analysis.automation.actionLog','[CAL]\x20','indexOf','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','\x20wurde\x20manuell\x20erhÃ¶ht.','now','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','analysis.automation.confidenceThreshold','useCalendar','Â°C\x20(Kalender-Schutz)','manual','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','3192808tpGFTi','.4.SET_TEMPERATURE','common','warn','toString','calendarInstance','apply','Â°C!\x20(Puffer:\x20','Ist','291530XCjxPm','light','[FORCE]\x20','constructor','[WATCHDOG]\x20',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','rÃ¼ckkehr','eventStart','Â°C\x20(nicht\x20','approved','exports','search'];a1_0x560a=function(){return _0x4476f6;};return a1_0x560a();}async function applyEnergySavings(_0x2ef688,_0x413a8e){const _0x55a0be=a1_0x4922b3;await cleanupGhostInterventions(_0x2ef688);if(!_0x413a8e||_0x413a8e[_0x55a0be(0xe0)]===0x0)return;const _0x2f40d1=_0x2ef688['config'][_0x55a0be(0x148)]||[],_0x3b4ff9=Date[_0x55a0be(0x122)]();for(const _0x45d0dd of _0x413a8e){const _0x866985=_0x45d0dd['room'],_0x55a4f=_0x45d0dd[_0x55a0be(0xea)],_0x8fb0b3=_0x45d0dd[_0x55a0be(0x108)]||0x15;if(lastActions[_0x55a0be(0xae)+_0x866985]&&_0x3b4ff9-lastActions[_0x55a0be(0xae)+_0x866985]<RESCUE_LOCK_MS)continue;const _0x43ae92=_0x2f40d1[_0x55a0be(0xf3)](_0x2fc4c1=>normalize(_0x2fc4c1[_0x55a0be(0xd8)])===normalize(_0x866985)&&(_0x2fc4c1[_0x55a0be(0xbc)]===_0x55a0be(0x9c)||_0x2fc4c1[_0x55a0be(0xbc)]===_0x55a0be(0x96)));if(!_0x43ae92)continue;const _0x57c3fd=await findRelatedId(_0x2ef688,_0x43ae92['id'],_0x55a0be(0xca));if(_0x57c3fd){if(lastActions[_0x55a0be(0x81)+_0x866985]&&_0x3b4ff9-lastActions[_0x55a0be(0x81)+_0x866985]<0x1e*0x3c*0x3e8)continue;const _0x1933bd=await _0x2ef688['getForeignStateAsync'](_0x57c3fd);if(_0x1933bd&&typeof _0x1933bd['val']==='number'){const _0x302e29=_0x1933bd[_0x55a0be(0xe3)];_0x302e29!==ECO_TEMP&&await manageMpcIntervention(_0x2ef688,_0x866985,_0x55a0be(0xcd));if(_0x55a4f>0x1e)_0x302e29>ECO_TEMP+0.5&&(_0x2ef688[_0x55a0be(0x115)]['info'](_0x55a0be(0x124)+_0x866985+_0x55a0be(0xf2)+ECO_TEMP+_0x55a0be(0x132)+_0x55a4f+_0x55a0be(0x144)),await _0x2ef688['setForeignStateAsync'](_0x57c3fd,ECO_TEMP),await manageMpcIntervention(_0x2ef688,_0x866985,_0x55a0be(0xad)),lastActions[_0x55a0be(0x81)+_0x866985]=_0x3b4ff9,await logAutomationAction(_0x2ef688,_0x55a0be(0xed)+_0x866985+_0x55a0be(0x10e)+ECO_TEMP+'Â°C'));else _0x55a4f<=0xf&&(_0x302e29<_0x8fb0b3&&(_0x2ef688[_0x55a0be(0x115)][_0x55a0be(0x11b)](_0x55a0be(0x129)+_0x866985+_0x55a0be(0xaa)+_0x8fb0b3+_0x55a0be(0xb6)),await _0x2ef688[_0x55a0be(0x10b)](_0x57c3fd,_0x8fb0b3),await manageMpcIntervention(_0x2ef688,_0x866985,_0x55a0be(0xcd)),lastActions[_0x55a0be(0x81)+_0x866985]=_0x3b4ff9,await logAutomationAction(_0x2ef688,_0x55a0be(0xed)+_0x866985+':\x20Aufheizen\x20auf\x20'+_0x8fb0b3+'Â°C')));}}else _0x2ef688['log'][_0x55a0be(0x12e)](_0x55a0be(0x11a)+_0x866985+_0x55a0be(0xab));}}function a1_0x5334(_0xfc424c,_0x58a804){const _0x5e3eec=a1_0x560a();return a1_0x5334=function(_0x445724,_0x5d7baf){_0x445724=_0x445724-0x80;let _0x560abb=_0x5e3eec[_0x445724];return _0x560abb;},a1_0x5334(_0xfc424c,_0x58a804);}module[a1_0x4922b3(0x13e)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};