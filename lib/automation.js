const a1_0x3bc2a5=a1_0x3480;function a1_0x3480(_0x216463,_0x19650e){const _0x2ede67=a1_0x14f2();return a1_0x3480=function(_0x2a68fb,_0x5d3bda){_0x2a68fb=_0x2a68fb-0x1a9;let _0x14f2db=_0x2ede67[_0x2a68fb];return _0x14f2db;},a1_0x3480(_0x216463,_0x19650e);}(function(_0x10416b,_0x480213){const _0x57f6df=a1_0x3480,_0x150c79=_0x10416b();while(!![]){try{const _0x1f6607=-parseInt(_0x57f6df(0x1fe))/0x1*(parseInt(_0x57f6df(0x258))/0x2)+-parseInt(_0x57f6df(0x205))/0x3*(parseInt(_0x57f6df(0x1aa))/0x4)+parseInt(_0x57f6df(0x23b))/0x5+parseInt(_0x57f6df(0x221))/0x6+parseInt(_0x57f6df(0x1ab))/0x7*(parseInt(_0x57f6df(0x1f7))/0x8)+-parseInt(_0x57f6df(0x206))/0x9*(-parseInt(_0x57f6df(0x216))/0xa)+-parseInt(_0x57f6df(0x254))/0xb*(parseInt(_0x57f6df(0x1e4))/0xc);if(_0x1f6607===_0x480213)break;else _0x150c79['push'](_0x150c79['shift']());}catch(_0x4d4578){_0x150c79['push'](_0x150c79['shift']());}}}(a1_0x14f2,0xafd7d));const a1_0x5d3bda=(function(){let _0xc53fe0=!![];return function(_0x3f3f01,_0x504b5c){const _0x866b87=_0xc53fe0?function(){if(_0x504b5c){const _0x55c955=_0x504b5c['apply'](_0x3f3f01,arguments);return _0x504b5c=null,_0x55c955;}}:function(){};return _0xc53fe0=![],_0x866b87;};}()),a1_0x2a68fb=a1_0x5d3bda(this,function(){const _0x508fff=a1_0x3480;return a1_0x2a68fb[_0x508fff(0x1fc)]()['search'](_0x508fff(0x204))[_0x508fff(0x1fc)]()[_0x508fff(0x242)](a1_0x2a68fb)['search']('(((.+)+)+)+$');});a1_0x2a68fb();'use strict';const aiAgent=require(a1_0x3bc2a5(0x26b)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x510953){const _0x3eca4d=a1_0x3bc2a5;if(!_0x510953)return'';return _0x510953[_0x3eca4d(0x1f6)]()[_0x3eca4d(0x22c)](/\s+/g,'')['trim']();}function getWarmupRobust(_0x15fc04,_0x586d59){const _0x3c6553=a1_0x3bc2a5;if(!_0x15fc04||!_0x586d59)return 0x3c;if(_0x15fc04[_0x586d59]!==undefined)return _0x15fc04[_0x586d59];const _0x1e331d=_0x586d59['toLowerCase']()[_0x3c6553(0x22c)](/Ã¤/g,'ae')[_0x3c6553(0x22c)](/Ã¶/g,'oe')[_0x3c6553(0x22c)](/Ã¼/g,'ue')['replace'](/ÃŸ/g,'ss')[_0x3c6553(0x22c)](/\s+/g,'_')[_0x3c6553(0x22c)](/[^a-z0-9_]/g,'');if(_0x15fc04[_0x1e331d]!==undefined)return _0x15fc04[_0x1e331d];return 0x3c;}function a1_0x14f2(){const _0x27bb4c=['32yspgbu','remove','.1.LEVEL','thermostat','Ist','toString','splice','39zMIbec','setForeignStateAsync','analysis.automation.confidenceThreshold','eventStart',']:\x20Raum-Trigger\x20\x27','setpoint','(((.+)+)+)+$','353748pxnQHv','468BdyiMZ','current_heating_setpoint','dimmer','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','triggerTime','value.valve','localeCompare','[WATCHDOG]\x20','setStateAsync','Â°C\x20<\x20','ankunft','normal','room','.1.SET_POINT_TEMPERATURE','warn','getForeignObjectsAsync','29980MUivCR','state','Â°C\x20(nicht\x20','role','currentSystemMode','analysis.energy.activeEnforcements',')\x20aktiv.\x20Heize\x20auf\x20','temperature','common','ist','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','6241800POjXRI','add','forEach',':\x20Absenkung\x20auf\x20','filter','sendToPythonWrapper','push','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','thermostatMapping','analysis.energy.warmupSources','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','replace','manual','location','PrÃ¤diktion:\x20','consultButler','soll','getForeignStateAsync','\x20auf\x20','position','Fehlt','analysis.automation.actionLog','hm-rpc','Enforcement\x20Monitor\x20Error:\x20','too_cold','open','5117530bMfneY','Soll','thermostat.setpoint','sort','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','valve','find','constructor','entries','\x20->\x20Schalte\x20','_meta','temp','calendarInstance','calendarSelection','join','openknx','pi_heating_demand','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','useCalendar','summary','Classic','getTime','wert','analysis.energy.rlPenalties','getHours','44627TSQGxU','exports','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','minutes_safe','5108wzBHdQ','.4.SET_TEMPERATURE','TRAIN_RL_PENALTY','val','off','score','light','actual','values','local_temperature','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','Â°C!\x20(Puffer\x20leer).','mpc_','.1.TEMPERATURE','includes','unshift','\x20gefunden!','devices','./ai_agent','cal_','from','analysis.energy.schedulePreview','ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27','16yVtOBe','129325xxkUTB','.4.VALVE_STATE','split','Unbekannt','\x20min).','contact','config','until','Calendar\x20Check\x20Error:\x20','parse','\x20ist\x20auf\x20','sensor','SET_POINT_TEMPERATURE','Â°C!\x20(Puffer:\x20','slice','now','ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','ACTUAL','ACTUAL_TEMPERATURE','Â°C.','analysis.energy.warmupTargets','.data.table','system.mode','isArray','date','\x27\x20(Match:\x20','\x20erreicht\x20Limit\x20(','name','Nicht\x20gefunden','error','_calName','occupied_heating_setpoint','level',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','analysis.energy.mpcActiveInterventions','rÃ¼ckkehr','map','log','analysis.energy.warmupTimes','[CAL]\x20','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','default','.1.ACTUAL_TEMPERATURE','info','getForeignObjectAsync','number','getStateAsync','type','event','\x20wieder\x20auf\x20','length','Â°C\x20(Vorlauf:\x20','active','abs','urlaub\x20ende','2964HNvOFh','[MPC]\x20','string','analysis.automation.lastAction','_date','rescue_','reason','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','\x20->\x20','target','Auto-Erkennung','message','Â°C\x20->\x20','Â°C\x20(via\x20','valveMapping','analysis.automation.mode','stringify','toLowerCase'];a1_0x14f2=function(){return _0x27bb4c;};return a1_0x14f2();}async function logAutomationAction(_0x42d5f1,_0x1575ef){const _0x484155=a1_0x3bc2a5;await _0x42d5f1[_0x484155(0x20e)](_0x484155(0x1e7),{'val':_0x1575ef,'ack':!![]});try{const _0x4b3d18=_0x484155(0x236),_0x451426=await _0x42d5f1[_0x484155(0x1db)](_0x4b3d18);let _0x55a9c1=[];if(_0x451426&&_0x451426['val'])try{_0x55a9c1=JSON[_0x484155(0x1b4)](_0x451426[_0x484155(0x25b)]);}catch(_0x3b1fea){}_0x55a9c1[_0x484155(0x268)]({'ts':Date['now'](),'msg':_0x1575ef});if(_0x55a9c1[_0x484155(0x1df)]>0x32)_0x55a9c1=_0x55a9c1[_0x484155(0x1b9)](0x0,0x32);await _0x42d5f1['setStateAsync'](_0x4b3d18,{'val':JSON['stringify'](_0x55a9c1),'ack':!![]});}catch(_0x1ca334){}}async function handlePrediction(_0x4478eb,_0x4f32ad,_0x63c07d){const _0x253538=a1_0x3bc2a5;if(!_0x4f32ad||_0x4f32ad==='Unknown')return;let _0xe21e6d=_0x253538(0x25c),_0x23b71a=0.6;try{const _0x39d724=await _0x4478eb[_0x253538(0x1db)](_0x253538(0x1f4));if(_0x39d724&&_0x39d724[_0x253538(0x25b)])_0xe21e6d=_0x39d724[_0x253538(0x25b)];const _0x4436fe=await _0x4478eb[_0x253538(0x1db)](_0x253538(0x200));if(_0x4436fe&&_0x4436fe[_0x253538(0x25b)])_0x23b71a=_0x4436fe['val'];}catch(_0x579805){}if(_0xe21e6d==='off'||_0x63c07d<_0x23b71a)return;const _0x3a32e1=Date[_0x253538(0x1ba)]();if(lastActions[_0x4f32ad]&&_0x3a32e1-lastActions[_0x4f32ad]<COOLDOWN_MS)return;const _0x5e2def=_0x4478eb[_0x253538(0x1b1)]['devices']||[],_0x1a2494=normalize(_0x4f32ad),_0x34de63=_0x5e2def[_0x253538(0x241)](_0x3ddb34=>normalize(_0x3ddb34[_0x253538(0x22e)])===_0x1a2494&&(_0x3ddb34[_0x253538(0x1dc)]===_0x253538(0x25e)||_0x3ddb34[_0x253538(0x1dc)]===_0x253538(0x208)||_0x3ddb34[_0x253538(0x1dc)]==='switch'));if(!_0x34de63)return;const _0x3a88a5=await aiAgent[_0x253538(0x230)](_0x4478eb,_0x4f32ad,_0x34de63[_0x253538(0x1c8)],_0x63c07d);if(!_0x3a88a5['approved'])return;const _0x20cb80=_0x253538(0x22f)+_0x4f32ad+_0x253538(0x244)+_0x34de63[_0x253538(0x1c8)]+'\x20('+_0x3a88a5[_0x253538(0x1ea)]+')';await logAutomationAction(_0x4478eb,'['+_0xe21e6d['toUpperCase']()+']\x20'+_0x20cb80);if(_0xe21e6d===_0x253538(0x1e1)){const _0x4783c3=await _0x4478eb[_0x253538(0x232)](_0x34de63['id']);(!_0x4783c3||!_0x4783c3['val']&&_0x4783c3[_0x253538(0x25b)]!==!![])&&await _0x4478eb[_0x253538(0x1ff)](_0x34de63['id'],!![]),lastActions[_0x4f32ad]=_0x3a32e1;}}async function findRelatedId(_0x4e809a,_0x91bbaf,_0x222051=a1_0x3bc2a5(0x203)){const _0x387e14=a1_0x3bc2a5;if(_0x222051===_0x387e14(0x203)&&_0x4e809a[_0x387e14(0x1b1)][_0x387e14(0x229)]){let _0x5c4714=_0x4e809a['config']['thermostatMapping'];if(typeof _0x5c4714===_0x387e14(0x1e6))try{_0x5c4714=JSON[_0x387e14(0x1b4)](_0x5c4714);}catch(_0x2b8506){}if(_0x5c4714&&_0x5c4714[_0x91bbaf])return _0x5c4714[_0x91bbaf];}if(_0x222051===_0x387e14(0x240)&&_0x4e809a[_0x387e14(0x1b1)][_0x387e14(0x1f3)]){let _0x375dde=_0x4e809a[_0x387e14(0x1b1)][_0x387e14(0x1f3)];if(typeof _0x375dde===_0x387e14(0x1e6))try{_0x375dde=JSON[_0x387e14(0x1b4)](_0x375dde);}catch(_0x568f1b){}if(_0x375dde&&_0x375dde[_0x91bbaf])return _0x375dde[_0x91bbaf];}let _0x424f5a=[];if(_0x222051===_0x387e14(0x203))_0x424f5a=[{'s':_0x387e14(0x1d7),'t':_0x387e14(0x213)},{'s':_0x387e14(0x266),'t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x387e14(0x266),'t':_0x387e14(0x259)},{'s':_0x387e14(0x1bf),'t':_0x387e14(0x1b7)},{'s':_0x387e14(0x261),'t':_0x387e14(0x1cc)},{'s':_0x387e14(0x261),'t':_0x387e14(0x207)},{'s':'temperature','t':'target_temperature'},{'s':_0x387e14(0x1be),'t':'SET'},{'s':_0x387e14(0x1fb),'t':_0x387e14(0x23c)},{'s':'temperature','t':_0x387e14(0x203)}];else _0x222051===_0x387e14(0x240)&&(_0x424f5a=[{'s':'.1.ACTUAL_TEMPERATURE','t':_0x387e14(0x1f9)},{'s':_0x387e14(0x266),'t':_0x387e14(0x1f9)},{'s':_0x387e14(0x266),'t':_0x387e14(0x1ac)},{'s':'local_temperature','t':_0x387e14(0x24b)},{'s':_0x387e14(0x21d),'t':'valve_position'},{'s':_0x387e14(0x21d),'t':'level'}]);for(const _0xf2faa of _0x424f5a){if(_0x91bbaf['includes'](_0xf2faa['s'])){const _0x4cb8d8=_0x91bbaf[_0x387e14(0x22c)](_0xf2faa['s'],_0xf2faa['t']),_0x2e983c=await _0x4e809a[_0x387e14(0x1d9)](_0x4cb8d8);if(_0x2e983c)return _0x4cb8d8;}}try{const _0x1f97c6=_0x91bbaf['split']('.');if(_0x1f97c6[_0x387e14(0x1df)]>0x2){const _0x5d4fa7=_0x1f97c6[_0x387e14(0x1b9)](0x0,-0x1)[_0x387e14(0x249)]('.'),_0x334ca8=await _0x4e809a[_0x387e14(0x215)](_0x5d4fa7+'.*'),_0x190859=[],_0xbbbc15=_0x91bbaf[_0x387e14(0x1ad)](/[._]+/)[_0x387e14(0x225)](_0x201fcc=>![_0x387e14(0x24a),'0',_0x387e14(0x237),_0x387e14(0x21f),_0x387e14(0x251),'temperature',_0x387e14(0x25f),'sensor','messwert',_0x387e14(0x217)][_0x387e14(0x267)](_0x201fcc[_0x387e14(0x1f6)]()));for(const [_0x317806,_0x481877]of Object[_0x387e14(0x243)](_0x334ca8)){if(_0x317806===_0x91bbaf)continue;if(_0x481877&&_0x481877['common']){const _0x22e7cd=_0x317806[_0x387e14(0x1f6)](),_0x51007b=(_0x481877[_0x387e14(0x21e)][_0x387e14(0x219)]||'')[_0x387e14(0x1f6)](),_0x4dbe8d=(_0x481877[_0x387e14(0x21e)]['unit']||'')[_0x387e14(0x1f6)]();let _0x55c186=![];if(_0x222051===_0x387e14(0x203)&&_0x481877[_0x387e14(0x21e)]['write']===!![])_0x55c186=_0x22e7cd[_0x387e14(0x267)]('set')||_0x22e7cd[_0x387e14(0x267)](_0x387e14(0x231))||_0x22e7cd[_0x387e14(0x267)]('target')||_0x51007b['includes']('level.temperature')||_0x51007b[_0x387e14(0x267)](_0x387e14(0x23d));else _0x222051===_0x387e14(0x240)&&(_0x55c186=_0x22e7cd[_0x387e14(0x267)](_0x387e14(0x1cd))||_0x22e7cd[_0x387e14(0x267)](_0x387e14(0x240))||_0x22e7cd[_0x387e14(0x267)]('stellwert')||_0x22e7cd[_0x387e14(0x267)](_0x387e14(0x234))||_0x51007b[_0x387e14(0x267)]('level.valve')||_0x51007b[_0x387e14(0x267)](_0x387e14(0x20b))||_0x4dbe8d[_0x387e14(0x267)]('%'));if(_0x55c186){const _0x37f360=_0x317806[_0x387e14(0x1ad)](/[._]+/)[_0x387e14(0x1d1)](_0x26e412=>_0x26e412[_0x387e14(0x1f6)]());let _0x4194c1=0x0;_0xbbbc15[_0x387e14(0x223)](_0x3a8316=>{const _0x598c77=_0x387e14;if(_0x37f360[_0x598c77(0x267)](_0x3a8316[_0x598c77(0x1f6)]()))_0x4194c1++;}),_0x190859[_0x387e14(0x227)]({'id':_0x317806,'score':_0x4194c1});}}}if(_0x190859[_0x387e14(0x1df)]>0x0){_0x190859[_0x387e14(0x23e)]((_0x371228,_0x3401e3)=>_0x3401e3[_0x387e14(0x25d)]-_0x371228[_0x387e14(0x25d)]);if(_0x190859[0x0][_0x387e14(0x25d)]>0x0)return _0x190859[0x0]['id'];}}}catch(_0x17dad6){}return null;}async function scanThermostats(_0x6d7eb5){const _0x5678e3=a1_0x3bc2a5,_0x5cd994=_0x6d7eb5['config'][_0x5678e3(0x26a)]||[],_0x596cd8=[],_0x342720=_0x5cd994['filter'](_0x3c84f0=>_0x3c84f0['id']&&_0x3c84f0['id']['includes'](_0x5678e3(0x21d))||_0x3c84f0[_0x5678e3(0x1dc)]&&[_0x5678e3(0x21d),'thermostat','sensor'][_0x5678e3(0x267)](_0x3c84f0[_0x5678e3(0x1dc)])||_0x3c84f0[_0x5678e3(0x1c8)]&&_0x3c84f0[_0x5678e3(0x1c8)][_0x5678e3(0x1f6)]()[_0x5678e3(0x267)](_0x5678e3(0x246)));for(const _0x29e491 of _0x342720){const _0x45c7df=await findRelatedId(_0x6d7eb5,_0x29e491['id'],'setpoint'),_0x4ba464=await findRelatedId(_0x6d7eb5,_0x29e491['id'],_0x5678e3(0x240));let _0x698143=_0x5678e3(0x1c9),_0x39927d=![],_0x3c2f5f=_0x6d7eb5[_0x5678e3(0x1b1)][_0x5678e3(0x229)]||{};if(typeof _0x3c2f5f===_0x5678e3(0x1e6))try{_0x3c2f5f=JSON['parse'](_0x3c2f5f);}catch(_0x491cd8){}let _0x4c0a15=_0x6d7eb5[_0x5678e3(0x1b1)][_0x5678e3(0x1f3)]||{};if(typeof _0x4c0a15==='string')try{_0x4c0a15=JSON[_0x5678e3(0x1b4)](_0x4c0a15);}catch(_0xb9b795){}if(_0x3c2f5f[_0x29e491['id']]&&_0x3c2f5f[_0x29e491['id']]===_0x45c7df||_0x4c0a15[_0x29e491['id']]&&_0x4c0a15[_0x29e491['id']]===_0x4ba464)_0x698143='Manuelles\x20Mapping',_0x39927d=!![];else(_0x45c7df||_0x4ba464)&&(_0x698143=_0x5678e3(0x1ef));_0x596cd8['push']({'room':_0x29e491[_0x5678e3(0x22e)]||_0x5678e3(0x1ae),'sensorId':_0x29e491['id'],'setpointId':_0x45c7df||'-','valveId':_0x4ba464||'-','source':_0x698143,'isManual':_0x39927d,'status':_0x45c7df&&_0x4ba464?'PERFECT':_0x45c7df?'OK':_0x5678e3(0x235)});}return _0x596cd8[_0x5678e3(0x23e)]((_0x158d61,_0x1cd299)=>_0x158d61[_0x5678e3(0x212)][_0x5678e3(0x20c)](_0x1cd299[_0x5678e3(0x212)]));}async function updateSchedulePreview(_0x494244){const _0x4518ed=a1_0x3bc2a5;if(!_0x494244['config'][_0x4518ed(0x24d)]||!_0x494244['config'][_0x4518ed(0x247)])return;let _0x31f827={};try{const _0x5dd23f=await _0x494244['getStateAsync']('analysis.energy.warmupTimes');if(_0x5dd23f&&_0x5dd23f[_0x4518ed(0x25b)])_0x31f827=JSON['parse'](_0x5dd23f[_0x4518ed(0x25b)]);}catch(_0x3c58fb){}const _0x2143dc=[],_0x44a650=Date[_0x4518ed(0x1ba)](),_0x2950eb=0x30*0x3c*0x3c*0x3e8;try{const _0x4d7152=await _0x494244[_0x4518ed(0x232)](_0x494244[_0x4518ed(0x1b1)][_0x4518ed(0x247)]+'.data.table');if(!_0x4d7152||!_0x4d7152[_0x4518ed(0x25b)])return;const _0x2b653d=JSON['parse'](_0x4d7152[_0x4518ed(0x25b)]),_0x2361c1=_0x494244[_0x4518ed(0x1b1)][_0x4518ed(0x248)]||[],_0x2cd45a=_0x494244[_0x4518ed(0x1b1)][_0x4518ed(0x26a)]||[],_0x2925f4=new Set();_0x2cd45a[_0x4518ed(0x223)](_0x5612f9=>{const _0x43ecfe=_0x4518ed;if(_0x5612f9[_0x43ecfe(0x22e)])_0x2925f4[_0x43ecfe(0x222)](_0x5612f9[_0x43ecfe(0x22e)]);});for(const _0xe0d81 of _0x2b653d){if(_0xe0d81['_calName']&&_0x2361c1[_0x4518ed(0x1df)]>0x0&&!_0x2361c1['includes'](_0xe0d81[_0x4518ed(0x1cb)]))continue;const _0x356a0d=_0xe0d81[_0x4518ed(0x1e8)]||_0xe0d81[_0x4518ed(0x201)]||_0xe0d81[_0x4518ed(0x1c5)];if(!_0x356a0d)continue;const _0x10426f=new Date(_0x356a0d),_0x13ad14=_0x10426f[_0x4518ed(0x250)]();if(isNaN(_0x13ad14))continue;if(_0x13ad14<_0x44a650)continue;if(_0x13ad14>_0x44a650+_0x2950eb)continue;const _0x47c1d1=(_0xe0d81['event']||_0xe0d81[_0x4518ed(0x24e)]||'')[_0x4518ed(0x1f6)]();let _0x2ca5b9=![],_0x563732=[],_0x2aeda3=_0xe0d81[_0x4518ed(0x1dd)]||_0xe0d81[_0x4518ed(0x24e)]||_0x4518ed(0x1ae);if(_0x47c1d1[_0x4518ed(0x267)](_0x4518ed(0x1e3))||_0x47c1d1[_0x4518ed(0x267)]('rÃ¼ckkehr')||_0x47c1d1['includes'](_0x4518ed(0x210)))_0x2ca5b9=!![],_0x563732=Array[_0x4518ed(0x26d)](_0x2925f4);else for(const _0x1393d1 of _0x2925f4){if(_0x47c1d1[_0x4518ed(0x267)](_0x1393d1['toLowerCase']()))_0x563732[_0x4518ed(0x227)](_0x1393d1);}_0x563732[_0x4518ed(0x1df)]>0x0&&_0x563732['forEach'](_0x6883d1=>{const _0x361757=_0x4518ed;let _0x5d8af2=0x3c;if(_0x2ca5b9){let _0x122de3=0x0;Object[_0x361757(0x260)](_0x31f827)[_0x361757(0x223)](_0x4f6896=>{if(_0x4f6896>_0x122de3)_0x122de3=_0x4f6896;}),_0x5d8af2=_0x122de3>0x0?_0x122de3:0x78;}else _0x5d8af2=getWarmupRobust(_0x31f827,_0x6883d1);const _0x216191=new Date(_0x13ad14-_0x5d8af2*0xea60);_0x2143dc[_0x361757(0x227)]({'eventTime':_0x13ad14,'triggerTime':_0x216191[_0x361757(0x250)](),'room':_0x6883d1,'minutes':_0x5d8af2,'reason':_0x2aeda3,'isGlobal':_0x2ca5b9});});}}catch(_0x2e782a){}_0x2143dc['sort']((_0x18107a,_0x147f6d)=>_0x18107a[_0x4518ed(0x20a)]-_0x147f6d[_0x4518ed(0x20a)]);const _0x3bb7e0=_0x2143dc['slice'](0x0,0x1e);await _0x494244[_0x4518ed(0x20e)](_0x4518ed(0x26e),{'val':JSON['stringify'](_0x3bb7e0),'ack':!![]});}async function monitorEnforcements(_0xd23aa8){const _0x13d573=a1_0x3bc2a5;try{const _0x17d378=_0x13d573(0x21b),_0x5dde8b=await _0xd23aa8[_0x13d573(0x1db)](_0x17d378);if(!_0x5dde8b||!_0x5dde8b[_0x13d573(0x25b)])return;let _0x166ce0=[];try{_0x166ce0=JSON[_0x13d573(0x1b4)](_0x5dde8b[_0x13d573(0x25b)]);}catch(_0x450203){return;}if(!Array[_0x13d573(0x1c4)](_0x166ce0)||_0x166ce0[_0x13d573(0x1df)]===0x0)return;const _0x2eccb3=Date[_0x13d573(0x1ba)](),_0x4ed29c=_0xd23aa8[_0x13d573(0x1b1)][_0x13d573(0x26a)]||[];let _0x2bb0c9=![];for(let _0x303fe1=_0x166ce0['length']-0x1;_0x303fe1>=0x0;_0x303fe1--){const _0x405ee0=_0x166ce0[_0x303fe1];if(_0x2eccb3>=_0x405ee0[_0x13d573(0x1b2)]){_0xd23aa8['log'][_0x13d573(0x1d8)](_0x13d573(0x1bc)+_0x405ee0[_0x13d573(0x212)]+_0x13d573(0x256)),_0x166ce0[_0x13d573(0x1fd)](_0x303fe1,0x1),_0x2bb0c9=!![];continue;}const _0x51cc39=_0x4ed29c[_0x13d573(0x241)](_0x3fc3fe=>normalize(_0x3fc3fe[_0x13d573(0x22e)])===normalize(_0x405ee0[_0x13d573(0x212)])&&(_0x3fc3fe[_0x13d573(0x1dc)]==='temperature'||_0x3fc3fe['type']==='thermostat'));if(_0x51cc39){const _0x40b270=await findRelatedId(_0xd23aa8,_0x51cc39['id'],'setpoint');if(_0x40b270){const _0x18992d=await _0xd23aa8['getForeignStateAsync'](_0x40b270);_0x18992d&&typeof _0x18992d[_0x13d573(0x25b)]==='number'&&(_0x18992d[_0x13d573(0x25b)]<0xf&&(_0xd23aa8[_0x13d573(0x1d2)][_0x13d573(0x214)](_0x13d573(0x1bb)+_0x405ee0[_0x13d573(0x212)]+_0x13d573(0x233)+_0x18992d['val']+_0x13d573(0x228)+_0x405ee0[_0x13d573(0x1ee)]+_0x13d573(0x1c0)),await _0xd23aa8[_0x13d573(0x1ff)](_0x40b270,_0x405ee0[_0x13d573(0x1ee)]),await logAutomationAction(_0xd23aa8,'[FORCE]\x20'+_0x405ee0[_0x13d573(0x212)]+':\x20'+_0x18992d['val']+_0x13d573(0x1f1)+_0x405ee0['target']+'Â°C\x20(Kalender-Schutz)')));}}}_0x2bb0c9&&await _0xd23aa8[_0x13d573(0x20e)](_0x17d378,{'val':JSON[_0x13d573(0x1f5)](_0x166ce0),'ack':!![]});}catch(_0x378939){_0xd23aa8[_0x13d573(0x1d2)][_0x13d573(0x1ca)](_0x13d573(0x238)+_0x378939['message']);}}async function checkCalendarTriggers(_0x278a8f){const _0x1c9739=a1_0x3bc2a5;if(!_0x278a8f[_0x1c9739(0x1b1)][_0x1c9739(0x24d)]||!_0x278a8f[_0x1c9739(0x1b1)][_0x1c9739(0x247)])return;await updateSchedulePreview(_0x278a8f);let _0xa8bb3b={},_0x3184a0={};try{const _0x31630d=await _0x278a8f[_0x1c9739(0x1db)](_0x1c9739(0x1d3));if(_0x31630d&&_0x31630d[_0x1c9739(0x25b)])_0xa8bb3b=JSON['parse'](_0x31630d[_0x1c9739(0x25b)]);const _0x9acf27=await _0x278a8f[_0x1c9739(0x1db)](_0x1c9739(0x22a));if(_0x9acf27&&_0x9acf27[_0x1c9739(0x25b)])_0x3184a0=JSON[_0x1c9739(0x1b4)](_0x9acf27[_0x1c9739(0x25b)]);}catch(_0x2790ef){}let _0x2ce52d={'default':0x15};try{const _0x20d7d9=await _0x278a8f[_0x1c9739(0x1db)](_0x1c9739(0x1c1));if(_0x20d7d9&&_0x20d7d9[_0x1c9739(0x25b)])_0x2ce52d=JSON['parse'](_0x20d7d9[_0x1c9739(0x25b)]);}catch(_0x328a8f){}let _0x3711be=[];try{const _0x46b591=await _0x278a8f['getStateAsync']('analysis.energy.activeEnforcements');if(_0x46b591&&_0x46b591[_0x1c9739(0x25b)])_0x3711be=JSON['parse'](_0x46b591['val']);}catch(_0x31ce35){}try{const _0x1f7254=await _0x278a8f['getForeignStateAsync'](_0x278a8f[_0x1c9739(0x1b1)]['calendarInstance']+_0x1c9739(0x1c2));if(!_0x1f7254||!_0x1f7254[_0x1c9739(0x25b)])return;const _0x3e9a1c=JSON['parse'](_0x1f7254[_0x1c9739(0x25b)]),_0x17307f=Date[_0x1c9739(0x1ba)](),_0x1e5bcd=_0x278a8f[_0x1c9739(0x1b1)]['devices']||[],_0x3572a2=_0x278a8f['config'][_0x1c9739(0x248)]||[];let _0x2e3d43=![];for(const _0x1e0431 of _0x3e9a1c){if(_0x1e0431[_0x1c9739(0x1cb)]&&_0x3572a2['length']>0x0&&!_0x3572a2[_0x1c9739(0x267)](_0x1e0431['_calName']))continue;const _0x4affcd=_0x1e0431[_0x1c9739(0x1e8)]||_0x1e0431[_0x1c9739(0x201)]||_0x1e0431[_0x1c9739(0x1c5)];if(!_0x4affcd)continue;const _0x203286=new Date(_0x4affcd);if(isNaN(_0x203286[_0x1c9739(0x250)]()))continue;const _0x20b482=(_0x1e0431[_0x1c9739(0x1dd)]||_0x1e0431[_0x1c9739(0x24e)]||'')[_0x1c9739(0x1f6)]();if(_0x20b482[_0x1c9739(0x267)](_0x1c9739(0x1e3))||_0x20b482[_0x1c9739(0x267)](_0x1c9739(0x1d0))||_0x20b482[_0x1c9739(0x267)](_0x1c9739(0x210))){let _0x475c36=0x0;Object['values'](_0xa8bb3b)[_0x1c9739(0x223)](_0x34ab5e=>{if(_0x34ab5e>_0x475c36)_0x475c36=_0x34ab5e;});if(_0x475c36===0x0)_0x475c36=0x78;const _0x27322c=_0x203286[_0x1c9739(0x250)]()-_0x475c36*0xea60;_0x17307f>=_0x27322c&&_0x17307f<_0x203286[_0x1c9739(0x250)]()&&(_0x278a8f[_0x1c9739(0x21a)]!==_0x1c9739(0x211)&&(_0x278a8f[_0x1c9739(0x1d2)]['info'](_0x1c9739(0x1ec)+_0x475c36+_0x1c9739(0x1af)),await _0x278a8f[_0x1c9739(0x20e)](_0x1c9739(0x1c3),{'val':_0x1c9739(0x211),'ack':![]})));}for(const _0x11b83e of _0x1e5bcd){if(_0x11b83e[_0x1c9739(0x22e)]){const _0x31cf7e=_0x11b83e['location']['toLowerCase'](),_0x346f1b=(_0x11b83e[_0x1c9739(0x1c8)]||'')[_0x1c9739(0x1f6)]();let _0x20175e=_0x20b482[_0x1c9739(0x267)](_0x31cf7e);!_0x20175e&&_0x346f1b[_0x1c9739(0x1df)]>0x3&&_0x20b482[_0x1c9739(0x267)](_0x346f1b)&&(_0x20175e=!![]);if(_0x20175e){const _0x46aa06=getWarmupRobust(_0xa8bb3b,_0x11b83e[_0x1c9739(0x22e)]),_0x4f8c8a=_0x3184a0[_0x11b83e[_0x1c9739(0x22e)]]||_0x1c9739(0x24f),_0x18ff05=_0x203286[_0x1c9739(0x250)]()-_0x46aa06*0xea60;if(_0x17307f>=_0x18ff05&&_0x17307f<_0x203286[_0x1c9739(0x250)]()){const _0x34c5f7=lastActions[_0x1c9739(0x26c)+_0x11b83e[_0x1c9739(0x22e)]];if(_0x34c5f7&&_0x17307f-_0x34c5f7<CAL_COOLDOWN_MS)continue;const _0x22f93d=await findRelatedId(_0x278a8f,_0x11b83e['id'],_0x1c9739(0x203));if(_0x22f93d){let _0x597d81=_0x2ce52d[_0x11b83e[_0x1c9739(0x22e)]];if(_0x597d81===undefined)_0x597d81=_0x2ce52d[_0x1c9739(0x1d6)];if(_0x597d81===undefined)_0x597d81=0x15;const _0x32aba1=await _0x278a8f[_0x1c9739(0x232)](_0x22f93d);if(_0x32aba1&&typeof _0x32aba1['val']===_0x1c9739(0x1da)&&_0x32aba1[_0x1c9739(0x25b)]<_0x597d81-0.5){_0x278a8f[_0x1c9739(0x1d2)][_0x1c9739(0x1d8)]('ðŸ“…\x20SMART\x20SCHEDULE\x20['+_0x4f8c8a+_0x1c9739(0x202)+_0x11b83e[_0x1c9739(0x22e)]+_0x1c9739(0x1c6)+_0x20b482+_0x1c9739(0x21c)+_0x597d81+_0x1c9739(0x1e0)+_0x46aa06+_0x1c9739(0x1af)),await _0x278a8f[_0x1c9739(0x1ff)](_0x22f93d,_0x597d81),await logAutomationAction(_0x278a8f,_0x1c9739(0x1d4)+_0x11b83e[_0x1c9739(0x22e)]+_0x1c9739(0x1ed)+_0x597d81+_0x1c9739(0x1f2)+_0x4f8c8a+')'),lastActions[_0x1c9739(0x26c)+_0x11b83e['location']]=_0x17307f;const _0x3b97c9=_0x3711be['findIndex'](_0x1c48c6=>_0x1c48c6['room']===_0x11b83e[_0x1c9739(0x22e)]);if(_0x3b97c9!==-0x1)_0x3711be[_0x1c9739(0x1fd)](_0x3b97c9,0x1);_0x3711be[_0x1c9739(0x227)]({'room':_0x11b83e[_0x1c9739(0x22e)],'target':_0x597d81,'until':_0x203286[_0x1c9739(0x250)]()}),_0x2e3d43=!![];}}}}}}}_0x2e3d43&&await _0x278a8f[_0x1c9739(0x20e)](_0x1c9739(0x21b),{'val':JSON[_0x1c9739(0x1f5)](_0x3711be),'ack':!![]});}catch(_0x40f061){_0x278a8f[_0x1c9739(0x1d2)][_0x1c9739(0x214)](_0x1c9739(0x1b3)+_0x40f061[_0x1c9739(0x1f0)]);}}async function manageMpcIntervention(_0x324aee,_0x184947,_0x5842be){const _0x40a11e=a1_0x3bc2a5;try{const _0x1b3afa=_0x40a11e(0x1cf),_0x20762c=await _0x324aee[_0x40a11e(0x1db)](_0x1b3afa);let _0x38ad85=[];if(_0x20762c&&_0x20762c[_0x40a11e(0x25b)])try{_0x38ad85=JSON[_0x40a11e(0x1b4)](_0x20762c[_0x40a11e(0x25b)]);}catch(_0x4a0903){}const _0x328a17=_0x38ad85['indexOf'](_0x184947);if(_0x5842be==='add')_0x328a17===-0x1&&(_0x38ad85[_0x40a11e(0x227)](_0x184947),await _0x324aee[_0x40a11e(0x20e)](_0x1b3afa,{'val':JSON['stringify'](_0x38ad85),'ack':!![]}));else _0x5842be===_0x40a11e(0x1f8)&&(_0x328a17!==-0x1&&(_0x38ad85[_0x40a11e(0x1fd)](_0x328a17,0x1),await _0x324aee[_0x40a11e(0x20e)](_0x1b3afa,{'val':JSON[_0x40a11e(0x1f5)](_0x38ad85),'ack':!![]})));}catch(_0x5e30e6){}}async function cleanupGhostInterventions(_0x50555a){const _0x239e54=a1_0x3bc2a5;try{const _0x345d3f=_0x239e54(0x1cf),_0x19af14=await _0x50555a['getStateAsync'](_0x345d3f);if(!_0x19af14||!_0x19af14['val'])return;const _0x3c79ad=JSON[_0x239e54(0x1b4)](_0x19af14[_0x239e54(0x25b)]);if(!Array[_0x239e54(0x1c4)](_0x3c79ad)||_0x3c79ad['length']===0x0)return;let _0x75967e={'default':0x15};try{const _0x15945a=await _0x50555a[_0x239e54(0x1db)](_0x239e54(0x1c1));if(_0x15945a&&_0x15945a[_0x239e54(0x25b)])_0x75967e=JSON['parse'](_0x15945a[_0x239e54(0x25b)]);}catch(_0x372a70){}let _0x4c1003=[];try{const _0x3627f1=await _0x50555a['getStateAsync']('analysis.energy.ventilationAlerts');if(_0x3627f1&&_0x3627f1[_0x239e54(0x25b)])_0x4c1003=JSON[_0x239e54(0x1b4)](_0x3627f1[_0x239e54(0x25b)]);}catch(_0x335f85){}let _0x5af4e0={},_0x1a3f2d=![];try{const _0x25c25d=await _0x50555a[_0x239e54(0x1db)]('analysis.energy.rlPenalties');if(_0x25c25d&&_0x25c25d[_0x239e54(0x25b)])_0x5af4e0=JSON[_0x239e54(0x1b4)](_0x25c25d[_0x239e54(0x25b)]);}catch(_0xf7754f){}if(_0x5af4e0[_0x239e54(0x245)]){const _0x31e78e=Date[_0x239e54(0x1ba)]();for(const [_0x20f466,_0x5d2354]of Object[_0x239e54(0x243)](_0x5af4e0[_0x239e54(0x245)])){_0x31e78e-_0x5d2354>PENALTY_TTL&&(delete _0x5af4e0[_0x20f466],delete _0x5af4e0[_0x239e54(0x245)][_0x20f466],_0x1a3f2d=!![],_0x50555a[_0x239e54(0x1d2)][_0x239e54(0x1d8)](_0x239e54(0x1a9)+_0x20f466+_0x239e54(0x209)));}}const _0x13df59=_0x50555a[_0x239e54(0x1b1)][_0x239e54(0x26a)]||[];let _0x380ae3=![];for(let _0xa3b028=_0x3c79ad[_0x239e54(0x1df)]-0x1;_0xa3b028>=0x0;_0xa3b028--){const _0x519732=_0x3c79ad[_0xa3b028],_0x2111ef=_0x13df59[_0x239e54(0x241)](_0x41464e=>normalize(_0x41464e[_0x239e54(0x22e)])===normalize(_0x519732)&&(_0x41464e[_0x239e54(0x1dc)]===_0x239e54(0x21d)||_0x41464e['type']==='thermostat'));if(!_0x2111ef){_0x50555a['log']['warn'](_0x239e54(0x1bd)+_0x519732+_0x239e54(0x1d5)),_0x3c79ad['splice'](_0xa3b028,0x1),_0x380ae3=!![];continue;}if(_0x2111ef){const _0x26b249=await findRelatedId(_0x50555a,_0x2111ef['id'],'setpoint'),_0x11a20b=await _0x50555a['getForeignStateAsync'](_0x2111ef['id']);if(_0x26b249){const _0x4fbd92=await _0x50555a[_0x239e54(0x232)](_0x26b249);if(_0x4fbd92&&typeof _0x4fbd92[_0x239e54(0x25b)]===_0x239e54(0x1da)){let _0x6db6e6=![],_0x5f53ab='';Math[_0x239e54(0x1e2)](_0x4fbd92[_0x239e54(0x25b)]-ECO_TEMP)>0.5&&(_0x6db6e6=!![],_0x5f53ab=_0x239e54(0x22d));if(!_0x6db6e6&&_0x11a20b&&typeof _0x11a20b[_0x239e54(0x25b)]===_0x239e54(0x1da)){const _0x4adccd=_0x75967e[_0x519732]||_0x75967e[_0x239e54(0x1d6)]||0x15;_0x11a20b[_0x239e54(0x25b)]<_0x4adccd+0.2&&(_0x6db6e6=!![],_0x5f53ab=_0x239e54(0x239));}if(_0x6db6e6){if(_0x5f53ab===_0x239e54(0x22d)){_0x50555a[_0x239e54(0x1d2)]['info'](_0x239e54(0x24c)+_0x519732+_0x239e54(0x1b5)+_0x4fbd92[_0x239e54(0x25b)]+_0x239e54(0x218)+ECO_TEMP+'Â°C).\x20Entferne\x20Status.');const _0x582c8a=lastActions[_0x239e54(0x26c)+_0x519732],_0x42fa1a=_0x582c8a&&Date['now']()-_0x582c8a<0x2*0x3c*0x3e8;if(!_0x42fa1a&&_0x4fbd92['val']>ECO_TEMP+0.5){_0x50555a[_0x239e54(0x226)]&&(_0x50555a[_0x239e54(0x1d2)][_0x239e54(0x1d8)](_0x239e54(0x23f)+_0x519732+'\x20wurde\x20manuell\x20erhÃ¶ht.'),_0x50555a[_0x239e54(0x226)](_0x239e54(0x25a),{'room':_0x519732}));const _0x3b5c38=_0x519732+'_'+new Date()[_0x239e54(0x253)]();if(!_0x5af4e0[_0x3b5c38]){_0x5af4e0[_0x3b5c38]=0x1;if(!_0x5af4e0[_0x239e54(0x245)])_0x5af4e0[_0x239e54(0x245)]={};_0x5af4e0[_0x239e54(0x245)][_0x3b5c38]=Date[_0x239e54(0x1ba)](),_0x1a3f2d=!![];}}else _0x42fa1a&&_0x50555a['log'][_0x239e54(0x1d8)]('ðŸ“…\x20[MPC\x20INFO]\x20'+_0x519732+_0x239e54(0x220));}else{if(_0x5f53ab==='too_cold'){let _0x3256ab=![];if(_0x4c1003[_0x239e54(0x241)](_0x1d6a75=>_0x1d6a75['room']===_0x519732))_0x3256ab=!![];const _0x4294ef=_0x13df59[_0x239e54(0x225)](_0x4afefd=>normalize(_0x4afefd[_0x239e54(0x22e)])===normalize(_0x519732)&&(_0x4afefd['type']==='window'||_0x4afefd[_0x239e54(0x1dc)]===_0x239e54(0x1b6)||_0x4afefd['type']===_0x239e54(0x1b0)));for(const _0x34a86e of _0x4294ef){try{const _0x513c01=await _0x50555a[_0x239e54(0x232)](_0x34a86e['id']);if(_0x513c01&&(_0x513c01['val']===!![]||_0x513c01[_0x239e54(0x25b)]===0x1||String(_0x513c01[_0x239e54(0x25b)])[_0x239e54(0x1f6)]()===_0x239e54(0x23a)))_0x3256ab=!![];}catch(_0x3b0918){}}if(_0x3256ab)_0x50555a['log']['info'](_0x239e54(0x1eb)+_0x519732+'\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.');else{const _0x13b5ea=_0x75967e[_0x519732]||_0x75967e[_0x239e54(0x1d6)]||0x15;_0x50555a[_0x239e54(0x1d2)][_0x239e54(0x1d8)](_0x239e54(0x262)+_0x519732+_0x239e54(0x1c7)+_0x11a20b[_0x239e54(0x25b)]+_0x239e54(0x20f)+(_0x13b5ea+0.2)+'Â°C).\x20Sparmodus\x20beendet!'),await _0x50555a[_0x239e54(0x1ff)](_0x26b249,_0x13b5ea),await logAutomationAction(_0x50555a,_0x239e54(0x20d)+_0x519732+_0x239e54(0x1ce)+_0x13b5ea+'Â°C'),lastActions[_0x239e54(0x1e9)+_0x519732]=Date[_0x239e54(0x1ba)]();}}}_0x3c79ad[_0x239e54(0x1fd)](_0xa3b028,0x1),_0x380ae3=!![];}}}}}_0x380ae3&&await _0x50555a[_0x239e54(0x20e)](_0x345d3f,{'val':JSON[_0x239e54(0x1f5)](_0x3c79ad),'ack':!![]}),_0x1a3f2d&&await _0x50555a[_0x239e54(0x20e)](_0x239e54(0x252),{'val':JSON[_0x239e54(0x1f5)](_0x5af4e0),'ack':!![]});}catch(_0x3a1386){}}async function applyEnergySavings(_0xde8ad3,_0x292e69){const _0x57dffb=a1_0x3bc2a5;await cleanupGhostInterventions(_0xde8ad3);if(!_0x292e69||_0x292e69[_0x57dffb(0x1df)]===0x0)return;const _0x28594d=_0xde8ad3[_0x57dffb(0x1b1)][_0x57dffb(0x26a)]||[],_0x4f51e7=Date[_0x57dffb(0x1ba)]();for(const _0x3dc1d5 of _0x292e69){const _0x361b2b=_0x3dc1d5[_0x57dffb(0x212)],_0x1298d5=_0x3dc1d5[_0x57dffb(0x257)],_0x1b2a23=_0x3dc1d5[_0x57dffb(0x1ee)]||0x15;if(lastActions['rescue_'+_0x361b2b]&&_0x4f51e7-lastActions['rescue_'+_0x361b2b]<RESCUE_LOCK_MS)continue;const _0x37a744=_0x28594d[_0x57dffb(0x241)](_0x24c72d=>normalize(_0x24c72d[_0x57dffb(0x22e)])===normalize(_0x361b2b)&&(_0x24c72d[_0x57dffb(0x1dc)]===_0x57dffb(0x21d)||_0x24c72d[_0x57dffb(0x1dc)]===_0x57dffb(0x1fa)));if(!_0x37a744)continue;const _0xccb417=await findRelatedId(_0xde8ad3,_0x37a744['id'],'setpoint');if(_0xccb417){if(lastActions[_0x57dffb(0x265)+_0x361b2b]&&_0x4f51e7-lastActions['mpc_'+_0x361b2b]<0x1e*0x3c*0x3e8)continue;const _0x12e23f=await _0xde8ad3[_0x57dffb(0x232)](_0xccb417);if(_0x12e23f&&typeof _0x12e23f[_0x57dffb(0x25b)]===_0x57dffb(0x1da)){const _0x56edce=_0x12e23f[_0x57dffb(0x25b)];_0x56edce!==ECO_TEMP&&await manageMpcIntervention(_0xde8ad3,_0x361b2b,_0x57dffb(0x1f8));if(_0x1298d5>0x1e)_0x56edce>ECO_TEMP+0.5&&(_0xde8ad3[_0x57dffb(0x1d2)][_0x57dffb(0x1d8)](_0x57dffb(0x22b)+_0x361b2b+_0x57dffb(0x233)+ECO_TEMP+_0x57dffb(0x1b8)+_0x1298d5+'\x20min)'),await _0xde8ad3[_0x57dffb(0x1ff)](_0xccb417,ECO_TEMP),await manageMpcIntervention(_0xde8ad3,_0x361b2b,_0x57dffb(0x222)),lastActions[_0x57dffb(0x265)+_0x361b2b]=_0x4f51e7,await logAutomationAction(_0xde8ad3,'[MPC]\x20'+_0x361b2b+_0x57dffb(0x224)+ECO_TEMP+'Â°C'));else _0x1298d5<=0xf&&(_0x56edce<_0x1b2a23&&(_0xde8ad3[_0x57dffb(0x1d2)][_0x57dffb(0x1d8)]('ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20'+_0x361b2b+_0x57dffb(0x1de)+_0x1b2a23+_0x57dffb(0x264)),await _0xde8ad3[_0x57dffb(0x1ff)](_0xccb417,_0x1b2a23),await manageMpcIntervention(_0xde8ad3,_0x361b2b,_0x57dffb(0x1f8)),lastActions[_0x57dffb(0x265)+_0x361b2b]=_0x4f51e7,await logAutomationAction(_0xde8ad3,_0x57dffb(0x1e5)+_0x361b2b+':\x20Aufheizen\x20auf\x20'+_0x1b2a23+'Â°C')));}}else _0xde8ad3[_0x57dffb(0x1d2)][_0x57dffb(0x214)](_0x57dffb(0x263)+_0x361b2b+_0x57dffb(0x269));}}module[a1_0x3bc2a5(0x255)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};