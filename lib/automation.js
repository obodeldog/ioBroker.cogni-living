const a1_0x2f58c4=a1_0x2c90;(function(_0xfc0718,_0x30ea76){const _0x289c84=a1_0x2c90,_0x2a41d9=_0xfc0718();while(!![]){try{const _0x349bc7=parseInt(_0x289c84(0x1de))/0x1+parseInt(_0x289c84(0x1e3))/0x2+-parseInt(_0x289c84(0x1f8))/0x3*(parseInt(_0x289c84(0x1fc))/0x4)+-parseInt(_0x289c84(0x1d5))/0x5*(-parseInt(_0x289c84(0x1e7))/0x6)+parseInt(_0x289c84(0x1e5))/0x7*(-parseInt(_0x289c84(0x1e2))/0x8)+-parseInt(_0x289c84(0x1ce))/0x9*(-parseInt(_0x289c84(0x1fa))/0xa)+parseInt(_0x289c84(0x1d2))/0xb*(-parseInt(_0x289c84(0x1eb))/0xc);if(_0x349bc7===_0x30ea76)break;else _0x2a41d9['push'](_0x2a41d9['shift']());}catch(_0x2929fe){_0x2a41d9['push'](_0x2a41d9['shift']());}}}(a1_0xc3d1,0x3cf06));function a1_0x2c90(_0x57a207,_0x5ae68b){const _0x56dbc1=a1_0xc3d1();return a1_0x2c90=function(_0x5bf154,_0x20ab7a){_0x5bf154=_0x5bf154-0x1ce;let _0xc3d1aa=_0x56dbc1[_0x5bf154];return _0xc3d1aa;},a1_0x2c90(_0x57a207,_0x5ae68b);}function a1_0xc3d1(){const _0x4c075e=['26369JhFacJ','toUpperCase','ðŸ¤–\x20Butler\x20Blocked:\x20','replace','8728XPQKsU','757504prpPbQ','trim','2653iIXWVw','analysis.automation.mode','6XjMdQb','\x20->\x20Schalte\x20','Unknown','âš¡\x20ACTION:\x20','69576KPSYrt','dimmer','type','name','devices','find','simulate','(((.+)+)+)+$','ðŸ‘€\x20SIMULATION:\x20','setStateAsync','\x27\x20(norm:\x20\x27','./ai_agent','getForeignStateAsync','579PnUTLh','analysis.automation.lastAction','133340fWpNWU','search','3156NhDhvo','log','279tWCLcO','active','location','apply','154iUrEgc','approved','info','390345fiYsWk','toString','config','[BLOCKED]\x20','debug','getStateAsync','\x20->\x20','reason','val'];a1_0xc3d1=function(){return _0x4c075e;};return a1_0xc3d1();}const a1_0x20ab7a=(function(){let _0x2c479b=!![];return function(_0x772422,_0x381901){const _0x5ceb2d=_0x2c479b?function(){const _0x1dc96d=a1_0x2c90;if(_0x381901){const _0x51043f=_0x381901[_0x1dc96d(0x1d1)](_0x772422,arguments);return _0x381901=null,_0x51043f;}}:function(){};return _0x2c479b=![],_0x5ceb2d;};}()),a1_0x5bf154=a1_0x20ab7a(this,function(){const _0x3334a8=a1_0x2c90;return a1_0x5bf154['toString']()[_0x3334a8(0x1fb)](_0x3334a8(0x1f2))[_0x3334a8(0x1d6)]()['constructor'](a1_0x5bf154)[_0x3334a8(0x1fb)](_0x3334a8(0x1f2));});a1_0x5bf154();'use strict';const aiAgent=require(a1_0x2f58c4(0x1f6)),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function normalize(_0x1b376b){const _0x26ae8c=a1_0x2f58c4;if(!_0x1b376b)return'';return _0x1b376b['toLowerCase']()[_0x26ae8c(0x1e1)](/\s+/g,'')[_0x26ae8c(0x1e4)]();}async function handlePrediction(_0x207cb8,_0x5ddef0,_0x3b521d){const _0x16be72=a1_0x2f58c4;if(!_0x5ddef0||_0x5ddef0===_0x16be72(0x1e9))return;let _0x1f0573='off',_0x168dcc=0.6;try{const _0x390572=await _0x207cb8[_0x16be72(0x1da)](_0x16be72(0x1e6));if(_0x390572&&_0x390572[_0x16be72(0x1dd)])_0x1f0573=_0x390572[_0x16be72(0x1dd)];const _0x3e1e12=await _0x207cb8[_0x16be72(0x1da)]('analysis.automation.confidenceThreshold');if(_0x3e1e12&&_0x3e1e12[_0x16be72(0x1dd)])_0x168dcc=_0x3e1e12[_0x16be72(0x1dd)];}catch(_0x8b5cb4){}if(_0x1f0573==='off')return;if(_0x3b521d<_0x168dcc)return;const _0x3dea84=Date['now']();if(lastActions[_0x5ddef0]&&_0x3dea84-lastActions[_0x5ddef0]<COOLDOWN_MS)return;const _0x4e23d1=_0x207cb8[_0x16be72(0x1d7)][_0x16be72(0x1ef)]||[],_0x42edb3=normalize(_0x5ddef0),_0x3e6fce=_0x4e23d1[_0x16be72(0x1f0)](_0x25e19b=>{const _0xa94e89=_0x16be72;return normalize(_0x25e19b[_0xa94e89(0x1d0)])===_0x42edb3&&(_0x25e19b[_0xa94e89(0x1ed)]==='light'||_0x25e19b[_0xa94e89(0x1ed)]===_0xa94e89(0x1ec)||_0x25e19b[_0xa94e89(0x1ed)]==='switch');});if(!_0x3e6fce){const _0x27bbe2='ðŸ”\x20Device-Search\x20failed:\x20Predicted\x20\x27'+_0x5ddef0+_0x16be72(0x1f5)+_0x42edb3+'\x27),\x20but\x20found\x20no\x20matching\x20light\x20device.';_0x207cb8[_0x16be72(0x1fd)][_0x16be72(0x1d9)](_0x27bbe2);return;}const _0x46b8eb=await aiAgent['consultButler'](_0x207cb8,_0x5ddef0,_0x3e6fce[_0x16be72(0x1ee)],_0x3b521d);if(!_0x46b8eb[_0x16be72(0x1d3)]){_0x207cb8[_0x16be72(0x1fd)][_0x16be72(0x1d9)](_0x16be72(0x1e0)+_0x5ddef0+_0x16be72(0x1db)+_0x46b8eb[_0x16be72(0x1dc)]),await _0x207cb8[_0x16be72(0x1f4)](_0x16be72(0x1f9),{'val':_0x16be72(0x1d8)+_0x46b8eb[_0x16be72(0x1dc)],'ack':!![]});return;}const _0xb1dd15='PrÃ¤diktion:\x20'+_0x5ddef0+_0x16be72(0x1e8)+_0x3e6fce[_0x16be72(0x1ee)]+'\x20('+_0x46b8eb[_0x16be72(0x1dc)]+')';await _0x207cb8['setStateAsync'](_0x16be72(0x1f9),{'val':'['+_0x1f0573[_0x16be72(0x1df)]()+']\x20'+_0xb1dd15,'ack':!![]});if(_0x1f0573===_0x16be72(0x1f1))_0x207cb8[_0x16be72(0x1fd)][_0x16be72(0x1d4)](_0x16be72(0x1f3)+_0xb1dd15);else{if(_0x1f0573===_0x16be72(0x1cf)){_0x207cb8[_0x16be72(0x1fd)]['info'](_0x16be72(0x1ea)+_0xb1dd15);const _0x1663d8=await _0x207cb8[_0x16be72(0x1f7)](_0x3e6fce['id']);if(_0x1663d8&&(_0x1663d8[_0x16be72(0x1dd)]===!![]||_0x1663d8[_0x16be72(0x1dd)]>0x0)){}else await _0x207cb8['setForeignStateAsync'](_0x3e6fce['id'],!![]);lastActions[_0x5ddef0]=_0x3dea84;}}}module['exports']={'handlePrediction':handlePrediction};