const a1_0x22baf7=a1_0x37c1;(function(_0x413bd3,_0x22ef97){const _0x44b8d8=a1_0x37c1,_0x5e4a84=_0x413bd3();while(!![]){try{const _0x5b1cb4=-parseInt(_0x44b8d8(0x1d6))/0x1+parseInt(_0x44b8d8(0x1de))/0x2*(parseInt(_0x44b8d8(0x1f2))/0x3)+parseInt(_0x44b8d8(0x1db))/0x4+-parseInt(_0x44b8d8(0x1f1))/0x5*(-parseInt(_0x44b8d8(0x1f0))/0x6)+parseInt(_0x44b8d8(0x1ed))/0x7+parseInt(_0x44b8d8(0x1cf))/0x8*(-parseInt(_0x44b8d8(0x1d9))/0x9)+-parseInt(_0x44b8d8(0x1d7))/0xa;if(_0x5b1cb4===_0x22ef97)break;else _0x5e4a84['push'](_0x5e4a84['shift']());}catch(_0x50bc6a){_0x5e4a84['push'](_0x5e4a84['shift']());}}}(a1_0x3035,0x333af));const a1_0x213603=(function(){let _0x18044e=!![];return function(_0x30098e,_0x1bce87){const _0x12ed03=_0x18044e?function(){const _0xc72f15=a1_0x37c1;if(_0x1bce87){const _0x17c1bc=_0x1bce87[_0xc72f15(0x1ce)](_0x30098e,arguments);return _0x1bce87=null,_0x17c1bc;}}:function(){};return _0x18044e=![],_0x12ed03;};}()),a1_0x43bd53=a1_0x213603(this,function(){const _0x436019=a1_0x37c1;return a1_0x43bd53[_0x436019(0x1e4)]()['search']('(((.+)+)+)+$')[_0x436019(0x1e4)]()['constructor'](a1_0x43bd53)[_0x436019(0x1e7)]('(((.+)+)+)+$');});a1_0x43bd53();'use strict';function a1_0x3035(){const _0x4f759e=['devices','trim','34410kiHirI','setStateAsync','name','consultButler','âš¡\x20ACTION:\x20','ðŸ‘€\x20SIMULATION:\x20','toString','\x27),\x20but\x20found\x20no\x20matching\x20light\x20device.','debug','search','analysis.automation.lastAction','type','off','approved','location','2189124TODyfx','switch','ðŸ¤–\x20Butler\x20Blocked:\x20','18AGhQuH','218135IeTqQI','57BtnUFp','active','Unknown','find','toUpperCase','analysis.automation.mode','setForeignStateAsync','info','val','PrÃ¤diktion:\x20','reason','replace','apply','64OZEZet','exports','\x20->\x20Schalte\x20','simulate','getStateAsync','dimmer','analysis.automation.confidenceThreshold','40045GoVKif','4197020nubRpx','[BLOCKED]\x20','208269GegjBP','log','336824PknKic'];a1_0x3035=function(){return _0x4f759e;};return a1_0x3035();}const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function normalize(_0x5e28d2){const _0x1141d6=a1_0x37c1;if(!_0x5e28d2)return'';return _0x5e28d2['toLowerCase']()[_0x1141d6(0x1cd)](/\s+/g,'')[_0x1141d6(0x1dd)]();}async function handlePrediction(_0x477c7c,_0x15313d,_0x2d3ef1){const _0x3da976=a1_0x37c1;if(!_0x15313d||_0x15313d===_0x3da976(0x1c4))return;let _0x596af7='off',_0x1e6b74=0.6;try{const _0x1f8816=await _0x477c7c[_0x3da976(0x1d3)](_0x3da976(0x1c7));if(_0x1f8816&&_0x1f8816[_0x3da976(0x1ca)])_0x596af7=_0x1f8816[_0x3da976(0x1ca)];const _0x5b408f=await _0x477c7c[_0x3da976(0x1d3)](_0x3da976(0x1d5));if(_0x5b408f&&_0x5b408f['val'])_0x1e6b74=_0x5b408f['val'];}catch(_0x41420c){}if(_0x596af7===_0x3da976(0x1ea))return;if(_0x2d3ef1<_0x1e6b74)return;const _0x5c4e2d=Date['now']();if(lastActions[_0x15313d]&&_0x5c4e2d-lastActions[_0x15313d]<COOLDOWN_MS)return;const _0x400467=_0x477c7c['config'][_0x3da976(0x1dc)]||[],_0x44070d=normalize(_0x15313d),_0x47f2a3=_0x400467[_0x3da976(0x1c5)](_0xb652cb=>{const _0x201e80=_0x3da976;return normalize(_0xb652cb[_0x201e80(0x1ec)])===_0x44070d&&(_0xb652cb[_0x201e80(0x1e9)]==='light'||_0xb652cb[_0x201e80(0x1e9)]===_0x201e80(0x1d4)||_0xb652cb['type']===_0x201e80(0x1ee));});if(!_0x47f2a3){const _0x3855be='ðŸ”\x20Device-Search\x20failed:\x20Predicted\x20\x27'+_0x15313d+'\x27\x20(norm:\x20\x27'+_0x44070d+_0x3da976(0x1e5);_0x477c7c['log'][_0x3da976(0x1e6)](_0x3855be);return;}const _0x10ce9e=await aiAgent[_0x3da976(0x1e1)](_0x477c7c,_0x15313d,_0x47f2a3['name'],_0x2d3ef1);if(!_0x10ce9e[_0x3da976(0x1eb)]){_0x477c7c[_0x3da976(0x1da)][_0x3da976(0x1e6)](_0x3da976(0x1ef)+_0x15313d+'\x20->\x20'+_0x10ce9e[_0x3da976(0x1cc)]),await _0x477c7c[_0x3da976(0x1df)]('analysis.automation.lastAction',{'val':_0x3da976(0x1d8)+_0x10ce9e[_0x3da976(0x1cc)],'ack':!![]});return;}const _0x409779=_0x3da976(0x1cb)+_0x15313d+_0x3da976(0x1d1)+_0x47f2a3[_0x3da976(0x1e0)]+'\x20('+_0x10ce9e['reason']+')';await _0x477c7c[_0x3da976(0x1df)](_0x3da976(0x1e8),{'val':'['+_0x596af7[_0x3da976(0x1c6)]()+']\x20'+_0x409779,'ack':!![]});if(_0x596af7===_0x3da976(0x1d2))_0x477c7c[_0x3da976(0x1da)][_0x3da976(0x1c9)](_0x3da976(0x1e3)+_0x409779);else{if(_0x596af7===_0x3da976(0x1f3)){_0x477c7c['log'][_0x3da976(0x1c9)](_0x3da976(0x1e2)+_0x409779);const _0x4bc46b=await _0x477c7c['getForeignStateAsync'](_0x47f2a3['id']);if(_0x4bc46b&&(_0x4bc46b['val']===!![]||_0x4bc46b[_0x3da976(0x1ca)]>0x0)){}else await _0x477c7c[_0x3da976(0x1c8)](_0x47f2a3['id'],!![]);lastActions[_0x15313d]=_0x5c4e2d;}}}function a1_0x37c1(_0x26cf10,_0x2863e9){const _0x45c2bd=a1_0x3035();return a1_0x37c1=function(_0x43bd53,_0x213603){_0x43bd53=_0x43bd53-0x1c4;let _0x303589=_0x45c2bd[_0x43bd53];return _0x303589;},a1_0x37c1(_0x26cf10,_0x2863e9);}module[a1_0x22baf7(0x1d0)]={'handlePrediction':handlePrediction};