const a1_0x357857=a1_0x28fc;(function(_0x18379a,_0x17b82a){const _0x7b6759=a1_0x28fc,_0x4e0865=_0x18379a();while(!![]){try{const _0xc5fbb1=-parseInt(_0x7b6759(0x128))/0x1+parseInt(_0x7b6759(0x1a6))/0x2+parseInt(_0x7b6759(0x17c))/0x3*(parseInt(_0x7b6759(0x163))/0x4)+parseInt(_0x7b6759(0x164))/0x5+-parseInt(_0x7b6759(0x14a))/0x6+parseInt(_0x7b6759(0x153))/0x7+-parseInt(_0x7b6759(0x162))/0x8*(parseInt(_0x7b6759(0x195))/0x9);if(_0xc5fbb1===_0x17b82a)break;else _0x4e0865['push'](_0x4e0865['shift']());}catch(_0x201235){_0x4e0865['push'](_0x4e0865['shift']());}}}(a1_0x23bb,0x671cd));const a1_0x141ddf=(function(){let _0x22735e=!![];return function(_0x39a273,_0x4ea5ab){const _0x36ae83=_0x22735e?function(){const _0x431cab=a1_0x28fc;if(_0x4ea5ab){const _0x4428e2=_0x4ea5ab[_0x431cab(0x152)](_0x39a273,arguments);return _0x4ea5ab=null,_0x4428e2;}}:function(){};return _0x22735e=![],_0x36ae83;};}()),a1_0x34d49f=a1_0x141ddf(this,function(){const _0x15f15b=a1_0x28fc;return a1_0x34d49f[_0x15f15b(0x16d)]()[_0x15f15b(0x120)](_0x15f15b(0x18e))['toString']()[_0x15f15b(0x10d)](a1_0x34d49f)[_0x15f15b(0x120)](_0x15f15b(0x18e));});a1_0x34d49f();'use strict';const aiAgent=require(a1_0x357857(0x1c9)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x5245e){const _0x74cf9d=a1_0x357857;if(!_0x5245e)return'';return _0x5245e['toLowerCase']()[_0x74cf9d(0x159)](/\s+/g,'')[_0x74cf9d(0x137)]();}function getWarmupRobust(_0x57bf9c,_0x76f617){const _0x1f286a=a1_0x357857;if(!_0x57bf9c||!_0x76f617)return 0x3c;if(_0x57bf9c[_0x76f617]!==undefined)return _0x57bf9c[_0x76f617];const _0x341edd=_0x76f617['toLowerCase']()[_0x1f286a(0x159)](/Ã¤/g,'ae')[_0x1f286a(0x159)](/Ã¶/g,'oe')['replace'](/Ã¼/g,'ue')[_0x1f286a(0x159)](/ÃŸ/g,'ss')[_0x1f286a(0x159)](/\s+/g,'_')['replace'](/[^a-z0-9_]/g,'');if(_0x57bf9c[_0x341edd]!==undefined)return _0x57bf9c[_0x341edd];return 0x3c;}async function logAutomationAction(_0x22ffc7,_0x2507fc){const _0x1dd077=a1_0x357857;await _0x22ffc7['setStateAsync'](_0x1dd077(0x196),{'val':_0x2507fc,'ack':!![]});try{const _0x3d3bc0=_0x1dd077(0x180),_0xb13603=await _0x22ffc7[_0x1dd077(0x158)](_0x3d3bc0);let _0x53bbb5=[];if(_0xb13603&&_0xb13603['val'])try{_0x53bbb5=JSON[_0x1dd077(0x1b9)](_0xb13603[_0x1dd077(0x13a)]);}catch(_0x25a881){}_0x53bbb5['unshift']({'ts':Date['now'](),'msg':_0x2507fc});if(_0x53bbb5[_0x1dd077(0x116)]>0x32)_0x53bbb5=_0x53bbb5[_0x1dd077(0x1bc)](0x0,0x32);await _0x22ffc7[_0x1dd077(0x1c1)](_0x3d3bc0,{'val':JSON[_0x1dd077(0x1bd)](_0x53bbb5),'ack':!![]});}catch(_0x20eca9){}}async function handlePrediction(_0x21ccdb,_0x95a477,_0x3fca6b){const _0x3dfdf1=a1_0x357857;if(!_0x95a477||_0x95a477===_0x3dfdf1(0x118))return;let _0x4c8faa=_0x3dfdf1(0x18f),_0x4a16e1=0.6;try{const _0x346d07=await _0x21ccdb['getStateAsync'](_0x3dfdf1(0x13c));if(_0x346d07&&_0x346d07[_0x3dfdf1(0x13a)])_0x4c8faa=_0x346d07['val'];const _0xfe0b91=await _0x21ccdb[_0x3dfdf1(0x158)](_0x3dfdf1(0x192));if(_0xfe0b91&&_0xfe0b91['val'])_0x4a16e1=_0xfe0b91['val'];}catch(_0x18cdf3){}if(_0x4c8faa==='off'||_0x3fca6b<_0x4a16e1)return;const _0x487ebd=Date['now']();if(lastActions[_0x95a477]&&_0x487ebd-lastActions[_0x95a477]<COOLDOWN_MS)return;const _0x21e45e=_0x21ccdb[_0x3dfdf1(0x191)]['devices']||[],_0xe301fa=normalize(_0x95a477),_0x107fed=_0x21e45e[_0x3dfdf1(0x117)](_0x432831=>normalize(_0x432831['location'])===_0xe301fa&&(_0x432831[_0x3dfdf1(0x124)]===_0x3dfdf1(0x155)||_0x432831[_0x3dfdf1(0x124)]===_0x3dfdf1(0x150)||_0x432831[_0x3dfdf1(0x124)]==='switch'));if(!_0x107fed)return;const _0x192cd5=await aiAgent[_0x3dfdf1(0x129)](_0x21ccdb,_0x95a477,_0x107fed[_0x3dfdf1(0x1ba)],_0x3fca6b);if(!_0x192cd5['approved'])return;const _0x18046d=_0x3dfdf1(0x1b7)+_0x95a477+'\x20->\x20Schalte\x20'+_0x107fed[_0x3dfdf1(0x1ba)]+'\x20('+_0x192cd5['reason']+')';await logAutomationAction(_0x21ccdb,'['+_0x4c8faa[_0x3dfdf1(0x1b5)]()+']\x20'+_0x18046d);if(_0x4c8faa===_0x3dfdf1(0x1a0)){const _0x549aa6=await _0x21ccdb[_0x3dfdf1(0x12e)](_0x107fed['id']);(!_0x549aa6||!_0x549aa6[_0x3dfdf1(0x13a)]&&_0x549aa6[_0x3dfdf1(0x13a)]!==!![])&&await _0x21ccdb[_0x3dfdf1(0x1c6)](_0x107fed['id'],!![]),lastActions[_0x95a477]=_0x487ebd;}}async function findRelatedId(_0x358e4b,_0x1b2ec2,_0x55b034=a1_0x357857(0x16f)){const _0x551cee=a1_0x357857;if(_0x55b034===_0x551cee(0x16f)&&_0x358e4b['config'][_0x551cee(0x15f)]){let _0x12767c=_0x358e4b[_0x551cee(0x191)][_0x551cee(0x15f)];if(typeof _0x12767c===_0x551cee(0x14c))try{_0x12767c=JSON['parse'](_0x12767c);}catch(_0x37d88c){}if(_0x12767c&&_0x12767c[_0x1b2ec2])return _0x12767c[_0x1b2ec2];}if(_0x55b034===_0x551cee(0x19a)&&_0x358e4b[_0x551cee(0x191)]['valveMapping']){let _0x4b8b4=_0x358e4b[_0x551cee(0x191)]['valveMapping'];if(typeof _0x4b8b4==='string')try{_0x4b8b4=JSON[_0x551cee(0x1b9)](_0x4b8b4);}catch(_0x9cf3fd){}if(_0x4b8b4&&_0x4b8b4[_0x1b2ec2])return _0x4b8b4[_0x1b2ec2];}let _0x528962=[];if(_0x55b034===_0x551cee(0x16f))_0x528962=[{'s':_0x551cee(0x16e),'t':_0x551cee(0x133)},{'s':'.1.TEMPERATURE','t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x551cee(0x182),'t':_0x551cee(0x115)},{'s':_0x551cee(0x11a),'t':_0x551cee(0x172)},{'s':_0x551cee(0x18c),'t':_0x551cee(0x165)},{'s':'local_temperature','t':_0x551cee(0x16c)},{'s':_0x551cee(0x1c3),'t':'target_temperature'},{'s':_0x551cee(0x17f),'t':_0x551cee(0x110)},{'s':'Ist','t':_0x551cee(0x12b)},{'s':_0x551cee(0x1c3),'t':_0x551cee(0x16f)}];else _0x55b034===_0x551cee(0x19a)&&(_0x528962=[{'s':_0x551cee(0x16e),'t':_0x551cee(0x111)},{'s':'.1.TEMPERATURE','t':_0x551cee(0x111)},{'s':_0x551cee(0x182),'t':_0x551cee(0x15e)},{'s':'local_temperature','t':_0x551cee(0x1ae)},{'s':_0x551cee(0x1c3),'t':_0x551cee(0x123)},{'s':_0x551cee(0x1c3),'t':_0x551cee(0x154)}]);for(const _0x23a42a of _0x528962){if(_0x1b2ec2[_0x551cee(0x157)](_0x23a42a['s'])){const _0x34e810=_0x1b2ec2[_0x551cee(0x159)](_0x23a42a['s'],_0x23a42a['t']),_0x855ee2=await _0x358e4b[_0x551cee(0x147)](_0x34e810);if(_0x855ee2)return _0x34e810;}}try{const _0x4d4c56=_0x1b2ec2[_0x551cee(0x132)]('.');if(_0x4d4c56[_0x551cee(0x116)]>0x2){const _0x9426d3=_0x4d4c56[_0x551cee(0x1bc)](0x0,-0x1)[_0x551cee(0x14e)]('.'),_0x5d0bbe=await _0x358e4b[_0x551cee(0x194)](_0x9426d3+'.*'),_0x5a168b=[],_0x10d9d4=_0x1b2ec2[_0x551cee(0x132)](/[._]+/)['filter'](_0x430932=>![_0x551cee(0x121),'0',_0x551cee(0x15d),_0x551cee(0x114),_0x551cee(0x105),_0x551cee(0x1c3),_0x551cee(0x136),'sensor',_0x551cee(0x168),_0x551cee(0x169)][_0x551cee(0x157)](_0x430932['toLowerCase']()));for(const [_0x105122,_0x1a4d61]of Object[_0x551cee(0x13d)](_0x5d0bbe)){if(_0x105122===_0x1b2ec2)continue;if(_0x1a4d61&&_0x1a4d61['common']){const _0x14784e=_0x105122['toLowerCase'](),_0xd4dc9a=(_0x1a4d61['common']['role']||'')['toLowerCase'](),_0xf1c72c=(_0x1a4d61[_0x551cee(0x1aa)]['unit']||'')[_0x551cee(0x119)]();let _0x523c32=![];if(_0x55b034===_0x551cee(0x16f)&&_0x1a4d61[_0x551cee(0x1aa)]['write']===!![])_0x523c32=_0x14784e[_0x551cee(0x157)](_0x551cee(0x130))||_0x14784e[_0x551cee(0x157)](_0x551cee(0x176))||_0x14784e['includes'](_0x551cee(0x1b2))||_0xd4dc9a['includes'](_0x551cee(0x142))||_0xd4dc9a[_0x551cee(0x157)]('thermostat.setpoint');else _0x55b034===_0x551cee(0x19a)&&(_0x523c32=_0x14784e['includes'](_0x551cee(0x154))||_0x14784e['includes'](_0x551cee(0x19a))||_0x14784e[_0x551cee(0x157)](_0x551cee(0x10c))||_0x14784e['includes'](_0x551cee(0x179))||_0xd4dc9a[_0x551cee(0x157)]('level.valve')||_0xd4dc9a['includes']('value.valve')||_0xf1c72c['includes']('%'));if(_0x523c32){const _0x395378=_0x105122['split'](/[._]+/)[_0x551cee(0x106)](_0x6c39a=>_0x6c39a['toLowerCase']());let _0x5675a1=0x0;_0x10d9d4[_0x551cee(0x11e)](_0x3ac648=>{const _0x4bf8e4=_0x551cee;if(_0x395378['includes'](_0x3ac648[_0x4bf8e4(0x119)]()))_0x5675a1++;}),_0x5a168b[_0x551cee(0x184)]({'id':_0x105122,'score':_0x5675a1});}}}if(_0x5a168b[_0x551cee(0x116)]>0x0){_0x5a168b[_0x551cee(0x149)]((_0x28f59e,_0x289d15)=>_0x289d15[_0x551cee(0x11c)]-_0x28f59e['score']);if(_0x5a168b[0x0][_0x551cee(0x11c)]>0x0)return _0x5a168b[0x0]['id'];}}}catch(_0x442020){}return null;}async function scanThermostats(_0x42c603){const _0x519199=a1_0x357857,_0x1bc666=_0x42c603[_0x519199(0x191)]['devices']||[],_0x328bce=[],_0x2f3d4e=_0x1bc666[_0x519199(0x1ab)](_0x5a741f=>_0x5a741f['id']&&_0x5a741f['id'][_0x519199(0x157)](_0x519199(0x1c3))||_0x5a741f['type']&&['temperature',_0x519199(0x1b8),_0x519199(0x12f)][_0x519199(0x157)](_0x5a741f[_0x519199(0x124)])||_0x5a741f['name']&&_0x5a741f[_0x519199(0x1ba)][_0x519199(0x119)]()[_0x519199(0x157)](_0x519199(0x178)));for(const _0x350b85 of _0x2f3d4e){const _0x374bc4=await findRelatedId(_0x42c603,_0x350b85['id'],_0x519199(0x16f)),_0x4a615a=await findRelatedId(_0x42c603,_0x350b85['id'],_0x519199(0x19a));let _0x18027e=_0x519199(0x112),_0x162b25=![],_0x1ca695=_0x42c603[_0x519199(0x191)][_0x519199(0x15f)]||{};if(typeof _0x1ca695==='string')try{_0x1ca695=JSON[_0x519199(0x1b9)](_0x1ca695);}catch(_0x2c5303){}let _0x342db4=_0x42c603[_0x519199(0x191)][_0x519199(0x156)]||{};if(typeof _0x342db4===_0x519199(0x14c))try{_0x342db4=JSON[_0x519199(0x1b9)](_0x342db4);}catch(_0x2626db){}if(_0x1ca695[_0x350b85['id']]&&_0x1ca695[_0x350b85['id']]===_0x374bc4||_0x342db4[_0x350b85['id']]&&_0x342db4[_0x350b85['id']]===_0x4a615a)_0x18027e=_0x519199(0x18d),_0x162b25=!![];else(_0x374bc4||_0x4a615a)&&(_0x18027e=_0x519199(0x143));_0x328bce[_0x519199(0x184)]({'room':_0x350b85['location']||'Unbekannt','sensorId':_0x350b85['id'],'setpointId':_0x374bc4||'-','valveId':_0x4a615a||'-','source':_0x18027e,'isManual':_0x162b25,'status':_0x374bc4&&_0x4a615a?_0x519199(0x188):_0x374bc4?'OK':_0x519199(0x126)});}return _0x328bce['sort']((_0x3b33fc,_0x3ec7a4)=>_0x3b33fc['room'][_0x519199(0x135)](_0x3ec7a4['room']));}async function updateSchedulePreview(_0x5ad727){const _0x3c2d36=a1_0x357857;if(!_0x5ad727['config']['useCalendar']||!_0x5ad727['config'][_0x3c2d36(0x15c)])return;let _0xb63a65={};try{const _0x4d3e48=await _0x5ad727[_0x3c2d36(0x158)](_0x3c2d36(0x161));if(_0x4d3e48&&_0x4d3e48[_0x3c2d36(0x13a)])_0xb63a65=JSON['parse'](_0x4d3e48['val']);}catch(_0x501070){}const _0x31d6a1=[],_0x15d471=Date[_0x3c2d36(0x1af)](),_0x5b8685=0x30*0x3c*0x3c*0x3e8;try{const _0x2a9176=await _0x5ad727[_0x3c2d36(0x12e)](_0x5ad727[_0x3c2d36(0x191)]['calendarInstance']+_0x3c2d36(0x139));if(!_0x2a9176||!_0x2a9176['val'])return;const _0xf5901=JSON[_0x3c2d36(0x1b9)](_0x2a9176[_0x3c2d36(0x13a)]),_0x22a0f5=_0x5ad727[_0x3c2d36(0x191)][_0x3c2d36(0x1c2)]||[],_0x3cd94a=_0x5ad727[_0x3c2d36(0x191)][_0x3c2d36(0x17b)]||[],_0x4144ae=new Set();_0x3cd94a[_0x3c2d36(0x11e)](_0x186515=>{const _0x26d0fe=_0x3c2d36;if(_0x186515['location'])_0x4144ae[_0x26d0fe(0x1b6)](_0x186515[_0x26d0fe(0x10f)]);});for(const _0x2fdd68 of _0xf5901){if(_0x2fdd68[_0x3c2d36(0x199)]&&_0x22a0f5['length']>0x0&&!_0x22a0f5[_0x3c2d36(0x157)](_0x2fdd68[_0x3c2d36(0x199)]))continue;const _0x3040de=_0x2fdd68[_0x3c2d36(0x19f)]||_0x2fdd68[_0x3c2d36(0x12a)]||_0x2fdd68[_0x3c2d36(0x12d)];if(!_0x3040de)continue;const _0x4a1794=new Date(_0x3040de),_0x558efa=_0x4a1794[_0x3c2d36(0x151)]();if(isNaN(_0x558efa))continue;if(_0x558efa<_0x15d471)continue;if(_0x558efa>_0x15d471+_0x5b8685)continue;const _0x1b3407=(_0x2fdd68['event']||_0x2fdd68[_0x3c2d36(0x14b)]||'')['toLowerCase']();let _0x37694d=![],_0x3f1a33=[],_0x34ce6f=_0x2fdd68[_0x3c2d36(0x107)]||_0x2fdd68['summary']||_0x3c2d36(0x17e);if(_0x1b3407[_0x3c2d36(0x157)]('urlaub\x20ende')||_0x1b3407['includes'](_0x3c2d36(0x1ad))||_0x1b3407[_0x3c2d36(0x157)](_0x3c2d36(0x16b)))_0x37694d=!![],_0x3f1a33=Array[_0x3c2d36(0x187)](_0x4144ae);else for(const _0x1245ad of _0x4144ae){if(_0x1b3407['includes'](_0x1245ad['toLowerCase']()))_0x3f1a33[_0x3c2d36(0x184)](_0x1245ad);}_0x3f1a33['length']>0x0&&_0x3f1a33[_0x3c2d36(0x11e)](_0x57c69c=>{const _0x113f50=_0x3c2d36;let _0x1c4698=0x3c;if(_0x37694d){let _0x3df90f=0x0;Object[_0x113f50(0x1b1)](_0xb63a65)[_0x113f50(0x11e)](_0x26ac57=>{if(_0x26ac57>_0x3df90f)_0x3df90f=_0x26ac57;}),_0x1c4698=_0x3df90f>0x0?_0x3df90f:0x78;}else _0x1c4698=getWarmupRobust(_0xb63a65,_0x57c69c);const _0xc0a9f3=new Date(_0x558efa-_0x1c4698*0xea60);_0x31d6a1[_0x113f50(0x184)]({'eventTime':_0x558efa,'triggerTime':_0xc0a9f3['getTime'](),'room':_0x57c69c,'minutes':_0x1c4698,'reason':_0x34ce6f,'isGlobal':_0x37694d});});}}catch(_0x4ba653){}_0x31d6a1['sort']((_0x1a85a8,_0x44e64d)=>_0x1a85a8['triggerTime']-_0x44e64d[_0x3c2d36(0x11b)]);const _0x21daf3=_0x31d6a1['slice'](0x0,0x5);await _0x5ad727['setStateAsync'](_0x3c2d36(0x1a3),{'val':JSON[_0x3c2d36(0x1bd)](_0x21daf3),'ack':!![]});}async function monitorEnforcements(_0x173198){const _0x3cab2e=a1_0x357857;try{const _0x3f60cf=_0x3cab2e(0x134),_0x258870=await _0x173198[_0x3cab2e(0x158)](_0x3f60cf);if(!_0x258870||!_0x258870[_0x3cab2e(0x13a)])return;let _0x30184f=[];try{_0x30184f=JSON[_0x3cab2e(0x1b9)](_0x258870['val']);}catch(_0x50fa76){return;}if(!Array[_0x3cab2e(0x197)](_0x30184f)||_0x30184f[_0x3cab2e(0x116)]===0x0)return;const _0x3db7fc=Date[_0x3cab2e(0x1af)](),_0x4279ad=_0x173198[_0x3cab2e(0x191)][_0x3cab2e(0x17b)]||[];let _0x127ce9=![];for(let _0xba5a4=_0x30184f['length']-0x1;_0xba5a4>=0x0;_0xba5a4--){const _0x1d53fc=_0x30184f[_0xba5a4];if(_0x3db7fc>=_0x1d53fc[_0x3cab2e(0x1be)]){_0x173198[_0x3cab2e(0x166)]['info']('ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20'+_0x1d53fc[_0x3cab2e(0x1bf)]+_0x3cab2e(0x12c)),_0x30184f[_0x3cab2e(0x113)](_0xba5a4,0x1),_0x127ce9=!![];continue;}const _0x112f6e=_0x4279ad['find'](_0x53f9e2=>normalize(_0x53f9e2[_0x3cab2e(0x10f)])===normalize(_0x1d53fc[_0x3cab2e(0x1bf)])&&(_0x53f9e2['type']===_0x3cab2e(0x1c3)||_0x53f9e2[_0x3cab2e(0x124)]==='thermostat'));if(_0x112f6e){const _0x5666dd=await findRelatedId(_0x173198,_0x112f6e['id'],'setpoint');if(_0x5666dd){const _0x5bcf51=await _0x173198['getForeignStateAsync'](_0x5666dd);_0x5bcf51&&typeof _0x5bcf51[_0x3cab2e(0x13a)]===_0x3cab2e(0x18b)&&(_0x5bcf51[_0x3cab2e(0x13a)]<0xf&&(_0x173198[_0x3cab2e(0x166)]['warn'](_0x3cab2e(0x14d)+_0x1d53fc['room']+_0x3cab2e(0x125)+_0x5bcf51['val']+_0x3cab2e(0x190)+_0x1d53fc['target']+_0x3cab2e(0x19e)),await _0x173198[_0x3cab2e(0x1c6)](_0x5666dd,_0x1d53fc[_0x3cab2e(0x1b2)]),await logAutomationAction(_0x173198,'[FORCE]\x20'+_0x1d53fc[_0x3cab2e(0x1bf)]+':\x20'+_0x5bcf51[_0x3cab2e(0x13a)]+_0x3cab2e(0x17d)+_0x1d53fc[_0x3cab2e(0x1b2)]+_0x3cab2e(0x1b0))));}}}_0x127ce9&&await _0x173198[_0x3cab2e(0x1c1)](_0x3f60cf,{'val':JSON[_0x3cab2e(0x1bd)](_0x30184f),'ack':!![]});}catch(_0x224dc7){_0x173198['log']['error'](_0x3cab2e(0x148)+_0x224dc7[_0x3cab2e(0x160)]);}}function a1_0x23bb(){const _0x1c3306=['\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','devices','9UBRSKc','Â°C\x20->\x20','Unbekannt','ACTUAL','analysis.automation.actionLog','system.mode','.1.TEMPERATURE','default','push','\x20min).',')\x20aktiv.\x20Heize\x20auf\x20','from','PERFECT','analysis.energy.warmupSources','Â°C\x20<\x20','number','local_temperature','Manuelles\x20Mapping','(((.+)+)+)+$','off','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','config','analysis.automation.confidenceThreshold','\x20wurde\x20manuell\x20erhÃ¶ht.','getForeignObjectsAsync','337437yVqpTA','analysis.automation.lastAction','isArray','currentSystemMode','_calName','valve','analysis.energy.ventilationAlerts','\x27\x20(Match:\x20','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','Â°C.','_date','active','remove','Â°C!\x20(Puffer\x20leer).','analysis.energy.schedulePreview','Classic','normal','1408582dZneCn','useCalendar','warn','\x20->\x20','common','filter','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','rÃ¼ckkehr','pi_heating_demand','now','Â°C\x20(Kalender-Schutz)','values','target','abs','cal_','toUpperCase','add','PrÃ¤diktion:\x20','thermostat','parse','name','Â°C!\x20(Puffer:\x20','slice','stringify','until','room',':\x20Absenkung\x20auf\x20','setStateAsync','calendarSelection','temperature','[WATCHDOG]\x20','open','setForeignStateAsync','manual','analysis.energy.warmupTargets','./ai_agent','wert','map','event','mpc_','TRAIN_RL_PENALTY','\x20min)','ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27','stellwert','constructor','analysis.energy.rlPenalties','location','SET','.1.LEVEL','Nicht\x20gefunden','splice','ist','.4.SET_TEMPERATURE','length','find','Unknown','toLowerCase','ACTUAL_TEMPERATURE','triggerTime','score','[MPC]\x20','forEach','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','search','openknx','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','valve_position','type','\x20auf\x20','Fehlt','info','307325zIzTYZ','consultButler','eventStart','Soll','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','date','getForeignStateAsync','sensor','set','[CAL]\x20','split','.1.SET_POINT_TEMPERATURE','analysis.energy.activeEnforcements','localeCompare','actual','trim','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','.data.table','val','indexOf','analysis.automation.mode','entries','\x20erreicht\x20Limit\x20(','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','window','level.temperature','Auto-Erkennung','sendToPythonWrapper','Calendar\x20Check\x20Error:\x20','getHours','getForeignObjectAsync','Enforcement\x20Monitor\x20Error:\x20','sort','4393464fKnafm','summary','string','ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','join','urlaub\x20ende','dimmer','getTime','apply','3197579FlVUaB','level','light','valveMapping','includes','getStateAsync','replace','contact','Â°C).\x20Entferne\x20Status.','calendarInstance','hm-rpc','.4.VALVE_STATE','thermostatMapping','message','analysis.energy.warmupTimes','112egdYSY','709028jHvYZH','1469805oywJVS','occupied_heating_setpoint','log','analysis.energy.mpcActiveInterventions','messwert','state','\x20gefunden!','ankunft','current_heating_setpoint','toString','.1.ACTUAL_TEMPERATURE','setpoint','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','\x20wieder\x20auf\x20','SET_POINT_TEMPERATURE','minutes_safe','Â°C\x20(via\x20','_meta','soll','too_cold','temp','position'];a1_0x23bb=function(){return _0x1c3306;};return a1_0x23bb();}function a1_0x28fc(_0x7facce,_0x52c795){const _0x1c8497=a1_0x23bb();return a1_0x28fc=function(_0x34d49f,_0x141ddf){_0x34d49f=_0x34d49f-0x105;let _0x23bbd9=_0x1c8497[_0x34d49f];return _0x23bbd9;},a1_0x28fc(_0x7facce,_0x52c795);}async function checkCalendarTriggers(_0x2a6350){const _0x4f8d72=a1_0x357857;if(!_0x2a6350[_0x4f8d72(0x191)][_0x4f8d72(0x1a7)]||!_0x2a6350[_0x4f8d72(0x191)][_0x4f8d72(0x15c)])return;await updateSchedulePreview(_0x2a6350);let _0x3a592b={},_0x30505d={};try{const _0x4914fd=await _0x2a6350[_0x4f8d72(0x158)](_0x4f8d72(0x161));if(_0x4914fd&&_0x4914fd['val'])_0x3a592b=JSON['parse'](_0x4914fd[_0x4f8d72(0x13a)]);const _0x540c4a=await _0x2a6350[_0x4f8d72(0x158)](_0x4f8d72(0x189));if(_0x540c4a&&_0x540c4a['val'])_0x30505d=JSON[_0x4f8d72(0x1b9)](_0x540c4a[_0x4f8d72(0x13a)]);}catch(_0x4b020d){}let _0x45415c={'default':0x15};try{const _0x2d5e74=await _0x2a6350['getStateAsync']('analysis.energy.warmupTargets');if(_0x2d5e74&&_0x2d5e74[_0x4f8d72(0x13a)])_0x45415c=JSON[_0x4f8d72(0x1b9)](_0x2d5e74[_0x4f8d72(0x13a)]);}catch(_0x3ac945){}let _0x382d84=[];try{const _0x805a31=await _0x2a6350[_0x4f8d72(0x158)](_0x4f8d72(0x134));if(_0x805a31&&_0x805a31[_0x4f8d72(0x13a)])_0x382d84=JSON['parse'](_0x805a31[_0x4f8d72(0x13a)]);}catch(_0x420d20){}try{const _0x439a45=await _0x2a6350[_0x4f8d72(0x12e)](_0x2a6350[_0x4f8d72(0x191)][_0x4f8d72(0x15c)]+_0x4f8d72(0x139));if(!_0x439a45||!_0x439a45['val'])return;const _0x37ae76=JSON[_0x4f8d72(0x1b9)](_0x439a45[_0x4f8d72(0x13a)]),_0x28d911=Date['now'](),_0x3820fa=_0x2a6350[_0x4f8d72(0x191)][_0x4f8d72(0x17b)]||[],_0x546cbd=_0x2a6350['config'][_0x4f8d72(0x1c2)]||[];let _0x1cf659=![];for(const _0x44a2b5 of _0x37ae76){if(_0x44a2b5[_0x4f8d72(0x199)]&&_0x546cbd[_0x4f8d72(0x116)]>0x0&&!_0x546cbd[_0x4f8d72(0x157)](_0x44a2b5['_calName']))continue;const _0x494238=_0x44a2b5[_0x4f8d72(0x19f)]||_0x44a2b5[_0x4f8d72(0x12a)]||_0x44a2b5[_0x4f8d72(0x12d)];if(!_0x494238)continue;const _0x3f2297=new Date(_0x494238);if(isNaN(_0x3f2297[_0x4f8d72(0x151)]()))continue;const _0x5b3217=(_0x44a2b5['event']||_0x44a2b5[_0x4f8d72(0x14b)]||'')[_0x4f8d72(0x119)]();if(_0x5b3217[_0x4f8d72(0x157)](_0x4f8d72(0x14f))||_0x5b3217['includes'](_0x4f8d72(0x1ad))||_0x5b3217[_0x4f8d72(0x157)](_0x4f8d72(0x16b))){let _0x2189fb=0x0;Object[_0x4f8d72(0x1b1)](_0x3a592b)[_0x4f8d72(0x11e)](_0x125467=>{if(_0x125467>_0x2189fb)_0x2189fb=_0x125467;});if(_0x2189fb===0x0)_0x2189fb=0x78;const _0x5e2ecc=_0x3f2297['getTime']()-_0x2189fb*0xea60;_0x28d911>=_0x5e2ecc&&_0x28d911<_0x3f2297[_0x4f8d72(0x151)]()&&(_0x2a6350[_0x4f8d72(0x198)]!==_0x4f8d72(0x1a5)&&(_0x2a6350['log'][_0x4f8d72(0x127)]('ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20'+_0x2189fb+'\x20min).'),await _0x2a6350[_0x4f8d72(0x1c1)](_0x4f8d72(0x181),{'val':'normal','ack':![]})));}for(const _0x30c454 of _0x3820fa){if(_0x30c454['location']){const _0x5328c0=_0x30c454[_0x4f8d72(0x10f)][_0x4f8d72(0x119)](),_0x56f954=(_0x30c454['name']||'')[_0x4f8d72(0x119)]();let _0x39ede3=_0x5b3217[_0x4f8d72(0x157)](_0x5328c0);!_0x39ede3&&_0x56f954['length']>0x3&&_0x5b3217[_0x4f8d72(0x157)](_0x56f954)&&(_0x39ede3=!![]);if(_0x39ede3){const _0x567a11=getWarmupRobust(_0x3a592b,_0x30c454['location']),_0x4eae03=_0x30505d[_0x30c454[_0x4f8d72(0x10f)]]||_0x4f8d72(0x1a4),_0x34abf7=_0x3f2297[_0x4f8d72(0x151)]()-_0x567a11*0xea60;if(_0x28d911>=_0x34abf7&&_0x28d911<_0x3f2297['getTime']()){const _0x1b4725=lastActions[_0x4f8d72(0x1b4)+_0x30c454[_0x4f8d72(0x10f)]];if(_0x1b4725&&_0x28d911-_0x1b4725<CAL_COOLDOWN_MS)continue;const _0x44ce6a=await findRelatedId(_0x2a6350,_0x30c454['id'],_0x4f8d72(0x16f));if(_0x44ce6a){let _0x369b07=_0x45415c[_0x30c454[_0x4f8d72(0x10f)]];if(_0x369b07===undefined)_0x369b07=_0x45415c[_0x4f8d72(0x183)];if(_0x369b07===undefined)_0x369b07=0x15;const _0x4422a1=await _0x2a6350[_0x4f8d72(0x12e)](_0x44ce6a);if(_0x4422a1&&typeof _0x4422a1[_0x4f8d72(0x13a)]===_0x4f8d72(0x18b)&&_0x4422a1['val']<_0x369b07-0.5){_0x2a6350[_0x4f8d72(0x166)][_0x4f8d72(0x127)]('ðŸ“…\x20SMART\x20SCHEDULE\x20['+_0x4eae03+']:\x20Raum-Trigger\x20\x27'+_0x30c454['location']+_0x4f8d72(0x19c)+_0x5b3217+_0x4f8d72(0x186)+_0x369b07+'Â°C\x20(Vorlauf:\x20'+_0x567a11+_0x4f8d72(0x185)),await _0x2a6350['setForeignStateAsync'](_0x44ce6a,_0x369b07),await logAutomationAction(_0x2a6350,_0x4f8d72(0x131)+_0x30c454[_0x4f8d72(0x10f)]+_0x4f8d72(0x1a9)+_0x369b07+_0x4f8d72(0x174)+_0x4eae03+')'),lastActions['cal_'+_0x30c454['location']]=_0x28d911;const _0x448a9e=_0x382d84['findIndex'](_0x16cf11=>_0x16cf11[_0x4f8d72(0x1bf)]===_0x30c454['location']);if(_0x448a9e!==-0x1)_0x382d84[_0x4f8d72(0x113)](_0x448a9e,0x1);_0x382d84['push']({'room':_0x30c454['location'],'target':_0x369b07,'until':_0x3f2297[_0x4f8d72(0x151)]()}),_0x1cf659=!![];}}}}}}}_0x1cf659&&await _0x2a6350[_0x4f8d72(0x1c1)]('analysis.energy.activeEnforcements',{'val':JSON[_0x4f8d72(0x1bd)](_0x382d84),'ack':!![]});}catch(_0x5cd133){_0x2a6350[_0x4f8d72(0x166)]['warn'](_0x4f8d72(0x145)+_0x5cd133[_0x4f8d72(0x160)]);}}async function manageMpcIntervention(_0x19611a,_0x34fcb4,_0x47616f){const _0x53d218=a1_0x357857;try{const _0x5433a4=_0x53d218(0x167),_0x275d84=await _0x19611a[_0x53d218(0x158)](_0x5433a4);let _0x4aa5f3=[];if(_0x275d84&&_0x275d84['val'])try{_0x4aa5f3=JSON['parse'](_0x275d84[_0x53d218(0x13a)]);}catch(_0x3ebf84){}const _0x3df79e=_0x4aa5f3[_0x53d218(0x13b)](_0x34fcb4);if(_0x47616f===_0x53d218(0x1b6))_0x3df79e===-0x1&&(_0x4aa5f3[_0x53d218(0x184)](_0x34fcb4),await _0x19611a[_0x53d218(0x1c1)](_0x5433a4,{'val':JSON[_0x53d218(0x1bd)](_0x4aa5f3),'ack':!![]}));else _0x47616f===_0x53d218(0x1a1)&&(_0x3df79e!==-0x1&&(_0x4aa5f3['splice'](_0x3df79e,0x1),await _0x19611a[_0x53d218(0x1c1)](_0x5433a4,{'val':JSON['stringify'](_0x4aa5f3),'ack':!![]})));}catch(_0x2d09d2){}}async function cleanupGhostInterventions(_0x20e8de){const _0x36e078=a1_0x357857;try{const _0xc6a009=_0x36e078(0x167),_0x551d90=await _0x20e8de[_0x36e078(0x158)](_0xc6a009);if(!_0x551d90||!_0x551d90[_0x36e078(0x13a)])return;const _0x37a670=JSON[_0x36e078(0x1b9)](_0x551d90[_0x36e078(0x13a)]);if(!Array['isArray'](_0x37a670)||_0x37a670[_0x36e078(0x116)]===0x0)return;let _0x396c35={'default':0x15};try{const _0x8238ea=await _0x20e8de[_0x36e078(0x158)](_0x36e078(0x1c8));if(_0x8238ea&&_0x8238ea[_0x36e078(0x13a)])_0x396c35=JSON['parse'](_0x8238ea['val']);}catch(_0x2d2f46){}let _0x2b12af=[];try{const _0x138fd0=await _0x20e8de['getStateAsync'](_0x36e078(0x19b));if(_0x138fd0&&_0x138fd0[_0x36e078(0x13a)])_0x2b12af=JSON[_0x36e078(0x1b9)](_0x138fd0[_0x36e078(0x13a)]);}catch(_0x4f94db){}let _0x282831={},_0x22c4f4=![];try{const _0x3525c3=await _0x20e8de[_0x36e078(0x158)](_0x36e078(0x10e));if(_0x3525c3&&_0x3525c3['val'])_0x282831=JSON[_0x36e078(0x1b9)](_0x3525c3[_0x36e078(0x13a)]);}catch(_0x2e412e){}if(_0x282831[_0x36e078(0x175)]){const _0x13574a=Date['now']();for(const [_0x1b812d,_0x553d43]of Object[_0x36e078(0x13d)](_0x282831['_meta'])){_0x13574a-_0x553d43>PENALTY_TTL&&(delete _0x282831[_0x1b812d],delete _0x282831[_0x36e078(0x175)][_0x1b812d],_0x22c4f4=!![],_0x20e8de['log']['info'](_0x36e078(0x10b)+_0x1b812d+_0x36e078(0x17a)));}}const _0x40abd6=_0x20e8de[_0x36e078(0x191)][_0x36e078(0x17b)]||[];let _0x105914=![];for(let _0x38dc3d=_0x37a670[_0x36e078(0x116)]-0x1;_0x38dc3d>=0x0;_0x38dc3d--){const _0xc8445a=_0x37a670[_0x38dc3d],_0x3c6360=_0x40abd6[_0x36e078(0x117)](_0x15b331=>normalize(_0x15b331[_0x36e078(0x10f)])===normalize(_0xc8445a)&&(_0x15b331[_0x36e078(0x124)]==='temperature'||_0x15b331[_0x36e078(0x124)]===_0x36e078(0x1b8)));if(!_0x3c6360){_0x20e8de['log'][_0x36e078(0x1a8)]('ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27'+_0xc8445a+'\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.'),_0x37a670[_0x36e078(0x113)](_0x38dc3d,0x1),_0x105914=!![];continue;}if(_0x3c6360){const _0x40e419=await findRelatedId(_0x20e8de,_0x3c6360['id'],_0x36e078(0x16f)),_0x2393dc=await _0x20e8de['getForeignStateAsync'](_0x3c6360['id']);if(_0x40e419){const _0x1598c9=await _0x20e8de[_0x36e078(0x12e)](_0x40e419);if(_0x1598c9&&typeof _0x1598c9[_0x36e078(0x13a)]===_0x36e078(0x18b)){let _0x844ed1=![],_0x582491='';Math[_0x36e078(0x1b3)](_0x1598c9['val']-ECO_TEMP)>0.5&&(_0x844ed1=!![],_0x582491='manual');if(!_0x844ed1&&_0x2393dc&&typeof _0x2393dc[_0x36e078(0x13a)]===_0x36e078(0x18b)){const _0x457efe=_0x396c35[_0xc8445a]||_0x396c35[_0x36e078(0x183)]||0x15;_0x2393dc['val']<_0x457efe+0.2&&(_0x844ed1=!![],_0x582491=_0x36e078(0x177));}if(_0x844ed1){if(_0x582491===_0x36e078(0x1c7)){_0x20e8de[_0x36e078(0x166)][_0x36e078(0x127)](_0x36e078(0x19d)+_0xc8445a+'\x20ist\x20auf\x20'+_0x1598c9[_0x36e078(0x13a)]+'Â°C\x20(nicht\x20'+ECO_TEMP+_0x36e078(0x15b));const _0x2b6ee3=lastActions[_0x36e078(0x1b4)+_0xc8445a],_0x58ba58=_0x2b6ee3&&Date[_0x36e078(0x1af)]()-_0x2b6ee3<0x2*0x3c*0x3e8;if(!_0x58ba58&&_0x1598c9[_0x36e078(0x13a)]>ECO_TEMP+0.5){_0x20e8de[_0x36e078(0x144)]&&(_0x20e8de['log'][_0x36e078(0x127)](_0x36e078(0x140)+_0xc8445a+_0x36e078(0x193)),_0x20e8de[_0x36e078(0x144)](_0x36e078(0x109),{'room':_0xc8445a}));const _0x29f377=_0xc8445a+'_'+new Date()[_0x36e078(0x146)]();if(!_0x282831[_0x29f377]){_0x282831[_0x29f377]=0x1;if(!_0x282831['_meta'])_0x282831['_meta']={};_0x282831[_0x36e078(0x175)][_0x29f377]=Date[_0x36e078(0x1af)](),_0x22c4f4=!![];}}else _0x58ba58&&_0x20e8de[_0x36e078(0x166)][_0x36e078(0x127)]('ðŸ“…\x20[MPC\x20INFO]\x20'+_0xc8445a+_0x36e078(0x170));}else{if(_0x582491==='too_cold'){let _0x30da99=![];if(_0x2b12af[_0x36e078(0x117)](_0x3bdf60=>_0x3bdf60[_0x36e078(0x1bf)]===_0xc8445a))_0x30da99=!![];const _0x1125d4=_0x40abd6[_0x36e078(0x1ab)](_0x574c6b=>normalize(_0x574c6b['location'])===normalize(_0xc8445a)&&(_0x574c6b[_0x36e078(0x124)]===_0x36e078(0x141)||_0x574c6b['type']==='sensor'||_0x574c6b[_0x36e078(0x124)]===_0x36e078(0x15a)));for(const _0x461ecf of _0x1125d4){try{const _0x2a9a8f=await _0x20e8de['getForeignStateAsync'](_0x461ecf['id']);if(_0x2a9a8f&&(_0x2a9a8f[_0x36e078(0x13a)]===!![]||_0x2a9a8f['val']===0x1||String(_0x2a9a8f[_0x36e078(0x13a)])['toLowerCase']()===_0x36e078(0x1c5)))_0x30da99=!![];}catch(_0x38d8e8){}}if(_0x30da99)_0x20e8de[_0x36e078(0x166)][_0x36e078(0x127)](_0x36e078(0x11f)+_0xc8445a+_0x36e078(0x122));else{const _0x19921b=_0x396c35[_0xc8445a]||_0x396c35['default']||0x15;_0x20e8de['log'][_0x36e078(0x127)](_0x36e078(0x1ac)+_0xc8445a+_0x36e078(0x13e)+_0x2393dc[_0x36e078(0x13a)]+_0x36e078(0x18a)+(_0x19921b+0.2)+'Â°C).\x20Sparmodus\x20beendet!'),await _0x20e8de[_0x36e078(0x1c6)](_0x40e419,_0x19921b),await logAutomationAction(_0x20e8de,_0x36e078(0x1c4)+_0xc8445a+':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20'+_0x19921b+'Â°C'),lastActions['rescue_'+_0xc8445a]=Date[_0x36e078(0x1af)]();}}}_0x37a670[_0x36e078(0x113)](_0x38dc3d,0x1),_0x105914=!![];}}}}}_0x105914&&await _0x20e8de['setStateAsync'](_0xc6a009,{'val':JSON[_0x36e078(0x1bd)](_0x37a670),'ack':!![]}),_0x22c4f4&&await _0x20e8de[_0x36e078(0x1c1)]('analysis.energy.rlPenalties',{'val':JSON['stringify'](_0x282831),'ack':!![]});}catch(_0x2ca8c9){}}async function applyEnergySavings(_0x2b49db,_0x467ba8){const _0x1c3ae8=a1_0x357857;await cleanupGhostInterventions(_0x2b49db);if(!_0x467ba8||_0x467ba8[_0x1c3ae8(0x116)]===0x0)return;const _0xd79673=_0x2b49db[_0x1c3ae8(0x191)][_0x1c3ae8(0x17b)]||[],_0x3a1251=Date[_0x1c3ae8(0x1af)]();for(const _0x4a7d21 of _0x467ba8){const _0x4da2c9=_0x4a7d21['room'],_0x6e2f84=_0x4a7d21[_0x1c3ae8(0x173)],_0x5e930d=_0x4a7d21['target']||0x15;if(lastActions['rescue_'+_0x4da2c9]&&_0x3a1251-lastActions['rescue_'+_0x4da2c9]<RESCUE_LOCK_MS)continue;const _0x4d2f00=_0xd79673[_0x1c3ae8(0x117)](_0x7268c8=>normalize(_0x7268c8[_0x1c3ae8(0x10f)])===normalize(_0x4da2c9)&&(_0x7268c8['type']===_0x1c3ae8(0x1c3)||_0x7268c8['type']==='thermostat'));if(!_0x4d2f00)continue;const _0x40b1de=await findRelatedId(_0x2b49db,_0x4d2f00['id'],_0x1c3ae8(0x16f));if(_0x40b1de){if(lastActions['mpc_'+_0x4da2c9]&&_0x3a1251-lastActions[_0x1c3ae8(0x108)+_0x4da2c9]<0x1e*0x3c*0x3e8)continue;const _0x3a7ae3=await _0x2b49db['getForeignStateAsync'](_0x40b1de);if(_0x3a7ae3&&typeof _0x3a7ae3[_0x1c3ae8(0x13a)]===_0x1c3ae8(0x18b)){const _0x5704f5=_0x3a7ae3['val'];_0x5704f5!==ECO_TEMP&&await manageMpcIntervention(_0x2b49db,_0x4da2c9,'remove');if(_0x6e2f84>0x1e)_0x5704f5>ECO_TEMP+0.5&&(_0x2b49db[_0x1c3ae8(0x166)][_0x1c3ae8(0x127)](_0x1c3ae8(0x13f)+_0x4da2c9+_0x1c3ae8(0x125)+ECO_TEMP+_0x1c3ae8(0x1bb)+_0x6e2f84+_0x1c3ae8(0x10a)),await _0x2b49db[_0x1c3ae8(0x1c6)](_0x40b1de,ECO_TEMP),await manageMpcIntervention(_0x2b49db,_0x4da2c9,_0x1c3ae8(0x1b6)),lastActions[_0x1c3ae8(0x108)+_0x4da2c9]=_0x3a1251,await logAutomationAction(_0x2b49db,_0x1c3ae8(0x11d)+_0x4da2c9+_0x1c3ae8(0x1c0)+ECO_TEMP+'Â°C'));else _0x6e2f84<=0xf&&(_0x5704f5<_0x5e930d&&(_0x2b49db[_0x1c3ae8(0x166)][_0x1c3ae8(0x127)](_0x1c3ae8(0x138)+_0x4da2c9+_0x1c3ae8(0x171)+_0x5e930d+_0x1c3ae8(0x1a2)),await _0x2b49db['setForeignStateAsync'](_0x40b1de,_0x5e930d),await manageMpcIntervention(_0x2b49db,_0x4da2c9,_0x1c3ae8(0x1a1)),lastActions[_0x1c3ae8(0x108)+_0x4da2c9]=_0x3a1251,await logAutomationAction(_0x2b49db,'[MPC]\x20'+_0x4da2c9+':\x20Aufheizen\x20auf\x20'+_0x5e930d+'Â°C')));}}else _0x2b49db[_0x1c3ae8(0x166)]['warn']('[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20'+_0x4da2c9+_0x1c3ae8(0x16a));}}module['exports']={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};