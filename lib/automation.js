const a1_0x27872d=a1_0xb7d4;(function(_0x26ad38,_0x12fd43){const _0x47a204=a1_0xb7d4,_0x37bdb2=_0x26ad38();while(!![]){try{const _0xe9414a=parseInt(_0x47a204(0x9e))/0x1+parseInt(_0x47a204(0x82))/0x2+parseInt(_0x47a204(0xc4))/0x3*(-parseInt(_0x47a204(0x11b))/0x4)+-parseInt(_0x47a204(0xa4))/0x5+-parseInt(_0x47a204(0x125))/0x6+parseInt(_0x47a204(0xf2))/0x7*(parseInt(_0x47a204(0xa3))/0x8)+-parseInt(_0x47a204(0xd7))/0x9*(-parseInt(_0x47a204(0xee))/0xa);if(_0xe9414a===_0x12fd43)break;else _0x37bdb2['push'](_0x37bdb2['shift']());}catch(_0x327a13){_0x37bdb2['push'](_0x37bdb2['shift']());}}}(a1_0x46de,0xdc4f0));const a1_0xf4ab12=(function(){let _0x46b92d=!![];return function(_0x4cc50a,_0x26ea58){const _0xeb09b2=_0x46b92d?function(){const _0x556d90=a1_0xb7d4;if(_0x26ea58){const _0x3294ef=_0x26ea58[_0x556d90(0xef)](_0x4cc50a,arguments);return _0x26ea58=null,_0x3294ef;}}:function(){};return _0x46b92d=![],_0xeb09b2;};}()),a1_0x2ead65=a1_0xf4ab12(this,function(){const _0x1fdd41=a1_0xb7d4;return a1_0x2ead65[_0x1fdd41(0xcd)]()[_0x1fdd41(0xb7)](_0x1fdd41(0x108))[_0x1fdd41(0xcd)]()[_0x1fdd41(0xf8)](a1_0x2ead65)['search']('(((.+)+)+)+$');});a1_0x2ead65();'use strict';function a1_0x46de(){const _0x546656=['localeCompare','mpc_','score','trim','analysis.automation.actionLog','SET_POINT_TEMPERATURE','add','rescue_','3959396KzKDzC',']:\x20Raum-Trigger\x20\x27','Soll','state','contact','warn','default','Unbekannt','ist','\x27\x20(Match:\x20','5908146ZhiPYQ','sendToPythonWrapper','Auto-Erkennung','soll','_meta','toUpperCase','¬∞C.','hm-rpc','currentSystemMode','location','.1.ACTUAL_TEMPERATURE','until','setpoint','analysis.energy.activeEnforcements','entries','valve','active','findIndex','useCalendar','analysis.automation.lastAction','set','level','\x20auf\x20','normal','cal_','getHours','write','remove','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','analysis.energy.warmupTargets','setStateAsync','replace','slice','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','2247436gydWef','forEach','\x20->\x20',')\x20aktiv.\x20Heize\x20auf\x20','getTime','wert','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','analysis.energy.mpcActiveInterventions','setForeignStateAsync','push','Unknown','length','temp','level.valve','error','system.mode','.4.SET_TEMPERATURE','toLowerCase','\x20wieder\x20auf\x20','map','type','Pr√§diktion:\x20','Nicht\x20gefunden','¬∞C\x20(Kalender-Schutz)','ACTUAL','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','config','isArray','637600HvWyiA','Calendar\x20Check\x20Error:\x20','¬∞C!\x20(Puffer:\x20','thermostatMapping','üìÖ\x20SMART\x20SCHEDULE\x20[','403928OvQFLv','8698885wSPuWn','¬∞C\x20(nicht\x20','Classic','local_temperature','üö®\x20[MPC\x20WATCHDOG]\x20','number','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','üßπ\x20[MPC\x20CLEANUP]\x20','minutes_safe','filter','position','PERFECT','analysis.energy.ventilationAlerts','¬∞C!\x20(Puffer\x20leer).','_calName','pi_heating_demand','devices','message','getStateAsync','search','info','level.temperature','window','stellwert','unshift','openknx','find','temperature',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','split','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','3fvRmGi','now','from','üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','event','ACTUAL_TEMPERATURE','[MPC]\x20','reason','toString','¬∞C\x20(Vorlauf:\x20','Fehlt','approved',':\x20Absenkung\x20auf\x20','getForeignObjectsAsync','role','eventStart','.4.VALVE_STATE','val','9bxLden','common','calendarInstance','target','.data.table','r√ºckkehr','string','Enforcement\x20Monitor\x20Error:\x20','analysis.energy.rlPenalties','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','name','splice','stringify','valve_position',':\x20Aufheizen\x20auf\x20','valveMapping','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','sensor','SET','log','¬∞C\x20<\x20','urlaub\x20ende','manual','24514550VKjDfJ','apply','üî•\x20[MPC\x20ACTION]\x20Heize\x20','parse','56qQUvXE','¬∞C\x20->\x20','analysis.energy.warmupTimes','target_temperature','dimmer','summary','constructor','calendarSelection','\x20min).','\x20min)','analysis.energy.warmupSources','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','room','off','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','[CAL]\x20','light','.1.LEVEL','\x20wurde\x20manuell\x20erh√∂ht.','.1.TEMPERATURE','abs','getForeignStateAsync','(((.+)+)+)+$','[FORCE]\x20','join','thermostat','date','.1.SET_POINT_TEMPERATURE','value.valve','TRAIN_RL_PENALTY','includes','sort','current_heating_setpoint'];a1_0x46de=function(){return _0x546656;};return a1_0x46de();}const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x303567){const _0x580081=a1_0xb7d4;if(!_0x303567)return'';return _0x303567[_0x580081(0x93)]()[_0x580081(0x7e)](/\s+/g,'')[_0x580081(0x116)]();}function getWarmupRobust(_0x266eae,_0x2c5602){const _0x140470=a1_0xb7d4;if(!_0x266eae||!_0x2c5602)return 0x3c;if(_0x266eae[_0x2c5602]!==undefined)return _0x266eae[_0x2c5602];const _0x5d62dc=_0x2c5602[_0x140470(0x93)]()[_0x140470(0x7e)](/√§/g,'ae')[_0x140470(0x7e)](/√∂/g,'oe')[_0x140470(0x7e)](/√º/g,'ue')[_0x140470(0x7e)](/√ü/g,'ss')['replace'](/\s+/g,'_')[_0x140470(0x7e)](/[^a-z0-9_]/g,'');if(_0x266eae[_0x5d62dc]!==undefined)return _0x266eae[_0x5d62dc];return 0x3c;}function a1_0xb7d4(_0x2c58e5,_0x4b13e2){const _0x2e9ca1=a1_0x46de();return a1_0xb7d4=function(_0x2ead65,_0xf4ab12){_0x2ead65=_0x2ead65-0x70;let _0x46de92=_0x2e9ca1[_0x2ead65];return _0x46de92;},a1_0xb7d4(_0x2c58e5,_0x4b13e2);}async function logAutomationAction(_0x6def49,_0x214cbf){const _0x38eebf=a1_0xb7d4;await _0x6def49[_0x38eebf(0x7d)](_0x38eebf(0x72),{'val':_0x214cbf,'ack':!![]});try{const _0x2e4871=_0x38eebf(0x117),_0xc202cd=await _0x6def49[_0x38eebf(0xb6)](_0x2e4871);let _0x382f41=[];if(_0xc202cd&&_0xc202cd[_0x38eebf(0xd6)])try{_0x382f41=JSON[_0x38eebf(0xf1)](_0xc202cd['val']);}catch(_0x5022f2){}_0x382f41[_0x38eebf(0xbc)]({'ts':Date['now'](),'msg':_0x214cbf});if(_0x382f41['length']>0x32)_0x382f41=_0x382f41[_0x38eebf(0x7f)](0x0,0x32);await _0x6def49[_0x38eebf(0x7d)](_0x2e4871,{'val':JSON[_0x38eebf(0xe3)](_0x382f41),'ack':!![]});}catch(_0x3b1718){}}async function handlePrediction(_0x48b054,_0xa1ccfa,_0x70dbe5){const _0x32d4ce=a1_0xb7d4;if(!_0xa1ccfa||_0xa1ccfa===_0x32d4ce(0x8c))return;let _0x1ce7ff='off',_0xbe8975=0.6;try{const _0x259a4d=await _0x48b054[_0x32d4ce(0xb6)]('analysis.automation.mode');if(_0x259a4d&&_0x259a4d[_0x32d4ce(0xd6)])_0x1ce7ff=_0x259a4d[_0x32d4ce(0xd6)];const _0x6fc78c=await _0x48b054[_0x32d4ce(0xb6)]('analysis.automation.confidenceThreshold');if(_0x6fc78c&&_0x6fc78c['val'])_0xbe8975=_0x6fc78c[_0x32d4ce(0xd6)];}catch(_0x15e7bc){}if(_0x1ce7ff===_0x32d4ce(0xff)||_0x70dbe5<_0xbe8975)return;const _0x5ab21a=Date[_0x32d4ce(0xc5)]();if(lastActions[_0xa1ccfa]&&_0x5ab21a-lastActions[_0xa1ccfa]<COOLDOWN_MS)return;const _0x4507d1=_0x48b054[_0x32d4ce(0x9c)][_0x32d4ce(0xb4)]||[],_0x182f12=normalize(_0xa1ccfa),_0x10794f=_0x4507d1['find'](_0x54e0e7=>normalize(_0x54e0e7['location'])===_0x182f12&&(_0x54e0e7[_0x32d4ce(0x96)]===_0x32d4ce(0x102)||_0x54e0e7[_0x32d4ce(0x96)]===_0x32d4ce(0xf6)||_0x54e0e7[_0x32d4ce(0x96)]==='switch'));if(!_0x10794f)return;const _0x4bfed0=await aiAgent['consultButler'](_0x48b054,_0xa1ccfa,_0x10794f[_0x32d4ce(0xe1)],_0x70dbe5);if(!_0x4bfed0[_0x32d4ce(0xd0)])return;const _0x3db248=_0x32d4ce(0x97)+_0xa1ccfa+'\x20->\x20Schalte\x20'+_0x10794f[_0x32d4ce(0xe1)]+'\x20('+_0x4bfed0[_0x32d4ce(0xcc)]+')';await logAutomationAction(_0x48b054,'['+_0x1ce7ff[_0x32d4ce(0x12a)]()+']\x20'+_0x3db248);if(_0x1ce7ff===_0x32d4ce(0x135)){const _0x3ec580=await _0x48b054[_0x32d4ce(0x107)](_0x10794f['id']);(!_0x3ec580||!_0x3ec580[_0x32d4ce(0xd6)]&&_0x3ec580[_0x32d4ce(0xd6)]!==!![])&&await _0x48b054['setForeignStateAsync'](_0x10794f['id'],!![]),lastActions[_0xa1ccfa]=_0x5ab21a;}}async function findRelatedId(_0x3b8f77,_0x1829e9,_0x5a7f9a=a1_0x27872d(0x131)){const _0x5634fd=a1_0x27872d;if(_0x5a7f9a===_0x5634fd(0x131)&&_0x3b8f77[_0x5634fd(0x9c)][_0x5634fd(0xa1)]){let _0x4f1404=_0x3b8f77[_0x5634fd(0x9c)]['thermostatMapping'];if(typeof _0x4f1404===_0x5634fd(0xdd))try{_0x4f1404=JSON[_0x5634fd(0xf1)](_0x4f1404);}catch(_0x5a2d30){}if(_0x4f1404&&_0x4f1404[_0x1829e9])return _0x4f1404[_0x1829e9];}if(_0x5a7f9a===_0x5634fd(0x134)&&_0x3b8f77['config']['valveMapping']){let _0x52b5b8=_0x3b8f77['config'][_0x5634fd(0xe6)];if(typeof _0x52b5b8===_0x5634fd(0xdd))try{_0x52b5b8=JSON[_0x5634fd(0xf1)](_0x52b5b8);}catch(_0x43f349){}if(_0x52b5b8&&_0x52b5b8[_0x1829e9])return _0x52b5b8[_0x1829e9];}let _0x1f3946=[];if(_0x5a7f9a==='setpoint')_0x1f3946=[{'s':_0x5634fd(0x12f),'t':_0x5634fd(0x10d)},{'s':_0x5634fd(0x105),'t':_0x5634fd(0x10d)},{'s':_0x5634fd(0x105),'t':_0x5634fd(0x92)},{'s':_0x5634fd(0xca),'t':_0x5634fd(0x118)},{'s':_0x5634fd(0xa7),'t':'occupied_heating_setpoint'},{'s':_0x5634fd(0xa7),'t':_0x5634fd(0x112)},{'s':'temperature','t':_0x5634fd(0xf5)},{'s':_0x5634fd(0x9a),'t':_0x5634fd(0xe9)},{'s':'Ist','t':_0x5634fd(0x11d)},{'s':_0x5634fd(0xbf),'t':_0x5634fd(0x131)}];else _0x5a7f9a===_0x5634fd(0x134)&&(_0x1f3946=[{'s':_0x5634fd(0x12f),'t':_0x5634fd(0x103)},{'s':_0x5634fd(0x105),'t':_0x5634fd(0x103)},{'s':'.1.TEMPERATURE','t':_0x5634fd(0xd5)},{'s':_0x5634fd(0xa7),'t':_0x5634fd(0xb3)},{'s':_0x5634fd(0xbf),'t':_0x5634fd(0xe4)},{'s':_0x5634fd(0xbf),'t':'level'}]);for(const _0x4ca837 of _0x1f3946){if(_0x1829e9[_0x5634fd(0x110)](_0x4ca837['s'])){const _0x2aa5ab=_0x1829e9[_0x5634fd(0x7e)](_0x4ca837['s'],_0x4ca837['t']),_0xe1fbcc=await _0x3b8f77['getForeignObjectAsync'](_0x2aa5ab);if(_0xe1fbcc)return _0x2aa5ab;}}try{const _0x1c5170=_0x1829e9[_0x5634fd(0xc1)]('.');if(_0x1c5170[_0x5634fd(0x8d)]>0x2){const _0x360a74=_0x1c5170['slice'](0x0,-0x1)[_0x5634fd(0x10a)]('.'),_0x3a056a=await _0x3b8f77[_0x5634fd(0xd2)](_0x360a74+'.*'),_0x3a8dd6=[],_0x13780d=_0x1829e9[_0x5634fd(0xc1)](/[._]+/)[_0x5634fd(0xad)](_0x35c525=>![_0x5634fd(0xbd),'0',_0x5634fd(0x12c),_0x5634fd(0x123),_0x5634fd(0x87),_0x5634fd(0xbf),'actual',_0x5634fd(0xe8),'messwert',_0x5634fd(0x11e)]['includes'](_0x35c525['toLowerCase']()));for(const [_0xf74c05,_0x92ab4]of Object['entries'](_0x3a056a)){if(_0xf74c05===_0x1829e9)continue;if(_0x92ab4&&_0x92ab4[_0x5634fd(0xd8)]){const _0x4398c9=_0xf74c05[_0x5634fd(0x93)](),_0x4e1001=(_0x92ab4[_0x5634fd(0xd8)][_0x5634fd(0xd3)]||'')[_0x5634fd(0x93)](),_0x409853=(_0x92ab4[_0x5634fd(0xd8)]['unit']||'')[_0x5634fd(0x93)]();let _0x49046a=![];if(_0x5a7f9a===_0x5634fd(0x131)&&_0x92ab4['common'][_0x5634fd(0x79)]===!![])_0x49046a=_0x4398c9['includes'](_0x5634fd(0x73))||_0x4398c9['includes'](_0x5634fd(0x128))||_0x4398c9[_0x5634fd(0x110)]('target')||_0x4e1001[_0x5634fd(0x110)](_0x5634fd(0xb9))||_0x4e1001['includes']('thermostat.setpoint');else _0x5a7f9a===_0x5634fd(0x134)&&(_0x49046a=_0x4398c9[_0x5634fd(0x110)](_0x5634fd(0x74))||_0x4398c9[_0x5634fd(0x110)]('valve')||_0x4398c9['includes'](_0x5634fd(0xbb))||_0x4398c9[_0x5634fd(0x110)](_0x5634fd(0xae))||_0x4e1001[_0x5634fd(0x110)](_0x5634fd(0x8f))||_0x4e1001[_0x5634fd(0x110)](_0x5634fd(0x10e))||_0x409853['includes']('%'));if(_0x49046a){const _0x1e87b6=_0xf74c05[_0x5634fd(0xc1)](/[._]+/)[_0x5634fd(0x95)](_0x38e180=>_0x38e180[_0x5634fd(0x93)]());let _0x4ebbe4=0x0;_0x13780d[_0x5634fd(0x83)](_0x2cd504=>{if(_0x1e87b6['includes'](_0x2cd504['toLowerCase']()))_0x4ebbe4++;}),_0x3a8dd6[_0x5634fd(0x8b)]({'id':_0xf74c05,'score':_0x4ebbe4});}}}if(_0x3a8dd6[_0x5634fd(0x8d)]>0x0){_0x3a8dd6[_0x5634fd(0x111)]((_0x4ec9fe,_0x23df68)=>_0x23df68[_0x5634fd(0x115)]-_0x4ec9fe[_0x5634fd(0x115)]);if(_0x3a8dd6[0x0][_0x5634fd(0x115)]>0x0)return _0x3a8dd6[0x0]['id'];}}}catch(_0x117076){}return null;}async function scanThermostats(_0x56fe52){const _0x2937ac=a1_0x27872d,_0xd0156a=_0x56fe52[_0x2937ac(0x9c)][_0x2937ac(0xb4)]||[],_0xad12f2=[],_0x3dc3b0=_0xd0156a[_0x2937ac(0xad)](_0x1bd894=>_0x1bd894['id']&&_0x1bd894['id'][_0x2937ac(0x110)]('temperature')||_0x1bd894['type']&&[_0x2937ac(0xbf),_0x2937ac(0x10b),_0x2937ac(0xe8)]['includes'](_0x1bd894['type'])||_0x1bd894[_0x2937ac(0xe1)]&&_0x1bd894['name'][_0x2937ac(0x93)]()[_0x2937ac(0x110)](_0x2937ac(0x8e)));for(const _0x253f6f of _0x3dc3b0){const _0x17d6a8=await findRelatedId(_0x56fe52,_0x253f6f['id'],'setpoint'),_0x32a5ec=await findRelatedId(_0x56fe52,_0x253f6f['id'],_0x2937ac(0x134));let _0x3dbcc0=_0x2937ac(0x98),_0x4f08ab=![],_0x239e71=_0x56fe52[_0x2937ac(0x9c)]['thermostatMapping']||{};if(typeof _0x239e71===_0x2937ac(0xdd))try{_0x239e71=JSON[_0x2937ac(0xf1)](_0x239e71);}catch(_0x248958){}let _0x386f30=_0x56fe52[_0x2937ac(0x9c)]['valveMapping']||{};if(typeof _0x386f30===_0x2937ac(0xdd))try{_0x386f30=JSON['parse'](_0x386f30);}catch(_0x1fbff3){}if(_0x239e71[_0x253f6f['id']]&&_0x239e71[_0x253f6f['id']]===_0x17d6a8||_0x386f30[_0x253f6f['id']]&&_0x386f30[_0x253f6f['id']]===_0x32a5ec)_0x3dbcc0='Manuelles\x20Mapping',_0x4f08ab=!![];else(_0x17d6a8||_0x32a5ec)&&(_0x3dbcc0=_0x2937ac(0x127));_0xad12f2['push']({'room':_0x253f6f[_0x2937ac(0x12e)]||_0x2937ac(0x122),'sensorId':_0x253f6f['id'],'setpointId':_0x17d6a8||'-','valveId':_0x32a5ec||'-','source':_0x3dbcc0,'isManual':_0x4f08ab,'status':_0x17d6a8&&_0x32a5ec?_0x2937ac(0xaf):_0x17d6a8?'OK':_0x2937ac(0xcf)});}return _0xad12f2[_0x2937ac(0x111)]((_0x243782,_0x10ddef)=>_0x243782[_0x2937ac(0xfe)][_0x2937ac(0x113)](_0x10ddef['room']));}async function updateSchedulePreview(_0x2942bf){const _0x585065=a1_0x27872d;if(!_0x2942bf[_0x585065(0x9c)][_0x585065(0x71)]||!_0x2942bf['config'][_0x585065(0xd9)])return;let _0x206bc8={};try{const _0x398a10=await _0x2942bf[_0x585065(0xb6)](_0x585065(0xf4));if(_0x398a10&&_0x398a10['val'])_0x206bc8=JSON[_0x585065(0xf1)](_0x398a10[_0x585065(0xd6)]);}catch(_0x401599){}const _0x55eee6=[],_0x175d41=Date['now'](),_0x39e43a=0x30*0x3c*0x3c*0x3e8;try{const _0x20a6aa=await _0x2942bf[_0x585065(0x107)](_0x2942bf[_0x585065(0x9c)]['calendarInstance']+_0x585065(0xdb));if(!_0x20a6aa||!_0x20a6aa[_0x585065(0xd6)])return;const _0x2ef3e4=JSON[_0x585065(0xf1)](_0x20a6aa[_0x585065(0xd6)]),_0x3a9583=_0x2942bf[_0x585065(0x9c)][_0x585065(0xf9)]||[],_0x1ac7e4=_0x2942bf[_0x585065(0x9c)][_0x585065(0xb4)]||[],_0x1d1794=new Set();_0x1ac7e4[_0x585065(0x83)](_0x275fc5=>{const _0x15aa85=_0x585065;if(_0x275fc5[_0x15aa85(0x12e)])_0x1d1794[_0x15aa85(0x119)](_0x275fc5[_0x15aa85(0x12e)]);});for(const _0x4d23b4 of _0x2ef3e4){if(_0x4d23b4[_0x585065(0xb2)]&&_0x3a9583[_0x585065(0x8d)]>0x0&&!_0x3a9583[_0x585065(0x110)](_0x4d23b4[_0x585065(0xb2)]))continue;const _0x25a152=_0x4d23b4['_date']||_0x4d23b4[_0x585065(0xd4)]||_0x4d23b4[_0x585065(0x10c)];if(!_0x25a152)continue;const _0x8f109a=new Date(_0x25a152),_0x551124=_0x8f109a[_0x585065(0x86)]();if(isNaN(_0x551124))continue;if(_0x551124<_0x175d41)continue;if(_0x551124>_0x175d41+_0x39e43a)continue;const _0x29ef0e=(_0x4d23b4['event']||_0x4d23b4[_0x585065(0xf7)]||'')[_0x585065(0x93)]();let _0x62464a=![],_0x207b8a=[],_0x4a5357=_0x4d23b4[_0x585065(0xc9)]||_0x4d23b4[_0x585065(0xf7)]||_0x585065(0x122);if(_0x29ef0e[_0x585065(0x110)](_0x585065(0xec))||_0x29ef0e[_0x585065(0x110)](_0x585065(0xdc))||_0x29ef0e[_0x585065(0x110)]('ankunft'))_0x62464a=!![],_0x207b8a=Array[_0x585065(0xc6)](_0x1d1794);else for(const _0x5b613e of _0x1d1794){if(_0x29ef0e[_0x585065(0x110)](_0x5b613e[_0x585065(0x93)]()))_0x207b8a[_0x585065(0x8b)](_0x5b613e);}_0x207b8a[_0x585065(0x8d)]>0x0&&_0x207b8a[_0x585065(0x83)](_0x2fe43a=>{const _0x187e42=_0x585065;let _0x466c2f=0x3c;if(_0x62464a){let _0x3ee930=0x0;Object['values'](_0x206bc8)[_0x187e42(0x83)](_0x12d7f7=>{if(_0x12d7f7>_0x3ee930)_0x3ee930=_0x12d7f7;}),_0x466c2f=_0x3ee930>0x0?_0x3ee930:0x78;}else _0x466c2f=getWarmupRobust(_0x206bc8,_0x2fe43a);const _0x7b6cbc=new Date(_0x551124-_0x466c2f*0xea60);_0x55eee6[_0x187e42(0x8b)]({'eventTime':_0x551124,'triggerTime':_0x7b6cbc['getTime'](),'room':_0x2fe43a,'minutes':_0x466c2f,'reason':_0x4a5357,'isGlobal':_0x62464a});});}}catch(_0x4b184a){}_0x55eee6['sort']((_0x45003a,_0x523c68)=>_0x45003a['triggerTime']-_0x523c68['triggerTime']);const _0x3dd682=_0x55eee6[_0x585065(0x7f)](0x0,0x1e);await _0x2942bf[_0x585065(0x7d)]('analysis.energy.schedulePreview',{'val':JSON[_0x585065(0xe3)](_0x3dd682),'ack':!![]});}async function monitorEnforcements(_0x39b90b){const _0x5b9212=a1_0x27872d;try{const _0x8dbe5e=_0x5b9212(0x132),_0x2e9e11=await _0x39b90b['getStateAsync'](_0x8dbe5e);if(!_0x2e9e11||!_0x2e9e11[_0x5b9212(0xd6)])return;let _0x3f3fda=[];try{_0x3f3fda=JSON[_0x5b9212(0xf1)](_0x2e9e11[_0x5b9212(0xd6)]);}catch(_0x5e01ca){return;}if(!Array[_0x5b9212(0x9d)](_0x3f3fda)||_0x3f3fda[_0x5b9212(0x8d)]===0x0)return;const _0x3a2120=Date[_0x5b9212(0xc5)](),_0x3fe920=_0x39b90b[_0x5b9212(0x9c)]['devices']||[];let _0x77bd35=![];for(let _0xc3d122=_0x3f3fda[_0x5b9212(0x8d)]-0x1;_0xc3d122>=0x0;_0xc3d122--){const _0x4a5f3f=_0x3f3fda[_0xc3d122];if(_0x3a2120>=_0x4a5f3f[_0x5b9212(0x130)]){_0x39b90b['log'][_0x5b9212(0xb8)](_0x5b9212(0xe0)+_0x4a5f3f[_0x5b9212(0xfe)]+_0x5b9212(0x7b)),_0x3f3fda[_0x5b9212(0xe2)](_0xc3d122,0x1),_0x77bd35=!![];continue;}const _0x5370a2=_0x3fe920[_0x5b9212(0xbe)](_0x4412a5=>normalize(_0x4412a5['location'])===normalize(_0x4a5f3f[_0x5b9212(0xfe)])&&(_0x4412a5[_0x5b9212(0x96)]===_0x5b9212(0xbf)||_0x4412a5[_0x5b9212(0x96)]===_0x5b9212(0x10b)));if(_0x5370a2){const _0x6d274a=await findRelatedId(_0x39b90b,_0x5370a2['id'],'setpoint');if(_0x6d274a){const _0x206f89=await _0x39b90b[_0x5b9212(0x107)](_0x6d274a);_0x206f89&&typeof _0x206f89[_0x5b9212(0xd6)]==='number'&&(_0x206f89[_0x5b9212(0xd6)]<0xf&&(_0x39b90b['log'][_0x5b9212(0x120)](_0x5b9212(0x9b)+_0x4a5f3f[_0x5b9212(0xfe)]+'\x20auf\x20'+_0x206f89[_0x5b9212(0xd6)]+_0x5b9212(0xc2)+_0x4a5f3f[_0x5b9212(0xda)]+_0x5b9212(0x12b)),await _0x39b90b['setForeignStateAsync'](_0x6d274a,_0x4a5f3f[_0x5b9212(0xda)]),await logAutomationAction(_0x39b90b,_0x5b9212(0x109)+_0x4a5f3f[_0x5b9212(0xfe)]+':\x20'+_0x206f89[_0x5b9212(0xd6)]+_0x5b9212(0xf3)+_0x4a5f3f[_0x5b9212(0xda)]+_0x5b9212(0x99))));}}}_0x77bd35&&await _0x39b90b[_0x5b9212(0x7d)](_0x8dbe5e,{'val':JSON[_0x5b9212(0xe3)](_0x3f3fda),'ack':!![]});}catch(_0x6a9014){_0x39b90b[_0x5b9212(0xea)][_0x5b9212(0x90)](_0x5b9212(0xde)+_0x6a9014['message']);}}async function checkCalendarTriggers(_0x5b3440){const _0x1b29bd=a1_0x27872d;if(!_0x5b3440['config'][_0x1b29bd(0x71)]||!_0x5b3440[_0x1b29bd(0x9c)][_0x1b29bd(0xd9)])return;await updateSchedulePreview(_0x5b3440);let _0x113dc9={},_0x3c6945={};try{const _0x53fe11=await _0x5b3440[_0x1b29bd(0xb6)]('analysis.energy.warmupTimes');if(_0x53fe11&&_0x53fe11[_0x1b29bd(0xd6)])_0x113dc9=JSON[_0x1b29bd(0xf1)](_0x53fe11[_0x1b29bd(0xd6)]);const _0x20f642=await _0x5b3440[_0x1b29bd(0xb6)](_0x1b29bd(0xfc));if(_0x20f642&&_0x20f642['val'])_0x3c6945=JSON[_0x1b29bd(0xf1)](_0x20f642[_0x1b29bd(0xd6)]);}catch(_0x582037){}let _0xfe6d2a={'default':0x15};try{const _0x2760f4=await _0x5b3440[_0x1b29bd(0xb6)](_0x1b29bd(0x7c));if(_0x2760f4&&_0x2760f4[_0x1b29bd(0xd6)])_0xfe6d2a=JSON['parse'](_0x2760f4['val']);}catch(_0x56b6a4){}let _0x55d208=[];try{const _0x5c266f=await _0x5b3440[_0x1b29bd(0xb6)](_0x1b29bd(0x132));if(_0x5c266f&&_0x5c266f[_0x1b29bd(0xd6)])_0x55d208=JSON[_0x1b29bd(0xf1)](_0x5c266f['val']);}catch(_0x3c330f){}try{const _0x93c41e=await _0x5b3440[_0x1b29bd(0x107)](_0x5b3440[_0x1b29bd(0x9c)][_0x1b29bd(0xd9)]+_0x1b29bd(0xdb));if(!_0x93c41e||!_0x93c41e['val'])return;const _0x34f5a3=JSON[_0x1b29bd(0xf1)](_0x93c41e[_0x1b29bd(0xd6)]),_0x55cf5a=Date['now'](),_0x1a698b=_0x5b3440[_0x1b29bd(0x9c)][_0x1b29bd(0xb4)]||[],_0x5c798e=_0x5b3440[_0x1b29bd(0x9c)][_0x1b29bd(0xf9)]||[];let _0x5ac91b=![];for(const _0x25c05c of _0x34f5a3){if(_0x25c05c[_0x1b29bd(0xb2)]&&_0x5c798e[_0x1b29bd(0x8d)]>0x0&&!_0x5c798e[_0x1b29bd(0x110)](_0x25c05c[_0x1b29bd(0xb2)]))continue;const _0x1b840f=_0x25c05c['_date']||_0x25c05c[_0x1b29bd(0xd4)]||_0x25c05c[_0x1b29bd(0x10c)];if(!_0x1b840f)continue;const _0x531fbc=new Date(_0x1b840f);if(isNaN(_0x531fbc['getTime']()))continue;const _0x12b593=(_0x25c05c[_0x1b29bd(0xc9)]||_0x25c05c[_0x1b29bd(0xf7)]||'')[_0x1b29bd(0x93)]();if(_0x12b593[_0x1b29bd(0x110)](_0x1b29bd(0xec))||_0x12b593[_0x1b29bd(0x110)]('r√ºckkehr')||_0x12b593[_0x1b29bd(0x110)]('ankunft')){let _0x4b8a50=0x0;Object['values'](_0x113dc9)['forEach'](_0x285456=>{if(_0x285456>_0x4b8a50)_0x4b8a50=_0x285456;});if(_0x4b8a50===0x0)_0x4b8a50=0x78;const _0x4fcfd2=_0x531fbc[_0x1b29bd(0x86)]()-_0x4b8a50*0xea60;_0x55cf5a>=_0x4fcfd2&&_0x55cf5a<_0x531fbc[_0x1b29bd(0x86)]()&&(_0x5b3440[_0x1b29bd(0x12d)]!==_0x1b29bd(0x76)&&(_0x5b3440[_0x1b29bd(0xea)][_0x1b29bd(0xb8)]('üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20'+_0x4b8a50+'\x20min).'),await _0x5b3440[_0x1b29bd(0x7d)](_0x1b29bd(0x91),{'val':_0x1b29bd(0x76),'ack':![]})));}for(const _0x217697 of _0x1a698b){if(_0x217697[_0x1b29bd(0x12e)]){const _0x411ba2=_0x217697[_0x1b29bd(0x12e)][_0x1b29bd(0x93)](),_0x527b58=(_0x217697[_0x1b29bd(0xe1)]||'')[_0x1b29bd(0x93)]();let _0x57c2a7=_0x12b593[_0x1b29bd(0x110)](_0x411ba2);!_0x57c2a7&&_0x527b58[_0x1b29bd(0x8d)]>0x3&&_0x12b593[_0x1b29bd(0x110)](_0x527b58)&&(_0x57c2a7=!![]);if(_0x57c2a7){const _0x23d64c=getWarmupRobust(_0x113dc9,_0x217697['location']),_0x1acdb2=_0x3c6945[_0x217697[_0x1b29bd(0x12e)]]||_0x1b29bd(0xa6),_0x5efb04=_0x531fbc[_0x1b29bd(0x86)]()-_0x23d64c*0xea60;if(_0x55cf5a>=_0x5efb04&&_0x55cf5a<_0x531fbc[_0x1b29bd(0x86)]()){const _0x2f9e70=lastActions[_0x1b29bd(0x77)+_0x217697['location']];if(_0x2f9e70&&_0x55cf5a-_0x2f9e70<CAL_COOLDOWN_MS)continue;const _0x5d1043=await findRelatedId(_0x5b3440,_0x217697['id'],'setpoint');if(_0x5d1043){let _0x102692=_0xfe6d2a[_0x217697[_0x1b29bd(0x12e)]];if(_0x102692===undefined)_0x102692=_0xfe6d2a[_0x1b29bd(0x121)];if(_0x102692===undefined)_0x102692=0x15;const _0xece965=await _0x5b3440[_0x1b29bd(0x107)](_0x5d1043);if(_0xece965&&typeof _0xece965[_0x1b29bd(0xd6)]===_0x1b29bd(0xa9)&&_0xece965[_0x1b29bd(0xd6)]<_0x102692-0.5){_0x5b3440['log'][_0x1b29bd(0xb8)](_0x1b29bd(0xa2)+_0x1acdb2+_0x1b29bd(0x11c)+_0x217697[_0x1b29bd(0x12e)]+_0x1b29bd(0x124)+_0x12b593+_0x1b29bd(0x85)+_0x102692+_0x1b29bd(0xce)+_0x23d64c+_0x1b29bd(0xfa)),await _0x5b3440['setForeignStateAsync'](_0x5d1043,_0x102692),await logAutomationAction(_0x5b3440,_0x1b29bd(0x101)+_0x217697[_0x1b29bd(0x12e)]+_0x1b29bd(0x84)+_0x102692+'¬∞C\x20(via\x20'+_0x1acdb2+')'),lastActions['cal_'+_0x217697[_0x1b29bd(0x12e)]]=_0x55cf5a;const _0x40cedf=_0x55d208[_0x1b29bd(0x70)](_0x1eb32a=>_0x1eb32a[_0x1b29bd(0xfe)]===_0x217697[_0x1b29bd(0x12e)]);if(_0x40cedf!==-0x1)_0x55d208['splice'](_0x40cedf,0x1);_0x55d208[_0x1b29bd(0x8b)]({'room':_0x217697[_0x1b29bd(0x12e)],'target':_0x102692,'until':_0x531fbc[_0x1b29bd(0x86)]()}),_0x5ac91b=!![];}}}}}}}_0x5ac91b&&await _0x5b3440[_0x1b29bd(0x7d)](_0x1b29bd(0x132),{'val':JSON[_0x1b29bd(0xe3)](_0x55d208),'ack':!![]});}catch(_0x3008c7){_0x5b3440[_0x1b29bd(0xea)]['warn'](_0x1b29bd(0x9f)+_0x3008c7[_0x1b29bd(0xb5)]);}}async function manageMpcIntervention(_0x235708,_0x5f4965,_0x4689f6){const _0xc5564f=a1_0x27872d;try{const _0x3eab20=_0xc5564f(0x89),_0x3fac40=await _0x235708['getStateAsync'](_0x3eab20);let _0x47d7fd=[];if(_0x3fac40&&_0x3fac40['val'])try{_0x47d7fd=JSON[_0xc5564f(0xf1)](_0x3fac40['val']);}catch(_0x48cc7a){}const _0x1d8a37=_0x47d7fd['indexOf'](_0x5f4965);if(_0x4689f6===_0xc5564f(0x119))_0x1d8a37===-0x1&&(_0x47d7fd['push'](_0x5f4965),await _0x235708[_0xc5564f(0x7d)](_0x3eab20,{'val':JSON[_0xc5564f(0xe3)](_0x47d7fd),'ack':!![]}));else _0x4689f6==='remove'&&(_0x1d8a37!==-0x1&&(_0x47d7fd[_0xc5564f(0xe2)](_0x1d8a37,0x1),await _0x235708[_0xc5564f(0x7d)](_0x3eab20,{'val':JSON[_0xc5564f(0xe3)](_0x47d7fd),'ack':!![]})));}catch(_0x1388ba){}}async function cleanupGhostInterventions(_0x393294){const _0x46682c=a1_0x27872d;try{const _0x178377='analysis.energy.mpcActiveInterventions',_0x157e99=await _0x393294[_0x46682c(0xb6)](_0x178377);if(!_0x157e99||!_0x157e99['val'])return;const _0x25565d=JSON[_0x46682c(0xf1)](_0x157e99['val']);if(!Array[_0x46682c(0x9d)](_0x25565d)||_0x25565d[_0x46682c(0x8d)]===0x0)return;let _0x261204={'default':0x15};try{const _0x50b3d2=await _0x393294[_0x46682c(0xb6)](_0x46682c(0x7c));if(_0x50b3d2&&_0x50b3d2[_0x46682c(0xd6)])_0x261204=JSON[_0x46682c(0xf1)](_0x50b3d2[_0x46682c(0xd6)]);}catch(_0x22f65d){}let _0x56f285=[];try{const _0x418027=await _0x393294[_0x46682c(0xb6)](_0x46682c(0xb0));if(_0x418027&&_0x418027[_0x46682c(0xd6)])_0x56f285=JSON[_0x46682c(0xf1)](_0x418027[_0x46682c(0xd6)]);}catch(_0x4dd0ed){}let _0x3bdabb={},_0x5ac7ba=![];try{const _0x403f84=await _0x393294['getStateAsync'](_0x46682c(0xdf));if(_0x403f84&&_0x403f84[_0x46682c(0xd6)])_0x3bdabb=JSON[_0x46682c(0xf1)](_0x403f84['val']);}catch(_0x1e48c2){}if(_0x3bdabb[_0x46682c(0x129)]){const _0x12b982=Date[_0x46682c(0xc5)]();for(const [_0x2ce133,_0x2123fd]of Object[_0x46682c(0x133)](_0x3bdabb['_meta'])){_0x12b982-_0x2123fd>PENALTY_TTL&&(delete _0x3bdabb[_0x2ce133],delete _0x3bdabb[_0x46682c(0x129)][_0x2ce133],_0x5ac7ba=!![],_0x393294[_0x46682c(0xea)][_0x46682c(0xb8)](_0x46682c(0xc8)+_0x2ce133+_0x46682c(0xc3)));}}const _0x24892d=_0x393294[_0x46682c(0x9c)][_0x46682c(0xb4)]||[];let _0xe73982=![];for(let _0x108641=_0x25565d[_0x46682c(0x8d)]-0x1;_0x108641>=0x0;_0x108641--){const _0x4c4c72=_0x25565d[_0x108641],_0x25d258=_0x24892d[_0x46682c(0xbe)](_0x4c6c96=>normalize(_0x4c6c96[_0x46682c(0x12e)])===normalize(_0x4c4c72)&&(_0x4c6c96[_0x46682c(0x96)]===_0x46682c(0xbf)||_0x4c6c96[_0x46682c(0x96)]===_0x46682c(0x10b)));if(!_0x25d258){_0x393294[_0x46682c(0xea)][_0x46682c(0x120)](_0x46682c(0x100)+_0x4c4c72+_0x46682c(0xfd)),_0x25565d[_0x46682c(0xe2)](_0x108641,0x1),_0xe73982=!![];continue;}if(_0x25d258){const _0x73d02e=await findRelatedId(_0x393294,_0x25d258['id'],_0x46682c(0x131)),_0xb6642f=await _0x393294[_0x46682c(0x107)](_0x25d258['id']);if(_0x73d02e){const _0x3caf73=await _0x393294['getForeignStateAsync'](_0x73d02e);if(_0x3caf73&&typeof _0x3caf73[_0x46682c(0xd6)]===_0x46682c(0xa9)){let _0x101eec=![],_0xde334a='';Math[_0x46682c(0x106)](_0x3caf73[_0x46682c(0xd6)]-ECO_TEMP)>0.5&&(_0x101eec=!![],_0xde334a=_0x46682c(0xed));if(!_0x101eec&&_0xb6642f&&typeof _0xb6642f[_0x46682c(0xd6)]==='number'){const _0x3df63f=_0x261204[_0x4c4c72]||_0x261204[_0x46682c(0x121)]||0x15;_0xb6642f[_0x46682c(0xd6)]<_0x3df63f+0.2&&(_0x101eec=!![],_0xde334a='too_cold');}if(_0x101eec){if(_0xde334a===_0x46682c(0xed)){_0x393294['log'][_0x46682c(0xb8)](_0x46682c(0xab)+_0x4c4c72+'\x20ist\x20auf\x20'+_0x3caf73[_0x46682c(0xd6)]+_0x46682c(0xa5)+ECO_TEMP+'¬∞C).\x20Entferne\x20Status.');const _0x146b3e=lastActions[_0x46682c(0x77)+_0x4c4c72],_0x358ad6=_0x146b3e&&Date[_0x46682c(0xc5)]()-_0x146b3e<0x2*0x3c*0x3e8;if(!_0x358ad6&&_0x3caf73[_0x46682c(0xd6)]>ECO_TEMP+0.5){_0x393294[_0x46682c(0x126)]&&(_0x393294[_0x46682c(0xea)]['info'](_0x46682c(0xe7)+_0x4c4c72+_0x46682c(0x104)),_0x393294['sendToPythonWrapper'](_0x46682c(0x10f),{'room':_0x4c4c72}));const _0x5d0a46=_0x4c4c72+'_'+new Date()[_0x46682c(0x78)]();if(!_0x3bdabb[_0x5d0a46]){_0x3bdabb[_0x5d0a46]=0x1;if(!_0x3bdabb[_0x46682c(0x129)])_0x3bdabb[_0x46682c(0x129)]={};_0x3bdabb[_0x46682c(0x129)][_0x5d0a46]=Date[_0x46682c(0xc5)](),_0x5ac7ba=!![];}}else _0x358ad6&&_0x393294[_0x46682c(0xea)]['info']('üìÖ\x20[MPC\x20INFO]\x20'+_0x4c4c72+_0x46682c(0xaa));}else{if(_0xde334a==='too_cold'){let _0x30d569=![];if(_0x56f285[_0x46682c(0xbe)](_0x2274e4=>_0x2274e4[_0x46682c(0xfe)]===_0x4c4c72))_0x30d569=!![];const _0x2a5d09=_0x24892d[_0x46682c(0xad)](_0x2e0a5d=>normalize(_0x2e0a5d[_0x46682c(0x12e)])===normalize(_0x4c4c72)&&(_0x2e0a5d[_0x46682c(0x96)]===_0x46682c(0xba)||_0x2e0a5d[_0x46682c(0x96)]===_0x46682c(0xe8)||_0x2e0a5d[_0x46682c(0x96)]===_0x46682c(0x11f)));for(const _0x4b3593 of _0x2a5d09){try{const _0x5e65b3=await _0x393294['getForeignStateAsync'](_0x4b3593['id']);if(_0x5e65b3&&(_0x5e65b3['val']===!![]||_0x5e65b3[_0x46682c(0xd6)]===0x1||String(_0x5e65b3[_0x46682c(0xd6)])[_0x46682c(0x93)]()==='open'))_0x30d569=!![];}catch(_0x4c19a1){}}if(_0x30d569)_0x393294['log'][_0x46682c(0xb8)](_0x46682c(0xc7)+_0x4c4c72+_0x46682c(0x88));else{const _0x4213b1=_0x261204[_0x4c4c72]||_0x261204['default']||0x15;_0x393294['log'][_0x46682c(0xb8)](_0x46682c(0xa8)+_0x4c4c72+'\x20erreicht\x20Limit\x20('+_0xb6642f[_0x46682c(0xd6)]+_0x46682c(0xeb)+(_0x4213b1+0.2)+'¬∞C).\x20Sparmodus\x20beendet!'),await _0x393294['setForeignStateAsync'](_0x73d02e,_0x4213b1),await logAutomationAction(_0x393294,'[WATCHDOG]\x20'+_0x4c4c72+_0x46682c(0xc0)+_0x4213b1+'¬∞C'),lastActions['rescue_'+_0x4c4c72]=Date[_0x46682c(0xc5)]();}}}_0x25565d[_0x46682c(0xe2)](_0x108641,0x1),_0xe73982=!![];}}}}}_0xe73982&&await _0x393294[_0x46682c(0x7d)](_0x178377,{'val':JSON['stringify'](_0x25565d),'ack':!![]}),_0x5ac7ba&&await _0x393294[_0x46682c(0x7d)]('analysis.energy.rlPenalties',{'val':JSON[_0x46682c(0xe3)](_0x3bdabb),'ack':!![]});}catch(_0x5b9202){}}async function applyEnergySavings(_0x4f0320,_0x5282c2){const _0x5f2b93=a1_0x27872d;await cleanupGhostInterventions(_0x4f0320);if(!_0x5282c2||_0x5282c2[_0x5f2b93(0x8d)]===0x0)return;const _0x1ed7ac=_0x4f0320[_0x5f2b93(0x9c)]['devices']||[],_0x414e87=Date['now']();for(const _0x4a4493 of _0x5282c2){const _0x27f1d9=_0x4a4493[_0x5f2b93(0xfe)],_0x8c8c05=_0x4a4493[_0x5f2b93(0xac)],_0x3f0d39=_0x4a4493[_0x5f2b93(0xda)]||0x15;if(lastActions[_0x5f2b93(0x11a)+_0x27f1d9]&&_0x414e87-lastActions[_0x5f2b93(0x11a)+_0x27f1d9]<RESCUE_LOCK_MS)continue;const _0x10f756=_0x1ed7ac['find'](_0x25228b=>normalize(_0x25228b[_0x5f2b93(0x12e)])===normalize(_0x27f1d9)&&(_0x25228b[_0x5f2b93(0x96)]==='temperature'||_0x25228b[_0x5f2b93(0x96)]===_0x5f2b93(0x10b)));if(!_0x10f756)continue;const _0x18f57c=await findRelatedId(_0x4f0320,_0x10f756['id'],_0x5f2b93(0x131));if(_0x18f57c){if(lastActions[_0x5f2b93(0x114)+_0x27f1d9]&&_0x414e87-lastActions[_0x5f2b93(0x114)+_0x27f1d9]<0x1e*0x3c*0x3e8)continue;const _0x132e0c=await _0x4f0320['getForeignStateAsync'](_0x18f57c);if(_0x132e0c&&typeof _0x132e0c[_0x5f2b93(0xd6)]===_0x5f2b93(0xa9)){const _0x2f8fca=_0x132e0c[_0x5f2b93(0xd6)];_0x2f8fca!==ECO_TEMP&&await manageMpcIntervention(_0x4f0320,_0x27f1d9,'remove');if(_0x8c8c05>0x1e)_0x2f8fca>ECO_TEMP+0.5&&(_0x4f0320['log'][_0x5f2b93(0xb8)](_0x5f2b93(0x80)+_0x27f1d9+_0x5f2b93(0x75)+ECO_TEMP+_0x5f2b93(0xa0)+_0x8c8c05+_0x5f2b93(0xfb)),await _0x4f0320['setForeignStateAsync'](_0x18f57c,ECO_TEMP),await manageMpcIntervention(_0x4f0320,_0x27f1d9,_0x5f2b93(0x119)),lastActions[_0x5f2b93(0x114)+_0x27f1d9]=_0x414e87,await logAutomationAction(_0x4f0320,_0x5f2b93(0xcb)+_0x27f1d9+_0x5f2b93(0xd1)+ECO_TEMP+'¬∞C'));else _0x8c8c05<=0xf&&(_0x2f8fca<_0x3f0d39&&(_0x4f0320['log'][_0x5f2b93(0xb8)](_0x5f2b93(0xf0)+_0x27f1d9+_0x5f2b93(0x94)+_0x3f0d39+_0x5f2b93(0xb1)),await _0x4f0320[_0x5f2b93(0x8a)](_0x18f57c,_0x3f0d39),await manageMpcIntervention(_0x4f0320,_0x27f1d9,_0x5f2b93(0x7a)),lastActions[_0x5f2b93(0x114)+_0x27f1d9]=_0x414e87,await logAutomationAction(_0x4f0320,'[MPC]\x20'+_0x27f1d9+_0x5f2b93(0xe5)+_0x3f0d39+'¬∞C')));}}else _0x4f0320[_0x5f2b93(0xea)]['warn'](_0x5f2b93(0x81)+_0x27f1d9+'\x20gefunden!');}}module['exports']={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};