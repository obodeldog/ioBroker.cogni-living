const a1_0x3ead09=a1_0x1f15;(function(_0x27a89f,_0x13f2f6){const _0x32040f=a1_0x1f15,_0x3ee21d=_0x27a89f();while(!![]){try{const _0x372fa1=parseInt(_0x32040f(0x24d))/0x1*(parseInt(_0x32040f(0x236))/0x2)+parseInt(_0x32040f(0x212))/0x3*(parseInt(_0x32040f(0x203))/0x4)+-parseInt(_0x32040f(0x1ea))/0x5+parseInt(_0x32040f(0x288))/0x6+parseInt(_0x32040f(0x24c))/0x7+parseInt(_0x32040f(0x220))/0x8+-parseInt(_0x32040f(0x1fe))/0x9*(parseInt(_0x32040f(0x26f))/0xa);if(_0x372fa1===_0x13f2f6)break;else _0x3ee21d['push'](_0x3ee21d['shift']());}catch(_0x2eaa41){_0x3ee21d['push'](_0x3ee21d['shift']());}}}(a1_0x59b0,0x6f04f));const a1_0x68ab5f=(function(){let _0x455811=!![];return function(_0x3280ea,_0x428b51){const _0x2edc1a=_0x455811?function(){if(_0x428b51){const _0x50d156=_0x428b51['apply'](_0x3280ea,arguments);return _0x428b51=null,_0x50d156;}}:function(){};return _0x455811=![],_0x2edc1a;};}()),a1_0x78a095=a1_0x68ab5f(this,function(){const _0x2159fe=a1_0x1f15;return a1_0x78a095[_0x2159fe(0x20b)]()[_0x2159fe(0x242)](_0x2159fe(0x1d2))[_0x2159fe(0x20b)]()[_0x2159fe(0x1f5)](a1_0x78a095)[_0x2159fe(0x242)]('(((.+)+)+)+$');});a1_0x78a095();'use strict';const aiAgent=require(a1_0x3ead09(0x1ce)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function a1_0x59b0(){const _0x2a7239=['\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','event','actual','[WATCHDOG]\x20','eventStart','off','sensor','ACTUAL_TEMPERATURE','state','\x20wurde\x20manuell\x20erhÃ¶ht.','default','rÃ¼ckkehr','1160722cnsbvT','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','stringify','push','config','Â°C\x20(Kalender-Schutz)','.1.SET_POINT_TEMPERATURE','Fehlt','hm-rpc','getForeignObjectAsync','find','name','search','open','ist','Â°C!\x20(Puffer:\x20','level','Classic','now',':\x20Absenkung\x20auf\x20','toLowerCase','ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27','5396895FvANsV','1fFrLWi','ðŸ“…\x20[MPC\x20INFO]\x20','valve_position','temperature','analysis.energy.rlPenalties','\x20wieder\x20auf\x20','urlaub\x20ende','PERFECT','calendarInstance','switch','analysis.automation.actionLog','\x20min)','_meta','consultButler','[CAL]\x20','splice','Â°C\x20(Vorlauf:\x20','ankunft','setForeignStateAsync','analysis.automation.lastAction','target','entries','includes','ðŸ“…\x20SMART\x20SCHEDULE\x20[','trim','getHours','thermostatMapping','localeCompare','date','forEach','write','slice','Â°C.','replace','2134310ZiPrzv','useCalendar','pi_heating_demand','sendToPythonWrapper','sort','number','toUpperCase','location','val','message','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','.data.table','openknx','add','getTime','calendarSelection','analysis.energy.schedulePreview','window','indexOf','mpc_','dimmer','isArray','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','position','getForeignObjectsAsync','5235150mCjUld','Â°C!\x20(Puffer\x20leer).','temp','Unknown','room','minutes_safe','level.temperature','./ai_agent','_date','info','thermostat','(((.+)+)+)+$','log','SET_POINT_TEMPERATURE','manual','too_cold','system.mode','unit','triggerTime','exports','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','\x20->\x20','remove','.4.VALVE_STATE','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','current_heating_setpoint',')\x20aktiv.\x20Heize\x20auf\x20','analysis.energy.mpcActiveInterventions','approved','analysis.energy.warmupTimes','analysis.energy.activeEnforcements','Â°C\x20<\x20','Â°C\x20(nicht\x20','summary','valve','892375OwzLlg','map','Auto-Erkennung','occupied_heating_setpoint','type','Manuelles\x20Mapping','local_temperature','_calName','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','until','split','constructor','parse','\x20auf\x20','active','setpoint','devices','rescue_','\x20ist\x20auf\x20','score','99ujFhIS','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','getForeignStateAsync','\x20erreicht\x20Limit\x20(','common','135756aqjcGT','valveMapping','.1.LEVEL','thermostat.setpoint','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','\x20->\x20Schalte\x20','values','\x27\x20(Match:\x20','toString','\x20gefunden!','.1.TEMPERATURE','Â°C).\x20Sparmodus\x20beendet!','[MPC]\x20','cal_','analysis.automation.confidenceThreshold','30dmdbUM','filter','analysis.automation.mode','.1.ACTUAL_TEMPERATURE','PrÃ¤diktion:\x20','\x20min).','length','string','from','role','warn','SET','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','soll','3341520XitLij','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','messwert','setStateAsync','getStateAsync','currentSystemMode','target_temperature','contact','set','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27'];a1_0x59b0=function(){return _0x2a7239;};return a1_0x59b0();}function normalize(_0x1abb16){const _0x167e7b=a1_0x3ead09;if(!_0x1abb16)return'';return _0x1abb16[_0x167e7b(0x24a)]()[_0x167e7b(0x26e)](/\s+/g,'')[_0x167e7b(0x265)]();}function getWarmupRobust(_0x6010c,_0x49c4a7){const _0x49ba57=a1_0x3ead09;if(!_0x6010c||!_0x49c4a7)return 0x3c;if(_0x6010c[_0x49c4a7]!==undefined)return _0x6010c[_0x49c4a7];const _0x56ba2b=_0x49c4a7[_0x49ba57(0x24a)]()['replace'](/Ã¤/g,'ae')[_0x49ba57(0x26e)](/Ã¶/g,'oe')[_0x49ba57(0x26e)](/Ã¼/g,'ue')[_0x49ba57(0x26e)](/ÃŸ/g,'ss')['replace'](/\s+/g,'_')[_0x49ba57(0x26e)](/[^a-z0-9_]/g,'');if(_0x6010c[_0x56ba2b]!==undefined)return _0x6010c[_0x56ba2b];return 0x3c;}async function logAutomationAction(_0x15ad29,_0x355a9c){const _0x10154b=a1_0x3ead09;await _0x15ad29[_0x10154b(0x223)](_0x10154b(0x260),{'val':_0x355a9c,'ack':!![]});try{const _0x2427f7=_0x10154b(0x257),_0x5112f7=await _0x15ad29[_0x10154b(0x224)](_0x2427f7);let _0x4195ed=[];if(_0x5112f7&&_0x5112f7['val'])try{_0x4195ed=JSON['parse'](_0x5112f7[_0x10154b(0x277)]);}catch(_0x2b1649){}_0x4195ed['unshift']({'ts':Date[_0x10154b(0x248)](),'msg':_0x355a9c});if(_0x4195ed[_0x10154b(0x218)]>0x32)_0x4195ed=_0x4195ed[_0x10154b(0x26c)](0x0,0x32);await _0x15ad29[_0x10154b(0x223)](_0x2427f7,{'val':JSON[_0x10154b(0x238)](_0x4195ed),'ack':!![]});}catch(_0x43a7c1){}}async function handlePrediction(_0x404a9f,_0x48c392,_0x42f82f){const _0x2b7fcd=a1_0x3ead09;if(!_0x48c392||_0x48c392===_0x2b7fcd(0x28b))return;let _0x5ba36f=_0x2b7fcd(0x22f),_0x451182=0.6;try{const _0x55daea=await _0x404a9f['getStateAsync'](_0x2b7fcd(0x214));if(_0x55daea&&_0x55daea[_0x2b7fcd(0x277)])_0x5ba36f=_0x55daea['val'];const _0x4fb7d6=await _0x404a9f[_0x2b7fcd(0x224)](_0x2b7fcd(0x211));if(_0x4fb7d6&&_0x4fb7d6['val'])_0x451182=_0x4fb7d6[_0x2b7fcd(0x277)];}catch(_0x3db59e){}if(_0x5ba36f===_0x2b7fcd(0x22f)||_0x42f82f<_0x451182)return;const _0x15d3da=Date[_0x2b7fcd(0x248)]();if(lastActions[_0x48c392]&&_0x15d3da-lastActions[_0x48c392]<COOLDOWN_MS)return;const _0x1f1859=_0x404a9f[_0x2b7fcd(0x23a)][_0x2b7fcd(0x1fa)]||[],_0x384af7=normalize(_0x48c392),_0x42bb13=_0x1f1859[_0x2b7fcd(0x240)](_0x508e2a=>normalize(_0x508e2a[_0x2b7fcd(0x276)])===_0x384af7&&(_0x508e2a[_0x2b7fcd(0x1ee)]==='light'||_0x508e2a[_0x2b7fcd(0x1ee)]===_0x2b7fcd(0x283)||_0x508e2a['type']===_0x2b7fcd(0x256)));if(!_0x42bb13)return;const _0x1263cf=await aiAgent[_0x2b7fcd(0x25a)](_0x404a9f,_0x48c392,_0x42bb13[_0x2b7fcd(0x241)],_0x42f82f);if(!_0x1263cf[_0x2b7fcd(0x1e3)])return;const _0x2ff2bb=_0x2b7fcd(0x216)+_0x48c392+_0x2b7fcd(0x208)+_0x42bb13[_0x2b7fcd(0x241)]+'\x20('+_0x1263cf['reason']+')';await logAutomationAction(_0x404a9f,'['+_0x5ba36f[_0x2b7fcd(0x275)]()+']\x20'+_0x2ff2bb);if(_0x5ba36f===_0x2b7fcd(0x1f8)){const _0x3bc8e3=await _0x404a9f[_0x2b7fcd(0x200)](_0x42bb13['id']);(!_0x3bc8e3||!_0x3bc8e3[_0x2b7fcd(0x277)]&&_0x3bc8e3['val']!==!![])&&await _0x404a9f['setForeignStateAsync'](_0x42bb13['id'],!![]),lastActions[_0x48c392]=_0x15d3da;}}async function findRelatedId(_0x2800c9,_0x2c1e85,_0x1a7d74=a1_0x3ead09(0x1f9)){const _0x3a06c6=a1_0x3ead09;if(_0x1a7d74===_0x3a06c6(0x1f9)&&_0x2800c9[_0x3a06c6(0x23a)][_0x3a06c6(0x267)]){let _0x35cfd2=_0x2800c9[_0x3a06c6(0x23a)][_0x3a06c6(0x267)];if(typeof _0x35cfd2===_0x3a06c6(0x219))try{_0x35cfd2=JSON[_0x3a06c6(0x1f6)](_0x35cfd2);}catch(_0x542d68){}if(_0x35cfd2&&_0x35cfd2[_0x2c1e85])return _0x35cfd2[_0x2c1e85];}if(_0x1a7d74===_0x3a06c6(0x1e9)&&_0x2800c9[_0x3a06c6(0x23a)][_0x3a06c6(0x204)]){let _0x2e2489=_0x2800c9[_0x3a06c6(0x23a)][_0x3a06c6(0x204)];if(typeof _0x2e2489===_0x3a06c6(0x219))try{_0x2e2489=JSON[_0x3a06c6(0x1f6)](_0x2e2489);}catch(_0x2a2964){}if(_0x2e2489&&_0x2e2489[_0x2c1e85])return _0x2e2489[_0x2c1e85];}let _0x2bc782=[];if(_0x1a7d74===_0x3a06c6(0x1f9))_0x2bc782=[{'s':_0x3a06c6(0x215),'t':_0x3a06c6(0x23c)},{'s':_0x3a06c6(0x20d),'t':_0x3a06c6(0x23c)},{'s':'.1.TEMPERATURE','t':'.4.SET_TEMPERATURE'},{'s':_0x3a06c6(0x231),'t':_0x3a06c6(0x1d4)},{'s':_0x3a06c6(0x1f0),'t':_0x3a06c6(0x1ed)},{'s':_0x3a06c6(0x1f0),'t':_0x3a06c6(0x1e0)},{'s':_0x3a06c6(0x250),'t':_0x3a06c6(0x226)},{'s':'ACTUAL','t':_0x3a06c6(0x21d)},{'s':'Ist','t':'Soll'},{'s':_0x3a06c6(0x250),'t':_0x3a06c6(0x1f9)}];else _0x1a7d74===_0x3a06c6(0x1e9)&&(_0x2bc782=[{'s':_0x3a06c6(0x215),'t':_0x3a06c6(0x205)},{'s':_0x3a06c6(0x20d),'t':_0x3a06c6(0x205)},{'s':_0x3a06c6(0x20d),'t':_0x3a06c6(0x1de)},{'s':_0x3a06c6(0x1f0),'t':_0x3a06c6(0x271)},{'s':_0x3a06c6(0x250),'t':_0x3a06c6(0x24f)},{'s':'temperature','t':_0x3a06c6(0x246)}]);for(const _0xc56db0 of _0x2bc782){if(_0x2c1e85[_0x3a06c6(0x263)](_0xc56db0['s'])){const _0x26fc73=_0x2c1e85[_0x3a06c6(0x26e)](_0xc56db0['s'],_0xc56db0['t']),_0xd1297f=await _0x2800c9[_0x3a06c6(0x23f)](_0x26fc73);if(_0xd1297f)return _0x26fc73;}}try{const _0x2e92ab=_0x2c1e85[_0x3a06c6(0x1f4)]('.');if(_0x2e92ab[_0x3a06c6(0x218)]>0x2){const _0x15c15b=_0x2e92ab[_0x3a06c6(0x26c)](0x0,-0x1)['join']('.'),_0x219243=await _0x2800c9[_0x3a06c6(0x287)](_0x15c15b+'.*'),_0x54f5d9=[],_0x3d63c2=_0x2c1e85[_0x3a06c6(0x1f4)](/[._]+/)[_0x3a06c6(0x213)](_0x10cfcf=>![_0x3a06c6(0x27b),'0',_0x3a06c6(0x23e),_0x3a06c6(0x244),'wert',_0x3a06c6(0x250),_0x3a06c6(0x22c),_0x3a06c6(0x230),_0x3a06c6(0x222),_0x3a06c6(0x232)][_0x3a06c6(0x263)](_0x10cfcf['toLowerCase']()));for(const [_0x581143,_0x1ef23f]of Object[_0x3a06c6(0x262)](_0x219243)){if(_0x581143===_0x2c1e85)continue;if(_0x1ef23f&&_0x1ef23f[_0x3a06c6(0x202)]){const _0x4bfea9=_0x581143['toLowerCase'](),_0x11fb6c=(_0x1ef23f[_0x3a06c6(0x202)][_0x3a06c6(0x21b)]||'')['toLowerCase'](),_0x1266c3=(_0x1ef23f[_0x3a06c6(0x202)][_0x3a06c6(0x1d8)]||'')[_0x3a06c6(0x24a)]();let _0x109f07=![];if(_0x1a7d74===_0x3a06c6(0x1f9)&&_0x1ef23f[_0x3a06c6(0x202)][_0x3a06c6(0x26b)]===!![])_0x109f07=_0x4bfea9[_0x3a06c6(0x263)](_0x3a06c6(0x228))||_0x4bfea9[_0x3a06c6(0x263)](_0x3a06c6(0x21f))||_0x4bfea9[_0x3a06c6(0x263)](_0x3a06c6(0x261))||_0x11fb6c[_0x3a06c6(0x263)](_0x3a06c6(0x28e))||_0x11fb6c[_0x3a06c6(0x263)](_0x3a06c6(0x206));else _0x1a7d74==='valve'&&(_0x109f07=_0x4bfea9[_0x3a06c6(0x263)](_0x3a06c6(0x246))||_0x4bfea9[_0x3a06c6(0x263)](_0x3a06c6(0x1e9))||_0x4bfea9[_0x3a06c6(0x263)]('stellwert')||_0x4bfea9[_0x3a06c6(0x263)](_0x3a06c6(0x286))||_0x11fb6c[_0x3a06c6(0x263)]('level.valve')||_0x11fb6c[_0x3a06c6(0x263)]('value.valve')||_0x1266c3[_0x3a06c6(0x263)]('%'));if(_0x109f07){const _0x20635b=_0x581143[_0x3a06c6(0x1f4)](/[._]+/)[_0x3a06c6(0x1eb)](_0x49a2ce=>_0x49a2ce[_0x3a06c6(0x24a)]());let _0x303992=0x0;_0x3d63c2['forEach'](_0x57bb8c=>{const _0x16425e=_0x3a06c6;if(_0x20635b[_0x16425e(0x263)](_0x57bb8c['toLowerCase']()))_0x303992++;}),_0x54f5d9[_0x3a06c6(0x239)]({'id':_0x581143,'score':_0x303992});}}}if(_0x54f5d9[_0x3a06c6(0x218)]>0x0){_0x54f5d9[_0x3a06c6(0x273)]((_0x39f33a,_0x58a753)=>_0x58a753['score']-_0x39f33a[_0x3a06c6(0x1fd)]);if(_0x54f5d9[0x0][_0x3a06c6(0x1fd)]>0x0)return _0x54f5d9[0x0]['id'];}}}catch(_0x3b98ac){}return null;}async function scanThermostats(_0x48aca4){const _0x41d793=a1_0x3ead09,_0x592aa0=_0x48aca4[_0x41d793(0x23a)]['devices']||[],_0x246afc=[],_0x1f7189=_0x592aa0['filter'](_0x6ca5b2=>_0x6ca5b2['id']&&_0x6ca5b2['id']['includes'](_0x41d793(0x250))||_0x6ca5b2[_0x41d793(0x1ee)]&&[_0x41d793(0x250),_0x41d793(0x1d1),_0x41d793(0x230)]['includes'](_0x6ca5b2['type'])||_0x6ca5b2[_0x41d793(0x241)]&&_0x6ca5b2[_0x41d793(0x241)]['toLowerCase']()[_0x41d793(0x263)](_0x41d793(0x28a)));for(const _0xc144e5 of _0x1f7189){const _0x5ac9c6=await findRelatedId(_0x48aca4,_0xc144e5['id'],'setpoint'),_0x20acce=await findRelatedId(_0x48aca4,_0xc144e5['id'],_0x41d793(0x1e9));let _0x125d16='Nicht\x20gefunden',_0x20a0fc=![],_0x24df57=_0x48aca4[_0x41d793(0x23a)]['thermostatMapping']||{};if(typeof _0x24df57===_0x41d793(0x219))try{_0x24df57=JSON['parse'](_0x24df57);}catch(_0x1829c1){}let _0x1b7418=_0x48aca4[_0x41d793(0x23a)][_0x41d793(0x204)]||{};if(typeof _0x1b7418===_0x41d793(0x219))try{_0x1b7418=JSON[_0x41d793(0x1f6)](_0x1b7418);}catch(_0x18b167){}if(_0x24df57[_0xc144e5['id']]&&_0x24df57[_0xc144e5['id']]===_0x5ac9c6||_0x1b7418[_0xc144e5['id']]&&_0x1b7418[_0xc144e5['id']]===_0x20acce)_0x125d16=_0x41d793(0x1ef),_0x20a0fc=!![];else(_0x5ac9c6||_0x20acce)&&(_0x125d16=_0x41d793(0x1ec));_0x246afc[_0x41d793(0x239)]({'room':_0xc144e5['location']||'Unbekannt','sensorId':_0xc144e5['id'],'setpointId':_0x5ac9c6||'-','valveId':_0x20acce||'-','source':_0x125d16,'isManual':_0x20a0fc,'status':_0x5ac9c6&&_0x20acce?_0x41d793(0x254):_0x5ac9c6?'OK':_0x41d793(0x23d)});}return _0x246afc[_0x41d793(0x273)]((_0x342eda,_0x2dca5f)=>_0x342eda[_0x41d793(0x28c)][_0x41d793(0x268)](_0x2dca5f['room']));}function a1_0x1f15(_0xeb748f,_0xc3fb89){const _0x2b0492=a1_0x59b0();return a1_0x1f15=function(_0x78a095,_0x68ab5f){_0x78a095=_0x78a095-0x1ce;let _0x59b08a=_0x2b0492[_0x78a095];return _0x59b08a;},a1_0x1f15(_0xeb748f,_0xc3fb89);}async function updateSchedulePreview(_0x2d4f9a){const _0x130dc6=a1_0x3ead09;if(!_0x2d4f9a[_0x130dc6(0x23a)]['useCalendar']||!_0x2d4f9a['config'][_0x130dc6(0x255)])return;let _0x146339={};try{const _0x240f9e=await _0x2d4f9a[_0x130dc6(0x224)](_0x130dc6(0x1e4));if(_0x240f9e&&_0x240f9e[_0x130dc6(0x277)])_0x146339=JSON[_0x130dc6(0x1f6)](_0x240f9e[_0x130dc6(0x277)]);}catch(_0x33550e){}const _0x24acae=[],_0x289255=Date['now'](),_0x353668=0x30*0x3c*0x3c*0x3e8;try{const _0x2742e9=await _0x2d4f9a['getForeignStateAsync'](_0x2d4f9a['config'][_0x130dc6(0x255)]+_0x130dc6(0x27a));if(!_0x2742e9||!_0x2742e9[_0x130dc6(0x277)])return;const _0x13aa8c=JSON[_0x130dc6(0x1f6)](_0x2742e9[_0x130dc6(0x277)]),_0x6002dd=_0x2d4f9a[_0x130dc6(0x23a)][_0x130dc6(0x27e)]||[],_0x349059=_0x2d4f9a[_0x130dc6(0x23a)]['devices']||[],_0x20cd99=new Set();_0x349059[_0x130dc6(0x26a)](_0x1a769d=>{const _0xb771b1=_0x130dc6;if(_0x1a769d[_0xb771b1(0x276)])_0x20cd99[_0xb771b1(0x27c)](_0x1a769d['location']);});for(const _0x1ca7f4 of _0x13aa8c){if(_0x1ca7f4['_calName']&&_0x6002dd['length']>0x0&&!_0x6002dd['includes'](_0x1ca7f4[_0x130dc6(0x1f1)]))continue;const _0x5856e0=_0x1ca7f4[_0x130dc6(0x1cf)]||_0x1ca7f4[_0x130dc6(0x22e)]||_0x1ca7f4[_0x130dc6(0x269)];if(!_0x5856e0)continue;const _0x7c2fb8=new Date(_0x5856e0),_0x5707cd=_0x7c2fb8['getTime']();if(isNaN(_0x5707cd))continue;if(_0x5707cd<_0x289255)continue;if(_0x5707cd>_0x289255+_0x353668)continue;const _0x3560dc=(_0x1ca7f4[_0x130dc6(0x22b)]||_0x1ca7f4['summary']||'')[_0x130dc6(0x24a)]();let _0x2ac351=![],_0x381af5=[],_0xaf29c=_0x1ca7f4[_0x130dc6(0x22b)]||_0x1ca7f4[_0x130dc6(0x1e8)]||'Unbekannt';if(_0x3560dc[_0x130dc6(0x263)](_0x130dc6(0x253))||_0x3560dc[_0x130dc6(0x263)](_0x130dc6(0x235))||_0x3560dc[_0x130dc6(0x263)](_0x130dc6(0x25e)))_0x2ac351=!![],_0x381af5=Array[_0x130dc6(0x21a)](_0x20cd99);else for(const _0x1597ea of _0x20cd99){if(_0x3560dc[_0x130dc6(0x263)](_0x1597ea[_0x130dc6(0x24a)]()))_0x381af5['push'](_0x1597ea);}_0x381af5[_0x130dc6(0x218)]>0x0&&_0x381af5['forEach'](_0x1d3476=>{const _0x2bc5fe=_0x130dc6;let _0x29ce9f=0x3c;if(_0x2ac351){let _0x52f508=0x0;Object[_0x2bc5fe(0x209)](_0x146339)[_0x2bc5fe(0x26a)](_0x5d1447=>{if(_0x5d1447>_0x52f508)_0x52f508=_0x5d1447;}),_0x29ce9f=_0x52f508>0x0?_0x52f508:0x78;}else _0x29ce9f=getWarmupRobust(_0x146339,_0x1d3476);const _0x4fec37=new Date(_0x5707cd-_0x29ce9f*0xea60);_0x24acae[_0x2bc5fe(0x239)]({'eventTime':_0x5707cd,'triggerTime':_0x4fec37[_0x2bc5fe(0x27d)](),'room':_0x1d3476,'minutes':_0x29ce9f,'reason':_0xaf29c,'isGlobal':_0x2ac351});});}}catch(_0x1e4828){}_0x24acae[_0x130dc6(0x273)]((_0x3bb9b7,_0x2569a8)=>_0x3bb9b7[_0x130dc6(0x1d9)]-_0x2569a8['triggerTime']);const _0x1f4128=_0x24acae[_0x130dc6(0x26c)](0x0,0x5);await _0x2d4f9a[_0x130dc6(0x223)](_0x130dc6(0x27f),{'val':JSON['stringify'](_0x1f4128),'ack':!![]});}async function monitorEnforcements(_0x43324c){const _0x601f2b=a1_0x3ead09;try{const _0x37c3e2=_0x601f2b(0x1e5),_0x505e5c=await _0x43324c[_0x601f2b(0x224)](_0x37c3e2);if(!_0x505e5c||!_0x505e5c[_0x601f2b(0x277)])return;let _0x5251ed=[];try{_0x5251ed=JSON[_0x601f2b(0x1f6)](_0x505e5c[_0x601f2b(0x277)]);}catch(_0x4bfbc5){return;}if(!Array[_0x601f2b(0x284)](_0x5251ed)||_0x5251ed[_0x601f2b(0x218)]===0x0)return;const _0x3c612e=Date[_0x601f2b(0x248)](),_0x56d91a=_0x43324c[_0x601f2b(0x23a)]['devices']||[];let _0x38fef6=![];for(let _0x1c2b4a=_0x5251ed[_0x601f2b(0x218)]-0x1;_0x1c2b4a>=0x0;_0x1c2b4a--){const _0x430ca3=_0x5251ed[_0x1c2b4a];if(_0x3c612e>=_0x430ca3[_0x601f2b(0x1f3)]){_0x43324c['log']['info'](_0x601f2b(0x1f2)+_0x430ca3[_0x601f2b(0x28c)]+_0x601f2b(0x22a)),_0x5251ed[_0x601f2b(0x25c)](_0x1c2b4a,0x1),_0x38fef6=!![];continue;}const _0x6aa7ea=_0x56d91a['find'](_0x54192d=>normalize(_0x54192d['location'])===normalize(_0x430ca3[_0x601f2b(0x28c)])&&(_0x54192d[_0x601f2b(0x1ee)]==='temperature'||_0x54192d['type']===_0x601f2b(0x1d1)));if(_0x6aa7ea){const _0x28f186=await findRelatedId(_0x43324c,_0x6aa7ea['id'],_0x601f2b(0x1f9));if(_0x28f186){const _0x4db587=await _0x43324c[_0x601f2b(0x200)](_0x28f186);_0x4db587&&typeof _0x4db587['val']===_0x601f2b(0x274)&&(_0x4db587[_0x601f2b(0x277)]<0xf&&(_0x43324c[_0x601f2b(0x1d3)][_0x601f2b(0x21c)]('ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x430ca3[_0x601f2b(0x28c)]+_0x601f2b(0x1f7)+_0x4db587['val']+_0x601f2b(0x207)+_0x430ca3[_0x601f2b(0x261)]+_0x601f2b(0x26d)),await _0x43324c[_0x601f2b(0x25f)](_0x28f186,_0x430ca3[_0x601f2b(0x261)]),await logAutomationAction(_0x43324c,'[FORCE]\x20'+_0x430ca3[_0x601f2b(0x28c)]+':\x20'+_0x4db587[_0x601f2b(0x277)]+'Â°C\x20->\x20'+_0x430ca3[_0x601f2b(0x261)]+_0x601f2b(0x23b))));}}}_0x38fef6&&await _0x43324c[_0x601f2b(0x223)](_0x37c3e2,{'val':JSON[_0x601f2b(0x238)](_0x5251ed),'ack':!![]});}catch(_0x173ddd){_0x43324c[_0x601f2b(0x1d3)]['error']('Enforcement\x20Monitor\x20Error:\x20'+_0x173ddd[_0x601f2b(0x278)]);}}async function checkCalendarTriggers(_0x19c228){const _0x36fe01=a1_0x3ead09;if(!_0x19c228[_0x36fe01(0x23a)][_0x36fe01(0x270)]||!_0x19c228[_0x36fe01(0x23a)][_0x36fe01(0x255)])return;await updateSchedulePreview(_0x19c228);let _0x3029cb={},_0x3ca689={};try{const _0x4801b5=await _0x19c228['getStateAsync'](_0x36fe01(0x1e4));if(_0x4801b5&&_0x4801b5[_0x36fe01(0x277)])_0x3029cb=JSON[_0x36fe01(0x1f6)](_0x4801b5['val']);const _0x5f18ab=await _0x19c228[_0x36fe01(0x224)]('analysis.energy.warmupSources');if(_0x5f18ab&&_0x5f18ab[_0x36fe01(0x277)])_0x3ca689=JSON['parse'](_0x5f18ab[_0x36fe01(0x277)]);}catch(_0x38c6d1){}let _0x375f10={'default':0x15};try{const _0x3cad1f=await _0x19c228[_0x36fe01(0x224)]('analysis.energy.warmupTargets');if(_0x3cad1f&&_0x3cad1f['val'])_0x375f10=JSON[_0x36fe01(0x1f6)](_0x3cad1f['val']);}catch(_0x100926){}let _0x4e9fed=[];try{const _0x3a8578=await _0x19c228[_0x36fe01(0x224)]('analysis.energy.activeEnforcements');if(_0x3a8578&&_0x3a8578[_0x36fe01(0x277)])_0x4e9fed=JSON[_0x36fe01(0x1f6)](_0x3a8578['val']);}catch(_0x3d70b8){}try{const _0x45c9a=await _0x19c228[_0x36fe01(0x200)](_0x19c228[_0x36fe01(0x23a)][_0x36fe01(0x255)]+_0x36fe01(0x27a));if(!_0x45c9a||!_0x45c9a[_0x36fe01(0x277)])return;const _0x8f9229=JSON['parse'](_0x45c9a[_0x36fe01(0x277)]),_0x31d9bf=Date[_0x36fe01(0x248)](),_0x13c142=_0x19c228[_0x36fe01(0x23a)]['devices']||[],_0x284034=_0x19c228[_0x36fe01(0x23a)][_0x36fe01(0x27e)]||[];let _0x3c0ef7=![];for(const _0x45b1d3 of _0x8f9229){if(_0x45b1d3[_0x36fe01(0x1f1)]&&_0x284034[_0x36fe01(0x218)]>0x0&&!_0x284034[_0x36fe01(0x263)](_0x45b1d3['_calName']))continue;const _0x321a93=_0x45b1d3[_0x36fe01(0x1cf)]||_0x45b1d3[_0x36fe01(0x22e)]||_0x45b1d3['date'];if(!_0x321a93)continue;const _0xee9720=new Date(_0x321a93);if(isNaN(_0xee9720['getTime']()))continue;const _0x118fa3=(_0x45b1d3[_0x36fe01(0x22b)]||_0x45b1d3['summary']||'')[_0x36fe01(0x24a)]();if(_0x118fa3[_0x36fe01(0x263)]('urlaub\x20ende')||_0x118fa3[_0x36fe01(0x263)](_0x36fe01(0x235))||_0x118fa3['includes'](_0x36fe01(0x25e))){let _0x21c42f=0x0;Object[_0x36fe01(0x209)](_0x3029cb)['forEach'](_0x5ad677=>{if(_0x5ad677>_0x21c42f)_0x21c42f=_0x5ad677;});if(_0x21c42f===0x0)_0x21c42f=0x78;const _0x36f260=_0xee9720[_0x36fe01(0x27d)]()-_0x21c42f*0xea60;_0x31d9bf>=_0x36f260&&_0x31d9bf<_0xee9720[_0x36fe01(0x27d)]()&&(_0x19c228[_0x36fe01(0x225)]!=='normal'&&(_0x19c228[_0x36fe01(0x1d3)][_0x36fe01(0x1d0)](_0x36fe01(0x1db)+_0x21c42f+_0x36fe01(0x217)),await _0x19c228[_0x36fe01(0x223)](_0x36fe01(0x1d7),{'val':'normal','ack':![]})));}for(const _0x473f54 of _0x13c142){if(_0x473f54[_0x36fe01(0x276)]){const _0x188283=_0x473f54[_0x36fe01(0x276)][_0x36fe01(0x24a)](),_0x2d025e=(_0x473f54['name']||'')[_0x36fe01(0x24a)]();let _0x453c71=_0x118fa3[_0x36fe01(0x263)](_0x188283);!_0x453c71&&_0x2d025e[_0x36fe01(0x218)]>0x3&&_0x118fa3[_0x36fe01(0x263)](_0x2d025e)&&(_0x453c71=!![]);if(_0x453c71){const _0x4ad2f6=getWarmupRobust(_0x3029cb,_0x473f54[_0x36fe01(0x276)]),_0x2346a3=_0x3ca689[_0x473f54[_0x36fe01(0x276)]]||_0x36fe01(0x247),_0x5b4070=_0xee9720[_0x36fe01(0x27d)]()-_0x4ad2f6*0xea60;if(_0x31d9bf>=_0x5b4070&&_0x31d9bf<_0xee9720['getTime']()){const _0x3dbf63=lastActions[_0x36fe01(0x210)+_0x473f54[_0x36fe01(0x276)]];if(_0x3dbf63&&_0x31d9bf-_0x3dbf63<CAL_COOLDOWN_MS)continue;const _0x2de024=await findRelatedId(_0x19c228,_0x473f54['id'],_0x36fe01(0x1f9));if(_0x2de024){let _0x51442a=_0x375f10[_0x473f54[_0x36fe01(0x276)]];if(_0x51442a===undefined)_0x51442a=_0x375f10['default'];if(_0x51442a===undefined)_0x51442a=0x15;const _0x21f370=await _0x19c228['getForeignStateAsync'](_0x2de024);if(_0x21f370&&typeof _0x21f370[_0x36fe01(0x277)]===_0x36fe01(0x274)&&_0x21f370[_0x36fe01(0x277)]<_0x51442a-0.5){_0x19c228[_0x36fe01(0x1d3)]['info'](_0x36fe01(0x264)+_0x2346a3+']:\x20Raum-Trigger\x20\x27'+_0x473f54[_0x36fe01(0x276)]+_0x36fe01(0x20a)+_0x118fa3+_0x36fe01(0x1e1)+_0x51442a+_0x36fe01(0x25d)+_0x4ad2f6+_0x36fe01(0x217)),await _0x19c228[_0x36fe01(0x25f)](_0x2de024,_0x51442a),await logAutomationAction(_0x19c228,_0x36fe01(0x25b)+_0x473f54[_0x36fe01(0x276)]+_0x36fe01(0x1dc)+_0x51442a+'Â°C\x20(via\x20'+_0x2346a3+')'),lastActions[_0x36fe01(0x210)+_0x473f54[_0x36fe01(0x276)]]=_0x31d9bf;const _0x137edd=_0x4e9fed['findIndex'](_0x4ea8d7=>_0x4ea8d7[_0x36fe01(0x28c)]===_0x473f54['location']);if(_0x137edd!==-0x1)_0x4e9fed[_0x36fe01(0x25c)](_0x137edd,0x1);_0x4e9fed[_0x36fe01(0x239)]({'room':_0x473f54['location'],'target':_0x51442a,'until':_0xee9720[_0x36fe01(0x27d)]()}),_0x3c0ef7=!![];}}}}}}}_0x3c0ef7&&await _0x19c228[_0x36fe01(0x223)]('analysis.energy.activeEnforcements',{'val':JSON[_0x36fe01(0x238)](_0x4e9fed),'ack':!![]});}catch(_0x5f220e){_0x19c228['log']['warn']('Calendar\x20Check\x20Error:\x20'+_0x5f220e[_0x36fe01(0x278)]);}}async function manageMpcIntervention(_0x241647,_0x599877,_0x3b4996){const _0x19a7e2=a1_0x3ead09;try{const _0x330584=_0x19a7e2(0x1e2),_0x1e522b=await _0x241647[_0x19a7e2(0x224)](_0x330584);let _0x1bdf38=[];if(_0x1e522b&&_0x1e522b[_0x19a7e2(0x277)])try{_0x1bdf38=JSON['parse'](_0x1e522b['val']);}catch(_0x569509){}const _0x16758a=_0x1bdf38[_0x19a7e2(0x281)](_0x599877);if(_0x3b4996===_0x19a7e2(0x27c))_0x16758a===-0x1&&(_0x1bdf38[_0x19a7e2(0x239)](_0x599877),await _0x241647[_0x19a7e2(0x223)](_0x330584,{'val':JSON['stringify'](_0x1bdf38),'ack':!![]}));else _0x3b4996===_0x19a7e2(0x1dd)&&(_0x16758a!==-0x1&&(_0x1bdf38[_0x19a7e2(0x25c)](_0x16758a,0x1),await _0x241647[_0x19a7e2(0x223)](_0x330584,{'val':JSON[_0x19a7e2(0x238)](_0x1bdf38),'ack':!![]})));}catch(_0x6c9c95){}}async function cleanupGhostInterventions(_0x278639){const _0x6b47a6=a1_0x3ead09;try{const _0x28012e=_0x6b47a6(0x1e2),_0x14261f=await _0x278639['getStateAsync'](_0x28012e);if(!_0x14261f||!_0x14261f[_0x6b47a6(0x277)])return;const _0x1b525c=JSON['parse'](_0x14261f['val']);if(!Array[_0x6b47a6(0x284)](_0x1b525c)||_0x1b525c[_0x6b47a6(0x218)]===0x0)return;let _0x3703cc={'default':0x15};try{const _0x2a2147=await _0x278639[_0x6b47a6(0x224)]('analysis.energy.warmupTargets');if(_0x2a2147&&_0x2a2147[_0x6b47a6(0x277)])_0x3703cc=JSON[_0x6b47a6(0x1f6)](_0x2a2147[_0x6b47a6(0x277)]);}catch(_0x5cc762){}let _0x403421=[];try{const _0x5bf890=await _0x278639[_0x6b47a6(0x224)]('analysis.energy.ventilationAlerts');if(_0x5bf890&&_0x5bf890[_0x6b47a6(0x277)])_0x403421=JSON[_0x6b47a6(0x1f6)](_0x5bf890[_0x6b47a6(0x277)]);}catch(_0x32c214){}let _0x497b59={},_0x11e42d=![];try{const _0x1b5012=await _0x278639['getStateAsync'](_0x6b47a6(0x251));if(_0x1b5012&&_0x1b5012[_0x6b47a6(0x277)])_0x497b59=JSON[_0x6b47a6(0x1f6)](_0x1b5012[_0x6b47a6(0x277)]);}catch(_0x12d72d){}if(_0x497b59['_meta']){const _0x51341a=Date[_0x6b47a6(0x248)]();for(const [_0x3da44d,_0x59fe13]of Object['entries'](_0x497b59[_0x6b47a6(0x259)])){_0x51341a-_0x59fe13>PENALTY_TTL&&(delete _0x497b59[_0x3da44d],delete _0x497b59[_0x6b47a6(0x259)][_0x3da44d],_0x11e42d=!![],_0x278639['log'][_0x6b47a6(0x1d0)](_0x6b47a6(0x24b)+_0x3da44d+_0x6b47a6(0x1ff)));}}const _0x8e5d62=_0x278639[_0x6b47a6(0x23a)][_0x6b47a6(0x1fa)]||[];let _0x8d607a=![];for(let _0x498831=_0x1b525c[_0x6b47a6(0x218)]-0x1;_0x498831>=0x0;_0x498831--){const _0x9b130e=_0x1b525c[_0x498831],_0x440d96=_0x8e5d62[_0x6b47a6(0x240)](_0x442d26=>normalize(_0x442d26[_0x6b47a6(0x276)])===normalize(_0x9b130e)&&(_0x442d26['type']===_0x6b47a6(0x250)||_0x442d26[_0x6b47a6(0x1ee)]===_0x6b47a6(0x1d1)));if(!_0x440d96){_0x278639[_0x6b47a6(0x1d3)][_0x6b47a6(0x21c)](_0x6b47a6(0x229)+_0x9b130e+_0x6b47a6(0x279)),_0x1b525c[_0x6b47a6(0x25c)](_0x498831,0x1),_0x8d607a=!![];continue;}if(_0x440d96){const _0x2c6fc8=await findRelatedId(_0x278639,_0x440d96['id'],_0x6b47a6(0x1f9)),_0x42445f=await _0x278639[_0x6b47a6(0x200)](_0x440d96['id']);if(_0x2c6fc8){const _0x4b391b=await _0x278639[_0x6b47a6(0x200)](_0x2c6fc8);if(_0x4b391b&&typeof _0x4b391b['val']===_0x6b47a6(0x274)){let _0xe4e501=![],_0x54a6b3='';Math['abs'](_0x4b391b[_0x6b47a6(0x277)]-ECO_TEMP)>0.5&&(_0xe4e501=!![],_0x54a6b3='manual');if(!_0xe4e501&&_0x42445f&&typeof _0x42445f[_0x6b47a6(0x277)]==='number'){const _0x3c1096=_0x3703cc[_0x9b130e]||_0x3703cc[_0x6b47a6(0x234)]||0x15;_0x42445f[_0x6b47a6(0x277)]<_0x3c1096+0.2&&(_0xe4e501=!![],_0x54a6b3=_0x6b47a6(0x1d6));}if(_0xe4e501){if(_0x54a6b3===_0x6b47a6(0x1d5)){_0x278639[_0x6b47a6(0x1d3)][_0x6b47a6(0x1d0)](_0x6b47a6(0x1df)+_0x9b130e+_0x6b47a6(0x1fc)+_0x4b391b[_0x6b47a6(0x277)]+_0x6b47a6(0x1e7)+ECO_TEMP+'Â°C).\x20Entferne\x20Status.');const _0x390700=lastActions[_0x6b47a6(0x210)+_0x9b130e],_0x2afa06=_0x390700&&Date[_0x6b47a6(0x248)]()-_0x390700<0x2*0x3c*0x3e8;if(!_0x2afa06&&_0x4b391b[_0x6b47a6(0x277)]>ECO_TEMP+0.5){_0x278639[_0x6b47a6(0x272)]&&(_0x278639[_0x6b47a6(0x1d3)]['info'](_0x6b47a6(0x221)+_0x9b130e+_0x6b47a6(0x233)),_0x278639['sendToPythonWrapper']('TRAIN_RL_PENALTY',{'room':_0x9b130e}));const _0x53f281=_0x9b130e+'_'+new Date()[_0x6b47a6(0x266)]();if(!_0x497b59[_0x53f281]){_0x497b59[_0x53f281]=0x1;if(!_0x497b59[_0x6b47a6(0x259)])_0x497b59[_0x6b47a6(0x259)]={};_0x497b59['_meta'][_0x53f281]=Date[_0x6b47a6(0x248)](),_0x11e42d=!![];}}else _0x2afa06&&_0x278639[_0x6b47a6(0x1d3)][_0x6b47a6(0x1d0)](_0x6b47a6(0x24e)+_0x9b130e+'\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.');}else{if(_0x54a6b3===_0x6b47a6(0x1d6)){let _0x5a7d55=![];if(_0x403421['find'](_0x55da8e=>_0x55da8e[_0x6b47a6(0x28c)]===_0x9b130e))_0x5a7d55=!![];const _0xdeee71=_0x8e5d62[_0x6b47a6(0x213)](_0x57c6d7=>normalize(_0x57c6d7[_0x6b47a6(0x276)])===normalize(_0x9b130e)&&(_0x57c6d7[_0x6b47a6(0x1ee)]===_0x6b47a6(0x280)||_0x57c6d7[_0x6b47a6(0x1ee)]===_0x6b47a6(0x230)||_0x57c6d7[_0x6b47a6(0x1ee)]===_0x6b47a6(0x227)));for(const _0x21a199 of _0xdeee71){try{const _0x46055a=await _0x278639[_0x6b47a6(0x200)](_0x21a199['id']);if(_0x46055a&&(_0x46055a[_0x6b47a6(0x277)]===!![]||_0x46055a[_0x6b47a6(0x277)]===0x1||String(_0x46055a['val'])[_0x6b47a6(0x24a)]()===_0x6b47a6(0x243)))_0x5a7d55=!![];}catch(_0x3d19e4){}}if(_0x5a7d55)_0x278639[_0x6b47a6(0x1d3)][_0x6b47a6(0x1d0)](_0x6b47a6(0x21e)+_0x9b130e+'\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.');else{const _0x52781f=_0x3703cc[_0x9b130e]||_0x3703cc[_0x6b47a6(0x234)]||0x15;_0x278639['log'][_0x6b47a6(0x1d0)]('ðŸš¨\x20[MPC\x20WATCHDOG]\x20'+_0x9b130e+_0x6b47a6(0x201)+_0x42445f[_0x6b47a6(0x277)]+_0x6b47a6(0x1e6)+(_0x52781f+0.2)+_0x6b47a6(0x20e)),await _0x278639[_0x6b47a6(0x25f)](_0x2c6fc8,_0x52781f),await logAutomationAction(_0x278639,_0x6b47a6(0x22d)+_0x9b130e+':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20'+_0x52781f+'Â°C'),lastActions['rescue_'+_0x9b130e]=Date['now']();}}}_0x1b525c[_0x6b47a6(0x25c)](_0x498831,0x1),_0x8d607a=!![];}}}}}_0x8d607a&&await _0x278639[_0x6b47a6(0x223)](_0x28012e,{'val':JSON[_0x6b47a6(0x238)](_0x1b525c),'ack':!![]}),_0x11e42d&&await _0x278639[_0x6b47a6(0x223)](_0x6b47a6(0x251),{'val':JSON[_0x6b47a6(0x238)](_0x497b59),'ack':!![]});}catch(_0x54c35d){}}async function applyEnergySavings(_0x167b6f,_0xf4130b){const _0xf4bbe9=a1_0x3ead09;await cleanupGhostInterventions(_0x167b6f);if(!_0xf4130b||_0xf4130b['length']===0x0)return;const _0x5315e0=_0x167b6f[_0xf4bbe9(0x23a)]['devices']||[],_0x2ad86b=Date[_0xf4bbe9(0x248)]();for(const _0xd2acd8 of _0xf4130b){const _0x409395=_0xd2acd8[_0xf4bbe9(0x28c)],_0x28f34f=_0xd2acd8[_0xf4bbe9(0x28d)],_0x1f69eb=_0xd2acd8[_0xf4bbe9(0x261)]||0x15;if(lastActions[_0xf4bbe9(0x1fb)+_0x409395]&&_0x2ad86b-lastActions['rescue_'+_0x409395]<RESCUE_LOCK_MS)continue;const _0x30f038=_0x5315e0[_0xf4bbe9(0x240)](_0x228c38=>normalize(_0x228c38[_0xf4bbe9(0x276)])===normalize(_0x409395)&&(_0x228c38[_0xf4bbe9(0x1ee)]===_0xf4bbe9(0x250)||_0x228c38[_0xf4bbe9(0x1ee)]===_0xf4bbe9(0x1d1)));if(!_0x30f038)continue;const _0x2d474b=await findRelatedId(_0x167b6f,_0x30f038['id'],_0xf4bbe9(0x1f9));if(_0x2d474b){if(lastActions[_0xf4bbe9(0x282)+_0x409395]&&_0x2ad86b-lastActions[_0xf4bbe9(0x282)+_0x409395]<0x1e*0x3c*0x3e8)continue;const _0x198ce1=await _0x167b6f['getForeignStateAsync'](_0x2d474b);if(_0x198ce1&&typeof _0x198ce1[_0xf4bbe9(0x277)]===_0xf4bbe9(0x274)){const _0x7e3016=_0x198ce1[_0xf4bbe9(0x277)];_0x7e3016!==ECO_TEMP&&await manageMpcIntervention(_0x167b6f,_0x409395,_0xf4bbe9(0x1dd));if(_0x28f34f>0x1e)_0x7e3016>ECO_TEMP+0.5&&(_0x167b6f[_0xf4bbe9(0x1d3)][_0xf4bbe9(0x1d0)](_0xf4bbe9(0x285)+_0x409395+_0xf4bbe9(0x1f7)+ECO_TEMP+_0xf4bbe9(0x245)+_0x28f34f+_0xf4bbe9(0x258)),await _0x167b6f[_0xf4bbe9(0x25f)](_0x2d474b,ECO_TEMP),await manageMpcIntervention(_0x167b6f,_0x409395,'add'),lastActions[_0xf4bbe9(0x282)+_0x409395]=_0x2ad86b,await logAutomationAction(_0x167b6f,_0xf4bbe9(0x20f)+_0x409395+_0xf4bbe9(0x249)+ECO_TEMP+'Â°C'));else _0x28f34f<=0xf&&(_0x7e3016<_0x1f69eb&&(_0x167b6f[_0xf4bbe9(0x1d3)][_0xf4bbe9(0x1d0)](_0xf4bbe9(0x237)+_0x409395+_0xf4bbe9(0x252)+_0x1f69eb+_0xf4bbe9(0x289)),await _0x167b6f[_0xf4bbe9(0x25f)](_0x2d474b,_0x1f69eb),await manageMpcIntervention(_0x167b6f,_0x409395,'remove'),lastActions[_0xf4bbe9(0x282)+_0x409395]=_0x2ad86b,await logAutomationAction(_0x167b6f,_0xf4bbe9(0x20f)+_0x409395+':\x20Aufheizen\x20auf\x20'+_0x1f69eb+'Â°C')));}}else _0x167b6f['log'][_0xf4bbe9(0x21c)]('[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20'+_0x409395+_0xf4bbe9(0x20c));}}module[a1_0x3ead09(0x1da)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};