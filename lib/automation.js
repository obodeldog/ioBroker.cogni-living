const a1_0x26f5d3=a1_0x29b8;(function(_0x2d05a9,_0x4a50b8){const _0x24fb69=a1_0x29b8,_0x21f894=_0x2d05a9();while(!![]){try{const _0x1da03a=parseInt(_0x24fb69(0x1f9))/0x1*(parseInt(_0x24fb69(0x1e4))/0x2)+-parseInt(_0x24fb69(0x1e6))/0x3*(parseInt(_0x24fb69(0x1e5))/0x4)+parseInt(_0x24fb69(0x206))/0x5+-parseInt(_0x24fb69(0x1ec))/0x6*(-parseInt(_0x24fb69(0x208))/0x7)+parseInt(_0x24fb69(0x1e0))/0x8*(parseInt(_0x24fb69(0x1f4))/0x9)+-parseInt(_0x24fb69(0x1ea))/0xa+-parseInt(_0x24fb69(0x1fd))/0xb;if(_0x1da03a===_0x4a50b8)break;else _0x21f894['push'](_0x21f894['shift']());}catch(_0x57df47){_0x21f894['push'](_0x21f894['shift']());}}}(a1_0x713b,0xe948d));function a1_0x29b8(_0x2b6473,_0x15ca70){const _0x49685c=a1_0x713b();return a1_0x29b8=function(_0x4cc474,_0x91a309){_0x4cc474=_0x4cc474-0x1df;let _0x713bf6=_0x49685c[_0x4cc474];return _0x713bf6;},a1_0x29b8(_0x2b6473,_0x15ca70);}function a1_0x713b(){const _0x4e3b37=['\x27),\x20but\x20found\x20no\x20matching\x20light\x20device.','818XeTMam','8zPzeDD','1699287tWfAQx','val','getForeignStateAsync','off','3385830Uxtuby','./ai_agent','177036JVLQTU','debug','active','reason','âš¡\x20ACTION:\x20','analysis.automation.mode','consultButler','replace','8641179jGLjoA','exports','ðŸ”\x20Device-Search\x20failed:\x20Predicted\x20\x27','approved','analysis.automation.confidenceThreshold','900LTqPUb','info','location','log','4830441pJZZMc','setStateAsync','trim','ðŸ¤–\x20Butler\x20Blocked:\x20','\x20->\x20Schalte\x20','\x27\x20(norm:\x20\x27','Unknown','\x20->\x20','toUpperCase','7099250GQyJzf','search','28wNrHcx','toString','name','config','switch','(((.+)+)+)+$','devices','setForeignStateAsync','constructor','getStateAsync','type','ðŸ‘€\x20SIMULATION:\x20','8LuppkY','analysis.automation.lastAction','find'];a1_0x713b=function(){return _0x4e3b37;};return a1_0x713b();}const a1_0x91a309=(function(){let _0x99bea9=!![];return function(_0x1c191d,_0x3260c8){const _0x35dc88=_0x99bea9?function(){if(_0x3260c8){const _0x2d4e4c=_0x3260c8['apply'](_0x1c191d,arguments);return _0x3260c8=null,_0x2d4e4c;}}:function(){};return _0x99bea9=![],_0x35dc88;};}()),a1_0x4cc474=a1_0x91a309(this,function(){const _0x329d89=a1_0x29b8;return a1_0x4cc474[_0x329d89(0x209)]()[_0x329d89(0x207)](_0x329d89(0x20d))[_0x329d89(0x209)]()[_0x329d89(0x210)](a1_0x4cc474)[_0x329d89(0x207)](_0x329d89(0x20d));});a1_0x4cc474();'use strict';const aiAgent=require(a1_0x26f5d3(0x1eb)),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function normalize(_0x56490a){const _0x4ffda8=a1_0x26f5d3;if(!_0x56490a)return'';return _0x56490a['toLowerCase']()[_0x4ffda8(0x1f3)](/\s+/g,'')[_0x4ffda8(0x1ff)]();}async function handlePrediction(_0x3c1754,_0xb7f884,_0x2af3f7){const _0xb0bea2=a1_0x26f5d3;if(!_0xb7f884||_0xb7f884===_0xb0bea2(0x203))return;let _0x483cd6=_0xb0bea2(0x1e9),_0x2d19ac=0.6;try{const _0x188373=await _0x3c1754['getStateAsync'](_0xb0bea2(0x1f1));if(_0x188373&&_0x188373[_0xb0bea2(0x1e7)])_0x483cd6=_0x188373[_0xb0bea2(0x1e7)];const _0x3cc320=await _0x3c1754[_0xb0bea2(0x211)](_0xb0bea2(0x1f8));if(_0x3cc320&&_0x3cc320[_0xb0bea2(0x1e7)])_0x2d19ac=_0x3cc320[_0xb0bea2(0x1e7)];}catch(_0x6f2129){}if(_0x483cd6===_0xb0bea2(0x1e9))return;if(_0x2af3f7<_0x2d19ac)return;const _0x37f823=Date['now']();if(lastActions[_0xb7f884]&&_0x37f823-lastActions[_0xb7f884]<COOLDOWN_MS)return;const _0x4a4c96=_0x3c1754[_0xb0bea2(0x20b)][_0xb0bea2(0x20e)]||[],_0x1cab1d=normalize(_0xb7f884),_0x20b382=_0x4a4c96[_0xb0bea2(0x1e2)](_0x40a046=>{const _0x4c1cfd=_0xb0bea2;return normalize(_0x40a046[_0x4c1cfd(0x1fb)])===_0x1cab1d&&(_0x40a046[_0x4c1cfd(0x212)]==='light'||_0x40a046['type']==='dimmer'||_0x40a046[_0x4c1cfd(0x212)]===_0x4c1cfd(0x20c));});if(!_0x20b382){const _0x50f18d=_0xb0bea2(0x1f6)+_0xb7f884+_0xb0bea2(0x202)+_0x1cab1d+_0xb0bea2(0x1e3);_0x3c1754[_0xb0bea2(0x1fc)][_0xb0bea2(0x1ed)](_0x50f18d);return;}const _0x2b44d6=await aiAgent[_0xb0bea2(0x1f2)](_0x3c1754,_0xb7f884,_0x20b382[_0xb0bea2(0x20a)],_0x2af3f7);if(!_0x2b44d6[_0xb0bea2(0x1f7)]){_0x3c1754[_0xb0bea2(0x1fc)][_0xb0bea2(0x1ed)](_0xb0bea2(0x200)+_0xb7f884+_0xb0bea2(0x204)+_0x2b44d6[_0xb0bea2(0x1ef)]),await _0x3c1754['setStateAsync'](_0xb0bea2(0x1e1),{'val':'[BLOCKED]\x20'+_0x2b44d6['reason'],'ack':!![]});return;}const _0x2e2a41='PrÃ¤diktion:\x20'+_0xb7f884+_0xb0bea2(0x201)+_0x20b382[_0xb0bea2(0x20a)]+'\x20('+_0x2b44d6['reason']+')';await _0x3c1754[_0xb0bea2(0x1fe)](_0xb0bea2(0x1e1),{'val':'['+_0x483cd6[_0xb0bea2(0x205)]()+']\x20'+_0x2e2a41,'ack':!![]});if(_0x483cd6==='simulate')_0x3c1754['log'][_0xb0bea2(0x1fa)](_0xb0bea2(0x1df)+_0x2e2a41);else{if(_0x483cd6===_0xb0bea2(0x1ee)){_0x3c1754[_0xb0bea2(0x1fc)][_0xb0bea2(0x1fa)](_0xb0bea2(0x1f0)+_0x2e2a41);const _0x830107=await _0x3c1754[_0xb0bea2(0x1e8)](_0x20b382['id']);if(_0x830107&&(_0x830107[_0xb0bea2(0x1e7)]===!![]||_0x830107[_0xb0bea2(0x1e7)]>0x0)){}else await _0x3c1754[_0xb0bea2(0x20f)](_0x20b382['id'],!![]);lastActions[_0xb7f884]=_0x37f823;}}}module[a1_0x26f5d3(0x1f5)]={'handlePrediction':handlePrediction};