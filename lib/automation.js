function a1_0x2eda(){const _0x4e2cdb=['toString','exports','dimmer','simulate','name','üëÄ\x20SIMULATION:\x20','\x20->\x20Schalte\x20','toUpperCase','replace','off','find','\x27\x20(norm:\x20\x27','[BLOCKED]\x20','consultButler','setForeignStateAsync','3303762iWOiIx','switch','analysis.automation.confidenceThreshold','location','type','\x20->\x20','approved','info','log','798298lNvjYf','Unknown','toLowerCase','8253301WKBdtJ','Pr√§diktion:\x20','apply','4794708jeBWla','analysis.automation.lastAction','2429110EyShlp','reason','(((.+)+)+)+$','1258170dzwYRg','val','üîç\x20Device-Search\x20failed:\x20Predicted\x20\x27','search','analysis.automation.mode','now','\x27),\x20but\x20found\x20no\x20matching\x20light\x20device.','debug','trim','getStateAsync','ü§ñ\x20Butler\x20Blocked:\x20','5832900ZlRlmj'];a1_0x2eda=function(){return _0x4e2cdb;};return a1_0x2eda();}const a1_0x25dec6=a1_0x6a72;function a1_0x6a72(_0x46830f,_0x5d2e74){const _0x43059d=a1_0x2eda();return a1_0x6a72=function(_0x5be994,_0xa6abb2){_0x5be994=_0x5be994-0x93;let _0x2eda85=_0x43059d[_0x5be994];return _0x2eda85;},a1_0x6a72(_0x46830f,_0x5d2e74);}(function(_0x58c2f5,_0x409520){const _0x1e0278=a1_0x6a72,_0x3e60d7=_0x58c2f5();while(!![]){try{const _0x7dd5b1=-parseInt(_0x1e0278(0xb4))/0x1+-parseInt(_0x1e0278(0xbc))/0x2+parseInt(_0x1e0278(0xab))/0x3+parseInt(_0x1e0278(0xba))/0x4+parseInt(_0x1e0278(0xbf))/0x5+-parseInt(_0x1e0278(0x9b))/0x6+parseInt(_0x1e0278(0xb7))/0x7;if(_0x7dd5b1===_0x409520)break;else _0x3e60d7['push'](_0x3e60d7['shift']());}catch(_0x10e119){_0x3e60d7['push'](_0x3e60d7['shift']());}}}(a1_0x2eda,0xb6085));const a1_0xa6abb2=(function(){let _0x3f57f1=!![];return function(_0x49f5ec,_0x1f6938){const _0x4d3b97=_0x3f57f1?function(){const _0x8be878=a1_0x6a72;if(_0x1f6938){const _0x544a80=_0x1f6938[_0x8be878(0xb9)](_0x49f5ec,arguments);return _0x1f6938=null,_0x544a80;}}:function(){};return _0x3f57f1=![],_0x4d3b97;};}()),a1_0x5be994=a1_0xa6abb2(this,function(){const _0x4468b0=a1_0x6a72;return a1_0x5be994[_0x4468b0(0x9c)]()['search']('(((.+)+)+)+$')[_0x4468b0(0x9c)]()['constructor'](a1_0x5be994)[_0x4468b0(0x93)](_0x4468b0(0xbe));});a1_0x5be994();'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function normalize(_0x7c063f){const _0x50d205=a1_0x6a72;if(!_0x7c063f)return'';return _0x7c063f[_0x50d205(0xb6)]()[_0x50d205(0xa4)](/\s+/g,'')[_0x50d205(0x98)]();}async function handlePrediction(_0x3fdea5,_0x24dfdf,_0x2d9b61){const _0x648d95=a1_0x6a72;if(!_0x24dfdf||_0x24dfdf===_0x648d95(0xb5))return;let _0x3dc922=_0x648d95(0xa5),_0xe68195=0.6;try{const _0x39cd49=await _0x3fdea5[_0x648d95(0x99)](_0x648d95(0x94));if(_0x39cd49&&_0x39cd49[_0x648d95(0xc0)])_0x3dc922=_0x39cd49[_0x648d95(0xc0)];const _0x232e05=await _0x3fdea5[_0x648d95(0x99)](_0x648d95(0xad));if(_0x232e05&&_0x232e05[_0x648d95(0xc0)])_0xe68195=_0x232e05[_0x648d95(0xc0)];}catch(_0x1fb9fe){}if(_0x3dc922===_0x648d95(0xa5))return;if(_0x2d9b61<_0xe68195)return;const _0x2a9932=Date[_0x648d95(0x95)]();if(lastActions[_0x24dfdf]&&_0x2a9932-lastActions[_0x24dfdf]<COOLDOWN_MS)return;const _0x2c5e11=_0x3fdea5['config']['devices']||[],_0x103bb1=normalize(_0x24dfdf),_0xbcc58d=_0x2c5e11[_0x648d95(0xa6)](_0x159afd=>{const _0x1d1692=_0x648d95;return normalize(_0x159afd[_0x1d1692(0xae)])===_0x103bb1&&(_0x159afd[_0x1d1692(0xaf)]==='light'||_0x159afd['type']===_0x1d1692(0x9e)||_0x159afd['type']===_0x1d1692(0xac));});if(!_0xbcc58d){const _0x4ebb18=_0x648d95(0xc1)+_0x24dfdf+_0x648d95(0xa7)+_0x103bb1+_0x648d95(0x96);_0x3fdea5[_0x648d95(0xb3)][_0x648d95(0x97)](_0x4ebb18);return;}const _0x43f013=await aiAgent[_0x648d95(0xa9)](_0x3fdea5,_0x24dfdf,_0xbcc58d['name'],_0x2d9b61);if(!_0x43f013[_0x648d95(0xb1)]){_0x3fdea5[_0x648d95(0xb3)][_0x648d95(0x97)](_0x648d95(0x9a)+_0x24dfdf+_0x648d95(0xb0)+_0x43f013[_0x648d95(0xbd)]),await _0x3fdea5['setStateAsync']('analysis.automation.lastAction',{'val':_0x648d95(0xa8)+_0x43f013['reason'],'ack':!![]});return;}const _0x205cec=_0x648d95(0xb8)+_0x24dfdf+_0x648d95(0xa2)+_0xbcc58d[_0x648d95(0xa0)]+'\x20('+_0x43f013[_0x648d95(0xbd)]+')';await _0x3fdea5['setStateAsync'](_0x648d95(0xbb),{'val':'['+_0x3dc922[_0x648d95(0xa3)]()+']\x20'+_0x205cec,'ack':!![]});if(_0x3dc922===_0x648d95(0x9f))_0x3fdea5[_0x648d95(0xb3)][_0x648d95(0xb2)](_0x648d95(0xa1)+_0x205cec);else{if(_0x3dc922==='active'){_0x3fdea5[_0x648d95(0xb3)][_0x648d95(0xb2)]('‚ö°\x20ACTION:\x20'+_0x205cec);const _0x165369=await _0x3fdea5['getForeignStateAsync'](_0xbcc58d['id']);if(_0x165369&&(_0x165369['val']===!![]||_0x165369[_0x648d95(0xc0)]>0x0)){}else await _0x3fdea5[_0x648d95(0xaa)](_0xbcc58d['id'],!![]);lastActions[_0x24dfdf]=_0x2a9932;}}}module[a1_0x25dec6(0x9d)]={'handlePrediction':handlePrediction};