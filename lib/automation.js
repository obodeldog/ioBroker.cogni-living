const a1_0x2023d6=a1_0xf690;(function(_0x138093,_0x23281c){const _0x39cde5=a1_0xf690,_0x3f1c25=_0x138093();while(!![]){try{const _0x2a3cf7=-parseInt(_0x39cde5(0x180))/0x1*(-parseInt(_0x39cde5(0x185))/0x2)+-parseInt(_0x39cde5(0x175))/0x3*(parseInt(_0x39cde5(0x136))/0x4)+-parseInt(_0x39cde5(0x14c))/0x5+parseInt(_0x39cde5(0x149))/0x6*(parseInt(_0x39cde5(0x17f))/0x7)+parseInt(_0x39cde5(0x15a))/0x8+-parseInt(_0x39cde5(0x130))/0x9+-parseInt(_0x39cde5(0xf4))/0xa;if(_0x2a3cf7===_0x23281c)break;else _0x3f1c25['push'](_0x3f1c25['shift']());}catch(_0x2f87df){_0x3f1c25['push'](_0x3f1c25['shift']());}}}(a1_0x17a8,0x5296d));const a1_0x31cdf2=(function(){let _0x2178c5=!![];return function(_0xaed870,_0x30b60f){const _0x566ab8=_0x2178c5?function(){const _0x19ef4e=a1_0xf690;if(_0x30b60f){const _0x418005=_0x30b60f[_0x19ef4e(0x16f)](_0xaed870,arguments);return _0x30b60f=null,_0x418005;}}:function(){};return _0x2178c5=![],_0x566ab8;};}()),a1_0x3befef=a1_0x31cdf2(this,function(){const _0x3a169a=a1_0xf690;return a1_0x3befef[_0x3a169a(0x18c)]()['search'](_0x3a169a(0xd7))[_0x3a169a(0x18c)]()[_0x3a169a(0x157)](a1_0x3befef)[_0x3a169a(0x173)]('(((.+)+)+)+$');});a1_0x3befef();'use strict';const aiAgent=require(a1_0x2023d6(0x131)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x246370){const _0x56c6cf=a1_0x2023d6;if(!_0x246370)return'';return _0x246370[_0x56c6cf(0x123)]()['replace'](/\s+/g,'')[_0x56c6cf(0x15c)]();}function getWarmupRobust(_0x242b2f,_0x53b87e){const _0x39ad6f=a1_0x2023d6;if(!_0x242b2f||!_0x53b87e)return 0x3c;if(_0x242b2f[_0x53b87e]!==undefined)return _0x242b2f[_0x53b87e];const _0x2a45c0=_0x53b87e[_0x39ad6f(0x123)]()['replace'](/√§/g,'ae')[_0x39ad6f(0xec)](/√∂/g,'oe')[_0x39ad6f(0xec)](/√º/g,'ue')[_0x39ad6f(0xec)](/√ü/g,'ss')[_0x39ad6f(0xec)](/\s+/g,'_')['replace'](/[^a-z0-9_]/g,'');if(_0x242b2f[_0x2a45c0]!==undefined)return _0x242b2f[_0x2a45c0];return 0x3c;}async function logAutomationAction(_0x17deea,_0x8014fa){const _0x41122f=a1_0x2023d6;await _0x17deea[_0x41122f(0xd0)](_0x41122f(0xfb),{'val':_0x8014fa,'ack':!![]});try{const _0x3538ef='analysis.automation.actionLog',_0x397c34=await _0x17deea[_0x41122f(0xf3)](_0x3538ef);let _0x4a7e4d=[];if(_0x397c34&&_0x397c34[_0x41122f(0xd5)])try{_0x4a7e4d=JSON['parse'](_0x397c34[_0x41122f(0xd5)]);}catch(_0x244d56){}_0x4a7e4d[_0x41122f(0xd4)]({'ts':Date[_0x41122f(0x10c)](),'msg':_0x8014fa});if(_0x4a7e4d[_0x41122f(0x152)]>0x32)_0x4a7e4d=_0x4a7e4d['slice'](0x0,0x32);await _0x17deea[_0x41122f(0xd0)](_0x3538ef,{'val':JSON[_0x41122f(0x14b)](_0x4a7e4d),'ack':!![]});}catch(_0x46a7c6){}}async function handlePrediction(_0x4bd34a,_0x187711,_0x271329){const _0x1a3724=a1_0x2023d6;if(!_0x187711||_0x187711===_0x1a3724(0x155))return;let _0x521695='off',_0x6899c0=0.6;try{const _0x4aade5=await _0x4bd34a[_0x1a3724(0xf3)](_0x1a3724(0x139));if(_0x4aade5&&_0x4aade5[_0x1a3724(0xd5)])_0x521695=_0x4aade5[_0x1a3724(0xd5)];const _0x200bdf=await _0x4bd34a['getStateAsync'](_0x1a3724(0x145));if(_0x200bdf&&_0x200bdf[_0x1a3724(0xd5)])_0x6899c0=_0x200bdf[_0x1a3724(0xd5)];}catch(_0x214bf2){}if(_0x521695==='off'||_0x271329<_0x6899c0)return;const _0x1973b0=Date[_0x1a3724(0x10c)]();if(lastActions[_0x187711]&&_0x1973b0-lastActions[_0x187711]<COOLDOWN_MS)return;const _0x31b26b=_0x4bd34a[_0x1a3724(0x114)][_0x1a3724(0x191)]||[],_0x4bd9eb=normalize(_0x187711),_0x210ce1=_0x31b26b['find'](_0x417ef1=>normalize(_0x417ef1[_0x1a3724(0x137)])===_0x4bd9eb&&(_0x417ef1[_0x1a3724(0x112)]===_0x1a3724(0x190)||_0x417ef1[_0x1a3724(0x112)]==='dimmer'||_0x417ef1[_0x1a3724(0x112)]===_0x1a3724(0x12b)));if(!_0x210ce1)return;const _0x2aa037=await aiAgent[_0x1a3724(0x178)](_0x4bd34a,_0x187711,_0x210ce1['name'],_0x271329);if(!_0x2aa037[_0x1a3724(0x10e)])return;const _0x720ca2=_0x1a3724(0xf0)+_0x187711+_0x1a3724(0x15d)+_0x210ce1['name']+'\x20('+_0x2aa037[_0x1a3724(0xfd)]+')';await logAutomationAction(_0x4bd34a,'['+_0x521695['toUpperCase']()+']\x20'+_0x720ca2);if(_0x521695===_0x1a3724(0xd8)){const _0x41e476=await _0x4bd34a[_0x1a3724(0x196)](_0x210ce1['id']);(!_0x41e476||!_0x41e476[_0x1a3724(0xd5)]&&_0x41e476[_0x1a3724(0xd5)]!==!![])&&await _0x4bd34a[_0x1a3724(0x12e)](_0x210ce1['id'],!![]),lastActions[_0x187711]=_0x1973b0;}}async function findRelatedId(_0x465f60,_0x6c5d4b,_0x28ced8='setpoint'){const _0x37c9c4=a1_0x2023d6;if(_0x28ced8===_0x37c9c4(0x12d)&&_0x465f60[_0x37c9c4(0x114)]['thermostatMapping']){let _0x62c9f6=_0x465f60['config'][_0x37c9c4(0xe1)];if(typeof _0x62c9f6===_0x37c9c4(0x144))try{_0x62c9f6=JSON['parse'](_0x62c9f6);}catch(_0xca51d4){}if(_0x62c9f6&&_0x62c9f6[_0x6c5d4b])return _0x62c9f6[_0x6c5d4b];}if(_0x28ced8===_0x37c9c4(0x197)&&_0x465f60['config'][_0x37c9c4(0x17c)]){let _0x261734=_0x465f60[_0x37c9c4(0x114)][_0x37c9c4(0x17c)];if(typeof _0x261734===_0x37c9c4(0x144))try{_0x261734=JSON[_0x37c9c4(0xed)](_0x261734);}catch(_0x26c500){}if(_0x261734&&_0x261734[_0x6c5d4b])return _0x261734[_0x6c5d4b];}let _0x4ce4e9=[];if(_0x28ced8===_0x37c9c4(0x12d))_0x4ce4e9=[{'s':_0x37c9c4(0x168),'t':_0x37c9c4(0x194)},{'s':_0x37c9c4(0xe7),'t':_0x37c9c4(0x194)},{'s':'.1.TEMPERATURE','t':_0x37c9c4(0x160)},{'s':_0x37c9c4(0x181),'t':_0x37c9c4(0x111)},{'s':_0x37c9c4(0x115),'t':_0x37c9c4(0x188)},{'s':_0x37c9c4(0x115),'t':_0x37c9c4(0x10f)},{'s':_0x37c9c4(0x18f),'t':_0x37c9c4(0xf7)},{'s':'ACTUAL','t':_0x37c9c4(0x13c)},{'s':_0x37c9c4(0xe2),'t':_0x37c9c4(0x107)},{'s':'temperature','t':_0x37c9c4(0x12d)}];else _0x28ced8===_0x37c9c4(0x197)&&(_0x4ce4e9=[{'s':_0x37c9c4(0x168),'t':_0x37c9c4(0xfc)},{'s':'.1.TEMPERATURE','t':_0x37c9c4(0xfc)},{'s':_0x37c9c4(0xe7),'t':_0x37c9c4(0x154)},{'s':'local_temperature','t':_0x37c9c4(0x128)},{'s':_0x37c9c4(0x18f),'t':_0x37c9c4(0x182)},{'s':_0x37c9c4(0x18f),'t':_0x37c9c4(0xd2)}]);for(const _0xe8d2e3 of _0x4ce4e9){if(_0x6c5d4b[_0x37c9c4(0x14a)](_0xe8d2e3['s'])){const _0x1554b1=_0x6c5d4b[_0x37c9c4(0xec)](_0xe8d2e3['s'],_0xe8d2e3['t']),_0x272569=await _0x465f60[_0x37c9c4(0x170)](_0x1554b1);if(_0x272569)return _0x1554b1;}}try{const _0x58c385=_0x6c5d4b[_0x37c9c4(0x141)]('.');if(_0x58c385['length']>0x2){const _0x698991=_0x58c385[_0x37c9c4(0x12f)](0x0,-0x1)[_0x37c9c4(0x11d)]('.'),_0x393ec8=await _0x465f60['getForeignObjectsAsync'](_0x698991+'.*'),_0x2e8a7a=[],_0x3063c3=_0x6c5d4b['split'](/[._]+/)[_0x37c9c4(0x148)](_0x5a56e8=>![_0x37c9c4(0x10a),'0','hm-rpc',_0x37c9c4(0x17a),_0x37c9c4(0x101),'temperature',_0x37c9c4(0x11c),_0x37c9c4(0xf1),'messwert',_0x37c9c4(0x142)][_0x37c9c4(0x14a)](_0x5a56e8['toLowerCase']()));for(const [_0xb06da5,_0x269c39]of Object[_0x37c9c4(0x156)](_0x393ec8)){if(_0xb06da5===_0x6c5d4b)continue;if(_0x269c39&&_0x269c39['common']){const _0x1c81cd=_0xb06da5[_0x37c9c4(0x123)](),_0x37920a=(_0x269c39['common'][_0x37c9c4(0x15b)]||'')[_0x37c9c4(0x123)](),_0x257b2d=(_0x269c39[_0x37c9c4(0x109)][_0x37c9c4(0x189)]||'')[_0x37c9c4(0x123)]();let _0x56a530=![];if(_0x28ced8==='setpoint'&&_0x269c39['common'][_0x37c9c4(0xdc)]===!![])_0x56a530=_0x1c81cd[_0x37c9c4(0x14a)](_0x37c9c4(0x13e))||_0x1c81cd['includes']('soll')||_0x1c81cd['includes'](_0x37c9c4(0xd3))||_0x37920a['includes'](_0x37c9c4(0x198))||_0x37920a[_0x37c9c4(0x14a)](_0x37c9c4(0x108));else _0x28ced8===_0x37c9c4(0x197)&&(_0x56a530=_0x1c81cd[_0x37c9c4(0x14a)](_0x37c9c4(0xd2))||_0x1c81cd[_0x37c9c4(0x14a)](_0x37c9c4(0x197))||_0x1c81cd[_0x37c9c4(0x14a)](_0x37c9c4(0x159))||_0x1c81cd['includes'](_0x37c9c4(0xdf))||_0x37920a[_0x37c9c4(0x14a)](_0x37c9c4(0x127))||_0x37920a['includes'](_0x37c9c4(0x18e))||_0x257b2d['includes']('%'));if(_0x56a530){const _0x1ae7e0=_0xb06da5['split'](/[._]+/)['map'](_0xf0232b=>_0xf0232b[_0x37c9c4(0x123)]());let _0x3f32a5=0x0;_0x3063c3[_0x37c9c4(0x126)](_0xac2e3b=>{const _0x5743ed=_0x37c9c4;if(_0x1ae7e0['includes'](_0xac2e3b[_0x5743ed(0x123)]()))_0x3f32a5++;}),_0x2e8a7a[_0x37c9c4(0x11a)]({'id':_0xb06da5,'score':_0x3f32a5});}}}if(_0x2e8a7a[_0x37c9c4(0x152)]>0x0){_0x2e8a7a[_0x37c9c4(0x125)]((_0x18e4ee,_0x35075a)=>_0x35075a[_0x37c9c4(0x14d)]-_0x18e4ee[_0x37c9c4(0x14d)]);if(_0x2e8a7a[0x0][_0x37c9c4(0x14d)]>0x0)return _0x2e8a7a[0x0]['id'];}}}catch(_0x481d24){}return null;}async function scanThermostats(_0x13096a){const _0x57fce6=a1_0x2023d6,_0x35652e=_0x13096a[_0x57fce6(0x114)][_0x57fce6(0x191)]||[],_0x379b8a=[],_0x3865fa=_0x35652e[_0x57fce6(0x148)](_0x4960fc=>_0x4960fc['id']&&_0x4960fc['id']['includes'](_0x57fce6(0x18f))||_0x4960fc['type']&&[_0x57fce6(0x18f),'thermostat','sensor']['includes'](_0x4960fc[_0x57fce6(0x112)])||_0x4960fc['name']&&_0x4960fc[_0x57fce6(0xef)]['toLowerCase']()[_0x57fce6(0x14a)]('temp'));for(const _0x572feb of _0x3865fa){const _0x51b4d0=await findRelatedId(_0x13096a,_0x572feb['id'],_0x57fce6(0x12d)),_0x3ba533=await findRelatedId(_0x13096a,_0x572feb['id'],_0x57fce6(0x197));let _0x5ea38b=_0x57fce6(0x16e),_0x31acc3=![],_0x188394=_0x13096a['config'][_0x57fce6(0xe1)]||{};if(typeof _0x188394===_0x57fce6(0x144))try{_0x188394=JSON['parse'](_0x188394);}catch(_0x143b45){}let _0x4a25fe=_0x13096a[_0x57fce6(0x114)]['valveMapping']||{};if(typeof _0x4a25fe===_0x57fce6(0x144))try{_0x4a25fe=JSON[_0x57fce6(0xed)](_0x4a25fe);}catch(_0x411b2a){}if(_0x188394[_0x572feb['id']]&&_0x188394[_0x572feb['id']]===_0x51b4d0||_0x4a25fe[_0x572feb['id']]&&_0x4a25fe[_0x572feb['id']]===_0x3ba533)_0x5ea38b=_0x57fce6(0x165),_0x31acc3=!![];else(_0x51b4d0||_0x3ba533)&&(_0x5ea38b=_0x57fce6(0x158));_0x379b8a['push']({'room':_0x572feb[_0x57fce6(0x137)]||_0x57fce6(0xee),'sensorId':_0x572feb['id'],'setpointId':_0x51b4d0||'-','valveId':_0x3ba533||'-','source':_0x5ea38b,'isManual':_0x31acc3,'status':_0x51b4d0&&_0x3ba533?_0x57fce6(0x147):_0x51b4d0?'OK':_0x57fce6(0x133)});}return _0x379b8a[_0x57fce6(0x125)]((_0x12741f,_0x5e67bf)=>_0x12741f[_0x57fce6(0x153)]['localeCompare'](_0x5e67bf[_0x57fce6(0x153)]));}async function updateSchedulePreview(_0x2497ab){const _0xefe000=a1_0x2023d6;if(!_0x2497ab[_0xefe000(0x114)][_0xefe000(0x166)]||!_0x2497ab[_0xefe000(0x114)][_0xefe000(0xd6)])return;let _0x399fe9={};try{const _0x52597d=await _0x2497ab[_0xefe000(0xf3)](_0xefe000(0x163));if(_0x52597d&&_0x52597d[_0xefe000(0xd5)])_0x399fe9=JSON['parse'](_0x52597d[_0xefe000(0xd5)]);}catch(_0x20d350){}const _0x3934a5=[],_0x1412db=Date[_0xefe000(0x10c)](),_0x20afb=0x30*0x3c*0x3c*0x3e8;try{const _0x3106a7=await _0x2497ab[_0xefe000(0x196)](_0x2497ab[_0xefe000(0x114)]['calendarInstance']+'.data.table');if(!_0x3106a7||!_0x3106a7[_0xefe000(0xd5)])return;const _0x1e3841=JSON[_0xefe000(0xed)](_0x3106a7[_0xefe000(0xd5)]),_0x5af493=_0x2497ab[_0xefe000(0x114)][_0xefe000(0xd9)]||[],_0x2f6471=_0x2497ab[_0xefe000(0x114)][_0xefe000(0x191)]||[],_0x4120d2=new Set();_0x2f6471[_0xefe000(0x126)](_0x28a7b7=>{const _0x2f3ed5=_0xefe000;if(_0x28a7b7[_0x2f3ed5(0x137)])_0x4120d2[_0x2f3ed5(0x140)](_0x28a7b7[_0x2f3ed5(0x137)]);});for(const _0x587dc3 of _0x1e3841){if(_0x587dc3[_0xefe000(0x11e)]&&_0x5af493[_0xefe000(0x152)]>0x0&&!_0x5af493[_0xefe000(0x14a)](_0x587dc3[_0xefe000(0x11e)]))continue;const _0x47ce07=_0x587dc3[_0xefe000(0x174)]||_0x587dc3['eventStart']||_0x587dc3[_0xefe000(0xdb)];if(!_0x47ce07)continue;const _0x4e3333=new Date(_0x47ce07),_0x4d4fc5=_0x4e3333['getTime']();if(isNaN(_0x4d4fc5))continue;if(_0x4d4fc5<_0x1412db)continue;if(_0x4d4fc5>_0x1412db+_0x20afb)continue;const _0x2f6e1e=(_0x587dc3['event']||_0x587dc3['summary']||'')[_0xefe000(0x123)]();let _0x1ffaf5=![],_0x4fe171=[],_0x3f5f14=_0x587dc3[_0xefe000(0x14f)]||_0x587dc3[_0xefe000(0x118)]||_0xefe000(0xee);if(_0x2f6e1e['includes'](_0xefe000(0x13f))||_0x2f6e1e[_0xefe000(0x14a)](_0xefe000(0x129))||_0x2f6e1e['includes'](_0xefe000(0x192)))_0x1ffaf5=!![],_0x4fe171=Array['from'](_0x4120d2);else for(const _0x41ebaa of _0x4120d2){if(_0x2f6e1e[_0xefe000(0x14a)](_0x41ebaa[_0xefe000(0x123)]()))_0x4fe171[_0xefe000(0x11a)](_0x41ebaa);}_0x4fe171[_0xefe000(0x152)]>0x0&&_0x4fe171[_0xefe000(0x126)](_0x36f2ad=>{const _0x260119=_0xefe000;let _0x524150=0x3c;if(_0x1ffaf5){let _0x3110bd=0x0;Object[_0x260119(0xeb)](_0x399fe9)[_0x260119(0x126)](_0x1be935=>{if(_0x1be935>_0x3110bd)_0x3110bd=_0x1be935;}),_0x524150=_0x3110bd>0x0?_0x3110bd:0x78;}else _0x524150=getWarmupRobust(_0x399fe9,_0x36f2ad);const _0x405f57=new Date(_0x4d4fc5-_0x524150*0xea60);_0x3934a5['push']({'eventTime':_0x4d4fc5,'triggerTime':_0x405f57[_0x260119(0x193)](),'room':_0x36f2ad,'minutes':_0x524150,'reason':_0x3f5f14,'isGlobal':_0x1ffaf5});});}}catch(_0x151a27){}_0x3934a5[_0xefe000(0x125)]((_0x414486,_0xd9d41c)=>_0x414486[_0xefe000(0xe4)]-_0xd9d41c[_0xefe000(0xe4)]);const _0x4bee52=_0x3934a5['slice'](0x0,0x1e);await _0x2497ab[_0xefe000(0xd0)](_0xefe000(0xe6),{'val':JSON[_0xefe000(0x14b)](_0x4bee52),'ack':!![]});}async function monitorEnforcements(_0x2837fd){const _0x29c5fc=a1_0x2023d6;try{const _0x1f231e=_0x29c5fc(0x15e),_0x5852b2=await _0x2837fd[_0x29c5fc(0xf3)](_0x1f231e);if(!_0x5852b2||!_0x5852b2[_0x29c5fc(0xd5)])return;let _0x22e50a=[];try{_0x22e50a=JSON[_0x29c5fc(0xed)](_0x5852b2[_0x29c5fc(0xd5)]);}catch(_0x36dbac){return;}if(!Array[_0x29c5fc(0x117)](_0x22e50a)||_0x22e50a[_0x29c5fc(0x152)]===0x0)return;const _0x59f8bf=Date[_0x29c5fc(0x10c)](),_0x2c76fe=_0x2837fd[_0x29c5fc(0x114)][_0x29c5fc(0x191)]||[];let _0x94fad7=![];for(let _0x52bca4=_0x22e50a[_0x29c5fc(0x152)]-0x1;_0x52bca4>=0x0;_0x52bca4--){const _0x17bae7=_0x22e50a[_0x52bca4];if(_0x59f8bf>=_0x17bae7['until']){_0x2837fd[_0x29c5fc(0xf6)][_0x29c5fc(0xe5)](_0x29c5fc(0x161)+_0x17bae7[_0x29c5fc(0x153)]+'\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.'),_0x22e50a[_0x29c5fc(0x11b)](_0x52bca4,0x1),_0x94fad7=!![];continue;}const _0x4568d1=_0x2c76fe[_0x29c5fc(0xe3)](_0xd52863=>normalize(_0xd52863['location'])===normalize(_0x17bae7[_0x29c5fc(0x153)])&&(_0xd52863[_0x29c5fc(0x112)]===_0x29c5fc(0x18f)||_0xd52863[_0x29c5fc(0x112)]==='thermostat'));if(_0x4568d1){const _0x37830c=await findRelatedId(_0x2837fd,_0x4568d1['id'],_0x29c5fc(0x12d));if(_0x37830c){const _0x259852=await _0x2837fd[_0x29c5fc(0x196)](_0x37830c);_0x259852&&typeof _0x259852[_0x29c5fc(0xd5)]==='number'&&(_0x259852[_0x29c5fc(0xd5)]<0xf&&(_0x2837fd[_0x29c5fc(0xf6)][_0x29c5fc(0x100)](_0x29c5fc(0x103)+_0x17bae7[_0x29c5fc(0x153)]+'\x20auf\x20'+_0x259852['val']+_0x29c5fc(0x104)+_0x17bae7[_0x29c5fc(0xd3)]+_0x29c5fc(0xff)),await _0x2837fd[_0x29c5fc(0x12e)](_0x37830c,_0x17bae7[_0x29c5fc(0xd3)]),await logAutomationAction(_0x2837fd,_0x29c5fc(0x121)+_0x17bae7['room']+':\x20'+_0x259852[_0x29c5fc(0xd5)]+_0x29c5fc(0x10d)+_0x17bae7[_0x29c5fc(0xd3)]+_0x29c5fc(0xe9))));}}}_0x94fad7&&await _0x2837fd[_0x29c5fc(0xd0)](_0x1f231e,{'val':JSON[_0x29c5fc(0x14b)](_0x22e50a),'ack':!![]});}catch(_0x3e611c){_0x2837fd[_0x29c5fc(0xf6)]['error']('Enforcement\x20Monitor\x20Error:\x20'+_0x3e611c[_0x29c5fc(0x16c)]);}}function a1_0x17a8(){const _0x90e8b=['split','state','window','string','analysis.automation.confidenceThreshold','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','PERFECT','filter','3194382PcwhRk','includes','stringify','2798390tukokb','score','\x20auf\x20','event',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','sendToPythonWrapper','length','room','.4.VALVE_STATE','Unknown','entries','constructor','Auto-Erkennung','stellwert','4584368HvwBUM','role','trim','\x20->\x20Schalte\x20','analysis.energy.activeEnforcements','remove','.4.SET_TEMPERATURE','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','analysis.energy.warmupTargets','analysis.energy.warmupTimes','üî•\x20[MPC\x20ACTION]\x20Heize\x20','Manuelles\x20Mapping','useCalendar',']:\x20Raum-Trigger\x20\x27','.1.ACTUAL_TEMPERATURE','\x20->\x20','\x20erreicht\x20Limit\x20(','number','message',':\x20Aufheizen\x20auf\x20','Nicht\x20gefunden','apply','getForeignObjectAsync','[WATCHDOG]\x20','üìÖ\x20[MPC\x20INFO]\x20','search','_date','1377MfHBvV','.data.table','üö®\x20[MPC\x20WATCHDOG]\x20','consultButler','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','ist','analysis.energy.rlPenalties','valveMapping','thermostat','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','7aXjzIe','16373OoKKNq','ACTUAL_TEMPERATURE','valve_position','findIndex','¬∞C).\x20Entferne\x20Status.','34pCknmg','üßπ\x20[MPC\x20CLEANUP]\x20','\x20wieder\x20auf\x20','occupied_heating_setpoint','unit','default','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','toString','\x20gefunden!','value.valve','temperature','light','devices','ankunft','getTime','.1.SET_POINT_TEMPERATURE','¬∞C\x20(nicht\x20','getForeignStateAsync','valve','level.temperature','setStateAsync','\x27\x20(Match:\x20','level','target','unshift','val','calendarInstance','(((.+)+)+)+$','active','calendarSelection','cal_','date','write','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','open','position','minutes_safe','thermostatMapping','Ist','find','triggerTime','info','analysis.energy.schedulePreview','.1.TEMPERATURE','¬∞C\x20<\x20','¬∞C\x20(Kalender-Schutz)','analysis.energy.ventilationAlerts','values','replace','parse','Unbekannt','name','Pr√§diktion:\x20','sensor','indexOf','getStateAsync','1519620iKRZRQ','rescue_','log','target_temperature','\x20min)','¬∞C\x20(Vorlauf:\x20','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','analysis.automation.lastAction','.1.LEVEL','reason','currentSystemMode','¬∞C.','warn','wert','eventStart','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','Calendar\x20Check\x20Error:\x20','system.mode','Soll','thermostat.setpoint','common','openknx','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','now','¬∞C\x20->\x20','approved','current_heating_setpoint','_meta','SET_POINT_TEMPERATURE','type','[MPC]\x20','config','local_temperature','analysis.energy.warmupSources','isArray','summary','\x20wurde\x20manuell\x20erh√∂ht.','push','splice','actual','join','_calName','getHours','normal','[FORCE]\x20','Classic','toLowerCase','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','sort','forEach','level.valve','pi_heating_demand','r√ºckkehr','¬∞C!\x20(Puffer\x20leer).','switch','TRAIN_RL_PENALTY','setpoint','setForeignStateAsync','slice','2190924fWUMCT','./ai_agent','[CAL]\x20','Fehlt','mpc_','analysis.energy.mpcActiveInterventions','788JDJcfJ','location','too_cold','analysis.automation.mode','¬∞C\x20(via\x20','manual','SET','üìÖ\x20SMART\x20SCHEDULE\x20[','set','urlaub\x20ende','add'];a1_0x17a8=function(){return _0x90e8b;};return a1_0x17a8();}async function checkCalendarTriggers(_0x27f042){const _0x4b520f=a1_0x2023d6;if(!_0x27f042[_0x4b520f(0x114)][_0x4b520f(0x166)]||!_0x27f042[_0x4b520f(0x114)][_0x4b520f(0xd6)])return;await updateSchedulePreview(_0x27f042);let _0x57f542={},_0x312799={};try{const _0x5d8753=await _0x27f042['getStateAsync'](_0x4b520f(0x163));if(_0x5d8753&&_0x5d8753[_0x4b520f(0xd5)])_0x57f542=JSON[_0x4b520f(0xed)](_0x5d8753[_0x4b520f(0xd5)]);const _0x122f9a=await _0x27f042[_0x4b520f(0xf3)](_0x4b520f(0x116));if(_0x122f9a&&_0x122f9a['val'])_0x312799=JSON[_0x4b520f(0xed)](_0x122f9a[_0x4b520f(0xd5)]);}catch(_0x5738d0){}let _0x86b5f0={'default':0x15};try{const _0x206122=await _0x27f042[_0x4b520f(0xf3)](_0x4b520f(0x162));if(_0x206122&&_0x206122[_0x4b520f(0xd5)])_0x86b5f0=JSON[_0x4b520f(0xed)](_0x206122[_0x4b520f(0xd5)]);}catch(_0x17a352){}let _0x41de93=[];try{const _0x3b99e1=await _0x27f042[_0x4b520f(0xf3)](_0x4b520f(0x15e));if(_0x3b99e1&&_0x3b99e1['val'])_0x41de93=JSON['parse'](_0x3b99e1[_0x4b520f(0xd5)]);}catch(_0x2e7266){}try{const _0x5192c2=await _0x27f042[_0x4b520f(0x196)](_0x27f042['config'][_0x4b520f(0xd6)]+_0x4b520f(0x176));if(!_0x5192c2||!_0x5192c2[_0x4b520f(0xd5)])return;const _0x44d93c=JSON[_0x4b520f(0xed)](_0x5192c2['val']),_0x1c5c78=Date[_0x4b520f(0x10c)](),_0x382012=_0x27f042[_0x4b520f(0x114)][_0x4b520f(0x191)]||[],_0x553747=_0x27f042[_0x4b520f(0x114)][_0x4b520f(0xd9)]||[];let _0x2c058d=![];for(const _0x30f286 of _0x44d93c){if(_0x30f286[_0x4b520f(0x11e)]&&_0x553747[_0x4b520f(0x152)]>0x0&&!_0x553747['includes'](_0x30f286[_0x4b520f(0x11e)]))continue;const _0x37b597=_0x30f286[_0x4b520f(0x174)]||_0x30f286[_0x4b520f(0x102)]||_0x30f286[_0x4b520f(0xdb)];if(!_0x37b597)continue;const _0x5da465=new Date(_0x37b597);if(isNaN(_0x5da465[_0x4b520f(0x193)]()))continue;const _0x1425ee=(_0x30f286[_0x4b520f(0x14f)]||_0x30f286['summary']||'')[_0x4b520f(0x123)]();if(_0x1425ee['includes'](_0x4b520f(0x13f))||_0x1425ee[_0x4b520f(0x14a)](_0x4b520f(0x129))||_0x1425ee[_0x4b520f(0x14a)](_0x4b520f(0x192))){let _0x3d085b=0x0;Object[_0x4b520f(0xeb)](_0x57f542)[_0x4b520f(0x126)](_0x3563b0=>{if(_0x3563b0>_0x3d085b)_0x3d085b=_0x3563b0;});if(_0x3d085b===0x0)_0x3d085b=0x78;const _0x226511=_0x5da465[_0x4b520f(0x193)]()-_0x3d085b*0xea60;_0x1c5c78>=_0x226511&&_0x1c5c78<_0x5da465[_0x4b520f(0x193)]()&&(_0x27f042[_0x4b520f(0xfe)]!=='normal'&&(_0x27f042[_0x4b520f(0xf6)][_0x4b520f(0xe5)](_0x4b520f(0x179)+_0x3d085b+'\x20min).'),await _0x27f042[_0x4b520f(0xd0)](_0x4b520f(0x106),{'val':_0x4b520f(0x120),'ack':![]})));}for(const _0x407b30 of _0x382012){if(_0x407b30[_0x4b520f(0x137)]){const _0x2c8172=_0x407b30[_0x4b520f(0x137)][_0x4b520f(0x123)](),_0x2f0093=(_0x407b30[_0x4b520f(0xef)]||'')[_0x4b520f(0x123)]();let _0x4dc1ea=_0x1425ee[_0x4b520f(0x14a)](_0x2c8172);!_0x4dc1ea&&_0x2f0093[_0x4b520f(0x152)]>0x3&&_0x1425ee['includes'](_0x2f0093)&&(_0x4dc1ea=!![]);if(_0x4dc1ea){const _0x5e7f85=getWarmupRobust(_0x57f542,_0x407b30[_0x4b520f(0x137)]),_0x5ed1f4=_0x312799[_0x407b30[_0x4b520f(0x137)]]||_0x4b520f(0x122),_0x485e68=_0x5da465[_0x4b520f(0x193)]()-_0x5e7f85*0xea60;if(_0x1c5c78>=_0x485e68&&_0x1c5c78<_0x5da465[_0x4b520f(0x193)]()){const _0x406b8e=lastActions[_0x4b520f(0xda)+_0x407b30[_0x4b520f(0x137)]];if(_0x406b8e&&_0x1c5c78-_0x406b8e<CAL_COOLDOWN_MS)continue;const _0x2fa570=await findRelatedId(_0x27f042,_0x407b30['id'],_0x4b520f(0x12d));if(_0x2fa570){let _0x1d99e4=_0x86b5f0[_0x407b30[_0x4b520f(0x137)]];if(_0x1d99e4===undefined)_0x1d99e4=_0x86b5f0[_0x4b520f(0x18a)];if(_0x1d99e4===undefined)_0x1d99e4=0x15;const _0x2465c4=await _0x27f042[_0x4b520f(0x196)](_0x2fa570);if(_0x2465c4&&typeof _0x2465c4[_0x4b520f(0xd5)]==='number'&&_0x2465c4[_0x4b520f(0xd5)]<_0x1d99e4-0.5){_0x27f042['log'][_0x4b520f(0xe5)](_0x4b520f(0x13d)+_0x5ed1f4+_0x4b520f(0x167)+_0x407b30['location']+_0x4b520f(0xd1)+_0x1425ee+')\x20aktiv.\x20Heize\x20auf\x20'+_0x1d99e4+_0x4b520f(0xf9)+_0x5e7f85+'\x20min).'),await _0x27f042[_0x4b520f(0x12e)](_0x2fa570,_0x1d99e4),await logAutomationAction(_0x27f042,_0x4b520f(0x132)+_0x407b30[_0x4b520f(0x137)]+_0x4b520f(0x169)+_0x1d99e4+_0x4b520f(0x13a)+_0x5ed1f4+')'),lastActions[_0x4b520f(0xda)+_0x407b30[_0x4b520f(0x137)]]=_0x1c5c78;const _0x1abbd6=_0x41de93[_0x4b520f(0x183)](_0x5a3f29=>_0x5a3f29[_0x4b520f(0x153)]===_0x407b30[_0x4b520f(0x137)]);if(_0x1abbd6!==-0x1)_0x41de93[_0x4b520f(0x11b)](_0x1abbd6,0x1);_0x41de93[_0x4b520f(0x11a)]({'room':_0x407b30[_0x4b520f(0x137)],'target':_0x1d99e4,'until':_0x5da465[_0x4b520f(0x193)]()}),_0x2c058d=!![];}}}}}}}_0x2c058d&&await _0x27f042[_0x4b520f(0xd0)]('analysis.energy.activeEnforcements',{'val':JSON['stringify'](_0x41de93),'ack':!![]});}catch(_0x3eadb9){_0x27f042[_0x4b520f(0xf6)][_0x4b520f(0x100)](_0x4b520f(0x105)+_0x3eadb9['message']);}}async function manageMpcIntervention(_0x61db46,_0xa0a2e8,_0x7923c1){const _0xae5a82=a1_0x2023d6;try{const _0xca4a47=_0xae5a82(0x135),_0x392dea=await _0x61db46[_0xae5a82(0xf3)](_0xca4a47);let _0x3d9b05=[];if(_0x392dea&&_0x392dea[_0xae5a82(0xd5)])try{_0x3d9b05=JSON[_0xae5a82(0xed)](_0x392dea[_0xae5a82(0xd5)]);}catch(_0x29000d){}const _0x5119f6=_0x3d9b05[_0xae5a82(0xf2)](_0xa0a2e8);if(_0x7923c1===_0xae5a82(0x140))_0x5119f6===-0x1&&(_0x3d9b05[_0xae5a82(0x11a)](_0xa0a2e8),await _0x61db46[_0xae5a82(0xd0)](_0xca4a47,{'val':JSON[_0xae5a82(0x14b)](_0x3d9b05),'ack':!![]}));else _0x7923c1===_0xae5a82(0x15f)&&(_0x5119f6!==-0x1&&(_0x3d9b05[_0xae5a82(0x11b)](_0x5119f6,0x1),await _0x61db46[_0xae5a82(0xd0)](_0xca4a47,{'val':JSON[_0xae5a82(0x14b)](_0x3d9b05),'ack':!![]})));}catch(_0x40d7a0){}}function a1_0xf690(_0x320555,_0x38b74e){const _0x5db889=a1_0x17a8();return a1_0xf690=function(_0x3befef,_0x31cdf2){_0x3befef=_0x3befef-0xd0;let _0x17a849=_0x5db889[_0x3befef];return _0x17a849;},a1_0xf690(_0x320555,_0x38b74e);}async function cleanupGhostInterventions(_0x45ef17){const _0x2ecae1=a1_0x2023d6;try{const _0x113c68=_0x2ecae1(0x135),_0x3539b7=await _0x45ef17[_0x2ecae1(0xf3)](_0x113c68);if(!_0x3539b7||!_0x3539b7[_0x2ecae1(0xd5)])return;const _0x289990=JSON[_0x2ecae1(0xed)](_0x3539b7[_0x2ecae1(0xd5)]);if(!Array[_0x2ecae1(0x117)](_0x289990)||_0x289990['length']===0x0)return;let _0x3046d4={'default':0x15};try{const _0x5cbad8=await _0x45ef17[_0x2ecae1(0xf3)](_0x2ecae1(0x162));if(_0x5cbad8&&_0x5cbad8[_0x2ecae1(0xd5)])_0x3046d4=JSON[_0x2ecae1(0xed)](_0x5cbad8[_0x2ecae1(0xd5)]);}catch(_0xddde73){}let _0x22d024=[];try{const _0x4199d2=await _0x45ef17[_0x2ecae1(0xf3)](_0x2ecae1(0xea));if(_0x4199d2&&_0x4199d2['val'])_0x22d024=JSON[_0x2ecae1(0xed)](_0x4199d2[_0x2ecae1(0xd5)]);}catch(_0x49ee1f){}let _0x195c2e={},_0x618408=![];try{const _0x23e07d=await _0x45ef17[_0x2ecae1(0xf3)](_0x2ecae1(0x17b));if(_0x23e07d&&_0x23e07d[_0x2ecae1(0xd5)])_0x195c2e=JSON[_0x2ecae1(0xed)](_0x23e07d['val']);}catch(_0xbad7d4){}if(_0x195c2e[_0x2ecae1(0x110)]){const _0x447699=Date['now']();for(const [_0x3d60c1,_0x477e10]of Object[_0x2ecae1(0x156)](_0x195c2e[_0x2ecae1(0x110)])){_0x447699-_0x477e10>PENALTY_TTL&&(delete _0x195c2e[_0x3d60c1],delete _0x195c2e[_0x2ecae1(0x110)][_0x3d60c1],_0x618408=!![],_0x45ef17[_0x2ecae1(0xf6)]['info'](_0x2ecae1(0x18b)+_0x3d60c1+_0x2ecae1(0xdd)));}}const _0x3f904e=_0x45ef17[_0x2ecae1(0x114)][_0x2ecae1(0x191)]||[];let _0x383058=![];for(let _0x45e1b2=_0x289990[_0x2ecae1(0x152)]-0x1;_0x45e1b2>=0x0;_0x45e1b2--){const _0x32d60c=_0x289990[_0x45e1b2],_0x4b2080=_0x3f904e[_0x2ecae1(0xe3)](_0x41647a=>normalize(_0x41647a['location'])===normalize(_0x32d60c)&&(_0x41647a[_0x2ecae1(0x112)]==='temperature'||_0x41647a['type']===_0x2ecae1(0x17d)));if(!_0x4b2080){_0x45ef17[_0x2ecae1(0xf6)][_0x2ecae1(0x100)](_0x2ecae1(0x146)+_0x32d60c+_0x2ecae1(0x124)),_0x289990[_0x2ecae1(0x11b)](_0x45e1b2,0x1),_0x383058=!![];continue;}if(_0x4b2080){const _0x3d588a=await findRelatedId(_0x45ef17,_0x4b2080['id'],_0x2ecae1(0x12d)),_0x2e7716=await _0x45ef17[_0x2ecae1(0x196)](_0x4b2080['id']);if(_0x3d588a){const _0x106a09=await _0x45ef17[_0x2ecae1(0x196)](_0x3d588a);if(_0x106a09&&typeof _0x106a09[_0x2ecae1(0xd5)]===_0x2ecae1(0x16b)){let _0x148670=![],_0x4a51e4='';Math['abs'](_0x106a09[_0x2ecae1(0xd5)]-ECO_TEMP)>0.5&&(_0x148670=!![],_0x4a51e4='manual');if(!_0x148670&&_0x2e7716&&typeof _0x2e7716[_0x2ecae1(0xd5)]===_0x2ecae1(0x16b)){const _0x24b414=_0x3046d4[_0x32d60c]||_0x3046d4[_0x2ecae1(0x18a)]||0x15;_0x2e7716[_0x2ecae1(0xd5)]<_0x24b414+0.2&&(_0x148670=!![],_0x4a51e4=_0x2ecae1(0x138));}if(_0x148670){if(_0x4a51e4===_0x2ecae1(0x13b)){_0x45ef17[_0x2ecae1(0xf6)][_0x2ecae1(0xe5)](_0x2ecae1(0x186)+_0x32d60c+'\x20ist\x20auf\x20'+_0x106a09[_0x2ecae1(0xd5)]+_0x2ecae1(0x195)+ECO_TEMP+_0x2ecae1(0x184));const _0x5a3aa2=lastActions[_0x2ecae1(0xda)+_0x32d60c],_0x44187a=_0x5a3aa2&&Date['now']()-_0x5a3aa2<0x2*0x3c*0x3e8;if(!_0x44187a&&_0x106a09['val']>ECO_TEMP+0.5){_0x45ef17[_0x2ecae1(0x151)]&&(_0x45ef17[_0x2ecae1(0xf6)][_0x2ecae1(0xe5)]('üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20'+_0x32d60c+_0x2ecae1(0x119)),_0x45ef17[_0x2ecae1(0x151)](_0x2ecae1(0x12c),{'room':_0x32d60c}));const _0x4301bd=_0x32d60c+'_'+new Date()[_0x2ecae1(0x11f)]();if(!_0x195c2e[_0x4301bd]){_0x195c2e[_0x4301bd]=0x1;if(!_0x195c2e[_0x2ecae1(0x110)])_0x195c2e['_meta']={};_0x195c2e[_0x2ecae1(0x110)][_0x4301bd]=Date[_0x2ecae1(0x10c)](),_0x618408=!![];}}else _0x44187a&&_0x45ef17[_0x2ecae1(0xf6)][_0x2ecae1(0xe5)](_0x2ecae1(0x172)+_0x32d60c+_0x2ecae1(0x10b));}else{if(_0x4a51e4==='too_cold'){let _0x391c1a=![];if(_0x22d024[_0x2ecae1(0xe3)](_0x25ef4d=>_0x25ef4d[_0x2ecae1(0x153)]===_0x32d60c))_0x391c1a=!![];const _0x59f1da=_0x3f904e['filter'](_0x5c67a7=>normalize(_0x5c67a7[_0x2ecae1(0x137)])===normalize(_0x32d60c)&&(_0x5c67a7['type']===_0x2ecae1(0x143)||_0x5c67a7[_0x2ecae1(0x112)]===_0x2ecae1(0xf1)||_0x5c67a7[_0x2ecae1(0x112)]==='contact'));for(const _0x25baeb of _0x59f1da){try{const _0x32ac47=await _0x45ef17['getForeignStateAsync'](_0x25baeb['id']);if(_0x32ac47&&(_0x32ac47[_0x2ecae1(0xd5)]===!![]||_0x32ac47[_0x2ecae1(0xd5)]===0x1||String(_0x32ac47[_0x2ecae1(0xd5)])[_0x2ecae1(0x123)]()===_0x2ecae1(0xde)))_0x391c1a=!![];}catch(_0x1798ec){}}if(_0x391c1a)_0x45ef17[_0x2ecae1(0xf6)][_0x2ecae1(0xe5)]('üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20'+_0x32d60c+_0x2ecae1(0xfa));else{const _0x18ae3f=_0x3046d4[_0x32d60c]||_0x3046d4[_0x2ecae1(0x18a)]||0x15;_0x45ef17[_0x2ecae1(0xf6)][_0x2ecae1(0xe5)](_0x2ecae1(0x177)+_0x32d60c+_0x2ecae1(0x16a)+_0x2e7716[_0x2ecae1(0xd5)]+_0x2ecae1(0xe8)+(_0x18ae3f+0.2)+'¬∞C).\x20Sparmodus\x20beendet!'),await _0x45ef17['setForeignStateAsync'](_0x3d588a,_0x18ae3f),await logAutomationAction(_0x45ef17,_0x2ecae1(0x171)+_0x32d60c+_0x2ecae1(0x150)+_0x18ae3f+'¬∞C'),lastActions[_0x2ecae1(0xf5)+_0x32d60c]=Date[_0x2ecae1(0x10c)]();}}}_0x289990['splice'](_0x45e1b2,0x1),_0x383058=!![];}}}}}_0x383058&&await _0x45ef17[_0x2ecae1(0xd0)](_0x113c68,{'val':JSON[_0x2ecae1(0x14b)](_0x289990),'ack':!![]}),_0x618408&&await _0x45ef17['setStateAsync'](_0x2ecae1(0x17b),{'val':JSON[_0x2ecae1(0x14b)](_0x195c2e),'ack':!![]});}catch(_0x5ae405){}}async function applyEnergySavings(_0x4d6083,_0x4691c5){const _0x55f36c=a1_0x2023d6;await cleanupGhostInterventions(_0x4d6083);if(!_0x4691c5||_0x4691c5[_0x55f36c(0x152)]===0x0)return;const _0x3b3e55=_0x4d6083[_0x55f36c(0x114)][_0x55f36c(0x191)]||[],_0x2d1f7a=Date[_0x55f36c(0x10c)]();for(const _0x2c0807 of _0x4691c5){const _0x3a22cc=_0x2c0807[_0x55f36c(0x153)],_0x590246=_0x2c0807[_0x55f36c(0xe0)],_0x2411ab=_0x2c0807[_0x55f36c(0xd3)]||0x15;if(lastActions['rescue_'+_0x3a22cc]&&_0x2d1f7a-lastActions[_0x55f36c(0xf5)+_0x3a22cc]<RESCUE_LOCK_MS)continue;const _0x419f7e=_0x3b3e55[_0x55f36c(0xe3)](_0x13ce31=>normalize(_0x13ce31[_0x55f36c(0x137)])===normalize(_0x3a22cc)&&(_0x13ce31[_0x55f36c(0x112)]===_0x55f36c(0x18f)||_0x13ce31['type']===_0x55f36c(0x17d)));if(!_0x419f7e)continue;const _0x363945=await findRelatedId(_0x4d6083,_0x419f7e['id'],_0x55f36c(0x12d));if(_0x363945){if(lastActions['mpc_'+_0x3a22cc]&&_0x2d1f7a-lastActions[_0x55f36c(0x134)+_0x3a22cc]<0x1e*0x3c*0x3e8)continue;const _0x46d16d=await _0x4d6083[_0x55f36c(0x196)](_0x363945);if(_0x46d16d&&typeof _0x46d16d[_0x55f36c(0xd5)]===_0x55f36c(0x16b)){const _0x1eb5f2=_0x46d16d[_0x55f36c(0xd5)];_0x1eb5f2!==ECO_TEMP&&await manageMpcIntervention(_0x4d6083,_0x3a22cc,_0x55f36c(0x15f));if(_0x590246>0x1e)_0x1eb5f2>ECO_TEMP+0.5&&(_0x4d6083[_0x55f36c(0xf6)][_0x55f36c(0xe5)]('üçÉ\x20[MPC\x20ACTION]\x20Senke\x20'+_0x3a22cc+_0x55f36c(0x14e)+ECO_TEMP+'¬∞C!\x20(Puffer:\x20'+_0x590246+_0x55f36c(0xf8)),await _0x4d6083[_0x55f36c(0x12e)](_0x363945,ECO_TEMP),await manageMpcIntervention(_0x4d6083,_0x3a22cc,_0x55f36c(0x140)),lastActions[_0x55f36c(0x134)+_0x3a22cc]=_0x2d1f7a,await logAutomationAction(_0x4d6083,_0x55f36c(0x113)+_0x3a22cc+':\x20Absenkung\x20auf\x20'+ECO_TEMP+'¬∞C'));else _0x590246<=0xf&&(_0x1eb5f2<_0x2411ab&&(_0x4d6083['log']['info'](_0x55f36c(0x164)+_0x3a22cc+_0x55f36c(0x187)+_0x2411ab+_0x55f36c(0x12a)),await _0x4d6083['setForeignStateAsync'](_0x363945,_0x2411ab),await manageMpcIntervention(_0x4d6083,_0x3a22cc,_0x55f36c(0x15f)),lastActions[_0x55f36c(0x134)+_0x3a22cc]=_0x2d1f7a,await logAutomationAction(_0x4d6083,_0x55f36c(0x113)+_0x3a22cc+_0x55f36c(0x16d)+_0x2411ab+'¬∞C')));}}else _0x4d6083[_0x55f36c(0xf6)]['warn'](_0x55f36c(0x17e)+_0x3a22cc+_0x55f36c(0x18d));}}module['exports']={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};