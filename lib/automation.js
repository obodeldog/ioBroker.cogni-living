const a1_0x1fe0f1=a1_0x4c52;(function(_0x2f192c,_0x255173){const _0x23028f=a1_0x4c52,_0x51abcf=_0x2f192c();while(!![]){try{const _0x1040ed=-parseInt(_0x23028f(0x15a))/0x1*(parseInt(_0x23028f(0x153))/0x2)+parseInt(_0x23028f(0x149))/0x3*(-parseInt(_0x23028f(0x1a9))/0x4)+-parseInt(_0x23028f(0x128))/0x5*(parseInt(_0x23028f(0x1e0))/0x6)+-parseInt(_0x23028f(0x13f))/0x7+-parseInt(_0x23028f(0x1d6))/0x8*(parseInt(_0x23028f(0x15e))/0x9)+parseInt(_0x23028f(0x162))/0xa+-parseInt(_0x23028f(0x146))/0xb*(-parseInt(_0x23028f(0x1ab))/0xc);if(_0x1040ed===_0x255173)break;else _0x51abcf['push'](_0x51abcf['shift']());}catch(_0x157c62){_0x51abcf['push'](_0x51abcf['shift']());}}}(a1_0x5ec5,0x98542));const a1_0x582e8f=(function(){let _0x519601=!![];return function(_0xb71c64,_0x5a9c8b){const _0x110af9=_0x519601?function(){if(_0x5a9c8b){const _0xa8bc85=_0x5a9c8b['apply'](_0xb71c64,arguments);return _0x5a9c8b=null,_0xa8bc85;}}:function(){};return _0x519601=![],_0x110af9;};}()),a1_0x2950e0=a1_0x582e8f(this,function(){const _0x42909e=a1_0x4c52;return a1_0x2950e0['toString']()['search']('(((.+)+)+)+$')[_0x42909e(0x1d0)]()[_0x42909e(0x1b8)](a1_0x2950e0)[_0x42909e(0x1b9)](_0x42909e(0x15f));});a1_0x2950e0();'use strict';const aiAgent=require(a1_0x1fe0f1(0x12e)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x90a085){const _0x1cd962=a1_0x1fe0f1;if(!_0x90a085)return'';return _0x90a085[_0x1cd962(0x152)]()[_0x1cd962(0x141)](/\s+/g,'')[_0x1cd962(0x1de)]();}function getWarmupRobust(_0x5b20d9,_0x5ed3e1){const _0x4e9e0f=a1_0x1fe0f1;if(!_0x5b20d9||!_0x5ed3e1)return 0x3c;if(_0x5b20d9[_0x5ed3e1]!==undefined)return _0x5b20d9[_0x5ed3e1];const _0x10654a=_0x5ed3e1['toLowerCase']()[_0x4e9e0f(0x141)](/√§/g,'ae')[_0x4e9e0f(0x141)](/√∂/g,'oe')[_0x4e9e0f(0x141)](/√º/g,'ue')[_0x4e9e0f(0x141)](/√ü/g,'ss')['replace'](/\s+/g,'_')['replace'](/[^a-z0-9_]/g,'');if(_0x5b20d9[_0x10654a]!==undefined)return _0x5b20d9[_0x10654a];return 0x3c;}async function logAutomationAction(_0x8ed8f1,_0x4ee07c){const _0x144cc7=a1_0x1fe0f1;await _0x8ed8f1[_0x144cc7(0x145)](_0x144cc7(0x129),{'val':_0x4ee07c,'ack':!![]});try{const _0x5d22d9=_0x144cc7(0x192),_0x177f9e=await _0x8ed8f1['getStateAsync'](_0x5d22d9);let _0x2343c2=[];if(_0x177f9e&&_0x177f9e['val'])try{_0x2343c2=JSON[_0x144cc7(0x1cd)](_0x177f9e[_0x144cc7(0x12f)]);}catch(_0x58f4ce){}_0x2343c2[_0x144cc7(0x139)]({'ts':Date[_0x144cc7(0x1d1)](),'msg':_0x4ee07c});if(_0x2343c2['length']>0x32)_0x2343c2=_0x2343c2[_0x144cc7(0x1e1)](0x0,0x32);await _0x8ed8f1['setStateAsync'](_0x5d22d9,{'val':JSON[_0x144cc7(0x1d5)](_0x2343c2),'ack':!![]});}catch(_0x52b46a){}}async function handlePrediction(_0x59e98d,_0x4ebb48,_0x2e2724){const _0x134e61=a1_0x1fe0f1;if(!_0x4ebb48||_0x4ebb48===_0x134e61(0x151))return;let _0x33f643=_0x134e61(0x17a),_0x3a9db3=0.6;try{const _0x97f019=await _0x59e98d[_0x134e61(0x1b7)](_0x134e61(0x186));if(_0x97f019&&_0x97f019[_0x134e61(0x12f)])_0x33f643=_0x97f019[_0x134e61(0x12f)];const _0x1a1ada=await _0x59e98d['getStateAsync'](_0x134e61(0x1a8));if(_0x1a1ada&&_0x1a1ada['val'])_0x3a9db3=_0x1a1ada[_0x134e61(0x12f)];}catch(_0x48228b){}if(_0x33f643===_0x134e61(0x17a)||_0x2e2724<_0x3a9db3)return;const _0x3a2a57=Date[_0x134e61(0x1d1)]();if(lastActions[_0x4ebb48]&&_0x3a2a57-lastActions[_0x4ebb48]<COOLDOWN_MS)return;const _0x45d664=_0x59e98d[_0x134e61(0x173)][_0x134e61(0x1da)]||[],_0x1b37e4=normalize(_0x4ebb48),_0x92912d=_0x45d664[_0x134e61(0x1ce)](_0x16ff4a=>normalize(_0x16ff4a['location'])===_0x1b37e4&&(_0x16ff4a['type']==='light'||_0x16ff4a[_0x134e61(0x1e7)]==='dimmer'||_0x16ff4a[_0x134e61(0x1e7)]===_0x134e61(0x182)));if(!_0x92912d)return;const _0x593f2e=await aiAgent['consultButler'](_0x59e98d,_0x4ebb48,_0x92912d[_0x134e61(0x127)],_0x2e2724);if(!_0x593f2e[_0x134e61(0x1b5)])return;const _0x492ceb='Pr√§diktion:\x20'+_0x4ebb48+'\x20->\x20Schalte\x20'+_0x92912d[_0x134e61(0x127)]+'\x20('+_0x593f2e['reason']+')';await logAutomationAction(_0x59e98d,'['+_0x33f643[_0x134e61(0x132)]()+']\x20'+_0x492ceb);if(_0x33f643===_0x134e61(0x1d2)){const _0x5c5426=await _0x59e98d['getForeignStateAsync'](_0x92912d['id']);(!_0x5c5426||!_0x5c5426[_0x134e61(0x12f)]&&_0x5c5426[_0x134e61(0x12f)]!==!![])&&await _0x59e98d[_0x134e61(0x1ad)](_0x92912d['id'],!![]),lastActions[_0x4ebb48]=_0x3a2a57;}}async function findRelatedId(_0x5ec6d7,_0x704aa5,_0x41d185=a1_0x1fe0f1(0x143)){const _0x5a8c3d=a1_0x1fe0f1;if(_0x41d185===_0x5a8c3d(0x143)&&_0x5ec6d7[_0x5a8c3d(0x173)][_0x5a8c3d(0x1c5)]){let _0x50545b=_0x5ec6d7[_0x5a8c3d(0x173)]['thermostatMapping'];if(typeof _0x50545b===_0x5a8c3d(0x16e))try{_0x50545b=JSON[_0x5a8c3d(0x1cd)](_0x50545b);}catch(_0x147fff){}if(_0x50545b&&_0x50545b[_0x704aa5])return _0x50545b[_0x704aa5];}if(_0x41d185===_0x5a8c3d(0x164)&&_0x5ec6d7[_0x5a8c3d(0x173)][_0x5a8c3d(0x144)]){let _0x22acb2=_0x5ec6d7[_0x5a8c3d(0x173)]['valveMapping'];if(typeof _0x22acb2==='string')try{_0x22acb2=JSON[_0x5a8c3d(0x1cd)](_0x22acb2);}catch(_0x1d3a5e){}if(_0x22acb2&&_0x22acb2[_0x704aa5])return _0x22acb2[_0x704aa5];}let _0x2b44ba=[];if(_0x41d185==='setpoint')_0x2b44ba=[{'s':'.1.ACTUAL_TEMPERATURE','t':_0x5a8c3d(0x14e)},{'s':_0x5a8c3d(0x19d),'t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x5a8c3d(0x19d),'t':_0x5a8c3d(0x1a1)},{'s':'ACTUAL_TEMPERATURE','t':_0x5a8c3d(0x165)},{'s':'local_temperature','t':_0x5a8c3d(0x1af)},{'s':_0x5a8c3d(0x157),'t':_0x5a8c3d(0x1cb)},{'s':_0x5a8c3d(0x1a3),'t':_0x5a8c3d(0x1ba)},{'s':'ACTUAL','t':_0x5a8c3d(0x148)},{'s':_0x5a8c3d(0x193),'t':_0x5a8c3d(0x130)},{'s':_0x5a8c3d(0x1a3),'t':'setpoint'}];else _0x41d185===_0x5a8c3d(0x164)&&(_0x2b44ba=[{'s':_0x5a8c3d(0x1d8),'t':_0x5a8c3d(0x142)},{'s':_0x5a8c3d(0x19d),'t':_0x5a8c3d(0x142)},{'s':_0x5a8c3d(0x19d),'t':_0x5a8c3d(0x1c8)},{'s':_0x5a8c3d(0x157),'t':_0x5a8c3d(0x156)},{'s':_0x5a8c3d(0x1a3),'t':_0x5a8c3d(0x14d)},{'s':_0x5a8c3d(0x1a3),'t':'level'}]);for(const _0x17e244 of _0x2b44ba){if(_0x704aa5[_0x5a8c3d(0x1bc)](_0x17e244['s'])){const _0x4217ea=_0x704aa5[_0x5a8c3d(0x141)](_0x17e244['s'],_0x17e244['t']),_0x1d2146=await _0x5ec6d7['getForeignObjectAsync'](_0x4217ea);if(_0x1d2146)return _0x4217ea;}}try{const _0x531b1b=_0x704aa5['split']('.');if(_0x531b1b[_0x5a8c3d(0x17f)]>0x2){const _0x4b96e7=_0x531b1b[_0x5a8c3d(0x1e1)](0x0,-0x1)[_0x5a8c3d(0x1b1)]('.'),_0x522514=await _0x5ec6d7['getForeignObjectsAsync'](_0x4b96e7+'.*'),_0x424778=[],_0x2f149d=_0x704aa5[_0x5a8c3d(0x172)](/[._]+/)[_0x5a8c3d(0x18a)](_0x3b4eed=>!['openknx','0',_0x5a8c3d(0x1c9),_0x5a8c3d(0x169),_0x5a8c3d(0x1c1),'temperature','actual',_0x5a8c3d(0x13a),_0x5a8c3d(0x1cc),'state']['includes'](_0x3b4eed[_0x5a8c3d(0x152)]()));for(const [_0x4a8b9e,_0x10312a]of Object['entries'](_0x522514)){if(_0x4a8b9e===_0x704aa5)continue;if(_0x10312a&&_0x10312a['common']){const _0x4c0fd8=_0x4a8b9e[_0x5a8c3d(0x152)](),_0x46cd1a=(_0x10312a['common'][_0x5a8c3d(0x1d3)]||'')[_0x5a8c3d(0x152)](),_0x4d0ca5=(_0x10312a[_0x5a8c3d(0x137)]['unit']||'')[_0x5a8c3d(0x152)]();let _0x44a3d7=![];if(_0x41d185===_0x5a8c3d(0x143)&&_0x10312a[_0x5a8c3d(0x137)][_0x5a8c3d(0x1bb)]===!![])_0x44a3d7=_0x4c0fd8[_0x5a8c3d(0x1bc)](_0x5a8c3d(0x1e5))||_0x4c0fd8[_0x5a8c3d(0x1bc)]('soll')||_0x4c0fd8[_0x5a8c3d(0x1bc)](_0x5a8c3d(0x1d7))||_0x46cd1a[_0x5a8c3d(0x1bc)](_0x5a8c3d(0x18c))||_0x46cd1a[_0x5a8c3d(0x1bc)](_0x5a8c3d(0x159));else _0x41d185==='valve'&&(_0x44a3d7=_0x4c0fd8[_0x5a8c3d(0x1bc)]('level')||_0x4c0fd8[_0x5a8c3d(0x1bc)](_0x5a8c3d(0x164))||_0x4c0fd8[_0x5a8c3d(0x1bc)](_0x5a8c3d(0x163))||_0x4c0fd8[_0x5a8c3d(0x1bc)](_0x5a8c3d(0x199))||_0x46cd1a['includes']('level.valve')||_0x46cd1a['includes'](_0x5a8c3d(0x196))||_0x4d0ca5[_0x5a8c3d(0x1bc)]('%'));if(_0x44a3d7){const _0x247db2=_0x4a8b9e[_0x5a8c3d(0x172)](/[._]+/)['map'](_0x274900=>_0x274900[_0x5a8c3d(0x152)]());let _0x1d992d=0x0;_0x2f149d[_0x5a8c3d(0x16c)](_0x15d19c=>{const _0x106839=_0x5a8c3d;if(_0x247db2[_0x106839(0x1bc)](_0x15d19c[_0x106839(0x152)]()))_0x1d992d++;}),_0x424778[_0x5a8c3d(0x185)]({'id':_0x4a8b9e,'score':_0x1d992d});}}}if(_0x424778[_0x5a8c3d(0x17f)]>0x0){_0x424778[_0x5a8c3d(0x194)]((_0x444c30,_0x582fe3)=>_0x582fe3[_0x5a8c3d(0x184)]-_0x444c30[_0x5a8c3d(0x184)]);if(_0x424778[0x0][_0x5a8c3d(0x184)]>0x0)return _0x424778[0x0]['id'];}}}catch(_0x466d5f){}return null;}async function scanThermostats(_0x2a00c1){const _0x310837=a1_0x1fe0f1,_0x3df973=_0x2a00c1[_0x310837(0x173)][_0x310837(0x1da)]||[],_0x23bdff=[],_0x1b39a3=_0x3df973[_0x310837(0x18a)](_0x577f6a=>_0x577f6a['id']&&_0x577f6a['id']['includes'](_0x310837(0x1a3))||_0x577f6a[_0x310837(0x1e7)]&&['temperature',_0x310837(0x178),_0x310837(0x13a)]['includes'](_0x577f6a[_0x310837(0x1e7)])||_0x577f6a[_0x310837(0x127)]&&_0x577f6a[_0x310837(0x127)]['toLowerCase']()[_0x310837(0x1bc)]('temp'));for(const _0xe4a2b6 of _0x1b39a3){const _0x3bba5e=await findRelatedId(_0x2a00c1,_0xe4a2b6['id'],_0x310837(0x143)),_0xe889e=await findRelatedId(_0x2a00c1,_0xe4a2b6['id'],_0x310837(0x164));let _0x278094=_0x310837(0x158),_0x1322f4=![],_0x5debc1=_0x2a00c1[_0x310837(0x173)]['thermostatMapping']||{};if(typeof _0x5debc1==='string')try{_0x5debc1=JSON[_0x310837(0x1cd)](_0x5debc1);}catch(_0x2a3fb7){}let _0x259d56=_0x2a00c1[_0x310837(0x173)][_0x310837(0x144)]||{};if(typeof _0x259d56===_0x310837(0x16e))try{_0x259d56=JSON['parse'](_0x259d56);}catch(_0x52e063){}if(_0x5debc1[_0xe4a2b6['id']]&&_0x5debc1[_0xe4a2b6['id']]===_0x3bba5e||_0x259d56[_0xe4a2b6['id']]&&_0x259d56[_0xe4a2b6['id']]===_0xe889e)_0x278094=_0x310837(0x19e),_0x1322f4=!![];else(_0x3bba5e||_0xe889e)&&(_0x278094=_0x310837(0x190));_0x23bdff['push']({'room':_0xe4a2b6[_0x310837(0x183)]||_0x310837(0x1e4),'sensorId':_0xe4a2b6['id'],'setpointId':_0x3bba5e||'-','valveId':_0xe889e||'-','source':_0x278094,'isManual':_0x1322f4,'status':_0x3bba5e&&_0xe889e?_0x310837(0x140):_0x3bba5e?'OK':_0x310837(0x136)});}return _0x23bdff['sort']((_0x2229b9,_0x2bedf9)=>_0x2229b9[_0x310837(0x150)][_0x310837(0x14a)](_0x2bedf9[_0x310837(0x150)]));}async function updateSchedulePreview(_0x1a18d1){const _0x421625=a1_0x1fe0f1;if(!_0x1a18d1[_0x421625(0x173)][_0x421625(0x179)]||!_0x1a18d1[_0x421625(0x173)]['calendarInstance'])return;let _0x44d916={};try{const _0x232515=await _0x1a18d1[_0x421625(0x1b7)]('analysis.energy.warmupTimes');if(_0x232515&&_0x232515['val'])_0x44d916=JSON['parse'](_0x232515[_0x421625(0x12f)]);}catch(_0xbeb5c1){}const _0x26dc3c=[],_0x1ba991=Date['now'](),_0x170bb0=0x30*0x3c*0x3c*0x3e8;try{const _0x4ea0a8=await _0x1a18d1[_0x421625(0x14c)](_0x1a18d1[_0x421625(0x173)][_0x421625(0x1ac)]+_0x421625(0x15b));if(!_0x4ea0a8||!_0x4ea0a8[_0x421625(0x12f)])return;const _0x240aa9=JSON[_0x421625(0x1cd)](_0x4ea0a8[_0x421625(0x12f)]),_0x5af93e=_0x1a18d1[_0x421625(0x173)][_0x421625(0x168)]||[],_0xca3617=_0x1a18d1[_0x421625(0x173)][_0x421625(0x1da)]||[],_0x48b685=new Set();_0xca3617[_0x421625(0x16c)](_0x380395=>{const _0x4dfede=_0x421625;if(_0x380395[_0x4dfede(0x183)])_0x48b685['add'](_0x380395['location']);});for(const _0x2719e6 of _0x240aa9){if(_0x2719e6[_0x421625(0x1cf)]&&_0x5af93e[_0x421625(0x17f)]>0x0&&!_0x5af93e['includes'](_0x2719e6[_0x421625(0x1cf)]))continue;const _0x3b9d8c=_0x2719e6[_0x421625(0x1db)]||_0x2719e6[_0x421625(0x1a5)]||_0x2719e6[_0x421625(0x131)];if(!_0x3b9d8c)continue;const _0xcb5799=new Date(_0x3b9d8c),_0x5a951c=_0xcb5799['getTime']();if(isNaN(_0x5a951c))continue;if(_0x5a951c<_0x1ba991)continue;if(_0x5a951c>_0x1ba991+_0x170bb0)continue;const _0x1e9589=(_0x2719e6[_0x421625(0x1ae)]||_0x2719e6[_0x421625(0x17d)]||'')[_0x421625(0x152)]();let _0x2fd885=![],_0x452924=[],_0x72b722=_0x2719e6['event']||_0x2719e6['summary']||_0x421625(0x1e4);if(_0x1e9589[_0x421625(0x1bc)](_0x421625(0x174))||_0x1e9589[_0x421625(0x1bc)](_0x421625(0x176))||_0x1e9589['includes']('ankunft'))_0x2fd885=!![],_0x452924=Array[_0x421625(0x1dd)](_0x48b685);else for(const _0x276a0a of _0x48b685){if(_0x1e9589['includes'](_0x276a0a[_0x421625(0x152)]()))_0x452924[_0x421625(0x185)](_0x276a0a);}_0x452924[_0x421625(0x17f)]>0x0&&_0x452924['forEach'](_0x1b895b=>{const _0x5f05cd=_0x421625;let _0x1323e9=0x3c;if(_0x2fd885){let _0x14e3c0=0x0;Object[_0x5f05cd(0x17b)](_0x44d916)['forEach'](_0x42032a=>{if(_0x42032a>_0x14e3c0)_0x14e3c0=_0x42032a;}),_0x1323e9=_0x14e3c0>0x0?_0x14e3c0:0x78;}else _0x1323e9=getWarmupRobust(_0x44d916,_0x1b895b);const _0x16b45d=new Date(_0x5a951c-_0x1323e9*0xea60);_0x26dc3c[_0x5f05cd(0x185)]({'eventTime':_0x5a951c,'triggerTime':_0x16b45d['getTime'](),'room':_0x1b895b,'minutes':_0x1323e9,'reason':_0x72b722,'isGlobal':_0x2fd885});});}}catch(_0x2d888f){}_0x26dc3c[_0x421625(0x194)]((_0x987ddb,_0x48894a)=>_0x987ddb[_0x421625(0x1e2)]-_0x48894a[_0x421625(0x1e2)]);const _0x1997f7=_0x26dc3c[_0x421625(0x1e1)](0x0,0x5);await _0x1a18d1['setStateAsync']('analysis.energy.schedulePreview',{'val':JSON[_0x421625(0x1d5)](_0x1997f7),'ack':!![]});}function a1_0x4c52(_0x18d79d,_0x373750){const _0x59df21=a1_0x5ec5();return a1_0x4c52=function(_0x2950e0,_0x582e8f){_0x2950e0=_0x2950e0-0x127;let _0x5ec523=_0x59df21[_0x2950e0];return _0x5ec523;},a1_0x4c52(_0x18d79d,_0x373750);}async function monitorEnforcements(_0x493f0d){const _0x569bdf=a1_0x1fe0f1;try{const _0x188937=_0x569bdf(0x16a),_0x542aef=await _0x493f0d['getStateAsync'](_0x188937);if(!_0x542aef||!_0x542aef['val'])return;let _0x260f4b=[];try{_0x260f4b=JSON[_0x569bdf(0x1cd)](_0x542aef[_0x569bdf(0x12f)]);}catch(_0x1ebbe7){return;}if(!Array['isArray'](_0x260f4b)||_0x260f4b['length']===0x0)return;const _0x1ed851=Date[_0x569bdf(0x1d1)](),_0xc2929b=_0x493f0d[_0x569bdf(0x173)][_0x569bdf(0x1da)]||[];let _0x3c4e92=![];for(let _0x1e74b0=_0x260f4b[_0x569bdf(0x17f)]-0x1;_0x1e74b0>=0x0;_0x1e74b0--){const _0x5943ec=_0x260f4b[_0x1e74b0];if(_0x1ed851>=_0x5943ec[_0x569bdf(0x1b2)]){_0x493f0d['log'][_0x569bdf(0x13b)](_0x569bdf(0x187)+_0x5943ec[_0x569bdf(0x150)]+_0x569bdf(0x166)),_0x260f4b[_0x569bdf(0x1d4)](_0x1e74b0,0x1),_0x3c4e92=!![];continue;}const _0x2cd5f1=_0xc2929b[_0x569bdf(0x1ce)](_0x4e03c7=>normalize(_0x4e03c7['location'])===normalize(_0x5943ec[_0x569bdf(0x150)])&&(_0x4e03c7[_0x569bdf(0x1e7)]===_0x569bdf(0x1a3)||_0x4e03c7[_0x569bdf(0x1e7)]===_0x569bdf(0x178)));if(_0x2cd5f1){const _0x405822=await findRelatedId(_0x493f0d,_0x2cd5f1['id'],_0x569bdf(0x143));if(_0x405822){const _0x4c7106=await _0x493f0d['getForeignStateAsync'](_0x405822);_0x4c7106&&typeof _0x4c7106[_0x569bdf(0x12f)]===_0x569bdf(0x1b6)&&(_0x4c7106[_0x569bdf(0x12f)]<0xf&&(_0x493f0d[_0x569bdf(0x177)][_0x569bdf(0x181)]('üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x5943ec[_0x569bdf(0x150)]+_0x569bdf(0x1e3)+_0x4c7106[_0x569bdf(0x12f)]+_0x569bdf(0x1aa)+_0x5943ec[_0x569bdf(0x1d7)]+_0x569bdf(0x189)),await _0x493f0d[_0x569bdf(0x1ad)](_0x405822,_0x5943ec[_0x569bdf(0x1d7)]),await logAutomationAction(_0x493f0d,'[FORCE]\x20'+_0x5943ec[_0x569bdf(0x150)]+':\x20'+_0x4c7106[_0x569bdf(0x12f)]+_0x569bdf(0x1c6)+_0x5943ec[_0x569bdf(0x1d7)]+_0x569bdf(0x1e6))));}}}_0x3c4e92&&await _0x493f0d[_0x569bdf(0x145)](_0x188937,{'val':JSON[_0x569bdf(0x1d5)](_0x260f4b),'ack':!![]});}catch(_0x658dc8){_0x493f0d['log']['error'](_0x569bdf(0x15c)+_0x658dc8['message']);}}async function checkCalendarTriggers(_0x347fb8){const _0x1709ac=a1_0x1fe0f1;if(!_0x347fb8[_0x1709ac(0x173)][_0x1709ac(0x179)]||!_0x347fb8['config'][_0x1709ac(0x1ac)])return;await updateSchedulePreview(_0x347fb8);let _0x407cf2={},_0x12d7d4={};try{const _0x35b2c1=await _0x347fb8['getStateAsync']('analysis.energy.warmupTimes');if(_0x35b2c1&&_0x35b2c1[_0x1709ac(0x12f)])_0x407cf2=JSON[_0x1709ac(0x1cd)](_0x35b2c1[_0x1709ac(0x12f)]);const _0xc78ed4=await _0x347fb8[_0x1709ac(0x1b7)](_0x1709ac(0x135));if(_0xc78ed4&&_0xc78ed4[_0x1709ac(0x12f)])_0x12d7d4=JSON[_0x1709ac(0x1cd)](_0xc78ed4['val']);}catch(_0x57419d){}let _0x257284={'default':0x15};try{const _0x581937=await _0x347fb8[_0x1709ac(0x1b7)](_0x1709ac(0x19b));if(_0x581937&&_0x581937[_0x1709ac(0x12f)])_0x257284=JSON[_0x1709ac(0x1cd)](_0x581937[_0x1709ac(0x12f)]);}catch(_0x39bdc0){}let _0x19bdd1=[];try{const _0x333774=await _0x347fb8[_0x1709ac(0x1b7)](_0x1709ac(0x16a));if(_0x333774&&_0x333774[_0x1709ac(0x12f)])_0x19bdd1=JSON[_0x1709ac(0x1cd)](_0x333774['val']);}catch(_0x4e20d6){}try{const _0x5f21f2=await _0x347fb8[_0x1709ac(0x14c)](_0x347fb8[_0x1709ac(0x173)][_0x1709ac(0x1ac)]+_0x1709ac(0x15b));if(!_0x5f21f2||!_0x5f21f2[_0x1709ac(0x12f)])return;const _0x2126e7=JSON[_0x1709ac(0x1cd)](_0x5f21f2[_0x1709ac(0x12f)]),_0x41bfe8=Date[_0x1709ac(0x1d1)](),_0x2a5b42=_0x347fb8['config'][_0x1709ac(0x1da)]||[],_0x2b6026=_0x347fb8[_0x1709ac(0x173)][_0x1709ac(0x168)]||[];let _0x56a123=![];for(const _0x28002b of _0x2126e7){if(_0x28002b[_0x1709ac(0x1cf)]&&_0x2b6026[_0x1709ac(0x17f)]>0x0&&!_0x2b6026[_0x1709ac(0x1bc)](_0x28002b[_0x1709ac(0x1cf)]))continue;const _0x139397=_0x28002b[_0x1709ac(0x1db)]||_0x28002b['eventStart']||_0x28002b[_0x1709ac(0x131)];if(!_0x139397)continue;const _0x145f3e=new Date(_0x139397);if(isNaN(_0x145f3e[_0x1709ac(0x14f)]()))continue;const _0x485870=(_0x28002b[_0x1709ac(0x1ae)]||_0x28002b[_0x1709ac(0x17d)]||'')[_0x1709ac(0x152)]();if(_0x485870[_0x1709ac(0x1bc)](_0x1709ac(0x174))||_0x485870['includes']('r√ºckkehr')||_0x485870[_0x1709ac(0x1bc)]('ankunft')){let _0x461525=0x0;Object[_0x1709ac(0x17b)](_0x407cf2)[_0x1709ac(0x16c)](_0x47af9a=>{if(_0x47af9a>_0x461525)_0x461525=_0x47af9a;});if(_0x461525===0x0)_0x461525=0x78;const _0x440ce0=_0x145f3e[_0x1709ac(0x14f)]()-_0x461525*0xea60;_0x41bfe8>=_0x440ce0&&_0x41bfe8<_0x145f3e['getTime']()&&(_0x347fb8[_0x1709ac(0x197)]!==_0x1709ac(0x1b4)&&(_0x347fb8[_0x1709ac(0x177)][_0x1709ac(0x13b)](_0x1709ac(0x1df)+_0x461525+'\x20min).'),await _0x347fb8[_0x1709ac(0x145)](_0x1709ac(0x19f),{'val':_0x1709ac(0x1b4),'ack':![]})));}for(const _0x20b5d3 of _0x2a5b42){if(_0x20b5d3[_0x1709ac(0x183)]){const _0x4fd1e6=_0x20b5d3[_0x1709ac(0x183)][_0x1709ac(0x152)](),_0x251081=(_0x20b5d3[_0x1709ac(0x127)]||'')[_0x1709ac(0x152)]();let _0x253693=_0x485870['includes'](_0x4fd1e6);!_0x253693&&_0x251081[_0x1709ac(0x17f)]>0x3&&_0x485870[_0x1709ac(0x1bc)](_0x251081)&&(_0x253693=!![]);if(_0x253693){const _0xe561ea=getWarmupRobust(_0x407cf2,_0x20b5d3[_0x1709ac(0x183)]),_0x175695=_0x12d7d4[_0x20b5d3[_0x1709ac(0x183)]]||_0x1709ac(0x1c7),_0x2e3fe7=_0x145f3e[_0x1709ac(0x14f)]()-_0xe561ea*0xea60;if(_0x41bfe8>=_0x2e3fe7&&_0x41bfe8<_0x145f3e[_0x1709ac(0x14f)]()){const _0x5593db=lastActions[_0x1709ac(0x195)+_0x20b5d3[_0x1709ac(0x183)]];if(_0x5593db&&_0x41bfe8-_0x5593db<CAL_COOLDOWN_MS)continue;const _0x66c177=await findRelatedId(_0x347fb8,_0x20b5d3['id'],'setpoint');if(_0x66c177){let _0x11706a=_0x257284[_0x20b5d3['location']];if(_0x11706a===undefined)_0x11706a=_0x257284['default'];if(_0x11706a===undefined)_0x11706a=0x15;const _0x99ac03=await _0x347fb8[_0x1709ac(0x14c)](_0x66c177);if(_0x99ac03&&typeof _0x99ac03[_0x1709ac(0x12f)]===_0x1709ac(0x1b6)&&_0x99ac03[_0x1709ac(0x12f)]<_0x11706a-0.5){_0x347fb8['log'][_0x1709ac(0x13b)](_0x1709ac(0x16d)+_0x175695+_0x1709ac(0x13d)+_0x20b5d3[_0x1709ac(0x183)]+_0x1709ac(0x191)+_0x485870+_0x1709ac(0x12b)+_0x11706a+_0x1709ac(0x12d)+_0xe561ea+'\x20min).'),await _0x347fb8[_0x1709ac(0x1ad)](_0x66c177,_0x11706a),await logAutomationAction(_0x347fb8,'[CAL]\x20'+_0x20b5d3[_0x1709ac(0x183)]+_0x1709ac(0x16f)+_0x11706a+_0x1709ac(0x1a6)+_0x175695+')'),lastActions[_0x1709ac(0x195)+_0x20b5d3[_0x1709ac(0x183)]]=_0x41bfe8;const _0x244a05=_0x19bdd1[_0x1709ac(0x155)](_0x339916=>_0x339916[_0x1709ac(0x150)]===_0x20b5d3[_0x1709ac(0x183)]);if(_0x244a05!==-0x1)_0x19bdd1['splice'](_0x244a05,0x1);_0x19bdd1[_0x1709ac(0x185)]({'room':_0x20b5d3[_0x1709ac(0x183)],'target':_0x11706a,'until':_0x145f3e[_0x1709ac(0x14f)]()}),_0x56a123=!![];}}}}}}}_0x56a123&&await _0x347fb8['setStateAsync']('analysis.energy.activeEnforcements',{'val':JSON['stringify'](_0x19bdd1),'ack':!![]});}catch(_0x54b60e){_0x347fb8[_0x1709ac(0x177)][_0x1709ac(0x181)]('Calendar\x20Check\x20Error:\x20'+_0x54b60e['message']);}}async function manageMpcIntervention(_0x20c616,_0x4bc0f7,_0x5c62d6){const _0x436f40=a1_0x1fe0f1;try{const _0x1c6758=_0x436f40(0x138),_0x2f6b05=await _0x20c616[_0x436f40(0x1b7)](_0x1c6758);let _0x108720=[];if(_0x2f6b05&&_0x2f6b05[_0x436f40(0x12f)])try{_0x108720=JSON[_0x436f40(0x1cd)](_0x2f6b05[_0x436f40(0x12f)]);}catch(_0x3e6446){}const _0x240a88=_0x108720[_0x436f40(0x171)](_0x4bc0f7);if(_0x5c62d6===_0x436f40(0x1b0))_0x240a88===-0x1&&(_0x108720[_0x436f40(0x185)](_0x4bc0f7),await _0x20c616['setStateAsync'](_0x1c6758,{'val':JSON[_0x436f40(0x1d5)](_0x108720),'ack':!![]}));else _0x5c62d6===_0x436f40(0x1be)&&(_0x240a88!==-0x1&&(_0x108720[_0x436f40(0x1d4)](_0x240a88,0x1),await _0x20c616[_0x436f40(0x145)](_0x1c6758,{'val':JSON[_0x436f40(0x1d5)](_0x108720),'ack':!![]})));}catch(_0xf8df18){}}function a1_0x5ec5(){const _0x12161b=['search','target_temperature','write','includes','analysis.energy.rlPenalties','remove','üö®\x20[MPC\x20WATCHDOG]\x20','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','wert','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','open','abs','thermostatMapping','¬∞C\x20->\x20','Classic','.4.VALVE_STATE','hm-rpc','¬∞C!\x20(Puffer:\x20','current_heating_setpoint','messwert','parse','find','_calName','toString','now','active','role','splice','stringify','2488POLXBl','target','.1.ACTUAL_TEMPERATURE','sendToPythonWrapper','devices','_date','analysis.energy.ventilationAlerts','from','trim','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','402SvkxDa','slice','triggerTime','\x20auf\x20','Unbekannt','set','¬∞C\x20(Kalender-Schutz)','type','name','15305rqmPcP','analysis.automation.lastAction','\x20ist\x20auf\x20',')\x20aktiv.\x20Heize\x20auf\x20','getHours','¬∞C\x20(Vorlauf:\x20','./ai_agent','val','Soll','date','toUpperCase','\x20wieder\x20auf\x20','mpc_','analysis.energy.warmupSources','Fehlt','common','analysis.energy.mpcActiveInterventions','unshift','sensor','info','too_cold',']:\x20Raum-Trigger\x20\x27',':\x20Absenkung\x20auf\x20','3817639vGivQE','PERFECT','replace','.1.LEVEL','setpoint','valveMapping','setStateAsync','30966353eHEUOD','rescue_','SET','3YBOePs','localeCompare','üî•\x20[MPC\x20ACTION]\x20Heize\x20','getForeignStateAsync','valve_position','.1.SET_POINT_TEMPERATURE','getTime','room','Unknown','toLowerCase','2LoPGxH','¬∞C!\x20(Puffer\x20leer).','findIndex','pi_heating_demand','local_temperature','Nicht\x20gefunden','thermostat.setpoint','13942sqonrM','.data.table','Enforcement\x20Monitor\x20Error:\x20','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20','18999NPGPWn','(((.+)+)+)+$','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','entries','954190XwVjSr','stellwert','valve','SET_POINT_TEMPERATURE','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.',':\x20Aufheizen\x20auf\x20','calendarSelection','ist','analysis.energy.activeEnforcements','window','forEach','üìÖ\x20SMART\x20SCHEDULE\x20[','string','\x20->\x20','[MPC]\x20','indexOf','split','config','urlaub\x20ende','¬∞C\x20<\x20','r√ºckkehr','log','thermostat','useCalendar','off','values','\x20gefunden!','summary','¬∞C).\x20Sparmodus\x20beendet!','length','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','warn','switch','location','score','push','analysis.automation.mode','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','minutes_safe','¬∞C.','filter','\x20min)','level.temperature',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','_meta','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','Auto-Erkennung','\x27\x20(Match:\x20','analysis.automation.actionLog','Ist','sort','cal_','value.valve','currentSystemMode','default','position','manual','analysis.energy.warmupTargets','üßπ\x20[MPC\x20CLEANUP]\x20','.1.TEMPERATURE','Manuelles\x20Mapping','system.mode','TRAIN_RL_PENALTY','.4.SET_TEMPERATURE','contact','temperature','\x20wurde\x20manuell\x20erh√∂ht.','eventStart','¬∞C\x20(via\x20','isArray','analysis.automation.confidenceThreshold','3462708aBkmjU','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','12GNZCmk','calendarInstance','setForeignStateAsync','event','occupied_heating_setpoint','add','join','until','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','normal','approved','number','getStateAsync','constructor'];a1_0x5ec5=function(){return _0x12161b;};return a1_0x5ec5();}async function cleanupGhostInterventions(_0x542bc5){const _0x202df6=a1_0x1fe0f1;try{const _0x5ec971='analysis.energy.mpcActiveInterventions',_0x221f1c=await _0x542bc5['getStateAsync'](_0x5ec971);if(!_0x221f1c||!_0x221f1c['val'])return;const _0x136180=JSON[_0x202df6(0x1cd)](_0x221f1c[_0x202df6(0x12f)]);if(!Array[_0x202df6(0x1a7)](_0x136180)||_0x136180[_0x202df6(0x17f)]===0x0)return;let _0x539acd={'default':0x15};try{const _0x233e3e=await _0x542bc5[_0x202df6(0x1b7)]('analysis.energy.warmupTargets');if(_0x233e3e&&_0x233e3e[_0x202df6(0x12f)])_0x539acd=JSON[_0x202df6(0x1cd)](_0x233e3e['val']);}catch(_0xa930b2){}let _0x5bd8c2=[];try{const _0x13074f=await _0x542bc5[_0x202df6(0x1b7)](_0x202df6(0x1dc));if(_0x13074f&&_0x13074f[_0x202df6(0x12f)])_0x5bd8c2=JSON[_0x202df6(0x1cd)](_0x13074f[_0x202df6(0x12f)]);}catch(_0x5bdb10){}let _0x145848={},_0x14d3fe=![];try{const _0x360deb=await _0x542bc5[_0x202df6(0x1b7)]('analysis.energy.rlPenalties');if(_0x360deb&&_0x360deb[_0x202df6(0x12f)])_0x145848=JSON[_0x202df6(0x1cd)](_0x360deb['val']);}catch(_0x2af22b){}if(_0x145848[_0x202df6(0x18e)]){const _0x5a3135=Date['now']();for(const [_0xaca6c0,_0x58f0c7]of Object[_0x202df6(0x161)](_0x145848[_0x202df6(0x18e)])){_0x5a3135-_0x58f0c7>PENALTY_TTL&&(delete _0x145848[_0xaca6c0],delete _0x145848[_0x202df6(0x18e)][_0xaca6c0],_0x14d3fe=!![],_0x542bc5[_0x202df6(0x177)][_0x202df6(0x13b)](_0x202df6(0x1c2)+_0xaca6c0+_0x202df6(0x180)));}}const _0xca14ca=_0x542bc5['config'][_0x202df6(0x1da)]||[];let _0x2823a6=![];for(let _0x41e672=_0x136180[_0x202df6(0x17f)]-0x1;_0x41e672>=0x0;_0x41e672--){const _0x1d265f=_0x136180[_0x41e672],_0x3f8b95=_0xca14ca[_0x202df6(0x1ce)](_0xad91e6=>normalize(_0xad91e6[_0x202df6(0x183)])===normalize(_0x1d265f)&&(_0xad91e6[_0x202df6(0x1e7)]===_0x202df6(0x1a3)||_0xad91e6[_0x202df6(0x1e7)]==='thermostat'));if(!_0x3f8b95){_0x542bc5[_0x202df6(0x177)][_0x202df6(0x181)](_0x202df6(0x18f)+_0x1d265f+'\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.'),_0x136180['splice'](_0x41e672,0x1),_0x2823a6=!![];continue;}if(_0x3f8b95){const _0x2d818f=await findRelatedId(_0x542bc5,_0x3f8b95['id'],_0x202df6(0x143)),_0x184658=await _0x542bc5[_0x202df6(0x14c)](_0x3f8b95['id']);if(_0x2d818f){const _0x56422f=await _0x542bc5[_0x202df6(0x14c)](_0x2d818f);if(_0x56422f&&typeof _0x56422f[_0x202df6(0x12f)]===_0x202df6(0x1b6)){let _0x286c9=![],_0x4fad65='';Math[_0x202df6(0x1c4)](_0x56422f[_0x202df6(0x12f)]-ECO_TEMP)>0.5&&(_0x286c9=!![],_0x4fad65=_0x202df6(0x19a));if(!_0x286c9&&_0x184658&&typeof _0x184658[_0x202df6(0x12f)]===_0x202df6(0x1b6)){const _0x4049eb=_0x539acd[_0x1d265f]||_0x539acd[_0x202df6(0x198)]||0x15;_0x184658[_0x202df6(0x12f)]<_0x4049eb+0.2&&(_0x286c9=!![],_0x4fad65=_0x202df6(0x13c));}if(_0x286c9){if(_0x4fad65===_0x202df6(0x19a)){_0x542bc5[_0x202df6(0x177)]['info'](_0x202df6(0x19c)+_0x1d265f+_0x202df6(0x12a)+_0x56422f[_0x202df6(0x12f)]+'¬∞C\x20(nicht\x20'+ECO_TEMP+'¬∞C).\x20Entferne\x20Status.');const _0x136590=lastActions[_0x202df6(0x195)+_0x1d265f],_0x3662ec=_0x136590&&Date[_0x202df6(0x1d1)]()-_0x136590<0x2*0x3c*0x3e8;if(!_0x3662ec&&_0x56422f[_0x202df6(0x12f)]>ECO_TEMP+0.5){_0x542bc5[_0x202df6(0x1d9)]&&(_0x542bc5['log']['info'](_0x202df6(0x160)+_0x1d265f+_0x202df6(0x1a4)),_0x542bc5[_0x202df6(0x1d9)](_0x202df6(0x1a0),{'room':_0x1d265f}));const _0x53b2ca=_0x1d265f+'_'+new Date()[_0x202df6(0x12c)]();if(!_0x145848[_0x53b2ca]){_0x145848[_0x53b2ca]=0x1;if(!_0x145848[_0x202df6(0x18e)])_0x145848['_meta']={};_0x145848[_0x202df6(0x18e)][_0x53b2ca]=Date['now'](),_0x14d3fe=!![];}}else _0x3662ec&&_0x542bc5[_0x202df6(0x177)][_0x202df6(0x13b)]('üìÖ\x20[MPC\x20INFO]\x20'+_0x1d265f+_0x202df6(0x1b3));}else{if(_0x4fad65===_0x202df6(0x13c)){let _0x1b3fa7=![];if(_0x5bd8c2['find'](_0x30fd63=>_0x30fd63[_0x202df6(0x150)]===_0x1d265f))_0x1b3fa7=!![];const _0x558f6a=_0xca14ca[_0x202df6(0x18a)](_0x232dcc=>normalize(_0x232dcc[_0x202df6(0x183)])===normalize(_0x1d265f)&&(_0x232dcc[_0x202df6(0x1e7)]===_0x202df6(0x16b)||_0x232dcc[_0x202df6(0x1e7)]===_0x202df6(0x13a)||_0x232dcc[_0x202df6(0x1e7)]===_0x202df6(0x1a2)));for(const _0x5dec00 of _0x558f6a){try{const _0x50fab8=await _0x542bc5[_0x202df6(0x14c)](_0x5dec00['id']);if(_0x50fab8&&(_0x50fab8['val']===!![]||_0x50fab8[_0x202df6(0x12f)]===0x1||String(_0x50fab8[_0x202df6(0x12f)])[_0x202df6(0x152)]()===_0x202df6(0x1c3)))_0x1b3fa7=!![];}catch(_0x5ab9a4){}}if(_0x1b3fa7)_0x542bc5['log'][_0x202df6(0x13b)]('üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20'+_0x1d265f+'\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.');else{const _0x344d87=_0x539acd[_0x1d265f]||_0x539acd['default']||0x15;_0x542bc5[_0x202df6(0x177)][_0x202df6(0x13b)](_0x202df6(0x1bf)+_0x1d265f+'\x20erreicht\x20Limit\x20('+_0x184658[_0x202df6(0x12f)]+_0x202df6(0x175)+(_0x344d87+0.2)+_0x202df6(0x17e)),await _0x542bc5[_0x202df6(0x1ad)](_0x2d818f,_0x344d87),await logAutomationAction(_0x542bc5,'[WATCHDOG]\x20'+_0x1d265f+_0x202df6(0x18d)+_0x344d87+'¬∞C'),lastActions[_0x202df6(0x147)+_0x1d265f]=Date[_0x202df6(0x1d1)]();}}}_0x136180[_0x202df6(0x1d4)](_0x41e672,0x1),_0x2823a6=!![];}}}}}_0x2823a6&&await _0x542bc5[_0x202df6(0x145)](_0x5ec971,{'val':JSON['stringify'](_0x136180),'ack':!![]}),_0x14d3fe&&await _0x542bc5[_0x202df6(0x145)](_0x202df6(0x1bd),{'val':JSON[_0x202df6(0x1d5)](_0x145848),'ack':!![]});}catch(_0x26124a){}}async function applyEnergySavings(_0x11ccb5,_0xd820e7){const _0x235036=a1_0x1fe0f1;await cleanupGhostInterventions(_0x11ccb5);if(!_0xd820e7||_0xd820e7[_0x235036(0x17f)]===0x0)return;const _0x233745=_0x11ccb5[_0x235036(0x173)][_0x235036(0x1da)]||[],_0x1c1981=Date['now']();for(const _0x3d27fa of _0xd820e7){const _0x1854da=_0x3d27fa[_0x235036(0x150)],_0x19b608=_0x3d27fa[_0x235036(0x188)],_0x353457=_0x3d27fa['target']||0x15;if(lastActions[_0x235036(0x147)+_0x1854da]&&_0x1c1981-lastActions['rescue_'+_0x1854da]<RESCUE_LOCK_MS)continue;const _0xbc76d2=_0x233745['find'](_0x4e8fba=>normalize(_0x4e8fba[_0x235036(0x183)])===normalize(_0x1854da)&&(_0x4e8fba[_0x235036(0x1e7)]==='temperature'||_0x4e8fba[_0x235036(0x1e7)]===_0x235036(0x178)));if(!_0xbc76d2)continue;const _0x3824a3=await findRelatedId(_0x11ccb5,_0xbc76d2['id'],_0x235036(0x143));if(_0x3824a3){if(lastActions['mpc_'+_0x1854da]&&_0x1c1981-lastActions[_0x235036(0x134)+_0x1854da]<0x1e*0x3c*0x3e8)continue;const _0x18235f=await _0x11ccb5[_0x235036(0x14c)](_0x3824a3);if(_0x18235f&&typeof _0x18235f['val']===_0x235036(0x1b6)){const _0x41a53e=_0x18235f[_0x235036(0x12f)];_0x41a53e!==ECO_TEMP&&await manageMpcIntervention(_0x11ccb5,_0x1854da,_0x235036(0x1be));if(_0x19b608>0x1e)_0x41a53e>ECO_TEMP+0.5&&(_0x11ccb5[_0x235036(0x177)][_0x235036(0x13b)](_0x235036(0x15d)+_0x1854da+'\x20auf\x20'+ECO_TEMP+_0x235036(0x1ca)+_0x19b608+_0x235036(0x18b)),await _0x11ccb5[_0x235036(0x1ad)](_0x3824a3,ECO_TEMP),await manageMpcIntervention(_0x11ccb5,_0x1854da,'add'),lastActions[_0x235036(0x134)+_0x1854da]=_0x1c1981,await logAutomationAction(_0x11ccb5,_0x235036(0x170)+_0x1854da+_0x235036(0x13e)+ECO_TEMP+'¬∞C'));else _0x19b608<=0xf&&(_0x41a53e<_0x353457&&(_0x11ccb5['log'][_0x235036(0x13b)](_0x235036(0x14b)+_0x1854da+_0x235036(0x133)+_0x353457+_0x235036(0x154)),await _0x11ccb5['setForeignStateAsync'](_0x3824a3,_0x353457),await manageMpcIntervention(_0x11ccb5,_0x1854da,_0x235036(0x1be)),lastActions['mpc_'+_0x1854da]=_0x1c1981,await logAutomationAction(_0x11ccb5,_0x235036(0x170)+_0x1854da+_0x235036(0x167)+_0x353457+'¬∞C')));}}else _0x11ccb5[_0x235036(0x177)][_0x235036(0x181)](_0x235036(0x1c0)+_0x1854da+_0x235036(0x17c));}}module['exports']={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};