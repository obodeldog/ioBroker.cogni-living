function a1_0x4171(){const _0x18f386=['off','consultButler','analysis.automation.lastAction','debug','toLowerCase','ðŸ”\x20Device-Search\x20failed:\x20Predicted\x20\x27','name','reason','9549183kljQVJ','toUpperCase','search','location','apply','2625666UNShys','dimmer','Unknown','\x27\x20(norm:\x20\x27','(((.+)+)+)+$','getStateAsync','approved','light','939064wNYDsh','analysis.automation.mode','PrÃ¤diktion:\x20','config','type','toString','\x27),\x20but\x20found\x20no\x20matching\x20light\x20device.','âš¡\x20ACTION:\x20','12465153eEiOUr','961wTRIJj','3148435TLObGx','info','switch','\x20->\x20Schalte\x20','setStateAsync','log','8kjIbmC','val','\x20->\x20','devices','find','1939602oEMChr','analysis.automation.confidenceThreshold','active','2906UlFKic','simulate','now'];a1_0x4171=function(){return _0x18f386;};return a1_0x4171();}function a1_0x36d4(_0x26b3ef,_0x512ab6){const _0x3c18e0=a1_0x4171();return a1_0x36d4=function(_0x5b7052,_0x2f9727){_0x5b7052=_0x5b7052-0x149;let _0x4171d3=_0x3c18e0[_0x5b7052];return _0x4171d3;},a1_0x36d4(_0x26b3ef,_0x512ab6);}(function(_0x41c328,_0x410564){const _0x38dde3=a1_0x36d4,_0xfe472c=_0x41c328();while(!![]){try{const _0x3233bb=-parseInt(_0x38dde3(0x159))/0x1*(parseInt(_0x38dde3(0x168))/0x2)+parseInt(_0x38dde3(0x165))/0x3+-parseInt(_0x38dde3(0x160))/0x4*(-parseInt(_0x38dde3(0x15a))/0x5)+parseInt(_0x38dde3(0x178))/0x6+-parseInt(_0x38dde3(0x173))/0x7+-parseInt(_0x38dde3(0x150))/0x8+parseInt(_0x38dde3(0x158))/0x9;if(_0x3233bb===_0x410564)break;else _0xfe472c['push'](_0xfe472c['shift']());}catch(_0x59d264){_0xfe472c['push'](_0xfe472c['shift']());}}}(a1_0x4171,0xcfadb));const a1_0x2f9727=(function(){let _0xf6edc0=!![];return function(_0x1558eb,_0x2b69e3){const _0x4a73e3=_0xf6edc0?function(){const _0x9a364=a1_0x36d4;if(_0x2b69e3){const _0x3d8f84=_0x2b69e3[_0x9a364(0x177)](_0x1558eb,arguments);return _0x2b69e3=null,_0x3d8f84;}}:function(){};return _0xf6edc0=![],_0x4a73e3;};}()),a1_0x5b7052=a1_0x2f9727(this,function(){const _0x49e23e=a1_0x36d4;return a1_0x5b7052['toString']()[_0x49e23e(0x175)](_0x49e23e(0x14c))[_0x49e23e(0x155)]()['constructor'](a1_0x5b7052)['search']('(((.+)+)+)+$');});a1_0x5b7052();'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function normalize(_0x137c25){const _0x167561=a1_0x36d4;if(!_0x137c25)return'';return _0x137c25[_0x167561(0x16f)]()['replace'](/\s+/g,'')['trim']();}async function handlePrediction(_0xef2226,_0x81f629,_0x1a447c){const _0x5b20a8=a1_0x36d4;if(!_0x81f629||_0x81f629===_0x5b20a8(0x14a))return;let _0x326373=_0x5b20a8(0x16b),_0x105ace=0.6;try{const _0x4ee051=await _0xef2226[_0x5b20a8(0x14d)](_0x5b20a8(0x151));if(_0x4ee051&&_0x4ee051[_0x5b20a8(0x161)])_0x326373=_0x4ee051[_0x5b20a8(0x161)];const _0x2c4747=await _0xef2226[_0x5b20a8(0x14d)](_0x5b20a8(0x166));if(_0x2c4747&&_0x2c4747[_0x5b20a8(0x161)])_0x105ace=_0x2c4747[_0x5b20a8(0x161)];}catch(_0x20e27b){}if(_0x326373==='off')return;if(_0x1a447c<_0x105ace)return;const _0x4463d8=Date[_0x5b20a8(0x16a)]();if(lastActions[_0x81f629]&&_0x4463d8-lastActions[_0x81f629]<COOLDOWN_MS)return;const _0x48f68b=_0xef2226[_0x5b20a8(0x153)][_0x5b20a8(0x163)]||[],_0x261f74=normalize(_0x81f629),_0x1bcdb5=_0x48f68b[_0x5b20a8(0x164)](_0x23f1e1=>{const _0x169749=_0x5b20a8;return normalize(_0x23f1e1[_0x169749(0x176)])===_0x261f74&&(_0x23f1e1[_0x169749(0x154)]===_0x169749(0x14f)||_0x23f1e1[_0x169749(0x154)]===_0x169749(0x149)||_0x23f1e1['type']===_0x169749(0x15c));});if(!_0x1bcdb5){const _0x16a91e=_0x5b20a8(0x170)+_0x81f629+_0x5b20a8(0x14b)+_0x261f74+_0x5b20a8(0x156);_0xef2226[_0x5b20a8(0x15f)][_0x5b20a8(0x16e)](_0x16a91e);return;}const _0x195f70=await aiAgent[_0x5b20a8(0x16c)](_0xef2226,_0x81f629,_0x1bcdb5[_0x5b20a8(0x171)],_0x1a447c);if(!_0x195f70[_0x5b20a8(0x14e)]){_0xef2226['log'][_0x5b20a8(0x16e)]('ðŸ¤–\x20Butler\x20Blocked:\x20'+_0x81f629+_0x5b20a8(0x162)+_0x195f70[_0x5b20a8(0x172)]),await _0xef2226[_0x5b20a8(0x15e)](_0x5b20a8(0x16d),{'val':'[BLOCKED]\x20'+_0x195f70[_0x5b20a8(0x172)],'ack':!![]});return;}const _0x3fb2b4=_0x5b20a8(0x152)+_0x81f629+_0x5b20a8(0x15d)+_0x1bcdb5[_0x5b20a8(0x171)]+'\x20('+_0x195f70[_0x5b20a8(0x172)]+')';await _0xef2226[_0x5b20a8(0x15e)]('analysis.automation.lastAction',{'val':'['+_0x326373[_0x5b20a8(0x174)]()+']\x20'+_0x3fb2b4,'ack':!![]});if(_0x326373===_0x5b20a8(0x169))_0xef2226['log']['info']('ðŸ‘€\x20SIMULATION:\x20'+_0x3fb2b4);else{if(_0x326373===_0x5b20a8(0x167)){_0xef2226[_0x5b20a8(0x15f)][_0x5b20a8(0x15b)](_0x5b20a8(0x157)+_0x3fb2b4);const _0x166ee5=await _0xef2226['getForeignStateAsync'](_0x1bcdb5['id']);if(_0x166ee5&&(_0x166ee5[_0x5b20a8(0x161)]===!![]||_0x166ee5['val']>0x0)){}else await _0xef2226['setForeignStateAsync'](_0x1bcdb5['id'],!![]);lastActions[_0x81f629]=_0x4463d8;}}}module['exports']={'handlePrediction':handlePrediction};