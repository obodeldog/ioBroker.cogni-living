const a1_0x4d6312=a1_0x296f;(function(_0x211eb2,_0x4f4afc){const _0x35281f=a1_0x296f,_0x582e69=_0x211eb2();while(!![]){try{const _0x49bbd1=-parseInt(_0x35281f(0x186))/0x1*(-parseInt(_0x35281f(0x1b4))/0x2)+-parseInt(_0x35281f(0x1f4))/0x3+parseInt(_0x35281f(0x1ff))/0x4+-parseInt(_0x35281f(0x191))/0x5+parseInt(_0x35281f(0x1cf))/0x6+-parseInt(_0x35281f(0x1a8))/0x7+parseInt(_0x35281f(0x198))/0x8;if(_0x49bbd1===_0x4f4afc)break;else _0x582e69['push'](_0x582e69['shift']());}catch(_0x50b078){_0x582e69['push'](_0x582e69['shift']());}}}(a1_0x4c46,0x260de));const a1_0x312c0e=(function(){let _0x2244d2=!![];return function(_0x143512,_0x54ea38){const _0x1b3558=_0x2244d2?function(){const _0x373cb7=a1_0x296f;if(_0x54ea38){const _0xc076e3=_0x54ea38[_0x373cb7(0x1ca)](_0x143512,arguments);return _0x54ea38=null,_0xc076e3;}}:function(){};return _0x2244d2=![],_0x1b3558;};}()),a1_0x6a7b16=a1_0x312c0e(this,function(){const _0x38ab45=a1_0x296f;return a1_0x6a7b16[_0x38ab45(0x1ce)]()[_0x38ab45(0x1b1)]('(((.+)+)+)+$')[_0x38ab45(0x1ce)]()[_0x38ab45(0x239)](a1_0x6a7b16)[_0x38ab45(0x1b1)](_0x38ab45(0x1c6));});a1_0x6a7b16();'use strict';const aiAgent=require(a1_0x4d6312(0x1d4)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x34bba5){const _0x1a40be=a1_0x4d6312;if(!_0x34bba5)return'';return _0x34bba5[_0x1a40be(0x1dd)]()['replace'](/\s+/g,'')[_0x1a40be(0x18d)]();}function getWarmupRobust(_0x40dd87,_0x33c940){const _0x548055=a1_0x4d6312;if(!_0x40dd87||!_0x33c940)return 0x3c;if(_0x40dd87[_0x33c940]!==undefined)return _0x40dd87[_0x33c940];const _0x289560=_0x33c940[_0x548055(0x1dd)]()[_0x548055(0x224)](/√§/g,'ae')[_0x548055(0x224)](/√∂/g,'oe')[_0x548055(0x224)](/√º/g,'ue')[_0x548055(0x224)](/√ü/g,'ss')[_0x548055(0x224)](/\s+/g,'_')[_0x548055(0x224)](/[^a-z0-9_]/g,'');if(_0x40dd87[_0x289560]!==undefined)return _0x40dd87[_0x289560];return 0x3c;}async function logAutomationAction(_0x36b050,_0x196df7){const _0x40b677=a1_0x4d6312;await _0x36b050[_0x40b677(0x1f0)]('analysis.automation.lastAction',{'val':_0x196df7,'ack':!![]});try{const _0x44aebe='analysis.automation.actionLog',_0x2a2700=await _0x36b050[_0x40b677(0x22f)](_0x44aebe);let _0x4d7fe5=[];if(_0x2a2700&&_0x2a2700[_0x40b677(0x1c4)])try{_0x4d7fe5=JSON['parse'](_0x2a2700[_0x40b677(0x1c4)]);}catch(_0x52302b){}_0x4d7fe5[_0x40b677(0x1aa)]({'ts':Date[_0x40b677(0x1b2)](),'msg':_0x196df7});if(_0x4d7fe5[_0x40b677(0x18f)]>0x32)_0x4d7fe5=_0x4d7fe5['slice'](0x0,0x32);await _0x36b050[_0x40b677(0x1f0)](_0x44aebe,{'val':JSON[_0x40b677(0x18a)](_0x4d7fe5),'ack':!![]});}catch(_0x319219){}}async function handlePrediction(_0x1f1a2f,_0xc02461,_0x58d2a1){const _0x3baeb7=a1_0x4d6312;if(!_0xc02461||_0xc02461===_0x3baeb7(0x20c))return;let _0x5d4ef5=_0x3baeb7(0x1c3),_0x33b204=0.6;try{const _0x35e2c3=await _0x1f1a2f['getStateAsync']('analysis.automation.mode');if(_0x35e2c3&&_0x35e2c3[_0x3baeb7(0x1c4)])_0x5d4ef5=_0x35e2c3['val'];const _0x7c6fdd=await _0x1f1a2f['getStateAsync'](_0x3baeb7(0x18c));if(_0x7c6fdd&&_0x7c6fdd[_0x3baeb7(0x1c4)])_0x33b204=_0x7c6fdd['val'];}catch(_0x4e8e04){}if(_0x5d4ef5===_0x3baeb7(0x1c3)||_0x58d2a1<_0x33b204)return;const _0x425ce9=Date[_0x3baeb7(0x1b2)]();if(lastActions[_0xc02461]&&_0x425ce9-lastActions[_0xc02461]<COOLDOWN_MS)return;const _0x5ab0d6=_0x1f1a2f['config'][_0x3baeb7(0x236)]||[],_0x11d92a=normalize(_0xc02461),_0x389e9f=_0x5ab0d6[_0x3baeb7(0x1ee)](_0x2c9cb2=>normalize(_0x2c9cb2['location'])===_0x11d92a&&(_0x2c9cb2['type']===_0x3baeb7(0x1c0)||_0x2c9cb2['type']===_0x3baeb7(0x1a6)||_0x2c9cb2[_0x3baeb7(0x1c5)]===_0x3baeb7(0x1fd)));if(!_0x389e9f)return;const _0x509120=await aiAgent['consultButler'](_0x1f1a2f,_0xc02461,_0x389e9f[_0x3baeb7(0x228)],_0x58d2a1);if(!_0x509120['approved'])return;const _0x4a60f9='Pr√§diktion:\x20'+_0xc02461+_0x3baeb7(0x1d5)+_0x389e9f[_0x3baeb7(0x228)]+'\x20('+_0x509120[_0x3baeb7(0x1a9)]+')';await logAutomationAction(_0x1f1a2f,'['+_0x5d4ef5['toUpperCase']()+']\x20'+_0x4a60f9);if(_0x5d4ef5===_0x3baeb7(0x1c7)){const _0x2b5cf5=await _0x1f1a2f[_0x3baeb7(0x206)](_0x389e9f['id']);(!_0x2b5cf5||!_0x2b5cf5['val']&&_0x2b5cf5[_0x3baeb7(0x1c4)]!==!![])&&await _0x1f1a2f[_0x3baeb7(0x22a)](_0x389e9f['id'],!![]),lastActions[_0xc02461]=_0x425ce9;}}function a1_0x4c46(){const _0x4fdafd=['ACTUAL_TEMPERATURE','Classic','openknx','target_temperature','\x20min)','2278296cMgwfN','occupied_heating_setpoint','\x20wurde\x20manuell\x20erh√∂ht.','sensor','number','splice','setpoint','Ist','\x20wieder\x20auf\x20','valveMapping',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','actual','date','mpc_','dimmer','analysis.energy.mpcActiveInterventions','1220737MSrqJx','reason','unshift','¬∞C.','.4.VALVE_STATE','open','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20','¬∞C\x20(Vorlauf:\x20','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','search','now','value.valve','8klajzl','.1.TEMPERATURE','abs','analysis.energy.warmupSources','forEach','cal_','Unbekannt','üö®\x20[MPC\x20WATCHDOG]\x20','entries','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','¬∞C).\x20Entferne\x20Status.','light','calendarSelection','push','off','val','type','(((.+)+)+)+$','active','\x20min).','Nicht\x20gefunden','apply','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','SET_POINT_TEMPERATURE','getTime','toString','1128642yVQATy','room',':\x20Absenkung\x20auf\x20','parse','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','./ai_agent','\x20->\x20Schalte\x20','\x27\x20(Match:\x20','minutes_safe','SET','until','config','getForeignObjectAsync',')\x20aktiv.\x20Heize\x20auf\x20','toLowerCase','state','[WATCHDOG]\x20','summary','_date','\x20auf\x20','_meta','score','r√ºckkehr','analysis.energy.schedulePreview','_calName','temperature','stellwert','.4.SET_TEMPERATURE','Calendar\x20Check\x20Error:\x20','target','¬∞C!\x20(Puffer\x20leer).','find','analysis.energy.activeEnforcements','setStateAsync','soll','normal','Manuelles\x20Mapping','698595pCvEHg','\x20gefunden!','.1.ACTUAL_TEMPERATURE','urlaub\x20ende','level','üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20','rescue_','too_cold','local_temperature','switch','error','498044VpzCCs','analysis.energy.warmupTargets','messwert','role','TRAIN_RL_PENALTY','ACTUAL','filter','getForeignStateAsync','¬∞C\x20<\x20','contact','ankunft','üßπ\x20[MPC\x20CLEANUP]\x20','findIndex','Unknown','wert','triggerTime','slice','indexOf','set','values','pi_heating_demand','join','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','split','remove','unit',':\x20Aufheizen\x20auf\x20','.data.table','location','valve','analysis.energy.warmupTimes','current_heating_setpoint','isArray','\x20erreicht\x20Limit\x20(','warn','string','map','replace','info','Soll',']:\x20Raum-Trigger\x20\x27','name','[FORCE]\x20','setForeignStateAsync','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','thermostatMapping','system.mode','getStateAsync','sendToPythonWrapper','event','position','Enforcement\x20Monitor\x20Error:\x20','[MPC]\x20','Fehlt','devices','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','analysis.energy.rlPenalties','constructor','exports','common','manual','.1.LEVEL','sort','default','calendarInstance','thermostat.setpoint','write','useCalendar','add','10797wwsvtj','window','log','thermostat','stringify','includes','analysis.automation.confidenceThreshold','trim','analysis.energy.ventilationAlerts','length','hm-rpc','387335gJcZUC','¬∞C!\x20(Puffer:\x20'];a1_0x4c46=function(){return _0x4fdafd;};return a1_0x4c46();}async function findRelatedId(_0x4bdeb7,_0x2d89ae,_0x534f8a=a1_0x4d6312(0x19e)){const _0x5dc209=a1_0x4d6312;if(_0x534f8a===_0x5dc209(0x19e)&&_0x4bdeb7[_0x5dc209(0x1da)][_0x5dc209(0x22d)]){let _0x5052c9=_0x4bdeb7['config']['thermostatMapping'];if(typeof _0x5052c9===_0x5dc209(0x222))try{_0x5052c9=JSON[_0x5dc209(0x1d2)](_0x5052c9);}catch(_0x389de0){}if(_0x5052c9&&_0x5052c9[_0x2d89ae])return _0x5052c9[_0x2d89ae];}if(_0x534f8a==='valve'&&_0x4bdeb7[_0x5dc209(0x1da)][_0x5dc209(0x1a1)]){let _0x3b133d=_0x4bdeb7[_0x5dc209(0x1da)]['valveMapping'];if(typeof _0x3b133d===_0x5dc209(0x222))try{_0x3b133d=JSON[_0x5dc209(0x1d2)](_0x3b133d);}catch(_0x4b689c){}if(_0x3b133d&&_0x3b133d[_0x2d89ae])return _0x3b133d[_0x2d89ae];}let _0x34f205=[];if(_0x534f8a===_0x5dc209(0x19e))_0x34f205=[{'s':_0x5dc209(0x1f6),'t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x5dc209(0x1b5),'t':'.1.SET_POINT_TEMPERATURE'},{'s':'.1.TEMPERATURE','t':_0x5dc209(0x1ea)},{'s':_0x5dc209(0x193),'t':_0x5dc209(0x1cc)},{'s':_0x5dc209(0x1fc),'t':_0x5dc209(0x199)},{'s':_0x5dc209(0x1fc),'t':_0x5dc209(0x21e)},{'s':_0x5dc209(0x1e8),'t':_0x5dc209(0x196)},{'s':_0x5dc209(0x204),'t':_0x5dc209(0x1d8)},{'s':_0x5dc209(0x19f),'t':_0x5dc209(0x226)},{'s':_0x5dc209(0x1e8),'t':'setpoint'}];else _0x534f8a===_0x5dc209(0x21c)&&(_0x34f205=[{'s':_0x5dc209(0x1f6),'t':_0x5dc209(0x23d)},{'s':_0x5dc209(0x1b5),'t':_0x5dc209(0x23d)},{'s':'.1.TEMPERATURE','t':_0x5dc209(0x1ac)},{'s':_0x5dc209(0x1fc),'t':_0x5dc209(0x213)},{'s':_0x5dc209(0x1e8),'t':'valve_position'},{'s':_0x5dc209(0x1e8),'t':_0x5dc209(0x1f8)}]);for(const _0x208d54 of _0x34f205){if(_0x2d89ae['includes'](_0x208d54['s'])){const _0x123474=_0x2d89ae[_0x5dc209(0x224)](_0x208d54['s'],_0x208d54['t']),_0x57484b=await _0x4bdeb7[_0x5dc209(0x1db)](_0x123474);if(_0x57484b)return _0x123474;}}try{const _0x2c02c8=_0x2d89ae[_0x5dc209(0x216)]('.');if(_0x2c02c8[_0x5dc209(0x18f)]>0x2){const _0x4218c8=_0x2c02c8['slice'](0x0,-0x1)[_0x5dc209(0x214)]('.'),_0x141a10=await _0x4bdeb7['getForeignObjectsAsync'](_0x4218c8+'.*'),_0xa0eb5b=[],_0xa6ed77=_0x2d89ae['split'](/[._]+/)[_0x5dc209(0x205)](_0x2cb776=>![_0x5dc209(0x195),'0',_0x5dc209(0x190),'ist',_0x5dc209(0x20d),_0x5dc209(0x1e8),_0x5dc209(0x1a3),_0x5dc209(0x19b),_0x5dc209(0x201),_0x5dc209(0x1de)][_0x5dc209(0x18b)](_0x2cb776[_0x5dc209(0x1dd)]()));for(const [_0x2a49bb,_0x87b8e4]of Object[_0x5dc209(0x1bc)](_0x141a10)){if(_0x2a49bb===_0x2d89ae)continue;if(_0x87b8e4&&_0x87b8e4[_0x5dc209(0x23b)]){const _0x3419bb=_0x2a49bb[_0x5dc209(0x1dd)](),_0x1da1f0=(_0x87b8e4[_0x5dc209(0x23b)][_0x5dc209(0x202)]||'')[_0x5dc209(0x1dd)](),_0x4ba6a2=(_0x87b8e4['common'][_0x5dc209(0x218)]||'')['toLowerCase']();let _0x45297a=![];if(_0x534f8a===_0x5dc209(0x19e)&&_0x87b8e4['common'][_0x5dc209(0x242)]===!![])_0x45297a=_0x3419bb['includes'](_0x5dc209(0x211))||_0x3419bb[_0x5dc209(0x18b)](_0x5dc209(0x1f1))||_0x3419bb[_0x5dc209(0x18b)](_0x5dc209(0x1ec))||_0x1da1f0[_0x5dc209(0x18b)]('level.temperature')||_0x1da1f0[_0x5dc209(0x18b)](_0x5dc209(0x241));else _0x534f8a===_0x5dc209(0x21c)&&(_0x45297a=_0x3419bb[_0x5dc209(0x18b)](_0x5dc209(0x1f8))||_0x3419bb['includes']('valve')||_0x3419bb[_0x5dc209(0x18b)](_0x5dc209(0x1e9))||_0x3419bb[_0x5dc209(0x18b)](_0x5dc209(0x232))||_0x1da1f0['includes']('level.valve')||_0x1da1f0[_0x5dc209(0x18b)](_0x5dc209(0x1b3))||_0x4ba6a2['includes']('%'));if(_0x45297a){const _0x3bb5b0=_0x2a49bb['split'](/[._]+/)[_0x5dc209(0x223)](_0x4fa820=>_0x4fa820[_0x5dc209(0x1dd)]());let _0x2081d1=0x0;_0xa6ed77[_0x5dc209(0x1b8)](_0x10cc2e=>{const _0x15caa0=_0x5dc209;if(_0x3bb5b0[_0x15caa0(0x18b)](_0x10cc2e['toLowerCase']()))_0x2081d1++;}),_0xa0eb5b[_0x5dc209(0x1c2)]({'id':_0x2a49bb,'score':_0x2081d1});}}}if(_0xa0eb5b[_0x5dc209(0x18f)]>0x0){_0xa0eb5b['sort']((_0x56eecb,_0x4fb047)=>_0x4fb047[_0x5dc209(0x1e4)]-_0x56eecb['score']);if(_0xa0eb5b[0x0]['score']>0x0)return _0xa0eb5b[0x0]['id'];}}}catch(_0x2207bc){}return null;}async function scanThermostats(_0xab7d67){const _0x310a74=a1_0x4d6312,_0x43f259=_0xab7d67['config']['devices']||[],_0x95aeb=[],_0x39717c=_0x43f259['filter'](_0x4dd88a=>_0x4dd88a['id']&&_0x4dd88a['id'][_0x310a74(0x18b)](_0x310a74(0x1e8))||_0x4dd88a[_0x310a74(0x1c5)]&&[_0x310a74(0x1e8),_0x310a74(0x189),_0x310a74(0x19b)][_0x310a74(0x18b)](_0x4dd88a[_0x310a74(0x1c5)])||_0x4dd88a[_0x310a74(0x228)]&&_0x4dd88a[_0x310a74(0x228)]['toLowerCase']()[_0x310a74(0x18b)]('temp'));for(const _0x464041 of _0x39717c){const _0x936b23=await findRelatedId(_0xab7d67,_0x464041['id'],_0x310a74(0x19e)),_0x230712=await findRelatedId(_0xab7d67,_0x464041['id'],_0x310a74(0x21c));let _0x49503e=_0x310a74(0x1c9),_0x275be0=![],_0x24c8f5=_0xab7d67[_0x310a74(0x1da)][_0x310a74(0x22d)]||{};if(typeof _0x24c8f5==='string')try{_0x24c8f5=JSON[_0x310a74(0x1d2)](_0x24c8f5);}catch(_0x4ce8ea){}let _0x38708e=_0xab7d67['config']['valveMapping']||{};if(typeof _0x38708e==='string')try{_0x38708e=JSON[_0x310a74(0x1d2)](_0x38708e);}catch(_0x5b210f){}if(_0x24c8f5[_0x464041['id']]&&_0x24c8f5[_0x464041['id']]===_0x936b23||_0x38708e[_0x464041['id']]&&_0x38708e[_0x464041['id']]===_0x230712)_0x49503e=_0x310a74(0x1f3),_0x275be0=!![];else(_0x936b23||_0x230712)&&(_0x49503e='Auto-Erkennung');_0x95aeb[_0x310a74(0x1c2)]({'room':_0x464041[_0x310a74(0x21b)]||_0x310a74(0x1ba),'sensorId':_0x464041['id'],'setpointId':_0x936b23||'-','valveId':_0x230712||'-','source':_0x49503e,'isManual':_0x275be0,'status':_0x936b23&&_0x230712?'PERFECT':_0x936b23?'OK':_0x310a74(0x235)});}return _0x95aeb['sort']((_0x4636cf,_0x3c599b)=>_0x4636cf[_0x310a74(0x1d0)]['localeCompare'](_0x3c599b[_0x310a74(0x1d0)]));}async function updateSchedulePreview(_0x42ffb8){const _0x4dbd12=a1_0x4d6312;if(!_0x42ffb8['config'][_0x4dbd12(0x243)]||!_0x42ffb8[_0x4dbd12(0x1da)][_0x4dbd12(0x240)])return;let _0x4feff7={};try{const _0x1c8dc8=await _0x42ffb8[_0x4dbd12(0x22f)]('analysis.energy.warmupTimes');if(_0x1c8dc8&&_0x1c8dc8[_0x4dbd12(0x1c4)])_0x4feff7=JSON[_0x4dbd12(0x1d2)](_0x1c8dc8[_0x4dbd12(0x1c4)]);}catch(_0x329b45){}const _0x58c9d0=[],_0x5b3073=Date[_0x4dbd12(0x1b2)](),_0x5bacdc=0x30*0x3c*0x3c*0x3e8;try{const _0x257c14=await _0x42ffb8['getForeignStateAsync'](_0x42ffb8[_0x4dbd12(0x1da)][_0x4dbd12(0x240)]+_0x4dbd12(0x21a));if(!_0x257c14||!_0x257c14[_0x4dbd12(0x1c4)])return;const _0x101569=JSON[_0x4dbd12(0x1d2)](_0x257c14[_0x4dbd12(0x1c4)]),_0x19afd0=_0x42ffb8['config'][_0x4dbd12(0x1c1)]||[],_0x42bfa6=_0x42ffb8[_0x4dbd12(0x1da)][_0x4dbd12(0x236)]||[],_0x2b53d2=new Set();_0x42bfa6[_0x4dbd12(0x1b8)](_0x24fb4e=>{const _0x4017cf=_0x4dbd12;if(_0x24fb4e[_0x4017cf(0x21b)])_0x2b53d2[_0x4017cf(0x185)](_0x24fb4e[_0x4017cf(0x21b)]);});for(const _0xba0c74 of _0x101569){if(_0xba0c74[_0x4dbd12(0x1e7)]&&_0x19afd0[_0x4dbd12(0x18f)]>0x0&&!_0x19afd0[_0x4dbd12(0x18b)](_0xba0c74[_0x4dbd12(0x1e7)]))continue;const _0x20b35f=_0xba0c74[_0x4dbd12(0x1e1)]||_0xba0c74['eventStart']||_0xba0c74[_0x4dbd12(0x1a4)];if(!_0x20b35f)continue;const _0x4c2e55=new Date(_0x20b35f),_0x2cb6e4=_0x4c2e55[_0x4dbd12(0x1cd)]();if(isNaN(_0x2cb6e4))continue;if(_0x2cb6e4<_0x5b3073)continue;if(_0x2cb6e4>_0x5b3073+_0x5bacdc)continue;const _0x25d1ae=(_0xba0c74[_0x4dbd12(0x231)]||_0xba0c74[_0x4dbd12(0x1e0)]||'')[_0x4dbd12(0x1dd)]();let _0x48dd73=![],_0x15b91d=[],_0x7b6aa=_0xba0c74[_0x4dbd12(0x231)]||_0xba0c74[_0x4dbd12(0x1e0)]||'Unbekannt';if(_0x25d1ae['includes'](_0x4dbd12(0x1f7))||_0x25d1ae[_0x4dbd12(0x18b)](_0x4dbd12(0x1e5))||_0x25d1ae[_0x4dbd12(0x18b)](_0x4dbd12(0x209)))_0x48dd73=!![],_0x15b91d=Array['from'](_0x2b53d2);else for(const _0x4382f3 of _0x2b53d2){if(_0x25d1ae[_0x4dbd12(0x18b)](_0x4382f3[_0x4dbd12(0x1dd)]()))_0x15b91d[_0x4dbd12(0x1c2)](_0x4382f3);}_0x15b91d['length']>0x0&&_0x15b91d[_0x4dbd12(0x1b8)](_0x1122bd=>{const _0x2462b3=_0x4dbd12;let _0x91401a=0x3c;if(_0x48dd73){let _0x11ee01=0x0;Object[_0x2462b3(0x212)](_0x4feff7)[_0x2462b3(0x1b8)](_0x600b35=>{if(_0x600b35>_0x11ee01)_0x11ee01=_0x600b35;}),_0x91401a=_0x11ee01>0x0?_0x11ee01:0x78;}else _0x91401a=getWarmupRobust(_0x4feff7,_0x1122bd);const _0x34feec=new Date(_0x2cb6e4-_0x91401a*0xea60);_0x58c9d0[_0x2462b3(0x1c2)]({'eventTime':_0x2cb6e4,'triggerTime':_0x34feec[_0x2462b3(0x1cd)](),'room':_0x1122bd,'minutes':_0x91401a,'reason':_0x7b6aa,'isGlobal':_0x48dd73});});}}catch(_0x21c389){}_0x58c9d0[_0x4dbd12(0x23e)]((_0x4ba67d,_0x12d58a)=>_0x4ba67d[_0x4dbd12(0x20e)]-_0x12d58a[_0x4dbd12(0x20e)]);const _0x3b561d=_0x58c9d0[_0x4dbd12(0x20f)](0x0,0x1e);await _0x42ffb8[_0x4dbd12(0x1f0)](_0x4dbd12(0x1e6),{'val':JSON[_0x4dbd12(0x18a)](_0x3b561d),'ack':!![]});}async function monitorEnforcements(_0x5a4595){const _0x223849=a1_0x4d6312;try{const _0x1ab6ed=_0x223849(0x1ef),_0x372718=await _0x5a4595['getStateAsync'](_0x1ab6ed);if(!_0x372718||!_0x372718[_0x223849(0x1c4)])return;let _0xd315de=[];try{_0xd315de=JSON[_0x223849(0x1d2)](_0x372718['val']);}catch(_0xb479bf){return;}if(!Array[_0x223849(0x21f)](_0xd315de)||_0xd315de[_0x223849(0x18f)]===0x0)return;const _0x45cf56=Date[_0x223849(0x1b2)](),_0x48b4fa=_0x5a4595[_0x223849(0x1da)][_0x223849(0x236)]||[];let _0x494fee=![];for(let _0x581a5a=_0xd315de[_0x223849(0x18f)]-0x1;_0x581a5a>=0x0;_0x581a5a--){const _0x46bf58=_0xd315de[_0x581a5a];if(_0x45cf56>=_0x46bf58[_0x223849(0x1d9)]){_0x5a4595['log'][_0x223849(0x225)](_0x223849(0x1cb)+_0x46bf58[_0x223849(0x1d0)]+'\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.'),_0xd315de['splice'](_0x581a5a,0x1),_0x494fee=!![];continue;}const _0x176aad=_0x48b4fa['find'](_0x495729=>normalize(_0x495729[_0x223849(0x21b)])===normalize(_0x46bf58[_0x223849(0x1d0)])&&(_0x495729[_0x223849(0x1c5)]===_0x223849(0x1e8)||_0x495729[_0x223849(0x1c5)]===_0x223849(0x189)));if(_0x176aad){const _0x5f3545=await findRelatedId(_0x5a4595,_0x176aad['id'],'setpoint');if(_0x5f3545){const _0x35c8a4=await _0x5a4595[_0x223849(0x206)](_0x5f3545);_0x35c8a4&&typeof _0x35c8a4['val']===_0x223849(0x19c)&&(_0x35c8a4[_0x223849(0x1c4)]<0xf&&(_0x5a4595[_0x223849(0x188)][_0x223849(0x221)]('üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x46bf58['room']+'\x20auf\x20'+_0x35c8a4[_0x223849(0x1c4)]+_0x223849(0x22b)+_0x46bf58['target']+_0x223849(0x1ab)),await _0x5a4595[_0x223849(0x22a)](_0x5f3545,_0x46bf58['target']),await logAutomationAction(_0x5a4595,_0x223849(0x229)+_0x46bf58[_0x223849(0x1d0)]+':\x20'+_0x35c8a4['val']+'¬∞C\x20->\x20'+_0x46bf58[_0x223849(0x1ec)]+'¬∞C\x20(Kalender-Schutz)')));}}}_0x494fee&&await _0x5a4595[_0x223849(0x1f0)](_0x1ab6ed,{'val':JSON[_0x223849(0x18a)](_0xd315de),'ack':!![]});}catch(_0x36a029){_0x5a4595['log'][_0x223849(0x1fe)](_0x223849(0x233)+_0x36a029['message']);}}async function checkCalendarTriggers(_0x2a9c0f){const _0x2b16e8=a1_0x4d6312;if(!_0x2a9c0f[_0x2b16e8(0x1da)][_0x2b16e8(0x243)]||!_0x2a9c0f[_0x2b16e8(0x1da)][_0x2b16e8(0x240)])return;await updateSchedulePreview(_0x2a9c0f);let _0x35bf03={},_0x4fc65a={};try{const _0x5ba1ee=await _0x2a9c0f[_0x2b16e8(0x22f)](_0x2b16e8(0x21d));if(_0x5ba1ee&&_0x5ba1ee['val'])_0x35bf03=JSON['parse'](_0x5ba1ee['val']);const _0x1911f4=await _0x2a9c0f[_0x2b16e8(0x22f)](_0x2b16e8(0x1b7));if(_0x1911f4&&_0x1911f4[_0x2b16e8(0x1c4)])_0x4fc65a=JSON[_0x2b16e8(0x1d2)](_0x1911f4[_0x2b16e8(0x1c4)]);}catch(_0x73b456){}let _0x2c39fd={'default':0x15};try{const _0x145592=await _0x2a9c0f[_0x2b16e8(0x22f)]('analysis.energy.warmupTargets');if(_0x145592&&_0x145592[_0x2b16e8(0x1c4)])_0x2c39fd=JSON[_0x2b16e8(0x1d2)](_0x145592[_0x2b16e8(0x1c4)]);}catch(_0x17cdbd){}let _0x1862a3=[];try{const _0x20fdb5=await _0x2a9c0f[_0x2b16e8(0x22f)](_0x2b16e8(0x1ef));if(_0x20fdb5&&_0x20fdb5[_0x2b16e8(0x1c4)])_0x1862a3=JSON['parse'](_0x20fdb5[_0x2b16e8(0x1c4)]);}catch(_0x3bb92d){}try{const _0x546ace=await _0x2a9c0f['getForeignStateAsync'](_0x2a9c0f[_0x2b16e8(0x1da)][_0x2b16e8(0x240)]+'.data.table');if(!_0x546ace||!_0x546ace[_0x2b16e8(0x1c4)])return;const _0x56a2fd=JSON[_0x2b16e8(0x1d2)](_0x546ace['val']),_0x4b62f6=Date[_0x2b16e8(0x1b2)](),_0x1f7977=_0x2a9c0f[_0x2b16e8(0x1da)][_0x2b16e8(0x236)]||[],_0x5549d0=_0x2a9c0f['config'][_0x2b16e8(0x1c1)]||[];let _0x3fa998=![];for(const _0x45b2fc of _0x56a2fd){if(_0x45b2fc[_0x2b16e8(0x1e7)]&&_0x5549d0[_0x2b16e8(0x18f)]>0x0&&!_0x5549d0[_0x2b16e8(0x18b)](_0x45b2fc[_0x2b16e8(0x1e7)]))continue;const _0x286bf5=_0x45b2fc[_0x2b16e8(0x1e1)]||_0x45b2fc['eventStart']||_0x45b2fc[_0x2b16e8(0x1a4)];if(!_0x286bf5)continue;const _0x92b04a=new Date(_0x286bf5);if(isNaN(_0x92b04a[_0x2b16e8(0x1cd)]()))continue;const _0x392ece=(_0x45b2fc[_0x2b16e8(0x231)]||_0x45b2fc['summary']||'')[_0x2b16e8(0x1dd)]();if(_0x392ece[_0x2b16e8(0x18b)]('urlaub\x20ende')||_0x392ece['includes'](_0x2b16e8(0x1e5))||_0x392ece['includes'](_0x2b16e8(0x209))){let _0x2bb86f=0x0;Object[_0x2b16e8(0x212)](_0x35bf03)[_0x2b16e8(0x1b8)](_0x1f9dcb=>{if(_0x1f9dcb>_0x2bb86f)_0x2bb86f=_0x1f9dcb;});if(_0x2bb86f===0x0)_0x2bb86f=0x78;const _0x64af6e=_0x92b04a['getTime']()-_0x2bb86f*0xea60;_0x4b62f6>=_0x64af6e&&_0x4b62f6<_0x92b04a['getTime']()&&(_0x2a9c0f['currentSystemMode']!==_0x2b16e8(0x1f2)&&(_0x2a9c0f['log'][_0x2b16e8(0x225)]('üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20'+_0x2bb86f+_0x2b16e8(0x1c8)),await _0x2a9c0f[_0x2b16e8(0x1f0)](_0x2b16e8(0x22e),{'val':_0x2b16e8(0x1f2),'ack':![]})));}for(const _0x211799 of _0x1f7977){if(_0x211799[_0x2b16e8(0x21b)]){const _0x1c6dff=_0x211799[_0x2b16e8(0x21b)][_0x2b16e8(0x1dd)](),_0x4cb0b5=(_0x211799['name']||'')['toLowerCase']();let _0x102839=_0x392ece[_0x2b16e8(0x18b)](_0x1c6dff);!_0x102839&&_0x4cb0b5['length']>0x3&&_0x392ece['includes'](_0x4cb0b5)&&(_0x102839=!![]);if(_0x102839){const _0x30f033=getWarmupRobust(_0x35bf03,_0x211799[_0x2b16e8(0x21b)]),_0x4635e9=_0x4fc65a[_0x211799[_0x2b16e8(0x21b)]]||_0x2b16e8(0x194),_0x4bd6fd=_0x92b04a[_0x2b16e8(0x1cd)]()-_0x30f033*0xea60;if(_0x4b62f6>=_0x4bd6fd&&_0x4b62f6<_0x92b04a['getTime']()){const _0x33b181=lastActions[_0x2b16e8(0x1b9)+_0x211799[_0x2b16e8(0x21b)]];if(_0x33b181&&_0x4b62f6-_0x33b181<CAL_COOLDOWN_MS)continue;const _0x5eb0cf=await findRelatedId(_0x2a9c0f,_0x211799['id'],_0x2b16e8(0x19e));if(_0x5eb0cf){let _0x2d0d65=_0x2c39fd[_0x211799[_0x2b16e8(0x21b)]];if(_0x2d0d65===undefined)_0x2d0d65=_0x2c39fd[_0x2b16e8(0x23f)];if(_0x2d0d65===undefined)_0x2d0d65=0x15;const _0x52db9c=await _0x2a9c0f['getForeignStateAsync'](_0x5eb0cf);if(_0x52db9c&&typeof _0x52db9c['val']===_0x2b16e8(0x19c)&&_0x52db9c[_0x2b16e8(0x1c4)]<_0x2d0d65-0.5){_0x2a9c0f[_0x2b16e8(0x188)][_0x2b16e8(0x225)]('üìÖ\x20SMART\x20SCHEDULE\x20['+_0x4635e9+_0x2b16e8(0x227)+_0x211799[_0x2b16e8(0x21b)]+_0x2b16e8(0x1d6)+_0x392ece+_0x2b16e8(0x1dc)+_0x2d0d65+_0x2b16e8(0x1af)+_0x30f033+_0x2b16e8(0x1c8)),await _0x2a9c0f[_0x2b16e8(0x22a)](_0x5eb0cf,_0x2d0d65),await logAutomationAction(_0x2a9c0f,'[CAL]\x20'+_0x211799[_0x2b16e8(0x21b)]+'\x20->\x20'+_0x2d0d65+'¬∞C\x20(via\x20'+_0x4635e9+')'),lastActions[_0x2b16e8(0x1b9)+_0x211799[_0x2b16e8(0x21b)]]=_0x4b62f6;const _0xb426d3=_0x1862a3[_0x2b16e8(0x20b)](_0x38f871=>_0x38f871[_0x2b16e8(0x1d0)]===_0x211799['location']);if(_0xb426d3!==-0x1)_0x1862a3[_0x2b16e8(0x19d)](_0xb426d3,0x1);_0x1862a3[_0x2b16e8(0x1c2)]({'room':_0x211799[_0x2b16e8(0x21b)],'target':_0x2d0d65,'until':_0x92b04a[_0x2b16e8(0x1cd)]()}),_0x3fa998=!![];}}}}}}}_0x3fa998&&await _0x2a9c0f[_0x2b16e8(0x1f0)](_0x2b16e8(0x1ef),{'val':JSON['stringify'](_0x1862a3),'ack':!![]});}catch(_0x1c5547){_0x2a9c0f[_0x2b16e8(0x188)][_0x2b16e8(0x221)](_0x2b16e8(0x1eb)+_0x1c5547['message']);}}async function manageMpcIntervention(_0x30f3f4,_0x5049f1,_0x152a80){const _0x521f1e=a1_0x4d6312;try{const _0x36124a=_0x521f1e(0x1a7),_0x557b8f=await _0x30f3f4[_0x521f1e(0x22f)](_0x36124a);let _0x3417aa=[];if(_0x557b8f&&_0x557b8f[_0x521f1e(0x1c4)])try{_0x3417aa=JSON[_0x521f1e(0x1d2)](_0x557b8f[_0x521f1e(0x1c4)]);}catch(_0x5e5008){}const _0x32d5c4=_0x3417aa[_0x521f1e(0x210)](_0x5049f1);if(_0x152a80==='add')_0x32d5c4===-0x1&&(_0x3417aa[_0x521f1e(0x1c2)](_0x5049f1),await _0x30f3f4[_0x521f1e(0x1f0)](_0x36124a,{'val':JSON[_0x521f1e(0x18a)](_0x3417aa),'ack':!![]}));else _0x152a80===_0x521f1e(0x217)&&(_0x32d5c4!==-0x1&&(_0x3417aa[_0x521f1e(0x19d)](_0x32d5c4,0x1),await _0x30f3f4[_0x521f1e(0x1f0)](_0x36124a,{'val':JSON[_0x521f1e(0x18a)](_0x3417aa),'ack':!![]})));}catch(_0x134676){}}async function cleanupGhostInterventions(_0xdb0032){const _0x1862b3=a1_0x4d6312;try{const _0x26b754=_0x1862b3(0x1a7),_0x2d885a=await _0xdb0032[_0x1862b3(0x22f)](_0x26b754);if(!_0x2d885a||!_0x2d885a[_0x1862b3(0x1c4)])return;const _0x27b053=JSON[_0x1862b3(0x1d2)](_0x2d885a['val']);if(!Array[_0x1862b3(0x21f)](_0x27b053)||_0x27b053['length']===0x0)return;let _0x5913aa={'default':0x15};try{const _0x1a8051=await _0xdb0032[_0x1862b3(0x22f)](_0x1862b3(0x200));if(_0x1a8051&&_0x1a8051['val'])_0x5913aa=JSON[_0x1862b3(0x1d2)](_0x1a8051['val']);}catch(_0x3a039c){}let _0x3ddf62=[];try{const _0xd847b3=await _0xdb0032[_0x1862b3(0x22f)](_0x1862b3(0x18e));if(_0xd847b3&&_0xd847b3['val'])_0x3ddf62=JSON[_0x1862b3(0x1d2)](_0xd847b3[_0x1862b3(0x1c4)]);}catch(_0x2ff3db){}let _0x4df20c={},_0x16540d=![];try{const _0x173063=await _0xdb0032['getStateAsync'](_0x1862b3(0x238));if(_0x173063&&_0x173063[_0x1862b3(0x1c4)])_0x4df20c=JSON[_0x1862b3(0x1d2)](_0x173063['val']);}catch(_0x7d3fd){}if(_0x4df20c[_0x1862b3(0x1e3)]){const _0x430063=Date[_0x1862b3(0x1b2)]();for(const [_0x47bd1c,_0x2017dc]of Object[_0x1862b3(0x1bc)](_0x4df20c[_0x1862b3(0x1e3)])){_0x430063-_0x2017dc>PENALTY_TTL&&(delete _0x4df20c[_0x47bd1c],delete _0x4df20c['_meta'][_0x47bd1c],_0x16540d=!![],_0xdb0032['log'][_0x1862b3(0x225)](_0x1862b3(0x1be)+_0x47bd1c+'\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.'));}}const _0x47839e=_0xdb0032[_0x1862b3(0x1da)][_0x1862b3(0x236)]||[];let _0xe52787=![];for(let _0x1acb4d=_0x27b053['length']-0x1;_0x1acb4d>=0x0;_0x1acb4d--){const _0x2c6dc6=_0x27b053[_0x1acb4d],_0xf0eb23=_0x47839e[_0x1862b3(0x1ee)](_0x1bd349=>normalize(_0x1bd349[_0x1862b3(0x21b)])===normalize(_0x2c6dc6)&&(_0x1bd349[_0x1862b3(0x1c5)]===_0x1862b3(0x1e8)||_0x1bd349[_0x1862b3(0x1c5)]===_0x1862b3(0x189)));if(!_0xf0eb23){_0xdb0032['log'][_0x1862b3(0x221)](_0x1862b3(0x1bd)+_0x2c6dc6+_0x1862b3(0x22c)),_0x27b053[_0x1862b3(0x19d)](_0x1acb4d,0x1),_0xe52787=!![];continue;}if(_0xf0eb23){const _0x378c2a=await findRelatedId(_0xdb0032,_0xf0eb23['id'],'setpoint'),_0x4b1f4b=await _0xdb0032[_0x1862b3(0x206)](_0xf0eb23['id']);if(_0x378c2a){const _0x3ac295=await _0xdb0032[_0x1862b3(0x206)](_0x378c2a);if(_0x3ac295&&typeof _0x3ac295['val']==='number'){let _0x56e16d=![],_0x2d81d0='';Math[_0x1862b3(0x1b6)](_0x3ac295[_0x1862b3(0x1c4)]-ECO_TEMP)>0.5&&(_0x56e16d=!![],_0x2d81d0=_0x1862b3(0x23c));if(!_0x56e16d&&_0x4b1f4b&&typeof _0x4b1f4b['val']==='number'){const _0x291f41=_0x5913aa[_0x2c6dc6]||_0x5913aa[_0x1862b3(0x23f)]||0x15;_0x4b1f4b[_0x1862b3(0x1c4)]<_0x291f41+0.2&&(_0x56e16d=!![],_0x2d81d0=_0x1862b3(0x1fb));}if(_0x56e16d){if(_0x2d81d0===_0x1862b3(0x23c)){_0xdb0032[_0x1862b3(0x188)]['info'](_0x1862b3(0x20a)+_0x2c6dc6+'\x20ist\x20auf\x20'+_0x3ac295[_0x1862b3(0x1c4)]+'¬∞C\x20(nicht\x20'+ECO_TEMP+_0x1862b3(0x1bf));const _0x7acf65=lastActions[_0x1862b3(0x1b9)+_0x2c6dc6],_0x5101fb=_0x7acf65&&Date[_0x1862b3(0x1b2)]()-_0x7acf65<0x2*0x3c*0x3e8;if(!_0x5101fb&&_0x3ac295[_0x1862b3(0x1c4)]>ECO_TEMP+0.5){_0xdb0032['sendToPythonWrapper']&&(_0xdb0032[_0x1862b3(0x188)][_0x1862b3(0x225)](_0x1862b3(0x215)+_0x2c6dc6+_0x1862b3(0x19a)),_0xdb0032[_0x1862b3(0x230)](_0x1862b3(0x203),{'room':_0x2c6dc6}));const _0x380671=_0x2c6dc6+'_'+new Date()['getHours']();if(!_0x4df20c[_0x380671]){_0x4df20c[_0x380671]=0x1;if(!_0x4df20c[_0x1862b3(0x1e3)])_0x4df20c['_meta']={};_0x4df20c[_0x1862b3(0x1e3)][_0x380671]=Date['now'](),_0x16540d=!![];}}else _0x5101fb&&_0xdb0032[_0x1862b3(0x188)][_0x1862b3(0x225)]('üìÖ\x20[MPC\x20INFO]\x20'+_0x2c6dc6+_0x1862b3(0x1b0));}else{if(_0x2d81d0===_0x1862b3(0x1fb)){let _0x1e4d3b=![];if(_0x3ddf62[_0x1862b3(0x1ee)](_0x468858=>_0x468858['room']===_0x2c6dc6))_0x1e4d3b=!![];const _0x2498f7=_0x47839e[_0x1862b3(0x205)](_0x4e184a=>normalize(_0x4e184a[_0x1862b3(0x21b)])===normalize(_0x2c6dc6)&&(_0x4e184a['type']===_0x1862b3(0x187)||_0x4e184a[_0x1862b3(0x1c5)]===_0x1862b3(0x19b)||_0x4e184a[_0x1862b3(0x1c5)]===_0x1862b3(0x208)));for(const _0x4be404 of _0x2498f7){try{const _0x135a93=await _0xdb0032[_0x1862b3(0x206)](_0x4be404['id']);if(_0x135a93&&(_0x135a93[_0x1862b3(0x1c4)]===!![]||_0x135a93[_0x1862b3(0x1c4)]===0x1||String(_0x135a93[_0x1862b3(0x1c4)])[_0x1862b3(0x1dd)]()===_0x1862b3(0x1ad)))_0x1e4d3b=!![];}catch(_0x3a00b6){}}if(_0x1e4d3b)_0xdb0032[_0x1862b3(0x188)][_0x1862b3(0x225)](_0x1862b3(0x1f9)+_0x2c6dc6+_0x1862b3(0x237));else{const _0x368d5e=_0x5913aa[_0x2c6dc6]||_0x5913aa[_0x1862b3(0x23f)]||0x15;_0xdb0032['log'][_0x1862b3(0x225)](_0x1862b3(0x1bb)+_0x2c6dc6+_0x1862b3(0x220)+_0x4b1f4b['val']+_0x1862b3(0x207)+(_0x368d5e+0.2)+'¬∞C).\x20Sparmodus\x20beendet!'),await _0xdb0032[_0x1862b3(0x22a)](_0x378c2a,_0x368d5e),await logAutomationAction(_0xdb0032,_0x1862b3(0x1df)+_0x2c6dc6+_0x1862b3(0x1a2)+_0x368d5e+'¬∞C'),lastActions[_0x1862b3(0x1fa)+_0x2c6dc6]=Date[_0x1862b3(0x1b2)]();}}}_0x27b053[_0x1862b3(0x19d)](_0x1acb4d,0x1),_0xe52787=!![];}}}}}_0xe52787&&await _0xdb0032['setStateAsync'](_0x26b754,{'val':JSON[_0x1862b3(0x18a)](_0x27b053),'ack':!![]}),_0x16540d&&await _0xdb0032['setStateAsync']('analysis.energy.rlPenalties',{'val':JSON[_0x1862b3(0x18a)](_0x4df20c),'ack':!![]});}catch(_0x45fb61){}}async function applyEnergySavings(_0x47031f,_0x10402e){const _0x480519=a1_0x4d6312;await cleanupGhostInterventions(_0x47031f);if(!_0x10402e||_0x10402e['length']===0x0)return;const _0x15caec=_0x47031f[_0x480519(0x1da)][_0x480519(0x236)]||[],_0x17a84f=Date['now']();for(const _0x39b6c4 of _0x10402e){const _0x26873e=_0x39b6c4[_0x480519(0x1d0)],_0x2e513d=_0x39b6c4[_0x480519(0x1d7)],_0xf9d4d5=_0x39b6c4['target']||0x15;if(lastActions[_0x480519(0x1fa)+_0x26873e]&&_0x17a84f-lastActions['rescue_'+_0x26873e]<RESCUE_LOCK_MS)continue;const _0x360cd9=_0x15caec['find'](_0x58b1bb=>normalize(_0x58b1bb[_0x480519(0x21b)])===normalize(_0x26873e)&&(_0x58b1bb[_0x480519(0x1c5)]===_0x480519(0x1e8)||_0x58b1bb['type']===_0x480519(0x189)));if(!_0x360cd9)continue;const _0x474178=await findRelatedId(_0x47031f,_0x360cd9['id'],'setpoint');if(_0x474178){if(lastActions['mpc_'+_0x26873e]&&_0x17a84f-lastActions[_0x480519(0x1a5)+_0x26873e]<0x1e*0x3c*0x3e8)continue;const _0x3ee0e2=await _0x47031f[_0x480519(0x206)](_0x474178);if(_0x3ee0e2&&typeof _0x3ee0e2[_0x480519(0x1c4)]===_0x480519(0x19c)){const _0x2faf31=_0x3ee0e2['val'];_0x2faf31!==ECO_TEMP&&await manageMpcIntervention(_0x47031f,_0x26873e,_0x480519(0x217));if(_0x2e513d>0x1e)_0x2faf31>ECO_TEMP+0.5&&(_0x47031f[_0x480519(0x188)][_0x480519(0x225)](_0x480519(0x1ae)+_0x26873e+_0x480519(0x1e2)+ECO_TEMP+_0x480519(0x192)+_0x2e513d+_0x480519(0x197)),await _0x47031f[_0x480519(0x22a)](_0x474178,ECO_TEMP),await manageMpcIntervention(_0x47031f,_0x26873e,_0x480519(0x185)),lastActions['mpc_'+_0x26873e]=_0x17a84f,await logAutomationAction(_0x47031f,'[MPC]\x20'+_0x26873e+_0x480519(0x1d1)+ECO_TEMP+'¬∞C'));else _0x2e513d<=0xf&&(_0x2faf31<_0xf9d4d5&&(_0x47031f[_0x480519(0x188)][_0x480519(0x225)]('üî•\x20[MPC\x20ACTION]\x20Heize\x20'+_0x26873e+_0x480519(0x1a0)+_0xf9d4d5+_0x480519(0x1ed)),await _0x47031f[_0x480519(0x22a)](_0x474178,_0xf9d4d5),await manageMpcIntervention(_0x47031f,_0x26873e,'remove'),lastActions[_0x480519(0x1a5)+_0x26873e]=_0x17a84f,await logAutomationAction(_0x47031f,_0x480519(0x234)+_0x26873e+_0x480519(0x219)+_0xf9d4d5+'¬∞C')));}}else _0x47031f[_0x480519(0x188)]['warn'](_0x480519(0x1d3)+_0x26873e+_0x480519(0x1f5));}}function a1_0x296f(_0x1bc5a2,_0x563085){const _0x5422c3=a1_0x4c46();return a1_0x296f=function(_0x6a7b16,_0x312c0e){_0x6a7b16=_0x6a7b16-0x185;let _0x4c4603=_0x5422c3[_0x6a7b16];return _0x4c4603;},a1_0x296f(_0x1bc5a2,_0x563085);}module[a1_0x4d6312(0x23a)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};