const a1_0x8f3c24=a1_0x3e27;(function(_0x75460c,_0x1cbd30){const _0x5640d6=a1_0x3e27,_0x120264=_0x75460c();while(!![]){try{const _0x5e6a82=parseInt(_0x5640d6(0x1cf))/0x1+-parseInt(_0x5640d6(0x1e0))/0x2+-parseInt(_0x5640d6(0x1f1))/0x3+parseInt(_0x5640d6(0x1f0))/0x4*(-parseInt(_0x5640d6(0x1d5))/0x5)+-parseInt(_0x5640d6(0x1d1))/0x6+parseInt(_0x5640d6(0x1f7))/0x7*(-parseInt(_0x5640d6(0x1e9))/0x8)+parseInt(_0x5640d6(0x1fc))/0x9;if(_0x5e6a82===_0x1cbd30)break;else _0x120264['push'](_0x120264['shift']());}catch(_0x110d25){_0x120264['push'](_0x120264['shift']());}}}(a1_0x5de4,0x4a25d));function a1_0x3e27(_0x3b9248,_0x51816c){const _0x105aaa=a1_0x5de4();return a1_0x3e27=function(_0xce2b88,_0x1a5b61){_0xce2b88=_0xce2b88-0x1ce;let _0x5de41a=_0x105aaa[_0xce2b88];return _0x5de41a;},a1_0x3e27(_0x3b9248,_0x51816c);}const a1_0x1a5b61=(function(){let _0x5c62af=!![];return function(_0x3fe516,_0x20dbbe){const _0x38bec4=_0x5c62af?function(){const _0x441c01=a1_0x3e27;if(_0x20dbbe){const _0x32db9b=_0x20dbbe[_0x441c01(0x1e4)](_0x3fe516,arguments);return _0x20dbbe=null,_0x32db9b;}}:function(){};return _0x5c62af=![],_0x38bec4;};}()),a1_0xce2b88=a1_0x1a5b61(this,function(){const _0x41d650=a1_0x3e27;return a1_0xce2b88[_0x41d650(0x1f5)]()[_0x41d650(0x1de)](_0x41d650(0x1ce))['toString']()[_0x41d650(0x1d6)](a1_0xce2b88)['search'](_0x41d650(0x1ce));});a1_0xce2b88();'use strict';const aiAgent=require(a1_0x8f3c24(0x1f3)),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function a1_0x5de4(){const _0x3a8884=['toUpperCase','3125928IrURsE','debug','trim','\x27\x20(norm:\x20\x27','now','PrÃ¤diktion:\x20','âš¡\x20ACTION:\x20','704FQfsFF','1267725OQZiAu','devices','./ai_agent','val','toString','\x20->\x20','7DcREYa','log','getForeignStateAsync','setForeignStateAsync','active','18361404TksjLD','analysis.automation.mode','(((.+)+)+)+$','309596pRSHDl','getStateAsync','2688690luZjVQ','name','analysis.automation.lastAction','exports','8320VgBOTf','constructor','\x20->\x20Schalte\x20','approved','ðŸ‘€\x20SIMULATION:\x20','toLowerCase','reason','location','type','search','light','983496Ehgghz','info','switch','off','apply','find','setStateAsync','replace'];a1_0x5de4=function(){return _0x3a8884;};return a1_0x5de4();}function normalize(_0x33e5dd){const _0x526366=a1_0x8f3c24;if(!_0x33e5dd)return'';return _0x33e5dd[_0x526366(0x1da)]()[_0x526366(0x1e7)](/\s+/g,'')[_0x526366(0x1eb)]();}async function handlePrediction(_0x31db38,_0x116c2d,_0x51fdf1){const _0x53a29d=a1_0x8f3c24;if(!_0x116c2d||_0x116c2d==='Unknown')return;let _0x4de0c7=_0x53a29d(0x1e3),_0x287f70=0.6;try{const _0x42c978=await _0x31db38[_0x53a29d(0x1d0)](_0x53a29d(0x1fd));if(_0x42c978&&_0x42c978[_0x53a29d(0x1f4)])_0x4de0c7=_0x42c978[_0x53a29d(0x1f4)];const _0x2ad5d8=await _0x31db38[_0x53a29d(0x1d0)]('analysis.automation.confidenceThreshold');if(_0x2ad5d8&&_0x2ad5d8[_0x53a29d(0x1f4)])_0x287f70=_0x2ad5d8['val'];}catch(_0x14770c){}if(_0x4de0c7===_0x53a29d(0x1e3))return;if(_0x51fdf1<_0x287f70)return;const _0xe095e9=Date[_0x53a29d(0x1ed)]();if(lastActions[_0x116c2d]&&_0xe095e9-lastActions[_0x116c2d]<COOLDOWN_MS)return;const _0x15f267=_0x31db38['config'][_0x53a29d(0x1f2)]||[],_0x57b416=normalize(_0x116c2d),_0x36b311=_0x15f267[_0x53a29d(0x1e5)](_0x27372d=>{const _0x18f40a=_0x53a29d;return normalize(_0x27372d[_0x18f40a(0x1dc)])===_0x57b416&&(_0x27372d[_0x18f40a(0x1dd)]===_0x18f40a(0x1df)||_0x27372d[_0x18f40a(0x1dd)]==='dimmer'||_0x27372d[_0x18f40a(0x1dd)]===_0x18f40a(0x1e2));});if(!_0x36b311){const _0x16a6f9='ðŸ”\x20Device-Search\x20failed:\x20Predicted\x20\x27'+_0x116c2d+_0x53a29d(0x1ec)+_0x57b416+'\x27),\x20but\x20found\x20no\x20matching\x20light\x20device.';_0x31db38[_0x53a29d(0x1f8)][_0x53a29d(0x1ea)](_0x16a6f9);return;}const _0x452a9e=await aiAgent['consultButler'](_0x31db38,_0x116c2d,_0x36b311[_0x53a29d(0x1d2)],_0x51fdf1);if(!_0x452a9e[_0x53a29d(0x1d8)]){_0x31db38['log'][_0x53a29d(0x1ea)]('ðŸ¤–\x20Butler\x20Blocked:\x20'+_0x116c2d+_0x53a29d(0x1f6)+_0x452a9e[_0x53a29d(0x1db)]),await _0x31db38[_0x53a29d(0x1e6)](_0x53a29d(0x1d3),{'val':'[BLOCKED]\x20'+_0x452a9e['reason'],'ack':!![]});return;}const _0x1cae7f=_0x53a29d(0x1ee)+_0x116c2d+_0x53a29d(0x1d7)+_0x36b311[_0x53a29d(0x1d2)]+'\x20('+_0x452a9e['reason']+')';await _0x31db38[_0x53a29d(0x1e6)](_0x53a29d(0x1d3),{'val':'['+_0x4de0c7[_0x53a29d(0x1e8)]()+']\x20'+_0x1cae7f,'ack':!![]});if(_0x4de0c7==='simulate')_0x31db38[_0x53a29d(0x1f8)][_0x53a29d(0x1e1)](_0x53a29d(0x1d9)+_0x1cae7f);else{if(_0x4de0c7===_0x53a29d(0x1fb)){_0x31db38[_0x53a29d(0x1f8)][_0x53a29d(0x1e1)](_0x53a29d(0x1ef)+_0x1cae7f);const _0x567c19=await _0x31db38[_0x53a29d(0x1f9)](_0x36b311['id']);if(_0x567c19&&(_0x567c19[_0x53a29d(0x1f4)]===!![]||_0x567c19['val']>0x0)){}else await _0x31db38[_0x53a29d(0x1fa)](_0x36b311['id'],!![]);lastActions[_0x116c2d]=_0xe095e9;}}}module[a1_0x8f3c24(0x1d4)]={'handlePrediction':handlePrediction};