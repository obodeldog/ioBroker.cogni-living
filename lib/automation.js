const a1_0xb5251d=a1_0x41af;function a1_0x41af(_0x3f94cd,_0x21434c){const _0x5d75e2=a1_0x3b16();return a1_0x41af=function(_0x50ebb8,_0x5f3c77){_0x50ebb8=_0x50ebb8-0x83;let _0x3b1624=_0x5d75e2[_0x50ebb8];return _0x3b1624;},a1_0x41af(_0x3f94cd,_0x21434c);}(function(_0xa5e1fd,_0x1b5ae1){const _0x45f7bd=a1_0x41af,_0x528eb6=_0xa5e1fd();while(!![]){try{const _0x406db8=parseInt(_0x45f7bd(0xd7))/0x1*(-parseInt(_0x45f7bd(0x100))/0x2)+-parseInt(_0x45f7bd(0xaf))/0x3*(parseInt(_0x45f7bd(0xab))/0x4)+-parseInt(_0x45f7bd(0xca))/0x5*(parseInt(_0x45f7bd(0xe6))/0x6)+-parseInt(_0x45f7bd(0x143))/0x7+-parseInt(_0x45f7bd(0x12b))/0x8*(-parseInt(_0x45f7bd(0xa9))/0x9)+-parseInt(_0x45f7bd(0xc8))/0xa*(-parseInt(_0x45f7bd(0x129))/0xb)+parseInt(_0x45f7bd(0x8c))/0xc;if(_0x406db8===_0x1b5ae1)break;else _0x528eb6['push'](_0x528eb6['shift']());}catch(_0x188e68){_0x528eb6['push'](_0x528eb6['shift']());}}}(a1_0x3b16,0x1d8e1));const a1_0x5f3c77=(function(){let _0x345d56=!![];return function(_0x4b3ecd,_0x10182b){const _0x21c7f7=_0x345d56?function(){const _0x43b44a=a1_0x41af;if(_0x10182b){const _0x36905e=_0x10182b[_0x43b44a(0xd6)](_0x4b3ecd,arguments);return _0x10182b=null,_0x36905e;}}:function(){};return _0x345d56=![],_0x21c7f7;};}()),a1_0x50ebb8=a1_0x5f3c77(this,function(){const _0x11a5ca=a1_0x41af;return a1_0x50ebb8[_0x11a5ca(0x121)]()['search']('(((.+)+)+)+$')[_0x11a5ca(0x121)]()[_0x11a5ca(0xa2)](a1_0x50ebb8)['search']('(((.+)+)+)+$');});a1_0x50ebb8();'use strict';const aiAgent=require(a1_0xb5251d(0xcf)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0xc24a2d){const _0xe82b13=a1_0xb5251d;if(!_0xc24a2d)return'';return _0xc24a2d[_0xe82b13(0xa3)]()['replace'](/\s+/g,'')[_0xe82b13(0xd2)]();}async function logAutomationAction(_0x1a13b4,_0x3dc532){const _0x25bcb9=a1_0xb5251d;await _0x1a13b4['setStateAsync'](_0x25bcb9(0xbf),{'val':_0x3dc532,'ack':!![]});try{const _0x47b2fd=_0x25bcb9(0x146),_0x47ba21=await _0x1a13b4[_0x25bcb9(0x10f)](_0x47b2fd);let _0x5380e1=[];if(_0x47ba21&&_0x47ba21[_0x25bcb9(0x102)])try{_0x5380e1=JSON[_0x25bcb9(0x93)](_0x47ba21[_0x25bcb9(0x102)]);}catch(_0x52bc5f){}_0x5380e1['unshift']({'ts':Date[_0x25bcb9(0x13f)](),'msg':_0x3dc532});if(_0x5380e1[_0x25bcb9(0xc1)]>0x32)_0x5380e1=_0x5380e1[_0x25bcb9(0x9d)](0x0,0x32);await _0x1a13b4[_0x25bcb9(0x11a)](_0x47b2fd,{'val':JSON[_0x25bcb9(0x13b)](_0x5380e1),'ack':!![]});}catch(_0x502ba8){}}async function handlePrediction(_0x2641ba,_0x33dbfa,_0x43094d){const _0x699f7=a1_0xb5251d;if(!_0x33dbfa||_0x33dbfa===_0x699f7(0xdc))return;let _0x3bcedb='off',_0x424910=0.6;try{const _0x4d2e0c=await _0x2641ba[_0x699f7(0x10f)](_0x699f7(0xba));if(_0x4d2e0c&&_0x4d2e0c[_0x699f7(0x102)])_0x3bcedb=_0x4d2e0c[_0x699f7(0x102)];const _0x53d973=await _0x2641ba[_0x699f7(0x10f)](_0x699f7(0xb5));if(_0x53d973&&_0x53d973[_0x699f7(0x102)])_0x424910=_0x53d973[_0x699f7(0x102)];}catch(_0x2b3599){}if(_0x3bcedb===_0x699f7(0x9c)||_0x43094d<_0x424910)return;const _0x2ac3e7=Date[_0x699f7(0x13f)]();if(lastActions[_0x33dbfa]&&_0x2ac3e7-lastActions[_0x33dbfa]<COOLDOWN_MS)return;const _0xe3706a=_0x2641ba['config'][_0x699f7(0x10b)]||[],_0x7e8421=normalize(_0x33dbfa),_0x329b55=_0xe3706a[_0x699f7(0x87)](_0x53eccf=>normalize(_0x53eccf[_0x699f7(0xc0)])===_0x7e8421&&(_0x53eccf[_0x699f7(0x101)]===_0x699f7(0x94)||_0x53eccf['type']==='dimmer'||_0x53eccf[_0x699f7(0x101)]===_0x699f7(0xb0)));if(!_0x329b55)return;const _0x113b17=await aiAgent[_0x699f7(0x134)](_0x2641ba,_0x33dbfa,_0x329b55[_0x699f7(0x12d)],_0x43094d);if(!_0x113b17[_0x699f7(0xde)])return;const _0x3ae785='PrÃ¤diktion:\x20'+_0x33dbfa+_0x699f7(0xf9)+_0x329b55['name']+'\x20('+_0x113b17[_0x699f7(0x12e)]+')';await logAutomationAction(_0x2641ba,'['+_0x3bcedb[_0x699f7(0x10a)]()+']\x20'+_0x3ae785);if(_0x3bcedb===_0x699f7(0xe5)){const _0x1d2f3b=await _0x2641ba[_0x699f7(0xf2)](_0x329b55['id']);(!_0x1d2f3b||!_0x1d2f3b[_0x699f7(0x102)]&&_0x1d2f3b[_0x699f7(0x102)]!==!![])&&await _0x2641ba[_0x699f7(0x128)](_0x329b55['id'],!![]),lastActions[_0x33dbfa]=_0x2ac3e7;}}async function findRelatedId(_0x12aa05,_0x322bfa,_0x30fabe=a1_0xb5251d(0x92)){const _0x3dacf3=a1_0xb5251d;if(_0x30fabe===_0x3dacf3(0x92)&&_0x12aa05['config'][_0x3dacf3(0x144)]){let _0x410781=_0x12aa05[_0x3dacf3(0x98)][_0x3dacf3(0x144)];if(typeof _0x410781===_0x3dacf3(0xcc))try{_0x410781=JSON[_0x3dacf3(0x93)](_0x410781);}catch(_0x501ad9){}if(_0x410781&&_0x410781[_0x322bfa])return _0x410781[_0x322bfa];}if(_0x30fabe==='valve'&&_0x12aa05[_0x3dacf3(0x98)]['valveMapping']){let _0x362225=_0x12aa05[_0x3dacf3(0x98)][_0x3dacf3(0xd5)];if(typeof _0x362225===_0x3dacf3(0xcc))try{_0x362225=JSON[_0x3dacf3(0x93)](_0x362225);}catch(_0x137786){}if(_0x362225&&_0x362225[_0x322bfa])return _0x362225[_0x322bfa];}let _0x3cef09=[];if(_0x30fabe===_0x3dacf3(0x92))_0x3cef09=[{'s':'.1.ACTUAL_TEMPERATURE','t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x3dacf3(0x133),'t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x3dacf3(0x133),'t':'.4.SET_TEMPERATURE'},{'s':_0x3dacf3(0xd8),'t':_0x3dacf3(0xa0)},{'s':_0x3dacf3(0x10c),'t':_0x3dacf3(0x90)},{'s':_0x3dacf3(0x10c),'t':_0x3dacf3(0x103)},{'s':_0x3dacf3(0x9e),'t':_0x3dacf3(0x10e)},{'s':_0x3dacf3(0x120),'t':_0x3dacf3(0xa4)},{'s':_0x3dacf3(0x97),'t':_0x3dacf3(0x99)},{'s':'temperature','t':_0x3dacf3(0x92)}];else _0x30fabe==='valve'&&(_0x3cef09=[{'s':'.1.ACTUAL_TEMPERATURE','t':_0x3dacf3(0xeb)},{'s':'.1.TEMPERATURE','t':_0x3dacf3(0xeb)},{'s':_0x3dacf3(0x133),'t':_0x3dacf3(0x137)},{'s':_0x3dacf3(0x10c),'t':_0x3dacf3(0xfe)},{'s':_0x3dacf3(0x9e),'t':_0x3dacf3(0xc3)},{'s':_0x3dacf3(0x9e),'t':'level'}]);for(const _0x152667 of _0x3cef09){if(_0x322bfa['includes'](_0x152667['s'])){const _0x3f9190=_0x322bfa[_0x3dacf3(0xa5)](_0x152667['s'],_0x152667['t']),_0xbfafcf=await _0x12aa05[_0x3dacf3(0xef)](_0x3f9190);if(_0xbfafcf)return _0x3f9190;}}try{const _0x2c0a24=_0x322bfa[_0x3dacf3(0xf1)]('.');if(_0x2c0a24['length']>0x2){const _0x565e92=_0x2c0a24[_0x3dacf3(0x9d)](0x0,-0x1)[_0x3dacf3(0x11e)]('.'),_0x586572=await _0x12aa05[_0x3dacf3(0x12f)](_0x565e92+'.*'),_0x16f5bd=[],_0x4c5317=_0x322bfa['split'](/[._]+/)['filter'](_0x1cddd2=>![_0x3dacf3(0xff),'0',_0x3dacf3(0xee),'ist',_0x3dacf3(0xe7),'temperature','actual',_0x3dacf3(0x88),'messwert',_0x3dacf3(0xe1)][_0x3dacf3(0x140)](_0x1cddd2[_0x3dacf3(0xa3)]()));for(const [_0xe7b064,_0xce2b0e]of Object['entries'](_0x586572)){if(_0xe7b064===_0x322bfa)continue;if(_0xce2b0e&&_0xce2b0e[_0x3dacf3(0x9a)]){const _0x16baa8=_0xe7b064[_0x3dacf3(0xa3)](),_0x84dc66=(_0xce2b0e['common'][_0x3dacf3(0x8f)]||'')[_0x3dacf3(0xa3)](),_0xbb486f=(_0xce2b0e[_0x3dacf3(0x9a)][_0x3dacf3(0xb8)]||'')[_0x3dacf3(0xa3)]();let _0x5f2e33=![];if(_0x30fabe==='setpoint'&&_0xce2b0e[_0x3dacf3(0x9a)][_0x3dacf3(0x13c)]===!![])_0x5f2e33=_0x16baa8['includes'](_0x3dacf3(0xf4))||_0x16baa8[_0x3dacf3(0x140)]('soll')||_0x16baa8[_0x3dacf3(0x140)](_0x3dacf3(0x13a))||_0x84dc66[_0x3dacf3(0x140)](_0x3dacf3(0x11f))||_0x84dc66[_0x3dacf3(0x140)](_0x3dacf3(0xc5));else _0x30fabe===_0x3dacf3(0xdd)&&(_0x5f2e33=_0x16baa8[_0x3dacf3(0x140)](_0x3dacf3(0x111))||_0x16baa8[_0x3dacf3(0x140)](_0x3dacf3(0xdd))||_0x16baa8[_0x3dacf3(0x140)]('stellwert')||_0x16baa8['includes'](_0x3dacf3(0xe9))||_0x84dc66[_0x3dacf3(0x140)](_0x3dacf3(0x9f))||_0x84dc66[_0x3dacf3(0x140)](_0x3dacf3(0x85))||_0xbb486f[_0x3dacf3(0x140)]('%'));if(_0x5f2e33){const _0x12d2e2=_0xe7b064[_0x3dacf3(0xf1)](/[._]+/)['map'](_0x25c997=>_0x25c997['toLowerCase']());let _0x22d3d4=0x0;_0x4c5317['forEach'](_0x559eec=>{const _0x6a551e=_0x3dacf3;if(_0x12d2e2[_0x6a551e(0x140)](_0x559eec['toLowerCase']()))_0x22d3d4++;}),_0x16f5bd[_0x3dacf3(0xc6)]({'id':_0xe7b064,'score':_0x22d3d4});}}}if(_0x16f5bd[_0x3dacf3(0xc1)]>0x0){_0x16f5bd['sort']((_0x2a1fe8,_0x3e3056)=>_0x3e3056[_0x3dacf3(0x122)]-_0x2a1fe8[_0x3dacf3(0x122)]);if(_0x16f5bd[0x0][_0x3dacf3(0x122)]>0x0)return _0x16f5bd[0x0]['id'];}}}catch(_0x4cd05a){}return null;}async function scanThermostats(_0x1824c0){const _0x42200e=a1_0xb5251d,_0x4d7918=_0x1824c0[_0x42200e(0x98)][_0x42200e(0x10b)]||[],_0x4402fd=[],_0x22657b=_0x4d7918[_0x42200e(0x114)](_0x143ea7=>_0x143ea7['id']&&_0x143ea7['id'][_0x42200e(0x140)]('temperature')||_0x143ea7[_0x42200e(0x101)]&&[_0x42200e(0x9e),_0x42200e(0x142),_0x42200e(0x88)][_0x42200e(0x140)](_0x143ea7['type'])||_0x143ea7['name']&&_0x143ea7[_0x42200e(0x12d)][_0x42200e(0xa3)]()[_0x42200e(0x140)](_0x42200e(0x139)));for(const _0x5a174b of _0x22657b){const _0x81428c=await findRelatedId(_0x1824c0,_0x5a174b['id'],_0x42200e(0x92)),_0x24378e=await findRelatedId(_0x1824c0,_0x5a174b['id'],'valve');let _0x1581ff=_0x42200e(0x10d),_0x218306=![],_0x501c89=_0x1824c0[_0x42200e(0x98)]['thermostatMapping']||{};if(typeof _0x501c89===_0x42200e(0xcc))try{_0x501c89=JSON['parse'](_0x501c89);}catch(_0x35b0ec){}let _0x519882=_0x1824c0[_0x42200e(0x98)][_0x42200e(0xd5)]||{};if(typeof _0x519882===_0x42200e(0xcc))try{_0x519882=JSON[_0x42200e(0x93)](_0x519882);}catch(_0x3b8be4){}if(_0x501c89[_0x5a174b['id']]&&_0x501c89[_0x5a174b['id']]===_0x81428c||_0x519882[_0x5a174b['id']]&&_0x519882[_0x5a174b['id']]===_0x24378e)_0x1581ff='Manuelles\x20Mapping',_0x218306=!![];else(_0x81428c||_0x24378e)&&(_0x1581ff=_0x42200e(0xd4));_0x4402fd[_0x42200e(0xc6)]({'room':_0x5a174b[_0x42200e(0xc0)]||_0x42200e(0xa7),'sensorId':_0x5a174b['id'],'setpointId':_0x81428c||'-','valveId':_0x24378e||'-','source':_0x1581ff,'isManual':_0x218306,'status':_0x81428c&&_0x24378e?'PERFECT':_0x81428c?'OK':'Fehlt'});}return _0x4402fd['sort']((_0x4b0b96,_0x2a76c4)=>_0x4b0b96[_0x42200e(0xf3)]['localeCompare'](_0x2a76c4[_0x42200e(0xf3)]));}async function updateSchedulePreview(_0x4b5d36){const _0x1626ba=a1_0xb5251d;if(!_0x4b5d36[_0x1626ba(0x98)][_0x1626ba(0x124)]||!_0x4b5d36[_0x1626ba(0x98)]['calendarInstance'])return;let _0x57cb5d={};try{const _0x248376=await _0x4b5d36['getStateAsync']('analysis.energy.warmupTimes');if(_0x248376&&_0x248376['val'])_0x57cb5d=JSON[_0x1626ba(0x93)](_0x248376[_0x1626ba(0x102)]);}catch(_0x52e8df){}const _0x5d7fb6=[],_0x1e49ca=Date['now'](),_0x1a50fa=0x30*0x3c*0x3c*0x3e8;try{const _0x5e4e45=await _0x4b5d36[_0x1626ba(0xf2)](_0x4b5d36['config'][_0x1626ba(0x126)]+'.data.table');if(!_0x5e4e45||!_0x5e4e45[_0x1626ba(0x102)])return;const _0x131f8f=JSON['parse'](_0x5e4e45[_0x1626ba(0x102)]),_0x17ab13=_0x4b5d36[_0x1626ba(0x98)][_0x1626ba(0xf5)]||[],_0x164590=_0x4b5d36[_0x1626ba(0x98)][_0x1626ba(0x10b)]||[],_0x11da7a=new Set();_0x164590[_0x1626ba(0xd9)](_0x4233e8=>{const _0x33c58a=_0x1626ba;if(_0x4233e8[_0x33c58a(0xc0)])_0x11da7a[_0x33c58a(0x145)](_0x4233e8[_0x33c58a(0xc0)]);});for(const _0x3a1cff of _0x131f8f){if(_0x3a1cff[_0x1626ba(0xfb)]&&_0x17ab13[_0x1626ba(0xc1)]>0x0&&!_0x17ab13[_0x1626ba(0x140)](_0x3a1cff[_0x1626ba(0xfb)]))continue;const _0xc91982=_0x3a1cff[_0x1626ba(0x135)]||_0x3a1cff[_0x1626ba(0x11d)]||_0x3a1cff[_0x1626ba(0xb6)];if(!_0xc91982)continue;const _0x13321a=new Date(_0xc91982),_0x571f42=_0x13321a[_0x1626ba(0xac)]();if(isNaN(_0x571f42))continue;if(_0x571f42<_0x1e49ca)continue;if(_0x571f42>_0x1e49ca+_0x1a50fa)continue;const _0x388a79=(_0x3a1cff[_0x1626ba(0x84)]||_0x3a1cff['summary']||'')[_0x1626ba(0xa3)]();let _0x50b711=![],_0x59045f=[],_0x5ad626=_0x3a1cff[_0x1626ba(0x84)]||_0x3a1cff['summary']||_0x1626ba(0xa7);if(_0x388a79[_0x1626ba(0x140)](_0x1626ba(0x117))||_0x388a79[_0x1626ba(0x140)](_0x1626ba(0xb3))||_0x388a79[_0x1626ba(0x140)](_0x1626ba(0xc7)))_0x50b711=!![],_0x59045f=Array[_0x1626ba(0xce)](_0x11da7a);else for(const _0xff4f62 of _0x11da7a){if(_0x388a79[_0x1626ba(0x140)](_0xff4f62[_0x1626ba(0xa3)]()))_0x59045f[_0x1626ba(0xc6)](_0xff4f62);}_0x59045f[_0x1626ba(0xc1)]>0x0&&_0x59045f[_0x1626ba(0xd9)](_0xa23b9a=>{const _0x4c09a3=_0x1626ba;let _0x71031e=0x3c;if(_0x50b711){let _0x282e2e=0x0;Object[_0x4c09a3(0xe3)](_0x57cb5d)[_0x4c09a3(0xd9)](_0x124bf5=>{if(_0x124bf5>_0x282e2e)_0x282e2e=_0x124bf5;}),_0x71031e=_0x282e2e>0x0?_0x282e2e:0x78;}else _0x71031e=_0x57cb5d[_0xa23b9a]||0x3c;const _0x5de10d=new Date(_0x571f42-_0x71031e*0xea60);_0x5d7fb6[_0x4c09a3(0xc6)]({'eventTime':_0x571f42,'triggerTime':_0x5de10d[_0x4c09a3(0xac)](),'room':_0xa23b9a,'minutes':_0x71031e,'reason':_0x5ad626,'isGlobal':_0x50b711});});}}catch(_0x2b23d4){}_0x5d7fb6['sort']((_0x4a4919,_0xfaea25)=>_0x4a4919[_0x1626ba(0x95)]-_0xfaea25[_0x1626ba(0x95)]);const _0x3ef631=_0x5d7fb6[_0x1626ba(0x9d)](0x0,0x5);await _0x4b5d36['setStateAsync'](_0x1626ba(0xec),{'val':JSON['stringify'](_0x3ef631),'ack':!![]});}function a1_0x3b16(){const _0x2cd384=['position','\x20ist\x20auf\x20','.1.LEVEL','analysis.energy.schedulePreview','\x20gefunden!','hm-rpc','getForeignObjectAsync','Â°C).\x20Entferne\x20Status.','split','getForeignStateAsync','room','set','calendarSelection','\x27\x20(Match:\x20','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','analysis.energy.warmupSources','\x20->\x20Schalte\x20','analysis.energy.activeEnforcements','_calName','isArray','remove','pi_heating_demand','openknx','1186AjTLXg','type','val','current_heating_setpoint','ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27','Enforcement\x20Monitor\x20Error:\x20','Classic','splice','Â°C).\x20Sparmodus\x20beendet!','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','toUpperCase','devices','local_temperature','Nicht\x20gefunden','target_temperature','getStateAsync','.data.table','level','\x20erreicht\x20Limit\x20(','warn','filter','open',')\x20aktiv.\x20Heize\x20auf\x20','urlaub\x20ende','Â°C!\x20(Puffer:\x20','sendToPythonWrapper','setStateAsync','[MPC]\x20','Â°C\x20(via\x20','eventStart','join','level.temperature','ACTUAL','toString','score','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','useCalendar','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','calendarInstance','rescue_','setForeignStateAsync','187UIopCs','minutes_safe','1236232ezULbX','until','name','reason','getForeignObjectsAsync','getHours','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','.1.TEMPERATURE','consultButler','_date','message','.4.VALVE_STATE','log','temp','target','stringify','write','findIndex','contact','now','includes','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','thermostat','924938YCTqNF','thermostatMapping','add','analysis.automation.actionLog','error','_meta','event','value.valve','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','find','sensor','\x20auf\x20','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','window','6062556CarOZA','normal','manual','role','occupied_heating_setpoint','Â°C\x20(nicht\x20','setpoint','parse','light','triggerTime','ðŸ“…\x20SMART\x20SCHEDULE\x20[','Ist','config','Soll','common','info','off','slice','temperature','level.valve','SET_POINT_TEMPERATURE','Â°C\x20(Kalender-Schutz)','constructor','toLowerCase','SET','replace','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','Unbekannt','analysis.energy.warmupTargets','9JJEdbc','too_cold','7428jJJtbl','getTime','mpc_','number','102ahwYUM','switch','TRAIN_RL_PENALTY','Calendar\x20Check\x20Error:\x20','rÃ¼ckkehr','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','analysis.automation.confidenceThreshold','date',':\x20Aufheizen\x20auf\x20','unit',']:\x20Raum-Trigger\x20\x27','analysis.automation.mode','entries','analysis.energy.warmupTimes','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','default','analysis.automation.lastAction','location','length','analysis.energy.mpcActiveInterventions','valve_position','ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','thermostat.setpoint','push','ankunft','63780PfFTQQ','Â°C\x20->\x20','567730KJkhnu','[WATCHDOG]\x20','string','Â°C!\x20(Puffer\x20leer).','from','./ai_agent','Â°C.',':\x20Absenkung\x20auf\x20','trim','abs','Auto-Erkennung','valveMapping','apply','379tdzOGh','ACTUAL_TEMPERATURE','forEach','cal_','system.mode','Unknown','valve','approved','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','\x20wieder\x20auf\x20','state',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','values','\x20min).','active','12VTOnKN','wert','\x20->\x20'];a1_0x3b16=function(){return _0x2cd384;};return a1_0x3b16();}async function monitorEnforcements(_0x3be8c5){const _0x554e03=a1_0xb5251d;try{const _0x41384a='analysis.energy.activeEnforcements',_0x580d14=await _0x3be8c5[_0x554e03(0x10f)](_0x41384a);if(!_0x580d14||!_0x580d14[_0x554e03(0x102)])return;let _0x5944c6=[];try{_0x5944c6=JSON[_0x554e03(0x93)](_0x580d14[_0x554e03(0x102)]);}catch(_0x33410e){return;}if(!Array[_0x554e03(0xfc)](_0x5944c6)||_0x5944c6[_0x554e03(0xc1)]===0x0)return;const _0x47255c=Date[_0x554e03(0x13f)](),_0x196925=_0x3be8c5[_0x554e03(0x98)][_0x554e03(0x10b)]||[];let _0x3d01e6=![];for(let _0x27b3d8=_0x5944c6[_0x554e03(0xc1)]-0x1;_0x27b3d8>=0x0;_0x27b3d8--){const _0x3f3631=_0x5944c6[_0x27b3d8];if(_0x47255c>=_0x3f3631[_0x554e03(0x12c)]){_0x3be8c5['log'][_0x554e03(0x9b)](_0x554e03(0x86)+_0x3f3631[_0x554e03(0xf3)]+_0x554e03(0xdf)),_0x5944c6[_0x554e03(0x107)](_0x27b3d8,0x1),_0x3d01e6=!![];continue;}const _0xb0eff4=_0x196925[_0x554e03(0x87)](_0x20ef55=>normalize(_0x20ef55['location'])===normalize(_0x3f3631[_0x554e03(0xf3)])&&(_0x20ef55[_0x554e03(0x101)]===_0x554e03(0x9e)||_0x20ef55[_0x554e03(0x101)]===_0x554e03(0x142)));if(_0xb0eff4){const _0x384ab8=await findRelatedId(_0x3be8c5,_0xb0eff4['id'],_0x554e03(0x92));if(_0x384ab8){const _0x595ef2=await _0x3be8c5[_0x554e03(0xf2)](_0x384ab8);_0x595ef2&&typeof _0x595ef2['val']===_0x554e03(0xae)&&(_0x595ef2[_0x554e03(0x102)]<0xf&&(_0x3be8c5[_0x554e03(0x138)]['warn'](_0x554e03(0xc4)+_0x3f3631[_0x554e03(0xf3)]+_0x554e03(0x89)+_0x595ef2[_0x554e03(0x102)]+_0x554e03(0x141)+_0x3f3631[_0x554e03(0x13a)]+_0x554e03(0xd0)),await _0x3be8c5[_0x554e03(0x128)](_0x384ab8,_0x3f3631[_0x554e03(0x13a)]),await logAutomationAction(_0x3be8c5,'[FORCE]\x20'+_0x3f3631['room']+':\x20'+_0x595ef2[_0x554e03(0x102)]+_0x554e03(0xc9)+_0x3f3631[_0x554e03(0x13a)]+_0x554e03(0xa1))));}}}_0x3d01e6&&await _0x3be8c5[_0x554e03(0x11a)](_0x41384a,{'val':JSON[_0x554e03(0x13b)](_0x5944c6),'ack':!![]});}catch(_0x33208a){_0x3be8c5['log'][_0x554e03(0x147)](_0x554e03(0x105)+_0x33208a[_0x554e03(0x136)]);}}async function checkCalendarTriggers(_0x319877){const _0x1a9fb0=a1_0xb5251d;if(!_0x319877[_0x1a9fb0(0x98)][_0x1a9fb0(0x124)]||!_0x319877['config'][_0x1a9fb0(0x126)])return;await updateSchedulePreview(_0x319877);let _0x143b78={},_0x1e4415={};try{const _0x4e1996=await _0x319877[_0x1a9fb0(0x10f)](_0x1a9fb0(0xbc));if(_0x4e1996&&_0x4e1996['val'])_0x143b78=JSON['parse'](_0x4e1996[_0x1a9fb0(0x102)]);const _0x304993=await _0x319877[_0x1a9fb0(0x10f)](_0x1a9fb0(0xf8));if(_0x304993&&_0x304993['val'])_0x1e4415=JSON['parse'](_0x304993[_0x1a9fb0(0x102)]);}catch(_0x333da0){}let _0x2abeeb={'default':0x15};try{const _0x2e0dbc=await _0x319877[_0x1a9fb0(0x10f)]('analysis.energy.warmupTargets');if(_0x2e0dbc&&_0x2e0dbc[_0x1a9fb0(0x102)])_0x2abeeb=JSON[_0x1a9fb0(0x93)](_0x2e0dbc['val']);}catch(_0x1c2c0c){}let _0x55d907=[];try{const _0x3bb731=await _0x319877[_0x1a9fb0(0x10f)](_0x1a9fb0(0xfa));if(_0x3bb731&&_0x3bb731['val'])_0x55d907=JSON[_0x1a9fb0(0x93)](_0x3bb731[_0x1a9fb0(0x102)]);}catch(_0x5a12f7){}try{const _0x176c8b=await _0x319877[_0x1a9fb0(0xf2)](_0x319877[_0x1a9fb0(0x98)][_0x1a9fb0(0x126)]+_0x1a9fb0(0x110));if(!_0x176c8b||!_0x176c8b[_0x1a9fb0(0x102)])return;const _0x2ee93f=JSON['parse'](_0x176c8b[_0x1a9fb0(0x102)]),_0x2401f2=Date[_0x1a9fb0(0x13f)](),_0x4b406e=_0x319877[_0x1a9fb0(0x98)][_0x1a9fb0(0x10b)]||[],_0x3f3b63=_0x319877[_0x1a9fb0(0x98)][_0x1a9fb0(0xf5)]||[];let _0x687e7c=![];for(const _0x2e56c3 of _0x2ee93f){if(_0x2e56c3[_0x1a9fb0(0xfb)]&&_0x3f3b63[_0x1a9fb0(0xc1)]>0x0&&!_0x3f3b63[_0x1a9fb0(0x140)](_0x2e56c3[_0x1a9fb0(0xfb)]))continue;const _0x33cbcd=_0x2e56c3['_date']||_0x2e56c3[_0x1a9fb0(0x11d)]||_0x2e56c3['date'];if(!_0x33cbcd)continue;const _0x4bbe85=new Date(_0x33cbcd);if(isNaN(_0x4bbe85[_0x1a9fb0(0xac)]()))continue;const _0x9017=(_0x2e56c3[_0x1a9fb0(0x84)]||_0x2e56c3['summary']||'')[_0x1a9fb0(0xa3)]();if(_0x9017['includes'](_0x1a9fb0(0x117))||_0x9017['includes'](_0x1a9fb0(0xb3))||_0x9017[_0x1a9fb0(0x140)](_0x1a9fb0(0xc7))){let _0x1868f5=0x0;Object['values'](_0x143b78)[_0x1a9fb0(0xd9)](_0xd43f62=>{if(_0xd43f62>_0x1868f5)_0x1868f5=_0xd43f62;});if(_0x1868f5===0x0)_0x1868f5=0x78;const _0xf5f172=_0x4bbe85['getTime']()-_0x1868f5*0xea60;_0x2401f2>=_0xf5f172&&_0x2401f2<_0x4bbe85[_0x1a9fb0(0xac)]()&&(_0x319877['currentSystemMode']!==_0x1a9fb0(0x8d)&&(_0x319877['log']['info'](_0x1a9fb0(0xbd)+_0x1868f5+_0x1a9fb0(0xe4)),await _0x319877[_0x1a9fb0(0x11a)](_0x1a9fb0(0xdb),{'val':_0x1a9fb0(0x8d),'ack':![]})));}for(const _0x4015e4 of _0x4b406e){if(_0x4015e4[_0x1a9fb0(0xc0)]){const _0x3b3fbc=_0x4015e4[_0x1a9fb0(0xc0)][_0x1a9fb0(0xa3)](),_0x1bc6c2=(_0x4015e4[_0x1a9fb0(0x12d)]||'')[_0x1a9fb0(0xa3)]();let _0x52c53a=_0x9017[_0x1a9fb0(0x140)](_0x3b3fbc);!_0x52c53a&&_0x1bc6c2['length']>0x3&&_0x9017[_0x1a9fb0(0x140)](_0x1bc6c2)&&(_0x52c53a=!![]);if(_0x52c53a){const _0x285a9f=_0x143b78[_0x4015e4[_0x1a9fb0(0xc0)]]||0x3c,_0xe66e1c=_0x1e4415[_0x4015e4[_0x1a9fb0(0xc0)]]||_0x1a9fb0(0x106),_0x551b1e=_0x4bbe85[_0x1a9fb0(0xac)]()-_0x285a9f*0xea60;if(_0x2401f2>=_0x551b1e&&_0x2401f2<_0x4bbe85['getTime']()){const _0x28e1dd=lastActions[_0x1a9fb0(0xda)+_0x4015e4[_0x1a9fb0(0xc0)]];if(_0x28e1dd&&_0x2401f2-_0x28e1dd<CAL_COOLDOWN_MS)continue;const _0x228bc6=await findRelatedId(_0x319877,_0x4015e4['id'],'setpoint');if(_0x228bc6){let _0x2b4cb1=_0x2abeeb[_0x4015e4[_0x1a9fb0(0xc0)]];if(_0x2b4cb1===undefined)_0x2b4cb1=_0x2abeeb[_0x1a9fb0(0xbe)];if(_0x2b4cb1===undefined)_0x2b4cb1=0x15;const _0x387bb6=await _0x319877[_0x1a9fb0(0xf2)](_0x228bc6);if(_0x387bb6&&typeof _0x387bb6['val']===_0x1a9fb0(0xae)&&_0x387bb6[_0x1a9fb0(0x102)]<_0x2b4cb1-0.5){_0x319877[_0x1a9fb0(0x138)][_0x1a9fb0(0x9b)](_0x1a9fb0(0x96)+_0xe66e1c+_0x1a9fb0(0xb9)+_0x4015e4['location']+_0x1a9fb0(0xf6)+_0x9017+_0x1a9fb0(0x116)+_0x2b4cb1+'Â°C\x20(Vorlauf:\x20'+_0x285a9f+_0x1a9fb0(0xe4)),await _0x319877['setForeignStateAsync'](_0x228bc6,_0x2b4cb1),await logAutomationAction(_0x319877,'[CAL]\x20'+_0x4015e4[_0x1a9fb0(0xc0)]+_0x1a9fb0(0xe8)+_0x2b4cb1+_0x1a9fb0(0x11c)+_0xe66e1c+')'),lastActions[_0x1a9fb0(0xda)+_0x4015e4[_0x1a9fb0(0xc0)]]=_0x2401f2;const _0x159a36=_0x55d907[_0x1a9fb0(0x13d)](_0x5a72fb=>_0x5a72fb['room']===_0x4015e4[_0x1a9fb0(0xc0)]);if(_0x159a36!==-0x1)_0x55d907['splice'](_0x159a36,0x1);_0x55d907[_0x1a9fb0(0xc6)]({'room':_0x4015e4[_0x1a9fb0(0xc0)],'target':_0x2b4cb1,'until':_0x4bbe85[_0x1a9fb0(0xac)]()}),_0x687e7c=!![];}}}}}}}_0x687e7c&&await _0x319877[_0x1a9fb0(0x11a)]('analysis.energy.activeEnforcements',{'val':JSON[_0x1a9fb0(0x13b)](_0x55d907),'ack':!![]});}catch(_0x3668d0){_0x319877[_0x1a9fb0(0x138)][_0x1a9fb0(0x113)](_0x1a9fb0(0xb2)+_0x3668d0[_0x1a9fb0(0x136)]);}}async function manageMpcIntervention(_0x26523a,_0x1a52e7,_0x4e806f){const _0x16936b=a1_0xb5251d;try{const _0x581470=_0x16936b(0xc2),_0x410370=await _0x26523a['getStateAsync'](_0x581470);let _0x5734c5=[];if(_0x410370&&_0x410370['val'])try{_0x5734c5=JSON[_0x16936b(0x93)](_0x410370[_0x16936b(0x102)]);}catch(_0x397818){}const _0x144883=_0x5734c5['indexOf'](_0x1a52e7);if(_0x4e806f===_0x16936b(0x145))_0x144883===-0x1&&(_0x5734c5[_0x16936b(0xc6)](_0x1a52e7),await _0x26523a[_0x16936b(0x11a)](_0x581470,{'val':JSON['stringify'](_0x5734c5),'ack':!![]}));else _0x4e806f===_0x16936b(0xfd)&&(_0x144883!==-0x1&&(_0x5734c5[_0x16936b(0x107)](_0x144883,0x1),await _0x26523a[_0x16936b(0x11a)](_0x581470,{'val':JSON[_0x16936b(0x13b)](_0x5734c5),'ack':!![]})));}catch(_0x2093ad){}}async function cleanupGhostInterventions(_0x141176){const _0x13da75=a1_0xb5251d;try{const _0x290d61=_0x13da75(0xc2),_0x456485=await _0x141176[_0x13da75(0x10f)](_0x290d61);if(!_0x456485||!_0x456485['val'])return;const _0x2c0367=JSON[_0x13da75(0x93)](_0x456485[_0x13da75(0x102)]);if(!Array[_0x13da75(0xfc)](_0x2c0367)||_0x2c0367['length']===0x0)return;let _0x5aa6bb={'default':0x15};try{const _0x538ed1=await _0x141176['getStateAsync'](_0x13da75(0xa8));if(_0x538ed1&&_0x538ed1[_0x13da75(0x102)])_0x5aa6bb=JSON[_0x13da75(0x93)](_0x538ed1[_0x13da75(0x102)]);}catch(_0x171068){}let _0x139149=[];try{const _0xf68b19=await _0x141176['getStateAsync']('analysis.energy.ventilationAlerts');if(_0xf68b19&&_0xf68b19[_0x13da75(0x102)])_0x139149=JSON['parse'](_0xf68b19[_0x13da75(0x102)]);}catch(_0x275d99){}let _0x570c80={},_0xeecf34=![];try{const _0x220fa4=await _0x141176['getStateAsync']('analysis.energy.rlPenalties');if(_0x220fa4&&_0x220fa4[_0x13da75(0x102)])_0x570c80=JSON[_0x13da75(0x93)](_0x220fa4[_0x13da75(0x102)]);}catch(_0x1c8d6b){}if(_0x570c80[_0x13da75(0x83)]){const _0x27e24b=Date[_0x13da75(0x13f)]();for(const [_0x330d5f,_0x98f6a]of Object[_0x13da75(0xbb)](_0x570c80[_0x13da75(0x83)])){_0x27e24b-_0x98f6a>PENALTY_TTL&&(delete _0x570c80[_0x330d5f],delete _0x570c80[_0x13da75(0x83)][_0x330d5f],_0xeecf34=!![],_0x141176[_0x13da75(0x138)][_0x13da75(0x9b)](_0x13da75(0x104)+_0x330d5f+_0x13da75(0x132)));}}const _0x30248a=_0x141176[_0x13da75(0x98)][_0x13da75(0x10b)]||[];let _0xa96975=![];for(let _0x4bf53a=_0x2c0367['length']-0x1;_0x4bf53a>=0x0;_0x4bf53a--){const _0x14fbce=_0x2c0367[_0x4bf53a],_0x5407a0=_0x30248a[_0x13da75(0x87)](_0x1ec4fa=>normalize(_0x1ec4fa[_0x13da75(0xc0)])===normalize(_0x14fbce)&&(_0x1ec4fa[_0x13da75(0x101)]===_0x13da75(0x9e)||_0x1ec4fa['type']==='thermostat'));if(!_0x5407a0){_0x141176[_0x13da75(0x138)][_0x13da75(0x113)](_0x13da75(0xa6)+_0x14fbce+_0x13da75(0x125)),_0x2c0367[_0x13da75(0x107)](_0x4bf53a,0x1),_0xa96975=!![];continue;}if(_0x5407a0){const _0x10b973=await findRelatedId(_0x141176,_0x5407a0['id'],_0x13da75(0x92)),_0x41a0e0=await _0x141176[_0x13da75(0xf2)](_0x5407a0['id']);if(_0x10b973){const _0x3796de=await _0x141176[_0x13da75(0xf2)](_0x10b973);if(_0x3796de&&typeof _0x3796de[_0x13da75(0x102)]==='number'){let _0x51fff7=![],_0x3a9285='';Math[_0x13da75(0xd3)](_0x3796de[_0x13da75(0x102)]-ECO_TEMP)>0.5&&(_0x51fff7=!![],_0x3a9285=_0x13da75(0x8e));if(!_0x51fff7&&_0x41a0e0&&typeof _0x41a0e0[_0x13da75(0x102)]===_0x13da75(0xae)){const _0x41485c=_0x5aa6bb[_0x14fbce]||_0x5aa6bb[_0x13da75(0xbe)]||0x15;_0x41a0e0[_0x13da75(0x102)]<_0x41485c+0.2&&(_0x51fff7=!![],_0x3a9285=_0x13da75(0xaa));}if(_0x51fff7){if(_0x3a9285===_0x13da75(0x8e)){_0x141176[_0x13da75(0x138)]['info']('ðŸ§¹\x20[MPC\x20CLEANUP]\x20'+_0x14fbce+_0x13da75(0xea)+_0x3796de[_0x13da75(0x102)]+_0x13da75(0x91)+ECO_TEMP+_0x13da75(0xf0));const _0x5c1490=lastActions[_0x13da75(0xda)+_0x14fbce],_0xfd19bf=_0x5c1490&&Date[_0x13da75(0x13f)]()-_0x5c1490<0x2*0x3c*0x3e8;if(!_0xfd19bf&&_0x3796de[_0x13da75(0x102)]>ECO_TEMP+0.5){_0x141176['sendToPythonWrapper']&&(_0x141176[_0x13da75(0x138)]['info'](_0x13da75(0x109)+_0x14fbce+'\x20wurde\x20manuell\x20erhÃ¶ht.'),_0x141176[_0x13da75(0x119)](_0x13da75(0xb1),{'room':_0x14fbce}));const _0xe1218c=_0x14fbce+'_'+new Date()[_0x13da75(0x130)]();if(!_0x570c80[_0xe1218c]){_0x570c80[_0xe1218c]=0x1;if(!_0x570c80[_0x13da75(0x83)])_0x570c80['_meta']={};_0x570c80[_0x13da75(0x83)][_0xe1218c]=Date[_0x13da75(0x13f)](),_0xeecf34=!![];}}else _0xfd19bf&&_0x141176[_0x13da75(0x138)][_0x13da75(0x9b)]('ðŸ“…\x20[MPC\x20INFO]\x20'+_0x14fbce+_0x13da75(0xb4));}else{if(_0x3a9285===_0x13da75(0xaa)){let _0x318c06=![];if(_0x139149[_0x13da75(0x87)](_0x2a686b=>_0x2a686b[_0x13da75(0xf3)]===_0x14fbce))_0x318c06=!![];const _0x27c3ed=_0x30248a[_0x13da75(0x114)](_0x3f7c7f=>normalize(_0x3f7c7f[_0x13da75(0xc0)])===normalize(_0x14fbce)&&(_0x3f7c7f[_0x13da75(0x101)]===_0x13da75(0x8b)||_0x3f7c7f[_0x13da75(0x101)]===_0x13da75(0x88)||_0x3f7c7f[_0x13da75(0x101)]===_0x13da75(0x13e)));for(const _0x232a2d of _0x27c3ed){try{const _0x1a908b=await _0x141176[_0x13da75(0xf2)](_0x232a2d['id']);if(_0x1a908b&&(_0x1a908b[_0x13da75(0x102)]===!![]||_0x1a908b['val']===0x1||String(_0x1a908b[_0x13da75(0x102)])['toLowerCase']()===_0x13da75(0x115)))_0x318c06=!![];}catch(_0x207818){}}if(_0x318c06)_0x141176[_0x13da75(0x138)][_0x13da75(0x9b)](_0x13da75(0x131)+_0x14fbce+'\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.');else{const _0x52fd5c=_0x5aa6bb[_0x14fbce]||_0x5aa6bb[_0x13da75(0xbe)]||0x15;_0x141176[_0x13da75(0x138)][_0x13da75(0x9b)]('ðŸš¨\x20[MPC\x20WATCHDOG]\x20'+_0x14fbce+_0x13da75(0x112)+_0x41a0e0[_0x13da75(0x102)]+'Â°C\x20<\x20'+(_0x52fd5c+0.2)+_0x13da75(0x108)),await _0x141176[_0x13da75(0x128)](_0x10b973,_0x52fd5c),await logAutomationAction(_0x141176,_0x13da75(0xcb)+_0x14fbce+_0x13da75(0xe2)+_0x52fd5c+'Â°C'),lastActions[_0x13da75(0x127)+_0x14fbce]=Date['now']();}}}_0x2c0367['splice'](_0x4bf53a,0x1),_0xa96975=!![];}}}}}_0xa96975&&await _0x141176[_0x13da75(0x11a)](_0x290d61,{'val':JSON[_0x13da75(0x13b)](_0x2c0367),'ack':!![]}),_0xeecf34&&await _0x141176[_0x13da75(0x11a)]('analysis.energy.rlPenalties',{'val':JSON[_0x13da75(0x13b)](_0x570c80),'ack':!![]});}catch(_0x1a5909){}}async function applyEnergySavings(_0x41f668,_0x105d99){const _0x416345=a1_0xb5251d;await cleanupGhostInterventions(_0x41f668);if(!_0x105d99||_0x105d99['length']===0x0)return;const _0x4316c8=_0x41f668['config']['devices']||[],_0x489fbc=Date[_0x416345(0x13f)]();for(const _0x281c28 of _0x105d99){const _0x5aaeee=_0x281c28[_0x416345(0xf3)],_0x12526e=_0x281c28[_0x416345(0x12a)],_0x2e20a6=_0x281c28['target']||0x15;if(lastActions[_0x416345(0x127)+_0x5aaeee]&&_0x489fbc-lastActions[_0x416345(0x127)+_0x5aaeee]<RESCUE_LOCK_MS)continue;const _0x451369=_0x4316c8[_0x416345(0x87)](_0x33125f=>normalize(_0x33125f[_0x416345(0xc0)])===normalize(_0x5aaeee)&&(_0x33125f[_0x416345(0x101)]==='temperature'||_0x33125f[_0x416345(0x101)]===_0x416345(0x142)));if(!_0x451369)continue;const _0x1c3420=await findRelatedId(_0x41f668,_0x451369['id'],'setpoint');if(_0x1c3420){if(lastActions[_0x416345(0xad)+_0x5aaeee]&&_0x489fbc-lastActions['mpc_'+_0x5aaeee]<0x1e*0x3c*0x3e8)continue;const _0x5873c1=await _0x41f668[_0x416345(0xf2)](_0x1c3420);if(_0x5873c1&&typeof _0x5873c1['val']===_0x416345(0xae)){const _0x42bd6e=_0x5873c1[_0x416345(0x102)];_0x42bd6e!==ECO_TEMP&&await manageMpcIntervention(_0x41f668,_0x5aaeee,_0x416345(0xfd));if(_0x12526e>0x1e)_0x42bd6e>ECO_TEMP+0.5&&(_0x41f668['log'][_0x416345(0x9b)](_0x416345(0x123)+_0x5aaeee+'\x20auf\x20'+ECO_TEMP+_0x416345(0x118)+_0x12526e+'\x20min)'),await _0x41f668[_0x416345(0x128)](_0x1c3420,ECO_TEMP),await manageMpcIntervention(_0x41f668,_0x5aaeee,_0x416345(0x145)),lastActions[_0x416345(0xad)+_0x5aaeee]=_0x489fbc,await logAutomationAction(_0x41f668,'[MPC]\x20'+_0x5aaeee+_0x416345(0xd1)+ECO_TEMP+'Â°C'));else _0x12526e<=0xf&&(_0x42bd6e<_0x2e20a6&&(_0x41f668['log'][_0x416345(0x9b)](_0x416345(0x8a)+_0x5aaeee+_0x416345(0xe0)+_0x2e20a6+_0x416345(0xcd)),await _0x41f668['setForeignStateAsync'](_0x1c3420,_0x2e20a6),await manageMpcIntervention(_0x41f668,_0x5aaeee,_0x416345(0xfd)),lastActions[_0x416345(0xad)+_0x5aaeee]=_0x489fbc,await logAutomationAction(_0x41f668,_0x416345(0x11b)+_0x5aaeee+_0x416345(0xb7)+_0x2e20a6+'Â°C')));}}else _0x41f668[_0x416345(0x138)][_0x416345(0x113)](_0x416345(0xf7)+_0x5aaeee+_0x416345(0xed));}}module['exports']={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};