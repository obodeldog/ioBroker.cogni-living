const a1_0x8d8e4f=a1_0x334f;(function(_0x1fb21f,_0x245b39){const _0x5bf87f=a1_0x334f,_0x4f8a4f=_0x1fb21f();while(!![]){try{const _0x27124a=parseInt(_0x5bf87f(0xb1))/0x1+-parseInt(_0x5bf87f(0x108))/0x2+-parseInt(_0x5bf87f(0xde))/0x3+-parseInt(_0x5bf87f(0xa8))/0x4*(-parseInt(_0x5bf87f(0x135))/0x5)+parseInt(_0x5bf87f(0xa9))/0x6+-parseInt(_0x5bf87f(0xeb))/0x7+parseInt(_0x5bf87f(0x12a))/0x8;if(_0x27124a===_0x245b39)break;else _0x4f8a4f['push'](_0x4f8a4f['shift']());}catch(_0x591ddb){_0x4f8a4f['push'](_0x4f8a4f['shift']());}}}(a1_0x43d7,0xce932));const a1_0x35ef2b=(function(){let _0xe3d373=!![];return function(_0x2c62fd,_0x1dd5a7){const _0x1f04b8=_0xe3d373?function(){if(_0x1dd5a7){const _0x549700=_0x1dd5a7['apply'](_0x2c62fd,arguments);return _0x1dd5a7=null,_0x549700;}}:function(){};return _0xe3d373=![],_0x1f04b8;};}()),a1_0x2e04cb=a1_0x35ef2b(this,function(){const _0x2645e9=a1_0x334f;return a1_0x2e04cb['toString']()[_0x2645e9(0xf4)](_0x2645e9(0xc6))['toString']()[_0x2645e9(0x10a)](a1_0x2e04cb)['search'](_0x2645e9(0xc6));});a1_0x2e04cb();'use strict';const aiAgent=require(a1_0x8d8e4f(0xc9)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x303af5){if(!_0x303af5)return'';return _0x303af5['toLowerCase']()['replace'](/\s+/g,'')['trim']();}function a1_0x43d7(){const _0x2c2703=['value.valve','analysis.energy.rlPenalties','current_heating_setpoint','message','sendToPythonWrapper','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','level','\x20erreicht\x20Limit\x20(','Â°C!\x20(Puffer:\x20','Calendar\x20Check\x20Error:\x20','sort',']:\x20Raum-Trigger\x20\x27','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','2069400NSBPEt','ACTUAL_TEMPERATURE','Nicht\x20gefunden','findIndex','score','join','target','Â°C\x20(Kalender-Schutz)','from','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','slice','187435xYpcHN','ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','push','event','find','Fehlt','calendarInstance','localeCompare','split','Â°C.','common','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','Â°C\x20->\x20','urlaub\x20ende','local_temperature','\x20wieder\x20auf\x20','approved','Â°C\x20(via\x20','date','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','remove','map','splice','Auto-Erkennung','default','add','stellwert','summary','entries','ankunft','indexOf','ðŸ“…\x20SMART\x20SCHEDULE\x20[','manual','ACTUAL','analysis.automation.lastAction','now','parse','log','openknx','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','number','switch','normal','SET_POINT_TEMPERATURE','consultButler','light','too_cold','[MPC]\x20','4YbaVez','5282712grtthz','analysis.energy.activeEnforcements','temperature','values','valve_position','sensor',':\x20Aufheizen\x20auf\x20','[FORCE]\x20','1315446dLgjMV',')\x20aktiv.\x20Heize\x20auf\x20','ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27','.1.ACTUAL_TEMPERATURE','setForeignStateAsync','[WATCHDOG]\x20','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','analysis.energy.warmupTimes','getTime','Â°C!\x20(Puffer\x20leer).','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','position','\x20gefunden!','rescue_','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','Â°C\x20(Vorlauf:\x20','includes','ðŸ“…\x20[MPC\x20INFO]\x20','filter','actual','.4.SET_TEMPERATURE','(((.+)+)+)+$','messwert','name','./ai_agent','unshift','\x20->\x20Schalte\x20','calendarSelection','dimmer','toLowerCase','_meta','\x20ist\x20auf\x20','.1.LEVEL','level.temperature','\x20min).','string','getForeignStateAsync','until','Â°C).\x20Sparmodus\x20beendet!','Unknown','.1.TEMPERATURE','toUpperCase','config','thermostatMapping','active','670203WypPyP','type','target_temperature','analysis.energy.warmupTargets','SET','location','eventStart','off','analysis.energy.warmupSources','triggerTime','room','\x27\x20(Match:\x20','setpoint','9933672EMUvoL','info','valveMapping','exports','set','mpc_','level.valve','setStateAsync','Classic','search','forEach','\x20auf\x20','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','\x20->\x20','window','_date','Enforcement\x20Monitor\x20Error:\x20','.1.SET_POINT_TEMPERATURE','cal_','getHours','ist','contact','.data.table','_calName','length','valve','[CAL]\x20','pi_heating_demand','val','6866qKuQUV','soll','constructor','PERFECT','Â°C).\x20Entferne\x20Status.','analysis.automation.actionLog','stringify','rÃ¼ckkehr','getStateAsync','replace','devices','Â°C\x20(nicht\x20','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','isArray','write','thermostat','\x20min)','getForeignObjectAsync','open','warn'];a1_0x43d7=function(){return _0x2c2703;};return a1_0x43d7();}function getWarmupRobust(_0x167040,_0x1b3faf){const _0x249156=a1_0x8d8e4f;if(!_0x167040||!_0x1b3faf)return 0x3c;if(_0x167040[_0x1b3faf]!==undefined)return _0x167040[_0x1b3faf];const _0xff8b6e=_0x1b3faf['toLowerCase']()[_0x249156(0x111)](/Ã¤/g,'ae')['replace'](/Ã¶/g,'oe')[_0x249156(0x111)](/Ã¼/g,'ue')[_0x249156(0x111)](/ÃŸ/g,'ss')['replace'](/\s+/g,'_')['replace'](/[^a-z0-9_]/g,'');if(_0x167040[_0xff8b6e]!==undefined)return _0x167040[_0xff8b6e];return 0x3c;}async function logAutomationAction(_0x275c3d,_0x4bb04a){const _0x1e1c07=a1_0x8d8e4f;await _0x275c3d[_0x1e1c07(0xf2)](_0x1e1c07(0x9a),{'val':_0x4bb04a,'ack':!![]});try{const _0x204695=_0x1e1c07(0x10d),_0x3dec7f=await _0x275c3d[_0x1e1c07(0x110)](_0x204695);let _0x567043=[];if(_0x3dec7f&&_0x3dec7f['val'])try{_0x567043=JSON[_0x1e1c07(0x9c)](_0x3dec7f[_0x1e1c07(0x107)]);}catch(_0x2973c5){}_0x567043[_0x1e1c07(0xca)]({'ts':Date[_0x1e1c07(0x9b)](),'msg':_0x4bb04a});if(_0x567043[_0x1e1c07(0x103)]>0x32)_0x567043=_0x567043['slice'](0x0,0x32);await _0x275c3d[_0x1e1c07(0xf2)](_0x204695,{'val':JSON['stringify'](_0x567043),'ack':!![]});}catch(_0x1b818a){}}async function handlePrediction(_0x57d45a,_0x4524e5,_0x4fdf18){const _0x4d0a11=a1_0x8d8e4f;if(!_0x4524e5||_0x4524e5===_0x4d0a11(0xd8))return;let _0x561e36='off',_0x5a29a8=0.6;try{const _0x37aba7=await _0x57d45a[_0x4d0a11(0x110)]('analysis.automation.mode');if(_0x37aba7&&_0x37aba7[_0x4d0a11(0x107)])_0x561e36=_0x37aba7[_0x4d0a11(0x107)];const _0x18df8f=await _0x57d45a[_0x4d0a11(0x110)]('analysis.automation.confidenceThreshold');if(_0x18df8f&&_0x18df8f[_0x4d0a11(0x107)])_0x5a29a8=_0x18df8f[_0x4d0a11(0x107)];}catch(_0x451633){}if(_0x561e36===_0x4d0a11(0xe5)||_0x4fdf18<_0x5a29a8)return;const _0x519aaf=Date[_0x4d0a11(0x9b)]();if(lastActions[_0x4524e5]&&_0x519aaf-lastActions[_0x4524e5]<COOLDOWN_MS)return;const _0x4a82aa=_0x57d45a[_0x4d0a11(0xdb)][_0x4d0a11(0x112)]||[],_0x3f7376=normalize(_0x4524e5),_0x19dfc8=_0x4a82aa[_0x4d0a11(0x139)](_0xfeaeb=>normalize(_0xfeaeb['location'])===_0x3f7376&&(_0xfeaeb[_0x4d0a11(0xdf)]===_0x4d0a11(0xa5)||_0xfeaeb[_0x4d0a11(0xdf)]===_0x4d0a11(0xcd)||_0xfeaeb[_0x4d0a11(0xdf)]===_0x4d0a11(0xa1)));if(!_0x19dfc8)return;const _0x1b9675=await aiAgent[_0x4d0a11(0xa4)](_0x57d45a,_0x4524e5,_0x19dfc8[_0x4d0a11(0xc8)],_0x4fdf18);if(!_0x1b9675[_0x4d0a11(0x88)])return;const _0x216a34='PrÃ¤diktion:\x20'+_0x4524e5+_0x4d0a11(0xcb)+_0x19dfc8['name']+'\x20('+_0x1b9675['reason']+')';await logAutomationAction(_0x57d45a,'['+_0x561e36[_0x4d0a11(0xda)]()+']\x20'+_0x216a34);if(_0x561e36===_0x4d0a11(0xdd)){const _0x16521a=await _0x57d45a['getForeignStateAsync'](_0x19dfc8['id']);(!_0x16521a||!_0x16521a['val']&&_0x16521a[_0x4d0a11(0x107)]!==!![])&&await _0x57d45a['setForeignStateAsync'](_0x19dfc8['id'],!![]),lastActions[_0x4524e5]=_0x519aaf;}}async function findRelatedId(_0x40be16,_0x1cf33c,_0x211544=a1_0x8d8e4f(0xea)){const _0x402d67=a1_0x8d8e4f;if(_0x211544===_0x402d67(0xea)&&_0x40be16['config'][_0x402d67(0xdc)]){let _0x3d583a=_0x40be16[_0x402d67(0xdb)][_0x402d67(0xdc)];if(typeof _0x3d583a===_0x402d67(0xd4))try{_0x3d583a=JSON[_0x402d67(0x9c)](_0x3d583a);}catch(_0x5a88f0){}if(_0x3d583a&&_0x3d583a[_0x1cf33c])return _0x3d583a[_0x1cf33c];}if(_0x211544==='valve'&&_0x40be16[_0x402d67(0xdb)][_0x402d67(0xed)]){let _0x586c36=_0x40be16[_0x402d67(0xdb)][_0x402d67(0xed)];if(typeof _0x586c36===_0x402d67(0xd4))try{_0x586c36=JSON[_0x402d67(0x9c)](_0x586c36);}catch(_0x52d4f0){}if(_0x586c36&&_0x586c36[_0x1cf33c])return _0x586c36[_0x1cf33c];}let _0xab67ba=[];if(_0x211544===_0x402d67(0xea))_0xab67ba=[{'s':'.1.ACTUAL_TEMPERATURE','t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x402d67(0xd9),'t':_0x402d67(0xfc)},{'s':_0x402d67(0xd9),'t':_0x402d67(0xc5)},{'s':_0x402d67(0x12b),'t':_0x402d67(0xa3)},{'s':_0x402d67(0x86),'t':'occupied_heating_setpoint'},{'s':_0x402d67(0x86),'t':_0x402d67(0x11e)},{'s':_0x402d67(0xab),'t':_0x402d67(0xe0)},{'s':_0x402d67(0x99),'t':_0x402d67(0xe2)},{'s':'Ist','t':'Soll'},{'s':_0x402d67(0xab),'t':'setpoint'}];else _0x211544===_0x402d67(0x104)&&(_0xab67ba=[{'s':_0x402d67(0xb4),'t':_0x402d67(0xd1)},{'s':_0x402d67(0xd9),'t':_0x402d67(0xd1)},{'s':'.1.TEMPERATURE','t':'.4.VALVE_STATE'},{'s':'local_temperature','t':_0x402d67(0x106)},{'s':_0x402d67(0xab),'t':_0x402d67(0xad)},{'s':_0x402d67(0xab),'t':'level'}]);for(const _0x30c77b of _0xab67ba){if(_0x1cf33c[_0x402d67(0xc1)](_0x30c77b['s'])){const _0x3cd22a=_0x1cf33c['replace'](_0x30c77b['s'],_0x30c77b['t']),_0x4d7682=await _0x40be16[_0x402d67(0x119)](_0x3cd22a);if(_0x4d7682)return _0x3cd22a;}}try{const _0x22e56e=_0x1cf33c[_0x402d67(0x13d)]('.');if(_0x22e56e[_0x402d67(0x103)]>0x2){const _0x534eb3=_0x22e56e[_0x402d67(0x134)](0x0,-0x1)[_0x402d67(0x12f)]('.'),_0x599974=await _0x40be16['getForeignObjectsAsync'](_0x534eb3+'.*'),_0x4e3c61=[],_0x26c284=_0x1cf33c['split'](/[._]+/)[_0x402d67(0xc3)](_0x264bfd=>![_0x402d67(0x9e),'0','hm-rpc',_0x402d67(0xff),'wert',_0x402d67(0xab),_0x402d67(0xc4),_0x402d67(0xae),_0x402d67(0xc7),'state'][_0x402d67(0xc1)](_0x264bfd[_0x402d67(0xce)]()));for(const [_0x54ac96,_0x12f7dc]of Object[_0x402d67(0x94)](_0x599974)){if(_0x54ac96===_0x1cf33c)continue;if(_0x12f7dc&&_0x12f7dc[_0x402d67(0x13f)]){const _0x28dcf0=_0x54ac96[_0x402d67(0xce)](),_0x529e59=(_0x12f7dc[_0x402d67(0x13f)]['role']||'')[_0x402d67(0xce)](),_0x1c3a67=(_0x12f7dc[_0x402d67(0x13f)]['unit']||'')[_0x402d67(0xce)]();let _0x1db785=![];if(_0x211544==='setpoint'&&_0x12f7dc['common'][_0x402d67(0x116)]===!![])_0x1db785=_0x28dcf0[_0x402d67(0xc1)](_0x402d67(0xef))||_0x28dcf0[_0x402d67(0xc1)](_0x402d67(0x109))||_0x28dcf0[_0x402d67(0xc1)](_0x402d67(0x130))||_0x529e59[_0x402d67(0xc1)](_0x402d67(0xd2))||_0x529e59[_0x402d67(0xc1)]('thermostat.setpoint');else _0x211544===_0x402d67(0x104)&&(_0x1db785=_0x28dcf0[_0x402d67(0xc1)](_0x402d67(0x122))||_0x28dcf0['includes'](_0x402d67(0x104))||_0x28dcf0[_0x402d67(0xc1)](_0x402d67(0x92))||_0x28dcf0[_0x402d67(0xc1)](_0x402d67(0xbc))||_0x529e59[_0x402d67(0xc1)](_0x402d67(0xf1))||_0x529e59[_0x402d67(0xc1)](_0x402d67(0x11c))||_0x1c3a67[_0x402d67(0xc1)]('%'));if(_0x1db785){const _0x35bdb1=_0x54ac96[_0x402d67(0x13d)](/[._]+/)[_0x402d67(0x8d)](_0x3496d8=>_0x3496d8['toLowerCase']());let _0x987c53=0x0;_0x26c284[_0x402d67(0xf5)](_0x207995=>{const _0x1b71a1=_0x402d67;if(_0x35bdb1[_0x1b71a1(0xc1)](_0x207995['toLowerCase']()))_0x987c53++;}),_0x4e3c61[_0x402d67(0x137)]({'id':_0x54ac96,'score':_0x987c53});}}}if(_0x4e3c61[_0x402d67(0x103)]>0x0){_0x4e3c61[_0x402d67(0x126)]((_0x554cd7,_0x599344)=>_0x599344[_0x402d67(0x12e)]-_0x554cd7['score']);if(_0x4e3c61[0x0][_0x402d67(0x12e)]>0x0)return _0x4e3c61[0x0]['id'];}}}catch(_0x55e435){}return null;}async function scanThermostats(_0x3b8e6f){const _0xcc618e=a1_0x8d8e4f,_0x293b6d=_0x3b8e6f['config']['devices']||[],_0x1fc1b7=[],_0x48130a=_0x293b6d[_0xcc618e(0xc3)](_0x7031=>_0x7031['id']&&_0x7031['id'][_0xcc618e(0xc1)](_0xcc618e(0xab))||_0x7031['type']&&[_0xcc618e(0xab),_0xcc618e(0x117),_0xcc618e(0xae)][_0xcc618e(0xc1)](_0x7031['type'])||_0x7031['name']&&_0x7031['name'][_0xcc618e(0xce)]()['includes']('temp'));for(const _0x13c8cc of _0x48130a){const _0x4e55ca=await findRelatedId(_0x3b8e6f,_0x13c8cc['id'],_0xcc618e(0xea)),_0x44612c=await findRelatedId(_0x3b8e6f,_0x13c8cc['id'],_0xcc618e(0x104));let _0x487234=_0xcc618e(0x12c),_0x94153f=![],_0x3aec88=_0x3b8e6f[_0xcc618e(0xdb)][_0xcc618e(0xdc)]||{};if(typeof _0x3aec88===_0xcc618e(0xd4))try{_0x3aec88=JSON['parse'](_0x3aec88);}catch(_0x494b00){}let _0x3693dc=_0x3b8e6f[_0xcc618e(0xdb)][_0xcc618e(0xed)]||{};if(typeof _0x3693dc===_0xcc618e(0xd4))try{_0x3693dc=JSON['parse'](_0x3693dc);}catch(_0x1ee66b){}if(_0x3aec88[_0x13c8cc['id']]&&_0x3aec88[_0x13c8cc['id']]===_0x4e55ca||_0x3693dc[_0x13c8cc['id']]&&_0x3693dc[_0x13c8cc['id']]===_0x44612c)_0x487234='Manuelles\x20Mapping',_0x94153f=!![];else(_0x4e55ca||_0x44612c)&&(_0x487234=_0xcc618e(0x8f));_0x1fc1b7[_0xcc618e(0x137)]({'room':_0x13c8cc[_0xcc618e(0xe3)]||'Unbekannt','sensorId':_0x13c8cc['id'],'setpointId':_0x4e55ca||'-','valveId':_0x44612c||'-','source':_0x487234,'isManual':_0x94153f,'status':_0x4e55ca&&_0x44612c?_0xcc618e(0x10b):_0x4e55ca?'OK':_0xcc618e(0x13a)});}return _0x1fc1b7[_0xcc618e(0x126)]((_0x1fe5c3,_0x2ccb89)=>_0x1fe5c3[_0xcc618e(0xe8)][_0xcc618e(0x13c)](_0x2ccb89[_0xcc618e(0xe8)]));}async function updateSchedulePreview(_0x59cfb4){const _0x30db56=a1_0x8d8e4f;if(!_0x59cfb4[_0x30db56(0xdb)]['useCalendar']||!_0x59cfb4[_0x30db56(0xdb)][_0x30db56(0x13b)])return;let _0x370f6d={};try{const _0x440c90=await _0x59cfb4[_0x30db56(0x110)](_0x30db56(0xb8));if(_0x440c90&&_0x440c90[_0x30db56(0x107)])_0x370f6d=JSON[_0x30db56(0x9c)](_0x440c90[_0x30db56(0x107)]);}catch(_0x3093f3){}const _0x59a1b7=[],_0x43ea40=Date[_0x30db56(0x9b)](),_0x34a9ab=0x30*0x3c*0x3c*0x3e8;try{const _0x5ea26d=await _0x59cfb4[_0x30db56(0xd5)](_0x59cfb4['config'][_0x30db56(0x13b)]+_0x30db56(0x101));if(!_0x5ea26d||!_0x5ea26d[_0x30db56(0x107)])return;const _0x1ee0dd=JSON[_0x30db56(0x9c)](_0x5ea26d[_0x30db56(0x107)]),_0x299386=_0x59cfb4[_0x30db56(0xdb)][_0x30db56(0xcc)]||[],_0x54c8d5=_0x59cfb4['config']['devices']||[],_0x2a457a=new Set();_0x54c8d5[_0x30db56(0xf5)](_0x6e39ac=>{const _0x4dc45c=_0x30db56;if(_0x6e39ac[_0x4dc45c(0xe3)])_0x2a457a[_0x4dc45c(0x91)](_0x6e39ac[_0x4dc45c(0xe3)]);});for(const _0x3e9aab of _0x1ee0dd){if(_0x3e9aab['_calName']&&_0x299386[_0x30db56(0x103)]>0x0&&!_0x299386['includes'](_0x3e9aab[_0x30db56(0x102)]))continue;const _0x14d0a3=_0x3e9aab[_0x30db56(0xfa)]||_0x3e9aab[_0x30db56(0xe4)]||_0x3e9aab[_0x30db56(0x8a)];if(!_0x14d0a3)continue;const _0xfb67ff=new Date(_0x14d0a3),_0x437e95=_0xfb67ff['getTime']();if(isNaN(_0x437e95))continue;if(_0x437e95<_0x43ea40)continue;if(_0x437e95>_0x43ea40+_0x34a9ab)continue;const _0x50d4ed=(_0x3e9aab[_0x30db56(0x138)]||_0x3e9aab[_0x30db56(0x93)]||'')[_0x30db56(0xce)]();let _0x6ed372=![],_0x4e49f8=[],_0xdf6bb0=_0x3e9aab[_0x30db56(0x138)]||_0x3e9aab[_0x30db56(0x93)]||'Unbekannt';if(_0x50d4ed[_0x30db56(0xc1)](_0x30db56(0x85))||_0x50d4ed[_0x30db56(0xc1)]('rÃ¼ckkehr')||_0x50d4ed['includes'](_0x30db56(0x95)))_0x6ed372=!![],_0x4e49f8=Array[_0x30db56(0x132)](_0x2a457a);else for(const _0x1a6013 of _0x2a457a){if(_0x50d4ed[_0x30db56(0xc1)](_0x1a6013[_0x30db56(0xce)]()))_0x4e49f8[_0x30db56(0x137)](_0x1a6013);}_0x4e49f8[_0x30db56(0x103)]>0x0&&_0x4e49f8[_0x30db56(0xf5)](_0x4a6105=>{const _0x363d70=_0x30db56;let _0xac9eb6=0x3c;if(_0x6ed372){let _0x2e884a=0x0;Object[_0x363d70(0xac)](_0x370f6d)[_0x363d70(0xf5)](_0x5ca4d9=>{if(_0x5ca4d9>_0x2e884a)_0x2e884a=_0x5ca4d9;}),_0xac9eb6=_0x2e884a>0x0?_0x2e884a:0x78;}else _0xac9eb6=getWarmupRobust(_0x370f6d,_0x4a6105);const _0x1b3f7b=new Date(_0x437e95-_0xac9eb6*0xea60);_0x59a1b7['push']({'eventTime':_0x437e95,'triggerTime':_0x1b3f7b[_0x363d70(0xb9)](),'room':_0x4a6105,'minutes':_0xac9eb6,'reason':_0xdf6bb0,'isGlobal':_0x6ed372});});}}catch(_0x32369f){}_0x59a1b7['sort']((_0x7c8c5d,_0x5fdfb6)=>_0x7c8c5d['triggerTime']-_0x5fdfb6[_0x30db56(0xe7)]);const _0x3c2b08=_0x59a1b7['slice'](0x0,0x1e);await _0x59cfb4[_0x30db56(0xf2)]('analysis.energy.schedulePreview',{'val':JSON[_0x30db56(0x10e)](_0x3c2b08),'ack':!![]});}async function monitorEnforcements(_0x517da){const _0x56aa54=a1_0x8d8e4f;try{const _0x60af0b='analysis.energy.activeEnforcements',_0x10becb=await _0x517da['getStateAsync'](_0x60af0b);if(!_0x10becb||!_0x10becb['val'])return;let _0x4c65af=[];try{_0x4c65af=JSON[_0x56aa54(0x9c)](_0x10becb[_0x56aa54(0x107)]);}catch(_0x41981c){return;}if(!Array[_0x56aa54(0x115)](_0x4c65af)||_0x4c65af[_0x56aa54(0x103)]===0x0)return;const _0x5ca63a=Date['now'](),_0x2b5e75=_0x517da[_0x56aa54(0xdb)]['devices']||[];let _0x5a0744=![];for(let _0x4493dc=_0x4c65af[_0x56aa54(0x103)]-0x1;_0x4493dc>=0x0;_0x4493dc--){const _0x18a200=_0x4c65af[_0x4493dc];if(_0x5ca63a>=_0x18a200[_0x56aa54(0xd6)]){_0x517da['log'][_0x56aa54(0xec)]('ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20'+_0x18a200[_0x56aa54(0xe8)]+_0x56aa54(0xbb)),_0x4c65af[_0x56aa54(0x8e)](_0x4493dc,0x1),_0x5a0744=!![];continue;}const _0x4bb4dc=_0x2b5e75[_0x56aa54(0x139)](_0x1ec078=>normalize(_0x1ec078[_0x56aa54(0xe3)])===normalize(_0x18a200[_0x56aa54(0xe8)])&&(_0x1ec078['type']===_0x56aa54(0xab)||_0x1ec078[_0x56aa54(0xdf)]===_0x56aa54(0x117)));if(_0x4bb4dc){const _0x2f56ac=await findRelatedId(_0x517da,_0x4bb4dc['id'],_0x56aa54(0xea));if(_0x2f56ac){const _0x27fd43=await _0x517da['getForeignStateAsync'](_0x2f56ac);_0x27fd43&&typeof _0x27fd43[_0x56aa54(0x107)]==='number'&&(_0x27fd43[_0x56aa54(0x107)]<0xf&&(_0x517da[_0x56aa54(0x9d)][_0x56aa54(0x11b)](_0x56aa54(0x136)+_0x18a200['room']+_0x56aa54(0xf6)+_0x27fd43[_0x56aa54(0x107)]+'Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20'+_0x18a200['target']+_0x56aa54(0x13e)),await _0x517da[_0x56aa54(0xb5)](_0x2f56ac,_0x18a200[_0x56aa54(0x130)]),await logAutomationAction(_0x517da,_0x56aa54(0xb0)+_0x18a200['room']+':\x20'+_0x27fd43[_0x56aa54(0x107)]+_0x56aa54(0x84)+_0x18a200['target']+_0x56aa54(0x131))));}}}_0x5a0744&&await _0x517da[_0x56aa54(0xf2)](_0x60af0b,{'val':JSON[_0x56aa54(0x10e)](_0x4c65af),'ack':!![]});}catch(_0x1a653e){_0x517da[_0x56aa54(0x9d)]['error'](_0x56aa54(0xfb)+_0x1a653e[_0x56aa54(0x11f)]);}}function a1_0x334f(_0x2de060,_0x3ea2c3){const _0x3d0fa3=a1_0x43d7();return a1_0x334f=function(_0x2e04cb,_0x35ef2b){_0x2e04cb=_0x2e04cb-0x84;let _0x43d7c6=_0x3d0fa3[_0x2e04cb];return _0x43d7c6;},a1_0x334f(_0x2de060,_0x3ea2c3);}async function checkCalendarTriggers(_0x464bbc){const _0x346f7e=a1_0x8d8e4f;if(!_0x464bbc[_0x346f7e(0xdb)]['useCalendar']||!_0x464bbc[_0x346f7e(0xdb)][_0x346f7e(0x13b)])return;await updateSchedulePreview(_0x464bbc);let _0x27fa24={},_0x37c3da={};try{const _0x276729=await _0x464bbc[_0x346f7e(0x110)]('analysis.energy.warmupTimes');if(_0x276729&&_0x276729[_0x346f7e(0x107)])_0x27fa24=JSON[_0x346f7e(0x9c)](_0x276729[_0x346f7e(0x107)]);const _0x3a271a=await _0x464bbc[_0x346f7e(0x110)](_0x346f7e(0xe6));if(_0x3a271a&&_0x3a271a['val'])_0x37c3da=JSON[_0x346f7e(0x9c)](_0x3a271a[_0x346f7e(0x107)]);}catch(_0x2d8971){}let _0x385030={'default':0x15};try{const _0x3b26ea=await _0x464bbc[_0x346f7e(0x110)](_0x346f7e(0xe1));if(_0x3b26ea&&_0x3b26ea[_0x346f7e(0x107)])_0x385030=JSON[_0x346f7e(0x9c)](_0x3b26ea[_0x346f7e(0x107)]);}catch(_0x55896e){}let _0x2df48c=[];try{const _0x10d164=await _0x464bbc[_0x346f7e(0x110)](_0x346f7e(0xaa));if(_0x10d164&&_0x10d164['val'])_0x2df48c=JSON[_0x346f7e(0x9c)](_0x10d164['val']);}catch(_0x26adb4){}try{const _0x528372=await _0x464bbc['getForeignStateAsync'](_0x464bbc['config'][_0x346f7e(0x13b)]+_0x346f7e(0x101));if(!_0x528372||!_0x528372[_0x346f7e(0x107)])return;const _0x57bd0c=JSON[_0x346f7e(0x9c)](_0x528372[_0x346f7e(0x107)]),_0x553f7f=Date[_0x346f7e(0x9b)](),_0x215cbf=_0x464bbc[_0x346f7e(0xdb)][_0x346f7e(0x112)]||[],_0x2f82a2=_0x464bbc['config'][_0x346f7e(0xcc)]||[];let _0x385fb0=![];for(const _0x1cf15e of _0x57bd0c){if(_0x1cf15e[_0x346f7e(0x102)]&&_0x2f82a2[_0x346f7e(0x103)]>0x0&&!_0x2f82a2['includes'](_0x1cf15e[_0x346f7e(0x102)]))continue;const _0xa05e0d=_0x1cf15e[_0x346f7e(0xfa)]||_0x1cf15e[_0x346f7e(0xe4)]||_0x1cf15e[_0x346f7e(0x8a)];if(!_0xa05e0d)continue;const _0x5a21af=new Date(_0xa05e0d);if(isNaN(_0x5a21af['getTime']()))continue;const _0x369174=(_0x1cf15e[_0x346f7e(0x138)]||_0x1cf15e[_0x346f7e(0x93)]||'')[_0x346f7e(0xce)]();if(_0x369174['includes']('urlaub\x20ende')||_0x369174[_0x346f7e(0xc1)](_0x346f7e(0x10f))||_0x369174['includes']('ankunft')){let _0x348650=0x0;Object[_0x346f7e(0xac)](_0x27fa24)[_0x346f7e(0xf5)](_0x575f7e=>{if(_0x575f7e>_0x348650)_0x348650=_0x575f7e;});if(_0x348650===0x0)_0x348650=0x78;const _0x2965af=_0x5a21af[_0x346f7e(0xb9)]()-_0x348650*0xea60;_0x553f7f>=_0x2965af&&_0x553f7f<_0x5a21af[_0x346f7e(0xb9)]()&&(_0x464bbc['currentSystemMode']!==_0x346f7e(0xa2)&&(_0x464bbc[_0x346f7e(0x9d)][_0x346f7e(0xec)](_0x346f7e(0x129)+_0x348650+_0x346f7e(0xd3)),await _0x464bbc[_0x346f7e(0xf2)]('system.mode',{'val':_0x346f7e(0xa2),'ack':![]})));}for(const _0x48bdc8 of _0x215cbf){if(_0x48bdc8[_0x346f7e(0xe3)]){const _0x57b578=_0x48bdc8[_0x346f7e(0xe3)][_0x346f7e(0xce)](),_0x243948=(_0x48bdc8['name']||'')[_0x346f7e(0xce)]();let _0x4973b4=_0x369174[_0x346f7e(0xc1)](_0x57b578);!_0x4973b4&&_0x243948[_0x346f7e(0x103)]>0x3&&_0x369174[_0x346f7e(0xc1)](_0x243948)&&(_0x4973b4=!![]);if(_0x4973b4){const _0x59cf8=getWarmupRobust(_0x27fa24,_0x48bdc8[_0x346f7e(0xe3)]),_0xdeb1f1=_0x37c3da[_0x48bdc8[_0x346f7e(0xe3)]]||_0x346f7e(0xf3),_0x3a9d84=_0x5a21af[_0x346f7e(0xb9)]()-_0x59cf8*0xea60;if(_0x553f7f>=_0x3a9d84&&_0x553f7f<_0x5a21af['getTime']()){const _0xab08ce=lastActions[_0x346f7e(0xfd)+_0x48bdc8[_0x346f7e(0xe3)]];if(_0xab08ce&&_0x553f7f-_0xab08ce<CAL_COOLDOWN_MS)continue;const _0x8ee18b=await findRelatedId(_0x464bbc,_0x48bdc8['id'],'setpoint');if(_0x8ee18b){let _0x573bf8=_0x385030[_0x48bdc8['location']];if(_0x573bf8===undefined)_0x573bf8=_0x385030[_0x346f7e(0x90)];if(_0x573bf8===undefined)_0x573bf8=0x15;const _0x28caad=await _0x464bbc[_0x346f7e(0xd5)](_0x8ee18b);if(_0x28caad&&typeof _0x28caad[_0x346f7e(0x107)]==='number'&&_0x28caad[_0x346f7e(0x107)]<_0x573bf8-0.5){_0x464bbc[_0x346f7e(0x9d)]['info'](_0x346f7e(0x97)+_0xdeb1f1+_0x346f7e(0x127)+_0x48bdc8[_0x346f7e(0xe3)]+_0x346f7e(0xe9)+_0x369174+_0x346f7e(0xb2)+_0x573bf8+_0x346f7e(0xc0)+_0x59cf8+_0x346f7e(0xd3)),await _0x464bbc[_0x346f7e(0xb5)](_0x8ee18b,_0x573bf8),await logAutomationAction(_0x464bbc,_0x346f7e(0x105)+_0x48bdc8['location']+_0x346f7e(0xf8)+_0x573bf8+_0x346f7e(0x89)+_0xdeb1f1+')'),lastActions[_0x346f7e(0xfd)+_0x48bdc8['location']]=_0x553f7f;const _0x405830=_0x2df48c[_0x346f7e(0x12d)](_0x131d02=>_0x131d02[_0x346f7e(0xe8)]===_0x48bdc8[_0x346f7e(0xe3)]);if(_0x405830!==-0x1)_0x2df48c[_0x346f7e(0x8e)](_0x405830,0x1);_0x2df48c[_0x346f7e(0x137)]({'room':_0x48bdc8[_0x346f7e(0xe3)],'target':_0x573bf8,'until':_0x5a21af[_0x346f7e(0xb9)]()}),_0x385fb0=!![];}}}}}}}_0x385fb0&&await _0x464bbc[_0x346f7e(0xf2)](_0x346f7e(0xaa),{'val':JSON['stringify'](_0x2df48c),'ack':!![]});}catch(_0x4ee50d){_0x464bbc[_0x346f7e(0x9d)]['warn'](_0x346f7e(0x125)+_0x4ee50d[_0x346f7e(0x11f)]);}}async function manageMpcIntervention(_0x4401b9,_0x1c7371,_0x2027b1){const _0x432551=a1_0x8d8e4f;try{const _0xe1b470='analysis.energy.mpcActiveInterventions',_0x4dddcd=await _0x4401b9[_0x432551(0x110)](_0xe1b470);let _0x1694a1=[];if(_0x4dddcd&&_0x4dddcd[_0x432551(0x107)])try{_0x1694a1=JSON[_0x432551(0x9c)](_0x4dddcd[_0x432551(0x107)]);}catch(_0x4d8844){}const _0x34d1c6=_0x1694a1[_0x432551(0x96)](_0x1c7371);if(_0x2027b1==='add')_0x34d1c6===-0x1&&(_0x1694a1[_0x432551(0x137)](_0x1c7371),await _0x4401b9[_0x432551(0xf2)](_0xe1b470,{'val':JSON[_0x432551(0x10e)](_0x1694a1),'ack':!![]}));else _0x2027b1===_0x432551(0x8c)&&(_0x34d1c6!==-0x1&&(_0x1694a1[_0x432551(0x8e)](_0x34d1c6,0x1),await _0x4401b9[_0x432551(0xf2)](_0xe1b470,{'val':JSON[_0x432551(0x10e)](_0x1694a1),'ack':!![]})));}catch(_0x209965){}}async function cleanupGhostInterventions(_0x8e561c){const _0x29f2e8=a1_0x8d8e4f;try{const _0x4ca1c0='analysis.energy.mpcActiveInterventions',_0x4c73aa=await _0x8e561c[_0x29f2e8(0x110)](_0x4ca1c0);if(!_0x4c73aa||!_0x4c73aa[_0x29f2e8(0x107)])return;const _0x4e1d5c=JSON['parse'](_0x4c73aa[_0x29f2e8(0x107)]);if(!Array[_0x29f2e8(0x115)](_0x4e1d5c)||_0x4e1d5c[_0x29f2e8(0x103)]===0x0)return;let _0x58a25f={'default':0x15};try{const _0x59bfe6=await _0x8e561c[_0x29f2e8(0x110)](_0x29f2e8(0xe1));if(_0x59bfe6&&_0x59bfe6[_0x29f2e8(0x107)])_0x58a25f=JSON['parse'](_0x59bfe6[_0x29f2e8(0x107)]);}catch(_0x43c095){}let _0x5021d1=[];try{const _0x3c4b21=await _0x8e561c[_0x29f2e8(0x110)]('analysis.energy.ventilationAlerts');if(_0x3c4b21&&_0x3c4b21[_0x29f2e8(0x107)])_0x5021d1=JSON['parse'](_0x3c4b21[_0x29f2e8(0x107)]);}catch(_0x19406a){}let _0x3c2bb5={},_0x693fb0=![];try{const _0x1973f9=await _0x8e561c[_0x29f2e8(0x110)]('analysis.energy.rlPenalties');if(_0x1973f9&&_0x1973f9[_0x29f2e8(0x107)])_0x3c2bb5=JSON[_0x29f2e8(0x9c)](_0x1973f9[_0x29f2e8(0x107)]);}catch(_0x342721){}if(_0x3c2bb5[_0x29f2e8(0xcf)]){const _0x11dd14=Date[_0x29f2e8(0x9b)]();for(const [_0x310140,_0x5eaba0]of Object[_0x29f2e8(0x94)](_0x3c2bb5[_0x29f2e8(0xcf)])){_0x11dd14-_0x5eaba0>PENALTY_TTL&&(delete _0x3c2bb5[_0x310140],delete _0x3c2bb5['_meta'][_0x310140],_0x693fb0=!![],_0x8e561c[_0x29f2e8(0x9d)][_0x29f2e8(0xec)](_0x29f2e8(0xb3)+_0x310140+'\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.'));}}const _0x31fea4=_0x8e561c['config']['devices']||[];let _0x8d8021=![];for(let _0x2d0274=_0x4e1d5c[_0x29f2e8(0x103)]-0x1;_0x2d0274>=0x0;_0x2d0274--){const _0x4271dc=_0x4e1d5c[_0x2d0274],_0x30a490=_0x31fea4[_0x29f2e8(0x139)](_0x1dc977=>normalize(_0x1dc977['location'])===normalize(_0x4271dc)&&(_0x1dc977[_0x29f2e8(0xdf)]===_0x29f2e8(0xab)||_0x1dc977['type']==='thermostat'));if(!_0x30a490){_0x8e561c['log'][_0x29f2e8(0x11b)](_0x29f2e8(0x128)+_0x4271dc+'\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.'),_0x4e1d5c[_0x29f2e8(0x8e)](_0x2d0274,0x1),_0x8d8021=!![];continue;}if(_0x30a490){const _0x4086fa=await findRelatedId(_0x8e561c,_0x30a490['id'],_0x29f2e8(0xea)),_0x2e07ce=await _0x8e561c[_0x29f2e8(0xd5)](_0x30a490['id']);if(_0x4086fa){const _0x3991bb=await _0x8e561c[_0x29f2e8(0xd5)](_0x4086fa);if(_0x3991bb&&typeof _0x3991bb['val']===_0x29f2e8(0xa0)){let _0x426014=![],_0x3f8d56='';Math['abs'](_0x3991bb[_0x29f2e8(0x107)]-ECO_TEMP)>0.5&&(_0x426014=!![],_0x3f8d56=_0x29f2e8(0x98));if(!_0x426014&&_0x2e07ce&&typeof _0x2e07ce[_0x29f2e8(0x107)]===_0x29f2e8(0xa0)){const _0x255da1=_0x58a25f[_0x4271dc]||_0x58a25f[_0x29f2e8(0x90)]||0x15;_0x2e07ce['val']<_0x255da1+0.2&&(_0x426014=!![],_0x3f8d56=_0x29f2e8(0xa6));}if(_0x426014){if(_0x3f8d56===_0x29f2e8(0x98)){_0x8e561c[_0x29f2e8(0x9d)]['info'](_0x29f2e8(0xf7)+_0x4271dc+_0x29f2e8(0xd0)+_0x3991bb[_0x29f2e8(0x107)]+_0x29f2e8(0x113)+ECO_TEMP+_0x29f2e8(0x10c));const _0x5baa6b=lastActions[_0x29f2e8(0xfd)+_0x4271dc],_0x386c7b=_0x5baa6b&&Date[_0x29f2e8(0x9b)]()-_0x5baa6b<0x2*0x3c*0x3e8;if(!_0x386c7b&&_0x3991bb[_0x29f2e8(0x107)]>ECO_TEMP+0.5){_0x8e561c[_0x29f2e8(0x120)]&&(_0x8e561c['log']['info'](_0x29f2e8(0xb7)+_0x4271dc+'\x20wurde\x20manuell\x20erhÃ¶ht.'),_0x8e561c['sendToPythonWrapper']('TRAIN_RL_PENALTY',{'room':_0x4271dc}));const _0x2491f1=_0x4271dc+'_'+new Date()[_0x29f2e8(0xfe)]();if(!_0x3c2bb5[_0x2491f1]){_0x3c2bb5[_0x2491f1]=0x1;if(!_0x3c2bb5[_0x29f2e8(0xcf)])_0x3c2bb5[_0x29f2e8(0xcf)]={};_0x3c2bb5[_0x29f2e8(0xcf)][_0x2491f1]=Date[_0x29f2e8(0x9b)](),_0x693fb0=!![];}}else _0x386c7b&&_0x8e561c[_0x29f2e8(0x9d)][_0x29f2e8(0xec)](_0x29f2e8(0xc2)+_0x4271dc+_0x29f2e8(0x8b));}else{if(_0x3f8d56===_0x29f2e8(0xa6)){let _0x1bde0f=![];if(_0x5021d1['find'](_0x136aac=>_0x136aac['room']===_0x4271dc))_0x1bde0f=!![];const _0x597201=_0x31fea4[_0x29f2e8(0xc3)](_0x2dabe9=>normalize(_0x2dabe9[_0x29f2e8(0xe3)])===normalize(_0x4271dc)&&(_0x2dabe9[_0x29f2e8(0xdf)]===_0x29f2e8(0xf9)||_0x2dabe9['type']===_0x29f2e8(0xae)||_0x2dabe9[_0x29f2e8(0xdf)]===_0x29f2e8(0x100)));for(const _0x23d8d5 of _0x597201){try{const _0x2184a0=await _0x8e561c[_0x29f2e8(0xd5)](_0x23d8d5['id']);if(_0x2184a0&&(_0x2184a0['val']===!![]||_0x2184a0[_0x29f2e8(0x107)]===0x1||String(_0x2184a0['val'])[_0x29f2e8(0xce)]()===_0x29f2e8(0x11a)))_0x1bde0f=!![];}catch(_0x37fd28){}}if(_0x1bde0f)_0x8e561c[_0x29f2e8(0x9d)]['info'](_0x29f2e8(0x140)+_0x4271dc+_0x29f2e8(0x114));else{const _0x1071b8=_0x58a25f[_0x4271dc]||_0x58a25f['default']||0x15;_0x8e561c[_0x29f2e8(0x9d)][_0x29f2e8(0xec)](_0x29f2e8(0x9f)+_0x4271dc+_0x29f2e8(0x123)+_0x2e07ce[_0x29f2e8(0x107)]+'Â°C\x20<\x20'+(_0x1071b8+0.2)+_0x29f2e8(0xd7)),await _0x8e561c[_0x29f2e8(0xb5)](_0x4086fa,_0x1071b8),await logAutomationAction(_0x8e561c,_0x29f2e8(0xb6)+_0x4271dc+':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20'+_0x1071b8+'Â°C'),lastActions[_0x29f2e8(0xbe)+_0x4271dc]=Date[_0x29f2e8(0x9b)]();}}}_0x4e1d5c[_0x29f2e8(0x8e)](_0x2d0274,0x1),_0x8d8021=!![];}}}}}_0x8d8021&&await _0x8e561c[_0x29f2e8(0xf2)](_0x4ca1c0,{'val':JSON[_0x29f2e8(0x10e)](_0x4e1d5c),'ack':!![]}),_0x693fb0&&await _0x8e561c[_0x29f2e8(0xf2)](_0x29f2e8(0x11d),{'val':JSON[_0x29f2e8(0x10e)](_0x3c2bb5),'ack':!![]});}catch(_0x51421c){}}async function applyEnergySavings(_0x13e18e,_0xdc6cc5){const _0xccee10=a1_0x8d8e4f;await cleanupGhostInterventions(_0x13e18e);if(!_0xdc6cc5||_0xdc6cc5[_0xccee10(0x103)]===0x0)return;const _0x4dca64=_0x13e18e[_0xccee10(0xdb)][_0xccee10(0x112)]||[],_0x1031e4=Date[_0xccee10(0x9b)]();for(const _0x130f70 of _0xdc6cc5){const _0x740371=_0x130f70[_0xccee10(0xe8)],_0x505a83=_0x130f70['minutes_safe'],_0x1e4e1a=_0x130f70[_0xccee10(0x130)]||0x15;if(lastActions[_0xccee10(0xbe)+_0x740371]&&_0x1031e4-lastActions[_0xccee10(0xbe)+_0x740371]<RESCUE_LOCK_MS)continue;const _0x36b1c7=_0x4dca64[_0xccee10(0x139)](_0x26b960=>normalize(_0x26b960[_0xccee10(0xe3)])===normalize(_0x740371)&&(_0x26b960[_0xccee10(0xdf)]===_0xccee10(0xab)||_0x26b960[_0xccee10(0xdf)]===_0xccee10(0x117)));if(!_0x36b1c7)continue;const _0x189207=await findRelatedId(_0x13e18e,_0x36b1c7['id'],'setpoint');if(_0x189207){if(lastActions['mpc_'+_0x740371]&&_0x1031e4-lastActions[_0xccee10(0xf0)+_0x740371]<0x1e*0x3c*0x3e8)continue;const _0x3d6242=await _0x13e18e[_0xccee10(0xd5)](_0x189207);if(_0x3d6242&&typeof _0x3d6242[_0xccee10(0x107)]===_0xccee10(0xa0)){const _0x2f4bc1=_0x3d6242[_0xccee10(0x107)];_0x2f4bc1!==ECO_TEMP&&await manageMpcIntervention(_0x13e18e,_0x740371,_0xccee10(0x8c));if(_0x505a83>0x1e)_0x2f4bc1>ECO_TEMP+0.5&&(_0x13e18e[_0xccee10(0x9d)][_0xccee10(0xec)](_0xccee10(0x121)+_0x740371+_0xccee10(0xf6)+ECO_TEMP+_0xccee10(0x124)+_0x505a83+_0xccee10(0x118)),await _0x13e18e[_0xccee10(0xb5)](_0x189207,ECO_TEMP),await manageMpcIntervention(_0x13e18e,_0x740371,_0xccee10(0x91)),lastActions[_0xccee10(0xf0)+_0x740371]=_0x1031e4,await logAutomationAction(_0x13e18e,_0xccee10(0xa7)+_0x740371+':\x20Absenkung\x20auf\x20'+ECO_TEMP+'Â°C'));else _0x505a83<=0xf&&(_0x2f4bc1<_0x1e4e1a&&(_0x13e18e[_0xccee10(0x9d)][_0xccee10(0xec)](_0xccee10(0xbf)+_0x740371+_0xccee10(0x87)+_0x1e4e1a+_0xccee10(0xba)),await _0x13e18e['setForeignStateAsync'](_0x189207,_0x1e4e1a),await manageMpcIntervention(_0x13e18e,_0x740371,_0xccee10(0x8c)),lastActions[_0xccee10(0xf0)+_0x740371]=_0x1031e4,await logAutomationAction(_0x13e18e,'[MPC]\x20'+_0x740371+_0xccee10(0xaf)+_0x1e4e1a+'Â°C')));}}else _0x13e18e[_0xccee10(0x9d)]['warn'](_0xccee10(0x133)+_0x740371+_0xccee10(0xbd));}}module[a1_0x8d8e4f(0xee)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};