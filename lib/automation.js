const a1_0x40e161=a1_0x3982;(function(_0xdb7d36,_0x1287cb){const _0x461df5=a1_0x3982,_0x24e932=_0xdb7d36();while(!![]){try{const _0x4b2658=parseInt(_0x461df5(0x148))/0x1*(-parseInt(_0x461df5(0x153))/0x2)+parseInt(_0x461df5(0x186))/0x3+-parseInt(_0x461df5(0x137))/0x4*(-parseInt(_0x461df5(0x164))/0x5)+parseInt(_0x461df5(0x12e))/0x6+-parseInt(_0x461df5(0x178))/0x7+parseInt(_0x461df5(0x151))/0x8*(-parseInt(_0x461df5(0x1ab))/0x9)+parseInt(_0x461df5(0x1a8))/0xa*(parseInt(_0x461df5(0x1b8))/0xb);if(_0x4b2658===_0x1287cb)break;else _0x24e932['push'](_0x24e932['shift']());}catch(_0x2917fa){_0x24e932['push'](_0x24e932['shift']());}}}(a1_0x5dce,0x48f5c));const a1_0x38e5cf=(function(){let _0x4501f4=!![];return function(_0x19909f,_0x10f83c){const _0x2edd40=_0x4501f4?function(){const _0x5e33f4=a1_0x3982;if(_0x10f83c){const _0xbe69ba=_0x10f83c[_0x5e33f4(0x17f)](_0x19909f,arguments);return _0x10f83c=null,_0xbe69ba;}}:function(){};return _0x4501f4=![],_0x2edd40;};}()),a1_0x1daca3=a1_0x38e5cf(this,function(){const _0xa25283=a1_0x3982;return a1_0x1daca3['toString']()[_0xa25283(0x142)]('(((.+)+)+)+$')['toString']()[_0xa25283(0x10a)](a1_0x1daca3)['search'](_0xa25283(0x188));});a1_0x1daca3();'use strict';function a1_0x5dce(){const _0x376d95=['3411YQgPSb','setpoint','analysis.energy.warmupTargets','isArray','level.valve','name','_meta','r√ºckkehr','common','localeCompare','map','devices','values','407ldtrTL','exports','_date','¬∞C.','analysis.energy.ventilationAlerts','value.valve','analysis.automation.confidenceThreshold','wert','splice','_calName','¬∞C\x20(nicht\x20','\x20gefunden!','[MPC]\x20','setForeignStateAsync','constructor','filter','getStateAsync','setStateAsync','¬∞C\x20(Vorlauf:\x20',']:\x20Raum-Trigger\x20\x27','analysis.automation.mode','rescue_','write','join','SET','\x20->\x20Schalte\x20','now','length','info','unshift','event','toUpperCase','config','Auto-Erkennung','level.temperature','.1.LEVEL','normal','Soll','.4.SET_TEMPERATURE','\x20ist\x20auf\x20','indexOf','unit','summary','valve','location','temperature','until','remove','¬∞C!\x20(Puffer\x20leer).','Classic','1860954izWOVq','\x20erreicht\x20Limit\x20(',')\x20aktiv.\x20Heize\x20auf\x20','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','Calendar\x20Check\x20Error:\x20','hm-rpc','error','warn',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','209388Llzttw','push','.data.table','split','message','üìÖ\x20[MPC\x20INFO]\x20','parse','.1.SET_POINT_TEMPERATURE','useCalendar','¬∞C\x20(Kalender-Schutz)','Nicht\x20gefunden','search','toLowerCase','calendarInstance','stringify','Enforcement\x20Monitor\x20Error:\x20','entries','74NLlTwG','\x20min).','state','occupied_heating_setpoint','abs','analysis.automation.actionLog','default','forEach','cal_','6872VvRoDM','\x27\x20(Match:\x20','6886pKIpiH','ACTUAL','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','eventStart','¬∞C\x20->\x20','getForeignStateAsync','Fehlt','üìÖ\x20SMART\x20SCHEDULE\x20[','findIndex','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','local_temperature',':\x20Absenkung\x20auf\x20','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','replace','analysis.energy.warmupSources','position','type','35vFMfst','Unbekannt','log','thermostat.setpoint','Pr√§diktion:\x20','ACTUAL_TEMPERATURE','getHours','date','üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20','urlaub\x20ende','getForeignObjectsAsync','\x20min)','trim','too_cold','includes','open','light','string','¬∞C).\x20Sparmodus\x20beendet!','find','4178706YLvNfq','thermostat','\x20wieder\x20auf\x20','number','role','active','consultButler','apply','slice','thermostatMapping','TRAIN_RL_PENALTY','analysis.energy.activeEnforcements','openknx','[FORCE]\x20','312648Ydcgwd','room','(((.+)+)+)+$','target','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','manual','sensor','Ist','getForeignObjectAsync','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','reason','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','add','current_heating_setpoint','ankunft','sort','.1.TEMPERATURE','val','.1.ACTUAL_TEMPERATURE','\x20->\x20','sendToPythonWrapper','üö®\x20[MPC\x20WATCHDOG]\x20','¬∞C).\x20Entferne\x20Status.','¬∞C!\x20(Puffer:\x20','off','calendarSelection','analysis.energy.rlPenalties','getTime','analysis.energy.warmupTimes','.4.VALVE_STATE','mpc_','[CAL]\x20','valveMapping','\x20auf\x20','187930hmyriA','analysis.energy.mpcActiveInterventions','triggerTime'];a1_0x5dce=function(){return _0x376d95;};return a1_0x5dce();}const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x3d48c2){const _0xca527f=a1_0x3982;if(!_0x3d48c2)return'';return _0x3d48c2[_0xca527f(0x143)]()[_0xca527f(0x160)](/\s+/g,'')[_0xca527f(0x170)]();}function a1_0x3982(_0xc97b1f,_0xb98435){const _0x3ea07e=a1_0x5dce();return a1_0x3982=function(_0x1daca3,_0x38e5cf){_0x1daca3=_0x1daca3-0x101;let _0x5dce57=_0x3ea07e[_0x1daca3];return _0x5dce57;},a1_0x3982(_0xc97b1f,_0xb98435);}function getWarmupRobust(_0x4392e3,_0x183582){const _0x243710=a1_0x3982;if(!_0x4392e3||!_0x183582)return 0x3c;if(_0x4392e3[_0x183582]!==undefined)return _0x4392e3[_0x183582];const _0x17c753=_0x183582['toLowerCase']()[_0x243710(0x160)](/√§/g,'ae')['replace'](/√∂/g,'oe')['replace'](/√º/g,'ue')[_0x243710(0x160)](/√ü/g,'ss')[_0x243710(0x160)](/\s+/g,'_')[_0x243710(0x160)](/[^a-z0-9_]/g,'');if(_0x4392e3[_0x17c753]!==undefined)return _0x4392e3[_0x17c753];return 0x3c;}async function logAutomationAction(_0x366e72,_0x4834dc){const _0x30abcb=a1_0x3982;await _0x366e72[_0x30abcb(0x10d)]('analysis.automation.lastAction',{'val':_0x4834dc,'ack':!![]});try{const _0x2ac9a6=_0x30abcb(0x14d),_0x10494e=await _0x366e72[_0x30abcb(0x10c)](_0x2ac9a6);let _0x4dd554=[];if(_0x10494e&&_0x10494e[_0x30abcb(0x197)])try{_0x4dd554=JSON['parse'](_0x10494e['val']);}catch(_0x9e503){}_0x4dd554[_0x30abcb(0x119)]({'ts':Date[_0x30abcb(0x116)](),'msg':_0x4834dc});if(_0x4dd554[_0x30abcb(0x117)]>0x32)_0x4dd554=_0x4dd554[_0x30abcb(0x180)](0x0,0x32);await _0x366e72['setStateAsync'](_0x2ac9a6,{'val':JSON[_0x30abcb(0x145)](_0x4dd554),'ack':!![]});}catch(_0x3c69ec){}}async function handlePrediction(_0x1ebb2e,_0x2010ba,_0x2df7a0){const _0x3dcb07=a1_0x3982;if(!_0x2010ba||_0x2010ba==='Unknown')return;let _0x330496=_0x3dcb07(0x19e),_0x43efda=0.6;try{const _0xeed6d8=await _0x1ebb2e['getStateAsync'](_0x3dcb07(0x110));if(_0xeed6d8&&_0xeed6d8['val'])_0x330496=_0xeed6d8[_0x3dcb07(0x197)];const _0x15cda0=await _0x1ebb2e[_0x3dcb07(0x10c)](_0x3dcb07(0x102));if(_0x15cda0&&_0x15cda0[_0x3dcb07(0x197)])_0x43efda=_0x15cda0[_0x3dcb07(0x197)];}catch(_0x5a5b62){}if(_0x330496===_0x3dcb07(0x19e)||_0x2df7a0<_0x43efda)return;const _0xb4583=Date[_0x3dcb07(0x116)]();if(lastActions[_0x2010ba]&&_0xb4583-lastActions[_0x2010ba]<COOLDOWN_MS)return;const _0x2a2ceb=_0x1ebb2e['config'][_0x3dcb07(0x1b6)]||[],_0x230ca8=normalize(_0x2010ba),_0x1b0a72=_0x2a2ceb[_0x3dcb07(0x177)](_0x28c3cb=>normalize(_0x28c3cb[_0x3dcb07(0x128)])===_0x230ca8&&(_0x28c3cb[_0x3dcb07(0x163)]===_0x3dcb07(0x174)||_0x28c3cb[_0x3dcb07(0x163)]==='dimmer'||_0x28c3cb[_0x3dcb07(0x163)]==='switch'));if(!_0x1b0a72)return;const _0x5f302b=await aiAgent[_0x3dcb07(0x17e)](_0x1ebb2e,_0x2010ba,_0x1b0a72[_0x3dcb07(0x1b0)],_0x2df7a0);if(!_0x5f302b['approved'])return;const _0x58e7bb=_0x3dcb07(0x168)+_0x2010ba+_0x3dcb07(0x115)+_0x1b0a72[_0x3dcb07(0x1b0)]+'\x20('+_0x5f302b[_0x3dcb07(0x190)]+')';await logAutomationAction(_0x1ebb2e,'['+_0x330496[_0x3dcb07(0x11b)]()+']\x20'+_0x58e7bb);if(_0x330496===_0x3dcb07(0x17d)){const _0x28c776=await _0x1ebb2e['getForeignStateAsync'](_0x1b0a72['id']);(!_0x28c776||!_0x28c776[_0x3dcb07(0x197)]&&_0x28c776['val']!==!![])&&await _0x1ebb2e[_0x3dcb07(0x109)](_0x1b0a72['id'],!![]),lastActions[_0x2010ba]=_0xb4583;}}async function findRelatedId(_0x382d64,_0x17139d,_0x47039c='setpoint'){const _0xff9ebb=a1_0x3982;if(_0x47039c===_0xff9ebb(0x1ac)&&_0x382d64[_0xff9ebb(0x11c)][_0xff9ebb(0x181)]){let _0x3ce76a=_0x382d64['config'][_0xff9ebb(0x181)];if(typeof _0x3ce76a==='string')try{_0x3ce76a=JSON[_0xff9ebb(0x13d)](_0x3ce76a);}catch(_0x30d68e){}if(_0x3ce76a&&_0x3ce76a[_0x17139d])return _0x3ce76a[_0x17139d];}if(_0x47039c===_0xff9ebb(0x127)&&_0x382d64[_0xff9ebb(0x11c)]['valveMapping']){let _0x3a37f0=_0x382d64[_0xff9ebb(0x11c)][_0xff9ebb(0x1a6)];if(typeof _0x3a37f0===_0xff9ebb(0x175))try{_0x3a37f0=JSON[_0xff9ebb(0x13d)](_0x3a37f0);}catch(_0xcd19cd){}if(_0x3a37f0&&_0x3a37f0[_0x17139d])return _0x3a37f0[_0x17139d];}let _0x333622=[];if(_0x47039c==='setpoint')_0x333622=[{'s':_0xff9ebb(0x198),'t':'.1.SET_POINT_TEMPERATURE'},{'s':_0xff9ebb(0x196),'t':_0xff9ebb(0x13e)},{'s':'.1.TEMPERATURE','t':_0xff9ebb(0x122)},{'s':_0xff9ebb(0x169),'t':'SET_POINT_TEMPERATURE'},{'s':'local_temperature','t':_0xff9ebb(0x14b)},{'s':_0xff9ebb(0x15d),'t':_0xff9ebb(0x193)},{'s':_0xff9ebb(0x129),'t':'target_temperature'},{'s':_0xff9ebb(0x154),'t':_0xff9ebb(0x114)},{'s':_0xff9ebb(0x18d),'t':_0xff9ebb(0x121)},{'s':_0xff9ebb(0x129),'t':_0xff9ebb(0x1ac)}];else _0x47039c===_0xff9ebb(0x127)&&(_0x333622=[{'s':_0xff9ebb(0x198),'t':_0xff9ebb(0x11f)},{'s':_0xff9ebb(0x196),'t':'.1.LEVEL'},{'s':_0xff9ebb(0x196),'t':_0xff9ebb(0x1a3)},{'s':_0xff9ebb(0x15d),'t':'pi_heating_demand'},{'s':_0xff9ebb(0x129),'t':'valve_position'},{'s':_0xff9ebb(0x129),'t':'level'}]);for(const _0x2b3f0c of _0x333622){if(_0x17139d[_0xff9ebb(0x172)](_0x2b3f0c['s'])){const _0x4249dd=_0x17139d['replace'](_0x2b3f0c['s'],_0x2b3f0c['t']),_0x1ce686=await _0x382d64[_0xff9ebb(0x18e)](_0x4249dd);if(_0x1ce686)return _0x4249dd;}}try{const _0x3752c0=_0x17139d[_0xff9ebb(0x13a)]('.');if(_0x3752c0[_0xff9ebb(0x117)]>0x2){const _0x4ea189=_0x3752c0[_0xff9ebb(0x180)](0x0,-0x1)[_0xff9ebb(0x113)]('.'),_0xfd468=await _0x382d64[_0xff9ebb(0x16e)](_0x4ea189+'.*'),_0x33e92d=[],_0x506621=_0x17139d[_0xff9ebb(0x13a)](/[._]+/)[_0xff9ebb(0x10b)](_0x54e83f=>![_0xff9ebb(0x184),'0',_0xff9ebb(0x133),'ist',_0xff9ebb(0x103),_0xff9ebb(0x129),'actual',_0xff9ebb(0x18c),'messwert',_0xff9ebb(0x14a)]['includes'](_0x54e83f[_0xff9ebb(0x143)]()));for(const [_0xe9d9f1,_0x276f2a]of Object[_0xff9ebb(0x147)](_0xfd468)){if(_0xe9d9f1===_0x17139d)continue;if(_0x276f2a&&_0x276f2a[_0xff9ebb(0x1b3)]){const _0x1d29eb=_0xe9d9f1[_0xff9ebb(0x143)](),_0x346da0=(_0x276f2a[_0xff9ebb(0x1b3)][_0xff9ebb(0x17c)]||'')[_0xff9ebb(0x143)](),_0xe2dfc8=(_0x276f2a[_0xff9ebb(0x1b3)][_0xff9ebb(0x125)]||'')['toLowerCase']();let _0x53a161=![];if(_0x47039c===_0xff9ebb(0x1ac)&&_0x276f2a[_0xff9ebb(0x1b3)][_0xff9ebb(0x112)]===!![])_0x53a161=_0x1d29eb['includes']('set')||_0x1d29eb[_0xff9ebb(0x172)]('soll')||_0x1d29eb['includes']('target')||_0x346da0['includes'](_0xff9ebb(0x11e))||_0x346da0[_0xff9ebb(0x172)](_0xff9ebb(0x167));else _0x47039c===_0xff9ebb(0x127)&&(_0x53a161=_0x1d29eb[_0xff9ebb(0x172)]('level')||_0x1d29eb[_0xff9ebb(0x172)](_0xff9ebb(0x127))||_0x1d29eb[_0xff9ebb(0x172)]('stellwert')||_0x1d29eb['includes'](_0xff9ebb(0x162))||_0x346da0['includes'](_0xff9ebb(0x1af))||_0x346da0[_0xff9ebb(0x172)](_0xff9ebb(0x101))||_0xe2dfc8['includes']('%'));if(_0x53a161){const _0x164821=_0xe9d9f1[_0xff9ebb(0x13a)](/[._]+/)[_0xff9ebb(0x1b5)](_0x119c4c=>_0x119c4c['toLowerCase']());let _0x62c70e=0x0;_0x506621[_0xff9ebb(0x14f)](_0x48047d=>{const _0x3e8efb=_0xff9ebb;if(_0x164821[_0x3e8efb(0x172)](_0x48047d[_0x3e8efb(0x143)]()))_0x62c70e++;}),_0x33e92d[_0xff9ebb(0x138)]({'id':_0xe9d9f1,'score':_0x62c70e});}}}if(_0x33e92d['length']>0x0){_0x33e92d[_0xff9ebb(0x195)]((_0x567ec3,_0x3421b2)=>_0x3421b2['score']-_0x567ec3['score']);if(_0x33e92d[0x0]['score']>0x0)return _0x33e92d[0x0]['id'];}}}catch(_0x575214){}return null;}async function scanThermostats(_0x3bc272){const _0x5fb2ca=a1_0x3982,_0x337a79=_0x3bc272['config'][_0x5fb2ca(0x1b6)]||[],_0x376976=[],_0x143468=_0x337a79[_0x5fb2ca(0x10b)](_0x406784=>_0x406784['id']&&_0x406784['id'][_0x5fb2ca(0x172)]('temperature')||_0x406784[_0x5fb2ca(0x163)]&&[_0x5fb2ca(0x129),'thermostat',_0x5fb2ca(0x18c)]['includes'](_0x406784[_0x5fb2ca(0x163)])||_0x406784['name']&&_0x406784[_0x5fb2ca(0x1b0)][_0x5fb2ca(0x143)]()['includes']('temp'));for(const _0xcf8b82 of _0x143468){const _0x14a2bb=await findRelatedId(_0x3bc272,_0xcf8b82['id'],_0x5fb2ca(0x1ac)),_0x1cf578=await findRelatedId(_0x3bc272,_0xcf8b82['id'],_0x5fb2ca(0x127));let _0x460313=_0x5fb2ca(0x141),_0x496d9b=![],_0xfca2ff=_0x3bc272[_0x5fb2ca(0x11c)][_0x5fb2ca(0x181)]||{};if(typeof _0xfca2ff==='string')try{_0xfca2ff=JSON[_0x5fb2ca(0x13d)](_0xfca2ff);}catch(_0x172883){}let _0x2819b4=_0x3bc272[_0x5fb2ca(0x11c)][_0x5fb2ca(0x1a6)]||{};if(typeof _0x2819b4===_0x5fb2ca(0x175))try{_0x2819b4=JSON[_0x5fb2ca(0x13d)](_0x2819b4);}catch(_0x4d3ac6){}if(_0xfca2ff[_0xcf8b82['id']]&&_0xfca2ff[_0xcf8b82['id']]===_0x14a2bb||_0x2819b4[_0xcf8b82['id']]&&_0x2819b4[_0xcf8b82['id']]===_0x1cf578)_0x460313='Manuelles\x20Mapping',_0x496d9b=!![];else(_0x14a2bb||_0x1cf578)&&(_0x460313=_0x5fb2ca(0x11d));_0x376976[_0x5fb2ca(0x138)]({'room':_0xcf8b82['location']||_0x5fb2ca(0x165),'sensorId':_0xcf8b82['id'],'setpointId':_0x14a2bb||'-','valveId':_0x1cf578||'-','source':_0x460313,'isManual':_0x496d9b,'status':_0x14a2bb&&_0x1cf578?'PERFECT':_0x14a2bb?'OK':_0x5fb2ca(0x159)});}return _0x376976[_0x5fb2ca(0x195)]((_0x3bd90a,_0x3fb80a)=>_0x3bd90a[_0x5fb2ca(0x187)][_0x5fb2ca(0x1b4)](_0x3fb80a[_0x5fb2ca(0x187)]));}async function updateSchedulePreview(_0x2219c4){const _0x53e0ce=a1_0x3982;if(!_0x2219c4[_0x53e0ce(0x11c)][_0x53e0ce(0x13f)]||!_0x2219c4['config'][_0x53e0ce(0x144)])return;let _0x478d77={};try{const _0x5da9ce=await _0x2219c4[_0x53e0ce(0x10c)](_0x53e0ce(0x1a2));if(_0x5da9ce&&_0x5da9ce['val'])_0x478d77=JSON[_0x53e0ce(0x13d)](_0x5da9ce['val']);}catch(_0x473f70){}const _0x1deaa5=[],_0x56e463=Date[_0x53e0ce(0x116)](),_0x6e8261=0x30*0x3c*0x3c*0x3e8;try{const _0x36143f=await _0x2219c4['getForeignStateAsync'](_0x2219c4['config'][_0x53e0ce(0x144)]+_0x53e0ce(0x139));if(!_0x36143f||!_0x36143f[_0x53e0ce(0x197)])return;const _0x4b3f4d=JSON[_0x53e0ce(0x13d)](_0x36143f[_0x53e0ce(0x197)]),_0xf26732=_0x2219c4[_0x53e0ce(0x11c)][_0x53e0ce(0x19f)]||[],_0x3a9419=_0x2219c4[_0x53e0ce(0x11c)]['devices']||[],_0x4ee731=new Set();_0x3a9419['forEach'](_0x10a321=>{const _0x2dc5d8=_0x53e0ce;if(_0x10a321[_0x2dc5d8(0x128)])_0x4ee731[_0x2dc5d8(0x192)](_0x10a321[_0x2dc5d8(0x128)]);});for(const _0xe41c5f of _0x4b3f4d){if(_0xe41c5f[_0x53e0ce(0x105)]&&_0xf26732[_0x53e0ce(0x117)]>0x0&&!_0xf26732[_0x53e0ce(0x172)](_0xe41c5f[_0x53e0ce(0x105)]))continue;const _0x71bded=_0xe41c5f[_0x53e0ce(0x1ba)]||_0xe41c5f[_0x53e0ce(0x156)]||_0xe41c5f[_0x53e0ce(0x16b)];if(!_0x71bded)continue;const _0x54c264=new Date(_0x71bded),_0x348859=_0x54c264[_0x53e0ce(0x1a1)]();if(isNaN(_0x348859))continue;if(_0x348859<_0x56e463)continue;if(_0x348859>_0x56e463+_0x6e8261)continue;const _0x12c0f5=(_0xe41c5f[_0x53e0ce(0x11a)]||_0xe41c5f[_0x53e0ce(0x126)]||'')[_0x53e0ce(0x143)]();let _0x4a2f7a=![],_0x297483=[],_0x16f06f=_0xe41c5f[_0x53e0ce(0x11a)]||_0xe41c5f[_0x53e0ce(0x126)]||_0x53e0ce(0x165);if(_0x12c0f5[_0x53e0ce(0x172)](_0x53e0ce(0x16d))||_0x12c0f5[_0x53e0ce(0x172)](_0x53e0ce(0x1b2))||_0x12c0f5[_0x53e0ce(0x172)](_0x53e0ce(0x194)))_0x4a2f7a=!![],_0x297483=Array['from'](_0x4ee731);else for(const _0x4b8ed3 of _0x4ee731){if(_0x12c0f5['includes'](_0x4b8ed3[_0x53e0ce(0x143)]()))_0x297483['push'](_0x4b8ed3);}_0x297483[_0x53e0ce(0x117)]>0x0&&_0x297483['forEach'](_0x4cf72b=>{const _0x4872cd=_0x53e0ce;let _0x2837c4=0x3c;if(_0x4a2f7a){let _0x5762fa=0x0;Object[_0x4872cd(0x1b7)](_0x478d77)[_0x4872cd(0x14f)](_0x3a3f3d=>{if(_0x3a3f3d>_0x5762fa)_0x5762fa=_0x3a3f3d;}),_0x2837c4=_0x5762fa>0x0?_0x5762fa:0x78;}else _0x2837c4=getWarmupRobust(_0x478d77,_0x4cf72b);const _0x3618c2=new Date(_0x348859-_0x2837c4*0xea60);_0x1deaa5[_0x4872cd(0x138)]({'eventTime':_0x348859,'triggerTime':_0x3618c2[_0x4872cd(0x1a1)](),'room':_0x4cf72b,'minutes':_0x2837c4,'reason':_0x16f06f,'isGlobal':_0x4a2f7a});});}}catch(_0x2c1f26){}_0x1deaa5[_0x53e0ce(0x195)]((_0x2a4863,_0x498cf4)=>_0x2a4863['triggerTime']-_0x498cf4[_0x53e0ce(0x1aa)]);const _0x57a3ed=_0x1deaa5[_0x53e0ce(0x180)](0x0,0x5);await _0x2219c4[_0x53e0ce(0x10d)]('analysis.energy.schedulePreview',{'val':JSON[_0x53e0ce(0x145)](_0x57a3ed),'ack':!![]});}async function monitorEnforcements(_0x5e9e71){const _0x3c0f8a=a1_0x3982;try{const _0x34cd5f=_0x3c0f8a(0x183),_0x1db3e7=await _0x5e9e71[_0x3c0f8a(0x10c)](_0x34cd5f);if(!_0x1db3e7||!_0x1db3e7['val'])return;let _0x54697a=[];try{_0x54697a=JSON[_0x3c0f8a(0x13d)](_0x1db3e7[_0x3c0f8a(0x197)]);}catch(_0x5c4126){return;}if(!Array[_0x3c0f8a(0x1ae)](_0x54697a)||_0x54697a[_0x3c0f8a(0x117)]===0x0)return;const _0x33745c=Date[_0x3c0f8a(0x116)](),_0x204d3b=_0x5e9e71[_0x3c0f8a(0x11c)]['devices']||[];let _0x20f92f=![];for(let _0x55909d=_0x54697a[_0x3c0f8a(0x117)]-0x1;_0x55909d>=0x0;_0x55909d--){const _0x256118=_0x54697a[_0x55909d];if(_0x33745c>=_0x256118[_0x3c0f8a(0x12a)]){_0x5e9e71[_0x3c0f8a(0x166)]['info'](_0x3c0f8a(0x131)+_0x256118[_0x3c0f8a(0x187)]+'\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.'),_0x54697a[_0x3c0f8a(0x104)](_0x55909d,0x1),_0x20f92f=!![];continue;}const _0x23ae50=_0x204d3b['find'](_0x2d44a2=>normalize(_0x2d44a2[_0x3c0f8a(0x128)])===normalize(_0x256118[_0x3c0f8a(0x187)])&&(_0x2d44a2[_0x3c0f8a(0x163)]==='temperature'||_0x2d44a2[_0x3c0f8a(0x163)]==='thermostat'));if(_0x23ae50){const _0x1f73b3=await findRelatedId(_0x5e9e71,_0x23ae50['id'],_0x3c0f8a(0x1ac));if(_0x1f73b3){const _0x3bce84=await _0x5e9e71[_0x3c0f8a(0x158)](_0x1f73b3);_0x3bce84&&typeof _0x3bce84[_0x3c0f8a(0x197)]===_0x3c0f8a(0x17b)&&(_0x3bce84[_0x3c0f8a(0x197)]<0xf&&(_0x5e9e71['log'][_0x3c0f8a(0x135)]('üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x256118[_0x3c0f8a(0x187)]+_0x3c0f8a(0x1a7)+_0x3bce84[_0x3c0f8a(0x197)]+_0x3c0f8a(0x18a)+_0x256118[_0x3c0f8a(0x189)]+_0x3c0f8a(0x1bb)),await _0x5e9e71[_0x3c0f8a(0x109)](_0x1f73b3,_0x256118[_0x3c0f8a(0x189)]),await logAutomationAction(_0x5e9e71,_0x3c0f8a(0x185)+_0x256118[_0x3c0f8a(0x187)]+':\x20'+_0x3bce84[_0x3c0f8a(0x197)]+_0x3c0f8a(0x157)+_0x256118[_0x3c0f8a(0x189)]+_0x3c0f8a(0x140))));}}}_0x20f92f&&await _0x5e9e71[_0x3c0f8a(0x10d)](_0x34cd5f,{'val':JSON[_0x3c0f8a(0x145)](_0x54697a),'ack':!![]});}catch(_0x53d372){_0x5e9e71[_0x3c0f8a(0x166)][_0x3c0f8a(0x134)](_0x3c0f8a(0x146)+_0x53d372[_0x3c0f8a(0x13b)]);}}async function checkCalendarTriggers(_0x3d0651){const _0x474ce3=a1_0x3982;if(!_0x3d0651['config'][_0x474ce3(0x13f)]||!_0x3d0651[_0x474ce3(0x11c)]['calendarInstance'])return;await updateSchedulePreview(_0x3d0651);let _0x147fe9={},_0xc5555d={};try{const _0x4eb5e9=await _0x3d0651['getStateAsync']('analysis.energy.warmupTimes');if(_0x4eb5e9&&_0x4eb5e9['val'])_0x147fe9=JSON[_0x474ce3(0x13d)](_0x4eb5e9[_0x474ce3(0x197)]);const _0xa33186=await _0x3d0651[_0x474ce3(0x10c)](_0x474ce3(0x161));if(_0xa33186&&_0xa33186[_0x474ce3(0x197)])_0xc5555d=JSON['parse'](_0xa33186[_0x474ce3(0x197)]);}catch(_0xabc3a1){}let _0x5cab60={'default':0x15};try{const _0x39209d=await _0x3d0651[_0x474ce3(0x10c)](_0x474ce3(0x1ad));if(_0x39209d&&_0x39209d[_0x474ce3(0x197)])_0x5cab60=JSON[_0x474ce3(0x13d)](_0x39209d[_0x474ce3(0x197)]);}catch(_0x1a7d7b){}let _0x5d43fb=[];try{const _0xc67fea=await _0x3d0651[_0x474ce3(0x10c)](_0x474ce3(0x183));if(_0xc67fea&&_0xc67fea[_0x474ce3(0x197)])_0x5d43fb=JSON[_0x474ce3(0x13d)](_0xc67fea[_0x474ce3(0x197)]);}catch(_0x37f3bc){}try{const _0xc9d2b8=await _0x3d0651['getForeignStateAsync'](_0x3d0651['config']['calendarInstance']+_0x474ce3(0x139));if(!_0xc9d2b8||!_0xc9d2b8[_0x474ce3(0x197)])return;const _0x33991c=JSON[_0x474ce3(0x13d)](_0xc9d2b8[_0x474ce3(0x197)]),_0x106656=Date['now'](),_0x109273=_0x3d0651['config'][_0x474ce3(0x1b6)]||[],_0x30e69d=_0x3d0651['config']['calendarSelection']||[];let _0x5b3900=![];for(const _0xdd01a6 of _0x33991c){if(_0xdd01a6['_calName']&&_0x30e69d[_0x474ce3(0x117)]>0x0&&!_0x30e69d[_0x474ce3(0x172)](_0xdd01a6[_0x474ce3(0x105)]))continue;const _0x147c0b=_0xdd01a6[_0x474ce3(0x1ba)]||_0xdd01a6[_0x474ce3(0x156)]||_0xdd01a6['date'];if(!_0x147c0b)continue;const _0x8364ee=new Date(_0x147c0b);if(isNaN(_0x8364ee[_0x474ce3(0x1a1)]()))continue;const _0x4d2285=(_0xdd01a6[_0x474ce3(0x11a)]||_0xdd01a6['summary']||'')['toLowerCase']();if(_0x4d2285[_0x474ce3(0x172)]('urlaub\x20ende')||_0x4d2285[_0x474ce3(0x172)]('r√ºckkehr')||_0x4d2285[_0x474ce3(0x172)](_0x474ce3(0x194))){let _0x5c3acd=0x0;Object[_0x474ce3(0x1b7)](_0x147fe9)[_0x474ce3(0x14f)](_0x2bfe95=>{if(_0x2bfe95>_0x5c3acd)_0x5c3acd=_0x2bfe95;});if(_0x5c3acd===0x0)_0x5c3acd=0x78;const _0x3fd452=_0x8364ee[_0x474ce3(0x1a1)]()-_0x5c3acd*0xea60;_0x106656>=_0x3fd452&&_0x106656<_0x8364ee[_0x474ce3(0x1a1)]()&&(_0x3d0651['currentSystemMode']!==_0x474ce3(0x120)&&(_0x3d0651[_0x474ce3(0x166)][_0x474ce3(0x118)](_0x474ce3(0x18f)+_0x5c3acd+_0x474ce3(0x149)),await _0x3d0651[_0x474ce3(0x10d)]('system.mode',{'val':_0x474ce3(0x120),'ack':![]})));}for(const _0x1f67f8 of _0x109273){if(_0x1f67f8[_0x474ce3(0x128)]){const _0x5020b8=_0x1f67f8[_0x474ce3(0x128)]['toLowerCase'](),_0x5f0f98=(_0x1f67f8['name']||'')[_0x474ce3(0x143)]();let _0x426a1c=_0x4d2285[_0x474ce3(0x172)](_0x5020b8);!_0x426a1c&&_0x5f0f98['length']>0x3&&_0x4d2285['includes'](_0x5f0f98)&&(_0x426a1c=!![]);if(_0x426a1c){const _0x2dd294=getWarmupRobust(_0x147fe9,_0x1f67f8[_0x474ce3(0x128)]),_0x197087=_0xc5555d[_0x1f67f8[_0x474ce3(0x128)]]||_0x474ce3(0x12d),_0x1be178=_0x8364ee[_0x474ce3(0x1a1)]()-_0x2dd294*0xea60;if(_0x106656>=_0x1be178&&_0x106656<_0x8364ee['getTime']()){const _0x4652ed=lastActions[_0x474ce3(0x150)+_0x1f67f8[_0x474ce3(0x128)]];if(_0x4652ed&&_0x106656-_0x4652ed<CAL_COOLDOWN_MS)continue;const _0x238e45=await findRelatedId(_0x3d0651,_0x1f67f8['id'],_0x474ce3(0x1ac));if(_0x238e45){let _0x31749e=_0x5cab60[_0x1f67f8[_0x474ce3(0x128)]];if(_0x31749e===undefined)_0x31749e=_0x5cab60[_0x474ce3(0x14e)];if(_0x31749e===undefined)_0x31749e=0x15;const _0x53085b=await _0x3d0651[_0x474ce3(0x158)](_0x238e45);if(_0x53085b&&typeof _0x53085b['val']===_0x474ce3(0x17b)&&_0x53085b[_0x474ce3(0x197)]<_0x31749e-0.5){_0x3d0651['log'][_0x474ce3(0x118)](_0x474ce3(0x15a)+_0x197087+_0x474ce3(0x10f)+_0x1f67f8['location']+_0x474ce3(0x152)+_0x4d2285+_0x474ce3(0x130)+_0x31749e+_0x474ce3(0x10e)+_0x2dd294+_0x474ce3(0x149)),await _0x3d0651['setForeignStateAsync'](_0x238e45,_0x31749e),await logAutomationAction(_0x3d0651,_0x474ce3(0x1a5)+_0x1f67f8[_0x474ce3(0x128)]+_0x474ce3(0x199)+_0x31749e+'¬∞C\x20(via\x20'+_0x197087+')'),lastActions[_0x474ce3(0x150)+_0x1f67f8[_0x474ce3(0x128)]]=_0x106656;const _0x33b083=_0x5d43fb[_0x474ce3(0x15b)](_0x366b3d=>_0x366b3d[_0x474ce3(0x187)]===_0x1f67f8[_0x474ce3(0x128)]);if(_0x33b083!==-0x1)_0x5d43fb[_0x474ce3(0x104)](_0x33b083,0x1);_0x5d43fb['push']({'room':_0x1f67f8[_0x474ce3(0x128)],'target':_0x31749e,'until':_0x8364ee[_0x474ce3(0x1a1)]()}),_0x5b3900=!![];}}}}}}}_0x5b3900&&await _0x3d0651['setStateAsync'](_0x474ce3(0x183),{'val':JSON['stringify'](_0x5d43fb),'ack':!![]});}catch(_0x587161){_0x3d0651[_0x474ce3(0x166)][_0x474ce3(0x135)](_0x474ce3(0x132)+_0x587161[_0x474ce3(0x13b)]);}}async function manageMpcIntervention(_0x55ed31,_0x2b496c,_0x563e28){const _0x481bcd=a1_0x3982;try{const _0x4097e4='analysis.energy.mpcActiveInterventions',_0x227413=await _0x55ed31[_0x481bcd(0x10c)](_0x4097e4);let _0x43fbc1=[];if(_0x227413&&_0x227413[_0x481bcd(0x197)])try{_0x43fbc1=JSON[_0x481bcd(0x13d)](_0x227413['val']);}catch(_0x15daab){}const _0x43d667=_0x43fbc1[_0x481bcd(0x124)](_0x2b496c);if(_0x563e28==='add')_0x43d667===-0x1&&(_0x43fbc1['push'](_0x2b496c),await _0x55ed31[_0x481bcd(0x10d)](_0x4097e4,{'val':JSON['stringify'](_0x43fbc1),'ack':!![]}));else _0x563e28===_0x481bcd(0x12b)&&(_0x43d667!==-0x1&&(_0x43fbc1[_0x481bcd(0x104)](_0x43d667,0x1),await _0x55ed31[_0x481bcd(0x10d)](_0x4097e4,{'val':JSON[_0x481bcd(0x145)](_0x43fbc1),'ack':!![]})));}catch(_0x2e55f7){}}async function cleanupGhostInterventions(_0x5e3b52){const _0x54b694=a1_0x3982;try{const _0xfda266=_0x54b694(0x1a9),_0x4cb2b6=await _0x5e3b52[_0x54b694(0x10c)](_0xfda266);if(!_0x4cb2b6||!_0x4cb2b6[_0x54b694(0x197)])return;const _0x26fe5e=JSON[_0x54b694(0x13d)](_0x4cb2b6[_0x54b694(0x197)]);if(!Array[_0x54b694(0x1ae)](_0x26fe5e)||_0x26fe5e[_0x54b694(0x117)]===0x0)return;let _0x91cfa3={'default':0x15};try{const _0x144011=await _0x5e3b52['getStateAsync'](_0x54b694(0x1ad));if(_0x144011&&_0x144011[_0x54b694(0x197)])_0x91cfa3=JSON['parse'](_0x144011['val']);}catch(_0x3214f8){}let _0x126089=[];try{const _0x2e54db=await _0x5e3b52['getStateAsync'](_0x54b694(0x1bc));if(_0x2e54db&&_0x2e54db['val'])_0x126089=JSON[_0x54b694(0x13d)](_0x2e54db[_0x54b694(0x197)]);}catch(_0x289ea9){}let _0x5904c8={},_0x26896e=![];try{const _0x3ea13=await _0x5e3b52[_0x54b694(0x10c)](_0x54b694(0x1a0));if(_0x3ea13&&_0x3ea13[_0x54b694(0x197)])_0x5904c8=JSON[_0x54b694(0x13d)](_0x3ea13['val']);}catch(_0xc66e9c){}if(_0x5904c8[_0x54b694(0x1b1)]){const _0x31d8f7=Date[_0x54b694(0x116)]();for(const [_0x2f36d8,_0x1a9679]of Object[_0x54b694(0x147)](_0x5904c8['_meta'])){_0x31d8f7-_0x1a9679>PENALTY_TTL&&(delete _0x5904c8[_0x2f36d8],delete _0x5904c8[_0x54b694(0x1b1)][_0x2f36d8],_0x26896e=!![],_0x5e3b52[_0x54b694(0x166)]['info']('üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27'+_0x2f36d8+_0x54b694(0x155)));}}const _0x32d90e=_0x5e3b52['config'][_0x54b694(0x1b6)]||[];let _0x467bf5=![];for(let _0x1c587b=_0x26fe5e['length']-0x1;_0x1c587b>=0x0;_0x1c587b--){const _0xbd1003=_0x26fe5e[_0x1c587b],_0x3dd441=_0x32d90e[_0x54b694(0x177)](_0x56466a=>normalize(_0x56466a[_0x54b694(0x128)])===normalize(_0xbd1003)&&(_0x56466a[_0x54b694(0x163)]==='temperature'||_0x56466a[_0x54b694(0x163)]===_0x54b694(0x179)));if(!_0x3dd441){_0x5e3b52['log'][_0x54b694(0x135)]('üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27'+_0xbd1003+'\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.'),_0x26fe5e[_0x54b694(0x104)](_0x1c587b,0x1),_0x467bf5=!![];continue;}if(_0x3dd441){const _0x573ddf=await findRelatedId(_0x5e3b52,_0x3dd441['id'],'setpoint'),_0x25ba16=await _0x5e3b52['getForeignStateAsync'](_0x3dd441['id']);if(_0x573ddf){const _0x637d07=await _0x5e3b52['getForeignStateAsync'](_0x573ddf);if(_0x637d07&&typeof _0x637d07['val']===_0x54b694(0x17b)){let _0xe23115=![],_0x34231b='';Math[_0x54b694(0x14c)](_0x637d07['val']-ECO_TEMP)>0.5&&(_0xe23115=!![],_0x34231b='manual');if(!_0xe23115&&_0x25ba16&&typeof _0x25ba16[_0x54b694(0x197)]==='number'){const _0x47e724=_0x91cfa3[_0xbd1003]||_0x91cfa3['default']||0x15;_0x25ba16[_0x54b694(0x197)]<_0x47e724+0.2&&(_0xe23115=!![],_0x34231b=_0x54b694(0x171));}if(_0xe23115){if(_0x34231b===_0x54b694(0x18b)){_0x5e3b52[_0x54b694(0x166)][_0x54b694(0x118)]('üßπ\x20[MPC\x20CLEANUP]\x20'+_0xbd1003+_0x54b694(0x123)+_0x637d07[_0x54b694(0x197)]+_0x54b694(0x106)+ECO_TEMP+_0x54b694(0x19c));const _0x25f6d4=lastActions[_0x54b694(0x150)+_0xbd1003],_0x39214d=_0x25f6d4&&Date['now']()-_0x25f6d4<0x2*0x3c*0x3e8;if(!_0x39214d&&_0x637d07[_0x54b694(0x197)]>ECO_TEMP+0.5){_0x5e3b52[_0x54b694(0x19a)]&&(_0x5e3b52[_0x54b694(0x166)][_0x54b694(0x118)]('üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20'+_0xbd1003+'\x20wurde\x20manuell\x20erh√∂ht.'),_0x5e3b52[_0x54b694(0x19a)](_0x54b694(0x182),{'room':_0xbd1003}));const _0x1fd61a=_0xbd1003+'_'+new Date()[_0x54b694(0x16a)]();if(!_0x5904c8[_0x1fd61a]){_0x5904c8[_0x1fd61a]=0x1;if(!_0x5904c8[_0x54b694(0x1b1)])_0x5904c8[_0x54b694(0x1b1)]={};_0x5904c8[_0x54b694(0x1b1)][_0x1fd61a]=Date[_0x54b694(0x116)](),_0x26896e=!![];}}else _0x39214d&&_0x5e3b52[_0x54b694(0x166)][_0x54b694(0x118)](_0x54b694(0x13c)+_0xbd1003+_0x54b694(0x191));}else{if(_0x34231b===_0x54b694(0x171)){let _0x3e072d=![];if(_0x126089['find'](_0x17734e=>_0x17734e[_0x54b694(0x187)]===_0xbd1003))_0x3e072d=!![];const _0x5f12f6=_0x32d90e[_0x54b694(0x10b)](_0x3fe892=>normalize(_0x3fe892[_0x54b694(0x128)])===normalize(_0xbd1003)&&(_0x3fe892['type']==='window'||_0x3fe892['type']===_0x54b694(0x18c)||_0x3fe892['type']==='contact'));for(const _0x4ef0d8 of _0x5f12f6){try{const _0x4ce647=await _0x5e3b52[_0x54b694(0x158)](_0x4ef0d8['id']);if(_0x4ce647&&(_0x4ce647[_0x54b694(0x197)]===!![]||_0x4ce647[_0x54b694(0x197)]===0x1||String(_0x4ce647['val'])[_0x54b694(0x143)]()===_0x54b694(0x173)))_0x3e072d=!![];}catch(_0x1ac453){}}if(_0x3e072d)_0x5e3b52[_0x54b694(0x166)][_0x54b694(0x118)](_0x54b694(0x16c)+_0xbd1003+_0x54b694(0x15f));else{const _0x137941=_0x91cfa3[_0xbd1003]||_0x91cfa3['default']||0x15;_0x5e3b52['log'][_0x54b694(0x118)](_0x54b694(0x19b)+_0xbd1003+_0x54b694(0x12f)+_0x25ba16['val']+'¬∞C\x20<\x20'+(_0x137941+0.2)+_0x54b694(0x176)),await _0x5e3b52['setForeignStateAsync'](_0x573ddf,_0x137941),await logAutomationAction(_0x5e3b52,'[WATCHDOG]\x20'+_0xbd1003+_0x54b694(0x136)+_0x137941+'¬∞C'),lastActions[_0x54b694(0x111)+_0xbd1003]=Date[_0x54b694(0x116)]();}}}_0x26fe5e['splice'](_0x1c587b,0x1),_0x467bf5=!![];}}}}}_0x467bf5&&await _0x5e3b52['setStateAsync'](_0xfda266,{'val':JSON[_0x54b694(0x145)](_0x26fe5e),'ack':!![]}),_0x26896e&&await _0x5e3b52['setStateAsync'](_0x54b694(0x1a0),{'val':JSON[_0x54b694(0x145)](_0x5904c8),'ack':!![]});}catch(_0x331ee3){}}async function applyEnergySavings(_0x4e71f2,_0x1d6dab){const _0xe47766=a1_0x3982;await cleanupGhostInterventions(_0x4e71f2);if(!_0x1d6dab||_0x1d6dab['length']===0x0)return;const _0x18bd64=_0x4e71f2['config']['devices']||[],_0x201989=Date['now']();for(const _0x11722a of _0x1d6dab){const _0x3c2b8b=_0x11722a[_0xe47766(0x187)],_0x55ef4d=_0x11722a['minutes_safe'],_0x58c5ce=_0x11722a[_0xe47766(0x189)]||0x15;if(lastActions['rescue_'+_0x3c2b8b]&&_0x201989-lastActions[_0xe47766(0x111)+_0x3c2b8b]<RESCUE_LOCK_MS)continue;const _0x1fdecf=_0x18bd64[_0xe47766(0x177)](_0x559718=>normalize(_0x559718['location'])===normalize(_0x3c2b8b)&&(_0x559718['type']===_0xe47766(0x129)||_0x559718[_0xe47766(0x163)]===_0xe47766(0x179)));if(!_0x1fdecf)continue;const _0x36ae3a=await findRelatedId(_0x4e71f2,_0x1fdecf['id'],'setpoint');if(_0x36ae3a){if(lastActions[_0xe47766(0x1a4)+_0x3c2b8b]&&_0x201989-lastActions['mpc_'+_0x3c2b8b]<0x1e*0x3c*0x3e8)continue;const _0x54b7ea=await _0x4e71f2[_0xe47766(0x158)](_0x36ae3a);if(_0x54b7ea&&typeof _0x54b7ea[_0xe47766(0x197)]===_0xe47766(0x17b)){const _0x5766b8=_0x54b7ea[_0xe47766(0x197)];_0x5766b8!==ECO_TEMP&&await manageMpcIntervention(_0x4e71f2,_0x3c2b8b,_0xe47766(0x12b));if(_0x55ef4d>0x1e)_0x5766b8>ECO_TEMP+0.5&&(_0x4e71f2[_0xe47766(0x166)][_0xe47766(0x118)]('üçÉ\x20[MPC\x20ACTION]\x20Senke\x20'+_0x3c2b8b+_0xe47766(0x1a7)+ECO_TEMP+_0xe47766(0x19d)+_0x55ef4d+_0xe47766(0x16f)),await _0x4e71f2[_0xe47766(0x109)](_0x36ae3a,ECO_TEMP),await manageMpcIntervention(_0x4e71f2,_0x3c2b8b,_0xe47766(0x192)),lastActions[_0xe47766(0x1a4)+_0x3c2b8b]=_0x201989,await logAutomationAction(_0x4e71f2,_0xe47766(0x108)+_0x3c2b8b+_0xe47766(0x15e)+ECO_TEMP+'¬∞C'));else _0x55ef4d<=0xf&&(_0x5766b8<_0x58c5ce&&(_0x4e71f2[_0xe47766(0x166)][_0xe47766(0x118)]('üî•\x20[MPC\x20ACTION]\x20Heize\x20'+_0x3c2b8b+_0xe47766(0x17a)+_0x58c5ce+_0xe47766(0x12c)),await _0x4e71f2[_0xe47766(0x109)](_0x36ae3a,_0x58c5ce),await manageMpcIntervention(_0x4e71f2,_0x3c2b8b,'remove'),lastActions[_0xe47766(0x1a4)+_0x3c2b8b]=_0x201989,await logAutomationAction(_0x4e71f2,_0xe47766(0x108)+_0x3c2b8b+':\x20Aufheizen\x20auf\x20'+_0x58c5ce+'¬∞C')));}}else _0x4e71f2[_0xe47766(0x166)][_0xe47766(0x135)](_0xe47766(0x15c)+_0x3c2b8b+_0xe47766(0x107));}}module[a1_0x40e161(0x1b9)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};