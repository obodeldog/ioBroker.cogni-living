const a1_0x2117a9=a1_0x13f2;function a1_0x13f2(_0x376d2d,_0x51a8a3){const _0x6dc59d=a1_0x45bc();return a1_0x13f2=function(_0x54e08f,_0x20b37c){_0x54e08f=_0x54e08f-0x1dd;let _0x45bc0f=_0x6dc59d[_0x54e08f];return _0x45bc0f;},a1_0x13f2(_0x376d2d,_0x51a8a3);}(function(_0x21ade0,_0x596369){const _0x11f06d=a1_0x13f2,_0x4149d0=_0x21ade0();while(!![]){try{const _0x2db4b2=parseInt(_0x11f06d(0x1e2))/0x1*(-parseInt(_0x11f06d(0x202))/0x2)+-parseInt(_0x11f06d(0x1e9))/0x3+parseInt(_0x11f06d(0x1ee))/0x4+parseInt(_0x11f06d(0x1e3))/0x5+parseInt(_0x11f06d(0x1f1))/0x6+parseInt(_0x11f06d(0x207))/0x7+-parseInt(_0x11f06d(0x1e8))/0x8;if(_0x2db4b2===_0x596369)break;else _0x4149d0['push'](_0x4149d0['shift']());}catch(_0x43ca00){_0x4149d0['push'](_0x4149d0['shift']());}}}(a1_0x45bc,0x8ea75));const a1_0x20b37c=(function(){let _0xe9dbdc=!![];return function(_0x238a0e,_0x1e67ad){const _0x88d7a9=_0xe9dbdc?function(){const _0x3ba8a5=a1_0x13f2;if(_0x1e67ad){const _0x2e2cc7=_0x1e67ad[_0x3ba8a5(0x1df)](_0x238a0e,arguments);return _0x1e67ad=null,_0x2e2cc7;}}:function(){};return _0xe9dbdc=![],_0x88d7a9;};}()),a1_0x54e08f=a1_0x20b37c(this,function(){const _0x514848=a1_0x13f2;return a1_0x54e08f[_0x514848(0x206)]()['search']('(((.+)+)+)+$')[_0x514848(0x206)]()[_0x514848(0x1e4)](a1_0x54e08f)[_0x514848(0x1f5)](_0x514848(0x208));});a1_0x54e08f();function a1_0x45bc(){const _0x4e453d=['toLowerCase','type','630776bAVNvw','./ai_agent','active','6822678jBZmmz','simulate','name','\x27),\x20but\x20found\x20no\x20matching\x20light\x20device.','search','\x20->\x20','switch','\x20->\x20Schalte\x20','light','val','setForeignStateAsync','config','info','analysis.automation.confidenceThreshold','analysis.automation.mode','dimmer','Pr√§diktion:\x20','514KnNJfk','devices','reason','now','toString','7327250fkYsKG','(((.+)+)+)+$','consultButler','find','ü§ñ\x20Butler\x20Blocked:\x20','üîç\x20Device-Search\x20failed:\x20Predicted\x20\x27','log','getForeignStateAsync','apply','off','setStateAsync','3305YQEzWV','2259020XNebVN','constructor','getStateAsync','üëÄ\x20SIMULATION:\x20','[BLOCKED]\x20','5201224HEKzkH','2128542usIevj','replace','analysis.automation.lastAction'];a1_0x45bc=function(){return _0x4e453d;};return a1_0x45bc();}'use strict';const aiAgent=require(a1_0x2117a9(0x1ef)),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function normalize(_0x1cf5ca){const _0x26caf3=a1_0x2117a9;if(!_0x1cf5ca)return'';return _0x1cf5ca[_0x26caf3(0x1ec)]()[_0x26caf3(0x1ea)](/\s+/g,'')['trim']();}async function handlePrediction(_0x20df34,_0x561fcf,_0x202a44){const _0x577703=a1_0x2117a9;if(!_0x561fcf||_0x561fcf==='Unknown')return;let _0x4b0e48='off',_0x40286e=0.6;try{const _0x219d62=await _0x20df34[_0x577703(0x1e5)](_0x577703(0x1ff));if(_0x219d62&&_0x219d62[_0x577703(0x1fa)])_0x4b0e48=_0x219d62['val'];const _0x2224a7=await _0x20df34[_0x577703(0x1e5)](_0x577703(0x1fe));if(_0x2224a7&&_0x2224a7[_0x577703(0x1fa)])_0x40286e=_0x2224a7[_0x577703(0x1fa)];}catch(_0x4a0226){}if(_0x4b0e48===_0x577703(0x1e0))return;if(_0x202a44<_0x40286e)return;const _0x2e0401=Date[_0x577703(0x205)]();if(lastActions[_0x561fcf]&&_0x2e0401-lastActions[_0x561fcf]<COOLDOWN_MS)return;const _0x14a3be=_0x20df34[_0x577703(0x1fc)][_0x577703(0x203)]||[],_0x44665c=normalize(_0x561fcf),_0x58504d=_0x14a3be[_0x577703(0x20a)](_0x4fffdb=>{const _0x535883=_0x577703;return normalize(_0x4fffdb['location'])===_0x44665c&&(_0x4fffdb[_0x535883(0x1ed)]===_0x535883(0x1f9)||_0x4fffdb[_0x535883(0x1ed)]===_0x535883(0x200)||_0x4fffdb[_0x535883(0x1ed)]===_0x535883(0x1f7));});if(!_0x58504d){const _0x285dcc=_0x577703(0x20c)+_0x561fcf+'\x27\x20(norm:\x20\x27'+_0x44665c+_0x577703(0x1f4);_0x20df34[_0x577703(0x1dd)]['debug'](_0x285dcc);return;}const _0x4f500c=await aiAgent[_0x577703(0x209)](_0x20df34,_0x561fcf,_0x58504d[_0x577703(0x1f3)],_0x202a44);if(!_0x4f500c['approved']){_0x20df34['log']['debug'](_0x577703(0x20b)+_0x561fcf+_0x577703(0x1f6)+_0x4f500c[_0x577703(0x204)]),await _0x20df34[_0x577703(0x1e1)](_0x577703(0x1eb),{'val':_0x577703(0x1e7)+_0x4f500c[_0x577703(0x204)],'ack':!![]});return;}const _0x3418a5=_0x577703(0x201)+_0x561fcf+_0x577703(0x1f8)+_0x58504d['name']+'\x20('+_0x4f500c[_0x577703(0x204)]+')';await _0x20df34[_0x577703(0x1e1)](_0x577703(0x1eb),{'val':'['+_0x4b0e48['toUpperCase']()+']\x20'+_0x3418a5,'ack':!![]});if(_0x4b0e48===_0x577703(0x1f2))_0x20df34['log'][_0x577703(0x1fd)](_0x577703(0x1e6)+_0x3418a5);else{if(_0x4b0e48===_0x577703(0x1f0)){_0x20df34['log'][_0x577703(0x1fd)]('‚ö°\x20ACTION:\x20'+_0x3418a5);const _0x1120c9=await _0x20df34[_0x577703(0x1de)](_0x58504d['id']);if(_0x1120c9&&(_0x1120c9[_0x577703(0x1fa)]===!![]||_0x1120c9['val']>0x0)){}else await _0x20df34[_0x577703(0x1fb)](_0x58504d['id'],!![]);lastActions[_0x561fcf]=_0x2e0401;}}}module['exports']={'handlePrediction':handlePrediction};