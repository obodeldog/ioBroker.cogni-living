const a1_0x437bb4=a1_0x3e6f;(function(_0x3b796e,_0x4cdb27){const _0x41ab01=a1_0x3e6f,_0x447163=_0x3b796e();while(!![]){try{const _0x3f0c4a=-parseInt(_0x41ab01(0x1ca))/0x1*(-parseInt(_0x41ab01(0x22f))/0x2)+-parseInt(_0x41ab01(0x1ff))/0x3+-parseInt(_0x41ab01(0x1fb))/0x4*(-parseInt(_0x41ab01(0x1a4))/0x5)+-parseInt(_0x41ab01(0x1c0))/0x6*(parseInt(_0x41ab01(0x21b))/0x7)+-parseInt(_0x41ab01(0x1b9))/0x8+-parseInt(_0x41ab01(0x1eb))/0x9+-parseInt(_0x41ab01(0x187))/0xa*(-parseInt(_0x41ab01(0x1dc))/0xb);if(_0x3f0c4a===_0x4cdb27)break;else _0x447163['push'](_0x447163['shift']());}catch(_0x3a8753){_0x447163['push'](_0x447163['shift']());}}}(a1_0x51b7,0x5a475));const a1_0x42d179=(function(){let _0x244549=!![];return function(_0x585814,_0x3c1d6a){const _0x23526a=_0x244549?function(){const _0x308c1c=a1_0x3e6f;if(_0x3c1d6a){const _0x566163=_0x3c1d6a[_0x308c1c(0x185)](_0x585814,arguments);return _0x3c1d6a=null,_0x566163;}}:function(){};return _0x244549=![],_0x23526a;};}()),a1_0x153320=a1_0x42d179(this,function(){const _0x9fe664=a1_0x3e6f;return a1_0x153320[_0x9fe664(0x217)]()[_0x9fe664(0x209)](_0x9fe664(0x175))[_0x9fe664(0x217)]()['constructor'](a1_0x153320)['search'](_0x9fe664(0x175));});a1_0x153320();'use strict';const aiAgent=require(a1_0x437bb4(0x20d)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x402120){const _0x4c63d0=a1_0x437bb4;if(!_0x402120)return'';return _0x402120[_0x4c63d0(0x17b)]()[_0x4c63d0(0x1e9)](/\s+/g,'')[_0x4c63d0(0x21c)]();}async function logAutomationAction(_0x579466,_0x2b27bb){const _0x4c6946=a1_0x437bb4;await _0x579466[_0x4c6946(0x233)](_0x4c6946(0x1a1),{'val':_0x2b27bb,'ack':!![]});try{const _0x429b15=_0x4c6946(0x1b7),_0xb7c61a=await _0x579466[_0x4c6946(0x1a5)](_0x429b15);let _0x4e3b3e=[];if(_0xb7c61a&&_0xb7c61a[_0x4c6946(0x1d8)])try{_0x4e3b3e=JSON['parse'](_0xb7c61a[_0x4c6946(0x1d8)]);}catch(_0x1b791d){}_0x4e3b3e[_0x4c6946(0x1a9)]({'ts':Date['now'](),'msg':_0x2b27bb});if(_0x4e3b3e[_0x4c6946(0x1bc)]>0x32)_0x4e3b3e=_0x4e3b3e['slice'](0x0,0x32);await _0x579466['setStateAsync'](_0x429b15,{'val':JSON[_0x4c6946(0x1f7)](_0x4e3b3e),'ack':!![]});}catch(_0x33f7de){}}async function handlePrediction(_0x26dce8,_0x185776,_0x300e75){const _0x5eaf36=a1_0x437bb4;if(!_0x185776||_0x185776===_0x5eaf36(0x197))return;let _0x5f56b7=_0x5eaf36(0x195),_0x56b071=0.6;try{const _0x5bb74d=await _0x26dce8['getStateAsync'](_0x5eaf36(0x1cd));if(_0x5bb74d&&_0x5bb74d[_0x5eaf36(0x1d8)])_0x5f56b7=_0x5bb74d[_0x5eaf36(0x1d8)];const _0x195728=await _0x26dce8[_0x5eaf36(0x1a5)](_0x5eaf36(0x1ab));if(_0x195728&&_0x195728[_0x5eaf36(0x1d8)])_0x56b071=_0x195728[_0x5eaf36(0x1d8)];}catch(_0x374cd6){}if(_0x5f56b7===_0x5eaf36(0x195)||_0x300e75<_0x56b071)return;const _0xec10f6=Date['now']();if(lastActions[_0x185776]&&_0xec10f6-lastActions[_0x185776]<COOLDOWN_MS)return;const _0x2b53d3=_0x26dce8['config'][_0x5eaf36(0x1b1)]||[],_0x392e65=normalize(_0x185776),_0x40a577=_0x2b53d3[_0x5eaf36(0x188)](_0x42eea1=>normalize(_0x42eea1['location'])===_0x392e65&&(_0x42eea1[_0x5eaf36(0x1c9)]===_0x5eaf36(0x172)||_0x42eea1['type']===_0x5eaf36(0x1d4)||_0x42eea1['type']===_0x5eaf36(0x1a6)));if(!_0x40a577)return;const _0x4410b8=await aiAgent['consultButler'](_0x26dce8,_0x185776,_0x40a577[_0x5eaf36(0x21e)],_0x300e75);if(!_0x4410b8[_0x5eaf36(0x17a)])return;const _0x301c6e=_0x5eaf36(0x1f2)+_0x185776+_0x5eaf36(0x1e0)+_0x40a577[_0x5eaf36(0x21e)]+'\x20('+_0x4410b8[_0x5eaf36(0x1c3)]+')';await logAutomationAction(_0x26dce8,'['+_0x5f56b7[_0x5eaf36(0x221)]()+']\x20'+_0x301c6e);if(_0x5f56b7==='active'){const _0x5d7eae=await _0x26dce8['getForeignStateAsync'](_0x40a577['id']);(!_0x5d7eae||!_0x5d7eae['val']&&_0x5d7eae[_0x5eaf36(0x1d8)]!==!![])&&await _0x26dce8[_0x5eaf36(0x191)](_0x40a577['id'],!![]),lastActions[_0x185776]=_0xec10f6;}}async function findRelatedId(_0x1e6077,_0x4363b7,_0x58bed3=a1_0x437bb4(0x1e3)){const _0x1af27f=a1_0x437bb4;if(_0x58bed3==='setpoint'&&_0x1e6077[_0x1af27f(0x236)][_0x1af27f(0x214)]){let _0x626d9b=_0x1e6077[_0x1af27f(0x236)]['thermostatMapping'];if(typeof _0x626d9b===_0x1af27f(0x17e))try{_0x626d9b=JSON[_0x1af27f(0x1e2)](_0x626d9b);}catch(_0x39895a){}if(_0x626d9b&&_0x626d9b[_0x4363b7])return _0x626d9b[_0x4363b7];}if(_0x58bed3==='valve'&&_0x1e6077[_0x1af27f(0x236)][_0x1af27f(0x22e)]){let _0x2e33fa=_0x1e6077[_0x1af27f(0x236)][_0x1af27f(0x22e)];if(typeof _0x2e33fa===_0x1af27f(0x17e))try{_0x2e33fa=JSON[_0x1af27f(0x1e2)](_0x2e33fa);}catch(_0x2d63ee){}if(_0x2e33fa&&_0x2e33fa[_0x4363b7])return _0x2e33fa[_0x4363b7];}let _0x5d3493=[];if(_0x58bed3===_0x1af27f(0x1e3))_0x5d3493=[{'s':_0x1af27f(0x204),'t':_0x1af27f(0x1e1)},{'s':_0x1af27f(0x192),'t':_0x1af27f(0x1e1)},{'s':_0x1af27f(0x192),'t':_0x1af27f(0x198)},{'s':_0x1af27f(0x200),'t':_0x1af27f(0x1ee)},{'s':_0x1af27f(0x18a),'t':_0x1af27f(0x1f1)},{'s':_0x1af27f(0x18a),'t':'current_heating_setpoint'},{'s':_0x1af27f(0x1f3),'t':'target_temperature'},{'s':'ACTUAL','t':_0x1af27f(0x1cb)},{'s':'Ist','t':_0x1af27f(0x1e5)},{'s':_0x1af27f(0x1f3),'t':_0x1af27f(0x1e3)}];else _0x58bed3===_0x1af27f(0x1a0)&&(_0x5d3493=[{'s':_0x1af27f(0x204),'t':_0x1af27f(0x17d)},{'s':_0x1af27f(0x192),'t':'.1.LEVEL'},{'s':_0x1af27f(0x192),'t':_0x1af27f(0x21f)},{'s':_0x1af27f(0x18a),'t':_0x1af27f(0x17c)},{'s':_0x1af27f(0x1f3),'t':_0x1af27f(0x1d6)},{'s':_0x1af27f(0x1f3),'t':_0x1af27f(0x1b2)}]);for(const _0x316b17 of _0x5d3493){if(_0x4363b7['includes'](_0x316b17['s'])){const _0x164f55=_0x4363b7[_0x1af27f(0x1e9)](_0x316b17['s'],_0x316b17['t']),_0x2b615c=await _0x1e6077['getForeignObjectAsync'](_0x164f55);if(_0x2b615c)return _0x164f55;}}try{const _0x370bdb=_0x4363b7['split']('.');if(_0x370bdb[_0x1af27f(0x1bc)]>0x2){const _0x56079e=_0x370bdb[_0x1af27f(0x1e8)](0x0,-0x1)[_0x1af27f(0x1a8)]('.'),_0x411475=await _0x1e6077[_0x1af27f(0x219)](_0x56079e+'.*'),_0x401c3a=[],_0x2cebe0=_0x4363b7[_0x1af27f(0x1f4)](/[._]+/)[_0x1af27f(0x1df)](_0x595979=>!['openknx','0',_0x1af27f(0x201),_0x1af27f(0x1d2),'wert',_0x1af27f(0x1f3),_0x1af27f(0x19e),_0x1af27f(0x1b3),'messwert',_0x1af27f(0x1bb)]['includes'](_0x595979[_0x1af27f(0x17b)]()));for(const [_0x5dcec7,_0x465183]of Object['entries'](_0x411475)){if(_0x5dcec7===_0x4363b7)continue;if(_0x465183&&_0x465183[_0x1af27f(0x177)]){const _0x2665b4=_0x5dcec7['toLowerCase'](),_0x91b691=(_0x465183[_0x1af27f(0x177)][_0x1af27f(0x19d)]||'')['toLowerCase'](),_0x2796b3=(_0x465183[_0x1af27f(0x177)][_0x1af27f(0x1cf)]||'')['toLowerCase']();let _0x7a78ae=![];if(_0x58bed3===_0x1af27f(0x1e3)&&_0x465183[_0x1af27f(0x177)][_0x1af27f(0x1be)]===!![])_0x7a78ae=_0x2665b4[_0x1af27f(0x1ec)]('set')||_0x2665b4['includes'](_0x1af27f(0x222))||_0x2665b4[_0x1af27f(0x1ec)]('target')||_0x91b691['includes'](_0x1af27f(0x206))||_0x91b691[_0x1af27f(0x1ec)]('thermostat.setpoint');else _0x58bed3===_0x1af27f(0x1a0)&&(_0x7a78ae=_0x2665b4[_0x1af27f(0x1ec)](_0x1af27f(0x1b2))||_0x2665b4[_0x1af27f(0x1ec)](_0x1af27f(0x1a0))||_0x2665b4['includes'](_0x1af27f(0x1ea))||_0x2665b4['includes'](_0x1af27f(0x230))||_0x91b691[_0x1af27f(0x1ec)]('level.valve')||_0x91b691[_0x1af27f(0x1ec)]('value.valve')||_0x2796b3[_0x1af27f(0x1ec)]('%'));if(_0x7a78ae){const _0x3a74ed=_0x5dcec7[_0x1af27f(0x1f4)](/[._]+/)[_0x1af27f(0x1bd)](_0x25c727=>_0x25c727['toLowerCase']());let _0x595c59=0x0;_0x2cebe0['forEach'](_0x25d2fd=>{const _0x1292ea=_0x1af27f;if(_0x3a74ed[_0x1292ea(0x1ec)](_0x25d2fd[_0x1292ea(0x17b)]()))_0x595c59++;}),_0x401c3a[_0x1af27f(0x1c7)]({'id':_0x5dcec7,'score':_0x595c59});}}}if(_0x401c3a[_0x1af27f(0x1bc)]>0x0){_0x401c3a['sort']((_0x50955e,_0x5cf977)=>_0x5cf977[_0x1af27f(0x211)]-_0x50955e[_0x1af27f(0x211)]);if(_0x401c3a[0x0][_0x1af27f(0x211)]>0x0)return _0x401c3a[0x0]['id'];}}}catch(_0x5e9ea4){}return null;}async function scanThermostats(_0x4b86ba){const _0x2760c9=a1_0x437bb4,_0xf21978=_0x4b86ba[_0x2760c9(0x236)]['devices']||[],_0x5578fe=[],_0x4d9157=_0xf21978[_0x2760c9(0x1df)](_0x2fda9d=>_0x2fda9d['id']&&_0x2fda9d['id'][_0x2760c9(0x1ec)](_0x2760c9(0x1f3))||_0x2fda9d['type']&&[_0x2760c9(0x1f3),_0x2760c9(0x18d),_0x2760c9(0x1b3)][_0x2760c9(0x1ec)](_0x2fda9d[_0x2760c9(0x1c9)])||_0x2fda9d['name']&&_0x2fda9d[_0x2760c9(0x21e)][_0x2760c9(0x17b)]()[_0x2760c9(0x1ec)](_0x2760c9(0x1e7)));for(const _0x4e7caa of _0x4d9157){const _0x409aa3=await findRelatedId(_0x4b86ba,_0x4e7caa['id'],_0x2760c9(0x1e3)),_0xec954c=await findRelatedId(_0x4b86ba,_0x4e7caa['id'],'valve');let _0x1f9987='Nicht\x20gefunden',_0x501c2d=![],_0x21332b=_0x4b86ba[_0x2760c9(0x236)][_0x2760c9(0x214)]||{};if(typeof _0x21332b===_0x2760c9(0x17e))try{_0x21332b=JSON[_0x2760c9(0x1e2)](_0x21332b);}catch(_0x327c83){}let _0x25e0c8=_0x4b86ba[_0x2760c9(0x236)][_0x2760c9(0x22e)]||{};if(typeof _0x25e0c8===_0x2760c9(0x17e))try{_0x25e0c8=JSON[_0x2760c9(0x1e2)](_0x25e0c8);}catch(_0x16325d){}if(_0x21332b[_0x4e7caa['id']]&&_0x21332b[_0x4e7caa['id']]===_0x409aa3||_0x25e0c8[_0x4e7caa['id']]&&_0x25e0c8[_0x4e7caa['id']]===_0xec954c)_0x1f9987=_0x2760c9(0x20f),_0x501c2d=!![];else(_0x409aa3||_0xec954c)&&(_0x1f9987=_0x2760c9(0x229));_0x5578fe[_0x2760c9(0x1c7)]({'room':_0x4e7caa[_0x2760c9(0x183)]||_0x2760c9(0x179),'sensorId':_0x4e7caa['id'],'setpointId':_0x409aa3||'-','valveId':_0xec954c||'-','source':_0x1f9987,'isManual':_0x501c2d,'status':_0x409aa3&&_0xec954c?'PERFECT':_0x409aa3?'OK':_0x2760c9(0x1d9)});}return _0x5578fe[_0x2760c9(0x210)]((_0x1180b7,_0x2df430)=>_0x1180b7['room'][_0x2760c9(0x1da)](_0x2df430[_0x2760c9(0x1f9)]));}function a1_0x51b7(){const _0x5a50ce=['level.temperature','_calName','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','search','\x20ist\x20auf\x20','_meta',':\x20Aufheizen\x20auf\x20','./ai_agent','values','Manuelles\x20Mapping','sort','score','abs','[FORCE]\x20','thermostatMapping','entries','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','toString','ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','getForeignObjectsAsync','\x20->\x20','1183812JZYsvh','trim','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','name','.4.VALVE_STATE','add','toUpperCase','soll','too_cold','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','open','log','analysis.energy.activeEnforcements','rescue_','Auto-Erkennung','eventStart','normal','[MPC]\x20','mpc_','valveMapping','6fxQHbx','position','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','findIndex','setStateAsync','Â°C\x20<\x20','Â°C!\x20(Puffer:\x20','config','calendarInstance','light','calendarSelection','\x20wieder\x20auf\x20','(((.+)+)+)+$','getTime','common','splice','Unbekannt','approved','toLowerCase','pi_heating_demand','.1.LEVEL','string','ðŸ“…\x20[MPC\x20INFO]\x20','\x27\x20(Match:\x20','[CAL]\x20','manual','location','getHours','apply','contact','13583110GiasPh','find','rÃ¼ckkehr','local_temperature','analysis.energy.warmupSources','event','thermostat','target','Â°C\x20->\x20',']:\x20Raum-Trigger\x20\x27','setForeignStateAsync','.1.TEMPERATURE','isArray','\x20erreicht\x20Limit\x20(','off','triggerTime','Unknown','.4.SET_TEMPERATURE','window','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','useCalendar','Â°C!\x20(Puffer\x20leer).','role','actual','getForeignStateAsync','valve','analysis.automation.lastAction','analysis.energy.schedulePreview',':\x20Absenkung\x20auf\x20','206990CHSMfU','getStateAsync','switch','urlaub\x20ende','join','unshift','summary','analysis.automation.confidenceThreshold',')\x20aktiv.\x20Heize\x20auf\x20','analysis.energy.rlPenalties','Â°C).\x20Entferne\x20Status.','Â°C\x20(Kalender-Schutz)','info','devices','level','sensor','.data.table','Â°C.','indexOf','analysis.automation.actionLog','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','5912656Shbatk','analysis.energy.warmupTimes','state','length','map','write','Enforcement\x20Monitor\x20Error:\x20','6jVIGAu','analysis.energy.ventilationAlerts','sendToPythonWrapper','reason','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','number','warn','push','\x20auf\x20','type','45106NIplFQ','SET','exports','analysis.automation.mode','TRAIN_RL_PENALTY','unit','Classic','date','ist','Â°C).\x20Sparmodus\x20beendet!','dimmer','ðŸ“…\x20SMART\x20SCHEDULE\x20[','valve_position','now','val','Fehlt','localeCompare','remove','11pJTlts','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','filter','\x20->\x20Schalte\x20','.1.SET_POINT_TEMPERATURE','parse','setpoint','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','Soll','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','temp','slice','replace','stellwert','3857355uQwIKJ','includes','\x20min).','SET_POINT_TEMPERATURE','default','message','occupied_heating_setpoint','PrÃ¤diktion:\x20','temperature','split','until','cal_','stringify','Â°C\x20(via\x20','room','[WATCHDOG]\x20','28AdQjHs','error','\x20gefunden!','forEach','230523yvMcfx','ACTUAL_TEMPERATURE','hm-rpc','analysis.energy.warmupTargets','analysis.energy.mpcActiveInterventions','.1.ACTUAL_TEMPERATURE','from'];a1_0x51b7=function(){return _0x5a50ce;};return a1_0x51b7();}function a1_0x3e6f(_0x3e01f7,_0x3349f1){const _0x3e93e9=a1_0x51b7();return a1_0x3e6f=function(_0x153320,_0x42d179){_0x153320=_0x153320-0x171;let _0x51b7e7=_0x3e93e9[_0x153320];return _0x51b7e7;},a1_0x3e6f(_0x3e01f7,_0x3349f1);}async function updateSchedulePreview(_0x25aa94){const _0x5f3073=a1_0x437bb4;if(!_0x25aa94[_0x5f3073(0x236)][_0x5f3073(0x19b)]||!_0x25aa94[_0x5f3073(0x236)][_0x5f3073(0x171)])return;let _0x26b8a4={};try{const _0x241efd=await _0x25aa94[_0x5f3073(0x1a5)](_0x5f3073(0x1ba));if(_0x241efd&&_0x241efd['val'])_0x26b8a4=JSON['parse'](_0x241efd[_0x5f3073(0x1d8)]);}catch(_0x36f58e){}const _0x210f89=[],_0x5dfbca=Date[_0x5f3073(0x1d7)](),_0x34bbde=0x30*0x3c*0x3c*0x3e8;try{const _0x1477a3=await _0x25aa94['getForeignStateAsync'](_0x25aa94['config'][_0x5f3073(0x171)]+_0x5f3073(0x1b4));if(!_0x1477a3||!_0x1477a3[_0x5f3073(0x1d8)])return;const _0x37554c=JSON[_0x5f3073(0x1e2)](_0x1477a3[_0x5f3073(0x1d8)]),_0x59b028=_0x25aa94['config'][_0x5f3073(0x173)]||[],_0x212208=_0x25aa94['config'][_0x5f3073(0x1b1)]||[],_0x2559b1=new Set();_0x212208['forEach'](_0x4bbbc3=>{const _0x2ec785=_0x5f3073;if(_0x4bbbc3[_0x2ec785(0x183)])_0x2559b1['add'](_0x4bbbc3[_0x2ec785(0x183)]);});for(const _0x502e46 of _0x37554c){if(_0x502e46[_0x5f3073(0x207)]&&_0x59b028['length']>0x0&&!_0x59b028[_0x5f3073(0x1ec)](_0x502e46[_0x5f3073(0x207)]))continue;const _0x40f916=_0x502e46['_date']||_0x502e46[_0x5f3073(0x22a)]||_0x502e46[_0x5f3073(0x1d1)];if(!_0x40f916)continue;const _0x5fe4a1=new Date(_0x40f916),_0x1e55d4=_0x5fe4a1[_0x5f3073(0x176)]();if(isNaN(_0x1e55d4))continue;if(_0x1e55d4<_0x5dfbca)continue;if(_0x1e55d4>_0x5dfbca+_0x34bbde)continue;const _0x47732e=(_0x502e46[_0x5f3073(0x18c)]||_0x502e46['summary']||'')['toLowerCase']();let _0x20b914=![],_0x1a5882=[],_0x4d8e85=_0x502e46[_0x5f3073(0x18c)]||_0x502e46[_0x5f3073(0x1aa)]||_0x5f3073(0x179);if(_0x47732e[_0x5f3073(0x1ec)](_0x5f3073(0x1a7))||_0x47732e[_0x5f3073(0x1ec)](_0x5f3073(0x189))||_0x47732e[_0x5f3073(0x1ec)]('ankunft'))_0x20b914=!![],_0x1a5882=Array[_0x5f3073(0x205)](_0x2559b1);else for(const _0x54b0c1 of _0x2559b1){if(_0x47732e[_0x5f3073(0x1ec)](_0x54b0c1['toLowerCase']()))_0x1a5882[_0x5f3073(0x1c7)](_0x54b0c1);}_0x1a5882['length']>0x0&&_0x1a5882[_0x5f3073(0x1fe)](_0x483f15=>{const _0x2f2dfb=_0x5f3073;let _0x1cda06=0x3c;if(_0x20b914){let _0x39936f=0x0;Object['values'](_0x26b8a4)[_0x2f2dfb(0x1fe)](_0x3e6f72=>{if(_0x3e6f72>_0x39936f)_0x39936f=_0x3e6f72;}),_0x1cda06=_0x39936f>0x0?_0x39936f:0x78;}else _0x1cda06=_0x26b8a4[_0x483f15]||0x3c;const _0x3d4082=new Date(_0x1e55d4-_0x1cda06*0xea60);_0x210f89[_0x2f2dfb(0x1c7)]({'eventTime':_0x1e55d4,'triggerTime':_0x3d4082[_0x2f2dfb(0x176)](),'room':_0x483f15,'minutes':_0x1cda06,'reason':_0x4d8e85,'isGlobal':_0x20b914});});}}catch(_0x3ee69){}_0x210f89[_0x5f3073(0x210)]((_0x1a0a0e,_0x2d34ca)=>_0x1a0a0e[_0x5f3073(0x196)]-_0x2d34ca['triggerTime']);const _0xbe3c54=_0x210f89[_0x5f3073(0x1e8)](0x0,0x5);await _0x25aa94[_0x5f3073(0x233)](_0x5f3073(0x1a2),{'val':JSON[_0x5f3073(0x1f7)](_0xbe3c54),'ack':!![]});}async function monitorEnforcements(_0x261f7e){const _0x427a52=a1_0x437bb4;try{const _0x18869d=_0x427a52(0x227),_0x2a0cd4=await _0x261f7e['getStateAsync'](_0x18869d);if(!_0x2a0cd4||!_0x2a0cd4['val'])return;let _0x1ac3cd=[];try{_0x1ac3cd=JSON[_0x427a52(0x1e2)](_0x2a0cd4[_0x427a52(0x1d8)]);}catch(_0x2cc9f9){return;}if(!Array[_0x427a52(0x193)](_0x1ac3cd)||_0x1ac3cd[_0x427a52(0x1bc)]===0x0)return;const _0x362d03=Date[_0x427a52(0x1d7)](),_0x92f50c=_0x261f7e[_0x427a52(0x236)]['devices']||[];let _0x8cb042=![];for(let _0x480863=_0x1ac3cd[_0x427a52(0x1bc)]-0x1;_0x480863>=0x0;_0x480863--){const _0x48c5c4=_0x1ac3cd[_0x480863];if(_0x362d03>=_0x48c5c4[_0x427a52(0x1f5)]){_0x261f7e[_0x427a52(0x226)][_0x427a52(0x1b0)](_0x427a52(0x1b8)+_0x48c5c4[_0x427a52(0x1f9)]+_0x427a52(0x1e4)),_0x1ac3cd[_0x427a52(0x178)](_0x480863,0x1),_0x8cb042=!![];continue;}const _0x4b03c3=_0x92f50c[_0x427a52(0x188)](_0x2c9fbd=>normalize(_0x2c9fbd[_0x427a52(0x183)])===normalize(_0x48c5c4[_0x427a52(0x1f9)])&&(_0x2c9fbd[_0x427a52(0x1c9)]===_0x427a52(0x1f3)||_0x2c9fbd[_0x427a52(0x1c9)]===_0x427a52(0x18d)));if(_0x4b03c3){const _0x244292=await findRelatedId(_0x261f7e,_0x4b03c3['id'],_0x427a52(0x1e3));if(_0x244292){const _0x590ce9=await _0x261f7e[_0x427a52(0x19f)](_0x244292);_0x590ce9&&typeof _0x590ce9[_0x427a52(0x1d8)]===_0x427a52(0x1c5)&&(_0x590ce9[_0x427a52(0x1d8)]<0xf&&(_0x261f7e[_0x427a52(0x226)][_0x427a52(0x1c6)](_0x427a52(0x218)+_0x48c5c4[_0x427a52(0x1f9)]+'\x20auf\x20'+_0x590ce9[_0x427a52(0x1d8)]+_0x427a52(0x224)+_0x48c5c4[_0x427a52(0x18e)]+_0x427a52(0x1b5)),await _0x261f7e[_0x427a52(0x191)](_0x244292,_0x48c5c4['target']),await logAutomationAction(_0x261f7e,_0x427a52(0x213)+_0x48c5c4[_0x427a52(0x1f9)]+':\x20'+_0x590ce9[_0x427a52(0x1d8)]+_0x427a52(0x18f)+_0x48c5c4['target']+_0x427a52(0x1af))));}}}_0x8cb042&&await _0x261f7e[_0x427a52(0x233)](_0x18869d,{'val':JSON[_0x427a52(0x1f7)](_0x1ac3cd),'ack':!![]});}catch(_0x3258cc){_0x261f7e['log'][_0x427a52(0x1fc)](_0x427a52(0x1bf)+_0x3258cc[_0x427a52(0x1f0)]);}}async function checkCalendarTriggers(_0x9f4910){const _0x317a1f=a1_0x437bb4;if(!_0x9f4910[_0x317a1f(0x236)]['useCalendar']||!_0x9f4910[_0x317a1f(0x236)][_0x317a1f(0x171)])return;await updateSchedulePreview(_0x9f4910);let _0x304f67={},_0x4c5cba={};try{const _0x111d65=await _0x9f4910[_0x317a1f(0x1a5)](_0x317a1f(0x1ba));if(_0x111d65&&_0x111d65[_0x317a1f(0x1d8)])_0x304f67=JSON[_0x317a1f(0x1e2)](_0x111d65[_0x317a1f(0x1d8)]);const _0x598f78=await _0x9f4910[_0x317a1f(0x1a5)](_0x317a1f(0x18b));if(_0x598f78&&_0x598f78['val'])_0x4c5cba=JSON[_0x317a1f(0x1e2)](_0x598f78[_0x317a1f(0x1d8)]);}catch(_0x351090){}let _0x294858={'default':0x15};try{const _0x4bdf8c=await _0x9f4910[_0x317a1f(0x1a5)](_0x317a1f(0x202));if(_0x4bdf8c&&_0x4bdf8c[_0x317a1f(0x1d8)])_0x294858=JSON[_0x317a1f(0x1e2)](_0x4bdf8c['val']);}catch(_0x5a5ce3){}let _0x40d676=[];try{const _0x17d954=await _0x9f4910['getStateAsync'](_0x317a1f(0x227));if(_0x17d954&&_0x17d954[_0x317a1f(0x1d8)])_0x40d676=JSON[_0x317a1f(0x1e2)](_0x17d954[_0x317a1f(0x1d8)]);}catch(_0x457fcc){}try{const _0x1eced2=await _0x9f4910[_0x317a1f(0x19f)](_0x9f4910[_0x317a1f(0x236)][_0x317a1f(0x171)]+_0x317a1f(0x1b4));if(!_0x1eced2||!_0x1eced2[_0x317a1f(0x1d8)])return;const _0x4320b8=JSON['parse'](_0x1eced2['val']),_0x16b529=Date['now'](),_0x2ee8b6=_0x9f4910[_0x317a1f(0x236)][_0x317a1f(0x1b1)]||[],_0x4d94e2=_0x9f4910[_0x317a1f(0x236)][_0x317a1f(0x173)]||[];let _0x238682=![];for(const _0x560c2c of _0x4320b8){if(_0x560c2c[_0x317a1f(0x207)]&&_0x4d94e2[_0x317a1f(0x1bc)]>0x0&&!_0x4d94e2[_0x317a1f(0x1ec)](_0x560c2c[_0x317a1f(0x207)]))continue;const _0x18db9d=_0x560c2c['_date']||_0x560c2c[_0x317a1f(0x22a)]||_0x560c2c[_0x317a1f(0x1d1)];if(!_0x18db9d)continue;const _0x3eb156=new Date(_0x18db9d);if(isNaN(_0x3eb156[_0x317a1f(0x176)]()))continue;const _0x17a32b=(_0x560c2c['event']||_0x560c2c[_0x317a1f(0x1aa)]||'')[_0x317a1f(0x17b)]();if(_0x17a32b['includes'](_0x317a1f(0x1a7))||_0x17a32b['includes'](_0x317a1f(0x189))||_0x17a32b[_0x317a1f(0x1ec)]('ankunft')){let _0x2f07cf=0x0;Object[_0x317a1f(0x20e)](_0x304f67)['forEach'](_0x55991e=>{if(_0x55991e>_0x2f07cf)_0x2f07cf=_0x55991e;});if(_0x2f07cf===0x0)_0x2f07cf=0x78;const _0x596311=_0x3eb156[_0x317a1f(0x176)]()-_0x2f07cf*0xea60;_0x16b529>=_0x596311&&_0x16b529<_0x3eb156['getTime']()&&(_0x9f4910['currentSystemMode']!==_0x317a1f(0x22b)&&(_0x9f4910[_0x317a1f(0x226)][_0x317a1f(0x1b0)](_0x317a1f(0x1e6)+_0x2f07cf+_0x317a1f(0x1ed)),await _0x9f4910[_0x317a1f(0x233)]('system.mode',{'val':_0x317a1f(0x22b),'ack':![]})));}for(const _0x4a4c77 of _0x2ee8b6){if(_0x4a4c77[_0x317a1f(0x183)]){const _0x756c6d=_0x4a4c77['location'][_0x317a1f(0x17b)](),_0xe52abb=(_0x4a4c77[_0x317a1f(0x21e)]||'')[_0x317a1f(0x17b)]();let _0x27beee=_0x17a32b['includes'](_0x756c6d);!_0x27beee&&_0xe52abb[_0x317a1f(0x1bc)]>0x3&&_0x17a32b[_0x317a1f(0x1ec)](_0xe52abb)&&(_0x27beee=!![]);if(_0x27beee){const _0x268137=_0x304f67[_0x4a4c77[_0x317a1f(0x183)]]||0x3c,_0x49363b=_0x4c5cba[_0x4a4c77[_0x317a1f(0x183)]]||_0x317a1f(0x1d0),_0x4776ef=_0x3eb156[_0x317a1f(0x176)]()-_0x268137*0xea60;if(_0x16b529>=_0x4776ef&&_0x16b529<_0x3eb156[_0x317a1f(0x176)]()){const _0x3d8468=lastActions[_0x317a1f(0x1f6)+_0x4a4c77['location']];if(_0x3d8468&&_0x16b529-_0x3d8468<CAL_COOLDOWN_MS)continue;const _0x18c735=await findRelatedId(_0x9f4910,_0x4a4c77['id'],_0x317a1f(0x1e3));if(_0x18c735){let _0x3f884e=_0x294858[_0x4a4c77[_0x317a1f(0x183)]];if(_0x3f884e===undefined)_0x3f884e=_0x294858[_0x317a1f(0x1ef)];if(_0x3f884e===undefined)_0x3f884e=0x15;const _0x3af4c4=await _0x9f4910['getForeignStateAsync'](_0x18c735);if(_0x3af4c4&&typeof _0x3af4c4['val']===_0x317a1f(0x1c5)&&_0x3af4c4[_0x317a1f(0x1d8)]<_0x3f884e-0.5){_0x9f4910[_0x317a1f(0x226)][_0x317a1f(0x1b0)](_0x317a1f(0x1d5)+_0x49363b+_0x317a1f(0x190)+_0x4a4c77['location']+_0x317a1f(0x180)+_0x17a32b+_0x317a1f(0x1ac)+_0x3f884e+'Â°C\x20(Vorlauf:\x20'+_0x268137+_0x317a1f(0x1ed)),await _0x9f4910[_0x317a1f(0x191)](_0x18c735,_0x3f884e),await logAutomationAction(_0x9f4910,_0x317a1f(0x181)+_0x4a4c77[_0x317a1f(0x183)]+_0x317a1f(0x21a)+_0x3f884e+_0x317a1f(0x1f8)+_0x49363b+')'),lastActions['cal_'+_0x4a4c77[_0x317a1f(0x183)]]=_0x16b529;const _0xf35854=_0x40d676[_0x317a1f(0x232)](_0x21b71e=>_0x21b71e[_0x317a1f(0x1f9)]===_0x4a4c77['location']);if(_0xf35854!==-0x1)_0x40d676['splice'](_0xf35854,0x1);_0x40d676[_0x317a1f(0x1c7)]({'room':_0x4a4c77[_0x317a1f(0x183)],'target':_0x3f884e,'until':_0x3eb156[_0x317a1f(0x176)]()}),_0x238682=!![];}}}}}}}_0x238682&&await _0x9f4910[_0x317a1f(0x233)](_0x317a1f(0x227),{'val':JSON['stringify'](_0x40d676),'ack':!![]});}catch(_0x4c15d9){_0x9f4910[_0x317a1f(0x226)][_0x317a1f(0x1c6)]('Calendar\x20Check\x20Error:\x20'+_0x4c15d9[_0x317a1f(0x1f0)]);}}async function manageMpcIntervention(_0x35fab2,_0x4c5028,_0x1fc5fa){const _0x2f1a8a=a1_0x437bb4;try{const _0x457efc=_0x2f1a8a(0x203),_0x2c2fdd=await _0x35fab2[_0x2f1a8a(0x1a5)](_0x457efc);let _0x5dd915=[];if(_0x2c2fdd&&_0x2c2fdd[_0x2f1a8a(0x1d8)])try{_0x5dd915=JSON['parse'](_0x2c2fdd[_0x2f1a8a(0x1d8)]);}catch(_0x137c47){}const _0x376cb3=_0x5dd915[_0x2f1a8a(0x1b6)](_0x4c5028);if(_0x1fc5fa==='add')_0x376cb3===-0x1&&(_0x5dd915[_0x2f1a8a(0x1c7)](_0x4c5028),await _0x35fab2[_0x2f1a8a(0x233)](_0x457efc,{'val':JSON[_0x2f1a8a(0x1f7)](_0x5dd915),'ack':!![]}));else _0x1fc5fa===_0x2f1a8a(0x1db)&&(_0x376cb3!==-0x1&&(_0x5dd915['splice'](_0x376cb3,0x1),await _0x35fab2[_0x2f1a8a(0x233)](_0x457efc,{'val':JSON[_0x2f1a8a(0x1f7)](_0x5dd915),'ack':!![]})));}catch(_0x4caedb){}}async function cleanupGhostInterventions(_0x3b89d7){const _0x69df89=a1_0x437bb4;try{const _0x3c58e2='analysis.energy.mpcActiveInterventions',_0xb8fb3=await _0x3b89d7['getStateAsync'](_0x3c58e2);if(!_0xb8fb3||!_0xb8fb3['val'])return;const _0x4703a1=JSON['parse'](_0xb8fb3[_0x69df89(0x1d8)]);if(!Array[_0x69df89(0x193)](_0x4703a1)||_0x4703a1['length']===0x0)return;let _0x2aa58a={'default':0x15};try{const _0xf49395=await _0x3b89d7['getStateAsync'](_0x69df89(0x202));if(_0xf49395&&_0xf49395['val'])_0x2aa58a=JSON[_0x69df89(0x1e2)](_0xf49395[_0x69df89(0x1d8)]);}catch(_0x462888){}let _0x57fc87=[];try{const _0x92772f=await _0x3b89d7['getStateAsync'](_0x69df89(0x1c1));if(_0x92772f&&_0x92772f['val'])_0x57fc87=JSON['parse'](_0x92772f[_0x69df89(0x1d8)]);}catch(_0x263c88){}let _0x5f2691={},_0x1e130e=![];try{const _0x2c99bc=await _0x3b89d7[_0x69df89(0x1a5)](_0x69df89(0x1ad));if(_0x2c99bc&&_0x2c99bc['val'])_0x5f2691=JSON[_0x69df89(0x1e2)](_0x2c99bc[_0x69df89(0x1d8)]);}catch(_0x39bb2c){}if(_0x5f2691['_meta']){const _0x251a8b=Date[_0x69df89(0x1d7)]();for(const [_0x3d0224,_0x20acb7]of Object[_0x69df89(0x215)](_0x5f2691['_meta'])){_0x251a8b-_0x20acb7>PENALTY_TTL&&(delete _0x5f2691[_0x3d0224],delete _0x5f2691[_0x69df89(0x20b)][_0x3d0224],_0x1e130e=!![],_0x3b89d7[_0x69df89(0x226)][_0x69df89(0x1b0)]('ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27'+_0x3d0224+_0x69df89(0x1de)));}}const _0x1636a4=_0x3b89d7[_0x69df89(0x236)][_0x69df89(0x1b1)]||[];let _0x58b99f=![];for(let _0x5b04db=_0x4703a1[_0x69df89(0x1bc)]-0x1;_0x5b04db>=0x0;_0x5b04db--){const _0x11c75d=_0x4703a1[_0x5b04db],_0x39398b=_0x1636a4[_0x69df89(0x188)](_0x28cb6f=>normalize(_0x28cb6f[_0x69df89(0x183)])===normalize(_0x11c75d)&&(_0x28cb6f[_0x69df89(0x1c9)]===_0x69df89(0x1f3)||_0x28cb6f['type']===_0x69df89(0x18d)));if(!_0x39398b){_0x3b89d7[_0x69df89(0x226)]['warn']('ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27'+_0x11c75d+_0x69df89(0x1c4)),_0x4703a1[_0x69df89(0x178)](_0x5b04db,0x1),_0x58b99f=!![];continue;}if(_0x39398b){const _0xaacb6a=await findRelatedId(_0x3b89d7,_0x39398b['id'],_0x69df89(0x1e3)),_0x57d51b=await _0x3b89d7['getForeignStateAsync'](_0x39398b['id']);if(_0xaacb6a){const _0x20d0f0=await _0x3b89d7[_0x69df89(0x19f)](_0xaacb6a);if(_0x20d0f0&&typeof _0x20d0f0[_0x69df89(0x1d8)]==='number'){let _0x19b618=![],_0xff34e='';Math[_0x69df89(0x212)](_0x20d0f0['val']-ECO_TEMP)>0.5&&(_0x19b618=!![],_0xff34e=_0x69df89(0x182));if(!_0x19b618&&_0x57d51b&&typeof _0x57d51b['val']===_0x69df89(0x1c5)){const _0x25edc5=_0x2aa58a[_0x11c75d]||_0x2aa58a[_0x69df89(0x1ef)]||0x15;_0x57d51b[_0x69df89(0x1d8)]<_0x25edc5+0.2&&(_0x19b618=!![],_0xff34e=_0x69df89(0x223));}if(_0x19b618){if(_0xff34e===_0x69df89(0x182)){_0x3b89d7['log'][_0x69df89(0x1b0)]('ðŸ§¹\x20[MPC\x20CLEANUP]\x20'+_0x11c75d+_0x69df89(0x20a)+_0x20d0f0[_0x69df89(0x1d8)]+'Â°C\x20(nicht\x20'+ECO_TEMP+_0x69df89(0x1ae));const _0x5a498a=lastActions[_0x69df89(0x1f6)+_0x11c75d],_0x14cd6f=_0x5a498a&&Date['now']()-_0x5a498a<0x2*0x3c*0x3e8;if(!_0x14cd6f&&_0x20d0f0['val']>ECO_TEMP+0.5){_0x3b89d7[_0x69df89(0x1c2)]&&(_0x3b89d7[_0x69df89(0x226)][_0x69df89(0x1b0)](_0x69df89(0x208)+_0x11c75d+'\x20wurde\x20manuell\x20erhÃ¶ht.'),_0x3b89d7[_0x69df89(0x1c2)](_0x69df89(0x1ce),{'room':_0x11c75d}));const _0x304696=_0x11c75d+'_'+new Date()[_0x69df89(0x184)]();if(!_0x5f2691[_0x304696]){_0x5f2691[_0x304696]=0x1;if(!_0x5f2691[_0x69df89(0x20b)])_0x5f2691['_meta']={};_0x5f2691[_0x69df89(0x20b)][_0x304696]=Date['now'](),_0x1e130e=!![];}}else _0x14cd6f&&_0x3b89d7[_0x69df89(0x226)][_0x69df89(0x1b0)](_0x69df89(0x17f)+_0x11c75d+_0x69df89(0x231));}else{if(_0xff34e===_0x69df89(0x223)){let _0x5a560e=![];if(_0x57fc87[_0x69df89(0x188)](_0x320c26=>_0x320c26['room']===_0x11c75d))_0x5a560e=!![];const _0x5d987b=_0x1636a4[_0x69df89(0x1df)](_0x3a781f=>normalize(_0x3a781f['location'])===normalize(_0x11c75d)&&(_0x3a781f['type']===_0x69df89(0x199)||_0x3a781f[_0x69df89(0x1c9)]===_0x69df89(0x1b3)||_0x3a781f[_0x69df89(0x1c9)]===_0x69df89(0x186)));for(const _0x2a358a of _0x5d987b){try{const _0x323cd4=await _0x3b89d7[_0x69df89(0x19f)](_0x2a358a['id']);if(_0x323cd4&&(_0x323cd4['val']===!![]||_0x323cd4[_0x69df89(0x1d8)]===0x1||String(_0x323cd4[_0x69df89(0x1d8)])[_0x69df89(0x17b)]()===_0x69df89(0x225)))_0x5a560e=!![];}catch(_0x295170){}}if(_0x5a560e)_0x3b89d7[_0x69df89(0x226)][_0x69df89(0x1b0)]('ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20'+_0x11c75d+_0x69df89(0x1dd));else{const _0x2d8bda=_0x2aa58a[_0x11c75d]||_0x2aa58a['default']||0x15;_0x3b89d7[_0x69df89(0x226)][_0x69df89(0x1b0)](_0x69df89(0x21d)+_0x11c75d+_0x69df89(0x194)+_0x57d51b['val']+_0x69df89(0x234)+(_0x2d8bda+0.2)+_0x69df89(0x1d3)),await _0x3b89d7[_0x69df89(0x191)](_0xaacb6a,_0x2d8bda),await logAutomationAction(_0x3b89d7,_0x69df89(0x1fa)+_0x11c75d+':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20'+_0x2d8bda+'Â°C'),lastActions[_0x69df89(0x228)+_0x11c75d]=Date[_0x69df89(0x1d7)]();}}}_0x4703a1['splice'](_0x5b04db,0x1),_0x58b99f=!![];}}}}}_0x58b99f&&await _0x3b89d7[_0x69df89(0x233)](_0x3c58e2,{'val':JSON[_0x69df89(0x1f7)](_0x4703a1),'ack':!![]}),_0x1e130e&&await _0x3b89d7[_0x69df89(0x233)](_0x69df89(0x1ad),{'val':JSON[_0x69df89(0x1f7)](_0x5f2691),'ack':!![]});}catch(_0x2a87f0){}}async function applyEnergySavings(_0x3931ec,_0x13f284){const _0x32bd5f=a1_0x437bb4;await cleanupGhostInterventions(_0x3931ec);if(!_0x13f284||_0x13f284[_0x32bd5f(0x1bc)]===0x0)return;const _0x23bc4f=_0x3931ec[_0x32bd5f(0x236)]['devices']||[],_0x1f0a67=Date['now']();for(const _0x186f23 of _0x13f284){const _0x18f6d6=_0x186f23['room'],_0x3cda88=_0x186f23['minutes_safe'],_0x473403=_0x186f23[_0x32bd5f(0x18e)]||0x15;if(lastActions['rescue_'+_0x18f6d6]&&_0x1f0a67-lastActions[_0x32bd5f(0x228)+_0x18f6d6]<RESCUE_LOCK_MS)continue;const _0x5de4c5=_0x23bc4f['find'](_0x9bbbf4=>normalize(_0x9bbbf4[_0x32bd5f(0x183)])===normalize(_0x18f6d6)&&(_0x9bbbf4[_0x32bd5f(0x1c9)]===_0x32bd5f(0x1f3)||_0x9bbbf4[_0x32bd5f(0x1c9)]===_0x32bd5f(0x18d)));if(!_0x5de4c5)continue;const _0x5521fa=await findRelatedId(_0x3931ec,_0x5de4c5['id'],'setpoint');if(_0x5521fa){if(lastActions[_0x32bd5f(0x22d)+_0x18f6d6]&&_0x1f0a67-lastActions[_0x32bd5f(0x22d)+_0x18f6d6]<0x1e*0x3c*0x3e8)continue;const _0x49e3a2=await _0x3931ec[_0x32bd5f(0x19f)](_0x5521fa);if(_0x49e3a2&&typeof _0x49e3a2[_0x32bd5f(0x1d8)]===_0x32bd5f(0x1c5)){const _0x414c14=_0x49e3a2[_0x32bd5f(0x1d8)];_0x414c14!==ECO_TEMP&&await manageMpcIntervention(_0x3931ec,_0x18f6d6,_0x32bd5f(0x1db));if(_0x3cda88>0x1e)_0x414c14>ECO_TEMP+0.5&&(_0x3931ec[_0x32bd5f(0x226)][_0x32bd5f(0x1b0)](_0x32bd5f(0x19a)+_0x18f6d6+_0x32bd5f(0x1c8)+ECO_TEMP+_0x32bd5f(0x235)+_0x3cda88+'\x20min)'),await _0x3931ec[_0x32bd5f(0x191)](_0x5521fa,ECO_TEMP),await manageMpcIntervention(_0x3931ec,_0x18f6d6,_0x32bd5f(0x220)),lastActions[_0x32bd5f(0x22d)+_0x18f6d6]=_0x1f0a67,await logAutomationAction(_0x3931ec,_0x32bd5f(0x22c)+_0x18f6d6+_0x32bd5f(0x1a3)+ECO_TEMP+'Â°C'));else _0x3cda88<=0xf&&(_0x414c14<_0x473403&&(_0x3931ec['log'][_0x32bd5f(0x1b0)]('ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20'+_0x18f6d6+_0x32bd5f(0x174)+_0x473403+_0x32bd5f(0x19c)),await _0x3931ec[_0x32bd5f(0x191)](_0x5521fa,_0x473403),await manageMpcIntervention(_0x3931ec,_0x18f6d6,_0x32bd5f(0x1db)),lastActions['mpc_'+_0x18f6d6]=_0x1f0a67,await logAutomationAction(_0x3931ec,'[MPC]\x20'+_0x18f6d6+_0x32bd5f(0x20c)+_0x473403+'Â°C')));}}else _0x3931ec[_0x32bd5f(0x226)]['warn'](_0x32bd5f(0x216)+_0x18f6d6+_0x32bd5f(0x1fd));}}module[a1_0x437bb4(0x1cc)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};