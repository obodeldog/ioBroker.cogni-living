const a1_0x5d6855=a1_0x4633;(function(_0x4fc004,_0xd2c562){const _0x32138d=a1_0x4633,_0x3354ac=_0x4fc004();while(!![]){try{const _0x57f1e8=-parseInt(_0x32138d(0x16e))/0x1+-parseInt(_0x32138d(0x185))/0x2*(-parseInt(_0x32138d(0x181))/0x3)+-parseInt(_0x32138d(0x166))/0x4*(-parseInt(_0x32138d(0x16b))/0x5)+parseInt(_0x32138d(0x168))/0x6+-parseInt(_0x32138d(0x184))/0x7+parseInt(_0x32138d(0x180))/0x8*(parseInt(_0x32138d(0x158))/0x9)+-parseInt(_0x32138d(0x15a))/0xa;if(_0x57f1e8===_0xd2c562)break;else _0x3354ac['push'](_0x3354ac['shift']());}catch(_0x4dc18d){_0x3354ac['push'](_0x3354ac['shift']());}}}(a1_0x422e,0x9d246));const a1_0x14d535=(function(){let _0x131ec2=!![];return function(_0x12b3c7,_0x1e1185){const _0x59413c=_0x131ec2?function(){const _0x54b618=a1_0x4633;if(_0x1e1185){const _0x12159a=_0x1e1185[_0x54b618(0x159)](_0x12b3c7,arguments);return _0x1e1185=null,_0x12159a;}}:function(){};return _0x131ec2=![],_0x59413c;};}()),a1_0x309578=a1_0x14d535(this,function(){const _0x519b8d=a1_0x4633;return a1_0x309578[_0x519b8d(0x178)]()[_0x519b8d(0x163)](_0x519b8d(0x189))[_0x519b8d(0x178)]()[_0x519b8d(0x161)](a1_0x309578)['search'](_0x519b8d(0x189));});a1_0x309578();'use strict';function a1_0x4633(_0x37bdaf,_0xb99a6d){const _0x3a19dd=a1_0x422e();return a1_0x4633=function(_0x309578,_0x14d535){_0x309578=_0x309578-0x156;let _0x422efd=_0x3a19dd[_0x309578];return _0x422efd;},a1_0x4633(_0x37bdaf,_0xb99a6d);}function a1_0x422e(){const _0xcb8d66=['info','toUpperCase','\x20->\x20Schalte\x20','toString','simulate','exports','replace','Unknown','val','reason','ðŸ‘€\x20SIMULATION:\x20','8SLXmdq','137610gOWSYy','name','devices','6649293tVifCE','22UcdFhx','off','\x20->\x20','type','(((.+)+)+)+$','dimmer','log','5692509ZGRmLg','apply','2874200MbINYo','âš¡\x20ACTION:\x20','now','analysis.automation.lastAction','setStateAsync','getForeignStateAsync','debug','constructor','ðŸ¤–\x20Butler\x20Blocked:\x20','search','approved','\x27\x20(norm:\x20\x27','3855716OrdrOS','\x27),\x20but\x20found\x20no\x20matching\x20light\x20device.','1903626EbZSti','PrÃ¤diktion:\x20','consultButler','5AxWsoF','find','analysis.automation.confidenceThreshold','537298lRQeBT','light','./ai_agent','switch','active','getStateAsync','trim'];a1_0x422e=function(){return _0xcb8d66;};return a1_0x422e();}const aiAgent=require(a1_0x5d6855(0x170)),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function normalize(_0x3b81fa){const _0x5c64f3=a1_0x5d6855;if(!_0x3b81fa)return'';return _0x3b81fa['toLowerCase']()[_0x5c64f3(0x17b)](/\s+/g,'')[_0x5c64f3(0x174)]();}async function handlePrediction(_0x4493fe,_0x3e17c3,_0x201c54){const _0xdd816e=a1_0x5d6855;if(!_0x3e17c3||_0x3e17c3===_0xdd816e(0x17c))return;let _0x24993e='off',_0x2f94b2=0.6;try{const _0x5e71f7=await _0x4493fe[_0xdd816e(0x173)]('analysis.automation.mode');if(_0x5e71f7&&_0x5e71f7[_0xdd816e(0x17d)])_0x24993e=_0x5e71f7[_0xdd816e(0x17d)];const _0x2eb3ea=await _0x4493fe['getStateAsync'](_0xdd816e(0x16d));if(_0x2eb3ea&&_0x2eb3ea[_0xdd816e(0x17d)])_0x2f94b2=_0x2eb3ea[_0xdd816e(0x17d)];}catch(_0x21405e){}if(_0x24993e===_0xdd816e(0x186))return;if(_0x201c54<_0x2f94b2)return;const _0x3e66a4=Date[_0xdd816e(0x15c)]();if(lastActions[_0x3e17c3]&&_0x3e66a4-lastActions[_0x3e17c3]<COOLDOWN_MS)return;const _0x574138=_0x4493fe['config'][_0xdd816e(0x183)]||[],_0x32d822=normalize(_0x3e17c3),_0x12ced8=_0x574138[_0xdd816e(0x16c)](_0x115097=>{const _0x33ae91=_0xdd816e;return normalize(_0x115097['location'])===_0x32d822&&(_0x115097[_0x33ae91(0x188)]===_0x33ae91(0x16f)||_0x115097[_0x33ae91(0x188)]===_0x33ae91(0x156)||_0x115097[_0x33ae91(0x188)]===_0x33ae91(0x171));});if(!_0x12ced8){const _0x44032a='ðŸ”\x20Device-Search\x20failed:\x20Predicted\x20\x27'+_0x3e17c3+_0xdd816e(0x165)+_0x32d822+_0xdd816e(0x167);_0x4493fe[_0xdd816e(0x157)][_0xdd816e(0x160)](_0x44032a);return;}const _0x1f1df3=await aiAgent[_0xdd816e(0x16a)](_0x4493fe,_0x3e17c3,_0x12ced8[_0xdd816e(0x182)],_0x201c54);if(!_0x1f1df3[_0xdd816e(0x164)]){_0x4493fe[_0xdd816e(0x157)]['debug'](_0xdd816e(0x162)+_0x3e17c3+_0xdd816e(0x187)+_0x1f1df3[_0xdd816e(0x17e)]),await _0x4493fe[_0xdd816e(0x15e)](_0xdd816e(0x15d),{'val':'[BLOCKED]\x20'+_0x1f1df3[_0xdd816e(0x17e)],'ack':!![]});return;}const _0x3aae57=_0xdd816e(0x169)+_0x3e17c3+_0xdd816e(0x177)+_0x12ced8[_0xdd816e(0x182)]+'\x20('+_0x1f1df3[_0xdd816e(0x17e)]+')';await _0x4493fe[_0xdd816e(0x15e)]('analysis.automation.lastAction',{'val':'['+_0x24993e[_0xdd816e(0x176)]()+']\x20'+_0x3aae57,'ack':!![]});if(_0x24993e===_0xdd816e(0x179))_0x4493fe[_0xdd816e(0x157)][_0xdd816e(0x175)](_0xdd816e(0x17f)+_0x3aae57);else{if(_0x24993e===_0xdd816e(0x172)){_0x4493fe[_0xdd816e(0x157)][_0xdd816e(0x175)](_0xdd816e(0x15b)+_0x3aae57);const _0x2eecf7=await _0x4493fe[_0xdd816e(0x15f)](_0x12ced8['id']);if(_0x2eecf7&&(_0x2eecf7[_0xdd816e(0x17d)]===!![]||_0x2eecf7[_0xdd816e(0x17d)]>0x0)){}else await _0x4493fe['setForeignStateAsync'](_0x12ced8['id'],!![]);lastActions[_0x3e17c3]=_0x3e66a4;}}}module[a1_0x5d6855(0x17a)]={'handlePrediction':handlePrediction};