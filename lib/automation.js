const a1_0x4e14a9=a1_0x6088;(function(_0x1f98d0,_0x5cce25){const _0x1b4996=a1_0x6088,_0x36d0d6=_0x1f98d0();while(!![]){try{const _0x388c40=-parseInt(_0x1b4996(0x165))/0x1*(parseInt(_0x1b4996(0x15c))/0x2)+parseInt(_0x1b4996(0x1c5))/0x3+parseInt(_0x1b4996(0x14f))/0x4*(-parseInt(_0x1b4996(0x11d))/0x5)+parseInt(_0x1b4996(0x122))/0x6+parseInt(_0x1b4996(0x171))/0x7*(parseInt(_0x1b4996(0x16b))/0x8)+-parseInt(_0x1b4996(0x1d0))/0x9*(parseInt(_0x1b4996(0x1aa))/0xa)+parseInt(_0x1b4996(0x196))/0xb;if(_0x388c40===_0x5cce25)break;else _0x36d0d6['push'](_0x36d0d6['shift']());}catch(_0x331a43){_0x36d0d6['push'](_0x36d0d6['shift']());}}}(a1_0x5b53,0xe4b3e));const a1_0x4ff7ff=(function(){let _0x300e53=!![];return function(_0x35461e,_0x1559a4){const _0x124c16=_0x300e53?function(){if(_0x1559a4){const _0x5cc955=_0x1559a4['apply'](_0x35461e,arguments);return _0x1559a4=null,_0x5cc955;}}:function(){};return _0x300e53=![],_0x124c16;};}()),a1_0x2e5b1e=a1_0x4ff7ff(this,function(){const _0xbcb352=a1_0x6088;return a1_0x2e5b1e[_0xbcb352(0x13f)]()[_0xbcb352(0x199)](_0xbcb352(0x16f))[_0xbcb352(0x13f)]()[_0xbcb352(0x1d8)](a1_0x2e5b1e)[_0xbcb352(0x199)](_0xbcb352(0x16f));});a1_0x2e5b1e();'use strict';const aiAgent=require(a1_0x4e14a9(0x160)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x22d34b){const _0x43e0dc=a1_0x4e14a9;if(!_0x22d34b)return'';return _0x22d34b[_0x43e0dc(0x19f)]()[_0x43e0dc(0x12d)](/\s+/g,'')[_0x43e0dc(0x12e)]();}function getWarmupRobust(_0x4e3569,_0x356b27){const _0x94a0d1=a1_0x4e14a9;if(!_0x4e3569||!_0x356b27)return 0x3c;if(_0x4e3569[_0x356b27]!==undefined)return _0x4e3569[_0x356b27];const _0x3e14b8=_0x356b27[_0x94a0d1(0x19f)]()[_0x94a0d1(0x12d)](/√§/g,'ae')[_0x94a0d1(0x12d)](/√∂/g,'oe')[_0x94a0d1(0x12d)](/√º/g,'ue')[_0x94a0d1(0x12d)](/√ü/g,'ss')[_0x94a0d1(0x12d)](/\s+/g,'_')[_0x94a0d1(0x12d)](/[^a-z0-9_]/g,'');if(_0x4e3569[_0x3e14b8]!==undefined)return _0x4e3569[_0x3e14b8];return 0x3c;}async function logAutomationAction(_0x3c0e37,_0x977ff4){const _0x3f46ff=a1_0x4e14a9;await _0x3c0e37['setStateAsync'](_0x3f46ff(0x170),{'val':_0x977ff4,'ack':!![]});try{const _0x1e916f='analysis.automation.actionLog',_0x53ea24=await _0x3c0e37[_0x3f46ff(0x161)](_0x1e916f);let _0x1ed8d1=[];if(_0x53ea24&&_0x53ea24['val'])try{_0x1ed8d1=JSON['parse'](_0x53ea24['val']);}catch(_0x3eedbb){}_0x1ed8d1[_0x3f46ff(0x11f)]({'ts':Date[_0x3f46ff(0x136)](),'msg':_0x977ff4});if(_0x1ed8d1[_0x3f46ff(0x174)]>0x32)_0x1ed8d1=_0x1ed8d1[_0x3f46ff(0x175)](0x0,0x32);await _0x3c0e37['setStateAsync'](_0x1e916f,{'val':JSON[_0x3f46ff(0x1cc)](_0x1ed8d1),'ack':!![]});}catch(_0x3e0962){}}async function handlePrediction(_0x13d413,_0xbac67b,_0x46c243){const _0x36e401=a1_0x4e14a9;if(!_0xbac67b||_0xbac67b===_0x36e401(0x125))return;let _0x5cb492=_0x36e401(0x130),_0xfd1864=0.6;try{const _0x262e7d=await _0x13d413[_0x36e401(0x161)](_0x36e401(0x19d));if(_0x262e7d&&_0x262e7d[_0x36e401(0x173)])_0x5cb492=_0x262e7d['val'];const _0x1eae70=await _0x13d413[_0x36e401(0x161)]('analysis.automation.confidenceThreshold');if(_0x1eae70&&_0x1eae70['val'])_0xfd1864=_0x1eae70[_0x36e401(0x173)];}catch(_0x5bb853){}if(_0x5cb492===_0x36e401(0x130)||_0x46c243<_0xfd1864)return;const _0x5cad37=Date['now']();if(lastActions[_0xbac67b]&&_0x5cad37-lastActions[_0xbac67b]<COOLDOWN_MS)return;const _0x2547c7=_0x13d413[_0x36e401(0x1b5)]['devices']||[],_0x579da7=normalize(_0xbac67b),_0x5ece4d=_0x2547c7[_0x36e401(0x1bb)](_0x46ac1a=>normalize(_0x46ac1a['location'])===_0x579da7&&(_0x46ac1a['type']===_0x36e401(0x198)||_0x46ac1a['type']===_0x36e401(0x1ad)||_0x46ac1a[_0x36e401(0x1ae)]===_0x36e401(0x16a)));if(!_0x5ece4d)return;const _0x31ca70=await aiAgent[_0x36e401(0x17a)](_0x13d413,_0xbac67b,_0x5ece4d[_0x36e401(0x19a)],_0x46c243);if(!_0x31ca70[_0x36e401(0x143)])return;const _0x57ab6b='Pr√§diktion:\x20'+_0xbac67b+'\x20->\x20Schalte\x20'+_0x5ece4d['name']+'\x20('+_0x31ca70[_0x36e401(0x1c7)]+')';await logAutomationAction(_0x13d413,'['+_0x5cb492[_0x36e401(0x18a)]()+']\x20'+_0x57ab6b);if(_0x5cb492==='active'){const _0x366195=await _0x13d413[_0x36e401(0x1d4)](_0x5ece4d['id']);(!_0x366195||!_0x366195[_0x36e401(0x173)]&&_0x366195[_0x36e401(0x173)]!==!![])&&await _0x13d413[_0x36e401(0x142)](_0x5ece4d['id'],!![]),lastActions[_0xbac67b]=_0x5cad37;}}function a1_0x6088(_0x23b6e7,_0x4dec61){const _0x12764c=a1_0x5b53();return a1_0x6088=function(_0x2e5b1e,_0x4ff7ff){_0x2e5b1e=_0x2e5b1e-0x11b;let _0x5b5398=_0x12764c[_0x2e5b1e];return _0x5b5398;},a1_0x6088(_0x23b6e7,_0x4dec61);}function a1_0x5b53(){const _0x4579bd=['position','default','[MPC]\x20','stringify','.data.table','mpc_','until','1361061sHeFwU','calendarInstance','event','open','getForeignStateAsync','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','.1.ACTUAL_TEMPERATURE','üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20','constructor','[FORCE]\x20','system.mode','analysis.energy.warmupTimes',')\x20aktiv.\x20Heize\x20auf\x20','rescue_','2915095RyqjcS','too_cold','unshift','number','soll','5142300wpomKl','¬∞C\x20(nicht\x20','join','Unknown','.4.SET_TEMPERATURE','string','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','\x20wurde\x20manuell\x20erh√∂ht.','error','current_heating_setpoint','forEach','replace','trim','calendarSelection','off','pi_heating_demand','Soll','TRAIN_RL_PENALTY','Fehlt','triggerTime','now','\x20wieder\x20auf\x20','getForeignObjectsAsync','log','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','Auto-Erkennung','[WATCHDOG]\x20','analysis.energy.activeEnforcements','entries','toString',']:\x20Raum-Trigger\x20\x27','window','setForeignStateAsync','approved','warn','\x20min).','.1.SET_POINT_TEMPERATURE','analysis.energy.warmupSources','.1.TEMPERATURE','stellwert','urlaub\x20ende','\x20min)','target','level.valve','\x20ist\x20auf\x20','12utNyCC','common','actual','üßπ\x20[MPC\x20CLEANUP]\x20','sensor','¬∞C!\x20(Puffer\x20leer).','local_temperature','¬∞C).\x20Entferne\x20Status.','devices','useCalendar','Manuelles\x20Mapping','ACTUAL','map','2003914wVuaXN','Ist','summary','sort','./ai_agent','getStateAsync','occupied_heating_setpoint','values','\x20erreicht\x20Limit\x20(','1TQhTmu','location','getTime','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','üìÖ\x20SMART\x20SCHEDULE\x20[','switch','3624kcPxKw','setpoint','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','splice','(((.+)+)+)+$','analysis.automation.lastAction','26264LrVFTF','info','val','length','slice','thermostatMapping','.4.VALVE_STATE','openknx','contact','consultButler','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','date','üö®\x20[MPC\x20WATCHDOG]\x20','level.temperature','SET_POINT_TEMPERATURE','r√ºckkehr','role','valve','Classic','Unbekannt','from','¬∞C!\x20(Puffer:\x20','getHours','sendToPythonWrapper','temperature','toUpperCase','state','PERFECT','level','valve_position','analysis.energy.warmupTargets','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','filter','value.valve','push','ankunft','exports','7645759HHADHq','parse','light','search','name','currentSystemMode','cal_','analysis.automation.mode','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','toLowerCase','_meta','¬∞C\x20<\x20','thermostat','üìÖ\x20[MPC\x20INFO]\x20','remove',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','room','Calendar\x20Check\x20Error:\x20','analysis.energy.mpcActiveInterventions','valveMapping','70ZispXJ','\x20auf\x20','split','dimmer','type','target_temperature','\x20->\x20','includes','Nicht\x20gefunden',':\x20Aufheizen\x20auf\x20','¬∞C\x20->\x20','config','setStateAsync','_calName','manual','messwert','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','find','üî•\x20[MPC\x20ACTION]\x20Heize\x20','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','temp','.1.LEVEL','add','normal','analysis.energy.ventilationAlerts','SET','isArray','4483824WQcSkh','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','reason','score'];a1_0x5b53=function(){return _0x4579bd;};return a1_0x5b53();}async function findRelatedId(_0x20e97e,_0x778852,_0x2452c4=a1_0x4e14a9(0x16c)){const _0x3e1f11=a1_0x4e14a9;if(_0x2452c4===_0x3e1f11(0x16c)&&_0x20e97e['config'][_0x3e1f11(0x176)]){let _0x3c2b79=_0x20e97e['config'][_0x3e1f11(0x176)];if(typeof _0x3c2b79===_0x3e1f11(0x127))try{_0x3c2b79=JSON['parse'](_0x3c2b79);}catch(_0x1bd5c9){}if(_0x3c2b79&&_0x3c2b79[_0x778852])return _0x3c2b79[_0x778852];}if(_0x2452c4===_0x3e1f11(0x182)&&_0x20e97e['config'][_0x3e1f11(0x1a9)]){let _0x253b80=_0x20e97e[_0x3e1f11(0x1b5)][_0x3e1f11(0x1a9)];if(typeof _0x253b80===_0x3e1f11(0x127))try{_0x253b80=JSON[_0x3e1f11(0x197)](_0x253b80);}catch(_0x346bfe){}if(_0x253b80&&_0x253b80[_0x778852])return _0x253b80[_0x778852];}let _0x2198a4=[];if(_0x2452c4===_0x3e1f11(0x16c))_0x2198a4=[{'s':_0x3e1f11(0x1d6),'t':_0x3e1f11(0x146)},{'s':'.1.TEMPERATURE','t':_0x3e1f11(0x146)},{'s':_0x3e1f11(0x148),'t':_0x3e1f11(0x126)},{'s':'ACTUAL_TEMPERATURE','t':_0x3e1f11(0x17f)},{'s':_0x3e1f11(0x155),'t':_0x3e1f11(0x162)},{'s':_0x3e1f11(0x155),'t':_0x3e1f11(0x12b)},{'s':_0x3e1f11(0x189),'t':_0x3e1f11(0x1af)},{'s':_0x3e1f11(0x15a),'t':_0x3e1f11(0x1c3)},{'s':_0x3e1f11(0x15d),'t':_0x3e1f11(0x132)},{'s':_0x3e1f11(0x189),'t':_0x3e1f11(0x16c)}];else _0x2452c4===_0x3e1f11(0x182)&&(_0x2198a4=[{'s':_0x3e1f11(0x1d6),'t':_0x3e1f11(0x1bf)},{'s':_0x3e1f11(0x148),'t':_0x3e1f11(0x1bf)},{'s':_0x3e1f11(0x148),'t':_0x3e1f11(0x177)},{'s':_0x3e1f11(0x155),'t':_0x3e1f11(0x131)},{'s':_0x3e1f11(0x189),'t':_0x3e1f11(0x18e)},{'s':_0x3e1f11(0x189),'t':_0x3e1f11(0x18d)}]);for(const _0x149944 of _0x2198a4){if(_0x778852['includes'](_0x149944['s'])){const _0x2b4ca9=_0x778852[_0x3e1f11(0x12d)](_0x149944['s'],_0x149944['t']),_0x32899e=await _0x20e97e['getForeignObjectAsync'](_0x2b4ca9);if(_0x32899e)return _0x2b4ca9;}}try{const _0x447699=_0x778852[_0x3e1f11(0x1ac)]('.');if(_0x447699[_0x3e1f11(0x174)]>0x2){const _0x4d53ae=_0x447699['slice'](0x0,-0x1)[_0x3e1f11(0x124)]('.'),_0x4c37a6=await _0x20e97e[_0x3e1f11(0x138)](_0x4d53ae+'.*'),_0x280ca6=[],_0x473a68=_0x778852[_0x3e1f11(0x1ac)](/[._]+/)['filter'](_0x477ead=>![_0x3e1f11(0x178),'0','hm-rpc','ist','wert',_0x3e1f11(0x189),_0x3e1f11(0x151),_0x3e1f11(0x153),_0x3e1f11(0x1b9),_0x3e1f11(0x18b)]['includes'](_0x477ead[_0x3e1f11(0x19f)]()));for(const [_0x12d763,_0x1e0a1c]of Object[_0x3e1f11(0x13e)](_0x4c37a6)){if(_0x12d763===_0x778852)continue;if(_0x1e0a1c&&_0x1e0a1c[_0x3e1f11(0x150)]){const _0x59f78d=_0x12d763[_0x3e1f11(0x19f)](),_0x28e001=(_0x1e0a1c[_0x3e1f11(0x150)][_0x3e1f11(0x181)]||'')['toLowerCase'](),_0x5b383d=(_0x1e0a1c['common']['unit']||'')[_0x3e1f11(0x19f)]();let _0xd672b2=![];if(_0x2452c4===_0x3e1f11(0x16c)&&_0x1e0a1c[_0x3e1f11(0x150)]['write']===!![])_0xd672b2=_0x59f78d['includes']('set')||_0x59f78d[_0x3e1f11(0x1b1)](_0x3e1f11(0x121))||_0x59f78d[_0x3e1f11(0x1b1)](_0x3e1f11(0x14c))||_0x28e001[_0x3e1f11(0x1b1)](_0x3e1f11(0x17e))||_0x28e001[_0x3e1f11(0x1b1)]('thermostat.setpoint');else _0x2452c4===_0x3e1f11(0x182)&&(_0xd672b2=_0x59f78d[_0x3e1f11(0x1b1)](_0x3e1f11(0x18d))||_0x59f78d[_0x3e1f11(0x1b1)](_0x3e1f11(0x182))||_0x59f78d['includes'](_0x3e1f11(0x149))||_0x59f78d['includes'](_0x3e1f11(0x1c9))||_0x28e001[_0x3e1f11(0x1b1)](_0x3e1f11(0x14d))||_0x28e001['includes'](_0x3e1f11(0x192))||_0x5b383d['includes']('%'));if(_0xd672b2){const _0x113f4a=_0x12d763[_0x3e1f11(0x1ac)](/[._]+/)[_0x3e1f11(0x15b)](_0x2aeecd=>_0x2aeecd[_0x3e1f11(0x19f)]());let _0x2093a0=0x0;_0x473a68[_0x3e1f11(0x12c)](_0x25ae32=>{const _0x43d5a9=_0x3e1f11;if(_0x113f4a[_0x43d5a9(0x1b1)](_0x25ae32['toLowerCase']()))_0x2093a0++;}),_0x280ca6[_0x3e1f11(0x193)]({'id':_0x12d763,'score':_0x2093a0});}}}if(_0x280ca6[_0x3e1f11(0x174)]>0x0){_0x280ca6['sort']((_0x4ba504,_0x15f802)=>_0x15f802[_0x3e1f11(0x1c8)]-_0x4ba504[_0x3e1f11(0x1c8)]);if(_0x280ca6[0x0][_0x3e1f11(0x1c8)]>0x0)return _0x280ca6[0x0]['id'];}}}catch(_0x59d6e9){}return null;}async function scanThermostats(_0x260f65){const _0x223bd9=a1_0x4e14a9,_0x56a580=_0x260f65['config'][_0x223bd9(0x157)]||[],_0x3e4f1c=[],_0x1b6a0f=_0x56a580['filter'](_0x442ba7=>_0x442ba7['id']&&_0x442ba7['id'][_0x223bd9(0x1b1)](_0x223bd9(0x189))||_0x442ba7[_0x223bd9(0x1ae)]&&[_0x223bd9(0x189),'thermostat',_0x223bd9(0x153)][_0x223bd9(0x1b1)](_0x442ba7[_0x223bd9(0x1ae)])||_0x442ba7[_0x223bd9(0x19a)]&&_0x442ba7[_0x223bd9(0x19a)][_0x223bd9(0x19f)]()[_0x223bd9(0x1b1)](_0x223bd9(0x1be)));for(const _0x4da6e9 of _0x1b6a0f){const _0x5616f3=await findRelatedId(_0x260f65,_0x4da6e9['id'],_0x223bd9(0x16c)),_0x3a5427=await findRelatedId(_0x260f65,_0x4da6e9['id'],_0x223bd9(0x182));let _0x4728f6=_0x223bd9(0x1b2),_0x3bf05e=![],_0x328ab6=_0x260f65['config'][_0x223bd9(0x176)]||{};if(typeof _0x328ab6==='string')try{_0x328ab6=JSON[_0x223bd9(0x197)](_0x328ab6);}catch(_0x229043){}let _0x2a38f9=_0x260f65[_0x223bd9(0x1b5)][_0x223bd9(0x1a9)]||{};if(typeof _0x2a38f9==='string')try{_0x2a38f9=JSON['parse'](_0x2a38f9);}catch(_0x2733fe){}if(_0x328ab6[_0x4da6e9['id']]&&_0x328ab6[_0x4da6e9['id']]===_0x5616f3||_0x2a38f9[_0x4da6e9['id']]&&_0x2a38f9[_0x4da6e9['id']]===_0x3a5427)_0x4728f6=_0x223bd9(0x159),_0x3bf05e=!![];else(_0x5616f3||_0x3a5427)&&(_0x4728f6=_0x223bd9(0x13b));_0x3e4f1c[_0x223bd9(0x193)]({'room':_0x4da6e9['location']||_0x223bd9(0x184),'sensorId':_0x4da6e9['id'],'setpointId':_0x5616f3||'-','valveId':_0x3a5427||'-','source':_0x4728f6,'isManual':_0x3bf05e,'status':_0x5616f3&&_0x3a5427?_0x223bd9(0x18c):_0x5616f3?'OK':_0x223bd9(0x134)});}return _0x3e4f1c[_0x223bd9(0x15f)]((_0x36ba4b,_0xdedc28)=>_0x36ba4b[_0x223bd9(0x1a6)]['localeCompare'](_0xdedc28[_0x223bd9(0x1a6)]));}async function updateSchedulePreview(_0x3c2d74){const _0x2b728c=a1_0x4e14a9;if(!_0x3c2d74[_0x2b728c(0x1b5)][_0x2b728c(0x158)]||!_0x3c2d74[_0x2b728c(0x1b5)]['calendarInstance'])return;let _0x431693={};try{const _0x32a2ca=await _0x3c2d74[_0x2b728c(0x161)]('analysis.energy.warmupTimes');if(_0x32a2ca&&_0x32a2ca['val'])_0x431693=JSON[_0x2b728c(0x197)](_0x32a2ca[_0x2b728c(0x173)]);}catch(_0x5ef100){}const _0x38e673=[],_0x5bf931=Date[_0x2b728c(0x136)](),_0x47cc84=0x30*0x3c*0x3c*0x3e8;try{const _0x1ca102=await _0x3c2d74[_0x2b728c(0x1d4)](_0x3c2d74[_0x2b728c(0x1b5)][_0x2b728c(0x1d1)]+'.data.table');if(!_0x1ca102||!_0x1ca102['val'])return;const _0x3eef68=JSON['parse'](_0x1ca102[_0x2b728c(0x173)]),_0x3d1a32=_0x3c2d74[_0x2b728c(0x1b5)][_0x2b728c(0x12f)]||[],_0x16103b=_0x3c2d74['config'][_0x2b728c(0x157)]||[],_0x45b30d=new Set();_0x16103b[_0x2b728c(0x12c)](_0x2b6962=>{const _0x305b52=_0x2b728c;if(_0x2b6962[_0x305b52(0x166)])_0x45b30d['add'](_0x2b6962[_0x305b52(0x166)]);});for(const _0x4b4f85 of _0x3eef68){if(_0x4b4f85[_0x2b728c(0x1b7)]&&_0x3d1a32[_0x2b728c(0x174)]>0x0&&!_0x3d1a32[_0x2b728c(0x1b1)](_0x4b4f85['_calName']))continue;const _0xa5a85c=_0x4b4f85['_date']||_0x4b4f85['eventStart']||_0x4b4f85[_0x2b728c(0x17c)];if(!_0xa5a85c)continue;const _0x135ef1=new Date(_0xa5a85c),_0x29aadd=_0x135ef1[_0x2b728c(0x167)]();if(isNaN(_0x29aadd))continue;if(_0x29aadd<_0x5bf931)continue;if(_0x29aadd>_0x5bf931+_0x47cc84)continue;const _0x233178=(_0x4b4f85[_0x2b728c(0x1d2)]||_0x4b4f85[_0x2b728c(0x15e)]||'')[_0x2b728c(0x19f)]();let _0x4210bf=![],_0x4e1291=[],_0x196a3a=_0x4b4f85[_0x2b728c(0x1d2)]||_0x4b4f85['summary']||_0x2b728c(0x184);if(_0x233178[_0x2b728c(0x1b1)](_0x2b728c(0x14a))||_0x233178[_0x2b728c(0x1b1)]('r√ºckkehr')||_0x233178[_0x2b728c(0x1b1)](_0x2b728c(0x194)))_0x4210bf=!![],_0x4e1291=Array[_0x2b728c(0x185)](_0x45b30d);else for(const _0x48122b of _0x45b30d){if(_0x233178[_0x2b728c(0x1b1)](_0x48122b['toLowerCase']()))_0x4e1291['push'](_0x48122b);}_0x4e1291['length']>0x0&&_0x4e1291[_0x2b728c(0x12c)](_0x3474db=>{const _0x48e239=_0x2b728c;let _0x472a1f=0x3c;if(_0x4210bf){let _0x4cf77d=0x0;Object['values'](_0x431693)[_0x48e239(0x12c)](_0x36051a=>{if(_0x36051a>_0x4cf77d)_0x4cf77d=_0x36051a;}),_0x472a1f=_0x4cf77d>0x0?_0x4cf77d:0x78;}else _0x472a1f=getWarmupRobust(_0x431693,_0x3474db);const _0x2f00e0=new Date(_0x29aadd-_0x472a1f*0xea60);_0x38e673[_0x48e239(0x193)]({'eventTime':_0x29aadd,'triggerTime':_0x2f00e0[_0x48e239(0x167)](),'room':_0x3474db,'minutes':_0x472a1f,'reason':_0x196a3a,'isGlobal':_0x4210bf});});}}catch(_0x549490){}_0x38e673[_0x2b728c(0x15f)]((_0x2dd5af,_0xa4fc89)=>_0x2dd5af[_0x2b728c(0x135)]-_0xa4fc89[_0x2b728c(0x135)]);const _0x2c6958=_0x38e673[_0x2b728c(0x175)](0x0,0x1e);await _0x3c2d74[_0x2b728c(0x1b6)]('analysis.energy.schedulePreview',{'val':JSON[_0x2b728c(0x1cc)](_0x2c6958),'ack':!![]});}async function monitorEnforcements(_0x269dad){const _0x450dd6=a1_0x4e14a9;try{const _0x190e4c=_0x450dd6(0x13d),_0x250d75=await _0x269dad[_0x450dd6(0x161)](_0x190e4c);if(!_0x250d75||!_0x250d75[_0x450dd6(0x173)])return;let _0x494c98=[];try{_0x494c98=JSON['parse'](_0x250d75['val']);}catch(_0x512d5d){return;}if(!Array[_0x450dd6(0x1c4)](_0x494c98)||_0x494c98['length']===0x0)return;const _0x38a726=Date[_0x450dd6(0x136)](),_0x314e46=_0x269dad[_0x450dd6(0x1b5)]['devices']||[];let _0x221f13=![];for(let _0x2ffe56=_0x494c98[_0x450dd6(0x174)]-0x1;_0x2ffe56>=0x0;_0x2ffe56--){const _0x22546f=_0x494c98[_0x2ffe56];if(_0x38a726>=_0x22546f[_0x450dd6(0x1cf)]){_0x269dad[_0x450dd6(0x139)][_0x450dd6(0x172)](_0x450dd6(0x17b)+_0x22546f[_0x450dd6(0x1a6)]+_0x450dd6(0x19e)),_0x494c98[_0x450dd6(0x16e)](_0x2ffe56,0x1),_0x221f13=!![];continue;}const _0x317727=_0x314e46['find'](_0x68d09=>normalize(_0x68d09[_0x450dd6(0x166)])===normalize(_0x22546f[_0x450dd6(0x1a6)])&&(_0x68d09[_0x450dd6(0x1ae)]==='temperature'||_0x68d09[_0x450dd6(0x1ae)]===_0x450dd6(0x1a2)));if(_0x317727){const _0x114b0c=await findRelatedId(_0x269dad,_0x317727['id'],'setpoint');if(_0x114b0c){const _0x234d8d=await _0x269dad[_0x450dd6(0x1d4)](_0x114b0c);_0x234d8d&&typeof _0x234d8d[_0x450dd6(0x173)]===_0x450dd6(0x120)&&(_0x234d8d[_0x450dd6(0x173)]<0xf&&(_0x269dad[_0x450dd6(0x139)][_0x450dd6(0x144)]('üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x22546f[_0x450dd6(0x1a6)]+_0x450dd6(0x1ab)+_0x234d8d['val']+_0x450dd6(0x1ba)+_0x22546f[_0x450dd6(0x14c)]+'¬∞C.'),await _0x269dad[_0x450dd6(0x142)](_0x114b0c,_0x22546f[_0x450dd6(0x14c)]),await logAutomationAction(_0x269dad,_0x450dd6(0x1d9)+_0x22546f['room']+':\x20'+_0x234d8d[_0x450dd6(0x173)]+_0x450dd6(0x1b4)+_0x22546f[_0x450dd6(0x14c)]+'¬∞C\x20(Kalender-Schutz)')));}}}_0x221f13&&await _0x269dad[_0x450dd6(0x1b6)](_0x190e4c,{'val':JSON[_0x450dd6(0x1cc)](_0x494c98),'ack':!![]});}catch(_0x57382f){_0x269dad[_0x450dd6(0x139)][_0x450dd6(0x12a)]('Enforcement\x20Monitor\x20Error:\x20'+_0x57382f['message']);}}async function checkCalendarTriggers(_0x3c8724){const _0x17a83d=a1_0x4e14a9;if(!_0x3c8724[_0x17a83d(0x1b5)][_0x17a83d(0x158)]||!_0x3c8724['config'][_0x17a83d(0x1d1)])return;await updateSchedulePreview(_0x3c8724);let _0xfc2219={},_0x78ae1={};try{const _0x4d3ad6=await _0x3c8724[_0x17a83d(0x161)](_0x17a83d(0x1db));if(_0x4d3ad6&&_0x4d3ad6['val'])_0xfc2219=JSON['parse'](_0x4d3ad6[_0x17a83d(0x173)]);const _0x5b1571=await _0x3c8724[_0x17a83d(0x161)](_0x17a83d(0x147));if(_0x5b1571&&_0x5b1571[_0x17a83d(0x173)])_0x78ae1=JSON[_0x17a83d(0x197)](_0x5b1571[_0x17a83d(0x173)]);}catch(_0x309293){}let _0x175ef5={'default':0x15};try{const _0x1771a4=await _0x3c8724['getStateAsync'](_0x17a83d(0x18f));if(_0x1771a4&&_0x1771a4[_0x17a83d(0x173)])_0x175ef5=JSON['parse'](_0x1771a4[_0x17a83d(0x173)]);}catch(_0x442b54){}let _0x1eb229=[];try{const _0x3dbb26=await _0x3c8724[_0x17a83d(0x161)](_0x17a83d(0x13d));if(_0x3dbb26&&_0x3dbb26['val'])_0x1eb229=JSON[_0x17a83d(0x197)](_0x3dbb26[_0x17a83d(0x173)]);}catch(_0x4b1fae){}try{const _0x34e910=await _0x3c8724['getForeignStateAsync'](_0x3c8724[_0x17a83d(0x1b5)][_0x17a83d(0x1d1)]+_0x17a83d(0x1cd));if(!_0x34e910||!_0x34e910[_0x17a83d(0x173)])return;const _0x31dd03=JSON[_0x17a83d(0x197)](_0x34e910['val']),_0x2bffaa=Date[_0x17a83d(0x136)](),_0x87ed19=_0x3c8724[_0x17a83d(0x1b5)][_0x17a83d(0x157)]||[],_0x3a13bd=_0x3c8724[_0x17a83d(0x1b5)][_0x17a83d(0x12f)]||[];let _0x3f4fd5=![];for(const _0x1aede2 of _0x31dd03){if(_0x1aede2[_0x17a83d(0x1b7)]&&_0x3a13bd['length']>0x0&&!_0x3a13bd[_0x17a83d(0x1b1)](_0x1aede2['_calName']))continue;const _0x388a28=_0x1aede2['_date']||_0x1aede2['eventStart']||_0x1aede2[_0x17a83d(0x17c)];if(!_0x388a28)continue;const _0x4af2ce=new Date(_0x388a28);if(isNaN(_0x4af2ce[_0x17a83d(0x167)]()))continue;const _0x239338=(_0x1aede2[_0x17a83d(0x1d2)]||_0x1aede2['summary']||'')[_0x17a83d(0x19f)]();if(_0x239338['includes'](_0x17a83d(0x14a))||_0x239338[_0x17a83d(0x1b1)](_0x17a83d(0x180))||_0x239338['includes']('ankunft')){let _0xab892a=0x0;Object[_0x17a83d(0x163)](_0xfc2219)[_0x17a83d(0x12c)](_0x13144b=>{if(_0x13144b>_0xab892a)_0xab892a=_0x13144b;});if(_0xab892a===0x0)_0xab892a=0x78;const _0x2ecf0d=_0x4af2ce['getTime']()-_0xab892a*0xea60;_0x2bffaa>=_0x2ecf0d&&_0x2bffaa<_0x4af2ce[_0x17a83d(0x167)]()&&(_0x3c8724[_0x17a83d(0x19b)]!==_0x17a83d(0x1c1)&&(_0x3c8724['log'][_0x17a83d(0x172)](_0x17a83d(0x1d5)+_0xab892a+_0x17a83d(0x145)),await _0x3c8724[_0x17a83d(0x1b6)](_0x17a83d(0x1da),{'val':_0x17a83d(0x1c1),'ack':![]})));}for(const _0x592b19 of _0x87ed19){if(_0x592b19[_0x17a83d(0x166)]){const _0x2e039c=_0x592b19[_0x17a83d(0x166)]['toLowerCase'](),_0x1aee1d=(_0x592b19['name']||'')[_0x17a83d(0x19f)]();let _0x2b56b0=_0x239338[_0x17a83d(0x1b1)](_0x2e039c);!_0x2b56b0&&_0x1aee1d[_0x17a83d(0x174)]>0x3&&_0x239338[_0x17a83d(0x1b1)](_0x1aee1d)&&(_0x2b56b0=!![]);if(_0x2b56b0){const _0x51e666=getWarmupRobust(_0xfc2219,_0x592b19['location']),_0x41e5b4=_0x78ae1[_0x592b19[_0x17a83d(0x166)]]||_0x17a83d(0x183),_0x213645=_0x4af2ce['getTime']()-_0x51e666*0xea60;if(_0x2bffaa>=_0x213645&&_0x2bffaa<_0x4af2ce[_0x17a83d(0x167)]()){const _0x56a1c4=lastActions[_0x17a83d(0x19c)+_0x592b19[_0x17a83d(0x166)]];if(_0x56a1c4&&_0x2bffaa-_0x56a1c4<CAL_COOLDOWN_MS)continue;const _0x416fed=await findRelatedId(_0x3c8724,_0x592b19['id'],_0x17a83d(0x16c));if(_0x416fed){let _0x534145=_0x175ef5[_0x592b19[_0x17a83d(0x166)]];if(_0x534145===undefined)_0x534145=_0x175ef5[_0x17a83d(0x1ca)];if(_0x534145===undefined)_0x534145=0x15;const _0x13dd36=await _0x3c8724[_0x17a83d(0x1d4)](_0x416fed);if(_0x13dd36&&typeof _0x13dd36[_0x17a83d(0x173)]===_0x17a83d(0x120)&&_0x13dd36[_0x17a83d(0x173)]<_0x534145-0.5){_0x3c8724[_0x17a83d(0x139)][_0x17a83d(0x172)](_0x17a83d(0x169)+_0x41e5b4+_0x17a83d(0x140)+_0x592b19[_0x17a83d(0x166)]+'\x27\x20(Match:\x20'+_0x239338+_0x17a83d(0x11b)+_0x534145+'¬∞C\x20(Vorlauf:\x20'+_0x51e666+_0x17a83d(0x145)),await _0x3c8724[_0x17a83d(0x142)](_0x416fed,_0x534145),await logAutomationAction(_0x3c8724,'[CAL]\x20'+_0x592b19[_0x17a83d(0x166)]+_0x17a83d(0x1b0)+_0x534145+'¬∞C\x20(via\x20'+_0x41e5b4+')'),lastActions['cal_'+_0x592b19[_0x17a83d(0x166)]]=_0x2bffaa;const _0x102671=_0x1eb229['findIndex'](_0x285dad=>_0x285dad['room']===_0x592b19[_0x17a83d(0x166)]);if(_0x102671!==-0x1)_0x1eb229[_0x17a83d(0x16e)](_0x102671,0x1);_0x1eb229['push']({'room':_0x592b19[_0x17a83d(0x166)],'target':_0x534145,'until':_0x4af2ce[_0x17a83d(0x167)]()}),_0x3f4fd5=!![];}}}}}}}_0x3f4fd5&&await _0x3c8724[_0x17a83d(0x1b6)]('analysis.energy.activeEnforcements',{'val':JSON[_0x17a83d(0x1cc)](_0x1eb229),'ack':!![]});}catch(_0x4fac51){_0x3c8724['log']['warn'](_0x17a83d(0x1a7)+_0x4fac51['message']);}}async function manageMpcIntervention(_0x1dc86d,_0x30f16d,_0xd395d3){const _0x5c2034=a1_0x4e14a9;try{const _0x14eaeb=_0x5c2034(0x1a8),_0xeceab5=await _0x1dc86d[_0x5c2034(0x161)](_0x14eaeb);let _0x4c5fc5=[];if(_0xeceab5&&_0xeceab5['val'])try{_0x4c5fc5=JSON['parse'](_0xeceab5[_0x5c2034(0x173)]);}catch(_0x3af2e7){}const _0x14dfdd=_0x4c5fc5['indexOf'](_0x30f16d);if(_0xd395d3===_0x5c2034(0x1c0))_0x14dfdd===-0x1&&(_0x4c5fc5[_0x5c2034(0x193)](_0x30f16d),await _0x1dc86d[_0x5c2034(0x1b6)](_0x14eaeb,{'val':JSON[_0x5c2034(0x1cc)](_0x4c5fc5),'ack':!![]}));else _0xd395d3==='remove'&&(_0x14dfdd!==-0x1&&(_0x4c5fc5[_0x5c2034(0x16e)](_0x14dfdd,0x1),await _0x1dc86d[_0x5c2034(0x1b6)](_0x14eaeb,{'val':JSON[_0x5c2034(0x1cc)](_0x4c5fc5),'ack':!![]})));}catch(_0x5c690d){}}async function cleanupGhostInterventions(_0x2a5dd6){const _0x4059fa=a1_0x4e14a9;try{const _0x33dfb3='analysis.energy.mpcActiveInterventions',_0xa0c12e=await _0x2a5dd6[_0x4059fa(0x161)](_0x33dfb3);if(!_0xa0c12e||!_0xa0c12e[_0x4059fa(0x173)])return;const _0xfd1276=JSON[_0x4059fa(0x197)](_0xa0c12e['val']);if(!Array[_0x4059fa(0x1c4)](_0xfd1276)||_0xfd1276['length']===0x0)return;let _0x1db794={'default':0x15};try{const _0x2229b7=await _0x2a5dd6['getStateAsync'](_0x4059fa(0x18f));if(_0x2229b7&&_0x2229b7[_0x4059fa(0x173)])_0x1db794=JSON['parse'](_0x2229b7['val']);}catch(_0x226e7f){}let _0x58e0f0=[];try{const _0x337edd=await _0x2a5dd6[_0x4059fa(0x161)](_0x4059fa(0x1c2));if(_0x337edd&&_0x337edd[_0x4059fa(0x173)])_0x58e0f0=JSON[_0x4059fa(0x197)](_0x337edd[_0x4059fa(0x173)]);}catch(_0xef8423){}let _0x3e3061={},_0xa1b983=![];try{const _0x489675=await _0x2a5dd6[_0x4059fa(0x161)]('analysis.energy.rlPenalties');if(_0x489675&&_0x489675[_0x4059fa(0x173)])_0x3e3061=JSON[_0x4059fa(0x197)](_0x489675[_0x4059fa(0x173)]);}catch(_0x50290d){}if(_0x3e3061[_0x4059fa(0x1a0)]){const _0x1134c6=Date[_0x4059fa(0x136)]();for(const [_0x3c4835,_0x186a05]of Object[_0x4059fa(0x13e)](_0x3e3061['_meta'])){_0x1134c6-_0x186a05>PENALTY_TTL&&(delete _0x3e3061[_0x3c4835],delete _0x3e3061[_0x4059fa(0x1a0)][_0x3c4835],_0xa1b983=!![],_0x2a5dd6['log'][_0x4059fa(0x172)]('üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27'+_0x3c4835+_0x4059fa(0x190)));}}const _0x1ebbd8=_0x2a5dd6['config'][_0x4059fa(0x157)]||[];let _0x35631f=![];for(let _0x576875=_0xfd1276['length']-0x1;_0x576875>=0x0;_0x576875--){const _0x3cedaf=_0xfd1276[_0x576875],_0x530b2b=_0x1ebbd8[_0x4059fa(0x1bb)](_0x2317a9=>normalize(_0x2317a9[_0x4059fa(0x166)])===normalize(_0x3cedaf)&&(_0x2317a9[_0x4059fa(0x1ae)]===_0x4059fa(0x189)||_0x2317a9[_0x4059fa(0x1ae)]===_0x4059fa(0x1a2)));if(!_0x530b2b){_0x2a5dd6[_0x4059fa(0x139)][_0x4059fa(0x144)](_0x4059fa(0x128)+_0x3cedaf+_0x4059fa(0x1c6)),_0xfd1276['splice'](_0x576875,0x1),_0x35631f=!![];continue;}if(_0x530b2b){const _0x36c099=await findRelatedId(_0x2a5dd6,_0x530b2b['id'],_0x4059fa(0x16c)),_0x4ed79d=await _0x2a5dd6['getForeignStateAsync'](_0x530b2b['id']);if(_0x36c099){const _0x3b27b4=await _0x2a5dd6['getForeignStateAsync'](_0x36c099);if(_0x3b27b4&&typeof _0x3b27b4['val']===_0x4059fa(0x120)){let _0x32794f=![],_0xf0b67a='';Math['abs'](_0x3b27b4['val']-ECO_TEMP)>0.5&&(_0x32794f=!![],_0xf0b67a=_0x4059fa(0x1b8));if(!_0x32794f&&_0x4ed79d&&typeof _0x4ed79d['val']===_0x4059fa(0x120)){const _0x4d6e5b=_0x1db794[_0x3cedaf]||_0x1db794[_0x4059fa(0x1ca)]||0x15;_0x4ed79d['val']<_0x4d6e5b+0.2&&(_0x32794f=!![],_0xf0b67a='too_cold');}if(_0x32794f){if(_0xf0b67a===_0x4059fa(0x1b8)){_0x2a5dd6[_0x4059fa(0x139)][_0x4059fa(0x172)](_0x4059fa(0x152)+_0x3cedaf+_0x4059fa(0x14e)+_0x3b27b4[_0x4059fa(0x173)]+_0x4059fa(0x123)+ECO_TEMP+_0x4059fa(0x156));const _0x2ec098=lastActions[_0x4059fa(0x19c)+_0x3cedaf],_0x4f438d=_0x2ec098&&Date[_0x4059fa(0x136)]()-_0x2ec098<0x2*0x3c*0x3e8;if(!_0x4f438d&&_0x3b27b4[_0x4059fa(0x173)]>ECO_TEMP+0.5){_0x2a5dd6[_0x4059fa(0x188)]&&(_0x2a5dd6[_0x4059fa(0x139)][_0x4059fa(0x172)](_0x4059fa(0x168)+_0x3cedaf+_0x4059fa(0x129)),_0x2a5dd6[_0x4059fa(0x188)](_0x4059fa(0x133),{'room':_0x3cedaf}));const _0xcce7bc=_0x3cedaf+'_'+new Date()[_0x4059fa(0x187)]();if(!_0x3e3061[_0xcce7bc]){_0x3e3061[_0xcce7bc]=0x1;if(!_0x3e3061[_0x4059fa(0x1a0)])_0x3e3061[_0x4059fa(0x1a0)]={};_0x3e3061[_0x4059fa(0x1a0)][_0xcce7bc]=Date[_0x4059fa(0x136)](),_0xa1b983=!![];}}else _0x4f438d&&_0x2a5dd6[_0x4059fa(0x139)]['info'](_0x4059fa(0x1a3)+_0x3cedaf+_0x4059fa(0x16d));}else{if(_0xf0b67a===_0x4059fa(0x11e)){let _0x54e8a3=![];if(_0x58e0f0[_0x4059fa(0x1bb)](_0xc113cc=>_0xc113cc['room']===_0x3cedaf))_0x54e8a3=!![];const _0x3f9c88=_0x1ebbd8[_0x4059fa(0x191)](_0x28c9c1=>normalize(_0x28c9c1[_0x4059fa(0x166)])===normalize(_0x3cedaf)&&(_0x28c9c1['type']===_0x4059fa(0x141)||_0x28c9c1[_0x4059fa(0x1ae)]===_0x4059fa(0x153)||_0x28c9c1[_0x4059fa(0x1ae)]===_0x4059fa(0x179)));for(const _0x36ee29 of _0x3f9c88){try{const _0x2cc837=await _0x2a5dd6[_0x4059fa(0x1d4)](_0x36ee29['id']);if(_0x2cc837&&(_0x2cc837[_0x4059fa(0x173)]===!![]||_0x2cc837[_0x4059fa(0x173)]===0x1||String(_0x2cc837[_0x4059fa(0x173)])[_0x4059fa(0x19f)]()===_0x4059fa(0x1d3)))_0x54e8a3=!![];}catch(_0x4c10b3){}}if(_0x54e8a3)_0x2a5dd6['log']['info'](_0x4059fa(0x1d7)+_0x3cedaf+_0x4059fa(0x1bd));else{const _0x476d19=_0x1db794[_0x3cedaf]||_0x1db794[_0x4059fa(0x1ca)]||0x15;_0x2a5dd6['log'][_0x4059fa(0x172)](_0x4059fa(0x17d)+_0x3cedaf+_0x4059fa(0x164)+_0x4ed79d['val']+_0x4059fa(0x1a1)+(_0x476d19+0.2)+'¬∞C).\x20Sparmodus\x20beendet!'),await _0x2a5dd6['setForeignStateAsync'](_0x36c099,_0x476d19),await logAutomationAction(_0x2a5dd6,_0x4059fa(0x13c)+_0x3cedaf+_0x4059fa(0x1a5)+_0x476d19+'¬∞C'),lastActions[_0x4059fa(0x11c)+_0x3cedaf]=Date[_0x4059fa(0x136)]();}}}_0xfd1276[_0x4059fa(0x16e)](_0x576875,0x1),_0x35631f=!![];}}}}}_0x35631f&&await _0x2a5dd6[_0x4059fa(0x1b6)](_0x33dfb3,{'val':JSON[_0x4059fa(0x1cc)](_0xfd1276),'ack':!![]}),_0xa1b983&&await _0x2a5dd6[_0x4059fa(0x1b6)]('analysis.energy.rlPenalties',{'val':JSON[_0x4059fa(0x1cc)](_0x3e3061),'ack':!![]});}catch(_0x343c61){}}async function applyEnergySavings(_0x47e436,_0x3f1138){const _0x914d35=a1_0x4e14a9;await cleanupGhostInterventions(_0x47e436);if(!_0x3f1138||_0x3f1138[_0x914d35(0x174)]===0x0)return;const _0x5dfc18=_0x47e436[_0x914d35(0x1b5)][_0x914d35(0x157)]||[],_0x826a8=Date['now']();for(const _0x5ed284 of _0x3f1138){const _0x32c973=_0x5ed284[_0x914d35(0x1a6)],_0x26aee3=_0x5ed284['minutes_safe'],_0x158853=_0x5ed284['target']||0x15;if(lastActions[_0x914d35(0x11c)+_0x32c973]&&_0x826a8-lastActions[_0x914d35(0x11c)+_0x32c973]<RESCUE_LOCK_MS)continue;const _0x4ea5cb=_0x5dfc18[_0x914d35(0x1bb)](_0x37520b=>normalize(_0x37520b[_0x914d35(0x166)])===normalize(_0x32c973)&&(_0x37520b[_0x914d35(0x1ae)]===_0x914d35(0x189)||_0x37520b[_0x914d35(0x1ae)]===_0x914d35(0x1a2)));if(!_0x4ea5cb)continue;const _0x467337=await findRelatedId(_0x47e436,_0x4ea5cb['id'],_0x914d35(0x16c));if(_0x467337){if(lastActions[_0x914d35(0x1ce)+_0x32c973]&&_0x826a8-lastActions[_0x914d35(0x1ce)+_0x32c973]<0x1e*0x3c*0x3e8)continue;const _0x28b2a8=await _0x47e436[_0x914d35(0x1d4)](_0x467337);if(_0x28b2a8&&typeof _0x28b2a8[_0x914d35(0x173)]===_0x914d35(0x120)){const _0x4e0c53=_0x28b2a8['val'];_0x4e0c53!==ECO_TEMP&&await manageMpcIntervention(_0x47e436,_0x32c973,'remove');if(_0x26aee3>0x1e)_0x4e0c53>ECO_TEMP+0.5&&(_0x47e436[_0x914d35(0x139)][_0x914d35(0x172)]('üçÉ\x20[MPC\x20ACTION]\x20Senke\x20'+_0x32c973+_0x914d35(0x1ab)+ECO_TEMP+_0x914d35(0x186)+_0x26aee3+_0x914d35(0x14b)),await _0x47e436[_0x914d35(0x142)](_0x467337,ECO_TEMP),await manageMpcIntervention(_0x47e436,_0x32c973,'add'),lastActions['mpc_'+_0x32c973]=_0x826a8,await logAutomationAction(_0x47e436,'[MPC]\x20'+_0x32c973+':\x20Absenkung\x20auf\x20'+ECO_TEMP+'¬∞C'));else _0x26aee3<=0xf&&(_0x4e0c53<_0x158853&&(_0x47e436[_0x914d35(0x139)]['info'](_0x914d35(0x1bc)+_0x32c973+_0x914d35(0x137)+_0x158853+_0x914d35(0x154)),await _0x47e436['setForeignStateAsync'](_0x467337,_0x158853),await manageMpcIntervention(_0x47e436,_0x32c973,_0x914d35(0x1a4)),lastActions['mpc_'+_0x32c973]=_0x826a8,await logAutomationAction(_0x47e436,_0x914d35(0x1cb)+_0x32c973+_0x914d35(0x1b3)+_0x158853+'¬∞C')));}}else _0x47e436[_0x914d35(0x139)][_0x914d35(0x144)](_0x914d35(0x13a)+_0x32c973+'\x20gefunden!');}}module[a1_0x4e14a9(0x195)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};