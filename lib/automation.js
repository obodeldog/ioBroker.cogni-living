const a1_0x386044=a1_0x17e3;(function(_0x441980,_0x1cfe36){const _0x3cb614=a1_0x17e3,_0x130475=_0x441980();while(!![]){try{const _0x2bcf30=parseInt(_0x3cb614(0x13f))/0x1+-parseInt(_0x3cb614(0x107))/0x2*(parseInt(_0x3cb614(0x12e))/0x3)+parseInt(_0x3cb614(0x126))/0x4*(-parseInt(_0x3cb614(0x1af))/0x5)+parseInt(_0x3cb614(0x129))/0x6+-parseInt(_0x3cb614(0x1ae))/0x7+parseInt(_0x3cb614(0x121))/0x8+parseInt(_0x3cb614(0x158))/0x9;if(_0x2bcf30===_0x1cfe36)break;else _0x130475['push'](_0x130475['shift']());}catch(_0x309577){_0x130475['push'](_0x130475['shift']());}}}(a1_0x3b10,0x3d74f));const a1_0x5f25d5=(function(){let _0x4cb942=!![];return function(_0x327dff,_0x72d157){const _0x395ef5=_0x4cb942?function(){const _0xebef0e=a1_0x17e3;if(_0x72d157){const _0x483d0e=_0x72d157[_0xebef0e(0x14e)](_0x327dff,arguments);return _0x72d157=null,_0x483d0e;}}:function(){};return _0x4cb942=![],_0x395ef5;};}()),a1_0x52f645=a1_0x5f25d5(this,function(){const _0x2230f9=a1_0x17e3;return a1_0x52f645[_0x2230f9(0xff)]()[_0x2230f9(0x100)](_0x2230f9(0x18e))[_0x2230f9(0xff)]()[_0x2230f9(0x1ac)](a1_0x52f645)[_0x2230f9(0x100)](_0x2230f9(0x18e));});a1_0x52f645();'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x47f582){const _0x2246ee=a1_0x17e3;if(!_0x47f582)return'';return _0x47f582[_0x2246ee(0x189)]()[_0x2246ee(0x13b)](/\s+/g,'')[_0x2246ee(0x16e)]();}function getWarmupRobust(_0x546045,_0x240345){const _0x417dd1=a1_0x17e3;if(!_0x546045||!_0x240345)return 0x3c;if(_0x546045[_0x240345]!==undefined)return _0x546045[_0x240345];const _0x132907=_0x240345['toLowerCase']()[_0x417dd1(0x13b)](/√§/g,'ae')[_0x417dd1(0x13b)](/√∂/g,'oe')[_0x417dd1(0x13b)](/√º/g,'ue')[_0x417dd1(0x13b)](/√ü/g,'ss')[_0x417dd1(0x13b)](/\s+/g,'_')[_0x417dd1(0x13b)](/[^a-z0-9_]/g,'');if(_0x546045[_0x132907]!==undefined)return _0x546045[_0x132907];return 0x3c;}async function logAutomationAction(_0xae8262,_0x3298f6){const _0x37ee6f=a1_0x17e3;await _0xae8262[_0x37ee6f(0x155)]('analysis.automation.lastAction',{'val':_0x3298f6,'ack':!![]});try{const _0x5dade4=_0x37ee6f(0x172),_0x4b0f3e=await _0xae8262['getStateAsync'](_0x5dade4);let _0x459bcf=[];if(_0x4b0f3e&&_0x4b0f3e['val'])try{_0x459bcf=JSON[_0x37ee6f(0x10b)](_0x4b0f3e[_0x37ee6f(0x17b)]);}catch(_0x341e7a){}_0x459bcf['unshift']({'ts':Date[_0x37ee6f(0x157)](),'msg':_0x3298f6});if(_0x459bcf[_0x37ee6f(0x10f)]>0x32)_0x459bcf=_0x459bcf[_0x37ee6f(0x149)](0x0,0x32);await _0xae8262[_0x37ee6f(0x155)](_0x5dade4,{'val':JSON[_0x37ee6f(0x174)](_0x459bcf),'ack':!![]});}catch(_0x28a97c){}}function a1_0x17e3(_0x4809c0,_0x33468d){const _0x5a1ade=a1_0x3b10();return a1_0x17e3=function(_0x52f645,_0x5f25d5){_0x52f645=_0x52f645-0xfd;let _0x3b10f4=_0x5a1ade[_0x52f645];return _0x3b10f4;},a1_0x17e3(_0x4809c0,_0x33468d);}async function handlePrediction(_0x9c7bdd,_0x43baef,_0x548836){const _0x9246b2=a1_0x17e3;if(!_0x43baef||_0x43baef===_0x9246b2(0x1ba))return;let _0x10527a=_0x9246b2(0x194),_0x58841e=0.6;try{const _0x193c23=await _0x9c7bdd[_0x9246b2(0x15e)](_0x9246b2(0x1b2));if(_0x193c23&&_0x193c23[_0x9246b2(0x17b)])_0x10527a=_0x193c23[_0x9246b2(0x17b)];const _0x307294=await _0x9c7bdd[_0x9246b2(0x15e)](_0x9246b2(0x159));if(_0x307294&&_0x307294[_0x9246b2(0x17b)])_0x58841e=_0x307294[_0x9246b2(0x17b)];}catch(_0x50191a){}if(_0x10527a===_0x9246b2(0x194)||_0x548836<_0x58841e)return;const _0x1ba7ee=Date[_0x9246b2(0x157)]();if(lastActions[_0x43baef]&&_0x1ba7ee-lastActions[_0x43baef]<COOLDOWN_MS)return;const _0x382b62=_0x9c7bdd[_0x9246b2(0x110)][_0x9246b2(0x137)]||[],_0x518e64=normalize(_0x43baef),_0x2dd78f=_0x382b62[_0x9246b2(0x118)](_0x2e9af4=>normalize(_0x2e9af4['location'])===_0x518e64&&(_0x2e9af4[_0x9246b2(0x171)]===_0x9246b2(0x1a4)||_0x2e9af4[_0x9246b2(0x171)]===_0x9246b2(0x17c)||_0x2e9af4[_0x9246b2(0x171)]===_0x9246b2(0x1a3)));if(!_0x2dd78f)return;const _0x1cc5d6=await aiAgent['consultButler'](_0x9c7bdd,_0x43baef,_0x2dd78f['name'],_0x548836);if(!_0x1cc5d6[_0x9246b2(0xfe)])return;const _0x47d41b='Pr√§diktion:\x20'+_0x43baef+_0x9246b2(0x134)+_0x2dd78f[_0x9246b2(0x1ad)]+'\x20('+_0x1cc5d6[_0x9246b2(0x1a6)]+')';await logAutomationAction(_0x9c7bdd,'['+_0x10527a[_0x9246b2(0x143)]()+']\x20'+_0x47d41b);if(_0x10527a===_0x9246b2(0x14b)){const _0x24383b=await _0x9c7bdd[_0x9246b2(0x193)](_0x2dd78f['id']);(!_0x24383b||!_0x24383b[_0x9246b2(0x17b)]&&_0x24383b['val']!==!![])&&await _0x9c7bdd[_0x9246b2(0x192)](_0x2dd78f['id'],!![]),lastActions[_0x43baef]=_0x1ba7ee;}}async function findRelatedId(_0x5d522a,_0x36d9df,_0x1c2a0d=a1_0x386044(0x17a)){const _0x45832f=a1_0x386044;if(_0x1c2a0d===_0x45832f(0x17a)&&_0x5d522a[_0x45832f(0x110)][_0x45832f(0x179)]){let _0x437a40=_0x5d522a[_0x45832f(0x110)][_0x45832f(0x179)];if(typeof _0x437a40===_0x45832f(0x153))try{_0x437a40=JSON[_0x45832f(0x10b)](_0x437a40);}catch(_0x3f6b0a){}if(_0x437a40&&_0x437a40[_0x36d9df])return _0x437a40[_0x36d9df];}if(_0x1c2a0d===_0x45832f(0x13c)&&_0x5d522a[_0x45832f(0x110)]['valveMapping']){let _0x4eb2a7=_0x5d522a['config'][_0x45832f(0x14c)];if(typeof _0x4eb2a7===_0x45832f(0x153))try{_0x4eb2a7=JSON[_0x45832f(0x10b)](_0x4eb2a7);}catch(_0x32f7de){}if(_0x4eb2a7&&_0x4eb2a7[_0x36d9df])return _0x4eb2a7[_0x36d9df];}let _0x5de94b=[];if(_0x1c2a0d===_0x45832f(0x17a))_0x5de94b=[{'s':_0x45832f(0x16a),'t':_0x45832f(0x1ab)},{'s':_0x45832f(0x168),'t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x45832f(0x168),'t':_0x45832f(0x13e)},{'s':_0x45832f(0x15d),'t':_0x45832f(0x10c)},{'s':'local_temperature','t':'occupied_heating_setpoint'},{'s':'local_temperature','t':'current_heating_setpoint'},{'s':_0x45832f(0x113),'t':_0x45832f(0x170)},{'s':_0x45832f(0x19c),'t':_0x45832f(0x1bb)},{'s':_0x45832f(0x15a),'t':'Soll'},{'s':_0x45832f(0x113),'t':'setpoint'}];else _0x1c2a0d===_0x45832f(0x13c)&&(_0x5de94b=[{'s':_0x45832f(0x16a),'t':_0x45832f(0x145)},{'s':'.1.TEMPERATURE','t':_0x45832f(0x145)},{'s':_0x45832f(0x168),'t':_0x45832f(0x131)},{'s':'local_temperature','t':'pi_heating_demand'},{'s':_0x45832f(0x113),'t':_0x45832f(0x116)},{'s':_0x45832f(0x113),'t':_0x45832f(0x12b)}]);for(const _0x323851 of _0x5de94b){if(_0x36d9df['includes'](_0x323851['s'])){const _0x421228=_0x36d9df[_0x45832f(0x13b)](_0x323851['s'],_0x323851['t']),_0x46c9f7=await _0x5d522a[_0x45832f(0x123)](_0x421228);if(_0x46c9f7)return _0x421228;}}try{const _0x6e59a=_0x36d9df['split']('.');if(_0x6e59a[_0x45832f(0x10f)]>0x2){const _0x30cc58=_0x6e59a[_0x45832f(0x149)](0x0,-0x1)[_0x45832f(0x124)]('.'),_0x6872fa=await _0x5d522a[_0x45832f(0x1a7)](_0x30cc58+'.*'),_0x46c2e3=[],_0x5a4868=_0x36d9df[_0x45832f(0x105)](/[._]+/)['filter'](_0x11df04=>!['openknx','0',_0x45832f(0x19f),_0x45832f(0x140),_0x45832f(0x1a9),_0x45832f(0x113),_0x45832f(0x141),'sensor',_0x45832f(0x178),_0x45832f(0x11e)][_0x45832f(0x1a5)](_0x11df04[_0x45832f(0x189)]()));for(const [_0x2360fa,_0x161a36]of Object['entries'](_0x6872fa)){if(_0x2360fa===_0x36d9df)continue;if(_0x161a36&&_0x161a36['common']){const _0xde8b30=_0x2360fa[_0x45832f(0x189)](),_0x340f51=(_0x161a36[_0x45832f(0x18b)][_0x45832f(0x15c)]||'')[_0x45832f(0x189)](),_0xfae3c3=(_0x161a36[_0x45832f(0x18b)]['unit']||'')[_0x45832f(0x189)]();let _0x5d97e3=![];if(_0x1c2a0d===_0x45832f(0x17a)&&_0x161a36[_0x45832f(0x18b)][_0x45832f(0x161)]===!![])_0x5d97e3=_0xde8b30['includes']('set')||_0xde8b30[_0x45832f(0x1a5)](_0x45832f(0x11f))||_0xde8b30[_0x45832f(0x1a5)](_0x45832f(0x11d))||_0x340f51[_0x45832f(0x1a5)](_0x45832f(0x1b3))||_0x340f51['includes'](_0x45832f(0x1b0));else _0x1c2a0d===_0x45832f(0x13c)&&(_0x5d97e3=_0xde8b30[_0x45832f(0x1a5)](_0x45832f(0x12b))||_0xde8b30[_0x45832f(0x1a5)](_0x45832f(0x13c))||_0xde8b30[_0x45832f(0x1a5)](_0x45832f(0x173))||_0xde8b30[_0x45832f(0x1a5)](_0x45832f(0x195))||_0x340f51['includes'](_0x45832f(0x1b7))||_0x340f51['includes']('value.valve')||_0xfae3c3[_0x45832f(0x1a5)]('%'));if(_0x5d97e3){const _0x32983c=_0x2360fa[_0x45832f(0x105)](/[._]+/)[_0x45832f(0x119)](_0xc7b7=>_0xc7b7['toLowerCase']());let _0x20bedd=0x0;_0x5a4868[_0x45832f(0x13d)](_0x3ab691=>{const _0xa5b9d7=_0x45832f;if(_0x32983c[_0xa5b9d7(0x1a5)](_0x3ab691['toLowerCase']()))_0x20bedd++;}),_0x46c2e3[_0x45832f(0x154)]({'id':_0x2360fa,'score':_0x20bedd});}}}if(_0x46c2e3[_0x45832f(0x10f)]>0x0){_0x46c2e3[_0x45832f(0x169)]((_0x2ba545,_0x510b3d)=>_0x510b3d[_0x45832f(0x177)]-_0x2ba545['score']);if(_0x46c2e3[0x0][_0x45832f(0x177)]>0x0)return _0x46c2e3[0x0]['id'];}}}catch(_0x4296cb){}return null;}async function scanThermostats(_0x20ba4a){const _0x38c645=a1_0x386044,_0x298be2=_0x20ba4a[_0x38c645(0x110)][_0x38c645(0x137)]||[],_0x3e9e97=[],_0x546478=_0x298be2['filter'](_0x1d62ac=>_0x1d62ac['id']&&_0x1d62ac['id'][_0x38c645(0x1a5)]('temperature')||_0x1d62ac[_0x38c645(0x171)]&&[_0x38c645(0x113),_0x38c645(0x186),_0x38c645(0x144)][_0x38c645(0x1a5)](_0x1d62ac[_0x38c645(0x171)])||_0x1d62ac['name']&&_0x1d62ac['name'][_0x38c645(0x189)]()[_0x38c645(0x1a5)](_0x38c645(0x117)));for(const _0x116d08 of _0x546478){const _0x4c346f=await findRelatedId(_0x20ba4a,_0x116d08['id'],_0x38c645(0x17a)),_0x470066=await findRelatedId(_0x20ba4a,_0x116d08['id'],_0x38c645(0x13c));let _0x3b9cc0=_0x38c645(0x1b4),_0x5724ec=![],_0x20afec=_0x20ba4a['config']['thermostatMapping']||{};if(typeof _0x20afec===_0x38c645(0x153))try{_0x20afec=JSON[_0x38c645(0x10b)](_0x20afec);}catch(_0x24aa2f){}let _0xad619b=_0x20ba4a[_0x38c645(0x110)][_0x38c645(0x14c)]||{};if(typeof _0xad619b===_0x38c645(0x153))try{_0xad619b=JSON[_0x38c645(0x10b)](_0xad619b);}catch(_0xa54c5d){}if(_0x20afec[_0x116d08['id']]&&_0x20afec[_0x116d08['id']]===_0x4c346f||_0xad619b[_0x116d08['id']]&&_0xad619b[_0x116d08['id']]===_0x470066)_0x3b9cc0=_0x38c645(0x132),_0x5724ec=!![];else(_0x4c346f||_0x470066)&&(_0x3b9cc0=_0x38c645(0x198));_0x3e9e97[_0x38c645(0x154)]({'room':_0x116d08['location']||_0x38c645(0x142),'sensorId':_0x116d08['id'],'setpointId':_0x4c346f||'-','valveId':_0x470066||'-','source':_0x3b9cc0,'isManual':_0x5724ec,'status':_0x4c346f&&_0x470066?_0x38c645(0x109):_0x4c346f?'OK':'Fehlt'});}return _0x3e9e97[_0x38c645(0x169)]((_0x3f8c3c,_0x160523)=>_0x3f8c3c[_0x38c645(0x16d)]['localeCompare'](_0x160523[_0x38c645(0x16d)]));}async function updateSchedulePreview(_0x5293d3){const _0x2fd432=a1_0x386044;if(!_0x5293d3[_0x2fd432(0x110)][_0x2fd432(0x183)]||!_0x5293d3[_0x2fd432(0x110)]['calendarInstance'])return;let _0x57661d={};try{const _0x2dbd0e=await _0x5293d3['getStateAsync']('analysis.energy.warmupTimes');if(_0x2dbd0e&&_0x2dbd0e['val'])_0x57661d=JSON['parse'](_0x2dbd0e[_0x2fd432(0x17b)]);}catch(_0x243706){}const _0x4fee58=[],_0x48a4f6=Date['now'](),_0x2828f6=0x30*0x3c*0x3c*0x3e8;try{const _0x5ace49=await _0x5293d3[_0x2fd432(0x193)](_0x5293d3[_0x2fd432(0x110)][_0x2fd432(0x115)]+_0x2fd432(0x135));if(!_0x5ace49||!_0x5ace49[_0x2fd432(0x17b)])return;const _0x568385=JSON[_0x2fd432(0x10b)](_0x5ace49[_0x2fd432(0x17b)]),_0x58c84c=_0x5293d3[_0x2fd432(0x110)]['calendarSelection']||[],_0x3d331b=_0x5293d3[_0x2fd432(0x110)]['devices']||[],_0xcd691d=new Set();_0x3d331b['forEach'](_0x4303c5=>{const _0x579540=_0x2fd432;if(_0x4303c5['location'])_0xcd691d[_0x579540(0x15b)](_0x4303c5['location']);});for(const _0x5481ef of _0x568385){if(_0x5481ef[_0x2fd432(0x188)]&&_0x58c84c['length']>0x0&&!_0x58c84c[_0x2fd432(0x1a5)](_0x5481ef['_calName']))continue;const _0x428fe8=_0x5481ef[_0x2fd432(0x16b)]||_0x5481ef[_0x2fd432(0x180)]||_0x5481ef[_0x2fd432(0x187)];if(!_0x428fe8)continue;const _0x51bcbd=new Date(_0x428fe8),_0x2c0f04=_0x51bcbd[_0x2fd432(0x108)]();if(isNaN(_0x2c0f04))continue;if(_0x2c0f04<_0x48a4f6)continue;if(_0x2c0f04>_0x48a4f6+_0x2828f6)continue;const _0x5d6073=(_0x5481ef[_0x2fd432(0x11c)]||_0x5481ef[_0x2fd432(0x133)]||'')[_0x2fd432(0x189)]();let _0x172a31=![],_0x29b961=[],_0x38e593=_0x5481ef[_0x2fd432(0x11c)]||_0x5481ef['summary']||_0x2fd432(0x142);if(_0x5d6073['includes'](_0x2fd432(0x125))||_0x5d6073['includes'](_0x2fd432(0x148))||_0x5d6073[_0x2fd432(0x1a5)](_0x2fd432(0x120)))_0x172a31=!![],_0x29b961=Array[_0x2fd432(0x1aa)](_0xcd691d);else for(const _0x2c2347 of _0xcd691d){if(_0x5d6073[_0x2fd432(0x1a5)](_0x2c2347[_0x2fd432(0x189)]()))_0x29b961['push'](_0x2c2347);}_0x29b961[_0x2fd432(0x10f)]>0x0&&_0x29b961[_0x2fd432(0x13d)](_0x36e29e=>{const _0x5e74f6=_0x2fd432;let _0x5f1508=0x3c;if(_0x172a31){let _0x548146=0x0;Object[_0x5e74f6(0x11a)](_0x57661d)['forEach'](_0x441b00=>{if(_0x441b00>_0x548146)_0x548146=_0x441b00;}),_0x5f1508=_0x548146>0x0?_0x548146:0x78;}else _0x5f1508=getWarmupRobust(_0x57661d,_0x36e29e);const _0x1959cf=new Date(_0x2c0f04-_0x5f1508*0xea60);_0x4fee58[_0x5e74f6(0x154)]({'eventTime':_0x2c0f04,'triggerTime':_0x1959cf['getTime'](),'room':_0x36e29e,'minutes':_0x5f1508,'reason':_0x38e593,'isGlobal':_0x172a31});});}}catch(_0x577a0e){}_0x4fee58[_0x2fd432(0x169)]((_0x45260d,_0x482130)=>_0x45260d[_0x2fd432(0x196)]-_0x482130['triggerTime']);const _0x36a9b0=_0x4fee58[_0x2fd432(0x149)](0x0,0x5);await _0x5293d3[_0x2fd432(0x155)]('analysis.energy.schedulePreview',{'val':JSON[_0x2fd432(0x174)](_0x36a9b0),'ack':!![]});}async function monitorEnforcements(_0x204d35){const _0x1121da=a1_0x386044;try{const _0x24e713=_0x1121da(0x1a8),_0x35ef9e=await _0x204d35[_0x1121da(0x15e)](_0x24e713);if(!_0x35ef9e||!_0x35ef9e[_0x1121da(0x17b)])return;let _0x5d271a=[];try{_0x5d271a=JSON[_0x1121da(0x10b)](_0x35ef9e[_0x1121da(0x17b)]);}catch(_0xca916c){return;}if(!Array[_0x1121da(0x130)](_0x5d271a)||_0x5d271a['length']===0x0)return;const _0x5d00ab=Date['now'](),_0x168fa8=_0x204d35[_0x1121da(0x110)][_0x1121da(0x137)]||[];let _0x43c0e5=![];for(let _0x5188f3=_0x5d271a['length']-0x1;_0x5188f3>=0x0;_0x5188f3--){const _0x58c88c=_0x5d271a[_0x5188f3];if(_0x5d00ab>=_0x58c88c['until']){_0x204d35['log'][_0x1121da(0x14f)](_0x1121da(0x1b1)+_0x58c88c[_0x1121da(0x16d)]+_0x1121da(0x138)),_0x5d271a[_0x1121da(0x11b)](_0x5188f3,0x1),_0x43c0e5=!![];continue;}const _0x72023b=_0x168fa8[_0x1121da(0x118)](_0x4244d2=>normalize(_0x4244d2[_0x1121da(0x197)])===normalize(_0x58c88c[_0x1121da(0x16d)])&&(_0x4244d2[_0x1121da(0x171)]===_0x1121da(0x113)||_0x4244d2[_0x1121da(0x171)]===_0x1121da(0x186)));if(_0x72023b){const _0x5e7e63=await findRelatedId(_0x204d35,_0x72023b['id'],_0x1121da(0x17a));if(_0x5e7e63){const _0x4ccf80=await _0x204d35['getForeignStateAsync'](_0x5e7e63);_0x4ccf80&&typeof _0x4ccf80[_0x1121da(0x17b)]===_0x1121da(0x12c)&&(_0x4ccf80[_0x1121da(0x17b)]<0xf&&(_0x204d35[_0x1121da(0x181)][_0x1121da(0x19b)](_0x1121da(0x136)+_0x58c88c[_0x1121da(0x16d)]+_0x1121da(0x103)+_0x4ccf80['val']+_0x1121da(0x14a)+_0x58c88c[_0x1121da(0x11d)]+_0x1121da(0x185)),await _0x204d35[_0x1121da(0x192)](_0x5e7e63,_0x58c88c[_0x1121da(0x11d)]),await logAutomationAction(_0x204d35,_0x1121da(0x160)+_0x58c88c[_0x1121da(0x16d)]+':\x20'+_0x4ccf80[_0x1121da(0x17b)]+_0x1121da(0x156)+_0x58c88c[_0x1121da(0x11d)]+_0x1121da(0x122))));}}}_0x43c0e5&&await _0x204d35['setStateAsync'](_0x24e713,{'val':JSON[_0x1121da(0x174)](_0x5d271a),'ack':!![]});}catch(_0x165d13){_0x204d35[_0x1121da(0x181)][_0x1121da(0x101)]('Enforcement\x20Monitor\x20Error:\x20'+_0x165d13[_0x1121da(0x191)]);}}async function checkCalendarTriggers(_0x19ae7a){const _0xa9965f=a1_0x386044;if(!_0x19ae7a[_0xa9965f(0x110)][_0xa9965f(0x183)]||!_0x19ae7a[_0xa9965f(0x110)]['calendarInstance'])return;await updateSchedulePreview(_0x19ae7a);let _0xed2079={},_0x3281a6={};try{const _0x37e2de=await _0x19ae7a[_0xa9965f(0x15e)](_0xa9965f(0x190));if(_0x37e2de&&_0x37e2de[_0xa9965f(0x17b)])_0xed2079=JSON['parse'](_0x37e2de[_0xa9965f(0x17b)]);const _0x319151=await _0x19ae7a[_0xa9965f(0x15e)](_0xa9965f(0x166));if(_0x319151&&_0x319151[_0xa9965f(0x17b)])_0x3281a6=JSON[_0xa9965f(0x10b)](_0x319151[_0xa9965f(0x17b)]);}catch(_0x41924a){}let _0x1f3c63={'default':0x15};try{const _0x2caf67=await _0x19ae7a[_0xa9965f(0x15e)](_0xa9965f(0x146));if(_0x2caf67&&_0x2caf67[_0xa9965f(0x17b)])_0x1f3c63=JSON[_0xa9965f(0x10b)](_0x2caf67['val']);}catch(_0x45585e){}let _0x16a0fe=[];try{const _0x1e14fd=await _0x19ae7a[_0xa9965f(0x15e)]('analysis.energy.activeEnforcements');if(_0x1e14fd&&_0x1e14fd[_0xa9965f(0x17b)])_0x16a0fe=JSON[_0xa9965f(0x10b)](_0x1e14fd[_0xa9965f(0x17b)]);}catch(_0x352d1d){}try{const _0x330524=await _0x19ae7a[_0xa9965f(0x193)](_0x19ae7a[_0xa9965f(0x110)][_0xa9965f(0x115)]+_0xa9965f(0x135));if(!_0x330524||!_0x330524['val'])return;const _0xcd3cd0=JSON[_0xa9965f(0x10b)](_0x330524['val']),_0x481764=Date[_0xa9965f(0x157)](),_0x3d154d=_0x19ae7a['config'][_0xa9965f(0x137)]||[],_0x5c1ee1=_0x19ae7a[_0xa9965f(0x110)][_0xa9965f(0x147)]||[];let _0x16a04e=![];for(const _0x4bc5ba of _0xcd3cd0){if(_0x4bc5ba[_0xa9965f(0x188)]&&_0x5c1ee1[_0xa9965f(0x10f)]>0x0&&!_0x5c1ee1[_0xa9965f(0x1a5)](_0x4bc5ba[_0xa9965f(0x188)]))continue;const _0x1bc466=_0x4bc5ba['_date']||_0x4bc5ba['eventStart']||_0x4bc5ba[_0xa9965f(0x187)];if(!_0x1bc466)continue;const _0x30481f=new Date(_0x1bc466);if(isNaN(_0x30481f[_0xa9965f(0x108)]()))continue;const _0x2973c0=(_0x4bc5ba[_0xa9965f(0x11c)]||_0x4bc5ba['summary']||'')['toLowerCase']();if(_0x2973c0['includes'](_0xa9965f(0x125))||_0x2973c0[_0xa9965f(0x1a5)](_0xa9965f(0x148))||_0x2973c0[_0xa9965f(0x1a5)](_0xa9965f(0x120))){let _0x4bc052=0x0;Object[_0xa9965f(0x11a)](_0xed2079)[_0xa9965f(0x13d)](_0x5ef933=>{if(_0x5ef933>_0x4bc052)_0x4bc052=_0x5ef933;});if(_0x4bc052===0x0)_0x4bc052=0x78;const _0x40349a=_0x30481f[_0xa9965f(0x108)]()-_0x4bc052*0xea60;_0x481764>=_0x40349a&&_0x481764<_0x30481f['getTime']()&&(_0x19ae7a[_0xa9965f(0x164)]!==_0xa9965f(0x15f)&&(_0x19ae7a[_0xa9965f(0x181)][_0xa9965f(0x14f)](_0xa9965f(0x128)+_0x4bc052+_0xa9965f(0x14d)),await _0x19ae7a[_0xa9965f(0x155)]('system.mode',{'val':_0xa9965f(0x15f),'ack':![]})));}for(const _0x21f547 of _0x3d154d){if(_0x21f547[_0xa9965f(0x197)]){const _0x773654=_0x21f547[_0xa9965f(0x197)][_0xa9965f(0x189)](),_0x270092=(_0x21f547[_0xa9965f(0x1ad)]||'')[_0xa9965f(0x189)]();let _0x30c4e4=_0x2973c0[_0xa9965f(0x1a5)](_0x773654);!_0x30c4e4&&_0x270092[_0xa9965f(0x10f)]>0x3&&_0x2973c0['includes'](_0x270092)&&(_0x30c4e4=!![]);if(_0x30c4e4){const _0xeb8beb=getWarmupRobust(_0xed2079,_0x21f547['location']),_0x3da35f=_0x3281a6[_0x21f547[_0xa9965f(0x197)]]||'Classic',_0x47da09=_0x30481f['getTime']()-_0xeb8beb*0xea60;if(_0x481764>=_0x47da09&&_0x481764<_0x30481f['getTime']()){const _0x5ae38e=lastActions[_0xa9965f(0x19e)+_0x21f547[_0xa9965f(0x197)]];if(_0x5ae38e&&_0x481764-_0x5ae38e<CAL_COOLDOWN_MS)continue;const _0xe03556=await findRelatedId(_0x19ae7a,_0x21f547['id'],_0xa9965f(0x17a));if(_0xe03556){let _0x16830b=_0x1f3c63[_0x21f547[_0xa9965f(0x197)]];if(_0x16830b===undefined)_0x16830b=_0x1f3c63[_0xa9965f(0x102)];if(_0x16830b===undefined)_0x16830b=0x15;const _0x1b8cae=await _0x19ae7a[_0xa9965f(0x193)](_0xe03556);if(_0x1b8cae&&typeof _0x1b8cae['val']===_0xa9965f(0x12c)&&_0x1b8cae[_0xa9965f(0x17b)]<_0x16830b-0.5){_0x19ae7a[_0xa9965f(0x181)][_0xa9965f(0x14f)](_0xa9965f(0x1a0)+_0x3da35f+_0xa9965f(0x10a)+_0x21f547[_0xa9965f(0x197)]+_0xa9965f(0x106)+_0x2973c0+_0xa9965f(0x12f)+_0x16830b+_0xa9965f(0x18a)+_0xeb8beb+_0xa9965f(0x14d)),await _0x19ae7a[_0xa9965f(0x192)](_0xe03556,_0x16830b),await logAutomationAction(_0x19ae7a,'[CAL]\x20'+_0x21f547[_0xa9965f(0x197)]+_0xa9965f(0x199)+_0x16830b+_0xa9965f(0x176)+_0x3da35f+')'),lastActions[_0xa9965f(0x19e)+_0x21f547[_0xa9965f(0x197)]]=_0x481764;const _0x87599=_0x16a0fe[_0xa9965f(0x104)](_0x30735b=>_0x30735b[_0xa9965f(0x16d)]===_0x21f547[_0xa9965f(0x197)]);if(_0x87599!==-0x1)_0x16a0fe[_0xa9965f(0x11b)](_0x87599,0x1);_0x16a0fe['push']({'room':_0x21f547[_0xa9965f(0x197)],'target':_0x16830b,'until':_0x30481f[_0xa9965f(0x108)]()}),_0x16a04e=!![];}}}}}}}_0x16a04e&&await _0x19ae7a[_0xa9965f(0x155)]('analysis.energy.activeEnforcements',{'val':JSON['stringify'](_0x16a0fe),'ack':!![]});}catch(_0x3b1253){_0x19ae7a['log'][_0xa9965f(0x19b)](_0xa9965f(0x167)+_0x3b1253[_0xa9965f(0x191)]);}}async function manageMpcIntervention(_0x40db8f,_0x174cc8,_0x4e133b){const _0x4147e2=a1_0x386044;try{const _0x2af374=_0x4147e2(0x1b6),_0x589d78=await _0x40db8f[_0x4147e2(0x15e)](_0x2af374);let _0xbf0b91=[];if(_0x589d78&&_0x589d78[_0x4147e2(0x17b)])try{_0xbf0b91=JSON[_0x4147e2(0x10b)](_0x589d78[_0x4147e2(0x17b)]);}catch(_0x3b4452){}const _0xd4521a=_0xbf0b91['indexOf'](_0x174cc8);if(_0x4e133b===_0x4147e2(0x15b))_0xd4521a===-0x1&&(_0xbf0b91[_0x4147e2(0x154)](_0x174cc8),await _0x40db8f[_0x4147e2(0x155)](_0x2af374,{'val':JSON[_0x4147e2(0x174)](_0xbf0b91),'ack':!![]}));else _0x4e133b===_0x4147e2(0x151)&&(_0xd4521a!==-0x1&&(_0xbf0b91[_0x4147e2(0x11b)](_0xd4521a,0x1),await _0x40db8f[_0x4147e2(0x155)](_0x2af374,{'val':JSON[_0x4147e2(0x174)](_0xbf0b91),'ack':!![]})));}catch(_0x1b0e4a){}}function a1_0x3b10(){const _0x1d544d=['\x20wieder\x20auf\x20','Unknown','SET','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','_meta','approved','toString','search','error','default','\x20auf\x20','findIndex','split','\x27\x20(Match:\x20','867214neMNqp','getTime','PERFECT',']:\x20Raum-Trigger\x20\x27','parse','SET_POINT_TEMPERATURE','\x20min)','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','length','config','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.',':\x20Absenkung\x20auf\x20','temperature','¬∞C!\x20(Puffer\x20leer).','calendarInstance','valve_position','temp','find','map','values','splice','event','target','state','soll','ankunft','1187392aJbfwn','¬∞C\x20(Kalender-Schutz)','getForeignObjectAsync','join','urlaub\x20ende','461364alkuKX','abs','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','2043804kPdcvR','üö®\x20[MPC\x20WATCHDOG]\x20','level','number','¬∞C\x20<\x20','3dNSywf',')\x20aktiv.\x20Heize\x20auf\x20','isArray','.4.VALVE_STATE','Manuelles\x20Mapping','summary','\x20->\x20Schalte\x20','.data.table','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','devices','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','¬∞C\x20(nicht\x20','replace','valve','forEach','.4.SET_TEMPERATURE','215334RDHtgV','ist','actual','Unbekannt','toUpperCase','sensor','.1.LEVEL','analysis.energy.warmupTargets','calendarSelection','r√ºckkehr','slice','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','active','valveMapping','\x20min).','apply','info','filter','remove',':\x20Aufheizen\x20auf\x20','string','push','setStateAsync','¬∞C\x20->\x20','now','6280065iQFITd','analysis.automation.confidenceThreshold','Ist','add','role','ACTUAL_TEMPERATURE','getStateAsync','normal','[FORCE]\x20','write','üî•\x20[MPC\x20ACTION]\x20Heize\x20','contact','currentSystemMode','rescue_','analysis.energy.warmupSources','Calendar\x20Check\x20Error:\x20','.1.TEMPERATURE','sort','.1.ACTUAL_TEMPERATURE','_date','getHours','room','trim','sendToPythonWrapper','target_temperature','type','analysis.automation.actionLog','stellwert','stringify','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','¬∞C\x20(via\x20','score','messwert','thermostatMapping','setpoint','val','dimmer','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','window','\x20ist\x20auf\x20','eventStart','log','analysis.energy.rlPenalties','useCalendar','exports','¬∞C.','thermostat','date','_calName','toLowerCase','¬∞C\x20(Vorlauf:\x20','common','¬∞C).\x20Sparmodus\x20beendet!','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','(((.+)+)+)+$','mpc_','analysis.energy.warmupTimes','message','setForeignStateAsync','getForeignStateAsync','off','position','triggerTime','location','Auto-Erkennung','\x20->\x20','analysis.energy.ventilationAlerts','warn','ACTUAL','manual','cal_','hm-rpc','üìÖ\x20SMART\x20SCHEDULE\x20[','¬∞C!\x20(Puffer:\x20','minutes_safe','switch','light','includes','reason','getForeignObjectsAsync','analysis.energy.activeEnforcements','wert','from','.1.SET_POINT_TEMPERATURE','constructor','name','3403127mNjeyS','10AFDtjR','thermostat.setpoint','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','analysis.automation.mode','level.temperature','Nicht\x20gefunden','[MPC]\x20','analysis.energy.mpcActiveInterventions','level.valve','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20'];a1_0x3b10=function(){return _0x1d544d;};return a1_0x3b10();}async function cleanupGhostInterventions(_0x688077){const _0x33710b=a1_0x386044;try{const _0x5ac87d='analysis.energy.mpcActiveInterventions',_0x2d02ae=await _0x688077[_0x33710b(0x15e)](_0x5ac87d);if(!_0x2d02ae||!_0x2d02ae[_0x33710b(0x17b)])return;const _0x1dbf1f=JSON[_0x33710b(0x10b)](_0x2d02ae[_0x33710b(0x17b)]);if(!Array['isArray'](_0x1dbf1f)||_0x1dbf1f[_0x33710b(0x10f)]===0x0)return;let _0x3ca828={'default':0x15};try{const _0x89b0de=await _0x688077[_0x33710b(0x15e)](_0x33710b(0x146));if(_0x89b0de&&_0x89b0de[_0x33710b(0x17b)])_0x3ca828=JSON['parse'](_0x89b0de[_0x33710b(0x17b)]);}catch(_0x49fcbd){}let _0x192eb9=[];try{const _0x46c8d9=await _0x688077['getStateAsync'](_0x33710b(0x19a));if(_0x46c8d9&&_0x46c8d9['val'])_0x192eb9=JSON[_0x33710b(0x10b)](_0x46c8d9['val']);}catch(_0x50e554){}let _0xfcf280={},_0x56e897=![];try{const _0x128531=await _0x688077[_0x33710b(0x15e)](_0x33710b(0x182));if(_0x128531&&_0x128531[_0x33710b(0x17b)])_0xfcf280=JSON[_0x33710b(0x10b)](_0x128531[_0x33710b(0x17b)]);}catch(_0x63a94a){}if(_0xfcf280[_0x33710b(0xfd)]){const _0x579693=Date[_0x33710b(0x157)]();for(const [_0x18189e,_0xb28220]of Object['entries'](_0xfcf280[_0x33710b(0xfd)])){_0x579693-_0xb28220>PENALTY_TTL&&(delete _0xfcf280[_0x18189e],delete _0xfcf280['_meta'][_0x18189e],_0x56e897=!![],_0x688077[_0x33710b(0x181)][_0x33710b(0x14f)](_0x33710b(0x175)+_0x18189e+_0x33710b(0x10e)));}}const _0x512602=_0x688077[_0x33710b(0x110)][_0x33710b(0x137)]||[];let _0x9ea404=![];for(let _0x4d54d5=_0x1dbf1f['length']-0x1;_0x4d54d5>=0x0;_0x4d54d5--){const _0x1d370c=_0x1dbf1f[_0x4d54d5],_0x41bde5=_0x512602[_0x33710b(0x118)](_0x21aa54=>normalize(_0x21aa54[_0x33710b(0x197)])===normalize(_0x1d370c)&&(_0x21aa54[_0x33710b(0x171)]===_0x33710b(0x113)||_0x21aa54[_0x33710b(0x171)]==='thermostat'));if(!_0x41bde5){_0x688077[_0x33710b(0x181)][_0x33710b(0x19b)](_0x33710b(0x17d)+_0x1d370c+'\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.'),_0x1dbf1f[_0x33710b(0x11b)](_0x4d54d5,0x1),_0x9ea404=!![];continue;}if(_0x41bde5){const _0x259544=await findRelatedId(_0x688077,_0x41bde5['id'],_0x33710b(0x17a)),_0x1b2f5b=await _0x688077[_0x33710b(0x193)](_0x41bde5['id']);if(_0x259544){const _0x5ecd7b=await _0x688077[_0x33710b(0x193)](_0x259544);if(_0x5ecd7b&&typeof _0x5ecd7b[_0x33710b(0x17b)]==='number'){let _0x473a13=![],_0x3e238e='';Math[_0x33710b(0x127)](_0x5ecd7b[_0x33710b(0x17b)]-ECO_TEMP)>0.5&&(_0x473a13=!![],_0x3e238e=_0x33710b(0x19d));if(!_0x473a13&&_0x1b2f5b&&typeof _0x1b2f5b[_0x33710b(0x17b)]===_0x33710b(0x12c)){const _0x44391b=_0x3ca828[_0x1d370c]||_0x3ca828['default']||0x15;_0x1b2f5b[_0x33710b(0x17b)]<_0x44391b+0.2&&(_0x473a13=!![],_0x3e238e='too_cold');}if(_0x473a13){if(_0x3e238e===_0x33710b(0x19d)){_0x688077[_0x33710b(0x181)][_0x33710b(0x14f)]('üßπ\x20[MPC\x20CLEANUP]\x20'+_0x1d370c+_0x33710b(0x17f)+_0x5ecd7b[_0x33710b(0x17b)]+_0x33710b(0x13a)+ECO_TEMP+'¬∞C).\x20Entferne\x20Status.');const _0x1f97ed=lastActions[_0x33710b(0x19e)+_0x1d370c],_0x82906c=_0x1f97ed&&Date[_0x33710b(0x157)]()-_0x1f97ed<0x2*0x3c*0x3e8;if(!_0x82906c&&_0x5ecd7b[_0x33710b(0x17b)]>ECO_TEMP+0.5){_0x688077[_0x33710b(0x16f)]&&(_0x688077[_0x33710b(0x181)][_0x33710b(0x14f)]('üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20'+_0x1d370c+'\x20wurde\x20manuell\x20erh√∂ht.'),_0x688077['sendToPythonWrapper']('TRAIN_RL_PENALTY',{'room':_0x1d370c}));const _0x323298=_0x1d370c+'_'+new Date()[_0x33710b(0x16c)]();if(!_0xfcf280[_0x323298]){_0xfcf280[_0x323298]=0x1;if(!_0xfcf280[_0x33710b(0xfd)])_0xfcf280[_0x33710b(0xfd)]={};_0xfcf280[_0x33710b(0xfd)][_0x323298]=Date[_0x33710b(0x157)](),_0x56e897=!![];}}else _0x82906c&&_0x688077[_0x33710b(0x181)][_0x33710b(0x14f)]('üìÖ\x20[MPC\x20INFO]\x20'+_0x1d370c+_0x33710b(0x1bc));}else{if(_0x3e238e==='too_cold'){let _0x483fc6=![];if(_0x192eb9[_0x33710b(0x118)](_0x4581e3=>_0x4581e3['room']===_0x1d370c))_0x483fc6=!![];const _0x764896=_0x512602[_0x33710b(0x150)](_0x1cc1d0=>normalize(_0x1cc1d0[_0x33710b(0x197)])===normalize(_0x1d370c)&&(_0x1cc1d0['type']===_0x33710b(0x17e)||_0x1cc1d0[_0x33710b(0x171)]===_0x33710b(0x144)||_0x1cc1d0[_0x33710b(0x171)]===_0x33710b(0x163)));for(const _0x1b809b of _0x764896){try{const _0x58bad0=await _0x688077[_0x33710b(0x193)](_0x1b809b['id']);if(_0x58bad0&&(_0x58bad0[_0x33710b(0x17b)]===!![]||_0x58bad0['val']===0x1||String(_0x58bad0['val'])[_0x33710b(0x189)]()==='open'))_0x483fc6=!![];}catch(_0x4e0528){}}if(_0x483fc6)_0x688077[_0x33710b(0x181)]['info']('üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20'+_0x1d370c+_0x33710b(0x111));else{const _0x3f7490=_0x3ca828[_0x1d370c]||_0x3ca828[_0x33710b(0x102)]||0x15;_0x688077['log'][_0x33710b(0x14f)](_0x33710b(0x12a)+_0x1d370c+'\x20erreicht\x20Limit\x20('+_0x1b2f5b[_0x33710b(0x17b)]+_0x33710b(0x12d)+(_0x3f7490+0.2)+_0x33710b(0x18c)),await _0x688077['setForeignStateAsync'](_0x259544,_0x3f7490),await logAutomationAction(_0x688077,'[WATCHDOG]\x20'+_0x1d370c+_0x33710b(0x139)+_0x3f7490+'¬∞C'),lastActions[_0x33710b(0x165)+_0x1d370c]=Date[_0x33710b(0x157)]();}}}_0x1dbf1f['splice'](_0x4d54d5,0x1),_0x9ea404=!![];}}}}}_0x9ea404&&await _0x688077['setStateAsync'](_0x5ac87d,{'val':JSON[_0x33710b(0x174)](_0x1dbf1f),'ack':!![]}),_0x56e897&&await _0x688077[_0x33710b(0x155)](_0x33710b(0x182),{'val':JSON['stringify'](_0xfcf280),'ack':!![]});}catch(_0x37b6f5){}}async function applyEnergySavings(_0x21891b,_0xfee09f){const _0x1a83f4=a1_0x386044;await cleanupGhostInterventions(_0x21891b);if(!_0xfee09f||_0xfee09f[_0x1a83f4(0x10f)]===0x0)return;const _0x1ad1d2=_0x21891b[_0x1a83f4(0x110)][_0x1a83f4(0x137)]||[],_0x488313=Date['now']();for(const _0x2d95f0 of _0xfee09f){const _0x1e5ce0=_0x2d95f0[_0x1a83f4(0x16d)],_0x262a3b=_0x2d95f0[_0x1a83f4(0x1a2)],_0x306a7f=_0x2d95f0[_0x1a83f4(0x11d)]||0x15;if(lastActions[_0x1a83f4(0x165)+_0x1e5ce0]&&_0x488313-lastActions[_0x1a83f4(0x165)+_0x1e5ce0]<RESCUE_LOCK_MS)continue;const _0x4ee7bf=_0x1ad1d2[_0x1a83f4(0x118)](_0x2fc4e0=>normalize(_0x2fc4e0[_0x1a83f4(0x197)])===normalize(_0x1e5ce0)&&(_0x2fc4e0['type']===_0x1a83f4(0x113)||_0x2fc4e0[_0x1a83f4(0x171)]===_0x1a83f4(0x186)));if(!_0x4ee7bf)continue;const _0x19e20f=await findRelatedId(_0x21891b,_0x4ee7bf['id'],'setpoint');if(_0x19e20f){if(lastActions['mpc_'+_0x1e5ce0]&&_0x488313-lastActions[_0x1a83f4(0x18f)+_0x1e5ce0]<0x1e*0x3c*0x3e8)continue;const _0x582dc1=await _0x21891b[_0x1a83f4(0x193)](_0x19e20f);if(_0x582dc1&&typeof _0x582dc1[_0x1a83f4(0x17b)]===_0x1a83f4(0x12c)){const _0x33d5c9=_0x582dc1[_0x1a83f4(0x17b)];_0x33d5c9!==ECO_TEMP&&await manageMpcIntervention(_0x21891b,_0x1e5ce0,'remove');if(_0x262a3b>0x1e)_0x33d5c9>ECO_TEMP+0.5&&(_0x21891b[_0x1a83f4(0x181)][_0x1a83f4(0x14f)](_0x1a83f4(0x1b8)+_0x1e5ce0+'\x20auf\x20'+ECO_TEMP+_0x1a83f4(0x1a1)+_0x262a3b+_0x1a83f4(0x10d)),await _0x21891b['setForeignStateAsync'](_0x19e20f,ECO_TEMP),await manageMpcIntervention(_0x21891b,_0x1e5ce0,_0x1a83f4(0x15b)),lastActions['mpc_'+_0x1e5ce0]=_0x488313,await logAutomationAction(_0x21891b,'[MPC]\x20'+_0x1e5ce0+_0x1a83f4(0x112)+ECO_TEMP+'¬∞C'));else _0x262a3b<=0xf&&(_0x33d5c9<_0x306a7f&&(_0x21891b[_0x1a83f4(0x181)][_0x1a83f4(0x14f)](_0x1a83f4(0x162)+_0x1e5ce0+_0x1a83f4(0x1b9)+_0x306a7f+_0x1a83f4(0x114)),await _0x21891b['setForeignStateAsync'](_0x19e20f,_0x306a7f),await manageMpcIntervention(_0x21891b,_0x1e5ce0,'remove'),lastActions[_0x1a83f4(0x18f)+_0x1e5ce0]=_0x488313,await logAutomationAction(_0x21891b,_0x1a83f4(0x1b5)+_0x1e5ce0+_0x1a83f4(0x152)+_0x306a7f+'¬∞C')));}}else _0x21891b[_0x1a83f4(0x181)][_0x1a83f4(0x19b)](_0x1a83f4(0x18d)+_0x1e5ce0+'\x20gefunden!');}}module[a1_0x386044(0x184)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};