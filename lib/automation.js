const a1_0x1000c2=a1_0x3296;(function(_0x45a224,_0x6b2fb5){const _0x58636b=a1_0x3296,_0x2d685b=_0x45a224();while(!![]){try{const _0x49a0be=-parseInt(_0x58636b(0x208))/0x1+parseInt(_0x58636b(0x17f))/0x2*(parseInt(_0x58636b(0x21d))/0x3)+-parseInt(_0x58636b(0x1ae))/0x4*(-parseInt(_0x58636b(0x181))/0x5)+parseInt(_0x58636b(0x209))/0x6*(parseInt(_0x58636b(0x1d3))/0x7)+parseInt(_0x58636b(0x19e))/0x8+-parseInt(_0x58636b(0x236))/0x9*(-parseInt(_0x58636b(0x1f1))/0xa)+-parseInt(_0x58636b(0x232))/0xb;if(_0x49a0be===_0x6b2fb5)break;else _0x2d685b['push'](_0x2d685b['shift']());}catch(_0x495971){_0x2d685b['push'](_0x2d685b['shift']());}}}(a1_0x21cb,0x331d2));function a1_0x21cb(){const _0x5dd4f0=['push','soll','open','r√ºckkehr','Unbekannt','¬∞C).\x20Entferne\x20Status.','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','sendToPythonWrapper','¬∞C!\x20(Puffer\x20leer).','light','search','analysis.energy.warmupSources','triggerTime','wert','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20',']:\x20Raum-Trigger\x20\x27','.1.SET_POINT_TEMPERATURE','includes','üö®\x20[MPC\x20WATCHDOG]\x20','slice','4367198LIZTDh','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','getForeignObjectAsync','state','2029437UTFxlO','summary','TRAIN_RL_PENALTY','val','filter','length','\x20ist\x20auf\x20','set','remove','¬∞C!\x20(Puffer:\x20','Fehlt',':\x20Aufheizen\x20auf\x20','./ai_agent','80266cqWnpn','sensor','5QWNJie','sort','.4.VALVE_STATE','\x20min).','level.valve','.1.ACTUAL_TEMPERATURE','\x20min)','warn','getTime','Nicht\x20gefunden','ankunft','analysis.energy.warmupTimes','valve_position','_calName',')\x20aktiv.\x20Heize\x20auf\x20','thermostat.setpoint','\x20gefunden!','ACTUAL_TEMPERATURE','üßπ\x20[MPC\x20CLEANUP]\x20','trim','add','type','location','\x20auf\x20','Unknown','hm-rpc','too_cold','isArray',':\x20Absenkung\x20auf\x20','593880xikqzF','(((.+)+)+)+$','manual','mpc_','stellwert','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','getStateAsync','values','name','analysis.energy.warmupTargets','unshift','thermostat','analysis.automation.lastAction','analysis.energy.rlPenalties','valve','indexOf','1120796vodyGF','valveMapping','\x20wieder\x20auf\x20','approved','analysis.energy.ventilationAlerts','consultButler','\x20->\x20Schalte\x20','current_heating_setpoint','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','temperature','level.temperature','üìÖ\x20SMART\x20SCHEDULE\x20[','info','error','\x20erreicht\x20Limit\x20(','_date','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','stringify','dimmer','setStateAsync','date','pi_heating_demand','toLowerCase','_meta','log','contact','role','messwert','useCalendar','\x20->\x20','common','analysis.energy.activeEnforcements','unit',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','setpoint','ist','urlaub\x20ende','7532dUhFZF','ACTUAL','toString','¬∞C\x20<\x20','score','localeCompare','[WATCHDOG]\x20','getHours','occupied_heating_setpoint','[MPC]\x20','Enforcement\x20Monitor\x20Error:\x20','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','value.valve','.data.table','calendarInstance','\x20wurde\x20manuell\x20erh√∂ht.','üî•\x20[MPC\x20ACTION]\x20Heize\x20','Manuelles\x20Mapping','Auto-Erkennung','message','PERFECT','minutes_safe','currentSystemMode','eventStart','toUpperCase','analysis.automation.confidenceThreshold','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','string','event','.1.TEMPERATURE','10kNHTAp','map','target_temperature','thermostatMapping','getForeignStateAsync','number','off','join','analysis.energy.schedulePreview','forEach','replace','¬∞C\x20(Kalender-Schutz)','parse','actual','entries','devices','Classic','¬∞C\x20(nicht\x20','¬∞C\x20(Vorlauf:\x20','now','Soll','splice','cal_','96098YmmfyD','12diToWX','.1.LEVEL','until','setForeignStateAsync','target','config','find','split','constructor','calendarSelection','local_temperature','SET_POINT_TEMPERATURE','¬∞C.','Calendar\x20Check\x20Error:\x20','¬∞C).\x20Sparmodus\x20beendet!','rescue_','default','Ist','room','normal','9coaZDP'];a1_0x21cb=function(){return _0x5dd4f0;};return a1_0x21cb();}const a1_0x1ff833=(function(){let _0x1839d1=!![];return function(_0x5edcbe,_0x23d457){const _0x5f1bb0=_0x1839d1?function(){if(_0x23d457){const _0x1bf721=_0x23d457['apply'](_0x5edcbe,arguments);return _0x23d457=null,_0x1bf721;}}:function(){};return _0x1839d1=![],_0x5f1bb0;};}()),a1_0x564b08=a1_0x1ff833(this,function(){const _0x363f51=a1_0x3296;return a1_0x564b08[_0x363f51(0x1d5)]()[_0x363f51(0x228)](_0x363f51(0x19f))[_0x363f51(0x1d5)]()[_0x363f51(0x211)](a1_0x564b08)['search'](_0x363f51(0x19f));});a1_0x564b08();'use strict';const aiAgent=require(a1_0x1000c2(0x17e)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x1591ce){const _0x7b3b4b=a1_0x1000c2;if(!_0x1591ce)return'';return _0x1591ce[_0x7b3b4b(0x1c4)]()[_0x7b3b4b(0x1fb)](/\s+/g,'')[_0x7b3b4b(0x194)]();}function getWarmupRobust(_0x1d01a0,_0x589515){const _0x2e917f=a1_0x1000c2;if(!_0x1d01a0||!_0x589515)return 0x3c;if(_0x1d01a0[_0x589515]!==undefined)return _0x1d01a0[_0x589515];const _0x18a653=_0x589515[_0x2e917f(0x1c4)]()[_0x2e917f(0x1fb)](/√§/g,'ae')[_0x2e917f(0x1fb)](/√∂/g,'oe')[_0x2e917f(0x1fb)](/√º/g,'ue')[_0x2e917f(0x1fb)](/√ü/g,'ss')['replace'](/\s+/g,'_')[_0x2e917f(0x1fb)](/[^a-z0-9_]/g,'');if(_0x1d01a0[_0x18a653]!==undefined)return _0x1d01a0[_0x18a653];return 0x3c;}async function logAutomationAction(_0x342a4a,_0x4d105b){const _0x1bdec0=a1_0x1000c2;await _0x342a4a[_0x1bdec0(0x1c1)](_0x1bdec0(0x1aa),{'val':_0x4d105b,'ack':!![]});try{const _0x53a16a='analysis.automation.actionLog',_0x76cc7b=await _0x342a4a[_0x1bdec0(0x1a4)](_0x53a16a);let _0x5e791b=[];if(_0x76cc7b&&_0x76cc7b[_0x1bdec0(0x239)])try{_0x5e791b=JSON[_0x1bdec0(0x1fd)](_0x76cc7b[_0x1bdec0(0x239)]);}catch(_0xb784b3){}_0x5e791b[_0x1bdec0(0x1a8)]({'ts':Date['now'](),'msg':_0x4d105b});if(_0x5e791b['length']>0x32)_0x5e791b=_0x5e791b[_0x1bdec0(0x231)](0x0,0x32);await _0x342a4a['setStateAsync'](_0x53a16a,{'val':JSON[_0x1bdec0(0x1bf)](_0x5e791b),'ack':!![]});}catch(_0x9b3d2d){}}function a1_0x3296(_0x35b8bd,_0x447862){const _0x1ffe4f=a1_0x21cb();return a1_0x3296=function(_0x564b08,_0x1ff833){_0x564b08=_0x564b08-0x176;let _0x21cbfb=_0x1ffe4f[_0x564b08];return _0x21cbfb;},a1_0x3296(_0x35b8bd,_0x447862);}async function handlePrediction(_0x559178,_0x51fd6c,_0x43affd){const _0x5f47b5=a1_0x1000c2;if(!_0x51fd6c||_0x51fd6c===_0x5f47b5(0x199))return;let _0x3c730d='off',_0x197f05=0.6;try{const _0x532751=await _0x559178['getStateAsync']('analysis.automation.mode');if(_0x532751&&_0x532751[_0x5f47b5(0x239)])_0x3c730d=_0x532751['val'];const _0x5a4bcc=await _0x559178[_0x5f47b5(0x1a4)](_0x5f47b5(0x1ec));if(_0x5a4bcc&&_0x5a4bcc['val'])_0x197f05=_0x5a4bcc['val'];}catch(_0x3d972f){}if(_0x3c730d===_0x5f47b5(0x1f7)||_0x43affd<_0x197f05)return;const _0x117d75=Date['now']();if(lastActions[_0x51fd6c]&&_0x117d75-lastActions[_0x51fd6c]<COOLDOWN_MS)return;const _0x4e0680=_0x559178[_0x5f47b5(0x20e)][_0x5f47b5(0x200)]||[],_0x55ae81=normalize(_0x51fd6c),_0x374c77=_0x4e0680[_0x5f47b5(0x20f)](_0x12c56b=>normalize(_0x12c56b[_0x5f47b5(0x197)])===_0x55ae81&&(_0x12c56b['type']===_0x5f47b5(0x227)||_0x12c56b['type']===_0x5f47b5(0x1c0)||_0x12c56b[_0x5f47b5(0x196)]==='switch'));if(!_0x374c77)return;const _0x5315a7=await aiAgent[_0x5f47b5(0x1b3)](_0x559178,_0x51fd6c,_0x374c77[_0x5f47b5(0x1a6)],_0x43affd);if(!_0x5315a7[_0x5f47b5(0x1b1)])return;const _0x4f5b71='Pr√§diktion:\x20'+_0x51fd6c+_0x5f47b5(0x1b4)+_0x374c77['name']+'\x20('+_0x5315a7['reason']+')';await logAutomationAction(_0x559178,'['+_0x3c730d[_0x5f47b5(0x1eb)]()+']\x20'+_0x4f5b71);if(_0x3c730d==='active'){const _0x419403=await _0x559178['getForeignStateAsync'](_0x374c77['id']);(!_0x419403||!_0x419403['val']&&_0x419403[_0x5f47b5(0x239)]!==!![])&&await _0x559178[_0x5f47b5(0x20c)](_0x374c77['id'],!![]),lastActions[_0x51fd6c]=_0x117d75;}}async function findRelatedId(_0x51ba91,_0x466169,_0x1ec6ea='setpoint'){const _0x26239c=a1_0x1000c2;if(_0x1ec6ea===_0x26239c(0x1d0)&&_0x51ba91[_0x26239c(0x20e)][_0x26239c(0x1f4)]){let _0x2e0524=_0x51ba91[_0x26239c(0x20e)][_0x26239c(0x1f4)];if(typeof _0x2e0524===_0x26239c(0x1ee))try{_0x2e0524=JSON[_0x26239c(0x1fd)](_0x2e0524);}catch(_0x1b295e){}if(_0x2e0524&&_0x2e0524[_0x466169])return _0x2e0524[_0x466169];}if(_0x1ec6ea==='valve'&&_0x51ba91[_0x26239c(0x20e)][_0x26239c(0x1af)]){let _0xdf918b=_0x51ba91['config'][_0x26239c(0x1af)];if(typeof _0xdf918b===_0x26239c(0x1ee))try{_0xdf918b=JSON[_0x26239c(0x1fd)](_0xdf918b);}catch(_0x29c3a7){}if(_0xdf918b&&_0xdf918b[_0x466169])return _0xdf918b[_0x466169];}let _0x544d52=[];if(_0x1ec6ea==='setpoint')_0x544d52=[{'s':'.1.ACTUAL_TEMPERATURE','t':_0x26239c(0x22e)},{'s':_0x26239c(0x1f0),'t':_0x26239c(0x22e)},{'s':_0x26239c(0x1f0),'t':'.4.SET_TEMPERATURE'},{'s':_0x26239c(0x192),'t':_0x26239c(0x214)},{'s':_0x26239c(0x213),'t':_0x26239c(0x1db)},{'s':'local_temperature','t':_0x26239c(0x1b5)},{'s':_0x26239c(0x1b7),'t':_0x26239c(0x1f3)},{'s':_0x26239c(0x1d4),'t':'SET'},{'s':_0x26239c(0x21a),'t':_0x26239c(0x205)},{'s':'temperature','t':_0x26239c(0x1d0)}];else _0x1ec6ea==='valve'&&(_0x544d52=[{'s':_0x26239c(0x186),'t':_0x26239c(0x20a)},{'s':_0x26239c(0x1f0),'t':_0x26239c(0x20a)},{'s':_0x26239c(0x1f0),'t':_0x26239c(0x183)},{'s':_0x26239c(0x213),'t':_0x26239c(0x1c3)},{'s':_0x26239c(0x1b7),'t':_0x26239c(0x18d)},{'s':_0x26239c(0x1b7),'t':'level'}]);for(const _0x50b8c4 of _0x544d52){if(_0x466169[_0x26239c(0x22f)](_0x50b8c4['s'])){const _0x20a8c9=_0x466169[_0x26239c(0x1fb)](_0x50b8c4['s'],_0x50b8c4['t']),_0x4d19a1=await _0x51ba91[_0x26239c(0x234)](_0x20a8c9);if(_0x4d19a1)return _0x20a8c9;}}try{const _0x1389eb=_0x466169[_0x26239c(0x210)]('.');if(_0x1389eb['length']>0x2){const _0x8715d2=_0x1389eb[_0x26239c(0x231)](0x0,-0x1)[_0x26239c(0x1f8)]('.'),_0x2cfdd9=await _0x51ba91['getForeignObjectsAsync'](_0x8715d2+'.*'),_0x163ebb=[],_0xb292de=_0x466169[_0x26239c(0x210)](/[._]+/)[_0x26239c(0x176)](_0xb48bc3=>!['openknx','0',_0x26239c(0x19a),_0x26239c(0x1d1),_0x26239c(0x22b),_0x26239c(0x1b7),_0x26239c(0x1fe),_0x26239c(0x180),_0x26239c(0x1c9),_0x26239c(0x235)]['includes'](_0xb48bc3[_0x26239c(0x1c4)]()));for(const [_0x19fdea,_0x2db9ad]of Object[_0x26239c(0x1ff)](_0x2cfdd9)){if(_0x19fdea===_0x466169)continue;if(_0x2db9ad&&_0x2db9ad[_0x26239c(0x1cc)]){const _0x2135b5=_0x19fdea[_0x26239c(0x1c4)](),_0x5e5f37=(_0x2db9ad['common'][_0x26239c(0x1c8)]||'')[_0x26239c(0x1c4)](),_0x31add3=(_0x2db9ad[_0x26239c(0x1cc)][_0x26239c(0x1ce)]||'')[_0x26239c(0x1c4)]();let _0x13d4e6=![];if(_0x1ec6ea==='setpoint'&&_0x2db9ad['common']['write']===!![])_0x13d4e6=_0x2135b5['includes'](_0x26239c(0x179))||_0x2135b5[_0x26239c(0x22f)](_0x26239c(0x21f))||_0x2135b5[_0x26239c(0x22f)](_0x26239c(0x20d))||_0x5e5f37[_0x26239c(0x22f)](_0x26239c(0x1b8))||_0x5e5f37[_0x26239c(0x22f)](_0x26239c(0x190));else _0x1ec6ea===_0x26239c(0x1ac)&&(_0x13d4e6=_0x2135b5['includes']('level')||_0x2135b5[_0x26239c(0x22f)](_0x26239c(0x1ac))||_0x2135b5['includes'](_0x26239c(0x1a2))||_0x2135b5[_0x26239c(0x22f)]('position')||_0x5e5f37[_0x26239c(0x22f)](_0x26239c(0x185))||_0x5e5f37['includes'](_0x26239c(0x1df))||_0x31add3[_0x26239c(0x22f)]('%'));if(_0x13d4e6){const _0x27ace7=_0x19fdea['split'](/[._]+/)[_0x26239c(0x1f2)](_0x2f3af3=>_0x2f3af3[_0x26239c(0x1c4)]());let _0x13a3e3=0x0;_0xb292de[_0x26239c(0x1fa)](_0x1e466f=>{const _0x1bcf0c=_0x26239c;if(_0x27ace7['includes'](_0x1e466f[_0x1bcf0c(0x1c4)]()))_0x13a3e3++;}),_0x163ebb[_0x26239c(0x21e)]({'id':_0x19fdea,'score':_0x13a3e3});}}}if(_0x163ebb[_0x26239c(0x177)]>0x0){_0x163ebb[_0x26239c(0x182)]((_0x43bd38,_0x174ff1)=>_0x174ff1[_0x26239c(0x1d7)]-_0x43bd38[_0x26239c(0x1d7)]);if(_0x163ebb[0x0]['score']>0x0)return _0x163ebb[0x0]['id'];}}}catch(_0x26760a){}return null;}async function scanThermostats(_0x4896b2){const _0x4ecc63=a1_0x1000c2,_0x161551=_0x4896b2[_0x4ecc63(0x20e)][_0x4ecc63(0x200)]||[],_0x2367da=[],_0x4add1e=_0x161551[_0x4ecc63(0x176)](_0x227e07=>_0x227e07['id']&&_0x227e07['id'][_0x4ecc63(0x22f)](_0x4ecc63(0x1b7))||_0x227e07['type']&&[_0x4ecc63(0x1b7),_0x4ecc63(0x1a9),_0x4ecc63(0x180)]['includes'](_0x227e07['type'])||_0x227e07[_0x4ecc63(0x1a6)]&&_0x227e07[_0x4ecc63(0x1a6)][_0x4ecc63(0x1c4)]()[_0x4ecc63(0x22f)]('temp'));for(const _0x25788f of _0x4add1e){const _0x46e154=await findRelatedId(_0x4896b2,_0x25788f['id'],_0x4ecc63(0x1d0)),_0x1a7a31=await findRelatedId(_0x4896b2,_0x25788f['id'],_0x4ecc63(0x1ac));let _0x22d53b=_0x4ecc63(0x18a),_0x54bc80=![],_0x2a17f5=_0x4896b2[_0x4ecc63(0x20e)][_0x4ecc63(0x1f4)]||{};if(typeof _0x2a17f5===_0x4ecc63(0x1ee))try{_0x2a17f5=JSON[_0x4ecc63(0x1fd)](_0x2a17f5);}catch(_0x4c3fbf){}let _0x20d50f=_0x4896b2[_0x4ecc63(0x20e)][_0x4ecc63(0x1af)]||{};if(typeof _0x20d50f===_0x4ecc63(0x1ee))try{_0x20d50f=JSON[_0x4ecc63(0x1fd)](_0x20d50f);}catch(_0x5535f6){}if(_0x2a17f5[_0x25788f['id']]&&_0x2a17f5[_0x25788f['id']]===_0x46e154||_0x20d50f[_0x25788f['id']]&&_0x20d50f[_0x25788f['id']]===_0x1a7a31)_0x22d53b=_0x4ecc63(0x1e4),_0x54bc80=!![];else(_0x46e154||_0x1a7a31)&&(_0x22d53b=_0x4ecc63(0x1e5));_0x2367da[_0x4ecc63(0x21e)]({'room':_0x25788f[_0x4ecc63(0x197)]||'Unbekannt','sensorId':_0x25788f['id'],'setpointId':_0x46e154||'-','valveId':_0x1a7a31||'-','source':_0x22d53b,'isManual':_0x54bc80,'status':_0x46e154&&_0x1a7a31?_0x4ecc63(0x1e7):_0x46e154?'OK':_0x4ecc63(0x17c)});}return _0x2367da['sort']((_0x1be6c9,_0xcca2a2)=>_0x1be6c9[_0x4ecc63(0x21b)][_0x4ecc63(0x1d8)](_0xcca2a2['room']));}async function updateSchedulePreview(_0x45a9ef){const _0x24fb9b=a1_0x1000c2;if(!_0x45a9ef[_0x24fb9b(0x20e)][_0x24fb9b(0x1ca)]||!_0x45a9ef['config'][_0x24fb9b(0x1e1)])return;let _0x105017={};try{const _0xe8040b=await _0x45a9ef[_0x24fb9b(0x1a4)]('analysis.energy.warmupTimes');if(_0xe8040b&&_0xe8040b[_0x24fb9b(0x239)])_0x105017=JSON['parse'](_0xe8040b[_0x24fb9b(0x239)]);}catch(_0x4ec8fd){}const _0x2d5b76=[],_0x574da6=Date[_0x24fb9b(0x204)](),_0x1623df=0x30*0x3c*0x3c*0x3e8;try{const _0x4998af=await _0x45a9ef[_0x24fb9b(0x1f5)](_0x45a9ef[_0x24fb9b(0x20e)][_0x24fb9b(0x1e1)]+_0x24fb9b(0x1e0));if(!_0x4998af||!_0x4998af['val'])return;const _0x351f4a=JSON['parse'](_0x4998af[_0x24fb9b(0x239)]),_0x47e8ed=_0x45a9ef[_0x24fb9b(0x20e)][_0x24fb9b(0x212)]||[],_0x57e5cc=_0x45a9ef[_0x24fb9b(0x20e)][_0x24fb9b(0x200)]||[],_0x35029d=new Set();_0x57e5cc[_0x24fb9b(0x1fa)](_0x37631a=>{const _0x4120df=_0x24fb9b;if(_0x37631a[_0x4120df(0x197)])_0x35029d['add'](_0x37631a[_0x4120df(0x197)]);});for(const _0x54ffea of _0x351f4a){if(_0x54ffea['_calName']&&_0x47e8ed[_0x24fb9b(0x177)]>0x0&&!_0x47e8ed[_0x24fb9b(0x22f)](_0x54ffea[_0x24fb9b(0x18e)]))continue;const _0x2228ae=_0x54ffea[_0x24fb9b(0x1bd)]||_0x54ffea[_0x24fb9b(0x1ea)]||_0x54ffea[_0x24fb9b(0x1c2)];if(!_0x2228ae)continue;const _0x1d290f=new Date(_0x2228ae),_0x21b9d8=_0x1d290f[_0x24fb9b(0x189)]();if(isNaN(_0x21b9d8))continue;if(_0x21b9d8<_0x574da6)continue;if(_0x21b9d8>_0x574da6+_0x1623df)continue;const _0x37d615=(_0x54ffea[_0x24fb9b(0x1ef)]||_0x54ffea[_0x24fb9b(0x237)]||'')[_0x24fb9b(0x1c4)]();let _0x412e8a=![],_0x1c2c27=[],_0x5d17bb=_0x54ffea[_0x24fb9b(0x1ef)]||_0x54ffea[_0x24fb9b(0x237)]||_0x24fb9b(0x222);if(_0x37d615['includes'](_0x24fb9b(0x1d2))||_0x37d615[_0x24fb9b(0x22f)](_0x24fb9b(0x221))||_0x37d615['includes']('ankunft'))_0x412e8a=!![],_0x1c2c27=Array['from'](_0x35029d);else for(const _0x3b7fe7 of _0x35029d){if(_0x37d615[_0x24fb9b(0x22f)](_0x3b7fe7[_0x24fb9b(0x1c4)]()))_0x1c2c27[_0x24fb9b(0x21e)](_0x3b7fe7);}_0x1c2c27[_0x24fb9b(0x177)]>0x0&&_0x1c2c27[_0x24fb9b(0x1fa)](_0x1f1f8c=>{const _0x304824=_0x24fb9b;let _0x23d013=0x3c;if(_0x412e8a){let _0x6cb32f=0x0;Object[_0x304824(0x1a5)](_0x105017)[_0x304824(0x1fa)](_0x279a90=>{if(_0x279a90>_0x6cb32f)_0x6cb32f=_0x279a90;}),_0x23d013=_0x6cb32f>0x0?_0x6cb32f:0x78;}else _0x23d013=getWarmupRobust(_0x105017,_0x1f1f8c);const _0x521b19=new Date(_0x21b9d8-_0x23d013*0xea60);_0x2d5b76['push']({'eventTime':_0x21b9d8,'triggerTime':_0x521b19[_0x304824(0x189)](),'room':_0x1f1f8c,'minutes':_0x23d013,'reason':_0x5d17bb,'isGlobal':_0x412e8a});});}}catch(_0x3f2d78){}_0x2d5b76[_0x24fb9b(0x182)]((_0x1e3fb3,_0x10dc1a)=>_0x1e3fb3[_0x24fb9b(0x22a)]-_0x10dc1a[_0x24fb9b(0x22a)]);const _0x5974e1=_0x2d5b76[_0x24fb9b(0x231)](0x0,0x5);await _0x45a9ef[_0x24fb9b(0x1c1)](_0x24fb9b(0x1f9),{'val':JSON[_0x24fb9b(0x1bf)](_0x5974e1),'ack':!![]});}async function monitorEnforcements(_0x1ca43c){const _0x2443d3=a1_0x1000c2;try{const _0xfe645b=_0x2443d3(0x1cd),_0x5db7c1=await _0x1ca43c[_0x2443d3(0x1a4)](_0xfe645b);if(!_0x5db7c1||!_0x5db7c1[_0x2443d3(0x239)])return;let _0xfd6747=[];try{_0xfd6747=JSON[_0x2443d3(0x1fd)](_0x5db7c1[_0x2443d3(0x239)]);}catch(_0x43a450){return;}if(!Array['isArray'](_0xfd6747)||_0xfd6747[_0x2443d3(0x177)]===0x0)return;const _0x52ba8b=Date[_0x2443d3(0x204)](),_0x151dc8=_0x1ca43c[_0x2443d3(0x20e)][_0x2443d3(0x200)]||[];let _0x6e027c=![];for(let _0x11f022=_0xfd6747[_0x2443d3(0x177)]-0x1;_0x11f022>=0x0;_0x11f022--){const _0x18e453=_0xfd6747[_0x11f022];if(_0x52ba8b>=_0x18e453[_0x2443d3(0x20b)]){_0x1ca43c[_0x2443d3(0x1c6)][_0x2443d3(0x1ba)](_0x2443d3(0x1ed)+_0x18e453[_0x2443d3(0x21b)]+_0x2443d3(0x224)),_0xfd6747['splice'](_0x11f022,0x1),_0x6e027c=!![];continue;}const _0x44569b=_0x151dc8['find'](_0x466a3b=>normalize(_0x466a3b[_0x2443d3(0x197)])===normalize(_0x18e453[_0x2443d3(0x21b)])&&(_0x466a3b[_0x2443d3(0x196)]==='temperature'||_0x466a3b[_0x2443d3(0x196)]===_0x2443d3(0x1a9)));if(_0x44569b){const _0x2dae73=await findRelatedId(_0x1ca43c,_0x44569b['id'],_0x2443d3(0x1d0));if(_0x2dae73){const _0x33761c=await _0x1ca43c[_0x2443d3(0x1f5)](_0x2dae73);_0x33761c&&typeof _0x33761c['val']===_0x2443d3(0x1f6)&&(_0x33761c[_0x2443d3(0x239)]<0xf&&(_0x1ca43c['log'][_0x2443d3(0x188)]('üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x18e453[_0x2443d3(0x21b)]+_0x2443d3(0x198)+_0x33761c[_0x2443d3(0x239)]+_0x2443d3(0x22c)+_0x18e453[_0x2443d3(0x20d)]+_0x2443d3(0x215)),await _0x1ca43c[_0x2443d3(0x20c)](_0x2dae73,_0x18e453[_0x2443d3(0x20d)]),await logAutomationAction(_0x1ca43c,'[FORCE]\x20'+_0x18e453[_0x2443d3(0x21b)]+':\x20'+_0x33761c[_0x2443d3(0x239)]+'¬∞C\x20->\x20'+_0x18e453[_0x2443d3(0x20d)]+_0x2443d3(0x1fc))));}}}_0x6e027c&&await _0x1ca43c[_0x2443d3(0x1c1)](_0xfe645b,{'val':JSON[_0x2443d3(0x1bf)](_0xfd6747),'ack':!![]});}catch(_0x56d41d){_0x1ca43c['log'][_0x2443d3(0x1bb)](_0x2443d3(0x1dd)+_0x56d41d[_0x2443d3(0x1e6)]);}}async function checkCalendarTriggers(_0x2ebc92){const _0x2da748=a1_0x1000c2;if(!_0x2ebc92[_0x2da748(0x20e)][_0x2da748(0x1ca)]||!_0x2ebc92['config'][_0x2da748(0x1e1)])return;await updateSchedulePreview(_0x2ebc92);let _0x314060={},_0x12e9b2={};try{const _0x3a818e=await _0x2ebc92[_0x2da748(0x1a4)](_0x2da748(0x18c));if(_0x3a818e&&_0x3a818e[_0x2da748(0x239)])_0x314060=JSON[_0x2da748(0x1fd)](_0x3a818e['val']);const _0x39a79c=await _0x2ebc92[_0x2da748(0x1a4)](_0x2da748(0x229));if(_0x39a79c&&_0x39a79c[_0x2da748(0x239)])_0x12e9b2=JSON[_0x2da748(0x1fd)](_0x39a79c[_0x2da748(0x239)]);}catch(_0x38ba04){}let _0x4e9f3c={'default':0x15};try{const _0x344e5b=await _0x2ebc92['getStateAsync']('analysis.energy.warmupTargets');if(_0x344e5b&&_0x344e5b[_0x2da748(0x239)])_0x4e9f3c=JSON[_0x2da748(0x1fd)](_0x344e5b[_0x2da748(0x239)]);}catch(_0x2150ad){}let _0x226907=[];try{const _0x34d695=await _0x2ebc92[_0x2da748(0x1a4)](_0x2da748(0x1cd));if(_0x34d695&&_0x34d695[_0x2da748(0x239)])_0x226907=JSON[_0x2da748(0x1fd)](_0x34d695[_0x2da748(0x239)]);}catch(_0x50def0){}try{const _0x529064=await _0x2ebc92[_0x2da748(0x1f5)](_0x2ebc92[_0x2da748(0x20e)]['calendarInstance']+_0x2da748(0x1e0));if(!_0x529064||!_0x529064['val'])return;const _0x36f8c7=JSON[_0x2da748(0x1fd)](_0x529064[_0x2da748(0x239)]),_0x167e0a=Date[_0x2da748(0x204)](),_0x532dce=_0x2ebc92['config'][_0x2da748(0x200)]||[],_0x5deb94=_0x2ebc92['config'][_0x2da748(0x212)]||[];let _0x3af529=![];for(const _0x1c0f6b of _0x36f8c7){if(_0x1c0f6b[_0x2da748(0x18e)]&&_0x5deb94['length']>0x0&&!_0x5deb94[_0x2da748(0x22f)](_0x1c0f6b['_calName']))continue;const _0x30a09f=_0x1c0f6b[_0x2da748(0x1bd)]||_0x1c0f6b[_0x2da748(0x1ea)]||_0x1c0f6b[_0x2da748(0x1c2)];if(!_0x30a09f)continue;const _0x2d509e=new Date(_0x30a09f);if(isNaN(_0x2d509e['getTime']()))continue;const _0x536b2a=(_0x1c0f6b['event']||_0x1c0f6b['summary']||'')['toLowerCase']();if(_0x536b2a[_0x2da748(0x22f)](_0x2da748(0x1d2))||_0x536b2a['includes']('r√ºckkehr')||_0x536b2a['includes'](_0x2da748(0x18b))){let _0xd2db6=0x0;Object[_0x2da748(0x1a5)](_0x314060)[_0x2da748(0x1fa)](_0x2f4bac=>{if(_0x2f4bac>_0xd2db6)_0xd2db6=_0x2f4bac;});if(_0xd2db6===0x0)_0xd2db6=0x78;const _0x37c29a=_0x2d509e[_0x2da748(0x189)]()-_0xd2db6*0xea60;_0x167e0a>=_0x37c29a&&_0x167e0a<_0x2d509e['getTime']()&&(_0x2ebc92[_0x2da748(0x1e9)]!==_0x2da748(0x21c)&&(_0x2ebc92[_0x2da748(0x1c6)]['info']('üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20'+_0xd2db6+'\x20min).'),await _0x2ebc92['setStateAsync']('system.mode',{'val':_0x2da748(0x21c),'ack':![]})));}for(const _0x445ef3 of _0x532dce){if(_0x445ef3[_0x2da748(0x197)]){const _0x5bf8c0=_0x445ef3[_0x2da748(0x197)][_0x2da748(0x1c4)](),_0x209b91=(_0x445ef3[_0x2da748(0x1a6)]||'')[_0x2da748(0x1c4)]();let _0x1f59b0=_0x536b2a[_0x2da748(0x22f)](_0x5bf8c0);!_0x1f59b0&&_0x209b91[_0x2da748(0x177)]>0x3&&_0x536b2a['includes'](_0x209b91)&&(_0x1f59b0=!![]);if(_0x1f59b0){const _0x593f38=getWarmupRobust(_0x314060,_0x445ef3[_0x2da748(0x197)]),_0x511479=_0x12e9b2[_0x445ef3['location']]||_0x2da748(0x201),_0x1a154e=_0x2d509e[_0x2da748(0x189)]()-_0x593f38*0xea60;if(_0x167e0a>=_0x1a154e&&_0x167e0a<_0x2d509e[_0x2da748(0x189)]()){const _0xe069a8=lastActions['cal_'+_0x445ef3[_0x2da748(0x197)]];if(_0xe069a8&&_0x167e0a-_0xe069a8<CAL_COOLDOWN_MS)continue;const _0x524dae=await findRelatedId(_0x2ebc92,_0x445ef3['id'],_0x2da748(0x1d0));if(_0x524dae){let _0x7f3258=_0x4e9f3c[_0x445ef3['location']];if(_0x7f3258===undefined)_0x7f3258=_0x4e9f3c[_0x2da748(0x219)];if(_0x7f3258===undefined)_0x7f3258=0x15;const _0x5393ad=await _0x2ebc92[_0x2da748(0x1f5)](_0x524dae);if(_0x5393ad&&typeof _0x5393ad[_0x2da748(0x239)]==='number'&&_0x5393ad[_0x2da748(0x239)]<_0x7f3258-0.5){_0x2ebc92[_0x2da748(0x1c6)][_0x2da748(0x1ba)](_0x2da748(0x1b9)+_0x511479+_0x2da748(0x22d)+_0x445ef3['location']+'\x27\x20(Match:\x20'+_0x536b2a+_0x2da748(0x18f)+_0x7f3258+_0x2da748(0x203)+_0x593f38+_0x2da748(0x184)),await _0x2ebc92[_0x2da748(0x20c)](_0x524dae,_0x7f3258),await logAutomationAction(_0x2ebc92,'[CAL]\x20'+_0x445ef3[_0x2da748(0x197)]+_0x2da748(0x1cb)+_0x7f3258+'¬∞C\x20(via\x20'+_0x511479+')'),lastActions[_0x2da748(0x207)+_0x445ef3['location']]=_0x167e0a;const _0x267bb8=_0x226907['findIndex'](_0x45f9b6=>_0x45f9b6['room']===_0x445ef3['location']);if(_0x267bb8!==-0x1)_0x226907[_0x2da748(0x206)](_0x267bb8,0x1);_0x226907[_0x2da748(0x21e)]({'room':_0x445ef3[_0x2da748(0x197)],'target':_0x7f3258,'until':_0x2d509e[_0x2da748(0x189)]()}),_0x3af529=!![];}}}}}}}_0x3af529&&await _0x2ebc92[_0x2da748(0x1c1)](_0x2da748(0x1cd),{'val':JSON[_0x2da748(0x1bf)](_0x226907),'ack':!![]});}catch(_0x42d1be){_0x2ebc92[_0x2da748(0x1c6)][_0x2da748(0x188)](_0x2da748(0x216)+_0x42d1be[_0x2da748(0x1e6)]);}}async function manageMpcIntervention(_0x202be1,_0x3de682,_0x304f08){const _0xbf290d=a1_0x1000c2;try{const _0x3ccf47='analysis.energy.mpcActiveInterventions',_0x5b0fd2=await _0x202be1[_0xbf290d(0x1a4)](_0x3ccf47);let _0x2f66b1=[];if(_0x5b0fd2&&_0x5b0fd2[_0xbf290d(0x239)])try{_0x2f66b1=JSON[_0xbf290d(0x1fd)](_0x5b0fd2[_0xbf290d(0x239)]);}catch(_0x82f813){}const _0x1bd175=_0x2f66b1[_0xbf290d(0x1ad)](_0x3de682);if(_0x304f08===_0xbf290d(0x195))_0x1bd175===-0x1&&(_0x2f66b1['push'](_0x3de682),await _0x202be1[_0xbf290d(0x1c1)](_0x3ccf47,{'val':JSON[_0xbf290d(0x1bf)](_0x2f66b1),'ack':!![]}));else _0x304f08===_0xbf290d(0x17a)&&(_0x1bd175!==-0x1&&(_0x2f66b1[_0xbf290d(0x206)](_0x1bd175,0x1),await _0x202be1[_0xbf290d(0x1c1)](_0x3ccf47,{'val':JSON[_0xbf290d(0x1bf)](_0x2f66b1),'ack':!![]})));}catch(_0xb3e45b){}}async function cleanupGhostInterventions(_0x159e8b){const _0x3b9e8b=a1_0x1000c2;try{const _0x2f8b21='analysis.energy.mpcActiveInterventions',_0x3c64c1=await _0x159e8b['getStateAsync'](_0x2f8b21);if(!_0x3c64c1||!_0x3c64c1[_0x3b9e8b(0x239)])return;const _0x41295e=JSON[_0x3b9e8b(0x1fd)](_0x3c64c1[_0x3b9e8b(0x239)]);if(!Array[_0x3b9e8b(0x19c)](_0x41295e)||_0x41295e[_0x3b9e8b(0x177)]===0x0)return;let _0x43dd41={'default':0x15};try{const _0x1b5e5e=await _0x159e8b['getStateAsync'](_0x3b9e8b(0x1a7));if(_0x1b5e5e&&_0x1b5e5e[_0x3b9e8b(0x239)])_0x43dd41=JSON['parse'](_0x1b5e5e[_0x3b9e8b(0x239)]);}catch(_0x33899d){}let _0x45c527=[];try{const _0x55f0b9=await _0x159e8b[_0x3b9e8b(0x1a4)](_0x3b9e8b(0x1b2));if(_0x55f0b9&&_0x55f0b9[_0x3b9e8b(0x239)])_0x45c527=JSON[_0x3b9e8b(0x1fd)](_0x55f0b9['val']);}catch(_0x11e2f3){}let _0x4396c={},_0x64836b=![];try{const _0x253965=await _0x159e8b[_0x3b9e8b(0x1a4)](_0x3b9e8b(0x1ab));if(_0x253965&&_0x253965[_0x3b9e8b(0x239)])_0x4396c=JSON[_0x3b9e8b(0x1fd)](_0x253965['val']);}catch(_0x10423f){}if(_0x4396c[_0x3b9e8b(0x1c5)]){const _0x2e3e7b=Date[_0x3b9e8b(0x204)]();for(const [_0x587777,_0x33888f]of Object[_0x3b9e8b(0x1ff)](_0x4396c[_0x3b9e8b(0x1c5)])){_0x2e3e7b-_0x33888f>PENALTY_TTL&&(delete _0x4396c[_0x587777],delete _0x4396c[_0x3b9e8b(0x1c5)][_0x587777],_0x64836b=!![],_0x159e8b['log'][_0x3b9e8b(0x1ba)]('üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27'+_0x587777+_0x3b9e8b(0x1de)));}}const _0x12cd4c=_0x159e8b[_0x3b9e8b(0x20e)][_0x3b9e8b(0x200)]||[];let _0x4bd702=![];for(let _0x391d7a=_0x41295e[_0x3b9e8b(0x177)]-0x1;_0x391d7a>=0x0;_0x391d7a--){const _0x31d625=_0x41295e[_0x391d7a],_0x188f45=_0x12cd4c[_0x3b9e8b(0x20f)](_0x5c0839=>normalize(_0x5c0839['location'])===normalize(_0x31d625)&&(_0x5c0839['type']===_0x3b9e8b(0x1b7)||_0x5c0839[_0x3b9e8b(0x196)]===_0x3b9e8b(0x1a9)));if(!_0x188f45){_0x159e8b['log'][_0x3b9e8b(0x188)](_0x3b9e8b(0x233)+_0x31d625+_0x3b9e8b(0x1be)),_0x41295e[_0x3b9e8b(0x206)](_0x391d7a,0x1),_0x4bd702=!![];continue;}if(_0x188f45){const _0x370a42=await findRelatedId(_0x159e8b,_0x188f45['id'],_0x3b9e8b(0x1d0)),_0x5a8ccc=await _0x159e8b[_0x3b9e8b(0x1f5)](_0x188f45['id']);if(_0x370a42){const _0x47c461=await _0x159e8b['getForeignStateAsync'](_0x370a42);if(_0x47c461&&typeof _0x47c461[_0x3b9e8b(0x239)]===_0x3b9e8b(0x1f6)){let _0x5e89a2=![],_0x3af8e0='';Math['abs'](_0x47c461['val']-ECO_TEMP)>0.5&&(_0x5e89a2=!![],_0x3af8e0=_0x3b9e8b(0x1a0));if(!_0x5e89a2&&_0x5a8ccc&&typeof _0x5a8ccc[_0x3b9e8b(0x239)]===_0x3b9e8b(0x1f6)){const _0x3b7c3c=_0x43dd41[_0x31d625]||_0x43dd41['default']||0x15;_0x5a8ccc[_0x3b9e8b(0x239)]<_0x3b7c3c+0.2&&(_0x5e89a2=!![],_0x3af8e0=_0x3b9e8b(0x19b));}if(_0x5e89a2){if(_0x3af8e0===_0x3b9e8b(0x1a0)){_0x159e8b[_0x3b9e8b(0x1c6)][_0x3b9e8b(0x1ba)](_0x3b9e8b(0x193)+_0x31d625+_0x3b9e8b(0x178)+_0x47c461[_0x3b9e8b(0x239)]+_0x3b9e8b(0x202)+ECO_TEMP+_0x3b9e8b(0x223));const _0x368ed4=lastActions[_0x3b9e8b(0x207)+_0x31d625],_0x25facf=_0x368ed4&&Date[_0x3b9e8b(0x204)]()-_0x368ed4<0x2*0x3c*0x3e8;if(!_0x25facf&&_0x47c461[_0x3b9e8b(0x239)]>ECO_TEMP+0.5){_0x159e8b[_0x3b9e8b(0x225)]&&(_0x159e8b[_0x3b9e8b(0x1c6)][_0x3b9e8b(0x1ba)]('üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20'+_0x31d625+_0x3b9e8b(0x1e2)),_0x159e8b['sendToPythonWrapper'](_0x3b9e8b(0x238),{'room':_0x31d625}));const _0x430ca8=_0x31d625+'_'+new Date()[_0x3b9e8b(0x1da)]();if(!_0x4396c[_0x430ca8]){_0x4396c[_0x430ca8]=0x1;if(!_0x4396c[_0x3b9e8b(0x1c5)])_0x4396c[_0x3b9e8b(0x1c5)]={};_0x4396c[_0x3b9e8b(0x1c5)][_0x430ca8]=Date[_0x3b9e8b(0x204)](),_0x64836b=!![];}}else _0x25facf&&_0x159e8b[_0x3b9e8b(0x1c6)][_0x3b9e8b(0x1ba)]('üìÖ\x20[MPC\x20INFO]\x20'+_0x31d625+'\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.');}else{if(_0x3af8e0==='too_cold'){let _0x1612e8=![];if(_0x45c527[_0x3b9e8b(0x20f)](_0x288b7d=>_0x288b7d[_0x3b9e8b(0x21b)]===_0x31d625))_0x1612e8=!![];const _0x4177ab=_0x12cd4c[_0x3b9e8b(0x176)](_0x1efe3c=>normalize(_0x1efe3c[_0x3b9e8b(0x197)])===normalize(_0x31d625)&&(_0x1efe3c[_0x3b9e8b(0x196)]==='window'||_0x1efe3c['type']===_0x3b9e8b(0x180)||_0x1efe3c[_0x3b9e8b(0x196)]===_0x3b9e8b(0x1c7)));for(const _0x35d115 of _0x4177ab){try{const _0x2241d3=await _0x159e8b[_0x3b9e8b(0x1f5)](_0x35d115['id']);if(_0x2241d3&&(_0x2241d3[_0x3b9e8b(0x239)]===!![]||_0x2241d3[_0x3b9e8b(0x239)]===0x1||String(_0x2241d3[_0x3b9e8b(0x239)])['toLowerCase']()===_0x3b9e8b(0x220)))_0x1612e8=!![];}catch(_0x43c0f6){}}if(_0x1612e8)_0x159e8b['log'][_0x3b9e8b(0x1ba)]('üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20'+_0x31d625+_0x3b9e8b(0x1b6));else{const _0x37c3f4=_0x43dd41[_0x31d625]||_0x43dd41[_0x3b9e8b(0x219)]||0x15;_0x159e8b['log'][_0x3b9e8b(0x1ba)](_0x3b9e8b(0x230)+_0x31d625+_0x3b9e8b(0x1bc)+_0x5a8ccc['val']+_0x3b9e8b(0x1d6)+(_0x37c3f4+0.2)+_0x3b9e8b(0x217)),await _0x159e8b[_0x3b9e8b(0x20c)](_0x370a42,_0x37c3f4),await logAutomationAction(_0x159e8b,_0x3b9e8b(0x1d9)+_0x31d625+_0x3b9e8b(0x1cf)+_0x37c3f4+'¬∞C'),lastActions['rescue_'+_0x31d625]=Date[_0x3b9e8b(0x204)]();}}}_0x41295e[_0x3b9e8b(0x206)](_0x391d7a,0x1),_0x4bd702=!![];}}}}}_0x4bd702&&await _0x159e8b[_0x3b9e8b(0x1c1)](_0x2f8b21,{'val':JSON[_0x3b9e8b(0x1bf)](_0x41295e),'ack':!![]}),_0x64836b&&await _0x159e8b[_0x3b9e8b(0x1c1)](_0x3b9e8b(0x1ab),{'val':JSON['stringify'](_0x4396c),'ack':!![]});}catch(_0x54065f){}}async function applyEnergySavings(_0x21cfbf,_0x2c490a){const _0x48011a=a1_0x1000c2;await cleanupGhostInterventions(_0x21cfbf);if(!_0x2c490a||_0x2c490a[_0x48011a(0x177)]===0x0)return;const _0x3918a4=_0x21cfbf[_0x48011a(0x20e)]['devices']||[],_0x31093d=Date[_0x48011a(0x204)]();for(const _0x128e78 of _0x2c490a){const _0x3cf420=_0x128e78[_0x48011a(0x21b)],_0xbdf6a3=_0x128e78[_0x48011a(0x1e8)],_0x2236c0=_0x128e78['target']||0x15;if(lastActions[_0x48011a(0x218)+_0x3cf420]&&_0x31093d-lastActions[_0x48011a(0x218)+_0x3cf420]<RESCUE_LOCK_MS)continue;const _0x417d96=_0x3918a4[_0x48011a(0x20f)](_0x3c6f7b=>normalize(_0x3c6f7b[_0x48011a(0x197)])===normalize(_0x3cf420)&&(_0x3c6f7b[_0x48011a(0x196)]===_0x48011a(0x1b7)||_0x3c6f7b['type']===_0x48011a(0x1a9)));if(!_0x417d96)continue;const _0x56aca1=await findRelatedId(_0x21cfbf,_0x417d96['id'],_0x48011a(0x1d0));if(_0x56aca1){if(lastActions[_0x48011a(0x1a1)+_0x3cf420]&&_0x31093d-lastActions['mpc_'+_0x3cf420]<0x1e*0x3c*0x3e8)continue;const _0x88141e=await _0x21cfbf['getForeignStateAsync'](_0x56aca1);if(_0x88141e&&typeof _0x88141e['val']===_0x48011a(0x1f6)){const _0x15c840=_0x88141e[_0x48011a(0x239)];_0x15c840!==ECO_TEMP&&await manageMpcIntervention(_0x21cfbf,_0x3cf420,_0x48011a(0x17a));if(_0xbdf6a3>0x1e)_0x15c840>ECO_TEMP+0.5&&(_0x21cfbf[_0x48011a(0x1c6)][_0x48011a(0x1ba)]('üçÉ\x20[MPC\x20ACTION]\x20Senke\x20'+_0x3cf420+_0x48011a(0x198)+ECO_TEMP+_0x48011a(0x17b)+_0xbdf6a3+_0x48011a(0x187)),await _0x21cfbf[_0x48011a(0x20c)](_0x56aca1,ECO_TEMP),await manageMpcIntervention(_0x21cfbf,_0x3cf420,'add'),lastActions[_0x48011a(0x1a1)+_0x3cf420]=_0x31093d,await logAutomationAction(_0x21cfbf,'[MPC]\x20'+_0x3cf420+_0x48011a(0x19d)+ECO_TEMP+'¬∞C'));else _0xbdf6a3<=0xf&&(_0x15c840<_0x2236c0&&(_0x21cfbf[_0x48011a(0x1c6)][_0x48011a(0x1ba)](_0x48011a(0x1e3)+_0x3cf420+_0x48011a(0x1b0)+_0x2236c0+_0x48011a(0x226)),await _0x21cfbf[_0x48011a(0x20c)](_0x56aca1,_0x2236c0),await manageMpcIntervention(_0x21cfbf,_0x3cf420,_0x48011a(0x17a)),lastActions['mpc_'+_0x3cf420]=_0x31093d,await logAutomationAction(_0x21cfbf,_0x48011a(0x1dc)+_0x3cf420+_0x48011a(0x17d)+_0x2236c0+'¬∞C')));}}else _0x21cfbf['log'][_0x48011a(0x188)](_0x48011a(0x1a3)+_0x3cf420+_0x48011a(0x191));}}module['exports']={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};