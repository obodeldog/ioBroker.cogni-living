const a1_0xb3717d=a1_0x427d;function a1_0x1203(){const _0x2a1a6a=['analysis.automation.confidenceThreshold','dimmer','getStateAsync','log','4442924IeANvw','consultButler','getForeignStateAsync','186dIxNJG','name','ðŸ‘€\x20SIMULATION:\x20','constructor','âš¡\x20ACTION:\x20','1188360IBBIWS','search','Unknown','1609628tgrGpF','3IOKafd','5283783GayVSK','setStateAsync','7tdwCRY','light','\x20->\x20','replace','active','ðŸ¤–\x20Butler\x20Blocked:\x20','2484776sBCWzd','10387032OrqosL','simulate','apply','switch','debug','155435EqtNUq','analysis.automation.mode','setForeignStateAsync','find','approved','trim','info','[BLOCKED]\x20','PrÃ¤diktion:\x20','off','./ai_agent','type','\x27\x20(norm:\x20\x27','\x27),\x20but\x20found\x20no\x20matching\x20light\x20device.','config','analysis.automation.lastAction','(((.+)+)+)+$','val','\x20->\x20Schalte\x20','toString','reason','exports'];a1_0x1203=function(){return _0x2a1a6a;};return a1_0x1203();}(function(_0x294df1,_0x3638fb){const _0x33f3d4=a1_0x427d,_0x7933d3=_0x294df1();while(!![]){try{const _0x3052dd=parseInt(_0x33f3d4(0x1f0))/0x1+-parseInt(_0x33f3d4(0x1fa))/0x2*(parseInt(_0x33f3d4(0x1f1))/0x3)+-parseInt(_0x33f3d4(0x21a))/0x4+-parseInt(_0x33f3d4(0x200))/0x5*(-parseInt(_0x33f3d4(0x21d))/0x6)+-parseInt(_0x33f3d4(0x1f4))/0x7*(-parseInt(_0x33f3d4(0x1fb))/0x8)+-parseInt(_0x33f3d4(0x1f2))/0x9+-parseInt(_0x33f3d4(0x1ed))/0xa;if(_0x3052dd===_0x3638fb)break;else _0x7933d3['push'](_0x7933d3['shift']());}catch(_0x3a72ce){_0x7933d3['push'](_0x7933d3['shift']());}}}(a1_0x1203,0xc6676));const a1_0x4c4482=(function(){let _0x4343af=!![];return function(_0x23271a,_0xd575c7){const _0x3b236d=_0x4343af?function(){const _0x181b1e=a1_0x427d;if(_0xd575c7){const _0x4b8b38=_0xd575c7[_0x181b1e(0x1fd)](_0x23271a,arguments);return _0xd575c7=null,_0x4b8b38;}}:function(){};return _0x4343af=![],_0x3b236d;};}()),a1_0x138250=a1_0x4c4482(this,function(){const _0xc27e29=a1_0x427d;return a1_0x138250['toString']()[_0xc27e29(0x1ee)](_0xc27e29(0x210))[_0xc27e29(0x213)]()[_0xc27e29(0x220)](a1_0x138250)['search'](_0xc27e29(0x210));});a1_0x138250();function a1_0x427d(_0x59a3ac,_0xad7cd5){const _0x37b955=a1_0x1203();return a1_0x427d=function(_0x138250,_0x4c4482){_0x138250=_0x138250-0x1ec;let _0x120389=_0x37b955[_0x138250];return _0x120389;},a1_0x427d(_0x59a3ac,_0xad7cd5);}'use strict';const aiAgent=require(a1_0xb3717d(0x20a)),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function normalize(_0x252ca6){const _0x5aeb49=a1_0xb3717d;if(!_0x252ca6)return'';return _0x252ca6['toLowerCase']()[_0x5aeb49(0x1f7)](/\s+/g,'')[_0x5aeb49(0x205)]();}async function handlePrediction(_0x1b05dd,_0xae3c69,_0x4d1e83){const _0x415b7d=a1_0xb3717d;if(!_0xae3c69||_0xae3c69===_0x415b7d(0x1ef))return;let _0x3a7703='off',_0x16079f=0.6;try{const _0x5067f6=await _0x1b05dd[_0x415b7d(0x218)](_0x415b7d(0x201));if(_0x5067f6&&_0x5067f6[_0x415b7d(0x211)])_0x3a7703=_0x5067f6['val'];const _0x18b294=await _0x1b05dd[_0x415b7d(0x218)](_0x415b7d(0x216));if(_0x18b294&&_0x18b294['val'])_0x16079f=_0x18b294['val'];}catch(_0x502652){}if(_0x3a7703===_0x415b7d(0x209))return;if(_0x4d1e83<_0x16079f)return;const _0x2812a2=Date['now']();if(lastActions[_0xae3c69]&&_0x2812a2-lastActions[_0xae3c69]<COOLDOWN_MS)return;const _0x2d0848=_0x1b05dd[_0x415b7d(0x20e)]['devices']||[],_0x51d499=normalize(_0xae3c69),_0x4799e1=_0x2d0848[_0x415b7d(0x203)](_0x1b7570=>{const _0x39a6a8=_0x415b7d;return normalize(_0x1b7570['location'])===_0x51d499&&(_0x1b7570[_0x39a6a8(0x20b)]===_0x39a6a8(0x1f5)||_0x1b7570[_0x39a6a8(0x20b)]===_0x39a6a8(0x217)||_0x1b7570[_0x39a6a8(0x20b)]===_0x39a6a8(0x1fe));});if(!_0x4799e1){const _0x48504a='ðŸ”\x20Device-Search\x20failed:\x20Predicted\x20\x27'+_0xae3c69+_0x415b7d(0x20c)+_0x51d499+_0x415b7d(0x20d);_0x1b05dd['log'][_0x415b7d(0x1ff)](_0x48504a);return;}const _0x3864e4=await aiAgent[_0x415b7d(0x21b)](_0x1b05dd,_0xae3c69,_0x4799e1[_0x415b7d(0x21e)],_0x4d1e83);if(!_0x3864e4[_0x415b7d(0x204)]){_0x1b05dd[_0x415b7d(0x219)][_0x415b7d(0x1ff)](_0x415b7d(0x1f9)+_0xae3c69+_0x415b7d(0x1f6)+_0x3864e4[_0x415b7d(0x214)]),await _0x1b05dd[_0x415b7d(0x1f3)](_0x415b7d(0x20f),{'val':_0x415b7d(0x207)+_0x3864e4[_0x415b7d(0x214)],'ack':!![]});return;}const _0xea063a=_0x415b7d(0x208)+_0xae3c69+_0x415b7d(0x212)+_0x4799e1[_0x415b7d(0x21e)]+'\x20('+_0x3864e4['reason']+')';await _0x1b05dd[_0x415b7d(0x1f3)]('analysis.automation.lastAction',{'val':'['+_0x3a7703['toUpperCase']()+']\x20'+_0xea063a,'ack':!![]});if(_0x3a7703===_0x415b7d(0x1fc))_0x1b05dd['log'][_0x415b7d(0x206)](_0x415b7d(0x21f)+_0xea063a);else{if(_0x3a7703===_0x415b7d(0x1f8)){_0x1b05dd[_0x415b7d(0x219)]['info'](_0x415b7d(0x1ec)+_0xea063a);const _0x35d35e=await _0x1b05dd[_0x415b7d(0x21c)](_0x4799e1['id']);if(_0x35d35e&&(_0x35d35e[_0x415b7d(0x211)]===!![]||_0x35d35e[_0x415b7d(0x211)]>0x0)){}else await _0x1b05dd[_0x415b7d(0x202)](_0x4799e1['id'],!![]);lastActions[_0xae3c69]=_0x2812a2;}}}module[a1_0xb3717d(0x215)]={'handlePrediction':handlePrediction};