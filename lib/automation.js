(function(_0x101aa2,_0x5f44af){const _0x481f87=a1_0x2380,_0x260975=_0x101aa2();while(!![]){try{const _0x489938=-parseInt(_0x481f87(0xbe))/0x1*(-parseInt(_0x481f87(0xba))/0x2)+parseInt(_0x481f87(0xa9))/0x3*(parseInt(_0x481f87(0xb7))/0x4)+parseInt(_0x481f87(0xbd))/0x5+parseInt(_0x481f87(0xc1))/0x6+parseInt(_0x481f87(0xc5))/0x7+parseInt(_0x481f87(0xa4))/0x8+-parseInt(_0x481f87(0xb1))/0x9*(parseInt(_0x481f87(0xa5))/0xa);if(_0x489938===_0x5f44af)break;else _0x260975['push'](_0x260975['shift']());}catch(_0x12be41){_0x260975['push'](_0x260975['shift']());}}}(a1_0x33c5,0x555cb));function a1_0x2380(_0x3fe446,_0x141e68){const _0xaa1d53=a1_0x33c5();return a1_0x2380=function(_0x5d6b2c,_0x508387){_0x5d6b2c=_0x5d6b2c-0x9a;let _0x33c52e=_0xaa1d53[_0x5d6b2c];return _0x33c52e;},a1_0x2380(_0x3fe446,_0x141e68);}const a1_0x508387=(function(){let _0x2e84d2=!![];return function(_0x47b808,_0x433da9){const _0xfc38f9=_0x2e84d2?function(){if(_0x433da9){const _0x24cc2c=_0x433da9['apply'](_0x47b808,arguments);return _0x433da9=null,_0x24cc2c;}}:function(){};return _0x2e84d2=![],_0xfc38f9;};}()),a1_0x5d6b2c=a1_0x508387(this,function(){const _0x4226f=a1_0x2380;return a1_0x5d6b2c[_0x4226f(0xaa)]()[_0x4226f(0xad)]('(((.+)+)+)+$')[_0x4226f(0xaa)]()[_0x4226f(0xb8)](a1_0x5d6b2c)[_0x4226f(0xad)](_0x4226f(0xa2));});a1_0x5d6b2c();function a1_0x33c5(){const _0x3ea083=['3863839QMEiQH','active','info','now','\x20->\x20','type','ðŸ”\x20Device-Search\x20failed:\x20Predicted\x20\x27','simulate','ðŸ¤–\x20Butler\x20Blocked:\x20','\x27),\x20but\x20found\x20no\x20matching\x20light\x20device.','location','(((.+)+)+)+$','\x20->\x20Schalte\x20','2827288lmCooK','22513980phDwwy','val','replace','[BLOCKED]\x20','1815357jfZVuF','toString','find','analysis.automation.mode','search','getStateAsync','setStateAsync','PrÃ¤diktion:\x20','9hyggff','setForeignStateAsync','log','reason','toLowerCase','name','4NHQNJd','constructor','dimmer','6382COzsrG','Unknown','debug','2620550ijTMMw','5uwpRjV','switch','off','3302814sGLLbb','âš¡\x20ACTION:\x20','ðŸ‘€\x20SIMULATION:\x20','consultButler'];a1_0x33c5=function(){return _0x3ea083;};return a1_0x33c5();}'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function normalize(_0x4f9d71){const _0x35101b=a1_0x2380;if(!_0x4f9d71)return'';return _0x4f9d71[_0x35101b(0xb5)]()[_0x35101b(0xa7)](/\s+/g,'')['trim']();}async function handlePrediction(_0x27dc4a,_0xd20bff,_0x285b1d){const _0xf7a59a=a1_0x2380;if(!_0xd20bff||_0xd20bff===_0xf7a59a(0xbb))return;let _0x243462=_0xf7a59a(0xc0),_0x30dd4a=0.6;try{const _0x1ae50a=await _0x27dc4a[_0xf7a59a(0xae)](_0xf7a59a(0xac));if(_0x1ae50a&&_0x1ae50a[_0xf7a59a(0xa6)])_0x243462=_0x1ae50a['val'];const _0x4a0cf7=await _0x27dc4a['getStateAsync']('analysis.automation.confidenceThreshold');if(_0x4a0cf7&&_0x4a0cf7['val'])_0x30dd4a=_0x4a0cf7['val'];}catch(_0x14dc1c){}if(_0x243462==='off')return;if(_0x285b1d<_0x30dd4a)return;const _0xf2c80c=Date[_0xf7a59a(0x9a)]();if(lastActions[_0xd20bff]&&_0xf2c80c-lastActions[_0xd20bff]<COOLDOWN_MS)return;const _0x1039f0=_0x27dc4a['config']['devices']||[],_0xe5d67b=normalize(_0xd20bff),_0xaf2cf4=_0x1039f0[_0xf7a59a(0xab)](_0x291054=>{const _0x19c2ee=_0xf7a59a;return normalize(_0x291054[_0x19c2ee(0xa1)])===_0xe5d67b&&(_0x291054['type']==='light'||_0x291054[_0x19c2ee(0x9c)]===_0x19c2ee(0xb9)||_0x291054[_0x19c2ee(0x9c)]===_0x19c2ee(0xbf));});if(!_0xaf2cf4){const _0x26fce2=_0xf7a59a(0x9d)+_0xd20bff+'\x27\x20(norm:\x20\x27'+_0xe5d67b+_0xf7a59a(0xa0);_0x27dc4a[_0xf7a59a(0xb3)][_0xf7a59a(0xbc)](_0x26fce2);return;}const _0x7289f2=await aiAgent[_0xf7a59a(0xc4)](_0x27dc4a,_0xd20bff,_0xaf2cf4[_0xf7a59a(0xb6)],_0x285b1d);if(!_0x7289f2['approved']){_0x27dc4a[_0xf7a59a(0xb3)][_0xf7a59a(0xbc)](_0xf7a59a(0x9f)+_0xd20bff+_0xf7a59a(0x9b)+_0x7289f2[_0xf7a59a(0xb4)]),await _0x27dc4a[_0xf7a59a(0xaf)]('analysis.automation.lastAction',{'val':_0xf7a59a(0xa8)+_0x7289f2[_0xf7a59a(0xb4)],'ack':!![]});return;}const _0x595ab7=_0xf7a59a(0xb0)+_0xd20bff+_0xf7a59a(0xa3)+_0xaf2cf4[_0xf7a59a(0xb6)]+'\x20('+_0x7289f2[_0xf7a59a(0xb4)]+')';await _0x27dc4a[_0xf7a59a(0xaf)]('analysis.automation.lastAction',{'val':'['+_0x243462['toUpperCase']()+']\x20'+_0x595ab7,'ack':!![]});if(_0x243462===_0xf7a59a(0x9e))_0x27dc4a['log']['info'](_0xf7a59a(0xc3)+_0x595ab7);else{if(_0x243462===_0xf7a59a(0xc6)){_0x27dc4a['log'][_0xf7a59a(0xc7)](_0xf7a59a(0xc2)+_0x595ab7);const _0x69264a=await _0x27dc4a['getForeignStateAsync'](_0xaf2cf4['id']);if(_0x69264a&&(_0x69264a[_0xf7a59a(0xa6)]===!![]||_0x69264a['val']>0x0)){}else await _0x27dc4a[_0xf7a59a(0xb2)](_0xaf2cf4['id'],!![]);lastActions[_0xd20bff]=_0xf2c80c;}}}module['exports']={'handlePrediction':handlePrediction};