const a1_0x2e8b5a=a1_0x1dd2;(function(_0x77d026,_0x23c0a1){const _0x288666=a1_0x1dd2,_0x1834a9=_0x77d026();while(!![]){try{const _0x4f2d67=-parseInt(_0x288666(0x269))/0x1+-parseInt(_0x288666(0x270))/0x2*(-parseInt(_0x288666(0x1e6))/0x3)+-parseInt(_0x288666(0x1bd))/0x4*(-parseInt(_0x288666(0x259))/0x5)+-parseInt(_0x288666(0x1d6))/0x6*(-parseInt(_0x288666(0x21a))/0x7)+parseInt(_0x288666(0x267))/0x8+-parseInt(_0x288666(0x248))/0x9+-parseInt(_0x288666(0x230))/0xa;if(_0x4f2d67===_0x23c0a1)break;else _0x1834a9['push'](_0x1834a9['shift']());}catch(_0x20f932){_0x1834a9['push'](_0x1834a9['shift']());}}}(a1_0x46b3,0x741ee));const a1_0x17ca6b=(function(){let _0x3535c2=!![];return function(_0x241219,_0x480671){const _0x5046ca=_0x3535c2?function(){if(_0x480671){const _0x3c2943=_0x480671['apply'](_0x241219,arguments);return _0x480671=null,_0x3c2943;}}:function(){};return _0x3535c2=![],_0x5046ca;};}()),a1_0x36e32c=a1_0x17ca6b(this,function(){const _0x1ade6a=a1_0x1dd2;return a1_0x36e32c[_0x1ade6a(0x241)]()[_0x1ade6a(0x265)](_0x1ade6a(0x242))[_0x1ade6a(0x241)]()['constructor'](a1_0x36e32c)['search'](_0x1ade6a(0x242));});a1_0x36e32c();'use strict';const aiAgent=require(a1_0x2e8b5a(0x1b9)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x38ad54){const _0x477c29=a1_0x2e8b5a;if(!_0x38ad54)return'';return _0x38ad54['toLowerCase']()[_0x477c29(0x1bb)](/\s+/g,'')[_0x477c29(0x236)]();}function getWarmupRobust(_0x5b5135,_0x2f1953){const _0x4fac67=a1_0x2e8b5a;if(!_0x5b5135||!_0x2f1953)return 0x3c;if(_0x5b5135[_0x2f1953]!==undefined)return _0x5b5135[_0x2f1953];const _0x5073bc=_0x2f1953['toLowerCase']()[_0x4fac67(0x1bb)](/Ã¤/g,'ae')[_0x4fac67(0x1bb)](/Ã¶/g,'oe')[_0x4fac67(0x1bb)](/Ã¼/g,'ue')['replace'](/ÃŸ/g,'ss')['replace'](/\s+/g,'_')[_0x4fac67(0x1bb)](/[^a-z0-9_]/g,'');if(_0x5b5135[_0x5073bc]!==undefined)return _0x5b5135[_0x5073bc];return 0x3c;}async function logAutomationAction(_0x108f1c,_0x29e49b){const _0x504619=a1_0x2e8b5a;await _0x108f1c[_0x504619(0x214)](_0x504619(0x20a),{'val':_0x29e49b,'ack':!![]});try{const _0x709fb=_0x504619(0x1da),_0x4d7236=await _0x108f1c[_0x504619(0x1ed)](_0x709fb);let _0x58cd88=[];if(_0x4d7236&&_0x4d7236[_0x504619(0x1e3)])try{_0x58cd88=JSON[_0x504619(0x213)](_0x4d7236[_0x504619(0x1e3)]);}catch(_0x249f26){}_0x58cd88[_0x504619(0x245)]({'ts':Date['now'](),'msg':_0x29e49b});if(_0x58cd88[_0x504619(0x237)]>0x32)_0x58cd88=_0x58cd88[_0x504619(0x25a)](0x0,0x32);await _0x108f1c[_0x504619(0x214)](_0x709fb,{'val':JSON[_0x504619(0x1d7)](_0x58cd88),'ack':!![]});}catch(_0x55ac5a){}}async function handlePrediction(_0x2e644d,_0x5c73ee,_0x24c0e7){const _0x2c61c8=a1_0x2e8b5a;if(!_0x5c73ee||_0x5c73ee===_0x2c61c8(0x1d9))return;let _0x8f4881=_0x2c61c8(0x1bf),_0x13bef1=0.6;try{const _0xb678c5=await _0x2e644d[_0x2c61c8(0x1ed)](_0x2c61c8(0x1e5));if(_0xb678c5&&_0xb678c5[_0x2c61c8(0x1e3)])_0x8f4881=_0xb678c5[_0x2c61c8(0x1e3)];const _0x39e6ee=await _0x2e644d['getStateAsync'](_0x2c61c8(0x1fc));if(_0x39e6ee&&_0x39e6ee[_0x2c61c8(0x1e3)])_0x13bef1=_0x39e6ee[_0x2c61c8(0x1e3)];}catch(_0x289130){}if(_0x8f4881===_0x2c61c8(0x1bf)||_0x24c0e7<_0x13bef1)return;const _0x2a0236=Date[_0x2c61c8(0x1f5)]();if(lastActions[_0x5c73ee]&&_0x2a0236-lastActions[_0x5c73ee]<COOLDOWN_MS)return;const _0x5b5d5f=_0x2e644d[_0x2c61c8(0x24d)][_0x2c61c8(0x25d)]||[],_0x3f96c5=normalize(_0x5c73ee),_0x26166f=_0x5b5d5f[_0x2c61c8(0x1e9)](_0x111dff=>normalize(_0x111dff['location'])===_0x3f96c5&&(_0x111dff[_0x2c61c8(0x252)]===_0x2c61c8(0x1f0)||_0x111dff[_0x2c61c8(0x252)]===_0x2c61c8(0x243)||_0x111dff[_0x2c61c8(0x252)]===_0x2c61c8(0x1e4)));if(!_0x26166f)return;const _0x200313=await aiAgent[_0x2c61c8(0x264)](_0x2e644d,_0x5c73ee,_0x26166f[_0x2c61c8(0x1ca)],_0x24c0e7);if(!_0x200313[_0x2c61c8(0x233)])return;const _0x5f50cf='PrÃ¤diktion:\x20'+_0x5c73ee+_0x2c61c8(0x23e)+_0x26166f['name']+'\x20('+_0x200313[_0x2c61c8(0x207)]+')';await logAutomationAction(_0x2e644d,'['+_0x8f4881[_0x2c61c8(0x1b4)]()+']\x20'+_0x5f50cf);if(_0x8f4881===_0x2c61c8(0x209)){const _0x5ebdf7=await _0x2e644d[_0x2c61c8(0x1e1)](_0x26166f['id']);(!_0x5ebdf7||!_0x5ebdf7[_0x2c61c8(0x1e3)]&&_0x5ebdf7[_0x2c61c8(0x1e3)]!==!![])&&await _0x2e644d[_0x2c61c8(0x1eb)](_0x26166f['id'],!![]),lastActions[_0x5c73ee]=_0x2a0236;}}async function findRelatedId(_0x17013c,_0x1fbc91,_0x2289e3=a1_0x2e8b5a(0x212)){const _0x346bbe=a1_0x2e8b5a;if(_0x2289e3===_0x346bbe(0x212)&&_0x17013c['config']['thermostatMapping']){let _0x12dab0=_0x17013c[_0x346bbe(0x24d)][_0x346bbe(0x23a)];if(typeof _0x12dab0===_0x346bbe(0x263))try{_0x12dab0=JSON[_0x346bbe(0x213)](_0x12dab0);}catch(_0x54f3d9){}if(_0x12dab0&&_0x12dab0[_0x1fbc91])return _0x12dab0[_0x1fbc91];}if(_0x2289e3===_0x346bbe(0x22a)&&_0x17013c[_0x346bbe(0x24d)][_0x346bbe(0x1d8)]){let _0x2e0aa0=_0x17013c[_0x346bbe(0x24d)][_0x346bbe(0x1d8)];if(typeof _0x2e0aa0===_0x346bbe(0x263))try{_0x2e0aa0=JSON[_0x346bbe(0x213)](_0x2e0aa0);}catch(_0x22e518){}if(_0x2e0aa0&&_0x2e0aa0[_0x1fbc91])return _0x2e0aa0[_0x1fbc91];}let _0x407e66=[];if(_0x2289e3===_0x346bbe(0x212))_0x407e66=[{'s':'.1.ACTUAL_TEMPERATURE','t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x346bbe(0x222),'t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x346bbe(0x222),'t':_0x346bbe(0x254)},{'s':_0x346bbe(0x21f),'t':'SET_POINT_TEMPERATURE'},{'s':_0x346bbe(0x1fe),'t':_0x346bbe(0x228)},{'s':_0x346bbe(0x1fe),'t':_0x346bbe(0x1e0)},{'s':'temperature','t':_0x346bbe(0x1cc)},{'s':_0x346bbe(0x21d),'t':'SET'},{'s':'Ist','t':_0x346bbe(0x232)},{'s':_0x346bbe(0x25c),'t':_0x346bbe(0x212)}];else _0x2289e3==='valve'&&(_0x407e66=[{'s':'.1.ACTUAL_TEMPERATURE','t':_0x346bbe(0x226)},{'s':'.1.TEMPERATURE','t':'.1.LEVEL'},{'s':'.1.TEMPERATURE','t':_0x346bbe(0x1fb)},{'s':_0x346bbe(0x1fe),'t':'pi_heating_demand'},{'s':_0x346bbe(0x25c),'t':_0x346bbe(0x25b)},{'s':'temperature','t':_0x346bbe(0x1dd)}]);for(const _0x1d0514 of _0x407e66){if(_0x1fbc91[_0x346bbe(0x271)](_0x1d0514['s'])){const _0x20f1b2=_0x1fbc91[_0x346bbe(0x1bb)](_0x1d0514['s'],_0x1d0514['t']),_0x36c7bc=await _0x17013c[_0x346bbe(0x250)](_0x20f1b2);if(_0x36c7bc)return _0x20f1b2;}}try{const _0x4aef0c=_0x1fbc91[_0x346bbe(0x1cb)]('.');if(_0x4aef0c['length']>0x2){const _0x49b96c=_0x4aef0c[_0x346bbe(0x25a)](0x0,-0x1)['join']('.'),_0x585199=await _0x17013c['getForeignObjectsAsync'](_0x49b96c+'.*'),_0xeee62=[],_0x1e3869=_0x1fbc91[_0x346bbe(0x1cb)](/[._]+/)[_0x346bbe(0x1ce)](_0x3c3345=>!['openknx','0',_0x346bbe(0x244),_0x346bbe(0x21b),'wert',_0x346bbe(0x25c),_0x346bbe(0x23c),'sensor','messwert',_0x346bbe(0x1be)][_0x346bbe(0x271)](_0x3c3345[_0x346bbe(0x1f2)]()));for(const [_0x1915cc,_0xfdd0e0]of Object[_0x346bbe(0x26c)](_0x585199)){if(_0x1915cc===_0x1fbc91)continue;if(_0xfdd0e0&&_0xfdd0e0[_0x346bbe(0x235)]){const _0x17095d=_0x1915cc['toLowerCase'](),_0x25ec3b=(_0xfdd0e0[_0x346bbe(0x235)]['role']||'')[_0x346bbe(0x1f2)](),_0x4bfb22=(_0xfdd0e0['common'][_0x346bbe(0x225)]||'')['toLowerCase']();let _0x2b3fbe=![];if(_0x2289e3===_0x346bbe(0x212)&&_0xfdd0e0[_0x346bbe(0x235)]['write']===!![])_0x2b3fbe=_0x17095d[_0x346bbe(0x271)]('set')||_0x17095d[_0x346bbe(0x271)](_0x346bbe(0x1c1))||_0x17095d[_0x346bbe(0x271)](_0x346bbe(0x220))||_0x25ec3b[_0x346bbe(0x271)](_0x346bbe(0x1f7))||_0x25ec3b[_0x346bbe(0x271)](_0x346bbe(0x229));else _0x2289e3===_0x346bbe(0x22a)&&(_0x2b3fbe=_0x17095d['includes'](_0x346bbe(0x1dd))||_0x17095d[_0x346bbe(0x271)](_0x346bbe(0x22a))||_0x17095d['includes'](_0x346bbe(0x1e2))||_0x17095d[_0x346bbe(0x271)](_0x346bbe(0x1d3))||_0x25ec3b[_0x346bbe(0x271)](_0x346bbe(0x1fa))||_0x25ec3b[_0x346bbe(0x271)](_0x346bbe(0x22e))||_0x4bfb22[_0x346bbe(0x271)]('%'));if(_0x2b3fbe){const _0x16ef87=_0x1915cc['split'](/[._]+/)['map'](_0x49c1b3=>_0x49c1b3['toLowerCase']());let _0x129fbf=0x0;_0x1e3869[_0x346bbe(0x24a)](_0x4b9fd4=>{const _0xd59331=_0x346bbe;if(_0x16ef87[_0xd59331(0x271)](_0x4b9fd4[_0xd59331(0x1f2)]()))_0x129fbf++;}),_0xeee62[_0x346bbe(0x23d)]({'id':_0x1915cc,'score':_0x129fbf});}}}if(_0xeee62[_0x346bbe(0x237)]>0x0){_0xeee62[_0x346bbe(0x26e)]((_0x338bdc,_0x3a402d)=>_0x3a402d[_0x346bbe(0x1c8)]-_0x338bdc['score']);if(_0xeee62[0x0][_0x346bbe(0x1c8)]>0x0)return _0xeee62[0x0]['id'];}}}catch(_0x14c5e7){}return null;}async function scanThermostats(_0x465a98){const _0x3c701f=a1_0x2e8b5a,_0x55f6e5=_0x465a98['config'][_0x3c701f(0x25d)]||[],_0x35f38e=[],_0xc9a1dc=_0x55f6e5[_0x3c701f(0x1ce)](_0xabbd09=>_0xabbd09['id']&&_0xabbd09['id'][_0x3c701f(0x271)](_0x3c701f(0x25c))||_0xabbd09[_0x3c701f(0x252)]&&[_0x3c701f(0x25c),_0x3c701f(0x238),_0x3c701f(0x20d)][_0x3c701f(0x271)](_0xabbd09[_0x3c701f(0x252)])||_0xabbd09[_0x3c701f(0x1ca)]&&_0xabbd09[_0x3c701f(0x1ca)]['toLowerCase']()[_0x3c701f(0x271)](_0x3c701f(0x1ba)));for(const _0x4ef2a8 of _0xc9a1dc){const _0x413c2c=await findRelatedId(_0x465a98,_0x4ef2a8['id'],_0x3c701f(0x212)),_0x437b89=await findRelatedId(_0x465a98,_0x4ef2a8['id'],_0x3c701f(0x22a));let _0x5a2375=_0x3c701f(0x1db),_0x3f32ee=![],_0x514e99=_0x465a98[_0x3c701f(0x24d)][_0x3c701f(0x23a)]||{};if(typeof _0x514e99==='string')try{_0x514e99=JSON[_0x3c701f(0x213)](_0x514e99);}catch(_0x5eb35f){}let _0x3ab747=_0x465a98[_0x3c701f(0x24d)]['valveMapping']||{};if(typeof _0x3ab747===_0x3c701f(0x263))try{_0x3ab747=JSON[_0x3c701f(0x213)](_0x3ab747);}catch(_0x1f7f70){}if(_0x514e99[_0x4ef2a8['id']]&&_0x514e99[_0x4ef2a8['id']]===_0x413c2c||_0x3ab747[_0x4ef2a8['id']]&&_0x3ab747[_0x4ef2a8['id']]===_0x437b89)_0x5a2375=_0x3c701f(0x1f8),_0x3f32ee=!![];else(_0x413c2c||_0x437b89)&&(_0x5a2375='Auto-Erkennung');_0x35f38e[_0x3c701f(0x23d)]({'room':_0x4ef2a8[_0x3c701f(0x20e)]||_0x3c701f(0x23b),'sensorId':_0x4ef2a8['id'],'setpointId':_0x413c2c||'-','valveId':_0x437b89||'-','source':_0x5a2375,'isManual':_0x3f32ee,'status':_0x413c2c&&_0x437b89?_0x3c701f(0x217):_0x413c2c?'OK':_0x3c701f(0x227)});}return _0x35f38e['sort']((_0x48a9f8,_0x255085)=>_0x48a9f8[_0x3c701f(0x221)][_0x3c701f(0x1bc)](_0x255085[_0x3c701f(0x221)]));}async function updateSchedulePreview(_0x48c30e){const _0x2883a6=a1_0x2e8b5a;if(!_0x48c30e[_0x2883a6(0x24d)][_0x2883a6(0x200)]||!_0x48c30e[_0x2883a6(0x24d)][_0x2883a6(0x1c2)])return;let _0x19c73d={};try{const _0x4a91a8=await _0x48c30e[_0x2883a6(0x1ed)](_0x2883a6(0x22b));if(_0x4a91a8&&_0x4a91a8['val'])_0x19c73d=JSON[_0x2883a6(0x213)](_0x4a91a8['val']);}catch(_0x1ebc97){}const _0x35948f=[],_0x8cd6d7=Date['now'](),_0x2edcc8=0x30*0x3c*0x3c*0x3e8;try{const _0x33e43f=await _0x48c30e['getForeignStateAsync'](_0x48c30e[_0x2883a6(0x24d)][_0x2883a6(0x1c2)]+_0x2883a6(0x1e7));if(!_0x33e43f||!_0x33e43f['val'])return;const _0x58e2e5=JSON[_0x2883a6(0x213)](_0x33e43f[_0x2883a6(0x1e3)]),_0x45c82a=_0x48c30e[_0x2883a6(0x24d)][_0x2883a6(0x1ff)]||[],_0x128e71=_0x48c30e['config']['devices']||[],_0x3a6115=new Set();_0x128e71[_0x2883a6(0x24a)](_0x59cea2=>{const _0x22b520=_0x2883a6;if(_0x59cea2[_0x22b520(0x20e)])_0x3a6115[_0x22b520(0x1e8)](_0x59cea2[_0x22b520(0x20e)]);});for(const _0x3b7569 of _0x58e2e5){if(_0x3b7569[_0x2883a6(0x1fd)]&&_0x45c82a[_0x2883a6(0x237)]>0x0&&!_0x45c82a[_0x2883a6(0x271)](_0x3b7569['_calName']))continue;const _0x1cf64c=_0x3b7569['_date']||_0x3b7569[_0x2883a6(0x205)]||_0x3b7569[_0x2883a6(0x1f3)];if(!_0x1cf64c)continue;const _0x1fdf8d=new Date(_0x1cf64c),_0x2658f1=_0x1fdf8d[_0x2883a6(0x211)]();if(isNaN(_0x2658f1))continue;if(_0x2658f1<_0x8cd6d7)continue;if(_0x2658f1>_0x8cd6d7+_0x2edcc8)continue;const _0x5d3753=(_0x3b7569[_0x2883a6(0x22f)]||_0x3b7569[_0x2883a6(0x1c3)]||'')[_0x2883a6(0x1f2)]();let _0x1ed3e8=![],_0x3a02a3=[],_0x1c3c86=_0x3b7569['event']||_0x3b7569['summary']||_0x2883a6(0x23b);if(_0x5d3753['includes'](_0x2883a6(0x1c4))||_0x5d3753[_0x2883a6(0x271)](_0x2883a6(0x203))||_0x5d3753[_0x2883a6(0x271)](_0x2883a6(0x256)))_0x1ed3e8=!![],_0x3a02a3=Array[_0x2883a6(0x219)](_0x3a6115);else for(const _0x11e423 of _0x3a6115){if(_0x5d3753[_0x2883a6(0x271)](_0x11e423['toLowerCase']()))_0x3a02a3['push'](_0x11e423);}_0x3a02a3[_0x2883a6(0x237)]>0x0&&_0x3a02a3[_0x2883a6(0x24a)](_0x1220de=>{const _0x1543b1=_0x2883a6;let _0x1b41df=0x3c;if(_0x1ed3e8){let _0x881d46=0x0;Object[_0x1543b1(0x246)](_0x19c73d)[_0x1543b1(0x24a)](_0x32681f=>{if(_0x32681f>_0x881d46)_0x881d46=_0x32681f;}),_0x1b41df=_0x881d46>0x0?_0x881d46:0x78;}else _0x1b41df=getWarmupRobust(_0x19c73d,_0x1220de);const _0x48dce4=new Date(_0x2658f1-_0x1b41df*0xea60);_0x35948f[_0x1543b1(0x23d)]({'eventTime':_0x2658f1,'triggerTime':_0x48dce4['getTime'](),'room':_0x1220de,'minutes':_0x1b41df,'reason':_0x1c3c86,'isGlobal':_0x1ed3e8});});}}catch(_0x38cb3c){}_0x35948f['sort']((_0x350b04,_0x53a31b)=>_0x350b04[_0x2883a6(0x1c7)]-_0x53a31b[_0x2883a6(0x1c7)]);const _0x11a079=_0x35948f[_0x2883a6(0x25a)](0x0,0x1e);await _0x48c30e['setStateAsync'](_0x2883a6(0x204),{'val':JSON[_0x2883a6(0x1d7)](_0x11a079),'ack':!![]});}async function monitorEnforcements(_0x2b04e1){const _0x4f9bb1=a1_0x2e8b5a;try{const _0x35bc92='analysis.energy.activeEnforcements',_0x244b02=await _0x2b04e1[_0x4f9bb1(0x1ed)](_0x35bc92);if(!_0x244b02||!_0x244b02[_0x4f9bb1(0x1e3)])return;let _0x526298=[];try{_0x526298=JSON[_0x4f9bb1(0x213)](_0x244b02['val']);}catch(_0x2599e2){return;}if(!Array[_0x4f9bb1(0x1b5)](_0x526298)||_0x526298[_0x4f9bb1(0x237)]===0x0)return;const _0x26ee8b=Date[_0x4f9bb1(0x1f5)](),_0xe23661=_0x2b04e1['config'][_0x4f9bb1(0x25d)]||[];let _0x3372ec=![];for(let _0x487e8e=_0x526298[_0x4f9bb1(0x237)]-0x1;_0x487e8e>=0x0;_0x487e8e--){const _0x322a30=_0x526298[_0x487e8e];if(_0x26ee8b>=_0x322a30['until']){_0x2b04e1['log'][_0x4f9bb1(0x1df)]('ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20'+_0x322a30['room']+'\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.'),_0x526298[_0x4f9bb1(0x1ef)](_0x487e8e,0x1),_0x3372ec=!![];continue;}const _0x18e80b=_0xe23661[_0x4f9bb1(0x1e9)](_0x63d95d=>normalize(_0x63d95d[_0x4f9bb1(0x20e)])===normalize(_0x322a30[_0x4f9bb1(0x221)])&&(_0x63d95d[_0x4f9bb1(0x252)]==='temperature'||_0x63d95d[_0x4f9bb1(0x252)]===_0x4f9bb1(0x238)));if(_0x18e80b){const _0x41b0fc=await findRelatedId(_0x2b04e1,_0x18e80b['id'],_0x4f9bb1(0x212));if(_0x41b0fc){const _0x517209=await _0x2b04e1[_0x4f9bb1(0x1e1)](_0x41b0fc);_0x517209&&typeof _0x517209[_0x4f9bb1(0x1e3)]==='number'&&(_0x517209[_0x4f9bb1(0x1e3)]<0xf&&(_0x2b04e1['log']['warn'](_0x4f9bb1(0x249)+_0x322a30['room']+_0x4f9bb1(0x1ee)+_0x517209[_0x4f9bb1(0x1e3)]+_0x4f9bb1(0x1dc)+_0x322a30['target']+_0x4f9bb1(0x218)),await _0x2b04e1[_0x4f9bb1(0x1eb)](_0x41b0fc,_0x322a30[_0x4f9bb1(0x220)]),await logAutomationAction(_0x2b04e1,_0x4f9bb1(0x266)+_0x322a30[_0x4f9bb1(0x221)]+':\x20'+_0x517209[_0x4f9bb1(0x1e3)]+_0x4f9bb1(0x25e)+_0x322a30[_0x4f9bb1(0x220)]+_0x4f9bb1(0x24b))));}}}_0x3372ec&&await _0x2b04e1[_0x4f9bb1(0x214)](_0x35bc92,{'val':JSON[_0x4f9bb1(0x1d7)](_0x526298),'ack':!![]});}catch(_0x3f1e5c){_0x2b04e1[_0x4f9bb1(0x20f)][_0x4f9bb1(0x262)](_0x4f9bb1(0x253)+_0x3f1e5c[_0x4f9bb1(0x260)]);}}async function checkCalendarTriggers(_0x13a67f){const _0x872b72=a1_0x2e8b5a;if(!_0x13a67f['config'][_0x872b72(0x200)]||!_0x13a67f[_0x872b72(0x24d)][_0x872b72(0x1c2)])return;await updateSchedulePreview(_0x13a67f);let _0x585a7b={},_0x2486e1={};try{const _0x108bc9=await _0x13a67f[_0x872b72(0x1ed)](_0x872b72(0x22b));if(_0x108bc9&&_0x108bc9[_0x872b72(0x1e3)])_0x585a7b=JSON['parse'](_0x108bc9[_0x872b72(0x1e3)]);const _0x3f93ac=await _0x13a67f[_0x872b72(0x1ed)](_0x872b72(0x201));if(_0x3f93ac&&_0x3f93ac[_0x872b72(0x1e3)])_0x2486e1=JSON[_0x872b72(0x213)](_0x3f93ac[_0x872b72(0x1e3)]);}catch(_0x402877){}let _0x162f9e={'default':0x15};try{const _0xdc8a54=await _0x13a67f[_0x872b72(0x1ed)]('analysis.energy.warmupTargets');if(_0xdc8a54&&_0xdc8a54['val'])_0x162f9e=JSON[_0x872b72(0x213)](_0xdc8a54[_0x872b72(0x1e3)]);}catch(_0x18e1d8){}let _0x4d48ab=[];try{const _0x5f7d8c=await _0x13a67f[_0x872b72(0x1ed)]('analysis.energy.activeEnforcements');if(_0x5f7d8c&&_0x5f7d8c[_0x872b72(0x1e3)])_0x4d48ab=JSON[_0x872b72(0x213)](_0x5f7d8c[_0x872b72(0x1e3)]);}catch(_0x4a4b84){}try{const _0x5341f5=await _0x13a67f['getForeignStateAsync'](_0x13a67f[_0x872b72(0x24d)]['calendarInstance']+_0x872b72(0x1e7));if(!_0x5341f5||!_0x5341f5['val'])return;const _0x71f00e=JSON[_0x872b72(0x213)](_0x5341f5[_0x872b72(0x1e3)]),_0x13f20f=Date[_0x872b72(0x1f5)](),_0x5ce8de=_0x13a67f[_0x872b72(0x24d)]['devices']||[],_0x596ea9=_0x13a67f[_0x872b72(0x24d)][_0x872b72(0x1ff)]||[];let _0x1d1479=![];for(const _0x14055e of _0x71f00e){if(_0x14055e['_calName']&&_0x596ea9['length']>0x0&&!_0x596ea9[_0x872b72(0x271)](_0x14055e[_0x872b72(0x1fd)]))continue;const _0x1292d4=_0x14055e[_0x872b72(0x257)]||_0x14055e[_0x872b72(0x205)]||_0x14055e[_0x872b72(0x1f3)];if(!_0x1292d4)continue;const _0x55e062=new Date(_0x1292d4);if(isNaN(_0x55e062[_0x872b72(0x211)]()))continue;const _0x18a25e=(_0x14055e[_0x872b72(0x22f)]||_0x14055e['summary']||'')[_0x872b72(0x1f2)]();if(_0x18a25e['includes'](_0x872b72(0x1c4))||_0x18a25e[_0x872b72(0x271)]('rÃ¼ckkehr')||_0x18a25e[_0x872b72(0x271)](_0x872b72(0x256))){let _0x5c9b64=0x0;Object[_0x872b72(0x246)](_0x585a7b)[_0x872b72(0x24a)](_0x437610=>{if(_0x437610>_0x5c9b64)_0x5c9b64=_0x437610;});if(_0x5c9b64===0x0)_0x5c9b64=0x78;const _0x4bb0f6=_0x55e062[_0x872b72(0x211)]()-_0x5c9b64*0xea60;_0x13f20f>=_0x4bb0f6&&_0x13f20f<_0x55e062[_0x872b72(0x211)]()&&(_0x13a67f['currentSystemMode']!==_0x872b72(0x1d4)&&(_0x13a67f['log']['info'](_0x872b72(0x21c)+_0x5c9b64+_0x872b72(0x22c)),await _0x13a67f[_0x872b72(0x214)]('system.mode',{'val':_0x872b72(0x1d4),'ack':![]})));}for(const _0x2c9c2a of _0x5ce8de){if(_0x2c9c2a[_0x872b72(0x20e)]){const _0x1232a4=_0x2c9c2a[_0x872b72(0x20e)][_0x872b72(0x1f2)](),_0x3cb0b1=(_0x2c9c2a[_0x872b72(0x1ca)]||'')[_0x872b72(0x1f2)]();let _0x2ee749=_0x18a25e[_0x872b72(0x271)](_0x1232a4);!_0x2ee749&&_0x3cb0b1[_0x872b72(0x237)]>0x3&&_0x18a25e['includes'](_0x3cb0b1)&&(_0x2ee749=!![]);if(_0x2ee749){const _0x1566f1=getWarmupRobust(_0x585a7b,_0x2c9c2a[_0x872b72(0x20e)]),_0x5344e4=_0x2486e1[_0x2c9c2a[_0x872b72(0x20e)]]||_0x872b72(0x1b7),_0x33f9b6=_0x55e062[_0x872b72(0x211)]()-_0x1566f1*0xea60;if(_0x13f20f>=_0x33f9b6&&_0x13f20f<_0x55e062[_0x872b72(0x211)]()){const _0x4660a2=lastActions[_0x872b72(0x1c6)+_0x2c9c2a[_0x872b72(0x20e)]];if(_0x4660a2&&_0x13f20f-_0x4660a2<CAL_COOLDOWN_MS)continue;const _0x5488a9=await findRelatedId(_0x13a67f,_0x2c9c2a['id'],_0x872b72(0x212));if(_0x5488a9){let _0x43e89b=_0x162f9e[_0x2c9c2a[_0x872b72(0x20e)]];if(_0x43e89b===undefined)_0x43e89b=_0x162f9e[_0x872b72(0x23f)];if(_0x43e89b===undefined)_0x43e89b=0x15;const _0x32a096=await _0x13a67f[_0x872b72(0x1e1)](_0x5488a9);if(_0x32a096&&typeof _0x32a096[_0x872b72(0x1e3)]===_0x872b72(0x1f9)&&_0x32a096[_0x872b72(0x1e3)]<_0x43e89b-0.5){_0x13a67f[_0x872b72(0x20f)]['info'](_0x872b72(0x20c)+_0x5344e4+_0x872b72(0x1f1)+_0x2c9c2a[_0x872b72(0x20e)]+_0x872b72(0x239)+_0x18a25e+_0x872b72(0x272)+_0x43e89b+'Â°C\x20(Vorlauf:\x20'+_0x1566f1+_0x872b72(0x22c)),await _0x13a67f[_0x872b72(0x1eb)](_0x5488a9,_0x43e89b),await logAutomationAction(_0x13a67f,_0x872b72(0x22d)+_0x2c9c2a[_0x872b72(0x20e)]+_0x872b72(0x223)+_0x43e89b+_0x872b72(0x20b)+_0x5344e4+')'),lastActions['cal_'+_0x2c9c2a['location']]=_0x13f20f;const _0x36a87b=_0x4d48ab['findIndex'](_0x2c5e43=>_0x2c5e43[_0x872b72(0x221)]===_0x2c9c2a['location']);if(_0x36a87b!==-0x1)_0x4d48ab[_0x872b72(0x1ef)](_0x36a87b,0x1);_0x4d48ab['push']({'room':_0x2c9c2a[_0x872b72(0x20e)],'target':_0x43e89b,'until':_0x55e062[_0x872b72(0x211)]()}),_0x1d1479=!![];}}}}}}}_0x1d1479&&await _0x13a67f[_0x872b72(0x214)](_0x872b72(0x1ea),{'val':JSON[_0x872b72(0x1d7)](_0x4d48ab),'ack':!![]});}catch(_0x16643a){_0x13a67f[_0x872b72(0x20f)][_0x872b72(0x208)]('Calendar\x20Check\x20Error:\x20'+_0x16643a[_0x872b72(0x260)]);}}async function manageMpcIntervention(_0x2548f9,_0xd1b1b7,_0x3af1f1){const _0x37bf4a=a1_0x2e8b5a;try{const _0x1d6a4f=_0x37bf4a(0x247),_0x498cb1=await _0x2548f9['getStateAsync'](_0x1d6a4f);let _0x2e6ce8=[];if(_0x498cb1&&_0x498cb1[_0x37bf4a(0x1e3)])try{_0x2e6ce8=JSON[_0x37bf4a(0x213)](_0x498cb1[_0x37bf4a(0x1e3)]);}catch(_0x9dbf16){}const _0x4f450b=_0x2e6ce8[_0x37bf4a(0x251)](_0xd1b1b7);if(_0x3af1f1===_0x37bf4a(0x1e8))_0x4f450b===-0x1&&(_0x2e6ce8[_0x37bf4a(0x23d)](_0xd1b1b7),await _0x2548f9['setStateAsync'](_0x1d6a4f,{'val':JSON[_0x37bf4a(0x1d7)](_0x2e6ce8),'ack':!![]}));else _0x3af1f1===_0x37bf4a(0x1f6)&&(_0x4f450b!==-0x1&&(_0x2e6ce8[_0x37bf4a(0x1ef)](_0x4f450b,0x1),await _0x2548f9[_0x37bf4a(0x214)](_0x1d6a4f,{'val':JSON['stringify'](_0x2e6ce8),'ack':!![]})));}catch(_0x2cfad0){}}async function cleanupGhostInterventions(_0x32dfe5){const _0x29e9df=a1_0x2e8b5a;try{const _0x206c31=_0x29e9df(0x247),_0x220430=await _0x32dfe5['getStateAsync'](_0x206c31);if(!_0x220430||!_0x220430[_0x29e9df(0x1e3)])return;const _0x2782a3=JSON['parse'](_0x220430[_0x29e9df(0x1e3)]);if(!Array['isArray'](_0x2782a3)||_0x2782a3[_0x29e9df(0x237)]===0x0)return;let _0x21fca8={'default':0x15};try{const _0x4e17ea=await _0x32dfe5['getStateAsync'](_0x29e9df(0x216));if(_0x4e17ea&&_0x4e17ea[_0x29e9df(0x1e3)])_0x21fca8=JSON[_0x29e9df(0x213)](_0x4e17ea[_0x29e9df(0x1e3)]);}catch(_0x34a8a3){}let _0x520597=[];try{const _0x3120ee=await _0x32dfe5[_0x29e9df(0x1ed)](_0x29e9df(0x1c0));if(_0x3120ee&&_0x3120ee[_0x29e9df(0x1e3)])_0x520597=JSON[_0x29e9df(0x213)](_0x3120ee[_0x29e9df(0x1e3)]);}catch(_0xd8c694){}let _0x37d850={},_0x3e1056=![];try{const _0x683635=await _0x32dfe5[_0x29e9df(0x1ed)](_0x29e9df(0x1de));if(_0x683635&&_0x683635[_0x29e9df(0x1e3)])_0x37d850=JSON['parse'](_0x683635[_0x29e9df(0x1e3)]);}catch(_0x4431fa){}if(_0x37d850[_0x29e9df(0x1cf)]){const _0x50666d=Date[_0x29e9df(0x1f5)]();for(const [_0x265a2b,_0x4a10b6]of Object[_0x29e9df(0x26c)](_0x37d850[_0x29e9df(0x1cf)])){_0x50666d-_0x4a10b6>PENALTY_TTL&&(delete _0x37d850[_0x265a2b],delete _0x37d850['_meta'][_0x265a2b],_0x3e1056=!![],_0x32dfe5['log'][_0x29e9df(0x1df)](_0x29e9df(0x1c5)+_0x265a2b+_0x29e9df(0x24f)));}}const _0x43d3b1=_0x32dfe5[_0x29e9df(0x24d)][_0x29e9df(0x25d)]||[];let _0xf79c6d=![];for(let _0x1cc6e2=_0x2782a3[_0x29e9df(0x237)]-0x1;_0x1cc6e2>=0x0;_0x1cc6e2--){const _0x2e27a1=_0x2782a3[_0x1cc6e2],_0x35ea1d=_0x43d3b1[_0x29e9df(0x1e9)](_0x17958b=>normalize(_0x17958b[_0x29e9df(0x20e)])===normalize(_0x2e27a1)&&(_0x17958b['type']===_0x29e9df(0x25c)||_0x17958b['type']==='thermostat'));if(!_0x35ea1d){_0x32dfe5['log'][_0x29e9df(0x208)](_0x29e9df(0x210)+_0x2e27a1+'\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.'),_0x2782a3[_0x29e9df(0x1ef)](_0x1cc6e2,0x1),_0xf79c6d=!![];continue;}if(_0x35ea1d){const _0x2ae45a=await findRelatedId(_0x32dfe5,_0x35ea1d['id'],_0x29e9df(0x212)),_0x53be43=await _0x32dfe5[_0x29e9df(0x1e1)](_0x35ea1d['id']);if(_0x2ae45a){const _0x2901d0=await _0x32dfe5[_0x29e9df(0x1e1)](_0x2ae45a);if(_0x2901d0&&typeof _0x2901d0[_0x29e9df(0x1e3)]==='number'){let _0x249a31=![],_0x470d42='';Math[_0x29e9df(0x1f4)](_0x2901d0[_0x29e9df(0x1e3)]-ECO_TEMP)>0.5&&(_0x249a31=!![],_0x470d42=_0x29e9df(0x255));if(!_0x249a31&&_0x53be43&&typeof _0x53be43[_0x29e9df(0x1e3)]===_0x29e9df(0x1f9)){const _0x2bc991=_0x21fca8[_0x2e27a1]||_0x21fca8[_0x29e9df(0x23f)]||0x15;_0x53be43['val']<_0x2bc991+0.2&&(_0x249a31=!![],_0x470d42=_0x29e9df(0x234));}if(_0x249a31){if(_0x470d42===_0x29e9df(0x255)){_0x32dfe5[_0x29e9df(0x20f)][_0x29e9df(0x1df)](_0x29e9df(0x26d)+_0x2e27a1+_0x29e9df(0x261)+_0x2901d0[_0x29e9df(0x1e3)]+_0x29e9df(0x1c9)+ECO_TEMP+'Â°C).\x20Entferne\x20Status.');const _0x292a69=lastActions['cal_'+_0x2e27a1],_0x244607=_0x292a69&&Date['now']()-_0x292a69<0x2*0x3c*0x3e8;if(!_0x244607&&_0x2901d0[_0x29e9df(0x1e3)]>ECO_TEMP+0.5){_0x32dfe5[_0x29e9df(0x258)]&&(_0x32dfe5[_0x29e9df(0x20f)]['info'](_0x29e9df(0x268)+_0x2e27a1+'\x20wurde\x20manuell\x20erhÃ¶ht.'),_0x32dfe5[_0x29e9df(0x258)](_0x29e9df(0x1d1),{'room':_0x2e27a1}));const _0x132549=_0x2e27a1+'_'+new Date()[_0x29e9df(0x202)]();if(!_0x37d850[_0x132549]){_0x37d850[_0x132549]=0x1;if(!_0x37d850[_0x29e9df(0x1cf)])_0x37d850[_0x29e9df(0x1cf)]={};_0x37d850[_0x29e9df(0x1cf)][_0x132549]=Date[_0x29e9df(0x1f5)](),_0x3e1056=!![];}}else _0x244607&&_0x32dfe5[_0x29e9df(0x20f)][_0x29e9df(0x1df)](_0x29e9df(0x1d5)+_0x2e27a1+_0x29e9df(0x26b));}else{if(_0x470d42===_0x29e9df(0x234)){let _0x4f3fca=![];if(_0x520597['find'](_0x2569eb=>_0x2569eb['room']===_0x2e27a1))_0x4f3fca=!![];const _0x51c11b=_0x43d3b1[_0x29e9df(0x1ce)](_0x2cdf4f=>normalize(_0x2cdf4f[_0x29e9df(0x20e)])===normalize(_0x2e27a1)&&(_0x2cdf4f[_0x29e9df(0x252)]==='window'||_0x2cdf4f[_0x29e9df(0x252)]===_0x29e9df(0x20d)||_0x2cdf4f['type']===_0x29e9df(0x26f)));for(const _0x1f7c57 of _0x51c11b){try{const _0x38de08=await _0x32dfe5[_0x29e9df(0x1e1)](_0x1f7c57['id']);if(_0x38de08&&(_0x38de08[_0x29e9df(0x1e3)]===!![]||_0x38de08[_0x29e9df(0x1e3)]===0x1||String(_0x38de08[_0x29e9df(0x1e3)])['toLowerCase']()===_0x29e9df(0x26a)))_0x4f3fca=!![];}catch(_0x32cf7a){}}if(_0x4f3fca)_0x32dfe5[_0x29e9df(0x20f)][_0x29e9df(0x1df)](_0x29e9df(0x1ec)+_0x2e27a1+'\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.');else{const _0x17b367=_0x21fca8[_0x2e27a1]||_0x21fca8[_0x29e9df(0x23f)]||0x15;_0x32dfe5['log']['info'](_0x29e9df(0x224)+_0x2e27a1+_0x29e9df(0x1cd)+_0x53be43[_0x29e9df(0x1e3)]+_0x29e9df(0x240)+(_0x17b367+0.2)+_0x29e9df(0x1b3)),await _0x32dfe5[_0x29e9df(0x1eb)](_0x2ae45a,_0x17b367),await logAutomationAction(_0x32dfe5,_0x29e9df(0x25f)+_0x2e27a1+_0x29e9df(0x206)+_0x17b367+'Â°C'),lastActions[_0x29e9df(0x21e)+_0x2e27a1]=Date[_0x29e9df(0x1f5)]();}}}_0x2782a3['splice'](_0x1cc6e2,0x1),_0xf79c6d=!![];}}}}}_0xf79c6d&&await _0x32dfe5[_0x29e9df(0x214)](_0x206c31,{'val':JSON[_0x29e9df(0x1d7)](_0x2782a3),'ack':!![]}),_0x3e1056&&await _0x32dfe5['setStateAsync'](_0x29e9df(0x1de),{'val':JSON[_0x29e9df(0x1d7)](_0x37d850),'ack':!![]});}catch(_0x3c9839){}}function a1_0x46b3(){const _0x4e39af=['ankunft','_date','sendToPythonWrapper','1040JHgjyG','slice','valve_position','temperature','devices','Â°C\x20->\x20','[WATCHDOG]\x20','message','\x20ist\x20auf\x20','error','string','consultButler','search','[FORCE]\x20','4673392Jzrnhe','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','285753yOMkup','open','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','entries','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','sort','contact','4igvJsb','includes',')\x20aktiv.\x20Heize\x20auf\x20','Â°C).\x20Sparmodus\x20beendet!','toUpperCase','isArray','Â°C!\x20(Puffer\x20leer).','Classic','exports','./ai_agent','temp','replace','localeCompare','18244IRBqvG','state','off','analysis.energy.ventilationAlerts','soll','calendarInstance','summary','urlaub\x20ende','ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27','cal_','triggerTime','score','Â°C\x20(nicht\x20','name','split','target_temperature','\x20erreicht\x20Limit\x20(','filter','_meta','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','TRAIN_RL_PENALTY',':\x20Aufheizen\x20auf\x20','position','normal','ðŸ“…\x20[MPC\x20INFO]\x20','18nvCbqq','stringify','valveMapping','Unknown','analysis.automation.actionLog','Nicht\x20gefunden','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','level','analysis.energy.rlPenalties','info','current_heating_setpoint','getForeignStateAsync','stellwert','val','switch','analysis.automation.mode','758154XTCsvb','.data.table','add','find','analysis.energy.activeEnforcements','setForeignStateAsync','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','getStateAsync','\x20auf\x20','splice','light',']:\x20Raum-Trigger\x20\x27','toLowerCase','date','abs','now','remove','level.temperature','Manuelles\x20Mapping','number','level.valve','.4.VALVE_STATE','analysis.automation.confidenceThreshold','_calName','local_temperature','calendarSelection','useCalendar','analysis.energy.warmupSources','getHours','rÃ¼ckkehr','analysis.energy.schedulePreview','eventStart',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','reason','warn','active','analysis.automation.lastAction','Â°C\x20(via\x20','ðŸ“…\x20SMART\x20SCHEDULE\x20[','sensor','location','log','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','getTime','setpoint','parse','setStateAsync','[MPC]\x20','analysis.energy.warmupTargets','PERFECT','Â°C.','from','1816983tfudhM','ist','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','ACTUAL','rescue_','ACTUAL_TEMPERATURE','target','room','.1.TEMPERATURE','\x20->\x20','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','unit','.1.LEVEL','Fehlt','occupied_heating_setpoint','thermostat.setpoint','valve','analysis.energy.warmupTimes','\x20min).','[CAL]\x20','value.valve','event','12962980UvSqar','\x20min)','Soll','approved','too_cold','common','trim','length','thermostat','\x27\x20(Match:\x20','thermostatMapping','Unbekannt','actual','push','\x20->\x20Schalte\x20','default','Â°C\x20<\x20','toString','(((.+)+)+)+$','dimmer','hm-rpc','unshift','values','analysis.energy.mpcActiveInterventions','6833916ckQVjL','ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','forEach','Â°C\x20(Kalender-Schutz)','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','config','mpc_','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','getForeignObjectAsync','indexOf','type','Enforcement\x20Monitor\x20Error:\x20','.4.SET_TEMPERATURE','manual'];a1_0x46b3=function(){return _0x4e39af;};return a1_0x46b3();}async function applyEnergySavings(_0x42d7e0,_0x58b60e){const _0x524c62=a1_0x2e8b5a;await cleanupGhostInterventions(_0x42d7e0);if(!_0x58b60e||_0x58b60e['length']===0x0)return;const _0x386161=_0x42d7e0[_0x524c62(0x24d)][_0x524c62(0x25d)]||[],_0x4089c8=Date[_0x524c62(0x1f5)]();for(const _0x52ac4a of _0x58b60e){const _0x439fd6=_0x52ac4a[_0x524c62(0x221)],_0x1ea888=_0x52ac4a['minutes_safe'],_0x518097=_0x52ac4a[_0x524c62(0x220)]||0x15;if(lastActions['rescue_'+_0x439fd6]&&_0x4089c8-lastActions[_0x524c62(0x21e)+_0x439fd6]<RESCUE_LOCK_MS)continue;const _0x56ebab=_0x386161['find'](_0x4ae9a7=>normalize(_0x4ae9a7[_0x524c62(0x20e)])===normalize(_0x439fd6)&&(_0x4ae9a7['type']===_0x524c62(0x25c)||_0x4ae9a7[_0x524c62(0x252)]===_0x524c62(0x238)));if(!_0x56ebab)continue;const _0x37ca8d=await findRelatedId(_0x42d7e0,_0x56ebab['id'],_0x524c62(0x212));if(_0x37ca8d){if(lastActions[_0x524c62(0x24e)+_0x439fd6]&&_0x4089c8-lastActions[_0x524c62(0x24e)+_0x439fd6]<0x1e*0x3c*0x3e8)continue;const _0x5d8f81=await _0x42d7e0['getForeignStateAsync'](_0x37ca8d);if(_0x5d8f81&&typeof _0x5d8f81[_0x524c62(0x1e3)]===_0x524c62(0x1f9)){const _0x36a666=_0x5d8f81[_0x524c62(0x1e3)];_0x36a666!==ECO_TEMP&&await manageMpcIntervention(_0x42d7e0,_0x439fd6,_0x524c62(0x1f6));if(_0x1ea888>0x1e)_0x36a666>ECO_TEMP+0.5&&(_0x42d7e0[_0x524c62(0x20f)]['info'](_0x524c62(0x1d0)+_0x439fd6+_0x524c62(0x1ee)+ECO_TEMP+'Â°C!\x20(Puffer:\x20'+_0x1ea888+_0x524c62(0x231)),await _0x42d7e0[_0x524c62(0x1eb)](_0x37ca8d,ECO_TEMP),await manageMpcIntervention(_0x42d7e0,_0x439fd6,_0x524c62(0x1e8)),lastActions[_0x524c62(0x24e)+_0x439fd6]=_0x4089c8,await logAutomationAction(_0x42d7e0,'[MPC]\x20'+_0x439fd6+':\x20Absenkung\x20auf\x20'+ECO_TEMP+'Â°C'));else _0x1ea888<=0xf&&(_0x36a666<_0x518097&&(_0x42d7e0['log'][_0x524c62(0x1df)]('ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20'+_0x439fd6+'\x20wieder\x20auf\x20'+_0x518097+_0x524c62(0x1b6)),await _0x42d7e0[_0x524c62(0x1eb)](_0x37ca8d,_0x518097),await manageMpcIntervention(_0x42d7e0,_0x439fd6,_0x524c62(0x1f6)),lastActions[_0x524c62(0x24e)+_0x439fd6]=_0x4089c8,await logAutomationAction(_0x42d7e0,_0x524c62(0x215)+_0x439fd6+_0x524c62(0x1d2)+_0x518097+'Â°C')));}}else _0x42d7e0['log'][_0x524c62(0x208)](_0x524c62(0x24c)+_0x439fd6+'\x20gefunden!');}}function a1_0x1dd2(_0x34ba01,_0x184fa3){const _0x18a077=a1_0x46b3();return a1_0x1dd2=function(_0x36e32c,_0x17ca6b){_0x36e32c=_0x36e32c-0x1b3;let _0x46b301=_0x18a077[_0x36e32c];return _0x46b301;},a1_0x1dd2(_0x34ba01,_0x184fa3);}module[a1_0x2e8b5a(0x1b8)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};