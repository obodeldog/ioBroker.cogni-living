const a1_0x46664b=a1_0x5682;(function(_0x258bbf,_0x4ae38f){const _0x124ea1=a1_0x5682,_0xe8774b=_0x258bbf();while(!![]){try{const _0xf49f72=-parseInt(_0x124ea1(0xd4))/0x1*(parseInt(_0x124ea1(0x92))/0x2)+-parseInt(_0x124ea1(0x10d))/0x3*(parseInt(_0x124ea1(0x124))/0x4)+-parseInt(_0x124ea1(0xbc))/0x5+-parseInt(_0x124ea1(0xcf))/0x6*(parseInt(_0x124ea1(0xad))/0x7)+-parseInt(_0x124ea1(0x108))/0x8*(-parseInt(_0x124ea1(0x96))/0x9)+parseInt(_0x124ea1(0xf5))/0xa+-parseInt(_0x124ea1(0xe5))/0xb*(-parseInt(_0x124ea1(0xe9))/0xc);if(_0xf49f72===_0x4ae38f)break;else _0xe8774b['push'](_0xe8774b['shift']());}catch(_0x468242){_0xe8774b['push'](_0xe8774b['shift']());}}}(a1_0x2d78,0x37658));const a1_0x3e688b=(function(){let _0x43e98d=!![];return function(_0x53389f,_0x164183){const _0x24a829=_0x43e98d?function(){const _0x3abd43=a1_0x5682;if(_0x164183){const _0x584a30=_0x164183[_0x3abd43(0x93)](_0x53389f,arguments);return _0x164183=null,_0x584a30;}}:function(){};return _0x43e98d=![],_0x24a829;};}()),a1_0xe1151e=a1_0x3e688b(this,function(){const _0x43130e=a1_0x5682;return a1_0xe1151e[_0x43130e(0xd3)]()['search'](_0x43130e(0xc0))[_0x43130e(0xd3)]()[_0x43130e(0x11e)](a1_0xe1151e)[_0x43130e(0x9f)](_0x43130e(0xc0));});a1_0xe1151e();'use strict';const aiAgent=require(a1_0x46664b(0xfd)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x5f8504){const _0x9f56ea=a1_0x46664b;if(!_0x5f8504)return'';return _0x5f8504['toLowerCase']()[_0x9f56ea(0x9d)](/\s+/g,'')[_0x9f56ea(0x100)]();}function getWarmupRobust(_0x4d02f3,_0x27bca7){const _0x475ba5=a1_0x46664b;if(!_0x4d02f3||!_0x27bca7)return 0x3c;if(_0x4d02f3[_0x27bca7]!==undefined)return _0x4d02f3[_0x27bca7];const _0x599e90=_0x27bca7[_0x475ba5(0x107)]()[_0x475ba5(0x9d)](/√§/g,'ae')[_0x475ba5(0x9d)](/√∂/g,'oe')[_0x475ba5(0x9d)](/√º/g,'ue')[_0x475ba5(0x9d)](/√ü/g,'ss')[_0x475ba5(0x9d)](/\s+/g,'_')[_0x475ba5(0x9d)](/[^a-z0-9_]/g,'');if(_0x4d02f3[_0x599e90]!==undefined)return _0x4d02f3[_0x599e90];return 0x3c;}function a1_0x2d78(){const _0x18e4d3=['üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','local_temperature','521715NBisvN','message','Calendar\x20Check\x20Error:\x20','split','(((.+)+)+)+$','room','slice','[CAL]\x20','now','[FORCE]\x20','manual','Soll','mpc_','reason','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','urlaub\x20ende','thermostatMapping','\x20erreicht\x20Limit\x20(','analysis.energy.warmupSources','52914BllpLG','push','\x20->\x20','current_heating_setpoint','toString','19LDJTgr','calendarInstance','rescue_','devices','consultButler','triggerTime','¬∞C\x20(nicht\x20','parse','temperature','üßπ\x20[MPC\x20CLEANUP]\x20','temp','valveMapping','\x20min)','unit','_date','abs','forEach','11NXTKtA','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','üö®\x20[MPC\x20WATCHDOG]\x20','cal_','9046716NhbcJt','setpoint','valve','analysis.automation.confidenceThreshold','¬∞C).\x20Entferne\x20Status.','analysis.energy.schedulePreview','\x20wieder\x20auf\x20','add','eventStart','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','getTime','.4.SET_TEMPERATURE','457440zQhRdi','currentSystemMode','thermostat','hm-rpc','stellwert',':\x20Aufheizen\x20auf\x20','summary','val','./ai_agent','error','\x27\x20(Match:\x20','trim','location','Auto-Erkennung','Unknown','active','minutes_safe','sensor','toLowerCase','64rVzVUp','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20','.1.ACTUAL_TEMPERATURE','_calName','find','3ujOJEE','Unbekannt','occupied_heating_setpoint','üî•\x20[MPC\x20ACTION]\x20Heize\x20','common','PERFECT','¬∞C\x20(Vorlauf:\x20','\x20wurde\x20manuell\x20erh√∂ht.','off','\x20auf\x20',']:\x20Raum-Trigger\x20\x27','üìÖ\x20SMART\x20SCHEDULE\x20[','target_temperature','light','Fehlt','ankunft','position','constructor','¬∞C\x20<\x20','value.valve','dimmer','string','length','618756MyEaUS','event','normal','wert','actual','getStateAsync','valve_position','remove','isArray','soll','type','until','role','getForeignStateAsync','Enforcement\x20Monitor\x20Error:\x20','¬∞C\x20(via\x20','Ist','.data.table','too_cold','analysis.energy.activeEnforcements','toUpperCase','ist','¬∞C.','indexOf','Classic','[WATCHDOG]\x20','analysis.energy.ventilationAlerts','includes','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','unshift','exports','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','analysis.automation.mode','write','name','system.mode','info','score','map','calendarSelection','stringify','.4.VALVE_STATE','.1.SET_POINT_TEMPERATURE','ACTUAL','warn','config','analysis.energy.warmupTimes','setStateAsync','¬∞C!\x20(Puffer\x20leer).','from','.1.LEVEL','date','¬∞C).\x20Sparmodus\x20beendet!','analysis.energy.mpcActiveInterventions','ACTUAL_TEMPERATURE','number','13644FYxpKI','apply',':\x20Absenkung\x20auf\x20','log','279054FhvRat','TRAIN_RL_PENALTY','\x20min).','sort','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','.1.TEMPERATURE','analysis.energy.rlPenalties','replace','entries','search','\x20ist\x20auf\x20','analysis.automation.lastAction','useCalendar','pi_heating_demand','¬∞C!\x20(Puffer:\x20','getHours','setForeignStateAsync','level','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','SET','contact','window','getForeignObjectsAsync','343zVASXv','_meta','analysis.energy.warmupTargets','splice','filter','[MPC]\x20','target','messwert','values','default','sendToPythonWrapper','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20',')\x20aktiv.\x20Heize\x20auf\x20'];a1_0x2d78=function(){return _0x18e4d3;};return a1_0x2d78();}async function logAutomationAction(_0x1ea70b,_0x1f7e54){const _0x8ab4ea=a1_0x46664b;await _0x1ea70b[_0x8ab4ea(0x153)](_0x8ab4ea(0xa1),{'val':_0x1f7e54,'ack':!![]});try{const _0x3a9d3f='analysis.automation.actionLog',_0x2654bb=await _0x1ea70b[_0x8ab4ea(0x129)](_0x3a9d3f);let _0x2ec825=[];if(_0x2654bb&&_0x2654bb[_0x8ab4ea(0xfc)])try{_0x2ec825=JSON[_0x8ab4ea(0xdb)](_0x2654bb[_0x8ab4ea(0xfc)]);}catch(_0x1b28eb){}_0x2ec825[_0x8ab4ea(0x141)]({'ts':Date[_0x8ab4ea(0xc4)](),'msg':_0x1f7e54});if(_0x2ec825[_0x8ab4ea(0x123)]>0x32)_0x2ec825=_0x2ec825['slice'](0x0,0x32);await _0x1ea70b[_0x8ab4ea(0x153)](_0x3a9d3f,{'val':JSON[_0x8ab4ea(0x14c)](_0x2ec825),'ack':!![]});}catch(_0x409780){}}async function handlePrediction(_0x27b061,_0x51a455,_0x6f2243){const _0x4559e5=a1_0x46664b;if(!_0x51a455||_0x51a455===_0x4559e5(0x103))return;let _0x22a05c=_0x4559e5(0x115),_0x4ff9b4=0.6;try{const _0x2e1475=await _0x27b061[_0x4559e5(0x129)](_0x4559e5(0x144));if(_0x2e1475&&_0x2e1475[_0x4559e5(0xfc)])_0x22a05c=_0x2e1475[_0x4559e5(0xfc)];const _0x1449a2=await _0x27b061['getStateAsync'](_0x4559e5(0xec));if(_0x1449a2&&_0x1449a2['val'])_0x4ff9b4=_0x1449a2[_0x4559e5(0xfc)];}catch(_0x33ff95){}if(_0x22a05c===_0x4559e5(0x115)||_0x6f2243<_0x4ff9b4)return;const _0x5e8712=Date[_0x4559e5(0xc4)]();if(lastActions[_0x51a455]&&_0x5e8712-lastActions[_0x51a455]<COOLDOWN_MS)return;const _0x43b799=_0x27b061['config'][_0x4559e5(0xd7)]||[],_0xe99bca=normalize(_0x51a455),_0xaf2243=_0x43b799[_0x4559e5(0x10c)](_0x433846=>normalize(_0x433846[_0x4559e5(0x101)])===_0xe99bca&&(_0x433846[_0x4559e5(0x12e)]===_0x4559e5(0x11a)||_0x433846[_0x4559e5(0x12e)]===_0x4559e5(0x121)||_0x433846['type']==='switch'));if(!_0xaf2243)return;const _0x5336a5=await aiAgent[_0x4559e5(0xd8)](_0x27b061,_0x51a455,_0xaf2243[_0x4559e5(0x146)],_0x6f2243);if(!_0x5336a5['approved'])return;const _0x19d657='Pr√§diktion:\x20'+_0x51a455+'\x20->\x20Schalte\x20'+_0xaf2243[_0x4559e5(0x146)]+'\x20('+_0x5336a5[_0x4559e5(0xc9)]+')';await logAutomationAction(_0x27b061,'['+_0x22a05c[_0x4559e5(0x138)]()+']\x20'+_0x19d657);if(_0x22a05c===_0x4559e5(0x104)){const _0xde4b23=await _0x27b061[_0x4559e5(0x131)](_0xaf2243['id']);(!_0xde4b23||!_0xde4b23[_0x4559e5(0xfc)]&&_0xde4b23[_0x4559e5(0xfc)]!==!![])&&await _0x27b061[_0x4559e5(0xa6)](_0xaf2243['id'],!![]),lastActions[_0x51a455]=_0x5e8712;}}async function findRelatedId(_0x1833d9,_0x4d2aad,_0x5b3b2e=a1_0x46664b(0xea)){const _0x2498a1=a1_0x46664b;if(_0x5b3b2e===_0x2498a1(0xea)&&_0x1833d9[_0x2498a1(0x151)][_0x2498a1(0xcc)]){let _0x5e11ea=_0x1833d9[_0x2498a1(0x151)]['thermostatMapping'];if(typeof _0x5e11ea===_0x2498a1(0x122))try{_0x5e11ea=JSON['parse'](_0x5e11ea);}catch(_0x46dfbd){}if(_0x5e11ea&&_0x5e11ea[_0x4d2aad])return _0x5e11ea[_0x4d2aad];}if(_0x5b3b2e==='valve'&&_0x1833d9['config']['valveMapping']){let _0x19434d=_0x1833d9[_0x2498a1(0x151)][_0x2498a1(0xdf)];if(typeof _0x19434d===_0x2498a1(0x122))try{_0x19434d=JSON[_0x2498a1(0xdb)](_0x19434d);}catch(_0xf8502f){}if(_0x19434d&&_0x19434d[_0x4d2aad])return _0x19434d[_0x4d2aad];}let _0x1d4ea2=[];if(_0x5b3b2e==='setpoint')_0x1d4ea2=[{'s':_0x2498a1(0x10a),'t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x2498a1(0x9b),'t':_0x2498a1(0x14e)},{'s':_0x2498a1(0x9b),'t':_0x2498a1(0xf4)},{'s':_0x2498a1(0x90),'t':'SET_POINT_TEMPERATURE'},{'s':_0x2498a1(0xbb),'t':_0x2498a1(0x10f)},{'s':_0x2498a1(0xbb),'t':_0x2498a1(0xd2)},{'s':_0x2498a1(0xdc),'t':_0x2498a1(0x119)},{'s':_0x2498a1(0x14f),'t':_0x2498a1(0xa9)},{'s':_0x2498a1(0x134),'t':_0x2498a1(0xc7)},{'s':'temperature','t':'setpoint'}];else _0x5b3b2e===_0x2498a1(0xeb)&&(_0x1d4ea2=[{'s':_0x2498a1(0x10a),'t':_0x2498a1(0x156)},{'s':'.1.TEMPERATURE','t':_0x2498a1(0x156)},{'s':_0x2498a1(0x9b),'t':_0x2498a1(0x14d)},{'s':_0x2498a1(0xbb),'t':_0x2498a1(0xa3)},{'s':_0x2498a1(0xdc),'t':_0x2498a1(0x12a)},{'s':_0x2498a1(0xdc),'t':_0x2498a1(0xa7)}]);for(const _0x41d05c of _0x1d4ea2){if(_0x4d2aad['includes'](_0x41d05c['s'])){const _0x2072dd=_0x4d2aad[_0x2498a1(0x9d)](_0x41d05c['s'],_0x41d05c['t']),_0x446b4d=await _0x1833d9['getForeignObjectAsync'](_0x2072dd);if(_0x446b4d)return _0x2072dd;}}try{const _0x291741=_0x4d2aad[_0x2498a1(0xbf)]('.');if(_0x291741[_0x2498a1(0x123)]>0x2){const _0x41c1cc=_0x291741['slice'](0x0,-0x1)['join']('.'),_0x4c4ea4=await _0x1833d9[_0x2498a1(0xac)](_0x41c1cc+'.*'),_0x4c115c=[],_0x4402a4=_0x4d2aad['split'](/[._]+/)[_0x2498a1(0xb1)](_0x2f6292=>!['openknx','0',_0x2498a1(0xf8),_0x2498a1(0x139),_0x2498a1(0x127),_0x2498a1(0xdc),_0x2498a1(0x128),_0x2498a1(0x106),_0x2498a1(0xb4),'state'][_0x2498a1(0x13f)](_0x2f6292[_0x2498a1(0x107)]()));for(const [_0x2f723d,_0x4f0de7]of Object[_0x2498a1(0x9e)](_0x4c4ea4)){if(_0x2f723d===_0x4d2aad)continue;if(_0x4f0de7&&_0x4f0de7['common']){const _0x37be6e=_0x2f723d[_0x2498a1(0x107)](),_0x500c2c=(_0x4f0de7[_0x2498a1(0x111)][_0x2498a1(0x130)]||'')[_0x2498a1(0x107)](),_0x5b2aea=(_0x4f0de7['common'][_0x2498a1(0xe1)]||'')['toLowerCase']();let _0x3694e1=![];if(_0x5b3b2e===_0x2498a1(0xea)&&_0x4f0de7[_0x2498a1(0x111)][_0x2498a1(0x145)]===!![])_0x3694e1=_0x37be6e[_0x2498a1(0x13f)]('set')||_0x37be6e[_0x2498a1(0x13f)](_0x2498a1(0x12d))||_0x37be6e[_0x2498a1(0x13f)](_0x2498a1(0xb3))||_0x500c2c[_0x2498a1(0x13f)]('level.temperature')||_0x500c2c[_0x2498a1(0x13f)]('thermostat.setpoint');else _0x5b3b2e===_0x2498a1(0xeb)&&(_0x3694e1=_0x37be6e[_0x2498a1(0x13f)](_0x2498a1(0xa7))||_0x37be6e['includes']('valve')||_0x37be6e[_0x2498a1(0x13f)](_0x2498a1(0xf9))||_0x37be6e[_0x2498a1(0x13f)](_0x2498a1(0x11d))||_0x500c2c[_0x2498a1(0x13f)]('level.valve')||_0x500c2c['includes'](_0x2498a1(0x120))||_0x5b2aea[_0x2498a1(0x13f)]('%'));if(_0x3694e1){const _0x3fbf37=_0x2f723d[_0x2498a1(0xbf)](/[._]+/)[_0x2498a1(0x14a)](_0x372f93=>_0x372f93['toLowerCase']());let _0x18ec1c=0x0;_0x4402a4[_0x2498a1(0xe4)](_0x2a1230=>{const _0x37b430=_0x2498a1;if(_0x3fbf37[_0x37b430(0x13f)](_0x2a1230[_0x37b430(0x107)]()))_0x18ec1c++;}),_0x4c115c[_0x2498a1(0xd0)]({'id':_0x2f723d,'score':_0x18ec1c});}}}if(_0x4c115c[_0x2498a1(0x123)]>0x0){_0x4c115c[_0x2498a1(0x99)]((_0xcee738,_0x504c19)=>_0x504c19[_0x2498a1(0x149)]-_0xcee738[_0x2498a1(0x149)]);if(_0x4c115c[0x0]['score']>0x0)return _0x4c115c[0x0]['id'];}}}catch(_0x3fb6bb){}return null;}async function scanThermostats(_0x553ab9){const _0x56f755=a1_0x46664b,_0x29540e=_0x553ab9[_0x56f755(0x151)][_0x56f755(0xd7)]||[],_0x1efeb9=[],_0x2852bf=_0x29540e[_0x56f755(0xb1)](_0x3ed42d=>_0x3ed42d['id']&&_0x3ed42d['id'][_0x56f755(0x13f)](_0x56f755(0xdc))||_0x3ed42d[_0x56f755(0x12e)]&&[_0x56f755(0xdc),_0x56f755(0xf7),_0x56f755(0x106)][_0x56f755(0x13f)](_0x3ed42d[_0x56f755(0x12e)])||_0x3ed42d['name']&&_0x3ed42d['name']['toLowerCase']()[_0x56f755(0x13f)](_0x56f755(0xde)));for(const _0x1e7068 of _0x2852bf){const _0x11722f=await findRelatedId(_0x553ab9,_0x1e7068['id'],_0x56f755(0xea)),_0x17cc89=await findRelatedId(_0x553ab9,_0x1e7068['id'],_0x56f755(0xeb));let _0x4ca10a='Nicht\x20gefunden',_0x1f55cf=![],_0x20e415=_0x553ab9[_0x56f755(0x151)][_0x56f755(0xcc)]||{};if(typeof _0x20e415===_0x56f755(0x122))try{_0x20e415=JSON[_0x56f755(0xdb)](_0x20e415);}catch(_0x418120){}let _0x37f12b=_0x553ab9[_0x56f755(0x151)][_0x56f755(0xdf)]||{};if(typeof _0x37f12b===_0x56f755(0x122))try{_0x37f12b=JSON['parse'](_0x37f12b);}catch(_0x11f9e5){}if(_0x20e415[_0x1e7068['id']]&&_0x20e415[_0x1e7068['id']]===_0x11722f||_0x37f12b[_0x1e7068['id']]&&_0x37f12b[_0x1e7068['id']]===_0x17cc89)_0x4ca10a='Manuelles\x20Mapping',_0x1f55cf=!![];else(_0x11722f||_0x17cc89)&&(_0x4ca10a=_0x56f755(0x102));_0x1efeb9[_0x56f755(0xd0)]({'room':_0x1e7068[_0x56f755(0x101)]||_0x56f755(0x10e),'sensorId':_0x1e7068['id'],'setpointId':_0x11722f||'-','valveId':_0x17cc89||'-','source':_0x4ca10a,'isManual':_0x1f55cf,'status':_0x11722f&&_0x17cc89?_0x56f755(0x112):_0x11722f?'OK':_0x56f755(0x11b)});}return _0x1efeb9[_0x56f755(0x99)]((_0x17da79,_0x2a0bc5)=>_0x17da79[_0x56f755(0xc1)]['localeCompare'](_0x2a0bc5[_0x56f755(0xc1)]));}async function updateSchedulePreview(_0xf0ab57){const _0x43cf7e=a1_0x46664b;if(!_0xf0ab57[_0x43cf7e(0x151)][_0x43cf7e(0xa2)]||!_0xf0ab57['config'][_0x43cf7e(0xd5)])return;let _0x319cff={};try{const _0x40015b=await _0xf0ab57[_0x43cf7e(0x129)]('analysis.energy.warmupTimes');if(_0x40015b&&_0x40015b['val'])_0x319cff=JSON[_0x43cf7e(0xdb)](_0x40015b[_0x43cf7e(0xfc)]);}catch(_0x47ee57){}const _0x5f4cc9=[],_0x1535a4=Date[_0x43cf7e(0xc4)](),_0x25644=0x30*0x3c*0x3c*0x3e8;try{const _0xed6fae=await _0xf0ab57[_0x43cf7e(0x131)](_0xf0ab57[_0x43cf7e(0x151)][_0x43cf7e(0xd5)]+'.data.table');if(!_0xed6fae||!_0xed6fae[_0x43cf7e(0xfc)])return;const _0x540684=JSON[_0x43cf7e(0xdb)](_0xed6fae[_0x43cf7e(0xfc)]),_0x2dfcbb=_0xf0ab57[_0x43cf7e(0x151)][_0x43cf7e(0x14b)]||[],_0x2de9c8=_0xf0ab57['config'][_0x43cf7e(0xd7)]||[],_0x11632d=new Set();_0x2de9c8[_0x43cf7e(0xe4)](_0x1c1233=>{const _0x296399=_0x43cf7e;if(_0x1c1233[_0x296399(0x101)])_0x11632d[_0x296399(0xf0)](_0x1c1233[_0x296399(0x101)]);});for(const _0x47472f of _0x540684){if(_0x47472f['_calName']&&_0x2dfcbb[_0x43cf7e(0x123)]>0x0&&!_0x2dfcbb[_0x43cf7e(0x13f)](_0x47472f[_0x43cf7e(0x10b)]))continue;const _0x561d4a=_0x47472f[_0x43cf7e(0xe2)]||_0x47472f[_0x43cf7e(0xf1)]||_0x47472f[_0x43cf7e(0x157)];if(!_0x561d4a)continue;const _0x26140a=new Date(_0x561d4a),_0x1423a2=_0x26140a['getTime']();if(isNaN(_0x1423a2))continue;if(_0x1423a2<_0x1535a4)continue;if(_0x1423a2>_0x1535a4+_0x25644)continue;const _0x5eea70=(_0x47472f[_0x43cf7e(0x125)]||_0x47472f[_0x43cf7e(0xfb)]||'')[_0x43cf7e(0x107)]();let _0xb09ed3=![],_0x2c80e9=[],_0x3b2870=_0x47472f['event']||_0x47472f[_0x43cf7e(0xfb)]||_0x43cf7e(0x10e);if(_0x5eea70[_0x43cf7e(0x13f)](_0x43cf7e(0xcb))||_0x5eea70[_0x43cf7e(0x13f)]('r√ºckkehr')||_0x5eea70['includes'](_0x43cf7e(0x11c)))_0xb09ed3=!![],_0x2c80e9=Array[_0x43cf7e(0x155)](_0x11632d);else for(const _0x445e03 of _0x11632d){if(_0x5eea70[_0x43cf7e(0x13f)](_0x445e03[_0x43cf7e(0x107)]()))_0x2c80e9['push'](_0x445e03);}_0x2c80e9[_0x43cf7e(0x123)]>0x0&&_0x2c80e9['forEach'](_0x42f37d=>{const _0xbc3b07=_0x43cf7e;let _0x3ef8cf=0x3c;if(_0xb09ed3){let _0x190120=0x0;Object[_0xbc3b07(0xb5)](_0x319cff)[_0xbc3b07(0xe4)](_0x3d91e0=>{if(_0x3d91e0>_0x190120)_0x190120=_0x3d91e0;}),_0x3ef8cf=_0x190120>0x0?_0x190120:0x78;}else _0x3ef8cf=getWarmupRobust(_0x319cff,_0x42f37d);const _0x52aad7=new Date(_0x1423a2-_0x3ef8cf*0xea60);_0x5f4cc9[_0xbc3b07(0xd0)]({'eventTime':_0x1423a2,'triggerTime':_0x52aad7[_0xbc3b07(0xf3)](),'room':_0x42f37d,'minutes':_0x3ef8cf,'reason':_0x3b2870,'isGlobal':_0xb09ed3});});}}catch(_0x6a79b){}_0x5f4cc9[_0x43cf7e(0x99)]((_0x165c7a,_0xc730d4)=>_0x165c7a[_0x43cf7e(0xd9)]-_0xc730d4[_0x43cf7e(0xd9)]);const _0x39216b=_0x5f4cc9[_0x43cf7e(0xc2)](0x0,0x5);await _0xf0ab57[_0x43cf7e(0x153)](_0x43cf7e(0xee),{'val':JSON[_0x43cf7e(0x14c)](_0x39216b),'ack':!![]});}async function monitorEnforcements(_0xea257){const _0x30fcd8=a1_0x46664b;try{const _0x2d3c08=_0x30fcd8(0x137),_0x16a925=await _0xea257[_0x30fcd8(0x129)](_0x2d3c08);if(!_0x16a925||!_0x16a925[_0x30fcd8(0xfc)])return;let _0x505bb0=[];try{_0x505bb0=JSON[_0x30fcd8(0xdb)](_0x16a925[_0x30fcd8(0xfc)]);}catch(_0x22b185){return;}if(!Array[_0x30fcd8(0x12c)](_0x505bb0)||_0x505bb0[_0x30fcd8(0x123)]===0x0)return;const _0x558386=Date[_0x30fcd8(0xc4)](),_0x1c5c88=_0xea257['config']['devices']||[];let _0x5af6c8=![];for(let _0x186933=_0x505bb0[_0x30fcd8(0x123)]-0x1;_0x186933>=0x0;_0x186933--){const _0x19517e=_0x505bb0[_0x186933];if(_0x558386>=_0x19517e[_0x30fcd8(0x12f)]){_0xea257[_0x30fcd8(0x95)][_0x30fcd8(0x148)](_0x30fcd8(0xa8)+_0x19517e['room']+_0x30fcd8(0xe6)),_0x505bb0['splice'](_0x186933,0x1),_0x5af6c8=!![];continue;}const _0xc7162=_0x1c5c88['find'](_0x3f439e=>normalize(_0x3f439e[_0x30fcd8(0x101)])===normalize(_0x19517e['room'])&&(_0x3f439e[_0x30fcd8(0x12e)]==='temperature'||_0x3f439e[_0x30fcd8(0x12e)]===_0x30fcd8(0xf7)));if(_0xc7162){const _0x144044=await findRelatedId(_0xea257,_0xc7162['id'],_0x30fcd8(0xea));if(_0x144044){const _0x594abc=await _0xea257[_0x30fcd8(0x131)](_0x144044);_0x594abc&&typeof _0x594abc[_0x30fcd8(0xfc)]===_0x30fcd8(0x91)&&(_0x594abc[_0x30fcd8(0xfc)]<0xf&&(_0xea257[_0x30fcd8(0x95)][_0x30fcd8(0x150)](_0x30fcd8(0x140)+_0x19517e[_0x30fcd8(0xc1)]+'\x20auf\x20'+_0x594abc[_0x30fcd8(0xfc)]+_0x30fcd8(0xb8)+_0x19517e[_0x30fcd8(0xb3)]+_0x30fcd8(0x13a)),await _0xea257['setForeignStateAsync'](_0x144044,_0x19517e[_0x30fcd8(0xb3)]),await logAutomationAction(_0xea257,_0x30fcd8(0xc5)+_0x19517e[_0x30fcd8(0xc1)]+':\x20'+_0x594abc[_0x30fcd8(0xfc)]+'¬∞C\x20->\x20'+_0x19517e[_0x30fcd8(0xb3)]+'¬∞C\x20(Kalender-Schutz)')));}}}_0x5af6c8&&await _0xea257[_0x30fcd8(0x153)](_0x2d3c08,{'val':JSON['stringify'](_0x505bb0),'ack':!![]});}catch(_0x5f5034){_0xea257[_0x30fcd8(0x95)][_0x30fcd8(0xfe)](_0x30fcd8(0x132)+_0x5f5034[_0x30fcd8(0xbd)]);}}async function checkCalendarTriggers(_0x50ce26){const _0x5ad18f=a1_0x46664b;if(!_0x50ce26[_0x5ad18f(0x151)]['useCalendar']||!_0x50ce26[_0x5ad18f(0x151)][_0x5ad18f(0xd5)])return;await updateSchedulePreview(_0x50ce26);let _0x456629={},_0x2c579a={};try{const _0x338793=await _0x50ce26[_0x5ad18f(0x129)](_0x5ad18f(0x152));if(_0x338793&&_0x338793['val'])_0x456629=JSON['parse'](_0x338793[_0x5ad18f(0xfc)]);const _0x4523c9=await _0x50ce26['getStateAsync'](_0x5ad18f(0xce));if(_0x4523c9&&_0x4523c9[_0x5ad18f(0xfc)])_0x2c579a=JSON[_0x5ad18f(0xdb)](_0x4523c9[_0x5ad18f(0xfc)]);}catch(_0x49ac72){}let _0x178a87={'default':0x15};try{const _0x489929=await _0x50ce26[_0x5ad18f(0x129)](_0x5ad18f(0xaf));if(_0x489929&&_0x489929[_0x5ad18f(0xfc)])_0x178a87=JSON[_0x5ad18f(0xdb)](_0x489929[_0x5ad18f(0xfc)]);}catch(_0x5b4e2d){}let _0x4a485b=[];try{const _0x575d8b=await _0x50ce26[_0x5ad18f(0x129)](_0x5ad18f(0x137));if(_0x575d8b&&_0x575d8b[_0x5ad18f(0xfc)])_0x4a485b=JSON[_0x5ad18f(0xdb)](_0x575d8b['val']);}catch(_0x22e776){}try{const _0x57e50b=await _0x50ce26[_0x5ad18f(0x131)](_0x50ce26[_0x5ad18f(0x151)][_0x5ad18f(0xd5)]+_0x5ad18f(0x135));if(!_0x57e50b||!_0x57e50b[_0x5ad18f(0xfc)])return;const _0xa297e9=JSON['parse'](_0x57e50b[_0x5ad18f(0xfc)]),_0x48f156=Date[_0x5ad18f(0xc4)](),_0x19d974=_0x50ce26['config'][_0x5ad18f(0xd7)]||[],_0x477f40=_0x50ce26[_0x5ad18f(0x151)][_0x5ad18f(0x14b)]||[];let _0x4179a5=![];for(const _0x2ef933 of _0xa297e9){if(_0x2ef933['_calName']&&_0x477f40[_0x5ad18f(0x123)]>0x0&&!_0x477f40[_0x5ad18f(0x13f)](_0x2ef933['_calName']))continue;const _0x13d123=_0x2ef933[_0x5ad18f(0xe2)]||_0x2ef933[_0x5ad18f(0xf1)]||_0x2ef933['date'];if(!_0x13d123)continue;const _0x3919c2=new Date(_0x13d123);if(isNaN(_0x3919c2[_0x5ad18f(0xf3)]()))continue;const _0x3d6dec=(_0x2ef933[_0x5ad18f(0x125)]||_0x2ef933[_0x5ad18f(0xfb)]||'')[_0x5ad18f(0x107)]();if(_0x3d6dec[_0x5ad18f(0x13f)](_0x5ad18f(0xcb))||_0x3d6dec[_0x5ad18f(0x13f)]('r√ºckkehr')||_0x3d6dec[_0x5ad18f(0x13f)]('ankunft')){let _0x9d9e9b=0x0;Object[_0x5ad18f(0xb5)](_0x456629)[_0x5ad18f(0xe4)](_0x2abab7=>{if(_0x2abab7>_0x9d9e9b)_0x9d9e9b=_0x2abab7;});if(_0x9d9e9b===0x0)_0x9d9e9b=0x78;const _0x102c17=_0x3919c2[_0x5ad18f(0xf3)]()-_0x9d9e9b*0xea60;_0x48f156>=_0x102c17&&_0x48f156<_0x3919c2['getTime']()&&(_0x50ce26[_0x5ad18f(0xf6)]!==_0x5ad18f(0x126)&&(_0x50ce26[_0x5ad18f(0x95)]['info'](_0x5ad18f(0xba)+_0x9d9e9b+_0x5ad18f(0x98)),await _0x50ce26[_0x5ad18f(0x153)](_0x5ad18f(0x147),{'val':'normal','ack':![]})));}for(const _0x5d59d4 of _0x19d974){if(_0x5d59d4['location']){const _0x5978ee=_0x5d59d4[_0x5ad18f(0x101)][_0x5ad18f(0x107)](),_0x1d5bca=(_0x5d59d4[_0x5ad18f(0x146)]||'')[_0x5ad18f(0x107)]();let _0x1c483c=_0x3d6dec[_0x5ad18f(0x13f)](_0x5978ee);!_0x1c483c&&_0x1d5bca[_0x5ad18f(0x123)]>0x3&&_0x3d6dec['includes'](_0x1d5bca)&&(_0x1c483c=!![]);if(_0x1c483c){const _0x4ed0a9=getWarmupRobust(_0x456629,_0x5d59d4[_0x5ad18f(0x101)]),_0xad0613=_0x2c579a[_0x5d59d4['location']]||_0x5ad18f(0x13c),_0x38c862=_0x3919c2[_0x5ad18f(0xf3)]()-_0x4ed0a9*0xea60;if(_0x48f156>=_0x38c862&&_0x48f156<_0x3919c2[_0x5ad18f(0xf3)]()){const _0x1361fb=lastActions[_0x5ad18f(0xe8)+_0x5d59d4[_0x5ad18f(0x101)]];if(_0x1361fb&&_0x48f156-_0x1361fb<CAL_COOLDOWN_MS)continue;const _0x52577b=await findRelatedId(_0x50ce26,_0x5d59d4['id'],'setpoint');if(_0x52577b){let _0x5a4845=_0x178a87[_0x5d59d4[_0x5ad18f(0x101)]];if(_0x5a4845===undefined)_0x5a4845=_0x178a87['default'];if(_0x5a4845===undefined)_0x5a4845=0x15;const _0x1be277=await _0x50ce26[_0x5ad18f(0x131)](_0x52577b);if(_0x1be277&&typeof _0x1be277['val']===_0x5ad18f(0x91)&&_0x1be277['val']<_0x5a4845-0.5){_0x50ce26[_0x5ad18f(0x95)][_0x5ad18f(0x148)](_0x5ad18f(0x118)+_0xad0613+_0x5ad18f(0x117)+_0x5d59d4['location']+_0x5ad18f(0xff)+_0x3d6dec+_0x5ad18f(0xb9)+_0x5a4845+_0x5ad18f(0x113)+_0x4ed0a9+'\x20min).'),await _0x50ce26[_0x5ad18f(0xa6)](_0x52577b,_0x5a4845),await logAutomationAction(_0x50ce26,_0x5ad18f(0xc3)+_0x5d59d4['location']+_0x5ad18f(0xd1)+_0x5a4845+_0x5ad18f(0x133)+_0xad0613+')'),lastActions[_0x5ad18f(0xe8)+_0x5d59d4[_0x5ad18f(0x101)]]=_0x48f156;const _0x5c418b=_0x4a485b['findIndex'](_0x35493c=>_0x35493c[_0x5ad18f(0xc1)]===_0x5d59d4[_0x5ad18f(0x101)]);if(_0x5c418b!==-0x1)_0x4a485b[_0x5ad18f(0xb0)](_0x5c418b,0x1);_0x4a485b['push']({'room':_0x5d59d4['location'],'target':_0x5a4845,'until':_0x3919c2['getTime']()}),_0x4179a5=!![];}}}}}}}_0x4179a5&&await _0x50ce26[_0x5ad18f(0x153)](_0x5ad18f(0x137),{'val':JSON[_0x5ad18f(0x14c)](_0x4a485b),'ack':!![]});}catch(_0x4c3a22){_0x50ce26[_0x5ad18f(0x95)][_0x5ad18f(0x150)](_0x5ad18f(0xbe)+_0x4c3a22[_0x5ad18f(0xbd)]);}}function a1_0x5682(_0x463c31,_0x4782b6){const _0x335818=a1_0x2d78();return a1_0x5682=function(_0xe1151e,_0x3e688b){_0xe1151e=_0xe1151e-0x8f;let _0x2d784d=_0x335818[_0xe1151e];return _0x2d784d;},a1_0x5682(_0x463c31,_0x4782b6);}async function manageMpcIntervention(_0x47be7d,_0x12679a,_0x3c0730){const _0x152dca=a1_0x46664b;try{const _0x51cc6f=_0x152dca(0x8f),_0x4a11f4=await _0x47be7d['getStateAsync'](_0x51cc6f);let _0x2ddefe=[];if(_0x4a11f4&&_0x4a11f4[_0x152dca(0xfc)])try{_0x2ddefe=JSON['parse'](_0x4a11f4['val']);}catch(_0x5dad80){}const _0x2b9446=_0x2ddefe[_0x152dca(0x13b)](_0x12679a);if(_0x3c0730===_0x152dca(0xf0))_0x2b9446===-0x1&&(_0x2ddefe[_0x152dca(0xd0)](_0x12679a),await _0x47be7d['setStateAsync'](_0x51cc6f,{'val':JSON[_0x152dca(0x14c)](_0x2ddefe),'ack':!![]}));else _0x3c0730===_0x152dca(0x12b)&&(_0x2b9446!==-0x1&&(_0x2ddefe[_0x152dca(0xb0)](_0x2b9446,0x1),await _0x47be7d[_0x152dca(0x153)](_0x51cc6f,{'val':JSON[_0x152dca(0x14c)](_0x2ddefe),'ack':!![]})));}catch(_0x29ab83){}}async function cleanupGhostInterventions(_0x188c31){const _0x4b555f=a1_0x46664b;try{const _0x33f463=_0x4b555f(0x8f),_0x1658c8=await _0x188c31[_0x4b555f(0x129)](_0x33f463);if(!_0x1658c8||!_0x1658c8['val'])return;const _0x33d957=JSON[_0x4b555f(0xdb)](_0x1658c8[_0x4b555f(0xfc)]);if(!Array['isArray'](_0x33d957)||_0x33d957[_0x4b555f(0x123)]===0x0)return;let _0x1e5d5e={'default':0x15};try{const _0x57cbdf=await _0x188c31['getStateAsync']('analysis.energy.warmupTargets');if(_0x57cbdf&&_0x57cbdf[_0x4b555f(0xfc)])_0x1e5d5e=JSON[_0x4b555f(0xdb)](_0x57cbdf['val']);}catch(_0x23c20f){}let _0x1e27bc=[];try{const _0x5f3d29=await _0x188c31[_0x4b555f(0x129)](_0x4b555f(0x13e));if(_0x5f3d29&&_0x5f3d29[_0x4b555f(0xfc)])_0x1e27bc=JSON[_0x4b555f(0xdb)](_0x5f3d29[_0x4b555f(0xfc)]);}catch(_0xec3096){}let _0x15bfea={},_0x520fd1=![];try{const _0x1e4ebf=await _0x188c31[_0x4b555f(0x129)](_0x4b555f(0x9c));if(_0x1e4ebf&&_0x1e4ebf[_0x4b555f(0xfc)])_0x15bfea=JSON['parse'](_0x1e4ebf[_0x4b555f(0xfc)]);}catch(_0x120b3f){}if(_0x15bfea['_meta']){const _0x21e509=Date[_0x4b555f(0xc4)]();for(const [_0x985bb2,_0x299288]of Object['entries'](_0x15bfea[_0x4b555f(0xae)])){_0x21e509-_0x299288>PENALTY_TTL&&(delete _0x15bfea[_0x985bb2],delete _0x15bfea['_meta'][_0x985bb2],_0x520fd1=!![],_0x188c31[_0x4b555f(0x95)][_0x4b555f(0x148)]('üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27'+_0x985bb2+_0x4b555f(0xca)));}}const _0x2b7011=_0x188c31['config']['devices']||[];let _0xf54dbc=![];for(let _0x16c6d9=_0x33d957['length']-0x1;_0x16c6d9>=0x0;_0x16c6d9--){const _0x1ef3a6=_0x33d957[_0x16c6d9],_0x28312f=_0x2b7011[_0x4b555f(0x10c)](_0x3a46fd=>normalize(_0x3a46fd['location'])===normalize(_0x1ef3a6)&&(_0x3a46fd[_0x4b555f(0x12e)]===_0x4b555f(0xdc)||_0x3a46fd[_0x4b555f(0x12e)]===_0x4b555f(0xf7)));if(!_0x28312f){_0x188c31['log']['warn'](_0x4b555f(0xf2)+_0x1ef3a6+'\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.'),_0x33d957[_0x4b555f(0xb0)](_0x16c6d9,0x1),_0xf54dbc=!![];continue;}if(_0x28312f){const _0x3382b2=await findRelatedId(_0x188c31,_0x28312f['id'],_0x4b555f(0xea)),_0xa80ba1=await _0x188c31[_0x4b555f(0x131)](_0x28312f['id']);if(_0x3382b2){const _0x5d9bf4=await _0x188c31[_0x4b555f(0x131)](_0x3382b2);if(_0x5d9bf4&&typeof _0x5d9bf4[_0x4b555f(0xfc)]===_0x4b555f(0x91)){let _0x5ac7e0=![],_0x5eae18='';Math[_0x4b555f(0xe3)](_0x5d9bf4[_0x4b555f(0xfc)]-ECO_TEMP)>0.5&&(_0x5ac7e0=!![],_0x5eae18=_0x4b555f(0xc6));if(!_0x5ac7e0&&_0xa80ba1&&typeof _0xa80ba1['val']===_0x4b555f(0x91)){const _0x3d5591=_0x1e5d5e[_0x1ef3a6]||_0x1e5d5e[_0x4b555f(0xb6)]||0x15;_0xa80ba1['val']<_0x3d5591+0.2&&(_0x5ac7e0=!![],_0x5eae18=_0x4b555f(0x136));}if(_0x5ac7e0){if(_0x5eae18===_0x4b555f(0xc6)){_0x188c31['log'][_0x4b555f(0x148)](_0x4b555f(0xdd)+_0x1ef3a6+_0x4b555f(0xa0)+_0x5d9bf4[_0x4b555f(0xfc)]+_0x4b555f(0xda)+ECO_TEMP+_0x4b555f(0xed));const _0x29c52d=lastActions[_0x4b555f(0xe8)+_0x1ef3a6],_0x29fe95=_0x29c52d&&Date[_0x4b555f(0xc4)]()-_0x29c52d<0x2*0x3c*0x3e8;if(!_0x29fe95&&_0x5d9bf4[_0x4b555f(0xfc)]>ECO_TEMP+0.5){_0x188c31[_0x4b555f(0xb7)]&&(_0x188c31[_0x4b555f(0x95)][_0x4b555f(0x148)]('üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20'+_0x1ef3a6+_0x4b555f(0x114)),_0x188c31['sendToPythonWrapper'](_0x4b555f(0x97),{'room':_0x1ef3a6}));const _0x3d8bd8=_0x1ef3a6+'_'+new Date()[_0x4b555f(0xa5)]();if(!_0x15bfea[_0x3d8bd8]){_0x15bfea[_0x3d8bd8]=0x1;if(!_0x15bfea[_0x4b555f(0xae)])_0x15bfea[_0x4b555f(0xae)]={};_0x15bfea[_0x4b555f(0xae)][_0x3d8bd8]=Date['now'](),_0x520fd1=!![];}}else _0x29fe95&&_0x188c31[_0x4b555f(0x95)]['info']('üìÖ\x20[MPC\x20INFO]\x20'+_0x1ef3a6+'\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.');}else{if(_0x5eae18===_0x4b555f(0x136)){let _0x6caaa3=![];if(_0x1e27bc[_0x4b555f(0x10c)](_0x19817f=>_0x19817f[_0x4b555f(0xc1)]===_0x1ef3a6))_0x6caaa3=!![];const _0x56d7c3=_0x2b7011[_0x4b555f(0xb1)](_0x967fa8=>normalize(_0x967fa8[_0x4b555f(0x101)])===normalize(_0x1ef3a6)&&(_0x967fa8[_0x4b555f(0x12e)]===_0x4b555f(0xab)||_0x967fa8[_0x4b555f(0x12e)]===_0x4b555f(0x106)||_0x967fa8[_0x4b555f(0x12e)]===_0x4b555f(0xaa)));for(const _0x2e4f6a of _0x56d7c3){try{const _0x58b1ca=await _0x188c31[_0x4b555f(0x131)](_0x2e4f6a['id']);if(_0x58b1ca&&(_0x58b1ca['val']===!![]||_0x58b1ca[_0x4b555f(0xfc)]===0x1||String(_0x58b1ca[_0x4b555f(0xfc)])[_0x4b555f(0x107)]()==='open'))_0x6caaa3=!![];}catch(_0x4bb27e){}}if(_0x6caaa3)_0x188c31[_0x4b555f(0x95)]['info']('üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20'+_0x1ef3a6+_0x4b555f(0x143));else{const _0x21959d=_0x1e5d5e[_0x1ef3a6]||_0x1e5d5e[_0x4b555f(0xb6)]||0x15;_0x188c31['log'][_0x4b555f(0x148)](_0x4b555f(0xe7)+_0x1ef3a6+_0x4b555f(0xcd)+_0xa80ba1[_0x4b555f(0xfc)]+_0x4b555f(0x11f)+(_0x21959d+0.2)+_0x4b555f(0x158)),await _0x188c31['setForeignStateAsync'](_0x3382b2,_0x21959d),await logAutomationAction(_0x188c31,_0x4b555f(0x13d)+_0x1ef3a6+':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20'+_0x21959d+'¬∞C'),lastActions[_0x4b555f(0xd6)+_0x1ef3a6]=Date[_0x4b555f(0xc4)]();}}}_0x33d957[_0x4b555f(0xb0)](_0x16c6d9,0x1),_0xf54dbc=!![];}}}}}_0xf54dbc&&await _0x188c31[_0x4b555f(0x153)](_0x33f463,{'val':JSON[_0x4b555f(0x14c)](_0x33d957),'ack':!![]}),_0x520fd1&&await _0x188c31[_0x4b555f(0x153)](_0x4b555f(0x9c),{'val':JSON['stringify'](_0x15bfea),'ack':!![]});}catch(_0x44b912){}}async function applyEnergySavings(_0x1740fc,_0x3685b9){const _0x271357=a1_0x46664b;await cleanupGhostInterventions(_0x1740fc);if(!_0x3685b9||_0x3685b9[_0x271357(0x123)]===0x0)return;const _0x2173c7=_0x1740fc[_0x271357(0x151)]['devices']||[],_0x20d178=Date[_0x271357(0xc4)]();for(const _0x559c12 of _0x3685b9){const _0x243f77=_0x559c12[_0x271357(0xc1)],_0x5725bb=_0x559c12[_0x271357(0x105)],_0x2b995d=_0x559c12['target']||0x15;if(lastActions['rescue_'+_0x243f77]&&_0x20d178-lastActions[_0x271357(0xd6)+_0x243f77]<RESCUE_LOCK_MS)continue;const _0x42d033=_0x2173c7[_0x271357(0x10c)](_0x569d95=>normalize(_0x569d95[_0x271357(0x101)])===normalize(_0x243f77)&&(_0x569d95[_0x271357(0x12e)]===_0x271357(0xdc)||_0x569d95['type']===_0x271357(0xf7)));if(!_0x42d033)continue;const _0x473326=await findRelatedId(_0x1740fc,_0x42d033['id'],_0x271357(0xea));if(_0x473326){if(lastActions[_0x271357(0xc8)+_0x243f77]&&_0x20d178-lastActions[_0x271357(0xc8)+_0x243f77]<0x1e*0x3c*0x3e8)continue;const _0x1f8c7e=await _0x1740fc[_0x271357(0x131)](_0x473326);if(_0x1f8c7e&&typeof _0x1f8c7e[_0x271357(0xfc)]===_0x271357(0x91)){const _0x2e6365=_0x1f8c7e[_0x271357(0xfc)];_0x2e6365!==ECO_TEMP&&await manageMpcIntervention(_0x1740fc,_0x243f77,_0x271357(0x12b));if(_0x5725bb>0x1e)_0x2e6365>ECO_TEMP+0.5&&(_0x1740fc[_0x271357(0x95)][_0x271357(0x148)](_0x271357(0x109)+_0x243f77+_0x271357(0x116)+ECO_TEMP+_0x271357(0xa4)+_0x5725bb+_0x271357(0xe0)),await _0x1740fc['setForeignStateAsync'](_0x473326,ECO_TEMP),await manageMpcIntervention(_0x1740fc,_0x243f77,_0x271357(0xf0)),lastActions[_0x271357(0xc8)+_0x243f77]=_0x20d178,await logAutomationAction(_0x1740fc,_0x271357(0xb2)+_0x243f77+_0x271357(0x94)+ECO_TEMP+'¬∞C'));else _0x5725bb<=0xf&&(_0x2e6365<_0x2b995d&&(_0x1740fc['log']['info'](_0x271357(0x110)+_0x243f77+_0x271357(0xef)+_0x2b995d+_0x271357(0x154)),await _0x1740fc[_0x271357(0xa6)](_0x473326,_0x2b995d),await manageMpcIntervention(_0x1740fc,_0x243f77,_0x271357(0x12b)),lastActions[_0x271357(0xc8)+_0x243f77]=_0x20d178,await logAutomationAction(_0x1740fc,'[MPC]\x20'+_0x243f77+_0x271357(0xfa)+_0x2b995d+'¬∞C')));}}else _0x1740fc[_0x271357(0x95)][_0x271357(0x150)](_0x271357(0x9a)+_0x243f77+'\x20gefunden!');}}module[a1_0x46664b(0x142)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};