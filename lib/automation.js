const a1_0x34e7e=a1_0x31d3;(function(_0x5830b2,_0x5af1c7){const _0x35692d=a1_0x31d3,_0x37c9e4=_0x5830b2();while(!![]){try{const _0x124c39=-parseInt(_0x35692d(0x1b0))/0x1*(parseInt(_0x35692d(0x171))/0x2)+parseInt(_0x35692d(0x1a6))/0x3+parseInt(_0x35692d(0x16a))/0x4*(-parseInt(_0x35692d(0x1f0))/0x5)+-parseInt(_0x35692d(0x19f))/0x6+-parseInt(_0x35692d(0x21b))/0x7+-parseInt(_0x35692d(0x179))/0x8+parseInt(_0x35692d(0x1ec))/0x9;if(_0x124c39===_0x5af1c7)break;else _0x37c9e4['push'](_0x37c9e4['shift']());}catch(_0x34ead5){_0x37c9e4['push'](_0x37c9e4['shift']());}}}(a1_0x1a4f,0x581d5));const a1_0x3fac21=(function(){let _0x292974=!![];return function(_0x5c99bd,_0x452e47){const _0x463f7c=_0x292974?function(){const _0x1a0e57=a1_0x31d3;if(_0x452e47){const _0x4f47f9=_0x452e47[_0x1a0e57(0x1c8)](_0x5c99bd,arguments);return _0x452e47=null,_0x4f47f9;}}:function(){};return _0x292974=![],_0x463f7c;};}()),a1_0x2097b6=a1_0x3fac21(this,function(){const _0x64d4d3=a1_0x31d3;return a1_0x2097b6[_0x64d4d3(0x1a0)]()[_0x64d4d3(0x17b)]('(((.+)+)+)+$')['toString']()[_0x64d4d3(0x1da)](a1_0x2097b6)[_0x64d4d3(0x17b)](_0x64d4d3(0x1e4));});a1_0x2097b6();'use strict';const aiAgent=require(a1_0x34e7e(0x170)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x98baa3){const _0x37b0e8=a1_0x34e7e;if(!_0x98baa3)return'';return _0x98baa3[_0x37b0e8(0x1af)]()[_0x37b0e8(0x1fa)](/\s+/g,'')[_0x37b0e8(0x1c9)]();}function getWarmupRobust(_0x445f46,_0x189b78){const _0x802e85=a1_0x34e7e;if(!_0x445f46||!_0x189b78)return 0x3c;if(_0x445f46[_0x189b78]!==undefined)return _0x445f46[_0x189b78];const _0x4f4c2e=_0x189b78[_0x802e85(0x1af)]()[_0x802e85(0x1fa)](/Ã¤/g,'ae')['replace'](/Ã¶/g,'oe')[_0x802e85(0x1fa)](/Ã¼/g,'ue')[_0x802e85(0x1fa)](/ÃŸ/g,'ss')['replace'](/\s+/g,'_')[_0x802e85(0x1fa)](/[^a-z0-9_]/g,'');if(_0x445f46[_0x4f4c2e]!==undefined)return _0x445f46[_0x4f4c2e];return 0x3c;}function a1_0x31d3(_0x22da48,_0x4b9c12){const _0x5b3a44=a1_0x1a4f();return a1_0x31d3=function(_0x2097b6,_0x3fac21){_0x2097b6=_0x2097b6-0x155;let _0x1a4fd2=_0x5b3a44[_0x2097b6];return _0x1a4fd2;},a1_0x31d3(_0x22da48,_0x4b9c12);}function a1_0x1a4f(){const _0x2b8b8d=['summary','ist','localeCompare','forEach','getTime','location','\x20ist\x20auf\x20','sort','entries','analysis.automation.lastAction','eventStart','target','getForeignStateAsync','urlaub\x20ende','useCalendar','Soll','slice','Â°C!\x20(Puffer\x20leer).','calendarInstance','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','SET_POINT_TEMPERATURE','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.',':\x20Aufheizen\x20auf\x20','split','Â°C\x20(via\x20',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','sendToPythonWrapper','analysis.energy.mpcActiveInterventions','.1.TEMPERATURE','event','3740574QGconb','toString','join','analysis.energy.warmupTargets','setStateAsync','set','length','1217088NGOGXt','Â°C\x20<\x20','from','now','[WATCHDOG]\x20','until','Classic','Â°C).\x20Entferne\x20Status.','analysis.automation.actionLog','toLowerCase','2WSVriW','[MPC]\x20','.1.SET_POINT_TEMPERATURE','stringify','cal_','window','_calName','switch','Calendar\x20Check\x20Error:\x20','\x20auf\x20','manual','contact','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','\x20->\x20Schalte\x20','Â°C\x20(nicht\x20','Â°C!\x20(Puffer:\x20','\x20min)','log','active','unit','Enforcement\x20Monitor\x20Error:\x20','Unbekannt','string','getForeignObjectAsync','apply','trim','reason','remove','ACTUAL','Â°C).\x20Sparmodus\x20beendet!','messwert','includes','local_temperature','thermostat','rÃ¼ckkehr','ðŸ“…\x20[MPC\x20INFO]\x20','score','current_heating_setpoint','TRAIN_RL_PENALTY','approved','level.valve',']:\x20Raum-Trigger\x20\x27','constructor','.1.LEVEL','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','values','setForeignStateAsync','\x20wieder\x20auf\x20','Â°C\x20(Vorlauf:\x20','common','state','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','(((.+)+)+)+$','Unknown','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','stellwert','PERFECT','room','type','mpc_','17956107QWQPlF','system.mode','role','.4.SET_TEMPERATURE','5VCrHaC','filter','map','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','currentSystemMode','temperature','sensor','target_temperature','Auto-Erkennung','analysis.automation.mode','replace','Manuelles\x20Mapping','occupied_heating_setpoint','minutes_safe','triggerTime','indexOf','\x20wurde\x20manuell\x20erhÃ¶ht.','normal','find','valveMapping','Fehlt','ACTUAL_TEMPERATURE','.data.table','wert','Â°C.','\x20min).','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','isArray','level.temperature','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','setpoint','valve_position',')\x20aktiv.\x20Heize\x20auf\x20','Â°C\x20->\x20','add','off','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','toUpperCase','analysis.energy.activeEnforcements','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','temp','too_cold','devices','1031954IvwGCf','valve','analysis.energy.warmupSources','config','actual','name','parse','push','calendarSelection','warn','ðŸ“…\x20SMART\x20SCHEDULE\x20[','number','message','analysis.energy.ventilationAlerts','getStateAsync','[FORCE]\x20','info','getForeignObjectsAsync','[CAL]\x20','default','error','_meta','_date','getHours','1888536SOpzID','ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27','splice','exports','val','thermostatMapping','./ai_agent','406124wfPpeZ','level','Ist','\x27\x20(Match:\x20','date',':\x20Absenkung\x20auf\x20','analysis.energy.rlPenalties','light','3126344UcGvRf','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','search','ankunft','consultButler','analysis.energy.warmupTimes','rescue_','soll'];a1_0x1a4f=function(){return _0x2b8b8d;};return a1_0x1a4f();}async function logAutomationAction(_0xadc9a0,_0x443062){const _0x2de042=a1_0x34e7e;await _0xadc9a0[_0x2de042(0x1a3)](_0x2de042(0x18a),{'val':_0x443062,'ack':!![]});try{const _0x5c7aba=_0x2de042(0x1ae),_0x597058=await _0xadc9a0[_0x2de042(0x160)](_0x5c7aba);let _0xaeb265=[];if(_0x597058&&_0x597058['val'])try{_0xaeb265=JSON[_0x2de042(0x158)](_0x597058[_0x2de042(0x16e)]);}catch(_0x4619b9){}_0xaeb265['unshift']({'ts':Date[_0x2de042(0x1a9)](),'msg':_0x443062});if(_0xaeb265[_0x2de042(0x1a5)]>0x32)_0xaeb265=_0xaeb265['slice'](0x0,0x32);await _0xadc9a0[_0x2de042(0x1a3)](_0x5c7aba,{'val':JSON[_0x2de042(0x1b3)](_0xaeb265),'ack':!![]});}catch(_0x1761e4){}}async function handlePrediction(_0x4384e6,_0x59e483,_0x4dc13f){const _0x43a351=a1_0x34e7e;if(!_0x59e483||_0x59e483===_0x43a351(0x1e5))return;let _0x1c3d22=_0x43a351(0x213),_0x49def7=0.6;try{const _0x5489be=await _0x4384e6[_0x43a351(0x160)](_0x43a351(0x1f9));if(_0x5489be&&_0x5489be[_0x43a351(0x16e)])_0x1c3d22=_0x5489be[_0x43a351(0x16e)];const _0x353121=await _0x4384e6[_0x43a351(0x160)]('analysis.automation.confidenceThreshold');if(_0x353121&&_0x353121[_0x43a351(0x16e)])_0x49def7=_0x353121['val'];}catch(_0x2edf28){}if(_0x1c3d22===_0x43a351(0x213)||_0x4dc13f<_0x49def7)return;const _0x394660=Date[_0x43a351(0x1a9)]();if(lastActions[_0x59e483]&&_0x394660-lastActions[_0x59e483]<COOLDOWN_MS)return;const _0x4622b9=_0x4384e6[_0x43a351(0x155)][_0x43a351(0x21a)]||[],_0xdd28b7=normalize(_0x59e483),_0xb7d6a2=_0x4622b9[_0x43a351(0x202)](_0x4a6f4c=>normalize(_0x4a6f4c['location'])===_0xdd28b7&&(_0x4a6f4c[_0x43a351(0x1ea)]===_0x43a351(0x178)||_0x4a6f4c[_0x43a351(0x1ea)]==='dimmer'||_0x4a6f4c[_0x43a351(0x1ea)]===_0x43a351(0x1b7)));if(!_0xb7d6a2)return;const _0x425304=await aiAgent[_0x43a351(0x17d)](_0x4384e6,_0x59e483,_0xb7d6a2['name'],_0x4dc13f);if(!_0x425304[_0x43a351(0x1d7)])return;const _0x4a2ab5='PrÃ¤diktion:\x20'+_0x59e483+_0x43a351(0x1bd)+_0xb7d6a2[_0x43a351(0x157)]+'\x20('+_0x425304[_0x43a351(0x1ca)]+')';await logAutomationAction(_0x4384e6,'['+_0x1c3d22[_0x43a351(0x215)]()+']\x20'+_0x4a2ab5);if(_0x1c3d22===_0x43a351(0x1c2)){const _0x5e27d3=await _0x4384e6[_0x43a351(0x18d)](_0xb7d6a2['id']);(!_0x5e27d3||!_0x5e27d3[_0x43a351(0x16e)]&&_0x5e27d3['val']!==!![])&&await _0x4384e6[_0x43a351(0x1de)](_0xb7d6a2['id'],!![]),lastActions[_0x59e483]=_0x394660;}}async function findRelatedId(_0x2d0929,_0x17e959,_0x14379f='setpoint'){const _0x3fc397=a1_0x34e7e;if(_0x14379f===_0x3fc397(0x20e)&&_0x2d0929[_0x3fc397(0x155)][_0x3fc397(0x16f)]){let _0x1661aa=_0x2d0929[_0x3fc397(0x155)][_0x3fc397(0x16f)];if(typeof _0x1661aa===_0x3fc397(0x1c6))try{_0x1661aa=JSON[_0x3fc397(0x158)](_0x1661aa);}catch(_0x30c8ad){}if(_0x1661aa&&_0x1661aa[_0x17e959])return _0x1661aa[_0x17e959];}if(_0x14379f==='valve'&&_0x2d0929[_0x3fc397(0x155)]['valveMapping']){let _0x1114c5=_0x2d0929['config']['valveMapping'];if(typeof _0x1114c5===_0x3fc397(0x1c6))try{_0x1114c5=JSON[_0x3fc397(0x158)](_0x1114c5);}catch(_0xeb1177){}if(_0x1114c5&&_0x1114c5[_0x17e959])return _0x1114c5[_0x17e959];}let _0x1c7458=[];if(_0x14379f===_0x3fc397(0x20e))_0x1c7458=[{'s':'.1.ACTUAL_TEMPERATURE','t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x3fc397(0x19d),'t':_0x3fc397(0x1b2)},{'s':_0x3fc397(0x19d),'t':_0x3fc397(0x1ef)},{'s':_0x3fc397(0x205),'t':_0x3fc397(0x195)},{'s':_0x3fc397(0x1d0),'t':_0x3fc397(0x1fc)},{'s':_0x3fc397(0x1d0),'t':_0x3fc397(0x1d5)},{'s':_0x3fc397(0x1f5),'t':_0x3fc397(0x1f7)},{'s':_0x3fc397(0x1cc),'t':'SET'},{'s':_0x3fc397(0x173),'t':_0x3fc397(0x190)},{'s':_0x3fc397(0x1f5),'t':_0x3fc397(0x20e)}];else _0x14379f===_0x3fc397(0x21c)&&(_0x1c7458=[{'s':'.1.ACTUAL_TEMPERATURE','t':'.1.LEVEL'},{'s':_0x3fc397(0x19d),'t':_0x3fc397(0x1db)},{'s':'.1.TEMPERATURE','t':'.4.VALVE_STATE'},{'s':_0x3fc397(0x1d0),'t':'pi_heating_demand'},{'s':'temperature','t':_0x3fc397(0x20f)},{'s':_0x3fc397(0x1f5),'t':_0x3fc397(0x172)}]);for(const _0x387fc8 of _0x1c7458){if(_0x17e959[_0x3fc397(0x1cf)](_0x387fc8['s'])){const _0x5b7b78=_0x17e959[_0x3fc397(0x1fa)](_0x387fc8['s'],_0x387fc8['t']),_0x1de46c=await _0x2d0929[_0x3fc397(0x1c7)](_0x5b7b78);if(_0x1de46c)return _0x5b7b78;}}try{const _0x497f14=_0x17e959['split']('.');if(_0x497f14[_0x3fc397(0x1a5)]>0x2){const _0x4c7568=_0x497f14[_0x3fc397(0x191)](0x0,-0x1)[_0x3fc397(0x1a1)]('.'),_0x69ebd3=await _0x2d0929[_0x3fc397(0x163)](_0x4c7568+'.*'),_0x2e3864=[],_0x2f756e=_0x17e959['split'](/[._]+/)[_0x3fc397(0x1f1)](_0x34ab5d=>!['openknx','0','hm-rpc',_0x3fc397(0x182),_0x3fc397(0x207),'temperature',_0x3fc397(0x156),_0x3fc397(0x1f6),_0x3fc397(0x1ce),_0x3fc397(0x1e2)][_0x3fc397(0x1cf)](_0x34ab5d[_0x3fc397(0x1af)]()));for(const [_0x415a5a,_0x1d5794]of Object[_0x3fc397(0x189)](_0x69ebd3)){if(_0x415a5a===_0x17e959)continue;if(_0x1d5794&&_0x1d5794[_0x3fc397(0x1e1)]){const _0xcf3110=_0x415a5a[_0x3fc397(0x1af)](),_0x4982b4=(_0x1d5794[_0x3fc397(0x1e1)][_0x3fc397(0x1ee)]||'')['toLowerCase'](),_0x437195=(_0x1d5794[_0x3fc397(0x1e1)][_0x3fc397(0x1c3)]||'')[_0x3fc397(0x1af)]();let _0x155aa8=![];if(_0x14379f===_0x3fc397(0x20e)&&_0x1d5794[_0x3fc397(0x1e1)]['write']===!![])_0x155aa8=_0xcf3110[_0x3fc397(0x1cf)](_0x3fc397(0x1a4))||_0xcf3110[_0x3fc397(0x1cf)](_0x3fc397(0x180))||_0xcf3110['includes'](_0x3fc397(0x18c))||_0x4982b4['includes'](_0x3fc397(0x20c))||_0x4982b4['includes']('thermostat.setpoint');else _0x14379f==='valve'&&(_0x155aa8=_0xcf3110[_0x3fc397(0x1cf)]('level')||_0xcf3110[_0x3fc397(0x1cf)](_0x3fc397(0x21c))||_0xcf3110['includes'](_0x3fc397(0x1e7))||_0xcf3110[_0x3fc397(0x1cf)]('position')||_0x4982b4[_0x3fc397(0x1cf)](_0x3fc397(0x1d8))||_0x4982b4[_0x3fc397(0x1cf)]('value.valve')||_0x437195[_0x3fc397(0x1cf)]('%'));if(_0x155aa8){const _0x40bb1a=_0x415a5a[_0x3fc397(0x198)](/[._]+/)[_0x3fc397(0x1f2)](_0x4feb92=>_0x4feb92[_0x3fc397(0x1af)]());let _0x3d5fd1=0x0;_0x2f756e[_0x3fc397(0x184)](_0x57f5da=>{const _0x569fb3=_0x3fc397;if(_0x40bb1a[_0x569fb3(0x1cf)](_0x57f5da[_0x569fb3(0x1af)]()))_0x3d5fd1++;}),_0x2e3864[_0x3fc397(0x159)]({'id':_0x415a5a,'score':_0x3d5fd1});}}}if(_0x2e3864[_0x3fc397(0x1a5)]>0x0){_0x2e3864['sort']((_0x5c2b73,_0x108413)=>_0x108413[_0x3fc397(0x1d4)]-_0x5c2b73[_0x3fc397(0x1d4)]);if(_0x2e3864[0x0][_0x3fc397(0x1d4)]>0x0)return _0x2e3864[0x0]['id'];}}}catch(_0x34d6b6){}return null;}async function scanThermostats(_0x2c3425){const _0x4748f7=a1_0x34e7e,_0x5127c2=_0x2c3425[_0x4748f7(0x155)][_0x4748f7(0x21a)]||[],_0x1e847d=[],_0x1df2f3=_0x5127c2[_0x4748f7(0x1f1)](_0x30a6cd=>_0x30a6cd['id']&&_0x30a6cd['id'][_0x4748f7(0x1cf)](_0x4748f7(0x1f5))||_0x30a6cd[_0x4748f7(0x1ea)]&&[_0x4748f7(0x1f5),'thermostat',_0x4748f7(0x1f6)][_0x4748f7(0x1cf)](_0x30a6cd[_0x4748f7(0x1ea)])||_0x30a6cd[_0x4748f7(0x157)]&&_0x30a6cd[_0x4748f7(0x157)]['toLowerCase']()['includes'](_0x4748f7(0x218)));for(const _0x3df9a3 of _0x1df2f3){const _0x18f6de=await findRelatedId(_0x2c3425,_0x3df9a3['id'],_0x4748f7(0x20e)),_0x3fa2ab=await findRelatedId(_0x2c3425,_0x3df9a3['id'],_0x4748f7(0x21c));let _0x2eb304='Nicht\x20gefunden',_0x540073=![],_0x3e485a=_0x2c3425[_0x4748f7(0x155)][_0x4748f7(0x16f)]||{};if(typeof _0x3e485a===_0x4748f7(0x1c6))try{_0x3e485a=JSON[_0x4748f7(0x158)](_0x3e485a);}catch(_0x4eddf1){}let _0x5e4f5b=_0x2c3425[_0x4748f7(0x155)][_0x4748f7(0x203)]||{};if(typeof _0x5e4f5b===_0x4748f7(0x1c6))try{_0x5e4f5b=JSON[_0x4748f7(0x158)](_0x5e4f5b);}catch(_0x513f4a){}if(_0x3e485a[_0x3df9a3['id']]&&_0x3e485a[_0x3df9a3['id']]===_0x18f6de||_0x5e4f5b[_0x3df9a3['id']]&&_0x5e4f5b[_0x3df9a3['id']]===_0x3fa2ab)_0x2eb304=_0x4748f7(0x1fb),_0x540073=!![];else(_0x18f6de||_0x3fa2ab)&&(_0x2eb304=_0x4748f7(0x1f8));_0x1e847d['push']({'room':_0x3df9a3[_0x4748f7(0x186)]||_0x4748f7(0x1c5),'sensorId':_0x3df9a3['id'],'setpointId':_0x18f6de||'-','valveId':_0x3fa2ab||'-','source':_0x2eb304,'isManual':_0x540073,'status':_0x18f6de&&_0x3fa2ab?_0x4748f7(0x1e8):_0x18f6de?'OK':_0x4748f7(0x204)});}return _0x1e847d[_0x4748f7(0x188)]((_0x18aa38,_0x59eaf3)=>_0x18aa38[_0x4748f7(0x1e9)][_0x4748f7(0x183)](_0x59eaf3['room']));}async function updateSchedulePreview(_0x4195d1){const _0x122f51=a1_0x34e7e;if(!_0x4195d1[_0x122f51(0x155)]['useCalendar']||!_0x4195d1[_0x122f51(0x155)][_0x122f51(0x193)])return;let _0x19a5b2={};try{const _0x193dd4=await _0x4195d1[_0x122f51(0x160)](_0x122f51(0x17e));if(_0x193dd4&&_0x193dd4['val'])_0x19a5b2=JSON[_0x122f51(0x158)](_0x193dd4[_0x122f51(0x16e)]);}catch(_0x2faeb7){}const _0x11bd8d=[],_0x4f3214=Date[_0x122f51(0x1a9)](),_0x1c3880=0x30*0x3c*0x3c*0x3e8;try{const _0x4585a6=await _0x4195d1['getForeignStateAsync'](_0x4195d1[_0x122f51(0x155)]['calendarInstance']+_0x122f51(0x206));if(!_0x4585a6||!_0x4585a6[_0x122f51(0x16e)])return;const _0xca9c75=JSON[_0x122f51(0x158)](_0x4585a6[_0x122f51(0x16e)]),_0x3a2662=_0x4195d1['config'][_0x122f51(0x15a)]||[],_0x33c227=_0x4195d1[_0x122f51(0x155)][_0x122f51(0x21a)]||[],_0x4b3c12=new Set();_0x33c227[_0x122f51(0x184)](_0x5ef59d=>{const _0x448a95=_0x122f51;if(_0x5ef59d['location'])_0x4b3c12[_0x448a95(0x212)](_0x5ef59d[_0x448a95(0x186)]);});for(const _0x41c242 of _0xca9c75){if(_0x41c242[_0x122f51(0x1b6)]&&_0x3a2662['length']>0x0&&!_0x3a2662[_0x122f51(0x1cf)](_0x41c242['_calName']))continue;const _0x4194b1=_0x41c242[_0x122f51(0x168)]||_0x41c242[_0x122f51(0x18b)]||_0x41c242[_0x122f51(0x175)];if(!_0x4194b1)continue;const _0x55ecae=new Date(_0x4194b1),_0x5c6d57=_0x55ecae['getTime']();if(isNaN(_0x5c6d57))continue;if(_0x5c6d57<_0x4f3214)continue;if(_0x5c6d57>_0x4f3214+_0x1c3880)continue;const _0x459a48=(_0x41c242[_0x122f51(0x19e)]||_0x41c242['summary']||'')[_0x122f51(0x1af)]();let _0x4b015d=![],_0x39f713=[],_0x21a1f1=_0x41c242[_0x122f51(0x19e)]||_0x41c242[_0x122f51(0x181)]||_0x122f51(0x1c5);if(_0x459a48['includes'](_0x122f51(0x18e))||_0x459a48['includes']('rÃ¼ckkehr')||_0x459a48[_0x122f51(0x1cf)](_0x122f51(0x17c)))_0x4b015d=!![],_0x39f713=Array[_0x122f51(0x1a8)](_0x4b3c12);else for(const _0x1a7399 of _0x4b3c12){if(_0x459a48[_0x122f51(0x1cf)](_0x1a7399['toLowerCase']()))_0x39f713[_0x122f51(0x159)](_0x1a7399);}_0x39f713[_0x122f51(0x1a5)]>0x0&&_0x39f713[_0x122f51(0x184)](_0xeebb47=>{const _0x4eebe5=_0x122f51;let _0x2ea500=0x3c;if(_0x4b015d){let _0x22dda1=0x0;Object['values'](_0x19a5b2)[_0x4eebe5(0x184)](_0x53c0bf=>{if(_0x53c0bf>_0x22dda1)_0x22dda1=_0x53c0bf;}),_0x2ea500=_0x22dda1>0x0?_0x22dda1:0x78;}else _0x2ea500=getWarmupRobust(_0x19a5b2,_0xeebb47);const _0x2211a4=new Date(_0x5c6d57-_0x2ea500*0xea60);_0x11bd8d[_0x4eebe5(0x159)]({'eventTime':_0x5c6d57,'triggerTime':_0x2211a4[_0x4eebe5(0x185)](),'room':_0xeebb47,'minutes':_0x2ea500,'reason':_0x21a1f1,'isGlobal':_0x4b015d});});}}catch(_0x14f3d6){}_0x11bd8d[_0x122f51(0x188)]((_0x4cdbf2,_0x1c0884)=>_0x4cdbf2[_0x122f51(0x1fe)]-_0x1c0884[_0x122f51(0x1fe)]);const _0x18157d=_0x11bd8d[_0x122f51(0x191)](0x0,0x1e);await _0x4195d1['setStateAsync']('analysis.energy.schedulePreview',{'val':JSON['stringify'](_0x18157d),'ack':!![]});}async function monitorEnforcements(_0x46256d){const _0x259383=a1_0x34e7e;try{const _0x5ddaa7=_0x259383(0x216),_0x1f88fa=await _0x46256d[_0x259383(0x160)](_0x5ddaa7);if(!_0x1f88fa||!_0x1f88fa[_0x259383(0x16e)])return;let _0x2bd71a=[];try{_0x2bd71a=JSON[_0x259383(0x158)](_0x1f88fa[_0x259383(0x16e)]);}catch(_0x2e4955){return;}if(!Array[_0x259383(0x20b)](_0x2bd71a)||_0x2bd71a[_0x259383(0x1a5)]===0x0)return;const _0x222db8=Date[_0x259383(0x1a9)](),_0x40e6e7=_0x46256d['config']['devices']||[];let _0x2a92e2=![];for(let _0x2bea9f=_0x2bd71a['length']-0x1;_0x2bea9f>=0x0;_0x2bea9f--){const _0x3c92c9=_0x2bd71a[_0x2bea9f];if(_0x222db8>=_0x3c92c9[_0x259383(0x1ab)]){_0x46256d[_0x259383(0x1c1)][_0x259383(0x162)](_0x259383(0x1f3)+_0x3c92c9[_0x259383(0x1e9)]+_0x259383(0x1dc)),_0x2bd71a['splice'](_0x2bea9f,0x1),_0x2a92e2=!![];continue;}const _0x3a46ca=_0x40e6e7[_0x259383(0x202)](_0x1f636f=>normalize(_0x1f636f['location'])===normalize(_0x3c92c9[_0x259383(0x1e9)])&&(_0x1f636f[_0x259383(0x1ea)]==='temperature'||_0x1f636f[_0x259383(0x1ea)]===_0x259383(0x1d1)));if(_0x3a46ca){const _0x3ca771=await findRelatedId(_0x46256d,_0x3a46ca['id'],_0x259383(0x20e));if(_0x3ca771){const _0x39b9d7=await _0x46256d[_0x259383(0x18d)](_0x3ca771);_0x39b9d7&&typeof _0x39b9d7[_0x259383(0x16e)]===_0x259383(0x15d)&&(_0x39b9d7[_0x259383(0x16e)]<0xf&&(_0x46256d[_0x259383(0x1c1)][_0x259383(0x15b)]('ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x3c92c9[_0x259383(0x1e9)]+_0x259383(0x1b9)+_0x39b9d7[_0x259383(0x16e)]+_0x259383(0x1e6)+_0x3c92c9[_0x259383(0x18c)]+_0x259383(0x208)),await _0x46256d[_0x259383(0x1de)](_0x3ca771,_0x3c92c9[_0x259383(0x18c)]),await logAutomationAction(_0x46256d,_0x259383(0x161)+_0x3c92c9[_0x259383(0x1e9)]+':\x20'+_0x39b9d7[_0x259383(0x16e)]+_0x259383(0x211)+_0x3c92c9[_0x259383(0x18c)]+'Â°C\x20(Kalender-Schutz)')));}}}_0x2a92e2&&await _0x46256d[_0x259383(0x1a3)](_0x5ddaa7,{'val':JSON['stringify'](_0x2bd71a),'ack':!![]});}catch(_0x3f5bc0){_0x46256d[_0x259383(0x1c1)][_0x259383(0x166)](_0x259383(0x1c4)+_0x3f5bc0[_0x259383(0x15e)]);}}async function checkCalendarTriggers(_0xaa25b6){const _0x1b4840=a1_0x34e7e;if(!_0xaa25b6['config'][_0x1b4840(0x18f)]||!_0xaa25b6[_0x1b4840(0x155)][_0x1b4840(0x193)])return;await updateSchedulePreview(_0xaa25b6);let _0x4133cb={},_0x115fe5={};try{const _0x155cdb=await _0xaa25b6[_0x1b4840(0x160)](_0x1b4840(0x17e));if(_0x155cdb&&_0x155cdb['val'])_0x4133cb=JSON[_0x1b4840(0x158)](_0x155cdb[_0x1b4840(0x16e)]);const _0x567517=await _0xaa25b6[_0x1b4840(0x160)](_0x1b4840(0x21d));if(_0x567517&&_0x567517[_0x1b4840(0x16e)])_0x115fe5=JSON['parse'](_0x567517['val']);}catch(_0x462055){}let _0x3a0727={'default':0x15};try{const _0x5b4aa7=await _0xaa25b6['getStateAsync'](_0x1b4840(0x1a2));if(_0x5b4aa7&&_0x5b4aa7[_0x1b4840(0x16e)])_0x3a0727=JSON[_0x1b4840(0x158)](_0x5b4aa7['val']);}catch(_0x15e627){}let _0x490f6b=[];try{const _0x586364=await _0xaa25b6[_0x1b4840(0x160)](_0x1b4840(0x216));if(_0x586364&&_0x586364[_0x1b4840(0x16e)])_0x490f6b=JSON['parse'](_0x586364['val']);}catch(_0x4b29db){}try{const _0xbf0b83=await _0xaa25b6['getForeignStateAsync'](_0xaa25b6['config']['calendarInstance']+_0x1b4840(0x206));if(!_0xbf0b83||!_0xbf0b83[_0x1b4840(0x16e)])return;const _0x1cc5b9=JSON[_0x1b4840(0x158)](_0xbf0b83[_0x1b4840(0x16e)]),_0x2d268c=Date[_0x1b4840(0x1a9)](),_0x5316ee=_0xaa25b6[_0x1b4840(0x155)]['devices']||[],_0x53f128=_0xaa25b6['config']['calendarSelection']||[];let _0x1a2472=![];for(const _0x596e78 of _0x1cc5b9){if(_0x596e78[_0x1b4840(0x1b6)]&&_0x53f128[_0x1b4840(0x1a5)]>0x0&&!_0x53f128[_0x1b4840(0x1cf)](_0x596e78[_0x1b4840(0x1b6)]))continue;const _0x1fa6a7=_0x596e78['_date']||_0x596e78[_0x1b4840(0x18b)]||_0x596e78[_0x1b4840(0x175)];if(!_0x1fa6a7)continue;const _0x9993f6=new Date(_0x1fa6a7);if(isNaN(_0x9993f6[_0x1b4840(0x185)]()))continue;const _0x37481c=(_0x596e78[_0x1b4840(0x19e)]||_0x596e78[_0x1b4840(0x181)]||'')[_0x1b4840(0x1af)]();if(_0x37481c['includes'](_0x1b4840(0x18e))||_0x37481c['includes'](_0x1b4840(0x1d2))||_0x37481c[_0x1b4840(0x1cf)]('ankunft')){let _0x1f64ff=0x0;Object[_0x1b4840(0x1dd)](_0x4133cb)['forEach'](_0x5e3d05=>{if(_0x5e3d05>_0x1f64ff)_0x1f64ff=_0x5e3d05;});if(_0x1f64ff===0x0)_0x1f64ff=0x78;const _0x1bdcd5=_0x9993f6[_0x1b4840(0x185)]()-_0x1f64ff*0xea60;_0x2d268c>=_0x1bdcd5&&_0x2d268c<_0x9993f6[_0x1b4840(0x185)]()&&(_0xaa25b6[_0x1b4840(0x1f4)]!==_0x1b4840(0x201)&&(_0xaa25b6['log']['info']('ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20'+_0x1f64ff+_0x1b4840(0x209)),await _0xaa25b6[_0x1b4840(0x1a3)](_0x1b4840(0x1ed),{'val':_0x1b4840(0x201),'ack':![]})));}for(const _0x5e9025 of _0x5316ee){if(_0x5e9025[_0x1b4840(0x186)]){const _0x1a1477=_0x5e9025['location'][_0x1b4840(0x1af)](),_0x22093b=(_0x5e9025[_0x1b4840(0x157)]||'')['toLowerCase']();let _0x3ec87c=_0x37481c[_0x1b4840(0x1cf)](_0x1a1477);!_0x3ec87c&&_0x22093b[_0x1b4840(0x1a5)]>0x3&&_0x37481c[_0x1b4840(0x1cf)](_0x22093b)&&(_0x3ec87c=!![]);if(_0x3ec87c){const _0x5aa208=getWarmupRobust(_0x4133cb,_0x5e9025['location']),_0x508c58=_0x115fe5[_0x5e9025[_0x1b4840(0x186)]]||_0x1b4840(0x1ac),_0x397893=_0x9993f6[_0x1b4840(0x185)]()-_0x5aa208*0xea60;if(_0x2d268c>=_0x397893&&_0x2d268c<_0x9993f6['getTime']()){const _0x544efa=lastActions['cal_'+_0x5e9025['location']];if(_0x544efa&&_0x2d268c-_0x544efa<CAL_COOLDOWN_MS)continue;const _0x501130=await findRelatedId(_0xaa25b6,_0x5e9025['id'],'setpoint');if(_0x501130){let _0x4db7d9=_0x3a0727[_0x5e9025[_0x1b4840(0x186)]];if(_0x4db7d9===undefined)_0x4db7d9=_0x3a0727['default'];if(_0x4db7d9===undefined)_0x4db7d9=0x15;const _0x27dc37=await _0xaa25b6[_0x1b4840(0x18d)](_0x501130);if(_0x27dc37&&typeof _0x27dc37[_0x1b4840(0x16e)]==='number'&&_0x27dc37[_0x1b4840(0x16e)]<_0x4db7d9-0.5){_0xaa25b6[_0x1b4840(0x1c1)][_0x1b4840(0x162)](_0x1b4840(0x15c)+_0x508c58+_0x1b4840(0x1d9)+_0x5e9025[_0x1b4840(0x186)]+_0x1b4840(0x174)+_0x37481c+_0x1b4840(0x210)+_0x4db7d9+_0x1b4840(0x1e0)+_0x5aa208+'\x20min).'),await _0xaa25b6[_0x1b4840(0x1de)](_0x501130,_0x4db7d9),await logAutomationAction(_0xaa25b6,_0x1b4840(0x164)+_0x5e9025[_0x1b4840(0x186)]+'\x20->\x20'+_0x4db7d9+_0x1b4840(0x199)+_0x508c58+')'),lastActions[_0x1b4840(0x1b4)+_0x5e9025[_0x1b4840(0x186)]]=_0x2d268c;const _0x431b79=_0x490f6b['findIndex'](_0x1354e3=>_0x1354e3[_0x1b4840(0x1e9)]===_0x5e9025[_0x1b4840(0x186)]);if(_0x431b79!==-0x1)_0x490f6b[_0x1b4840(0x16c)](_0x431b79,0x1);_0x490f6b['push']({'room':_0x5e9025['location'],'target':_0x4db7d9,'until':_0x9993f6[_0x1b4840(0x185)]()}),_0x1a2472=!![];}}}}}}}_0x1a2472&&await _0xaa25b6[_0x1b4840(0x1a3)](_0x1b4840(0x216),{'val':JSON[_0x1b4840(0x1b3)](_0x490f6b),'ack':!![]});}catch(_0x5bad7a){_0xaa25b6[_0x1b4840(0x1c1)][_0x1b4840(0x15b)](_0x1b4840(0x1b8)+_0x5bad7a[_0x1b4840(0x15e)]);}}async function manageMpcIntervention(_0x3b79c1,_0xf347be,_0x544d10){const _0x2a2eae=a1_0x34e7e;try{const _0x4e371f='analysis.energy.mpcActiveInterventions',_0x46c6b2=await _0x3b79c1['getStateAsync'](_0x4e371f);let _0x38548c=[];if(_0x46c6b2&&_0x46c6b2[_0x2a2eae(0x16e)])try{_0x38548c=JSON[_0x2a2eae(0x158)](_0x46c6b2['val']);}catch(_0xb9a07b){}const _0x14234c=_0x38548c[_0x2a2eae(0x1ff)](_0xf347be);if(_0x544d10==='add')_0x14234c===-0x1&&(_0x38548c['push'](_0xf347be),await _0x3b79c1[_0x2a2eae(0x1a3)](_0x4e371f,{'val':JSON[_0x2a2eae(0x1b3)](_0x38548c),'ack':!![]}));else _0x544d10==='remove'&&(_0x14234c!==-0x1&&(_0x38548c['splice'](_0x14234c,0x1),await _0x3b79c1[_0x2a2eae(0x1a3)](_0x4e371f,{'val':JSON[_0x2a2eae(0x1b3)](_0x38548c),'ack':!![]})));}catch(_0x121f23){}}async function cleanupGhostInterventions(_0x267141){const _0x2c61e=a1_0x34e7e;try{const _0x53e0e7=_0x2c61e(0x19c),_0x11339f=await _0x267141[_0x2c61e(0x160)](_0x53e0e7);if(!_0x11339f||!_0x11339f[_0x2c61e(0x16e)])return;const _0xc18167=JSON[_0x2c61e(0x158)](_0x11339f['val']);if(!Array[_0x2c61e(0x20b)](_0xc18167)||_0xc18167[_0x2c61e(0x1a5)]===0x0)return;let _0x76ed9={'default':0x15};try{const _0x49af8c=await _0x267141[_0x2c61e(0x160)](_0x2c61e(0x1a2));if(_0x49af8c&&_0x49af8c[_0x2c61e(0x16e)])_0x76ed9=JSON[_0x2c61e(0x158)](_0x49af8c['val']);}catch(_0x44f3cf){}let _0x1ef097=[];try{const _0x2b15ea=await _0x267141['getStateAsync'](_0x2c61e(0x15f));if(_0x2b15ea&&_0x2b15ea[_0x2c61e(0x16e)])_0x1ef097=JSON[_0x2c61e(0x158)](_0x2b15ea['val']);}catch(_0x11f97a){}let _0x87cad0={},_0x5473e1=![];try{const _0x2fd43a=await _0x267141[_0x2c61e(0x160)](_0x2c61e(0x177));if(_0x2fd43a&&_0x2fd43a[_0x2c61e(0x16e)])_0x87cad0=JSON[_0x2c61e(0x158)](_0x2fd43a[_0x2c61e(0x16e)]);}catch(_0x310ddf){}if(_0x87cad0[_0x2c61e(0x167)]){const _0x4cdbfe=Date[_0x2c61e(0x1a9)]();for(const [_0x430985,_0xaa2ff9]of Object['entries'](_0x87cad0[_0x2c61e(0x167)])){_0x4cdbfe-_0xaa2ff9>PENALTY_TTL&&(delete _0x87cad0[_0x430985],delete _0x87cad0['_meta'][_0x430985],_0x5473e1=!![],_0x267141[_0x2c61e(0x1c1)][_0x2c61e(0x162)](_0x2c61e(0x16b)+_0x430985+_0x2c61e(0x194)));}}const _0x5dc472=_0x267141[_0x2c61e(0x155)][_0x2c61e(0x21a)]||[];let _0x5cdafa=![];for(let _0x19bbb8=_0xc18167['length']-0x1;_0x19bbb8>=0x0;_0x19bbb8--){const _0x44f7ee=_0xc18167[_0x19bbb8],_0x1e5a1f=_0x5dc472['find'](_0x24ce83=>normalize(_0x24ce83['location'])===normalize(_0x44f7ee)&&(_0x24ce83['type']===_0x2c61e(0x1f5)||_0x24ce83['type']===_0x2c61e(0x1d1)));if(!_0x1e5a1f){_0x267141[_0x2c61e(0x1c1)][_0x2c61e(0x15b)](_0x2c61e(0x1e3)+_0x44f7ee+'\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.'),_0xc18167[_0x2c61e(0x16c)](_0x19bbb8,0x1),_0x5cdafa=!![];continue;}if(_0x1e5a1f){const _0x5e42ba=await findRelatedId(_0x267141,_0x1e5a1f['id'],'setpoint'),_0x1dcb8e=await _0x267141[_0x2c61e(0x18d)](_0x1e5a1f['id']);if(_0x5e42ba){const _0x480a14=await _0x267141[_0x2c61e(0x18d)](_0x5e42ba);if(_0x480a14&&typeof _0x480a14[_0x2c61e(0x16e)]===_0x2c61e(0x15d)){let _0x595f61=![],_0x422da3='';Math['abs'](_0x480a14[_0x2c61e(0x16e)]-ECO_TEMP)>0.5&&(_0x595f61=!![],_0x422da3=_0x2c61e(0x1ba));if(!_0x595f61&&_0x1dcb8e&&typeof _0x1dcb8e[_0x2c61e(0x16e)]===_0x2c61e(0x15d)){const _0x15d3e1=_0x76ed9[_0x44f7ee]||_0x76ed9[_0x2c61e(0x165)]||0x15;_0x1dcb8e[_0x2c61e(0x16e)]<_0x15d3e1+0.2&&(_0x595f61=!![],_0x422da3=_0x2c61e(0x219));}if(_0x595f61){if(_0x422da3===_0x2c61e(0x1ba)){_0x267141['log'][_0x2c61e(0x162)]('ðŸ§¹\x20[MPC\x20CLEANUP]\x20'+_0x44f7ee+_0x2c61e(0x187)+_0x480a14[_0x2c61e(0x16e)]+_0x2c61e(0x1be)+ECO_TEMP+_0x2c61e(0x1ad));const _0x5f5dad=lastActions[_0x2c61e(0x1b4)+_0x44f7ee],_0x2c2c68=_0x5f5dad&&Date[_0x2c61e(0x1a9)]()-_0x5f5dad<0x2*0x3c*0x3e8;if(!_0x2c2c68&&_0x480a14[_0x2c61e(0x16e)]>ECO_TEMP+0.5){_0x267141[_0x2c61e(0x19b)]&&(_0x267141[_0x2c61e(0x1c1)][_0x2c61e(0x162)]('ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20'+_0x44f7ee+_0x2c61e(0x200)),_0x267141[_0x2c61e(0x19b)](_0x2c61e(0x1d6),{'room':_0x44f7ee}));const _0x32e69a=_0x44f7ee+'_'+new Date()[_0x2c61e(0x169)]();if(!_0x87cad0[_0x32e69a]){_0x87cad0[_0x32e69a]=0x1;if(!_0x87cad0[_0x2c61e(0x167)])_0x87cad0[_0x2c61e(0x167)]={};_0x87cad0[_0x2c61e(0x167)][_0x32e69a]=Date['now'](),_0x5473e1=!![];}}else _0x2c2c68&&_0x267141[_0x2c61e(0x1c1)][_0x2c61e(0x162)](_0x2c61e(0x1d3)+_0x44f7ee+_0x2c61e(0x196));}else{if(_0x422da3===_0x2c61e(0x219)){let _0x5ee83a=![];if(_0x1ef097['find'](_0x4a24fc=>_0x4a24fc['room']===_0x44f7ee))_0x5ee83a=!![];const _0x97bf8=_0x5dc472['filter'](_0x1df2eb=>normalize(_0x1df2eb[_0x2c61e(0x186)])===normalize(_0x44f7ee)&&(_0x1df2eb['type']===_0x2c61e(0x1b5)||_0x1df2eb['type']===_0x2c61e(0x1f6)||_0x1df2eb[_0x2c61e(0x1ea)]===_0x2c61e(0x1bb)));for(const _0x2939b5 of _0x97bf8){try{const _0x4a0d3a=await _0x267141[_0x2c61e(0x18d)](_0x2939b5['id']);if(_0x4a0d3a&&(_0x4a0d3a[_0x2c61e(0x16e)]===!![]||_0x4a0d3a['val']===0x1||String(_0x4a0d3a[_0x2c61e(0x16e)])[_0x2c61e(0x1af)]()==='open'))_0x5ee83a=!![];}catch(_0x1d28c5){}}if(_0x5ee83a)_0x267141[_0x2c61e(0x1c1)][_0x2c61e(0x162)](_0x2c61e(0x217)+_0x44f7ee+_0x2c61e(0x20d));else{const _0x451f07=_0x76ed9[_0x44f7ee]||_0x76ed9['default']||0x15;_0x267141[_0x2c61e(0x1c1)][_0x2c61e(0x162)](_0x2c61e(0x214)+_0x44f7ee+'\x20erreicht\x20Limit\x20('+_0x1dcb8e[_0x2c61e(0x16e)]+_0x2c61e(0x1a7)+(_0x451f07+0.2)+_0x2c61e(0x1cd)),await _0x267141[_0x2c61e(0x1de)](_0x5e42ba,_0x451f07),await logAutomationAction(_0x267141,_0x2c61e(0x1aa)+_0x44f7ee+_0x2c61e(0x19a)+_0x451f07+'Â°C'),lastActions[_0x2c61e(0x17f)+_0x44f7ee]=Date[_0x2c61e(0x1a9)]();}}}_0xc18167[_0x2c61e(0x16c)](_0x19bbb8,0x1),_0x5cdafa=!![];}}}}}_0x5cdafa&&await _0x267141[_0x2c61e(0x1a3)](_0x53e0e7,{'val':JSON['stringify'](_0xc18167),'ack':!![]}),_0x5473e1&&await _0x267141[_0x2c61e(0x1a3)](_0x2c61e(0x177),{'val':JSON[_0x2c61e(0x1b3)](_0x87cad0),'ack':!![]});}catch(_0x2f36a5){}}async function applyEnergySavings(_0x43baba,_0x60922f){const _0x392c42=a1_0x34e7e;await cleanupGhostInterventions(_0x43baba);if(!_0x60922f||_0x60922f[_0x392c42(0x1a5)]===0x0)return;const _0x5e51e1=_0x43baba[_0x392c42(0x155)][_0x392c42(0x21a)]||[],_0x2b9a17=Date[_0x392c42(0x1a9)]();for(const _0x5c5ac4 of _0x60922f){const _0x328476=_0x5c5ac4[_0x392c42(0x1e9)],_0x2482b0=_0x5c5ac4[_0x392c42(0x1fd)],_0x37ae2a=_0x5c5ac4['target']||0x15;if(lastActions[_0x392c42(0x17f)+_0x328476]&&_0x2b9a17-lastActions['rescue_'+_0x328476]<RESCUE_LOCK_MS)continue;const _0x91d498=_0x5e51e1[_0x392c42(0x202)](_0x8e3602=>normalize(_0x8e3602[_0x392c42(0x186)])===normalize(_0x328476)&&(_0x8e3602[_0x392c42(0x1ea)]===_0x392c42(0x1f5)||_0x8e3602[_0x392c42(0x1ea)]===_0x392c42(0x1d1)));if(!_0x91d498)continue;const _0x1a8e4a=await findRelatedId(_0x43baba,_0x91d498['id'],_0x392c42(0x20e));if(_0x1a8e4a){if(lastActions[_0x392c42(0x1eb)+_0x328476]&&_0x2b9a17-lastActions[_0x392c42(0x1eb)+_0x328476]<0x1e*0x3c*0x3e8)continue;const _0x33d1b0=await _0x43baba[_0x392c42(0x18d)](_0x1a8e4a);if(_0x33d1b0&&typeof _0x33d1b0['val']==='number'){const _0x1304c9=_0x33d1b0[_0x392c42(0x16e)];_0x1304c9!==ECO_TEMP&&await manageMpcIntervention(_0x43baba,_0x328476,_0x392c42(0x1cb));if(_0x2482b0>0x1e)_0x1304c9>ECO_TEMP+0.5&&(_0x43baba[_0x392c42(0x1c1)]['info'](_0x392c42(0x20a)+_0x328476+_0x392c42(0x1b9)+ECO_TEMP+_0x392c42(0x1bf)+_0x2482b0+_0x392c42(0x1c0)),await _0x43baba[_0x392c42(0x1de)](_0x1a8e4a,ECO_TEMP),await manageMpcIntervention(_0x43baba,_0x328476,_0x392c42(0x212)),lastActions[_0x392c42(0x1eb)+_0x328476]=_0x2b9a17,await logAutomationAction(_0x43baba,_0x392c42(0x1b1)+_0x328476+_0x392c42(0x176)+ECO_TEMP+'Â°C'));else _0x2482b0<=0xf&&(_0x1304c9<_0x37ae2a&&(_0x43baba[_0x392c42(0x1c1)][_0x392c42(0x162)](_0x392c42(0x17a)+_0x328476+_0x392c42(0x1df)+_0x37ae2a+_0x392c42(0x192)),await _0x43baba[_0x392c42(0x1de)](_0x1a8e4a,_0x37ae2a),await manageMpcIntervention(_0x43baba,_0x328476,_0x392c42(0x1cb)),lastActions[_0x392c42(0x1eb)+_0x328476]=_0x2b9a17,await logAutomationAction(_0x43baba,_0x392c42(0x1b1)+_0x328476+_0x392c42(0x197)+_0x37ae2a+'Â°C')));}}else _0x43baba[_0x392c42(0x1c1)][_0x392c42(0x15b)](_0x392c42(0x1bc)+_0x328476+'\x20gefunden!');}}module[a1_0x34e7e(0x16d)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};