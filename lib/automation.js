function a1_0x52b5(_0x28d2c2,_0x18cf27){const _0x34e46a=a1_0x27fd();return a1_0x52b5=function(_0x366c2e,_0x4db77f){_0x366c2e=_0x366c2e-0x1aa;let _0x27fde3=_0x34e46a[_0x366c2e];return _0x27fde3;},a1_0x52b5(_0x28d2c2,_0x18cf27);}const a1_0x32b193=a1_0x52b5;(function(_0x4b96ff,_0x5d1537){const _0x1b60c3=a1_0x52b5,_0x15ad58=_0x4b96ff();while(!![]){try{const _0x1d4b68=parseInt(_0x1b60c3(0x1d6))/0x1+-parseInt(_0x1b60c3(0x250))/0x2+-parseInt(_0x1b60c3(0x22e))/0x3+parseInt(_0x1b60c3(0x21f))/0x4+-parseInt(_0x1b60c3(0x23e))/0x5*(-parseInt(_0x1b60c3(0x256))/0x6)+-parseInt(_0x1b60c3(0x26e))/0x7*(-parseInt(_0x1b60c3(0x1d3))/0x8)+-parseInt(_0x1b60c3(0x1b6))/0x9;if(_0x1d4b68===_0x5d1537)break;else _0x15ad58['push'](_0x15ad58['shift']());}catch(_0x51e1a7){_0x15ad58['push'](_0x15ad58['shift']());}}}(a1_0x27fd,0xc2f72));const a1_0x4db77f=(function(){let _0x3e47af=!![];return function(_0x4a4d28,_0x56422d){const _0x3c8ad0=_0x3e47af?function(){const _0x4074a9=a1_0x52b5;if(_0x56422d){const _0x19a32d=_0x56422d[_0x4074a9(0x253)](_0x4a4d28,arguments);return _0x56422d=null,_0x19a32d;}}:function(){};return _0x3e47af=![],_0x3c8ad0;};}()),a1_0x366c2e=a1_0x4db77f(this,function(){const _0x2ed03c=a1_0x52b5;return a1_0x366c2e[_0x2ed03c(0x26f)]()[_0x2ed03c(0x1db)](_0x2ed03c(0x1fe))[_0x2ed03c(0x26f)]()[_0x2ed03c(0x24c)](a1_0x366c2e)[_0x2ed03c(0x1db)](_0x2ed03c(0x1fe));});a1_0x366c2e();'use strict';const aiAgent=require(a1_0x32b193(0x1b0)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x3b1f57){const _0x340da1=a1_0x32b193;if(!_0x3b1f57)return'';return _0x3b1f57[_0x340da1(0x227)]()[_0x340da1(0x1c3)](/\s+/g,'')[_0x340da1(0x225)]();}function getWarmupRobust(_0x1a8ac7,_0x341d5f){const _0x7cf190=a1_0x32b193;if(!_0x1a8ac7||!_0x341d5f)return 0x3c;if(_0x1a8ac7[_0x341d5f]!==undefined)return _0x1a8ac7[_0x341d5f];const _0x545886=_0x341d5f[_0x7cf190(0x227)]()['replace'](/√§/g,'ae')[_0x7cf190(0x1c3)](/√∂/g,'oe')[_0x7cf190(0x1c3)](/√º/g,'ue')[_0x7cf190(0x1c3)](/√ü/g,'ss')['replace'](/\s+/g,'_')[_0x7cf190(0x1c3)](/[^a-z0-9_]/g,'');if(_0x1a8ac7[_0x545886]!==undefined)return _0x1a8ac7[_0x545886];return 0x3c;}async function logAutomationAction(_0x41e785,_0x16b1e8){const _0x1cb3bd=a1_0x32b193;await _0x41e785[_0x1cb3bd(0x1b9)](_0x1cb3bd(0x1f3),{'val':_0x16b1e8,'ack':!![]});try{const _0x1923cd=_0x1cb3bd(0x1d9),_0x493585=await _0x41e785[_0x1cb3bd(0x1c2)](_0x1923cd);let _0x3f6c98=[];if(_0x493585&&_0x493585[_0x1cb3bd(0x1d7)])try{_0x3f6c98=JSON['parse'](_0x493585[_0x1cb3bd(0x1d7)]);}catch(_0xfbb366){}_0x3f6c98[_0x1cb3bd(0x1ce)]({'ts':Date[_0x1cb3bd(0x267)](),'msg':_0x16b1e8});if(_0x3f6c98['length']>0x32)_0x3f6c98=_0x3f6c98[_0x1cb3bd(0x217)](0x0,0x32);await _0x41e785[_0x1cb3bd(0x1b9)](_0x1923cd,{'val':JSON['stringify'](_0x3f6c98),'ack':!![]});}catch(_0x34bd11){}}function a1_0x27fd(){const _0x34ce01=['level','27818AasBAE','toString','analysis.energy.rlPenalties','PERFECT','üìÖ\x20[MPC\x20INFO]\x20','active','manual','message','./ai_agent','isArray','values','\x20auf\x20','Fehlt',':\x20Absenkung\x20auf\x20','20426553dbGldW','calendarSelection','üö®\x20[MPC\x20WATCHDOG]\x20','setStateAsync','remove','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','analysis.energy.warmupTimes','analysis.automation.mode','[FORCE]\x20','error','pi_heating_demand','value.valve','getStateAsync','replace','minutes_safe','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','stringify','level.temperature','getForeignObjectsAsync','\x20wieder\x20auf\x20','ACTUAL_TEMPERATURE','splice','¬∞C\x20(via\x20','valveMapping','unshift','mpc_','currentSystemMode','[WATCHDOG]\x20',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','2200RzWaHq','location','common','1114179rjyYai','val','ACTUAL','analysis.automation.actionLog','push','search','Manuelles\x20Mapping','r√ºckkehr','Enforcement\x20Monitor\x20Error:\x20','getTime','analysis.energy.warmupSources','¬∞C\x20<\x20','eventStart','setForeignStateAsync','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20','sort','room','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','hm-rpc','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','dimmer','window','.data.table','position',']:\x20Raum-Trigger\x20\x27','.1.ACTUAL_TEMPERATURE','analysis.energy.activeEnforcements','getForeignStateAsync','useCalendar','analysis.automation.lastAction','.1.SET_POINT_TEMPERATURE','number','ist','event','map','switch','normal','indexOf','_meta','Unbekannt','(((.+)+)+)+$','split','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','analysis.energy.warmupTargets','entries','soll','valve','[MPC]\x20','Auto-Erkennung','devices','reason','Pr√§diktion:\x20','warn','¬∞C\x20->\x20','add','temperature','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','Calendar\x20Check\x20Error:\x20','findIndex','forEach','messwert','.4.SET_TEMPERATURE','thermostatMapping','¬∞C).\x20Sparmodus\x20beendet!','SET','slice','Classic','localeCompare','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','\x20->\x20Schalte\x20','system.mode','setpoint','6346392cPhlfq','filter','ankunft','getForeignObjectAsync','approved','type','trim','triggerTime','toLowerCase','abs','from','_calName','default','log','level.valve','1889040JenxLV','Unknown','SET_POINT_TEMPERATURE','_date','üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20','stellwert','cal_','getHours','thermostat','\x20wurde\x20manuell\x20erh√∂ht.','\x20->\x20','\x20ist\x20auf\x20','¬∞C.','.1.TEMPERATURE','analysis.energy.mpcActiveInterventions','state','247795xyoGzV','date','.4.VALVE_STATE','score','light','¬∞C).\x20Entferne\x20Status.','parse','.1.LEVEL','summary','rescue_','¬∞C!\x20(Puffer\x20leer).','analysis.energy.ventilationAlerts','\x20min).','üìÖ\x20SMART\x20SCHEDULE\x20[','constructor','config','sendToPythonWrapper','[CAL]\x20','1083566hEVtit','¬∞C\x20(Vorlauf:\x20','contact','apply','\x20erreicht\x20Limit\x20(','¬∞C\x20(Kalender-Schutz)','54MydoAN','includes','target','name','¬∞C\x20(nicht\x20','find','Nicht\x20gefunden','unit','sensor','temp','off','until','urlaub\x20ende','length','calendarInstance','\x20gefunden!','join','now','valve_position','string','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','info','local_temperature'];a1_0x27fd=function(){return _0x34ce01;};return a1_0x27fd();}async function handlePrediction(_0x27b8f7,_0x1d3c8a,_0x32f29d){const _0x21c922=a1_0x32b193;if(!_0x1d3c8a||_0x1d3c8a===_0x21c922(0x22f))return;let _0x24da12=_0x21c922(0x260),_0x4e38ea=0.6;try{const _0xa904c=await _0x27b8f7['getStateAsync'](_0x21c922(0x1bd));if(_0xa904c&&_0xa904c[_0x21c922(0x1d7)])_0x24da12=_0xa904c[_0x21c922(0x1d7)];const _0x2342dd=await _0x27b8f7[_0x21c922(0x1c2)]('analysis.automation.confidenceThreshold');if(_0x2342dd&&_0x2342dd[_0x21c922(0x1d7)])_0x4e38ea=_0x2342dd[_0x21c922(0x1d7)];}catch(_0x464ec5){}if(_0x24da12==='off'||_0x32f29d<_0x4e38ea)return;const _0x364639=Date['now']();if(lastActions[_0x1d3c8a]&&_0x364639-lastActions[_0x1d3c8a]<COOLDOWN_MS)return;const _0x32b6d9=_0x27b8f7[_0x21c922(0x24d)][_0x21c922(0x207)]||[],_0x3448ee=normalize(_0x1d3c8a),_0x3e7f11=_0x32b6d9[_0x21c922(0x25b)](_0x3090bf=>normalize(_0x3090bf[_0x21c922(0x1d4)])===_0x3448ee&&(_0x3090bf[_0x21c922(0x224)]===_0x21c922(0x242)||_0x3090bf[_0x21c922(0x224)]===_0x21c922(0x1ea)||_0x3090bf[_0x21c922(0x224)]===_0x21c922(0x1f9)));if(!_0x3e7f11)return;const _0x38c070=await aiAgent['consultButler'](_0x27b8f7,_0x1d3c8a,_0x3e7f11[_0x21c922(0x259)],_0x32f29d);if(!_0x38c070[_0x21c922(0x223)])return;const _0x1e4ade=_0x21c922(0x209)+_0x1d3c8a+_0x21c922(0x21c)+_0x3e7f11[_0x21c922(0x259)]+'\x20('+_0x38c070[_0x21c922(0x208)]+')';await logAutomationAction(_0x27b8f7,'['+_0x24da12['toUpperCase']()+']\x20'+_0x1e4ade);if(_0x24da12===_0x21c922(0x1ad)){const _0x2b21a1=await _0x27b8f7['getForeignStateAsync'](_0x3e7f11['id']);(!_0x2b21a1||!_0x2b21a1[_0x21c922(0x1d7)]&&_0x2b21a1[_0x21c922(0x1d7)]!==!![])&&await _0x27b8f7[_0x21c922(0x1e3)](_0x3e7f11['id'],!![]),lastActions[_0x1d3c8a]=_0x364639;}}async function findRelatedId(_0x3cab6f,_0x33f596,_0x3ecdae=a1_0x32b193(0x21e)){const _0x5b79d5=a1_0x32b193;if(_0x3ecdae===_0x5b79d5(0x21e)&&_0x3cab6f[_0x5b79d5(0x24d)]['thermostatMapping']){let _0x2ec60b=_0x3cab6f['config'][_0x5b79d5(0x214)];if(typeof _0x2ec60b===_0x5b79d5(0x269))try{_0x2ec60b=JSON['parse'](_0x2ec60b);}catch(_0x167e6b){}if(_0x2ec60b&&_0x2ec60b[_0x33f596])return _0x2ec60b[_0x33f596];}if(_0x3ecdae===_0x5b79d5(0x204)&&_0x3cab6f[_0x5b79d5(0x24d)][_0x5b79d5(0x1cd)]){let _0x498aec=_0x3cab6f[_0x5b79d5(0x24d)][_0x5b79d5(0x1cd)];if(typeof _0x498aec===_0x5b79d5(0x269))try{_0x498aec=JSON['parse'](_0x498aec);}catch(_0xba3f7e){}if(_0x498aec&&_0x498aec[_0x33f596])return _0x498aec[_0x33f596];}let _0x371130=[];if(_0x3ecdae===_0x5b79d5(0x21e))_0x371130=[{'s':'.1.ACTUAL_TEMPERATURE','t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x5b79d5(0x23b),'t':_0x5b79d5(0x1f4)},{'s':_0x5b79d5(0x23b),'t':_0x5b79d5(0x213)},{'s':_0x5b79d5(0x1ca),'t':_0x5b79d5(0x230)},{'s':_0x5b79d5(0x26c),'t':'occupied_heating_setpoint'},{'s':_0x5b79d5(0x26c),'t':'current_heating_setpoint'},{'s':'temperature','t':'target_temperature'},{'s':_0x5b79d5(0x1d8),'t':_0x5b79d5(0x216)},{'s':'Ist','t':'Soll'},{'s':'temperature','t':_0x5b79d5(0x21e)}];else _0x3ecdae===_0x5b79d5(0x204)&&(_0x371130=[{'s':_0x5b79d5(0x1ef),'t':_0x5b79d5(0x245)},{'s':'.1.TEMPERATURE','t':_0x5b79d5(0x245)},{'s':_0x5b79d5(0x23b),'t':_0x5b79d5(0x240)},{'s':'local_temperature','t':_0x5b79d5(0x1c0)},{'s':_0x5b79d5(0x20d),'t':_0x5b79d5(0x268)},{'s':_0x5b79d5(0x20d),'t':_0x5b79d5(0x26d)}]);for(const _0x33116c of _0x371130){if(_0x33f596[_0x5b79d5(0x257)](_0x33116c['s'])){const _0x21abb1=_0x33f596[_0x5b79d5(0x1c3)](_0x33116c['s'],_0x33116c['t']),_0x2d356d=await _0x3cab6f[_0x5b79d5(0x222)](_0x21abb1);if(_0x2d356d)return _0x21abb1;}}try{const _0x4d465b=_0x33f596['split']('.');if(_0x4d465b['length']>0x2){const _0x3a4d45=_0x4d465b[_0x5b79d5(0x217)](0x0,-0x1)[_0x5b79d5(0x266)]('.'),_0x29bab9=await _0x3cab6f[_0x5b79d5(0x1c8)](_0x3a4d45+'.*'),_0x1e51c2=[],_0x3d9495=_0x33f596[_0x5b79d5(0x1ff)](/[._]+/)[_0x5b79d5(0x220)](_0x201c2b=>!['openknx','0',_0x5b79d5(0x1e8),_0x5b79d5(0x1f6),'wert',_0x5b79d5(0x20d),'actual',_0x5b79d5(0x25e),_0x5b79d5(0x212),_0x5b79d5(0x23d)][_0x5b79d5(0x257)](_0x201c2b[_0x5b79d5(0x227)]()));for(const [_0x2ad58f,_0x41a0d1]of Object[_0x5b79d5(0x202)](_0x29bab9)){if(_0x2ad58f===_0x33f596)continue;if(_0x41a0d1&&_0x41a0d1[_0x5b79d5(0x1d5)]){const _0xef8495=_0x2ad58f[_0x5b79d5(0x227)](),_0x56568e=(_0x41a0d1[_0x5b79d5(0x1d5)]['role']||'')[_0x5b79d5(0x227)](),_0x521b6b=(_0x41a0d1[_0x5b79d5(0x1d5)][_0x5b79d5(0x25d)]||'')['toLowerCase']();let _0x111af1=![];if(_0x3ecdae===_0x5b79d5(0x21e)&&_0x41a0d1['common']['write']===!![])_0x111af1=_0xef8495[_0x5b79d5(0x257)]('set')||_0xef8495[_0x5b79d5(0x257)](_0x5b79d5(0x203))||_0xef8495[_0x5b79d5(0x257)](_0x5b79d5(0x258))||_0x56568e[_0x5b79d5(0x257)](_0x5b79d5(0x1c7))||_0x56568e[_0x5b79d5(0x257)]('thermostat.setpoint');else _0x3ecdae===_0x5b79d5(0x204)&&(_0x111af1=_0xef8495[_0x5b79d5(0x257)](_0x5b79d5(0x26d))||_0xef8495[_0x5b79d5(0x257)]('valve')||_0xef8495['includes'](_0x5b79d5(0x233))||_0xef8495[_0x5b79d5(0x257)](_0x5b79d5(0x1ed))||_0x56568e[_0x5b79d5(0x257)](_0x5b79d5(0x22d))||_0x56568e[_0x5b79d5(0x257)](_0x5b79d5(0x1c1))||_0x521b6b['includes']('%'));if(_0x111af1){const _0x5db93d=_0x2ad58f[_0x5b79d5(0x1ff)](/[._]+/)[_0x5b79d5(0x1f8)](_0x3ed405=>_0x3ed405[_0x5b79d5(0x227)]());let _0x20fa14=0x0;_0x3d9495[_0x5b79d5(0x211)](_0x48e367=>{const _0x135892=_0x5b79d5;if(_0x5db93d[_0x135892(0x257)](_0x48e367[_0x135892(0x227)]()))_0x20fa14++;}),_0x1e51c2[_0x5b79d5(0x1da)]({'id':_0x2ad58f,'score':_0x20fa14});}}}if(_0x1e51c2['length']>0x0){_0x1e51c2['sort']((_0x1f4922,_0x3c4dbb)=>_0x3c4dbb['score']-_0x1f4922[_0x5b79d5(0x241)]);if(_0x1e51c2[0x0]['score']>0x0)return _0x1e51c2[0x0]['id'];}}}catch(_0x250a7a){}return null;}async function scanThermostats(_0x1d350e){const _0x1bd8a3=a1_0x32b193,_0x48eef5=_0x1d350e[_0x1bd8a3(0x24d)][_0x1bd8a3(0x207)]||[],_0x3ea299=[],_0x252318=_0x48eef5['filter'](_0x53ecb5=>_0x53ecb5['id']&&_0x53ecb5['id'][_0x1bd8a3(0x257)]('temperature')||_0x53ecb5['type']&&[_0x1bd8a3(0x20d),_0x1bd8a3(0x236),'sensor'][_0x1bd8a3(0x257)](_0x53ecb5[_0x1bd8a3(0x224)])||_0x53ecb5[_0x1bd8a3(0x259)]&&_0x53ecb5[_0x1bd8a3(0x259)][_0x1bd8a3(0x227)]()[_0x1bd8a3(0x257)](_0x1bd8a3(0x25f)));for(const _0x386c04 of _0x252318){const _0x70cfaf=await findRelatedId(_0x1d350e,_0x386c04['id'],_0x1bd8a3(0x21e)),_0x5126b2=await findRelatedId(_0x1d350e,_0x386c04['id'],_0x1bd8a3(0x204));let _0x111384=_0x1bd8a3(0x25c),_0x34c109=![],_0x337bcb=_0x1d350e[_0x1bd8a3(0x24d)][_0x1bd8a3(0x214)]||{};if(typeof _0x337bcb==='string')try{_0x337bcb=JSON['parse'](_0x337bcb);}catch(_0x34abbf){}let _0x34be4a=_0x1d350e[_0x1bd8a3(0x24d)][_0x1bd8a3(0x1cd)]||{};if(typeof _0x34be4a===_0x1bd8a3(0x269))try{_0x34be4a=JSON[_0x1bd8a3(0x244)](_0x34be4a);}catch(_0x173e01){}if(_0x337bcb[_0x386c04['id']]&&_0x337bcb[_0x386c04['id']]===_0x70cfaf||_0x34be4a[_0x386c04['id']]&&_0x34be4a[_0x386c04['id']]===_0x5126b2)_0x111384=_0x1bd8a3(0x1dc),_0x34c109=!![];else(_0x70cfaf||_0x5126b2)&&(_0x111384=_0x1bd8a3(0x206));_0x3ea299['push']({'room':_0x386c04[_0x1bd8a3(0x1d4)]||_0x1bd8a3(0x1fd),'sensorId':_0x386c04['id'],'setpointId':_0x70cfaf||'-','valveId':_0x5126b2||'-','source':_0x111384,'isManual':_0x34c109,'status':_0x70cfaf&&_0x5126b2?_0x1bd8a3(0x1ab):_0x70cfaf?'OK':_0x1bd8a3(0x1b4)});}return _0x3ea299[_0x1bd8a3(0x1e5)]((_0xfdcf2e,_0x4d43b3)=>_0xfdcf2e[_0x1bd8a3(0x1e6)][_0x1bd8a3(0x219)](_0x4d43b3[_0x1bd8a3(0x1e6)]));}async function updateSchedulePreview(_0x212778){const _0x279754=a1_0x32b193;if(!_0x212778['config'][_0x279754(0x1f2)]||!_0x212778[_0x279754(0x24d)][_0x279754(0x264)])return;let _0xe44816={};try{const _0x501f91=await _0x212778[_0x279754(0x1c2)](_0x279754(0x1bc));if(_0x501f91&&_0x501f91[_0x279754(0x1d7)])_0xe44816=JSON[_0x279754(0x244)](_0x501f91[_0x279754(0x1d7)]);}catch(_0x4de6a7){}const _0x483e7f=[],_0x13c143=Date[_0x279754(0x267)](),_0x5a36ad=0x30*0x3c*0x3c*0x3e8;try{const _0x374b75=await _0x212778[_0x279754(0x1f1)](_0x212778[_0x279754(0x24d)][_0x279754(0x264)]+_0x279754(0x1ec));if(!_0x374b75||!_0x374b75[_0x279754(0x1d7)])return;const _0x25c3c3=JSON[_0x279754(0x244)](_0x374b75[_0x279754(0x1d7)]),_0x3c6de0=_0x212778[_0x279754(0x24d)][_0x279754(0x1b7)]||[],_0x126e16=_0x212778['config'][_0x279754(0x207)]||[],_0x12fd58=new Set();_0x126e16['forEach'](_0x12ef9f=>{const _0x4772f0=_0x279754;if(_0x12ef9f['location'])_0x12fd58[_0x4772f0(0x20c)](_0x12ef9f['location']);});for(const _0x193343 of _0x25c3c3){if(_0x193343[_0x279754(0x22a)]&&_0x3c6de0['length']>0x0&&!_0x3c6de0['includes'](_0x193343['_calName']))continue;const _0x10142a=_0x193343[_0x279754(0x231)]||_0x193343['eventStart']||_0x193343[_0x279754(0x23f)];if(!_0x10142a)continue;const _0x4de111=new Date(_0x10142a),_0x65a39f=_0x4de111[_0x279754(0x1df)]();if(isNaN(_0x65a39f))continue;if(_0x65a39f<_0x13c143)continue;if(_0x65a39f>_0x13c143+_0x5a36ad)continue;const _0x427c38=(_0x193343['event']||_0x193343['summary']||'')[_0x279754(0x227)]();let _0x36d7f2=![],_0x2c8b29=[],_0x3de91e=_0x193343[_0x279754(0x1f7)]||_0x193343[_0x279754(0x246)]||'Unbekannt';if(_0x427c38[_0x279754(0x257)](_0x279754(0x262))||_0x427c38[_0x279754(0x257)](_0x279754(0x1dd))||_0x427c38[_0x279754(0x257)](_0x279754(0x221)))_0x36d7f2=!![],_0x2c8b29=Array[_0x279754(0x229)](_0x12fd58);else for(const _0x4d021c of _0x12fd58){if(_0x427c38[_0x279754(0x257)](_0x4d021c['toLowerCase']()))_0x2c8b29['push'](_0x4d021c);}_0x2c8b29['length']>0x0&&_0x2c8b29[_0x279754(0x211)](_0x3548f7=>{const _0x59696a=_0x279754;let _0x250b44=0x3c;if(_0x36d7f2){let _0x1799c9=0x0;Object[_0x59696a(0x1b2)](_0xe44816)[_0x59696a(0x211)](_0x2ea5cc=>{if(_0x2ea5cc>_0x1799c9)_0x1799c9=_0x2ea5cc;}),_0x250b44=_0x1799c9>0x0?_0x1799c9:0x78;}else _0x250b44=getWarmupRobust(_0xe44816,_0x3548f7);const _0x2d1dfd=new Date(_0x65a39f-_0x250b44*0xea60);_0x483e7f[_0x59696a(0x1da)]({'eventTime':_0x65a39f,'triggerTime':_0x2d1dfd[_0x59696a(0x1df)](),'room':_0x3548f7,'minutes':_0x250b44,'reason':_0x3de91e,'isGlobal':_0x36d7f2});});}}catch(_0x257d0d){}_0x483e7f['sort']((_0x1c2ee6,_0x25dd3f)=>_0x1c2ee6[_0x279754(0x226)]-_0x25dd3f[_0x279754(0x226)]);const _0x134873=_0x483e7f['slice'](0x0,0x1e);await _0x212778['setStateAsync']('analysis.energy.schedulePreview',{'val':JSON[_0x279754(0x1c6)](_0x134873),'ack':!![]});}async function monitorEnforcements(_0xc8001){const _0x4a8e00=a1_0x32b193;try{const _0x44ecd9=_0x4a8e00(0x1f0),_0x5a349f=await _0xc8001['getStateAsync'](_0x44ecd9);if(!_0x5a349f||!_0x5a349f[_0x4a8e00(0x1d7)])return;let _0x5147ba=[];try{_0x5147ba=JSON[_0x4a8e00(0x244)](_0x5a349f[_0x4a8e00(0x1d7)]);}catch(_0x58dfff){return;}if(!Array[_0x4a8e00(0x1b1)](_0x5147ba)||_0x5147ba[_0x4a8e00(0x263)]===0x0)return;const _0x1ea15c=Date['now'](),_0x2ddff3=_0xc8001[_0x4a8e00(0x24d)][_0x4a8e00(0x207)]||[];let _0x2f455f=![];for(let _0x246e4b=_0x5147ba[_0x4a8e00(0x263)]-0x1;_0x246e4b>=0x0;_0x246e4b--){const _0x2a4968=_0x5147ba[_0x246e4b];if(_0x1ea15c>=_0x2a4968[_0x4a8e00(0x261)]){_0xc8001[_0x4a8e00(0x22c)][_0x4a8e00(0x26b)]('üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20'+_0x2a4968[_0x4a8e00(0x1e6)]+_0x4a8e00(0x20e)),_0x5147ba['splice'](_0x246e4b,0x1),_0x2f455f=!![];continue;}const _0x19ab97=_0x2ddff3['find'](_0xe84043=>normalize(_0xe84043[_0x4a8e00(0x1d4)])===normalize(_0x2a4968[_0x4a8e00(0x1e6)])&&(_0xe84043[_0x4a8e00(0x224)]===_0x4a8e00(0x20d)||_0xe84043[_0x4a8e00(0x224)]==='thermostat'));if(_0x19ab97){const _0x28bc8b=await findRelatedId(_0xc8001,_0x19ab97['id'],_0x4a8e00(0x21e));if(_0x28bc8b){const _0x2620cc=await _0xc8001[_0x4a8e00(0x1f1)](_0x28bc8b);_0x2620cc&&typeof _0x2620cc[_0x4a8e00(0x1d7)]==='number'&&(_0x2620cc[_0x4a8e00(0x1d7)]<0xf&&(_0xc8001['log']['warn'](_0x4a8e00(0x1bb)+_0x2a4968['room']+'\x20auf\x20'+_0x2620cc['val']+_0x4a8e00(0x1c5)+_0x2a4968[_0x4a8e00(0x258)]+_0x4a8e00(0x23a)),await _0xc8001[_0x4a8e00(0x1e3)](_0x28bc8b,_0x2a4968[_0x4a8e00(0x258)]),await logAutomationAction(_0xc8001,_0x4a8e00(0x1be)+_0x2a4968['room']+':\x20'+_0x2620cc['val']+_0x4a8e00(0x20b)+_0x2a4968[_0x4a8e00(0x258)]+_0x4a8e00(0x255))));}}}_0x2f455f&&await _0xc8001[_0x4a8e00(0x1b9)](_0x44ecd9,{'val':JSON[_0x4a8e00(0x1c6)](_0x5147ba),'ack':!![]});}catch(_0x4cde70){_0xc8001[_0x4a8e00(0x22c)][_0x4a8e00(0x1bf)](_0x4a8e00(0x1de)+_0x4cde70['message']);}}async function checkCalendarTriggers(_0xe4583e){const _0x1df6d0=a1_0x32b193;if(!_0xe4583e[_0x1df6d0(0x24d)][_0x1df6d0(0x1f2)]||!_0xe4583e[_0x1df6d0(0x24d)][_0x1df6d0(0x264)])return;await updateSchedulePreview(_0xe4583e);let _0x109aed={},_0x14543d={};try{const _0xc6e479=await _0xe4583e[_0x1df6d0(0x1c2)](_0x1df6d0(0x1bc));if(_0xc6e479&&_0xc6e479[_0x1df6d0(0x1d7)])_0x109aed=JSON[_0x1df6d0(0x244)](_0xc6e479[_0x1df6d0(0x1d7)]);const _0x4b0684=await _0xe4583e[_0x1df6d0(0x1c2)](_0x1df6d0(0x1e0));if(_0x4b0684&&_0x4b0684['val'])_0x14543d=JSON[_0x1df6d0(0x244)](_0x4b0684[_0x1df6d0(0x1d7)]);}catch(_0x4811ea){}let _0x115338={'default':0x15};try{const _0x104fce=await _0xe4583e[_0x1df6d0(0x1c2)]('analysis.energy.warmupTargets');if(_0x104fce&&_0x104fce['val'])_0x115338=JSON[_0x1df6d0(0x244)](_0x104fce['val']);}catch(_0x8af43c){}let _0x5417=[];try{const _0x4149e7=await _0xe4583e[_0x1df6d0(0x1c2)](_0x1df6d0(0x1f0));if(_0x4149e7&&_0x4149e7[_0x1df6d0(0x1d7)])_0x5417=JSON[_0x1df6d0(0x244)](_0x4149e7[_0x1df6d0(0x1d7)]);}catch(_0x2e3224){}try{const _0x32209b=await _0xe4583e['getForeignStateAsync'](_0xe4583e[_0x1df6d0(0x24d)][_0x1df6d0(0x264)]+_0x1df6d0(0x1ec));if(!_0x32209b||!_0x32209b[_0x1df6d0(0x1d7)])return;const _0x4d9258=JSON[_0x1df6d0(0x244)](_0x32209b['val']),_0x284084=Date[_0x1df6d0(0x267)](),_0x58cb46=_0xe4583e['config']['devices']||[],_0x5b271c=_0xe4583e['config'][_0x1df6d0(0x1b7)]||[];let _0x1634d1=![];for(const _0xb80609 of _0x4d9258){if(_0xb80609['_calName']&&_0x5b271c[_0x1df6d0(0x263)]>0x0&&!_0x5b271c[_0x1df6d0(0x257)](_0xb80609[_0x1df6d0(0x22a)]))continue;const _0x43f028=_0xb80609[_0x1df6d0(0x231)]||_0xb80609[_0x1df6d0(0x1e2)]||_0xb80609[_0x1df6d0(0x23f)];if(!_0x43f028)continue;const _0x3730e1=new Date(_0x43f028);if(isNaN(_0x3730e1['getTime']()))continue;const _0x25e636=(_0xb80609[_0x1df6d0(0x1f7)]||_0xb80609['summary']||'')[_0x1df6d0(0x227)]();if(_0x25e636['includes'](_0x1df6d0(0x262))||_0x25e636[_0x1df6d0(0x257)](_0x1df6d0(0x1dd))||_0x25e636['includes']('ankunft')){let _0x280d29=0x0;Object[_0x1df6d0(0x1b2)](_0x109aed)[_0x1df6d0(0x211)](_0x5a8715=>{if(_0x5a8715>_0x280d29)_0x280d29=_0x5a8715;});if(_0x280d29===0x0)_0x280d29=0x78;const _0xce8b13=_0x3730e1[_0x1df6d0(0x1df)]()-_0x280d29*0xea60;_0x284084>=_0xce8b13&&_0x284084<_0x3730e1['getTime']()&&(_0xe4583e[_0x1df6d0(0x1d0)]!==_0x1df6d0(0x1fa)&&(_0xe4583e[_0x1df6d0(0x22c)][_0x1df6d0(0x26b)]('üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20'+_0x280d29+'\x20min).'),await _0xe4583e[_0x1df6d0(0x1b9)](_0x1df6d0(0x21d),{'val':_0x1df6d0(0x1fa),'ack':![]})));}for(const _0x48b28b of _0x58cb46){if(_0x48b28b['location']){const _0xdd16ce=_0x48b28b['location'][_0x1df6d0(0x227)](),_0xc2fd02=(_0x48b28b[_0x1df6d0(0x259)]||'')['toLowerCase']();let _0x10cf53=_0x25e636['includes'](_0xdd16ce);!_0x10cf53&&_0xc2fd02[_0x1df6d0(0x263)]>0x3&&_0x25e636[_0x1df6d0(0x257)](_0xc2fd02)&&(_0x10cf53=!![]);if(_0x10cf53){const _0x14aec5=getWarmupRobust(_0x109aed,_0x48b28b[_0x1df6d0(0x1d4)]),_0x3da502=_0x14543d[_0x48b28b[_0x1df6d0(0x1d4)]]||_0x1df6d0(0x218),_0x439289=_0x3730e1['getTime']()-_0x14aec5*0xea60;if(_0x284084>=_0x439289&&_0x284084<_0x3730e1[_0x1df6d0(0x1df)]()){const _0x535db2=lastActions[_0x1df6d0(0x234)+_0x48b28b[_0x1df6d0(0x1d4)]];if(_0x535db2&&_0x284084-_0x535db2<CAL_COOLDOWN_MS)continue;const _0x40b3a3=await findRelatedId(_0xe4583e,_0x48b28b['id'],'setpoint');if(_0x40b3a3){let _0x3638e2=_0x115338[_0x48b28b[_0x1df6d0(0x1d4)]];if(_0x3638e2===undefined)_0x3638e2=_0x115338['default'];if(_0x3638e2===undefined)_0x3638e2=0x15;const _0x1aa4f5=await _0xe4583e[_0x1df6d0(0x1f1)](_0x40b3a3);if(_0x1aa4f5&&typeof _0x1aa4f5['val']==='number'&&_0x1aa4f5[_0x1df6d0(0x1d7)]<_0x3638e2-0.5){_0xe4583e[_0x1df6d0(0x22c)][_0x1df6d0(0x26b)](_0x1df6d0(0x24b)+_0x3da502+_0x1df6d0(0x1ee)+_0x48b28b[_0x1df6d0(0x1d4)]+'\x27\x20(Match:\x20'+_0x25e636+')\x20aktiv.\x20Heize\x20auf\x20'+_0x3638e2+_0x1df6d0(0x251)+_0x14aec5+_0x1df6d0(0x24a)),await _0xe4583e[_0x1df6d0(0x1e3)](_0x40b3a3,_0x3638e2),await logAutomationAction(_0xe4583e,_0x1df6d0(0x24f)+_0x48b28b[_0x1df6d0(0x1d4)]+_0x1df6d0(0x238)+_0x3638e2+_0x1df6d0(0x1cc)+_0x3da502+')'),lastActions[_0x1df6d0(0x234)+_0x48b28b[_0x1df6d0(0x1d4)]]=_0x284084;const _0x4d0be7=_0x5417[_0x1df6d0(0x210)](_0x42a9fd=>_0x42a9fd[_0x1df6d0(0x1e6)]===_0x48b28b[_0x1df6d0(0x1d4)]);if(_0x4d0be7!==-0x1)_0x5417[_0x1df6d0(0x1cb)](_0x4d0be7,0x1);_0x5417[_0x1df6d0(0x1da)]({'room':_0x48b28b[_0x1df6d0(0x1d4)],'target':_0x3638e2,'until':_0x3730e1[_0x1df6d0(0x1df)]()}),_0x1634d1=!![];}}}}}}}_0x1634d1&&await _0xe4583e[_0x1df6d0(0x1b9)](_0x1df6d0(0x1f0),{'val':JSON[_0x1df6d0(0x1c6)](_0x5417),'ack':!![]});}catch(_0x44a9fa){_0xe4583e[_0x1df6d0(0x22c)][_0x1df6d0(0x20a)](_0x1df6d0(0x20f)+_0x44a9fa[_0x1df6d0(0x1af)]);}}async function manageMpcIntervention(_0x355851,_0x345f2e,_0x346ad8){const _0x1205df=a1_0x32b193;try{const _0x1d1a09=_0x1205df(0x23c),_0x59be4b=await _0x355851['getStateAsync'](_0x1d1a09);let _0x586b4f=[];if(_0x59be4b&&_0x59be4b[_0x1205df(0x1d7)])try{_0x586b4f=JSON['parse'](_0x59be4b[_0x1205df(0x1d7)]);}catch(_0x56a25b){}const _0x3b613a=_0x586b4f[_0x1205df(0x1fb)](_0x345f2e);if(_0x346ad8===_0x1205df(0x20c))_0x3b613a===-0x1&&(_0x586b4f[_0x1205df(0x1da)](_0x345f2e),await _0x355851[_0x1205df(0x1b9)](_0x1d1a09,{'val':JSON[_0x1205df(0x1c6)](_0x586b4f),'ack':!![]}));else _0x346ad8==='remove'&&(_0x3b613a!==-0x1&&(_0x586b4f[_0x1205df(0x1cb)](_0x3b613a,0x1),await _0x355851[_0x1205df(0x1b9)](_0x1d1a09,{'val':JSON[_0x1205df(0x1c6)](_0x586b4f),'ack':!![]})));}catch(_0x36d5f5){}}async function cleanupGhostInterventions(_0x58f2e8){const _0x18a0d0=a1_0x32b193;try{const _0x4fc950=_0x18a0d0(0x23c),_0x4bd28c=await _0x58f2e8[_0x18a0d0(0x1c2)](_0x4fc950);if(!_0x4bd28c||!_0x4bd28c[_0x18a0d0(0x1d7)])return;const _0x17baaa=JSON[_0x18a0d0(0x244)](_0x4bd28c['val']);if(!Array[_0x18a0d0(0x1b1)](_0x17baaa)||_0x17baaa['length']===0x0)return;let _0xaaa0f5={'default':0x15};try{const _0x377502=await _0x58f2e8[_0x18a0d0(0x1c2)](_0x18a0d0(0x201));if(_0x377502&&_0x377502[_0x18a0d0(0x1d7)])_0xaaa0f5=JSON['parse'](_0x377502[_0x18a0d0(0x1d7)]);}catch(_0x227106){}let _0x3dc0e7=[];try{const _0x1750bc=await _0x58f2e8[_0x18a0d0(0x1c2)](_0x18a0d0(0x249));if(_0x1750bc&&_0x1750bc['val'])_0x3dc0e7=JSON[_0x18a0d0(0x244)](_0x1750bc[_0x18a0d0(0x1d7)]);}catch(_0x348d49){}let _0x1006da={},_0x13ff3f=![];try{const _0x17f914=await _0x58f2e8[_0x18a0d0(0x1c2)](_0x18a0d0(0x1aa));if(_0x17f914&&_0x17f914[_0x18a0d0(0x1d7)])_0x1006da=JSON[_0x18a0d0(0x244)](_0x17f914['val']);}catch(_0x23f631){}if(_0x1006da[_0x18a0d0(0x1fc)]){const _0x2f5007=Date[_0x18a0d0(0x267)]();for(const [_0x366a3c,_0x52621e]of Object['entries'](_0x1006da[_0x18a0d0(0x1fc)])){_0x2f5007-_0x52621e>PENALTY_TTL&&(delete _0x1006da[_0x366a3c],delete _0x1006da[_0x18a0d0(0x1fc)][_0x366a3c],_0x13ff3f=!![],_0x58f2e8[_0x18a0d0(0x22c)][_0x18a0d0(0x26b)](_0x18a0d0(0x26a)+_0x366a3c+_0x18a0d0(0x21b)));}}const _0x4a5671=_0x58f2e8['config'][_0x18a0d0(0x207)]||[];let _0x1258e9=![];for(let _0x41f5d8=_0x17baaa[_0x18a0d0(0x263)]-0x1;_0x41f5d8>=0x0;_0x41f5d8--){const _0x204e8d=_0x17baaa[_0x41f5d8],_0x45fc3f=_0x4a5671[_0x18a0d0(0x25b)](_0x1184b9=>normalize(_0x1184b9['location'])===normalize(_0x204e8d)&&(_0x1184b9[_0x18a0d0(0x224)]===_0x18a0d0(0x20d)||_0x1184b9['type']===_0x18a0d0(0x236)));if(!_0x45fc3f){_0x58f2e8[_0x18a0d0(0x22c)]['warn']('üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27'+_0x204e8d+_0x18a0d0(0x200)),_0x17baaa[_0x18a0d0(0x1cb)](_0x41f5d8,0x1),_0x1258e9=!![];continue;}if(_0x45fc3f){const _0x5dfc12=await findRelatedId(_0x58f2e8,_0x45fc3f['id'],'setpoint'),_0x41a599=await _0x58f2e8[_0x18a0d0(0x1f1)](_0x45fc3f['id']);if(_0x5dfc12){const _0x91bad=await _0x58f2e8[_0x18a0d0(0x1f1)](_0x5dfc12);if(_0x91bad&&typeof _0x91bad['val']===_0x18a0d0(0x1f5)){let _0x3f17f3=![],_0x5c9678='';Math[_0x18a0d0(0x228)](_0x91bad[_0x18a0d0(0x1d7)]-ECO_TEMP)>0.5&&(_0x3f17f3=!![],_0x5c9678=_0x18a0d0(0x1ae));if(!_0x3f17f3&&_0x41a599&&typeof _0x41a599[_0x18a0d0(0x1d7)]===_0x18a0d0(0x1f5)){const _0x5afd94=_0xaaa0f5[_0x204e8d]||_0xaaa0f5[_0x18a0d0(0x22b)]||0x15;_0x41a599[_0x18a0d0(0x1d7)]<_0x5afd94+0.2&&(_0x3f17f3=!![],_0x5c9678='too_cold');}if(_0x3f17f3){if(_0x5c9678===_0x18a0d0(0x1ae)){_0x58f2e8[_0x18a0d0(0x22c)]['info']('üßπ\x20[MPC\x20CLEANUP]\x20'+_0x204e8d+_0x18a0d0(0x239)+_0x91bad['val']+_0x18a0d0(0x25a)+ECO_TEMP+_0x18a0d0(0x243));const _0x5df4a8=lastActions[_0x18a0d0(0x234)+_0x204e8d],_0x799101=_0x5df4a8&&Date[_0x18a0d0(0x267)]()-_0x5df4a8<0x2*0x3c*0x3e8;if(!_0x799101&&_0x91bad[_0x18a0d0(0x1d7)]>ECO_TEMP+0.5){_0x58f2e8[_0x18a0d0(0x24e)]&&(_0x58f2e8[_0x18a0d0(0x22c)][_0x18a0d0(0x26b)](_0x18a0d0(0x1e7)+_0x204e8d+_0x18a0d0(0x237)),_0x58f2e8[_0x18a0d0(0x24e)]('TRAIN_RL_PENALTY',{'room':_0x204e8d}));const _0xa6b3ad=_0x204e8d+'_'+new Date()[_0x18a0d0(0x235)]();if(!_0x1006da[_0xa6b3ad]){_0x1006da[_0xa6b3ad]=0x1;if(!_0x1006da[_0x18a0d0(0x1fc)])_0x1006da[_0x18a0d0(0x1fc)]={};_0x1006da['_meta'][_0xa6b3ad]=Date['now'](),_0x13ff3f=!![];}}else _0x799101&&_0x58f2e8['log'][_0x18a0d0(0x26b)](_0x18a0d0(0x1ac)+_0x204e8d+_0x18a0d0(0x1e9));}else{if(_0x5c9678==='too_cold'){let _0x422c6a=![];if(_0x3dc0e7['find'](_0x180370=>_0x180370[_0x18a0d0(0x1e6)]===_0x204e8d))_0x422c6a=!![];const _0x1b3764=_0x4a5671['filter'](_0x34a2c2=>normalize(_0x34a2c2['location'])===normalize(_0x204e8d)&&(_0x34a2c2[_0x18a0d0(0x224)]===_0x18a0d0(0x1eb)||_0x34a2c2[_0x18a0d0(0x224)]===_0x18a0d0(0x25e)||_0x34a2c2[_0x18a0d0(0x224)]===_0x18a0d0(0x252)));for(const _0x4b7438 of _0x1b3764){try{const _0x3026f5=await _0x58f2e8[_0x18a0d0(0x1f1)](_0x4b7438['id']);if(_0x3026f5&&(_0x3026f5['val']===!![]||_0x3026f5[_0x18a0d0(0x1d7)]===0x1||String(_0x3026f5[_0x18a0d0(0x1d7)])[_0x18a0d0(0x227)]()==='open'))_0x422c6a=!![];}catch(_0x56c59c){}}if(_0x422c6a)_0x58f2e8[_0x18a0d0(0x22c)][_0x18a0d0(0x26b)](_0x18a0d0(0x232)+_0x204e8d+_0x18a0d0(0x21a));else{const _0x67a2ba=_0xaaa0f5[_0x204e8d]||_0xaaa0f5['default']||0x15;_0x58f2e8[_0x18a0d0(0x22c)][_0x18a0d0(0x26b)](_0x18a0d0(0x1b8)+_0x204e8d+_0x18a0d0(0x254)+_0x41a599[_0x18a0d0(0x1d7)]+_0x18a0d0(0x1e1)+(_0x67a2ba+0.2)+_0x18a0d0(0x215)),await _0x58f2e8['setForeignStateAsync'](_0x5dfc12,_0x67a2ba),await logAutomationAction(_0x58f2e8,_0x18a0d0(0x1d1)+_0x204e8d+_0x18a0d0(0x1d2)+_0x67a2ba+'¬∞C'),lastActions[_0x18a0d0(0x247)+_0x204e8d]=Date['now']();}}}_0x17baaa[_0x18a0d0(0x1cb)](_0x41f5d8,0x1),_0x1258e9=!![];}}}}}_0x1258e9&&await _0x58f2e8[_0x18a0d0(0x1b9)](_0x4fc950,{'val':JSON['stringify'](_0x17baaa),'ack':!![]}),_0x13ff3f&&await _0x58f2e8['setStateAsync'](_0x18a0d0(0x1aa),{'val':JSON[_0x18a0d0(0x1c6)](_0x1006da),'ack':!![]});}catch(_0x1b4926){}}async function applyEnergySavings(_0x5b36ae,_0x5e43a6){const _0x48efd3=a1_0x32b193;await cleanupGhostInterventions(_0x5b36ae);if(!_0x5e43a6||_0x5e43a6['length']===0x0)return;const _0x3fba60=_0x5b36ae[_0x48efd3(0x24d)][_0x48efd3(0x207)]||[],_0x489540=Date[_0x48efd3(0x267)]();for(const _0x263672 of _0x5e43a6){const _0xf5a366=_0x263672[_0x48efd3(0x1e6)],_0x215a95=_0x263672[_0x48efd3(0x1c4)],_0x10d55d=_0x263672[_0x48efd3(0x258)]||0x15;if(lastActions[_0x48efd3(0x247)+_0xf5a366]&&_0x489540-lastActions[_0x48efd3(0x247)+_0xf5a366]<RESCUE_LOCK_MS)continue;const _0x56db97=_0x3fba60[_0x48efd3(0x25b)](_0x2267da=>normalize(_0x2267da['location'])===normalize(_0xf5a366)&&(_0x2267da[_0x48efd3(0x224)]==='temperature'||_0x2267da[_0x48efd3(0x224)]===_0x48efd3(0x236)));if(!_0x56db97)continue;const _0x1f142e=await findRelatedId(_0x5b36ae,_0x56db97['id'],'setpoint');if(_0x1f142e){if(lastActions[_0x48efd3(0x1cf)+_0xf5a366]&&_0x489540-lastActions[_0x48efd3(0x1cf)+_0xf5a366]<0x1e*0x3c*0x3e8)continue;const _0x2e7f34=await _0x5b36ae[_0x48efd3(0x1f1)](_0x1f142e);if(_0x2e7f34&&typeof _0x2e7f34[_0x48efd3(0x1d7)]===_0x48efd3(0x1f5)){const _0xb649a1=_0x2e7f34[_0x48efd3(0x1d7)];_0xb649a1!==ECO_TEMP&&await manageMpcIntervention(_0x5b36ae,_0xf5a366,'remove');if(_0x215a95>0x1e)_0xb649a1>ECO_TEMP+0.5&&(_0x5b36ae[_0x48efd3(0x22c)][_0x48efd3(0x26b)](_0x48efd3(0x1e4)+_0xf5a366+_0x48efd3(0x1b3)+ECO_TEMP+'¬∞C!\x20(Puffer:\x20'+_0x215a95+'\x20min)'),await _0x5b36ae['setForeignStateAsync'](_0x1f142e,ECO_TEMP),await manageMpcIntervention(_0x5b36ae,_0xf5a366,_0x48efd3(0x20c)),lastActions['mpc_'+_0xf5a366]=_0x489540,await logAutomationAction(_0x5b36ae,_0x48efd3(0x205)+_0xf5a366+_0x48efd3(0x1b5)+ECO_TEMP+'¬∞C'));else _0x215a95<=0xf&&(_0xb649a1<_0x10d55d&&(_0x5b36ae['log'][_0x48efd3(0x26b)]('üî•\x20[MPC\x20ACTION]\x20Heize\x20'+_0xf5a366+_0x48efd3(0x1c9)+_0x10d55d+_0x48efd3(0x248)),await _0x5b36ae[_0x48efd3(0x1e3)](_0x1f142e,_0x10d55d),await manageMpcIntervention(_0x5b36ae,_0xf5a366,_0x48efd3(0x1ba)),lastActions[_0x48efd3(0x1cf)+_0xf5a366]=_0x489540,await logAutomationAction(_0x5b36ae,'[MPC]\x20'+_0xf5a366+':\x20Aufheizen\x20auf\x20'+_0x10d55d+'¬∞C')));}}else _0x5b36ae[_0x48efd3(0x22c)][_0x48efd3(0x20a)]('[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20'+_0xf5a366+_0x48efd3(0x265));}}module['exports']={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};