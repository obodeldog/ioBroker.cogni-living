const a1_0x28d294=a1_0x5c75;(function(_0x31ea7a,_0x3ea116){const _0x5836d8=a1_0x5c75,_0x238ae2=_0x31ea7a();while(!![]){try{const _0x28d404=parseInt(_0x5836d8(0x146))/0x1*(-parseInt(_0x5836d8(0x19a))/0x2)+parseInt(_0x5836d8(0xf8))/0x3+-parseInt(_0x5836d8(0xf7))/0x4*(-parseInt(_0x5836d8(0x142))/0x5)+parseInt(_0x5836d8(0x130))/0x6+-parseInt(_0x5836d8(0x11e))/0x7+-parseInt(_0x5836d8(0x18b))/0x8*(-parseInt(_0x5836d8(0x154))/0x9)+-parseInt(_0x5836d8(0x1a4))/0xa;if(_0x28d404===_0x3ea116)break;else _0x238ae2['push'](_0x238ae2['shift']());}catch(_0x309bc8){_0x238ae2['push'](_0x238ae2['shift']());}}}(a1_0x5cdc,0x6553b));const a1_0x410893=(function(){let _0x298505=!![];return function(_0x4fee98,_0x5d30d0){const _0x54ddd1=_0x298505?function(){const _0x26180e=a1_0x5c75;if(_0x5d30d0){const _0xf4f1fa=_0x5d30d0[_0x26180e(0x147)](_0x4fee98,arguments);return _0x5d30d0=null,_0xf4f1fa;}}:function(){};return _0x298505=![],_0x54ddd1;};}()),a1_0x2ecd1e=a1_0x410893(this,function(){const _0x44ee3b=a1_0x5c75;return a1_0x2ecd1e[_0x44ee3b(0x15e)]()['search'](_0x44ee3b(0x19e))[_0x44ee3b(0x15e)]()['constructor'](a1_0x2ecd1e)[_0x44ee3b(0xeb)](_0x44ee3b(0x19e));});a1_0x2ecd1e();function a1_0x5cdc(){const _0x221e80=['type','SET_POINT_TEMPERATURE','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','14531030IXiLZK','analysis.automation.mode','too_cold','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','role','valve','default','Fehlt','analysis.energy.mpcActiveInterventions','valve_position','rÃ¼ckkehr','analysis.energy.activeEnforcements',':\x20Absenkung\x20auf\x20','\x20wurde\x20manuell\x20erhÃ¶ht.','Â°C.','search','getHours','_date','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','stellwert','now','getForeignObjectAsync','number','config','consultButler','string','light','3036376PdQlJW','851079siTrzl','location','add','ðŸ“…\x20SMART\x20SCHEDULE\x20[','includes','level.temperature','target_temperature','Â°C\x20<\x20','thermostat','calendarInstance','.data.table','PERFECT','.4.VALVE_STATE','[CAL]\x20',']:\x20Raum-Trigger\x20\x27','thermostatMapping','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','find','temp','messwert','ACTUAL','current_heating_setpoint','analysis.energy.schedulePreview','findIndex','val','getStateAsync','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','local_temperature','\x20erreicht\x20Limit\x20(','setStateAsync','join','analysis.automation.actionLog','devices','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','sort','normal','pi_heating_demand','Soll','498351DefUWD','warn','valveMapping','.1.TEMPERATURE','.1.SET_POINT_TEMPERATURE','useCalendar','replace','contact','slice','Enforcement\x20Monitor\x20Error:\x20','setpoint','mpc_',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','score','Â°C\x20->\x20','active','message','calendarSelection','1322736UsHyfz','event','PrÃ¤diktion:\x20','setForeignStateAsync','splice','ist','Â°C).\x20Sparmodus\x20beendet!','stringify','openknx','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','\x20min).','.1.LEVEL','open','state','approved','rescue_','[WATCHDOG]\x20','\x20->\x20','5KfSOlm','_calName','indexOf','unit','62989jcaCtQ','apply','summary','analysis.energy.warmupTargets','name','actual','thermostat.setpoint','getForeignStateAsync','ankunft','Manuelles\x20Mapping','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','info','\x20->\x20Schalte\x20','sendToPythonWrapper','603HTufJC','sensor','log','entries','soll','toLowerCase','[MPC]\x20','abs','from','ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27','toString','cal_','common','\x20auf\x20','hm-rpc','off','Calendar\x20Check\x20Error:\x20','level.valve','analysis.energy.warmupTimes','exports','until','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','Classic','filter','Â°C).\x20Entferne\x20Status.','Â°C\x20(Vorlauf:\x20','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','eventStart','target','wert','push','localeCompare','toUpperCase','Ist','.1.ACTUAL_TEMPERATURE','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','Auto-Erkennung','split','_meta','triggerTime','TRAIN_RL_PENALTY','occupied_heating_setpoint','length','forEach','error','parse','temperature','urlaub\x20ende','\x20ist\x20auf\x20','Â°C\x20(via\x20','trim','analysis.automation.lastAction','ACTUAL_TEMPERATURE','window','getTime','88248LMVRyl','\x20min)','\x20gefunden!','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','ðŸ“…\x20[MPC\x20INFO]\x20','room','manual','[FORCE]\x20','position','date','Â°C\x20(Kalender-Schutz)','Unbekannt','remove','values','analysis.automation.confidenceThreshold','2DQbMkA','\x20wieder\x20auf\x20','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','Â°C!\x20(Puffer\x20leer).','(((.+)+)+)+$','.4.SET_TEMPERATURE'];a1_0x5cdc=function(){return _0x221e80;};return a1_0x5cdc();}'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x538738){const _0x38c445=a1_0x5c75;if(!_0x538738)return'';return _0x538738['toLowerCase']()[_0x38c445(0x124)](/\s+/g,'')[_0x38c445(0x186)]();}function getWarmupRobust(_0x3ad915,_0x2198fb){const _0x9e5563=a1_0x5c75;if(!_0x3ad915||!_0x2198fb)return 0x3c;if(_0x3ad915[_0x2198fb]!==undefined)return _0x3ad915[_0x2198fb];const _0x257d82=_0x2198fb[_0x9e5563(0x159)]()[_0x9e5563(0x124)](/Ã¤/g,'ae')[_0x9e5563(0x124)](/Ã¶/g,'oe')[_0x9e5563(0x124)](/Ã¼/g,'ue')[_0x9e5563(0x124)](/ÃŸ/g,'ss')[_0x9e5563(0x124)](/\s+/g,'_')[_0x9e5563(0x124)](/[^a-z0-9_]/g,'');if(_0x3ad915[_0x257d82]!==undefined)return _0x3ad915[_0x257d82];return 0x3c;}async function logAutomationAction(_0x17d42c,_0x2de736){const _0x34edd5=a1_0x5c75;await _0x17d42c['setStateAsync'](_0x34edd5(0x187),{'val':_0x2de736,'ack':!![]});try{const _0x466269=_0x34edd5(0x117),_0x79bf44=await _0x17d42c[_0x34edd5(0x111)](_0x466269);let _0x3038de=[];if(_0x79bf44&&_0x79bf44[_0x34edd5(0x110)])try{_0x3038de=JSON['parse'](_0x79bf44['val']);}catch(_0x36da8e){}_0x3038de['unshift']({'ts':Date[_0x34edd5(0xf0)](),'msg':_0x2de736});if(_0x3038de[_0x34edd5(0x17e)]>0x32)_0x3038de=_0x3038de['slice'](0x0,0x32);await _0x17d42c[_0x34edd5(0x115)](_0x466269,{'val':JSON[_0x34edd5(0x137)](_0x3038de),'ack':!![]});}catch(_0x48cda2){}}async function handlePrediction(_0x39cc1d,_0x67f1da,_0x64357){const _0x165ea9=a1_0x5c75;if(!_0x67f1da||_0x67f1da==='Unknown')return;let _0x1e8ecc=_0x165ea9(0x163),_0x1cec50=0.6;try{const _0x571a2a=await _0x39cc1d['getStateAsync'](_0x165ea9(0x1a5));if(_0x571a2a&&_0x571a2a[_0x165ea9(0x110)])_0x1e8ecc=_0x571a2a[_0x165ea9(0x110)];const _0x554d2b=await _0x39cc1d[_0x165ea9(0x111)](_0x165ea9(0x199));if(_0x554d2b&&_0x554d2b[_0x165ea9(0x110)])_0x1cec50=_0x554d2b['val'];}catch(_0x1cffee){}if(_0x1e8ecc===_0x165ea9(0x163)||_0x64357<_0x1cec50)return;const _0x48ecf9=Date[_0x165ea9(0xf0)]();if(lastActions[_0x67f1da]&&_0x48ecf9-lastActions[_0x67f1da]<COOLDOWN_MS)return;const _0x917e4=_0x39cc1d[_0x165ea9(0xf3)][_0x165ea9(0x118)]||[],_0x1b3251=normalize(_0x67f1da),_0x1337d1=_0x917e4['find'](_0xf19686=>normalize(_0xf19686[_0x165ea9(0xf9)])===_0x1b3251&&(_0xf19686[_0x165ea9(0x1a0)]===_0x165ea9(0xf6)||_0xf19686[_0x165ea9(0x1a0)]==='dimmer'||_0xf19686[_0x165ea9(0x1a0)]==='switch'));if(!_0x1337d1)return;const _0x4365f3=await aiAgent[_0x165ea9(0xf4)](_0x39cc1d,_0x67f1da,_0x1337d1[_0x165ea9(0x14a)],_0x64357);if(!_0x4365f3[_0x165ea9(0x13e)])return;const _0x42a62a=_0x165ea9(0x132)+_0x67f1da+_0x165ea9(0x152)+_0x1337d1[_0x165ea9(0x14a)]+'\x20('+_0x4365f3['reason']+')';await logAutomationAction(_0x39cc1d,'['+_0x1e8ecc[_0x165ea9(0x174)]()+']\x20'+_0x42a62a);if(_0x1e8ecc===_0x165ea9(0x12d)){const _0x46a6d9=await _0x39cc1d['getForeignStateAsync'](_0x1337d1['id']);(!_0x46a6d9||!_0x46a6d9[_0x165ea9(0x110)]&&_0x46a6d9[_0x165ea9(0x110)]!==!![])&&await _0x39cc1d[_0x165ea9(0x133)](_0x1337d1['id'],!![]),lastActions[_0x67f1da]=_0x48ecf9;}}async function findRelatedId(_0x9ff527,_0x3465cd,_0x4a329f='setpoint'){const _0x113b3b=a1_0x5c75;if(_0x4a329f==='setpoint'&&_0x9ff527['config'][_0x113b3b(0x107)]){let _0x2066fa=_0x9ff527['config'][_0x113b3b(0x107)];if(typeof _0x2066fa===_0x113b3b(0xf5))try{_0x2066fa=JSON['parse'](_0x2066fa);}catch(_0x1843d1){}if(_0x2066fa&&_0x2066fa[_0x3465cd])return _0x2066fa[_0x3465cd];}if(_0x4a329f===_0x113b3b(0xe1)&&_0x9ff527['config'][_0x113b3b(0x120)]){let _0xff5273=_0x9ff527[_0x113b3b(0xf3)][_0x113b3b(0x120)];if(typeof _0xff5273===_0x113b3b(0xf5))try{_0xff5273=JSON[_0x113b3b(0x181)](_0xff5273);}catch(_0x20a348){}if(_0xff5273&&_0xff5273[_0x3465cd])return _0xff5273[_0x3465cd];}let _0x1703af=[];if(_0x4a329f===_0x113b3b(0x128))_0x1703af=[{'s':_0x113b3b(0x176),'t':_0x113b3b(0x122)},{'s':_0x113b3b(0x121),'t':_0x113b3b(0x122)},{'s':_0x113b3b(0x121),'t':_0x113b3b(0x19f)},{'s':_0x113b3b(0x188),'t':_0x113b3b(0x1a1)},{'s':_0x113b3b(0x113),'t':_0x113b3b(0x17d)},{'s':'local_temperature','t':_0x113b3b(0x10d)},{'s':'temperature','t':_0x113b3b(0xfe)},{'s':_0x113b3b(0x10c),'t':'SET'},{'s':_0x113b3b(0x175),'t':_0x113b3b(0x11d)},{'s':'temperature','t':_0x113b3b(0x128)}];else _0x4a329f===_0x113b3b(0xe1)&&(_0x1703af=[{'s':_0x113b3b(0x176),'t':_0x113b3b(0x13b)},{'s':_0x113b3b(0x121),'t':_0x113b3b(0x13b)},{'s':_0x113b3b(0x121),'t':_0x113b3b(0x104)},{'s':_0x113b3b(0x113),'t':_0x113b3b(0x11c)},{'s':'temperature','t':_0x113b3b(0xe5)},{'s':_0x113b3b(0x182),'t':'level'}]);for(const _0x521f92 of _0x1703af){if(_0x3465cd['includes'](_0x521f92['s'])){const _0x46022e=_0x3465cd[_0x113b3b(0x124)](_0x521f92['s'],_0x521f92['t']),_0x4710ff=await _0x9ff527[_0x113b3b(0xf1)](_0x46022e);if(_0x4710ff)return _0x46022e;}}try{const _0x13fa0d=_0x3465cd[_0x113b3b(0x179)]('.');if(_0x13fa0d['length']>0x2){const _0x3d4e94=_0x13fa0d[_0x113b3b(0x126)](0x0,-0x1)[_0x113b3b(0x116)]('.'),_0x2984fa=await _0x9ff527['getForeignObjectsAsync'](_0x3d4e94+'.*'),_0x4ae344=[],_0x3ba49f=_0x3465cd[_0x113b3b(0x179)](/[._]+/)['filter'](_0x320137=>![_0x113b3b(0x138),'0',_0x113b3b(0x162),_0x113b3b(0x135),_0x113b3b(0x171),_0x113b3b(0x182),_0x113b3b(0x14b),_0x113b3b(0x155),_0x113b3b(0x10b),_0x113b3b(0x13d)][_0x113b3b(0xfc)](_0x320137[_0x113b3b(0x159)]()));for(const [_0x299420,_0x349c79]of Object['entries'](_0x2984fa)){if(_0x299420===_0x3465cd)continue;if(_0x349c79&&_0x349c79[_0x113b3b(0x160)]){const _0x3466e4=_0x299420[_0x113b3b(0x159)](),_0x56c6b8=(_0x349c79[_0x113b3b(0x160)][_0x113b3b(0x1a8)]||'')[_0x113b3b(0x159)](),_0x5ead93=(_0x349c79['common'][_0x113b3b(0x145)]||'')[_0x113b3b(0x159)]();let _0x403db1=![];if(_0x4a329f==='setpoint'&&_0x349c79[_0x113b3b(0x160)]['write']===!![])_0x403db1=_0x3466e4[_0x113b3b(0xfc)]('set')||_0x3466e4['includes'](_0x113b3b(0x158))||_0x3466e4[_0x113b3b(0xfc)](_0x113b3b(0x170))||_0x56c6b8[_0x113b3b(0xfc)](_0x113b3b(0xfd))||_0x56c6b8['includes'](_0x113b3b(0x14c));else _0x4a329f===_0x113b3b(0xe1)&&(_0x403db1=_0x3466e4[_0x113b3b(0xfc)]('level')||_0x3466e4[_0x113b3b(0xfc)]('valve')||_0x3466e4['includes'](_0x113b3b(0xef))||_0x3466e4[_0x113b3b(0xfc)](_0x113b3b(0x193))||_0x56c6b8['includes'](_0x113b3b(0x165))||_0x56c6b8[_0x113b3b(0xfc)]('value.valve')||_0x5ead93['includes']('%'));if(_0x403db1){const _0x312870=_0x299420[_0x113b3b(0x179)](/[._]+/)['map'](_0x4c7dc4=>_0x4c7dc4['toLowerCase']());let _0x10fec2=0x0;_0x3ba49f[_0x113b3b(0x17f)](_0x4e0f52=>{const _0x36de04=_0x113b3b;if(_0x312870['includes'](_0x4e0f52[_0x36de04(0x159)]()))_0x10fec2++;}),_0x4ae344[_0x113b3b(0x172)]({'id':_0x299420,'score':_0x10fec2});}}}if(_0x4ae344['length']>0x0){_0x4ae344[_0x113b3b(0x11a)]((_0x4857d4,_0x2fab57)=>_0x2fab57['score']-_0x4857d4[_0x113b3b(0x12b)]);if(_0x4ae344[0x0][_0x113b3b(0x12b)]>0x0)return _0x4ae344[0x0]['id'];}}}catch(_0x18bd1c){}return null;}function a1_0x5c75(_0x2d5096,_0x480ed8){const _0x1c7144=a1_0x5cdc();return a1_0x5c75=function(_0x2ecd1e,_0x410893){_0x2ecd1e=_0x2ecd1e-0xe1;let _0x5cdc02=_0x1c7144[_0x2ecd1e];return _0x5cdc02;},a1_0x5c75(_0x2d5096,_0x480ed8);}async function scanThermostats(_0x42372f){const _0x53c0b7=a1_0x5c75,_0x4de04b=_0x42372f[_0x53c0b7(0xf3)][_0x53c0b7(0x118)]||[],_0x100cd1=[],_0x12febb=_0x4de04b['filter'](_0x2312b4=>_0x2312b4['id']&&_0x2312b4['id'][_0x53c0b7(0xfc)](_0x53c0b7(0x182))||_0x2312b4['type']&&[_0x53c0b7(0x182),'thermostat','sensor'][_0x53c0b7(0xfc)](_0x2312b4[_0x53c0b7(0x1a0)])||_0x2312b4[_0x53c0b7(0x14a)]&&_0x2312b4['name'][_0x53c0b7(0x159)]()[_0x53c0b7(0xfc)](_0x53c0b7(0x10a)));for(const _0x57eebb of _0x12febb){const _0x132e48=await findRelatedId(_0x42372f,_0x57eebb['id'],'setpoint'),_0x4ef267=await findRelatedId(_0x42372f,_0x57eebb['id'],'valve');let _0x7e86d7='Nicht\x20gefunden',_0x39002e=![],_0x266cae=_0x42372f[_0x53c0b7(0xf3)]['thermostatMapping']||{};if(typeof _0x266cae===_0x53c0b7(0xf5))try{_0x266cae=JSON[_0x53c0b7(0x181)](_0x266cae);}catch(_0x1152c7){}let _0x21755a=_0x42372f[_0x53c0b7(0xf3)]['valveMapping']||{};if(typeof _0x21755a==='string')try{_0x21755a=JSON['parse'](_0x21755a);}catch(_0x209acd){}if(_0x266cae[_0x57eebb['id']]&&_0x266cae[_0x57eebb['id']]===_0x132e48||_0x21755a[_0x57eebb['id']]&&_0x21755a[_0x57eebb['id']]===_0x4ef267)_0x7e86d7=_0x53c0b7(0x14f),_0x39002e=!![];else(_0x132e48||_0x4ef267)&&(_0x7e86d7=_0x53c0b7(0x178));_0x100cd1[_0x53c0b7(0x172)]({'room':_0x57eebb['location']||_0x53c0b7(0x196),'sensorId':_0x57eebb['id'],'setpointId':_0x132e48||'-','valveId':_0x4ef267||'-','source':_0x7e86d7,'isManual':_0x39002e,'status':_0x132e48&&_0x4ef267?_0x53c0b7(0x103):_0x132e48?'OK':_0x53c0b7(0xe3)});}return _0x100cd1[_0x53c0b7(0x11a)]((_0x4adee0,_0x60f0a6)=>_0x4adee0[_0x53c0b7(0x190)][_0x53c0b7(0x173)](_0x60f0a6['room']));}async function updateSchedulePreview(_0x47f8a9){const _0x10dee3=a1_0x5c75;if(!_0x47f8a9[_0x10dee3(0xf3)][_0x10dee3(0x123)]||!_0x47f8a9[_0x10dee3(0xf3)]['calendarInstance'])return;let _0x59ba56={};try{const _0x2109ce=await _0x47f8a9['getStateAsync'](_0x10dee3(0x166));if(_0x2109ce&&_0x2109ce['val'])_0x59ba56=JSON[_0x10dee3(0x181)](_0x2109ce[_0x10dee3(0x110)]);}catch(_0x5ca968){}const _0x3f13b5=[],_0x31560f=Date[_0x10dee3(0xf0)](),_0x11b606=0x30*0x3c*0x3c*0x3e8;try{const _0x5513bd=await _0x47f8a9['getForeignStateAsync'](_0x47f8a9[_0x10dee3(0xf3)]['calendarInstance']+'.data.table');if(!_0x5513bd||!_0x5513bd[_0x10dee3(0x110)])return;const _0x32bd9b=JSON['parse'](_0x5513bd['val']),_0x562c8a=_0x47f8a9[_0x10dee3(0xf3)][_0x10dee3(0x12f)]||[],_0x20c44a=_0x47f8a9['config'][_0x10dee3(0x118)]||[],_0x418d63=new Set();_0x20c44a[_0x10dee3(0x17f)](_0x5788cb=>{const _0x47f5e7=_0x10dee3;if(_0x5788cb[_0x47f5e7(0xf9)])_0x418d63['add'](_0x5788cb[_0x47f5e7(0xf9)]);});for(const _0x557c89 of _0x32bd9b){if(_0x557c89['_calName']&&_0x562c8a[_0x10dee3(0x17e)]>0x0&&!_0x562c8a[_0x10dee3(0xfc)](_0x557c89['_calName']))continue;const _0x2daaa7=_0x557c89[_0x10dee3(0xed)]||_0x557c89[_0x10dee3(0x16f)]||_0x557c89[_0x10dee3(0x194)];if(!_0x2daaa7)continue;const _0x54dea9=new Date(_0x2daaa7),_0x4e016c=_0x54dea9[_0x10dee3(0x18a)]();if(isNaN(_0x4e016c))continue;if(_0x4e016c<_0x31560f)continue;if(_0x4e016c>_0x31560f+_0x11b606)continue;const _0x41b7df=(_0x557c89[_0x10dee3(0x131)]||_0x557c89[_0x10dee3(0x148)]||'')[_0x10dee3(0x159)]();let _0x4effc0=![],_0x1ca954=[],_0x501ec6=_0x557c89['event']||_0x557c89[_0x10dee3(0x148)]||'Unbekannt';if(_0x41b7df[_0x10dee3(0xfc)](_0x10dee3(0x183))||_0x41b7df['includes']('rÃ¼ckkehr')||_0x41b7df[_0x10dee3(0xfc)]('ankunft'))_0x4effc0=!![],_0x1ca954=Array[_0x10dee3(0x15c)](_0x418d63);else for(const _0x5f1e61 of _0x418d63){if(_0x41b7df['includes'](_0x5f1e61[_0x10dee3(0x159)]()))_0x1ca954[_0x10dee3(0x172)](_0x5f1e61);}_0x1ca954[_0x10dee3(0x17e)]>0x0&&_0x1ca954[_0x10dee3(0x17f)](_0x1547d3=>{const _0x3ba2db=_0x10dee3;let _0x24af21=0x3c;if(_0x4effc0){let _0x225581=0x0;Object[_0x3ba2db(0x198)](_0x59ba56)[_0x3ba2db(0x17f)](_0x224958=>{if(_0x224958>_0x225581)_0x225581=_0x224958;}),_0x24af21=_0x225581>0x0?_0x225581:0x78;}else _0x24af21=getWarmupRobust(_0x59ba56,_0x1547d3);const _0x527942=new Date(_0x4e016c-_0x24af21*0xea60);_0x3f13b5[_0x3ba2db(0x172)]({'eventTime':_0x4e016c,'triggerTime':_0x527942[_0x3ba2db(0x18a)](),'room':_0x1547d3,'minutes':_0x24af21,'reason':_0x501ec6,'isGlobal':_0x4effc0});});}}catch(_0x3925dd){}_0x3f13b5['sort']((_0x3e19de,_0x471254)=>_0x3e19de['triggerTime']-_0x471254[_0x10dee3(0x17b)]);const _0x45e13c=_0x3f13b5['slice'](0x0,0x5);await _0x47f8a9[_0x10dee3(0x115)](_0x10dee3(0x10e),{'val':JSON[_0x10dee3(0x137)](_0x45e13c),'ack':!![]});}async function monitorEnforcements(_0x5146ef){const _0x2a9b00=a1_0x5c75;try{const _0x2651ae=_0x2a9b00(0xe7),_0x49eff0=await _0x5146ef['getStateAsync'](_0x2651ae);if(!_0x49eff0||!_0x49eff0[_0x2a9b00(0x110)])return;let _0x4aa374=[];try{_0x4aa374=JSON['parse'](_0x49eff0['val']);}catch(_0x4af965){return;}if(!Array['isArray'](_0x4aa374)||_0x4aa374[_0x2a9b00(0x17e)]===0x0)return;const _0x22a557=Date[_0x2a9b00(0xf0)](),_0x52b43e=_0x5146ef[_0x2a9b00(0xf3)][_0x2a9b00(0x118)]||[];let _0x12d108=![];for(let _0x3d0530=_0x4aa374[_0x2a9b00(0x17e)]-0x1;_0x3d0530>=0x0;_0x3d0530--){const _0x4e5f23=_0x4aa374[_0x3d0530];if(_0x22a557>=_0x4e5f23[_0x2a9b00(0x168)]){_0x5146ef[_0x2a9b00(0x156)][_0x2a9b00(0x151)](_0x2a9b00(0x19c)+_0x4e5f23[_0x2a9b00(0x190)]+_0x2a9b00(0x150)),_0x4aa374[_0x2a9b00(0x134)](_0x3d0530,0x1),_0x12d108=!![];continue;}const _0xa797d=_0x52b43e[_0x2a9b00(0x109)](_0x52ca98=>normalize(_0x52ca98[_0x2a9b00(0xf9)])===normalize(_0x4e5f23[_0x2a9b00(0x190)])&&(_0x52ca98[_0x2a9b00(0x1a0)]===_0x2a9b00(0x182)||_0x52ca98[_0x2a9b00(0x1a0)]===_0x2a9b00(0x100)));if(_0xa797d){const _0x47983d=await findRelatedId(_0x5146ef,_0xa797d['id'],_0x2a9b00(0x128));if(_0x47983d){const _0x58632b=await _0x5146ef[_0x2a9b00(0x14d)](_0x47983d);_0x58632b&&typeof _0x58632b[_0x2a9b00(0x110)]==='number'&&(_0x58632b['val']<0xf&&(_0x5146ef[_0x2a9b00(0x156)][_0x2a9b00(0x11f)](_0x2a9b00(0x1a3)+_0x4e5f23[_0x2a9b00(0x190)]+_0x2a9b00(0x161)+_0x58632b[_0x2a9b00(0x110)]+_0x2a9b00(0x1a2)+_0x4e5f23[_0x2a9b00(0x170)]+_0x2a9b00(0xea)),await _0x5146ef[_0x2a9b00(0x133)](_0x47983d,_0x4e5f23['target']),await logAutomationAction(_0x5146ef,_0x2a9b00(0x192)+_0x4e5f23[_0x2a9b00(0x190)]+':\x20'+_0x58632b[_0x2a9b00(0x110)]+_0x2a9b00(0x12c)+_0x4e5f23[_0x2a9b00(0x170)]+_0x2a9b00(0x195))));}}}_0x12d108&&await _0x5146ef[_0x2a9b00(0x115)](_0x2651ae,{'val':JSON[_0x2a9b00(0x137)](_0x4aa374),'ack':!![]});}catch(_0x224691){_0x5146ef[_0x2a9b00(0x156)][_0x2a9b00(0x180)](_0x2a9b00(0x127)+_0x224691[_0x2a9b00(0x12e)]);}}async function checkCalendarTriggers(_0x51a2f2){const _0x4f31ca=a1_0x5c75;if(!_0x51a2f2[_0x4f31ca(0xf3)][_0x4f31ca(0x123)]||!_0x51a2f2['config'][_0x4f31ca(0x101)])return;await updateSchedulePreview(_0x51a2f2);let _0x377415={},_0x3f4b9c={};try{const _0x584a0b=await _0x51a2f2[_0x4f31ca(0x111)]('analysis.energy.warmupTimes');if(_0x584a0b&&_0x584a0b[_0x4f31ca(0x110)])_0x377415=JSON['parse'](_0x584a0b[_0x4f31ca(0x110)]);const _0x4f258e=await _0x51a2f2['getStateAsync']('analysis.energy.warmupSources');if(_0x4f258e&&_0x4f258e[_0x4f31ca(0x110)])_0x3f4b9c=JSON[_0x4f31ca(0x181)](_0x4f258e[_0x4f31ca(0x110)]);}catch(_0x5542ce){}let _0x50343c={'default':0x15};try{const _0x2564f5=await _0x51a2f2[_0x4f31ca(0x111)](_0x4f31ca(0x149));if(_0x2564f5&&_0x2564f5[_0x4f31ca(0x110)])_0x50343c=JSON[_0x4f31ca(0x181)](_0x2564f5[_0x4f31ca(0x110)]);}catch(_0xc18292){}let _0x5a4aa5=[];try{const _0x1f62f8=await _0x51a2f2[_0x4f31ca(0x111)](_0x4f31ca(0xe7));if(_0x1f62f8&&_0x1f62f8['val'])_0x5a4aa5=JSON[_0x4f31ca(0x181)](_0x1f62f8['val']);}catch(_0xd085f8){}try{const _0x5aa849=await _0x51a2f2[_0x4f31ca(0x14d)](_0x51a2f2['config'][_0x4f31ca(0x101)]+_0x4f31ca(0x102));if(!_0x5aa849||!_0x5aa849['val'])return;const _0x42e9da=JSON[_0x4f31ca(0x181)](_0x5aa849[_0x4f31ca(0x110)]),_0x43523e=Date[_0x4f31ca(0xf0)](),_0x21f124=_0x51a2f2['config'][_0x4f31ca(0x118)]||[],_0x5a1f64=_0x51a2f2[_0x4f31ca(0xf3)][_0x4f31ca(0x12f)]||[];let _0x285ac7=![];for(const _0x52a26c of _0x42e9da){if(_0x52a26c['_calName']&&_0x5a1f64[_0x4f31ca(0x17e)]>0x0&&!_0x5a1f64[_0x4f31ca(0xfc)](_0x52a26c[_0x4f31ca(0x143)]))continue;const _0x30f9ca=_0x52a26c[_0x4f31ca(0xed)]||_0x52a26c[_0x4f31ca(0x16f)]||_0x52a26c['date'];if(!_0x30f9ca)continue;const _0x1b741d=new Date(_0x30f9ca);if(isNaN(_0x1b741d[_0x4f31ca(0x18a)]()))continue;const _0x356029=(_0x52a26c[_0x4f31ca(0x131)]||_0x52a26c['summary']||'')[_0x4f31ca(0x159)]();if(_0x356029[_0x4f31ca(0xfc)]('urlaub\x20ende')||_0x356029[_0x4f31ca(0xfc)](_0x4f31ca(0xe6))||_0x356029[_0x4f31ca(0xfc)](_0x4f31ca(0x14e))){let _0x14c2a4=0x0;Object[_0x4f31ca(0x198)](_0x377415)['forEach'](_0x40002=>{if(_0x40002>_0x14c2a4)_0x14c2a4=_0x40002;});if(_0x14c2a4===0x0)_0x14c2a4=0x78;const _0x40ff2f=_0x1b741d['getTime']()-_0x14c2a4*0xea60;_0x43523e>=_0x40ff2f&&_0x43523e<_0x1b741d[_0x4f31ca(0x18a)]()&&(_0x51a2f2['currentSystemMode']!==_0x4f31ca(0x11b)&&(_0x51a2f2[_0x4f31ca(0x156)][_0x4f31ca(0x151)]('ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20'+_0x14c2a4+'\x20min).'),await _0x51a2f2[_0x4f31ca(0x115)]('system.mode',{'val':_0x4f31ca(0x11b),'ack':![]})));}for(const _0x66cd28 of _0x21f124){if(_0x66cd28['location']){const _0x583ef6=_0x66cd28[_0x4f31ca(0xf9)][_0x4f31ca(0x159)](),_0x585f7b=(_0x66cd28[_0x4f31ca(0x14a)]||'')[_0x4f31ca(0x159)]();let _0xe029ab=_0x356029['includes'](_0x583ef6);!_0xe029ab&&_0x585f7b[_0x4f31ca(0x17e)]>0x3&&_0x356029[_0x4f31ca(0xfc)](_0x585f7b)&&(_0xe029ab=!![]);if(_0xe029ab){const _0xaaa3be=getWarmupRobust(_0x377415,_0x66cd28['location']),_0x4a7dc6=_0x3f4b9c[_0x66cd28[_0x4f31ca(0xf9)]]||_0x4f31ca(0x16a),_0x49d367=_0x1b741d[_0x4f31ca(0x18a)]()-_0xaaa3be*0xea60;if(_0x43523e>=_0x49d367&&_0x43523e<_0x1b741d[_0x4f31ca(0x18a)]()){const _0x47300d=lastActions['cal_'+_0x66cd28[_0x4f31ca(0xf9)]];if(_0x47300d&&_0x43523e-_0x47300d<CAL_COOLDOWN_MS)continue;const _0xe2d947=await findRelatedId(_0x51a2f2,_0x66cd28['id'],_0x4f31ca(0x128));if(_0xe2d947){let _0x59422a=_0x50343c[_0x66cd28[_0x4f31ca(0xf9)]];if(_0x59422a===undefined)_0x59422a=_0x50343c[_0x4f31ca(0xe2)];if(_0x59422a===undefined)_0x59422a=0x15;const _0x30538b=await _0x51a2f2[_0x4f31ca(0x14d)](_0xe2d947);if(_0x30538b&&typeof _0x30538b[_0x4f31ca(0x110)]===_0x4f31ca(0xf2)&&_0x30538b['val']<_0x59422a-0.5){_0x51a2f2[_0x4f31ca(0x156)][_0x4f31ca(0x151)](_0x4f31ca(0xfb)+_0x4a7dc6+_0x4f31ca(0x106)+_0x66cd28['location']+'\x27\x20(Match:\x20'+_0x356029+')\x20aktiv.\x20Heize\x20auf\x20'+_0x59422a+_0x4f31ca(0x16d)+_0xaaa3be+_0x4f31ca(0x13a)),await _0x51a2f2[_0x4f31ca(0x133)](_0xe2d947,_0x59422a),await logAutomationAction(_0x51a2f2,_0x4f31ca(0x105)+_0x66cd28[_0x4f31ca(0xf9)]+_0x4f31ca(0x141)+_0x59422a+_0x4f31ca(0x185)+_0x4a7dc6+')'),lastActions['cal_'+_0x66cd28[_0x4f31ca(0xf9)]]=_0x43523e;const _0x194446=_0x5a4aa5[_0x4f31ca(0x10f)](_0x87807=>_0x87807[_0x4f31ca(0x190)]===_0x66cd28[_0x4f31ca(0xf9)]);if(_0x194446!==-0x1)_0x5a4aa5[_0x4f31ca(0x134)](_0x194446,0x1);_0x5a4aa5['push']({'room':_0x66cd28['location'],'target':_0x59422a,'until':_0x1b741d[_0x4f31ca(0x18a)]()}),_0x285ac7=!![];}}}}}}}_0x285ac7&&await _0x51a2f2[_0x4f31ca(0x115)](_0x4f31ca(0xe7),{'val':JSON[_0x4f31ca(0x137)](_0x5a4aa5),'ack':!![]});}catch(_0x382e3a){_0x51a2f2[_0x4f31ca(0x156)][_0x4f31ca(0x11f)](_0x4f31ca(0x164)+_0x382e3a[_0x4f31ca(0x12e)]);}}async function manageMpcIntervention(_0x35692e,_0x476f4d,_0x21a34b){const _0x2f8094=a1_0x5c75;try{const _0x5d30b7=_0x2f8094(0xe4),_0x1c4ce6=await _0x35692e[_0x2f8094(0x111)](_0x5d30b7);let _0x102dbe=[];if(_0x1c4ce6&&_0x1c4ce6[_0x2f8094(0x110)])try{_0x102dbe=JSON[_0x2f8094(0x181)](_0x1c4ce6[_0x2f8094(0x110)]);}catch(_0x4731db){}const _0x48f31d=_0x102dbe[_0x2f8094(0x144)](_0x476f4d);if(_0x21a34b===_0x2f8094(0xfa))_0x48f31d===-0x1&&(_0x102dbe['push'](_0x476f4d),await _0x35692e[_0x2f8094(0x115)](_0x5d30b7,{'val':JSON[_0x2f8094(0x137)](_0x102dbe),'ack':!![]}));else _0x21a34b===_0x2f8094(0x197)&&(_0x48f31d!==-0x1&&(_0x102dbe[_0x2f8094(0x134)](_0x48f31d,0x1),await _0x35692e[_0x2f8094(0x115)](_0x5d30b7,{'val':JSON['stringify'](_0x102dbe),'ack':!![]})));}catch(_0x43b55b){}}async function cleanupGhostInterventions(_0x2535fe){const _0x4a1d43=a1_0x5c75;try{const _0x1e70f9=_0x4a1d43(0xe4),_0x4f42b4=await _0x2535fe[_0x4a1d43(0x111)](_0x1e70f9);if(!_0x4f42b4||!_0x4f42b4[_0x4a1d43(0x110)])return;const _0x16f4d3=JSON[_0x4a1d43(0x181)](_0x4f42b4['val']);if(!Array['isArray'](_0x16f4d3)||_0x16f4d3['length']===0x0)return;let _0x1f137d={'default':0x15};try{const _0x442c69=await _0x2535fe[_0x4a1d43(0x111)]('analysis.energy.warmupTargets');if(_0x442c69&&_0x442c69[_0x4a1d43(0x110)])_0x1f137d=JSON['parse'](_0x442c69[_0x4a1d43(0x110)]);}catch(_0x57e7fb){}let _0x32765e=[];try{const _0x38291c=await _0x2535fe['getStateAsync']('analysis.energy.ventilationAlerts');if(_0x38291c&&_0x38291c[_0x4a1d43(0x110)])_0x32765e=JSON[_0x4a1d43(0x181)](_0x38291c[_0x4a1d43(0x110)]);}catch(_0x58217e){}let _0x37d512={},_0x562aed=![];try{const _0xb9abfb=await _0x2535fe[_0x4a1d43(0x111)]('analysis.energy.rlPenalties');if(_0xb9abfb&&_0xb9abfb[_0x4a1d43(0x110)])_0x37d512=JSON[_0x4a1d43(0x181)](_0xb9abfb[_0x4a1d43(0x110)]);}catch(_0x511d29){}if(_0x37d512['_meta']){const _0x2ed8e0=Date[_0x4a1d43(0xf0)]();for(const [_0x47115f,_0xadd653]of Object[_0x4a1d43(0x157)](_0x37d512[_0x4a1d43(0x17a)])){_0x2ed8e0-_0xadd653>PENALTY_TTL&&(delete _0x37d512[_0x47115f],delete _0x37d512['_meta'][_0x47115f],_0x562aed=!![],_0x2535fe[_0x4a1d43(0x156)][_0x4a1d43(0x151)](_0x4a1d43(0x15d)+_0x47115f+_0x4a1d43(0x1a7)));}}const _0x428f92=_0x2535fe['config'][_0x4a1d43(0x118)]||[];let _0x4bcc76=![];for(let _0x4deb94=_0x16f4d3[_0x4a1d43(0x17e)]-0x1;_0x4deb94>=0x0;_0x4deb94--){const _0x5ddc70=_0x16f4d3[_0x4deb94],_0x48862f=_0x428f92[_0x4a1d43(0x109)](_0x11884b=>normalize(_0x11884b[_0x4a1d43(0xf9)])===normalize(_0x5ddc70)&&(_0x11884b[_0x4a1d43(0x1a0)]===_0x4a1d43(0x182)||_0x11884b[_0x4a1d43(0x1a0)]===_0x4a1d43(0x100)));if(!_0x48862f){_0x2535fe[_0x4a1d43(0x156)][_0x4a1d43(0x11f)]('ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27'+_0x5ddc70+_0x4a1d43(0x16e)),_0x16f4d3[_0x4a1d43(0x134)](_0x4deb94,0x1),_0x4bcc76=!![];continue;}if(_0x48862f){const _0x31e8c5=await findRelatedId(_0x2535fe,_0x48862f['id'],_0x4a1d43(0x128)),_0x1a461e=await _0x2535fe['getForeignStateAsync'](_0x48862f['id']);if(_0x31e8c5){const _0xcb0721=await _0x2535fe[_0x4a1d43(0x14d)](_0x31e8c5);if(_0xcb0721&&typeof _0xcb0721['val']===_0x4a1d43(0xf2)){let _0x1ccc45=![],_0x201eac='';Math[_0x4a1d43(0x15b)](_0xcb0721[_0x4a1d43(0x110)]-ECO_TEMP)>0.5&&(_0x1ccc45=!![],_0x201eac=_0x4a1d43(0x191));if(!_0x1ccc45&&_0x1a461e&&typeof _0x1a461e[_0x4a1d43(0x110)]===_0x4a1d43(0xf2)){const _0x576a0b=_0x1f137d[_0x5ddc70]||_0x1f137d['default']||0x15;_0x1a461e[_0x4a1d43(0x110)]<_0x576a0b+0.2&&(_0x1ccc45=!![],_0x201eac=_0x4a1d43(0x1a6));}if(_0x1ccc45){if(_0x201eac===_0x4a1d43(0x191)){_0x2535fe[_0x4a1d43(0x156)][_0x4a1d43(0x151)](_0x4a1d43(0x112)+_0x5ddc70+_0x4a1d43(0x184)+_0xcb0721[_0x4a1d43(0x110)]+'Â°C\x20(nicht\x20'+ECO_TEMP+_0x4a1d43(0x16c));const _0x4b45a8=lastActions[_0x4a1d43(0x15f)+_0x5ddc70],_0x2b1101=_0x4b45a8&&Date[_0x4a1d43(0xf0)]()-_0x4b45a8<0x2*0x3c*0x3e8;if(!_0x2b1101&&_0xcb0721['val']>ECO_TEMP+0.5){_0x2535fe[_0x4a1d43(0x153)]&&(_0x2535fe[_0x4a1d43(0x156)]['info'](_0x4a1d43(0x119)+_0x5ddc70+_0x4a1d43(0xe9)),_0x2535fe[_0x4a1d43(0x153)](_0x4a1d43(0x17c),{'room':_0x5ddc70}));const _0x1ff412=_0x5ddc70+'_'+new Date()[_0x4a1d43(0xec)]();if(!_0x37d512[_0x1ff412]){_0x37d512[_0x1ff412]=0x1;if(!_0x37d512[_0x4a1d43(0x17a)])_0x37d512['_meta']={};_0x37d512[_0x4a1d43(0x17a)][_0x1ff412]=Date[_0x4a1d43(0xf0)](),_0x562aed=!![];}}else _0x2b1101&&_0x2535fe[_0x4a1d43(0x156)][_0x4a1d43(0x151)](_0x4a1d43(0x18f)+_0x5ddc70+_0x4a1d43(0xee));}else{if(_0x201eac===_0x4a1d43(0x1a6)){let _0x41ca32=![];if(_0x32765e[_0x4a1d43(0x109)](_0x503b72=>_0x503b72['room']===_0x5ddc70))_0x41ca32=!![];const _0x5763f0=_0x428f92[_0x4a1d43(0x16b)](_0x3dd8cb=>normalize(_0x3dd8cb['location'])===normalize(_0x5ddc70)&&(_0x3dd8cb[_0x4a1d43(0x1a0)]===_0x4a1d43(0x189)||_0x3dd8cb[_0x4a1d43(0x1a0)]===_0x4a1d43(0x155)||_0x3dd8cb[_0x4a1d43(0x1a0)]===_0x4a1d43(0x125)));for(const _0x35c11f of _0x5763f0){try{const _0x5ad305=await _0x2535fe['getForeignStateAsync'](_0x35c11f['id']);if(_0x5ad305&&(_0x5ad305[_0x4a1d43(0x110)]===!![]||_0x5ad305['val']===0x1||String(_0x5ad305['val'])[_0x4a1d43(0x159)]()===_0x4a1d43(0x13c)))_0x41ca32=!![];}catch(_0x4ef921){}}if(_0x41ca32)_0x2535fe['log'][_0x4a1d43(0x151)](_0x4a1d43(0x169)+_0x5ddc70+_0x4a1d43(0x139));else{const _0x4ac82a=_0x1f137d[_0x5ddc70]||_0x1f137d[_0x4a1d43(0xe2)]||0x15;_0x2535fe['log'][_0x4a1d43(0x151)](_0x4a1d43(0x18e)+_0x5ddc70+_0x4a1d43(0x114)+_0x1a461e[_0x4a1d43(0x110)]+_0x4a1d43(0xff)+(_0x4ac82a+0.2)+_0x4a1d43(0x136)),await _0x2535fe['setForeignStateAsync'](_0x31e8c5,_0x4ac82a),await logAutomationAction(_0x2535fe,_0x4a1d43(0x140)+_0x5ddc70+_0x4a1d43(0x12a)+_0x4ac82a+'Â°C'),lastActions[_0x4a1d43(0x13f)+_0x5ddc70]=Date['now']();}}}_0x16f4d3['splice'](_0x4deb94,0x1),_0x4bcc76=!![];}}}}}_0x4bcc76&&await _0x2535fe[_0x4a1d43(0x115)](_0x1e70f9,{'val':JSON['stringify'](_0x16f4d3),'ack':!![]}),_0x562aed&&await _0x2535fe[_0x4a1d43(0x115)]('analysis.energy.rlPenalties',{'val':JSON[_0x4a1d43(0x137)](_0x37d512),'ack':!![]});}catch(_0x336d6b){}}async function applyEnergySavings(_0x5d0281,_0x162f78){const _0x17bac2=a1_0x5c75;await cleanupGhostInterventions(_0x5d0281);if(!_0x162f78||_0x162f78[_0x17bac2(0x17e)]===0x0)return;const _0x4e43a5=_0x5d0281['config']['devices']||[],_0x177a76=Date['now']();for(const _0xa9be83 of _0x162f78){const _0x4fc1ca=_0xa9be83[_0x17bac2(0x190)],_0x59d78c=_0xa9be83['minutes_safe'],_0x1128ea=_0xa9be83[_0x17bac2(0x170)]||0x15;if(lastActions['rescue_'+_0x4fc1ca]&&_0x177a76-lastActions[_0x17bac2(0x13f)+_0x4fc1ca]<RESCUE_LOCK_MS)continue;const _0x1ee467=_0x4e43a5[_0x17bac2(0x109)](_0x1e0c92=>normalize(_0x1e0c92['location'])===normalize(_0x4fc1ca)&&(_0x1e0c92[_0x17bac2(0x1a0)]===_0x17bac2(0x182)||_0x1e0c92[_0x17bac2(0x1a0)]===_0x17bac2(0x100)));if(!_0x1ee467)continue;const _0x23de74=await findRelatedId(_0x5d0281,_0x1ee467['id'],_0x17bac2(0x128));if(_0x23de74){if(lastActions[_0x17bac2(0x129)+_0x4fc1ca]&&_0x177a76-lastActions['mpc_'+_0x4fc1ca]<0x1e*0x3c*0x3e8)continue;const _0x41d9d0=await _0x5d0281[_0x17bac2(0x14d)](_0x23de74);if(_0x41d9d0&&typeof _0x41d9d0['val']===_0x17bac2(0xf2)){const _0x25507a=_0x41d9d0[_0x17bac2(0x110)];_0x25507a!==ECO_TEMP&&await manageMpcIntervention(_0x5d0281,_0x4fc1ca,'remove');if(_0x59d78c>0x1e)_0x25507a>ECO_TEMP+0.5&&(_0x5d0281[_0x17bac2(0x156)][_0x17bac2(0x151)](_0x17bac2(0x177)+_0x4fc1ca+_0x17bac2(0x161)+ECO_TEMP+'Â°C!\x20(Puffer:\x20'+_0x59d78c+_0x17bac2(0x18c)),await _0x5d0281[_0x17bac2(0x133)](_0x23de74,ECO_TEMP),await manageMpcIntervention(_0x5d0281,_0x4fc1ca,_0x17bac2(0xfa)),lastActions[_0x17bac2(0x129)+_0x4fc1ca]=_0x177a76,await logAutomationAction(_0x5d0281,_0x17bac2(0x15a)+_0x4fc1ca+_0x17bac2(0xe8)+ECO_TEMP+'Â°C'));else _0x59d78c<=0xf&&(_0x25507a<_0x1128ea&&(_0x5d0281[_0x17bac2(0x156)][_0x17bac2(0x151)]('ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20'+_0x4fc1ca+_0x17bac2(0x19b)+_0x1128ea+_0x17bac2(0x19d)),await _0x5d0281[_0x17bac2(0x133)](_0x23de74,_0x1128ea),await manageMpcIntervention(_0x5d0281,_0x4fc1ca,'remove'),lastActions[_0x17bac2(0x129)+_0x4fc1ca]=_0x177a76,await logAutomationAction(_0x5d0281,_0x17bac2(0x15a)+_0x4fc1ca+':\x20Aufheizen\x20auf\x20'+_0x1128ea+'Â°C')));}}else _0x5d0281[_0x17bac2(0x156)][_0x17bac2(0x11f)](_0x17bac2(0x108)+_0x4fc1ca+_0x17bac2(0x18d));}}module[a1_0x28d294(0x167)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};