const a1_0x5e0182=a1_0x4198;(function(_0x28fded,_0xbd8cce){const _0x43b26e=a1_0x4198,_0x1f9059=_0x28fded();while(!![]){try{const _0x1c9b3f=parseInt(_0x43b26e(0x262))/0x1+-parseInt(_0x43b26e(0x1c8))/0x2+parseInt(_0x43b26e(0x24a))/0x3*(parseInt(_0x43b26e(0x25c))/0x4)+-parseInt(_0x43b26e(0x210))/0x5+parseInt(_0x43b26e(0x1d3))/0x6*(-parseInt(_0x43b26e(0x238))/0x7)+-parseInt(_0x43b26e(0x23a))/0x8+-parseInt(_0x43b26e(0x1f1))/0x9*(-parseInt(_0x43b26e(0x1e0))/0xa);if(_0x1c9b3f===_0xbd8cce)break;else _0x1f9059['push'](_0x1f9059['shift']());}catch(_0xd78321){_0x1f9059['push'](_0x1f9059['shift']());}}}(a1_0xcda0,0xa7d05));const a1_0x166f65=(function(){let _0xc979ce=!![];return function(_0x46cb98,_0x47fb5b){const _0x4ef923=_0xc979ce?function(){if(_0x47fb5b){const _0x3c4fcc=_0x47fb5b['apply'](_0x46cb98,arguments);return _0x47fb5b=null,_0x3c4fcc;}}:function(){};return _0xc979ce=![],_0x4ef923;};}()),a1_0x2c90f5=a1_0x166f65(this,function(){const _0x16b8ae=a1_0x4198;return a1_0x2c90f5[_0x16b8ae(0x20e)]()[_0x16b8ae(0x20d)](_0x16b8ae(0x1d9))[_0x16b8ae(0x20e)]()[_0x16b8ae(0x1eb)](a1_0x2c90f5)[_0x16b8ae(0x20d)]('(((.+)+)+)+$');});a1_0x2c90f5();'use strict';const aiAgent=require(a1_0x5e0182(0x261)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0xe52c6){const _0x9e23f3=a1_0x5e0182;if(!_0xe52c6)return'';return _0xe52c6[_0x9e23f3(0x232)]()[_0x9e23f3(0x1d6)](/\s+/g,'')[_0x9e23f3(0x267)]();}async function logAutomationAction(_0x5bb928,_0x402a55){const _0x4abcd8=a1_0x5e0182;await _0x5bb928[_0x4abcd8(0x1dd)]('analysis.automation.lastAction',{'val':_0x402a55,'ack':!![]});try{const _0x3a7fa0=_0x4abcd8(0x1e7),_0x2465b9=await _0x5bb928[_0x4abcd8(0x202)](_0x3a7fa0);let _0x444f9c=[];if(_0x2465b9&&_0x2465b9[_0x4abcd8(0x218)])try{_0x444f9c=JSON['parse'](_0x2465b9[_0x4abcd8(0x218)]);}catch(_0x29f2b8){}_0x444f9c['unshift']({'ts':Date[_0x4abcd8(0x1b8)](),'msg':_0x402a55});if(_0x444f9c[_0x4abcd8(0x21d)]>0x32)_0x444f9c=_0x444f9c['slice'](0x0,0x32);await _0x5bb928[_0x4abcd8(0x1dd)](_0x3a7fa0,{'val':JSON[_0x4abcd8(0x1f8)](_0x444f9c),'ack':!![]});}catch(_0x2c8e54){}}async function handlePrediction(_0x568dcd,_0x42ffd8,_0xc6559a){const _0x152cf2=a1_0x5e0182;if(!_0x42ffd8||_0x42ffd8==='Unknown')return;let _0x3ba176='off',_0x214930=0.6;try{const _0x2781ba=await _0x568dcd['getStateAsync'](_0x152cf2(0x269));if(_0x2781ba&&_0x2781ba[_0x152cf2(0x218)])_0x3ba176=_0x2781ba[_0x152cf2(0x218)];const _0x434788=await _0x568dcd[_0x152cf2(0x202)](_0x152cf2(0x234));if(_0x434788&&_0x434788[_0x152cf2(0x218)])_0x214930=_0x434788[_0x152cf2(0x218)];}catch(_0x5d25ac){}if(_0x3ba176===_0x152cf2(0x1d2)||_0xc6559a<_0x214930)return;const _0x5bc43d=Date[_0x152cf2(0x1b8)]();if(lastActions[_0x42ffd8]&&_0x5bc43d-lastActions[_0x42ffd8]<COOLDOWN_MS)return;const _0x317dcb=_0x568dcd[_0x152cf2(0x1fe)][_0x152cf2(0x233)]||[],_0x9f9f2f=normalize(_0x42ffd8),_0x1c2153=_0x317dcb[_0x152cf2(0x254)](_0x1793bb=>normalize(_0x1793bb[_0x152cf2(0x1e1)])===_0x9f9f2f&&(_0x1793bb[_0x152cf2(0x224)]===_0x152cf2(0x1b7)||_0x1793bb[_0x152cf2(0x224)]===_0x152cf2(0x1fb)||_0x1793bb[_0x152cf2(0x224)]===_0x152cf2(0x243)));if(!_0x1c2153)return;const _0x145431=await aiAgent[_0x152cf2(0x1ff)](_0x568dcd,_0x42ffd8,_0x1c2153[_0x152cf2(0x1e4)],_0xc6559a);if(!_0x145431[_0x152cf2(0x1dc)])return;const _0x480e92=_0x152cf2(0x1c0)+_0x42ffd8+'\x20->\x20Schalte\x20'+_0x1c2153['name']+'\x20('+_0x145431[_0x152cf2(0x1d7)]+')';await logAutomationAction(_0x568dcd,'['+_0x3ba176[_0x152cf2(0x1b5)]()+']\x20'+_0x480e92);if(_0x3ba176===_0x152cf2(0x1b3)){const _0x5103d8=await _0x568dcd[_0x152cf2(0x1af)](_0x1c2153['id']);(!_0x5103d8||!_0x5103d8[_0x152cf2(0x218)]&&_0x5103d8[_0x152cf2(0x218)]!==!![])&&await _0x568dcd[_0x152cf2(0x26c)](_0x1c2153['id'],!![]),lastActions[_0x42ffd8]=_0x5bc43d;}}async function findRelatedId(_0x33a6ce,_0x34c9aa,_0x2f166d='setpoint'){const _0x5625b9=a1_0x5e0182;if(_0x2f166d===_0x5625b9(0x230)&&_0x33a6ce[_0x5625b9(0x1fe)][_0x5625b9(0x25a)]){let _0x4316b0=_0x33a6ce[_0x5625b9(0x1fe)][_0x5625b9(0x25a)];if(typeof _0x4316b0===_0x5625b9(0x24e))try{_0x4316b0=JSON[_0x5625b9(0x1d0)](_0x4316b0);}catch(_0x294ce7){}if(_0x4316b0&&_0x4316b0[_0x34c9aa])return _0x4316b0[_0x34c9aa];}if(_0x2f166d===_0x5625b9(0x215)&&_0x33a6ce['config'][_0x5625b9(0x1e3)]){let _0xea0050=_0x33a6ce[_0x5625b9(0x1fe)][_0x5625b9(0x1e3)];if(typeof _0xea0050===_0x5625b9(0x24e))try{_0xea0050=JSON[_0x5625b9(0x1d0)](_0xea0050);}catch(_0x3a484a){}if(_0xea0050&&_0xea0050[_0x34c9aa])return _0xea0050[_0x34c9aa];}let _0x49f874=[];if(_0x2f166d===_0x5625b9(0x230))_0x49f874=[{'s':_0x5625b9(0x1fd),'t':_0x5625b9(0x1c6)},{'s':_0x5625b9(0x216),'t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x5625b9(0x216),'t':_0x5625b9(0x250)},{'s':_0x5625b9(0x1f3),'t':'SET_POINT_TEMPERATURE'},{'s':_0x5625b9(0x241),'t':'occupied_heating_setpoint'},{'s':'local_temperature','t':_0x5625b9(0x223)},{'s':_0x5625b9(0x1fa),'t':_0x5625b9(0x25f)},{'s':_0x5625b9(0x258),'t':'SET'},{'s':_0x5625b9(0x240),'t':_0x5625b9(0x1b0)},{'s':'temperature','t':_0x5625b9(0x230)}];else _0x2f166d===_0x5625b9(0x215)&&(_0x49f874=[{'s':'.1.ACTUAL_TEMPERATURE','t':'.1.LEVEL'},{'s':'.1.TEMPERATURE','t':_0x5625b9(0x1a9)},{'s':'.1.TEMPERATURE','t':_0x5625b9(0x1ef)},{'s':'local_temperature','t':_0x5625b9(0x22c)},{'s':_0x5625b9(0x1fa),'t':_0x5625b9(0x246)},{'s':_0x5625b9(0x1fa),'t':_0x5625b9(0x201)}]);for(const _0x22d881 of _0x49f874){if(_0x34c9aa[_0x5625b9(0x1bf)](_0x22d881['s'])){const _0x17bf8e=_0x34c9aa['replace'](_0x22d881['s'],_0x22d881['t']),_0x515e0a=await _0x33a6ce[_0x5625b9(0x21c)](_0x17bf8e);if(_0x515e0a)return _0x17bf8e;}}try{const _0x36a9c1=_0x34c9aa[_0x5625b9(0x23c)]('.');if(_0x36a9c1[_0x5625b9(0x21d)]>0x2){const _0x2074de=_0x36a9c1[_0x5625b9(0x204)](0x0,-0x1)['join']('.'),_0x385ad6=await _0x33a6ce[_0x5625b9(0x212)](_0x2074de+'.*'),_0x190dc8=[],_0x44d533=_0x34c9aa[_0x5625b9(0x23c)](/[._]+/)['filter'](_0x44cd3d=>![_0x5625b9(0x263),'0',_0x5625b9(0x24f),_0x5625b9(0x23d),_0x5625b9(0x21b),_0x5625b9(0x1fa),'actual',_0x5625b9(0x244),_0x5625b9(0x252),'state'][_0x5625b9(0x1bf)](_0x44cd3d['toLowerCase']()));for(const [_0x154ccc,_0x47b21b]of Object[_0x5625b9(0x22b)](_0x385ad6)){if(_0x154ccc===_0x34c9aa)continue;if(_0x47b21b&&_0x47b21b[_0x5625b9(0x205)]){const _0x19faf9=_0x154ccc['toLowerCase'](),_0x2bc7db=(_0x47b21b[_0x5625b9(0x205)]['role']||'')['toLowerCase'](),_0x50927c=(_0x47b21b[_0x5625b9(0x205)]['unit']||'')[_0x5625b9(0x232)]();let _0x29edd9=![];if(_0x2f166d==='setpoint'&&_0x47b21b[_0x5625b9(0x205)][_0x5625b9(0x1f7)]===!![])_0x29edd9=_0x19faf9[_0x5625b9(0x1bf)]('set')||_0x19faf9['includes']('soll')||_0x19faf9[_0x5625b9(0x1bf)](_0x5625b9(0x23e))||_0x2bc7db[_0x5625b9(0x1bf)]('level.temperature')||_0x2bc7db[_0x5625b9(0x1bf)](_0x5625b9(0x200));else _0x2f166d==='valve'&&(_0x29edd9=_0x19faf9['includes'](_0x5625b9(0x201))||_0x19faf9['includes'](_0x5625b9(0x215))||_0x19faf9[_0x5625b9(0x1bf)](_0x5625b9(0x1bd))||_0x19faf9[_0x5625b9(0x1bf)](_0x5625b9(0x207))||_0x2bc7db[_0x5625b9(0x1bf)](_0x5625b9(0x211))||_0x2bc7db[_0x5625b9(0x1bf)](_0x5625b9(0x1ca))||_0x50927c['includes']('%'));if(_0x29edd9){const _0x2c72ad=_0x154ccc[_0x5625b9(0x23c)](/[._]+/)['map'](_0x992a04=>_0x992a04[_0x5625b9(0x232)]());let _0xa2aebb=0x0;_0x44d533['forEach'](_0x11fc53=>{const _0x3c8955=_0x5625b9;if(_0x2c72ad['includes'](_0x11fc53[_0x3c8955(0x232)]()))_0xa2aebb++;}),_0x190dc8[_0x5625b9(0x24d)]({'id':_0x154ccc,'score':_0xa2aebb});}}}if(_0x190dc8[_0x5625b9(0x21d)]>0x0){_0x190dc8[_0x5625b9(0x217)]((_0x351260,_0x4d48b9)=>_0x4d48b9[_0x5625b9(0x1de)]-_0x351260[_0x5625b9(0x1de)]);if(_0x190dc8[0x0][_0x5625b9(0x1de)]>0x0)return _0x190dc8[0x0]['id'];}}}catch(_0x4e32e4){}return null;}async function scanThermostats(_0x979e19){const _0x1df3fd=a1_0x5e0182,_0xac9b97=_0x979e19[_0x1df3fd(0x1fe)][_0x1df3fd(0x233)]||[],_0x938158=[],_0x5f2928=_0xac9b97[_0x1df3fd(0x1c7)](_0x5b4d29=>_0x5b4d29['id']&&_0x5b4d29['id'][_0x1df3fd(0x1bf)](_0x1df3fd(0x1fa))||_0x5b4d29['type']&&[_0x1df3fd(0x1fa),_0x1df3fd(0x237),_0x1df3fd(0x244)][_0x1df3fd(0x1bf)](_0x5b4d29['type'])||_0x5b4d29[_0x1df3fd(0x1e4)]&&_0x5b4d29['name'][_0x1df3fd(0x232)]()[_0x1df3fd(0x1bf)](_0x1df3fd(0x1c3)));for(const _0x1fada2 of _0x5f2928){const _0x2b68a8=await findRelatedId(_0x979e19,_0x1fada2['id'],_0x1df3fd(0x230)),_0x433bc2=await findRelatedId(_0x979e19,_0x1fada2['id'],_0x1df3fd(0x215));let _0x1d0f89='Nicht\x20gefunden',_0x4db323=![],_0x539736=_0x979e19[_0x1df3fd(0x1fe)][_0x1df3fd(0x25a)]||{};if(typeof _0x539736===_0x1df3fd(0x24e))try{_0x539736=JSON['parse'](_0x539736);}catch(_0x56096d){}let _0x3ad5f7=_0x979e19[_0x1df3fd(0x1fe)][_0x1df3fd(0x1e3)]||{};if(typeof _0x3ad5f7===_0x1df3fd(0x24e))try{_0x3ad5f7=JSON[_0x1df3fd(0x1d0)](_0x3ad5f7);}catch(_0x3b93e9){}if(_0x539736[_0x1fada2['id']]&&_0x539736[_0x1fada2['id']]===_0x2b68a8||_0x3ad5f7[_0x1fada2['id']]&&_0x3ad5f7[_0x1fada2['id']]===_0x433bc2)_0x1d0f89=_0x1df3fd(0x231),_0x4db323=!![];else(_0x2b68a8||_0x433bc2)&&(_0x1d0f89=_0x1df3fd(0x260));_0x938158[_0x1df3fd(0x24d)]({'room':_0x1fada2[_0x1df3fd(0x1e1)]||_0x1df3fd(0x1ba),'sensorId':_0x1fada2['id'],'setpointId':_0x2b68a8||'-','valveId':_0x433bc2||'-','source':_0x1d0f89,'isManual':_0x4db323,'status':_0x2b68a8&&_0x433bc2?'PERFECT':_0x2b68a8?'OK':_0x1df3fd(0x1b4)});}return _0x938158[_0x1df3fd(0x217)]((_0x5d573f,_0x4fb12f)=>_0x5d573f[_0x1df3fd(0x1d8)][_0x1df3fd(0x208)](_0x4fb12f[_0x1df3fd(0x1d8)]));}async function updateSchedulePreview(_0x32c564){const _0x4891ae=a1_0x5e0182;if(!_0x32c564[_0x4891ae(0x1fe)][_0x4891ae(0x239)]||!_0x32c564[_0x4891ae(0x1fe)][_0x4891ae(0x1d5)])return;let _0x4dbbe0={};try{const _0x47ddcc=await _0x32c564[_0x4891ae(0x202)](_0x4891ae(0x255));if(_0x47ddcc&&_0x47ddcc['val'])_0x4dbbe0=JSON[_0x4891ae(0x1d0)](_0x47ddcc['val']);}catch(_0x3a1846){}const _0x1e78f6=[],_0x21ffcd=Date[_0x4891ae(0x1b8)](),_0x9b36b=0x30*0x3c*0x3c*0x3e8;try{const _0x31dd94=await _0x32c564['getForeignStateAsync'](_0x32c564[_0x4891ae(0x1fe)][_0x4891ae(0x1d5)]+_0x4891ae(0x249));if(!_0x31dd94||!_0x31dd94[_0x4891ae(0x218)])return;const _0x150d49=JSON['parse'](_0x31dd94['val']),_0x497298=_0x32c564[_0x4891ae(0x1fe)][_0x4891ae(0x1bc)]||[],_0x40f41b=_0x32c564[_0x4891ae(0x1fe)]['devices']||[],_0x2a760e=new Set();_0x40f41b[_0x4891ae(0x1fc)](_0x188c66=>{const _0x4a825b=_0x4891ae;if(_0x188c66[_0x4a825b(0x1e1)])_0x2a760e['add'](_0x188c66['location']);});for(const _0x347345 of _0x150d49){if(_0x347345[_0x4891ae(0x268)]&&_0x497298[_0x4891ae(0x21d)]>0x0&&!_0x497298[_0x4891ae(0x1bf)](_0x347345[_0x4891ae(0x268)]))continue;const _0xb456b2=_0x347345[_0x4891ae(0x21e)]||_0x347345[_0x4891ae(0x1ed)]||_0x347345[_0x4891ae(0x1c5)];if(!_0xb456b2)continue;const _0x5848bb=new Date(_0xb456b2),_0x80262c=_0x5848bb[_0x4891ae(0x1aa)]();if(isNaN(_0x80262c))continue;if(_0x80262c<_0x21ffcd)continue;if(_0x80262c>_0x21ffcd+_0x9b36b)continue;const _0x5ae918=(_0x347345[_0x4891ae(0x229)]||_0x347345[_0x4891ae(0x253)]||'')[_0x4891ae(0x232)]();let _0x2e2679=![],_0xe8784a=[],_0x42d666=_0x347345[_0x4891ae(0x229)]||_0x347345['summary']||_0x4891ae(0x1ba);if(_0x5ae918[_0x4891ae(0x1bf)]('urlaub\x20ende')||_0x5ae918[_0x4891ae(0x1bf)](_0x4891ae(0x206))||_0x5ae918[_0x4891ae(0x1bf)]('ankunft'))_0x2e2679=!![],_0xe8784a=Array[_0x4891ae(0x1b9)](_0x2a760e);else for(const _0x5dc732 of _0x2a760e){if(_0x5ae918[_0x4891ae(0x1bf)](_0x5dc732[_0x4891ae(0x232)]()))_0xe8784a[_0x4891ae(0x24d)](_0x5dc732);}_0xe8784a[_0x4891ae(0x21d)]>0x0&&_0xe8784a[_0x4891ae(0x1fc)](_0x3a1d7d=>{const _0x47c84d=_0x4891ae;let _0x3a7bb6=0x3c;if(_0x2e2679){let _0x50bc62=0x0;Object[_0x47c84d(0x242)](_0x4dbbe0)[_0x47c84d(0x1fc)](_0x4c359e=>{if(_0x4c359e>_0x50bc62)_0x50bc62=_0x4c359e;}),_0x3a7bb6=_0x50bc62>0x0?_0x50bc62:0x78;}else _0x3a7bb6=_0x4dbbe0[_0x3a1d7d]||0x3c;const _0x35f02b=new Date(_0x80262c-_0x3a7bb6*0xea60);_0x1e78f6[_0x47c84d(0x24d)]({'eventTime':_0x80262c,'triggerTime':_0x35f02b[_0x47c84d(0x1aa)](),'room':_0x3a1d7d,'minutes':_0x3a7bb6,'reason':_0x42d666,'isGlobal':_0x2e2679});});}}catch(_0x497e6e){}_0x1e78f6[_0x4891ae(0x217)]((_0x544953,_0x22efe4)=>_0x544953[_0x4891ae(0x1ee)]-_0x22efe4[_0x4891ae(0x1ee)]);const _0x2e068d=_0x1e78f6[_0x4891ae(0x204)](0x0,0x5);await _0x32c564[_0x4891ae(0x1dd)](_0x4891ae(0x1ea),{'val':JSON[_0x4891ae(0x1f8)](_0x2e068d),'ack':!![]});}async function monitorEnforcements(_0x1f9d9c){const _0x5b4ec1=a1_0x5e0182;try{const _0x1053b1=_0x5b4ec1(0x20a),_0x33ead4=await _0x1f9d9c['getStateAsync'](_0x1053b1);if(!_0x33ead4||!_0x33ead4[_0x5b4ec1(0x218)])return;let _0x1ba89c=[];try{_0x1ba89c=JSON['parse'](_0x33ead4[_0x5b4ec1(0x218)]);}catch(_0x502881){return;}if(!Array[_0x5b4ec1(0x1cc)](_0x1ba89c)||_0x1ba89c[_0x5b4ec1(0x21d)]===0x0)return;const _0xbdbf4c=Date[_0x5b4ec1(0x1b8)](),_0x41130f=_0x1f9d9c['config'][_0x5b4ec1(0x233)]||[];let _0x5d50dd=![];for(let _0x3e37f1=_0x1ba89c[_0x5b4ec1(0x21d)]-0x1;_0x3e37f1>=0x0;_0x3e37f1--){const _0x229fc7=_0x1ba89c[_0x3e37f1];if(_0xbdbf4c>=_0x229fc7[_0x5b4ec1(0x22f)]){_0x1f9d9c['log'][_0x5b4ec1(0x1e6)]('üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20'+_0x229fc7[_0x5b4ec1(0x1d8)]+_0x5b4ec1(0x22a)),_0x1ba89c['splice'](_0x3e37f1,0x1),_0x5d50dd=!![];continue;}const _0x4157fe=_0x41130f['find'](_0x2d6b73=>normalize(_0x2d6b73[_0x5b4ec1(0x1e1)])===normalize(_0x229fc7[_0x5b4ec1(0x1d8)])&&(_0x2d6b73['type']===_0x5b4ec1(0x1fa)||_0x2d6b73[_0x5b4ec1(0x224)]==='thermostat'));if(_0x4157fe){const _0x4de9b0=await findRelatedId(_0x1f9d9c,_0x4157fe['id'],_0x5b4ec1(0x230));if(_0x4de9b0){const _0x2ed39b=await _0x1f9d9c[_0x5b4ec1(0x1af)](_0x4de9b0);_0x2ed39b&&typeof _0x2ed39b[_0x5b4ec1(0x218)]==='number'&&(_0x2ed39b[_0x5b4ec1(0x218)]<0xf&&(_0x1f9d9c['log']['warn'](_0x5b4ec1(0x20c)+_0x229fc7['room']+_0x5b4ec1(0x1c9)+_0x2ed39b['val']+_0x5b4ec1(0x25e)+_0x229fc7[_0x5b4ec1(0x23e)]+'¬∞C.'),await _0x1f9d9c[_0x5b4ec1(0x26c)](_0x4de9b0,_0x229fc7[_0x5b4ec1(0x23e)]),await logAutomationAction(_0x1f9d9c,'[FORCE]\x20'+_0x229fc7['room']+':\x20'+_0x2ed39b['val']+_0x5b4ec1(0x1b6)+_0x229fc7[_0x5b4ec1(0x23e)]+_0x5b4ec1(0x1ec))));}}}_0x5d50dd&&await _0x1f9d9c[_0x5b4ec1(0x1dd)](_0x1053b1,{'val':JSON[_0x5b4ec1(0x1f8)](_0x1ba89c),'ack':!![]});}catch(_0x2f73e3){_0x1f9d9c['log'][_0x5b4ec1(0x225)](_0x5b4ec1(0x24c)+_0x2f73e3[_0x5b4ec1(0x1bb)]);}}async function checkCalendarTriggers(_0x413c64){const _0x4146ed=a1_0x5e0182;if(!_0x413c64['config'][_0x4146ed(0x239)]||!_0x413c64['config']['calendarInstance'])return;await updateSchedulePreview(_0x413c64);let _0x409ead={},_0x394091={};try{const _0x2ed59b=await _0x413c64[_0x4146ed(0x202)](_0x4146ed(0x255));if(_0x2ed59b&&_0x2ed59b[_0x4146ed(0x218)])_0x409ead=JSON[_0x4146ed(0x1d0)](_0x2ed59b['val']);const _0x369c83=await _0x413c64[_0x4146ed(0x202)](_0x4146ed(0x1db));if(_0x369c83&&_0x369c83['val'])_0x394091=JSON[_0x4146ed(0x1d0)](_0x369c83[_0x4146ed(0x218)]);}catch(_0x5c2123){}let _0x2ad3ee={'default':0x15};try{const _0x576ca5=await _0x413c64[_0x4146ed(0x202)]('analysis.energy.warmupTargets');if(_0x576ca5&&_0x576ca5['val'])_0x2ad3ee=JSON[_0x4146ed(0x1d0)](_0x576ca5[_0x4146ed(0x218)]);}catch(_0x2e7a51){}let _0x4f2b95=[];try{const _0x33423d=await _0x413c64[_0x4146ed(0x202)](_0x4146ed(0x20a));if(_0x33423d&&_0x33423d[_0x4146ed(0x218)])_0x4f2b95=JSON['parse'](_0x33423d[_0x4146ed(0x218)]);}catch(_0x2913a3){}try{const _0x5d793f=await _0x413c64[_0x4146ed(0x1af)](_0x413c64[_0x4146ed(0x1fe)][_0x4146ed(0x1d5)]+'.data.table');if(!_0x5d793f||!_0x5d793f[_0x4146ed(0x218)])return;const _0x3b25e2=JSON[_0x4146ed(0x1d0)](_0x5d793f[_0x4146ed(0x218)]),_0xa613b5=Date[_0x4146ed(0x1b8)](),_0x5594fd=_0x413c64[_0x4146ed(0x1fe)]['devices']||[],_0x4b644c=_0x413c64[_0x4146ed(0x1fe)][_0x4146ed(0x1bc)]||[];let _0x2a53c2=![];for(const _0x1d52b7 of _0x3b25e2){if(_0x1d52b7[_0x4146ed(0x268)]&&_0x4b644c[_0x4146ed(0x21d)]>0x0&&!_0x4b644c[_0x4146ed(0x1bf)](_0x1d52b7[_0x4146ed(0x268)]))continue;const _0x27a15d=_0x1d52b7['_date']||_0x1d52b7[_0x4146ed(0x1ed)]||_0x1d52b7['date'];if(!_0x27a15d)continue;const _0x3057e3=new Date(_0x27a15d);if(isNaN(_0x3057e3[_0x4146ed(0x1aa)]()))continue;const _0x42bcfd=(_0x1d52b7[_0x4146ed(0x229)]||_0x1d52b7['summary']||'')[_0x4146ed(0x232)]();if(_0x42bcfd[_0x4146ed(0x1bf)](_0x4146ed(0x213))||_0x42bcfd['includes']('r√ºckkehr')||_0x42bcfd[_0x4146ed(0x1bf)]('ankunft')){let _0x53a990=0x0;Object['values'](_0x409ead)[_0x4146ed(0x1fc)](_0x353a76=>{if(_0x353a76>_0x53a990)_0x53a990=_0x353a76;});if(_0x53a990===0x0)_0x53a990=0x78;const _0x43d7cf=_0x3057e3[_0x4146ed(0x1aa)]()-_0x53a990*0xea60;_0xa613b5>=_0x43d7cf&&_0xa613b5<_0x3057e3['getTime']()&&(_0x413c64[_0x4146ed(0x235)]!=='normal'&&(_0x413c64[_0x4146ed(0x1c2)][_0x4146ed(0x1e6)](_0x4146ed(0x26a)+_0x53a990+_0x4146ed(0x21f)),await _0x413c64['setStateAsync'](_0x4146ed(0x219),{'val':_0x4146ed(0x1f5),'ack':![]})));}for(const _0x30d790 of _0x5594fd){if(_0x30d790['location']){const _0x4a477a=_0x30d790[_0x4146ed(0x1e1)][_0x4146ed(0x232)](),_0x425939=(_0x30d790[_0x4146ed(0x1e4)]||'')['toLowerCase']();let _0x182645=_0x42bcfd[_0x4146ed(0x1bf)](_0x4a477a);!_0x182645&&_0x425939[_0x4146ed(0x21d)]>0x3&&_0x42bcfd[_0x4146ed(0x1bf)](_0x425939)&&(_0x182645=!![]);if(_0x182645){const _0x20fb2a=_0x409ead[_0x30d790['location']]||0x3c,_0x3e4004=_0x394091[_0x30d790[_0x4146ed(0x1e1)]]||_0x4146ed(0x256),_0x2cd0b9=_0x3057e3[_0x4146ed(0x1aa)]()-_0x20fb2a*0xea60;if(_0xa613b5>=_0x2cd0b9&&_0xa613b5<_0x3057e3[_0x4146ed(0x1aa)]()){const _0x194e3d=lastActions[_0x4146ed(0x1ae)+_0x30d790[_0x4146ed(0x1e1)]];if(_0x194e3d&&_0xa613b5-_0x194e3d<CAL_COOLDOWN_MS)continue;const _0x3f36a4=await findRelatedId(_0x413c64,_0x30d790['id'],'setpoint');if(_0x3f36a4){let _0x48fe88=_0x2ad3ee[_0x30d790[_0x4146ed(0x1e1)]];if(_0x48fe88===undefined)_0x48fe88=_0x2ad3ee[_0x4146ed(0x209)];if(_0x48fe88===undefined)_0x48fe88=0x15;const _0xeb02f8=await _0x413c64['getForeignStateAsync'](_0x3f36a4);if(_0xeb02f8&&typeof _0xeb02f8[_0x4146ed(0x218)]===_0x4146ed(0x1ad)&&_0xeb02f8[_0x4146ed(0x218)]<_0x48fe88-0.5){_0x413c64[_0x4146ed(0x1c2)]['info'](_0x4146ed(0x25d)+_0x3e4004+_0x4146ed(0x1f2)+_0x30d790['location']+_0x4146ed(0x226)+_0x42bcfd+')\x20aktiv.\x20Heize\x20auf\x20'+_0x48fe88+_0x4146ed(0x22d)+_0x20fb2a+_0x4146ed(0x21f)),await _0x413c64['setForeignStateAsync'](_0x3f36a4,_0x48fe88),await logAutomationAction(_0x413c64,_0x4146ed(0x1f6)+_0x30d790[_0x4146ed(0x1e1)]+'\x20->\x20'+_0x48fe88+_0x4146ed(0x264)+_0x3e4004+')'),lastActions[_0x4146ed(0x1ae)+_0x30d790['location']]=_0xa613b5;const _0x2ee856=_0x4f2b95[_0x4146ed(0x228)](_0x3ff155=>_0x3ff155[_0x4146ed(0x1d8)]===_0x30d790[_0x4146ed(0x1e1)]);if(_0x2ee856!==-0x1)_0x4f2b95[_0x4146ed(0x203)](_0x2ee856,0x1);_0x4f2b95['push']({'room':_0x30d790['location'],'target':_0x48fe88,'until':_0x3057e3[_0x4146ed(0x1aa)]()}),_0x2a53c2=!![];}}}}}}}_0x2a53c2&&await _0x413c64['setStateAsync']('analysis.energy.activeEnforcements',{'val':JSON[_0x4146ed(0x1f8)](_0x4f2b95),'ack':!![]});}catch(_0x387b61){_0x413c64[_0x4146ed(0x1c2)][_0x4146ed(0x1e8)](_0x4146ed(0x259)+_0x387b61['message']);}}function a1_0x4198(_0x60aca6,_0x15c9c7){const _0x57e24a=a1_0xcda0();return a1_0x4198=function(_0x2c90f5,_0x166f65){_0x2c90f5=_0x2c90f5-0x1a9;let _0xcda0de=_0x57e24a[_0x2c90f5];return _0xcda0de;},a1_0x4198(_0x60aca6,_0x15c9c7);}async function manageMpcIntervention(_0x4aa265,_0x5a3667,_0x1cd043){const _0x3e6e2c=a1_0x5e0182;try{const _0x29b4f2='analysis.energy.mpcActiveInterventions',_0x2f730c=await _0x4aa265[_0x3e6e2c(0x202)](_0x29b4f2);let _0x1208c0=[];if(_0x2f730c&&_0x2f730c[_0x3e6e2c(0x218)])try{_0x1208c0=JSON[_0x3e6e2c(0x1d0)](_0x2f730c[_0x3e6e2c(0x218)]);}catch(_0x43f1a6){}const _0x3af945=_0x1208c0[_0x3e6e2c(0x1f4)](_0x5a3667);if(_0x1cd043===_0x3e6e2c(0x1f0))_0x3af945===-0x1&&(_0x1208c0[_0x3e6e2c(0x24d)](_0x5a3667),await _0x4aa265[_0x3e6e2c(0x1dd)](_0x29b4f2,{'val':JSON[_0x3e6e2c(0x1f8)](_0x1208c0),'ack':!![]}));else _0x1cd043===_0x3e6e2c(0x26b)&&(_0x3af945!==-0x1&&(_0x1208c0['splice'](_0x3af945,0x1),await _0x4aa265[_0x3e6e2c(0x1dd)](_0x29b4f2,{'val':JSON['stringify'](_0x1208c0),'ack':!![]})));}catch(_0x4a028f){}}async function cleanupGhostInterventions(_0x133a0e){const _0x1c879a=a1_0x5e0182;try{const _0x978a50='analysis.energy.mpcActiveInterventions',_0x13f527=await _0x133a0e[_0x1c879a(0x202)](_0x978a50);if(!_0x13f527||!_0x13f527['val'])return;const _0x1f5626=JSON[_0x1c879a(0x1d0)](_0x13f527[_0x1c879a(0x218)]);if(!Array[_0x1c879a(0x1cc)](_0x1f5626)||_0x1f5626['length']===0x0)return;let _0x23e310={'default':0x15};try{const _0x50ce97=await _0x133a0e[_0x1c879a(0x202)]('analysis.energy.warmupTargets');if(_0x50ce97&&_0x50ce97['val'])_0x23e310=JSON[_0x1c879a(0x1d0)](_0x50ce97['val']);}catch(_0x2e7c1d){}let _0x28b180=[];try{const _0xa79a84=await _0x133a0e['getStateAsync'](_0x1c879a(0x265));if(_0xa79a84&&_0xa79a84[_0x1c879a(0x218)])_0x28b180=JSON[_0x1c879a(0x1d0)](_0xa79a84['val']);}catch(_0x25c9c1){}let _0x1fb5bd={},_0x295132=![];try{const _0x3d33f4=await _0x133a0e[_0x1c879a(0x202)](_0x1c879a(0x25b));if(_0x3d33f4&&_0x3d33f4[_0x1c879a(0x218)])_0x1fb5bd=JSON[_0x1c879a(0x1d0)](_0x3d33f4[_0x1c879a(0x218)]);}catch(_0x30bb79){}if(_0x1fb5bd[_0x1c879a(0x22e)]){const _0x1f52ec=Date[_0x1c879a(0x1b8)]();for(const [_0x1c75e3,_0x167f4a]of Object['entries'](_0x1fb5bd[_0x1c879a(0x22e)])){_0x1f52ec-_0x167f4a>PENALTY_TTL&&(delete _0x1fb5bd[_0x1c75e3],delete _0x1fb5bd[_0x1c879a(0x22e)][_0x1c75e3],_0x295132=!![],_0x133a0e[_0x1c879a(0x1c2)][_0x1c879a(0x1e6)](_0x1c879a(0x1f9)+_0x1c75e3+_0x1c879a(0x21a)));}}const _0xaa312f=_0x133a0e[_0x1c879a(0x1fe)][_0x1c879a(0x233)]||[];let _0xc0b718=![];for(let _0x446a7d=_0x1f5626[_0x1c879a(0x21d)]-0x1;_0x446a7d>=0x0;_0x446a7d--){const _0x962124=_0x1f5626[_0x446a7d],_0x2cfcee=_0xaa312f[_0x1c879a(0x254)](_0x21b324=>normalize(_0x21b324[_0x1c879a(0x1e1)])===normalize(_0x962124)&&(_0x21b324[_0x1c879a(0x224)]===_0x1c879a(0x1fa)||_0x21b324[_0x1c879a(0x224)]===_0x1c879a(0x237)));if(!_0x2cfcee){_0x133a0e[_0x1c879a(0x1c2)][_0x1c879a(0x1e8)]('üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27'+_0x962124+_0x1c879a(0x214)),_0x1f5626[_0x1c879a(0x203)](_0x446a7d,0x1),_0xc0b718=!![];continue;}if(_0x2cfcee){const _0x12b966=await findRelatedId(_0x133a0e,_0x2cfcee['id'],_0x1c879a(0x230)),_0xa6ac87=await _0x133a0e['getForeignStateAsync'](_0x2cfcee['id']);if(_0x12b966){const _0x177b89=await _0x133a0e[_0x1c879a(0x1af)](_0x12b966);if(_0x177b89&&typeof _0x177b89[_0x1c879a(0x218)]===_0x1c879a(0x1ad)){let _0x278552=![],_0x1ad6a4='';Math[_0x1c879a(0x236)](_0x177b89[_0x1c879a(0x218)]-ECO_TEMP)>0.5&&(_0x278552=!![],_0x1ad6a4=_0x1c879a(0x257));if(!_0x278552&&_0xa6ac87&&typeof _0xa6ac87[_0x1c879a(0x218)]===_0x1c879a(0x1ad)){const _0x207b75=_0x23e310[_0x962124]||_0x23e310['default']||0x15;_0xa6ac87[_0x1c879a(0x218)]<_0x207b75+0.2&&(_0x278552=!![],_0x1ad6a4='too_cold');}if(_0x278552){if(_0x1ad6a4===_0x1c879a(0x257)){_0x133a0e[_0x1c879a(0x1c2)][_0x1c879a(0x1e6)](_0x1c879a(0x1df)+_0x962124+_0x1c879a(0x23b)+_0x177b89[_0x1c879a(0x218)]+_0x1c879a(0x1ac)+ECO_TEMP+_0x1c879a(0x1e9));const _0x439f67=lastActions['cal_'+_0x962124],_0x29557c=_0x439f67&&Date[_0x1c879a(0x1b8)]()-_0x439f67<0x2*0x3c*0x3e8;if(!_0x29557c&&_0x177b89['val']>ECO_TEMP+0.5){_0x133a0e[_0x1c879a(0x1d4)]&&(_0x133a0e[_0x1c879a(0x1c2)]['info'](_0x1c879a(0x1ab)+_0x962124+'\x20wurde\x20manuell\x20erh√∂ht.'),_0x133a0e[_0x1c879a(0x1d4)]('TRAIN_RL_PENALTY',{'room':_0x962124}));const _0x141c7f=_0x962124+'_'+new Date()['getHours']();if(!_0x1fb5bd[_0x141c7f]){_0x1fb5bd[_0x141c7f]=0x1;if(!_0x1fb5bd[_0x1c879a(0x22e)])_0x1fb5bd[_0x1c879a(0x22e)]={};_0x1fb5bd['_meta'][_0x141c7f]=Date[_0x1c879a(0x1b8)](),_0x295132=!![];}}else _0x29557c&&_0x133a0e[_0x1c879a(0x1c2)][_0x1c879a(0x1e6)](_0x1c879a(0x23f)+_0x962124+_0x1c879a(0x1c1));}else{if(_0x1ad6a4===_0x1c879a(0x1ce)){let _0x3c7609=![];if(_0x28b180[_0x1c879a(0x254)](_0x4dda56=>_0x4dda56['room']===_0x962124))_0x3c7609=!![];const _0x8a2b53=_0xaa312f[_0x1c879a(0x1c7)](_0x2a28e1=>normalize(_0x2a28e1[_0x1c879a(0x1e1)])===normalize(_0x962124)&&(_0x2a28e1['type']===_0x1c879a(0x1cd)||_0x2a28e1[_0x1c879a(0x224)]===_0x1c879a(0x244)||_0x2a28e1[_0x1c879a(0x224)]===_0x1c879a(0x1cb)));for(const _0x51ba9e of _0x8a2b53){try{const _0x3f896f=await _0x133a0e['getForeignStateAsync'](_0x51ba9e['id']);if(_0x3f896f&&(_0x3f896f[_0x1c879a(0x218)]===!![]||_0x3f896f[_0x1c879a(0x218)]===0x1||String(_0x3f896f['val'])[_0x1c879a(0x232)]()===_0x1c879a(0x20b)))_0x3c7609=!![];}catch(_0x59c593){}}if(_0x3c7609)_0x133a0e[_0x1c879a(0x1c2)][_0x1c879a(0x1e6)](_0x1c879a(0x222)+_0x962124+_0x1c879a(0x245));else{const _0x5c0a2c=_0x23e310[_0x962124]||_0x23e310[_0x1c879a(0x209)]||0x15;_0x133a0e['log'][_0x1c879a(0x1e6)](_0x1c879a(0x1e5)+_0x962124+'\x20erreicht\x20Limit\x20('+_0xa6ac87[_0x1c879a(0x218)]+_0x1c879a(0x1b2)+(_0x5c0a2c+0.2)+_0x1c879a(0x266)),await _0x133a0e[_0x1c879a(0x26c)](_0x12b966,_0x5c0a2c),await logAutomationAction(_0x133a0e,_0x1c879a(0x220)+_0x962124+_0x1c879a(0x20f)+_0x5c0a2c+'¬∞C'),lastActions[_0x1c879a(0x247)+_0x962124]=Date[_0x1c879a(0x1b8)]();}}}_0x1f5626[_0x1c879a(0x203)](_0x446a7d,0x1),_0xc0b718=!![];}}}}}_0xc0b718&&await _0x133a0e['setStateAsync'](_0x978a50,{'val':JSON['stringify'](_0x1f5626),'ack':!![]}),_0x295132&&await _0x133a0e[_0x1c879a(0x1dd)](_0x1c879a(0x25b),{'val':JSON[_0x1c879a(0x1f8)](_0x1fb5bd),'ack':!![]});}catch(_0x593a86){}}function a1_0xcda0(){const _0xe7dd88=['reason','room','(((.+)+)+)+$','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','analysis.energy.warmupSources','approved','setStateAsync','score','üßπ\x20[MPC\x20CLEANUP]\x20','550bleSoc','location',':\x20Aufheizen\x20auf\x20','valveMapping','name','üö®\x20[MPC\x20WATCHDOG]\x20','info','analysis.automation.actionLog','warn','¬∞C).\x20Entferne\x20Status.','analysis.energy.schedulePreview','constructor','¬∞C\x20(Kalender-Schutz)','eventStart','triggerTime','.4.VALVE_STATE','add','299961KDUmHJ',']:\x20Raum-Trigger\x20\x27','ACTUAL_TEMPERATURE','indexOf','normal','[CAL]\x20','write','stringify','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','temperature','dimmer','forEach','.1.ACTUAL_TEMPERATURE','config','consultButler','thermostat.setpoint','level','getStateAsync','splice','slice','common','r√ºckkehr','position','localeCompare','default','analysis.energy.activeEnforcements','open','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','search','toString',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','1126385GaBCfm','level.valve','getForeignObjectsAsync','urlaub\x20ende','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','valve','.1.TEMPERATURE','sort','val','system.mode','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','wert','getForeignObjectAsync','length','_date','\x20min).','[WATCHDOG]\x20','¬∞C!\x20(Puffer:\x20','üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20','current_heating_setpoint','type','error','\x27\x20(Match:\x20','mpc_','findIndex','event','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','entries','pi_heating_demand','¬∞C\x20(Vorlauf:\x20','_meta','until','setpoint','Manuelles\x20Mapping','toLowerCase','devices','analysis.automation.confidenceThreshold','currentSystemMode','abs','thermostat','96054JHFSdd','useCalendar','6450736OsIPkC','\x20ist\x20auf\x20','split','ist','target','üìÖ\x20[MPC\x20INFO]\x20','Ist','local_temperature','values','switch','sensor','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','valve_position','rescue_','üî•\x20[MPC\x20ACTION]\x20Heize\x20','.data.table','1185uIowco','¬∞C!\x20(Puffer\x20leer).','Enforcement\x20Monitor\x20Error:\x20','push','string','hm-rpc','.4.SET_TEMPERATURE','\x20min)','messwert','summary','find','analysis.energy.warmupTimes','Classic','manual','ACTUAL','Calendar\x20Check\x20Error:\x20','thermostatMapping','analysis.energy.rlPenalties','12424FUeLBt','üìÖ\x20SMART\x20SCHEDULE\x20[','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','target_temperature','Auto-Erkennung','./ai_agent','428600cmpYGX','openknx','¬∞C\x20(via\x20','analysis.energy.ventilationAlerts','¬∞C).\x20Sparmodus\x20beendet!','trim','_calName','analysis.automation.mode','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','remove','setForeignStateAsync','.1.LEVEL','getTime','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','¬∞C\x20(nicht\x20','number','cal_','getForeignStateAsync','Soll','\x20gefunden!','¬∞C\x20<\x20','active','Fehlt','toUpperCase','¬∞C\x20->\x20','light','now','from','Unbekannt','message','calendarSelection','stellwert','minutes_safe','includes','Pr√§diktion:\x20','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','log','temp','exports','date','.1.SET_POINT_TEMPERATURE','filter','2194406uTyOww','\x20auf\x20','value.valve','contact','isArray','window','too_cold','[MPC]\x20','parse','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20','off','294yjElrV','sendToPythonWrapper','calendarInstance','replace'];a1_0xcda0=function(){return _0xe7dd88;};return a1_0xcda0();}async function applyEnergySavings(_0x2e7641,_0x2ff68f){const _0x2e2c01=a1_0x5e0182;await cleanupGhostInterventions(_0x2e7641);if(!_0x2ff68f||_0x2ff68f[_0x2e2c01(0x21d)]===0x0)return;const _0x59ed43=_0x2e7641[_0x2e2c01(0x1fe)]['devices']||[],_0xe1344e=Date[_0x2e2c01(0x1b8)]();for(const _0x45fda6 of _0x2ff68f){const _0xbd540c=_0x45fda6[_0x2e2c01(0x1d8)],_0x4a1595=_0x45fda6[_0x2e2c01(0x1be)],_0x38073d=_0x45fda6[_0x2e2c01(0x23e)]||0x15;if(lastActions[_0x2e2c01(0x247)+_0xbd540c]&&_0xe1344e-lastActions[_0x2e2c01(0x247)+_0xbd540c]<RESCUE_LOCK_MS)continue;const _0x3e6849=_0x59ed43['find'](_0x2bc763=>normalize(_0x2bc763['location'])===normalize(_0xbd540c)&&(_0x2bc763['type']===_0x2e2c01(0x1fa)||_0x2bc763['type']===_0x2e2c01(0x237)));if(!_0x3e6849)continue;const _0x30cb61=await findRelatedId(_0x2e7641,_0x3e6849['id'],'setpoint');if(_0x30cb61){if(lastActions[_0x2e2c01(0x227)+_0xbd540c]&&_0xe1344e-lastActions[_0x2e2c01(0x227)+_0xbd540c]<0x1e*0x3c*0x3e8)continue;const _0x490518=await _0x2e7641[_0x2e2c01(0x1af)](_0x30cb61);if(_0x490518&&typeof _0x490518[_0x2e2c01(0x218)]==='number'){const _0x46fbbc=_0x490518[_0x2e2c01(0x218)];_0x46fbbc!==ECO_TEMP&&await manageMpcIntervention(_0x2e7641,_0xbd540c,_0x2e2c01(0x26b));if(_0x4a1595>0x1e)_0x46fbbc>ECO_TEMP+0.5&&(_0x2e7641[_0x2e2c01(0x1c2)][_0x2e2c01(0x1e6)](_0x2e2c01(0x1d1)+_0xbd540c+_0x2e2c01(0x1c9)+ECO_TEMP+_0x2e2c01(0x221)+_0x4a1595+_0x2e2c01(0x251)),await _0x2e7641[_0x2e2c01(0x26c)](_0x30cb61,ECO_TEMP),await manageMpcIntervention(_0x2e7641,_0xbd540c,_0x2e2c01(0x1f0)),lastActions[_0x2e2c01(0x227)+_0xbd540c]=_0xe1344e,await logAutomationAction(_0x2e7641,'[MPC]\x20'+_0xbd540c+':\x20Absenkung\x20auf\x20'+ECO_TEMP+'¬∞C'));else _0x4a1595<=0xf&&(_0x46fbbc<_0x38073d&&(_0x2e7641[_0x2e2c01(0x1c2)][_0x2e2c01(0x1e6)](_0x2e2c01(0x248)+_0xbd540c+'\x20wieder\x20auf\x20'+_0x38073d+_0x2e2c01(0x24b)),await _0x2e7641['setForeignStateAsync'](_0x30cb61,_0x38073d),await manageMpcIntervention(_0x2e7641,_0xbd540c,_0x2e2c01(0x26b)),lastActions[_0x2e2c01(0x227)+_0xbd540c]=_0xe1344e,await logAutomationAction(_0x2e7641,_0x2e2c01(0x1cf)+_0xbd540c+_0x2e2c01(0x1e2)+_0x38073d+'¬∞C')));}}else _0x2e7641[_0x2e2c01(0x1c2)]['warn'](_0x2e2c01(0x1da)+_0xbd540c+_0x2e2c01(0x1b1));}}module[a1_0x5e0182(0x1c4)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};