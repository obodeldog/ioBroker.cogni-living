const a1_0x492339=a1_0x89a2;(function(_0x252225,_0x57f7ef){const _0x11426a=a1_0x89a2,_0xae3864=_0x252225();while(!![]){try{const _0x242b3c=-parseInt(_0x11426a(0x85))/0x1+parseInt(_0x11426a(0xc4))/0x2*(-parseInt(_0x11426a(0xe6))/0x3)+parseInt(_0x11426a(0xa6))/0x4+-parseInt(_0x11426a(0xef))/0x5+-parseInt(_0x11426a(0xfc))/0x6+parseInt(_0x11426a(0xeb))/0x7*(-parseInt(_0x11426a(0x119))/0x8)+parseInt(_0x11426a(0x10c))/0x9*(parseInt(_0x11426a(0x142))/0xa);if(_0x242b3c===_0x57f7ef)break;else _0xae3864['push'](_0xae3864['shift']());}catch(_0x40c45b){_0xae3864['push'](_0xae3864['shift']());}}}(a1_0x3f45,0xf243c));const a1_0x54d015=(function(){let _0x4c6bcf=!![];return function(_0x3c31fa,_0x3da717){const _0x424bbf=_0x4c6bcf?function(){if(_0x3da717){const _0x1fd946=_0x3da717['apply'](_0x3c31fa,arguments);return _0x3da717=null,_0x1fd946;}}:function(){};return _0x4c6bcf=![],_0x424bbf;};}()),a1_0xf0040e=a1_0x54d015(this,function(){const _0x5cfae8=a1_0x89a2;return a1_0xf0040e[_0x5cfae8(0x88)]()[_0x5cfae8(0xce)](_0x5cfae8(0xfe))[_0x5cfae8(0x88)]()[_0x5cfae8(0x81)](a1_0xf0040e)[_0x5cfae8(0xce)](_0x5cfae8(0xfe));});a1_0xf0040e();'use strict';function a1_0x3f45(){const _0x4c6149=[')\x20aktiv.\x20Heize\x20auf\x20','devices','unshift','level','256599JdMQKg','default','rÃ¼ckkehr','./ai_agent','9333690NfWoLV','Manuelles\x20Mapping','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','forEach','temperature','approved','light','valve','getForeignStateAsync','length','getHours','consultButler','role','11700186LztkRn','sort','(((.+)+)+)+$','Unknown','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','ðŸ“…\x20SMART\x20SCHEDULE\x20[','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','splice','thermostatMapping','ACTUAL_TEMPERATURE','trim','analysis.energy.schedulePreview','set','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','urlaub\x20ende','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','12284856ZGaIkz','value.valve','Â°C\x20->\x20','window','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','summary','analysis.energy.activeEnforcements','getForeignObjectsAsync','string','useCalendar','local_temperature','TRAIN_RL_PENALTY','valveMapping','264RdKKsH','analysis.automation.lastAction','sendToPythonWrapper','_meta','join','from','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','Unbekannt','pi_heating_demand','Â°C\x20<\x20','includes','unit','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','\x20->\x20Schalte\x20','Calendar\x20Check\x20Error:\x20','Auto-Erkennung','position','info','val',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','until','off','reason','entries','active','calendarSelection','exports','.data.table','\x20gefunden!','message','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','setStateAsync','event','\x20min)','dimmer','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','state','eventStart','soll','warn','getTime','50HNHOKg','analysis.automation.mode','target_temperature','mpc_','constructor','valve_position','room','[CAL]\x20','1775806ZLVuiC','parse','Â°C\x20(Vorlauf:\x20','toString','hm-rpc','Enforcement\x20Monitor\x20Error:\x20','calendarInstance','map','cal_','stringify','log','analysis.energy.mpcActiveInterventions','toUpperCase','thermostat.setpoint','too_cold','slice','location','.1.SET_POINT_TEMPERATURE','system.mode','open','triggerTime','add','currentSystemMode','analysis.energy.warmupSources','Â°C).\x20Sparmodus\x20beendet!','.1.TEMPERATURE','ðŸ“…\x20[MPC\x20INFO]\x20','occupied_heating_setpoint','manual','wert','current_heating_setpoint','_date','[MPC]\x20','4475012kbMZIn','switch','config','write','date','actual','localeCompare','sensor','rescue_',']:\x20Raum-Trigger\x20\x27','analysis.energy.ventilationAlerts','push','values','replace','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','temp','.1.ACTUAL_TEMPERATURE','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','ankunft','\x27\x20(Match:\x20','ACTUAL','\x20->\x20','Classic','Ist','thermostat','Â°C\x20(nicht\x20','_calName','Â°C!\x20(Puffer\x20leer).','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','298202aDfKfd','SET_POINT_TEMPERATURE','find','remove','toLowerCase','target','\x20ist\x20auf\x20','now','common','analysis.energy.warmupTargets','search','Â°C!\x20(Puffer:\x20','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','\x20wurde\x20manuell\x20erhÃ¶ht.','filter','name','[FORCE]\x20','setForeignStateAsync','\x20min).',':\x20Aufheizen\x20auf\x20','split','number','getStateAsync','getForeignObjectAsync','score','.4.SET_TEMPERATURE','type','analysis.energy.rlPenalties','analysis.energy.warmupTimes','\x20auf\x20','findIndex','minutes_safe','stellwert','setpoint','3prwFcF'];a1_0x3f45=function(){return _0x4c6149;};return a1_0x3f45();}const aiAgent=require(a1_0x492339(0xee)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x35d89c){const _0x1bfb2b=a1_0x492339;if(!_0x35d89c)return'';return _0x35d89c[_0x1bfb2b(0xc8)]()[_0x1bfb2b(0xb3)](/\s+/g,'')[_0x1bfb2b(0x106)]();}function getWarmupRobust(_0x416ab9,_0x5d581a){const _0x50abd7=a1_0x492339;if(!_0x416ab9||!_0x5d581a)return 0x3c;if(_0x416ab9[_0x5d581a]!==undefined)return _0x416ab9[_0x5d581a];const _0x19ec16=_0x5d581a[_0x50abd7(0xc8)]()['replace'](/Ã¤/g,'ae')['replace'](/Ã¶/g,'oe')[_0x50abd7(0xb3)](/Ã¼/g,'ue')[_0x50abd7(0xb3)](/ÃŸ/g,'ss')[_0x50abd7(0xb3)](/\s+/g,'_')['replace'](/[^a-z0-9_]/g,'');if(_0x416ab9[_0x19ec16]!==undefined)return _0x416ab9[_0x19ec16];return 0x3c;}async function logAutomationAction(_0x5b0728,_0x31f885){const _0x45b8cb=a1_0x492339;await _0x5b0728['setStateAsync'](_0x45b8cb(0x11a),{'val':_0x31f885,'ack':!![]});try{const _0x5230ae='analysis.automation.actionLog',_0x3ba29f=await _0x5b0728[_0x45b8cb(0xda)](_0x5230ae);let _0x509db5=[];if(_0x3ba29f&&_0x3ba29f['val'])try{_0x509db5=JSON[_0x45b8cb(0x86)](_0x3ba29f[_0x45b8cb(0x12b)]);}catch(_0xeb805c){}_0x509db5[_0x45b8cb(0xe9)]({'ts':Date['now'](),'msg':_0x31f885});if(_0x509db5[_0x45b8cb(0xf8)]>0x32)_0x509db5=_0x509db5[_0x45b8cb(0x94)](0x0,0x32);await _0x5b0728[_0x45b8cb(0x138)](_0x5230ae,{'val':JSON[_0x45b8cb(0x8e)](_0x509db5),'ack':!![]});}catch(_0x428fc0){}}async function handlePrediction(_0x599920,_0x2f89b0,_0x29f05c){const _0x452ead=a1_0x492339;if(!_0x2f89b0||_0x2f89b0===_0x452ead(0xff))return;let _0x363729=_0x452ead(0x12e),_0x22e2c5=0.6;try{const _0x40c689=await _0x599920[_0x452ead(0xda)](_0x452ead(0x143));if(_0x40c689&&_0x40c689['val'])_0x363729=_0x40c689['val'];const _0x264072=await _0x599920['getStateAsync']('analysis.automation.confidenceThreshold');if(_0x264072&&_0x264072[_0x452ead(0x12b)])_0x22e2c5=_0x264072[_0x452ead(0x12b)];}catch(_0x2cfaf9){}if(_0x363729===_0x452ead(0x12e)||_0x29f05c<_0x22e2c5)return;const _0x18bb4f=Date[_0x452ead(0xcb)]();if(lastActions[_0x2f89b0]&&_0x18bb4f-lastActions[_0x2f89b0]<COOLDOWN_MS)return;const _0x2607fe=_0x599920['config'][_0x452ead(0xe8)]||[],_0x541ed2=normalize(_0x2f89b0),_0x40fb1d=_0x2607fe[_0x452ead(0xc6)](_0x5469c7=>normalize(_0x5469c7[_0x452ead(0x95)])===_0x541ed2&&(_0x5469c7['type']===_0x452ead(0xf5)||_0x5469c7[_0x452ead(0xde)]===_0x452ead(0x13b)||_0x5469c7[_0x452ead(0xde)]===_0x452ead(0xa7)));if(!_0x40fb1d)return;const _0x44b290=await aiAgent[_0x452ead(0xfa)](_0x599920,_0x2f89b0,_0x40fb1d[_0x452ead(0xd3)],_0x29f05c);if(!_0x44b290[_0x452ead(0xf4)])return;const _0x370bbd='PrÃ¤diktion:\x20'+_0x2f89b0+_0x452ead(0x126)+_0x40fb1d[_0x452ead(0xd3)]+'\x20('+_0x44b290[_0x452ead(0x12f)]+')';await logAutomationAction(_0x599920,'['+_0x363729[_0x452ead(0x91)]()+']\x20'+_0x370bbd);if(_0x363729===_0x452ead(0x131)){const _0x2da9fe=await _0x599920[_0x452ead(0xf7)](_0x40fb1d['id']);(!_0x2da9fe||!_0x2da9fe[_0x452ead(0x12b)]&&_0x2da9fe[_0x452ead(0x12b)]!==!![])&&await _0x599920[_0x452ead(0xd5)](_0x40fb1d['id'],!![]),lastActions[_0x2f89b0]=_0x18bb4f;}}async function findRelatedId(_0x1e2d45,_0x30e4cd,_0x2a7d89='setpoint'){const _0x256d0e=a1_0x492339;if(_0x2a7d89===_0x256d0e(0xe5)&&_0x1e2d45[_0x256d0e(0xa8)][_0x256d0e(0x104)]){let _0x6584d7=_0x1e2d45[_0x256d0e(0xa8)][_0x256d0e(0x104)];if(typeof _0x6584d7===_0x256d0e(0x114))try{_0x6584d7=JSON['parse'](_0x6584d7);}catch(_0xb0f79){}if(_0x6584d7&&_0x6584d7[_0x30e4cd])return _0x6584d7[_0x30e4cd];}if(_0x2a7d89==='valve'&&_0x1e2d45[_0x256d0e(0xa8)]['valveMapping']){let _0xd4c5c1=_0x1e2d45[_0x256d0e(0xa8)][_0x256d0e(0x118)];if(typeof _0xd4c5c1===_0x256d0e(0x114))try{_0xd4c5c1=JSON[_0x256d0e(0x86)](_0xd4c5c1);}catch(_0x166a6e){}if(_0xd4c5c1&&_0xd4c5c1[_0x30e4cd])return _0xd4c5c1[_0x30e4cd];}let _0x4f9b67=[];if(_0x2a7d89==='setpoint')_0x4f9b67=[{'s':_0x256d0e(0xb7),'t':_0x256d0e(0x96)},{'s':'.1.TEMPERATURE','t':_0x256d0e(0x96)},{'s':'.1.TEMPERATURE','t':_0x256d0e(0xdd)},{'s':_0x256d0e(0x105),'t':_0x256d0e(0xc5)},{'s':_0x256d0e(0x116),'t':_0x256d0e(0xa0)},{'s':_0x256d0e(0x116),'t':_0x256d0e(0xa3)},{'s':_0x256d0e(0xf3),'t':_0x256d0e(0x144)},{'s':_0x256d0e(0xbb),'t':'SET'},{'s':_0x256d0e(0xbe),'t':'Soll'},{'s':_0x256d0e(0xf3),'t':'setpoint'}];else _0x2a7d89==='valve'&&(_0x4f9b67=[{'s':_0x256d0e(0xb7),'t':'.1.LEVEL'},{'s':_0x256d0e(0x9e),'t':'.1.LEVEL'},{'s':'.1.TEMPERATURE','t':'.4.VALVE_STATE'},{'s':_0x256d0e(0x116),'t':_0x256d0e(0x121)},{'s':_0x256d0e(0xf3),'t':_0x256d0e(0x82)},{'s':_0x256d0e(0xf3),'t':_0x256d0e(0xea)}]);for(const _0x39c43c of _0x4f9b67){if(_0x30e4cd[_0x256d0e(0x123)](_0x39c43c['s'])){const _0x3ba7e6=_0x30e4cd[_0x256d0e(0xb3)](_0x39c43c['s'],_0x39c43c['t']),_0x444245=await _0x1e2d45[_0x256d0e(0xdb)](_0x3ba7e6);if(_0x444245)return _0x3ba7e6;}}try{const _0x51848e=_0x30e4cd[_0x256d0e(0xd8)]('.');if(_0x51848e[_0x256d0e(0xf8)]>0x2){const _0x5b3850=_0x51848e[_0x256d0e(0x94)](0x0,-0x1)[_0x256d0e(0x11d)]('.'),_0xa5c6b9=await _0x1e2d45[_0x256d0e(0x113)](_0x5b3850+'.*'),_0x18e7d2=[],_0xe86070=_0x30e4cd['split'](/[._]+/)[_0x256d0e(0xd2)](_0x175ca1=>!['openknx','0',_0x256d0e(0x89),'ist',_0x256d0e(0xa2),_0x256d0e(0xf3),_0x256d0e(0xab),_0x256d0e(0xad),'messwert',_0x256d0e(0x13d)][_0x256d0e(0x123)](_0x175ca1[_0x256d0e(0xc8)]()));for(const [_0x579e4b,_0x2011ad]of Object['entries'](_0xa5c6b9)){if(_0x579e4b===_0x30e4cd)continue;if(_0x2011ad&&_0x2011ad[_0x256d0e(0xcc)]){const _0x159287=_0x579e4b[_0x256d0e(0xc8)](),_0x32f665=(_0x2011ad[_0x256d0e(0xcc)][_0x256d0e(0xfb)]||'')[_0x256d0e(0xc8)](),_0xb9a977=(_0x2011ad[_0x256d0e(0xcc)][_0x256d0e(0x124)]||'')[_0x256d0e(0xc8)]();let _0x25d0fa=![];if(_0x2a7d89==='setpoint'&&_0x2011ad[_0x256d0e(0xcc)][_0x256d0e(0xa9)]===!![])_0x25d0fa=_0x159287['includes'](_0x256d0e(0x108))||_0x159287[_0x256d0e(0x123)](_0x256d0e(0x13f))||_0x159287[_0x256d0e(0x123)](_0x256d0e(0xc9))||_0x32f665['includes']('level.temperature')||_0x32f665[_0x256d0e(0x123)](_0x256d0e(0x92));else _0x2a7d89===_0x256d0e(0xf6)&&(_0x25d0fa=_0x159287[_0x256d0e(0x123)]('level')||_0x159287[_0x256d0e(0x123)](_0x256d0e(0xf6))||_0x159287[_0x256d0e(0x123)](_0x256d0e(0xe4))||_0x159287['includes'](_0x256d0e(0x129))||_0x32f665['includes']('level.valve')||_0x32f665[_0x256d0e(0x123)](_0x256d0e(0x10d))||_0xb9a977['includes']('%'));if(_0x25d0fa){const _0x2439d0=_0x579e4b[_0x256d0e(0xd8)](/[._]+/)[_0x256d0e(0x8c)](_0x5e7ae5=>_0x5e7ae5[_0x256d0e(0xc8)]());let _0x5b89e2=0x0;_0xe86070[_0x256d0e(0xf2)](_0x14885d=>{const _0x1b002c=_0x256d0e;if(_0x2439d0[_0x1b002c(0x123)](_0x14885d[_0x1b002c(0xc8)]()))_0x5b89e2++;}),_0x18e7d2['push']({'id':_0x579e4b,'score':_0x5b89e2});}}}if(_0x18e7d2[_0x256d0e(0xf8)]>0x0){_0x18e7d2[_0x256d0e(0xfd)]((_0x48e366,_0x54a8fa)=>_0x54a8fa[_0x256d0e(0xdc)]-_0x48e366[_0x256d0e(0xdc)]);if(_0x18e7d2[0x0][_0x256d0e(0xdc)]>0x0)return _0x18e7d2[0x0]['id'];}}}catch(_0x49c659){}return null;}function a1_0x89a2(_0x3c77c6,_0x4d3c1b){const _0x50891f=a1_0x3f45();return a1_0x89a2=function(_0xf0040e,_0x54d015){_0xf0040e=_0xf0040e-0x81;let _0x3f45d7=_0x50891f[_0xf0040e];return _0x3f45d7;},a1_0x89a2(_0x3c77c6,_0x4d3c1b);}async function scanThermostats(_0x12409a){const _0x154fca=a1_0x492339,_0x26b6c9=_0x12409a[_0x154fca(0xa8)]['devices']||[],_0x1c55f3=[],_0x4fecbb=_0x26b6c9['filter'](_0xb2f00e=>_0xb2f00e['id']&&_0xb2f00e['id'][_0x154fca(0x123)]('temperature')||_0xb2f00e[_0x154fca(0xde)]&&['temperature',_0x154fca(0xbf),_0x154fca(0xad)][_0x154fca(0x123)](_0xb2f00e['type'])||_0xb2f00e[_0x154fca(0xd3)]&&_0xb2f00e[_0x154fca(0xd3)][_0x154fca(0xc8)]()[_0x154fca(0x123)](_0x154fca(0xb6)));for(const _0x48111b of _0x4fecbb){const _0x2f01a8=await findRelatedId(_0x12409a,_0x48111b['id'],_0x154fca(0xe5)),_0x537f13=await findRelatedId(_0x12409a,_0x48111b['id'],_0x154fca(0xf6));let _0x252872='Nicht\x20gefunden',_0x493363=![],_0x1f3f33=_0x12409a[_0x154fca(0xa8)][_0x154fca(0x104)]||{};if(typeof _0x1f3f33==='string')try{_0x1f3f33=JSON['parse'](_0x1f3f33);}catch(_0x3ddc13){}let _0x2c61a7=_0x12409a[_0x154fca(0xa8)]['valveMapping']||{};if(typeof _0x2c61a7==='string')try{_0x2c61a7=JSON[_0x154fca(0x86)](_0x2c61a7);}catch(_0x4ea828){}if(_0x1f3f33[_0x48111b['id']]&&_0x1f3f33[_0x48111b['id']]===_0x2f01a8||_0x2c61a7[_0x48111b['id']]&&_0x2c61a7[_0x48111b['id']]===_0x537f13)_0x252872=_0x154fca(0xf0),_0x493363=!![];else(_0x2f01a8||_0x537f13)&&(_0x252872=_0x154fca(0x128));_0x1c55f3[_0x154fca(0xb1)]({'room':_0x48111b['location']||_0x154fca(0x120),'sensorId':_0x48111b['id'],'setpointId':_0x2f01a8||'-','valveId':_0x537f13||'-','source':_0x252872,'isManual':_0x493363,'status':_0x2f01a8&&_0x537f13?'PERFECT':_0x2f01a8?'OK':'Fehlt'});}return _0x1c55f3['sort']((_0x25acf9,_0x605527)=>_0x25acf9['room'][_0x154fca(0xac)](_0x605527[_0x154fca(0x83)]));}async function updateSchedulePreview(_0x5850d6){const _0x11b171=a1_0x492339;if(!_0x5850d6[_0x11b171(0xa8)][_0x11b171(0x115)]||!_0x5850d6[_0x11b171(0xa8)][_0x11b171(0x8b)])return;let _0x37bbc8={};try{const _0x3f9bfd=await _0x5850d6[_0x11b171(0xda)](_0x11b171(0xe0));if(_0x3f9bfd&&_0x3f9bfd[_0x11b171(0x12b)])_0x37bbc8=JSON['parse'](_0x3f9bfd[_0x11b171(0x12b)]);}catch(_0x4f1f0f){}const _0x570560=[],_0x2cf137=Date[_0x11b171(0xcb)](),_0x371b8e=0x30*0x3c*0x3c*0x3e8;try{const _0x32d1dd=await _0x5850d6[_0x11b171(0xf7)](_0x5850d6[_0x11b171(0xa8)][_0x11b171(0x8b)]+_0x11b171(0x134));if(!_0x32d1dd||!_0x32d1dd[_0x11b171(0x12b)])return;const _0x4e565b=JSON[_0x11b171(0x86)](_0x32d1dd[_0x11b171(0x12b)]),_0x3a08e7=_0x5850d6[_0x11b171(0xa8)][_0x11b171(0x132)]||[],_0x3a0938=_0x5850d6['config']['devices']||[],_0x35bd78=new Set();_0x3a0938[_0x11b171(0xf2)](_0x3baff9=>{const _0x11ff14=_0x11b171;if(_0x3baff9['location'])_0x35bd78['add'](_0x3baff9[_0x11ff14(0x95)]);});for(const _0x2c36e2 of _0x4e565b){if(_0x2c36e2[_0x11b171(0xc1)]&&_0x3a08e7['length']>0x0&&!_0x3a08e7[_0x11b171(0x123)](_0x2c36e2['_calName']))continue;const _0x23ded8=_0x2c36e2[_0x11b171(0xa4)]||_0x2c36e2[_0x11b171(0x13e)]||_0x2c36e2[_0x11b171(0xaa)];if(!_0x23ded8)continue;const _0x4c75dc=new Date(_0x23ded8),_0x13442b=_0x4c75dc[_0x11b171(0x141)]();if(isNaN(_0x13442b))continue;if(_0x13442b<_0x2cf137)continue;if(_0x13442b>_0x2cf137+_0x371b8e)continue;const _0x5d4918=(_0x2c36e2['event']||_0x2c36e2['summary']||'')[_0x11b171(0xc8)]();let _0x37a957=![],_0x39e523=[],_0x1f1716=_0x2c36e2[_0x11b171(0x139)]||_0x2c36e2[_0x11b171(0x111)]||_0x11b171(0x120);if(_0x5d4918[_0x11b171(0x123)](_0x11b171(0x10a))||_0x5d4918[_0x11b171(0x123)](_0x11b171(0xed))||_0x5d4918[_0x11b171(0x123)]('ankunft'))_0x37a957=!![],_0x39e523=Array[_0x11b171(0x11e)](_0x35bd78);else for(const _0x27a450 of _0x35bd78){if(_0x5d4918[_0x11b171(0x123)](_0x27a450[_0x11b171(0xc8)]()))_0x39e523['push'](_0x27a450);}_0x39e523[_0x11b171(0xf8)]>0x0&&_0x39e523[_0x11b171(0xf2)](_0x3838be=>{const _0x4858c2=_0x11b171;let _0x7a2bb9=0x3c;if(_0x37a957){let _0x3f78fb=0x0;Object[_0x4858c2(0xb2)](_0x37bbc8)[_0x4858c2(0xf2)](_0x3b4b79=>{if(_0x3b4b79>_0x3f78fb)_0x3f78fb=_0x3b4b79;}),_0x7a2bb9=_0x3f78fb>0x0?_0x3f78fb:0x78;}else _0x7a2bb9=getWarmupRobust(_0x37bbc8,_0x3838be);const _0x32ab1f=new Date(_0x13442b-_0x7a2bb9*0xea60);_0x570560[_0x4858c2(0xb1)]({'eventTime':_0x13442b,'triggerTime':_0x32ab1f['getTime'](),'room':_0x3838be,'minutes':_0x7a2bb9,'reason':_0x1f1716,'isGlobal':_0x37a957});});}}catch(_0x23e668){}_0x570560[_0x11b171(0xfd)]((_0x4a3609,_0x2e49d9)=>_0x4a3609[_0x11b171(0x99)]-_0x2e49d9[_0x11b171(0x99)]);const _0x37b517=_0x570560[_0x11b171(0x94)](0x0,0x5);await _0x5850d6[_0x11b171(0x138)](_0x11b171(0x107),{'val':JSON[_0x11b171(0x8e)](_0x37b517),'ack':!![]});}async function monitorEnforcements(_0x2c0482){const _0x500bdb=a1_0x492339;try{const _0x2f3e49=_0x500bdb(0x112),_0x85e6f4=await _0x2c0482[_0x500bdb(0xda)](_0x2f3e49);if(!_0x85e6f4||!_0x85e6f4[_0x500bdb(0x12b)])return;let _0x125f77=[];try{_0x125f77=JSON[_0x500bdb(0x86)](_0x85e6f4[_0x500bdb(0x12b)]);}catch(_0x45ba9e){return;}if(!Array['isArray'](_0x125f77)||_0x125f77[_0x500bdb(0xf8)]===0x0)return;const _0x466151=Date[_0x500bdb(0xcb)](),_0x21dc1d=_0x2c0482[_0x500bdb(0xa8)][_0x500bdb(0xe8)]||[];let _0x27bae9=![];for(let _0x3fe31b=_0x125f77[_0x500bdb(0xf8)]-0x1;_0x3fe31b>=0x0;_0x3fe31b--){const _0x4b7f48=_0x125f77[_0x3fe31b];if(_0x466151>=_0x4b7f48[_0x500bdb(0x12d)]){_0x2c0482['log'][_0x500bdb(0x12a)](_0x500bdb(0x110)+_0x4b7f48[_0x500bdb(0x83)]+'\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.'),_0x125f77['splice'](_0x3fe31b,0x1),_0x27bae9=!![];continue;}const _0x33410f=_0x21dc1d[_0x500bdb(0xc6)](_0xd56531=>normalize(_0xd56531[_0x500bdb(0x95)])===normalize(_0x4b7f48[_0x500bdb(0x83)])&&(_0xd56531[_0x500bdb(0xde)]===_0x500bdb(0xf3)||_0xd56531[_0x500bdb(0xde)]===_0x500bdb(0xbf)));if(_0x33410f){const _0x15778d=await findRelatedId(_0x2c0482,_0x33410f['id'],_0x500bdb(0xe5));if(_0x15778d){const _0x5a7ed1=await _0x2c0482[_0x500bdb(0xf7)](_0x15778d);_0x5a7ed1&&typeof _0x5a7ed1['val']===_0x500bdb(0xd9)&&(_0x5a7ed1[_0x500bdb(0x12b)]<0xf&&(_0x2c0482['log'][_0x500bdb(0x140)](_0x500bdb(0xb5)+_0x4b7f48['room']+_0x500bdb(0xe1)+_0x5a7ed1[_0x500bdb(0x12b)]+_0x500bdb(0x137)+_0x4b7f48[_0x500bdb(0xc9)]+'Â°C.'),await _0x2c0482['setForeignStateAsync'](_0x15778d,_0x4b7f48[_0x500bdb(0xc9)]),await logAutomationAction(_0x2c0482,_0x500bdb(0xd4)+_0x4b7f48[_0x500bdb(0x83)]+':\x20'+_0x5a7ed1[_0x500bdb(0x12b)]+_0x500bdb(0x10e)+_0x4b7f48['target']+'Â°C\x20(Kalender-Schutz)')));}}}_0x27bae9&&await _0x2c0482['setStateAsync'](_0x2f3e49,{'val':JSON['stringify'](_0x125f77),'ack':!![]});}catch(_0x187d6b){_0x2c0482[_0x500bdb(0x8f)]['error'](_0x500bdb(0x8a)+_0x187d6b[_0x500bdb(0x136)]);}}async function checkCalendarTriggers(_0x14201f){const _0x5827bc=a1_0x492339;if(!_0x14201f[_0x5827bc(0xa8)][_0x5827bc(0x115)]||!_0x14201f[_0x5827bc(0xa8)][_0x5827bc(0x8b)])return;await updateSchedulePreview(_0x14201f);let _0x5a5f3c={},_0x26df2d={};try{const _0x14db83=await _0x14201f[_0x5827bc(0xda)](_0x5827bc(0xe0));if(_0x14db83&&_0x14db83[_0x5827bc(0x12b)])_0x5a5f3c=JSON[_0x5827bc(0x86)](_0x14db83[_0x5827bc(0x12b)]);const _0x10b998=await _0x14201f['getStateAsync'](_0x5827bc(0x9c));if(_0x10b998&&_0x10b998[_0x5827bc(0x12b)])_0x26df2d=JSON[_0x5827bc(0x86)](_0x10b998[_0x5827bc(0x12b)]);}catch(_0x2755c3){}let _0x3ca9b7={'default':0x15};try{const _0x22d0b6=await _0x14201f[_0x5827bc(0xda)](_0x5827bc(0xcd));if(_0x22d0b6&&_0x22d0b6['val'])_0x3ca9b7=JSON['parse'](_0x22d0b6[_0x5827bc(0x12b)]);}catch(_0x86802c){}let _0xa053aa=[];try{const _0x1a717b=await _0x14201f[_0x5827bc(0xda)]('analysis.energy.activeEnforcements');if(_0x1a717b&&_0x1a717b[_0x5827bc(0x12b)])_0xa053aa=JSON[_0x5827bc(0x86)](_0x1a717b[_0x5827bc(0x12b)]);}catch(_0x5153f6){}try{const _0x26e0ab=await _0x14201f[_0x5827bc(0xf7)](_0x14201f[_0x5827bc(0xa8)][_0x5827bc(0x8b)]+_0x5827bc(0x134));if(!_0x26e0ab||!_0x26e0ab[_0x5827bc(0x12b)])return;const _0x469620=JSON[_0x5827bc(0x86)](_0x26e0ab[_0x5827bc(0x12b)]),_0x2c3f61=Date['now'](),_0x27a73b=_0x14201f[_0x5827bc(0xa8)][_0x5827bc(0xe8)]||[],_0x1a11fc=_0x14201f[_0x5827bc(0xa8)]['calendarSelection']||[];let _0xb240ce=![];for(const _0x4b11a7 of _0x469620){if(_0x4b11a7[_0x5827bc(0xc1)]&&_0x1a11fc[_0x5827bc(0xf8)]>0x0&&!_0x1a11fc[_0x5827bc(0x123)](_0x4b11a7[_0x5827bc(0xc1)]))continue;const _0x12470c=_0x4b11a7[_0x5827bc(0xa4)]||_0x4b11a7[_0x5827bc(0x13e)]||_0x4b11a7[_0x5827bc(0xaa)];if(!_0x12470c)continue;const _0x3aef9a=new Date(_0x12470c);if(isNaN(_0x3aef9a[_0x5827bc(0x141)]()))continue;const _0xc2bb63=(_0x4b11a7[_0x5827bc(0x139)]||_0x4b11a7[_0x5827bc(0x111)]||'')['toLowerCase']();if(_0xc2bb63['includes'](_0x5827bc(0x10a))||_0xc2bb63[_0x5827bc(0x123)](_0x5827bc(0xed))||_0xc2bb63[_0x5827bc(0x123)](_0x5827bc(0xb9))){let _0x272bdf=0x0;Object[_0x5827bc(0xb2)](_0x5a5f3c)[_0x5827bc(0xf2)](_0x13997b=>{if(_0x13997b>_0x272bdf)_0x272bdf=_0x13997b;});if(_0x272bdf===0x0)_0x272bdf=0x78;const _0x23e70a=_0x3aef9a[_0x5827bc(0x141)]()-_0x272bdf*0xea60;_0x2c3f61>=_0x23e70a&&_0x2c3f61<_0x3aef9a['getTime']()&&(_0x14201f[_0x5827bc(0x9b)]!=='normal'&&(_0x14201f[_0x5827bc(0x8f)][_0x5827bc(0x12a)](_0x5827bc(0x13c)+_0x272bdf+'\x20min).'),await _0x14201f[_0x5827bc(0x138)](_0x5827bc(0x97),{'val':'normal','ack':![]})));}for(const _0x4537e6 of _0x27a73b){if(_0x4537e6['location']){const _0x3487e2=_0x4537e6[_0x5827bc(0x95)]['toLowerCase'](),_0x4aa920=(_0x4537e6['name']||'')[_0x5827bc(0xc8)]();let _0x54fb57=_0xc2bb63[_0x5827bc(0x123)](_0x3487e2);!_0x54fb57&&_0x4aa920[_0x5827bc(0xf8)]>0x3&&_0xc2bb63[_0x5827bc(0x123)](_0x4aa920)&&(_0x54fb57=!![]);if(_0x54fb57){const _0x37e345=getWarmupRobust(_0x5a5f3c,_0x4537e6[_0x5827bc(0x95)]),_0x1d4203=_0x26df2d[_0x4537e6[_0x5827bc(0x95)]]||_0x5827bc(0xbd),_0x188963=_0x3aef9a[_0x5827bc(0x141)]()-_0x37e345*0xea60;if(_0x2c3f61>=_0x188963&&_0x2c3f61<_0x3aef9a['getTime']()){const _0x468d0a=lastActions[_0x5827bc(0x8d)+_0x4537e6[_0x5827bc(0x95)]];if(_0x468d0a&&_0x2c3f61-_0x468d0a<CAL_COOLDOWN_MS)continue;const _0x1d6f6d=await findRelatedId(_0x14201f,_0x4537e6['id'],_0x5827bc(0xe5));if(_0x1d6f6d){let _0x2e89cf=_0x3ca9b7[_0x4537e6[_0x5827bc(0x95)]];if(_0x2e89cf===undefined)_0x2e89cf=_0x3ca9b7[_0x5827bc(0xec)];if(_0x2e89cf===undefined)_0x2e89cf=0x15;const _0x284804=await _0x14201f[_0x5827bc(0xf7)](_0x1d6f6d);if(_0x284804&&typeof _0x284804['val']==='number'&&_0x284804['val']<_0x2e89cf-0.5){_0x14201f[_0x5827bc(0x8f)][_0x5827bc(0x12a)](_0x5827bc(0x101)+_0x1d4203+_0x5827bc(0xaf)+_0x4537e6[_0x5827bc(0x95)]+_0x5827bc(0xba)+_0xc2bb63+_0x5827bc(0xe7)+_0x2e89cf+_0x5827bc(0x87)+_0x37e345+_0x5827bc(0xd6)),await _0x14201f[_0x5827bc(0xd5)](_0x1d6f6d,_0x2e89cf),await logAutomationAction(_0x14201f,_0x5827bc(0x84)+_0x4537e6[_0x5827bc(0x95)]+_0x5827bc(0xbc)+_0x2e89cf+'Â°C\x20(via\x20'+_0x1d4203+')'),lastActions['cal_'+_0x4537e6[_0x5827bc(0x95)]]=_0x2c3f61;const _0x5b5187=_0xa053aa[_0x5827bc(0xe2)](_0x3f09be=>_0x3f09be[_0x5827bc(0x83)]===_0x4537e6[_0x5827bc(0x95)]);if(_0x5b5187!==-0x1)_0xa053aa['splice'](_0x5b5187,0x1);_0xa053aa[_0x5827bc(0xb1)]({'room':_0x4537e6[_0x5827bc(0x95)],'target':_0x2e89cf,'until':_0x3aef9a[_0x5827bc(0x141)]()}),_0xb240ce=!![];}}}}}}}_0xb240ce&&await _0x14201f[_0x5827bc(0x138)](_0x5827bc(0x112),{'val':JSON[_0x5827bc(0x8e)](_0xa053aa),'ack':!![]});}catch(_0x9acfc6){_0x14201f[_0x5827bc(0x8f)][_0x5827bc(0x140)](_0x5827bc(0x127)+_0x9acfc6['message']);}}async function manageMpcIntervention(_0x899cb0,_0x8db92d,_0x43b22c){const _0x54f095=a1_0x492339;try{const _0x41dc15=_0x54f095(0x90),_0xe880e=await _0x899cb0['getStateAsync'](_0x41dc15);let _0x580ce2=[];if(_0xe880e&&_0xe880e[_0x54f095(0x12b)])try{_0x580ce2=JSON['parse'](_0xe880e[_0x54f095(0x12b)]);}catch(_0x15afb2){}const _0x318c95=_0x580ce2['indexOf'](_0x8db92d);if(_0x43b22c===_0x54f095(0x9a))_0x318c95===-0x1&&(_0x580ce2['push'](_0x8db92d),await _0x899cb0[_0x54f095(0x138)](_0x41dc15,{'val':JSON['stringify'](_0x580ce2),'ack':!![]}));else _0x43b22c===_0x54f095(0xc7)&&(_0x318c95!==-0x1&&(_0x580ce2['splice'](_0x318c95,0x1),await _0x899cb0[_0x54f095(0x138)](_0x41dc15,{'val':JSON[_0x54f095(0x8e)](_0x580ce2),'ack':!![]})));}catch(_0x4eea61){}}async function cleanupGhostInterventions(_0x150140){const _0x397926=a1_0x492339;try{const _0x97fc6e=_0x397926(0x90),_0x2f3fdc=await _0x150140[_0x397926(0xda)](_0x97fc6e);if(!_0x2f3fdc||!_0x2f3fdc[_0x397926(0x12b)])return;const _0x337177=JSON[_0x397926(0x86)](_0x2f3fdc[_0x397926(0x12b)]);if(!Array['isArray'](_0x337177)||_0x337177['length']===0x0)return;let _0x4e4b45={'default':0x15};try{const _0x1f3b07=await _0x150140[_0x397926(0xda)](_0x397926(0xcd));if(_0x1f3b07&&_0x1f3b07[_0x397926(0x12b)])_0x4e4b45=JSON[_0x397926(0x86)](_0x1f3b07['val']);}catch(_0x5c6456){}let _0x5b4930=[];try{const _0x94b904=await _0x150140['getStateAsync'](_0x397926(0xb0));if(_0x94b904&&_0x94b904[_0x397926(0x12b)])_0x5b4930=JSON[_0x397926(0x86)](_0x94b904[_0x397926(0x12b)]);}catch(_0x54b5df){}let _0x5661ec={},_0xb95c2b=![];try{const _0x5af2f9=await _0x150140[_0x397926(0xda)](_0x397926(0xdf));if(_0x5af2f9&&_0x5af2f9[_0x397926(0x12b)])_0x5661ec=JSON[_0x397926(0x86)](_0x5af2f9[_0x397926(0x12b)]);}catch(_0x5b1348){}if(_0x5661ec['_meta']){const _0x587418=Date[_0x397926(0xcb)]();for(const [_0x4c1454,_0xbe918]of Object[_0x397926(0x130)](_0x5661ec[_0x397926(0x11c)])){_0x587418-_0xbe918>PENALTY_TTL&&(delete _0x5661ec[_0x4c1454],delete _0x5661ec[_0x397926(0x11c)][_0x4c1454],_0xb95c2b=!![],_0x150140[_0x397926(0x8f)][_0x397926(0x12a)]('ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27'+_0x4c1454+_0x397926(0x125)));}}const _0xc7001b=_0x150140[_0x397926(0xa8)][_0x397926(0xe8)]||[];let _0x429355=![];for(let _0x9c39c3=_0x337177['length']-0x1;_0x9c39c3>=0x0;_0x9c39c3--){const _0xcb305=_0x337177[_0x9c39c3],_0x5daab9=_0xc7001b['find'](_0x3924d0=>normalize(_0x3924d0[_0x397926(0x95)])===normalize(_0xcb305)&&(_0x3924d0[_0x397926(0xde)]==='temperature'||_0x3924d0['type']==='thermostat'));if(!_0x5daab9){_0x150140[_0x397926(0x8f)][_0x397926(0x140)](_0x397926(0x100)+_0xcb305+_0x397926(0x109)),_0x337177[_0x397926(0x103)](_0x9c39c3,0x1),_0x429355=!![];continue;}if(_0x5daab9){const _0x312f2f=await findRelatedId(_0x150140,_0x5daab9['id'],_0x397926(0xe5)),_0x57b21d=await _0x150140[_0x397926(0xf7)](_0x5daab9['id']);if(_0x312f2f){const _0x5a12e5=await _0x150140[_0x397926(0xf7)](_0x312f2f);if(_0x5a12e5&&typeof _0x5a12e5[_0x397926(0x12b)]===_0x397926(0xd9)){let _0x1a206c=![],_0x52c9e7='';Math['abs'](_0x5a12e5['val']-ECO_TEMP)>0.5&&(_0x1a206c=!![],_0x52c9e7=_0x397926(0xa1));if(!_0x1a206c&&_0x57b21d&&typeof _0x57b21d[_0x397926(0x12b)]===_0x397926(0xd9)){const _0x5cbd59=_0x4e4b45[_0xcb305]||_0x4e4b45[_0x397926(0xec)]||0x15;_0x57b21d[_0x397926(0x12b)]<_0x5cbd59+0.2&&(_0x1a206c=!![],_0x52c9e7=_0x397926(0x93));}if(_0x1a206c){if(_0x52c9e7==='manual'){_0x150140['log'][_0x397926(0x12a)](_0x397926(0xb4)+_0xcb305+_0x397926(0xca)+_0x5a12e5[_0x397926(0x12b)]+_0x397926(0xc0)+ECO_TEMP+'Â°C).\x20Entferne\x20Status.');const _0x4f29ee=lastActions[_0x397926(0x8d)+_0xcb305],_0xeb31d2=_0x4f29ee&&Date['now']()-_0x4f29ee<0x2*0x3c*0x3e8;if(!_0xeb31d2&&_0x5a12e5[_0x397926(0x12b)]>ECO_TEMP+0.5){_0x150140[_0x397926(0x11b)]&&(_0x150140[_0x397926(0x8f)][_0x397926(0x12a)](_0x397926(0xb8)+_0xcb305+_0x397926(0xd1)),_0x150140['sendToPythonWrapper'](_0x397926(0x117),{'room':_0xcb305}));const _0x144630=_0xcb305+'_'+new Date()[_0x397926(0xf9)]();if(!_0x5661ec[_0x144630]){_0x5661ec[_0x144630]=0x1;if(!_0x5661ec[_0x397926(0x11c)])_0x5661ec[_0x397926(0x11c)]={};_0x5661ec['_meta'][_0x144630]=Date['now'](),_0xb95c2b=!![];}}else _0xeb31d2&&_0x150140['log'][_0x397926(0x12a)](_0x397926(0x9f)+_0xcb305+_0x397926(0x10b));}else{if(_0x52c9e7==='too_cold'){let _0x2bb943=![];if(_0x5b4930[_0x397926(0xc6)](_0x5e9a2c=>_0x5e9a2c['room']===_0xcb305))_0x2bb943=!![];const _0x55b2b2=_0xc7001b['filter'](_0x5ed6ec=>normalize(_0x5ed6ec['location'])===normalize(_0xcb305)&&(_0x5ed6ec[_0x397926(0xde)]===_0x397926(0x10f)||_0x5ed6ec['type']===_0x397926(0xad)||_0x5ed6ec[_0x397926(0xde)]==='contact'));for(const _0xff6778 of _0x55b2b2){try{const _0x8b4c5f=await _0x150140['getForeignStateAsync'](_0xff6778['id']);if(_0x8b4c5f&&(_0x8b4c5f[_0x397926(0x12b)]===!![]||_0x8b4c5f[_0x397926(0x12b)]===0x1||String(_0x8b4c5f[_0x397926(0x12b)])[_0x397926(0xc8)]()===_0x397926(0x98)))_0x2bb943=!![];}catch(_0x3832f0){}}if(_0x2bb943)_0x150140[_0x397926(0x8f)]['info'](_0x397926(0xd0)+_0xcb305+'\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.');else{const _0x21fd59=_0x4e4b45[_0xcb305]||_0x4e4b45[_0x397926(0xec)]||0x15;_0x150140['log'][_0x397926(0x12a)](_0x397926(0x11f)+_0xcb305+'\x20erreicht\x20Limit\x20('+_0x57b21d[_0x397926(0x12b)]+_0x397926(0x122)+(_0x21fd59+0.2)+_0x397926(0x9d)),await _0x150140['setForeignStateAsync'](_0x312f2f,_0x21fd59),await logAutomationAction(_0x150140,'[WATCHDOG]\x20'+_0xcb305+_0x397926(0x12c)+_0x21fd59+'Â°C'),lastActions[_0x397926(0xae)+_0xcb305]=Date[_0x397926(0xcb)]();}}}_0x337177[_0x397926(0x103)](_0x9c39c3,0x1),_0x429355=!![];}}}}}_0x429355&&await _0x150140[_0x397926(0x138)](_0x97fc6e,{'val':JSON['stringify'](_0x337177),'ack':!![]}),_0xb95c2b&&await _0x150140[_0x397926(0x138)]('analysis.energy.rlPenalties',{'val':JSON[_0x397926(0x8e)](_0x5661ec),'ack':!![]});}catch(_0x15ef8c){}}async function applyEnergySavings(_0x499c81,_0x51952c){const _0x1456ca=a1_0x492339;await cleanupGhostInterventions(_0x499c81);if(!_0x51952c||_0x51952c[_0x1456ca(0xf8)]===0x0)return;const _0x26a1ac=_0x499c81['config'][_0x1456ca(0xe8)]||[],_0x1fe392=Date[_0x1456ca(0xcb)]();for(const _0x58660e of _0x51952c){const _0x312f9e=_0x58660e[_0x1456ca(0x83)],_0x4de578=_0x58660e[_0x1456ca(0xe3)],_0x20d823=_0x58660e['target']||0x15;if(lastActions[_0x1456ca(0xae)+_0x312f9e]&&_0x1fe392-lastActions[_0x1456ca(0xae)+_0x312f9e]<RESCUE_LOCK_MS)continue;const _0x33f068=_0x26a1ac[_0x1456ca(0xc6)](_0x4e8997=>normalize(_0x4e8997['location'])===normalize(_0x312f9e)&&(_0x4e8997['type']===_0x1456ca(0xf3)||_0x4e8997[_0x1456ca(0xde)]==='thermostat'));if(!_0x33f068)continue;const _0x22ce18=await findRelatedId(_0x499c81,_0x33f068['id'],_0x1456ca(0xe5));if(_0x22ce18){if(lastActions[_0x1456ca(0x145)+_0x312f9e]&&_0x1fe392-lastActions['mpc_'+_0x312f9e]<0x1e*0x3c*0x3e8)continue;const _0x1d5f3c=await _0x499c81[_0x1456ca(0xf7)](_0x22ce18);if(_0x1d5f3c&&typeof _0x1d5f3c['val']==='number'){const _0x5b1ad4=_0x1d5f3c[_0x1456ca(0x12b)];_0x5b1ad4!==ECO_TEMP&&await manageMpcIntervention(_0x499c81,_0x312f9e,'remove');if(_0x4de578>0x1e)_0x5b1ad4>ECO_TEMP+0.5&&(_0x499c81[_0x1456ca(0x8f)][_0x1456ca(0x12a)](_0x1456ca(0xc3)+_0x312f9e+_0x1456ca(0xe1)+ECO_TEMP+_0x1456ca(0xcf)+_0x4de578+_0x1456ca(0x13a)),await _0x499c81[_0x1456ca(0xd5)](_0x22ce18,ECO_TEMP),await manageMpcIntervention(_0x499c81,_0x312f9e,_0x1456ca(0x9a)),lastActions['mpc_'+_0x312f9e]=_0x1fe392,await logAutomationAction(_0x499c81,_0x1456ca(0xa5)+_0x312f9e+':\x20Absenkung\x20auf\x20'+ECO_TEMP+'Â°C'));else _0x4de578<=0xf&&(_0x5b1ad4<_0x20d823&&(_0x499c81[_0x1456ca(0x8f)]['info'](_0x1456ca(0xf1)+_0x312f9e+'\x20wieder\x20auf\x20'+_0x20d823+_0x1456ca(0xc2)),await _0x499c81[_0x1456ca(0xd5)](_0x22ce18,_0x20d823),await manageMpcIntervention(_0x499c81,_0x312f9e,'remove'),lastActions[_0x1456ca(0x145)+_0x312f9e]=_0x1fe392,await logAutomationAction(_0x499c81,'[MPC]\x20'+_0x312f9e+_0x1456ca(0xd7)+_0x20d823+'Â°C')));}}else _0x499c81[_0x1456ca(0x8f)][_0x1456ca(0x140)](_0x1456ca(0x102)+_0x312f9e+_0x1456ca(0x135));}}module[a1_0x492339(0x133)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};