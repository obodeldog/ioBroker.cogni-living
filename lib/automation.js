const a1_0x5e6250=a1_0x2c53;(function(_0x425485,_0xa43936){const _0x4bb553=a1_0x2c53,_0x47a5f7=_0x425485();while(!![]){try{const _0x4e1950=-parseInt(_0x4bb553(0x11e))/0x1*(parseInt(_0x4bb553(0x10b))/0x2)+-parseInt(_0x4bb553(0x16a))/0x3+-parseInt(_0x4bb553(0x18c))/0x4+-parseInt(_0x4bb553(0xf4))/0x5*(parseInt(_0x4bb553(0x139))/0x6)+-parseInt(_0x4bb553(0x1af))/0x7+parseInt(_0x4bb553(0xf6))/0x8+parseInt(_0x4bb553(0x160))/0x9;if(_0x4e1950===_0xa43936)break;else _0x47a5f7['push'](_0x47a5f7['shift']());}catch(_0x2a0ea0){_0x47a5f7['push'](_0x47a5f7['shift']());}}}(a1_0x1532,0xe9bf7));const a1_0x45c7af=(function(){let _0x32151d=!![];return function(_0x550004,_0x6554da){const _0x4c1860=_0x32151d?function(){const _0x5d2985=a1_0x2c53;if(_0x6554da){const _0x5a8142=_0x6554da[_0x5d2985(0x1a6)](_0x550004,arguments);return _0x6554da=null,_0x5a8142;}}:function(){};return _0x32151d=![],_0x4c1860;};}()),a1_0x243c9c=a1_0x45c7af(this,function(){const _0x5cf87a=a1_0x2c53;return a1_0x243c9c[_0x5cf87a(0x1a5)]()[_0x5cf87a(0x165)](_0x5cf87a(0x1a2))[_0x5cf87a(0x1a5)]()[_0x5cf87a(0x151)](a1_0x243c9c)[_0x5cf87a(0x165)](_0x5cf87a(0x1a2));});a1_0x243c9c();'use strict';const aiAgent=require(a1_0x5e6250(0xf5)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0xbdaed5){const _0x48eda=a1_0x5e6250;if(!_0xbdaed5)return'';return _0xbdaed5['toLowerCase']()[_0x48eda(0x111)](/\s+/g,'')[_0x48eda(0x126)]();}function getWarmupRobust(_0x1ccc57,_0x3f8472){const _0x10a7db=a1_0x5e6250;if(!_0x1ccc57||!_0x3f8472)return 0x3c;if(_0x1ccc57[_0x3f8472]!==undefined)return _0x1ccc57[_0x3f8472];const _0x4e3520=_0x3f8472[_0x10a7db(0x14f)]()['replace'](/Ã¤/g,'ae')['replace'](/Ã¶/g,'oe')[_0x10a7db(0x111)](/Ã¼/g,'ue')[_0x10a7db(0x111)](/ÃŸ/g,'ss')[_0x10a7db(0x111)](/\s+/g,'_')['replace'](/[^a-z0-9_]/g,'');if(_0x1ccc57[_0x4e3520]!==undefined)return _0x1ccc57[_0x4e3520];return 0x3c;}async function logAutomationAction(_0x1e2c67,_0x52c1aa){const _0xaa88d5=a1_0x5e6250;await _0x1e2c67[_0xaa88d5(0x17f)](_0xaa88d5(0x161),{'val':_0x52c1aa,'ack':!![]});try{const _0x7a0023=_0xaa88d5(0x114),_0x4fa414=await _0x1e2c67[_0xaa88d5(0x182)](_0x7a0023);let _0x3de830=[];if(_0x4fa414&&_0x4fa414[_0xaa88d5(0x19e)])try{_0x3de830=JSON['parse'](_0x4fa414[_0xaa88d5(0x19e)]);}catch(_0x12df7c){}_0x3de830[_0xaa88d5(0x152)]({'ts':Date[_0xaa88d5(0x14a)](),'msg':_0x52c1aa});if(_0x3de830[_0xaa88d5(0x12a)]>0x32)_0x3de830=_0x3de830[_0xaa88d5(0x148)](0x0,0x32);await _0x1e2c67[_0xaa88d5(0x17f)](_0x7a0023,{'val':JSON['stringify'](_0x3de830),'ack':!![]});}catch(_0x32091d){}}async function handlePrediction(_0x5505e5,_0x21de57,_0x29e3a0){const _0x5a085b=a1_0x5e6250;if(!_0x21de57||_0x21de57===_0x5a085b(0x12d))return;let _0x3aa1ac=_0x5a085b(0x102),_0x36db2d=0.6;try{const _0x2afa53=await _0x5505e5[_0x5a085b(0x182)]('analysis.automation.mode');if(_0x2afa53&&_0x2afa53[_0x5a085b(0x19e)])_0x3aa1ac=_0x2afa53[_0x5a085b(0x19e)];const _0x396eda=await _0x5505e5[_0x5a085b(0x182)](_0x5a085b(0x19a));if(_0x396eda&&_0x396eda['val'])_0x36db2d=_0x396eda['val'];}catch(_0x17c218){}if(_0x3aa1ac===_0x5a085b(0x102)||_0x29e3a0<_0x36db2d)return;const _0x3ba130=Date[_0x5a085b(0x14a)]();if(lastActions[_0x21de57]&&_0x3ba130-lastActions[_0x21de57]<COOLDOWN_MS)return;const _0x63cccc=_0x5505e5['config'][_0x5a085b(0x110)]||[],_0x35af2d=normalize(_0x21de57),_0x49a68d=_0x63cccc[_0x5a085b(0x14c)](_0x54c8b8=>normalize(_0x54c8b8[_0x5a085b(0x16e)])===_0x35af2d&&(_0x54c8b8[_0x5a085b(0x19d)]===_0x5a085b(0x176)||_0x54c8b8[_0x5a085b(0x19d)]===_0x5a085b(0x112)||_0x54c8b8[_0x5a085b(0x19d)]===_0x5a085b(0x131)));if(!_0x49a68d)return;const _0x19d3e8=await aiAgent[_0x5a085b(0x150)](_0x5505e5,_0x21de57,_0x49a68d['name'],_0x29e3a0);if(!_0x19d3e8[_0x5a085b(0xff)])return;const _0x39882d='PrÃ¤diktion:\x20'+_0x21de57+_0x5a085b(0x166)+_0x49a68d[_0x5a085b(0x194)]+'\x20('+_0x19d3e8['reason']+')';await logAutomationAction(_0x5505e5,'['+_0x3aa1ac[_0x5a085b(0x1ab)]()+']\x20'+_0x39882d);if(_0x3aa1ac==='active'){const _0x3e9bba=await _0x5505e5[_0x5a085b(0x10e)](_0x49a68d['id']);(!_0x3e9bba||!_0x3e9bba['val']&&_0x3e9bba[_0x5a085b(0x19e)]!==!![])&&await _0x5505e5[_0x5a085b(0x1b1)](_0x49a68d['id'],!![]),lastActions[_0x21de57]=_0x3ba130;}}async function findRelatedId(_0x550fc5,_0x2c0565,_0x2f1b37='setpoint'){const _0x16ed60=a1_0x5e6250;if(_0x2f1b37===_0x16ed60(0x19c)&&_0x550fc5[_0x16ed60(0x189)][_0x16ed60(0x18a)]){let _0x3f7759=_0x550fc5[_0x16ed60(0x189)][_0x16ed60(0x18a)];if(typeof _0x3f7759===_0x16ed60(0x13c))try{_0x3f7759=JSON['parse'](_0x3f7759);}catch(_0x348780){}if(_0x3f7759&&_0x3f7759[_0x2c0565])return _0x3f7759[_0x2c0565];}if(_0x2f1b37===_0x16ed60(0x10d)&&_0x550fc5[_0x16ed60(0x189)]['valveMapping']){let _0xb3d6d=_0x550fc5[_0x16ed60(0x189)][_0x16ed60(0x11a)];if(typeof _0xb3d6d===_0x16ed60(0x13c))try{_0xb3d6d=JSON[_0x16ed60(0x195)](_0xb3d6d);}catch(_0x50843e){}if(_0xb3d6d&&_0xb3d6d[_0x2c0565])return _0xb3d6d[_0x2c0565];}let _0x4bd2b7=[];if(_0x2f1b37===_0x16ed60(0x19c))_0x4bd2b7=[{'s':_0x16ed60(0x104),'t':_0x16ed60(0x149)},{'s':_0x16ed60(0x181),'t':_0x16ed60(0x149)},{'s':_0x16ed60(0x181),'t':_0x16ed60(0x17b)},{'s':_0x16ed60(0xfd),'t':'SET_POINT_TEMPERATURE'},{'s':_0x16ed60(0x118),'t':_0x16ed60(0x17a)},{'s':_0x16ed60(0x118),'t':_0x16ed60(0x128)},{'s':_0x16ed60(0xf8),'t':_0x16ed60(0x137)},{'s':_0x16ed60(0x18b),'t':'SET'},{'s':_0x16ed60(0x1b5),'t':_0x16ed60(0x12f)},{'s':_0x16ed60(0xf8),'t':_0x16ed60(0x19c)}];else _0x2f1b37===_0x16ed60(0x10d)&&(_0x4bd2b7=[{'s':_0x16ed60(0x104),'t':'.1.LEVEL'},{'s':_0x16ed60(0x181),'t':_0x16ed60(0x17e)},{'s':_0x16ed60(0x181),'t':_0x16ed60(0x191)},{'s':_0x16ed60(0x118),'t':_0x16ed60(0x106)},{'s':_0x16ed60(0xf8),'t':_0x16ed60(0x18f)},{'s':_0x16ed60(0xf8),'t':_0x16ed60(0x178)}]);for(const _0x5dbbc4 of _0x4bd2b7){if(_0x2c0565[_0x16ed60(0x122)](_0x5dbbc4['s'])){const _0xde3984=_0x2c0565[_0x16ed60(0x111)](_0x5dbbc4['s'],_0x5dbbc4['t']),_0x3a50a9=await _0x550fc5[_0x16ed60(0x184)](_0xde3984);if(_0x3a50a9)return _0xde3984;}}try{const _0x389472=_0x2c0565['split']('.');if(_0x389472[_0x16ed60(0x12a)]>0x2){const _0x2ab8b6=_0x389472[_0x16ed60(0x148)](0x0,-0x1)[_0x16ed60(0x11c)]('.'),_0xa59258=await _0x550fc5['getForeignObjectsAsync'](_0x2ab8b6+'.*'),_0x35323a=[],_0xbf6efd=_0x2c0565['split'](/[._]+/)[_0x16ed60(0x192)](_0x486d2d=>![_0x16ed60(0xf7),'0',_0x16ed60(0x10f),_0x16ed60(0x107),_0x16ed60(0x19f),_0x16ed60(0xf8),_0x16ed60(0x143),_0x16ed60(0x15e),_0x16ed60(0x120),'state']['includes'](_0x486d2d['toLowerCase']()));for(const [_0x2ba83b,_0x57c8e8]of Object[_0x16ed60(0x103)](_0xa59258)){if(_0x2ba83b===_0x2c0565)continue;if(_0x57c8e8&&_0x57c8e8[_0x16ed60(0x145)]){const _0x14c9f5=_0x2ba83b[_0x16ed60(0x14f)](),_0x1d646d=(_0x57c8e8[_0x16ed60(0x145)]['role']||'')[_0x16ed60(0x14f)](),_0x14fd5b=(_0x57c8e8['common'][_0x16ed60(0x108)]||'')[_0x16ed60(0x14f)]();let _0x1672a1=![];if(_0x2f1b37==='setpoint'&&_0x57c8e8[_0x16ed60(0x145)][_0x16ed60(0x1a3)]===!![])_0x1672a1=_0x14c9f5[_0x16ed60(0x122)]('set')||_0x14c9f5[_0x16ed60(0x122)](_0x16ed60(0x177))||_0x14c9f5[_0x16ed60(0x122)]('target')||_0x1d646d[_0x16ed60(0x122)](_0x16ed60(0x144))||_0x1d646d[_0x16ed60(0x122)](_0x16ed60(0x1b0));else _0x2f1b37==='valve'&&(_0x1672a1=_0x14c9f5[_0x16ed60(0x122)](_0x16ed60(0x178))||_0x14c9f5['includes'](_0x16ed60(0x10d))||_0x14c9f5[_0x16ed60(0x122)]('stellwert')||_0x14c9f5[_0x16ed60(0x122)](_0x16ed60(0xf2))||_0x1d646d['includes'](_0x16ed60(0x116))||_0x1d646d[_0x16ed60(0x122)](_0x16ed60(0x115))||_0x14fd5b[_0x16ed60(0x122)]('%'));if(_0x1672a1){const _0xd06e41=_0x2ba83b[_0x16ed60(0x117)](/[._]+/)[_0x16ed60(0x1aa)](_0x24d992=>_0x24d992[_0x16ed60(0x14f)]());let _0x47eaba=0x0;_0xbf6efd[_0x16ed60(0x113)](_0x482629=>{const _0x36f8dd=_0x16ed60;if(_0xd06e41[_0x36f8dd(0x122)](_0x482629[_0x36f8dd(0x14f)]()))_0x47eaba++;}),_0x35323a['push']({'id':_0x2ba83b,'score':_0x47eaba});}}}if(_0x35323a[_0x16ed60(0x12a)]>0x0){_0x35323a[_0x16ed60(0x13b)]((_0x304b80,_0x55dc60)=>_0x55dc60[_0x16ed60(0x197)]-_0x304b80[_0x16ed60(0x197)]);if(_0x35323a[0x0][_0x16ed60(0x197)]>0x0)return _0x35323a[0x0]['id'];}}}catch(_0x32bb46){}return null;}async function scanThermostats(_0x75680a){const _0x4630e9=a1_0x5e6250,_0x5dc3df=_0x75680a[_0x4630e9(0x189)][_0x4630e9(0x110)]||[],_0x8dab2=[],_0x5cdf5c=_0x5dc3df[_0x4630e9(0x192)](_0x1c6837=>_0x1c6837['id']&&_0x1c6837['id']['includes'](_0x4630e9(0xf8))||_0x1c6837[_0x4630e9(0x19d)]&&[_0x4630e9(0xf8),'thermostat',_0x4630e9(0x15e)][_0x4630e9(0x122)](_0x1c6837['type'])||_0x1c6837[_0x4630e9(0x194)]&&_0x1c6837['name'][_0x4630e9(0x14f)]()[_0x4630e9(0x122)]('temp'));for(const _0x3515fb of _0x5cdf5c){const _0x3cc64b=await findRelatedId(_0x75680a,_0x3515fb['id'],_0x4630e9(0x19c)),_0x4c729c=await findRelatedId(_0x75680a,_0x3515fb['id'],_0x4630e9(0x10d));let _0x1b20d4='Nicht\x20gefunden',_0x250cd8=![],_0x47826=_0x75680a[_0x4630e9(0x189)][_0x4630e9(0x18a)]||{};if(typeof _0x47826==='string')try{_0x47826=JSON[_0x4630e9(0x195)](_0x47826);}catch(_0x191a02){}let _0x336999=_0x75680a[_0x4630e9(0x189)]['valveMapping']||{};if(typeof _0x336999===_0x4630e9(0x13c))try{_0x336999=JSON[_0x4630e9(0x195)](_0x336999);}catch(_0x200ad5){}if(_0x47826[_0x3515fb['id']]&&_0x47826[_0x3515fb['id']]===_0x3cc64b||_0x336999[_0x3515fb['id']]&&_0x336999[_0x3515fb['id']]===_0x4c729c)_0x1b20d4=_0x4630e9(0x119),_0x250cd8=!![];else(_0x3cc64b||_0x4c729c)&&(_0x1b20d4=_0x4630e9(0x193));_0x8dab2[_0x4630e9(0x183)]({'room':_0x3515fb[_0x4630e9(0x16e)]||_0x4630e9(0x146),'sensorId':_0x3515fb['id'],'setpointId':_0x3cc64b||'-','valveId':_0x4c729c||'-','source':_0x1b20d4,'isManual':_0x250cd8,'status':_0x3cc64b&&_0x4c729c?_0x4630e9(0x172):_0x3cc64b?'OK':_0x4630e9(0x196)});}return _0x8dab2[_0x4630e9(0x13b)]((_0x2fd43d,_0x32587c)=>_0x2fd43d['room']['localeCompare'](_0x32587c[_0x4630e9(0x180)]));}async function updateSchedulePreview(_0x201321){const _0xc45d03=a1_0x5e6250;if(!_0x201321[_0xc45d03(0x189)]['useCalendar']||!_0x201321[_0xc45d03(0x189)][_0xc45d03(0x159)])return;let _0xbdc568={};try{const _0xe956ef=await _0x201321[_0xc45d03(0x182)](_0xc45d03(0x14e));if(_0xe956ef&&_0xe956ef[_0xc45d03(0x19e)])_0xbdc568=JSON['parse'](_0xe956ef['val']);}catch(_0x10d303){}const _0x472ee8=[],_0x30c28b=Date[_0xc45d03(0x14a)](),_0x221e34=0x30*0x3c*0x3c*0x3e8;try{const _0x3f3784=await _0x201321[_0xc45d03(0x10e)](_0x201321[_0xc45d03(0x189)][_0xc45d03(0x159)]+_0xc45d03(0x1b7));if(!_0x3f3784||!_0x3f3784['val'])return;const _0x1f0d44=JSON['parse'](_0x3f3784['val']),_0x3cdeb8=_0x201321[_0xc45d03(0x189)][_0xc45d03(0x157)]||[],_0x489a60=_0x201321[_0xc45d03(0x189)][_0xc45d03(0x110)]||[],_0x3f0677=new Set();_0x489a60[_0xc45d03(0x113)](_0x5d0dbb=>{const _0x1583b7=_0xc45d03;if(_0x5d0dbb[_0x1583b7(0x16e)])_0x3f0677[_0x1583b7(0x16d)](_0x5d0dbb[_0x1583b7(0x16e)]);});for(const _0x23e05d of _0x1f0d44){if(_0x23e05d[_0xc45d03(0x18e)]&&_0x3cdeb8[_0xc45d03(0x12a)]>0x0&&!_0x3cdeb8['includes'](_0x23e05d[_0xc45d03(0x18e)]))continue;const _0x35ec92=_0x23e05d[_0xc45d03(0x158)]||_0x23e05d[_0xc45d03(0x163)]||_0x23e05d[_0xc45d03(0xfe)];if(!_0x35ec92)continue;const _0x4ed30c=new Date(_0x35ec92),_0x5100e0=_0x4ed30c[_0xc45d03(0x16f)]();if(isNaN(_0x5100e0))continue;if(_0x5100e0<_0x30c28b)continue;if(_0x5100e0>_0x30c28b+_0x221e34)continue;const _0x5d959c=(_0x23e05d[_0xc45d03(0x138)]||_0x23e05d[_0xc45d03(0x1b6)]||'')['toLowerCase']();let _0x41d02b=![],_0x2db4e5=[],_0x30d3f5=_0x23e05d['event']||_0x23e05d['summary']||_0xc45d03(0x146);if(_0x5d959c[_0xc45d03(0x122)](_0xc45d03(0x105))||_0x5d959c[_0xc45d03(0x122)](_0xc45d03(0x1b4))||_0x5d959c[_0xc45d03(0x122)]('ankunft'))_0x41d02b=!![],_0x2db4e5=Array[_0xc45d03(0x12e)](_0x3f0677);else for(const _0x9edc1 of _0x3f0677){if(_0x5d959c[_0xc45d03(0x122)](_0x9edc1['toLowerCase']()))_0x2db4e5[_0xc45d03(0x183)](_0x9edc1);}_0x2db4e5['length']>0x0&&_0x2db4e5[_0xc45d03(0x113)](_0x40deb4=>{const _0xc411d2=_0xc45d03;let _0x5d34ba=0x3c;if(_0x41d02b){let _0x4df3c=0x0;Object[_0xc411d2(0x1a7)](_0xbdc568)[_0xc411d2(0x113)](_0x41d050=>{if(_0x41d050>_0x4df3c)_0x4df3c=_0x41d050;}),_0x5d34ba=_0x4df3c>0x0?_0x4df3c:0x78;}else _0x5d34ba=getWarmupRobust(_0xbdc568,_0x40deb4);const _0x3d733d=new Date(_0x5100e0-_0x5d34ba*0xea60);_0x472ee8[_0xc411d2(0x183)]({'eventTime':_0x5100e0,'triggerTime':_0x3d733d[_0xc411d2(0x16f)](),'room':_0x40deb4,'minutes':_0x5d34ba,'reason':_0x30d3f5,'isGlobal':_0x41d02b});});}}catch(_0x123f07){}_0x472ee8[_0xc45d03(0x13b)]((_0x46d742,_0x346829)=>_0x46d742[_0xc45d03(0x155)]-_0x346829[_0xc45d03(0x155)]);const _0x5786bd=_0x472ee8['slice'](0x0,0x5);await _0x201321[_0xc45d03(0x17f)](_0xc45d03(0x199),{'val':JSON[_0xc45d03(0x1a1)](_0x5786bd),'ack':!![]});}async function monitorEnforcements(_0x326db3){const _0x23c277=a1_0x5e6250;try{const _0x160129=_0x23c277(0x14b),_0x10a740=await _0x326db3[_0x23c277(0x182)](_0x160129);if(!_0x10a740||!_0x10a740[_0x23c277(0x19e)])return;let _0x37e619=[];try{_0x37e619=JSON[_0x23c277(0x195)](_0x10a740[_0x23c277(0x19e)]);}catch(_0x451f12){return;}if(!Array[_0x23c277(0x187)](_0x37e619)||_0x37e619[_0x23c277(0x12a)]===0x0)return;const _0xcd1ad=Date[_0x23c277(0x14a)](),_0x181f78=_0x326db3[_0x23c277(0x189)][_0x23c277(0x110)]||[];let _0x2bb573=![];for(let _0x37470e=_0x37e619[_0x23c277(0x12a)]-0x1;_0x37470e>=0x0;_0x37470e--){const _0x439ee6=_0x37e619[_0x37470e];if(_0xcd1ad>=_0x439ee6['until']){_0x326db3[_0x23c277(0x156)]['info'](_0x23c277(0x12b)+_0x439ee6[_0x23c277(0x180)]+'\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.'),_0x37e619[_0x23c277(0x15c)](_0x37470e,0x1),_0x2bb573=!![];continue;}const _0x6bed0b=_0x181f78['find'](_0x318575=>normalize(_0x318575[_0x23c277(0x16e)])===normalize(_0x439ee6[_0x23c277(0x180)])&&(_0x318575[_0x23c277(0x19d)]===_0x23c277(0xf8)||_0x318575[_0x23c277(0x19d)]==='thermostat'));if(_0x6bed0b){const _0x3de735=await findRelatedId(_0x326db3,_0x6bed0b['id'],_0x23c277(0x19c));if(_0x3de735){const _0x7cb49c=await _0x326db3[_0x23c277(0x10e)](_0x3de735);_0x7cb49c&&typeof _0x7cb49c[_0x23c277(0x19e)]==='number'&&(_0x7cb49c[_0x23c277(0x19e)]<0xf&&(_0x326db3[_0x23c277(0x156)]['warn'](_0x23c277(0x15f)+_0x439ee6['room']+_0x23c277(0x19b)+_0x7cb49c[_0x23c277(0x19e)]+_0x23c277(0x17c)+_0x439ee6['target']+_0x23c277(0x13e)),await _0x326db3[_0x23c277(0x1b1)](_0x3de735,_0x439ee6[_0x23c277(0x1ad)]),await logAutomationAction(_0x326db3,_0x23c277(0x15a)+_0x439ee6[_0x23c277(0x180)]+':\x20'+_0x7cb49c[_0x23c277(0x19e)]+'Â°C\x20->\x20'+_0x439ee6[_0x23c277(0x1ad)]+_0x23c277(0x1a9))));}}}_0x2bb573&&await _0x326db3[_0x23c277(0x17f)](_0x160129,{'val':JSON[_0x23c277(0x1a1)](_0x37e619),'ack':!![]});}catch(_0x350f3f){_0x326db3[_0x23c277(0x156)]['error'](_0x23c277(0x162)+_0x350f3f['message']);}}async function checkCalendarTriggers(_0x3acc26){const _0xda45ef=a1_0x5e6250;if(!_0x3acc26[_0xda45ef(0x189)]['useCalendar']||!_0x3acc26[_0xda45ef(0x189)][_0xda45ef(0x159)])return;await updateSchedulePreview(_0x3acc26);let _0x569b98={},_0x4e03b1={};try{const _0x426836=await _0x3acc26['getStateAsync']('analysis.energy.warmupTimes');if(_0x426836&&_0x426836['val'])_0x569b98=JSON['parse'](_0x426836[_0xda45ef(0x19e)]);const _0x47cb1b=await _0x3acc26[_0xda45ef(0x182)](_0xda45ef(0x169));if(_0x47cb1b&&_0x47cb1b[_0xda45ef(0x19e)])_0x4e03b1=JSON[_0xda45ef(0x195)](_0x47cb1b[_0xda45ef(0x19e)]);}catch(_0x4e80e7){}let _0x432556={'default':0x15};try{const _0x8c582=await _0x3acc26['getStateAsync'](_0xda45ef(0x133));if(_0x8c582&&_0x8c582['val'])_0x432556=JSON[_0xda45ef(0x195)](_0x8c582[_0xda45ef(0x19e)]);}catch(_0x3f0e51){}let _0x51cb23=[];try{const _0x2f683=await _0x3acc26[_0xda45ef(0x182)](_0xda45ef(0x14b));if(_0x2f683&&_0x2f683[_0xda45ef(0x19e)])_0x51cb23=JSON[_0xda45ef(0x195)](_0x2f683[_0xda45ef(0x19e)]);}catch(_0x5c69af){}try{const _0x14a7ce=await _0x3acc26[_0xda45ef(0x10e)](_0x3acc26[_0xda45ef(0x189)][_0xda45ef(0x159)]+'.data.table');if(!_0x14a7ce||!_0x14a7ce[_0xda45ef(0x19e)])return;const _0x25e229=JSON[_0xda45ef(0x195)](_0x14a7ce[_0xda45ef(0x19e)]),_0x1cce36=Date[_0xda45ef(0x14a)](),_0x25c14a=_0x3acc26['config']['devices']||[],_0x26b6c4=_0x3acc26[_0xda45ef(0x189)]['calendarSelection']||[];let _0x4af0=![];for(const _0x498afe of _0x25e229){if(_0x498afe['_calName']&&_0x26b6c4[_0xda45ef(0x12a)]>0x0&&!_0x26b6c4['includes'](_0x498afe[_0xda45ef(0x18e)]))continue;const _0xdade22=_0x498afe['_date']||_0x498afe[_0xda45ef(0x163)]||_0x498afe['date'];if(!_0xdade22)continue;const _0x209382=new Date(_0xdade22);if(isNaN(_0x209382[_0xda45ef(0x16f)]()))continue;const _0x4327c0=(_0x498afe[_0xda45ef(0x138)]||_0x498afe[_0xda45ef(0x1b6)]||'')[_0xda45ef(0x14f)]();if(_0x4327c0[_0xda45ef(0x122)](_0xda45ef(0x105))||_0x4327c0[_0xda45ef(0x122)](_0xda45ef(0x1b4))||_0x4327c0[_0xda45ef(0x122)](_0xda45ef(0x142))){let _0x3c6d01=0x0;Object[_0xda45ef(0x1a7)](_0x569b98)[_0xda45ef(0x113)](_0x101483=>{if(_0x101483>_0x3c6d01)_0x3c6d01=_0x101483;});if(_0x3c6d01===0x0)_0x3c6d01=0x78;const _0x1f3d82=_0x209382['getTime']()-_0x3c6d01*0xea60;_0x1cce36>=_0x1f3d82&&_0x1cce36<_0x209382[_0xda45ef(0x16f)]()&&(_0x3acc26[_0xda45ef(0x1a8)]!==_0xda45ef(0xfa)&&(_0x3acc26[_0xda45ef(0x156)][_0xda45ef(0x171)](_0xda45ef(0x18d)+_0x3c6d01+'\x20min).'),await _0x3acc26['setStateAsync'](_0xda45ef(0x190),{'val':_0xda45ef(0xfa),'ack':![]})));}for(const _0x1a9dc5 of _0x25c14a){if(_0x1a9dc5[_0xda45ef(0x16e)]){const _0x10db53=_0x1a9dc5['location'][_0xda45ef(0x14f)](),_0x4f8e5c=(_0x1a9dc5[_0xda45ef(0x194)]||'')[_0xda45ef(0x14f)]();let _0x5f027b=_0x4327c0['includes'](_0x10db53);!_0x5f027b&&_0x4f8e5c[_0xda45ef(0x12a)]>0x3&&_0x4327c0[_0xda45ef(0x122)](_0x4f8e5c)&&(_0x5f027b=!![]);if(_0x5f027b){const _0x34b6c6=getWarmupRobust(_0x569b98,_0x1a9dc5[_0xda45ef(0x16e)]),_0x394297=_0x4e03b1[_0x1a9dc5['location']]||'Classic',_0x36c249=_0x209382[_0xda45ef(0x16f)]()-_0x34b6c6*0xea60;if(_0x1cce36>=_0x36c249&&_0x1cce36<_0x209382[_0xda45ef(0x16f)]()){const _0x520d1b=lastActions[_0xda45ef(0x13a)+_0x1a9dc5[_0xda45ef(0x16e)]];if(_0x520d1b&&_0x1cce36-_0x520d1b<CAL_COOLDOWN_MS)continue;const _0x1a7168=await findRelatedId(_0x3acc26,_0x1a9dc5['id'],'setpoint');if(_0x1a7168){let _0x4b1a9b=_0x432556[_0x1a9dc5['location']];if(_0x4b1a9b===undefined)_0x4b1a9b=_0x432556[_0xda45ef(0x175)];if(_0x4b1a9b===undefined)_0x4b1a9b=0x15;const _0x5a3d18=await _0x3acc26[_0xda45ef(0x10e)](_0x1a7168);if(_0x5a3d18&&typeof _0x5a3d18[_0xda45ef(0x19e)]===_0xda45ef(0x173)&&_0x5a3d18[_0xda45ef(0x19e)]<_0x4b1a9b-0.5){_0x3acc26[_0xda45ef(0x156)]['info'](_0xda45ef(0x123)+_0x394297+']:\x20Raum-Trigger\x20\x27'+_0x1a9dc5['location']+_0xda45ef(0x170)+_0x4327c0+')\x20aktiv.\x20Heize\x20auf\x20'+_0x4b1a9b+'Â°C\x20(Vorlauf:\x20'+_0x34b6c6+_0xda45ef(0x101)),await _0x3acc26[_0xda45ef(0x1b1)](_0x1a7168,_0x4b1a9b),await logAutomationAction(_0x3acc26,_0xda45ef(0x16c)+_0x1a9dc5[_0xda45ef(0x16e)]+_0xda45ef(0x1a4)+_0x4b1a9b+_0xda45ef(0xf1)+_0x394297+')'),lastActions[_0xda45ef(0x13a)+_0x1a9dc5[_0xda45ef(0x16e)]]=_0x1cce36;const _0xbe0cb0=_0x51cb23['findIndex'](_0x2bc2ac=>_0x2bc2ac[_0xda45ef(0x180)]===_0x1a9dc5[_0xda45ef(0x16e)]);if(_0xbe0cb0!==-0x1)_0x51cb23[_0xda45ef(0x15c)](_0xbe0cb0,0x1);_0x51cb23[_0xda45ef(0x183)]({'room':_0x1a9dc5[_0xda45ef(0x16e)],'target':_0x4b1a9b,'until':_0x209382['getTime']()}),_0x4af0=!![];}}}}}}}_0x4af0&&await _0x3acc26[_0xda45ef(0x17f)](_0xda45ef(0x14b),{'val':JSON[_0xda45ef(0x1a1)](_0x51cb23),'ack':!![]});}catch(_0x3cfa02){_0x3acc26['log'][_0xda45ef(0x198)](_0xda45ef(0x129)+_0x3cfa02[_0xda45ef(0xfc)]);}}async function manageMpcIntervention(_0x428f9c,_0x4cfa18,_0x435ddd){const _0x3434f0=a1_0x5e6250;try{const _0x2f58df=_0x3434f0(0x12c),_0x55d8aa=await _0x428f9c[_0x3434f0(0x182)](_0x2f58df);let _0x38f5d1=[];if(_0x55d8aa&&_0x55d8aa[_0x3434f0(0x19e)])try{_0x38f5d1=JSON[_0x3434f0(0x195)](_0x55d8aa[_0x3434f0(0x19e)]);}catch(_0x28c997){}const _0xc87791=_0x38f5d1[_0x3434f0(0x1a0)](_0x4cfa18);if(_0x435ddd===_0x3434f0(0x16d))_0xc87791===-0x1&&(_0x38f5d1['push'](_0x4cfa18),await _0x428f9c[_0x3434f0(0x17f)](_0x2f58df,{'val':JSON['stringify'](_0x38f5d1),'ack':!![]}));else _0x435ddd===_0x3434f0(0x1ae)&&(_0xc87791!==-0x1&&(_0x38f5d1['splice'](_0xc87791,0x1),await _0x428f9c[_0x3434f0(0x17f)](_0x2f58df,{'val':JSON['stringify'](_0x38f5d1),'ack':!![]})));}catch(_0x1fb837){}}function a1_0x1532(){const _0x45457a=['hm-rpc','devices','replace','dimmer','forEach','analysis.automation.actionLog','value.valve','level.valve','split','local_temperature','Manuelles\x20Mapping','valveMapping','ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27','join','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','776XSwNlw','thermostat','messwert','[WATCHDOG]\x20','includes','ðŸ“…\x20SMART\x20SCHEDULE\x20[','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.',':\x20Aufheizen\x20auf\x20','trim','Â°C!\x20(Puffer\x20leer).','current_heating_setpoint','Calendar\x20Check\x20Error:\x20','length','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','analysis.energy.mpcActiveInterventions','Unknown','from','Soll','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','switch','ðŸ“…\x20[MPC\x20INFO]\x20','analysis.energy.warmupTargets','getHours','\x20min)','window','target_temperature','event','3144MyzSmo','cal_','sort','string','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','Â°C.','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','_meta','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','ankunft','actual','level.temperature','common','Unbekannt','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','slice','.1.SET_POINT_TEMPERATURE','now','analysis.energy.activeEnforcements','find',':\x20Absenkung\x20auf\x20','analysis.energy.warmupTimes','toLowerCase','consultButler','constructor','unshift','mpc_','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','triggerTime','log','calendarSelection','_date','calendarInstance','[FORCE]\x20','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','splice','\x20gefunden!','sensor','ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','72753219KXgIVi','analysis.automation.lastAction','Enforcement\x20Monitor\x20Error:\x20','eventStart','analysis.energy.ventilationAlerts','search','\x20->\x20Schalte\x20','open','Â°C\x20(nicht\x20','analysis.energy.warmupSources','4954848kmJJBo','TRAIN_RL_PENALTY','[CAL]\x20','add','location','getTime','\x27\x20(Match:\x20','info','PERFECT','number','manual','default','light','soll','level','Â°C\x20<\x20','occupied_heating_setpoint','.4.SET_TEMPERATURE','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','.1.LEVEL','setStateAsync','room','.1.TEMPERATURE','getStateAsync','push','getForeignObjectAsync','\x20ist\x20auf\x20','Â°C).\x20Entferne\x20Status.','isArray','\x20wieder\x20auf\x20','config','thermostatMapping','ACTUAL','7438632nNKfFZ','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','_calName','valve_position','system.mode','.4.VALVE_STATE','filter','Auto-Erkennung','name','parse','Fehlt','score','warn','analysis.energy.schedulePreview','analysis.automation.confidenceThreshold','\x20auf\x20','setpoint','type','val','wert','indexOf','stringify','(((.+)+)+)+$','write','\x20->\x20','toString','apply','values','currentSystemMode','Â°C\x20(Kalender-Schutz)','map','toUpperCase','too_cold','target','remove','11752209kbTZXL','thermostat.setpoint','setForeignStateAsync','contact','[MPC]\x20','rÃ¼ckkehr','Ist','summary','.data.table','Â°C\x20(via\x20','position',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','11140zspsRS','./ai_agent','1070888HtCePe','openknx','temperature','sendToPythonWrapper','normal','rescue_','message','ACTUAL_TEMPERATURE','date','approved','Â°C).\x20Sparmodus\x20beendet!','\x20min).','off','entries','.1.ACTUAL_TEMPERATURE','urlaub\x20ende','pi_heating_demand','ist','unit','\x20erreicht\x20Limit\x20(','minutes_safe','2326hOeZNV','analysis.energy.rlPenalties','valve','getForeignStateAsync'];a1_0x1532=function(){return _0x45457a;};return a1_0x1532();}async function cleanupGhostInterventions(_0xa9a069){const _0x4b7d9b=a1_0x5e6250;try{const _0x4e20e8=_0x4b7d9b(0x12c),_0x2f696c=await _0xa9a069[_0x4b7d9b(0x182)](_0x4e20e8);if(!_0x2f696c||!_0x2f696c[_0x4b7d9b(0x19e)])return;const _0x1069db=JSON[_0x4b7d9b(0x195)](_0x2f696c[_0x4b7d9b(0x19e)]);if(!Array['isArray'](_0x1069db)||_0x1069db[_0x4b7d9b(0x12a)]===0x0)return;let _0x27a2bd={'default':0x15};try{const _0x28364e=await _0xa9a069['getStateAsync']('analysis.energy.warmupTargets');if(_0x28364e&&_0x28364e[_0x4b7d9b(0x19e)])_0x27a2bd=JSON[_0x4b7d9b(0x195)](_0x28364e[_0x4b7d9b(0x19e)]);}catch(_0x3cd806){}let _0x168213=[];try{const _0x531abe=await _0xa9a069[_0x4b7d9b(0x182)](_0x4b7d9b(0x164));if(_0x531abe&&_0x531abe[_0x4b7d9b(0x19e)])_0x168213=JSON['parse'](_0x531abe[_0x4b7d9b(0x19e)]);}catch(_0x292ffd){}let _0x36a724={},_0x540b6d=![];try{const _0x44658a=await _0xa9a069['getStateAsync'](_0x4b7d9b(0x10c));if(_0x44658a&&_0x44658a['val'])_0x36a724=JSON['parse'](_0x44658a[_0x4b7d9b(0x19e)]);}catch(_0x44d491){}if(_0x36a724[_0x4b7d9b(0x140)]){const _0x262ee3=Date[_0x4b7d9b(0x14a)]();for(const [_0x15b60a,_0x4f3b5b]of Object[_0x4b7d9b(0x103)](_0x36a724[_0x4b7d9b(0x140)])){_0x262ee3-_0x4f3b5b>PENALTY_TTL&&(delete _0x36a724[_0x15b60a],delete _0x36a724[_0x4b7d9b(0x140)][_0x15b60a],_0x540b6d=!![],_0xa9a069[_0x4b7d9b(0x156)]['info'](_0x4b7d9b(0x11b)+_0x15b60a+_0x4b7d9b(0x154)));}}const _0xdd7dcb=_0xa9a069[_0x4b7d9b(0x189)][_0x4b7d9b(0x110)]||[];let _0x2d574e=![];for(let _0xdea9ec=_0x1069db[_0x4b7d9b(0x12a)]-0x1;_0xdea9ec>=0x0;_0xdea9ec--){const _0xa7d220=_0x1069db[_0xdea9ec],_0x1fca4f=_0xdd7dcb[_0x4b7d9b(0x14c)](_0x37c186=>normalize(_0x37c186[_0x4b7d9b(0x16e)])===normalize(_0xa7d220)&&(_0x37c186[_0x4b7d9b(0x19d)]===_0x4b7d9b(0xf8)||_0x37c186[_0x4b7d9b(0x19d)]===_0x4b7d9b(0x11f)));if(!_0x1fca4f){_0xa9a069[_0x4b7d9b(0x156)][_0x4b7d9b(0x198)](_0x4b7d9b(0x17d)+_0xa7d220+'\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.'),_0x1069db[_0x4b7d9b(0x15c)](_0xdea9ec,0x1),_0x2d574e=!![];continue;}if(_0x1fca4f){const _0x5b5800=await findRelatedId(_0xa9a069,_0x1fca4f['id'],_0x4b7d9b(0x19c)),_0x28eb34=await _0xa9a069[_0x4b7d9b(0x10e)](_0x1fca4f['id']);if(_0x5b5800){const _0x5e4aa8=await _0xa9a069[_0x4b7d9b(0x10e)](_0x5b5800);if(_0x5e4aa8&&typeof _0x5e4aa8[_0x4b7d9b(0x19e)]===_0x4b7d9b(0x173)){let _0x1edefe=![],_0x13d382='';Math['abs'](_0x5e4aa8['val']-ECO_TEMP)>0.5&&(_0x1edefe=!![],_0x13d382=_0x4b7d9b(0x174));if(!_0x1edefe&&_0x28eb34&&typeof _0x28eb34[_0x4b7d9b(0x19e)]==='number'){const _0x29a59d=_0x27a2bd[_0xa7d220]||_0x27a2bd[_0x4b7d9b(0x175)]||0x15;_0x28eb34[_0x4b7d9b(0x19e)]<_0x29a59d+0.2&&(_0x1edefe=!![],_0x13d382=_0x4b7d9b(0x1ac));}if(_0x1edefe){if(_0x13d382===_0x4b7d9b(0x174)){_0xa9a069[_0x4b7d9b(0x156)]['info'](_0x4b7d9b(0x130)+_0xa7d220+_0x4b7d9b(0x185)+_0x5e4aa8[_0x4b7d9b(0x19e)]+_0x4b7d9b(0x168)+ECO_TEMP+_0x4b7d9b(0x186));const _0x37c67c=lastActions[_0x4b7d9b(0x13a)+_0xa7d220],_0x166e2e=_0x37c67c&&Date[_0x4b7d9b(0x14a)]()-_0x37c67c<0x2*0x3c*0x3e8;if(!_0x166e2e&&_0x5e4aa8['val']>ECO_TEMP+0.5){_0xa9a069[_0x4b7d9b(0xf9)]&&(_0xa9a069[_0x4b7d9b(0x156)]['info'](_0x4b7d9b(0x147)+_0xa7d220+'\x20wurde\x20manuell\x20erhÃ¶ht.'),_0xa9a069[_0x4b7d9b(0xf9)](_0x4b7d9b(0x16b),{'room':_0xa7d220}));const _0x17b160=_0xa7d220+'_'+new Date()[_0x4b7d9b(0x134)]();if(!_0x36a724[_0x17b160]){_0x36a724[_0x17b160]=0x1;if(!_0x36a724[_0x4b7d9b(0x140)])_0x36a724[_0x4b7d9b(0x140)]={};_0x36a724[_0x4b7d9b(0x140)][_0x17b160]=Date[_0x4b7d9b(0x14a)](),_0x540b6d=!![];}}else _0x166e2e&&_0xa9a069[_0x4b7d9b(0x156)][_0x4b7d9b(0x171)](_0x4b7d9b(0x132)+_0xa7d220+_0x4b7d9b(0x124));}else{if(_0x13d382==='too_cold'){let _0x3d278b=![];if(_0x168213['find'](_0x3f9d22=>_0x3f9d22[_0x4b7d9b(0x180)]===_0xa7d220))_0x3d278b=!![];const _0x3d9b56=_0xdd7dcb[_0x4b7d9b(0x192)](_0x4a1e56=>normalize(_0x4a1e56[_0x4b7d9b(0x16e)])===normalize(_0xa7d220)&&(_0x4a1e56[_0x4b7d9b(0x19d)]===_0x4b7d9b(0x136)||_0x4a1e56[_0x4b7d9b(0x19d)]==='sensor'||_0x4a1e56[_0x4b7d9b(0x19d)]===_0x4b7d9b(0x1b2)));for(const _0x1c5f99 of _0x3d9b56){try{const _0x4de84f=await _0xa9a069[_0x4b7d9b(0x10e)](_0x1c5f99['id']);if(_0x4de84f&&(_0x4de84f[_0x4b7d9b(0x19e)]===!![]||_0x4de84f['val']===0x1||String(_0x4de84f[_0x4b7d9b(0x19e)])[_0x4b7d9b(0x14f)]()===_0x4b7d9b(0x167)))_0x3d278b=!![];}catch(_0x2ac949){}}if(_0x3d278b)_0xa9a069['log'][_0x4b7d9b(0x171)](_0x4b7d9b(0x11d)+_0xa7d220+_0x4b7d9b(0x141));else{const _0x1a1556=_0x27a2bd[_0xa7d220]||_0x27a2bd[_0x4b7d9b(0x175)]||0x15;_0xa9a069[_0x4b7d9b(0x156)][_0x4b7d9b(0x171)](_0x4b7d9b(0x15b)+_0xa7d220+_0x4b7d9b(0x109)+_0x28eb34[_0x4b7d9b(0x19e)]+_0x4b7d9b(0x179)+(_0x1a1556+0.2)+_0x4b7d9b(0x100)),await _0xa9a069['setForeignStateAsync'](_0x5b5800,_0x1a1556),await logAutomationAction(_0xa9a069,_0x4b7d9b(0x121)+_0xa7d220+_0x4b7d9b(0xf3)+_0x1a1556+'Â°C'),lastActions[_0x4b7d9b(0xfb)+_0xa7d220]=Date[_0x4b7d9b(0x14a)]();}}}_0x1069db[_0x4b7d9b(0x15c)](_0xdea9ec,0x1),_0x2d574e=!![];}}}}}_0x2d574e&&await _0xa9a069['setStateAsync'](_0x4e20e8,{'val':JSON[_0x4b7d9b(0x1a1)](_0x1069db),'ack':!![]}),_0x540b6d&&await _0xa9a069[_0x4b7d9b(0x17f)](_0x4b7d9b(0x10c),{'val':JSON[_0x4b7d9b(0x1a1)](_0x36a724),'ack':!![]});}catch(_0x3e6810){}}function a1_0x2c53(_0xe7edb3,_0x7e5913){const _0x1edba6=a1_0x1532();return a1_0x2c53=function(_0x243c9c,_0x45c7af){_0x243c9c=_0x243c9c-0xf1;let _0x1532c9=_0x1edba6[_0x243c9c];return _0x1532c9;},a1_0x2c53(_0xe7edb3,_0x7e5913);}async function applyEnergySavings(_0x133353,_0x5e59f5){const _0x1933b7=a1_0x5e6250;await cleanupGhostInterventions(_0x133353);if(!_0x5e59f5||_0x5e59f5[_0x1933b7(0x12a)]===0x0)return;const _0x1f45d0=_0x133353[_0x1933b7(0x189)][_0x1933b7(0x110)]||[],_0xc5aeae=Date[_0x1933b7(0x14a)]();for(const _0x1bb9f2 of _0x5e59f5){const _0x380e29=_0x1bb9f2['room'],_0x228b55=_0x1bb9f2[_0x1933b7(0x10a)],_0x1b52bd=_0x1bb9f2[_0x1933b7(0x1ad)]||0x15;if(lastActions[_0x1933b7(0xfb)+_0x380e29]&&_0xc5aeae-lastActions[_0x1933b7(0xfb)+_0x380e29]<RESCUE_LOCK_MS)continue;const _0x3c8a06=_0x1f45d0[_0x1933b7(0x14c)](_0x5c8c93=>normalize(_0x5c8c93[_0x1933b7(0x16e)])===normalize(_0x380e29)&&(_0x5c8c93[_0x1933b7(0x19d)]===_0x1933b7(0xf8)||_0x5c8c93[_0x1933b7(0x19d)]==='thermostat'));if(!_0x3c8a06)continue;const _0x84ace9=await findRelatedId(_0x133353,_0x3c8a06['id'],_0x1933b7(0x19c));if(_0x84ace9){if(lastActions[_0x1933b7(0x153)+_0x380e29]&&_0xc5aeae-lastActions['mpc_'+_0x380e29]<0x1e*0x3c*0x3e8)continue;const _0x1aabb9=await _0x133353[_0x1933b7(0x10e)](_0x84ace9);if(_0x1aabb9&&typeof _0x1aabb9['val']===_0x1933b7(0x173)){const _0x3fced6=_0x1aabb9[_0x1933b7(0x19e)];_0x3fced6!==ECO_TEMP&&await manageMpcIntervention(_0x133353,_0x380e29,_0x1933b7(0x1ae));if(_0x228b55>0x1e)_0x3fced6>ECO_TEMP+0.5&&(_0x133353[_0x1933b7(0x156)][_0x1933b7(0x171)](_0x1933b7(0x13f)+_0x380e29+_0x1933b7(0x19b)+ECO_TEMP+'Â°C!\x20(Puffer:\x20'+_0x228b55+_0x1933b7(0x135)),await _0x133353['setForeignStateAsync'](_0x84ace9,ECO_TEMP),await manageMpcIntervention(_0x133353,_0x380e29,_0x1933b7(0x16d)),lastActions[_0x1933b7(0x153)+_0x380e29]=_0xc5aeae,await logAutomationAction(_0x133353,'[MPC]\x20'+_0x380e29+_0x1933b7(0x14d)+ECO_TEMP+'Â°C'));else _0x228b55<=0xf&&(_0x3fced6<_0x1b52bd&&(_0x133353['log'][_0x1933b7(0x171)]('ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20'+_0x380e29+_0x1933b7(0x188)+_0x1b52bd+_0x1933b7(0x127)),await _0x133353[_0x1933b7(0x1b1)](_0x84ace9,_0x1b52bd),await manageMpcIntervention(_0x133353,_0x380e29,_0x1933b7(0x1ae)),lastActions['mpc_'+_0x380e29]=_0xc5aeae,await logAutomationAction(_0x133353,_0x1933b7(0x1b3)+_0x380e29+_0x1933b7(0x125)+_0x1b52bd+'Â°C')));}}else _0x133353[_0x1933b7(0x156)]['warn'](_0x1933b7(0x13d)+_0x380e29+_0x1933b7(0x15d));}}module['exports']={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};