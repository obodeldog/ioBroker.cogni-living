const a1_0x567b72=a1_0x2fcc;(function(_0x1dcc20,_0x12563f){const _0x15d927=a1_0x2fcc,_0x3b0ddf=_0x1dcc20();while(!![]){try{const _0x5660dc=parseInt(_0x15d927(0x198))/0x1+-parseInt(_0x15d927(0x1b3))/0x2+-parseInt(_0x15d927(0x194))/0x3*(-parseInt(_0x15d927(0x1b5))/0x4)+parseInt(_0x15d927(0x1a3))/0x5+parseInt(_0x15d927(0x1a0))/0x6+-parseInt(_0x15d927(0x191))/0x7*(-parseInt(_0x15d927(0x1a5))/0x8)+-parseInt(_0x15d927(0x195))/0x9;if(_0x5660dc===_0x12563f)break;else _0x3b0ddf['push'](_0x3b0ddf['shift']());}catch(_0x2a12f9){_0x3b0ddf['push'](_0x3b0ddf['shift']());}}}(a1_0xf747,0x23920));function a1_0x2fcc(_0x1f1274,_0x2b27b0){const _0x426d71=a1_0xf747();return a1_0x2fcc=function(_0x57542e,_0x43bf8e){_0x57542e=_0x57542e-0x190;let _0xf747e2=_0x426d71[_0x57542e];return _0xf747e2;},a1_0x2fcc(_0x1f1274,_0x2b27b0);}const a1_0x43bf8e=(function(){let _0x157684=!![];return function(_0x151ec8,_0x23563c){const _0x138ed2=_0x157684?function(){const _0x1f835e=a1_0x2fcc;if(_0x23563c){const _0x4b2843=_0x23563c[_0x1f835e(0x197)](_0x151ec8,arguments);return _0x23563c=null,_0x4b2843;}}:function(){};return _0x157684=![],_0x138ed2;};}()),a1_0x57542e=a1_0x43bf8e(this,function(){const _0x18748b=a1_0x2fcc;return a1_0x57542e[_0x18748b(0x1b2)]()[_0x18748b(0x196)]('(((.+)+)+)+$')[_0x18748b(0x1b2)]()['constructor'](a1_0x57542e)[_0x18748b(0x196)](_0x18748b(0x1ab));});a1_0x57542e();'use strict';function a1_0xf747(){const _0x49f71c=['now','analysis.automation.mode','debug','ü§ñ\x20Butler\x20Blocked:\x20','üëÄ\x20SIMULATION:\x20','(((.+)+)+)+$','\x20->\x20','name','[BLOCKED]\x20','trim','dimmer','setStateAsync','toString','171766kFoLiQ','replace','32aGxcBQ','val','\x27),\x20but\x20found\x20no\x20matching\x20light\x20device.','simulate','find','analysis.automation.confidenceThreshold','config','Unknown','exports','light','approved','reason','\x20->\x20Schalte\x20','setForeignStateAsync','info','513842Zoasfz','üîç\x20Device-Search\x20failed:\x20Predicted\x20\x27','consultButler','78879KOmuWk','5120334nzTwEA','search','apply','237382BSPZBS','Pr√§diktion:\x20','active','switch','off','toLowerCase','getStateAsync','devices','159864KskcrP','type','log','896615YsVHCC','location','16JuixTm'];a1_0xf747=function(){return _0x49f71c;};return a1_0xf747();}const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function normalize(_0x5ead7f){const _0x149fe5=a1_0x2fcc;if(!_0x5ead7f)return'';return _0x5ead7f[_0x149fe5(0x19d)]()[_0x149fe5(0x1b4)](/\s+/g,'')[_0x149fe5(0x1af)]();}async function handlePrediction(_0x107eea,_0xea9d12,_0x2dadb8){const _0x378ba6=a1_0x2fcc;if(!_0xea9d12||_0xea9d12===_0x378ba6(0x1bc))return;let _0x12f88=_0x378ba6(0x19c),_0x523cb8=0.6;try{const _0x35c6d8=await _0x107eea[_0x378ba6(0x19e)](_0x378ba6(0x1a7));if(_0x35c6d8&&_0x35c6d8[_0x378ba6(0x1b6)])_0x12f88=_0x35c6d8[_0x378ba6(0x1b6)];const _0x4d5ae4=await _0x107eea[_0x378ba6(0x19e)](_0x378ba6(0x1ba));if(_0x4d5ae4&&_0x4d5ae4[_0x378ba6(0x1b6)])_0x523cb8=_0x4d5ae4[_0x378ba6(0x1b6)];}catch(_0x5d132f){}if(_0x12f88==='off')return;if(_0x2dadb8<_0x523cb8)return;const _0x51218b=Date[_0x378ba6(0x1a6)]();if(lastActions[_0xea9d12]&&_0x51218b-lastActions[_0xea9d12]<COOLDOWN_MS)return;const _0x41655e=_0x107eea[_0x378ba6(0x1bb)][_0x378ba6(0x19f)]||[],_0x3277db=normalize(_0xea9d12),_0x492f97=_0x41655e[_0x378ba6(0x1b9)](_0x27881b=>{const _0x3de471=_0x378ba6;return normalize(_0x27881b[_0x3de471(0x1a4)])===_0x3277db&&(_0x27881b['type']===_0x3de471(0x1be)||_0x27881b['type']===_0x3de471(0x1b0)||_0x27881b[_0x3de471(0x1a1)]===_0x3de471(0x19b));});if(!_0x492f97){const _0x5ee72e=_0x378ba6(0x192)+_0xea9d12+'\x27\x20(norm:\x20\x27'+_0x3277db+_0x378ba6(0x1b7);_0x107eea[_0x378ba6(0x1a2)][_0x378ba6(0x1a8)](_0x5ee72e);return;}const _0x2448f=await aiAgent[_0x378ba6(0x193)](_0x107eea,_0xea9d12,_0x492f97['name'],_0x2dadb8);if(!_0x2448f[_0x378ba6(0x1bf)]){_0x107eea[_0x378ba6(0x1a2)][_0x378ba6(0x1a8)](_0x378ba6(0x1a9)+_0xea9d12+_0x378ba6(0x1ac)+_0x2448f[_0x378ba6(0x1c0)]),await _0x107eea[_0x378ba6(0x1b1)]('analysis.automation.lastAction',{'val':_0x378ba6(0x1ae)+_0x2448f[_0x378ba6(0x1c0)],'ack':!![]});return;}const _0x382773=_0x378ba6(0x199)+_0xea9d12+_0x378ba6(0x1c1)+_0x492f97[_0x378ba6(0x1ad)]+'\x20('+_0x2448f[_0x378ba6(0x1c0)]+')';await _0x107eea[_0x378ba6(0x1b1)]('analysis.automation.lastAction',{'val':'['+_0x12f88['toUpperCase']()+']\x20'+_0x382773,'ack':!![]});if(_0x12f88===_0x378ba6(0x1b8))_0x107eea['log'][_0x378ba6(0x190)](_0x378ba6(0x1aa)+_0x382773);else{if(_0x12f88===_0x378ba6(0x19a)){_0x107eea[_0x378ba6(0x1a2)]['info']('‚ö°\x20ACTION:\x20'+_0x382773);const _0x509294=await _0x107eea['getForeignStateAsync'](_0x492f97['id']);if(_0x509294&&(_0x509294[_0x378ba6(0x1b6)]===!![]||_0x509294[_0x378ba6(0x1b6)]>0x0)){}else await _0x107eea[_0x378ba6(0x1c2)](_0x492f97['id'],!![]);lastActions[_0xea9d12]=_0x51218b;}}}module[a1_0x567b72(0x1bd)]={'handlePrediction':handlePrediction};