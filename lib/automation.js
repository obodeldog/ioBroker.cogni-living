const a1_0x1a74ee=a1_0x3ea9;(function(_0x47f87b,_0x3df6bf){const _0x3c3e93=a1_0x3ea9,_0xa20d22=_0x47f87b();while(!![]){try{const _0x306b76=-parseInt(_0x3c3e93(0x109))/0x1+-parseInt(_0x3c3e93(0x10f))/0x2+-parseInt(_0x3c3e93(0xfb))/0x3*(parseInt(_0x3c3e93(0x105))/0x4)+parseInt(_0x3c3e93(0x111))/0x5+parseInt(_0x3c3e93(0x102))/0x6*(-parseInt(_0x3c3e93(0x10e))/0x7)+-parseInt(_0x3c3e93(0x108))/0x8*(parseInt(_0x3c3e93(0xf2))/0x9)+parseInt(_0x3c3e93(0xf9))/0xa;if(_0x306b76===_0x3df6bf)break;else _0xa20d22['push'](_0xa20d22['shift']());}catch(_0x4225ab){_0xa20d22['push'](_0xa20d22['shift']());}}}(a1_0x3d37,0x7215f));const a1_0x269ab4=(function(){let _0x5a824f=!![];return function(_0x30132e,_0x10f1ea){const _0xb99f45=_0x5a824f?function(){const _0x1f5470=a1_0x3ea9;if(_0x10f1ea){const _0x52fa32=_0x10f1ea[_0x1f5470(0xed)](_0x30132e,arguments);return _0x10f1ea=null,_0x52fa32;}}:function(){};return _0x5a824f=![],_0xb99f45;};}()),a1_0x551249=a1_0x269ab4(this,function(){const _0x4852b4=a1_0x3ea9;return a1_0x551249['toString']()['search'](_0x4852b4(0xfd))[_0x4852b4(0x106)]()['constructor'](a1_0x551249)[_0x4852b4(0xfa)](_0x4852b4(0xfd));});a1_0x551249();'use strict';const aiAgent=require(a1_0x1a74ee(0xff)),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function normalize(_0x2d43c5){const _0xa88e01=a1_0x1a74ee;if(!_0x2d43c5)return'';return _0x2d43c5[_0xa88e01(0x118)]()['replace'](/\s+/g,'')[_0xa88e01(0xef)]();}async function handlePrediction(_0x2340d1,_0x43f863,_0xfed883){const _0xdd3af7=a1_0x1a74ee;if(!_0x43f863||_0x43f863===_0xdd3af7(0x11c))return;let _0xe00618=_0xdd3af7(0x101),_0x532602=0.6;try{const _0x59236d=await _0x2340d1[_0xdd3af7(0xf1)](_0xdd3af7(0xfe));if(_0x59236d&&_0x59236d[_0xdd3af7(0x117)])_0xe00618=_0x59236d[_0xdd3af7(0x117)];const _0x344212=await _0x2340d1['getStateAsync'](_0xdd3af7(0x119));if(_0x344212&&_0x344212[_0xdd3af7(0x117)])_0x532602=_0x344212[_0xdd3af7(0x117)];}catch(_0x159da8){}if(_0xe00618===_0xdd3af7(0x101))return;if(_0xfed883<_0x532602)return;const _0x2cf20f=Date[_0xdd3af7(0x10a)]();if(lastActions[_0x43f863]&&_0x2cf20f-lastActions[_0x43f863]<COOLDOWN_MS)return;const _0x210f8e=_0x2340d1[_0xdd3af7(0xee)]['devices']||[],_0x3ff97e=normalize(_0x43f863),_0x157c6a=_0x210f8e[_0xdd3af7(0x116)](_0x51fe3e=>{const _0x22deb6=_0xdd3af7;return normalize(_0x51fe3e[_0x22deb6(0x107)])===_0x3ff97e&&(_0x51fe3e[_0x22deb6(0xf4)]===_0x22deb6(0x11a)||_0x51fe3e[_0x22deb6(0xf4)]==='dimmer'||_0x51fe3e[_0x22deb6(0xf4)]===_0x22deb6(0xf0));});if(!_0x157c6a){const _0x20659f=_0xdd3af7(0x110)+_0x43f863+_0xdd3af7(0x114)+_0x3ff97e+'\x27),\x20but\x20found\x20no\x20matching\x20light\x20device.';_0x2340d1['log']['debug'](_0x20659f);return;}const _0x5e682e=await aiAgent['consultButler'](_0x2340d1,_0x43f863,_0x157c6a[_0xdd3af7(0x104)],_0xfed883);if(!_0x5e682e['approved']){_0x2340d1[_0xdd3af7(0xf3)]['debug'](_0xdd3af7(0x10d)+_0x43f863+_0xdd3af7(0x11b)+_0x5e682e[_0xdd3af7(0x113)]),await _0x2340d1[_0xdd3af7(0x115)]('analysis.automation.lastAction',{'val':_0xdd3af7(0xf8)+_0x5e682e[_0xdd3af7(0x113)],'ack':!![]});return;}const _0x28034c=_0xdd3af7(0x10c)+_0x43f863+'\x20->\x20Schalte\x20'+_0x157c6a[_0xdd3af7(0x104)]+'\x20('+_0x5e682e['reason']+')';await _0x2340d1[_0xdd3af7(0x115)](_0xdd3af7(0x112),{'val':'['+_0xe00618[_0xdd3af7(0xfc)]()+']\x20'+_0x28034c,'ack':!![]});if(_0xe00618===_0xdd3af7(0x10b))_0x2340d1[_0xdd3af7(0xf3)][_0xdd3af7(0xf5)](_0xdd3af7(0xf6)+_0x28034c);else{if(_0xe00618==='active'){_0x2340d1[_0xdd3af7(0xf3)]['info'](_0xdd3af7(0x100)+_0x28034c);const _0x1b3ad7=await _0x2340d1[_0xdd3af7(0x103)](_0x157c6a['id']);if(_0x1b3ad7&&(_0x1b3ad7[_0xdd3af7(0x117)]===!![]||_0x1b3ad7[_0xdd3af7(0x117)]>0x0)){}else await _0x2340d1['setForeignStateAsync'](_0x157c6a['id'],!![]);lastActions[_0x43f863]=_0x2cf20f;}}}function a1_0x3ea9(_0x170ac4,_0x489b9f){const _0x152bc0=a1_0x3d37();return a1_0x3ea9=function(_0x551249,_0x269ab4){_0x551249=_0x551249-0xed;let _0x3d376c=_0x152bc0[_0x551249];return _0x3d376c;},a1_0x3ea9(_0x170ac4,_0x489b9f);}function a1_0x3d37(){const _0x57a33b=['simulate','PrÃ¤diktion:\x20','ðŸ¤–\x20Butler\x20Blocked:\x20','7BDrXIz','445066AZNqdL','ðŸ”\x20Device-Search\x20failed:\x20Predicted\x20\x27','2927435TAvCXn','analysis.automation.lastAction','reason','\x27\x20(norm:\x20\x27','setStateAsync','find','val','toLowerCase','analysis.automation.confidenceThreshold','light','\x20->\x20','Unknown','apply','config','trim','switch','getStateAsync','773397XhHiWh','log','type','info','ðŸ‘€\x20SIMULATION:\x20','exports','[BLOCKED]\x20','18552340doDvvF','search','6iobyvV','toUpperCase','(((.+)+)+)+$','analysis.automation.mode','./ai_agent','âš¡\x20ACTION:\x20','off','2445954nAISOI','getForeignStateAsync','name','1352668vUpjnO','toString','location','16BvnwlT','495034RJxTow','now'];a1_0x3d37=function(){return _0x57a33b;};return a1_0x3d37();}module[a1_0x1a74ee(0xf7)]={'handlePrediction':handlePrediction};