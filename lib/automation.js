const a1_0x35039f=a1_0xd3c0;(function(_0x41480e,_0x57bf8c){const _0x541d8f=a1_0xd3c0,_0x50cc29=_0x41480e();while(!![]){try{const _0x968f85=parseInt(_0x541d8f(0x102))/0x1*(parseInt(_0x541d8f(0xe7))/0x2)+-parseInt(_0x541d8f(0xcb))/0x3*(parseInt(_0x541d8f(0x143))/0x4)+-parseInt(_0x541d8f(0xce))/0x5*(parseInt(_0x541d8f(0xd3))/0x6)+-parseInt(_0x541d8f(0xab))/0x7+-parseInt(_0x541d8f(0x12c))/0x8+-parseInt(_0x541d8f(0xe1))/0x9*(parseInt(_0x541d8f(0x139))/0xa)+parseInt(_0x541d8f(0xc0))/0xb;if(_0x968f85===_0x57bf8c)break;else _0x50cc29['push'](_0x50cc29['shift']());}catch(_0x1352e3){_0x50cc29['push'](_0x50cc29['shift']());}}}(a1_0x5ad2,0x214ad));const a1_0x1cd812=(function(){let _0x20ef0b=!![];return function(_0x44ca75,_0x2d8619){const _0x18ef55=_0x20ef0b?function(){const _0x3ac550=a1_0xd3c0;if(_0x2d8619){const _0x274940=_0x2d8619[_0x3ac550(0xf1)](_0x44ca75,arguments);return _0x2d8619=null,_0x274940;}}:function(){};return _0x20ef0b=![],_0x18ef55;};}()),a1_0x1056d8=a1_0x1cd812(this,function(){const _0x22095a=a1_0xd3c0;return a1_0x1056d8['toString']()[_0x22095a(0xa7)](_0x22095a(0xc4))[_0x22095a(0xde)]()[_0x22095a(0x14d)](a1_0x1056d8)[_0x22095a(0xa7)](_0x22095a(0xc4));});a1_0x1056d8();'use strict';const aiAgent=require(a1_0x35039f(0xe6)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x1bb07f){const _0x4fa628=a1_0x35039f;if(!_0x1bb07f)return'';return _0x1bb07f['toLowerCase']()[_0x4fa628(0xc1)](/\s+/g,'')[_0x4fa628(0xfb)]();}function getWarmupRobust(_0x5d5bf0,_0x4cec96){const _0x1f3984=a1_0x35039f;if(!_0x5d5bf0||!_0x4cec96)return 0x3c;if(_0x5d5bf0[_0x4cec96]!==undefined)return _0x5d5bf0[_0x4cec96];const _0x246873=_0x4cec96['toLowerCase']()[_0x1f3984(0xc1)](/Ã¤/g,'ae')[_0x1f3984(0xc1)](/Ã¶/g,'oe')[_0x1f3984(0xc1)](/Ã¼/g,'ue')[_0x1f3984(0xc1)](/ÃŸ/g,'ss')['replace'](/\s+/g,'_')[_0x1f3984(0xc1)](/[^a-z0-9_]/g,'');if(_0x5d5bf0[_0x246873]!==undefined)return _0x5d5bf0[_0x246873];return 0x3c;}async function logAutomationAction(_0x59df48,_0x493354){const _0x9691c8=a1_0x35039f;await _0x59df48[_0x9691c8(0xf6)](_0x9691c8(0x121),{'val':_0x493354,'ack':!![]});try{const _0x6a13e3=_0x9691c8(0xaa),_0x2c5833=await _0x59df48[_0x9691c8(0xa8)](_0x6a13e3);let _0x6f8448=[];if(_0x2c5833&&_0x2c5833['val'])try{_0x6f8448=JSON[_0x9691c8(0x157)](_0x2c5833[_0x9691c8(0xe0)]);}catch(_0x1a1208){}_0x6f8448[_0x9691c8(0xe3)]({'ts':Date[_0x9691c8(0xfd)](),'msg':_0x493354});if(_0x6f8448[_0x9691c8(0x119)]>0x32)_0x6f8448=_0x6f8448['slice'](0x0,0x32);await _0x59df48['setStateAsync'](_0x6a13e3,{'val':JSON[_0x9691c8(0xff)](_0x6f8448),'ack':!![]});}catch(_0x59d624){}}async function handlePrediction(_0x3da4e9,_0x330d25,_0x299345){const _0xb801d6=a1_0x35039f;if(!_0x330d25||_0x330d25===_0xb801d6(0x153))return;let _0x3485cf=_0xb801d6(0x131),_0xe8d2bd=0.6;try{const _0x1c880c=await _0x3da4e9[_0xb801d6(0xa8)](_0xb801d6(0x14b));if(_0x1c880c&&_0x1c880c['val'])_0x3485cf=_0x1c880c[_0xb801d6(0xe0)];const _0x231747=await _0x3da4e9['getStateAsync'](_0xb801d6(0xd9));if(_0x231747&&_0x231747[_0xb801d6(0xe0)])_0xe8d2bd=_0x231747[_0xb801d6(0xe0)];}catch(_0x3c8cad){}if(_0x3485cf===_0xb801d6(0x131)||_0x299345<_0xe8d2bd)return;const _0x1c7c05=Date[_0xb801d6(0xfd)]();if(lastActions[_0x330d25]&&_0x1c7c05-lastActions[_0x330d25]<COOLDOWN_MS)return;const _0x58f55a=_0x3da4e9['config']['devices']||[],_0x583bc9=normalize(_0x330d25),_0x591967=_0x58f55a[_0xb801d6(0xc3)](_0x34a3ea=>normalize(_0x34a3ea[_0xb801d6(0xdd)])===_0x583bc9&&(_0x34a3ea[_0xb801d6(0xfe)]===_0xb801d6(0x103)||_0x34a3ea[_0xb801d6(0xfe)]===_0xb801d6(0xb9)||_0x34a3ea[_0xb801d6(0xfe)]==='switch'));if(!_0x591967)return;const _0x3809b8=await aiAgent[_0xb801d6(0xe2)](_0x3da4e9,_0x330d25,_0x591967['name'],_0x299345);if(!_0x3809b8[_0xb801d6(0xca)])return;const _0x5f25d6=_0xb801d6(0x10b)+_0x330d25+_0xb801d6(0xa1)+_0x591967[_0xb801d6(0xb5)]+'\x20('+_0x3809b8['reason']+')';await logAutomationAction(_0x3da4e9,'['+_0x3485cf[_0xb801d6(0x133)]()+']\x20'+_0x5f25d6);if(_0x3485cf===_0xb801d6(0xa9)){const _0x332c5e=await _0x3da4e9[_0xb801d6(0x142)](_0x591967['id']);(!_0x332c5e||!_0x332c5e[_0xb801d6(0xe0)]&&_0x332c5e['val']!==!![])&&await _0x3da4e9[_0xb801d6(0x138)](_0x591967['id'],!![]),lastActions[_0x330d25]=_0x1c7c05;}}async function findRelatedId(_0x351213,_0x3d58f3,_0x4acf09='setpoint'){const _0x49a135=a1_0x35039f;if(_0x4acf09==='setpoint'&&_0x351213[_0x49a135(0xee)][_0x49a135(0x14c)]){let _0x52cc3f=_0x351213[_0x49a135(0xee)]['thermostatMapping'];if(typeof _0x52cc3f===_0x49a135(0xf2))try{_0x52cc3f=JSON[_0x49a135(0x157)](_0x52cc3f);}catch(_0x3ff33c){}if(_0x52cc3f&&_0x52cc3f[_0x3d58f3])return _0x52cc3f[_0x3d58f3];}if(_0x4acf09===_0x49a135(0x14e)&&_0x351213[_0x49a135(0xee)]['valveMapping']){let _0x14a566=_0x351213[_0x49a135(0xee)][_0x49a135(0xbc)];if(typeof _0x14a566==='string')try{_0x14a566=JSON[_0x49a135(0x157)](_0x14a566);}catch(_0x48fe44){}if(_0x14a566&&_0x14a566[_0x3d58f3])return _0x14a566[_0x3d58f3];}let _0x474ce9=[];if(_0x4acf09==='setpoint')_0x474ce9=[{'s':_0x49a135(0x98),'t':_0x49a135(0x155)},{'s':_0x49a135(0xbf),'t':_0x49a135(0x155)},{'s':'.1.TEMPERATURE','t':_0x49a135(0x11a)},{'s':'ACTUAL_TEMPERATURE','t':_0x49a135(0x128)},{'s':'local_temperature','t':_0x49a135(0x118)},{'s':_0x49a135(0xd4),'t':_0x49a135(0xac)},{'s':_0x49a135(0x123),'t':_0x49a135(0x135)},{'s':'ACTUAL','t':'SET'},{'s':_0x49a135(0xc8),'t':_0x49a135(0x159)},{'s':'temperature','t':'setpoint'}];else _0x4acf09==='valve'&&(_0x474ce9=[{'s':_0x49a135(0x98),'t':_0x49a135(0xc5)},{'s':_0x49a135(0xbf),'t':_0x49a135(0xc5)},{'s':_0x49a135(0xbf),'t':_0x49a135(0x108)},{'s':_0x49a135(0xd4),'t':_0x49a135(0xaf)},{'s':_0x49a135(0x123),'t':_0x49a135(0x15e)},{'s':_0x49a135(0x123),'t':_0x49a135(0x115)}]);for(const _0x2867a2 of _0x474ce9){if(_0x3d58f3[_0x49a135(0xfa)](_0x2867a2['s'])){const _0x1cfd3c=_0x3d58f3[_0x49a135(0xc1)](_0x2867a2['s'],_0x2867a2['t']),_0x4c4fea=await _0x351213[_0x49a135(0x9f)](_0x1cfd3c);if(_0x4c4fea)return _0x1cfd3c;}}try{const _0x72b3cc=_0x3d58f3['split']('.');if(_0x72b3cc[_0x49a135(0x119)]>0x2){const _0x5b8ec4=_0x72b3cc[_0x49a135(0x106)](0x0,-0x1)[_0x49a135(0x156)]('.'),_0x5a0821=await _0x351213['getForeignObjectsAsync'](_0x5b8ec4+'.*'),_0x4dce29=[],_0x283d06=_0x3d58f3[_0x49a135(0x13d)](/[._]+/)[_0x49a135(0x9e)](_0x3eecd7=>![_0x49a135(0x15a),'0',_0x49a135(0xd7),_0x49a135(0x150),'wert',_0x49a135(0x123),'actual',_0x49a135(0xec),_0x49a135(0xd2),_0x49a135(0x127)]['includes'](_0x3eecd7[_0x49a135(0xdf)]()));for(const [_0xc7c138,_0x44b1f7]of Object[_0x49a135(0x110)](_0x5a0821)){if(_0xc7c138===_0x3d58f3)continue;if(_0x44b1f7&&_0x44b1f7[_0x49a135(0xb7)]){const _0x505935=_0xc7c138['toLowerCase'](),_0x4e72f8=(_0x44b1f7[_0x49a135(0xb7)]['role']||'')['toLowerCase'](),_0x574df4=(_0x44b1f7[_0x49a135(0xb7)][_0x49a135(0x140)]||'')[_0x49a135(0xdf)]();let _0x29bb2f=![];if(_0x4acf09===_0x49a135(0x149)&&_0x44b1f7[_0x49a135(0xb7)][_0x49a135(0x104)]===!![])_0x29bb2f=_0x505935[_0x49a135(0xfa)]('set')||_0x505935[_0x49a135(0xfa)](_0x49a135(0x11e))||_0x505935[_0x49a135(0xfa)](_0x49a135(0x125))||_0x4e72f8['includes'](_0x49a135(0x152))||_0x4e72f8['includes'](_0x49a135(0xed));else _0x4acf09===_0x49a135(0x14e)&&(_0x29bb2f=_0x505935[_0x49a135(0xfa)](_0x49a135(0x115))||_0x505935['includes'](_0x49a135(0x14e))||_0x505935[_0x49a135(0xfa)](_0x49a135(0xf0))||_0x505935[_0x49a135(0xfa)](_0x49a135(0x11b))||_0x4e72f8['includes']('level.valve')||_0x4e72f8[_0x49a135(0xfa)](_0x49a135(0x15d))||_0x574df4[_0x49a135(0xfa)]('%'));if(_0x29bb2f){const _0x8ab3ae=_0xc7c138[_0x49a135(0x13d)](/[._]+/)[_0x49a135(0xcd)](_0x20f669=>_0x20f669[_0x49a135(0xdf)]());let _0x5b4d10=0x0;_0x283d06[_0x49a135(0xcc)](_0x3af344=>{const _0x257f37=_0x49a135;if(_0x8ab3ae['includes'](_0x3af344[_0x257f37(0xdf)]()))_0x5b4d10++;}),_0x4dce29[_0x49a135(0x97)]({'id':_0xc7c138,'score':_0x5b4d10});}}}if(_0x4dce29[_0x49a135(0x119)]>0x0){_0x4dce29['sort']((_0x3284b7,_0x194fd)=>_0x194fd[_0x49a135(0x11c)]-_0x3284b7[_0x49a135(0x11c)]);if(_0x4dce29[0x0][_0x49a135(0x11c)]>0x0)return _0x4dce29[0x0]['id'];}}}catch(_0x80295c){}return null;}async function scanThermostats(_0x1e57aa){const _0x21e2af=a1_0x35039f,_0x26da4f=_0x1e57aa[_0x21e2af(0xee)][_0x21e2af(0x10f)]||[],_0x32d28d=[],_0x2c0eab=_0x26da4f[_0x21e2af(0x9e)](_0x52ad1b=>_0x52ad1b['id']&&_0x52ad1b['id'][_0x21e2af(0xfa)](_0x21e2af(0x123))||_0x52ad1b[_0x21e2af(0xfe)]&&[_0x21e2af(0x123),_0x21e2af(0xf4),_0x21e2af(0xec)][_0x21e2af(0xfa)](_0x52ad1b[_0x21e2af(0xfe)])||_0x52ad1b[_0x21e2af(0xb5)]&&_0x52ad1b[_0x21e2af(0xb5)][_0x21e2af(0xdf)]()['includes'](_0x21e2af(0xbe)));for(const _0x14a729 of _0x2c0eab){const _0x571bc4=await findRelatedId(_0x1e57aa,_0x14a729['id'],_0x21e2af(0x149)),_0x151cc0=await findRelatedId(_0x1e57aa,_0x14a729['id'],'valve');let _0x3e0cb6='Nicht\x20gefunden',_0x229922=![],_0x30380c=_0x1e57aa['config']['thermostatMapping']||{};if(typeof _0x30380c===_0x21e2af(0xf2))try{_0x30380c=JSON[_0x21e2af(0x157)](_0x30380c);}catch(_0x1af6bb){}let _0x218e0a=_0x1e57aa[_0x21e2af(0xee)][_0x21e2af(0xbc)]||{};if(typeof _0x218e0a===_0x21e2af(0xf2))try{_0x218e0a=JSON[_0x21e2af(0x157)](_0x218e0a);}catch(_0x5a6bae){}if(_0x30380c[_0x14a729['id']]&&_0x30380c[_0x14a729['id']]===_0x571bc4||_0x218e0a[_0x14a729['id']]&&_0x218e0a[_0x14a729['id']]===_0x151cc0)_0x3e0cb6=_0x21e2af(0x99),_0x229922=!![];else(_0x571bc4||_0x151cc0)&&(_0x3e0cb6='Auto-Erkennung');_0x32d28d[_0x21e2af(0x97)]({'room':_0x14a729[_0x21e2af(0xdd)]||_0x21e2af(0x111),'sensorId':_0x14a729['id'],'setpointId':_0x571bc4||'-','valveId':_0x151cc0||'-','source':_0x3e0cb6,'isManual':_0x229922,'status':_0x571bc4&&_0x151cc0?_0x21e2af(0x14a):_0x571bc4?'OK':_0x21e2af(0x141)});}return _0x32d28d[_0x21e2af(0xe4)]((_0x578489,_0x458619)=>_0x578489[_0x21e2af(0x134)]['localeCompare'](_0x458619['room']));}async function updateSchedulePreview(_0x36dec6){const _0x13a30c=a1_0x35039f;if(!_0x36dec6[_0x13a30c(0xee)]['useCalendar']||!_0x36dec6[_0x13a30c(0xee)][_0x13a30c(0x113)])return;let _0x1fd064={};try{const _0x146bcd=await _0x36dec6['getStateAsync'](_0x13a30c(0xb3));if(_0x146bcd&&_0x146bcd['val'])_0x1fd064=JSON[_0x13a30c(0x157)](_0x146bcd[_0x13a30c(0xe0)]);}catch(_0x58d90d){}const _0x4c41f8=[],_0x9fb2bc=Date['now'](),_0xe8a3ca=0x30*0x3c*0x3c*0x3e8;try{const _0x50d282=await _0x36dec6['getForeignStateAsync'](_0x36dec6['config'][_0x13a30c(0x113)]+_0x13a30c(0xa0));if(!_0x50d282||!_0x50d282['val'])return;const _0x305a32=JSON[_0x13a30c(0x157)](_0x50d282[_0x13a30c(0xe0)]),_0x4701ab=_0x36dec6[_0x13a30c(0xee)][_0x13a30c(0x100)]||[],_0x21b20a=_0x36dec6[_0x13a30c(0xee)][_0x13a30c(0x10f)]||[],_0x59fa9a=new Set();_0x21b20a[_0x13a30c(0xcc)](_0x5940fd=>{const _0x3cb393=_0x13a30c;if(_0x5940fd[_0x3cb393(0xdd)])_0x59fa9a[_0x3cb393(0xf5)](_0x5940fd['location']);});for(const _0x19befe of _0x305a32){if(_0x19befe[_0x13a30c(0x13e)]&&_0x4701ab[_0x13a30c(0x119)]>0x0&&!_0x4701ab[_0x13a30c(0xfa)](_0x19befe[_0x13a30c(0x13e)]))continue;const _0x1fa05b=_0x19befe[_0x13a30c(0x132)]||_0x19befe[_0x13a30c(0xbd)]||_0x19befe['date'];if(!_0x1fa05b)continue;const _0x323601=new Date(_0x1fa05b),_0x1fc963=_0x323601[_0x13a30c(0xd5)]();if(isNaN(_0x1fc963))continue;if(_0x1fc963<_0x9fb2bc)continue;if(_0x1fc963>_0x9fb2bc+_0xe8a3ca)continue;const _0x58ad2b=(_0x19befe[_0x13a30c(0x9c)]||_0x19befe[_0x13a30c(0xb2)]||'')[_0x13a30c(0xdf)]();let _0x4e7a29=![],_0x6a3da7=[],_0x19f9f3=_0x19befe[_0x13a30c(0x9c)]||_0x19befe['summary']||_0x13a30c(0x111);if(_0x58ad2b[_0x13a30c(0xfa)](_0x13a30c(0xa6))||_0x58ad2b[_0x13a30c(0xfa)](_0x13a30c(0x114))||_0x58ad2b[_0x13a30c(0xfa)](_0x13a30c(0xb6)))_0x4e7a29=!![],_0x6a3da7=Array['from'](_0x59fa9a);else for(const _0x381bc3 of _0x59fa9a){if(_0x58ad2b[_0x13a30c(0xfa)](_0x381bc3[_0x13a30c(0xdf)]()))_0x6a3da7['push'](_0x381bc3);}_0x6a3da7[_0x13a30c(0x119)]>0x0&&_0x6a3da7[_0x13a30c(0xcc)](_0x1962ba=>{const _0x227ff1=_0x13a30c;let _0x4b1094=0x3c;if(_0x4e7a29){let _0x440abf=0x0;Object['values'](_0x1fd064)[_0x227ff1(0xcc)](_0x4815e9=>{if(_0x4815e9>_0x440abf)_0x440abf=_0x4815e9;}),_0x4b1094=_0x440abf>0x0?_0x440abf:0x78;}else _0x4b1094=getWarmupRobust(_0x1fd064,_0x1962ba);const _0x51425f=new Date(_0x1fc963-_0x4b1094*0xea60);_0x4c41f8[_0x227ff1(0x97)]({'eventTime':_0x1fc963,'triggerTime':_0x51425f['getTime'](),'room':_0x1962ba,'minutes':_0x4b1094,'reason':_0x19f9f3,'isGlobal':_0x4e7a29});});}}catch(_0x3933b6){}_0x4c41f8[_0x13a30c(0xe4)]((_0x3114c4,_0x5ca645)=>_0x3114c4[_0x13a30c(0xb8)]-_0x5ca645[_0x13a30c(0xb8)]);const _0x556c3d=_0x4c41f8[_0x13a30c(0x106)](0x0,0x1e);await _0x36dec6['setStateAsync'](_0x13a30c(0xef),{'val':JSON[_0x13a30c(0xff)](_0x556c3d),'ack':!![]});}async function monitorEnforcements(_0x59bcef){const _0x3973a6=a1_0x35039f;try{const _0xf84219=_0x3973a6(0x96),_0x36a6a6=await _0x59bcef[_0x3973a6(0xa8)](_0xf84219);if(!_0x36a6a6||!_0x36a6a6[_0x3973a6(0xe0)])return;let _0x1f8cf3=[];try{_0x1f8cf3=JSON[_0x3973a6(0x157)](_0x36a6a6[_0x3973a6(0xe0)]);}catch(_0x190712){return;}if(!Array[_0x3973a6(0x10c)](_0x1f8cf3)||_0x1f8cf3['length']===0x0)return;const _0x204020=Date[_0x3973a6(0xfd)](),_0x37e10f=_0x59bcef[_0x3973a6(0xee)][_0x3973a6(0x10f)]||[];let _0x52f4c7=![];for(let _0x32ada4=_0x1f8cf3[_0x3973a6(0x119)]-0x1;_0x32ada4>=0x0;_0x32ada4--){const _0x29f843=_0x1f8cf3[_0x32ada4];if(_0x204020>=_0x29f843['until']){_0x59bcef[_0x3973a6(0x12d)][_0x3973a6(0xa5)]('ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20'+_0x29f843[_0x3973a6(0x134)]+_0x3973a6(0xad)),_0x1f8cf3[_0x3973a6(0xfc)](_0x32ada4,0x1),_0x52f4c7=!![];continue;}const _0x5eca38=_0x37e10f[_0x3973a6(0xc3)](_0x23af5b=>normalize(_0x23af5b[_0x3973a6(0xdd)])===normalize(_0x29f843['room'])&&(_0x23af5b[_0x3973a6(0xfe)]===_0x3973a6(0x123)||_0x23af5b[_0x3973a6(0xfe)]===_0x3973a6(0xf4)));if(_0x5eca38){const _0x5647f4=await findRelatedId(_0x59bcef,_0x5eca38['id'],_0x3973a6(0x149));if(_0x5647f4){const _0x236b43=await _0x59bcef[_0x3973a6(0x142)](_0x5647f4);_0x236b43&&typeof _0x236b43['val']===_0x3973a6(0x14f)&&(_0x236b43['val']<0xf&&(_0x59bcef['log'][_0x3973a6(0x137)](_0x3973a6(0xe9)+_0x29f843['room']+'\x20auf\x20'+_0x236b43[_0x3973a6(0xe0)]+_0x3973a6(0xb4)+_0x29f843[_0x3973a6(0x125)]+_0x3973a6(0x15c)),await _0x59bcef[_0x3973a6(0x138)](_0x5647f4,_0x29f843['target']),await logAutomationAction(_0x59bcef,_0x3973a6(0x154)+_0x29f843[_0x3973a6(0x134)]+':\x20'+_0x236b43['val']+_0x3973a6(0x13f)+_0x29f843[_0x3973a6(0x125)]+_0x3973a6(0xdc))));}}}_0x52f4c7&&await _0x59bcef['setStateAsync'](_0xf84219,{'val':JSON['stringify'](_0x1f8cf3),'ack':!![]});}catch(_0xc3efc0){_0x59bcef['log'][_0x3973a6(0x109)](_0x3973a6(0xe5)+_0xc3efc0[_0x3973a6(0x144)]);}}async function checkCalendarTriggers(_0x40c151){const _0x14f78f=a1_0x35039f;if(!_0x40c151[_0x14f78f(0xee)][_0x14f78f(0x9d)]||!_0x40c151[_0x14f78f(0xee)][_0x14f78f(0x113)])return;await updateSchedulePreview(_0x40c151);let _0x42dfa0={},_0x9768df={};try{const _0x4e8d05=await _0x40c151[_0x14f78f(0xa8)](_0x14f78f(0xb3));if(_0x4e8d05&&_0x4e8d05[_0x14f78f(0xe0)])_0x42dfa0=JSON['parse'](_0x4e8d05[_0x14f78f(0xe0)]);const _0x225cac=await _0x40c151[_0x14f78f(0xa8)](_0x14f78f(0xc9));if(_0x225cac&&_0x225cac[_0x14f78f(0xe0)])_0x9768df=JSON[_0x14f78f(0x157)](_0x225cac['val']);}catch(_0x4d3c78){}let _0x448009={'default':0x15};try{const _0x48b797=await _0x40c151[_0x14f78f(0xa8)](_0x14f78f(0x160));if(_0x48b797&&_0x48b797['val'])_0x448009=JSON[_0x14f78f(0x157)](_0x48b797[_0x14f78f(0xe0)]);}catch(_0x56f390){}let _0x435039=[];try{const _0x1a2586=await _0x40c151[_0x14f78f(0xa8)](_0x14f78f(0x96));if(_0x1a2586&&_0x1a2586[_0x14f78f(0xe0)])_0x435039=JSON[_0x14f78f(0x157)](_0x1a2586[_0x14f78f(0xe0)]);}catch(_0x2d88d3){}try{const _0x516352=await _0x40c151[_0x14f78f(0x142)](_0x40c151[_0x14f78f(0xee)]['calendarInstance']+_0x14f78f(0xa0));if(!_0x516352||!_0x516352['val'])return;const _0x34172b=JSON[_0x14f78f(0x157)](_0x516352[_0x14f78f(0xe0)]),_0x52ecf5=Date[_0x14f78f(0xfd)](),_0x402fe3=_0x40c151['config'][_0x14f78f(0x10f)]||[],_0xdbe84b=_0x40c151['config']['calendarSelection']||[];let _0x48cb33=![];for(const _0x45cb13 of _0x34172b){if(_0x45cb13[_0x14f78f(0x13e)]&&_0xdbe84b[_0x14f78f(0x119)]>0x0&&!_0xdbe84b[_0x14f78f(0xfa)](_0x45cb13[_0x14f78f(0x13e)]))continue;const _0x3ec543=_0x45cb13['_date']||_0x45cb13[_0x14f78f(0xbd)]||_0x45cb13[_0x14f78f(0x101)];if(!_0x3ec543)continue;const _0x8f1121=new Date(_0x3ec543);if(isNaN(_0x8f1121[_0x14f78f(0xd5)]()))continue;const _0x40908b=(_0x45cb13[_0x14f78f(0x9c)]||_0x45cb13['summary']||'')[_0x14f78f(0xdf)]();if(_0x40908b['includes'](_0x14f78f(0xa6))||_0x40908b['includes'](_0x14f78f(0x114))||_0x40908b[_0x14f78f(0xfa)](_0x14f78f(0xb6))){let _0x1beeaa=0x0;Object[_0x14f78f(0x124)](_0x42dfa0)[_0x14f78f(0xcc)](_0x1161f3=>{if(_0x1161f3>_0x1beeaa)_0x1beeaa=_0x1161f3;});if(_0x1beeaa===0x0)_0x1beeaa=0x78;const _0x579ed4=_0x8f1121['getTime']()-_0x1beeaa*0xea60;_0x52ecf5>=_0x579ed4&&_0x52ecf5<_0x8f1121[_0x14f78f(0xd5)]()&&(_0x40c151['currentSystemMode']!=='normal'&&(_0x40c151[_0x14f78f(0x12d)][_0x14f78f(0xa5)]('ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20'+_0x1beeaa+_0x14f78f(0xbb)),await _0x40c151[_0x14f78f(0xf6)](_0x14f78f(0x10a),{'val':_0x14f78f(0x116),'ack':![]})));}for(const _0xd0bacb of _0x402fe3){if(_0xd0bacb[_0x14f78f(0xdd)]){const _0x578c6c=_0xd0bacb[_0x14f78f(0xdd)]['toLowerCase'](),_0x24300a=(_0xd0bacb[_0x14f78f(0xb5)]||'')[_0x14f78f(0xdf)]();let _0xcbbb45=_0x40908b[_0x14f78f(0xfa)](_0x578c6c);!_0xcbbb45&&_0x24300a[_0x14f78f(0x119)]>0x3&&_0x40908b['includes'](_0x24300a)&&(_0xcbbb45=!![]);if(_0xcbbb45){const _0x29142d=getWarmupRobust(_0x42dfa0,_0xd0bacb[_0x14f78f(0xdd)]),_0x229acf=_0x9768df[_0xd0bacb[_0x14f78f(0xdd)]]||_0x14f78f(0x12f),_0x2aa494=_0x8f1121[_0x14f78f(0xd5)]()-_0x29142d*0xea60;if(_0x52ecf5>=_0x2aa494&&_0x52ecf5<_0x8f1121[_0x14f78f(0xd5)]()){const _0x25cc1d=lastActions['cal_'+_0xd0bacb[_0x14f78f(0xdd)]];if(_0x25cc1d&&_0x52ecf5-_0x25cc1d<CAL_COOLDOWN_MS)continue;const _0x440b26=await findRelatedId(_0x40c151,_0xd0bacb['id'],_0x14f78f(0x149));if(_0x440b26){let _0x2f13e2=_0x448009[_0xd0bacb['location']];if(_0x2f13e2===undefined)_0x2f13e2=_0x448009[_0x14f78f(0xf9)];if(_0x2f13e2===undefined)_0x2f13e2=0x15;const _0x169776=await _0x40c151['getForeignStateAsync'](_0x440b26);if(_0x169776&&typeof _0x169776['val']===_0x14f78f(0x14f)&&_0x169776[_0x14f78f(0xe0)]<_0x2f13e2-0.5){_0x40c151[_0x14f78f(0x12d)][_0x14f78f(0xa5)](_0x14f78f(0x146)+_0x229acf+_0x14f78f(0x129)+_0xd0bacb['location']+'\x27\x20(Match:\x20'+_0x40908b+_0x14f78f(0xa3)+_0x2f13e2+'Â°C\x20(Vorlauf:\x20'+_0x29142d+'\x20min).'),await _0x40c151[_0x14f78f(0x138)](_0x440b26,_0x2f13e2),await logAutomationAction(_0x40c151,_0x14f78f(0xba)+_0xd0bacb[_0x14f78f(0xdd)]+_0x14f78f(0xd8)+_0x2f13e2+_0x14f78f(0x112)+_0x229acf+')'),lastActions[_0x14f78f(0xd6)+_0xd0bacb[_0x14f78f(0xdd)]]=_0x52ecf5;const _0x229c24=_0x435039[_0x14f78f(0x12e)](_0x565f43=>_0x565f43['room']===_0xd0bacb[_0x14f78f(0xdd)]);if(_0x229c24!==-0x1)_0x435039[_0x14f78f(0xfc)](_0x229c24,0x1);_0x435039[_0x14f78f(0x97)]({'room':_0xd0bacb[_0x14f78f(0xdd)],'target':_0x2f13e2,'until':_0x8f1121[_0x14f78f(0xd5)]()}),_0x48cb33=!![];}}}}}}}_0x48cb33&&await _0x40c151[_0x14f78f(0xf6)](_0x14f78f(0x96),{'val':JSON[_0x14f78f(0xff)](_0x435039),'ack':!![]});}catch(_0x5bf148){_0x40c151[_0x14f78f(0x12d)][_0x14f78f(0x137)]('Calendar\x20Check\x20Error:\x20'+_0x5bf148[_0x14f78f(0x144)]);}}async function manageMpcIntervention(_0x21c7e3,_0x12e8a4,_0x2bc63c){const _0x5f4ae5=a1_0x35039f;try{const _0xf07c62=_0x5f4ae5(0x148),_0x521f07=await _0x21c7e3[_0x5f4ae5(0xa8)](_0xf07c62);let _0x18ffcf=[];if(_0x521f07&&_0x521f07['val'])try{_0x18ffcf=JSON['parse'](_0x521f07[_0x5f4ae5(0xe0)]);}catch(_0x45a536){}const _0x24a508=_0x18ffcf[_0x5f4ae5(0x11f)](_0x12e8a4);if(_0x2bc63c===_0x5f4ae5(0xf5))_0x24a508===-0x1&&(_0x18ffcf[_0x5f4ae5(0x97)](_0x12e8a4),await _0x21c7e3['setStateAsync'](_0xf07c62,{'val':JSON[_0x5f4ae5(0xff)](_0x18ffcf),'ack':!![]}));else _0x2bc63c===_0x5f4ae5(0xd0)&&(_0x24a508!==-0x1&&(_0x18ffcf[_0x5f4ae5(0xfc)](_0x24a508,0x1),await _0x21c7e3[_0x5f4ae5(0xf6)](_0xf07c62,{'val':JSON['stringify'](_0x18ffcf),'ack':!![]})));}catch(_0x26bccd){}}function a1_0xd3c0(_0x2af546,_0x5c7e6b){const _0xb004af=a1_0x5ad2();return a1_0xd3c0=function(_0x1056d8,_0x1cd812){_0x1056d8=_0x1056d8-0x96;let _0x5ad2e4=_0xb004af[_0x1056d8];return _0x5ad2e4;},a1_0xd3c0(_0x2af546,_0x5c7e6b);}async function cleanupGhostInterventions(_0x5e7c55){const _0x43675a=a1_0x35039f;try{const _0x1bdcc4=_0x43675a(0x148),_0x2b41e4=await _0x5e7c55['getStateAsync'](_0x1bdcc4);if(!_0x2b41e4||!_0x2b41e4['val'])return;const _0x1da684=JSON['parse'](_0x2b41e4[_0x43675a(0xe0)]);if(!Array[_0x43675a(0x10c)](_0x1da684)||_0x1da684[_0x43675a(0x119)]===0x0)return;let _0x1a1260={'default':0x15};try{const _0x5d5ae1=await _0x5e7c55['getStateAsync'](_0x43675a(0x160));if(_0x5d5ae1&&_0x5d5ae1['val'])_0x1a1260=JSON[_0x43675a(0x157)](_0x5d5ae1['val']);}catch(_0x3e4919){}let _0x38a981=[];try{const _0x38b757=await _0x5e7c55[_0x43675a(0xa8)]('analysis.energy.ventilationAlerts');if(_0x38b757&&_0x38b757[_0x43675a(0xe0)])_0x38a981=JSON[_0x43675a(0x157)](_0x38b757[_0x43675a(0xe0)]);}catch(_0x1020af){}let _0xaa552d={},_0x499fb8=![];try{const _0x55d718=await _0x5e7c55[_0x43675a(0xa8)](_0x43675a(0x9a));if(_0x55d718&&_0x55d718['val'])_0xaa552d=JSON[_0x43675a(0x157)](_0x55d718['val']);}catch(_0x2b87cb){}if(_0xaa552d[_0x43675a(0x10e)]){const _0x3bcde2=Date[_0x43675a(0xfd)]();for(const [_0x19a2af,_0x20f3f8]of Object[_0x43675a(0x110)](_0xaa552d[_0x43675a(0x10e)])){_0x3bcde2-_0x20f3f8>PENALTY_TTL&&(delete _0xaa552d[_0x19a2af],delete _0xaa552d[_0x43675a(0x10e)][_0x19a2af],_0x499fb8=!![],_0x5e7c55[_0x43675a(0x12d)][_0x43675a(0xa5)](_0x43675a(0x136)+_0x19a2af+'\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.'));}}const _0x27f4a3=_0x5e7c55[_0x43675a(0xee)]['devices']||[];let _0x50b7fb=![];for(let _0x3e2ab7=_0x1da684['length']-0x1;_0x3e2ab7>=0x0;_0x3e2ab7--){const _0x32c144=_0x1da684[_0x3e2ab7],_0x136036=_0x27f4a3[_0x43675a(0xc3)](_0x7db88f=>normalize(_0x7db88f[_0x43675a(0xdd)])===normalize(_0x32c144)&&(_0x7db88f[_0x43675a(0xfe)]===_0x43675a(0x123)||_0x7db88f[_0x43675a(0xfe)]==='thermostat'));if(!_0x136036){_0x5e7c55[_0x43675a(0x12d)][_0x43675a(0x137)](_0x43675a(0x12b)+_0x32c144+_0x43675a(0xa4)),_0x1da684[_0x43675a(0xfc)](_0x3e2ab7,0x1),_0x50b7fb=!![];continue;}if(_0x136036){const _0x1f5884=await findRelatedId(_0x5e7c55,_0x136036['id'],_0x43675a(0x149)),_0x5dfe7c=await _0x5e7c55['getForeignStateAsync'](_0x136036['id']);if(_0x1f5884){const _0x54fdd6=await _0x5e7c55['getForeignStateAsync'](_0x1f5884);if(_0x54fdd6&&typeof _0x54fdd6[_0x43675a(0xe0)]===_0x43675a(0x14f)){let _0x24208a=![],_0x481b3d='';Math[_0x43675a(0x15b)](_0x54fdd6[_0x43675a(0xe0)]-ECO_TEMP)>0.5&&(_0x24208a=!![],_0x481b3d='manual');if(!_0x24208a&&_0x5dfe7c&&typeof _0x5dfe7c['val']===_0x43675a(0x14f)){const _0x58ab30=_0x1a1260[_0x32c144]||_0x1a1260['default']||0x15;_0x5dfe7c['val']<_0x58ab30+0.2&&(_0x24208a=!![],_0x481b3d=_0x43675a(0x145));}if(_0x24208a){if(_0x481b3d===_0x43675a(0xf3)){_0x5e7c55['log']['info'](_0x43675a(0x10d)+_0x32c144+_0x43675a(0xae)+_0x54fdd6[_0x43675a(0xe0)]+_0x43675a(0x147)+ECO_TEMP+_0x43675a(0x122));const _0x259057=lastActions[_0x43675a(0xd6)+_0x32c144],_0x1b8f77=_0x259057&&Date[_0x43675a(0xfd)]()-_0x259057<0x2*0x3c*0x3e8;if(!_0x1b8f77&&_0x54fdd6[_0x43675a(0xe0)]>ECO_TEMP+0.5){_0x5e7c55[_0x43675a(0x15f)]&&(_0x5e7c55[_0x43675a(0x12d)]['info'](_0x43675a(0x107)+_0x32c144+_0x43675a(0x13a)),_0x5e7c55[_0x43675a(0x15f)]('TRAIN_RL_PENALTY',{'room':_0x32c144}));const _0x444fc7=_0x32c144+'_'+new Date()[_0x43675a(0xeb)]();if(!_0xaa552d[_0x444fc7]){_0xaa552d[_0x444fc7]=0x1;if(!_0xaa552d[_0x43675a(0x10e)])_0xaa552d[_0x43675a(0x10e)]={};_0xaa552d[_0x43675a(0x10e)][_0x444fc7]=Date[_0x43675a(0xfd)](),_0x499fb8=!![];}}else _0x1b8f77&&_0x5e7c55['log'][_0x43675a(0xa5)](_0x43675a(0xcf)+_0x32c144+_0x43675a(0xb0));}else{if(_0x481b3d===_0x43675a(0x145)){let _0x380ffe=![];if(_0x38a981[_0x43675a(0xc3)](_0x2f763c=>_0x2f763c[_0x43675a(0x134)]===_0x32c144))_0x380ffe=!![];const _0x2f3d7e=_0x27f4a3[_0x43675a(0x9e)](_0x2321b6=>normalize(_0x2321b6[_0x43675a(0xdd)])===normalize(_0x32c144)&&(_0x2321b6[_0x43675a(0xfe)]===_0x43675a(0xc7)||_0x2321b6[_0x43675a(0xfe)]===_0x43675a(0xec)||_0x2321b6['type']===_0x43675a(0x9b)));for(const _0x3c037e of _0x2f3d7e){try{const _0x2aee6a=await _0x5e7c55['getForeignStateAsync'](_0x3c037e['id']);if(_0x2aee6a&&(_0x2aee6a[_0x43675a(0xe0)]===!![]||_0x2aee6a[_0x43675a(0xe0)]===0x1||String(_0x2aee6a[_0x43675a(0xe0)])[_0x43675a(0xdf)]()===_0x43675a(0x12a)))_0x380ffe=!![];}catch(_0x2d11ed){}}if(_0x380ffe)_0x5e7c55[_0x43675a(0x12d)][_0x43675a(0xa5)](_0x43675a(0x126)+_0x32c144+_0x43675a(0xf7));else{const _0x2fc918=_0x1a1260[_0x32c144]||_0x1a1260['default']||0x15;_0x5e7c55[_0x43675a(0x12d)][_0x43675a(0xa5)](_0x43675a(0xe8)+_0x32c144+'\x20erreicht\x20Limit\x20('+_0x5dfe7c[_0x43675a(0xe0)]+_0x43675a(0xc2)+(_0x2fc918+0.2)+_0x43675a(0x151)),await _0x5e7c55['setForeignStateAsync'](_0x1f5884,_0x2fc918),await logAutomationAction(_0x5e7c55,_0x43675a(0xa2)+_0x32c144+_0x43675a(0xc6)+_0x2fc918+'Â°C'),lastActions[_0x43675a(0x13b)+_0x32c144]=Date[_0x43675a(0xfd)]();}}}_0x1da684['splice'](_0x3e2ab7,0x1),_0x50b7fb=!![];}}}}}_0x50b7fb&&await _0x5e7c55[_0x43675a(0xf6)](_0x1bdcc4,{'val':JSON['stringify'](_0x1da684),'ack':!![]}),_0x499fb8&&await _0x5e7c55[_0x43675a(0xf6)]('analysis.energy.rlPenalties',{'val':JSON['stringify'](_0xaa552d),'ack':!![]});}catch(_0x429047){}}function a1_0x5ad2(){const _0x3e5480=['dimmer','[CAL]\x20','\x20min).','valveMapping','eventStart','temp','.1.TEMPERATURE','7385301PRpVXi','replace','Â°C\x20<\x20','find','(((.+)+)+)+$','.1.LEVEL',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','window','Ist','analysis.energy.warmupSources','approved','81xQkSMN','forEach','map','1385IFZhZU','ðŸ“…\x20[MPC\x20INFO]\x20','remove','\x20gefunden!','messwert','3858AccESA','local_temperature','getTime','cal_','hm-rpc','\x20->\x20','analysis.automation.confidenceThreshold','Â°C!\x20(Puffer\x20leer).','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','Â°C\x20(Kalender-Schutz)','location','toString','toLowerCase','val','45oVjkce','consultButler','unshift','sort','Enforcement\x20Monitor\x20Error:\x20','./ai_agent','488460frWGrx','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','getHours','sensor','thermostat.setpoint','config','analysis.energy.schedulePreview','stellwert','apply','string','manual','thermostat','add','setStateAsync','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','mpc_','default','includes','trim','splice','now','type','stringify','calendarSelection','date','1fKYBkN','light','write','Â°C!\x20(Puffer:\x20','slice','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','.4.VALVE_STATE','error','system.mode','PrÃ¤diktion:\x20','isArray','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','_meta','devices','entries','Unbekannt','Â°C\x20(via\x20','calendarInstance','rÃ¼ckkehr','level','normal','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','occupied_heating_setpoint','length','.4.SET_TEMPERATURE','position','score',':\x20Aufheizen\x20auf\x20','soll','indexOf','\x20auf\x20','analysis.automation.lastAction','Â°C).\x20Entferne\x20Status.','temperature','values','target','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','state','SET_POINT_TEMPERATURE',']:\x20Raum-Trigger\x20\x27','open','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','1646128TTJMZH','log','findIndex','Classic','exports','off','_date','toUpperCase','room','target_temperature','ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27','warn','setForeignStateAsync','168700qlIiUI','\x20wurde\x20manuell\x20erhÃ¶ht.','rescue_','\x20wieder\x20auf\x20','split','_calName','Â°C\x20->\x20','unit','Fehlt','getForeignStateAsync','20664uDyftA','message','too_cold','ðŸ“…\x20SMART\x20SCHEDULE\x20[','Â°C\x20(nicht\x20','analysis.energy.mpcActiveInterventions','setpoint','PERFECT','analysis.automation.mode','thermostatMapping','constructor','valve','number','ist','Â°C).\x20Sparmodus\x20beendet!','level.temperature','Unknown','[FORCE]\x20','.1.SET_POINT_TEMPERATURE','join','parse','minutes_safe','Soll','openknx','abs','Â°C.','value.valve','valve_position','sendToPythonWrapper','analysis.energy.warmupTargets','analysis.energy.activeEnforcements','push','.1.ACTUAL_TEMPERATURE','Manuelles\x20Mapping','analysis.energy.rlPenalties','contact','event','useCalendar','filter','getForeignObjectAsync','.data.table','\x20->\x20Schalte\x20','[WATCHDOG]\x20',')\x20aktiv.\x20Heize\x20auf\x20','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','info','urlaub\x20ende','search','getStateAsync','active','analysis.automation.actionLog','1200829fvfQyl','current_heating_setpoint','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','\x20ist\x20auf\x20','pi_heating_demand','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','[MPC]\x20','summary','analysis.energy.warmupTimes','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','name','ankunft','common','triggerTime'];a1_0x5ad2=function(){return _0x3e5480;};return a1_0x5ad2();}async function applyEnergySavings(_0x5f07a0,_0x1e43ab){const _0x430f41=a1_0x35039f;await cleanupGhostInterventions(_0x5f07a0);if(!_0x1e43ab||_0x1e43ab[_0x430f41(0x119)]===0x0)return;const _0x45fc84=_0x5f07a0[_0x430f41(0xee)][_0x430f41(0x10f)]||[],_0x8be04c=Date['now']();for(const _0x4976d9 of _0x1e43ab){const _0x341fc2=_0x4976d9[_0x430f41(0x134)],_0x1e2627=_0x4976d9[_0x430f41(0x158)],_0x4a1a30=_0x4976d9[_0x430f41(0x125)]||0x15;if(lastActions[_0x430f41(0x13b)+_0x341fc2]&&_0x8be04c-lastActions[_0x430f41(0x13b)+_0x341fc2]<RESCUE_LOCK_MS)continue;const _0x5e0ea8=_0x45fc84[_0x430f41(0xc3)](_0x265c02=>normalize(_0x265c02['location'])===normalize(_0x341fc2)&&(_0x265c02[_0x430f41(0xfe)]===_0x430f41(0x123)||_0x265c02[_0x430f41(0xfe)]==='thermostat'));if(!_0x5e0ea8)continue;const _0x38e585=await findRelatedId(_0x5f07a0,_0x5e0ea8['id'],_0x430f41(0x149));if(_0x38e585){if(lastActions[_0x430f41(0xf8)+_0x341fc2]&&_0x8be04c-lastActions['mpc_'+_0x341fc2]<0x1e*0x3c*0x3e8)continue;const _0x5c4c71=await _0x5f07a0[_0x430f41(0x142)](_0x38e585);if(_0x5c4c71&&typeof _0x5c4c71[_0x430f41(0xe0)]==='number'){const _0x2aa679=_0x5c4c71[_0x430f41(0xe0)];_0x2aa679!==ECO_TEMP&&await manageMpcIntervention(_0x5f07a0,_0x341fc2,_0x430f41(0xd0));if(_0x1e2627>0x1e)_0x2aa679>ECO_TEMP+0.5&&(_0x5f07a0[_0x430f41(0x12d)]['info'](_0x430f41(0x117)+_0x341fc2+_0x430f41(0x120)+ECO_TEMP+_0x430f41(0x105)+_0x1e2627+'\x20min)'),await _0x5f07a0[_0x430f41(0x138)](_0x38e585,ECO_TEMP),await manageMpcIntervention(_0x5f07a0,_0x341fc2,'add'),lastActions[_0x430f41(0xf8)+_0x341fc2]=_0x8be04c,await logAutomationAction(_0x5f07a0,_0x430f41(0xb1)+_0x341fc2+':\x20Absenkung\x20auf\x20'+ECO_TEMP+'Â°C'));else _0x1e2627<=0xf&&(_0x2aa679<_0x4a1a30&&(_0x5f07a0['log'][_0x430f41(0xa5)](_0x430f41(0xea)+_0x341fc2+_0x430f41(0x13c)+_0x4a1a30+_0x430f41(0xda)),await _0x5f07a0[_0x430f41(0x138)](_0x38e585,_0x4a1a30),await manageMpcIntervention(_0x5f07a0,_0x341fc2,'remove'),lastActions[_0x430f41(0xf8)+_0x341fc2]=_0x8be04c,await logAutomationAction(_0x5f07a0,_0x430f41(0xb1)+_0x341fc2+_0x430f41(0x11d)+_0x4a1a30+'Â°C')));}}else _0x5f07a0[_0x430f41(0x12d)][_0x430f41(0x137)](_0x430f41(0xdb)+_0x341fc2+_0x430f41(0xd1));}}module[a1_0x35039f(0x130)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};