function a1_0x4760(){const _0x4575fe=['remove',':\x20Aufheizen\x20auf\x20',']:\x20Raum-Trigger\x20\x27','consultButler','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','Â°C\x20(nicht\x20','.data.table','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','score','thermostat','[MPC]\x20','room','indexOf','[CAL]\x20','forEach','sendToPythonWrapper','./ai_agent','analysis.energy.warmupTimes','slice','\x20min).','\x20wieder\x20auf\x20','find','Manuelles\x20Mapping','toString','reason','event','rescue_','cal_','trim','PERFECT','join','open','level.valve','ankunft','length','thermostat.setpoint','config','entries','analysis.automation.lastAction','1771581aKqJrU','triggerTime','exports','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','Â°C\x20(Kalender-Schutz)','level','name','stellwert','59604kluThb','.1.SET_POINT_TEMPERATURE','light','error','wert','val','log','local_temperature','getForeignObjectAsync','useCalendar','getTime','analysis.energy.schedulePreview','\x20wurde\x20manuell\x20erhÃ¶ht.','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','contact','(((.+)+)+)+$','\x20->\x20','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','abs','pi_heating_demand','\x27\x20(Match:\x20','getStateAsync','sensor','PrÃ¤diktion:\x20','Unbekannt','analysis.energy.warmupSources','warn','SET','analysis.energy.ventilationAlerts','Â°C!\x20(Puffer\x20leer).','until','.1.TEMPERATURE','_calName','5gLVpIA','type','switch','filter','temperature','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','now','ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','SET_POINT_TEMPERATURE','window','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','messwert','setpoint','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','rÃ¼ckkehr','\x20min)','normal','eventStart','Auto-Erkennung','off','location','analysis.automation.actionLog','1037010RAtlkP','24aPmikc','920GLfpYx','valve',')\x20aktiv.\x20Heize\x20auf\x20','Ist','system.mode','current_heating_setpoint','split','_meta','Nicht\x20gefunden','position','manual','summary','calendarInstance','push','isArray','parse','Soll','set','[WATCHDOG]\x20','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','urlaub\x20ende','setStateAsync','unit','default','setForeignStateAsync','localeCompare','common','valve_position','stringify','includes','add','Enforcement\x20Monitor\x20Error:\x20','date','2771148LfepuG','\x20erreicht\x20Limit\x20(','Â°C\x20->\x20','analysis.energy.rlPenalties','info','TRAIN_RL_PENALTY','_date','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','mpc_','number','role','level.temperature','.1.LEVEL','constructor','target','string','ACTUAL','target_temperature','1201482PtFlYG','106263ksBvuY','search',':\x20Absenkung\x20auf\x20','sort','\x20auf\x20','temp','toLowerCase','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','analysis.energy.activeEnforcements','hm-rpc','thermostatMapping','replace','.4.VALVE_STATE','toUpperCase','Â°C).\x20Entferne\x20Status.','values','currentSystemMode','occupied_heating_setpoint','message','apply','getForeignStateAsync','calendarSelection','3382304iUXtzP','splice','devices','value.valve','analysis.energy.mpcActiveInterventions','\x20gefunden!','too_cold'];a1_0x4760=function(){return _0x4575fe;};return a1_0x4760();}const a1_0x5554c4=a1_0x28f0;(function(_0x41394,_0x418aab){const _0x31b17f=a1_0x28f0,_0x595bb4=_0x41394();while(!![]){try{const _0x4c9252=parseInt(_0x31b17f(0x1cd))/0x1+-parseInt(_0x31b17f(0x199))/0x2*(parseInt(_0x31b17f(0x21c))/0x3)+parseInt(_0x31b17f(0x1bb))/0x4*(-parseInt(_0x31b17f(0x23d))/0x5)+parseInt(_0x31b17f(0x198))/0x6+-parseInt(_0x31b17f(0x214))/0x7+-parseInt(_0x31b17f(0x1e4))/0x8+parseInt(_0x31b17f(0x1ce))/0x9*(parseInt(_0x31b17f(0x19a))/0xa);if(_0x4c9252===_0x418aab)break;else _0x595bb4['push'](_0x595bb4['shift']());}catch(_0x347b01){_0x595bb4['push'](_0x595bb4['shift']());}}}(a1_0x4760,0xd05ef));const a1_0x1cd5cf=(function(){let _0x2eefd7=!![];return function(_0x5719a5,_0x338f74){const _0x2ee8af=_0x2eefd7?function(){const _0x2b13a1=a1_0x28f0;if(_0x338f74){const _0x15d22e=_0x338f74[_0x2b13a1(0x1e1)](_0x5719a5,arguments);return _0x338f74=null,_0x15d22e;}}:function(){};return _0x2eefd7=![],_0x2ee8af;};}()),a1_0x52a851=a1_0x1cd5cf(this,function(){const _0x234145=a1_0x28f0;return a1_0x52a851[_0x234145(0x204)]()['search'](_0x234145(0x22b))[_0x234145(0x204)]()[_0x234145(0x1c8)](a1_0x52a851)[_0x234145(0x1cf)]('(((.+)+)+)+$');});function a1_0x28f0(_0x1285a5,_0x55e6ce){const _0x4183ec=a1_0x4760();return a1_0x28f0=function(_0x52a851,_0x1cd5cf){_0x52a851=_0x52a851-0x184;let _0x47605f=_0x4183ec[_0x52a851];return _0x47605f;},a1_0x28f0(_0x1285a5,_0x55e6ce);}a1_0x52a851();'use strict';const aiAgent=require(a1_0x5554c4(0x1fd)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x561e2f){const _0x41c4d8=a1_0x5554c4;if(!_0x561e2f)return'';return _0x561e2f[_0x41c4d8(0x1d4)]()[_0x41c4d8(0x1d9)](/\s+/g,'')[_0x41c4d8(0x209)]();}async function logAutomationAction(_0x17ed86,_0x66655c){const _0x2ff0b3=a1_0x5554c4;await _0x17ed86[_0x2ff0b3(0x1af)](_0x2ff0b3(0x213),{'val':_0x66655c,'ack':!![]});try{const _0x1e3cb6=_0x2ff0b3(0x197),_0x548e58=await _0x17ed86['getStateAsync'](_0x1e3cb6);let _0x419c76=[];if(_0x548e58&&_0x548e58['val'])try{_0x419c76=JSON[_0x2ff0b3(0x1a9)](_0x548e58[_0x2ff0b3(0x221)]);}catch(_0x1c9255){}_0x419c76['unshift']({'ts':Date['now'](),'msg':_0x66655c});if(_0x419c76[_0x2ff0b3(0x20f)]>0x32)_0x419c76=_0x419c76[_0x2ff0b3(0x1ff)](0x0,0x32);await _0x17ed86[_0x2ff0b3(0x1af)](_0x1e3cb6,{'val':JSON['stringify'](_0x419c76),'ack':!![]});}catch(_0x7e2749){}}async function handlePrediction(_0x254891,_0x4e881d,_0x1602fb){const _0x367e44=a1_0x5554c4;if(!_0x4e881d||_0x4e881d==='Unknown')return;let _0x2066bc='off',_0x3a7add=0.6;try{const _0x4a3e42=await _0x254891['getStateAsync']('analysis.automation.mode');if(_0x4a3e42&&_0x4a3e42[_0x367e44(0x221)])_0x2066bc=_0x4a3e42[_0x367e44(0x221)];const _0x3eef95=await _0x254891[_0x367e44(0x231)]('analysis.automation.confidenceThreshold');if(_0x3eef95&&_0x3eef95[_0x367e44(0x221)])_0x3a7add=_0x3eef95[_0x367e44(0x221)];}catch(_0x2950a0){}if(_0x2066bc===_0x367e44(0x195)||_0x1602fb<_0x3a7add)return;const _0x486d4e=Date['now']();if(lastActions[_0x4e881d]&&_0x486d4e-lastActions[_0x4e881d]<COOLDOWN_MS)return;const _0x313619=_0x254891[_0x367e44(0x211)][_0x367e44(0x1e6)]||[],_0x31fd01=normalize(_0x4e881d),_0x4c7128=_0x313619['find'](_0xe22487=>normalize(_0xe22487[_0x367e44(0x196)])===_0x31fd01&&(_0xe22487[_0x367e44(0x23e)]===_0x367e44(0x21e)||_0xe22487[_0x367e44(0x23e)]==='dimmer'||_0xe22487['type']===_0x367e44(0x184)));if(!_0x4c7128)return;const _0x4f9aff=await aiAgent[_0x367e44(0x1ee)](_0x254891,_0x4e881d,_0x4c7128[_0x367e44(0x21a)],_0x1602fb);if(!_0x4f9aff['approved'])return;const _0x2db36d=_0x367e44(0x233)+_0x4e881d+'\x20->\x20Schalte\x20'+_0x4c7128[_0x367e44(0x21a)]+'\x20('+_0x4f9aff[_0x367e44(0x205)]+')';await logAutomationAction(_0x254891,'['+_0x2066bc[_0x367e44(0x1db)]()+']\x20'+_0x2db36d);if(_0x2066bc==='active'){const _0x5b8218=await _0x254891[_0x367e44(0x1e2)](_0x4c7128['id']);(!_0x5b8218||!_0x5b8218[_0x367e44(0x221)]&&_0x5b8218[_0x367e44(0x221)]!==!![])&&await _0x254891[_0x367e44(0x1b2)](_0x4c7128['id'],!![]),lastActions[_0x4e881d]=_0x486d4e;}}async function findRelatedId(_0x1936bf,_0x2b2d0d,_0x3d421c='setpoint'){const _0x3e32bb=a1_0x5554c4;if(_0x3d421c===_0x3e32bb(0x18e)&&_0x1936bf[_0x3e32bb(0x211)][_0x3e32bb(0x1d8)]){let _0x1aeec6=_0x1936bf['config']['thermostatMapping'];if(typeof _0x1aeec6===_0x3e32bb(0x1ca))try{_0x1aeec6=JSON[_0x3e32bb(0x1a9)](_0x1aeec6);}catch(_0x25095e){}if(_0x1aeec6&&_0x1aeec6[_0x2b2d0d])return _0x1aeec6[_0x2b2d0d];}if(_0x3d421c===_0x3e32bb(0x19b)&&_0x1936bf[_0x3e32bb(0x211)]['valveMapping']){let _0x321c56=_0x1936bf[_0x3e32bb(0x211)]['valveMapping'];if(typeof _0x321c56===_0x3e32bb(0x1ca))try{_0x321c56=JSON[_0x3e32bb(0x1a9)](_0x321c56);}catch(_0x33d467){}if(_0x321c56&&_0x321c56[_0x2b2d0d])return _0x321c56[_0x2b2d0d];}let _0xe851ca=[];if(_0x3d421c===_0x3e32bb(0x18e))_0xe851ca=[{'s':'.1.ACTUAL_TEMPERATURE','t':_0x3e32bb(0x21d)},{'s':'.1.TEMPERATURE','t':_0x3e32bb(0x21d)},{'s':_0x3e32bb(0x23b),'t':'.4.SET_TEMPERATURE'},{'s':'ACTUAL_TEMPERATURE','t':_0x3e32bb(0x18a)},{'s':_0x3e32bb(0x223),'t':_0x3e32bb(0x1df)},{'s':'local_temperature','t':_0x3e32bb(0x19f)},{'s':_0x3e32bb(0x186),'t':_0x3e32bb(0x1cc)},{'s':_0x3e32bb(0x1cb),'t':_0x3e32bb(0x237)},{'s':_0x3e32bb(0x19d),'t':_0x3e32bb(0x1aa)},{'s':_0x3e32bb(0x186),'t':_0x3e32bb(0x18e)}];else _0x3d421c===_0x3e32bb(0x19b)&&(_0xe851ca=[{'s':'.1.ACTUAL_TEMPERATURE','t':_0x3e32bb(0x1c7)},{'s':_0x3e32bb(0x23b),'t':_0x3e32bb(0x1c7)},{'s':_0x3e32bb(0x23b),'t':_0x3e32bb(0x1da)},{'s':_0x3e32bb(0x223),'t':_0x3e32bb(0x22f)},{'s':_0x3e32bb(0x186),'t':_0x3e32bb(0x1b5)},{'s':_0x3e32bb(0x186),'t':_0x3e32bb(0x219)}]);for(const _0xf9c5de of _0xe851ca){if(_0x2b2d0d['includes'](_0xf9c5de['s'])){const _0x3c724c=_0x2b2d0d['replace'](_0xf9c5de['s'],_0xf9c5de['t']),_0x1b8a2e=await _0x1936bf[_0x3e32bb(0x224)](_0x3c724c);if(_0x1b8a2e)return _0x3c724c;}}try{const _0x2844ba=_0x2b2d0d['split']('.');if(_0x2844ba[_0x3e32bb(0x20f)]>0x2){const _0x30d8fb=_0x2844ba[_0x3e32bb(0x1ff)](0x0,-0x1)[_0x3e32bb(0x20b)]('.'),_0x7e6dc8=await _0x1936bf['getForeignObjectsAsync'](_0x30d8fb+'.*'),_0x110289=[],_0xe852c0=_0x2b2d0d['split'](/[._]+/)[_0x3e32bb(0x185)](_0x177b5=>!['openknx','0',_0x3e32bb(0x1d7),'ist',_0x3e32bb(0x220),_0x3e32bb(0x186),'actual','sensor',_0x3e32bb(0x18d),'state'][_0x3e32bb(0x1b7)](_0x177b5[_0x3e32bb(0x1d4)]()));for(const [_0xa97699,_0x3ca605]of Object['entries'](_0x7e6dc8)){if(_0xa97699===_0x2b2d0d)continue;if(_0x3ca605&&_0x3ca605[_0x3e32bb(0x1b4)]){const _0x2228e2=_0xa97699[_0x3e32bb(0x1d4)](),_0x2867c1=(_0x3ca605[_0x3e32bb(0x1b4)][_0x3e32bb(0x1c5)]||'')[_0x3e32bb(0x1d4)](),_0x14d8f8=(_0x3ca605[_0x3e32bb(0x1b4)][_0x3e32bb(0x1b0)]||'')[_0x3e32bb(0x1d4)]();let _0x58076a=![];if(_0x3d421c===_0x3e32bb(0x18e)&&_0x3ca605['common']['write']===!![])_0x58076a=_0x2228e2[_0x3e32bb(0x1b7)](_0x3e32bb(0x1ab))||_0x2228e2[_0x3e32bb(0x1b7)]('soll')||_0x2228e2[_0x3e32bb(0x1b7)](_0x3e32bb(0x1c9))||_0x2867c1[_0x3e32bb(0x1b7)](_0x3e32bb(0x1c6))||_0x2867c1[_0x3e32bb(0x1b7)](_0x3e32bb(0x210));else _0x3d421c==='valve'&&(_0x58076a=_0x2228e2[_0x3e32bb(0x1b7)]('level')||_0x2228e2[_0x3e32bb(0x1b7)](_0x3e32bb(0x19b))||_0x2228e2[_0x3e32bb(0x1b7)](_0x3e32bb(0x21b))||_0x2228e2[_0x3e32bb(0x1b7)](_0x3e32bb(0x1a3))||_0x2867c1['includes'](_0x3e32bb(0x20d))||_0x2867c1[_0x3e32bb(0x1b7)](_0x3e32bb(0x1e7))||_0x14d8f8[_0x3e32bb(0x1b7)]('%'));if(_0x58076a){const _0x48f275=_0xa97699[_0x3e32bb(0x1a0)](/[._]+/)['map'](_0x2e91ce=>_0x2e91ce['toLowerCase']());let _0x238f6b=0x0;_0xe852c0['forEach'](_0x32987c=>{const _0x2204af=_0x3e32bb;if(_0x48f275[_0x2204af(0x1b7)](_0x32987c[_0x2204af(0x1d4)]()))_0x238f6b++;}),_0x110289[_0x3e32bb(0x1a7)]({'id':_0xa97699,'score':_0x238f6b});}}}if(_0x110289[_0x3e32bb(0x20f)]>0x0){_0x110289['sort']((_0x5c8b27,_0x1d5da3)=>_0x1d5da3['score']-_0x5c8b27['score']);if(_0x110289[0x0][_0x3e32bb(0x1f5)]>0x0)return _0x110289[0x0]['id'];}}}catch(_0x5490eb){}return null;}async function scanThermostats(_0x42e534){const _0x3ec70b=a1_0x5554c4,_0x2d8280=_0x42e534[_0x3ec70b(0x211)][_0x3ec70b(0x1e6)]||[],_0x581d36=[],_0x1e4e89=_0x2d8280['filter'](_0x3fd827=>_0x3fd827['id']&&_0x3fd827['id'][_0x3ec70b(0x1b7)](_0x3ec70b(0x186))||_0x3fd827[_0x3ec70b(0x23e)]&&[_0x3ec70b(0x186),_0x3ec70b(0x1f6),_0x3ec70b(0x232)][_0x3ec70b(0x1b7)](_0x3fd827[_0x3ec70b(0x23e)])||_0x3fd827[_0x3ec70b(0x21a)]&&_0x3fd827[_0x3ec70b(0x21a)][_0x3ec70b(0x1d4)]()[_0x3ec70b(0x1b7)](_0x3ec70b(0x1d3)));for(const _0x221d10 of _0x1e4e89){const _0x3c4b19=await findRelatedId(_0x42e534,_0x221d10['id'],_0x3ec70b(0x18e)),_0x2d4e96=await findRelatedId(_0x42e534,_0x221d10['id'],_0x3ec70b(0x19b));let _0x4a729b=_0x3ec70b(0x1a2),_0x49fed1=![],_0x27d161=_0x42e534['config'][_0x3ec70b(0x1d8)]||{};if(typeof _0x27d161===_0x3ec70b(0x1ca))try{_0x27d161=JSON[_0x3ec70b(0x1a9)](_0x27d161);}catch(_0x355353){}let _0x476806=_0x42e534['config']['valveMapping']||{};if(typeof _0x476806==='string')try{_0x476806=JSON[_0x3ec70b(0x1a9)](_0x476806);}catch(_0x568735){}if(_0x27d161[_0x221d10['id']]&&_0x27d161[_0x221d10['id']]===_0x3c4b19||_0x476806[_0x221d10['id']]&&_0x476806[_0x221d10['id']]===_0x2d4e96)_0x4a729b=_0x3ec70b(0x203),_0x49fed1=!![];else(_0x3c4b19||_0x2d4e96)&&(_0x4a729b=_0x3ec70b(0x194));_0x581d36[_0x3ec70b(0x1a7)]({'room':_0x221d10[_0x3ec70b(0x196)]||_0x3ec70b(0x234),'sensorId':_0x221d10['id'],'setpointId':_0x3c4b19||'-','valveId':_0x2d4e96||'-','source':_0x4a729b,'isManual':_0x49fed1,'status':_0x3c4b19&&_0x2d4e96?_0x3ec70b(0x20a):_0x3c4b19?'OK':'Fehlt'});}return _0x581d36[_0x3ec70b(0x1d1)]((_0x1febe2,_0x3058c0)=>_0x1febe2[_0x3ec70b(0x1f8)][_0x3ec70b(0x1b3)](_0x3058c0[_0x3ec70b(0x1f8)]));}async function updateSchedulePreview(_0x29337f){const _0x2eab08=a1_0x5554c4;if(!_0x29337f[_0x2eab08(0x211)][_0x2eab08(0x225)]||!_0x29337f[_0x2eab08(0x211)][_0x2eab08(0x1a6)])return;let _0x1a9a5f={};try{const _0x5c81b6=await _0x29337f[_0x2eab08(0x231)](_0x2eab08(0x1fe));if(_0x5c81b6&&_0x5c81b6['val'])_0x1a9a5f=JSON[_0x2eab08(0x1a9)](_0x5c81b6[_0x2eab08(0x221)]);}catch(_0x16b32c){}const _0x189410=[],_0x1448a8=Date[_0x2eab08(0x188)](),_0x2259aa=0x30*0x3c*0x3c*0x3e8;try{const _0x3aebf3=await _0x29337f[_0x2eab08(0x1e2)](_0x29337f[_0x2eab08(0x211)]['calendarInstance']+_0x2eab08(0x1f3));if(!_0x3aebf3||!_0x3aebf3[_0x2eab08(0x221)])return;const _0x19625a=JSON[_0x2eab08(0x1a9)](_0x3aebf3[_0x2eab08(0x221)]),_0x51c528=_0x29337f['config']['calendarSelection']||[],_0x32b7b2=_0x29337f[_0x2eab08(0x211)]['devices']||[],_0x330947=new Set();_0x32b7b2['forEach'](_0x518ff8=>{const _0x141447=_0x2eab08;if(_0x518ff8['location'])_0x330947[_0x141447(0x1b8)](_0x518ff8[_0x141447(0x196)]);});for(const _0x1cf034 of _0x19625a){if(_0x1cf034[_0x2eab08(0x23c)]&&_0x51c528[_0x2eab08(0x20f)]>0x0&&!_0x51c528[_0x2eab08(0x1b7)](_0x1cf034[_0x2eab08(0x23c)]))continue;const _0x4ab946=_0x1cf034[_0x2eab08(0x1c1)]||_0x1cf034[_0x2eab08(0x193)]||_0x1cf034['date'];if(!_0x4ab946)continue;const _0x551b01=new Date(_0x4ab946),_0x2d51bb=_0x551b01['getTime']();if(isNaN(_0x2d51bb))continue;if(_0x2d51bb<_0x1448a8)continue;if(_0x2d51bb>_0x1448a8+_0x2259aa)continue;const _0x1ae9e4=(_0x1cf034[_0x2eab08(0x206)]||_0x1cf034[_0x2eab08(0x1a5)]||'')[_0x2eab08(0x1d4)]();let _0x3feb99=![],_0x39d3c5=[],_0x459736=_0x1cf034['event']||_0x1cf034['summary']||_0x2eab08(0x234);if(_0x1ae9e4[_0x2eab08(0x1b7)](_0x2eab08(0x1ae))||_0x1ae9e4[_0x2eab08(0x1b7)]('rÃ¼ckkehr')||_0x1ae9e4[_0x2eab08(0x1b7)](_0x2eab08(0x20e)))_0x3feb99=!![],_0x39d3c5=Array['from'](_0x330947);else for(const _0x6339c1 of _0x330947){if(_0x1ae9e4[_0x2eab08(0x1b7)](_0x6339c1[_0x2eab08(0x1d4)]()))_0x39d3c5[_0x2eab08(0x1a7)](_0x6339c1);}_0x39d3c5['length']>0x0&&_0x39d3c5[_0x2eab08(0x1fb)](_0x3dc9d0=>{const _0x20223b=_0x2eab08;let _0x2b9f35=0x3c;if(_0x3feb99){let _0x23d5b1=0x0;Object[_0x20223b(0x1dd)](_0x1a9a5f)['forEach'](_0x494e73=>{if(_0x494e73>_0x23d5b1)_0x23d5b1=_0x494e73;}),_0x2b9f35=_0x23d5b1>0x0?_0x23d5b1:0x78;}else _0x2b9f35=_0x1a9a5f[_0x3dc9d0]||0x3c;const _0x2b0466=new Date(_0x2d51bb-_0x2b9f35*0xea60);_0x189410[_0x20223b(0x1a7)]({'eventTime':_0x2d51bb,'triggerTime':_0x2b0466['getTime'](),'room':_0x3dc9d0,'minutes':_0x2b9f35,'reason':_0x459736,'isGlobal':_0x3feb99});});}}catch(_0xa8b132){}_0x189410[_0x2eab08(0x1d1)]((_0x1e63cd,_0x1bb0d0)=>_0x1e63cd[_0x2eab08(0x215)]-_0x1bb0d0[_0x2eab08(0x215)]);const _0x38b53e=_0x189410[_0x2eab08(0x1ff)](0x0,0x5);await _0x29337f[_0x2eab08(0x1af)](_0x2eab08(0x227),{'val':JSON[_0x2eab08(0x1b6)](_0x38b53e),'ack':!![]});}async function monitorEnforcements(_0x4bfe93){const _0x42c222=a1_0x5554c4;try{const _0xfc97a4=_0x42c222(0x1d6),_0x402f3b=await _0x4bfe93[_0x42c222(0x231)](_0xfc97a4);if(!_0x402f3b||!_0x402f3b[_0x42c222(0x221)])return;let _0x12c4ba=[];try{_0x12c4ba=JSON['parse'](_0x402f3b[_0x42c222(0x221)]);}catch(_0x2813cb){return;}if(!Array[_0x42c222(0x1a8)](_0x12c4ba)||_0x12c4ba[_0x42c222(0x20f)]===0x0)return;const _0x5366fd=Date[_0x42c222(0x188)](),_0x22454d=_0x4bfe93[_0x42c222(0x211)][_0x42c222(0x1e6)]||[];let _0x43ad17=![];for(let _0x2a1423=_0x12c4ba[_0x42c222(0x20f)]-0x1;_0x2a1423>=0x0;_0x2a1423--){const _0x5b8131=_0x12c4ba[_0x2a1423];if(_0x5366fd>=_0x5b8131[_0x42c222(0x23a)]){_0x4bfe93[_0x42c222(0x222)][_0x42c222(0x1bf)]('ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20'+_0x5b8131['room']+_0x42c222(0x1c2)),_0x12c4ba['splice'](_0x2a1423,0x1),_0x43ad17=!![];continue;}const _0x4d31fb=_0x22454d['find'](_0x123722=>normalize(_0x123722[_0x42c222(0x196)])===normalize(_0x5b8131[_0x42c222(0x1f8)])&&(_0x123722[_0x42c222(0x23e)]==='temperature'||_0x123722[_0x42c222(0x23e)]===_0x42c222(0x1f6)));if(_0x4d31fb){const _0x4534b8=await findRelatedId(_0x4bfe93,_0x4d31fb['id'],_0x42c222(0x18e));if(_0x4534b8){const _0x2456d2=await _0x4bfe93[_0x42c222(0x1e2)](_0x4534b8);_0x2456d2&&typeof _0x2456d2[_0x42c222(0x221)]===_0x42c222(0x1c4)&&(_0x2456d2['val']<0xf&&(_0x4bfe93['log']['warn'](_0x42c222(0x189)+_0x5b8131[_0x42c222(0x1f8)]+_0x42c222(0x1d2)+_0x2456d2[_0x42c222(0x221)]+_0x42c222(0x1f4)+_0x5b8131['target']+'Â°C.'),await _0x4bfe93[_0x42c222(0x1b2)](_0x4534b8,_0x5b8131[_0x42c222(0x1c9)]),await logAutomationAction(_0x4bfe93,'[FORCE]\x20'+_0x5b8131[_0x42c222(0x1f8)]+':\x20'+_0x2456d2['val']+_0x42c222(0x1bd)+_0x5b8131[_0x42c222(0x1c9)]+_0x42c222(0x218))));}}}_0x43ad17&&await _0x4bfe93[_0x42c222(0x1af)](_0xfc97a4,{'val':JSON['stringify'](_0x12c4ba),'ack':!![]});}catch(_0x1547b9){_0x4bfe93[_0x42c222(0x222)][_0x42c222(0x21f)](_0x42c222(0x1b9)+_0x1547b9[_0x42c222(0x1e0)]);}}async function checkCalendarTriggers(_0x4ec3ee){const _0xf1eff8=a1_0x5554c4;if(!_0x4ec3ee['config'][_0xf1eff8(0x225)]||!_0x4ec3ee[_0xf1eff8(0x211)][_0xf1eff8(0x1a6)])return;await updateSchedulePreview(_0x4ec3ee);let _0xeffec8={},_0x508dd6={};try{const _0xc31c9b=await _0x4ec3ee[_0xf1eff8(0x231)](_0xf1eff8(0x1fe));if(_0xc31c9b&&_0xc31c9b[_0xf1eff8(0x221)])_0xeffec8=JSON[_0xf1eff8(0x1a9)](_0xc31c9b[_0xf1eff8(0x221)]);const _0xbe2b59=await _0x4ec3ee[_0xf1eff8(0x231)](_0xf1eff8(0x235));if(_0xbe2b59&&_0xbe2b59['val'])_0x508dd6=JSON[_0xf1eff8(0x1a9)](_0xbe2b59[_0xf1eff8(0x221)]);}catch(_0x4c3d5a){}let _0x475bf8={'default':0x15};try{const _0x803ef0=await _0x4ec3ee[_0xf1eff8(0x231)]('analysis.energy.warmupTargets');if(_0x803ef0&&_0x803ef0[_0xf1eff8(0x221)])_0x475bf8=JSON[_0xf1eff8(0x1a9)](_0x803ef0[_0xf1eff8(0x221)]);}catch(_0x1d1f61){}let _0x402939=[];try{const _0x41ca17=await _0x4ec3ee[_0xf1eff8(0x231)]('analysis.energy.activeEnforcements');if(_0x41ca17&&_0x41ca17[_0xf1eff8(0x221)])_0x402939=JSON[_0xf1eff8(0x1a9)](_0x41ca17['val']);}catch(_0x5f17c5){}try{const _0x5c879d=await _0x4ec3ee[_0xf1eff8(0x1e2)](_0x4ec3ee[_0xf1eff8(0x211)][_0xf1eff8(0x1a6)]+_0xf1eff8(0x1f3));if(!_0x5c879d||!_0x5c879d['val'])return;const _0x466d30=JSON[_0xf1eff8(0x1a9)](_0x5c879d[_0xf1eff8(0x221)]),_0x5054c2=Date['now'](),_0xb79ca5=_0x4ec3ee[_0xf1eff8(0x211)][_0xf1eff8(0x1e6)]||[],_0xe7f9aa=_0x4ec3ee[_0xf1eff8(0x211)][_0xf1eff8(0x1e3)]||[];let _0x1b49f9=![];for(const _0x58e164 of _0x466d30){if(_0x58e164['_calName']&&_0xe7f9aa[_0xf1eff8(0x20f)]>0x0&&!_0xe7f9aa[_0xf1eff8(0x1b7)](_0x58e164[_0xf1eff8(0x23c)]))continue;const _0x17243c=_0x58e164[_0xf1eff8(0x1c1)]||_0x58e164[_0xf1eff8(0x193)]||_0x58e164[_0xf1eff8(0x1ba)];if(!_0x17243c)continue;const _0xba0309=new Date(_0x17243c);if(isNaN(_0xba0309[_0xf1eff8(0x226)]()))continue;const _0x9b6737=(_0x58e164[_0xf1eff8(0x206)]||_0x58e164['summary']||'')[_0xf1eff8(0x1d4)]();if(_0x9b6737['includes']('urlaub\x20ende')||_0x9b6737[_0xf1eff8(0x1b7)](_0xf1eff8(0x190))||_0x9b6737[_0xf1eff8(0x1b7)]('ankunft')){let _0x1fa7b5=0x0;Object['values'](_0xeffec8)[_0xf1eff8(0x1fb)](_0x66b5f3=>{if(_0x66b5f3>_0x1fa7b5)_0x1fa7b5=_0x66b5f3;});if(_0x1fa7b5===0x0)_0x1fa7b5=0x78;const _0x481353=_0xba0309['getTime']()-_0x1fa7b5*0xea60;_0x5054c2>=_0x481353&&_0x5054c2<_0xba0309[_0xf1eff8(0x226)]()&&(_0x4ec3ee[_0xf1eff8(0x1de)]!==_0xf1eff8(0x192)&&(_0x4ec3ee[_0xf1eff8(0x222)][_0xf1eff8(0x1bf)](_0xf1eff8(0x1ad)+_0x1fa7b5+_0xf1eff8(0x200)),await _0x4ec3ee[_0xf1eff8(0x1af)](_0xf1eff8(0x19e),{'val':'normal','ack':![]})));}for(const _0x3ea96a of _0xb79ca5){if(_0x3ea96a[_0xf1eff8(0x196)]){const _0x108f68=_0x3ea96a['location'][_0xf1eff8(0x1d4)](),_0x5afc23=(_0x3ea96a[_0xf1eff8(0x21a)]||'')[_0xf1eff8(0x1d4)]();let _0xb9f690=_0x9b6737[_0xf1eff8(0x1b7)](_0x108f68);!_0xb9f690&&_0x5afc23[_0xf1eff8(0x20f)]>0x3&&_0x9b6737['includes'](_0x5afc23)&&(_0xb9f690=!![]);if(_0xb9f690){const _0x3ff015=_0xeffec8[_0x3ea96a[_0xf1eff8(0x196)]]||0x3c,_0x4dead0=_0x508dd6[_0x3ea96a[_0xf1eff8(0x196)]]||'Classic',_0x1f591b=_0xba0309[_0xf1eff8(0x226)]()-_0x3ff015*0xea60;if(_0x5054c2>=_0x1f591b&&_0x5054c2<_0xba0309[_0xf1eff8(0x226)]()){const _0x5b6e7c=lastActions[_0xf1eff8(0x208)+_0x3ea96a[_0xf1eff8(0x196)]];if(_0x5b6e7c&&_0x5054c2-_0x5b6e7c<CAL_COOLDOWN_MS)continue;const _0x420614=await findRelatedId(_0x4ec3ee,_0x3ea96a['id'],_0xf1eff8(0x18e));if(_0x420614){let _0x173a1c=_0x475bf8[_0x3ea96a[_0xf1eff8(0x196)]];if(_0x173a1c===undefined)_0x173a1c=_0x475bf8[_0xf1eff8(0x1b1)];if(_0x173a1c===undefined)_0x173a1c=0x15;const _0x159c46=await _0x4ec3ee[_0xf1eff8(0x1e2)](_0x420614);if(_0x159c46&&typeof _0x159c46[_0xf1eff8(0x221)]===_0xf1eff8(0x1c4)&&_0x159c46[_0xf1eff8(0x221)]<_0x173a1c-0.5){_0x4ec3ee[_0xf1eff8(0x222)][_0xf1eff8(0x1bf)]('ðŸ“…\x20SMART\x20SCHEDULE\x20['+_0x4dead0+_0xf1eff8(0x1ed)+_0x3ea96a[_0xf1eff8(0x196)]+_0xf1eff8(0x230)+_0x9b6737+_0xf1eff8(0x19c)+_0x173a1c+'Â°C\x20(Vorlauf:\x20'+_0x3ff015+_0xf1eff8(0x200)),await _0x4ec3ee[_0xf1eff8(0x1b2)](_0x420614,_0x173a1c),await logAutomationAction(_0x4ec3ee,_0xf1eff8(0x1fa)+_0x3ea96a[_0xf1eff8(0x196)]+_0xf1eff8(0x22c)+_0x173a1c+'Â°C\x20(via\x20'+_0x4dead0+')'),lastActions[_0xf1eff8(0x208)+_0x3ea96a[_0xf1eff8(0x196)]]=_0x5054c2;const _0x82323e=_0x402939['findIndex'](_0x2f1845=>_0x2f1845[_0xf1eff8(0x1f8)]===_0x3ea96a[_0xf1eff8(0x196)]);if(_0x82323e!==-0x1)_0x402939[_0xf1eff8(0x1e5)](_0x82323e,0x1);_0x402939[_0xf1eff8(0x1a7)]({'room':_0x3ea96a[_0xf1eff8(0x196)],'target':_0x173a1c,'until':_0xba0309['getTime']()}),_0x1b49f9=!![];}}}}}}}_0x1b49f9&&await _0x4ec3ee['setStateAsync']('analysis.energy.activeEnforcements',{'val':JSON[_0xf1eff8(0x1b6)](_0x402939),'ack':!![]});}catch(_0x82ff01){_0x4ec3ee[_0xf1eff8(0x222)][_0xf1eff8(0x236)]('Calendar\x20Check\x20Error:\x20'+_0x82ff01[_0xf1eff8(0x1e0)]);}}async function manageMpcIntervention(_0x211273,_0x3518f5,_0x3180e2){const _0x5a8dfc=a1_0x5554c4;try{const _0x26306b='analysis.energy.mpcActiveInterventions',_0x21f2ba=await _0x211273[_0x5a8dfc(0x231)](_0x26306b);let _0x40db7c=[];if(_0x21f2ba&&_0x21f2ba[_0x5a8dfc(0x221)])try{_0x40db7c=JSON[_0x5a8dfc(0x1a9)](_0x21f2ba[_0x5a8dfc(0x221)]);}catch(_0x13af6c){}const _0x2b6026=_0x40db7c[_0x5a8dfc(0x1f9)](_0x3518f5);if(_0x3180e2==='add')_0x2b6026===-0x1&&(_0x40db7c[_0x5a8dfc(0x1a7)](_0x3518f5),await _0x211273['setStateAsync'](_0x26306b,{'val':JSON['stringify'](_0x40db7c),'ack':!![]}));else _0x3180e2===_0x5a8dfc(0x1eb)&&(_0x2b6026!==-0x1&&(_0x40db7c['splice'](_0x2b6026,0x1),await _0x211273[_0x5a8dfc(0x1af)](_0x26306b,{'val':JSON['stringify'](_0x40db7c),'ack':!![]})));}catch(_0x1bf344){}}async function cleanupGhostInterventions(_0x1fe371){const _0x1c76b1=a1_0x5554c4;try{const _0x5088a9=_0x1c76b1(0x1e8),_0x49cac8=await _0x1fe371['getStateAsync'](_0x5088a9);if(!_0x49cac8||!_0x49cac8[_0x1c76b1(0x221)])return;const _0x5749d3=JSON[_0x1c76b1(0x1a9)](_0x49cac8[_0x1c76b1(0x221)]);if(!Array['isArray'](_0x5749d3)||_0x5749d3[_0x1c76b1(0x20f)]===0x0)return;let _0x327580={'default':0x15};try{const _0x26fdb9=await _0x1fe371[_0x1c76b1(0x231)]('analysis.energy.warmupTargets');if(_0x26fdb9&&_0x26fdb9[_0x1c76b1(0x221)])_0x327580=JSON[_0x1c76b1(0x1a9)](_0x26fdb9['val']);}catch(_0xb91248){}let _0x2e7794=[];try{const _0x47d438=await _0x1fe371[_0x1c76b1(0x231)](_0x1c76b1(0x238));if(_0x47d438&&_0x47d438[_0x1c76b1(0x221)])_0x2e7794=JSON[_0x1c76b1(0x1a9)](_0x47d438[_0x1c76b1(0x221)]);}catch(_0x1a4621){}let _0x32b0ae={},_0x4d5b60=![];try{const _0x17b531=await _0x1fe371[_0x1c76b1(0x231)](_0x1c76b1(0x1be));if(_0x17b531&&_0x17b531[_0x1c76b1(0x221)])_0x32b0ae=JSON[_0x1c76b1(0x1a9)](_0x17b531[_0x1c76b1(0x221)]);}catch(_0x52e74a){}if(_0x32b0ae[_0x1c76b1(0x1a1)]){const _0x42b4ba=Date[_0x1c76b1(0x188)]();for(const [_0x3d54cd,_0x2d5b57]of Object[_0x1c76b1(0x212)](_0x32b0ae[_0x1c76b1(0x1a1)])){_0x42b4ba-_0x2d5b57>PENALTY_TTL&&(delete _0x32b0ae[_0x3d54cd],delete _0x32b0ae[_0x1c76b1(0x1a1)][_0x3d54cd],_0x4d5b60=!![],_0x1fe371['log'][_0x1c76b1(0x1bf)]('ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27'+_0x3d54cd+'\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.'));}}const _0x2bb0a7=_0x1fe371[_0x1c76b1(0x211)]['devices']||[];let _0x4ea2b0=![];for(let _0x2c3294=_0x5749d3[_0x1c76b1(0x20f)]-0x1;_0x2c3294>=0x0;_0x2c3294--){const _0x5e4ad7=_0x5749d3[_0x2c3294],_0x9581fd=_0x2bb0a7[_0x1c76b1(0x202)](_0x3d2a1f=>normalize(_0x3d2a1f['location'])===normalize(_0x5e4ad7)&&(_0x3d2a1f['type']===_0x1c76b1(0x186)||_0x3d2a1f[_0x1c76b1(0x23e)]===_0x1c76b1(0x1f6)));if(!_0x9581fd){_0x1fe371[_0x1c76b1(0x222)]['warn'](_0x1c76b1(0x1ef)+_0x5e4ad7+_0x1c76b1(0x187)),_0x5749d3[_0x1c76b1(0x1e5)](_0x2c3294,0x1),_0x4ea2b0=!![];continue;}if(_0x9581fd){const _0x4d5b99=await findRelatedId(_0x1fe371,_0x9581fd['id'],'setpoint'),_0x121525=await _0x1fe371[_0x1c76b1(0x1e2)](_0x9581fd['id']);if(_0x4d5b99){const _0x32024d=await _0x1fe371['getForeignStateAsync'](_0x4d5b99);if(_0x32024d&&typeof _0x32024d[_0x1c76b1(0x221)]===_0x1c76b1(0x1c4)){let _0xc058ab=![],_0x3b9a25='';Math[_0x1c76b1(0x22e)](_0x32024d[_0x1c76b1(0x221)]-ECO_TEMP)>0.5&&(_0xc058ab=!![],_0x3b9a25=_0x1c76b1(0x1a4));if(!_0xc058ab&&_0x121525&&typeof _0x121525['val']===_0x1c76b1(0x1c4)){const _0x233ae7=_0x327580[_0x5e4ad7]||_0x327580[_0x1c76b1(0x1b1)]||0x15;_0x121525[_0x1c76b1(0x221)]<_0x233ae7+0.2&&(_0xc058ab=!![],_0x3b9a25=_0x1c76b1(0x1ea));}if(_0xc058ab){if(_0x3b9a25==='manual'){_0x1fe371[_0x1c76b1(0x222)][_0x1c76b1(0x1bf)](_0x1c76b1(0x18c)+_0x5e4ad7+'\x20ist\x20auf\x20'+_0x32024d[_0x1c76b1(0x221)]+_0x1c76b1(0x1f2)+ECO_TEMP+_0x1c76b1(0x1dc));const _0x106b49=lastActions[_0x1c76b1(0x208)+_0x5e4ad7],_0x5e4096=_0x106b49&&Date['now']()-_0x106b49<0x2*0x3c*0x3e8;if(!_0x5e4096&&_0x32024d[_0x1c76b1(0x221)]>ECO_TEMP+0.5){_0x1fe371[_0x1c76b1(0x1fc)]&&(_0x1fe371[_0x1c76b1(0x222)]['info'](_0x1c76b1(0x1f1)+_0x5e4ad7+_0x1c76b1(0x228)),_0x1fe371[_0x1c76b1(0x1fc)](_0x1c76b1(0x1c0),{'room':_0x5e4ad7}));const _0x3de042=_0x5e4ad7+'_'+new Date()['getHours']();if(!_0x32b0ae[_0x3de042]){_0x32b0ae[_0x3de042]=0x1;if(!_0x32b0ae[_0x1c76b1(0x1a1)])_0x32b0ae[_0x1c76b1(0x1a1)]={};_0x32b0ae[_0x1c76b1(0x1a1)][_0x3de042]=Date[_0x1c76b1(0x188)](),_0x4d5b60=!![];}}else _0x5e4096&&_0x1fe371['log']['info']('ðŸ“…\x20[MPC\x20INFO]\x20'+_0x5e4ad7+_0x1c76b1(0x217));}else{if(_0x3b9a25===_0x1c76b1(0x1ea)){let _0x82d882=![];if(_0x2e7794[_0x1c76b1(0x202)](_0x5ddae4=>_0x5ddae4['room']===_0x5e4ad7))_0x82d882=!![];const _0x509667=_0x2bb0a7[_0x1c76b1(0x185)](_0x250f74=>normalize(_0x250f74[_0x1c76b1(0x196)])===normalize(_0x5e4ad7)&&(_0x250f74[_0x1c76b1(0x23e)]===_0x1c76b1(0x18b)||_0x250f74['type']==='sensor'||_0x250f74[_0x1c76b1(0x23e)]===_0x1c76b1(0x22a)));for(const _0x5c44b7 of _0x509667){try{const _0x2350c7=await _0x1fe371[_0x1c76b1(0x1e2)](_0x5c44b7['id']);if(_0x2350c7&&(_0x2350c7[_0x1c76b1(0x221)]===!![]||_0x2350c7['val']===0x1||String(_0x2350c7['val'])['toLowerCase']()===_0x1c76b1(0x20c)))_0x82d882=!![];}catch(_0x579f0f){}}if(_0x82d882)_0x1fe371['log']['info'](_0x1c76b1(0x1f0)+_0x5e4ad7+_0x1c76b1(0x229));else{const _0x533bca=_0x327580[_0x5e4ad7]||_0x327580[_0x1c76b1(0x1b1)]||0x15;_0x1fe371[_0x1c76b1(0x222)][_0x1c76b1(0x1bf)](_0x1c76b1(0x18f)+_0x5e4ad7+_0x1c76b1(0x1bc)+_0x121525[_0x1c76b1(0x221)]+'Â°C\x20<\x20'+(_0x533bca+0.2)+'Â°C).\x20Sparmodus\x20beendet!'),await _0x1fe371['setForeignStateAsync'](_0x4d5b99,_0x533bca),await logAutomationAction(_0x1fe371,_0x1c76b1(0x1ac)+_0x5e4ad7+':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20'+_0x533bca+'Â°C'),lastActions['rescue_'+_0x5e4ad7]=Date[_0x1c76b1(0x188)]();}}}_0x5749d3['splice'](_0x2c3294,0x1),_0x4ea2b0=!![];}}}}}_0x4ea2b0&&await _0x1fe371[_0x1c76b1(0x1af)](_0x5088a9,{'val':JSON[_0x1c76b1(0x1b6)](_0x5749d3),'ack':!![]}),_0x4d5b60&&await _0x1fe371[_0x1c76b1(0x1af)]('analysis.energy.rlPenalties',{'val':JSON['stringify'](_0x32b0ae),'ack':!![]});}catch(_0x96495e){}}async function applyEnergySavings(_0x584bb2,_0x13839b){const _0x4d1b35=a1_0x5554c4;await cleanupGhostInterventions(_0x584bb2);if(!_0x13839b||_0x13839b[_0x4d1b35(0x20f)]===0x0)return;const _0x5d47d6=_0x584bb2['config'][_0x4d1b35(0x1e6)]||[],_0x206b94=Date[_0x4d1b35(0x188)]();for(const _0x4f43bc of _0x13839b){const _0x172c4a=_0x4f43bc['room'],_0x20e1c1=_0x4f43bc['minutes_safe'],_0x34ba95=_0x4f43bc[_0x4d1b35(0x1c9)]||0x15;if(lastActions[_0x4d1b35(0x207)+_0x172c4a]&&_0x206b94-lastActions[_0x4d1b35(0x207)+_0x172c4a]<RESCUE_LOCK_MS)continue;const _0x311b2e=_0x5d47d6[_0x4d1b35(0x202)](_0x203dac=>normalize(_0x203dac['location'])===normalize(_0x172c4a)&&(_0x203dac[_0x4d1b35(0x23e)]===_0x4d1b35(0x186)||_0x203dac[_0x4d1b35(0x23e)]===_0x4d1b35(0x1f6)));if(!_0x311b2e)continue;const _0x446162=await findRelatedId(_0x584bb2,_0x311b2e['id'],_0x4d1b35(0x18e));if(_0x446162){if(lastActions[_0x4d1b35(0x1c3)+_0x172c4a]&&_0x206b94-lastActions['mpc_'+_0x172c4a]<0x1e*0x3c*0x3e8)continue;const _0x5a1a4c=await _0x584bb2[_0x4d1b35(0x1e2)](_0x446162);if(_0x5a1a4c&&typeof _0x5a1a4c[_0x4d1b35(0x221)]===_0x4d1b35(0x1c4)){const _0x62da2c=_0x5a1a4c[_0x4d1b35(0x221)];_0x62da2c!==ECO_TEMP&&await manageMpcIntervention(_0x584bb2,_0x172c4a,_0x4d1b35(0x1eb));if(_0x20e1c1>0x1e)_0x62da2c>ECO_TEMP+0.5&&(_0x584bb2[_0x4d1b35(0x222)][_0x4d1b35(0x1bf)](_0x4d1b35(0x1d5)+_0x172c4a+_0x4d1b35(0x1d2)+ECO_TEMP+'Â°C!\x20(Puffer:\x20'+_0x20e1c1+_0x4d1b35(0x191)),await _0x584bb2['setForeignStateAsync'](_0x446162,ECO_TEMP),await manageMpcIntervention(_0x584bb2,_0x172c4a,_0x4d1b35(0x1b8)),lastActions['mpc_'+_0x172c4a]=_0x206b94,await logAutomationAction(_0x584bb2,_0x4d1b35(0x1f7)+_0x172c4a+_0x4d1b35(0x1d0)+ECO_TEMP+'Â°C'));else _0x20e1c1<=0xf&&(_0x62da2c<_0x34ba95&&(_0x584bb2[_0x4d1b35(0x222)][_0x4d1b35(0x1bf)](_0x4d1b35(0x22d)+_0x172c4a+_0x4d1b35(0x201)+_0x34ba95+_0x4d1b35(0x239)),await _0x584bb2[_0x4d1b35(0x1b2)](_0x446162,_0x34ba95),await manageMpcIntervention(_0x584bb2,_0x172c4a,_0x4d1b35(0x1eb)),lastActions['mpc_'+_0x172c4a]=_0x206b94,await logAutomationAction(_0x584bb2,_0x4d1b35(0x1f7)+_0x172c4a+_0x4d1b35(0x1ec)+_0x34ba95+'Â°C')));}}else _0x584bb2[_0x4d1b35(0x222)]['warn']('[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20'+_0x172c4a+_0x4d1b35(0x1e9));}}module[a1_0x5554c4(0x216)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};