const a1_0x16787e=a1_0x53c0;(function(_0x498f03,_0x38df90){const _0x39b9af=a1_0x53c0,_0x34a5da=_0x498f03();while(!![]){try{const _0x238ebc=parseInt(_0x39b9af(0x1c6))/0x1*(parseInt(_0x39b9af(0x189))/0x2)+-parseInt(_0x39b9af(0x1ce))/0x3+-parseInt(_0x39b9af(0x1ca))/0x4+parseInt(_0x39b9af(0x1e5))/0x5*(parseInt(_0x39b9af(0x22d))/0x6)+parseInt(_0x39b9af(0x19a))/0x7+parseInt(_0x39b9af(0x1ec))/0x8+-parseInt(_0x39b9af(0x187))/0x9;if(_0x238ebc===_0x38df90)break;else _0x34a5da['push'](_0x34a5da['shift']());}catch(_0x267652){_0x34a5da['push'](_0x34a5da['shift']());}}}(a1_0x2ef1,0x75fab));const a1_0x40b411=(function(){let _0x34915d=!![];return function(_0x357aef,_0x236571){const _0x3b16ca=_0x34915d?function(){const _0x549d2c=a1_0x53c0;if(_0x236571){const _0x4b3c67=_0x236571[_0x549d2c(0x18b)](_0x357aef,arguments);return _0x236571=null,_0x4b3c67;}}:function(){};return _0x34915d=![],_0x3b16ca;};}()),a1_0x33cb1d=a1_0x40b411(this,function(){const _0x2d856b=a1_0x53c0;return a1_0x33cb1d['toString']()[_0x2d856b(0x1ae)](_0x2d856b(0x216))[_0x2d856b(0x20c)]()[_0x2d856b(0x1c4)](a1_0x33cb1d)[_0x2d856b(0x1ae)](_0x2d856b(0x216));});a1_0x33cb1d();'use strict';const aiAgent=require(a1_0x16787e(0x207)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x43f33b){const _0x5cece1=a1_0x16787e;if(!_0x43f33b)return'';return _0x43f33b[_0x5cece1(0x1aa)]()['replace'](/\s+/g,'')[_0x5cece1(0x1cc)]();}function getWarmupRobust(_0x11293e,_0x2eaf2a){const _0x326244=a1_0x16787e;if(!_0x11293e||!_0x2eaf2a)return 0x3c;if(_0x11293e[_0x2eaf2a]!==undefined)return _0x11293e[_0x2eaf2a];const _0x16f521=_0x2eaf2a[_0x326244(0x1aa)]()[_0x326244(0x176)](/√§/g,'ae')[_0x326244(0x176)](/√∂/g,'oe')[_0x326244(0x176)](/√º/g,'ue')[_0x326244(0x176)](/√ü/g,'ss')[_0x326244(0x176)](/\s+/g,'_')['replace'](/[^a-z0-9_]/g,'');if(_0x11293e[_0x16f521]!==undefined)return _0x11293e[_0x16f521];return 0x3c;}async function logAutomationAction(_0x509322,_0x4960fc){const _0x43f9c2=a1_0x16787e;await _0x509322['setStateAsync']('analysis.automation.lastAction',{'val':_0x4960fc,'ack':!![]});try{const _0x405da2=_0x43f9c2(0x17d),_0x4dc471=await _0x509322[_0x43f9c2(0x165)](_0x405da2);let _0x3628f0=[];if(_0x4dc471&&_0x4dc471['val'])try{_0x3628f0=JSON[_0x43f9c2(0x195)](_0x4dc471[_0x43f9c2(0x1d0)]);}catch(_0x39a0f3){}_0x3628f0[_0x43f9c2(0x1bc)]({'ts':Date[_0x43f9c2(0x190)](),'msg':_0x4960fc});if(_0x3628f0[_0x43f9c2(0x19c)]>0x32)_0x3628f0=_0x3628f0[_0x43f9c2(0x1c9)](0x0,0x32);await _0x509322['setStateAsync'](_0x405da2,{'val':JSON['stringify'](_0x3628f0),'ack':!![]});}catch(_0x5149e3){}}async function handlePrediction(_0x445081,_0x3d6440,_0x3ce5af){const _0xa41060=a1_0x16787e;if(!_0x3d6440||_0x3d6440==='Unknown')return;let _0x288ac2=_0xa41060(0x21f),_0x50ab7d=0.6;try{const _0x3845b4=await _0x445081[_0xa41060(0x165)](_0xa41060(0x1b6));if(_0x3845b4&&_0x3845b4['val'])_0x288ac2=_0x3845b4['val'];const _0x4ba648=await _0x445081[_0xa41060(0x165)]('analysis.automation.confidenceThreshold');if(_0x4ba648&&_0x4ba648[_0xa41060(0x1d0)])_0x50ab7d=_0x4ba648['val'];}catch(_0x4ea5f7){}if(_0x288ac2===_0xa41060(0x21f)||_0x3ce5af<_0x50ab7d)return;const _0x469c42=Date['now']();if(lastActions[_0x3d6440]&&_0x469c42-lastActions[_0x3d6440]<COOLDOWN_MS)return;const _0x7a4474=_0x445081[_0xa41060(0x1d9)][_0xa41060(0x181)]||[],_0x9f3a6d=normalize(_0x3d6440),_0x398887=_0x7a4474[_0xa41060(0x1b1)](_0x4a971c=>normalize(_0x4a971c[_0xa41060(0x1d7)])===_0x9f3a6d&&(_0x4a971c[_0xa41060(0x1f8)]===_0xa41060(0x214)||_0x4a971c[_0xa41060(0x1f8)]===_0xa41060(0x1b3)||_0x4a971c[_0xa41060(0x1f8)]===_0xa41060(0x1a7)));if(!_0x398887)return;const _0x5777f8=await aiAgent['consultButler'](_0x445081,_0x3d6440,_0x398887[_0xa41060(0x1a3)],_0x3ce5af);if(!_0x5777f8[_0xa41060(0x197)])return;const _0x3f4520=_0xa41060(0x173)+_0x3d6440+_0xa41060(0x226)+_0x398887[_0xa41060(0x1a3)]+'\x20('+_0x5777f8[_0xa41060(0x18d)]+')';await logAutomationAction(_0x445081,'['+_0x288ac2['toUpperCase']()+']\x20'+_0x3f4520);if(_0x288ac2===_0xa41060(0x1f5)){const _0x1199e0=await _0x445081[_0xa41060(0x206)](_0x398887['id']);(!_0x1199e0||!_0x1199e0[_0xa41060(0x1d0)]&&_0x1199e0[_0xa41060(0x1d0)]!==!![])&&await _0x445081[_0xa41060(0x1e1)](_0x398887['id'],!![]),lastActions[_0x3d6440]=_0x469c42;}}async function findRelatedId(_0x43c131,_0xa7ca6a,_0x33992e=a1_0x16787e(0x1c0)){const _0x4bab06=a1_0x16787e;if(_0x33992e===_0x4bab06(0x1c0)&&_0x43c131[_0x4bab06(0x1d9)][_0x4bab06(0x202)]){let _0x5842f9=_0x43c131['config'][_0x4bab06(0x202)];if(typeof _0x5842f9===_0x4bab06(0x21b))try{_0x5842f9=JSON[_0x4bab06(0x195)](_0x5842f9);}catch(_0x5af16c){}if(_0x5842f9&&_0x5842f9[_0xa7ca6a])return _0x5842f9[_0xa7ca6a];}if(_0x33992e===_0x4bab06(0x201)&&_0x43c131[_0x4bab06(0x1d9)][_0x4bab06(0x1d2)]){let _0x4b3601=_0x43c131[_0x4bab06(0x1d9)]['valveMapping'];if(typeof _0x4b3601===_0x4bab06(0x21b))try{_0x4b3601=JSON[_0x4bab06(0x195)](_0x4b3601);}catch(_0x12dbd6){}if(_0x4b3601&&_0x4b3601[_0xa7ca6a])return _0x4b3601[_0xa7ca6a];}let _0x3db9de=[];if(_0x33992e===_0x4bab06(0x1c0))_0x3db9de=[{'s':'.1.ACTUAL_TEMPERATURE','t':_0x4bab06(0x1e0)},{'s':'.1.TEMPERATURE','t':_0x4bab06(0x1e0)},{'s':_0x4bab06(0x1ff),'t':_0x4bab06(0x222)},{'s':_0x4bab06(0x223),'t':_0x4bab06(0x1a4)},{'s':_0x4bab06(0x196),'t':_0x4bab06(0x1c1)},{'s':_0x4bab06(0x196),'t':'current_heating_setpoint'},{'s':'temperature','t':_0x4bab06(0x178)},{'s':'ACTUAL','t':_0x4bab06(0x1eb)},{'s':'Ist','t':_0x4bab06(0x168)},{'s':_0x4bab06(0x21c),'t':_0x4bab06(0x1c0)}];else _0x33992e===_0x4bab06(0x201)&&(_0x3db9de=[{'s':_0x4bab06(0x194),'t':'.1.LEVEL'},{'s':_0x4bab06(0x1ff),'t':_0x4bab06(0x1c2)},{'s':_0x4bab06(0x1ff),'t':_0x4bab06(0x221)},{'s':_0x4bab06(0x196),'t':_0x4bab06(0x22b)},{'s':_0x4bab06(0x21c),'t':_0x4bab06(0x1d6)},{'s':_0x4bab06(0x21c),'t':'level'}]);for(const _0x5b2312 of _0x3db9de){if(_0xa7ca6a[_0x4bab06(0x20e)](_0x5b2312['s'])){const _0x48251c=_0xa7ca6a['replace'](_0x5b2312['s'],_0x5b2312['t']),_0x5945e3=await _0x43c131[_0x4bab06(0x1ac)](_0x48251c);if(_0x5945e3)return _0x48251c;}}try{const _0x5bcb03=_0xa7ca6a[_0x4bab06(0x1ea)]('.');if(_0x5bcb03[_0x4bab06(0x19c)]>0x2){const _0x2bc223=_0x5bcb03[_0x4bab06(0x1c9)](0x0,-0x1)[_0x4bab06(0x19e)]('.'),_0xde1dd=await _0x43c131[_0x4bab06(0x211)](_0x2bc223+'.*'),_0x69c676=[],_0x59afdc=_0xa7ca6a[_0x4bab06(0x1ea)](/[._]+/)[_0x4bab06(0x1b0)](_0x26efa6=>!['openknx','0',_0x4bab06(0x22c),_0x4bab06(0x16d),_0x4bab06(0x1f2),_0x4bab06(0x21c),_0x4bab06(0x19b),_0x4bab06(0x1cb),_0x4bab06(0x1da),'state'][_0x4bab06(0x20e)](_0x26efa6[_0x4bab06(0x1aa)]()));for(const [_0x172381,_0x116830]of Object[_0x4bab06(0x17a)](_0xde1dd)){if(_0x172381===_0xa7ca6a)continue;if(_0x116830&&_0x116830[_0x4bab06(0x1bd)]){const _0xb27c53=_0x172381['toLowerCase'](),_0x32548a=(_0x116830['common'][_0x4bab06(0x1c3)]||'')[_0x4bab06(0x1aa)](),_0x1b5607=(_0x116830[_0x4bab06(0x1bd)][_0x4bab06(0x188)]||'')[_0x4bab06(0x1aa)]();let _0x3a7b8e=![];if(_0x33992e===_0x4bab06(0x1c0)&&_0x116830[_0x4bab06(0x1bd)]['write']===!![])_0x3a7b8e=_0xb27c53[_0x4bab06(0x20e)](_0x4bab06(0x1b9))||_0xb27c53[_0x4bab06(0x20e)](_0x4bab06(0x1fd))||_0xb27c53[_0x4bab06(0x20e)](_0x4bab06(0x218))||_0x32548a['includes']('level.temperature')||_0x32548a[_0x4bab06(0x20e)](_0x4bab06(0x1dc));else _0x33992e===_0x4bab06(0x201)&&(_0x3a7b8e=_0xb27c53[_0x4bab06(0x20e)]('level')||_0xb27c53[_0x4bab06(0x20e)]('valve')||_0xb27c53[_0x4bab06(0x20e)](_0x4bab06(0x1e8))||_0xb27c53[_0x4bab06(0x20e)](_0x4bab06(0x1bf))||_0x32548a[_0x4bab06(0x20e)](_0x4bab06(0x20a))||_0x32548a[_0x4bab06(0x20e)](_0x4bab06(0x1e2))||_0x1b5607[_0x4bab06(0x20e)]('%'));if(_0x3a7b8e){const _0x398a26=_0x172381[_0x4bab06(0x1ea)](/[._]+/)[_0x4bab06(0x16b)](_0x53869d=>_0x53869d[_0x4bab06(0x1aa)]());let _0x1432df=0x0;_0x59afdc['forEach'](_0x213fd1=>{const _0x4aa600=_0x4bab06;if(_0x398a26[_0x4aa600(0x20e)](_0x213fd1[_0x4aa600(0x1aa)]()))_0x1432df++;}),_0x69c676['push']({'id':_0x172381,'score':_0x1432df});}}}if(_0x69c676['length']>0x0){_0x69c676[_0x4bab06(0x1a5)]((_0x341997,_0x381336)=>_0x381336[_0x4bab06(0x1c5)]-_0x341997[_0x4bab06(0x1c5)]);if(_0x69c676[0x0][_0x4bab06(0x1c5)]>0x0)return _0x69c676[0x0]['id'];}}}catch(_0x435fff){}return null;}async function scanThermostats(_0x28ff24){const _0x395459=a1_0x16787e,_0x197bfc=_0x28ff24[_0x395459(0x1d9)][_0x395459(0x181)]||[],_0x4c07a6=[],_0x4013dc=_0x197bfc[_0x395459(0x1b0)](_0xe272b1=>_0xe272b1['id']&&_0xe272b1['id'][_0x395459(0x20e)](_0x395459(0x21c))||_0xe272b1[_0x395459(0x1f8)]&&[_0x395459(0x21c),_0x395459(0x1f6),_0x395459(0x1cb)][_0x395459(0x20e)](_0xe272b1[_0x395459(0x1f8)])||_0xe272b1[_0x395459(0x1a3)]&&_0xe272b1['name'][_0x395459(0x1aa)]()[_0x395459(0x20e)](_0x395459(0x1f7)));for(const _0x2e722d of _0x4013dc){const _0x3f8556=await findRelatedId(_0x28ff24,_0x2e722d['id'],_0x395459(0x1c0)),_0x3f4a62=await findRelatedId(_0x28ff24,_0x2e722d['id'],_0x395459(0x201));let _0x2c80e3=_0x395459(0x217),_0x371f62=![],_0x3df8dd=_0x28ff24[_0x395459(0x1d9)][_0x395459(0x202)]||{};if(typeof _0x3df8dd==='string')try{_0x3df8dd=JSON[_0x395459(0x195)](_0x3df8dd);}catch(_0x4a87b2){}let _0xd92b4e=_0x28ff24['config'][_0x395459(0x1d2)]||{};if(typeof _0xd92b4e==='string')try{_0xd92b4e=JSON[_0x395459(0x195)](_0xd92b4e);}catch(_0x53ff4b){}if(_0x3df8dd[_0x2e722d['id']]&&_0x3df8dd[_0x2e722d['id']]===_0x3f8556||_0xd92b4e[_0x2e722d['id']]&&_0xd92b4e[_0x2e722d['id']]===_0x3f4a62)_0x2c80e3=_0x395459(0x170),_0x371f62=!![];else(_0x3f8556||_0x3f4a62)&&(_0x2c80e3='Auto-Erkennung');_0x4c07a6[_0x395459(0x18c)]({'room':_0x2e722d[_0x395459(0x1d7)]||_0x395459(0x224),'sensorId':_0x2e722d['id'],'setpointId':_0x3f8556||'-','valveId':_0x3f4a62||'-','source':_0x2c80e3,'isManual':_0x371f62,'status':_0x3f8556&&_0x3f4a62?'PERFECT':_0x3f8556?'OK':'Fehlt'});}return _0x4c07a6[_0x395459(0x1a5)]((_0x52217e,_0x6c3a7b)=>_0x52217e[_0x395459(0x1f3)][_0x395459(0x1db)](_0x6c3a7b[_0x395459(0x1f3)]));}function a1_0x53c0(_0x3931f4,_0xdec8d9){const _0x1c103b=a1_0x2ef1();return a1_0x53c0=function(_0x33cb1d,_0x40b411){_0x33cb1d=_0x33cb1d-0x163;let _0x2ef157=_0x1c103b[_0x33cb1d];return _0x2ef157;},a1_0x53c0(_0x3931f4,_0xdec8d9);}async function updateSchedulePreview(_0xa5a7e2){const _0xed4ae4=a1_0x16787e;if(!_0xa5a7e2[_0xed4ae4(0x1d9)][_0xed4ae4(0x184)]||!_0xa5a7e2['config'][_0xed4ae4(0x219)])return;let _0x41e7f8={};try{const _0x524ff3=await _0xa5a7e2[_0xed4ae4(0x165)](_0xed4ae4(0x1d3));if(_0x524ff3&&_0x524ff3['val'])_0x41e7f8=JSON[_0xed4ae4(0x195)](_0x524ff3[_0xed4ae4(0x1d0)]);}catch(_0x22ebb6){}const _0x55d46d=[],_0x4a5236=Date['now'](),_0x50f73e=0x30*0x3c*0x3c*0x3e8;try{const _0x2d2e8d=await _0xa5a7e2[_0xed4ae4(0x206)](_0xa5a7e2['config'][_0xed4ae4(0x219)]+_0xed4ae4(0x179));if(!_0x2d2e8d||!_0x2d2e8d[_0xed4ae4(0x1d0)])return;const _0x43fbee=JSON[_0xed4ae4(0x195)](_0x2d2e8d['val']),_0x4c1563=_0xa5a7e2[_0xed4ae4(0x1d9)]['calendarSelection']||[],_0x1f3633=_0xa5a7e2[_0xed4ae4(0x1d9)][_0xed4ae4(0x181)]||[],_0x29ade6=new Set();_0x1f3633['forEach'](_0x55a742=>{const _0x230513=_0xed4ae4;if(_0x55a742[_0x230513(0x1d7)])_0x29ade6['add'](_0x55a742['location']);});for(const _0x5122fc of _0x43fbee){if(_0x5122fc[_0xed4ae4(0x204)]&&_0x4c1563['length']>0x0&&!_0x4c1563['includes'](_0x5122fc[_0xed4ae4(0x204)]))continue;const _0x7646a5=_0x5122fc[_0xed4ae4(0x1cf)]||_0x5122fc[_0xed4ae4(0x205)]||_0x5122fc[_0xed4ae4(0x1a1)];if(!_0x7646a5)continue;const _0x1c6768=new Date(_0x7646a5),_0x1454b7=_0x1c6768[_0xed4ae4(0x1a6)]();if(isNaN(_0x1454b7))continue;if(_0x1454b7<_0x4a5236)continue;if(_0x1454b7>_0x4a5236+_0x50f73e)continue;const _0xff66f9=(_0x5122fc['event']||_0x5122fc[_0xed4ae4(0x1b7)]||'')['toLowerCase']();let _0x44ee88=![],_0x8672e7=[],_0x3ba5cc=_0x5122fc['event']||_0x5122fc[_0xed4ae4(0x1b7)]||'Unbekannt';if(_0xff66f9[_0xed4ae4(0x20e)](_0xed4ae4(0x1e9))||_0xff66f9[_0xed4ae4(0x20e)]('r√ºckkehr')||_0xff66f9[_0xed4ae4(0x20e)]('ankunft'))_0x44ee88=!![],_0x8672e7=Array[_0xed4ae4(0x20b)](_0x29ade6);else for(const _0x5a8567 of _0x29ade6){if(_0xff66f9[_0xed4ae4(0x20e)](_0x5a8567[_0xed4ae4(0x1aa)]()))_0x8672e7[_0xed4ae4(0x18c)](_0x5a8567);}_0x8672e7[_0xed4ae4(0x19c)]>0x0&&_0x8672e7[_0xed4ae4(0x1fc)](_0x10dc24=>{const _0x145aa5=_0xed4ae4;let _0x58b169=0x3c;if(_0x44ee88){let _0x116dd3=0x0;Object[_0x145aa5(0x209)](_0x41e7f8)[_0x145aa5(0x1fc)](_0x2930cb=>{if(_0x2930cb>_0x116dd3)_0x116dd3=_0x2930cb;}),_0x58b169=_0x116dd3>0x0?_0x116dd3:0x78;}else _0x58b169=getWarmupRobust(_0x41e7f8,_0x10dc24);const _0xf21e7b=new Date(_0x1454b7-_0x58b169*0xea60);_0x55d46d['push']({'eventTime':_0x1454b7,'triggerTime':_0xf21e7b['getTime'](),'room':_0x10dc24,'minutes':_0x58b169,'reason':_0x3ba5cc,'isGlobal':_0x44ee88});});}}catch(_0x56fe7d){}_0x55d46d[_0xed4ae4(0x1a5)]((_0x1b5a2b,_0x59c14d)=>_0x1b5a2b[_0xed4ae4(0x1ef)]-_0x59c14d['triggerTime']);const _0x586cc6=_0x55d46d[_0xed4ae4(0x1c9)](0x0,0x5);await _0xa5a7e2['setStateAsync'](_0xed4ae4(0x1b2),{'val':JSON['stringify'](_0x586cc6),'ack':!![]});}async function monitorEnforcements(_0x1d631a){const _0x240513=a1_0x16787e;try{const _0x5e7492='analysis.energy.activeEnforcements',_0x378e89=await _0x1d631a[_0x240513(0x165)](_0x5e7492);if(!_0x378e89||!_0x378e89[_0x240513(0x1d0)])return;let _0x4b44d3=[];try{_0x4b44d3=JSON['parse'](_0x378e89[_0x240513(0x1d0)]);}catch(_0xe857c0){return;}if(!Array['isArray'](_0x4b44d3)||_0x4b44d3['length']===0x0)return;const _0x4bd11a=Date[_0x240513(0x190)](),_0x4d1f26=_0x1d631a['config'][_0x240513(0x181)]||[];let _0x5882d2=![];for(let _0x4bf49a=_0x4b44d3[_0x240513(0x19c)]-0x1;_0x4bf49a>=0x0;_0x4bf49a--){const _0xc7fd0d=_0x4b44d3[_0x4bf49a];if(_0x4bd11a>=_0xc7fd0d[_0x240513(0x1e3)]){_0x1d631a[_0x240513(0x16e)][_0x240513(0x227)](_0x240513(0x18f)+_0xc7fd0d[_0x240513(0x1f3)]+_0x240513(0x177)),_0x4b44d3[_0x240513(0x21a)](_0x4bf49a,0x1),_0x5882d2=!![];continue;}const _0x4a4aff=_0x4d1f26[_0x240513(0x1b1)](_0x5cc465=>normalize(_0x5cc465[_0x240513(0x1d7)])===normalize(_0xc7fd0d['room'])&&(_0x5cc465['type']===_0x240513(0x21c)||_0x5cc465['type']==='thermostat'));if(_0x4a4aff){const _0x25ae6a=await findRelatedId(_0x1d631a,_0x4a4aff['id'],'setpoint');if(_0x25ae6a){const _0x2b69b3=await _0x1d631a[_0x240513(0x206)](_0x25ae6a);_0x2b69b3&&typeof _0x2b69b3['val']===_0x240513(0x1bb)&&(_0x2b69b3['val']<0xf&&(_0x1d631a[_0x240513(0x16e)][_0x240513(0x1a2)](_0x240513(0x17c)+_0xc7fd0d[_0x240513(0x1f3)]+'\x20auf\x20'+_0x2b69b3[_0x240513(0x1d0)]+_0x240513(0x163)+_0xc7fd0d[_0x240513(0x218)]+_0x240513(0x1b5)),await _0x1d631a[_0x240513(0x1e1)](_0x25ae6a,_0xc7fd0d[_0x240513(0x218)]),await logAutomationAction(_0x1d631a,_0x240513(0x1fe)+_0xc7fd0d[_0x240513(0x1f3)]+':\x20'+_0x2b69b3[_0x240513(0x1d0)]+_0x240513(0x186)+_0xc7fd0d[_0x240513(0x218)]+'¬∞C\x20(Kalender-Schutz)')));}}}_0x5882d2&&await _0x1d631a[_0x240513(0x1a8)](_0x5e7492,{'val':JSON[_0x240513(0x193)](_0x4b44d3),'ack':!![]});}catch(_0x44199b){_0x1d631a[_0x240513(0x16e)]['error'](_0x240513(0x166)+_0x44199b['message']);}}async function checkCalendarTriggers(_0x2087cb){const _0x3df045=a1_0x16787e;if(!_0x2087cb[_0x3df045(0x1d9)]['useCalendar']||!_0x2087cb[_0x3df045(0x1d9)][_0x3df045(0x219)])return;await updateSchedulePreview(_0x2087cb);let _0x47ba06={},_0x42e993={};try{const _0x7bae21=await _0x2087cb['getStateAsync']('analysis.energy.warmupTimes');if(_0x7bae21&&_0x7bae21['val'])_0x47ba06=JSON[_0x3df045(0x195)](_0x7bae21[_0x3df045(0x1d0)]);const _0x4a2f9e=await _0x2087cb[_0x3df045(0x165)](_0x3df045(0x1de));if(_0x4a2f9e&&_0x4a2f9e[_0x3df045(0x1d0)])_0x42e993=JSON[_0x3df045(0x195)](_0x4a2f9e[_0x3df045(0x1d0)]);}catch(_0x5e63f1){}let _0x2876cd={'default':0x15};try{const _0x3aeb25=await _0x2087cb[_0x3df045(0x165)]('analysis.energy.warmupTargets');if(_0x3aeb25&&_0x3aeb25[_0x3df045(0x1d0)])_0x2876cd=JSON[_0x3df045(0x195)](_0x3aeb25[_0x3df045(0x1d0)]);}catch(_0x9ede23){}let _0x12be3f=[];try{const _0x746b35=await _0x2087cb['getStateAsync']('analysis.energy.activeEnforcements');if(_0x746b35&&_0x746b35['val'])_0x12be3f=JSON['parse'](_0x746b35[_0x3df045(0x1d0)]);}catch(_0x222942){}try{const _0x85bf46=await _0x2087cb['getForeignStateAsync'](_0x2087cb[_0x3df045(0x1d9)][_0x3df045(0x219)]+'.data.table');if(!_0x85bf46||!_0x85bf46[_0x3df045(0x1d0)])return;const _0x2b16e5=JSON[_0x3df045(0x195)](_0x85bf46[_0x3df045(0x1d0)]),_0x2fcdfa=Date[_0x3df045(0x190)](),_0x4f94e2=_0x2087cb[_0x3df045(0x1d9)][_0x3df045(0x181)]||[],_0x5c7401=_0x2087cb[_0x3df045(0x1d9)][_0x3df045(0x18a)]||[];let _0x522124=![];for(const _0xd1a5d3 of _0x2b16e5){if(_0xd1a5d3['_calName']&&_0x5c7401[_0x3df045(0x19c)]>0x0&&!_0x5c7401[_0x3df045(0x20e)](_0xd1a5d3['_calName']))continue;const _0x238e87=_0xd1a5d3['_date']||_0xd1a5d3[_0x3df045(0x205)]||_0xd1a5d3[_0x3df045(0x1a1)];if(!_0x238e87)continue;const _0x4222cc=new Date(_0x238e87);if(isNaN(_0x4222cc['getTime']()))continue;const _0x16f75c=(_0xd1a5d3[_0x3df045(0x1ee)]||_0xd1a5d3['summary']||'')[_0x3df045(0x1aa)]();if(_0x16f75c['includes']('urlaub\x20ende')||_0x16f75c['includes'](_0x3df045(0x1d1))||_0x16f75c[_0x3df045(0x20e)]('ankunft')){let _0x436ceb=0x0;Object[_0x3df045(0x209)](_0x47ba06)[_0x3df045(0x1fc)](_0x4ffa2f=>{if(_0x4ffa2f>_0x436ceb)_0x436ceb=_0x4ffa2f;});if(_0x436ceb===0x0)_0x436ceb=0x78;const _0x1d94ec=_0x4222cc[_0x3df045(0x1a6)]()-_0x436ceb*0xea60;_0x2fcdfa>=_0x1d94ec&&_0x2fcdfa<_0x4222cc[_0x3df045(0x1a6)]()&&(_0x2087cb['currentSystemMode']!==_0x3df045(0x167)&&(_0x2087cb[_0x3df045(0x16e)]['info'](_0x3df045(0x208)+_0x436ceb+_0x3df045(0x20d)),await _0x2087cb[_0x3df045(0x1a8)](_0x3df045(0x1fa),{'val':_0x3df045(0x167),'ack':![]})));}for(const _0x1b3532 of _0x4f94e2){if(_0x1b3532['location']){const _0x543847=_0x1b3532[_0x3df045(0x1d7)][_0x3df045(0x1aa)](),_0x13e4d9=(_0x1b3532[_0x3df045(0x1a3)]||'')[_0x3df045(0x1aa)]();let _0x2bc5c0=_0x16f75c[_0x3df045(0x20e)](_0x543847);!_0x2bc5c0&&_0x13e4d9['length']>0x3&&_0x16f75c[_0x3df045(0x20e)](_0x13e4d9)&&(_0x2bc5c0=!![]);if(_0x2bc5c0){const _0x2aff37=getWarmupRobust(_0x47ba06,_0x1b3532[_0x3df045(0x1d7)]),_0x404a6d=_0x42e993[_0x1b3532['location']]||_0x3df045(0x1d4),_0x48e887=_0x4222cc['getTime']()-_0x2aff37*0xea60;if(_0x2fcdfa>=_0x48e887&&_0x2fcdfa<_0x4222cc[_0x3df045(0x1a6)]()){const _0x59e79a=lastActions['cal_'+_0x1b3532[_0x3df045(0x1d7)]];if(_0x59e79a&&_0x2fcdfa-_0x59e79a<CAL_COOLDOWN_MS)continue;const _0x123572=await findRelatedId(_0x2087cb,_0x1b3532['id'],_0x3df045(0x1c0));if(_0x123572){let _0x55d65a=_0x2876cd[_0x1b3532[_0x3df045(0x1d7)]];if(_0x55d65a===undefined)_0x55d65a=_0x2876cd['default'];if(_0x55d65a===undefined)_0x55d65a=0x15;const _0x248c7f=await _0x2087cb[_0x3df045(0x206)](_0x123572);if(_0x248c7f&&typeof _0x248c7f[_0x3df045(0x1d0)]===_0x3df045(0x1bb)&&_0x248c7f[_0x3df045(0x1d0)]<_0x55d65a-0.5){_0x2087cb[_0x3df045(0x16e)][_0x3df045(0x227)]('üìÖ\x20SMART\x20SCHEDULE\x20['+_0x404a6d+_0x3df045(0x182)+_0x1b3532[_0x3df045(0x1d7)]+_0x3df045(0x1a9)+_0x16f75c+_0x3df045(0x1e4)+_0x55d65a+_0x3df045(0x220)+_0x2aff37+_0x3df045(0x20d)),await _0x2087cb[_0x3df045(0x1e1)](_0x123572,_0x55d65a),await logAutomationAction(_0x2087cb,_0x3df045(0x1a0)+_0x1b3532[_0x3df045(0x1d7)]+'\x20->\x20'+_0x55d65a+_0x3df045(0x21d)+_0x404a6d+')'),lastActions[_0x3df045(0x1e7)+_0x1b3532[_0x3df045(0x1d7)]]=_0x2fcdfa;const _0x32ae0c=_0x12be3f[_0x3df045(0x228)](_0x2aa812=>_0x2aa812[_0x3df045(0x1f3)]===_0x1b3532[_0x3df045(0x1d7)]);if(_0x32ae0c!==-0x1)_0x12be3f[_0x3df045(0x21a)](_0x32ae0c,0x1);_0x12be3f[_0x3df045(0x18c)]({'room':_0x1b3532[_0x3df045(0x1d7)],'target':_0x55d65a,'until':_0x4222cc[_0x3df045(0x1a6)]()}),_0x522124=!![];}}}}}}}_0x522124&&await _0x2087cb[_0x3df045(0x1a8)](_0x3df045(0x203),{'val':JSON[_0x3df045(0x193)](_0x12be3f),'ack':!![]});}catch(_0xaca40f){_0x2087cb[_0x3df045(0x16e)][_0x3df045(0x1a2)](_0x3df045(0x213)+_0xaca40f[_0x3df045(0x19f)]);}}async function manageMpcIntervention(_0x27c343,_0x3cb7cc,_0xfe3d65){const _0x1497f6=a1_0x16787e;try{const _0xd0eadc=_0x1497f6(0x229),_0x273f2e=await _0x27c343['getStateAsync'](_0xd0eadc);let _0x280434=[];if(_0x273f2e&&_0x273f2e[_0x1497f6(0x1d0)])try{_0x280434=JSON[_0x1497f6(0x195)](_0x273f2e[_0x1497f6(0x1d0)]);}catch(_0x17cecc){}const _0x1b4ed9=_0x280434[_0x1497f6(0x1b8)](_0x3cb7cc);if(_0xfe3d65===_0x1497f6(0x19d))_0x1b4ed9===-0x1&&(_0x280434[_0x1497f6(0x18c)](_0x3cb7cc),await _0x27c343[_0x1497f6(0x1a8)](_0xd0eadc,{'val':JSON[_0x1497f6(0x193)](_0x280434),'ack':!![]}));else _0xfe3d65===_0x1497f6(0x1c7)&&(_0x1b4ed9!==-0x1&&(_0x280434['splice'](_0x1b4ed9,0x1),await _0x27c343[_0x1497f6(0x1a8)](_0xd0eadc,{'val':JSON['stringify'](_0x280434),'ack':!![]})));}catch(_0x410429){}}async function cleanupGhostInterventions(_0x5361a5){const _0x237e8d=a1_0x16787e;try{const _0x240e23=_0x237e8d(0x229),_0x2796cb=await _0x5361a5[_0x237e8d(0x165)](_0x240e23);if(!_0x2796cb||!_0x2796cb[_0x237e8d(0x1d0)])return;const _0x2a49f8=JSON[_0x237e8d(0x195)](_0x2796cb['val']);if(!Array[_0x237e8d(0x1f1)](_0x2a49f8)||_0x2a49f8[_0x237e8d(0x19c)]===0x0)return;let _0x8c7745={'default':0x15};try{const _0x4950c8=await _0x5361a5[_0x237e8d(0x165)](_0x237e8d(0x175));if(_0x4950c8&&_0x4950c8[_0x237e8d(0x1d0)])_0x8c7745=JSON[_0x237e8d(0x195)](_0x4950c8[_0x237e8d(0x1d0)]);}catch(_0x2d6cb7){}let _0x37ca06=[];try{const _0x4e94d2=await _0x5361a5[_0x237e8d(0x165)](_0x237e8d(0x17b));if(_0x4e94d2&&_0x4e94d2[_0x237e8d(0x1d0)])_0x37ca06=JSON[_0x237e8d(0x195)](_0x4e94d2[_0x237e8d(0x1d0)]);}catch(_0x147cc1){}let _0x2cf79f={},_0x29fa21=![];try{const _0x491320=await _0x5361a5[_0x237e8d(0x165)](_0x237e8d(0x1fb));if(_0x491320&&_0x491320['val'])_0x2cf79f=JSON[_0x237e8d(0x195)](_0x491320[_0x237e8d(0x1d0)]);}catch(_0x3aa2ce){}if(_0x2cf79f[_0x237e8d(0x16c)]){const _0x1fbb1e=Date['now']();for(const [_0x3ab420,_0x864863]of Object[_0x237e8d(0x17a)](_0x2cf79f[_0x237e8d(0x16c)])){_0x1fbb1e-_0x864863>PENALTY_TTL&&(delete _0x2cf79f[_0x3ab420],delete _0x2cf79f[_0x237e8d(0x16c)][_0x3ab420],_0x29fa21=!![],_0x5361a5[_0x237e8d(0x16e)][_0x237e8d(0x227)]('üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27'+_0x3ab420+_0x237e8d(0x1ba)));}}const _0x664689=_0x5361a5[_0x237e8d(0x1d9)][_0x237e8d(0x181)]||[];let _0x25005a=![];for(let _0x32553f=_0x2a49f8[_0x237e8d(0x19c)]-0x1;_0x32553f>=0x0;_0x32553f--){const _0xa9958=_0x2a49f8[_0x32553f],_0x56ba5b=_0x664689[_0x237e8d(0x1b1)](_0x10c094=>normalize(_0x10c094['location'])===normalize(_0xa9958)&&(_0x10c094['type']===_0x237e8d(0x21c)||_0x10c094[_0x237e8d(0x1f8)]==='thermostat'));if(!_0x56ba5b){_0x5361a5[_0x237e8d(0x16e)][_0x237e8d(0x1a2)](_0x237e8d(0x185)+_0xa9958+_0x237e8d(0x18e)),_0x2a49f8[_0x237e8d(0x21a)](_0x32553f,0x1),_0x25005a=!![];continue;}if(_0x56ba5b){const _0x1862a1=await findRelatedId(_0x5361a5,_0x56ba5b['id'],_0x237e8d(0x1c0)),_0x37aa8e=await _0x5361a5['getForeignStateAsync'](_0x56ba5b['id']);if(_0x1862a1){const _0x573ae2=await _0x5361a5['getForeignStateAsync'](_0x1862a1);if(_0x573ae2&&typeof _0x573ae2['val']===_0x237e8d(0x1bb)){let _0x4ea68d=![],_0xc49aa4='';Math[_0x237e8d(0x1f0)](_0x573ae2[_0x237e8d(0x1d0)]-ECO_TEMP)>0.5&&(_0x4ea68d=!![],_0xc49aa4=_0x237e8d(0x21e));if(!_0x4ea68d&&_0x37aa8e&&typeof _0x37aa8e['val']===_0x237e8d(0x1bb)){const _0x2fe2a4=_0x8c7745[_0xa9958]||_0x8c7745[_0x237e8d(0x191)]||0x15;_0x37aa8e[_0x237e8d(0x1d0)]<_0x2fe2a4+0.2&&(_0x4ea68d=!![],_0xc49aa4=_0x237e8d(0x198));}if(_0x4ea68d){if(_0xc49aa4==='manual'){_0x5361a5[_0x237e8d(0x16e)][_0x237e8d(0x227)]('üßπ\x20[MPC\x20CLEANUP]\x20'+_0xa9958+_0x237e8d(0x212)+_0x573ae2['val']+_0x237e8d(0x215)+ECO_TEMP+_0x237e8d(0x1df));const _0xc8a4a6=lastActions[_0x237e8d(0x1e7)+_0xa9958],_0x24f535=_0xc8a4a6&&Date[_0x237e8d(0x190)]()-_0xc8a4a6<0x2*0x3c*0x3e8;if(!_0x24f535&&_0x573ae2[_0x237e8d(0x1d0)]>ECO_TEMP+0.5){_0x5361a5[_0x237e8d(0x171)]&&(_0x5361a5[_0x237e8d(0x16e)][_0x237e8d(0x227)](_0x237e8d(0x1d8)+_0xa9958+_0x237e8d(0x1af)),_0x5361a5['sendToPythonWrapper'](_0x237e8d(0x174),{'room':_0xa9958}));const _0x2807b1=_0xa9958+'_'+new Date()[_0x237e8d(0x16a)]();if(!_0x2cf79f[_0x2807b1]){_0x2cf79f[_0x2807b1]=0x1;if(!_0x2cf79f[_0x237e8d(0x16c)])_0x2cf79f[_0x237e8d(0x16c)]={};_0x2cf79f[_0x237e8d(0x16c)][_0x2807b1]=Date[_0x237e8d(0x190)](),_0x29fa21=!![];}}else _0x24f535&&_0x5361a5[_0x237e8d(0x16e)][_0x237e8d(0x227)](_0x237e8d(0x180)+_0xa9958+_0x237e8d(0x1cd));}else{if(_0xc49aa4===_0x237e8d(0x198)){let _0x446398=![];if(_0x37ca06[_0x237e8d(0x1b1)](_0x532407=>_0x532407[_0x237e8d(0x1f3)]===_0xa9958))_0x446398=!![];const _0x160f3c=_0x664689[_0x237e8d(0x1b0)](_0x347b48=>normalize(_0x347b48[_0x237e8d(0x1d7)])===normalize(_0xa9958)&&(_0x347b48[_0x237e8d(0x1f8)]===_0x237e8d(0x225)||_0x347b48[_0x237e8d(0x1f8)]===_0x237e8d(0x1cb)||_0x347b48[_0x237e8d(0x1f8)]===_0x237e8d(0x1c8)));for(const _0x131536 of _0x160f3c){try{const _0x50a513=await _0x5361a5[_0x237e8d(0x206)](_0x131536['id']);if(_0x50a513&&(_0x50a513[_0x237e8d(0x1d0)]===!![]||_0x50a513[_0x237e8d(0x1d0)]===0x1||String(_0x50a513['val'])[_0x237e8d(0x1aa)]()===_0x237e8d(0x1d5)))_0x446398=!![];}catch(_0x16c08c){}}if(_0x446398)_0x5361a5[_0x237e8d(0x16e)][_0x237e8d(0x227)](_0x237e8d(0x192)+_0xa9958+_0x237e8d(0x1ab));else{const _0x29548e=_0x8c7745[_0xa9958]||_0x8c7745[_0x237e8d(0x191)]||0x15;_0x5361a5[_0x237e8d(0x16e)][_0x237e8d(0x227)](_0x237e8d(0x1dd)+_0xa9958+'\x20erreicht\x20Limit\x20('+_0x37aa8e[_0x237e8d(0x1d0)]+_0x237e8d(0x1ad)+(_0x29548e+0.2)+_0x237e8d(0x20f)),await _0x5361a5[_0x237e8d(0x1e1)](_0x1862a1,_0x29548e),await logAutomationAction(_0x5361a5,'[WATCHDOG]\x20'+_0xa9958+_0x237e8d(0x164)+_0x29548e+'¬∞C'),lastActions[_0x237e8d(0x17e)+_0xa9958]=Date[_0x237e8d(0x190)]();}}}_0x2a49f8['splice'](_0x32553f,0x1),_0x25005a=!![];}}}}}_0x25005a&&await _0x5361a5[_0x237e8d(0x1a8)](_0x240e23,{'val':JSON[_0x237e8d(0x193)](_0x2a49f8),'ack':!![]}),_0x29fa21&&await _0x5361a5[_0x237e8d(0x1a8)](_0x237e8d(0x1fb),{'val':JSON[_0x237e8d(0x193)](_0x2cf79f),'ack':!![]});}catch(_0x24186b){}}function a1_0x2ef1(){const _0x36fc6f=['string','temperature','¬∞C\x20(via\x20','manual','off','¬∞C\x20(Vorlauf:\x20','.4.VALVE_STATE','.4.SET_TEMPERATURE','ACTUAL_TEMPERATURE','Unbekannt','window','\x20->\x20Schalte\x20','info','findIndex','analysis.energy.mpcActiveInterventions','\x20gefunden!','pi_heating_demand','hm-rpc','3342izVxnI','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','getStateAsync','Enforcement\x20Monitor\x20Error:\x20','normal','Soll','\x20wieder\x20auf\x20','getHours','map','_meta','ist','log','[MPC]\x20','Manuelles\x20Mapping','sendToPythonWrapper','¬∞C!\x20(Puffer\x20leer).','Pr√§diktion:\x20','TRAIN_RL_PENALTY','analysis.energy.warmupTargets','replace','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','target_temperature','.data.table','entries','analysis.energy.ventilationAlerts','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','analysis.automation.actionLog','rescue_','mpc_','üìÖ\x20[MPC\x20INFO]\x20','devices',']:\x20Raum-Trigger\x20\x27','exports','useCalendar','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','¬∞C\x20->\x20','11781Fugnme','unit','51972UqWnjB','calendarSelection','apply','push','reason','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','now','default','üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20','stringify','.1.ACTUAL_TEMPERATURE','parse','local_temperature','approved','too_cold','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','6692623NcSjgn','actual','length','add','join','message','[CAL]\x20','date','warn','name','SET_POINT_TEMPERATURE','sort','getTime','switch','setStateAsync','\x27\x20(Match:\x20','toLowerCase','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','getForeignObjectAsync','¬∞C\x20<\x20','search','\x20wurde\x20manuell\x20erh√∂ht.','filter','find','analysis.energy.schedulePreview','dimmer','üî•\x20[MPC\x20ACTION]\x20Heize\x20','¬∞C.','analysis.automation.mode','summary','indexOf','set','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','number','unshift','common','¬∞C!\x20(Puffer:\x20','position','setpoint','occupied_heating_setpoint','.1.LEVEL','role','constructor','score','7MaByWB','remove','contact','slice','2398092dNELeg','sensor','trim','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','1961052mhaLAD','_date','val','r√ºckkehr','valveMapping','analysis.energy.warmupTimes','Classic','open','valve_position','location','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','config','messwert','localeCompare','thermostat.setpoint','üö®\x20[MPC\x20WATCHDOG]\x20','analysis.energy.warmupSources','¬∞C).\x20Entferne\x20Status.','.1.SET_POINT_TEMPERATURE','setForeignStateAsync','value.valve','until',')\x20aktiv.\x20Heize\x20auf\x20','3135ObChhR',':\x20Aufheizen\x20auf\x20','cal_','stellwert','urlaub\x20ende','split','SET','2004232DPZfEp','minutes_safe','event','triggerTime','abs','isArray','wert','room',':\x20Absenkung\x20auf\x20','active','thermostat','temp','type','\x20min)','system.mode','analysis.energy.rlPenalties','forEach','soll','[FORCE]\x20','.1.TEMPERATURE','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20','valve','thermostatMapping','analysis.energy.activeEnforcements','_calName','eventStart','getForeignStateAsync','./ai_agent','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','values','level.valve','from','toString','\x20min).','includes','¬∞C).\x20Sparmodus\x20beendet!','\x20auf\x20','getForeignObjectsAsync','\x20ist\x20auf\x20','Calendar\x20Check\x20Error:\x20','light','¬∞C\x20(nicht\x20','(((.+)+)+)+$','Nicht\x20gefunden','target','calendarInstance','splice'];a1_0x2ef1=function(){return _0x36fc6f;};return a1_0x2ef1();}async function applyEnergySavings(_0x52deba,_0x3b4b7f){const _0x37968f=a1_0x16787e;await cleanupGhostInterventions(_0x52deba);if(!_0x3b4b7f||_0x3b4b7f[_0x37968f(0x19c)]===0x0)return;const _0x4ef9b4=_0x52deba['config'][_0x37968f(0x181)]||[],_0x47e67c=Date['now']();for(const _0x5401a5 of _0x3b4b7f){const _0x3585f0=_0x5401a5[_0x37968f(0x1f3)],_0x5eb217=_0x5401a5[_0x37968f(0x1ed)],_0x44b48=_0x5401a5[_0x37968f(0x218)]||0x15;if(lastActions[_0x37968f(0x17e)+_0x3585f0]&&_0x47e67c-lastActions[_0x37968f(0x17e)+_0x3585f0]<RESCUE_LOCK_MS)continue;const _0x5c0451=_0x4ef9b4[_0x37968f(0x1b1)](_0x315164=>normalize(_0x315164[_0x37968f(0x1d7)])===normalize(_0x3585f0)&&(_0x315164[_0x37968f(0x1f8)]==='temperature'||_0x315164['type']==='thermostat'));if(!_0x5c0451)continue;const _0x5bc29c=await findRelatedId(_0x52deba,_0x5c0451['id'],'setpoint');if(_0x5bc29c){if(lastActions[_0x37968f(0x17f)+_0x3585f0]&&_0x47e67c-lastActions[_0x37968f(0x17f)+_0x3585f0]<0x1e*0x3c*0x3e8)continue;const _0x364124=await _0x52deba[_0x37968f(0x206)](_0x5bc29c);if(_0x364124&&typeof _0x364124[_0x37968f(0x1d0)]==='number'){const _0x533e93=_0x364124[_0x37968f(0x1d0)];_0x533e93!==ECO_TEMP&&await manageMpcIntervention(_0x52deba,_0x3585f0,'remove');if(_0x5eb217>0x1e)_0x533e93>ECO_TEMP+0.5&&(_0x52deba[_0x37968f(0x16e)][_0x37968f(0x227)](_0x37968f(0x200)+_0x3585f0+_0x37968f(0x210)+ECO_TEMP+_0x37968f(0x1be)+_0x5eb217+_0x37968f(0x1f9)),await _0x52deba['setForeignStateAsync'](_0x5bc29c,ECO_TEMP),await manageMpcIntervention(_0x52deba,_0x3585f0,_0x37968f(0x19d)),lastActions[_0x37968f(0x17f)+_0x3585f0]=_0x47e67c,await logAutomationAction(_0x52deba,'[MPC]\x20'+_0x3585f0+_0x37968f(0x1f4)+ECO_TEMP+'¬∞C'));else _0x5eb217<=0xf&&(_0x533e93<_0x44b48&&(_0x52deba[_0x37968f(0x16e)][_0x37968f(0x227)](_0x37968f(0x1b4)+_0x3585f0+_0x37968f(0x169)+_0x44b48+_0x37968f(0x172)),await _0x52deba[_0x37968f(0x1e1)](_0x5bc29c,_0x44b48),await manageMpcIntervention(_0x52deba,_0x3585f0,'remove'),lastActions[_0x37968f(0x17f)+_0x3585f0]=_0x47e67c,await logAutomationAction(_0x52deba,_0x37968f(0x16f)+_0x3585f0+_0x37968f(0x1e6)+_0x44b48+'¬∞C')));}}else _0x52deba[_0x37968f(0x16e)][_0x37968f(0x1a2)](_0x37968f(0x199)+_0x3585f0+_0x37968f(0x22a));}}module[a1_0x16787e(0x183)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};