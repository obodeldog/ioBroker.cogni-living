const a1_0x226d99=a1_0x1223;(function(_0x8cd4a2,_0x57e5a7){const _0x21a72c=a1_0x1223,_0x4c188e=_0x8cd4a2();while(!![]){try{const _0x53914b=-parseInt(_0x21a72c(0x140))/0x1+parseInt(_0x21a72c(0xd6))/0x2*(-parseInt(_0x21a72c(0xd3))/0x3)+parseInt(_0x21a72c(0xdc))/0x4+parseInt(_0x21a72c(0x18e))/0x5*(-parseInt(_0x21a72c(0x10b))/0x6)+-parseInt(_0x21a72c(0x146))/0x7*(parseInt(_0x21a72c(0xf1))/0x8)+parseInt(_0x21a72c(0x18a))/0x9+parseInt(_0x21a72c(0x10a))/0xa*(parseInt(_0x21a72c(0x134))/0xb);if(_0x53914b===_0x57e5a7)break;else _0x4c188e['push'](_0x4c188e['shift']());}catch(_0x11ef97){_0x4c188e['push'](_0x4c188e['shift']());}}}(a1_0x39e0,0x6cfdc));function a1_0x39e0(){const _0x58ee18=['setStateAsync','sort','consultButler','room','438853RHqMby','values','Classic','role','number','actual','3713507YimXTf','analysis.automation.lastAction','info','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','cal_','\x20auf\x20','_date','val','position','normal',')\x20aktiv.\x20Heize\x20auf\x20','analysis.automation.actionLog','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','getHours','Â°C).\x20Entferne\x20Status.','ACTUAL_TEMPERATURE','wert','Â°C!\x20(Puffer\x20leer).','PERFECT','value.valve','analysis.energy.warmupSources','_calName','ðŸ“…\x20SMART\x20SCHEDULE\x20[','SET_POINT_TEMPERATURE','thermostatMapping','add','unit','.1.LEVEL','rÃ¼ckkehr','slice','Nicht\x20gefunden','stringify','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','Â°C.','getForeignStateAsync','target','SET','Fehlt','now','replace','toString','string','analysis.energy.rlPenalties','location','sensor','error','[FORCE]\x20','ðŸ“…\x20[MPC\x20INFO]\x20','Soll','Enforcement\x20Monitor\x20Error:\x20','local_temperature','manual','write','\x20min)','Ist','valve','ankunft','minutes_safe',':\x20Absenkung\x20auf\x20','_meta','pi_heating_demand','calendarInstance',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','Calendar\x20Check\x20Error:\x20','mpc_','remove','push','597474eOIMxr',']:\x20Raum-Trigger\x20\x27','Unbekannt','devices','195620FpzbRJ','analysis.energy.mpcActiveInterventions','isArray','openknx','Manuelles\x20Mapping','setForeignStateAsync','Unknown','analysis.energy.schedulePreview','indexOf','localeCompare','ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','entries','getTime','[WATCHDOG]\x20','3AeUttl','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','includes','1470892xRDOoX','\x20->\x20','currentSystemMode','.1.TEMPERATURE','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','sendToPythonWrapper','2675692aJeSKI','level','TRAIN_RL_PENALTY','\x20min).','splice','trim','[MPC]\x20','toLowerCase','\x20erreicht\x20Limit\x20(','config','until','analysis.automation.mode','\x20->\x20Schalte\x20','summary','current_heating_setpoint','Â°C\x20(via\x20','state','exports','ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27','analysis.energy.activeEnforcements','window','8HxOPWf','contact','system.mode','forEach','stellwert','\x20wieder\x20auf\x20','target_temperature','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','map','parse','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','soll','[CAL]\x20','calendarSelection','off','toUpperCase','unshift','event','useCalendar','ACTUAL','getStateAsync','getForeignObjectAsync','length','default','valveMapping','4130swoRLY','120Yfopte','./ai_agent','split','.4.SET_TEMPERATURE','getForeignObjectsAsync','PrÃ¤diktion:\x20','score','urlaub\x20ende','warn','rescue_','level.temperature','triggerTime','.1.ACTUAL_TEMPERATURE','abs','analysis.energy.warmupTargets','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','thermostat','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.',':\x20Aufheizen\x20auf\x20','valve_position','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','search','type','Â°C\x20(nicht\x20','setpoint','message','date','(((.+)+)+)+$','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','findIndex','hm-rpc','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','analysis.energy.ventilationAlerts','open','join','active','common','set','log','reason','Â°C\x20->\x20','58553gXXrGC','temperature','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','dimmer','name','eventStart','filter','find'];a1_0x39e0=function(){return _0x58ee18;};return a1_0x39e0();}const a1_0x1b8502=(function(){let _0x1ffa39=!![];return function(_0x211129,_0x2b0d3a){const _0xc87928=_0x1ffa39?function(){if(_0x2b0d3a){const _0x5aaf8a=_0x2b0d3a['apply'](_0x211129,arguments);return _0x2b0d3a=null,_0x5aaf8a;}}:function(){};return _0x1ffa39=![],_0xc87928;};}()),a1_0x356c81=a1_0x1b8502(this,function(){const _0x5d24b2=a1_0x1223;return a1_0x356c81[_0x5d24b2(0x16f)]()[_0x5d24b2(0x120)]('(((.+)+)+)+$')[_0x5d24b2(0x16f)]()['constructor'](a1_0x356c81)['search'](_0x5d24b2(0x126));});a1_0x356c81();function a1_0x1223(_0x3ada9e,_0x415c22){const _0x44742a=a1_0x39e0();return a1_0x1223=function(_0x356c81,_0x1b8502){_0x356c81=_0x356c81-0xc7;let _0x39e087=_0x44742a[_0x356c81];return _0x39e087;},a1_0x1223(_0x3ada9e,_0x415c22);}'use strict';const aiAgent=require(a1_0x226d99(0x10c)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x10dfa5){const _0x47079f=a1_0x226d99;if(!_0x10dfa5)return'';return _0x10dfa5['toLowerCase']()['replace'](/\s+/g,'')[_0x47079f(0xe1)]();}function getWarmupRobust(_0x3c01a4,_0x264f51){const _0x30beca=a1_0x226d99;if(!_0x3c01a4||!_0x264f51)return 0x3c;if(_0x3c01a4[_0x264f51]!==undefined)return _0x3c01a4[_0x264f51];const _0x40582e=_0x264f51[_0x30beca(0xe3)]()['replace'](/Ã¤/g,'ae')[_0x30beca(0x16e)](/Ã¶/g,'oe')[_0x30beca(0x16e)](/Ã¼/g,'ue')['replace'](/ÃŸ/g,'ss')[_0x30beca(0x16e)](/\s+/g,'_')[_0x30beca(0x16e)](/[^a-z0-9_]/g,'');if(_0x3c01a4[_0x40582e]!==undefined)return _0x3c01a4[_0x40582e];return 0x3c;}async function logAutomationAction(_0x134f6b,_0xd359ef){const _0x268803=a1_0x226d99;await _0x134f6b[_0x268803(0x13c)](_0x268803(0x147),{'val':_0xd359ef,'ack':!![]});try{const _0x4d8e14=_0x268803(0x151),_0x53ac16=await _0x134f6b[_0x268803(0x105)](_0x4d8e14);let _0x38ce69=[];if(_0x53ac16&&_0x53ac16[_0x268803(0x14d)])try{_0x38ce69=JSON[_0x268803(0xfa)](_0x53ac16[_0x268803(0x14d)]);}catch(_0x180a96){}_0x38ce69[_0x268803(0x101)]({'ts':Date[_0x268803(0x16d)](),'msg':_0xd359ef});if(_0x38ce69[_0x268803(0x107)]>0x32)_0x38ce69=_0x38ce69['slice'](0x0,0x32);await _0x134f6b[_0x268803(0x13c)](_0x4d8e14,{'val':JSON[_0x268803(0x166)](_0x38ce69),'ack':!![]});}catch(_0x922d1a){}}async function handlePrediction(_0x9104e5,_0x518d54,_0x1d4351){const _0xdd77f3=a1_0x226d99;if(!_0x518d54||_0x518d54===_0xdd77f3(0xcb))return;let _0xd237c5=_0xdd77f3(0xff),_0x2b5d6e=0.6;try{const _0x3e88d0=await _0x9104e5[_0xdd77f3(0x105)](_0xdd77f3(0xe7));if(_0x3e88d0&&_0x3e88d0[_0xdd77f3(0x14d)])_0xd237c5=_0x3e88d0[_0xdd77f3(0x14d)];const _0xd2c42f=await _0x9104e5[_0xdd77f3(0x105)]('analysis.automation.confidenceThreshold');if(_0xd2c42f&&_0xd2c42f[_0xdd77f3(0x14d)])_0x2b5d6e=_0xd2c42f['val'];}catch(_0x3321cc){}if(_0xd237c5===_0xdd77f3(0xff)||_0x1d4351<_0x2b5d6e)return;const _0x1b6db5=Date['now']();if(lastActions[_0x518d54]&&_0x1b6db5-lastActions[_0x518d54]<COOLDOWN_MS)return;const _0x245c39=_0x9104e5[_0xdd77f3(0xe5)][_0xdd77f3(0x18d)]||[],_0x31eca0=normalize(_0x518d54),_0x492e38=_0x245c39['find'](_0x1e25d8=>normalize(_0x1e25d8['location'])===_0x31eca0&&(_0x1e25d8[_0xdd77f3(0x121)]==='light'||_0x1e25d8[_0xdd77f3(0x121)]===_0xdd77f3(0x137)||_0x1e25d8['type']==='switch'));if(!_0x492e38)return;const _0x5e5655=await aiAgent[_0xdd77f3(0x13e)](_0x9104e5,_0x518d54,_0x492e38[_0xdd77f3(0x138)],_0x1d4351);if(!_0x5e5655['approved'])return;const _0x28bc33=_0xdd77f3(0x110)+_0x518d54+_0xdd77f3(0xe8)+_0x492e38[_0xdd77f3(0x138)]+'\x20('+_0x5e5655[_0xdd77f3(0x132)]+')';await logAutomationAction(_0x9104e5,'['+_0xd237c5[_0xdd77f3(0x100)]()+']\x20'+_0x28bc33);if(_0xd237c5===_0xdd77f3(0x12e)){const _0x569829=await _0x9104e5['getForeignStateAsync'](_0x492e38['id']);(!_0x569829||!_0x569829[_0xdd77f3(0x14d)]&&_0x569829['val']!==!![])&&await _0x9104e5['setForeignStateAsync'](_0x492e38['id'],!![]),lastActions[_0x518d54]=_0x1b6db5;}}async function findRelatedId(_0x5f00ed,_0x3a0c85,_0x172aef=a1_0x226d99(0x123)){const _0x6e044e=a1_0x226d99;if(_0x172aef===_0x6e044e(0x123)&&_0x5f00ed[_0x6e044e(0xe5)][_0x6e044e(0x15f)]){let _0x338413=_0x5f00ed[_0x6e044e(0xe5)][_0x6e044e(0x15f)];if(typeof _0x338413===_0x6e044e(0x170))try{_0x338413=JSON[_0x6e044e(0xfa)](_0x338413);}catch(_0x28d49a){}if(_0x338413&&_0x338413[_0x3a0c85])return _0x338413[_0x3a0c85];}if(_0x172aef===_0x6e044e(0x17e)&&_0x5f00ed['config'][_0x6e044e(0x109)]){let _0x854b6=_0x5f00ed[_0x6e044e(0xe5)]['valveMapping'];if(typeof _0x854b6===_0x6e044e(0x170))try{_0x854b6=JSON[_0x6e044e(0xfa)](_0x854b6);}catch(_0x498d45){}if(_0x854b6&&_0x854b6[_0x3a0c85])return _0x854b6[_0x3a0c85];}let _0x360077=[];if(_0x172aef===_0x6e044e(0x123))_0x360077=[{'s':_0x6e044e(0x117),'t':'.1.SET_POINT_TEMPERATURE'},{'s':'.1.TEMPERATURE','t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x6e044e(0xd9),'t':_0x6e044e(0x10e)},{'s':_0x6e044e(0x156),'t':_0x6e044e(0x15e)},{'s':_0x6e044e(0x179),'t':'occupied_heating_setpoint'},{'s':_0x6e044e(0x179),'t':_0x6e044e(0xea)},{'s':_0x6e044e(0x135),'t':_0x6e044e(0xf7)},{'s':_0x6e044e(0x104),'t':_0x6e044e(0x16b)},{'s':_0x6e044e(0x17d),'t':_0x6e044e(0x177)},{'s':_0x6e044e(0x135),'t':_0x6e044e(0x123)}];else _0x172aef===_0x6e044e(0x17e)&&(_0x360077=[{'s':'.1.ACTUAL_TEMPERATURE','t':'.1.LEVEL'},{'s':_0x6e044e(0xd9),'t':_0x6e044e(0x162)},{'s':_0x6e044e(0xd9),'t':'.4.VALVE_STATE'},{'s':_0x6e044e(0x179),'t':_0x6e044e(0x183)},{'s':_0x6e044e(0x135),'t':_0x6e044e(0x11e)},{'s':'temperature','t':'level'}]);for(const _0x344190 of _0x360077){if(_0x3a0c85[_0x6e044e(0xd5)](_0x344190['s'])){const _0x5e73d2=_0x3a0c85[_0x6e044e(0x16e)](_0x344190['s'],_0x344190['t']),_0x3b115a=await _0x5f00ed[_0x6e044e(0x106)](_0x5e73d2);if(_0x3b115a)return _0x5e73d2;}}try{const _0x131c9d=_0x3a0c85[_0x6e044e(0x10d)]('.');if(_0x131c9d['length']>0x2){const _0x18a006=_0x131c9d['slice'](0x0,-0x1)[_0x6e044e(0x12d)]('.'),_0x32efe6=await _0x5f00ed[_0x6e044e(0x10f)](_0x18a006+'.*'),_0x48a263=[],_0x176d42=_0x3a0c85[_0x6e044e(0x10d)](/[._]+/)[_0x6e044e(0x13a)](_0x227920=>![_0x6e044e(0xc8),'0',_0x6e044e(0x129),'ist',_0x6e044e(0x157),'temperature',_0x6e044e(0x145),'sensor','messwert',_0x6e044e(0xec)][_0x6e044e(0xd5)](_0x227920[_0x6e044e(0xe3)]()));for(const [_0x3bf741,_0x3bb871]of Object['entries'](_0x32efe6)){if(_0x3bf741===_0x3a0c85)continue;if(_0x3bb871&&_0x3bb871['common']){const _0x303536=_0x3bf741[_0x6e044e(0xe3)](),_0x450857=(_0x3bb871[_0x6e044e(0x12f)][_0x6e044e(0x143)]||'')[_0x6e044e(0xe3)](),_0x285b6b=(_0x3bb871[_0x6e044e(0x12f)][_0x6e044e(0x161)]||'')['toLowerCase']();let _0x54379c=![];if(_0x172aef==='setpoint'&&_0x3bb871[_0x6e044e(0x12f)][_0x6e044e(0x17b)]===!![])_0x54379c=_0x303536['includes'](_0x6e044e(0x130))||_0x303536['includes'](_0x6e044e(0xfc))||_0x303536[_0x6e044e(0xd5)](_0x6e044e(0x16a))||_0x450857[_0x6e044e(0xd5)](_0x6e044e(0x115))||_0x450857[_0x6e044e(0xd5)]('thermostat.setpoint');else _0x172aef==='valve'&&(_0x54379c=_0x303536[_0x6e044e(0xd5)](_0x6e044e(0xdd))||_0x303536['includes']('valve')||_0x303536[_0x6e044e(0xd5)](_0x6e044e(0xf5))||_0x303536['includes'](_0x6e044e(0x14e))||_0x450857[_0x6e044e(0xd5)]('level.valve')||_0x450857[_0x6e044e(0xd5)](_0x6e044e(0x15a))||_0x285b6b['includes']('%'));if(_0x54379c){const _0x56f4ac=_0x3bf741[_0x6e044e(0x10d)](/[._]+/)[_0x6e044e(0xf9)](_0x246462=>_0x246462['toLowerCase']());let _0x435001=0x0;_0x176d42['forEach'](_0x13bd5f=>{const _0x5cff60=_0x6e044e;if(_0x56f4ac['includes'](_0x13bd5f[_0x5cff60(0xe3)]()))_0x435001++;}),_0x48a263[_0x6e044e(0x189)]({'id':_0x3bf741,'score':_0x435001});}}}if(_0x48a263['length']>0x0){_0x48a263['sort']((_0x1166a5,_0x355190)=>_0x355190[_0x6e044e(0x111)]-_0x1166a5[_0x6e044e(0x111)]);if(_0x48a263[0x0][_0x6e044e(0x111)]>0x0)return _0x48a263[0x0]['id'];}}}catch(_0x449f49){}return null;}async function scanThermostats(_0x2ade85){const _0x4afae7=a1_0x226d99,_0x38c6ed=_0x2ade85[_0x4afae7(0xe5)][_0x4afae7(0x18d)]||[],_0x4ab7b9=[],_0x5c1940=_0x38c6ed[_0x4afae7(0x13a)](_0x421445=>_0x421445['id']&&_0x421445['id']['includes'](_0x4afae7(0x135))||_0x421445[_0x4afae7(0x121)]&&[_0x4afae7(0x135),_0x4afae7(0x11b),'sensor'][_0x4afae7(0xd5)](_0x421445[_0x4afae7(0x121)])||_0x421445['name']&&_0x421445[_0x4afae7(0x138)][_0x4afae7(0xe3)]()[_0x4afae7(0xd5)]('temp'));for(const _0xf89799 of _0x5c1940){const _0x24fd9b=await findRelatedId(_0x2ade85,_0xf89799['id'],'setpoint'),_0x546fdb=await findRelatedId(_0x2ade85,_0xf89799['id'],_0x4afae7(0x17e));let _0x50c2d2=_0x4afae7(0x165),_0x40f257=![],_0x4f36fa=_0x2ade85[_0x4afae7(0xe5)][_0x4afae7(0x15f)]||{};if(typeof _0x4f36fa===_0x4afae7(0x170))try{_0x4f36fa=JSON[_0x4afae7(0xfa)](_0x4f36fa);}catch(_0x2fd101){}let _0xa5d3fd=_0x2ade85[_0x4afae7(0xe5)]['valveMapping']||{};if(typeof _0xa5d3fd==='string')try{_0xa5d3fd=JSON[_0x4afae7(0xfa)](_0xa5d3fd);}catch(_0x4344a0){}if(_0x4f36fa[_0xf89799['id']]&&_0x4f36fa[_0xf89799['id']]===_0x24fd9b||_0xa5d3fd[_0xf89799['id']]&&_0xa5d3fd[_0xf89799['id']]===_0x546fdb)_0x50c2d2=_0x4afae7(0xc9),_0x40f257=!![];else(_0x24fd9b||_0x546fdb)&&(_0x50c2d2='Auto-Erkennung');_0x4ab7b9[_0x4afae7(0x189)]({'room':_0xf89799[_0x4afae7(0x172)]||_0x4afae7(0x18c),'sensorId':_0xf89799['id'],'setpointId':_0x24fd9b||'-','valveId':_0x546fdb||'-','source':_0x50c2d2,'isManual':_0x40f257,'status':_0x24fd9b&&_0x546fdb?_0x4afae7(0x159):_0x24fd9b?'OK':_0x4afae7(0x16c)});}return _0x4ab7b9[_0x4afae7(0x13d)]((_0x1d081d,_0x4fe34a)=>_0x1d081d[_0x4afae7(0x13f)][_0x4afae7(0xce)](_0x4fe34a[_0x4afae7(0x13f)]));}async function updateSchedulePreview(_0xd9407){const _0x26b146=a1_0x226d99;if(!_0xd9407[_0x26b146(0xe5)][_0x26b146(0x103)]||!_0xd9407[_0x26b146(0xe5)][_0x26b146(0x184)])return;let _0x49a082={};try{const _0x54485a=await _0xd9407[_0x26b146(0x105)]('analysis.energy.warmupTimes');if(_0x54485a&&_0x54485a['val'])_0x49a082=JSON[_0x26b146(0xfa)](_0x54485a[_0x26b146(0x14d)]);}catch(_0x37312e){}const _0x12e41f=[],_0x5481a5=Date['now'](),_0x2727a4=0x30*0x3c*0x3c*0x3e8;try{const _0x415eab=await _0xd9407['getForeignStateAsync'](_0xd9407['config'][_0x26b146(0x184)]+'.data.table');if(!_0x415eab||!_0x415eab['val'])return;const _0x4afd9c=JSON[_0x26b146(0xfa)](_0x415eab[_0x26b146(0x14d)]),_0xbfe48d=_0xd9407['config'][_0x26b146(0xfe)]||[],_0x249069=_0xd9407[_0x26b146(0xe5)][_0x26b146(0x18d)]||[],_0x4cb172=new Set();_0x249069[_0x26b146(0xf4)](_0x2cf125=>{const _0x14b17d=_0x26b146;if(_0x2cf125[_0x14b17d(0x172)])_0x4cb172['add'](_0x2cf125['location']);});for(const _0x4965a9 of _0x4afd9c){if(_0x4965a9['_calName']&&_0xbfe48d[_0x26b146(0x107)]>0x0&&!_0xbfe48d[_0x26b146(0xd5)](_0x4965a9[_0x26b146(0x15c)]))continue;const _0x2f04aa=_0x4965a9[_0x26b146(0x14c)]||_0x4965a9[_0x26b146(0x139)]||_0x4965a9[_0x26b146(0x125)];if(!_0x2f04aa)continue;const _0x19c25f=new Date(_0x2f04aa),_0xbad1dc=_0x19c25f[_0x26b146(0xd1)]();if(isNaN(_0xbad1dc))continue;if(_0xbad1dc<_0x5481a5)continue;if(_0xbad1dc>_0x5481a5+_0x2727a4)continue;const _0x484b5c=(_0x4965a9[_0x26b146(0x102)]||_0x4965a9['summary']||'')[_0x26b146(0xe3)]();let _0x496adb=![],_0x244353=[],_0x21029d=_0x4965a9[_0x26b146(0x102)]||_0x4965a9[_0x26b146(0xe9)]||_0x26b146(0x18c);if(_0x484b5c[_0x26b146(0xd5)](_0x26b146(0x112))||_0x484b5c[_0x26b146(0xd5)](_0x26b146(0x163))||_0x484b5c[_0x26b146(0xd5)](_0x26b146(0x17f)))_0x496adb=!![],_0x244353=Array['from'](_0x4cb172);else for(const _0x290429 of _0x4cb172){if(_0x484b5c['includes'](_0x290429[_0x26b146(0xe3)]()))_0x244353['push'](_0x290429);}_0x244353[_0x26b146(0x107)]>0x0&&_0x244353['forEach'](_0x2e5bc3=>{const _0x3ba518=_0x26b146;let _0x47ec1f=0x3c;if(_0x496adb){let _0x2a3ff9=0x0;Object[_0x3ba518(0x141)](_0x49a082)[_0x3ba518(0xf4)](_0x4ce257=>{if(_0x4ce257>_0x2a3ff9)_0x2a3ff9=_0x4ce257;}),_0x47ec1f=_0x2a3ff9>0x0?_0x2a3ff9:0x78;}else _0x47ec1f=getWarmupRobust(_0x49a082,_0x2e5bc3);const _0x4aa4ce=new Date(_0xbad1dc-_0x47ec1f*0xea60);_0x12e41f[_0x3ba518(0x189)]({'eventTime':_0xbad1dc,'triggerTime':_0x4aa4ce[_0x3ba518(0xd1)](),'room':_0x2e5bc3,'minutes':_0x47ec1f,'reason':_0x21029d,'isGlobal':_0x496adb});});}}catch(_0x332e74){}_0x12e41f[_0x26b146(0x13d)]((_0x5ba05b,_0x4969ee)=>_0x5ba05b[_0x26b146(0x116)]-_0x4969ee[_0x26b146(0x116)]);const _0x4432f5=_0x12e41f[_0x26b146(0x164)](0x0,0x5);await _0xd9407['setStateAsync'](_0x26b146(0xcc),{'val':JSON[_0x26b146(0x166)](_0x4432f5),'ack':!![]});}async function monitorEnforcements(_0x2884cd){const _0x21024e=a1_0x226d99;try{const _0x1a341f=_0x21024e(0xef),_0xc611ed=await _0x2884cd['getStateAsync'](_0x1a341f);if(!_0xc611ed||!_0xc611ed[_0x21024e(0x14d)])return;let _0xc214d6=[];try{_0xc214d6=JSON[_0x21024e(0xfa)](_0xc611ed[_0x21024e(0x14d)]);}catch(_0x13cf15){return;}if(!Array[_0x21024e(0xc7)](_0xc214d6)||_0xc214d6['length']===0x0)return;const _0x1be842=Date[_0x21024e(0x16d)](),_0x5c9502=_0x2884cd[_0x21024e(0xe5)][_0x21024e(0x18d)]||[];let _0x1baf90=![];for(let _0x3aa6bb=_0xc214d6[_0x21024e(0x107)]-0x1;_0x3aa6bb>=0x0;_0x3aa6bb--){const _0x5c838f=_0xc214d6[_0x3aa6bb];if(_0x1be842>=_0x5c838f[_0x21024e(0xe6)]){_0x2884cd[_0x21024e(0x131)][_0x21024e(0x148)](_0x21024e(0x167)+_0x5c838f['room']+_0x21024e(0x11f)),_0xc214d6['splice'](_0x3aa6bb,0x1),_0x1baf90=!![];continue;}const _0x16ee1e=_0x5c9502[_0x21024e(0x13b)](_0x548fa1=>normalize(_0x548fa1[_0x21024e(0x172)])===normalize(_0x5c838f['room'])&&(_0x548fa1[_0x21024e(0x121)]==='temperature'||_0x548fa1[_0x21024e(0x121)]==='thermostat'));if(_0x16ee1e){const _0x373f65=await findRelatedId(_0x2884cd,_0x16ee1e['id'],'setpoint');if(_0x373f65){const _0x3b1434=await _0x2884cd[_0x21024e(0x169)](_0x373f65);_0x3b1434&&typeof _0x3b1434[_0x21024e(0x14d)]===_0x21024e(0x144)&&(_0x3b1434[_0x21024e(0x14d)]<0xf&&(_0x2884cd[_0x21024e(0x131)][_0x21024e(0x113)](_0x21024e(0xcf)+_0x5c838f[_0x21024e(0x13f)]+_0x21024e(0x14b)+_0x3b1434[_0x21024e(0x14d)]+_0x21024e(0x11a)+_0x5c838f[_0x21024e(0x16a)]+_0x21024e(0x168)),await _0x2884cd['setForeignStateAsync'](_0x373f65,_0x5c838f[_0x21024e(0x16a)]),await logAutomationAction(_0x2884cd,_0x21024e(0x175)+_0x5c838f[_0x21024e(0x13f)]+':\x20'+_0x3b1434[_0x21024e(0x14d)]+_0x21024e(0x133)+_0x5c838f[_0x21024e(0x16a)]+'Â°C\x20(Kalender-Schutz)')));}}}_0x1baf90&&await _0x2884cd[_0x21024e(0x13c)](_0x1a341f,{'val':JSON[_0x21024e(0x166)](_0xc214d6),'ack':!![]});}catch(_0x3eebe9){_0x2884cd['log'][_0x21024e(0x174)](_0x21024e(0x178)+_0x3eebe9[_0x21024e(0x124)]);}}async function checkCalendarTriggers(_0x4b087b){const _0x5ed3db=a1_0x226d99;if(!_0x4b087b[_0x5ed3db(0xe5)]['useCalendar']||!_0x4b087b[_0x5ed3db(0xe5)][_0x5ed3db(0x184)])return;await updateSchedulePreview(_0x4b087b);let _0xe2a7ab={},_0x22517a={};try{const _0x45ab87=await _0x4b087b[_0x5ed3db(0x105)]('analysis.energy.warmupTimes');if(_0x45ab87&&_0x45ab87[_0x5ed3db(0x14d)])_0xe2a7ab=JSON[_0x5ed3db(0xfa)](_0x45ab87['val']);const _0x207345=await _0x4b087b['getStateAsync'](_0x5ed3db(0x15b));if(_0x207345&&_0x207345['val'])_0x22517a=JSON[_0x5ed3db(0xfa)](_0x207345['val']);}catch(_0x19f503){}let _0x2a1095={'default':0x15};try{const _0x20fb2e=await _0x4b087b[_0x5ed3db(0x105)](_0x5ed3db(0x119));if(_0x20fb2e&&_0x20fb2e['val'])_0x2a1095=JSON[_0x5ed3db(0xfa)](_0x20fb2e[_0x5ed3db(0x14d)]);}catch(_0x572842){}let _0x411577=[];try{const _0x28c695=await _0x4b087b[_0x5ed3db(0x105)](_0x5ed3db(0xef));if(_0x28c695&&_0x28c695['val'])_0x411577=JSON['parse'](_0x28c695[_0x5ed3db(0x14d)]);}catch(_0x3105cb){}try{const _0x3759ce=await _0x4b087b[_0x5ed3db(0x169)](_0x4b087b['config']['calendarInstance']+'.data.table');if(!_0x3759ce||!_0x3759ce['val'])return;const _0x54f448=JSON[_0x5ed3db(0xfa)](_0x3759ce['val']),_0x194598=Date[_0x5ed3db(0x16d)](),_0x5470e8=_0x4b087b[_0x5ed3db(0xe5)][_0x5ed3db(0x18d)]||[],_0xe29749=_0x4b087b[_0x5ed3db(0xe5)]['calendarSelection']||[];let _0x50aec6=![];for(const _0x2ad193 of _0x54f448){if(_0x2ad193[_0x5ed3db(0x15c)]&&_0xe29749['length']>0x0&&!_0xe29749['includes'](_0x2ad193[_0x5ed3db(0x15c)]))continue;const _0x16f59f=_0x2ad193[_0x5ed3db(0x14c)]||_0x2ad193[_0x5ed3db(0x139)]||_0x2ad193[_0x5ed3db(0x125)];if(!_0x16f59f)continue;const _0x1c027e=new Date(_0x16f59f);if(isNaN(_0x1c027e['getTime']()))continue;const _0x1b7f63=(_0x2ad193[_0x5ed3db(0x102)]||_0x2ad193[_0x5ed3db(0xe9)]||'')[_0x5ed3db(0xe3)]();if(_0x1b7f63[_0x5ed3db(0xd5)](_0x5ed3db(0x112))||_0x1b7f63['includes'](_0x5ed3db(0x163))||_0x1b7f63[_0x5ed3db(0xd5)]('ankunft')){let _0x747c8c=0x0;Object[_0x5ed3db(0x141)](_0xe2a7ab)[_0x5ed3db(0xf4)](_0x48f887=>{if(_0x48f887>_0x747c8c)_0x747c8c=_0x48f887;});if(_0x747c8c===0x0)_0x747c8c=0x78;const _0x110a53=_0x1c027e['getTime']()-_0x747c8c*0xea60;_0x194598>=_0x110a53&&_0x194598<_0x1c027e[_0x5ed3db(0xd1)]()&&(_0x4b087b[_0x5ed3db(0xd8)]!==_0x5ed3db(0x14f)&&(_0x4b087b[_0x5ed3db(0x131)][_0x5ed3db(0x148)](_0x5ed3db(0x152)+_0x747c8c+_0x5ed3db(0xdf)),await _0x4b087b[_0x5ed3db(0x13c)](_0x5ed3db(0xf3),{'val':_0x5ed3db(0x14f),'ack':![]})));}for(const _0x4fd886 of _0x5470e8){if(_0x4fd886[_0x5ed3db(0x172)]){const _0x230994=_0x4fd886[_0x5ed3db(0x172)][_0x5ed3db(0xe3)](),_0x1b1482=(_0x4fd886[_0x5ed3db(0x138)]||'')['toLowerCase']();let _0x21a327=_0x1b7f63[_0x5ed3db(0xd5)](_0x230994);!_0x21a327&&_0x1b1482[_0x5ed3db(0x107)]>0x3&&_0x1b7f63[_0x5ed3db(0xd5)](_0x1b1482)&&(_0x21a327=!![]);if(_0x21a327){const _0x5b2617=getWarmupRobust(_0xe2a7ab,_0x4fd886[_0x5ed3db(0x172)]),_0x5ba402=_0x22517a[_0x4fd886[_0x5ed3db(0x172)]]||_0x5ed3db(0x142),_0x39aa16=_0x1c027e['getTime']()-_0x5b2617*0xea60;if(_0x194598>=_0x39aa16&&_0x194598<_0x1c027e[_0x5ed3db(0xd1)]()){const _0x4d76b6=lastActions[_0x5ed3db(0x14a)+_0x4fd886[_0x5ed3db(0x172)]];if(_0x4d76b6&&_0x194598-_0x4d76b6<CAL_COOLDOWN_MS)continue;const _0x278553=await findRelatedId(_0x4b087b,_0x4fd886['id'],_0x5ed3db(0x123));if(_0x278553){let _0x540342=_0x2a1095[_0x4fd886['location']];if(_0x540342===undefined)_0x540342=_0x2a1095['default'];if(_0x540342===undefined)_0x540342=0x15;const _0x47650f=await _0x4b087b['getForeignStateAsync'](_0x278553);if(_0x47650f&&typeof _0x47650f[_0x5ed3db(0x14d)]===_0x5ed3db(0x144)&&_0x47650f[_0x5ed3db(0x14d)]<_0x540342-0.5){_0x4b087b['log']['info'](_0x5ed3db(0x15d)+_0x5ba402+_0x5ed3db(0x18b)+_0x4fd886['location']+'\x27\x20(Match:\x20'+_0x1b7f63+_0x5ed3db(0x150)+_0x540342+'Â°C\x20(Vorlauf:\x20'+_0x5b2617+_0x5ed3db(0xdf)),await _0x4b087b[_0x5ed3db(0xca)](_0x278553,_0x540342),await logAutomationAction(_0x4b087b,_0x5ed3db(0xfd)+_0x4fd886['location']+_0x5ed3db(0xd7)+_0x540342+_0x5ed3db(0xeb)+_0x5ba402+')'),lastActions[_0x5ed3db(0x14a)+_0x4fd886[_0x5ed3db(0x172)]]=_0x194598;const _0x56b426=_0x411577[_0x5ed3db(0x128)](_0x2d0e58=>_0x2d0e58[_0x5ed3db(0x13f)]===_0x4fd886['location']);if(_0x56b426!==-0x1)_0x411577['splice'](_0x56b426,0x1);_0x411577[_0x5ed3db(0x189)]({'room':_0x4fd886[_0x5ed3db(0x172)],'target':_0x540342,'until':_0x1c027e['getTime']()}),_0x50aec6=!![];}}}}}}}_0x50aec6&&await _0x4b087b['setStateAsync'](_0x5ed3db(0xef),{'val':JSON[_0x5ed3db(0x166)](_0x411577),'ack':!![]});}catch(_0x509107){_0x4b087b[_0x5ed3db(0x131)][_0x5ed3db(0x113)](_0x5ed3db(0x186)+_0x509107['message']);}}async function manageMpcIntervention(_0x6515cd,_0x395cce,_0x11424e){const _0xffaf11=a1_0x226d99;try{const _0x23c91d=_0xffaf11(0x18f),_0x33561e=await _0x6515cd[_0xffaf11(0x105)](_0x23c91d);let _0x2ca1da=[];if(_0x33561e&&_0x33561e[_0xffaf11(0x14d)])try{_0x2ca1da=JSON['parse'](_0x33561e[_0xffaf11(0x14d)]);}catch(_0x43d412){}const _0xf0678a=_0x2ca1da[_0xffaf11(0xcd)](_0x395cce);if(_0x11424e==='add')_0xf0678a===-0x1&&(_0x2ca1da['push'](_0x395cce),await _0x6515cd['setStateAsync'](_0x23c91d,{'val':JSON[_0xffaf11(0x166)](_0x2ca1da),'ack':!![]}));else _0x11424e===_0xffaf11(0x188)&&(_0xf0678a!==-0x1&&(_0x2ca1da[_0xffaf11(0xe0)](_0xf0678a,0x1),await _0x6515cd['setStateAsync'](_0x23c91d,{'val':JSON['stringify'](_0x2ca1da),'ack':!![]})));}catch(_0x426012){}}async function cleanupGhostInterventions(_0x11315d){const _0x2c1ef7=a1_0x226d99;try{const _0x579a81='analysis.energy.mpcActiveInterventions',_0x5b0aa5=await _0x11315d[_0x2c1ef7(0x105)](_0x579a81);if(!_0x5b0aa5||!_0x5b0aa5[_0x2c1ef7(0x14d)])return;const _0x2b130a=JSON[_0x2c1ef7(0xfa)](_0x5b0aa5[_0x2c1ef7(0x14d)]);if(!Array['isArray'](_0x2b130a)||_0x2b130a[_0x2c1ef7(0x107)]===0x0)return;let _0x422791={'default':0x15};try{const _0x5af994=await _0x11315d[_0x2c1ef7(0x105)]('analysis.energy.warmupTargets');if(_0x5af994&&_0x5af994[_0x2c1ef7(0x14d)])_0x422791=JSON[_0x2c1ef7(0xfa)](_0x5af994['val']);}catch(_0x1c77ea){}let _0x4d822f=[];try{const _0x1df3ee=await _0x11315d[_0x2c1ef7(0x105)](_0x2c1ef7(0x12b));if(_0x1df3ee&&_0x1df3ee['val'])_0x4d822f=JSON[_0x2c1ef7(0xfa)](_0x1df3ee[_0x2c1ef7(0x14d)]);}catch(_0x932745){}let _0x2d0300={},_0x5e5cc3=![];try{const _0x32c31d=await _0x11315d[_0x2c1ef7(0x105)](_0x2c1ef7(0x171));if(_0x32c31d&&_0x32c31d[_0x2c1ef7(0x14d)])_0x2d0300=JSON[_0x2c1ef7(0xfa)](_0x32c31d['val']);}catch(_0x1a3f85){}if(_0x2d0300[_0x2c1ef7(0x182)]){const _0x1b0cab=Date[_0x2c1ef7(0x16d)]();for(const [_0x4394c6,_0x3bdc7]of Object[_0x2c1ef7(0xd0)](_0x2d0300['_meta'])){_0x1b0cab-_0x3bdc7>PENALTY_TTL&&(delete _0x2d0300[_0x4394c6],delete _0x2d0300[_0x2c1ef7(0x182)][_0x4394c6],_0x5e5cc3=!![],_0x11315d['log'][_0x2c1ef7(0x148)](_0x2c1ef7(0xee)+_0x4394c6+_0x2c1ef7(0xfb)));}}const _0x40a0b5=_0x11315d['config'][_0x2c1ef7(0x18d)]||[];let _0x45cee9=![];for(let _0x4b110c=_0x2b130a[_0x2c1ef7(0x107)]-0x1;_0x4b110c>=0x0;_0x4b110c--){const _0x5b9d2a=_0x2b130a[_0x4b110c],_0x356d6a=_0x40a0b5[_0x2c1ef7(0x13b)](_0x16f59a=>normalize(_0x16f59a[_0x2c1ef7(0x172)])===normalize(_0x5b9d2a)&&(_0x16f59a[_0x2c1ef7(0x121)]===_0x2c1ef7(0x135)||_0x16f59a[_0x2c1ef7(0x121)]===_0x2c1ef7(0x11b)));if(!_0x356d6a){_0x11315d[_0x2c1ef7(0x131)][_0x2c1ef7(0x113)](_0x2c1ef7(0xf8)+_0x5b9d2a+'\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.'),_0x2b130a[_0x2c1ef7(0xe0)](_0x4b110c,0x1),_0x45cee9=!![];continue;}if(_0x356d6a){const _0x4aea30=await findRelatedId(_0x11315d,_0x356d6a['id'],_0x2c1ef7(0x123)),_0x44912b=await _0x11315d[_0x2c1ef7(0x169)](_0x356d6a['id']);if(_0x4aea30){const _0x4dfce5=await _0x11315d[_0x2c1ef7(0x169)](_0x4aea30);if(_0x4dfce5&&typeof _0x4dfce5['val']===_0x2c1ef7(0x144)){let _0x3efc42=![],_0x2fba51='';Math[_0x2c1ef7(0x118)](_0x4dfce5[_0x2c1ef7(0x14d)]-ECO_TEMP)>0.5&&(_0x3efc42=!![],_0x2fba51='manual');if(!_0x3efc42&&_0x44912b&&typeof _0x44912b['val']==='number'){const _0x3faae9=_0x422791[_0x5b9d2a]||_0x422791['default']||0x15;_0x44912b['val']<_0x3faae9+0.2&&(_0x3efc42=!![],_0x2fba51='too_cold');}if(_0x3efc42){if(_0x2fba51===_0x2c1ef7(0x17a)){_0x11315d['log'][_0x2c1ef7(0x148)](_0x2c1ef7(0xd4)+_0x5b9d2a+'\x20ist\x20auf\x20'+_0x4dfce5['val']+_0x2c1ef7(0x122)+ECO_TEMP+_0x2c1ef7(0x155));const _0x1ff556=lastActions[_0x2c1ef7(0x14a)+_0x5b9d2a],_0xb0ce15=_0x1ff556&&Date[_0x2c1ef7(0x16d)]()-_0x1ff556<0x2*0x3c*0x3e8;if(!_0xb0ce15&&_0x4dfce5[_0x2c1ef7(0x14d)]>ECO_TEMP+0.5){_0x11315d['sendToPythonWrapper']&&(_0x11315d[_0x2c1ef7(0x131)]['info'](_0x2c1ef7(0x153)+_0x5b9d2a+'\x20wurde\x20manuell\x20erhÃ¶ht.'),_0x11315d[_0x2c1ef7(0xdb)](_0x2c1ef7(0xde),{'room':_0x5b9d2a}));const _0x6964f4=_0x5b9d2a+'_'+new Date()[_0x2c1ef7(0x154)]();if(!_0x2d0300[_0x6964f4]){_0x2d0300[_0x6964f4]=0x1;if(!_0x2d0300[_0x2c1ef7(0x182)])_0x2d0300['_meta']={};_0x2d0300[_0x2c1ef7(0x182)][_0x6964f4]=Date[_0x2c1ef7(0x16d)](),_0x5e5cc3=!![];}}else _0xb0ce15&&_0x11315d[_0x2c1ef7(0x131)]['info'](_0x2c1ef7(0x176)+_0x5b9d2a+_0x2c1ef7(0x11c));}else{if(_0x2fba51==='too_cold'){let _0x367d61=![];if(_0x4d822f[_0x2c1ef7(0x13b)](_0x48b287=>_0x48b287['room']===_0x5b9d2a))_0x367d61=!![];const _0x58e91b=_0x40a0b5[_0x2c1ef7(0x13a)](_0x833a64=>normalize(_0x833a64[_0x2c1ef7(0x172)])===normalize(_0x5b9d2a)&&(_0x833a64[_0x2c1ef7(0x121)]===_0x2c1ef7(0xf0)||_0x833a64[_0x2c1ef7(0x121)]===_0x2c1ef7(0x173)||_0x833a64['type']===_0x2c1ef7(0xf2)));for(const _0x3059e4 of _0x58e91b){try{const _0x378c8b=await _0x11315d[_0x2c1ef7(0x169)](_0x3059e4['id']);if(_0x378c8b&&(_0x378c8b[_0x2c1ef7(0x14d)]===!![]||_0x378c8b[_0x2c1ef7(0x14d)]===0x1||String(_0x378c8b[_0x2c1ef7(0x14d)])[_0x2c1ef7(0xe3)]()===_0x2c1ef7(0x12c)))_0x367d61=!![];}catch(_0x2662cf){}}if(_0x367d61)_0x11315d[_0x2c1ef7(0x131)]['info'](_0x2c1ef7(0x136)+_0x5b9d2a+'\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.');else{const _0x3ea747=_0x422791[_0x5b9d2a]||_0x422791[_0x2c1ef7(0x108)]||0x15;_0x11315d[_0x2c1ef7(0x131)][_0x2c1ef7(0x148)](_0x2c1ef7(0x12a)+_0x5b9d2a+_0x2c1ef7(0xe4)+_0x44912b[_0x2c1ef7(0x14d)]+'Â°C\x20<\x20'+(_0x3ea747+0.2)+'Â°C).\x20Sparmodus\x20beendet!'),await _0x11315d[_0x2c1ef7(0xca)](_0x4aea30,_0x3ea747),await logAutomationAction(_0x11315d,_0x2c1ef7(0xd2)+_0x5b9d2a+_0x2c1ef7(0x185)+_0x3ea747+'Â°C'),lastActions[_0x2c1ef7(0x114)+_0x5b9d2a]=Date[_0x2c1ef7(0x16d)]();}}}_0x2b130a[_0x2c1ef7(0xe0)](_0x4b110c,0x1),_0x45cee9=!![];}}}}}_0x45cee9&&await _0x11315d[_0x2c1ef7(0x13c)](_0x579a81,{'val':JSON[_0x2c1ef7(0x166)](_0x2b130a),'ack':!![]}),_0x5e5cc3&&await _0x11315d[_0x2c1ef7(0x13c)]('analysis.energy.rlPenalties',{'val':JSON[_0x2c1ef7(0x166)](_0x2d0300),'ack':!![]});}catch(_0x2c73fe){}}async function applyEnergySavings(_0x2bef1e,_0x3151d5){const _0x528bf8=a1_0x226d99;await cleanupGhostInterventions(_0x2bef1e);if(!_0x3151d5||_0x3151d5[_0x528bf8(0x107)]===0x0)return;const _0x2b5508=_0x2bef1e[_0x528bf8(0xe5)][_0x528bf8(0x18d)]||[],_0x5efa2e=Date[_0x528bf8(0x16d)]();for(const _0x8e57e of _0x3151d5){const _0x59257b=_0x8e57e[_0x528bf8(0x13f)],_0x11970a=_0x8e57e[_0x528bf8(0x180)],_0x6bc85=_0x8e57e['target']||0x15;if(lastActions[_0x528bf8(0x114)+_0x59257b]&&_0x5efa2e-lastActions['rescue_'+_0x59257b]<RESCUE_LOCK_MS)continue;const _0x3c8997=_0x2b5508['find'](_0x3ca8b1=>normalize(_0x3ca8b1[_0x528bf8(0x172)])===normalize(_0x59257b)&&(_0x3ca8b1[_0x528bf8(0x121)]===_0x528bf8(0x135)||_0x3ca8b1['type']==='thermostat'));if(!_0x3c8997)continue;const _0x7f5025=await findRelatedId(_0x2bef1e,_0x3c8997['id'],'setpoint');if(_0x7f5025){if(lastActions[_0x528bf8(0x187)+_0x59257b]&&_0x5efa2e-lastActions[_0x528bf8(0x187)+_0x59257b]<0x1e*0x3c*0x3e8)continue;const _0x415f2a=await _0x2bef1e[_0x528bf8(0x169)](_0x7f5025);if(_0x415f2a&&typeof _0x415f2a['val']===_0x528bf8(0x144)){const _0x452dab=_0x415f2a[_0x528bf8(0x14d)];_0x452dab!==ECO_TEMP&&await manageMpcIntervention(_0x2bef1e,_0x59257b,_0x528bf8(0x188));if(_0x11970a>0x1e)_0x452dab>ECO_TEMP+0.5&&(_0x2bef1e[_0x528bf8(0x131)][_0x528bf8(0x148)](_0x528bf8(0x127)+_0x59257b+_0x528bf8(0x14b)+ECO_TEMP+'Â°C!\x20(Puffer:\x20'+_0x11970a+_0x528bf8(0x17c)),await _0x2bef1e[_0x528bf8(0xca)](_0x7f5025,ECO_TEMP),await manageMpcIntervention(_0x2bef1e,_0x59257b,_0x528bf8(0x160)),lastActions[_0x528bf8(0x187)+_0x59257b]=_0x5efa2e,await logAutomationAction(_0x2bef1e,_0x528bf8(0xe2)+_0x59257b+_0x528bf8(0x181)+ECO_TEMP+'Â°C'));else _0x11970a<=0xf&&(_0x452dab<_0x6bc85&&(_0x2bef1e[_0x528bf8(0x131)][_0x528bf8(0x148)](_0x528bf8(0xda)+_0x59257b+_0x528bf8(0xf6)+_0x6bc85+_0x528bf8(0x158)),await _0x2bef1e[_0x528bf8(0xca)](_0x7f5025,_0x6bc85),await manageMpcIntervention(_0x2bef1e,_0x59257b,'remove'),lastActions[_0x528bf8(0x187)+_0x59257b]=_0x5efa2e,await logAutomationAction(_0x2bef1e,_0x528bf8(0xe2)+_0x59257b+_0x528bf8(0x11d)+_0x6bc85+'Â°C')));}}else _0x2bef1e['log']['warn'](_0x528bf8(0x149)+_0x59257b+'\x20gefunden!');}}module[a1_0x226d99(0xed)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};