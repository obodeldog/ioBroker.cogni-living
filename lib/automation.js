function a1_0x2292(){const _0x389b44=['splice','\x20min)','analysis.energy.warmupTimes','type','calendarInstance','common','Â°C!\x20(Puffer:\x20','includes','analysis.automation.mode','ACTUAL_TEMPERATURE','analysis.energy.mpcActiveInterventions','\x20auf\x20','Fehlt','\x20->\x20','.1.TEMPERATURE','1154392kaiHHU','forEach','summary','Â°C.','active','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','window','config','currentSystemMode','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','event','Soll',')\x20aktiv.\x20Heize\x20auf\x20','local_temperature','1013LdmgWa','replace','temp','stringify','state','devices','setpoint','Unknown','analysis.automation.lastAction','analysis.energy.activeEnforcements','number','entries','warn','messwert','Â°C\x20(via\x20','val','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','PERFECT','sendToPythonWrapper','getTime','unshift',']:\x20Raum-Trigger\x20\x27','occupied_heating_setpoint','ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27','Enforcement\x20Monitor\x20Error:\x20','position','room','toLowerCase','slice','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','location','thermostatMapping','63fNjsfH','hm-rpc','now','Manuelles\x20Mapping','260vTcQmI','Auto-Erkennung','parse','sensor','Unbekannt','map','valve','openknx','104994AMwdrY','isArray','\x20erreicht\x20Limit\x20(','2079472mZYTCb','value.valve','add','push','mpc_','ist','score','_meta','.1.SET_POINT_TEMPERATURE','ðŸ“…\x20[MPC\x20INFO]\x20','name','[MPC]\x20','\x20wurde\x20manuell\x20erhÃ¶ht.','./ai_agent','analysis.energy.rlPenalties','ankunft','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','system.mode','valveMapping','getStateAsync','getForeignObjectsAsync','minutes_safe','.1.LEVEL','analysis.energy.warmupTargets','target','message','Â°C).\x20Sparmodus\x20beendet!','consultButler','Â°C\x20(Vorlauf:\x20','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','29465180ffhenr','312RUhVVl','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','.1.ACTUAL_TEMPERATURE','from','analysis.automation.confidenceThreshold','\x20wieder\x20auf\x20','analysis.automation.actionLog','reason','normal','analysis.energy.ventilationAlerts','setForeignStateAsync','log','set','search','level','\x20->\x20Schalte\x20','PrÃ¤diktion:\x20','[FORCE]\x20','role','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','soll','split','open','join','Classic','calendarSelection','_calName','Â°C!\x20(Puffer\x20leer).','Â°C\x20(Kalender-Schutz)','getForeignStateAsync','[WATCHDOG]\x20','unit','toString','(((.+)+)+)+$','sort','info','eventStart','_date','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','useCalendar','current_heating_setpoint','.4.SET_TEMPERATURE','\x20min).','target_temperature','thermostat','error','light','rÃ¼ckkehr','too_cold','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','find','remove','default','date','length','rescue_','switch',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','getForeignObjectAsync','wert','Â°C\x20->\x20','urlaub\x20ende','triggerTime','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','contact','until','3199014KfeYTh','analysis.energy.warmupSources',':\x20Absenkung\x20auf\x20','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','filter','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','findIndex','write','setStateAsync','manual','off','string','approved','TRAIN_RL_PENALTY','temperature','12242181OZkikp','SET'];a1_0x2292=function(){return _0x389b44;};return a1_0x2292();}const a1_0x231672=a1_0x50dc;(function(_0x1f1cf1,_0x536773){const _0xcb69a4=a1_0x50dc,_0x354b26=_0x1f1cf1();while(!![]){try{const _0x1ab73f=parseInt(_0xcb69a4(0x27d))/0x1*(parseInt(_0xcb69a4(0x20b))/0x2)+-parseInt(_0xcb69a4(0x24f))/0x3+parseInt(_0xcb69a4(0x1ec))/0x4+parseInt(_0xcb69a4(0x1e1))/0x5*(-parseInt(_0xcb69a4(0x1e9))/0x6)+-parseInt(_0xcb69a4(0x25e))/0x7+parseInt(_0xcb69a4(0x26f))/0x8*(parseInt(_0xcb69a4(0x1dd))/0x9)+parseInt(_0xcb69a4(0x20a))/0xa;if(_0x1ab73f===_0x536773)break;else _0x354b26['push'](_0x354b26['shift']());}catch(_0x2cea90){_0x354b26['push'](_0x354b26['shift']());}}}(a1_0x2292,0xde01a));const a1_0x4de20f=(function(){let _0x416cbe=!![];return function(_0x53d514,_0x1dd180){const _0x1f9c58=_0x416cbe?function(){if(_0x1dd180){const _0x133bf5=_0x1dd180['apply'](_0x53d514,arguments);return _0x1dd180=null,_0x133bf5;}}:function(){};return _0x416cbe=![],_0x1f9c58;};}()),a1_0x1b9db6=a1_0x4de20f(this,function(){const _0x26072f=a1_0x50dc;return a1_0x1b9db6['toString']()[_0x26072f(0x218)](_0x26072f(0x22c))[_0x26072f(0x22b)]()['constructor'](a1_0x1b9db6)['search'](_0x26072f(0x22c));});a1_0x1b9db6();'use strict';const aiAgent=require(a1_0x231672(0x1f9)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x17304c){const _0x4472e1=a1_0x231672;if(!_0x17304c)return'';return _0x17304c[_0x4472e1(0x1d8)]()[_0x4472e1(0x27e)](/\s+/g,'')['trim']();}function getWarmupRobust(_0xf0f0a,_0x8c52e8){const _0x40c8c0=a1_0x231672;if(!_0xf0f0a||!_0x8c52e8)return 0x3c;if(_0xf0f0a[_0x8c52e8]!==undefined)return _0xf0f0a[_0x8c52e8];const _0x1f0a05=_0x8c52e8['toLowerCase']()[_0x40c8c0(0x27e)](/Ã¤/g,'ae')[_0x40c8c0(0x27e)](/Ã¶/g,'oe')[_0x40c8c0(0x27e)](/Ã¼/g,'ue')[_0x40c8c0(0x27e)](/ÃŸ/g,'ss')[_0x40c8c0(0x27e)](/\s+/g,'_')[_0x40c8c0(0x27e)](/[^a-z0-9_]/g,'');if(_0xf0f0a[_0x1f0a05]!==undefined)return _0xf0f0a[_0x1f0a05];return 0x3c;}async function logAutomationAction(_0x4f0b40,_0x4dd533){const _0x7ea57f=a1_0x231672;await _0x4f0b40['setStateAsync'](_0x7ea57f(0x1c5),{'val':_0x4dd533,'ack':!![]});try{const _0x4c7dc6=_0x7ea57f(0x211),_0x217ad7=await _0x4f0b40[_0x7ea57f(0x1ff)](_0x4c7dc6);let _0x417a01=[];if(_0x217ad7&&_0x217ad7['val'])try{_0x417a01=JSON[_0x7ea57f(0x1e3)](_0x217ad7['val']);}catch(_0x52c0fe){}_0x417a01[_0x7ea57f(0x1d1)]({'ts':Date['now'](),'msg':_0x4dd533});if(_0x417a01[_0x7ea57f(0x243)]>0x32)_0x417a01=_0x417a01[_0x7ea57f(0x1d9)](0x0,0x32);await _0x4f0b40[_0x7ea57f(0x257)](_0x4c7dc6,{'val':JSON[_0x7ea57f(0x280)](_0x417a01),'ack':!![]});}catch(_0x104497){}}async function handlePrediction(_0x4eb477,_0x47856b,_0x387c40){const _0xf1efe6=a1_0x231672;if(!_0x47856b||_0x47856b===_0xf1efe6(0x1c4))return;let _0x583a4d=_0xf1efe6(0x259),_0x11d267=0.6;try{const _0x29ca1f=await _0x4eb477[_0xf1efe6(0x1ff)](_0xf1efe6(0x268));if(_0x29ca1f&&_0x29ca1f[_0xf1efe6(0x1cc)])_0x583a4d=_0x29ca1f[_0xf1efe6(0x1cc)];const _0x2dd0d=await _0x4eb477[_0xf1efe6(0x1ff)](_0xf1efe6(0x20f));if(_0x2dd0d&&_0x2dd0d[_0xf1efe6(0x1cc)])_0x11d267=_0x2dd0d[_0xf1efe6(0x1cc)];}catch(_0x579b9a){}if(_0x583a4d===_0xf1efe6(0x259)||_0x387c40<_0x11d267)return;const _0x439734=Date[_0xf1efe6(0x1df)]();if(lastActions[_0x47856b]&&_0x439734-lastActions[_0x47856b]<COOLDOWN_MS)return;const _0x2d8f3e=_0x4eb477[_0xf1efe6(0x276)][_0xf1efe6(0x282)]||[],_0x3215b7=normalize(_0x47856b),_0x484a28=_0x2d8f3e[_0xf1efe6(0x23f)](_0x286ade=>normalize(_0x286ade['location'])===_0x3215b7&&(_0x286ade['type']===_0xf1efe6(0x239)||_0x286ade['type']==='dimmer'||_0x286ade[_0xf1efe6(0x263)]===_0xf1efe6(0x245)));if(!_0x484a28)return;const _0x401bb3=await aiAgent[_0xf1efe6(0x207)](_0x4eb477,_0x47856b,_0x484a28['name'],_0x387c40);if(!_0x401bb3[_0xf1efe6(0x25b)])return;const _0x113098=_0xf1efe6(0x21b)+_0x47856b+_0xf1efe6(0x21a)+_0x484a28['name']+'\x20('+_0x401bb3[_0xf1efe6(0x212)]+')';await logAutomationAction(_0x4eb477,'['+_0x583a4d['toUpperCase']()+']\x20'+_0x113098);if(_0x583a4d===_0xf1efe6(0x273)){const _0x5beb1b=await _0x4eb477[_0xf1efe6(0x228)](_0x484a28['id']);(!_0x5beb1b||!_0x5beb1b[_0xf1efe6(0x1cc)]&&_0x5beb1b[_0xf1efe6(0x1cc)]!==!![])&&await _0x4eb477[_0xf1efe6(0x215)](_0x484a28['id'],!![]),lastActions[_0x47856b]=_0x439734;}}async function findRelatedId(_0x28cb09,_0x4b12a8,_0x5de54e=a1_0x231672(0x283)){const _0xc8c2ee=a1_0x231672;if(_0x5de54e===_0xc8c2ee(0x283)&&_0x28cb09['config'][_0xc8c2ee(0x1dc)]){let _0x493b3a=_0x28cb09[_0xc8c2ee(0x276)][_0xc8c2ee(0x1dc)];if(typeof _0x493b3a===_0xc8c2ee(0x25a))try{_0x493b3a=JSON[_0xc8c2ee(0x1e3)](_0x493b3a);}catch(_0x222b8d){}if(_0x493b3a&&_0x493b3a[_0x4b12a8])return _0x493b3a[_0x4b12a8];}if(_0x5de54e===_0xc8c2ee(0x1e7)&&_0x28cb09[_0xc8c2ee(0x276)][_0xc8c2ee(0x1fe)]){let _0x26d193=_0x28cb09[_0xc8c2ee(0x276)]['valveMapping'];if(typeof _0x26d193===_0xc8c2ee(0x25a))try{_0x26d193=JSON[_0xc8c2ee(0x1e3)](_0x26d193);}catch(_0x33c97f){}if(_0x26d193&&_0x26d193[_0x4b12a8])return _0x26d193[_0x4b12a8];}let _0x5973ee=[];if(_0x5de54e===_0xc8c2ee(0x283))_0x5973ee=[{'s':_0xc8c2ee(0x20d),'t':_0xc8c2ee(0x1f4)},{'s':_0xc8c2ee(0x26e),'t':'.1.SET_POINT_TEMPERATURE'},{'s':_0xc8c2ee(0x26e),'t':_0xc8c2ee(0x234)},{'s':_0xc8c2ee(0x269),'t':'SET_POINT_TEMPERATURE'},{'s':_0xc8c2ee(0x27c),'t':_0xc8c2ee(0x1d3)},{'s':_0xc8c2ee(0x27c),'t':_0xc8c2ee(0x233)},{'s':_0xc8c2ee(0x25d),'t':_0xc8c2ee(0x236)},{'s':'ACTUAL','t':_0xc8c2ee(0x25f)},{'s':'Ist','t':_0xc8c2ee(0x27a)},{'s':_0xc8c2ee(0x25d),'t':_0xc8c2ee(0x283)}];else _0x5de54e===_0xc8c2ee(0x1e7)&&(_0x5973ee=[{'s':'.1.ACTUAL_TEMPERATURE','t':'.1.LEVEL'},{'s':_0xc8c2ee(0x26e),'t':_0xc8c2ee(0x202)},{'s':_0xc8c2ee(0x26e),'t':'.4.VALVE_STATE'},{'s':_0xc8c2ee(0x27c),'t':'pi_heating_demand'},{'s':'temperature','t':'valve_position'},{'s':_0xc8c2ee(0x25d),'t':_0xc8c2ee(0x219)}]);for(const _0x518bf3 of _0x5973ee){if(_0x4b12a8[_0xc8c2ee(0x267)](_0x518bf3['s'])){const _0x21d2bb=_0x4b12a8[_0xc8c2ee(0x27e)](_0x518bf3['s'],_0x518bf3['t']),_0x40201a=await _0x28cb09[_0xc8c2ee(0x247)](_0x21d2bb);if(_0x40201a)return _0x21d2bb;}}try{const _0x8dbb7c=_0x4b12a8['split']('.');if(_0x8dbb7c[_0xc8c2ee(0x243)]>0x2){const _0x4955da=_0x8dbb7c[_0xc8c2ee(0x1d9)](0x0,-0x1)[_0xc8c2ee(0x222)]('.'),_0x5b0ef1=await _0x28cb09[_0xc8c2ee(0x200)](_0x4955da+'.*'),_0x299d1a=[],_0x1f484c=_0x4b12a8[_0xc8c2ee(0x220)](/[._]+/)['filter'](_0x365ea0=>![_0xc8c2ee(0x1e8),'0',_0xc8c2ee(0x1de),_0xc8c2ee(0x1f1),_0xc8c2ee(0x248),_0xc8c2ee(0x25d),'actual',_0xc8c2ee(0x1e4),_0xc8c2ee(0x1ca),_0xc8c2ee(0x281)][_0xc8c2ee(0x267)](_0x365ea0[_0xc8c2ee(0x1d8)]()));for(const [_0x54ac56,_0x372e42]of Object[_0xc8c2ee(0x1c8)](_0x5b0ef1)){if(_0x54ac56===_0x4b12a8)continue;if(_0x372e42&&_0x372e42['common']){const _0x430bd4=_0x54ac56[_0xc8c2ee(0x1d8)](),_0x321d5e=(_0x372e42[_0xc8c2ee(0x265)][_0xc8c2ee(0x21d)]||'')['toLowerCase'](),_0x36a27f=(_0x372e42['common'][_0xc8c2ee(0x22a)]||'')[_0xc8c2ee(0x1d8)]();let _0x4fb81c=![];if(_0x5de54e===_0xc8c2ee(0x283)&&_0x372e42[_0xc8c2ee(0x265)][_0xc8c2ee(0x256)]===!![])_0x4fb81c=_0x430bd4[_0xc8c2ee(0x267)](_0xc8c2ee(0x217))||_0x430bd4[_0xc8c2ee(0x267)](_0xc8c2ee(0x21f))||_0x430bd4[_0xc8c2ee(0x267)](_0xc8c2ee(0x204))||_0x321d5e[_0xc8c2ee(0x267)]('level.temperature')||_0x321d5e[_0xc8c2ee(0x267)]('thermostat.setpoint');else _0x5de54e===_0xc8c2ee(0x1e7)&&(_0x4fb81c=_0x430bd4[_0xc8c2ee(0x267)](_0xc8c2ee(0x219))||_0x430bd4[_0xc8c2ee(0x267)](_0xc8c2ee(0x1e7))||_0x430bd4[_0xc8c2ee(0x267)]('stellwert')||_0x430bd4['includes'](_0xc8c2ee(0x1d6))||_0x321d5e['includes']('level.valve')||_0x321d5e[_0xc8c2ee(0x267)](_0xc8c2ee(0x1ed))||_0x36a27f[_0xc8c2ee(0x267)]('%'));if(_0x4fb81c){const _0x5f413d=_0x54ac56[_0xc8c2ee(0x220)](/[._]+/)[_0xc8c2ee(0x1e6)](_0x2656ba=>_0x2656ba[_0xc8c2ee(0x1d8)]());let _0x106754=0x0;_0x1f484c[_0xc8c2ee(0x270)](_0x1bf3a4=>{const _0x2aeff2=_0xc8c2ee;if(_0x5f413d[_0x2aeff2(0x267)](_0x1bf3a4[_0x2aeff2(0x1d8)]()))_0x106754++;}),_0x299d1a[_0xc8c2ee(0x1ef)]({'id':_0x54ac56,'score':_0x106754});}}}if(_0x299d1a[_0xc8c2ee(0x243)]>0x0){_0x299d1a[_0xc8c2ee(0x22d)]((_0x5b71cc,_0x69d5e)=>_0x69d5e['score']-_0x5b71cc[_0xc8c2ee(0x1f2)]);if(_0x299d1a[0x0][_0xc8c2ee(0x1f2)]>0x0)return _0x299d1a[0x0]['id'];}}}catch(_0x29a7a9){}return null;}async function scanThermostats(_0x4300d8){const _0x4915fd=a1_0x231672,_0x3f13ac=_0x4300d8[_0x4915fd(0x276)]['devices']||[],_0xdcff94=[],_0x32517c=_0x3f13ac[_0x4915fd(0x253)](_0x27ee4c=>_0x27ee4c['id']&&_0x27ee4c['id'][_0x4915fd(0x267)](_0x4915fd(0x25d))||_0x27ee4c[_0x4915fd(0x263)]&&[_0x4915fd(0x25d),'thermostat',_0x4915fd(0x1e4)][_0x4915fd(0x267)](_0x27ee4c[_0x4915fd(0x263)])||_0x27ee4c[_0x4915fd(0x1f6)]&&_0x27ee4c[_0x4915fd(0x1f6)]['toLowerCase']()[_0x4915fd(0x267)](_0x4915fd(0x27f)));for(const _0x1a7008 of _0x32517c){const _0x33dff2=await findRelatedId(_0x4300d8,_0x1a7008['id'],_0x4915fd(0x283)),_0x2d1488=await findRelatedId(_0x4300d8,_0x1a7008['id'],_0x4915fd(0x1e7));let _0x327dcc='Nicht\x20gefunden',_0x1d9fac=![],_0x579d77=_0x4300d8[_0x4915fd(0x276)][_0x4915fd(0x1dc)]||{};if(typeof _0x579d77==='string')try{_0x579d77=JSON[_0x4915fd(0x1e3)](_0x579d77);}catch(_0x5df0e9){}let _0xbe94a3=_0x4300d8['config']['valveMapping']||{};if(typeof _0xbe94a3===_0x4915fd(0x25a))try{_0xbe94a3=JSON[_0x4915fd(0x1e3)](_0xbe94a3);}catch(_0x2ad79a){}if(_0x579d77[_0x1a7008['id']]&&_0x579d77[_0x1a7008['id']]===_0x33dff2||_0xbe94a3[_0x1a7008['id']]&&_0xbe94a3[_0x1a7008['id']]===_0x2d1488)_0x327dcc=_0x4915fd(0x1e0),_0x1d9fac=!![];else(_0x33dff2||_0x2d1488)&&(_0x327dcc=_0x4915fd(0x1e2));_0xdcff94[_0x4915fd(0x1ef)]({'room':_0x1a7008[_0x4915fd(0x1db)]||_0x4915fd(0x1e5),'sensorId':_0x1a7008['id'],'setpointId':_0x33dff2||'-','valveId':_0x2d1488||'-','source':_0x327dcc,'isManual':_0x1d9fac,'status':_0x33dff2&&_0x2d1488?_0x4915fd(0x1ce):_0x33dff2?'OK':_0x4915fd(0x26c)});}return _0xdcff94['sort']((_0x331539,_0x39b4db)=>_0x331539[_0x4915fd(0x1d7)]['localeCompare'](_0x39b4db[_0x4915fd(0x1d7)]));}async function updateSchedulePreview(_0x41b2f6){const _0x7f75c7=a1_0x231672;if(!_0x41b2f6[_0x7f75c7(0x276)][_0x7f75c7(0x232)]||!_0x41b2f6['config'][_0x7f75c7(0x264)])return;let _0x22d961={};try{const _0x12f85e=await _0x41b2f6[_0x7f75c7(0x1ff)](_0x7f75c7(0x262));if(_0x12f85e&&_0x12f85e[_0x7f75c7(0x1cc)])_0x22d961=JSON[_0x7f75c7(0x1e3)](_0x12f85e[_0x7f75c7(0x1cc)]);}catch(_0x38a964){}const _0x401043=[],_0x3a763b=Date[_0x7f75c7(0x1df)](),_0x4c1fe0=0x30*0x3c*0x3c*0x3e8;try{const _0x5647c5=await _0x41b2f6[_0x7f75c7(0x228)](_0x41b2f6['config'][_0x7f75c7(0x264)]+'.data.table');if(!_0x5647c5||!_0x5647c5[_0x7f75c7(0x1cc)])return;const _0xe2c1c2=JSON[_0x7f75c7(0x1e3)](_0x5647c5[_0x7f75c7(0x1cc)]),_0x3e7977=_0x41b2f6[_0x7f75c7(0x276)][_0x7f75c7(0x224)]||[],_0x140e7d=_0x41b2f6['config'][_0x7f75c7(0x282)]||[],_0x552604=new Set();_0x140e7d[_0x7f75c7(0x270)](_0x3b265b=>{const _0x215d22=_0x7f75c7;if(_0x3b265b['location'])_0x552604[_0x215d22(0x1ee)](_0x3b265b['location']);});for(const _0x512831 of _0xe2c1c2){if(_0x512831['_calName']&&_0x3e7977[_0x7f75c7(0x243)]>0x0&&!_0x3e7977[_0x7f75c7(0x267)](_0x512831[_0x7f75c7(0x225)]))continue;const _0x3afce2=_0x512831[_0x7f75c7(0x230)]||_0x512831[_0x7f75c7(0x22f)]||_0x512831[_0x7f75c7(0x242)];if(!_0x3afce2)continue;const _0x3eff73=new Date(_0x3afce2),_0x149c82=_0x3eff73[_0x7f75c7(0x1d0)]();if(isNaN(_0x149c82))continue;if(_0x149c82<_0x3a763b)continue;if(_0x149c82>_0x3a763b+_0x4c1fe0)continue;const _0x23c97d=(_0x512831['event']||_0x512831[_0x7f75c7(0x271)]||'')[_0x7f75c7(0x1d8)]();let _0x48d720=![],_0x27c893=[],_0x247f9e=_0x512831[_0x7f75c7(0x279)]||_0x512831['summary']||_0x7f75c7(0x1e5);if(_0x23c97d[_0x7f75c7(0x267)]('urlaub\x20ende')||_0x23c97d['includes'](_0x7f75c7(0x23a))||_0x23c97d[_0x7f75c7(0x267)]('ankunft'))_0x48d720=!![],_0x27c893=Array[_0x7f75c7(0x20e)](_0x552604);else for(const _0x12f358 of _0x552604){if(_0x23c97d[_0x7f75c7(0x267)](_0x12f358[_0x7f75c7(0x1d8)]()))_0x27c893[_0x7f75c7(0x1ef)](_0x12f358);}_0x27c893['length']>0x0&&_0x27c893[_0x7f75c7(0x270)](_0x177fb5=>{const _0x2b0130=_0x7f75c7;let _0x284aca=0x3c;if(_0x48d720){let _0x1d404e=0x0;Object['values'](_0x22d961)[_0x2b0130(0x270)](_0x5d7426=>{if(_0x5d7426>_0x1d404e)_0x1d404e=_0x5d7426;}),_0x284aca=_0x1d404e>0x0?_0x1d404e:0x78;}else _0x284aca=getWarmupRobust(_0x22d961,_0x177fb5);const _0x40168e=new Date(_0x149c82-_0x284aca*0xea60);_0x401043[_0x2b0130(0x1ef)]({'eventTime':_0x149c82,'triggerTime':_0x40168e[_0x2b0130(0x1d0)](),'room':_0x177fb5,'minutes':_0x284aca,'reason':_0x247f9e,'isGlobal':_0x48d720});});}}catch(_0x3de5d0){}_0x401043['sort']((_0x1c6989,_0x81d31e)=>_0x1c6989[_0x7f75c7(0x24b)]-_0x81d31e[_0x7f75c7(0x24b)]);const _0x20db21=_0x401043['slice'](0x0,0x1e);await _0x41b2f6[_0x7f75c7(0x257)]('analysis.energy.schedulePreview',{'val':JSON[_0x7f75c7(0x280)](_0x20db21),'ack':!![]});}function a1_0x50dc(_0x3810a4,_0x57cf5d){const _0x36b271=a1_0x2292();return a1_0x50dc=function(_0x1b9db6,_0x4de20f){_0x1b9db6=_0x1b9db6-0x1c4;let _0x22920d=_0x36b271[_0x1b9db6];return _0x22920d;},a1_0x50dc(_0x3810a4,_0x57cf5d);}async function monitorEnforcements(_0x3d0dba){const _0x28b8eb=a1_0x231672;try{const _0x59ce2c=_0x28b8eb(0x1c6),_0x17b18f=await _0x3d0dba[_0x28b8eb(0x1ff)](_0x59ce2c);if(!_0x17b18f||!_0x17b18f[_0x28b8eb(0x1cc)])return;let _0x1da772=[];try{_0x1da772=JSON['parse'](_0x17b18f[_0x28b8eb(0x1cc)]);}catch(_0x5ac1e3){return;}if(!Array[_0x28b8eb(0x1ea)](_0x1da772)||_0x1da772[_0x28b8eb(0x243)]===0x0)return;const _0x28be64=Date[_0x28b8eb(0x1df)](),_0x1e0096=_0x3d0dba[_0x28b8eb(0x276)]['devices']||[];let _0x53e104=![];for(let _0x3bbf5a=_0x1da772[_0x28b8eb(0x243)]-0x1;_0x3bbf5a>=0x0;_0x3bbf5a--){const _0xc5f715=_0x1da772[_0x3bbf5a];if(_0x28be64>=_0xc5f715[_0x28b8eb(0x24e)]){_0x3d0dba[_0x28b8eb(0x216)][_0x28b8eb(0x22e)](_0x28b8eb(0x1cd)+_0xc5f715[_0x28b8eb(0x1d7)]+_0x28b8eb(0x23d)),_0x1da772[_0x28b8eb(0x260)](_0x3bbf5a,0x1),_0x53e104=!![];continue;}const _0xce93a0=_0x1e0096[_0x28b8eb(0x23f)](_0x5c6ff6=>normalize(_0x5c6ff6[_0x28b8eb(0x1db)])===normalize(_0xc5f715[_0x28b8eb(0x1d7)])&&(_0x5c6ff6['type']===_0x28b8eb(0x25d)||_0x5c6ff6[_0x28b8eb(0x263)]==='thermostat'));if(_0xce93a0){const _0x6b2230=await findRelatedId(_0x3d0dba,_0xce93a0['id'],'setpoint');if(_0x6b2230){const _0x5a8132=await _0x3d0dba[_0x28b8eb(0x228)](_0x6b2230);_0x5a8132&&typeof _0x5a8132[_0x28b8eb(0x1cc)]===_0x28b8eb(0x1c7)&&(_0x5a8132[_0x28b8eb(0x1cc)]<0xf&&(_0x3d0dba[_0x28b8eb(0x216)][_0x28b8eb(0x1c9)]('ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0xc5f715[_0x28b8eb(0x1d7)]+_0x28b8eb(0x26b)+_0x5a8132[_0x28b8eb(0x1cc)]+_0x28b8eb(0x1fc)+_0xc5f715['target']+_0x28b8eb(0x272)),await _0x3d0dba['setForeignStateAsync'](_0x6b2230,_0xc5f715['target']),await logAutomationAction(_0x3d0dba,_0x28b8eb(0x21c)+_0xc5f715[_0x28b8eb(0x1d7)]+':\x20'+_0x5a8132['val']+_0x28b8eb(0x249)+_0xc5f715[_0x28b8eb(0x204)]+_0x28b8eb(0x227))));}}}_0x53e104&&await _0x3d0dba[_0x28b8eb(0x257)](_0x59ce2c,{'val':JSON[_0x28b8eb(0x280)](_0x1da772),'ack':!![]});}catch(_0x18bdc1){_0x3d0dba[_0x28b8eb(0x216)][_0x28b8eb(0x238)](_0x28b8eb(0x1d5)+_0x18bdc1[_0x28b8eb(0x205)]);}}async function checkCalendarTriggers(_0x20288d){const _0x30ec61=a1_0x231672;if(!_0x20288d[_0x30ec61(0x276)][_0x30ec61(0x232)]||!_0x20288d['config'][_0x30ec61(0x264)])return;await updateSchedulePreview(_0x20288d);let _0x1afc49={},_0x4641aa={};try{const _0x49109e=await _0x20288d['getStateAsync'](_0x30ec61(0x262));if(_0x49109e&&_0x49109e[_0x30ec61(0x1cc)])_0x1afc49=JSON[_0x30ec61(0x1e3)](_0x49109e[_0x30ec61(0x1cc)]);const _0xf3490d=await _0x20288d['getStateAsync'](_0x30ec61(0x250));if(_0xf3490d&&_0xf3490d['val'])_0x4641aa=JSON[_0x30ec61(0x1e3)](_0xf3490d['val']);}catch(_0x2f18d5){}let _0x1a5c20={'default':0x15};try{const _0x45893d=await _0x20288d[_0x30ec61(0x1ff)](_0x30ec61(0x203));if(_0x45893d&&_0x45893d[_0x30ec61(0x1cc)])_0x1a5c20=JSON[_0x30ec61(0x1e3)](_0x45893d['val']);}catch(_0x348e4a){}let _0x22bc32=[];try{const _0x228d5a=await _0x20288d[_0x30ec61(0x1ff)](_0x30ec61(0x1c6));if(_0x228d5a&&_0x228d5a[_0x30ec61(0x1cc)])_0x22bc32=JSON[_0x30ec61(0x1e3)](_0x228d5a['val']);}catch(_0x67c67d){}try{const _0x28bb00=await _0x20288d[_0x30ec61(0x228)](_0x20288d[_0x30ec61(0x276)][_0x30ec61(0x264)]+'.data.table');if(!_0x28bb00||!_0x28bb00[_0x30ec61(0x1cc)])return;const _0x5b6452=JSON[_0x30ec61(0x1e3)](_0x28bb00[_0x30ec61(0x1cc)]),_0x4b1612=Date[_0x30ec61(0x1df)](),_0x576987=_0x20288d[_0x30ec61(0x276)][_0x30ec61(0x282)]||[],_0x1acd44=_0x20288d[_0x30ec61(0x276)][_0x30ec61(0x224)]||[];let _0x5b938f=![];for(const _0x43ffd3 of _0x5b6452){if(_0x43ffd3[_0x30ec61(0x225)]&&_0x1acd44[_0x30ec61(0x243)]>0x0&&!_0x1acd44[_0x30ec61(0x267)](_0x43ffd3[_0x30ec61(0x225)]))continue;const _0x23eef2=_0x43ffd3[_0x30ec61(0x230)]||_0x43ffd3['eventStart']||_0x43ffd3[_0x30ec61(0x242)];if(!_0x23eef2)continue;const _0x55315d=new Date(_0x23eef2);if(isNaN(_0x55315d[_0x30ec61(0x1d0)]()))continue;const _0x7bf4f3=(_0x43ffd3[_0x30ec61(0x279)]||_0x43ffd3[_0x30ec61(0x271)]||'')['toLowerCase']();if(_0x7bf4f3[_0x30ec61(0x267)](_0x30ec61(0x24a))||_0x7bf4f3[_0x30ec61(0x267)](_0x30ec61(0x23a))||_0x7bf4f3['includes'](_0x30ec61(0x1fb))){let _0x4b0395=0x0;Object['values'](_0x1afc49)[_0x30ec61(0x270)](_0x192e87=>{if(_0x192e87>_0x4b0395)_0x4b0395=_0x192e87;});if(_0x4b0395===0x0)_0x4b0395=0x78;const _0x27c8ba=_0x55315d[_0x30ec61(0x1d0)]()-_0x4b0395*0xea60;_0x4b1612>=_0x27c8ba&&_0x4b1612<_0x55315d[_0x30ec61(0x1d0)]()&&(_0x20288d[_0x30ec61(0x277)]!==_0x30ec61(0x213)&&(_0x20288d[_0x30ec61(0x216)][_0x30ec61(0x22e)](_0x30ec61(0x23c)+_0x4b0395+_0x30ec61(0x235)),await _0x20288d[_0x30ec61(0x257)](_0x30ec61(0x1fd),{'val':_0x30ec61(0x213),'ack':![]})));}for(const _0x394b51 of _0x576987){if(_0x394b51[_0x30ec61(0x1db)]){const _0x501317=_0x394b51[_0x30ec61(0x1db)][_0x30ec61(0x1d8)](),_0x1ffaf1=(_0x394b51[_0x30ec61(0x1f6)]||'')[_0x30ec61(0x1d8)]();let _0x19f272=_0x7bf4f3['includes'](_0x501317);!_0x19f272&&_0x1ffaf1[_0x30ec61(0x243)]>0x3&&_0x7bf4f3[_0x30ec61(0x267)](_0x1ffaf1)&&(_0x19f272=!![]);if(_0x19f272){const _0x279136=getWarmupRobust(_0x1afc49,_0x394b51[_0x30ec61(0x1db)]),_0xafb7c0=_0x4641aa[_0x394b51[_0x30ec61(0x1db)]]||_0x30ec61(0x223),_0x3b67f5=_0x55315d[_0x30ec61(0x1d0)]()-_0x279136*0xea60;if(_0x4b1612>=_0x3b67f5&&_0x4b1612<_0x55315d[_0x30ec61(0x1d0)]()){const _0x4adc95=lastActions['cal_'+_0x394b51['location']];if(_0x4adc95&&_0x4b1612-_0x4adc95<CAL_COOLDOWN_MS)continue;const _0x91e47f=await findRelatedId(_0x20288d,_0x394b51['id'],_0x30ec61(0x283));if(_0x91e47f){let _0x2e5159=_0x1a5c20[_0x394b51[_0x30ec61(0x1db)]];if(_0x2e5159===undefined)_0x2e5159=_0x1a5c20[_0x30ec61(0x241)];if(_0x2e5159===undefined)_0x2e5159=0x15;const _0x1f1279=await _0x20288d['getForeignStateAsync'](_0x91e47f);if(_0x1f1279&&typeof _0x1f1279[_0x30ec61(0x1cc)]===_0x30ec61(0x1c7)&&_0x1f1279[_0x30ec61(0x1cc)]<_0x2e5159-0.5){_0x20288d[_0x30ec61(0x216)]['info']('ðŸ“…\x20SMART\x20SCHEDULE\x20['+_0xafb7c0+_0x30ec61(0x1d2)+_0x394b51[_0x30ec61(0x1db)]+'\x27\x20(Match:\x20'+_0x7bf4f3+_0x30ec61(0x27b)+_0x2e5159+_0x30ec61(0x208)+_0x279136+_0x30ec61(0x235)),await _0x20288d[_0x30ec61(0x215)](_0x91e47f,_0x2e5159),await logAutomationAction(_0x20288d,'[CAL]\x20'+_0x394b51[_0x30ec61(0x1db)]+_0x30ec61(0x26d)+_0x2e5159+_0x30ec61(0x1cb)+_0xafb7c0+')'),lastActions['cal_'+_0x394b51[_0x30ec61(0x1db)]]=_0x4b1612;const _0x1db654=_0x22bc32[_0x30ec61(0x255)](_0x5573a8=>_0x5573a8[_0x30ec61(0x1d7)]===_0x394b51['location']);if(_0x1db654!==-0x1)_0x22bc32[_0x30ec61(0x260)](_0x1db654,0x1);_0x22bc32[_0x30ec61(0x1ef)]({'room':_0x394b51['location'],'target':_0x2e5159,'until':_0x55315d[_0x30ec61(0x1d0)]()}),_0x5b938f=!![];}}}}}}}_0x5b938f&&await _0x20288d[_0x30ec61(0x257)](_0x30ec61(0x1c6),{'val':JSON[_0x30ec61(0x280)](_0x22bc32),'ack':!![]});}catch(_0x2eef0b){_0x20288d['log']['warn']('Calendar\x20Check\x20Error:\x20'+_0x2eef0b[_0x30ec61(0x205)]);}}async function manageMpcIntervention(_0x77f12c,_0x32bbaf,_0x425f6f){const _0x344832=a1_0x231672;try{const _0xdd665a=_0x344832(0x26a),_0x414eeb=await _0x77f12c[_0x344832(0x1ff)](_0xdd665a);let _0x53fcf9=[];if(_0x414eeb&&_0x414eeb['val'])try{_0x53fcf9=JSON[_0x344832(0x1e3)](_0x414eeb['val']);}catch(_0x1c2b5c){}const _0x261564=_0x53fcf9['indexOf'](_0x32bbaf);if(_0x425f6f===_0x344832(0x1ee))_0x261564===-0x1&&(_0x53fcf9[_0x344832(0x1ef)](_0x32bbaf),await _0x77f12c[_0x344832(0x257)](_0xdd665a,{'val':JSON[_0x344832(0x280)](_0x53fcf9),'ack':!![]}));else _0x425f6f==='remove'&&(_0x261564!==-0x1&&(_0x53fcf9[_0x344832(0x260)](_0x261564,0x1),await _0x77f12c[_0x344832(0x257)](_0xdd665a,{'val':JSON['stringify'](_0x53fcf9),'ack':!![]})));}catch(_0x5f35c5){}}async function cleanupGhostInterventions(_0xedd968){const _0x2385bd=a1_0x231672;try{const _0x125fa1='analysis.energy.mpcActiveInterventions',_0x4d9149=await _0xedd968[_0x2385bd(0x1ff)](_0x125fa1);if(!_0x4d9149||!_0x4d9149[_0x2385bd(0x1cc)])return;const _0x137da3=JSON['parse'](_0x4d9149['val']);if(!Array[_0x2385bd(0x1ea)](_0x137da3)||_0x137da3['length']===0x0)return;let _0x2112ae={'default':0x15};try{const _0x22e56d=await _0xedd968[_0x2385bd(0x1ff)]('analysis.energy.warmupTargets');if(_0x22e56d&&_0x22e56d['val'])_0x2112ae=JSON[_0x2385bd(0x1e3)](_0x22e56d[_0x2385bd(0x1cc)]);}catch(_0x5a90c7){}let _0x39c6a1=[];try{const _0x42f503=await _0xedd968['getStateAsync'](_0x2385bd(0x214));if(_0x42f503&&_0x42f503['val'])_0x39c6a1=JSON[_0x2385bd(0x1e3)](_0x42f503[_0x2385bd(0x1cc)]);}catch(_0x1b64d0){}let _0x4258eb={},_0x6cb279=![];try{const _0x5deb99=await _0xedd968[_0x2385bd(0x1ff)](_0x2385bd(0x1fa));if(_0x5deb99&&_0x5deb99['val'])_0x4258eb=JSON[_0x2385bd(0x1e3)](_0x5deb99[_0x2385bd(0x1cc)]);}catch(_0x25f5f8){}if(_0x4258eb['_meta']){const _0x136f1d=Date[_0x2385bd(0x1df)]();for(const [_0x58805f,_0x14f94b]of Object['entries'](_0x4258eb[_0x2385bd(0x1f3)])){_0x136f1d-_0x14f94b>PENALTY_TTL&&(delete _0x4258eb[_0x58805f],delete _0x4258eb['_meta'][_0x58805f],_0x6cb279=!![],_0xedd968['log'][_0x2385bd(0x22e)](_0x2385bd(0x1d4)+_0x58805f+_0x2385bd(0x21e)));}}const _0x559f67=_0xedd968[_0x2385bd(0x276)][_0x2385bd(0x282)]||[];let _0x41c6eb=![];for(let _0x453284=_0x137da3[_0x2385bd(0x243)]-0x1;_0x453284>=0x0;_0x453284--){const _0x3fb64a=_0x137da3[_0x453284],_0x57b302=_0x559f67[_0x2385bd(0x23f)](_0x7becca=>normalize(_0x7becca[_0x2385bd(0x1db)])===normalize(_0x3fb64a)&&(_0x7becca[_0x2385bd(0x263)]===_0x2385bd(0x25d)||_0x7becca['type']===_0x2385bd(0x237)));if(!_0x57b302){_0xedd968['log']['warn'](_0x2385bd(0x231)+_0x3fb64a+_0x2385bd(0x209)),_0x137da3[_0x2385bd(0x260)](_0x453284,0x1),_0x41c6eb=!![];continue;}if(_0x57b302){const _0x76f888=await findRelatedId(_0xedd968,_0x57b302['id'],_0x2385bd(0x283)),_0x3c27b7=await _0xedd968[_0x2385bd(0x228)](_0x57b302['id']);if(_0x76f888){const _0x242338=await _0xedd968['getForeignStateAsync'](_0x76f888);if(_0x242338&&typeof _0x242338[_0x2385bd(0x1cc)]===_0x2385bd(0x1c7)){let _0x2ba139=![],_0x5f1e95='';Math['abs'](_0x242338[_0x2385bd(0x1cc)]-ECO_TEMP)>0.5&&(_0x2ba139=!![],_0x5f1e95='manual');if(!_0x2ba139&&_0x3c27b7&&typeof _0x3c27b7[_0x2385bd(0x1cc)]==='number'){const _0x3fbaa1=_0x2112ae[_0x3fb64a]||_0x2112ae['default']||0x15;_0x3c27b7[_0x2385bd(0x1cc)]<_0x3fbaa1+0.2&&(_0x2ba139=!![],_0x5f1e95=_0x2385bd(0x23b));}if(_0x2ba139){if(_0x5f1e95===_0x2385bd(0x258)){_0xedd968[_0x2385bd(0x216)][_0x2385bd(0x22e)](_0x2385bd(0x254)+_0x3fb64a+'\x20ist\x20auf\x20'+_0x242338[_0x2385bd(0x1cc)]+'Â°C\x20(nicht\x20'+ECO_TEMP+'Â°C).\x20Entferne\x20Status.');const _0x4a9ebe=lastActions['cal_'+_0x3fb64a],_0x105efa=_0x4a9ebe&&Date[_0x2385bd(0x1df)]()-_0x4a9ebe<0x2*0x3c*0x3e8;if(!_0x105efa&&_0x242338[_0x2385bd(0x1cc)]>ECO_TEMP+0.5){_0xedd968[_0x2385bd(0x1cf)]&&(_0xedd968['log'][_0x2385bd(0x22e)](_0x2385bd(0x274)+_0x3fb64a+_0x2385bd(0x1f8)),_0xedd968[_0x2385bd(0x1cf)](_0x2385bd(0x25c),{'room':_0x3fb64a}));const _0x40245b=_0x3fb64a+'_'+new Date()['getHours']();if(!_0x4258eb[_0x40245b]){_0x4258eb[_0x40245b]=0x1;if(!_0x4258eb[_0x2385bd(0x1f3)])_0x4258eb[_0x2385bd(0x1f3)]={};_0x4258eb['_meta'][_0x40245b]=Date[_0x2385bd(0x1df)](),_0x6cb279=!![];}}else _0x105efa&&_0xedd968[_0x2385bd(0x216)][_0x2385bd(0x22e)](_0x2385bd(0x1f5)+_0x3fb64a+'\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.');}else{if(_0x5f1e95===_0x2385bd(0x23b)){let _0x10deee=![];if(_0x39c6a1['find'](_0xe7d6b5=>_0xe7d6b5[_0x2385bd(0x1d7)]===_0x3fb64a))_0x10deee=!![];const _0x1c1b48=_0x559f67[_0x2385bd(0x253)](_0x434e91=>normalize(_0x434e91[_0x2385bd(0x1db)])===normalize(_0x3fb64a)&&(_0x434e91[_0x2385bd(0x263)]===_0x2385bd(0x275)||_0x434e91[_0x2385bd(0x263)]===_0x2385bd(0x1e4)||_0x434e91['type']===_0x2385bd(0x24d)));for(const _0x2d4269 of _0x1c1b48){try{const _0x438197=await _0xedd968[_0x2385bd(0x228)](_0x2d4269['id']);if(_0x438197&&(_0x438197['val']===!![]||_0x438197[_0x2385bd(0x1cc)]===0x1||String(_0x438197['val'])[_0x2385bd(0x1d8)]()===_0x2385bd(0x221)))_0x10deee=!![];}catch(_0x3040d5){}}if(_0x10deee)_0xedd968['log'][_0x2385bd(0x22e)](_0x2385bd(0x20c)+_0x3fb64a+_0x2385bd(0x24c));else{const _0x4bcaf5=_0x2112ae[_0x3fb64a]||_0x2112ae[_0x2385bd(0x241)]||0x15;_0xedd968[_0x2385bd(0x216)][_0x2385bd(0x22e)](_0x2385bd(0x278)+_0x3fb64a+_0x2385bd(0x1eb)+_0x3c27b7[_0x2385bd(0x1cc)]+'Â°C\x20<\x20'+(_0x4bcaf5+0.2)+_0x2385bd(0x206)),await _0xedd968[_0x2385bd(0x215)](_0x76f888,_0x4bcaf5),await logAutomationAction(_0xedd968,_0x2385bd(0x229)+_0x3fb64a+_0x2385bd(0x246)+_0x4bcaf5+'Â°C'),lastActions[_0x2385bd(0x244)+_0x3fb64a]=Date[_0x2385bd(0x1df)]();}}}_0x137da3[_0x2385bd(0x260)](_0x453284,0x1),_0x41c6eb=!![];}}}}}_0x41c6eb&&await _0xedd968['setStateAsync'](_0x125fa1,{'val':JSON[_0x2385bd(0x280)](_0x137da3),'ack':!![]}),_0x6cb279&&await _0xedd968['setStateAsync'](_0x2385bd(0x1fa),{'val':JSON['stringify'](_0x4258eb),'ack':!![]});}catch(_0x548ce4){}}async function applyEnergySavings(_0x126944,_0x2764c4){const _0x589f1b=a1_0x231672;await cleanupGhostInterventions(_0x126944);if(!_0x2764c4||_0x2764c4[_0x589f1b(0x243)]===0x0)return;const _0x534450=_0x126944[_0x589f1b(0x276)]['devices']||[],_0x89a067=Date[_0x589f1b(0x1df)]();for(const _0x23f4d1 of _0x2764c4){const _0x1fa612=_0x23f4d1['room'],_0x2d3a8f=_0x23f4d1[_0x589f1b(0x201)],_0x3873f1=_0x23f4d1[_0x589f1b(0x204)]||0x15;if(lastActions[_0x589f1b(0x244)+_0x1fa612]&&_0x89a067-lastActions['rescue_'+_0x1fa612]<RESCUE_LOCK_MS)continue;const _0x43c132=_0x534450['find'](_0x12c80d=>normalize(_0x12c80d[_0x589f1b(0x1db)])===normalize(_0x1fa612)&&(_0x12c80d[_0x589f1b(0x263)]===_0x589f1b(0x25d)||_0x12c80d[_0x589f1b(0x263)]===_0x589f1b(0x237)));if(!_0x43c132)continue;const _0x5968ed=await findRelatedId(_0x126944,_0x43c132['id'],_0x589f1b(0x283));if(_0x5968ed){if(lastActions['mpc_'+_0x1fa612]&&_0x89a067-lastActions[_0x589f1b(0x1f0)+_0x1fa612]<0x1e*0x3c*0x3e8)continue;const _0x363c7e=await _0x126944['getForeignStateAsync'](_0x5968ed);if(_0x363c7e&&typeof _0x363c7e[_0x589f1b(0x1cc)]===_0x589f1b(0x1c7)){const _0x42f6bd=_0x363c7e[_0x589f1b(0x1cc)];_0x42f6bd!==ECO_TEMP&&await manageMpcIntervention(_0x126944,_0x1fa612,_0x589f1b(0x240));if(_0x2d3a8f>0x1e)_0x42f6bd>ECO_TEMP+0.5&&(_0x126944[_0x589f1b(0x216)][_0x589f1b(0x22e)](_0x589f1b(0x23e)+_0x1fa612+_0x589f1b(0x26b)+ECO_TEMP+_0x589f1b(0x266)+_0x2d3a8f+_0x589f1b(0x261)),await _0x126944[_0x589f1b(0x215)](_0x5968ed,ECO_TEMP),await manageMpcIntervention(_0x126944,_0x1fa612,_0x589f1b(0x1ee)),lastActions[_0x589f1b(0x1f0)+_0x1fa612]=_0x89a067,await logAutomationAction(_0x126944,_0x589f1b(0x1f7)+_0x1fa612+_0x589f1b(0x251)+ECO_TEMP+'Â°C'));else _0x2d3a8f<=0xf&&(_0x42f6bd<_0x3873f1&&(_0x126944[_0x589f1b(0x216)][_0x589f1b(0x22e)](_0x589f1b(0x252)+_0x1fa612+_0x589f1b(0x210)+_0x3873f1+_0x589f1b(0x226)),await _0x126944[_0x589f1b(0x215)](_0x5968ed,_0x3873f1),await manageMpcIntervention(_0x126944,_0x1fa612,_0x589f1b(0x240)),lastActions[_0x589f1b(0x1f0)+_0x1fa612]=_0x89a067,await logAutomationAction(_0x126944,'[MPC]\x20'+_0x1fa612+':\x20Aufheizen\x20auf\x20'+_0x3873f1+'Â°C')));}}else _0x126944[_0x589f1b(0x216)]['warn'](_0x589f1b(0x1da)+_0x1fa612+'\x20gefunden!');}}module['exports']={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};