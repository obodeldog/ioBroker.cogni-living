const a1_0x170ec9=a1_0x32f6;(function(_0x2e3d5f,_0x2d7d1d){const _0x32c106=a1_0x32f6,_0x3453ff=_0x2e3d5f();while(!![]){try{const _0x9ae640=-parseInt(_0x32c106(0x1cc))/0x1*(-parseInt(_0x32c106(0x1b4))/0x2)+-parseInt(_0x32c106(0x252))/0x3*(parseInt(_0x32c106(0x1cf))/0x4)+parseInt(_0x32c106(0x1d5))/0x5*(parseInt(_0x32c106(0x26d))/0x6)+parseInt(_0x32c106(0x1b7))/0x7*(parseInt(_0x32c106(0x1da))/0x8)+parseInt(_0x32c106(0x210))/0x9+-parseInt(_0x32c106(0x25f))/0xa*(-parseInt(_0x32c106(0x21b))/0xb)+parseInt(_0x32c106(0x22b))/0xc*(-parseInt(_0x32c106(0x265))/0xd);if(_0x9ae640===_0x2d7d1d)break;else _0x3453ff['push'](_0x3453ff['shift']());}catch(_0x406b82){_0x3453ff['push'](_0x3453ff['shift']());}}}(a1_0x27f3,0x2c607));const a1_0x424e20=(function(){let _0x56837b=!![];return function(_0x5b96b4,_0xd01f23){const _0x3c821a=_0x56837b?function(){if(_0xd01f23){const _0x34389e=_0xd01f23['apply'](_0x5b96b4,arguments);return _0xd01f23=null,_0x34389e;}}:function(){};return _0x56837b=![],_0x3c821a;};}()),a1_0x3622de=a1_0x424e20(this,function(){const _0x339a24=a1_0x32f6;return a1_0x3622de[_0x339a24(0x206)]()['search']('(((.+)+)+)+$')[_0x339a24(0x206)]()[_0x339a24(0x1d9)](a1_0x3622de)[_0x339a24(0x1be)](_0x339a24(0x1df));});a1_0x3622de();'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,lastActions={};function normalize(_0xd27b01){const _0xf0896d=a1_0x32f6;if(!_0xd27b01)return'';return _0xd27b01[_0xf0896d(0x214)]()['replace'](/\s+/g,'')[_0xf0896d(0x25a)]();}async function logAutomationAction(_0x33cfc4,_0x4f1a9b){const _0x12c79b=a1_0x32f6;await _0x33cfc4[_0x12c79b(0x242)](_0x12c79b(0x22a),{'val':_0x4f1a9b,'ack':!![]});try{const _0x393855=_0x12c79b(0x1d2),_0x1c6ea6=await _0x33cfc4[_0x12c79b(0x1fc)](_0x393855);let _0x69d06a=[];if(_0x1c6ea6&&_0x1c6ea6[_0x12c79b(0x25d)])try{_0x69d06a=JSON[_0x12c79b(0x1ea)](_0x1c6ea6['val']);}catch(_0x4e5b9c){}_0x69d06a[_0x12c79b(0x238)]({'ts':Date['now'](),'msg':_0x4f1a9b});if(_0x69d06a[_0x12c79b(0x1bd)]>0x32)_0x69d06a=_0x69d06a[_0x12c79b(0x231)](0x0,0x32);await _0x33cfc4['setStateAsync'](_0x393855,{'val':JSON[_0x12c79b(0x234)](_0x69d06a),'ack':!![]});}catch(_0x1c56ab){}}async function handlePrediction(_0x729457,_0x74ceb9,_0x33a71f){const _0x5486cd=a1_0x32f6;if(!_0x74ceb9||_0x74ceb9===_0x5486cd(0x221))return;let _0x355867=_0x5486cd(0x21c),_0x317863=0.6;try{const _0x1c97c5=await _0x729457[_0x5486cd(0x1fc)](_0x5486cd(0x229));if(_0x1c97c5&&_0x1c97c5['val'])_0x355867=_0x1c97c5[_0x5486cd(0x25d)];const _0x1bf230=await _0x729457[_0x5486cd(0x1fc)](_0x5486cd(0x223));if(_0x1bf230&&_0x1bf230[_0x5486cd(0x25d)])_0x317863=_0x1bf230['val'];}catch(_0x42351b){}if(_0x355867===_0x5486cd(0x21c)||_0x33a71f<_0x317863)return;const _0x427622=Date[_0x5486cd(0x237)]();if(lastActions[_0x74ceb9]&&_0x427622-lastActions[_0x74ceb9]<COOLDOWN_MS)return;const _0x1c6ec3=_0x729457[_0x5486cd(0x216)][_0x5486cd(0x222)]||[],_0x566892=normalize(_0x74ceb9),_0x1ce9c0=_0x1c6ec3[_0x5486cd(0x264)](_0x23c5ae=>normalize(_0x23c5ae[_0x5486cd(0x243)])===_0x566892&&(_0x23c5ae[_0x5486cd(0x209)]===_0x5486cd(0x200)||_0x23c5ae[_0x5486cd(0x209)]===_0x5486cd(0x273)||_0x23c5ae[_0x5486cd(0x209)]===_0x5486cd(0x1bb)));if(!_0x1ce9c0)return;const _0x57b7d1=await aiAgent[_0x5486cd(0x266)](_0x729457,_0x74ceb9,_0x1ce9c0[_0x5486cd(0x1b2)],_0x33a71f);if(!_0x57b7d1[_0x5486cd(0x25c)])return;const _0x478604=_0x5486cd(0x1e5)+_0x74ceb9+_0x5486cd(0x1e2)+_0x1ce9c0[_0x5486cd(0x1b2)]+'\x20('+_0x57b7d1[_0x5486cd(0x1bc)]+')';await logAutomationAction(_0x729457,'['+_0x355867[_0x5486cd(0x208)]()+']\x20'+_0x478604);if(_0x355867==='active'){const _0x37a21a=await _0x729457[_0x5486cd(0x1f4)](_0x1ce9c0['id']);(!_0x37a21a||!_0x37a21a[_0x5486cd(0x25d)]&&_0x37a21a[_0x5486cd(0x25d)]!==!![])&&await _0x729457['setForeignStateAsync'](_0x1ce9c0['id'],!![]),lastActions[_0x74ceb9]=_0x427622;}}async function findRelatedId(_0x41873a,_0x1c25b6,_0x367908='setpoint'){const _0x67df73=a1_0x32f6;if(_0x367908==='setpoint'&&_0x41873a[_0x67df73(0x216)]['thermostatMapping']){let _0x185f4a=_0x41873a[_0x67df73(0x216)][_0x67df73(0x1d6)];if(typeof _0x185f4a===_0x67df73(0x23f))try{_0x185f4a=JSON[_0x67df73(0x1ea)](_0x185f4a);}catch(_0x350192){}if(_0x185f4a&&_0x185f4a[_0x1c25b6])return _0x185f4a[_0x1c25b6];}if(_0x367908==='valve'&&_0x41873a['config']['valveMapping']){let _0x1e1b9b=_0x41873a[_0x67df73(0x216)][_0x67df73(0x217)];if(typeof _0x1e1b9b===_0x67df73(0x23f))try{_0x1e1b9b=JSON[_0x67df73(0x1ea)](_0x1e1b9b);}catch(_0x1fe8ee){}if(_0x1e1b9b&&_0x1e1b9b[_0x1c25b6])return _0x1e1b9b[_0x1c25b6];}let _0x2b5215=[];if(_0x367908===_0x67df73(0x1fd))_0x2b5215=[{'s':_0x67df73(0x215),'t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x67df73(0x1ca),'t':_0x67df73(0x1d4)},{'s':_0x67df73(0x1ca),'t':_0x67df73(0x1ee)},{'s':_0x67df73(0x24c),'t':'SET_POINT_TEMPERATURE'},{'s':'local_temperature','t':_0x67df73(0x1c1)},{'s':_0x67df73(0x23c),'t':_0x67df73(0x1e1)},{'s':_0x67df73(0x1b3),'t':_0x67df73(0x26a)},{'s':'ACTUAL','t':_0x67df73(0x239)},{'s':'Ist','t':'Soll'},{'s':_0x67df73(0x1b3),'t':_0x67df73(0x1fd)}];else _0x367908===_0x67df73(0x211)&&(_0x2b5215=[{'s':_0x67df73(0x215),'t':_0x67df73(0x1dd)},{'s':'.1.TEMPERATURE','t':_0x67df73(0x1dd)},{'s':_0x67df73(0x1ca),'t':_0x67df73(0x25b)},{'s':_0x67df73(0x23c),'t':'pi_heating_demand'},{'s':_0x67df73(0x1b3),'t':_0x67df73(0x257)},{'s':_0x67df73(0x1b3),'t':_0x67df73(0x228)}]);for(const _0x25fc61 of _0x2b5215){if(_0x1c25b6[_0x67df73(0x20e)](_0x25fc61['s'])){const _0x4705f9=_0x1c25b6[_0x67df73(0x1b5)](_0x25fc61['s'],_0x25fc61['t']),_0xae6985=await _0x41873a['getForeignObjectAsync'](_0x4705f9);if(_0xae6985)return _0x4705f9;}}try{const _0x28ab67=_0x1c25b6[_0x67df73(0x225)]('.');if(_0x28ab67[_0x67df73(0x1bd)]>0x2){const _0x107c0a=_0x28ab67[_0x67df73(0x231)](0x0,-0x1)[_0x67df73(0x248)]('.'),_0x2075f3=await _0x41873a[_0x67df73(0x1dc)](_0x107c0a+'.*'),_0x29ac51=[],_0x5c5d40=_0x1c25b6[_0x67df73(0x225)](/[._]+/)[_0x67df73(0x26b)](_0x12d68c=>!['openknx','0',_0x67df73(0x1eb),_0x67df73(0x1d8),_0x67df73(0x20c),_0x67df73(0x1b3),_0x67df73(0x247),'sensor',_0x67df73(0x255),_0x67df73(0x1f6)][_0x67df73(0x20e)](_0x12d68c[_0x67df73(0x214)]()));for(const [_0x3feca2,_0x3e6d1a]of Object[_0x67df73(0x276)](_0x2075f3)){if(_0x3feca2===_0x1c25b6)continue;if(_0x3e6d1a&&_0x3e6d1a[_0x67df73(0x262)]){const _0x2f4cfc=_0x3feca2[_0x67df73(0x214)](),_0x5ba880=(_0x3e6d1a[_0x67df73(0x262)][_0x67df73(0x1c6)]||'')[_0x67df73(0x214)](),_0x7677b1=(_0x3e6d1a['common'][_0x67df73(0x275)]||'')['toLowerCase']();let _0x5c0b50=![];if(_0x367908===_0x67df73(0x1fd)&&_0x3e6d1a[_0x67df73(0x262)][_0x67df73(0x1f2)]===!![])_0x5c0b50=_0x2f4cfc[_0x67df73(0x20e)](_0x67df73(0x269))||_0x2f4cfc['includes']('soll')||_0x2f4cfc['includes'](_0x67df73(0x1de))||_0x5ba880[_0x67df73(0x20e)](_0x67df73(0x24a))||_0x5ba880['includes'](_0x67df73(0x26f));else _0x367908===_0x67df73(0x211)&&(_0x5c0b50=_0x2f4cfc[_0x67df73(0x20e)](_0x67df73(0x228))||_0x2f4cfc[_0x67df73(0x20e)](_0x67df73(0x211))||_0x2f4cfc[_0x67df73(0x20e)]('stellwert')||_0x2f4cfc[_0x67df73(0x20e)]('position')||_0x5ba880[_0x67df73(0x20e)](_0x67df73(0x1e6))||_0x5ba880[_0x67df73(0x20e)](_0x67df73(0x1bf))||_0x7677b1[_0x67df73(0x20e)]('%'));if(_0x5c0b50){const _0x5075d9=_0x3feca2[_0x67df73(0x225)](/[._]+/)[_0x67df73(0x235)](_0xffedf7=>_0xffedf7[_0x67df73(0x214)]());let _0x2f2b6a=0x0;_0x5c5d40[_0x67df73(0x246)](_0x3e4f66=>{const _0x4f8945=_0x67df73;if(_0x5075d9[_0x4f8945(0x20e)](_0x3e4f66['toLowerCase']()))_0x2f2b6a++;}),_0x29ac51[_0x67df73(0x267)]({'id':_0x3feca2,'score':_0x2f2b6a});}}}if(_0x29ac51[_0x67df73(0x1bd)]>0x0){_0x29ac51[_0x67df73(0x1f3)]((_0x3fdb03,_0x5878b2)=>_0x5878b2[_0x67df73(0x1e0)]-_0x3fdb03[_0x67df73(0x1e0)]);if(_0x29ac51[0x0][_0x67df73(0x1e0)]>0x0)return _0x29ac51[0x0]['id'];}}}catch(_0x232f56){}return null;}async function scanThermostats(_0x468c0d){const _0x397021=a1_0x32f6,_0x33ae50=_0x468c0d[_0x397021(0x216)][_0x397021(0x222)]||[],_0x3b37db=[],_0x302c24=_0x33ae50[_0x397021(0x26b)](_0x3eddc8=>_0x3eddc8['id']&&_0x3eddc8['id'][_0x397021(0x20e)](_0x397021(0x1b3))||_0x3eddc8[_0x397021(0x209)]&&['temperature','thermostat',_0x397021(0x249)][_0x397021(0x20e)](_0x3eddc8['type'])||_0x3eddc8[_0x397021(0x1b2)]&&_0x3eddc8[_0x397021(0x1b2)]['toLowerCase']()[_0x397021(0x20e)](_0x397021(0x224)));for(const _0x2a6ccd of _0x302c24){const _0x486fec=await findRelatedId(_0x468c0d,_0x2a6ccd['id'],_0x397021(0x1fd)),_0x29856a=await findRelatedId(_0x468c0d,_0x2a6ccd['id'],_0x397021(0x211));let _0x5b9773='Nicht\x20gefunden',_0x3b70b2=![],_0x87ba77=_0x468c0d[_0x397021(0x216)][_0x397021(0x1d6)]||{};if(typeof _0x87ba77===_0x397021(0x23f))try{_0x87ba77=JSON['parse'](_0x87ba77);}catch(_0x1e86e2){}let _0x4ff229=_0x468c0d[_0x397021(0x216)][_0x397021(0x217)]||{};if(typeof _0x4ff229===_0x397021(0x23f))try{_0x4ff229=JSON[_0x397021(0x1ea)](_0x4ff229);}catch(_0x44f078){}if(_0x87ba77[_0x2a6ccd['id']]&&_0x87ba77[_0x2a6ccd['id']]===_0x486fec||_0x4ff229[_0x2a6ccd['id']]&&_0x4ff229[_0x2a6ccd['id']]===_0x29856a)_0x5b9773=_0x397021(0x1ba),_0x3b70b2=!![];else(_0x486fec||_0x29856a)&&(_0x5b9773=_0x397021(0x21e));_0x3b37db['push']({'room':_0x2a6ccd[_0x397021(0x243)]||_0x397021(0x23d),'sensorId':_0x2a6ccd['id'],'setpointId':_0x486fec||'-','valveId':_0x29856a||'-','source':_0x5b9773,'isManual':_0x3b70b2,'status':_0x486fec&&_0x29856a?'PERFECT':_0x486fec?'OK':'Fehlt'});}return _0x3b37db[_0x397021(0x1f3)]((_0x1342c0,_0xafc3b8)=>_0x1342c0[_0x397021(0x233)][_0x397021(0x1fa)](_0xafc3b8[_0x397021(0x233)]));}async function updateSchedulePreview(_0x116462){const _0x5bcb5c=a1_0x32f6;if(!_0x116462[_0x5bcb5c(0x216)]['useCalendar']||!_0x116462[_0x5bcb5c(0x216)][_0x5bcb5c(0x1fe)])return;let _0x17c25b={};try{const _0x276678=await _0x116462['getStateAsync'](_0x5bcb5c(0x21d));if(_0x276678&&_0x276678[_0x5bcb5c(0x25d)])_0x17c25b=JSON[_0x5bcb5c(0x1ea)](_0x276678[_0x5bcb5c(0x25d)]);}catch(_0x3bec64){}const _0x329225=[],_0x59048f=Date['now'](),_0x65979=0x30*0x3c*0x3c*0x3e8;try{const _0x21c060=await _0x116462[_0x5bcb5c(0x1f4)](_0x116462[_0x5bcb5c(0x216)][_0x5bcb5c(0x1fe)]+_0x5bcb5c(0x1b8));if(!_0x21c060||!_0x21c060[_0x5bcb5c(0x25d)])return;const _0x5cc445=JSON[_0x5bcb5c(0x1ea)](_0x21c060[_0x5bcb5c(0x25d)]),_0x168f20=_0x116462[_0x5bcb5c(0x216)]['calendarSelection']||[],_0x4d6091=_0x116462[_0x5bcb5c(0x216)][_0x5bcb5c(0x222)]||[],_0x5ac86f=new Set();_0x4d6091[_0x5bcb5c(0x246)](_0x105655=>{const _0x4c7b25=_0x5bcb5c;if(_0x105655['location'])_0x5ac86f[_0x4c7b25(0x1d3)](_0x105655[_0x4c7b25(0x243)]);});for(const _0x30d95d of _0x5cc445){if(_0x30d95d['_calName']&&_0x168f20['length']>0x0&&!_0x168f20[_0x5bcb5c(0x20e)](_0x30d95d[_0x5bcb5c(0x1c5)]))continue;const _0x5df89f=_0x30d95d[_0x5bcb5c(0x245)]||_0x30d95d[_0x5bcb5c(0x258)]||_0x30d95d['date'];if(!_0x5df89f)continue;const _0x252de8=new Date(_0x5df89f),_0x477c83=_0x252de8[_0x5bcb5c(0x1d0)]();if(isNaN(_0x477c83))continue;if(_0x477c83<_0x59048f)continue;if(_0x477c83>_0x59048f+_0x65979)continue;const _0x477729=(_0x30d95d[_0x5bcb5c(0x226)]||_0x30d95d[_0x5bcb5c(0x1c3)]||'')[_0x5bcb5c(0x214)]();let _0x56c5c3=![],_0x1f20bb=[],_0x452fcd=_0x30d95d['event']||_0x30d95d[_0x5bcb5c(0x1c3)]||'Unbekannt';if(_0x477729[_0x5bcb5c(0x20e)](_0x5bcb5c(0x1cb))||_0x477729['includes'](_0x5bcb5c(0x261))||_0x477729[_0x5bcb5c(0x20e)](_0x5bcb5c(0x236)))_0x56c5c3=!![],_0x1f20bb=Array[_0x5bcb5c(0x232)](_0x5ac86f);else for(const _0x5191b9 of _0x5ac86f){if(_0x477729[_0x5bcb5c(0x20e)](_0x5191b9[_0x5bcb5c(0x214)]()))_0x1f20bb['push'](_0x5191b9);}_0x1f20bb[_0x5bcb5c(0x1bd)]>0x0&&_0x1f20bb[_0x5bcb5c(0x246)](_0x54f935=>{const _0x16dcc9=_0x5bcb5c;let _0x31fbac=0x3c;if(_0x56c5c3){let _0x447d65=0x0;Object['values'](_0x17c25b)[_0x16dcc9(0x246)](_0x1a6b0b=>{if(_0x1a6b0b>_0x447d65)_0x447d65=_0x1a6b0b;}),_0x31fbac=_0x447d65>0x0?_0x447d65:0x78;}else _0x31fbac=_0x17c25b[_0x54f935]||0x3c;const _0x472b8d=new Date(_0x477c83-_0x31fbac*0xea60);_0x329225[_0x16dcc9(0x267)]({'eventTime':_0x477c83,'triggerTime':_0x472b8d[_0x16dcc9(0x1d0)](),'room':_0x54f935,'minutes':_0x31fbac,'reason':_0x452fcd,'isGlobal':_0x56c5c3});});}}catch(_0x426743){}_0x329225[_0x5bcb5c(0x1f3)]((_0x1215f7,_0x8fc3bb)=>_0x1215f7['triggerTime']-_0x8fc3bb['triggerTime']);const _0x392bb4=_0x329225[_0x5bcb5c(0x231)](0x0,0x5);await _0x116462[_0x5bcb5c(0x242)](_0x5bcb5c(0x25e),{'val':JSON[_0x5bcb5c(0x234)](_0x392bb4),'ack':!![]});}function a1_0x27f3(){const _0x49d062=['¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','minutes_safe','messwert',':\x20Aufheizen\x20auf\x20','valve_position','eventStart','üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20','trim','.4.VALVE_STATE','approved','val','analysis.energy.schedulePreview','68690eDfHwb','remove','r√ºckkehr','common','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','find','5549180cKoEKh','consultButler','push','[CAL]\x20','set','target_temperature','filter','[MPC]\x20','145284YqhQJi','¬∞C).\x20Entferne\x20Status.','thermostat.setpoint','\x20wurde\x20manuell\x20erh√∂ht.','contact','window','dimmer','log','unit','entries','name','temperature','80962QiBgDv','replace','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','84UGIJhi','.data.table','abs','Manuelles\x20Mapping','switch','reason','length','search','value.valve','normal','occupied_heating_setpoint','system.mode','summary','findIndex','_calName','role','error','Calendar\x20Check\x20Error:\x20','thermostat','.1.TEMPERATURE','urlaub\x20ende','1VOglrP','\x20min).','open','8NqaBlo','getTime','¬∞C.','analysis.automation.actionLog','add','.1.SET_POINT_TEMPERATURE','10mVGgAj','thermostatMapping','¬∞C\x20->\x20','ist','constructor','195704sInott','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','getForeignObjectsAsync','.1.LEVEL','target','(((.+)+)+)+$','score','current_heating_setpoint','\x20->\x20Schalte\x20','¬∞C\x20<\x20','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','Pr√§diktion:\x20','level.valve','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','splice',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','parse','hm-rpc','warn','[FORCE]\x20','.4.SET_TEMPERATURE','isArray','¬∞C!\x20(Puffer\x20leer).','\x20auf\x20','write','sort','getForeignStateAsync','üìÖ\x20[MPC\x20INFO]\x20','state','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','analysis.energy.warmupTargets','üî•\x20[MPC\x20ACTION]\x20Heize\x20','localeCompare','useCalendar','getStateAsync','setpoint','calendarInstance','default','light','analysis.energy.mpcActiveInterventions','info','analysis.energy.warmupSources','cal_','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','toString','üö®\x20[MPC\x20WATCHDOG]\x20','toUpperCase','type','number','exports','wert','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','includes','manual','1533969GUaFho','valve',']:\x20Raum-Trigger\x20\x27','¬∞C\x20(nicht\x20','toLowerCase','.1.ACTUAL_TEMPERATURE','config','valveMapping','setForeignStateAsync','rescue_','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','253UwfXaS','off','analysis.energy.warmupTimes','Auto-Erkennung','message','[WATCHDOG]\x20','Unknown','devices','analysis.automation.confidenceThreshold','temp','split','event','analysis.energy.activeEnforcements','level','analysis.automation.mode','analysis.automation.lastAction','12NJQvyq','\x27\x20(Match:\x20','\x20gefunden!','mpc_','\x20erreicht\x20Limit\x20(','Classic','slice','from','room','stringify','map','ankunft','now','unshift','SET','\x20min)','¬∞C\x20(via\x20','local_temperature','Unbekannt','Enforcement\x20Monitor\x20Error:\x20','string','values','date','setStateAsync','location','sendToPythonWrapper','_date','forEach','actual','join','sensor','level.temperature','¬∞C\x20(Vorlauf:\x20','ACTUAL_TEMPERATURE',')\x20aktiv.\x20Heize\x20auf\x20','¬∞C\x20(Kalender-Schutz)','calendarSelection',':\x20Absenkung\x20auf\x20','TRAIN_RL_PENALTY','153399CuavVB'];a1_0x27f3=function(){return _0x49d062;};return a1_0x27f3();}async function monitorEnforcements(_0x56242a){const _0x4589e6=a1_0x32f6;try{const _0x11dd21=_0x4589e6(0x227),_0x201603=await _0x56242a[_0x4589e6(0x1fc)](_0x11dd21);if(!_0x201603||!_0x201603['val'])return;let _0x5c0188=[];try{_0x5c0188=JSON['parse'](_0x201603['val']);}catch(_0x48c8fa){return;}if(!Array[_0x4589e6(0x1ef)](_0x5c0188)||_0x5c0188[_0x4589e6(0x1bd)]===0x0)return;const _0x2deea3=Date[_0x4589e6(0x237)](),_0x3febca=_0x56242a['config']['devices']||[];let _0x1a7fa6=![];for(let _0x5734a2=_0x5c0188[_0x4589e6(0x1bd)]-0x1;_0x5734a2>=0x0;_0x5734a2--){const _0x582a18=_0x5c0188[_0x5734a2];if(_0x2deea3>=_0x582a18['until']){_0x56242a[_0x4589e6(0x274)][_0x4589e6(0x202)](_0x4589e6(0x20d)+_0x582a18[_0x4589e6(0x233)]+_0x4589e6(0x1b6)),_0x5c0188[_0x4589e6(0x1e8)](_0x5734a2,0x1),_0x1a7fa6=!![];continue;}const _0x3ff062=_0x3febca[_0x4589e6(0x264)](_0x3cc82a=>normalize(_0x3cc82a['location'])===normalize(_0x582a18[_0x4589e6(0x233)])&&(_0x3cc82a['type']===_0x4589e6(0x1b3)||_0x3cc82a[_0x4589e6(0x209)]===_0x4589e6(0x1c9)));if(_0x3ff062){const _0x21f6e9=await findRelatedId(_0x56242a,_0x3ff062['id'],_0x4589e6(0x1fd));if(_0x21f6e9){const _0x174dad=await _0x56242a[_0x4589e6(0x1f4)](_0x21f6e9);_0x174dad&&typeof _0x174dad[_0x4589e6(0x25d)]===_0x4589e6(0x20a)&&(_0x174dad[_0x4589e6(0x25d)]<0xf&&(_0x56242a[_0x4589e6(0x274)]['warn'](_0x4589e6(0x21a)+_0x582a18['room']+_0x4589e6(0x1f1)+_0x174dad[_0x4589e6(0x25d)]+_0x4589e6(0x253)+_0x582a18['target']+_0x4589e6(0x1d1)),await _0x56242a[_0x4589e6(0x218)](_0x21f6e9,_0x582a18[_0x4589e6(0x1de)]),await logAutomationAction(_0x56242a,_0x4589e6(0x1ed)+_0x582a18[_0x4589e6(0x233)]+':\x20'+_0x174dad[_0x4589e6(0x25d)]+_0x4589e6(0x1d7)+_0x582a18[_0x4589e6(0x1de)]+_0x4589e6(0x24e))));}}}_0x1a7fa6&&await _0x56242a[_0x4589e6(0x242)](_0x11dd21,{'val':JSON[_0x4589e6(0x234)](_0x5c0188),'ack':!![]});}catch(_0x12f518){_0x56242a['log'][_0x4589e6(0x1c7)](_0x4589e6(0x23e)+_0x12f518[_0x4589e6(0x21f)]);}}async function checkCalendarTriggers(_0xb09118){const _0x5e11cf=a1_0x32f6;if(!_0xb09118[_0x5e11cf(0x216)][_0x5e11cf(0x1fb)]||!_0xb09118[_0x5e11cf(0x216)][_0x5e11cf(0x1fe)])return;await updateSchedulePreview(_0xb09118);let _0x13c890={},_0x429d67={};try{const _0x5e207b=await _0xb09118[_0x5e11cf(0x1fc)](_0x5e11cf(0x21d));if(_0x5e207b&&_0x5e207b[_0x5e11cf(0x25d)])_0x13c890=JSON[_0x5e11cf(0x1ea)](_0x5e207b['val']);const _0x2d35af=await _0xb09118[_0x5e11cf(0x1fc)](_0x5e11cf(0x203));if(_0x2d35af&&_0x2d35af[_0x5e11cf(0x25d)])_0x429d67=JSON[_0x5e11cf(0x1ea)](_0x2d35af[_0x5e11cf(0x25d)]);}catch(_0x3d55bc){}let _0x389631={'default':0x15};try{const _0x45d5eb=await _0xb09118[_0x5e11cf(0x1fc)](_0x5e11cf(0x1f8));if(_0x45d5eb&&_0x45d5eb[_0x5e11cf(0x25d)])_0x389631=JSON[_0x5e11cf(0x1ea)](_0x45d5eb[_0x5e11cf(0x25d)]);}catch(_0x33f67e){}let _0x11dcfc=[];try{const _0x1114b8=await _0xb09118[_0x5e11cf(0x1fc)](_0x5e11cf(0x227));if(_0x1114b8&&_0x1114b8[_0x5e11cf(0x25d)])_0x11dcfc=JSON['parse'](_0x1114b8['val']);}catch(_0xe98e7){}try{const _0x2c5b6c=await _0xb09118[_0x5e11cf(0x1f4)](_0xb09118[_0x5e11cf(0x216)][_0x5e11cf(0x1fe)]+'.data.table');if(!_0x2c5b6c||!_0x2c5b6c[_0x5e11cf(0x25d)])return;const _0x1ea2e3=JSON[_0x5e11cf(0x1ea)](_0x2c5b6c[_0x5e11cf(0x25d)]),_0x27646b=Date[_0x5e11cf(0x237)](),_0x68f8d0=_0xb09118[_0x5e11cf(0x216)]['devices']||[],_0x1ef1c2=_0xb09118[_0x5e11cf(0x216)][_0x5e11cf(0x24f)]||[];let _0x4a3443=![];for(const _0x1b1a33 of _0x1ea2e3){if(_0x1b1a33[_0x5e11cf(0x1c5)]&&_0x1ef1c2[_0x5e11cf(0x1bd)]>0x0&&!_0x1ef1c2['includes'](_0x1b1a33['_calName']))continue;const _0x5ee64a=_0x1b1a33[_0x5e11cf(0x245)]||_0x1b1a33['eventStart']||_0x1b1a33[_0x5e11cf(0x241)];if(!_0x5ee64a)continue;const _0x547462=new Date(_0x5ee64a);if(isNaN(_0x547462[_0x5e11cf(0x1d0)]()))continue;const _0x5b152e=(_0x1b1a33['event']||_0x1b1a33[_0x5e11cf(0x1c3)]||'')['toLowerCase']();if(_0x5b152e['includes']('urlaub\x20ende')||_0x5b152e[_0x5e11cf(0x20e)](_0x5e11cf(0x261))||_0x5b152e[_0x5e11cf(0x20e)](_0x5e11cf(0x236))){let _0x58a364=0x0;Object[_0x5e11cf(0x240)](_0x13c890)[_0x5e11cf(0x246)](_0xf10321=>{if(_0xf10321>_0x58a364)_0x58a364=_0xf10321;});if(_0x58a364===0x0)_0x58a364=0x78;const _0x245f2d=_0x547462[_0x5e11cf(0x1d0)]()-_0x58a364*0xea60;_0x27646b>=_0x245f2d&&_0x27646b<_0x547462[_0x5e11cf(0x1d0)]()&&(_0xb09118['currentSystemMode']!==_0x5e11cf(0x1c0)&&(_0xb09118[_0x5e11cf(0x274)][_0x5e11cf(0x202)](_0x5e11cf(0x1db)+_0x58a364+_0x5e11cf(0x1cd)),await _0xb09118[_0x5e11cf(0x242)](_0x5e11cf(0x1c2),{'val':'normal','ack':![]})));}for(const _0x85200d of _0x68f8d0){if(_0x85200d[_0x5e11cf(0x243)]){const _0x9b2e36=_0x85200d[_0x5e11cf(0x243)][_0x5e11cf(0x214)](),_0x47e0eb=(_0x85200d[_0x5e11cf(0x1b2)]||'')[_0x5e11cf(0x214)]();let _0x2ad4d2=_0x5b152e[_0x5e11cf(0x20e)](_0x9b2e36);!_0x2ad4d2&&_0x47e0eb[_0x5e11cf(0x1bd)]>0x3&&_0x5b152e['includes'](_0x47e0eb)&&(_0x2ad4d2=!![]);if(_0x2ad4d2){const _0x159b27=_0x13c890[_0x85200d[_0x5e11cf(0x243)]]||0x3c,_0x3f757e=_0x429d67[_0x85200d[_0x5e11cf(0x243)]]||_0x5e11cf(0x230),_0x5cf1b5=_0x547462[_0x5e11cf(0x1d0)]()-_0x159b27*0xea60;if(_0x27646b>=_0x5cf1b5&&_0x27646b<_0x547462[_0x5e11cf(0x1d0)]()){const _0x580b79=lastActions[_0x5e11cf(0x204)+_0x85200d['location']];if(_0x580b79&&_0x27646b-_0x580b79<CAL_COOLDOWN_MS)continue;const _0xdf3596=await findRelatedId(_0xb09118,_0x85200d['id'],_0x5e11cf(0x1fd));if(_0xdf3596){let _0x7d572d=_0x389631[_0x85200d[_0x5e11cf(0x243)]];if(_0x7d572d===undefined)_0x7d572d=_0x389631[_0x5e11cf(0x1ff)];if(_0x7d572d===undefined)_0x7d572d=0x15;const _0x26d822=await _0xb09118[_0x5e11cf(0x1f4)](_0xdf3596);if(_0x26d822&&typeof _0x26d822[_0x5e11cf(0x25d)]==='number'&&_0x26d822[_0x5e11cf(0x25d)]<_0x7d572d-0.5){_0xb09118[_0x5e11cf(0x274)][_0x5e11cf(0x202)]('üìÖ\x20SMART\x20SCHEDULE\x20['+_0x3f757e+_0x5e11cf(0x212)+_0x85200d['location']+_0x5e11cf(0x22c)+_0x5b152e+_0x5e11cf(0x24d)+_0x7d572d+_0x5e11cf(0x24b)+_0x159b27+_0x5e11cf(0x1cd)),await _0xb09118[_0x5e11cf(0x218)](_0xdf3596,_0x7d572d),await logAutomationAction(_0xb09118,_0x5e11cf(0x268)+_0x85200d['location']+'\x20->\x20'+_0x7d572d+_0x5e11cf(0x23b)+_0x3f757e+')'),lastActions[_0x5e11cf(0x204)+_0x85200d[_0x5e11cf(0x243)]]=_0x27646b;const _0x422140=_0x11dcfc[_0x5e11cf(0x1c4)](_0x18ba82=>_0x18ba82[_0x5e11cf(0x233)]===_0x85200d['location']);if(_0x422140!==-0x1)_0x11dcfc[_0x5e11cf(0x1e8)](_0x422140,0x1);_0x11dcfc['push']({'room':_0x85200d[_0x5e11cf(0x243)],'target':_0x7d572d,'until':_0x547462[_0x5e11cf(0x1d0)]()}),_0x4a3443=!![];}}}}}}}_0x4a3443&&await _0xb09118[_0x5e11cf(0x242)](_0x5e11cf(0x227),{'val':JSON[_0x5e11cf(0x234)](_0x11dcfc),'ack':!![]});}catch(_0xa8ee){_0xb09118[_0x5e11cf(0x274)]['warn'](_0x5e11cf(0x1c8)+_0xa8ee[_0x5e11cf(0x21f)]);}}function a1_0x32f6(_0x135497,_0x4ac33d){const _0x33e6d4=a1_0x27f3();return a1_0x32f6=function(_0x3622de,_0x424e20){_0x3622de=_0x3622de-0x1b2;let _0x27f383=_0x33e6d4[_0x3622de];return _0x27f383;},a1_0x32f6(_0x135497,_0x4ac33d);}async function manageMpcIntervention(_0x22d179,_0x7c35c1,_0x574b6e){const _0x43e6d3=a1_0x32f6;try{const _0x3cf26b=_0x43e6d3(0x201),_0xcb254f=await _0x22d179[_0x43e6d3(0x1fc)](_0x3cf26b);let _0x450623=[];if(_0xcb254f&&_0xcb254f[_0x43e6d3(0x25d)])try{_0x450623=JSON['parse'](_0xcb254f[_0x43e6d3(0x25d)]);}catch(_0xbcab45){}const _0x384977=_0x450623['indexOf'](_0x7c35c1);if(_0x574b6e==='add')_0x384977===-0x1&&(_0x450623['push'](_0x7c35c1),await _0x22d179[_0x43e6d3(0x242)](_0x3cf26b,{'val':JSON[_0x43e6d3(0x234)](_0x450623),'ack':!![]}));else _0x574b6e===_0x43e6d3(0x260)&&(_0x384977!==-0x1&&(_0x450623[_0x43e6d3(0x1e8)](_0x384977,0x1),await _0x22d179[_0x43e6d3(0x242)](_0x3cf26b,{'val':JSON['stringify'](_0x450623),'ack':!![]})));}catch(_0x20f489){}}async function cleanupGhostInterventions(_0x4b66e2){const _0x4b0418=a1_0x32f6;try{const _0x271c46='analysis.energy.mpcActiveInterventions',_0x2f6ed9=await _0x4b66e2[_0x4b0418(0x1fc)](_0x271c46);if(!_0x2f6ed9||!_0x2f6ed9[_0x4b0418(0x25d)])return;const _0xd49b49=JSON[_0x4b0418(0x1ea)](_0x2f6ed9[_0x4b0418(0x25d)]);if(!Array['isArray'](_0xd49b49)||_0xd49b49[_0x4b0418(0x1bd)]===0x0)return;let _0x1a4fce={'default':0x15};try{const _0x5756f7=await _0x4b66e2[_0x4b0418(0x1fc)](_0x4b0418(0x1f8));if(_0x5756f7&&_0x5756f7[_0x4b0418(0x25d)])_0x1a4fce=JSON['parse'](_0x5756f7[_0x4b0418(0x25d)]);}catch(_0x4d09d2){}let _0x5c7c2d=[];try{const _0x44d16f=await _0x4b66e2['getStateAsync']('analysis.energy.ventilationAlerts');if(_0x44d16f&&_0x44d16f[_0x4b0418(0x25d)])_0x5c7c2d=JSON[_0x4b0418(0x1ea)](_0x44d16f[_0x4b0418(0x25d)]);}catch(_0x29ae09){}const _0x2ab94e=_0x4b66e2[_0x4b0418(0x216)][_0x4b0418(0x222)]||[];let _0x57fe4e=![];for(let _0x3dfa98=_0xd49b49[_0x4b0418(0x1bd)]-0x1;_0x3dfa98>=0x0;_0x3dfa98--){const _0x25dd0c=_0xd49b49[_0x3dfa98],_0x4e0791=_0x2ab94e[_0x4b0418(0x264)](_0x4682ba=>normalize(_0x4682ba[_0x4b0418(0x243)])===normalize(_0x25dd0c)&&(_0x4682ba[_0x4b0418(0x209)]===_0x4b0418(0x1b3)||_0x4682ba[_0x4b0418(0x209)]===_0x4b0418(0x1c9)));if(!_0x4e0791){_0x4b66e2[_0x4b0418(0x274)][_0x4b0418(0x1ec)](_0x4b0418(0x1e4)+_0x25dd0c+'\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.'),_0xd49b49[_0x4b0418(0x1e8)](_0x3dfa98,0x1),_0x57fe4e=!![];continue;}if(_0x4e0791){const _0x306f9a=await findRelatedId(_0x4b66e2,_0x4e0791['id'],_0x4b0418(0x1fd)),_0x1f8a93=await _0x4b66e2['getForeignStateAsync'](_0x4e0791['id']);if(_0x306f9a){const _0x3ca891=await _0x4b66e2['getForeignStateAsync'](_0x306f9a);if(_0x3ca891&&typeof _0x3ca891['val']===_0x4b0418(0x20a)){let _0x329bb1=![],_0x2082e6='';Math[_0x4b0418(0x1b9)](_0x3ca891[_0x4b0418(0x25d)]-ECO_TEMP)>0.5&&(_0x329bb1=!![],_0x2082e6=_0x4b0418(0x20f));if(!_0x329bb1&&_0x1f8a93&&typeof _0x1f8a93['val']===_0x4b0418(0x20a)){const _0x2b8ce5=_0x1a4fce[_0x25dd0c]||_0x1a4fce[_0x4b0418(0x1ff)]||0x15;_0x1f8a93[_0x4b0418(0x25d)]<_0x2b8ce5+0.2&&(_0x329bb1=!![],_0x2082e6='too_cold');}if(_0x329bb1){if(_0x2082e6===_0x4b0418(0x20f)){_0x4b66e2[_0x4b0418(0x274)][_0x4b0418(0x202)]('üßπ\x20[MPC\x20CLEANUP]\x20'+_0x25dd0c+'\x20ist\x20auf\x20'+_0x3ca891[_0x4b0418(0x25d)]+_0x4b0418(0x213)+ECO_TEMP+_0x4b0418(0x26e));const _0xd025e1=lastActions['cal_'+_0x25dd0c],_0xf133af=_0xd025e1&&Date['now']()-_0xd025e1<0x2*0x3c*0x3e8;if(!_0xf133af&&_0x3ca891[_0x4b0418(0x25d)]>ECO_TEMP+0.5)_0x4b66e2[_0x4b0418(0x244)]&&(_0x4b66e2[_0x4b0418(0x274)][_0x4b0418(0x202)](_0x4b0418(0x1e7)+_0x25dd0c+_0x4b0418(0x270)),_0x4b66e2[_0x4b0418(0x244)](_0x4b0418(0x251),{'room':_0x25dd0c}));else _0xf133af&&_0x4b66e2[_0x4b0418(0x274)][_0x4b0418(0x202)](_0x4b0418(0x1f5)+_0x25dd0c+_0x4b0418(0x263));}else{if(_0x2082e6==='too_cold'){let _0x511836=![];if(_0x5c7c2d[_0x4b0418(0x264)](_0xc9fc89=>_0xc9fc89['room']===_0x25dd0c))_0x511836=!![];const _0xf1a322=_0x2ab94e[_0x4b0418(0x26b)](_0x521370=>normalize(_0x521370[_0x4b0418(0x243)])===normalize(_0x25dd0c)&&(_0x521370[_0x4b0418(0x209)]===_0x4b0418(0x272)||_0x521370[_0x4b0418(0x209)]===_0x4b0418(0x249)||_0x521370[_0x4b0418(0x209)]===_0x4b0418(0x271)));for(const _0x31f498 of _0xf1a322){try{const _0x3108eb=await _0x4b66e2[_0x4b0418(0x1f4)](_0x31f498['id']);if(_0x3108eb&&(_0x3108eb[_0x4b0418(0x25d)]===!![]||_0x3108eb[_0x4b0418(0x25d)]===0x1||String(_0x3108eb['val'])[_0x4b0418(0x214)]()===_0x4b0418(0x1ce)))_0x511836=!![];}catch(_0x3346c6){}}if(_0x511836)_0x4b66e2[_0x4b0418(0x274)][_0x4b0418(0x202)](_0x4b0418(0x259)+_0x25dd0c+_0x4b0418(0x1f7));else{const _0x50499d=_0x1a4fce[_0x25dd0c]||_0x1a4fce[_0x4b0418(0x1ff)]||0x15;_0x4b66e2[_0x4b0418(0x274)]['info'](_0x4b0418(0x207)+_0x25dd0c+_0x4b0418(0x22f)+_0x1f8a93[_0x4b0418(0x25d)]+_0x4b0418(0x1e3)+(_0x50499d+0.2)+'¬∞C).\x20Sparmodus\x20beendet!'),await _0x4b66e2[_0x4b0418(0x218)](_0x306f9a,_0x50499d),await logAutomationAction(_0x4b66e2,_0x4b0418(0x220)+_0x25dd0c+_0x4b0418(0x1e9)+_0x50499d+'¬∞C'),lastActions['rescue_'+_0x25dd0c]=Date['now']();}}}_0xd49b49[_0x4b0418(0x1e8)](_0x3dfa98,0x1),_0x57fe4e=!![];}}}}}_0x57fe4e&&await _0x4b66e2['setStateAsync'](_0x271c46,{'val':JSON[_0x4b0418(0x234)](_0xd49b49),'ack':!![]});}catch(_0x39a3db){}}async function applyEnergySavings(_0x58a977,_0x13d051){const _0x4d9d60=a1_0x32f6;await cleanupGhostInterventions(_0x58a977);if(!_0x13d051||_0x13d051[_0x4d9d60(0x1bd)]===0x0)return;const _0x4dbd1d=_0x58a977[_0x4d9d60(0x216)][_0x4d9d60(0x222)]||[],_0x463004=Date[_0x4d9d60(0x237)]();for(const _0x1391b6 of _0x13d051){const _0x554a87=_0x1391b6['room'],_0x2072bf=_0x1391b6[_0x4d9d60(0x254)],_0x4a4fcd=_0x1391b6[_0x4d9d60(0x1de)]||0x15;if(lastActions[_0x4d9d60(0x219)+_0x554a87]&&_0x463004-lastActions[_0x4d9d60(0x219)+_0x554a87]<RESCUE_LOCK_MS)continue;const _0x368f88=_0x4dbd1d[_0x4d9d60(0x264)](_0x37cc14=>normalize(_0x37cc14[_0x4d9d60(0x243)])===normalize(_0x554a87)&&(_0x37cc14[_0x4d9d60(0x209)]===_0x4d9d60(0x1b3)||_0x37cc14[_0x4d9d60(0x209)]===_0x4d9d60(0x1c9)));if(!_0x368f88)continue;const _0x609eab=await findRelatedId(_0x58a977,_0x368f88['id'],_0x4d9d60(0x1fd));if(_0x609eab){if(lastActions[_0x4d9d60(0x22e)+_0x554a87]&&_0x463004-lastActions[_0x4d9d60(0x22e)+_0x554a87]<0x1e*0x3c*0x3e8)continue;const _0x39ec04=await _0x58a977[_0x4d9d60(0x1f4)](_0x609eab);if(_0x39ec04&&typeof _0x39ec04[_0x4d9d60(0x25d)]==='number'){const _0x578d8c=_0x39ec04[_0x4d9d60(0x25d)];_0x578d8c!==ECO_TEMP&&await manageMpcIntervention(_0x58a977,_0x554a87,_0x4d9d60(0x260));if(_0x2072bf>0x1e)_0x578d8c>ECO_TEMP+0.5&&(_0x58a977['log']['info']('üçÉ\x20[MPC\x20ACTION]\x20Senke\x20'+_0x554a87+_0x4d9d60(0x1f1)+ECO_TEMP+'¬∞C!\x20(Puffer:\x20'+_0x2072bf+_0x4d9d60(0x23a)),await _0x58a977[_0x4d9d60(0x218)](_0x609eab,ECO_TEMP),await manageMpcIntervention(_0x58a977,_0x554a87,_0x4d9d60(0x1d3)),lastActions[_0x4d9d60(0x22e)+_0x554a87]=_0x463004,await logAutomationAction(_0x58a977,_0x4d9d60(0x26c)+_0x554a87+_0x4d9d60(0x250)+ECO_TEMP+'¬∞C'));else _0x2072bf<=0xf&&(_0x578d8c<_0x4a4fcd&&(_0x58a977[_0x4d9d60(0x274)][_0x4d9d60(0x202)](_0x4d9d60(0x1f9)+_0x554a87+'\x20wieder\x20auf\x20'+_0x4a4fcd+_0x4d9d60(0x1f0)),await _0x58a977['setForeignStateAsync'](_0x609eab,_0x4a4fcd),await manageMpcIntervention(_0x58a977,_0x554a87,_0x4d9d60(0x260)),lastActions[_0x4d9d60(0x22e)+_0x554a87]=_0x463004,await logAutomationAction(_0x58a977,_0x4d9d60(0x26c)+_0x554a87+_0x4d9d60(0x256)+_0x4a4fcd+'¬∞C')));}}else _0x58a977[_0x4d9d60(0x274)][_0x4d9d60(0x1ec)](_0x4d9d60(0x205)+_0x554a87+_0x4d9d60(0x22d));}}module[a1_0x170ec9(0x20b)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};