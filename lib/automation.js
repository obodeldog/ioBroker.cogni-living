const a1_0xea7cd5=a1_0x457d;(function(_0x3423a0,_0x216cbc){const _0x3d1eb7=a1_0x457d,_0x2708a7=_0x3423a0();while(!![]){try{const _0x419d60=-parseInt(_0x3d1eb7(0x1c0))/0x1+-parseInt(_0x3d1eb7(0x237))/0x2+parseInt(_0x3d1eb7(0x233))/0x3*(-parseInt(_0x3d1eb7(0x239))/0x4)+-parseInt(_0x3d1eb7(0x214))/0x5+parseInt(_0x3d1eb7(0x21a))/0x6*(parseInt(_0x3d1eb7(0x226))/0x7)+parseInt(_0x3d1eb7(0x1c1))/0x8*(parseInt(_0x3d1eb7(0x1c3))/0x9)+parseInt(_0x3d1eb7(0x20b))/0xa;if(_0x419d60===_0x216cbc)break;else _0x2708a7['push'](_0x2708a7['shift']());}catch(_0x42e03d){_0x2708a7['push'](_0x2708a7['shift']());}}}(a1_0xc26b,0xdf18d));const a1_0x430871=(function(){let _0x230d6a=!![];return function(_0x1ac139,_0xf7b937){const _0x4c5195=_0x230d6a?function(){const _0x340545=a1_0x457d;if(_0xf7b937){const _0x4959b1=_0xf7b937[_0x340545(0x272)](_0x1ac139,arguments);return _0xf7b937=null,_0x4959b1;}}:function(){};return _0x230d6a=![],_0x4c5195;};}()),a1_0x23bc6b=a1_0x430871(this,function(){const _0x16bf50=a1_0x457d;return a1_0x23bc6b[_0x16bf50(0x1d4)]()[_0x16bf50(0x1bb)](_0x16bf50(0x1e0))['toString']()[_0x16bf50(0x22b)](a1_0x23bc6b)[_0x16bf50(0x1bb)](_0x16bf50(0x1e0));});a1_0x23bc6b();'use strict';function a1_0xc26b(){const _0x13a131=['temperature','.data.table','normal','triggerTime','toString','filter','trim','level','\x20auf\x20','_calName','toLowerCase','abs','Â°C\x20(nicht\x20',')\x20aktiv.\x20Heize\x20auf\x20','mpc_','target','(((.+)+)+)+$','isArray','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27',']:\x20Raum-Trigger\x20\x27','info','thermostat.setpoint','openknx','ðŸ“…\x20[MPC\x20INFO]\x20','join','currentSystemMode','current_heating_setpoint','number','\x20ist\x20auf\x20','string','.1.SET_POINT_TEMPERATURE','from','devices','split','common','splice','exports','ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27','.4.SET_TEMPERATURE','light','analysis.automation.mode','Nicht\x20gefunden','_date','\x20min).','push','active','\x20gefunden!','until','[FORCE]\x20','stringify','includes','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','consultButler','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','room','Â°C!\x20(Puffer:\x20','val','unshift','Â°C.','10903040UPAYLB','actual','_meta',':\x20Aufheizen\x20auf\x20','Classic','\x20erreicht\x20Limit\x20(','Unbekannt','Unknown','slice','3623015NkPBgH','analysis.energy.ventilationAlerts','[WATCHDOG]\x20','contact','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','score','8454MjNCBp','sensor','ankunft','.1.LEVEL','entries','Soll','sendToPythonWrapper','parse','localeCompare','map','getForeignStateAsync','state','8407YfeHmT','urlaub\x20ende','location','default','ACTUAL_TEMPERATURE','constructor','forEach','manual','getForeignObjectsAsync','event','summary',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','off','5144439VwkMdJ','setpoint','\x27\x20(Match:\x20','sort','1101960VWQAOn','local_temperature','4BGvJES','TRAIN_RL_PENALTY','minutes_safe','Calendar\x20Check\x20Error:\x20','reason','.1.TEMPERATURE','analysis.energy.mpcActiveInterventions','config','hm-rpc','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','eventStart','setForeignStateAsync','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','Â°C\x20<\x20','[MPC]\x20','Ist','Â°C).\x20Entferne\x20Status.','analysis.energy.activeEnforcements','target_temperature','SET_POINT_TEMPERATURE','message','.1.ACTUAL_TEMPERATURE','toUpperCase','approved','replace','thermostatMapping','values','\x20->\x20','level.temperature','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','ðŸ“…\x20SMART\x20SCHEDULE\x20[','calendarSelection','indexOf','rÃ¼ckkehr','Â°C\x20(via\x20','Fehlt','warn','find','[CAL]\x20','\x20min)','type','Â°C\x20(Vorlauf:\x20','calendarInstance','getForeignObjectAsync','level.valve','role','too_cold','cal_','PERFECT','Â°C!\x20(Puffer\x20leer).','position','getTime','\x20wurde\x20manuell\x20erhÃ¶ht.','analysis.energy.warmupTimes',':\x20Absenkung\x20auf\x20','analysis.automation.actionLog','apply','messwert','occupied_heating_setpoint','rescue_','log','length','Â°C).\x20Sparmodus\x20beendet!','getStateAsync','error','PrÃ¤diktion:\x20','Â°C\x20(Kalender-Schutz)','date','Manuelles\x20Mapping','name','useCalendar','remove','search','setStateAsync','analysis.energy.rlPenalties','switch','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','673884ZAEeof','14364576CFfHYQ','wert','9PtmKRe','add','valve','\x20wieder\x20auf\x20','now','soll','.4.VALVE_STATE','analysis.automation.confidenceThreshold','thermostat','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','valveMapping','dimmer','Enforcement\x20Monitor\x20Error:\x20'];a1_0xc26b=function(){return _0x13a131;};return a1_0xc26b();}const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0xa23691){const _0x58773f=a1_0x457d;if(!_0xa23691)return'';return _0xa23691[_0x58773f(0x1da)]()[_0x58773f(0x252)](/\s+/g,'')[_0x58773f(0x1d6)]();}function getWarmupRobust(_0x4c58d9,_0x103e0d){const _0x422daf=a1_0x457d;if(!_0x4c58d9||!_0x103e0d)return 0x3c;if(_0x4c58d9[_0x103e0d]!==undefined)return _0x4c58d9[_0x103e0d];const _0x52079e=_0x103e0d['toLowerCase']()['replace'](/Ã¤/g,'ae')[_0x422daf(0x252)](/Ã¶/g,'oe')[_0x422daf(0x252)](/Ã¼/g,'ue')[_0x422daf(0x252)](/ÃŸ/g,'ss')[_0x422daf(0x252)](/\s+/g,'_')[_0x422daf(0x252)](/[^a-z0-9_]/g,'');if(_0x4c58d9[_0x52079e]!==undefined)return _0x4c58d9[_0x52079e];return 0x3c;}async function logAutomationAction(_0x26aba8,_0x4b5132){const _0x3c83ea=a1_0x457d;await _0x26aba8[_0x3c83ea(0x1bc)]('analysis.automation.lastAction',{'val':_0x4b5132,'ack':!![]});try{const _0x12d525=_0x3c83ea(0x271),_0x478e81=await _0x26aba8['getStateAsync'](_0x12d525);let _0x2643b1=[];if(_0x478e81&&_0x478e81[_0x3c83ea(0x208)])try{_0x2643b1=JSON[_0x3c83ea(0x221)](_0x478e81[_0x3c83ea(0x208)]);}catch(_0x5e80f5){}_0x2643b1[_0x3c83ea(0x209)]({'ts':Date['now'](),'msg':_0x4b5132});if(_0x2643b1['length']>0x32)_0x2643b1=_0x2643b1[_0x3c83ea(0x213)](0x0,0x32);await _0x26aba8[_0x3c83ea(0x1bc)](_0x12d525,{'val':JSON[_0x3c83ea(0x201)](_0x2643b1),'ack':!![]});}catch(_0x40b09d){}}async function handlePrediction(_0x5935a1,_0x4b1239,_0x5d043d){const _0x1fd525=a1_0x457d;if(!_0x4b1239||_0x4b1239===_0x1fd525(0x212))return;let _0x5d0e49=_0x1fd525(0x232),_0x1cd589=0.6;try{const _0x358b61=await _0x5935a1[_0x1fd525(0x1b2)](_0x1fd525(0x1f8));if(_0x358b61&&_0x358b61[_0x1fd525(0x208)])_0x5d0e49=_0x358b61[_0x1fd525(0x208)];const _0x5bfaa9=await _0x5935a1[_0x1fd525(0x1b2)](_0x1fd525(0x1ca));if(_0x5bfaa9&&_0x5bfaa9[_0x1fd525(0x208)])_0x1cd589=_0x5bfaa9[_0x1fd525(0x208)];}catch(_0xf146ac){}if(_0x5d0e49===_0x1fd525(0x232)||_0x5d043d<_0x1cd589)return;const _0x4bdbdf=Date['now']();if(lastActions[_0x4b1239]&&_0x4bdbdf-lastActions[_0x4b1239]<COOLDOWN_MS)return;const _0x32f81d=_0x5935a1[_0x1fd525(0x240)][_0x1fd525(0x1f0)]||[],_0x62f840=normalize(_0x4b1239),_0x1d627d=_0x32f81d['find'](_0x48ef34=>normalize(_0x48ef34[_0x1fd525(0x228)])===_0x62f840&&(_0x48ef34[_0x1fd525(0x262)]===_0x1fd525(0x1f7)||_0x48ef34[_0x1fd525(0x262)]===_0x1fd525(0x1ce)||_0x48ef34['type']===_0x1fd525(0x1be)));if(!_0x1d627d)return;const _0x1182ee=await aiAgent[_0x1fd525(0x204)](_0x5935a1,_0x4b1239,_0x1d627d[_0x1fd525(0x1b8)],_0x5d043d);if(!_0x1182ee[_0x1fd525(0x251)])return;const _0x1a86d7=_0x1fd525(0x1b4)+_0x4b1239+'\x20->\x20Schalte\x20'+_0x1d627d[_0x1fd525(0x1b8)]+'\x20('+_0x1182ee[_0x1fd525(0x23d)]+')';await logAutomationAction(_0x5935a1,'['+_0x5d0e49[_0x1fd525(0x250)]()+']\x20'+_0x1a86d7);if(_0x5d0e49===_0x1fd525(0x1fd)){const _0x1cede0=await _0x5935a1[_0x1fd525(0x224)](_0x1d627d['id']);(!_0x1cede0||!_0x1cede0[_0x1fd525(0x208)]&&_0x1cede0[_0x1fd525(0x208)]!==!![])&&await _0x5935a1[_0x1fd525(0x244)](_0x1d627d['id'],!![]),lastActions[_0x4b1239]=_0x4bdbdf;}}async function findRelatedId(_0x337a9e,_0x440984,_0x213f28='setpoint'){const _0x5351d9=a1_0x457d;if(_0x213f28==='setpoint'&&_0x337a9e[_0x5351d9(0x240)]['thermostatMapping']){let _0x3a4768=_0x337a9e['config'][_0x5351d9(0x253)];if(typeof _0x3a4768===_0x5351d9(0x1ed))try{_0x3a4768=JSON['parse'](_0x3a4768);}catch(_0x2fe7f1){}if(_0x3a4768&&_0x3a4768[_0x440984])return _0x3a4768[_0x440984];}if(_0x213f28===_0x5351d9(0x1c5)&&_0x337a9e[_0x5351d9(0x240)][_0x5351d9(0x1cd)]){let _0x460d23=_0x337a9e[_0x5351d9(0x240)][_0x5351d9(0x1cd)];if(typeof _0x460d23===_0x5351d9(0x1ed))try{_0x460d23=JSON[_0x5351d9(0x221)](_0x460d23);}catch(_0x28d126){}if(_0x460d23&&_0x460d23[_0x440984])return _0x460d23[_0x440984];}let _0x37b8c2=[];if(_0x213f28===_0x5351d9(0x234))_0x37b8c2=[{'s':_0x5351d9(0x24f),'t':_0x5351d9(0x1ee)},{'s':'.1.TEMPERATURE','t':_0x5351d9(0x1ee)},{'s':_0x5351d9(0x23e),'t':_0x5351d9(0x1f6)},{'s':_0x5351d9(0x22a),'t':_0x5351d9(0x24d)},{'s':'local_temperature','t':_0x5351d9(0x1ad)},{'s':_0x5351d9(0x238),'t':_0x5351d9(0x1ea)},{'s':'temperature','t':_0x5351d9(0x24c)},{'s':'ACTUAL','t':'SET'},{'s':_0x5351d9(0x249),'t':_0x5351d9(0x21f)},{'s':'temperature','t':_0x5351d9(0x234)}];else _0x213f28===_0x5351d9(0x1c5)&&(_0x37b8c2=[{'s':'.1.ACTUAL_TEMPERATURE','t':_0x5351d9(0x21d)},{'s':_0x5351d9(0x23e),'t':'.1.LEVEL'},{'s':'.1.TEMPERATURE','t':_0x5351d9(0x1c9)},{'s':_0x5351d9(0x238),'t':'pi_heating_demand'},{'s':_0x5351d9(0x1d0),'t':'valve_position'},{'s':'temperature','t':_0x5351d9(0x1d7)}]);for(const _0x13253a of _0x37b8c2){if(_0x440984[_0x5351d9(0x202)](_0x13253a['s'])){const _0x3d8e1b=_0x440984[_0x5351d9(0x252)](_0x13253a['s'],_0x13253a['t']),_0x5b0e58=await _0x337a9e[_0x5351d9(0x265)](_0x3d8e1b);if(_0x5b0e58)return _0x3d8e1b;}}try{const _0x5c9f4d=_0x440984[_0x5351d9(0x1f1)]('.');if(_0x5c9f4d[_0x5351d9(0x1b0)]>0x2){const _0x33d864=_0x5c9f4d[_0x5351d9(0x213)](0x0,-0x1)[_0x5351d9(0x1e8)]('.'),_0x466050=await _0x337a9e[_0x5351d9(0x22e)](_0x33d864+'.*'),_0xe80037=[],_0x46e12c=_0x440984[_0x5351d9(0x1f1)](/[._]+/)[_0x5351d9(0x1d5)](_0x2a05bd=>![_0x5351d9(0x1e6),'0',_0x5351d9(0x241),'ist',_0x5351d9(0x1c2),_0x5351d9(0x1d0),_0x5351d9(0x20c),'sensor',_0x5351d9(0x273),_0x5351d9(0x225)][_0x5351d9(0x202)](_0x2a05bd[_0x5351d9(0x1da)]()));for(const [_0x409bd4,_0x34a540]of Object[_0x5351d9(0x21e)](_0x466050)){if(_0x409bd4===_0x440984)continue;if(_0x34a540&&_0x34a540[_0x5351d9(0x1f2)]){const _0x4b87c3=_0x409bd4[_0x5351d9(0x1da)](),_0x39ab39=(_0x34a540[_0x5351d9(0x1f2)][_0x5351d9(0x267)]||'')[_0x5351d9(0x1da)](),_0x85d61b=(_0x34a540[_0x5351d9(0x1f2)]['unit']||'')[_0x5351d9(0x1da)]();let _0x4bad0e=![];if(_0x213f28===_0x5351d9(0x234)&&_0x34a540[_0x5351d9(0x1f2)]['write']===!![])_0x4bad0e=_0x4b87c3[_0x5351d9(0x202)]('set')||_0x4b87c3[_0x5351d9(0x202)](_0x5351d9(0x1c8))||_0x4b87c3[_0x5351d9(0x202)](_0x5351d9(0x1df))||_0x39ab39['includes'](_0x5351d9(0x256))||_0x39ab39['includes'](_0x5351d9(0x1e5));else _0x213f28==='valve'&&(_0x4bad0e=_0x4b87c3[_0x5351d9(0x202)](_0x5351d9(0x1d7))||_0x4b87c3['includes'](_0x5351d9(0x1c5))||_0x4b87c3[_0x5351d9(0x202)]('stellwert')||_0x4b87c3['includes'](_0x5351d9(0x26c))||_0x39ab39[_0x5351d9(0x202)](_0x5351d9(0x266))||_0x39ab39[_0x5351d9(0x202)]('value.valve')||_0x85d61b[_0x5351d9(0x202)]('%'));if(_0x4bad0e){const _0x44232c=_0x409bd4[_0x5351d9(0x1f1)](/[._]+/)[_0x5351d9(0x223)](_0x417c36=>_0x417c36[_0x5351d9(0x1da)]());let _0x22efff=0x0;_0x46e12c[_0x5351d9(0x22c)](_0x5e0f29=>{const _0x45e2c8=_0x5351d9;if(_0x44232c[_0x45e2c8(0x202)](_0x5e0f29[_0x45e2c8(0x1da)]()))_0x22efff++;}),_0xe80037[_0x5351d9(0x1fc)]({'id':_0x409bd4,'score':_0x22efff});}}}if(_0xe80037[_0x5351d9(0x1b0)]>0x0){_0xe80037['sort']((_0x2ac2c7,_0x1dee2c)=>_0x1dee2c[_0x5351d9(0x219)]-_0x2ac2c7[_0x5351d9(0x219)]);if(_0xe80037[0x0][_0x5351d9(0x219)]>0x0)return _0xe80037[0x0]['id'];}}}catch(_0x5ece6e){}return null;}async function scanThermostats(_0x3f55fa){const _0x478ff8=a1_0x457d,_0x2cbd62=_0x3f55fa[_0x478ff8(0x240)]['devices']||[],_0x488ffe=[],_0x2272ca=_0x2cbd62[_0x478ff8(0x1d5)](_0x1189ec=>_0x1189ec['id']&&_0x1189ec['id'][_0x478ff8(0x202)]('temperature')||_0x1189ec['type']&&[_0x478ff8(0x1d0),_0x478ff8(0x1cb),_0x478ff8(0x21b)][_0x478ff8(0x202)](_0x1189ec[_0x478ff8(0x262)])||_0x1189ec[_0x478ff8(0x1b8)]&&_0x1189ec[_0x478ff8(0x1b8)][_0x478ff8(0x1da)]()['includes']('temp'));for(const _0x5e3fd5 of _0x2272ca){const _0xc15cfa=await findRelatedId(_0x3f55fa,_0x5e3fd5['id'],_0x478ff8(0x234)),_0x2515fd=await findRelatedId(_0x3f55fa,_0x5e3fd5['id'],'valve');let _0x3d0c85=_0x478ff8(0x1f9),_0x2472c2=![],_0x186958=_0x3f55fa[_0x478ff8(0x240)][_0x478ff8(0x253)]||{};if(typeof _0x186958===_0x478ff8(0x1ed))try{_0x186958=JSON[_0x478ff8(0x221)](_0x186958);}catch(_0x3a1499){}let _0x31f417=_0x3f55fa[_0x478ff8(0x240)][_0x478ff8(0x1cd)]||{};if(typeof _0x31f417===_0x478ff8(0x1ed))try{_0x31f417=JSON[_0x478ff8(0x221)](_0x31f417);}catch(_0x38427b){}if(_0x186958[_0x5e3fd5['id']]&&_0x186958[_0x5e3fd5['id']]===_0xc15cfa||_0x31f417[_0x5e3fd5['id']]&&_0x31f417[_0x5e3fd5['id']]===_0x2515fd)_0x3d0c85=_0x478ff8(0x1b7),_0x2472c2=!![];else(_0xc15cfa||_0x2515fd)&&(_0x3d0c85='Auto-Erkennung');_0x488ffe['push']({'room':_0x5e3fd5[_0x478ff8(0x228)]||'Unbekannt','sensorId':_0x5e3fd5['id'],'setpointId':_0xc15cfa||'-','valveId':_0x2515fd||'-','source':_0x3d0c85,'isManual':_0x2472c2,'status':_0xc15cfa&&_0x2515fd?_0x478ff8(0x26a):_0xc15cfa?'OK':_0x478ff8(0x25d)});}return _0x488ffe[_0x478ff8(0x236)]((_0x3f7560,_0x240a12)=>_0x3f7560[_0x478ff8(0x206)][_0x478ff8(0x222)](_0x240a12[_0x478ff8(0x206)]));}async function updateSchedulePreview(_0x3bafdd){const _0xe06ae4=a1_0x457d;if(!_0x3bafdd[_0xe06ae4(0x240)][_0xe06ae4(0x1b9)]||!_0x3bafdd[_0xe06ae4(0x240)][_0xe06ae4(0x264)])return;let _0x40b3ca={};try{const _0x4e01df=await _0x3bafdd[_0xe06ae4(0x1b2)](_0xe06ae4(0x26f));if(_0x4e01df&&_0x4e01df['val'])_0x40b3ca=JSON[_0xe06ae4(0x221)](_0x4e01df[_0xe06ae4(0x208)]);}catch(_0x411930){}const _0xac88b7=[],_0x1d918e=Date[_0xe06ae4(0x1c7)](),_0x248cec=0x30*0x3c*0x3c*0x3e8;try{const _0x1335f3=await _0x3bafdd['getForeignStateAsync'](_0x3bafdd['config'][_0xe06ae4(0x264)]+_0xe06ae4(0x1d1));if(!_0x1335f3||!_0x1335f3[_0xe06ae4(0x208)])return;const _0x52b2ae=JSON[_0xe06ae4(0x221)](_0x1335f3['val']),_0x1e84c3=_0x3bafdd[_0xe06ae4(0x240)][_0xe06ae4(0x259)]||[],_0x5eb241=_0x3bafdd[_0xe06ae4(0x240)][_0xe06ae4(0x1f0)]||[],_0x15f53b=new Set();_0x5eb241['forEach'](_0x3af0e5=>{const _0x1bb052=_0xe06ae4;if(_0x3af0e5[_0x1bb052(0x228)])_0x15f53b[_0x1bb052(0x1c4)](_0x3af0e5['location']);});for(const _0x59acde of _0x52b2ae){if(_0x59acde[_0xe06ae4(0x1d9)]&&_0x1e84c3[_0xe06ae4(0x1b0)]>0x0&&!_0x1e84c3[_0xe06ae4(0x202)](_0x59acde[_0xe06ae4(0x1d9)]))continue;const _0x3fe1fa=_0x59acde[_0xe06ae4(0x1fa)]||_0x59acde[_0xe06ae4(0x243)]||_0x59acde[_0xe06ae4(0x1b6)];if(!_0x3fe1fa)continue;const _0x1a9efc=new Date(_0x3fe1fa),_0x5ef12c=_0x1a9efc[_0xe06ae4(0x26d)]();if(isNaN(_0x5ef12c))continue;if(_0x5ef12c<_0x1d918e)continue;if(_0x5ef12c>_0x1d918e+_0x248cec)continue;const _0xdc7f7c=(_0x59acde[_0xe06ae4(0x22f)]||_0x59acde[_0xe06ae4(0x230)]||'')[_0xe06ae4(0x1da)]();let _0xfc876f=![],_0x240f89=[],_0x23c120=_0x59acde['event']||_0x59acde[_0xe06ae4(0x230)]||_0xe06ae4(0x211);if(_0xdc7f7c[_0xe06ae4(0x202)](_0xe06ae4(0x227))||_0xdc7f7c[_0xe06ae4(0x202)](_0xe06ae4(0x25b))||_0xdc7f7c['includes'](_0xe06ae4(0x21c)))_0xfc876f=!![],_0x240f89=Array[_0xe06ae4(0x1ef)](_0x15f53b);else for(const _0x3ebf1b of _0x15f53b){if(_0xdc7f7c['includes'](_0x3ebf1b[_0xe06ae4(0x1da)]()))_0x240f89[_0xe06ae4(0x1fc)](_0x3ebf1b);}_0x240f89[_0xe06ae4(0x1b0)]>0x0&&_0x240f89[_0xe06ae4(0x22c)](_0x348db0=>{const _0xc147cd=_0xe06ae4;let _0x17e8c6=0x3c;if(_0xfc876f){let _0x50228c=0x0;Object[_0xc147cd(0x254)](_0x40b3ca)['forEach'](_0x12d7a3=>{if(_0x12d7a3>_0x50228c)_0x50228c=_0x12d7a3;}),_0x17e8c6=_0x50228c>0x0?_0x50228c:0x78;}else _0x17e8c6=getWarmupRobust(_0x40b3ca,_0x348db0);const _0x449238=new Date(_0x5ef12c-_0x17e8c6*0xea60);_0xac88b7['push']({'eventTime':_0x5ef12c,'triggerTime':_0x449238[_0xc147cd(0x26d)](),'room':_0x348db0,'minutes':_0x17e8c6,'reason':_0x23c120,'isGlobal':_0xfc876f});});}}catch(_0x30a867){}_0xac88b7[_0xe06ae4(0x236)]((_0x389868,_0x9b5d08)=>_0x389868['triggerTime']-_0x9b5d08[_0xe06ae4(0x1d3)]);const _0x1acff8=_0xac88b7[_0xe06ae4(0x213)](0x0,0x5);await _0x3bafdd[_0xe06ae4(0x1bc)]('analysis.energy.schedulePreview',{'val':JSON[_0xe06ae4(0x201)](_0x1acff8),'ack':!![]});}function a1_0x457d(_0x14edad,_0x5c2096){const _0x4459f4=a1_0xc26b();return a1_0x457d=function(_0x23bc6b,_0x430871){_0x23bc6b=_0x23bc6b-0x1ad;let _0xc26b3e=_0x4459f4[_0x23bc6b];return _0xc26b3e;},a1_0x457d(_0x14edad,_0x5c2096);}async function monitorEnforcements(_0x4f5bff){const _0x379c51=a1_0x457d;try{const _0x5e289a=_0x379c51(0x24b),_0x2bfc52=await _0x4f5bff['getStateAsync'](_0x5e289a);if(!_0x2bfc52||!_0x2bfc52[_0x379c51(0x208)])return;let _0x1eae7a=[];try{_0x1eae7a=JSON[_0x379c51(0x221)](_0x2bfc52['val']);}catch(_0x119352){return;}if(!Array[_0x379c51(0x1e1)](_0x1eae7a)||_0x1eae7a[_0x379c51(0x1b0)]===0x0)return;const _0x4aa0ae=Date['now'](),_0x33b45e=_0x4f5bff[_0x379c51(0x240)][_0x379c51(0x1f0)]||[];let _0x159050=![];for(let _0xdd077e=_0x1eae7a[_0x379c51(0x1b0)]-0x1;_0xdd077e>=0x0;_0xdd077e--){const _0x1d1057=_0x1eae7a[_0xdd077e];if(_0x4aa0ae>=_0x1d1057[_0x379c51(0x1ff)]){_0x4f5bff['log'][_0x379c51(0x1e4)](_0x379c51(0x245)+_0x1d1057[_0x379c51(0x206)]+_0x379c51(0x218)),_0x1eae7a['splice'](_0xdd077e,0x1),_0x159050=!![];continue;}const _0x38ea2f=_0x33b45e[_0x379c51(0x25f)](_0x534afb=>normalize(_0x534afb[_0x379c51(0x228)])===normalize(_0x1d1057[_0x379c51(0x206)])&&(_0x534afb[_0x379c51(0x262)]===_0x379c51(0x1d0)||_0x534afb[_0x379c51(0x262)]===_0x379c51(0x1cb)));if(_0x38ea2f){const _0x3c415d=await findRelatedId(_0x4f5bff,_0x38ea2f['id'],'setpoint');if(_0x3c415d){const _0x14b9ec=await _0x4f5bff[_0x379c51(0x224)](_0x3c415d);_0x14b9ec&&typeof _0x14b9ec['val']===_0x379c51(0x1eb)&&(_0x14b9ec['val']<0xf&&(_0x4f5bff[_0x379c51(0x1af)][_0x379c51(0x25e)]('ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x1d1057[_0x379c51(0x206)]+_0x379c51(0x1d8)+_0x14b9ec[_0x379c51(0x208)]+'Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20'+_0x1d1057[_0x379c51(0x1df)]+_0x379c51(0x20a)),await _0x4f5bff['setForeignStateAsync'](_0x3c415d,_0x1d1057[_0x379c51(0x1df)]),await logAutomationAction(_0x4f5bff,_0x379c51(0x200)+_0x1d1057[_0x379c51(0x206)]+':\x20'+_0x14b9ec[_0x379c51(0x208)]+'Â°C\x20->\x20'+_0x1d1057[_0x379c51(0x1df)]+_0x379c51(0x1b5))));}}}_0x159050&&await _0x4f5bff['setStateAsync'](_0x5e289a,{'val':JSON[_0x379c51(0x201)](_0x1eae7a),'ack':!![]});}catch(_0x4567d3){_0x4f5bff[_0x379c51(0x1af)][_0x379c51(0x1b3)](_0x379c51(0x1cf)+_0x4567d3[_0x379c51(0x24e)]);}}async function checkCalendarTriggers(_0x38a96c){const _0x4e537d=a1_0x457d;if(!_0x38a96c['config'][_0x4e537d(0x1b9)]||!_0x38a96c['config'][_0x4e537d(0x264)])return;await updateSchedulePreview(_0x38a96c);let _0x307dfe={},_0x5992b7={};try{const _0x160d13=await _0x38a96c[_0x4e537d(0x1b2)](_0x4e537d(0x26f));if(_0x160d13&&_0x160d13[_0x4e537d(0x208)])_0x307dfe=JSON[_0x4e537d(0x221)](_0x160d13['val']);const _0x15b479=await _0x38a96c[_0x4e537d(0x1b2)]('analysis.energy.warmupSources');if(_0x15b479&&_0x15b479[_0x4e537d(0x208)])_0x5992b7=JSON[_0x4e537d(0x221)](_0x15b479[_0x4e537d(0x208)]);}catch(_0x1b999b){}let _0xe79109={'default':0x15};try{const _0x1314f9=await _0x38a96c[_0x4e537d(0x1b2)]('analysis.energy.warmupTargets');if(_0x1314f9&&_0x1314f9[_0x4e537d(0x208)])_0xe79109=JSON[_0x4e537d(0x221)](_0x1314f9[_0x4e537d(0x208)]);}catch(_0x5f2820){}let _0x537176=[];try{const _0x3c013f=await _0x38a96c['getStateAsync']('analysis.energy.activeEnforcements');if(_0x3c013f&&_0x3c013f[_0x4e537d(0x208)])_0x537176=JSON[_0x4e537d(0x221)](_0x3c013f[_0x4e537d(0x208)]);}catch(_0x59e4c9){}try{const _0xf9bd7d=await _0x38a96c['getForeignStateAsync'](_0x38a96c[_0x4e537d(0x240)][_0x4e537d(0x264)]+'.data.table');if(!_0xf9bd7d||!_0xf9bd7d[_0x4e537d(0x208)])return;const _0xfb2496=JSON[_0x4e537d(0x221)](_0xf9bd7d['val']),_0x24c7b4=Date[_0x4e537d(0x1c7)](),_0x1098d3=_0x38a96c['config'][_0x4e537d(0x1f0)]||[],_0x1bff2b=_0x38a96c['config'][_0x4e537d(0x259)]||[];let _0x458fbe=![];for(const _0x30dadc of _0xfb2496){if(_0x30dadc[_0x4e537d(0x1d9)]&&_0x1bff2b['length']>0x0&&!_0x1bff2b[_0x4e537d(0x202)](_0x30dadc[_0x4e537d(0x1d9)]))continue;const _0x5ee964=_0x30dadc[_0x4e537d(0x1fa)]||_0x30dadc[_0x4e537d(0x243)]||_0x30dadc[_0x4e537d(0x1b6)];if(!_0x5ee964)continue;const _0x313100=new Date(_0x5ee964);if(isNaN(_0x313100[_0x4e537d(0x26d)]()))continue;const _0x2acf61=(_0x30dadc['event']||_0x30dadc['summary']||'')[_0x4e537d(0x1da)]();if(_0x2acf61['includes'](_0x4e537d(0x227))||_0x2acf61['includes'](_0x4e537d(0x25b))||_0x2acf61[_0x4e537d(0x202)](_0x4e537d(0x21c))){let _0x5e29cf=0x0;Object[_0x4e537d(0x254)](_0x307dfe)[_0x4e537d(0x22c)](_0x1ec677=>{if(_0x1ec677>_0x5e29cf)_0x5e29cf=_0x1ec677;});if(_0x5e29cf===0x0)_0x5e29cf=0x78;const _0x3d35d4=_0x313100[_0x4e537d(0x26d)]()-_0x5e29cf*0xea60;_0x24c7b4>=_0x3d35d4&&_0x24c7b4<_0x313100[_0x4e537d(0x26d)]()&&(_0x38a96c[_0x4e537d(0x1e9)]!==_0x4e537d(0x1d2)&&(_0x38a96c['log'][_0x4e537d(0x1e4)](_0x4e537d(0x246)+_0x5e29cf+'\x20min).'),await _0x38a96c[_0x4e537d(0x1bc)]('system.mode',{'val':'normal','ack':![]})));}for(const _0x39a3d0 of _0x1098d3){if(_0x39a3d0[_0x4e537d(0x228)]){const _0x403bee=_0x39a3d0[_0x4e537d(0x228)]['toLowerCase'](),_0x277901=(_0x39a3d0[_0x4e537d(0x1b8)]||'')[_0x4e537d(0x1da)]();let _0x399145=_0x2acf61[_0x4e537d(0x202)](_0x403bee);!_0x399145&&_0x277901['length']>0x3&&_0x2acf61['includes'](_0x277901)&&(_0x399145=!![]);if(_0x399145){const _0x2ecc99=getWarmupRobust(_0x307dfe,_0x39a3d0[_0x4e537d(0x228)]),_0x343744=_0x5992b7[_0x39a3d0['location']]||_0x4e537d(0x20f),_0x3cc68b=_0x313100[_0x4e537d(0x26d)]()-_0x2ecc99*0xea60;if(_0x24c7b4>=_0x3cc68b&&_0x24c7b4<_0x313100[_0x4e537d(0x26d)]()){const _0x27b927=lastActions['cal_'+_0x39a3d0[_0x4e537d(0x228)]];if(_0x27b927&&_0x24c7b4-_0x27b927<CAL_COOLDOWN_MS)continue;const _0x5b6931=await findRelatedId(_0x38a96c,_0x39a3d0['id'],'setpoint');if(_0x5b6931){let _0x10b27b=_0xe79109[_0x39a3d0['location']];if(_0x10b27b===undefined)_0x10b27b=_0xe79109[_0x4e537d(0x229)];if(_0x10b27b===undefined)_0x10b27b=0x15;const _0x453ecd=await _0x38a96c[_0x4e537d(0x224)](_0x5b6931);if(_0x453ecd&&typeof _0x453ecd['val']===_0x4e537d(0x1eb)&&_0x453ecd[_0x4e537d(0x208)]<_0x10b27b-0.5){_0x38a96c['log']['info'](_0x4e537d(0x258)+_0x343744+_0x4e537d(0x1e3)+_0x39a3d0[_0x4e537d(0x228)]+_0x4e537d(0x235)+_0x2acf61+_0x4e537d(0x1dd)+_0x10b27b+_0x4e537d(0x263)+_0x2ecc99+_0x4e537d(0x1fb)),await _0x38a96c[_0x4e537d(0x244)](_0x5b6931,_0x10b27b),await logAutomationAction(_0x38a96c,_0x4e537d(0x260)+_0x39a3d0[_0x4e537d(0x228)]+_0x4e537d(0x255)+_0x10b27b+_0x4e537d(0x25c)+_0x343744+')'),lastActions['cal_'+_0x39a3d0['location']]=_0x24c7b4;const _0x467513=_0x537176['findIndex'](_0x47a809=>_0x47a809['room']===_0x39a3d0[_0x4e537d(0x228)]);if(_0x467513!==-0x1)_0x537176[_0x4e537d(0x1f3)](_0x467513,0x1);_0x537176['push']({'room':_0x39a3d0[_0x4e537d(0x228)],'target':_0x10b27b,'until':_0x313100[_0x4e537d(0x26d)]()}),_0x458fbe=!![];}}}}}}}_0x458fbe&&await _0x38a96c[_0x4e537d(0x1bc)](_0x4e537d(0x24b),{'val':JSON[_0x4e537d(0x201)](_0x537176),'ack':!![]});}catch(_0x41902e){_0x38a96c[_0x4e537d(0x1af)][_0x4e537d(0x25e)](_0x4e537d(0x23c)+_0x41902e[_0x4e537d(0x24e)]);}}async function manageMpcIntervention(_0x423a02,_0x4b5774,_0x342c13){const _0x311910=a1_0x457d;try{const _0xb05d56=_0x311910(0x23f),_0x2f0941=await _0x423a02[_0x311910(0x1b2)](_0xb05d56);let _0xcbf15c=[];if(_0x2f0941&&_0x2f0941[_0x311910(0x208)])try{_0xcbf15c=JSON[_0x311910(0x221)](_0x2f0941['val']);}catch(_0x2d7ece){}const _0x56d557=_0xcbf15c[_0x311910(0x25a)](_0x4b5774);if(_0x342c13==='add')_0x56d557===-0x1&&(_0xcbf15c[_0x311910(0x1fc)](_0x4b5774),await _0x423a02[_0x311910(0x1bc)](_0xb05d56,{'val':JSON[_0x311910(0x201)](_0xcbf15c),'ack':!![]}));else _0x342c13===_0x311910(0x1ba)&&(_0x56d557!==-0x1&&(_0xcbf15c[_0x311910(0x1f3)](_0x56d557,0x1),await _0x423a02[_0x311910(0x1bc)](_0xb05d56,{'val':JSON[_0x311910(0x201)](_0xcbf15c),'ack':!![]})));}catch(_0x191fe2){}}async function cleanupGhostInterventions(_0x909a76){const _0x56b634=a1_0x457d;try{const _0x2f3942=_0x56b634(0x23f),_0x1aab1f=await _0x909a76['getStateAsync'](_0x2f3942);if(!_0x1aab1f||!_0x1aab1f[_0x56b634(0x208)])return;const _0x2d20ee=JSON['parse'](_0x1aab1f[_0x56b634(0x208)]);if(!Array[_0x56b634(0x1e1)](_0x2d20ee)||_0x2d20ee[_0x56b634(0x1b0)]===0x0)return;let _0x40a219={'default':0x15};try{const _0x5198e9=await _0x909a76[_0x56b634(0x1b2)]('analysis.energy.warmupTargets');if(_0x5198e9&&_0x5198e9['val'])_0x40a219=JSON[_0x56b634(0x221)](_0x5198e9['val']);}catch(_0x228163){}let _0x91c915=[];try{const _0x25ee47=await _0x909a76[_0x56b634(0x1b2)](_0x56b634(0x215));if(_0x25ee47&&_0x25ee47[_0x56b634(0x208)])_0x91c915=JSON[_0x56b634(0x221)](_0x25ee47['val']);}catch(_0x4b9570){}let _0x44febb={},_0x10303b=![];try{const _0x49fb70=await _0x909a76[_0x56b634(0x1b2)](_0x56b634(0x1bd));if(_0x49fb70&&_0x49fb70[_0x56b634(0x208)])_0x44febb=JSON['parse'](_0x49fb70[_0x56b634(0x208)]);}catch(_0x44bb77){}if(_0x44febb['_meta']){const _0x32c3bf=Date[_0x56b634(0x1c7)]();for(const [_0x15078c,_0x4ca444]of Object[_0x56b634(0x21e)](_0x44febb[_0x56b634(0x20d)])){_0x32c3bf-_0x4ca444>PENALTY_TTL&&(delete _0x44febb[_0x15078c],delete _0x44febb[_0x56b634(0x20d)][_0x15078c],_0x10303b=!![],_0x909a76['log']['info'](_0x56b634(0x1f5)+_0x15078c+_0x56b634(0x242)));}}const _0x196d93=_0x909a76[_0x56b634(0x240)][_0x56b634(0x1f0)]||[];let _0x208540=![];for(let _0x971fac=_0x2d20ee[_0x56b634(0x1b0)]-0x1;_0x971fac>=0x0;_0x971fac--){const _0x4479a7=_0x2d20ee[_0x971fac],_0x4b07a0=_0x196d93[_0x56b634(0x25f)](_0x33f5b6=>normalize(_0x33f5b6[_0x56b634(0x228)])===normalize(_0x4479a7)&&(_0x33f5b6['type']==='temperature'||_0x33f5b6['type']===_0x56b634(0x1cb)));if(!_0x4b07a0){_0x909a76[_0x56b634(0x1af)][_0x56b634(0x25e)](_0x56b634(0x1e2)+_0x4479a7+'\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.'),_0x2d20ee[_0x56b634(0x1f3)](_0x971fac,0x1),_0x208540=!![];continue;}if(_0x4b07a0){const _0x30c0f9=await findRelatedId(_0x909a76,_0x4b07a0['id'],_0x56b634(0x234)),_0x33e580=await _0x909a76[_0x56b634(0x224)](_0x4b07a0['id']);if(_0x30c0f9){const _0x15b4da=await _0x909a76[_0x56b634(0x224)](_0x30c0f9);if(_0x15b4da&&typeof _0x15b4da['val']===_0x56b634(0x1eb)){let _0x379dd4=![],_0x4f60e4='';Math[_0x56b634(0x1db)](_0x15b4da['val']-ECO_TEMP)>0.5&&(_0x379dd4=!![],_0x4f60e4=_0x56b634(0x22d));if(!_0x379dd4&&_0x33e580&&typeof _0x33e580[_0x56b634(0x208)]===_0x56b634(0x1eb)){const _0x193ecf=_0x40a219[_0x4479a7]||_0x40a219[_0x56b634(0x229)]||0x15;_0x33e580[_0x56b634(0x208)]<_0x193ecf+0.2&&(_0x379dd4=!![],_0x4f60e4=_0x56b634(0x268));}if(_0x379dd4){if(_0x4f60e4===_0x56b634(0x22d)){_0x909a76[_0x56b634(0x1af)]['info'](_0x56b634(0x1cc)+_0x4479a7+_0x56b634(0x1ec)+_0x15b4da[_0x56b634(0x208)]+_0x56b634(0x1dc)+ECO_TEMP+_0x56b634(0x24a));const _0x43cf67=lastActions[_0x56b634(0x269)+_0x4479a7],_0x5544e8=_0x43cf67&&Date[_0x56b634(0x1c7)]()-_0x43cf67<0x2*0x3c*0x3e8;if(!_0x5544e8&&_0x15b4da[_0x56b634(0x208)]>ECO_TEMP+0.5){_0x909a76[_0x56b634(0x220)]&&(_0x909a76[_0x56b634(0x1af)][_0x56b634(0x1e4)]('ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20'+_0x4479a7+_0x56b634(0x26e)),_0x909a76[_0x56b634(0x220)](_0x56b634(0x23a),{'room':_0x4479a7}));const _0x2adaa5=_0x4479a7+'_'+new Date()['getHours']();if(!_0x44febb[_0x2adaa5]){_0x44febb[_0x2adaa5]=0x1;if(!_0x44febb['_meta'])_0x44febb[_0x56b634(0x20d)]={};_0x44febb[_0x56b634(0x20d)][_0x2adaa5]=Date['now'](),_0x10303b=!![];}}else _0x5544e8&&_0x909a76[_0x56b634(0x1af)]['info'](_0x56b634(0x1e7)+_0x4479a7+_0x56b634(0x203));}else{if(_0x4f60e4==='too_cold'){let _0x9c8c21=![];if(_0x91c915[_0x56b634(0x25f)](_0x2678b4=>_0x2678b4[_0x56b634(0x206)]===_0x4479a7))_0x9c8c21=!![];const _0x3a48f0=_0x196d93[_0x56b634(0x1d5)](_0x1bdce2=>normalize(_0x1bdce2[_0x56b634(0x228)])===normalize(_0x4479a7)&&(_0x1bdce2[_0x56b634(0x262)]==='window'||_0x1bdce2[_0x56b634(0x262)]===_0x56b634(0x21b)||_0x1bdce2[_0x56b634(0x262)]===_0x56b634(0x217)));for(const _0x14a071 of _0x3a48f0){try{const _0xb2edad=await _0x909a76[_0x56b634(0x224)](_0x14a071['id']);if(_0xb2edad&&(_0xb2edad[_0x56b634(0x208)]===!![]||_0xb2edad['val']===0x1||String(_0xb2edad[_0x56b634(0x208)])[_0x56b634(0x1da)]()==='open'))_0x9c8c21=!![];}catch(_0x30fefd){}}if(_0x9c8c21)_0x909a76[_0x56b634(0x1af)]['info'](_0x56b634(0x205)+_0x4479a7+'\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.');else{const _0x452881=_0x40a219[_0x4479a7]||_0x40a219['default']||0x15;_0x909a76[_0x56b634(0x1af)][_0x56b634(0x1e4)]('ðŸš¨\x20[MPC\x20WATCHDOG]\x20'+_0x4479a7+_0x56b634(0x210)+_0x33e580[_0x56b634(0x208)]+_0x56b634(0x247)+(_0x452881+0.2)+_0x56b634(0x1b1)),await _0x909a76[_0x56b634(0x244)](_0x30c0f9,_0x452881),await logAutomationAction(_0x909a76,_0x56b634(0x216)+_0x4479a7+_0x56b634(0x231)+_0x452881+'Â°C'),lastActions['rescue_'+_0x4479a7]=Date['now']();}}}_0x2d20ee[_0x56b634(0x1f3)](_0x971fac,0x1),_0x208540=!![];}}}}}_0x208540&&await _0x909a76['setStateAsync'](_0x2f3942,{'val':JSON['stringify'](_0x2d20ee),'ack':!![]}),_0x10303b&&await _0x909a76[_0x56b634(0x1bc)](_0x56b634(0x1bd),{'val':JSON[_0x56b634(0x201)](_0x44febb),'ack':!![]});}catch(_0x5c335f){}}async function applyEnergySavings(_0x1ca1b2,_0x1f6998){const _0x4f0dd8=a1_0x457d;await cleanupGhostInterventions(_0x1ca1b2);if(!_0x1f6998||_0x1f6998['length']===0x0)return;const _0x3e34b8=_0x1ca1b2['config']['devices']||[],_0x40fe28=Date['now']();for(const _0x3297d8 of _0x1f6998){const _0x175ed9=_0x3297d8[_0x4f0dd8(0x206)],_0x49deae=_0x3297d8[_0x4f0dd8(0x23b)],_0xc772f4=_0x3297d8[_0x4f0dd8(0x1df)]||0x15;if(lastActions[_0x4f0dd8(0x1ae)+_0x175ed9]&&_0x40fe28-lastActions[_0x4f0dd8(0x1ae)+_0x175ed9]<RESCUE_LOCK_MS)continue;const _0x331d9e=_0x3e34b8[_0x4f0dd8(0x25f)](_0x524bfb=>normalize(_0x524bfb[_0x4f0dd8(0x228)])===normalize(_0x175ed9)&&(_0x524bfb[_0x4f0dd8(0x262)]==='temperature'||_0x524bfb[_0x4f0dd8(0x262)]===_0x4f0dd8(0x1cb)));if(!_0x331d9e)continue;const _0x4edbbb=await findRelatedId(_0x1ca1b2,_0x331d9e['id'],'setpoint');if(_0x4edbbb){if(lastActions[_0x4f0dd8(0x1de)+_0x175ed9]&&_0x40fe28-lastActions[_0x4f0dd8(0x1de)+_0x175ed9]<0x1e*0x3c*0x3e8)continue;const _0x55d4f7=await _0x1ca1b2[_0x4f0dd8(0x224)](_0x4edbbb);if(_0x55d4f7&&typeof _0x55d4f7[_0x4f0dd8(0x208)]===_0x4f0dd8(0x1eb)){const _0xf1392a=_0x55d4f7[_0x4f0dd8(0x208)];_0xf1392a!==ECO_TEMP&&await manageMpcIntervention(_0x1ca1b2,_0x175ed9,'remove');if(_0x49deae>0x1e)_0xf1392a>ECO_TEMP+0.5&&(_0x1ca1b2[_0x4f0dd8(0x1af)][_0x4f0dd8(0x1e4)](_0x4f0dd8(0x257)+_0x175ed9+_0x4f0dd8(0x1d8)+ECO_TEMP+_0x4f0dd8(0x207)+_0x49deae+_0x4f0dd8(0x261)),await _0x1ca1b2['setForeignStateAsync'](_0x4edbbb,ECO_TEMP),await manageMpcIntervention(_0x1ca1b2,_0x175ed9,'add'),lastActions[_0x4f0dd8(0x1de)+_0x175ed9]=_0x40fe28,await logAutomationAction(_0x1ca1b2,_0x4f0dd8(0x248)+_0x175ed9+_0x4f0dd8(0x270)+ECO_TEMP+'Â°C'));else _0x49deae<=0xf&&(_0xf1392a<_0xc772f4&&(_0x1ca1b2['log'][_0x4f0dd8(0x1e4)]('ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20'+_0x175ed9+_0x4f0dd8(0x1c6)+_0xc772f4+_0x4f0dd8(0x26b)),await _0x1ca1b2[_0x4f0dd8(0x244)](_0x4edbbb,_0xc772f4),await manageMpcIntervention(_0x1ca1b2,_0x175ed9,'remove'),lastActions['mpc_'+_0x175ed9]=_0x40fe28,await logAutomationAction(_0x1ca1b2,_0x4f0dd8(0x248)+_0x175ed9+_0x4f0dd8(0x20e)+_0xc772f4+'Â°C')));}}else _0x1ca1b2[_0x4f0dd8(0x1af)]['warn'](_0x4f0dd8(0x1bf)+_0x175ed9+_0x4f0dd8(0x1fe));}}module[a1_0xea7cd5(0x1f4)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};