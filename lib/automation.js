const a1_0x4bd5b5=a1_0x1710;(function(_0x1238ea,_0x4da2ae){const _0x16a6ce=a1_0x1710,_0x2b95e4=_0x1238ea();while(!![]){try{const _0x466e06=-parseInt(_0x16a6ce(0x219))/0x1*(parseInt(_0x16a6ce(0x1f8))/0x2)+-parseInt(_0x16a6ce(0x1ce))/0x3*(parseInt(_0x16a6ce(0x240))/0x4)+parseInt(_0x16a6ce(0x234))/0x5*(-parseInt(_0x16a6ce(0x24d))/0x6)+-parseInt(_0x16a6ce(0x233))/0x7*(parseInt(_0x16a6ce(0x24c))/0x8)+parseInt(_0x16a6ce(0x202))/0x9*(-parseInt(_0x16a6ce(0x26c))/0xa)+parseInt(_0x16a6ce(0x238))/0xb+parseInt(_0x16a6ce(0x226))/0xc;if(_0x466e06===_0x4da2ae)break;else _0x2b95e4['push'](_0x2b95e4['shift']());}catch(_0x5df76e){_0x2b95e4['push'](_0x2b95e4['shift']());}}}(a1_0x5cce,0x40600));const a1_0x47bf4e=(function(){let _0x1310c2=!![];return function(_0x4eb690,_0x11f22c){const _0x2fa7a3=_0x1310c2?function(){const _0x3d52f2=a1_0x1710;if(_0x11f22c){const _0x10b24d=_0x11f22c[_0x3d52f2(0x27a)](_0x4eb690,arguments);return _0x11f22c=null,_0x10b24d;}}:function(){};return _0x1310c2=![],_0x2fa7a3;};}()),a1_0xe70c04=a1_0x47bf4e(this,function(){const _0x30a9b2=a1_0x1710;return a1_0xe70c04[_0x30a9b2(0x207)]()[_0x30a9b2(0x1d6)](_0x30a9b2(0x24f))[_0x30a9b2(0x207)]()[_0x30a9b2(0x1f0)](a1_0xe70c04)[_0x30a9b2(0x1d6)](_0x30a9b2(0x24f));});a1_0xe70c04();'use strict';const aiAgent=require(a1_0x4bd5b5(0x212)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x10fb5d){const _0x26964e=a1_0x4bd5b5;if(!_0x10fb5d)return'';return _0x10fb5d[_0x26964e(0x251)]()[_0x26964e(0x23d)](/\s+/g,'')[_0x26964e(0x277)]();}function getWarmupRobust(_0x7e141e,_0x32320f){const _0x1756e6=a1_0x4bd5b5;if(!_0x7e141e||!_0x32320f)return 0x3c;if(_0x7e141e[_0x32320f]!==undefined)return _0x7e141e[_0x32320f];const _0x458c4e=_0x32320f[_0x1756e6(0x251)]()[_0x1756e6(0x23d)](/Ã¤/g,'ae')[_0x1756e6(0x23d)](/Ã¶/g,'oe')[_0x1756e6(0x23d)](/Ã¼/g,'ue')[_0x1756e6(0x23d)](/ÃŸ/g,'ss')[_0x1756e6(0x23d)](/\s+/g,'_')['replace'](/[^a-z0-9_]/g,'');if(_0x7e141e[_0x458c4e]!==undefined)return _0x7e141e[_0x458c4e];return 0x3c;}async function logAutomationAction(_0x3a514e,_0x38e8f3){const _0x14d525=a1_0x4bd5b5;await _0x3a514e[_0x14d525(0x210)](_0x14d525(0x252),{'val':_0x38e8f3,'ack':!![]});try{const _0x4aa445='analysis.automation.actionLog',_0x4f9b48=await _0x3a514e[_0x14d525(0x262)](_0x4aa445);let _0x4b74f8=[];if(_0x4f9b48&&_0x4f9b48['val'])try{_0x4b74f8=JSON[_0x14d525(0x1ee)](_0x4f9b48[_0x14d525(0x200)]);}catch(_0x4edb2e){}_0x4b74f8['unshift']({'ts':Date['now'](),'msg':_0x38e8f3});if(_0x4b74f8[_0x14d525(0x254)]>0x32)_0x4b74f8=_0x4b74f8['slice'](0x0,0x32);await _0x3a514e[_0x14d525(0x210)](_0x4aa445,{'val':JSON[_0x14d525(0x220)](_0x4b74f8),'ack':!![]});}catch(_0x23a42a){}}async function handlePrediction(_0x373436,_0x2432f2,_0x491905){const _0x1a62a0=a1_0x4bd5b5;if(!_0x2432f2||_0x2432f2===_0x1a62a0(0x25b))return;let _0x50ed2f='off',_0x2044d7=0.6;try{const _0x53110b=await _0x373436[_0x1a62a0(0x262)](_0x1a62a0(0x22a));if(_0x53110b&&_0x53110b[_0x1a62a0(0x200)])_0x50ed2f=_0x53110b[_0x1a62a0(0x200)];const _0x16f147=await _0x373436['getStateAsync'](_0x1a62a0(0x1e7));if(_0x16f147&&_0x16f147[_0x1a62a0(0x200)])_0x2044d7=_0x16f147[_0x1a62a0(0x200)];}catch(_0x129c8b){}if(_0x50ed2f===_0x1a62a0(0x256)||_0x491905<_0x2044d7)return;const _0x4d1b71=Date[_0x1a62a0(0x204)]();if(lastActions[_0x2432f2]&&_0x4d1b71-lastActions[_0x2432f2]<COOLDOWN_MS)return;const _0x300e10=_0x373436[_0x1a62a0(0x1d5)]['devices']||[],_0x427f90=normalize(_0x2432f2),_0x3fd0f4=_0x300e10[_0x1a62a0(0x23b)](_0x298eb7=>normalize(_0x298eb7['location'])===_0x427f90&&(_0x298eb7[_0x1a62a0(0x23e)]==='light'||_0x298eb7[_0x1a62a0(0x23e)]===_0x1a62a0(0x253)||_0x298eb7[_0x1a62a0(0x23e)]==='switch'));if(!_0x3fd0f4)return;const _0x1feef3=await aiAgent[_0x1a62a0(0x230)](_0x373436,_0x2432f2,_0x3fd0f4['name'],_0x491905);if(!_0x1feef3[_0x1a62a0(0x1e4)])return;const _0xaa79c8=_0x1a62a0(0x1e6)+_0x2432f2+_0x1a62a0(0x244)+_0x3fd0f4[_0x1a62a0(0x21f)]+'\x20('+_0x1feef3[_0x1a62a0(0x263)]+')';await logAutomationAction(_0x373436,'['+_0x50ed2f[_0x1a62a0(0x1ec)]()+']\x20'+_0xaa79c8);if(_0x50ed2f===_0x1a62a0(0x264)){const _0x3b64cb=await _0x373436[_0x1a62a0(0x266)](_0x3fd0f4['id']);(!_0x3b64cb||!_0x3b64cb[_0x1a62a0(0x200)]&&_0x3b64cb[_0x1a62a0(0x200)]!==!![])&&await _0x373436[_0x1a62a0(0x1da)](_0x3fd0f4['id'],!![]),lastActions[_0x2432f2]=_0x4d1b71;}}async function findRelatedId(_0x35646f,_0x523873,_0x2eede5=a1_0x4bd5b5(0x201)){const _0x4934e0=a1_0x4bd5b5;if(_0x2eede5==='setpoint'&&_0x35646f[_0x4934e0(0x1d5)][_0x4934e0(0x1cf)]){let _0xc09193=_0x35646f['config'][_0x4934e0(0x1cf)];if(typeof _0xc09193===_0x4934e0(0x221))try{_0xc09193=JSON['parse'](_0xc09193);}catch(_0x501533){}if(_0xc09193&&_0xc09193[_0x523873])return _0xc09193[_0x523873];}if(_0x2eede5===_0x4934e0(0x1d9)&&_0x35646f[_0x4934e0(0x1d5)]['valveMapping']){let _0xac7c16=_0x35646f[_0x4934e0(0x1d5)][_0x4934e0(0x1ff)];if(typeof _0xac7c16===_0x4934e0(0x221))try{_0xac7c16=JSON[_0x4934e0(0x1ee)](_0xac7c16);}catch(_0xa11003){}if(_0xac7c16&&_0xac7c16[_0x523873])return _0xac7c16[_0x523873];}let _0x152197=[];if(_0x2eede5==='setpoint')_0x152197=[{'s':'.1.ACTUAL_TEMPERATURE','t':_0x4934e0(0x275)},{'s':_0x4934e0(0x22d),'t':_0x4934e0(0x275)},{'s':_0x4934e0(0x22d),'t':'.4.SET_TEMPERATURE'},{'s':_0x4934e0(0x26b),'t':_0x4934e0(0x205)},{'s':'local_temperature','t':_0x4934e0(0x1f7)},{'s':_0x4934e0(0x20c),'t':_0x4934e0(0x22b)},{'s':_0x4934e0(0x1fc),'t':_0x4934e0(0x268)},{'s':_0x4934e0(0x229),'t':'SET'},{'s':'Ist','t':_0x4934e0(0x1ed)},{'s':_0x4934e0(0x1fc),'t':_0x4934e0(0x201)}];else _0x2eede5===_0x4934e0(0x1d9)&&(_0x152197=[{'s':'.1.ACTUAL_TEMPERATURE','t':_0x4934e0(0x224)},{'s':_0x4934e0(0x22d),'t':_0x4934e0(0x224)},{'s':'.1.TEMPERATURE','t':_0x4934e0(0x1fe)},{'s':'local_temperature','t':_0x4934e0(0x1e5)},{'s':_0x4934e0(0x1fc),'t':'valve_position'},{'s':_0x4934e0(0x1fc),'t':'level'}]);for(const _0x5a390d of _0x152197){if(_0x523873[_0x4934e0(0x236)](_0x5a390d['s'])){const _0x305927=_0x523873['replace'](_0x5a390d['s'],_0x5a390d['t']),_0x42754e=await _0x35646f[_0x4934e0(0x1d3)](_0x305927);if(_0x42754e)return _0x305927;}}try{const _0x4780a7=_0x523873[_0x4934e0(0x271)]('.');if(_0x4780a7['length']>0x2){const _0x19dbcd=_0x4780a7[_0x4934e0(0x24e)](0x0,-0x1)[_0x4934e0(0x206)]('.'),_0x4cde9c=await _0x35646f[_0x4934e0(0x26a)](_0x19dbcd+'.*'),_0x394bcc=[],_0x2548df=_0x523873[_0x4934e0(0x271)](/[._]+/)[_0x4934e0(0x1f1)](_0x23b748=>!['openknx','0',_0x4934e0(0x23a),_0x4934e0(0x228),_0x4934e0(0x274),_0x4934e0(0x1fc),_0x4934e0(0x272),_0x4934e0(0x21e),_0x4934e0(0x1e0),_0x4934e0(0x1d8)][_0x4934e0(0x236)](_0x23b748[_0x4934e0(0x251)]()));for(const [_0x341e34,_0x4d68f4]of Object[_0x4934e0(0x1fa)](_0x4cde9c)){if(_0x341e34===_0x523873)continue;if(_0x4d68f4&&_0x4d68f4[_0x4934e0(0x1d2)]){const _0x19f35e=_0x341e34[_0x4934e0(0x251)](),_0x57dd33=(_0x4d68f4[_0x4934e0(0x1d2)][_0x4934e0(0x223)]||'')[_0x4934e0(0x251)](),_0x3362b0=(_0x4d68f4[_0x4934e0(0x1d2)]['unit']||'')[_0x4934e0(0x251)]();let _0x5058bf=![];if(_0x2eede5===_0x4934e0(0x201)&&_0x4d68f4[_0x4934e0(0x1d2)]['write']===!![])_0x5058bf=_0x19f35e[_0x4934e0(0x236)]('set')||_0x19f35e[_0x4934e0(0x236)]('soll')||_0x19f35e['includes'](_0x4934e0(0x211))||_0x57dd33['includes']('level.temperature')||_0x57dd33[_0x4934e0(0x236)](_0x4934e0(0x25e));else _0x2eede5===_0x4934e0(0x1d9)&&(_0x5058bf=_0x19f35e['includes']('level')||_0x19f35e[_0x4934e0(0x236)]('valve')||_0x19f35e[_0x4934e0(0x236)]('stellwert')||_0x19f35e[_0x4934e0(0x236)](_0x4934e0(0x216))||_0x57dd33['includes'](_0x4934e0(0x1e9))||_0x57dd33[_0x4934e0(0x236)](_0x4934e0(0x218))||_0x3362b0[_0x4934e0(0x236)]('%'));if(_0x5058bf){const _0x231140=_0x341e34[_0x4934e0(0x271)](/[._]+/)[_0x4934e0(0x20b)](_0x2dde1f=>_0x2dde1f[_0x4934e0(0x251)]());let _0x430a30=0x0;_0x2548df[_0x4934e0(0x24a)](_0x526ebf=>{const _0x33b613=_0x4934e0;if(_0x231140['includes'](_0x526ebf[_0x33b613(0x251)]()))_0x430a30++;}),_0x394bcc[_0x4934e0(0x24b)]({'id':_0x341e34,'score':_0x430a30});}}}if(_0x394bcc[_0x4934e0(0x254)]>0x0){_0x394bcc['sort']((_0x555590,_0x1ca71c)=>_0x1ca71c[_0x4934e0(0x26f)]-_0x555590[_0x4934e0(0x26f)]);if(_0x394bcc[0x0][_0x4934e0(0x26f)]>0x0)return _0x394bcc[0x0]['id'];}}}catch(_0xf669ba){}return null;}async function scanThermostats(_0x533f33){const _0x583a4f=a1_0x4bd5b5,_0x15b632=_0x533f33[_0x583a4f(0x1d5)]['devices']||[],_0x208f3e=[],_0x1c4230=_0x15b632['filter'](_0xea0c8e=>_0xea0c8e['id']&&_0xea0c8e['id'][_0x583a4f(0x236)](_0x583a4f(0x1fc))||_0xea0c8e[_0x583a4f(0x23e)]&&['temperature',_0x583a4f(0x237),_0x583a4f(0x21e)][_0x583a4f(0x236)](_0xea0c8e[_0x583a4f(0x23e)])||_0xea0c8e[_0x583a4f(0x21f)]&&_0xea0c8e[_0x583a4f(0x21f)][_0x583a4f(0x251)]()[_0x583a4f(0x236)]('temp'));for(const _0x21cca2 of _0x1c4230){const _0x13d275=await findRelatedId(_0x533f33,_0x21cca2['id'],_0x583a4f(0x201)),_0x327f82=await findRelatedId(_0x533f33,_0x21cca2['id'],_0x583a4f(0x1d9));let _0x301bde='Nicht\x20gefunden',_0x259c8e=![],_0x550d46=_0x533f33[_0x583a4f(0x1d5)]['thermostatMapping']||{};if(typeof _0x550d46===_0x583a4f(0x221))try{_0x550d46=JSON[_0x583a4f(0x1ee)](_0x550d46);}catch(_0x545d09){}let _0x10e35a=_0x533f33[_0x583a4f(0x1d5)]['valveMapping']||{};if(typeof _0x10e35a===_0x583a4f(0x221))try{_0x10e35a=JSON[_0x583a4f(0x1ee)](_0x10e35a);}catch(_0x360d07){}if(_0x550d46[_0x21cca2['id']]&&_0x550d46[_0x21cca2['id']]===_0x13d275||_0x10e35a[_0x21cca2['id']]&&_0x10e35a[_0x21cca2['id']]===_0x327f82)_0x301bde='Manuelles\x20Mapping',_0x259c8e=!![];else(_0x13d275||_0x327f82)&&(_0x301bde='Auto-Erkennung');_0x208f3e[_0x583a4f(0x24b)]({'room':_0x21cca2[_0x583a4f(0x1f2)]||_0x583a4f(0x1fb),'sensorId':_0x21cca2['id'],'setpointId':_0x13d275||'-','valveId':_0x327f82||'-','source':_0x301bde,'isManual':_0x259c8e,'status':_0x13d275&&_0x327f82?_0x583a4f(0x22c):_0x13d275?'OK':_0x583a4f(0x1c4)});}return _0x208f3e[_0x583a4f(0x21c)]((_0x1e35a6,_0x4e04cb)=>_0x1e35a6[_0x583a4f(0x27e)]['localeCompare'](_0x4e04cb[_0x583a4f(0x27e)]));}async function updateSchedulePreview(_0xb5e31b){const _0x48fdb1=a1_0x4bd5b5;if(!_0xb5e31b[_0x48fdb1(0x1d5)][_0x48fdb1(0x27d)]||!_0xb5e31b['config'][_0x48fdb1(0x265)])return;let _0x990876={};try{const _0x80ef9=await _0xb5e31b['getStateAsync'](_0x48fdb1(0x249));if(_0x80ef9&&_0x80ef9[_0x48fdb1(0x200)])_0x990876=JSON[_0x48fdb1(0x1ee)](_0x80ef9['val']);}catch(_0x507006){}const _0x60c3e=[],_0x119742=Date[_0x48fdb1(0x204)](),_0x207103=0x30*0x3c*0x3c*0x3e8;try{const _0x168551=await _0xb5e31b[_0x48fdb1(0x266)](_0xb5e31b['config'][_0x48fdb1(0x265)]+_0x48fdb1(0x261));if(!_0x168551||!_0x168551[_0x48fdb1(0x200)])return;const _0x4b1799=JSON[_0x48fdb1(0x1ee)](_0x168551[_0x48fdb1(0x200)]),_0x2d95e0=_0xb5e31b[_0x48fdb1(0x1d5)][_0x48fdb1(0x222)]||[],_0xada82a=_0xb5e31b[_0x48fdb1(0x1d5)][_0x48fdb1(0x243)]||[],_0x85818d=new Set();_0xada82a[_0x48fdb1(0x24a)](_0x3ad24c=>{const _0x33a132=_0x48fdb1;if(_0x3ad24c['location'])_0x85818d[_0x33a132(0x267)](_0x3ad24c[_0x33a132(0x1f2)]);});for(const _0x20b83b of _0x4b1799){if(_0x20b83b[_0x48fdb1(0x1ea)]&&_0x2d95e0[_0x48fdb1(0x254)]>0x0&&!_0x2d95e0[_0x48fdb1(0x236)](_0x20b83b[_0x48fdb1(0x1ea)]))continue;const _0x398b3c=_0x20b83b['_date']||_0x20b83b[_0x48fdb1(0x25f)]||_0x20b83b[_0x48fdb1(0x25a)];if(!_0x398b3c)continue;const _0x2e3ff8=new Date(_0x398b3c),_0x19c85f=_0x2e3ff8[_0x48fdb1(0x20a)]();if(isNaN(_0x19c85f))continue;if(_0x19c85f<_0x119742)continue;if(_0x19c85f>_0x119742+_0x207103)continue;const _0x5d4b8a=(_0x20b83b['event']||_0x20b83b['summary']||'')['toLowerCase']();let _0x536dbe=![],_0x1c475a=[],_0x12d1a4=_0x20b83b[_0x48fdb1(0x1de)]||_0x20b83b[_0x48fdb1(0x242)]||'Unbekannt';if(_0x5d4b8a[_0x48fdb1(0x236)]('urlaub\x20ende')||_0x5d4b8a[_0x48fdb1(0x236)](_0x48fdb1(0x1d1))||_0x5d4b8a[_0x48fdb1(0x236)]('ankunft'))_0x536dbe=!![],_0x1c475a=Array[_0x48fdb1(0x1c7)](_0x85818d);else for(const _0x13ece8 of _0x85818d){if(_0x5d4b8a[_0x48fdb1(0x236)](_0x13ece8[_0x48fdb1(0x251)]()))_0x1c475a[_0x48fdb1(0x24b)](_0x13ece8);}_0x1c475a[_0x48fdb1(0x254)]>0x0&&_0x1c475a[_0x48fdb1(0x24a)](_0x527737=>{const _0x1acb91=_0x48fdb1;let _0x5dbebb=0x3c;if(_0x536dbe){let _0x5cb7a6=0x0;Object[_0x1acb91(0x27b)](_0x990876)['forEach'](_0x5a4ba9=>{if(_0x5a4ba9>_0x5cb7a6)_0x5cb7a6=_0x5a4ba9;}),_0x5dbebb=_0x5cb7a6>0x0?_0x5cb7a6:0x78;}else _0x5dbebb=getWarmupRobust(_0x990876,_0x527737);const _0x447871=new Date(_0x19c85f-_0x5dbebb*0xea60);_0x60c3e[_0x1acb91(0x24b)]({'eventTime':_0x19c85f,'triggerTime':_0x447871['getTime'](),'room':_0x527737,'minutes':_0x5dbebb,'reason':_0x12d1a4,'isGlobal':_0x536dbe});});}}catch(_0x5bd448){}_0x60c3e[_0x48fdb1(0x21c)]((_0x24dada,_0x2ae7c6)=>_0x24dada[_0x48fdb1(0x241)]-_0x2ae7c6[_0x48fdb1(0x241)]);const _0x253aa6=_0x60c3e['slice'](0x0,0x5);await _0xb5e31b['setStateAsync'](_0x48fdb1(0x1db),{'val':JSON[_0x48fdb1(0x220)](_0x253aa6),'ack':!![]});}async function monitorEnforcements(_0x4e9548){const _0x58329c=a1_0x4bd5b5;try{const _0x14efc2=_0x58329c(0x1cd),_0x3bdb9f=await _0x4e9548[_0x58329c(0x262)](_0x14efc2);if(!_0x3bdb9f||!_0x3bdb9f[_0x58329c(0x200)])return;let _0x588708=[];try{_0x588708=JSON[_0x58329c(0x1ee)](_0x3bdb9f[_0x58329c(0x200)]);}catch(_0x43a5b6){return;}if(!Array[_0x58329c(0x1c6)](_0x588708)||_0x588708[_0x58329c(0x254)]===0x0)return;const _0x309df1=Date[_0x58329c(0x204)](),_0x3f7d75=_0x4e9548['config'][_0x58329c(0x243)]||[];let _0x286db6=![];for(let _0x417a99=_0x588708[_0x58329c(0x254)]-0x1;_0x417a99>=0x0;_0x417a99--){const _0x5a336f=_0x588708[_0x417a99];if(_0x309df1>=_0x5a336f['until']){_0x4e9548[_0x58329c(0x1cb)][_0x58329c(0x22e)]('ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20'+_0x5a336f[_0x58329c(0x27e)]+'\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.'),_0x588708[_0x58329c(0x239)](_0x417a99,0x1),_0x286db6=!![];continue;}const _0x219f11=_0x3f7d75[_0x58329c(0x23b)](_0x495897=>normalize(_0x495897[_0x58329c(0x1f2)])===normalize(_0x5a336f[_0x58329c(0x27e)])&&(_0x495897['type']==='temperature'||_0x495897['type']==='thermostat'));if(_0x219f11){const _0x94f679=await findRelatedId(_0x4e9548,_0x219f11['id'],_0x58329c(0x201));if(_0x94f679){const _0x1cddd5=await _0x4e9548[_0x58329c(0x266)](_0x94f679);_0x1cddd5&&typeof _0x1cddd5[_0x58329c(0x200)]===_0x58329c(0x1d7)&&(_0x1cddd5[_0x58329c(0x200)]<0xf&&(_0x4e9548[_0x58329c(0x1cb)][_0x58329c(0x1f9)](_0x58329c(0x246)+_0x5a336f[_0x58329c(0x27e)]+_0x58329c(0x250)+_0x1cddd5[_0x58329c(0x200)]+'Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20'+_0x5a336f[_0x58329c(0x211)]+_0x58329c(0x21b)),await _0x4e9548[_0x58329c(0x1da)](_0x94f679,_0x5a336f[_0x58329c(0x211)]),await logAutomationAction(_0x4e9548,_0x58329c(0x1e2)+_0x5a336f['room']+':\x20'+_0x1cddd5['val']+_0x58329c(0x27c)+_0x5a336f['target']+_0x58329c(0x25d))));}}}_0x286db6&&await _0x4e9548[_0x58329c(0x210)](_0x14efc2,{'val':JSON['stringify'](_0x588708),'ack':!![]});}catch(_0x4fa79d){_0x4e9548['log']['error'](_0x58329c(0x257)+_0x4fa79d[_0x58329c(0x1d0)]);}}function a1_0x1710(_0x24dd41,_0x41e5b0){const _0x551ccc=a1_0x5cce();return a1_0x1710=function(_0xe70c04,_0x47bf4e){_0xe70c04=_0xe70c04-0x1c3;let _0x5cce4d=_0x551ccc[_0xe70c04];return _0x5cce4d;},a1_0x1710(_0x24dd41,_0x41e5b0);}async function checkCalendarTriggers(_0x35da0a){const _0x2a1cd2=a1_0x4bd5b5;if(!_0x35da0a[_0x2a1cd2(0x1d5)][_0x2a1cd2(0x27d)]||!_0x35da0a[_0x2a1cd2(0x1d5)][_0x2a1cd2(0x265)])return;await updateSchedulePreview(_0x35da0a);let _0x4af6f2={},_0x38bd8c={};try{const _0x1784ee=await _0x35da0a['getStateAsync'](_0x2a1cd2(0x249));if(_0x1784ee&&_0x1784ee[_0x2a1cd2(0x200)])_0x4af6f2=JSON[_0x2a1cd2(0x1ee)](_0x1784ee[_0x2a1cd2(0x200)]);const _0x16cff0=await _0x35da0a['getStateAsync'](_0x2a1cd2(0x1f6));if(_0x16cff0&&_0x16cff0[_0x2a1cd2(0x200)])_0x38bd8c=JSON[_0x2a1cd2(0x1ee)](_0x16cff0[_0x2a1cd2(0x200)]);}catch(_0x220777){}let _0x4d5c8b={'default':0x15};try{const _0xcf3d39=await _0x35da0a[_0x2a1cd2(0x262)](_0x2a1cd2(0x20e));if(_0xcf3d39&&_0xcf3d39['val'])_0x4d5c8b=JSON[_0x2a1cd2(0x1ee)](_0xcf3d39[_0x2a1cd2(0x200)]);}catch(_0x3f83eb){}let _0x96171e=[];try{const _0x22ee43=await _0x35da0a[_0x2a1cd2(0x262)](_0x2a1cd2(0x1cd));if(_0x22ee43&&_0x22ee43[_0x2a1cd2(0x200)])_0x96171e=JSON[_0x2a1cd2(0x1ee)](_0x22ee43[_0x2a1cd2(0x200)]);}catch(_0x2a2a88){}try{const _0x53d71e=await _0x35da0a[_0x2a1cd2(0x266)](_0x35da0a[_0x2a1cd2(0x1d5)][_0x2a1cd2(0x265)]+_0x2a1cd2(0x261));if(!_0x53d71e||!_0x53d71e['val'])return;const _0xbf4a5a=JSON['parse'](_0x53d71e[_0x2a1cd2(0x200)]),_0x3db9ef=Date[_0x2a1cd2(0x204)](),_0x4a7741=_0x35da0a[_0x2a1cd2(0x1d5)][_0x2a1cd2(0x243)]||[],_0x33e296=_0x35da0a[_0x2a1cd2(0x1d5)][_0x2a1cd2(0x222)]||[];let _0x15385e=![];for(const _0x1ec670 of _0xbf4a5a){if(_0x1ec670['_calName']&&_0x33e296[_0x2a1cd2(0x254)]>0x0&&!_0x33e296[_0x2a1cd2(0x236)](_0x1ec670[_0x2a1cd2(0x1ea)]))continue;const _0x48ca87=_0x1ec670[_0x2a1cd2(0x214)]||_0x1ec670[_0x2a1cd2(0x25f)]||_0x1ec670['date'];if(!_0x48ca87)continue;const _0x2c7d25=new Date(_0x48ca87);if(isNaN(_0x2c7d25[_0x2a1cd2(0x20a)]()))continue;const _0x177e49=(_0x1ec670['event']||_0x1ec670[_0x2a1cd2(0x242)]||'')[_0x2a1cd2(0x251)]();if(_0x177e49[_0x2a1cd2(0x236)](_0x2a1cd2(0x1c5))||_0x177e49[_0x2a1cd2(0x236)](_0x2a1cd2(0x1d1))||_0x177e49[_0x2a1cd2(0x236)]('ankunft')){let _0x46f593=0x0;Object['values'](_0x4af6f2)[_0x2a1cd2(0x24a)](_0xc14817=>{if(_0xc14817>_0x46f593)_0x46f593=_0xc14817;});if(_0x46f593===0x0)_0x46f593=0x78;const _0x3b5973=_0x2c7d25['getTime']()-_0x46f593*0xea60;_0x3db9ef>=_0x3b5973&&_0x3db9ef<_0x2c7d25[_0x2a1cd2(0x20a)]()&&(_0x35da0a['currentSystemMode']!=='normal'&&(_0x35da0a[_0x2a1cd2(0x1cb)][_0x2a1cd2(0x22e)](_0x2a1cd2(0x25c)+_0x46f593+_0x2a1cd2(0x1f5)),await _0x35da0a[_0x2a1cd2(0x210)](_0x2a1cd2(0x22f),{'val':_0x2a1cd2(0x273),'ack':![]})));}for(const _0x18b93f of _0x4a7741){if(_0x18b93f[_0x2a1cd2(0x1f2)]){const _0x225f81=_0x18b93f[_0x2a1cd2(0x1f2)][_0x2a1cd2(0x251)](),_0x182b30=(_0x18b93f[_0x2a1cd2(0x21f)]||'')[_0x2a1cd2(0x251)]();let _0x211588=_0x177e49[_0x2a1cd2(0x236)](_0x225f81);!_0x211588&&_0x182b30[_0x2a1cd2(0x254)]>0x3&&_0x177e49['includes'](_0x182b30)&&(_0x211588=!![]);if(_0x211588){const _0x5a6c8e=getWarmupRobust(_0x4af6f2,_0x18b93f['location']),_0x2637fd=_0x38bd8c[_0x18b93f['location']]||_0x2a1cd2(0x1ca),_0x54bd28=_0x2c7d25['getTime']()-_0x5a6c8e*0xea60;if(_0x3db9ef>=_0x54bd28&&_0x3db9ef<_0x2c7d25[_0x2a1cd2(0x20a)]()){const _0x1e1015=lastActions[_0x2a1cd2(0x1cc)+_0x18b93f['location']];if(_0x1e1015&&_0x3db9ef-_0x1e1015<CAL_COOLDOWN_MS)continue;const _0x34b9f1=await findRelatedId(_0x35da0a,_0x18b93f['id'],_0x2a1cd2(0x201));if(_0x34b9f1){let _0xccd9c8=_0x4d5c8b[_0x18b93f[_0x2a1cd2(0x1f2)]];if(_0xccd9c8===undefined)_0xccd9c8=_0x4d5c8b[_0x2a1cd2(0x1c3)];if(_0xccd9c8===undefined)_0xccd9c8=0x15;const _0x326818=await _0x35da0a[_0x2a1cd2(0x266)](_0x34b9f1);if(_0x326818&&typeof _0x326818[_0x2a1cd2(0x200)]===_0x2a1cd2(0x1d7)&&_0x326818[_0x2a1cd2(0x200)]<_0xccd9c8-0.5){_0x35da0a[_0x2a1cd2(0x1cb)][_0x2a1cd2(0x22e)](_0x2a1cd2(0x260)+_0x2637fd+_0x2a1cd2(0x215)+_0x18b93f['location']+'\x27\x20(Match:\x20'+_0x177e49+_0x2a1cd2(0x270)+_0xccd9c8+_0x2a1cd2(0x20d)+_0x5a6c8e+_0x2a1cd2(0x1f5)),await _0x35da0a[_0x2a1cd2(0x1da)](_0x34b9f1,_0xccd9c8),await logAutomationAction(_0x35da0a,_0x2a1cd2(0x26e)+_0x18b93f[_0x2a1cd2(0x1f2)]+_0x2a1cd2(0x255)+_0xccd9c8+_0x2a1cd2(0x217)+_0x2637fd+')'),lastActions['cal_'+_0x18b93f[_0x2a1cd2(0x1f2)]]=_0x3db9ef;const _0x11bc35=_0x96171e[_0x2a1cd2(0x1eb)](_0x2321b2=>_0x2321b2[_0x2a1cd2(0x27e)]===_0x18b93f[_0x2a1cd2(0x1f2)]);if(_0x11bc35!==-0x1)_0x96171e[_0x2a1cd2(0x239)](_0x11bc35,0x1);_0x96171e[_0x2a1cd2(0x24b)]({'room':_0x18b93f['location'],'target':_0xccd9c8,'until':_0x2c7d25[_0x2a1cd2(0x20a)]()}),_0x15385e=!![];}}}}}}}_0x15385e&&await _0x35da0a[_0x2a1cd2(0x210)](_0x2a1cd2(0x1cd),{'val':JSON[_0x2a1cd2(0x220)](_0x96171e),'ack':!![]});}catch(_0x16e885){_0x35da0a['log'][_0x2a1cd2(0x1f9)]('Calendar\x20Check\x20Error:\x20'+_0x16e885[_0x2a1cd2(0x1d0)]);}}async function manageMpcIntervention(_0x4c3690,_0x3aa128,_0x24bbbe){const _0x4a9ee8=a1_0x4bd5b5;try{const _0x26eeb3=_0x4a9ee8(0x1d4),_0x4cfe3d=await _0x4c3690['getStateAsync'](_0x26eeb3);let _0x2b81ee=[];if(_0x4cfe3d&&_0x4cfe3d[_0x4a9ee8(0x200)])try{_0x2b81ee=JSON['parse'](_0x4cfe3d[_0x4a9ee8(0x200)]);}catch(_0x44ea10){}const _0x3209e9=_0x2b81ee[_0x4a9ee8(0x259)](_0x3aa128);if(_0x24bbbe===_0x4a9ee8(0x267))_0x3209e9===-0x1&&(_0x2b81ee['push'](_0x3aa128),await _0x4c3690[_0x4a9ee8(0x210)](_0x26eeb3,{'val':JSON['stringify'](_0x2b81ee),'ack':!![]}));else _0x24bbbe===_0x4a9ee8(0x26d)&&(_0x3209e9!==-0x1&&(_0x2b81ee['splice'](_0x3209e9,0x1),await _0x4c3690[_0x4a9ee8(0x210)](_0x26eeb3,{'val':JSON['stringify'](_0x2b81ee),'ack':!![]})));}catch(_0x2f16f7){}}function a1_0x5cce(){const _0x3dad20=['\x20->\x20','off','Enforcement\x20Monitor\x20Error:\x20','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','indexOf','date','Unknown','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','Â°C\x20(Kalender-Schutz)','thermostat.setpoint','eventStart','ðŸ“…\x20SMART\x20SCHEDULE\x20[','.data.table','getStateAsync','reason','active','calendarInstance','getForeignStateAsync','add','target_temperature','exports','getForeignObjectsAsync','ACTUAL_TEMPERATURE','33710bOxcmc','remove','[CAL]\x20','score',')\x20aktiv.\x20Heize\x20auf\x20','split','actual','normal','wert','.1.SET_POINT_TEMPERATURE','\x20min)','trim','Â°C).\x20Entferne\x20Status.','getHours','apply','values','Â°C\x20->\x20','useCalendar','room','default','Fehlt','urlaub\x20ende','isArray','from','sendToPythonWrapper','[WATCHDOG]\x20','Classic','log','cal_','analysis.energy.activeEnforcements','3wKywUc','thermostatMapping','message','rÃ¼ckkehr','common','getForeignObjectAsync','analysis.energy.mpcActiveInterventions','config','search','number','state','valve','setForeignStateAsync','analysis.energy.schedulePreview','analysis.energy.ventilationAlerts','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','event','analysis.energy.rlPenalties','messwert',':\x20Absenkung\x20auf\x20','[FORCE]\x20','manual','approved','pi_heating_demand','PrÃ¤diktion:\x20','analysis.automation.confidenceThreshold','rescue_','level.valve','_calName','findIndex','toUpperCase','Soll','parse','Â°C\x20<\x20','constructor','filter','location','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','mpc_','\x20min).','analysis.energy.warmupSources','occupied_heating_setpoint','50ROgWBO','warn','entries','Unbekannt','temperature','\x20gefunden!','.4.VALVE_STATE','valveMapping','val','setpoint','747gKmotX','\x20wurde\x20manuell\x20erhÃ¶ht.','now','SET_POINT_TEMPERATURE','join','toString','Â°C!\x20(Puffer\x20leer).','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','getTime','map','local_temperature','Â°C\x20(Vorlauf:\x20','analysis.energy.warmupTargets','abs','setStateAsync','target','./ai_agent','minutes_safe','_date',']:\x20Raum-Trigger\x20\x27','position','Â°C\x20(via\x20','value.valve','13852iPsoJN','open','Â°C.','sort',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','sensor','name','stringify','string','calendarSelection','role','.1.LEVEL','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','18945600zLVkLs','too_cold','ist','ACTUAL','analysis.automation.mode','current_heating_setpoint','PERFECT','.1.TEMPERATURE','info','system.mode','consultButler','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','_meta','5397XNokCI','2945stdcZt','\x20ist\x20auf\x20','includes','thermostat','202169vUPazX','splice','hm-rpc','find','\x20erreicht\x20Limit\x20(','replace','type','TRAIN_RL_PENALTY','1022356RBPjsi','triggerTime','summary','devices','\x20->\x20Schalte\x20','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','[MPC]\x20','analysis.energy.warmupTimes','forEach','push','1504NaIWnj','3126flghKG','slice','(((.+)+)+)+$','\x20auf\x20','toLowerCase','analysis.automation.lastAction','dimmer','length'];a1_0x5cce=function(){return _0x3dad20;};return a1_0x5cce();}async function cleanupGhostInterventions(_0x46f72d){const _0x3dae64=a1_0x4bd5b5;try{const _0x155565=_0x3dae64(0x1d4),_0x449aa8=await _0x46f72d['getStateAsync'](_0x155565);if(!_0x449aa8||!_0x449aa8[_0x3dae64(0x200)])return;const _0x4d47ca=JSON[_0x3dae64(0x1ee)](_0x449aa8[_0x3dae64(0x200)]);if(!Array['isArray'](_0x4d47ca)||_0x4d47ca[_0x3dae64(0x254)]===0x0)return;let _0x1813cc={'default':0x15};try{const _0x2d40a8=await _0x46f72d[_0x3dae64(0x262)](_0x3dae64(0x20e));if(_0x2d40a8&&_0x2d40a8[_0x3dae64(0x200)])_0x1813cc=JSON[_0x3dae64(0x1ee)](_0x2d40a8[_0x3dae64(0x200)]);}catch(_0x8ea9b6){}let _0x35ed46=[];try{const _0x316e1a=await _0x46f72d[_0x3dae64(0x262)](_0x3dae64(0x1dc));if(_0x316e1a&&_0x316e1a[_0x3dae64(0x200)])_0x35ed46=JSON[_0x3dae64(0x1ee)](_0x316e1a[_0x3dae64(0x200)]);}catch(_0xeaf224){}let _0x195595={},_0x4aa9c0=![];try{const _0x17d458=await _0x46f72d[_0x3dae64(0x262)](_0x3dae64(0x1df));if(_0x17d458&&_0x17d458[_0x3dae64(0x200)])_0x195595=JSON[_0x3dae64(0x1ee)](_0x17d458[_0x3dae64(0x200)]);}catch(_0x313fbb){}if(_0x195595[_0x3dae64(0x232)]){const _0x5e5697=Date[_0x3dae64(0x204)]();for(const [_0x176bb4,_0x4b6943]of Object[_0x3dae64(0x1fa)](_0x195595[_0x3dae64(0x232)])){_0x5e5697-_0x4b6943>PENALTY_TTL&&(delete _0x195595[_0x176bb4],delete _0x195595['_meta'][_0x176bb4],_0x4aa9c0=!![],_0x46f72d[_0x3dae64(0x1cb)][_0x3dae64(0x22e)]('ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27'+_0x176bb4+_0x3dae64(0x225)));}}const _0x168f7d=_0x46f72d[_0x3dae64(0x1d5)][_0x3dae64(0x243)]||[];let _0x159413=![];for(let _0x380e90=_0x4d47ca[_0x3dae64(0x254)]-0x1;_0x380e90>=0x0;_0x380e90--){const _0x2b0f16=_0x4d47ca[_0x380e90],_0x45678d=_0x168f7d[_0x3dae64(0x23b)](_0x4d3d22=>normalize(_0x4d3d22[_0x3dae64(0x1f2)])===normalize(_0x2b0f16)&&(_0x4d3d22[_0x3dae64(0x23e)]==='temperature'||_0x4d3d22[_0x3dae64(0x23e)]===_0x3dae64(0x237)));if(!_0x45678d){_0x46f72d[_0x3dae64(0x1cb)][_0x3dae64(0x1f9)]('ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27'+_0x2b0f16+_0x3dae64(0x247)),_0x4d47ca[_0x3dae64(0x239)](_0x380e90,0x1),_0x159413=!![];continue;}if(_0x45678d){const _0x49bba0=await findRelatedId(_0x46f72d,_0x45678d['id'],_0x3dae64(0x201)),_0x1fc44f=await _0x46f72d[_0x3dae64(0x266)](_0x45678d['id']);if(_0x49bba0){const _0x3222da=await _0x46f72d['getForeignStateAsync'](_0x49bba0);if(_0x3222da&&typeof _0x3222da[_0x3dae64(0x200)]===_0x3dae64(0x1d7)){let _0x3f7fc0=![],_0x1d3a45='';Math[_0x3dae64(0x20f)](_0x3222da[_0x3dae64(0x200)]-ECO_TEMP)>0.5&&(_0x3f7fc0=!![],_0x1d3a45=_0x3dae64(0x1e3));if(!_0x3f7fc0&&_0x1fc44f&&typeof _0x1fc44f[_0x3dae64(0x200)]===_0x3dae64(0x1d7)){const _0x984cb7=_0x1813cc[_0x2b0f16]||_0x1813cc[_0x3dae64(0x1c3)]||0x15;_0x1fc44f[_0x3dae64(0x200)]<_0x984cb7+0.2&&(_0x3f7fc0=!![],_0x1d3a45='too_cold');}if(_0x3f7fc0){if(_0x1d3a45===_0x3dae64(0x1e3)){_0x46f72d['log'][_0x3dae64(0x22e)](_0x3dae64(0x209)+_0x2b0f16+_0x3dae64(0x235)+_0x3222da['val']+'Â°C\x20(nicht\x20'+ECO_TEMP+_0x3dae64(0x278));const _0x4ddc0c=lastActions[_0x3dae64(0x1cc)+_0x2b0f16],_0x1b81fa=_0x4ddc0c&&Date['now']()-_0x4ddc0c<0x2*0x3c*0x3e8;if(!_0x1b81fa&&_0x3222da[_0x3dae64(0x200)]>ECO_TEMP+0.5){_0x46f72d['sendToPythonWrapper']&&(_0x46f72d['log'][_0x3dae64(0x22e)]('ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20'+_0x2b0f16+_0x3dae64(0x203)),_0x46f72d[_0x3dae64(0x1c8)](_0x3dae64(0x23f),{'room':_0x2b0f16}));const _0x450e99=_0x2b0f16+'_'+new Date()[_0x3dae64(0x279)]();if(!_0x195595[_0x450e99]){_0x195595[_0x450e99]=0x1;if(!_0x195595[_0x3dae64(0x232)])_0x195595[_0x3dae64(0x232)]={};_0x195595[_0x3dae64(0x232)][_0x450e99]=Date[_0x3dae64(0x204)](),_0x4aa9c0=!![];}}else _0x1b81fa&&_0x46f72d[_0x3dae64(0x1cb)][_0x3dae64(0x22e)]('ðŸ“…\x20[MPC\x20INFO]\x20'+_0x2b0f16+_0x3dae64(0x231));}else{if(_0x1d3a45===_0x3dae64(0x227)){let _0x17af9e=![];if(_0x35ed46[_0x3dae64(0x23b)](_0x16c761=>_0x16c761[_0x3dae64(0x27e)]===_0x2b0f16))_0x17af9e=!![];const _0x2634e0=_0x168f7d['filter'](_0x1bb017=>normalize(_0x1bb017[_0x3dae64(0x1f2)])===normalize(_0x2b0f16)&&(_0x1bb017[_0x3dae64(0x23e)]==='window'||_0x1bb017['type']===_0x3dae64(0x21e)||_0x1bb017[_0x3dae64(0x23e)]==='contact'));for(const _0x36a85b of _0x2634e0){try{const _0x13cdfa=await _0x46f72d[_0x3dae64(0x266)](_0x36a85b['id']);if(_0x13cdfa&&(_0x13cdfa['val']===!![]||_0x13cdfa[_0x3dae64(0x200)]===0x1||String(_0x13cdfa[_0x3dae64(0x200)])[_0x3dae64(0x251)]()===_0x3dae64(0x21a)))_0x17af9e=!![];}catch(_0x396da0){}}if(_0x17af9e)_0x46f72d[_0x3dae64(0x1cb)]['info'](_0x3dae64(0x1f3)+_0x2b0f16+_0x3dae64(0x1dd));else{const _0x541bed=_0x1813cc[_0x2b0f16]||_0x1813cc[_0x3dae64(0x1c3)]||0x15;_0x46f72d[_0x3dae64(0x1cb)][_0x3dae64(0x22e)]('ðŸš¨\x20[MPC\x20WATCHDOG]\x20'+_0x2b0f16+_0x3dae64(0x23c)+_0x1fc44f[_0x3dae64(0x200)]+_0x3dae64(0x1ef)+(_0x541bed+0.2)+'Â°C).\x20Sparmodus\x20beendet!'),await _0x46f72d[_0x3dae64(0x1da)](_0x49bba0,_0x541bed),await logAutomationAction(_0x46f72d,_0x3dae64(0x1c9)+_0x2b0f16+_0x3dae64(0x21d)+_0x541bed+'Â°C'),lastActions[_0x3dae64(0x1e8)+_0x2b0f16]=Date[_0x3dae64(0x204)]();}}}_0x4d47ca['splice'](_0x380e90,0x1),_0x159413=!![];}}}}}_0x159413&&await _0x46f72d[_0x3dae64(0x210)](_0x155565,{'val':JSON[_0x3dae64(0x220)](_0x4d47ca),'ack':!![]}),_0x4aa9c0&&await _0x46f72d[_0x3dae64(0x210)](_0x3dae64(0x1df),{'val':JSON[_0x3dae64(0x220)](_0x195595),'ack':!![]});}catch(_0x6ab223){}}async function applyEnergySavings(_0x164afc,_0x1cb449){const _0x581bb6=a1_0x4bd5b5;await cleanupGhostInterventions(_0x164afc);if(!_0x1cb449||_0x1cb449['length']===0x0)return;const _0x3a1581=_0x164afc[_0x581bb6(0x1d5)][_0x581bb6(0x243)]||[],_0x2bc854=Date['now']();for(const _0x1cf749 of _0x1cb449){const _0x26f6bc=_0x1cf749['room'],_0x48662b=_0x1cf749[_0x581bb6(0x213)],_0x315223=_0x1cf749[_0x581bb6(0x211)]||0x15;if(lastActions[_0x581bb6(0x1e8)+_0x26f6bc]&&_0x2bc854-lastActions[_0x581bb6(0x1e8)+_0x26f6bc]<RESCUE_LOCK_MS)continue;const _0x2dac03=_0x3a1581[_0x581bb6(0x23b)](_0x452569=>normalize(_0x452569[_0x581bb6(0x1f2)])===normalize(_0x26f6bc)&&(_0x452569[_0x581bb6(0x23e)]==='temperature'||_0x452569[_0x581bb6(0x23e)]===_0x581bb6(0x237)));if(!_0x2dac03)continue;const _0x7dfe7a=await findRelatedId(_0x164afc,_0x2dac03['id'],_0x581bb6(0x201));if(_0x7dfe7a){if(lastActions[_0x581bb6(0x1f4)+_0x26f6bc]&&_0x2bc854-lastActions['mpc_'+_0x26f6bc]<0x1e*0x3c*0x3e8)continue;const _0x8c2c49=await _0x164afc[_0x581bb6(0x266)](_0x7dfe7a);if(_0x8c2c49&&typeof _0x8c2c49[_0x581bb6(0x200)]===_0x581bb6(0x1d7)){const _0x3b4788=_0x8c2c49[_0x581bb6(0x200)];_0x3b4788!==ECO_TEMP&&await manageMpcIntervention(_0x164afc,_0x26f6bc,_0x581bb6(0x26d));if(_0x48662b>0x1e)_0x3b4788>ECO_TEMP+0.5&&(_0x164afc[_0x581bb6(0x1cb)][_0x581bb6(0x22e)](_0x581bb6(0x258)+_0x26f6bc+_0x581bb6(0x250)+ECO_TEMP+'Â°C!\x20(Puffer:\x20'+_0x48662b+_0x581bb6(0x276)),await _0x164afc[_0x581bb6(0x1da)](_0x7dfe7a,ECO_TEMP),await manageMpcIntervention(_0x164afc,_0x26f6bc,_0x581bb6(0x267)),lastActions[_0x581bb6(0x1f4)+_0x26f6bc]=_0x2bc854,await logAutomationAction(_0x164afc,'[MPC]\x20'+_0x26f6bc+_0x581bb6(0x1e1)+ECO_TEMP+'Â°C'));else _0x48662b<=0xf&&(_0x3b4788<_0x315223&&(_0x164afc['log'][_0x581bb6(0x22e)]('ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20'+_0x26f6bc+'\x20wieder\x20auf\x20'+_0x315223+_0x581bb6(0x208)),await _0x164afc[_0x581bb6(0x1da)](_0x7dfe7a,_0x315223),await manageMpcIntervention(_0x164afc,_0x26f6bc,'remove'),lastActions['mpc_'+_0x26f6bc]=_0x2bc854,await logAutomationAction(_0x164afc,_0x581bb6(0x248)+_0x26f6bc+':\x20Aufheizen\x20auf\x20'+_0x315223+'Â°C')));}}else _0x164afc[_0x581bb6(0x1cb)][_0x581bb6(0x1f9)](_0x581bb6(0x245)+_0x26f6bc+_0x581bb6(0x1fd));}}module[a1_0x4bd5b5(0x269)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};