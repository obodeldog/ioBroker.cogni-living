const a1_0x479ede=a1_0x6b45;(function(_0xad0e2b,_0x57f7bf){const _0x4f9cde=a1_0x6b45,_0x528a96=_0xad0e2b();while(!![]){try{const _0x54f32b=-parseInt(_0x4f9cde(0xff))/0x1*(parseInt(_0x4f9cde(0x139))/0x2)+parseInt(_0x4f9cde(0x16b))/0x3*(parseInt(_0x4f9cde(0xe1))/0x4)+-parseInt(_0x4f9cde(0x122))/0x5+-parseInt(_0x4f9cde(0x157))/0x6*(parseInt(_0x4f9cde(0x13e))/0x7)+-parseInt(_0x4f9cde(0x129))/0x8*(parseInt(_0x4f9cde(0x190))/0x9)+parseInt(_0x4f9cde(0x159))/0xa+parseInt(_0x4f9cde(0x155))/0xb;if(_0x54f32b===_0x57f7bf)break;else _0x528a96['push'](_0x528a96['shift']());}catch(_0x5c09cb){_0x528a96['push'](_0x528a96['shift']());}}}(a1_0x15da,0xbd862));const a1_0x424dd8=(function(){let _0x121de7=!![];return function(_0x44cdc1,_0xd006e9){const _0x15dd72=_0x121de7?function(){const _0x156f32=a1_0x6b45;if(_0xd006e9){const _0x372977=_0xd006e9[_0x156f32(0xee)](_0x44cdc1,arguments);return _0xd006e9=null,_0x372977;}}:function(){};return _0x121de7=![],_0x15dd72;};}()),a1_0x43deaa=a1_0x424dd8(this,function(){const _0x3d6373=a1_0x6b45;return a1_0x43deaa['toString']()['search'](_0x3d6373(0xec))[_0x3d6373(0x130)]()['constructor'](a1_0x43deaa)[_0x3d6373(0x102)](_0x3d6373(0xec));});function a1_0x6b45(_0x577757,_0x4b3117){const _0x282400=a1_0x15da();return a1_0x6b45=function(_0x43deaa,_0x424dd8){_0x43deaa=_0x43deaa-0xdb;let _0x15da63=_0x282400[_0x43deaa];return _0x15da63;},a1_0x6b45(_0x577757,_0x4b3117);}a1_0x43deaa();'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x9d61f3){const _0x255793=a1_0x6b45;if(!_0x9d61f3)return'';return _0x9d61f3[_0x255793(0x107)]()[_0x255793(0xf1)](/\s+/g,'')[_0x255793(0x174)]();}function getWarmupRobust(_0x2b3dcc,_0x10aa6f){const _0x42a25e=a1_0x6b45;if(!_0x2b3dcc||!_0x10aa6f)return 0x3c;if(_0x2b3dcc[_0x10aa6f]!==undefined)return _0x2b3dcc[_0x10aa6f];const _0x189790=_0x10aa6f[_0x42a25e(0x107)]()[_0x42a25e(0xf1)](/√§/g,'ae')[_0x42a25e(0xf1)](/√∂/g,'oe')['replace'](/√º/g,'ue')[_0x42a25e(0xf1)](/√ü/g,'ss')[_0x42a25e(0xf1)](/\s+/g,'_')[_0x42a25e(0xf1)](/[^a-z0-9_]/g,'');if(_0x2b3dcc[_0x189790]!==undefined)return _0x2b3dcc[_0x189790];return 0x3c;}async function logAutomationAction(_0xe1c088,_0x4374a7){const _0x4471e2=a1_0x6b45;await _0xe1c088['setStateAsync']('analysis.automation.lastAction',{'val':_0x4374a7,'ack':!![]});try{const _0x3251f0='analysis.automation.actionLog',_0x55da0e=await _0xe1c088['getStateAsync'](_0x3251f0);let _0x3840b9=[];if(_0x55da0e&&_0x55da0e[_0x4471e2(0x164)])try{_0x3840b9=JSON['parse'](_0x55da0e[_0x4471e2(0x164)]);}catch(_0x56caef){}_0x3840b9[_0x4471e2(0x14a)]({'ts':Date[_0x4471e2(0xe8)](),'msg':_0x4374a7});if(_0x3840b9[_0x4471e2(0x188)]>0x32)_0x3840b9=_0x3840b9[_0x4471e2(0xde)](0x0,0x32);await _0xe1c088['setStateAsync'](_0x3251f0,{'val':JSON['stringify'](_0x3840b9),'ack':!![]});}catch(_0x300a27){}}async function handlePrediction(_0x2acc90,_0x4cea10,_0x2d1fcf){const _0x2d2cbe=a1_0x6b45;if(!_0x4cea10||_0x4cea10===_0x2d2cbe(0xe5))return;let _0x403615='off',_0x4309da=0.6;try{const _0x1d85b4=await _0x2acc90['getStateAsync']('analysis.automation.mode');if(_0x1d85b4&&_0x1d85b4[_0x2d2cbe(0x164)])_0x403615=_0x1d85b4[_0x2d2cbe(0x164)];const _0xd81c4a=await _0x2acc90[_0x2d2cbe(0x132)](_0x2d2cbe(0x16f));if(_0xd81c4a&&_0xd81c4a[_0x2d2cbe(0x164)])_0x4309da=_0xd81c4a[_0x2d2cbe(0x164)];}catch(_0xb1a5c4){}if(_0x403615===_0x2d2cbe(0x18d)||_0x2d1fcf<_0x4309da)return;const _0x31879f=Date[_0x2d2cbe(0xe8)]();if(lastActions[_0x4cea10]&&_0x31879f-lastActions[_0x4cea10]<COOLDOWN_MS)return;const _0x2141fb=_0x2acc90[_0x2d2cbe(0x13b)][_0x2d2cbe(0x105)]||[],_0x469bb4=normalize(_0x4cea10),_0x568e42=_0x2141fb[_0x2d2cbe(0x11c)](_0x1fb721=>normalize(_0x1fb721[_0x2d2cbe(0x147)])===_0x469bb4&&(_0x1fb721[_0x2d2cbe(0x133)]==='light'||_0x1fb721[_0x2d2cbe(0x133)]===_0x2d2cbe(0x13d)||_0x1fb721[_0x2d2cbe(0x133)]===_0x2d2cbe(0x148)));if(!_0x568e42)return;const _0x1d8da2=await aiAgent[_0x2d2cbe(0x171)](_0x2acc90,_0x4cea10,_0x568e42[_0x2d2cbe(0x198)],_0x2d1fcf);if(!_0x1d8da2['approved'])return;const _0x11470b=_0x2d2cbe(0x118)+_0x4cea10+_0x2d2cbe(0x194)+_0x568e42['name']+'\x20('+_0x1d8da2[_0x2d2cbe(0x175)]+')';await logAutomationAction(_0x2acc90,'['+_0x403615[_0x2d2cbe(0x14e)]()+']\x20'+_0x11470b);if(_0x403615===_0x2d2cbe(0xfe)){const _0x58e478=await _0x2acc90[_0x2d2cbe(0x16d)](_0x568e42['id']);(!_0x58e478||!_0x58e478[_0x2d2cbe(0x164)]&&_0x58e478[_0x2d2cbe(0x164)]!==!![])&&await _0x2acc90['setForeignStateAsync'](_0x568e42['id'],!![]),lastActions[_0x4cea10]=_0x31879f;}}async function findRelatedId(_0x5d1c7f,_0x2459d5,_0x28b600=a1_0x479ede(0x17e)){const _0xe8c99c=a1_0x479ede;if(_0x28b600===_0xe8c99c(0x17e)&&_0x5d1c7f['config'][_0xe8c99c(0x11f)]){let _0x1d76b0=_0x5d1c7f[_0xe8c99c(0x13b)][_0xe8c99c(0x11f)];if(typeof _0x1d76b0===_0xe8c99c(0x140))try{_0x1d76b0=JSON[_0xe8c99c(0x15c)](_0x1d76b0);}catch(_0x4fedd5){}if(_0x1d76b0&&_0x1d76b0[_0x2459d5])return _0x1d76b0[_0x2459d5];}if(_0x28b600==='valve'&&_0x5d1c7f[_0xe8c99c(0x13b)]['valveMapping']){let _0x3a5c42=_0x5d1c7f[_0xe8c99c(0x13b)]['valveMapping'];if(typeof _0x3a5c42===_0xe8c99c(0x140))try{_0x3a5c42=JSON[_0xe8c99c(0x15c)](_0x3a5c42);}catch(_0x45b968){}if(_0x3a5c42&&_0x3a5c42[_0x2459d5])return _0x3a5c42[_0x2459d5];}let _0x43a129=[];if(_0x28b600===_0xe8c99c(0x17e))_0x43a129=[{'s':_0xe8c99c(0x116),'t':_0xe8c99c(0xf5)},{'s':_0xe8c99c(0x152),'t':'.1.SET_POINT_TEMPERATURE'},{'s':'.1.TEMPERATURE','t':_0xe8c99c(0xf9)},{'s':_0xe8c99c(0x162),'t':_0xe8c99c(0x178)},{'s':_0xe8c99c(0x100),'t':_0xe8c99c(0x16a)},{'s':_0xe8c99c(0x100),'t':_0xe8c99c(0x18e)},{'s':_0xe8c99c(0x19c),'t':_0xe8c99c(0xe3)},{'s':_0xe8c99c(0x19a),'t':_0xe8c99c(0x109)},{'s':_0xe8c99c(0x151),'t':_0xe8c99c(0x189)},{'s':_0xe8c99c(0x19c),'t':_0xe8c99c(0x17e)}];else _0x28b600===_0xe8c99c(0x12c)&&(_0x43a129=[{'s':_0xe8c99c(0x116),'t':_0xe8c99c(0x111)},{'s':_0xe8c99c(0x152),'t':_0xe8c99c(0x111)},{'s':_0xe8c99c(0x152),'t':'.4.VALVE_STATE'},{'s':_0xe8c99c(0x100),'t':_0xe8c99c(0x124)},{'s':_0xe8c99c(0x19c),'t':_0xe8c99c(0xf8)},{'s':'temperature','t':_0xe8c99c(0x131)}]);for(const _0x26d63e of _0x43a129){if(_0x2459d5[_0xe8c99c(0x177)](_0x26d63e['s'])){const _0x4e3f36=_0x2459d5[_0xe8c99c(0xf1)](_0x26d63e['s'],_0x26d63e['t']),_0x15d3b2=await _0x5d1c7f[_0xe8c99c(0x11e)](_0x4e3f36);if(_0x15d3b2)return _0x4e3f36;}}try{const _0xd23e51=_0x2459d5[_0xe8c99c(0xf0)]('.');if(_0xd23e51[_0xe8c99c(0x188)]>0x2){const _0x103b8d=_0xd23e51[_0xe8c99c(0xde)](0x0,-0x1)[_0xe8c99c(0x126)]('.'),_0x7e9c9d=await _0x5d1c7f[_0xe8c99c(0x167)](_0x103b8d+'.*'),_0x2ac1cf=[],_0x24951f=_0x2459d5['split'](/[._]+/)[_0xe8c99c(0x10d)](_0x1a09ed=>![_0xe8c99c(0xfd),'0',_0xe8c99c(0x168),_0xe8c99c(0x153),_0xe8c99c(0x120),_0xe8c99c(0x19c),_0xe8c99c(0x141),'sensor',_0xe8c99c(0x183),_0xe8c99c(0x135)][_0xe8c99c(0x177)](_0x1a09ed[_0xe8c99c(0x107)]()));for(const [_0x212da8,_0x1de62c]of Object[_0xe8c99c(0xf3)](_0x7e9c9d)){if(_0x212da8===_0x2459d5)continue;if(_0x1de62c&&_0x1de62c[_0xe8c99c(0xeb)]){const _0x225f5a=_0x212da8[_0xe8c99c(0x107)](),_0x31a9b2=(_0x1de62c['common']['role']||'')['toLowerCase'](),_0x5086ee=(_0x1de62c[_0xe8c99c(0xeb)]['unit']||'')[_0xe8c99c(0x107)]();let _0x3a5f88=![];if(_0x28b600===_0xe8c99c(0x17e)&&_0x1de62c[_0xe8c99c(0xeb)][_0xe8c99c(0x19b)]===!![])_0x3a5f88=_0x225f5a[_0xe8c99c(0x177)](_0xe8c99c(0x12a))||_0x225f5a[_0xe8c99c(0x177)]('soll')||_0x225f5a[_0xe8c99c(0x177)](_0xe8c99c(0x184))||_0x31a9b2[_0xe8c99c(0x177)](_0xe8c99c(0x117))||_0x31a9b2[_0xe8c99c(0x177)](_0xe8c99c(0x173));else _0x28b600===_0xe8c99c(0x12c)&&(_0x3a5f88=_0x225f5a['includes'](_0xe8c99c(0x131))||_0x225f5a[_0xe8c99c(0x177)](_0xe8c99c(0x12c))||_0x225f5a[_0xe8c99c(0x177)](_0xe8c99c(0xf4))||_0x225f5a['includes'](_0xe8c99c(0x18c))||_0x31a9b2[_0xe8c99c(0x177)]('level.valve')||_0x31a9b2[_0xe8c99c(0x177)]('value.valve')||_0x5086ee['includes']('%'));if(_0x3a5f88){const _0x4edfd5=_0x212da8[_0xe8c99c(0xf0)](/[._]+/)['map'](_0x36615a=>_0x36615a[_0xe8c99c(0x107)]());let _0x56b27c=0x0;_0x24951f[_0xe8c99c(0x160)](_0xbc9178=>{const _0x2c7a0a=_0xe8c99c;if(_0x4edfd5[_0x2c7a0a(0x177)](_0xbc9178['toLowerCase']()))_0x56b27c++;}),_0x2ac1cf[_0xe8c99c(0x110)]({'id':_0x212da8,'score':_0x56b27c});}}}if(_0x2ac1cf['length']>0x0){_0x2ac1cf[_0xe8c99c(0x156)]((_0x3067e5,_0x3b5bf2)=>_0x3b5bf2[_0xe8c99c(0x149)]-_0x3067e5[_0xe8c99c(0x149)]);if(_0x2ac1cf[0x0][_0xe8c99c(0x149)]>0x0)return _0x2ac1cf[0x0]['id'];}}}catch(_0x18070e){}return null;}async function scanThermostats(_0x5d4c30){const _0x31264c=a1_0x479ede,_0x3f70a6=_0x5d4c30[_0x31264c(0x13b)][_0x31264c(0x105)]||[],_0x7dc613=[],_0xbac051=_0x3f70a6[_0x31264c(0x10d)](_0x503c0d=>_0x503c0d['id']&&_0x503c0d['id']['includes'](_0x31264c(0x19c))||_0x503c0d[_0x31264c(0x133)]&&[_0x31264c(0x19c),_0x31264c(0x11d),_0x31264c(0x14b)][_0x31264c(0x177)](_0x503c0d[_0x31264c(0x133)])||_0x503c0d[_0x31264c(0x198)]&&_0x503c0d[_0x31264c(0x198)][_0x31264c(0x107)]()['includes'](_0x31264c(0xe0)));for(const _0x36f121 of _0xbac051){const _0x2f4439=await findRelatedId(_0x5d4c30,_0x36f121['id'],'setpoint'),_0x26fe66=await findRelatedId(_0x5d4c30,_0x36f121['id'],_0x31264c(0x12c));let _0x494d66=_0x31264c(0x19f),_0x491291=![],_0x423541=_0x5d4c30[_0x31264c(0x13b)][_0x31264c(0x11f)]||{};if(typeof _0x423541===_0x31264c(0x140))try{_0x423541=JSON[_0x31264c(0x15c)](_0x423541);}catch(_0x20fcdf){}let _0x52d46e=_0x5d4c30['config'][_0x31264c(0x179)]||{};if(typeof _0x52d46e===_0x31264c(0x140))try{_0x52d46e=JSON[_0x31264c(0x15c)](_0x52d46e);}catch(_0x43e77f){}if(_0x423541[_0x36f121['id']]&&_0x423541[_0x36f121['id']]===_0x2f4439||_0x52d46e[_0x36f121['id']]&&_0x52d46e[_0x36f121['id']]===_0x26fe66)_0x494d66='Manuelles\x20Mapping',_0x491291=!![];else(_0x2f4439||_0x26fe66)&&(_0x494d66='Auto-Erkennung');_0x7dc613[_0x31264c(0x110)]({'room':_0x36f121[_0x31264c(0x147)]||'Unbekannt','sensorId':_0x36f121['id'],'setpointId':_0x2f4439||'-','valveId':_0x26fe66||'-','source':_0x494d66,'isManual':_0x491291,'status':_0x2f4439&&_0x26fe66?_0x31264c(0x19d):_0x2f4439?'OK':_0x31264c(0x115)});}return _0x7dc613[_0x31264c(0x156)]((_0x1bdd06,_0x598b1d)=>_0x1bdd06[_0x31264c(0x12d)]['localeCompare'](_0x598b1d[_0x31264c(0x12d)]));}async function updateSchedulePreview(_0x34217c){const _0x2ec2e7=a1_0x479ede;if(!_0x34217c['config'][_0x2ec2e7(0x17f)]||!_0x34217c[_0x2ec2e7(0x13b)][_0x2ec2e7(0x143)])return;let _0x1362ec={};try{const _0x549e67=await _0x34217c[_0x2ec2e7(0x132)](_0x2ec2e7(0x104));if(_0x549e67&&_0x549e67[_0x2ec2e7(0x164)])_0x1362ec=JSON[_0x2ec2e7(0x15c)](_0x549e67[_0x2ec2e7(0x164)]);}catch(_0xf7252a){}const _0x559588=[],_0x56647f=Date[_0x2ec2e7(0xe8)](),_0x4a8c58=0x30*0x3c*0x3c*0x3e8;try{const _0x40361a=await _0x34217c[_0x2ec2e7(0x16d)](_0x34217c['config'][_0x2ec2e7(0x143)]+_0x2ec2e7(0xdb));if(!_0x40361a||!_0x40361a['val'])return;const _0x4511cc=JSON[_0x2ec2e7(0x15c)](_0x40361a[_0x2ec2e7(0x164)]),_0x161d25=_0x34217c['config'][_0x2ec2e7(0x13a)]||[],_0x5ec562=_0x34217c[_0x2ec2e7(0x13b)][_0x2ec2e7(0x105)]||[],_0x13c22d=new Set();_0x5ec562[_0x2ec2e7(0x160)](_0x3cc6bd=>{const _0x327469=_0x2ec2e7;if(_0x3cc6bd[_0x327469(0x147)])_0x13c22d[_0x327469(0x113)](_0x3cc6bd[_0x327469(0x147)]);});for(const _0x20a867 of _0x4511cc){if(_0x20a867[_0x2ec2e7(0x106)]&&_0x161d25[_0x2ec2e7(0x188)]>0x0&&!_0x161d25[_0x2ec2e7(0x177)](_0x20a867[_0x2ec2e7(0x106)]))continue;const _0x33229b=_0x20a867[_0x2ec2e7(0x10e)]||_0x20a867[_0x2ec2e7(0x193)]||_0x20a867['date'];if(!_0x33229b)continue;const _0x48e017=new Date(_0x33229b),_0x5e78cd=_0x48e017['getTime']();if(isNaN(_0x5e78cd))continue;if(_0x5e78cd<_0x56647f)continue;if(_0x5e78cd>_0x56647f+_0x4a8c58)continue;const _0xc7b2e0=(_0x20a867[_0x2ec2e7(0x197)]||_0x20a867['summary']||'')[_0x2ec2e7(0x107)]();let _0x4a53ee=![],_0x76ca7f=[],_0x50ac89=_0x20a867[_0x2ec2e7(0x197)]||_0x20a867[_0x2ec2e7(0x192)]||_0x2ec2e7(0xe7);if(_0xc7b2e0[_0x2ec2e7(0x177)]('urlaub\x20ende')||_0xc7b2e0['includes'](_0x2ec2e7(0x108))||_0xc7b2e0[_0x2ec2e7(0x177)](_0x2ec2e7(0x19e)))_0x4a53ee=!![],_0x76ca7f=Array[_0x2ec2e7(0x10a)](_0x13c22d);else for(const _0xa5c3f of _0x13c22d){if(_0xc7b2e0[_0x2ec2e7(0x177)](_0xa5c3f[_0x2ec2e7(0x107)]()))_0x76ca7f[_0x2ec2e7(0x110)](_0xa5c3f);}_0x76ca7f[_0x2ec2e7(0x188)]>0x0&&_0x76ca7f['forEach'](_0x18db99=>{const _0x39b272=_0x2ec2e7;let _0x1c9cd2=0x3c;if(_0x4a53ee){let _0x550d08=0x0;Object[_0x39b272(0x187)](_0x1362ec)['forEach'](_0x4d7081=>{if(_0x4d7081>_0x550d08)_0x550d08=_0x4d7081;}),_0x1c9cd2=_0x550d08>0x0?_0x550d08:0x78;}else _0x1c9cd2=getWarmupRobust(_0x1362ec,_0x18db99);const _0x1b44c0=new Date(_0x5e78cd-_0x1c9cd2*0xea60);_0x559588['push']({'eventTime':_0x5e78cd,'triggerTime':_0x1b44c0['getTime'](),'room':_0x18db99,'minutes':_0x1c9cd2,'reason':_0x50ac89,'isGlobal':_0x4a53ee});});}}catch(_0x5508e1){}_0x559588[_0x2ec2e7(0x156)]((_0x23a96f,_0x3a432b)=>_0x23a96f[_0x2ec2e7(0x103)]-_0x3a432b[_0x2ec2e7(0x103)]);const _0x4c71bc=_0x559588[_0x2ec2e7(0xde)](0x0,0x5);await _0x34217c[_0x2ec2e7(0x16c)](_0x2ec2e7(0x15e),{'val':JSON['stringify'](_0x4c71bc),'ack':!![]});}async function monitorEnforcements(_0x1a3d57){const _0x1969dc=a1_0x479ede;try{const _0x36d743=_0x1969dc(0x14c),_0x132442=await _0x1a3d57[_0x1969dc(0x132)](_0x36d743);if(!_0x132442||!_0x132442[_0x1969dc(0x164)])return;let _0x1b31b1=[];try{_0x1b31b1=JSON[_0x1969dc(0x15c)](_0x132442[_0x1969dc(0x164)]);}catch(_0x932e86){return;}if(!Array[_0x1969dc(0x10f)](_0x1b31b1)||_0x1b31b1[_0x1969dc(0x188)]===0x0)return;const _0x49c146=Date[_0x1969dc(0xe8)](),_0x1d5362=_0x1a3d57[_0x1969dc(0x13b)][_0x1969dc(0x105)]||[];let _0x444f65=![];for(let _0x241b48=_0x1b31b1[_0x1969dc(0x188)]-0x1;_0x241b48>=0x0;_0x241b48--){const _0xa84044=_0x1b31b1[_0x241b48];if(_0x49c146>=_0xa84044[_0x1969dc(0x119)]){_0x1a3d57[_0x1969dc(0x138)][_0x1969dc(0x12b)](_0x1969dc(0x15f)+_0xa84044[_0x1969dc(0x12d)]+'\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.'),_0x1b31b1[_0x1969dc(0x15d)](_0x241b48,0x1),_0x444f65=!![];continue;}const _0x2dd26f=_0x1d5362[_0x1969dc(0x11c)](_0x3e96b6=>normalize(_0x3e96b6['location'])===normalize(_0xa84044[_0x1969dc(0x12d)])&&(_0x3e96b6[_0x1969dc(0x133)]===_0x1969dc(0x19c)||_0x3e96b6['type']===_0x1969dc(0x11d)));if(_0x2dd26f){const _0x6cc3e=await findRelatedId(_0x1a3d57,_0x2dd26f['id'],_0x1969dc(0x17e));if(_0x6cc3e){const _0x51c7ac=await _0x1a3d57['getForeignStateAsync'](_0x6cc3e);_0x51c7ac&&typeof _0x51c7ac[_0x1969dc(0x164)]===_0x1969dc(0xed)&&(_0x51c7ac[_0x1969dc(0x164)]<0xf&&(_0x1a3d57['log']['warn'](_0x1969dc(0x144)+_0xa84044[_0x1969dc(0x12d)]+_0x1969dc(0x12e)+_0x51c7ac[_0x1969dc(0x164)]+'¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20'+_0xa84044[_0x1969dc(0x184)]+_0x1969dc(0xe9)),await _0x1a3d57[_0x1969dc(0x12f)](_0x6cc3e,_0xa84044[_0x1969dc(0x184)]),await logAutomationAction(_0x1a3d57,_0x1969dc(0x137)+_0xa84044[_0x1969dc(0x12d)]+':\x20'+_0x51c7ac[_0x1969dc(0x164)]+_0x1969dc(0xea)+_0xa84044[_0x1969dc(0x184)]+'¬∞C\x20(Kalender-Schutz)')));}}}_0x444f65&&await _0x1a3d57[_0x1969dc(0x16c)](_0x36d743,{'val':JSON[_0x1969dc(0xfc)](_0x1b31b1),'ack':!![]});}catch(_0x192149){_0x1a3d57[_0x1969dc(0x138)]['error'](_0x1969dc(0x145)+_0x192149['message']);}}async function checkCalendarTriggers(_0x63960f){const _0xf4ad00=a1_0x479ede;if(!_0x63960f[_0xf4ad00(0x13b)]['useCalendar']||!_0x63960f['config'][_0xf4ad00(0x143)])return;await updateSchedulePreview(_0x63960f);let _0x54af69={},_0x69c1a4={};try{const _0x38b540=await _0x63960f['getStateAsync'](_0xf4ad00(0x104));if(_0x38b540&&_0x38b540[_0xf4ad00(0x164)])_0x54af69=JSON[_0xf4ad00(0x15c)](_0x38b540[_0xf4ad00(0x164)]);const _0x35f4da=await _0x63960f[_0xf4ad00(0x132)]('analysis.energy.warmupSources');if(_0x35f4da&&_0x35f4da['val'])_0x69c1a4=JSON[_0xf4ad00(0x15c)](_0x35f4da[_0xf4ad00(0x164)]);}catch(_0x53f9d7){}let _0x231408={'default':0x15};try{const _0x3de162=await _0x63960f[_0xf4ad00(0x132)](_0xf4ad00(0x112));if(_0x3de162&&_0x3de162[_0xf4ad00(0x164)])_0x231408=JSON[_0xf4ad00(0x15c)](_0x3de162[_0xf4ad00(0x164)]);}catch(_0x5af335){}let _0x18bb43=[];try{const _0x1c9999=await _0x63960f[_0xf4ad00(0x132)](_0xf4ad00(0x14c));if(_0x1c9999&&_0x1c9999['val'])_0x18bb43=JSON[_0xf4ad00(0x15c)](_0x1c9999[_0xf4ad00(0x164)]);}catch(_0x30345a){}try{const _0x1a8189=await _0x63960f[_0xf4ad00(0x16d)](_0x63960f[_0xf4ad00(0x13b)][_0xf4ad00(0x143)]+_0xf4ad00(0xdb));if(!_0x1a8189||!_0x1a8189[_0xf4ad00(0x164)])return;const _0x250e4a=JSON[_0xf4ad00(0x15c)](_0x1a8189[_0xf4ad00(0x164)]),_0x53bd25=Date[_0xf4ad00(0xe8)](),_0x3123b4=_0x63960f['config'][_0xf4ad00(0x105)]||[],_0x151577=_0x63960f[_0xf4ad00(0x13b)][_0xf4ad00(0x13a)]||[];let _0xf91856=![];for(const _0xa8dad7 of _0x250e4a){if(_0xa8dad7[_0xf4ad00(0x106)]&&_0x151577[_0xf4ad00(0x188)]>0x0&&!_0x151577[_0xf4ad00(0x177)](_0xa8dad7['_calName']))continue;const _0x43d3a9=_0xa8dad7[_0xf4ad00(0x10e)]||_0xa8dad7[_0xf4ad00(0x193)]||_0xa8dad7[_0xf4ad00(0x195)];if(!_0x43d3a9)continue;const _0x24abe3=new Date(_0x43d3a9);if(isNaN(_0x24abe3['getTime']()))continue;const _0x36a729=(_0xa8dad7[_0xf4ad00(0x197)]||_0xa8dad7['summary']||'')[_0xf4ad00(0x107)]();if(_0x36a729[_0xf4ad00(0x177)](_0xf4ad00(0x170))||_0x36a729[_0xf4ad00(0x177)]('r√ºckkehr')||_0x36a729[_0xf4ad00(0x177)](_0xf4ad00(0x19e))){let _0x2955ab=0x0;Object['values'](_0x54af69)[_0xf4ad00(0x160)](_0x23e0f2=>{if(_0x23e0f2>_0x2955ab)_0x2955ab=_0x23e0f2;});if(_0x2955ab===0x0)_0x2955ab=0x78;const _0x1fa864=_0x24abe3[_0xf4ad00(0x181)]()-_0x2955ab*0xea60;_0x53bd25>=_0x1fa864&&_0x53bd25<_0x24abe3['getTime']()&&(_0x63960f[_0xf4ad00(0x18f)]!==_0xf4ad00(0x16e)&&(_0x63960f['log']['info'](_0xf4ad00(0x158)+_0x2955ab+_0xf4ad00(0x18b)),await _0x63960f[_0xf4ad00(0x16c)](_0xf4ad00(0x11a),{'val':'normal','ack':![]})));}for(const _0x349276 of _0x3123b4){if(_0x349276[_0xf4ad00(0x147)]){const _0x5c2c53=_0x349276[_0xf4ad00(0x147)][_0xf4ad00(0x107)](),_0xd4d718=(_0x349276[_0xf4ad00(0x198)]||'')['toLowerCase']();let _0x59fa9d=_0x36a729[_0xf4ad00(0x177)](_0x5c2c53);!_0x59fa9d&&_0xd4d718[_0xf4ad00(0x188)]>0x3&&_0x36a729[_0xf4ad00(0x177)](_0xd4d718)&&(_0x59fa9d=!![]);if(_0x59fa9d){const _0x1a31b2=getWarmupRobust(_0x54af69,_0x349276[_0xf4ad00(0x147)]),_0xf89c68=_0x69c1a4[_0x349276[_0xf4ad00(0x147)]]||_0xf4ad00(0x150),_0x44d58a=_0x24abe3[_0xf4ad00(0x181)]()-_0x1a31b2*0xea60;if(_0x53bd25>=_0x44d58a&&_0x53bd25<_0x24abe3['getTime']()){const _0x35cd55=lastActions[_0xf4ad00(0x18a)+_0x349276['location']];if(_0x35cd55&&_0x53bd25-_0x35cd55<CAL_COOLDOWN_MS)continue;const _0x2d4886=await findRelatedId(_0x63960f,_0x349276['id'],'setpoint');if(_0x2d4886){let _0x3ba37f=_0x231408[_0x349276[_0xf4ad00(0x147)]];if(_0x3ba37f===undefined)_0x3ba37f=_0x231408[_0xf4ad00(0x17b)];if(_0x3ba37f===undefined)_0x3ba37f=0x15;const _0x49e15d=await _0x63960f['getForeignStateAsync'](_0x2d4886);if(_0x49e15d&&typeof _0x49e15d[_0xf4ad00(0x164)]===_0xf4ad00(0xed)&&_0x49e15d[_0xf4ad00(0x164)]<_0x3ba37f-0.5){_0x63960f[_0xf4ad00(0x138)][_0xf4ad00(0x12b)]('üìÖ\x20SMART\x20SCHEDULE\x20['+_0xf89c68+_0xf4ad00(0x101)+_0x349276[_0xf4ad00(0x147)]+_0xf4ad00(0x17d)+_0x36a729+')\x20aktiv.\x20Heize\x20auf\x20'+_0x3ba37f+_0xf4ad00(0x134)+_0x1a31b2+_0xf4ad00(0x18b)),await _0x63960f[_0xf4ad00(0x12f)](_0x2d4886,_0x3ba37f),await logAutomationAction(_0x63960f,_0xf4ad00(0x142)+_0x349276[_0xf4ad00(0x147)]+'\x20->\x20'+_0x3ba37f+_0xf4ad00(0x185)+_0xf89c68+')'),lastActions[_0xf4ad00(0x18a)+_0x349276[_0xf4ad00(0x147)]]=_0x53bd25;const _0x579e3e=_0x18bb43[_0xf4ad00(0xf2)](_0x46d0f5=>_0x46d0f5[_0xf4ad00(0x12d)]===_0x349276[_0xf4ad00(0x147)]);if(_0x579e3e!==-0x1)_0x18bb43[_0xf4ad00(0x15d)](_0x579e3e,0x1);_0x18bb43[_0xf4ad00(0x110)]({'room':_0x349276[_0xf4ad00(0x147)],'target':_0x3ba37f,'until':_0x24abe3[_0xf4ad00(0x181)]()}),_0xf91856=!![];}}}}}}}_0xf91856&&await _0x63960f[_0xf4ad00(0x16c)](_0xf4ad00(0x14c),{'val':JSON[_0xf4ad00(0xfc)](_0x18bb43),'ack':!![]});}catch(_0x4f0fce){_0x63960f[_0xf4ad00(0x138)]['warn'](_0xf4ad00(0x180)+_0x4f0fce['message']);}}async function manageMpcIntervention(_0x8d29fd,_0x23975c,_0x2e6d65){const _0x1b5dc5=a1_0x479ede;try{const _0x5b9156=_0x1b5dc5(0xdc),_0x192f6b=await _0x8d29fd[_0x1b5dc5(0x132)](_0x5b9156);let _0x4ec287=[];if(_0x192f6b&&_0x192f6b['val'])try{_0x4ec287=JSON['parse'](_0x192f6b[_0x1b5dc5(0x164)]);}catch(_0x439e2e){}const _0x3af223=_0x4ec287['indexOf'](_0x23975c);if(_0x2e6d65===_0x1b5dc5(0x113))_0x3af223===-0x1&&(_0x4ec287[_0x1b5dc5(0x110)](_0x23975c),await _0x8d29fd['setStateAsync'](_0x5b9156,{'val':JSON[_0x1b5dc5(0xfc)](_0x4ec287),'ack':!![]}));else _0x2e6d65===_0x1b5dc5(0x182)&&(_0x3af223!==-0x1&&(_0x4ec287[_0x1b5dc5(0x15d)](_0x3af223,0x1),await _0x8d29fd[_0x1b5dc5(0x16c)](_0x5b9156,{'val':JSON[_0x1b5dc5(0xfc)](_0x4ec287),'ack':!![]})));}catch(_0x44626f){}}async function cleanupGhostInterventions(_0x41238d){const _0xf91351=a1_0x479ede;try{const _0x7ba5d0=_0xf91351(0xdc),_0x12f705=await _0x41238d[_0xf91351(0x132)](_0x7ba5d0);if(!_0x12f705||!_0x12f705[_0xf91351(0x164)])return;const _0x3bd904=JSON[_0xf91351(0x15c)](_0x12f705['val']);if(!Array['isArray'](_0x3bd904)||_0x3bd904['length']===0x0)return;let _0x204bdf={'default':0x15};try{const _0x5ca012=await _0x41238d[_0xf91351(0x132)](_0xf91351(0x112));if(_0x5ca012&&_0x5ca012[_0xf91351(0x164)])_0x204bdf=JSON['parse'](_0x5ca012[_0xf91351(0x164)]);}catch(_0x1fdcdd){}let _0x576744=[];try{const _0x4167a7=await _0x41238d['getStateAsync'](_0xf91351(0x17a));if(_0x4167a7&&_0x4167a7['val'])_0x576744=JSON[_0xf91351(0x15c)](_0x4167a7['val']);}catch(_0x4b1dd6){}let _0x15c5a7={},_0xe0923c=![];try{const _0x177162=await _0x41238d['getStateAsync'](_0xf91351(0xe4));if(_0x177162&&_0x177162[_0xf91351(0x164)])_0x15c5a7=JSON[_0xf91351(0x15c)](_0x177162[_0xf91351(0x164)]);}catch(_0x5dcc82){}if(_0x15c5a7[_0xf91351(0x128)]){const _0x48a4b4=Date[_0xf91351(0xe8)]();for(const [_0xc80e91,_0x4dfb9e]of Object[_0xf91351(0xf3)](_0x15c5a7['_meta'])){_0x48a4b4-_0x4dfb9e>PENALTY_TTL&&(delete _0x15c5a7[_0xc80e91],delete _0x15c5a7[_0xf91351(0x128)][_0xc80e91],_0xe0923c=!![],_0x41238d['log'][_0xf91351(0x12b)](_0xf91351(0x196)+_0xc80e91+_0xf91351(0xe2)));}}const _0x30666d=_0x41238d[_0xf91351(0x13b)][_0xf91351(0x105)]||[];let _0x59eaca=![];for(let _0x5e14cc=_0x3bd904[_0xf91351(0x188)]-0x1;_0x5e14cc>=0x0;_0x5e14cc--){const _0x5306b9=_0x3bd904[_0x5e14cc],_0x2b89c6=_0x30666d['find'](_0x1ae1b8=>normalize(_0x1ae1b8[_0xf91351(0x147)])===normalize(_0x5306b9)&&(_0x1ae1b8[_0xf91351(0x133)]===_0xf91351(0x19c)||_0x1ae1b8[_0xf91351(0x133)]===_0xf91351(0x11d)));if(!_0x2b89c6){_0x41238d['log'][_0xf91351(0x17c)](_0xf91351(0x114)+_0x5306b9+'\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.'),_0x3bd904[_0xf91351(0x15d)](_0x5e14cc,0x1),_0x59eaca=!![];continue;}if(_0x2b89c6){const _0x5108a7=await findRelatedId(_0x41238d,_0x2b89c6['id'],_0xf91351(0x17e)),_0x5f1f95=await _0x41238d[_0xf91351(0x16d)](_0x2b89c6['id']);if(_0x5108a7){const _0x302e7d=await _0x41238d[_0xf91351(0x16d)](_0x5108a7);if(_0x302e7d&&typeof _0x302e7d[_0xf91351(0x164)]===_0xf91351(0xed)){let _0x3311d8=![],_0x4bfe22='';Math['abs'](_0x302e7d[_0xf91351(0x164)]-ECO_TEMP)>0.5&&(_0x3311d8=!![],_0x4bfe22=_0xf91351(0xfb));if(!_0x3311d8&&_0x5f1f95&&typeof _0x5f1f95[_0xf91351(0x164)]===_0xf91351(0xed)){const _0x186324=_0x204bdf[_0x5306b9]||_0x204bdf[_0xf91351(0x17b)]||0x15;_0x5f1f95[_0xf91351(0x164)]<_0x186324+0.2&&(_0x3311d8=!![],_0x4bfe22='too_cold');}if(_0x3311d8){if(_0x4bfe22===_0xf91351(0xfb)){_0x41238d[_0xf91351(0x138)]['info'](_0xf91351(0x154)+_0x5306b9+'\x20ist\x20auf\x20'+_0x302e7d[_0xf91351(0x164)]+_0xf91351(0x127)+ECO_TEMP+_0xf91351(0x10b));const _0x121d0b=lastActions[_0xf91351(0x18a)+_0x5306b9],_0x8fc4f6=_0x121d0b&&Date[_0xf91351(0xe8)]()-_0x121d0b<0x2*0x3c*0x3e8;if(!_0x8fc4f6&&_0x302e7d[_0xf91351(0x164)]>ECO_TEMP+0.5){_0x41238d[_0xf91351(0xfa)]&&(_0x41238d[_0xf91351(0x138)]['info'](_0xf91351(0x10c)+_0x5306b9+_0xf91351(0x165)),_0x41238d[_0xf91351(0xfa)](_0xf91351(0x15b),{'room':_0x5306b9}));const _0x15c2ff=_0x5306b9+'_'+new Date()[_0xf91351(0xf7)]();if(!_0x15c5a7[_0x15c2ff]){_0x15c5a7[_0x15c2ff]=0x1;if(!_0x15c5a7['_meta'])_0x15c5a7[_0xf91351(0x128)]={};_0x15c5a7[_0xf91351(0x128)][_0x15c2ff]=Date[_0xf91351(0xe8)](),_0xe0923c=!![];}}else _0x8fc4f6&&_0x41238d[_0xf91351(0x138)][_0xf91351(0x12b)](_0xf91351(0x199)+_0x5306b9+_0xf91351(0x14f));}else{if(_0x4bfe22===_0xf91351(0x11b)){let _0x3c14d6=![];if(_0x576744[_0xf91351(0x11c)](_0x5a41cf=>_0x5a41cf[_0xf91351(0x12d)]===_0x5306b9))_0x3c14d6=!![];const _0x253a80=_0x30666d[_0xf91351(0x10d)](_0x388d2b=>normalize(_0x388d2b['location'])===normalize(_0x5306b9)&&(_0x388d2b['type']==='window'||_0x388d2b[_0xf91351(0x133)]==='sensor'||_0x388d2b['type']===_0xf91351(0xf6)));for(const _0x20043a of _0x253a80){try{const _0x294c04=await _0x41238d[_0xf91351(0x16d)](_0x20043a['id']);if(_0x294c04&&(_0x294c04[_0xf91351(0x164)]===!![]||_0x294c04[_0xf91351(0x164)]===0x1||String(_0x294c04['val'])[_0xf91351(0x107)]()===_0xf91351(0x13c)))_0x3c14d6=!![];}catch(_0x1825fd){}}if(_0x3c14d6)_0x41238d[_0xf91351(0x138)]['info'](_0xf91351(0x169)+_0x5306b9+_0xf91351(0x186));else{const _0x4ae40c=_0x204bdf[_0x5306b9]||_0x204bdf[_0xf91351(0x17b)]||0x15;_0x41238d[_0xf91351(0x138)][_0xf91351(0x12b)](_0xf91351(0x163)+_0x5306b9+'\x20erreicht\x20Limit\x20('+_0x5f1f95['val']+_0xf91351(0x15a)+(_0x4ae40c+0.2)+_0xf91351(0x123)),await _0x41238d[_0xf91351(0x12f)](_0x5108a7,_0x4ae40c),await logAutomationAction(_0x41238d,_0xf91351(0x161)+_0x5306b9+_0xf91351(0x172)+_0x4ae40c+'¬∞C'),lastActions['rescue_'+_0x5306b9]=Date[_0xf91351(0xe8)]();}}}_0x3bd904[_0xf91351(0x15d)](_0x5e14cc,0x1),_0x59eaca=!![];}}}}}_0x59eaca&&await _0x41238d['setStateAsync'](_0x7ba5d0,{'val':JSON['stringify'](_0x3bd904),'ack':!![]}),_0xe0923c&&await _0x41238d[_0xf91351(0x16c)](_0xf91351(0xe4),{'val':JSON[_0xf91351(0xfc)](_0x15c5a7),'ack':!![]});}catch(_0x376baf){}}function a1_0x15da(){const _0x2f63e8=['default','warn','\x27\x20(Match:\x20','setpoint','useCalendar','Calendar\x20Check\x20Error:\x20','getTime','remove','messwert','target','¬∞C\x20(via\x20','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','values','length','Soll','cal_','\x20min).','position','off','current_heating_setpoint','currentSystemMode','108OSHCbB','mpc_','summary','eventStart','\x20->\x20Schalte\x20','date','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','event','name','üìÖ\x20[MPC\x20INFO]\x20','ACTUAL','write','temperature','PERFECT','ankunft','Nicht\x20gefunden','.data.table','analysis.energy.mpcActiveInterventions','\x20gefunden!','slice','rescue_','temp','649036tEIeki','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','target_temperature','analysis.energy.rlPenalties','Unknown','¬∞C!\x20(Puffer\x20leer).','Unbekannt','now','¬∞C.','¬∞C\x20->\x20','common','(((.+)+)+)+$','number','apply','minutes_safe','split','replace','findIndex','entries','stellwert','.1.SET_POINT_TEMPERATURE','contact','getHours','valve_position','.4.SET_TEMPERATURE','sendToPythonWrapper','manual','stringify','openknx','active','397cnSGid','local_temperature',']:\x20Raum-Trigger\x20\x27','search','triggerTime','analysis.energy.warmupTimes','devices','_calName','toLowerCase','r√ºckkehr','SET','from','¬∞C).\x20Entferne\x20Status.','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','filter','_date','isArray','push','.1.LEVEL','analysis.energy.warmupTargets','add','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','Fehlt','.1.ACTUAL_TEMPERATURE','level.temperature','Pr√§diktion:\x20','until','system.mode','too_cold','find','thermostat','getForeignObjectAsync','thermostatMapping','wert','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20','6317780tfotqW','¬∞C).\x20Sparmodus\x20beendet!','pi_heating_demand','¬∞C!\x20(Puffer:\x20','join','¬∞C\x20(nicht\x20','_meta','553696KQCscd','set','info','valve','room','\x20auf\x20','setForeignStateAsync','toString','level','getStateAsync','type','¬∞C\x20(Vorlauf:\x20','state',':\x20Aufheizen\x20auf\x20','[FORCE]\x20','log','1546LZmDfZ','calendarSelection','config','open','dimmer','95137ybeFPV','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','string','actual','[CAL]\x20','calendarInstance','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','Enforcement\x20Monitor\x20Error:\x20','[MPC]\x20','location','switch','score','unshift','sensor','analysis.energy.activeEnforcements',':\x20Absenkung\x20auf\x20','toUpperCase','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','Classic','Ist','.1.TEMPERATURE','ist','üßπ\x20[MPC\x20CLEANUP]\x20','23953347DeYGaM','sort','12AFfXrM','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','8646170lScsYd','¬∞C\x20<\x20','TRAIN_RL_PENALTY','parse','splice','analysis.energy.schedulePreview','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','forEach','[WATCHDOG]\x20','ACTUAL_TEMPERATURE','üö®\x20[MPC\x20WATCHDOG]\x20','val','\x20wurde\x20manuell\x20erh√∂ht.','\x20wieder\x20auf\x20','getForeignObjectsAsync','hm-rpc','üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20','occupied_heating_setpoint','3SMmBeK','setStateAsync','getForeignStateAsync','normal','analysis.automation.confidenceThreshold','urlaub\x20ende','consultButler',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','thermostat.setpoint','trim','reason','üî•\x20[MPC\x20ACTION]\x20Heize\x20','includes','SET_POINT_TEMPERATURE','valveMapping','analysis.energy.ventilationAlerts'];a1_0x15da=function(){return _0x2f63e8;};return a1_0x15da();}async function applyEnergySavings(_0x1c5573,_0x56cb74){const _0x5bf271=a1_0x479ede;await cleanupGhostInterventions(_0x1c5573);if(!_0x56cb74||_0x56cb74[_0x5bf271(0x188)]===0x0)return;const _0x1cbf70=_0x1c5573['config'][_0x5bf271(0x105)]||[],_0x2f1570=Date[_0x5bf271(0xe8)]();for(const _0x4c586e of _0x56cb74){const _0x3a0753=_0x4c586e['room'],_0x4383f4=_0x4c586e[_0x5bf271(0xef)],_0x3c43f2=_0x4c586e['target']||0x15;if(lastActions[_0x5bf271(0xdf)+_0x3a0753]&&_0x2f1570-lastActions[_0x5bf271(0xdf)+_0x3a0753]<RESCUE_LOCK_MS)continue;const _0x2480d2=_0x1cbf70[_0x5bf271(0x11c)](_0x579acd=>normalize(_0x579acd[_0x5bf271(0x147)])===normalize(_0x3a0753)&&(_0x579acd[_0x5bf271(0x133)]===_0x5bf271(0x19c)||_0x579acd[_0x5bf271(0x133)]===_0x5bf271(0x11d)));if(!_0x2480d2)continue;const _0x55496c=await findRelatedId(_0x1c5573,_0x2480d2['id'],_0x5bf271(0x17e));if(_0x55496c){if(lastActions[_0x5bf271(0x191)+_0x3a0753]&&_0x2f1570-lastActions['mpc_'+_0x3a0753]<0x1e*0x3c*0x3e8)continue;const _0x9b544f=await _0x1c5573[_0x5bf271(0x16d)](_0x55496c);if(_0x9b544f&&typeof _0x9b544f[_0x5bf271(0x164)]==='number'){const _0x2fb4a0=_0x9b544f['val'];_0x2fb4a0!==ECO_TEMP&&await manageMpcIntervention(_0x1c5573,_0x3a0753,_0x5bf271(0x182));if(_0x4383f4>0x1e)_0x2fb4a0>ECO_TEMP+0.5&&(_0x1c5573[_0x5bf271(0x138)]['info'](_0x5bf271(0x121)+_0x3a0753+_0x5bf271(0x12e)+ECO_TEMP+_0x5bf271(0x125)+_0x4383f4+'\x20min)'),await _0x1c5573[_0x5bf271(0x12f)](_0x55496c,ECO_TEMP),await manageMpcIntervention(_0x1c5573,_0x3a0753,_0x5bf271(0x113)),lastActions[_0x5bf271(0x191)+_0x3a0753]=_0x2f1570,await logAutomationAction(_0x1c5573,_0x5bf271(0x146)+_0x3a0753+_0x5bf271(0x14d)+ECO_TEMP+'¬∞C'));else _0x4383f4<=0xf&&(_0x2fb4a0<_0x3c43f2&&(_0x1c5573['log'][_0x5bf271(0x12b)](_0x5bf271(0x176)+_0x3a0753+_0x5bf271(0x166)+_0x3c43f2+_0x5bf271(0xe6)),await _0x1c5573[_0x5bf271(0x12f)](_0x55496c,_0x3c43f2),await manageMpcIntervention(_0x1c5573,_0x3a0753,_0x5bf271(0x182)),lastActions[_0x5bf271(0x191)+_0x3a0753]=_0x2f1570,await logAutomationAction(_0x1c5573,'[MPC]\x20'+_0x3a0753+_0x5bf271(0x136)+_0x3c43f2+'¬∞C')));}}else _0x1c5573['log'][_0x5bf271(0x17c)](_0x5bf271(0x13f)+_0x3a0753+_0x5bf271(0xdd));}}module['exports']={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};