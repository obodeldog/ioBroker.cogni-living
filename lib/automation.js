const a1_0xe99c54=a1_0x4d4b;function a1_0x1d17(){const _0x2a2322=['30949699JIcsSv','config','ðŸ¤–\x20Butler\x20Blocked:\x20','exports','analysis.automation.mode','val','analysis.automation.confidenceThreshold','apply','switch','reason','420659ciypCI','\x20schalten,\x20aber\x20kein\x20Licht-GerÃ¤t\x20dort\x20gefunden.','1971176SXrFty','9vhtpml','getStateAsync','log','ðŸ¤–\x20Automation:\x20WÃ¼rde\x20','./ai_agent','light','PrÃ¤diktion:\x20','debug','find','[BLOCKED]\x20','getForeignStateAsync','constructor','type','4anqLpb','devices','4241979Wqqmjq','setStateAsync','consultButler','off','(((.+)+)+)+$','setForeignStateAsync','toUpperCase','4898220wpTpbT','analysis.automation.lastAction','dimmer','6fSzIhh','467696qrzRHs','location','info','10YwiFho','3092382rMZdYp'];a1_0x1d17=function(){return _0x2a2322;};return a1_0x1d17();}(function(_0x38ff15,_0x2487a9){const _0x1e68a9=a1_0x4d4b,_0x338b25=_0x38ff15();while(!![]){try{const _0x26472b=-parseInt(_0x1e68a9(0x6a))/0x1+-parseInt(_0x1e68a9(0x6c))/0x2+-parseInt(_0x1e68a9(0x8b))/0x3*(parseInt(_0x1e68a9(0x7a))/0x4)+parseInt(_0x1e68a9(0x83))/0x5+-parseInt(_0x1e68a9(0x86))/0x6*(parseInt(_0x1e68a9(0x7c))/0x7)+parseInt(_0x1e68a9(0x87))/0x8*(parseInt(_0x1e68a9(0x6d))/0x9)+parseInt(_0x1e68a9(0x8a))/0xa*(parseInt(_0x1e68a9(0x8c))/0xb);if(_0x26472b===_0x2487a9)break;else _0x338b25['push'](_0x338b25['shift']());}catch(_0x3a7cfd){_0x338b25['push'](_0x338b25['shift']());}}}(a1_0x1d17,0xc56e5));const a1_0x4ece35=(function(){let _0x3f09d8=!![];return function(_0x454a28,_0x5dfcc6){const _0xdb55a=_0x3f09d8?function(){const _0x3dbbcd=a1_0x4d4b;if(_0x5dfcc6){const _0x2d2086=_0x5dfcc6[_0x3dbbcd(0x67)](_0x454a28,arguments);return _0x5dfcc6=null,_0x2d2086;}}:function(){};return _0x3f09d8=![],_0xdb55a;};}()),a1_0x55f6e7=a1_0x4ece35(this,function(){const _0x1147ca=a1_0x4d4b;return a1_0x55f6e7['toString']()['search'](_0x1147ca(0x80))['toString']()[_0x1147ca(0x78)](a1_0x55f6e7)['search']('(((.+)+)+)+$');});a1_0x55f6e7();'use strict';const aiAgent=require(a1_0xe99c54(0x71)),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function a1_0x4d4b(_0x3ded3d,_0x31a9bb){const _0x5877f0=a1_0x1d17();return a1_0x4d4b=function(_0x55f6e7,_0x4ece35){_0x55f6e7=_0x55f6e7-0x65;let _0x1d17f0=_0x5877f0[_0x55f6e7];return _0x1d17f0;},a1_0x4d4b(_0x3ded3d,_0x31a9bb);}async function handlePrediction(_0xd86d0f,_0x262660,_0x1411c3){const _0x461fbe=a1_0xe99c54;if(!_0x262660||_0x262660==='Unknown')return;let _0x125215=_0x461fbe(0x7f),_0x53a30f=0.6;try{const _0x584de4=await _0xd86d0f[_0x461fbe(0x6e)](_0x461fbe(0x90));if(_0x584de4&&_0x584de4['val'])_0x125215=_0x584de4[_0x461fbe(0x65)];const _0x54df64=await _0xd86d0f['getStateAsync'](_0x461fbe(0x66));if(_0x54df64&&_0x54df64[_0x461fbe(0x65)])_0x53a30f=_0x54df64[_0x461fbe(0x65)];}catch(_0x2aa2b7){}if(_0x125215===_0x461fbe(0x7f))return;if(_0x1411c3<_0x53a30f)return;const _0x20ffcb=Date['now']();if(lastActions[_0x262660]&&_0x20ffcb-lastActions[_0x262660]<COOLDOWN_MS)return;const _0x5f768a=_0xd86d0f[_0x461fbe(0x8d)][_0x461fbe(0x7b)]||[],_0xa59510=_0x5f768a[_0x461fbe(0x75)](_0xae0a43=>_0xae0a43[_0x461fbe(0x88)]===_0x262660&&(_0xae0a43[_0x461fbe(0x79)]===_0x461fbe(0x72)||_0xae0a43['type']===_0x461fbe(0x85)||_0xae0a43[_0x461fbe(0x79)]===_0x461fbe(0x68)));if(!_0xa59510){_0xd86d0f[_0x461fbe(0x6f)]['debug'](_0x461fbe(0x70)+_0x262660+_0x461fbe(0x6b));return;}const _0x209de6=await aiAgent[_0x461fbe(0x7e)](_0xd86d0f,_0x262660,_0xa59510['name'],_0x1411c3);if(!_0x209de6['approved']){_0xd86d0f[_0x461fbe(0x6f)][_0x461fbe(0x74)](_0x461fbe(0x8e)+_0x262660+'\x20->\x20'+_0x209de6['reason']),await _0xd86d0f[_0x461fbe(0x7d)]('analysis.automation.lastAction',{'val':_0x461fbe(0x76)+_0x209de6[_0x461fbe(0x69)],'ack':!![]});return;}const _0x27af73=_0x461fbe(0x73)+_0x262660+'\x20->\x20Schalte\x20'+_0xa59510['name']+'\x20('+_0x209de6['reason']+')';await _0xd86d0f[_0x461fbe(0x7d)](_0x461fbe(0x84),{'val':'['+_0x125215[_0x461fbe(0x82)]()+']\x20'+_0x27af73,'ack':!![]});if(_0x125215==='simulate')_0xd86d0f['log']['info']('ðŸ‘€\x20SIMULATION:\x20'+_0x27af73);else{if(_0x125215==='active'){_0xd86d0f[_0x461fbe(0x6f)][_0x461fbe(0x89)]('âš¡\x20ACTION:\x20'+_0x27af73);const _0x53789c=await _0xd86d0f[_0x461fbe(0x77)](_0xa59510['id']);if(_0x53789c&&(_0x53789c['val']===!![]||_0x53789c[_0x461fbe(0x65)]>0x0)){}else await _0xd86d0f[_0x461fbe(0x81)](_0xa59510['id'],!![]);lastActions[_0x262660]=_0x20ffcb;}}}module[a1_0xe99c54(0x8f)]={'handlePrediction':handlePrediction};