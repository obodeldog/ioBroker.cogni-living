const a1_0x2633e8=a1_0x375b;(function(_0x397bbd,_0x4968b9){const _0x362b61=a1_0x375b,_0x1705a2=_0x397bbd();while(!![]){try{const _0x599fa3=-parseInt(_0x362b61(0x21d))/0x1*(-parseInt(_0x362b61(0x257))/0x2)+-parseInt(_0x362b61(0x29b))/0x3*(-parseInt(_0x362b61(0x29e))/0x4)+parseInt(_0x362b61(0x238))/0x5+parseInt(_0x362b61(0x207))/0x6*(parseInt(_0x362b61(0x22c))/0x7)+parseInt(_0x362b61(0x1f1))/0x8+parseInt(_0x362b61(0x226))/0x9+parseInt(_0x362b61(0x277))/0xa*(-parseInt(_0x362b61(0x254))/0xb);if(_0x599fa3===_0x4968b9)break;else _0x1705a2['push'](_0x1705a2['shift']());}catch(_0x5bf4a6){_0x1705a2['push'](_0x1705a2['shift']());}}}(a1_0x20cf,0xe93e5));const a1_0x45861f=(function(){let _0xf62848=!![];return function(_0x4251bf,_0x17b2fd){const _0xad62ff=_0xf62848?function(){const _0x17eeab=a1_0x375b;if(_0x17b2fd){const _0x2779c2=_0x17b2fd[_0x17eeab(0x288)](_0x4251bf,arguments);return _0x17b2fd=null,_0x2779c2;}}:function(){};return _0xf62848=![],_0xad62ff;};}()),a1_0x2902ac=a1_0x45861f(this,function(){const _0x522eb6=a1_0x375b;return a1_0x2902ac[_0x522eb6(0x24d)]()[_0x522eb6(0x256)](_0x522eb6(0x237))['toString']()[_0x522eb6(0x22e)](a1_0x2902ac)[_0x522eb6(0x256)]('(((.+)+)+)+$');});a1_0x2902ac();'use strict';const aiAgent=require(a1_0x2633e8(0x213)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x49c87d){const _0x21f7f5=a1_0x2633e8;if(!_0x49c87d)return'';return _0x49c87d[_0x21f7f5(0x27d)]()[_0x21f7f5(0x24b)](/\s+/g,'')[_0x21f7f5(0x1f4)]();}function getWarmupRobust(_0x2d36eb,_0x1c7a6b){const _0x27d6dd=a1_0x2633e8;if(!_0x2d36eb||!_0x1c7a6b)return 0x3c;if(_0x2d36eb[_0x1c7a6b]!==undefined)return _0x2d36eb[_0x1c7a6b];const _0x1677aa=_0x1c7a6b['toLowerCase']()['replace'](/√§/g,'ae')[_0x27d6dd(0x24b)](/√∂/g,'oe')[_0x27d6dd(0x24b)](/√º/g,'ue')[_0x27d6dd(0x24b)](/√ü/g,'ss')[_0x27d6dd(0x24b)](/\s+/g,'_')[_0x27d6dd(0x24b)](/[^a-z0-9_]/g,'');if(_0x2d36eb[_0x1677aa]!==undefined)return _0x2d36eb[_0x1677aa];return 0x3c;}async function logAutomationAction(_0x4bcb5b,_0x2afd45){const _0x27b6b5=a1_0x2633e8;await _0x4bcb5b[_0x27b6b5(0x292)]('analysis.automation.lastAction',{'val':_0x2afd45,'ack':!![]});try{const _0xdc7ee5=_0x27b6b5(0x23f),_0x1d17fd=await _0x4bcb5b['getStateAsync'](_0xdc7ee5);let _0x5dbe1c=[];if(_0x1d17fd&&_0x1d17fd[_0x27b6b5(0x225)])try{_0x5dbe1c=JSON[_0x27b6b5(0x268)](_0x1d17fd[_0x27b6b5(0x225)]);}catch(_0x212ee0){}_0x5dbe1c[_0x27b6b5(0x251)]({'ts':Date['now'](),'msg':_0x2afd45});if(_0x5dbe1c[_0x27b6b5(0x217)]>0x32)_0x5dbe1c=_0x5dbe1c[_0x27b6b5(0x239)](0x0,0x32);await _0x4bcb5b[_0x27b6b5(0x292)](_0xdc7ee5,{'val':JSON[_0x27b6b5(0x20c)](_0x5dbe1c),'ack':!![]});}catch(_0x3716bd){}}async function handlePrediction(_0x496ec0,_0x3318f1,_0x4d5379){const _0x58b44b=a1_0x2633e8;if(!_0x3318f1||_0x3318f1===_0x58b44b(0x233))return;let _0x2c2df0=_0x58b44b(0x219),_0x3a52b9=0.6;try{const _0x47a9fa=await _0x496ec0['getStateAsync']('analysis.automation.mode');if(_0x47a9fa&&_0x47a9fa[_0x58b44b(0x225)])_0x2c2df0=_0x47a9fa[_0x58b44b(0x225)];const _0x8917fe=await _0x496ec0[_0x58b44b(0x1ee)]('analysis.automation.confidenceThreshold');if(_0x8917fe&&_0x8917fe[_0x58b44b(0x225)])_0x3a52b9=_0x8917fe[_0x58b44b(0x225)];}catch(_0x257cdc){}if(_0x2c2df0===_0x58b44b(0x219)||_0x4d5379<_0x3a52b9)return;const _0x121373=Date['now']();if(lastActions[_0x3318f1]&&_0x121373-lastActions[_0x3318f1]<COOLDOWN_MS)return;const _0x5cfc83=_0x496ec0[_0x58b44b(0x269)][_0x58b44b(0x28f)]||[],_0x3a1f73=normalize(_0x3318f1),_0x4f4e3b=_0x5cfc83[_0x58b44b(0x263)](_0x2ebf08=>normalize(_0x2ebf08[_0x58b44b(0x26d)])===_0x3a1f73&&(_0x2ebf08['type']==='light'||_0x2ebf08[_0x58b44b(0x291)]===_0x58b44b(0x1fd)||_0x2ebf08[_0x58b44b(0x291)]==='switch'));if(!_0x4f4e3b)return;const _0x2ebf1b=await aiAgent[_0x58b44b(0x29a)](_0x496ec0,_0x3318f1,_0x4f4e3b['name'],_0x4d5379);if(!_0x2ebf1b[_0x58b44b(0x20d)])return;const _0x51d907=_0x58b44b(0x1eb)+_0x3318f1+_0x58b44b(0x25b)+_0x4f4e3b[_0x58b44b(0x1f6)]+'\x20('+_0x2ebf1b[_0x58b44b(0x23c)]+')';await logAutomationAction(_0x496ec0,'['+_0x2c2df0[_0x58b44b(0x279)]()+']\x20'+_0x51d907);if(_0x2c2df0===_0x58b44b(0x265)){const _0x1b98c7=await _0x496ec0[_0x58b44b(0x1ec)](_0x4f4e3b['id']);(!_0x1b98c7||!_0x1b98c7[_0x58b44b(0x225)]&&_0x1b98c7[_0x58b44b(0x225)]!==!![])&&await _0x496ec0[_0x58b44b(0x293)](_0x4f4e3b['id'],!![]),lastActions[_0x3318f1]=_0x121373;}}async function findRelatedId(_0x57b956,_0x4a84d1,_0x2d654b=a1_0x2633e8(0x235)){const _0x7598ad=a1_0x2633e8;if(_0x2d654b===_0x7598ad(0x235)&&_0x57b956['config'][_0x7598ad(0x20f)]){let _0x5058b1=_0x57b956[_0x7598ad(0x269)][_0x7598ad(0x20f)];if(typeof _0x5058b1===_0x7598ad(0x246))try{_0x5058b1=JSON[_0x7598ad(0x268)](_0x5058b1);}catch(_0x39f8ad){}if(_0x5058b1&&_0x5058b1[_0x4a84d1])return _0x5058b1[_0x4a84d1];}if(_0x2d654b===_0x7598ad(0x227)&&_0x57b956[_0x7598ad(0x269)][_0x7598ad(0x1e2)]){let _0x396d4d=_0x57b956[_0x7598ad(0x269)][_0x7598ad(0x1e2)];if(typeof _0x396d4d===_0x7598ad(0x246))try{_0x396d4d=JSON['parse'](_0x396d4d);}catch(_0x3f3f97){}if(_0x396d4d&&_0x396d4d[_0x4a84d1])return _0x396d4d[_0x4a84d1];}let _0x5f6aec=[];if(_0x2d654b===_0x7598ad(0x235))_0x5f6aec=[{'s':_0x7598ad(0x1fe),'t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x7598ad(0x23a),'t':_0x7598ad(0x271)},{'s':_0x7598ad(0x23a),'t':'.4.SET_TEMPERATURE'},{'s':_0x7598ad(0x203),'t':_0x7598ad(0x249)},{'s':'local_temperature','t':_0x7598ad(0x1f3)},{'s':_0x7598ad(0x27a),'t':_0x7598ad(0x1df)},{'s':_0x7598ad(0x266),'t':'target_temperature'},{'s':_0x7598ad(0x281),'t':_0x7598ad(0x221)},{'s':_0x7598ad(0x295),'t':_0x7598ad(0x204)},{'s':_0x7598ad(0x266),'t':_0x7598ad(0x235)}];else _0x2d654b===_0x7598ad(0x227)&&(_0x5f6aec=[{'s':_0x7598ad(0x1fe),'t':_0x7598ad(0x294)},{'s':_0x7598ad(0x23a),'t':'.1.LEVEL'},{'s':_0x7598ad(0x23a),'t':_0x7598ad(0x253)},{'s':_0x7598ad(0x27a),'t':_0x7598ad(0x280)},{'s':'temperature','t':_0x7598ad(0x202)},{'s':_0x7598ad(0x266),'t':_0x7598ad(0x283)}]);for(const _0x1b3983 of _0x5f6aec){if(_0x4a84d1[_0x7598ad(0x1f2)](_0x1b3983['s'])){const _0x15f564=_0x4a84d1[_0x7598ad(0x24b)](_0x1b3983['s'],_0x1b3983['t']),_0x504a3b=await _0x57b956[_0x7598ad(0x28d)](_0x15f564);if(_0x504a3b)return _0x15f564;}}try{const _0x44cef3=_0x4a84d1['split']('.');if(_0x44cef3[_0x7598ad(0x217)]>0x2){const _0x28c09f=_0x44cef3[_0x7598ad(0x239)](0x0,-0x1)[_0x7598ad(0x220)]('.'),_0x5407a9=await _0x57b956[_0x7598ad(0x25c)](_0x28c09f+'.*'),_0x18f0c7=[],_0x378800=_0x4a84d1[_0x7598ad(0x296)](/[._]+/)[_0x7598ad(0x272)](_0x191b3a=>!['openknx','0',_0x7598ad(0x274),_0x7598ad(0x236),_0x7598ad(0x1db),_0x7598ad(0x266),_0x7598ad(0x282),_0x7598ad(0x245),_0x7598ad(0x228),_0x7598ad(0x1f8)]['includes'](_0x191b3a[_0x7598ad(0x27d)]()));for(const [_0x30dd08,_0x10894e]of Object[_0x7598ad(0x1ff)](_0x5407a9)){if(_0x30dd08===_0x4a84d1)continue;if(_0x10894e&&_0x10894e[_0x7598ad(0x26a)]){const _0x58ed62=_0x30dd08[_0x7598ad(0x27d)](),_0xdd306=(_0x10894e[_0x7598ad(0x26a)][_0x7598ad(0x22b)]||'')['toLowerCase'](),_0x51c599=(_0x10894e['common'][_0x7598ad(0x1ed)]||'')[_0x7598ad(0x27d)]();let _0x2257ba=![];if(_0x2d654b===_0x7598ad(0x235)&&_0x10894e[_0x7598ad(0x26a)]['write']===!![])_0x2257ba=_0x58ed62[_0x7598ad(0x1f2)](_0x7598ad(0x232))||_0x58ed62['includes']('soll')||_0x58ed62[_0x7598ad(0x1f2)](_0x7598ad(0x276))||_0xdd306[_0x7598ad(0x1f2)](_0x7598ad(0x1f5))||_0xdd306[_0x7598ad(0x1f2)]('thermostat.setpoint');else _0x2d654b===_0x7598ad(0x227)&&(_0x2257ba=_0x58ed62['includes'](_0x7598ad(0x283))||_0x58ed62['includes'](_0x7598ad(0x227))||_0x58ed62[_0x7598ad(0x1f2)](_0x7598ad(0x242))||_0x58ed62[_0x7598ad(0x1f2)](_0x7598ad(0x200))||_0xdd306[_0x7598ad(0x1f2)](_0x7598ad(0x290))||_0xdd306[_0x7598ad(0x1f2)](_0x7598ad(0x243))||_0x51c599[_0x7598ad(0x1f2)]('%'));if(_0x2257ba){const _0x190272=_0x30dd08[_0x7598ad(0x296)](/[._]+/)['map'](_0x528b2c=>_0x528b2c['toLowerCase']());let _0x1adc4f=0x0;_0x378800[_0x7598ad(0x224)](_0x5c04ae=>{const _0x493c92=_0x7598ad;if(_0x190272[_0x493c92(0x1f2)](_0x5c04ae[_0x493c92(0x27d)]()))_0x1adc4f++;}),_0x18f0c7[_0x7598ad(0x1dd)]({'id':_0x30dd08,'score':_0x1adc4f});}}}if(_0x18f0c7[_0x7598ad(0x217)]>0x0){_0x18f0c7[_0x7598ad(0x24f)]((_0xe74613,_0x34d571)=>_0x34d571['score']-_0xe74613[_0x7598ad(0x286)]);if(_0x18f0c7[0x0][_0x7598ad(0x286)]>0x0)return _0x18f0c7[0x0]['id'];}}}catch(_0x4237d1){}return null;}async function scanThermostats(_0x3b5e5){const _0x18d141=a1_0x2633e8,_0x310217=_0x3b5e5[_0x18d141(0x269)]['devices']||[],_0x201365=[],_0x1e81d7=_0x310217['filter'](_0x51ebc1=>_0x51ebc1['id']&&_0x51ebc1['id']['includes']('temperature')||_0x51ebc1[_0x18d141(0x291)]&&['temperature','thermostat',_0x18d141(0x245)][_0x18d141(0x1f2)](_0x51ebc1[_0x18d141(0x291)])||_0x51ebc1[_0x18d141(0x1f6)]&&_0x51ebc1[_0x18d141(0x1f6)][_0x18d141(0x27d)]()['includes'](_0x18d141(0x25a)));for(const _0x4d2e17 of _0x1e81d7){const _0x326d91=await findRelatedId(_0x3b5e5,_0x4d2e17['id'],_0x18d141(0x235)),_0x193aad=await findRelatedId(_0x3b5e5,_0x4d2e17['id'],_0x18d141(0x227));let _0xc5855d=_0x18d141(0x1fc),_0x4a42b2=![],_0x5bdf5a=_0x3b5e5['config']['thermostatMapping']||{};if(typeof _0x5bdf5a==='string')try{_0x5bdf5a=JSON[_0x18d141(0x268)](_0x5bdf5a);}catch(_0x105dba){}let _0x15c7ed=_0x3b5e5[_0x18d141(0x269)]['valveMapping']||{};if(typeof _0x15c7ed===_0x18d141(0x246))try{_0x15c7ed=JSON[_0x18d141(0x268)](_0x15c7ed);}catch(_0x28c253){}if(_0x5bdf5a[_0x4d2e17['id']]&&_0x5bdf5a[_0x4d2e17['id']]===_0x326d91||_0x15c7ed[_0x4d2e17['id']]&&_0x15c7ed[_0x4d2e17['id']]===_0x193aad)_0xc5855d=_0x18d141(0x1dc),_0x4a42b2=!![];else(_0x326d91||_0x193aad)&&(_0xc5855d='Auto-Erkennung');_0x201365[_0x18d141(0x1dd)]({'room':_0x4d2e17['location']||_0x18d141(0x270),'sensorId':_0x4d2e17['id'],'setpointId':_0x326d91||'-','valveId':_0x193aad||'-','source':_0xc5855d,'isManual':_0x4a42b2,'status':_0x326d91&&_0x193aad?_0x18d141(0x240):_0x326d91?'OK':_0x18d141(0x289)});}return _0x201365[_0x18d141(0x24f)]((_0x217c37,_0x352df2)=>_0x217c37[_0x18d141(0x278)]['localeCompare'](_0x352df2[_0x18d141(0x278)]));}async function updateSchedulePreview(_0x393a65){const _0x5467c5=a1_0x2633e8;if(!_0x393a65['config'][_0x5467c5(0x28e)]||!_0x393a65[_0x5467c5(0x269)][_0x5467c5(0x222)])return;let _0x28f483={};try{const _0x6f5996=await _0x393a65['getStateAsync']('analysis.energy.warmupTimes');if(_0x6f5996&&_0x6f5996[_0x5467c5(0x225)])_0x28f483=JSON[_0x5467c5(0x268)](_0x6f5996[_0x5467c5(0x225)]);}catch(_0x319e42){}const _0x54dfdc=[],_0x10c4de=Date[_0x5467c5(0x29d)](),_0x58c236=0x30*0x3c*0x3c*0x3e8;try{const _0x336972=await _0x393a65[_0x5467c5(0x1ec)](_0x393a65[_0x5467c5(0x269)][_0x5467c5(0x222)]+'.data.table');if(!_0x336972||!_0x336972['val'])return;const _0x171073=JSON[_0x5467c5(0x268)](_0x336972[_0x5467c5(0x225)]),_0x1d0098=_0x393a65[_0x5467c5(0x269)][_0x5467c5(0x26f)]||[],_0x2891f9=_0x393a65[_0x5467c5(0x269)]['devices']||[],_0xd0b3f4=new Set();_0x2891f9[_0x5467c5(0x224)](_0x13dc7d=>{const _0x3889e8=_0x5467c5;if(_0x13dc7d['location'])_0xd0b3f4[_0x3889e8(0x1e5)](_0x13dc7d[_0x3889e8(0x26d)]);});for(const _0x32cb2e of _0x171073){if(_0x32cb2e['_calName']&&_0x1d0098[_0x5467c5(0x217)]>0x0&&!_0x1d0098['includes'](_0x32cb2e[_0x5467c5(0x1ea)]))continue;const _0x353654=_0x32cb2e[_0x5467c5(0x297)]||_0x32cb2e['eventStart']||_0x32cb2e[_0x5467c5(0x241)];if(!_0x353654)continue;const _0x3dc433=new Date(_0x353654),_0x37965d=_0x3dc433[_0x5467c5(0x255)]();if(isNaN(_0x37965d))continue;if(_0x37965d<_0x10c4de)continue;if(_0x37965d>_0x10c4de+_0x58c236)continue;const _0x4bfa41=(_0x32cb2e['event']||_0x32cb2e['summary']||'')[_0x5467c5(0x27d)]();let _0x46d7f1=![],_0x122450=[],_0x48eaae=_0x32cb2e[_0x5467c5(0x1f9)]||_0x32cb2e[_0x5467c5(0x1fb)]||_0x5467c5(0x270);if(_0x4bfa41['includes'](_0x5467c5(0x27c))||_0x4bfa41[_0x5467c5(0x1f2)](_0x5467c5(0x27f))||_0x4bfa41[_0x5467c5(0x1f2)](_0x5467c5(0x22f)))_0x46d7f1=!![],_0x122450=Array[_0x5467c5(0x262)](_0xd0b3f4);else for(const _0x18b07f of _0xd0b3f4){if(_0x4bfa41[_0x5467c5(0x1f2)](_0x18b07f['toLowerCase']()))_0x122450[_0x5467c5(0x1dd)](_0x18b07f);}_0x122450['length']>0x0&&_0x122450[_0x5467c5(0x224)](_0xbd72be=>{const _0x139276=_0x5467c5;let _0x1ae97d=0x3c;if(_0x46d7f1){let _0x2312b8=0x0;Object['values'](_0x28f483)[_0x139276(0x224)](_0x18c251=>{if(_0x18c251>_0x2312b8)_0x2312b8=_0x18c251;}),_0x1ae97d=_0x2312b8>0x0?_0x2312b8:0x78;}else _0x1ae97d=getWarmupRobust(_0x28f483,_0xbd72be);const _0x1f97c5=new Date(_0x37965d-_0x1ae97d*0xea60);_0x54dfdc[_0x139276(0x1dd)]({'eventTime':_0x37965d,'triggerTime':_0x1f97c5[_0x139276(0x255)](),'room':_0xbd72be,'minutes':_0x1ae97d,'reason':_0x48eaae,'isGlobal':_0x46d7f1});});}}catch(_0x4a415f){}_0x54dfdc[_0x5467c5(0x24f)]((_0x32bb49,_0xbc70da)=>_0x32bb49[_0x5467c5(0x23e)]-_0xbc70da[_0x5467c5(0x23e)]);const _0xb5fb92=_0x54dfdc['slice'](0x0,0x5);await _0x393a65['setStateAsync'](_0x5467c5(0x27b),{'val':JSON['stringify'](_0xb5fb92),'ack':!![]});}async function monitorEnforcements(_0x38774a){const _0x15da92=a1_0x2633e8;try{const _0x131fe4=_0x15da92(0x1e4),_0x56e8c1=await _0x38774a[_0x15da92(0x1ee)](_0x131fe4);if(!_0x56e8c1||!_0x56e8c1[_0x15da92(0x225)])return;let _0x3dd18d=[];try{_0x3dd18d=JSON[_0x15da92(0x268)](_0x56e8c1[_0x15da92(0x225)]);}catch(_0x367be3){return;}if(!Array[_0x15da92(0x22d)](_0x3dd18d)||_0x3dd18d['length']===0x0)return;const _0x475f8c=Date[_0x15da92(0x29d)](),_0x2dde67=_0x38774a[_0x15da92(0x269)]['devices']||[];let _0x59c207=![];for(let _0x43e106=_0x3dd18d[_0x15da92(0x217)]-0x1;_0x43e106>=0x0;_0x43e106--){const _0x31b5f5=_0x3dd18d[_0x43e106];if(_0x475f8c>=_0x31b5f5[_0x15da92(0x247)]){_0x38774a['log'][_0x15da92(0x20a)](_0x15da92(0x29c)+_0x31b5f5[_0x15da92(0x278)]+'\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.'),_0x3dd18d[_0x15da92(0x21a)](_0x43e106,0x1),_0x59c207=!![];continue;}const _0x575cff=_0x2dde67[_0x15da92(0x263)](_0x5c265b=>normalize(_0x5c265b['location'])===normalize(_0x31b5f5[_0x15da92(0x278)])&&(_0x5c265b[_0x15da92(0x291)]===_0x15da92(0x266)||_0x5c265b[_0x15da92(0x291)]===_0x15da92(0x23b)));if(_0x575cff){const _0xaf52c3=await findRelatedId(_0x38774a,_0x575cff['id'],_0x15da92(0x235));if(_0xaf52c3){const _0x1aff1a=await _0x38774a['getForeignStateAsync'](_0xaf52c3);_0x1aff1a&&typeof _0x1aff1a[_0x15da92(0x225)]==='number'&&(_0x1aff1a[_0x15da92(0x225)]<0xf&&(_0x38774a[_0x15da92(0x1e9)][_0x15da92(0x26b)](_0x15da92(0x264)+_0x31b5f5[_0x15da92(0x278)]+_0x15da92(0x1e0)+_0x1aff1a[_0x15da92(0x225)]+'¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20'+_0x31b5f5[_0x15da92(0x276)]+_0x15da92(0x260)),await _0x38774a[_0x15da92(0x293)](_0xaf52c3,_0x31b5f5[_0x15da92(0x276)]),await logAutomationAction(_0x38774a,'[FORCE]\x20'+_0x31b5f5[_0x15da92(0x278)]+':\x20'+_0x1aff1a[_0x15da92(0x225)]+_0x15da92(0x273)+_0x31b5f5[_0x15da92(0x276)]+'¬∞C\x20(Kalender-Schutz)')));}}}_0x59c207&&await _0x38774a[_0x15da92(0x292)](_0x131fe4,{'val':JSON[_0x15da92(0x20c)](_0x3dd18d),'ack':!![]});}catch(_0x1baa56){_0x38774a[_0x15da92(0x1e9)][_0x15da92(0x27e)](_0x15da92(0x212)+_0x1baa56[_0x15da92(0x1ef)]);}}async function checkCalendarTriggers(_0x12be75){const _0x10b947=a1_0x2633e8;if(!_0x12be75[_0x10b947(0x269)][_0x10b947(0x28e)]||!_0x12be75[_0x10b947(0x269)]['calendarInstance'])return;await updateSchedulePreview(_0x12be75);let _0xaff5d1={},_0xe1824f={};try{const _0x27a9c3=await _0x12be75[_0x10b947(0x1ee)](_0x10b947(0x20b));if(_0x27a9c3&&_0x27a9c3['val'])_0xaff5d1=JSON[_0x10b947(0x268)](_0x27a9c3['val']);const _0x390b59=await _0x12be75['getStateAsync'](_0x10b947(0x215));if(_0x390b59&&_0x390b59[_0x10b947(0x225)])_0xe1824f=JSON[_0x10b947(0x268)](_0x390b59['val']);}catch(_0x194a83){}let _0x3b2205={'default':0x15};try{const _0x2b06f9=await _0x12be75['getStateAsync'](_0x10b947(0x1da));if(_0x2b06f9&&_0x2b06f9[_0x10b947(0x225)])_0x3b2205=JSON[_0x10b947(0x268)](_0x2b06f9[_0x10b947(0x225)]);}catch(_0x386305){}let _0x483bd8=[];try{const _0x386d82=await _0x12be75[_0x10b947(0x1ee)](_0x10b947(0x1e4));if(_0x386d82&&_0x386d82[_0x10b947(0x225)])_0x483bd8=JSON[_0x10b947(0x268)](_0x386d82['val']);}catch(_0x55df44){}try{const _0x5e1134=await _0x12be75[_0x10b947(0x1ec)](_0x12be75['config'][_0x10b947(0x222)]+_0x10b947(0x258));if(!_0x5e1134||!_0x5e1134[_0x10b947(0x225)])return;const _0xbe282b=JSON[_0x10b947(0x268)](_0x5e1134[_0x10b947(0x225)]),_0xf8dfcd=Date['now'](),_0x740966=_0x12be75['config']['devices']||[],_0x331067=_0x12be75[_0x10b947(0x269)]['calendarSelection']||[];let _0x1f6da3=![];for(const _0x3999c3 of _0xbe282b){if(_0x3999c3[_0x10b947(0x1ea)]&&_0x331067[_0x10b947(0x217)]>0x0&&!_0x331067[_0x10b947(0x1f2)](_0x3999c3['_calName']))continue;const _0x8b8126=_0x3999c3[_0x10b947(0x297)]||_0x3999c3[_0x10b947(0x2a0)]||_0x3999c3['date'];if(!_0x8b8126)continue;const _0x3959b7=new Date(_0x8b8126);if(isNaN(_0x3959b7[_0x10b947(0x255)]()))continue;const _0x1d92f3=(_0x3999c3[_0x10b947(0x1f9)]||_0x3999c3['summary']||'')[_0x10b947(0x27d)]();if(_0x1d92f3[_0x10b947(0x1f2)](_0x10b947(0x27c))||_0x1d92f3[_0x10b947(0x1f2)](_0x10b947(0x27f))||_0x1d92f3[_0x10b947(0x1f2)](_0x10b947(0x22f))){let _0x270e80=0x0;Object['values'](_0xaff5d1)[_0x10b947(0x224)](_0x3e125c=>{if(_0x3e125c>_0x270e80)_0x270e80=_0x3e125c;});if(_0x270e80===0x0)_0x270e80=0x78;const _0x1464f3=_0x3959b7[_0x10b947(0x255)]()-_0x270e80*0xea60;_0xf8dfcd>=_0x1464f3&&_0xf8dfcd<_0x3959b7[_0x10b947(0x255)]()&&(_0x12be75[_0x10b947(0x25d)]!==_0x10b947(0x211)&&(_0x12be75[_0x10b947(0x1e9)][_0x10b947(0x20a)](_0x10b947(0x24c)+_0x270e80+_0x10b947(0x28a)),await _0x12be75['setStateAsync'](_0x10b947(0x231),{'val':_0x10b947(0x211),'ack':![]})));}for(const _0xa7131f of _0x740966){if(_0xa7131f[_0x10b947(0x26d)]){const _0x1fa074=_0xa7131f[_0x10b947(0x26d)][_0x10b947(0x27d)](),_0x2b7181=(_0xa7131f['name']||'')[_0x10b947(0x27d)]();let _0x55ae0c=_0x1d92f3[_0x10b947(0x1f2)](_0x1fa074);!_0x55ae0c&&_0x2b7181[_0x10b947(0x217)]>0x3&&_0x1d92f3[_0x10b947(0x1f2)](_0x2b7181)&&(_0x55ae0c=!![]);if(_0x55ae0c){const _0x33936f=getWarmupRobust(_0xaff5d1,_0xa7131f[_0x10b947(0x26d)]),_0x535a45=_0xe1824f[_0xa7131f['location']]||'Classic',_0x43b7ab=_0x3959b7[_0x10b947(0x255)]()-_0x33936f*0xea60;if(_0xf8dfcd>=_0x43b7ab&&_0xf8dfcd<_0x3959b7['getTime']()){const _0x1e13c0=lastActions[_0x10b947(0x20e)+_0xa7131f[_0x10b947(0x26d)]];if(_0x1e13c0&&_0xf8dfcd-_0x1e13c0<CAL_COOLDOWN_MS)continue;const _0x5823d9=await findRelatedId(_0x12be75,_0xa7131f['id'],_0x10b947(0x235));if(_0x5823d9){let _0x384855=_0x3b2205[_0xa7131f['location']];if(_0x384855===undefined)_0x384855=_0x3b2205[_0x10b947(0x214)];if(_0x384855===undefined)_0x384855=0x15;const _0xf3c257=await _0x12be75[_0x10b947(0x1ec)](_0x5823d9);if(_0xf3c257&&typeof _0xf3c257[_0x10b947(0x225)]===_0x10b947(0x23d)&&_0xf3c257['val']<_0x384855-0.5){_0x12be75['log'][_0x10b947(0x20a)](_0x10b947(0x26e)+_0x535a45+']:\x20Raum-Trigger\x20\x27'+_0xa7131f[_0x10b947(0x26d)]+_0x10b947(0x1de)+_0x1d92f3+_0x10b947(0x287)+_0x384855+'¬∞C\x20(Vorlauf:\x20'+_0x33936f+_0x10b947(0x28a)),await _0x12be75[_0x10b947(0x293)](_0x5823d9,_0x384855),await logAutomationAction(_0x12be75,_0x10b947(0x209)+_0xa7131f[_0x10b947(0x26d)]+_0x10b947(0x205)+_0x384855+_0x10b947(0x284)+_0x535a45+')'),lastActions['cal_'+_0xa7131f[_0x10b947(0x26d)]]=_0xf8dfcd;const _0x881cdc=_0x483bd8[_0x10b947(0x201)](_0x36d398=>_0x36d398[_0x10b947(0x278)]===_0xa7131f[_0x10b947(0x26d)]);if(_0x881cdc!==-0x1)_0x483bd8[_0x10b947(0x21a)](_0x881cdc,0x1);_0x483bd8['push']({'room':_0xa7131f[_0x10b947(0x26d)],'target':_0x384855,'until':_0x3959b7[_0x10b947(0x255)]()}),_0x1f6da3=!![];}}}}}}}_0x1f6da3&&await _0x12be75[_0x10b947(0x292)](_0x10b947(0x1e4),{'val':JSON['stringify'](_0x483bd8),'ack':!![]});}catch(_0x43d30e){_0x12be75[_0x10b947(0x1e9)][_0x10b947(0x26b)]('Calendar\x20Check\x20Error:\x20'+_0x43d30e[_0x10b947(0x1ef)]);}}function a1_0x20cf(){const _0x2d317d=['apply','Fehlt','\x20min).','[WATCHDOG]\x20','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','getForeignObjectAsync','useCalendar','devices','level.valve','type','setStateAsync','setForeignStateAsync','.1.LEVEL','Ist','split','_date','analysis.energy.rlPenalties','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','consultButler','12stSiJC','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','now','1809988EYOaYv','manual','eventStart','analysis.energy.warmupTargets','wert','Manuelles\x20Mapping','push','\x27\x20(Match:\x20','current_heating_setpoint','\x20auf\x20','\x20ist\x20auf\x20','valveMapping','too_cold','analysis.energy.activeEnforcements','add','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','analysis.energy.mpcActiveInterventions','¬∞C).\x20Sparmodus\x20beendet!','log','_calName','Pr√§diktion:\x20','getForeignStateAsync','unit','getStateAsync','message','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','12416168nHPBwz','includes','occupied_heating_setpoint','trim','level.temperature','name','mpc_','state','event','¬∞C!\x20(Puffer:\x20','summary','Nicht\x20gefunden','dimmer','.1.ACTUAL_TEMPERATURE','entries','position','findIndex','valve_position','ACTUAL_TEMPERATURE','Soll','\x20->\x20','indexOf','2777994bwSsjz','\x20wurde\x20manuell\x20erh√∂ht.','[CAL]\x20','info','analysis.energy.warmupTimes','stringify','approved','cal_','thermostatMapping','[MPC]\x20','normal','Enforcement\x20Monitor\x20Error:\x20','./ai_agent','default','analysis.energy.warmupSources','¬∞C\x20<\x20','length','\x20min)','off','splice',':\x20Aufheizen\x20auf\x20','abs','1688458stmXaP','üßπ\x20[MPC\x20CLEANUP]\x20','\x20erreicht\x20Limit\x20(','join','SET','calendarInstance','üö®\x20[MPC\x20WATCHDOG]\x20','forEach','val','2481561vSCdzm','valve','messwert','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20','\x20wieder\x20auf\x20','role','21Nylaun','isArray','constructor','ankunft','open','system.mode','set','Unknown','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','setpoint','ist','(((.+)+)+)+$','4177590ktoNqB','slice','.1.TEMPERATURE','thermostat','reason','number','triggerTime','analysis.automation.actionLog','PERFECT','date','stellwert','value.valve','\x20gefunden!','sensor','string','until','window','SET_POINT_TEMPERATURE','remove','replace','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','toString','rescue_','sort','¬∞C!\x20(Puffer\x20leer).','unshift',':\x20Absenkung\x20auf\x20','.4.VALVE_STATE','11xwbrRN','getTime','search','2Gfodhd','.data.table','analysis.energy.ventilationAlerts','temp','\x20->\x20Schalte\x20','getForeignObjectsAsync','currentSystemMode',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','¬∞C.','sendToPythonWrapper','from','find','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','active','temperature','contact','parse','config','common','warn','_meta','location','üìÖ\x20SMART\x20SCHEDULE\x20[','calendarSelection','Unbekannt','.1.SET_POINT_TEMPERATURE','filter','¬∞C\x20->\x20','hm-rpc','exports','target','65953460yrVIPh','room','toUpperCase','local_temperature','analysis.energy.schedulePreview','urlaub\x20ende','toLowerCase','error','r√ºckkehr','pi_heating_demand','ACTUAL','actual','level','¬∞C\x20(via\x20','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','score',')\x20aktiv.\x20Heize\x20auf\x20'];a1_0x20cf=function(){return _0x2d317d;};return a1_0x20cf();}async function manageMpcIntervention(_0x303b91,_0xa8cb5b,_0x31a2ff){const _0x9d242f=a1_0x2633e8;try{const _0x58f32e=_0x9d242f(0x1e7),_0xdc9753=await _0x303b91['getStateAsync'](_0x58f32e);let _0x2a3736=[];if(_0xdc9753&&_0xdc9753[_0x9d242f(0x225)])try{_0x2a3736=JSON['parse'](_0xdc9753['val']);}catch(_0x5e1034){}const _0xeac5a4=_0x2a3736[_0x9d242f(0x206)](_0xa8cb5b);if(_0x31a2ff===_0x9d242f(0x1e5))_0xeac5a4===-0x1&&(_0x2a3736[_0x9d242f(0x1dd)](_0xa8cb5b),await _0x303b91[_0x9d242f(0x292)](_0x58f32e,{'val':JSON[_0x9d242f(0x20c)](_0x2a3736),'ack':!![]}));else _0x31a2ff===_0x9d242f(0x24a)&&(_0xeac5a4!==-0x1&&(_0x2a3736['splice'](_0xeac5a4,0x1),await _0x303b91['setStateAsync'](_0x58f32e,{'val':JSON[_0x9d242f(0x20c)](_0x2a3736),'ack':!![]})));}catch(_0x2b1f4b){}}async function cleanupGhostInterventions(_0x38b29b){const _0x12afea=a1_0x2633e8;try{const _0x3cc458=_0x12afea(0x1e7),_0x29c2f9=await _0x38b29b['getStateAsync'](_0x3cc458);if(!_0x29c2f9||!_0x29c2f9[_0x12afea(0x225)])return;const _0x19be0c=JSON[_0x12afea(0x268)](_0x29c2f9[_0x12afea(0x225)]);if(!Array[_0x12afea(0x22d)](_0x19be0c)||_0x19be0c[_0x12afea(0x217)]===0x0)return;let _0x35571b={'default':0x15};try{const _0xc74f4e=await _0x38b29b[_0x12afea(0x1ee)]('analysis.energy.warmupTargets');if(_0xc74f4e&&_0xc74f4e[_0x12afea(0x225)])_0x35571b=JSON[_0x12afea(0x268)](_0xc74f4e[_0x12afea(0x225)]);}catch(_0x188681){}let _0x442ded=[];try{const _0x3725ac=await _0x38b29b[_0x12afea(0x1ee)](_0x12afea(0x259));if(_0x3725ac&&_0x3725ac[_0x12afea(0x225)])_0x442ded=JSON['parse'](_0x3725ac[_0x12afea(0x225)]);}catch(_0x2aabf1){}let _0x552fee={},_0x3b497b=![];try{const _0x8c0872=await _0x38b29b[_0x12afea(0x1ee)](_0x12afea(0x298));if(_0x8c0872&&_0x8c0872[_0x12afea(0x225)])_0x552fee=JSON[_0x12afea(0x268)](_0x8c0872['val']);}catch(_0x420fe7){}if(_0x552fee[_0x12afea(0x26c)]){const _0x11296a=Date['now']();for(const [_0xf0fe1,_0xb02b99]of Object['entries'](_0x552fee[_0x12afea(0x26c)])){_0x11296a-_0xb02b99>PENALTY_TTL&&(delete _0x552fee[_0xf0fe1],delete _0x552fee[_0x12afea(0x26c)][_0xf0fe1],_0x3b497b=!![],_0x38b29b[_0x12afea(0x1e9)][_0x12afea(0x20a)](_0x12afea(0x285)+_0xf0fe1+_0x12afea(0x1f0)));}}const _0x4b062e=_0x38b29b[_0x12afea(0x269)]['devices']||[];let _0x2d4aea=![];for(let _0x51d354=_0x19be0c['length']-0x1;_0x51d354>=0x0;_0x51d354--){const _0x1ffd1d=_0x19be0c[_0x51d354],_0x344176=_0x4b062e[_0x12afea(0x263)](_0x58a78b=>normalize(_0x58a78b['location'])===normalize(_0x1ffd1d)&&(_0x58a78b['type']==='temperature'||_0x58a78b[_0x12afea(0x291)]===_0x12afea(0x23b)));if(!_0x344176){_0x38b29b[_0x12afea(0x1e9)][_0x12afea(0x26b)](_0x12afea(0x234)+_0x1ffd1d+_0x12afea(0x1e6)),_0x19be0c['splice'](_0x51d354,0x1),_0x2d4aea=!![];continue;}if(_0x344176){const _0x3a962b=await findRelatedId(_0x38b29b,_0x344176['id'],_0x12afea(0x235)),_0x4c7545=await _0x38b29b[_0x12afea(0x1ec)](_0x344176['id']);if(_0x3a962b){const _0x85aec6=await _0x38b29b[_0x12afea(0x1ec)](_0x3a962b);if(_0x85aec6&&typeof _0x85aec6['val']===_0x12afea(0x23d)){let _0x588cc5=![],_0x27ea1b='';Math[_0x12afea(0x21c)](_0x85aec6[_0x12afea(0x225)]-ECO_TEMP)>0.5&&(_0x588cc5=!![],_0x27ea1b=_0x12afea(0x29f));if(!_0x588cc5&&_0x4c7545&&typeof _0x4c7545['val']===_0x12afea(0x23d)){const _0x450755=_0x35571b[_0x1ffd1d]||_0x35571b['default']||0x15;_0x4c7545[_0x12afea(0x225)]<_0x450755+0.2&&(_0x588cc5=!![],_0x27ea1b=_0x12afea(0x1e3));}if(_0x588cc5){if(_0x27ea1b==='manual'){_0x38b29b[_0x12afea(0x1e9)][_0x12afea(0x20a)](_0x12afea(0x21e)+_0x1ffd1d+_0x12afea(0x1e1)+_0x85aec6[_0x12afea(0x225)]+'¬∞C\x20(nicht\x20'+ECO_TEMP+'¬∞C).\x20Entferne\x20Status.');const _0x3a503=lastActions['cal_'+_0x1ffd1d],_0x5434bb=_0x3a503&&Date[_0x12afea(0x29d)]()-_0x3a503<0x2*0x3c*0x3e8;if(!_0x5434bb&&_0x85aec6['val']>ECO_TEMP+0.5){_0x38b29b[_0x12afea(0x261)]&&(_0x38b29b[_0x12afea(0x1e9)][_0x12afea(0x20a)](_0x12afea(0x28c)+_0x1ffd1d+_0x12afea(0x208)),_0x38b29b[_0x12afea(0x261)]('TRAIN_RL_PENALTY',{'room':_0x1ffd1d}));const _0x375a0d=_0x1ffd1d+'_'+new Date()['getHours']();if(!_0x552fee[_0x375a0d]){_0x552fee[_0x375a0d]=0x1;if(!_0x552fee[_0x12afea(0x26c)])_0x552fee[_0x12afea(0x26c)]={};_0x552fee['_meta'][_0x375a0d]=Date[_0x12afea(0x29d)](),_0x3b497b=!![];}}else _0x5434bb&&_0x38b29b[_0x12afea(0x1e9)][_0x12afea(0x20a)]('üìÖ\x20[MPC\x20INFO]\x20'+_0x1ffd1d+_0x12afea(0x299));}else{if(_0x27ea1b===_0x12afea(0x1e3)){let _0x59f79b=![];if(_0x442ded['find'](_0x27f452=>_0x27f452['room']===_0x1ffd1d))_0x59f79b=!![];const _0x435761=_0x4b062e[_0x12afea(0x272)](_0x2aaf02=>normalize(_0x2aaf02[_0x12afea(0x26d)])===normalize(_0x1ffd1d)&&(_0x2aaf02[_0x12afea(0x291)]===_0x12afea(0x248)||_0x2aaf02[_0x12afea(0x291)]===_0x12afea(0x245)||_0x2aaf02[_0x12afea(0x291)]===_0x12afea(0x267)));for(const _0x3f0cfe of _0x435761){try{const _0xd42c5b=await _0x38b29b[_0x12afea(0x1ec)](_0x3f0cfe['id']);if(_0xd42c5b&&(_0xd42c5b[_0x12afea(0x225)]===!![]||_0xd42c5b[_0x12afea(0x225)]===0x1||String(_0xd42c5b['val'])['toLowerCase']()===_0x12afea(0x230)))_0x59f79b=!![];}catch(_0x2a62f7){}}if(_0x59f79b)_0x38b29b[_0x12afea(0x1e9)][_0x12afea(0x20a)]('üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20'+_0x1ffd1d+_0x12afea(0x25f));else{const _0x3971fa=_0x35571b[_0x1ffd1d]||_0x35571b['default']||0x15;_0x38b29b[_0x12afea(0x1e9)][_0x12afea(0x20a)](_0x12afea(0x223)+_0x1ffd1d+_0x12afea(0x21f)+_0x4c7545[_0x12afea(0x225)]+_0x12afea(0x216)+(_0x3971fa+0.2)+_0x12afea(0x1e8)),await _0x38b29b['setForeignStateAsync'](_0x3a962b,_0x3971fa),await logAutomationAction(_0x38b29b,_0x12afea(0x28b)+_0x1ffd1d+_0x12afea(0x25e)+_0x3971fa+'¬∞C'),lastActions[_0x12afea(0x24e)+_0x1ffd1d]=Date[_0x12afea(0x29d)]();}}}_0x19be0c[_0x12afea(0x21a)](_0x51d354,0x1),_0x2d4aea=!![];}}}}}_0x2d4aea&&await _0x38b29b['setStateAsync'](_0x3cc458,{'val':JSON['stringify'](_0x19be0c),'ack':!![]}),_0x3b497b&&await _0x38b29b['setStateAsync'](_0x12afea(0x298),{'val':JSON[_0x12afea(0x20c)](_0x552fee),'ack':!![]});}catch(_0x10b1cc){}}function a1_0x375b(_0x159794,_0x1eb416){const _0xdce46=a1_0x20cf();return a1_0x375b=function(_0x2902ac,_0x45861f){_0x2902ac=_0x2902ac-0x1da;let _0x20cf52=_0xdce46[_0x2902ac];return _0x20cf52;},a1_0x375b(_0x159794,_0x1eb416);}async function applyEnergySavings(_0x3cfa1c,_0x5cd357){const _0x1aebb0=a1_0x2633e8;await cleanupGhostInterventions(_0x3cfa1c);if(!_0x5cd357||_0x5cd357[_0x1aebb0(0x217)]===0x0)return;const _0x416e94=_0x3cfa1c['config'][_0x1aebb0(0x28f)]||[],_0xaa60b5=Date[_0x1aebb0(0x29d)]();for(const _0x56fc30 of _0x5cd357){const _0x24e0de=_0x56fc30[_0x1aebb0(0x278)],_0x381e1a=_0x56fc30['minutes_safe'],_0x3e5175=_0x56fc30[_0x1aebb0(0x276)]||0x15;if(lastActions[_0x1aebb0(0x24e)+_0x24e0de]&&_0xaa60b5-lastActions[_0x1aebb0(0x24e)+_0x24e0de]<RESCUE_LOCK_MS)continue;const _0x1d971b=_0x416e94[_0x1aebb0(0x263)](_0x585c8a=>normalize(_0x585c8a[_0x1aebb0(0x26d)])===normalize(_0x24e0de)&&(_0x585c8a[_0x1aebb0(0x291)]===_0x1aebb0(0x266)||_0x585c8a[_0x1aebb0(0x291)]===_0x1aebb0(0x23b)));if(!_0x1d971b)continue;const _0x5e5fca=await findRelatedId(_0x3cfa1c,_0x1d971b['id'],_0x1aebb0(0x235));if(_0x5e5fca){if(lastActions[_0x1aebb0(0x1f7)+_0x24e0de]&&_0xaa60b5-lastActions[_0x1aebb0(0x1f7)+_0x24e0de]<0x1e*0x3c*0x3e8)continue;const _0x425d6c=await _0x3cfa1c['getForeignStateAsync'](_0x5e5fca);if(_0x425d6c&&typeof _0x425d6c[_0x1aebb0(0x225)]==='number'){const _0x4010cd=_0x425d6c[_0x1aebb0(0x225)];_0x4010cd!==ECO_TEMP&&await manageMpcIntervention(_0x3cfa1c,_0x24e0de,_0x1aebb0(0x24a));if(_0x381e1a>0x1e)_0x4010cd>ECO_TEMP+0.5&&(_0x3cfa1c[_0x1aebb0(0x1e9)][_0x1aebb0(0x20a)](_0x1aebb0(0x229)+_0x24e0de+_0x1aebb0(0x1e0)+ECO_TEMP+_0x1aebb0(0x1fa)+_0x381e1a+_0x1aebb0(0x218)),await _0x3cfa1c[_0x1aebb0(0x293)](_0x5e5fca,ECO_TEMP),await manageMpcIntervention(_0x3cfa1c,_0x24e0de,'add'),lastActions[_0x1aebb0(0x1f7)+_0x24e0de]=_0xaa60b5,await logAutomationAction(_0x3cfa1c,_0x1aebb0(0x210)+_0x24e0de+_0x1aebb0(0x252)+ECO_TEMP+'¬∞C'));else _0x381e1a<=0xf&&(_0x4010cd<_0x3e5175&&(_0x3cfa1c['log'][_0x1aebb0(0x20a)]('üî•\x20[MPC\x20ACTION]\x20Heize\x20'+_0x24e0de+_0x1aebb0(0x22a)+_0x3e5175+_0x1aebb0(0x250)),await _0x3cfa1c['setForeignStateAsync'](_0x5e5fca,_0x3e5175),await manageMpcIntervention(_0x3cfa1c,_0x24e0de,_0x1aebb0(0x24a)),lastActions[_0x1aebb0(0x1f7)+_0x24e0de]=_0xaa60b5,await logAutomationAction(_0x3cfa1c,_0x1aebb0(0x210)+_0x24e0de+_0x1aebb0(0x21b)+_0x3e5175+'¬∞C')));}}else _0x3cfa1c[_0x1aebb0(0x1e9)][_0x1aebb0(0x26b)]('[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20'+_0x24e0de+_0x1aebb0(0x244));}}module[a1_0x2633e8(0x275)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};