const a1_0x1973bf=a1_0x2d85;(function(_0x55240d,_0x35ac80){const _0x559bb9=a1_0x2d85,_0x330f37=_0x55240d();while(!![]){try{const _0x2ac4aa=-parseInt(_0x559bb9(0x9c))/0x1*(-parseInt(_0x559bb9(0x8b))/0x2)+parseInt(_0x559bb9(0x9d))/0x3*(-parseInt(_0x559bb9(0x95))/0x4)+parseInt(_0x559bb9(0x89))/0x5+-parseInt(_0x559bb9(0xa2))/0x6*(-parseInt(_0x559bb9(0xa7))/0x7)+parseInt(_0x559bb9(0x82))/0x8*(-parseInt(_0x559bb9(0xa5))/0x9)+-parseInt(_0x559bb9(0x99))/0xa+-parseInt(_0x559bb9(0xa6))/0xb*(parseInt(_0x559bb9(0x94))/0xc);if(_0x2ac4aa===_0x35ac80)break;else _0x330f37['push'](_0x330f37['shift']());}catch(_0x1f070d){_0x330f37['push'](_0x330f37['shift']());}}}(a1_0x5693,0x82bf7));function a1_0x5693(){const _0x557feb=['üîç\x20Device-Search\x20failed:\x20Predicted\x20\x27','consultButler','getForeignStateAsync','info','debug','replace','log','active','type','1864pOTInr','setStateAsync','location','\x27\x20(norm:\x20\x27','analysis.automation.mode','now','constructor','3952210DvRIoi','analysis.automation.lastAction','180212YxDDyV','light','search','toString','toLowerCase','exports','getStateAsync','config','ü§ñ\x20Butler\x20Blocked:\x20','2481300soqcVM','697548ckMycs','\x27),\x20but\x20found\x20no\x20matching\x20light\x20device.','setForeignStateAsync','Unknown','2774730TnxcSH','name','dimmer','5GyipVa','3nAckVb','val','reason','switch','find','121758DdAYEh','off','[BLOCKED]\x20','19539tRaskY','33SJEfkd','301EucOnU','./ai_agent'];a1_0x5693=function(){return _0x557feb;};return a1_0x5693();}const a1_0x49e29b=(function(){let _0x4e946c=!![];return function(_0x412b48,_0x2737cf){const _0xc79c20=_0x4e946c?function(){if(_0x2737cf){const _0x32c1b4=_0x2737cf['apply'](_0x412b48,arguments);return _0x2737cf=null,_0x32c1b4;}}:function(){};return _0x4e946c=![],_0xc79c20;};}()),a1_0x55d4be=a1_0x49e29b(this,function(){const _0x1b168e=a1_0x2d85;return a1_0x55d4be[_0x1b168e(0x8e)]()['search']('(((.+)+)+)+$')[_0x1b168e(0x8e)]()[_0x1b168e(0x88)](a1_0x55d4be)[_0x1b168e(0x8d)]('(((.+)+)+)+$');});a1_0x55d4be();'use strict';const aiAgent=require(a1_0x1973bf(0x78)),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function normalize(_0xb0a135){const _0xed18df=a1_0x1973bf;if(!_0xb0a135)return'';return _0xb0a135[_0xed18df(0x8f)]()[_0xed18df(0x7e)](/\s+/g,'')['trim']();}function a1_0x2d85(_0x1d5920,_0x400b80){const _0x2d926f=a1_0x5693();return a1_0x2d85=function(_0x55d4be,_0x49e29b){_0x55d4be=_0x55d4be-0x78;let _0x569318=_0x2d926f[_0x55d4be];return _0x569318;},a1_0x2d85(_0x1d5920,_0x400b80);}async function handlePrediction(_0x266077,_0x80d0cc,_0x46e829){const _0xa041ad=a1_0x1973bf;if(!_0x80d0cc||_0x80d0cc===_0xa041ad(0x98))return;let _0x3feed6=_0xa041ad(0xa3),_0x50223f=0.6;try{const _0x4e688c=await _0x266077[_0xa041ad(0x91)](_0xa041ad(0x86));if(_0x4e688c&&_0x4e688c[_0xa041ad(0x9e)])_0x3feed6=_0x4e688c['val'];const _0x1d843c=await _0x266077['getStateAsync']('analysis.automation.confidenceThreshold');if(_0x1d843c&&_0x1d843c['val'])_0x50223f=_0x1d843c[_0xa041ad(0x9e)];}catch(_0xd65b1c){}if(_0x3feed6==='off')return;if(_0x46e829<_0x50223f)return;const _0x420e07=Date[_0xa041ad(0x87)]();if(lastActions[_0x80d0cc]&&_0x420e07-lastActions[_0x80d0cc]<COOLDOWN_MS)return;const _0x255cb5=_0x266077[_0xa041ad(0x92)]['devices']||[],_0xe836f0=normalize(_0x80d0cc),_0x171d5f=_0x255cb5[_0xa041ad(0xa1)](_0x5db5a0=>{const _0x105dd0=_0xa041ad;return normalize(_0x5db5a0[_0x105dd0(0x84)])===_0xe836f0&&(_0x5db5a0[_0x105dd0(0x81)]===_0x105dd0(0x8c)||_0x5db5a0[_0x105dd0(0x81)]===_0x105dd0(0x9b)||_0x5db5a0[_0x105dd0(0x81)]===_0x105dd0(0xa0));});if(!_0x171d5f){const _0x2d9ac4=_0xa041ad(0x79)+_0x80d0cc+_0xa041ad(0x85)+_0xe836f0+_0xa041ad(0x96);_0x266077['log']['debug'](_0x2d9ac4);return;}const _0x5ae371=await aiAgent[_0xa041ad(0x7a)](_0x266077,_0x80d0cc,_0x171d5f['name'],_0x46e829);if(!_0x5ae371['approved']){_0x266077[_0xa041ad(0x7f)][_0xa041ad(0x7d)](_0xa041ad(0x93)+_0x80d0cc+'\x20->\x20'+_0x5ae371['reason']),await _0x266077[_0xa041ad(0x83)](_0xa041ad(0x8a),{'val':_0xa041ad(0xa4)+_0x5ae371[_0xa041ad(0x9f)],'ack':!![]});return;}const _0x5df749='Pr√§diktion:\x20'+_0x80d0cc+'\x20->\x20Schalte\x20'+_0x171d5f[_0xa041ad(0x9a)]+'\x20('+_0x5ae371['reason']+')';await _0x266077[_0xa041ad(0x83)](_0xa041ad(0x8a),{'val':'['+_0x3feed6['toUpperCase']()+']\x20'+_0x5df749,'ack':!![]});if(_0x3feed6==='simulate')_0x266077[_0xa041ad(0x7f)][_0xa041ad(0x7c)]('üëÄ\x20SIMULATION:\x20'+_0x5df749);else{if(_0x3feed6===_0xa041ad(0x80)){_0x266077[_0xa041ad(0x7f)]['info']('‚ö°\x20ACTION:\x20'+_0x5df749);const _0x25be77=await _0x266077[_0xa041ad(0x7b)](_0x171d5f['id']);if(_0x25be77&&(_0x25be77[_0xa041ad(0x9e)]===!![]||_0x25be77['val']>0x0)){}else await _0x266077[_0xa041ad(0x97)](_0x171d5f['id'],!![]);lastActions[_0x80d0cc]=_0x420e07;}}}module[a1_0x1973bf(0x90)]={'handlePrediction':handlePrediction};