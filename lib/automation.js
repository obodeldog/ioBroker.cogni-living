const a1_0xcfe83c=a1_0x3c3b;(function(_0x488103,_0x25ae18){const _0x5105c7=a1_0x3c3b,_0x4fb426=_0x488103();while(!![]){try{const _0x1de517=parseInt(_0x5105c7(0x247))/0x1+-parseInt(_0x5105c7(0x248))/0x2*(parseInt(_0x5105c7(0x258))/0x3)+parseInt(_0x5105c7(0x1fe))/0x4*(parseInt(_0x5105c7(0x235))/0x5)+parseInt(_0x5105c7(0x275))/0x6*(parseInt(_0x5105c7(0x22b))/0x7)+-parseInt(_0x5105c7(0x254))/0x8*(parseInt(_0x5105c7(0x27c))/0x9)+-parseInt(_0x5105c7(0x20d))/0xa+parseInt(_0x5105c7(0x28e))/0xb*(-parseInt(_0x5105c7(0x237))/0xc);if(_0x1de517===_0x25ae18)break;else _0x4fb426['push'](_0x4fb426['shift']());}catch(_0x353079){_0x4fb426['push'](_0x4fb426['shift']());}}}(a1_0x15d4,0xe745b));const a1_0x26a0e8=(function(){let _0x2baf04=!![];return function(_0x10a4e8,_0x1c4119){const _0x218733=_0x2baf04?function(){const _0x4bd9c1=a1_0x3c3b;if(_0x1c4119){const _0x4b3fad=_0x1c4119[_0x4bd9c1(0x290)](_0x10a4e8,arguments);return _0x1c4119=null,_0x4b3fad;}}:function(){};return _0x2baf04=![],_0x218733;};}()),a1_0x1feb5a=a1_0x26a0e8(this,function(){const _0x358ed7=a1_0x3c3b;return a1_0x1feb5a[_0x358ed7(0x261)]()['search'](_0x358ed7(0x246))[_0x358ed7(0x261)]()[_0x358ed7(0x23e)](a1_0x1feb5a)[_0x358ed7(0x214)](_0x358ed7(0x246));});function a1_0x15d4(){const _0x2b71d5=['calendarSelection','ankunft','\x20->\x20Schalte\x20','analysis.energy.warmupTargets','hm-rpc','setForeignStateAsync','map','number','setpoint','üö®\x20[MPC\x20WATCHDOG]\x20','.4.VALVE_STATE','thermostat.setpoint','Pr√§diktion:\x20','.data.table','parse','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','exports','from','level.temperature','until','log','Unknown','type','location','\x27\x20(Match:\x20','localeCompare','¬∞C.','cal_','position','¬∞C\x20(via\x20','target','getHours',':\x20Aufheizen\x20auf\x20','name','analysis.energy.warmupSources','splice','getForeignObjectAsync','568ihpwdE','target_temperature','string','Manuelles\x20Mapping','sendToPythonWrapper','trim',':\x20Absenkung\x20auf\x20','sensor','toUpperCase','getTime','rescue_','\x20wurde\x20manuell\x20erh√∂ht.','wert','system.mode','find','7623650KyxBbt','warn','level.valve','analysis.energy.warmupTimes','[FORCE]\x20','current_heating_setpoint','contact','search','Nicht\x20gefunden','ist','getForeignStateAsync','write','valve','\x20gefunden!','temperature','too_cold','filter','temp','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','off','¬∞C!\x20(Puffer\x20leer).','add','abs','\x20min)','Unbekannt','push','mpc_',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','¬∞C!\x20(Puffer:\x20','Enforcement\x20Monitor\x20Error:\x20','203KaUjSE','consultButler','manual','valve_position','.4.SET_TEMPERATURE','Classic',']:\x20Raum-Trigger\x20\x27','¬∞C).\x20Sparmodus\x20beendet!','.1.TEMPERATURE','analysis.energy.activeEnforcements','38035lsPSBT','unit','7942584bDNpyf','urlaub\x20ende','stellwert','config','.1.SET_POINT_TEMPERATURE','\x20wieder\x20auf\x20','analysis.energy.ventilationAlerts','constructor','room','¬∞C\x20<\x20','currentSystemMode','analysis.automation.mode','üìÖ\x20[MPC\x20INFO]\x20','\x20ist\x20auf\x20','light','(((.+)+)+)+$','1556862DGJXmd','748606TUhNKa','reason','Calendar\x20Check\x20Error:\x20','.1.LEVEL','[MPC]\x20','forEach','switch','thermostatMapping','openknx','valveMapping','SET','¬∞C\x20(nicht\x20','222744qJaMpe','state','normal','join','6IHrWyy','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','PERFECT','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','eventStart','date','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','summary','occupied_heating_setpoint','toString','score','values','analysis.energy.rlPenalties','now','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','analysis.automation.lastAction','triggerTime','val','unshift','_calName','\x20->\x20','value.valve','getStateAsync','\x20min).','event','analysis.energy.schedulePreview','./ai_agent','¬∞C\x20->\x20','open','255486UqcASX','role','replace','¬∞C).\x20Entferne\x20Status.','.1.ACTUAL_TEMPERATURE','findIndex','default','243QgHjTY','remove','length','r√ºckkehr','Soll','actual','Ist','toLowerCase','Fehlt','¬∞C\x20(Vorlauf:\x20','TRAIN_RL_PENALTY','slice','isArray','devices','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','_date','window','stringify','11LFergN','SET_POINT_TEMPERATURE','apply','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','active','includes','¬∞C\x20(Kalender-Schutz)','entries','local_temperature','useCalendar','_meta','[CAL]\x20','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20','common','error','setStateAsync','split','getForeignObjectsAsync','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','sort','info','calendarInstance','thermostat','message'];a1_0x15d4=function(){return _0x2b71d5;};return a1_0x15d4();}a1_0x1feb5a();'use strict';function a1_0x3c3b(_0x487449,_0x297ae0){const _0x38520a=a1_0x15d4();return a1_0x3c3b=function(_0x1feb5a,_0x26a0e8){_0x1feb5a=_0x1feb5a-0x1d2;let _0x15d4b0=_0x38520a[_0x1feb5a];return _0x15d4b0;},a1_0x3c3b(_0x487449,_0x297ae0);}const aiAgent=require(a1_0xcfe83c(0x272)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x2e052f){const _0x3ae989=a1_0xcfe83c;if(!_0x2e052f)return'';return _0x2e052f[_0x3ae989(0x283)]()['replace'](/\s+/g,'')[_0x3ae989(0x203)]();}function getWarmupRobust(_0x2cedf7,_0x3f38f8){const _0xe54c6=a1_0xcfe83c;if(!_0x2cedf7||!_0x3f38f8)return 0x3c;if(_0x2cedf7[_0x3f38f8]!==undefined)return _0x2cedf7[_0x3f38f8];const _0x54a967=_0x3f38f8[_0xe54c6(0x283)]()['replace'](/√§/g,'ae')[_0xe54c6(0x277)](/√∂/g,'oe')[_0xe54c6(0x277)](/√º/g,'ue')[_0xe54c6(0x277)](/√ü/g,'ss')[_0xe54c6(0x277)](/\s+/g,'_')[_0xe54c6(0x277)](/[^a-z0-9_]/g,'');if(_0x2cedf7[_0x54a967]!==undefined)return _0x2cedf7[_0x54a967];return 0x3c;}async function logAutomationAction(_0x5f0381,_0x5e76d6){const _0xaef5db=a1_0xcfe83c;await _0x5f0381[_0xaef5db(0x29d)](_0xaef5db(0x267),{'val':_0x5e76d6,'ack':!![]});try{const _0x46ae94='analysis.automation.actionLog',_0x289252=await _0x5f0381[_0xaef5db(0x26e)](_0x46ae94);let _0x32082f=[];if(_0x289252&&_0x289252[_0xaef5db(0x269)])try{_0x32082f=JSON[_0xaef5db(0x1e6)](_0x289252[_0xaef5db(0x269)]);}catch(_0x44af1c){}_0x32082f[_0xaef5db(0x26a)]({'ts':Date[_0xaef5db(0x265)](),'msg':_0x5e76d6});if(_0x32082f[_0xaef5db(0x27e)]>0x32)_0x32082f=_0x32082f[_0xaef5db(0x287)](0x0,0x32);await _0x5f0381[_0xaef5db(0x29d)](_0x46ae94,{'val':JSON[_0xaef5db(0x28d)](_0x32082f),'ack':!![]});}catch(_0x1d8917){}}async function handlePrediction(_0x1c87b6,_0x177c41,_0x49fd66){const _0x3de807=a1_0xcfe83c;if(!_0x177c41||_0x177c41===_0x3de807(0x1ee))return;let _0x22ec73=_0x3de807(0x220),_0x2097b4=0.6;try{const _0x5b0a1b=await _0x1c87b6['getStateAsync'](_0x3de807(0x242));if(_0x5b0a1b&&_0x5b0a1b[_0x3de807(0x269)])_0x22ec73=_0x5b0a1b[_0x3de807(0x269)];const _0x57b4f2=await _0x1c87b6[_0x3de807(0x26e)]('analysis.automation.confidenceThreshold');if(_0x57b4f2&&_0x57b4f2[_0x3de807(0x269)])_0x2097b4=_0x57b4f2[_0x3de807(0x269)];}catch(_0x3a09a4){}if(_0x22ec73==='off'||_0x49fd66<_0x2097b4)return;const _0x2046aa=Date[_0x3de807(0x265)]();if(lastActions[_0x177c41]&&_0x2046aa-lastActions[_0x177c41]<COOLDOWN_MS)return;const _0x5085bf=_0x1c87b6['config']['devices']||[],_0x8778ae=normalize(_0x177c41),_0x44e78d=_0x5085bf[_0x3de807(0x20c)](_0x319900=>normalize(_0x319900[_0x3de807(0x1f0)])===_0x8778ae&&(_0x319900['type']===_0x3de807(0x245)||_0x319900[_0x3de807(0x1ef)]==='dimmer'||_0x319900[_0x3de807(0x1ef)]===_0x3de807(0x24e)));if(!_0x44e78d)return;const _0x3738be=await aiAgent[_0x3de807(0x22c)](_0x1c87b6,_0x177c41,_0x44e78d[_0x3de807(0x1fa)],_0x49fd66);if(!_0x3738be['approved'])return;const _0x287ddc=_0x3de807(0x1e4)+_0x177c41+_0x3de807(0x1da)+_0x44e78d[_0x3de807(0x1fa)]+'\x20('+_0x3738be[_0x3de807(0x249)]+')';await logAutomationAction(_0x1c87b6,'['+_0x22ec73[_0x3de807(0x206)]()+']\x20'+_0x287ddc);if(_0x22ec73===_0x3de807(0x292)){const _0x3cc19b=await _0x1c87b6[_0x3de807(0x217)](_0x44e78d['id']);(!_0x3cc19b||!_0x3cc19b['val']&&_0x3cc19b['val']!==!![])&&await _0x1c87b6[_0x3de807(0x1dd)](_0x44e78d['id'],!![]),lastActions[_0x177c41]=_0x2046aa;}}async function findRelatedId(_0x106b67,_0x4c1247,_0x455052='setpoint'){const _0x3dc401=a1_0xcfe83c;if(_0x455052===_0x3dc401(0x1e0)&&_0x106b67[_0x3dc401(0x23a)][_0x3dc401(0x24f)]){let _0x4fc0ff=_0x106b67[_0x3dc401(0x23a)][_0x3dc401(0x24f)];if(typeof _0x4fc0ff===_0x3dc401(0x200))try{_0x4fc0ff=JSON[_0x3dc401(0x1e6)](_0x4fc0ff);}catch(_0x853a20){}if(_0x4fc0ff&&_0x4fc0ff[_0x4c1247])return _0x4fc0ff[_0x4c1247];}if(_0x455052===_0x3dc401(0x219)&&_0x106b67[_0x3dc401(0x23a)]['valveMapping']){let _0x4c4984=_0x106b67[_0x3dc401(0x23a)]['valveMapping'];if(typeof _0x4c4984===_0x3dc401(0x200))try{_0x4c4984=JSON[_0x3dc401(0x1e6)](_0x4c4984);}catch(_0x1d1f51){}if(_0x4c4984&&_0x4c4984[_0x4c1247])return _0x4c4984[_0x4c1247];}let _0x37c6ad=[];if(_0x455052===_0x3dc401(0x1e0))_0x37c6ad=[{'s':_0x3dc401(0x279),'t':_0x3dc401(0x23b)},{'s':'.1.TEMPERATURE','t':_0x3dc401(0x23b)},{'s':'.1.TEMPERATURE','t':_0x3dc401(0x22f)},{'s':'ACTUAL_TEMPERATURE','t':_0x3dc401(0x28f)},{'s':_0x3dc401(0x296),'t':_0x3dc401(0x260)},{'s':_0x3dc401(0x296),'t':_0x3dc401(0x212)},{'s':_0x3dc401(0x21b),'t':_0x3dc401(0x1ff)},{'s':'ACTUAL','t':_0x3dc401(0x252)},{'s':_0x3dc401(0x282),'t':_0x3dc401(0x280)},{'s':_0x3dc401(0x21b),'t':'setpoint'}];else _0x455052===_0x3dc401(0x219)&&(_0x37c6ad=[{'s':_0x3dc401(0x279),'t':_0x3dc401(0x24b)},{'s':_0x3dc401(0x233),'t':_0x3dc401(0x24b)},{'s':_0x3dc401(0x233),'t':_0x3dc401(0x1e2)},{'s':'local_temperature','t':'pi_heating_demand'},{'s':_0x3dc401(0x21b),'t':_0x3dc401(0x22e)},{'s':_0x3dc401(0x21b),'t':'level'}]);for(const _0xb1b460 of _0x37c6ad){if(_0x4c1247['includes'](_0xb1b460['s'])){const _0x4e977e=_0x4c1247[_0x3dc401(0x277)](_0xb1b460['s'],_0xb1b460['t']),_0x5e6ed5=await _0x106b67[_0x3dc401(0x1fd)](_0x4e977e);if(_0x5e6ed5)return _0x4e977e;}}try{const _0x3edefa=_0x4c1247[_0x3dc401(0x29e)]('.');if(_0x3edefa[_0x3dc401(0x27e)]>0x2){const _0x278eaa=_0x3edefa[_0x3dc401(0x287)](0x0,-0x1)[_0x3dc401(0x257)]('.'),_0x16c84d=await _0x106b67[_0x3dc401(0x29f)](_0x278eaa+'.*'),_0x32c1b5=[],_0x1a2e01=_0x4c1247[_0x3dc401(0x29e)](/[._]+/)[_0x3dc401(0x21d)](_0x208283=>![_0x3dc401(0x250),'0',_0x3dc401(0x1dc),_0x3dc401(0x216),_0x3dc401(0x20a),_0x3dc401(0x21b),_0x3dc401(0x281),_0x3dc401(0x205),'messwert',_0x3dc401(0x255)]['includes'](_0x208283[_0x3dc401(0x283)]()));for(const [_0x5cae6f,_0x185ebc]of Object[_0x3dc401(0x295)](_0x16c84d)){if(_0x5cae6f===_0x4c1247)continue;if(_0x185ebc&&_0x185ebc[_0x3dc401(0x29b)]){const _0x14e96e=_0x5cae6f['toLowerCase'](),_0x558a54=(_0x185ebc['common'][_0x3dc401(0x276)]||'')[_0x3dc401(0x283)](),_0x13d86d=(_0x185ebc[_0x3dc401(0x29b)][_0x3dc401(0x236)]||'')[_0x3dc401(0x283)]();let _0x23566b=![];if(_0x455052===_0x3dc401(0x1e0)&&_0x185ebc[_0x3dc401(0x29b)][_0x3dc401(0x218)]===!![])_0x23566b=_0x14e96e[_0x3dc401(0x293)]('set')||_0x14e96e[_0x3dc401(0x293)]('soll')||_0x14e96e[_0x3dc401(0x293)](_0x3dc401(0x1f7))||_0x558a54[_0x3dc401(0x293)](_0x3dc401(0x1eb))||_0x558a54['includes'](_0x3dc401(0x1e3));else _0x455052===_0x3dc401(0x219)&&(_0x23566b=_0x14e96e[_0x3dc401(0x293)]('level')||_0x14e96e[_0x3dc401(0x293)](_0x3dc401(0x219))||_0x14e96e['includes'](_0x3dc401(0x239))||_0x14e96e[_0x3dc401(0x293)](_0x3dc401(0x1f5))||_0x558a54[_0x3dc401(0x293)](_0x3dc401(0x20f))||_0x558a54[_0x3dc401(0x293)](_0x3dc401(0x26d))||_0x13d86d['includes']('%'));if(_0x23566b){const _0x57a9b5=_0x5cae6f[_0x3dc401(0x29e)](/[._]+/)[_0x3dc401(0x1de)](_0xbac4d=>_0xbac4d[_0x3dc401(0x283)]());let _0x1602f3=0x0;_0x1a2e01[_0x3dc401(0x24d)](_0x169951=>{const _0x4fc700=_0x3dc401;if(_0x57a9b5['includes'](_0x169951[_0x4fc700(0x283)]()))_0x1602f3++;}),_0x32c1b5[_0x3dc401(0x226)]({'id':_0x5cae6f,'score':_0x1602f3});}}}if(_0x32c1b5[_0x3dc401(0x27e)]>0x0){_0x32c1b5[_0x3dc401(0x1d3)]((_0x52a409,_0x5c9285)=>_0x5c9285['score']-_0x52a409[_0x3dc401(0x262)]);if(_0x32c1b5[0x0]['score']>0x0)return _0x32c1b5[0x0]['id'];}}}catch(_0x315691){}return null;}async function scanThermostats(_0x2ed652){const _0x5a3764=a1_0xcfe83c,_0x74ffed=_0x2ed652[_0x5a3764(0x23a)][_0x5a3764(0x289)]||[],_0x489582=[],_0x1f6035=_0x74ffed['filter'](_0xcadab8=>_0xcadab8['id']&&_0xcadab8['id'][_0x5a3764(0x293)]('temperature')||_0xcadab8[_0x5a3764(0x1ef)]&&[_0x5a3764(0x21b),_0x5a3764(0x1d6),_0x5a3764(0x205)][_0x5a3764(0x293)](_0xcadab8[_0x5a3764(0x1ef)])||_0xcadab8[_0x5a3764(0x1fa)]&&_0xcadab8[_0x5a3764(0x1fa)][_0x5a3764(0x283)]()['includes'](_0x5a3764(0x21e)));for(const _0x8da47e of _0x1f6035){const _0x5d0ab5=await findRelatedId(_0x2ed652,_0x8da47e['id'],_0x5a3764(0x1e0)),_0x48d675=await findRelatedId(_0x2ed652,_0x8da47e['id'],_0x5a3764(0x219));let _0x5e75f6=_0x5a3764(0x215),_0x384045=![],_0xbff85c=_0x2ed652[_0x5a3764(0x23a)][_0x5a3764(0x24f)]||{};if(typeof _0xbff85c===_0x5a3764(0x200))try{_0xbff85c=JSON[_0x5a3764(0x1e6)](_0xbff85c);}catch(_0x37934a){}let _0x1c87f4=_0x2ed652[_0x5a3764(0x23a)][_0x5a3764(0x251)]||{};if(typeof _0x1c87f4===_0x5a3764(0x200))try{_0x1c87f4=JSON['parse'](_0x1c87f4);}catch(_0x7dd377){}if(_0xbff85c[_0x8da47e['id']]&&_0xbff85c[_0x8da47e['id']]===_0x5d0ab5||_0x1c87f4[_0x8da47e['id']]&&_0x1c87f4[_0x8da47e['id']]===_0x48d675)_0x5e75f6=_0x5a3764(0x201),_0x384045=!![];else(_0x5d0ab5||_0x48d675)&&(_0x5e75f6='Auto-Erkennung');_0x489582[_0x5a3764(0x226)]({'room':_0x8da47e[_0x5a3764(0x1f0)]||_0x5a3764(0x225),'sensorId':_0x8da47e['id'],'setpointId':_0x5d0ab5||'-','valveId':_0x48d675||'-','source':_0x5e75f6,'isManual':_0x384045,'status':_0x5d0ab5&&_0x48d675?_0x5a3764(0x25a):_0x5d0ab5?'OK':_0x5a3764(0x284)});}return _0x489582[_0x5a3764(0x1d3)]((_0x238337,_0x3b7bd2)=>_0x238337[_0x5a3764(0x23f)][_0x5a3764(0x1f2)](_0x3b7bd2[_0x5a3764(0x23f)]));}async function updateSchedulePreview(_0x3a25b9){const _0xeeca7e=a1_0xcfe83c;if(!_0x3a25b9[_0xeeca7e(0x23a)]['useCalendar']||!_0x3a25b9[_0xeeca7e(0x23a)]['calendarInstance'])return;let _0x526b10={};try{const _0x4824a7=await _0x3a25b9[_0xeeca7e(0x26e)](_0xeeca7e(0x210));if(_0x4824a7&&_0x4824a7[_0xeeca7e(0x269)])_0x526b10=JSON['parse'](_0x4824a7['val']);}catch(_0x3bb54b){}const _0x408364=[],_0x148309=Date[_0xeeca7e(0x265)](),_0xf4760c=0x30*0x3c*0x3c*0x3e8;try{const _0x187c1d=await _0x3a25b9[_0xeeca7e(0x217)](_0x3a25b9[_0xeeca7e(0x23a)][_0xeeca7e(0x1d5)]+_0xeeca7e(0x1e5));if(!_0x187c1d||!_0x187c1d[_0xeeca7e(0x269)])return;const _0x5db2d9=JSON['parse'](_0x187c1d[_0xeeca7e(0x269)]),_0x2e3256=_0x3a25b9[_0xeeca7e(0x23a)][_0xeeca7e(0x1d8)]||[],_0x23a60c=_0x3a25b9[_0xeeca7e(0x23a)][_0xeeca7e(0x289)]||[],_0x188e46=new Set();_0x23a60c['forEach'](_0x241e3c=>{const _0x5aacc7=_0xeeca7e;if(_0x241e3c['location'])_0x188e46[_0x5aacc7(0x222)](_0x241e3c['location']);});for(const _0x6d3d0f of _0x5db2d9){if(_0x6d3d0f[_0xeeca7e(0x26b)]&&_0x2e3256[_0xeeca7e(0x27e)]>0x0&&!_0x2e3256['includes'](_0x6d3d0f[_0xeeca7e(0x26b)]))continue;const _0x2fed94=_0x6d3d0f[_0xeeca7e(0x28b)]||_0x6d3d0f[_0xeeca7e(0x25c)]||_0x6d3d0f[_0xeeca7e(0x25d)];if(!_0x2fed94)continue;const _0x43d384=new Date(_0x2fed94),_0x39b0d5=_0x43d384[_0xeeca7e(0x207)]();if(isNaN(_0x39b0d5))continue;if(_0x39b0d5<_0x148309)continue;if(_0x39b0d5>_0x148309+_0xf4760c)continue;const _0x5abcbd=(_0x6d3d0f[_0xeeca7e(0x270)]||_0x6d3d0f[_0xeeca7e(0x25f)]||'')['toLowerCase']();let _0x5092b8=![],_0x4d344a=[],_0x564302=_0x6d3d0f[_0xeeca7e(0x270)]||_0x6d3d0f[_0xeeca7e(0x25f)]||_0xeeca7e(0x225);if(_0x5abcbd[_0xeeca7e(0x293)](_0xeeca7e(0x238))||_0x5abcbd[_0xeeca7e(0x293)]('r√ºckkehr')||_0x5abcbd[_0xeeca7e(0x293)](_0xeeca7e(0x1d9)))_0x5092b8=!![],_0x4d344a=Array[_0xeeca7e(0x1ea)](_0x188e46);else for(const _0x47c36e of _0x188e46){if(_0x5abcbd[_0xeeca7e(0x293)](_0x47c36e[_0xeeca7e(0x283)]()))_0x4d344a[_0xeeca7e(0x226)](_0x47c36e);}_0x4d344a['length']>0x0&&_0x4d344a['forEach'](_0x302681=>{const _0x1f70b1=_0xeeca7e;let _0x4d6fc4=0x3c;if(_0x5092b8){let _0xa559bc=0x0;Object[_0x1f70b1(0x263)](_0x526b10)[_0x1f70b1(0x24d)](_0x33c53b=>{if(_0x33c53b>_0xa559bc)_0xa559bc=_0x33c53b;}),_0x4d6fc4=_0xa559bc>0x0?_0xa559bc:0x78;}else _0x4d6fc4=getWarmupRobust(_0x526b10,_0x302681);const _0x38cc94=new Date(_0x39b0d5-_0x4d6fc4*0xea60);_0x408364[_0x1f70b1(0x226)]({'eventTime':_0x39b0d5,'triggerTime':_0x38cc94['getTime'](),'room':_0x302681,'minutes':_0x4d6fc4,'reason':_0x564302,'isGlobal':_0x5092b8});});}}catch(_0x5bb24d){}_0x408364['sort']((_0x16408b,_0x4d7c9b)=>_0x16408b[_0xeeca7e(0x268)]-_0x4d7c9b[_0xeeca7e(0x268)]);const _0x26094f=_0x408364[_0xeeca7e(0x287)](0x0,0x1e);await _0x3a25b9[_0xeeca7e(0x29d)](_0xeeca7e(0x271),{'val':JSON[_0xeeca7e(0x28d)](_0x26094f),'ack':!![]});}async function monitorEnforcements(_0xfb0d0d){const _0x33e5b1=a1_0xcfe83c;try{const _0x32e1fc='analysis.energy.activeEnforcements',_0x19fc4=await _0xfb0d0d[_0x33e5b1(0x26e)](_0x32e1fc);if(!_0x19fc4||!_0x19fc4[_0x33e5b1(0x269)])return;let _0x4c7f91=[];try{_0x4c7f91=JSON['parse'](_0x19fc4[_0x33e5b1(0x269)]);}catch(_0x3f9579){return;}if(!Array['isArray'](_0x4c7f91)||_0x4c7f91[_0x33e5b1(0x27e)]===0x0)return;const _0x5c6a66=Date[_0x33e5b1(0x265)](),_0x2df4d7=_0xfb0d0d['config'][_0x33e5b1(0x289)]||[];let _0x3b9440=![];for(let _0x2a9b7b=_0x4c7f91[_0x33e5b1(0x27e)]-0x1;_0x2a9b7b>=0x0;_0x2a9b7b--){const _0x34a4bb=_0x4c7f91[_0x2a9b7b];if(_0x5c6a66>=_0x34a4bb[_0x33e5b1(0x1ec)]){_0xfb0d0d[_0x33e5b1(0x1ed)]['info'](_0x33e5b1(0x1d2)+_0x34a4bb[_0x33e5b1(0x23f)]+_0x33e5b1(0x1e7)),_0x4c7f91[_0x33e5b1(0x1fc)](_0x2a9b7b,0x1),_0x3b9440=!![];continue;}const _0x1b199a=_0x2df4d7['find'](_0x517127=>normalize(_0x517127[_0x33e5b1(0x1f0)])===normalize(_0x34a4bb[_0x33e5b1(0x23f)])&&(_0x517127[_0x33e5b1(0x1ef)]===_0x33e5b1(0x21b)||_0x517127[_0x33e5b1(0x1ef)]==='thermostat'));if(_0x1b199a){const _0x2b4a32=await findRelatedId(_0xfb0d0d,_0x1b199a['id'],_0x33e5b1(0x1e0));if(_0x2b4a32){const _0x4e8ebb=await _0xfb0d0d['getForeignStateAsync'](_0x2b4a32);_0x4e8ebb&&typeof _0x4e8ebb[_0x33e5b1(0x269)]===_0x33e5b1(0x1df)&&(_0x4e8ebb[_0x33e5b1(0x269)]<0xf&&(_0xfb0d0d[_0x33e5b1(0x1ed)][_0x33e5b1(0x20e)](_0x33e5b1(0x25e)+_0x34a4bb[_0x33e5b1(0x23f)]+'\x20auf\x20'+_0x4e8ebb[_0x33e5b1(0x269)]+_0x33e5b1(0x21f)+_0x34a4bb[_0x33e5b1(0x1f7)]+_0x33e5b1(0x1f3)),await _0xfb0d0d['setForeignStateAsync'](_0x2b4a32,_0x34a4bb['target']),await logAutomationAction(_0xfb0d0d,_0x33e5b1(0x211)+_0x34a4bb['room']+':\x20'+_0x4e8ebb[_0x33e5b1(0x269)]+_0x33e5b1(0x273)+_0x34a4bb['target']+_0x33e5b1(0x294))));}}}_0x3b9440&&await _0xfb0d0d[_0x33e5b1(0x29d)](_0x32e1fc,{'val':JSON[_0x33e5b1(0x28d)](_0x4c7f91),'ack':!![]});}catch(_0x210678){_0xfb0d0d[_0x33e5b1(0x1ed)][_0x33e5b1(0x29c)](_0x33e5b1(0x22a)+_0x210678[_0x33e5b1(0x1d7)]);}}async function checkCalendarTriggers(_0x24b3d1){const _0x12d7f7=a1_0xcfe83c;if(!_0x24b3d1[_0x12d7f7(0x23a)][_0x12d7f7(0x297)]||!_0x24b3d1['config'][_0x12d7f7(0x1d5)])return;await updateSchedulePreview(_0x24b3d1);let _0x3b6568={},_0x349e9a={};try{const _0x27f888=await _0x24b3d1[_0x12d7f7(0x26e)](_0x12d7f7(0x210));if(_0x27f888&&_0x27f888[_0x12d7f7(0x269)])_0x3b6568=JSON[_0x12d7f7(0x1e6)](_0x27f888[_0x12d7f7(0x269)]);const _0x5615cb=await _0x24b3d1[_0x12d7f7(0x26e)](_0x12d7f7(0x1fb));if(_0x5615cb&&_0x5615cb[_0x12d7f7(0x269)])_0x349e9a=JSON[_0x12d7f7(0x1e6)](_0x5615cb[_0x12d7f7(0x269)]);}catch(_0x22f832){}let _0xe4d5ec={'default':0x15};try{const _0x4070ec=await _0x24b3d1[_0x12d7f7(0x26e)](_0x12d7f7(0x1db));if(_0x4070ec&&_0x4070ec[_0x12d7f7(0x269)])_0xe4d5ec=JSON[_0x12d7f7(0x1e6)](_0x4070ec[_0x12d7f7(0x269)]);}catch(_0x218265){}let _0x4add65=[];try{const _0x4cc886=await _0x24b3d1[_0x12d7f7(0x26e)](_0x12d7f7(0x234));if(_0x4cc886&&_0x4cc886[_0x12d7f7(0x269)])_0x4add65=JSON[_0x12d7f7(0x1e6)](_0x4cc886['val']);}catch(_0xfa9931){}try{const _0x3eda6d=await _0x24b3d1[_0x12d7f7(0x217)](_0x24b3d1[_0x12d7f7(0x23a)][_0x12d7f7(0x1d5)]+_0x12d7f7(0x1e5));if(!_0x3eda6d||!_0x3eda6d[_0x12d7f7(0x269)])return;const _0x3779df=JSON[_0x12d7f7(0x1e6)](_0x3eda6d['val']),_0x4c9601=Date['now'](),_0x1215ac=_0x24b3d1[_0x12d7f7(0x23a)][_0x12d7f7(0x289)]||[],_0x450fcd=_0x24b3d1[_0x12d7f7(0x23a)][_0x12d7f7(0x1d8)]||[];let _0x390622=![];for(const _0x1b20b1 of _0x3779df){if(_0x1b20b1[_0x12d7f7(0x26b)]&&_0x450fcd[_0x12d7f7(0x27e)]>0x0&&!_0x450fcd[_0x12d7f7(0x293)](_0x1b20b1[_0x12d7f7(0x26b)]))continue;const _0x32c80d=_0x1b20b1['_date']||_0x1b20b1['eventStart']||_0x1b20b1['date'];if(!_0x32c80d)continue;const _0xd4a7f=new Date(_0x32c80d);if(isNaN(_0xd4a7f['getTime']()))continue;const _0x464781=(_0x1b20b1[_0x12d7f7(0x270)]||_0x1b20b1['summary']||'')['toLowerCase']();if(_0x464781[_0x12d7f7(0x293)]('urlaub\x20ende')||_0x464781[_0x12d7f7(0x293)](_0x12d7f7(0x27f))||_0x464781[_0x12d7f7(0x293)]('ankunft')){let _0x18d63f=0x0;Object[_0x12d7f7(0x263)](_0x3b6568)['forEach'](_0x5a9584=>{if(_0x5a9584>_0x18d63f)_0x18d63f=_0x5a9584;});if(_0x18d63f===0x0)_0x18d63f=0x78;const _0x46c87d=_0xd4a7f[_0x12d7f7(0x207)]()-_0x18d63f*0xea60;_0x4c9601>=_0x46c87d&&_0x4c9601<_0xd4a7f[_0x12d7f7(0x207)]()&&(_0x24b3d1[_0x12d7f7(0x241)]!==_0x12d7f7(0x256)&&(_0x24b3d1[_0x12d7f7(0x1ed)][_0x12d7f7(0x1d4)](_0x12d7f7(0x291)+_0x18d63f+_0x12d7f7(0x26f)),await _0x24b3d1[_0x12d7f7(0x29d)](_0x12d7f7(0x20b),{'val':_0x12d7f7(0x256),'ack':![]})));}for(const _0x3b88c3 of _0x1215ac){if(_0x3b88c3[_0x12d7f7(0x1f0)]){const _0xe5f67e=_0x3b88c3['location']['toLowerCase'](),_0xd25df=(_0x3b88c3['name']||'')[_0x12d7f7(0x283)]();let _0x167f72=_0x464781[_0x12d7f7(0x293)](_0xe5f67e);!_0x167f72&&_0xd25df[_0x12d7f7(0x27e)]>0x3&&_0x464781['includes'](_0xd25df)&&(_0x167f72=!![]);if(_0x167f72){const _0xbb1737=getWarmupRobust(_0x3b6568,_0x3b88c3[_0x12d7f7(0x1f0)]),_0x5bb9fc=_0x349e9a[_0x3b88c3[_0x12d7f7(0x1f0)]]||_0x12d7f7(0x230),_0x594624=_0xd4a7f[_0x12d7f7(0x207)]()-_0xbb1737*0xea60;if(_0x4c9601>=_0x594624&&_0x4c9601<_0xd4a7f['getTime']()){const _0x335484=lastActions[_0x12d7f7(0x1f4)+_0x3b88c3[_0x12d7f7(0x1f0)]];if(_0x335484&&_0x4c9601-_0x335484<CAL_COOLDOWN_MS)continue;const _0x48d5ab=await findRelatedId(_0x24b3d1,_0x3b88c3['id'],_0x12d7f7(0x1e0));if(_0x48d5ab){let _0x2cf881=_0xe4d5ec[_0x3b88c3['location']];if(_0x2cf881===undefined)_0x2cf881=_0xe4d5ec[_0x12d7f7(0x27b)];if(_0x2cf881===undefined)_0x2cf881=0x15;const _0x1fed02=await _0x24b3d1[_0x12d7f7(0x217)](_0x48d5ab);if(_0x1fed02&&typeof _0x1fed02[_0x12d7f7(0x269)]===_0x12d7f7(0x1df)&&_0x1fed02[_0x12d7f7(0x269)]<_0x2cf881-0.5){_0x24b3d1[_0x12d7f7(0x1ed)]['info']('üìÖ\x20SMART\x20SCHEDULE\x20['+_0x5bb9fc+_0x12d7f7(0x231)+_0x3b88c3[_0x12d7f7(0x1f0)]+_0x12d7f7(0x1f1)+_0x464781+')\x20aktiv.\x20Heize\x20auf\x20'+_0x2cf881+_0x12d7f7(0x285)+_0xbb1737+'\x20min).'),await _0x24b3d1['setForeignStateAsync'](_0x48d5ab,_0x2cf881),await logAutomationAction(_0x24b3d1,_0x12d7f7(0x299)+_0x3b88c3[_0x12d7f7(0x1f0)]+_0x12d7f7(0x26c)+_0x2cf881+_0x12d7f7(0x1f6)+_0x5bb9fc+')'),lastActions[_0x12d7f7(0x1f4)+_0x3b88c3[_0x12d7f7(0x1f0)]]=_0x4c9601;const _0x370c75=_0x4add65[_0x12d7f7(0x27a)](_0x15312f=>_0x15312f[_0x12d7f7(0x23f)]===_0x3b88c3[_0x12d7f7(0x1f0)]);if(_0x370c75!==-0x1)_0x4add65[_0x12d7f7(0x1fc)](_0x370c75,0x1);_0x4add65[_0x12d7f7(0x226)]({'room':_0x3b88c3['location'],'target':_0x2cf881,'until':_0xd4a7f[_0x12d7f7(0x207)]()}),_0x390622=!![];}}}}}}}_0x390622&&await _0x24b3d1[_0x12d7f7(0x29d)](_0x12d7f7(0x234),{'val':JSON[_0x12d7f7(0x28d)](_0x4add65),'ack':!![]});}catch(_0x3aa046){_0x24b3d1[_0x12d7f7(0x1ed)]['warn'](_0x12d7f7(0x24a)+_0x3aa046[_0x12d7f7(0x1d7)]);}}async function manageMpcIntervention(_0x3404e0,_0x40e550,_0x579419){const _0x10850f=a1_0xcfe83c;try{const _0x2e0daf='analysis.energy.mpcActiveInterventions',_0x4cbb6e=await _0x3404e0[_0x10850f(0x26e)](_0x2e0daf);let _0x435977=[];if(_0x4cbb6e&&_0x4cbb6e[_0x10850f(0x269)])try{_0x435977=JSON[_0x10850f(0x1e6)](_0x4cbb6e[_0x10850f(0x269)]);}catch(_0x2f7f02){}const _0x128c4b=_0x435977['indexOf'](_0x40e550);if(_0x579419===_0x10850f(0x222))_0x128c4b===-0x1&&(_0x435977[_0x10850f(0x226)](_0x40e550),await _0x3404e0['setStateAsync'](_0x2e0daf,{'val':JSON[_0x10850f(0x28d)](_0x435977),'ack':!![]}));else _0x579419===_0x10850f(0x27d)&&(_0x128c4b!==-0x1&&(_0x435977['splice'](_0x128c4b,0x1),await _0x3404e0['setStateAsync'](_0x2e0daf,{'val':JSON[_0x10850f(0x28d)](_0x435977),'ack':!![]})));}catch(_0x280cef){}}async function cleanupGhostInterventions(_0x25cbf3){const _0xa101e5=a1_0xcfe83c;try{const _0x988937='analysis.energy.mpcActiveInterventions',_0x2fe12f=await _0x25cbf3['getStateAsync'](_0x988937);if(!_0x2fe12f||!_0x2fe12f[_0xa101e5(0x269)])return;const _0x52a3ce=JSON[_0xa101e5(0x1e6)](_0x2fe12f[_0xa101e5(0x269)]);if(!Array[_0xa101e5(0x288)](_0x52a3ce)||_0x52a3ce[_0xa101e5(0x27e)]===0x0)return;let _0x37451c={'default':0x15};try{const _0x12ae98=await _0x25cbf3[_0xa101e5(0x26e)](_0xa101e5(0x1db));if(_0x12ae98&&_0x12ae98[_0xa101e5(0x269)])_0x37451c=JSON[_0xa101e5(0x1e6)](_0x12ae98[_0xa101e5(0x269)]);}catch(_0x52b5e2){}let _0x4f81c0=[];try{const _0x117355=await _0x25cbf3['getStateAsync'](_0xa101e5(0x23d));if(_0x117355&&_0x117355[_0xa101e5(0x269)])_0x4f81c0=JSON['parse'](_0x117355['val']);}catch(_0x2b4426){}let _0x3d0cc9={},_0x1e99ff=![];try{const _0x574de9=await _0x25cbf3[_0xa101e5(0x26e)](_0xa101e5(0x264));if(_0x574de9&&_0x574de9[_0xa101e5(0x269)])_0x3d0cc9=JSON[_0xa101e5(0x1e6)](_0x574de9[_0xa101e5(0x269)]);}catch(_0x3b64d2){}if(_0x3d0cc9[_0xa101e5(0x298)]){const _0x19a509=Date[_0xa101e5(0x265)]();for(const [_0x2b3fa1,_0x49db27]of Object[_0xa101e5(0x295)](_0x3d0cc9[_0xa101e5(0x298)])){_0x19a509-_0x49db27>PENALTY_TTL&&(delete _0x3d0cc9[_0x2b3fa1],delete _0x3d0cc9[_0xa101e5(0x298)][_0x2b3fa1],_0x1e99ff=!![],_0x25cbf3[_0xa101e5(0x1ed)][_0xa101e5(0x1d4)]('üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27'+_0x2b3fa1+_0xa101e5(0x1e8)));}}const _0x459a41=_0x25cbf3[_0xa101e5(0x23a)][_0xa101e5(0x289)]||[];let _0x2825bf=![];for(let _0x335494=_0x52a3ce[_0xa101e5(0x27e)]-0x1;_0x335494>=0x0;_0x335494--){const _0x11e563=_0x52a3ce[_0x335494],_0x10f41b=_0x459a41['find'](_0x3d2b0f=>normalize(_0x3d2b0f[_0xa101e5(0x1f0)])===normalize(_0x11e563)&&(_0x3d2b0f[_0xa101e5(0x1ef)]===_0xa101e5(0x21b)||_0x3d2b0f['type']===_0xa101e5(0x1d6)));if(!_0x10f41b){_0x25cbf3[_0xa101e5(0x1ed)][_0xa101e5(0x20e)]('üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27'+_0x11e563+_0xa101e5(0x266)),_0x52a3ce['splice'](_0x335494,0x1),_0x2825bf=!![];continue;}if(_0x10f41b){const _0x408528=await findRelatedId(_0x25cbf3,_0x10f41b['id'],_0xa101e5(0x1e0)),_0x458917=await _0x25cbf3[_0xa101e5(0x217)](_0x10f41b['id']);if(_0x408528){const _0xa7c6e6=await _0x25cbf3[_0xa101e5(0x217)](_0x408528);if(_0xa7c6e6&&typeof _0xa7c6e6[_0xa101e5(0x269)]===_0xa101e5(0x1df)){let _0x38c6bb=![],_0x485a87='';Math[_0xa101e5(0x223)](_0xa7c6e6[_0xa101e5(0x269)]-ECO_TEMP)>0.5&&(_0x38c6bb=!![],_0x485a87=_0xa101e5(0x22d));if(!_0x38c6bb&&_0x458917&&typeof _0x458917[_0xa101e5(0x269)]===_0xa101e5(0x1df)){const _0x278946=_0x37451c[_0x11e563]||_0x37451c[_0xa101e5(0x27b)]||0x15;_0x458917[_0xa101e5(0x269)]<_0x278946+0.2&&(_0x38c6bb=!![],_0x485a87=_0xa101e5(0x21c));}if(_0x38c6bb){if(_0x485a87===_0xa101e5(0x22d)){_0x25cbf3['log'][_0xa101e5(0x1d4)]('üßπ\x20[MPC\x20CLEANUP]\x20'+_0x11e563+_0xa101e5(0x244)+_0xa7c6e6[_0xa101e5(0x269)]+_0xa101e5(0x253)+ECO_TEMP+_0xa101e5(0x278));const _0x3fbf57=lastActions[_0xa101e5(0x1f4)+_0x11e563],_0x31bf36=_0x3fbf57&&Date[_0xa101e5(0x265)]()-_0x3fbf57<0x2*0x3c*0x3e8;if(!_0x31bf36&&_0xa7c6e6[_0xa101e5(0x269)]>ECO_TEMP+0.5){_0x25cbf3[_0xa101e5(0x202)]&&(_0x25cbf3[_0xa101e5(0x1ed)][_0xa101e5(0x1d4)]('üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20'+_0x11e563+_0xa101e5(0x209)),_0x25cbf3[_0xa101e5(0x202)](_0xa101e5(0x286),{'room':_0x11e563}));const _0x17a514=_0x11e563+'_'+new Date()[_0xa101e5(0x1f8)]();if(!_0x3d0cc9[_0x17a514]){_0x3d0cc9[_0x17a514]=0x1;if(!_0x3d0cc9['_meta'])_0x3d0cc9[_0xa101e5(0x298)]={};_0x3d0cc9['_meta'][_0x17a514]=Date['now'](),_0x1e99ff=!![];}}else _0x31bf36&&_0x25cbf3[_0xa101e5(0x1ed)]['info'](_0xa101e5(0x243)+_0x11e563+_0xa101e5(0x259));}else{if(_0x485a87==='too_cold'){let _0x4b863d=![];if(_0x4f81c0[_0xa101e5(0x20c)](_0x13e436=>_0x13e436[_0xa101e5(0x23f)]===_0x11e563))_0x4b863d=!![];const _0x4ddb69=_0x459a41['filter'](_0x38a764=>normalize(_0x38a764[_0xa101e5(0x1f0)])===normalize(_0x11e563)&&(_0x38a764[_0xa101e5(0x1ef)]===_0xa101e5(0x28c)||_0x38a764[_0xa101e5(0x1ef)]==='sensor'||_0x38a764[_0xa101e5(0x1ef)]===_0xa101e5(0x213)));for(const _0x6bcbba of _0x4ddb69){try{const _0x3d7808=await _0x25cbf3[_0xa101e5(0x217)](_0x6bcbba['id']);if(_0x3d7808&&(_0x3d7808[_0xa101e5(0x269)]===!![]||_0x3d7808[_0xa101e5(0x269)]===0x1||String(_0x3d7808[_0xa101e5(0x269)])[_0xa101e5(0x283)]()===_0xa101e5(0x274)))_0x4b863d=!![];}catch(_0x51a1dc){}}if(_0x4b863d)_0x25cbf3['log'][_0xa101e5(0x1d4)]('üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20'+_0x11e563+_0xa101e5(0x28a));else{const _0x1640fc=_0x37451c[_0x11e563]||_0x37451c[_0xa101e5(0x27b)]||0x15;_0x25cbf3[_0xa101e5(0x1ed)][_0xa101e5(0x1d4)](_0xa101e5(0x1e1)+_0x11e563+'\x20erreicht\x20Limit\x20('+_0x458917[_0xa101e5(0x269)]+_0xa101e5(0x240)+(_0x1640fc+0.2)+_0xa101e5(0x232)),await _0x25cbf3[_0xa101e5(0x1dd)](_0x408528,_0x1640fc),await logAutomationAction(_0x25cbf3,'[WATCHDOG]\x20'+_0x11e563+_0xa101e5(0x228)+_0x1640fc+'¬∞C'),lastActions[_0xa101e5(0x208)+_0x11e563]=Date['now']();}}}_0x52a3ce[_0xa101e5(0x1fc)](_0x335494,0x1),_0x2825bf=!![];}}}}}_0x2825bf&&await _0x25cbf3[_0xa101e5(0x29d)](_0x988937,{'val':JSON['stringify'](_0x52a3ce),'ack':!![]}),_0x1e99ff&&await _0x25cbf3[_0xa101e5(0x29d)](_0xa101e5(0x264),{'val':JSON[_0xa101e5(0x28d)](_0x3d0cc9),'ack':!![]});}catch(_0x37f8c8){}}async function applyEnergySavings(_0x377143,_0x54ad0e){const _0x26c96b=a1_0xcfe83c;await cleanupGhostInterventions(_0x377143);if(!_0x54ad0e||_0x54ad0e[_0x26c96b(0x27e)]===0x0)return;const _0x3b9803=_0x377143['config'][_0x26c96b(0x289)]||[],_0x55d261=Date[_0x26c96b(0x265)]();for(const _0x42780b of _0x54ad0e){const _0x864f2c=_0x42780b[_0x26c96b(0x23f)],_0x4e957e=_0x42780b['minutes_safe'],_0x321b40=_0x42780b[_0x26c96b(0x1f7)]||0x15;if(lastActions['rescue_'+_0x864f2c]&&_0x55d261-lastActions['rescue_'+_0x864f2c]<RESCUE_LOCK_MS)continue;const _0x4849f8=_0x3b9803['find'](_0x3d595b=>normalize(_0x3d595b[_0x26c96b(0x1f0)])===normalize(_0x864f2c)&&(_0x3d595b[_0x26c96b(0x1ef)]===_0x26c96b(0x21b)||_0x3d595b[_0x26c96b(0x1ef)]===_0x26c96b(0x1d6)));if(!_0x4849f8)continue;const _0x4130fc=await findRelatedId(_0x377143,_0x4849f8['id'],_0x26c96b(0x1e0));if(_0x4130fc){if(lastActions[_0x26c96b(0x227)+_0x864f2c]&&_0x55d261-lastActions[_0x26c96b(0x227)+_0x864f2c]<0x1e*0x3c*0x3e8)continue;const _0x4e461c=await _0x377143[_0x26c96b(0x217)](_0x4130fc);if(_0x4e461c&&typeof _0x4e461c[_0x26c96b(0x269)]===_0x26c96b(0x1df)){const _0x4c5177=_0x4e461c[_0x26c96b(0x269)];_0x4c5177!==ECO_TEMP&&await manageMpcIntervention(_0x377143,_0x864f2c,_0x26c96b(0x27d));if(_0x4e957e>0x1e)_0x4c5177>ECO_TEMP+0.5&&(_0x377143[_0x26c96b(0x1ed)][_0x26c96b(0x1d4)](_0x26c96b(0x29a)+_0x864f2c+'\x20auf\x20'+ECO_TEMP+_0x26c96b(0x229)+_0x4e957e+_0x26c96b(0x224)),await _0x377143[_0x26c96b(0x1dd)](_0x4130fc,ECO_TEMP),await manageMpcIntervention(_0x377143,_0x864f2c,_0x26c96b(0x222)),lastActions[_0x26c96b(0x227)+_0x864f2c]=_0x55d261,await logAutomationAction(_0x377143,'[MPC]\x20'+_0x864f2c+_0x26c96b(0x204)+ECO_TEMP+'¬∞C'));else _0x4e957e<=0xf&&(_0x4c5177<_0x321b40&&(_0x377143[_0x26c96b(0x1ed)]['info']('üî•\x20[MPC\x20ACTION]\x20Heize\x20'+_0x864f2c+_0x26c96b(0x23c)+_0x321b40+_0x26c96b(0x221)),await _0x377143[_0x26c96b(0x1dd)](_0x4130fc,_0x321b40),await manageMpcIntervention(_0x377143,_0x864f2c,_0x26c96b(0x27d)),lastActions[_0x26c96b(0x227)+_0x864f2c]=_0x55d261,await logAutomationAction(_0x377143,_0x26c96b(0x24c)+_0x864f2c+_0x26c96b(0x1f9)+_0x321b40+'¬∞C')));}}else _0x377143[_0x26c96b(0x1ed)][_0x26c96b(0x20e)](_0x26c96b(0x25b)+_0x864f2c+_0x26c96b(0x21a));}}module[a1_0xcfe83c(0x1e9)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};