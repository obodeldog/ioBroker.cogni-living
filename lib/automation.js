const a1_0xee7cf0=a1_0x4cb9;(function(_0x491eb3,_0x27048a){const _0xcd0404=a1_0x4cb9,_0x201c13=_0x491eb3();while(!![]){try{const _0x582362=-parseInt(_0xcd0404(0x1f3))/0x1+parseInt(_0xcd0404(0x207))/0x2+parseInt(_0xcd0404(0x208))/0x3*(parseInt(_0xcd0404(0x202))/0x4)+parseInt(_0xcd0404(0x217))/0x5*(-parseInt(_0xcd0404(0x215))/0x6)+parseInt(_0xcd0404(0x213))/0x7+parseInt(_0xcd0404(0x203))/0x8*(-parseInt(_0xcd0404(0x1f1))/0x9)+parseInt(_0xcd0404(0x209))/0xa*(parseInt(_0xcd0404(0x212))/0xb);if(_0x582362===_0x27048a)break;else _0x201c13['push'](_0x201c13['shift']());}catch(_0x23a0b1){_0x201c13['push'](_0x201c13['shift']());}}}(a1_0x327f,0x43e3c));function a1_0x4cb9(_0x15c31f,_0x3752d5){const _0x44d802=a1_0x327f();return a1_0x4cb9=function(_0x45198e,_0x325be3){_0x45198e=_0x45198e-0x1e8;let _0x327fd0=_0x44d802[_0x45198e];return _0x327fd0;},a1_0x4cb9(_0x15c31f,_0x3752d5);}const a1_0x325be3=(function(){let _0x576f16=!![];return function(_0x591c77,_0x4a77a7){const _0x251054=_0x576f16?function(){const _0x530041=a1_0x4cb9;if(_0x4a77a7){const _0x5ab5f3=_0x4a77a7[_0x530041(0x210)](_0x591c77,arguments);return _0x4a77a7=null,_0x5ab5f3;}}:function(){};return _0x576f16=![],_0x251054;};}()),a1_0x45198e=a1_0x325be3(this,function(){const _0xe016a0=a1_0x4cb9;return a1_0x45198e[_0xe016a0(0x1fe)]()[_0xe016a0(0x1f4)](_0xe016a0(0x1ea))[_0xe016a0(0x1fe)]()[_0xe016a0(0x211)](a1_0x45198e)[_0xe016a0(0x1f4)](_0xe016a0(0x1ea));});function a1_0x327f(){const _0x50405a=['1176TfbhsI','4201400FNnbcK','Unknown','find','now','695822aMUzde','3441smLnGV','2840QAqZSK','dimmer','config','off','switch','light','\x20->\x20Schalte\x20','apply','constructor','7865dRzVMb','3295803fyvSER','exports','6rPOfls','\x27),\x20but\x20found\x20no\x20matching\x20light\x20device.','2357030BkRRGd','type','ðŸ¤–\x20Butler\x20Blocked:\x20','info','toLowerCase','(((.+)+)+)+$','setStateAsync','name','location','\x27\x20(norm:\x20\x27','val','PrÃ¤diktion:\x20','9ModAjT','toUpperCase','84361oFFgdP','search','getStateAsync','consultButler','active','log','analysis.automation.confidenceThreshold','trim','getForeignStateAsync','debug','analysis.automation.mode','toString','reason','ðŸ‘€\x20SIMULATION:\x20','analysis.automation.lastAction'];a1_0x327f=function(){return _0x50405a;};return a1_0x327f();}a1_0x45198e();'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function normalize(_0x1b8ce0){const _0x2610b7=a1_0x4cb9;if(!_0x1b8ce0)return'';return _0x1b8ce0[_0x2610b7(0x1e9)]()['replace'](/\s+/g,'')[_0x2610b7(0x1fa)]();}async function handlePrediction(_0xf0deb0,_0x1994aa,_0x4d441b){const _0x3ff9ed=a1_0x4cb9;if(!_0x1994aa||_0x1994aa===_0x3ff9ed(0x204))return;let _0x4b0838=_0x3ff9ed(0x20c),_0x1847b8=0.6;try{const _0x6af6ae=await _0xf0deb0[_0x3ff9ed(0x1f5)](_0x3ff9ed(0x1fd));if(_0x6af6ae&&_0x6af6ae[_0x3ff9ed(0x1ef)])_0x4b0838=_0x6af6ae['val'];const _0xba3a3f=await _0xf0deb0[_0x3ff9ed(0x1f5)](_0x3ff9ed(0x1f9));if(_0xba3a3f&&_0xba3a3f[_0x3ff9ed(0x1ef)])_0x1847b8=_0xba3a3f[_0x3ff9ed(0x1ef)];}catch(_0xbf4d2f){}if(_0x4b0838==='off')return;if(_0x4d441b<_0x1847b8)return;const _0x561a27=Date[_0x3ff9ed(0x206)]();if(lastActions[_0x1994aa]&&_0x561a27-lastActions[_0x1994aa]<COOLDOWN_MS)return;const _0x42d12a=_0xf0deb0[_0x3ff9ed(0x20b)]['devices']||[],_0x220a84=normalize(_0x1994aa),_0x1e2530=_0x42d12a[_0x3ff9ed(0x205)](_0x247d64=>{const _0x5e26a4=_0x3ff9ed;return normalize(_0x247d64[_0x5e26a4(0x1ed)])===_0x220a84&&(_0x247d64[_0x5e26a4(0x218)]===_0x5e26a4(0x20e)||_0x247d64['type']===_0x5e26a4(0x20a)||_0x247d64[_0x5e26a4(0x218)]===_0x5e26a4(0x20d));});if(!_0x1e2530){const _0x42b517='ðŸ”\x20Device-Search\x20failed:\x20Predicted\x20\x27'+_0x1994aa+_0x3ff9ed(0x1ee)+_0x220a84+_0x3ff9ed(0x216);_0xf0deb0[_0x3ff9ed(0x1f8)][_0x3ff9ed(0x1fc)](_0x42b517);return;}const _0x4fe530=await aiAgent[_0x3ff9ed(0x1f6)](_0xf0deb0,_0x1994aa,_0x1e2530[_0x3ff9ed(0x1ec)],_0x4d441b);if(!_0x4fe530['approved']){_0xf0deb0['log'][_0x3ff9ed(0x1fc)](_0x3ff9ed(0x219)+_0x1994aa+'\x20->\x20'+_0x4fe530[_0x3ff9ed(0x1ff)]),await _0xf0deb0[_0x3ff9ed(0x1eb)](_0x3ff9ed(0x201),{'val':'[BLOCKED]\x20'+_0x4fe530[_0x3ff9ed(0x1ff)],'ack':!![]});return;}const _0x280250=_0x3ff9ed(0x1f0)+_0x1994aa+_0x3ff9ed(0x20f)+_0x1e2530[_0x3ff9ed(0x1ec)]+'\x20('+_0x4fe530[_0x3ff9ed(0x1ff)]+')';await _0xf0deb0[_0x3ff9ed(0x1eb)]('analysis.automation.lastAction',{'val':'['+_0x4b0838[_0x3ff9ed(0x1f2)]()+']\x20'+_0x280250,'ack':!![]});if(_0x4b0838==='simulate')_0xf0deb0[_0x3ff9ed(0x1f8)][_0x3ff9ed(0x1e8)](_0x3ff9ed(0x200)+_0x280250);else{if(_0x4b0838===_0x3ff9ed(0x1f7)){_0xf0deb0[_0x3ff9ed(0x1f8)][_0x3ff9ed(0x1e8)]('âš¡\x20ACTION:\x20'+_0x280250);const _0x11ea7c=await _0xf0deb0[_0x3ff9ed(0x1fb)](_0x1e2530['id']);if(_0x11ea7c&&(_0x11ea7c['val']===!![]||_0x11ea7c['val']>0x0)){}else await _0xf0deb0['setForeignStateAsync'](_0x1e2530['id'],!![]);lastActions[_0x1994aa]=_0x561a27;}}}module[a1_0xee7cf0(0x214)]={'handlePrediction':handlePrediction};