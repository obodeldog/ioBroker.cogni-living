const a1_0x5bc0b3=a1_0x27b4;function a1_0x27b4(_0x16fa03,_0x2e37db){const _0x23d0a9=a1_0x47c7();return a1_0x27b4=function(_0x1332ad,_0x33430d){_0x1332ad=_0x1332ad-0x144;let _0x47c776=_0x23d0a9[_0x1332ad];return _0x47c776;},a1_0x27b4(_0x16fa03,_0x2e37db);}(function(_0x15057e,_0x507607){const _0x537464=a1_0x27b4,_0x13574c=_0x15057e();while(!![]){try{const _0xc4b2a8=parseInt(_0x537464(0x1db))/0x1*(parseInt(_0x537464(0x156))/0x2)+-parseInt(_0x537464(0x1f2))/0x3*(-parseInt(_0x537464(0x17b))/0x4)+-parseInt(_0x537464(0x155))/0x5+parseInt(_0x537464(0x190))/0x6*(-parseInt(_0x537464(0x205))/0x7)+parseInt(_0x537464(0x1bf))/0x8*(parseInt(_0x537464(0x18d))/0x9)+-parseInt(_0x537464(0x1b1))/0xa*(-parseInt(_0x537464(0x174))/0xb)+parseInt(_0x537464(0x202))/0xc*(-parseInt(_0x537464(0x1e2))/0xd);if(_0xc4b2a8===_0x507607)break;else _0x13574c['push'](_0x13574c['shift']());}catch(_0x50a5a7){_0x13574c['push'](_0x13574c['shift']());}}}(a1_0x47c7,0xc3d11));const a1_0x33430d=(function(){let _0x36b76f=!![];return function(_0x1b9eb4,_0x217612){const _0x5610de=_0x36b76f?function(){if(_0x217612){const _0x5e8f55=_0x217612['apply'](_0x1b9eb4,arguments);return _0x217612=null,_0x5e8f55;}}:function(){};return _0x36b76f=![],_0x5610de;};}()),a1_0x1332ad=a1_0x33430d(this,function(){const _0x556b18=a1_0x27b4;return a1_0x1332ad[_0x556b18(0x15f)]()[_0x556b18(0x1fc)]('(((.+)+)+)+$')[_0x556b18(0x15f)]()[_0x556b18(0x1f1)](a1_0x1332ad)[_0x556b18(0x1fc)](_0x556b18(0x1b5));});a1_0x1332ad();'use strict';const aiAgent=require(a1_0x5bc0b3(0x1c5)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0xa381e9){const _0xfaed89=a1_0x5bc0b3;if(!_0xa381e9)return'';return _0xa381e9[_0xfaed89(0x160)]()['replace'](/\s+/g,'')[_0xfaed89(0x149)]();}function getWarmupRobust(_0x3d716f,_0xb794d6){const _0x13874f=a1_0x5bc0b3;if(!_0x3d716f||!_0xb794d6)return 0x3c;if(_0x3d716f[_0xb794d6]!==undefined)return _0x3d716f[_0xb794d6];const _0x43ac9a=_0xb794d6[_0x13874f(0x160)]()[_0x13874f(0x206)](/√§/g,'ae')[_0x13874f(0x206)](/√∂/g,'oe')[_0x13874f(0x206)](/√º/g,'ue')['replace'](/√ü/g,'ss')[_0x13874f(0x206)](/\s+/g,'_')[_0x13874f(0x206)](/[^a-z0-9_]/g,'');if(_0x3d716f[_0x43ac9a]!==undefined)return _0x3d716f[_0x43ac9a];return 0x3c;}async function logAutomationAction(_0x29df2b,_0x1b8c2f){const _0x2cb10c=a1_0x5bc0b3;await _0x29df2b[_0x2cb10c(0x15e)](_0x2cb10c(0x18f),{'val':_0x1b8c2f,'ack':!![]});try{const _0x4d9b82='analysis.automation.actionLog',_0x572d63=await _0x29df2b[_0x2cb10c(0x1a5)](_0x4d9b82);let _0x2ecfa8=[];if(_0x572d63&&_0x572d63[_0x2cb10c(0x1a3)])try{_0x2ecfa8=JSON[_0x2cb10c(0x1a2)](_0x572d63['val']);}catch(_0x5d2893){}_0x2ecfa8[_0x2cb10c(0x18c)]({'ts':Date[_0x2cb10c(0x1ec)](),'msg':_0x1b8c2f});if(_0x2ecfa8[_0x2cb10c(0x183)]>0x32)_0x2ecfa8=_0x2ecfa8[_0x2cb10c(0x188)](0x0,0x32);await _0x29df2b[_0x2cb10c(0x15e)](_0x4d9b82,{'val':JSON[_0x2cb10c(0x1c4)](_0x2ecfa8),'ack':!![]});}catch(_0x2140b7){}}async function handlePrediction(_0x4d24f2,_0x8e6894,_0x4e0af1){const _0x296763=a1_0x5bc0b3;if(!_0x8e6894||_0x8e6894==='Unknown')return;let _0x26a9fc='off',_0x1be666=0.6;try{const _0x4e169a=await _0x4d24f2[_0x296763(0x1a5)](_0x296763(0x1cc));if(_0x4e169a&&_0x4e169a[_0x296763(0x1a3)])_0x26a9fc=_0x4e169a[_0x296763(0x1a3)];const _0x598bca=await _0x4d24f2[_0x296763(0x1a5)](_0x296763(0x16a));if(_0x598bca&&_0x598bca[_0x296763(0x1a3)])_0x1be666=_0x598bca[_0x296763(0x1a3)];}catch(_0x1dd969){}if(_0x26a9fc==='off'||_0x4e0af1<_0x1be666)return;const _0x3eab12=Date[_0x296763(0x1ec)]();if(lastActions[_0x8e6894]&&_0x3eab12-lastActions[_0x8e6894]<COOLDOWN_MS)return;const _0x2e8435=_0x4d24f2[_0x296763(0x1f9)][_0x296763(0x164)]||[],_0x3e85b4=normalize(_0x8e6894),_0x4d792d=_0x2e8435['find'](_0x34594c=>normalize(_0x34594c[_0x296763(0x1ea)])===_0x3e85b4&&(_0x34594c[_0x296763(0x181)]===_0x296763(0x180)||_0x34594c[_0x296763(0x181)]===_0x296763(0x158)||_0x34594c[_0x296763(0x181)]===_0x296763(0x178)));if(!_0x4d792d)return;const _0x4f9cda=await aiAgent[_0x296763(0x1b8)](_0x4d24f2,_0x8e6894,_0x4d792d[_0x296763(0x14c)],_0x4e0af1);if(!_0x4f9cda[_0x296763(0x1d9)])return;const _0x30753b=_0x296763(0x150)+_0x8e6894+_0x296763(0x1f8)+_0x4d792d[_0x296763(0x14c)]+'\x20('+_0x4f9cda[_0x296763(0x1cf)]+')';await logAutomationAction(_0x4d24f2,'['+_0x26a9fc[_0x296763(0x184)]()+']\x20'+_0x30753b);if(_0x26a9fc===_0x296763(0x1a7)){const _0x5d2b8a=await _0x4d24f2[_0x296763(0x147)](_0x4d792d['id']);(!_0x5d2b8a||!_0x5d2b8a[_0x296763(0x1a3)]&&_0x5d2b8a[_0x296763(0x1a3)]!==!![])&&await _0x4d24f2[_0x296763(0x1ca)](_0x4d792d['id'],!![]),lastActions[_0x8e6894]=_0x3eab12;}}async function findRelatedId(_0x70fc4d,_0x249033,_0x514294='setpoint'){const _0x44423c=a1_0x5bc0b3;if(_0x514294===_0x44423c(0x1ce)&&_0x70fc4d[_0x44423c(0x1f9)][_0x44423c(0x187)]){let _0x5b1ada=_0x70fc4d[_0x44423c(0x1f9)]['thermostatMapping'];if(typeof _0x5b1ada==='string')try{_0x5b1ada=JSON[_0x44423c(0x1a2)](_0x5b1ada);}catch(_0x395f91){}if(_0x5b1ada&&_0x5b1ada[_0x249033])return _0x5b1ada[_0x249033];}if(_0x514294===_0x44423c(0x153)&&_0x70fc4d[_0x44423c(0x1f9)][_0x44423c(0x1e5)]){let _0x213ef3=_0x70fc4d[_0x44423c(0x1f9)][_0x44423c(0x1e5)];if(typeof _0x213ef3==='string')try{_0x213ef3=JSON[_0x44423c(0x1a2)](_0x213ef3);}catch(_0xa494fa){}if(_0x213ef3&&_0x213ef3[_0x249033])return _0x213ef3[_0x249033];}let _0x3b5be5=[];if(_0x514294==='setpoint')_0x3b5be5=[{'s':'.1.ACTUAL_TEMPERATURE','t':_0x44423c(0x1e1)},{'s':_0x44423c(0x172),'t':_0x44423c(0x1e1)},{'s':_0x44423c(0x172),'t':'.4.SET_TEMPERATURE'},{'s':'ACTUAL_TEMPERATURE','t':_0x44423c(0x19b)},{'s':_0x44423c(0x185),'t':_0x44423c(0x148)},{'s':'local_temperature','t':_0x44423c(0x1a8)},{'s':_0x44423c(0x1da),'t':_0x44423c(0x16c)},{'s':'ACTUAL','t':_0x44423c(0x1c9)},{'s':_0x44423c(0x1e8),'t':_0x44423c(0x161)},{'s':'temperature','t':_0x44423c(0x1ce)}];else _0x514294===_0x44423c(0x153)&&(_0x3b5be5=[{'s':'.1.ACTUAL_TEMPERATURE','t':_0x44423c(0x1ee)},{'s':_0x44423c(0x172),'t':_0x44423c(0x1ee)},{'s':'.1.TEMPERATURE','t':'.4.VALVE_STATE'},{'s':_0x44423c(0x185),'t':_0x44423c(0x1e4)},{'s':_0x44423c(0x1da),'t':_0x44423c(0x168)},{'s':_0x44423c(0x1da),'t':_0x44423c(0x15a)}]);for(const _0x525a47 of _0x3b5be5){if(_0x249033[_0x44423c(0x1d7)](_0x525a47['s'])){const _0x2fb493=_0x249033[_0x44423c(0x206)](_0x525a47['s'],_0x525a47['t']),_0x4a2335=await _0x70fc4d[_0x44423c(0x197)](_0x2fb493);if(_0x4a2335)return _0x2fb493;}}try{const _0x163998=_0x249033['split']('.');if(_0x163998[_0x44423c(0x183)]>0x2){const _0x5ad975=_0x163998[_0x44423c(0x188)](0x0,-0x1)[_0x44423c(0x1dc)]('.'),_0x2b02d9=await _0x70fc4d[_0x44423c(0x1b6)](_0x5ad975+'.*'),_0x4b137c=[],_0x464b21=_0x249033[_0x44423c(0x1fa)](/[._]+/)[_0x44423c(0x1be)](_0x3cbc9d=>![_0x44423c(0x1bd),'0',_0x44423c(0x1cb),_0x44423c(0x196),'wert','temperature',_0x44423c(0x203),_0x44423c(0x166),'messwert',_0x44423c(0x176)][_0x44423c(0x1d7)](_0x3cbc9d['toLowerCase']()));for(const [_0x34dcb6,_0xd9860f]of Object['entries'](_0x2b02d9)){if(_0x34dcb6===_0x249033)continue;if(_0xd9860f&&_0xd9860f[_0x44423c(0x1d6)]){const _0x376600=_0x34dcb6[_0x44423c(0x160)](),_0x4bca82=(_0xd9860f[_0x44423c(0x1d6)][_0x44423c(0x1a9)]||'')[_0x44423c(0x160)](),_0x89efc4=(_0xd9860f[_0x44423c(0x1d6)][_0x44423c(0x1f5)]||'')[_0x44423c(0x160)]();let _0x25f573=![];if(_0x514294==='setpoint'&&_0xd9860f[_0x44423c(0x1d6)][_0x44423c(0x17c)]===!![])_0x25f573=_0x376600[_0x44423c(0x1d7)](_0x44423c(0x1f6))||_0x376600[_0x44423c(0x1d7)]('soll')||_0x376600[_0x44423c(0x1d7)](_0x44423c(0x1eb))||_0x4bca82[_0x44423c(0x1d7)]('level.temperature')||_0x4bca82['includes'](_0x44423c(0x194));else _0x514294==='valve'&&(_0x25f573=_0x376600[_0x44423c(0x1d7)](_0x44423c(0x15a))||_0x376600[_0x44423c(0x1d7)](_0x44423c(0x153))||_0x376600[_0x44423c(0x1d7)]('stellwert')||_0x376600[_0x44423c(0x1d7)](_0x44423c(0x1dd))||_0x4bca82[_0x44423c(0x1d7)](_0x44423c(0x198))||_0x4bca82[_0x44423c(0x1d7)]('value.valve')||_0x89efc4[_0x44423c(0x1d7)]('%'));if(_0x25f573){const _0x46d071=_0x34dcb6[_0x44423c(0x1fa)](/[._]+/)['map'](_0x286d01=>_0x286d01[_0x44423c(0x160)]());let _0x2cb595=0x0;_0x464b21['forEach'](_0x2573d4=>{const _0x19efa6=_0x44423c;if(_0x46d071[_0x19efa6(0x1d7)](_0x2573d4[_0x19efa6(0x160)]()))_0x2cb595++;}),_0x4b137c[_0x44423c(0x1fd)]({'id':_0x34dcb6,'score':_0x2cb595});}}}if(_0x4b137c[_0x44423c(0x183)]>0x0){_0x4b137c[_0x44423c(0x195)]((_0x452874,_0x2deec4)=>_0x2deec4[_0x44423c(0x1cd)]-_0x452874[_0x44423c(0x1cd)]);if(_0x4b137c[0x0][_0x44423c(0x1cd)]>0x0)return _0x4b137c[0x0]['id'];}}}catch(_0x3b2bb8){}return null;}async function scanThermostats(_0x5b5450){const _0x4ddeea=a1_0x5bc0b3,_0x263d08=_0x5b5450['config'][_0x4ddeea(0x164)]||[],_0x5fe48c=[],_0x3e147c=_0x263d08['filter'](_0x3e7e09=>_0x3e7e09['id']&&_0x3e7e09['id'][_0x4ddeea(0x1d7)](_0x4ddeea(0x1da))||_0x3e7e09[_0x4ddeea(0x181)]&&[_0x4ddeea(0x1da),'thermostat',_0x4ddeea(0x166)][_0x4ddeea(0x1d7)](_0x3e7e09['type'])||_0x3e7e09[_0x4ddeea(0x14c)]&&_0x3e7e09['name'][_0x4ddeea(0x160)]()[_0x4ddeea(0x1d7)](_0x4ddeea(0x189)));for(const _0x635c55 of _0x3e147c){const _0x4cf8fd=await findRelatedId(_0x5b5450,_0x635c55['id'],_0x4ddeea(0x1ce)),_0x625f3b=await findRelatedId(_0x5b5450,_0x635c55['id'],_0x4ddeea(0x153));let _0x1780c2=_0x4ddeea(0x165),_0x3f7bd2=![],_0x333c2f=_0x5b5450[_0x4ddeea(0x1f9)][_0x4ddeea(0x187)]||{};if(typeof _0x333c2f==='string')try{_0x333c2f=JSON[_0x4ddeea(0x1a2)](_0x333c2f);}catch(_0x5af6df){}let _0x3d85bf=_0x5b5450[_0x4ddeea(0x1f9)][_0x4ddeea(0x1e5)]||{};if(typeof _0x3d85bf==='string')try{_0x3d85bf=JSON['parse'](_0x3d85bf);}catch(_0x28f0dd){}if(_0x333c2f[_0x635c55['id']]&&_0x333c2f[_0x635c55['id']]===_0x4cf8fd||_0x3d85bf[_0x635c55['id']]&&_0x3d85bf[_0x635c55['id']]===_0x625f3b)_0x1780c2='Manuelles\x20Mapping',_0x3f7bd2=!![];else(_0x4cf8fd||_0x625f3b)&&(_0x1780c2=_0x4ddeea(0x193));_0x5fe48c['push']({'room':_0x635c55['location']||_0x4ddeea(0x16b),'sensorId':_0x635c55['id'],'setpointId':_0x4cf8fd||'-','valveId':_0x625f3b||'-','source':_0x1780c2,'isManual':_0x3f7bd2,'status':_0x4cf8fd&&_0x625f3b?_0x4ddeea(0x1b9):_0x4cf8fd?'OK':_0x4ddeea(0x15b)});}return _0x5fe48c['sort']((_0x2afa7f,_0x3ec1d5)=>_0x2afa7f[_0x4ddeea(0x1b4)]['localeCompare'](_0x3ec1d5[_0x4ddeea(0x1b4)]));}function a1_0x47c7(){const _0x1beeb7=['13WpCzxi','findIndex','pi_heating_demand','valveMapping','normal','üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20','Ist','isArray','location','target','now','rescue_','.1.LEVEL','¬∞C).\x20Entferne\x20Status.','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','constructor','3GNNKRk','getHours','ankunft','unit','set','useCalendar','\x20->\x20Schalte\x20','config','split','calendarSelection','search','push','analysis.energy.mpcActiveInterventions','splice','\x27\x20(Match:\x20','abs','4228284MuqJnS','actual','analysis.energy.schedulePreview','1092077tcYFCP','replace','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','analysis.energy.ventilationAlerts','manual','getForeignStateAsync','occupied_heating_setpoint','trim','\x20erreicht\x20Limit\x20(','üö®\x20[MPC\x20WATCHDOG]\x20','name','\x20ist\x20auf\x20','from','analysis.energy.activeEnforcements','Pr√§diktion:\x20',':\x20Aufheizen\x20auf\x20','calendarInstance','valve','¬∞C).\x20Sparmodus\x20beendet!','1385720HAZxRk','17482kzfIlC','currentSystemMode','dimmer','analysis.energy.rlPenalties','level','Fehlt','Classic','analysis.energy.warmupSources','setStateAsync','toString','toLowerCase','Soll','info','log','devices','Nicht\x20gefunden','sensor','message','valve_position','¬∞C\x20->\x20','analysis.automation.confidenceThreshold','Unbekannt','target_temperature',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','error','[CAL]\x20','urlaub\x20ende','.data.table','.1.TEMPERATURE','üî•\x20[MPC\x20ACTION]\x20Heize\x20','4631902jTnrGS','triggerTime','state','cal_','switch','_meta','event','1586392llNBSo','write','system.mode','¬∞C!\x20(Puffer:\x20','\x20auf\x20','light','type','find','length','toUpperCase','local_temperature','\x20wurde\x20manuell\x20erh√∂ht.','thermostatMapping','slice','temp','warn','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','unshift','8399898ApfsrG','too_cold','analysis.automation.lastAction','18toFZmW','date','thermostat','Auto-Erkennung','thermostat.setpoint','sort','ist','getForeignObjectAsync','level.valve','remove','number','SET_POINT_TEMPERATURE','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','values','¬∞C.','getTime','üßπ\x20[MPC\x20CLEANUP]\x20','indexOf','parse','val','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','getStateAsync','sendToPythonWrapper','active','current_heating_setpoint','role','default','summary','analysis.energy.warmupTargets','open','eventStart','_calName','\x20min)','10bfqAZo','Enforcement\x20Monitor\x20Error:\x20','window','room','(((.+)+)+)+$','getForeignObjectsAsync','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','consultButler','PERFECT','exports','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','openknx','filter','8TvdqUM','_date','forEach','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','analysis.energy.warmupTimes','stringify','./ai_agent','¬∞C\x20<\x20','mpc_','add','SET','setForeignStateAsync','hm-rpc','analysis.automation.mode','score','setpoint','reason','r√ºckkehr','¬∞C\x20(nicht\x20','TRAIN_RL_PENALTY','[WATCHDOG]\x20','üìÖ\x20SMART\x20SCHEDULE\x20[',':\x20Absenkung\x20auf\x20','common','includes','[MPC]\x20','approved','temperature','17nhKBho','join','position','until','entries','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','.1.SET_POINT_TEMPERATURE'];a1_0x47c7=function(){return _0x1beeb7;};return a1_0x47c7();}async function updateSchedulePreview(_0xecbecd){const _0x30c5bc=a1_0x5bc0b3;if(!_0xecbecd[_0x30c5bc(0x1f9)][_0x30c5bc(0x1f7)]||!_0xecbecd[_0x30c5bc(0x1f9)][_0x30c5bc(0x152)])return;let _0x148c44={};try{const _0x92af23=await _0xecbecd[_0x30c5bc(0x1a5)](_0x30c5bc(0x1c3));if(_0x92af23&&_0x92af23[_0x30c5bc(0x1a3)])_0x148c44=JSON[_0x30c5bc(0x1a2)](_0x92af23[_0x30c5bc(0x1a3)]);}catch(_0x25820e){}const _0x482abc=[],_0x48762c=Date[_0x30c5bc(0x1ec)](),_0xa1dcb=0x30*0x3c*0x3c*0x3e8;try{const _0x1f6217=await _0xecbecd[_0x30c5bc(0x147)](_0xecbecd[_0x30c5bc(0x1f9)][_0x30c5bc(0x152)]+_0x30c5bc(0x171));if(!_0x1f6217||!_0x1f6217['val'])return;const _0x2caba2=JSON['parse'](_0x1f6217[_0x30c5bc(0x1a3)]),_0xb9c59=_0xecbecd[_0x30c5bc(0x1f9)][_0x30c5bc(0x1fb)]||[],_0x540eaa=_0xecbecd[_0x30c5bc(0x1f9)][_0x30c5bc(0x164)]||[],_0x18424e=new Set();_0x540eaa[_0x30c5bc(0x1c1)](_0x347a4f=>{const _0x23cfa6=_0x30c5bc;if(_0x347a4f[_0x23cfa6(0x1ea)])_0x18424e[_0x23cfa6(0x1c8)](_0x347a4f[_0x23cfa6(0x1ea)]);});for(const _0x14143e of _0x2caba2){if(_0x14143e['_calName']&&_0xb9c59['length']>0x0&&!_0xb9c59['includes'](_0x14143e[_0x30c5bc(0x1af)]))continue;const _0x341ca1=_0x14143e[_0x30c5bc(0x1c0)]||_0x14143e[_0x30c5bc(0x1ae)]||_0x14143e[_0x30c5bc(0x191)];if(!_0x341ca1)continue;const _0x5f03a3=new Date(_0x341ca1),_0x56101d=_0x5f03a3['getTime']();if(isNaN(_0x56101d))continue;if(_0x56101d<_0x48762c)continue;if(_0x56101d>_0x48762c+_0xa1dcb)continue;const _0x5f05f9=(_0x14143e[_0x30c5bc(0x17a)]||_0x14143e[_0x30c5bc(0x1ab)]||'')[_0x30c5bc(0x160)]();let _0x160f79=![],_0x37e3ef=[],_0x69100f=_0x14143e[_0x30c5bc(0x17a)]||_0x14143e[_0x30c5bc(0x1ab)]||_0x30c5bc(0x16b);if(_0x5f05f9[_0x30c5bc(0x1d7)](_0x30c5bc(0x170))||_0x5f05f9['includes'](_0x30c5bc(0x1d0))||_0x5f05f9[_0x30c5bc(0x1d7)]('ankunft'))_0x160f79=!![],_0x37e3ef=Array[_0x30c5bc(0x14e)](_0x18424e);else for(const _0xf056b6 of _0x18424e){if(_0x5f05f9[_0x30c5bc(0x1d7)](_0xf056b6['toLowerCase']()))_0x37e3ef[_0x30c5bc(0x1fd)](_0xf056b6);}_0x37e3ef[_0x30c5bc(0x183)]>0x0&&_0x37e3ef[_0x30c5bc(0x1c1)](_0x4a01c6=>{const _0x526204=_0x30c5bc;let _0x3eccb5=0x3c;if(_0x160f79){let _0x3e6874=0x0;Object['values'](_0x148c44)['forEach'](_0x32a424=>{if(_0x32a424>_0x3e6874)_0x3e6874=_0x32a424;}),_0x3eccb5=_0x3e6874>0x0?_0x3e6874:0x78;}else _0x3eccb5=getWarmupRobust(_0x148c44,_0x4a01c6);const _0x1dbe89=new Date(_0x56101d-_0x3eccb5*0xea60);_0x482abc['push']({'eventTime':_0x56101d,'triggerTime':_0x1dbe89[_0x526204(0x19f)](),'room':_0x4a01c6,'minutes':_0x3eccb5,'reason':_0x69100f,'isGlobal':_0x160f79});});}}catch(_0x13b495){}_0x482abc[_0x30c5bc(0x195)]((_0x269ab3,_0x1b9d00)=>_0x269ab3[_0x30c5bc(0x175)]-_0x1b9d00[_0x30c5bc(0x175)]);const _0x3c06d0=_0x482abc[_0x30c5bc(0x188)](0x0,0x1e);await _0xecbecd['setStateAsync'](_0x30c5bc(0x204),{'val':JSON['stringify'](_0x3c06d0),'ack':!![]});}async function monitorEnforcements(_0x194215){const _0x25a693=a1_0x5bc0b3;try{const _0x512422=_0x25a693(0x14f),_0x193bac=await _0x194215[_0x25a693(0x1a5)](_0x512422);if(!_0x193bac||!_0x193bac[_0x25a693(0x1a3)])return;let _0x1a3111=[];try{_0x1a3111=JSON[_0x25a693(0x1a2)](_0x193bac[_0x25a693(0x1a3)]);}catch(_0x16d484){return;}if(!Array[_0x25a693(0x1e9)](_0x1a3111)||_0x1a3111[_0x25a693(0x183)]===0x0)return;const _0x36bbd0=Date[_0x25a693(0x1ec)](),_0x3da48b=_0x194215['config'][_0x25a693(0x164)]||[];let _0x3d9546=![];for(let _0x4deccb=_0x1a3111[_0x25a693(0x183)]-0x1;_0x4deccb>=0x0;_0x4deccb--){const _0x3a9bab=_0x1a3111[_0x4deccb];if(_0x36bbd0>=_0x3a9bab[_0x25a693(0x1de)]){_0x194215[_0x25a693(0x163)][_0x25a693(0x162)](_0x25a693(0x1e0)+_0x3a9bab[_0x25a693(0x1b4)]+_0x25a693(0x1c2)),_0x1a3111[_0x25a693(0x1ff)](_0x4deccb,0x1),_0x3d9546=!![];continue;}const _0x374691=_0x3da48b[_0x25a693(0x182)](_0x1c90b7=>normalize(_0x1c90b7['location'])===normalize(_0x3a9bab['room'])&&(_0x1c90b7[_0x25a693(0x181)]===_0x25a693(0x1da)||_0x1c90b7[_0x25a693(0x181)]===_0x25a693(0x192)));if(_0x374691){const _0x4e976b=await findRelatedId(_0x194215,_0x374691['id'],_0x25a693(0x1ce));if(_0x4e976b){const _0x3e89e5=await _0x194215[_0x25a693(0x147)](_0x4e976b);_0x3e89e5&&typeof _0x3e89e5[_0x25a693(0x1a3)]===_0x25a693(0x19a)&&(_0x3e89e5['val']<0xf&&(_0x194215[_0x25a693(0x163)]['warn']('üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x3a9bab[_0x25a693(0x1b4)]+_0x25a693(0x17f)+_0x3e89e5[_0x25a693(0x1a3)]+_0x25a693(0x1bb)+_0x3a9bab[_0x25a693(0x1eb)]+_0x25a693(0x19e)),await _0x194215[_0x25a693(0x1ca)](_0x4e976b,_0x3a9bab[_0x25a693(0x1eb)]),await logAutomationAction(_0x194215,'[FORCE]\x20'+_0x3a9bab[_0x25a693(0x1b4)]+':\x20'+_0x3e89e5['val']+_0x25a693(0x169)+_0x3a9bab[_0x25a693(0x1eb)]+'¬∞C\x20(Kalender-Schutz)')));}}}_0x3d9546&&await _0x194215[_0x25a693(0x15e)](_0x512422,{'val':JSON[_0x25a693(0x1c4)](_0x1a3111),'ack':!![]});}catch(_0x117d01){_0x194215[_0x25a693(0x163)][_0x25a693(0x16e)](_0x25a693(0x1b2)+_0x117d01[_0x25a693(0x167)]);}}async function checkCalendarTriggers(_0x526c22){const _0x5d2411=a1_0x5bc0b3;if(!_0x526c22[_0x5d2411(0x1f9)][_0x5d2411(0x1f7)]||!_0x526c22[_0x5d2411(0x1f9)][_0x5d2411(0x152)])return;await updateSchedulePreview(_0x526c22);let _0x1ff946={},_0x593c6e={};try{const _0x4f3c8a=await _0x526c22[_0x5d2411(0x1a5)](_0x5d2411(0x1c3));if(_0x4f3c8a&&_0x4f3c8a[_0x5d2411(0x1a3)])_0x1ff946=JSON[_0x5d2411(0x1a2)](_0x4f3c8a[_0x5d2411(0x1a3)]);const _0x2a7a25=await _0x526c22[_0x5d2411(0x1a5)](_0x5d2411(0x15d));if(_0x2a7a25&&_0x2a7a25[_0x5d2411(0x1a3)])_0x593c6e=JSON[_0x5d2411(0x1a2)](_0x2a7a25[_0x5d2411(0x1a3)]);}catch(_0x3a47b2){}let _0x46700e={'default':0x15};try{const _0x3b5dd5=await _0x526c22[_0x5d2411(0x1a5)](_0x5d2411(0x1ac));if(_0x3b5dd5&&_0x3b5dd5[_0x5d2411(0x1a3)])_0x46700e=JSON[_0x5d2411(0x1a2)](_0x3b5dd5['val']);}catch(_0x48cf9b){}let _0x52526e=[];try{const _0x52fbc7=await _0x526c22[_0x5d2411(0x1a5)](_0x5d2411(0x14f));if(_0x52fbc7&&_0x52fbc7['val'])_0x52526e=JSON['parse'](_0x52fbc7[_0x5d2411(0x1a3)]);}catch(_0x6de43c){}try{const _0x141f0a=await _0x526c22[_0x5d2411(0x147)](_0x526c22[_0x5d2411(0x1f9)][_0x5d2411(0x152)]+_0x5d2411(0x171));if(!_0x141f0a||!_0x141f0a[_0x5d2411(0x1a3)])return;const _0x9cad6=JSON['parse'](_0x141f0a[_0x5d2411(0x1a3)]),_0x3593a3=Date['now'](),_0x2eb1ff=_0x526c22[_0x5d2411(0x1f9)][_0x5d2411(0x164)]||[],_0xac963f=_0x526c22[_0x5d2411(0x1f9)][_0x5d2411(0x1fb)]||[];let _0x31e0de=![];for(const _0x13be7a of _0x9cad6){if(_0x13be7a[_0x5d2411(0x1af)]&&_0xac963f['length']>0x0&&!_0xac963f[_0x5d2411(0x1d7)](_0x13be7a[_0x5d2411(0x1af)]))continue;const _0x8d15e8=_0x13be7a[_0x5d2411(0x1c0)]||_0x13be7a[_0x5d2411(0x1ae)]||_0x13be7a[_0x5d2411(0x191)];if(!_0x8d15e8)continue;const _0x113247=new Date(_0x8d15e8);if(isNaN(_0x113247['getTime']()))continue;const _0x8c85ea=(_0x13be7a[_0x5d2411(0x17a)]||_0x13be7a[_0x5d2411(0x1ab)]||'')[_0x5d2411(0x160)]();if(_0x8c85ea['includes'](_0x5d2411(0x170))||_0x8c85ea[_0x5d2411(0x1d7)](_0x5d2411(0x1d0))||_0x8c85ea[_0x5d2411(0x1d7)](_0x5d2411(0x1f4))){let _0x1ca998=0x0;Object[_0x5d2411(0x19d)](_0x1ff946)[_0x5d2411(0x1c1)](_0x216c97=>{if(_0x216c97>_0x1ca998)_0x1ca998=_0x216c97;});if(_0x1ca998===0x0)_0x1ca998=0x78;const _0x13f08d=_0x113247[_0x5d2411(0x19f)]()-_0x1ca998*0xea60;_0x3593a3>=_0x13f08d&&_0x3593a3<_0x113247[_0x5d2411(0x19f)]()&&(_0x526c22[_0x5d2411(0x157)]!=='normal'&&(_0x526c22[_0x5d2411(0x163)]['info']('üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20'+_0x1ca998+'\x20min).'),await _0x526c22[_0x5d2411(0x15e)](_0x5d2411(0x17d),{'val':_0x5d2411(0x1e6),'ack':![]})));}for(const _0x2b5cfa of _0x2eb1ff){if(_0x2b5cfa[_0x5d2411(0x1ea)]){const _0x4c4965=_0x2b5cfa[_0x5d2411(0x1ea)][_0x5d2411(0x160)](),_0x2fd8de=(_0x2b5cfa['name']||'')['toLowerCase']();let _0x28e45d=_0x8c85ea[_0x5d2411(0x1d7)](_0x4c4965);!_0x28e45d&&_0x2fd8de[_0x5d2411(0x183)]>0x3&&_0x8c85ea['includes'](_0x2fd8de)&&(_0x28e45d=!![]);if(_0x28e45d){const _0x3202d5=getWarmupRobust(_0x1ff946,_0x2b5cfa[_0x5d2411(0x1ea)]),_0x17863e=_0x593c6e[_0x2b5cfa['location']]||_0x5d2411(0x15c),_0x3282e5=_0x113247['getTime']()-_0x3202d5*0xea60;if(_0x3593a3>=_0x3282e5&&_0x3593a3<_0x113247[_0x5d2411(0x19f)]()){const _0x23246c=lastActions[_0x5d2411(0x177)+_0x2b5cfa[_0x5d2411(0x1ea)]];if(_0x23246c&&_0x3593a3-_0x23246c<CAL_COOLDOWN_MS)continue;const _0x11b159=await findRelatedId(_0x526c22,_0x2b5cfa['id'],'setpoint');if(_0x11b159){let _0x31320c=_0x46700e[_0x2b5cfa[_0x5d2411(0x1ea)]];if(_0x31320c===undefined)_0x31320c=_0x46700e[_0x5d2411(0x1aa)];if(_0x31320c===undefined)_0x31320c=0x15;const _0x8d6193=await _0x526c22[_0x5d2411(0x147)](_0x11b159);if(_0x8d6193&&typeof _0x8d6193[_0x5d2411(0x1a3)]===_0x5d2411(0x19a)&&_0x8d6193['val']<_0x31320c-0.5){_0x526c22[_0x5d2411(0x163)][_0x5d2411(0x162)](_0x5d2411(0x1d4)+_0x17863e+']:\x20Raum-Trigger\x20\x27'+_0x2b5cfa['location']+_0x5d2411(0x200)+_0x8c85ea+')\x20aktiv.\x20Heize\x20auf\x20'+_0x31320c+'¬∞C\x20(Vorlauf:\x20'+_0x3202d5+'\x20min).'),await _0x526c22['setForeignStateAsync'](_0x11b159,_0x31320c),await logAutomationAction(_0x526c22,_0x5d2411(0x16f)+_0x2b5cfa[_0x5d2411(0x1ea)]+'\x20->\x20'+_0x31320c+'¬∞C\x20(via\x20'+_0x17863e+')'),lastActions[_0x5d2411(0x177)+_0x2b5cfa[_0x5d2411(0x1ea)]]=_0x3593a3;const _0x224442=_0x52526e[_0x5d2411(0x1e3)](_0x43f0d1=>_0x43f0d1[_0x5d2411(0x1b4)]===_0x2b5cfa[_0x5d2411(0x1ea)]);if(_0x224442!==-0x1)_0x52526e[_0x5d2411(0x1ff)](_0x224442,0x1);_0x52526e[_0x5d2411(0x1fd)]({'room':_0x2b5cfa[_0x5d2411(0x1ea)],'target':_0x31320c,'until':_0x113247[_0x5d2411(0x19f)]()}),_0x31e0de=!![];}}}}}}}_0x31e0de&&await _0x526c22[_0x5d2411(0x15e)](_0x5d2411(0x14f),{'val':JSON[_0x5d2411(0x1c4)](_0x52526e),'ack':!![]});}catch(_0x3b65a1){_0x526c22['log'][_0x5d2411(0x18a)]('Calendar\x20Check\x20Error:\x20'+_0x3b65a1['message']);}}async function manageMpcIntervention(_0x4068e9,_0x24a8cf,_0x5656a7){const _0x456c7a=a1_0x5bc0b3;try{const _0x4ed848=_0x456c7a(0x1fe),_0x88ed38=await _0x4068e9[_0x456c7a(0x1a5)](_0x4ed848);let _0x59750d=[];if(_0x88ed38&&_0x88ed38[_0x456c7a(0x1a3)])try{_0x59750d=JSON[_0x456c7a(0x1a2)](_0x88ed38[_0x456c7a(0x1a3)]);}catch(_0x49d706){}const _0x1474ac=_0x59750d[_0x456c7a(0x1a1)](_0x24a8cf);if(_0x5656a7==='add')_0x1474ac===-0x1&&(_0x59750d[_0x456c7a(0x1fd)](_0x24a8cf),await _0x4068e9[_0x456c7a(0x15e)](_0x4ed848,{'val':JSON['stringify'](_0x59750d),'ack':!![]}));else _0x5656a7===_0x456c7a(0x199)&&(_0x1474ac!==-0x1&&(_0x59750d['splice'](_0x1474ac,0x1),await _0x4068e9[_0x456c7a(0x15e)](_0x4ed848,{'val':JSON[_0x456c7a(0x1c4)](_0x59750d),'ack':!![]})));}catch(_0x2ddd2a){}}async function cleanupGhostInterventions(_0x6fbf40){const _0x53116e=a1_0x5bc0b3;try{const _0x489cf9=_0x53116e(0x1fe),_0x275102=await _0x6fbf40['getStateAsync'](_0x489cf9);if(!_0x275102||!_0x275102[_0x53116e(0x1a3)])return;const _0x44bb58=JSON['parse'](_0x275102[_0x53116e(0x1a3)]);if(!Array[_0x53116e(0x1e9)](_0x44bb58)||_0x44bb58[_0x53116e(0x183)]===0x0)return;let _0x4b5885={'default':0x15};try{const _0x2e9524=await _0x6fbf40['getStateAsync'](_0x53116e(0x1ac));if(_0x2e9524&&_0x2e9524[_0x53116e(0x1a3)])_0x4b5885=JSON['parse'](_0x2e9524[_0x53116e(0x1a3)]);}catch(_0x2ea77c){}let _0x133a74=[];try{const _0x4cc242=await _0x6fbf40[_0x53116e(0x1a5)](_0x53116e(0x145));if(_0x4cc242&&_0x4cc242[_0x53116e(0x1a3)])_0x133a74=JSON[_0x53116e(0x1a2)](_0x4cc242['val']);}catch(_0x379739){}let _0x387249={},_0x23c356=![];try{const _0x4fe64=await _0x6fbf40[_0x53116e(0x1a5)](_0x53116e(0x159));if(_0x4fe64&&_0x4fe64['val'])_0x387249=JSON[_0x53116e(0x1a2)](_0x4fe64[_0x53116e(0x1a3)]);}catch(_0x5076b4){}if(_0x387249[_0x53116e(0x179)]){const _0x439299=Date['now']();for(const [_0x60ca9d,_0x349a66]of Object[_0x53116e(0x1df)](_0x387249[_0x53116e(0x179)])){_0x439299-_0x349a66>PENALTY_TTL&&(delete _0x387249[_0x60ca9d],delete _0x387249['_meta'][_0x60ca9d],_0x23c356=!![],_0x6fbf40[_0x53116e(0x163)][_0x53116e(0x162)](_0x53116e(0x1bc)+_0x60ca9d+_0x53116e(0x18b)));}}const _0x3ff9d6=_0x6fbf40['config'][_0x53116e(0x164)]||[];let _0x354c32=![];for(let _0x563ee6=_0x44bb58[_0x53116e(0x183)]-0x1;_0x563ee6>=0x0;_0x563ee6--){const _0x2e1d25=_0x44bb58[_0x563ee6],_0x1a326c=_0x3ff9d6[_0x53116e(0x182)](_0x101b02=>normalize(_0x101b02[_0x53116e(0x1ea)])===normalize(_0x2e1d25)&&(_0x101b02['type']==='temperature'||_0x101b02['type']==='thermostat'));if(!_0x1a326c){_0x6fbf40[_0x53116e(0x163)][_0x53116e(0x18a)](_0x53116e(0x144)+_0x2e1d25+_0x53116e(0x19c)),_0x44bb58[_0x53116e(0x1ff)](_0x563ee6,0x1),_0x354c32=!![];continue;}if(_0x1a326c){const _0x2b3e81=await findRelatedId(_0x6fbf40,_0x1a326c['id'],_0x53116e(0x1ce)),_0x2b3883=await _0x6fbf40[_0x53116e(0x147)](_0x1a326c['id']);if(_0x2b3e81){const _0x3bf933=await _0x6fbf40['getForeignStateAsync'](_0x2b3e81);if(_0x3bf933&&typeof _0x3bf933[_0x53116e(0x1a3)]===_0x53116e(0x19a)){let _0x149bda=![],_0x34d35b='';Math[_0x53116e(0x201)](_0x3bf933['val']-ECO_TEMP)>0.5&&(_0x149bda=!![],_0x34d35b=_0x53116e(0x146));if(!_0x149bda&&_0x2b3883&&typeof _0x2b3883[_0x53116e(0x1a3)]===_0x53116e(0x19a)){const _0x5a3448=_0x4b5885[_0x2e1d25]||_0x4b5885[_0x53116e(0x1aa)]||0x15;_0x2b3883[_0x53116e(0x1a3)]<_0x5a3448+0.2&&(_0x149bda=!![],_0x34d35b=_0x53116e(0x18e));}if(_0x149bda){if(_0x34d35b===_0x53116e(0x146)){_0x6fbf40[_0x53116e(0x163)][_0x53116e(0x162)](_0x53116e(0x1a0)+_0x2e1d25+_0x53116e(0x14d)+_0x3bf933['val']+_0x53116e(0x1d1)+ECO_TEMP+_0x53116e(0x1ef));const _0x121808=lastActions[_0x53116e(0x177)+_0x2e1d25],_0x1191f0=_0x121808&&Date[_0x53116e(0x1ec)]()-_0x121808<0x2*0x3c*0x3e8;if(!_0x1191f0&&_0x3bf933['val']>ECO_TEMP+0.5){_0x6fbf40[_0x53116e(0x1a6)]&&(_0x6fbf40[_0x53116e(0x163)][_0x53116e(0x162)](_0x53116e(0x1b7)+_0x2e1d25+_0x53116e(0x186)),_0x6fbf40[_0x53116e(0x1a6)](_0x53116e(0x1d2),{'room':_0x2e1d25}));const _0x2cff8b=_0x2e1d25+'_'+new Date()[_0x53116e(0x1f3)]();if(!_0x387249[_0x2cff8b]){_0x387249[_0x2cff8b]=0x1;if(!_0x387249[_0x53116e(0x179)])_0x387249[_0x53116e(0x179)]={};_0x387249[_0x53116e(0x179)][_0x2cff8b]=Date[_0x53116e(0x1ec)](),_0x23c356=!![];}}else _0x1191f0&&_0x6fbf40[_0x53116e(0x163)][_0x53116e(0x162)]('üìÖ\x20[MPC\x20INFO]\x20'+_0x2e1d25+_0x53116e(0x1a4));}else{if(_0x34d35b===_0x53116e(0x18e)){let _0x55e54c=![];if(_0x133a74['find'](_0x1d300c=>_0x1d300c[_0x53116e(0x1b4)]===_0x2e1d25))_0x55e54c=!![];const _0x225578=_0x3ff9d6['filter'](_0x4bced1=>normalize(_0x4bced1[_0x53116e(0x1ea)])===normalize(_0x2e1d25)&&(_0x4bced1['type']===_0x53116e(0x1b3)||_0x4bced1['type']==='sensor'||_0x4bced1[_0x53116e(0x181)]==='contact'));for(const _0x16b83d of _0x225578){try{const _0x1fad81=await _0x6fbf40[_0x53116e(0x147)](_0x16b83d['id']);if(_0x1fad81&&(_0x1fad81[_0x53116e(0x1a3)]===!![]||_0x1fad81[_0x53116e(0x1a3)]===0x1||String(_0x1fad81['val'])[_0x53116e(0x160)]()===_0x53116e(0x1ad)))_0x55e54c=!![];}catch(_0x1b122c){}}if(_0x55e54c)_0x6fbf40[_0x53116e(0x163)][_0x53116e(0x162)](_0x53116e(0x1e7)+_0x2e1d25+_0x53116e(0x1f0));else{const _0xac5a9f=_0x4b5885[_0x2e1d25]||_0x4b5885[_0x53116e(0x1aa)]||0x15;_0x6fbf40['log']['info'](_0x53116e(0x14b)+_0x2e1d25+_0x53116e(0x14a)+_0x2b3883[_0x53116e(0x1a3)]+_0x53116e(0x1c6)+(_0xac5a9f+0.2)+_0x53116e(0x154)),await _0x6fbf40['setForeignStateAsync'](_0x2b3e81,_0xac5a9f),await logAutomationAction(_0x6fbf40,_0x53116e(0x1d3)+_0x2e1d25+_0x53116e(0x16d)+_0xac5a9f+'¬∞C'),lastActions[_0x53116e(0x1ed)+_0x2e1d25]=Date['now']();}}}_0x44bb58[_0x53116e(0x1ff)](_0x563ee6,0x1),_0x354c32=!![];}}}}}_0x354c32&&await _0x6fbf40[_0x53116e(0x15e)](_0x489cf9,{'val':JSON['stringify'](_0x44bb58),'ack':!![]}),_0x23c356&&await _0x6fbf40[_0x53116e(0x15e)](_0x53116e(0x159),{'val':JSON[_0x53116e(0x1c4)](_0x387249),'ack':!![]});}catch(_0x2f2749){}}async function applyEnergySavings(_0x46676d,_0x50c21f){const _0x1b5343=a1_0x5bc0b3;await cleanupGhostInterventions(_0x46676d);if(!_0x50c21f||_0x50c21f[_0x1b5343(0x183)]===0x0)return;const _0x143227=_0x46676d[_0x1b5343(0x1f9)][_0x1b5343(0x164)]||[],_0x35e92e=Date[_0x1b5343(0x1ec)]();for(const _0x2cf4c9 of _0x50c21f){const _0x16bb08=_0x2cf4c9[_0x1b5343(0x1b4)],_0x22e94f=_0x2cf4c9['minutes_safe'],_0x27bbe4=_0x2cf4c9[_0x1b5343(0x1eb)]||0x15;if(lastActions['rescue_'+_0x16bb08]&&_0x35e92e-lastActions[_0x1b5343(0x1ed)+_0x16bb08]<RESCUE_LOCK_MS)continue;const _0x4b58bd=_0x143227['find'](_0x4a9c66=>normalize(_0x4a9c66[_0x1b5343(0x1ea)])===normalize(_0x16bb08)&&(_0x4a9c66[_0x1b5343(0x181)]===_0x1b5343(0x1da)||_0x4a9c66[_0x1b5343(0x181)]==='thermostat'));if(!_0x4b58bd)continue;const _0x1dd384=await findRelatedId(_0x46676d,_0x4b58bd['id'],'setpoint');if(_0x1dd384){if(lastActions[_0x1b5343(0x1c7)+_0x16bb08]&&_0x35e92e-lastActions[_0x1b5343(0x1c7)+_0x16bb08]<0x1e*0x3c*0x3e8)continue;const _0x5ddeb5=await _0x46676d[_0x1b5343(0x147)](_0x1dd384);if(_0x5ddeb5&&typeof _0x5ddeb5['val']===_0x1b5343(0x19a)){const _0x5be4ca=_0x5ddeb5['val'];_0x5be4ca!==ECO_TEMP&&await manageMpcIntervention(_0x46676d,_0x16bb08,_0x1b5343(0x199));if(_0x22e94f>0x1e)_0x5be4ca>ECO_TEMP+0.5&&(_0x46676d[_0x1b5343(0x163)]['info']('üçÉ\x20[MPC\x20ACTION]\x20Senke\x20'+_0x16bb08+_0x1b5343(0x17f)+ECO_TEMP+_0x1b5343(0x17e)+_0x22e94f+_0x1b5343(0x1b0)),await _0x46676d[_0x1b5343(0x1ca)](_0x1dd384,ECO_TEMP),await manageMpcIntervention(_0x46676d,_0x16bb08,_0x1b5343(0x1c8)),lastActions[_0x1b5343(0x1c7)+_0x16bb08]=_0x35e92e,await logAutomationAction(_0x46676d,_0x1b5343(0x1d8)+_0x16bb08+_0x1b5343(0x1d5)+ECO_TEMP+'¬∞C'));else _0x22e94f<=0xf&&(_0x5be4ca<_0x27bbe4&&(_0x46676d[_0x1b5343(0x163)][_0x1b5343(0x162)](_0x1b5343(0x173)+_0x16bb08+'\x20wieder\x20auf\x20'+_0x27bbe4+'¬∞C!\x20(Puffer\x20leer).'),await _0x46676d[_0x1b5343(0x1ca)](_0x1dd384,_0x27bbe4),await manageMpcIntervention(_0x46676d,_0x16bb08,_0x1b5343(0x199)),lastActions[_0x1b5343(0x1c7)+_0x16bb08]=_0x35e92e,await logAutomationAction(_0x46676d,'[MPC]\x20'+_0x16bb08+_0x1b5343(0x151)+_0x27bbe4+'¬∞C')));}}else _0x46676d[_0x1b5343(0x163)][_0x1b5343(0x18a)]('[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20'+_0x16bb08+'\x20gefunden!');}}module[a1_0x5bc0b3(0x1ba)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};