const a1_0x5b4f4e=a1_0x1f7d;function a1_0xb5ca(){const _0x30cfd1=['529887ktnuti','analysis.automation.confidenceThreshold','consultButler','log','setStateAsync','766230qWrRPm','8mUrhSb','PrÃ¤diktion:\x20','analysis.automation.lastAction','switch','type','location','\x20->\x20Schalte\x20','off','[BLOCKED]\x20','\x20->\x20','getForeignStateAsync','exports','val','4898179sxCeqF','ðŸ¤–\x20Automation:\x20WÃ¼rde\x20','info','reason','analysis.automation.mode','40xepUko','3573mVdDyf','find','name','dimmer','apply','active','debug','now','simulate','6383zoJvxc','config','toString','ðŸ¤–\x20Butler\x20Blocked:\x20','light','7YrgPee','3830LazpTY','654470lipaYj','2115208hRBJqw','search','(((.+)+)+)+$','./ai_agent','constructor'];a1_0xb5ca=function(){return _0x30cfd1;};return a1_0xb5ca();}function a1_0x1f7d(_0x27e6a2,_0x29925d){const _0x5a646b=a1_0xb5ca();return a1_0x1f7d=function(_0xfb8f63,_0x4972e4){_0xfb8f63=_0xfb8f63-0xa1;let _0xb5cafd=_0x5a646b[_0xfb8f63];return _0xb5cafd;},a1_0x1f7d(_0x27e6a2,_0x29925d);}(function(_0x2c4dc5,_0x7bcafb){const _0x1c9fe9=a1_0x1f7d,_0x317cdf=_0x2c4dc5();while(!![]){try{const _0x213bac=parseInt(_0x1c9fe9(0xc5))/0x1*(-parseInt(_0x1c9fe9(0xbb))/0x2)+parseInt(_0x1c9fe9(0xa3))/0x3+parseInt(_0x1c9fe9(0xa9))/0x4*(parseInt(_0x1c9fe9(0xcc))/0x5)+-parseInt(_0x1c9fe9(0xa8))/0x6+-parseInt(_0x1c9fe9(0xca))/0x7*(-parseInt(_0x1c9fe9(0xcd))/0x8)+-parseInt(_0x1c9fe9(0xbc))/0x9*(-parseInt(_0x1c9fe9(0xcb))/0xa)+-parseInt(_0x1c9fe9(0xb6))/0xb;if(_0x213bac===_0x7bcafb)break;else _0x317cdf['push'](_0x317cdf['shift']());}catch(_0xa6e141){_0x317cdf['push'](_0x317cdf['shift']());}}}(a1_0xb5ca,0x25a67));const a1_0x4972e4=(function(){let _0x197e6e=!![];return function(_0x43fccc,_0x144664){const _0x5a9010=_0x197e6e?function(){const _0x45e9fb=a1_0x1f7d;if(_0x144664){const _0x85f6e3=_0x144664[_0x45e9fb(0xc0)](_0x43fccc,arguments);return _0x144664=null,_0x85f6e3;}}:function(){};return _0x197e6e=![],_0x5a9010;};}()),a1_0xfb8f63=a1_0x4972e4(this,function(){const _0x1145e5=a1_0x1f7d;return a1_0xfb8f63[_0x1145e5(0xc7)]()[_0x1145e5(0xce)]('(((.+)+)+)+$')[_0x1145e5(0xc7)]()[_0x1145e5(0xa2)](a1_0xfb8f63)[_0x1145e5(0xce)](_0x1145e5(0xcf));});a1_0xfb8f63();'use strict';const aiAgent=require(a1_0x5b4f4e(0xa1)),COOLDOWN_MS=0x3c*0x3e8,lastActions={};async function handlePrediction(_0x565b96,_0x23d214,_0x409ea5){const _0x83ad58=a1_0x5b4f4e;if(!_0x23d214||_0x23d214==='Unknown')return;let _0x4f092a=_0x83ad58(0xb0),_0x26d501=0.6;try{const _0x456986=await _0x565b96['getStateAsync'](_0x83ad58(0xba));if(_0x456986&&_0x456986[_0x83ad58(0xb5)])_0x4f092a=_0x456986[_0x83ad58(0xb5)];const _0x1ba8db=await _0x565b96['getStateAsync'](_0x83ad58(0xa4));if(_0x1ba8db&&_0x1ba8db['val'])_0x26d501=_0x1ba8db[_0x83ad58(0xb5)];}catch(_0x16e45d){}if(_0x4f092a===_0x83ad58(0xb0))return;if(_0x409ea5<_0x26d501)return;const _0x1cfb5d=Date[_0x83ad58(0xc3)]();if(lastActions[_0x23d214]&&_0x1cfb5d-lastActions[_0x23d214]<COOLDOWN_MS)return;const _0x40e36a=_0x565b96[_0x83ad58(0xc6)]['devices']||[],_0x5992e5=_0x40e36a[_0x83ad58(0xbd)](_0x16855c=>_0x16855c[_0x83ad58(0xae)]===_0x23d214&&(_0x16855c['type']===_0x83ad58(0xc9)||_0x16855c[_0x83ad58(0xad)]===_0x83ad58(0xbf)||_0x16855c[_0x83ad58(0xad)]===_0x83ad58(0xac)));if(!_0x5992e5){_0x565b96['log']['debug'](_0x83ad58(0xb7)+_0x23d214+'\x20schalten,\x20aber\x20kein\x20Licht-GerÃ¤t\x20dort\x20gefunden.');return;}const _0x16614a=await aiAgent[_0x83ad58(0xa5)](_0x565b96,_0x23d214,_0x5992e5[_0x83ad58(0xbe)],_0x409ea5);if(!_0x16614a['approved']){_0x565b96[_0x83ad58(0xa6)][_0x83ad58(0xc2)](_0x83ad58(0xc8)+_0x23d214+_0x83ad58(0xb2)+_0x16614a['reason']),await _0x565b96['setStateAsync'](_0x83ad58(0xab),{'val':_0x83ad58(0xb1)+_0x16614a[_0x83ad58(0xb9)],'ack':!![]});return;}const _0x5a3e25=_0x83ad58(0xaa)+_0x23d214+_0x83ad58(0xaf)+_0x5992e5[_0x83ad58(0xbe)]+'\x20('+_0x16614a['reason']+')';await _0x565b96[_0x83ad58(0xa7)](_0x83ad58(0xab),{'val':'['+_0x4f092a['toUpperCase']()+']\x20'+_0x5a3e25,'ack':!![]});if(_0x4f092a===_0x83ad58(0xc4))_0x565b96[_0x83ad58(0xa6)][_0x83ad58(0xb8)]('ðŸ‘€\x20SIMULATION:\x20'+_0x5a3e25);else{if(_0x4f092a===_0x83ad58(0xc1)){_0x565b96['log'][_0x83ad58(0xb8)]('âš¡\x20ACTION:\x20'+_0x5a3e25);const _0x218242=await _0x565b96[_0x83ad58(0xb3)](_0x5992e5['id']);if(_0x218242&&(_0x218242[_0x83ad58(0xb5)]===!![]||_0x218242[_0x83ad58(0xb5)]>0x0)){}else await _0x565b96['setForeignStateAsync'](_0x5992e5['id'],!![]);lastActions[_0x23d214]=_0x1cfb5d;}}}module[a1_0x5b4f4e(0xb4)]={'handlePrediction':handlePrediction};