const a1_0x29d7aa=a1_0x5cff;(function(_0x2d2c04,_0x3aca89){const _0x203995=a1_0x5cff,_0x9a0447=_0x2d2c04();while(!![]){try{const _0x5709c1=parseInt(_0x203995(0x1e3))/0x1+parseInt(_0x203995(0x1eb))/0x2+parseInt(_0x203995(0x1d5))/0x3*(-parseInt(_0x203995(0x208))/0x4)+-parseInt(_0x203995(0x187))/0x5*(parseInt(_0x203995(0x15f))/0x6)+parseInt(_0x203995(0x158))/0x7*(-parseInt(_0x203995(0x1fd))/0x8)+parseInt(_0x203995(0x1f3))/0x9*(parseInt(_0x203995(0x1c0))/0xa)+-parseInt(_0x203995(0x1c7))/0xb*(parseInt(_0x203995(0x1e8))/0xc);if(_0x5709c1===_0x3aca89)break;else _0x9a0447['push'](_0x9a0447['shift']());}catch(_0x4718e9){_0x9a0447['push'](_0x9a0447['shift']());}}}(a1_0x5a80,0xd0fc9));const a1_0x228744=(function(){let _0x134240=!![];return function(_0x2023fa,_0x3ae87c){const _0xf09ff7=_0x134240?function(){if(_0x3ae87c){const _0x3d944f=_0x3ae87c['apply'](_0x2023fa,arguments);return _0x3ae87c=null,_0x3d944f;}}:function(){};return _0x134240=![],_0xf09ff7;};}()),a1_0x14f18f=a1_0x228744(this,function(){const _0x4b9d44=a1_0x5cff;return a1_0x14f18f['toString']()[_0x4b9d44(0x1dd)](_0x4b9d44(0x18d))[_0x4b9d44(0x157)]()['constructor'](a1_0x14f18f)['search'](_0x4b9d44(0x18d));});a1_0x14f18f();'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0xc2e566){const _0x19a2f1=a1_0x5cff;if(!_0xc2e566)return'';return _0xc2e566[_0x19a2f1(0x1c9)]()[_0x19a2f1(0x164)](/\s+/g,'')[_0x19a2f1(0x1b8)]();}function a1_0x5cff(_0x729a42,_0x120d32){const _0x20b99e=a1_0x5a80();return a1_0x5cff=function(_0x14f18f,_0x228744){_0x14f18f=_0x14f18f-0x157;let _0x5a80e0=_0x20b99e[_0x14f18f];return _0x5a80e0;},a1_0x5cff(_0x729a42,_0x120d32);}function getWarmupRobust(_0x18fb43,_0x206c38){const _0x5d96c6=a1_0x5cff;if(!_0x18fb43||!_0x206c38)return 0x3c;if(_0x18fb43[_0x206c38]!==undefined)return _0x18fb43[_0x206c38];const _0x386a4c=_0x206c38[_0x5d96c6(0x1c9)]()['replace'](/Ã¤/g,'ae')[_0x5d96c6(0x164)](/Ã¶/g,'oe')[_0x5d96c6(0x164)](/Ã¼/g,'ue')[_0x5d96c6(0x164)](/ÃŸ/g,'ss')[_0x5d96c6(0x164)](/\s+/g,'_')[_0x5d96c6(0x164)](/[^a-z0-9_]/g,'');if(_0x18fb43[_0x386a4c]!==undefined)return _0x18fb43[_0x386a4c];return 0x3c;}async function logAutomationAction(_0x426c97,_0x533997){const _0x5d8370=a1_0x5cff;await _0x426c97['setStateAsync']('analysis.automation.lastAction',{'val':_0x533997,'ack':!![]});try{const _0x5c5837=_0x5d8370(0x1ac),_0xe9f8cb=await _0x426c97[_0x5d8370(0x1ea)](_0x5c5837);let _0x4a5135=[];if(_0xe9f8cb&&_0xe9f8cb[_0x5d8370(0x1a2)])try{_0x4a5135=JSON[_0x5d8370(0x1aa)](_0xe9f8cb[_0x5d8370(0x1a2)]);}catch(_0x2c2ed8){}_0x4a5135[_0x5d8370(0x181)]({'ts':Date[_0x5d8370(0x166)](),'msg':_0x533997});if(_0x4a5135[_0x5d8370(0x1ae)]>0x32)_0x4a5135=_0x4a5135[_0x5d8370(0x17c)](0x0,0x32);await _0x426c97[_0x5d8370(0x1b7)](_0x5c5837,{'val':JSON[_0x5d8370(0x19e)](_0x4a5135),'ack':!![]});}catch(_0x31298d){}}async function handlePrediction(_0x334517,_0x4427fe,_0x2db0f4){const _0x4eb197=a1_0x5cff;if(!_0x4427fe||_0x4427fe==='Unknown')return;let _0x3a7810=_0x4eb197(0x1c8),_0x8e43f5=0.6;try{const _0x1ab9e3=await _0x334517[_0x4eb197(0x1ea)]('analysis.automation.mode');if(_0x1ab9e3&&_0x1ab9e3[_0x4eb197(0x1a2)])_0x3a7810=_0x1ab9e3['val'];const _0x1634e1=await _0x334517[_0x4eb197(0x1ea)](_0x4eb197(0x1f8));if(_0x1634e1&&_0x1634e1[_0x4eb197(0x1a2)])_0x8e43f5=_0x1634e1[_0x4eb197(0x1a2)];}catch(_0x3b9775){}if(_0x3a7810==='off'||_0x2db0f4<_0x8e43f5)return;const _0x4d489d=Date[_0x4eb197(0x166)]();if(lastActions[_0x4427fe]&&_0x4d489d-lastActions[_0x4427fe]<COOLDOWN_MS)return;const _0x129baa=_0x334517[_0x4eb197(0x1f6)][_0x4eb197(0x1b3)]||[],_0x57e1a9=normalize(_0x4427fe),_0x2c8cb0=_0x129baa[_0x4eb197(0x175)](_0x11942c=>normalize(_0x11942c[_0x4eb197(0x182)])===_0x57e1a9&&(_0x11942c['type']===_0x4eb197(0x17f)||_0x11942c['type']==='dimmer'||_0x11942c[_0x4eb197(0x1cd)]===_0x4eb197(0x1fb)));if(!_0x2c8cb0)return;const _0xc63443=await aiAgent[_0x4eb197(0x19f)](_0x334517,_0x4427fe,_0x2c8cb0[_0x4eb197(0x1e5)],_0x2db0f4);if(!_0xc63443[_0x4eb197(0x168)])return;const _0x30060d='PrÃ¤diktion:\x20'+_0x4427fe+'\x20->\x20Schalte\x20'+_0x2c8cb0['name']+'\x20('+_0xc63443[_0x4eb197(0x189)]+')';await logAutomationAction(_0x334517,'['+_0x3a7810['toUpperCase']()+']\x20'+_0x30060d);if(_0x3a7810===_0x4eb197(0x20c)){const _0x56c626=await _0x334517['getForeignStateAsync'](_0x2c8cb0['id']);(!_0x56c626||!_0x56c626[_0x4eb197(0x1a2)]&&_0x56c626[_0x4eb197(0x1a2)]!==!![])&&await _0x334517[_0x4eb197(0x1d1)](_0x2c8cb0['id'],!![]),lastActions[_0x4427fe]=_0x4d489d;}}async function findRelatedId(_0x251b36,_0x2026b5,_0x63d83e='setpoint'){const _0x448a0c=a1_0x5cff;if(_0x63d83e===_0x448a0c(0x16d)&&_0x251b36['config'][_0x448a0c(0x195)]){let _0x5b0857=_0x251b36[_0x448a0c(0x1f6)][_0x448a0c(0x195)];if(typeof _0x5b0857===_0x448a0c(0x177))try{_0x5b0857=JSON[_0x448a0c(0x1aa)](_0x5b0857);}catch(_0x5af9cc){}if(_0x5b0857&&_0x5b0857[_0x2026b5])return _0x5b0857[_0x2026b5];}if(_0x63d83e==='valve'&&_0x251b36['config'][_0x448a0c(0x17e)]){let _0x425642=_0x251b36[_0x448a0c(0x1f6)]['valveMapping'];if(typeof _0x425642==='string')try{_0x425642=JSON[_0x448a0c(0x1aa)](_0x425642);}catch(_0x317bb4){}if(_0x425642&&_0x425642[_0x2026b5])return _0x425642[_0x2026b5];}let _0x5d5ea3=[];if(_0x63d83e==='setpoint')_0x5d5ea3=[{'s':_0x448a0c(0x1fa),'t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x448a0c(0x179),'t':_0x448a0c(0x18e)},{'s':_0x448a0c(0x179),'t':_0x448a0c(0x15e)},{'s':'ACTUAL_TEMPERATURE','t':_0x448a0c(0x17d)},{'s':_0x448a0c(0x1b4),'t':'occupied_heating_setpoint'},{'s':_0x448a0c(0x1b4),'t':'current_heating_setpoint'},{'s':_0x448a0c(0x171),'t':_0x448a0c(0x1c2)},{'s':_0x448a0c(0x1a7),'t':_0x448a0c(0x1b2)},{'s':_0x448a0c(0x1da),'t':_0x448a0c(0x20a)},{'s':_0x448a0c(0x171),'t':_0x448a0c(0x16d)}];else _0x63d83e===_0x448a0c(0x1ca)&&(_0x5d5ea3=[{'s':'.1.ACTUAL_TEMPERATURE','t':_0x448a0c(0x165)},{'s':_0x448a0c(0x179),'t':_0x448a0c(0x165)},{'s':_0x448a0c(0x179),'t':_0x448a0c(0x199)},{'s':_0x448a0c(0x1b4),'t':_0x448a0c(0x196)},{'s':_0x448a0c(0x171),'t':'valve_position'},{'s':_0x448a0c(0x171),'t':_0x448a0c(0x1bf)}]);for(const _0x3628cf of _0x5d5ea3){if(_0x2026b5[_0x448a0c(0x160)](_0x3628cf['s'])){const _0x423fc8=_0x2026b5['replace'](_0x3628cf['s'],_0x3628cf['t']),_0x18f4bd=await _0x251b36[_0x448a0c(0x20d)](_0x423fc8);if(_0x18f4bd)return _0x423fc8;}}try{const _0x465326=_0x2026b5[_0x448a0c(0x1ab)]('.');if(_0x465326[_0x448a0c(0x1ae)]>0x2){const _0x46d65c=_0x465326['slice'](0x0,-0x1)['join']('.'),_0x269a59=await _0x251b36[_0x448a0c(0x1f1)](_0x46d65c+'.*'),_0x382f50=[],_0x31fed3=_0x2026b5['split'](/[._]+/)['filter'](_0x3d1861=>!['openknx','0',_0x448a0c(0x1e4),'ist',_0x448a0c(0x1c6),_0x448a0c(0x171),'actual',_0x448a0c(0x183),_0x448a0c(0x1a1),_0x448a0c(0x1e9)][_0x448a0c(0x160)](_0x3d1861[_0x448a0c(0x1c9)]()));for(const [_0x28219c,_0x355eeb]of Object[_0x448a0c(0x176)](_0x269a59)){if(_0x28219c===_0x2026b5)continue;if(_0x355eeb&&_0x355eeb[_0x448a0c(0x190)]){const _0x4d2a54=_0x28219c[_0x448a0c(0x1c9)](),_0x439ac3=(_0x355eeb['common'][_0x448a0c(0x201)]||'')[_0x448a0c(0x1c9)](),_0x2f4e7a=(_0x355eeb[_0x448a0c(0x190)]['unit']||'')[_0x448a0c(0x1c9)]();let _0x322e1f=![];if(_0x63d83e===_0x448a0c(0x16d)&&_0x355eeb[_0x448a0c(0x190)]['write']===!![])_0x322e1f=_0x4d2a54[_0x448a0c(0x160)]('set')||_0x4d2a54['includes'](_0x448a0c(0x1bc))||_0x4d2a54['includes']('target')||_0x439ac3[_0x448a0c(0x160)](_0x448a0c(0x203))||_0x439ac3[_0x448a0c(0x160)]('thermostat.setpoint');else _0x63d83e==='valve'&&(_0x322e1f=_0x4d2a54[_0x448a0c(0x160)](_0x448a0c(0x1bf))||_0x4d2a54[_0x448a0c(0x160)](_0x448a0c(0x1ca))||_0x4d2a54[_0x448a0c(0x160)](_0x448a0c(0x1d2))||_0x4d2a54[_0x448a0c(0x160)](_0x448a0c(0x186))||_0x439ac3[_0x448a0c(0x160)](_0x448a0c(0x1c5))||_0x439ac3[_0x448a0c(0x160)]('value.valve')||_0x2f4e7a[_0x448a0c(0x160)]('%'));if(_0x322e1f){const _0x2083b1=_0x28219c['split'](/[._]+/)[_0x448a0c(0x1ed)](_0x2f2e2f=>_0x2f2e2f[_0x448a0c(0x1c9)]());let _0x4f76da=0x0;_0x31fed3[_0x448a0c(0x1de)](_0x1d0cf6=>{const _0x20574d=_0x448a0c;if(_0x2083b1[_0x20574d(0x160)](_0x1d0cf6['toLowerCase']()))_0x4f76da++;}),_0x382f50[_0x448a0c(0x1db)]({'id':_0x28219c,'score':_0x4f76da});}}}if(_0x382f50['length']>0x0){_0x382f50[_0x448a0c(0x1d9)]((_0x34211a,_0x4a839a)=>_0x4a839a[_0x448a0c(0x1d7)]-_0x34211a[_0x448a0c(0x1d7)]);if(_0x382f50[0x0][_0x448a0c(0x1d7)]>0x0)return _0x382f50[0x0]['id'];}}}catch(_0x2fefbd){}return null;}async function scanThermostats(_0x458ee4){const _0x2f0b9b=a1_0x5cff,_0x4d1bbd=_0x458ee4[_0x2f0b9b(0x1f6)][_0x2f0b9b(0x1b3)]||[],_0x5905a5=[],_0x43c779=_0x4d1bbd['filter'](_0x3528fc=>_0x3528fc['id']&&_0x3528fc['id'][_0x2f0b9b(0x160)](_0x2f0b9b(0x171))||_0x3528fc[_0x2f0b9b(0x1cd)]&&[_0x2f0b9b(0x171),_0x2f0b9b(0x1a5),_0x2f0b9b(0x183)][_0x2f0b9b(0x160)](_0x3528fc[_0x2f0b9b(0x1cd)])||_0x3528fc[_0x2f0b9b(0x1e5)]&&_0x3528fc[_0x2f0b9b(0x1e5)][_0x2f0b9b(0x1c9)]()[_0x2f0b9b(0x160)](_0x2f0b9b(0x1e6)));for(const _0x5bb3ce of _0x43c779){const _0x2e053f=await findRelatedId(_0x458ee4,_0x5bb3ce['id'],'setpoint'),_0x31b5e4=await findRelatedId(_0x458ee4,_0x5bb3ce['id'],_0x2f0b9b(0x1ca));let _0x199628='Nicht\x20gefunden',_0x374af8=![],_0x5b03c0=_0x458ee4['config']['thermostatMapping']||{};if(typeof _0x5b03c0==='string')try{_0x5b03c0=JSON['parse'](_0x5b03c0);}catch(_0x20b165){}let _0x2452e2=_0x458ee4[_0x2f0b9b(0x1f6)][_0x2f0b9b(0x17e)]||{};if(typeof _0x2452e2===_0x2f0b9b(0x177))try{_0x2452e2=JSON['parse'](_0x2452e2);}catch(_0x442056){}if(_0x5b03c0[_0x5bb3ce['id']]&&_0x5b03c0[_0x5bb3ce['id']]===_0x2e053f||_0x2452e2[_0x5bb3ce['id']]&&_0x2452e2[_0x5bb3ce['id']]===_0x31b5e4)_0x199628=_0x2f0b9b(0x1fc),_0x374af8=!![];else(_0x2e053f||_0x31b5e4)&&(_0x199628='Auto-Erkennung');_0x5905a5[_0x2f0b9b(0x1db)]({'room':_0x5bb3ce[_0x2f0b9b(0x182)]||_0x2f0b9b(0x1e1),'sensorId':_0x5bb3ce['id'],'setpointId':_0x2e053f||'-','valveId':_0x31b5e4||'-','source':_0x199628,'isManual':_0x374af8,'status':_0x2e053f&&_0x31b5e4?_0x2f0b9b(0x1d6):_0x2e053f?'OK':'Fehlt'});}return _0x5905a5['sort']((_0x4b4b20,_0x446188)=>_0x4b4b20[_0x2f0b9b(0x188)]['localeCompare'](_0x446188[_0x2f0b9b(0x188)]));}async function updateSchedulePreview(_0x24360a){const _0x20252a=a1_0x5cff;if(!_0x24360a[_0x20252a(0x1f6)]['useCalendar']||!_0x24360a[_0x20252a(0x1f6)]['calendarInstance'])return;let _0x46adca={};try{const _0x19aa0e=await _0x24360a['getStateAsync'](_0x20252a(0x16a));if(_0x19aa0e&&_0x19aa0e['val'])_0x46adca=JSON[_0x20252a(0x1aa)](_0x19aa0e['val']);}catch(_0x1ea5c5){}const _0x504529=[],_0x4bb26c=Date[_0x20252a(0x166)](),_0x77bf3=0x30*0x3c*0x3c*0x3e8;try{const _0xdbbaf0=await _0x24360a[_0x20252a(0x15d)](_0x24360a[_0x20252a(0x1f6)][_0x20252a(0x204)]+'.data.table');if(!_0xdbbaf0||!_0xdbbaf0['val'])return;const _0x205047=JSON[_0x20252a(0x1aa)](_0xdbbaf0[_0x20252a(0x1a2)]),_0x2df877=_0x24360a[_0x20252a(0x1f6)][_0x20252a(0x1b5)]||[],_0x20a534=_0x24360a[_0x20252a(0x1f6)][_0x20252a(0x1b3)]||[],_0xad3713=new Set();_0x20a534[_0x20252a(0x1de)](_0x2e4c35=>{const _0x15b523=_0x20252a;if(_0x2e4c35['location'])_0xad3713[_0x15b523(0x178)](_0x2e4c35[_0x15b523(0x182)]);});for(const _0x716619 of _0x205047){if(_0x716619[_0x20252a(0x206)]&&_0x2df877[_0x20252a(0x1ae)]>0x0&&!_0x2df877[_0x20252a(0x160)](_0x716619[_0x20252a(0x206)]))continue;const _0x123f7f=_0x716619['_date']||_0x716619['eventStart']||_0x716619[_0x20252a(0x210)];if(!_0x123f7f)continue;const _0x47e540=new Date(_0x123f7f),_0x3d8b7a=_0x47e540[_0x20252a(0x172)]();if(isNaN(_0x3d8b7a))continue;if(_0x3d8b7a<_0x4bb26c)continue;if(_0x3d8b7a>_0x4bb26c+_0x77bf3)continue;const _0x4c7e52=(_0x716619[_0x20252a(0x191)]||_0x716619[_0x20252a(0x1f2)]||'')['toLowerCase']();let _0x5b7c2e=![],_0x5d1fa9=[],_0x5c2775=_0x716619['event']||_0x716619['summary']||_0x20252a(0x1e1);if(_0x4c7e52[_0x20252a(0x160)]('urlaub\x20ende')||_0x4c7e52['includes'](_0x20252a(0x1d8))||_0x4c7e52[_0x20252a(0x160)]('ankunft'))_0x5b7c2e=!![],_0x5d1fa9=Array['from'](_0xad3713);else for(const _0x28b5b6 of _0xad3713){if(_0x4c7e52[_0x20252a(0x160)](_0x28b5b6[_0x20252a(0x1c9)]()))_0x5d1fa9[_0x20252a(0x1db)](_0x28b5b6);}_0x5d1fa9[_0x20252a(0x1ae)]>0x0&&_0x5d1fa9[_0x20252a(0x1de)](_0x5545fb=>{const _0x5de21d=_0x20252a;let _0x340da1=0x3c;if(_0x5b7c2e){let _0x58cb6e=0x0;Object[_0x5de21d(0x159)](_0x46adca)[_0x5de21d(0x1de)](_0x22fe0d=>{if(_0x22fe0d>_0x58cb6e)_0x58cb6e=_0x22fe0d;}),_0x340da1=_0x58cb6e>0x0?_0x58cb6e:0x78;}else _0x340da1=getWarmupRobust(_0x46adca,_0x5545fb);const _0x3fdd78=new Date(_0x3d8b7a-_0x340da1*0xea60);_0x504529[_0x5de21d(0x1db)]({'eventTime':_0x3d8b7a,'triggerTime':_0x3fdd78['getTime'](),'room':_0x5545fb,'minutes':_0x340da1,'reason':_0x5c2775,'isGlobal':_0x5b7c2e});});}}catch(_0x2a3572){}_0x504529[_0x20252a(0x1d9)]((_0x4b1b7d,_0x22e1b8)=>_0x4b1b7d[_0x20252a(0x169)]-_0x22e1b8['triggerTime']);const _0x33c989=_0x504529[_0x20252a(0x17c)](0x0,0x5);await _0x24360a[_0x20252a(0x1b7)](_0x20252a(0x174),{'val':JSON[_0x20252a(0x19e)](_0x33c989),'ack':!![]});}async function monitorEnforcements(_0x209021){const _0x2c880c=a1_0x5cff;try{const _0x227284='analysis.energy.activeEnforcements',_0xc23925=await _0x209021[_0x2c880c(0x1ea)](_0x227284);if(!_0xc23925||!_0xc23925[_0x2c880c(0x1a2)])return;let _0x12f9ca=[];try{_0x12f9ca=JSON['parse'](_0xc23925['val']);}catch(_0x539d47){return;}if(!Array['isArray'](_0x12f9ca)||_0x12f9ca[_0x2c880c(0x1ae)]===0x0)return;const _0x45100e=Date[_0x2c880c(0x166)](),_0x3d4ac1=_0x209021[_0x2c880c(0x1f6)][_0x2c880c(0x1b3)]||[];let _0x2d0190=![];for(let _0x4f0096=_0x12f9ca['length']-0x1;_0x4f0096>=0x0;_0x4f0096--){const _0x33fdfd=_0x12f9ca[_0x4f0096];if(_0x45100e>=_0x33fdfd[_0x2c880c(0x16e)]){_0x209021[_0x2c880c(0x1f7)][_0x2c880c(0x1b9)]('ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20'+_0x33fdfd[_0x2c880c(0x188)]+_0x2c880c(0x161)),_0x12f9ca['splice'](_0x4f0096,0x1),_0x2d0190=!![];continue;}const _0x333dc3=_0x3d4ac1[_0x2c880c(0x175)](_0x3f1787=>normalize(_0x3f1787[_0x2c880c(0x182)])===normalize(_0x33fdfd[_0x2c880c(0x188)])&&(_0x3f1787[_0x2c880c(0x1cd)]===_0x2c880c(0x171)||_0x3f1787[_0x2c880c(0x1cd)]===_0x2c880c(0x1a5)));if(_0x333dc3){const _0x524e7e=await findRelatedId(_0x209021,_0x333dc3['id'],'setpoint');if(_0x524e7e){const _0x2424ae=await _0x209021[_0x2c880c(0x15d)](_0x524e7e);_0x2424ae&&typeof _0x2424ae[_0x2c880c(0x1a2)]==='number'&&(_0x2424ae[_0x2c880c(0x1a2)]<0xf&&(_0x209021[_0x2c880c(0x1f7)][_0x2c880c(0x1b1)](_0x2c880c(0x167)+_0x33fdfd[_0x2c880c(0x188)]+'\x20auf\x20'+_0x2424ae[_0x2c880c(0x1a2)]+_0x2c880c(0x185)+_0x33fdfd[_0x2c880c(0x1ba)]+'Â°C.'),await _0x209021[_0x2c880c(0x1d1)](_0x524e7e,_0x33fdfd['target']),await logAutomationAction(_0x209021,_0x2c880c(0x197)+_0x33fdfd['room']+':\x20'+_0x2424ae['val']+'Â°C\x20->\x20'+_0x33fdfd['target']+'Â°C\x20(Kalender-Schutz)')));}}}_0x2d0190&&await _0x209021[_0x2c880c(0x1b7)](_0x227284,{'val':JSON[_0x2c880c(0x19e)](_0x12f9ca),'ack':!![]});}catch(_0x28cb49){_0x209021[_0x2c880c(0x1f7)][_0x2c880c(0x1f9)](_0x2c880c(0x192)+_0x28cb49[_0x2c880c(0x1d3)]);}}function a1_0x5a80(){const _0x1bf0cb=['valve','\x20ist\x20auf\x20','splice','type','ðŸ“…\x20SMART\x20SCHEDULE\x20[','_date','ankunft','setForeignStateAsync','stellwert','message','urlaub\x20ende','3QxHues','PERFECT','score','rÃ¼ckkehr','sort','Ist','push','normal','search','forEach','_meta','Â°C\x20(Vorlauf:\x20','Unbekannt','sendToPythonWrapper','1329755oPIWCW','hm-rpc','name','temp','analysis.energy.ventilationAlerts','37944tUQJaM','state','getStateAsync','1977308XjYeoR','manual','map','Calendar\x20Check\x20Error:\x20','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','default','getForeignObjectsAsync','summary','425619oaPdiP','cal_','\x20min)','config','log','analysis.automation.confidenceThreshold','error','.1.ACTUAL_TEMPERATURE','switch','Manuelles\x20Mapping','2314744zBKOoW','Â°C\x20<\x20',':\x20Absenkung\x20auf\x20','Â°C).\x20Entferne\x20Status.','role','system.mode','level.temperature','calendarInstance','isArray','_calName','\x20->\x20','84436AMQeJA','filter','Soll','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','active','getForeignObjectAsync','ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27','too_cold','date','toString','7vEKQLt','values','Classic','Â°C\x20(nicht\x20','analysis.energy.rlPenalties','getForeignStateAsync','.4.SET_TEMPERATURE','6554346DyaUxa','includes','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','\x20gefunden!','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','replace','.1.LEVEL','now','ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','approved','triggerTime','analysis.energy.warmupTimes','\x20min).','analysis.energy.activeEnforcements','setpoint','until','abs','rescue_','temperature','getTime','[MPC]\x20','analysis.energy.schedulePreview','find','entries','string','add','.1.TEMPERATURE','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','useCalendar','slice','SET_POINT_TEMPERATURE','valveMapping','light','Â°C).\x20Sparmodus\x20beendet!','unshift','location','sensor','findIndex','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','position','5nxmDba','room','reason','Â°C!\x20(Puffer:\x20','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','(((.+)+)+)+$','.1.SET_POINT_TEMPERATURE','mpc_','common','event','Enforcement\x20Monitor\x20Error:\x20','remove','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','thermostatMapping','pi_heating_demand','[FORCE]\x20','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','.4.VALVE_STATE','\x20wieder\x20auf\x20','\x20erreicht\x20Limit\x20(',')\x20aktiv.\x20Heize\x20auf\x20','exports','stringify','consultButler','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','messwert','val','contact','TRAIN_RL_PENALTY','thermostat','number','ACTUAL','[CAL]\x20','analysis.energy.warmupTargets','parse','split','analysis.automation.actionLog','getHours','length','.data.table','analysis.energy.mpcActiveInterventions','warn','SET','devices','local_temperature','calendarSelection','ðŸ“…\x20[MPC\x20INFO]\x20','setStateAsync','trim','info','target','Â°C\x20(via\x20','soll','\x27\x20(Match:\x20','window','level','190SLwsqE','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','target_temperature','\x20auf\x20','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','level.valve','wert','3333kpascX','off','toLowerCase'];a1_0x5a80=function(){return _0x1bf0cb;};return a1_0x5a80();}async function checkCalendarTriggers(_0x5089f8){const _0x59348f=a1_0x5cff;if(!_0x5089f8['config'][_0x59348f(0x17b)]||!_0x5089f8[_0x59348f(0x1f6)][_0x59348f(0x204)])return;await updateSchedulePreview(_0x5089f8);let _0x1e0e34={},_0x46b966={};try{const _0x27a543=await _0x5089f8['getStateAsync'](_0x59348f(0x16a));if(_0x27a543&&_0x27a543['val'])_0x1e0e34=JSON['parse'](_0x27a543[_0x59348f(0x1a2)]);const _0x31a238=await _0x5089f8[_0x59348f(0x1ea)]('analysis.energy.warmupSources');if(_0x31a238&&_0x31a238[_0x59348f(0x1a2)])_0x46b966=JSON[_0x59348f(0x1aa)](_0x31a238['val']);}catch(_0x13f476){}let _0x164fc9={'default':0x15};try{const _0x3194e7=await _0x5089f8['getStateAsync'](_0x59348f(0x1a9));if(_0x3194e7&&_0x3194e7['val'])_0x164fc9=JSON[_0x59348f(0x1aa)](_0x3194e7[_0x59348f(0x1a2)]);}catch(_0x27c5e1){}let _0x230301=[];try{const _0x9dbf6b=await _0x5089f8[_0x59348f(0x1ea)]('analysis.energy.activeEnforcements');if(_0x9dbf6b&&_0x9dbf6b[_0x59348f(0x1a2)])_0x230301=JSON[_0x59348f(0x1aa)](_0x9dbf6b[_0x59348f(0x1a2)]);}catch(_0x4dd15e){}try{const _0x76768e=await _0x5089f8[_0x59348f(0x15d)](_0x5089f8['config'][_0x59348f(0x204)]+_0x59348f(0x1af));if(!_0x76768e||!_0x76768e['val'])return;const _0x442084=JSON[_0x59348f(0x1aa)](_0x76768e['val']),_0x220deb=Date[_0x59348f(0x166)](),_0x383faf=_0x5089f8[_0x59348f(0x1f6)]['devices']||[],_0x3df469=_0x5089f8[_0x59348f(0x1f6)][_0x59348f(0x1b5)]||[];let _0x3b3a38=![];for(const _0x3f3627 of _0x442084){if(_0x3f3627['_calName']&&_0x3df469['length']>0x0&&!_0x3df469[_0x59348f(0x160)](_0x3f3627[_0x59348f(0x206)]))continue;const _0x1daf06=_0x3f3627[_0x59348f(0x1cf)]||_0x3f3627['eventStart']||_0x3f3627['date'];if(!_0x1daf06)continue;const _0x461e0a=new Date(_0x1daf06);if(isNaN(_0x461e0a[_0x59348f(0x172)]()))continue;const _0x173ddb=(_0x3f3627[_0x59348f(0x191)]||_0x3f3627['summary']||'')[_0x59348f(0x1c9)]();if(_0x173ddb[_0x59348f(0x160)](_0x59348f(0x1d4))||_0x173ddb[_0x59348f(0x160)](_0x59348f(0x1d8))||_0x173ddb[_0x59348f(0x160)](_0x59348f(0x1d0))){let _0x390558=0x0;Object[_0x59348f(0x159)](_0x1e0e34)[_0x59348f(0x1de)](_0x100c58=>{if(_0x100c58>_0x390558)_0x390558=_0x100c58;});if(_0x390558===0x0)_0x390558=0x78;const _0x346e9c=_0x461e0a[_0x59348f(0x172)]()-_0x390558*0xea60;_0x220deb>=_0x346e9c&&_0x220deb<_0x461e0a[_0x59348f(0x172)]()&&(_0x5089f8['currentSystemMode']!==_0x59348f(0x1dc)&&(_0x5089f8[_0x59348f(0x1f7)][_0x59348f(0x1b9)](_0x59348f(0x198)+_0x390558+_0x59348f(0x16b)),await _0x5089f8[_0x59348f(0x1b7)](_0x59348f(0x202),{'val':_0x59348f(0x1dc),'ack':![]})));}for(const _0x432ff7 of _0x383faf){if(_0x432ff7['location']){const _0x4a8aab=_0x432ff7[_0x59348f(0x182)]['toLowerCase'](),_0x4f5c71=(_0x432ff7[_0x59348f(0x1e5)]||'')['toLowerCase']();let _0x47088b=_0x173ddb['includes'](_0x4a8aab);!_0x47088b&&_0x4f5c71[_0x59348f(0x1ae)]>0x3&&_0x173ddb[_0x59348f(0x160)](_0x4f5c71)&&(_0x47088b=!![]);if(_0x47088b){const _0x33784d=getWarmupRobust(_0x1e0e34,_0x432ff7[_0x59348f(0x182)]),_0x18e75b=_0x46b966[_0x432ff7['location']]||_0x59348f(0x15a),_0x4a17c7=_0x461e0a['getTime']()-_0x33784d*0xea60;if(_0x220deb>=_0x4a17c7&&_0x220deb<_0x461e0a[_0x59348f(0x172)]()){const _0xcbf335=lastActions[_0x59348f(0x1f4)+_0x432ff7[_0x59348f(0x182)]];if(_0xcbf335&&_0x220deb-_0xcbf335<CAL_COOLDOWN_MS)continue;const _0x5972bc=await findRelatedId(_0x5089f8,_0x432ff7['id'],_0x59348f(0x16d));if(_0x5972bc){let _0x351565=_0x164fc9[_0x432ff7['location']];if(_0x351565===undefined)_0x351565=_0x164fc9[_0x59348f(0x1f0)];if(_0x351565===undefined)_0x351565=0x15;const _0x32f370=await _0x5089f8[_0x59348f(0x15d)](_0x5972bc);if(_0x32f370&&typeof _0x32f370[_0x59348f(0x1a2)]===_0x59348f(0x1a6)&&_0x32f370[_0x59348f(0x1a2)]<_0x351565-0.5){_0x5089f8['log']['info'](_0x59348f(0x1ce)+_0x18e75b+']:\x20Raum-Trigger\x20\x27'+_0x432ff7['location']+_0x59348f(0x1bd)+_0x173ddb+_0x59348f(0x19c)+_0x351565+_0x59348f(0x1e0)+_0x33784d+_0x59348f(0x16b)),await _0x5089f8[_0x59348f(0x1d1)](_0x5972bc,_0x351565),await logAutomationAction(_0x5089f8,_0x59348f(0x1a8)+_0x432ff7[_0x59348f(0x182)]+_0x59348f(0x207)+_0x351565+_0x59348f(0x1bb)+_0x18e75b+')'),lastActions['cal_'+_0x432ff7[_0x59348f(0x182)]]=_0x220deb;const _0x259884=_0x230301[_0x59348f(0x184)](_0x1e9bd6=>_0x1e9bd6[_0x59348f(0x188)]===_0x432ff7[_0x59348f(0x182)]);if(_0x259884!==-0x1)_0x230301[_0x59348f(0x1cc)](_0x259884,0x1);_0x230301[_0x59348f(0x1db)]({'room':_0x432ff7['location'],'target':_0x351565,'until':_0x461e0a[_0x59348f(0x172)]()}),_0x3b3a38=!![];}}}}}}}_0x3b3a38&&await _0x5089f8[_0x59348f(0x1b7)](_0x59348f(0x16c),{'val':JSON[_0x59348f(0x19e)](_0x230301),'ack':!![]});}catch(_0x44d60f){_0x5089f8[_0x59348f(0x1f7)][_0x59348f(0x1b1)](_0x59348f(0x1ee)+_0x44d60f[_0x59348f(0x1d3)]);}}async function manageMpcIntervention(_0x5bfe21,_0x3433ea,_0x49758e){const _0x5f5423=a1_0x5cff;try{const _0x17bc3e=_0x5f5423(0x1b0),_0x2be02c=await _0x5bfe21[_0x5f5423(0x1ea)](_0x17bc3e);let _0x2cfdc1=[];if(_0x2be02c&&_0x2be02c[_0x5f5423(0x1a2)])try{_0x2cfdc1=JSON[_0x5f5423(0x1aa)](_0x2be02c['val']);}catch(_0x4c336c){}const _0x592bb5=_0x2cfdc1['indexOf'](_0x3433ea);if(_0x49758e===_0x5f5423(0x178))_0x592bb5===-0x1&&(_0x2cfdc1[_0x5f5423(0x1db)](_0x3433ea),await _0x5bfe21[_0x5f5423(0x1b7)](_0x17bc3e,{'val':JSON['stringify'](_0x2cfdc1),'ack':!![]}));else _0x49758e===_0x5f5423(0x193)&&(_0x592bb5!==-0x1&&(_0x2cfdc1[_0x5f5423(0x1cc)](_0x592bb5,0x1),await _0x5bfe21[_0x5f5423(0x1b7)](_0x17bc3e,{'val':JSON[_0x5f5423(0x19e)](_0x2cfdc1),'ack':!![]})));}catch(_0x4c0ac9){}}async function cleanupGhostInterventions(_0x4e7fab){const _0x18f53a=a1_0x5cff;try{const _0x5f16cf=_0x18f53a(0x1b0),_0x37620d=await _0x4e7fab[_0x18f53a(0x1ea)](_0x5f16cf);if(!_0x37620d||!_0x37620d[_0x18f53a(0x1a2)])return;const _0x181244=JSON[_0x18f53a(0x1aa)](_0x37620d['val']);if(!Array[_0x18f53a(0x205)](_0x181244)||_0x181244['length']===0x0)return;let _0x2eab32={'default':0x15};try{const _0x3c5c39=await _0x4e7fab['getStateAsync'](_0x18f53a(0x1a9));if(_0x3c5c39&&_0x3c5c39[_0x18f53a(0x1a2)])_0x2eab32=JSON[_0x18f53a(0x1aa)](_0x3c5c39[_0x18f53a(0x1a2)]);}catch(_0xa7e29){}let _0x3a0258=[];try{const _0xd43148=await _0x4e7fab[_0x18f53a(0x1ea)](_0x18f53a(0x1e7));if(_0xd43148&&_0xd43148[_0x18f53a(0x1a2)])_0x3a0258=JSON[_0x18f53a(0x1aa)](_0xd43148['val']);}catch(_0x54202e){}let _0x22b977={},_0x2d6d94=![];try{const _0x4c9920=await _0x4e7fab[_0x18f53a(0x1ea)]('analysis.energy.rlPenalties');if(_0x4c9920&&_0x4c9920[_0x18f53a(0x1a2)])_0x22b977=JSON[_0x18f53a(0x1aa)](_0x4c9920['val']);}catch(_0x31eba3){}if(_0x22b977['_meta']){const _0x306b18=Date[_0x18f53a(0x166)]();for(const [_0x23e243,_0x262a5c]of Object['entries'](_0x22b977[_0x18f53a(0x1df)])){_0x306b18-_0x262a5c>PENALTY_TTL&&(delete _0x22b977[_0x23e243],delete _0x22b977[_0x18f53a(0x1df)][_0x23e243],_0x2d6d94=!![],_0x4e7fab[_0x18f53a(0x1f7)][_0x18f53a(0x1b9)](_0x18f53a(0x20e)+_0x23e243+_0x18f53a(0x1ef)));}}const _0x166e09=_0x4e7fab[_0x18f53a(0x1f6)][_0x18f53a(0x1b3)]||[];let _0xbaac53=![];for(let _0xd71023=_0x181244[_0x18f53a(0x1ae)]-0x1;_0xd71023>=0x0;_0xd71023--){const _0x543f43=_0x181244[_0xd71023],_0x35d17f=_0x166e09[_0x18f53a(0x175)](_0x5d4a86=>normalize(_0x5d4a86[_0x18f53a(0x182)])===normalize(_0x543f43)&&(_0x5d4a86[_0x18f53a(0x1cd)]==='temperature'||_0x5d4a86[_0x18f53a(0x1cd)]==='thermostat'));if(!_0x35d17f){_0x4e7fab[_0x18f53a(0x1f7)][_0x18f53a(0x1b1)](_0x18f53a(0x17a)+_0x543f43+_0x18f53a(0x1c4)),_0x181244['splice'](_0xd71023,0x1),_0xbaac53=!![];continue;}if(_0x35d17f){const _0x1672f9=await findRelatedId(_0x4e7fab,_0x35d17f['id'],'setpoint'),_0x53831a=await _0x4e7fab[_0x18f53a(0x15d)](_0x35d17f['id']);if(_0x1672f9){const _0x57327b=await _0x4e7fab[_0x18f53a(0x15d)](_0x1672f9);if(_0x57327b&&typeof _0x57327b[_0x18f53a(0x1a2)]===_0x18f53a(0x1a6)){let _0x16b8a7=![],_0xbbacaf='';Math[_0x18f53a(0x16f)](_0x57327b[_0x18f53a(0x1a2)]-ECO_TEMP)>0.5&&(_0x16b8a7=!![],_0xbbacaf=_0x18f53a(0x1ec));if(!_0x16b8a7&&_0x53831a&&typeof _0x53831a[_0x18f53a(0x1a2)]===_0x18f53a(0x1a6)){const _0xdbe321=_0x2eab32[_0x543f43]||_0x2eab32[_0x18f53a(0x1f0)]||0x15;_0x53831a[_0x18f53a(0x1a2)]<_0xdbe321+0.2&&(_0x16b8a7=!![],_0xbbacaf='too_cold');}if(_0x16b8a7){if(_0xbbacaf===_0x18f53a(0x1ec)){_0x4e7fab[_0x18f53a(0x1f7)][_0x18f53a(0x1b9)]('ðŸ§¹\x20[MPC\x20CLEANUP]\x20'+_0x543f43+_0x18f53a(0x1cb)+_0x57327b[_0x18f53a(0x1a2)]+_0x18f53a(0x15b)+ECO_TEMP+_0x18f53a(0x200));const _0x57d900=lastActions[_0x18f53a(0x1f4)+_0x543f43],_0x59eb54=_0x57d900&&Date['now']()-_0x57d900<0x2*0x3c*0x3e8;if(!_0x59eb54&&_0x57327b['val']>ECO_TEMP+0.5){_0x4e7fab[_0x18f53a(0x1e2)]&&(_0x4e7fab['log']['info'](_0x18f53a(0x163)+_0x543f43+'\x20wurde\x20manuell\x20erhÃ¶ht.'),_0x4e7fab[_0x18f53a(0x1e2)](_0x18f53a(0x1a4),{'room':_0x543f43}));const _0x4e9460=_0x543f43+'_'+new Date()[_0x18f53a(0x1ad)]();if(!_0x22b977[_0x4e9460]){_0x22b977[_0x4e9460]=0x1;if(!_0x22b977[_0x18f53a(0x1df)])_0x22b977[_0x18f53a(0x1df)]={};_0x22b977[_0x18f53a(0x1df)][_0x4e9460]=Date[_0x18f53a(0x166)](),_0x2d6d94=!![];}}else _0x59eb54&&_0x4e7fab['log'][_0x18f53a(0x1b9)](_0x18f53a(0x1b6)+_0x543f43+_0x18f53a(0x18b));}else{if(_0xbbacaf===_0x18f53a(0x20f)){let _0x1a00f9=![];if(_0x3a0258['find'](_0x56cabd=>_0x56cabd[_0x18f53a(0x188)]===_0x543f43))_0x1a00f9=!![];const _0x1fef13=_0x166e09[_0x18f53a(0x209)](_0x137f8a=>normalize(_0x137f8a['location'])===normalize(_0x543f43)&&(_0x137f8a['type']===_0x18f53a(0x1be)||_0x137f8a[_0x18f53a(0x1cd)]==='sensor'||_0x137f8a[_0x18f53a(0x1cd)]===_0x18f53a(0x1a3)));for(const _0x8979c0 of _0x1fef13){try{const _0x31adfa=await _0x4e7fab['getForeignStateAsync'](_0x8979c0['id']);if(_0x31adfa&&(_0x31adfa[_0x18f53a(0x1a2)]===!![]||_0x31adfa['val']===0x1||String(_0x31adfa['val'])['toLowerCase']()==='open'))_0x1a00f9=!![];}catch(_0x3403b8){}}if(_0x1a00f9)_0x4e7fab[_0x18f53a(0x1f7)][_0x18f53a(0x1b9)](_0x18f53a(0x194)+_0x543f43+'\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.');else{const _0x2d6f53=_0x2eab32[_0x543f43]||_0x2eab32[_0x18f53a(0x1f0)]||0x15;_0x4e7fab[_0x18f53a(0x1f7)]['info'](_0x18f53a(0x18c)+_0x543f43+_0x18f53a(0x19b)+_0x53831a[_0x18f53a(0x1a2)]+_0x18f53a(0x1fe)+(_0x2d6f53+0.2)+_0x18f53a(0x180)),await _0x4e7fab['setForeignStateAsync'](_0x1672f9,_0x2d6f53),await logAutomationAction(_0x4e7fab,'[WATCHDOG]\x20'+_0x543f43+':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20'+_0x2d6f53+'Â°C'),lastActions['rescue_'+_0x543f43]=Date[_0x18f53a(0x166)]();}}}_0x181244[_0x18f53a(0x1cc)](_0xd71023,0x1),_0xbaac53=!![];}}}}}_0xbaac53&&await _0x4e7fab[_0x18f53a(0x1b7)](_0x5f16cf,{'val':JSON[_0x18f53a(0x19e)](_0x181244),'ack':!![]}),_0x2d6d94&&await _0x4e7fab[_0x18f53a(0x1b7)](_0x18f53a(0x15c),{'val':JSON[_0x18f53a(0x19e)](_0x22b977),'ack':!![]});}catch(_0xbb8807){}}async function applyEnergySavings(_0x321789,_0x2bdee4){const _0x63f581=a1_0x5cff;await cleanupGhostInterventions(_0x321789);if(!_0x2bdee4||_0x2bdee4[_0x63f581(0x1ae)]===0x0)return;const _0x10e870=_0x321789[_0x63f581(0x1f6)][_0x63f581(0x1b3)]||[],_0x4f9560=Date[_0x63f581(0x166)]();for(const _0x414d1f of _0x2bdee4){const _0x5354c2=_0x414d1f[_0x63f581(0x188)],_0x41c230=_0x414d1f['minutes_safe'],_0x273390=_0x414d1f[_0x63f581(0x1ba)]||0x15;if(lastActions[_0x63f581(0x170)+_0x5354c2]&&_0x4f9560-lastActions['rescue_'+_0x5354c2]<RESCUE_LOCK_MS)continue;const _0x31d028=_0x10e870[_0x63f581(0x175)](_0x91c3c9=>normalize(_0x91c3c9[_0x63f581(0x182)])===normalize(_0x5354c2)&&(_0x91c3c9['type']==='temperature'||_0x91c3c9[_0x63f581(0x1cd)]===_0x63f581(0x1a5)));if(!_0x31d028)continue;const _0x4c253d=await findRelatedId(_0x321789,_0x31d028['id'],_0x63f581(0x16d));if(_0x4c253d){if(lastActions[_0x63f581(0x18f)+_0x5354c2]&&_0x4f9560-lastActions[_0x63f581(0x18f)+_0x5354c2]<0x1e*0x3c*0x3e8)continue;const _0x417be8=await _0x321789[_0x63f581(0x15d)](_0x4c253d);if(_0x417be8&&typeof _0x417be8[_0x63f581(0x1a2)]===_0x63f581(0x1a6)){const _0x381268=_0x417be8[_0x63f581(0x1a2)];_0x381268!==ECO_TEMP&&await manageMpcIntervention(_0x321789,_0x5354c2,_0x63f581(0x193));if(_0x41c230>0x1e)_0x381268>ECO_TEMP+0.5&&(_0x321789[_0x63f581(0x1f7)][_0x63f581(0x1b9)](_0x63f581(0x1c1)+_0x5354c2+_0x63f581(0x1c3)+ECO_TEMP+_0x63f581(0x18a)+_0x41c230+_0x63f581(0x1f5)),await _0x321789[_0x63f581(0x1d1)](_0x4c253d,ECO_TEMP),await manageMpcIntervention(_0x321789,_0x5354c2,'add'),lastActions['mpc_'+_0x5354c2]=_0x4f9560,await logAutomationAction(_0x321789,_0x63f581(0x173)+_0x5354c2+_0x63f581(0x1ff)+ECO_TEMP+'Â°C'));else _0x41c230<=0xf&&(_0x381268<_0x273390&&(_0x321789[_0x63f581(0x1f7)][_0x63f581(0x1b9)](_0x63f581(0x1a0)+_0x5354c2+_0x63f581(0x19a)+_0x273390+'Â°C!\x20(Puffer\x20leer).'),await _0x321789[_0x63f581(0x1d1)](_0x4c253d,_0x273390),await manageMpcIntervention(_0x321789,_0x5354c2,'remove'),lastActions['mpc_'+_0x5354c2]=_0x4f9560,await logAutomationAction(_0x321789,_0x63f581(0x173)+_0x5354c2+':\x20Aufheizen\x20auf\x20'+_0x273390+'Â°C')));}}else _0x321789[_0x63f581(0x1f7)]['warn'](_0x63f581(0x20b)+_0x5354c2+_0x63f581(0x162));}}module[a1_0x29d7aa(0x19d)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};