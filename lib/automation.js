const a1_0x31c6a8=a1_0x2aa5;function a1_0x3e66(){const _0x12c84e=['rescue_','¬∞C\x20->\x20','.1.LEVEL','ACTUAL','27eDwbUn','thermostat','temp','level','number','üìÖ\x20[MPC\x20INFO]\x20','\x20->\x20','üìÖ\x20SMART\x20SCHEDULE\x20[','Calendar\x20Check\x20Error:\x20','local_temperature','warn','apply','localeCompare','manual','.1.TEMPERATURE','consultButler','.data.table','role','\x20gefunden!','splice','analysis.energy.warmupTimes','ACTUAL_TEMPERATURE','thermostatMapping','actual','name','Soll','stringify','replace','.1.SET_POINT_TEMPERATURE','pi_heating_demand','sensor','now','length','3624540KcIbMK','log','¬∞C\x20<\x20','\x20min).','parse','stellwert','analysis.energy.ventilationAlerts','minutes_safe','unit','analysis.automation.actionLog','triggerTime','string','üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20','currentSystemMode','_calName','\x20min)','Fehlt','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','Pr√§diktion:\x20','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','analysis.automation.mode','r√ºckkehr','level.valve','values','split','valveMapping','analysis.energy.mpcActiveInterventions','entries','value.valve','2490885dEsJOc','find','thermostat.setpoint','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.',':\x20Aufheizen\x20auf\x20','wert','date','dimmer','898268ilbpYK','\x20erreicht\x20Limit\x20(','cal_','calendarInstance','getForeignObjectAsync','\x20->\x20Schalte\x20','open','analysis.energy.rlPenalties','join','toUpperCase','sort','(((.+)+)+)+$','Auto-Erkennung','analysis.energy.warmupSources','isArray','Unknown',')\x20aktiv.\x20Heize\x20auf\x20','system.mode','\x20auf\x20','too_cold','includes','event','üßπ\x20[MPC\x20CLEANUP]\x20','trim','\x27\x20(Match:\x20','toLowerCase','position','urlaub\x20ende','[FORCE]\x20','\x20wurde\x20manuell\x20erh√∂ht.','Unbekannt','_date','setpoint','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','useCalendar','9kQvuIL','off','setStateAsync','\x20ist\x20auf\x20','info','getForeignObjectsAsync','score','analysis.automation.confidenceThreshold','.4.SET_TEMPERATURE','Ist','ist','1134LkTlVW','active','remove','.1.ACTUAL_TEMPERATURE','analysis.energy.activeEnforcements','PERFECT','summary','üö®\x20[MPC\x20WATCHDOG]\x20','level.temperature','add','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','180812CjiiLQ','[WATCHDOG]\x20','switch','getStateAsync','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','540318UXAzMY','constructor','_meta','Classic','type','mpc_','window','filter','room','306496ahRxeH','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','TRAIN_RL_PENALTY',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','getTime','eventStart','unshift','target_temperature','exports','ankunft','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','forEach','location','Manuelles\x20Mapping','valve_position','val','default','target','¬∞C\x20(nicht\x20','occupied_heating_setpoint','[MPC]\x20','¬∞C\x20(via\x20','setForeignStateAsync','set','contact','¬∞C.','devices','analysis.automation.lastAction','703oZrZBn','getForeignStateAsync','common','until','calendarSelection','valve','Nicht\x20gefunden','analysis.energy.schedulePreview','sendToPythonWrapper','config','¬∞C).\x20Sparmodus\x20beendet!','temperature','approved','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20',']:\x20Raum-Trigger\x20\x27','¬∞C!\x20(Puffer\x20leer).','current_heating_setpoint','from','push','analysis.energy.warmupTargets','indexOf','findIndex','messwert','search'];a1_0x3e66=function(){return _0x12c84e;};return a1_0x3e66();}(function(_0x3b9fca,_0x42ce6e){const _0x28e0fc=a1_0x2aa5,_0x57759e=_0x3b9fca();while(!![]){try{const _0x5bb2b5=-parseInt(_0x28e0fc(0x17c))/0x1*(-parseInt(_0x28e0fc(0x20c))/0x2)+-parseInt(_0x28e0fc(0x198))/0x3*(parseInt(_0x28e0fc(0x217))/0x4)+parseInt(_0x28e0fc(0x1d6))/0x5+parseInt(_0x28e0fc(0x21c))/0x6+parseInt(_0x28e0fc(0x1de))/0x7+-parseInt(_0x28e0fc(0x225))/0x8*(-parseInt(_0x28e0fc(0x201))/0x9)+-parseInt(_0x28e0fc(0x1b9))/0xa;if(_0x5bb2b5===_0x42ce6e)break;else _0x57759e['push'](_0x57759e['shift']());}catch(_0x3de89b){_0x57759e['push'](_0x57759e['shift']());}}}(a1_0x3e66,0x5dcba));const a1_0x2aec25=(function(){let _0x559373=!![];return function(_0x4708b9,_0x520dae){const _0x49e6bd=_0x559373?function(){const _0x2cccab=a1_0x2aa5;if(_0x520dae){const _0x41b934=_0x520dae[_0x2cccab(0x1a3)](_0x4708b9,arguments);return _0x520dae=null,_0x41b934;}}:function(){};return _0x559373=![],_0x49e6bd;};}()),a1_0xfec91e=a1_0x2aec25(this,function(){const _0xacbef5=a1_0x2aa5;return a1_0xfec91e['toString']()['search'](_0xacbef5(0x1e9))['toString']()[_0xacbef5(0x21d)](a1_0xfec91e)[_0xacbef5(0x193)](_0xacbef5(0x1e9));});a1_0xfec91e();'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x581b9b){const _0x447a5c=a1_0x2aa5;if(!_0x581b9b)return'';return _0x581b9b[_0x447a5c(0x1f7)]()[_0x447a5c(0x1b3)](/\s+/g,'')[_0x447a5c(0x1f5)]();}function getWarmupRobust(_0x1ca67d,_0x1dfc38){const _0x4d6961=a1_0x2aa5;if(!_0x1ca67d||!_0x1dfc38)return 0x3c;if(_0x1ca67d[_0x1dfc38]!==undefined)return _0x1ca67d[_0x1dfc38];const _0x3ab410=_0x1dfc38[_0x4d6961(0x1f7)]()[_0x4d6961(0x1b3)](/√§/g,'ae')[_0x4d6961(0x1b3)](/√∂/g,'oe')[_0x4d6961(0x1b3)](/√º/g,'ue')[_0x4d6961(0x1b3)](/√ü/g,'ss')[_0x4d6961(0x1b3)](/\s+/g,'_')[_0x4d6961(0x1b3)](/[^a-z0-9_]/g,'');if(_0x1ca67d[_0x3ab410]!==undefined)return _0x1ca67d[_0x3ab410];return 0x3c;}async function logAutomationAction(_0x263b58,_0x35b92d){const _0x486533=a1_0x2aa5;await _0x263b58[_0x486533(0x203)](_0x486533(0x240),{'val':_0x35b92d,'ack':!![]});try{const _0x50b654=_0x486533(0x1c2),_0x372331=await _0x263b58[_0x486533(0x21a)](_0x50b654);let _0xfcaf81=[];if(_0x372331&&_0x372331[_0x486533(0x234)])try{_0xfcaf81=JSON[_0x486533(0x1bd)](_0x372331[_0x486533(0x234)]);}catch(_0x258279){}_0xfcaf81[_0x486533(0x22b)]({'ts':Date['now'](),'msg':_0x35b92d});if(_0xfcaf81[_0x486533(0x1b8)]>0x32)_0xfcaf81=_0xfcaf81['slice'](0x0,0x32);await _0x263b58[_0x486533(0x203)](_0x50b654,{'val':JSON[_0x486533(0x1b2)](_0xfcaf81),'ack':!![]});}catch(_0x48112c){}}async function handlePrediction(_0x4fee63,_0x4a56e0,_0x42d7ab){const _0x13686a=a1_0x2aa5;if(!_0x4a56e0||_0x4a56e0===_0x13686a(0x1ed))return;let _0x1365a6=_0x13686a(0x202),_0x280f18=0.6;try{const _0xb39f5d=await _0x4fee63[_0x13686a(0x21a)](_0x13686a(0x1cd));if(_0xb39f5d&&_0xb39f5d[_0x13686a(0x234)])_0x1365a6=_0xb39f5d[_0x13686a(0x234)];const _0x26c059=await _0x4fee63['getStateAsync'](_0x13686a(0x208));if(_0x26c059&&_0x26c059[_0x13686a(0x234)])_0x280f18=_0x26c059[_0x13686a(0x234)];}catch(_0x4ffa54){}if(_0x1365a6===_0x13686a(0x202)||_0x42d7ab<_0x280f18)return;const _0x58f8e7=Date[_0x13686a(0x1b7)]();if(lastActions[_0x4a56e0]&&_0x58f8e7-lastActions[_0x4a56e0]<COOLDOWN_MS)return;const _0x290310=_0x4fee63[_0x13686a(0x185)][_0x13686a(0x23f)]||[],_0x1e0c06=normalize(_0x4a56e0),_0x2653a9=_0x290310['find'](_0x3ec71f=>normalize(_0x3ec71f[_0x13686a(0x231)])===_0x1e0c06&&(_0x3ec71f[_0x13686a(0x220)]==='light'||_0x3ec71f['type']===_0x13686a(0x1dd)||_0x3ec71f[_0x13686a(0x220)]===_0x13686a(0x219)));if(!_0x2653a9)return;const _0xe67e02=await aiAgent[_0x13686a(0x1a7)](_0x4fee63,_0x4a56e0,_0x2653a9[_0x13686a(0x1b0)],_0x42d7ab);if(!_0xe67e02[_0x13686a(0x188)])return;const _0x590a54=_0x13686a(0x1cb)+_0x4a56e0+_0x13686a(0x1e3)+_0x2653a9['name']+'\x20('+_0xe67e02['reason']+')';await logAutomationAction(_0x4fee63,'['+_0x1365a6[_0x13686a(0x1e7)]()+']\x20'+_0x590a54);if(_0x1365a6===_0x13686a(0x20d)){const _0x971ea6=await _0x4fee63[_0x13686a(0x17d)](_0x2653a9['id']);(!_0x971ea6||!_0x971ea6['val']&&_0x971ea6[_0x13686a(0x234)]!==!![])&&await _0x4fee63[_0x13686a(0x23b)](_0x2653a9['id'],!![]),lastActions[_0x4a56e0]=_0x58f8e7;}}function a1_0x2aa5(_0x4b16de,_0x3c34d1){const _0x10452d=a1_0x3e66();return a1_0x2aa5=function(_0xfec91e,_0x2aec25){_0xfec91e=_0xfec91e-0x17c;let _0x3e66cb=_0x10452d[_0xfec91e];return _0x3e66cb;},a1_0x2aa5(_0x4b16de,_0x3c34d1);}async function findRelatedId(_0x29c545,_0x51578a,_0x123087=a1_0x31c6a8(0x1fe)){const _0x485be5=a1_0x31c6a8;if(_0x123087==='setpoint'&&_0x29c545[_0x485be5(0x185)]['thermostatMapping']){let _0x26db0c=_0x29c545[_0x485be5(0x185)]['thermostatMapping'];if(typeof _0x26db0c==='string')try{_0x26db0c=JSON[_0x485be5(0x1bd)](_0x26db0c);}catch(_0x452037){}if(_0x26db0c&&_0x26db0c[_0x51578a])return _0x26db0c[_0x51578a];}if(_0x123087==='valve'&&_0x29c545[_0x485be5(0x185)][_0x485be5(0x1d2)]){let _0x5e3c99=_0x29c545[_0x485be5(0x185)]['valveMapping'];if(typeof _0x5e3c99===_0x485be5(0x1c4))try{_0x5e3c99=JSON[_0x485be5(0x1bd)](_0x5e3c99);}catch(_0x15566c){}if(_0x5e3c99&&_0x5e3c99[_0x51578a])return _0x5e3c99[_0x51578a];}let _0x15ef9f=[];if(_0x123087==='setpoint')_0x15ef9f=[{'s':_0x485be5(0x20f),'t':_0x485be5(0x1b4)},{'s':_0x485be5(0x1a6),'t':_0x485be5(0x1b4)},{'s':_0x485be5(0x1a6),'t':_0x485be5(0x209)},{'s':_0x485be5(0x1ad),'t':'SET_POINT_TEMPERATURE'},{'s':'local_temperature','t':_0x485be5(0x238)},{'s':'local_temperature','t':_0x485be5(0x18c)},{'s':'temperature','t':_0x485be5(0x22c)},{'s':_0x485be5(0x197),'t':'SET'},{'s':_0x485be5(0x20a),'t':_0x485be5(0x1b1)},{'s':_0x485be5(0x187),'t':_0x485be5(0x1fe)}];else _0x123087===_0x485be5(0x181)&&(_0x15ef9f=[{'s':_0x485be5(0x20f),'t':'.1.LEVEL'},{'s':_0x485be5(0x1a6),'t':_0x485be5(0x196)},{'s':_0x485be5(0x1a6),'t':'.4.VALVE_STATE'},{'s':_0x485be5(0x1a1),'t':_0x485be5(0x1b5)},{'s':_0x485be5(0x187),'t':_0x485be5(0x233)},{'s':'temperature','t':'level'}]);for(const _0x8941ee of _0x15ef9f){if(_0x51578a[_0x485be5(0x1f2)](_0x8941ee['s'])){const _0x54c31f=_0x51578a[_0x485be5(0x1b3)](_0x8941ee['s'],_0x8941ee['t']),_0x385429=await _0x29c545[_0x485be5(0x1e2)](_0x54c31f);if(_0x385429)return _0x54c31f;}}try{const _0x4c9a0c=_0x51578a[_0x485be5(0x1d1)]('.');if(_0x4c9a0c[_0x485be5(0x1b8)]>0x2){const _0x51e445=_0x4c9a0c['slice'](0x0,-0x1)[_0x485be5(0x1e6)]('.'),_0x2e7551=await _0x29c545[_0x485be5(0x206)](_0x51e445+'.*'),_0x281e44=[],_0x330060=_0x51578a[_0x485be5(0x1d1)](/[._]+/)[_0x485be5(0x223)](_0x48c80f=>!['openknx','0','hm-rpc',_0x485be5(0x20b),_0x485be5(0x1db),_0x485be5(0x187),_0x485be5(0x1af),_0x485be5(0x1b6),_0x485be5(0x192),'state'][_0x485be5(0x1f2)](_0x48c80f[_0x485be5(0x1f7)]()));for(const [_0x36d8be,_0x554e71]of Object[_0x485be5(0x1d4)](_0x2e7551)){if(_0x36d8be===_0x51578a)continue;if(_0x554e71&&_0x554e71[_0x485be5(0x17e)]){const _0x5cb116=_0x36d8be[_0x485be5(0x1f7)](),_0x26d793=(_0x554e71[_0x485be5(0x17e)][_0x485be5(0x1a9)]||'')[_0x485be5(0x1f7)](),_0x291ec7=(_0x554e71[_0x485be5(0x17e)][_0x485be5(0x1c1)]||'')[_0x485be5(0x1f7)]();let _0x3073fc=![];if(_0x123087===_0x485be5(0x1fe)&&_0x554e71['common']['write']===!![])_0x3073fc=_0x5cb116['includes'](_0x485be5(0x23c))||_0x5cb116[_0x485be5(0x1f2)]('soll')||_0x5cb116[_0x485be5(0x1f2)](_0x485be5(0x236))||_0x26d793['includes'](_0x485be5(0x214))||_0x26d793[_0x485be5(0x1f2)](_0x485be5(0x1d8));else _0x123087===_0x485be5(0x181)&&(_0x3073fc=_0x5cb116[_0x485be5(0x1f2)](_0x485be5(0x19b))||_0x5cb116[_0x485be5(0x1f2)](_0x485be5(0x181))||_0x5cb116['includes'](_0x485be5(0x1be))||_0x5cb116[_0x485be5(0x1f2)](_0x485be5(0x1f8))||_0x26d793[_0x485be5(0x1f2)](_0x485be5(0x1cf))||_0x26d793[_0x485be5(0x1f2)](_0x485be5(0x1d5))||_0x291ec7['includes']('%'));if(_0x3073fc){const _0x2e0e80=_0x36d8be[_0x485be5(0x1d1)](/[._]+/)['map'](_0x39b9d1=>_0x39b9d1[_0x485be5(0x1f7)]());let _0x4ce74b=0x0;_0x330060[_0x485be5(0x230)](_0x5dfe7d=>{const _0x133c70=_0x485be5;if(_0x2e0e80[_0x133c70(0x1f2)](_0x5dfe7d[_0x133c70(0x1f7)]()))_0x4ce74b++;}),_0x281e44[_0x485be5(0x18e)]({'id':_0x36d8be,'score':_0x4ce74b});}}}if(_0x281e44[_0x485be5(0x1b8)]>0x0){_0x281e44[_0x485be5(0x1e8)]((_0x4c6d1a,_0x149388)=>_0x149388['score']-_0x4c6d1a[_0x485be5(0x207)]);if(_0x281e44[0x0][_0x485be5(0x207)]>0x0)return _0x281e44[0x0]['id'];}}}catch(_0x4b5ef4){}return null;}async function scanThermostats(_0x2c363c){const _0x51dc3a=a1_0x31c6a8,_0xfc1c28=_0x2c363c[_0x51dc3a(0x185)]['devices']||[],_0x3771d2=[],_0x2aa4b8=_0xfc1c28['filter'](_0x4590bd=>_0x4590bd['id']&&_0x4590bd['id'][_0x51dc3a(0x1f2)](_0x51dc3a(0x187))||_0x4590bd[_0x51dc3a(0x220)]&&['temperature',_0x51dc3a(0x199),_0x51dc3a(0x1b6)][_0x51dc3a(0x1f2)](_0x4590bd['type'])||_0x4590bd[_0x51dc3a(0x1b0)]&&_0x4590bd[_0x51dc3a(0x1b0)][_0x51dc3a(0x1f7)]()[_0x51dc3a(0x1f2)](_0x51dc3a(0x19a)));for(const _0x9525e3 of _0x2aa4b8){const _0x19a65b=await findRelatedId(_0x2c363c,_0x9525e3['id'],_0x51dc3a(0x1fe)),_0x2e2ea6=await findRelatedId(_0x2c363c,_0x9525e3['id'],_0x51dc3a(0x181));let _0x31ae05=_0x51dc3a(0x182),_0x6d330c=![],_0x5cbbe9=_0x2c363c[_0x51dc3a(0x185)][_0x51dc3a(0x1ae)]||{};if(typeof _0x5cbbe9===_0x51dc3a(0x1c4))try{_0x5cbbe9=JSON[_0x51dc3a(0x1bd)](_0x5cbbe9);}catch(_0x3869c4){}let _0x340882=_0x2c363c[_0x51dc3a(0x185)][_0x51dc3a(0x1d2)]||{};if(typeof _0x340882===_0x51dc3a(0x1c4))try{_0x340882=JSON[_0x51dc3a(0x1bd)](_0x340882);}catch(_0x5bd526){}if(_0x5cbbe9[_0x9525e3['id']]&&_0x5cbbe9[_0x9525e3['id']]===_0x19a65b||_0x340882[_0x9525e3['id']]&&_0x340882[_0x9525e3['id']]===_0x2e2ea6)_0x31ae05=_0x51dc3a(0x232),_0x6d330c=!![];else(_0x19a65b||_0x2e2ea6)&&(_0x31ae05=_0x51dc3a(0x1ea));_0x3771d2[_0x51dc3a(0x18e)]({'room':_0x9525e3['location']||_0x51dc3a(0x1fc),'sensorId':_0x9525e3['id'],'setpointId':_0x19a65b||'-','valveId':_0x2e2ea6||'-','source':_0x31ae05,'isManual':_0x6d330c,'status':_0x19a65b&&_0x2e2ea6?_0x51dc3a(0x211):_0x19a65b?'OK':_0x51dc3a(0x1c9)});}return _0x3771d2['sort']((_0x5682dd,_0xc13850)=>_0x5682dd[_0x51dc3a(0x224)][_0x51dc3a(0x1a4)](_0xc13850[_0x51dc3a(0x224)]));}async function updateSchedulePreview(_0x3f29c2){const _0xe6f6f4=a1_0x31c6a8;if(!_0x3f29c2[_0xe6f6f4(0x185)][_0xe6f6f4(0x200)]||!_0x3f29c2[_0xe6f6f4(0x185)]['calendarInstance'])return;let _0x363916={};try{const _0x4b99ba=await _0x3f29c2['getStateAsync'](_0xe6f6f4(0x1ac));if(_0x4b99ba&&_0x4b99ba[_0xe6f6f4(0x234)])_0x363916=JSON[_0xe6f6f4(0x1bd)](_0x4b99ba[_0xe6f6f4(0x234)]);}catch(_0x3b31fa){}const _0x492604=[],_0x45af9f=Date[_0xe6f6f4(0x1b7)](),_0x1fc2a7=0x30*0x3c*0x3c*0x3e8;try{const _0x1d811d=await _0x3f29c2[_0xe6f6f4(0x17d)](_0x3f29c2[_0xe6f6f4(0x185)][_0xe6f6f4(0x1e1)]+'.data.table');if(!_0x1d811d||!_0x1d811d[_0xe6f6f4(0x234)])return;const _0x107330=JSON[_0xe6f6f4(0x1bd)](_0x1d811d[_0xe6f6f4(0x234)]),_0xcfea3=_0x3f29c2[_0xe6f6f4(0x185)][_0xe6f6f4(0x180)]||[],_0x3807ed=_0x3f29c2[_0xe6f6f4(0x185)][_0xe6f6f4(0x23f)]||[],_0x1a3495=new Set();_0x3807ed['forEach'](_0x395b37=>{const _0x25afeb=_0xe6f6f4;if(_0x395b37[_0x25afeb(0x231)])_0x1a3495['add'](_0x395b37[_0x25afeb(0x231)]);});for(const _0x4b09f7 of _0x107330){if(_0x4b09f7[_0xe6f6f4(0x1c7)]&&_0xcfea3[_0xe6f6f4(0x1b8)]>0x0&&!_0xcfea3['includes'](_0x4b09f7['_calName']))continue;const _0x130a41=_0x4b09f7[_0xe6f6f4(0x1fd)]||_0x4b09f7[_0xe6f6f4(0x22a)]||_0x4b09f7[_0xe6f6f4(0x1dc)];if(!_0x130a41)continue;const _0x46b2c4=new Date(_0x130a41),_0x2e5506=_0x46b2c4[_0xe6f6f4(0x229)]();if(isNaN(_0x2e5506))continue;if(_0x2e5506<_0x45af9f)continue;if(_0x2e5506>_0x45af9f+_0x1fc2a7)continue;const _0xb81ce7=(_0x4b09f7['event']||_0x4b09f7[_0xe6f6f4(0x212)]||'')[_0xe6f6f4(0x1f7)]();let _0x2ebdd0=![],_0x4ab571=[],_0x316e5b=_0x4b09f7[_0xe6f6f4(0x1f3)]||_0x4b09f7['summary']||'Unbekannt';if(_0xb81ce7[_0xe6f6f4(0x1f2)]('urlaub\x20ende')||_0xb81ce7[_0xe6f6f4(0x1f2)](_0xe6f6f4(0x1ce))||_0xb81ce7['includes'](_0xe6f6f4(0x22e)))_0x2ebdd0=!![],_0x4ab571=Array[_0xe6f6f4(0x18d)](_0x1a3495);else for(const _0x54a568 of _0x1a3495){if(_0xb81ce7[_0xe6f6f4(0x1f2)](_0x54a568[_0xe6f6f4(0x1f7)]()))_0x4ab571['push'](_0x54a568);}_0x4ab571[_0xe6f6f4(0x1b8)]>0x0&&_0x4ab571['forEach'](_0x221fbe=>{const _0x32bdd9=_0xe6f6f4;let _0x274883=0x3c;if(_0x2ebdd0){let _0xb18f24=0x0;Object['values'](_0x363916)[_0x32bdd9(0x230)](_0x26246b=>{if(_0x26246b>_0xb18f24)_0xb18f24=_0x26246b;}),_0x274883=_0xb18f24>0x0?_0xb18f24:0x78;}else _0x274883=getWarmupRobust(_0x363916,_0x221fbe);const _0x300333=new Date(_0x2e5506-_0x274883*0xea60);_0x492604['push']({'eventTime':_0x2e5506,'triggerTime':_0x300333[_0x32bdd9(0x229)](),'room':_0x221fbe,'minutes':_0x274883,'reason':_0x316e5b,'isGlobal':_0x2ebdd0});});}}catch(_0x170f73){}_0x492604[_0xe6f6f4(0x1e8)]((_0xff85ef,_0x1be61c)=>_0xff85ef['triggerTime']-_0x1be61c[_0xe6f6f4(0x1c3)]);const _0xb9ff8b=_0x492604['slice'](0x0,0x5);await _0x3f29c2[_0xe6f6f4(0x203)](_0xe6f6f4(0x183),{'val':JSON[_0xe6f6f4(0x1b2)](_0xb9ff8b),'ack':!![]});}async function monitorEnforcements(_0x553ca7){const _0xe0205b=a1_0x31c6a8;try{const _0x2961b4=_0xe0205b(0x210),_0x434f6a=await _0x553ca7[_0xe0205b(0x21a)](_0x2961b4);if(!_0x434f6a||!_0x434f6a['val'])return;let _0x1e22fb=[];try{_0x1e22fb=JSON['parse'](_0x434f6a[_0xe0205b(0x234)]);}catch(_0x48cdaa){return;}if(!Array[_0xe0205b(0x1ec)](_0x1e22fb)||_0x1e22fb['length']===0x0)return;const _0x4cd182=Date[_0xe0205b(0x1b7)](),_0x291b37=_0x553ca7[_0xe0205b(0x185)]['devices']||[];let _0x3a8400=![];for(let _0x12a948=_0x1e22fb[_0xe0205b(0x1b8)]-0x1;_0x12a948>=0x0;_0x12a948--){const _0x4370f3=_0x1e22fb[_0x12a948];if(_0x4cd182>=_0x4370f3[_0xe0205b(0x17f)]){_0x553ca7[_0xe0205b(0x1ba)][_0xe0205b(0x205)](_0xe0205b(0x216)+_0x4370f3[_0xe0205b(0x224)]+'\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.'),_0x1e22fb[_0xe0205b(0x1ab)](_0x12a948,0x1),_0x3a8400=!![];continue;}const _0xd3ff88=_0x291b37['find'](_0x168b77=>normalize(_0x168b77[_0xe0205b(0x231)])===normalize(_0x4370f3[_0xe0205b(0x224)])&&(_0x168b77[_0xe0205b(0x220)]===_0xe0205b(0x187)||_0x168b77[_0xe0205b(0x220)]===_0xe0205b(0x199)));if(_0xd3ff88){const _0x223d1f=await findRelatedId(_0x553ca7,_0xd3ff88['id'],'setpoint');if(_0x223d1f){const _0x55ddd8=await _0x553ca7[_0xe0205b(0x17d)](_0x223d1f);_0x55ddd8&&typeof _0x55ddd8[_0xe0205b(0x234)]===_0xe0205b(0x19c)&&(_0x55ddd8[_0xe0205b(0x234)]<0xf&&(_0x553ca7[_0xe0205b(0x1ba)]['warn'](_0xe0205b(0x1ff)+_0x4370f3[_0xe0205b(0x224)]+_0xe0205b(0x1f0)+_0x55ddd8[_0xe0205b(0x234)]+_0xe0205b(0x189)+_0x4370f3[_0xe0205b(0x236)]+_0xe0205b(0x23e)),await _0x553ca7[_0xe0205b(0x23b)](_0x223d1f,_0x4370f3['target']),await logAutomationAction(_0x553ca7,_0xe0205b(0x1fa)+_0x4370f3[_0xe0205b(0x224)]+':\x20'+_0x55ddd8[_0xe0205b(0x234)]+_0xe0205b(0x195)+_0x4370f3[_0xe0205b(0x236)]+'¬∞C\x20(Kalender-Schutz)')));}}}_0x3a8400&&await _0x553ca7['setStateAsync'](_0x2961b4,{'val':JSON['stringify'](_0x1e22fb),'ack':!![]});}catch(_0x19ffb0){_0x553ca7[_0xe0205b(0x1ba)]['error']('Enforcement\x20Monitor\x20Error:\x20'+_0x19ffb0['message']);}}async function checkCalendarTriggers(_0x489363){const _0x5e3eae=a1_0x31c6a8;if(!_0x489363[_0x5e3eae(0x185)]['useCalendar']||!_0x489363[_0x5e3eae(0x185)]['calendarInstance'])return;await updateSchedulePreview(_0x489363);let _0x377881={},_0x2532d8={};try{const _0x5bdd89=await _0x489363[_0x5e3eae(0x21a)]('analysis.energy.warmupTimes');if(_0x5bdd89&&_0x5bdd89[_0x5e3eae(0x234)])_0x377881=JSON[_0x5e3eae(0x1bd)](_0x5bdd89['val']);const _0x43bb87=await _0x489363[_0x5e3eae(0x21a)](_0x5e3eae(0x1eb));if(_0x43bb87&&_0x43bb87[_0x5e3eae(0x234)])_0x2532d8=JSON['parse'](_0x43bb87[_0x5e3eae(0x234)]);}catch(_0x4a5ba5){}let _0x20a04e={'default':0x15};try{const _0x303080=await _0x489363[_0x5e3eae(0x21a)](_0x5e3eae(0x18f));if(_0x303080&&_0x303080[_0x5e3eae(0x234)])_0x20a04e=JSON['parse'](_0x303080[_0x5e3eae(0x234)]);}catch(_0x48669d){}let _0x5ecb21=[];try{const _0x4b4a05=await _0x489363[_0x5e3eae(0x21a)](_0x5e3eae(0x210));if(_0x4b4a05&&_0x4b4a05['val'])_0x5ecb21=JSON['parse'](_0x4b4a05[_0x5e3eae(0x234)]);}catch(_0x24b899){}try{const _0x5f3e6d=await _0x489363[_0x5e3eae(0x17d)](_0x489363['config'][_0x5e3eae(0x1e1)]+_0x5e3eae(0x1a8));if(!_0x5f3e6d||!_0x5f3e6d[_0x5e3eae(0x234)])return;const _0x436ccd=JSON[_0x5e3eae(0x1bd)](_0x5f3e6d['val']),_0x599859=Date[_0x5e3eae(0x1b7)](),_0x2f0a27=_0x489363[_0x5e3eae(0x185)]['devices']||[],_0x1623aa=_0x489363['config'][_0x5e3eae(0x180)]||[];let _0x51fd2f=![];for(const _0x18f61c of _0x436ccd){if(_0x18f61c[_0x5e3eae(0x1c7)]&&_0x1623aa[_0x5e3eae(0x1b8)]>0x0&&!_0x1623aa['includes'](_0x18f61c[_0x5e3eae(0x1c7)]))continue;const _0x5338af=_0x18f61c[_0x5e3eae(0x1fd)]||_0x18f61c[_0x5e3eae(0x22a)]||_0x18f61c['date'];if(!_0x5338af)continue;const _0x5a25f5=new Date(_0x5338af);if(isNaN(_0x5a25f5[_0x5e3eae(0x229)]()))continue;const _0x31cb9f=(_0x18f61c['event']||_0x18f61c['summary']||'')['toLowerCase']();if(_0x31cb9f['includes'](_0x5e3eae(0x1f9))||_0x31cb9f[_0x5e3eae(0x1f2)]('r√ºckkehr')||_0x31cb9f[_0x5e3eae(0x1f2)](_0x5e3eae(0x22e))){let _0x2b3a71=0x0;Object[_0x5e3eae(0x1d0)](_0x377881)['forEach'](_0x39eecd=>{if(_0x39eecd>_0x2b3a71)_0x2b3a71=_0x39eecd;});if(_0x2b3a71===0x0)_0x2b3a71=0x78;const _0x37b630=_0x5a25f5[_0x5e3eae(0x229)]()-_0x2b3a71*0xea60;_0x599859>=_0x37b630&&_0x599859<_0x5a25f5['getTime']()&&(_0x489363[_0x5e3eae(0x1c6)]!=='normal'&&(_0x489363[_0x5e3eae(0x1ba)][_0x5e3eae(0x205)](_0x5e3eae(0x22f)+_0x2b3a71+_0x5e3eae(0x1bc)),await _0x489363[_0x5e3eae(0x203)](_0x5e3eae(0x1ef),{'val':'normal','ack':![]})));}for(const _0x27a407 of _0x2f0a27){if(_0x27a407[_0x5e3eae(0x231)]){const _0x16c3de=_0x27a407[_0x5e3eae(0x231)][_0x5e3eae(0x1f7)](),_0x3ab6c8=(_0x27a407['name']||'')[_0x5e3eae(0x1f7)]();let _0x406690=_0x31cb9f['includes'](_0x16c3de);!_0x406690&&_0x3ab6c8[_0x5e3eae(0x1b8)]>0x3&&_0x31cb9f[_0x5e3eae(0x1f2)](_0x3ab6c8)&&(_0x406690=!![]);if(_0x406690){const _0x34fdcf=getWarmupRobust(_0x377881,_0x27a407[_0x5e3eae(0x231)]),_0xe331a4=_0x2532d8[_0x27a407[_0x5e3eae(0x231)]]||_0x5e3eae(0x21f),_0x53a55a=_0x5a25f5[_0x5e3eae(0x229)]()-_0x34fdcf*0xea60;if(_0x599859>=_0x53a55a&&_0x599859<_0x5a25f5['getTime']()){const _0x598b01=lastActions[_0x5e3eae(0x1e0)+_0x27a407['location']];if(_0x598b01&&_0x599859-_0x598b01<CAL_COOLDOWN_MS)continue;const _0x5aa89d=await findRelatedId(_0x489363,_0x27a407['id'],'setpoint');if(_0x5aa89d){let _0x280724=_0x20a04e[_0x27a407[_0x5e3eae(0x231)]];if(_0x280724===undefined)_0x280724=_0x20a04e['default'];if(_0x280724===undefined)_0x280724=0x15;const _0x88718e=await _0x489363[_0x5e3eae(0x17d)](_0x5aa89d);if(_0x88718e&&typeof _0x88718e['val']===_0x5e3eae(0x19c)&&_0x88718e[_0x5e3eae(0x234)]<_0x280724-0.5){_0x489363[_0x5e3eae(0x1ba)][_0x5e3eae(0x205)](_0x5e3eae(0x19f)+_0xe331a4+_0x5e3eae(0x18a)+_0x27a407[_0x5e3eae(0x231)]+_0x5e3eae(0x1f6)+_0x31cb9f+_0x5e3eae(0x1ee)+_0x280724+'¬∞C\x20(Vorlauf:\x20'+_0x34fdcf+'\x20min).'),await _0x489363[_0x5e3eae(0x23b)](_0x5aa89d,_0x280724),await logAutomationAction(_0x489363,'[CAL]\x20'+_0x27a407[_0x5e3eae(0x231)]+_0x5e3eae(0x19e)+_0x280724+_0x5e3eae(0x23a)+_0xe331a4+')'),lastActions[_0x5e3eae(0x1e0)+_0x27a407[_0x5e3eae(0x231)]]=_0x599859;const _0x15813d=_0x5ecb21[_0x5e3eae(0x191)](_0x498a74=>_0x498a74[_0x5e3eae(0x224)]===_0x27a407[_0x5e3eae(0x231)]);if(_0x15813d!==-0x1)_0x5ecb21[_0x5e3eae(0x1ab)](_0x15813d,0x1);_0x5ecb21['push']({'room':_0x27a407[_0x5e3eae(0x231)],'target':_0x280724,'until':_0x5a25f5['getTime']()}),_0x51fd2f=!![];}}}}}}}_0x51fd2f&&await _0x489363['setStateAsync']('analysis.energy.activeEnforcements',{'val':JSON['stringify'](_0x5ecb21),'ack':!![]});}catch(_0x352b43){_0x489363[_0x5e3eae(0x1ba)]['warn'](_0x5e3eae(0x1a0)+_0x352b43['message']);}}async function manageMpcIntervention(_0x4a93e5,_0x15d49e,_0x42852a){const _0x5f3c56=a1_0x31c6a8;try{const _0x3d8adb=_0x5f3c56(0x1d3),_0x35a4aa=await _0x4a93e5[_0x5f3c56(0x21a)](_0x3d8adb);let _0x56a695=[];if(_0x35a4aa&&_0x35a4aa['val'])try{_0x56a695=JSON[_0x5f3c56(0x1bd)](_0x35a4aa[_0x5f3c56(0x234)]);}catch(_0x2cb413){}const _0x25d699=_0x56a695[_0x5f3c56(0x190)](_0x15d49e);if(_0x42852a==='add')_0x25d699===-0x1&&(_0x56a695['push'](_0x15d49e),await _0x4a93e5[_0x5f3c56(0x203)](_0x3d8adb,{'val':JSON['stringify'](_0x56a695),'ack':!![]}));else _0x42852a===_0x5f3c56(0x20e)&&(_0x25d699!==-0x1&&(_0x56a695[_0x5f3c56(0x1ab)](_0x25d699,0x1),await _0x4a93e5[_0x5f3c56(0x203)](_0x3d8adb,{'val':JSON[_0x5f3c56(0x1b2)](_0x56a695),'ack':!![]})));}catch(_0x27726d){}}async function cleanupGhostInterventions(_0x51ea32){const _0x2fe719=a1_0x31c6a8;try{const _0x41ffd4='analysis.energy.mpcActiveInterventions',_0x42e76f=await _0x51ea32[_0x2fe719(0x21a)](_0x41ffd4);if(!_0x42e76f||!_0x42e76f[_0x2fe719(0x234)])return;const _0x383854=JSON[_0x2fe719(0x1bd)](_0x42e76f[_0x2fe719(0x234)]);if(!Array[_0x2fe719(0x1ec)](_0x383854)||_0x383854[_0x2fe719(0x1b8)]===0x0)return;let _0x24d92f={'default':0x15};try{const _0x370950=await _0x51ea32[_0x2fe719(0x21a)]('analysis.energy.warmupTargets');if(_0x370950&&_0x370950[_0x2fe719(0x234)])_0x24d92f=JSON[_0x2fe719(0x1bd)](_0x370950[_0x2fe719(0x234)]);}catch(_0x454dc2){}let _0xc3b76c=[];try{const _0x5de76d=await _0x51ea32['getStateAsync'](_0x2fe719(0x1bf));if(_0x5de76d&&_0x5de76d[_0x2fe719(0x234)])_0xc3b76c=JSON[_0x2fe719(0x1bd)](_0x5de76d[_0x2fe719(0x234)]);}catch(_0x930f08){}let _0x3eb778={},_0x4b70d0=![];try{const _0x397fff=await _0x51ea32['getStateAsync']('analysis.energy.rlPenalties');if(_0x397fff&&_0x397fff[_0x2fe719(0x234)])_0x3eb778=JSON[_0x2fe719(0x1bd)](_0x397fff[_0x2fe719(0x234)]);}catch(_0x10ddc6){}if(_0x3eb778[_0x2fe719(0x21e)]){const _0x200995=Date[_0x2fe719(0x1b7)]();for(const [_0x89d17a,_0x55d040]of Object[_0x2fe719(0x1d4)](_0x3eb778[_0x2fe719(0x21e)])){_0x200995-_0x55d040>PENALTY_TTL&&(delete _0x3eb778[_0x89d17a],delete _0x3eb778[_0x2fe719(0x21e)][_0x89d17a],_0x4b70d0=!![],_0x51ea32[_0x2fe719(0x1ba)][_0x2fe719(0x205)](_0x2fe719(0x226)+_0x89d17a+_0x2fe719(0x1cc)));}}const _0xb1e62a=_0x51ea32['config'][_0x2fe719(0x23f)]||[];let _0x1b75de=![];for(let _0x4e2237=_0x383854[_0x2fe719(0x1b8)]-0x1;_0x4e2237>=0x0;_0x4e2237--){const _0x4de27c=_0x383854[_0x4e2237],_0x254e78=_0xb1e62a['find'](_0x371afa=>normalize(_0x371afa[_0x2fe719(0x231)])===normalize(_0x4de27c)&&(_0x371afa[_0x2fe719(0x220)]==='temperature'||_0x371afa['type']==='thermostat'));if(!_0x254e78){_0x51ea32[_0x2fe719(0x1ba)][_0x2fe719(0x1a2)]('üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27'+_0x4de27c+_0x2fe719(0x21b)),_0x383854[_0x2fe719(0x1ab)](_0x4e2237,0x1),_0x1b75de=!![];continue;}if(_0x254e78){const _0xc9006f=await findRelatedId(_0x51ea32,_0x254e78['id'],_0x2fe719(0x1fe)),_0x1309fd=await _0x51ea32['getForeignStateAsync'](_0x254e78['id']);if(_0xc9006f){const _0xf418f7=await _0x51ea32[_0x2fe719(0x17d)](_0xc9006f);if(_0xf418f7&&typeof _0xf418f7['val']==='number'){let _0x28bb1b=![],_0x339136='';Math['abs'](_0xf418f7[_0x2fe719(0x234)]-ECO_TEMP)>0.5&&(_0x28bb1b=!![],_0x339136=_0x2fe719(0x1a5));if(!_0x28bb1b&&_0x1309fd&&typeof _0x1309fd[_0x2fe719(0x234)]==='number'){const _0x496f4c=_0x24d92f[_0x4de27c]||_0x24d92f[_0x2fe719(0x235)]||0x15;_0x1309fd[_0x2fe719(0x234)]<_0x496f4c+0.2&&(_0x28bb1b=!![],_0x339136='too_cold');}if(_0x28bb1b){if(_0x339136===_0x2fe719(0x1a5)){_0x51ea32['log'][_0x2fe719(0x205)](_0x2fe719(0x1f4)+_0x4de27c+_0x2fe719(0x204)+_0xf418f7['val']+_0x2fe719(0x237)+ECO_TEMP+'¬∞C).\x20Entferne\x20Status.');const _0x115a42=lastActions[_0x2fe719(0x1e0)+_0x4de27c],_0x40705b=_0x115a42&&Date[_0x2fe719(0x1b7)]()-_0x115a42<0x2*0x3c*0x3e8;if(!_0x40705b&&_0xf418f7[_0x2fe719(0x234)]>ECO_TEMP+0.5){_0x51ea32[_0x2fe719(0x184)]&&(_0x51ea32[_0x2fe719(0x1ba)]['info']('üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20'+_0x4de27c+_0x2fe719(0x1fb)),_0x51ea32[_0x2fe719(0x184)](_0x2fe719(0x227),{'room':_0x4de27c}));const _0x101045=_0x4de27c+'_'+new Date()['getHours']();if(!_0x3eb778[_0x101045]){_0x3eb778[_0x101045]=0x1;if(!_0x3eb778[_0x2fe719(0x21e)])_0x3eb778[_0x2fe719(0x21e)]={};_0x3eb778[_0x2fe719(0x21e)][_0x101045]=Date[_0x2fe719(0x1b7)](),_0x4b70d0=!![];}}else _0x40705b&&_0x51ea32[_0x2fe719(0x1ba)]['info'](_0x2fe719(0x19d)+_0x4de27c+'\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.');}else{if(_0x339136===_0x2fe719(0x1f1)){let _0x238577=![];if(_0xc3b76c[_0x2fe719(0x1d7)](_0x185d26=>_0x185d26[_0x2fe719(0x224)]===_0x4de27c))_0x238577=!![];const _0x1d345c=_0xb1e62a['filter'](_0x5ebfc0=>normalize(_0x5ebfc0[_0x2fe719(0x231)])===normalize(_0x4de27c)&&(_0x5ebfc0[_0x2fe719(0x220)]===_0x2fe719(0x222)||_0x5ebfc0[_0x2fe719(0x220)]===_0x2fe719(0x1b6)||_0x5ebfc0[_0x2fe719(0x220)]===_0x2fe719(0x23d)));for(const _0x332185 of _0x1d345c){try{const _0x26996c=await _0x51ea32[_0x2fe719(0x17d)](_0x332185['id']);if(_0x26996c&&(_0x26996c['val']===!![]||_0x26996c[_0x2fe719(0x234)]===0x1||String(_0x26996c[_0x2fe719(0x234)])[_0x2fe719(0x1f7)]()===_0x2fe719(0x1e4)))_0x238577=!![];}catch(_0x90aa33){}}if(_0x238577)_0x51ea32[_0x2fe719(0x1ba)][_0x2fe719(0x205)](_0x2fe719(0x1c5)+_0x4de27c+_0x2fe719(0x1d9));else{const _0x3e48d7=_0x24d92f[_0x4de27c]||_0x24d92f[_0x2fe719(0x235)]||0x15;_0x51ea32[_0x2fe719(0x1ba)]['info'](_0x2fe719(0x213)+_0x4de27c+_0x2fe719(0x1df)+_0x1309fd['val']+_0x2fe719(0x1bb)+(_0x3e48d7+0.2)+_0x2fe719(0x186)),await _0x51ea32['setForeignStateAsync'](_0xc9006f,_0x3e48d7),await logAutomationAction(_0x51ea32,_0x2fe719(0x218)+_0x4de27c+_0x2fe719(0x228)+_0x3e48d7+'¬∞C'),lastActions[_0x2fe719(0x194)+_0x4de27c]=Date[_0x2fe719(0x1b7)]();}}}_0x383854['splice'](_0x4e2237,0x1),_0x1b75de=!![];}}}}}_0x1b75de&&await _0x51ea32[_0x2fe719(0x203)](_0x41ffd4,{'val':JSON[_0x2fe719(0x1b2)](_0x383854),'ack':!![]}),_0x4b70d0&&await _0x51ea32[_0x2fe719(0x203)](_0x2fe719(0x1e5),{'val':JSON[_0x2fe719(0x1b2)](_0x3eb778),'ack':!![]});}catch(_0x138d0c){}}async function applyEnergySavings(_0x4896ff,_0x42dae6){const _0x66716=a1_0x31c6a8;await cleanupGhostInterventions(_0x4896ff);if(!_0x42dae6||_0x42dae6[_0x66716(0x1b8)]===0x0)return;const _0x212bef=_0x4896ff[_0x66716(0x185)][_0x66716(0x23f)]||[],_0x37e93c=Date[_0x66716(0x1b7)]();for(const _0x473869 of _0x42dae6){const _0xb5bab9=_0x473869['room'],_0x2c86a2=_0x473869[_0x66716(0x1c0)],_0x12e44f=_0x473869['target']||0x15;if(lastActions[_0x66716(0x194)+_0xb5bab9]&&_0x37e93c-lastActions['rescue_'+_0xb5bab9]<RESCUE_LOCK_MS)continue;const _0xf46573=_0x212bef[_0x66716(0x1d7)](_0x2ba6c0=>normalize(_0x2ba6c0['location'])===normalize(_0xb5bab9)&&(_0x2ba6c0['type']===_0x66716(0x187)||_0x2ba6c0[_0x66716(0x220)]===_0x66716(0x199)));if(!_0xf46573)continue;const _0x5530d9=await findRelatedId(_0x4896ff,_0xf46573['id'],'setpoint');if(_0x5530d9){if(lastActions[_0x66716(0x221)+_0xb5bab9]&&_0x37e93c-lastActions[_0x66716(0x221)+_0xb5bab9]<0x1e*0x3c*0x3e8)continue;const _0x3a7779=await _0x4896ff[_0x66716(0x17d)](_0x5530d9);if(_0x3a7779&&typeof _0x3a7779[_0x66716(0x234)]===_0x66716(0x19c)){const _0x111340=_0x3a7779['val'];_0x111340!==ECO_TEMP&&await manageMpcIntervention(_0x4896ff,_0xb5bab9,_0x66716(0x20e));if(_0x2c86a2>0x1e)_0x111340>ECO_TEMP+0.5&&(_0x4896ff[_0x66716(0x1ba)][_0x66716(0x205)]('üçÉ\x20[MPC\x20ACTION]\x20Senke\x20'+_0xb5bab9+_0x66716(0x1f0)+ECO_TEMP+'¬∞C!\x20(Puffer:\x20'+_0x2c86a2+_0x66716(0x1c8)),await _0x4896ff[_0x66716(0x23b)](_0x5530d9,ECO_TEMP),await manageMpcIntervention(_0x4896ff,_0xb5bab9,_0x66716(0x215)),lastActions[_0x66716(0x221)+_0xb5bab9]=_0x37e93c,await logAutomationAction(_0x4896ff,_0x66716(0x239)+_0xb5bab9+':\x20Absenkung\x20auf\x20'+ECO_TEMP+'¬∞C'));else _0x2c86a2<=0xf&&(_0x111340<_0x12e44f&&(_0x4896ff[_0x66716(0x1ba)][_0x66716(0x205)]('üî•\x20[MPC\x20ACTION]\x20Heize\x20'+_0xb5bab9+'\x20wieder\x20auf\x20'+_0x12e44f+_0x66716(0x18b)),await _0x4896ff[_0x66716(0x23b)](_0x5530d9,_0x12e44f),await manageMpcIntervention(_0x4896ff,_0xb5bab9,_0x66716(0x20e)),lastActions[_0x66716(0x221)+_0xb5bab9]=_0x37e93c,await logAutomationAction(_0x4896ff,_0x66716(0x239)+_0xb5bab9+_0x66716(0x1da)+_0x12e44f+'¬∞C')));}}else _0x4896ff[_0x66716(0x1ba)][_0x66716(0x1a2)](_0x66716(0x1ca)+_0xb5bab9+_0x66716(0x1aa));}}module[a1_0x31c6a8(0x22d)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};