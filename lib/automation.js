const a1_0x1ddf35=a1_0x9bec;(function(_0x41e0dd,_0x133550){const _0x3321cf=a1_0x9bec,_0x403d99=_0x41e0dd();while(!![]){try{const _0x5842fd=parseInt(_0x3321cf(0xeb))/0x1+parseInt(_0x3321cf(0x124))/0x2+-parseInt(_0x3321cf(0x115))/0x3*(-parseInt(_0x3321cf(0xe7))/0x4)+-parseInt(_0x3321cf(0xe6))/0x5*(parseInt(_0x3321cf(0x175))/0x6)+-parseInt(_0x3321cf(0x18b))/0x7*(parseInt(_0x3321cf(0x184))/0x8)+parseInt(_0x3321cf(0x101))/0x9*(parseInt(_0x3321cf(0x152))/0xa)+-parseInt(_0x3321cf(0x14f))/0xb*(parseInt(_0x3321cf(0x167))/0xc);if(_0x5842fd===_0x133550)break;else _0x403d99['push'](_0x403d99['shift']());}catch(_0x4c7e88){_0x403d99['push'](_0x403d99['shift']());}}}(a1_0x1823,0xabc56));const a1_0x5789c2=(function(){let _0x120342=!![];return function(_0x3832f4,_0x5be1ce){const _0x49c795=_0x120342?function(){const _0x204cf4=a1_0x9bec;if(_0x5be1ce){const _0x58cbf4=_0x5be1ce[_0x204cf4(0xf6)](_0x3832f4,arguments);return _0x5be1ce=null,_0x58cbf4;}}:function(){};return _0x120342=![],_0x49c795;};}()),a1_0x4971dc=a1_0x5789c2(this,function(){const _0x423990=a1_0x9bec;return a1_0x4971dc[_0x423990(0x16c)]()[_0x423990(0x178)](_0x423990(0x12c))[_0x423990(0x16c)]()['constructor'](a1_0x4971dc)[_0x423990(0x178)](_0x423990(0x12c));});function a1_0x9bec(_0x1fbd54,_0x206d99){const _0x3e4ba4=a1_0x1823();return a1_0x9bec=function(_0x4971dc,_0x5789c2){_0x4971dc=_0x4971dc-0xdc;let _0x182302=_0x3e4ba4[_0x4971dc];return _0x182302;},a1_0x9bec(_0x1fbd54,_0x206d99);}a1_0x4971dc();'use strict';const aiAgent=require(a1_0x1ddf35(0xdc)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x4af833){const _0x3bdd93=a1_0x1ddf35;if(!_0x4af833)return'';return _0x4af833[_0x3bdd93(0x155)]()['replace'](/\s+/g,'')[_0x3bdd93(0x191)]();}function getWarmupRobust(_0x145d1c,_0x5ae24f){const _0x284022=a1_0x1ddf35;if(!_0x145d1c||!_0x5ae24f)return 0x3c;if(_0x145d1c[_0x5ae24f]!==undefined)return _0x145d1c[_0x5ae24f];const _0x125347=_0x5ae24f[_0x284022(0x155)]()[_0x284022(0x130)](/√§/g,'ae')['replace'](/√∂/g,'oe')[_0x284022(0x130)](/√º/g,'ue')['replace'](/√ü/g,'ss')[_0x284022(0x130)](/\s+/g,'_')[_0x284022(0x130)](/[^a-z0-9_]/g,'');if(_0x145d1c[_0x125347]!==undefined)return _0x145d1c[_0x125347];return 0x3c;}async function logAutomationAction(_0x172268,_0x443d84){const _0x5cc750=a1_0x1ddf35;await _0x172268[_0x5cc750(0x162)](_0x5cc750(0x199),{'val':_0x443d84,'ack':!![]});try{const _0x6b6d4c=_0x5cc750(0x121),_0x12f17f=await _0x172268[_0x5cc750(0x151)](_0x6b6d4c);let _0x11b1a4=[];if(_0x12f17f&&_0x12f17f[_0x5cc750(0x14e)])try{_0x11b1a4=JSON[_0x5cc750(0x176)](_0x12f17f[_0x5cc750(0x14e)]);}catch(_0x5874dc){}_0x11b1a4['unshift']({'ts':Date['now'](),'msg':_0x443d84});if(_0x11b1a4[_0x5cc750(0xf7)]>0x32)_0x11b1a4=_0x11b1a4[_0x5cc750(0x14a)](0x0,0x32);await _0x172268[_0x5cc750(0x162)](_0x6b6d4c,{'val':JSON[_0x5cc750(0x10e)](_0x11b1a4),'ack':!![]});}catch(_0x32149a){}}async function handlePrediction(_0x5f52fa,_0x57b111,_0x2cd025){const _0x3a7284=a1_0x1ddf35;if(!_0x57b111||_0x57b111==='Unknown')return;let _0x37e30c=_0x3a7284(0x16e),_0xbc3e3a=0.6;try{const _0x19df74=await _0x5f52fa[_0x3a7284(0x151)]('analysis.automation.mode');if(_0x19df74&&_0x19df74[_0x3a7284(0x14e)])_0x37e30c=_0x19df74[_0x3a7284(0x14e)];const _0x5614cc=await _0x5f52fa[_0x3a7284(0x151)](_0x3a7284(0x11a));if(_0x5614cc&&_0x5614cc[_0x3a7284(0x14e)])_0xbc3e3a=_0x5614cc['val'];}catch(_0x50d863){}if(_0x37e30c==='off'||_0x2cd025<_0xbc3e3a)return;const _0x93b3d7=Date[_0x3a7284(0x148)]();if(lastActions[_0x57b111]&&_0x93b3d7-lastActions[_0x57b111]<COOLDOWN_MS)return;const _0x24fea8=_0x5f52fa[_0x3a7284(0x154)]['devices']||[],_0x381238=normalize(_0x57b111),_0x2de577=_0x24fea8[_0x3a7284(0x136)](_0xcc90ca=>normalize(_0xcc90ca[_0x3a7284(0x156)])===_0x381238&&(_0xcc90ca[_0x3a7284(0x163)]===_0x3a7284(0x123)||_0xcc90ca[_0x3a7284(0x163)]==='dimmer'||_0xcc90ca[_0x3a7284(0x163)]==='switch'));if(!_0x2de577)return;const _0x351bc2=await aiAgent[_0x3a7284(0xe9)](_0x5f52fa,_0x57b111,_0x2de577['name'],_0x2cd025);if(!_0x351bc2[_0x3a7284(0x193)])return;const _0x480edd=_0x3a7284(0x100)+_0x57b111+_0x3a7284(0x15b)+_0x2de577[_0x3a7284(0x135)]+'\x20('+_0x351bc2[_0x3a7284(0x19b)]+')';await logAutomationAction(_0x5f52fa,'['+_0x37e30c[_0x3a7284(0x18c)]()+']\x20'+_0x480edd);if(_0x37e30c==='active'){const _0x3f90cf=await _0x5f52fa['getForeignStateAsync'](_0x2de577['id']);(!_0x3f90cf||!_0x3f90cf[_0x3a7284(0x14e)]&&_0x3f90cf[_0x3a7284(0x14e)]!==!![])&&await _0x5f52fa[_0x3a7284(0x105)](_0x2de577['id'],!![]),lastActions[_0x57b111]=_0x93b3d7;}}async function findRelatedId(_0x1a92a2,_0x79d0e1,_0x91ad7=a1_0x1ddf35(0x18e)){const _0x378b52=a1_0x1ddf35;if(_0x91ad7==='setpoint'&&_0x1a92a2[_0x378b52(0x154)]['thermostatMapping']){let _0xf4f2f5=_0x1a92a2[_0x378b52(0x154)][_0x378b52(0x125)];if(typeof _0xf4f2f5===_0x378b52(0xfe))try{_0xf4f2f5=JSON[_0x378b52(0x176)](_0xf4f2f5);}catch(_0x463913){}if(_0xf4f2f5&&_0xf4f2f5[_0x79d0e1])return _0xf4f2f5[_0x79d0e1];}if(_0x91ad7==='valve'&&_0x1a92a2['config']['valveMapping']){let _0x3c96fa=_0x1a92a2[_0x378b52(0x154)]['valveMapping'];if(typeof _0x3c96fa==='string')try{_0x3c96fa=JSON['parse'](_0x3c96fa);}catch(_0x48441f){}if(_0x3c96fa&&_0x3c96fa[_0x79d0e1])return _0x3c96fa[_0x79d0e1];}let _0x15fea0=[];if(_0x91ad7===_0x378b52(0x18e))_0x15fea0=[{'s':_0x378b52(0xf9),'t':_0x378b52(0xec)},{'s':'.1.TEMPERATURE','t':_0x378b52(0xec)},{'s':_0x378b52(0xe2),'t':_0x378b52(0x107)},{'s':_0x378b52(0x10c),'t':_0x378b52(0x182)},{'s':_0x378b52(0x12f),'t':_0x378b52(0xe8)},{'s':_0x378b52(0x12f),'t':_0x378b52(0x11e)},{'s':_0x378b52(0x16f),'t':_0x378b52(0x171)},{'s':_0x378b52(0x166),'t':_0x378b52(0x11f)},{'s':_0x378b52(0x187),'t':'Soll'},{'s':_0x378b52(0x16f),'t':_0x378b52(0x18e)}];else _0x91ad7==='valve'&&(_0x15fea0=[{'s':_0x378b52(0xf9),'t':'.1.LEVEL'},{'s':'.1.TEMPERATURE','t':_0x378b52(0x180)},{'s':'.1.TEMPERATURE','t':_0x378b52(0xf8)},{'s':_0x378b52(0x12f),'t':'pi_heating_demand'},{'s':_0x378b52(0x16f),'t':_0x378b52(0x189)},{'s':'temperature','t':_0x378b52(0x149)}]);for(const _0x176897 of _0x15fea0){if(_0x79d0e1[_0x378b52(0x15f)](_0x176897['s'])){const _0x2612dd=_0x79d0e1[_0x378b52(0x130)](_0x176897['s'],_0x176897['t']),_0x2c0bae=await _0x1a92a2[_0x378b52(0x114)](_0x2612dd);if(_0x2c0bae)return _0x2612dd;}}try{const _0x59a0b4=_0x79d0e1[_0x378b52(0xf0)]('.');if(_0x59a0b4[_0x378b52(0xf7)]>0x2){const _0x4fb887=_0x59a0b4['slice'](0x0,-0x1)[_0x378b52(0x16d)]('.'),_0x455c5f=await _0x1a92a2[_0x378b52(0x129)](_0x4fb887+'.*'),_0x230655=[],_0x204ef9=_0x79d0e1[_0x378b52(0xf0)](/[._]+/)[_0x378b52(0x14c)](_0xf39c51=>!['openknx','0',_0x378b52(0x181),_0x378b52(0xea),_0x378b52(0x12d),_0x378b52(0x16f),_0x378b52(0x132),_0x378b52(0xf4),'messwert',_0x378b52(0x174)][_0x378b52(0x15f)](_0xf39c51['toLowerCase']()));for(const [_0x583b97,_0x3a51cb]of Object[_0x378b52(0x14d)](_0x455c5f)){if(_0x583b97===_0x79d0e1)continue;if(_0x3a51cb&&_0x3a51cb[_0x378b52(0x144)]){const _0x1abf72=_0x583b97['toLowerCase'](),_0x4216c6=(_0x3a51cb[_0x378b52(0x144)]['role']||'')['toLowerCase'](),_0x2bd74f=(_0x3a51cb[_0x378b52(0x144)][_0x378b52(0x15e)]||'')[_0x378b52(0x155)]();let _0x2f220d=![];if(_0x91ad7===_0x378b52(0x18e)&&_0x3a51cb[_0x378b52(0x144)][_0x378b52(0x169)]===!![])_0x2f220d=_0x1abf72[_0x378b52(0x15f)](_0x378b52(0x10d))||_0x1abf72['includes'](_0x378b52(0xdf))||_0x1abf72[_0x378b52(0x15f)](_0x378b52(0x13a))||_0x4216c6[_0x378b52(0x15f)]('level.temperature')||_0x4216c6[_0x378b52(0x15f)](_0x378b52(0x194));else _0x91ad7===_0x378b52(0x179)&&(_0x2f220d=_0x1abf72[_0x378b52(0x15f)]('level')||_0x1abf72[_0x378b52(0x15f)]('valve')||_0x1abf72[_0x378b52(0x15f)](_0x378b52(0xf3))||_0x1abf72[_0x378b52(0x15f)](_0x378b52(0x127))||_0x4216c6[_0x378b52(0x15f)](_0x378b52(0x160))||_0x4216c6[_0x378b52(0x15f)](_0x378b52(0x165))||_0x2bd74f['includes']('%'));if(_0x2f220d){const _0x309ff7=_0x583b97['split'](/[._]+/)[_0x378b52(0x15d)](_0x6cf61f=>_0x6cf61f[_0x378b52(0x155)]());let _0x278078=0x0;_0x204ef9[_0x378b52(0x197)](_0x2e9457=>{const _0x1e40bc=_0x378b52;if(_0x309ff7['includes'](_0x2e9457[_0x1e40bc(0x155)]()))_0x278078++;}),_0x230655['push']({'id':_0x583b97,'score':_0x278078});}}}if(_0x230655['length']>0x0){_0x230655['sort']((_0x478828,_0x223501)=>_0x223501['score']-_0x478828[_0x378b52(0x103)]);if(_0x230655[0x0]['score']>0x0)return _0x230655[0x0]['id'];}}}catch(_0x349fb0){}return null;}async function scanThermostats(_0x11119e){const _0x6a364c=a1_0x1ddf35,_0x514e8a=_0x11119e[_0x6a364c(0x154)][_0x6a364c(0x13d)]||[],_0x31aa5d=[],_0x5a41d4=_0x514e8a['filter'](_0x2e6ec5=>_0x2e6ec5['id']&&_0x2e6ec5['id'][_0x6a364c(0x15f)](_0x6a364c(0x16f))||_0x2e6ec5[_0x6a364c(0x163)]&&[_0x6a364c(0x16f),'thermostat','sensor'][_0x6a364c(0x15f)](_0x2e6ec5[_0x6a364c(0x163)])||_0x2e6ec5[_0x6a364c(0x135)]&&_0x2e6ec5[_0x6a364c(0x135)][_0x6a364c(0x155)]()[_0x6a364c(0x15f)](_0x6a364c(0x161)));for(const _0x15c3e5 of _0x5a41d4){const _0x33d718=await findRelatedId(_0x11119e,_0x15c3e5['id'],_0x6a364c(0x18e)),_0x30a1b9=await findRelatedId(_0x11119e,_0x15c3e5['id'],'valve');let _0x2e56a2='Nicht\x20gefunden',_0x589663=![],_0x2ba0dc=_0x11119e[_0x6a364c(0x154)][_0x6a364c(0x125)]||{};if(typeof _0x2ba0dc===_0x6a364c(0xfe))try{_0x2ba0dc=JSON[_0x6a364c(0x176)](_0x2ba0dc);}catch(_0x43ff02){}let _0x448e8c=_0x11119e['config'][_0x6a364c(0xfa)]||{};if(typeof _0x448e8c===_0x6a364c(0xfe))try{_0x448e8c=JSON[_0x6a364c(0x176)](_0x448e8c);}catch(_0x29b19b){}if(_0x2ba0dc[_0x15c3e5['id']]&&_0x2ba0dc[_0x15c3e5['id']]===_0x33d718||_0x448e8c[_0x15c3e5['id']]&&_0x448e8c[_0x15c3e5['id']]===_0x30a1b9)_0x2e56a2=_0x6a364c(0x10b),_0x589663=!![];else(_0x33d718||_0x30a1b9)&&(_0x2e56a2=_0x6a364c(0x18f));_0x31aa5d['push']({'room':_0x15c3e5['location']||_0x6a364c(0xed),'sensorId':_0x15c3e5['id'],'setpointId':_0x33d718||'-','valveId':_0x30a1b9||'-','source':_0x2e56a2,'isManual':_0x589663,'status':_0x33d718&&_0x30a1b9?_0x6a364c(0x168):_0x33d718?'OK':'Fehlt'});}return _0x31aa5d[_0x6a364c(0x13c)]((_0x1ef1b8,_0x10a3eb)=>_0x1ef1b8['room'][_0x6a364c(0x19c)](_0x10a3eb[_0x6a364c(0x122)]));}async function updateSchedulePreview(_0x85f856){const _0x232e0d=a1_0x1ddf35;if(!_0x85f856['config'][_0x232e0d(0x102)]||!_0x85f856[_0x232e0d(0x154)]['calendarInstance'])return;let _0x5e4ff6={};try{const _0x240658=await _0x85f856[_0x232e0d(0x151)](_0x232e0d(0x143));if(_0x240658&&_0x240658[_0x232e0d(0x14e)])_0x5e4ff6=JSON['parse'](_0x240658[_0x232e0d(0x14e)]);}catch(_0x3c5f0a){}const _0x1d7e91=[],_0x45c497=Date['now'](),_0x2f47f6=0x30*0x3c*0x3c*0x3e8;try{const _0x240030=await _0x85f856[_0x232e0d(0xee)](_0x85f856[_0x232e0d(0x154)][_0x232e0d(0x14b)]+_0x232e0d(0x17f));if(!_0x240030||!_0x240030['val'])return;const _0x404798=JSON[_0x232e0d(0x176)](_0x240030['val']),_0x438109=_0x85f856[_0x232e0d(0x154)][_0x232e0d(0xf1)]||[],_0x3f815a=_0x85f856['config'][_0x232e0d(0x13d)]||[],_0xcb59c8=new Set();_0x3f815a[_0x232e0d(0x197)](_0x5368df=>{const _0x3b5d00=_0x232e0d;if(_0x5368df[_0x3b5d00(0x156)])_0xcb59c8[_0x3b5d00(0x106)](_0x5368df['location']);});for(const _0x50eb84 of _0x404798){if(_0x50eb84['_calName']&&_0x438109[_0x232e0d(0xf7)]>0x0&&!_0x438109[_0x232e0d(0x15f)](_0x50eb84[_0x232e0d(0x18a)]))continue;const _0x10871f=_0x50eb84[_0x232e0d(0x18d)]||_0x50eb84['eventStart']||_0x50eb84['date'];if(!_0x10871f)continue;const _0x24b9d2=new Date(_0x10871f),_0x1c4818=_0x24b9d2[_0x232e0d(0x137)]();if(isNaN(_0x1c4818))continue;if(_0x1c4818<_0x45c497)continue;if(_0x1c4818>_0x45c497+_0x2f47f6)continue;const _0x11e92e=(_0x50eb84[_0x232e0d(0x17b)]||_0x50eb84['summary']||'')['toLowerCase']();let _0x4e71af=![],_0x45e2e8=[],_0xc4a59b=_0x50eb84[_0x232e0d(0x17b)]||_0x50eb84[_0x232e0d(0xf2)]||'Unbekannt';if(_0x11e92e[_0x232e0d(0x15f)](_0x232e0d(0x13e))||_0x11e92e[_0x232e0d(0x15f)]('r√ºckkehr')||_0x11e92e[_0x232e0d(0x15f)]('ankunft'))_0x4e71af=!![],_0x45e2e8=Array[_0x232e0d(0xfb)](_0xcb59c8);else for(const _0x515f29 of _0xcb59c8){if(_0x11e92e[_0x232e0d(0x15f)](_0x515f29[_0x232e0d(0x155)]()))_0x45e2e8['push'](_0x515f29);}_0x45e2e8['length']>0x0&&_0x45e2e8[_0x232e0d(0x197)](_0x3a602c=>{const _0x28a5ae=_0x232e0d;let _0x4d995a=0x3c;if(_0x4e71af){let _0x5427ec=0x0;Object[_0x28a5ae(0xfd)](_0x5e4ff6)[_0x28a5ae(0x197)](_0x42acc0=>{if(_0x42acc0>_0x5427ec)_0x5427ec=_0x42acc0;}),_0x4d995a=_0x5427ec>0x0?_0x5427ec:0x78;}else _0x4d995a=getWarmupRobust(_0x5e4ff6,_0x3a602c);const _0x5989b3=new Date(_0x1c4818-_0x4d995a*0xea60);_0x1d7e91[_0x28a5ae(0x120)]({'eventTime':_0x1c4818,'triggerTime':_0x5989b3[_0x28a5ae(0x137)](),'room':_0x3a602c,'minutes':_0x4d995a,'reason':_0xc4a59b,'isGlobal':_0x4e71af});});}}catch(_0x267bc9){}_0x1d7e91[_0x232e0d(0x13c)]((_0x1561c6,_0x565102)=>_0x1561c6[_0x232e0d(0x17d)]-_0x565102[_0x232e0d(0x17d)]);const _0x5e3737=_0x1d7e91[_0x232e0d(0x14a)](0x0,0x5);await _0x85f856[_0x232e0d(0x162)]('analysis.energy.schedulePreview',{'val':JSON[_0x232e0d(0x10e)](_0x5e3737),'ack':!![]});}async function monitorEnforcements(_0x3182eb){const _0x36778d=a1_0x1ddf35;try{const _0x3e7eb7=_0x36778d(0x142),_0x34cb63=await _0x3182eb[_0x36778d(0x151)](_0x3e7eb7);if(!_0x34cb63||!_0x34cb63[_0x36778d(0x14e)])return;let _0x21d576=[];try{_0x21d576=JSON[_0x36778d(0x176)](_0x34cb63[_0x36778d(0x14e)]);}catch(_0x558aa6){return;}if(!Array[_0x36778d(0x10a)](_0x21d576)||_0x21d576[_0x36778d(0xf7)]===0x0)return;const _0x14270b=Date[_0x36778d(0x148)](),_0x36f4be=_0x3182eb[_0x36778d(0x154)][_0x36778d(0x13d)]||[];let _0x233dd0=![];for(let _0x54abb0=_0x21d576[_0x36778d(0xf7)]-0x1;_0x54abb0>=0x0;_0x54abb0--){const _0x520c9f=_0x21d576[_0x54abb0];if(_0x14270b>=_0x520c9f[_0x36778d(0x192)]){_0x3182eb['log']['info'](_0x36778d(0x104)+_0x520c9f[_0x36778d(0x122)]+_0x36778d(0x16b)),_0x21d576[_0x36778d(0x12e)](_0x54abb0,0x1),_0x233dd0=!![];continue;}const _0x167dcf=_0x36f4be[_0x36778d(0x136)](_0x4cb3f7=>normalize(_0x4cb3f7[_0x36778d(0x156)])===normalize(_0x520c9f['room'])&&(_0x4cb3f7[_0x36778d(0x163)]===_0x36778d(0x16f)||_0x4cb3f7[_0x36778d(0x163)]===_0x36778d(0x17c)));if(_0x167dcf){const _0xdce9eb=await findRelatedId(_0x3182eb,_0x167dcf['id'],'setpoint');if(_0xdce9eb){const _0xe42e81=await _0x3182eb['getForeignStateAsync'](_0xdce9eb);_0xe42e81&&typeof _0xe42e81['val']===_0x36778d(0x185)&&(_0xe42e81[_0x36778d(0x14e)]<0xf&&(_0x3182eb[_0x36778d(0xe5)]['warn']('üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x520c9f[_0x36778d(0x122)]+_0x36778d(0x196)+_0xe42e81[_0x36778d(0x14e)]+_0x36778d(0x112)+_0x520c9f[_0x36778d(0x13a)]+'¬∞C.'),await _0x3182eb[_0x36778d(0x105)](_0xdce9eb,_0x520c9f[_0x36778d(0x13a)]),await logAutomationAction(_0x3182eb,_0x36778d(0xe3)+_0x520c9f['room']+':\x20'+_0xe42e81[_0x36778d(0x14e)]+'¬∞C\x20->\x20'+_0x520c9f['target']+'¬∞C\x20(Kalender-Schutz)')));}}}_0x233dd0&&await _0x3182eb[_0x36778d(0x162)](_0x3e7eb7,{'val':JSON[_0x36778d(0x10e)](_0x21d576),'ack':!![]});}catch(_0x3447c6){_0x3182eb[_0x36778d(0xe5)][_0x36778d(0x17e)]('Enforcement\x20Monitor\x20Error:\x20'+_0x3447c6[_0x36778d(0x117)]);}}async function checkCalendarTriggers(_0x315f40){const _0x4f95a0=a1_0x1ddf35;if(!_0x315f40[_0x4f95a0(0x154)][_0x4f95a0(0x102)]||!_0x315f40[_0x4f95a0(0x154)][_0x4f95a0(0x14b)])return;await updateSchedulePreview(_0x315f40);let _0x21766d={},_0x1d1724={};try{const _0x5358c4=await _0x315f40[_0x4f95a0(0x151)](_0x4f95a0(0x143));if(_0x5358c4&&_0x5358c4[_0x4f95a0(0x14e)])_0x21766d=JSON[_0x4f95a0(0x176)](_0x5358c4[_0x4f95a0(0x14e)]);const _0x5a22da=await _0x315f40[_0x4f95a0(0x151)]('analysis.energy.warmupSources');if(_0x5a22da&&_0x5a22da['val'])_0x1d1724=JSON[_0x4f95a0(0x176)](_0x5a22da[_0x4f95a0(0x14e)]);}catch(_0xbd142){}let _0x313ca5={'default':0x15};try{const _0x39367e=await _0x315f40['getStateAsync'](_0x4f95a0(0x110));if(_0x39367e&&_0x39367e[_0x4f95a0(0x14e)])_0x313ca5=JSON['parse'](_0x39367e[_0x4f95a0(0x14e)]);}catch(_0x3ed3e7){}let _0x16124a=[];try{const _0xc9a393=await _0x315f40[_0x4f95a0(0x151)](_0x4f95a0(0x142));if(_0xc9a393&&_0xc9a393['val'])_0x16124a=JSON['parse'](_0xc9a393['val']);}catch(_0x3778bb){}try{const _0x529242=await _0x315f40[_0x4f95a0(0xee)](_0x315f40['config'][_0x4f95a0(0x14b)]+_0x4f95a0(0x17f));if(!_0x529242||!_0x529242['val'])return;const _0x1245d9=JSON[_0x4f95a0(0x176)](_0x529242[_0x4f95a0(0x14e)]),_0x1e57b0=Date[_0x4f95a0(0x148)](),_0xf1c7e4=_0x315f40[_0x4f95a0(0x154)][_0x4f95a0(0x13d)]||[],_0x55015d=_0x315f40['config'][_0x4f95a0(0xf1)]||[];let _0x1dc710=![];for(const _0x57c216 of _0x1245d9){if(_0x57c216[_0x4f95a0(0x18a)]&&_0x55015d[_0x4f95a0(0xf7)]>0x0&&!_0x55015d['includes'](_0x57c216[_0x4f95a0(0x18a)]))continue;const _0x2a78d3=_0x57c216[_0x4f95a0(0x18d)]||_0x57c216[_0x4f95a0(0x150)]||_0x57c216['date'];if(!_0x2a78d3)continue;const _0x20c7d9=new Date(_0x2a78d3);if(isNaN(_0x20c7d9[_0x4f95a0(0x137)]()))continue;const _0x1e33e6=(_0x57c216[_0x4f95a0(0x17b)]||_0x57c216[_0x4f95a0(0xf2)]||'')['toLowerCase']();if(_0x1e33e6[_0x4f95a0(0x15f)]('urlaub\x20ende')||_0x1e33e6[_0x4f95a0(0x15f)]('r√ºckkehr')||_0x1e33e6['includes'](_0x4f95a0(0x157))){let _0x100dd7=0x0;Object[_0x4f95a0(0xfd)](_0x21766d)[_0x4f95a0(0x197)](_0x20d3ce=>{if(_0x20d3ce>_0x100dd7)_0x100dd7=_0x20d3ce;});if(_0x100dd7===0x0)_0x100dd7=0x78;const _0x24b794=_0x20c7d9['getTime']()-_0x100dd7*0xea60;_0x1e57b0>=_0x24b794&&_0x1e57b0<_0x20c7d9[_0x4f95a0(0x137)]()&&(_0x315f40[_0x4f95a0(0x183)]!==_0x4f95a0(0x16a)&&(_0x315f40['log'][_0x4f95a0(0x158)]('üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20'+_0x100dd7+_0x4f95a0(0x159)),await _0x315f40[_0x4f95a0(0x162)](_0x4f95a0(0x17a),{'val':_0x4f95a0(0x16a),'ack':![]})));}for(const _0x849397 of _0xf1c7e4){if(_0x849397[_0x4f95a0(0x156)]){const _0x2ea4a5=_0x849397[_0x4f95a0(0x156)][_0x4f95a0(0x155)](),_0x3f0279=(_0x849397[_0x4f95a0(0x135)]||'')[_0x4f95a0(0x155)]();let _0x4de1af=_0x1e33e6[_0x4f95a0(0x15f)](_0x2ea4a5);!_0x4de1af&&_0x3f0279[_0x4f95a0(0xf7)]>0x3&&_0x1e33e6[_0x4f95a0(0x15f)](_0x3f0279)&&(_0x4de1af=!![]);if(_0x4de1af){const _0x4de6de=getWarmupRobust(_0x21766d,_0x849397[_0x4f95a0(0x156)]),_0x30f998=_0x1d1724[_0x849397['location']]||_0x4f95a0(0xfc),_0x2ed4b0=_0x20c7d9[_0x4f95a0(0x137)]()-_0x4de6de*0xea60;if(_0x1e57b0>=_0x2ed4b0&&_0x1e57b0<_0x20c7d9[_0x4f95a0(0x137)]()){const _0x33a314=lastActions[_0x4f95a0(0x172)+_0x849397[_0x4f95a0(0x156)]];if(_0x33a314&&_0x1e57b0-_0x33a314<CAL_COOLDOWN_MS)continue;const _0x83bd68=await findRelatedId(_0x315f40,_0x849397['id'],_0x4f95a0(0x18e));if(_0x83bd68){let _0x330318=_0x313ca5[_0x849397[_0x4f95a0(0x156)]];if(_0x330318===undefined)_0x330318=_0x313ca5[_0x4f95a0(0x19a)];if(_0x330318===undefined)_0x330318=0x15;const _0x458a03=await _0x315f40['getForeignStateAsync'](_0x83bd68);if(_0x458a03&&typeof _0x458a03[_0x4f95a0(0x14e)]===_0x4f95a0(0x185)&&_0x458a03[_0x4f95a0(0x14e)]<_0x330318-0.5){_0x315f40[_0x4f95a0(0xe5)][_0x4f95a0(0x158)](_0x4f95a0(0x188)+_0x30f998+_0x4f95a0(0xff)+_0x849397[_0x4f95a0(0x156)]+_0x4f95a0(0x108)+_0x1e33e6+_0x4f95a0(0x153)+_0x330318+_0x4f95a0(0x131)+_0x4de6de+_0x4f95a0(0x159)),await _0x315f40[_0x4f95a0(0x105)](_0x83bd68,_0x330318),await logAutomationAction(_0x315f40,_0x4f95a0(0x19d)+_0x849397['location']+_0x4f95a0(0x116)+_0x330318+_0x4f95a0(0x141)+_0x30f998+')'),lastActions[_0x4f95a0(0x172)+_0x849397[_0x4f95a0(0x156)]]=_0x1e57b0;const _0x37a297=_0x16124a[_0x4f95a0(0x134)](_0x4ad3fc=>_0x4ad3fc['room']===_0x849397[_0x4f95a0(0x156)]);if(_0x37a297!==-0x1)_0x16124a[_0x4f95a0(0x12e)](_0x37a297,0x1);_0x16124a[_0x4f95a0(0x120)]({'room':_0x849397[_0x4f95a0(0x156)],'target':_0x330318,'until':_0x20c7d9[_0x4f95a0(0x137)]()}),_0x1dc710=!![];}}}}}}}_0x1dc710&&await _0x315f40[_0x4f95a0(0x162)](_0x4f95a0(0x142),{'val':JSON[_0x4f95a0(0x10e)](_0x16124a),'ack':!![]});}catch(_0x44e914){_0x315f40[_0x4f95a0(0xe5)][_0x4f95a0(0x111)](_0x4f95a0(0x15a)+_0x44e914[_0x4f95a0(0x117)]);}}async function manageMpcIntervention(_0x373153,_0x173cf0,_0x864d0b){const _0x1f0aa9=a1_0x1ddf35;try{const _0x5679bc=_0x1f0aa9(0x170),_0x55b9d6=await _0x373153[_0x1f0aa9(0x151)](_0x5679bc);let _0x28c31e=[];if(_0x55b9d6&&_0x55b9d6[_0x1f0aa9(0x14e)])try{_0x28c31e=JSON[_0x1f0aa9(0x176)](_0x55b9d6[_0x1f0aa9(0x14e)]);}catch(_0x2cb0ec){}const _0x5baf25=_0x28c31e[_0x1f0aa9(0x139)](_0x173cf0);if(_0x864d0b===_0x1f0aa9(0x106))_0x5baf25===-0x1&&(_0x28c31e['push'](_0x173cf0),await _0x373153[_0x1f0aa9(0x162)](_0x5679bc,{'val':JSON['stringify'](_0x28c31e),'ack':!![]}));else _0x864d0b===_0x1f0aa9(0x164)&&(_0x5baf25!==-0x1&&(_0x28c31e[_0x1f0aa9(0x12e)](_0x5baf25,0x1),await _0x373153[_0x1f0aa9(0x162)](_0x5679bc,{'val':JSON['stringify'](_0x28c31e),'ack':!![]})));}catch(_0x58734b){}}function a1_0x1823(){const _0x3ba163=['thermostat','triggerTime','error','.data.table','.1.LEVEL','hm-rpc','SET_POINT_TEMPERATURE','currentSystemMode','22728fxoEMh','number','_meta','Ist','üìÖ\x20SMART\x20SCHEDULE\x20[','valve_position','_calName','2919dmvhhv','toUpperCase','_date','setpoint','Auto-Erkennung','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','trim','until','approved','thermostat.setpoint','¬∞C).\x20Sparmodus\x20beendet!','\x20auf\x20','forEach','[WATCHDOG]\x20','analysis.automation.lastAction','default','reason','localeCompare','[CAL]\x20','./ai_agent','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','¬∞C).\x20Entferne\x20Status.','soll','\x20ist\x20auf\x20','üî•\x20[MPC\x20ACTION]\x20Heize\x20','.1.TEMPERATURE','[FORCE]\x20','üìÖ\x20[MPC\x20INFO]\x20','log','5rZXLLO','4BpwbkG','occupied_heating_setpoint','consultButler','ist','697789NwVwHU','.1.SET_POINT_TEMPERATURE','Unbekannt','getForeignStateAsync','mpc_','split','calendarSelection','summary','stellwert','sensor','too_cold','apply','length','.4.VALVE_STATE','.1.ACTUAL_TEMPERATURE','valveMapping','from','Classic','values','string',']:\x20Raum-Trigger\x20\x27','Pr√§diktion:\x20','18cMSIcT','useCalendar','score','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','setForeignStateAsync','add','.4.SET_TEMPERATURE','\x27\x20(Match:\x20','minutes_safe','isArray','Manuelles\x20Mapping','ACTUAL_TEMPERATURE','set','stringify','analysis.energy.rlPenalties','analysis.energy.warmupTargets','warn','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','getForeignObjectAsync','1509981ksheDF','\x20->\x20','message','\x20erreicht\x20Limit\x20(','üßπ\x20[MPC\x20CLEANUP]\x20','analysis.automation.confidenceThreshold','analysis.energy.ventilationAlerts','window',':\x20Absenkung\x20auf\x20','current_heating_setpoint','SET','push','analysis.automation.actionLog','room','light','2118040XLlJbr','thermostatMapping','\x20gefunden!','position','manual','getForeignObjectsAsync','contact','TRAIN_RL_PENALTY','(((.+)+)+)+$','wert','splice','local_temperature','replace','¬∞C\x20(Vorlauf:\x20','actual','rescue_','findIndex','name','find','getTime','exports','indexOf','target','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20','sort','devices','urlaub\x20ende','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','\x20min)','¬∞C\x20(via\x20','analysis.energy.activeEnforcements','analysis.energy.warmupTimes','common','getHours','sendToPythonWrapper','¬∞C!\x20(Puffer:\x20','now','level','slice','calendarInstance','filter','entries','val','386782cXWQHb','eventStart','getStateAsync','2854630hTHgNn',')\x20aktiv.\x20Heize\x20auf\x20','config','toLowerCase','location','ankunft','info','\x20min).','Calendar\x20Check\x20Error:\x20','\x20->\x20Schalte\x20','[MPC]\x20','map','unit','includes','level.valve','temp','setStateAsync','type','remove','value.valve','ACTUAL','312mCKhXD','PERFECT','write','normal','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','toString','join','off','temperature','analysis.energy.mpcActiveInterventions','target_temperature','cal_','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','state','171474ifquDX','parse','\x20wurde\x20manuell\x20erh√∂ht.','search','valve','system.mode','event'];a1_0x1823=function(){return _0x3ba163;};return a1_0x1823();}async function cleanupGhostInterventions(_0x53945f){const _0x274a5e=a1_0x1ddf35;try{const _0x385858=_0x274a5e(0x170),_0x204221=await _0x53945f[_0x274a5e(0x151)](_0x385858);if(!_0x204221||!_0x204221[_0x274a5e(0x14e)])return;const _0x51a6cb=JSON['parse'](_0x204221[_0x274a5e(0x14e)]);if(!Array[_0x274a5e(0x10a)](_0x51a6cb)||_0x51a6cb['length']===0x0)return;let _0x56e492={'default':0x15};try{const _0x37ea45=await _0x53945f[_0x274a5e(0x151)]('analysis.energy.warmupTargets');if(_0x37ea45&&_0x37ea45[_0x274a5e(0x14e)])_0x56e492=JSON['parse'](_0x37ea45['val']);}catch(_0x3ee223){}let _0x4f8430=[];try{const _0x49fa15=await _0x53945f[_0x274a5e(0x151)](_0x274a5e(0x11b));if(_0x49fa15&&_0x49fa15['val'])_0x4f8430=JSON[_0x274a5e(0x176)](_0x49fa15[_0x274a5e(0x14e)]);}catch(_0x20a1db){}let _0x39bff8={},_0x39125c=![];try{const _0x4d69ff=await _0x53945f[_0x274a5e(0x151)](_0x274a5e(0x10f));if(_0x4d69ff&&_0x4d69ff[_0x274a5e(0x14e)])_0x39bff8=JSON[_0x274a5e(0x176)](_0x4d69ff[_0x274a5e(0x14e)]);}catch(_0x1f8ba7){}if(_0x39bff8[_0x274a5e(0x186)]){const _0x57d2b6=Date[_0x274a5e(0x148)]();for(const [_0x22f491,_0x1e54a3]of Object['entries'](_0x39bff8['_meta'])){_0x57d2b6-_0x1e54a3>PENALTY_TTL&&(delete _0x39bff8[_0x22f491],delete _0x39bff8['_meta'][_0x22f491],_0x39125c=!![],_0x53945f[_0x274a5e(0xe5)][_0x274a5e(0x158)]('üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27'+_0x22f491+_0x274a5e(0x190)));}}const _0x310bc6=_0x53945f[_0x274a5e(0x154)][_0x274a5e(0x13d)]||[];let _0x3f80b5=![];for(let _0x4fad43=_0x51a6cb[_0x274a5e(0xf7)]-0x1;_0x4fad43>=0x0;_0x4fad43--){const _0x603aab=_0x51a6cb[_0x4fad43],_0x2a88b4=_0x310bc6['find'](_0x423123=>normalize(_0x423123[_0x274a5e(0x156)])===normalize(_0x603aab)&&(_0x423123[_0x274a5e(0x163)]===_0x274a5e(0x16f)||_0x423123[_0x274a5e(0x163)]===_0x274a5e(0x17c)));if(!_0x2a88b4){_0x53945f[_0x274a5e(0xe5)][_0x274a5e(0x111)](_0x274a5e(0x173)+_0x603aab+_0x274a5e(0x13f)),_0x51a6cb[_0x274a5e(0x12e)](_0x4fad43,0x1),_0x3f80b5=!![];continue;}if(_0x2a88b4){const _0x531c04=await findRelatedId(_0x53945f,_0x2a88b4['id'],_0x274a5e(0x18e)),_0x444a4c=await _0x53945f[_0x274a5e(0xee)](_0x2a88b4['id']);if(_0x531c04){const _0x2c8db5=await _0x53945f[_0x274a5e(0xee)](_0x531c04);if(_0x2c8db5&&typeof _0x2c8db5[_0x274a5e(0x14e)]===_0x274a5e(0x185)){let _0x4f8536=![],_0x251fb2='';Math['abs'](_0x2c8db5[_0x274a5e(0x14e)]-ECO_TEMP)>0.5&&(_0x4f8536=!![],_0x251fb2=_0x274a5e(0x128));if(!_0x4f8536&&_0x444a4c&&typeof _0x444a4c['val']===_0x274a5e(0x185)){const _0x1e27b1=_0x56e492[_0x603aab]||_0x56e492[_0x274a5e(0x19a)]||0x15;_0x444a4c[_0x274a5e(0x14e)]<_0x1e27b1+0.2&&(_0x4f8536=!![],_0x251fb2=_0x274a5e(0xf5));}if(_0x4f8536){if(_0x251fb2==='manual'){_0x53945f[_0x274a5e(0xe5)][_0x274a5e(0x158)](_0x274a5e(0x119)+_0x603aab+_0x274a5e(0xe0)+_0x2c8db5[_0x274a5e(0x14e)]+'¬∞C\x20(nicht\x20'+ECO_TEMP+_0x274a5e(0xde));const _0x5c629e=lastActions['cal_'+_0x603aab],_0x35bda4=_0x5c629e&&Date['now']()-_0x5c629e<0x2*0x3c*0x3e8;if(!_0x35bda4&&_0x2c8db5['val']>ECO_TEMP+0.5){_0x53945f[_0x274a5e(0x146)]&&(_0x53945f[_0x274a5e(0xe5)]['info']('üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20'+_0x603aab+_0x274a5e(0x177)),_0x53945f[_0x274a5e(0x146)](_0x274a5e(0x12b),{'room':_0x603aab}));const _0x27edbd=_0x603aab+'_'+new Date()[_0x274a5e(0x145)]();if(!_0x39bff8[_0x27edbd]){_0x39bff8[_0x27edbd]=0x1;if(!_0x39bff8[_0x274a5e(0x186)])_0x39bff8[_0x274a5e(0x186)]={};_0x39bff8['_meta'][_0x27edbd]=Date['now'](),_0x39125c=!![];}}else _0x35bda4&&_0x53945f[_0x274a5e(0xe5)][_0x274a5e(0x158)](_0x274a5e(0xe4)+_0x603aab+'\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.');}else{if(_0x251fb2===_0x274a5e(0xf5)){let _0x24363c=![];if(_0x4f8430['find'](_0x27f3d0=>_0x27f3d0[_0x274a5e(0x122)]===_0x603aab))_0x24363c=!![];const _0x4535d1=_0x310bc6[_0x274a5e(0x14c)](_0x17f3c5=>normalize(_0x17f3c5[_0x274a5e(0x156)])===normalize(_0x603aab)&&(_0x17f3c5[_0x274a5e(0x163)]===_0x274a5e(0x11c)||_0x17f3c5['type']===_0x274a5e(0xf4)||_0x17f3c5[_0x274a5e(0x163)]===_0x274a5e(0x12a)));for(const _0x36bbb9 of _0x4535d1){try{const _0x57f92b=await _0x53945f[_0x274a5e(0xee)](_0x36bbb9['id']);if(_0x57f92b&&(_0x57f92b[_0x274a5e(0x14e)]===!![]||_0x57f92b[_0x274a5e(0x14e)]===0x1||String(_0x57f92b[_0x274a5e(0x14e)])[_0x274a5e(0x155)]()==='open'))_0x24363c=!![];}catch(_0x4b6d63){}}if(_0x24363c)_0x53945f['log'][_0x274a5e(0x158)]('üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20'+_0x603aab+'\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.');else{const _0x13071d=_0x56e492[_0x603aab]||_0x56e492[_0x274a5e(0x19a)]||0x15;_0x53945f[_0x274a5e(0xe5)][_0x274a5e(0x158)]('üö®\x20[MPC\x20WATCHDOG]\x20'+_0x603aab+_0x274a5e(0x118)+_0x444a4c[_0x274a5e(0x14e)]+'¬∞C\x20<\x20'+(_0x13071d+0.2)+_0x274a5e(0x195)),await _0x53945f[_0x274a5e(0x105)](_0x531c04,_0x13071d),await logAutomationAction(_0x53945f,_0x274a5e(0x198)+_0x603aab+_0x274a5e(0x113)+_0x13071d+'¬∞C'),lastActions[_0x274a5e(0x133)+_0x603aab]=Date[_0x274a5e(0x148)]();}}}_0x51a6cb[_0x274a5e(0x12e)](_0x4fad43,0x1),_0x3f80b5=!![];}}}}}_0x3f80b5&&await _0x53945f[_0x274a5e(0x162)](_0x385858,{'val':JSON[_0x274a5e(0x10e)](_0x51a6cb),'ack':!![]}),_0x39125c&&await _0x53945f[_0x274a5e(0x162)](_0x274a5e(0x10f),{'val':JSON[_0x274a5e(0x10e)](_0x39bff8),'ack':!![]});}catch(_0x3838af){}}async function applyEnergySavings(_0xa1e737,_0x1bfc8c){const _0x53fe47=a1_0x1ddf35;await cleanupGhostInterventions(_0xa1e737);if(!_0x1bfc8c||_0x1bfc8c['length']===0x0)return;const _0x3cc626=_0xa1e737[_0x53fe47(0x154)][_0x53fe47(0x13d)]||[],_0x25b235=Date[_0x53fe47(0x148)]();for(const _0x2ff6a8 of _0x1bfc8c){const _0x1719e0=_0x2ff6a8['room'],_0x255bf8=_0x2ff6a8[_0x53fe47(0x109)],_0x999ff3=_0x2ff6a8[_0x53fe47(0x13a)]||0x15;if(lastActions[_0x53fe47(0x133)+_0x1719e0]&&_0x25b235-lastActions[_0x53fe47(0x133)+_0x1719e0]<RESCUE_LOCK_MS)continue;const _0x1c7d2f=_0x3cc626['find'](_0x491f62=>normalize(_0x491f62[_0x53fe47(0x156)])===normalize(_0x1719e0)&&(_0x491f62['type']==='temperature'||_0x491f62[_0x53fe47(0x163)]===_0x53fe47(0x17c)));if(!_0x1c7d2f)continue;const _0x787cd3=await findRelatedId(_0xa1e737,_0x1c7d2f['id'],_0x53fe47(0x18e));if(_0x787cd3){if(lastActions[_0x53fe47(0xef)+_0x1719e0]&&_0x25b235-lastActions['mpc_'+_0x1719e0]<0x1e*0x3c*0x3e8)continue;const _0x3a27e6=await _0xa1e737['getForeignStateAsync'](_0x787cd3);if(_0x3a27e6&&typeof _0x3a27e6[_0x53fe47(0x14e)]===_0x53fe47(0x185)){const _0x4829f8=_0x3a27e6[_0x53fe47(0x14e)];_0x4829f8!==ECO_TEMP&&await manageMpcIntervention(_0xa1e737,_0x1719e0,'remove');if(_0x255bf8>0x1e)_0x4829f8>ECO_TEMP+0.5&&(_0xa1e737[_0x53fe47(0xe5)]['info'](_0x53fe47(0x13b)+_0x1719e0+_0x53fe47(0x196)+ECO_TEMP+_0x53fe47(0x147)+_0x255bf8+_0x53fe47(0x140)),await _0xa1e737['setForeignStateAsync'](_0x787cd3,ECO_TEMP),await manageMpcIntervention(_0xa1e737,_0x1719e0,_0x53fe47(0x106)),lastActions[_0x53fe47(0xef)+_0x1719e0]=_0x25b235,await logAutomationAction(_0xa1e737,_0x53fe47(0x15c)+_0x1719e0+_0x53fe47(0x11d)+ECO_TEMP+'¬∞C'));else _0x255bf8<=0xf&&(_0x4829f8<_0x999ff3&&(_0xa1e737[_0x53fe47(0xe5)][_0x53fe47(0x158)](_0x53fe47(0xe1)+_0x1719e0+'\x20wieder\x20auf\x20'+_0x999ff3+'¬∞C!\x20(Puffer\x20leer).'),await _0xa1e737[_0x53fe47(0x105)](_0x787cd3,_0x999ff3),await manageMpcIntervention(_0xa1e737,_0x1719e0,'remove'),lastActions['mpc_'+_0x1719e0]=_0x25b235,await logAutomationAction(_0xa1e737,_0x53fe47(0x15c)+_0x1719e0+':\x20Aufheizen\x20auf\x20'+_0x999ff3+'¬∞C')));}}else _0xa1e737[_0x53fe47(0xe5)]['warn'](_0x53fe47(0xdd)+_0x1719e0+_0x53fe47(0x126));}}module[a1_0x1ddf35(0x138)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};