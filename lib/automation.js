function a1_0x1885(){const _0x212959=['thermostatMapping','slice','devices','_date','split','value.valve','trim','toUpperCase','\x20wurde\x20manuell\x20erhÃ¶ht.','number','eventStart','push','[MPC]\x20','analysis.automation.mode','entries','1495881nTmRAa','location','current_heating_setpoint','139900TdZqcq','setForeignStateAsync','getTime','119336hzjuHY','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','ACTUAL','messwert','SET','values','sendToPythonWrapper','until','Fehlt','Unknown','203xLJqvT','ðŸ“…\x20SMART\x20SCHEDULE\x20[','remove','[FORCE]\x20','role','PERFECT','room','Enforcement\x20Monitor\x20Error:\x20','soll','rÃ¼ckkehr','score','warn','indexOf','active','reason','_meta','setStateAsync','urlaub\x20ende','valve','Unbekannt','3565316jnrsWp','too_cold','openknx','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','off','Â°C!\x20(Puffer:\x20','sensor','dimmer','analysis.automation.actionLog','actual','date','10578mVlfgb','switch','toLowerCase','getHours','default','./ai_agent','window','Â°C).\x20Sparmodus\x20beendet!','2027148DYCRkz','minutes_safe','ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27','TRAIN_RL_PENALTY','findIndex','currentSystemMode','getForeignObjectsAsync','analysis.automation.confidenceThreshold','3YVzmdl','isArray','log','string','ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','ankunft','type','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','localeCompare','join','ACTUAL_TEMPERATURE','forEach','setpoint','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','getForeignObjectAsync','thermostat','level','155QDQFUS','valveMapping','filter','length','Classic','analysis.energy.rlPenalties','(((.+)+)+)+$','ðŸ“…\x20[MPC\x20INFO]\x20','Ist','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','\x20ist\x20auf\x20','\x20auf\x20','event','thermostat.setpoint','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','_calName','add','pi_heating_demand','name','replace','getStateAsync','ist','Â°C!\x20(Puffer\x20leer).','apply','set','\x20min)','.1.SET_POINT_TEMPERATURE','abs','approved','analysis.energy.activeEnforcements','level.valve','info','.data.table','map','state','find','\x20erreicht\x20Limit\x20(','hm-rpc','.1.ACTUAL_TEMPERATURE','parse','local_temperature','Â°C.','PrÃ¤diktion:\x20','cal_','.1.LEVEL','open','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','temperature','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','Nicht\x20gefunden','SET_POINT_TEMPERATURE','config','summary','calendarSelection','system.mode','ðŸš¨\x20[MPC\x20WATCHDOG]\x20',':\x20Absenkung\x20auf\x20','calendarInstance',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','stringify','mpc_','Â°C\x20->\x20','unshift',']:\x20Raum-Trigger\x20\x27','Calendar\x20Check\x20Error:\x20','includes','analysis.energy.mpcActiveInterventions','.1.TEMPERATURE','[CAL]\x20','\x20->\x20Schalte\x20','common','target','sort','unit','val','message','\x27\x20(Match:\x20','rescue_','useCalendar','manual','position','.4.SET_TEMPERATURE','1sMurNd','triggerTime','stellwert','33919424aPmvUG','search','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','from','write','temp','normal','\x20->\x20','error','valve_position','Â°C\x20(via\x20','getForeignStateAsync','light','wert','analysis.energy.warmupTargets','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','Soll','now','analysis.energy.warmupTimes','splice','\x20min).'];a1_0x1885=function(){return _0x212959;};return a1_0x1885();}const a1_0x4ffcb0=a1_0x25f7;(function(_0x155c5e,_0x561839){const _0x15d5ba=a1_0x25f7,_0x18e52f=_0x155c5e();while(!![]){try{const _0x52004b=parseInt(_0x15d5ba(0x119))/0x1*(-parseInt(_0x15d5ba(0x177))/0x2)+parseInt(_0x15d5ba(0x17f))/0x3*(-parseInt(_0x15d5ba(0x164))/0x4)+-parseInt(_0x15d5ba(0xc6))/0x5*(-parseInt(_0x15d5ba(0x16f))/0x6)+parseInt(_0x15d5ba(0x150))/0x7*(-parseInt(_0x15d5ba(0x146))/0x8)+-parseInt(_0x15d5ba(0x140))/0x9+-parseInt(_0x15d5ba(0x143))/0xa+parseInt(_0x15d5ba(0x11c))/0xb;if(_0x52004b===_0x561839)break;else _0x18e52f['push'](_0x18e52f['shift']());}catch(_0x5d8da3){_0x18e52f['push'](_0x18e52f['shift']());}}}(a1_0x1885,0x977fe));function a1_0x25f7(_0x17a09d,_0x3e2396){const _0x242cb8=a1_0x1885();return a1_0x25f7=function(_0x953c7c,_0x103bfd){_0x953c7c=_0x953c7c-0xb9;let _0x1885c6=_0x242cb8[_0x953c7c];return _0x1885c6;},a1_0x25f7(_0x17a09d,_0x3e2396);}const a1_0x103bfd=(function(){let _0x129d90=!![];return function(_0x2620f0,_0x500725){const _0x223233=_0x129d90?function(){const _0x5a4646=a1_0x25f7;if(_0x500725){const _0x3ea4a4=_0x500725[_0x5a4646(0xdd)](_0x2620f0,arguments);return _0x500725=null,_0x3ea4a4;}}:function(){};return _0x129d90=![],_0x223233;};}()),a1_0x953c7c=a1_0x103bfd(this,function(){const _0x3b310b=a1_0x25f7;return a1_0x953c7c['toString']()[_0x3b310b(0x11d)](_0x3b310b(0xcc))['toString']()['constructor'](a1_0x953c7c)[_0x3b310b(0x11d)]('(((.+)+)+)+$');});a1_0x953c7c();'use strict';const aiAgent=require(a1_0x4ffcb0(0x174)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x4c0430){const _0x36d017=a1_0x4ffcb0;if(!_0x4c0430)return'';return _0x4c0430[_0x36d017(0x171)]()[_0x36d017(0xd9)](/\s+/g,'')[_0x36d017(0x137)]();}function getWarmupRobust(_0x1b6bf7,_0x6ad8e9){const _0x1e21ca=a1_0x4ffcb0;if(!_0x1b6bf7||!_0x6ad8e9)return 0x3c;if(_0x1b6bf7[_0x6ad8e9]!==undefined)return _0x1b6bf7[_0x6ad8e9];const _0xf701db=_0x6ad8e9['toLowerCase']()[_0x1e21ca(0xd9)](/Ã¤/g,'ae')[_0x1e21ca(0xd9)](/Ã¶/g,'oe')[_0x1e21ca(0xd9)](/Ã¼/g,'ue')[_0x1e21ca(0xd9)](/ÃŸ/g,'ss')[_0x1e21ca(0xd9)](/\s+/g,'_')['replace'](/[^a-z0-9_]/g,'');if(_0x1b6bf7[_0xf701db]!==undefined)return _0x1b6bf7[_0xf701db];return 0x3c;}async function logAutomationAction(_0x5df426,_0x52ea4e){const _0x1e4f6d=a1_0x4ffcb0;await _0x5df426['setStateAsync']('analysis.automation.lastAction',{'val':_0x52ea4e,'ack':!![]});try{const _0x25c453=_0x1e4f6d(0x16c),_0x4883cd=await _0x5df426['getStateAsync'](_0x25c453);let _0x270f8c=[];if(_0x4883cd&&_0x4883cd['val'])try{_0x270f8c=JSON[_0x1e4f6d(0xed)](_0x4883cd[_0x1e4f6d(0x111)]);}catch(_0x3612e1){}_0x270f8c[_0x1e4f6d(0x105)]({'ts':Date[_0x1e4f6d(0x12d)](),'msg':_0x52ea4e});if(_0x270f8c[_0x1e4f6d(0xc9)]>0x32)_0x270f8c=_0x270f8c[_0x1e4f6d(0x132)](0x0,0x32);await _0x5df426[_0x1e4f6d(0x160)](_0x25c453,{'val':JSON[_0x1e4f6d(0x102)](_0x270f8c),'ack':!![]});}catch(_0x1bc94a){}}async function handlePrediction(_0x4ac585,_0x84ba9f,_0x17c39d){const _0x4adc3d=a1_0x4ffcb0;if(!_0x84ba9f||_0x84ba9f===_0x4adc3d(0x14f))return;let _0x3b0651=_0x4adc3d(0x168),_0x559e4b=0.6;try{const _0x59d7ca=await _0x4ac585[_0x4adc3d(0xda)](_0x4adc3d(0x13e));if(_0x59d7ca&&_0x59d7ca['val'])_0x3b0651=_0x59d7ca[_0x4adc3d(0x111)];const _0x464beb=await _0x4ac585[_0x4adc3d(0xda)](_0x4adc3d(0x17e));if(_0x464beb&&_0x464beb[_0x4adc3d(0x111)])_0x559e4b=_0x464beb[_0x4adc3d(0x111)];}catch(_0x399f9a){}if(_0x3b0651==='off'||_0x17c39d<_0x559e4b)return;const _0x2af411=Date['now']();if(lastActions[_0x84ba9f]&&_0x2af411-lastActions[_0x84ba9f]<COOLDOWN_MS)return;const _0x1b3555=_0x4ac585[_0x4adc3d(0xf9)][_0x4adc3d(0x133)]||[],_0x110100=normalize(_0x84ba9f),_0x7ad866=_0x1b3555['find'](_0x1dfd26=>normalize(_0x1dfd26[_0x4adc3d(0x141)])===_0x110100&&(_0x1dfd26[_0x4adc3d(0xbb)]===_0x4adc3d(0x128)||_0x1dfd26[_0x4adc3d(0xbb)]===_0x4adc3d(0x16b)||_0x1dfd26[_0x4adc3d(0xbb)]===_0x4adc3d(0x170)));if(!_0x7ad866)return;const _0x525548=await aiAgent['consultButler'](_0x4ac585,_0x84ba9f,_0x7ad866[_0x4adc3d(0xd8)],_0x17c39d);if(!_0x525548[_0x4adc3d(0xe2)])return;const _0x256943=_0x4adc3d(0xf0)+_0x84ba9f+_0x4adc3d(0x10c)+_0x7ad866['name']+'\x20('+_0x525548[_0x4adc3d(0x15e)]+')';await logAutomationAction(_0x4ac585,'['+_0x3b0651[_0x4adc3d(0x138)]()+']\x20'+_0x256943);if(_0x3b0651===_0x4adc3d(0x15d)){const _0xc25cc0=await _0x4ac585[_0x4adc3d(0x127)](_0x7ad866['id']);(!_0xc25cc0||!_0xc25cc0[_0x4adc3d(0x111)]&&_0xc25cc0[_0x4adc3d(0x111)]!==!![])&&await _0x4ac585[_0x4adc3d(0x144)](_0x7ad866['id'],!![]),lastActions[_0x84ba9f]=_0x2af411;}}async function findRelatedId(_0xd19f64,_0x5375f7,_0x54231f=a1_0x4ffcb0(0xc1)){const _0xbf6435=a1_0x4ffcb0;if(_0x54231f===_0xbf6435(0xc1)&&_0xd19f64[_0xbf6435(0xf9)][_0xbf6435(0x131)]){let _0x395593=_0xd19f64['config']['thermostatMapping'];if(typeof _0x395593===_0xbf6435(0x182))try{_0x395593=JSON[_0xbf6435(0xed)](_0x395593);}catch(_0x5d3485){}if(_0x395593&&_0x395593[_0x5375f7])return _0x395593[_0x5375f7];}if(_0x54231f===_0xbf6435(0x162)&&_0xd19f64[_0xbf6435(0xf9)][_0xbf6435(0xc7)]){let _0x30e845=_0xd19f64[_0xbf6435(0xf9)][_0xbf6435(0xc7)];if(typeof _0x30e845===_0xbf6435(0x182))try{_0x30e845=JSON[_0xbf6435(0xed)](_0x30e845);}catch(_0x32c2c4){}if(_0x30e845&&_0x30e845[_0x5375f7])return _0x30e845[_0x5375f7];}let _0x328704=[];if(_0x54231f===_0xbf6435(0xc1))_0x328704=[{'s':_0xbf6435(0xec),'t':_0xbf6435(0xe0)},{'s':_0xbf6435(0x10a),'t':_0xbf6435(0xe0)},{'s':_0xbf6435(0x10a),'t':_0xbf6435(0x118)},{'s':_0xbf6435(0xbf),'t':_0xbf6435(0xf8)},{'s':_0xbf6435(0xee),'t':'occupied_heating_setpoint'},{'s':_0xbf6435(0xee),'t':_0xbf6435(0x142)},{'s':_0xbf6435(0xf5),'t':'target_temperature'},{'s':_0xbf6435(0x148),'t':_0xbf6435(0x14a)},{'s':_0xbf6435(0xce),'t':_0xbf6435(0x12c)},{'s':_0xbf6435(0xf5),'t':_0xbf6435(0xc1)}];else _0x54231f===_0xbf6435(0x162)&&(_0x328704=[{'s':_0xbf6435(0xec),'t':_0xbf6435(0xf2)},{'s':_0xbf6435(0x10a),'t':'.1.LEVEL'},{'s':_0xbf6435(0x10a),'t':'.4.VALVE_STATE'},{'s':_0xbf6435(0xee),'t':_0xbf6435(0xd7)},{'s':_0xbf6435(0xf5),'t':_0xbf6435(0x125)},{'s':_0xbf6435(0xf5),'t':_0xbf6435(0xc5)}]);for(const _0x47b36b of _0x328704){if(_0x5375f7['includes'](_0x47b36b['s'])){const _0x76fa1c=_0x5375f7[_0xbf6435(0xd9)](_0x47b36b['s'],_0x47b36b['t']),_0x203877=await _0xd19f64[_0xbf6435(0xc3)](_0x76fa1c);if(_0x203877)return _0x76fa1c;}}try{const _0x3cc71b=_0x5375f7['split']('.');if(_0x3cc71b['length']>0x2){const _0x23aa06=_0x3cc71b[_0xbf6435(0x132)](0x0,-0x1)[_0xbf6435(0xbe)]('.'),_0x75ad39=await _0xd19f64[_0xbf6435(0x17d)](_0x23aa06+'.*'),_0x2ad6b2=[],_0x359163=_0x5375f7[_0xbf6435(0x135)](/[._]+/)['filter'](_0x5b66dc=>![_0xbf6435(0x166),'0',_0xbf6435(0xeb),_0xbf6435(0xdb),_0xbf6435(0x129),_0xbf6435(0xf5),_0xbf6435(0x16d),'sensor',_0xbf6435(0x149),_0xbf6435(0xe8)]['includes'](_0x5b66dc['toLowerCase']()));for(const [_0x2fbd30,_0x527c44]of Object[_0xbf6435(0x13f)](_0x75ad39)){if(_0x2fbd30===_0x5375f7)continue;if(_0x527c44&&_0x527c44['common']){const _0x1b5514=_0x2fbd30[_0xbf6435(0x171)](),_0x2e9c2c=(_0x527c44[_0xbf6435(0x10d)][_0xbf6435(0x154)]||'')['toLowerCase'](),_0x2d2d65=(_0x527c44[_0xbf6435(0x10d)][_0xbf6435(0x110)]||'')[_0xbf6435(0x171)]();let _0x55b7da=![];if(_0x54231f===_0xbf6435(0xc1)&&_0x527c44[_0xbf6435(0x10d)][_0xbf6435(0x120)]===!![])_0x55b7da=_0x1b5514[_0xbf6435(0x108)](_0xbf6435(0xde))||_0x1b5514['includes'](_0xbf6435(0x158))||_0x1b5514['includes'](_0xbf6435(0x10e))||_0x2e9c2c[_0xbf6435(0x108)]('level.temperature')||_0x2e9c2c[_0xbf6435(0x108)](_0xbf6435(0xd3));else _0x54231f===_0xbf6435(0x162)&&(_0x55b7da=_0x1b5514[_0xbf6435(0x108)]('level')||_0x1b5514[_0xbf6435(0x108)](_0xbf6435(0x162))||_0x1b5514[_0xbf6435(0x108)](_0xbf6435(0x11b))||_0x1b5514[_0xbf6435(0x108)](_0xbf6435(0x117))||_0x2e9c2c[_0xbf6435(0x108)](_0xbf6435(0xe4))||_0x2e9c2c[_0xbf6435(0x108)](_0xbf6435(0x136))||_0x2d2d65[_0xbf6435(0x108)]('%'));if(_0x55b7da){const _0x29e3b5=_0x2fbd30['split'](/[._]+/)[_0xbf6435(0xe7)](_0x543de3=>_0x543de3['toLowerCase']());let _0x3a8971=0x0;_0x359163[_0xbf6435(0xc0)](_0x48d078=>{const _0x136b3f=_0xbf6435;if(_0x29e3b5[_0x136b3f(0x108)](_0x48d078[_0x136b3f(0x171)]()))_0x3a8971++;}),_0x2ad6b2[_0xbf6435(0x13c)]({'id':_0x2fbd30,'score':_0x3a8971});}}}if(_0x2ad6b2[_0xbf6435(0xc9)]>0x0){_0x2ad6b2[_0xbf6435(0x10f)]((_0x5c0fb3,_0x36ad8e)=>_0x36ad8e['score']-_0x5c0fb3[_0xbf6435(0x15a)]);if(_0x2ad6b2[0x0]['score']>0x0)return _0x2ad6b2[0x0]['id'];}}}catch(_0x7aad8b){}return null;}async function scanThermostats(_0x1245aa){const _0x5897a7=a1_0x4ffcb0,_0x35d55b=_0x1245aa[_0x5897a7(0xf9)][_0x5897a7(0x133)]||[],_0xc52f71=[],_0x4a1f1f=_0x35d55b[_0x5897a7(0xc8)](_0x5cf6e2=>_0x5cf6e2['id']&&_0x5cf6e2['id'][_0x5897a7(0x108)](_0x5897a7(0xf5))||_0x5cf6e2[_0x5897a7(0xbb)]&&[_0x5897a7(0xf5),_0x5897a7(0xc4),_0x5897a7(0x16a)][_0x5897a7(0x108)](_0x5cf6e2[_0x5897a7(0xbb)])||_0x5cf6e2[_0x5897a7(0xd8)]&&_0x5cf6e2[_0x5897a7(0xd8)][_0x5897a7(0x171)]()['includes'](_0x5897a7(0x121)));for(const _0x29583c of _0x4a1f1f){const _0x494ba5=await findRelatedId(_0x1245aa,_0x29583c['id'],_0x5897a7(0xc1)),_0x9248bd=await findRelatedId(_0x1245aa,_0x29583c['id'],_0x5897a7(0x162));let _0xd5aabd=_0x5897a7(0xf7),_0x2980ba=![],_0x41182d=_0x1245aa[_0x5897a7(0xf9)][_0x5897a7(0x131)]||{};if(typeof _0x41182d===_0x5897a7(0x182))try{_0x41182d=JSON['parse'](_0x41182d);}catch(_0x304b88){}let _0x2486de=_0x1245aa[_0x5897a7(0xf9)][_0x5897a7(0xc7)]||{};if(typeof _0x2486de===_0x5897a7(0x182))try{_0x2486de=JSON[_0x5897a7(0xed)](_0x2486de);}catch(_0xc66dd6){}if(_0x41182d[_0x29583c['id']]&&_0x41182d[_0x29583c['id']]===_0x494ba5||_0x2486de[_0x29583c['id']]&&_0x2486de[_0x29583c['id']]===_0x9248bd)_0xd5aabd='Manuelles\x20Mapping',_0x2980ba=!![];else(_0x494ba5||_0x9248bd)&&(_0xd5aabd='Auto-Erkennung');_0xc52f71[_0x5897a7(0x13c)]({'room':_0x29583c[_0x5897a7(0x141)]||_0x5897a7(0x163),'sensorId':_0x29583c['id'],'setpointId':_0x494ba5||'-','valveId':_0x9248bd||'-','source':_0xd5aabd,'isManual':_0x2980ba,'status':_0x494ba5&&_0x9248bd?_0x5897a7(0x155):_0x494ba5?'OK':_0x5897a7(0x14e)});}return _0xc52f71[_0x5897a7(0x10f)]((_0x54b0eb,_0x30c721)=>_0x54b0eb[_0x5897a7(0x156)][_0x5897a7(0xbd)](_0x30c721['room']));}async function updateSchedulePreview(_0x4805d4){const _0x2af143=a1_0x4ffcb0;if(!_0x4805d4[_0x2af143(0xf9)][_0x2af143(0x115)]||!_0x4805d4[_0x2af143(0xf9)][_0x2af143(0xff)])return;let _0x597f90={};try{const _0x302151=await _0x4805d4[_0x2af143(0xda)](_0x2af143(0x12e));if(_0x302151&&_0x302151[_0x2af143(0x111)])_0x597f90=JSON['parse'](_0x302151['val']);}catch(_0x2d540b){}const _0x7d3b7b=[],_0x2f0340=Date['now'](),_0x1a1c1e=0x30*0x3c*0x3c*0x3e8;try{const _0x475947=await _0x4805d4['getForeignStateAsync'](_0x4805d4['config'][_0x2af143(0xff)]+_0x2af143(0xe6));if(!_0x475947||!_0x475947[_0x2af143(0x111)])return;const _0x322f78=JSON['parse'](_0x475947[_0x2af143(0x111)]),_0x3adbb8=_0x4805d4['config'][_0x2af143(0xfb)]||[],_0x115b0a=_0x4805d4[_0x2af143(0xf9)]['devices']||[],_0x1c6324=new Set();_0x115b0a[_0x2af143(0xc0)](_0x2b44fa=>{const _0x2534de=_0x2af143;if(_0x2b44fa[_0x2534de(0x141)])_0x1c6324[_0x2534de(0xd6)](_0x2b44fa['location']);});for(const _0x4aa38c of _0x322f78){if(_0x4aa38c[_0x2af143(0xd5)]&&_0x3adbb8[_0x2af143(0xc9)]>0x0&&!_0x3adbb8[_0x2af143(0x108)](_0x4aa38c[_0x2af143(0xd5)]))continue;const _0x403d11=_0x4aa38c[_0x2af143(0x134)]||_0x4aa38c[_0x2af143(0x13b)]||_0x4aa38c[_0x2af143(0x16e)];if(!_0x403d11)continue;const _0x1cf8cc=new Date(_0x403d11),_0x1f757a=_0x1cf8cc[_0x2af143(0x145)]();if(isNaN(_0x1f757a))continue;if(_0x1f757a<_0x2f0340)continue;if(_0x1f757a>_0x2f0340+_0x1a1c1e)continue;const _0x1f27bc=(_0x4aa38c[_0x2af143(0xd2)]||_0x4aa38c['summary']||'')[_0x2af143(0x171)]();let _0x56949d=![],_0x4d5ae5=[],_0x1aef8d=_0x4aa38c[_0x2af143(0xd2)]||_0x4aa38c[_0x2af143(0xfa)]||_0x2af143(0x163);if(_0x1f27bc['includes'](_0x2af143(0x161))||_0x1f27bc[_0x2af143(0x108)]('rÃ¼ckkehr')||_0x1f27bc['includes'](_0x2af143(0xba)))_0x56949d=!![],_0x4d5ae5=Array[_0x2af143(0x11f)](_0x1c6324);else for(const _0x5912dd of _0x1c6324){if(_0x1f27bc[_0x2af143(0x108)](_0x5912dd['toLowerCase']()))_0x4d5ae5[_0x2af143(0x13c)](_0x5912dd);}_0x4d5ae5[_0x2af143(0xc9)]>0x0&&_0x4d5ae5[_0x2af143(0xc0)](_0x25a56b=>{const _0xfc7bcd=_0x2af143;let _0x26103e=0x3c;if(_0x56949d){let _0x24f0ff=0x0;Object['values'](_0x597f90)[_0xfc7bcd(0xc0)](_0x4625de=>{if(_0x4625de>_0x24f0ff)_0x24f0ff=_0x4625de;}),_0x26103e=_0x24f0ff>0x0?_0x24f0ff:0x78;}else _0x26103e=getWarmupRobust(_0x597f90,_0x25a56b);const _0x3c31f5=new Date(_0x1f757a-_0x26103e*0xea60);_0x7d3b7b[_0xfc7bcd(0x13c)]({'eventTime':_0x1f757a,'triggerTime':_0x3c31f5[_0xfc7bcd(0x145)](),'room':_0x25a56b,'minutes':_0x26103e,'reason':_0x1aef8d,'isGlobal':_0x56949d});});}}catch(_0x628347){}_0x7d3b7b[_0x2af143(0x10f)]((_0x56c3b4,_0x288f21)=>_0x56c3b4['triggerTime']-_0x288f21[_0x2af143(0x11a)]);const _0x33e99d=_0x7d3b7b[_0x2af143(0x132)](0x0,0x5);await _0x4805d4[_0x2af143(0x160)]('analysis.energy.schedulePreview',{'val':JSON[_0x2af143(0x102)](_0x33e99d),'ack':!![]});}async function monitorEnforcements(_0xd43087){const _0x322df7=a1_0x4ffcb0;try{const _0xdd37b9=_0x322df7(0xe3),_0xa9d5f6=await _0xd43087[_0x322df7(0xda)](_0xdd37b9);if(!_0xa9d5f6||!_0xa9d5f6['val'])return;let _0x262f9f=[];try{_0x262f9f=JSON[_0x322df7(0xed)](_0xa9d5f6[_0x322df7(0x111)]);}catch(_0x5138e9){return;}if(!Array[_0x322df7(0x180)](_0x262f9f)||_0x262f9f[_0x322df7(0xc9)]===0x0)return;const _0x29158a=Date[_0x322df7(0x12d)](),_0x518731=_0xd43087[_0x322df7(0xf9)][_0x322df7(0x133)]||[];let _0x59c9c1=![];for(let _0xe174a3=_0x262f9f[_0x322df7(0xc9)]-0x1;_0xe174a3>=0x0;_0xe174a3--){const _0x2a9750=_0x262f9f[_0xe174a3];if(_0x29158a>=_0x2a9750[_0x322df7(0x14d)]){_0xd43087['log'][_0x322df7(0xe5)](_0x322df7(0xd4)+_0x2a9750[_0x322df7(0x156)]+_0x322df7(0xcf)),_0x262f9f['splice'](_0xe174a3,0x1),_0x59c9c1=!![];continue;}const _0x17a29f=_0x518731[_0x322df7(0xe9)](_0x38abc1=>normalize(_0x38abc1['location'])===normalize(_0x2a9750['room'])&&(_0x38abc1[_0x322df7(0xbb)]===_0x322df7(0xf5)||_0x38abc1['type']===_0x322df7(0xc4)));if(_0x17a29f){const _0x4b27ff=await findRelatedId(_0xd43087,_0x17a29f['id'],'setpoint');if(_0x4b27ff){const _0x1abdab=await _0xd43087[_0x322df7(0x127)](_0x4b27ff);_0x1abdab&&typeof _0x1abdab[_0x322df7(0x111)]===_0x322df7(0x13a)&&(_0x1abdab[_0x322df7(0x111)]<0xf&&(_0xd43087[_0x322df7(0x181)][_0x322df7(0x15b)](_0x322df7(0xb9)+_0x2a9750[_0x322df7(0x156)]+_0x322df7(0xd1)+_0x1abdab[_0x322df7(0x111)]+_0x322df7(0xbc)+_0x2a9750['target']+_0x322df7(0xef)),await _0xd43087[_0x322df7(0x144)](_0x4b27ff,_0x2a9750[_0x322df7(0x10e)]),await logAutomationAction(_0xd43087,_0x322df7(0x153)+_0x2a9750['room']+':\x20'+_0x1abdab[_0x322df7(0x111)]+_0x322df7(0x104)+_0x2a9750['target']+'Â°C\x20(Kalender-Schutz)')));}}}_0x59c9c1&&await _0xd43087[_0x322df7(0x160)](_0xdd37b9,{'val':JSON[_0x322df7(0x102)](_0x262f9f),'ack':!![]});}catch(_0x22312b){_0xd43087[_0x322df7(0x181)][_0x322df7(0x124)](_0x322df7(0x157)+_0x22312b[_0x322df7(0x112)]);}}async function checkCalendarTriggers(_0x93abd){const _0x4f519e=a1_0x4ffcb0;if(!_0x93abd[_0x4f519e(0xf9)]['useCalendar']||!_0x93abd['config']['calendarInstance'])return;await updateSchedulePreview(_0x93abd);let _0x1bc6ca={},_0x22abd3={};try{const _0x22c1ab=await _0x93abd[_0x4f519e(0xda)](_0x4f519e(0x12e));if(_0x22c1ab&&_0x22c1ab[_0x4f519e(0x111)])_0x1bc6ca=JSON[_0x4f519e(0xed)](_0x22c1ab[_0x4f519e(0x111)]);const _0x5e3fea=await _0x93abd[_0x4f519e(0xda)]('analysis.energy.warmupSources');if(_0x5e3fea&&_0x5e3fea['val'])_0x22abd3=JSON[_0x4f519e(0xed)](_0x5e3fea[_0x4f519e(0x111)]);}catch(_0x9af3f9){}let _0x59b72d={'default':0x15};try{const _0x1c2831=await _0x93abd['getStateAsync'](_0x4f519e(0x12a));if(_0x1c2831&&_0x1c2831[_0x4f519e(0x111)])_0x59b72d=JSON[_0x4f519e(0xed)](_0x1c2831['val']);}catch(_0x385534){}let _0x38ab1d=[];try{const _0x5066a9=await _0x93abd[_0x4f519e(0xda)](_0x4f519e(0xe3));if(_0x5066a9&&_0x5066a9[_0x4f519e(0x111)])_0x38ab1d=JSON[_0x4f519e(0xed)](_0x5066a9['val']);}catch(_0x47d982){}try{const _0x4a2a39=await _0x93abd[_0x4f519e(0x127)](_0x93abd[_0x4f519e(0xf9)][_0x4f519e(0xff)]+_0x4f519e(0xe6));if(!_0x4a2a39||!_0x4a2a39[_0x4f519e(0x111)])return;const _0x561819=JSON[_0x4f519e(0xed)](_0x4a2a39[_0x4f519e(0x111)]),_0x4c6fe2=Date[_0x4f519e(0x12d)](),_0x2bf241=_0x93abd[_0x4f519e(0xf9)]['devices']||[],_0x223bdf=_0x93abd[_0x4f519e(0xf9)][_0x4f519e(0xfb)]||[];let _0x370997=![];for(const _0x31e408 of _0x561819){if(_0x31e408[_0x4f519e(0xd5)]&&_0x223bdf[_0x4f519e(0xc9)]>0x0&&!_0x223bdf[_0x4f519e(0x108)](_0x31e408[_0x4f519e(0xd5)]))continue;const _0x159ef2=_0x31e408[_0x4f519e(0x134)]||_0x31e408[_0x4f519e(0x13b)]||_0x31e408[_0x4f519e(0x16e)];if(!_0x159ef2)continue;const _0x44f176=new Date(_0x159ef2);if(isNaN(_0x44f176[_0x4f519e(0x145)]()))continue;const _0x4b0800=(_0x31e408[_0x4f519e(0xd2)]||_0x31e408[_0x4f519e(0xfa)]||'')['toLowerCase']();if(_0x4b0800['includes'](_0x4f519e(0x161))||_0x4b0800[_0x4f519e(0x108)](_0x4f519e(0x159))||_0x4b0800['includes']('ankunft')){let _0x27abe8=0x0;Object[_0x4f519e(0x14b)](_0x1bc6ca)[_0x4f519e(0xc0)](_0x54db61=>{if(_0x54db61>_0x27abe8)_0x27abe8=_0x54db61;});if(_0x27abe8===0x0)_0x27abe8=0x78;const _0xc928b7=_0x44f176[_0x4f519e(0x145)]()-_0x27abe8*0xea60;_0x4c6fe2>=_0xc928b7&&_0x4c6fe2<_0x44f176[_0x4f519e(0x145)]()&&(_0x93abd[_0x4f519e(0x17c)]!==_0x4f519e(0x122)&&(_0x93abd[_0x4f519e(0x181)][_0x4f519e(0xe5)]('ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20'+_0x27abe8+_0x4f519e(0x130)),await _0x93abd['setStateAsync'](_0x4f519e(0xfc),{'val':_0x4f519e(0x122),'ack':![]})));}for(const _0x406ce6 of _0x2bf241){if(_0x406ce6['location']){const _0x25619f=_0x406ce6[_0x4f519e(0x141)][_0x4f519e(0x171)](),_0x53c435=(_0x406ce6[_0x4f519e(0xd8)]||'')[_0x4f519e(0x171)]();let _0x2e7698=_0x4b0800[_0x4f519e(0x108)](_0x25619f);!_0x2e7698&&_0x53c435[_0x4f519e(0xc9)]>0x3&&_0x4b0800[_0x4f519e(0x108)](_0x53c435)&&(_0x2e7698=!![]);if(_0x2e7698){const _0xb63bec=getWarmupRobust(_0x1bc6ca,_0x406ce6['location']),_0x3a0e20=_0x22abd3[_0x406ce6[_0x4f519e(0x141)]]||_0x4f519e(0xca),_0x5363a5=_0x44f176[_0x4f519e(0x145)]()-_0xb63bec*0xea60;if(_0x4c6fe2>=_0x5363a5&&_0x4c6fe2<_0x44f176[_0x4f519e(0x145)]()){const _0x67b371=lastActions['cal_'+_0x406ce6['location']];if(_0x67b371&&_0x4c6fe2-_0x67b371<CAL_COOLDOWN_MS)continue;const _0xfc536f=await findRelatedId(_0x93abd,_0x406ce6['id'],_0x4f519e(0xc1));if(_0xfc536f){let _0x40e76c=_0x59b72d[_0x406ce6[_0x4f519e(0x141)]];if(_0x40e76c===undefined)_0x40e76c=_0x59b72d['default'];if(_0x40e76c===undefined)_0x40e76c=0x15;const _0x3e5de8=await _0x93abd['getForeignStateAsync'](_0xfc536f);if(_0x3e5de8&&typeof _0x3e5de8['val']==='number'&&_0x3e5de8[_0x4f519e(0x111)]<_0x40e76c-0.5){_0x93abd['log']['info'](_0x4f519e(0x151)+_0x3a0e20+_0x4f519e(0x106)+_0x406ce6['location']+_0x4f519e(0x113)+_0x4b0800+')\x20aktiv.\x20Heize\x20auf\x20'+_0x40e76c+'Â°C\x20(Vorlauf:\x20'+_0xb63bec+_0x4f519e(0x130)),await _0x93abd[_0x4f519e(0x144)](_0xfc536f,_0x40e76c),await logAutomationAction(_0x93abd,_0x4f519e(0x10b)+_0x406ce6[_0x4f519e(0x141)]+_0x4f519e(0x123)+_0x40e76c+_0x4f519e(0x126)+_0x3a0e20+')'),lastActions[_0x4f519e(0xf1)+_0x406ce6[_0x4f519e(0x141)]]=_0x4c6fe2;const _0x1a2603=_0x38ab1d[_0x4f519e(0x17b)](_0x5c0df1=>_0x5c0df1[_0x4f519e(0x156)]===_0x406ce6[_0x4f519e(0x141)]);if(_0x1a2603!==-0x1)_0x38ab1d[_0x4f519e(0x12f)](_0x1a2603,0x1);_0x38ab1d[_0x4f519e(0x13c)]({'room':_0x406ce6[_0x4f519e(0x141)],'target':_0x40e76c,'until':_0x44f176[_0x4f519e(0x145)]()}),_0x370997=!![];}}}}}}}_0x370997&&await _0x93abd['setStateAsync'](_0x4f519e(0xe3),{'val':JSON[_0x4f519e(0x102)](_0x38ab1d),'ack':!![]});}catch(_0x4cc8f5){_0x93abd[_0x4f519e(0x181)][_0x4f519e(0x15b)](_0x4f519e(0x107)+_0x4cc8f5[_0x4f519e(0x112)]);}}async function manageMpcIntervention(_0x3e428f,_0x5875bf,_0x1845fc){const _0x2cb155=a1_0x4ffcb0;try{const _0x119554=_0x2cb155(0x109),_0x161c5f=await _0x3e428f['getStateAsync'](_0x119554);let _0x222944=[];if(_0x161c5f&&_0x161c5f[_0x2cb155(0x111)])try{_0x222944=JSON[_0x2cb155(0xed)](_0x161c5f['val']);}catch(_0xfc32e0){}const _0x5f37c2=_0x222944[_0x2cb155(0x15c)](_0x5875bf);if(_0x1845fc===_0x2cb155(0xd6))_0x5f37c2===-0x1&&(_0x222944['push'](_0x5875bf),await _0x3e428f[_0x2cb155(0x160)](_0x119554,{'val':JSON[_0x2cb155(0x102)](_0x222944),'ack':!![]}));else _0x1845fc==='remove'&&(_0x5f37c2!==-0x1&&(_0x222944[_0x2cb155(0x12f)](_0x5f37c2,0x1),await _0x3e428f[_0x2cb155(0x160)](_0x119554,{'val':JSON[_0x2cb155(0x102)](_0x222944),'ack':!![]})));}catch(_0x285a90){}}async function cleanupGhostInterventions(_0x43d910){const _0x57c85c=a1_0x4ffcb0;try{const _0x96aaa5='analysis.energy.mpcActiveInterventions',_0x460adb=await _0x43d910[_0x57c85c(0xda)](_0x96aaa5);if(!_0x460adb||!_0x460adb[_0x57c85c(0x111)])return;const _0x422000=JSON['parse'](_0x460adb['val']);if(!Array[_0x57c85c(0x180)](_0x422000)||_0x422000[_0x57c85c(0xc9)]===0x0)return;let _0x1390e5={'default':0x15};try{const _0x4f74bf=await _0x43d910[_0x57c85c(0xda)](_0x57c85c(0x12a));if(_0x4f74bf&&_0x4f74bf[_0x57c85c(0x111)])_0x1390e5=JSON[_0x57c85c(0xed)](_0x4f74bf['val']);}catch(_0x6cb0fe){}let _0x15b429=[];try{const _0x2882c0=await _0x43d910[_0x57c85c(0xda)]('analysis.energy.ventilationAlerts');if(_0x2882c0&&_0x2882c0[_0x57c85c(0x111)])_0x15b429=JSON[_0x57c85c(0xed)](_0x2882c0['val']);}catch(_0xe7c691){}let _0x18ca1d={},_0x24e538=![];try{const _0x5d206b=await _0x43d910['getStateAsync'](_0x57c85c(0xcb));if(_0x5d206b&&_0x5d206b[_0x57c85c(0x111)])_0x18ca1d=JSON['parse'](_0x5d206b[_0x57c85c(0x111)]);}catch(_0x26e57a){}if(_0x18ca1d[_0x57c85c(0x15f)]){const _0x1152e7=Date[_0x57c85c(0x12d)]();for(const [_0x5c6f5d,_0x25bd84]of Object[_0x57c85c(0x13f)](_0x18ca1d[_0x57c85c(0x15f)])){_0x1152e7-_0x25bd84>PENALTY_TTL&&(delete _0x18ca1d[_0x5c6f5d],delete _0x18ca1d[_0x57c85c(0x15f)][_0x5c6f5d],_0x24e538=!![],_0x43d910[_0x57c85c(0x181)][_0x57c85c(0xe5)](_0x57c85c(0x179)+_0x5c6f5d+'\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.'));}}const _0x320491=_0x43d910['config'][_0x57c85c(0x133)]||[];let _0x2f127d=![];for(let _0x598112=_0x422000['length']-0x1;_0x598112>=0x0;_0x598112--){const _0x3ecfe1=_0x422000[_0x598112],_0x550ba6=_0x320491[_0x57c85c(0xe9)](_0x4f1d3f=>normalize(_0x4f1d3f[_0x57c85c(0x141)])===normalize(_0x3ecfe1)&&(_0x4f1d3f[_0x57c85c(0xbb)]===_0x57c85c(0xf5)||_0x4f1d3f['type']===_0x57c85c(0xc4)));if(!_0x550ba6){_0x43d910['log'][_0x57c85c(0x15b)](_0x57c85c(0x167)+_0x3ecfe1+_0x57c85c(0xf4)),_0x422000[_0x57c85c(0x12f)](_0x598112,0x1),_0x2f127d=!![];continue;}if(_0x550ba6){const _0x3f2f2b=await findRelatedId(_0x43d910,_0x550ba6['id'],_0x57c85c(0xc1)),_0x30a657=await _0x43d910[_0x57c85c(0x127)](_0x550ba6['id']);if(_0x3f2f2b){const _0x2d4804=await _0x43d910[_0x57c85c(0x127)](_0x3f2f2b);if(_0x2d4804&&typeof _0x2d4804[_0x57c85c(0x111)]===_0x57c85c(0x13a)){let _0x5deb6a=![],_0x395c2f='';Math[_0x57c85c(0xe1)](_0x2d4804['val']-ECO_TEMP)>0.5&&(_0x5deb6a=!![],_0x395c2f=_0x57c85c(0x116));if(!_0x5deb6a&&_0x30a657&&typeof _0x30a657[_0x57c85c(0x111)]==='number'){const _0x428d1c=_0x1390e5[_0x3ecfe1]||_0x1390e5[_0x57c85c(0x173)]||0x15;_0x30a657[_0x57c85c(0x111)]<_0x428d1c+0.2&&(_0x5deb6a=!![],_0x395c2f=_0x57c85c(0x165));}if(_0x5deb6a){if(_0x395c2f===_0x57c85c(0x116)){_0x43d910[_0x57c85c(0x181)][_0x57c85c(0xe5)]('ðŸ§¹\x20[MPC\x20CLEANUP]\x20'+_0x3ecfe1+_0x57c85c(0xd0)+_0x2d4804[_0x57c85c(0x111)]+'Â°C\x20(nicht\x20'+ECO_TEMP+'Â°C).\x20Entferne\x20Status.');const _0x54aedd=lastActions[_0x57c85c(0xf1)+_0x3ecfe1],_0x42db50=_0x54aedd&&Date[_0x57c85c(0x12d)]()-_0x54aedd<0x2*0x3c*0x3e8;if(!_0x42db50&&_0x2d4804['val']>ECO_TEMP+0.5){_0x43d910[_0x57c85c(0x14c)]&&(_0x43d910[_0x57c85c(0x181)][_0x57c85c(0xe5)]('ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20'+_0x3ecfe1+_0x57c85c(0x139)),_0x43d910[_0x57c85c(0x14c)](_0x57c85c(0x17a),{'room':_0x3ecfe1}));const _0x24dd38=_0x3ecfe1+'_'+new Date()[_0x57c85c(0x172)]();if(!_0x18ca1d[_0x24dd38]){_0x18ca1d[_0x24dd38]=0x1;if(!_0x18ca1d[_0x57c85c(0x15f)])_0x18ca1d[_0x57c85c(0x15f)]={};_0x18ca1d[_0x57c85c(0x15f)][_0x24dd38]=Date[_0x57c85c(0x12d)](),_0x24e538=!![];}}else _0x42db50&&_0x43d910[_0x57c85c(0x181)]['info'](_0x57c85c(0xcd)+_0x3ecfe1+_0x57c85c(0x11e));}else{if(_0x395c2f===_0x57c85c(0x165)){let _0x33b75d=![];if(_0x15b429['find'](_0x2dd674=>_0x2dd674['room']===_0x3ecfe1))_0x33b75d=!![];const _0x46c75d=_0x320491[_0x57c85c(0xc8)](_0x5c229d=>normalize(_0x5c229d[_0x57c85c(0x141)])===normalize(_0x3ecfe1)&&(_0x5c229d[_0x57c85c(0xbb)]===_0x57c85c(0x175)||_0x5c229d[_0x57c85c(0xbb)]===_0x57c85c(0x16a)||_0x5c229d[_0x57c85c(0xbb)]==='contact'));for(const _0x180a48 of _0x46c75d){try{const _0x132cf1=await _0x43d910[_0x57c85c(0x127)](_0x180a48['id']);if(_0x132cf1&&(_0x132cf1[_0x57c85c(0x111)]===!![]||_0x132cf1[_0x57c85c(0x111)]===0x1||String(_0x132cf1[_0x57c85c(0x111)])['toLowerCase']()===_0x57c85c(0xf3)))_0x33b75d=!![];}catch(_0x1af8b7){}}if(_0x33b75d)_0x43d910[_0x57c85c(0x181)][_0x57c85c(0xe5)](_0x57c85c(0xc2)+_0x3ecfe1+_0x57c85c(0x147));else{const _0x1a8215=_0x1390e5[_0x3ecfe1]||_0x1390e5[_0x57c85c(0x173)]||0x15;_0x43d910['log'][_0x57c85c(0xe5)](_0x57c85c(0xfd)+_0x3ecfe1+_0x57c85c(0xea)+_0x30a657[_0x57c85c(0x111)]+'Â°C\x20<\x20'+(_0x1a8215+0.2)+_0x57c85c(0x176)),await _0x43d910[_0x57c85c(0x144)](_0x3f2f2b,_0x1a8215),await logAutomationAction(_0x43d910,'[WATCHDOG]\x20'+_0x3ecfe1+_0x57c85c(0x100)+_0x1a8215+'Â°C'),lastActions[_0x57c85c(0x114)+_0x3ecfe1]=Date['now']();}}}_0x422000[_0x57c85c(0x12f)](_0x598112,0x1),_0x2f127d=!![];}}}}}_0x2f127d&&await _0x43d910[_0x57c85c(0x160)](_0x96aaa5,{'val':JSON[_0x57c85c(0x102)](_0x422000),'ack':!![]}),_0x24e538&&await _0x43d910[_0x57c85c(0x160)]('analysis.energy.rlPenalties',{'val':JSON[_0x57c85c(0x102)](_0x18ca1d),'ack':!![]});}catch(_0x1deeed){}}async function applyEnergySavings(_0xb909ed,_0x2da690){const _0x266187=a1_0x4ffcb0;await cleanupGhostInterventions(_0xb909ed);if(!_0x2da690||_0x2da690[_0x266187(0xc9)]===0x0)return;const _0x316018=_0xb909ed[_0x266187(0xf9)]['devices']||[],_0x269509=Date[_0x266187(0x12d)]();for(const _0x33b1b1 of _0x2da690){const _0x1ca711=_0x33b1b1[_0x266187(0x156)],_0x44480e=_0x33b1b1[_0x266187(0x178)],_0x369cf5=_0x33b1b1[_0x266187(0x10e)]||0x15;if(lastActions['rescue_'+_0x1ca711]&&_0x269509-lastActions[_0x266187(0x114)+_0x1ca711]<RESCUE_LOCK_MS)continue;const _0x2a8c58=_0x316018[_0x266187(0xe9)](_0x1f121c=>normalize(_0x1f121c[_0x266187(0x141)])===normalize(_0x1ca711)&&(_0x1f121c[_0x266187(0xbb)]===_0x266187(0xf5)||_0x1f121c[_0x266187(0xbb)]===_0x266187(0xc4)));if(!_0x2a8c58)continue;const _0x34a29e=await findRelatedId(_0xb909ed,_0x2a8c58['id'],_0x266187(0xc1));if(_0x34a29e){if(lastActions[_0x266187(0x103)+_0x1ca711]&&_0x269509-lastActions[_0x266187(0x103)+_0x1ca711]<0x1e*0x3c*0x3e8)continue;const _0xa1cc6c=await _0xb909ed['getForeignStateAsync'](_0x34a29e);if(_0xa1cc6c&&typeof _0xa1cc6c[_0x266187(0x111)]===_0x266187(0x13a)){const _0x24d9c3=_0xa1cc6c[_0x266187(0x111)];_0x24d9c3!==ECO_TEMP&&await manageMpcIntervention(_0xb909ed,_0x1ca711,_0x266187(0x152));if(_0x44480e>0x1e)_0x24d9c3>ECO_TEMP+0.5&&(_0xb909ed['log'][_0x266187(0xe5)](_0x266187(0x12b)+_0x1ca711+'\x20auf\x20'+ECO_TEMP+_0x266187(0x169)+_0x44480e+_0x266187(0xdf)),await _0xb909ed[_0x266187(0x144)](_0x34a29e,ECO_TEMP),await manageMpcIntervention(_0xb909ed,_0x1ca711,_0x266187(0xd6)),lastActions[_0x266187(0x103)+_0x1ca711]=_0x269509,await logAutomationAction(_0xb909ed,_0x266187(0x13d)+_0x1ca711+_0x266187(0xfe)+ECO_TEMP+'Â°C'));else _0x44480e<=0xf&&(_0x24d9c3<_0x369cf5&&(_0xb909ed[_0x266187(0x181)][_0x266187(0xe5)](_0x266187(0xf6)+_0x1ca711+'\x20wieder\x20auf\x20'+_0x369cf5+_0x266187(0xdc)),await _0xb909ed[_0x266187(0x144)](_0x34a29e,_0x369cf5),await manageMpcIntervention(_0xb909ed,_0x1ca711,'remove'),lastActions[_0x266187(0x103)+_0x1ca711]=_0x269509,await logAutomationAction(_0xb909ed,'[MPC]\x20'+_0x1ca711+':\x20Aufheizen\x20auf\x20'+_0x369cf5+'Â°C')));}}else _0xb909ed[_0x266187(0x181)][_0x266187(0x15b)](_0x266187(0x101)+_0x1ca711+'\x20gefunden!');}}module['exports']={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};