const a1_0x449f32=a1_0x4935;(function(_0x294ad4,_0x5d6a11){const _0x49d8e1=a1_0x4935,_0xd75828=_0x294ad4();while(!![]){try{const _0x3d987e=-parseInt(_0x49d8e1(0x14a))/0x1*(parseInt(_0x49d8e1(0x192))/0x2)+-parseInt(_0x49d8e1(0x19c))/0x3*(parseInt(_0x49d8e1(0x1b4))/0x4)+parseInt(_0x49d8e1(0x1b1))/0x5*(-parseInt(_0x49d8e1(0x17e))/0x6)+-parseInt(_0x49d8e1(0x1f1))/0x7+parseInt(_0x49d8e1(0x17d))/0x8*(parseInt(_0x49d8e1(0x157))/0x9)+parseInt(_0x49d8e1(0x14b))/0xa*(-parseInt(_0x49d8e1(0x158))/0xb)+parseInt(_0x49d8e1(0x19a))/0xc*(parseInt(_0x49d8e1(0x1cd))/0xd);if(_0x3d987e===_0x5d6a11)break;else _0xd75828['push'](_0xd75828['shift']());}catch(_0x160845){_0xd75828['push'](_0xd75828['shift']());}}}(a1_0x10ed,0x2308c));const a1_0xaf1e54=(function(){let _0xa39764=!![];return function(_0x49eae1,_0x40568a){const _0xdad451=_0xa39764?function(){const _0x4c2360=a1_0x4935;if(_0x40568a){const _0x2aed91=_0x40568a[_0x4c2360(0x1a4)](_0x49eae1,arguments);return _0x40568a=null,_0x2aed91;}}:function(){};return _0xa39764=![],_0xdad451;};}()),a1_0x6630f2=a1_0xaf1e54(this,function(){const _0x23eb3c=a1_0x4935;return a1_0x6630f2[_0x23eb3c(0x1b2)]()[_0x23eb3c(0x19d)](_0x23eb3c(0x140))[_0x23eb3c(0x1b2)]()['constructor'](a1_0x6630f2)[_0x23eb3c(0x19d)](_0x23eb3c(0x140));});a1_0x6630f2();'use strict';function a1_0x10ed(){const _0x3236dd=['consultButler','add','calendarSelection','message','now','1394225BOTRBO','findIndex','info','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','minutes_safe','until','getForeignObjectAsync','isArray','sort','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','\x20wurde\x20manuell\x20erh√∂ht.','mpc_','score','Unknown','slice','setStateAsync',':\x20Aufheizen\x20auf\x20','¬∞C\x20(Vorlauf:\x20','PERFECT',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','(((.+)+)+)+$','calendarInstance','triggerTime','Manuelles\x20Mapping','map','splice','analysis.energy.warmupTimes','temperature','Pr√§diktion:\x20','actual','38971JzLGSG','622360cBhRPu','indexOf','name','exports','thermostatMapping','\x20min).','_meta','\x20erreicht\x20Limit\x20(','window','¬∞C\x20(nicht\x20','ACTUAL','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','108KTagFG','22xCMjCX','sendToPythonWrapper','warn','devices','analysis.energy.warmupSources','urlaub\x20ende','Fehlt','Ist','target','trim','\x20min)','analysis.energy.mpcActiveInterventions','current_heating_setpoint','getStateAsync','manual','contact','eventStart','role','level.valve','unshift','valveMapping','rescue_','SET','temp','ist','level.temperature','soll','ACTUAL_TEMPERATURE','number','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','forEach','push','abs','¬∞C.',')\x20aktiv.\x20Heize\x20auf\x20','parse','r√ºckkehr','138136NRXTKb','534hGboJl','too_cold','¬∞C\x20(via\x20','¬∞C).\x20Entferne\x20Status.','includes','find','toUpperCase','üìÖ\x20SMART\x20SCHEDULE\x20[','config','valve','location','analysis.energy.activeEnforcements','sensor','[CAL]\x20','split','stellwert','useCalendar','approved','system.mode','\x20wieder\x20auf\x20','2sPBEHu','Unbekannt','thermostat','currentSystemMode','dimmer','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20','setForeignStateAsync','log','130308mfPnyJ','type','6wMVeZP','search','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','setpoint','filter','./ai_agent','[MPC]\x20','Enforcement\x20Monitor\x20Error:\x20','apply','length','getForeignStateAsync','valve_position','analysis.energy.schedulePreview','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','summary','¬∞C\x20->\x20','Nicht\x20gefunden','set','üî•\x20[MPC\x20ACTION]\x20Heize\x20','getTime','[WATCHDOG]\x20','5395peROeo','toString','off','448036ifyefG','values','¬∞C\x20(Kalender-Schutz)','event','.1.TEMPERATURE','error','replace','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','[FORCE]\x20','\x20ist\x20auf\x20','\x20gefunden!','¬∞C).\x20Sparmodus\x20beendet!','light','join','value.valve','analysis.energy.ventilationAlerts','level','\x20->\x20Schalte\x20','analysis.energy.rlPenalties','state','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','reason','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','.4.SET_TEMPERATURE','hm-rpc','741StMBTL','date','string','val','cal_','common','üßπ\x20[MPC\x20CLEANUP]\x20','.1.SET_POINT_TEMPERATURE','entries','position','stringify','_calName','thermostat.setpoint','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.',']:\x20Raum-Trigger\x20\x27','.data.table','.1.LEVEL','getForeignObjectsAsync','room','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','¬∞C!\x20(Puffer\x20leer).','local_temperature','default','.1.ACTUAL_TEMPERATURE','analysis.automation.mode','analysis.automation.lastAction','TRAIN_RL_PENALTY','toLowerCase','from','remove','üö®\x20[MPC\x20WATCHDOG]\x20'];a1_0x10ed=function(){return _0x3236dd;};return a1_0x10ed();}const aiAgent=require(a1_0x449f32(0x1a1)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x328697){const _0x27497c=a1_0x449f32;if(!_0x328697)return'';return _0x328697[_0x27497c(0x1e8)]()['replace'](/\s+/g,'')[_0x27497c(0x161)]();}function getWarmupRobust(_0x178460,_0x4d83a1){const _0x1b1e8e=a1_0x449f32;if(!_0x178460||!_0x4d83a1)return 0x3c;if(_0x178460[_0x4d83a1]!==undefined)return _0x178460[_0x4d83a1];const _0x51145e=_0x4d83a1[_0x1b1e8e(0x1e8)]()['replace'](/√§/g,'ae')[_0x1b1e8e(0x1ba)](/√∂/g,'oe')['replace'](/√º/g,'ue')[_0x1b1e8e(0x1ba)](/√ü/g,'ss')['replace'](/\s+/g,'_')[_0x1b1e8e(0x1ba)](/[^a-z0-9_]/g,'');if(_0x178460[_0x51145e]!==undefined)return _0x178460[_0x51145e];return 0x3c;}async function logAutomationAction(_0x498191,_0x4c3d23){const _0x5c6de7=a1_0x449f32;await _0x498191[_0x5c6de7(0x13b)](_0x5c6de7(0x1e6),{'val':_0x4c3d23,'ack':!![]});try{const _0x3e8e7e='analysis.automation.actionLog',_0x3b2511=await _0x498191['getStateAsync'](_0x3e8e7e);let _0x1d78d0=[];if(_0x3b2511&&_0x3b2511[_0x5c6de7(0x1d0)])try{_0x1d78d0=JSON[_0x5c6de7(0x17b)](_0x3b2511[_0x5c6de7(0x1d0)]);}catch(_0x44933c){}_0x1d78d0[_0x5c6de7(0x16b)]({'ts':Date[_0x5c6de7(0x1f0)](),'msg':_0x4c3d23});if(_0x1d78d0[_0x5c6de7(0x1a5)]>0x32)_0x1d78d0=_0x1d78d0[_0x5c6de7(0x13a)](0x0,0x32);await _0x498191[_0x5c6de7(0x13b)](_0x3e8e7e,{'val':JSON[_0x5c6de7(0x1d7)](_0x1d78d0),'ack':!![]});}catch(_0x5c2488){}}function a1_0x4935(_0x2b8ec1,_0x42fb98){const _0x140fc7=a1_0x10ed();return a1_0x4935=function(_0x6630f2,_0xaf1e54){_0x6630f2=_0x6630f2-0x131;let _0x10edeb=_0x140fc7[_0x6630f2];return _0x10edeb;},a1_0x4935(_0x2b8ec1,_0x42fb98);}async function handlePrediction(_0x48e580,_0x556871,_0x4eb9a3){const _0x159659=a1_0x449f32;if(!_0x556871||_0x556871===_0x159659(0x139))return;let _0x30fcbd='off',_0x281e7e=0.6;try{const _0x5b1213=await _0x48e580[_0x159659(0x165)](_0x159659(0x1e5));if(_0x5b1213&&_0x5b1213['val'])_0x30fcbd=_0x5b1213[_0x159659(0x1d0)];const _0x5f2ae=await _0x48e580[_0x159659(0x165)]('analysis.automation.confidenceThreshold');if(_0x5f2ae&&_0x5f2ae[_0x159659(0x1d0)])_0x281e7e=_0x5f2ae[_0x159659(0x1d0)];}catch(_0x25508b){}if(_0x30fcbd===_0x159659(0x1b3)||_0x4eb9a3<_0x281e7e)return;const _0x38a0de=Date[_0x159659(0x1f0)]();if(lastActions[_0x556871]&&_0x38a0de-lastActions[_0x556871]<COOLDOWN_MS)return;const _0x2d1694=_0x48e580[_0x159659(0x186)][_0x159659(0x15b)]||[],_0x4bc022=normalize(_0x556871),_0x1e8ed0=_0x2d1694[_0x159659(0x183)](_0x9b725d=>normalize(_0x9b725d[_0x159659(0x188)])===_0x4bc022&&(_0x9b725d[_0x159659(0x19b)]===_0x159659(0x1c0)||_0x9b725d[_0x159659(0x19b)]===_0x159659(0x196)||_0x9b725d[_0x159659(0x19b)]==='switch'));if(!_0x1e8ed0)return;const _0x8828cd=await aiAgent[_0x159659(0x1ec)](_0x48e580,_0x556871,_0x1e8ed0[_0x159659(0x14d)],_0x4eb9a3);if(!_0x8828cd[_0x159659(0x18f)])return;const _0x554891=_0x159659(0x148)+_0x556871+_0x159659(0x1c5)+_0x1e8ed0[_0x159659(0x14d)]+'\x20('+_0x8828cd[_0x159659(0x1c9)]+')';await logAutomationAction(_0x48e580,'['+_0x30fcbd[_0x159659(0x184)]()+']\x20'+_0x554891);if(_0x30fcbd==='active'){const _0x11cf26=await _0x48e580[_0x159659(0x1a6)](_0x1e8ed0['id']);(!_0x11cf26||!_0x11cf26[_0x159659(0x1d0)]&&_0x11cf26[_0x159659(0x1d0)]!==!![])&&await _0x48e580[_0x159659(0x198)](_0x1e8ed0['id'],!![]),lastActions[_0x556871]=_0x38a0de;}}async function findRelatedId(_0x515bf8,_0x3572c5,_0x4c3413='setpoint'){const _0x3cc0cc=a1_0x449f32;if(_0x4c3413===_0x3cc0cc(0x19f)&&_0x515bf8[_0x3cc0cc(0x186)]['thermostatMapping']){let _0x24b85b=_0x515bf8[_0x3cc0cc(0x186)][_0x3cc0cc(0x14f)];if(typeof _0x24b85b===_0x3cc0cc(0x1cf))try{_0x24b85b=JSON[_0x3cc0cc(0x17b)](_0x24b85b);}catch(_0x2f03ff){}if(_0x24b85b&&_0x24b85b[_0x3572c5])return _0x24b85b[_0x3572c5];}if(_0x4c3413===_0x3cc0cc(0x187)&&_0x515bf8[_0x3cc0cc(0x186)]['valveMapping']){let _0x252a71=_0x515bf8[_0x3cc0cc(0x186)]['valveMapping'];if(typeof _0x252a71===_0x3cc0cc(0x1cf))try{_0x252a71=JSON[_0x3cc0cc(0x17b)](_0x252a71);}catch(_0x13a1a2){}if(_0x252a71&&_0x252a71[_0x3572c5])return _0x252a71[_0x3572c5];}let _0x168d06=[];if(_0x4c3413===_0x3cc0cc(0x19f))_0x168d06=[{'s':_0x3cc0cc(0x1e4),'t':_0x3cc0cc(0x1d4)},{'s':_0x3cc0cc(0x1b8),'t':_0x3cc0cc(0x1d4)},{'s':_0x3cc0cc(0x1b8),'t':_0x3cc0cc(0x1cb)},{'s':_0x3cc0cc(0x173),'t':'SET_POINT_TEMPERATURE'},{'s':'local_temperature','t':'occupied_heating_setpoint'},{'s':_0x3cc0cc(0x1e2),'t':_0x3cc0cc(0x164)},{'s':'temperature','t':'target_temperature'},{'s':_0x3cc0cc(0x155),'t':_0x3cc0cc(0x16e)},{'s':_0x3cc0cc(0x15f),'t':'Soll'},{'s':_0x3cc0cc(0x147),'t':_0x3cc0cc(0x19f)}];else _0x4c3413===_0x3cc0cc(0x187)&&(_0x168d06=[{'s':_0x3cc0cc(0x1e4),'t':_0x3cc0cc(0x1dd)},{'s':_0x3cc0cc(0x1b8),'t':'.1.LEVEL'},{'s':_0x3cc0cc(0x1b8),'t':'.4.VALVE_STATE'},{'s':_0x3cc0cc(0x1e2),'t':'pi_heating_demand'},{'s':'temperature','t':_0x3cc0cc(0x1a7)},{'s':_0x3cc0cc(0x147),'t':_0x3cc0cc(0x1c4)}]);for(const _0x555478 of _0x168d06){if(_0x3572c5[_0x3cc0cc(0x182)](_0x555478['s'])){const _0x402555=_0x3572c5[_0x3cc0cc(0x1ba)](_0x555478['s'],_0x555478['t']),_0x4b0858=await _0x515bf8[_0x3cc0cc(0x132)](_0x402555);if(_0x4b0858)return _0x402555;}}try{const _0x49afd3=_0x3572c5['split']('.');if(_0x49afd3[_0x3cc0cc(0x1a5)]>0x2){const _0x527922=_0x49afd3[_0x3cc0cc(0x13a)](0x0,-0x1)[_0x3cc0cc(0x1c1)]('.'),_0x5592cb=await _0x515bf8[_0x3cc0cc(0x1de)](_0x527922+'.*'),_0x44d67d=[],_0x2d13f9=_0x3572c5[_0x3cc0cc(0x18c)](/[._]+/)[_0x3cc0cc(0x1a0)](_0x531966=>!['openknx','0',_0x3cc0cc(0x1cc),_0x3cc0cc(0x170),'wert','temperature',_0x3cc0cc(0x149),_0x3cc0cc(0x18a),'messwert',_0x3cc0cc(0x1c7)][_0x3cc0cc(0x182)](_0x531966[_0x3cc0cc(0x1e8)]()));for(const [_0x295f9b,_0x464f73]of Object[_0x3cc0cc(0x1d5)](_0x5592cb)){if(_0x295f9b===_0x3572c5)continue;if(_0x464f73&&_0x464f73[_0x3cc0cc(0x1d2)]){const _0x25dc90=_0x295f9b[_0x3cc0cc(0x1e8)](),_0x2b9c3d=(_0x464f73[_0x3cc0cc(0x1d2)][_0x3cc0cc(0x169)]||'')[_0x3cc0cc(0x1e8)](),_0x2f4f23=(_0x464f73['common']['unit']||'')[_0x3cc0cc(0x1e8)]();let _0x5dfd17=![];if(_0x4c3413==='setpoint'&&_0x464f73[_0x3cc0cc(0x1d2)]['write']===!![])_0x5dfd17=_0x25dc90['includes'](_0x3cc0cc(0x1ad))||_0x25dc90[_0x3cc0cc(0x182)](_0x3cc0cc(0x172))||_0x25dc90[_0x3cc0cc(0x182)](_0x3cc0cc(0x160))||_0x2b9c3d[_0x3cc0cc(0x182)](_0x3cc0cc(0x171))||_0x2b9c3d[_0x3cc0cc(0x182)](_0x3cc0cc(0x1d9));else _0x4c3413===_0x3cc0cc(0x187)&&(_0x5dfd17=_0x25dc90[_0x3cc0cc(0x182)](_0x3cc0cc(0x1c4))||_0x25dc90[_0x3cc0cc(0x182)](_0x3cc0cc(0x187))||_0x25dc90[_0x3cc0cc(0x182)](_0x3cc0cc(0x18d))||_0x25dc90['includes'](_0x3cc0cc(0x1d6))||_0x2b9c3d[_0x3cc0cc(0x182)](_0x3cc0cc(0x16a))||_0x2b9c3d['includes'](_0x3cc0cc(0x1c2))||_0x2f4f23[_0x3cc0cc(0x182)]('%'));if(_0x5dfd17){const _0x2f3625=_0x295f9b[_0x3cc0cc(0x18c)](/[._]+/)[_0x3cc0cc(0x144)](_0x416fa8=>_0x416fa8[_0x3cc0cc(0x1e8)]());let _0x33cf99=0x0;_0x2d13f9['forEach'](_0x13f9c6=>{if(_0x2f3625['includes'](_0x13f9c6['toLowerCase']()))_0x33cf99++;}),_0x44d67d['push']({'id':_0x295f9b,'score':_0x33cf99});}}}if(_0x44d67d['length']>0x0){_0x44d67d[_0x3cc0cc(0x134)]((_0xdeb4e0,_0x49eb23)=>_0x49eb23[_0x3cc0cc(0x138)]-_0xdeb4e0[_0x3cc0cc(0x138)]);if(_0x44d67d[0x0]['score']>0x0)return _0x44d67d[0x0]['id'];}}}catch(_0x304eae){}return null;}async function scanThermostats(_0x5ef32b){const _0x35e6bf=a1_0x449f32,_0xd74c85=_0x5ef32b[_0x35e6bf(0x186)][_0x35e6bf(0x15b)]||[],_0x55c20e=[],_0x1dcab0=_0xd74c85[_0x35e6bf(0x1a0)](_0x2f98cd=>_0x2f98cd['id']&&_0x2f98cd['id'][_0x35e6bf(0x182)](_0x35e6bf(0x147))||_0x2f98cd[_0x35e6bf(0x19b)]&&[_0x35e6bf(0x147),_0x35e6bf(0x194),_0x35e6bf(0x18a)][_0x35e6bf(0x182)](_0x2f98cd[_0x35e6bf(0x19b)])||_0x2f98cd[_0x35e6bf(0x14d)]&&_0x2f98cd['name']['toLowerCase']()[_0x35e6bf(0x182)](_0x35e6bf(0x16f)));for(const _0x1c132c of _0x1dcab0){const _0x53e164=await findRelatedId(_0x5ef32b,_0x1c132c['id'],_0x35e6bf(0x19f)),_0x1be652=await findRelatedId(_0x5ef32b,_0x1c132c['id'],_0x35e6bf(0x187));let _0x1ea182=_0x35e6bf(0x1ac),_0x364a0e=![],_0x49c055=_0x5ef32b[_0x35e6bf(0x186)]['thermostatMapping']||{};if(typeof _0x49c055===_0x35e6bf(0x1cf))try{_0x49c055=JSON[_0x35e6bf(0x17b)](_0x49c055);}catch(_0x16785e){}let _0x34da40=_0x5ef32b['config'][_0x35e6bf(0x16c)]||{};if(typeof _0x34da40===_0x35e6bf(0x1cf))try{_0x34da40=JSON[_0x35e6bf(0x17b)](_0x34da40);}catch(_0x14c917){}if(_0x49c055[_0x1c132c['id']]&&_0x49c055[_0x1c132c['id']]===_0x53e164||_0x34da40[_0x1c132c['id']]&&_0x34da40[_0x1c132c['id']]===_0x1be652)_0x1ea182=_0x35e6bf(0x143),_0x364a0e=!![];else(_0x53e164||_0x1be652)&&(_0x1ea182='Auto-Erkennung');_0x55c20e[_0x35e6bf(0x177)]({'room':_0x1c132c[_0x35e6bf(0x188)]||_0x35e6bf(0x193),'sensorId':_0x1c132c['id'],'setpointId':_0x53e164||'-','valveId':_0x1be652||'-','source':_0x1ea182,'isManual':_0x364a0e,'status':_0x53e164&&_0x1be652?_0x35e6bf(0x13e):_0x53e164?'OK':_0x35e6bf(0x15e)});}return _0x55c20e[_0x35e6bf(0x134)]((_0x1feb43,_0x15c8b9)=>_0x1feb43[_0x35e6bf(0x1df)]['localeCompare'](_0x15c8b9[_0x35e6bf(0x1df)]));}async function updateSchedulePreview(_0x34896b){const _0x27a017=a1_0x449f32;if(!_0x34896b[_0x27a017(0x186)][_0x27a017(0x18e)]||!_0x34896b[_0x27a017(0x186)][_0x27a017(0x141)])return;let _0x1bf0fb={};try{const _0x58e570=await _0x34896b[_0x27a017(0x165)](_0x27a017(0x146));if(_0x58e570&&_0x58e570[_0x27a017(0x1d0)])_0x1bf0fb=JSON['parse'](_0x58e570[_0x27a017(0x1d0)]);}catch(_0x28f5eb){}const _0x95d6b3=[],_0x2764a3=Date[_0x27a017(0x1f0)](),_0x5af7ed=0x30*0x3c*0x3c*0x3e8;try{const _0x410734=await _0x34896b[_0x27a017(0x1a6)](_0x34896b['config'][_0x27a017(0x141)]+_0x27a017(0x1dc));if(!_0x410734||!_0x410734[_0x27a017(0x1d0)])return;const _0x5b4bbd=JSON[_0x27a017(0x17b)](_0x410734[_0x27a017(0x1d0)]),_0x385cb1=_0x34896b[_0x27a017(0x186)]['calendarSelection']||[],_0x4f4a41=_0x34896b['config'][_0x27a017(0x15b)]||[],_0x471d52=new Set();_0x4f4a41['forEach'](_0x265be0=>{if(_0x265be0['location'])_0x471d52['add'](_0x265be0['location']);});for(const _0x2ef07a of _0x5b4bbd){if(_0x2ef07a[_0x27a017(0x1d8)]&&_0x385cb1['length']>0x0&&!_0x385cb1['includes'](_0x2ef07a['_calName']))continue;const _0x3dade4=_0x2ef07a['_date']||_0x2ef07a[_0x27a017(0x168)]||_0x2ef07a['date'];if(!_0x3dade4)continue;const _0x36fe00=new Date(_0x3dade4),_0xaaa56c=_0x36fe00[_0x27a017(0x1af)]();if(isNaN(_0xaaa56c))continue;if(_0xaaa56c<_0x2764a3)continue;if(_0xaaa56c>_0x2764a3+_0x5af7ed)continue;const _0x17b067=(_0x2ef07a['event']||_0x2ef07a[_0x27a017(0x1aa)]||'')[_0x27a017(0x1e8)]();let _0x3c533e=![],_0x1780a7=[],_0x24d4d8=_0x2ef07a['event']||_0x2ef07a[_0x27a017(0x1aa)]||'Unbekannt';if(_0x17b067[_0x27a017(0x182)](_0x27a017(0x15d))||_0x17b067['includes'](_0x27a017(0x17c))||_0x17b067['includes']('ankunft'))_0x3c533e=!![],_0x1780a7=Array[_0x27a017(0x1e9)](_0x471d52);else for(const _0x3c829c of _0x471d52){if(_0x17b067[_0x27a017(0x182)](_0x3c829c['toLowerCase']()))_0x1780a7[_0x27a017(0x177)](_0x3c829c);}_0x1780a7['length']>0x0&&_0x1780a7[_0x27a017(0x176)](_0x59df83=>{const _0xda9f80=_0x27a017;let _0x57b147=0x3c;if(_0x3c533e){let _0x1821a6=0x0;Object[_0xda9f80(0x1b5)](_0x1bf0fb)[_0xda9f80(0x176)](_0x4310a0=>{if(_0x4310a0>_0x1821a6)_0x1821a6=_0x4310a0;}),_0x57b147=_0x1821a6>0x0?_0x1821a6:0x78;}else _0x57b147=getWarmupRobust(_0x1bf0fb,_0x59df83);const _0x1d1b71=new Date(_0xaaa56c-_0x57b147*0xea60);_0x95d6b3['push']({'eventTime':_0xaaa56c,'triggerTime':_0x1d1b71['getTime'](),'room':_0x59df83,'minutes':_0x57b147,'reason':_0x24d4d8,'isGlobal':_0x3c533e});});}}catch(_0x4cee0d){}_0x95d6b3[_0x27a017(0x134)]((_0x4922d2,_0x588845)=>_0x4922d2[_0x27a017(0x142)]-_0x588845[_0x27a017(0x142)]);const _0x3fa601=_0x95d6b3['slice'](0x0,0x1e);await _0x34896b[_0x27a017(0x13b)](_0x27a017(0x1a8),{'val':JSON['stringify'](_0x3fa601),'ack':!![]});}async function monitorEnforcements(_0x1100aa){const _0x585d17=a1_0x449f32;try{const _0x4bbcd4=_0x585d17(0x189),_0x4939c5=await _0x1100aa[_0x585d17(0x165)](_0x4bbcd4);if(!_0x4939c5||!_0x4939c5[_0x585d17(0x1d0)])return;let _0x10cde1=[];try{_0x10cde1=JSON[_0x585d17(0x17b)](_0x4939c5[_0x585d17(0x1d0)]);}catch(_0xefd22b){return;}if(!Array[_0x585d17(0x133)](_0x10cde1)||_0x10cde1[_0x585d17(0x1a5)]===0x0)return;const _0x4fcc9c=Date[_0x585d17(0x1f0)](),_0x3b7a7f=_0x1100aa[_0x585d17(0x186)][_0x585d17(0x15b)]||[];let _0x49d8a8=![];for(let _0x346db6=_0x10cde1[_0x585d17(0x1a5)]-0x1;_0x346db6>=0x0;_0x346db6--){const _0x3db308=_0x10cde1[_0x346db6];if(_0x4fcc9c>=_0x3db308[_0x585d17(0x131)]){_0x1100aa[_0x585d17(0x199)][_0x585d17(0x1f3)]('üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20'+_0x3db308[_0x585d17(0x1df)]+_0x585d17(0x1ca)),_0x10cde1[_0x585d17(0x145)](_0x346db6,0x1),_0x49d8a8=!![];continue;}const _0x42835c=_0x3b7a7f[_0x585d17(0x183)](_0x2b0e96=>normalize(_0x2b0e96[_0x585d17(0x188)])===normalize(_0x3db308[_0x585d17(0x1df)])&&(_0x2b0e96[_0x585d17(0x19b)]===_0x585d17(0x147)||_0x2b0e96[_0x585d17(0x19b)]===_0x585d17(0x194)));if(_0x42835c){const _0x16576b=await findRelatedId(_0x1100aa,_0x42835c['id'],_0x585d17(0x19f));if(_0x16576b){const _0x30b0eb=await _0x1100aa[_0x585d17(0x1a6)](_0x16576b);_0x30b0eb&&typeof _0x30b0eb['val']===_0x585d17(0x174)&&(_0x30b0eb[_0x585d17(0x1d0)]<0xf&&(_0x1100aa[_0x585d17(0x199)][_0x585d17(0x15a)](_0x585d17(0x1bb)+_0x3db308['room']+'\x20auf\x20'+_0x30b0eb[_0x585d17(0x1d0)]+'¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20'+_0x3db308[_0x585d17(0x160)]+_0x585d17(0x179)),await _0x1100aa[_0x585d17(0x198)](_0x16576b,_0x3db308[_0x585d17(0x160)]),await logAutomationAction(_0x1100aa,_0x585d17(0x1bc)+_0x3db308[_0x585d17(0x1df)]+':\x20'+_0x30b0eb['val']+_0x585d17(0x1ab)+_0x3db308[_0x585d17(0x160)]+_0x585d17(0x1b6))));}}}_0x49d8a8&&await _0x1100aa[_0x585d17(0x13b)](_0x4bbcd4,{'val':JSON[_0x585d17(0x1d7)](_0x10cde1),'ack':!![]});}catch(_0x25e9b6){_0x1100aa[_0x585d17(0x199)][_0x585d17(0x1b9)](_0x585d17(0x1a3)+_0x25e9b6[_0x585d17(0x1ef)]);}}async function checkCalendarTriggers(_0x26f5ac){const _0x5cb53d=a1_0x449f32;if(!_0x26f5ac[_0x5cb53d(0x186)][_0x5cb53d(0x18e)]||!_0x26f5ac[_0x5cb53d(0x186)]['calendarInstance'])return;await updateSchedulePreview(_0x26f5ac);let _0x1a5ec7={},_0x18bed8={};try{const _0x16a467=await _0x26f5ac[_0x5cb53d(0x165)]('analysis.energy.warmupTimes');if(_0x16a467&&_0x16a467['val'])_0x1a5ec7=JSON[_0x5cb53d(0x17b)](_0x16a467[_0x5cb53d(0x1d0)]);const _0x54b076=await _0x26f5ac[_0x5cb53d(0x165)](_0x5cb53d(0x15c));if(_0x54b076&&_0x54b076[_0x5cb53d(0x1d0)])_0x18bed8=JSON[_0x5cb53d(0x17b)](_0x54b076[_0x5cb53d(0x1d0)]);}catch(_0x5824cb){}let _0x415e22={'default':0x15};try{const _0x217719=await _0x26f5ac[_0x5cb53d(0x165)]('analysis.energy.warmupTargets');if(_0x217719&&_0x217719['val'])_0x415e22=JSON[_0x5cb53d(0x17b)](_0x217719[_0x5cb53d(0x1d0)]);}catch(_0x2970ab){}let _0x258e5b=[];try{const _0x230c4e=await _0x26f5ac[_0x5cb53d(0x165)](_0x5cb53d(0x189));if(_0x230c4e&&_0x230c4e[_0x5cb53d(0x1d0)])_0x258e5b=JSON[_0x5cb53d(0x17b)](_0x230c4e[_0x5cb53d(0x1d0)]);}catch(_0x3a6684){}try{const _0x26c1b4=await _0x26f5ac[_0x5cb53d(0x1a6)](_0x26f5ac[_0x5cb53d(0x186)][_0x5cb53d(0x141)]+_0x5cb53d(0x1dc));if(!_0x26c1b4||!_0x26c1b4[_0x5cb53d(0x1d0)])return;const _0x505312=JSON[_0x5cb53d(0x17b)](_0x26c1b4['val']),_0x139f3e=Date[_0x5cb53d(0x1f0)](),_0x17fa5a=_0x26f5ac[_0x5cb53d(0x186)][_0x5cb53d(0x15b)]||[],_0x26e3ac=_0x26f5ac[_0x5cb53d(0x186)][_0x5cb53d(0x1ee)]||[];let _0x1cf3bb=![];for(const _0x569d7a of _0x505312){if(_0x569d7a['_calName']&&_0x26e3ac[_0x5cb53d(0x1a5)]>0x0&&!_0x26e3ac[_0x5cb53d(0x182)](_0x569d7a[_0x5cb53d(0x1d8)]))continue;const _0x2b17c7=_0x569d7a['_date']||_0x569d7a[_0x5cb53d(0x168)]||_0x569d7a[_0x5cb53d(0x1ce)];if(!_0x2b17c7)continue;const _0x30608c=new Date(_0x2b17c7);if(isNaN(_0x30608c['getTime']()))continue;const _0x1d3e2e=(_0x569d7a[_0x5cb53d(0x1b7)]||_0x569d7a['summary']||'')[_0x5cb53d(0x1e8)]();if(_0x1d3e2e[_0x5cb53d(0x182)](_0x5cb53d(0x15d))||_0x1d3e2e[_0x5cb53d(0x182)](_0x5cb53d(0x17c))||_0x1d3e2e[_0x5cb53d(0x182)]('ankunft')){let _0x45277e=0x0;Object[_0x5cb53d(0x1b5)](_0x1a5ec7)['forEach'](_0x244092=>{if(_0x244092>_0x45277e)_0x45277e=_0x244092;});if(_0x45277e===0x0)_0x45277e=0x78;const _0x28a8cd=_0x30608c['getTime']()-_0x45277e*0xea60;_0x139f3e>=_0x28a8cd&&_0x139f3e<_0x30608c[_0x5cb53d(0x1af)]()&&(_0x26f5ac[_0x5cb53d(0x195)]!=='normal'&&(_0x26f5ac['log'][_0x5cb53d(0x1f3)](_0x5cb53d(0x1c8)+_0x45277e+_0x5cb53d(0x150)),await _0x26f5ac['setStateAsync'](_0x5cb53d(0x190),{'val':'normal','ack':![]})));}for(const _0x73e919 of _0x17fa5a){if(_0x73e919[_0x5cb53d(0x188)]){const _0x1344a4=_0x73e919[_0x5cb53d(0x188)][_0x5cb53d(0x1e8)](),_0x2e2cf1=(_0x73e919[_0x5cb53d(0x14d)]||'')[_0x5cb53d(0x1e8)]();let _0x46d367=_0x1d3e2e[_0x5cb53d(0x182)](_0x1344a4);!_0x46d367&&_0x2e2cf1[_0x5cb53d(0x1a5)]>0x3&&_0x1d3e2e[_0x5cb53d(0x182)](_0x2e2cf1)&&(_0x46d367=!![]);if(_0x46d367){const _0x14aeec=getWarmupRobust(_0x1a5ec7,_0x73e919[_0x5cb53d(0x188)]),_0x3dfca8=_0x18bed8[_0x73e919['location']]||'Classic',_0x5d8d80=_0x30608c['getTime']()-_0x14aeec*0xea60;if(_0x139f3e>=_0x5d8d80&&_0x139f3e<_0x30608c[_0x5cb53d(0x1af)]()){const _0x584071=lastActions[_0x5cb53d(0x1d1)+_0x73e919[_0x5cb53d(0x188)]];if(_0x584071&&_0x139f3e-_0x584071<CAL_COOLDOWN_MS)continue;const _0x5ebef5=await findRelatedId(_0x26f5ac,_0x73e919['id'],_0x5cb53d(0x19f));if(_0x5ebef5){let _0x539aee=_0x415e22[_0x73e919[_0x5cb53d(0x188)]];if(_0x539aee===undefined)_0x539aee=_0x415e22['default'];if(_0x539aee===undefined)_0x539aee=0x15;const _0x38a8c1=await _0x26f5ac[_0x5cb53d(0x1a6)](_0x5ebef5);if(_0x38a8c1&&typeof _0x38a8c1[_0x5cb53d(0x1d0)]===_0x5cb53d(0x174)&&_0x38a8c1[_0x5cb53d(0x1d0)]<_0x539aee-0.5){_0x26f5ac[_0x5cb53d(0x199)][_0x5cb53d(0x1f3)](_0x5cb53d(0x185)+_0x3dfca8+_0x5cb53d(0x1db)+_0x73e919[_0x5cb53d(0x188)]+'\x27\x20(Match:\x20'+_0x1d3e2e+_0x5cb53d(0x17a)+_0x539aee+_0x5cb53d(0x13d)+_0x14aeec+_0x5cb53d(0x150)),await _0x26f5ac[_0x5cb53d(0x198)](_0x5ebef5,_0x539aee),await logAutomationAction(_0x26f5ac,_0x5cb53d(0x18b)+_0x73e919[_0x5cb53d(0x188)]+'\x20->\x20'+_0x539aee+_0x5cb53d(0x180)+_0x3dfca8+')'),lastActions[_0x5cb53d(0x1d1)+_0x73e919['location']]=_0x139f3e;const _0x43e17a=_0x258e5b[_0x5cb53d(0x1f2)](_0x2cce60=>_0x2cce60[_0x5cb53d(0x1df)]===_0x73e919[_0x5cb53d(0x188)]);if(_0x43e17a!==-0x1)_0x258e5b['splice'](_0x43e17a,0x1);_0x258e5b['push']({'room':_0x73e919['location'],'target':_0x539aee,'until':_0x30608c['getTime']()}),_0x1cf3bb=!![];}}}}}}}_0x1cf3bb&&await _0x26f5ac[_0x5cb53d(0x13b)](_0x5cb53d(0x189),{'val':JSON[_0x5cb53d(0x1d7)](_0x258e5b),'ack':!![]});}catch(_0x405781){_0x26f5ac['log'][_0x5cb53d(0x15a)]('Calendar\x20Check\x20Error:\x20'+_0x405781[_0x5cb53d(0x1ef)]);}}async function manageMpcIntervention(_0x48767a,_0x24e5b0,_0x356b82){const _0xeb61b0=a1_0x449f32;try{const _0xa7fa98=_0xeb61b0(0x163),_0x58dfe2=await _0x48767a[_0xeb61b0(0x165)](_0xa7fa98);let _0x37ab93=[];if(_0x58dfe2&&_0x58dfe2[_0xeb61b0(0x1d0)])try{_0x37ab93=JSON[_0xeb61b0(0x17b)](_0x58dfe2[_0xeb61b0(0x1d0)]);}catch(_0x49438f){}const _0x58e4c7=_0x37ab93[_0xeb61b0(0x14c)](_0x24e5b0);if(_0x356b82===_0xeb61b0(0x1ed))_0x58e4c7===-0x1&&(_0x37ab93[_0xeb61b0(0x177)](_0x24e5b0),await _0x48767a['setStateAsync'](_0xa7fa98,{'val':JSON[_0xeb61b0(0x1d7)](_0x37ab93),'ack':!![]}));else _0x356b82===_0xeb61b0(0x1ea)&&(_0x58e4c7!==-0x1&&(_0x37ab93[_0xeb61b0(0x145)](_0x58e4c7,0x1),await _0x48767a[_0xeb61b0(0x13b)](_0xa7fa98,{'val':JSON[_0xeb61b0(0x1d7)](_0x37ab93),'ack':!![]})));}catch(_0x5c093a){}}async function cleanupGhostInterventions(_0xc4b6d8){const _0x5f41b3=a1_0x449f32;try{const _0x35557a=_0x5f41b3(0x163),_0x535427=await _0xc4b6d8['getStateAsync'](_0x35557a);if(!_0x535427||!_0x535427['val'])return;const _0x1e807b=JSON['parse'](_0x535427[_0x5f41b3(0x1d0)]);if(!Array['isArray'](_0x1e807b)||_0x1e807b[_0x5f41b3(0x1a5)]===0x0)return;let _0x1a98f1={'default':0x15};try{const _0x51f33c=await _0xc4b6d8[_0x5f41b3(0x165)]('analysis.energy.warmupTargets');if(_0x51f33c&&_0x51f33c[_0x5f41b3(0x1d0)])_0x1a98f1=JSON[_0x5f41b3(0x17b)](_0x51f33c[_0x5f41b3(0x1d0)]);}catch(_0x218a0a){}let _0x2d38f8=[];try{const _0x4adca4=await _0xc4b6d8[_0x5f41b3(0x165)](_0x5f41b3(0x1c3));if(_0x4adca4&&_0x4adca4[_0x5f41b3(0x1d0)])_0x2d38f8=JSON[_0x5f41b3(0x17b)](_0x4adca4[_0x5f41b3(0x1d0)]);}catch(_0x240877){}let _0x58c30c={},_0x1b3b8a=![];try{const _0x3ea1c1=await _0xc4b6d8[_0x5f41b3(0x165)]('analysis.energy.rlPenalties');if(_0x3ea1c1&&_0x3ea1c1[_0x5f41b3(0x1d0)])_0x58c30c=JSON[_0x5f41b3(0x17b)](_0x3ea1c1[_0x5f41b3(0x1d0)]);}catch(_0x4e2029){}if(_0x58c30c[_0x5f41b3(0x151)]){const _0x3547b4=Date[_0x5f41b3(0x1f0)]();for(const [_0x2649d9,_0x1ac3d7]of Object[_0x5f41b3(0x1d5)](_0x58c30c[_0x5f41b3(0x151)])){_0x3547b4-_0x1ac3d7>PENALTY_TTL&&(delete _0x58c30c[_0x2649d9],delete _0x58c30c[_0x5f41b3(0x151)][_0x2649d9],_0x1b3b8a=!![],_0xc4b6d8[_0x5f41b3(0x199)]['info'](_0x5f41b3(0x1f4)+_0x2649d9+_0x5f41b3(0x156)));}}const _0x229553=_0xc4b6d8[_0x5f41b3(0x186)][_0x5f41b3(0x15b)]||[];let _0x3e8695=![];for(let _0x48e7ef=_0x1e807b['length']-0x1;_0x48e7ef>=0x0;_0x48e7ef--){const _0x48725c=_0x1e807b[_0x48e7ef],_0x45d8d8=_0x229553[_0x5f41b3(0x183)](_0x54e3da=>normalize(_0x54e3da[_0x5f41b3(0x188)])===normalize(_0x48725c)&&(_0x54e3da['type']===_0x5f41b3(0x147)||_0x54e3da['type']===_0x5f41b3(0x194)));if(!_0x45d8d8){_0xc4b6d8[_0x5f41b3(0x199)][_0x5f41b3(0x15a)](_0x5f41b3(0x1a9)+_0x48725c+_0x5f41b3(0x135)),_0x1e807b[_0x5f41b3(0x145)](_0x48e7ef,0x1),_0x3e8695=!![];continue;}if(_0x45d8d8){const _0x2e1643=await findRelatedId(_0xc4b6d8,_0x45d8d8['id'],_0x5f41b3(0x19f)),_0x155b9d=await _0xc4b6d8[_0x5f41b3(0x1a6)](_0x45d8d8['id']);if(_0x2e1643){const _0x29daa8=await _0xc4b6d8[_0x5f41b3(0x1a6)](_0x2e1643);if(_0x29daa8&&typeof _0x29daa8[_0x5f41b3(0x1d0)]===_0x5f41b3(0x174)){let _0xfb3b47=![],_0x258552='';Math[_0x5f41b3(0x178)](_0x29daa8['val']-ECO_TEMP)>0.5&&(_0xfb3b47=!![],_0x258552=_0x5f41b3(0x166));if(!_0xfb3b47&&_0x155b9d&&typeof _0x155b9d[_0x5f41b3(0x1d0)]===_0x5f41b3(0x174)){const _0x759634=_0x1a98f1[_0x48725c]||_0x1a98f1[_0x5f41b3(0x1e3)]||0x15;_0x155b9d[_0x5f41b3(0x1d0)]<_0x759634+0.2&&(_0xfb3b47=!![],_0x258552='too_cold');}if(_0xfb3b47){if(_0x258552===_0x5f41b3(0x166)){_0xc4b6d8[_0x5f41b3(0x199)][_0x5f41b3(0x1f3)](_0x5f41b3(0x1d3)+_0x48725c+_0x5f41b3(0x1bd)+_0x29daa8[_0x5f41b3(0x1d0)]+_0x5f41b3(0x154)+ECO_TEMP+_0x5f41b3(0x181));const _0x55a198=lastActions[_0x5f41b3(0x1d1)+_0x48725c],_0x5752fe=_0x55a198&&Date['now']()-_0x55a198<0x2*0x3c*0x3e8;if(!_0x5752fe&&_0x29daa8[_0x5f41b3(0x1d0)]>ECO_TEMP+0.5){_0xc4b6d8[_0x5f41b3(0x159)]&&(_0xc4b6d8['log'][_0x5f41b3(0x1f3)](_0x5f41b3(0x1e0)+_0x48725c+_0x5f41b3(0x136)),_0xc4b6d8[_0x5f41b3(0x159)](_0x5f41b3(0x1e7),{'room':_0x48725c}));const _0x16db85=_0x48725c+'_'+new Date()['getHours']();if(!_0x58c30c[_0x16db85]){_0x58c30c[_0x16db85]=0x1;if(!_0x58c30c[_0x5f41b3(0x151)])_0x58c30c['_meta']={};_0x58c30c[_0x5f41b3(0x151)][_0x16db85]=Date[_0x5f41b3(0x1f0)](),_0x1b3b8a=!![];}}else _0x5752fe&&_0xc4b6d8[_0x5f41b3(0x199)]['info']('üìÖ\x20[MPC\x20INFO]\x20'+_0x48725c+_0x5f41b3(0x175));}else{if(_0x258552===_0x5f41b3(0x17f)){let _0x5b6e97=![];if(_0x2d38f8[_0x5f41b3(0x183)](_0x2b01f5=>_0x2b01f5[_0x5f41b3(0x1df)]===_0x48725c))_0x5b6e97=!![];const _0x391dca=_0x229553[_0x5f41b3(0x1a0)](_0x5c1d29=>normalize(_0x5c1d29[_0x5f41b3(0x188)])===normalize(_0x48725c)&&(_0x5c1d29[_0x5f41b3(0x19b)]===_0x5f41b3(0x153)||_0x5c1d29[_0x5f41b3(0x19b)]===_0x5f41b3(0x18a)||_0x5c1d29['type']===_0x5f41b3(0x167)));for(const _0x5a9ea0 of _0x391dca){try{const _0x5ca259=await _0xc4b6d8[_0x5f41b3(0x1a6)](_0x5a9ea0['id']);if(_0x5ca259&&(_0x5ca259[_0x5f41b3(0x1d0)]===!![]||_0x5ca259[_0x5f41b3(0x1d0)]===0x1||String(_0x5ca259['val'])[_0x5f41b3(0x1e8)]()==='open'))_0x5b6e97=!![];}catch(_0xd6a59b){}}if(_0x5b6e97)_0xc4b6d8['log'][_0x5f41b3(0x1f3)]('üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20'+_0x48725c+_0x5f41b3(0x1da));else{const _0x212ede=_0x1a98f1[_0x48725c]||_0x1a98f1[_0x5f41b3(0x1e3)]||0x15;_0xc4b6d8[_0x5f41b3(0x199)]['info'](_0x5f41b3(0x1eb)+_0x48725c+_0x5f41b3(0x152)+_0x155b9d[_0x5f41b3(0x1d0)]+'¬∞C\x20<\x20'+(_0x212ede+0.2)+_0x5f41b3(0x1bf)),await _0xc4b6d8[_0x5f41b3(0x198)](_0x2e1643,_0x212ede),await logAutomationAction(_0xc4b6d8,_0x5f41b3(0x1b0)+_0x48725c+_0x5f41b3(0x13f)+_0x212ede+'¬∞C'),lastActions[_0x5f41b3(0x16d)+_0x48725c]=Date[_0x5f41b3(0x1f0)]();}}}_0x1e807b[_0x5f41b3(0x145)](_0x48e7ef,0x1),_0x3e8695=!![];}}}}}_0x3e8695&&await _0xc4b6d8[_0x5f41b3(0x13b)](_0x35557a,{'val':JSON[_0x5f41b3(0x1d7)](_0x1e807b),'ack':!![]}),_0x1b3b8a&&await _0xc4b6d8[_0x5f41b3(0x13b)](_0x5f41b3(0x1c6),{'val':JSON[_0x5f41b3(0x1d7)](_0x58c30c),'ack':!![]});}catch(_0xa8e201){}}async function applyEnergySavings(_0x53bc20,_0x4df034){const _0x372b15=a1_0x449f32;await cleanupGhostInterventions(_0x53bc20);if(!_0x4df034||_0x4df034[_0x372b15(0x1a5)]===0x0)return;const _0xaefaa2=_0x53bc20['config'][_0x372b15(0x15b)]||[],_0x18ea91=Date[_0x372b15(0x1f0)]();for(const _0x5436d9 of _0x4df034){const _0x29e2c0=_0x5436d9[_0x372b15(0x1df)],_0x3a5ff3=_0x5436d9[_0x372b15(0x1f5)],_0x390356=_0x5436d9[_0x372b15(0x160)]||0x15;if(lastActions['rescue_'+_0x29e2c0]&&_0x18ea91-lastActions[_0x372b15(0x16d)+_0x29e2c0]<RESCUE_LOCK_MS)continue;const _0x4f03d1=_0xaefaa2[_0x372b15(0x183)](_0x4de944=>normalize(_0x4de944['location'])===normalize(_0x29e2c0)&&(_0x4de944[_0x372b15(0x19b)]===_0x372b15(0x147)||_0x4de944['type']==='thermostat'));if(!_0x4f03d1)continue;const _0x337e40=await findRelatedId(_0x53bc20,_0x4f03d1['id'],_0x372b15(0x19f));if(_0x337e40){if(lastActions[_0x372b15(0x137)+_0x29e2c0]&&_0x18ea91-lastActions[_0x372b15(0x137)+_0x29e2c0]<0x1e*0x3c*0x3e8)continue;const _0x12615c=await _0x53bc20[_0x372b15(0x1a6)](_0x337e40);if(_0x12615c&&typeof _0x12615c['val']===_0x372b15(0x174)){const _0x203b83=_0x12615c[_0x372b15(0x1d0)];_0x203b83!==ECO_TEMP&&await manageMpcIntervention(_0x53bc20,_0x29e2c0,_0x372b15(0x1ea));if(_0x3a5ff3>0x1e)_0x203b83>ECO_TEMP+0.5&&(_0x53bc20[_0x372b15(0x199)][_0x372b15(0x1f3)](_0x372b15(0x197)+_0x29e2c0+'\x20auf\x20'+ECO_TEMP+'¬∞C!\x20(Puffer:\x20'+_0x3a5ff3+_0x372b15(0x162)),await _0x53bc20[_0x372b15(0x198)](_0x337e40,ECO_TEMP),await manageMpcIntervention(_0x53bc20,_0x29e2c0,_0x372b15(0x1ed)),lastActions[_0x372b15(0x137)+_0x29e2c0]=_0x18ea91,await logAutomationAction(_0x53bc20,_0x372b15(0x1a2)+_0x29e2c0+':\x20Absenkung\x20auf\x20'+ECO_TEMP+'¬∞C'));else _0x3a5ff3<=0xf&&(_0x203b83<_0x390356&&(_0x53bc20[_0x372b15(0x199)][_0x372b15(0x1f3)](_0x372b15(0x1ae)+_0x29e2c0+_0x372b15(0x191)+_0x390356+_0x372b15(0x1e1)),await _0x53bc20[_0x372b15(0x198)](_0x337e40,_0x390356),await manageMpcIntervention(_0x53bc20,_0x29e2c0,_0x372b15(0x1ea)),lastActions[_0x372b15(0x137)+_0x29e2c0]=_0x18ea91,await logAutomationAction(_0x53bc20,'[MPC]\x20'+_0x29e2c0+_0x372b15(0x13c)+_0x390356+'¬∞C')));}}else _0x53bc20[_0x372b15(0x199)]['warn'](_0x372b15(0x19e)+_0x29e2c0+_0x372b15(0x1be));}}module[a1_0x449f32(0x14e)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};