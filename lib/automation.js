const a1_0x33d2e7=a1_0x12ab;(function(_0x4453e9,_0x43ede3){const _0x3379fc=a1_0x12ab,_0x3f95c7=_0x4453e9();while(!![]){try{const _0x348937=-parseInt(_0x3379fc(0x177))/0x1*(-parseInt(_0x3379fc(0x13b))/0x2)+-parseInt(_0x3379fc(0x17a))/0x3*(-parseInt(_0x3379fc(0x175))/0x4)+-parseInt(_0x3379fc(0x17c))/0x5+-parseInt(_0x3379fc(0x15a))/0x6+-parseInt(_0x3379fc(0x191))/0x7+parseInt(_0x3379fc(0x155))/0x8+parseInt(_0x3379fc(0x1b8))/0x9*(parseInt(_0x3379fc(0x19e))/0xa);if(_0x348937===_0x43ede3)break;else _0x3f95c7['push'](_0x3f95c7['shift']());}catch(_0x4b547c){_0x3f95c7['push'](_0x3f95c7['shift']());}}}(a1_0x35ae,0xa0a0d));const a1_0x56797b=(function(){let _0x5be912=!![];return function(_0x31949c,_0x24c86d){const _0xe54697=_0x5be912?function(){const _0x31ef17=a1_0x12ab;if(_0x24c86d){const _0x56d08c=_0x24c86d[_0x31ef17(0x180)](_0x31949c,arguments);return _0x24c86d=null,_0x56d08c;}}:function(){};return _0x5be912=![],_0xe54697;};}()),a1_0x5ff52a=a1_0x56797b(this,function(){const _0x430ba8=a1_0x12ab;return a1_0x5ff52a[_0x430ba8(0x199)]()['search'](_0x430ba8(0x18c))[_0x430ba8(0x199)]()[_0x430ba8(0x124)](a1_0x5ff52a)[_0x430ba8(0x10d)](_0x430ba8(0x18c));});function a1_0x12ab(_0x561590,_0x4f3f35){const _0x26f7e4=a1_0x35ae();return a1_0x12ab=function(_0x5ff52a,_0x56797b){_0x5ff52a=_0x5ff52a-0x10d;let _0x35ae2d=_0x26f7e4[_0x5ff52a];return _0x35ae2d;},a1_0x12ab(_0x561590,_0x4f3f35);}a1_0x5ff52a();'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x5776f3){const _0x158afe=a1_0x12ab;if(!_0x5776f3)return'';return _0x5776f3['toLowerCase']()[_0x158afe(0x11b)](/\s+/g,'')[_0x158afe(0x1be)]();}function a1_0x35ae(){const _0x243145=['\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','warn','analysis.energy.warmupSources','local_temperature','Nicht\x20gefunden','rÃ¼ckkehr','28eBxFJV','Unbekannt','5gUtEyI','.1.LEVEL','calendarInstance','293013aaocpT','getForeignStateAsync','4862160ZELdDC','triggerTime','parse','val','apply','exports','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','analysis.energy.warmupTargets','minutes_safe','_date','valve_position','[CAL]\x20','analysis.energy.ventilationAlerts','normal','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','room','(((.+)+)+)+$','string','useCalendar','location','\x20->\x20','1213009kshgxb','level.valve','rescue_','[MPC]\x20','thermostat','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','Soll','config','toString','TRAIN_RL_PENALTY','write','calendarSelection','sort','6540JwRpmu','type','position','toUpperCase','now','entries','current_heating_setpoint','.1.TEMPERATURE','sensor','Â°C!\x20(Puffer:\x20','info','setpoint','manual','getTime','forEach','stringify','splice','findIndex','openknx','score','urlaub\x20ende','.4.SET_TEMPERATURE','\x27\x20(Match:\x20','mpc_','values','reason','3411ofVkDq','temperature','actual',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','Â°C.','ðŸ“…\x20SMART\x20SCHEDULE\x20[','trim','[FORCE]\x20','common','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','analysis.energy.warmupTimes','date',')\x20aktiv.\x20Heize\x20auf\x20','analysis.energy.rlPenalties','ACTUAL','active','contact','devices','search','\x20min)','_meta','indexOf','add','Â°C\x20(Vorlauf:\x20','approved','Â°C\x20(Kalender-Schutz)','\x20->\x20Schalte\x20','unit','soll','occupied_heating_setpoint','Â°C).\x20Sparmodus\x20beendet!','toLowerCase','replace','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','thermostat.setpoint','level','from','getHours','error','\x20wieder\x20auf\x20','join','constructor','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','target_temperature','analysis.energy.activeEnforcements','setForeignStateAsync','Fehlt','Manuelles\x20Mapping','wert','\x20min).','.1.ACTUAL_TEMPERATURE','switch','remove','log','default','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','valve','ACTUAL_TEMPERATURE','\x20auf\x20','find',':\x20Aufheizen\x20auf\x20','light','.1.SET_POINT_TEMPERATURE','373010BfhUki','.4.VALVE_STATE','\x20ist\x20auf\x20','name','too_cold','summary','analysis.automation.confidenceThreshold','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','event','isArray','number','split','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','setStateAsync','Â°C\x20->\x20','includes','thermostatMapping','system.mode','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','_calName','.data.table','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','Enforcement\x20Monitor\x20Error:\x20','hm-rpc','length','pi_heating_demand','1922976uDLNJm','Â°C).\x20Entferne\x20Status.','getStateAsync','Ist','getForeignObjectAsync','1804848eeduLL','ðŸ“…\x20[MPC\x20INFO]\x20','set','eventStart','analysis.energy.schedulePreview','cal_','getForeignObjectsAsync','temp','role','filter','sendToPythonWrapper','slice','valveMapping','off','analysis.automation.lastAction','ankunft','level.temperature','push','[WATCHDOG]\x20','PERFECT','target'];a1_0x35ae=function(){return _0x243145;};return a1_0x35ae();}function getWarmupRobust(_0x1f4e54,_0x3fbac8){const _0x449e12=a1_0x12ab;if(!_0x1f4e54||!_0x3fbac8)return 0x3c;if(_0x1f4e54[_0x3fbac8]!==undefined)return _0x1f4e54[_0x3fbac8];const _0x30656d=_0x3fbac8[_0x449e12(0x11a)]()[_0x449e12(0x11b)](/Ã¤/g,'ae')['replace'](/Ã¶/g,'oe')[_0x449e12(0x11b)](/Ã¼/g,'ue')[_0x449e12(0x11b)](/ÃŸ/g,'ss')[_0x449e12(0x11b)](/\s+/g,'_')[_0x449e12(0x11b)](/[^a-z0-9_]/g,'');if(_0x1f4e54[_0x30656d]!==undefined)return _0x1f4e54[_0x30656d];return 0x3c;}async function logAutomationAction(_0x1b8166,_0x4b9302){const _0x12d02e=a1_0x12ab;await _0x1b8166[_0x12d02e(0x148)](_0x12d02e(0x168),{'val':_0x4b9302,'ack':!![]});try{const _0x3e468d='analysis.automation.actionLog',_0x3ed446=await _0x1b8166['getStateAsync'](_0x3e468d);let _0x182134=[];if(_0x3ed446&&_0x3ed446[_0x12d02e(0x17f)])try{_0x182134=JSON[_0x12d02e(0x17e)](_0x3ed446[_0x12d02e(0x17f)]);}catch(_0x1766ad){}_0x182134['unshift']({'ts':Date[_0x12d02e(0x1a2)](),'msg':_0x4b9302});if(_0x182134[_0x12d02e(0x153)]>0x32)_0x182134=_0x182134['slice'](0x0,0x32);await _0x1b8166[_0x12d02e(0x148)](_0x3e468d,{'val':JSON[_0x12d02e(0x1ad)](_0x182134),'ack':!![]});}catch(_0xb3e27c){}}async function handlePrediction(_0x5e12bf,_0x25c29a,_0x4b18ee){const _0x2ec907=a1_0x12ab;if(!_0x25c29a||_0x25c29a==='Unknown')return;let _0x514a57=_0x2ec907(0x167),_0x10a480=0.6;try{const _0x168899=await _0x5e12bf[_0x2ec907(0x157)]('analysis.automation.mode');if(_0x168899&&_0x168899['val'])_0x514a57=_0x168899[_0x2ec907(0x17f)];const _0x3cb376=await _0x5e12bf[_0x2ec907(0x157)](_0x2ec907(0x141));if(_0x3cb376&&_0x3cb376[_0x2ec907(0x17f)])_0x10a480=_0x3cb376['val'];}catch(_0x421f10){}if(_0x514a57==='off'||_0x4b18ee<_0x10a480)return;const _0x27d7cb=Date[_0x2ec907(0x1a2)]();if(lastActions[_0x25c29a]&&_0x27d7cb-lastActions[_0x25c29a]<COOLDOWN_MS)return;const _0x4113c2=_0x5e12bf[_0x2ec907(0x198)][_0x2ec907(0x1c9)]||[],_0x45aeed=normalize(_0x25c29a),_0x5abba3=_0x4113c2['find'](_0x472b7c=>normalize(_0x472b7c['location'])===_0x45aeed&&(_0x472b7c[_0x2ec907(0x19f)]===_0x2ec907(0x139)||_0x472b7c[_0x2ec907(0x19f)]==='dimmer'||_0x472b7c[_0x2ec907(0x19f)]===_0x2ec907(0x12e)));if(!_0x5abba3)return;const _0x126576=await aiAgent['consultButler'](_0x5e12bf,_0x25c29a,_0x5abba3[_0x2ec907(0x13e)],_0x4b18ee);if(!_0x126576[_0x2ec907(0x113)])return;const _0x23f85c='PrÃ¤diktion:\x20'+_0x25c29a+_0x2ec907(0x115)+_0x5abba3[_0x2ec907(0x13e)]+'\x20('+_0x126576[_0x2ec907(0x1b7)]+')';await logAutomationAction(_0x5e12bf,'['+_0x514a57[_0x2ec907(0x1a1)]()+']\x20'+_0x23f85c);if(_0x514a57===_0x2ec907(0x1c7)){const _0x1014a5=await _0x5e12bf[_0x2ec907(0x17b)](_0x5abba3['id']);(!_0x1014a5||!_0x1014a5['val']&&_0x1014a5[_0x2ec907(0x17f)]!==!![])&&await _0x5e12bf[_0x2ec907(0x128)](_0x5abba3['id'],!![]),lastActions[_0x25c29a]=_0x27d7cb;}}async function findRelatedId(_0x2d2b07,_0x36275a,_0x573ab0=a1_0x33d2e7(0x1a9)){const _0x3ce9a4=a1_0x33d2e7;if(_0x573ab0===_0x3ce9a4(0x1a9)&&_0x2d2b07[_0x3ce9a4(0x198)][_0x3ce9a4(0x14b)]){let _0x2f4167=_0x2d2b07[_0x3ce9a4(0x198)]['thermostatMapping'];if(typeof _0x2f4167==='string')try{_0x2f4167=JSON[_0x3ce9a4(0x17e)](_0x2f4167);}catch(_0x211775){}if(_0x2f4167&&_0x2f4167[_0x36275a])return _0x2f4167[_0x36275a];}if(_0x573ab0==='valve'&&_0x2d2b07[_0x3ce9a4(0x198)][_0x3ce9a4(0x166)]){let _0x25db4b=_0x2d2b07[_0x3ce9a4(0x198)][_0x3ce9a4(0x166)];if(typeof _0x25db4b===_0x3ce9a4(0x18d))try{_0x25db4b=JSON[_0x3ce9a4(0x17e)](_0x25db4b);}catch(_0x3a4fd7){}if(_0x25db4b&&_0x25db4b[_0x36275a])return _0x25db4b[_0x36275a];}let _0x573791=[];if(_0x573ab0===_0x3ce9a4(0x1a9))_0x573791=[{'s':'.1.ACTUAL_TEMPERATURE','t':_0x3ce9a4(0x13a)},{'s':_0x3ce9a4(0x1a5),'t':_0x3ce9a4(0x13a)},{'s':_0x3ce9a4(0x1a5),'t':_0x3ce9a4(0x1b3)},{'s':_0x3ce9a4(0x135),'t':'SET_POINT_TEMPERATURE'},{'s':'local_temperature','t':_0x3ce9a4(0x118)},{'s':_0x3ce9a4(0x172),'t':_0x3ce9a4(0x1a4)},{'s':_0x3ce9a4(0x1b9),'t':_0x3ce9a4(0x126)},{'s':_0x3ce9a4(0x1c6),'t':'SET'},{'s':_0x3ce9a4(0x158),'t':_0x3ce9a4(0x197)},{'s':_0x3ce9a4(0x1b9),'t':'setpoint'}];else _0x573ab0===_0x3ce9a4(0x134)&&(_0x573791=[{'s':_0x3ce9a4(0x12d),'t':_0x3ce9a4(0x178)},{'s':_0x3ce9a4(0x1a5),'t':_0x3ce9a4(0x178)},{'s':_0x3ce9a4(0x1a5),'t':_0x3ce9a4(0x13c)},{'s':'local_temperature','t':_0x3ce9a4(0x154)},{'s':_0x3ce9a4(0x1b9),'t':_0x3ce9a4(0x186)},{'s':_0x3ce9a4(0x1b9),'t':_0x3ce9a4(0x11e)}]);for(const _0x4b1346 of _0x573791){if(_0x36275a[_0x3ce9a4(0x14a)](_0x4b1346['s'])){const _0x3d896a=_0x36275a['replace'](_0x4b1346['s'],_0x4b1346['t']),_0x41e660=await _0x2d2b07[_0x3ce9a4(0x159)](_0x3d896a);if(_0x41e660)return _0x3d896a;}}try{const _0x194729=_0x36275a['split']('.');if(_0x194729[_0x3ce9a4(0x153)]>0x2){const _0x4e56aa=_0x194729['slice'](0x0,-0x1)[_0x3ce9a4(0x123)]('.'),_0x126a36=await _0x2d2b07[_0x3ce9a4(0x160)](_0x4e56aa+'.*'),_0x36806b=[],_0x70121=_0x36275a[_0x3ce9a4(0x146)](/[._]+/)[_0x3ce9a4(0x163)](_0x2e2968=>![_0x3ce9a4(0x1b0),'0',_0x3ce9a4(0x152),'ist',_0x3ce9a4(0x12b),_0x3ce9a4(0x1b9),_0x3ce9a4(0x1ba),_0x3ce9a4(0x1a6),'messwert','state'][_0x3ce9a4(0x14a)](_0x2e2968[_0x3ce9a4(0x11a)]()));for(const [_0x1e1788,_0x2d95bd]of Object[_0x3ce9a4(0x1a3)](_0x126a36)){if(_0x1e1788===_0x36275a)continue;if(_0x2d95bd&&_0x2d95bd[_0x3ce9a4(0x1c0)]){const _0x29a1a9=_0x1e1788[_0x3ce9a4(0x11a)](),_0x29a761=(_0x2d95bd[_0x3ce9a4(0x1c0)][_0x3ce9a4(0x162)]||'')[_0x3ce9a4(0x11a)](),_0x813579=(_0x2d95bd[_0x3ce9a4(0x1c0)][_0x3ce9a4(0x116)]||'')[_0x3ce9a4(0x11a)]();let _0x3e9aa8=![];if(_0x573ab0==='setpoint'&&_0x2d95bd[_0x3ce9a4(0x1c0)][_0x3ce9a4(0x19b)]===!![])_0x3e9aa8=_0x29a1a9[_0x3ce9a4(0x14a)](_0x3ce9a4(0x15c))||_0x29a1a9[_0x3ce9a4(0x14a)](_0x3ce9a4(0x117))||_0x29a1a9[_0x3ce9a4(0x14a)](_0x3ce9a4(0x16e))||_0x29a761[_0x3ce9a4(0x14a)](_0x3ce9a4(0x16a))||_0x29a761[_0x3ce9a4(0x14a)](_0x3ce9a4(0x11d));else _0x573ab0==='valve'&&(_0x3e9aa8=_0x29a1a9['includes']('level')||_0x29a1a9[_0x3ce9a4(0x14a)]('valve')||_0x29a1a9[_0x3ce9a4(0x14a)]('stellwert')||_0x29a1a9['includes'](_0x3ce9a4(0x1a0))||_0x29a761[_0x3ce9a4(0x14a)](_0x3ce9a4(0x192))||_0x29a761[_0x3ce9a4(0x14a)]('value.valve')||_0x813579['includes']('%'));if(_0x3e9aa8){const _0x42a39d=_0x1e1788[_0x3ce9a4(0x146)](/[._]+/)['map'](_0x37101f=>_0x37101f[_0x3ce9a4(0x11a)]());let _0x55c900=0x0;_0x70121[_0x3ce9a4(0x1ac)](_0x30d14a=>{const _0x3bb0b0=_0x3ce9a4;if(_0x42a39d[_0x3bb0b0(0x14a)](_0x30d14a[_0x3bb0b0(0x11a)]()))_0x55c900++;}),_0x36806b[_0x3ce9a4(0x16b)]({'id':_0x1e1788,'score':_0x55c900});}}}if(_0x36806b[_0x3ce9a4(0x153)]>0x0){_0x36806b[_0x3ce9a4(0x19d)]((_0x54ff58,_0x1ce554)=>_0x1ce554[_0x3ce9a4(0x1b1)]-_0x54ff58[_0x3ce9a4(0x1b1)]);if(_0x36806b[0x0][_0x3ce9a4(0x1b1)]>0x0)return _0x36806b[0x0]['id'];}}}catch(_0x307db2){}return null;}async function scanThermostats(_0x5a3016){const _0x3a70f9=a1_0x33d2e7,_0x1aa1d4=_0x5a3016[_0x3a70f9(0x198)]['devices']||[],_0x3e05a2=[],_0x255714=_0x1aa1d4['filter'](_0x4f592b=>_0x4f592b['id']&&_0x4f592b['id'][_0x3a70f9(0x14a)](_0x3a70f9(0x1b9))||_0x4f592b[_0x3a70f9(0x19f)]&&['temperature',_0x3a70f9(0x195),'sensor'][_0x3a70f9(0x14a)](_0x4f592b[_0x3a70f9(0x19f)])||_0x4f592b[_0x3a70f9(0x13e)]&&_0x4f592b['name'][_0x3a70f9(0x11a)]()[_0x3a70f9(0x14a)](_0x3a70f9(0x161)));for(const _0x42627e of _0x255714){const _0x379d2b=await findRelatedId(_0x5a3016,_0x42627e['id'],_0x3a70f9(0x1a9)),_0x317c64=await findRelatedId(_0x5a3016,_0x42627e['id'],_0x3a70f9(0x134));let _0xf53b58=_0x3a70f9(0x173),_0x3c1044=![],_0x561e94=_0x5a3016[_0x3a70f9(0x198)]['thermostatMapping']||{};if(typeof _0x561e94===_0x3a70f9(0x18d))try{_0x561e94=JSON[_0x3a70f9(0x17e)](_0x561e94);}catch(_0x3514ad){}let _0x6c948c=_0x5a3016['config'][_0x3a70f9(0x166)]||{};if(typeof _0x6c948c===_0x3a70f9(0x18d))try{_0x6c948c=JSON['parse'](_0x6c948c);}catch(_0x25c750){}if(_0x561e94[_0x42627e['id']]&&_0x561e94[_0x42627e['id']]===_0x379d2b||_0x6c948c[_0x42627e['id']]&&_0x6c948c[_0x42627e['id']]===_0x317c64)_0xf53b58=_0x3a70f9(0x12a),_0x3c1044=!![];else(_0x379d2b||_0x317c64)&&(_0xf53b58='Auto-Erkennung');_0x3e05a2[_0x3a70f9(0x16b)]({'room':_0x42627e[_0x3a70f9(0x18f)]||_0x3a70f9(0x176),'sensorId':_0x42627e['id'],'setpointId':_0x379d2b||'-','valveId':_0x317c64||'-','source':_0xf53b58,'isManual':_0x3c1044,'status':_0x379d2b&&_0x317c64?_0x3a70f9(0x16d):_0x379d2b?'OK':_0x3a70f9(0x129)});}return _0x3e05a2['sort']((_0x588ac4,_0x473930)=>_0x588ac4[_0x3a70f9(0x18b)]['localeCompare'](_0x473930[_0x3a70f9(0x18b)]));}async function updateSchedulePreview(_0x59dc5b){const _0x190b9f=a1_0x33d2e7;if(!_0x59dc5b[_0x190b9f(0x198)][_0x190b9f(0x18e)]||!_0x59dc5b['config'][_0x190b9f(0x179)])return;let _0x1f46ee={};try{const _0x3587f5=await _0x59dc5b[_0x190b9f(0x157)](_0x190b9f(0x1c2));if(_0x3587f5&&_0x3587f5['val'])_0x1f46ee=JSON[_0x190b9f(0x17e)](_0x3587f5['val']);}catch(_0x4433ce){}const _0x254b12=[],_0x59337b=Date['now'](),_0x1a3505=0x30*0x3c*0x3c*0x3e8;try{const _0x23e482=await _0x59dc5b['getForeignStateAsync'](_0x59dc5b['config']['calendarInstance']+_0x190b9f(0x14f));if(!_0x23e482||!_0x23e482[_0x190b9f(0x17f)])return;const _0x56b79c=JSON[_0x190b9f(0x17e)](_0x23e482[_0x190b9f(0x17f)]),_0x2a3e69=_0x59dc5b[_0x190b9f(0x198)]['calendarSelection']||[],_0x1b8693=_0x59dc5b[_0x190b9f(0x198)]['devices']||[],_0xf4c1bc=new Set();_0x1b8693[_0x190b9f(0x1ac)](_0x5e5903=>{const _0x19ed36=_0x190b9f;if(_0x5e5903['location'])_0xf4c1bc[_0x19ed36(0x111)](_0x5e5903[_0x19ed36(0x18f)]);});for(const _0x831fc5 of _0x56b79c){if(_0x831fc5['_calName']&&_0x2a3e69[_0x190b9f(0x153)]>0x0&&!_0x2a3e69[_0x190b9f(0x14a)](_0x831fc5[_0x190b9f(0x14e)]))continue;const _0x3bce70=_0x831fc5[_0x190b9f(0x185)]||_0x831fc5[_0x190b9f(0x15d)]||_0x831fc5[_0x190b9f(0x1c3)];if(!_0x3bce70)continue;const _0x2a5b4d=new Date(_0x3bce70),_0x46001a=_0x2a5b4d[_0x190b9f(0x1ab)]();if(isNaN(_0x46001a))continue;if(_0x46001a<_0x59337b)continue;if(_0x46001a>_0x59337b+_0x1a3505)continue;const _0x2f3e71=(_0x831fc5[_0x190b9f(0x143)]||_0x831fc5[_0x190b9f(0x140)]||'')[_0x190b9f(0x11a)]();let _0x675c89=![],_0x337d42=[],_0x5da96e=_0x831fc5['event']||_0x831fc5[_0x190b9f(0x140)]||_0x190b9f(0x176);if(_0x2f3e71[_0x190b9f(0x14a)](_0x190b9f(0x1b2))||_0x2f3e71['includes']('rÃ¼ckkehr')||_0x2f3e71[_0x190b9f(0x14a)](_0x190b9f(0x169)))_0x675c89=!![],_0x337d42=Array[_0x190b9f(0x11f)](_0xf4c1bc);else for(const _0x6727ca of _0xf4c1bc){if(_0x2f3e71['includes'](_0x6727ca[_0x190b9f(0x11a)]()))_0x337d42[_0x190b9f(0x16b)](_0x6727ca);}_0x337d42[_0x190b9f(0x153)]>0x0&&_0x337d42[_0x190b9f(0x1ac)](_0x27e77e=>{const _0x39f747=_0x190b9f;let _0x25592f=0x3c;if(_0x675c89){let _0x1032d2=0x0;Object[_0x39f747(0x1b6)](_0x1f46ee)[_0x39f747(0x1ac)](_0x1d11f0=>{if(_0x1d11f0>_0x1032d2)_0x1032d2=_0x1d11f0;}),_0x25592f=_0x1032d2>0x0?_0x1032d2:0x78;}else _0x25592f=getWarmupRobust(_0x1f46ee,_0x27e77e);const _0x2e0195=new Date(_0x46001a-_0x25592f*0xea60);_0x254b12[_0x39f747(0x16b)]({'eventTime':_0x46001a,'triggerTime':_0x2e0195['getTime'](),'room':_0x27e77e,'minutes':_0x25592f,'reason':_0x5da96e,'isGlobal':_0x675c89});});}}catch(_0x3f91a8){}_0x254b12[_0x190b9f(0x19d)]((_0xe955be,_0xe51dfd)=>_0xe955be['triggerTime']-_0xe51dfd[_0x190b9f(0x17d)]);const _0x1cd1b4=_0x254b12[_0x190b9f(0x165)](0x0,0x5);await _0x59dc5b[_0x190b9f(0x148)](_0x190b9f(0x15e),{'val':JSON['stringify'](_0x1cd1b4),'ack':!![]});}async function monitorEnforcements(_0x285b4d){const _0xbda979=a1_0x33d2e7;try{const _0x11df7f='analysis.energy.activeEnforcements',_0x1f67ac=await _0x285b4d['getStateAsync'](_0x11df7f);if(!_0x1f67ac||!_0x1f67ac[_0xbda979(0x17f)])return;let _0x254d40=[];try{_0x254d40=JSON['parse'](_0x1f67ac[_0xbda979(0x17f)]);}catch(_0x3ae88c){return;}if(!Array[_0xbda979(0x144)](_0x254d40)||_0x254d40[_0xbda979(0x153)]===0x0)return;const _0x1c2b70=Date[_0xbda979(0x1a2)](),_0x1c930e=_0x285b4d[_0xbda979(0x198)][_0xbda979(0x1c9)]||[];let _0x195ca7=![];for(let _0x319e3b=_0x254d40[_0xbda979(0x153)]-0x1;_0x319e3b>=0x0;_0x319e3b--){const _0x417b8b=_0x254d40[_0x319e3b];if(_0x1c2b70>=_0x417b8b['until']){_0x285b4d[_0xbda979(0x130)]['info'](_0xbda979(0x18a)+_0x417b8b[_0xbda979(0x18b)]+'\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.'),_0x254d40[_0xbda979(0x1ae)](_0x319e3b,0x1),_0x195ca7=!![];continue;}const _0xc18cd8=_0x1c930e[_0xbda979(0x137)](_0xbcfb03=>normalize(_0xbcfb03['location'])===normalize(_0x417b8b[_0xbda979(0x18b)])&&(_0xbcfb03[_0xbda979(0x19f)]===_0xbda979(0x1b9)||_0xbcfb03['type']===_0xbda979(0x195)));if(_0xc18cd8){const _0x558689=await findRelatedId(_0x285b4d,_0xc18cd8['id'],_0xbda979(0x1a9));if(_0x558689){const _0x43a3e9=await _0x285b4d[_0xbda979(0x17b)](_0x558689);_0x43a3e9&&typeof _0x43a3e9[_0xbda979(0x17f)]===_0xbda979(0x145)&&(_0x43a3e9[_0xbda979(0x17f)]<0xf&&(_0x285b4d[_0xbda979(0x130)][_0xbda979(0x170)]('ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x417b8b[_0xbda979(0x18b)]+_0xbda979(0x136)+_0x43a3e9['val']+_0xbda979(0x132)+_0x417b8b[_0xbda979(0x16e)]+_0xbda979(0x1bc)),await _0x285b4d['setForeignStateAsync'](_0x558689,_0x417b8b[_0xbda979(0x16e)]),await logAutomationAction(_0x285b4d,_0xbda979(0x1bf)+_0x417b8b['room']+':\x20'+_0x43a3e9[_0xbda979(0x17f)]+_0xbda979(0x149)+_0x417b8b[_0xbda979(0x16e)]+_0xbda979(0x114))));}}}_0x195ca7&&await _0x285b4d[_0xbda979(0x148)](_0x11df7f,{'val':JSON[_0xbda979(0x1ad)](_0x254d40),'ack':!![]});}catch(_0xa28302){_0x285b4d[_0xbda979(0x130)][_0xbda979(0x121)](_0xbda979(0x151)+_0xa28302['message']);}}async function checkCalendarTriggers(_0x4fd7a7){const _0x358daa=a1_0x33d2e7;if(!_0x4fd7a7[_0x358daa(0x198)][_0x358daa(0x18e)]||!_0x4fd7a7[_0x358daa(0x198)][_0x358daa(0x179)])return;await updateSchedulePreview(_0x4fd7a7);let _0x66787d={},_0x50eba5={};try{const _0x4df8a5=await _0x4fd7a7[_0x358daa(0x157)](_0x358daa(0x1c2));if(_0x4df8a5&&_0x4df8a5[_0x358daa(0x17f)])_0x66787d=JSON[_0x358daa(0x17e)](_0x4df8a5[_0x358daa(0x17f)]);const _0x514665=await _0x4fd7a7['getStateAsync'](_0x358daa(0x171));if(_0x514665&&_0x514665[_0x358daa(0x17f)])_0x50eba5=JSON[_0x358daa(0x17e)](_0x514665[_0x358daa(0x17f)]);}catch(_0x5b2fd6){}let _0x5c61c1={'default':0x15};try{const _0x1b6e6=await _0x4fd7a7[_0x358daa(0x157)](_0x358daa(0x183));if(_0x1b6e6&&_0x1b6e6[_0x358daa(0x17f)])_0x5c61c1=JSON[_0x358daa(0x17e)](_0x1b6e6[_0x358daa(0x17f)]);}catch(_0x7d053e){}let _0x3f4324=[];try{const _0x450e3f=await _0x4fd7a7['getStateAsync'](_0x358daa(0x127));if(_0x450e3f&&_0x450e3f[_0x358daa(0x17f)])_0x3f4324=JSON[_0x358daa(0x17e)](_0x450e3f['val']);}catch(_0x57940c){}try{const _0x55fea0=await _0x4fd7a7[_0x358daa(0x17b)](_0x4fd7a7['config'][_0x358daa(0x179)]+_0x358daa(0x14f));if(!_0x55fea0||!_0x55fea0['val'])return;const _0x1857be=JSON[_0x358daa(0x17e)](_0x55fea0['val']),_0x45337b=Date[_0x358daa(0x1a2)](),_0x381e22=_0x4fd7a7[_0x358daa(0x198)][_0x358daa(0x1c9)]||[],_0x22ca62=_0x4fd7a7[_0x358daa(0x198)][_0x358daa(0x19c)]||[];let _0x107d09=![];for(const _0x506c1f of _0x1857be){if(_0x506c1f['_calName']&&_0x22ca62[_0x358daa(0x153)]>0x0&&!_0x22ca62[_0x358daa(0x14a)](_0x506c1f[_0x358daa(0x14e)]))continue;const _0x5b2ed9=_0x506c1f[_0x358daa(0x185)]||_0x506c1f['eventStart']||_0x506c1f[_0x358daa(0x1c3)];if(!_0x5b2ed9)continue;const _0x6a77d1=new Date(_0x5b2ed9);if(isNaN(_0x6a77d1[_0x358daa(0x1ab)]()))continue;const _0x5cb4e1=(_0x506c1f['event']||_0x506c1f[_0x358daa(0x140)]||'')['toLowerCase']();if(_0x5cb4e1[_0x358daa(0x14a)](_0x358daa(0x1b2))||_0x5cb4e1[_0x358daa(0x14a)](_0x358daa(0x174))||_0x5cb4e1[_0x358daa(0x14a)](_0x358daa(0x169))){let _0x513a5e=0x0;Object['values'](_0x66787d)[_0x358daa(0x1ac)](_0x2a815c=>{if(_0x2a815c>_0x513a5e)_0x513a5e=_0x2a815c;});if(_0x513a5e===0x0)_0x513a5e=0x78;const _0x18ecb6=_0x6a77d1[_0x358daa(0x1ab)]()-_0x513a5e*0xea60;_0x45337b>=_0x18ecb6&&_0x45337b<_0x6a77d1[_0x358daa(0x1ab)]()&&(_0x4fd7a7['currentSystemMode']!==_0x358daa(0x189)&&(_0x4fd7a7[_0x358daa(0x130)]['info']('ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20'+_0x513a5e+_0x358daa(0x12c)),await _0x4fd7a7[_0x358daa(0x148)](_0x358daa(0x14c),{'val':_0x358daa(0x189),'ack':![]})));}for(const _0x13435a of _0x381e22){if(_0x13435a[_0x358daa(0x18f)]){const _0x20f7c3=_0x13435a[_0x358daa(0x18f)][_0x358daa(0x11a)](),_0x101650=(_0x13435a[_0x358daa(0x13e)]||'')[_0x358daa(0x11a)]();let _0x4cfe77=_0x5cb4e1['includes'](_0x20f7c3);!_0x4cfe77&&_0x101650[_0x358daa(0x153)]>0x3&&_0x5cb4e1[_0x358daa(0x14a)](_0x101650)&&(_0x4cfe77=!![]);if(_0x4cfe77){const _0x22c7f6=getWarmupRobust(_0x66787d,_0x13435a[_0x358daa(0x18f)]),_0x5c8a01=_0x50eba5[_0x13435a[_0x358daa(0x18f)]]||'Classic',_0x18c9df=_0x6a77d1[_0x358daa(0x1ab)]()-_0x22c7f6*0xea60;if(_0x45337b>=_0x18c9df&&_0x45337b<_0x6a77d1[_0x358daa(0x1ab)]()){const _0x47c8de=lastActions[_0x358daa(0x15f)+_0x13435a['location']];if(_0x47c8de&&_0x45337b-_0x47c8de<CAL_COOLDOWN_MS)continue;const _0x24aa48=await findRelatedId(_0x4fd7a7,_0x13435a['id'],_0x358daa(0x1a9));if(_0x24aa48){let _0xfcfccd=_0x5c61c1[_0x13435a[_0x358daa(0x18f)]];if(_0xfcfccd===undefined)_0xfcfccd=_0x5c61c1[_0x358daa(0x131)];if(_0xfcfccd===undefined)_0xfcfccd=0x15;const _0x940cd=await _0x4fd7a7[_0x358daa(0x17b)](_0x24aa48);if(_0x940cd&&typeof _0x940cd[_0x358daa(0x17f)]==='number'&&_0x940cd[_0x358daa(0x17f)]<_0xfcfccd-0.5){_0x4fd7a7['log'][_0x358daa(0x1a8)](_0x358daa(0x1bd)+_0x5c8a01+']:\x20Raum-Trigger\x20\x27'+_0x13435a[_0x358daa(0x18f)]+_0x358daa(0x1b4)+_0x5cb4e1+_0x358daa(0x1c4)+_0xfcfccd+_0x358daa(0x112)+_0x22c7f6+'\x20min).'),await _0x4fd7a7[_0x358daa(0x128)](_0x24aa48,_0xfcfccd),await logAutomationAction(_0x4fd7a7,_0x358daa(0x187)+_0x13435a[_0x358daa(0x18f)]+_0x358daa(0x190)+_0xfcfccd+'Â°C\x20(via\x20'+_0x5c8a01+')'),lastActions[_0x358daa(0x15f)+_0x13435a[_0x358daa(0x18f)]]=_0x45337b;const _0x4cf84f=_0x3f4324[_0x358daa(0x1af)](_0x40377e=>_0x40377e['room']===_0x13435a[_0x358daa(0x18f)]);if(_0x4cf84f!==-0x1)_0x3f4324['splice'](_0x4cf84f,0x1);_0x3f4324[_0x358daa(0x16b)]({'room':_0x13435a[_0x358daa(0x18f)],'target':_0xfcfccd,'until':_0x6a77d1['getTime']()}),_0x107d09=!![];}}}}}}}_0x107d09&&await _0x4fd7a7[_0x358daa(0x148)]('analysis.energy.activeEnforcements',{'val':JSON[_0x358daa(0x1ad)](_0x3f4324),'ack':!![]});}catch(_0x14395f){_0x4fd7a7[_0x358daa(0x130)][_0x358daa(0x170)]('Calendar\x20Check\x20Error:\x20'+_0x14395f['message']);}}async function manageMpcIntervention(_0x39cfa8,_0x4ae524,_0x2662d2){const _0x57fb67=a1_0x33d2e7;try{const _0x22a9cf='analysis.energy.mpcActiveInterventions',_0x201fb0=await _0x39cfa8['getStateAsync'](_0x22a9cf);let _0x2e3d29=[];if(_0x201fb0&&_0x201fb0[_0x57fb67(0x17f)])try{_0x2e3d29=JSON[_0x57fb67(0x17e)](_0x201fb0[_0x57fb67(0x17f)]);}catch(_0x163a8e){}const _0x273107=_0x2e3d29[_0x57fb67(0x110)](_0x4ae524);if(_0x2662d2===_0x57fb67(0x111))_0x273107===-0x1&&(_0x2e3d29['push'](_0x4ae524),await _0x39cfa8[_0x57fb67(0x148)](_0x22a9cf,{'val':JSON['stringify'](_0x2e3d29),'ack':!![]}));else _0x2662d2==='remove'&&(_0x273107!==-0x1&&(_0x2e3d29[_0x57fb67(0x1ae)](_0x273107,0x1),await _0x39cfa8['setStateAsync'](_0x22a9cf,{'val':JSON[_0x57fb67(0x1ad)](_0x2e3d29),'ack':!![]})));}catch(_0x5773fb){}}async function cleanupGhostInterventions(_0x137986){const _0x13aaf0=a1_0x33d2e7;try{const _0x1583f9='analysis.energy.mpcActiveInterventions',_0x5776d2=await _0x137986['getStateAsync'](_0x1583f9);if(!_0x5776d2||!_0x5776d2['val'])return;const _0x687d13=JSON[_0x13aaf0(0x17e)](_0x5776d2[_0x13aaf0(0x17f)]);if(!Array['isArray'](_0x687d13)||_0x687d13[_0x13aaf0(0x153)]===0x0)return;let _0x16d4ab={'default':0x15};try{const _0x4f32bb=await _0x137986['getStateAsync'](_0x13aaf0(0x183));if(_0x4f32bb&&_0x4f32bb['val'])_0x16d4ab=JSON[_0x13aaf0(0x17e)](_0x4f32bb['val']);}catch(_0x315a98){}let _0x5186c1=[];try{const _0xfd3df=await _0x137986[_0x13aaf0(0x157)](_0x13aaf0(0x188));if(_0xfd3df&&_0xfd3df['val'])_0x5186c1=JSON[_0x13aaf0(0x17e)](_0xfd3df[_0x13aaf0(0x17f)]);}catch(_0x24dc99){}let _0x2e0db4={},_0x1387ad=![];try{const _0x2b97b3=await _0x137986[_0x13aaf0(0x157)](_0x13aaf0(0x1c5));if(_0x2b97b3&&_0x2b97b3[_0x13aaf0(0x17f)])_0x2e0db4=JSON[_0x13aaf0(0x17e)](_0x2b97b3['val']);}catch(_0x5a363e){}if(_0x2e0db4['_meta']){const _0x2aaf3b=Date[_0x13aaf0(0x1a2)]();for(const [_0x1ea87a,_0x3b9d70]of Object[_0x13aaf0(0x1a3)](_0x2e0db4['_meta'])){_0x2aaf3b-_0x3b9d70>PENALTY_TTL&&(delete _0x2e0db4[_0x1ea87a],delete _0x2e0db4[_0x13aaf0(0x10f)][_0x1ea87a],_0x1387ad=!![],_0x137986[_0x13aaf0(0x130)][_0x13aaf0(0x1a8)]('ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27'+_0x1ea87a+_0x13aaf0(0x125)));}}const _0x4c0051=_0x137986[_0x13aaf0(0x198)][_0x13aaf0(0x1c9)]||[];let _0x5628c3=![];for(let _0xfb6924=_0x687d13[_0x13aaf0(0x153)]-0x1;_0xfb6924>=0x0;_0xfb6924--){const _0x1a1699=_0x687d13[_0xfb6924],_0xeaa4d4=_0x4c0051[_0x13aaf0(0x137)](_0xde91eb=>normalize(_0xde91eb['location'])===normalize(_0x1a1699)&&(_0xde91eb[_0x13aaf0(0x19f)]===_0x13aaf0(0x1b9)||_0xde91eb[_0x13aaf0(0x19f)]==='thermostat'));if(!_0xeaa4d4){_0x137986[_0x13aaf0(0x130)][_0x13aaf0(0x170)](_0x13aaf0(0x142)+_0x1a1699+_0x13aaf0(0x16f)),_0x687d13[_0x13aaf0(0x1ae)](_0xfb6924,0x1),_0x5628c3=!![];continue;}if(_0xeaa4d4){const _0x178c9a=await findRelatedId(_0x137986,_0xeaa4d4['id'],_0x13aaf0(0x1a9)),_0x5a875d=await _0x137986[_0x13aaf0(0x17b)](_0xeaa4d4['id']);if(_0x178c9a){const _0x1b9c8b=await _0x137986[_0x13aaf0(0x17b)](_0x178c9a);if(_0x1b9c8b&&typeof _0x1b9c8b[_0x13aaf0(0x17f)]==='number'){let _0x3bee03=![],_0xc2bedf='';Math['abs'](_0x1b9c8b[_0x13aaf0(0x17f)]-ECO_TEMP)>0.5&&(_0x3bee03=!![],_0xc2bedf=_0x13aaf0(0x1aa));if(!_0x3bee03&&_0x5a875d&&typeof _0x5a875d[_0x13aaf0(0x17f)]===_0x13aaf0(0x145)){const _0x2f80d4=_0x16d4ab[_0x1a1699]||_0x16d4ab[_0x13aaf0(0x131)]||0x15;_0x5a875d[_0x13aaf0(0x17f)]<_0x2f80d4+0.2&&(_0x3bee03=!![],_0xc2bedf='too_cold');}if(_0x3bee03){if(_0xc2bedf===_0x13aaf0(0x1aa)){_0x137986[_0x13aaf0(0x130)][_0x13aaf0(0x1a8)](_0x13aaf0(0x196)+_0x1a1699+_0x13aaf0(0x13d)+_0x1b9c8b['val']+'Â°C\x20(nicht\x20'+ECO_TEMP+_0x13aaf0(0x156));const _0x5698d8=lastActions[_0x13aaf0(0x15f)+_0x1a1699],_0x351b47=_0x5698d8&&Date[_0x13aaf0(0x1a2)]()-_0x5698d8<0x2*0x3c*0x3e8;if(!_0x351b47&&_0x1b9c8b[_0x13aaf0(0x17f)]>ECO_TEMP+0.5){_0x137986[_0x13aaf0(0x164)]&&(_0x137986[_0x13aaf0(0x130)][_0x13aaf0(0x1a8)](_0x13aaf0(0x182)+_0x1a1699+'\x20wurde\x20manuell\x20erhÃ¶ht.'),_0x137986[_0x13aaf0(0x164)](_0x13aaf0(0x19a),{'room':_0x1a1699}));const _0x2182a4=_0x1a1699+'_'+new Date()[_0x13aaf0(0x120)]();if(!_0x2e0db4[_0x2182a4]){_0x2e0db4[_0x2182a4]=0x1;if(!_0x2e0db4[_0x13aaf0(0x10f)])_0x2e0db4[_0x13aaf0(0x10f)]={};_0x2e0db4['_meta'][_0x2182a4]=Date[_0x13aaf0(0x1a2)](),_0x1387ad=!![];}}else _0x351b47&&_0x137986[_0x13aaf0(0x130)]['info'](_0x13aaf0(0x15b)+_0x1a1699+'\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.');}else{if(_0xc2bedf===_0x13aaf0(0x13f)){let _0x2f383f=![];if(_0x5186c1['find'](_0x3d32cd=>_0x3d32cd[_0x13aaf0(0x18b)]===_0x1a1699))_0x2f383f=!![];const _0x55deeb=_0x4c0051[_0x13aaf0(0x163)](_0x312056=>normalize(_0x312056['location'])===normalize(_0x1a1699)&&(_0x312056['type']==='window'||_0x312056[_0x13aaf0(0x19f)]===_0x13aaf0(0x1a6)||_0x312056[_0x13aaf0(0x19f)]===_0x13aaf0(0x1c8)));for(const _0x3bb017 of _0x55deeb){try{const _0x5632b7=await _0x137986[_0x13aaf0(0x17b)](_0x3bb017['id']);if(_0x5632b7&&(_0x5632b7[_0x13aaf0(0x17f)]===!![]||_0x5632b7[_0x13aaf0(0x17f)]===0x1||String(_0x5632b7[_0x13aaf0(0x17f)])[_0x13aaf0(0x11a)]()==='open'))_0x2f383f=!![];}catch(_0x402436){}}if(_0x2f383f)_0x137986['log'][_0x13aaf0(0x1a8)](_0x13aaf0(0x133)+_0x1a1699+_0x13aaf0(0x147));else{const _0x149016=_0x16d4ab[_0x1a1699]||_0x16d4ab[_0x13aaf0(0x131)]||0x15;_0x137986['log']['info'](_0x13aaf0(0x1c1)+_0x1a1699+'\x20erreicht\x20Limit\x20('+_0x5a875d[_0x13aaf0(0x17f)]+'Â°C\x20<\x20'+(_0x149016+0.2)+_0x13aaf0(0x119)),await _0x137986[_0x13aaf0(0x128)](_0x178c9a,_0x149016),await logAutomationAction(_0x137986,_0x13aaf0(0x16c)+_0x1a1699+_0x13aaf0(0x1bb)+_0x149016+'Â°C'),lastActions[_0x13aaf0(0x193)+_0x1a1699]=Date[_0x13aaf0(0x1a2)]();}}}_0x687d13[_0x13aaf0(0x1ae)](_0xfb6924,0x1),_0x5628c3=!![];}}}}}_0x5628c3&&await _0x137986[_0x13aaf0(0x148)](_0x1583f9,{'val':JSON[_0x13aaf0(0x1ad)](_0x687d13),'ack':!![]}),_0x1387ad&&await _0x137986[_0x13aaf0(0x148)](_0x13aaf0(0x1c5),{'val':JSON[_0x13aaf0(0x1ad)](_0x2e0db4),'ack':!![]});}catch(_0x19c331){}}async function applyEnergySavings(_0x22dbeb,_0x3f20c3){const _0x5c23ba=a1_0x33d2e7;await cleanupGhostInterventions(_0x22dbeb);if(!_0x3f20c3||_0x3f20c3[_0x5c23ba(0x153)]===0x0)return;const _0x17fa2e=_0x22dbeb[_0x5c23ba(0x198)][_0x5c23ba(0x1c9)]||[],_0x13b29f=Date[_0x5c23ba(0x1a2)]();for(const _0x272109 of _0x3f20c3){const _0x257175=_0x272109[_0x5c23ba(0x18b)],_0x35ded1=_0x272109[_0x5c23ba(0x184)],_0x3f9fac=_0x272109[_0x5c23ba(0x16e)]||0x15;if(lastActions[_0x5c23ba(0x193)+_0x257175]&&_0x13b29f-lastActions['rescue_'+_0x257175]<RESCUE_LOCK_MS)continue;const _0x408afd=_0x17fa2e[_0x5c23ba(0x137)](_0x34c857=>normalize(_0x34c857[_0x5c23ba(0x18f)])===normalize(_0x257175)&&(_0x34c857['type']==='temperature'||_0x34c857[_0x5c23ba(0x19f)]===_0x5c23ba(0x195)));if(!_0x408afd)continue;const _0x366ff6=await findRelatedId(_0x22dbeb,_0x408afd['id'],_0x5c23ba(0x1a9));if(_0x366ff6){if(lastActions[_0x5c23ba(0x1b5)+_0x257175]&&_0x13b29f-lastActions[_0x5c23ba(0x1b5)+_0x257175]<0x1e*0x3c*0x3e8)continue;const _0x152b0b=await _0x22dbeb[_0x5c23ba(0x17b)](_0x366ff6);if(_0x152b0b&&typeof _0x152b0b[_0x5c23ba(0x17f)]===_0x5c23ba(0x145)){const _0x279902=_0x152b0b[_0x5c23ba(0x17f)];_0x279902!==ECO_TEMP&&await manageMpcIntervention(_0x22dbeb,_0x257175,_0x5c23ba(0x12f));if(_0x35ded1>0x1e)_0x279902>ECO_TEMP+0.5&&(_0x22dbeb[_0x5c23ba(0x130)]['info'](_0x5c23ba(0x150)+_0x257175+'\x20auf\x20'+ECO_TEMP+_0x5c23ba(0x1a7)+_0x35ded1+_0x5c23ba(0x10e)),await _0x22dbeb[_0x5c23ba(0x128)](_0x366ff6,ECO_TEMP),await manageMpcIntervention(_0x22dbeb,_0x257175,'add'),lastActions[_0x5c23ba(0x1b5)+_0x257175]=_0x13b29f,await logAutomationAction(_0x22dbeb,_0x5c23ba(0x194)+_0x257175+':\x20Absenkung\x20auf\x20'+ECO_TEMP+'Â°C'));else _0x35ded1<=0xf&&(_0x279902<_0x3f9fac&&(_0x22dbeb['log'][_0x5c23ba(0x1a8)](_0x5c23ba(0x14d)+_0x257175+_0x5c23ba(0x122)+_0x3f9fac+'Â°C!\x20(Puffer\x20leer).'),await _0x22dbeb[_0x5c23ba(0x128)](_0x366ff6,_0x3f9fac),await manageMpcIntervention(_0x22dbeb,_0x257175,_0x5c23ba(0x12f)),lastActions[_0x5c23ba(0x1b5)+_0x257175]=_0x13b29f,await logAutomationAction(_0x22dbeb,_0x5c23ba(0x194)+_0x257175+_0x5c23ba(0x138)+_0x3f9fac+'Â°C')));}}else _0x22dbeb[_0x5c23ba(0x130)][_0x5c23ba(0x170)](_0x5c23ba(0x11c)+_0x257175+'\x20gefunden!');}}module[a1_0x33d2e7(0x181)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};