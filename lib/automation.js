function a1_0x2538(_0x2a4543,_0x392289){const _0x214831=a1_0x4250();return a1_0x2538=function(_0x1b5b5b,_0x2fb992){_0x1b5b5b=_0x1b5b5b-0x12d;let _0x42506e=_0x214831[_0x1b5b5b];return _0x42506e;},a1_0x2538(_0x2a4543,_0x392289);}const a1_0x36a7b4=a1_0x2538;(function(_0x3af6e2,_0xdafc48){const _0xce6bcf=a1_0x2538,_0x2bd33e=_0x3af6e2();while(!![]){try{const _0x53085a=-parseInt(_0xce6bcf(0x174))/0x1+parseInt(_0xce6bcf(0x158))/0x2+-parseInt(_0xce6bcf(0x1b1))/0x3*(parseInt(_0xce6bcf(0x1ac))/0x4)+-parseInt(_0xce6bcf(0x14f))/0x5+-parseInt(_0xce6bcf(0x1da))/0x6+parseInt(_0xce6bcf(0x17f))/0x7+parseInt(_0xce6bcf(0x1b9))/0x8;if(_0x53085a===_0xdafc48)break;else _0x2bd33e['push'](_0x2bd33e['shift']());}catch(_0x2025d8){_0x2bd33e['push'](_0x2bd33e['shift']());}}}(a1_0x4250,0xb35b3));const a1_0x2fb992=(function(){let _0x53e9e7=!![];return function(_0x112623,_0x1967d4){const _0x2f4432=_0x53e9e7?function(){const _0x213f10=a1_0x2538;if(_0x1967d4){const _0x50c694=_0x1967d4[_0x213f10(0x17e)](_0x112623,arguments);return _0x1967d4=null,_0x50c694;}}:function(){};return _0x53e9e7=![],_0x2f4432;};}()),a1_0x1b5b5b=a1_0x2fb992(this,function(){const _0x27bff0=a1_0x2538;return a1_0x1b5b5b['toString']()[_0x27bff0(0x189)](_0x27bff0(0x19c))[_0x27bff0(0x173)]()['constructor'](a1_0x1b5b5b)[_0x27bff0(0x189)](_0x27bff0(0x19c));});a1_0x1b5b5b();'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x6549d0){const _0xe56712=a1_0x2538;if(!_0x6549d0)return'';return _0x6549d0[_0xe56712(0x142)]()[_0xe56712(0x155)](/\s+/g,'')[_0xe56712(0x1a9)]();}async function logAutomationAction(_0x4f9999,_0x48c75d){const _0xd77209=a1_0x2538;await _0x4f9999[_0xd77209(0x132)](_0xd77209(0x1d0),{'val':_0x48c75d,'ack':!![]});try{const _0x1bbc24=_0xd77209(0x1a0),_0x9a043f=await _0x4f9999[_0xd77209(0x1ab)](_0x1bbc24);let _0x4f14ee=[];if(_0x9a043f&&_0x9a043f[_0xd77209(0x16b)])try{_0x4f14ee=JSON[_0xd77209(0x183)](_0x9a043f[_0xd77209(0x16b)]);}catch(_0x4653f8){}_0x4f14ee[_0xd77209(0x1ba)]({'ts':Date[_0xd77209(0x15e)](),'msg':_0x48c75d});if(_0x4f14ee['length']>0x32)_0x4f14ee=_0x4f14ee[_0xd77209(0x1db)](0x0,0x32);await _0x4f9999['setStateAsync'](_0x1bbc24,{'val':JSON[_0xd77209(0x1c9)](_0x4f14ee),'ack':!![]});}catch(_0x1f63ad){}}async function handlePrediction(_0x209bb7,_0x4a2fd7,_0x13af39){const _0x49637f=a1_0x2538;if(!_0x4a2fd7||_0x4a2fd7===_0x49637f(0x1ce))return;let _0x19d073=_0x49637f(0x143),_0x3d77ab=0.6;try{const _0x27a14c=await _0x209bb7[_0x49637f(0x1ab)]('analysis.automation.mode');if(_0x27a14c&&_0x27a14c[_0x49637f(0x16b)])_0x19d073=_0x27a14c[_0x49637f(0x16b)];const _0x46f4b0=await _0x209bb7[_0x49637f(0x1ab)](_0x49637f(0x1ae));if(_0x46f4b0&&_0x46f4b0[_0x49637f(0x16b)])_0x3d77ab=_0x46f4b0[_0x49637f(0x16b)];}catch(_0x1d9d00){}if(_0x19d073===_0x49637f(0x143)||_0x13af39<_0x3d77ab)return;const _0x3241d=Date['now']();if(lastActions[_0x4a2fd7]&&_0x3241d-lastActions[_0x4a2fd7]<COOLDOWN_MS)return;const _0x3f9e4c=_0x209bb7[_0x49637f(0x17c)][_0x49637f(0x191)]||[],_0x13bb60=normalize(_0x4a2fd7),_0x4b299f=_0x3f9e4c[_0x49637f(0x196)](_0xe716f8=>normalize(_0xe716f8[_0x49637f(0x18d)])===_0x13bb60&&(_0xe716f8[_0x49637f(0x161)]===_0x49637f(0x186)||_0xe716f8[_0x49637f(0x161)]===_0x49637f(0x13f)||_0xe716f8[_0x49637f(0x161)]===_0x49637f(0x175)));if(!_0x4b299f)return;const _0x56d578=await aiAgent[_0x49637f(0x162)](_0x209bb7,_0x4a2fd7,_0x4b299f[_0x49637f(0x19a)],_0x13af39);if(!_0x56d578[_0x49637f(0x150)])return;const _0x2e5fd5=_0x49637f(0x1d4)+_0x4a2fd7+_0x49637f(0x17d)+_0x4b299f[_0x49637f(0x19a)]+'\x20('+_0x56d578[_0x49637f(0x1e0)]+')';await logAutomationAction(_0x209bb7,'['+_0x19d073[_0x49637f(0x135)]()+']\x20'+_0x2e5fd5);if(_0x19d073==='active'){const _0x18ab6d=await _0x209bb7['getForeignStateAsync'](_0x4b299f['id']);(!_0x18ab6d||!_0x18ab6d['val']&&_0x18ab6d[_0x49637f(0x16b)]!==!![])&&await _0x209bb7[_0x49637f(0x13c)](_0x4b299f['id'],!![]),lastActions[_0x4a2fd7]=_0x3241d;}}function a1_0x4250(){const _0x51c6ba=['entries','(((.+)+)+)+$','eventStart','position','.data.table','analysis.automation.actionLog','mpc_','.1.LEVEL','target_temperature','values','sensor','ðŸ“…\x20[MPC\x20INFO]\x20','valve_position','valveMapping','trim','contact','getStateAsync','1244jWtgAN','ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27','analysis.automation.confidenceThreshold','Manuelles\x20Mapping','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','3795VABZyS','summary','analysis.energy.rlPenalties','local_temperature','includes','soll','level','[MPC]\x20','18968272iGcNgI','unshift','calendarSelection','Â°C!\x20(Puffer\x20leer).','\x20wieder\x20auf\x20','ist','room','openknx','default','_meta','Â°C\x20(nicht\x20','analysis.energy.schedulePreview','score','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20',':\x20Aufheizen\x20auf\x20','.1.TEMPERATURE','stringify','messwert','Classic','system.mode','useCalendar','Unknown','filter','analysis.automation.lastAction',']:\x20Raum-Trigger\x20\x27','rÃ¼ckkehr','error','PrÃ¤diktion:\x20','map','\x20auf\x20','ACTUAL','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','_date','3314598npqiDM','slice','\x20->\x20','currentSystemMode','value.valve','push','reason','.1.ACTUAL_TEMPERATURE','Â°C!\x20(Puffer:\x20','remove','\x20min)','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','thermostat.setpoint','TRAIN_RL_PENALTY','sendToPythonWrapper','string','setStateAsync','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','\x27\x20(Match:\x20','toUpperCase','Unbekannt','ankunft','Fehlt','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','forEach','findIndex','setForeignStateAsync','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','analysis.energy.activeEnforcements','dimmer','valve','common','toLowerCase','off','localeCompare',')\x20aktiv.\x20Heize\x20auf\x20','thermostat','calendarInstance',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','current_heating_setpoint','Â°C\x20->\x20','target','Calendar\x20Check\x20Error:\x20','analysis.energy.warmupTimes','event','3021825jwjKkj','approved','getForeignObjectsAsync','info','ðŸ“…\x20SMART\x20SCHEDULE\x20[','warn','replace','Â°C\x20(via\x20','manual','644690bLXELP','setpoint','\x20gefunden!','Enforcement\x20Monitor\x20Error:\x20','PERFECT','level.valve','now','hm-rpc','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','type','consultButler','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','temperature','Â°C).\x20Entferne\x20Status.','Â°C.','\x20wurde\x20manuell\x20erhÃ¶ht.','rescue_','add','getTime','val','temp','[WATCHDOG]\x20','\x20min).','number','getForeignStateAsync','log','date','toString','601203XztmYm','switch','analysis.energy.warmupTargets','_calName','analysis.energy.mpcActiveInterventions','normal','thermostatMapping','message','config','\x20->\x20Schalte\x20','apply','1348760KVubPy','Nicht\x20gefunden','splice','cal_','parse','join','.4.SET_TEMPERATURE','light','SET_POINT_TEMPERATURE','.4.VALVE_STATE','search','split','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','[CAL]\x20','location','sort','\x20ist\x20auf\x20','abs','devices','Soll','length','wert','unit','find','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','Â°C\x20<\x20','Ist','name'];a1_0x4250=function(){return _0x51c6ba;};return a1_0x4250();}async function findRelatedId(_0x1e2941,_0x209489,_0x3707bf=a1_0x36a7b4(0x159)){const _0xc33443=a1_0x36a7b4;if(_0x3707bf==='setpoint'&&_0x1e2941[_0xc33443(0x17c)][_0xc33443(0x17a)]){let _0xb7dbec=_0x1e2941[_0xc33443(0x17c)][_0xc33443(0x17a)];if(typeof _0xb7dbec===_0xc33443(0x131))try{_0xb7dbec=JSON[_0xc33443(0x183)](_0xb7dbec);}catch(_0x52b9c2){}if(_0xb7dbec&&_0xb7dbec[_0x209489])return _0xb7dbec[_0x209489];}if(_0x3707bf===_0xc33443(0x140)&&_0x1e2941[_0xc33443(0x17c)][_0xc33443(0x1a8)]){let _0x51eef6=_0x1e2941[_0xc33443(0x17c)][_0xc33443(0x1a8)];if(typeof _0x51eef6===_0xc33443(0x131))try{_0x51eef6=JSON[_0xc33443(0x183)](_0x51eef6);}catch(_0x5e18d3){}if(_0x51eef6&&_0x51eef6[_0x209489])return _0x51eef6[_0x209489];}let _0x1f283c=[];if(_0x3707bf===_0xc33443(0x159))_0x1f283c=[{'s':_0xc33443(0x1e1),'t':'.1.SET_POINT_TEMPERATURE'},{'s':'.1.TEMPERATURE','t':'.1.SET_POINT_TEMPERATURE'},{'s':'.1.TEMPERATURE','t':_0xc33443(0x185)},{'s':'ACTUAL_TEMPERATURE','t':_0xc33443(0x187)},{'s':_0xc33443(0x1b4),'t':'occupied_heating_setpoint'},{'s':_0xc33443(0x1b4),'t':_0xc33443(0x149)},{'s':'temperature','t':_0xc33443(0x1a3)},{'s':_0xc33443(0x1d7),'t':'SET'},{'s':_0xc33443(0x199),'t':_0xc33443(0x192)},{'s':_0xc33443(0x164),'t':_0xc33443(0x159)}];else _0x3707bf===_0xc33443(0x140)&&(_0x1f283c=[{'s':_0xc33443(0x1e1),'t':_0xc33443(0x1a2)},{'s':_0xc33443(0x1c8),'t':_0xc33443(0x1a2)},{'s':_0xc33443(0x1c8),'t':_0xc33443(0x188)},{'s':_0xc33443(0x1b4),'t':'pi_heating_demand'},{'s':_0xc33443(0x164),'t':_0xc33443(0x1a7)},{'s':_0xc33443(0x164),'t':'level'}]);for(const _0x4e22e3 of _0x1f283c){if(_0x209489[_0xc33443(0x1b5)](_0x4e22e3['s'])){const _0x4d6559=_0x209489[_0xc33443(0x155)](_0x4e22e3['s'],_0x4e22e3['t']),_0x4cc6c1=await _0x1e2941['getForeignObjectAsync'](_0x4d6559);if(_0x4cc6c1)return _0x4d6559;}}try{const _0x173fcf=_0x209489[_0xc33443(0x18a)]('.');if(_0x173fcf['length']>0x2){const _0x36e39e=_0x173fcf[_0xc33443(0x1db)](0x0,-0x1)[_0xc33443(0x184)]('.'),_0x373bcd=await _0x1e2941[_0xc33443(0x151)](_0x36e39e+'.*'),_0x4339f8=[],_0x40f46a=_0x209489[_0xc33443(0x18a)](/[._]+/)[_0xc33443(0x1cf)](_0x5e031a=>![_0xc33443(0x1c0),'0',_0xc33443(0x15f),_0xc33443(0x1be),_0xc33443(0x194),_0xc33443(0x164),'actual','sensor',_0xc33443(0x1ca),'state']['includes'](_0x5e031a['toLowerCase']()));for(const [_0x53ab4a,_0x52f043]of Object[_0xc33443(0x19b)](_0x373bcd)){if(_0x53ab4a===_0x209489)continue;if(_0x52f043&&_0x52f043[_0xc33443(0x141)]){const _0x4684eb=_0x53ab4a[_0xc33443(0x142)](),_0x3d2553=(_0x52f043[_0xc33443(0x141)]['role']||'')['toLowerCase'](),_0x47aa8d=(_0x52f043[_0xc33443(0x141)][_0xc33443(0x195)]||'')['toLowerCase']();let _0x2af832=![];if(_0x3707bf===_0xc33443(0x159)&&_0x52f043[_0xc33443(0x141)]['write']===!![])_0x2af832=_0x4684eb[_0xc33443(0x1b5)]('set')||_0x4684eb[_0xc33443(0x1b5)](_0xc33443(0x1b6))||_0x4684eb[_0xc33443(0x1b5)](_0xc33443(0x14b))||_0x3d2553[_0xc33443(0x1b5)]('level.temperature')||_0x3d2553[_0xc33443(0x1b5)](_0xc33443(0x12e));else _0x3707bf===_0xc33443(0x140)&&(_0x2af832=_0x4684eb[_0xc33443(0x1b5)](_0xc33443(0x1b7))||_0x4684eb[_0xc33443(0x1b5)](_0xc33443(0x140))||_0x4684eb[_0xc33443(0x1b5)]('stellwert')||_0x4684eb[_0xc33443(0x1b5)](_0xc33443(0x19e))||_0x3d2553[_0xc33443(0x1b5)](_0xc33443(0x15d))||_0x3d2553[_0xc33443(0x1b5)](_0xc33443(0x1de))||_0x47aa8d[_0xc33443(0x1b5)]('%'));if(_0x2af832){const _0x44b555=_0x53ab4a[_0xc33443(0x18a)](/[._]+/)[_0xc33443(0x1d5)](_0x212b2e=>_0x212b2e[_0xc33443(0x142)]());let _0x1e2d50=0x0;_0x40f46a[_0xc33443(0x13a)](_0x24a872=>{const _0x580407=_0xc33443;if(_0x44b555[_0x580407(0x1b5)](_0x24a872[_0x580407(0x142)]()))_0x1e2d50++;}),_0x4339f8['push']({'id':_0x53ab4a,'score':_0x1e2d50});}}}if(_0x4339f8[_0xc33443(0x193)]>0x0){_0x4339f8[_0xc33443(0x18e)]((_0x1a73ac,_0x361634)=>_0x361634['score']-_0x1a73ac[_0xc33443(0x1c5)]);if(_0x4339f8[0x0]['score']>0x0)return _0x4339f8[0x0]['id'];}}}catch(_0x57e470){}return null;}async function scanThermostats(_0x5aa41f){const _0x5684a3=a1_0x36a7b4,_0x3ec085=_0x5aa41f[_0x5684a3(0x17c)][_0x5684a3(0x191)]||[],_0x5b0742=[],_0x37711f=_0x3ec085[_0x5684a3(0x1cf)](_0x55c1a3=>_0x55c1a3['id']&&_0x55c1a3['id']['includes']('temperature')||_0x55c1a3['type']&&['temperature','thermostat',_0x5684a3(0x1a5)][_0x5684a3(0x1b5)](_0x55c1a3[_0x5684a3(0x161)])||_0x55c1a3['name']&&_0x55c1a3[_0x5684a3(0x19a)][_0x5684a3(0x142)]()[_0x5684a3(0x1b5)](_0x5684a3(0x16c)));for(const _0x3279f4 of _0x37711f){const _0x553ce8=await findRelatedId(_0x5aa41f,_0x3279f4['id'],_0x5684a3(0x159)),_0x5bcc74=await findRelatedId(_0x5aa41f,_0x3279f4['id'],'valve');let _0x59059b=_0x5684a3(0x180),_0x33738f=![],_0xcbc5d0=_0x5aa41f['config'][_0x5684a3(0x17a)]||{};if(typeof _0xcbc5d0===_0x5684a3(0x131))try{_0xcbc5d0=JSON['parse'](_0xcbc5d0);}catch(_0x484a64){}let _0x367130=_0x5aa41f[_0x5684a3(0x17c)][_0x5684a3(0x1a8)]||{};if(typeof _0x367130===_0x5684a3(0x131))try{_0x367130=JSON[_0x5684a3(0x183)](_0x367130);}catch(_0xc45c92){}if(_0xcbc5d0[_0x3279f4['id']]&&_0xcbc5d0[_0x3279f4['id']]===_0x553ce8||_0x367130[_0x3279f4['id']]&&_0x367130[_0x3279f4['id']]===_0x5bcc74)_0x59059b=_0x5684a3(0x1af),_0x33738f=!![];else(_0x553ce8||_0x5bcc74)&&(_0x59059b='Auto-Erkennung');_0x5b0742[_0x5684a3(0x1df)]({'room':_0x3279f4[_0x5684a3(0x18d)]||_0x5684a3(0x136),'sensorId':_0x3279f4['id'],'setpointId':_0x553ce8||'-','valveId':_0x5bcc74||'-','source':_0x59059b,'isManual':_0x33738f,'status':_0x553ce8&&_0x5bcc74?_0x5684a3(0x15c):_0x553ce8?'OK':_0x5684a3(0x138)});}return _0x5b0742[_0x5684a3(0x18e)]((_0x2ff241,_0x415c65)=>_0x2ff241[_0x5684a3(0x1bf)][_0x5684a3(0x144)](_0x415c65[_0x5684a3(0x1bf)]));}async function updateSchedulePreview(_0x1a50a0){const _0x31c791=a1_0x36a7b4;if(!_0x1a50a0[_0x31c791(0x17c)][_0x31c791(0x1cd)]||!_0x1a50a0['config'][_0x31c791(0x147)])return;let _0x1b0c15={};try{const _0x4480b9=await _0x1a50a0[_0x31c791(0x1ab)]('analysis.energy.warmupTimes');if(_0x4480b9&&_0x4480b9[_0x31c791(0x16b)])_0x1b0c15=JSON[_0x31c791(0x183)](_0x4480b9[_0x31c791(0x16b)]);}catch(_0x19fb65){}const _0x140f66=[],_0x48909b=Date[_0x31c791(0x15e)](),_0x4fd641=0x30*0x3c*0x3c*0x3e8;try{const _0x208dba=await _0x1a50a0[_0x31c791(0x170)](_0x1a50a0['config'][_0x31c791(0x147)]+_0x31c791(0x19f));if(!_0x208dba||!_0x208dba[_0x31c791(0x16b)])return;const _0x576e80=JSON[_0x31c791(0x183)](_0x208dba[_0x31c791(0x16b)]),_0x44f16c=_0x1a50a0[_0x31c791(0x17c)]['calendarSelection']||[],_0x473b6d=_0x1a50a0['config'][_0x31c791(0x191)]||[],_0x1c10a4=new Set();_0x473b6d[_0x31c791(0x13a)](_0x309fac=>{const _0x2a8607=_0x31c791;if(_0x309fac[_0x2a8607(0x18d)])_0x1c10a4[_0x2a8607(0x169)](_0x309fac[_0x2a8607(0x18d)]);});for(const _0x5a6932 of _0x576e80){if(_0x5a6932[_0x31c791(0x177)]&&_0x44f16c['length']>0x0&&!_0x44f16c[_0x31c791(0x1b5)](_0x5a6932[_0x31c791(0x177)]))continue;const _0xdc9a20=_0x5a6932['_date']||_0x5a6932[_0x31c791(0x19d)]||_0x5a6932[_0x31c791(0x172)];if(!_0xdc9a20)continue;const _0x3d2fb8=new Date(_0xdc9a20),_0x599ad4=_0x3d2fb8[_0x31c791(0x16a)]();if(isNaN(_0x599ad4))continue;if(_0x599ad4<_0x48909b)continue;if(_0x599ad4>_0x48909b+_0x4fd641)continue;const _0x595c0d=(_0x5a6932[_0x31c791(0x14e)]||_0x5a6932[_0x31c791(0x1b2)]||'')[_0x31c791(0x142)]();let _0x22696e=![],_0x14145d=[],_0x482755=_0x5a6932['event']||_0x5a6932[_0x31c791(0x1b2)]||_0x31c791(0x136);if(_0x595c0d['includes']('urlaub\x20ende')||_0x595c0d[_0x31c791(0x1b5)]('rÃ¼ckkehr')||_0x595c0d[_0x31c791(0x1b5)](_0x31c791(0x137)))_0x22696e=!![],_0x14145d=Array['from'](_0x1c10a4);else for(const _0xc19b2e of _0x1c10a4){if(_0x595c0d[_0x31c791(0x1b5)](_0xc19b2e['toLowerCase']()))_0x14145d['push'](_0xc19b2e);}_0x14145d[_0x31c791(0x193)]>0x0&&_0x14145d[_0x31c791(0x13a)](_0x3a8b67=>{const _0x21595c=_0x31c791;let _0x1195b9=0x3c;if(_0x22696e){let _0x4bda6a=0x0;Object[_0x21595c(0x1a4)](_0x1b0c15)[_0x21595c(0x13a)](_0x5efd32=>{if(_0x5efd32>_0x4bda6a)_0x4bda6a=_0x5efd32;}),_0x1195b9=_0x4bda6a>0x0?_0x4bda6a:0x78;}else _0x1195b9=_0x1b0c15[_0x3a8b67]||0x3c;const _0x2c748e=new Date(_0x599ad4-_0x1195b9*0xea60);_0x140f66[_0x21595c(0x1df)]({'eventTime':_0x599ad4,'triggerTime':_0x2c748e['getTime'](),'room':_0x3a8b67,'minutes':_0x1195b9,'reason':_0x482755,'isGlobal':_0x22696e});});}}catch(_0x533ea5){}_0x140f66['sort']((_0x4860a9,_0x52a619)=>_0x4860a9['triggerTime']-_0x52a619['triggerTime']);const _0x4bc6b9=_0x140f66[_0x31c791(0x1db)](0x0,0x5);await _0x1a50a0[_0x31c791(0x132)](_0x31c791(0x1c4),{'val':JSON[_0x31c791(0x1c9)](_0x4bc6b9),'ack':!![]});}async function monitorEnforcements(_0x3fe1ad){const _0x57133d=a1_0x36a7b4;try{const _0x42c750=_0x57133d(0x13e),_0x2f4e47=await _0x3fe1ad[_0x57133d(0x1ab)](_0x42c750);if(!_0x2f4e47||!_0x2f4e47[_0x57133d(0x16b)])return;let _0x387cbe=[];try{_0x387cbe=JSON[_0x57133d(0x183)](_0x2f4e47[_0x57133d(0x16b)]);}catch(_0x54516a){return;}if(!Array['isArray'](_0x387cbe)||_0x387cbe[_0x57133d(0x193)]===0x0)return;const _0x5f02e2=Date[_0x57133d(0x15e)](),_0x5c3c39=_0x3fe1ad[_0x57133d(0x17c)][_0x57133d(0x191)]||[];let _0x1c7d29=![];for(let _0x9de357=_0x387cbe[_0x57133d(0x193)]-0x1;_0x9de357>=0x0;_0x9de357--){const _0x352d6f=_0x387cbe[_0x9de357];if(_0x5f02e2>=_0x352d6f['until']){_0x3fe1ad[_0x57133d(0x171)]['info'](_0x57133d(0x160)+_0x352d6f[_0x57133d(0x1bf)]+_0x57133d(0x1b0)),_0x387cbe[_0x57133d(0x181)](_0x9de357,0x1),_0x1c7d29=!![];continue;}const _0x58ea33=_0x5c3c39['find'](_0x1a8879=>normalize(_0x1a8879[_0x57133d(0x18d)])===normalize(_0x352d6f[_0x57133d(0x1bf)])&&(_0x1a8879[_0x57133d(0x161)]===_0x57133d(0x164)||_0x1a8879['type']===_0x57133d(0x146)));if(_0x58ea33){const _0x20afec=await findRelatedId(_0x3fe1ad,_0x58ea33['id'],_0x57133d(0x159));if(_0x20afec){const _0x48c2d9=await _0x3fe1ad['getForeignStateAsync'](_0x20afec);_0x48c2d9&&typeof _0x48c2d9['val']===_0x57133d(0x16f)&&(_0x48c2d9[_0x57133d(0x16b)]<0xf&&(_0x3fe1ad[_0x57133d(0x171)][_0x57133d(0x154)]('ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x352d6f['room']+_0x57133d(0x1d6)+_0x48c2d9[_0x57133d(0x16b)]+_0x57133d(0x18b)+_0x352d6f[_0x57133d(0x14b)]+_0x57133d(0x166)),await _0x3fe1ad[_0x57133d(0x13c)](_0x20afec,_0x352d6f[_0x57133d(0x14b)]),await logAutomationAction(_0x3fe1ad,'[FORCE]\x20'+_0x352d6f[_0x57133d(0x1bf)]+':\x20'+_0x48c2d9[_0x57133d(0x16b)]+_0x57133d(0x14a)+_0x352d6f[_0x57133d(0x14b)]+'Â°C\x20(Kalender-Schutz)')));}}}_0x1c7d29&&await _0x3fe1ad[_0x57133d(0x132)](_0x42c750,{'val':JSON[_0x57133d(0x1c9)](_0x387cbe),'ack':!![]});}catch(_0x47075e){_0x3fe1ad[_0x57133d(0x171)][_0x57133d(0x1d3)](_0x57133d(0x15b)+_0x47075e[_0x57133d(0x17b)]);}}async function checkCalendarTriggers(_0x83e5e){const _0x2f1e74=a1_0x36a7b4;if(!_0x83e5e['config'][_0x2f1e74(0x1cd)]||!_0x83e5e[_0x2f1e74(0x17c)][_0x2f1e74(0x147)])return;await updateSchedulePreview(_0x83e5e);let _0x12cfc3={},_0x5d73a7={};try{const _0x36a1ed=await _0x83e5e[_0x2f1e74(0x1ab)](_0x2f1e74(0x14d));if(_0x36a1ed&&_0x36a1ed[_0x2f1e74(0x16b)])_0x12cfc3=JSON['parse'](_0x36a1ed[_0x2f1e74(0x16b)]);const _0x108da5=await _0x83e5e[_0x2f1e74(0x1ab)]('analysis.energy.warmupSources');if(_0x108da5&&_0x108da5['val'])_0x5d73a7=JSON[_0x2f1e74(0x183)](_0x108da5[_0x2f1e74(0x16b)]);}catch(_0x75438){}let _0x92196e={'default':0x15};try{const _0x1db326=await _0x83e5e[_0x2f1e74(0x1ab)](_0x2f1e74(0x176));if(_0x1db326&&_0x1db326[_0x2f1e74(0x16b)])_0x92196e=JSON[_0x2f1e74(0x183)](_0x1db326[_0x2f1e74(0x16b)]);}catch(_0x439ceb){}let _0x1f1f38=[];try{const _0x9b89b=await _0x83e5e['getStateAsync'](_0x2f1e74(0x13e));if(_0x9b89b&&_0x9b89b['val'])_0x1f1f38=JSON[_0x2f1e74(0x183)](_0x9b89b[_0x2f1e74(0x16b)]);}catch(_0x44d810){}try{const _0x1baeb5=await _0x83e5e[_0x2f1e74(0x170)](_0x83e5e['config'][_0x2f1e74(0x147)]+_0x2f1e74(0x19f));if(!_0x1baeb5||!_0x1baeb5[_0x2f1e74(0x16b)])return;const _0x3e33a7=JSON[_0x2f1e74(0x183)](_0x1baeb5[_0x2f1e74(0x16b)]),_0xdfeaaf=Date[_0x2f1e74(0x15e)](),_0x48dae0=_0x83e5e[_0x2f1e74(0x17c)][_0x2f1e74(0x191)]||[],_0x434e80=_0x83e5e[_0x2f1e74(0x17c)][_0x2f1e74(0x1bb)]||[];let _0x88e2fd=![];for(const _0x52c77b of _0x3e33a7){if(_0x52c77b[_0x2f1e74(0x177)]&&_0x434e80[_0x2f1e74(0x193)]>0x0&&!_0x434e80[_0x2f1e74(0x1b5)](_0x52c77b['_calName']))continue;const _0x50a25c=_0x52c77b[_0x2f1e74(0x1d9)]||_0x52c77b['eventStart']||_0x52c77b[_0x2f1e74(0x172)];if(!_0x50a25c)continue;const _0x18f28f=new Date(_0x50a25c);if(isNaN(_0x18f28f['getTime']()))continue;const _0x1de6b6=(_0x52c77b[_0x2f1e74(0x14e)]||_0x52c77b[_0x2f1e74(0x1b2)]||'')['toLowerCase']();if(_0x1de6b6[_0x2f1e74(0x1b5)]('urlaub\x20ende')||_0x1de6b6[_0x2f1e74(0x1b5)](_0x2f1e74(0x1d2))||_0x1de6b6[_0x2f1e74(0x1b5)](_0x2f1e74(0x137))){let _0x2b6900=0x0;Object[_0x2f1e74(0x1a4)](_0x12cfc3)[_0x2f1e74(0x13a)](_0x4eb4d8=>{if(_0x4eb4d8>_0x2b6900)_0x2b6900=_0x4eb4d8;});if(_0x2b6900===0x0)_0x2b6900=0x78;const _0x5d2500=_0x18f28f[_0x2f1e74(0x16a)]()-_0x2b6900*0xea60;_0xdfeaaf>=_0x5d2500&&_0xdfeaaf<_0x18f28f[_0x2f1e74(0x16a)]()&&(_0x83e5e[_0x2f1e74(0x1dd)]!=='normal'&&(_0x83e5e[_0x2f1e74(0x171)][_0x2f1e74(0x152)]('ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20'+_0x2b6900+_0x2f1e74(0x16e)),await _0x83e5e[_0x2f1e74(0x132)](_0x2f1e74(0x1cc),{'val':_0x2f1e74(0x179),'ack':![]})));}for(const _0x1208e1 of _0x48dae0){if(_0x1208e1['location']){const _0x1fa52f=_0x1208e1['location'][_0x2f1e74(0x142)](),_0x2aebed=(_0x1208e1['name']||'')['toLowerCase']();let _0xabfb21=_0x1de6b6['includes'](_0x1fa52f);!_0xabfb21&&_0x2aebed[_0x2f1e74(0x193)]>0x3&&_0x1de6b6['includes'](_0x2aebed)&&(_0xabfb21=!![]);if(_0xabfb21){const _0x3850b5=_0x12cfc3[_0x1208e1['location']]||0x3c,_0x2f0efd=_0x5d73a7[_0x1208e1[_0x2f1e74(0x18d)]]||_0x2f1e74(0x1cb),_0x326333=_0x18f28f[_0x2f1e74(0x16a)]()-_0x3850b5*0xea60;if(_0xdfeaaf>=_0x326333&&_0xdfeaaf<_0x18f28f[_0x2f1e74(0x16a)]()){const _0x1f5880=lastActions[_0x2f1e74(0x182)+_0x1208e1[_0x2f1e74(0x18d)]];if(_0x1f5880&&_0xdfeaaf-_0x1f5880<CAL_COOLDOWN_MS)continue;const _0x1661ec=await findRelatedId(_0x83e5e,_0x1208e1['id'],_0x2f1e74(0x159));if(_0x1661ec){let _0x14577d=_0x92196e[_0x1208e1[_0x2f1e74(0x18d)]];if(_0x14577d===undefined)_0x14577d=_0x92196e[_0x2f1e74(0x1c1)];if(_0x14577d===undefined)_0x14577d=0x15;const _0x42ce2e=await _0x83e5e[_0x2f1e74(0x170)](_0x1661ec);if(_0x42ce2e&&typeof _0x42ce2e['val']==='number'&&_0x42ce2e[_0x2f1e74(0x16b)]<_0x14577d-0.5){_0x83e5e['log'][_0x2f1e74(0x152)](_0x2f1e74(0x153)+_0x2f0efd+_0x2f1e74(0x1d1)+_0x1208e1[_0x2f1e74(0x18d)]+_0x2f1e74(0x134)+_0x1de6b6+_0x2f1e74(0x145)+_0x14577d+'Â°C\x20(Vorlauf:\x20'+_0x3850b5+_0x2f1e74(0x16e)),await _0x83e5e[_0x2f1e74(0x13c)](_0x1661ec,_0x14577d),await logAutomationAction(_0x83e5e,_0x2f1e74(0x18c)+_0x1208e1['location']+_0x2f1e74(0x1dc)+_0x14577d+_0x2f1e74(0x156)+_0x2f0efd+')'),lastActions[_0x2f1e74(0x182)+_0x1208e1[_0x2f1e74(0x18d)]]=_0xdfeaaf;const _0x278a18=_0x1f1f38[_0x2f1e74(0x13b)](_0x17a486=>_0x17a486[_0x2f1e74(0x1bf)]===_0x1208e1[_0x2f1e74(0x18d)]);if(_0x278a18!==-0x1)_0x1f1f38[_0x2f1e74(0x181)](_0x278a18,0x1);_0x1f1f38[_0x2f1e74(0x1df)]({'room':_0x1208e1['location'],'target':_0x14577d,'until':_0x18f28f[_0x2f1e74(0x16a)]()}),_0x88e2fd=!![];}}}}}}}_0x88e2fd&&await _0x83e5e[_0x2f1e74(0x132)](_0x2f1e74(0x13e),{'val':JSON[_0x2f1e74(0x1c9)](_0x1f1f38),'ack':!![]});}catch(_0x25f1a9){_0x83e5e[_0x2f1e74(0x171)][_0x2f1e74(0x154)](_0x2f1e74(0x14c)+_0x25f1a9[_0x2f1e74(0x17b)]);}}async function manageMpcIntervention(_0x32ef99,_0x297610,_0x4a21a3){const _0x16c6ac=a1_0x36a7b4;try{const _0x405452=_0x16c6ac(0x178),_0x45a8ac=await _0x32ef99[_0x16c6ac(0x1ab)](_0x405452);let _0x1ae05c=[];if(_0x45a8ac&&_0x45a8ac[_0x16c6ac(0x16b)])try{_0x1ae05c=JSON[_0x16c6ac(0x183)](_0x45a8ac[_0x16c6ac(0x16b)]);}catch(_0x5eca58){}const _0x57fbf7=_0x1ae05c['indexOf'](_0x297610);if(_0x4a21a3===_0x16c6ac(0x169))_0x57fbf7===-0x1&&(_0x1ae05c[_0x16c6ac(0x1df)](_0x297610),await _0x32ef99[_0x16c6ac(0x132)](_0x405452,{'val':JSON[_0x16c6ac(0x1c9)](_0x1ae05c),'ack':!![]}));else _0x4a21a3===_0x16c6ac(0x1e3)&&(_0x57fbf7!==-0x1&&(_0x1ae05c[_0x16c6ac(0x181)](_0x57fbf7,0x1),await _0x32ef99[_0x16c6ac(0x132)](_0x405452,{'val':JSON[_0x16c6ac(0x1c9)](_0x1ae05c),'ack':!![]})));}catch(_0x4438c4){}}async function cleanupGhostInterventions(_0x27d9d1){const _0x4312d5=a1_0x36a7b4;try{const _0x495eaa='analysis.energy.mpcActiveInterventions',_0x12e0cb=await _0x27d9d1[_0x4312d5(0x1ab)](_0x495eaa);if(!_0x12e0cb||!_0x12e0cb[_0x4312d5(0x16b)])return;const _0x31f864=JSON[_0x4312d5(0x183)](_0x12e0cb[_0x4312d5(0x16b)]);if(!Array['isArray'](_0x31f864)||_0x31f864[_0x4312d5(0x193)]===0x0)return;let _0x3870c8={'default':0x15};try{const _0xe08e2b=await _0x27d9d1[_0x4312d5(0x1ab)](_0x4312d5(0x176));if(_0xe08e2b&&_0xe08e2b[_0x4312d5(0x16b)])_0x3870c8=JSON[_0x4312d5(0x183)](_0xe08e2b[_0x4312d5(0x16b)]);}catch(_0x3befab){}let _0x438b3c=[];try{const _0x26030d=await _0x27d9d1[_0x4312d5(0x1ab)]('analysis.energy.ventilationAlerts');if(_0x26030d&&_0x26030d[_0x4312d5(0x16b)])_0x438b3c=JSON[_0x4312d5(0x183)](_0x26030d[_0x4312d5(0x16b)]);}catch(_0xcdd4a9){}let _0x415c72={},_0x54eda7=![];try{const _0x5aa430=await _0x27d9d1[_0x4312d5(0x1ab)](_0x4312d5(0x1b3));if(_0x5aa430&&_0x5aa430[_0x4312d5(0x16b)])_0x415c72=JSON['parse'](_0x5aa430['val']);}catch(_0x4a40c6){}if(_0x415c72['_meta']){const _0x10884f=Date['now']();for(const [_0x111fee,_0x1a4272]of Object[_0x4312d5(0x19b)](_0x415c72[_0x4312d5(0x1c2)])){_0x10884f-_0x1a4272>PENALTY_TTL&&(delete _0x415c72[_0x111fee],delete _0x415c72['_meta'][_0x111fee],_0x54eda7=!![],_0x27d9d1[_0x4312d5(0x171)][_0x4312d5(0x152)](_0x4312d5(0x1ad)+_0x111fee+'\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.'));}}const _0x22547f=_0x27d9d1[_0x4312d5(0x17c)][_0x4312d5(0x191)]||[];let _0x2f9f03=![];for(let _0xf71b4b=_0x31f864['length']-0x1;_0xf71b4b>=0x0;_0xf71b4b--){const _0x186b53=_0x31f864[_0xf71b4b],_0x5bc5ba=_0x22547f['find'](_0x39781b=>normalize(_0x39781b[_0x4312d5(0x18d)])===normalize(_0x186b53)&&(_0x39781b['type']===_0x4312d5(0x164)||_0x39781b[_0x4312d5(0x161)]===_0x4312d5(0x146)));if(!_0x5bc5ba){_0x27d9d1[_0x4312d5(0x171)][_0x4312d5(0x154)](_0x4312d5(0x163)+_0x186b53+'\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.'),_0x31f864[_0x4312d5(0x181)](_0xf71b4b,0x1),_0x2f9f03=!![];continue;}if(_0x5bc5ba){const _0xe4c83a=await findRelatedId(_0x27d9d1,_0x5bc5ba['id'],_0x4312d5(0x159)),_0x522e73=await _0x27d9d1[_0x4312d5(0x170)](_0x5bc5ba['id']);if(_0xe4c83a){const _0x2f15d4=await _0x27d9d1[_0x4312d5(0x170)](_0xe4c83a);if(_0x2f15d4&&typeof _0x2f15d4[_0x4312d5(0x16b)]==='number'){let _0x308b18=![],_0xbf22b='';Math[_0x4312d5(0x190)](_0x2f15d4[_0x4312d5(0x16b)]-ECO_TEMP)>0.5&&(_0x308b18=!![],_0xbf22b=_0x4312d5(0x157));if(!_0x308b18&&_0x522e73&&typeof _0x522e73['val']===_0x4312d5(0x16f)){const _0x396807=_0x3870c8[_0x186b53]||_0x3870c8['default']||0x15;_0x522e73[_0x4312d5(0x16b)]<_0x396807+0.2&&(_0x308b18=!![],_0xbf22b='too_cold');}if(_0x308b18){if(_0xbf22b===_0x4312d5(0x157)){_0x27d9d1[_0x4312d5(0x171)][_0x4312d5(0x152)]('ðŸ§¹\x20[MPC\x20CLEANUP]\x20'+_0x186b53+_0x4312d5(0x18f)+_0x2f15d4[_0x4312d5(0x16b)]+_0x4312d5(0x1c3)+ECO_TEMP+_0x4312d5(0x165));const _0x53b536=lastActions['cal_'+_0x186b53],_0x161b49=_0x53b536&&Date['now']()-_0x53b536<0x2*0x3c*0x3e8;if(!_0x161b49&&_0x2f15d4['val']>ECO_TEMP+0.5){_0x27d9d1[_0x4312d5(0x130)]&&(_0x27d9d1['log'][_0x4312d5(0x152)](_0x4312d5(0x139)+_0x186b53+_0x4312d5(0x167)),_0x27d9d1[_0x4312d5(0x130)](_0x4312d5(0x12f),{'room':_0x186b53}));const _0x55d734=_0x186b53+'_'+new Date()['getHours']();if(!_0x415c72[_0x55d734]){_0x415c72[_0x55d734]=0x1;if(!_0x415c72[_0x4312d5(0x1c2)])_0x415c72[_0x4312d5(0x1c2)]={};_0x415c72['_meta'][_0x55d734]=Date['now'](),_0x54eda7=!![];}}else _0x161b49&&_0x27d9d1[_0x4312d5(0x171)][_0x4312d5(0x152)](_0x4312d5(0x1a6)+_0x186b53+_0x4312d5(0x133));}else{if(_0xbf22b==='too_cold'){let _0x14e96c=![];if(_0x438b3c[_0x4312d5(0x196)](_0x48fbcf=>_0x48fbcf[_0x4312d5(0x1bf)]===_0x186b53))_0x14e96c=!![];const _0x184ad9=_0x22547f[_0x4312d5(0x1cf)](_0x3cab1c=>normalize(_0x3cab1c[_0x4312d5(0x18d)])===normalize(_0x186b53)&&(_0x3cab1c[_0x4312d5(0x161)]==='window'||_0x3cab1c['type']==='sensor'||_0x3cab1c[_0x4312d5(0x161)]===_0x4312d5(0x1aa)));for(const _0x42fe82 of _0x184ad9){try{const _0x4d0bc2=await _0x27d9d1['getForeignStateAsync'](_0x42fe82['id']);if(_0x4d0bc2&&(_0x4d0bc2[_0x4312d5(0x16b)]===!![]||_0x4d0bc2[_0x4312d5(0x16b)]===0x1||String(_0x4d0bc2[_0x4312d5(0x16b)])[_0x4312d5(0x142)]()==='open'))_0x14e96c=!![];}catch(_0x5168d4){}}if(_0x14e96c)_0x27d9d1[_0x4312d5(0x171)]['info'](_0x4312d5(0x12d)+_0x186b53+_0x4312d5(0x197));else{const _0x1c0573=_0x3870c8[_0x186b53]||_0x3870c8[_0x4312d5(0x1c1)]||0x15;_0x27d9d1[_0x4312d5(0x171)][_0x4312d5(0x152)](_0x4312d5(0x1d8)+_0x186b53+'\x20erreicht\x20Limit\x20('+_0x522e73[_0x4312d5(0x16b)]+_0x4312d5(0x198)+(_0x1c0573+0.2)+'Â°C).\x20Sparmodus\x20beendet!'),await _0x27d9d1[_0x4312d5(0x13c)](_0xe4c83a,_0x1c0573),await logAutomationAction(_0x27d9d1,_0x4312d5(0x16d)+_0x186b53+_0x4312d5(0x148)+_0x1c0573+'Â°C'),lastActions[_0x4312d5(0x168)+_0x186b53]=Date[_0x4312d5(0x15e)]();}}}_0x31f864[_0x4312d5(0x181)](_0xf71b4b,0x1),_0x2f9f03=!![];}}}}}_0x2f9f03&&await _0x27d9d1[_0x4312d5(0x132)](_0x495eaa,{'val':JSON['stringify'](_0x31f864),'ack':!![]}),_0x54eda7&&await _0x27d9d1[_0x4312d5(0x132)](_0x4312d5(0x1b3),{'val':JSON[_0x4312d5(0x1c9)](_0x415c72),'ack':!![]});}catch(_0x42ccb5){}}async function applyEnergySavings(_0x20bfe6,_0x33a22b){const _0x3e6d5a=a1_0x36a7b4;await cleanupGhostInterventions(_0x20bfe6);if(!_0x33a22b||_0x33a22b[_0x3e6d5a(0x193)]===0x0)return;const _0x5b0f60=_0x20bfe6[_0x3e6d5a(0x17c)][_0x3e6d5a(0x191)]||[],_0x29113e=Date[_0x3e6d5a(0x15e)]();for(const _0x34ed65 of _0x33a22b){const _0x3522b7=_0x34ed65[_0x3e6d5a(0x1bf)],_0x430041=_0x34ed65['minutes_safe'],_0x3f8061=_0x34ed65[_0x3e6d5a(0x14b)]||0x15;if(lastActions[_0x3e6d5a(0x168)+_0x3522b7]&&_0x29113e-lastActions[_0x3e6d5a(0x168)+_0x3522b7]<RESCUE_LOCK_MS)continue;const _0x581dc7=_0x5b0f60['find'](_0x60b766=>normalize(_0x60b766['location'])===normalize(_0x3522b7)&&(_0x60b766['type']==='temperature'||_0x60b766[_0x3e6d5a(0x161)]===_0x3e6d5a(0x146)));if(!_0x581dc7)continue;const _0xbd82b3=await findRelatedId(_0x20bfe6,_0x581dc7['id'],_0x3e6d5a(0x159));if(_0xbd82b3){if(lastActions[_0x3e6d5a(0x1a1)+_0x3522b7]&&_0x29113e-lastActions[_0x3e6d5a(0x1a1)+_0x3522b7]<0x1e*0x3c*0x3e8)continue;const _0x58137e=await _0x20bfe6[_0x3e6d5a(0x170)](_0xbd82b3);if(_0x58137e&&typeof _0x58137e['val']===_0x3e6d5a(0x16f)){const _0x3cfd56=_0x58137e[_0x3e6d5a(0x16b)];_0x3cfd56!==ECO_TEMP&&await manageMpcIntervention(_0x20bfe6,_0x3522b7,_0x3e6d5a(0x1e3));if(_0x430041>0x1e)_0x3cfd56>ECO_TEMP+0.5&&(_0x20bfe6[_0x3e6d5a(0x171)][_0x3e6d5a(0x152)](_0x3e6d5a(0x13d)+_0x3522b7+_0x3e6d5a(0x1d6)+ECO_TEMP+_0x3e6d5a(0x1e2)+_0x430041+_0x3e6d5a(0x1e4)),await _0x20bfe6['setForeignStateAsync'](_0xbd82b3,ECO_TEMP),await manageMpcIntervention(_0x20bfe6,_0x3522b7,_0x3e6d5a(0x169)),lastActions['mpc_'+_0x3522b7]=_0x29113e,await logAutomationAction(_0x20bfe6,_0x3e6d5a(0x1b8)+_0x3522b7+':\x20Absenkung\x20auf\x20'+ECO_TEMP+'Â°C'));else _0x430041<=0xf&&(_0x3cfd56<_0x3f8061&&(_0x20bfe6[_0x3e6d5a(0x171)][_0x3e6d5a(0x152)]('ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20'+_0x3522b7+_0x3e6d5a(0x1bd)+_0x3f8061+_0x3e6d5a(0x1bc)),await _0x20bfe6['setForeignStateAsync'](_0xbd82b3,_0x3f8061),await manageMpcIntervention(_0x20bfe6,_0x3522b7,'remove'),lastActions[_0x3e6d5a(0x1a1)+_0x3522b7]=_0x29113e,await logAutomationAction(_0x20bfe6,'[MPC]\x20'+_0x3522b7+_0x3e6d5a(0x1c7)+_0x3f8061+'Â°C')));}}else _0x20bfe6[_0x3e6d5a(0x171)][_0x3e6d5a(0x154)](_0x3e6d5a(0x1c6)+_0x3522b7+_0x3e6d5a(0x15a));}}module['exports']={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};