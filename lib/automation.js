const a1_0x5c76ca=a1_0x5704;function a1_0x5704(_0x40ef05,_0x499c5a){const _0x3fc36f=a1_0x1c69();return a1_0x5704=function(_0x109927,_0x2fa23f){_0x109927=_0x109927-0x157;let _0x1c6995=_0x3fc36f[_0x109927];return _0x1c6995;},a1_0x5704(_0x40ef05,_0x499c5a);}(function(_0x4122de,_0x52bc23){const _0x3039be=a1_0x5704,_0x34aa4e=_0x4122de();while(!![]){try{const _0x3a6493=parseInt(_0x3039be(0x17c))/0x1+parseInt(_0x3039be(0x188))/0x2+-parseInt(_0x3039be(0x17e))/0x3*(-parseInt(_0x3039be(0x159))/0x4)+-parseInt(_0x3039be(0x15e))/0x5+parseInt(_0x3039be(0x15b))/0x6*(parseInt(_0x3039be(0x15d))/0x7)+parseInt(_0x3039be(0x187))/0x8*(parseInt(_0x3039be(0x171))/0x9)+parseInt(_0x3039be(0x174))/0xa*(-parseInt(_0x3039be(0x175))/0xb);if(_0x3a6493===_0x52bc23)break;else _0x34aa4e['push'](_0x34aa4e['shift']());}catch(_0x18bdde){_0x34aa4e['push'](_0x34aa4e['shift']());}}}(a1_0x1c69,0x3f23a));const a1_0x2fa23f=(function(){let _0x5e1c81=!![];return function(_0x5ce0c2,_0x4e832c){const _0x253c9e=_0x5e1c81?function(){const _0x36d3d5=a1_0x5704;if(_0x4e832c){const _0x42a7d4=_0x4e832c[_0x36d3d5(0x165)](_0x5ce0c2,arguments);return _0x4e832c=null,_0x42a7d4;}}:function(){};return _0x5e1c81=![],_0x253c9e;};}()),a1_0x109927=a1_0x2fa23f(this,function(){const _0x468fa6=a1_0x5704;return a1_0x109927[_0x468fa6(0x179)]()[_0x468fa6(0x15f)]('(((.+)+)+)+$')['toString']()[_0x468fa6(0x17f)](a1_0x109927)[_0x468fa6(0x15f)](_0x468fa6(0x164));});a1_0x109927();'use strict';function a1_0x1c69(){const _0x419361=['390vCgowE','PrÃ¤diktion:\x20','11179zgzVjc','107035lxnOPi','search','setForeignStateAsync','light','location','toLowerCase','(((.+)+)+)+$','apply','getStateAsync','toUpperCase','switch','getForeignStateAsync','ðŸ”\x20Device-Search\x20failed:\x20Predicted\x20\x27','info','log','setStateAsync','[BLOCKED]\x20','\x20->\x20Schalte\x20','dimmer','88965npRapZ','Unknown','type','10zOaQrM','9380558PfwMBg','now','analysis.automation.mode','reason','toString','\x27),\x20but\x20found\x20no\x20matching\x20light\x20device.','name','358589dRYvzq','replace','219YuWDhv','constructor','trim','val','\x27\x20(norm:\x20\x27','analysis.automation.lastAction','config','ðŸ‘€\x20SIMULATION:\x20','consultButler','208vkINpS','164250lubclL','active','./ai_agent','find','off','18152kSwTmf','simulate'];a1_0x1c69=function(){return _0x419361;};return a1_0x1c69();}const aiAgent=require(a1_0x5c76ca(0x18a)),COOLDOWN_MS=0x3c*0x3e8,lastActions={};function normalize(_0x51cf7e){const _0x31de83=a1_0x5c76ca;if(!_0x51cf7e)return'';return _0x51cf7e[_0x31de83(0x163)]()[_0x31de83(0x17d)](/\s+/g,'')[_0x31de83(0x180)]();}async function handlePrediction(_0x4bd5ac,_0x37cb4b,_0x5927a6){const _0x32e4dc=a1_0x5c76ca;if(!_0x37cb4b||_0x37cb4b===_0x32e4dc(0x172))return;let _0x1bbc65=_0x32e4dc(0x158),_0x5b767e=0.6;try{const _0xd63f0f=await _0x4bd5ac[_0x32e4dc(0x166)](_0x32e4dc(0x177));if(_0xd63f0f&&_0xd63f0f[_0x32e4dc(0x181)])_0x1bbc65=_0xd63f0f[_0x32e4dc(0x181)];const _0x4429c0=await _0x4bd5ac['getStateAsync']('analysis.automation.confidenceThreshold');if(_0x4429c0&&_0x4429c0['val'])_0x5b767e=_0x4429c0[_0x32e4dc(0x181)];}catch(_0x3595ae){}if(_0x1bbc65===_0x32e4dc(0x158))return;if(_0x5927a6<_0x5b767e)return;const _0x5bca94=Date[_0x32e4dc(0x176)]();if(lastActions[_0x37cb4b]&&_0x5bca94-lastActions[_0x37cb4b]<COOLDOWN_MS)return;const _0x175513=_0x4bd5ac[_0x32e4dc(0x184)]['devices']||[],_0x1325f5=normalize(_0x37cb4b),_0x3b57a4=_0x175513[_0x32e4dc(0x157)](_0x2d026e=>{const _0x50facb=_0x32e4dc;return normalize(_0x2d026e[_0x50facb(0x162)])===_0x1325f5&&(_0x2d026e[_0x50facb(0x173)]===_0x50facb(0x161)||_0x2d026e[_0x50facb(0x173)]===_0x50facb(0x170)||_0x2d026e[_0x50facb(0x173)]===_0x50facb(0x168));});if(!_0x3b57a4){const _0x288447=_0x32e4dc(0x16a)+_0x37cb4b+_0x32e4dc(0x182)+_0x1325f5+_0x32e4dc(0x17a);_0x4bd5ac[_0x32e4dc(0x16c)]['debug'](_0x288447);return;}const _0x297ff4=await aiAgent[_0x32e4dc(0x186)](_0x4bd5ac,_0x37cb4b,_0x3b57a4[_0x32e4dc(0x17b)],_0x5927a6);if(!_0x297ff4['approved']){_0x4bd5ac['log']['debug']('ðŸ¤–\x20Butler\x20Blocked:\x20'+_0x37cb4b+'\x20->\x20'+_0x297ff4[_0x32e4dc(0x178)]),await _0x4bd5ac['setStateAsync'](_0x32e4dc(0x183),{'val':_0x32e4dc(0x16e)+_0x297ff4[_0x32e4dc(0x178)],'ack':!![]});return;}const _0x54e47f=_0x32e4dc(0x15c)+_0x37cb4b+_0x32e4dc(0x16f)+_0x3b57a4['name']+'\x20('+_0x297ff4[_0x32e4dc(0x178)]+')';await _0x4bd5ac[_0x32e4dc(0x16d)](_0x32e4dc(0x183),{'val':'['+_0x1bbc65[_0x32e4dc(0x167)]()+']\x20'+_0x54e47f,'ack':!![]});if(_0x1bbc65===_0x32e4dc(0x15a))_0x4bd5ac[_0x32e4dc(0x16c)][_0x32e4dc(0x16b)](_0x32e4dc(0x185)+_0x54e47f);else{if(_0x1bbc65===_0x32e4dc(0x189)){_0x4bd5ac['log'][_0x32e4dc(0x16b)]('âš¡\x20ACTION:\x20'+_0x54e47f);const _0xd65152=await _0x4bd5ac[_0x32e4dc(0x169)](_0x3b57a4['id']);if(_0xd65152&&(_0xd65152[_0x32e4dc(0x181)]===!![]||_0xd65152[_0x32e4dc(0x181)]>0x0)){}else await _0x4bd5ac[_0x32e4dc(0x160)](_0x3b57a4['id'],!![]);lastActions[_0x37cb4b]=_0x5bca94;}}}module['exports']={'handlePrediction':handlePrediction};