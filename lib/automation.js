const a1_0xcccf98=a1_0xca5f;(function(_0x26bf8c,_0x43117a){const _0x1a8501=a1_0xca5f,_0x2aa8ab=_0x26bf8c();while(!![]){try{const _0x4533a9=parseInt(_0x1a8501(0x276))/0x1*(parseInt(_0x1a8501(0x28c))/0x2)+parseInt(_0x1a8501(0x29e))/0x3*(-parseInt(_0x1a8501(0x25a))/0x4)+parseInt(_0x1a8501(0x27e))/0x5+parseInt(_0x1a8501(0x27b))/0x6+-parseInt(_0x1a8501(0x26c))/0x7+parseInt(_0x1a8501(0x274))/0x8*(parseInt(_0x1a8501(0x271))/0x9)+-parseInt(_0x1a8501(0x2a6))/0xa;if(_0x4533a9===_0x43117a)break;else _0x2aa8ab['push'](_0x2aa8ab['shift']());}catch(_0x2e2aa0){_0x2aa8ab['push'](_0x2aa8ab['shift']());}}}(a1_0x4091,0x35ee1));const a1_0xa764e=(function(){let _0x4371ee=!![];return function(_0x58e62d,_0x382d11){const _0x481379=_0x4371ee?function(){const _0x24328b=a1_0xca5f;if(_0x382d11){const _0x582380=_0x382d11[_0x24328b(0x1f5)](_0x58e62d,arguments);return _0x382d11=null,_0x582380;}}:function(){};return _0x4371ee=![],_0x481379;};}()),a1_0x3ed853=a1_0xa764e(this,function(){const _0x1ccd9a=a1_0xca5f;return a1_0x3ed853[_0x1ccd9a(0x29c)]()[_0x1ccd9a(0x20d)](_0x1ccd9a(0x2b0))[_0x1ccd9a(0x29c)]()[_0x1ccd9a(0x261)](a1_0x3ed853)['search'](_0x1ccd9a(0x2b0));});a1_0x3ed853();'use strict';const aiAgent=require(a1_0xcccf98(0x227)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x4773c3){const _0x71c3b8=a1_0xcccf98;if(!_0x4773c3)return'';return _0x4773c3['toLowerCase']()[_0x71c3b8(0x2b5)](/\s+/g,'')['trim']();}function getWarmupRobust(_0x40c363,_0x22742a){const _0x3d5c15=a1_0xcccf98;if(!_0x40c363||!_0x22742a)return 0x3c;if(_0x40c363[_0x22742a]!==undefined)return _0x40c363[_0x22742a];const _0x28a7c0=_0x22742a[_0x3d5c15(0x226)]()[_0x3d5c15(0x2b5)](/Ã¤/g,'ae')[_0x3d5c15(0x2b5)](/Ã¶/g,'oe')[_0x3d5c15(0x2b5)](/Ã¼/g,'ue')[_0x3d5c15(0x2b5)](/ÃŸ/g,'ss')['replace'](/\s+/g,'_')[_0x3d5c15(0x2b5)](/[^a-z0-9_]/g,'');if(_0x40c363[_0x28a7c0]!==undefined)return _0x40c363[_0x28a7c0];return 0x3c;}async function logAutomationAction(_0xb667c8,_0x1def9f){const _0x585ec3=a1_0xcccf98;await _0xb667c8[_0x585ec3(0x25e)](_0x585ec3(0x283),{'val':_0x1def9f,'ack':!![]});try{const _0x391908=_0x585ec3(0x216),_0x1b36d4=await _0xb667c8['getStateAsync'](_0x391908);let _0x3b30e0=[];if(_0x1b36d4&&_0x1b36d4['val'])try{_0x3b30e0=JSON[_0x585ec3(0x275)](_0x1b36d4[_0x585ec3(0x257)]);}catch(_0x4d9f3a){}_0x3b30e0[_0x585ec3(0x296)]({'ts':Date[_0x585ec3(0x21a)](),'msg':_0x1def9f});if(_0x3b30e0[_0x585ec3(0x250)]>0x32)_0x3b30e0=_0x3b30e0['slice'](0x0,0x32);await _0xb667c8[_0x585ec3(0x25e)](_0x391908,{'val':JSON[_0x585ec3(0x241)](_0x3b30e0),'ack':!![]});}catch(_0x3b9d2d){}}async function handlePrediction(_0x2c9848,_0x5a5c35,_0x423f81){const _0x51720f=a1_0xcccf98;if(!_0x5a5c35||_0x5a5c35===_0x51720f(0x209))return;let _0x33e153=_0x51720f(0x237),_0x530f4c=0.6;try{const _0x17c709=await _0x2c9848[_0x51720f(0x285)]('analysis.automation.mode');if(_0x17c709&&_0x17c709[_0x51720f(0x257)])_0x33e153=_0x17c709['val'];const _0x44445b=await _0x2c9848[_0x51720f(0x285)]('analysis.automation.confidenceThreshold');if(_0x44445b&&_0x44445b[_0x51720f(0x257)])_0x530f4c=_0x44445b[_0x51720f(0x257)];}catch(_0x293608){}if(_0x33e153===_0x51720f(0x237)||_0x423f81<_0x530f4c)return;const _0x593059=Date[_0x51720f(0x21a)]();if(lastActions[_0x5a5c35]&&_0x593059-lastActions[_0x5a5c35]<COOLDOWN_MS)return;const _0x325425=_0x2c9848['config']['devices']||[],_0x98289e=normalize(_0x5a5c35),_0x55903a=_0x325425[_0x51720f(0x2ac)](_0x58089e=>normalize(_0x58089e[_0x51720f(0x23b)])===_0x98289e&&(_0x58089e[_0x51720f(0x224)]===_0x51720f(0x2af)||_0x58089e[_0x51720f(0x224)]===_0x51720f(0x247)||_0x58089e[_0x51720f(0x224)]===_0x51720f(0x242)));if(!_0x55903a)return;const _0x4c97d0=await aiAgent[_0x51720f(0x1f2)](_0x2c9848,_0x5a5c35,_0x55903a['name'],_0x423f81);if(!_0x4c97d0[_0x51720f(0x29b)])return;const _0x4c156c=_0x51720f(0x27a)+_0x5a5c35+_0x51720f(0x213)+_0x55903a[_0x51720f(0x220)]+'\x20('+_0x4c97d0['reason']+')';await logAutomationAction(_0x2c9848,'['+_0x33e153[_0x51720f(0x1f3)]()+']\x20'+_0x4c156c);if(_0x33e153===_0x51720f(0x23e)){const _0x41da90=await _0x2c9848['getForeignStateAsync'](_0x55903a['id']);(!_0x41da90||!_0x41da90['val']&&_0x41da90[_0x51720f(0x257)]!==!![])&&await _0x2c9848['setForeignStateAsync'](_0x55903a['id'],!![]),lastActions[_0x5a5c35]=_0x593059;}}async function findRelatedId(_0x20b299,_0x83abb5,_0x361d04=a1_0xcccf98(0x1f8)){const _0x3e119f=a1_0xcccf98;if(_0x361d04===_0x3e119f(0x1f8)&&_0x20b299[_0x3e119f(0x1f4)][_0x3e119f(0x298)]){let _0x2ba33a=_0x20b299[_0x3e119f(0x1f4)][_0x3e119f(0x298)];if(typeof _0x2ba33a===_0x3e119f(0x208))try{_0x2ba33a=JSON[_0x3e119f(0x275)](_0x2ba33a);}catch(_0x5aad72){}if(_0x2ba33a&&_0x2ba33a[_0x83abb5])return _0x2ba33a[_0x83abb5];}if(_0x361d04==='valve'&&_0x20b299[_0x3e119f(0x1f4)][_0x3e119f(0x23f)]){let _0x1cae72=_0x20b299[_0x3e119f(0x1f4)][_0x3e119f(0x23f)];if(typeof _0x1cae72===_0x3e119f(0x208))try{_0x1cae72=JSON['parse'](_0x1cae72);}catch(_0x524dfe){}if(_0x1cae72&&_0x1cae72[_0x83abb5])return _0x1cae72[_0x83abb5];}let _0x8ac99d=[];if(_0x361d04===_0x3e119f(0x1f8))_0x8ac99d=[{'s':_0x3e119f(0x201),'t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x3e119f(0x280),'t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x3e119f(0x280),'t':_0x3e119f(0x225)},{'s':_0x3e119f(0x218),'t':_0x3e119f(0x21b)},{'s':_0x3e119f(0x256),'t':_0x3e119f(0x2b3)},{'s':_0x3e119f(0x256),'t':_0x3e119f(0x253)},{'s':_0x3e119f(0x252),'t':_0x3e119f(0x229)},{'s':_0x3e119f(0x20e),'t':'SET'},{'s':'Ist','t':_0x3e119f(0x246)},{'s':_0x3e119f(0x252),'t':'setpoint'}];else _0x361d04===_0x3e119f(0x2a4)&&(_0x8ac99d=[{'s':_0x3e119f(0x201),'t':'.1.LEVEL'},{'s':_0x3e119f(0x280),'t':_0x3e119f(0x2a2)},{'s':_0x3e119f(0x280),'t':_0x3e119f(0x263)},{'s':'local_temperature','t':'pi_heating_demand'},{'s':_0x3e119f(0x252),'t':_0x3e119f(0x2b9)},{'s':_0x3e119f(0x252),'t':_0x3e119f(0x259)}]);for(const _0x2d0011 of _0x8ac99d){if(_0x83abb5[_0x3e119f(0x28d)](_0x2d0011['s'])){const _0x1d5edb=_0x83abb5[_0x3e119f(0x2b5)](_0x2d0011['s'],_0x2d0011['t']),_0xf48410=await _0x20b299[_0x3e119f(0x2b8)](_0x1d5edb);if(_0xf48410)return _0x1d5edb;}}try{const _0x19566b=_0x83abb5['split']('.');if(_0x19566b[_0x3e119f(0x250)]>0x2){const _0x3ed06f=_0x19566b[_0x3e119f(0x295)](0x0,-0x1)[_0x3e119f(0x2b4)]('.'),_0x3e7010=await _0x20b299['getForeignObjectsAsync'](_0x3ed06f+'.*'),_0x130efd=[],_0x45bda1=_0x83abb5[_0x3e119f(0x2a7)](/[._]+/)[_0x3e119f(0x288)](_0x390857=>![_0x3e119f(0x203),'0',_0x3e119f(0x287),_0x3e119f(0x2c0),_0x3e119f(0x27c),_0x3e119f(0x252),_0x3e119f(0x215),_0x3e119f(0x258),_0x3e119f(0x206),_0x3e119f(0x262)][_0x3e119f(0x28d)](_0x390857['toLowerCase']()));for(const [_0x2a86c1,_0x43eaba]of Object[_0x3e119f(0x2a1)](_0x3e7010)){if(_0x2a86c1===_0x83abb5)continue;if(_0x43eaba&&_0x43eaba[_0x3e119f(0x239)]){const _0x170fce=_0x2a86c1['toLowerCase'](),_0x268171=(_0x43eaba[_0x3e119f(0x239)][_0x3e119f(0x243)]||'')[_0x3e119f(0x226)](),_0x4b6107=(_0x43eaba[_0x3e119f(0x239)]['unit']||'')[_0x3e119f(0x226)]();let _0x388331=![];if(_0x361d04===_0x3e119f(0x1f8)&&_0x43eaba[_0x3e119f(0x239)][_0x3e119f(0x297)]===!![])_0x388331=_0x170fce[_0x3e119f(0x28d)](_0x3e119f(0x221))||_0x170fce[_0x3e119f(0x28d)](_0x3e119f(0x217))||_0x170fce['includes']('target')||_0x268171[_0x3e119f(0x28d)](_0x3e119f(0x22b))||_0x268171[_0x3e119f(0x28d)](_0x3e119f(0x2a8));else _0x361d04===_0x3e119f(0x2a4)&&(_0x388331=_0x170fce[_0x3e119f(0x28d)]('level')||_0x170fce[_0x3e119f(0x28d)]('valve')||_0x170fce[_0x3e119f(0x28d)](_0x3e119f(0x228))||_0x170fce[_0x3e119f(0x28d)](_0x3e119f(0x21e))||_0x268171[_0x3e119f(0x28d)](_0x3e119f(0x2b2))||_0x268171[_0x3e119f(0x28d)](_0x3e119f(0x207))||_0x4b6107[_0x3e119f(0x28d)]('%'));if(_0x388331){const _0x5617b4=_0x2a86c1[_0x3e119f(0x2a7)](/[._]+/)[_0x3e119f(0x24c)](_0x3f84d9=>_0x3f84d9[_0x3e119f(0x226)]());let _0x15f266=0x0;_0x45bda1[_0x3e119f(0x26a)](_0x571e3a=>{const _0x2d9119=_0x3e119f;if(_0x5617b4[_0x2d9119(0x28d)](_0x571e3a['toLowerCase']()))_0x15f266++;}),_0x130efd[_0x3e119f(0x23d)]({'id':_0x2a86c1,'score':_0x15f266});}}}if(_0x130efd[_0x3e119f(0x250)]>0x0){_0x130efd['sort']((_0x24c271,_0x8bf628)=>_0x8bf628['score']-_0x24c271['score']);if(_0x130efd[0x0][_0x3e119f(0x222)]>0x0)return _0x130efd[0x0]['id'];}}}catch(_0x4970be){}return null;}async function scanThermostats(_0x239cce){const _0x4aaee1=a1_0xcccf98,_0xdfb6d7=_0x239cce[_0x4aaee1(0x1f4)][_0x4aaee1(0x22a)]||[],_0x40af80=[],_0x405e5c=_0xdfb6d7[_0x4aaee1(0x288)](_0x295ae1=>_0x295ae1['id']&&_0x295ae1['id'][_0x4aaee1(0x28d)](_0x4aaee1(0x252))||_0x295ae1[_0x4aaee1(0x224)]&&['temperature','thermostat',_0x4aaee1(0x258)][_0x4aaee1(0x28d)](_0x295ae1['type'])||_0x295ae1[_0x4aaee1(0x220)]&&_0x295ae1[_0x4aaee1(0x220)]['toLowerCase']()[_0x4aaee1(0x28d)](_0x4aaee1(0x26e)));for(const _0x1ff5cd of _0x405e5c){const _0xc2aadf=await findRelatedId(_0x239cce,_0x1ff5cd['id'],'setpoint'),_0x132bcb=await findRelatedId(_0x239cce,_0x1ff5cd['id'],_0x4aaee1(0x2a4));let _0x1a9ce1=_0x4aaee1(0x25d),_0x11f20b=![],_0x2a111f=_0x239cce[_0x4aaee1(0x1f4)]['thermostatMapping']||{};if(typeof _0x2a111f===_0x4aaee1(0x208))try{_0x2a111f=JSON['parse'](_0x2a111f);}catch(_0x1b554e){}let _0x14ea4d=_0x239cce[_0x4aaee1(0x1f4)]['valveMapping']||{};if(typeof _0x14ea4d===_0x4aaee1(0x208))try{_0x14ea4d=JSON[_0x4aaee1(0x275)](_0x14ea4d);}catch(_0x3f9a86){}if(_0x2a111f[_0x1ff5cd['id']]&&_0x2a111f[_0x1ff5cd['id']]===_0xc2aadf||_0x14ea4d[_0x1ff5cd['id']]&&_0x14ea4d[_0x1ff5cd['id']]===_0x132bcb)_0x1a9ce1=_0x4aaee1(0x234),_0x11f20b=!![];else(_0xc2aadf||_0x132bcb)&&(_0x1a9ce1='Auto-Erkennung');_0x40af80[_0x4aaee1(0x23d)]({'room':_0x1ff5cd[_0x4aaee1(0x23b)]||_0x4aaee1(0x1fb),'sensorId':_0x1ff5cd['id'],'setpointId':_0xc2aadf||'-','valveId':_0x132bcb||'-','source':_0x1a9ce1,'isManual':_0x11f20b,'status':_0xc2aadf&&_0x132bcb?_0x4aaee1(0x26b):_0xc2aadf?'OK':_0x4aaee1(0x28f)});}return _0x40af80[_0x4aaee1(0x25b)]((_0x2a5095,_0xc829c3)=>_0x2a5095['room']['localeCompare'](_0xc829c3[_0x4aaee1(0x251)]));}function a1_0xca5f(_0x350028,_0x54317d){const _0x43017e=a1_0x4091();return a1_0xca5f=function(_0x3ed853,_0xa764e){_0x3ed853=_0x3ed853-0x1f1;let _0x409128=_0x43017e[_0x3ed853];return _0x409128;},a1_0xca5f(_0x350028,_0x54317d);}async function updateSchedulePreview(_0x322d5b){const _0x48d811=a1_0xcccf98;if(!_0x322d5b[_0x48d811(0x1f4)][_0x48d811(0x26f)]||!_0x322d5b['config'][_0x48d811(0x2a3)])return;let _0x5144c4={};try{const _0x1f8b9d=await _0x322d5b[_0x48d811(0x285)](_0x48d811(0x21f));if(_0x1f8b9d&&_0x1f8b9d[_0x48d811(0x257)])_0x5144c4=JSON[_0x48d811(0x275)](_0x1f8b9d['val']);}catch(_0x1a6aee){}const _0x4858b6=[],_0x4b30eb=Date[_0x48d811(0x21a)](),_0x1f29cd=0x30*0x3c*0x3c*0x3e8;try{const _0x2e5d35=await _0x322d5b[_0x48d811(0x268)](_0x322d5b[_0x48d811(0x1f4)][_0x48d811(0x2a3)]+'.data.table');if(!_0x2e5d35||!_0x2e5d35[_0x48d811(0x257)])return;const _0x1d5b6f=JSON[_0x48d811(0x275)](_0x2e5d35[_0x48d811(0x257)]),_0x122a98=_0x322d5b['config']['calendarSelection']||[],_0x499711=_0x322d5b['config']['devices']||[],_0x2db793=new Set();_0x499711['forEach'](_0x15f2ef=>{const _0x877559=_0x48d811;if(_0x15f2ef[_0x877559(0x23b)])_0x2db793[_0x877559(0x29a)](_0x15f2ef['location']);});for(const _0x4ad058 of _0x1d5b6f){if(_0x4ad058['_calName']&&_0x122a98['length']>0x0&&!_0x122a98[_0x48d811(0x28d)](_0x4ad058[_0x48d811(0x293)]))continue;const _0xff6083=_0x4ad058['_date']||_0x4ad058[_0x48d811(0x2ad)]||_0x4ad058[_0x48d811(0x1fd)];if(!_0xff6083)continue;const _0x500efd=new Date(_0xff6083),_0x2387c8=_0x500efd[_0x48d811(0x260)]();if(isNaN(_0x2387c8))continue;if(_0x2387c8<_0x4b30eb)continue;if(_0x2387c8>_0x4b30eb+_0x1f29cd)continue;const _0x53d97b=(_0x4ad058[_0x48d811(0x236)]||_0x4ad058['summary']||'')[_0x48d811(0x226)]();let _0xa3df34=![],_0x5976a8=[],_0x47eb65=_0x4ad058[_0x48d811(0x236)]||_0x4ad058[_0x48d811(0x211)]||'Unbekannt';if(_0x53d97b[_0x48d811(0x28d)](_0x48d811(0x238))||_0x53d97b[_0x48d811(0x28d)](_0x48d811(0x22d))||_0x53d97b[_0x48d811(0x28d)]('ankunft'))_0xa3df34=!![],_0x5976a8=Array[_0x48d811(0x23a)](_0x2db793);else for(const _0x39fd40 of _0x2db793){if(_0x53d97b[_0x48d811(0x28d)](_0x39fd40['toLowerCase']()))_0x5976a8[_0x48d811(0x23d)](_0x39fd40);}_0x5976a8[_0x48d811(0x250)]>0x0&&_0x5976a8[_0x48d811(0x26a)](_0x3ce598=>{const _0x554389=_0x48d811;let _0x379c70=0x3c;if(_0xa3df34){let _0x5b250f=0x0;Object[_0x554389(0x24d)](_0x5144c4)[_0x554389(0x26a)](_0x1af386=>{if(_0x1af386>_0x5b250f)_0x5b250f=_0x1af386;}),_0x379c70=_0x5b250f>0x0?_0x5b250f:0x78;}else _0x379c70=getWarmupRobust(_0x5144c4,_0x3ce598);const _0x439a5f=new Date(_0x2387c8-_0x379c70*0xea60);_0x4858b6[_0x554389(0x23d)]({'eventTime':_0x2387c8,'triggerTime':_0x439a5f[_0x554389(0x260)](),'room':_0x3ce598,'minutes':_0x379c70,'reason':_0x47eb65,'isGlobal':_0xa3df34});});}}catch(_0x2776f3){}_0x4858b6[_0x48d811(0x25b)]((_0x28df11,_0x465c78)=>_0x28df11[_0x48d811(0x248)]-_0x465c78[_0x48d811(0x248)]);const _0x406073=_0x4858b6[_0x48d811(0x295)](0x0,0x5);await _0x322d5b[_0x48d811(0x25e)](_0x48d811(0x27d),{'val':JSON['stringify'](_0x406073),'ack':!![]});}async function monitorEnforcements(_0x4297bf){const _0x367b9c=a1_0xcccf98;try{const _0x3f5d1e='analysis.energy.activeEnforcements',_0x8b7cb1=await _0x4297bf['getStateAsync'](_0x3f5d1e);if(!_0x8b7cb1||!_0x8b7cb1[_0x367b9c(0x257)])return;let _0x467e4c=[];try{_0x467e4c=JSON['parse'](_0x8b7cb1[_0x367b9c(0x257)]);}catch(_0x932756){return;}if(!Array['isArray'](_0x467e4c)||_0x467e4c[_0x367b9c(0x250)]===0x0)return;const _0x5abd9d=Date[_0x367b9c(0x21a)](),_0x535bd4=_0x4297bf['config'][_0x367b9c(0x22a)]||[];let _0x131d2e=![];for(let _0x4a1f09=_0x467e4c['length']-0x1;_0x4a1f09>=0x0;_0x4a1f09--){const _0x20b379=_0x467e4c[_0x4a1f09];if(_0x5abd9d>=_0x20b379[_0x367b9c(0x27f)]){_0x4297bf['log'][_0x367b9c(0x278)](_0x367b9c(0x277)+_0x20b379[_0x367b9c(0x251)]+_0x367b9c(0x2aa)),_0x467e4c[_0x367b9c(0x205)](_0x4a1f09,0x1),_0x131d2e=!![];continue;}const _0xea02c4=_0x535bd4[_0x367b9c(0x2ac)](_0x224ec9=>normalize(_0x224ec9[_0x367b9c(0x23b)])===normalize(_0x20b379[_0x367b9c(0x251)])&&(_0x224ec9[_0x367b9c(0x224)]===_0x367b9c(0x252)||_0x224ec9[_0x367b9c(0x224)]==='thermostat'));if(_0xea02c4){const _0x1142bb=await findRelatedId(_0x4297bf,_0xea02c4['id'],'setpoint');if(_0x1142bb){const _0x580338=await _0x4297bf['getForeignStateAsync'](_0x1142bb);_0x580338&&typeof _0x580338[_0x367b9c(0x257)]===_0x367b9c(0x279)&&(_0x580338[_0x367b9c(0x257)]<0xf&&(_0x4297bf[_0x367b9c(0x266)][_0x367b9c(0x284)](_0x367b9c(0x255)+_0x20b379[_0x367b9c(0x251)]+'\x20auf\x20'+_0x580338[_0x367b9c(0x257)]+_0x367b9c(0x1f1)+_0x20b379[_0x367b9c(0x28b)]+_0x367b9c(0x282)),await _0x4297bf['setForeignStateAsync'](_0x1142bb,_0x20b379[_0x367b9c(0x28b)]),await logAutomationAction(_0x4297bf,_0x367b9c(0x25c)+_0x20b379[_0x367b9c(0x251)]+':\x20'+_0x580338['val']+'Â°C\x20->\x20'+_0x20b379[_0x367b9c(0x28b)]+_0x367b9c(0x281))));}}}_0x131d2e&&await _0x4297bf['setStateAsync'](_0x3f5d1e,{'val':JSON[_0x367b9c(0x241)](_0x467e4c),'ack':!![]});}catch(_0x2b7ba9){_0x4297bf[_0x367b9c(0x266)][_0x367b9c(0x223)](_0x367b9c(0x290)+_0x2b7ba9[_0x367b9c(0x2a0)]);}}async function checkCalendarTriggers(_0x290ff6){const _0x2863d1=a1_0xcccf98;if(!_0x290ff6[_0x2863d1(0x1f4)][_0x2863d1(0x26f)]||!_0x290ff6[_0x2863d1(0x1f4)]['calendarInstance'])return;await updateSchedulePreview(_0x290ff6);let _0x2d7e5b={},_0x1e19de={};try{const _0xaa8824=await _0x290ff6[_0x2863d1(0x285)](_0x2863d1(0x21f));if(_0xaa8824&&_0xaa8824[_0x2863d1(0x257)])_0x2d7e5b=JSON['parse'](_0xaa8824[_0x2863d1(0x257)]);const _0x1e0516=await _0x290ff6['getStateAsync'](_0x2863d1(0x26d));if(_0x1e0516&&_0x1e0516[_0x2863d1(0x257)])_0x1e19de=JSON['parse'](_0x1e0516[_0x2863d1(0x257)]);}catch(_0x138353){}let _0x578b7b={'default':0x15};try{const _0x142aaa=await _0x290ff6[_0x2863d1(0x285)](_0x2863d1(0x23c));if(_0x142aaa&&_0x142aaa[_0x2863d1(0x257)])_0x578b7b=JSON[_0x2863d1(0x275)](_0x142aaa[_0x2863d1(0x257)]);}catch(_0x247298){}let _0x1777a9=[];try{const _0x7abf4a=await _0x290ff6[_0x2863d1(0x285)](_0x2863d1(0x244));if(_0x7abf4a&&_0x7abf4a['val'])_0x1777a9=JSON[_0x2863d1(0x275)](_0x7abf4a[_0x2863d1(0x257)]);}catch(_0xed81ee){}try{const _0x120c73=await _0x290ff6['getForeignStateAsync'](_0x290ff6[_0x2863d1(0x1f4)][_0x2863d1(0x2a3)]+_0x2863d1(0x2b7));if(!_0x120c73||!_0x120c73[_0x2863d1(0x257)])return;const _0x523169=JSON['parse'](_0x120c73['val']),_0x905140=Date['now'](),_0x72921=_0x290ff6[_0x2863d1(0x1f4)]['devices']||[],_0x4592b5=_0x290ff6['config'][_0x2863d1(0x1fc)]||[];let _0x13f0ac=![];for(const _0x42ff85 of _0x523169){if(_0x42ff85['_calName']&&_0x4592b5[_0x2863d1(0x250)]>0x0&&!_0x4592b5[_0x2863d1(0x28d)](_0x42ff85[_0x2863d1(0x293)]))continue;const _0x12a50a=_0x42ff85[_0x2863d1(0x200)]||_0x42ff85[_0x2863d1(0x2ad)]||_0x42ff85[_0x2863d1(0x1fd)];if(!_0x12a50a)continue;const _0x5b037=new Date(_0x12a50a);if(isNaN(_0x5b037[_0x2863d1(0x260)]()))continue;const _0x1e3603=(_0x42ff85['event']||_0x42ff85[_0x2863d1(0x211)]||'')[_0x2863d1(0x226)]();if(_0x1e3603[_0x2863d1(0x28d)](_0x2863d1(0x238))||_0x1e3603[_0x2863d1(0x28d)](_0x2863d1(0x22d))||_0x1e3603['includes'](_0x2863d1(0x254))){let _0x5c3b0c=0x0;Object[_0x2863d1(0x24d)](_0x2d7e5b)[_0x2863d1(0x26a)](_0x4f88e4=>{if(_0x4f88e4>_0x5c3b0c)_0x5c3b0c=_0x4f88e4;});if(_0x5c3b0c===0x0)_0x5c3b0c=0x78;const _0x1ce6c3=_0x5b037[_0x2863d1(0x260)]()-_0x5c3b0c*0xea60;_0x905140>=_0x1ce6c3&&_0x905140<_0x5b037[_0x2863d1(0x260)]()&&(_0x290ff6[_0x2863d1(0x22f)]!==_0x2863d1(0x245)&&(_0x290ff6['log'][_0x2863d1(0x278)](_0x2863d1(0x299)+_0x5c3b0c+_0x2863d1(0x2b1)),await _0x290ff6[_0x2863d1(0x25e)](_0x2863d1(0x2ba),{'val':_0x2863d1(0x245),'ack':![]})));}for(const _0x2d2cb7 of _0x72921){if(_0x2d2cb7[_0x2863d1(0x23b)]){const _0x2b7bd3=_0x2d2cb7[_0x2863d1(0x23b)][_0x2863d1(0x226)](),_0x22f32b=(_0x2d2cb7['name']||'')['toLowerCase']();let _0xf8af7a=_0x1e3603[_0x2863d1(0x28d)](_0x2b7bd3);!_0xf8af7a&&_0x22f32b[_0x2863d1(0x250)]>0x3&&_0x1e3603[_0x2863d1(0x28d)](_0x22f32b)&&(_0xf8af7a=!![]);if(_0xf8af7a){const _0x177e93=getWarmupRobust(_0x2d7e5b,_0x2d2cb7[_0x2863d1(0x23b)]),_0x154eb0=_0x1e19de[_0x2d2cb7[_0x2863d1(0x23b)]]||_0x2863d1(0x235),_0xa5173c=_0x5b037[_0x2863d1(0x260)]()-_0x177e93*0xea60;if(_0x905140>=_0xa5173c&&_0x905140<_0x5b037[_0x2863d1(0x260)]()){const _0x1498a8=lastActions['cal_'+_0x2d2cb7[_0x2863d1(0x23b)]];if(_0x1498a8&&_0x905140-_0x1498a8<CAL_COOLDOWN_MS)continue;const _0xac9666=await findRelatedId(_0x290ff6,_0x2d2cb7['id'],_0x2863d1(0x1f8));if(_0xac9666){let _0x1a8a5c=_0x578b7b[_0x2d2cb7[_0x2863d1(0x23b)]];if(_0x1a8a5c===undefined)_0x1a8a5c=_0x578b7b[_0x2863d1(0x1f9)];if(_0x1a8a5c===undefined)_0x1a8a5c=0x15;const _0x5427e8=await _0x290ff6['getForeignStateAsync'](_0xac9666);if(_0x5427e8&&typeof _0x5427e8['val']==='number'&&_0x5427e8[_0x2863d1(0x257)]<_0x1a8a5c-0.5){_0x290ff6[_0x2863d1(0x266)][_0x2863d1(0x278)](_0x2863d1(0x2bc)+_0x154eb0+_0x2863d1(0x2bb)+_0x2d2cb7[_0x2863d1(0x23b)]+_0x2863d1(0x1fa)+_0x1e3603+_0x2863d1(0x28e)+_0x1a8a5c+_0x2863d1(0x2b6)+_0x177e93+_0x2863d1(0x2b1)),await _0x290ff6[_0x2863d1(0x2ab)](_0xac9666,_0x1a8a5c),await logAutomationAction(_0x290ff6,_0x2863d1(0x1f7)+_0x2d2cb7[_0x2863d1(0x23b)]+_0x2863d1(0x286)+_0x1a8a5c+_0x2863d1(0x214)+_0x154eb0+')'),lastActions['cal_'+_0x2d2cb7[_0x2863d1(0x23b)]]=_0x905140;const _0x181a57=_0x1777a9[_0x2863d1(0x240)](_0x47c9c3=>_0x47c9c3[_0x2863d1(0x251)]===_0x2d2cb7[_0x2863d1(0x23b)]);if(_0x181a57!==-0x1)_0x1777a9[_0x2863d1(0x205)](_0x181a57,0x1);_0x1777a9[_0x2863d1(0x23d)]({'room':_0x2d2cb7[_0x2863d1(0x23b)],'target':_0x1a8a5c,'until':_0x5b037[_0x2863d1(0x260)]()}),_0x13f0ac=!![];}}}}}}}_0x13f0ac&&await _0x290ff6['setStateAsync'](_0x2863d1(0x244),{'val':JSON['stringify'](_0x1777a9),'ack':!![]});}catch(_0x26967a){_0x290ff6[_0x2863d1(0x266)][_0x2863d1(0x284)](_0x2863d1(0x24f)+_0x26967a[_0x2863d1(0x2a0)]);}}async function manageMpcIntervention(_0x16679c,_0x5d4ae5,_0x16dede){const _0x208c5b=a1_0xcccf98;try{const _0xff3c11='analysis.energy.mpcActiveInterventions',_0x3006b7=await _0x16679c[_0x208c5b(0x285)](_0xff3c11);let _0x1e7853=[];if(_0x3006b7&&_0x3006b7['val'])try{_0x1e7853=JSON[_0x208c5b(0x275)](_0x3006b7['val']);}catch(_0x2e36c4){}const _0x1815a6=_0x1e7853['indexOf'](_0x5d4ae5);if(_0x16dede===_0x208c5b(0x29a))_0x1815a6===-0x1&&(_0x1e7853['push'](_0x5d4ae5),await _0x16679c[_0x208c5b(0x25e)](_0xff3c11,{'val':JSON[_0x208c5b(0x241)](_0x1e7853),'ack':!![]}));else _0x16dede===_0x208c5b(0x22e)&&(_0x1815a6!==-0x1&&(_0x1e7853[_0x208c5b(0x205)](_0x1815a6,0x1),await _0x16679c[_0x208c5b(0x25e)](_0xff3c11,{'val':JSON[_0x208c5b(0x241)](_0x1e7853),'ack':!![]})));}catch(_0x555dcc){}}function a1_0x4091(){const _0x5921e9=['mpc_','target','7500CuksMr','includes',')\x20aktiv.\x20Heize\x20auf\x20','Fehlt','Enforcement\x20Monitor\x20Error:\x20','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','isArray','_calName','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','slice','unshift','write','thermostatMapping','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','add','approved','toString','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','777531EgVLWg','thermostat','message','entries','.1.LEVEL','calendarInstance','valve','\x20wieder\x20auf\x20','1059110DlPOhI','split','thermostat.setpoint','manual','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','setForeignStateAsync','find','eventStart','Â°C).\x20Sparmodus\x20beendet!','light','(((.+)+)+)+$','\x20min).','level.valve','occupied_heating_setpoint','join','replace','Â°C\x20(Vorlauf:\x20','.data.table','getForeignObjectAsync','valve_position','system.mode',']:\x20Raum-Trigger\x20\x27','ðŸ“…\x20SMART\x20SCHEDULE\x20[','window','open','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','ist','_meta','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','consultButler','toUpperCase','config','apply','analysis.energy.mpcActiveInterventions','[CAL]\x20','setpoint','default','\x27\x20(Match:\x20','Unbekannt','calendarSelection','date','analysis.energy.ventilationAlerts','\x20min)','_date','.1.ACTUAL_TEMPERATURE','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','openknx','[MPC]\x20','splice','messwert','value.valve','string','Unknown','ðŸ§¹\x20[MPC\x20CLEANUP]\x20','\x20wurde\x20manuell\x20erhÃ¶ht.',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','search','ACTUAL','too_cold',':\x20Absenkung\x20auf\x20','summary','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','\x20->\x20Schalte\x20','Â°C\x20(via\x20','actual','analysis.automation.actionLog','soll','ACTUAL_TEMPERATURE','\x20gefunden!','now','SET_POINT_TEMPERATURE','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','\x20erreicht\x20Limit\x20(','position','analysis.energy.warmupTimes','name','set','score','error','type','.4.SET_TEMPERATURE','toLowerCase','./ai_agent','stellwert','target_temperature','devices','level.temperature','abs','rÃ¼ckkehr','remove','currentSystemMode','contact','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','cal_','Manuelles\x20Mapping','Classic','event','off','urlaub\x20ende','common','from','location','analysis.energy.warmupTargets','push','active','valveMapping','findIndex','stringify','switch','role','analysis.energy.activeEnforcements','normal','Soll','dimmer','triggerTime','exports',':\x20Aufheizen\x20auf\x20','rescue_','map','values','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','Calendar\x20Check\x20Error:\x20','length','room','temperature','current_heating_setpoint','ankunft','ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','local_temperature','val','sensor','level','4lyytac','sort','[FORCE]\x20','Nicht\x20gefunden','setStateAsync','sendToPythonWrapper','getTime','constructor','state','.4.VALVE_STATE','minutes_safe','analysis.energy.rlPenalties','log','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','getForeignStateAsync','[WATCHDOG]\x20','forEach','PERFECT','968646hAgwsQ','analysis.energy.warmupSources','temp','useCalendar','getHours','3138813mfxtSe','Â°C).\x20Entferne\x20Status.','\x20auf\x20','8VfyoPv','parse','65tVULWo','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','info','number','PrÃ¤diktion:\x20','421776dsmcQA','wert','analysis.energy.schedulePreview','307800zbZdJT','until','.1.TEMPERATURE','Â°C\x20(Kalender-Schutz)','Â°C.','analysis.automation.lastAction','warn','getStateAsync','\x20->\x20','hm-rpc','filter','Â°C\x20<\x20'];a1_0x4091=function(){return _0x5921e9;};return a1_0x4091();}async function cleanupGhostInterventions(_0x385c51){const _0x252667=a1_0xcccf98;try{const _0x3f672b=_0x252667(0x1f6),_0xffaa9f=await _0x385c51[_0x252667(0x285)](_0x3f672b);if(!_0xffaa9f||!_0xffaa9f[_0x252667(0x257)])return;const _0x372719=JSON[_0x252667(0x275)](_0xffaa9f[_0x252667(0x257)]);if(!Array[_0x252667(0x292)](_0x372719)||_0x372719[_0x252667(0x250)]===0x0)return;let _0x2a5864={'default':0x15};try{const _0xd4ff1b=await _0x385c51[_0x252667(0x285)](_0x252667(0x23c));if(_0xd4ff1b&&_0xd4ff1b[_0x252667(0x257)])_0x2a5864=JSON['parse'](_0xd4ff1b[_0x252667(0x257)]);}catch(_0x17ae82){}let _0x5eb808=[];try{const _0x4489e7=await _0x385c51['getStateAsync'](_0x252667(0x1fe));if(_0x4489e7&&_0x4489e7['val'])_0x5eb808=JSON[_0x252667(0x275)](_0x4489e7['val']);}catch(_0x2d3914){}let _0x198f01={},_0x1e3e27=![];try{const _0x4b4c75=await _0x385c51[_0x252667(0x285)](_0x252667(0x265));if(_0x4b4c75&&_0x4b4c75['val'])_0x198f01=JSON[_0x252667(0x275)](_0x4b4c75[_0x252667(0x257)]);}catch(_0x2a3ccb){}if(_0x198f01[_0x252667(0x2c1)]){const _0x387815=Date[_0x252667(0x21a)]();for(const [_0x9da66b,_0x10f4c0]of Object[_0x252667(0x2a1)](_0x198f01['_meta'])){_0x387815-_0x10f4c0>PENALTY_TTL&&(delete _0x198f01[_0x9da66b],delete _0x198f01['_meta'][_0x9da66b],_0x1e3e27=!![],_0x385c51[_0x252667(0x266)][_0x252667(0x278)]('ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27'+_0x9da66b+_0x252667(0x294)));}}const _0x4b34e6=_0x385c51[_0x252667(0x1f4)][_0x252667(0x22a)]||[];let _0x4ea7dd=![];for(let _0x4a0975=_0x372719[_0x252667(0x250)]-0x1;_0x4a0975>=0x0;_0x4a0975--){const _0x1766a5=_0x372719[_0x4a0975],_0x5bc5f5=_0x4b34e6[_0x252667(0x2ac)](_0x27ff44=>normalize(_0x27ff44['location'])===normalize(_0x1766a5)&&(_0x27ff44['type']===_0x252667(0x252)||_0x27ff44['type']===_0x252667(0x29f)));if(!_0x5bc5f5){_0x385c51[_0x252667(0x266)]['warn'](_0x252667(0x202)+_0x1766a5+_0x252667(0x21c)),_0x372719[_0x252667(0x205)](_0x4a0975,0x1),_0x4ea7dd=!![];continue;}if(_0x5bc5f5){const _0x2d3c6b=await findRelatedId(_0x385c51,_0x5bc5f5['id'],_0x252667(0x1f8)),_0x5b9977=await _0x385c51[_0x252667(0x268)](_0x5bc5f5['id']);if(_0x2d3c6b){const _0x25a527=await _0x385c51[_0x252667(0x268)](_0x2d3c6b);if(_0x25a527&&typeof _0x25a527[_0x252667(0x257)]==='number'){let _0x3efd1c=![],_0x4ecedd='';Math[_0x252667(0x22c)](_0x25a527['val']-ECO_TEMP)>0.5&&(_0x3efd1c=!![],_0x4ecedd=_0x252667(0x2a9));if(!_0x3efd1c&&_0x5b9977&&typeof _0x5b9977[_0x252667(0x257)]===_0x252667(0x279)){const _0x3bdd4d=_0x2a5864[_0x1766a5]||_0x2a5864[_0x252667(0x1f9)]||0x15;_0x5b9977[_0x252667(0x257)]<_0x3bdd4d+0.2&&(_0x3efd1c=!![],_0x4ecedd=_0x252667(0x20f));}if(_0x3efd1c){if(_0x4ecedd==='manual'){_0x385c51['log'][_0x252667(0x278)](_0x252667(0x20a)+_0x1766a5+'\x20ist\x20auf\x20'+_0x25a527['val']+'Â°C\x20(nicht\x20'+ECO_TEMP+_0x252667(0x272));const _0x1e1aa5=lastActions[_0x252667(0x233)+_0x1766a5],_0x41281f=_0x1e1aa5&&Date[_0x252667(0x21a)]()-_0x1e1aa5<0x2*0x3c*0x3e8;if(!_0x41281f&&_0x25a527[_0x252667(0x257)]>ECO_TEMP+0.5){_0x385c51[_0x252667(0x25f)]&&(_0x385c51[_0x252667(0x266)][_0x252667(0x278)](_0x252667(0x2bf)+_0x1766a5+_0x252667(0x20b)),_0x385c51[_0x252667(0x25f)]('TRAIN_RL_PENALTY',{'room':_0x1766a5}));const _0x464f14=_0x1766a5+'_'+new Date()[_0x252667(0x270)]();if(!_0x198f01[_0x464f14]){_0x198f01[_0x464f14]=0x1;if(!_0x198f01[_0x252667(0x2c1)])_0x198f01[_0x252667(0x2c1)]={};_0x198f01[_0x252667(0x2c1)][_0x464f14]=Date[_0x252667(0x21a)](),_0x1e3e27=!![];}}else _0x41281f&&_0x385c51[_0x252667(0x266)][_0x252667(0x278)]('ðŸ“…\x20[MPC\x20INFO]\x20'+_0x1766a5+_0x252667(0x232));}else{if(_0x4ecedd===_0x252667(0x20f)){let _0x5a4b32=![];if(_0x5eb808[_0x252667(0x2ac)](_0x55ea33=>_0x55ea33[_0x252667(0x251)]===_0x1766a5))_0x5a4b32=!![];const _0x5ed4ec=_0x4b34e6[_0x252667(0x288)](_0xad0add=>normalize(_0xad0add['location'])===normalize(_0x1766a5)&&(_0xad0add['type']===_0x252667(0x2bd)||_0xad0add['type']===_0x252667(0x258)||_0xad0add[_0x252667(0x224)]===_0x252667(0x230)));for(const _0x454813 of _0x5ed4ec){try{const _0x4a99b9=await _0x385c51[_0x252667(0x268)](_0x454813['id']);if(_0x4a99b9&&(_0x4a99b9[_0x252667(0x257)]===!![]||_0x4a99b9[_0x252667(0x257)]===0x1||String(_0x4a99b9['val'])[_0x252667(0x226)]()===_0x252667(0x2be)))_0x5a4b32=!![];}catch(_0x5f2f83){}}if(_0x5a4b32)_0x385c51[_0x252667(0x266)][_0x252667(0x278)](_0x252667(0x212)+_0x1766a5+_0x252667(0x24e));else{const _0x49c475=_0x2a5864[_0x1766a5]||_0x2a5864[_0x252667(0x1f9)]||0x15;_0x385c51[_0x252667(0x266)][_0x252667(0x278)](_0x252667(0x267)+_0x1766a5+_0x252667(0x21d)+_0x5b9977[_0x252667(0x257)]+_0x252667(0x289)+(_0x49c475+0.2)+_0x252667(0x2ae)),await _0x385c51[_0x252667(0x2ab)](_0x2d3c6b,_0x49c475),await logAutomationAction(_0x385c51,_0x252667(0x269)+_0x1766a5+_0x252667(0x20c)+_0x49c475+'Â°C'),lastActions[_0x252667(0x24b)+_0x1766a5]=Date[_0x252667(0x21a)]();}}}_0x372719[_0x252667(0x205)](_0x4a0975,0x1),_0x4ea7dd=!![];}}}}}_0x4ea7dd&&await _0x385c51[_0x252667(0x25e)](_0x3f672b,{'val':JSON[_0x252667(0x241)](_0x372719),'ack':!![]}),_0x1e3e27&&await _0x385c51['setStateAsync'](_0x252667(0x265),{'val':JSON['stringify'](_0x198f01),'ack':!![]});}catch(_0x42abf7){}}async function applyEnergySavings(_0x169503,_0x5027d4){const _0x5e323b=a1_0xcccf98;await cleanupGhostInterventions(_0x169503);if(!_0x5027d4||_0x5027d4[_0x5e323b(0x250)]===0x0)return;const _0x318ee5=_0x169503[_0x5e323b(0x1f4)][_0x5e323b(0x22a)]||[],_0x15cf8e=Date[_0x5e323b(0x21a)]();for(const _0x25ebeb of _0x5027d4){const _0x548918=_0x25ebeb[_0x5e323b(0x251)],_0x155adb=_0x25ebeb[_0x5e323b(0x264)],_0x215eda=_0x25ebeb['target']||0x15;if(lastActions[_0x5e323b(0x24b)+_0x548918]&&_0x15cf8e-lastActions[_0x5e323b(0x24b)+_0x548918]<RESCUE_LOCK_MS)continue;const _0x863bd7=_0x318ee5[_0x5e323b(0x2ac)](_0xa4c5e3=>normalize(_0xa4c5e3[_0x5e323b(0x23b)])===normalize(_0x548918)&&(_0xa4c5e3[_0x5e323b(0x224)]===_0x5e323b(0x252)||_0xa4c5e3[_0x5e323b(0x224)]===_0x5e323b(0x29f)));if(!_0x863bd7)continue;const _0x4291a4=await findRelatedId(_0x169503,_0x863bd7['id'],_0x5e323b(0x1f8));if(_0x4291a4){if(lastActions[_0x5e323b(0x28a)+_0x548918]&&_0x15cf8e-lastActions['mpc_'+_0x548918]<0x1e*0x3c*0x3e8)continue;const _0x23e628=await _0x169503['getForeignStateAsync'](_0x4291a4);if(_0x23e628&&typeof _0x23e628[_0x5e323b(0x257)]==='number'){const _0x4ef00b=_0x23e628['val'];_0x4ef00b!==ECO_TEMP&&await manageMpcIntervention(_0x169503,_0x548918,_0x5e323b(0x22e));if(_0x155adb>0x1e)_0x4ef00b>ECO_TEMP+0.5&&(_0x169503[_0x5e323b(0x266)][_0x5e323b(0x278)](_0x5e323b(0x291)+_0x548918+_0x5e323b(0x273)+ECO_TEMP+'Â°C!\x20(Puffer:\x20'+_0x155adb+_0x5e323b(0x1ff)),await _0x169503[_0x5e323b(0x2ab)](_0x4291a4,ECO_TEMP),await manageMpcIntervention(_0x169503,_0x548918,_0x5e323b(0x29a)),lastActions['mpc_'+_0x548918]=_0x15cf8e,await logAutomationAction(_0x169503,_0x5e323b(0x204)+_0x548918+_0x5e323b(0x210)+ECO_TEMP+'Â°C'));else _0x155adb<=0xf&&(_0x4ef00b<_0x215eda&&(_0x169503[_0x5e323b(0x266)][_0x5e323b(0x278)](_0x5e323b(0x231)+_0x548918+_0x5e323b(0x2a5)+_0x215eda+'Â°C!\x20(Puffer\x20leer).'),await _0x169503[_0x5e323b(0x2ab)](_0x4291a4,_0x215eda),await manageMpcIntervention(_0x169503,_0x548918,_0x5e323b(0x22e)),lastActions[_0x5e323b(0x28a)+_0x548918]=_0x15cf8e,await logAutomationAction(_0x169503,_0x5e323b(0x204)+_0x548918+_0x5e323b(0x24a)+_0x215eda+'Â°C')));}}else _0x169503['log'][_0x5e323b(0x284)](_0x5e323b(0x29d)+_0x548918+_0x5e323b(0x219));}}module[a1_0xcccf98(0x249)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};