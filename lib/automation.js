const a1_0x28bc33=a1_0x1649;(function(_0x1c3e28,_0x5d98f0){const _0x4f0ee0=a1_0x1649,_0x9d7f7f=_0x1c3e28();while(!![]){try{const _0x5764b7=parseInt(_0x4f0ee0(0x1b3))/0x1*(-parseInt(_0x4f0ee0(0x186))/0x2)+parseInt(_0x4f0ee0(0x1f6))/0x3+parseInt(_0x4f0ee0(0x1bc))/0x4*(-parseInt(_0x4f0ee0(0x1d1))/0x5)+parseInt(_0x4f0ee0(0x146))/0x6*(-parseInt(_0x4f0ee0(0x174))/0x7)+parseInt(_0x4f0ee0(0x192))/0x8+-parseInt(_0x4f0ee0(0x16a))/0x9*(parseInt(_0x4f0ee0(0x1a2))/0xa)+parseInt(_0x4f0ee0(0x170))/0xb;if(_0x5764b7===_0x5d98f0)break;else _0x9d7f7f['push'](_0x9d7f7f['shift']());}catch(_0x4674d8){_0x9d7f7f['push'](_0x9d7f7f['shift']());}}}(a1_0x5623,0x9cead));const a1_0x3afcea=(function(){let _0x39c52b=!![];return function(_0x44be3d,_0x4fbfa4){const _0x234b39=_0x39c52b?function(){if(_0x4fbfa4){const _0x2b66da=_0x4fbfa4['apply'](_0x44be3d,arguments);return _0x4fbfa4=null,_0x2b66da;}}:function(){};return _0x39c52b=![],_0x234b39;};}()),a1_0x1d0e6e=a1_0x3afcea(this,function(){const _0x5bae26=a1_0x1649;return a1_0x1d0e6e[_0x5bae26(0x1eb)]()[_0x5bae26(0x1e3)](_0x5bae26(0x1b9))[_0x5bae26(0x1eb)]()[_0x5bae26(0x1a7)](a1_0x1d0e6e)[_0x5bae26(0x1e3)](_0x5bae26(0x1b9));});a1_0x1d0e6e();'use strict';const aiAgent=require(a1_0x28bc33(0x1ed)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function a1_0x5623(){const _0x5e7b69=['ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','occupied_heating_setpoint','parse','setpoint','\x20min)','ðŸ“…\x20[MPC\x20INFO]\x20','10IbAPxR','slice','ankunft','add','\x20wieder\x20auf\x20','constructor','type','reason','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','too_cold','analysis.energy.schedulePreview','SET','from','off','calendarInstance','summary','thermostatMapping','1481UlpBbx','active','normal','level.temperature','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','pi_heating_demand','(((.+)+)+)+$','Â°C\x20->\x20','exports','45256AtMZDm','[MPC]\x20','devices','triggerTime','calendarSelection','cal_','ACTUAL_TEMPERATURE','ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','info','system.mode','stringify','push','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','.4.SET_TEMPERATURE','entries','getForeignStateAsync','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','thermostat.setpoint','contact','Â°C).\x20Sparmodus\x20beendet!','385KJmvpX','.1.TEMPERATURE','level','position','mpc_','analysis.automation.confidenceThreshold','Â°C\x20(Vorlauf:\x20','analysis.energy.warmupTimes','config','analysis.automation.lastAction','PrÃ¤diktion:\x20','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','PERFECT','findIndex','event','[WATCHDOG]\x20','.1.ACTUAL_TEMPERATURE','analysis.automation.actionLog','search','local_temperature','number','valve_position','length','_meta','unshift','analysis.energy.activeEnforcements','toString','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','./ai_agent','level.valve','getForeignObjectsAsync','rescue_','light','stellwert','forEach','Â°C\x20(Kalender-Schutz)','analysis.energy.mpcActiveInterventions','3611049RvgDGA','SET_POINT_TEMPERATURE','filter','remove','actual','abs','_date','message','.data.table','valveMapping','ðŸ“…\x20SMART\x20SCHEDULE\x20[','Nicht\x20gefunden','openknx','Â°C).\x20Entferne\x20Status.','messwert','values','toLowerCase','map','val','analysis.energy.ventilationAlerts','soll','TRAIN_RL_PENALTY','.1.LEVEL','eventStart','consultButler','\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.','66jzKRGY','valve','now','\x20->\x20Schalte\x20','localeCompare','role','sendToPythonWrapper','ACTUAL','splice','rÃ¼ckkehr','Unbekannt','currentSystemMode','indexOf','target','\x20erreicht\x20Limit\x20(','useCalendar','setForeignStateAsync','current_heating_setpoint','Unknown','_calName','temperature','approved','split','getStateAsync','isArray','room','ist','sort','analysis.automation.mode','Auto-Erkennung','Ist',']:\x20Raum-Trigger\x20\x27','manual','trim','thermostat','target_temperature','597825XYqxUc','\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.','\x20auf\x20','find','analysis.energy.rlPenalties','.1.SET_POINT_TEMPERATURE','4933060CbpSiE','log','Â°C\x20(via\x20','urlaub\x20ende','628600CJdQHz','getTime','name','\x20min).','Manuelles\x20Mapping','default','getHours','\x20wurde\x20manuell\x20erhÃ¶ht.','score','Â°C!\x20(Puffer\x20leer).','string','\x20->\x20','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','analysis.energy.warmupTargets','error','common','state',':\x20Aufheizen\x20auf\x20','86znxRAj','replace','open','includes','wert','ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20',')\x20aktiv.\x20Heize\x20auf\x20','switch','\x20ist\x20auf\x20','[CAL]\x20','value.valve','[FORCE]\x20','7837408doiVsO','Fehlt',':\x20Absenkung\x20auf\x20','date','location','warn','Â°C\x20<\x20','setStateAsync','toUpperCase'];a1_0x5623=function(){return _0x5e7b69;};return a1_0x5623();}function normalize(_0x345535){const _0x3ddf64=a1_0x28bc33;if(!_0x345535)return'';return _0x345535['toLowerCase']()[_0x3ddf64(0x187)](/\s+/g,'')[_0x3ddf64(0x167)]();}function getWarmupRobust(_0x18235a,_0x2a1470){const _0x1e308d=a1_0x28bc33;if(!_0x18235a||!_0x2a1470)return 0x3c;if(_0x18235a[_0x2a1470]!==undefined)return _0x18235a[_0x2a1470];const _0x84e3c5=_0x2a1470[_0x1e308d(0x206)]()['replace'](/Ã¤/g,'ae')[_0x1e308d(0x187)](/Ã¶/g,'oe')['replace'](/Ã¼/g,'ue')['replace'](/ÃŸ/g,'ss')[_0x1e308d(0x187)](/\s+/g,'_')[_0x1e308d(0x187)](/[^a-z0-9_]/g,'');if(_0x18235a[_0x84e3c5]!==undefined)return _0x18235a[_0x84e3c5];return 0x3c;}async function logAutomationAction(_0x381c75,_0x4ca75b){const _0x5c1dde=a1_0x28bc33;await _0x381c75[_0x5c1dde(0x199)](_0x5c1dde(0x1da),{'val':_0x4ca75b,'ack':!![]});try{const _0x1f99db=_0x5c1dde(0x1e2),_0x52d0ba=await _0x381c75[_0x5c1dde(0x15d)](_0x1f99db);let _0x2507e3=[];if(_0x52d0ba&&_0x52d0ba[_0x5c1dde(0x208)])try{_0x2507e3=JSON['parse'](_0x52d0ba['val']);}catch(_0x16d108){}_0x2507e3[_0x5c1dde(0x1e9)]({'ts':Date[_0x5c1dde(0x148)](),'msg':_0x4ca75b});if(_0x2507e3['length']>0x32)_0x2507e3=_0x2507e3[_0x5c1dde(0x1a3)](0x0,0x32);await _0x381c75[_0x5c1dde(0x199)](_0x1f99db,{'val':JSON['stringify'](_0x2507e3),'ack':!![]});}catch(_0xe765a6){}}async function handlePrediction(_0x2089dc,_0x54be89,_0x12858a){const _0x46f7de=a1_0x28bc33;if(!_0x54be89||_0x54be89===_0x46f7de(0x158))return;let _0x2bcd8a=_0x46f7de(0x1af),_0x51b948=0.6;try{const _0x11f805=await _0x2089dc[_0x46f7de(0x15d)](_0x46f7de(0x162));if(_0x11f805&&_0x11f805['val'])_0x2bcd8a=_0x11f805['val'];const _0x121271=await _0x2089dc['getStateAsync'](_0x46f7de(0x1d6));if(_0x121271&&_0x121271[_0x46f7de(0x208)])_0x51b948=_0x121271['val'];}catch(_0x59878a){}if(_0x2bcd8a===_0x46f7de(0x1af)||_0x12858a<_0x51b948)return;const _0x2b4a56=Date[_0x46f7de(0x148)]();if(lastActions[_0x54be89]&&_0x2b4a56-lastActions[_0x54be89]<COOLDOWN_MS)return;const _0x3cf270=_0x2089dc[_0x46f7de(0x1d9)][_0x46f7de(0x1be)]||[],_0x29f467=normalize(_0x54be89),_0x1a5350=_0x3cf270[_0x46f7de(0x16d)](_0x19e1c3=>normalize(_0x19e1c3[_0x46f7de(0x196)])===_0x29f467&&(_0x19e1c3[_0x46f7de(0x1a8)]===_0x46f7de(0x1f1)||_0x19e1c3[_0x46f7de(0x1a8)]==='dimmer'||_0x19e1c3[_0x46f7de(0x1a8)]===_0x46f7de(0x18d)));if(!_0x1a5350)return;const _0x5a05d0=await aiAgent[_0x46f7de(0x144)](_0x2089dc,_0x54be89,_0x1a5350['name'],_0x12858a);if(!_0x5a05d0[_0x46f7de(0x15b)])return;const _0x2eb383=_0x46f7de(0x1db)+_0x54be89+_0x46f7de(0x149)+_0x1a5350[_0x46f7de(0x176)]+'\x20('+_0x5a05d0[_0x46f7de(0x1a9)]+')';await logAutomationAction(_0x2089dc,'['+_0x2bcd8a[_0x46f7de(0x19a)]()+']\x20'+_0x2eb383);if(_0x2bcd8a===_0x46f7de(0x1b4)){const _0x191d8a=await _0x2089dc[_0x46f7de(0x1cc)](_0x1a5350['id']);(!_0x191d8a||!_0x191d8a[_0x46f7de(0x208)]&&_0x191d8a['val']!==!![])&&await _0x2089dc[_0x46f7de(0x156)](_0x1a5350['id'],!![]),lastActions[_0x54be89]=_0x2b4a56;}}async function findRelatedId(_0x345ca5,_0x2021f2,_0x4c1854='setpoint'){const _0x5a7ed1=a1_0x28bc33;if(_0x4c1854===_0x5a7ed1(0x19f)&&_0x345ca5[_0x5a7ed1(0x1d9)]['thermostatMapping']){let _0x10d0fe=_0x345ca5['config'][_0x5a7ed1(0x1b2)];if(typeof _0x10d0fe===_0x5a7ed1(0x17e))try{_0x10d0fe=JSON[_0x5a7ed1(0x19e)](_0x10d0fe);}catch(_0x296c58){}if(_0x10d0fe&&_0x10d0fe[_0x2021f2])return _0x10d0fe[_0x2021f2];}if(_0x4c1854===_0x5a7ed1(0x147)&&_0x345ca5[_0x5a7ed1(0x1d9)]['valveMapping']){let _0x43d244=_0x345ca5[_0x5a7ed1(0x1d9)][_0x5a7ed1(0x1ff)];if(typeof _0x43d244===_0x5a7ed1(0x17e))try{_0x43d244=JSON[_0x5a7ed1(0x19e)](_0x43d244);}catch(_0x15f591){}if(_0x43d244&&_0x43d244[_0x2021f2])return _0x43d244[_0x2021f2];}let _0x25b52=[];if(_0x4c1854===_0x5a7ed1(0x19f))_0x25b52=[{'s':_0x5a7ed1(0x1e1),'t':_0x5a7ed1(0x16f)},{'s':'.1.TEMPERATURE','t':_0x5a7ed1(0x16f)},{'s':'.1.TEMPERATURE','t':_0x5a7ed1(0x1ca)},{'s':_0x5a7ed1(0x1c2),'t':_0x5a7ed1(0x1f7)},{'s':_0x5a7ed1(0x1e4),'t':_0x5a7ed1(0x19d)},{'s':_0x5a7ed1(0x1e4),'t':_0x5a7ed1(0x157)},{'s':_0x5a7ed1(0x15a),'t':_0x5a7ed1(0x169)},{'s':_0x5a7ed1(0x14d),'t':_0x5a7ed1(0x1ad)},{'s':_0x5a7ed1(0x164),'t':'Soll'},{'s':_0x5a7ed1(0x15a),'t':_0x5a7ed1(0x19f)}];else _0x4c1854===_0x5a7ed1(0x147)&&(_0x25b52=[{'s':_0x5a7ed1(0x1e1),'t':_0x5a7ed1(0x20c)},{'s':'.1.TEMPERATURE','t':_0x5a7ed1(0x20c)},{'s':_0x5a7ed1(0x1d2),'t':'.4.VALVE_STATE'},{'s':_0x5a7ed1(0x1e4),'t':_0x5a7ed1(0x1b8)},{'s':'temperature','t':_0x5a7ed1(0x1e6)},{'s':'temperature','t':_0x5a7ed1(0x1d3)}]);for(const _0x596b29 of _0x25b52){if(_0x2021f2['includes'](_0x596b29['s'])){const _0x1cc9e0=_0x2021f2[_0x5a7ed1(0x187)](_0x596b29['s'],_0x596b29['t']),_0x4e0b4d=await _0x345ca5['getForeignObjectAsync'](_0x1cc9e0);if(_0x4e0b4d)return _0x1cc9e0;}}try{const _0x58e0a9=_0x2021f2[_0x5a7ed1(0x15c)]('.');if(_0x58e0a9[_0x5a7ed1(0x1e7)]>0x2){const _0x17ea38=_0x58e0a9[_0x5a7ed1(0x1a3)](0x0,-0x1)['join']('.'),_0x20370b=await _0x345ca5[_0x5a7ed1(0x1ef)](_0x17ea38+'.*'),_0x50619d=[],_0x2045bc=_0x2021f2[_0x5a7ed1(0x15c)](/[._]+/)[_0x5a7ed1(0x1f8)](_0x13a1d7=>![_0x5a7ed1(0x202),'0','hm-rpc',_0x5a7ed1(0x160),_0x5a7ed1(0x18a),_0x5a7ed1(0x15a),_0x5a7ed1(0x1fa),'sensor',_0x5a7ed1(0x204),_0x5a7ed1(0x184)]['includes'](_0x13a1d7[_0x5a7ed1(0x206)]()));for(const [_0x130b8b,_0x3d5ef5]of Object[_0x5a7ed1(0x1cb)](_0x20370b)){if(_0x130b8b===_0x2021f2)continue;if(_0x3d5ef5&&_0x3d5ef5['common']){const _0x1d6bdd=_0x130b8b['toLowerCase'](),_0xe786fe=(_0x3d5ef5[_0x5a7ed1(0x183)][_0x5a7ed1(0x14b)]||'')['toLowerCase'](),_0x3b98dc=(_0x3d5ef5['common']['unit']||'')[_0x5a7ed1(0x206)]();let _0x222423=![];if(_0x4c1854===_0x5a7ed1(0x19f)&&_0x3d5ef5[_0x5a7ed1(0x183)]['write']===!![])_0x222423=_0x1d6bdd['includes']('set')||_0x1d6bdd['includes'](_0x5a7ed1(0x20a))||_0x1d6bdd[_0x5a7ed1(0x189)]('target')||_0xe786fe[_0x5a7ed1(0x189)](_0x5a7ed1(0x1b6))||_0xe786fe[_0x5a7ed1(0x189)](_0x5a7ed1(0x1ce));else _0x4c1854===_0x5a7ed1(0x147)&&(_0x222423=_0x1d6bdd[_0x5a7ed1(0x189)](_0x5a7ed1(0x1d3))||_0x1d6bdd['includes'](_0x5a7ed1(0x147))||_0x1d6bdd['includes'](_0x5a7ed1(0x1f2))||_0x1d6bdd[_0x5a7ed1(0x189)](_0x5a7ed1(0x1d4))||_0xe786fe[_0x5a7ed1(0x189)](_0x5a7ed1(0x1ee))||_0xe786fe[_0x5a7ed1(0x189)](_0x5a7ed1(0x190))||_0x3b98dc[_0x5a7ed1(0x189)]('%'));if(_0x222423){const _0x2c66a4=_0x130b8b[_0x5a7ed1(0x15c)](/[._]+/)[_0x5a7ed1(0x207)](_0x18a43d=>_0x18a43d[_0x5a7ed1(0x206)]());let _0x2a61fd=0x0;_0x2045bc[_0x5a7ed1(0x1f3)](_0xd7e266=>{const _0x4601b8=_0x5a7ed1;if(_0x2c66a4['includes'](_0xd7e266[_0x4601b8(0x206)]()))_0x2a61fd++;}),_0x50619d[_0x5a7ed1(0x1c7)]({'id':_0x130b8b,'score':_0x2a61fd});}}}if(_0x50619d[_0x5a7ed1(0x1e7)]>0x0){_0x50619d['sort']((_0x335d10,_0x1dd0c6)=>_0x1dd0c6[_0x5a7ed1(0x17c)]-_0x335d10[_0x5a7ed1(0x17c)]);if(_0x50619d[0x0][_0x5a7ed1(0x17c)]>0x0)return _0x50619d[0x0]['id'];}}}catch(_0x49d6bf){}return null;}async function scanThermostats(_0x3cd540){const _0x4ed9ba=a1_0x28bc33,_0x203ddd=_0x3cd540[_0x4ed9ba(0x1d9)][_0x4ed9ba(0x1be)]||[],_0x47bca5=[],_0x5a9926=_0x203ddd[_0x4ed9ba(0x1f8)](_0x5ea390=>_0x5ea390['id']&&_0x5ea390['id'][_0x4ed9ba(0x189)](_0x4ed9ba(0x15a))||_0x5ea390['type']&&[_0x4ed9ba(0x15a),_0x4ed9ba(0x168),'sensor'][_0x4ed9ba(0x189)](_0x5ea390[_0x4ed9ba(0x1a8)])||_0x5ea390['name']&&_0x5ea390[_0x4ed9ba(0x176)][_0x4ed9ba(0x206)]()[_0x4ed9ba(0x189)]('temp'));for(const _0xf31e30 of _0x5a9926){const _0x31dcb6=await findRelatedId(_0x3cd540,_0xf31e30['id'],_0x4ed9ba(0x19f)),_0x2dc238=await findRelatedId(_0x3cd540,_0xf31e30['id'],_0x4ed9ba(0x147));let _0x4c4fa8=_0x4ed9ba(0x201),_0x411e51=![],_0x37c8b4=_0x3cd540['config']['thermostatMapping']||{};if(typeof _0x37c8b4===_0x4ed9ba(0x17e))try{_0x37c8b4=JSON[_0x4ed9ba(0x19e)](_0x37c8b4);}catch(_0x4013f4){}let _0x10d239=_0x3cd540['config'][_0x4ed9ba(0x1ff)]||{};if(typeof _0x10d239===_0x4ed9ba(0x17e))try{_0x10d239=JSON['parse'](_0x10d239);}catch(_0x3df164){}if(_0x37c8b4[_0xf31e30['id']]&&_0x37c8b4[_0xf31e30['id']]===_0x31dcb6||_0x10d239[_0xf31e30['id']]&&_0x10d239[_0xf31e30['id']]===_0x2dc238)_0x4c4fa8=_0x4ed9ba(0x178),_0x411e51=!![];else(_0x31dcb6||_0x2dc238)&&(_0x4c4fa8=_0x4ed9ba(0x163));_0x47bca5[_0x4ed9ba(0x1c7)]({'room':_0xf31e30[_0x4ed9ba(0x196)]||_0x4ed9ba(0x150),'sensorId':_0xf31e30['id'],'setpointId':_0x31dcb6||'-','valveId':_0x2dc238||'-','source':_0x4c4fa8,'isManual':_0x411e51,'status':_0x31dcb6&&_0x2dc238?_0x4ed9ba(0x1dd):_0x31dcb6?'OK':_0x4ed9ba(0x193)});}return _0x47bca5[_0x4ed9ba(0x161)]((_0x770aaa,_0x3414ce)=>_0x770aaa[_0x4ed9ba(0x15f)][_0x4ed9ba(0x14a)](_0x3414ce[_0x4ed9ba(0x15f)]));}async function updateSchedulePreview(_0x30538a){const _0x2b45a3=a1_0x28bc33;if(!_0x30538a[_0x2b45a3(0x1d9)]['useCalendar']||!_0x30538a['config'][_0x2b45a3(0x1b0)])return;let _0x2dc2b0={};try{const _0x52c9a8=await _0x30538a[_0x2b45a3(0x15d)]('analysis.energy.warmupTimes');if(_0x52c9a8&&_0x52c9a8[_0x2b45a3(0x208)])_0x2dc2b0=JSON[_0x2b45a3(0x19e)](_0x52c9a8[_0x2b45a3(0x208)]);}catch(_0x23a706){}const _0x131e9d=[],_0x47e8e0=Date[_0x2b45a3(0x148)](),_0x100c93=0x30*0x3c*0x3c*0x3e8;try{const _0x158278=await _0x30538a[_0x2b45a3(0x1cc)](_0x30538a[_0x2b45a3(0x1d9)][_0x2b45a3(0x1b0)]+_0x2b45a3(0x1fe));if(!_0x158278||!_0x158278[_0x2b45a3(0x208)])return;const _0x126d6c=JSON[_0x2b45a3(0x19e)](_0x158278[_0x2b45a3(0x208)]),_0x372b3c=_0x30538a['config'][_0x2b45a3(0x1c0)]||[],_0x5541d9=_0x30538a['config'][_0x2b45a3(0x1be)]||[],_0x577393=new Set();_0x5541d9['forEach'](_0x1b34a9=>{const _0x3e14a6=_0x2b45a3;if(_0x1b34a9[_0x3e14a6(0x196)])_0x577393[_0x3e14a6(0x1a5)](_0x1b34a9[_0x3e14a6(0x196)]);});for(const _0x510133 of _0x126d6c){if(_0x510133[_0x2b45a3(0x159)]&&_0x372b3c['length']>0x0&&!_0x372b3c['includes'](_0x510133[_0x2b45a3(0x159)]))continue;const _0x46107e=_0x510133[_0x2b45a3(0x1fc)]||_0x510133[_0x2b45a3(0x20d)]||_0x510133[_0x2b45a3(0x195)];if(!_0x46107e)continue;const _0x2962f3=new Date(_0x46107e),_0x48169b=_0x2962f3[_0x2b45a3(0x175)]();if(isNaN(_0x48169b))continue;if(_0x48169b<_0x47e8e0)continue;if(_0x48169b>_0x47e8e0+_0x100c93)continue;const _0x4b9d20=(_0x510133[_0x2b45a3(0x1df)]||_0x510133[_0x2b45a3(0x1b1)]||'')[_0x2b45a3(0x206)]();let _0x274770=![],_0x41dec6=[],_0x2f8524=_0x510133[_0x2b45a3(0x1df)]||_0x510133[_0x2b45a3(0x1b1)]||_0x2b45a3(0x150);if(_0x4b9d20[_0x2b45a3(0x189)]('urlaub\x20ende')||_0x4b9d20[_0x2b45a3(0x189)]('rÃ¼ckkehr')||_0x4b9d20[_0x2b45a3(0x189)](_0x2b45a3(0x1a4)))_0x274770=!![],_0x41dec6=Array[_0x2b45a3(0x1ae)](_0x577393);else for(const _0x1194bf of _0x577393){if(_0x4b9d20[_0x2b45a3(0x189)](_0x1194bf[_0x2b45a3(0x206)]()))_0x41dec6[_0x2b45a3(0x1c7)](_0x1194bf);}_0x41dec6[_0x2b45a3(0x1e7)]>0x0&&_0x41dec6[_0x2b45a3(0x1f3)](_0x2836e5=>{const _0x2b1011=_0x2b45a3;let _0x13cddc=0x3c;if(_0x274770){let _0x590877=0x0;Object[_0x2b1011(0x205)](_0x2dc2b0)[_0x2b1011(0x1f3)](_0x47038e=>{if(_0x47038e>_0x590877)_0x590877=_0x47038e;}),_0x13cddc=_0x590877>0x0?_0x590877:0x78;}else _0x13cddc=getWarmupRobust(_0x2dc2b0,_0x2836e5);const _0x4b3d0a=new Date(_0x48169b-_0x13cddc*0xea60);_0x131e9d[_0x2b1011(0x1c7)]({'eventTime':_0x48169b,'triggerTime':_0x4b3d0a[_0x2b1011(0x175)](),'room':_0x2836e5,'minutes':_0x13cddc,'reason':_0x2f8524,'isGlobal':_0x274770});});}}catch(_0x2c77c7){}_0x131e9d[_0x2b45a3(0x161)]((_0x4317b1,_0x194123)=>_0x4317b1[_0x2b45a3(0x1bf)]-_0x194123['triggerTime']);const _0x10676f=_0x131e9d[_0x2b45a3(0x1a3)](0x0,0x1e);await _0x30538a[_0x2b45a3(0x199)](_0x2b45a3(0x1ac),{'val':JSON[_0x2b45a3(0x1c6)](_0x10676f),'ack':!![]});}async function monitorEnforcements(_0x24bcf2){const _0x41a945=a1_0x28bc33;try{const _0x483fbe=_0x41a945(0x1ea),_0x12a0a9=await _0x24bcf2[_0x41a945(0x15d)](_0x483fbe);if(!_0x12a0a9||!_0x12a0a9['val'])return;let _0xfce324=[];try{_0xfce324=JSON[_0x41a945(0x19e)](_0x12a0a9[_0x41a945(0x208)]);}catch(_0x50afe0){return;}if(!Array[_0x41a945(0x15e)](_0xfce324)||_0xfce324[_0x41a945(0x1e7)]===0x0)return;const _0x4091ed=Date['now'](),_0x22ab54=_0x24bcf2['config'][_0x41a945(0x1be)]||[];let _0x4ff426=![];for(let _0x2710c1=_0xfce324[_0x41a945(0x1e7)]-0x1;_0x2710c1>=0x0;_0x2710c1--){const _0x10b5c4=_0xfce324[_0x2710c1];if(_0x4091ed>=_0x10b5c4['until']){_0x24bcf2[_0x41a945(0x171)][_0x41a945(0x1c4)](_0x41a945(0x1c8)+_0x10b5c4[_0x41a945(0x15f)]+_0x41a945(0x1ec)),_0xfce324['splice'](_0x2710c1,0x1),_0x4ff426=!![];continue;}const _0x5bc899=_0x22ab54[_0x41a945(0x16d)](_0x3cd88e=>normalize(_0x3cd88e[_0x41a945(0x196)])===normalize(_0x10b5c4[_0x41a945(0x15f)])&&(_0x3cd88e[_0x41a945(0x1a8)]==='temperature'||_0x3cd88e['type']===_0x41a945(0x168)));if(_0x5bc899){const _0x3d7630=await findRelatedId(_0x24bcf2,_0x5bc899['id'],_0x41a945(0x19f));if(_0x3d7630){const _0x427a2e=await _0x24bcf2[_0x41a945(0x1cc)](_0x3d7630);_0x427a2e&&typeof _0x427a2e['val']===_0x41a945(0x1e5)&&(_0x427a2e[_0x41a945(0x208)]<0xf&&(_0x24bcf2[_0x41a945(0x171)][_0x41a945(0x197)](_0x41a945(0x1c3)+_0x10b5c4[_0x41a945(0x15f)]+_0x41a945(0x16c)+_0x427a2e[_0x41a945(0x208)]+_0x41a945(0x1cd)+_0x10b5c4[_0x41a945(0x153)]+'Â°C.'),await _0x24bcf2[_0x41a945(0x156)](_0x3d7630,_0x10b5c4[_0x41a945(0x153)]),await logAutomationAction(_0x24bcf2,_0x41a945(0x191)+_0x10b5c4['room']+':\x20'+_0x427a2e[_0x41a945(0x208)]+_0x41a945(0x1ba)+_0x10b5c4[_0x41a945(0x153)]+_0x41a945(0x1f4))));}}}_0x4ff426&&await _0x24bcf2[_0x41a945(0x199)](_0x483fbe,{'val':JSON[_0x41a945(0x1c6)](_0xfce324),'ack':!![]});}catch(_0x5e8cd5){_0x24bcf2[_0x41a945(0x171)][_0x41a945(0x182)]('Enforcement\x20Monitor\x20Error:\x20'+_0x5e8cd5[_0x41a945(0x1fd)]);}}async function checkCalendarTriggers(_0x400ae1){const _0x4d967a=a1_0x28bc33;if(!_0x400ae1[_0x4d967a(0x1d9)][_0x4d967a(0x155)]||!_0x400ae1[_0x4d967a(0x1d9)]['calendarInstance'])return;await updateSchedulePreview(_0x400ae1);let _0xf5c13b={},_0x53bbff={};try{const _0x584b=await _0x400ae1['getStateAsync'](_0x4d967a(0x1d8));if(_0x584b&&_0x584b[_0x4d967a(0x208)])_0xf5c13b=JSON[_0x4d967a(0x19e)](_0x584b['val']);const _0x273223=await _0x400ae1[_0x4d967a(0x15d)]('analysis.energy.warmupSources');if(_0x273223&&_0x273223[_0x4d967a(0x208)])_0x53bbff=JSON[_0x4d967a(0x19e)](_0x273223['val']);}catch(_0x18fb4d){}let _0x4278f1={'default':0x15};try{const _0x387d70=await _0x400ae1[_0x4d967a(0x15d)](_0x4d967a(0x181));if(_0x387d70&&_0x387d70[_0x4d967a(0x208)])_0x4278f1=JSON[_0x4d967a(0x19e)](_0x387d70['val']);}catch(_0x12e76e){}let _0x8aede0=[];try{const _0x43910c=await _0x400ae1[_0x4d967a(0x15d)](_0x4d967a(0x1ea));if(_0x43910c&&_0x43910c[_0x4d967a(0x208)])_0x8aede0=JSON['parse'](_0x43910c[_0x4d967a(0x208)]);}catch(_0x163ef2){}try{const _0x3b1f62=await _0x400ae1[_0x4d967a(0x1cc)](_0x400ae1[_0x4d967a(0x1d9)]['calendarInstance']+_0x4d967a(0x1fe));if(!_0x3b1f62||!_0x3b1f62[_0x4d967a(0x208)])return;const _0x4ad530=JSON[_0x4d967a(0x19e)](_0x3b1f62['val']),_0x99bf39=Date['now'](),_0x1e0ec1=_0x400ae1[_0x4d967a(0x1d9)]['devices']||[],_0x3c6ade=_0x400ae1[_0x4d967a(0x1d9)][_0x4d967a(0x1c0)]||[];let _0x45a740=![];for(const _0x119b39 of _0x4ad530){if(_0x119b39[_0x4d967a(0x159)]&&_0x3c6ade[_0x4d967a(0x1e7)]>0x0&&!_0x3c6ade[_0x4d967a(0x189)](_0x119b39[_0x4d967a(0x159)]))continue;const _0x2e2233=_0x119b39[_0x4d967a(0x1fc)]||_0x119b39[_0x4d967a(0x20d)]||_0x119b39[_0x4d967a(0x195)];if(!_0x2e2233)continue;const _0x3dfbde=new Date(_0x2e2233);if(isNaN(_0x3dfbde[_0x4d967a(0x175)]()))continue;const _0x9b7530=(_0x119b39['event']||_0x119b39[_0x4d967a(0x1b1)]||'')[_0x4d967a(0x206)]();if(_0x9b7530[_0x4d967a(0x189)](_0x4d967a(0x173))||_0x9b7530[_0x4d967a(0x189)](_0x4d967a(0x14f))||_0x9b7530[_0x4d967a(0x189)]('ankunft')){let _0x517852=0x0;Object[_0x4d967a(0x205)](_0xf5c13b)['forEach'](_0xbad0c=>{if(_0xbad0c>_0x517852)_0x517852=_0xbad0c;});if(_0x517852===0x0)_0x517852=0x78;const _0x263a27=_0x3dfbde[_0x4d967a(0x175)]()-_0x517852*0xea60;_0x99bf39>=_0x263a27&&_0x99bf39<_0x3dfbde['getTime']()&&(_0x400ae1[_0x4d967a(0x151)]!==_0x4d967a(0x1b5)&&(_0x400ae1[_0x4d967a(0x171)][_0x4d967a(0x1c4)](_0x4d967a(0x1dc)+_0x517852+_0x4d967a(0x177)),await _0x400ae1['setStateAsync'](_0x4d967a(0x1c5),{'val':_0x4d967a(0x1b5),'ack':![]})));}for(const _0x10447c of _0x1e0ec1){if(_0x10447c[_0x4d967a(0x196)]){const _0xad13d=_0x10447c[_0x4d967a(0x196)][_0x4d967a(0x206)](),_0x25b38f=(_0x10447c[_0x4d967a(0x176)]||'')[_0x4d967a(0x206)]();let _0x375c63=_0x9b7530['includes'](_0xad13d);!_0x375c63&&_0x25b38f[_0x4d967a(0x1e7)]>0x3&&_0x9b7530['includes'](_0x25b38f)&&(_0x375c63=!![]);if(_0x375c63){const _0x52cd77=getWarmupRobust(_0xf5c13b,_0x10447c[_0x4d967a(0x196)]),_0x5518d0=_0x53bbff[_0x10447c[_0x4d967a(0x196)]]||'Classic',_0x510677=_0x3dfbde[_0x4d967a(0x175)]()-_0x52cd77*0xea60;if(_0x99bf39>=_0x510677&&_0x99bf39<_0x3dfbde[_0x4d967a(0x175)]()){const _0x48a2ec=lastActions['cal_'+_0x10447c[_0x4d967a(0x196)]];if(_0x48a2ec&&_0x99bf39-_0x48a2ec<CAL_COOLDOWN_MS)continue;const _0x40cc00=await findRelatedId(_0x400ae1,_0x10447c['id'],_0x4d967a(0x19f));if(_0x40cc00){let _0x4afac0=_0x4278f1[_0x10447c['location']];if(_0x4afac0===undefined)_0x4afac0=_0x4278f1[_0x4d967a(0x179)];if(_0x4afac0===undefined)_0x4afac0=0x15;const _0x1da978=await _0x400ae1[_0x4d967a(0x1cc)](_0x40cc00);if(_0x1da978&&typeof _0x1da978[_0x4d967a(0x208)]==='number'&&_0x1da978[_0x4d967a(0x208)]<_0x4afac0-0.5){_0x400ae1[_0x4d967a(0x171)][_0x4d967a(0x1c4)](_0x4d967a(0x200)+_0x5518d0+_0x4d967a(0x165)+_0x10447c['location']+'\x27\x20(Match:\x20'+_0x9b7530+_0x4d967a(0x18c)+_0x4afac0+_0x4d967a(0x1d7)+_0x52cd77+_0x4d967a(0x177)),await _0x400ae1[_0x4d967a(0x156)](_0x40cc00,_0x4afac0),await logAutomationAction(_0x400ae1,_0x4d967a(0x18f)+_0x10447c[_0x4d967a(0x196)]+_0x4d967a(0x17f)+_0x4afac0+_0x4d967a(0x172)+_0x5518d0+')'),lastActions[_0x4d967a(0x1c1)+_0x10447c['location']]=_0x99bf39;const _0x30c190=_0x8aede0[_0x4d967a(0x1de)](_0xd6161c=>_0xd6161c[_0x4d967a(0x15f)]===_0x10447c['location']);if(_0x30c190!==-0x1)_0x8aede0['splice'](_0x30c190,0x1);_0x8aede0['push']({'room':_0x10447c[_0x4d967a(0x196)],'target':_0x4afac0,'until':_0x3dfbde[_0x4d967a(0x175)]()}),_0x45a740=!![];}}}}}}}_0x45a740&&await _0x400ae1[_0x4d967a(0x199)]('analysis.energy.activeEnforcements',{'val':JSON[_0x4d967a(0x1c6)](_0x8aede0),'ack':!![]});}catch(_0x3ca32a){_0x400ae1[_0x4d967a(0x171)]['warn']('Calendar\x20Check\x20Error:\x20'+_0x3ca32a['message']);}}async function manageMpcIntervention(_0x4659d4,_0x30dfba,_0x5b5bc3){const _0x3d1128=a1_0x28bc33;try{const _0x2a018d=_0x3d1128(0x1f5),_0x44386e=await _0x4659d4['getStateAsync'](_0x2a018d);let _0x19efab=[];if(_0x44386e&&_0x44386e[_0x3d1128(0x208)])try{_0x19efab=JSON[_0x3d1128(0x19e)](_0x44386e['val']);}catch(_0x4be3eb){}const _0x1bc18c=_0x19efab[_0x3d1128(0x152)](_0x30dfba);if(_0x5b5bc3===_0x3d1128(0x1a5))_0x1bc18c===-0x1&&(_0x19efab[_0x3d1128(0x1c7)](_0x30dfba),await _0x4659d4['setStateAsync'](_0x2a018d,{'val':JSON['stringify'](_0x19efab),'ack':!![]}));else _0x5b5bc3===_0x3d1128(0x1f9)&&(_0x1bc18c!==-0x1&&(_0x19efab[_0x3d1128(0x14e)](_0x1bc18c,0x1),await _0x4659d4[_0x3d1128(0x199)](_0x2a018d,{'val':JSON[_0x3d1128(0x1c6)](_0x19efab),'ack':!![]})));}catch(_0x341fea){}}async function cleanupGhostInterventions(_0x16c72a){const _0x48b9ac=a1_0x28bc33;try{const _0x44f141=_0x48b9ac(0x1f5),_0x26dbe3=await _0x16c72a[_0x48b9ac(0x15d)](_0x44f141);if(!_0x26dbe3||!_0x26dbe3[_0x48b9ac(0x208)])return;const _0x32b79c=JSON[_0x48b9ac(0x19e)](_0x26dbe3[_0x48b9ac(0x208)]);if(!Array['isArray'](_0x32b79c)||_0x32b79c[_0x48b9ac(0x1e7)]===0x0)return;let _0x3e6775={'default':0x15};try{const _0x2d1939=await _0x16c72a[_0x48b9ac(0x15d)]('analysis.energy.warmupTargets');if(_0x2d1939&&_0x2d1939[_0x48b9ac(0x208)])_0x3e6775=JSON['parse'](_0x2d1939[_0x48b9ac(0x208)]);}catch(_0x84f246){}let _0xcc8082=[];try{const _0x253ef2=await _0x16c72a['getStateAsync'](_0x48b9ac(0x209));if(_0x253ef2&&_0x253ef2[_0x48b9ac(0x208)])_0xcc8082=JSON[_0x48b9ac(0x19e)](_0x253ef2[_0x48b9ac(0x208)]);}catch(_0x17b3af){}let _0x22e00e={},_0xfdca6=![];try{const _0x2c0abd=await _0x16c72a[_0x48b9ac(0x15d)](_0x48b9ac(0x16e));if(_0x2c0abd&&_0x2c0abd['val'])_0x22e00e=JSON[_0x48b9ac(0x19e)](_0x2c0abd[_0x48b9ac(0x208)]);}catch(_0x2e017d){}if(_0x22e00e[_0x48b9ac(0x1e8)]){const _0x442224=Date[_0x48b9ac(0x148)]();for(const [_0x53f085,_0x59f528]of Object[_0x48b9ac(0x1cb)](_0x22e00e['_meta'])){_0x442224-_0x59f528>PENALTY_TTL&&(delete _0x22e00e[_0x53f085],delete _0x22e00e[_0x48b9ac(0x1e8)][_0x53f085],_0xfdca6=!![],_0x16c72a[_0x48b9ac(0x171)][_0x48b9ac(0x1c4)]('ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27'+_0x53f085+'\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.'));}}const _0x17b23f=_0x16c72a[_0x48b9ac(0x1d9)][_0x48b9ac(0x1be)]||[];let _0x21831e=![];for(let _0x5e2f9e=_0x32b79c[_0x48b9ac(0x1e7)]-0x1;_0x5e2f9e>=0x0;_0x5e2f9e--){const _0x10f5bf=_0x32b79c[_0x5e2f9e],_0xf3ab63=_0x17b23f[_0x48b9ac(0x16d)](_0x42f80a=>normalize(_0x42f80a[_0x48b9ac(0x196)])===normalize(_0x10f5bf)&&(_0x42f80a[_0x48b9ac(0x1a8)]==='temperature'||_0x42f80a[_0x48b9ac(0x1a8)]===_0x48b9ac(0x168)));if(!_0xf3ab63){_0x16c72a[_0x48b9ac(0x171)]['warn']('ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27'+_0x10f5bf+_0x48b9ac(0x16b)),_0x32b79c[_0x48b9ac(0x14e)](_0x5e2f9e,0x1),_0x21831e=!![];continue;}if(_0xf3ab63){const _0x3ca50a=await findRelatedId(_0x16c72a,_0xf3ab63['id'],_0x48b9ac(0x19f)),_0x18299b=await _0x16c72a[_0x48b9ac(0x1cc)](_0xf3ab63['id']);if(_0x3ca50a){const _0x93ab64=await _0x16c72a['getForeignStateAsync'](_0x3ca50a);if(_0x93ab64&&typeof _0x93ab64[_0x48b9ac(0x208)]===_0x48b9ac(0x1e5)){let _0x313172=![],_0x17f612='';Math[_0x48b9ac(0x1fb)](_0x93ab64['val']-ECO_TEMP)>0.5&&(_0x313172=!![],_0x17f612='manual');if(!_0x313172&&_0x18299b&&typeof _0x18299b[_0x48b9ac(0x208)]===_0x48b9ac(0x1e5)){const _0x1e71ec=_0x3e6775[_0x10f5bf]||_0x3e6775[_0x48b9ac(0x179)]||0x15;_0x18299b[_0x48b9ac(0x208)]<_0x1e71ec+0.2&&(_0x313172=!![],_0x17f612=_0x48b9ac(0x1ab));}if(_0x313172){if(_0x17f612===_0x48b9ac(0x166)){_0x16c72a[_0x48b9ac(0x171)][_0x48b9ac(0x1c4)]('ðŸ§¹\x20[MPC\x20CLEANUP]\x20'+_0x10f5bf+_0x48b9ac(0x18e)+_0x93ab64[_0x48b9ac(0x208)]+'Â°C\x20(nicht\x20'+ECO_TEMP+_0x48b9ac(0x203));const _0x2b41f7=lastActions[_0x48b9ac(0x1c1)+_0x10f5bf],_0xb26445=_0x2b41f7&&Date[_0x48b9ac(0x148)]()-_0x2b41f7<0x2*0x3c*0x3e8;if(!_0xb26445&&_0x93ab64[_0x48b9ac(0x208)]>ECO_TEMP+0.5){_0x16c72a[_0x48b9ac(0x14c)]&&(_0x16c72a[_0x48b9ac(0x171)][_0x48b9ac(0x1c4)](_0x48b9ac(0x1aa)+_0x10f5bf+_0x48b9ac(0x17b)),_0x16c72a[_0x48b9ac(0x14c)](_0x48b9ac(0x20b),{'room':_0x10f5bf}));const _0x3b03ed=_0x10f5bf+'_'+new Date()[_0x48b9ac(0x17a)]();if(!_0x22e00e[_0x3b03ed]){_0x22e00e[_0x3b03ed]=0x1;if(!_0x22e00e['_meta'])_0x22e00e[_0x48b9ac(0x1e8)]={};_0x22e00e[_0x48b9ac(0x1e8)][_0x3b03ed]=Date[_0x48b9ac(0x148)](),_0xfdca6=!![];}}else _0xb26445&&_0x16c72a[_0x48b9ac(0x171)][_0x48b9ac(0x1c4)](_0x48b9ac(0x1a1)+_0x10f5bf+_0x48b9ac(0x145));}else{if(_0x17f612==='too_cold'){let _0x4c4dae=![];if(_0xcc8082[_0x48b9ac(0x16d)](_0x383215=>_0x383215[_0x48b9ac(0x15f)]===_0x10f5bf))_0x4c4dae=!![];const _0x463d20=_0x17b23f['filter'](_0xc10f25=>normalize(_0xc10f25['location'])===normalize(_0x10f5bf)&&(_0xc10f25[_0x48b9ac(0x1a8)]==='window'||_0xc10f25[_0x48b9ac(0x1a8)]==='sensor'||_0xc10f25[_0x48b9ac(0x1a8)]===_0x48b9ac(0x1cf)));for(const _0x2a0393 of _0x463d20){try{const _0xa73032=await _0x16c72a[_0x48b9ac(0x1cc)](_0x2a0393['id']);if(_0xa73032&&(_0xa73032[_0x48b9ac(0x208)]===!![]||_0xa73032[_0x48b9ac(0x208)]===0x1||String(_0xa73032[_0x48b9ac(0x208)])['toLowerCase']()===_0x48b9ac(0x188)))_0x4c4dae=!![];}catch(_0x4c4e8c){}}if(_0x4c4dae)_0x16c72a['log'][_0x48b9ac(0x1c4)](_0x48b9ac(0x1b7)+_0x10f5bf+'\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.');else{const _0x221ad6=_0x3e6775[_0x10f5bf]||_0x3e6775[_0x48b9ac(0x179)]||0x15;_0x16c72a['log']['info'](_0x48b9ac(0x19c)+_0x10f5bf+_0x48b9ac(0x154)+_0x18299b[_0x48b9ac(0x208)]+_0x48b9ac(0x198)+(_0x221ad6+0.2)+_0x48b9ac(0x1d0)),await _0x16c72a[_0x48b9ac(0x156)](_0x3ca50a,_0x221ad6),await logAutomationAction(_0x16c72a,_0x48b9ac(0x1e0)+_0x10f5bf+_0x48b9ac(0x1c9)+_0x221ad6+'Â°C'),lastActions[_0x48b9ac(0x1f0)+_0x10f5bf]=Date['now']();}}}_0x32b79c[_0x48b9ac(0x14e)](_0x5e2f9e,0x1),_0x21831e=!![];}}}}}_0x21831e&&await _0x16c72a[_0x48b9ac(0x199)](_0x44f141,{'val':JSON[_0x48b9ac(0x1c6)](_0x32b79c),'ack':!![]}),_0xfdca6&&await _0x16c72a[_0x48b9ac(0x199)](_0x48b9ac(0x16e),{'val':JSON[_0x48b9ac(0x1c6)](_0x22e00e),'ack':!![]});}catch(_0x579d8a){}}function a1_0x1649(_0x5d71a6,_0x1e5611){const _0x3a93b8=a1_0x5623();return a1_0x1649=function(_0x1d0e6e,_0x3afcea){_0x1d0e6e=_0x1d0e6e-0x144;let _0x562304=_0x3a93b8[_0x1d0e6e];return _0x562304;},a1_0x1649(_0x5d71a6,_0x1e5611);}async function applyEnergySavings(_0x424f2c,_0x3a0194){const _0x4542dc=a1_0x28bc33;await cleanupGhostInterventions(_0x424f2c);if(!_0x3a0194||_0x3a0194[_0x4542dc(0x1e7)]===0x0)return;const _0x202c2b=_0x424f2c[_0x4542dc(0x1d9)][_0x4542dc(0x1be)]||[],_0x1a7cbe=Date[_0x4542dc(0x148)]();for(const _0x599dce of _0x3a0194){const _0x25c824=_0x599dce[_0x4542dc(0x15f)],_0x27af32=_0x599dce['minutes_safe'],_0x3ad8dd=_0x599dce['target']||0x15;if(lastActions[_0x4542dc(0x1f0)+_0x25c824]&&_0x1a7cbe-lastActions[_0x4542dc(0x1f0)+_0x25c824]<RESCUE_LOCK_MS)continue;const _0x8c6097=_0x202c2b[_0x4542dc(0x16d)](_0x1c6757=>normalize(_0x1c6757[_0x4542dc(0x196)])===normalize(_0x25c824)&&(_0x1c6757[_0x4542dc(0x1a8)]==='temperature'||_0x1c6757[_0x4542dc(0x1a8)]===_0x4542dc(0x168)));if(!_0x8c6097)continue;const _0x503b8e=await findRelatedId(_0x424f2c,_0x8c6097['id'],_0x4542dc(0x19f));if(_0x503b8e){if(lastActions['mpc_'+_0x25c824]&&_0x1a7cbe-lastActions[_0x4542dc(0x1d5)+_0x25c824]<0x1e*0x3c*0x3e8)continue;const _0x25535a=await _0x424f2c[_0x4542dc(0x1cc)](_0x503b8e);if(_0x25535a&&typeof _0x25535a[_0x4542dc(0x208)]===_0x4542dc(0x1e5)){const _0x33fb24=_0x25535a[_0x4542dc(0x208)];_0x33fb24!==ECO_TEMP&&await manageMpcIntervention(_0x424f2c,_0x25c824,'remove');if(_0x27af32>0x1e)_0x33fb24>ECO_TEMP+0.5&&(_0x424f2c[_0x4542dc(0x171)][_0x4542dc(0x1c4)](_0x4542dc(0x19b)+_0x25c824+_0x4542dc(0x16c)+ECO_TEMP+'Â°C!\x20(Puffer:\x20'+_0x27af32+_0x4542dc(0x1a0)),await _0x424f2c[_0x4542dc(0x156)](_0x503b8e,ECO_TEMP),await manageMpcIntervention(_0x424f2c,_0x25c824,_0x4542dc(0x1a5)),lastActions[_0x4542dc(0x1d5)+_0x25c824]=_0x1a7cbe,await logAutomationAction(_0x424f2c,_0x4542dc(0x1bd)+_0x25c824+_0x4542dc(0x194)+ECO_TEMP+'Â°C'));else _0x27af32<=0xf&&(_0x33fb24<_0x3ad8dd&&(_0x424f2c[_0x4542dc(0x171)]['info'](_0x4542dc(0x18b)+_0x25c824+_0x4542dc(0x1a6)+_0x3ad8dd+_0x4542dc(0x17d)),await _0x424f2c[_0x4542dc(0x156)](_0x503b8e,_0x3ad8dd),await manageMpcIntervention(_0x424f2c,_0x25c824,_0x4542dc(0x1f9)),lastActions['mpc_'+_0x25c824]=_0x1a7cbe,await logAutomationAction(_0x424f2c,_0x4542dc(0x1bd)+_0x25c824+_0x4542dc(0x185)+_0x3ad8dd+'Â°C')));}}else _0x424f2c['log'][_0x4542dc(0x197)](_0x4542dc(0x180)+_0x25c824+'\x20gefunden!');}}module[a1_0x28bc33(0x1bb)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};