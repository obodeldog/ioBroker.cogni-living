const a1_0x2ec0dd=a1_0x337d;(function(_0x49f924,_0x283936){const _0x5d0f97=a1_0x337d,_0x2f909e=_0x49f924();while(!![]){try{const _0x4409d7=-parseInt(_0x5d0f97(0x215))/0x1+-parseInt(_0x5d0f97(0x21b))/0x2+parseInt(_0x5d0f97(0x271))/0x3*(parseInt(_0x5d0f97(0x22b))/0x4)+parseInt(_0x5d0f97(0x203))/0x5+parseInt(_0x5d0f97(0x22f))/0x6*(parseInt(_0x5d0f97(0x248))/0x7)+-parseInt(_0x5d0f97(0x1d1))/0x8+parseInt(_0x5d0f97(0x207))/0x9;if(_0x4409d7===_0x283936)break;else _0x2f909e['push'](_0x2f909e['shift']());}catch(_0x472224){_0x2f909e['push'](_0x2f909e['shift']());}}}(a1_0x3391,0x1d684));const a1_0x42fb8e=(function(){let _0x18b4df=!![];return function(_0x5dd0a9,_0x46e3b8){const _0x36facf=_0x18b4df?function(){const _0x405de9=a1_0x337d;if(_0x46e3b8){const _0x1dbf59=_0x46e3b8[_0x405de9(0x201)](_0x5dd0a9,arguments);return _0x46e3b8=null,_0x1dbf59;}}:function(){};return _0x18b4df=![],_0x36facf;};}()),a1_0x14b052=a1_0x42fb8e(this,function(){const _0x1b7103=a1_0x337d;return a1_0x14b052[_0x1b7103(0x1da)]()['search'](_0x1b7103(0x244))[_0x1b7103(0x1da)]()[_0x1b7103(0x228)](a1_0x14b052)[_0x1b7103(0x246)](_0x1b7103(0x244));});a1_0x14b052();function a1_0x3391(){const _0x318f94=['target','temperature','55149fvWBRy','from','.1.ACTUAL_TEMPERATURE','mpc_',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','Classic','25694kddfuR','¬∞C.','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','\x20ist\x20auf\x20','toLowerCase','thermostatMapping','getTime','analysis.automation.mode','\x20erreicht\x20Limit\x20(','push','message','üî•\x20[MPC\x20ACTION]\x20Heize\x20','stringify','constructor','Auto-Erkennung','stellwert','156vGXhVH','getForeignObjectsAsync','number','findIndex','51594EiPHOs','manual','remove','üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20','length','currentSystemMode','room','_meta','setpoint','useCalendar','ACTUAL','ankunft','SET_POINT_TEMPERATURE','parse','\x20auf\x20','score','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','unit','./ai_agent','getHours','calendarInstance','(((.+)+)+)+$','level.temperature','search','warn','77yKDOuH','level','target_temperature','slice','write','Enforcement\x20Monitor\x20Error:\x20','¬∞C\x20->\x20','¬∞C\x20(via\x20','date','default','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','log','value.valve','getStateAsync','_calName','\x20wieder\x20auf\x20',':\x20Absenkung\x20auf\x20','location','Unbekannt','values','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','val','TRAIN_RL_PENALTY','analysis.energy.warmupTargets','includes','getForeignObjectAsync','forEach','urlaub\x20ende','switch','ACTUAL_TEMPERATURE','until','analysis.automation.actionLog','off','role','indexOf','\x27\x20(Match:\x20','consultButler','common','[CAL]\x20','reason','.1.LEVEL','6609UXswkR','.4.SET_TEMPERATURE','exports','valveMapping','wert','active','minutes_safe','entries','info','SET','open','type','\x20min)','local_temperature','contact','analysis.energy.activeEnforcements','window','¬∞C\x20(nicht\x20','state','system.mode','now','too_cold','light','¬∞C!\x20(Puffer:\x20','thermostat','approved','\x20->\x20','\x20wurde\x20manuell\x20erh√∂ht.','¬∞C).\x20Sparmodus\x20beendet!','string','filter','PERFECT','sensor','1643480mHKYGG','.4.VALVE_STATE','[WATCHDOG]\x20','find','\x20gefunden!','[MPC]\x20','üö®\x20[MPC\x20WATCHDOG]\x20','trim','\x20min).','toString','setStateAsync','.1.SET_POINT_TEMPERATURE','üìÖ\x20SMART\x20SCHEDULE\x20[','cal_','setForeignStateAsync','Ist','¬∞C!\x20(Puffer\x20leer).','Manuelles\x20Mapping','hm-rpc','eventStart','rescue_','Nicht\x20gefunden','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','¬∞C\x20<\x20','devices','getForeignStateAsync','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','position','Pr√§diktion:\x20','pi_heating_demand',')\x20aktiv.\x20Heize\x20auf\x20','map','dimmer','triggerTime','valve','.1.TEMPERATURE','error','splice','add','abs','event','summary','config','analysis.energy.rlPenalties','r√ºckkehr','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','replace','apply','_date','633395yOtQaj','split','analysis.automation.confidenceThreshold','unshift','780282yxgLsj','localeCompare','analysis.energy.warmupTimes','analysis.energy.mpcActiveInterventions','Calendar\x20Check\x20Error:\x20','name','temp','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.',']:\x20Raum-Trigger\x20\x27','sort','sendToPythonWrapper','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20'];a1_0x3391=function(){return _0x318f94;};return a1_0x3391();}'use strict';const aiAgent=require(a1_0x2ec0dd(0x241)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function a1_0x337d(_0x55db77,_0x457c78){const _0x11a857=a1_0x3391();return a1_0x337d=function(_0x14b052,_0x42fb8e){_0x14b052=_0x14b052-0x1cc;let _0x3391ae=_0x11a857[_0x14b052];return _0x3391ae;},a1_0x337d(_0x55db77,_0x457c78);}function normalize(_0x43242d){const _0x38992d=a1_0x2ec0dd;if(!_0x43242d)return'';return _0x43242d[_0x38992d(0x21f)]()['replace'](/\s+/g,'')[_0x38992d(0x1d8)]();}function getWarmupRobust(_0x56120b,_0xee3607){const _0x22f5d3=a1_0x2ec0dd;if(!_0x56120b||!_0xee3607)return 0x3c;if(_0x56120b[_0xee3607]!==undefined)return _0x56120b[_0xee3607];const _0x36b701=_0xee3607['toLowerCase']()[_0x22f5d3(0x200)](/√§/g,'ae')[_0x22f5d3(0x200)](/√∂/g,'oe')[_0x22f5d3(0x200)](/√º/g,'ue')[_0x22f5d3(0x200)](/√ü/g,'ss')[_0x22f5d3(0x200)](/\s+/g,'_')[_0x22f5d3(0x200)](/[^a-z0-9_]/g,'');if(_0x56120b[_0x36b701]!==undefined)return _0x56120b[_0x36b701];return 0x3c;}async function logAutomationAction(_0x1ea636,_0xad4ba){const _0x2761ff=a1_0x2ec0dd;await _0x1ea636['setStateAsync']('analysis.automation.lastAction',{'val':_0xad4ba,'ack':!![]});try{const _0x4cb55d=_0x2761ff(0x267),_0x25384d=await _0x1ea636['getStateAsync'](_0x4cb55d);let _0x10fd69=[];if(_0x25384d&&_0x25384d[_0x2761ff(0x25d)])try{_0x10fd69=JSON[_0x2761ff(0x23c)](_0x25384d[_0x2761ff(0x25d)]);}catch(_0x970e54){}_0x10fd69[_0x2761ff(0x206)]({'ts':Date['now'](),'msg':_0xad4ba});if(_0x10fd69[_0x2761ff(0x233)]>0x32)_0x10fd69=_0x10fd69[_0x2761ff(0x24b)](0x0,0x32);await _0x1ea636['setStateAsync'](_0x4cb55d,{'val':JSON[_0x2761ff(0x227)](_0x10fd69),'ack':!![]});}catch(_0x4a95f5){}}async function handlePrediction(_0x22fee7,_0xfd9ce6,_0x494362){const _0x5908fa=a1_0x2ec0dd;if(!_0xfd9ce6||_0xfd9ce6==='Unknown')return;let _0x3ed1da=_0x5908fa(0x268),_0x51ae5f=0.6;try{const _0x438320=await _0x22fee7[_0x5908fa(0x255)](_0x5908fa(0x222));if(_0x438320&&_0x438320['val'])_0x3ed1da=_0x438320[_0x5908fa(0x25d)];const _0x207ea3=await _0x22fee7[_0x5908fa(0x255)](_0x5908fa(0x205));if(_0x207ea3&&_0x207ea3[_0x5908fa(0x25d)])_0x51ae5f=_0x207ea3['val'];}catch(_0xf24579){}if(_0x3ed1da===_0x5908fa(0x268)||_0x494362<_0x51ae5f)return;const _0x1ffde9=Date[_0x5908fa(0x285)]();if(lastActions[_0xfd9ce6]&&_0x1ffde9-lastActions[_0xfd9ce6]<COOLDOWN_MS)return;const _0x16ed5e=_0x22fee7[_0x5908fa(0x1fb)]['devices']||[],_0x57f79d=normalize(_0xfd9ce6),_0x4132db=_0x16ed5e[_0x5908fa(0x1d4)](_0x4a5b1b=>normalize(_0x4a5b1b[_0x5908fa(0x259)])===_0x57f79d&&(_0x4a5b1b[_0x5908fa(0x27c)]===_0x5908fa(0x287)||_0x4a5b1b[_0x5908fa(0x27c)]===_0x5908fa(0x1f1)||_0x4a5b1b[_0x5908fa(0x27c)]===_0x5908fa(0x264)));if(!_0x4132db)return;const _0x6fafe5=await aiAgent[_0x5908fa(0x26c)](_0x22fee7,_0xfd9ce6,_0x4132db[_0x5908fa(0x20c)],_0x494362);if(!_0x6fafe5[_0x5908fa(0x28a)])return;const _0x25595a=_0x5908fa(0x1ed)+_0xfd9ce6+'\x20->\x20Schalte\x20'+_0x4132db[_0x5908fa(0x20c)]+'\x20('+_0x6fafe5[_0x5908fa(0x26f)]+')';await logAutomationAction(_0x22fee7,'['+_0x3ed1da['toUpperCase']()+']\x20'+_0x25595a);if(_0x3ed1da===_0x5908fa(0x276)){const _0x5debee=await _0x22fee7[_0x5908fa(0x1ea)](_0x4132db['id']);(!_0x5debee||!_0x5debee['val']&&_0x5debee['val']!==!![])&&await _0x22fee7[_0x5908fa(0x1df)](_0x4132db['id'],!![]),lastActions[_0xfd9ce6]=_0x1ffde9;}}async function findRelatedId(_0x4d2c28,_0x76a382,_0x4b310e=a1_0x2ec0dd(0x237)){const _0x58884b=a1_0x2ec0dd;if(_0x4b310e==='setpoint'&&_0x4d2c28[_0x58884b(0x1fb)]['thermostatMapping']){let _0x79b15c=_0x4d2c28[_0x58884b(0x1fb)][_0x58884b(0x220)];if(typeof _0x79b15c===_0x58884b(0x1cd))try{_0x79b15c=JSON[_0x58884b(0x23c)](_0x79b15c);}catch(_0x14e476){}if(_0x79b15c&&_0x79b15c[_0x76a382])return _0x79b15c[_0x76a382];}if(_0x4b310e===_0x58884b(0x1f3)&&_0x4d2c28[_0x58884b(0x1fb)][_0x58884b(0x274)]){let _0x49a5ad=_0x4d2c28[_0x58884b(0x1fb)][_0x58884b(0x274)];if(typeof _0x49a5ad===_0x58884b(0x1cd))try{_0x49a5ad=JSON[_0x58884b(0x23c)](_0x49a5ad);}catch(_0x425d25){}if(_0x49a5ad&&_0x49a5ad[_0x76a382])return _0x49a5ad[_0x76a382];}let _0x16898c=[];if(_0x4b310e===_0x58884b(0x237))_0x16898c=[{'s':_0x58884b(0x217),'t':_0x58884b(0x1dc)},{'s':_0x58884b(0x1f4),'t':_0x58884b(0x1dc)},{'s':_0x58884b(0x1f4),'t':_0x58884b(0x272)},{'s':_0x58884b(0x265),'t':_0x58884b(0x23b)},{'s':_0x58884b(0x27e),'t':'occupied_heating_setpoint'},{'s':_0x58884b(0x27e),'t':'current_heating_setpoint'},{'s':_0x58884b(0x214),'t':_0x58884b(0x24a)},{'s':_0x58884b(0x239),'t':_0x58884b(0x27a)},{'s':_0x58884b(0x1e0),'t':'Soll'},{'s':'temperature','t':'setpoint'}];else _0x4b310e===_0x58884b(0x1f3)&&(_0x16898c=[{'s':_0x58884b(0x217),'t':_0x58884b(0x270)},{'s':_0x58884b(0x1f4),'t':_0x58884b(0x270)},{'s':_0x58884b(0x1f4),'t':_0x58884b(0x1d2)},{'s':_0x58884b(0x27e),'t':_0x58884b(0x1ee)},{'s':_0x58884b(0x214),'t':'valve_position'},{'s':_0x58884b(0x214),'t':_0x58884b(0x249)}]);for(const _0x1e311a of _0x16898c){if(_0x76a382[_0x58884b(0x260)](_0x1e311a['s'])){const _0x49cd87=_0x76a382['replace'](_0x1e311a['s'],_0x1e311a['t']),_0x559a3a=await _0x4d2c28[_0x58884b(0x261)](_0x49cd87);if(_0x559a3a)return _0x49cd87;}}try{const _0x2c8be9=_0x76a382[_0x58884b(0x204)]('.');if(_0x2c8be9[_0x58884b(0x233)]>0x2){const _0x1e2cc4=_0x2c8be9['slice'](0x0,-0x1)['join']('.'),_0x206633=await _0x4d2c28[_0x58884b(0x22c)](_0x1e2cc4+'.*'),_0x290ced=[],_0x491243=_0x76a382['split'](/[._]+/)['filter'](_0x1a47a5=>!['openknx','0',_0x58884b(0x1e3),'ist',_0x58884b(0x275),_0x58884b(0x214),'actual','sensor','messwert',_0x58884b(0x283)][_0x58884b(0x260)](_0x1a47a5[_0x58884b(0x21f)]()));for(const [_0x33aef2,_0x31a605]of Object[_0x58884b(0x278)](_0x206633)){if(_0x33aef2===_0x76a382)continue;if(_0x31a605&&_0x31a605[_0x58884b(0x26d)]){const _0x118764=_0x33aef2[_0x58884b(0x21f)](),_0xf469b2=(_0x31a605['common'][_0x58884b(0x269)]||'')[_0x58884b(0x21f)](),_0x4ae832=(_0x31a605[_0x58884b(0x26d)][_0x58884b(0x240)]||'')[_0x58884b(0x21f)]();let _0x5ef3d0=![];if(_0x4b310e===_0x58884b(0x237)&&_0x31a605[_0x58884b(0x26d)][_0x58884b(0x24c)]===!![])_0x5ef3d0=_0x118764[_0x58884b(0x260)]('set')||_0x118764['includes']('soll')||_0x118764[_0x58884b(0x260)](_0x58884b(0x213))||_0xf469b2[_0x58884b(0x260)](_0x58884b(0x245))||_0xf469b2[_0x58884b(0x260)]('thermostat.setpoint');else _0x4b310e===_0x58884b(0x1f3)&&(_0x5ef3d0=_0x118764[_0x58884b(0x260)](_0x58884b(0x249))||_0x118764[_0x58884b(0x260)]('valve')||_0x118764[_0x58884b(0x260)](_0x58884b(0x22a))||_0x118764['includes'](_0x58884b(0x1ec))||_0xf469b2['includes']('level.valve')||_0xf469b2['includes'](_0x58884b(0x254))||_0x4ae832[_0x58884b(0x260)]('%'));if(_0x5ef3d0){const _0xb1f0e=_0x33aef2[_0x58884b(0x204)](/[._]+/)[_0x58884b(0x1f0)](_0x15fb9d=>_0x15fb9d[_0x58884b(0x21f)]());let _0x545ffe=0x0;_0x491243[_0x58884b(0x262)](_0x5709dc=>{const _0x533436=_0x58884b;if(_0xb1f0e[_0x533436(0x260)](_0x5709dc[_0x533436(0x21f)]()))_0x545ffe++;}),_0x290ced[_0x58884b(0x224)]({'id':_0x33aef2,'score':_0x545ffe});}}}if(_0x290ced[_0x58884b(0x233)]>0x0){_0x290ced['sort']((_0x5db19c,_0x153d37)=>_0x153d37[_0x58884b(0x23e)]-_0x5db19c['score']);if(_0x290ced[0x0]['score']>0x0)return _0x290ced[0x0]['id'];}}}catch(_0x570fd7){}return null;}async function scanThermostats(_0x5b1a1a){const _0x48dd24=a1_0x2ec0dd,_0x202d96=_0x5b1a1a['config']['devices']||[],_0x4fe20d=[],_0x2e9d81=_0x202d96[_0x48dd24(0x1ce)](_0xdc04e4=>_0xdc04e4['id']&&_0xdc04e4['id']['includes'](_0x48dd24(0x214))||_0xdc04e4[_0x48dd24(0x27c)]&&[_0x48dd24(0x214),_0x48dd24(0x289),'sensor']['includes'](_0xdc04e4[_0x48dd24(0x27c)])||_0xdc04e4['name']&&_0xdc04e4[_0x48dd24(0x20c)][_0x48dd24(0x21f)]()['includes'](_0x48dd24(0x20d)));for(const _0x3edb3c of _0x2e9d81){const _0x55d00d=await findRelatedId(_0x5b1a1a,_0x3edb3c['id'],_0x48dd24(0x237)),_0xc076b7=await findRelatedId(_0x5b1a1a,_0x3edb3c['id'],_0x48dd24(0x1f3));let _0x1d98d7=_0x48dd24(0x1e6),_0x1a677c=![],_0x57872d=_0x5b1a1a[_0x48dd24(0x1fb)]['thermostatMapping']||{};if(typeof _0x57872d===_0x48dd24(0x1cd))try{_0x57872d=JSON[_0x48dd24(0x23c)](_0x57872d);}catch(_0xd7d588){}let _0xde0dd0=_0x5b1a1a[_0x48dd24(0x1fb)][_0x48dd24(0x274)]||{};if(typeof _0xde0dd0===_0x48dd24(0x1cd))try{_0xde0dd0=JSON[_0x48dd24(0x23c)](_0xde0dd0);}catch(_0x35e89e){}if(_0x57872d[_0x3edb3c['id']]&&_0x57872d[_0x3edb3c['id']]===_0x55d00d||_0xde0dd0[_0x3edb3c['id']]&&_0xde0dd0[_0x3edb3c['id']]===_0xc076b7)_0x1d98d7=_0x48dd24(0x1e2),_0x1a677c=!![];else(_0x55d00d||_0xc076b7)&&(_0x1d98d7=_0x48dd24(0x229));_0x4fe20d['push']({'room':_0x3edb3c[_0x48dd24(0x259)]||'Unbekannt','sensorId':_0x3edb3c['id'],'setpointId':_0x55d00d||'-','valveId':_0xc076b7||'-','source':_0x1d98d7,'isManual':_0x1a677c,'status':_0x55d00d&&_0xc076b7?_0x48dd24(0x1cf):_0x55d00d?'OK':'Fehlt'});}return _0x4fe20d[_0x48dd24(0x210)]((_0x1c4a6c,_0x4df409)=>_0x1c4a6c[_0x48dd24(0x235)][_0x48dd24(0x208)](_0x4df409['room']));}async function updateSchedulePreview(_0x1cd3b6){const _0x3d4496=a1_0x2ec0dd;if(!_0x1cd3b6['config'][_0x3d4496(0x238)]||!_0x1cd3b6['config'][_0x3d4496(0x243)])return;let _0x4c4032={};try{const _0x234cb3=await _0x1cd3b6[_0x3d4496(0x255)](_0x3d4496(0x209));if(_0x234cb3&&_0x234cb3[_0x3d4496(0x25d)])_0x4c4032=JSON['parse'](_0x234cb3[_0x3d4496(0x25d)]);}catch(_0x7c6e1d){}const _0x4c3e34=[],_0x42a5aa=Date['now'](),_0x7d7e2c=0x30*0x3c*0x3c*0x3e8;try{const _0x280918=await _0x1cd3b6[_0x3d4496(0x1ea)](_0x1cd3b6[_0x3d4496(0x1fb)][_0x3d4496(0x243)]+'.data.table');if(!_0x280918||!_0x280918[_0x3d4496(0x25d)])return;const _0x5c19d7=JSON[_0x3d4496(0x23c)](_0x280918[_0x3d4496(0x25d)]),_0xb81ee4=_0x1cd3b6[_0x3d4496(0x1fb)]['calendarSelection']||[],_0x303533=_0x1cd3b6['config'][_0x3d4496(0x1e9)]||[],_0x5728f1=new Set();_0x303533[_0x3d4496(0x262)](_0x192ddc=>{const _0x54ed35=_0x3d4496;if(_0x192ddc['location'])_0x5728f1[_0x54ed35(0x1f7)](_0x192ddc[_0x54ed35(0x259)]);});for(const _0xf1b331 of _0x5c19d7){if(_0xf1b331[_0x3d4496(0x256)]&&_0xb81ee4['length']>0x0&&!_0xb81ee4[_0x3d4496(0x260)](_0xf1b331[_0x3d4496(0x256)]))continue;const _0x30a075=_0xf1b331[_0x3d4496(0x202)]||_0xf1b331['eventStart']||_0xf1b331[_0x3d4496(0x250)];if(!_0x30a075)continue;const _0x8f957c=new Date(_0x30a075),_0x4e7846=_0x8f957c[_0x3d4496(0x221)]();if(isNaN(_0x4e7846))continue;if(_0x4e7846<_0x42a5aa)continue;if(_0x4e7846>_0x42a5aa+_0x7d7e2c)continue;const _0x4e3fdd=(_0xf1b331[_0x3d4496(0x1f9)]||_0xf1b331[_0x3d4496(0x1fa)]||'')['toLowerCase']();let _0x9c7b2d=![],_0x4d5432=[],_0x309029=_0xf1b331['event']||_0xf1b331[_0x3d4496(0x1fa)]||_0x3d4496(0x25a);if(_0x4e3fdd[_0x3d4496(0x260)]('urlaub\x20ende')||_0x4e3fdd[_0x3d4496(0x260)](_0x3d4496(0x1fd))||_0x4e3fdd['includes'](_0x3d4496(0x23a)))_0x9c7b2d=!![],_0x4d5432=Array[_0x3d4496(0x216)](_0x5728f1);else for(const _0x7f6b51 of _0x5728f1){if(_0x4e3fdd[_0x3d4496(0x260)](_0x7f6b51['toLowerCase']()))_0x4d5432[_0x3d4496(0x224)](_0x7f6b51);}_0x4d5432['length']>0x0&&_0x4d5432['forEach'](_0x4545b0=>{const _0x265760=_0x3d4496;let _0x3f9b78=0x3c;if(_0x9c7b2d){let _0x145df4=0x0;Object[_0x265760(0x25b)](_0x4c4032)[_0x265760(0x262)](_0x42cd06=>{if(_0x42cd06>_0x145df4)_0x145df4=_0x42cd06;}),_0x3f9b78=_0x145df4>0x0?_0x145df4:0x78;}else _0x3f9b78=getWarmupRobust(_0x4c4032,_0x4545b0);const _0x49bcc4=new Date(_0x4e7846-_0x3f9b78*0xea60);_0x4c3e34[_0x265760(0x224)]({'eventTime':_0x4e7846,'triggerTime':_0x49bcc4[_0x265760(0x221)](),'room':_0x4545b0,'minutes':_0x3f9b78,'reason':_0x309029,'isGlobal':_0x9c7b2d});});}}catch(_0x440f93){}_0x4c3e34[_0x3d4496(0x210)]((_0x18b196,_0x225b0f)=>_0x18b196[_0x3d4496(0x1f2)]-_0x225b0f['triggerTime']);const _0x4ff587=_0x4c3e34['slice'](0x0,0x5);await _0x1cd3b6[_0x3d4496(0x1db)]('analysis.energy.schedulePreview',{'val':JSON[_0x3d4496(0x227)](_0x4ff587),'ack':!![]});}async function monitorEnforcements(_0x112491){const _0x4225e5=a1_0x2ec0dd;try{const _0x59c1be=_0x4225e5(0x280),_0x5458aa=await _0x112491[_0x4225e5(0x255)](_0x59c1be);if(!_0x5458aa||!_0x5458aa[_0x4225e5(0x25d)])return;let _0x31b9e0=[];try{_0x31b9e0=JSON[_0x4225e5(0x23c)](_0x5458aa[_0x4225e5(0x25d)]);}catch(_0x10054f){return;}if(!Array['isArray'](_0x31b9e0)||_0x31b9e0['length']===0x0)return;const _0x698216=Date['now'](),_0x13bffe=_0x112491[_0x4225e5(0x1fb)][_0x4225e5(0x1e9)]||[];let _0x51dd60=![];for(let _0x3909f6=_0x31b9e0[_0x4225e5(0x233)]-0x1;_0x3909f6>=0x0;_0x3909f6--){const _0x486dcc=_0x31b9e0[_0x3909f6];if(_0x698216>=_0x486dcc[_0x4225e5(0x266)]){_0x112491[_0x4225e5(0x253)][_0x4225e5(0x279)](_0x4225e5(0x212)+_0x486dcc[_0x4225e5(0x235)]+_0x4225e5(0x25c)),_0x31b9e0[_0x4225e5(0x1f6)](_0x3909f6,0x1),_0x51dd60=!![];continue;}const _0x3f094c=_0x13bffe[_0x4225e5(0x1d4)](_0x431060=>normalize(_0x431060['location'])===normalize(_0x486dcc[_0x4225e5(0x235)])&&(_0x431060['type']==='temperature'||_0x431060[_0x4225e5(0x27c)]===_0x4225e5(0x289)));if(_0x3f094c){const _0x313b69=await findRelatedId(_0x112491,_0x3f094c['id'],_0x4225e5(0x237));if(_0x313b69){const _0x1ccbfe=await _0x112491[_0x4225e5(0x1ea)](_0x313b69);_0x1ccbfe&&typeof _0x1ccbfe[_0x4225e5(0x25d)]===_0x4225e5(0x22d)&&(_0x1ccbfe[_0x4225e5(0x25d)]<0xf&&(_0x112491[_0x4225e5(0x253)]['warn'](_0x4225e5(0x21d)+_0x486dcc[_0x4225e5(0x235)]+'\x20auf\x20'+_0x1ccbfe[_0x4225e5(0x25d)]+_0x4225e5(0x1ff)+_0x486dcc[_0x4225e5(0x213)]+_0x4225e5(0x21c)),await _0x112491[_0x4225e5(0x1df)](_0x313b69,_0x486dcc[_0x4225e5(0x213)]),await logAutomationAction(_0x112491,'[FORCE]\x20'+_0x486dcc[_0x4225e5(0x235)]+':\x20'+_0x1ccbfe['val']+_0x4225e5(0x24e)+_0x486dcc[_0x4225e5(0x213)]+'¬∞C\x20(Kalender-Schutz)')));}}}_0x51dd60&&await _0x112491[_0x4225e5(0x1db)](_0x59c1be,{'val':JSON[_0x4225e5(0x227)](_0x31b9e0),'ack':!![]});}catch(_0x161d27){_0x112491[_0x4225e5(0x253)][_0x4225e5(0x1f5)](_0x4225e5(0x24d)+_0x161d27[_0x4225e5(0x225)]);}}async function checkCalendarTriggers(_0x598fbf){const _0x3dc9fa=a1_0x2ec0dd;if(!_0x598fbf[_0x3dc9fa(0x1fb)][_0x3dc9fa(0x238)]||!_0x598fbf[_0x3dc9fa(0x1fb)][_0x3dc9fa(0x243)])return;await updateSchedulePreview(_0x598fbf);let _0x296641={},_0x625a2e={};try{const _0x1d58eb=await _0x598fbf[_0x3dc9fa(0x255)](_0x3dc9fa(0x209));if(_0x1d58eb&&_0x1d58eb[_0x3dc9fa(0x25d)])_0x296641=JSON['parse'](_0x1d58eb[_0x3dc9fa(0x25d)]);const _0x5c801f=await _0x598fbf[_0x3dc9fa(0x255)]('analysis.energy.warmupSources');if(_0x5c801f&&_0x5c801f[_0x3dc9fa(0x25d)])_0x625a2e=JSON[_0x3dc9fa(0x23c)](_0x5c801f[_0x3dc9fa(0x25d)]);}catch(_0x148496){}let _0xc58e47={'default':0x15};try{const _0x2bd435=await _0x598fbf[_0x3dc9fa(0x255)](_0x3dc9fa(0x25f));if(_0x2bd435&&_0x2bd435[_0x3dc9fa(0x25d)])_0xc58e47=JSON[_0x3dc9fa(0x23c)](_0x2bd435[_0x3dc9fa(0x25d)]);}catch(_0x510e74){}let _0x3b2ed2=[];try{const _0xfbdb50=await _0x598fbf[_0x3dc9fa(0x255)](_0x3dc9fa(0x280));if(_0xfbdb50&&_0xfbdb50[_0x3dc9fa(0x25d)])_0x3b2ed2=JSON[_0x3dc9fa(0x23c)](_0xfbdb50[_0x3dc9fa(0x25d)]);}catch(_0x5e6fa9){}try{const _0x170ca1=await _0x598fbf[_0x3dc9fa(0x1ea)](_0x598fbf[_0x3dc9fa(0x1fb)][_0x3dc9fa(0x243)]+'.data.table');if(!_0x170ca1||!_0x170ca1[_0x3dc9fa(0x25d)])return;const _0x2eded4=JSON['parse'](_0x170ca1['val']),_0x3b8fd5=Date[_0x3dc9fa(0x285)](),_0x4b7fa1=_0x598fbf['config'][_0x3dc9fa(0x1e9)]||[],_0x501afa=_0x598fbf[_0x3dc9fa(0x1fb)]['calendarSelection']||[];let _0x5589ac=![];for(const _0x4b6cbb of _0x2eded4){if(_0x4b6cbb[_0x3dc9fa(0x256)]&&_0x501afa[_0x3dc9fa(0x233)]>0x0&&!_0x501afa[_0x3dc9fa(0x260)](_0x4b6cbb[_0x3dc9fa(0x256)]))continue;const _0x3a3cfa=_0x4b6cbb[_0x3dc9fa(0x202)]||_0x4b6cbb[_0x3dc9fa(0x1e4)]||_0x4b6cbb[_0x3dc9fa(0x250)];if(!_0x3a3cfa)continue;const _0x3392d4=new Date(_0x3a3cfa);if(isNaN(_0x3392d4['getTime']()))continue;const _0x2aca63=(_0x4b6cbb[_0x3dc9fa(0x1f9)]||_0x4b6cbb[_0x3dc9fa(0x1fa)]||'')[_0x3dc9fa(0x21f)]();if(_0x2aca63[_0x3dc9fa(0x260)](_0x3dc9fa(0x263))||_0x2aca63[_0x3dc9fa(0x260)](_0x3dc9fa(0x1fd))||_0x2aca63['includes']('ankunft')){let _0x40165f=0x0;Object[_0x3dc9fa(0x25b)](_0x296641)[_0x3dc9fa(0x262)](_0x1e0786=>{if(_0x1e0786>_0x40165f)_0x40165f=_0x1e0786;});if(_0x40165f===0x0)_0x40165f=0x78;const _0x554c6c=_0x3392d4['getTime']()-_0x40165f*0xea60;_0x3b8fd5>=_0x554c6c&&_0x3b8fd5<_0x3392d4[_0x3dc9fa(0x221)]()&&(_0x598fbf[_0x3dc9fa(0x234)]!=='normal'&&(_0x598fbf[_0x3dc9fa(0x253)]['info'](_0x3dc9fa(0x1eb)+_0x40165f+_0x3dc9fa(0x1d9)),await _0x598fbf[_0x3dc9fa(0x1db)](_0x3dc9fa(0x284),{'val':'normal','ack':![]})));}for(const _0xea575d of _0x4b7fa1){if(_0xea575d[_0x3dc9fa(0x259)]){const _0x1eb738=_0xea575d[_0x3dc9fa(0x259)]['toLowerCase'](),_0x262601=(_0xea575d[_0x3dc9fa(0x20c)]||'')['toLowerCase']();let _0xd84e22=_0x2aca63[_0x3dc9fa(0x260)](_0x1eb738);!_0xd84e22&&_0x262601['length']>0x3&&_0x2aca63[_0x3dc9fa(0x260)](_0x262601)&&(_0xd84e22=!![]);if(_0xd84e22){const _0x2a7ff2=getWarmupRobust(_0x296641,_0xea575d[_0x3dc9fa(0x259)]),_0x8f2ff8=_0x625a2e[_0xea575d['location']]||_0x3dc9fa(0x21a),_0x587a78=_0x3392d4[_0x3dc9fa(0x221)]()-_0x2a7ff2*0xea60;if(_0x3b8fd5>=_0x587a78&&_0x3b8fd5<_0x3392d4[_0x3dc9fa(0x221)]()){const _0x245746=lastActions[_0x3dc9fa(0x1de)+_0xea575d[_0x3dc9fa(0x259)]];if(_0x245746&&_0x3b8fd5-_0x245746<CAL_COOLDOWN_MS)continue;const _0x3c918f=await findRelatedId(_0x598fbf,_0xea575d['id'],_0x3dc9fa(0x237));if(_0x3c918f){let _0x4e1211=_0xc58e47[_0xea575d[_0x3dc9fa(0x259)]];if(_0x4e1211===undefined)_0x4e1211=_0xc58e47['default'];if(_0x4e1211===undefined)_0x4e1211=0x15;const _0x28ec92=await _0x598fbf[_0x3dc9fa(0x1ea)](_0x3c918f);if(_0x28ec92&&typeof _0x28ec92[_0x3dc9fa(0x25d)]===_0x3dc9fa(0x22d)&&_0x28ec92[_0x3dc9fa(0x25d)]<_0x4e1211-0.5){_0x598fbf[_0x3dc9fa(0x253)][_0x3dc9fa(0x279)](_0x3dc9fa(0x1dd)+_0x8f2ff8+_0x3dc9fa(0x20f)+_0xea575d[_0x3dc9fa(0x259)]+_0x3dc9fa(0x26b)+_0x2aca63+_0x3dc9fa(0x1ef)+_0x4e1211+'¬∞C\x20(Vorlauf:\x20'+_0x2a7ff2+'\x20min).'),await _0x598fbf[_0x3dc9fa(0x1df)](_0x3c918f,_0x4e1211),await logAutomationAction(_0x598fbf,_0x3dc9fa(0x26e)+_0xea575d[_0x3dc9fa(0x259)]+_0x3dc9fa(0x28b)+_0x4e1211+_0x3dc9fa(0x24f)+_0x8f2ff8+')'),lastActions['cal_'+_0xea575d['location']]=_0x3b8fd5;const _0x1aba9e=_0x3b2ed2[_0x3dc9fa(0x22e)](_0x31ea7f=>_0x31ea7f[_0x3dc9fa(0x235)]===_0xea575d[_0x3dc9fa(0x259)]);if(_0x1aba9e!==-0x1)_0x3b2ed2['splice'](_0x1aba9e,0x1);_0x3b2ed2['push']({'room':_0xea575d[_0x3dc9fa(0x259)],'target':_0x4e1211,'until':_0x3392d4['getTime']()}),_0x5589ac=!![];}}}}}}}_0x5589ac&&await _0x598fbf[_0x3dc9fa(0x1db)]('analysis.energy.activeEnforcements',{'val':JSON[_0x3dc9fa(0x227)](_0x3b2ed2),'ack':!![]});}catch(_0x9d70c4){_0x598fbf[_0x3dc9fa(0x253)][_0x3dc9fa(0x247)](_0x3dc9fa(0x20b)+_0x9d70c4[_0x3dc9fa(0x225)]);}}async function manageMpcIntervention(_0x1bcfb7,_0x2468e5,_0x24888a){const _0x37fdf2=a1_0x2ec0dd;try{const _0x4e7989='analysis.energy.mpcActiveInterventions',_0x59a69a=await _0x1bcfb7[_0x37fdf2(0x255)](_0x4e7989);let _0x1a8c33=[];if(_0x59a69a&&_0x59a69a['val'])try{_0x1a8c33=JSON[_0x37fdf2(0x23c)](_0x59a69a[_0x37fdf2(0x25d)]);}catch(_0x498882){}const _0x646eba=_0x1a8c33[_0x37fdf2(0x26a)](_0x2468e5);if(_0x24888a===_0x37fdf2(0x1f7))_0x646eba===-0x1&&(_0x1a8c33[_0x37fdf2(0x224)](_0x2468e5),await _0x1bcfb7['setStateAsync'](_0x4e7989,{'val':JSON[_0x37fdf2(0x227)](_0x1a8c33),'ack':!![]}));else _0x24888a===_0x37fdf2(0x231)&&(_0x646eba!==-0x1&&(_0x1a8c33[_0x37fdf2(0x1f6)](_0x646eba,0x1),await _0x1bcfb7[_0x37fdf2(0x1db)](_0x4e7989,{'val':JSON['stringify'](_0x1a8c33),'ack':!![]})));}catch(_0x4fa05b){}}async function cleanupGhostInterventions(_0x325c10){const _0x2ed809=a1_0x2ec0dd;try{const _0x214aed=_0x2ed809(0x20a),_0xda7bed=await _0x325c10[_0x2ed809(0x255)](_0x214aed);if(!_0xda7bed||!_0xda7bed[_0x2ed809(0x25d)])return;const _0x6899ec=JSON['parse'](_0xda7bed[_0x2ed809(0x25d)]);if(!Array['isArray'](_0x6899ec)||_0x6899ec[_0x2ed809(0x233)]===0x0)return;let _0x46a094={'default':0x15};try{const _0x49ebc8=await _0x325c10[_0x2ed809(0x255)](_0x2ed809(0x25f));if(_0x49ebc8&&_0x49ebc8[_0x2ed809(0x25d)])_0x46a094=JSON[_0x2ed809(0x23c)](_0x49ebc8[_0x2ed809(0x25d)]);}catch(_0x39e0b3){}let _0x338169=[];try{const _0x43891e=await _0x325c10[_0x2ed809(0x255)]('analysis.energy.ventilationAlerts');if(_0x43891e&&_0x43891e[_0x2ed809(0x25d)])_0x338169=JSON[_0x2ed809(0x23c)](_0x43891e[_0x2ed809(0x25d)]);}catch(_0x35f7cb){}let _0x46cb1c={},_0x489ebc=![];try{const _0x4ea5ed=await _0x325c10['getStateAsync']('analysis.energy.rlPenalties');if(_0x4ea5ed&&_0x4ea5ed['val'])_0x46cb1c=JSON[_0x2ed809(0x23c)](_0x4ea5ed[_0x2ed809(0x25d)]);}catch(_0x57fc2b){}if(_0x46cb1c[_0x2ed809(0x236)]){const _0x349045=Date[_0x2ed809(0x285)]();for(const [_0x2d60dd,_0x54f43c]of Object[_0x2ed809(0x278)](_0x46cb1c['_meta'])){_0x349045-_0x54f43c>PENALTY_TTL&&(delete _0x46cb1c[_0x2d60dd],delete _0x46cb1c[_0x2ed809(0x236)][_0x2d60dd],_0x489ebc=!![],_0x325c10['log'][_0x2ed809(0x279)](_0x2ed809(0x1e7)+_0x2d60dd+_0x2ed809(0x252)));}}const _0x2e3960=_0x325c10['config'][_0x2ed809(0x1e9)]||[];let _0x470513=![];for(let _0x140608=_0x6899ec[_0x2ed809(0x233)]-0x1;_0x140608>=0x0;_0x140608--){const _0x6964e1=_0x6899ec[_0x140608],_0x17551f=_0x2e3960[_0x2ed809(0x1d4)](_0x4a708b=>normalize(_0x4a708b[_0x2ed809(0x259)])===normalize(_0x6964e1)&&(_0x4a708b[_0x2ed809(0x27c)]===_0x2ed809(0x214)||_0x4a708b[_0x2ed809(0x27c)]===_0x2ed809(0x289)));if(!_0x17551f){_0x325c10[_0x2ed809(0x253)][_0x2ed809(0x247)]('üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27'+_0x6964e1+'\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.'),_0x6899ec['splice'](_0x140608,0x1),_0x470513=!![];continue;}if(_0x17551f){const _0x556a85=await findRelatedId(_0x325c10,_0x17551f['id'],'setpoint'),_0x317ce4=await _0x325c10['getForeignStateAsync'](_0x17551f['id']);if(_0x556a85){const _0xdd45d6=await _0x325c10['getForeignStateAsync'](_0x556a85);if(_0xdd45d6&&typeof _0xdd45d6['val']===_0x2ed809(0x22d)){let _0x2f40d3=![],_0x3fdbb4='';Math[_0x2ed809(0x1f8)](_0xdd45d6[_0x2ed809(0x25d)]-ECO_TEMP)>0.5&&(_0x2f40d3=!![],_0x3fdbb4=_0x2ed809(0x230));if(!_0x2f40d3&&_0x317ce4&&typeof _0x317ce4[_0x2ed809(0x25d)]===_0x2ed809(0x22d)){const _0xeb1ea7=_0x46a094[_0x6964e1]||_0x46a094[_0x2ed809(0x251)]||0x15;_0x317ce4[_0x2ed809(0x25d)]<_0xeb1ea7+0.2&&(_0x2f40d3=!![],_0x3fdbb4='too_cold');}if(_0x2f40d3){if(_0x3fdbb4===_0x2ed809(0x230)){_0x325c10[_0x2ed809(0x253)]['info']('üßπ\x20[MPC\x20CLEANUP]\x20'+_0x6964e1+_0x2ed809(0x21e)+_0xdd45d6[_0x2ed809(0x25d)]+_0x2ed809(0x282)+ECO_TEMP+'¬∞C).\x20Entferne\x20Status.');const _0x20c74e=lastActions[_0x2ed809(0x1de)+_0x6964e1],_0x466607=_0x20c74e&&Date[_0x2ed809(0x285)]()-_0x20c74e<0x2*0x3c*0x3e8;if(!_0x466607&&_0xdd45d6[_0x2ed809(0x25d)]>ECO_TEMP+0.5){_0x325c10[_0x2ed809(0x211)]&&(_0x325c10[_0x2ed809(0x253)]['info'](_0x2ed809(0x23f)+_0x6964e1+_0x2ed809(0x28c)),_0x325c10[_0x2ed809(0x211)](_0x2ed809(0x25e),{'room':_0x6964e1}));const _0x5e5649=_0x6964e1+'_'+new Date()[_0x2ed809(0x242)]();if(!_0x46cb1c[_0x5e5649]){_0x46cb1c[_0x5e5649]=0x1;if(!_0x46cb1c[_0x2ed809(0x236)])_0x46cb1c[_0x2ed809(0x236)]={};_0x46cb1c['_meta'][_0x5e5649]=Date[_0x2ed809(0x285)](),_0x489ebc=!![];}}else _0x466607&&_0x325c10[_0x2ed809(0x253)][_0x2ed809(0x279)]('üìÖ\x20[MPC\x20INFO]\x20'+_0x6964e1+_0x2ed809(0x1fe));}else{if(_0x3fdbb4===_0x2ed809(0x286)){let _0x38a328=![];if(_0x338169[_0x2ed809(0x1d4)](_0x3f8dad=>_0x3f8dad[_0x2ed809(0x235)]===_0x6964e1))_0x38a328=!![];const _0x44e7db=_0x2e3960[_0x2ed809(0x1ce)](_0x2831d8=>normalize(_0x2831d8[_0x2ed809(0x259)])===normalize(_0x6964e1)&&(_0x2831d8[_0x2ed809(0x27c)]===_0x2ed809(0x281)||_0x2831d8['type']===_0x2ed809(0x1d0)||_0x2831d8[_0x2ed809(0x27c)]===_0x2ed809(0x27f)));for(const _0x28ae73 of _0x44e7db){try{const _0x14cfb2=await _0x325c10[_0x2ed809(0x1ea)](_0x28ae73['id']);if(_0x14cfb2&&(_0x14cfb2[_0x2ed809(0x25d)]===!![]||_0x14cfb2[_0x2ed809(0x25d)]===0x1||String(_0x14cfb2[_0x2ed809(0x25d)])[_0x2ed809(0x21f)]()===_0x2ed809(0x27b)))_0x38a328=!![];}catch(_0x3920df){}}if(_0x38a328)_0x325c10[_0x2ed809(0x253)][_0x2ed809(0x279)](_0x2ed809(0x232)+_0x6964e1+_0x2ed809(0x20e));else{const _0x3a27bd=_0x46a094[_0x6964e1]||_0x46a094[_0x2ed809(0x251)]||0x15;_0x325c10['log']['info'](_0x2ed809(0x1d7)+_0x6964e1+_0x2ed809(0x223)+_0x317ce4['val']+_0x2ed809(0x1e8)+(_0x3a27bd+0.2)+_0x2ed809(0x1cc)),await _0x325c10[_0x2ed809(0x1df)](_0x556a85,_0x3a27bd),await logAutomationAction(_0x325c10,_0x2ed809(0x1d3)+_0x6964e1+_0x2ed809(0x219)+_0x3a27bd+'¬∞C'),lastActions[_0x2ed809(0x1e5)+_0x6964e1]=Date[_0x2ed809(0x285)]();}}}_0x6899ec['splice'](_0x140608,0x1),_0x470513=!![];}}}}}_0x470513&&await _0x325c10[_0x2ed809(0x1db)](_0x214aed,{'val':JSON[_0x2ed809(0x227)](_0x6899ec),'ack':!![]}),_0x489ebc&&await _0x325c10[_0x2ed809(0x1db)](_0x2ed809(0x1fc),{'val':JSON['stringify'](_0x46cb1c),'ack':!![]});}catch(_0x914f24){}}async function applyEnergySavings(_0x164b3e,_0x203e0f){const _0x517e5b=a1_0x2ec0dd;await cleanupGhostInterventions(_0x164b3e);if(!_0x203e0f||_0x203e0f[_0x517e5b(0x233)]===0x0)return;const _0x392521=_0x164b3e[_0x517e5b(0x1fb)][_0x517e5b(0x1e9)]||[],_0x434ac4=Date[_0x517e5b(0x285)]();for(const _0x4a33e6 of _0x203e0f){const _0x130981=_0x4a33e6[_0x517e5b(0x235)],_0x42be38=_0x4a33e6[_0x517e5b(0x277)],_0x18f81a=_0x4a33e6[_0x517e5b(0x213)]||0x15;if(lastActions[_0x517e5b(0x1e5)+_0x130981]&&_0x434ac4-lastActions[_0x517e5b(0x1e5)+_0x130981]<RESCUE_LOCK_MS)continue;const _0x1fd6b7=_0x392521[_0x517e5b(0x1d4)](_0x3a049c=>normalize(_0x3a049c[_0x517e5b(0x259)])===normalize(_0x130981)&&(_0x3a049c[_0x517e5b(0x27c)]===_0x517e5b(0x214)||_0x3a049c[_0x517e5b(0x27c)]===_0x517e5b(0x289)));if(!_0x1fd6b7)continue;const _0x4de5ac=await findRelatedId(_0x164b3e,_0x1fd6b7['id'],_0x517e5b(0x237));if(_0x4de5ac){if(lastActions[_0x517e5b(0x218)+_0x130981]&&_0x434ac4-lastActions[_0x517e5b(0x218)+_0x130981]<0x1e*0x3c*0x3e8)continue;const _0x328eea=await _0x164b3e['getForeignStateAsync'](_0x4de5ac);if(_0x328eea&&typeof _0x328eea[_0x517e5b(0x25d)]===_0x517e5b(0x22d)){const _0x5f5012=_0x328eea[_0x517e5b(0x25d)];_0x5f5012!==ECO_TEMP&&await manageMpcIntervention(_0x164b3e,_0x130981,_0x517e5b(0x231));if(_0x42be38>0x1e)_0x5f5012>ECO_TEMP+0.5&&(_0x164b3e[_0x517e5b(0x253)][_0x517e5b(0x279)]('üçÉ\x20[MPC\x20ACTION]\x20Senke\x20'+_0x130981+_0x517e5b(0x23d)+ECO_TEMP+_0x517e5b(0x288)+_0x42be38+_0x517e5b(0x27d)),await _0x164b3e['setForeignStateAsync'](_0x4de5ac,ECO_TEMP),await manageMpcIntervention(_0x164b3e,_0x130981,_0x517e5b(0x1f7)),lastActions[_0x517e5b(0x218)+_0x130981]=_0x434ac4,await logAutomationAction(_0x164b3e,'[MPC]\x20'+_0x130981+_0x517e5b(0x258)+ECO_TEMP+'¬∞C'));else _0x42be38<=0xf&&(_0x5f5012<_0x18f81a&&(_0x164b3e[_0x517e5b(0x253)]['info'](_0x517e5b(0x226)+_0x130981+_0x517e5b(0x257)+_0x18f81a+_0x517e5b(0x1e1)),await _0x164b3e['setForeignStateAsync'](_0x4de5ac,_0x18f81a),await manageMpcIntervention(_0x164b3e,_0x130981,_0x517e5b(0x231)),lastActions[_0x517e5b(0x218)+_0x130981]=_0x434ac4,await logAutomationAction(_0x164b3e,_0x517e5b(0x1d6)+_0x130981+':\x20Aufheizen\x20auf\x20'+_0x18f81a+'¬∞C')));}}else _0x164b3e[_0x517e5b(0x253)]['warn']('[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20'+_0x130981+_0x517e5b(0x1d5));}}module[a1_0x2ec0dd(0x273)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};