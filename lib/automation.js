const a1_0x18d588=a1_0x3b8a;(function(_0x2862f2,_0x341d14){const _0x8b851b=a1_0x3b8a,_0x204fd9=_0x2862f2();while(!![]){try{const _0x17f6a9=-parseInt(_0x8b851b(0x161))/0x1*(-parseInt(_0x8b851b(0x108))/0x2)+-parseInt(_0x8b851b(0x158))/0x3*(parseInt(_0x8b851b(0x15e))/0x4)+parseInt(_0x8b851b(0x12d))/0x5*(-parseInt(_0x8b851b(0xf3))/0x6)+parseInt(_0x8b851b(0x139))/0x7+parseInt(_0x8b851b(0x147))/0x8+parseInt(_0x8b851b(0xe7))/0x9+-parseInt(_0x8b851b(0x159))/0xa;if(_0x17f6a9===_0x341d14)break;else _0x204fd9['push'](_0x204fd9['shift']());}catch(_0x39e096){_0x204fd9['push'](_0x204fd9['shift']());}}}(a1_0x12ee,0xdeef6));const a1_0x2427ea=(function(){let _0x1eca6e=!![];return function(_0x49a6a2,_0x2221c2){const _0x1e43ab=_0x1eca6e?function(){const _0xfedf0c=a1_0x3b8a;if(_0x2221c2){const _0xaad3bf=_0x2221c2[_0xfedf0c(0x11c)](_0x49a6a2,arguments);return _0x2221c2=null,_0xaad3bf;}}:function(){};return _0x1eca6e=![],_0x1e43ab;};}()),a1_0x1d7767=a1_0x2427ea(this,function(){const _0x10b47e=a1_0x3b8a;return a1_0x1d7767['toString']()['search']('(((.+)+)+)+$')[_0x10b47e(0x166)]()[_0x10b47e(0x16f)](a1_0x1d7767)['search'](_0x10b47e(0x142));});a1_0x1d7767();'use strict';const aiAgent=require(a1_0x18d588(0x170)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,ECO_TEMP=0x11,lastActions={};function normalize(_0xdf26f1){const _0x36e26d=a1_0x18d588;if(!_0xdf26f1)return'';return _0xdf26f1[_0x36e26d(0x163)]()[_0x36e26d(0x10b)](/\s+/g,'')['trim']();}async function handlePrediction(_0x1333c8,_0xb95fa7,_0x20f9e6){const _0x3a30e3=a1_0x18d588;if(!_0xb95fa7||_0xb95fa7==='Unknown')return;let _0x278fe5=_0x3a30e3(0x12b),_0x5abdb0=0.6;try{const _0x5af731=await _0x1333c8[_0x3a30e3(0x14e)]('analysis.automation.mode');if(_0x5af731&&_0x5af731['val'])_0x278fe5=_0x5af731['val'];const _0x419557=await _0x1333c8['getStateAsync'](_0x3a30e3(0x12f));if(_0x419557&&_0x419557['val'])_0x5abdb0=_0x419557[_0x3a30e3(0x13d)];}catch(_0x4712d7){}if(_0x278fe5===_0x3a30e3(0x12b)||_0x20f9e6<_0x5abdb0)return;const _0x31c0be=Date['now']();if(lastActions[_0xb95fa7]&&_0x31c0be-lastActions[_0xb95fa7]<COOLDOWN_MS)return;const _0x5ded1d=_0x1333c8[_0x3a30e3(0xed)][_0x3a30e3(0xf8)]||[],_0x4f687c=normalize(_0xb95fa7),_0x39a3d6=_0x5ded1d[_0x3a30e3(0x155)](_0x286ba7=>normalize(_0x286ba7[_0x3a30e3(0xff)])===_0x4f687c&&(_0x286ba7['type']===_0x3a30e3(0xe3)||_0x286ba7[_0x3a30e3(0x10c)]==='dimmer'||_0x286ba7[_0x3a30e3(0x10c)]===_0x3a30e3(0x173)));if(!_0x39a3d6)return;const _0x542e60=await aiAgent[_0x3a30e3(0x172)](_0x1333c8,_0xb95fa7,_0x39a3d6[_0x3a30e3(0xf5)],_0x20f9e6);if(!_0x542e60['approved'])return;const _0x3dcef5='Pr√§diktion:\x20'+_0xb95fa7+_0x3a30e3(0x16b)+_0x39a3d6[_0x3a30e3(0xf5)]+'\x20('+_0x542e60[_0x3a30e3(0x15a)]+')';await _0x1333c8[_0x3a30e3(0x121)](_0x3a30e3(0x13a),{'val':'['+_0x278fe5['toUpperCase']()+']\x20'+_0x3dcef5,'ack':!![]});if(_0x278fe5==='active'){const _0x508d31=await _0x1333c8[_0x3a30e3(0x11e)](_0x39a3d6['id']);(!_0x508d31||!_0x508d31['val']&&_0x508d31['val']!==!![])&&await _0x1333c8[_0x3a30e3(0x109)](_0x39a3d6['id'],!![]),lastActions[_0xb95fa7]=_0x31c0be;}}async function findRelatedId(_0x1af556,_0x39bc95,_0x58740b=a1_0x18d588(0xef)){const _0x368088=a1_0x18d588;if(_0x58740b===_0x368088(0xef)&&_0x1af556[_0x368088(0xed)]['thermostatMapping']){let _0x2819e0=_0x1af556[_0x368088(0xed)][_0x368088(0x148)];if(typeof _0x2819e0==='string')try{_0x2819e0=JSON[_0x368088(0x164)](_0x2819e0);}catch(_0x219f6f){}if(_0x2819e0&&_0x2819e0[_0x39bc95])return _0x2819e0[_0x39bc95];}if(_0x58740b==='valve'&&_0x1af556[_0x368088(0xed)][_0x368088(0x14d)]){let _0x213acb=_0x1af556[_0x368088(0xed)][_0x368088(0x14d)];if(typeof _0x213acb===_0x368088(0x16c))try{_0x213acb=JSON['parse'](_0x213acb);}catch(_0x4bde3f){}if(_0x213acb&&_0x213acb[_0x39bc95])return _0x213acb[_0x39bc95];}let _0x4fae83=[];if(_0x58740b==='setpoint')_0x4fae83=[{'s':'.1.ACTUAL_TEMPERATURE','t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x368088(0x13f),'t':_0x368088(0x145)},{'s':_0x368088(0x13f),'t':'.4.SET_TEMPERATURE'},{'s':_0x368088(0x10a),'t':_0x368088(0x151)},{'s':'local_temperature','t':_0x368088(0xe9)},{'s':_0x368088(0xf6),'t':'current_heating_setpoint'},{'s':'temperature','t':_0x368088(0x120)},{'s':'ACTUAL','t':_0x368088(0x14b)},{'s':_0x368088(0x12e),'t':_0x368088(0x11b)},{'s':_0x368088(0x154),'t':'setpoint'}];else _0x58740b===_0x368088(0x146)&&(_0x4fae83=[{'s':_0x368088(0x110),'t':'.1.LEVEL'},{'s':_0x368088(0x13f),'t':_0x368088(0x105)},{'s':_0x368088(0x13f),'t':_0x368088(0x129)},{'s':_0x368088(0xf6),'t':'pi_heating_demand'},{'s':_0x368088(0x154),'t':_0x368088(0x117)},{'s':_0x368088(0x154),'t':'level'}]);for(const _0x4bb928 of _0x4fae83){if(_0x39bc95[_0x368088(0x112)](_0x4bb928['s'])){const _0xb2e36e=_0x39bc95[_0x368088(0x10b)](_0x4bb928['s'],_0x4bb928['t']),_0x41f2f9=await _0x1af556[_0x368088(0xf4)](_0xb2e36e);if(_0x41f2f9)return _0xb2e36e;}}try{const _0x1fc001=_0x39bc95['split']('.');if(_0x1fc001[_0x368088(0x13c)]>0x2){const _0x2e89a0=_0x1fc001[_0x368088(0x10e)](0x0,-0x1)[_0x368088(0x135)]('.'),_0x2477fc=await _0x1af556[_0x368088(0xf9)](_0x2e89a0+'.*'),_0x33b4df=[],_0x30a88e=_0x39bc95['split'](/[._]+/)[_0x368088(0x149)](_0x3d477c=>![_0x368088(0xfd),'0',_0x368088(0x16a),_0x368088(0x127),_0x368088(0xe8),'temperature',_0x368088(0xfb),'sensor',_0x368088(0x115),'state']['includes'](_0x3d477c[_0x368088(0x163)]()));for(const [_0x3b87ab,_0xf1f668]of Object['entries'](_0x2477fc)){if(_0x3b87ab===_0x39bc95)continue;if(_0xf1f668&&_0xf1f668[_0x368088(0x11f)]){const _0x39e5a1=_0x3b87ab['toLowerCase'](),_0x45bf76=(_0xf1f668[_0x368088(0x11f)]['role']||'')[_0x368088(0x163)](),_0x51672e=(_0xf1f668['common'][_0x368088(0x144)]||'')[_0x368088(0x163)]();let _0x17e96b=![];if(_0x58740b===_0x368088(0xef)&&_0xf1f668['common'][_0x368088(0x14f)]===!![])_0x17e96b=_0x39e5a1['includes']('set')||_0x39e5a1[_0x368088(0x112)](_0x368088(0x116))||_0x39e5a1[_0x368088(0x112)](_0x368088(0x156))||_0x45bf76[_0x368088(0x112)](_0x368088(0x11d))||_0x45bf76[_0x368088(0x112)]('thermostat.setpoint');else _0x58740b===_0x368088(0x146)&&(_0x17e96b=_0x39e5a1[_0x368088(0x112)](_0x368088(0x103))||_0x39e5a1['includes'](_0x368088(0x146))||_0x39e5a1[_0x368088(0x112)](_0x368088(0x153))||_0x39e5a1['includes'](_0x368088(0x123))||_0x45bf76[_0x368088(0x112)](_0x368088(0x131))||_0x45bf76[_0x368088(0x112)]('value.valve')||_0x51672e[_0x368088(0x112)]('%'));if(_0x17e96b){const _0x5af011=_0x3b87ab[_0x368088(0x122)](/[._]+/)[_0x368088(0x157)](_0x2dfc96=>_0x2dfc96['toLowerCase']());let _0x5c4a1f=0x0;_0x30a88e[_0x368088(0xee)](_0x2282e9=>{const _0x373da3=_0x368088;if(_0x5af011[_0x373da3(0x112)](_0x2282e9[_0x373da3(0x163)]()))_0x5c4a1f++;}),_0x33b4df[_0x368088(0x126)]({'id':_0x3b87ab,'score':_0x5c4a1f});}}}if(_0x33b4df[_0x368088(0x13c)]>0x0){_0x33b4df[_0x368088(0xe4)]((_0x452eee,_0xd499d8)=>_0xd499d8[_0x368088(0x174)]-_0x452eee[_0x368088(0x174)]);if(_0x33b4df[0x0][_0x368088(0x174)]>0x0)return _0x33b4df[0x0]['id'];}}}catch(_0x258ddd){}return null;}async function scanThermostats(_0x3b1ed3){const _0x222ad2=a1_0x18d588,_0x1a3c94=_0x3b1ed3[_0x222ad2(0xed)][_0x222ad2(0xf8)]||[],_0x4b5b6c=[],_0x1a9cfe=_0x1a3c94[_0x222ad2(0x149)](_0x56df62=>_0x56df62['id']&&_0x56df62['id'][_0x222ad2(0x112)](_0x222ad2(0x154))||_0x56df62['type']&&['temperature',_0x222ad2(0x141),_0x222ad2(0x160)]['includes'](_0x56df62[_0x222ad2(0x10c)])||_0x56df62[_0x222ad2(0xf5)]&&_0x56df62[_0x222ad2(0xf5)]['toLowerCase']()['includes'](_0x222ad2(0x167)));for(const _0x68aeda of _0x1a9cfe){const _0x178e5f=await findRelatedId(_0x3b1ed3,_0x68aeda['id'],_0x222ad2(0xef)),_0xae122=await findRelatedId(_0x3b1ed3,_0x68aeda['id'],_0x222ad2(0x146));let _0x1084c0='Nicht\x20gefunden',_0x58c112=![],_0x5e47d1=_0x3b1ed3[_0x222ad2(0xed)][_0x222ad2(0x148)]||{};if(typeof _0x5e47d1===_0x222ad2(0x16c))try{_0x5e47d1=JSON[_0x222ad2(0x164)](_0x5e47d1);}catch(_0x577768){}let _0x4ccb47=_0x3b1ed3[_0x222ad2(0xed)][_0x222ad2(0x14d)]||{};if(typeof _0x4ccb47===_0x222ad2(0x16c))try{_0x4ccb47=JSON[_0x222ad2(0x164)](_0x4ccb47);}catch(_0x474974){}if(_0x5e47d1[_0x68aeda['id']]&&_0x5e47d1[_0x68aeda['id']]===_0x178e5f||_0x4ccb47[_0x68aeda['id']]&&_0x4ccb47[_0x68aeda['id']]===_0xae122)_0x1084c0='Manuelles\x20Mapping',_0x58c112=!![];else(_0x178e5f||_0xae122)&&(_0x1084c0=_0x222ad2(0x12a));_0x4b5b6c[_0x222ad2(0x126)]({'room':_0x68aeda[_0x222ad2(0xff)]||_0x222ad2(0x169),'sensorId':_0x68aeda['id'],'setpointId':_0x178e5f||'-','valveId':_0xae122||'-','source':_0x1084c0,'isManual':_0x58c112,'status':_0x178e5f&&_0xae122?_0x222ad2(0xea):_0x178e5f?'OK':_0x222ad2(0x15d)});}return _0x4b5b6c['sort']((_0x5f1b56,_0x343d8c)=>_0x5f1b56[_0x222ad2(0x165)][_0x222ad2(0x16d)](_0x343d8c[_0x222ad2(0x165)]));}async function updateSchedulePreview(_0x170de9){const _0x458b2d=a1_0x18d588;if(!_0x170de9[_0x458b2d(0xed)][_0x458b2d(0x15f)]||!_0x170de9[_0x458b2d(0xed)][_0x458b2d(0x133)])return;let _0x216814={};try{const _0x214e6f=await _0x170de9[_0x458b2d(0x14e)](_0x458b2d(0x12c));if(_0x214e6f&&_0x214e6f[_0x458b2d(0x13d)])_0x216814=JSON[_0x458b2d(0x164)](_0x214e6f[_0x458b2d(0x13d)]);}catch(_0x107581){}const _0x1c0e56=[],_0x4ab0a4=Date[_0x458b2d(0x15c)](),_0x4cf4a0=0x30*0x3c*0x3c*0x3e8;try{const _0x1169e4=await _0x170de9[_0x458b2d(0x11e)](_0x170de9[_0x458b2d(0xed)][_0x458b2d(0x133)]+'.data.table');if(!_0x1169e4||!_0x1169e4[_0x458b2d(0x13d)])return;const _0x300017=JSON[_0x458b2d(0x164)](_0x1169e4[_0x458b2d(0x13d)]),_0x1ce8b2=_0x170de9[_0x458b2d(0xed)][_0x458b2d(0xeb)]||[],_0x6f1ad3=_0x170de9[_0x458b2d(0xed)][_0x458b2d(0xf8)]||[],_0x14a2e1=new Set();_0x6f1ad3[_0x458b2d(0xee)](_0x54608f=>{const _0x4381d8=_0x458b2d;if(_0x54608f['location'])_0x14a2e1[_0x4381d8(0x124)](_0x54608f[_0x4381d8(0xff)]);});for(const _0x894bcd of _0x300017){if(_0x894bcd[_0x458b2d(0x162)]&&_0x1ce8b2['length']>0x0&&!_0x1ce8b2[_0x458b2d(0x112)](_0x894bcd[_0x458b2d(0x162)]))continue;const _0x4f37dd=_0x894bcd[_0x458b2d(0x118)]||_0x894bcd[_0x458b2d(0x138)]||_0x894bcd[_0x458b2d(0x11a)];if(!_0x4f37dd)continue;const _0x762822=new Date(_0x4f37dd),_0x4041a2=_0x762822[_0x458b2d(0x137)]();if(isNaN(_0x4041a2))continue;if(_0x4041a2<_0x4ab0a4)continue;if(_0x4041a2>_0x4ab0a4+_0x4cf4a0)continue;const _0x5cca36=(_0x894bcd[_0x458b2d(0x119)]||_0x894bcd['summary']||'')['toLowerCase']();let _0x1c802a=![],_0x4c6330=[],_0x23259b=_0x894bcd[_0x458b2d(0x119)]||_0x894bcd[_0x458b2d(0x150)]||_0x458b2d(0x169);if(_0x5cca36['includes']('urlaub\x20ende')||_0x5cca36[_0x458b2d(0x112)](_0x458b2d(0x13e))||_0x5cca36[_0x458b2d(0x112)]('ankunft'))_0x1c802a=!![],_0x4c6330=Array[_0x458b2d(0x132)](_0x14a2e1);else for(const _0x58f60a of _0x14a2e1){_0x5cca36[_0x458b2d(0x112)](_0x58f60a['toLowerCase']())&&_0x4c6330['push'](_0x58f60a);}_0x4c6330[_0x458b2d(0x13c)]>0x0&&_0x4c6330[_0x458b2d(0xee)](_0x70040=>{let _0x8d7f0e=0x3c;if(_0x1c802a){let _0x385ef8=0x0;Object['values'](_0x216814)['forEach'](_0x398c4e=>{if(_0x398c4e>_0x385ef8)_0x385ef8=_0x398c4e;}),_0x8d7f0e=_0x385ef8>0x0?_0x385ef8:0x78;}else _0x8d7f0e=_0x216814[_0x70040]||0x3c;const _0xe64251=new Date(_0x4041a2-_0x8d7f0e*0xea60);_0x1c0e56['push']({'eventTime':_0x4041a2,'triggerTime':_0xe64251['getTime'](),'room':_0x70040,'minutes':_0x8d7f0e,'reason':_0x23259b,'isGlobal':_0x1c802a});});}}catch(_0x23ee7e){}_0x1c0e56[_0x458b2d(0xe4)]((_0x16513a,_0x452079)=>_0x16513a[_0x458b2d(0xe5)]-_0x452079[_0x458b2d(0xe5)]);const _0x330c1a=_0x1c0e56[_0x458b2d(0x10e)](0x0,0x5);await _0x170de9['setStateAsync'](_0x458b2d(0xec),{'val':JSON[_0x458b2d(0x14a)](_0x330c1a),'ack':!![]});}function a1_0x3b8a(_0x4738c1,_0x1581ec){const _0x45cc0d=a1_0x12ee();return a1_0x3b8a=function(_0x1d7767,_0x2427ea){_0x1d7767=_0x1d7767-0xe3;let _0x12eef9=_0x45cc0d[_0x1d7767];return _0x12eef9;},a1_0x3b8a(_0x4738c1,_0x1581ec);}async function checkCalendarTriggers(_0x1ea249){const _0x21b12f=a1_0x18d588;if(!_0x1ea249[_0x21b12f(0xed)][_0x21b12f(0x15f)]||!_0x1ea249['config'][_0x21b12f(0x133)])return;await updateSchedulePreview(_0x1ea249);let _0xc22e23={};try{const _0xb14385=await _0x1ea249[_0x21b12f(0x14e)](_0x21b12f(0x12c));if(_0xb14385&&_0xb14385[_0x21b12f(0x13d)])_0xc22e23=JSON[_0x21b12f(0x164)](_0xb14385['val']);}catch(_0x3505c6){}try{const _0x4d55b8=await _0x1ea249[_0x21b12f(0x11e)](_0x1ea249['config']['calendarInstance']+'.data.table');if(!_0x4d55b8||!_0x4d55b8[_0x21b12f(0x13d)])return;const _0x378011=JSON[_0x21b12f(0x164)](_0x4d55b8[_0x21b12f(0x13d)]),_0x288ae0=Date[_0x21b12f(0x15c)](),_0x3fc258=_0x1ea249[_0x21b12f(0xed)]['devices']||[],_0x4353c8=_0x1ea249['config'][_0x21b12f(0xeb)]||[];for(const _0x102dd3 of _0x378011){if(_0x102dd3[_0x21b12f(0x162)]&&_0x4353c8[_0x21b12f(0x13c)]>0x0&&!_0x4353c8['includes'](_0x102dd3[_0x21b12f(0x162)]))continue;const _0x3a8e6f=_0x102dd3[_0x21b12f(0x118)]||_0x102dd3['eventStart']||_0x102dd3[_0x21b12f(0x11a)];if(!_0x3a8e6f)continue;const _0x48584d=new Date(_0x3a8e6f);if(isNaN(_0x48584d[_0x21b12f(0x137)]()))continue;const _0x4b21e7=(_0x102dd3[_0x21b12f(0x119)]||_0x102dd3[_0x21b12f(0x150)]||'')[_0x21b12f(0x163)]();if(_0x4b21e7[_0x21b12f(0x112)](_0x21b12f(0xf7))||_0x4b21e7['includes'](_0x21b12f(0x13e))||_0x4b21e7['includes']('ankunft')){let _0x3cfde1=0x0;Object[_0x21b12f(0x102)](_0xc22e23)[_0x21b12f(0xee)](_0x3ec51a=>{if(_0x3ec51a>_0x3cfde1)_0x3cfde1=_0x3ec51a;});if(_0x3cfde1===0x0)_0x3cfde1=0x78;const _0x2749ca=_0x48584d[_0x21b12f(0x137)]()-_0x3cfde1*0xea60;_0x288ae0>=_0x2749ca&&_0x288ae0<_0x48584d[_0x21b12f(0x137)]()&&(_0x1ea249[_0x21b12f(0x15b)]!==_0x21b12f(0x107)&&(_0x1ea249[_0x21b12f(0x100)][_0x21b12f(0x134)](_0x21b12f(0xf0)+_0x102dd3['event']+_0x21b12f(0x13b)+_0x3cfde1+_0x21b12f(0x10d)),await _0x1ea249[_0x21b12f(0x121)](_0x21b12f(0xfe),{'val':_0x21b12f(0x107),'ack':![]})));}for(const _0x4ec6b0 of _0x3fc258){if(_0x4ec6b0['location']){const _0x2b67a4=_0x4ec6b0['location'][_0x21b12f(0x163)]();if(_0x4b21e7[_0x21b12f(0x112)](_0x2b67a4)){const _0x4bb9e7=_0xc22e23[_0x4ec6b0[_0x21b12f(0xff)]]||0x3c,_0x38e369=_0x48584d['getTime']()-_0x4bb9e7*0xea60;if(_0x288ae0>=_0x38e369&&_0x288ae0<_0x48584d[_0x21b12f(0x137)]()){const _0x1862bc=lastActions['cal_'+_0x4ec6b0[_0x21b12f(0xff)]];if(_0x1862bc&&_0x288ae0-_0x1862bc<CAL_COOLDOWN_MS)continue;const _0x52639c=await findRelatedId(_0x1ea249,_0x4ec6b0['id'],'setpoint');if(_0x52639c){const _0x4504ed=await _0x1ea249[_0x21b12f(0x11e)](_0x52639c);_0x4504ed&&typeof _0x4504ed[_0x21b12f(0x13d)]===_0x21b12f(0x101)&&_0x4504ed[_0x21b12f(0x13d)]<20.5&&(_0x1ea249['log'][_0x21b12f(0x134)](_0x21b12f(0x10f)+_0x4ec6b0['location']+_0x21b12f(0x130)+_0x102dd3[_0x21b12f(0x119)]+_0x21b12f(0x128)+_0x4bb9e7+_0x21b12f(0x10d)),await _0x1ea249[_0x21b12f(0x109)](_0x52639c,0x15),await _0x1ea249['setStateAsync'](_0x21b12f(0x13a),{'val':_0x21b12f(0x114)+_0x4ec6b0['location']+_0x21b12f(0x152),'ack':!![]}),lastActions[_0x21b12f(0x140)+_0x4ec6b0[_0x21b12f(0xff)]]=_0x288ae0);}}}}}}}catch(_0x46948b){_0x1ea249[_0x21b12f(0x100)]['warn'](_0x21b12f(0x136)+_0x46948b[_0x21b12f(0xf2)]);}}async function applyEnergySavings(_0x21a36f,_0x226b5c){const _0x3489d9=a1_0x18d588;if(!_0x226b5c||_0x226b5c[_0x3489d9(0x13c)]===0x0)return;const _0x22a9de=_0x21a36f[_0x3489d9(0xed)][_0x3489d9(0xf8)]||[],_0x3bc279=Date[_0x3489d9(0x15c)]();for(const _0x10ec32 of _0x226b5c){const _0xf405c4=_0x10ec32[_0x3489d9(0x165)],_0x4fb1d3=_0x10ec32[_0x3489d9(0x16e)],_0x3cf8d7=_0x10ec32[_0x3489d9(0x156)]||0x15,_0x4c0cb1=_0x22a9de[_0x3489d9(0x155)](_0x2d94aa=>normalize(_0x2d94aa[_0x3489d9(0xff)])===normalize(_0xf405c4)&&(_0x2d94aa[_0x3489d9(0x10c)]===_0x3489d9(0x154)||_0x2d94aa[_0x3489d9(0x10c)]===_0x3489d9(0x141)));if(!_0x4c0cb1)continue;const _0x9d2d34=await findRelatedId(_0x21a36f,_0x4c0cb1['id'],_0x3489d9(0xef));if(_0x9d2d34){if(lastActions[_0x3489d9(0x125)+_0xf405c4]&&_0x3bc279-lastActions['mpc_'+_0xf405c4]<0x1e*0x3c*0x3e8)continue;const _0x5a54bd=await _0x21a36f['getForeignStateAsync'](_0x9d2d34);if(_0x5a54bd&&typeof _0x5a54bd[_0x3489d9(0x13d)]===_0x3489d9(0x101)){const _0x335b4d=_0x5a54bd[_0x3489d9(0x13d)];if(_0x4fb1d3>0x1e)_0x335b4d>ECO_TEMP+0.5&&(_0x21a36f[_0x3489d9(0x100)][_0x3489d9(0x134)]('üçÉ\x20[MPC\x20ACTION]\x20Senke\x20'+_0xf405c4+_0x3489d9(0x14c)+ECO_TEMP+'¬∞C!\x20(Aktuell:\x20'+_0x335b4d+'¬∞C,\x20Puffer:\x20'+_0x4fb1d3+_0x3489d9(0xfa)+_0x9d2d34),await _0x21a36f[_0x3489d9(0x109)](_0x9d2d34,ECO_TEMP),lastActions[_0x3489d9(0x125)+_0xf405c4]=_0x3bc279,await _0x21a36f[_0x3489d9(0x121)](_0x3489d9(0x13a),{'val':_0x3489d9(0x171)+_0xf405c4+_0x3489d9(0x143)+ECO_TEMP+'¬∞C','ack':!![]}));else _0x4fb1d3<=0xf&&(_0x335b4d<_0x3cf8d7&&(_0x21a36f[_0x3489d9(0x100)][_0x3489d9(0x134)](_0x3489d9(0xe6)+_0xf405c4+_0x3489d9(0x106)+_0x3cf8d7+_0x3489d9(0xfc)+_0x9d2d34),await _0x21a36f['setForeignStateAsync'](_0x9d2d34,_0x3cf8d7),lastActions[_0x3489d9(0x125)+_0xf405c4]=_0x3bc279,await _0x21a36f['setStateAsync'](_0x3489d9(0x13a),{'val':_0x3489d9(0x171)+_0xf405c4+_0x3489d9(0x104)+_0x3cf8d7+'¬∞C','ack':!![]})));}}else _0x21a36f[_0x3489d9(0x100)][_0x3489d9(0x111)](_0x3489d9(0x168)+_0xf405c4+_0x3489d9(0xf1));}}module[a1_0x18d588(0x113)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'updateSchedulePreview':updateSchedulePreview};function a1_0x12ee(){const _0x8db6ac=['localeCompare','minutes_safe','constructor','./ai_agent','[MPC]\x20','consultButler','switch','score','light','sort','triggerTime','üî•\x20[MPC\x20ACTION]\x20Heize\x20','10224585AUUJdj','wert','occupied_heating_setpoint','PERFECT','calendarSelection','analysis.energy.schedulePreview','config','forEach','setpoint','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt\x20(','\x20gefunden!\x20Bitte\x20\x27System\x27\x20Tab\x20pr√ºfen.','message','65058TiPwyB','getForeignObjectAsync','name','local_temperature','urlaub\x20ende','devices','getForeignObjectsAsync','\x20min)\x20->\x20ID:\x20','actual','¬∞C!\x20(Puffer\x20leer).\x20->\x20ID:\x20','openknx','system.mode','location','log','number','values','level',':\x20Aufheizen\x20auf\x20','.1.LEVEL','\x20wieder\x20auf\x20','normal','6430CLjibL','setForeignStateAsync','ACTUAL_TEMPERATURE','replace','type','\x20min).','slice','üìÖ\x20SMART\x20SCHEDULE\x20(Catch-Up):\x20Raum-Trigger\x20\x27','.1.ACTUAL_TEMPERATURE','warn','includes','exports','[CAL]\x20','messwert','soll','valve_position','_date','event','date','Soll','apply','level.temperature','getForeignStateAsync','common','target_temperature','setStateAsync','split','position','add','mpc_','push','ist',').\x20Heize\x20auf\x2021¬∞C\x20(Vorlauf:\x20','.4.VALVE_STATE','Auto-Erkennung','off','analysis.energy.warmupTimes','420mmSSbB','Ist','analysis.automation.confidenceThreshold','\x27\x20aktiv\x20(','level.valve','from','calendarInstance','info','join','Calendar\x20Check\x20Error:\x20','getTime','eventStart','2894556yPPeii','analysis.automation.lastAction',').\x20Heize\x20ganzes\x20Haus\x20auf\x20(Vorlauf:\x20','length','val','r√ºckkehr','.1.TEMPERATURE','cal_','thermostat','(((.+)+)+)+$',':\x20Absenkung\x20auf\x20','unit','.1.SET_POINT_TEMPERATURE','valve','3311088MmsWAi','thermostatMapping','filter','stringify','SET','\x20auf\x20','valveMapping','getStateAsync','write','summary','SET_POINT_TEMPERATURE','\x20->\x2021¬∞C','stellwert','temperature','find','target','map','3ExJLtG','3524180mPEJRa','reason','currentSystemMode','now','Fehlt','2581968BNMYUJ','useCalendar','sensor','267gDwgDA','_calName','toLowerCase','parse','room','toString','temp','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20(Soll-Temp)\x20f√ºr\x20','Unbekannt','hm-rpc','\x20->\x20Schalte\x20','string'];a1_0x12ee=function(){return _0x8db6ac;};return a1_0x12ee();}