const a1_0x1f28d0=a1_0x1cb2;(function(_0x2907b4,_0x1a9798){const _0x2aff35=a1_0x1cb2,_0x40bf40=_0x2907b4();while(!![]){try{const _0x2039fc=-parseInt(_0x2aff35(0x124))/0x1*(parseInt(_0x2aff35(0x116))/0x2)+-parseInt(_0x2aff35(0x176))/0x3+-parseInt(_0x2aff35(0x115))/0x4*(parseInt(_0x2aff35(0x150))/0x5)+parseInt(_0x2aff35(0xe8))/0x6+-parseInt(_0x2aff35(0x156))/0x7*(-parseInt(_0x2aff35(0x13c))/0x8)+-parseInt(_0x2aff35(0xdd))/0x9+parseInt(_0x2aff35(0x172))/0xa;if(_0x2039fc===_0x1a9798)break;else _0x40bf40['push'](_0x40bf40['shift']());}catch(_0x559e2e){_0x40bf40['push'](_0x40bf40['shift']());}}}(a1_0x2cb4,0x91bf1));const a1_0x35dca0=(function(){let _0x47197a=!![];return function(_0x16afb3,_0x2252a4){const _0x59cb19=_0x47197a?function(){const _0x43f1c1=a1_0x1cb2;if(_0x2252a4){const _0xb28f11=_0x2252a4[_0x43f1c1(0x12c)](_0x16afb3,arguments);return _0x2252a4=null,_0xb28f11;}}:function(){};return _0x47197a=![],_0x59cb19;};}()),a1_0x1bfba8=a1_0x35dca0(this,function(){const _0x16728b=a1_0x1cb2;return a1_0x1bfba8[_0x16728b(0x14e)]()['search']('(((.+)+)+)+$')['toString']()[_0x16728b(0x15e)](a1_0x1bfba8)[_0x16728b(0xd0)](_0x16728b(0x175));});a1_0x1bfba8();'use strict';const aiAgent=require(a1_0x1f28d0(0xd9)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function a1_0x1cb2(_0x8a07dd,_0x2a6e1a){const _0x4b07cb=a1_0x2cb4();return a1_0x1cb2=function(_0x1bfba8,_0x35dca0){_0x1bfba8=_0x1bfba8-0xb2;let _0x2cb4e7=_0x4b07cb[_0x1bfba8];return _0x2cb4e7;},a1_0x1cb2(_0x8a07dd,_0x2a6e1a);}function normalize(_0x50ad75){const _0x173c2f=a1_0x1f28d0;if(!_0x50ad75)return'';return _0x50ad75[_0x173c2f(0xf8)]()[_0x173c2f(0x12f)](/\s+/g,'')[_0x173c2f(0x138)]();}function getWarmupRobust(_0x9db0b2,_0x10f6a3){const _0x5b7842=a1_0x1f28d0;if(!_0x9db0b2||!_0x10f6a3)return 0x3c;if(_0x9db0b2[_0x10f6a3]!==undefined)return _0x9db0b2[_0x10f6a3];const _0x22d563=_0x10f6a3[_0x5b7842(0xf8)]()[_0x5b7842(0x12f)](/√§/g,'ae')[_0x5b7842(0x12f)](/√∂/g,'oe')[_0x5b7842(0x12f)](/√º/g,'ue')[_0x5b7842(0x12f)](/√ü/g,'ss')['replace'](/\s+/g,'_')[_0x5b7842(0x12f)](/[^a-z0-9_]/g,'');if(_0x9db0b2[_0x22d563]!==undefined)return _0x9db0b2[_0x22d563];return 0x3c;}async function logAutomationAction(_0x29498a,_0x21feb3){const _0x4dfb93=a1_0x1f28d0;await _0x29498a[_0x4dfb93(0xe3)](_0x4dfb93(0x15c),{'val':_0x21feb3,'ack':!![]});try{const _0x24fbf7='analysis.automation.actionLog',_0x43588c=await _0x29498a[_0x4dfb93(0x140)](_0x24fbf7);let _0x17d2b4=[];if(_0x43588c&&_0x43588c[_0x4dfb93(0x104)])try{_0x17d2b4=JSON[_0x4dfb93(0xb5)](_0x43588c[_0x4dfb93(0x104)]);}catch(_0x2925a7){}_0x17d2b4['unshift']({'ts':Date[_0x4dfb93(0xe7)](),'msg':_0x21feb3});if(_0x17d2b4[_0x4dfb93(0xdc)]>0x32)_0x17d2b4=_0x17d2b4[_0x4dfb93(0x127)](0x0,0x32);await _0x29498a[_0x4dfb93(0xe3)](_0x24fbf7,{'val':JSON[_0x4dfb93(0xeb)](_0x17d2b4),'ack':!![]});}catch(_0x4e651b){}}async function handlePrediction(_0x235a84,_0x35df24,_0x59e3c6){const _0x40d52e=a1_0x1f28d0;if(!_0x35df24||_0x35df24===_0x40d52e(0xdb))return;let _0x38a859=_0x40d52e(0x109),_0x4f7e90=0.6;try{const _0x5bd66f=await _0x235a84[_0x40d52e(0x140)]('analysis.automation.mode');if(_0x5bd66f&&_0x5bd66f[_0x40d52e(0x104)])_0x38a859=_0x5bd66f[_0x40d52e(0x104)];const _0x5ed13a=await _0x235a84[_0x40d52e(0x140)](_0x40d52e(0x15a));if(_0x5ed13a&&_0x5ed13a[_0x40d52e(0x104)])_0x4f7e90=_0x5ed13a[_0x40d52e(0x104)];}catch(_0x36d67e){}if(_0x38a859==='off'||_0x59e3c6<_0x4f7e90)return;const _0x36cc3a=Date[_0x40d52e(0xe7)]();if(lastActions[_0x35df24]&&_0x36cc3a-lastActions[_0x35df24]<COOLDOWN_MS)return;const _0x44595d=_0x235a84[_0x40d52e(0x129)][_0x40d52e(0x11b)]||[],_0x599550=normalize(_0x35df24),_0x24eb53=_0x44595d[_0x40d52e(0x155)](_0x2a7b75=>normalize(_0x2a7b75[_0x40d52e(0xd8)])===_0x599550&&(_0x2a7b75[_0x40d52e(0x144)]===_0x40d52e(0x154)||_0x2a7b75['type']===_0x40d52e(0x165)||_0x2a7b75[_0x40d52e(0x144)]==='switch'));if(!_0x24eb53)return;const _0x4de4f2=await aiAgent[_0x40d52e(0xf4)](_0x235a84,_0x35df24,_0x24eb53[_0x40d52e(0x174)],_0x59e3c6);if(!_0x4de4f2[_0x40d52e(0xe6)])return;const _0x532079='Pr√§diktion:\x20'+_0x35df24+_0x40d52e(0x15f)+_0x24eb53['name']+'\x20('+_0x4de4f2[_0x40d52e(0xfe)]+')';await logAutomationAction(_0x235a84,'['+_0x38a859['toUpperCase']()+']\x20'+_0x532079);if(_0x38a859===_0x40d52e(0xe9)){const _0x29465e=await _0x235a84[_0x40d52e(0xd5)](_0x24eb53['id']);(!_0x29465e||!_0x29465e[_0x40d52e(0x104)]&&_0x29465e[_0x40d52e(0x104)]!==!![])&&await _0x235a84[_0x40d52e(0x113)](_0x24eb53['id'],!![]),lastActions[_0x35df24]=_0x36cc3a;}}async function findRelatedId(_0x19b72b,_0x34a16a,_0xc59b41='setpoint'){const _0x464b36=a1_0x1f28d0;if(_0xc59b41==='setpoint'&&_0x19b72b['config'][_0x464b36(0xfd)]){let _0xb9d9fd=_0x19b72b['config'][_0x464b36(0xfd)];if(typeof _0xb9d9fd===_0x464b36(0xf7))try{_0xb9d9fd=JSON[_0x464b36(0xb5)](_0xb9d9fd);}catch(_0x417f5c){}if(_0xb9d9fd&&_0xb9d9fd[_0x34a16a])return _0xb9d9fd[_0x34a16a];}if(_0xc59b41===_0x464b36(0xc4)&&_0x19b72b['config'][_0x464b36(0xb8)]){let _0x527122=_0x19b72b[_0x464b36(0x129)][_0x464b36(0xb8)];if(typeof _0x527122===_0x464b36(0xf7))try{_0x527122=JSON[_0x464b36(0xb5)](_0x527122);}catch(_0x4d3c64){}if(_0x527122&&_0x527122[_0x34a16a])return _0x527122[_0x34a16a];}let _0x5cc259=[];if(_0xc59b41===_0x464b36(0xb3))_0x5cc259=[{'s':_0x464b36(0x105),'t':_0x464b36(0x16f)},{'s':_0x464b36(0x133),'t':_0x464b36(0x16f)},{'s':'.1.TEMPERATURE','t':_0x464b36(0xce)},{'s':'ACTUAL_TEMPERATURE','t':_0x464b36(0x12e)},{'s':_0x464b36(0x16d),'t':'occupied_heating_setpoint'},{'s':'local_temperature','t':_0x464b36(0x108)},{'s':_0x464b36(0xff),'t':_0x464b36(0x141)},{'s':'ACTUAL','t':_0x464b36(0xc0)},{'s':_0x464b36(0x119),'t':_0x464b36(0xd2)},{'s':_0x464b36(0xff),'t':_0x464b36(0xb3)}];else _0xc59b41===_0x464b36(0xc4)&&(_0x5cc259=[{'s':_0x464b36(0x105),'t':'.1.LEVEL'},{'s':_0x464b36(0x133),'t':_0x464b36(0x101)},{'s':'.1.TEMPERATURE','t':_0x464b36(0xde)},{'s':_0x464b36(0x16d),'t':'pi_heating_demand'},{'s':_0x464b36(0xff),'t':_0x464b36(0xc6)},{'s':'temperature','t':_0x464b36(0x167)}]);for(const _0x275baf of _0x5cc259){if(_0x34a16a['includes'](_0x275baf['s'])){const _0x1ca168=_0x34a16a[_0x464b36(0x12f)](_0x275baf['s'],_0x275baf['t']),_0x2b062b=await _0x19b72b[_0x464b36(0xbb)](_0x1ca168);if(_0x2b062b)return _0x1ca168;}}try{const _0x55df72=_0x34a16a[_0x464b36(0x11c)]('.');if(_0x55df72[_0x464b36(0xdc)]>0x2){const _0x5883c4=_0x55df72[_0x464b36(0x127)](0x0,-0x1)[_0x464b36(0xea)]('.'),_0x494da2=await _0x19b72b[_0x464b36(0xe5)](_0x5883c4+'.*'),_0xd6c268=[],_0x2aaf01=_0x34a16a[_0x464b36(0x11c)](/[._]+/)[_0x464b36(0xbc)](_0x2f7774=>!['openknx','0','hm-rpc','ist',_0x464b36(0xbf),_0x464b36(0xff),_0x464b36(0x121),_0x464b36(0x13e),_0x464b36(0xc1),_0x464b36(0xc2)][_0x464b36(0x145)](_0x2f7774[_0x464b36(0xf8)]()));for(const [_0x11085f,_0x2d9d7b]of Object[_0x464b36(0x117)](_0x494da2)){if(_0x11085f===_0x34a16a)continue;if(_0x2d9d7b&&_0x2d9d7b[_0x464b36(0xf1)]){const _0xfb5a05=_0x11085f[_0x464b36(0xf8)](),_0xc899da=(_0x2d9d7b['common']['role']||'')[_0x464b36(0xf8)](),_0x152555=(_0x2d9d7b[_0x464b36(0xf1)][_0x464b36(0x102)]||'')[_0x464b36(0xf8)]();let _0x3427b5=![];if(_0xc59b41===_0x464b36(0xb3)&&_0x2d9d7b['common'][_0x464b36(0xd3)]===!![])_0x3427b5=_0xfb5a05[_0x464b36(0x145)](_0x464b36(0x14f))||_0xfb5a05[_0x464b36(0x145)](_0x464b36(0xd4))||_0xfb5a05[_0x464b36(0x145)](_0x464b36(0xca))||_0xc899da[_0x464b36(0x145)](_0x464b36(0xcb))||_0xc899da[_0x464b36(0x145)](_0x464b36(0x166));else _0xc59b41===_0x464b36(0xc4)&&(_0x3427b5=_0xfb5a05[_0x464b36(0x145)](_0x464b36(0x167))||_0xfb5a05[_0x464b36(0x145)]('valve')||_0xfb5a05[_0x464b36(0x145)]('stellwert')||_0xfb5a05[_0x464b36(0x145)](_0x464b36(0xfb))||_0xc899da[_0x464b36(0x145)](_0x464b36(0x11f))||_0xc899da[_0x464b36(0x145)](_0x464b36(0x161))||_0x152555[_0x464b36(0x145)]('%'));if(_0x3427b5){const _0x3ecf5f=_0x11085f[_0x464b36(0x11c)](/[._]+/)[_0x464b36(0x162)](_0x501884=>_0x501884[_0x464b36(0xf8)]());let _0x830499=0x0;_0x2aaf01['forEach'](_0xb68c33=>{const _0x4ff9fb=_0x464b36;if(_0x3ecf5f[_0x4ff9fb(0x145)](_0xb68c33[_0x4ff9fb(0xf8)]()))_0x830499++;}),_0xd6c268[_0x464b36(0xe0)]({'id':_0x11085f,'score':_0x830499});}}}if(_0xd6c268['length']>0x0){_0xd6c268[_0x464b36(0xfa)]((_0x290201,_0x36292a)=>_0x36292a[_0x464b36(0x159)]-_0x290201[_0x464b36(0x159)]);if(_0xd6c268[0x0][_0x464b36(0x159)]>0x0)return _0xd6c268[0x0]['id'];}}}catch(_0x4154a0){}return null;}async function scanThermostats(_0x274f77){const _0x1048ec=a1_0x1f28d0,_0x47944c=_0x274f77[_0x1048ec(0x129)][_0x1048ec(0x11b)]||[],_0x3f9b3e=[],_0x35c7bc=_0x47944c[_0x1048ec(0xbc)](_0x246818=>_0x246818['id']&&_0x246818['id'][_0x1048ec(0x145)](_0x1048ec(0xff))||_0x246818[_0x1048ec(0x144)]&&[_0x1048ec(0xff),_0x1048ec(0xe1),_0x1048ec(0x13e)][_0x1048ec(0x145)](_0x246818['type'])||_0x246818[_0x1048ec(0x174)]&&_0x246818['name'][_0x1048ec(0xf8)]()[_0x1048ec(0x145)](_0x1048ec(0x12a)));for(const _0x5797e0 of _0x35c7bc){const _0x290fab=await findRelatedId(_0x274f77,_0x5797e0['id'],_0x1048ec(0xb3)),_0x4cb433=await findRelatedId(_0x274f77,_0x5797e0['id'],_0x1048ec(0xc4));let _0x5d6b31=_0x1048ec(0x152),_0x5decbf=![],_0x282fca=_0x274f77[_0x1048ec(0x129)][_0x1048ec(0xfd)]||{};if(typeof _0x282fca==='string')try{_0x282fca=JSON[_0x1048ec(0xb5)](_0x282fca);}catch(_0x23a162){}let _0x3c2bdc=_0x274f77[_0x1048ec(0x129)]['valveMapping']||{};if(typeof _0x3c2bdc===_0x1048ec(0xf7))try{_0x3c2bdc=JSON[_0x1048ec(0xb5)](_0x3c2bdc);}catch(_0xf17d2f){}if(_0x282fca[_0x5797e0['id']]&&_0x282fca[_0x5797e0['id']]===_0x290fab||_0x3c2bdc[_0x5797e0['id']]&&_0x3c2bdc[_0x5797e0['id']]===_0x4cb433)_0x5d6b31='Manuelles\x20Mapping',_0x5decbf=!![];else(_0x290fab||_0x4cb433)&&(_0x5d6b31=_0x1048ec(0x153));_0x3f9b3e['push']({'room':_0x5797e0[_0x1048ec(0xd8)]||'Unbekannt','sensorId':_0x5797e0['id'],'setpointId':_0x290fab||'-','valveId':_0x4cb433||'-','source':_0x5d6b31,'isManual':_0x5decbf,'status':_0x290fab&&_0x4cb433?_0x1048ec(0x160):_0x290fab?'OK':_0x1048ec(0x12b)});}return _0x3f9b3e[_0x1048ec(0xfa)]((_0x15053c,_0x520533)=>_0x15053c[_0x1048ec(0x110)][_0x1048ec(0xcc)](_0x520533[_0x1048ec(0x110)]));}async function updateSchedulePreview(_0x29b8c6){const _0xfaf329=a1_0x1f28d0;if(!_0x29b8c6[_0xfaf329(0x129)][_0xfaf329(0xed)]||!_0x29b8c6[_0xfaf329(0x129)][_0xfaf329(0x164)])return;let _0x101643={};try{const _0x44bcf0=await _0x29b8c6['getStateAsync']('analysis.energy.warmupTimes');if(_0x44bcf0&&_0x44bcf0[_0xfaf329(0x104)])_0x101643=JSON['parse'](_0x44bcf0['val']);}catch(_0x2442cb){}const _0x24b370=[],_0x28579f=Date[_0xfaf329(0xe7)](),_0x1d79a5=0x30*0x3c*0x3c*0x3e8;try{const _0x5a805e=await _0x29b8c6[_0xfaf329(0xd5)](_0x29b8c6['config']['calendarInstance']+_0xfaf329(0x114));if(!_0x5a805e||!_0x5a805e['val'])return;const _0x41589b=JSON[_0xfaf329(0xb5)](_0x5a805e[_0xfaf329(0x104)]),_0x447e9b=_0x29b8c6[_0xfaf329(0x129)][_0xfaf329(0x142)]||[],_0x27d7a6=_0x29b8c6['config']['devices']||[],_0x40f553=new Set();_0x27d7a6[_0xfaf329(0x10f)](_0x5ac0ed=>{const _0x27a7db=_0xfaf329;if(_0x5ac0ed[_0x27a7db(0xd8)])_0x40f553[_0x27a7db(0x128)](_0x5ac0ed[_0x27a7db(0xd8)]);});for(const _0x55046f of _0x41589b){if(_0x55046f[_0xfaf329(0x103)]&&_0x447e9b[_0xfaf329(0xdc)]>0x0&&!_0x447e9b[_0xfaf329(0x145)](_0x55046f['_calName']))continue;const _0x3008ef=_0x55046f[_0xfaf329(0x125)]||_0x55046f[_0xfaf329(0xb6)]||_0x55046f[_0xfaf329(0x10b)];if(!_0x3008ef)continue;const _0xf945aa=new Date(_0x3008ef),_0x5d0ae7=_0xf945aa[_0xfaf329(0xe2)]();if(isNaN(_0x5d0ae7))continue;if(_0x5d0ae7<_0x28579f)continue;if(_0x5d0ae7>_0x28579f+_0x1d79a5)continue;const _0x51bd3b=(_0x55046f['event']||_0x55046f['summary']||'')[_0xfaf329(0xf8)]();let _0x1efdc1=![],_0xd705e0=[],_0x5dafc6=_0x55046f['event']||_0x55046f[_0xfaf329(0x146)]||'Unbekannt';if(_0x51bd3b[_0xfaf329(0x145)](_0xfaf329(0x15d))||_0x51bd3b['includes'](_0xfaf329(0x139))||_0x51bd3b[_0xfaf329(0x145)]('ankunft'))_0x1efdc1=!![],_0xd705e0=Array[_0xfaf329(0x143)](_0x40f553);else for(const _0x3cf065 of _0x40f553){if(_0x51bd3b[_0xfaf329(0x145)](_0x3cf065[_0xfaf329(0xf8)]()))_0xd705e0['push'](_0x3cf065);}_0xd705e0[_0xfaf329(0xdc)]>0x0&&_0xd705e0[_0xfaf329(0x10f)](_0x1e3cd7=>{const _0x22e3bb=_0xfaf329;let _0xaa587a=0x3c;if(_0x1efdc1){let _0x4bb3e9=0x0;Object[_0x22e3bb(0x137)](_0x101643)[_0x22e3bb(0x10f)](_0x590967=>{if(_0x590967>_0x4bb3e9)_0x4bb3e9=_0x590967;}),_0xaa587a=_0x4bb3e9>0x0?_0x4bb3e9:0x78;}else _0xaa587a=getWarmupRobust(_0x101643,_0x1e3cd7);const _0x52bcae=new Date(_0x5d0ae7-_0xaa587a*0xea60);_0x24b370[_0x22e3bb(0xe0)]({'eventTime':_0x5d0ae7,'triggerTime':_0x52bcae[_0x22e3bb(0xe2)](),'room':_0x1e3cd7,'minutes':_0xaa587a,'reason':_0x5dafc6,'isGlobal':_0x1efdc1});});}}catch(_0x26468f){}_0x24b370[_0xfaf329(0xfa)]((_0x17e9dd,_0x386d7b)=>_0x17e9dd['triggerTime']-_0x386d7b[_0xfaf329(0x151)]);const _0x54c743=_0x24b370['slice'](0x0,0x5);await _0x29b8c6['setStateAsync']('analysis.energy.schedulePreview',{'val':JSON[_0xfaf329(0xeb)](_0x54c743),'ack':!![]});}async function monitorEnforcements(_0x1b3713){const _0x11687a=a1_0x1f28d0;try{const _0x3297e0=_0x11687a(0xba),_0x3e61d2=await _0x1b3713['getStateAsync'](_0x3297e0);if(!_0x3e61d2||!_0x3e61d2['val'])return;let _0x180eba=[];try{_0x180eba=JSON[_0x11687a(0xb5)](_0x3e61d2['val']);}catch(_0x1a8aaf){return;}if(!Array['isArray'](_0x180eba)||_0x180eba[_0x11687a(0xdc)]===0x0)return;const _0x178bad=Date[_0x11687a(0xe7)](),_0x48a97c=_0x1b3713[_0x11687a(0x129)]['devices']||[];let _0x34a15a=![];for(let _0x3d0d74=_0x180eba[_0x11687a(0xdc)]-0x1;_0x3d0d74>=0x0;_0x3d0d74--){const _0x35f0d8=_0x180eba[_0x3d0d74];if(_0x178bad>=_0x35f0d8['until']){_0x1b3713['log']['info'](_0x11687a(0xf9)+_0x35f0d8[_0x11687a(0x110)]+_0x11687a(0x12d)),_0x180eba['splice'](_0x3d0d74,0x1),_0x34a15a=!![];continue;}const _0x1d90c1=_0x48a97c[_0x11687a(0x155)](_0x3fecd4=>normalize(_0x3fecd4['location'])===normalize(_0x35f0d8[_0x11687a(0x110)])&&(_0x3fecd4[_0x11687a(0x144)]===_0x11687a(0xff)||_0x3fecd4[_0x11687a(0x144)]===_0x11687a(0xe1)));if(_0x1d90c1){const _0x2ade06=await findRelatedId(_0x1b3713,_0x1d90c1['id'],'setpoint');if(_0x2ade06){const _0x5c97ee=await _0x1b3713[_0x11687a(0xd5)](_0x2ade06);_0x5c97ee&&typeof _0x5c97ee['val']===_0x11687a(0x120)&&(_0x5c97ee[_0x11687a(0x104)]<0xf&&(_0x1b3713[_0x11687a(0x15b)][_0x11687a(0xd1)]('üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x35f0d8[_0x11687a(0x110)]+_0x11687a(0x169)+_0x5c97ee[_0x11687a(0x104)]+_0x11687a(0x107)+_0x35f0d8[_0x11687a(0xca)]+_0x11687a(0xf2)),await _0x1b3713[_0x11687a(0x113)](_0x2ade06,_0x35f0d8[_0x11687a(0xca)]),await logAutomationAction(_0x1b3713,_0x11687a(0x14d)+_0x35f0d8[_0x11687a(0x110)]+':\x20'+_0x5c97ee[_0x11687a(0x104)]+_0x11687a(0xc3)+_0x35f0d8[_0x11687a(0xca)]+_0x11687a(0x111))));}}}_0x34a15a&&await _0x1b3713['setStateAsync'](_0x3297e0,{'val':JSON[_0x11687a(0xeb)](_0x180eba),'ack':!![]});}catch(_0x39155f){_0x1b3713[_0x11687a(0x15b)][_0x11687a(0x14b)](_0x11687a(0x123)+_0x39155f['message']);}}async function checkCalendarTriggers(_0x2eb460){const _0x103aeb=a1_0x1f28d0;if(!_0x2eb460[_0x103aeb(0x129)][_0x103aeb(0xed)]||!_0x2eb460[_0x103aeb(0x129)]['calendarInstance'])return;await updateSchedulePreview(_0x2eb460);let _0x475acb={},_0x47058d={};try{const _0x1ac191=await _0x2eb460[_0x103aeb(0x140)](_0x103aeb(0x106));if(_0x1ac191&&_0x1ac191['val'])_0x475acb=JSON['parse'](_0x1ac191[_0x103aeb(0x104)]);const _0x5193d2=await _0x2eb460[_0x103aeb(0x140)]('analysis.energy.warmupSources');if(_0x5193d2&&_0x5193d2[_0x103aeb(0x104)])_0x47058d=JSON['parse'](_0x5193d2[_0x103aeb(0x104)]);}catch(_0x39b644){}let _0xfc0593={'default':0x15};try{const _0xfff044=await _0x2eb460['getStateAsync'](_0x103aeb(0x10e));if(_0xfff044&&_0xfff044[_0x103aeb(0x104)])_0xfc0593=JSON['parse'](_0xfff044[_0x103aeb(0x104)]);}catch(_0x20f82e){}let _0x2b43b5=[];try{const _0x50df4e=await _0x2eb460['getStateAsync']('analysis.energy.activeEnforcements');if(_0x50df4e&&_0x50df4e[_0x103aeb(0x104)])_0x2b43b5=JSON['parse'](_0x50df4e[_0x103aeb(0x104)]);}catch(_0x1498d1){}try{const _0x3525b0=await _0x2eb460[_0x103aeb(0xd5)](_0x2eb460[_0x103aeb(0x129)][_0x103aeb(0x164)]+'.data.table');if(!_0x3525b0||!_0x3525b0[_0x103aeb(0x104)])return;const _0x193cc2=JSON['parse'](_0x3525b0[_0x103aeb(0x104)]),_0x54c04e=Date[_0x103aeb(0xe7)](),_0x2726c5=_0x2eb460[_0x103aeb(0x129)][_0x103aeb(0x11b)]||[],_0x2f5328=_0x2eb460['config'][_0x103aeb(0x142)]||[];let _0x5b04a6=![];for(const _0x18378b of _0x193cc2){if(_0x18378b[_0x103aeb(0x103)]&&_0x2f5328[_0x103aeb(0xdc)]>0x0&&!_0x2f5328[_0x103aeb(0x145)](_0x18378b[_0x103aeb(0x103)]))continue;const _0x288dfb=_0x18378b[_0x103aeb(0x125)]||_0x18378b[_0x103aeb(0xb6)]||_0x18378b[_0x103aeb(0x10b)];if(!_0x288dfb)continue;const _0x55e668=new Date(_0x288dfb);if(isNaN(_0x55e668[_0x103aeb(0xe2)]()))continue;const _0x39b973=(_0x18378b[_0x103aeb(0x11a)]||_0x18378b[_0x103aeb(0x146)]||'')['toLowerCase']();if(_0x39b973['includes']('urlaub\x20ende')||_0x39b973[_0x103aeb(0x145)](_0x103aeb(0x139))||_0x39b973[_0x103aeb(0x145)]('ankunft')){let _0x571f8d=0x0;Object[_0x103aeb(0x137)](_0x475acb)[_0x103aeb(0x10f)](_0x341a10=>{if(_0x341a10>_0x571f8d)_0x571f8d=_0x341a10;});if(_0x571f8d===0x0)_0x571f8d=0x78;const _0x826014=_0x55e668[_0x103aeb(0xe2)]()-_0x571f8d*0xea60;_0x54c04e>=_0x826014&&_0x54c04e<_0x55e668['getTime']()&&(_0x2eb460[_0x103aeb(0xef)]!==_0x103aeb(0x16c)&&(_0x2eb460[_0x103aeb(0x15b)][_0x103aeb(0xd7)](_0x103aeb(0xf3)+_0x571f8d+_0x103aeb(0x171)),await _0x2eb460[_0x103aeb(0xe3)](_0x103aeb(0xf0),{'val':'normal','ack':![]})));}for(const _0x3c323f of _0x2726c5){if(_0x3c323f[_0x103aeb(0xd8)]){const _0x334490=_0x3c323f[_0x103aeb(0xd8)][_0x103aeb(0xf8)](),_0x21d31f=(_0x3c323f[_0x103aeb(0x174)]||'')[_0x103aeb(0xf8)]();let _0x4602fc=_0x39b973[_0x103aeb(0x145)](_0x334490);!_0x4602fc&&_0x21d31f[_0x103aeb(0xdc)]>0x3&&_0x39b973['includes'](_0x21d31f)&&(_0x4602fc=!![]);if(_0x4602fc){const _0x3c18e2=getWarmupRobust(_0x475acb,_0x3c323f[_0x103aeb(0xd8)]),_0x52eb53=_0x47058d[_0x3c323f[_0x103aeb(0xd8)]]||_0x103aeb(0x10a),_0x50d50d=_0x55e668[_0x103aeb(0xe2)]()-_0x3c18e2*0xea60;if(_0x54c04e>=_0x50d50d&&_0x54c04e<_0x55e668['getTime']()){const _0x1d5066=lastActions['cal_'+_0x3c323f[_0x103aeb(0xd8)]];if(_0x1d5066&&_0x54c04e-_0x1d5066<CAL_COOLDOWN_MS)continue;const _0x4db451=await findRelatedId(_0x2eb460,_0x3c323f['id'],_0x103aeb(0xb3));if(_0x4db451){let _0x30cc36=_0xfc0593[_0x3c323f[_0x103aeb(0xd8)]];if(_0x30cc36===undefined)_0x30cc36=_0xfc0593[_0x103aeb(0xf6)];if(_0x30cc36===undefined)_0x30cc36=0x15;const _0x3e28d5=await _0x2eb460['getForeignStateAsync'](_0x4db451);if(_0x3e28d5&&typeof _0x3e28d5[_0x103aeb(0x104)]===_0x103aeb(0x120)&&_0x3e28d5[_0x103aeb(0x104)]<_0x30cc36-0.5){_0x2eb460['log'][_0x103aeb(0xd7)](_0x103aeb(0x112)+_0x52eb53+_0x103aeb(0x126)+_0x3c323f[_0x103aeb(0xd8)]+_0x103aeb(0x170)+_0x39b973+_0x103aeb(0x130)+_0x30cc36+_0x103aeb(0xcf)+_0x3c18e2+_0x103aeb(0x171)),await _0x2eb460[_0x103aeb(0x113)](_0x4db451,_0x30cc36),await logAutomationAction(_0x2eb460,'[CAL]\x20'+_0x3c323f['location']+_0x103aeb(0x136)+_0x30cc36+_0x103aeb(0x118)+_0x52eb53+')'),lastActions[_0x103aeb(0x16b)+_0x3c323f[_0x103aeb(0xd8)]]=_0x54c04e;const _0x5b5285=_0x2b43b5[_0x103aeb(0xf5)](_0x46fb21=>_0x46fb21[_0x103aeb(0x110)]===_0x3c323f[_0x103aeb(0xd8)]);if(_0x5b5285!==-0x1)_0x2b43b5['splice'](_0x5b5285,0x1);_0x2b43b5[_0x103aeb(0xe0)]({'room':_0x3c323f[_0x103aeb(0xd8)],'target':_0x30cc36,'until':_0x55e668[_0x103aeb(0xe2)]()}),_0x5b04a6=!![];}}}}}}}_0x5b04a6&&await _0x2eb460[_0x103aeb(0xe3)](_0x103aeb(0xba),{'val':JSON['stringify'](_0x2b43b5),'ack':!![]});}catch(_0x1ab9ca){_0x2eb460['log'][_0x103aeb(0xd1)](_0x103aeb(0x13b)+_0x1ab9ca['message']);}}async function manageMpcIntervention(_0x502d5a,_0x45987c,_0x398cea){const _0x28140e=a1_0x1f28d0;try{const _0x1c5703=_0x28140e(0x158),_0x111447=await _0x502d5a[_0x28140e(0x140)](_0x1c5703);let _0xd80c54=[];if(_0x111447&&_0x111447[_0x28140e(0x104)])try{_0xd80c54=JSON[_0x28140e(0xb5)](_0x111447[_0x28140e(0x104)]);}catch(_0x5dfd7c){}const _0x11215b=_0xd80c54['indexOf'](_0x45987c);if(_0x398cea==='add')_0x11215b===-0x1&&(_0xd80c54[_0x28140e(0xe0)](_0x45987c),await _0x502d5a['setStateAsync'](_0x1c5703,{'val':JSON[_0x28140e(0xeb)](_0xd80c54),'ack':!![]}));else _0x398cea===_0x28140e(0x148)&&(_0x11215b!==-0x1&&(_0xd80c54[_0x28140e(0x147)](_0x11215b,0x1),await _0x502d5a[_0x28140e(0xe3)](_0x1c5703,{'val':JSON['stringify'](_0xd80c54),'ack':!![]})));}catch(_0x28c07e){}}async function cleanupGhostInterventions(_0x57b1f3){const _0x1a75a8=a1_0x1f28d0;try{const _0x424cbe='analysis.energy.mpcActiveInterventions',_0x223667=await _0x57b1f3[_0x1a75a8(0x140)](_0x424cbe);if(!_0x223667||!_0x223667[_0x1a75a8(0x104)])return;const _0x13be22=JSON[_0x1a75a8(0xb5)](_0x223667[_0x1a75a8(0x104)]);if(!Array['isArray'](_0x13be22)||_0x13be22['length']===0x0)return;let _0xe9333={'default':0x15};try{const _0x29dbab=await _0x57b1f3[_0x1a75a8(0x140)](_0x1a75a8(0x10e));if(_0x29dbab&&_0x29dbab[_0x1a75a8(0x104)])_0xe9333=JSON[_0x1a75a8(0xb5)](_0x29dbab[_0x1a75a8(0x104)]);}catch(_0x431167){}let _0x5d755a=[];try{const _0x2a6254=await _0x57b1f3[_0x1a75a8(0x140)](_0x1a75a8(0x149));if(_0x2a6254&&_0x2a6254[_0x1a75a8(0x104)])_0x5d755a=JSON[_0x1a75a8(0xb5)](_0x2a6254[_0x1a75a8(0x104)]);}catch(_0x3a1074){}let _0x37a947={},_0xb4a93e=![];try{const _0x482f3a=await _0x57b1f3[_0x1a75a8(0x140)](_0x1a75a8(0x16e));if(_0x482f3a&&_0x482f3a[_0x1a75a8(0x104)])_0x37a947=JSON[_0x1a75a8(0xb5)](_0x482f3a[_0x1a75a8(0x104)]);}catch(_0x28fddd){}if(_0x37a947['_meta']){const _0x429639=Date[_0x1a75a8(0xe7)]();for(const [_0x11b5ce,_0x1a5b9e]of Object[_0x1a75a8(0x117)](_0x37a947[_0x1a75a8(0xc9)])){_0x429639-_0x1a5b9e>PENALTY_TTL&&(delete _0x37a947[_0x11b5ce],delete _0x37a947[_0x1a75a8(0xc9)][_0x11b5ce],_0xb4a93e=!![],_0x57b1f3[_0x1a75a8(0x15b)][_0x1a75a8(0xd7)](_0x1a75a8(0xec)+_0x11b5ce+_0x1a75a8(0xc7)));}}const _0x1de93e=_0x57b1f3['config'][_0x1a75a8(0x11b)]||[];let _0x1a009e=![];for(let _0xd84325=_0x13be22[_0x1a75a8(0xdc)]-0x1;_0xd84325>=0x0;_0xd84325--){const _0x15f100=_0x13be22[_0xd84325],_0x577aa0=_0x1de93e[_0x1a75a8(0x155)](_0x4e7b4a=>normalize(_0x4e7b4a[_0x1a75a8(0xd8)])===normalize(_0x15f100)&&(_0x4e7b4a[_0x1a75a8(0x144)]===_0x1a75a8(0xff)||_0x4e7b4a[_0x1a75a8(0x144)]==='thermostat'));if(!_0x577aa0){_0x57b1f3[_0x1a75a8(0x15b)][_0x1a75a8(0xd1)](_0x1a75a8(0x132)+_0x15f100+_0x1a75a8(0xb2)),_0x13be22['splice'](_0xd84325,0x1),_0x1a009e=!![];continue;}if(_0x577aa0){const _0x476512=await findRelatedId(_0x57b1f3,_0x577aa0['id'],'setpoint'),_0x420ff8=await _0x57b1f3[_0x1a75a8(0xd5)](_0x577aa0['id']);if(_0x476512){const _0x2e575a=await _0x57b1f3['getForeignStateAsync'](_0x476512);if(_0x2e575a&&typeof _0x2e575a[_0x1a75a8(0x104)]===_0x1a75a8(0x120)){let _0x166e49=![],_0xabfbb3='';Math[_0x1a75a8(0xc5)](_0x2e575a[_0x1a75a8(0x104)]-ECO_TEMP)>0.5&&(_0x166e49=!![],_0xabfbb3=_0x1a75a8(0x10c));if(!_0x166e49&&_0x420ff8&&typeof _0x420ff8['val']===_0x1a75a8(0x120)){const _0x35304d=_0xe9333[_0x15f100]||_0xe9333['default']||0x15;_0x420ff8[_0x1a75a8(0x104)]<_0x35304d+0.2&&(_0x166e49=!![],_0xabfbb3='too_cold');}if(_0x166e49){if(_0xabfbb3===_0x1a75a8(0x10c)){_0x57b1f3[_0x1a75a8(0x15b)][_0x1a75a8(0xd7)](_0x1a75a8(0x13f)+_0x15f100+_0x1a75a8(0xb9)+_0x2e575a['val']+'¬∞C\x20(nicht\x20'+ECO_TEMP+_0x1a75a8(0xbd));const _0x37d62b=lastActions[_0x1a75a8(0x16b)+_0x15f100],_0x461282=_0x37d62b&&Date[_0x1a75a8(0xe7)]()-_0x37d62b<0x2*0x3c*0x3e8;if(!_0x461282&&_0x2e575a['val']>ECO_TEMP+0.5){_0x57b1f3[_0x1a75a8(0xbe)]&&(_0x57b1f3[_0x1a75a8(0x15b)][_0x1a75a8(0xd7)](_0x1a75a8(0xfc)+_0x15f100+_0x1a75a8(0x14a)),_0x57b1f3[_0x1a75a8(0xbe)](_0x1a75a8(0x134),{'room':_0x15f100}));const _0x349a68=_0x15f100+'_'+new Date()[_0x1a75a8(0x100)]();if(!_0x37a947[_0x349a68]){_0x37a947[_0x349a68]=0x1;if(!_0x37a947['_meta'])_0x37a947[_0x1a75a8(0xc9)]={};_0x37a947[_0x1a75a8(0xc9)][_0x349a68]=Date[_0x1a75a8(0xe7)](),_0xb4a93e=!![];}}else _0x461282&&_0x57b1f3['log'][_0x1a75a8(0xd7)](_0x1a75a8(0x11e)+_0x15f100+'\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.');}else{if(_0xabfbb3===_0x1a75a8(0xdf)){let _0x179fe4=![];if(_0x5d755a[_0x1a75a8(0x155)](_0x59abeb=>_0x59abeb[_0x1a75a8(0x110)]===_0x15f100))_0x179fe4=!![];const _0x409e49=_0x1de93e[_0x1a75a8(0xbc)](_0x2fb1cc=>normalize(_0x2fb1cc[_0x1a75a8(0xd8)])===normalize(_0x15f100)&&(_0x2fb1cc[_0x1a75a8(0x144)]==='window'||_0x2fb1cc[_0x1a75a8(0x144)]===_0x1a75a8(0x13e)||_0x2fb1cc[_0x1a75a8(0x144)]==='contact'));for(const _0x393bb0 of _0x409e49){try{const _0x102943=await _0x57b1f3['getForeignStateAsync'](_0x393bb0['id']);if(_0x102943&&(_0x102943['val']===!![]||_0x102943[_0x1a75a8(0x104)]===0x1||String(_0x102943[_0x1a75a8(0x104)])[_0x1a75a8(0xf8)]()===_0x1a75a8(0x11d)))_0x179fe4=!![];}catch(_0x3b2b36){}}if(_0x179fe4)_0x57b1f3[_0x1a75a8(0x15b)][_0x1a75a8(0xd7)](_0x1a75a8(0xb7)+_0x15f100+'\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.');else{const _0x4c3f0e=_0xe9333[_0x15f100]||_0xe9333[_0x1a75a8(0xf6)]||0x15;_0x57b1f3[_0x1a75a8(0x15b)][_0x1a75a8(0xd7)](_0x1a75a8(0x173)+_0x15f100+_0x1a75a8(0xe4)+_0x420ff8['val']+_0x1a75a8(0x163)+(_0x4c3f0e+0.2)+_0x1a75a8(0x13d)),await _0x57b1f3[_0x1a75a8(0x113)](_0x476512,_0x4c3f0e),await logAutomationAction(_0x57b1f3,_0x1a75a8(0x13a)+_0x15f100+_0x1a75a8(0x122)+_0x4c3f0e+'¬∞C'),lastActions[_0x1a75a8(0x135)+_0x15f100]=Date[_0x1a75a8(0xe7)]();}}}_0x13be22[_0x1a75a8(0x147)](_0xd84325,0x1),_0x1a009e=!![];}}}}}_0x1a009e&&await _0x57b1f3[_0x1a75a8(0xe3)](_0x424cbe,{'val':JSON[_0x1a75a8(0xeb)](_0x13be22),'ack':!![]}),_0xb4a93e&&await _0x57b1f3['setStateAsync'](_0x1a75a8(0x16e),{'val':JSON[_0x1a75a8(0xeb)](_0x37a947),'ack':!![]});}catch(_0x1eb4a6){}}function a1_0x2cb4(){const _0x2fb208=['push','thermostat','getTime','setStateAsync','\x20erreicht\x20Limit\x20(','getForeignObjectsAsync','approved','now','1078752IuleMW','active','join','stringify','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','useCalendar','¬∞C!\x20(Puffer:\x20','currentSystemMode','system.mode','common','¬∞C.','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','consultButler','findIndex','default','string','toLowerCase','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','sort','position','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','thermostatMapping','reason','temperature','getHours','.1.LEVEL','unit','_calName','val','.1.ACTUAL_TEMPERATURE','analysis.energy.warmupTimes','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','current_heating_setpoint','off','Classic','date','manual','\x20wieder\x20auf\x20','analysis.energy.warmupTargets','forEach','room','¬∞C\x20(Kalender-Schutz)','üìÖ\x20SMART\x20SCHEDULE\x20[','setForeignStateAsync','.data.table','17980jckZxA','2nzKKGN','entries','¬∞C\x20(via\x20','Ist','event','devices','split','open','üìÖ\x20[MPC\x20INFO]\x20','level.valve','number','actual',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','Enforcement\x20Monitor\x20Error:\x20','334561HbcKkA','_date',']:\x20Raum-Trigger\x20\x27','slice','add','config','temp','Fehlt','apply','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','SET_POINT_TEMPERATURE','replace',')\x20aktiv.\x20Heize\x20auf\x20','[MPC]\x20','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','.1.TEMPERATURE','TRAIN_RL_PENALTY','rescue_','\x20->\x20','values','trim','r√ºckkehr','[WATCHDOG]\x20','Calendar\x20Check\x20Error:\x20','2309848uuBydw','¬∞C).\x20Sparmodus\x20beendet!','sensor','üßπ\x20[MPC\x20CLEANUP]\x20','getStateAsync','target_temperature','calendarSelection','from','type','includes','summary','splice','remove','analysis.energy.ventilationAlerts','\x20wurde\x20manuell\x20erh√∂ht.','error','üî•\x20[MPC\x20ACTION]\x20Heize\x20','[FORCE]\x20','toString','set','1205LuNemi','triggerTime','Nicht\x20gefunden','Auto-Erkennung','light','find','7ObdSnI','¬∞C!\x20(Puffer\x20leer).','analysis.energy.mpcActiveInterventions','score','analysis.automation.confidenceThreshold','log','analysis.automation.lastAction','urlaub\x20ende','constructor','\x20->\x20Schalte\x20','PERFECT','value.valve','map','¬∞C\x20<\x20','calendarInstance','dimmer','thermostat.setpoint','level','mpc_','\x20auf\x20','\x20gefunden!','cal_','normal','local_temperature','analysis.energy.rlPenalties','.1.SET_POINT_TEMPERATURE','\x27\x20(Match:\x20','\x20min).','27247490MfIRSc','üö®\x20[MPC\x20WATCHDOG]\x20','name','(((.+)+)+)+$','1484436nxdGav','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','setpoint','exports','parse','eventStart','üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20','valveMapping','\x20ist\x20auf\x20','analysis.energy.activeEnforcements','getForeignObjectAsync','filter','¬∞C).\x20Entferne\x20Status.','sendToPythonWrapper','wert','SET','messwert','state','¬∞C\x20->\x20','valve','abs','valve_position','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20','_meta','target','level.temperature','localeCompare','\x20min)','.4.SET_TEMPERATURE','¬∞C\x20(Vorlauf:\x20','search','warn','Soll','write','soll','getForeignStateAsync','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','info','location','./ai_agent',':\x20Absenkung\x20auf\x20','Unknown','length','6152643wGMFdj','.4.VALVE_STATE','too_cold'];a1_0x2cb4=function(){return _0x2fb208;};return a1_0x2cb4();}async function applyEnergySavings(_0x4c7a50,_0xf1de0f){const _0x3eed1f=a1_0x1f28d0;await cleanupGhostInterventions(_0x4c7a50);if(!_0xf1de0f||_0xf1de0f[_0x3eed1f(0xdc)]===0x0)return;const _0x228a9d=_0x4c7a50[_0x3eed1f(0x129)][_0x3eed1f(0x11b)]||[],_0x8cdacd=Date['now']();for(const _0x18ef0e of _0xf1de0f){const _0x56499e=_0x18ef0e[_0x3eed1f(0x110)],_0x2e89e1=_0x18ef0e['minutes_safe'],_0x2d77e8=_0x18ef0e[_0x3eed1f(0xca)]||0x15;if(lastActions[_0x3eed1f(0x135)+_0x56499e]&&_0x8cdacd-lastActions[_0x3eed1f(0x135)+_0x56499e]<RESCUE_LOCK_MS)continue;const _0x22e64b=_0x228a9d['find'](_0x2b0ad1=>normalize(_0x2b0ad1[_0x3eed1f(0xd8)])===normalize(_0x56499e)&&(_0x2b0ad1['type']===_0x3eed1f(0xff)||_0x2b0ad1['type']===_0x3eed1f(0xe1)));if(!_0x22e64b)continue;const _0x3bde30=await findRelatedId(_0x4c7a50,_0x22e64b['id'],_0x3eed1f(0xb3));if(_0x3bde30){if(lastActions['mpc_'+_0x56499e]&&_0x8cdacd-lastActions[_0x3eed1f(0x168)+_0x56499e]<0x1e*0x3c*0x3e8)continue;const _0x2cf2e4=await _0x4c7a50[_0x3eed1f(0xd5)](_0x3bde30);if(_0x2cf2e4&&typeof _0x2cf2e4[_0x3eed1f(0x104)]==='number'){const _0x24ade9=_0x2cf2e4['val'];_0x24ade9!==ECO_TEMP&&await manageMpcIntervention(_0x4c7a50,_0x56499e,'remove');if(_0x2e89e1>0x1e)_0x24ade9>ECO_TEMP+0.5&&(_0x4c7a50['log']['info'](_0x3eed1f(0xc8)+_0x56499e+_0x3eed1f(0x169)+ECO_TEMP+_0x3eed1f(0xee)+_0x2e89e1+_0x3eed1f(0xcd)),await _0x4c7a50[_0x3eed1f(0x113)](_0x3bde30,ECO_TEMP),await manageMpcIntervention(_0x4c7a50,_0x56499e,_0x3eed1f(0x128)),lastActions['mpc_'+_0x56499e]=_0x8cdacd,await logAutomationAction(_0x4c7a50,'[MPC]\x20'+_0x56499e+_0x3eed1f(0xda)+ECO_TEMP+'¬∞C'));else _0x2e89e1<=0xf&&(_0x24ade9<_0x2d77e8&&(_0x4c7a50['log']['info'](_0x3eed1f(0x14c)+_0x56499e+_0x3eed1f(0x10d)+_0x2d77e8+_0x3eed1f(0x157)),await _0x4c7a50[_0x3eed1f(0x113)](_0x3bde30,_0x2d77e8),await manageMpcIntervention(_0x4c7a50,_0x56499e,_0x3eed1f(0x148)),lastActions['mpc_'+_0x56499e]=_0x8cdacd,await logAutomationAction(_0x4c7a50,_0x3eed1f(0x131)+_0x56499e+':\x20Aufheizen\x20auf\x20'+_0x2d77e8+'¬∞C')));}}else _0x4c7a50[_0x3eed1f(0x15b)]['warn'](_0x3eed1f(0xd6)+_0x56499e+_0x3eed1f(0x16a));}}module[a1_0x1f28d0(0xb4)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};