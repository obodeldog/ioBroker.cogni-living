const a1_0x6c7e6a=a1_0x1acb;(function(_0x1145b3,_0x537470){const _0x5a74c1=a1_0x1acb,_0x587be6=_0x1145b3();while(!![]){try{const _0x46d5ae=-parseInt(_0x5a74c1(0x141))/0x1+-parseInt(_0x5a74c1(0x143))/0x2*(parseInt(_0x5a74c1(0xe4))/0x3)+-parseInt(_0x5a74c1(0x13d))/0x4+-parseInt(_0x5a74c1(0x149))/0x5*(parseInt(_0x5a74c1(0x144))/0x6)+-parseInt(_0x5a74c1(0x121))/0x7*(parseInt(_0x5a74c1(0xfb))/0x8)+-parseInt(_0x5a74c1(0x191))/0x9+-parseInt(_0x5a74c1(0x195))/0xa*(-parseInt(_0x5a74c1(0x100))/0xb);if(_0x46d5ae===_0x537470)break;else _0x587be6['push'](_0x587be6['shift']());}catch(_0x241eee){_0x587be6['push'](_0x587be6['shift']());}}}(a1_0x27e7,0xbc95d));const a1_0x152eec=(function(){let _0x88eada=!![];return function(_0x47b5ea,_0x6c981b){const _0x46b9f9=_0x88eada?function(){const _0x2eaa5e=a1_0x1acb;if(_0x6c981b){const _0x3250a2=_0x6c981b[_0x2eaa5e(0x138)](_0x47b5ea,arguments);return _0x6c981b=null,_0x3250a2;}}:function(){};return _0x88eada=![],_0x46b9f9;};}()),a1_0x56f3d5=a1_0x152eec(this,function(){const _0x1ada33=a1_0x1acb;return a1_0x56f3d5[_0x1ada33(0x126)]()['search'](_0x1ada33(0x184))[_0x1ada33(0x126)]()[_0x1ada33(0x18a)](a1_0x56f3d5)[_0x1ada33(0x153)]('(((.+)+)+)+$');});a1_0x56f3d5();'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x222f94){const _0x539929=a1_0x1acb;if(!_0x222f94)return'';return _0x222f94[_0x539929(0x169)]()['replace'](/\s+/g,'')[_0x539929(0x117)]();}function getWarmupRobust(_0x30ccf5,_0x267824){const _0x481df7=a1_0x1acb;if(!_0x30ccf5||!_0x267824)return 0x3c;if(_0x30ccf5[_0x267824]!==undefined)return _0x30ccf5[_0x267824];const _0x346aa1=_0x267824[_0x481df7(0x169)]()[_0x481df7(0x11b)](/Ã¤/g,'ae')[_0x481df7(0x11b)](/Ã¶/g,'oe')['replace'](/Ã¼/g,'ue')[_0x481df7(0x11b)](/ÃŸ/g,'ss')['replace'](/\s+/g,'_')['replace'](/[^a-z0-9_]/g,'');if(_0x30ccf5[_0x346aa1]!==undefined)return _0x30ccf5[_0x346aa1];return 0x3c;}function a1_0x27e7(){const _0x6d4d3c=['target','[CAL]\x20','thermostat','toString','stringify','localeCompare','remove','SET','Â°C.','map','soll','wert','exports','calendarSelection','temperature','sort','score','isArray','ðŸ“…\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','date','pi_heating_demand','apply','getForeignObjectAsync','normal','setpoint','_date','4265580lUrdVT','getStateAsync','Nicht\x20gefunden','temp','1407637Ljxsml','config','740SYOKjh','6HrYRCO','location',')\x20aktiv.\x20Heize\x20auf\x20','ðŸ“…\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','currentSystemMode','5654995MPdvaF','from','push','state','filter','ðŸ“…\x20[MPC\x20INFO]\x20','find','.4.SET_TEMPERATURE','analysis.energy.mpcActiveInterventions','analysis.automation.mode','search','Unbekannt','position','summary','contact','dimmer','consultButler','too_cold','analysis.energy.activeEnforcements','ðŸš¨\x20[MPC\x20WATCHDOG]\x20','message','open','valve_position','toUpperCase','actual','number',':\x20Aufheizen\x20auf\x20','local_temperature','triggerTime','hm-rpc','length','approved','toLowerCase','switch','string','level.valve','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/LÃ¼ftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','urlaub\x20ende','Ist','slice','role','Â°C\x20(Kalender-Schutz)','stellwert','\x20min)','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20fÃ¼r\x20','Unknown','Â°C\x20<\x20','Â°C!\x20(Puffer:\x20','getForeignObjectsAsync','thermostat.setpoint','set','unshift','[MPC]\x20','warn','\x20gefunden!','sendToPythonWrapper','Soll','rescue_','reason','(((.+)+)+)+$','default','target_temperature','valveMapping','manual','splice','constructor','getTime','messwert','Â°C\x20abgesenkt!\x20Zwinge\x20zurÃ¼ck\x20auf\x20','ankunft','ðŸ“…\x20SMART\x20SCHEDULE\x20[','rÃ¼ckkehr','10385730SRBLdz','eventStart','setForeignStateAsync','ðŸ§¹\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','1090OsdxBW','common','analysis.energy.warmupTimes','\x20min).','_calName','cal_','sensor','\x20->\x20','Â°C!\x20(Puffer\x20leer).','[FORCE]\x20','10728JOSyhM','ðŸŒ¬ï¸\x20[MPC\x20WATCHDOG]\x20','.1.ACTUAL_TEMPERATURE','PrÃ¤diktion:\x20','val','values','ðŸŽ“\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','TRAIN_RL_PENALTY','window','event','split','\x20->\x20Schalte\x20','findIndex','info',']:\x20Raum-Trigger\x20\x27','getForeignStateAsync','Â°C\x20(Vorlauf:\x20','ACTUAL_TEMPERATURE','write','openknx','Â°C).\x20Sparmodus\x20beendet!','type','system.mode','8wUKXVs','room','.1.TEMPERATURE','Classic',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','701855CdbLlr','_meta','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','analysis.energy.warmupSources','setStateAsync','name','ACTUAL','now','valve','mpc_','calendarInstance','abs','off','getHours','minutes_safe','includes','level','Manuelles\x20Mapping','forEach','.1.SET_POINT_TEMPERATURE','Â°C\x20(via\x20','useCalendar','\x20wurde\x20manuell\x20erhÃ¶ht.','trim','parse','log','add','replace','current_heating_setpoint','analysis.energy.ventilationAlerts','devices','Enforcement\x20Monitor\x20Error:\x20','analysis.automation.lastAction','701253zZYwsS','ðŸƒ\x20[MPC\x20ACTION]\x20Senke\x20'];a1_0x27e7=function(){return _0x6d4d3c;};return a1_0x27e7();}async function logAutomationAction(_0x509a1f,_0xc0b6b){const _0x4565a8=a1_0x1acb;await _0x509a1f[_0x4565a8(0x104)](_0x4565a8(0x120),{'val':_0xc0b6b,'ack':!![]});try{const _0x583f54='analysis.automation.actionLog',_0xfbb64=await _0x509a1f[_0x4565a8(0x13e)](_0x583f54);let _0x4284d2=[];if(_0xfbb64&&_0xfbb64[_0x4565a8(0xe8)])try{_0x4284d2=JSON[_0x4565a8(0x118)](_0xfbb64['val']);}catch(_0x40ea67){}_0x4284d2[_0x4565a8(0x17c)]({'ts':Date[_0x4565a8(0x107)](),'msg':_0xc0b6b});if(_0x4284d2[_0x4565a8(0x167)]>0x32)_0x4284d2=_0x4284d2['slice'](0x0,0x32);await _0x509a1f[_0x4565a8(0x104)](_0x583f54,{'val':JSON[_0x4565a8(0x127)](_0x4284d2),'ack':!![]});}catch(_0x3dfe29){}}async function handlePrediction(_0x13251d,_0x5b3bd5,_0x456253){const _0x5339c8=a1_0x1acb;if(!_0x5b3bd5||_0x5b3bd5===_0x5339c8(0x176))return;let _0x44698d='off',_0x4ab57d=0.6;try{const _0x57d1d9=await _0x13251d[_0x5339c8(0x13e)](_0x5339c8(0x152));if(_0x57d1d9&&_0x57d1d9[_0x5339c8(0xe8)])_0x44698d=_0x57d1d9[_0x5339c8(0xe8)];const _0x3dd0b5=await _0x13251d[_0x5339c8(0x13e)]('analysis.automation.confidenceThreshold');if(_0x3dd0b5&&_0x3dd0b5[_0x5339c8(0xe8)])_0x4ab57d=_0x3dd0b5['val'];}catch(_0x2c35ae){}if(_0x44698d===_0x5339c8(0x10c)||_0x456253<_0x4ab57d)return;const _0x4159a0=Date[_0x5339c8(0x107)]();if(lastActions[_0x5b3bd5]&&_0x4159a0-lastActions[_0x5b3bd5]<COOLDOWN_MS)return;const _0x54f048=_0x13251d[_0x5339c8(0x142)][_0x5339c8(0x11e)]||[],_0x54ac12=normalize(_0x5b3bd5),_0xb3ae56=_0x54f048[_0x5339c8(0x14f)](_0x30add5=>normalize(_0x30add5[_0x5339c8(0x145)])===_0x54ac12&&(_0x30add5['type']==='light'||_0x30add5[_0x5339c8(0xf9)]===_0x5339c8(0x158)||_0x30add5[_0x5339c8(0xf9)]===_0x5339c8(0x16a)));if(!_0xb3ae56)return;const _0x4ef03d=await aiAgent[_0x5339c8(0x159)](_0x13251d,_0x5b3bd5,_0xb3ae56[_0x5339c8(0x105)],_0x456253);if(!_0x4ef03d[_0x5339c8(0x168)])return;const _0x599980=_0x5339c8(0xe7)+_0x5b3bd5+_0x5339c8(0xef)+_0xb3ae56[_0x5339c8(0x105)]+'\x20('+_0x4ef03d[_0x5339c8(0x183)]+')';await logAutomationAction(_0x13251d,'['+_0x44698d[_0x5339c8(0x160)]()+']\x20'+_0x599980);if(_0x44698d==='active'){const _0x4a9f4d=await _0x13251d[_0x5339c8(0xf3)](_0xb3ae56['id']);(!_0x4a9f4d||!_0x4a9f4d[_0x5339c8(0xe8)]&&_0x4a9f4d[_0x5339c8(0xe8)]!==!![])&&await _0x13251d[_0x5339c8(0x193)](_0xb3ae56['id'],!![]),lastActions[_0x5b3bd5]=_0x4159a0;}}async function findRelatedId(_0x28d7bb,_0x21906c,_0x116984=a1_0x6c7e6a(0x13b)){const _0x298aea=a1_0x6c7e6a;if(_0x116984==='setpoint'&&_0x28d7bb[_0x298aea(0x142)]['thermostatMapping']){let _0x24429f=_0x28d7bb[_0x298aea(0x142)]['thermostatMapping'];if(typeof _0x24429f===_0x298aea(0x16b))try{_0x24429f=JSON[_0x298aea(0x118)](_0x24429f);}catch(_0x3634c3){}if(_0x24429f&&_0x24429f[_0x21906c])return _0x24429f[_0x21906c];}if(_0x116984==='valve'&&_0x28d7bb[_0x298aea(0x142)][_0x298aea(0x187)]){let _0x530bc8=_0x28d7bb[_0x298aea(0x142)][_0x298aea(0x187)];if(typeof _0x530bc8===_0x298aea(0x16b))try{_0x530bc8=JSON[_0x298aea(0x118)](_0x530bc8);}catch(_0x9aeaf2){}if(_0x530bc8&&_0x530bc8[_0x21906c])return _0x530bc8[_0x21906c];}let _0x5c355f=[];if(_0x116984==='setpoint')_0x5c355f=[{'s':'.1.ACTUAL_TEMPERATURE','t':_0x298aea(0x113)},{'s':_0x298aea(0xfd),'t':_0x298aea(0x113)},{'s':_0x298aea(0xfd),'t':_0x298aea(0x150)},{'s':_0x298aea(0xf5),'t':'SET_POINT_TEMPERATURE'},{'s':'local_temperature','t':'occupied_heating_setpoint'},{'s':_0x298aea(0x164),'t':_0x298aea(0x11c)},{'s':_0x298aea(0x131),'t':_0x298aea(0x186)},{'s':_0x298aea(0x106),'t':_0x298aea(0x12a)},{'s':_0x298aea(0x16f),'t':_0x298aea(0x181)},{'s':_0x298aea(0x131),'t':_0x298aea(0x13b)}];else _0x116984===_0x298aea(0x108)&&(_0x5c355f=[{'s':_0x298aea(0xe6),'t':'.1.LEVEL'},{'s':_0x298aea(0xfd),'t':'.1.LEVEL'},{'s':'.1.TEMPERATURE','t':'.4.VALVE_STATE'},{'s':'local_temperature','t':_0x298aea(0x137)},{'s':'temperature','t':_0x298aea(0x15f)},{'s':_0x298aea(0x131),'t':_0x298aea(0x110)}]);for(const _0x2be2f2 of _0x5c355f){if(_0x21906c[_0x298aea(0x10f)](_0x2be2f2['s'])){const _0x134b76=_0x21906c[_0x298aea(0x11b)](_0x2be2f2['s'],_0x2be2f2['t']),_0x3d85e4=await _0x28d7bb[_0x298aea(0x139)](_0x134b76);if(_0x3d85e4)return _0x134b76;}}try{const _0x563b54=_0x21906c[_0x298aea(0xee)]('.');if(_0x563b54[_0x298aea(0x167)]>0x2){const _0x11a88f=_0x563b54[_0x298aea(0x170)](0x0,-0x1)['join']('.'),_0x2b6396=await _0x28d7bb[_0x298aea(0x179)](_0x11a88f+'.*'),_0x20d2cc=[],_0x4eeccd=_0x21906c[_0x298aea(0xee)](/[._]+/)[_0x298aea(0x14d)](_0x87cfd5=>![_0x298aea(0xf7),'0',_0x298aea(0x166),'ist',_0x298aea(0x12e),_0x298aea(0x131),_0x298aea(0x161),_0x298aea(0xe0),_0x298aea(0x18c),_0x298aea(0x14c)][_0x298aea(0x10f)](_0x87cfd5[_0x298aea(0x169)]()));for(const [_0xb137e2,_0x2490e4]of Object['entries'](_0x2b6396)){if(_0xb137e2===_0x21906c)continue;if(_0x2490e4&&_0x2490e4[_0x298aea(0x196)]){const _0x37d9c5=_0xb137e2[_0x298aea(0x169)](),_0x11e651=(_0x2490e4[_0x298aea(0x196)][_0x298aea(0x171)]||'')['toLowerCase'](),_0x3ee38f=(_0x2490e4[_0x298aea(0x196)]['unit']||'')[_0x298aea(0x169)]();let _0x3b22d3=![];if(_0x116984==='setpoint'&&_0x2490e4[_0x298aea(0x196)][_0x298aea(0xf6)]===!![])_0x3b22d3=_0x37d9c5[_0x298aea(0x10f)](_0x298aea(0x17b))||_0x37d9c5['includes'](_0x298aea(0x12d))||_0x37d9c5[_0x298aea(0x10f)](_0x298aea(0x123))||_0x11e651[_0x298aea(0x10f)]('level.temperature')||_0x11e651[_0x298aea(0x10f)](_0x298aea(0x17a));else _0x116984===_0x298aea(0x108)&&(_0x3b22d3=_0x37d9c5[_0x298aea(0x10f)](_0x298aea(0x110))||_0x37d9c5[_0x298aea(0x10f)](_0x298aea(0x108))||_0x37d9c5['includes'](_0x298aea(0x173))||_0x37d9c5[_0x298aea(0x10f)](_0x298aea(0x155))||_0x11e651['includes'](_0x298aea(0x16c))||_0x11e651['includes']('value.valve')||_0x3ee38f['includes']('%'));if(_0x3b22d3){const _0x50ccd8=_0xb137e2[_0x298aea(0xee)](/[._]+/)[_0x298aea(0x12c)](_0x9d359=>_0x9d359[_0x298aea(0x169)]());let _0xe829f3=0x0;_0x4eeccd[_0x298aea(0x112)](_0x4eb70c=>{const _0x455775=_0x298aea;if(_0x50ccd8['includes'](_0x4eb70c[_0x455775(0x169)]()))_0xe829f3++;}),_0x20d2cc[_0x298aea(0x14b)]({'id':_0xb137e2,'score':_0xe829f3});}}}if(_0x20d2cc[_0x298aea(0x167)]>0x0){_0x20d2cc[_0x298aea(0x132)]((_0xea0e94,_0x59b17d)=>_0x59b17d[_0x298aea(0x133)]-_0xea0e94[_0x298aea(0x133)]);if(_0x20d2cc[0x0][_0x298aea(0x133)]>0x0)return _0x20d2cc[0x0]['id'];}}}catch(_0x2fdd19){}return null;}async function scanThermostats(_0x5ca8a3){const _0x149fde=a1_0x6c7e6a,_0x57c690=_0x5ca8a3[_0x149fde(0x142)]['devices']||[],_0x1c59aa=[],_0x107b24=_0x57c690[_0x149fde(0x14d)](_0x473aa7=>_0x473aa7['id']&&_0x473aa7['id'][_0x149fde(0x10f)](_0x149fde(0x131))||_0x473aa7[_0x149fde(0xf9)]&&[_0x149fde(0x131),_0x149fde(0x125),_0x149fde(0xe0)]['includes'](_0x473aa7[_0x149fde(0xf9)])||_0x473aa7[_0x149fde(0x105)]&&_0x473aa7[_0x149fde(0x105)]['toLowerCase']()['includes'](_0x149fde(0x140)));for(const _0x2fbfff of _0x107b24){const _0x51b105=await findRelatedId(_0x5ca8a3,_0x2fbfff['id'],_0x149fde(0x13b)),_0x190f61=await findRelatedId(_0x5ca8a3,_0x2fbfff['id'],_0x149fde(0x108));let _0x3d4379=_0x149fde(0x13f),_0x451aad=![],_0x3d9182=_0x5ca8a3[_0x149fde(0x142)]['thermostatMapping']||{};if(typeof _0x3d9182===_0x149fde(0x16b))try{_0x3d9182=JSON[_0x149fde(0x118)](_0x3d9182);}catch(_0x4a93c4){}let _0x179338=_0x5ca8a3[_0x149fde(0x142)]['valveMapping']||{};if(typeof _0x179338===_0x149fde(0x16b))try{_0x179338=JSON[_0x149fde(0x118)](_0x179338);}catch(_0x2da27d){}if(_0x3d9182[_0x2fbfff['id']]&&_0x3d9182[_0x2fbfff['id']]===_0x51b105||_0x179338[_0x2fbfff['id']]&&_0x179338[_0x2fbfff['id']]===_0x190f61)_0x3d4379=_0x149fde(0x111),_0x451aad=!![];else(_0x51b105||_0x190f61)&&(_0x3d4379='Auto-Erkennung');_0x1c59aa[_0x149fde(0x14b)]({'room':_0x2fbfff[_0x149fde(0x145)]||_0x149fde(0x154),'sensorId':_0x2fbfff['id'],'setpointId':_0x51b105||'-','valveId':_0x190f61||'-','source':_0x3d4379,'isManual':_0x451aad,'status':_0x51b105&&_0x190f61?'PERFECT':_0x51b105?'OK':'Fehlt'});}return _0x1c59aa[_0x149fde(0x132)]((_0x447af6,_0x219bdb)=>_0x447af6[_0x149fde(0xfc)][_0x149fde(0x128)](_0x219bdb[_0x149fde(0xfc)]));}async function updateSchedulePreview(_0x3d255d){const _0x6dec0=a1_0x6c7e6a;if(!_0x3d255d[_0x6dec0(0x142)][_0x6dec0(0x115)]||!_0x3d255d[_0x6dec0(0x142)]['calendarInstance'])return;let _0x378949={};try{const _0x54cd1d=await _0x3d255d[_0x6dec0(0x13e)](_0x6dec0(0x197));if(_0x54cd1d&&_0x54cd1d[_0x6dec0(0xe8)])_0x378949=JSON[_0x6dec0(0x118)](_0x54cd1d['val']);}catch(_0x2a66b9){}const _0x27beb1=[],_0x21d121=Date[_0x6dec0(0x107)](),_0x16abb3=0x30*0x3c*0x3c*0x3e8;try{const _0x21a91c=await _0x3d255d[_0x6dec0(0xf3)](_0x3d255d[_0x6dec0(0x142)]['calendarInstance']+'.data.table');if(!_0x21a91c||!_0x21a91c[_0x6dec0(0xe8)])return;const _0x3b704c=JSON[_0x6dec0(0x118)](_0x21a91c[_0x6dec0(0xe8)]),_0x14c4ef=_0x3d255d['config'][_0x6dec0(0x130)]||[],_0x22d2c1=_0x3d255d[_0x6dec0(0x142)]['devices']||[],_0x6ff3f0=new Set();_0x22d2c1['forEach'](_0x1764e9=>{const _0x549200=_0x6dec0;if(_0x1764e9[_0x549200(0x145)])_0x6ff3f0[_0x549200(0x11a)](_0x1764e9[_0x549200(0x145)]);});for(const _0x246ce1 of _0x3b704c){if(_0x246ce1[_0x6dec0(0xde)]&&_0x14c4ef[_0x6dec0(0x167)]>0x0&&!_0x14c4ef[_0x6dec0(0x10f)](_0x246ce1[_0x6dec0(0xde)]))continue;const _0xe405f1=_0x246ce1['_date']||_0x246ce1[_0x6dec0(0x192)]||_0x246ce1['date'];if(!_0xe405f1)continue;const _0x5175d3=new Date(_0xe405f1),_0x233f05=_0x5175d3[_0x6dec0(0x18b)]();if(isNaN(_0x233f05))continue;if(_0x233f05<_0x21d121)continue;if(_0x233f05>_0x21d121+_0x16abb3)continue;const _0x520fb9=(_0x246ce1[_0x6dec0(0xed)]||_0x246ce1[_0x6dec0(0x156)]||'')[_0x6dec0(0x169)]();let _0x773405=![],_0x111de7=[],_0x3fea4a=_0x246ce1['event']||_0x246ce1[_0x6dec0(0x156)]||_0x6dec0(0x154);if(_0x520fb9[_0x6dec0(0x10f)](_0x6dec0(0x16e))||_0x520fb9[_0x6dec0(0x10f)](_0x6dec0(0x190))||_0x520fb9['includes'](_0x6dec0(0x18e)))_0x773405=!![],_0x111de7=Array[_0x6dec0(0x14a)](_0x6ff3f0);else for(const _0x2a0dff of _0x6ff3f0){if(_0x520fb9[_0x6dec0(0x10f)](_0x2a0dff['toLowerCase']()))_0x111de7[_0x6dec0(0x14b)](_0x2a0dff);}_0x111de7[_0x6dec0(0x167)]>0x0&&_0x111de7[_0x6dec0(0x112)](_0x3ee2ca=>{const _0x2cfb06=_0x6dec0;let _0x7a5004=0x3c;if(_0x773405){let _0xfd7b16=0x0;Object[_0x2cfb06(0xe9)](_0x378949)['forEach'](_0x52314b=>{if(_0x52314b>_0xfd7b16)_0xfd7b16=_0x52314b;}),_0x7a5004=_0xfd7b16>0x0?_0xfd7b16:0x78;}else _0x7a5004=getWarmupRobust(_0x378949,_0x3ee2ca);const _0x19c9d7=new Date(_0x233f05-_0x7a5004*0xea60);_0x27beb1[_0x2cfb06(0x14b)]({'eventTime':_0x233f05,'triggerTime':_0x19c9d7[_0x2cfb06(0x18b)](),'room':_0x3ee2ca,'minutes':_0x7a5004,'reason':_0x3fea4a,'isGlobal':_0x773405});});}}catch(_0x706142){}_0x27beb1['sort']((_0x3fdd5c,_0xb7abb6)=>_0x3fdd5c[_0x6dec0(0x165)]-_0xb7abb6[_0x6dec0(0x165)]);const _0x58b19e=_0x27beb1['slice'](0x0,0x1e);await _0x3d255d[_0x6dec0(0x104)]('analysis.energy.schedulePreview',{'val':JSON[_0x6dec0(0x127)](_0x58b19e),'ack':!![]});}async function monitorEnforcements(_0x4fd8f3){const _0x20131a=a1_0x6c7e6a;try{const _0x26bc71=_0x20131a(0x15b),_0x378ef8=await _0x4fd8f3['getStateAsync'](_0x26bc71);if(!_0x378ef8||!_0x378ef8[_0x20131a(0xe8)])return;let _0x116bb1=[];try{_0x116bb1=JSON[_0x20131a(0x118)](_0x378ef8[_0x20131a(0xe8)]);}catch(_0x134d08){return;}if(!Array[_0x20131a(0x134)](_0x116bb1)||_0x116bb1[_0x20131a(0x167)]===0x0)return;const _0x2d5351=Date[_0x20131a(0x107)](),_0x4c130d=_0x4fd8f3[_0x20131a(0x142)][_0x20131a(0x11e)]||[];let _0x3ac2ea=![];for(let _0x5ad831=_0x116bb1[_0x20131a(0x167)]-0x1;_0x5ad831>=0x0;_0x5ad831--){const _0x4e66ca=_0x116bb1[_0x5ad831];if(_0x2d5351>=_0x4e66ca['until']){_0x4fd8f3[_0x20131a(0x119)][_0x20131a(0xf1)](_0x20131a(0x135)+_0x4e66ca[_0x20131a(0xfc)]+_0x20131a(0x102)),_0x116bb1[_0x20131a(0x189)](_0x5ad831,0x1),_0x3ac2ea=!![];continue;}const _0x4e82c7=_0x4c130d[_0x20131a(0x14f)](_0x4123e3=>normalize(_0x4123e3[_0x20131a(0x145)])===normalize(_0x4e66ca[_0x20131a(0xfc)])&&(_0x4123e3[_0x20131a(0xf9)]==='temperature'||_0x4123e3[_0x20131a(0xf9)]==='thermostat'));if(_0x4e82c7){const _0x5b7299=await findRelatedId(_0x4fd8f3,_0x4e82c7['id'],_0x20131a(0x13b));if(_0x5b7299){const _0x2448cf=await _0x4fd8f3[_0x20131a(0xf3)](_0x5b7299);_0x2448cf&&typeof _0x2448cf[_0x20131a(0xe8)]==='number'&&(_0x2448cf[_0x20131a(0xe8)]<0xf&&(_0x4fd8f3[_0x20131a(0x119)][_0x20131a(0x17e)]('ðŸš¨\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x4e66ca[_0x20131a(0xfc)]+'\x20auf\x20'+_0x2448cf['val']+_0x20131a(0x18d)+_0x4e66ca[_0x20131a(0x123)]+_0x20131a(0x12b)),await _0x4fd8f3[_0x20131a(0x193)](_0x5b7299,_0x4e66ca[_0x20131a(0x123)]),await logAutomationAction(_0x4fd8f3,_0x20131a(0xe3)+_0x4e66ca[_0x20131a(0xfc)]+':\x20'+_0x2448cf[_0x20131a(0xe8)]+'Â°C\x20->\x20'+_0x4e66ca[_0x20131a(0x123)]+_0x20131a(0x172))));}}}_0x3ac2ea&&await _0x4fd8f3['setStateAsync'](_0x26bc71,{'val':JSON[_0x20131a(0x127)](_0x116bb1),'ack':!![]});}catch(_0x5290a4){_0x4fd8f3[_0x20131a(0x119)]['error'](_0x20131a(0x11f)+_0x5290a4['message']);}}async function checkCalendarTriggers(_0x37afc1){const _0x5dab63=a1_0x6c7e6a;if(!_0x37afc1[_0x5dab63(0x142)][_0x5dab63(0x115)]||!_0x37afc1['config'][_0x5dab63(0x10a)])return;await updateSchedulePreview(_0x37afc1);let _0x6ee192={},_0xb1f5c5={};try{const _0x74800d=await _0x37afc1[_0x5dab63(0x13e)](_0x5dab63(0x197));if(_0x74800d&&_0x74800d[_0x5dab63(0xe8)])_0x6ee192=JSON['parse'](_0x74800d[_0x5dab63(0xe8)]);const _0x1e0fa5=await _0x37afc1[_0x5dab63(0x13e)](_0x5dab63(0x103));if(_0x1e0fa5&&_0x1e0fa5[_0x5dab63(0xe8)])_0xb1f5c5=JSON['parse'](_0x1e0fa5[_0x5dab63(0xe8)]);}catch(_0x25b4af){}let _0x2df958={'default':0x15};try{const _0x145cfd=await _0x37afc1[_0x5dab63(0x13e)]('analysis.energy.warmupTargets');if(_0x145cfd&&_0x145cfd['val'])_0x2df958=JSON[_0x5dab63(0x118)](_0x145cfd[_0x5dab63(0xe8)]);}catch(_0x1eedb9){}let _0x106c16=[];try{const _0x13d88c=await _0x37afc1['getStateAsync']('analysis.energy.activeEnforcements');if(_0x13d88c&&_0x13d88c[_0x5dab63(0xe8)])_0x106c16=JSON[_0x5dab63(0x118)](_0x13d88c[_0x5dab63(0xe8)]);}catch(_0x1fabc8){}try{const _0x38fd3e=await _0x37afc1[_0x5dab63(0xf3)](_0x37afc1['config']['calendarInstance']+'.data.table');if(!_0x38fd3e||!_0x38fd3e['val'])return;const _0x223aa8=JSON[_0x5dab63(0x118)](_0x38fd3e[_0x5dab63(0xe8)]),_0x37f9f9=Date[_0x5dab63(0x107)](),_0x39d5be=_0x37afc1[_0x5dab63(0x142)][_0x5dab63(0x11e)]||[],_0x34aab7=_0x37afc1[_0x5dab63(0x142)][_0x5dab63(0x130)]||[];let _0x75fed=![];for(const _0x591f2e of _0x223aa8){if(_0x591f2e['_calName']&&_0x34aab7[_0x5dab63(0x167)]>0x0&&!_0x34aab7[_0x5dab63(0x10f)](_0x591f2e[_0x5dab63(0xde)]))continue;const _0x157e24=_0x591f2e[_0x5dab63(0x13c)]||_0x591f2e[_0x5dab63(0x192)]||_0x591f2e[_0x5dab63(0x136)];if(!_0x157e24)continue;const _0x20b842=new Date(_0x157e24);if(isNaN(_0x20b842['getTime']()))continue;const _0x55a301=(_0x591f2e[_0x5dab63(0xed)]||_0x591f2e[_0x5dab63(0x156)]||'')[_0x5dab63(0x169)]();if(_0x55a301[_0x5dab63(0x10f)]('urlaub\x20ende')||_0x55a301[_0x5dab63(0x10f)](_0x5dab63(0x190))||_0x55a301['includes']('ankunft')){let _0xcebb43=0x0;Object[_0x5dab63(0xe9)](_0x6ee192)[_0x5dab63(0x112)](_0x396e95=>{if(_0x396e95>_0xcebb43)_0xcebb43=_0x396e95;});if(_0xcebb43===0x0)_0xcebb43=0x78;const _0x3671df=_0x20b842['getTime']()-_0xcebb43*0xea60;_0x37f9f9>=_0x3671df&&_0x37f9f9<_0x20b842[_0x5dab63(0x18b)]()&&(_0x37afc1[_0x5dab63(0x148)]!==_0x5dab63(0x13a)&&(_0x37afc1[_0x5dab63(0x119)][_0x5dab63(0xf1)](_0x5dab63(0x147)+_0xcebb43+'\x20min).'),await _0x37afc1[_0x5dab63(0x104)](_0x5dab63(0xfa),{'val':_0x5dab63(0x13a),'ack':![]})));}for(const _0x3d3b2a of _0x39d5be){if(_0x3d3b2a['location']){const _0x1fd9fb=_0x3d3b2a['location'][_0x5dab63(0x169)](),_0x138e9c=(_0x3d3b2a[_0x5dab63(0x105)]||'')[_0x5dab63(0x169)]();let _0x500768=_0x55a301[_0x5dab63(0x10f)](_0x1fd9fb);!_0x500768&&_0x138e9c[_0x5dab63(0x167)]>0x3&&_0x55a301[_0x5dab63(0x10f)](_0x138e9c)&&(_0x500768=!![]);if(_0x500768){const _0x3e1ad6=getWarmupRobust(_0x6ee192,_0x3d3b2a[_0x5dab63(0x145)]),_0x357e9f=_0xb1f5c5[_0x3d3b2a[_0x5dab63(0x145)]]||_0x5dab63(0xfe),_0x284f21=_0x20b842['getTime']()-_0x3e1ad6*0xea60;if(_0x37f9f9>=_0x284f21&&_0x37f9f9<_0x20b842['getTime']()){const _0x36bdde=lastActions[_0x5dab63(0xdf)+_0x3d3b2a[_0x5dab63(0x145)]];if(_0x36bdde&&_0x37f9f9-_0x36bdde<CAL_COOLDOWN_MS)continue;const _0x247f43=await findRelatedId(_0x37afc1,_0x3d3b2a['id'],_0x5dab63(0x13b));if(_0x247f43){let _0x32100b=_0x2df958[_0x3d3b2a['location']];if(_0x32100b===undefined)_0x32100b=_0x2df958[_0x5dab63(0x185)];if(_0x32100b===undefined)_0x32100b=0x15;const _0x2facd3=await _0x37afc1['getForeignStateAsync'](_0x247f43);if(_0x2facd3&&typeof _0x2facd3['val']===_0x5dab63(0x162)&&_0x2facd3[_0x5dab63(0xe8)]<_0x32100b-0.5){_0x37afc1[_0x5dab63(0x119)][_0x5dab63(0xf1)](_0x5dab63(0x18f)+_0x357e9f+_0x5dab63(0xf2)+_0x3d3b2a[_0x5dab63(0x145)]+'\x27\x20(Match:\x20'+_0x55a301+_0x5dab63(0x146)+_0x32100b+_0x5dab63(0xf4)+_0x3e1ad6+_0x5dab63(0x198)),await _0x37afc1[_0x5dab63(0x193)](_0x247f43,_0x32100b),await logAutomationAction(_0x37afc1,_0x5dab63(0x124)+_0x3d3b2a['location']+_0x5dab63(0xe1)+_0x32100b+_0x5dab63(0x114)+_0x357e9f+')'),lastActions[_0x5dab63(0xdf)+_0x3d3b2a['location']]=_0x37f9f9;const _0x57cdef=_0x106c16[_0x5dab63(0xf0)](_0x1bdfb6=>_0x1bdfb6[_0x5dab63(0xfc)]===_0x3d3b2a['location']);if(_0x57cdef!==-0x1)_0x106c16[_0x5dab63(0x189)](_0x57cdef,0x1);_0x106c16['push']({'room':_0x3d3b2a[_0x5dab63(0x145)],'target':_0x32100b,'until':_0x20b842[_0x5dab63(0x18b)]()}),_0x75fed=!![];}}}}}}}_0x75fed&&await _0x37afc1['setStateAsync']('analysis.energy.activeEnforcements',{'val':JSON[_0x5dab63(0x127)](_0x106c16),'ack':!![]});}catch(_0x4fdbbb){_0x37afc1[_0x5dab63(0x119)][_0x5dab63(0x17e)]('Calendar\x20Check\x20Error:\x20'+_0x4fdbbb[_0x5dab63(0x15d)]);}}function a1_0x1acb(_0x313aaf,_0x344f42){const _0x369751=a1_0x27e7();return a1_0x1acb=function(_0x56f3d5,_0x152eec){_0x56f3d5=_0x56f3d5-0xde;let _0x27e7fc=_0x369751[_0x56f3d5];return _0x27e7fc;},a1_0x1acb(_0x313aaf,_0x344f42);}async function manageMpcIntervention(_0x4cdfb2,_0x4cbd06,_0x385f36){const _0x2685de=a1_0x6c7e6a;try{const _0x26e6c=_0x2685de(0x151),_0x3e0034=await _0x4cdfb2[_0x2685de(0x13e)](_0x26e6c);let _0x284cb3=[];if(_0x3e0034&&_0x3e0034['val'])try{_0x284cb3=JSON[_0x2685de(0x118)](_0x3e0034[_0x2685de(0xe8)]);}catch(_0x4b6a04){}const _0x28eed6=_0x284cb3['indexOf'](_0x4cbd06);if(_0x385f36==='add')_0x28eed6===-0x1&&(_0x284cb3[_0x2685de(0x14b)](_0x4cbd06),await _0x4cdfb2[_0x2685de(0x104)](_0x26e6c,{'val':JSON[_0x2685de(0x127)](_0x284cb3),'ack':!![]}));else _0x385f36==='remove'&&(_0x28eed6!==-0x1&&(_0x284cb3[_0x2685de(0x189)](_0x28eed6,0x1),await _0x4cdfb2[_0x2685de(0x104)](_0x26e6c,{'val':JSON[_0x2685de(0x127)](_0x284cb3),'ack':!![]})));}catch(_0x44372b){}}async function cleanupGhostInterventions(_0x32d1ba){const _0x4d7804=a1_0x6c7e6a;try{const _0xf13d=_0x4d7804(0x151),_0x3298d8=await _0x32d1ba['getStateAsync'](_0xf13d);if(!_0x3298d8||!_0x3298d8[_0x4d7804(0xe8)])return;const _0x1456d7=JSON[_0x4d7804(0x118)](_0x3298d8[_0x4d7804(0xe8)]);if(!Array[_0x4d7804(0x134)](_0x1456d7)||_0x1456d7[_0x4d7804(0x167)]===0x0)return;let _0x5b043b={'default':0x15};try{const _0xab391d=await _0x32d1ba['getStateAsync']('analysis.energy.warmupTargets');if(_0xab391d&&_0xab391d[_0x4d7804(0xe8)])_0x5b043b=JSON[_0x4d7804(0x118)](_0xab391d[_0x4d7804(0xe8)]);}catch(_0x2a71d4){}let _0x506ed2=[];try{const _0x3ace8f=await _0x32d1ba[_0x4d7804(0x13e)](_0x4d7804(0x11d));if(_0x3ace8f&&_0x3ace8f[_0x4d7804(0xe8)])_0x506ed2=JSON[_0x4d7804(0x118)](_0x3ace8f[_0x4d7804(0xe8)]);}catch(_0xe1f628){}let _0x2aef7b={},_0x28d96d=![];try{const _0xf6be4d=await _0x32d1ba[_0x4d7804(0x13e)]('analysis.energy.rlPenalties');if(_0xf6be4d&&_0xf6be4d['val'])_0x2aef7b=JSON['parse'](_0xf6be4d[_0x4d7804(0xe8)]);}catch(_0x199cf4){}if(_0x2aef7b[_0x4d7804(0x101)]){const _0x584e2b=Date[_0x4d7804(0x107)]();for(const [_0xd9e237,_0x32b638]of Object['entries'](_0x2aef7b[_0x4d7804(0x101)])){_0x584e2b-_0x32b638>PENALTY_TTL&&(delete _0x2aef7b[_0xd9e237],delete _0x2aef7b['_meta'][_0xd9e237],_0x28d96d=!![],_0x32d1ba[_0x4d7804(0x119)][_0x4d7804(0xf1)]('ðŸ›¡ï¸\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20fÃ¼r\x20\x27'+_0xd9e237+'\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.'));}}const _0x140f84=_0x32d1ba[_0x4d7804(0x142)][_0x4d7804(0x11e)]||[];let _0x588009=![];for(let _0x328830=_0x1456d7[_0x4d7804(0x167)]-0x1;_0x328830>=0x0;_0x328830--){const _0x26b3e5=_0x1456d7[_0x328830],_0x22bae2=_0x140f84[_0x4d7804(0x14f)](_0x47ed06=>normalize(_0x47ed06[_0x4d7804(0x145)])===normalize(_0x26b3e5)&&(_0x47ed06[_0x4d7804(0xf9)]===_0x4d7804(0x131)||_0x47ed06[_0x4d7804(0xf9)]===_0x4d7804(0x125)));if(!_0x22bae2){_0x32d1ba[_0x4d7804(0x119)][_0x4d7804(0x17e)](_0x4d7804(0x194)+_0x26b3e5+'\x27\x20hat\x20kein\x20GerÃ¤t\x20mehr.\x20LÃ¶sche\x20Eintrag.'),_0x1456d7[_0x4d7804(0x189)](_0x328830,0x1),_0x588009=!![];continue;}if(_0x22bae2){const _0x43ddff=await findRelatedId(_0x32d1ba,_0x22bae2['id'],_0x4d7804(0x13b)),_0x405f04=await _0x32d1ba[_0x4d7804(0xf3)](_0x22bae2['id']);if(_0x43ddff){const _0x304404=await _0x32d1ba[_0x4d7804(0xf3)](_0x43ddff);if(_0x304404&&typeof _0x304404[_0x4d7804(0xe8)]==='number'){let _0x102c61=![],_0x3cc91d='';Math[_0x4d7804(0x10b)](_0x304404[_0x4d7804(0xe8)]-ECO_TEMP)>0.5&&(_0x102c61=!![],_0x3cc91d=_0x4d7804(0x188));if(!_0x102c61&&_0x405f04&&typeof _0x405f04[_0x4d7804(0xe8)]===_0x4d7804(0x162)){const _0x5d7bb5=_0x5b043b[_0x26b3e5]||_0x5b043b[_0x4d7804(0x185)]||0x15;_0x405f04[_0x4d7804(0xe8)]<_0x5d7bb5+0.2&&(_0x102c61=!![],_0x3cc91d=_0x4d7804(0x15a));}if(_0x102c61){if(_0x3cc91d===_0x4d7804(0x188)){_0x32d1ba['log'][_0x4d7804(0xf1)]('ðŸ§¹\x20[MPC\x20CLEANUP]\x20'+_0x26b3e5+'\x20ist\x20auf\x20'+_0x304404[_0x4d7804(0xe8)]+'Â°C\x20(nicht\x20'+ECO_TEMP+'Â°C).\x20Entferne\x20Status.');const _0x2a5030=lastActions[_0x4d7804(0xdf)+_0x26b3e5],_0x3d99bf=_0x2a5030&&Date[_0x4d7804(0x107)]()-_0x2a5030<0x2*0x3c*0x3e8;if(!_0x3d99bf&&_0x304404['val']>ECO_TEMP+0.5){_0x32d1ba[_0x4d7804(0x180)]&&(_0x32d1ba['log'][_0x4d7804(0xf1)](_0x4d7804(0xea)+_0x26b3e5+_0x4d7804(0x116)),_0x32d1ba['sendToPythonWrapper'](_0x4d7804(0xeb),{'room':_0x26b3e5}));const _0x528309=_0x26b3e5+'_'+new Date()[_0x4d7804(0x10d)]();if(!_0x2aef7b[_0x528309]){_0x2aef7b[_0x528309]=0x1;if(!_0x2aef7b[_0x4d7804(0x101)])_0x2aef7b[_0x4d7804(0x101)]={};_0x2aef7b['_meta'][_0x528309]=Date[_0x4d7804(0x107)](),_0x28d96d=!![];}}else _0x3d99bf&&_0x32d1ba[_0x4d7804(0x119)][_0x4d7804(0xf1)](_0x4d7804(0x14e)+_0x26b3e5+'\x20durch\x20Kalender\x20geÃ¤ndert.\x20Keine\x20RL-Strafe.');}else{if(_0x3cc91d===_0x4d7804(0x15a)){let _0x5596c7=![];if(_0x506ed2[_0x4d7804(0x14f)](_0x2bb7ed=>_0x2bb7ed[_0x4d7804(0xfc)]===_0x26b3e5))_0x5596c7=!![];const _0x17d1f9=_0x140f84[_0x4d7804(0x14d)](_0x5f156a=>normalize(_0x5f156a[_0x4d7804(0x145)])===normalize(_0x26b3e5)&&(_0x5f156a[_0x4d7804(0xf9)]===_0x4d7804(0xec)||_0x5f156a['type']===_0x4d7804(0xe0)||_0x5f156a[_0x4d7804(0xf9)]===_0x4d7804(0x157)));for(const _0x297b38 of _0x17d1f9){try{const _0x60a6f5=await _0x32d1ba[_0x4d7804(0xf3)](_0x297b38['id']);if(_0x60a6f5&&(_0x60a6f5[_0x4d7804(0xe8)]===!![]||_0x60a6f5[_0x4d7804(0xe8)]===0x1||String(_0x60a6f5[_0x4d7804(0xe8)])['toLowerCase']()===_0x4d7804(0x15e)))_0x5596c7=!![];}catch(_0x35a76d){}}if(_0x5596c7)_0x32d1ba[_0x4d7804(0x119)][_0x4d7804(0xf1)](_0x4d7804(0xe5)+_0x26b3e5+_0x4d7804(0x16d));else{const _0x202991=_0x5b043b[_0x26b3e5]||_0x5b043b[_0x4d7804(0x185)]||0x15;_0x32d1ba[_0x4d7804(0x119)][_0x4d7804(0xf1)](_0x4d7804(0x15c)+_0x26b3e5+'\x20erreicht\x20Limit\x20('+_0x405f04['val']+_0x4d7804(0x177)+(_0x202991+0.2)+_0x4d7804(0xf8)),await _0x32d1ba['setForeignStateAsync'](_0x43ddff,_0x202991),await logAutomationAction(_0x32d1ba,'[WATCHDOG]\x20'+_0x26b3e5+_0x4d7804(0xff)+_0x202991+'Â°C'),lastActions[_0x4d7804(0x182)+_0x26b3e5]=Date[_0x4d7804(0x107)]();}}}_0x1456d7[_0x4d7804(0x189)](_0x328830,0x1),_0x588009=!![];}}}}}_0x588009&&await _0x32d1ba['setStateAsync'](_0xf13d,{'val':JSON[_0x4d7804(0x127)](_0x1456d7),'ack':!![]}),_0x28d96d&&await _0x32d1ba[_0x4d7804(0x104)]('analysis.energy.rlPenalties',{'val':JSON[_0x4d7804(0x127)](_0x2aef7b),'ack':!![]});}catch(_0x42a165){}}async function applyEnergySavings(_0x3b6cab,_0x91ffd4){const _0xdbcc9c=a1_0x6c7e6a;await cleanupGhostInterventions(_0x3b6cab);if(!_0x91ffd4||_0x91ffd4[_0xdbcc9c(0x167)]===0x0)return;const _0x5a2af6=_0x3b6cab[_0xdbcc9c(0x142)][_0xdbcc9c(0x11e)]||[],_0x1f0e8d=Date[_0xdbcc9c(0x107)]();for(const _0x10635e of _0x91ffd4){const _0x39e195=_0x10635e['room'],_0x474415=_0x10635e[_0xdbcc9c(0x10e)],_0x3e78de=_0x10635e[_0xdbcc9c(0x123)]||0x15;if(lastActions['rescue_'+_0x39e195]&&_0x1f0e8d-lastActions[_0xdbcc9c(0x182)+_0x39e195]<RESCUE_LOCK_MS)continue;const _0xfb7268=_0x5a2af6[_0xdbcc9c(0x14f)](_0x5c27c4=>normalize(_0x5c27c4[_0xdbcc9c(0x145)])===normalize(_0x39e195)&&(_0x5c27c4[_0xdbcc9c(0xf9)]===_0xdbcc9c(0x131)||_0x5c27c4[_0xdbcc9c(0xf9)]===_0xdbcc9c(0x125)));if(!_0xfb7268)continue;const _0x5630de=await findRelatedId(_0x3b6cab,_0xfb7268['id'],_0xdbcc9c(0x13b));if(_0x5630de){if(lastActions[_0xdbcc9c(0x109)+_0x39e195]&&_0x1f0e8d-lastActions[_0xdbcc9c(0x109)+_0x39e195]<0x1e*0x3c*0x3e8)continue;const _0xb1b29e=await _0x3b6cab[_0xdbcc9c(0xf3)](_0x5630de);if(_0xb1b29e&&typeof _0xb1b29e[_0xdbcc9c(0xe8)]==='number'){const _0x57f85c=_0xb1b29e[_0xdbcc9c(0xe8)];_0x57f85c!==ECO_TEMP&&await manageMpcIntervention(_0x3b6cab,_0x39e195,'remove');if(_0x474415>0x1e)_0x57f85c>ECO_TEMP+0.5&&(_0x3b6cab[_0xdbcc9c(0x119)][_0xdbcc9c(0xf1)](_0xdbcc9c(0x122)+_0x39e195+'\x20auf\x20'+ECO_TEMP+_0xdbcc9c(0x178)+_0x474415+_0xdbcc9c(0x174)),await _0x3b6cab['setForeignStateAsync'](_0x5630de,ECO_TEMP),await manageMpcIntervention(_0x3b6cab,_0x39e195,_0xdbcc9c(0x11a)),lastActions['mpc_'+_0x39e195]=_0x1f0e8d,await logAutomationAction(_0x3b6cab,'[MPC]\x20'+_0x39e195+':\x20Absenkung\x20auf\x20'+ECO_TEMP+'Â°C'));else _0x474415<=0xf&&(_0x57f85c<_0x3e78de&&(_0x3b6cab['log'][_0xdbcc9c(0xf1)]('ðŸ”¥\x20[MPC\x20ACTION]\x20Heize\x20'+_0x39e195+'\x20wieder\x20auf\x20'+_0x3e78de+_0xdbcc9c(0xe2)),await _0x3b6cab[_0xdbcc9c(0x193)](_0x5630de,_0x3e78de),await manageMpcIntervention(_0x3b6cab,_0x39e195,_0xdbcc9c(0x129)),lastActions[_0xdbcc9c(0x109)+_0x39e195]=_0x1f0e8d,await logAutomationAction(_0x3b6cab,_0xdbcc9c(0x17d)+_0x39e195+_0xdbcc9c(0x163)+_0x3e78de+'Â°C')));}}else _0x3b6cab['log']['warn'](_0xdbcc9c(0x175)+_0x39e195+_0xdbcc9c(0x17f));}}module[a1_0x6c7e6a(0x12f)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};