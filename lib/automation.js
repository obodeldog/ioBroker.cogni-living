const a1_0x6206e2=a1_0x31ab;(function(_0x216305,_0x4bb4c6){const _0x577596=a1_0x31ab,_0x59b948=_0x216305();while(!![]){try{const _0x2fd034=-parseInt(_0x577596(0x118))/0x1*(parseInt(_0x577596(0x1b9))/0x2)+parseInt(_0x577596(0x14b))/0x3*(parseInt(_0x577596(0x10d))/0x4)+-parseInt(_0x577596(0x1b6))/0x5*(-parseInt(_0x577596(0x180))/0x6)+-parseInt(_0x577596(0x1a8))/0x7*(-parseInt(_0x577596(0x10f))/0x8)+parseInt(_0x577596(0x16b))/0x9*(-parseInt(_0x577596(0x19f))/0xa)+parseInt(_0x577596(0x19e))/0xb*(-parseInt(_0x577596(0x18b))/0xc)+parseInt(_0x577596(0x13e))/0xd;if(_0x2fd034===_0x4bb4c6)break;else _0x59b948['push'](_0x59b948['shift']());}catch(_0x5c6b5a){_0x59b948['push'](_0x59b948['shift']());}}}(a1_0x2cb5,0x6b669));const a1_0x2bc874=(function(){let _0x5eaa4d=!![];return function(_0x21820b,_0x250ce9){const _0x2985fd=_0x5eaa4d?function(){if(_0x250ce9){const _0x2dccdb=_0x250ce9['apply'](_0x21820b,arguments);return _0x250ce9=null,_0x2dccdb;}}:function(){};return _0x5eaa4d=![],_0x2985fd;};}()),a1_0x21eed7=a1_0x2bc874(this,function(){const _0x38a642=a1_0x31ab;return a1_0x21eed7[_0x38a642(0x12d)]()[_0x38a642(0x1c4)](_0x38a642(0x14c))[_0x38a642(0x12d)]()['constructor'](a1_0x21eed7)[_0x38a642(0x1c4)]('(((.+)+)+)+$');});a1_0x21eed7();'use strict';const aiAgent=require(a1_0x6206e2(0x173)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x3fe3bb){const _0x320359=a1_0x6206e2;if(!_0x3fe3bb)return'';return _0x3fe3bb['toLowerCase']()[_0x320359(0x1a5)](/\s+/g,'')[_0x320359(0x14a)]();}function getWarmupRobust(_0x5a80db,_0x41d7d2){const _0x5f4108=a1_0x6206e2;if(!_0x5a80db||!_0x41d7d2)return 0x3c;if(_0x5a80db[_0x41d7d2]!==undefined)return _0x5a80db[_0x41d7d2];const _0x288c6e=_0x41d7d2[_0x5f4108(0x17c)]()[_0x5f4108(0x1a5)](/√§/g,'ae')[_0x5f4108(0x1a5)](/√∂/g,'oe')[_0x5f4108(0x1a5)](/√º/g,'ue')[_0x5f4108(0x1a5)](/√ü/g,'ss')[_0x5f4108(0x1a5)](/\s+/g,'_')['replace'](/[^a-z0-9_]/g,'');if(_0x5a80db[_0x288c6e]!==undefined)return _0x5a80db[_0x288c6e];return 0x3c;}async function logAutomationAction(_0x58e6f3,_0x296ed6){const _0x5dfc92=a1_0x6206e2;await _0x58e6f3[_0x5dfc92(0x14f)](_0x5dfc92(0x14e),{'val':_0x296ed6,'ack':!![]});try{const _0x2ba461=_0x5dfc92(0x131),_0x1a880b=await _0x58e6f3[_0x5dfc92(0x198)](_0x2ba461);let _0x2329e7=[];if(_0x1a880b&&_0x1a880b['val'])try{_0x2329e7=JSON['parse'](_0x1a880b['val']);}catch(_0x1f5b8f){}_0x2329e7[_0x5dfc92(0x15a)]({'ts':Date[_0x5dfc92(0x15c)](),'msg':_0x296ed6});if(_0x2329e7[_0x5dfc92(0x176)]>0x32)_0x2329e7=_0x2329e7['slice'](0x0,0x32);await _0x58e6f3['setStateAsync'](_0x2ba461,{'val':JSON[_0x5dfc92(0x188)](_0x2329e7),'ack':!![]});}catch(_0x24df76){}}async function handlePrediction(_0x2586b9,_0x4fd52d,_0x3081f2){const _0x445946=a1_0x6206e2;if(!_0x4fd52d||_0x4fd52d===_0x445946(0x1c9))return;let _0xd05fa9=_0x445946(0x119),_0x3c854b=0.6;try{const _0x2e1278=await _0x2586b9[_0x445946(0x198)](_0x445946(0x197));if(_0x2e1278&&_0x2e1278[_0x445946(0x17b)])_0xd05fa9=_0x2e1278[_0x445946(0x17b)];const _0xd2bc85=await _0x2586b9['getStateAsync']('analysis.automation.confidenceThreshold');if(_0xd2bc85&&_0xd2bc85['val'])_0x3c854b=_0xd2bc85[_0x445946(0x17b)];}catch(_0x4e7306){}if(_0xd05fa9===_0x445946(0x119)||_0x3081f2<_0x3c854b)return;const _0x333c46=Date[_0x445946(0x15c)]();if(lastActions[_0x4fd52d]&&_0x333c46-lastActions[_0x4fd52d]<COOLDOWN_MS)return;const _0x4dd26b=_0x2586b9[_0x445946(0x17f)][_0x445946(0x108)]||[],_0x5aed45=normalize(_0x4fd52d),_0x33731e=_0x4dd26b['find'](_0x260b68=>normalize(_0x260b68[_0x445946(0x167)])===_0x5aed45&&(_0x260b68[_0x445946(0x155)]===_0x445946(0x112)||_0x260b68[_0x445946(0x155)]===_0x445946(0x147)||_0x260b68[_0x445946(0x155)]===_0x445946(0x199)));if(!_0x33731e)return;const _0x16f4a4=await aiAgent['consultButler'](_0x2586b9,_0x4fd52d,_0x33731e['name'],_0x3081f2);if(!_0x16f4a4[_0x445946(0x1c3)])return;const _0x3cdd78='Pr√§diktion:\x20'+_0x4fd52d+_0x445946(0x1a7)+_0x33731e[_0x445946(0x158)]+'\x20('+_0x16f4a4['reason']+')';await logAutomationAction(_0x2586b9,'['+_0xd05fa9[_0x445946(0x109)]()+']\x20'+_0x3cdd78);if(_0xd05fa9===_0x445946(0x135)){const _0x57469c=await _0x2586b9[_0x445946(0x18f)](_0x33731e['id']);(!_0x57469c||!_0x57469c[_0x445946(0x17b)]&&_0x57469c['val']!==!![])&&await _0x2586b9['setForeignStateAsync'](_0x33731e['id'],!![]),lastActions[_0x4fd52d]=_0x333c46;}}function a1_0x2cb5(){const _0x56d5a0=['¬∞C.','690zUDRCb','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','string','25792xwVZcf','üßπ\x20[MPC\x20CLEANUP]\x20','üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20','PERFECT','findIndex','_meta','ankunft','score','üö®\x20[MPC\x20WATCHDOG]\x20','temperature','approved','search','¬∞C\x20(via\x20','üìÖ\x20[MPC\x20INFO]\x20','analysis.energy.activeEnforcements','unit','Unknown','Calendar\x20Check\x20Error:\x20','SET','[MPC]\x20','log','[FORCE]\x20','\x27\x20(Match:\x20','.1.ACTUAL_TEMPERATURE','level.valve','\x20auf\x20','until','devices','toUpperCase','local_temperature','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','push','2831396sjGZmj','currentSystemMode','410904OVEtnR','¬∞C).\x20Sparmodus\x20beendet!','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','light','getForeignObjectAsync','.4.SET_TEMPERATURE','filter','occupied_heating_setpoint','level','15LKLftv','off','minutes_safe','analysis.energy.ventilationAlerts','analysis.energy.rlPenalties','date','map','Fehlt','thermostatMapping','valve_position','SET_POINT_TEMPERATURE','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','number','openknx','split','forEach','¬∞C\x20(Kalender-Schutz)','room','\x20min)','Unbekannt','mpc_','toString','Ist','too_cold','parse','analysis.automation.actionLog','.4.VALVE_STATE','eventStart','manual','active','triggerTime','¬∞C\x20<\x20','\x20erreicht\x20Limit\x20(','default','sendToPythonWrapper','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','¬∞C!\x20(Puffer\x20leer).','write','987168HgAVrr','_date','.1.TEMPERATURE','useCalendar','open','setForeignStateAsync','event','analysis.energy.warmupTimes','\x20min).','dimmer','localeCompare','slice','trim','3PVmGyh','(((.+)+)+)+$','rescue_','analysis.automation.lastAction','setStateAsync','add','find','ACTUAL_TEMPERATURE','temp','actual','type','set',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','name','calendarInstance','unshift','exports','now','thermostat','target_temperature','¬∞C\x20(nicht\x20','value.valve','includes','system.mode','r√ºckkehr','common','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','level.temperature','location',')\x20aktiv.\x20Heize\x20auf\x20','summary','analysis.energy.mpcActiveInterventions','71901pUOXRf','urlaub\x20ende','Enforcement\x20Monitor\x20Error:\x20','Nicht\x20gefunden','¬∞C\x20(Vorlauf:\x20','Manuelles\x20Mapping','[WATCHDOG]\x20','normal','./ai_agent','isArray','valveMapping','length','[CAL]\x20','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','¬∞C).\x20Entferne\x20Status.',':\x20Aufheizen\x20auf\x20','val','toLowerCase','messwert','entries','config','12894sMMjME','state','target','analysis.energy.warmupSources','¬∞C\x20->\x20','contact','sensor','Soll','stringify','remove','abs','3427212gtuHGI','üìÖ\x20SMART\x20SCHEDULE\x20[','info','cal_','getForeignStateAsync','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','current_heating_setpoint','wert','\x20wieder\x20auf\x20','valve','getTime','stellwert','analysis.automation.mode','getStateAsync','switch','_calName','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','message','calendarSelection','33wIrwCb','580FDcyth','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','getHours','\x20->\x20','from','analysis.energy.warmupTargets','replace','values','\x20->\x20Schalte\x20','119FskNwU','splice','setpoint','.data.table','soll','thermostat.setpoint','Auto-Erkennung','.1.LEVEL','.1.SET_POINT_TEMPERATURE','¬∞C!\x20(Puffer:\x20',']:\x20Raum-Trigger\x20\x27','\x20ist\x20auf\x20','warn'];a1_0x2cb5=function(){return _0x56d5a0;};return a1_0x2cb5();}async function findRelatedId(_0x54ade5,_0x2a051a,_0x3b81d0=a1_0x6206e2(0x1aa)){const _0x1b37c2=a1_0x6206e2;if(_0x3b81d0===_0x1b37c2(0x1aa)&&_0x54ade5[_0x1b37c2(0x17f)][_0x1b37c2(0x120)]){let _0x4b21d9=_0x54ade5['config'][_0x1b37c2(0x120)];if(typeof _0x4b21d9==='string')try{_0x4b21d9=JSON[_0x1b37c2(0x130)](_0x4b21d9);}catch(_0x2caf05){}if(_0x4b21d9&&_0x4b21d9[_0x2a051a])return _0x4b21d9[_0x2a051a];}if(_0x3b81d0===_0x1b37c2(0x194)&&_0x54ade5[_0x1b37c2(0x17f)][_0x1b37c2(0x175)]){let _0x406ee2=_0x54ade5['config'][_0x1b37c2(0x175)];if(typeof _0x406ee2===_0x1b37c2(0x1b8))try{_0x406ee2=JSON[_0x1b37c2(0x130)](_0x406ee2);}catch(_0x558380){}if(_0x406ee2&&_0x406ee2[_0x2a051a])return _0x406ee2[_0x2a051a];}let _0x18d2c2=[];if(_0x3b81d0===_0x1b37c2(0x1aa))_0x18d2c2=[{'s':_0x1b37c2(0x1d0),'t':_0x1b37c2(0x1b0)},{'s':_0x1b37c2(0x140),'t':_0x1b37c2(0x1b0)},{'s':'.1.TEMPERATURE','t':_0x1b37c2(0x114)},{'s':_0x1b37c2(0x152),'t':_0x1b37c2(0x122)},{'s':_0x1b37c2(0x10a),'t':_0x1b37c2(0x116)},{'s':_0x1b37c2(0x10a),'t':_0x1b37c2(0x191)},{'s':_0x1b37c2(0x1c2),'t':_0x1b37c2(0x15e)},{'s':'ACTUAL','t':_0x1b37c2(0x1cb)},{'s':_0x1b37c2(0x12e),'t':_0x1b37c2(0x187)},{'s':'temperature','t':_0x1b37c2(0x1aa)}];else _0x3b81d0===_0x1b37c2(0x194)&&(_0x18d2c2=[{'s':'.1.ACTUAL_TEMPERATURE','t':'.1.LEVEL'},{'s':_0x1b37c2(0x140),'t':_0x1b37c2(0x1af)},{'s':_0x1b37c2(0x140),'t':_0x1b37c2(0x132)},{'s':_0x1b37c2(0x10a),'t':'pi_heating_demand'},{'s':_0x1b37c2(0x1c2),'t':_0x1b37c2(0x121)},{'s':_0x1b37c2(0x1c2),'t':_0x1b37c2(0x117)}]);for(const _0x42e162 of _0x18d2c2){if(_0x2a051a[_0x1b37c2(0x161)](_0x42e162['s'])){const _0x49831b=_0x2a051a[_0x1b37c2(0x1a5)](_0x42e162['s'],_0x42e162['t']),_0x335555=await _0x54ade5[_0x1b37c2(0x113)](_0x49831b);if(_0x335555)return _0x49831b;}}try{const _0x4fe477=_0x2a051a[_0x1b37c2(0x126)]('.');if(_0x4fe477['length']>0x2){const _0xfb3063=_0x4fe477['slice'](0x0,-0x1)['join']('.'),_0x25df1f=await _0x54ade5['getForeignObjectsAsync'](_0xfb3063+'.*'),_0x274ded=[],_0x12384e=_0x2a051a[_0x1b37c2(0x126)](/[._]+/)['filter'](_0x18790d=>![_0x1b37c2(0x125),'0','hm-rpc','ist',_0x1b37c2(0x192),_0x1b37c2(0x1c2),_0x1b37c2(0x154),_0x1b37c2(0x186),_0x1b37c2(0x17d),_0x1b37c2(0x181)]['includes'](_0x18790d['toLowerCase']()));for(const [_0x3c68c2,_0x300d49]of Object['entries'](_0x25df1f)){if(_0x3c68c2===_0x2a051a)continue;if(_0x300d49&&_0x300d49[_0x1b37c2(0x164)]){const _0x57324e=_0x3c68c2[_0x1b37c2(0x17c)](),_0x460458=(_0x300d49[_0x1b37c2(0x164)]['role']||'')[_0x1b37c2(0x17c)](),_0x18c53b=(_0x300d49[_0x1b37c2(0x164)][_0x1b37c2(0x1c8)]||'')['toLowerCase']();let _0x19c01c=![];if(_0x3b81d0===_0x1b37c2(0x1aa)&&_0x300d49['common'][_0x1b37c2(0x13d)]===!![])_0x19c01c=_0x57324e['includes'](_0x1b37c2(0x156))||_0x57324e['includes'](_0x1b37c2(0x1ac))||_0x57324e['includes'](_0x1b37c2(0x182))||_0x460458[_0x1b37c2(0x161)](_0x1b37c2(0x166))||_0x460458[_0x1b37c2(0x161)](_0x1b37c2(0x1ad));else _0x3b81d0==='valve'&&(_0x19c01c=_0x57324e[_0x1b37c2(0x161)](_0x1b37c2(0x117))||_0x57324e['includes'](_0x1b37c2(0x194))||_0x57324e[_0x1b37c2(0x161)](_0x1b37c2(0x196))||_0x57324e[_0x1b37c2(0x161)]('position')||_0x460458[_0x1b37c2(0x161)](_0x1b37c2(0x1d1))||_0x460458[_0x1b37c2(0x161)](_0x1b37c2(0x160))||_0x18c53b[_0x1b37c2(0x161)]('%'));if(_0x19c01c){const _0x12fb64=_0x3c68c2[_0x1b37c2(0x126)](/[._]+/)[_0x1b37c2(0x11e)](_0x244ef7=>_0x244ef7[_0x1b37c2(0x17c)]());let _0x3682d9=0x0;_0x12384e[_0x1b37c2(0x127)](_0xdf5fb5=>{const _0xbb5dd7=_0x1b37c2;if(_0x12fb64[_0xbb5dd7(0x161)](_0xdf5fb5[_0xbb5dd7(0x17c)]()))_0x3682d9++;}),_0x274ded[_0x1b37c2(0x10c)]({'id':_0x3c68c2,'score':_0x3682d9});}}}if(_0x274ded[_0x1b37c2(0x176)]>0x0){_0x274ded['sort']((_0xbd680f,_0x368979)=>_0x368979[_0x1b37c2(0x1c0)]-_0xbd680f[_0x1b37c2(0x1c0)]);if(_0x274ded[0x0][_0x1b37c2(0x1c0)]>0x0)return _0x274ded[0x0]['id'];}}}catch(_0x557daa){}return null;}async function scanThermostats(_0x45e934){const _0x35f6e5=a1_0x6206e2,_0x5484e6=_0x45e934[_0x35f6e5(0x17f)][_0x35f6e5(0x108)]||[],_0x5a44aa=[],_0x446114=_0x5484e6[_0x35f6e5(0x115)](_0x197afa=>_0x197afa['id']&&_0x197afa['id']['includes'](_0x35f6e5(0x1c2))||_0x197afa[_0x35f6e5(0x155)]&&[_0x35f6e5(0x1c2),_0x35f6e5(0x15d),_0x35f6e5(0x186)]['includes'](_0x197afa[_0x35f6e5(0x155)])||_0x197afa[_0x35f6e5(0x158)]&&_0x197afa['name'][_0x35f6e5(0x17c)]()['includes'](_0x35f6e5(0x153)));for(const _0x3e2298 of _0x446114){const _0x4db845=await findRelatedId(_0x45e934,_0x3e2298['id'],_0x35f6e5(0x1aa)),_0x1d4b2c=await findRelatedId(_0x45e934,_0x3e2298['id'],'valve');let _0x3430f9=_0x35f6e5(0x16e),_0x56b110=![],_0x3167ef=_0x45e934[_0x35f6e5(0x17f)][_0x35f6e5(0x120)]||{};if(typeof _0x3167ef==='string')try{_0x3167ef=JSON[_0x35f6e5(0x130)](_0x3167ef);}catch(_0xb23688){}let _0x13a001=_0x45e934[_0x35f6e5(0x17f)]['valveMapping']||{};if(typeof _0x13a001==='string')try{_0x13a001=JSON[_0x35f6e5(0x130)](_0x13a001);}catch(_0x44d782){}if(_0x3167ef[_0x3e2298['id']]&&_0x3167ef[_0x3e2298['id']]===_0x4db845||_0x13a001[_0x3e2298['id']]&&_0x13a001[_0x3e2298['id']]===_0x1d4b2c)_0x3430f9=_0x35f6e5(0x170),_0x56b110=!![];else(_0x4db845||_0x1d4b2c)&&(_0x3430f9=_0x35f6e5(0x1ae));_0x5a44aa[_0x35f6e5(0x10c)]({'room':_0x3e2298[_0x35f6e5(0x167)]||'Unbekannt','sensorId':_0x3e2298['id'],'setpointId':_0x4db845||'-','valveId':_0x1d4b2c||'-','source':_0x3430f9,'isManual':_0x56b110,'status':_0x4db845&&_0x1d4b2c?_0x35f6e5(0x1bc):_0x4db845?'OK':_0x35f6e5(0x11f)});}return _0x5a44aa['sort']((_0x45ae4d,_0x46c48e)=>_0x45ae4d[_0x35f6e5(0x129)][_0x35f6e5(0x148)](_0x46c48e['room']));}async function updateSchedulePreview(_0x55a55d){const _0x59b61f=a1_0x6206e2;if(!_0x55a55d[_0x59b61f(0x17f)]['useCalendar']||!_0x55a55d[_0x59b61f(0x17f)]['calendarInstance'])return;let _0x1151bb={};try{const _0xadbe36=await _0x55a55d['getStateAsync']('analysis.energy.warmupTimes');if(_0xadbe36&&_0xadbe36[_0x59b61f(0x17b)])_0x1151bb=JSON[_0x59b61f(0x130)](_0xadbe36[_0x59b61f(0x17b)]);}catch(_0x1ade5e){}const _0x5653cd=[],_0x2b0079=Date['now'](),_0x2fa16f=0x30*0x3c*0x3c*0x3e8;try{const _0x2c69d9=await _0x55a55d[_0x59b61f(0x18f)](_0x55a55d[_0x59b61f(0x17f)][_0x59b61f(0x159)]+_0x59b61f(0x1ab));if(!_0x2c69d9||!_0x2c69d9[_0x59b61f(0x17b)])return;const _0x4a9ef1=JSON['parse'](_0x2c69d9['val']),_0xf55ff6=_0x55a55d[_0x59b61f(0x17f)][_0x59b61f(0x19d)]||[],_0x47f56e=_0x55a55d[_0x59b61f(0x17f)][_0x59b61f(0x108)]||[],_0x34392f=new Set();_0x47f56e['forEach'](_0x1a54d7=>{const _0x4e011e=_0x59b61f;if(_0x1a54d7[_0x4e011e(0x167)])_0x34392f['add'](_0x1a54d7[_0x4e011e(0x167)]);});for(const _0x3a3d64 of _0x4a9ef1){if(_0x3a3d64[_0x59b61f(0x19a)]&&_0xf55ff6[_0x59b61f(0x176)]>0x0&&!_0xf55ff6[_0x59b61f(0x161)](_0x3a3d64[_0x59b61f(0x19a)]))continue;const _0x40b2d4=_0x3a3d64[_0x59b61f(0x13f)]||_0x3a3d64['eventStart']||_0x3a3d64[_0x59b61f(0x11d)];if(!_0x40b2d4)continue;const _0x2fb15b=new Date(_0x40b2d4),_0x442860=_0x2fb15b[_0x59b61f(0x195)]();if(isNaN(_0x442860))continue;if(_0x442860<_0x2b0079)continue;if(_0x442860>_0x2b0079+_0x2fa16f)continue;const _0xc01663=(_0x3a3d64[_0x59b61f(0x144)]||_0x3a3d64[_0x59b61f(0x169)]||'')[_0x59b61f(0x17c)]();let _0x4f008a=![],_0x1af574=[],_0x39390c=_0x3a3d64[_0x59b61f(0x144)]||_0x3a3d64['summary']||_0x59b61f(0x12b);if(_0xc01663[_0x59b61f(0x161)](_0x59b61f(0x16c))||_0xc01663[_0x59b61f(0x161)](_0x59b61f(0x163))||_0xc01663['includes'](_0x59b61f(0x1bf)))_0x4f008a=!![],_0x1af574=Array[_0x59b61f(0x1a3)](_0x34392f);else for(const _0x218591 of _0x34392f){if(_0xc01663[_0x59b61f(0x161)](_0x218591[_0x59b61f(0x17c)]()))_0x1af574[_0x59b61f(0x10c)](_0x218591);}_0x1af574[_0x59b61f(0x176)]>0x0&&_0x1af574[_0x59b61f(0x127)](_0x4c9d5d=>{const _0x49678a=_0x59b61f;let _0x304b75=0x3c;if(_0x4f008a){let _0x4b8882=0x0;Object['values'](_0x1151bb)['forEach'](_0x1924cb=>{if(_0x1924cb>_0x4b8882)_0x4b8882=_0x1924cb;}),_0x304b75=_0x4b8882>0x0?_0x4b8882:0x78;}else _0x304b75=getWarmupRobust(_0x1151bb,_0x4c9d5d);const _0x497cc9=new Date(_0x442860-_0x304b75*0xea60);_0x5653cd[_0x49678a(0x10c)]({'eventTime':_0x442860,'triggerTime':_0x497cc9[_0x49678a(0x195)](),'room':_0x4c9d5d,'minutes':_0x304b75,'reason':_0x39390c,'isGlobal':_0x4f008a});});}}catch(_0x276624){}_0x5653cd['sort']((_0x5cde38,_0x1ba6b7)=>_0x5cde38[_0x59b61f(0x136)]-_0x1ba6b7['triggerTime']);const _0x268252=_0x5653cd[_0x59b61f(0x149)](0x0,0x5);await _0x55a55d['setStateAsync']('analysis.energy.schedulePreview',{'val':JSON[_0x59b61f(0x188)](_0x268252),'ack':!![]});}async function monitorEnforcements(_0x125fcf){const _0x258213=a1_0x6206e2;try{const _0xb3ca15='analysis.energy.activeEnforcements',_0x2f2c12=await _0x125fcf[_0x258213(0x198)](_0xb3ca15);if(!_0x2f2c12||!_0x2f2c12[_0x258213(0x17b)])return;let _0x1e9299=[];try{_0x1e9299=JSON[_0x258213(0x130)](_0x2f2c12['val']);}catch(_0x18742a){return;}if(!Array[_0x258213(0x174)](_0x1e9299)||_0x1e9299[_0x258213(0x176)]===0x0)return;const _0x5af0cd=Date[_0x258213(0x15c)](),_0x5c810d=_0x125fcf['config'][_0x258213(0x108)]||[];let _0x54fa30=![];for(let _0x7247b8=_0x1e9299[_0x258213(0x176)]-0x1;_0x7247b8>=0x0;_0x7247b8--){const _0x51558a=_0x1e9299[_0x7247b8];if(_0x5af0cd>=_0x51558a[_0x258213(0x107)]){_0x125fcf[_0x258213(0x1cd)][_0x258213(0x18d)](_0x258213(0x1b7)+_0x51558a[_0x258213(0x129)]+_0x258213(0x123)),_0x1e9299['splice'](_0x7247b8,0x1),_0x54fa30=!![];continue;}const _0x20c00e=_0x5c810d[_0x258213(0x151)](_0x464d43=>normalize(_0x464d43[_0x258213(0x167)])===normalize(_0x51558a[_0x258213(0x129)])&&(_0x464d43[_0x258213(0x155)]===_0x258213(0x1c2)||_0x464d43['type']===_0x258213(0x15d)));if(_0x20c00e){const _0xffcd64=await findRelatedId(_0x125fcf,_0x20c00e['id'],_0x258213(0x1aa));if(_0xffcd64){const _0x5d1623=await _0x125fcf[_0x258213(0x18f)](_0xffcd64);_0x5d1623&&typeof _0x5d1623[_0x258213(0x17b)]===_0x258213(0x124)&&(_0x5d1623['val']<0xf&&(_0x125fcf[_0x258213(0x1cd)]['warn'](_0x258213(0x111)+_0x51558a[_0x258213(0x129)]+'\x20auf\x20'+_0x5d1623[_0x258213(0x17b)]+_0x258213(0x178)+_0x51558a[_0x258213(0x182)]+_0x258213(0x1b5)),await _0x125fcf['setForeignStateAsync'](_0xffcd64,_0x51558a[_0x258213(0x182)]),await logAutomationAction(_0x125fcf,_0x258213(0x1ce)+_0x51558a[_0x258213(0x129)]+':\x20'+_0x5d1623[_0x258213(0x17b)]+_0x258213(0x184)+_0x51558a[_0x258213(0x182)]+_0x258213(0x128))));}}}_0x54fa30&&await _0x125fcf[_0x258213(0x14f)](_0xb3ca15,{'val':JSON[_0x258213(0x188)](_0x1e9299),'ack':!![]});}catch(_0x4d174e){_0x125fcf[_0x258213(0x1cd)]['error'](_0x258213(0x16d)+_0x4d174e[_0x258213(0x19c)]);}}async function checkCalendarTriggers(_0x5a182c){const _0x5b7efc=a1_0x6206e2;if(!_0x5a182c['config'][_0x5b7efc(0x141)]||!_0x5a182c[_0x5b7efc(0x17f)]['calendarInstance'])return;await updateSchedulePreview(_0x5a182c);let _0x2fea2d={},_0x1d23e5={};try{const _0x1d9e65=await _0x5a182c[_0x5b7efc(0x198)](_0x5b7efc(0x145));if(_0x1d9e65&&_0x1d9e65[_0x5b7efc(0x17b)])_0x2fea2d=JSON[_0x5b7efc(0x130)](_0x1d9e65[_0x5b7efc(0x17b)]);const _0x4f8a15=await _0x5a182c['getStateAsync'](_0x5b7efc(0x183));if(_0x4f8a15&&_0x4f8a15['val'])_0x1d23e5=JSON[_0x5b7efc(0x130)](_0x4f8a15[_0x5b7efc(0x17b)]);}catch(_0x1fbdf4){}let _0x1fa9b4={'default':0x15};try{const _0x298686=await _0x5a182c[_0x5b7efc(0x198)](_0x5b7efc(0x1a4));if(_0x298686&&_0x298686[_0x5b7efc(0x17b)])_0x1fa9b4=JSON[_0x5b7efc(0x130)](_0x298686['val']);}catch(_0x1deccc){}let _0x477809=[];try{const _0x55bbec=await _0x5a182c[_0x5b7efc(0x198)](_0x5b7efc(0x1c7));if(_0x55bbec&&_0x55bbec[_0x5b7efc(0x17b)])_0x477809=JSON[_0x5b7efc(0x130)](_0x55bbec[_0x5b7efc(0x17b)]);}catch(_0x4b817b){}try{const _0x7f340b=await _0x5a182c[_0x5b7efc(0x18f)](_0x5a182c[_0x5b7efc(0x17f)][_0x5b7efc(0x159)]+'.data.table');if(!_0x7f340b||!_0x7f340b['val'])return;const _0x268e41=JSON[_0x5b7efc(0x130)](_0x7f340b[_0x5b7efc(0x17b)]),_0x98caa7=Date[_0x5b7efc(0x15c)](),_0x4211cf=_0x5a182c['config'][_0x5b7efc(0x108)]||[],_0x5e01a0=_0x5a182c[_0x5b7efc(0x17f)][_0x5b7efc(0x19d)]||[];let _0x122a65=![];for(const _0x50a5fc of _0x268e41){if(_0x50a5fc[_0x5b7efc(0x19a)]&&_0x5e01a0['length']>0x0&&!_0x5e01a0[_0x5b7efc(0x161)](_0x50a5fc['_calName']))continue;const _0x32c70e=_0x50a5fc['_date']||_0x50a5fc[_0x5b7efc(0x133)]||_0x50a5fc[_0x5b7efc(0x11d)];if(!_0x32c70e)continue;const _0x57a9cd=new Date(_0x32c70e);if(isNaN(_0x57a9cd[_0x5b7efc(0x195)]()))continue;const _0x4861a1=(_0x50a5fc[_0x5b7efc(0x144)]||_0x50a5fc['summary']||'')[_0x5b7efc(0x17c)]();if(_0x4861a1[_0x5b7efc(0x161)](_0x5b7efc(0x16c))||_0x4861a1[_0x5b7efc(0x161)](_0x5b7efc(0x163))||_0x4861a1[_0x5b7efc(0x161)](_0x5b7efc(0x1bf))){let _0x456031=0x0;Object[_0x5b7efc(0x1a6)](_0x2fea2d)[_0x5b7efc(0x127)](_0x4d802b=>{if(_0x4d802b>_0x456031)_0x456031=_0x4d802b;});if(_0x456031===0x0)_0x456031=0x78;const _0x50ef15=_0x57a9cd[_0x5b7efc(0x195)]()-_0x456031*0xea60;_0x98caa7>=_0x50ef15&&_0x98caa7<_0x57a9cd[_0x5b7efc(0x195)]()&&(_0x5a182c[_0x5b7efc(0x10e)]!=='normal'&&(_0x5a182c[_0x5b7efc(0x1cd)][_0x5b7efc(0x18d)](_0x5b7efc(0x190)+_0x456031+_0x5b7efc(0x146)),await _0x5a182c[_0x5b7efc(0x14f)](_0x5b7efc(0x162),{'val':_0x5b7efc(0x172),'ack':![]})));}for(const _0x2bb76b of _0x4211cf){if(_0x2bb76b['location']){const _0x4d7f07=_0x2bb76b[_0x5b7efc(0x167)][_0x5b7efc(0x17c)](),_0x32c475=(_0x2bb76b[_0x5b7efc(0x158)]||'')[_0x5b7efc(0x17c)]();let _0x41c6ab=_0x4861a1[_0x5b7efc(0x161)](_0x4d7f07);!_0x41c6ab&&_0x32c475[_0x5b7efc(0x176)]>0x3&&_0x4861a1[_0x5b7efc(0x161)](_0x32c475)&&(_0x41c6ab=!![]);if(_0x41c6ab){const _0x223df6=getWarmupRobust(_0x2fea2d,_0x2bb76b[_0x5b7efc(0x167)]),_0xf350f3=_0x1d23e5[_0x2bb76b[_0x5b7efc(0x167)]]||'Classic',_0x1cbd42=_0x57a9cd[_0x5b7efc(0x195)]()-_0x223df6*0xea60;if(_0x98caa7>=_0x1cbd42&&_0x98caa7<_0x57a9cd[_0x5b7efc(0x195)]()){const _0x333055=lastActions[_0x5b7efc(0x18e)+_0x2bb76b[_0x5b7efc(0x167)]];if(_0x333055&&_0x98caa7-_0x333055<CAL_COOLDOWN_MS)continue;const _0x5124b2=await findRelatedId(_0x5a182c,_0x2bb76b['id'],_0x5b7efc(0x1aa));if(_0x5124b2){let _0x3902ab=_0x1fa9b4[_0x2bb76b[_0x5b7efc(0x167)]];if(_0x3902ab===undefined)_0x3902ab=_0x1fa9b4['default'];if(_0x3902ab===undefined)_0x3902ab=0x15;const _0x48ae67=await _0x5a182c[_0x5b7efc(0x18f)](_0x5124b2);if(_0x48ae67&&typeof _0x48ae67[_0x5b7efc(0x17b)]===_0x5b7efc(0x124)&&_0x48ae67[_0x5b7efc(0x17b)]<_0x3902ab-0.5){_0x5a182c[_0x5b7efc(0x1cd)][_0x5b7efc(0x18d)](_0x5b7efc(0x18c)+_0xf350f3+_0x5b7efc(0x1b2)+_0x2bb76b[_0x5b7efc(0x167)]+_0x5b7efc(0x1cf)+_0x4861a1+_0x5b7efc(0x168)+_0x3902ab+_0x5b7efc(0x16f)+_0x223df6+_0x5b7efc(0x146)),await _0x5a182c[_0x5b7efc(0x143)](_0x5124b2,_0x3902ab),await logAutomationAction(_0x5a182c,_0x5b7efc(0x177)+_0x2bb76b['location']+_0x5b7efc(0x1a2)+_0x3902ab+_0x5b7efc(0x1c5)+_0xf350f3+')'),lastActions['cal_'+_0x2bb76b[_0x5b7efc(0x167)]]=_0x98caa7;const _0x2fc3ff=_0x477809[_0x5b7efc(0x1bd)](_0x5a2ea6=>_0x5a2ea6[_0x5b7efc(0x129)]===_0x2bb76b[_0x5b7efc(0x167)]);if(_0x2fc3ff!==-0x1)_0x477809['splice'](_0x2fc3ff,0x1);_0x477809['push']({'room':_0x2bb76b['location'],'target':_0x3902ab,'until':_0x57a9cd[_0x5b7efc(0x195)]()}),_0x122a65=!![];}}}}}}}_0x122a65&&await _0x5a182c[_0x5b7efc(0x14f)](_0x5b7efc(0x1c7),{'val':JSON[_0x5b7efc(0x188)](_0x477809),'ack':!![]});}catch(_0x31f674){_0x5a182c[_0x5b7efc(0x1cd)][_0x5b7efc(0x1b4)](_0x5b7efc(0x1ca)+_0x31f674[_0x5b7efc(0x19c)]);}}function a1_0x31ab(_0x5092f2,_0x444e83){const _0x5d06ea=a1_0x2cb5();return a1_0x31ab=function(_0x21eed7,_0x2bc874){_0x21eed7=_0x21eed7-0x107;let _0x2cb5d6=_0x5d06ea[_0x21eed7];return _0x2cb5d6;},a1_0x31ab(_0x5092f2,_0x444e83);}async function manageMpcIntervention(_0x56f825,_0x3c955c,_0x2e3e7d){const _0x188da9=a1_0x6206e2;try{const _0x53036e='analysis.energy.mpcActiveInterventions',_0xa5a54a=await _0x56f825[_0x188da9(0x198)](_0x53036e);let _0x161aef=[];if(_0xa5a54a&&_0xa5a54a[_0x188da9(0x17b)])try{_0x161aef=JSON[_0x188da9(0x130)](_0xa5a54a[_0x188da9(0x17b)]);}catch(_0x2b86e3){}const _0x4d3e69=_0x161aef['indexOf'](_0x3c955c);if(_0x2e3e7d===_0x188da9(0x150))_0x4d3e69===-0x1&&(_0x161aef[_0x188da9(0x10c)](_0x3c955c),await _0x56f825[_0x188da9(0x14f)](_0x53036e,{'val':JSON[_0x188da9(0x188)](_0x161aef),'ack':!![]}));else _0x2e3e7d===_0x188da9(0x189)&&(_0x4d3e69!==-0x1&&(_0x161aef[_0x188da9(0x1a9)](_0x4d3e69,0x1),await _0x56f825[_0x188da9(0x14f)](_0x53036e,{'val':JSON[_0x188da9(0x188)](_0x161aef),'ack':!![]})));}catch(_0x4af5b1){}}async function cleanupGhostInterventions(_0x2f92af){const _0x2843e3=a1_0x6206e2;try{const _0x15d4d9=_0x2843e3(0x16a),_0x1f4477=await _0x2f92af[_0x2843e3(0x198)](_0x15d4d9);if(!_0x1f4477||!_0x1f4477[_0x2843e3(0x17b)])return;const _0xb30cf=JSON[_0x2843e3(0x130)](_0x1f4477['val']);if(!Array['isArray'](_0xb30cf)||_0xb30cf[_0x2843e3(0x176)]===0x0)return;let _0x2e5fb8={'default':0x15};try{const _0x76aef5=await _0x2f92af[_0x2843e3(0x198)](_0x2843e3(0x1a4));if(_0x76aef5&&_0x76aef5[_0x2843e3(0x17b)])_0x2e5fb8=JSON[_0x2843e3(0x130)](_0x76aef5['val']);}catch(_0x597d33){}let _0x234858=[];try{const _0x3fccdf=await _0x2f92af[_0x2843e3(0x198)](_0x2843e3(0x11b));if(_0x3fccdf&&_0x3fccdf['val'])_0x234858=JSON[_0x2843e3(0x130)](_0x3fccdf[_0x2843e3(0x17b)]);}catch(_0x343868){}let _0x331bba={},_0x1ea339=![];try{const _0x53c6a6=await _0x2f92af[_0x2843e3(0x198)](_0x2843e3(0x11c));if(_0x53c6a6&&_0x53c6a6[_0x2843e3(0x17b)])_0x331bba=JSON[_0x2843e3(0x130)](_0x53c6a6[_0x2843e3(0x17b)]);}catch(_0x3742d4){}if(_0x331bba['_meta']){const _0x5b97d2=Date[_0x2843e3(0x15c)]();for(const [_0x138d59,_0x35c4ad]of Object[_0x2843e3(0x17e)](_0x331bba[_0x2843e3(0x1be)])){_0x5b97d2-_0x35c4ad>PENALTY_TTL&&(delete _0x331bba[_0x138d59],delete _0x331bba[_0x2843e3(0x1be)][_0x138d59],_0x1ea339=!![],_0x2f92af[_0x2843e3(0x1cd)][_0x2843e3(0x18d)]('üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27'+_0x138d59+_0x2843e3(0x10b)));}}const _0x3529b2=_0x2f92af[_0x2843e3(0x17f)][_0x2843e3(0x108)]||[];let _0x59f05b=![];for(let _0x2d268e=_0xb30cf[_0x2843e3(0x176)]-0x1;_0x2d268e>=0x0;_0x2d268e--){const _0x16d253=_0xb30cf[_0x2d268e],_0x5178b5=_0x3529b2[_0x2843e3(0x151)](_0x94009c=>normalize(_0x94009c[_0x2843e3(0x167)])===normalize(_0x16d253)&&(_0x94009c[_0x2843e3(0x155)]===_0x2843e3(0x1c2)||_0x94009c['type']===_0x2843e3(0x15d)));if(!_0x5178b5){_0x2f92af['log']['warn'](_0x2843e3(0x19b)+_0x16d253+'\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.'),_0xb30cf[_0x2843e3(0x1a9)](_0x2d268e,0x1),_0x59f05b=!![];continue;}if(_0x5178b5){const _0x434e87=await findRelatedId(_0x2f92af,_0x5178b5['id'],'setpoint'),_0x216096=await _0x2f92af[_0x2843e3(0x18f)](_0x5178b5['id']);if(_0x434e87){const _0x4ef0c0=await _0x2f92af['getForeignStateAsync'](_0x434e87);if(_0x4ef0c0&&typeof _0x4ef0c0['val']==='number'){let _0x4fa7fc=![],_0x435d69='';Math[_0x2843e3(0x18a)](_0x4ef0c0['val']-ECO_TEMP)>0.5&&(_0x4fa7fc=!![],_0x435d69=_0x2843e3(0x134));if(!_0x4fa7fc&&_0x216096&&typeof _0x216096['val']===_0x2843e3(0x124)){const _0x16f816=_0x2e5fb8[_0x16d253]||_0x2e5fb8[_0x2843e3(0x139)]||0x15;_0x216096[_0x2843e3(0x17b)]<_0x16f816+0.2&&(_0x4fa7fc=!![],_0x435d69=_0x2843e3(0x12f));}if(_0x4fa7fc){if(_0x435d69==='manual'){_0x2f92af['log'][_0x2843e3(0x18d)](_0x2843e3(0x1ba)+_0x16d253+_0x2843e3(0x1b3)+_0x4ef0c0[_0x2843e3(0x17b)]+_0x2843e3(0x15f)+ECO_TEMP+_0x2843e3(0x179));const _0x1a0423=lastActions[_0x2843e3(0x18e)+_0x16d253],_0x3a8f0e=_0x1a0423&&Date[_0x2843e3(0x15c)]()-_0x1a0423<0x2*0x3c*0x3e8;if(!_0x3a8f0e&&_0x4ef0c0[_0x2843e3(0x17b)]>ECO_TEMP+0.5){_0x2f92af[_0x2843e3(0x13a)]&&(_0x2f92af[_0x2843e3(0x1cd)][_0x2843e3(0x18d)](_0x2843e3(0x1a0)+_0x16d253+'\x20wurde\x20manuell\x20erh√∂ht.'),_0x2f92af[_0x2843e3(0x13a)]('TRAIN_RL_PENALTY',{'room':_0x16d253}));const _0x2fb42b=_0x16d253+'_'+new Date()[_0x2843e3(0x1a1)]();if(!_0x331bba[_0x2fb42b]){_0x331bba[_0x2fb42b]=0x1;if(!_0x331bba[_0x2843e3(0x1be)])_0x331bba['_meta']={};_0x331bba[_0x2843e3(0x1be)][_0x2fb42b]=Date[_0x2843e3(0x15c)](),_0x1ea339=!![];}}else _0x3a8f0e&&_0x2f92af['log'][_0x2843e3(0x18d)](_0x2843e3(0x1c6)+_0x16d253+'\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.');}else{if(_0x435d69===_0x2843e3(0x12f)){let _0x4eb8d5=![];if(_0x234858[_0x2843e3(0x151)](_0x2f48a3=>_0x2f48a3[_0x2843e3(0x129)]===_0x16d253))_0x4eb8d5=!![];const _0x54c7db=_0x3529b2[_0x2843e3(0x115)](_0x2cb44e=>normalize(_0x2cb44e[_0x2843e3(0x167)])===normalize(_0x16d253)&&(_0x2cb44e[_0x2843e3(0x155)]==='window'||_0x2cb44e[_0x2843e3(0x155)]===_0x2843e3(0x186)||_0x2cb44e[_0x2843e3(0x155)]===_0x2843e3(0x185)));for(const _0x54a23e of _0x54c7db){try{const _0x2f8b07=await _0x2f92af[_0x2843e3(0x18f)](_0x54a23e['id']);if(_0x2f8b07&&(_0x2f8b07['val']===!![]||_0x2f8b07[_0x2843e3(0x17b)]===0x1||String(_0x2f8b07[_0x2843e3(0x17b)])[_0x2843e3(0x17c)]()===_0x2843e3(0x142)))_0x4eb8d5=!![];}catch(_0x313f99){}}if(_0x4eb8d5)_0x2f92af[_0x2843e3(0x1cd)]['info'](_0x2843e3(0x1bb)+_0x16d253+_0x2843e3(0x165));else{const _0x2200a4=_0x2e5fb8[_0x16d253]||_0x2e5fb8[_0x2843e3(0x139)]||0x15;_0x2f92af[_0x2843e3(0x1cd)][_0x2843e3(0x18d)](_0x2843e3(0x1c1)+_0x16d253+_0x2843e3(0x138)+_0x216096[_0x2843e3(0x17b)]+_0x2843e3(0x137)+(_0x2200a4+0.2)+_0x2843e3(0x110)),await _0x2f92af[_0x2843e3(0x143)](_0x434e87,_0x2200a4),await logAutomationAction(_0x2f92af,_0x2843e3(0x171)+_0x16d253+_0x2843e3(0x157)+_0x2200a4+'¬∞C'),lastActions[_0x2843e3(0x14d)+_0x16d253]=Date['now']();}}}_0xb30cf['splice'](_0x2d268e,0x1),_0x59f05b=!![];}}}}}_0x59f05b&&await _0x2f92af[_0x2843e3(0x14f)](_0x15d4d9,{'val':JSON['stringify'](_0xb30cf),'ack':!![]}),_0x1ea339&&await _0x2f92af[_0x2843e3(0x14f)](_0x2843e3(0x11c),{'val':JSON[_0x2843e3(0x188)](_0x331bba),'ack':!![]});}catch(_0x493c04){}}async function applyEnergySavings(_0x880c3,_0x2848de){const _0x81f77d=a1_0x6206e2;await cleanupGhostInterventions(_0x880c3);if(!_0x2848de||_0x2848de[_0x81f77d(0x176)]===0x0)return;const _0x27a300=_0x880c3[_0x81f77d(0x17f)][_0x81f77d(0x108)]||[],_0x5cabb1=Date[_0x81f77d(0x15c)]();for(const _0x21f2dc of _0x2848de){const _0x19010e=_0x21f2dc[_0x81f77d(0x129)],_0x11984e=_0x21f2dc[_0x81f77d(0x11a)],_0x110918=_0x21f2dc[_0x81f77d(0x182)]||0x15;if(lastActions[_0x81f77d(0x14d)+_0x19010e]&&_0x5cabb1-lastActions[_0x81f77d(0x14d)+_0x19010e]<RESCUE_LOCK_MS)continue;const _0x3147f2=_0x27a300[_0x81f77d(0x151)](_0x44454e=>normalize(_0x44454e[_0x81f77d(0x167)])===normalize(_0x19010e)&&(_0x44454e[_0x81f77d(0x155)]===_0x81f77d(0x1c2)||_0x44454e[_0x81f77d(0x155)]===_0x81f77d(0x15d)));if(!_0x3147f2)continue;const _0x172727=await findRelatedId(_0x880c3,_0x3147f2['id'],'setpoint');if(_0x172727){if(lastActions[_0x81f77d(0x12c)+_0x19010e]&&_0x5cabb1-lastActions[_0x81f77d(0x12c)+_0x19010e]<0x1e*0x3c*0x3e8)continue;const _0x4547d1=await _0x880c3[_0x81f77d(0x18f)](_0x172727);if(_0x4547d1&&typeof _0x4547d1['val']===_0x81f77d(0x124)){const _0x4f24cb=_0x4547d1[_0x81f77d(0x17b)];_0x4f24cb!==ECO_TEMP&&await manageMpcIntervention(_0x880c3,_0x19010e,_0x81f77d(0x189));if(_0x11984e>0x1e)_0x4f24cb>ECO_TEMP+0.5&&(_0x880c3[_0x81f77d(0x1cd)][_0x81f77d(0x18d)]('üçÉ\x20[MPC\x20ACTION]\x20Senke\x20'+_0x19010e+_0x81f77d(0x1d2)+ECO_TEMP+_0x81f77d(0x1b1)+_0x11984e+_0x81f77d(0x12a)),await _0x880c3[_0x81f77d(0x143)](_0x172727,ECO_TEMP),await manageMpcIntervention(_0x880c3,_0x19010e,'add'),lastActions[_0x81f77d(0x12c)+_0x19010e]=_0x5cabb1,await logAutomationAction(_0x880c3,_0x81f77d(0x1cc)+_0x19010e+':\x20Absenkung\x20auf\x20'+ECO_TEMP+'¬∞C'));else _0x11984e<=0xf&&(_0x4f24cb<_0x110918&&(_0x880c3[_0x81f77d(0x1cd)][_0x81f77d(0x18d)]('üî•\x20[MPC\x20ACTION]\x20Heize\x20'+_0x19010e+_0x81f77d(0x193)+_0x110918+_0x81f77d(0x13c)),await _0x880c3['setForeignStateAsync'](_0x172727,_0x110918),await manageMpcIntervention(_0x880c3,_0x19010e,_0x81f77d(0x189)),lastActions[_0x81f77d(0x12c)+_0x19010e]=_0x5cabb1,await logAutomationAction(_0x880c3,_0x81f77d(0x1cc)+_0x19010e+_0x81f77d(0x17a)+_0x110918+'¬∞C')));}}else _0x880c3[_0x81f77d(0x1cd)]['warn'](_0x81f77d(0x13b)+_0x19010e+'\x20gefunden!');}}module[a1_0x6206e2(0x15b)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};