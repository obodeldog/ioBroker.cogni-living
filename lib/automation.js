const a1_0x8fd5b0=a1_0x367c;(function(_0x5e8de8,_0x5a3249){const _0x54daf9=a1_0x367c,_0x53d38f=_0x5e8de8();while(!![]){try{const _0x357aac=-parseInt(_0x54daf9(0xe2))/0x1+parseInt(_0x54daf9(0xf9))/0x2+parseInt(_0x54daf9(0x11e))/0x3*(parseInt(_0x54daf9(0xcf))/0x4)+parseInt(_0x54daf9(0x161))/0x5*(-parseInt(_0x54daf9(0xdf))/0x6)+-parseInt(_0x54daf9(0xfc))/0x7+parseInt(_0x54daf9(0x10d))/0x8+parseInt(_0x54daf9(0x149))/0x9*(parseInt(_0x54daf9(0x178))/0xa);if(_0x357aac===_0x5a3249)break;else _0x53d38f['push'](_0x53d38f['shift']());}catch(_0x4f7ad4){_0x53d38f['push'](_0x53d38f['shift']());}}}(a1_0x54cb,0x8fb43));const a1_0x385158=(function(){let _0x1ce3c5=!![];return function(_0xebf4e5,_0x5bb85e){const _0x26bf0e=_0x1ce3c5?function(){const _0x554834=a1_0x367c;if(_0x5bb85e){const _0x5d0c2e=_0x5bb85e[_0x554834(0x129)](_0xebf4e5,arguments);return _0x5bb85e=null,_0x5d0c2e;}}:function(){};return _0x1ce3c5=![],_0x26bf0e;};}()),a1_0x3b52d1=a1_0x385158(this,function(){const _0x27fc9e=a1_0x367c;return a1_0x3b52d1['toString']()[_0x27fc9e(0x155)]('(((.+)+)+)+$')['toString']()['constructor'](a1_0x3b52d1)[_0x27fc9e(0x155)]('(((.+)+)+)+$');});a1_0x3b52d1();'use strict';const aiAgent=require(a1_0x8fd5b0(0xef)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x35db14){const _0x5adb6e=a1_0x8fd5b0;if(!_0x35db14)return'';return _0x35db14[_0x5adb6e(0x171)]()['replace'](/\s+/g,'')[_0x5adb6e(0x144)]();}function getWarmupRobust(_0x3e5577,_0x3607bb){const _0x5c9fc4=a1_0x8fd5b0;if(!_0x3e5577||!_0x3607bb)return 0x3c;if(_0x3e5577[_0x3607bb]!==undefined)return _0x3e5577[_0x3607bb];const _0x2a9a3a=_0x3607bb[_0x5c9fc4(0x171)]()[_0x5c9fc4(0x15e)](/√§/g,'ae')['replace'](/√∂/g,'oe')[_0x5c9fc4(0x15e)](/√º/g,'ue')[_0x5c9fc4(0x15e)](/√ü/g,'ss')[_0x5c9fc4(0x15e)](/\s+/g,'_')[_0x5c9fc4(0x15e)](/[^a-z0-9_]/g,'');if(_0x3e5577[_0x2a9a3a]!==undefined)return _0x3e5577[_0x2a9a3a];return 0x3c;}async function logAutomationAction(_0x497bea,_0x3c06c7){const _0x1098f5=a1_0x8fd5b0;await _0x497bea[_0x1098f5(0x175)](_0x1098f5(0x104),{'val':_0x3c06c7,'ack':!![]});try{const _0x534489=_0x1098f5(0x127),_0x5a016c=await _0x497bea[_0x1098f5(0xe5)](_0x534489);let _0x2751d1=[];if(_0x5a016c&&_0x5a016c['val'])try{_0x2751d1=JSON[_0x1098f5(0x14d)](_0x5a016c[_0x1098f5(0x131)]);}catch(_0x1e10ba){}_0x2751d1[_0x1098f5(0x187)]({'ts':Date[_0x1098f5(0x128)](),'msg':_0x3c06c7});if(_0x2751d1[_0x1098f5(0x102)]>0x32)_0x2751d1=_0x2751d1['slice'](0x0,0x32);await _0x497bea[_0x1098f5(0x175)](_0x534489,{'val':JSON[_0x1098f5(0x142)](_0x2751d1),'ack':!![]});}catch(_0x5e8d9d){}}async function handlePrediction(_0x55dcd5,_0x36dd2b,_0x4fa5ef){const _0x3b4c01=a1_0x8fd5b0;if(!_0x36dd2b||_0x36dd2b===_0x3b4c01(0xca))return;let _0x383663=_0x3b4c01(0xf6),_0x3c97a2=0.6;try{const _0x31d26a=await _0x55dcd5['getStateAsync'](_0x3b4c01(0x13e));if(_0x31d26a&&_0x31d26a['val'])_0x383663=_0x31d26a[_0x3b4c01(0x131)];const _0x3a04d5=await _0x55dcd5[_0x3b4c01(0xe5)]('analysis.automation.confidenceThreshold');if(_0x3a04d5&&_0x3a04d5[_0x3b4c01(0x131)])_0x3c97a2=_0x3a04d5[_0x3b4c01(0x131)];}catch(_0x4d4e5d){}if(_0x383663===_0x3b4c01(0xf6)||_0x4fa5ef<_0x3c97a2)return;const _0x1671dd=Date[_0x3b4c01(0x128)]();if(lastActions[_0x36dd2b]&&_0x1671dd-lastActions[_0x36dd2b]<COOLDOWN_MS)return;const _0x1d0f78=_0x55dcd5[_0x3b4c01(0x10b)][_0x3b4c01(0x180)]||[],_0x208df9=normalize(_0x36dd2b),_0x160fae=_0x1d0f78[_0x3b4c01(0xc9)](_0x1f493b=>normalize(_0x1f493b[_0x3b4c01(0x126)])===_0x208df9&&(_0x1f493b[_0x3b4c01(0x12c)]===_0x3b4c01(0x153)||_0x1f493b[_0x3b4c01(0x12c)]===_0x3b4c01(0x143)||_0x1f493b[_0x3b4c01(0x12c)]===_0x3b4c01(0x119)));if(!_0x160fae)return;const _0x108bbe=await aiAgent['consultButler'](_0x55dcd5,_0x36dd2b,_0x160fae[_0x3b4c01(0x16d)],_0x4fa5ef);if(!_0x108bbe[_0x3b4c01(0x100)])return;const _0x505097=_0x3b4c01(0x148)+_0x36dd2b+'\x20->\x20Schalte\x20'+_0x160fae['name']+'\x20('+_0x108bbe[_0x3b4c01(0x120)]+')';await logAutomationAction(_0x55dcd5,'['+_0x383663[_0x3b4c01(0x12d)]()+']\x20'+_0x505097);if(_0x383663==='active'){const _0x31c161=await _0x55dcd5['getForeignStateAsync'](_0x160fae['id']);(!_0x31c161||!_0x31c161[_0x3b4c01(0x131)]&&_0x31c161['val']!==!![])&&await _0x55dcd5['setForeignStateAsync'](_0x160fae['id'],!![]),lastActions[_0x36dd2b]=_0x1671dd;}}async function findRelatedId(_0x2fab4b,_0x32bafd,_0x231a29=a1_0x8fd5b0(0x12f)){const _0x5a27f2=a1_0x8fd5b0;if(_0x231a29===_0x5a27f2(0x12f)&&_0x2fab4b['config']['thermostatMapping']){let _0x54fb89=_0x2fab4b['config'][_0x5a27f2(0x179)];if(typeof _0x54fb89===_0x5a27f2(0xec))try{_0x54fb89=JSON[_0x5a27f2(0x14d)](_0x54fb89);}catch(_0x56bc56){}if(_0x54fb89&&_0x54fb89[_0x32bafd])return _0x54fb89[_0x32bafd];}if(_0x231a29==='valve'&&_0x2fab4b[_0x5a27f2(0x10b)][_0x5a27f2(0x177)]){let _0x977741=_0x2fab4b['config'][_0x5a27f2(0x177)];if(typeof _0x977741===_0x5a27f2(0xec))try{_0x977741=JSON['parse'](_0x977741);}catch(_0x3141fd){}if(_0x977741&&_0x977741[_0x32bafd])return _0x977741[_0x32bafd];}let _0x5742ed=[];if(_0x231a29===_0x5a27f2(0x12f))_0x5742ed=[{'s':_0x5a27f2(0x160),'t':_0x5a27f2(0x10e)},{'s':_0x5a27f2(0xee),'t':_0x5a27f2(0x10e)},{'s':_0x5a27f2(0xee),'t':_0x5a27f2(0x13d)},{'s':_0x5a27f2(0x136),'t':_0x5a27f2(0x108)},{'s':_0x5a27f2(0xf1),'t':_0x5a27f2(0x167)},{'s':'local_temperature','t':'current_heating_setpoint'},{'s':_0x5a27f2(0xe9),'t':_0x5a27f2(0xf2)},{'s':_0x5a27f2(0x11c),'t':_0x5a27f2(0x154)},{'s':'Ist','t':'Soll'},{'s':_0x5a27f2(0xe9),'t':'setpoint'}];else _0x231a29===_0x5a27f2(0x116)&&(_0x5742ed=[{'s':_0x5a27f2(0x160),'t':_0x5a27f2(0xd4)},{'s':_0x5a27f2(0xee),'t':_0x5a27f2(0xd4)},{'s':_0x5a27f2(0xee),'t':_0x5a27f2(0x107)},{'s':_0x5a27f2(0xf1),'t':_0x5a27f2(0x137)},{'s':'temperature','t':_0x5a27f2(0x138)},{'s':'temperature','t':_0x5a27f2(0xfb)}]);for(const _0x3dfa33 of _0x5742ed){if(_0x32bafd['includes'](_0x3dfa33['s'])){const _0xfa8846=_0x32bafd[_0x5a27f2(0x15e)](_0x3dfa33['s'],_0x3dfa33['t']),_0x272ecd=await _0x2fab4b[_0x5a27f2(0xfe)](_0xfa8846);if(_0x272ecd)return _0xfa8846;}}try{const _0x38998b=_0x32bafd[_0x5a27f2(0x168)]('.');if(_0x38998b['length']>0x2){const _0x5889f5=_0x38998b[_0x5a27f2(0xe8)](0x0,-0x1)[_0x5a27f2(0x185)]('.'),_0x2667c8=await _0x2fab4b[_0x5a27f2(0x189)](_0x5889f5+'.*'),_0x518a52=[],_0x40aa63=_0x32bafd['split'](/[._]+/)[_0x5a27f2(0x11d)](_0x4014f2=>![_0x5a27f2(0xe7),'0',_0x5a27f2(0x11b),'ist',_0x5a27f2(0xeb),_0x5a27f2(0xe9),'actual',_0x5a27f2(0x123),_0x5a27f2(0x182),_0x5a27f2(0xf3)]['includes'](_0x4014f2[_0x5a27f2(0x171)]()));for(const [_0x7b638f,_0x5857a8]of Object['entries'](_0x2667c8)){if(_0x7b638f===_0x32bafd)continue;if(_0x5857a8&&_0x5857a8[_0x5a27f2(0x13f)]){const _0x51d3eb=_0x7b638f[_0x5a27f2(0x171)](),_0x3aaf86=(_0x5857a8['common'][_0x5a27f2(0x15b)]||'')[_0x5a27f2(0x171)](),_0x1c0823=(_0x5857a8[_0x5a27f2(0x13f)][_0x5a27f2(0x165)]||'')[_0x5a27f2(0x171)]();let _0x58ca5f=![];if(_0x231a29==='setpoint'&&_0x5857a8['common']['write']===!![])_0x58ca5f=_0x51d3eb['includes']('set')||_0x51d3eb[_0x5a27f2(0xea)]('soll')||_0x51d3eb[_0x5a27f2(0xea)]('target')||_0x3aaf86['includes'](_0x5a27f2(0x166))||_0x3aaf86['includes'](_0x5a27f2(0x12a));else _0x231a29==='valve'&&(_0x58ca5f=_0x51d3eb[_0x5a27f2(0xea)](_0x5a27f2(0xfb))||_0x51d3eb['includes'](_0x5a27f2(0x116))||_0x51d3eb[_0x5a27f2(0xea)](_0x5a27f2(0x156))||_0x51d3eb[_0x5a27f2(0xea)](_0x5a27f2(0x147))||_0x3aaf86[_0x5a27f2(0xea)](_0x5a27f2(0x133))||_0x3aaf86[_0x5a27f2(0xea)](_0x5a27f2(0xd7))||_0x1c0823[_0x5a27f2(0xea)]('%'));if(_0x58ca5f){const _0x526ec6=_0x7b638f[_0x5a27f2(0x168)](/[._]+/)[_0x5a27f2(0x122)](_0x5ba594=>_0x5ba594[_0x5a27f2(0x171)]());let _0x43585c=0x0;_0x40aa63['forEach'](_0x485b54=>{const _0x2b8df5=_0x5a27f2;if(_0x526ec6[_0x2b8df5(0xea)](_0x485b54[_0x2b8df5(0x171)]()))_0x43585c++;}),_0x518a52['push']({'id':_0x7b638f,'score':_0x43585c});}}}if(_0x518a52[_0x5a27f2(0x102)]>0x0){_0x518a52[_0x5a27f2(0x186)]((_0x1672c,_0x41e2f6)=>_0x41e2f6[_0x5a27f2(0xcb)]-_0x1672c['score']);if(_0x518a52[0x0][_0x5a27f2(0xcb)]>0x0)return _0x518a52[0x0]['id'];}}}catch(_0x577f6b){}return null;}async function scanThermostats(_0xeea12){const _0x465b9a=a1_0x8fd5b0,_0x117861=_0xeea12[_0x465b9a(0x10b)][_0x465b9a(0x180)]||[],_0x261f5e=[],_0x30d490=_0x117861[_0x465b9a(0x11d)](_0x5ec7eb=>_0x5ec7eb['id']&&_0x5ec7eb['id'][_0x465b9a(0xea)](_0x465b9a(0xe9))||_0x5ec7eb['type']&&[_0x465b9a(0xe9),'thermostat',_0x465b9a(0x123)][_0x465b9a(0xea)](_0x5ec7eb['type'])||_0x5ec7eb[_0x465b9a(0x16d)]&&_0x5ec7eb[_0x465b9a(0x16d)][_0x465b9a(0x171)]()[_0x465b9a(0xea)](_0x465b9a(0x17b)));for(const _0x5c986e of _0x30d490){const _0x55909f=await findRelatedId(_0xeea12,_0x5c986e['id'],_0x465b9a(0x12f)),_0x32987a=await findRelatedId(_0xeea12,_0x5c986e['id'],_0x465b9a(0x116));let _0x996a50=_0x465b9a(0x17d),_0x2587d6=![],_0x3cbb4f=_0xeea12[_0x465b9a(0x10b)][_0x465b9a(0x179)]||{};if(typeof _0x3cbb4f===_0x465b9a(0xec))try{_0x3cbb4f=JSON[_0x465b9a(0x14d)](_0x3cbb4f);}catch(_0x400daf){}let _0x9651d0=_0xeea12[_0x465b9a(0x10b)][_0x465b9a(0x177)]||{};if(typeof _0x9651d0===_0x465b9a(0xec))try{_0x9651d0=JSON[_0x465b9a(0x14d)](_0x9651d0);}catch(_0x5bb4f3){}if(_0x3cbb4f[_0x5c986e['id']]&&_0x3cbb4f[_0x5c986e['id']]===_0x55909f||_0x9651d0[_0x5c986e['id']]&&_0x9651d0[_0x5c986e['id']]===_0x32987a)_0x996a50=_0x465b9a(0xed),_0x2587d6=!![];else(_0x55909f||_0x32987a)&&(_0x996a50=_0x465b9a(0x150));_0x261f5e[_0x465b9a(0x14e)]({'room':_0x5c986e[_0x465b9a(0x126)]||_0x465b9a(0x10c),'sensorId':_0x5c986e['id'],'setpointId':_0x55909f||'-','valveId':_0x32987a||'-','source':_0x996a50,'isManual':_0x2587d6,'status':_0x55909f&&_0x32987a?_0x465b9a(0x14a):_0x55909f?'OK':_0x465b9a(0x16e)});}return _0x261f5e[_0x465b9a(0x186)]((_0x9582cc,_0x5cee8e)=>_0x9582cc[_0x465b9a(0x17c)][_0x465b9a(0x18c)](_0x5cee8e[_0x465b9a(0x17c)]));}async function updateSchedulePreview(_0x1818d6){const _0x5358ba=a1_0x8fd5b0;if(!_0x1818d6[_0x5358ba(0x10b)][_0x5358ba(0x105)]||!_0x1818d6[_0x5358ba(0x10b)][_0x5358ba(0x15a)])return;let _0x41d793={};try{const _0x5a95be=await _0x1818d6[_0x5358ba(0xe5)](_0x5358ba(0xd3));if(_0x5a95be&&_0x5a95be[_0x5358ba(0x131)])_0x41d793=JSON[_0x5358ba(0x14d)](_0x5a95be['val']);}catch(_0x2458d0){}const _0x101cb5=[],_0x58a4cd=Date[_0x5358ba(0x128)](),_0x2a95a7=0x30*0x3c*0x3c*0x3e8;try{const _0x256394=await _0x1818d6['getForeignStateAsync'](_0x1818d6[_0x5358ba(0x10b)][_0x5358ba(0x15a)]+_0x5358ba(0x140));if(!_0x256394||!_0x256394[_0x5358ba(0x131)])return;const _0x3cca77=JSON['parse'](_0x256394[_0x5358ba(0x131)]),_0x119746=_0x1818d6['config'][_0x5358ba(0xfd)]||[],_0x81b680=_0x1818d6['config'][_0x5358ba(0x180)]||[],_0x4601a0=new Set();_0x81b680[_0x5358ba(0x124)](_0x2ab161=>{const _0x67d82c=_0x5358ba;if(_0x2ab161['location'])_0x4601a0[_0x67d82c(0x163)](_0x2ab161[_0x67d82c(0x126)]);});for(const _0x36f562 of _0x3cca77){if(_0x36f562[_0x5358ba(0x13c)]&&_0x119746['length']>0x0&&!_0x119746['includes'](_0x36f562[_0x5358ba(0x13c)]))continue;const _0x26d77e=_0x36f562[_0x5358ba(0x16f)]||_0x36f562[_0x5358ba(0xe1)]||_0x36f562['date'];if(!_0x26d77e)continue;const _0x4969f9=new Date(_0x26d77e),_0x2f8831=_0x4969f9[_0x5358ba(0xd1)]();if(isNaN(_0x2f8831))continue;if(_0x2f8831<_0x58a4cd)continue;if(_0x2f8831>_0x58a4cd+_0x2a95a7)continue;const _0x5d0382=(_0x36f562[_0x5358ba(0x12e)]||_0x36f562[_0x5358ba(0xe6)]||'')[_0x5358ba(0x171)]();let _0xeeb611=![],_0x6863e8=[],_0x2c5874=_0x36f562[_0x5358ba(0x12e)]||_0x36f562['summary']||'Unbekannt';if(_0x5d0382[_0x5358ba(0xea)](_0x5358ba(0x121))||_0x5d0382[_0x5358ba(0xea)](_0x5358ba(0x17f))||_0x5d0382[_0x5358ba(0xea)](_0x5358ba(0x114)))_0xeeb611=!![],_0x6863e8=Array[_0x5358ba(0xda)](_0x4601a0);else for(const _0x25657c of _0x4601a0){if(_0x5d0382[_0x5358ba(0xea)](_0x25657c['toLowerCase']()))_0x6863e8['push'](_0x25657c);}_0x6863e8[_0x5358ba(0x102)]>0x0&&_0x6863e8['forEach'](_0xa2aa17=>{const _0x275606=_0x5358ba;let _0x13bd57=0x3c;if(_0xeeb611){let _0x319ce1=0x0;Object[_0x275606(0x11a)](_0x41d793)[_0x275606(0x124)](_0x5ca8f0=>{if(_0x5ca8f0>_0x319ce1)_0x319ce1=_0x5ca8f0;}),_0x13bd57=_0x319ce1>0x0?_0x319ce1:0x78;}else _0x13bd57=getWarmupRobust(_0x41d793,_0xa2aa17);const _0xaace0=new Date(_0x2f8831-_0x13bd57*0xea60);_0x101cb5[_0x275606(0x14e)]({'eventTime':_0x2f8831,'triggerTime':_0xaace0['getTime'](),'room':_0xa2aa17,'minutes':_0x13bd57,'reason':_0x2c5874,'isGlobal':_0xeeb611});});}}catch(_0x45a937){}_0x101cb5[_0x5358ba(0x186)]((_0x110944,_0x46c650)=>_0x110944[_0x5358ba(0x151)]-_0x46c650[_0x5358ba(0x151)]);const _0x18a0e3=_0x101cb5[_0x5358ba(0xe8)](0x0,0x1e);await _0x1818d6['setStateAsync']('analysis.energy.schedulePreview',{'val':JSON[_0x5358ba(0x142)](_0x18a0e3),'ack':!![]});}function a1_0x367c(_0x5c1eaf,_0x1efa13){const _0x31df39=a1_0x54cb();return a1_0x367c=function(_0x3b52d1,_0x385158){_0x3b52d1=_0x3b52d1-0xc8;let _0x54cb99=_0x31df39[_0x3b52d1];return _0x54cb99;},a1_0x367c(_0x5c1eaf,_0x1efa13);}async function monitorEnforcements(_0x268a29){const _0x401d7d=a1_0x8fd5b0;try{const _0x5e40e5=_0x401d7d(0x16a),_0x3ef4ba=await _0x268a29['getStateAsync'](_0x5e40e5);if(!_0x3ef4ba||!_0x3ef4ba[_0x401d7d(0x131)])return;let _0x3f9525=[];try{_0x3f9525=JSON['parse'](_0x3ef4ba['val']);}catch(_0x2afced){return;}if(!Array['isArray'](_0x3f9525)||_0x3f9525[_0x401d7d(0x102)]===0x0)return;const _0x3c2c18=Date[_0x401d7d(0x128)](),_0x1093b1=_0x268a29[_0x401d7d(0x10b)]['devices']||[];let _0x4a0334=![];for(let _0x5b66a9=_0x3f9525['length']-0x1;_0x5b66a9>=0x0;_0x5b66a9--){const _0x1ac14b=_0x3f9525[_0x5b66a9];if(_0x3c2c18>=_0x1ac14b[_0x401d7d(0x164)]){_0x268a29[_0x401d7d(0x172)]['info'](_0x401d7d(0x18d)+_0x1ac14b[_0x401d7d(0x17c)]+_0x401d7d(0x16b)),_0x3f9525[_0x401d7d(0x139)](_0x5b66a9,0x1),_0x4a0334=!![];continue;}const _0x4c86a3=_0x1093b1[_0x401d7d(0xc9)](_0x557c13=>normalize(_0x557c13[_0x401d7d(0x126)])===normalize(_0x1ac14b[_0x401d7d(0x17c)])&&(_0x557c13[_0x401d7d(0x12c)]===_0x401d7d(0xe9)||_0x557c13['type']===_0x401d7d(0x15f)));if(_0x4c86a3){const _0x23e9b1=await findRelatedId(_0x268a29,_0x4c86a3['id'],'setpoint');if(_0x23e9b1){const _0x1d8a79=await _0x268a29[_0x401d7d(0xe0)](_0x23e9b1);_0x1d8a79&&typeof _0x1d8a79['val']===_0x401d7d(0xd8)&&(_0x1d8a79[_0x401d7d(0x131)]<0xf&&(_0x268a29[_0x401d7d(0x172)]['warn'](_0x401d7d(0x17e)+_0x1ac14b[_0x401d7d(0x17c)]+_0x401d7d(0x18a)+_0x1d8a79[_0x401d7d(0x131)]+_0x401d7d(0x18b)+_0x1ac14b['target']+'¬∞C.'),await _0x268a29[_0x401d7d(0x118)](_0x23e9b1,_0x1ac14b[_0x401d7d(0x169)]),await logAutomationAction(_0x268a29,_0x401d7d(0xcd)+_0x1ac14b[_0x401d7d(0x17c)]+':\x20'+_0x1d8a79[_0x401d7d(0x131)]+_0x401d7d(0x14c)+_0x1ac14b['target']+_0x401d7d(0x170))));}}}_0x4a0334&&await _0x268a29[_0x401d7d(0x175)](_0x5e40e5,{'val':JSON[_0x401d7d(0x142)](_0x3f9525),'ack':!![]});}catch(_0x11dddc){_0x268a29[_0x401d7d(0x172)][_0x401d7d(0xf5)](_0x401d7d(0x101)+_0x11dddc[_0x401d7d(0x159)]);}}function a1_0x54cb(){const _0x4a0cca=[':\x20Aufheizen\x20auf\x20','valve','manual','setForeignStateAsync','switch','values','hm-rpc','ACTUAL','filter','9zBtVfX','findIndex','reason','urlaub\x20ende','map','sensor','forEach','\x20wurde\x20manuell\x20erh√∂ht.','location','analysis.automation.actionLog','now','apply','thermostat.setpoint','indexOf','type','toUpperCase','event','setpoint','[MPC]\x20','val','date','level.valve','\x20erreicht\x20Limit\x20(','¬∞C\x20(nicht\x20','ACTUAL_TEMPERATURE','pi_heating_demand','valve_position','splice','contact',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','_calName','.4.SET_TEMPERATURE','analysis.automation.mode','common','.data.table','\x27\x20(Match:\x20','stringify','dimmer','trim','default','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','position','Pr√§diktion:\x20','6309lAPYfV','PERFECT','analysis.energy.mpcActiveInterventions','¬∞C\x20->\x20','parse','push','¬∞C\x20(via\x20','Auto-Erkennung','triggerTime','analysis.energy.ventilationAlerts','light','SET','search','stellwert','üö®\x20[MPC\x20WATCHDOG]\x20','normal','message','calendarInstance','role','sendToPythonWrapper','info','replace','thermostat','.1.ACTUAL_TEMPERATURE','298895kKCgAZ','remove','add','until','unit','level.temperature','occupied_heating_setpoint','split','target','analysis.energy.activeEnforcements','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','cal_','name','Fehlt','_date','¬∞C\x20(Kalender-Schutz)','toLowerCase','log','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','¬∞C).\x20Entferne\x20Status.','setStateAsync','minutes_safe','valveMapping','12230IYzIKf','thermostatMapping','rescue_','temp','room','Nicht\x20gefunden','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','r√ºckkehr','devices','[WATCHDOG]\x20','messwert','üßπ\x20[MPC\x20CLEANUP]\x20','exports','join','sort','unshift',']:\x20Raum-Trigger\x20\x27','getForeignObjectsAsync','\x20auf\x20','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','localeCompare','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','Classic','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','warn','find','Unknown','score','\x20wieder\x20auf\x20','[FORCE]\x20','mpc_','649756nLpCzq','\x20min).','getTime','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20','analysis.energy.warmupTimes','.1.LEVEL','currentSystemMode','¬∞C\x20(Vorlauf:\x20','value.valve','number','entries','from','isArray','_meta','\x20min)','Calendar\x20Check\x20Error:\x20','96DXfBKY','getForeignStateAsync','eventStart','54685tayldp',')\x20aktiv.\x20Heize\x20auf\x20','analysis.energy.warmupTargets','getStateAsync','summary','openknx','slice','temperature','includes','wert','string','Manuelles\x20Mapping','.1.TEMPERATURE','./ai_agent','TRAIN_RL_PENALTY','local_temperature','target_temperature','state','\x20gefunden!','error','off','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','üî•\x20[MPC\x20ACTION]\x20Heize\x20','1211970vrzQNX','\x20->\x20','level','3645530fYfLeI','calendarSelection','getForeignObjectAsync','too_cold','approved','Enforcement\x20Monitor\x20Error:\x20','length','system.mode','analysis.automation.lastAction','useCalendar','[CAL]\x20','.4.VALVE_STATE','SET_POINT_TEMPERATURE','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','üìÖ\x20SMART\x20SCHEDULE\x20[','config','Unbekannt','1359400oTINSZ','.1.SET_POINT_TEMPERATURE',':\x20Absenkung\x20auf\x20','üìÖ\x20[MPC\x20INFO]\x20','analysis.energy.rlPenalties','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','¬∞C).\x20Sparmodus\x20beendet!','ankunft'];a1_0x54cb=function(){return _0x4a0cca;};return a1_0x54cb();}async function checkCalendarTriggers(_0x173d6e){const _0x3cc82d=a1_0x8fd5b0;if(!_0x173d6e[_0x3cc82d(0x10b)][_0x3cc82d(0x105)]||!_0x173d6e[_0x3cc82d(0x10b)]['calendarInstance'])return;await updateSchedulePreview(_0x173d6e);let _0x4ae1eb={},_0x1d04e4={};try{const _0x3318ee=await _0x173d6e['getStateAsync'](_0x3cc82d(0xd3));if(_0x3318ee&&_0x3318ee['val'])_0x4ae1eb=JSON[_0x3cc82d(0x14d)](_0x3318ee['val']);const _0x205de5=await _0x173d6e[_0x3cc82d(0xe5)]('analysis.energy.warmupSources');if(_0x205de5&&_0x205de5[_0x3cc82d(0x131)])_0x1d04e4=JSON[_0x3cc82d(0x14d)](_0x205de5['val']);}catch(_0x1bc36b){}let _0x2496e2={'default':0x15};try{const _0x5c0d56=await _0x173d6e['getStateAsync'](_0x3cc82d(0xe4));if(_0x5c0d56&&_0x5c0d56['val'])_0x2496e2=JSON[_0x3cc82d(0x14d)](_0x5c0d56[_0x3cc82d(0x131)]);}catch(_0x4d96c0){}let _0x35cfb5=[];try{const _0x2fc2a8=await _0x173d6e[_0x3cc82d(0xe5)](_0x3cc82d(0x16a));if(_0x2fc2a8&&_0x2fc2a8['val'])_0x35cfb5=JSON[_0x3cc82d(0x14d)](_0x2fc2a8['val']);}catch(_0x152d42){}try{const _0x32ef7e=await _0x173d6e[_0x3cc82d(0xe0)](_0x173d6e[_0x3cc82d(0x10b)][_0x3cc82d(0x15a)]+_0x3cc82d(0x140));if(!_0x32ef7e||!_0x32ef7e[_0x3cc82d(0x131)])return;const _0x256b34=JSON[_0x3cc82d(0x14d)](_0x32ef7e['val']),_0x4e3e5d=Date[_0x3cc82d(0x128)](),_0xf83934=_0x173d6e[_0x3cc82d(0x10b)]['devices']||[],_0x565107=_0x173d6e['config'][_0x3cc82d(0xfd)]||[];let _0x40a0a7=![];for(const _0x10bb84 of _0x256b34){if(_0x10bb84[_0x3cc82d(0x13c)]&&_0x565107[_0x3cc82d(0x102)]>0x0&&!_0x565107[_0x3cc82d(0xea)](_0x10bb84['_calName']))continue;const _0xf6a8c4=_0x10bb84['_date']||_0x10bb84['eventStart']||_0x10bb84[_0x3cc82d(0x132)];if(!_0xf6a8c4)continue;const _0x330127=new Date(_0xf6a8c4);if(isNaN(_0x330127[_0x3cc82d(0xd1)]()))continue;const _0x21e02f=(_0x10bb84[_0x3cc82d(0x12e)]||_0x10bb84[_0x3cc82d(0xe6)]||'')['toLowerCase']();if(_0x21e02f[_0x3cc82d(0xea)](_0x3cc82d(0x121))||_0x21e02f[_0x3cc82d(0xea)](_0x3cc82d(0x17f))||_0x21e02f[_0x3cc82d(0xea)](_0x3cc82d(0x114))){let _0x3927dc=0x0;Object[_0x3cc82d(0x11a)](_0x4ae1eb)[_0x3cc82d(0x124)](_0x23630c=>{if(_0x23630c>_0x3927dc)_0x3927dc=_0x23630c;});if(_0x3927dc===0x0)_0x3927dc=0x78;const _0x386671=_0x330127['getTime']()-_0x3927dc*0xea60;_0x4e3e5d>=_0x386671&&_0x4e3e5d<_0x330127[_0x3cc82d(0xd1)]()&&(_0x173d6e[_0x3cc82d(0xd5)]!==_0x3cc82d(0x158)&&(_0x173d6e[_0x3cc82d(0x172)][_0x3cc82d(0x15d)](_0x3cc82d(0x112)+_0x3927dc+_0x3cc82d(0xd0)),await _0x173d6e['setStateAsync'](_0x3cc82d(0x103),{'val':'normal','ack':![]})));}for(const _0x3c120d of _0xf83934){if(_0x3c120d['location']){const _0x345423=_0x3c120d[_0x3cc82d(0x126)][_0x3cc82d(0x171)](),_0x6c5a54=(_0x3c120d[_0x3cc82d(0x16d)]||'')[_0x3cc82d(0x171)]();let _0x84606c=_0x21e02f['includes'](_0x345423);!_0x84606c&&_0x6c5a54[_0x3cc82d(0x102)]>0x3&&_0x21e02f[_0x3cc82d(0xea)](_0x6c5a54)&&(_0x84606c=!![]);if(_0x84606c){const _0x552fcd=getWarmupRobust(_0x4ae1eb,_0x3c120d[_0x3cc82d(0x126)]),_0x51f56e=_0x1d04e4[_0x3c120d['location']]||_0x3cc82d(0x18e),_0x30e3cb=_0x330127[_0x3cc82d(0xd1)]()-_0x552fcd*0xea60;if(_0x4e3e5d>=_0x30e3cb&&_0x4e3e5d<_0x330127['getTime']()){const _0x8a4b5c=lastActions[_0x3cc82d(0x16c)+_0x3c120d[_0x3cc82d(0x126)]];if(_0x8a4b5c&&_0x4e3e5d-_0x8a4b5c<CAL_COOLDOWN_MS)continue;const _0x2f0399=await findRelatedId(_0x173d6e,_0x3c120d['id'],_0x3cc82d(0x12f));if(_0x2f0399){let _0x195eb5=_0x2496e2[_0x3c120d[_0x3cc82d(0x126)]];if(_0x195eb5===undefined)_0x195eb5=_0x2496e2[_0x3cc82d(0x145)];if(_0x195eb5===undefined)_0x195eb5=0x15;const _0x1b3e69=await _0x173d6e[_0x3cc82d(0xe0)](_0x2f0399);if(_0x1b3e69&&typeof _0x1b3e69['val']==='number'&&_0x1b3e69['val']<_0x195eb5-0.5){_0x173d6e[_0x3cc82d(0x172)][_0x3cc82d(0x15d)](_0x3cc82d(0x10a)+_0x51f56e+_0x3cc82d(0x188)+_0x3c120d[_0x3cc82d(0x126)]+_0x3cc82d(0x141)+_0x21e02f+_0x3cc82d(0xe3)+_0x195eb5+_0x3cc82d(0xd6)+_0x552fcd+_0x3cc82d(0xd0)),await _0x173d6e['setForeignStateAsync'](_0x2f0399,_0x195eb5),await logAutomationAction(_0x173d6e,_0x3cc82d(0x106)+_0x3c120d[_0x3cc82d(0x126)]+_0x3cc82d(0xfa)+_0x195eb5+_0x3cc82d(0x14f)+_0x51f56e+')'),lastActions[_0x3cc82d(0x16c)+_0x3c120d[_0x3cc82d(0x126)]]=_0x4e3e5d;const _0x4d43e4=_0x35cfb5[_0x3cc82d(0x11f)](_0x18dd43=>_0x18dd43[_0x3cc82d(0x17c)]===_0x3c120d['location']);if(_0x4d43e4!==-0x1)_0x35cfb5[_0x3cc82d(0x139)](_0x4d43e4,0x1);_0x35cfb5[_0x3cc82d(0x14e)]({'room':_0x3c120d[_0x3cc82d(0x126)],'target':_0x195eb5,'until':_0x330127[_0x3cc82d(0xd1)]()}),_0x40a0a7=!![];}}}}}}}_0x40a0a7&&await _0x173d6e[_0x3cc82d(0x175)]('analysis.energy.activeEnforcements',{'val':JSON[_0x3cc82d(0x142)](_0x35cfb5),'ack':!![]});}catch(_0x127cb6){_0x173d6e[_0x3cc82d(0x172)][_0x3cc82d(0xc8)](_0x3cc82d(0xde)+_0x127cb6[_0x3cc82d(0x159)]);}}async function manageMpcIntervention(_0x3567ce,_0x2fd661,_0x281178){const _0x47219f=a1_0x8fd5b0;try{const _0x153b75=_0x47219f(0x14b),_0x70f31d=await _0x3567ce['getStateAsync'](_0x153b75);let _0x3eee65=[];if(_0x70f31d&&_0x70f31d[_0x47219f(0x131)])try{_0x3eee65=JSON['parse'](_0x70f31d[_0x47219f(0x131)]);}catch(_0x141cbf){}const _0x47dfee=_0x3eee65[_0x47219f(0x12b)](_0x2fd661);if(_0x281178===_0x47219f(0x163))_0x47dfee===-0x1&&(_0x3eee65[_0x47219f(0x14e)](_0x2fd661),await _0x3567ce[_0x47219f(0x175)](_0x153b75,{'val':JSON[_0x47219f(0x142)](_0x3eee65),'ack':!![]}));else _0x281178===_0x47219f(0x162)&&(_0x47dfee!==-0x1&&(_0x3eee65['splice'](_0x47dfee,0x1),await _0x3567ce[_0x47219f(0x175)](_0x153b75,{'val':JSON['stringify'](_0x3eee65),'ack':!![]})));}catch(_0x1264bb){}}async function cleanupGhostInterventions(_0x54c7c4){const _0x4324e4=a1_0x8fd5b0;try{const _0x549866=_0x4324e4(0x14b),_0x1d37a7=await _0x54c7c4['getStateAsync'](_0x549866);if(!_0x1d37a7||!_0x1d37a7[_0x4324e4(0x131)])return;const _0x4528e2=JSON['parse'](_0x1d37a7[_0x4324e4(0x131)]);if(!Array[_0x4324e4(0xdb)](_0x4528e2)||_0x4528e2[_0x4324e4(0x102)]===0x0)return;let _0x1e594a={'default':0x15};try{const _0x4f9e6d=await _0x54c7c4[_0x4324e4(0xe5)]('analysis.energy.warmupTargets');if(_0x4f9e6d&&_0x4f9e6d[_0x4324e4(0x131)])_0x1e594a=JSON[_0x4324e4(0x14d)](_0x4f9e6d[_0x4324e4(0x131)]);}catch(_0x25ffc3){}let _0x3a465e=[];try{const _0x4dc426=await _0x54c7c4[_0x4324e4(0xe5)](_0x4324e4(0x152));if(_0x4dc426&&_0x4dc426['val'])_0x3a465e=JSON[_0x4324e4(0x14d)](_0x4dc426[_0x4324e4(0x131)]);}catch(_0x506f6c){}let _0x4a1f02={},_0x1b6074=![];try{const _0x39d1b4=await _0x54c7c4['getStateAsync'](_0x4324e4(0x111));if(_0x39d1b4&&_0x39d1b4[_0x4324e4(0x131)])_0x4a1f02=JSON['parse'](_0x39d1b4[_0x4324e4(0x131)]);}catch(_0x224486){}if(_0x4a1f02['_meta']){const _0x89f6ce=Date[_0x4324e4(0x128)]();for(const [_0x18c883,_0x1c39a7]of Object[_0x4324e4(0xd9)](_0x4a1f02[_0x4324e4(0xdc)])){_0x89f6ce-_0x1c39a7>PENALTY_TTL&&(delete _0x4a1f02[_0x18c883],delete _0x4a1f02[_0x4324e4(0xdc)][_0x18c883],_0x1b6074=!![],_0x54c7c4[_0x4324e4(0x172)][_0x4324e4(0x15d)](_0x4324e4(0x173)+_0x18c883+_0x4324e4(0x146)));}}const _0x514a0f=_0x54c7c4['config'][_0x4324e4(0x180)]||[];let _0xc13d12=![];for(let _0x4f17ea=_0x4528e2[_0x4324e4(0x102)]-0x1;_0x4f17ea>=0x0;_0x4f17ea--){const _0x33a5b2=_0x4528e2[_0x4f17ea],_0x55759a=_0x514a0f[_0x4324e4(0xc9)](_0x400164=>normalize(_0x400164[_0x4324e4(0x126)])===normalize(_0x33a5b2)&&(_0x400164[_0x4324e4(0x12c)]===_0x4324e4(0xe9)||_0x400164[_0x4324e4(0x12c)]==='thermostat'));if(!_0x55759a){_0x54c7c4['log']['warn'](_0x4324e4(0x109)+_0x33a5b2+'\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.'),_0x4528e2[_0x4324e4(0x139)](_0x4f17ea,0x1),_0xc13d12=!![];continue;}if(_0x55759a){const _0x25651c=await findRelatedId(_0x54c7c4,_0x55759a['id'],_0x4324e4(0x12f)),_0x598695=await _0x54c7c4['getForeignStateAsync'](_0x55759a['id']);if(_0x25651c){const _0x91092b=await _0x54c7c4[_0x4324e4(0xe0)](_0x25651c);if(_0x91092b&&typeof _0x91092b[_0x4324e4(0x131)]===_0x4324e4(0xd8)){let _0x53981a=![],_0x47d318='';Math['abs'](_0x91092b[_0x4324e4(0x131)]-ECO_TEMP)>0.5&&(_0x53981a=!![],_0x47d318=_0x4324e4(0x117));if(!_0x53981a&&_0x598695&&typeof _0x598695[_0x4324e4(0x131)]==='number'){const _0x15b548=_0x1e594a[_0x33a5b2]||_0x1e594a[_0x4324e4(0x145)]||0x15;_0x598695[_0x4324e4(0x131)]<_0x15b548+0.2&&(_0x53981a=!![],_0x47d318=_0x4324e4(0xff));}if(_0x53981a){if(_0x47d318===_0x4324e4(0x117)){_0x54c7c4[_0x4324e4(0x172)][_0x4324e4(0x15d)](_0x4324e4(0x183)+_0x33a5b2+'\x20ist\x20auf\x20'+_0x91092b['val']+_0x4324e4(0x135)+ECO_TEMP+_0x4324e4(0x174));const _0x223813=lastActions[_0x4324e4(0x16c)+_0x33a5b2],_0x2427a2=_0x223813&&Date['now']()-_0x223813<0x2*0x3c*0x3e8;if(!_0x2427a2&&_0x91092b[_0x4324e4(0x131)]>ECO_TEMP+0.5){_0x54c7c4[_0x4324e4(0x15c)]&&(_0x54c7c4[_0x4324e4(0x172)]['info'](_0x4324e4(0x18f)+_0x33a5b2+_0x4324e4(0x125)),_0x54c7c4[_0x4324e4(0x15c)](_0x4324e4(0xf0),{'room':_0x33a5b2}));const _0x572542=_0x33a5b2+'_'+new Date()['getHours']();if(!_0x4a1f02[_0x572542]){_0x4a1f02[_0x572542]=0x1;if(!_0x4a1f02[_0x4324e4(0xdc)])_0x4a1f02[_0x4324e4(0xdc)]={};_0x4a1f02[_0x4324e4(0xdc)][_0x572542]=Date[_0x4324e4(0x128)](),_0x1b6074=!![];}}else _0x2427a2&&_0x54c7c4['log']['info'](_0x4324e4(0x110)+_0x33a5b2+'\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.');}else{if(_0x47d318===_0x4324e4(0xff)){let _0x43b24a=![];if(_0x3a465e[_0x4324e4(0xc9)](_0x1e0101=>_0x1e0101[_0x4324e4(0x17c)]===_0x33a5b2))_0x43b24a=!![];const _0x530df2=_0x514a0f[_0x4324e4(0x11d)](_0x4a2248=>normalize(_0x4a2248['location'])===normalize(_0x33a5b2)&&(_0x4a2248[_0x4324e4(0x12c)]==='window'||_0x4a2248[_0x4324e4(0x12c)]==='sensor'||_0x4a2248[_0x4324e4(0x12c)]===_0x4324e4(0x13a)));for(const _0x14ebc0 of _0x530df2){try{const _0x2eb4db=await _0x54c7c4[_0x4324e4(0xe0)](_0x14ebc0['id']);if(_0x2eb4db&&(_0x2eb4db[_0x4324e4(0x131)]===!![]||_0x2eb4db[_0x4324e4(0x131)]===0x1||String(_0x2eb4db[_0x4324e4(0x131)])[_0x4324e4(0x171)]()==='open'))_0x43b24a=!![];}catch(_0x2c3f9f){}}if(_0x43b24a)_0x54c7c4[_0x4324e4(0x172)][_0x4324e4(0x15d)]('üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20'+_0x33a5b2+'\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.');else{const _0x377e3f=_0x1e594a[_0x33a5b2]||_0x1e594a[_0x4324e4(0x145)]||0x15;_0x54c7c4[_0x4324e4(0x172)][_0x4324e4(0x15d)](_0x4324e4(0x157)+_0x33a5b2+_0x4324e4(0x134)+_0x598695['val']+'¬∞C\x20<\x20'+(_0x377e3f+0.2)+_0x4324e4(0x113)),await _0x54c7c4['setForeignStateAsync'](_0x25651c,_0x377e3f),await logAutomationAction(_0x54c7c4,_0x4324e4(0x181)+_0x33a5b2+_0x4324e4(0x13b)+_0x377e3f+'¬∞C'),lastActions[_0x4324e4(0x17a)+_0x33a5b2]=Date[_0x4324e4(0x128)]();}}}_0x4528e2[_0x4324e4(0x139)](_0x4f17ea,0x1),_0xc13d12=!![];}}}}}_0xc13d12&&await _0x54c7c4[_0x4324e4(0x175)](_0x549866,{'val':JSON[_0x4324e4(0x142)](_0x4528e2),'ack':!![]}),_0x1b6074&&await _0x54c7c4['setStateAsync']('analysis.energy.rlPenalties',{'val':JSON['stringify'](_0x4a1f02),'ack':!![]});}catch(_0x611ae5){}}async function applyEnergySavings(_0x1acc95,_0x1d4efa){const _0x469c0b=a1_0x8fd5b0;await cleanupGhostInterventions(_0x1acc95);if(!_0x1d4efa||_0x1d4efa[_0x469c0b(0x102)]===0x0)return;const _0x1bd3c2=_0x1acc95[_0x469c0b(0x10b)][_0x469c0b(0x180)]||[],_0x39831e=Date[_0x469c0b(0x128)]();for(const _0x302a7e of _0x1d4efa){const _0x390dbe=_0x302a7e[_0x469c0b(0x17c)],_0x510347=_0x302a7e[_0x469c0b(0x176)],_0x13ac6e=_0x302a7e[_0x469c0b(0x169)]||0x15;if(lastActions['rescue_'+_0x390dbe]&&_0x39831e-lastActions[_0x469c0b(0x17a)+_0x390dbe]<RESCUE_LOCK_MS)continue;const _0x4cf6d3=_0x1bd3c2[_0x469c0b(0xc9)](_0x4402e4=>normalize(_0x4402e4[_0x469c0b(0x126)])===normalize(_0x390dbe)&&(_0x4402e4[_0x469c0b(0x12c)]==='temperature'||_0x4402e4[_0x469c0b(0x12c)]===_0x469c0b(0x15f)));if(!_0x4cf6d3)continue;const _0x1b18b4=await findRelatedId(_0x1acc95,_0x4cf6d3['id'],_0x469c0b(0x12f));if(_0x1b18b4){if(lastActions['mpc_'+_0x390dbe]&&_0x39831e-lastActions[_0x469c0b(0xce)+_0x390dbe]<0x1e*0x3c*0x3e8)continue;const _0x4d40a1=await _0x1acc95[_0x469c0b(0xe0)](_0x1b18b4);if(_0x4d40a1&&typeof _0x4d40a1[_0x469c0b(0x131)]==='number'){const _0x17adcd=_0x4d40a1['val'];_0x17adcd!==ECO_TEMP&&await manageMpcIntervention(_0x1acc95,_0x390dbe,'remove');if(_0x510347>0x1e)_0x17adcd>ECO_TEMP+0.5&&(_0x1acc95[_0x469c0b(0x172)][_0x469c0b(0x15d)](_0x469c0b(0xd2)+_0x390dbe+_0x469c0b(0x18a)+ECO_TEMP+'¬∞C!\x20(Puffer:\x20'+_0x510347+_0x469c0b(0xdd)),await _0x1acc95[_0x469c0b(0x118)](_0x1b18b4,ECO_TEMP),await manageMpcIntervention(_0x1acc95,_0x390dbe,_0x469c0b(0x163)),lastActions['mpc_'+_0x390dbe]=_0x39831e,await logAutomationAction(_0x1acc95,_0x469c0b(0x130)+_0x390dbe+_0x469c0b(0x10f)+ECO_TEMP+'¬∞C'));else _0x510347<=0xf&&(_0x17adcd<_0x13ac6e&&(_0x1acc95[_0x469c0b(0x172)][_0x469c0b(0x15d)](_0x469c0b(0xf8)+_0x390dbe+_0x469c0b(0xcc)+_0x13ac6e+'¬∞C!\x20(Puffer\x20leer).'),await _0x1acc95[_0x469c0b(0x118)](_0x1b18b4,_0x13ac6e),await manageMpcIntervention(_0x1acc95,_0x390dbe,'remove'),lastActions[_0x469c0b(0xce)+_0x390dbe]=_0x39831e,await logAutomationAction(_0x1acc95,_0x469c0b(0x130)+_0x390dbe+_0x469c0b(0x115)+_0x13ac6e+'¬∞C')));}}else _0x1acc95['log']['warn'](_0x469c0b(0xf7)+_0x390dbe+_0x469c0b(0xf4));}}module[a1_0x8fd5b0(0x184)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};