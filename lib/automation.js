const a1_0x3f8f4e=a1_0x3ed1;(function(_0x58e68e,_0x44a942){const _0x3b290a=a1_0x3ed1,_0x1338d6=_0x58e68e();while(!![]){try{const _0x348f61=parseInt(_0x3b290a(0x209))/0x1+-parseInt(_0x3b290a(0x217))/0x2+-parseInt(_0x3b290a(0x201))/0x3+parseInt(_0x3b290a(0x167))/0x4+-parseInt(_0x3b290a(0x1b0))/0x5+-parseInt(_0x3b290a(0x208))/0x6*(-parseInt(_0x3b290a(0x196))/0x7)+parseInt(_0x3b290a(0x218))/0x8;if(_0x348f61===_0x44a942)break;else _0x1338d6['push'](_0x1338d6['shift']());}catch(_0x570a21){_0x1338d6['push'](_0x1338d6['shift']());}}}(a1_0x56a3,0x38b2e));const a1_0x5acacd=(function(){let _0x1a62bf=!![];return function(_0x491f06,_0x5c04e0){const _0x50c63f=_0x1a62bf?function(){const _0x39c97e=a1_0x3ed1;if(_0x5c04e0){const _0x322819=_0x5c04e0[_0x39c97e(0x18e)](_0x491f06,arguments);return _0x5c04e0=null,_0x322819;}}:function(){};return _0x1a62bf=![],_0x50c63f;};}()),a1_0x16e719=a1_0x5acacd(this,function(){const _0x74c594=a1_0x3ed1;return a1_0x16e719['toString']()['search'](_0x74c594(0x1c9))[_0x74c594(0x185)]()['constructor'](a1_0x16e719)[_0x74c594(0x18f)](_0x74c594(0x1c9));});a1_0x16e719();'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x1ce7a5){const _0x93155=a1_0x3ed1;if(!_0x1ce7a5)return'';return _0x1ce7a5[_0x93155(0x175)]()[_0x93155(0x223)](/\s+/g,'')[_0x93155(0x1d4)]();}function getWarmupRobust(_0x59c3a4,_0x3b3da7){const _0x532453=a1_0x3ed1;if(!_0x59c3a4||!_0x3b3da7)return 0x3c;if(_0x59c3a4[_0x3b3da7]!==undefined)return _0x59c3a4[_0x3b3da7];const _0x3979d4=_0x3b3da7[_0x532453(0x175)]()[_0x532453(0x223)](/√§/g,'ae')['replace'](/√∂/g,'oe')[_0x532453(0x223)](/√º/g,'ue')[_0x532453(0x223)](/√ü/g,'ss')[_0x532453(0x223)](/\s+/g,'_')[_0x532453(0x223)](/[^a-z0-9_]/g,'');if(_0x59c3a4[_0x3979d4]!==undefined)return _0x59c3a4[_0x3979d4];return 0x3c;}async function logAutomationAction(_0x27285e,_0x627dee){const _0x4b5d2d=a1_0x3ed1;await _0x27285e[_0x4b5d2d(0x1e4)](_0x4b5d2d(0x1cd),{'val':_0x627dee,'ack':!![]});try{const _0x3a59dc=_0x4b5d2d(0x19c),_0x1fd8e1=await _0x27285e[_0x4b5d2d(0x192)](_0x3a59dc);let _0x59bcf8=[];if(_0x1fd8e1&&_0x1fd8e1[_0x4b5d2d(0x16f)])try{_0x59bcf8=JSON[_0x4b5d2d(0x1c4)](_0x1fd8e1[_0x4b5d2d(0x16f)]);}catch(_0x5eed33){}_0x59bcf8['unshift']({'ts':Date['now'](),'msg':_0x627dee});if(_0x59bcf8[_0x4b5d2d(0x1a0)]>0x32)_0x59bcf8=_0x59bcf8[_0x4b5d2d(0x1bd)](0x0,0x32);await _0x27285e[_0x4b5d2d(0x1e4)](_0x3a59dc,{'val':JSON[_0x4b5d2d(0x1d7)](_0x59bcf8),'ack':!![]});}catch(_0x1972c3){}}function a1_0x56a3(){const _0x366f35=['¬∞C\x20(nicht\x20','[WATCHDOG]\x20','Classic','default','consultButler','toUpperCase','current_heating_setpoint','level.temperature','common','setStateAsync','local_temperature','number','analysis.energy.warmupTargets','[FORCE]\x20','calendarInstance','calendarSelection','mpc_','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','¬∞C).\x20Entferne\x20Status.','warn','split','PERFECT','add','occupied_heating_setpoint','.1.LEVEL','level.valve','thermostat.setpoint','event','approved','\x20min)','\x20->\x20','reason','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20','¬∞C\x20(via\x20','setForeignStateAsync','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','location','log','663471CJxDym','thermostatMapping',':\x20Aufheizen\x20auf\x20','eventStart','analysis.energy.mpcActiveInterventions','\x20gefunden!','splice','75918wFPETR','296651iMMbzZ','valveMapping','date','until','off','analysis.energy.activeEnforcements','sort','remove','Unbekannt','getForeignStateAsync','stellwert','.4.SET_TEMPERATURE','.1.TEMPERATURE','filter','819958xqbIJp','4809448EvuEGS','from','role','¬∞C).\x20Sparmodus\x20beendet!','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','devices','now','SET','exports','localeCompare','getTime','replace','useCalendar','contact','error','getHours','494372dYmSUV','Unknown','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','ankunft','switch','Nicht\x20gefunden','string','actual','val','ACTUAL_TEMPERATURE','setpoint','message','push','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','toLowerCase','\x20erreicht\x20Limit\x20(','_meta','findIndex','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','find','valve_position','write','analysis.energy.ventilationAlerts','TRAIN_RL_PENALTY','indexOf','analysis.energy.schedulePreview','analysis.energy.rlPenalties','üö®\x20[MPC\x20WATCHDOG]\x20','target_temperature','too_cold','toString','state','¬∞C\x20(Vorlauf:\x20','level','name','manual','[MPC]\x20','¬∞C\x20->\x20','SET_POINT_TEMPERATURE','apply','search','map','\x20auf\x20','getStateAsync','analysis.automation.confidenceThreshold','includes','values','56rCwRLc','entries','sendToPythonWrapper','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','dimmer','analysis.energy.warmupSources','analysis.automation.actionLog',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','r√ºckkehr','urlaub\x20ende','length','isArray','.data.table','¬∞C!\x20(Puffer\x20leer).','hm-rpc','active','temperature','cal_','Manuelles\x20Mapping','openknx','room','messwert','sensor','üßπ\x20[MPC\x20CLEANUP]\x20','analysis.automation.mode','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','1296375YBrTYu','set','target','config','currentSystemMode','Ist',':\x20Absenkung\x20auf\x20','.1.ACTUAL_TEMPERATURE','¬∞C\x20<\x20','score','getForeignObjectAsync','.1.SET_POINT_TEMPERATURE','_calName','slice','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','\x20min).','analysis.energy.warmupTimes','valve','triggerTime','Auto-Erkennung','parse','_date','thermostat','info','normal','(((.+)+)+)+$','\x20wieder\x20auf\x20','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','rescue_','analysis.automation.lastAction','position','üìÖ\x20[MPC\x20INFO]\x20','\x20->\x20Schalte\x20','forEach','pi_heating_demand','summary','trim','¬∞C\x20(Kalender-Schutz)','Soll','stringify','type','ACTUAL','¬∞C!\x20(Puffer:\x20'];a1_0x56a3=function(){return _0x366f35;};return a1_0x56a3();}async function handlePrediction(_0x3a445a,_0x3cf245,_0x7728ea){const _0x3107b1=a1_0x3ed1;if(!_0x3cf245||_0x3cf245===_0x3107b1(0x168))return;let _0x5363a0=_0x3107b1(0x20d),_0x43fc49=0.6;try{const _0x386e77=await _0x3a445a[_0x3107b1(0x192)](_0x3107b1(0x1ae));if(_0x386e77&&_0x386e77[_0x3107b1(0x16f)])_0x5363a0=_0x386e77[_0x3107b1(0x16f)];const _0x2d80ba=await _0x3a445a[_0x3107b1(0x192)](_0x3107b1(0x193));if(_0x2d80ba&&_0x2d80ba[_0x3107b1(0x16f)])_0x43fc49=_0x2d80ba[_0x3107b1(0x16f)];}catch(_0x422152){}if(_0x5363a0===_0x3107b1(0x20d)||_0x7728ea<_0x43fc49)return;const _0x5b8ffe=Date['now']();if(lastActions[_0x3cf245]&&_0x5b8ffe-lastActions[_0x3cf245]<COOLDOWN_MS)return;const _0x5c6eb7=_0x3a445a[_0x3107b1(0x1b3)][_0x3107b1(0x21d)]||[],_0x10ecc5=normalize(_0x3cf245),_0x32df88=_0x5c6eb7['find'](_0x27a6c5=>normalize(_0x27a6c5['location'])===_0x10ecc5&&(_0x27a6c5[_0x3107b1(0x1d8)]==='light'||_0x27a6c5[_0x3107b1(0x1d8)]===_0x3107b1(0x19a)||_0x27a6c5[_0x3107b1(0x1d8)]===_0x3107b1(0x16b)));if(!_0x32df88)return;const _0x335f24=await aiAgent[_0x3107b1(0x1df)](_0x3a445a,_0x3cf245,_0x32df88[_0x3107b1(0x189)],_0x7728ea);if(!_0x335f24[_0x3107b1(0x1f7)])return;const _0x3ff583='Pr√§diktion:\x20'+_0x3cf245+_0x3107b1(0x1d0)+_0x32df88['name']+'\x20('+_0x335f24[_0x3107b1(0x1fa)]+')';await logAutomationAction(_0x3a445a,'['+_0x5363a0[_0x3107b1(0x1e0)]()+']\x20'+_0x3ff583);if(_0x5363a0===_0x3107b1(0x1a5)){const _0x465e6c=await _0x3a445a[_0x3107b1(0x212)](_0x32df88['id']);(!_0x465e6c||!_0x465e6c[_0x3107b1(0x16f)]&&_0x465e6c['val']!==!![])&&await _0x3a445a[_0x3107b1(0x1fd)](_0x32df88['id'],!![]),lastActions[_0x3cf245]=_0x5b8ffe;}}async function findRelatedId(_0x3ca32b,_0x4045fa,_0x377159='setpoint'){const _0x294b62=a1_0x3ed1;if(_0x377159===_0x294b62(0x171)&&_0x3ca32b[_0x294b62(0x1b3)]['thermostatMapping']){let _0x517ca0=_0x3ca32b[_0x294b62(0x1b3)][_0x294b62(0x202)];if(typeof _0x517ca0===_0x294b62(0x16d))try{_0x517ca0=JSON[_0x294b62(0x1c4)](_0x517ca0);}catch(_0x45773){}if(_0x517ca0&&_0x517ca0[_0x4045fa])return _0x517ca0[_0x4045fa];}if(_0x377159===_0x294b62(0x1c1)&&_0x3ca32b[_0x294b62(0x1b3)]['valveMapping']){let _0x5c1ed2=_0x3ca32b[_0x294b62(0x1b3)]['valveMapping'];if(typeof _0x5c1ed2===_0x294b62(0x16d))try{_0x5c1ed2=JSON[_0x294b62(0x1c4)](_0x5c1ed2);}catch(_0x59e328){}if(_0x5c1ed2&&_0x5c1ed2[_0x4045fa])return _0x5c1ed2[_0x4045fa];}let _0x45f6ec=[];if(_0x377159==='setpoint')_0x45f6ec=[{'s':_0x294b62(0x1b7),'t':_0x294b62(0x1bb)},{'s':_0x294b62(0x215),'t':_0x294b62(0x1bb)},{'s':_0x294b62(0x215),'t':_0x294b62(0x214)},{'s':_0x294b62(0x170),'t':_0x294b62(0x18d)},{'s':_0x294b62(0x1e5),'t':_0x294b62(0x1f2)},{'s':'local_temperature','t':_0x294b62(0x1e1)},{'s':'temperature','t':_0x294b62(0x183)},{'s':_0x294b62(0x1d9),'t':_0x294b62(0x21f)},{'s':_0x294b62(0x1b5),'t':_0x294b62(0x1d6)},{'s':_0x294b62(0x1a6),'t':_0x294b62(0x171)}];else _0x377159===_0x294b62(0x1c1)&&(_0x45f6ec=[{'s':_0x294b62(0x1b7),'t':_0x294b62(0x1f3)},{'s':_0x294b62(0x215),'t':_0x294b62(0x1f3)},{'s':'.1.TEMPERATURE','t':'.4.VALVE_STATE'},{'s':_0x294b62(0x1e5),'t':_0x294b62(0x1d2)},{'s':'temperature','t':_0x294b62(0x17b)},{'s':_0x294b62(0x1a6),'t':_0x294b62(0x188)}]);for(const _0x259608 of _0x45f6ec){if(_0x4045fa[_0x294b62(0x194)](_0x259608['s'])){const _0x3bbd29=_0x4045fa[_0x294b62(0x223)](_0x259608['s'],_0x259608['t']),_0x184c28=await _0x3ca32b[_0x294b62(0x1ba)](_0x3bbd29);if(_0x184c28)return _0x3bbd29;}}try{const _0x20c268=_0x4045fa[_0x294b62(0x1ef)]('.');if(_0x20c268[_0x294b62(0x1a0)]>0x2){const _0x374e89=_0x20c268['slice'](0x0,-0x1)['join']('.'),_0x550af8=await _0x3ca32b['getForeignObjectsAsync'](_0x374e89+'.*'),_0x5dcba4=[],_0x36411e=_0x4045fa['split'](/[._]+/)['filter'](_0x38200c=>![_0x294b62(0x1a9),'0',_0x294b62(0x1a4),'ist','wert',_0x294b62(0x1a6),_0x294b62(0x16e),_0x294b62(0x1ac),_0x294b62(0x1ab),_0x294b62(0x186)][_0x294b62(0x194)](_0x38200c[_0x294b62(0x175)]()));for(const [_0xa9bd3c,_0xceb9c3]of Object[_0x294b62(0x197)](_0x550af8)){if(_0xa9bd3c===_0x4045fa)continue;if(_0xceb9c3&&_0xceb9c3[_0x294b62(0x1e3)]){const _0x3a9cb9=_0xa9bd3c['toLowerCase'](),_0x381a7b=(_0xceb9c3[_0x294b62(0x1e3)][_0x294b62(0x21a)]||'')[_0x294b62(0x175)](),_0x52ee74=(_0xceb9c3[_0x294b62(0x1e3)]['unit']||'')[_0x294b62(0x175)]();let _0x47241b=![];if(_0x377159===_0x294b62(0x171)&&_0xceb9c3['common'][_0x294b62(0x17c)]===!![])_0x47241b=_0x3a9cb9['includes'](_0x294b62(0x1b1))||_0x3a9cb9[_0x294b62(0x194)]('soll')||_0x3a9cb9[_0x294b62(0x194)]('target')||_0x381a7b['includes'](_0x294b62(0x1e2))||_0x381a7b['includes'](_0x294b62(0x1f5));else _0x377159===_0x294b62(0x1c1)&&(_0x47241b=_0x3a9cb9[_0x294b62(0x194)](_0x294b62(0x188))||_0x3a9cb9[_0x294b62(0x194)](_0x294b62(0x1c1))||_0x3a9cb9[_0x294b62(0x194)](_0x294b62(0x213))||_0x3a9cb9[_0x294b62(0x194)](_0x294b62(0x1ce))||_0x381a7b['includes'](_0x294b62(0x1f4))||_0x381a7b[_0x294b62(0x194)]('value.valve')||_0x52ee74['includes']('%'));if(_0x47241b){const _0x31390c=_0xa9bd3c['split'](/[._]+/)[_0x294b62(0x190)](_0x99f334=>_0x99f334[_0x294b62(0x175)]());let _0x5c78bf=0x0;_0x36411e['forEach'](_0x5f16e8=>{if(_0x31390c['includes'](_0x5f16e8['toLowerCase']()))_0x5c78bf++;}),_0x5dcba4[_0x294b62(0x173)]({'id':_0xa9bd3c,'score':_0x5c78bf});}}}if(_0x5dcba4[_0x294b62(0x1a0)]>0x0){_0x5dcba4[_0x294b62(0x20f)]((_0x30fb77,_0x54da5c)=>_0x54da5c[_0x294b62(0x1b9)]-_0x30fb77[_0x294b62(0x1b9)]);if(_0x5dcba4[0x0][_0x294b62(0x1b9)]>0x0)return _0x5dcba4[0x0]['id'];}}}catch(_0x1bf95a){}return null;}async function scanThermostats(_0x431df6){const _0x339b7c=a1_0x3ed1,_0x18f7a8=_0x431df6['config']['devices']||[],_0xb99a84=[],_0x4416e8=_0x18f7a8['filter'](_0x404f07=>_0x404f07['id']&&_0x404f07['id'][_0x339b7c(0x194)]('temperature')||_0x404f07[_0x339b7c(0x1d8)]&&['temperature',_0x339b7c(0x1c6),'sensor'][_0x339b7c(0x194)](_0x404f07[_0x339b7c(0x1d8)])||_0x404f07[_0x339b7c(0x189)]&&_0x404f07['name'][_0x339b7c(0x175)]()[_0x339b7c(0x194)]('temp'));for(const _0x1eccf1 of _0x4416e8){const _0x17c97f=await findRelatedId(_0x431df6,_0x1eccf1['id'],_0x339b7c(0x171)),_0x406e7a=await findRelatedId(_0x431df6,_0x1eccf1['id'],_0x339b7c(0x1c1));let _0xf1bdf7=_0x339b7c(0x16c),_0x57f4d9=![],_0x2aad36=_0x431df6[_0x339b7c(0x1b3)][_0x339b7c(0x202)]||{};if(typeof _0x2aad36==='string')try{_0x2aad36=JSON[_0x339b7c(0x1c4)](_0x2aad36);}catch(_0x50b73b){}let _0x483c03=_0x431df6[_0x339b7c(0x1b3)][_0x339b7c(0x20a)]||{};if(typeof _0x483c03==='string')try{_0x483c03=JSON[_0x339b7c(0x1c4)](_0x483c03);}catch(_0x1420d4){}if(_0x2aad36[_0x1eccf1['id']]&&_0x2aad36[_0x1eccf1['id']]===_0x17c97f||_0x483c03[_0x1eccf1['id']]&&_0x483c03[_0x1eccf1['id']]===_0x406e7a)_0xf1bdf7=_0x339b7c(0x1a8),_0x57f4d9=!![];else(_0x17c97f||_0x406e7a)&&(_0xf1bdf7=_0x339b7c(0x1c3));_0xb99a84[_0x339b7c(0x173)]({'room':_0x1eccf1[_0x339b7c(0x1ff)]||_0x339b7c(0x211),'sensorId':_0x1eccf1['id'],'setpointId':_0x17c97f||'-','valveId':_0x406e7a||'-','source':_0xf1bdf7,'isManual':_0x57f4d9,'status':_0x17c97f&&_0x406e7a?_0x339b7c(0x1f0):_0x17c97f?'OK':'Fehlt'});}return _0xb99a84[_0x339b7c(0x20f)]((_0x291306,_0x3f31ec)=>_0x291306[_0x339b7c(0x1aa)][_0x339b7c(0x221)](_0x3f31ec[_0x339b7c(0x1aa)]));}async function updateSchedulePreview(_0x35037c){const _0x5353b7=a1_0x3ed1;if(!_0x35037c['config']['useCalendar']||!_0x35037c['config'][_0x5353b7(0x1e9)])return;let _0x5389ec={};try{const _0x5e0098=await _0x35037c[_0x5353b7(0x192)]('analysis.energy.warmupTimes');if(_0x5e0098&&_0x5e0098[_0x5353b7(0x16f)])_0x5389ec=JSON[_0x5353b7(0x1c4)](_0x5e0098[_0x5353b7(0x16f)]);}catch(_0x38494f){}const _0x2c3b2b=[],_0x4c99ea=Date['now'](),_0x51e3c3=0x30*0x3c*0x3c*0x3e8;try{const _0x1edaf9=await _0x35037c[_0x5353b7(0x212)](_0x35037c[_0x5353b7(0x1b3)][_0x5353b7(0x1e9)]+_0x5353b7(0x1a2));if(!_0x1edaf9||!_0x1edaf9[_0x5353b7(0x16f)])return;const _0x1ab533=JSON[_0x5353b7(0x1c4)](_0x1edaf9[_0x5353b7(0x16f)]),_0x4350ec=_0x35037c[_0x5353b7(0x1b3)]['calendarSelection']||[],_0x177077=_0x35037c['config'][_0x5353b7(0x21d)]||[],_0x17b44e=new Set();_0x177077[_0x5353b7(0x1d1)](_0x207a50=>{const _0x368cd2=_0x5353b7;if(_0x207a50[_0x368cd2(0x1ff)])_0x17b44e[_0x368cd2(0x1f1)](_0x207a50[_0x368cd2(0x1ff)]);});for(const _0x23686e of _0x1ab533){if(_0x23686e[_0x5353b7(0x1bc)]&&_0x4350ec['length']>0x0&&!_0x4350ec['includes'](_0x23686e[_0x5353b7(0x1bc)]))continue;const _0x22d390=_0x23686e[_0x5353b7(0x1c5)]||_0x23686e[_0x5353b7(0x204)]||_0x23686e[_0x5353b7(0x20b)];if(!_0x22d390)continue;const _0x111ce1=new Date(_0x22d390),_0x22fa97=_0x111ce1[_0x5353b7(0x222)]();if(isNaN(_0x22fa97))continue;if(_0x22fa97<_0x4c99ea)continue;if(_0x22fa97>_0x4c99ea+_0x51e3c3)continue;const _0x1e19a7=(_0x23686e[_0x5353b7(0x1f6)]||_0x23686e[_0x5353b7(0x1d3)]||'')['toLowerCase']();let _0x4e0191=![],_0x1b8484=[],_0x4f5d7e=_0x23686e['event']||_0x23686e[_0x5353b7(0x1d3)]||_0x5353b7(0x211);if(_0x1e19a7[_0x5353b7(0x194)]('urlaub\x20ende')||_0x1e19a7[_0x5353b7(0x194)]('r√ºckkehr')||_0x1e19a7['includes'](_0x5353b7(0x16a)))_0x4e0191=!![],_0x1b8484=Array[_0x5353b7(0x219)](_0x17b44e);else for(const _0x50988a of _0x17b44e){if(_0x1e19a7[_0x5353b7(0x194)](_0x50988a['toLowerCase']()))_0x1b8484['push'](_0x50988a);}_0x1b8484['length']>0x0&&_0x1b8484['forEach'](_0x3f4053=>{const _0x1354f5=_0x5353b7;let _0x34eb69=0x3c;if(_0x4e0191){let _0x4b9597=0x0;Object['values'](_0x5389ec)[_0x1354f5(0x1d1)](_0x169e30=>{if(_0x169e30>_0x4b9597)_0x4b9597=_0x169e30;}),_0x34eb69=_0x4b9597>0x0?_0x4b9597:0x78;}else _0x34eb69=getWarmupRobust(_0x5389ec,_0x3f4053);const _0xda58e0=new Date(_0x22fa97-_0x34eb69*0xea60);_0x2c3b2b['push']({'eventTime':_0x22fa97,'triggerTime':_0xda58e0[_0x1354f5(0x222)](),'room':_0x3f4053,'minutes':_0x34eb69,'reason':_0x4f5d7e,'isGlobal':_0x4e0191});});}}catch(_0x48af35){}_0x2c3b2b[_0x5353b7(0x20f)]((_0x3fcf7c,_0x59b415)=>_0x3fcf7c[_0x5353b7(0x1c2)]-_0x59b415['triggerTime']);const _0xae6506=_0x2c3b2b[_0x5353b7(0x1bd)](0x0,0x5);await _0x35037c[_0x5353b7(0x1e4)](_0x5353b7(0x180),{'val':JSON['stringify'](_0xae6506),'ack':!![]});}async function monitorEnforcements(_0x358ea9){const _0x57ef4f=a1_0x3ed1;try{const _0x19c7f4=_0x57ef4f(0x20e),_0x4f794a=await _0x358ea9[_0x57ef4f(0x192)](_0x19c7f4);if(!_0x4f794a||!_0x4f794a[_0x57ef4f(0x16f)])return;let _0x4d6279=[];try{_0x4d6279=JSON[_0x57ef4f(0x1c4)](_0x4f794a[_0x57ef4f(0x16f)]);}catch(_0x55f70a){return;}if(!Array[_0x57ef4f(0x1a1)](_0x4d6279)||_0x4d6279[_0x57ef4f(0x1a0)]===0x0)return;const _0x276732=Date['now'](),_0x42e087=_0x358ea9[_0x57ef4f(0x1b3)]['devices']||[];let _0x4df8ea=![];for(let _0x39cc15=_0x4d6279[_0x57ef4f(0x1a0)]-0x1;_0x39cc15>=0x0;_0x39cc15--){const _0x54c87c=_0x4d6279[_0x39cc15];if(_0x276732>=_0x54c87c[_0x57ef4f(0x20c)]){_0x358ea9[_0x57ef4f(0x200)][_0x57ef4f(0x1c7)](_0x57ef4f(0x1be)+_0x54c87c['room']+'\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.'),_0x4d6279[_0x57ef4f(0x207)](_0x39cc15,0x1),_0x4df8ea=!![];continue;}const _0xaa8ab8=_0x42e087[_0x57ef4f(0x17a)](_0x5d6147=>normalize(_0x5d6147[_0x57ef4f(0x1ff)])===normalize(_0x54c87c[_0x57ef4f(0x1aa)])&&(_0x5d6147['type']===_0x57ef4f(0x1a6)||_0x5d6147[_0x57ef4f(0x1d8)]===_0x57ef4f(0x1c6)));if(_0xaa8ab8){const _0x18c49c=await findRelatedId(_0x358ea9,_0xaa8ab8['id'],_0x57ef4f(0x171));if(_0x18c49c){const _0x44a3ba=await _0x358ea9[_0x57ef4f(0x212)](_0x18c49c);_0x44a3ba&&typeof _0x44a3ba['val']===_0x57ef4f(0x1e6)&&(_0x44a3ba[_0x57ef4f(0x16f)]<0xf&&(_0x358ea9[_0x57ef4f(0x200)]['warn'](_0x57ef4f(0x1fe)+_0x54c87c[_0x57ef4f(0x1aa)]+_0x57ef4f(0x191)+_0x44a3ba[_0x57ef4f(0x16f)]+'¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20'+_0x54c87c[_0x57ef4f(0x1b2)]+'¬∞C.'),await _0x358ea9[_0x57ef4f(0x1fd)](_0x18c49c,_0x54c87c[_0x57ef4f(0x1b2)]),await logAutomationAction(_0x358ea9,_0x57ef4f(0x1e8)+_0x54c87c['room']+':\x20'+_0x44a3ba[_0x57ef4f(0x16f)]+_0x57ef4f(0x18c)+_0x54c87c[_0x57ef4f(0x1b2)]+_0x57ef4f(0x1d5))));}}}_0x4df8ea&&await _0x358ea9[_0x57ef4f(0x1e4)](_0x19c7f4,{'val':JSON[_0x57ef4f(0x1d7)](_0x4d6279),'ack':!![]});}catch(_0x3447b8){_0x358ea9[_0x57ef4f(0x200)][_0x57ef4f(0x165)]('Enforcement\x20Monitor\x20Error:\x20'+_0x3447b8[_0x57ef4f(0x172)]);}}async function checkCalendarTriggers(_0x46eb62){const _0x3c8cab=a1_0x3ed1;if(!_0x46eb62['config'][_0x3c8cab(0x163)]||!_0x46eb62[_0x3c8cab(0x1b3)][_0x3c8cab(0x1e9)])return;await updateSchedulePreview(_0x46eb62);let _0x48ab24={},_0x3a4cb3={};try{const _0x45667c=await _0x46eb62[_0x3c8cab(0x192)](_0x3c8cab(0x1c0));if(_0x45667c&&_0x45667c[_0x3c8cab(0x16f)])_0x48ab24=JSON['parse'](_0x45667c[_0x3c8cab(0x16f)]);const _0xaa01f0=await _0x46eb62['getStateAsync'](_0x3c8cab(0x19b));if(_0xaa01f0&&_0xaa01f0['val'])_0x3a4cb3=JSON[_0x3c8cab(0x1c4)](_0xaa01f0[_0x3c8cab(0x16f)]);}catch(_0x42a745){}let _0x52b730={'default':0x15};try{const _0x40d45c=await _0x46eb62[_0x3c8cab(0x192)](_0x3c8cab(0x1e7));if(_0x40d45c&&_0x40d45c[_0x3c8cab(0x16f)])_0x52b730=JSON['parse'](_0x40d45c[_0x3c8cab(0x16f)]);}catch(_0x23adfb){}let _0x4cb88f=[];try{const _0x40495f=await _0x46eb62[_0x3c8cab(0x192)]('analysis.energy.activeEnforcements');if(_0x40495f&&_0x40495f[_0x3c8cab(0x16f)])_0x4cb88f=JSON[_0x3c8cab(0x1c4)](_0x40495f[_0x3c8cab(0x16f)]);}catch(_0x426271){}try{const _0x2a7c11=await _0x46eb62['getForeignStateAsync'](_0x46eb62['config']['calendarInstance']+_0x3c8cab(0x1a2));if(!_0x2a7c11||!_0x2a7c11['val'])return;const _0x395e0f=JSON[_0x3c8cab(0x1c4)](_0x2a7c11['val']),_0x3c922f=Date[_0x3c8cab(0x21e)](),_0x5b528f=_0x46eb62[_0x3c8cab(0x1b3)]['devices']||[],_0x494bc0=_0x46eb62[_0x3c8cab(0x1b3)][_0x3c8cab(0x1ea)]||[];let _0xdc85be=![];for(const _0x5ad0ea of _0x395e0f){if(_0x5ad0ea['_calName']&&_0x494bc0[_0x3c8cab(0x1a0)]>0x0&&!_0x494bc0[_0x3c8cab(0x194)](_0x5ad0ea['_calName']))continue;const _0x1c2ecd=_0x5ad0ea[_0x3c8cab(0x1c5)]||_0x5ad0ea[_0x3c8cab(0x204)]||_0x5ad0ea[_0x3c8cab(0x20b)];if(!_0x1c2ecd)continue;const _0x21b721=new Date(_0x1c2ecd);if(isNaN(_0x21b721[_0x3c8cab(0x222)]()))continue;const _0x20dad4=(_0x5ad0ea['event']||_0x5ad0ea[_0x3c8cab(0x1d3)]||'')[_0x3c8cab(0x175)]();if(_0x20dad4['includes'](_0x3c8cab(0x19f))||_0x20dad4[_0x3c8cab(0x194)](_0x3c8cab(0x19e))||_0x20dad4[_0x3c8cab(0x194)](_0x3c8cab(0x16a))){let _0x2c51fb=0x0;Object[_0x3c8cab(0x195)](_0x48ab24)['forEach'](_0x1e909c=>{if(_0x1e909c>_0x2c51fb)_0x2c51fb=_0x1e909c;});if(_0x2c51fb===0x0)_0x2c51fb=0x78;const _0x451c28=_0x21b721[_0x3c8cab(0x222)]()-_0x2c51fb*0xea60;_0x3c922f>=_0x451c28&&_0x3c922f<_0x21b721['getTime']()&&(_0x46eb62[_0x3c8cab(0x1b4)]!==_0x3c8cab(0x1c8)&&(_0x46eb62[_0x3c8cab(0x200)][_0x3c8cab(0x1c7)]('üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20'+_0x2c51fb+_0x3c8cab(0x1bf)),await _0x46eb62[_0x3c8cab(0x1e4)]('system.mode',{'val':'normal','ack':![]})));}for(const _0x546209 of _0x5b528f){if(_0x546209[_0x3c8cab(0x1ff)]){const _0x4c797f=_0x546209['location'][_0x3c8cab(0x175)](),_0x56784b=(_0x546209[_0x3c8cab(0x189)]||'')[_0x3c8cab(0x175)]();let _0x14e517=_0x20dad4[_0x3c8cab(0x194)](_0x4c797f);!_0x14e517&&_0x56784b['length']>0x3&&_0x20dad4['includes'](_0x56784b)&&(_0x14e517=!![]);if(_0x14e517){const _0x1c090e=getWarmupRobust(_0x48ab24,_0x546209['location']),_0x5ae4a6=_0x3a4cb3[_0x546209[_0x3c8cab(0x1ff)]]||_0x3c8cab(0x1dd),_0x125651=_0x21b721[_0x3c8cab(0x222)]()-_0x1c090e*0xea60;if(_0x3c922f>=_0x125651&&_0x3c922f<_0x21b721[_0x3c8cab(0x222)]()){const _0x5b5a74=lastActions[_0x3c8cab(0x1a7)+_0x546209['location']];if(_0x5b5a74&&_0x3c922f-_0x5b5a74<CAL_COOLDOWN_MS)continue;const _0x5c663f=await findRelatedId(_0x46eb62,_0x546209['id'],_0x3c8cab(0x171));if(_0x5c663f){let _0x7a9986=_0x52b730[_0x546209[_0x3c8cab(0x1ff)]];if(_0x7a9986===undefined)_0x7a9986=_0x52b730[_0x3c8cab(0x1de)];if(_0x7a9986===undefined)_0x7a9986=0x15;const _0x3a02a1=await _0x46eb62['getForeignStateAsync'](_0x5c663f);if(_0x3a02a1&&typeof _0x3a02a1[_0x3c8cab(0x16f)]===_0x3c8cab(0x1e6)&&_0x3a02a1[_0x3c8cab(0x16f)]<_0x7a9986-0.5){_0x46eb62[_0x3c8cab(0x200)]['info']('üìÖ\x20SMART\x20SCHEDULE\x20['+_0x5ae4a6+']:\x20Raum-Trigger\x20\x27'+_0x546209[_0x3c8cab(0x1ff)]+'\x27\x20(Match:\x20'+_0x20dad4+')\x20aktiv.\x20Heize\x20auf\x20'+_0x7a9986+_0x3c8cab(0x187)+_0x1c090e+_0x3c8cab(0x1bf)),await _0x46eb62[_0x3c8cab(0x1fd)](_0x5c663f,_0x7a9986),await logAutomationAction(_0x46eb62,'[CAL]\x20'+_0x546209['location']+_0x3c8cab(0x1f9)+_0x7a9986+_0x3c8cab(0x1fc)+_0x5ae4a6+')'),lastActions[_0x3c8cab(0x1a7)+_0x546209[_0x3c8cab(0x1ff)]]=_0x3c922f;const _0x50b789=_0x4cb88f[_0x3c8cab(0x178)](_0x5eb925=>_0x5eb925[_0x3c8cab(0x1aa)]===_0x546209[_0x3c8cab(0x1ff)]);if(_0x50b789!==-0x1)_0x4cb88f['splice'](_0x50b789,0x1);_0x4cb88f[_0x3c8cab(0x173)]({'room':_0x546209[_0x3c8cab(0x1ff)],'target':_0x7a9986,'until':_0x21b721['getTime']()}),_0xdc85be=!![];}}}}}}}_0xdc85be&&await _0x46eb62[_0x3c8cab(0x1e4)](_0x3c8cab(0x20e),{'val':JSON[_0x3c8cab(0x1d7)](_0x4cb88f),'ack':!![]});}catch(_0x584ab1){_0x46eb62['log'][_0x3c8cab(0x1ee)]('Calendar\x20Check\x20Error:\x20'+_0x584ab1[_0x3c8cab(0x172)]);}}async function manageMpcIntervention(_0xa62f20,_0x3993f1,_0xc70404){const _0x3ec6d3=a1_0x3ed1;try{const _0x2a7b2d=_0x3ec6d3(0x205),_0x342e9c=await _0xa62f20[_0x3ec6d3(0x192)](_0x2a7b2d);let _0x28cc9b=[];if(_0x342e9c&&_0x342e9c[_0x3ec6d3(0x16f)])try{_0x28cc9b=JSON[_0x3ec6d3(0x1c4)](_0x342e9c['val']);}catch(_0x1ae480){}const _0x31e724=_0x28cc9b[_0x3ec6d3(0x17f)](_0x3993f1);if(_0xc70404===_0x3ec6d3(0x1f1))_0x31e724===-0x1&&(_0x28cc9b[_0x3ec6d3(0x173)](_0x3993f1),await _0xa62f20[_0x3ec6d3(0x1e4)](_0x2a7b2d,{'val':JSON['stringify'](_0x28cc9b),'ack':!![]}));else _0xc70404===_0x3ec6d3(0x210)&&(_0x31e724!==-0x1&&(_0x28cc9b[_0x3ec6d3(0x207)](_0x31e724,0x1),await _0xa62f20['setStateAsync'](_0x2a7b2d,{'val':JSON[_0x3ec6d3(0x1d7)](_0x28cc9b),'ack':!![]})));}catch(_0x2af46a){}}function a1_0x3ed1(_0xcc4b42,_0x1771a4){const _0x179d6e=a1_0x56a3();return a1_0x3ed1=function(_0x16e719,_0x5acacd){_0x16e719=_0x16e719-0x163;let _0x56a3eb=_0x179d6e[_0x16e719];return _0x56a3eb;},a1_0x3ed1(_0xcc4b42,_0x1771a4);}async function cleanupGhostInterventions(_0x45db80){const _0x38339f=a1_0x3ed1;try{const _0x4b4091=_0x38339f(0x205),_0x1b00c3=await _0x45db80[_0x38339f(0x192)](_0x4b4091);if(!_0x1b00c3||!_0x1b00c3['val'])return;const _0x11ed92=JSON[_0x38339f(0x1c4)](_0x1b00c3[_0x38339f(0x16f)]);if(!Array[_0x38339f(0x1a1)](_0x11ed92)||_0x11ed92[_0x38339f(0x1a0)]===0x0)return;let _0x5cec6b={'default':0x15};try{const _0x7e39d6=await _0x45db80[_0x38339f(0x192)](_0x38339f(0x1e7));if(_0x7e39d6&&_0x7e39d6['val'])_0x5cec6b=JSON[_0x38339f(0x1c4)](_0x7e39d6['val']);}catch(_0x9a839e){}let _0x28fcb5=[];try{const _0x1653ca=await _0x45db80[_0x38339f(0x192)](_0x38339f(0x17d));if(_0x1653ca&&_0x1653ca[_0x38339f(0x16f)])_0x28fcb5=JSON[_0x38339f(0x1c4)](_0x1653ca[_0x38339f(0x16f)]);}catch(_0x5249dc){}let _0x508f56={},_0x531342=![];try{const _0x39319f=await _0x45db80[_0x38339f(0x192)](_0x38339f(0x181));if(_0x39319f&&_0x39319f['val'])_0x508f56=JSON[_0x38339f(0x1c4)](_0x39319f[_0x38339f(0x16f)]);}catch(_0x205049){}if(_0x508f56[_0x38339f(0x177)]){const _0x297af6=Date[_0x38339f(0x21e)]();for(const [_0x501021,_0x35cef8]of Object['entries'](_0x508f56[_0x38339f(0x177)])){_0x297af6-_0x35cef8>PENALTY_TTL&&(delete _0x508f56[_0x501021],delete _0x508f56[_0x38339f(0x177)][_0x501021],_0x531342=!![],_0x45db80['log'][_0x38339f(0x1c7)](_0x38339f(0x174)+_0x501021+_0x38339f(0x1af)));}}const _0x3445ee=_0x45db80[_0x38339f(0x1b3)]['devices']||[];let _0x3365dd=![];for(let _0x508525=_0x11ed92[_0x38339f(0x1a0)]-0x1;_0x508525>=0x0;_0x508525--){const _0x51ad27=_0x11ed92[_0x508525],_0x1c8c98=_0x3445ee[_0x38339f(0x17a)](_0x54324e=>normalize(_0x54324e['location'])===normalize(_0x51ad27)&&(_0x54324e[_0x38339f(0x1d8)]===_0x38339f(0x1a6)||_0x54324e[_0x38339f(0x1d8)]===_0x38339f(0x1c6)));if(!_0x1c8c98){_0x45db80[_0x38339f(0x200)][_0x38339f(0x1ee)](_0x38339f(0x169)+_0x51ad27+_0x38339f(0x199)),_0x11ed92['splice'](_0x508525,0x1),_0x3365dd=!![];continue;}if(_0x1c8c98){const _0x24ff86=await findRelatedId(_0x45db80,_0x1c8c98['id'],_0x38339f(0x171)),_0x11aaaa=await _0x45db80[_0x38339f(0x212)](_0x1c8c98['id']);if(_0x24ff86){const _0x541961=await _0x45db80['getForeignStateAsync'](_0x24ff86);if(_0x541961&&typeof _0x541961[_0x38339f(0x16f)]==='number'){let _0x3f0405=![],_0x330e33='';Math['abs'](_0x541961[_0x38339f(0x16f)]-ECO_TEMP)>0.5&&(_0x3f0405=!![],_0x330e33='manual');if(!_0x3f0405&&_0x11aaaa&&typeof _0x11aaaa[_0x38339f(0x16f)]===_0x38339f(0x1e6)){const _0x5a9136=_0x5cec6b[_0x51ad27]||_0x5cec6b[_0x38339f(0x1de)]||0x15;_0x11aaaa[_0x38339f(0x16f)]<_0x5a9136+0.2&&(_0x3f0405=!![],_0x330e33=_0x38339f(0x184));}if(_0x3f0405){if(_0x330e33===_0x38339f(0x18a)){_0x45db80['log'][_0x38339f(0x1c7)](_0x38339f(0x1ad)+_0x51ad27+'\x20ist\x20auf\x20'+_0x541961[_0x38339f(0x16f)]+_0x38339f(0x1db)+ECO_TEMP+_0x38339f(0x1ed));const _0x57df1d=lastActions[_0x38339f(0x1a7)+_0x51ad27],_0x54c7cd=_0x57df1d&&Date[_0x38339f(0x21e)]()-_0x57df1d<0x2*0x3c*0x3e8;if(!_0x54c7cd&&_0x541961['val']>ECO_TEMP+0.5){_0x45db80['sendToPythonWrapper']&&(_0x45db80[_0x38339f(0x200)][_0x38339f(0x1c7)](_0x38339f(0x1cb)+_0x51ad27+'\x20wurde\x20manuell\x20erh√∂ht.'),_0x45db80[_0x38339f(0x198)](_0x38339f(0x17e),{'room':_0x51ad27}));const _0x8f2bef=_0x51ad27+'_'+new Date()[_0x38339f(0x166)]();if(!_0x508f56[_0x8f2bef]){_0x508f56[_0x8f2bef]=0x1;if(!_0x508f56[_0x38339f(0x177)])_0x508f56[_0x38339f(0x177)]={};_0x508f56[_0x38339f(0x177)][_0x8f2bef]=Date[_0x38339f(0x21e)](),_0x531342=!![];}}else _0x54c7cd&&_0x45db80['log'][_0x38339f(0x1c7)](_0x38339f(0x1cf)+_0x51ad27+_0x38339f(0x21c));}else{if(_0x330e33===_0x38339f(0x184)){let _0x5d971e=![];if(_0x28fcb5[_0x38339f(0x17a)](_0xd81ca3=>_0xd81ca3[_0x38339f(0x1aa)]===_0x51ad27))_0x5d971e=!![];const _0x26eda2=_0x3445ee[_0x38339f(0x216)](_0xd250d=>normalize(_0xd250d[_0x38339f(0x1ff)])===normalize(_0x51ad27)&&(_0xd250d[_0x38339f(0x1d8)]==='window'||_0xd250d[_0x38339f(0x1d8)]===_0x38339f(0x1ac)||_0xd250d['type']===_0x38339f(0x164)));for(const _0x2ce48f of _0x26eda2){try{const _0x5e22c9=await _0x45db80[_0x38339f(0x212)](_0x2ce48f['id']);if(_0x5e22c9&&(_0x5e22c9[_0x38339f(0x16f)]===!![]||_0x5e22c9[_0x38339f(0x16f)]===0x1||String(_0x5e22c9[_0x38339f(0x16f)])['toLowerCase']()==='open'))_0x5d971e=!![];}catch(_0x2dfe1c){}}if(_0x5d971e)_0x45db80['log'][_0x38339f(0x1c7)]('üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20'+_0x51ad27+_0x38339f(0x179));else{const _0x22edb5=_0x5cec6b[_0x51ad27]||_0x5cec6b['default']||0x15;_0x45db80[_0x38339f(0x200)][_0x38339f(0x1c7)](_0x38339f(0x182)+_0x51ad27+_0x38339f(0x176)+_0x11aaaa[_0x38339f(0x16f)]+_0x38339f(0x1b8)+(_0x22edb5+0.2)+_0x38339f(0x21b)),await _0x45db80['setForeignStateAsync'](_0x24ff86,_0x22edb5),await logAutomationAction(_0x45db80,_0x38339f(0x1dc)+_0x51ad27+_0x38339f(0x19d)+_0x22edb5+'¬∞C'),lastActions[_0x38339f(0x1cc)+_0x51ad27]=Date[_0x38339f(0x21e)]();}}}_0x11ed92['splice'](_0x508525,0x1),_0x3365dd=!![];}}}}}_0x3365dd&&await _0x45db80[_0x38339f(0x1e4)](_0x4b4091,{'val':JSON[_0x38339f(0x1d7)](_0x11ed92),'ack':!![]}),_0x531342&&await _0x45db80['setStateAsync'](_0x38339f(0x181),{'val':JSON[_0x38339f(0x1d7)](_0x508f56),'ack':!![]});}catch(_0x5da394){}}async function applyEnergySavings(_0x84b841,_0x23e9dd){const _0x44ccae=a1_0x3ed1;await cleanupGhostInterventions(_0x84b841);if(!_0x23e9dd||_0x23e9dd['length']===0x0)return;const _0x1c3f67=_0x84b841['config'][_0x44ccae(0x21d)]||[],_0x43a6b3=Date[_0x44ccae(0x21e)]();for(const _0x440820 of _0x23e9dd){const _0x3ebf59=_0x440820['room'],_0x717763=_0x440820['minutes_safe'],_0x10dd75=_0x440820['target']||0x15;if(lastActions[_0x44ccae(0x1cc)+_0x3ebf59]&&_0x43a6b3-lastActions[_0x44ccae(0x1cc)+_0x3ebf59]<RESCUE_LOCK_MS)continue;const _0xd99cc8=_0x1c3f67[_0x44ccae(0x17a)](_0x40e349=>normalize(_0x40e349[_0x44ccae(0x1ff)])===normalize(_0x3ebf59)&&(_0x40e349[_0x44ccae(0x1d8)]==='temperature'||_0x40e349[_0x44ccae(0x1d8)]===_0x44ccae(0x1c6)));if(!_0xd99cc8)continue;const _0x4d2f6b=await findRelatedId(_0x84b841,_0xd99cc8['id'],_0x44ccae(0x171));if(_0x4d2f6b){if(lastActions[_0x44ccae(0x1eb)+_0x3ebf59]&&_0x43a6b3-lastActions['mpc_'+_0x3ebf59]<0x1e*0x3c*0x3e8)continue;const _0x1fdb74=await _0x84b841['getForeignStateAsync'](_0x4d2f6b);if(_0x1fdb74&&typeof _0x1fdb74[_0x44ccae(0x16f)]===_0x44ccae(0x1e6)){const _0xb0d5a4=_0x1fdb74['val'];_0xb0d5a4!==ECO_TEMP&&await manageMpcIntervention(_0x84b841,_0x3ebf59,_0x44ccae(0x210));if(_0x717763>0x1e)_0xb0d5a4>ECO_TEMP+0.5&&(_0x84b841[_0x44ccae(0x200)][_0x44ccae(0x1c7)](_0x44ccae(0x1fb)+_0x3ebf59+'\x20auf\x20'+ECO_TEMP+_0x44ccae(0x1da)+_0x717763+_0x44ccae(0x1f8)),await _0x84b841['setForeignStateAsync'](_0x4d2f6b,ECO_TEMP),await manageMpcIntervention(_0x84b841,_0x3ebf59,_0x44ccae(0x1f1)),lastActions[_0x44ccae(0x1eb)+_0x3ebf59]=_0x43a6b3,await logAutomationAction(_0x84b841,_0x44ccae(0x18b)+_0x3ebf59+_0x44ccae(0x1b6)+ECO_TEMP+'¬∞C'));else _0x717763<=0xf&&(_0xb0d5a4<_0x10dd75&&(_0x84b841[_0x44ccae(0x200)][_0x44ccae(0x1c7)]('üî•\x20[MPC\x20ACTION]\x20Heize\x20'+_0x3ebf59+_0x44ccae(0x1ca)+_0x10dd75+_0x44ccae(0x1a3)),await _0x84b841[_0x44ccae(0x1fd)](_0x4d2f6b,_0x10dd75),await manageMpcIntervention(_0x84b841,_0x3ebf59,_0x44ccae(0x210)),lastActions[_0x44ccae(0x1eb)+_0x3ebf59]=_0x43a6b3,await logAutomationAction(_0x84b841,_0x44ccae(0x18b)+_0x3ebf59+_0x44ccae(0x203)+_0x10dd75+'¬∞C')));}}else _0x84b841[_0x44ccae(0x200)][_0x44ccae(0x1ee)](_0x44ccae(0x1ec)+_0x3ebf59+_0x44ccae(0x206));}}module[a1_0x3f8f4e(0x220)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};