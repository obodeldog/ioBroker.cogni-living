const a1_0x4f864d=a1_0x4f6d;(function(_0x4607c3,_0x2c5cfd){const _0x1ef0e1=a1_0x4f6d,_0x4fb2e4=_0x4607c3();while(!![]){try{const _0xe97952=-parseInt(_0x1ef0e1(0x1c5))/0x1+parseInt(_0x1ef0e1(0x186))/0x2+parseInt(_0x1ef0e1(0x1bf))/0x3+-parseInt(_0x1ef0e1(0x1de))/0x4*(parseInt(_0x1ef0e1(0x12e))/0x5)+parseInt(_0x1ef0e1(0x138))/0x6+-parseInt(_0x1ef0e1(0x189))/0x7*(-parseInt(_0x1ef0e1(0x1c7))/0x8)+-parseInt(_0x1ef0e1(0x130))/0x9;if(_0xe97952===_0x2c5cfd)break;else _0x4fb2e4['push'](_0x4fb2e4['shift']());}catch(_0x2e31bd){_0x4fb2e4['push'](_0x4fb2e4['shift']());}}}(a1_0x3ba7,0xcea42));const a1_0x3737e5=(function(){let _0x101100=!![];return function(_0x467933,_0x2fe1d9){const _0x35722=_0x101100?function(){const _0x22c27d=a1_0x4f6d;if(_0x2fe1d9){const _0x495922=_0x2fe1d9[_0x22c27d(0x156)](_0x467933,arguments);return _0x2fe1d9=null,_0x495922;}}:function(){};return _0x101100=![],_0x35722;};}()),a1_0x3ed018=a1_0x3737e5(this,function(){const _0x4f85bd=a1_0x4f6d;return a1_0x3ed018[_0x4f85bd(0x19b)]()[_0x4f85bd(0x183)](_0x4f85bd(0x1b7))['toString']()[_0x4f85bd(0x184)](a1_0x3ed018)[_0x4f85bd(0x183)](_0x4f85bd(0x1b7));});a1_0x3ed018();'use strict';const aiAgent=require(a1_0x4f864d(0x190)),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x5897f7){const _0x4536ba=a1_0x4f864d;if(!_0x5897f7)return'';return _0x5897f7[_0x4536ba(0x1d4)]()[_0x4536ba(0x14a)](/\s+/g,'')['trim']();}function getWarmupRobust(_0x55ad8f,_0x5af3bd){const _0x102dca=a1_0x4f864d;if(!_0x55ad8f||!_0x5af3bd)return 0x3c;if(_0x55ad8f[_0x5af3bd]!==undefined)return _0x55ad8f[_0x5af3bd];const _0x1ee5d7=_0x5af3bd[_0x102dca(0x1d4)]()[_0x102dca(0x14a)](/√§/g,'ae')['replace'](/√∂/g,'oe')['replace'](/√º/g,'ue')[_0x102dca(0x14a)](/√ü/g,'ss')[_0x102dca(0x14a)](/\s+/g,'_')[_0x102dca(0x14a)](/[^a-z0-9_]/g,'');if(_0x55ad8f[_0x1ee5d7]!==undefined)return _0x55ad8f[_0x1ee5d7];return 0x3c;}async function logAutomationAction(_0x4bdc6f,_0x21a499){const _0x5a2f9a=a1_0x4f864d;await _0x4bdc6f['setStateAsync'](_0x5a2f9a(0x12f),{'val':_0x21a499,'ack':!![]});try{const _0x1c81cd=_0x5a2f9a(0x1d6),_0x42e1ba=await _0x4bdc6f[_0x5a2f9a(0x1a2)](_0x1c81cd);let _0xe0314=[];if(_0x42e1ba&&_0x42e1ba[_0x5a2f9a(0x15d)])try{_0xe0314=JSON[_0x5a2f9a(0x170)](_0x42e1ba[_0x5a2f9a(0x15d)]);}catch(_0x390087){}_0xe0314[_0x5a2f9a(0x1d9)]({'ts':Date[_0x5a2f9a(0x13a)](),'msg':_0x21a499});if(_0xe0314[_0x5a2f9a(0x192)]>0x32)_0xe0314=_0xe0314['slice'](0x0,0x32);await _0x4bdc6f[_0x5a2f9a(0x13c)](_0x1c81cd,{'val':JSON[_0x5a2f9a(0x17a)](_0xe0314),'ack':!![]});}catch(_0x50194f){}}async function handlePrediction(_0x3aa878,_0x3cc926,_0x4423c3){const _0x57f61d=a1_0x4f864d;if(!_0x3cc926||_0x3cc926===_0x57f61d(0x149))return;let _0x1988af=_0x57f61d(0x169),_0x1ba104=0.6;try{const _0x42b2c3=await _0x3aa878[_0x57f61d(0x1a2)](_0x57f61d(0x17e));if(_0x42b2c3&&_0x42b2c3[_0x57f61d(0x15d)])_0x1988af=_0x42b2c3[_0x57f61d(0x15d)];const _0x370c99=await _0x3aa878[_0x57f61d(0x1a2)](_0x57f61d(0x1d7));if(_0x370c99&&_0x370c99[_0x57f61d(0x15d)])_0x1ba104=_0x370c99['val'];}catch(_0x33bd5c){}if(_0x1988af==='off'||_0x4423c3<_0x1ba104)return;const _0x529c1a=Date[_0x57f61d(0x13a)]();if(lastActions[_0x3cc926]&&_0x529c1a-lastActions[_0x3cc926]<COOLDOWN_MS)return;const _0x220be9=_0x3aa878[_0x57f61d(0x1db)]['devices']||[],_0x48c253=normalize(_0x3cc926),_0x409f72=_0x220be9[_0x57f61d(0x15e)](_0x34a478=>normalize(_0x34a478[_0x57f61d(0x199)])===_0x48c253&&(_0x34a478[_0x57f61d(0x13d)]===_0x57f61d(0x143)||_0x34a478['type']===_0x57f61d(0x14c)||_0x34a478[_0x57f61d(0x13d)]===_0x57f61d(0x1b1)));if(!_0x409f72)return;const _0x1c3c5a=await aiAgent[_0x57f61d(0x1ec)](_0x3aa878,_0x3cc926,_0x409f72[_0x57f61d(0x1b4)],_0x4423c3);if(!_0x1c3c5a[_0x57f61d(0x1ba)])return;const _0x3ca1d4='Pr√§diktion:\x20'+_0x3cc926+_0x57f61d(0x137)+_0x409f72[_0x57f61d(0x1b4)]+'\x20('+_0x1c3c5a[_0x57f61d(0x195)]+')';await logAutomationAction(_0x3aa878,'['+_0x1988af['toUpperCase']()+']\x20'+_0x3ca1d4);if(_0x1988af===_0x57f61d(0x150)){const _0x28952f=await _0x3aa878[_0x57f61d(0x12d)](_0x409f72['id']);(!_0x28952f||!_0x28952f['val']&&_0x28952f[_0x57f61d(0x15d)]!==!![])&&await _0x3aa878[_0x57f61d(0x181)](_0x409f72['id'],!![]),lastActions[_0x3cc926]=_0x529c1a;}}function a1_0x3ba7(){const _0x330752=['.1.SET_POINT_TEMPERATURE','analysis.energy.rlPenalties','wert','push','¬∞C\x20(Vorlauf:\x20','_calName','.1.ACTUAL_TEMPERATURE','analysis.energy.activeEnforcements','level.valve','split','pi_heating_demand','\x20min).','toLowerCase','üìÖ\x20SMART\x20SCHEDULE\x20[','analysis.automation.actionLog','analysis.automation.confidenceThreshold','state','unshift','¬∞C!\x20(Puffer:\x20','config','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','set','4tvXrkM','normal','valveMapping','¬∞C.','value.valve','string','devices','\x20min)','[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20','stellwert','level.temperature','remove','.4.VALVE_STATE','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20','consultButler','message','Soll','getForeignStateAsync','7481455sxDZxg','analysis.automation.lastAction','6308721MZmlqE','default','¬∞C\x20<\x20','minutes_safe','actual','unit','Nicht\x20gefunden','\x20->\x20Schalte\x20','7326090PLRfcs','number','now','sensor','setStateAsync','type','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','summary',')\x20aktiv.\x20Heize\x20auf\x20','date','sendToPythonWrapper','light',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','warn','score','exports','info','Unknown','replace','Unbekannt','dimmer','common','values','üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20','active','too_cold','sort','filter','slice','Ist','apply','temp','current_heating_setpoint','until','.data.table','¬∞C\x20(nicht\x20','valve_position','val','find','Calendar\x20Check\x20Error:\x20','from','forEach','urlaub\x20ende','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','join','¬∞C\x20->\x20',':\x20Absenkung\x20auf\x20','¬∞C).\x20Sparmodus\x20beendet!','hm-rpc','off','messwert','openknx','SET_POINT_TEMPERATURE','findIndex','ankunft','rescue_','parse','[MPC]\x20','[WATCHDOG]\x20','analysis.energy.schedulePreview','_date',':\x20Aufheizen\x20auf\x20','system.mode','¬∞C\x20(Kalender-Schutz)','calendarInstance','SET','stringify','\x20erreicht\x20Limit\x20(','setpoint','¬∞C\x20(via\x20','analysis.automation.mode','entries','\x20ist\x20auf\x20','setForeignStateAsync','mpc_','search','constructor','splice','1911892pOoExm','getForeignObjectAsync','eventStart','3227KNDBph','isArray','¬∞C!\x20(Puffer\x20leer).','.1.LEVEL','\x20auf\x20','abs','üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20','./ai_agent','useCalendar','length','target_temperature','üìÖ\x20[MPC\x20INFO]\x20','reason','analysis.energy.warmupTargets','\x20wieder\x20auf\x20','localeCompare','location','cal_','toString','manual','write','level','thermostatMapping','[FORCE]\x20','Manuelles\x20Mapping','getStateAsync','indexOf','valve','target','add','analysis.energy.warmupTimes','contact','includes','getTime','local_temperature','room','role','temperature','üî•\x20[MPC\x20ACTION]\x20Heize\x20','Auto-Erkennung','switch','¬∞C).\x20Entferne\x20Status.','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','name','Fehlt','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','(((.+)+)+)+$','calendarSelection','log','approved','thermostat','.1.TEMPERATURE','r√ºckkehr','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','3034182EouGKF','analysis.energy.mpcActiveInterventions','ACTUAL_TEMPERATURE','analysis.energy.ventilationAlerts','event','Classic','339235JJTzuT','_meta','3376xKXlmB'];a1_0x3ba7=function(){return _0x330752;};return a1_0x3ba7();}async function findRelatedId(_0x235034,_0x1018d6,_0x4cf03b='setpoint'){const _0x4b5d27=a1_0x4f864d;if(_0x4cf03b==='setpoint'&&_0x235034['config'][_0x4b5d27(0x19f)]){let _0x19e05f=_0x235034['config'][_0x4b5d27(0x19f)];if(typeof _0x19e05f===_0x4b5d27(0x1e3))try{_0x19e05f=JSON[_0x4b5d27(0x170)](_0x19e05f);}catch(_0x1a48ee){}if(_0x19e05f&&_0x19e05f[_0x1018d6])return _0x19e05f[_0x1018d6];}if(_0x4cf03b===_0x4b5d27(0x1a4)&&_0x235034[_0x4b5d27(0x1db)][_0x4b5d27(0x1e0)]){let _0x50b342=_0x235034[_0x4b5d27(0x1db)][_0x4b5d27(0x1e0)];if(typeof _0x50b342===_0x4b5d27(0x1e3))try{_0x50b342=JSON[_0x4b5d27(0x170)](_0x50b342);}catch(_0x5650cd){}if(_0x50b342&&_0x50b342[_0x1018d6])return _0x50b342[_0x1018d6];}let _0x88c152=[];if(_0x4cf03b===_0x4b5d27(0x17c))_0x88c152=[{'s':'.1.ACTUAL_TEMPERATURE','t':_0x4b5d27(0x1c8)},{'s':_0x4b5d27(0x1bc),'t':_0x4b5d27(0x1c8)},{'s':_0x4b5d27(0x1bc),'t':'.4.SET_TEMPERATURE'},{'s':_0x4b5d27(0x1c1),'t':_0x4b5d27(0x16c)},{'s':_0x4b5d27(0x1ab),'t':'occupied_heating_setpoint'},{'s':_0x4b5d27(0x1ab),'t':_0x4b5d27(0x158)},{'s':_0x4b5d27(0x1ae),'t':_0x4b5d27(0x193)},{'s':'ACTUAL','t':_0x4b5d27(0x179)},{'s':_0x4b5d27(0x155),'t':_0x4b5d27(0x1ee)},{'s':_0x4b5d27(0x1ae),'t':'setpoint'}];else _0x4cf03b==='valve'&&(_0x88c152=[{'s':_0x4b5d27(0x1ce),'t':_0x4b5d27(0x18c)},{'s':_0x4b5d27(0x1bc),'t':_0x4b5d27(0x18c)},{'s':_0x4b5d27(0x1bc),'t':_0x4b5d27(0x1ea)},{'s':_0x4b5d27(0x1ab),'t':_0x4b5d27(0x1d2)},{'s':'temperature','t':_0x4b5d27(0x15c)},{'s':_0x4b5d27(0x1ae),'t':_0x4b5d27(0x19e)}]);for(const _0x27f268 of _0x88c152){if(_0x1018d6['includes'](_0x27f268['s'])){const _0x2bdfd5=_0x1018d6[_0x4b5d27(0x14a)](_0x27f268['s'],_0x27f268['t']),_0x4b1029=await _0x235034[_0x4b5d27(0x187)](_0x2bdfd5);if(_0x4b1029)return _0x2bdfd5;}}try{const _0x41d4bd=_0x1018d6[_0x4b5d27(0x1d1)]('.');if(_0x41d4bd[_0x4b5d27(0x192)]>0x2){const _0x200dc8=_0x41d4bd[_0x4b5d27(0x154)](0x0,-0x1)[_0x4b5d27(0x164)]('.'),_0x3e84f6=await _0x235034['getForeignObjectsAsync'](_0x200dc8+'.*'),_0xc28b00=[],_0x45cec9=_0x1018d6[_0x4b5d27(0x1d1)](/[._]+/)[_0x4b5d27(0x153)](_0x374a10=>![_0x4b5d27(0x16b),'0',_0x4b5d27(0x168),'ist',_0x4b5d27(0x1ca),'temperature',_0x4b5d27(0x134),_0x4b5d27(0x13b),_0x4b5d27(0x16a),_0x4b5d27(0x1d8)]['includes'](_0x374a10[_0x4b5d27(0x1d4)]()));for(const [_0x345e60,_0x3f89e9]of Object[_0x4b5d27(0x17f)](_0x3e84f6)){if(_0x345e60===_0x1018d6)continue;if(_0x3f89e9&&_0x3f89e9[_0x4b5d27(0x14d)]){const _0x2032d0=_0x345e60[_0x4b5d27(0x1d4)](),_0x4cd617=(_0x3f89e9[_0x4b5d27(0x14d)][_0x4b5d27(0x1ad)]||'')[_0x4b5d27(0x1d4)](),_0x57127f=(_0x3f89e9[_0x4b5d27(0x14d)][_0x4b5d27(0x135)]||'')['toLowerCase']();let _0x1f3653=![];if(_0x4cf03b==='setpoint'&&_0x3f89e9[_0x4b5d27(0x14d)][_0x4b5d27(0x19d)]===!![])_0x1f3653=_0x2032d0[_0x4b5d27(0x1a9)](_0x4b5d27(0x1dd))||_0x2032d0[_0x4b5d27(0x1a9)]('soll')||_0x2032d0['includes'](_0x4b5d27(0x1a5))||_0x4cd617[_0x4b5d27(0x1a9)](_0x4b5d27(0x1e8))||_0x4cd617[_0x4b5d27(0x1a9)]('thermostat.setpoint');else _0x4cf03b==='valve'&&(_0x1f3653=_0x2032d0[_0x4b5d27(0x1a9)](_0x4b5d27(0x19e))||_0x2032d0['includes']('valve')||_0x2032d0[_0x4b5d27(0x1a9)](_0x4b5d27(0x1e7))||_0x2032d0[_0x4b5d27(0x1a9)]('position')||_0x4cd617[_0x4b5d27(0x1a9)](_0x4b5d27(0x1d0))||_0x4cd617[_0x4b5d27(0x1a9)](_0x4b5d27(0x1e2))||_0x57127f[_0x4b5d27(0x1a9)]('%'));if(_0x1f3653){const _0x438fc7=_0x345e60[_0x4b5d27(0x1d1)](/[._]+/)['map'](_0x95a2be=>_0x95a2be[_0x4b5d27(0x1d4)]());let _0x1ee40d=0x0;_0x45cec9[_0x4b5d27(0x161)](_0x4946d2=>{const _0x15acd9=_0x4b5d27;if(_0x438fc7[_0x15acd9(0x1a9)](_0x4946d2[_0x15acd9(0x1d4)]()))_0x1ee40d++;}),_0xc28b00['push']({'id':_0x345e60,'score':_0x1ee40d});}}}if(_0xc28b00[_0x4b5d27(0x192)]>0x0){_0xc28b00[_0x4b5d27(0x152)]((_0x5960ee,_0x17895c)=>_0x17895c[_0x4b5d27(0x146)]-_0x5960ee[_0x4b5d27(0x146)]);if(_0xc28b00[0x0][_0x4b5d27(0x146)]>0x0)return _0xc28b00[0x0]['id'];}}}catch(_0x128962){}return null;}async function scanThermostats(_0x540a37){const _0x5540f5=a1_0x4f864d,_0x431182=_0x540a37[_0x5540f5(0x1db)][_0x5540f5(0x1e4)]||[],_0x59dde7=[],_0x316015=_0x431182[_0x5540f5(0x153)](_0x2ed704=>_0x2ed704['id']&&_0x2ed704['id']['includes'](_0x5540f5(0x1ae))||_0x2ed704['type']&&[_0x5540f5(0x1ae),_0x5540f5(0x1bb),_0x5540f5(0x13b)][_0x5540f5(0x1a9)](_0x2ed704[_0x5540f5(0x13d)])||_0x2ed704[_0x5540f5(0x1b4)]&&_0x2ed704['name']['toLowerCase']()[_0x5540f5(0x1a9)](_0x5540f5(0x157)));for(const _0xd027e6 of _0x316015){const _0x208eca=await findRelatedId(_0x540a37,_0xd027e6['id'],_0x5540f5(0x17c)),_0x2939f8=await findRelatedId(_0x540a37,_0xd027e6['id'],'valve');let _0xb31b77=_0x5540f5(0x136),_0x8f5c75=![],_0x245a53=_0x540a37[_0x5540f5(0x1db)]['thermostatMapping']||{};if(typeof _0x245a53===_0x5540f5(0x1e3))try{_0x245a53=JSON['parse'](_0x245a53);}catch(_0x48911c){}let _0x5477c7=_0x540a37[_0x5540f5(0x1db)][_0x5540f5(0x1e0)]||{};if(typeof _0x5477c7==='string')try{_0x5477c7=JSON[_0x5540f5(0x170)](_0x5477c7);}catch(_0x1ce519){}if(_0x245a53[_0xd027e6['id']]&&_0x245a53[_0xd027e6['id']]===_0x208eca||_0x5477c7[_0xd027e6['id']]&&_0x5477c7[_0xd027e6['id']]===_0x2939f8)_0xb31b77=_0x5540f5(0x1a1),_0x8f5c75=!![];else(_0x208eca||_0x2939f8)&&(_0xb31b77=_0x5540f5(0x1b0));_0x59dde7[_0x5540f5(0x1cb)]({'room':_0xd027e6[_0x5540f5(0x199)]||_0x5540f5(0x14b),'sensorId':_0xd027e6['id'],'setpointId':_0x208eca||'-','valveId':_0x2939f8||'-','source':_0xb31b77,'isManual':_0x8f5c75,'status':_0x208eca&&_0x2939f8?'PERFECT':_0x208eca?'OK':_0x5540f5(0x1b5)});}return _0x59dde7[_0x5540f5(0x152)]((_0x4897e9,_0x4c6a6d)=>_0x4897e9[_0x5540f5(0x1ac)][_0x5540f5(0x198)](_0x4c6a6d[_0x5540f5(0x1ac)]));}async function updateSchedulePreview(_0x518cc1){const _0x1d3971=a1_0x4f864d;if(!_0x518cc1[_0x1d3971(0x1db)]['useCalendar']||!_0x518cc1['config'][_0x1d3971(0x178)])return;let _0x545d76={};try{const _0x2b5070=await _0x518cc1[_0x1d3971(0x1a2)](_0x1d3971(0x1a7));if(_0x2b5070&&_0x2b5070[_0x1d3971(0x15d)])_0x545d76=JSON[_0x1d3971(0x170)](_0x2b5070[_0x1d3971(0x15d)]);}catch(_0x5f6390){}const _0x36f5c2=[],_0x295e98=Date[_0x1d3971(0x13a)](),_0x11f56b=0x30*0x3c*0x3c*0x3e8;try{const _0x278593=await _0x518cc1[_0x1d3971(0x12d)](_0x518cc1[_0x1d3971(0x1db)][_0x1d3971(0x178)]+'.data.table');if(!_0x278593||!_0x278593[_0x1d3971(0x15d)])return;const _0x6b7b0a=JSON[_0x1d3971(0x170)](_0x278593[_0x1d3971(0x15d)]),_0x3be41e=_0x518cc1[_0x1d3971(0x1db)][_0x1d3971(0x1b8)]||[],_0x314799=_0x518cc1[_0x1d3971(0x1db)][_0x1d3971(0x1e4)]||[],_0x2cac45=new Set();_0x314799[_0x1d3971(0x161)](_0x27df2e=>{const _0x20c7ac=_0x1d3971;if(_0x27df2e[_0x20c7ac(0x199)])_0x2cac45[_0x20c7ac(0x1a6)](_0x27df2e[_0x20c7ac(0x199)]);});for(const _0x26a523 of _0x6b7b0a){if(_0x26a523[_0x1d3971(0x1cd)]&&_0x3be41e[_0x1d3971(0x192)]>0x0&&!_0x3be41e[_0x1d3971(0x1a9)](_0x26a523['_calName']))continue;const _0x21462d=_0x26a523[_0x1d3971(0x174)]||_0x26a523[_0x1d3971(0x188)]||_0x26a523[_0x1d3971(0x141)];if(!_0x21462d)continue;const _0x485838=new Date(_0x21462d),_0x20e10a=_0x485838[_0x1d3971(0x1aa)]();if(isNaN(_0x20e10a))continue;if(_0x20e10a<_0x295e98)continue;if(_0x20e10a>_0x295e98+_0x11f56b)continue;const _0x529cd6=(_0x26a523[_0x1d3971(0x1c3)]||_0x26a523[_0x1d3971(0x13f)]||'')['toLowerCase']();let _0x533463=![],_0x47e8e8=[],_0x4455b2=_0x26a523[_0x1d3971(0x1c3)]||_0x26a523[_0x1d3971(0x13f)]||_0x1d3971(0x14b);if(_0x529cd6['includes']('urlaub\x20ende')||_0x529cd6[_0x1d3971(0x1a9)](_0x1d3971(0x1bd))||_0x529cd6[_0x1d3971(0x1a9)](_0x1d3971(0x16e)))_0x533463=!![],_0x47e8e8=Array[_0x1d3971(0x160)](_0x2cac45);else for(const _0x4ec488 of _0x2cac45){if(_0x529cd6[_0x1d3971(0x1a9)](_0x4ec488[_0x1d3971(0x1d4)]()))_0x47e8e8[_0x1d3971(0x1cb)](_0x4ec488);}_0x47e8e8['length']>0x0&&_0x47e8e8[_0x1d3971(0x161)](_0x545629=>{const _0x3e3323=_0x1d3971;let _0x14aa3f=0x3c;if(_0x533463){let _0x31e68c=0x0;Object[_0x3e3323(0x14e)](_0x545d76)[_0x3e3323(0x161)](_0x44d638=>{if(_0x44d638>_0x31e68c)_0x31e68c=_0x44d638;}),_0x14aa3f=_0x31e68c>0x0?_0x31e68c:0x78;}else _0x14aa3f=getWarmupRobust(_0x545d76,_0x545629);const _0x2bad67=new Date(_0x20e10a-_0x14aa3f*0xea60);_0x36f5c2[_0x3e3323(0x1cb)]({'eventTime':_0x20e10a,'triggerTime':_0x2bad67['getTime'](),'room':_0x545629,'minutes':_0x14aa3f,'reason':_0x4455b2,'isGlobal':_0x533463});});}}catch(_0x32b62c){}_0x36f5c2[_0x1d3971(0x152)]((_0x475360,_0x422aec)=>_0x475360['triggerTime']-_0x422aec['triggerTime']);const _0x3174b3=_0x36f5c2[_0x1d3971(0x154)](0x0,0x5);await _0x518cc1[_0x1d3971(0x13c)](_0x1d3971(0x173),{'val':JSON[_0x1d3971(0x17a)](_0x3174b3),'ack':!![]});}async function monitorEnforcements(_0x50e5e0){const _0x1b7de5=a1_0x4f864d;try{const _0x1a3c08='analysis.energy.activeEnforcements',_0x1a3de3=await _0x50e5e0['getStateAsync'](_0x1a3c08);if(!_0x1a3de3||!_0x1a3de3[_0x1b7de5(0x15d)])return;let _0x5627fe=[];try{_0x5627fe=JSON[_0x1b7de5(0x170)](_0x1a3de3[_0x1b7de5(0x15d)]);}catch(_0x38ea74){return;}if(!Array[_0x1b7de5(0x18a)](_0x5627fe)||_0x5627fe[_0x1b7de5(0x192)]===0x0)return;const _0x2043b8=Date[_0x1b7de5(0x13a)](),_0x41fb6b=_0x50e5e0[_0x1b7de5(0x1db)][_0x1b7de5(0x1e4)]||[];let _0x45a8d8=![];for(let _0x20a071=_0x5627fe[_0x1b7de5(0x192)]-0x1;_0x20a071>=0x0;_0x20a071--){const _0x4371db=_0x5627fe[_0x20a071];if(_0x2043b8>=_0x4371db[_0x1b7de5(0x159)]){_0x50e5e0[_0x1b7de5(0x1b9)][_0x1b7de5(0x148)](_0x1b7de5(0x1b6)+_0x4371db[_0x1b7de5(0x1ac)]+_0x1b7de5(0x1be)),_0x5627fe['splice'](_0x20a071,0x1),_0x45a8d8=!![];continue;}const _0x36cbff=_0x41fb6b[_0x1b7de5(0x15e)](_0x564d86=>normalize(_0x564d86['location'])===normalize(_0x4371db[_0x1b7de5(0x1ac)])&&(_0x564d86[_0x1b7de5(0x13d)]==='temperature'||_0x564d86[_0x1b7de5(0x13d)]===_0x1b7de5(0x1bb)));if(_0x36cbff){const _0x21a047=await findRelatedId(_0x50e5e0,_0x36cbff['id'],_0x1b7de5(0x17c));if(_0x21a047){const _0x296c26=await _0x50e5e0[_0x1b7de5(0x12d)](_0x21a047);_0x296c26&&typeof _0x296c26[_0x1b7de5(0x15d)]===_0x1b7de5(0x139)&&(_0x296c26[_0x1b7de5(0x15d)]<0xf&&(_0x50e5e0[_0x1b7de5(0x1b9)]['warn']('üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20'+_0x4371db[_0x1b7de5(0x1ac)]+_0x1b7de5(0x18d)+_0x296c26[_0x1b7de5(0x15d)]+'¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20'+_0x4371db['target']+_0x1b7de5(0x1e1)),await _0x50e5e0[_0x1b7de5(0x181)](_0x21a047,_0x4371db[_0x1b7de5(0x1a5)]),await logAutomationAction(_0x50e5e0,_0x1b7de5(0x1a0)+_0x4371db[_0x1b7de5(0x1ac)]+':\x20'+_0x296c26['val']+_0x1b7de5(0x165)+_0x4371db['target']+_0x1b7de5(0x177))));}}}_0x45a8d8&&await _0x50e5e0[_0x1b7de5(0x13c)](_0x1a3c08,{'val':JSON['stringify'](_0x5627fe),'ack':!![]});}catch(_0x45ce97){_0x50e5e0[_0x1b7de5(0x1b9)]['error']('Enforcement\x20Monitor\x20Error:\x20'+_0x45ce97['message']);}}async function checkCalendarTriggers(_0x1f517f){const _0x4db067=a1_0x4f864d;if(!_0x1f517f['config'][_0x4db067(0x191)]||!_0x1f517f[_0x4db067(0x1db)]['calendarInstance'])return;await updateSchedulePreview(_0x1f517f);let _0x1de46c={},_0x5da1e0={};try{const _0x5166d9=await _0x1f517f[_0x4db067(0x1a2)](_0x4db067(0x1a7));if(_0x5166d9&&_0x5166d9[_0x4db067(0x15d)])_0x1de46c=JSON[_0x4db067(0x170)](_0x5166d9['val']);const _0x4691e1=await _0x1f517f[_0x4db067(0x1a2)]('analysis.energy.warmupSources');if(_0x4691e1&&_0x4691e1[_0x4db067(0x15d)])_0x5da1e0=JSON[_0x4db067(0x170)](_0x4691e1['val']);}catch(_0x1aee85){}let _0x452eb7={'default':0x15};try{const _0x3c2d85=await _0x1f517f['getStateAsync'](_0x4db067(0x196));if(_0x3c2d85&&_0x3c2d85[_0x4db067(0x15d)])_0x452eb7=JSON[_0x4db067(0x170)](_0x3c2d85[_0x4db067(0x15d)]);}catch(_0xba0ea6){}let _0x2236d8=[];try{const _0x13de83=await _0x1f517f[_0x4db067(0x1a2)](_0x4db067(0x1cf));if(_0x13de83&&_0x13de83[_0x4db067(0x15d)])_0x2236d8=JSON['parse'](_0x13de83[_0x4db067(0x15d)]);}catch(_0x379a3b){}try{const _0x193bc1=await _0x1f517f['getForeignStateAsync'](_0x1f517f[_0x4db067(0x1db)][_0x4db067(0x178)]+_0x4db067(0x15a));if(!_0x193bc1||!_0x193bc1['val'])return;const _0x184942=JSON['parse'](_0x193bc1[_0x4db067(0x15d)]),_0xdd7a88=Date[_0x4db067(0x13a)](),_0x26a363=_0x1f517f[_0x4db067(0x1db)][_0x4db067(0x1e4)]||[],_0x179cc1=_0x1f517f[_0x4db067(0x1db)][_0x4db067(0x1b8)]||[];let _0x132c86=![];for(const _0x217a0c of _0x184942){if(_0x217a0c['_calName']&&_0x179cc1['length']>0x0&&!_0x179cc1[_0x4db067(0x1a9)](_0x217a0c[_0x4db067(0x1cd)]))continue;const _0x5c0c4c=_0x217a0c[_0x4db067(0x174)]||_0x217a0c[_0x4db067(0x188)]||_0x217a0c['date'];if(!_0x5c0c4c)continue;const _0x28a8ef=new Date(_0x5c0c4c);if(isNaN(_0x28a8ef[_0x4db067(0x1aa)]()))continue;const _0x4aeb42=(_0x217a0c['event']||_0x217a0c[_0x4db067(0x13f)]||'')['toLowerCase']();if(_0x4aeb42[_0x4db067(0x1a9)](_0x4db067(0x162))||_0x4aeb42[_0x4db067(0x1a9)](_0x4db067(0x1bd))||_0x4aeb42[_0x4db067(0x1a9)]('ankunft')){let _0x2b4713=0x0;Object[_0x4db067(0x14e)](_0x1de46c)[_0x4db067(0x161)](_0x500dc3=>{if(_0x500dc3>_0x2b4713)_0x2b4713=_0x500dc3;});if(_0x2b4713===0x0)_0x2b4713=0x78;const _0x275965=_0x28a8ef[_0x4db067(0x1aa)]()-_0x2b4713*0xea60;_0xdd7a88>=_0x275965&&_0xdd7a88<_0x28a8ef['getTime']()&&(_0x1f517f['currentSystemMode']!==_0x4db067(0x1df)&&(_0x1f517f[_0x4db067(0x1b9)][_0x4db067(0x148)](_0x4db067(0x13e)+_0x2b4713+'\x20min).'),await _0x1f517f[_0x4db067(0x13c)](_0x4db067(0x176),{'val':'normal','ack':![]})));}for(const _0x2cf3b5 of _0x26a363){if(_0x2cf3b5[_0x4db067(0x199)]){const _0x20de59=_0x2cf3b5[_0x4db067(0x199)][_0x4db067(0x1d4)](),_0x382d1e=(_0x2cf3b5[_0x4db067(0x1b4)]||'')[_0x4db067(0x1d4)]();let _0x2f0e17=_0x4aeb42[_0x4db067(0x1a9)](_0x20de59);!_0x2f0e17&&_0x382d1e['length']>0x3&&_0x4aeb42[_0x4db067(0x1a9)](_0x382d1e)&&(_0x2f0e17=!![]);if(_0x2f0e17){const _0x190c3e=getWarmupRobust(_0x1de46c,_0x2cf3b5[_0x4db067(0x199)]),_0x2fabfe=_0x5da1e0[_0x2cf3b5['location']]||_0x4db067(0x1c4),_0x142ce4=_0x28a8ef[_0x4db067(0x1aa)]()-_0x190c3e*0xea60;if(_0xdd7a88>=_0x142ce4&&_0xdd7a88<_0x28a8ef[_0x4db067(0x1aa)]()){const _0x18377d=lastActions[_0x4db067(0x19a)+_0x2cf3b5[_0x4db067(0x199)]];if(_0x18377d&&_0xdd7a88-_0x18377d<CAL_COOLDOWN_MS)continue;const _0x1befa8=await findRelatedId(_0x1f517f,_0x2cf3b5['id'],_0x4db067(0x17c));if(_0x1befa8){let _0x2778f8=_0x452eb7[_0x2cf3b5[_0x4db067(0x199)]];if(_0x2778f8===undefined)_0x2778f8=_0x452eb7[_0x4db067(0x131)];if(_0x2778f8===undefined)_0x2778f8=0x15;const _0x1f90c5=await _0x1f517f['getForeignStateAsync'](_0x1befa8);if(_0x1f90c5&&typeof _0x1f90c5[_0x4db067(0x15d)]===_0x4db067(0x139)&&_0x1f90c5[_0x4db067(0x15d)]<_0x2778f8-0.5){_0x1f517f[_0x4db067(0x1b9)]['info'](_0x4db067(0x1d5)+_0x2fabfe+']:\x20Raum-Trigger\x20\x27'+_0x2cf3b5[_0x4db067(0x199)]+'\x27\x20(Match:\x20'+_0x4aeb42+_0x4db067(0x140)+_0x2778f8+_0x4db067(0x1cc)+_0x190c3e+_0x4db067(0x1d3)),await _0x1f517f[_0x4db067(0x181)](_0x1befa8,_0x2778f8),await logAutomationAction(_0x1f517f,'[CAL]\x20'+_0x2cf3b5[_0x4db067(0x199)]+'\x20->\x20'+_0x2778f8+_0x4db067(0x17d)+_0x2fabfe+')'),lastActions[_0x4db067(0x19a)+_0x2cf3b5[_0x4db067(0x199)]]=_0xdd7a88;const _0x5f0d2b=_0x2236d8[_0x4db067(0x16d)](_0x3efa46=>_0x3efa46['room']===_0x2cf3b5[_0x4db067(0x199)]);if(_0x5f0d2b!==-0x1)_0x2236d8[_0x4db067(0x185)](_0x5f0d2b,0x1);_0x2236d8[_0x4db067(0x1cb)]({'room':_0x2cf3b5[_0x4db067(0x199)],'target':_0x2778f8,'until':_0x28a8ef['getTime']()}),_0x132c86=!![];}}}}}}}_0x132c86&&await _0x1f517f[_0x4db067(0x13c)]('analysis.energy.activeEnforcements',{'val':JSON['stringify'](_0x2236d8),'ack':!![]});}catch(_0x2f35c2){_0x1f517f['log'][_0x4db067(0x145)](_0x4db067(0x15f)+_0x2f35c2[_0x4db067(0x1ed)]);}}async function manageMpcIntervention(_0x7ee6c9,_0x2ebcc0,_0x37f7f8){const _0x42cf65=a1_0x4f864d;try{const _0x53500b=_0x42cf65(0x1c0),_0x39be87=await _0x7ee6c9[_0x42cf65(0x1a2)](_0x53500b);let _0x3ea1aa=[];if(_0x39be87&&_0x39be87['val'])try{_0x3ea1aa=JSON[_0x42cf65(0x170)](_0x39be87[_0x42cf65(0x15d)]);}catch(_0x56ad53){}const _0x41f114=_0x3ea1aa[_0x42cf65(0x1a3)](_0x2ebcc0);if(_0x37f7f8===_0x42cf65(0x1a6))_0x41f114===-0x1&&(_0x3ea1aa[_0x42cf65(0x1cb)](_0x2ebcc0),await _0x7ee6c9[_0x42cf65(0x13c)](_0x53500b,{'val':JSON[_0x42cf65(0x17a)](_0x3ea1aa),'ack':!![]}));else _0x37f7f8===_0x42cf65(0x1e9)&&(_0x41f114!==-0x1&&(_0x3ea1aa[_0x42cf65(0x185)](_0x41f114,0x1),await _0x7ee6c9[_0x42cf65(0x13c)](_0x53500b,{'val':JSON[_0x42cf65(0x17a)](_0x3ea1aa),'ack':!![]})));}catch(_0x1dd8c2){}}async function cleanupGhostInterventions(_0x3e7a27){const _0x17814e=a1_0x4f864d;try{const _0x59eb53=_0x17814e(0x1c0),_0x142ae3=await _0x3e7a27[_0x17814e(0x1a2)](_0x59eb53);if(!_0x142ae3||!_0x142ae3[_0x17814e(0x15d)])return;const _0x16ccc0=JSON[_0x17814e(0x170)](_0x142ae3[_0x17814e(0x15d)]);if(!Array['isArray'](_0x16ccc0)||_0x16ccc0[_0x17814e(0x192)]===0x0)return;let _0x262b3b={'default':0x15};try{const _0x595e82=await _0x3e7a27[_0x17814e(0x1a2)](_0x17814e(0x196));if(_0x595e82&&_0x595e82['val'])_0x262b3b=JSON[_0x17814e(0x170)](_0x595e82['val']);}catch(_0x5cf86b){}let _0x2cb843=[];try{const _0x1ae2df=await _0x3e7a27['getStateAsync'](_0x17814e(0x1c2));if(_0x1ae2df&&_0x1ae2df[_0x17814e(0x15d)])_0x2cb843=JSON[_0x17814e(0x170)](_0x1ae2df[_0x17814e(0x15d)]);}catch(_0x5ada41){}let _0x53acdc={},_0x2e5f4e=![];try{const _0x2a5857=await _0x3e7a27['getStateAsync'](_0x17814e(0x1c9));if(_0x2a5857&&_0x2a5857[_0x17814e(0x15d)])_0x53acdc=JSON[_0x17814e(0x170)](_0x2a5857['val']);}catch(_0x1902aa){}if(_0x53acdc[_0x17814e(0x1c6)]){const _0x1ba2e1=Date[_0x17814e(0x13a)]();for(const [_0x39e391,_0x2a4b53]of Object[_0x17814e(0x17f)](_0x53acdc[_0x17814e(0x1c6)])){_0x1ba2e1-_0x2a4b53>PENALTY_TTL&&(delete _0x53acdc[_0x39e391],delete _0x53acdc[_0x17814e(0x1c6)][_0x39e391],_0x2e5f4e=!![],_0x3e7a27[_0x17814e(0x1b9)][_0x17814e(0x148)]('üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27'+_0x39e391+'\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.'));}}const _0x86df0c=_0x3e7a27['config']['devices']||[];let _0x2ec15b=![];for(let _0x20c393=_0x16ccc0[_0x17814e(0x192)]-0x1;_0x20c393>=0x0;_0x20c393--){const _0x425427=_0x16ccc0[_0x20c393],_0x6e5c8=_0x86df0c[_0x17814e(0x15e)](_0xefb360=>normalize(_0xefb360[_0x17814e(0x199)])===normalize(_0x425427)&&(_0xefb360[_0x17814e(0x13d)]===_0x17814e(0x1ae)||_0xefb360[_0x17814e(0x13d)]===_0x17814e(0x1bb)));if(!_0x6e5c8){_0x3e7a27['log'][_0x17814e(0x145)](_0x17814e(0x163)+_0x425427+_0x17814e(0x1b3)),_0x16ccc0[_0x17814e(0x185)](_0x20c393,0x1),_0x2ec15b=!![];continue;}if(_0x6e5c8){const _0x31d5a6=await findRelatedId(_0x3e7a27,_0x6e5c8['id'],_0x17814e(0x17c)),_0x2fd406=await _0x3e7a27[_0x17814e(0x12d)](_0x6e5c8['id']);if(_0x31d5a6){const _0x5835cd=await _0x3e7a27[_0x17814e(0x12d)](_0x31d5a6);if(_0x5835cd&&typeof _0x5835cd[_0x17814e(0x15d)]===_0x17814e(0x139)){let _0x454456=![],_0x12d3e3='';Math[_0x17814e(0x18e)](_0x5835cd[_0x17814e(0x15d)]-ECO_TEMP)>0.5&&(_0x454456=!![],_0x12d3e3=_0x17814e(0x19c));if(!_0x454456&&_0x2fd406&&typeof _0x2fd406['val']===_0x17814e(0x139)){const _0x5df34a=_0x262b3b[_0x425427]||_0x262b3b[_0x17814e(0x131)]||0x15;_0x2fd406[_0x17814e(0x15d)]<_0x5df34a+0.2&&(_0x454456=!![],_0x12d3e3=_0x17814e(0x151));}if(_0x454456){if(_0x12d3e3===_0x17814e(0x19c)){_0x3e7a27['log'][_0x17814e(0x148)]('üßπ\x20[MPC\x20CLEANUP]\x20'+_0x425427+_0x17814e(0x180)+_0x5835cd[_0x17814e(0x15d)]+_0x17814e(0x15b)+ECO_TEMP+_0x17814e(0x1b2));const _0xf0bfa5=lastActions[_0x17814e(0x19a)+_0x425427],_0x2d7326=_0xf0bfa5&&Date['now']()-_0xf0bfa5<0x2*0x3c*0x3e8;if(!_0x2d7326&&_0x5835cd['val']>ECO_TEMP+0.5){_0x3e7a27['sendToPythonWrapper']&&(_0x3e7a27[_0x17814e(0x1b9)][_0x17814e(0x148)](_0x17814e(0x18f)+_0x425427+'\x20wurde\x20manuell\x20erh√∂ht.'),_0x3e7a27[_0x17814e(0x142)]('TRAIN_RL_PENALTY',{'room':_0x425427}));const _0x169b3b=_0x425427+'_'+new Date()['getHours']();if(!_0x53acdc[_0x169b3b]){_0x53acdc[_0x169b3b]=0x1;if(!_0x53acdc['_meta'])_0x53acdc[_0x17814e(0x1c6)]={};_0x53acdc['_meta'][_0x169b3b]=Date[_0x17814e(0x13a)](),_0x2e5f4e=!![];}}else _0x2d7326&&_0x3e7a27[_0x17814e(0x1b9)][_0x17814e(0x148)](_0x17814e(0x194)+_0x425427+_0x17814e(0x1dc));}else{if(_0x12d3e3===_0x17814e(0x151)){let _0x45d793=![];if(_0x2cb843[_0x17814e(0x15e)](_0x191902=>_0x191902[_0x17814e(0x1ac)]===_0x425427))_0x45d793=!![];const _0x5f28b2=_0x86df0c[_0x17814e(0x153)](_0x15de68=>normalize(_0x15de68[_0x17814e(0x199)])===normalize(_0x425427)&&(_0x15de68['type']==='window'||_0x15de68[_0x17814e(0x13d)]===_0x17814e(0x13b)||_0x15de68[_0x17814e(0x13d)]===_0x17814e(0x1a8)));for(const _0x5c3772 of _0x5f28b2){try{const _0x56604f=await _0x3e7a27[_0x17814e(0x12d)](_0x5c3772['id']);if(_0x56604f&&(_0x56604f[_0x17814e(0x15d)]===!![]||_0x56604f['val']===0x1||String(_0x56604f[_0x17814e(0x15d)])['toLowerCase']()==='open'))_0x45d793=!![];}catch(_0x11ffb9){}}if(_0x45d793)_0x3e7a27['log'][_0x17814e(0x148)](_0x17814e(0x14f)+_0x425427+'\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.');else{const _0x52e883=_0x262b3b[_0x425427]||_0x262b3b[_0x17814e(0x131)]||0x15;_0x3e7a27[_0x17814e(0x1b9)][_0x17814e(0x148)]('üö®\x20[MPC\x20WATCHDOG]\x20'+_0x425427+_0x17814e(0x17b)+_0x2fd406[_0x17814e(0x15d)]+_0x17814e(0x132)+(_0x52e883+0.2)+_0x17814e(0x167)),await _0x3e7a27[_0x17814e(0x181)](_0x31d5a6,_0x52e883),await logAutomationAction(_0x3e7a27,_0x17814e(0x172)+_0x425427+_0x17814e(0x144)+_0x52e883+'¬∞C'),lastActions['rescue_'+_0x425427]=Date[_0x17814e(0x13a)]();}}}_0x16ccc0[_0x17814e(0x185)](_0x20c393,0x1),_0x2ec15b=!![];}}}}}_0x2ec15b&&await _0x3e7a27['setStateAsync'](_0x59eb53,{'val':JSON[_0x17814e(0x17a)](_0x16ccc0),'ack':!![]}),_0x2e5f4e&&await _0x3e7a27['setStateAsync']('analysis.energy.rlPenalties',{'val':JSON[_0x17814e(0x17a)](_0x53acdc),'ack':!![]});}catch(_0x5c27cd){}}async function applyEnergySavings(_0x3f2b48,_0x1602be){const _0x270587=a1_0x4f864d;await cleanupGhostInterventions(_0x3f2b48);if(!_0x1602be||_0x1602be[_0x270587(0x192)]===0x0)return;const _0x1c7226=_0x3f2b48[_0x270587(0x1db)][_0x270587(0x1e4)]||[],_0x4b343b=Date['now']();for(const _0x3b5c09 of _0x1602be){const _0x15e1ce=_0x3b5c09[_0x270587(0x1ac)],_0x303de3=_0x3b5c09[_0x270587(0x133)],_0x549b77=_0x3b5c09[_0x270587(0x1a5)]||0x15;if(lastActions[_0x270587(0x16f)+_0x15e1ce]&&_0x4b343b-lastActions['rescue_'+_0x15e1ce]<RESCUE_LOCK_MS)continue;const _0xeaa26c=_0x1c7226[_0x270587(0x15e)](_0x172713=>normalize(_0x172713[_0x270587(0x199)])===normalize(_0x15e1ce)&&(_0x172713['type']==='temperature'||_0x172713[_0x270587(0x13d)]==='thermostat'));if(!_0xeaa26c)continue;const _0x47b788=await findRelatedId(_0x3f2b48,_0xeaa26c['id'],_0x270587(0x17c));if(_0x47b788){if(lastActions[_0x270587(0x182)+_0x15e1ce]&&_0x4b343b-lastActions[_0x270587(0x182)+_0x15e1ce]<0x1e*0x3c*0x3e8)continue;const _0x49552d=await _0x3f2b48[_0x270587(0x12d)](_0x47b788);if(_0x49552d&&typeof _0x49552d[_0x270587(0x15d)]===_0x270587(0x139)){const _0x3e568f=_0x49552d[_0x270587(0x15d)];_0x3e568f!==ECO_TEMP&&await manageMpcIntervention(_0x3f2b48,_0x15e1ce,'remove');if(_0x303de3>0x1e)_0x3e568f>ECO_TEMP+0.5&&(_0x3f2b48[_0x270587(0x1b9)][_0x270587(0x148)](_0x270587(0x1eb)+_0x15e1ce+_0x270587(0x18d)+ECO_TEMP+_0x270587(0x1da)+_0x303de3+_0x270587(0x1e5)),await _0x3f2b48[_0x270587(0x181)](_0x47b788,ECO_TEMP),await manageMpcIntervention(_0x3f2b48,_0x15e1ce,_0x270587(0x1a6)),lastActions[_0x270587(0x182)+_0x15e1ce]=_0x4b343b,await logAutomationAction(_0x3f2b48,_0x270587(0x171)+_0x15e1ce+_0x270587(0x166)+ECO_TEMP+'¬∞C'));else _0x303de3<=0xf&&(_0x3e568f<_0x549b77&&(_0x3f2b48[_0x270587(0x1b9)][_0x270587(0x148)](_0x270587(0x1af)+_0x15e1ce+_0x270587(0x197)+_0x549b77+_0x270587(0x18b)),await _0x3f2b48['setForeignStateAsync'](_0x47b788,_0x549b77),await manageMpcIntervention(_0x3f2b48,_0x15e1ce,_0x270587(0x1e9)),lastActions[_0x270587(0x182)+_0x15e1ce]=_0x4b343b,await logAutomationAction(_0x3f2b48,_0x270587(0x171)+_0x15e1ce+_0x270587(0x175)+_0x549b77+'¬∞C')));}}else _0x3f2b48[_0x270587(0x1b9)][_0x270587(0x145)](_0x270587(0x1e6)+_0x15e1ce+'\x20gefunden!');}}function a1_0x4f6d(_0x29b23e,_0x386dd3){const _0x56ed4a=a1_0x3ba7();return a1_0x4f6d=function(_0x3ed018,_0x3737e5){_0x3ed018=_0x3ed018-0x12d;let _0x3ba79b=_0x56ed4a[_0x3ed018];return _0x3ba79b;},a1_0x4f6d(_0x29b23e,_0x386dd3);}module[a1_0x4f864d(0x147)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};