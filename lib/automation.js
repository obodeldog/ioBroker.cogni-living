const a1_0x29adb0=a1_0x3c95;(function(_0x58dad3,_0x482c79){const _0x3d4e25=a1_0x3c95,_0x18d5be=_0x58dad3();while(!![]){try{const _0x48e1ad=-parseInt(_0x3d4e25(0x196))/0x1*(parseInt(_0x3d4e25(0x1a2))/0x2)+parseInt(_0x3d4e25(0x13f))/0x3+parseInt(_0x3d4e25(0x16d))/0x4+-parseInt(_0x3d4e25(0x1de))/0x5+-parseInt(_0x3d4e25(0x19e))/0x6*(parseInt(_0x3d4e25(0x1cf))/0x7)+-parseInt(_0x3d4e25(0x1aa))/0x8*(-parseInt(_0x3d4e25(0x19d))/0x9)+parseInt(_0x3d4e25(0x1d4))/0xa;if(_0x48e1ad===_0x482c79)break;else _0x18d5be['push'](_0x18d5be['shift']());}catch(_0x8e056b){_0x18d5be['push'](_0x18d5be['shift']());}}}(a1_0x43b6,0xf09a4));const a1_0x485178=(function(){let _0x4b1b39=!![];return function(_0x58f94e,_0x599560){const _0x2147b6=_0x4b1b39?function(){const _0x304a89=a1_0x3c95;if(_0x599560){const _0x2126ee=_0x599560[_0x304a89(0x153)](_0x58f94e,arguments);return _0x599560=null,_0x2126ee;}}:function(){};return _0x4b1b39=![],_0x2147b6;};}()),a1_0x9b77e1=a1_0x485178(this,function(){const _0x306509=a1_0x3c95;return a1_0x9b77e1['toString']()[_0x306509(0x159)](_0x306509(0x1d3))[_0x306509(0x19c)]()[_0x306509(0x1d7)](a1_0x9b77e1)[_0x306509(0x159)]('(((.+)+)+)+$');});a1_0x9b77e1();'use strict';const aiAgent=require('./ai_agent'),COOLDOWN_MS=0x3c*0x3e8,CAL_COOLDOWN_MS=0x5a*0x3c*0x3e8,RESCUE_LOCK_MS=0x78*0x3c*0x3e8,ECO_TEMP=0x11,PENALTY_TTL=0x3*0x18*0x3c*0x3c*0x3e8,lastActions={};function normalize(_0x5f4209){const _0xa0f786=a1_0x3c95;if(!_0x5f4209)return'';return _0x5f4209[_0xa0f786(0x154)]()[_0xa0f786(0x1a4)](/\s+/g,'')[_0xa0f786(0x1e0)]();}function getWarmupRobust(_0x262deb,_0x5d0288){const _0x38f70c=a1_0x3c95;if(!_0x262deb||!_0x5d0288)return 0x3c;if(_0x262deb[_0x5d0288]!==undefined)return _0x262deb[_0x5d0288];const _0x92d14d=_0x5d0288['toLowerCase']()[_0x38f70c(0x1a4)](/√§/g,'ae')[_0x38f70c(0x1a4)](/√∂/g,'oe')[_0x38f70c(0x1a4)](/√º/g,'ue')[_0x38f70c(0x1a4)](/√ü/g,'ss')[_0x38f70c(0x1a4)](/\s+/g,'_')['replace'](/[^a-z0-9_]/g,'');if(_0x262deb[_0x92d14d]!==undefined)return _0x262deb[_0x92d14d];return 0x3c;}async function logAutomationAction(_0x128dd8,_0x2838dc){const _0x286f03=a1_0x3c95;await _0x128dd8['setStateAsync'](_0x286f03(0x1a0),{'val':_0x2838dc,'ack':!![]});try{const _0x184fab=_0x286f03(0x184),_0x2ef625=await _0x128dd8[_0x286f03(0x1d6)](_0x184fab);let _0x492ca6=[];if(_0x2ef625&&_0x2ef625[_0x286f03(0x14b)])try{_0x492ca6=JSON[_0x286f03(0x152)](_0x2ef625[_0x286f03(0x14b)]);}catch(_0x30beb8){}_0x492ca6[_0x286f03(0x1e4)]({'ts':Date[_0x286f03(0x15b)](),'msg':_0x2838dc});if(_0x492ca6[_0x286f03(0x1a6)]>0x32)_0x492ca6=_0x492ca6[_0x286f03(0x15c)](0x0,0x32);await _0x128dd8[_0x286f03(0x175)](_0x184fab,{'val':JSON[_0x286f03(0x167)](_0x492ca6),'ack':!![]});}catch(_0x39bc42){}}async function handlePrediction(_0x234b67,_0xbb09ce,_0x2a1af4){const _0xdecf2b=a1_0x3c95;if(!_0xbb09ce||_0xbb09ce===_0xdecf2b(0x192))return;let _0x51faa0=_0xdecf2b(0x1a8),_0x270f8a=0.6;try{const _0x444743=await _0x234b67[_0xdecf2b(0x1d6)]('analysis.automation.mode');if(_0x444743&&_0x444743[_0xdecf2b(0x14b)])_0x51faa0=_0x444743[_0xdecf2b(0x14b)];const _0x315825=await _0x234b67[_0xdecf2b(0x1d6)](_0xdecf2b(0x178));if(_0x315825&&_0x315825[_0xdecf2b(0x14b)])_0x270f8a=_0x315825[_0xdecf2b(0x14b)];}catch(_0x484d94){}if(_0x51faa0==='off'||_0x2a1af4<_0x270f8a)return;const _0x1cc6c6=Date[_0xdecf2b(0x15b)]();if(lastActions[_0xbb09ce]&&_0x1cc6c6-lastActions[_0xbb09ce]<COOLDOWN_MS)return;const _0x8274fc=_0x234b67['config'][_0xdecf2b(0x16a)]||[],_0xe3648c=normalize(_0xbb09ce),_0x49787b=_0x8274fc[_0xdecf2b(0x1b6)](_0x327f81=>normalize(_0x327f81['location'])===_0xe3648c&&(_0x327f81[_0xdecf2b(0x179)]==='light'||_0x327f81['type']==='dimmer'||_0x327f81[_0xdecf2b(0x179)]===_0xdecf2b(0x198)));if(!_0x49787b)return;const _0x3d1adc=await aiAgent[_0xdecf2b(0x158)](_0x234b67,_0xbb09ce,_0x49787b[_0xdecf2b(0x142)],_0x2a1af4);if(!_0x3d1adc['approved'])return;const _0xe4b7ed=_0xdecf2b(0x173)+_0xbb09ce+_0xdecf2b(0x15a)+_0x49787b[_0xdecf2b(0x142)]+'\x20('+_0x3d1adc[_0xdecf2b(0x18c)]+')';await logAutomationAction(_0x234b67,'['+_0x51faa0[_0xdecf2b(0x17c)]()+']\x20'+_0xe4b7ed);if(_0x51faa0===_0xdecf2b(0x1c2)){const _0x28c3e7=await _0x234b67[_0xdecf2b(0x1e7)](_0x49787b['id']);(!_0x28c3e7||!_0x28c3e7['val']&&_0x28c3e7[_0xdecf2b(0x14b)]!==!![])&&await _0x234b67[_0xdecf2b(0x1c8)](_0x49787b['id'],!![]),lastActions[_0xbb09ce]=_0x1cc6c6;}}function a1_0x43b6(){const _0xdff20e=['type','pi_heating_demand','üõ°Ô∏è\x20[PENALTY\x20EXPIRED]\x20Lern-Schutz\x20f√ºr\x20\x27','toUpperCase','\x27\x20hat\x20kein\x20Ger√§t\x20mehr.\x20L√∂sche\x20Eintrag.','system.mode','üìÖ\x20[MPC\x20INFO]\x20','¬∞C!\x20(Puffer:\x20','rescue_','actual','¬∞C\x20<\x20','analysis.automation.actionLog','_meta','¬∞C).\x20Sparmodus\x20beendet!','exports','üìÖ\x20SMART\x20SCHEDULE\x20[','splice','Manuelles\x20Mapping','entries','reason','openknx',':\x20Puffer\x20leer\x20->\x20Heizen\x20auf\x20','event','location','\x20gestartet/vorbei.\x20Gebe\x20Raum\x20frei.','Unknown','manual','string','¬∞C).\x20Entferne\x20Status.','14805dhNbNn','calendarSelection','switch','¬∞C\x20(nicht\x20','Nicht\x20gefunden','forEach','toString','4683303rbTZTC','2852886zObtyt','Unbekannt','analysis.automation.lastAction','¬∞C.','130Ixswdt','remove','replace','summary','length','number','off','analysis.energy.activeEnforcements','8clssje','info','ACTUAL','temp','level','calendarInstance','filter','add','SET_POINT_TEMPERATURE','getTime','analysis.energy.ventilationAlerts','write','find','[FORCE]\x20','\x20durch\x20Kalender\x20ge√§ndert.\x20Keine\x20RL-Strafe.','default','config','common','üßπ\x20[MPC\x20CLEANUP]\x20Raum\x20\x27','temperature','room','Auto-Erkennung','r√ºckkehr','\x20ist\x20zu\x20kalt,\x20ABER\x20Fenster\x20offen/L√ºftung\x20erkannt.\x20Heize\x20NICHT,\x20entferne\x20nur\x20Status.','active','analysis.energy.mpcActiveInterventions','üìÖ\x20SMART\x20SCHEDULE\x20(Phase):\x20\x27Globaler\x20Start\x27\x20erkannt.\x20Heize\x20Haus\x20auf\x20(Vorlauf:\x20','.4.VALVE_STATE','_calName','role','setForeignStateAsync','SET','from','üßπ\x20[MPC\x20CLEANUP]\x20','indexOf','analysis.energy.schedulePreview','PERFECT','14CtAnxP',']:\x20Raum-Trigger\x20\x27','thermostatMapping','\x20ist\x20auf\x20','(((.+)+)+)+$','27811540hLPQrb','values','getStateAsync','constructor','stellwert','üö®\x20[MPC\x20WATCHDOG]\x20','analysis.energy.warmupSources','sort','findIndex','log','8755210ADQMkt','\x20gefunden!','trim','eventStart','getHours','date','unshift','target_temperature','set','getForeignStateAsync','valve_position','.1.LEVEL','¬∞C\x20abgesenkt!\x20Zwinge\x20zur√ºck\x20auf\x20','setpoint','Classic','üö®\x20[ENFORCEMENT]\x20Hardware-Profil\x20hat\x20','too_cold','score','thermostat','Enforcement\x20Monitor\x20Error:\x20','.1.ACTUAL_TEMPERATURE','localeCompare','level.valve','Fehlt','map','TRAIN_RL_PENALTY','.1.TEMPERATURE','getForeignObjectsAsync','normal','messwert','üå¨Ô∏è\x20[MPC\x20WATCHDOG]\x20','\x27\x20nach\x203\x20Tagen\x20abgelaufen.\x20System\x20darf\x20wieder\x20sparen.','triggerTime','\x20->\x20','value.valve','3702624JNJfKe','split','local_temperature','name','¬∞C\x20(via\x20','ACTUAL_TEMPERATURE',':\x20Absenkung\x20auf\x20','occupied_heating_setpoint','[MPC]\x20','sendToPythonWrapper','\x27\x20(Match:\x20','target','val','includes','thermostat.setpoint','mpc_','[WATCHDOG]\x20','message','\x20min).','parse','apply','toLowerCase',')\x20aktiv.\x20Heize\x20auf\x20','error','valveMapping','consultButler','search','\x20->\x20Schalte\x20','now','slice','Calendar\x20Check\x20Error:\x20','üìÖ\x20[ENFORCEMENT]\x20Kalender-Event\x20in\x20','¬∞C\x20(Kalender-Schutz)','analysis.energy.rlPenalties','analysis.energy.warmupTargets','cal_','\x20auf\x20','ankunft','analysis.energy.warmupTimes','useCalendar','stringify','üçÉ\x20[MPC\x20ACTION]\x20Senke\x20','.data.table','devices','valve','\x20min)','456432kaUaGz','[CAL]\x20','¬∞C\x20->\x20','.1.SET_POINT_TEMPERATURE','Ist','\x20wieder\x20auf\x20','Pr√§diktion:\x20','join','setStateAsync','push','warn','analysis.automation.confidenceThreshold'];a1_0x43b6=function(){return _0xdff20e;};return a1_0x43b6();}async function findRelatedId(_0x480562,_0x3681b5,_0x9f12c=a1_0x29adb0(0x1eb)){const _0x400032=a1_0x29adb0;if(_0x9f12c==='setpoint'&&_0x480562[_0x400032(0x1ba)][_0x400032(0x1d1)]){let _0x3c3819=_0x480562[_0x400032(0x1ba)][_0x400032(0x1d1)];if(typeof _0x3c3819==='string')try{_0x3c3819=JSON[_0x400032(0x152)](_0x3c3819);}catch(_0x29e9b5){}if(_0x3c3819&&_0x3c3819[_0x3681b5])return _0x3c3819[_0x3681b5];}if(_0x9f12c===_0x400032(0x16b)&&_0x480562[_0x400032(0x1ba)][_0x400032(0x157)]){let _0x16df0e=_0x480562['config'][_0x400032(0x157)];if(typeof _0x16df0e==='string')try{_0x16df0e=JSON[_0x400032(0x152)](_0x16df0e);}catch(_0x6548b1){}if(_0x16df0e&&_0x16df0e[_0x3681b5])return _0x16df0e[_0x3681b5];}let _0x12ad1f=[];if(_0x9f12c===_0x400032(0x1eb))_0x12ad1f=[{'s':_0x400032(0x1f2),'t':_0x400032(0x170)},{'s':'.1.TEMPERATURE','t':'.1.SET_POINT_TEMPERATURE'},{'s':_0x400032(0x1f8),'t':'.4.SET_TEMPERATURE'},{'s':_0x400032(0x144),'t':_0x400032(0x1b2)},{'s':_0x400032(0x141),'t':_0x400032(0x146)},{'s':_0x400032(0x141),'t':'current_heating_setpoint'},{'s':_0x400032(0x1bd),'t':_0x400032(0x1e5)},{'s':_0x400032(0x1ac),'t':_0x400032(0x1c9)},{'s':_0x400032(0x171),'t':'Soll'},{'s':_0x400032(0x1bd),'t':_0x400032(0x1eb)}];else _0x9f12c===_0x400032(0x16b)&&(_0x12ad1f=[{'s':_0x400032(0x1f2),'t':_0x400032(0x1e9)},{'s':_0x400032(0x1f8),'t':_0x400032(0x1e9)},{'s':'.1.TEMPERATURE','t':_0x400032(0x1c5)},{'s':_0x400032(0x141),'t':_0x400032(0x17a)},{'s':_0x400032(0x1bd),'t':_0x400032(0x1e8)},{'s':_0x400032(0x1bd),'t':_0x400032(0x1ae)}]);for(const _0x1d3342 of _0x12ad1f){if(_0x3681b5['includes'](_0x1d3342['s'])){const _0x21faf0=_0x3681b5[_0x400032(0x1a4)](_0x1d3342['s'],_0x1d3342['t']),_0x214ef5=await _0x480562['getForeignObjectAsync'](_0x21faf0);if(_0x214ef5)return _0x21faf0;}}try{const _0x5b2717=_0x3681b5['split']('.');if(_0x5b2717['length']>0x2){const _0x15f162=_0x5b2717[_0x400032(0x15c)](0x0,-0x1)[_0x400032(0x174)]('.'),_0x2dddaa=await _0x480562[_0x400032(0x1f9)](_0x15f162+'.*'),_0x37879a=[],_0x3662d1=_0x3681b5[_0x400032(0x140)](/[._]+/)[_0x400032(0x1b0)](_0x182370=>![_0x400032(0x18d),'0','hm-rpc','ist','wert',_0x400032(0x1bd),_0x400032(0x182),'sensor',_0x400032(0x1fb),'state']['includes'](_0x182370['toLowerCase']()));for(const [_0x19cdce,_0x45b503]of Object[_0x400032(0x18b)](_0x2dddaa)){if(_0x19cdce===_0x3681b5)continue;if(_0x45b503&&_0x45b503[_0x400032(0x1bb)]){const _0x19df14=_0x19cdce[_0x400032(0x154)](),_0x24b9cc=(_0x45b503[_0x400032(0x1bb)][_0x400032(0x1c7)]||'')[_0x400032(0x154)](),_0x3e4cb6=(_0x45b503[_0x400032(0x1bb)]['unit']||'')[_0x400032(0x154)]();let _0xd5394=![];if(_0x9f12c==='setpoint'&&_0x45b503[_0x400032(0x1bb)][_0x400032(0x1b5)]===!![])_0xd5394=_0x19df14[_0x400032(0x14c)](_0x400032(0x1e6))||_0x19df14[_0x400032(0x14c)]('soll')||_0x19df14['includes'](_0x400032(0x14a))||_0x24b9cc[_0x400032(0x14c)]('level.temperature')||_0x24b9cc[_0x400032(0x14c)](_0x400032(0x14d));else _0x9f12c===_0x400032(0x16b)&&(_0xd5394=_0x19df14[_0x400032(0x14c)]('level')||_0x19df14[_0x400032(0x14c)]('valve')||_0x19df14[_0x400032(0x14c)](_0x400032(0x1d8))||_0x19df14[_0x400032(0x14c)]('position')||_0x24b9cc[_0x400032(0x14c)](_0x400032(0x1f4))||_0x24b9cc['includes'](_0x400032(0x13e))||_0x3e4cb6['includes']('%'));if(_0xd5394){const _0x329d37=_0x19cdce[_0x400032(0x140)](/[._]+/)[_0x400032(0x1f6)](_0x3722ac=>_0x3722ac['toLowerCase']());let _0x4e11db=0x0;_0x3662d1[_0x400032(0x19b)](_0x3d969d=>{const _0x5b14e9=_0x400032;if(_0x329d37[_0x5b14e9(0x14c)](_0x3d969d[_0x5b14e9(0x154)]()))_0x4e11db++;}),_0x37879a[_0x400032(0x176)]({'id':_0x19cdce,'score':_0x4e11db});}}}if(_0x37879a[_0x400032(0x1a6)]>0x0){_0x37879a[_0x400032(0x1db)]((_0x32aca3,_0x1a2c2b)=>_0x1a2c2b[_0x400032(0x1ef)]-_0x32aca3[_0x400032(0x1ef)]);if(_0x37879a[0x0][_0x400032(0x1ef)]>0x0)return _0x37879a[0x0]['id'];}}}catch(_0x179ef0){}return null;}async function scanThermostats(_0x593cc9){const _0x59fb09=a1_0x29adb0,_0x1849d8=_0x593cc9[_0x59fb09(0x1ba)][_0x59fb09(0x16a)]||[],_0x178029=[],_0x5c3433=_0x1849d8[_0x59fb09(0x1b0)](_0x59665e=>_0x59665e['id']&&_0x59665e['id'][_0x59fb09(0x14c)](_0x59fb09(0x1bd))||_0x59665e[_0x59fb09(0x179)]&&[_0x59fb09(0x1bd),_0x59fb09(0x1f0),'sensor']['includes'](_0x59665e[_0x59fb09(0x179)])||_0x59665e[_0x59fb09(0x142)]&&_0x59665e[_0x59fb09(0x142)][_0x59fb09(0x154)]()[_0x59fb09(0x14c)](_0x59fb09(0x1ad)));for(const _0x2c80d1 of _0x5c3433){const _0x1d1ded=await findRelatedId(_0x593cc9,_0x2c80d1['id'],'setpoint'),_0x2baf82=await findRelatedId(_0x593cc9,_0x2c80d1['id'],_0x59fb09(0x16b));let _0x3ef628=_0x59fb09(0x19a),_0x5dd0a8=![],_0x5e3096=_0x593cc9['config'][_0x59fb09(0x1d1)]||{};if(typeof _0x5e3096===_0x59fb09(0x194))try{_0x5e3096=JSON['parse'](_0x5e3096);}catch(_0x1e877e){}let _0xc6658f=_0x593cc9[_0x59fb09(0x1ba)][_0x59fb09(0x157)]||{};if(typeof _0xc6658f===_0x59fb09(0x194))try{_0xc6658f=JSON[_0x59fb09(0x152)](_0xc6658f);}catch(_0x222992){}if(_0x5e3096[_0x2c80d1['id']]&&_0x5e3096[_0x2c80d1['id']]===_0x1d1ded||_0xc6658f[_0x2c80d1['id']]&&_0xc6658f[_0x2c80d1['id']]===_0x2baf82)_0x3ef628=_0x59fb09(0x18a),_0x5dd0a8=!![];else(_0x1d1ded||_0x2baf82)&&(_0x3ef628=_0x59fb09(0x1bf));_0x178029[_0x59fb09(0x176)]({'room':_0x2c80d1[_0x59fb09(0x190)]||'Unbekannt','sensorId':_0x2c80d1['id'],'setpointId':_0x1d1ded||'-','valveId':_0x2baf82||'-','source':_0x3ef628,'isManual':_0x5dd0a8,'status':_0x1d1ded&&_0x2baf82?_0x59fb09(0x1ce):_0x1d1ded?'OK':_0x59fb09(0x1f5)});}return _0x178029['sort']((_0x2e3e4d,_0x3e0858)=>_0x2e3e4d[_0x59fb09(0x1be)][_0x59fb09(0x1f3)](_0x3e0858[_0x59fb09(0x1be)]));}async function updateSchedulePreview(_0x19e6dd){const _0x3d1f0a=a1_0x29adb0;if(!_0x19e6dd[_0x3d1f0a(0x1ba)][_0x3d1f0a(0x166)]||!_0x19e6dd[_0x3d1f0a(0x1ba)][_0x3d1f0a(0x1af)])return;let _0x250d69={};try{const _0x3e583c=await _0x19e6dd[_0x3d1f0a(0x1d6)]('analysis.energy.warmupTimes');if(_0x3e583c&&_0x3e583c[_0x3d1f0a(0x14b)])_0x250d69=JSON[_0x3d1f0a(0x152)](_0x3e583c[_0x3d1f0a(0x14b)]);}catch(_0x563728){}const _0x41536f=[],_0x19d0d6=Date[_0x3d1f0a(0x15b)](),_0x280e39=0x30*0x3c*0x3c*0x3e8;try{const _0x594433=await _0x19e6dd[_0x3d1f0a(0x1e7)](_0x19e6dd[_0x3d1f0a(0x1ba)][_0x3d1f0a(0x1af)]+_0x3d1f0a(0x169));if(!_0x594433||!_0x594433['val'])return;const _0x171403=JSON[_0x3d1f0a(0x152)](_0x594433['val']),_0x3a1b8e=_0x19e6dd[_0x3d1f0a(0x1ba)][_0x3d1f0a(0x197)]||[],_0x7f0c0f=_0x19e6dd[_0x3d1f0a(0x1ba)]['devices']||[],_0x10eeee=new Set();_0x7f0c0f[_0x3d1f0a(0x19b)](_0x1904f3=>{const _0x16d3d1=_0x3d1f0a;if(_0x1904f3['location'])_0x10eeee[_0x16d3d1(0x1b1)](_0x1904f3[_0x16d3d1(0x190)]);});for(const _0x2b5ba5 of _0x171403){if(_0x2b5ba5[_0x3d1f0a(0x1c6)]&&_0x3a1b8e[_0x3d1f0a(0x1a6)]>0x0&&!_0x3a1b8e[_0x3d1f0a(0x14c)](_0x2b5ba5[_0x3d1f0a(0x1c6)]))continue;const _0x5acfd8=_0x2b5ba5['_date']||_0x2b5ba5[_0x3d1f0a(0x1e1)]||_0x2b5ba5[_0x3d1f0a(0x1e3)];if(!_0x5acfd8)continue;const _0xdb5340=new Date(_0x5acfd8),_0x255abd=_0xdb5340[_0x3d1f0a(0x1b3)]();if(isNaN(_0x255abd))continue;if(_0x255abd<_0x19d0d6)continue;if(_0x255abd>_0x19d0d6+_0x280e39)continue;const _0x443747=(_0x2b5ba5[_0x3d1f0a(0x18f)]||_0x2b5ba5[_0x3d1f0a(0x1a5)]||'')[_0x3d1f0a(0x154)]();let _0x76c471=![],_0x3d0c54=[],_0x2b315e=_0x2b5ba5['event']||_0x2b5ba5[_0x3d1f0a(0x1a5)]||_0x3d1f0a(0x19f);if(_0x443747[_0x3d1f0a(0x14c)]('urlaub\x20ende')||_0x443747['includes'](_0x3d1f0a(0x1c0))||_0x443747[_0x3d1f0a(0x14c)](_0x3d1f0a(0x164)))_0x76c471=!![],_0x3d0c54=Array[_0x3d1f0a(0x1ca)](_0x10eeee);else for(const _0x39267b of _0x10eeee){if(_0x443747[_0x3d1f0a(0x14c)](_0x39267b[_0x3d1f0a(0x154)]()))_0x3d0c54[_0x3d1f0a(0x176)](_0x39267b);}_0x3d0c54[_0x3d1f0a(0x1a6)]>0x0&&_0x3d0c54[_0x3d1f0a(0x19b)](_0x25d530=>{const _0x2834bb=_0x3d1f0a;let _0x395636=0x3c;if(_0x76c471){let _0x4f507a=0x0;Object[_0x2834bb(0x1d5)](_0x250d69)[_0x2834bb(0x19b)](_0x20bff4=>{if(_0x20bff4>_0x4f507a)_0x4f507a=_0x20bff4;}),_0x395636=_0x4f507a>0x0?_0x4f507a:0x78;}else _0x395636=getWarmupRobust(_0x250d69,_0x25d530);const _0x1fab3=new Date(_0x255abd-_0x395636*0xea60);_0x41536f[_0x2834bb(0x176)]({'eventTime':_0x255abd,'triggerTime':_0x1fab3[_0x2834bb(0x1b3)](),'room':_0x25d530,'minutes':_0x395636,'reason':_0x2b315e,'isGlobal':_0x76c471});});}}catch(_0x235942){}_0x41536f[_0x3d1f0a(0x1db)]((_0x2b0602,_0x4c114f)=>_0x2b0602[_0x3d1f0a(0x13c)]-_0x4c114f[_0x3d1f0a(0x13c)]);const _0x10fb34=_0x41536f['slice'](0x0,0x5);await _0x19e6dd[_0x3d1f0a(0x175)](_0x3d1f0a(0x1cd),{'val':JSON['stringify'](_0x10fb34),'ack':!![]});}async function monitorEnforcements(_0x3c142c){const _0x110d31=a1_0x29adb0;try{const _0x185368='analysis.energy.activeEnforcements',_0x5c7d2e=await _0x3c142c['getStateAsync'](_0x185368);if(!_0x5c7d2e||!_0x5c7d2e[_0x110d31(0x14b)])return;let _0xe3a694=[];try{_0xe3a694=JSON[_0x110d31(0x152)](_0x5c7d2e[_0x110d31(0x14b)]);}catch(_0x4a44f2){return;}if(!Array['isArray'](_0xe3a694)||_0xe3a694[_0x110d31(0x1a6)]===0x0)return;const _0x443cfd=Date[_0x110d31(0x15b)](),_0x5a11fc=_0x3c142c[_0x110d31(0x1ba)][_0x110d31(0x16a)]||[];let _0x14858e=![];for(let _0x4ff008=_0xe3a694[_0x110d31(0x1a6)]-0x1;_0x4ff008>=0x0;_0x4ff008--){const _0x11e5f9=_0xe3a694[_0x4ff008];if(_0x443cfd>=_0x11e5f9['until']){_0x3c142c[_0x110d31(0x1dd)][_0x110d31(0x1ab)](_0x110d31(0x15e)+_0x11e5f9[_0x110d31(0x1be)]+_0x110d31(0x191)),_0xe3a694[_0x110d31(0x189)](_0x4ff008,0x1),_0x14858e=!![];continue;}const _0x130425=_0x5a11fc[_0x110d31(0x1b6)](_0xc9fdaf=>normalize(_0xc9fdaf[_0x110d31(0x190)])===normalize(_0x11e5f9['room'])&&(_0xc9fdaf[_0x110d31(0x179)]===_0x110d31(0x1bd)||_0xc9fdaf['type']===_0x110d31(0x1f0)));if(_0x130425){const _0x8ae44e=await findRelatedId(_0x3c142c,_0x130425['id'],_0x110d31(0x1eb));if(_0x8ae44e){const _0x34cf96=await _0x3c142c[_0x110d31(0x1e7)](_0x8ae44e);_0x34cf96&&typeof _0x34cf96[_0x110d31(0x14b)]===_0x110d31(0x1a7)&&(_0x34cf96[_0x110d31(0x14b)]<0xf&&(_0x3c142c['log'][_0x110d31(0x177)](_0x110d31(0x1ed)+_0x11e5f9['room']+_0x110d31(0x163)+_0x34cf96['val']+_0x110d31(0x1ea)+_0x11e5f9[_0x110d31(0x14a)]+_0x110d31(0x1a1)),await _0x3c142c[_0x110d31(0x1c8)](_0x8ae44e,_0x11e5f9[_0x110d31(0x14a)]),await logAutomationAction(_0x3c142c,_0x110d31(0x1b7)+_0x11e5f9[_0x110d31(0x1be)]+':\x20'+_0x34cf96[_0x110d31(0x14b)]+_0x110d31(0x16f)+_0x11e5f9[_0x110d31(0x14a)]+_0x110d31(0x15f))));}}}_0x14858e&&await _0x3c142c[_0x110d31(0x175)](_0x185368,{'val':JSON[_0x110d31(0x167)](_0xe3a694),'ack':!![]});}catch(_0x348183){_0x3c142c[_0x110d31(0x1dd)][_0x110d31(0x156)](_0x110d31(0x1f1)+_0x348183[_0x110d31(0x150)]);}}async function checkCalendarTriggers(_0x1d591e){const _0x49949a=a1_0x29adb0;if(!_0x1d591e[_0x49949a(0x1ba)][_0x49949a(0x166)]||!_0x1d591e[_0x49949a(0x1ba)][_0x49949a(0x1af)])return;await updateSchedulePreview(_0x1d591e);let _0x37c13f={},_0x3e2ad8={};try{const _0x27f67e=await _0x1d591e[_0x49949a(0x1d6)](_0x49949a(0x165));if(_0x27f67e&&_0x27f67e[_0x49949a(0x14b)])_0x37c13f=JSON['parse'](_0x27f67e[_0x49949a(0x14b)]);const _0x2096ff=await _0x1d591e[_0x49949a(0x1d6)](_0x49949a(0x1da));if(_0x2096ff&&_0x2096ff['val'])_0x3e2ad8=JSON[_0x49949a(0x152)](_0x2096ff[_0x49949a(0x14b)]);}catch(_0x53696c){}let _0x2ce887={'default':0x15};try{const _0x440221=await _0x1d591e[_0x49949a(0x1d6)](_0x49949a(0x161));if(_0x440221&&_0x440221[_0x49949a(0x14b)])_0x2ce887=JSON[_0x49949a(0x152)](_0x440221[_0x49949a(0x14b)]);}catch(_0x1786d5){}let _0x1d2df0=[];try{const _0x2256f8=await _0x1d591e[_0x49949a(0x1d6)](_0x49949a(0x1a9));if(_0x2256f8&&_0x2256f8[_0x49949a(0x14b)])_0x1d2df0=JSON['parse'](_0x2256f8[_0x49949a(0x14b)]);}catch(_0x2dae10){}try{const _0x514071=await _0x1d591e[_0x49949a(0x1e7)](_0x1d591e['config']['calendarInstance']+_0x49949a(0x169));if(!_0x514071||!_0x514071[_0x49949a(0x14b)])return;const _0x3f398e=JSON['parse'](_0x514071[_0x49949a(0x14b)]),_0x1a1d9f=Date[_0x49949a(0x15b)](),_0x1baca4=_0x1d591e['config'][_0x49949a(0x16a)]||[],_0x14f927=_0x1d591e['config'][_0x49949a(0x197)]||[];let _0x4ee894=![];for(const _0x198fad of _0x3f398e){if(_0x198fad[_0x49949a(0x1c6)]&&_0x14f927[_0x49949a(0x1a6)]>0x0&&!_0x14f927[_0x49949a(0x14c)](_0x198fad[_0x49949a(0x1c6)]))continue;const _0x49f73a=_0x198fad['_date']||_0x198fad[_0x49949a(0x1e1)]||_0x198fad[_0x49949a(0x1e3)];if(!_0x49f73a)continue;const _0x531b24=new Date(_0x49f73a);if(isNaN(_0x531b24[_0x49949a(0x1b3)]()))continue;const _0xcfb55c=(_0x198fad['event']||_0x198fad[_0x49949a(0x1a5)]||'')['toLowerCase']();if(_0xcfb55c[_0x49949a(0x14c)]('urlaub\x20ende')||_0xcfb55c[_0x49949a(0x14c)](_0x49949a(0x1c0))||_0xcfb55c[_0x49949a(0x14c)](_0x49949a(0x164))){let _0x999813=0x0;Object[_0x49949a(0x1d5)](_0x37c13f)[_0x49949a(0x19b)](_0xa255d=>{if(_0xa255d>_0x999813)_0x999813=_0xa255d;});if(_0x999813===0x0)_0x999813=0x78;const _0x129eb3=_0x531b24['getTime']()-_0x999813*0xea60;_0x1a1d9f>=_0x129eb3&&_0x1a1d9f<_0x531b24[_0x49949a(0x1b3)]()&&(_0x1d591e['currentSystemMode']!==_0x49949a(0x1fa)&&(_0x1d591e['log'][_0x49949a(0x1ab)](_0x49949a(0x1c4)+_0x999813+_0x49949a(0x151)),await _0x1d591e[_0x49949a(0x175)](_0x49949a(0x17e),{'val':_0x49949a(0x1fa),'ack':![]})));}for(const _0x5be52d of _0x1baca4){if(_0x5be52d[_0x49949a(0x190)]){const _0x450767=_0x5be52d[_0x49949a(0x190)][_0x49949a(0x154)](),_0x8b5417=(_0x5be52d[_0x49949a(0x142)]||'')[_0x49949a(0x154)]();let _0x587364=_0xcfb55c[_0x49949a(0x14c)](_0x450767);!_0x587364&&_0x8b5417[_0x49949a(0x1a6)]>0x3&&_0xcfb55c[_0x49949a(0x14c)](_0x8b5417)&&(_0x587364=!![]);if(_0x587364){const _0xf5ac2a=getWarmupRobust(_0x37c13f,_0x5be52d[_0x49949a(0x190)]),_0x3adae4=_0x3e2ad8[_0x5be52d[_0x49949a(0x190)]]||_0x49949a(0x1ec),_0x1bb741=_0x531b24[_0x49949a(0x1b3)]()-_0xf5ac2a*0xea60;if(_0x1a1d9f>=_0x1bb741&&_0x1a1d9f<_0x531b24['getTime']()){const _0x4bc089=lastActions[_0x49949a(0x162)+_0x5be52d['location']];if(_0x4bc089&&_0x1a1d9f-_0x4bc089<CAL_COOLDOWN_MS)continue;const _0x216722=await findRelatedId(_0x1d591e,_0x5be52d['id'],_0x49949a(0x1eb));if(_0x216722){let _0x325cb6=_0x2ce887[_0x5be52d[_0x49949a(0x190)]];if(_0x325cb6===undefined)_0x325cb6=_0x2ce887[_0x49949a(0x1b9)];if(_0x325cb6===undefined)_0x325cb6=0x15;const _0x1355c2=await _0x1d591e[_0x49949a(0x1e7)](_0x216722);if(_0x1355c2&&typeof _0x1355c2[_0x49949a(0x14b)]==='number'&&_0x1355c2['val']<_0x325cb6-0.5){_0x1d591e[_0x49949a(0x1dd)]['info'](_0x49949a(0x188)+_0x3adae4+_0x49949a(0x1d0)+_0x5be52d['location']+_0x49949a(0x149)+_0xcfb55c+_0x49949a(0x155)+_0x325cb6+'¬∞C\x20(Vorlauf:\x20'+_0xf5ac2a+_0x49949a(0x151)),await _0x1d591e[_0x49949a(0x1c8)](_0x216722,_0x325cb6),await logAutomationAction(_0x1d591e,_0x49949a(0x16e)+_0x5be52d[_0x49949a(0x190)]+_0x49949a(0x13d)+_0x325cb6+_0x49949a(0x143)+_0x3adae4+')'),lastActions[_0x49949a(0x162)+_0x5be52d[_0x49949a(0x190)]]=_0x1a1d9f;const _0x5125ce=_0x1d2df0[_0x49949a(0x1dc)](_0x583835=>_0x583835['room']===_0x5be52d[_0x49949a(0x190)]);if(_0x5125ce!==-0x1)_0x1d2df0[_0x49949a(0x189)](_0x5125ce,0x1);_0x1d2df0['push']({'room':_0x5be52d[_0x49949a(0x190)],'target':_0x325cb6,'until':_0x531b24['getTime']()}),_0x4ee894=!![];}}}}}}}_0x4ee894&&await _0x1d591e[_0x49949a(0x175)](_0x49949a(0x1a9),{'val':JSON[_0x49949a(0x167)](_0x1d2df0),'ack':!![]});}catch(_0x268cc1){_0x1d591e[_0x49949a(0x1dd)][_0x49949a(0x177)](_0x49949a(0x15d)+_0x268cc1[_0x49949a(0x150)]);}}async function manageMpcIntervention(_0x5eb265,_0x4da8ca,_0x3dd7c3){const _0x95bfdb=a1_0x29adb0;try{const _0x30f736='analysis.energy.mpcActiveInterventions',_0x3f9526=await _0x5eb265[_0x95bfdb(0x1d6)](_0x30f736);let _0x574f6=[];if(_0x3f9526&&_0x3f9526[_0x95bfdb(0x14b)])try{_0x574f6=JSON[_0x95bfdb(0x152)](_0x3f9526[_0x95bfdb(0x14b)]);}catch(_0x45fc9b){}const _0x26b1fb=_0x574f6[_0x95bfdb(0x1cc)](_0x4da8ca);if(_0x3dd7c3==='add')_0x26b1fb===-0x1&&(_0x574f6[_0x95bfdb(0x176)](_0x4da8ca),await _0x5eb265[_0x95bfdb(0x175)](_0x30f736,{'val':JSON[_0x95bfdb(0x167)](_0x574f6),'ack':!![]}));else _0x3dd7c3===_0x95bfdb(0x1a3)&&(_0x26b1fb!==-0x1&&(_0x574f6[_0x95bfdb(0x189)](_0x26b1fb,0x1),await _0x5eb265[_0x95bfdb(0x175)](_0x30f736,{'val':JSON[_0x95bfdb(0x167)](_0x574f6),'ack':!![]})));}catch(_0x40f005){}}async function cleanupGhostInterventions(_0x1752e5){const _0x20078c=a1_0x29adb0;try{const _0x287da6=_0x20078c(0x1c3),_0x1b775c=await _0x1752e5[_0x20078c(0x1d6)](_0x287da6);if(!_0x1b775c||!_0x1b775c['val'])return;const _0x417193=JSON[_0x20078c(0x152)](_0x1b775c[_0x20078c(0x14b)]);if(!Array['isArray'](_0x417193)||_0x417193['length']===0x0)return;let _0x4c669f={'default':0x15};try{const _0x276324=await _0x1752e5[_0x20078c(0x1d6)](_0x20078c(0x161));if(_0x276324&&_0x276324[_0x20078c(0x14b)])_0x4c669f=JSON['parse'](_0x276324[_0x20078c(0x14b)]);}catch(_0x18539c){}let _0x3f5325=[];try{const _0x3da50a=await _0x1752e5[_0x20078c(0x1d6)](_0x20078c(0x1b4));if(_0x3da50a&&_0x3da50a['val'])_0x3f5325=JSON['parse'](_0x3da50a[_0x20078c(0x14b)]);}catch(_0x2cb781){}let _0x5c0de4={},_0x17a87d=![];try{const _0x8c5154=await _0x1752e5[_0x20078c(0x1d6)](_0x20078c(0x160));if(_0x8c5154&&_0x8c5154[_0x20078c(0x14b)])_0x5c0de4=JSON[_0x20078c(0x152)](_0x8c5154[_0x20078c(0x14b)]);}catch(_0x107d0d){}if(_0x5c0de4['_meta']){const _0x509a45=Date[_0x20078c(0x15b)]();for(const [_0x4a1b99,_0x5e2961]of Object[_0x20078c(0x18b)](_0x5c0de4['_meta'])){_0x509a45-_0x5e2961>PENALTY_TTL&&(delete _0x5c0de4[_0x4a1b99],delete _0x5c0de4['_meta'][_0x4a1b99],_0x17a87d=!![],_0x1752e5['log'][_0x20078c(0x1ab)](_0x20078c(0x17b)+_0x4a1b99+_0x20078c(0x13b)));}}const _0x4f9a16=_0x1752e5[_0x20078c(0x1ba)][_0x20078c(0x16a)]||[];let _0x483f26=![];for(let _0x583475=_0x417193[_0x20078c(0x1a6)]-0x1;_0x583475>=0x0;_0x583475--){const _0x508b21=_0x417193[_0x583475],_0x265f7f=_0x4f9a16[_0x20078c(0x1b6)](_0x197acf=>normalize(_0x197acf['location'])===normalize(_0x508b21)&&(_0x197acf['type']===_0x20078c(0x1bd)||_0x197acf[_0x20078c(0x179)]===_0x20078c(0x1f0)));if(!_0x265f7f){_0x1752e5[_0x20078c(0x1dd)][_0x20078c(0x177)](_0x20078c(0x1bc)+_0x508b21+_0x20078c(0x17d)),_0x417193[_0x20078c(0x189)](_0x583475,0x1),_0x483f26=!![];continue;}if(_0x265f7f){const _0x587f30=await findRelatedId(_0x1752e5,_0x265f7f['id'],'setpoint'),_0x378d9d=await _0x1752e5[_0x20078c(0x1e7)](_0x265f7f['id']);if(_0x587f30){const _0x57f106=await _0x1752e5[_0x20078c(0x1e7)](_0x587f30);if(_0x57f106&&typeof _0x57f106[_0x20078c(0x14b)]===_0x20078c(0x1a7)){let _0x399bc5=![],_0x53fc89='';Math['abs'](_0x57f106[_0x20078c(0x14b)]-ECO_TEMP)>0.5&&(_0x399bc5=!![],_0x53fc89=_0x20078c(0x193));if(!_0x399bc5&&_0x378d9d&&typeof _0x378d9d['val']==='number'){const _0x2f91d2=_0x4c669f[_0x508b21]||_0x4c669f[_0x20078c(0x1b9)]||0x15;_0x378d9d[_0x20078c(0x14b)]<_0x2f91d2+0.2&&(_0x399bc5=!![],_0x53fc89=_0x20078c(0x1ee));}if(_0x399bc5){if(_0x53fc89===_0x20078c(0x193)){_0x1752e5['log'][_0x20078c(0x1ab)](_0x20078c(0x1cb)+_0x508b21+_0x20078c(0x1d2)+_0x57f106[_0x20078c(0x14b)]+_0x20078c(0x199)+ECO_TEMP+_0x20078c(0x195));const _0x2bf34c=lastActions[_0x20078c(0x162)+_0x508b21],_0x13ac73=_0x2bf34c&&Date[_0x20078c(0x15b)]()-_0x2bf34c<0x2*0x3c*0x3e8;if(!_0x13ac73&&_0x57f106[_0x20078c(0x14b)]>ECO_TEMP+0.5){_0x1752e5[_0x20078c(0x148)]&&(_0x1752e5[_0x20078c(0x1dd)][_0x20078c(0x1ab)]('üéì\x20[RL-FEEDBACK]\x20Lerne\x20aus\x20Fehler:\x20'+_0x508b21+'\x20wurde\x20manuell\x20erh√∂ht.'),_0x1752e5['sendToPythonWrapper'](_0x20078c(0x1f7),{'room':_0x508b21}));const _0x6c5646=_0x508b21+'_'+new Date()[_0x20078c(0x1e2)]();if(!_0x5c0de4[_0x6c5646]){_0x5c0de4[_0x6c5646]=0x1;if(!_0x5c0de4[_0x20078c(0x185)])_0x5c0de4[_0x20078c(0x185)]={};_0x5c0de4['_meta'][_0x6c5646]=Date[_0x20078c(0x15b)](),_0x17a87d=!![];}}else _0x13ac73&&_0x1752e5[_0x20078c(0x1dd)][_0x20078c(0x1ab)](_0x20078c(0x17f)+_0x508b21+_0x20078c(0x1b8));}else{if(_0x53fc89===_0x20078c(0x1ee)){let _0xc29f2=![];if(_0x3f5325[_0x20078c(0x1b6)](_0x17d418=>_0x17d418[_0x20078c(0x1be)]===_0x508b21))_0xc29f2=!![];const _0x5cfae9=_0x4f9a16[_0x20078c(0x1b0)](_0x1a204a=>normalize(_0x1a204a['location'])===normalize(_0x508b21)&&(_0x1a204a[_0x20078c(0x179)]==='window'||_0x1a204a[_0x20078c(0x179)]==='sensor'||_0x1a204a[_0x20078c(0x179)]==='contact'));for(const _0xab730d of _0x5cfae9){try{const _0x584bf7=await _0x1752e5['getForeignStateAsync'](_0xab730d['id']);if(_0x584bf7&&(_0x584bf7[_0x20078c(0x14b)]===!![]||_0x584bf7[_0x20078c(0x14b)]===0x1||String(_0x584bf7[_0x20078c(0x14b)])['toLowerCase']()==='open'))_0xc29f2=!![];}catch(_0xf4875d){}}if(_0xc29f2)_0x1752e5[_0x20078c(0x1dd)]['info'](_0x20078c(0x13a)+_0x508b21+_0x20078c(0x1c1));else{const _0x3656c7=_0x4c669f[_0x508b21]||_0x4c669f[_0x20078c(0x1b9)]||0x15;_0x1752e5[_0x20078c(0x1dd)][_0x20078c(0x1ab)](_0x20078c(0x1d9)+_0x508b21+'\x20erreicht\x20Limit\x20('+_0x378d9d[_0x20078c(0x14b)]+_0x20078c(0x183)+(_0x3656c7+0.2)+_0x20078c(0x186)),await _0x1752e5[_0x20078c(0x1c8)](_0x587f30,_0x3656c7),await logAutomationAction(_0x1752e5,_0x20078c(0x14f)+_0x508b21+_0x20078c(0x18e)+_0x3656c7+'¬∞C'),lastActions[_0x20078c(0x181)+_0x508b21]=Date['now']();}}}_0x417193[_0x20078c(0x189)](_0x583475,0x1),_0x483f26=!![];}}}}}_0x483f26&&await _0x1752e5[_0x20078c(0x175)](_0x287da6,{'val':JSON[_0x20078c(0x167)](_0x417193),'ack':!![]}),_0x17a87d&&await _0x1752e5[_0x20078c(0x175)](_0x20078c(0x160),{'val':JSON['stringify'](_0x5c0de4),'ack':!![]});}catch(_0x222dc2){}}function a1_0x3c95(_0x4f8f58,_0x3397a9){const _0x2ef6b2=a1_0x43b6();return a1_0x3c95=function(_0x9b77e1,_0x485178){_0x9b77e1=_0x9b77e1-0x13a;let _0x43b6e2=_0x2ef6b2[_0x9b77e1];return _0x43b6e2;},a1_0x3c95(_0x4f8f58,_0x3397a9);}async function applyEnergySavings(_0x5b5ec4,_0x5e7c8e){const _0x215310=a1_0x29adb0;await cleanupGhostInterventions(_0x5b5ec4);if(!_0x5e7c8e||_0x5e7c8e[_0x215310(0x1a6)]===0x0)return;const _0x2b8b09=_0x5b5ec4[_0x215310(0x1ba)][_0x215310(0x16a)]||[],_0x1551cc=Date[_0x215310(0x15b)]();for(const _0x31166b of _0x5e7c8e){const _0x28a7a3=_0x31166b['room'],_0x557299=_0x31166b['minutes_safe'],_0x25d136=_0x31166b[_0x215310(0x14a)]||0x15;if(lastActions[_0x215310(0x181)+_0x28a7a3]&&_0x1551cc-lastActions[_0x215310(0x181)+_0x28a7a3]<RESCUE_LOCK_MS)continue;const _0x5bac9d=_0x2b8b09[_0x215310(0x1b6)](_0x43e239=>normalize(_0x43e239[_0x215310(0x190)])===normalize(_0x28a7a3)&&(_0x43e239[_0x215310(0x179)]===_0x215310(0x1bd)||_0x43e239[_0x215310(0x179)]===_0x215310(0x1f0)));if(!_0x5bac9d)continue;const _0x5d7848=await findRelatedId(_0x5b5ec4,_0x5bac9d['id'],'setpoint');if(_0x5d7848){if(lastActions[_0x215310(0x14e)+_0x28a7a3]&&_0x1551cc-lastActions[_0x215310(0x14e)+_0x28a7a3]<0x1e*0x3c*0x3e8)continue;const _0x492f46=await _0x5b5ec4[_0x215310(0x1e7)](_0x5d7848);if(_0x492f46&&typeof _0x492f46['val']==='number'){const _0x144420=_0x492f46[_0x215310(0x14b)];_0x144420!==ECO_TEMP&&await manageMpcIntervention(_0x5b5ec4,_0x28a7a3,_0x215310(0x1a3));if(_0x557299>0x1e)_0x144420>ECO_TEMP+0.5&&(_0x5b5ec4[_0x215310(0x1dd)][_0x215310(0x1ab)](_0x215310(0x168)+_0x28a7a3+_0x215310(0x163)+ECO_TEMP+_0x215310(0x180)+_0x557299+_0x215310(0x16c)),await _0x5b5ec4[_0x215310(0x1c8)](_0x5d7848,ECO_TEMP),await manageMpcIntervention(_0x5b5ec4,_0x28a7a3,_0x215310(0x1b1)),lastActions['mpc_'+_0x28a7a3]=_0x1551cc,await logAutomationAction(_0x5b5ec4,'[MPC]\x20'+_0x28a7a3+_0x215310(0x145)+ECO_TEMP+'¬∞C'));else _0x557299<=0xf&&(_0x144420<_0x25d136&&(_0x5b5ec4[_0x215310(0x1dd)][_0x215310(0x1ab)]('üî•\x20[MPC\x20ACTION]\x20Heize\x20'+_0x28a7a3+_0x215310(0x172)+_0x25d136+'¬∞C!\x20(Puffer\x20leer).'),await _0x5b5ec4[_0x215310(0x1c8)](_0x5d7848,_0x25d136),await manageMpcIntervention(_0x5b5ec4,_0x28a7a3,_0x215310(0x1a3)),lastActions[_0x215310(0x14e)+_0x28a7a3]=_0x1551cc,await logAutomationAction(_0x5b5ec4,_0x215310(0x147)+_0x28a7a3+':\x20Aufheizen\x20auf\x20'+_0x25d136+'¬∞C')));}}else _0x5b5ec4[_0x215310(0x1dd)][_0x215310(0x177)]('[MPC\x20WARNING]\x20Kein\x20Setpoint\x20f√ºr\x20'+_0x28a7a3+_0x215310(0x1df));}}module[a1_0x29adb0(0x187)]={'handlePrediction':handlePrediction,'applyEnergySavings':applyEnergySavings,'scanThermostats':scanThermostats,'checkCalendarTriggers':checkCalendarTriggers,'monitorEnforcements':monitorEnforcements,'updateSchedulePreview':updateSchedulePreview,'cleanupGhostInterventions':cleanupGhostInterventions};