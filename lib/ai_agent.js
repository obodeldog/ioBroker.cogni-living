const a0_0x487e90=a0_0x21aa;(function(_0x45b701,_0x236ef7){const _0x31a57d=a0_0x21aa,_0x449caf=_0x45b701();while(!![]){try{const _0x92958a=-parseInt(_0x31a57d(0x264))/0x1+parseInt(_0x31a57d(0x20a))/0x2*(parseInt(_0x31a57d(0x1ea))/0x3)+parseInt(_0x31a57d(0x24a))/0x4*(parseInt(_0x31a57d(0x1db))/0x5)+parseInt(_0x31a57d(0x223))/0x6*(parseInt(_0x31a57d(0x1fb))/0x7)+-parseInt(_0x31a57d(0x237))/0x8*(-parseInt(_0x31a57d(0x25f))/0x9)+-parseInt(_0x31a57d(0x1e8))/0xa*(parseInt(_0x31a57d(0x20b))/0xb)+-parseInt(_0x31a57d(0x218))/0xc;if(_0x92958a===_0x236ef7)break;else _0x449caf['push'](_0x449caf['shift']());}catch(_0x37f556){_0x449caf['push'](_0x449caf['shift']());}}}(a0_0x466b,0x93d04));const a0_0x17c127=(function(){let _0x426e8c=!![];return function(_0xce692c,_0x1092f3){const _0x4464c3=_0x426e8c?function(){const _0x29ca20=a0_0x21aa;if(_0x1092f3){const _0x30b625=_0x1092f3[_0x29ca20(0x20e)](_0xce692c,arguments);return _0x1092f3=null,_0x30b625;}}:function(){};return _0x426e8c=![],_0x4464c3;};}()),a0_0x56551e=a0_0x17c127(this,function(){const _0x25386d=a0_0x21aa;return a0_0x56551e[_0x25386d(0x245)]()['search'](_0x25386d(0x244))['toString']()[_0x25386d(0x1e9)](a0_0x56551e)[_0x25386d(0x230)](_0x25386d(0x244));});a0_0x56551e();'use strict';const {GoogleGenerativeAI}=require(a0_0x487e90(0x20f)),setup=require('./setup'),GEMINI_MODEL=a0_0x487e90(0x253),LTM_DP_DAILY_DIGESTS=a0_0x487e90(0x234),LTM_DP_STATUS=a0_0x487e90(0x213),LTM_DP_RAW_LOG=a0_0x487e90(0x224),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x487e90(0x1eb),'senior_aal':a0_0x487e90(0x267),'family':a0_0x487e90(0x207),'single_comfort':a0_0x487e90(0x254),'security':a0_0x487e90(0x228),'energy_saver':'PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'};function canCallApi(){const _0x3a0966=a0_0x487e90,_0x3908d2=Date[_0x3a0966(0x23b)]();return _0x3908d2-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x7fe6fe){const _0x2f36a8=a0_0x487e90;if(!_0x7fe6fe[_0x2f36a8(0x1e1)][_0x2f36a8(0x252)]||!_0x7fe6fe[_0x2f36a8(0x1e1)]['weatherInstance'])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x2ebe0a=_0x7fe6fe[_0x2f36a8(0x1e1)][_0x2f36a8(0x250)];let _0x5daabf=await _0x7fe6fe[_0x2f36a8(0x24e)](_0x2ebe0a+_0x2f36a8(0x1da));if(!_0x5daabf)_0x5daabf=await _0x7fe6fe['getForeignStateAsync'](_0x2ebe0a+_0x2f36a8(0x21c));let _0x1282d5=await _0x7fe6fe[_0x2f36a8(0x24e)](_0x2ebe0a+'.Current.WeatherText');if(!_0x1282d5)_0x1282d5=await _0x7fe6fe[_0x2f36a8(0x24e)](_0x2ebe0a+_0x2f36a8(0x240));let _0x32d0e6=_0x2f36a8(0x232);const _0x5b897f=await _0x7fe6fe['getForeignStateAsync'](_0x2ebe0a+'.Current.IsNight');if(_0x5b897f)_0x32d0e6=_0x5b897f['val']?_0x2f36a8(0x216):_0x2f36a8(0x247);if(_0x5daabf&&_0x1282d5)return _0x5daabf[_0x2f36a8(0x22d)]+_0x2f36a8(0x1f4)+_0x1282d5[_0x2f36a8(0x22d)]+',\x20Lichtverh√§ltnisse:\x20'+_0x32d0e6;}catch(_0x540fee){}return _0x2f36a8(0x220);}async function consultButler(_0x24ddfa,_0x194727,_0x293588,_0x2d0912){const _0x3893f3=a0_0x487e90;if(!_0x24ddfa[_0x3893f3(0x248)])return{'approved':!![],'reason':_0x3893f3(0x258)};const _0x4a6283=Date['now']();if(decisionCache[_0x194727]&&_0x4a6283-decisionCache[_0x194727][_0x3893f3(0x24b)]<CACHE_TTL_MS){const _0x3fb875=decisionCache[_0x194727][_0x3893f3(0x206)];return _0x24ddfa[_0x3893f3(0x1e0)]['debug'](_0x3893f3(0x231)+_0x194727+_0x3893f3(0x208)+(_0x3fb875[_0x3893f3(0x235)]?'OK':'NO')+'\x20('+_0x3fb875[_0x3893f3(0x1e4)]+')'),_0x3fb875;}if(!canCallApi())return _0x24ddfa[_0x3893f3(0x1e0)][_0x3893f3(0x22c)]('ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20'+_0x194727+_0x3893f3(0x23c)),{'approved':!![],'reason':_0x3893f3(0x20c)};const _0x3ed454=new Date()[_0x3893f3(0x201)](),_0x28eceb=await getWeatherContext(_0x24ddfa),_0x421138=PERSONA_MAPPING[_0x24ddfa[_0x3893f3(0x1e1)][_0x3893f3(0x1dd)]||_0x3893f3(0x265)],_0x457a9b=_0x3893f3(0x238)+_0x3ed454+',\x20Wetter:\x20'+_0x28eceb+_0x3893f3(0x259)+(_0x2d0912*0x64)[_0x3893f3(0x1f3)](0x0)+_0x3893f3(0x226)+_0x194727+_0x3893f3(0x23a)+_0x293588+_0x3893f3(0x23d)+_0x421138+_0x3893f3(0x1e5);try{updateApiTimestamp();const _0x404a3a=await _0x24ddfa['geminiModel'][_0x3893f3(0x1fd)](_0x457a9b),_0x393f14=_0x404a3a[_0x3893f3(0x266)][_0x3893f3(0x24f)]()[_0x3893f3(0x209)](/```json|```/g,'')[_0x3893f3(0x21d)](),_0x1cfbd9=JSON[_0x3893f3(0x200)](_0x393f14);return decisionCache[_0x194727]={'decision':_0x1cfbd9,'timestamp':_0x4a6283},_0x1cfbd9;}catch(_0x38c1e4){return _0x24ddfa[_0x3893f3(0x1e0)][_0x3893f3(0x1fa)](_0x3893f3(0x25a)+_0x38c1e4[_0x3893f3(0x263)]),decisionCache[_0x194727]={'decision':{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'},'timestamp':_0x4a6283-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x3893f3(0x229)};}}async function runGeminiAnalysis(_0x2cc204,_0x10296d=''){const _0x4bb96f=a0_0x487e90;if(!_0x2cc204[_0x4bb96f(0x248)])return;if(!canCallApi()){_0x2cc204[_0x4bb96f(0x1e0)]['debug'](_0x4bb96f(0x241));return;}if(_0x2cc204['eventHistory']['length']===0x0)return;const _0x3322eb=_0x2cc204['eventHistory'][_0x4bb96f(0x262)](0x0,0xf),_0x42b81f=_0x2cc204[_0x4bb96f(0x212)],_0xfa6a68=PERSONA_MAPPING[_0x2cc204[_0x4bb96f(0x1e1)][_0x4bb96f(0x1dd)]||_0x4bb96f(0x265)],_0x3ede75=_0x2cc204[_0x4bb96f(0x1e1)]['livingContext']||_0x4bb96f(0x21a);let _0x266921='Unbekannt';try{const _0x541eaf=await _0x2cc204[_0x4bb96f(0x1ec)](_0x4bb96f(0x25d));if(_0x541eaf&&_0x541eaf[_0x4bb96f(0x22d)])_0x266921=_0x541eaf[_0x4bb96f(0x22d)];}catch(_0x39a246){}let _0x108372=![];try{const _0x56859c=await _0x2cc204['getStateAsync'](_0x4bb96f(0x1ee));if(_0x56859c&&_0x56859c['val'])_0x108372=!![];}catch(_0x1fa136){}const _0x579b3d=_0x4bb96f(0x233)+_0xfa6a68+_0x4bb96f(0x210)+_0x3ede75+_0x4bb96f(0x24d)+_0x42b81f+_0x4bb96f(0x1f9)+_0x266921+'.\x20EVENTS:\x20'+JSON[_0x4bb96f(0x1e6)](_0x3322eb)+_0x4bb96f(0x1de)+_0x10296d+_0x4bb96f(0x260);try{updateApiTimestamp();const _0x55ebff=await _0x2cc204[_0x4bb96f(0x248)][_0x4bb96f(0x1fd)](_0x579b3d),_0x430e22=JSON[_0x4bb96f(0x200)](_0x55ebff[_0x4bb96f(0x266)][_0x4bb96f(0x24f)]()[_0x4bb96f(0x209)](/```json|```/g,'')[_0x4bb96f(0x21d)]());await _0x2cc204[_0x4bb96f(0x202)](_0x4bb96f(0x219),{'val':JSON[_0x4bb96f(0x1e6)](_0x430e22),'ack':!![]});if(_0x430e22[_0x4bb96f(0x22f)])await _0x2cc204['setStateAsync'](_0x4bb96f(0x222),{'val':_0x430e22[_0x4bb96f(0x22f)],'ack':!![]});const _0x4881bf={'timestamp':Date['now'](),'id':Date['now']()[_0x4bb96f(0x245)](),'analysis':{'activity':{'summary':_0x430e22[_0x4bb96f(0x22f)],'isAlert':_0x430e22[_0x4bb96f(0x236)],'alertReason':_0x430e22[_0x4bb96f(0x261)]},'comfort':{'automationProposal':_0x430e22[_0x4bb96f(0x1f2)]}}};_0x2cc204[_0x4bb96f(0x1f6)][_0x4bb96f(0x21b)](_0x4881bf);if(_0x2cc204['analysisHistory'][_0x4bb96f(0x25c)]>0x32)_0x2cc204['analysisHistory'][_0x4bb96f(0x249)]();await _0x2cc204[_0x4bb96f(0x202)](_0x4bb96f(0x203),{'val':JSON[_0x4bb96f(0x1e6)](_0x2cc204[_0x4bb96f(0x1f6)]),'ack':!![]});const _0x1680af=_0x430e22[_0x4bb96f(0x236)]||![];_0x1680af!==_0x2cc204['lastAlertState']&&(await _0x2cc204['setStateAsync'](_0x4bb96f(0x225),{'val':_0x1680af,'ack':!![]}),_0x2cc204['lastAlertState']=_0x1680af,_0x1680af&&(await _0x2cc204[_0x4bb96f(0x202)](_0x4bb96f(0x239),{'val':_0x430e22[_0x4bb96f(0x261)],'ack':!![]}),setup[_0x4bb96f(0x246)](_0x2cc204,_0x4bb96f(0x1fc)+_0x430e22[_0x4bb96f(0x261)],![],_0x430e22['isEmergency'])));if(_0x430e22[_0x4bb96f(0x1f2)]&&_0x430e22['automationProposal'][_0x4bb96f(0x23e)]){await _0x2cc204['setStateAsync'](_0x4bb96f(0x24c),{'val':!![],'ack':!![]}),await _0x2cc204['setStateAsync'](_0x4bb96f(0x22b),{'val':_0x430e22['automationProposal'][_0x4bb96f(0x1e7)],'ack':!![]}),await _0x2cc204[_0x4bb96f(0x202)]('analysis.automation.targetId',{'val':_0x430e22[_0x4bb96f(0x1f2)]['targetId'],'ack':!![]}),await _0x2cc204[_0x4bb96f(0x202)](_0x4bb96f(0x257),{'val':JSON[_0x4bb96f(0x1e6)](_0x430e22['automationProposal'][_0x4bb96f(0x22a)]),'ack':!![]});if(_0x108372)executeAutomationAction(_0x2cc204);}}catch(_0x42e32d){_0x2cc204['log']['error'](_0x4bb96f(0x21f)+_0x42e32d[_0x4bb96f(0x263)]);}}async function createDailyDigest(_0x40f645,_0x40dc57){const _0x4954a2=a0_0x487e90;if(!_0x40f645[_0x4954a2(0x205)])return;if(!canCallApi()){await _0x40f645[_0x4954a2(0x202)](LTM_DP_STATUS,{'val':_0x4954a2(0x1e3),'ack':!![]});return;}await _0x40f645[_0x4954a2(0x202)](LTM_DP_STATUS,{'val':_0x4954a2(0x1f0),'ack':!![]});if(!_0x40f645[_0x4954a2(0x248)]||_0x40f645['rawEventLog'][_0x4954a2(0x25c)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x40f645[_0x4954a2(0x202)](LTM_DP_STATUS,{'val':_0x4954a2(0x214),'ack':!![]});return;}const _0x3618b7=JSON[_0x4954a2(0x200)](JSON['stringify'](_0x40f645[_0x4954a2(0x1f8)])),_0x121dab=_0x3618b7['length'],_0x4ea022=_0x4954a2(0x215)+JSON[_0x4954a2(0x1e6)](_0x3618b7);try{updateApiTimestamp();const _0x29f86f=await _0x40f645[_0x4954a2(0x248)][_0x4954a2(0x1fd)](_0x4ea022),_0x356b49=JSON[_0x4954a2(0x200)](_0x29f86f[_0x4954a2(0x266)][_0x4954a2(0x24f)]()[_0x4954a2(0x209)](/```json|```/g,'')['trim']()),_0x32aa9c={'timestamp':new Date()[_0x4954a2(0x227)](),'eventCount':_0x121dab,'summary':_0x356b49['summary']||_0x4954a2(0x21e),'activityLevel':_0x356b49[_0x4954a2(0x1dc)]||_0x4954a2(0x256),'systemMode':_0x40f645[_0x4954a2(0x212)]};_0x40f645[_0x4954a2(0x204)][_0x4954a2(0x1fe)](_0x32aa9c);const _0x97de25=_0x40f645[_0x4954a2(0x1e1)][_0x4954a2(0x1df)]||0x3c;_0x40f645[_0x4954a2(0x204)]['length']>_0x97de25&&_0x40f645['dailyDigests'][_0x4954a2(0x243)](0x0,_0x40f645[_0x4954a2(0x204)]['length']-_0x97de25);await _0x40f645[_0x4954a2(0x202)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x4954a2(0x1e6)](_0x40f645['dailyDigests']),'ack':!![]}),_0x40f645[_0x4954a2(0x1f8)]=[],await _0x40f645[_0x4954a2(0x202)](LTM_DP_RAW_LOG,{'val':JSON[_0x4954a2(0x1e6)](_0x40f645['rawEventLog']),'ack':!![]}),await _0x40f645['setStateAsync'](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x40f645[_0x4954a2(0x205)]&&_0x40dc57)_0x40dc57[_0x4954a2(0x251)](_0x40f645,_0x4954a2(0x25b),{'digest':_0x32aa9c});}catch(_0x4bc0bc){_0x40f645[_0x4954a2(0x1e0)]['error'](_0x4bc0bc[_0x4954a2(0x263)]);}}async function runBaselineDriftAnalysis(_0x1a4c93){const _0x55c14b=a0_0x487e90;if(!_0x1a4c93['isProVersion']||!_0x1a4c93[_0x55c14b(0x248)])return;if(!canCallApi())return;const _0x3c3039=_0x1a4c93[_0x55c14b(0x1e1)][_0x55c14b(0x1f7)]||0xe;if(_0x1a4c93[_0x55c14b(0x204)][_0x55c14b(0x25c)]<_0x3c3039+0x7){await _0x1a4c93[_0x55c14b(0x202)](_0x55c14b(0x1ff),{'val':_0x55c14b(0x1e2),'ack':!![]});return;}const _0x5b7aee=_0x1a4c93[_0x55c14b(0x204)][_0x55c14b(0x262)](-_0x3c3039),_0x21f5d8=_0x1a4c93[_0x55c14b(0x204)][_0x55c14b(0x262)](0x0,_0x1a4c93[_0x55c14b(0x204)][_0x55c14b(0x25c)]-_0x3c3039),_0x24e1d1=_0x55c14b(0x1ed)+JSON['stringify'](_0x21f5d8)+_0x55c14b(0x221)+JSON[_0x55c14b(0x1e6)](_0x5b7aee);try{updateApiTimestamp();const _0x1e4012=await _0x1a4c93[_0x55c14b(0x248)][_0x55c14b(0x1fd)](_0x24e1d1),_0x180841=JSON[_0x55c14b(0x200)](_0x1e4012[_0x55c14b(0x266)][_0x55c14b(0x24f)]()[_0x55c14b(0x209)](/```json|```/g,'')[_0x55c14b(0x21d)]());_0x180841[_0x55c14b(0x1ef)]&&(await _0x1a4c93[_0x55c14b(0x202)]('LTM.driftAnalysis.baselineDrift',{'val':_0x180841[_0x55c14b(0x1ef)],'ack':!![]}),await _0x1a4c93[_0x55c14b(0x202)](_0x55c14b(0x255),{'val':_0x180841['driftDetails'],'ack':!![]}),await _0x1a4c93['setStateAsync'](_0x55c14b(0x211),{'val':Date[_0x55c14b(0x23b)](),'ack':!![]}));}catch(_0x3a492c){}}function a0_0x466b(){const _0x398e91=['config','N/A\x20(Learning)','Skipped\x20(Traffic)','reason','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','stringify','description','2529990bEuZFV','constructor','1381431iBxJOD','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','getStateAsync','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','analysis.automation.autoApply','baselineDrift','Started...','error','automationProposal','toFixed','¬∞C,\x20','analysis.automation.targetId','analysisHistory','ltmStbWindowDays','rawEventLog','.\x20ANWESEND:\x20','warn','352289wjHOQX','‚ö†Ô∏è\x20ALARM:\x20','generateContent','push','LTM.driftAnalysis.baselineDrift','parse','toLocaleTimeString','setStateAsync','analysis.analysisHistory','dailyDigests','isProVersion','decision','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','\x20->\x20','replace','2WvwUdG','33mjMoer','Traffic-Schutz\x20(Auto-Approved)','exports','apply','@google/generative-ai','.\x20KONTEXT:\x20','LTM.driftAnalysis.lastCheck','currentSystemMode','LTM.processingStatus','Skipped\x20(No\x20AI\x20or\x20Data)','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','Nacht','setForeignStateAsync','5555460DLPWid','analysis.lastResult','Keine\x20Details.','unshift','.forecast.current.temperature','trim','Digest','Gemini\x20Error:\x20','Wetterdaten\x20nicht\x20abrufbar','\x0aSTB:\x20','analysis.activitySummary','42fwbseu','LTM.rawEventLog','analysis.isAlert','%)\x20nach\x20\x22','toISOString','Sicherheit\x20geht\x20vor.','KI-Fehler\x20(Fallback)','targetValue','analysis.automation.description','debug','val','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','summary','search','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','Unbekannt','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','LTM.dailyDigests','approved','isAlert','3396584qVpiHp','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','analysis.alertReason','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','now','\x20√ºbersprungen\x20(Auto-Approved).','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','detected','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','.forecast.current.state','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','üåÖ\x20Morning\x20Briefing:\x0a','splice','(((.+)+)+)+$','toString','sendNotification','Tag','geminiModel','pop','4KkSWnH','timestamp','analysis.automation.patternDetected','.\x20SYSTEM_MODE:\x20','getForeignStateAsync','text','weatherInstance','send','useWeather','models/gemini-flash-latest','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','LTM.driftAnalysis.driftDetails','normal','analysis.automation.targetValue','KI\x20offline\x20(Fallback)','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','ü§ñ\x20Butler\x20Brain\x20Error:\x20','ANALYZE_HEALTH','length','system.presenceWho','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','18NCrNBw','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','alertReason','slice','message','850935LYhwsx','generic','response','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','.Current.Temperature','5082095YxmLZt','activityLevel','aiPersona','.\x20EMERGENCY:\x20','ltmLtbWindowDays','log'];a0_0x466b=function(){return _0x398e91;};return a0_0x466b();}function a0_0x21aa(_0x5a4d8e,_0x13b8f5){const _0x12cb7a=a0_0x466b();return a0_0x21aa=function(_0x56551e,_0x17c127){_0x56551e=_0x56551e-0x1da;let _0x466b17=_0x12cb7a[_0x56551e];return _0x466b17;},a0_0x21aa(_0x5a4d8e,_0x13b8f5);}async function executeAutomationAction(_0x24a10b){const _0x36fb57=a0_0x487e90;try{const _0x5c3cd6=await _0x24a10b['getStateAsync'](_0x36fb57(0x1f5)),_0x1a5fc2=await _0x24a10b[_0x36fb57(0x1ec)]('analysis.automation.targetValue');if(_0x5c3cd6&&_0x5c3cd6[_0x36fb57(0x22d)]&&_0x1a5fc2){const _0x1d9fb6=_0x5c3cd6[_0x36fb57(0x22d)];let _0x4153e8=_0x1a5fc2['val'];try{_0x4153e8=JSON[_0x36fb57(0x200)](_0x4153e8);}catch(_0x453c1d){}_0x24a10b[_0x36fb57(0x1e0)]['info'](_0x36fb57(0x25e)+_0x1d9fb6+'\x20=\x20'+_0x4153e8),await _0x24a10b[_0x36fb57(0x217)](_0x1d9fb6,_0x4153e8);}else _0x24a10b[_0x36fb57(0x1e0)][_0x36fb57(0x1fa)](_0x36fb57(0x22e));}catch(_0x5d86ec){_0x24a10b[_0x36fb57(0x1e0)][_0x36fb57(0x1f1)]('BUTLER\x20Execution\x20Error:\x20'+_0x5d86ec[_0x36fb57(0x263)]);}}async function sendMorningBriefing(_0x1482fb){const _0x4053fd=a0_0x487e90;if(!_0x1482fb[_0x4053fd(0x248)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x4755a7=_0x4053fd(0x23f),_0x110381=await _0x1482fb[_0x4053fd(0x248)][_0x4053fd(0x1fd)](_0x4755a7),_0x23805f=_0x110381[_0x4053fd(0x266)][_0x4053fd(0x24f)]();setup['sendNotification'](_0x1482fb,_0x4053fd(0x242)+_0x23805f);}catch(_0x4fec3b){_0x1482fb['log'][_0x4053fd(0x1f1)]('Briefing\x20Error:\x20'+_0x4fec3b['message']);}}module[a0_0x487e90(0x20d)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};