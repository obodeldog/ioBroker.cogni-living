const a0_0x46b53b=a0_0x4160;(function(_0x4672ff,_0x5d7b91){const _0x161e34=a0_0x4160,_0x290615=_0x4672ff();while(!![]){try{const _0x8dad42=-parseInt(_0x161e34(0x15d))/0x1+-parseInt(_0x161e34(0x1c1))/0x2*(-parseInt(_0x161e34(0x15c))/0x3)+parseInt(_0x161e34(0x1c4))/0x4*(parseInt(_0x161e34(0x1d8))/0x5)+-parseInt(_0x161e34(0x1ac))/0x6*(parseInt(_0x161e34(0x162))/0x7)+parseInt(_0x161e34(0x1cb))/0x8+-parseInt(_0x161e34(0x1cf))/0x9+parseInt(_0x161e34(0x17d))/0xa;if(_0x8dad42===_0x5d7b91)break;else _0x290615['push'](_0x290615['shift']());}catch(_0xef7940){_0x290615['push'](_0x290615['shift']());}}}(a0_0x3023,0x96007));const a0_0x4b1872=(function(){let _0x1da1e0=!![];return function(_0x17daf4,_0x11afd3){const _0x172150=_0x1da1e0?function(){const _0x45affc=a0_0x4160;if(_0x11afd3){const _0x528a32=_0x11afd3[_0x45affc(0x186)](_0x17daf4,arguments);return _0x11afd3=null,_0x528a32;}}:function(){};return _0x1da1e0=![],_0x172150;};}()),a0_0x4e78c2=a0_0x4b1872(this,function(){const _0x58aca0=a0_0x4160;return a0_0x4e78c2['toString']()[_0x58aca0(0x1c0)]('(((.+)+)+)+$')[_0x58aca0(0x1dc)]()[_0x58aca0(0x192)](a0_0x4e78c2)['search'](_0x58aca0(0x171));});a0_0x4e78c2();'use strict';const {GoogleGenerativeAI}=require(a0_0x46b53b(0x158)),setup=require(a0_0x46b53b(0x1da)),GEMINI_MODEL=a0_0x46b53b(0x1a9),LTM_DP_DAILY_DIGESTS=a0_0x46b53b(0x198),LTM_DP_STATUS=a0_0x46b53b(0x188),LTM_DP_RAW_LOG=a0_0x46b53b(0x19f),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x46b53b(0x1d2),'senior_aal':'PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':a0_0x46b53b(0x1ae),'single_comfort':a0_0x46b53b(0x15e),'security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x46b53b(0x1b7)};function canCallApi(){const _0x1e7cf9=a0_0x46b53b,_0x1691dc=Date[_0x1e7cf9(0x183)]();return _0x1691dc-lastGlobalApiCall>MIN_API_GAP_MS;}function a0_0x3023(){const _0x53c502=['analysis.automation.description','getForeignStateAsync','now','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20',',\x20Lichtverh√§ltnisse:\x20','apply',',\x20Wetter:\x20','LTM.processingStatus','timestamp','%)\x20nach\x20\x22','parse','Started...','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','analysis.automation.autoApply','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','trim','dailyDigests','constructor','isAlert','\x20√ºbersprungen\x20(Auto-Approved).','geminiModel','val','analysis.automation.targetId','LTM.dailyDigests','rawEventLog','.\x20ANWESEND:\x20','ltmLtbWindowDays','Digest','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','stringify','LTM.rawEventLog','driftDetails',').\x20Sending\x20notification...','config','unshift','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','analysis.automation.targetValue','getStateAsync','system.presenceWho','text','models/gemini-flash-latest','length','.forecast.current.temperature','4005234oYJUKT','Unbekannt','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','N/A\x20(Learning)','\x20=\x20','ü§ñ\x20Butler\x20Brain\x20Error:\x20','LTM.driftAnalysis.baselineDrift','üìÖ\x20Daily\x20Digest:\x0a','Skipped\x20(Traffic)','send','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','weatherInstance','\x0aSTB:\x20','log','analysis.isAlert','\x0aAktivit√§t:\x20','toFixed','decision','Unbekannt\x20(Kein\x20Sensor)','search','34WOYqui','ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','.\x20EMERGENCY:\x20','4BGDDat','Skipped\x20(No\x20AI\x20or\x20Data)','targetValue','sendNotification','livingContext','LTM.driftAnalysis.lastCheck','message','989112uDdbzo','.forecast.current.state','Success','automationProposal','1182636CsvxnC','info','analysisHistory','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','approved','response','setStateAsync','lastAlertState','normal','1817305XZJIVU','eventHistory','./setup','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','toString','analysis.activitySummary','summary','warn','@google/generative-ai','baselineDrift','Keine\x20Details.','alertReason','54276jxnSlg','597832LivatK','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','isProVersion','generateContent','splice','7CTzDZh','currentSystemMode','aiPersona','ANALYZE_HEALTH','replace','ltmStbWindowDays','debug','üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','BUTLER\x20Execution\x20Error:\x20','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','.Current.WeatherText','.\x20SYSTEM_MODE:\x20','.\x20KONTEXT:\x20','error','LTM.driftAnalysis.driftDetails','(((.+)+)+)+$','isEmergency','KI-Fehler\x20(Fallback)','¬∞C,\x20','slice','Briefing\x20Error:\x20','KI\x20offline\x20(Fallback)','pop','analysis.automation.patternDetected','generic','Traffic-Schutz\x20(Auto-Approved)','exports','12165180nUPUYq','description','.Current.IsNight','Tag'];a0_0x3023=function(){return _0x53c502;};return a0_0x3023();}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x530be0){const _0xb0c79f=a0_0x46b53b;if(!_0x530be0[_0xb0c79f(0x1a2)]['useWeather']||!_0x530be0[_0xb0c79f(0x1a2)][_0xb0c79f(0x1b8)])return _0xb0c79f(0x1bf);try{const _0x38859a=_0x530be0[_0xb0c79f(0x1a2)][_0xb0c79f(0x1b8)];let _0x1c23e6=await _0x530be0[_0xb0c79f(0x182)](_0x38859a+'.Current.Temperature');if(!_0x1c23e6)_0x1c23e6=await _0x530be0[_0xb0c79f(0x182)](_0x38859a+_0xb0c79f(0x1ab));let _0x32de4d=await _0x530be0[_0xb0c79f(0x182)](_0x38859a+_0xb0c79f(0x16c));if(!_0x32de4d)_0x32de4d=await _0x530be0[_0xb0c79f(0x182)](_0x38859a+_0xb0c79f(0x1cc));let _0x458796=_0xb0c79f(0x1ad);const _0x17f877=await _0x530be0[_0xb0c79f(0x182)](_0x38859a+_0xb0c79f(0x17f));if(_0x17f877)_0x458796=_0x17f877[_0xb0c79f(0x196)]?'Nacht':_0xb0c79f(0x180);if(_0x1c23e6&&_0x32de4d)return _0x1c23e6[_0xb0c79f(0x196)]+_0xb0c79f(0x174)+_0x32de4d[_0xb0c79f(0x196)]+_0xb0c79f(0x185)+_0x458796;}catch(_0x9fdcd0){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x5944b3,_0x9d1ccb,_0x27c0be,_0x7883d7){const _0x1a7b85=a0_0x46b53b;if(!_0x5944b3[_0x1a7b85(0x195)])return{'approved':!![],'reason':_0x1a7b85(0x177)};const _0x3e4fdf=Date[_0x1a7b85(0x183)]();if(decisionCache[_0x9d1ccb]&&_0x3e4fdf-decisionCache[_0x9d1ccb][_0x1a7b85(0x189)]<CACHE_TTL_MS){const _0x5be336=decisionCache[_0x9d1ccb][_0x1a7b85(0x1be)];return _0x5944b3['log'][_0x1a7b85(0x168)](_0x1a7b85(0x16b)+_0x9d1ccb+'\x20->\x20'+(_0x5be336[_0x1a7b85(0x1d3)]?'OK':'NO')+'\x20('+_0x5be336['reason']+')'),_0x5be336;}if(!canCallApi())return _0x5944b3['log'][_0x1a7b85(0x168)]('ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20'+_0x9d1ccb+_0x1a7b85(0x194)),{'approved':!![],'reason':_0x1a7b85(0x17b)};const _0x4e6bfe=new Date()['toLocaleTimeString'](),_0x10dbd0=await getWeatherContext(_0x5944b3),_0x59b6b9=PERSONA_MAPPING[_0x5944b3['config'][_0x1a7b85(0x164)]||_0x1a7b85(0x17a)],_0x15adeb='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x4e6bfe+_0x1a7b85(0x187)+_0x10dbd0+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x7883d7*0x64)[_0x1a7b85(0x1bd)](0x0)+_0x1a7b85(0x18a)+_0x9d1ccb+_0x1a7b85(0x1af)+_0x27c0be+_0x1a7b85(0x19d)+_0x59b6b9+_0x1a7b85(0x1db);try{updateApiTimestamp();const _0x40cdd0=await _0x5944b3[_0x1a7b85(0x195)][_0x1a7b85(0x160)](_0x15adeb),_0x55f932=_0x40cdd0['response'][_0x1a7b85(0x1a8)]()[_0x1a7b85(0x166)](/```json|```/g,'')[_0x1a7b85(0x190)](),_0x311d2a=JSON[_0x1a7b85(0x18b)](_0x55f932);return decisionCache[_0x9d1ccb]={'decision':_0x311d2a,'timestamp':_0x3e4fdf},_0x311d2a;}catch(_0x415cb6){return _0x5944b3[_0x1a7b85(0x1ba)]['warn'](_0x1a7b85(0x1b2)+_0x415cb6[_0x1a7b85(0x1ca)]),decisionCache[_0x9d1ccb]={'decision':{'approved':!![],'reason':_0x1a7b85(0x173)},'timestamp':_0x3e4fdf-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x1a7b85(0x173)};}}async function runGeminiAnalysis(_0x262015,_0x203597=''){const _0x2f85ca=a0_0x46b53b;if(!_0x262015['geminiModel'])return;if(!canCallApi()){_0x262015[_0x2f85ca(0x1ba)][_0x2f85ca(0x168)](_0x2f85ca(0x18d));return;}if(_0x262015[_0x2f85ca(0x1d9)][_0x2f85ca(0x1aa)]===0x0)return;const _0x3b3b1f=_0x262015[_0x2f85ca(0x1d9)][_0x2f85ca(0x175)](0x0,0xf),_0x392f12=_0x262015['currentSystemMode'],_0x4bf5a7=PERSONA_MAPPING[_0x262015[_0x2f85ca(0x1a2)]['aiPersona']||_0x2f85ca(0x17a)],_0x3d2a15=_0x262015[_0x2f85ca(0x1a2)][_0x2f85ca(0x1c8)]||_0x2f85ca(0x15a);let _0x1f86bf=_0x2f85ca(0x1ad);try{const _0x324a21=await _0x262015[_0x2f85ca(0x1a6)](_0x2f85ca(0x1a7));if(_0x324a21&&_0x324a21[_0x2f85ca(0x196)])_0x1f86bf=_0x324a21[_0x2f85ca(0x196)];}catch(_0x4dfeb2){}let _0x48ea47=![];try{const _0x62fa68=await _0x262015[_0x2f85ca(0x1a6)](_0x2f85ca(0x18e));if(_0x62fa68&&_0x62fa68[_0x2f85ca(0x196)])_0x48ea47=!![];}catch(_0x1db984){}const _0x5c7863='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x4bf5a7+_0x2f85ca(0x16e)+_0x3d2a15+_0x2f85ca(0x16d)+_0x392f12+_0x2f85ca(0x19a)+_0x1f86bf+'.\x20EVENTS:\x20'+JSON['stringify'](_0x3b3b1f)+_0x2f85ca(0x1c3)+_0x203597+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x448e19=await _0x262015[_0x2f85ca(0x195)][_0x2f85ca(0x160)](_0x5c7863),_0x4947e1=JSON[_0x2f85ca(0x18b)](_0x448e19[_0x2f85ca(0x1d4)][_0x2f85ca(0x1a8)]()[_0x2f85ca(0x166)](/```json|```/g,'')[_0x2f85ca(0x190)]());await _0x262015['setStateAsync']('analysis.lastResult',{'val':JSON[_0x2f85ca(0x19e)](_0x4947e1),'ack':!![]});if(_0x4947e1[_0x2f85ca(0x156)])await _0x262015[_0x2f85ca(0x1d5)](_0x2f85ca(0x1dd),{'val':_0x4947e1[_0x2f85ca(0x156)],'ack':!![]});const _0x10cd92={'timestamp':Date[_0x2f85ca(0x183)](),'id':Date[_0x2f85ca(0x183)]()[_0x2f85ca(0x1dc)](),'analysis':{'activity':{'summary':_0x4947e1['summary'],'isAlert':_0x4947e1[_0x2f85ca(0x193)],'alertReason':_0x4947e1[_0x2f85ca(0x15b)]},'comfort':{'automationProposal':_0x4947e1[_0x2f85ca(0x1ce)]}}};_0x262015[_0x2f85ca(0x1d1)][_0x2f85ca(0x1a3)](_0x10cd92);if(_0x262015[_0x2f85ca(0x1d1)]['length']>0x32)_0x262015[_0x2f85ca(0x1d1)][_0x2f85ca(0x178)]();await _0x262015[_0x2f85ca(0x1d5)]('analysis.analysisHistory',{'val':JSON[_0x2f85ca(0x19e)](_0x262015[_0x2f85ca(0x1d1)]),'ack':!![]});const _0x1439a8=_0x4947e1[_0x2f85ca(0x193)]||![];_0x1439a8!==_0x262015[_0x2f85ca(0x1d6)]&&(await _0x262015[_0x2f85ca(0x1d5)](_0x2f85ca(0x1bb),{'val':_0x1439a8,'ack':!![]}),_0x262015[_0x2f85ca(0x1d6)]=_0x1439a8,_0x1439a8&&(await _0x262015[_0x2f85ca(0x1d5)]('analysis.alertReason',{'val':_0x4947e1['alertReason'],'ack':!![]}),setup[_0x2f85ca(0x1c7)](_0x262015,'‚ö†Ô∏è\x20ALARM:\x20'+_0x4947e1[_0x2f85ca(0x15b)],![],_0x4947e1[_0x2f85ca(0x172)])));if(_0x4947e1[_0x2f85ca(0x1ce)]&&_0x4947e1['automationProposal']['detected']){await _0x262015['setStateAsync'](_0x2f85ca(0x179),{'val':!![],'ack':!![]}),await _0x262015[_0x2f85ca(0x1d5)](_0x2f85ca(0x181),{'val':_0x4947e1[_0x2f85ca(0x1ce)][_0x2f85ca(0x17e)],'ack':!![]}),await _0x262015[_0x2f85ca(0x1d5)](_0x2f85ca(0x197),{'val':_0x4947e1[_0x2f85ca(0x1ce)]['targetId'],'ack':!![]}),await _0x262015[_0x2f85ca(0x1d5)]('analysis.automation.targetValue',{'val':JSON[_0x2f85ca(0x19e)](_0x4947e1[_0x2f85ca(0x1ce)][_0x2f85ca(0x1c6)]),'ack':!![]});if(_0x48ea47)executeAutomationAction(_0x262015);}}catch(_0x5a6a84){_0x262015['log'][_0x2f85ca(0x16f)]('Gemini\x20Error:\x20'+_0x5a6a84['message']);}}async function createDailyDigest(_0x743e9c,_0x326e71){const _0x3b960f=a0_0x46b53b;if(!_0x743e9c[_0x3b960f(0x15f)])return;if(!canCallApi()){await _0x743e9c[_0x3b960f(0x1d5)](LTM_DP_STATUS,{'val':_0x3b960f(0x1b5),'ack':!![]});return;}await _0x743e9c['setStateAsync'](LTM_DP_STATUS,{'val':_0x3b960f(0x18c),'ack':!![]});if(!_0x743e9c[_0x3b960f(0x195)]||_0x743e9c[_0x3b960f(0x199)][_0x3b960f(0x1aa)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x743e9c[_0x3b960f(0x1d5)](LTM_DP_STATUS,{'val':_0x3b960f(0x1c5),'ack':!![]});return;}const _0x36f916=JSON['parse'](JSON[_0x3b960f(0x19e)](_0x743e9c[_0x3b960f(0x199)])),_0x2d79af=_0x36f916[_0x3b960f(0x1aa)],_0x2cba37='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x3b960f(0x19e)](_0x36f916);try{updateApiTimestamp();const _0x5b1d02=await _0x743e9c['geminiModel']['generateContent'](_0x2cba37),_0x1f1400=JSON[_0x3b960f(0x18b)](_0x5b1d02[_0x3b960f(0x1d4)][_0x3b960f(0x1a8)]()[_0x3b960f(0x166)](/```json|```/g,'')[_0x3b960f(0x190)]()),_0x5e71e6={'timestamp':new Date()['toISOString'](),'eventCount':_0x2d79af,'summary':_0x1f1400[_0x3b960f(0x156)]||_0x3b960f(0x19c),'activityLevel':_0x1f1400['activityLevel']||_0x3b960f(0x1d7),'systemMode':_0x743e9c[_0x3b960f(0x163)]};_0x743e9c[_0x3b960f(0x191)]['push'](_0x5e71e6);const _0x4e1137=_0x743e9c[_0x3b960f(0x1a2)][_0x3b960f(0x19b)]||0x3c;_0x743e9c['dailyDigests'][_0x3b960f(0x1aa)]>_0x4e1137&&_0x743e9c['dailyDigests'][_0x3b960f(0x161)](0x0,_0x743e9c[_0x3b960f(0x191)]['length']-_0x4e1137);await _0x743e9c[_0x3b960f(0x1d5)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x743e9c[_0x3b960f(0x191)]),'ack':!![]}),_0x743e9c[_0x3b960f(0x199)]=[],await _0x743e9c[_0x3b960f(0x1d5)](LTM_DP_RAW_LOG,{'val':JSON[_0x3b960f(0x19e)](_0x743e9c['rawEventLog']),'ack':!![]}),await _0x743e9c[_0x3b960f(0x1d5)](LTM_DP_STATUS,{'val':_0x3b960f(0x1cd),'ack':!![]});const _0x1d7b82=_0x3b960f(0x1b4)+_0x1f1400['summary']+_0x3b960f(0x1bc)+_0x1f1400['activityLevel'];setup[_0x3b960f(0x1c7)](_0x743e9c,_0x1d7b82,![],![]);if(_0x743e9c['isProVersion']&&_0x326e71)_0x326e71[_0x3b960f(0x1b6)](_0x743e9c,_0x3b960f(0x165),{'digest':_0x5e71e6});}catch(_0x3fa126){_0x743e9c[_0x3b960f(0x1ba)][_0x3b960f(0x16f)](_0x3fa126[_0x3b960f(0x1ca)]);}}function a0_0x4160(_0x3e1c02,_0x2685d7){const _0x19320c=a0_0x3023();return a0_0x4160=function(_0x4e78c2,_0x4b1872){_0x4e78c2=_0x4e78c2-0x156;let _0x302355=_0x19320c[_0x4e78c2];return _0x302355;},a0_0x4160(_0x3e1c02,_0x2685d7);}async function runBaselineDriftAnalysis(_0x4a533c){const _0x470b61=a0_0x46b53b;if(!_0x4a533c['isProVersion']||!_0x4a533c[_0x470b61(0x195)])return;if(!canCallApi())return;const _0x4df6be=_0x4a533c[_0x470b61(0x1a2)][_0x470b61(0x167)]||0xe;if(_0x4a533c['dailyDigests'][_0x470b61(0x1aa)]<_0x4df6be+0x7){await _0x4a533c['setStateAsync'](_0x470b61(0x1b3),{'val':_0x470b61(0x1b0),'ack':!![]});return;}const _0x1fd721=_0x4a533c[_0x470b61(0x191)][_0x470b61(0x175)](-_0x4df6be),_0x23840c=_0x4a533c[_0x470b61(0x191)][_0x470b61(0x175)](0x0,_0x4a533c[_0x470b61(0x191)][_0x470b61(0x1aa)]-_0x4df6be),_0x36abd0=_0x470b61(0x184)+JSON['stringify'](_0x23840c)+_0x470b61(0x1b9)+JSON[_0x470b61(0x19e)](_0x1fd721);try{updateApiTimestamp();const _0x4a6ccb=await _0x4a533c['geminiModel'][_0x470b61(0x160)](_0x36abd0),_0x134ed1=JSON[_0x470b61(0x18b)](_0x4a6ccb['response'][_0x470b61(0x1a8)]()[_0x470b61(0x166)](/```json|```/g,'')[_0x470b61(0x190)]());_0x134ed1[_0x470b61(0x159)]&&(await _0x4a533c[_0x470b61(0x1d5)]('LTM.driftAnalysis.baselineDrift',{'val':_0x134ed1[_0x470b61(0x159)],'ack':!![]}),await _0x4a533c[_0x470b61(0x1d5)](_0x470b61(0x170),{'val':_0x134ed1[_0x470b61(0x1a0)],'ack':!![]}),await _0x4a533c[_0x470b61(0x1d5)](_0x470b61(0x1c9),{'val':Date['now'](),'ack':!![]}));}catch(_0x47afd4){}}async function executeAutomationAction(_0x23a0d1){const _0x304c84=a0_0x46b53b;try{const _0x151fc3=await _0x23a0d1['getStateAsync'](_0x304c84(0x197)),_0x2b9029=await _0x23a0d1[_0x304c84(0x1a6)](_0x304c84(0x1a5));if(_0x151fc3&&_0x151fc3['val']&&_0x2b9029){const _0x440432=_0x151fc3[_0x304c84(0x196)];let _0x22a19a=_0x2b9029[_0x304c84(0x196)];try{_0x22a19a=JSON['parse'](_0x22a19a);}catch(_0x664ec0){}_0x23a0d1[_0x304c84(0x1ba)][_0x304c84(0x1d0)]('ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x440432+_0x304c84(0x1b1)+_0x22a19a),await _0x23a0d1['setForeignStateAsync'](_0x440432,_0x22a19a);}else _0x23a0d1[_0x304c84(0x1ba)][_0x304c84(0x157)](_0x304c84(0x18f));}catch(_0x2934a5){_0x23a0d1['log'][_0x304c84(0x16f)](_0x304c84(0x16a)+_0x2934a5[_0x304c84(0x1ca)]);}}async function sendMorningBriefing(_0x231f26){const _0x275335=a0_0x46b53b;if(!_0x231f26['geminiModel']){_0x231f26[_0x275335(0x1ba)][_0x275335(0x157)](_0x275335(0x1c2));return;}_0x231f26[_0x275335(0x1ba)][_0x275335(0x1d0)](_0x275335(0x169));try{updateApiTimestamp();const _0x49df88=_0x275335(0x1a4),_0x3f960f=await _0x231f26[_0x275335(0x195)][_0x275335(0x160)](_0x49df88),_0xc6bd45=_0x3f960f[_0x275335(0x1d4)][_0x275335(0x1a8)]();_0x231f26[_0x275335(0x1ba)][_0x275335(0x1d0)]('üåÖ\x20Briefing\x20generated\x20(Length:\x20'+_0xc6bd45['length']+_0x275335(0x1a1)),setup[_0x275335(0x1c7)](_0x231f26,'üåÖ\x20Morning\x20Briefing:\x0a'+_0xc6bd45);}catch(_0x2e4037){_0x231f26[_0x275335(0x1ba)]['error'](_0x275335(0x176)+_0x2e4037[_0x275335(0x1ca)]);}}module[a0_0x46b53b(0x17c)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};