const a0_0x411fab=a0_0x4cc8;function a0_0x4cc8(_0x10d3b1,_0x431cb6){const _0x6f8541=a0_0x2ad8();return a0_0x4cc8=function(_0x12fb9d,_0x3dcb38){_0x12fb9d=_0x12fb9d-0x15b;let _0x2ad80a=_0x6f8541[_0x12fb9d];return _0x2ad80a;},a0_0x4cc8(_0x10d3b1,_0x431cb6);}(function(_0x2fd952,_0x5cc713){const _0x287fe7=a0_0x4cc8,_0x22bb81=_0x2fd952();while(!![]){try{const _0x2bdd02=-parseInt(_0x287fe7(0x17e))/0x1*(parseInt(_0x287fe7(0x194))/0x2)+-parseInt(_0x287fe7(0x1d4))/0x3+-parseInt(_0x287fe7(0x1ae))/0x4*(parseInt(_0x287fe7(0x185))/0x5)+-parseInt(_0x287fe7(0x19b))/0x6*(-parseInt(_0x287fe7(0x1d6))/0x7)+parseInt(_0x287fe7(0x169))/0x8+-parseInt(_0x287fe7(0x1ac))/0x9*(parseInt(_0x287fe7(0x191))/0xa)+parseInt(_0x287fe7(0x1cf))/0xb;if(_0x2bdd02===_0x5cc713)break;else _0x22bb81['push'](_0x22bb81['shift']());}catch(_0x52a96e){_0x22bb81['push'](_0x22bb81['shift']());}}}(a0_0x2ad8,0x1da65));const a0_0x3dcb38=(function(){let _0x2a189b=!![];return function(_0x20842d,_0x5d681d){const _0x3adbea=_0x2a189b?function(){const _0x1af1da=a0_0x4cc8;if(_0x5d681d){const _0x527dad=_0x5d681d[_0x1af1da(0x1c2)](_0x20842d,arguments);return _0x5d681d=null,_0x527dad;}}:function(){};return _0x2a189b=![],_0x3adbea;};}()),a0_0x12fb9d=a0_0x3dcb38(this,function(){const _0x2ad946=a0_0x4cc8;return a0_0x12fb9d[_0x2ad946(0x161)]()['search'](_0x2ad946(0x15f))['toString']()['constructor'](a0_0x12fb9d)[_0x2ad946(0x1ce)]('(((.+)+)+)+$');});a0_0x12fb9d();'use strict';const {GoogleGenerativeAI}=require(a0_0x411fab(0x174)),setup=require(a0_0x411fab(0x1df)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x411fab(0x17f),LTM_DP_STATUS=a0_0x411fab(0x1ad),LTM_DP_RAW_LOG=a0_0x411fab(0x1af),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x411fab(0x1d8),'senior_aal':a0_0x411fab(0x178),'family':a0_0x411fab(0x195),'single_comfort':a0_0x411fab(0x16f),'security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x411fab(0x167)};function canCallApi(){const _0x1a34d9=a0_0x411fab,_0x12811d=Date[_0x1a34d9(0x1a5)]();return _0x12811d-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x5a4b5c){const _0x48063c=a0_0x411fab;if(!_0x5a4b5c[_0x48063c(0x1a7)][_0x48063c(0x1c6)]||!_0x5a4b5c[_0x48063c(0x1a7)][_0x48063c(0x19f)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x57c535=_0x5a4b5c[_0x48063c(0x1a7)][_0x48063c(0x19f)];let _0xa5d0c9=await _0x5a4b5c[_0x48063c(0x1a2)](_0x57c535+_0x48063c(0x183));if(!_0xa5d0c9)_0xa5d0c9=await _0x5a4b5c[_0x48063c(0x1a2)](_0x57c535+_0x48063c(0x1cc));let _0x166ee5=await _0x5a4b5c[_0x48063c(0x1a2)](_0x57c535+_0x48063c(0x1b3));if(!_0x166ee5)_0x166ee5=await _0x5a4b5c[_0x48063c(0x1a2)](_0x57c535+_0x48063c(0x1bb));let _0x449bbb=_0x48063c(0x1a4);const _0x7350a=await _0x5a4b5c[_0x48063c(0x1a2)](_0x57c535+_0x48063c(0x190));if(_0x7350a)_0x449bbb=_0x7350a[_0x48063c(0x1db)]?_0x48063c(0x1d0):'Tag';if(_0xa5d0c9&&_0x166ee5)return _0xa5d0c9[_0x48063c(0x1db)]+_0x48063c(0x196)+_0x166ee5['val']+',\x20LichtverhÃ¤ltnisse:\x20'+_0x449bbb;}catch(_0x17a427){}return _0x48063c(0x1dc);}async function consultButler(_0x331059,_0x550079,_0x52441a,_0x4fdb45){const _0x12e206=a0_0x411fab;if(!_0x331059[_0x12e206(0x1d2)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x1a2898=Date[_0x12e206(0x1a5)]();if(decisionCache[_0x550079]&&_0x1a2898-decisionCache[_0x550079][_0x12e206(0x1de)]<CACHE_TTL_MS){const _0x2602c5=decisionCache[_0x550079]['decision'];return _0x331059['log'][_0x12e206(0x1a1)](_0x12e206(0x18c)+_0x550079+'\x20->\x20'+(_0x2602c5[_0x12e206(0x15b)]?'OK':'NO')+'\x20('+_0x2602c5[_0x12e206(0x1c4)]+')'),_0x2602c5;}if(!canCallApi())return _0x331059['log'][_0x12e206(0x1a1)]('ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20'+_0x550079+_0x12e206(0x189)),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0xbe25c9=new Date()[_0x12e206(0x15e)](),_0x24a347=await getWeatherContext(_0x331059),_0x7d3df=PERSONA_MAPPING[_0x331059[_0x12e206(0x1a7)][_0x12e206(0x162)]||_0x12e206(0x198)],_0x225eb2='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0xbe25c9+_0x12e206(0x18d)+_0x24a347+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x4fdb45*0x64)[_0x12e206(0x171)](0x0)+'%)\x20nach\x20\x22'+_0x550079+_0x12e206(0x1c0)+_0x52441a+_0x12e206(0x188)+_0x7d3df+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x4a7fa8=await _0x331059[_0x12e206(0x1d2)][_0x12e206(0x160)](_0x225eb2),_0x3fa83f=_0x4a7fa8[_0x12e206(0x19d)][_0x12e206(0x15d)]()['replace'](/```json|```/g,'')[_0x12e206(0x186)](),_0x3cb12d=JSON['parse'](_0x3fa83f);return decisionCache[_0x550079]={'decision':_0x3cb12d,'timestamp':_0x1a2898},_0x3cb12d;}catch(_0x8b7f24){return _0x331059[_0x12e206(0x192)][_0x12e206(0x1b1)]('ðŸ¤–\x20Butler\x20Brain\x20Error:\x20'+_0x8b7f24['message']),decisionCache[_0x550079]={'decision':{'approved':!![],'reason':_0x12e206(0x1c3)},'timestamp':_0x1a2898-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x46cec6,_0x26d298=''){const _0x16649f=a0_0x411fab;if(!_0x46cec6['geminiModel'])return;if(!canCallApi()){_0x46cec6[_0x16649f(0x192)][_0x16649f(0x1a1)](_0x16649f(0x1aa));return;}if(_0x46cec6[_0x16649f(0x176)]['length']===0x0)return;const _0x36dacc=_0x46cec6[_0x16649f(0x176)][_0x16649f(0x1c1)](0x0,0xf),_0x2fcae3=_0x46cec6[_0x16649f(0x18e)],_0x3c756d=PERSONA_MAPPING[_0x46cec6[_0x16649f(0x1a7)][_0x16649f(0x162)]||'generic'],_0x3df636=_0x46cec6['config'][_0x16649f(0x1dd)]||_0x16649f(0x1bd);let _0xd4a16c=_0x16649f(0x1a4);try{const _0x5755cb=await _0x46cec6[_0x16649f(0x1b9)](_0x16649f(0x1b7));if(_0x5755cb&&_0x5755cb[_0x16649f(0x1db)])_0xd4a16c=_0x5755cb[_0x16649f(0x1db)];}catch(_0x1f9b6e){}let _0x321050=![];try{const _0x3480b7=await _0x46cec6[_0x16649f(0x1b9)](_0x16649f(0x1c5));if(_0x3480b7&&_0x3480b7['val'])_0x321050=!![];}catch(_0x46f45f){}const _0x4bb2e3=_0x16649f(0x16b)+_0x3c756d+_0x16649f(0x1d9)+_0x3df636+_0x16649f(0x1ba)+_0x2fcae3+'.\x20ANWESEND:\x20'+_0xd4a16c+_0x16649f(0x181)+JSON['stringify'](_0x36dacc)+_0x16649f(0x1b6)+_0x26d298+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x3a6b15=await _0x46cec6[_0x16649f(0x1d2)][_0x16649f(0x160)](_0x4bb2e3),_0x42bae1=JSON[_0x16649f(0x1a6)](_0x3a6b15[_0x16649f(0x19d)][_0x16649f(0x15d)]()[_0x16649f(0x1c7)](/```json|```/g,'')[_0x16649f(0x186)]());await _0x46cec6[_0x16649f(0x1bc)]('analysis.lastResult',{'val':JSON[_0x16649f(0x17a)](_0x42bae1),'ack':!![]});if(_0x42bae1['summary'])await _0x46cec6[_0x16649f(0x1bc)](_0x16649f(0x170),{'val':_0x42bae1[_0x16649f(0x1cb)],'ack':!![]});const _0x5629d0={'timestamp':Date[_0x16649f(0x1a5)](),'id':Date[_0x16649f(0x1a5)]()['toString'](),'analysis':{'activity':{'summary':_0x42bae1[_0x16649f(0x1cb)],'isAlert':_0x42bae1[_0x16649f(0x175)],'alertReason':_0x42bae1[_0x16649f(0x16d)]},'comfort':{'automationProposal':_0x42bae1['automationProposal']}}};_0x46cec6[_0x16649f(0x1d7)][_0x16649f(0x182)](_0x5629d0);if(_0x46cec6[_0x16649f(0x1d7)]['length']>0x32)_0x46cec6[_0x16649f(0x1d7)][_0x16649f(0x18f)]();await _0x46cec6[_0x16649f(0x1bc)]('analysis.analysisHistory',{'val':JSON[_0x16649f(0x17a)](_0x46cec6[_0x16649f(0x1d7)]),'ack':!![]});const _0x1c9296=_0x42bae1['isAlert']||![];_0x1c9296!==_0x46cec6['lastAlertState']&&(await _0x46cec6[_0x16649f(0x1bc)](_0x16649f(0x19c),{'val':_0x1c9296,'ack':!![]}),_0x46cec6['lastAlertState']=_0x1c9296,_0x1c9296&&(await _0x46cec6[_0x16649f(0x1bc)](_0x16649f(0x1b4),{'val':_0x42bae1[_0x16649f(0x16d)],'ack':!![]}),setup[_0x16649f(0x1a3)](_0x46cec6,_0x16649f(0x1bf)+_0x42bae1[_0x16649f(0x16d)],![],_0x42bae1[_0x16649f(0x163)])));if(_0x42bae1[_0x16649f(0x164)]&&_0x42bae1[_0x16649f(0x164)]['detected']){await _0x46cec6[_0x16649f(0x1bc)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x46cec6[_0x16649f(0x1bc)]('analysis.automation.description',{'val':_0x42bae1[_0x16649f(0x164)][_0x16649f(0x18a)],'ack':!![]}),await _0x46cec6[_0x16649f(0x1bc)](_0x16649f(0x168),{'val':_0x42bae1['automationProposal'][_0x16649f(0x1d3)],'ack':!![]}),await _0x46cec6['setStateAsync'](_0x16649f(0x179),{'val':JSON[_0x16649f(0x17a)](_0x42bae1[_0x16649f(0x164)][_0x16649f(0x166)]),'ack':!![]});if(_0x321050)executeAutomationAction(_0x46cec6);}}catch(_0x2d9c78){_0x46cec6[_0x16649f(0x192)][_0x16649f(0x16c)](_0x16649f(0x17c)+_0x2d9c78[_0x16649f(0x19a)]);}}function a0_0x2ad8(){const _0x511a66=['63eHuhUi','LTM.processingStatus','101624iHoZdW','LTM.rawEventLog','ðŸ“…\x20Daily\x20Digest:\x0a','warn','ANALYZE_HEALTH','.Current.WeatherText','analysis.alertReason','\x20=\x20','.\x20EMERGENCY:\x20','system.presenceWho','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','getStateAsync','.\x20SYSTEM_MODE:\x20','.forecast.current.state','setStateAsync','Keine\x20Details.','Digest','âš ï¸\x20ALARM:\x20','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','slice','apply','KI-Fehler\x20(Fallback)','reason','analysis.automation.autoApply','useWeather','replace','BUTLER\x20Execution\x20Error:\x20','Skipped\x20(Traffic)','rawEventLog','summary','.forecast.current.temperature','ltmStbWindowDays','search','3521320RfWiTe','Nacht','splice','geminiModel','targetId','497445QUumKc','LTM.driftAnalysis.lastCheck','1312871KjMcGf','analysisHistory','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','.\x20KONTEXT:\x20','ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20','val','Wetterdaten\x20nicht\x20abrufbar','livingContext','timestamp','./setup','approved','baselineDrift','text','toLocaleTimeString','(((.+)+)+)+$','generateContent','toString','aiPersona','isEmergency','automationProposal','activityLevel','targetValue','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','analysis.automation.targetId','1479576zKPqfw','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','error','alertReason','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','analysis.activitySummary','toFixed','N/A\x20(Learning)','setForeignStateAsync','@google/generative-ai','isAlert','eventHistory','toISOString','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','analysis.automation.targetValue','stringify','exports','Gemini\x20Error:\x20','Briefing\x20Error:\x20','25tizcrS','LTM.dailyDigests','isProVersion','.\x20EVENTS:\x20','unshift','.Current.Temperature','LTM.driftAnalysis.baselineDrift','15aqNJyr','trim','normal','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','\x20Ã¼bersprungen\x20(Auto-Approved).','description','ltmLtbWindowDays','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20',',\x20Wetter:\x20','currentSystemMode','pop','.Current.IsNight','213810mpMVcL','log','\x0aSTB:\x20','14358oTtlew','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','Â°C,\x20','length','generic','\x0aAktivitÃ¤t:\x20','message','6PhYqtI','analysis.isAlert','response',').\x20Sending\x20notification...','weatherInstance','push','debug','getForeignStateAsync','sendNotification','Unbekannt','now','parse','config','dailyDigests','info','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...'];a0_0x2ad8=function(){return _0x511a66;};return a0_0x2ad8();}async function createDailyDigest(_0x2798d9,_0x585292){const _0x5da373=a0_0x411fab;if(!_0x2798d9['isProVersion'])return;if(!canCallApi()){await _0x2798d9[_0x5da373(0x1bc)](LTM_DP_STATUS,{'val':_0x5da373(0x1c9),'ack':!![]});return;}await _0x2798d9[_0x5da373(0x1bc)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x2798d9['geminiModel']||_0x2798d9[_0x5da373(0x1ca)][_0x5da373(0x197)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x2798d9[_0x5da373(0x1bc)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x221335=JSON[_0x5da373(0x1a6)](JSON[_0x5da373(0x17a)](_0x2798d9[_0x5da373(0x1ca)])),_0x4326e3=_0x221335[_0x5da373(0x197)],_0x5b9145=_0x5da373(0x16a)+JSON[_0x5da373(0x17a)](_0x221335);try{updateApiTimestamp();const _0x205c06=await _0x2798d9['geminiModel'][_0x5da373(0x160)](_0x5b9145),_0x3a67e0=JSON[_0x5da373(0x1a6)](_0x205c06[_0x5da373(0x19d)][_0x5da373(0x15d)]()['replace'](/```json|```/g,'')[_0x5da373(0x186)]()),_0x1f2d46={'timestamp':new Date()[_0x5da373(0x177)](),'eventCount':_0x4326e3,'summary':_0x3a67e0[_0x5da373(0x1cb)]||_0x5da373(0x1be),'activityLevel':_0x3a67e0[_0x5da373(0x165)]||_0x5da373(0x187),'systemMode':_0x2798d9[_0x5da373(0x18e)]};_0x2798d9[_0x5da373(0x1a8)][_0x5da373(0x1a0)](_0x1f2d46);const _0x33fec3=_0x2798d9[_0x5da373(0x1a7)][_0x5da373(0x18b)]||0x3c;_0x2798d9['dailyDigests'][_0x5da373(0x197)]>_0x33fec3&&_0x2798d9[_0x5da373(0x1a8)][_0x5da373(0x1d1)](0x0,_0x2798d9[_0x5da373(0x1a8)][_0x5da373(0x197)]-_0x33fec3);await _0x2798d9['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x5da373(0x17a)](_0x2798d9[_0x5da373(0x1a8)]),'ack':!![]}),_0x2798d9[_0x5da373(0x1ca)]=[],await _0x2798d9[_0x5da373(0x1bc)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x2798d9[_0x5da373(0x1ca)]),'ack':!![]}),await _0x2798d9[_0x5da373(0x1bc)](LTM_DP_STATUS,{'val':'Success','ack':!![]});const _0x32e339=_0x5da373(0x1b0)+_0x3a67e0[_0x5da373(0x1cb)]+_0x5da373(0x199)+_0x3a67e0['activityLevel'];setup[_0x5da373(0x1a3)](_0x2798d9,_0x32e339,![],![]);if(_0x2798d9['isProVersion']&&_0x585292)_0x585292['send'](_0x2798d9,_0x5da373(0x1b2),{'digest':_0x1f2d46});}catch(_0x9fda61){_0x2798d9['log'][_0x5da373(0x16c)](_0x9fda61[_0x5da373(0x19a)]);}}async function runBaselineDriftAnalysis(_0x38ecfd){const _0x33799f=a0_0x411fab;if(!_0x38ecfd[_0x33799f(0x180)]||!_0x38ecfd[_0x33799f(0x1d2)])return;if(!canCallApi())return;const _0x263b07=_0x38ecfd[_0x33799f(0x1a7)][_0x33799f(0x1cd)]||0xe;if(_0x38ecfd[_0x33799f(0x1a8)][_0x33799f(0x197)]<_0x263b07+0x7){await _0x38ecfd['setStateAsync'](_0x33799f(0x184),{'val':_0x33799f(0x172),'ack':!![]});return;}const _0x489609=_0x38ecfd['dailyDigests']['slice'](-_0x263b07),_0x37d4f1=_0x38ecfd[_0x33799f(0x1a8)][_0x33799f(0x1c1)](0x0,_0x38ecfd['dailyDigests'][_0x33799f(0x197)]-_0x263b07),_0x1b4c4d=_0x33799f(0x1b8)+JSON[_0x33799f(0x17a)](_0x37d4f1)+_0x33799f(0x193)+JSON[_0x33799f(0x17a)](_0x489609);try{updateApiTimestamp();const _0x2780d8=await _0x38ecfd[_0x33799f(0x1d2)][_0x33799f(0x160)](_0x1b4c4d),_0x2c1e55=JSON[_0x33799f(0x1a6)](_0x2780d8[_0x33799f(0x19d)][_0x33799f(0x15d)]()[_0x33799f(0x1c7)](/```json|```/g,'')[_0x33799f(0x186)]());_0x2c1e55['baselineDrift']&&(await _0x38ecfd[_0x33799f(0x1bc)](_0x33799f(0x184),{'val':_0x2c1e55[_0x33799f(0x15c)],'ack':!![]}),await _0x38ecfd[_0x33799f(0x1bc)]('LTM.driftAnalysis.driftDetails',{'val':_0x2c1e55['driftDetails'],'ack':!![]}),await _0x38ecfd['setStateAsync'](_0x33799f(0x1d5),{'val':Date[_0x33799f(0x1a5)](),'ack':!![]}));}catch(_0x30c354){}}async function executeAutomationAction(_0x48f2c4){const _0x50f655=a0_0x411fab;try{const _0x4fac8b=await _0x48f2c4['getStateAsync']('analysis.automation.targetId'),_0x2c9a7b=await _0x48f2c4['getStateAsync'](_0x50f655(0x179));if(_0x4fac8b&&_0x4fac8b[_0x50f655(0x1db)]&&_0x2c9a7b){const _0x3e3717=_0x4fac8b['val'];let _0xb66a8f=_0x2c9a7b[_0x50f655(0x1db)];try{_0xb66a8f=JSON[_0x50f655(0x1a6)](_0xb66a8f);}catch(_0x3833bd){}_0x48f2c4[_0x50f655(0x192)]['info'](_0x50f655(0x16e)+_0x3e3717+_0x50f655(0x1b5)+_0xb66a8f),await _0x48f2c4[_0x50f655(0x173)](_0x3e3717,_0xb66a8f);}else _0x48f2c4[_0x50f655(0x192)]['warn']('ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x20d603){_0x48f2c4[_0x50f655(0x192)]['error'](_0x50f655(0x1c8)+_0x20d603[_0x50f655(0x19a)]);}}async function sendMorningBriefing(_0x3a623c){const _0x33ae60=a0_0x411fab;if(!_0x3a623c['geminiModel']){_0x3a623c[_0x33ae60(0x192)][_0x33ae60(0x1b1)]('ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.');return;}_0x3a623c[_0x33ae60(0x192)]['info'](_0x33ae60(0x1ab));try{updateApiTimestamp();const _0x374e32='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0xbed4e3=await _0x3a623c[_0x33ae60(0x1d2)]['generateContent'](_0x374e32),_0x2ce4f0=_0xbed4e3[_0x33ae60(0x19d)][_0x33ae60(0x15d)]();_0x3a623c[_0x33ae60(0x192)][_0x33ae60(0x1a9)](_0x33ae60(0x1da)+_0x2ce4f0['length']+_0x33ae60(0x19e)),setup[_0x33ae60(0x1a3)](_0x3a623c,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x2ce4f0);}catch(_0x439404){_0x3a623c['log'][_0x33ae60(0x16c)](_0x33ae60(0x17d)+_0x439404['message']);}}module[a0_0x411fab(0x17b)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};