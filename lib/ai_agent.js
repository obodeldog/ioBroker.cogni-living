function a0_0xb8b0(_0x3f30a0,_0xdef877){const _0x4f1baa=a0_0x4f6b();return a0_0xb8b0=function(_0x3ac852,_0x46ca73){_0x3ac852=_0x3ac852-0x7f;let _0x4f6b4a=_0x4f1baa[_0x3ac852];return _0x4f6b4a;},a0_0xb8b0(_0x3f30a0,_0xdef877);}const a0_0x2a78bf=a0_0xb8b0;(function(_0xaf6200,_0x32a381){const _0x2fcb71=a0_0xb8b0,_0x1dc6ee=_0xaf6200();while(!![]){try{const _0x3de6df=parseInt(_0x2fcb71(0xfa))/0x1+parseInt(_0x2fcb71(0xe7))/0x2*(-parseInt(_0x2fcb71(0xf8))/0x3)+parseInt(_0x2fcb71(0x96))/0x4+-parseInt(_0x2fcb71(0x9d))/0x5+-parseInt(_0x2fcb71(0xe2))/0x6*(parseInt(_0x2fcb71(0xe9))/0x7)+parseInt(_0x2fcb71(0xdb))/0x8+parseInt(_0x2fcb71(0x8e))/0x9;if(_0x3de6df===_0x32a381)break;else _0x1dc6ee['push'](_0x1dc6ee['shift']());}catch(_0x1062dd){_0x1dc6ee['push'](_0x1dc6ee['shift']());}}}(a0_0x4f6b,0xeee26));const a0_0x46ca73=(function(){let _0x3f0a43=!![];return function(_0x540bd8,_0x5e6ab6){const _0x15a423=_0x3f0a43?function(){if(_0x5e6ab6){const _0x8f00dc=_0x5e6ab6['apply'](_0x540bd8,arguments);return _0x5e6ab6=null,_0x8f00dc;}}:function(){};return _0x3f0a43=![],_0x15a423;};}()),a0_0x3ac852=a0_0x46ca73(this,function(){const _0x212f1a=a0_0xb8b0;return a0_0x3ac852[_0x212f1a(0xaa)]()['search'](_0x212f1a(0xa2))[_0x212f1a(0xaa)]()['constructor'](a0_0x3ac852)[_0x212f1a(0x82)](_0x212f1a(0xa2));});a0_0x3ac852();'use strict';const {GoogleGenerativeAI}=require(a0_0x2a78bf(0xd6)),setup=require(a0_0x2a78bf(0x92)),GEMINI_MODEL=a0_0x2a78bf(0xc2),LTM_DP_DAILY_DIGESTS=a0_0x2a78bf(0xde),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG=a0_0x2a78bf(0x97),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x2a78bf(0x91),'senior_aal':a0_0x2a78bf(0xeb),'family':a0_0x2a78bf(0x98),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':a0_0x2a78bf(0x88),'energy_saver':a0_0x2a78bf(0xc5)};function canCallApi(){const _0x1e475f=a0_0x2a78bf,_0x4eaae1=Date[_0x1e475f(0xbd)]();return _0x4eaae1-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x222562=a0_0x2a78bf;lastGlobalApiCall=Date[_0x222562(0xbd)]();}async function getWeatherContext(_0x28074a){const _0xcb37be=a0_0x2a78bf;if(!_0x28074a[_0xcb37be(0xec)][_0xcb37be(0xd5)]||!_0x28074a[_0xcb37be(0xec)][_0xcb37be(0xb3)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x22966f=_0x28074a[_0xcb37be(0xec)][_0xcb37be(0xb3)];let _0x45335e=await _0x28074a[_0xcb37be(0xe4)](_0x22966f+_0xcb37be(0xb1));if(!_0x45335e)_0x45335e=await _0x28074a[_0xcb37be(0xe4)](_0x22966f+_0xcb37be(0xb8));let _0x41d20e=await _0x28074a[_0xcb37be(0xe4)](_0x22966f+_0xcb37be(0xf6));if(!_0x41d20e)_0x41d20e=await _0x28074a[_0xcb37be(0xe4)](_0x22966f+_0xcb37be(0xfd));let _0x19d318='Unbekannt';const _0x25d50c=await _0x28074a[_0xcb37be(0xe4)](_0x22966f+_0xcb37be(0xd7));if(_0x25d50c)_0x19d318=_0x25d50c[_0xcb37be(0xf5)]?'Nacht':_0xcb37be(0xcf);if(_0x45335e&&_0x41d20e)return _0x45335e['val']+_0xcb37be(0xd1)+_0x41d20e[_0xcb37be(0xf5)]+_0xcb37be(0xa0)+_0x19d318;}catch(_0x37aea1){}return _0xcb37be(0xa6);}async function consultButler(_0x38aa91,_0x36bd05,_0x19b0aa,_0x237454){const _0x454e0b=a0_0x2a78bf;if(!_0x38aa91[_0x454e0b(0xc3)])return{'approved':!![],'reason':_0x454e0b(0xa1)};const _0x43b80d=Date[_0x454e0b(0xbd)]();if(decisionCache[_0x36bd05]&&_0x43b80d-decisionCache[_0x36bd05]['timestamp']<CACHE_TTL_MS){const _0x2e64fc=decisionCache[_0x36bd05][_0x454e0b(0x9b)];return _0x38aa91[_0x454e0b(0xdd)][_0x454e0b(0x8f)](_0x454e0b(0xed)+_0x36bd05+_0x454e0b(0xf7)+(_0x2e64fc[_0x454e0b(0x86)]?'OK':'NO')+'\x20('+_0x2e64fc['reason']+')'),_0x2e64fc;}if(!canCallApi())return _0x38aa91[_0x454e0b(0xdd)][_0x454e0b(0x8f)]('ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20'+_0x36bd05+_0x454e0b(0xd3)),{'approved':!![],'reason':_0x454e0b(0xd2)};const _0x278dd5=new Date()['toLocaleTimeString'](),_0xe83124=await getWeatherContext(_0x38aa91),_0x50ab97=PERSONA_MAPPING[_0x38aa91['config'][_0x454e0b(0xcd)]||_0x454e0b(0x81)],_0x244c3f=_0x454e0b(0xc4)+_0x278dd5+_0x454e0b(0xcb)+_0xe83124+_0x454e0b(0xa4)+(_0x237454*0x64)[_0x454e0b(0xc6)](0x0)+_0x454e0b(0xfb)+_0x36bd05+_0x454e0b(0x85)+_0x19b0aa+_0x454e0b(0x8c)+_0x50ab97+_0x454e0b(0xad);try{updateApiTimestamp();const _0x342888=await _0x38aa91['geminiModel'][_0x454e0b(0xa8)](_0x244c3f),_0x3dd7c0=_0x342888[_0x454e0b(0x99)][_0x454e0b(0xb2)]()['replace'](/```json|```/g,'')[_0x454e0b(0xe5)](),_0x16def5=JSON[_0x454e0b(0xa5)](_0x3dd7c0);return decisionCache[_0x36bd05]={'decision':_0x16def5,'timestamp':_0x43b80d},_0x16def5;}catch(_0x46d921){return _0x38aa91[_0x454e0b(0xdd)][_0x454e0b(0xa9)](_0x454e0b(0xb5)+_0x46d921[_0x454e0b(0xf1)]),decisionCache[_0x36bd05]={'decision':{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'},'timestamp':_0x43b80d-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0xd90559,_0x1bbdcb=''){const _0x22b8cd=a0_0x2a78bf;if(!_0xd90559[_0x22b8cd(0xc3)])return;if(!canCallApi()){_0xd90559[_0x22b8cd(0xdd)][_0x22b8cd(0x8f)](_0x22b8cd(0xe0));return;}if(_0xd90559[_0x22b8cd(0x8b)][_0x22b8cd(0x89)]===0x0)return;const _0x2c02f9=_0xd90559[_0x22b8cd(0x8b)]['slice'](0x0,0xf),_0x3a8a8b=_0xd90559[_0x22b8cd(0xf3)],_0x5c2990=PERSONA_MAPPING[_0xd90559[_0x22b8cd(0xec)][_0x22b8cd(0xcd)]||_0x22b8cd(0x81)],_0x15c580=_0xd90559[_0x22b8cd(0xec)]['livingContext']||_0x22b8cd(0xc0);let _0x3916a7=_0x22b8cd(0xc1);try{const _0x2c5822=await _0xd90559[_0x22b8cd(0x8a)](_0x22b8cd(0xea));if(_0x2c5822&&_0x2c5822['val'])_0x3916a7=_0x2c5822[_0x22b8cd(0xf5)];}catch(_0x2a65ee){}let _0x9fd1e9=![];try{const _0x14b4fe=await _0xd90559[_0x22b8cd(0x8a)](_0x22b8cd(0xd4));if(_0x14b4fe&&_0x14b4fe[_0x22b8cd(0xf5)])_0x9fd1e9=!![];}catch(_0x34953f){}const _0x30bc4a='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x5c2990+_0x22b8cd(0x9f)+_0x15c580+'.\x20SYSTEM_MODE:\x20'+_0x3a8a8b+'.\x20ANWESEND:\x20'+_0x3916a7+_0x22b8cd(0xdf)+JSON[_0x22b8cd(0x9c)](_0x2c02f9)+'.\x20EMERGENCY:\x20'+_0x1bbdcb+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x56106c=await _0xd90559['geminiModel'][_0x22b8cd(0xa8)](_0x30bc4a),_0x44dac7=JSON[_0x22b8cd(0xa5)](_0x56106c[_0x22b8cd(0x99)][_0x22b8cd(0xb2)]()[_0x22b8cd(0xa7)](/```json|```/g,'')[_0x22b8cd(0xe5)]());await _0xd90559[_0x22b8cd(0x95)](_0x22b8cd(0x83),{'val':JSON[_0x22b8cd(0x9c)](_0x44dac7),'ack':!![]});if(_0x44dac7[_0x22b8cd(0x90)])await _0xd90559[_0x22b8cd(0x95)](_0x22b8cd(0xab),{'val':_0x44dac7[_0x22b8cd(0x90)],'ack':!![]});const _0x4b6093={'timestamp':Date['now'](),'id':Date['now']()[_0x22b8cd(0xaa)](),'analysis':{'activity':{'summary':_0x44dac7[_0x22b8cd(0x90)],'isAlert':_0x44dac7[_0x22b8cd(0xe3)],'alertReason':_0x44dac7['alertReason']},'comfort':{'automationProposal':_0x44dac7[_0x22b8cd(0xe8)]}}};_0xd90559[_0x22b8cd(0xfc)][_0x22b8cd(0xaf)](_0x4b6093);if(_0xd90559[_0x22b8cd(0xfc)][_0x22b8cd(0x89)]>0x32)_0xd90559[_0x22b8cd(0xfc)][_0x22b8cd(0xf0)]();await _0xd90559[_0x22b8cd(0x95)]('analysis.analysisHistory',{'val':JSON[_0x22b8cd(0x9c)](_0xd90559['analysisHistory']),'ack':!![]});const _0x1f71d4=_0x44dac7['isAlert']||![];_0x1f71d4!==_0xd90559[_0x22b8cd(0x84)]&&(await _0xd90559[_0x22b8cd(0x95)](_0x22b8cd(0x94),{'val':_0x1f71d4,'ack':!![]}),_0xd90559[_0x22b8cd(0x84)]=_0x1f71d4,_0x1f71d4&&(await _0xd90559[_0x22b8cd(0x95)]('analysis.alertReason',{'val':_0x44dac7[_0x22b8cd(0xac)],'ack':!![]}),setup[_0x22b8cd(0xd8)](_0xd90559,'‚ö†Ô∏è\x20ALARM:\x20'+_0x44dac7[_0x22b8cd(0xac)],![],_0x44dac7['isEmergency'])));if(_0x44dac7[_0x22b8cd(0xe8)]&&_0x44dac7['automationProposal'][_0x22b8cd(0xb0)]){await _0xd90559[_0x22b8cd(0x95)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0xd90559['setStateAsync'](_0x22b8cd(0xc9),{'val':_0x44dac7[_0x22b8cd(0xe8)][_0x22b8cd(0xe1)],'ack':!![]}),await _0xd90559['setStateAsync']('analysis.automation.targetId',{'val':_0x44dac7[_0x22b8cd(0xe8)][_0x22b8cd(0xd9)],'ack':!![]}),await _0xd90559[_0x22b8cd(0x95)](_0x22b8cd(0xd0),{'val':JSON[_0x22b8cd(0x9c)](_0x44dac7['automationProposal'][_0x22b8cd(0xee)]),'ack':!![]});if(_0x9fd1e9)executeAutomationAction(_0xd90559);}}catch(_0x42667f){_0xd90559[_0x22b8cd(0xdd)][_0x22b8cd(0xe6)]('Gemini\x20Error:\x20'+_0x42667f[_0x22b8cd(0xf1)]);}}async function createDailyDigest(_0xb9eac1,_0x1b76b6){const _0x1324fc=a0_0x2a78bf;if(!_0xb9eac1[_0x1324fc(0xfe)])return;if(!canCallApi()){await _0xb9eac1[_0x1324fc(0x95)](LTM_DP_STATUS,{'val':_0x1324fc(0xae),'ack':!![]});return;}await _0xb9eac1[_0x1324fc(0x95)](LTM_DP_STATUS,{'val':_0x1324fc(0xbb),'ack':!![]});if(!_0xb9eac1[_0x1324fc(0xc3)]||_0xb9eac1[_0x1324fc(0xb9)][_0x1324fc(0x89)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0xb9eac1[_0x1324fc(0x95)](LTM_DP_STATUS,{'val':_0x1324fc(0xf4),'ack':!![]});return;}const _0x1db4ed=JSON[_0x1324fc(0xa5)](JSON[_0x1324fc(0x9c)](_0xb9eac1[_0x1324fc(0xb9)])),_0x566558=_0x1db4ed[_0x1324fc(0x89)],_0x47a886=_0x1324fc(0xc8)+JSON[_0x1324fc(0x9c)](_0x1db4ed);try{updateApiTimestamp();const _0x4b3223=await _0xb9eac1['geminiModel'][_0x1324fc(0xa8)](_0x47a886),_0x3734ae=JSON[_0x1324fc(0xa5)](_0x4b3223[_0x1324fc(0x99)][_0x1324fc(0xb2)]()[_0x1324fc(0xa7)](/```json|```/g,'')[_0x1324fc(0xe5)]()),_0xbc21b6={'timestamp':new Date()['toISOString'](),'eventCount':_0x566558,'summary':_0x3734ae[_0x1324fc(0x90)]||_0x1324fc(0xbc),'activityLevel':_0x3734ae['activityLevel']||'normal','systemMode':_0xb9eac1['currentSystemMode']};_0xb9eac1[_0x1324fc(0xca)][_0x1324fc(0xce)](_0xbc21b6);const _0x372937=_0xb9eac1[_0x1324fc(0xec)][_0x1324fc(0x7f)]||0x3c;_0xb9eac1[_0x1324fc(0xca)][_0x1324fc(0x89)]>_0x372937&&_0xb9eac1['dailyDigests'][_0x1324fc(0x9a)](0x0,_0xb9eac1[_0x1324fc(0xca)][_0x1324fc(0x89)]-_0x372937);await _0xb9eac1['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x1324fc(0x9c)](_0xb9eac1[_0x1324fc(0xca)]),'ack':!![]}),_0xb9eac1[_0x1324fc(0xb9)]=[],await _0xb9eac1[_0x1324fc(0x95)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0xb9eac1[_0x1324fc(0xb9)]),'ack':!![]}),await _0xb9eac1[_0x1324fc(0x95)](LTM_DP_STATUS,{'val':_0x1324fc(0xda),'ack':!![]});const _0x17d5bb=_0x1324fc(0xbe)+_0x3734ae[_0x1324fc(0x90)]+_0x1324fc(0x87)+_0x3734ae[_0x1324fc(0xb4)];setup[_0x1324fc(0xd8)](_0xb9eac1,_0x17d5bb,![],![]);if(_0xb9eac1['isProVersion']&&_0x1b76b6)_0x1b76b6[_0x1324fc(0xdc)](_0xb9eac1,_0x1324fc(0x80),{'digest':_0xbc21b6});}catch(_0x69de85){_0xb9eac1[_0x1324fc(0xdd)][_0x1324fc(0xe6)](_0x69de85[_0x1324fc(0xf1)]);}}async function runBaselineDriftAnalysis(_0x16538b){const _0x78bab8=a0_0x2a78bf;if(!_0x16538b[_0x78bab8(0xfe)]||!_0x16538b['geminiModel'])return;if(!canCallApi())return;const _0x4ef2f5=_0x16538b['config']['ltmStbWindowDays']||0xe;if(_0x16538b[_0x78bab8(0xca)][_0x78bab8(0x89)]<_0x4ef2f5+0x7){await _0x16538b['setStateAsync']('LTM.driftAnalysis.baselineDrift',{'val':_0x78bab8(0xc7),'ack':!![]});return;}const _0x533f2d=_0x16538b[_0x78bab8(0xca)]['slice'](-_0x4ef2f5),_0x51e2cc=_0x16538b[_0x78bab8(0xca)]['slice'](0x0,_0x16538b['dailyDigests'][_0x78bab8(0x89)]-_0x4ef2f5),_0x2cb02e=_0x78bab8(0x93)+JSON[_0x78bab8(0x9c)](_0x51e2cc)+_0x78bab8(0xba)+JSON['stringify'](_0x533f2d);try{updateApiTimestamp();const _0x1b155c=await _0x16538b['geminiModel'][_0x78bab8(0xa8)](_0x2cb02e),_0x1080d8=JSON[_0x78bab8(0xa5)](_0x1b155c['response'][_0x78bab8(0xb2)]()[_0x78bab8(0xa7)](/```json|```/g,'')['trim']());_0x1080d8['baselineDrift']&&(await _0x16538b[_0x78bab8(0x95)]('LTM.driftAnalysis.baselineDrift',{'val':_0x1080d8[_0x78bab8(0xbf)],'ack':!![]}),await _0x16538b['setStateAsync'](_0x78bab8(0xf9),{'val':_0x1080d8[_0x78bab8(0xb6)],'ack':!![]}),await _0x16538b['setStateAsync']('LTM.driftAnalysis.lastCheck',{'val':Date[_0x78bab8(0xbd)](),'ack':!![]}));}catch(_0x26272b){}}function a0_0x4f6b(){const _0x164bb2=['Briefing\x20Error:\x20','pop','message','\x20=\x20','currentSystemMode','Skipped\x20(No\x20AI\x20or\x20Data)','val','.Current.WeatherText','\x20->\x20','64161hPURZj','LTM.driftAnalysis.driftDetails','1219111KLwwra','%)\x20nach\x20\x22','analysisHistory','.forecast.current.state','isProVersion','ltmLtbWindowDays','ANALYZE_HEALTH','generic','search','analysis.lastResult','lastAlertState','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','approved','\x0aAktivit√§t:\x20','Sicherheit\x20geht\x20vor.','length','getStateAsync','eventHistory','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','exports','1945404ZUxLpl','debug','summary','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','./setup','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','analysis.isAlert','setStateAsync','6213592prVTmX','LTM.rawEventLog','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','response','splice','decision','stringify','159695ZlGMrf','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','.\x20KONTEXT:\x20',',\x20Lichtverh√§ltnisse:\x20','KI\x20offline\x20(Fallback)','(((.+)+)+)+$','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','parse','Wetterdaten\x20nicht\x20abrufbar','replace','generateContent','warn','toString','analysis.activitySummary','alertReason','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','Skipped\x20(Traffic)','unshift','detected','.Current.Temperature','text','weatherInstance','activityLevel','ü§ñ\x20Butler\x20Brain\x20Error:\x20','driftDetails','üåÖ\x20Morning\x20Briefing:\x0a','.forecast.current.temperature','rawEventLog','\x0aSTB:\x20','Started...','Digest','now','üìÖ\x20Daily\x20Digest:\x0a','baselineDrift','Keine\x20Details.','Unbekannt','models/gemini-flash-latest','geminiModel','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','toFixed','N/A\x20(Learning)','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','analysis.automation.description','dailyDigests',',\x20Wetter:\x20','BUTLER\x20Execution\x20Error:\x20','aiPersona','push','Tag','analysis.automation.targetValue','¬∞C,\x20','Traffic-Schutz\x20(Auto-Approved)','\x20√ºbersprungen\x20(Auto-Approved).','analysis.automation.autoApply','useWeather','@google/generative-ai','.Current.IsNight','sendNotification','targetId','Success','1647880RsAQvI','send','log','LTM.dailyDigests','.\x20EVENTS:\x20','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','description','619266tDWmKg','isAlert','getForeignStateAsync','trim','error','156uYuTVN','automationProposal','35fhZhQR','system.presenceWho','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','config','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','targetValue'];a0_0x4f6b=function(){return _0x164bb2;};return a0_0x4f6b();}async function executeAutomationAction(_0x2bd076){const _0x3651b0=a0_0x2a78bf;try{const _0x26b638=await _0x2bd076[_0x3651b0(0x8a)]('analysis.automation.targetId'),_0x55d90c=await _0x2bd076['getStateAsync'](_0x3651b0(0xd0));if(_0x26b638&&_0x26b638['val']&&_0x55d90c){const _0x385cbb=_0x26b638[_0x3651b0(0xf5)];let _0x1adb6e=_0x55d90c['val'];try{_0x1adb6e=JSON[_0x3651b0(0xa5)](_0x1adb6e);}catch(_0x10f6f2){}_0x2bd076['log']['info'](_0x3651b0(0x9e)+_0x385cbb+_0x3651b0(0xf2)+_0x1adb6e),await _0x2bd076['setForeignStateAsync'](_0x385cbb,_0x1adb6e);}else _0x2bd076[_0x3651b0(0xdd)][_0x3651b0(0xa9)](_0x3651b0(0xa3));}catch(_0x4c4ea4){_0x2bd076[_0x3651b0(0xdd)][_0x3651b0(0xe6)](_0x3651b0(0xcc)+_0x4c4ea4[_0x3651b0(0xf1)]);}}async function sendMorningBriefing(_0x1733fe){const _0x1e27a6=a0_0x2a78bf;if(!_0x1733fe[_0x1e27a6(0xc3)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x1ce9c9='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x4ddf20=await _0x1733fe[_0x1e27a6(0xc3)][_0x1e27a6(0xa8)](_0x1ce9c9),_0x1c4a29=_0x4ddf20[_0x1e27a6(0x99)][_0x1e27a6(0xb2)]();setup[_0x1e27a6(0xd8)](_0x1733fe,_0x1e27a6(0xb7)+_0x1c4a29);}catch(_0x2d2196){_0x1733fe[_0x1e27a6(0xdd)][_0x1e27a6(0xe6)](_0x1e27a6(0xef)+_0x2d2196[_0x1e27a6(0xf1)]);}}module[a0_0x2a78bf(0x8d)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};