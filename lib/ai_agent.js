const a0_0x15fe99=a0_0x3e82;function a0_0x3e82(_0x102a7d,_0x42ff7b){const _0x336985=a0_0x30f9();return a0_0x3e82=function(_0x131c33,_0x2a0adc){_0x131c33=_0x131c33-0x11e;let _0x30f965=_0x336985[_0x131c33];return _0x30f965;},a0_0x3e82(_0x102a7d,_0x42ff7b);}(function(_0x37f1ad,_0x231d13){const _0x47e9a5=a0_0x3e82,_0x382d13=_0x37f1ad();while(!![]){try{const _0x76d330=parseInt(_0x47e9a5(0x163))/0x1*(parseInt(_0x47e9a5(0x15e))/0x2)+parseInt(_0x47e9a5(0x181))/0x3+parseInt(_0x47e9a5(0x158))/0x4*(parseInt(_0x47e9a5(0x170))/0x5)+-parseInt(_0x47e9a5(0x150))/0x6*(-parseInt(_0x47e9a5(0x183))/0x7)+-parseInt(_0x47e9a5(0x16b))/0x8*(-parseInt(_0x47e9a5(0x199))/0x9)+parseInt(_0x47e9a5(0x136))/0xa*(-parseInt(_0x47e9a5(0x177))/0xb)+-parseInt(_0x47e9a5(0x19f))/0xc;if(_0x76d330===_0x231d13)break;else _0x382d13['push'](_0x382d13['shift']());}catch(_0x1e157d){_0x382d13['push'](_0x382d13['shift']());}}}(a0_0x30f9,0x4164a));const a0_0x2a0adc=(function(){let _0x2b5136=!![];return function(_0xaff8c,_0x15d35b){const _0x3ff4a1=_0x2b5136?function(){const _0x430bbe=a0_0x3e82;if(_0x15d35b){const _0x2605fb=_0x15d35b[_0x430bbe(0x142)](_0xaff8c,arguments);return _0x15d35b=null,_0x2605fb;}}:function(){};return _0x2b5136=![],_0x3ff4a1;};}()),a0_0x131c33=a0_0x2a0adc(this,function(){const _0x502ba7=a0_0x3e82;return a0_0x131c33[_0x502ba7(0x15c)]()[_0x502ba7(0x13a)](_0x502ba7(0x12a))[_0x502ba7(0x15c)]()['constructor'](a0_0x131c33)[_0x502ba7(0x13a)](_0x502ba7(0x12a));});a0_0x131c33();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require(a0_0x15fe99(0x134)),GEMINI_MODEL=a0_0x15fe99(0x194),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x15fe99(0x193),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x15fe99(0x125),'senior_aal':a0_0x15fe99(0x12f),'family':a0_0x15fe99(0x17e),'single_comfort':a0_0x15fe99(0x19b),'security':a0_0x15fe99(0x149),'energy_saver':a0_0x15fe99(0x189)};function canCallApi(){const _0x463072=Date['now']();return _0x463072-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x5850b9=a0_0x15fe99;lastGlobalApiCall=Date[_0x5850b9(0x122)]();}async function getWeatherContext(_0x4d76dd){const _0x57b81f=a0_0x15fe99;if(!_0x4d76dd[_0x57b81f(0x123)][_0x57b81f(0x141)]||!_0x4d76dd[_0x57b81f(0x123)][_0x57b81f(0x16c)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x26cfe7=_0x4d76dd[_0x57b81f(0x123)]['weatherInstance'];let _0x5ddcdf=await _0x4d76dd[_0x57b81f(0x1a1)](_0x26cfe7+_0x57b81f(0x19d));if(!_0x5ddcdf)_0x5ddcdf=await _0x4d76dd[_0x57b81f(0x1a1)](_0x26cfe7+_0x57b81f(0x14f));let _0x2b0b5c=await _0x4d76dd[_0x57b81f(0x1a1)](_0x26cfe7+_0x57b81f(0x154));if(!_0x2b0b5c)_0x2b0b5c=await _0x4d76dd[_0x57b81f(0x1a1)](_0x26cfe7+'.forecast.current.state');let _0x3f6436=_0x57b81f(0x169);const _0x565f83=await _0x4d76dd[_0x57b81f(0x1a1)](_0x26cfe7+_0x57b81f(0x160));if(_0x565f83)_0x3f6436=_0x565f83[_0x57b81f(0x11e)]?_0x57b81f(0x16e):_0x57b81f(0x18b);if(_0x5ddcdf&&_0x2b0b5c)return _0x5ddcdf[_0x57b81f(0x11e)]+_0x57b81f(0x15b)+_0x2b0b5c[_0x57b81f(0x11e)]+_0x57b81f(0x14e)+_0x3f6436;}catch(_0x51a774){}return _0x57b81f(0x16a);}async function consultButler(_0x33cbde,_0x8a0c72,_0x1ad53f,_0x533777){const _0x3eeee0=a0_0x15fe99;if(!_0x33cbde[_0x3eeee0(0x12d)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x4c5c89=Date['now']();if(decisionCache[_0x8a0c72]&&_0x4c5c89-decisionCache[_0x8a0c72][_0x3eeee0(0x146)]<CACHE_TTL_MS){const _0xc9fb02=decisionCache[_0x8a0c72][_0x3eeee0(0x192)];return _0x33cbde[_0x3eeee0(0x140)][_0x3eeee0(0x186)](_0x3eeee0(0x159)+_0x8a0c72+_0x3eeee0(0x156)+(_0xc9fb02[_0x3eeee0(0x168)]?'OK':'NO')+'\x20('+_0xc9fb02[_0x3eeee0(0x19c)]+')'),_0xc9fb02;}if(!canCallApi())return _0x33cbde['log']['debug'](_0x3eeee0(0x145)+_0x8a0c72+_0x3eeee0(0x18a)),{'approved':!![],'reason':_0x3eeee0(0x127)};const _0x79be5c=new Date()[_0x3eeee0(0x131)](),_0x458f62=await getWeatherContext(_0x33cbde),_0x59b90c=PERSONA_MAPPING[_0x33cbde['config'][_0x3eeee0(0x14a)]||_0x3eeee0(0x175)],_0x476f8a=_0x3eeee0(0x18c)+_0x79be5c+_0x3eeee0(0x15f)+_0x458f62+_0x3eeee0(0x1a3)+(_0x533777*0x64)[_0x3eeee0(0x187)](0x0)+'%)\x20nach\x20\x22'+_0x8a0c72+_0x3eeee0(0x1a0)+_0x1ad53f+_0x3eeee0(0x198)+_0x59b90c+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x4f99e5=await _0x33cbde[_0x3eeee0(0x12d)][_0x3eeee0(0x155)](_0x476f8a),_0x4224b9=_0x4f99e5[_0x3eeee0(0x126)]['text']()[_0x3eeee0(0x161)](/```json|```/g,'')[_0x3eeee0(0x182)](),_0x1500a5=JSON[_0x3eeee0(0x16d)](_0x4224b9);return decisionCache[_0x8a0c72]={'decision':_0x1500a5,'timestamp':_0x4c5c89},_0x1500a5;}catch(_0x3bb28e){return _0x33cbde[_0x3eeee0(0x140)]['warn'](_0x3eeee0(0x180)+_0x3bb28e['message']),decisionCache[_0x8a0c72]={'decision':{'approved':!![],'reason':_0x3eeee0(0x137)},'timestamp':_0x4c5c89-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x3eeee0(0x137)};}}async function runGeminiAnalysis(_0x592828,_0x337884=''){const _0xbf1214=a0_0x15fe99;if(!_0x592828[_0xbf1214(0x12d)])return;if(!canCallApi()){_0x592828[_0xbf1214(0x140)]['debug'](_0xbf1214(0x196));return;}if(_0x592828[_0xbf1214(0x191)]['length']===0x0)return;const _0x5166a3=_0x592828[_0xbf1214(0x191)][_0xbf1214(0x135)](0x0,0xf),_0x5a7e75=_0x592828[_0xbf1214(0x139)],_0x2c9bd6=PERSONA_MAPPING[_0x592828[_0xbf1214(0x123)][_0xbf1214(0x14a)]||'generic'],_0x92dfac=_0x592828[_0xbf1214(0x123)][_0xbf1214(0x18e)]||_0xbf1214(0x12c);let _0x2b5cfe=_0xbf1214(0x169);try{const _0x2f5baf=await _0x592828[_0xbf1214(0x15a)]('system.presenceWho');if(_0x2f5baf&&_0x2f5baf[_0xbf1214(0x11e)])_0x2b5cfe=_0x2f5baf['val'];}catch(_0x11e56d){}let _0x580c40=![];try{const _0x4d8974=await _0x592828[_0xbf1214(0x15a)](_0xbf1214(0x13e));if(_0x4d8974&&_0x4d8974[_0xbf1214(0x11e)])_0x580c40=!![];}catch(_0x162282){}const _0xa4606b=_0xbf1214(0x188)+_0x2c9bd6+_0xbf1214(0x165)+_0x92dfac+_0xbf1214(0x128)+_0x5a7e75+'.\x20ANWESEND:\x20'+_0x2b5cfe+'.\x20EVENTS:\x20'+JSON[_0xbf1214(0x164)](_0x5166a3)+'.\x20EMERGENCY:\x20'+_0x337884+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x3ed2f0=await _0x592828['geminiModel'][_0xbf1214(0x155)](_0xa4606b),_0x5c96a8=JSON[_0xbf1214(0x16d)](_0x3ed2f0[_0xbf1214(0x126)][_0xbf1214(0x144)]()[_0xbf1214(0x161)](/```json|```/g,'')['trim']());await _0x592828[_0xbf1214(0x157)](_0xbf1214(0x14b),{'val':JSON[_0xbf1214(0x164)](_0x5c96a8),'ack':!![]});if(_0x5c96a8[_0xbf1214(0x17d)])await _0x592828[_0xbf1214(0x157)](_0xbf1214(0x185),{'val':_0x5c96a8[_0xbf1214(0x17d)],'ack':!![]});const _0x1a7e44={'timestamp':Date['now'](),'id':Date['now']()[_0xbf1214(0x15c)](),'analysis':{'activity':{'summary':_0x5c96a8[_0xbf1214(0x17d)],'isAlert':_0x5c96a8[_0xbf1214(0x120)],'alertReason':_0x5c96a8[_0xbf1214(0x195)]},'comfort':{'automationProposal':_0x5c96a8[_0xbf1214(0x167)]}}};_0x592828[_0xbf1214(0x153)][_0xbf1214(0x13c)](_0x1a7e44);if(_0x592828[_0xbf1214(0x153)]['length']>0x32)_0x592828[_0xbf1214(0x153)][_0xbf1214(0x124)]();await _0x592828[_0xbf1214(0x157)](_0xbf1214(0x171),{'val':JSON[_0xbf1214(0x164)](_0x592828[_0xbf1214(0x153)]),'ack':!![]});const _0x65f44d=_0x5c96a8[_0xbf1214(0x120)]||![];_0x65f44d!==_0x592828['lastAlertState']&&(await _0x592828[_0xbf1214(0x157)](_0xbf1214(0x19a),{'val':_0x65f44d,'ack':!![]}),_0x592828[_0xbf1214(0x11f)]=_0x65f44d,_0x65f44d&&(await _0x592828[_0xbf1214(0x157)]('analysis.alertReason',{'val':_0x5c96a8[_0xbf1214(0x195)],'ack':!![]}),setup['sendNotification'](_0x592828,_0xbf1214(0x17a)+_0x5c96a8[_0xbf1214(0x195)],![],_0x5c96a8['isEmergency'])));if(_0x5c96a8['automationProposal']&&_0x5c96a8[_0xbf1214(0x167)][_0xbf1214(0x13f)]){await _0x592828[_0xbf1214(0x157)](_0xbf1214(0x129),{'val':!![],'ack':!![]}),await _0x592828[_0xbf1214(0x157)](_0xbf1214(0x162),{'val':_0x5c96a8[_0xbf1214(0x167)]['description'],'ack':!![]}),await _0x592828['setStateAsync'](_0xbf1214(0x176),{'val':_0x5c96a8[_0xbf1214(0x167)][_0xbf1214(0x178)],'ack':!![]}),await _0x592828[_0xbf1214(0x157)](_0xbf1214(0x18d),{'val':JSON['stringify'](_0x5c96a8[_0xbf1214(0x167)][_0xbf1214(0x143)]),'ack':!![]});if(_0x580c40)executeAutomationAction(_0x592828);}}catch(_0x2150a8){_0x592828[_0xbf1214(0x140)]['error']('Gemini\x20Error:\x20'+_0x2150a8['message']);}}async function createDailyDigest(_0x277f85,_0x2bac3a){const _0x41a266=a0_0x15fe99;if(!_0x277f85[_0x41a266(0x151)])return;if(!canCallApi()){await _0x277f85[_0x41a266(0x157)](LTM_DP_STATUS,{'val':_0x41a266(0x13b),'ack':!![]});return;}await _0x277f85[_0x41a266(0x157)](LTM_DP_STATUS,{'val':_0x41a266(0x12b),'ack':!![]});if(!_0x277f85[_0x41a266(0x12d)]||_0x277f85[_0x41a266(0x138)][_0x41a266(0x152)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x277f85['setStateAsync'](LTM_DP_STATUS,{'val':_0x41a266(0x17c),'ack':!![]});return;}const _0x32035b=JSON[_0x41a266(0x16d)](JSON['stringify'](_0x277f85[_0x41a266(0x138)])),_0x46a1c3=_0x32035b[_0x41a266(0x152)],_0x88035f='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x41a266(0x164)](_0x32035b);try{updateApiTimestamp();const _0x2e209e=await _0x277f85[_0x41a266(0x12d)]['generateContent'](_0x88035f),_0x41c3b6=JSON[_0x41a266(0x16d)](_0x2e209e[_0x41a266(0x126)][_0x41a266(0x144)]()['replace'](/```json|```/g,'')[_0x41a266(0x182)]()),_0x3ad595={'timestamp':new Date()[_0x41a266(0x14d)](),'eventCount':_0x46a1c3,'summary':_0x41c3b6['summary']||'Digest','activityLevel':_0x41c3b6[_0x41a266(0x166)]||_0x41a266(0x173),'systemMode':_0x277f85[_0x41a266(0x139)]};_0x277f85['dailyDigests'][_0x41a266(0x14c)](_0x3ad595);const _0x46ab33=_0x277f85[_0x41a266(0x123)]['ltmLtbWindowDays']||0x3c;_0x277f85[_0x41a266(0x172)]['length']>_0x46ab33&&_0x277f85[_0x41a266(0x172)][_0x41a266(0x19e)](0x0,_0x277f85[_0x41a266(0x172)]['length']-_0x46ab33);await _0x277f85[_0x41a266(0x157)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x277f85[_0x41a266(0x172)]),'ack':!![]}),_0x277f85[_0x41a266(0x138)]=[],await _0x277f85[_0x41a266(0x157)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x277f85[_0x41a266(0x138)]),'ack':!![]}),await _0x277f85['setStateAsync'](LTM_DP_STATUS,{'val':_0x41a266(0x17b),'ack':!![]});if(_0x277f85['isProVersion']&&_0x2bac3a)_0x2bac3a[_0x41a266(0x16f)](_0x277f85,_0x41a266(0x1a4),{'digest':_0x3ad595});}catch(_0x5e347d){_0x277f85[_0x41a266(0x140)][_0x41a266(0x197)](_0x5e347d['message']);}}async function runBaselineDriftAnalysis(_0x3fa125){const _0x6d320a=a0_0x15fe99;if(!_0x3fa125[_0x6d320a(0x151)]||!_0x3fa125[_0x6d320a(0x12d)])return;if(!canCallApi())return;const _0x3a5905=_0x3fa125['config']['ltmStbWindowDays']||0xe;if(_0x3fa125[_0x6d320a(0x172)][_0x6d320a(0x152)]<_0x3a5905+0x7){await _0x3fa125['setStateAsync']('LTM.driftAnalysis.baselineDrift',{'val':_0x6d320a(0x147),'ack':!![]});return;}const _0x436170=_0x3fa125[_0x6d320a(0x172)][_0x6d320a(0x135)](-_0x3a5905),_0x49662d=_0x3fa125[_0x6d320a(0x172)]['slice'](0x0,_0x3fa125[_0x6d320a(0x172)]['length']-_0x3a5905),_0x43cf8d='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x6d320a(0x164)](_0x49662d)+'\x0aSTB:\x20'+JSON['stringify'](_0x436170);try{updateApiTimestamp();const _0x2f24c3=await _0x3fa125[_0x6d320a(0x12d)][_0x6d320a(0x155)](_0x43cf8d),_0x5ddfe9=JSON[_0x6d320a(0x16d)](_0x2f24c3[_0x6d320a(0x126)][_0x6d320a(0x144)]()['replace'](/```json|```/g,'')[_0x6d320a(0x182)]());_0x5ddfe9[_0x6d320a(0x1a5)]&&(await _0x3fa125['setStateAsync'](_0x6d320a(0x174),{'val':_0x5ddfe9[_0x6d320a(0x1a5)],'ack':!![]}),await _0x3fa125[_0x6d320a(0x157)](_0x6d320a(0x133),{'val':_0x5ddfe9[_0x6d320a(0x15d)],'ack':!![]}),await _0x3fa125[_0x6d320a(0x157)](_0x6d320a(0x17f),{'val':Date[_0x6d320a(0x122)](),'ack':!![]}));}catch(_0x5b3587){}}async function executeAutomationAction(_0x4c6a68){const _0x125215=a0_0x15fe99;try{const _0x3b705e=await _0x4c6a68['getStateAsync'](_0x125215(0x176)),_0xbcb5cb=await _0x4c6a68[_0x125215(0x15a)](_0x125215(0x18d));if(_0x3b705e&&_0x3b705e[_0x125215(0x11e)]&&_0xbcb5cb){const _0x48f076=_0x3b705e[_0x125215(0x11e)];let _0x55a489=_0xbcb5cb[_0x125215(0x11e)];try{_0x55a489=JSON[_0x125215(0x16d)](_0x55a489);}catch(_0xa7f33d){}_0x4c6a68['log'][_0x125215(0x13d)](_0x125215(0x130)+_0x48f076+'\x20=\x20'+_0x55a489),await _0x4c6a68[_0x125215(0x132)](_0x48f076,_0x55a489);}else _0x4c6a68[_0x125215(0x140)][_0x125215(0x121)](_0x125215(0x148));}catch(_0x583999){_0x4c6a68['log'][_0x125215(0x197)](_0x125215(0x18f)+_0x583999['message']);}}function a0_0x30f9(){const _0x5c95e1=['now','config','pop','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','response','Traffic-Schutz\x20(Auto-Approved)','.\x20SYSTEM_MODE:\x20','analysis.automation.patternDetected','(((.+)+)+)+$','Started...','Keine\x20Details.','geminiModel','message','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','toLocaleTimeString','setForeignStateAsync','LTM.driftAnalysis.driftDetails','./setup','slice','1660iRbYqo','KI-Fehler\x20(Fallback)','rawEventLog','currentSystemMode','search','Skipped\x20(Traffic)','unshift','info','analysis.automation.autoApply','detected','log','useWeather','apply','targetValue','text','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','timestamp','N/A\x20(Learning)','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','Sicherheit\x20geht\x20vor.','aiPersona','analysis.lastResult','push','toISOString',',\x20Lichtverh√§ltnisse:\x20','.forecast.current.temperature','690KFUDur','isProVersion','length','analysisHistory','.Current.WeatherText','generateContent','\x20->\x20','setStateAsync','4mlIYNo','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','getStateAsync','¬∞C,\x20','toString','driftDetails','86484BtEuUR',',\x20Wetter:\x20','.Current.IsNight','replace','analysis.automation.description','11KHbDGV','stringify','.\x20KONTEXT:\x20','activityLevel','automationProposal','approved','Unbekannt','Wetterdaten\x20nicht\x20abrufbar','8TQJpHO','weatherInstance','parse','Nacht','send','1650075sfquUr','analysis.analysisHistory','dailyDigests','normal','LTM.driftAnalysis.baselineDrift','generic','analysis.automation.targetId','18414cEoYrY','targetId','exports','‚ö†Ô∏è\x20ALARM:\x20','Success','Skipped\x20(No\x20AI\x20or\x20Data)','summary','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','LTM.driftAnalysis.lastCheck','ü§ñ\x20Butler\x20Brain\x20Error:\x20','540129VRITKI','trim','30695qzDEXt','sendNotification','analysis.activitySummary','debug','toFixed','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','\x20√ºbersprungen\x20(Auto-Approved).','Tag','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','analysis.automation.targetValue','livingContext','BUTLER\x20Execution\x20Error:\x20','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','eventHistory','decision','LTM.processingStatus','models/gemini-flash-latest','alertReason','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','error','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','1454283eZWALF','analysis.isAlert','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','reason','.Current.Temperature','splice','13270176HUzhZM','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','getForeignStateAsync','üåÖ\x20Morning\x20Briefing:\x0a','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','ANALYZE_HEALTH','baselineDrift','val','lastAlertState','isAlert','warn'];a0_0x30f9=function(){return _0x5c95e1;};return a0_0x30f9();}async function sendMorningBriefing(_0x981055){const _0x191204=a0_0x15fe99;if(!_0x981055[_0x191204(0x12d)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x41b487=_0x191204(0x190),_0x2660a3=await _0x981055[_0x191204(0x12d)][_0x191204(0x155)](_0x41b487),_0x20fb95=_0x2660a3[_0x191204(0x126)][_0x191204(0x144)]();setup[_0x191204(0x184)](_0x981055,_0x191204(0x1a2)+_0x20fb95);}catch(_0x1676e6){_0x981055[_0x191204(0x140)][_0x191204(0x197)]('Briefing\x20Error:\x20'+_0x1676e6[_0x191204(0x12e)]);}}module[a0_0x15fe99(0x179)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};