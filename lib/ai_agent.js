const a0_0x180254=a0_0x5759;(function(_0xd88168,_0x3f70ee){const _0x393d10=a0_0x5759,_0xcc48c9=_0xd88168();while(!![]){try{const _0x259da1=-parseInt(_0x393d10(0x11f))/0x1+parseInt(_0x393d10(0xfe))/0x2*(parseInt(_0x393d10(0x13a))/0x3)+-parseInt(_0x393d10(0xe7))/0x4+-parseInt(_0x393d10(0xcf))/0x5*(-parseInt(_0x393d10(0xdc))/0x6)+-parseInt(_0x393d10(0x141))/0x7+-parseInt(_0x393d10(0x130))/0x8+parseInt(_0x393d10(0xe6))/0x9;if(_0x259da1===_0x3f70ee)break;else _0xcc48c9['push'](_0xcc48c9['shift']());}catch(_0x1a16de){_0xcc48c9['push'](_0xcc48c9['shift']());}}}(a0_0x19c1,0x43c15));const a0_0x6db76f=(function(){let _0x3fe4d8=!![];return function(_0x5b573a,_0x1b9221){const _0x5d58df=_0x3fe4d8?function(){const _0x130eda=a0_0x5759;if(_0x1b9221){const _0x2b17db=_0x1b9221[_0x130eda(0x119)](_0x5b573a,arguments);return _0x1b9221=null,_0x2b17db;}}:function(){};return _0x3fe4d8=![],_0x5d58df;};}()),a0_0x12e5c3=a0_0x6db76f(this,function(){const _0x14b8ca=a0_0x5759;return a0_0x12e5c3[_0x14b8ca(0x120)]()['search'](_0x14b8ca(0xf8))[_0x14b8ca(0x120)]()['constructor'](a0_0x12e5c3)[_0x14b8ca(0xf2)](_0x14b8ca(0xf8));});a0_0x12e5c3();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require(a0_0x180254(0x139)),GEMINI_MODEL=a0_0x180254(0xd1),LTM_DP_DAILY_DIGESTS=a0_0x180254(0xca),LTM_DP_STATUS=a0_0x180254(0xfb),LTM_DP_RAW_LOG=a0_0x180254(0x10f),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':a0_0x180254(0x11d),'family':a0_0x180254(0x10b),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x180254(0xf4)};function canCallApi(){const _0x5956fc=a0_0x180254,_0x49736c=Date[_0x5956fc(0x129)]();return _0x49736c-lastGlobalApiCall>MIN_API_GAP_MS;}function a0_0x19c1(){const _0x127fe1=['automationProposal','info','description','toLocaleTimeString','analysis.analysisHistory','error','LTM.dailyDigests','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','timestamp','Unbekannt','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','474915zLyYhC','isProVersion','models/gemini-flash-latest','.Current.Temperature','useWeather','analysis.automation.patternDetected','length','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','.forecast.current.state','.\x20KONTEXT:\x20','Digest','debug','dailyDigests','18QhkFlz','warn','eventHistory','ðŸŒ…\x20Morning\x20Briefing:\x0a','âš ï¸\x20ALARM:\x20','Nacht','.Current.IsNight','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','detected','stringify','8464653oYSiAn','1756876yBHQSe','trim','LTM.driftAnalysis.baselineDrift','val','push','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','ltmStbWindowDays','\x20Ã¼bersprungen\x20(Auto-Approved).','config','sendNotification','toFixed','search','Unbekannt\x20(Kein\x20Sensor)','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','unshift','KI\x20offline\x20(Fallback)','aiPersona','(((.+)+)+)+$','rawEventLog','Success','LTM.processingStatus','message','%)\x20nach\x20\x22','694226KgszaS','analysis.automation.description','setStateAsync','.\x20SYSTEM_MODE:\x20','exports','Briefing\x20Error:\x20','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','getForeignStateAsync','KI-Fehler\x20(Fallback)','geminiModel','reason','LTM.driftAnalysis.driftDetails','Skipped\x20(No\x20AI\x20or\x20Data)','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','N/A\x20(Learning)','LTM.rawEventLog','lastAlertState','decision','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','Wetterdaten\x20nicht\x20abrufbar','livingContext','toISOString','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','analysis.automation.targetId','apply','splice','generic','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','.\x20EVENTS:\x20','415206CpvkHd','toString','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','generateContent','Traffic-Schutz\x20(Auto-Approved)','baselineDrift','ltmLtbWindowDays','weatherInstance','parse','analysisHistory','now','Gemini\x20Error:\x20','slice','BUTLER\x20Execution\x20Error:\x20','currentSystemMode','\x0aSTB:\x20','analysis.automation.targetValue','3519840DYCTpV','pop','Tag','getStateAsync','isAlert','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','targetId','Â°C,\x20','response','./setup','3itOszr','analysis.automation.autoApply','Started...','text','analysis.alertReason','log','alertReason','4543ShvdEQ','analysis.isAlert','summary',',\x20LichtverhÃ¤ltnisse:\x20'];a0_0x19c1=function(){return _0x127fe1;};return a0_0x19c1();}function updateApiTimestamp(){const _0x1044e6=a0_0x180254;lastGlobalApiCall=Date[_0x1044e6(0x129)]();}async function getWeatherContext(_0x2778b9){const _0xf62d39=a0_0x180254;if(!_0x2778b9[_0xf62d39(0xef)][_0xf62d39(0xd3)]||!_0x2778b9[_0xf62d39(0xef)][_0xf62d39(0x126)])return _0xf62d39(0xf3);try{const _0x444c38=_0x2778b9[_0xf62d39(0xef)][_0xf62d39(0x126)];let _0x54d4c9=await _0x2778b9['getForeignStateAsync'](_0x444c38+_0xf62d39(0xd2));if(!_0x54d4c9)_0x54d4c9=await _0x2778b9[_0xf62d39(0x105)](_0x444c38+'.forecast.current.temperature');let _0x1aeae8=await _0x2778b9[_0xf62d39(0x105)](_0x444c38+'.Current.WeatherText');if(!_0x1aeae8)_0x1aeae8=await _0x2778b9['getForeignStateAsync'](_0x444c38+_0xf62d39(0xd7));let _0x4ace7b=_0xf62d39(0xcd);const _0xfc5d2f=await _0x2778b9['getForeignStateAsync'](_0x444c38+_0xf62d39(0xe2));if(_0xfc5d2f)_0x4ace7b=_0xfc5d2f[_0xf62d39(0xea)]?_0xf62d39(0xe1):_0xf62d39(0x132);if(_0x54d4c9&&_0x1aeae8)return _0x54d4c9[_0xf62d39(0xea)]+_0xf62d39(0x137)+_0x1aeae8[_0xf62d39(0xea)]+_0xf62d39(0x144)+_0x4ace7b;}catch(_0xa8e6f7){}return _0xf62d39(0x113);}async function consultButler(_0x249741,_0x275a9c,_0x2dfc55,_0x22e815){const _0x59cb0d=a0_0x180254;if(!_0x249741[_0x59cb0d(0x107)])return{'approved':!![],'reason':_0x59cb0d(0xf6)};const _0x3d9935=Date[_0x59cb0d(0x129)]();if(decisionCache[_0x275a9c]&&_0x3d9935-decisionCache[_0x275a9c][_0x59cb0d(0xcc)]<CACHE_TTL_MS){const _0x26cd3e=decisionCache[_0x275a9c][_0x59cb0d(0x111)];return _0x249741[_0x59cb0d(0x13f)][_0x59cb0d(0xda)](_0x59cb0d(0x10c)+_0x275a9c+'\x20->\x20'+(_0x26cd3e['approved']?'OK':'NO')+'\x20('+_0x26cd3e[_0x59cb0d(0x108)]+')'),_0x26cd3e;}if(!canCallApi())return _0x249741[_0x59cb0d(0x13f)][_0x59cb0d(0xda)](_0x59cb0d(0x104)+_0x275a9c+_0x59cb0d(0xee)),{'approved':!![],'reason':_0x59cb0d(0x123)};const _0x474d4e=new Date()[_0x59cb0d(0xc7)](),_0x25d70e=await getWeatherContext(_0x249741),_0x1091ab=PERSONA_MAPPING[_0x249741[_0x59cb0d(0xef)][_0x59cb0d(0xf7)]||_0x59cb0d(0x11b)],_0x58eead=_0x59cb0d(0xcb)+_0x474d4e+',\x20Wetter:\x20'+_0x25d70e+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x22e815*0x64)[_0x59cb0d(0xf1)](0x0)+_0x59cb0d(0xfd)+_0x275a9c+_0x59cb0d(0xec)+_0x2dfc55+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x1091ab+_0x59cb0d(0x121);try{updateApiTimestamp();const _0x44d33a=await _0x249741[_0x59cb0d(0x107)][_0x59cb0d(0x122)](_0x58eead),_0x25f107=_0x44d33a[_0x59cb0d(0x138)][_0x59cb0d(0x13d)]()['replace'](/```json|```/g,'')[_0x59cb0d(0xe8)](),_0x559768=JSON[_0x59cb0d(0x127)](_0x25f107);return decisionCache[_0x275a9c]={'decision':_0x559768,'timestamp':_0x3d9935},_0x559768;}catch(_0x794678){return _0x249741[_0x59cb0d(0x13f)]['warn'](_0x59cb0d(0x112)+_0x794678[_0x59cb0d(0xfc)]),decisionCache[_0x275a9c]={'decision':{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'},'timestamp':_0x3d9935-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x59cb0d(0x106)};}}async function runGeminiAnalysis(_0x5e9608,_0x5317f2=''){const _0x445567=a0_0x180254;if(!_0x5e9608['geminiModel'])return;if(!canCallApi()){_0x5e9608['log'][_0x445567(0xda)](_0x445567(0x117));return;}if(_0x5e9608['eventHistory'][_0x445567(0xd5)]===0x0)return;const _0x236a15=_0x5e9608[_0x445567(0xde)][_0x445567(0x12b)](0x0,0xf),_0x339bbb=_0x5e9608[_0x445567(0x12d)],_0x26d3c1=PERSONA_MAPPING[_0x5e9608[_0x445567(0xef)][_0x445567(0xf7)]||_0x445567(0x11b)],_0x27a029=_0x5e9608['config'][_0x445567(0x114)]||'Keine\x20Details.';let _0x1aa9cd='Unbekannt';try{const _0x1fb296=await _0x5e9608[_0x445567(0x133)]('system.presenceWho');if(_0x1fb296&&_0x1fb296[_0x445567(0xea)])_0x1aa9cd=_0x1fb296[_0x445567(0xea)];}catch(_0x3e5de3){}let _0x362df5=![];try{const _0x1a5dcc=await _0x5e9608[_0x445567(0x133)](_0x445567(0x13b));if(_0x1a5dcc&&_0x1a5dcc[_0x445567(0xea)])_0x362df5=!![];}catch(_0x1a826f){}const _0x3729c1=_0x445567(0xe3)+_0x26d3c1+_0x445567(0xd8)+_0x27a029+_0x445567(0x101)+_0x339bbb+'.\x20ANWESEND:\x20'+_0x1aa9cd+_0x445567(0x11e)+JSON[_0x445567(0xe5)](_0x236a15)+'.\x20EMERGENCY:\x20'+_0x5317f2+_0x445567(0xd6);try{updateApiTimestamp();const _0x731fc2=await _0x5e9608['geminiModel'][_0x445567(0x122)](_0x3729c1),_0x4113c9=JSON[_0x445567(0x127)](_0x731fc2[_0x445567(0x138)][_0x445567(0x13d)]()['replace'](/```json|```/g,'')[_0x445567(0xe8)]());await _0x5e9608[_0x445567(0x100)]('analysis.lastResult',{'val':JSON[_0x445567(0xe5)](_0x4113c9),'ack':!![]});if(_0x4113c9[_0x445567(0x143)])await _0x5e9608[_0x445567(0x100)]('analysis.activitySummary',{'val':_0x4113c9['summary'],'ack':!![]});const _0x36a7f3={'timestamp':Date['now'](),'id':Date[_0x445567(0x129)]()[_0x445567(0x120)](),'analysis':{'activity':{'summary':_0x4113c9[_0x445567(0x143)],'isAlert':_0x4113c9[_0x445567(0x134)],'alertReason':_0x4113c9['alertReason']},'comfort':{'automationProposal':_0x4113c9[_0x445567(0x145)]}}};_0x5e9608[_0x445567(0x128)][_0x445567(0xf5)](_0x36a7f3);if(_0x5e9608[_0x445567(0x128)][_0x445567(0xd5)]>0x32)_0x5e9608[_0x445567(0x128)][_0x445567(0x131)]();await _0x5e9608[_0x445567(0x100)](_0x445567(0xc8),{'val':JSON['stringify'](_0x5e9608[_0x445567(0x128)]),'ack':!![]});const _0x31420a=_0x4113c9['isAlert']||![];_0x31420a!==_0x5e9608[_0x445567(0x110)]&&(await _0x5e9608[_0x445567(0x100)](_0x445567(0x142),{'val':_0x31420a,'ack':!![]}),_0x5e9608['lastAlertState']=_0x31420a,_0x31420a&&(await _0x5e9608[_0x445567(0x100)](_0x445567(0x13e),{'val':_0x4113c9[_0x445567(0x140)],'ack':!![]}),setup[_0x445567(0xf0)](_0x5e9608,_0x445567(0xe0)+_0x4113c9[_0x445567(0x140)],![],_0x4113c9['isEmergency'])));if(_0x4113c9[_0x445567(0x145)]&&_0x4113c9['automationProposal'][_0x445567(0xe4)]){await _0x5e9608[_0x445567(0x100)](_0x445567(0xd4),{'val':!![],'ack':!![]}),await _0x5e9608[_0x445567(0x100)](_0x445567(0xff),{'val':_0x4113c9[_0x445567(0x145)][_0x445567(0xc6)],'ack':!![]}),await _0x5e9608[_0x445567(0x100)](_0x445567(0x118),{'val':_0x4113c9['automationProposal'][_0x445567(0x136)],'ack':!![]}),await _0x5e9608[_0x445567(0x100)](_0x445567(0x12f),{'val':JSON[_0x445567(0xe5)](_0x4113c9[_0x445567(0x145)]['targetValue']),'ack':!![]});if(_0x362df5)executeAutomationAction(_0x5e9608);}}catch(_0x57c995){_0x5e9608[_0x445567(0x13f)][_0x445567(0xc9)](_0x445567(0x12a)+_0x57c995[_0x445567(0xfc)]);}}async function createDailyDigest(_0x21f955,_0x5f1293){const _0x23d96e=a0_0x180254;if(!_0x21f955[_0x23d96e(0xd0)])return;if(!canCallApi()){await _0x21f955[_0x23d96e(0x100)](LTM_DP_STATUS,{'val':'Skipped\x20(Traffic)','ack':!![]});return;}await _0x21f955[_0x23d96e(0x100)](LTM_DP_STATUS,{'val':_0x23d96e(0x13c),'ack':!![]});if(!_0x21f955['geminiModel']||_0x21f955['rawEventLog'][_0x23d96e(0xd5)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x21f955[_0x23d96e(0x100)](LTM_DP_STATUS,{'val':_0x23d96e(0x10a),'ack':!![]});return;}const _0x5f2cb1=JSON[_0x23d96e(0x127)](JSON[_0x23d96e(0xe5)](_0x21f955[_0x23d96e(0xf9)])),_0x181066=_0x5f2cb1[_0x23d96e(0xd5)],_0x4ff973=_0x23d96e(0xce)+JSON['stringify'](_0x5f2cb1);try{updateApiTimestamp();const _0x1bd5f8=await _0x21f955[_0x23d96e(0x107)][_0x23d96e(0x122)](_0x4ff973),_0x780e33=JSON['parse'](_0x1bd5f8[_0x23d96e(0x138)]['text']()['replace'](/```json|```/g,'')[_0x23d96e(0xe8)]()),_0x5829c3={'timestamp':new Date()[_0x23d96e(0x115)](),'eventCount':_0x181066,'summary':_0x780e33[_0x23d96e(0x143)]||_0x23d96e(0xd9),'activityLevel':_0x780e33['activityLevel']||'normal','systemMode':_0x21f955[_0x23d96e(0x12d)]};_0x21f955[_0x23d96e(0xdb)][_0x23d96e(0xeb)](_0x5829c3);const _0x73bb8d=_0x21f955[_0x23d96e(0xef)][_0x23d96e(0x125)]||0x3c;_0x21f955['dailyDigests']['length']>_0x73bb8d&&_0x21f955[_0x23d96e(0xdb)][_0x23d96e(0x11a)](0x0,_0x21f955[_0x23d96e(0xdb)][_0x23d96e(0xd5)]-_0x73bb8d);await _0x21f955['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x21f955[_0x23d96e(0xdb)]),'ack':!![]}),_0x21f955[_0x23d96e(0xf9)]=[],await _0x21f955[_0x23d96e(0x100)](LTM_DP_RAW_LOG,{'val':JSON[_0x23d96e(0xe5)](_0x21f955[_0x23d96e(0xf9)]),'ack':!![]}),await _0x21f955[_0x23d96e(0x100)](LTM_DP_STATUS,{'val':_0x23d96e(0xfa),'ack':!![]});if(_0x21f955[_0x23d96e(0xd0)]&&_0x5f1293)_0x5f1293['send'](_0x21f955,'ANALYZE_HEALTH',{'digest':_0x5829c3});}catch(_0x4205bb){_0x21f955[_0x23d96e(0x13f)][_0x23d96e(0xc9)](_0x4205bb[_0x23d96e(0xfc)]);}}function a0_0x5759(_0x276901,_0x361cea){const _0x39ae85=a0_0x19c1();return a0_0x5759=function(_0x12e5c3,_0x6db76f){_0x12e5c3=_0x12e5c3-0xc6;let _0x19c1a4=_0x39ae85[_0x12e5c3];return _0x19c1a4;},a0_0x5759(_0x276901,_0x361cea);}async function runBaselineDriftAnalysis(_0x4f38d6){const _0x4a4eed=a0_0x180254;if(!_0x4f38d6['isProVersion']||!_0x4f38d6[_0x4a4eed(0x107)])return;if(!canCallApi())return;const _0x3372f9=_0x4f38d6['config'][_0x4a4eed(0xed)]||0xe;if(_0x4f38d6[_0x4a4eed(0xdb)][_0x4a4eed(0xd5)]<_0x3372f9+0x7){await _0x4f38d6[_0x4a4eed(0x100)]('LTM.driftAnalysis.baselineDrift',{'val':_0x4a4eed(0x10e),'ack':!![]});return;}const _0x2f319c=_0x4f38d6[_0x4a4eed(0xdb)][_0x4a4eed(0x12b)](-_0x3372f9),_0x20bdf7=_0x4f38d6['dailyDigests'][_0x4a4eed(0x12b)](0x0,_0x4f38d6[_0x4a4eed(0xdb)][_0x4a4eed(0xd5)]-_0x3372f9),_0x357dd5=_0x4a4eed(0x135)+JSON[_0x4a4eed(0xe5)](_0x20bdf7)+_0x4a4eed(0x12e)+JSON[_0x4a4eed(0xe5)](_0x2f319c);try{updateApiTimestamp();const _0x1d5141=await _0x4f38d6[_0x4a4eed(0x107)][_0x4a4eed(0x122)](_0x357dd5),_0x75e51c=JSON[_0x4a4eed(0x127)](_0x1d5141[_0x4a4eed(0x138)][_0x4a4eed(0x13d)]()['replace'](/```json|```/g,'')[_0x4a4eed(0xe8)]());_0x75e51c['baselineDrift']&&(await _0x4f38d6[_0x4a4eed(0x100)](_0x4a4eed(0xe9),{'val':_0x75e51c[_0x4a4eed(0x124)],'ack':!![]}),await _0x4f38d6['setStateAsync'](_0x4a4eed(0x109),{'val':_0x75e51c['driftDetails'],'ack':!![]}),await _0x4f38d6['setStateAsync']('LTM.driftAnalysis.lastCheck',{'val':Date[_0x4a4eed(0x129)](),'ack':!![]}));}catch(_0x1bbeac){}}async function executeAutomationAction(_0x4a6505){const _0x5070be=a0_0x180254;try{const _0x2a512c=await _0x4a6505[_0x5070be(0x133)](_0x5070be(0x118)),_0xc9da3a=await _0x4a6505[_0x5070be(0x133)](_0x5070be(0x12f));if(_0x2a512c&&_0x2a512c[_0x5070be(0xea)]&&_0xc9da3a){const _0x651fda=_0x2a512c[_0x5070be(0xea)];let _0x57635c=_0xc9da3a[_0x5070be(0xea)];try{_0x57635c=JSON['parse'](_0x57635c);}catch(_0x3ba1e9){}_0x4a6505[_0x5070be(0x13f)][_0x5070be(0x146)](_0x5070be(0x10d)+_0x651fda+'\x20=\x20'+_0x57635c),await _0x4a6505['setForeignStateAsync'](_0x651fda,_0x57635c);}else _0x4a6505['log'][_0x5070be(0xdd)](_0x5070be(0x11c));}catch(_0x407450){_0x4a6505[_0x5070be(0x13f)][_0x5070be(0xc9)](_0x5070be(0x12c)+_0x407450[_0x5070be(0xfc)]);}}async function sendMorningBriefing(_0x20b887){const _0x48c5a8=a0_0x180254;if(!_0x20b887[_0x48c5a8(0x107)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x24199f=_0x48c5a8(0x116),_0x23cbeb=await _0x20b887[_0x48c5a8(0x107)][_0x48c5a8(0x122)](_0x24199f),_0x4df351=_0x23cbeb[_0x48c5a8(0x138)][_0x48c5a8(0x13d)]();setup[_0x48c5a8(0xf0)](_0x20b887,_0x48c5a8(0xdf)+_0x4df351);}catch(_0x3a881c){_0x20b887[_0x48c5a8(0x13f)]['error'](_0x48c5a8(0x103)+_0x3a881c[_0x48c5a8(0xfc)]);}}module[a0_0x180254(0x102)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};