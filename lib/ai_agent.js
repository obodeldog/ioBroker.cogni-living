const a0_0x37d470=a0_0x2631;(function(_0x2a3d29,_0x2e9586){const _0x39466f=a0_0x2631,_0x32d892=_0x2a3d29();while(!![]){try{const _0x3fb1a9=-parseInt(_0x39466f(0x15b))/0x1+parseInt(_0x39466f(0x1a9))/0x2+-parseInt(_0x39466f(0x18e))/0x3*(-parseInt(_0x39466f(0x13b))/0x4)+-parseInt(_0x39466f(0x17f))/0x5+-parseInt(_0x39466f(0x153))/0x6*(-parseInt(_0x39466f(0x1a1))/0x7)+parseInt(_0x39466f(0x12d))/0x8+-parseInt(_0x39466f(0x1a2))/0x9*(parseInt(_0x39466f(0x18d))/0xa);if(_0x3fb1a9===_0x2e9586)break;else _0x32d892['push'](_0x32d892['shift']());}catch(_0x100cdd){_0x32d892['push'](_0x32d892['shift']());}}}(a0_0x4f82,0x3b9a3));const a0_0x5bb90c=(function(){let _0x2f7478=!![];return function(_0x5afbe7,_0x3efa0f){const _0x58e5e5=_0x2f7478?function(){const _0x2edc1f=a0_0x2631;if(_0x3efa0f){const _0x10a94c=_0x3efa0f[_0x2edc1f(0x13d)](_0x5afbe7,arguments);return _0x3efa0f=null,_0x10a94c;}}:function(){};return _0x2f7478=![],_0x58e5e5;};}()),a0_0x5f0a7d=a0_0x5bb90c(this,function(){const _0x39c8eb=a0_0x2631;return a0_0x5f0a7d[_0x39c8eb(0x190)]()['search']('(((.+)+)+)+$')[_0x39c8eb(0x190)]()[_0x39c8eb(0x193)](a0_0x5f0a7d)['search'](_0x39c8eb(0x199));});a0_0x5f0a7d();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require('./setup'),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x37d470(0x194),LTM_DP_STATUS=a0_0x37d470(0x172),LTM_DP_RAW_LOG=a0_0x37d470(0x154),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':a0_0x37d470(0x15f),'family':a0_0x37d470(0x1a0),'single_comfort':a0_0x37d470(0x176),'security':a0_0x37d470(0x19c),'energy_saver':'PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'};function canCallApi(){const _0x3c4233=a0_0x37d470,_0x43889c=Date[_0x3c4233(0x17c)]();return _0x43889c-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x38b8eb=a0_0x37d470;lastGlobalApiCall=Date[_0x38b8eb(0x17c)]();}async function getWeatherContext(_0x400ce3){const _0x465c51=a0_0x37d470;if(!_0x400ce3[_0x465c51(0x14d)]['useWeather']||!_0x400ce3[_0x465c51(0x14d)]['weatherInstance'])return _0x465c51(0x16e);try{const _0xa179f5=_0x400ce3[_0x465c51(0x14d)][_0x465c51(0x13e)];let _0x3bc9f0=await _0x400ce3[_0x465c51(0x19e)](_0xa179f5+_0x465c51(0x135));if(!_0x3bc9f0)_0x3bc9f0=await _0x400ce3[_0x465c51(0x19e)](_0xa179f5+_0x465c51(0x17e));let _0x276e53=await _0x400ce3['getForeignStateAsync'](_0xa179f5+'.Current.WeatherText');if(!_0x276e53)_0x276e53=await _0x400ce3[_0x465c51(0x19e)](_0xa179f5+'.forecast.current.state');let _0x36f9c2=_0x465c51(0x183);const _0x54a46e=await _0x400ce3[_0x465c51(0x19e)](_0xa179f5+'.Current.IsNight');if(_0x54a46e)_0x36f9c2=_0x54a46e[_0x465c51(0x12f)]?'Nacht':'Tag';if(_0x3bc9f0&&_0x276e53)return _0x3bc9f0[_0x465c51(0x12f)]+'¬∞C,\x20'+_0x276e53[_0x465c51(0x12f)]+_0x465c51(0x169)+_0x36f9c2;}catch(_0x568a4d){}return _0x465c51(0x128);}function a0_0x4f82(){const _0x2a5969=['Skipped\x20(Traffic)','.\x20ANWESEND:\x20','ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','3152YhUsFp','analysis.lastResult','apply','weatherInstance','slice','generateContent','livingContext','decision','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','Skipped\x20(No\x20AI\x20or\x20Data)','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','analysis.alertReason',').\x20Sending\x20notification...','stringify','setStateAsync','\x20√ºbersprungen\x20(Auto-Approved).','trim','isEmergency','config','alertReason','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','Gemini\x20Error:\x20','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','\x0aSTB:\x20','36pxoyfN','LTM.rawEventLog','debug','driftDetails','analysis.automation.targetValue','LTM.driftAnalysis.driftDetails','push','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','51017zUcnWg','ü§ñ\x20Butler\x20Brain\x20Error:\x20','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','log','send','lastAlertState','eventHistory','analysisHistory','text','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','automationProposal','analysis.automation.targetId',',\x20Lichtverh√§ltnisse:\x20','setForeignStateAsync','üåÖ\x20Morning\x20Briefing:\x0a',',\x20Wetter:\x20','exports','Unbekannt\x20(Kein\x20Sensor)','response','analysis.automation.autoApply','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','LTM.processingStatus','replace','timestamp','BUTLER\x20Execution\x20Error:\x20','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','length','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','warn','normal','.\x20EVENTS:\x20','now','Digest','.forecast.current.temperature','1285325uvgVWa','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','analysis.automation.patternDetected','Unbekannt','KI-Fehler\x20(Fallback)','pop','splice','rawEventLog','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','error','baselineDrift','üìÖ\x20Daily\x20Digest:\x0a','Keine\x20Details.','10TDDJOy','336IDnCry','ltmStbWindowDays','toString','Briefing\x20Error:\x20','N/A\x20(Learning)','constructor','LTM.dailyDigests','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','Success','approved','message','(((.+)+)+)+$','sendNotification','toLocaleTimeString','Sicherheit\x20geht\x20vor.','targetId','getForeignStateAsync','generic','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','462819bowjQV','5933241BGvHPu','reason','detected','parse','üåÖ\x20Briefing\x20generated\x20(Length:\x20','getStateAsync','toISOString','839362jyIWYp','system.presenceWho','Traffic-Schutz\x20(Auto-Approved)','dailyDigests','Wetterdaten\x20nicht\x20abrufbar','.\x20SYSTEM_MODE:\x20','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','\x0aAktivit√§t:\x20','%)\x20nach\x20\x22','2454584NQcVcX','isAlert','val','\x20->\x20','isProVersion','analysis.analysisHistory','summary','info','.Current.Temperature','geminiModel','currentSystemMode'];a0_0x4f82=function(){return _0x2a5969;};return a0_0x4f82();}function a0_0x2631(_0x34e472,_0x2288cb){const _0x58598d=a0_0x4f82();return a0_0x2631=function(_0x5f0a7d,_0x5bb90c){_0x5f0a7d=_0x5f0a7d-0x126;let _0x4f826c=_0x58598d[_0x5f0a7d];return _0x4f826c;},a0_0x2631(_0x34e472,_0x2288cb);}async function consultButler(_0xfc1d8a,_0x24785b,_0x3e5d64,_0x3f73ae){const _0x9f9328=a0_0x37d470;if(!_0xfc1d8a[_0x9f9328(0x136)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x38361b=Date[_0x9f9328(0x17c)]();if(decisionCache[_0x24785b]&&_0x38361b-decisionCache[_0x24785b][_0x9f9328(0x174)]<CACHE_TTL_MS){const _0x347797=decisionCache[_0x24785b][_0x9f9328(0x142)];return _0xfc1d8a[_0x9f9328(0x160)][_0x9f9328(0x155)](_0x9f9328(0x15d)+_0x24785b+_0x9f9328(0x130)+(_0x347797[_0x9f9328(0x197)]?'OK':'NO')+'\x20('+_0x347797[_0x9f9328(0x1a3)]+')'),_0x347797;}if(!canCallApi())return _0xfc1d8a[_0x9f9328(0x160)]['debug'](_0x9f9328(0x151)+_0x24785b+_0x9f9328(0x14a)),{'approved':!![],'reason':_0x9f9328(0x126)};const _0x1aee55=new Date()[_0x9f9328(0x19b)](),_0x158417=await getWeatherContext(_0xfc1d8a),_0x5cdc5c=PERSONA_MAPPING[_0xfc1d8a['config']['aiPersona']||'generic'],_0x516c93=_0x9f9328(0x181)+_0x1aee55+_0x9f9328(0x16c)+_0x158417+_0x9f9328(0x178)+(_0x3f73ae*0x64)['toFixed'](0x0)+_0x9f9328(0x12c)+_0x24785b+_0x9f9328(0x195)+_0x3e5d64+_0x9f9328(0x12a)+_0x5cdc5c+_0x9f9328(0x188);try{updateApiTimestamp();const _0x3a8401=await _0xfc1d8a[_0x9f9328(0x136)][_0x9f9328(0x140)](_0x516c93),_0x217ae0=_0x3a8401[_0x9f9328(0x16f)]['text']()['replace'](/```json|```/g,'')[_0x9f9328(0x14b)](),_0x1d96c2=JSON[_0x9f9328(0x1a5)](_0x217ae0);return decisionCache[_0x24785b]={'decision':_0x1d96c2,'timestamp':_0x38361b},_0x1d96c2;}catch(_0x529374){return _0xfc1d8a['log'][_0x9f9328(0x179)](_0x9f9328(0x15c)+_0x529374[_0x9f9328(0x198)]),decisionCache[_0x24785b]={'decision':{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'},'timestamp':_0x38361b-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x9f9328(0x184)};}}async function runGeminiAnalysis(_0x48346a,_0x1473e3=''){const _0x4c4b7d=a0_0x37d470;if(!_0x48346a[_0x4c4b7d(0x136)])return;if(!canCallApi()){_0x48346a['log'][_0x4c4b7d(0x155)](_0x4c4b7d(0x166));return;}if(_0x48346a[_0x4c4b7d(0x163)][_0x4c4b7d(0x177)]===0x0)return;const _0x4af76b=_0x48346a[_0x4c4b7d(0x163)][_0x4c4b7d(0x13f)](0x0,0xf),_0x2cf1d1=_0x48346a['currentSystemMode'],_0x63928f=PERSONA_MAPPING[_0x48346a[_0x4c4b7d(0x14d)]['aiPersona']||_0x4c4b7d(0x19f)],_0x2c1d62=_0x48346a[_0x4c4b7d(0x14d)][_0x4c4b7d(0x141)]||_0x4c4b7d(0x18c);let _0xb61f2b=_0x4c4b7d(0x183);try{const _0x151713=await _0x48346a[_0x4c4b7d(0x1a7)](_0x4c4b7d(0x1aa));if(_0x151713&&_0x151713[_0x4c4b7d(0x12f)])_0xb61f2b=_0x151713['val'];}catch(_0x52e6a6){}let _0xab3f53=![];try{const _0x2da4d1=await _0x48346a[_0x4c4b7d(0x1a7)](_0x4c4b7d(0x170));if(_0x2da4d1&&_0x2da4d1['val'])_0xab3f53=!![];}catch(_0x1f653a){}const _0x278561=_0x4c4b7d(0x143)+_0x63928f+'.\x20KONTEXT:\x20'+_0x2c1d62+_0x4c4b7d(0x129)+_0x2cf1d1+_0x4c4b7d(0x139)+_0xb61f2b+_0x4c4b7d(0x17b)+JSON[_0x4c4b7d(0x148)](_0x4af76b)+'.\x20EMERGENCY:\x20'+_0x1473e3+_0x4c4b7d(0x180);try{updateApiTimestamp();const _0x490998=await _0x48346a['geminiModel'][_0x4c4b7d(0x140)](_0x278561),_0x3d8820=JSON[_0x4c4b7d(0x1a5)](_0x490998[_0x4c4b7d(0x16f)][_0x4c4b7d(0x165)]()[_0x4c4b7d(0x173)](/```json|```/g,'')['trim']());await _0x48346a['setStateAsync'](_0x4c4b7d(0x13c),{'val':JSON[_0x4c4b7d(0x148)](_0x3d8820),'ack':!![]});if(_0x3d8820[_0x4c4b7d(0x133)])await _0x48346a[_0x4c4b7d(0x149)]('analysis.activitySummary',{'val':_0x3d8820[_0x4c4b7d(0x133)],'ack':!![]});const _0x2b3fd8={'timestamp':Date[_0x4c4b7d(0x17c)](),'id':Date[_0x4c4b7d(0x17c)]()['toString'](),'analysis':{'activity':{'summary':_0x3d8820[_0x4c4b7d(0x133)],'isAlert':_0x3d8820[_0x4c4b7d(0x12e)],'alertReason':_0x3d8820[_0x4c4b7d(0x14e)]},'comfort':{'automationProposal':_0x3d8820['automationProposal']}}};_0x48346a[_0x4c4b7d(0x164)]['unshift'](_0x2b3fd8);if(_0x48346a[_0x4c4b7d(0x164)][_0x4c4b7d(0x177)]>0x32)_0x48346a[_0x4c4b7d(0x164)][_0x4c4b7d(0x185)]();await _0x48346a[_0x4c4b7d(0x149)](_0x4c4b7d(0x132),{'val':JSON[_0x4c4b7d(0x148)](_0x48346a['analysisHistory']),'ack':!![]});const _0x2b0d8f=_0x3d8820[_0x4c4b7d(0x12e)]||![];_0x2b0d8f!==_0x48346a[_0x4c4b7d(0x162)]&&(await _0x48346a['setStateAsync']('analysis.isAlert',{'val':_0x2b0d8f,'ack':!![]}),_0x48346a[_0x4c4b7d(0x162)]=_0x2b0d8f,_0x2b0d8f&&(await _0x48346a['setStateAsync'](_0x4c4b7d(0x146),{'val':_0x3d8820[_0x4c4b7d(0x14e)],'ack':!![]}),setup[_0x4c4b7d(0x19a)](_0x48346a,'‚ö†Ô∏è\x20ALARM:\x20'+_0x3d8820[_0x4c4b7d(0x14e)],![],_0x3d8820[_0x4c4b7d(0x14c)])));if(_0x3d8820[_0x4c4b7d(0x167)]&&_0x3d8820[_0x4c4b7d(0x167)][_0x4c4b7d(0x1a4)]){await _0x48346a[_0x4c4b7d(0x149)](_0x4c4b7d(0x182),{'val':!![],'ack':!![]}),await _0x48346a[_0x4c4b7d(0x149)]('analysis.automation.description',{'val':_0x3d8820[_0x4c4b7d(0x167)]['description'],'ack':!![]}),await _0x48346a[_0x4c4b7d(0x149)](_0x4c4b7d(0x168),{'val':_0x3d8820[_0x4c4b7d(0x167)][_0x4c4b7d(0x19d)],'ack':!![]}),await _0x48346a[_0x4c4b7d(0x149)](_0x4c4b7d(0x157),{'val':JSON['stringify'](_0x3d8820['automationProposal']['targetValue']),'ack':!![]});if(_0xab3f53)executeAutomationAction(_0x48346a);}}catch(_0x364c35){_0x48346a['log']['error'](_0x4c4b7d(0x150)+_0x364c35[_0x4c4b7d(0x198)]);}}async function createDailyDigest(_0x4fd4a9,_0xd9c0cb){const _0x4868d0=a0_0x37d470;if(!_0x4fd4a9['isProVersion'])return;if(!canCallApi()){await _0x4fd4a9[_0x4868d0(0x149)](LTM_DP_STATUS,{'val':_0x4868d0(0x138),'ack':!![]});return;}await _0x4fd4a9[_0x4868d0(0x149)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x4fd4a9[_0x4868d0(0x136)]||_0x4fd4a9[_0x4868d0(0x187)][_0x4868d0(0x177)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4fd4a9[_0x4868d0(0x149)](LTM_DP_STATUS,{'val':_0x4868d0(0x144),'ack':!![]});return;}const _0x2cfb3b=JSON['parse'](JSON[_0x4868d0(0x148)](_0x4fd4a9[_0x4868d0(0x187)])),_0x1ad165=_0x2cfb3b[_0x4868d0(0x177)],_0x8a0fca='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON['stringify'](_0x2cfb3b);try{updateApiTimestamp();const _0x14b10f=await _0x4fd4a9[_0x4868d0(0x136)]['generateContent'](_0x8a0fca),_0x5190a6=JSON[_0x4868d0(0x1a5)](_0x14b10f['response'][_0x4868d0(0x165)]()[_0x4868d0(0x173)](/```json|```/g,'')[_0x4868d0(0x14b)]()),_0x47b0f5={'timestamp':new Date()[_0x4868d0(0x1a8)](),'eventCount':_0x1ad165,'summary':_0x5190a6[_0x4868d0(0x133)]||_0x4868d0(0x17d),'activityLevel':_0x5190a6['activityLevel']||_0x4868d0(0x17a),'systemMode':_0x4fd4a9[_0x4868d0(0x137)]};_0x4fd4a9[_0x4868d0(0x127)][_0x4868d0(0x159)](_0x47b0f5);const _0x274e0b=_0x4fd4a9[_0x4868d0(0x14d)]['ltmLtbWindowDays']||0x3c;_0x4fd4a9[_0x4868d0(0x127)][_0x4868d0(0x177)]>_0x274e0b&&_0x4fd4a9['dailyDigests'][_0x4868d0(0x186)](0x0,_0x4fd4a9[_0x4868d0(0x127)][_0x4868d0(0x177)]-_0x274e0b);await _0x4fd4a9[_0x4868d0(0x149)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x4fd4a9[_0x4868d0(0x127)]),'ack':!![]}),_0x4fd4a9['rawEventLog']=[],await _0x4fd4a9[_0x4868d0(0x149)](LTM_DP_RAW_LOG,{'val':JSON[_0x4868d0(0x148)](_0x4fd4a9[_0x4868d0(0x187)]),'ack':!![]}),await _0x4fd4a9[_0x4868d0(0x149)](LTM_DP_STATUS,{'val':_0x4868d0(0x196),'ack':!![]});const _0x4c10f6=_0x4868d0(0x18b)+_0x5190a6[_0x4868d0(0x133)]+_0x4868d0(0x12b)+_0x5190a6['activityLevel'];setup[_0x4868d0(0x19a)](_0x4fd4a9,_0x4c10f6,![],![]);if(_0x4fd4a9[_0x4868d0(0x131)]&&_0xd9c0cb)_0xd9c0cb[_0x4868d0(0x161)](_0x4fd4a9,'ANALYZE_HEALTH',{'digest':_0x47b0f5});}catch(_0x2f8293){_0x4fd4a9[_0x4868d0(0x160)][_0x4868d0(0x189)](_0x2f8293[_0x4868d0(0x198)]);}}async function runBaselineDriftAnalysis(_0x4bcba0){const _0x2bb48f=a0_0x37d470;if(!_0x4bcba0[_0x2bb48f(0x131)]||!_0x4bcba0[_0x2bb48f(0x136)])return;if(!canCallApi())return;const _0x48ba51=_0x4bcba0[_0x2bb48f(0x14d)][_0x2bb48f(0x18f)]||0xe;if(_0x4bcba0[_0x2bb48f(0x127)][_0x2bb48f(0x177)]<_0x48ba51+0x7){await _0x4bcba0[_0x2bb48f(0x149)]('LTM.driftAnalysis.baselineDrift',{'val':_0x2bb48f(0x192),'ack':!![]});return;}const _0x177256=_0x4bcba0['dailyDigests'][_0x2bb48f(0x13f)](-_0x48ba51),_0x1d1d09=_0x4bcba0[_0x2bb48f(0x127)]['slice'](0x0,_0x4bcba0['dailyDigests'][_0x2bb48f(0x177)]-_0x48ba51),_0x2c1781=_0x2bb48f(0x171)+JSON[_0x2bb48f(0x148)](_0x1d1d09)+_0x2bb48f(0x152)+JSON[_0x2bb48f(0x148)](_0x177256);try{updateApiTimestamp();const _0x4a3f2f=await _0x4bcba0['geminiModel'][_0x2bb48f(0x140)](_0x2c1781),_0x2321e9=JSON['parse'](_0x4a3f2f['response']['text']()['replace'](/```json|```/g,'')['trim']());_0x2321e9[_0x2bb48f(0x18a)]&&(await _0x4bcba0[_0x2bb48f(0x149)]('LTM.driftAnalysis.baselineDrift',{'val':_0x2321e9[_0x2bb48f(0x18a)],'ack':!![]}),await _0x4bcba0[_0x2bb48f(0x149)](_0x2bb48f(0x158),{'val':_0x2321e9[_0x2bb48f(0x156)],'ack':!![]}),await _0x4bcba0[_0x2bb48f(0x149)]('LTM.driftAnalysis.lastCheck',{'val':Date[_0x2bb48f(0x17c)](),'ack':!![]}));}catch(_0x965cd9){}}async function executeAutomationAction(_0x4d5b56){const _0x26500c=a0_0x37d470;try{const _0x5cde2e=await _0x4d5b56[_0x26500c(0x1a7)](_0x26500c(0x168)),_0x3c4eb7=await _0x4d5b56[_0x26500c(0x1a7)](_0x26500c(0x157));if(_0x5cde2e&&_0x5cde2e[_0x26500c(0x12f)]&&_0x3c4eb7){const _0x21be19=_0x5cde2e[_0x26500c(0x12f)];let _0x17b43d=_0x3c4eb7['val'];try{_0x17b43d=JSON[_0x26500c(0x1a5)](_0x17b43d);}catch(_0x5a0ae7){}_0x4d5b56['log'][_0x26500c(0x134)](_0x26500c(0x145)+_0x21be19+'\x20=\x20'+_0x17b43d),await _0x4d5b56[_0x26500c(0x16a)](_0x21be19,_0x17b43d);}else _0x4d5b56['log'][_0x26500c(0x179)](_0x26500c(0x14f));}catch(_0x2ecc4b){_0x4d5b56['log'][_0x26500c(0x189)](_0x26500c(0x175)+_0x2ecc4b[_0x26500c(0x198)]);}}async function sendMorningBriefing(_0x488993){const _0x1357ce=a0_0x37d470;if(!_0x488993[_0x1357ce(0x136)]){_0x488993['log'][_0x1357ce(0x179)](_0x1357ce(0x13a));return;}_0x488993['log']['info'](_0x1357ce(0x15e));try{updateApiTimestamp();const _0x1d651f=_0x1357ce(0x15a),_0x171ca2=await _0x488993[_0x1357ce(0x136)]['generateContent'](_0x1d651f),_0x9cca9b=_0x171ca2['response']['text']();_0x488993[_0x1357ce(0x160)][_0x1357ce(0x134)](_0x1357ce(0x1a6)+_0x9cca9b[_0x1357ce(0x177)]+_0x1357ce(0x147)),setup['sendNotification'](_0x488993,_0x1357ce(0x16b)+_0x9cca9b);}catch(_0x287c2e){_0x488993[_0x1357ce(0x160)]['error'](_0x1357ce(0x191)+_0x287c2e[_0x1357ce(0x198)]);}}module[a0_0x37d470(0x16d)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};