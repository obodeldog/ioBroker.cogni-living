const a0_0x2cd28d=a0_0x3d7f;(function(_0x3d698e,_0x25b2aa){const _0x3fc5db=a0_0x3d7f,_0x125121=_0x3d698e();while(!![]){try{const _0x3a5d35=-parseInt(_0x3fc5db(0x9a))/0x1+-parseInt(_0x3fc5db(0xbf))/0x2*(-parseInt(_0x3fc5db(0xa1))/0x3)+-parseInt(_0x3fc5db(0xb0))/0x4*(parseInt(_0x3fc5db(0xcc))/0x5)+-parseInt(_0x3fc5db(0xb4))/0x6+parseInt(_0x3fc5db(0xdf))/0x7+-parseInt(_0x3fc5db(0xe0))/0x8*(-parseInt(_0x3fc5db(0xe2))/0x9)+parseInt(_0x3fc5db(0xb7))/0xa;if(_0x3a5d35===_0x25b2aa)break;else _0x125121['push'](_0x125121['shift']());}catch(_0x2c3a34){_0x125121['push'](_0x125121['shift']());}}}(a0_0x5356,0x9cceb));const a0_0x21ff8f=(function(){let _0x40cde8=!![];return function(_0x26b773,_0x4722ae){const _0x33b2d0=_0x40cde8?function(){if(_0x4722ae){const _0x42daf8=_0x4722ae['apply'](_0x26b773,arguments);return _0x4722ae=null,_0x42daf8;}}:function(){};return _0x40cde8=![],_0x33b2d0;};}()),a0_0x436e03=a0_0x21ff8f(this,function(){const _0x113859=a0_0x3d7f;return a0_0x436e03[_0x113859(0x70)]()[_0x113859(0xd3)](_0x113859(0xf4))[_0x113859(0x70)]()[_0x113859(0x7f)](a0_0x436e03)[_0x113859(0xd3)]('(((.+)+)+)+$');});a0_0x436e03();'use strict';const {GoogleGenerativeAI}=require(a0_0x2cd28d(0x88)),setup=require(a0_0x2cd28d(0xce)),GEMINI_MODEL=a0_0x2cd28d(0xa6),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x2cd28d(0x83),LTM_DP_RAW_LOG=a0_0x2cd28d(0x7b),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':a0_0x2cd28d(0xe4),'family':a0_0x2cd28d(0xd8),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':a0_0x2cd28d(0xa9),'energy_saver':a0_0x2cd28d(0xc0)};function canCallApi(){const _0x2482f6=a0_0x2cd28d,_0x107b3f=Date[_0x2482f6(0xe7)]();return _0x107b3f-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x29e2cc){const _0x107456=a0_0x2cd28d;if(!_0x29e2cc[_0x107456(0x8a)][_0x107456(0x97)]||!_0x29e2cc[_0x107456(0x8a)][_0x107456(0x9f)])return _0x107456(0xc9);try{const _0x4861e3=_0x29e2cc[_0x107456(0x8a)][_0x107456(0x9f)];let _0x33bef1=await _0x29e2cc[_0x107456(0xde)](_0x4861e3+'.Current.Temperature');if(!_0x33bef1)_0x33bef1=await _0x29e2cc[_0x107456(0xde)](_0x4861e3+_0x107456(0xbb));let _0x576273=await _0x29e2cc[_0x107456(0xde)](_0x4861e3+_0x107456(0x72));if(!_0x576273)_0x576273=await _0x29e2cc['getForeignStateAsync'](_0x4861e3+'.forecast.current.state');let _0x5218bd=_0x107456(0x89);const _0xf45e00=await _0x29e2cc[_0x107456(0xde)](_0x4861e3+'.Current.IsNight');if(_0xf45e00)_0x5218bd=_0xf45e00[_0x107456(0x8b)]?'Nacht':'Tag';if(_0x33bef1&&_0x576273)return _0x33bef1[_0x107456(0x8b)]+'Â°C,\x20'+_0x576273[_0x107456(0x8b)]+',\x20LichtverhÃ¤ltnisse:\x20'+_0x5218bd;}catch(_0xca3ac9){}return _0x107456(0xaf);}async function consultButler(_0x20bfd8,_0x28b6cf,_0x3dc499,_0xd5138a){const _0x240bcb=a0_0x2cd28d;if(!_0x20bfd8[_0x240bcb(0x71)])return{'approved':!![],'reason':_0x240bcb(0x86)};const _0x9d6207=Date['now']();if(decisionCache[_0x28b6cf]&&_0x9d6207-decisionCache[_0x28b6cf][_0x240bcb(0xe5)]<CACHE_TTL_MS){const _0x188283=decisionCache[_0x28b6cf][_0x240bcb(0xad)];return _0x20bfd8['log'][_0x240bcb(0xa3)](_0x240bcb(0xcb)+_0x28b6cf+_0x240bcb(0xbc)+(_0x188283['approved']?'OK':'NO')+'\x20('+_0x188283[_0x240bcb(0xf0)]+')'),_0x188283;}if(!canCallApi())return _0x20bfd8['log'][_0x240bcb(0xa3)]('ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20'+_0x28b6cf+_0x240bcb(0xf1)),{'approved':!![],'reason':_0x240bcb(0xb6)};const _0x5b6c82=new Date()[_0x240bcb(0xeb)](),_0x4e2342=await getWeatherContext(_0x20bfd8),_0x4f6c54=PERSONA_MAPPING[_0x20bfd8['config']['aiPersona']||_0x240bcb(0x7d)],_0x1a5d2a=_0x240bcb(0x95)+_0x5b6c82+',\x20Wetter:\x20'+_0x4e2342+_0x240bcb(0x7e)+(_0xd5138a*0x64)[_0x240bcb(0xa7)](0x0)+_0x240bcb(0xe6)+_0x28b6cf+_0x240bcb(0x98)+_0x3dc499+_0x240bcb(0xca)+_0x4f6c54+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0xa7fc05=await _0x20bfd8[_0x240bcb(0x71)][_0x240bcb(0xd2)](_0x1a5d2a),_0x26e8e7=_0xa7fc05[_0x240bcb(0x7a)][_0x240bcb(0xa0)]()[_0x240bcb(0x73)](/```json|```/g,'')['trim'](),_0x5daa36=JSON[_0x240bcb(0xba)](_0x26e8e7);return decisionCache[_0x28b6cf]={'decision':_0x5daa36,'timestamp':_0x9d6207},_0x5daa36;}catch(_0x1df8b3){return _0x20bfd8['log'][_0x240bcb(0x8e)]('ðŸ¤–\x20Butler\x20Brain\x20Error:\x20'+_0x1df8b3['message']),decisionCache[_0x28b6cf]={'decision':{'approved':!![],'reason':_0x240bcb(0xf3)},'timestamp':_0x9d6207-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x240bcb(0xf3)};}}async function runGeminiAnalysis(_0x34378d,_0x2b10d3=''){const _0x1b6b55=a0_0x2cd28d;if(!_0x34378d['geminiModel'])return;if(!canCallApi()){_0x34378d[_0x1b6b55(0x92)]['debug'](_0x1b6b55(0x85));return;}if(_0x34378d['eventHistory'][_0x1b6b55(0x90)]===0x0)return;const _0x3e33b4=_0x34378d['eventHistory'][_0x1b6b55(0x80)](0x0,0xf),_0x17e030=_0x34378d[_0x1b6b55(0xc2)],_0x5c76b8=PERSONA_MAPPING[_0x34378d['config'][_0x1b6b55(0x9b)]||_0x1b6b55(0x7d)],_0x265901=_0x34378d[_0x1b6b55(0x8a)]['livingContext']||_0x1b6b55(0x6f);let _0x1f8b8a=_0x1b6b55(0x89);try{const _0x21533a=await _0x34378d[_0x1b6b55(0xc3)]('system.presenceWho');if(_0x21533a&&_0x21533a['val'])_0x1f8b8a=_0x21533a['val'];}catch(_0x198d2a){}let _0x428810=![];try{const _0x47e1ad=await _0x34378d[_0x1b6b55(0xc3)](_0x1b6b55(0xee));if(_0x47e1ad&&_0x47e1ad['val'])_0x428810=!![];}catch(_0x5a0720){}const _0x746a67=_0x1b6b55(0xab)+_0x5c76b8+_0x1b6b55(0xef)+_0x265901+'.\x20SYSTEM_MODE:\x20'+_0x17e030+'.\x20ANWESEND:\x20'+_0x1f8b8a+_0x1b6b55(0xc4)+JSON[_0x1b6b55(0xa5)](_0x3e33b4)+'.\x20EMERGENCY:\x20'+_0x2b10d3+_0x1b6b55(0x75);try{updateApiTimestamp();const _0x1ceff8=await _0x34378d[_0x1b6b55(0x71)]['generateContent'](_0x746a67),_0x548385=JSON[_0x1b6b55(0xba)](_0x1ceff8[_0x1b6b55(0x7a)][_0x1b6b55(0xa0)]()[_0x1b6b55(0x73)](/```json|```/g,'')['trim']());await _0x34378d[_0x1b6b55(0xc7)](_0x1b6b55(0x8c),{'val':JSON['stringify'](_0x548385),'ack':!![]});if(_0x548385[_0x1b6b55(0xa4)])await _0x34378d[_0x1b6b55(0xc7)](_0x1b6b55(0x91),{'val':_0x548385[_0x1b6b55(0xa4)],'ack':!![]});const _0x8b5ad={'timestamp':Date['now'](),'id':Date[_0x1b6b55(0xe7)]()[_0x1b6b55(0x70)](),'analysis':{'activity':{'summary':_0x548385['summary'],'isAlert':_0x548385['isAlert'],'alertReason':_0x548385['alertReason']},'comfort':{'automationProposal':_0x548385[_0x1b6b55(0x82)]}}};_0x34378d[_0x1b6b55(0xbe)][_0x1b6b55(0xe8)](_0x8b5ad);if(_0x34378d[_0x1b6b55(0xbe)][_0x1b6b55(0x90)]>0x32)_0x34378d[_0x1b6b55(0xbe)][_0x1b6b55(0xc5)]();await _0x34378d[_0x1b6b55(0xc7)](_0x1b6b55(0xd9),{'val':JSON[_0x1b6b55(0xa5)](_0x34378d[_0x1b6b55(0xbe)]),'ack':!![]});const _0x25561c=_0x548385[_0x1b6b55(0xec)]||![];_0x25561c!==_0x34378d['lastAlertState']&&(await _0x34378d['setStateAsync']('analysis.isAlert',{'val':_0x25561c,'ack':!![]}),_0x34378d[_0x1b6b55(0xcd)]=_0x25561c,_0x25561c&&(await _0x34378d['setStateAsync'](_0x1b6b55(0x76),{'val':_0x548385['alertReason'],'ack':!![]}),setup['sendNotification'](_0x34378d,_0x1b6b55(0xac)+_0x548385[_0x1b6b55(0xcf)],![],_0x548385[_0x1b6b55(0xc6)])));if(_0x548385['automationProposal']&&_0x548385['automationProposal'][_0x1b6b55(0x74)]){await _0x34378d[_0x1b6b55(0xc7)](_0x1b6b55(0x9d),{'val':!![],'ack':!![]}),await _0x34378d[_0x1b6b55(0xc7)]('analysis.automation.description',{'val':_0x548385['automationProposal'][_0x1b6b55(0x84)],'ack':!![]}),await _0x34378d[_0x1b6b55(0xc7)]('analysis.automation.targetId',{'val':_0x548385[_0x1b6b55(0x82)][_0x1b6b55(0x78)],'ack':!![]}),await _0x34378d[_0x1b6b55(0xc7)](_0x1b6b55(0x94),{'val':JSON['stringify'](_0x548385[_0x1b6b55(0x82)][_0x1b6b55(0xae)]),'ack':!![]});if(_0x428810)executeAutomationAction(_0x34378d);}}catch(_0x5a7f6b){_0x34378d[_0x1b6b55(0x92)][_0x1b6b55(0xb3)](_0x1b6b55(0xb8)+_0x5a7f6b[_0x1b6b55(0xaa)]);}}async function createDailyDigest(_0x2d7e0d,_0x980e70){const _0xf77f22=a0_0x2cd28d;if(!_0x2d7e0d['isProVersion'])return;if(!canCallApi()){await _0x2d7e0d['setStateAsync'](LTM_DP_STATUS,{'val':_0xf77f22(0xa2),'ack':!![]});return;}await _0x2d7e0d[_0xf77f22(0xc7)](LTM_DP_STATUS,{'val':_0xf77f22(0xdd),'ack':!![]});if(!_0x2d7e0d[_0xf77f22(0x71)]||_0x2d7e0d[_0xf77f22(0xe3)][_0xf77f22(0x90)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x2d7e0d[_0xf77f22(0xc7)](LTM_DP_STATUS,{'val':_0xf77f22(0x77),'ack':!![]});return;}const _0x1c1f6d=JSON['parse'](JSON[_0xf77f22(0xa5)](_0x2d7e0d[_0xf77f22(0xe3)])),_0x56e803=_0x1c1f6d['length'],_0x4fda0f='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0xf77f22(0xa5)](_0x1c1f6d);try{updateApiTimestamp();const _0x235ee8=await _0x2d7e0d[_0xf77f22(0x71)]['generateContent'](_0x4fda0f),_0x37f8ab=JSON['parse'](_0x235ee8[_0xf77f22(0x7a)][_0xf77f22(0xa0)]()['replace'](/```json|```/g,'')[_0xf77f22(0x87)]()),_0x5443a4={'timestamp':new Date()[_0xf77f22(0xed)](),'eventCount':_0x56e803,'summary':_0x37f8ab[_0xf77f22(0xa4)]||_0xf77f22(0x8d),'activityLevel':_0x37f8ab[_0xf77f22(0xdb)]||_0xf77f22(0xd7),'systemMode':_0x2d7e0d[_0xf77f22(0xc2)]};_0x2d7e0d['dailyDigests'][_0xf77f22(0xb5)](_0x5443a4);const _0x242fbb=_0x2d7e0d[_0xf77f22(0x8a)][_0xf77f22(0xb9)]||0x3c;_0x2d7e0d[_0xf77f22(0x79)][_0xf77f22(0x90)]>_0x242fbb&&_0x2d7e0d[_0xf77f22(0x79)][_0xf77f22(0xda)](0x0,_0x2d7e0d['dailyDigests'][_0xf77f22(0x90)]-_0x242fbb);await _0x2d7e0d[_0xf77f22(0xc7)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0xf77f22(0xa5)](_0x2d7e0d[_0xf77f22(0x79)]),'ack':!![]}),_0x2d7e0d[_0xf77f22(0xe3)]=[],await _0x2d7e0d['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x2d7e0d['rawEventLog']),'ack':!![]}),await _0x2d7e0d[_0xf77f22(0xc7)](LTM_DP_STATUS,{'val':'Success','ack':!![]});const _0x5c47aa=_0xf77f22(0xa8)+_0x37f8ab['summary']+'\x0aAktivitÃ¤t:\x20'+_0x37f8ab[_0xf77f22(0xdb)];setup[_0xf77f22(0x9c)](_0x2d7e0d,_0x5c47aa,![],![]);if(_0x2d7e0d[_0xf77f22(0xea)]&&_0x980e70)_0x980e70[_0xf77f22(0x7c)](_0x2d7e0d,_0xf77f22(0x8f),{'digest':_0x5443a4});}catch(_0xfe4b7){_0x2d7e0d[_0xf77f22(0x92)]['error'](_0xfe4b7[_0xf77f22(0xaa)]);}}async function runBaselineDriftAnalysis(_0x167e7c){const _0x15e4d5=a0_0x2cd28d;if(!_0x167e7c[_0x15e4d5(0xea)]||!_0x167e7c[_0x15e4d5(0x71)])return;if(!canCallApi())return;const _0xe2e99f=_0x167e7c[_0x15e4d5(0x8a)][_0x15e4d5(0xe9)]||0xe;if(_0x167e7c[_0x15e4d5(0x79)]['length']<_0xe2e99f+0x7){await _0x167e7c[_0x15e4d5(0xc7)](_0x15e4d5(0xd1),{'val':_0x15e4d5(0x99),'ack':!![]});return;}const _0x5eaf4c=_0x167e7c[_0x15e4d5(0x79)]['slice'](-_0xe2e99f),_0x229f4f=_0x167e7c[_0x15e4d5(0x79)][_0x15e4d5(0x80)](0x0,_0x167e7c[_0x15e4d5(0x79)][_0x15e4d5(0x90)]-_0xe2e99f),_0x1f5af6='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x15e4d5(0xa5)](_0x229f4f)+_0x15e4d5(0xd4)+JSON[_0x15e4d5(0xa5)](_0x5eaf4c);try{updateApiTimestamp();const _0x532a90=await _0x167e7c[_0x15e4d5(0x71)][_0x15e4d5(0xd2)](_0x1f5af6),_0x23dc21=JSON[_0x15e4d5(0xba)](_0x532a90[_0x15e4d5(0x7a)]['text']()[_0x15e4d5(0x73)](/```json|```/g,'')[_0x15e4d5(0x87)]());_0x23dc21['baselineDrift']&&(await _0x167e7c['setStateAsync']('LTM.driftAnalysis.baselineDrift',{'val':_0x23dc21[_0x15e4d5(0xbd)],'ack':!![]}),await _0x167e7c[_0x15e4d5(0xc7)](_0x15e4d5(0xdc),{'val':_0x23dc21['driftDetails'],'ack':!![]}),await _0x167e7c[_0x15e4d5(0xc7)](_0x15e4d5(0xc8),{'val':Date[_0x15e4d5(0xe7)](),'ack':!![]}));}catch(_0x10c7f1){}}function a0_0x3d7f(_0xa13117,_0x116508){const _0x45f99f=a0_0x5356();return a0_0x3d7f=function(_0x436e03,_0x21ff8f){_0x436e03=_0x436e03-0x6f;let _0x535636=_0x45f99f[_0x436e03];return _0x535636;},a0_0x3d7f(_0xa13117,_0x116508);}async function executeAutomationAction(_0x4a877d){const _0x4a2e17=a0_0x2cd28d;try{const _0x2c07c0=await _0x4a877d[_0x4a2e17(0xc3)](_0x4a2e17(0xc1)),_0x16377c=await _0x4a877d[_0x4a2e17(0xc3)](_0x4a2e17(0x94));if(_0x2c07c0&&_0x2c07c0[_0x4a2e17(0x8b)]&&_0x16377c){const _0x1d1b8c=_0x2c07c0[_0x4a2e17(0x8b)];let _0x188863=_0x16377c['val'];try{_0x188863=JSON[_0x4a2e17(0xba)](_0x188863);}catch(_0x350ef4){}_0x4a877d[_0x4a2e17(0x92)][_0x4a2e17(0x81)](_0x4a2e17(0xd6)+_0x1d1b8c+'\x20=\x20'+_0x188863),await _0x4a877d['setForeignStateAsync'](_0x1d1b8c,_0x188863);}else _0x4a877d[_0x4a2e17(0x92)][_0x4a2e17(0x8e)](_0x4a2e17(0xb2));}catch(_0xe566dd){_0x4a877d[_0x4a2e17(0x92)]['error'](_0x4a2e17(0xd0)+_0xe566dd[_0x4a2e17(0xaa)]);}}function a0_0x5356(){const _0x2554da=['toFixed','ðŸ“…\x20Daily\x20Digest:\x0a','Sicherheit\x20geht\x20vor.','message','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','âš ï¸\x20ALARM:\x20','decision','targetValue','Wetterdaten\x20nicht\x20abrufbar','4KUFSfF','ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','error','4936992OXNkkf','push','Traffic-Schutz\x20(Auto-Approved)','3339780DtseVP','Gemini\x20Error:\x20','ltmLtbWindowDays','parse','.forecast.current.temperature','\x20->\x20','baselineDrift','analysisHistory','18DOLRok','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','analysis.automation.targetId','currentSystemMode','getStateAsync','.\x20EVENTS:\x20','pop','isEmergency','setStateAsync','LTM.driftAnalysis.lastCheck','Unbekannt\x20(Kein\x20Sensor)','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','1570315gzHcJh','lastAlertState','./setup','alertReason','BUTLER\x20Execution\x20Error:\x20','LTM.driftAnalysis.baselineDrift','generateContent','search','\x0aSTB:\x20','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','normal','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','analysis.analysisHistory','splice','activityLevel','LTM.driftAnalysis.driftDetails','Started...','getForeignStateAsync','6754986YOiezM','16HQjGyB','ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20','1599561cXIWOW','rawEventLog','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','timestamp','%)\x20nach\x20\x22','now','unshift','ltmStbWindowDays','isProVersion','toLocaleTimeString','isAlert','toISOString','analysis.automation.autoApply','.\x20KONTEXT:\x20','reason','\x20Ã¼bersprungen\x20(Auto-Approved).',').\x20Sending\x20notification...','KI-Fehler\x20(Fallback)','(((.+)+)+)+$','Keine\x20Details.','toString','geminiModel','.Current.WeatherText','replace','detected','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','analysis.alertReason','Skipped\x20(No\x20AI\x20or\x20Data)','targetId','dailyDigests','response','LTM.rawEventLog','send','generic','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','constructor','slice','info','automationProposal','LTM.processingStatus','description','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','KI\x20offline\x20(Fallback)','trim','@google/generative-ai','Unbekannt','config','val','analysis.lastResult','Digest','warn','ANALYZE_HEALTH','length','analysis.activitySummary','log','ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','analysis.automation.targetValue','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','exports','useWeather','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','N/A\x20(Learning)','759605HdeVMX','aiPersona','sendNotification','analysis.automation.patternDetected','ðŸŒ…\x20Morning\x20Briefing:\x0a','weatherInstance','text','294783zyKDLe','Skipped\x20(Traffic)','debug','summary','stringify','models/gemini-flash-latest'];a0_0x5356=function(){return _0x2554da;};return a0_0x5356();}async function sendMorningBriefing(_0x2eb7e7){const _0x1e3401=a0_0x2cd28d;if(!_0x2eb7e7['geminiModel']){_0x2eb7e7['log']['warn'](_0x1e3401(0xb1));return;}_0x2eb7e7[_0x1e3401(0x92)]['info'](_0x1e3401(0x93));try{updateApiTimestamp();const _0x420953=_0x1e3401(0xd5),_0x10e708=await _0x2eb7e7['geminiModel']['generateContent'](_0x420953),_0x5c3678=_0x10e708[_0x1e3401(0x7a)][_0x1e3401(0xa0)]();_0x2eb7e7[_0x1e3401(0x92)][_0x1e3401(0x81)](_0x1e3401(0xe1)+_0x5c3678[_0x1e3401(0x90)]+_0x1e3401(0xf2)),setup[_0x1e3401(0x9c)](_0x2eb7e7,_0x1e3401(0x9e)+_0x5c3678);}catch(_0x3fdb4c){_0x2eb7e7['log'][_0x1e3401(0xb3)]('Briefing\x20Error:\x20'+_0x3fdb4c[_0x1e3401(0xaa)]);}}module[a0_0x2cd28d(0x96)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};