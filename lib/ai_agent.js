const a0_0x38ed7b=a0_0x37ca;(function(_0x2d00f,_0x2b1df5){const _0x7b9246=a0_0x37ca,_0x146d35=_0x2d00f();while(!![]){try{const _0x127510=parseInt(_0x7b9246(0x1e4))/0x1+-parseInt(_0x7b9246(0x1dd))/0x2+parseInt(_0x7b9246(0x1c9))/0x3+-parseInt(_0x7b9246(0x1c6))/0x4+-parseInt(_0x7b9246(0x1e6))/0x5*(-parseInt(_0x7b9246(0x1cf))/0x6)+parseInt(_0x7b9246(0x1af))/0x7*(-parseInt(_0x7b9246(0x1b0))/0x8)+-parseInt(_0x7b9246(0x1ba))/0x9*(parseInt(_0x7b9246(0x1f6))/0xa);if(_0x127510===_0x2b1df5)break;else _0x146d35['push'](_0x146d35['shift']());}catch(_0x17c831){_0x146d35['push'](_0x146d35['shift']());}}}(a0_0x1f0d,0x55c7c));const a0_0x4e0520=(function(){let _0x1874f3=!![];return function(_0x11c74d,_0x183b47){const _0x52bde5=_0x1874f3?function(){const _0x9c8cf8=a0_0x37ca;if(_0x183b47){const _0x420bf6=_0x183b47[_0x9c8cf8(0x18b)](_0x11c74d,arguments);return _0x183b47=null,_0x420bf6;}}:function(){};return _0x1874f3=![],_0x52bde5;};}()),a0_0x11dfc6=a0_0x4e0520(this,function(){const _0x5a1f98=a0_0x37ca;return a0_0x11dfc6[_0x5a1f98(0x19d)]()[_0x5a1f98(0x1c2)]('(((.+)+)+)+$')[_0x5a1f98(0x19d)]()[_0x5a1f98(0x1e3)](a0_0x11dfc6)['search']('(((.+)+)+)+$');});a0_0x11dfc6();'use strict';const {GoogleGenerativeAI}=require(a0_0x38ed7b(0x1f8)),setup=require(a0_0x38ed7b(0x1b9)),GEMINI_MODEL=a0_0x38ed7b(0x1ab),LTM_DP_DAILY_DIGESTS=a0_0x38ed7b(0x184),LTM_DP_STATUS=a0_0x38ed7b(0x181),LTM_DP_RAW_LOG=a0_0x38ed7b(0x1bc),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x38ed7b(0x199),'senior_aal':'PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':'Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','single_comfort':a0_0x38ed7b(0x1f7),'security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x38ed7b(0x1b4)};function a0_0x1f0d(){const _0x93da17=['trim','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','warn','Tag','debug','LTM.processingStatus','analysis.automation.targetValue','detected','LTM.dailyDigests',',\x20Wetter:\x20','¬∞C,\x20','message','KI-Fehler\x20(Fallback)','Success','ltmStbWindowDays','apply','\x20√ºbersprungen\x20(Auto-Approved).','info','config','automationProposal','targetId','toLocaleTimeString','analysis.automation.targetId','getStateAsync','analysis.alertReason','analysis.automation.patternDetected','analysis.analysisHistory','ü§ñ\x20Butler\x20Brain\x20Error:\x20','.forecast.current.state','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','stringify','.\x20ANWESEND:\x20','.forecast.current.temperature','toString','eventHistory','isProVersion','description','length','val','Nacht','alertReason','system.presenceWho','summary','log','generateContent','driftDetails','setForeignStateAsync','models/gemini-flash-latest','‚ö†Ô∏è\x20ALARM:\x20','Skipped\x20(Traffic)','push','349811auZNcS','8lNGXqW','.Current.WeatherText','LTM.driftAnalysis.driftDetails','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','.Current.IsNight','analysisHistory','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','./setup','27muBqjV','analysis.lastResult','LTM.rawEventLog','toFixed','generic','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','text','search','lastAlertState','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','LTM.driftAnalysis.baselineDrift','2171748PzgzBf','.\x20KONTEXT:\x20','.\x20SYSTEM_MODE:\x20','2102010pZGWmJ','response','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','\x0aSTB:\x20','ltmLtbWindowDays','6yHlcvP','error','\x20->\x20','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','isAlert','approved','analysis.automation.autoApply','analysis.activitySummary','baselineDrift','slice','rawEventLog','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','geminiModel','targetValue','722116hCknmd','Digest','KI\x20offline\x20(Fallback)','Unbekannt','dailyDigests','ANALYZE_HEALTH','constructor','359113bIjftV','timestamp','1356240OGOHSl','LTM.driftAnalysis.lastCheck','decision','weatherInstance','currentSystemMode','exports','üåÖ\x20Morning\x20Briefing:\x0a','replace','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','useWeather','Keine\x20Details.','Gemini\x20Error:\x20','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','getForeignStateAsync','setStateAsync','sendNotification','85690ePYEAa','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','@google/generative-ai','parse','N/A\x20(Learning)','pop','analysis.automation.description','now'];a0_0x1f0d=function(){return _0x93da17;};return a0_0x1f0d();}function canCallApi(){const _0x14ca4a=Date['now']();return _0x14ca4a-lastGlobalApiCall>MIN_API_GAP_MS;}function a0_0x37ca(_0x14c987,_0x35be16){const _0x410a14=a0_0x1f0d();return a0_0x37ca=function(_0x11dfc6,_0x4e0520){_0x11dfc6=_0x11dfc6-0x17e;let _0x1f0d96=_0x410a14[_0x11dfc6];return _0x1f0d96;},a0_0x37ca(_0x14c987,_0x35be16);}function updateApiTimestamp(){const _0x4930e7=a0_0x38ed7b;lastGlobalApiCall=Date[_0x4930e7(0x1fd)]();}async function getWeatherContext(_0x395ef2){const _0x3eac94=a0_0x38ed7b;if(!_0x395ef2[_0x3eac94(0x18e)][_0x3eac94(0x1ef)]||!_0x395ef2[_0x3eac94(0x18e)][_0x3eac94(0x1e9)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x76d467=_0x395ef2[_0x3eac94(0x18e)][_0x3eac94(0x1e9)];let _0x10442e=await _0x395ef2['getForeignStateAsync'](_0x76d467+'.Current.Temperature');if(!_0x10442e)_0x10442e=await _0x395ef2['getForeignStateAsync'](_0x76d467+_0x3eac94(0x19c));let _0x3114a5=await _0x395ef2['getForeignStateAsync'](_0x76d467+_0x3eac94(0x1b1));if(!_0x3114a5)_0x3114a5=await _0x395ef2['getForeignStateAsync'](_0x76d467+_0x3eac94(0x198));let _0x2f6582=_0x3eac94(0x1e0);const _0x29aa6b=await _0x395ef2[_0x3eac94(0x1f3)](_0x76d467+_0x3eac94(0x1b6));if(_0x29aa6b)_0x2f6582=_0x29aa6b['val']?_0x3eac94(0x1a3):_0x3eac94(0x17f);if(_0x10442e&&_0x3114a5)return _0x10442e[_0x3eac94(0x1a2)]+_0x3eac94(0x186)+_0x3114a5[_0x3eac94(0x1a2)]+',\x20Lichtverh√§ltnisse:\x20'+_0x2f6582;}catch(_0x54a9e4){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x3423d0,_0x16f428,_0x3ca508,_0x4a5f01){const _0x40a937=a0_0x38ed7b;if(!_0x3423d0['geminiModel'])return{'approved':!![],'reason':_0x40a937(0x1df)};const _0x1d72a0=Date[_0x40a937(0x1fd)]();if(decisionCache[_0x16f428]&&_0x1d72a0-decisionCache[_0x16f428][_0x40a937(0x1e5)]<CACHE_TTL_MS){const _0x17d75a=decisionCache[_0x16f428][_0x40a937(0x1e8)];return _0x3423d0['log']['debug'](_0x40a937(0x200)+_0x16f428+_0x40a937(0x1d1)+(_0x17d75a[_0x40a937(0x1d4)]?'OK':'NO')+'\x20('+_0x17d75a['reason']+')'),_0x17d75a;}if(!canCallApi())return _0x3423d0['log'][_0x40a937(0x180)](_0x40a937(0x1c0)+_0x16f428+_0x40a937(0x18c)),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x642a8=new Date()[_0x40a937(0x191)](),_0x37b9cd=await getWeatherContext(_0x3423d0),_0x4bd7ee=PERSONA_MAPPING[_0x3423d0[_0x40a937(0x18e)]['aiPersona']||_0x40a937(0x1be)],_0x1635e3=_0x40a937(0x1d2)+_0x642a8+_0x40a937(0x185)+_0x37b9cd+_0x40a937(0x1b3)+(_0x4a5f01*0x64)[_0x40a937(0x1bd)](0x0)+'%)\x20nach\x20\x22'+_0x16f428+_0x40a937(0x1ff)+_0x3ca508+_0x40a937(0x1bf)+_0x4bd7ee+_0x40a937(0x1c4);try{updateApiTimestamp();const _0x579911=await _0x3423d0['geminiModel'][_0x40a937(0x1a8)](_0x1635e3),_0x5bcf11=_0x579911[_0x40a937(0x1ca)][_0x40a937(0x1c1)]()[_0x40a937(0x1ed)](/```json|```/g,'')[_0x40a937(0x1fe)](),_0x1641ba=JSON[_0x40a937(0x1f9)](_0x5bcf11);return decisionCache[_0x16f428]={'decision':_0x1641ba,'timestamp':_0x1d72a0},_0x1641ba;}catch(_0x3a4d40){return _0x3423d0[_0x40a937(0x1a7)][_0x40a937(0x17e)](_0x40a937(0x197)+_0x3a4d40[_0x40a937(0x187)]),decisionCache[_0x16f428]={'decision':{'approved':!![],'reason':_0x40a937(0x188)},'timestamp':_0x1d72a0-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x40a937(0x188)};}}async function runGeminiAnalysis(_0x420d92,_0x50aee0=''){const _0x3bbc15=a0_0x38ed7b;if(!_0x420d92[_0x3bbc15(0x1db)])return;if(!canCallApi()){_0x420d92[_0x3bbc15(0x1a7)][_0x3bbc15(0x180)](_0x3bbc15(0x1cb));return;}if(_0x420d92[_0x3bbc15(0x19e)][_0x3bbc15(0x1a1)]===0x0)return;const _0x155a36=_0x420d92['eventHistory'][_0x3bbc15(0x1d8)](0x0,0xf),_0x90ac8c=_0x420d92[_0x3bbc15(0x1ea)],_0x4f4bea=PERSONA_MAPPING[_0x420d92[_0x3bbc15(0x18e)]['aiPersona']||_0x3bbc15(0x1be)],_0x2d20b0=_0x420d92[_0x3bbc15(0x18e)]['livingContext']||_0x3bbc15(0x1f0);let _0x5a2e77=_0x3bbc15(0x1e0);try{const _0x37f2f9=await _0x420d92[_0x3bbc15(0x193)](_0x3bbc15(0x1a5));if(_0x37f2f9&&_0x37f2f9[_0x3bbc15(0x1a2)])_0x5a2e77=_0x37f2f9['val'];}catch(_0x501a28){}let _0x38aba9=![];try{const _0x60c5c1=await _0x420d92[_0x3bbc15(0x193)](_0x3bbc15(0x1d5));if(_0x60c5c1&&_0x60c5c1[_0x3bbc15(0x1a2)])_0x38aba9=!![];}catch(_0x10dc32){}const _0x316070=_0x3bbc15(0x1da)+_0x4f4bea+_0x3bbc15(0x1c7)+_0x2d20b0+_0x3bbc15(0x1c8)+_0x90ac8c+_0x3bbc15(0x19b)+_0x5a2e77+'.\x20EVENTS:\x20'+JSON[_0x3bbc15(0x19a)](_0x155a36)+'.\x20EMERGENCY:\x20'+_0x50aee0+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x38e839=await _0x420d92[_0x3bbc15(0x1db)][_0x3bbc15(0x1a8)](_0x316070),_0x347a34=JSON[_0x3bbc15(0x1f9)](_0x38e839[_0x3bbc15(0x1ca)]['text']()['replace'](/```json|```/g,'')[_0x3bbc15(0x1fe)]());await _0x420d92[_0x3bbc15(0x1f4)](_0x3bbc15(0x1bb),{'val':JSON[_0x3bbc15(0x19a)](_0x347a34),'ack':!![]});if(_0x347a34[_0x3bbc15(0x1a6)])await _0x420d92['setStateAsync'](_0x3bbc15(0x1d6),{'val':_0x347a34[_0x3bbc15(0x1a6)],'ack':!![]});const _0x42747d={'timestamp':Date[_0x3bbc15(0x1fd)](),'id':Date[_0x3bbc15(0x1fd)]()[_0x3bbc15(0x19d)](),'analysis':{'activity':{'summary':_0x347a34['summary'],'isAlert':_0x347a34[_0x3bbc15(0x1d3)],'alertReason':_0x347a34[_0x3bbc15(0x1a4)]},'comfort':{'automationProposal':_0x347a34[_0x3bbc15(0x18f)]}}};_0x420d92[_0x3bbc15(0x1b7)]['unshift'](_0x42747d);if(_0x420d92['analysisHistory'][_0x3bbc15(0x1a1)]>0x32)_0x420d92[_0x3bbc15(0x1b7)][_0x3bbc15(0x1fb)]();await _0x420d92['setStateAsync'](_0x3bbc15(0x196),{'val':JSON['stringify'](_0x420d92[_0x3bbc15(0x1b7)]),'ack':!![]});const _0x3ce8e3=_0x347a34[_0x3bbc15(0x1d3)]||![];_0x3ce8e3!==_0x420d92['lastAlertState']&&(await _0x420d92[_0x3bbc15(0x1f4)]('analysis.isAlert',{'val':_0x3ce8e3,'ack':!![]}),_0x420d92[_0x3bbc15(0x1c3)]=_0x3ce8e3,_0x3ce8e3&&(await _0x420d92['setStateAsync'](_0x3bbc15(0x194),{'val':_0x347a34[_0x3bbc15(0x1a4)],'ack':!![]}),setup[_0x3bbc15(0x1f5)](_0x420d92,_0x3bbc15(0x1ac)+_0x347a34[_0x3bbc15(0x1a4)],![],_0x347a34['isEmergency'])));if(_0x347a34[_0x3bbc15(0x18f)]&&_0x347a34[_0x3bbc15(0x18f)][_0x3bbc15(0x183)]){await _0x420d92[_0x3bbc15(0x1f4)](_0x3bbc15(0x195),{'val':!![],'ack':!![]}),await _0x420d92[_0x3bbc15(0x1f4)](_0x3bbc15(0x1fc),{'val':_0x347a34[_0x3bbc15(0x18f)][_0x3bbc15(0x1a0)],'ack':!![]}),await _0x420d92[_0x3bbc15(0x1f4)](_0x3bbc15(0x192),{'val':_0x347a34[_0x3bbc15(0x18f)][_0x3bbc15(0x190)],'ack':!![]}),await _0x420d92[_0x3bbc15(0x1f4)](_0x3bbc15(0x182),{'val':JSON[_0x3bbc15(0x19a)](_0x347a34[_0x3bbc15(0x18f)][_0x3bbc15(0x1dc)]),'ack':!![]});if(_0x38aba9)executeAutomationAction(_0x420d92);}}catch(_0x3ab014){_0x420d92[_0x3bbc15(0x1a7)][_0x3bbc15(0x1d0)](_0x3bbc15(0x1f1)+_0x3ab014[_0x3bbc15(0x187)]);}}async function createDailyDigest(_0x4fe774,_0x31f435){const _0x44bc96=a0_0x38ed7b;if(!_0x4fe774[_0x44bc96(0x19f)])return;if(!canCallApi()){await _0x4fe774['setStateAsync'](LTM_DP_STATUS,{'val':_0x44bc96(0x1ad),'ack':!![]});return;}await _0x4fe774[_0x44bc96(0x1f4)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x4fe774[_0x44bc96(0x1db)]||_0x4fe774[_0x44bc96(0x1d9)][_0x44bc96(0x1a1)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4fe774[_0x44bc96(0x1f4)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x4575c6=JSON['parse'](JSON['stringify'](_0x4fe774[_0x44bc96(0x1d9)])),_0x3fe101=_0x4575c6[_0x44bc96(0x1a1)],_0x2ba118=_0x44bc96(0x1f2)+JSON[_0x44bc96(0x19a)](_0x4575c6);try{updateApiTimestamp();const _0x38c315=await _0x4fe774[_0x44bc96(0x1db)][_0x44bc96(0x1a8)](_0x2ba118),_0x13dcb6=JSON['parse'](_0x38c315['response'][_0x44bc96(0x1c1)]()['replace'](/```json|```/g,'')[_0x44bc96(0x1fe)]()),_0x185a07={'timestamp':new Date()['toISOString'](),'eventCount':_0x3fe101,'summary':_0x13dcb6[_0x44bc96(0x1a6)]||_0x44bc96(0x1de),'activityLevel':_0x13dcb6['activityLevel']||'normal','systemMode':_0x4fe774[_0x44bc96(0x1ea)]};_0x4fe774['dailyDigests'][_0x44bc96(0x1ae)](_0x185a07);const _0x39a1d4=_0x4fe774[_0x44bc96(0x18e)][_0x44bc96(0x1ce)]||0x3c;_0x4fe774[_0x44bc96(0x1e1)][_0x44bc96(0x1a1)]>_0x39a1d4&&_0x4fe774[_0x44bc96(0x1e1)]['splice'](0x0,_0x4fe774[_0x44bc96(0x1e1)][_0x44bc96(0x1a1)]-_0x39a1d4);await _0x4fe774['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x44bc96(0x19a)](_0x4fe774[_0x44bc96(0x1e1)]),'ack':!![]}),_0x4fe774[_0x44bc96(0x1d9)]=[],await _0x4fe774[_0x44bc96(0x1f4)](LTM_DP_RAW_LOG,{'val':JSON[_0x44bc96(0x19a)](_0x4fe774['rawEventLog']),'ack':!![]}),await _0x4fe774[_0x44bc96(0x1f4)](LTM_DP_STATUS,{'val':_0x44bc96(0x189),'ack':!![]});if(_0x4fe774[_0x44bc96(0x19f)]&&_0x31f435)_0x31f435['send'](_0x4fe774,_0x44bc96(0x1e2),{'digest':_0x185a07});}catch(_0x229370){_0x4fe774['log'][_0x44bc96(0x1d0)](_0x229370[_0x44bc96(0x187)]);}}async function runBaselineDriftAnalysis(_0x5f0519){const _0x1060d0=a0_0x38ed7b;if(!_0x5f0519[_0x1060d0(0x19f)]||!_0x5f0519[_0x1060d0(0x1db)])return;if(!canCallApi())return;const _0x3c92a8=_0x5f0519[_0x1060d0(0x18e)][_0x1060d0(0x18a)]||0xe;if(_0x5f0519[_0x1060d0(0x1e1)]['length']<_0x3c92a8+0x7){await _0x5f0519[_0x1060d0(0x1f4)](_0x1060d0(0x1c5),{'val':_0x1060d0(0x1fa),'ack':!![]});return;}const _0x4aaab1=_0x5f0519['dailyDigests'][_0x1060d0(0x1d8)](-_0x3c92a8),_0x41475b=_0x5f0519['dailyDigests'][_0x1060d0(0x1d8)](0x0,_0x5f0519[_0x1060d0(0x1e1)][_0x1060d0(0x1a1)]-_0x3c92a8),_0x7c24f3=_0x1060d0(0x1b5)+JSON[_0x1060d0(0x19a)](_0x41475b)+_0x1060d0(0x1cd)+JSON[_0x1060d0(0x19a)](_0x4aaab1);try{updateApiTimestamp();const _0xdf9b30=await _0x5f0519['geminiModel'][_0x1060d0(0x1a8)](_0x7c24f3),_0x32849f=JSON['parse'](_0xdf9b30[_0x1060d0(0x1ca)]['text']()[_0x1060d0(0x1ed)](/```json|```/g,'')['trim']());_0x32849f[_0x1060d0(0x1d7)]&&(await _0x5f0519[_0x1060d0(0x1f4)](_0x1060d0(0x1c5),{'val':_0x32849f[_0x1060d0(0x1d7)],'ack':!![]}),await _0x5f0519[_0x1060d0(0x1f4)](_0x1060d0(0x1b2),{'val':_0x32849f[_0x1060d0(0x1a9)],'ack':!![]}),await _0x5f0519[_0x1060d0(0x1f4)](_0x1060d0(0x1e7),{'val':Date[_0x1060d0(0x1fd)](),'ack':!![]}));}catch(_0xebd595){}}async function executeAutomationAction(_0x367100){const _0x517305=a0_0x38ed7b;try{const _0x148399=await _0x367100['getStateAsync'](_0x517305(0x192)),_0x34707e=await _0x367100[_0x517305(0x193)]('analysis.automation.targetValue');if(_0x148399&&_0x148399[_0x517305(0x1a2)]&&_0x34707e){const _0x2b358a=_0x148399['val'];let _0x32e1b5=_0x34707e[_0x517305(0x1a2)];try{_0x32e1b5=JSON['parse'](_0x32e1b5);}catch(_0x18dfb6){}_0x367100[_0x517305(0x1a7)][_0x517305(0x18d)](_0x517305(0x1ee)+_0x2b358a+'\x20=\x20'+_0x32e1b5),await _0x367100[_0x517305(0x1aa)](_0x2b358a,_0x32e1b5);}else _0x367100[_0x517305(0x1a7)]['warn'](_0x517305(0x1cc));}catch(_0x527052){_0x367100[_0x517305(0x1a7)][_0x517305(0x1d0)]('BUTLER\x20Execution\x20Error:\x20'+_0x527052[_0x517305(0x187)]);}}async function sendMorningBriefing(_0x446766){const _0x40edf5=a0_0x38ed7b;if(!_0x446766[_0x40edf5(0x1db)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x34e03b=_0x40edf5(0x1b8),_0x513e5e=await _0x446766['geminiModel'][_0x40edf5(0x1a8)](_0x34e03b),_0x12bdc6=_0x513e5e[_0x40edf5(0x1ca)][_0x40edf5(0x1c1)]();setup[_0x40edf5(0x1f5)](_0x446766,_0x40edf5(0x1ec)+_0x12bdc6);}catch(_0xe707e1){_0x446766['log'][_0x40edf5(0x1d0)]('Briefing\x20Error:\x20'+_0xe707e1[_0x40edf5(0x187)]);}}module[a0_0x38ed7b(0x1eb)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};