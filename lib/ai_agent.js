const a0_0x200530=a0_0x260b;(function(_0x5edd98,_0x37fc06){const _0x43ddfd=a0_0x260b,_0x592d53=_0x5edd98();while(!![]){try{const _0x4413b0=parseInt(_0x43ddfd(0x1f7))/0x1*(parseInt(_0x43ddfd(0x1c0))/0x2)+parseInt(_0x43ddfd(0x1e4))/0x3+-parseInt(_0x43ddfd(0x1ea))/0x4+-parseInt(_0x43ddfd(0x196))/0x5+-parseInt(_0x43ddfd(0x1e3))/0x6*(parseInt(_0x43ddfd(0x1bb))/0x7)+-parseInt(_0x43ddfd(0x1ff))/0x8+parseInt(_0x43ddfd(0x1aa))/0x9;if(_0x4413b0===_0x37fc06)break;else _0x592d53['push'](_0x592d53['shift']());}catch(_0x2d5875){_0x592d53['push'](_0x592d53['shift']());}}}(a0_0x45b1,0x88782));const a0_0x2b3ba4=(function(){let _0x39032f=!![];return function(_0x1bbe59,_0x4be8d7){const _0x4f69ca=_0x39032f?function(){if(_0x4be8d7){const _0x2f1200=_0x4be8d7['apply'](_0x1bbe59,arguments);return _0x4be8d7=null,_0x2f1200;}}:function(){};return _0x39032f=![],_0x4f69ca;};}()),a0_0xecda2c=a0_0x2b3ba4(this,function(){const _0xb6e425=a0_0x260b;return a0_0xecda2c[_0xb6e425(0x1f6)]()['search']('(((.+)+)+)+$')[_0xb6e425(0x1f6)]()['constructor'](a0_0xecda2c)[_0xb6e425(0x1a0)](_0xb6e425(0x205));});a0_0xecda2c();'use strict';const {GoogleGenerativeAI}=require(a0_0x200530(0x1c7)),setup=require('./setup'),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x200530(0x180),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':a0_0x200530(0x199),'family':a0_0x200530(0x211),'single_comfort':a0_0x200530(0x1d1),'security':a0_0x200530(0x17b),'energy_saver':a0_0x200530(0x189)};function canCallApi(){const _0x3b4ae3=Date['now']();return _0x3b4ae3-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x5dd306=a0_0x200530;lastGlobalApiCall=Date[_0x5dd306(0x1a9)]();}async function getWeatherContext(_0x3c26e5){const _0x2c4d17=a0_0x200530;if(!_0x3c26e5[_0x2c4d17(0x1b0)][_0x2c4d17(0x1a5)]||!_0x3c26e5[_0x2c4d17(0x1b0)][_0x2c4d17(0x195)])return _0x2c4d17(0x1f1);try{const _0x2b057d=_0x3c26e5[_0x2c4d17(0x1b0)]['weatherInstance'];let _0x6c91a6=await _0x3c26e5[_0x2c4d17(0x181)](_0x2b057d+_0x2c4d17(0x178));if(!_0x6c91a6)_0x6c91a6=await _0x3c26e5[_0x2c4d17(0x181)](_0x2b057d+_0x2c4d17(0x187));let _0x2800c5=await _0x3c26e5[_0x2c4d17(0x181)](_0x2b057d+_0x2c4d17(0x1ee));if(!_0x2800c5)_0x2800c5=await _0x3c26e5[_0x2c4d17(0x181)](_0x2b057d+_0x2c4d17(0x1cc));let _0x5bcbc8='Unbekannt';const _0x24aa51=await _0x3c26e5[_0x2c4d17(0x181)](_0x2b057d+_0x2c4d17(0x1d8));if(_0x24aa51)_0x5bcbc8=_0x24aa51[_0x2c4d17(0x1ce)]?_0x2c4d17(0x176):_0x2c4d17(0x212);if(_0x6c91a6&&_0x2800c5)return _0x6c91a6[_0x2c4d17(0x1ce)]+_0x2c4d17(0x1e0)+_0x2800c5[_0x2c4d17(0x1ce)]+',\x20Lichtverh√§ltnisse:\x20'+_0x5bcbc8;}catch(_0x429e36){}return _0x2c4d17(0x1a3);}async function consultButler(_0x4bdffd,_0x33d590,_0x1d3cdf,_0x38e1c5){const _0x436c53=a0_0x200530;if(!_0x4bdffd[_0x436c53(0x1d3)])return{'approved':!![],'reason':_0x436c53(0x1ac)};const _0x2fd8be=Date[_0x436c53(0x1a9)]();if(decisionCache[_0x33d590]&&_0x2fd8be-decisionCache[_0x33d590]['timestamp']<CACHE_TTL_MS){const _0x130c5f=decisionCache[_0x33d590][_0x436c53(0x1c9)];return _0x4bdffd[_0x436c53(0x1f3)][_0x436c53(0x1ca)](_0x436c53(0x1a2)+_0x33d590+_0x436c53(0x1f0)+(_0x130c5f[_0x436c53(0x1cb)]?'OK':'NO')+'\x20('+_0x130c5f['reason']+')'),_0x130c5f;}if(!canCallApi())return _0x4bdffd[_0x436c53(0x1f3)][_0x436c53(0x1ca)](_0x436c53(0x177)+_0x33d590+'\x20√ºbersprungen\x20(Auto-Approved).'),{'approved':!![],'reason':_0x436c53(0x1dc)};const _0x5c8f01=new Date()[_0x436c53(0x213)](),_0x127c46=await getWeatherContext(_0x4bdffd),_0x4e8095=PERSONA_MAPPING[_0x4bdffd['config'][_0x436c53(0x1e1)]||_0x436c53(0x1b6)],_0x9aab17=_0x436c53(0x203)+_0x5c8f01+',\x20Wetter:\x20'+_0x127c46+_0x436c53(0x18b)+(_0x38e1c5*0x64)[_0x436c53(0x1fb)](0x0)+_0x436c53(0x19b)+_0x33d590+_0x436c53(0x1de)+_0x1d3cdf+_0x436c53(0x183)+_0x4e8095+_0x436c53(0x1b1);try{updateApiTimestamp();const _0x1d1713=await _0x4bdffd[_0x436c53(0x1d3)][_0x436c53(0x20e)](_0x9aab17),_0x4c0256=_0x1d1713['response'][_0x436c53(0x208)]()[_0x436c53(0x1c1)](/```json|```/g,'')[_0x436c53(0x19e)](),_0x30e831=JSON[_0x436c53(0x206)](_0x4c0256);return decisionCache[_0x33d590]={'decision':_0x30e831,'timestamp':_0x2fd8be},_0x30e831;}catch(_0x182ede){return _0x4bdffd['log'][_0x436c53(0x17f)]('ü§ñ\x20Butler\x20Brain\x20Error:\x20'+_0x182ede['message']),decisionCache[_0x33d590]={'decision':{'approved':!![],'reason':_0x436c53(0x19c)},'timestamp':_0x2fd8be-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x436c53(0x19c)};}}async function runGeminiAnalysis(_0xf1d45b,_0x37225e=''){const _0x1f508f=a0_0x200530;if(!_0xf1d45b[_0x1f508f(0x1d3)])return;if(!canCallApi()){_0xf1d45b[_0x1f508f(0x1f3)]['debug'](_0x1f508f(0x20a));return;}if(_0xf1d45b[_0x1f508f(0x197)]['length']===0x0)return;const _0x25ddf1=_0xf1d45b[_0x1f508f(0x197)]['slice'](0x0,0xf),_0x125f7c=_0xf1d45b['currentSystemMode'],_0x347d30=PERSONA_MAPPING[_0xf1d45b['config']['aiPersona']||_0x1f508f(0x1b6)],_0x73f442=_0xf1d45b[_0x1f508f(0x1b0)][_0x1f508f(0x190)]||_0x1f508f(0x19a);let _0x50bd7b='Unbekannt';try{const _0x2afc79=await _0xf1d45b[_0x1f508f(0x1d0)](_0x1f508f(0x186));if(_0x2afc79&&_0x2afc79['val'])_0x50bd7b=_0x2afc79['val'];}catch(_0x211ec6){}let _0x2cdcdd=![];try{const _0x51f332=await _0xf1d45b[_0x1f508f(0x1d0)](_0x1f508f(0x1b4));if(_0x51f332&&_0x51f332[_0x1f508f(0x1ce)])_0x2cdcdd=!![];}catch(_0x160a71){}const _0x581609=_0x1f508f(0x1fd)+_0x347d30+'.\x20KONTEXT:\x20'+_0x73f442+_0x1f508f(0x20f)+_0x125f7c+'.\x20ANWESEND:\x20'+_0x50bd7b+_0x1f508f(0x1d6)+JSON[_0x1f508f(0x1f4)](_0x25ddf1)+_0x1f508f(0x1c5)+_0x37225e+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x5aa7ed=await _0xf1d45b['geminiModel'][_0x1f508f(0x20e)](_0x581609),_0x57958f=JSON[_0x1f508f(0x206)](_0x5aa7ed[_0x1f508f(0x1d7)][_0x1f508f(0x208)]()[_0x1f508f(0x1c1)](/```json|```/g,'')[_0x1f508f(0x19e)]());await _0xf1d45b[_0x1f508f(0x1f2)](_0x1f508f(0x184),{'val':JSON[_0x1f508f(0x1f4)](_0x57958f),'ack':!![]});if(_0x57958f[_0x1f508f(0x182)])await _0xf1d45b[_0x1f508f(0x1f2)](_0x1f508f(0x1f9),{'val':_0x57958f[_0x1f508f(0x182)],'ack':!![]});const _0x3485ce={'timestamp':Date[_0x1f508f(0x1a9)](),'id':Date[_0x1f508f(0x1a9)]()[_0x1f508f(0x1f6)](),'analysis':{'activity':{'summary':_0x57958f[_0x1f508f(0x182)],'isAlert':_0x57958f[_0x1f508f(0x209)],'alertReason':_0x57958f[_0x1f508f(0x1db)]},'comfort':{'automationProposal':_0x57958f[_0x1f508f(0x1b2)]}}};_0xf1d45b[_0x1f508f(0x1c3)][_0x1f508f(0x18e)](_0x3485ce);if(_0xf1d45b['analysisHistory'][_0x1f508f(0x1ba)]>0x32)_0xf1d45b['analysisHistory'][_0x1f508f(0x1cf)]();await _0xf1d45b[_0x1f508f(0x1f2)]('analysis.analysisHistory',{'val':JSON[_0x1f508f(0x1f4)](_0xf1d45b['analysisHistory']),'ack':!![]});const _0x190081=_0x57958f['isAlert']||![];_0x190081!==_0xf1d45b[_0x1f508f(0x1af)]&&(await _0xf1d45b[_0x1f508f(0x1f2)](_0x1f508f(0x1ed),{'val':_0x190081,'ack':!![]}),_0xf1d45b[_0x1f508f(0x1af)]=_0x190081,_0x190081&&(await _0xf1d45b['setStateAsync'](_0x1f508f(0x20d),{'val':_0x57958f['alertReason'],'ack':!![]}),setup[_0x1f508f(0x1e9)](_0xf1d45b,'‚ö†Ô∏è\x20ALARM:\x20'+_0x57958f[_0x1f508f(0x1db)],![],_0x57958f[_0x1f508f(0x1ad)])));if(_0x57958f[_0x1f508f(0x1b2)]&&_0x57958f[_0x1f508f(0x1b2)][_0x1f508f(0x17d)]){await _0xf1d45b[_0x1f508f(0x1f2)](_0x1f508f(0x20b),{'val':!![],'ack':!![]}),await _0xf1d45b['setStateAsync'](_0x1f508f(0x1ec),{'val':_0x57958f[_0x1f508f(0x1b2)][_0x1f508f(0x1e8)],'ack':!![]}),await _0xf1d45b[_0x1f508f(0x1f2)](_0x1f508f(0x1e7),{'val':_0x57958f[_0x1f508f(0x1b2)][_0x1f508f(0x1d9)],'ack':!![]}),await _0xf1d45b[_0x1f508f(0x1f2)]('analysis.automation.targetValue',{'val':JSON[_0x1f508f(0x1f4)](_0x57958f[_0x1f508f(0x1b2)][_0x1f508f(0x1f8)]),'ack':!![]});if(_0x2cdcdd)executeAutomationAction(_0xf1d45b);}}catch(_0x269088){_0xf1d45b[_0x1f508f(0x1f3)][_0x1f508f(0x1e6)](_0x1f508f(0x1c8)+_0x269088[_0x1f508f(0x193)]);}}async function createDailyDigest(_0x13379d,_0x2b1ac4){const _0x3351a0=a0_0x200530;if(!_0x13379d['isProVersion'])return;if(!canCallApi()){await _0x13379d[_0x3351a0(0x1f2)](LTM_DP_STATUS,{'val':_0x3351a0(0x175),'ack':!![]});return;}await _0x13379d['setStateAsync'](LTM_DP_STATUS,{'val':_0x3351a0(0x1a6),'ack':!![]});if(!_0x13379d[_0x3351a0(0x1d3)]||_0x13379d[_0x3351a0(0x207)][_0x3351a0(0x1ba)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x13379d[_0x3351a0(0x1f2)](LTM_DP_STATUS,{'val':_0x3351a0(0x1df),'ack':!![]});return;}const _0x266af0=JSON[_0x3351a0(0x206)](JSON[_0x3351a0(0x1f4)](_0x13379d[_0x3351a0(0x207)])),_0xbc121e=_0x266af0[_0x3351a0(0x1ba)],_0x596129=_0x3351a0(0x1b3)+JSON[_0x3351a0(0x1f4)](_0x266af0);try{updateApiTimestamp();const _0x5ea40c=await _0x13379d['geminiModel']['generateContent'](_0x596129),_0x1a96c0=JSON['parse'](_0x5ea40c[_0x3351a0(0x1d7)][_0x3351a0(0x208)]()[_0x3351a0(0x1c1)](/```json|```/g,'')[_0x3351a0(0x19e)]()),_0x26d0a4={'timestamp':new Date()[_0x3351a0(0x185)](),'eventCount':_0xbc121e,'summary':_0x1a96c0[_0x3351a0(0x182)]||_0x3351a0(0x1ae),'activityLevel':_0x1a96c0[_0x3351a0(0x1d2)]||_0x3351a0(0x1ef),'systemMode':_0x13379d['currentSystemMode']};_0x13379d[_0x3351a0(0x1e2)][_0x3351a0(0x1fa)](_0x26d0a4);const _0x3f45b8=_0x13379d[_0x3351a0(0x1b0)][_0x3351a0(0x19f)]||0x3c;_0x13379d[_0x3351a0(0x1e2)][_0x3351a0(0x1ba)]>_0x3f45b8&&_0x13379d[_0x3351a0(0x1e2)][_0x3351a0(0x188)](0x0,_0x13379d[_0x3351a0(0x1e2)][_0x3351a0(0x1ba)]-_0x3f45b8);await _0x13379d[_0x3351a0(0x1f2)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x13379d[_0x3351a0(0x1e2)]),'ack':!![]}),_0x13379d[_0x3351a0(0x207)]=[],await _0x13379d[_0x3351a0(0x1f2)](LTM_DP_RAW_LOG,{'val':JSON[_0x3351a0(0x1f4)](_0x13379d['rawEventLog']),'ack':!![]}),await _0x13379d[_0x3351a0(0x1f2)](LTM_DP_STATUS,{'val':_0x3351a0(0x204),'ack':!![]});const _0x5525a5=_0x3351a0(0x1eb)+_0x1a96c0[_0x3351a0(0x182)]+_0x3351a0(0x192)+_0x1a96c0['activityLevel'];setup[_0x3351a0(0x1e9)](_0x13379d,_0x5525a5,![],![]);if(_0x13379d[_0x3351a0(0x17c)]&&_0x2b1ac4)_0x2b1ac4['send'](_0x13379d,_0x3351a0(0x1b5),{'digest':_0x26d0a4});}catch(_0x26ad43){_0x13379d[_0x3351a0(0x1f3)][_0x3351a0(0x1e6)](_0x26ad43['message']);}}function a0_0x260b(_0x39afc0,_0x46ab1d){const _0x3cb16e=a0_0x45b1();return a0_0x260b=function(_0xecda2c,_0x2b3ba4){_0xecda2c=_0xecda2c-0x175;let _0x45b1f6=_0x3cb16e[_0xecda2c];return _0x45b1f6;},a0_0x260b(_0x39afc0,_0x46ab1d);}async function runBaselineDriftAnalysis(_0x560570){const _0x5455dd=a0_0x200530;if(!_0x560570[_0x5455dd(0x17c)]||!_0x560570['geminiModel'])return;if(!canCallApi())return;const _0x5f3ce9=_0x560570[_0x5455dd(0x1b0)][_0x5455dd(0x1dd)]||0xe;if(_0x560570[_0x5455dd(0x1e2)][_0x5455dd(0x1ba)]<_0x5f3ce9+0x7){await _0x560570[_0x5455dd(0x1f2)]('LTM.driftAnalysis.baselineDrift',{'val':_0x5455dd(0x201),'ack':!![]});return;}const _0xf0e47e=_0x560570[_0x5455dd(0x1e2)][_0x5455dd(0x1bd)](-_0x5f3ce9),_0x25c907=_0x560570['dailyDigests']['slice'](0x0,_0x560570[_0x5455dd(0x1e2)][_0x5455dd(0x1ba)]-_0x5f3ce9),_0x242c31=_0x5455dd(0x1bc)+JSON[_0x5455dd(0x1f4)](_0x25c907)+'\x0aSTB:\x20'+JSON[_0x5455dd(0x1f4)](_0xf0e47e);try{updateApiTimestamp();const _0x3d783e=await _0x560570[_0x5455dd(0x1d3)]['generateContent'](_0x242c31),_0x46461b=JSON[_0x5455dd(0x206)](_0x3d783e[_0x5455dd(0x1d7)][_0x5455dd(0x208)]()['replace'](/```json|```/g,'')['trim']());_0x46461b[_0x5455dd(0x17a)]&&(await _0x560570[_0x5455dd(0x1f2)](_0x5455dd(0x18f),{'val':_0x46461b[_0x5455dd(0x17a)],'ack':!![]}),await _0x560570[_0x5455dd(0x1f2)]('LTM.driftAnalysis.driftDetails',{'val':_0x46461b[_0x5455dd(0x1f5)],'ack':!![]}),await _0x560570[_0x5455dd(0x1f2)](_0x5455dd(0x1fc),{'val':Date['now'](),'ack':!![]}));}catch(_0x1a3fc1){}}async function executeAutomationAction(_0x9a1817){const _0x37c3d9=a0_0x200530;try{const _0xf07e4b=await _0x9a1817[_0x37c3d9(0x1d0)]('analysis.automation.targetId'),_0xd72dd=await _0x9a1817['getStateAsync'](_0x37c3d9(0x1be));if(_0xf07e4b&&_0xf07e4b['val']&&_0xd72dd){const _0x3d5e23=_0xf07e4b[_0x37c3d9(0x1ce)];let _0x263031=_0xd72dd[_0x37c3d9(0x1ce)];try{_0x263031=JSON[_0x37c3d9(0x206)](_0x263031);}catch(_0x17f611){}_0x9a1817[_0x37c3d9(0x1f3)][_0x37c3d9(0x1c4)](_0x37c3d9(0x1a4)+_0x3d5e23+_0x37c3d9(0x18a)+_0x263031),await _0x9a1817[_0x37c3d9(0x1da)](_0x3d5e23,_0x263031);}else _0x9a1817[_0x37c3d9(0x1f3)]['warn']('ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x3cd4b1){_0x9a1817['log'][_0x37c3d9(0x1e6)](_0x37c3d9(0x210)+_0x3cd4b1[_0x37c3d9(0x193)]);}}async function sendMorningBriefing(_0x254d5f){const _0x11c1db=a0_0x200530;if(!_0x254d5f['geminiModel']){_0x254d5f['log']['warn']('ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.');return;}_0x254d5f[_0x11c1db(0x1f3)][_0x11c1db(0x1c4)](_0x11c1db(0x1b9));try{updateApiTimestamp();const _0x43924c=_0x11c1db(0x194),_0x2e5704=await _0x254d5f[_0x11c1db(0x1d3)][_0x11c1db(0x20e)](_0x43924c),_0x5a240a=_0x2e5704[_0x11c1db(0x1d7)][_0x11c1db(0x208)]();_0x254d5f[_0x11c1db(0x1f3)][_0x11c1db(0x1c4)](_0x11c1db(0x1d5)+_0x5a240a[_0x11c1db(0x1ba)]+').\x20Sending\x20notification...'),setup[_0x11c1db(0x1e9)](_0x254d5f,_0x11c1db(0x20c)+_0x5a240a);}catch(_0x29a091){_0x254d5f[_0x11c1db(0x1f3)]['error'](_0x11c1db(0x1b7)+_0x29a091[_0x11c1db(0x193)]);}}async function generateHealthReport(_0x43657c,_0x48f32b){const _0x2c74e6=a0_0x200530;if(!_0x43657c[_0x2c74e6(0x1d3)])return;const _0x44e86a=Date['now']();_0x44e86a-lastGlobalApiCall<0xbb8&&(_0x43657c[_0x2c74e6(0x1f3)][_0x2c74e6(0x1ca)]('ü§ñ\x20API\x20Cooldown.\x20Waiting\x202s...'),await new Promise(_0x258079=>setTimeout(_0x258079,0x7d0)));const _0x54a8e6=new Date();let _0x58735c=0x0,_0x5af701=_0x54a8e6[_0x2c74e6(0x1b8)](),_0x513ffa='';if(_0x48f32b===_0x2c74e6(0x1ab)){const _0x472a3b=new Date(_0x54a8e6);_0x472a3b['setDate'](_0x472a3b[_0x2c74e6(0x191)]()-0x1),_0x472a3b[_0x2c74e6(0x18d)](0x16,0x0,0x0,0x0),_0x58735c=_0x472a3b[_0x2c74e6(0x1b8)]();const _0x3d6919=new Date(_0x54a8e6);_0x3d6919[_0x2c74e6(0x18d)](0x8,0x0,0x0,0x0),_0x5af701=_0x3d6919['getTime'](),_0x513ffa=_0x2c74e6(0x19d);}else{const _0x42f70d=new Date(_0x54a8e6);_0x42f70d[_0x2c74e6(0x18d)](0x8,0x0,0x0,0x0),_0x58735c=_0x42f70d[_0x2c74e6(0x1b8)](),_0x513ffa=_0x2c74e6(0x1bf);}const _0x417a86=_0x43657c[_0x2c74e6(0x197)]['filter'](_0x4fc11b=>_0x4fc11b[_0x2c74e6(0x200)]>=_0x58735c&&_0x4fc11b[_0x2c74e6(0x200)]<=_0x5af701);if(_0x417a86['length']===0x0){const _0xbbde33=_0x48f32b==='NIGHT'?_0x2c74e6(0x1a7):_0x2c74e6(0x18c),_0x41df36=_0x48f32b==='NIGHT'?_0x2c74e6(0x1fe):_0x2c74e6(0x1d4);await _0x43657c[_0x2c74e6(0x1f2)](_0x41df36,{'val':_0xbbde33,'ack':!![]});return;}const _0x29759f=_0x417a86[_0x2c74e6(0x198)](_0x44b737=>new Date(_0x44b737[_0x2c74e6(0x200)])[_0x2c74e6(0x213)]([],{'hour':'2-digit','minute':'2-digit'})+'\x20'+_0x44b737[_0x2c74e6(0x1a1)]+'\x20('+_0x44b737['value']+')')[_0x2c74e6(0x179)]('\x0a'),_0xfefb42=_0x2c74e6(0x17e)+_0x513ffa+_0x2c74e6(0x202)+_0x29759f+_0x2c74e6(0x1c6);try{updateApiTimestamp();const _0x518994=await _0x43657c[_0x2c74e6(0x1d3)][_0x2c74e6(0x20e)](_0xfefb42),_0x1bad52=_0x518994[_0x2c74e6(0x1d7)]['text'](),_0x140c68=_0x48f32b===_0x2c74e6(0x1ab)?_0x2c74e6(0x1fe):_0x2c74e6(0x1d4);await _0x43657c[_0x2c74e6(0x1f2)](_0x140c68,{'val':_0x1bad52,'ack':!![]}),_0x43657c[_0x2c74e6(0x1f3)][_0x2c74e6(0x1c4)](_0x2c74e6(0x1a8)+_0x48f32b+_0x2c74e6(0x1e5));}catch(_0x5d343c){_0x43657c[_0x2c74e6(0x1f3)][_0x2c74e6(0x1e6)](_0x2c74e6(0x1cd)+_0x5d343c[_0x2c74e6(0x193)]);}}module[a0_0x200530(0x1c2)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler,'generateHealthReport':generateHealthReport};function a0_0x45b1(){const _0xe47f89=['Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','activityLevel','geminiModel','analysis.health.geminiDay','üåÖ\x20Briefing\x20generated\x20(Length:\x20','.\x20EVENTS:\x20','response','.Current.IsNight','targetId','setForeignStateAsync','alertReason','Traffic-Schutz\x20(Auto-Approved)','ltmStbWindowDays','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','Skipped\x20(No\x20AI\x20or\x20Data)','¬∞C,\x20','aiPersona','dailyDigests','271374YCRVyG','1414317zfVwHY',')\x20generated.','error','analysis.automation.targetId','description','sendNotification','389532nmxFpY','üìÖ\x20Daily\x20Digest:\x0a','analysis.automation.description','analysis.isAlert','.Current.WeatherText','normal','\x20->\x20','Unbekannt\x20(Kein\x20Sensor)','setStateAsync','log','stringify','driftDetails','toString','1rAXFsh','targetValue','analysis.activitySummary','push','toFixed','LTM.driftAnalysis.lastCheck','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','analysis.health.geminiNight','6986024aOPpbI','timestamp','N/A\x20(Learning)','\x0a\x20\x20\x20\x20EVENTS:\x0a','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','Success','(((.+)+)+)+$','parse','rawEventLog','text','isAlert','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','analysis.automation.patternDetected','üåÖ\x20Morning\x20Briefing:\x0a','analysis.alertReason','generateContent','.\x20SYSTEM_MODE:\x20','BUTLER\x20Execution\x20Error:\x20','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','Tag','toLocaleTimeString','Skipped\x20(Traffic)','Nacht','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','.Current.Temperature','join','baselineDrift','Sicherheit\x20geht\x20vor.','isProVersion','detected','\x0a\x20\x20\x20\x20ROLLE:\x20Medizinischer\x20Assistent\x20f√ºr\x20AAL\x20(Ambient\x20Assisted\x20Living).\x0a\x20\x20\x20\x20AUFGABE:\x20','warn','LTM.dailyDigests','getForeignStateAsync','summary','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','analysis.lastResult','toISOString','system.presenceWho','.forecast.current.temperature','splice','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','\x20=\x20','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','Bisher\x20keine\x20Aktivit√§t\x20seit\x2008:00\x20Uhr\x20verzeichnet.','setHours','unshift','LTM.driftAnalysis.baselineDrift','livingContext','getDate','\x0aAktivit√§t:\x20','message','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','weatherInstance','736235jTbXsS','eventHistory','map','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','Keine\x20Details.','%)\x20nach\x20\x22','KI-Fehler\x20(Fallback)','Analysiere\x20diese\x20Events\x20der\x20NACHT\x20(22:00-08:00).\x20War\x20der\x20Schlaf\x20ruhig?\x20Gab\x20es\x20Badg√§nge?\x20Antwort\x20kurz\x20f√ºr\x20den\x20besorgten\x20Sohn\x20(max\x202\x20S√§tze).','trim','ltmLtbWindowDays','search','name','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','Wetterdaten\x20nicht\x20abrufbar','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','useWeather','Started...','Keine\x20Daten\x20f√ºr\x20die\x20Nacht\x20aufgezeichnet\x20(Sensoren\x20ruhig).','ü§ñ\x20Health\x20Report\x20(','now','9765909ngeGUL','NIGHT','KI\x20offline\x20(Fallback)','isEmergency','Digest','lastAlertState','config','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','automationProposal','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','analysis.automation.autoApply','ANALYZE_HEALTH','generic','Briefing\x20Error:\x20','getTime','üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','length','119iMkzGj','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','slice','analysis.automation.targetValue','Analysiere\x20diese\x20Events\x20des\x20TAGES\x20(08:00-Jetzt).\x20Aktivit√§t?\x20Mahlzeiten?\x20Haust√ºr?\x20Antwort\x20kurz\x20f√ºr\x20den\x20besorgten\x20Sohn\x20(max\x202\x20S√§tze).','1778428YMOJxH','replace','exports','analysisHistory','info','.\x20EMERGENCY:\x20','\x0a\x20\x20\x20\x20ANTWORT-STIL:\x20Sachlich,\x20beruhigend,\x20pr√§zise.\x20Keine\x20Floskeln.\x0a\x20\x20\x20\x20','@google/generative-ai','Gemini\x20Error:\x20','decision','debug','approved','.forecast.current.state','Health\x20Report\x20Error:\x20','val','pop','getStateAsync'];a0_0x45b1=function(){return _0xe47f89;};return a0_0x45b1();}