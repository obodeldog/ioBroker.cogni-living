const a0_0x304f64=a0_0x4035;(function(_0x3ddcb3,_0x599c31){const _0x20ab01=a0_0x4035,_0xb5dd32=_0x3ddcb3();while(!![]){try{const _0x5c7950=-parseInt(_0x20ab01(0x1ae))/0x1+-parseInt(_0x20ab01(0x1db))/0x2*(parseInt(_0x20ab01(0x1f9))/0x3)+parseInt(_0x20ab01(0x1d7))/0x4+parseInt(_0x20ab01(0x1a7))/0x5*(-parseInt(_0x20ab01(0x19a))/0x6)+parseInt(_0x20ab01(0x1ef))/0x7+-parseInt(_0x20ab01(0x192))/0x8+parseInt(_0x20ab01(0x1d9))/0x9;if(_0x5c7950===_0x599c31)break;else _0xb5dd32['push'](_0xb5dd32['shift']());}catch(_0x1ba60d){_0xb5dd32['push'](_0xb5dd32['shift']());}}}(a0_0x4f9b,0x45177));const a0_0x387928=(function(){let _0x18f89e=!![];return function(_0x59bc88,_0x55bd0a){const _0x2d6842=_0x18f89e?function(){const _0x9521df=a0_0x4035;if(_0x55bd0a){const _0x5101f9=_0x55bd0a[_0x9521df(0x199)](_0x59bc88,arguments);return _0x55bd0a=null,_0x5101f9;}}:function(){};return _0x18f89e=![],_0x2d6842;};}()),a0_0x21a3a5=a0_0x387928(this,function(){const _0xaa2188=a0_0x4035;return a0_0x21a3a5[_0xaa2188(0x1df)]()[_0xaa2188(0x203)](_0xaa2188(0x1bd))[_0xaa2188(0x1df)]()['constructor'](a0_0x21a3a5)[_0xaa2188(0x203)]('(((.+)+)+)+$');});a0_0x21a3a5();function a0_0x4035(_0x5bb6bf,_0x5d8a10){const _0x3fb0a4=a0_0x4f9b();return a0_0x4035=function(_0x21a3a5,_0x387928){_0x21a3a5=_0x21a3a5-0x18b;let _0x4f9bcb=_0x3fb0a4[_0x21a3a5];return _0x4f9bcb;},a0_0x4035(_0x5bb6bf,_0x5d8a10);}'use strict';const {GoogleGenerativeAI}=require(a0_0x304f64(0x197)),setup=require(a0_0x304f64(0x1a8)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x304f64(0x1e3),LTM_DP_STATUS=a0_0x304f64(0x1e1),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x304f64(0x195),'senior_aal':a0_0x304f64(0x19f),'family':a0_0x304f64(0x1d1),'single_comfort':a0_0x304f64(0x1fb),'security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x304f64(0x196)};function canCallApi(){const _0x28d03a=a0_0x304f64,_0x3f37b2=Date[_0x28d03a(0x1aa)]();return _0x3f37b2-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x31d7ba=a0_0x304f64;lastGlobalApiCall=Date[_0x31d7ba(0x1aa)]();}async function getWeatherContext(_0x2c3fe9){const _0x11d605=a0_0x304f64;if(!_0x2c3fe9[_0x11d605(0x204)][_0x11d605(0x1d5)]||!_0x2c3fe9['config'][_0x11d605(0x1dc)])return _0x11d605(0x1b4);try{const _0x3a230b=_0x2c3fe9[_0x11d605(0x204)]['weatherInstance'];let _0x571770=await _0x2c3fe9[_0x11d605(0x1f3)](_0x3a230b+'.Current.Temperature');if(!_0x571770)_0x571770=await _0x2c3fe9[_0x11d605(0x1f3)](_0x3a230b+_0x11d605(0x19b));let _0x1d8af0=await _0x2c3fe9['getForeignStateAsync'](_0x3a230b+_0x11d605(0x1eb));if(!_0x1d8af0)_0x1d8af0=await _0x2c3fe9[_0x11d605(0x1f3)](_0x3a230b+_0x11d605(0x200));let _0x365da0=_0x11d605(0x1a3);const _0x37e59d=await _0x2c3fe9[_0x11d605(0x1f3)](_0x3a230b+_0x11d605(0x201));if(_0x37e59d)_0x365da0=_0x37e59d[_0x11d605(0x18b)]?_0x11d605(0x1d4):_0x11d605(0x198);if(_0x571770&&_0x1d8af0)return _0x571770[_0x11d605(0x18b)]+'¬∞C,\x20'+_0x1d8af0[_0x11d605(0x18b)]+_0x11d605(0x1e2)+_0x365da0;}catch(_0x42c7d3){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x18ba0b,_0x1210bc,_0x330ad8,_0x37d9be){const _0x353e3a=a0_0x304f64;if(!_0x18ba0b[_0x353e3a(0x1bf)])return{'approved':!![],'reason':_0x353e3a(0x1f5)};const _0x3fd9a5=Date['now']();if(decisionCache[_0x1210bc]&&_0x3fd9a5-decisionCache[_0x1210bc][_0x353e3a(0x1ff)]<CACHE_TTL_MS){const _0x34c44a=decisionCache[_0x1210bc][_0x353e3a(0x1ea)];return _0x18ba0b['log'][_0x353e3a(0x1b3)]('ü§ñ\x20Butler\x20Cache\x20Hit:\x20'+_0x1210bc+'\x20->\x20'+(_0x34c44a[_0x353e3a(0x1b9)]?'OK':'NO')+'\x20('+_0x34c44a[_0x353e3a(0x1a4)]+')'),_0x34c44a;}if(!canCallApi())return _0x18ba0b[_0x353e3a(0x1a6)][_0x353e3a(0x1b3)](_0x353e3a(0x206)+_0x1210bc+_0x353e3a(0x20b)),{'approved':!![],'reason':_0x353e3a(0x1b6)};const _0x43ad77=new Date()[_0x353e3a(0x1f8)](),_0x58c373=await getWeatherContext(_0x18ba0b),_0x1b239a=PERSONA_MAPPING[_0x18ba0b[_0x353e3a(0x204)][_0x353e3a(0x1e6)]||'generic'],_0x5139f8=_0x353e3a(0x1d0)+_0x43ad77+_0x353e3a(0x1c8)+_0x58c373+_0x353e3a(0x1f4)+(_0x37d9be*0x64)[_0x353e3a(0x202)](0x0)+'%)\x20nach\x20\x22'+_0x1210bc+'\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22'+_0x330ad8+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x1b239a+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x125512=await _0x18ba0b[_0x353e3a(0x1bf)][_0x353e3a(0x1e0)](_0x5139f8),_0x12b8d7=_0x125512[_0x353e3a(0x1b8)][_0x353e3a(0x1b2)]()[_0x353e3a(0x1d2)](/```json|```/g,'')['trim'](),_0x1b15af=JSON['parse'](_0x12b8d7);return decisionCache[_0x1210bc]={'decision':_0x1b15af,'timestamp':_0x3fd9a5},_0x1b15af;}catch(_0x594be6){return _0x18ba0b['log']['warn'](_0x353e3a(0x1fd)+_0x594be6[_0x353e3a(0x1fa)]),decisionCache[_0x1210bc]={'decision':{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'},'timestamp':_0x3fd9a5-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x353e3a(0x1dd)};}}function a0_0x4f9b(){const _0x402ed7=['text','debug','Unbekannt\x20(Kein\x20Sensor)','summary','Traffic-Schutz\x20(Auto-Approved)','.\x20EVENTS:\x20','response','approved','\x20=\x20','pop','getStateAsync','(((.+)+)+)+$','isEmergency','geminiModel','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','eventHistory','.\x20ANWESEND:\x20','slice','warn','stringify','analysis.analysisHistory','parse',',\x20Wetter:\x20','ANALYZE_HEALTH','analysisHistory','send','LTM.driftAnalysis.lastCheck','system.presenceWho','LTM.driftAnalysis.driftDetails','rawEventLog','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','replace','length','Nacht','useWeather','analysis.isAlert','1058792RPtyZX','Skipped\x20(Traffic)','12635460ySDolW','Keine\x20Details.','4wbwRBv','weatherInstance','KI-Fehler\x20(Fallback)','Started...','toString','generateContent','LTM.processingStatus',',\x20Lichtverh√§ltnisse:\x20','LTM.dailyDigests','info','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','aiPersona','isProVersion','BUTLER\x20Execution\x20Error:\x20','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','decision','.Current.WeatherText','dailyDigests','analysis.automation.targetId','push','745885YCRYfE','isAlert','unshift','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','getForeignStateAsync','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','KI\x20offline\x20(Fallback)','error','generic','toLocaleTimeString','750255UxWHJn','message','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','analysis.activitySummary','ü§ñ\x20Butler\x20Brain\x20Error:\x20','livingContext','timestamp','.forecast.current.state','.Current.IsNight','toFixed','search','config','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','automationProposal','toISOString','normal','driftDetails','\x20√ºbersprungen\x20(Auto-Approved).','baselineDrift','analysis.automation.autoApply','val','analysis.automation.targetValue','detected','.\x20SYSTEM_MODE:\x20','Success','description','exports','3947888DUXCFb','targetValue','sendNotification','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','@google/generative-ai','Tag','apply','18zRaIVP','.forecast.current.temperature','Gemini\x20Error:\x20','trim','currentSystemMode','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','\x0aSTB:\x20','setStateAsync','analysis.automation.description','Unbekannt','reason','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','log','116430sNjKXd','./setup','lastAlertState','now','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','üåÖ\x20Morning\x20Briefing:\x0a','N/A\x20(Learning)','428680eXmkwI','.\x20KONTEXT:\x20','LTM.driftAnalysis.baselineDrift','alertReason'];a0_0x4f9b=function(){return _0x402ed7;};return a0_0x4f9b();}async function runGeminiAnalysis(_0x2d8aa4,_0x3086ec=''){const _0x3bf507=a0_0x304f64;if(!_0x2d8aa4[_0x3bf507(0x1bf)])return;if(!canCallApi()){_0x2d8aa4[_0x3bf507(0x1a6)][_0x3bf507(0x1b3)]('ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x2d8aa4[_0x3bf507(0x1c1)][_0x3bf507(0x1d3)]===0x0)return;const _0x112168=_0x2d8aa4[_0x3bf507(0x1c1)][_0x3bf507(0x1c3)](0x0,0xf),_0x5cc3a5=_0x2d8aa4[_0x3bf507(0x19e)],_0x200299=PERSONA_MAPPING[_0x2d8aa4[_0x3bf507(0x204)][_0x3bf507(0x1e6)]||_0x3bf507(0x1f7)],_0x42f94c=_0x2d8aa4[_0x3bf507(0x204)][_0x3bf507(0x1fe)]||_0x3bf507(0x1da);let _0x5331db=_0x3bf507(0x1a3);try{const _0x36c3b9=await _0x2d8aa4[_0x3bf507(0x1bc)](_0x3bf507(0x1cd));if(_0x36c3b9&&_0x36c3b9[_0x3bf507(0x18b)])_0x5331db=_0x36c3b9[_0x3bf507(0x18b)];}catch(_0x3ba32d){}let _0x3de279=![];try{const _0x59313d=await _0x2d8aa4[_0x3bf507(0x1bc)](_0x3bf507(0x20d));if(_0x59313d&&_0x59313d[_0x3bf507(0x18b)])_0x3de279=!![];}catch(_0xb4f0d8){}const _0x12ce8b=_0x3bf507(0x1ab)+_0x200299+_0x3bf507(0x1af)+_0x42f94c+_0x3bf507(0x18e)+_0x5cc3a5+_0x3bf507(0x1c2)+_0x5331db+_0x3bf507(0x1b7)+JSON[_0x3bf507(0x1c5)](_0x112168)+'.\x20EMERGENCY:\x20'+_0x3086ec+_0x3bf507(0x1a5);try{updateApiTimestamp();const _0x3a1cac=await _0x2d8aa4['geminiModel']['generateContent'](_0x12ce8b),_0x2657d4=JSON[_0x3bf507(0x1c7)](_0x3a1cac[_0x3bf507(0x1b8)]['text']()['replace'](/```json|```/g,'')[_0x3bf507(0x19d)]());await _0x2d8aa4[_0x3bf507(0x1a1)]('analysis.lastResult',{'val':JSON[_0x3bf507(0x1c5)](_0x2657d4),'ack':!![]});if(_0x2657d4[_0x3bf507(0x1b5)])await _0x2d8aa4[_0x3bf507(0x1a1)](_0x3bf507(0x1fc),{'val':_0x2657d4[_0x3bf507(0x1b5)],'ack':!![]});const _0x3bc368={'timestamp':Date[_0x3bf507(0x1aa)](),'id':Date['now']()[_0x3bf507(0x1df)](),'analysis':{'activity':{'summary':_0x2657d4[_0x3bf507(0x1b5)],'isAlert':_0x2657d4[_0x3bf507(0x1f0)],'alertReason':_0x2657d4[_0x3bf507(0x1b1)]},'comfort':{'automationProposal':_0x2657d4[_0x3bf507(0x207)]}}};_0x2d8aa4['analysisHistory'][_0x3bf507(0x1f1)](_0x3bc368);if(_0x2d8aa4['analysisHistory'][_0x3bf507(0x1d3)]>0x32)_0x2d8aa4[_0x3bf507(0x1ca)][_0x3bf507(0x1bb)]();await _0x2d8aa4[_0x3bf507(0x1a1)](_0x3bf507(0x1c6),{'val':JSON[_0x3bf507(0x1c5)](_0x2d8aa4[_0x3bf507(0x1ca)]),'ack':!![]});const _0x5785e4=_0x2657d4[_0x3bf507(0x1f0)]||![];_0x5785e4!==_0x2d8aa4[_0x3bf507(0x1a9)]&&(await _0x2d8aa4['setStateAsync'](_0x3bf507(0x1d6),{'val':_0x5785e4,'ack':!![]}),_0x2d8aa4[_0x3bf507(0x1a9)]=_0x5785e4,_0x5785e4&&(await _0x2d8aa4[_0x3bf507(0x1a1)]('analysis.alertReason',{'val':_0x2657d4[_0x3bf507(0x1b1)],'ack':!![]}),setup[_0x3bf507(0x194)](_0x2d8aa4,'‚ö†Ô∏è\x20ALARM:\x20'+_0x2657d4[_0x3bf507(0x1b1)],![],_0x2657d4[_0x3bf507(0x1be)])));if(_0x2657d4[_0x3bf507(0x207)]&&_0x2657d4[_0x3bf507(0x207)][_0x3bf507(0x18d)]){await _0x2d8aa4[_0x3bf507(0x1a1)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x2d8aa4[_0x3bf507(0x1a1)](_0x3bf507(0x1a2),{'val':_0x2657d4['automationProposal'][_0x3bf507(0x190)],'ack':!![]}),await _0x2d8aa4['setStateAsync'](_0x3bf507(0x1ed),{'val':_0x2657d4[_0x3bf507(0x207)]['targetId'],'ack':!![]}),await _0x2d8aa4[_0x3bf507(0x1a1)](_0x3bf507(0x18c),{'val':JSON['stringify'](_0x2657d4[_0x3bf507(0x207)][_0x3bf507(0x193)]),'ack':!![]});if(_0x3de279)executeAutomationAction(_0x2d8aa4);}}catch(_0x35655d){_0x2d8aa4[_0x3bf507(0x1a6)][_0x3bf507(0x1f6)](_0x3bf507(0x19c)+_0x35655d[_0x3bf507(0x1fa)]);}}async function createDailyDigest(_0x4915ae,_0x46f235){const _0x41010a=a0_0x304f64;if(!_0x4915ae[_0x41010a(0x1e7)])return;if(!canCallApi()){await _0x4915ae[_0x41010a(0x1a1)](LTM_DP_STATUS,{'val':_0x41010a(0x1d8),'ack':!![]});return;}await _0x4915ae['setStateAsync'](LTM_DP_STATUS,{'val':_0x41010a(0x1de),'ack':!![]});if(!_0x4915ae[_0x41010a(0x1bf)]||_0x4915ae['rawEventLog'][_0x41010a(0x1d3)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4915ae[_0x41010a(0x1a1)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x53932e=JSON[_0x41010a(0x1c7)](JSON['stringify'](_0x4915ae[_0x41010a(0x1cf)])),_0x504101=_0x53932e[_0x41010a(0x1d3)],_0x1a121b=_0x41010a(0x1e5)+JSON['stringify'](_0x53932e);try{updateApiTimestamp();const _0x2029cb=await _0x4915ae[_0x41010a(0x1bf)][_0x41010a(0x1e0)](_0x1a121b),_0x506c5c=JSON[_0x41010a(0x1c7)](_0x2029cb['response'][_0x41010a(0x1b2)]()['replace'](/```json|```/g,'')[_0x41010a(0x19d)]()),_0x2ddcc9={'timestamp':new Date()[_0x41010a(0x208)](),'eventCount':_0x504101,'summary':_0x506c5c[_0x41010a(0x1b5)]||'Digest','activityLevel':_0x506c5c['activityLevel']||_0x41010a(0x209),'systemMode':_0x4915ae[_0x41010a(0x19e)]};_0x4915ae[_0x41010a(0x1ec)][_0x41010a(0x1ee)](_0x2ddcc9);const _0x32eccd=_0x4915ae[_0x41010a(0x204)]['ltmLtbWindowDays']||0x3c;_0x4915ae[_0x41010a(0x1ec)]['length']>_0x32eccd&&_0x4915ae[_0x41010a(0x1ec)]['splice'](0x0,_0x4915ae[_0x41010a(0x1ec)][_0x41010a(0x1d3)]-_0x32eccd);await _0x4915ae[_0x41010a(0x1a1)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x41010a(0x1c5)](_0x4915ae[_0x41010a(0x1ec)]),'ack':!![]}),_0x4915ae[_0x41010a(0x1cf)]=[],await _0x4915ae['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x41010a(0x1c5)](_0x4915ae[_0x41010a(0x1cf)]),'ack':!![]}),await _0x4915ae[_0x41010a(0x1a1)](LTM_DP_STATUS,{'val':_0x41010a(0x18f),'ack':!![]});if(_0x4915ae[_0x41010a(0x1e7)]&&_0x46f235)_0x46f235[_0x41010a(0x1cb)](_0x4915ae,_0x41010a(0x1c9),{'digest':_0x2ddcc9});}catch(_0x3d7649){_0x4915ae['log']['error'](_0x3d7649[_0x41010a(0x1fa)]);}}async function runBaselineDriftAnalysis(_0xa33240){const _0x531624=a0_0x304f64;if(!_0xa33240[_0x531624(0x1e7)]||!_0xa33240[_0x531624(0x1bf)])return;if(!canCallApi())return;const _0x11813b=_0xa33240[_0x531624(0x204)]['ltmStbWindowDays']||0xe;if(_0xa33240['dailyDigests']['length']<_0x11813b+0x7){await _0xa33240[_0x531624(0x1a1)](_0x531624(0x1b0),{'val':_0x531624(0x1ad),'ack':!![]});return;}const _0x571baf=_0xa33240[_0x531624(0x1ec)][_0x531624(0x1c3)](-_0x11813b),_0x5ef732=_0xa33240[_0x531624(0x1ec)][_0x531624(0x1c3)](0x0,_0xa33240[_0x531624(0x1ec)][_0x531624(0x1d3)]-_0x11813b),_0xb9ef07=_0x531624(0x205)+JSON[_0x531624(0x1c5)](_0x5ef732)+_0x531624(0x1a0)+JSON[_0x531624(0x1c5)](_0x571baf);try{updateApiTimestamp();const _0x38ef52=await _0xa33240[_0x531624(0x1bf)][_0x531624(0x1e0)](_0xb9ef07),_0x4e237b=JSON[_0x531624(0x1c7)](_0x38ef52['response'][_0x531624(0x1b2)]()['replace'](/```json|```/g,'')[_0x531624(0x19d)]());_0x4e237b[_0x531624(0x20c)]&&(await _0xa33240['setStateAsync']('LTM.driftAnalysis.baselineDrift',{'val':_0x4e237b['baselineDrift'],'ack':!![]}),await _0xa33240['setStateAsync'](_0x531624(0x1ce),{'val':_0x4e237b[_0x531624(0x20a)],'ack':!![]}),await _0xa33240[_0x531624(0x1a1)](_0x531624(0x1cc),{'val':Date[_0x531624(0x1aa)](),'ack':!![]}));}catch(_0xc565b){}}async function executeAutomationAction(_0x532c7d){const _0x127d68=a0_0x304f64;try{const _0xece70e=await _0x532c7d['getStateAsync'](_0x127d68(0x1ed)),_0x512c8d=await _0x532c7d[_0x127d68(0x1bc)](_0x127d68(0x18c));if(_0xece70e&&_0xece70e['val']&&_0x512c8d){const _0x47b08b=_0xece70e[_0x127d68(0x18b)];let _0x10e9eb=_0x512c8d[_0x127d68(0x18b)];try{_0x10e9eb=JSON[_0x127d68(0x1c7)](_0x10e9eb);}catch(_0x35cf7b){}_0x532c7d[_0x127d68(0x1a6)][_0x127d68(0x1e4)](_0x127d68(0x1c0)+_0x47b08b+_0x127d68(0x1ba)+_0x10e9eb),await _0x532c7d['setForeignStateAsync'](_0x47b08b,_0x10e9eb);}else _0x532c7d[_0x127d68(0x1a6)][_0x127d68(0x1c4)](_0x127d68(0x1f2));}catch(_0x105bfb){_0x532c7d[_0x127d68(0x1a6)]['error'](_0x127d68(0x1e8)+_0x105bfb[_0x127d68(0x1fa)]);}}async function sendMorningBriefing(_0x19f2d3){const _0x583ae4=a0_0x304f64;if(!_0x19f2d3[_0x583ae4(0x1bf)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x3c84b5=_0x583ae4(0x1e9),_0x20d85d=await _0x19f2d3[_0x583ae4(0x1bf)][_0x583ae4(0x1e0)](_0x3c84b5),_0x5e07e9=_0x20d85d[_0x583ae4(0x1b8)][_0x583ae4(0x1b2)]();setup[_0x583ae4(0x194)](_0x19f2d3,_0x583ae4(0x1ac)+_0x5e07e9);}catch(_0x5b2280){_0x19f2d3['log'][_0x583ae4(0x1f6)]('Briefing\x20Error:\x20'+_0x5b2280['message']);}}module[a0_0x304f64(0x191)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};