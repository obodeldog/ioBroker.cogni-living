const a0_0x2a30e1=a0_0x148f;(function(_0x47c094,_0x3846f2){const _0x1744b9=a0_0x148f,_0x30ad5f=_0x47c094();while(!![]){try{const _0x5c3483=-parseInt(_0x1744b9(0x1dc))/0x1+parseInt(_0x1744b9(0x1e3))/0x2*(parseInt(_0x1744b9(0x1cf))/0x3)+-parseInt(_0x1744b9(0x1e7))/0x4*(-parseInt(_0x1744b9(0x1c9))/0x5)+-parseInt(_0x1744b9(0x20b))/0x6+parseInt(_0x1744b9(0x23f))/0x7+parseInt(_0x1744b9(0x1fd))/0x8+-parseInt(_0x1744b9(0x23a))/0x9;if(_0x5c3483===_0x3846f2)break;else _0x30ad5f['push'](_0x30ad5f['shift']());}catch(_0x4597a1){_0x30ad5f['push'](_0x30ad5f['shift']());}}}(a0_0x4762,0x59f7d));const a0_0x5465be=(function(){let _0x29c12c=!![];return function(_0x10985d,_0x1ccdb0){const _0x4e0ebc=_0x29c12c?function(){const _0x4a4b5a=a0_0x148f;if(_0x1ccdb0){const _0x40e58a=_0x1ccdb0[_0x4a4b5a(0x1c1)](_0x10985d,arguments);return _0x1ccdb0=null,_0x40e58a;}}:function(){};return _0x29c12c=![],_0x4e0ebc;};}()),a0_0x6eb0df=a0_0x5465be(this,function(){const _0x1160eb=a0_0x148f;return a0_0x6eb0df[_0x1160eb(0x1f7)]()['search']('(((.+)+)+)+$')[_0x1160eb(0x1f7)]()[_0x1160eb(0x222)](a0_0x6eb0df)[_0x1160eb(0x1d2)](_0x1160eb(0x217));});function a0_0x4762(){const _0x20711d=['.\x20EMERGENCY:\x20','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','text','system.presenceWho','send','geminiModel','parse','warn','KI-Fehler\x20(Fallback)','slice','length','toFixed','analysis.automation.targetId','LTM.driftAnalysis.lastCheck','livingContext','toString','info','val','getForeignStateAsync','Nacht','replace','3443088QZXXZh','Unbekannt','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','Skipped\x20(Traffic)','summary','weatherInstance','\x20Ã¼bersprungen\x20(Auto-Approved).','Gemini\x20Error:\x20','alertReason','analysis.alertReason','Digest','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','Unbekannt\x20(Kein\x20Sensor)','1217556WydUAR','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','splice','LTM.rawEventLog','analysis.lastResult','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','ltmLtbWindowDays','Â°C,\x20','analysis.analysisHistory','trim','Wetterdaten\x20nicht\x20abrufbar','(((.+)+)+)+$',',\x20LichtverhÃ¤ltnisse:\x20','debug','analysis.automation.targetValue','log','targetId','.\x20KONTEXT:\x20','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','push','description','constructor','baselineDrift','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','isAlert','./setup','ltmStbWindowDays','targetValue','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','automationProposal','lastAlertState','aiPersona','Tag','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','setStateAsync','Success','dailyDigests','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','generic','.forecast.current.temperature','analysis.automation.patternDetected','unshift','stringify','now','.Current.Temperature','4859595JFnEFs','timestamp','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','exports','Skipped\x20(No\x20AI\x20or\x20Data)','1404368OtIPOz','\x0aSTB:\x20','%)\x20nach\x20\x22','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','config','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','KI\x20offline\x20(Fallback)','Started...','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','analysis.isAlert','apply','isEmergency','normal','Traffic-Schutz\x20(Auto-Approved)','.Current.WeatherText','toLocaleTimeString','âš ï¸\x20ALARM:\x20','currentSystemMode','355STUwAU','setForeignStateAsync','message','Keine\x20Details.','BUTLER\x20Execution\x20Error:\x20','getStateAsync','1941BnkgWu','@google/generative-ai','detected','search','activityLevel','isProVersion','rawEventLog','Briefing\x20Error:\x20','LTM.driftAnalysis.baselineDrift','ANALYZE_HEALTH','sendNotification','pop','error','525128gFGqrT','analysis.automation.autoApply','ðŸŒ…\x20Morning\x20Briefing:\x0a','\x20->\x20','response','eventHistory','generateContent','1244QqYTLz','analysisHistory','reason','Sicherheit\x20geht\x20vor.','33976QMEuTs'];a0_0x4762=function(){return _0x20711d;};return a0_0x4762();}a0_0x6eb0df();'use strict';const {GoogleGenerativeAI}=require(a0_0x2a30e1(0x1d0)),setup=require(a0_0x2a30e1(0x226)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG=a0_0x2a30e1(0x20f),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x2a30e1(0x20d),'senior_aal':a0_0x2a30e1(0x209),'family':a0_0x2a30e1(0x200),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':a0_0x2a30e1(0x1e6),'energy_saver':a0_0x2a30e1(0x21f)};function canCallApi(){const _0x49b484=a0_0x2a30e1,_0x464b72=Date[_0x49b484(0x238)]();return _0x464b72-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x3c1e56=a0_0x2a30e1;lastGlobalApiCall=Date[_0x3c1e56(0x238)]();}async function getWeatherContext(_0x3bcaaf){const _0x3517cb=a0_0x2a30e1;if(!_0x3bcaaf[_0x3517cb(0x243)]['useWeather']||!_0x3bcaaf['config'][_0x3517cb(0x203)])return _0x3517cb(0x20a);try{const _0x65529a=_0x3bcaaf[_0x3517cb(0x243)]['weatherInstance'];let _0x2103d4=await _0x3bcaaf[_0x3517cb(0x1fa)](_0x65529a+_0x3517cb(0x239));if(!_0x2103d4)_0x2103d4=await _0x3bcaaf[_0x3517cb(0x1fa)](_0x65529a+_0x3517cb(0x234));let _0x42109f=await _0x3bcaaf[_0x3517cb(0x1fa)](_0x65529a+_0x3517cb(0x1c5));if(!_0x42109f)_0x42109f=await _0x3bcaaf[_0x3517cb(0x1fa)](_0x65529a+'.forecast.current.state');let _0x598a74=_0x3517cb(0x1fe);const _0x2a9447=await _0x3bcaaf['getForeignStateAsync'](_0x65529a+'.Current.IsNight');if(_0x2a9447)_0x598a74=_0x2a9447['val']?_0x3517cb(0x1fb):_0x3517cb(0x22d);if(_0x2103d4&&_0x42109f)return _0x2103d4[_0x3517cb(0x1f9)]+_0x3517cb(0x213)+_0x42109f[_0x3517cb(0x1f9)]+_0x3517cb(0x218)+_0x598a74;}catch(_0x3e3aa6){}return _0x3517cb(0x216);}async function consultButler(_0x20f76b,_0x4a7e68,_0x2ffd9c,_0x2a518e){const _0x3fb4ba=a0_0x2a30e1;if(!_0x20f76b['geminiModel'])return{'approved':!![],'reason':_0x3fb4ba(0x245)};const _0x57af59=Date[_0x3fb4ba(0x238)]();if(decisionCache[_0x4a7e68]&&_0x57af59-decisionCache[_0x4a7e68][_0x3fb4ba(0x23b)]<CACHE_TTL_MS){const _0x286f83=decisionCache[_0x4a7e68]['decision'];return _0x20f76b[_0x3fb4ba(0x21b)]['debug'](_0x3fb4ba(0x22e)+_0x4a7e68+_0x3fb4ba(0x1df)+(_0x286f83['approved']?'OK':'NO')+'\x20('+_0x286f83[_0x3fb4ba(0x1e5)]+')'),_0x286f83;}if(!canCallApi())return _0x20f76b[_0x3fb4ba(0x21b)][_0x3fb4ba(0x219)](_0x3fb4ba(0x21e)+_0x4a7e68+_0x3fb4ba(0x204)),{'approved':!![],'reason':_0x3fb4ba(0x1c4)};const _0x456108=new Date()[_0x3fb4ba(0x1c6)](),_0x137330=await getWeatherContext(_0x20f76b),_0x4e5ba3=PERSONA_MAPPING[_0x20f76b[_0x3fb4ba(0x243)][_0x3fb4ba(0x22c)]||_0x3fb4ba(0x233)],_0x1ee80a=_0x3fb4ba(0x20c)+_0x456108+',\x20Wetter:\x20'+_0x137330+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x2a518e*0x64)[_0x3fb4ba(0x1f3)](0x0)+_0x3fb4ba(0x241)+_0x4a7e68+'\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22'+_0x2ffd9c+_0x3fb4ba(0x242)+_0x4e5ba3+_0x3fb4ba(0x232);try{updateApiTimestamp();const _0x5463ce=await _0x20f76b[_0x3fb4ba(0x1ed)][_0x3fb4ba(0x1e2)](_0x1ee80a),_0x2e8fa2=_0x5463ce['response'][_0x3fb4ba(0x1ea)]()[_0x3fb4ba(0x1fc)](/```json|```/g,'')['trim'](),_0x68674=JSON[_0x3fb4ba(0x1ee)](_0x2e8fa2);return decisionCache[_0x4a7e68]={'decision':_0x68674,'timestamp':_0x57af59},_0x68674;}catch(_0x17d856){return _0x20f76b['log']['warn'](_0x3fb4ba(0x244)+_0x17d856['message']),decisionCache[_0x4a7e68]={'decision':{'approved':!![],'reason':_0x3fb4ba(0x1f0)},'timestamp':_0x57af59-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x44a3ee,_0x2af2ca=''){const _0x214a0e=a0_0x2a30e1;if(!_0x44a3ee[_0x214a0e(0x1ed)])return;if(!canCallApi()){_0x44a3ee['log'][_0x214a0e(0x219)](_0x214a0e(0x23c));return;}if(_0x44a3ee[_0x214a0e(0x1e1)][_0x214a0e(0x1f2)]===0x0)return;const _0x2afaca=_0x44a3ee[_0x214a0e(0x1e1)]['slice'](0x0,0xf),_0x149381=_0x44a3ee[_0x214a0e(0x1c8)],_0x336164=PERSONA_MAPPING[_0x44a3ee[_0x214a0e(0x243)][_0x214a0e(0x22c)]||_0x214a0e(0x233)],_0x40592a=_0x44a3ee[_0x214a0e(0x243)][_0x214a0e(0x1f6)]||_0x214a0e(0x1cc);let _0x1eb411=_0x214a0e(0x1fe);try{const _0x10f885=await _0x44a3ee['getStateAsync'](_0x214a0e(0x1eb));if(_0x10f885&&_0x10f885[_0x214a0e(0x1f9)])_0x1eb411=_0x10f885[_0x214a0e(0x1f9)];}catch(_0x4bfcdf){}let _0x5e341b=![];try{const _0x392380=await _0x44a3ee[_0x214a0e(0x1ce)](_0x214a0e(0x1dd));if(_0x392380&&_0x392380[_0x214a0e(0x1f9)])_0x5e341b=!![];}catch(_0x3b8cd7){}const _0x33a3da=_0x214a0e(0x229)+_0x336164+_0x214a0e(0x21d)+_0x40592a+'.\x20SYSTEM_MODE:\x20'+_0x149381+'.\x20ANWESEND:\x20'+_0x1eb411+'.\x20EVENTS:\x20'+JSON[_0x214a0e(0x237)](_0x2afaca)+_0x214a0e(0x1e8)+_0x2af2ca+_0x214a0e(0x1e9);try{updateApiTimestamp();const _0x3c8e96=await _0x44a3ee[_0x214a0e(0x1ed)][_0x214a0e(0x1e2)](_0x33a3da),_0x10d6fa=JSON[_0x214a0e(0x1ee)](_0x3c8e96[_0x214a0e(0x1e0)][_0x214a0e(0x1ea)]()[_0x214a0e(0x1fc)](/```json|```/g,'')['trim']());await _0x44a3ee[_0x214a0e(0x22f)](_0x214a0e(0x210),{'val':JSON[_0x214a0e(0x237)](_0x10d6fa),'ack':!![]});if(_0x10d6fa[_0x214a0e(0x202)])await _0x44a3ee[_0x214a0e(0x22f)]('analysis.activitySummary',{'val':_0x10d6fa[_0x214a0e(0x202)],'ack':!![]});const _0x3eb956={'timestamp':Date[_0x214a0e(0x238)](),'id':Date[_0x214a0e(0x238)]()[_0x214a0e(0x1f7)](),'analysis':{'activity':{'summary':_0x10d6fa[_0x214a0e(0x202)],'isAlert':_0x10d6fa[_0x214a0e(0x225)],'alertReason':_0x10d6fa['alertReason']},'comfort':{'automationProposal':_0x10d6fa['automationProposal']}}};_0x44a3ee[_0x214a0e(0x1e4)][_0x214a0e(0x236)](_0x3eb956);if(_0x44a3ee[_0x214a0e(0x1e4)][_0x214a0e(0x1f2)]>0x32)_0x44a3ee['analysisHistory'][_0x214a0e(0x1da)]();await _0x44a3ee['setStateAsync'](_0x214a0e(0x214),{'val':JSON[_0x214a0e(0x237)](_0x44a3ee['analysisHistory']),'ack':!![]});const _0xcdbc29=_0x10d6fa[_0x214a0e(0x225)]||![];_0xcdbc29!==_0x44a3ee[_0x214a0e(0x22b)]&&(await _0x44a3ee[_0x214a0e(0x22f)](_0x214a0e(0x1c0),{'val':_0xcdbc29,'ack':!![]}),_0x44a3ee[_0x214a0e(0x22b)]=_0xcdbc29,_0xcdbc29&&(await _0x44a3ee[_0x214a0e(0x22f)](_0x214a0e(0x207),{'val':_0x10d6fa[_0x214a0e(0x206)],'ack':!![]}),setup['sendNotification'](_0x44a3ee,_0x214a0e(0x1c7)+_0x10d6fa[_0x214a0e(0x206)],![],_0x10d6fa[_0x214a0e(0x1c2)])));if(_0x10d6fa['automationProposal']&&_0x10d6fa[_0x214a0e(0x22a)][_0x214a0e(0x1d1)]){await _0x44a3ee[_0x214a0e(0x22f)](_0x214a0e(0x235),{'val':!![],'ack':!![]}),await _0x44a3ee[_0x214a0e(0x22f)]('analysis.automation.description',{'val':_0x10d6fa['automationProposal'][_0x214a0e(0x221)],'ack':!![]}),await _0x44a3ee[_0x214a0e(0x22f)](_0x214a0e(0x1f4),{'val':_0x10d6fa[_0x214a0e(0x22a)][_0x214a0e(0x21c)],'ack':!![]}),await _0x44a3ee[_0x214a0e(0x22f)](_0x214a0e(0x21a),{'val':JSON[_0x214a0e(0x237)](_0x10d6fa[_0x214a0e(0x22a)][_0x214a0e(0x228)]),'ack':!![]});if(_0x5e341b)executeAutomationAction(_0x44a3ee);}}catch(_0x477af6){_0x44a3ee[_0x214a0e(0x21b)]['error'](_0x214a0e(0x205)+_0x477af6[_0x214a0e(0x1cb)]);}}async function createDailyDigest(_0x279027,_0x1d7629){const _0xdfca16=a0_0x2a30e1;if(!_0x279027[_0xdfca16(0x1d4)])return;if(!canCallApi()){await _0x279027[_0xdfca16(0x22f)](LTM_DP_STATUS,{'val':_0xdfca16(0x201),'ack':!![]});return;}await _0x279027[_0xdfca16(0x22f)](LTM_DP_STATUS,{'val':_0xdfca16(0x246),'ack':!![]});if(!_0x279027[_0xdfca16(0x1ed)]||_0x279027['rawEventLog']['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x279027['setStateAsync'](LTM_DP_STATUS,{'val':_0xdfca16(0x23e),'ack':!![]});return;}const _0x291a5e=JSON[_0xdfca16(0x1ee)](JSON[_0xdfca16(0x237)](_0x279027[_0xdfca16(0x1d5)])),_0x4368e9=_0x291a5e['length'],_0xdd90e9=_0xdfca16(0x211)+JSON[_0xdfca16(0x237)](_0x291a5e);try{updateApiTimestamp();const _0x4f8417=await _0x279027[_0xdfca16(0x1ed)][_0xdfca16(0x1e2)](_0xdd90e9),_0x11aab4=JSON[_0xdfca16(0x1ee)](_0x4f8417[_0xdfca16(0x1e0)][_0xdfca16(0x1ea)]()[_0xdfca16(0x1fc)](/```json|```/g,'')[_0xdfca16(0x215)]()),_0x5979a3={'timestamp':new Date()['toISOString'](),'eventCount':_0x4368e9,'summary':_0x11aab4[_0xdfca16(0x202)]||_0xdfca16(0x208),'activityLevel':_0x11aab4[_0xdfca16(0x1d3)]||_0xdfca16(0x1c3),'systemMode':_0x279027[_0xdfca16(0x1c8)]};_0x279027[_0xdfca16(0x231)][_0xdfca16(0x220)](_0x5979a3);const _0x2f42c6=_0x279027[_0xdfca16(0x243)][_0xdfca16(0x212)]||0x3c;_0x279027[_0xdfca16(0x231)]['length']>_0x2f42c6&&_0x279027[_0xdfca16(0x231)][_0xdfca16(0x20e)](0x0,_0x279027['dailyDigests'][_0xdfca16(0x1f2)]-_0x2f42c6);await _0x279027[_0xdfca16(0x22f)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x279027[_0xdfca16(0x231)]),'ack':!![]}),_0x279027['rawEventLog']=[],await _0x279027[_0xdfca16(0x22f)](LTM_DP_RAW_LOG,{'val':JSON[_0xdfca16(0x237)](_0x279027[_0xdfca16(0x1d5)]),'ack':!![]}),await _0x279027[_0xdfca16(0x22f)](LTM_DP_STATUS,{'val':_0xdfca16(0x230),'ack':!![]});if(_0x279027[_0xdfca16(0x1d4)]&&_0x1d7629)_0x1d7629[_0xdfca16(0x1ec)](_0x279027,_0xdfca16(0x1d8),{'digest':_0x5979a3});}catch(_0x2040eb){_0x279027[_0xdfca16(0x21b)][_0xdfca16(0x1db)](_0x2040eb[_0xdfca16(0x1cb)]);}}async function runBaselineDriftAnalysis(_0x54b0ae){const _0x1e4608=a0_0x2a30e1;if(!_0x54b0ae['isProVersion']||!_0x54b0ae[_0x1e4608(0x1ed)])return;if(!canCallApi())return;const _0x517979=_0x54b0ae['config'][_0x1e4608(0x227)]||0xe;if(_0x54b0ae['dailyDigests']['length']<_0x517979+0x7){await _0x54b0ae['setStateAsync'](_0x1e4608(0x1d7),{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x130ce6=_0x54b0ae['dailyDigests'][_0x1e4608(0x1f1)](-_0x517979),_0x262712=_0x54b0ae[_0x1e4608(0x231)][_0x1e4608(0x1f1)](0x0,_0x54b0ae['dailyDigests'][_0x1e4608(0x1f2)]-_0x517979),_0x32fd85=_0x1e4608(0x247)+JSON[_0x1e4608(0x237)](_0x262712)+_0x1e4608(0x240)+JSON[_0x1e4608(0x237)](_0x130ce6);try{updateApiTimestamp();const _0x4d1a60=await _0x54b0ae[_0x1e4608(0x1ed)][_0x1e4608(0x1e2)](_0x32fd85),_0x58deeb=JSON[_0x1e4608(0x1ee)](_0x4d1a60[_0x1e4608(0x1e0)][_0x1e4608(0x1ea)]()[_0x1e4608(0x1fc)](/```json|```/g,'')[_0x1e4608(0x215)]());_0x58deeb['baselineDrift']&&(await _0x54b0ae[_0x1e4608(0x22f)](_0x1e4608(0x1d7),{'val':_0x58deeb[_0x1e4608(0x223)],'ack':!![]}),await _0x54b0ae[_0x1e4608(0x22f)]('LTM.driftAnalysis.driftDetails',{'val':_0x58deeb['driftDetails'],'ack':!![]}),await _0x54b0ae['setStateAsync'](_0x1e4608(0x1f5),{'val':Date['now'](),'ack':!![]}));}catch(_0x2dcb70){}}function a0_0x148f(_0x49cd82,_0xef7e51){const _0x28d92d=a0_0x4762();return a0_0x148f=function(_0x6eb0df,_0x5465be){_0x6eb0df=_0x6eb0df-0x1c0;let _0x4762da=_0x28d92d[_0x6eb0df];return _0x4762da;},a0_0x148f(_0x49cd82,_0xef7e51);}async function executeAutomationAction(_0x317c85){const _0x1d619b=a0_0x2a30e1;try{const _0x2fb55d=await _0x317c85[_0x1d619b(0x1ce)]('analysis.automation.targetId'),_0x50d3eb=await _0x317c85[_0x1d619b(0x1ce)](_0x1d619b(0x21a));if(_0x2fb55d&&_0x2fb55d[_0x1d619b(0x1f9)]&&_0x50d3eb){const _0x430659=_0x2fb55d['val'];let _0x55d566=_0x50d3eb[_0x1d619b(0x1f9)];try{_0x55d566=JSON['parse'](_0x55d566);}catch(_0x13b868){}_0x317c85[_0x1d619b(0x21b)][_0x1d619b(0x1f8)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x430659+'\x20=\x20'+_0x55d566),await _0x317c85[_0x1d619b(0x1ca)](_0x430659,_0x55d566);}else _0x317c85['log'][_0x1d619b(0x1ef)](_0x1d619b(0x1ff));}catch(_0x10863a){_0x317c85[_0x1d619b(0x21b)]['error'](_0x1d619b(0x1cd)+_0x10863a['message']);}}async function sendMorningBriefing(_0x56c14c){const _0x23abbf=a0_0x2a30e1;if(!_0x56c14c[_0x23abbf(0x1ed)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x213e80=_0x23abbf(0x224),_0x12ce7f=await _0x56c14c['geminiModel'][_0x23abbf(0x1e2)](_0x213e80),_0x2776c2=_0x12ce7f[_0x23abbf(0x1e0)][_0x23abbf(0x1ea)]();setup[_0x23abbf(0x1d9)](_0x56c14c,_0x23abbf(0x1de)+_0x2776c2);}catch(_0x289216){_0x56c14c[_0x23abbf(0x21b)]['error'](_0x23abbf(0x1d6)+_0x289216[_0x23abbf(0x1cb)]);}}module[a0_0x2a30e1(0x23d)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};