const a0_0x3797fc=a0_0x2838;(function(_0x41bb97,_0x15a703){const _0x29d603=a0_0x2838,_0x14a49c=_0x41bb97();while(!![]){try{const _0x3c71f3=-parseInt(_0x29d603(0xb0))/0x1+parseInt(_0x29d603(0xbb))/0x2*(parseInt(_0x29d603(0xf0))/0x3)+parseInt(_0x29d603(0xa3))/0x4*(-parseInt(_0x29d603(0x102))/0x5)+-parseInt(_0x29d603(0xa0))/0x6*(parseInt(_0x29d603(0xda))/0x7)+parseInt(_0x29d603(0xac))/0x8+-parseInt(_0x29d603(0xe2))/0x9*(-parseInt(_0x29d603(0xcf))/0xa)+parseInt(_0x29d603(0xea))/0xb*(parseInt(_0x29d603(0xc0))/0xc);if(_0x3c71f3===_0x15a703)break;else _0x14a49c['push'](_0x14a49c['shift']());}catch(_0x3b00f0){_0x14a49c['push'](_0x14a49c['shift']());}}}(a0_0x3ede,0x77ef0));function a0_0x2838(_0x35d954,_0x5b6a23){const _0x590112=a0_0x3ede();return a0_0x2838=function(_0x5e604a,_0x3c9791){_0x5e604a=_0x5e604a-0x89;let _0x3eded8=_0x590112[_0x5e604a];return _0x3eded8;},a0_0x2838(_0x35d954,_0x5b6a23);}function a0_0x3ede(){const _0x547925=['analysis.automation.description','getStateAsync','activityLevel','normal','targetValue','text','Wetterdaten\x20nicht\x20abrufbar','length','\x20->\x20','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','info','.Current.Temperature','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','65cgxlmT','.forecast.current.temperature','.Current.IsNight','search','Unbekannt\x20(Kein\x20Sensor)','KI\x20offline\x20(Fallback)','log','.\x20EMERGENCY:\x20','setForeignStateAsync','Digest','isAlert','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','exports','pop','response','parse','\x20√ºbersprungen\x20(Auto-Approved).','timestamp','LTM.driftAnalysis.driftDetails','.\x20KONTEXT:\x20','baselineDrift','Success','@google/generative-ai','weatherInstance','./setup','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','toString','ltmLtbWindowDays','KI-Fehler\x20(Fallback)','Keine\x20Details.','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','402brZwYW','¬∞C,\x20','error','280916tFNIGr','replace','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','analysis.activitySummary','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','description','LTM.dailyDigests','1091112LUtvzm','aiPersona','analysis.automation.autoApply','%)\x20nach\x20\x22','700477RBYipx','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','models/gemini-flash-latest','message','üåÖ\x20Morning\x20Briefing:\x0a','generateContent','trim','.\x20EVENTS:\x20','warn','analysis.automation.targetValue','unshift','20OYQWCU','summary','geminiModel',',\x20Wetter:\x20','currentSystemMode','12KDvKHR','sendNotification','LTM.driftAnalysis.lastCheck','splice','val','config','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','analysisHistory','dailyDigests','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','.\x20ANWESEND:\x20','LTM.driftAnalysis.baselineDrift','toFixed','stringify','reason','20IoqnSE','Skipped\x20(Traffic)','apply','getForeignStateAsync','automationProposal','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','lastAlertState','analysis.lastResult','isEmergency','Started...','approved','27160PzabjJ','debug','Unbekannt','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','analysis.isAlert','slice','Gemini\x20Error:\x20','N/A\x20(Learning)','2832039aPRjdl','ANALYZE_HEALTH','system.presenceWho','generic','rawEventLog','Sicherheit\x20geht\x20vor.','analysis.alertReason','setStateAsync','9572981oLVUwr','analysis.automation.targetId','isProVersion','.forecast.current.state','eventHistory','Traffic-Schutz\x20(Auto-Approved)','218598TOKzyn','now','alertReason','ü§ñ\x20Butler\x20Brain\x20Error:\x20','\x0aSTB:\x20'];a0_0x3ede=function(){return _0x547925;};return a0_0x3ede();}const a0_0x3c9791=(function(){let _0x1ac178=!![];return function(_0x19fed5,_0x39bd98){const _0x4ae530=_0x1ac178?function(){const _0x15b48f=a0_0x2838;if(_0x39bd98){const _0x467a85=_0x39bd98[_0x15b48f(0xd1)](_0x19fed5,arguments);return _0x39bd98=null,_0x467a85;}}:function(){};return _0x1ac178=![],_0x4ae530;};}()),a0_0x5e604a=a0_0x3c9791(this,function(){const _0x2fc578=a0_0x2838;return a0_0x5e604a['toString']()[_0x2fc578(0x105)]('(((.+)+)+)+$')[_0x2fc578(0x9b)]()['constructor'](a0_0x5e604a)[_0x2fc578(0x105)]('(((.+)+)+)+$');});a0_0x5e604a();'use strict';const {GoogleGenerativeAI}=require(a0_0x3797fc(0x97)),setup=require(a0_0x3797fc(0x99)),GEMINI_MODEL=a0_0x3797fc(0xb2),LTM_DP_DAILY_DIGESTS=a0_0x3797fc(0xab),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':a0_0x3797fc(0x8c),'family':'Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','single_comfort':a0_0x3797fc(0xdd),'security':a0_0x3797fc(0xe7),'energy_saver':a0_0x3797fc(0xc6)};function canCallApi(){const _0x6bbbfd=a0_0x3797fc,_0x4cfbee=Date[_0x6bbbfd(0xf1)]();return _0x4cfbee-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x52c125=a0_0x3797fc;lastGlobalApiCall=Date[_0x52c125(0xf1)]();}async function getWeatherContext(_0x1070ca){const _0x78f81b=a0_0x3797fc;if(!_0x1070ca[_0x78f81b(0xc5)]['useWeather']||!_0x1070ca[_0x78f81b(0xc5)][_0x78f81b(0x98)])return _0x78f81b(0x106);try{const _0x13efa9=_0x1070ca['config'][_0x78f81b(0x98)];let _0x50c767=await _0x1070ca['getForeignStateAsync'](_0x13efa9+_0x78f81b(0x100));if(!_0x50c767)_0x50c767=await _0x1070ca[_0x78f81b(0xd2)](_0x13efa9+_0x78f81b(0x103));let _0x4057b9=await _0x1070ca[_0x78f81b(0xd2)](_0x13efa9+'.Current.WeatherText');if(!_0x4057b9)_0x4057b9=await _0x1070ca[_0x78f81b(0xd2)](_0x13efa9+_0x78f81b(0xed));let _0x49a142=_0x78f81b(0xdc);const _0x2a2ca0=await _0x1070ca[_0x78f81b(0xd2)](_0x13efa9+_0x78f81b(0x104));if(_0x2a2ca0)_0x49a142=_0x2a2ca0['val']?'Nacht':'Tag';if(_0x50c767&&_0x4057b9)return _0x50c767[_0x78f81b(0xc4)]+_0x78f81b(0xa1)+_0x4057b9[_0x78f81b(0xc4)]+',\x20Lichtverh√§ltnisse:\x20'+_0x49a142;}catch(_0x35163c){}return _0x78f81b(0xfb);}async function consultButler(_0x1495ff,_0x445824,_0xaba4f6,_0x51e848){const _0x352383=a0_0x3797fc;if(!_0x1495ff[_0x352383(0xbd)])return{'approved':!![],'reason':_0x352383(0x107)};const _0x2bf56e=Date['now']();if(decisionCache[_0x445824]&&_0x2bf56e-decisionCache[_0x445824][_0x352383(0x92)]<CACHE_TTL_MS){const _0xc3e032=decisionCache[_0x445824]['decision'];return _0x1495ff[_0x352383(0x108)][_0x352383(0xdb)]('ü§ñ\x20Butler\x20Cache\x20Hit:\x20'+_0x445824+_0x352383(0xfd)+(_0xc3e032[_0x352383(0xd9)]?'OK':'NO')+'\x20('+_0xc3e032[_0x352383(0xce)]+')'),_0xc3e032;}if(!canCallApi())return _0x1495ff[_0x352383(0x108)][_0x352383(0xdb)](_0x352383(0x9f)+_0x445824+_0x352383(0x91)),{'approved':!![],'reason':_0x352383(0xef)};const _0x4eed57=new Date()['toLocaleTimeString'](),_0x59c150=await getWeatherContext(_0x1495ff),_0x40a751=PERSONA_MAPPING[_0x1495ff[_0x352383(0xc5)][_0x352383(0xad)]||_0x352383(0xe5)],_0x19238f='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x4eed57+_0x352383(0xbe)+_0x59c150+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x51e848*0x64)[_0x352383(0xcc)](0x0)+_0x352383(0xaf)+_0x445824+_0x352383(0x9a)+_0xaba4f6+_0x352383(0x101)+_0x40a751+_0x352383(0xd4);try{updateApiTimestamp();const _0x4c5dfe=await _0x1495ff[_0x352383(0xbd)]['generateContent'](_0x19238f),_0x4dc5c7=_0x4c5dfe[_0x352383(0x8f)][_0x352383(0xfa)]()['replace'](/```json|```/g,'')[_0x352383(0xb6)](),_0x114db2=JSON['parse'](_0x4dc5c7);return decisionCache[_0x445824]={'decision':_0x114db2,'timestamp':_0x2bf56e},_0x114db2;}catch(_0x3413ce){return _0x1495ff['log'][_0x352383(0xb8)](_0x352383(0xf3)+_0x3413ce[_0x352383(0xb3)]),decisionCache[_0x445824]={'decision':{'approved':!![],'reason':_0x352383(0x9d)},'timestamp':_0x2bf56e-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x352383(0x9d)};}}async function runGeminiAnalysis(_0x3ef2b3,_0xee15e5=''){const _0x1b700f=a0_0x3797fc;if(!_0x3ef2b3[_0x1b700f(0xbd)])return;if(!canCallApi()){_0x3ef2b3['log']['debug']('ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x3ef2b3[_0x1b700f(0xee)][_0x1b700f(0xfc)]===0x0)return;const _0x551ed8=_0x3ef2b3[_0x1b700f(0xee)]['slice'](0x0,0xf),_0x266631=_0x3ef2b3[_0x1b700f(0xbf)],_0x3309f2=PERSONA_MAPPING[_0x3ef2b3[_0x1b700f(0xc5)][_0x1b700f(0xad)]||_0x1b700f(0xe5)],_0x10036e=_0x3ef2b3[_0x1b700f(0xc5)]['livingContext']||_0x1b700f(0x9e);let _0x36d410=_0x1b700f(0xdc);try{const _0x40fd1c=await _0x3ef2b3['getStateAsync'](_0x1b700f(0xe4));if(_0x40fd1c&&_0x40fd1c[_0x1b700f(0xc4)])_0x36d410=_0x40fd1c[_0x1b700f(0xc4)];}catch(_0xd685e6){}let _0x3eb7bb=![];try{const _0x1f50e8=await _0x3ef2b3[_0x1b700f(0xf6)](_0x1b700f(0xae));if(_0x1f50e8&&_0x1f50e8[_0x1b700f(0xc4)])_0x3eb7bb=!![];}catch(_0x909c7b){}const _0x1565ed=_0x1b700f(0xa8)+_0x3309f2+_0x1b700f(0x94)+_0x10036e+'.\x20SYSTEM_MODE:\x20'+_0x266631+_0x1b700f(0xca)+_0x36d410+_0x1b700f(0xb7)+JSON['stringify'](_0x551ed8)+_0x1b700f(0x109)+_0xee15e5+_0x1b700f(0xb1);try{updateApiTimestamp();const _0xeb8969=await _0x3ef2b3[_0x1b700f(0xbd)][_0x1b700f(0xb5)](_0x1565ed),_0x39a41a=JSON['parse'](_0xeb8969[_0x1b700f(0x8f)][_0x1b700f(0xfa)]()[_0x1b700f(0xa4)](/```json|```/g,'')[_0x1b700f(0xb6)]());await _0x3ef2b3[_0x1b700f(0xe9)](_0x1b700f(0xd6),{'val':JSON['stringify'](_0x39a41a),'ack':!![]});if(_0x39a41a[_0x1b700f(0xbc)])await _0x3ef2b3[_0x1b700f(0xe9)](_0x1b700f(0xa6),{'val':_0x39a41a['summary'],'ack':!![]});const _0x82ccb5={'timestamp':Date[_0x1b700f(0xf1)](),'id':Date[_0x1b700f(0xf1)]()[_0x1b700f(0x9b)](),'analysis':{'activity':{'summary':_0x39a41a['summary'],'isAlert':_0x39a41a['isAlert'],'alertReason':_0x39a41a['alertReason']},'comfort':{'automationProposal':_0x39a41a[_0x1b700f(0xd3)]}}};_0x3ef2b3[_0x1b700f(0xc7)][_0x1b700f(0xba)](_0x82ccb5);if(_0x3ef2b3['analysisHistory'][_0x1b700f(0xfc)]>0x32)_0x3ef2b3[_0x1b700f(0xc7)][_0x1b700f(0x8e)]();await _0x3ef2b3['setStateAsync']('analysis.analysisHistory',{'val':JSON[_0x1b700f(0xcd)](_0x3ef2b3['analysisHistory']),'ack':!![]});const _0x2499c2=_0x39a41a[_0x1b700f(0x8b)]||![];_0x2499c2!==_0x3ef2b3[_0x1b700f(0xd5)]&&(await _0x3ef2b3['setStateAsync'](_0x1b700f(0xde),{'val':_0x2499c2,'ack':!![]}),_0x3ef2b3[_0x1b700f(0xd5)]=_0x2499c2,_0x2499c2&&(await _0x3ef2b3[_0x1b700f(0xe9)](_0x1b700f(0xe8),{'val':_0x39a41a[_0x1b700f(0xf2)],'ack':!![]}),setup[_0x1b700f(0xc1)](_0x3ef2b3,'‚ö†Ô∏è\x20ALARM:\x20'+_0x39a41a[_0x1b700f(0xf2)],![],_0x39a41a[_0x1b700f(0xd7)])));if(_0x39a41a['automationProposal']&&_0x39a41a['automationProposal']['detected']){await _0x3ef2b3[_0x1b700f(0xe9)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x3ef2b3[_0x1b700f(0xe9)](_0x1b700f(0xf5),{'val':_0x39a41a[_0x1b700f(0xd3)][_0x1b700f(0xaa)],'ack':!![]}),await _0x3ef2b3['setStateAsync'](_0x1b700f(0xeb),{'val':_0x39a41a[_0x1b700f(0xd3)]['targetId'],'ack':!![]}),await _0x3ef2b3[_0x1b700f(0xe9)]('analysis.automation.targetValue',{'val':JSON['stringify'](_0x39a41a[_0x1b700f(0xd3)][_0x1b700f(0xf9)]),'ack':!![]});if(_0x3eb7bb)executeAutomationAction(_0x3ef2b3);}}catch(_0x241236){_0x3ef2b3[_0x1b700f(0x108)]['error'](_0x1b700f(0xe0)+_0x241236[_0x1b700f(0xb3)]);}}async function createDailyDigest(_0x38dfa3,_0x5adc9a){const _0xc8449a=a0_0x3797fc;if(!_0x38dfa3[_0xc8449a(0xec)])return;if(!canCallApi()){await _0x38dfa3[_0xc8449a(0xe9)](LTM_DP_STATUS,{'val':_0xc8449a(0xd0),'ack':!![]});return;}await _0x38dfa3['setStateAsync'](LTM_DP_STATUS,{'val':_0xc8449a(0xd8),'ack':!![]});if(!_0x38dfa3[_0xc8449a(0xbd)]||_0x38dfa3[_0xc8449a(0xe6)][_0xc8449a(0xfc)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x38dfa3[_0xc8449a(0xe9)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x370906=JSON[_0xc8449a(0x90)](JSON[_0xc8449a(0xcd)](_0x38dfa3[_0xc8449a(0xe6)])),_0x2fcff3=_0x370906['length'],_0x11d956=_0xc8449a(0xa7)+JSON[_0xc8449a(0xcd)](_0x370906);try{updateApiTimestamp();const _0x4575e4=await _0x38dfa3['geminiModel']['generateContent'](_0x11d956),_0x3fd80e=JSON[_0xc8449a(0x90)](_0x4575e4[_0xc8449a(0x8f)][_0xc8449a(0xfa)]()[_0xc8449a(0xa4)](/```json|```/g,'')[_0xc8449a(0xb6)]()),_0x1798d5={'timestamp':new Date()['toISOString'](),'eventCount':_0x2fcff3,'summary':_0x3fd80e[_0xc8449a(0xbc)]||_0xc8449a(0x8a),'activityLevel':_0x3fd80e[_0xc8449a(0xf7)]||_0xc8449a(0xf8),'systemMode':_0x38dfa3[_0xc8449a(0xbf)]};_0x38dfa3[_0xc8449a(0xc8)]['push'](_0x1798d5);const _0x544ff8=_0x38dfa3[_0xc8449a(0xc5)][_0xc8449a(0x9c)]||0x3c;_0x38dfa3['dailyDigests'][_0xc8449a(0xfc)]>_0x544ff8&&_0x38dfa3[_0xc8449a(0xc8)][_0xc8449a(0xc3)](0x0,_0x38dfa3[_0xc8449a(0xc8)][_0xc8449a(0xfc)]-_0x544ff8);await _0x38dfa3[_0xc8449a(0xe9)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0xc8449a(0xcd)](_0x38dfa3[_0xc8449a(0xc8)]),'ack':!![]}),_0x38dfa3[_0xc8449a(0xe6)]=[],await _0x38dfa3[_0xc8449a(0xe9)](LTM_DP_RAW_LOG,{'val':JSON[_0xc8449a(0xcd)](_0x38dfa3[_0xc8449a(0xe6)]),'ack':!![]}),await _0x38dfa3[_0xc8449a(0xe9)](LTM_DP_STATUS,{'val':_0xc8449a(0x96),'ack':!![]});if(_0x38dfa3[_0xc8449a(0xec)]&&_0x5adc9a)_0x5adc9a['send'](_0x38dfa3,_0xc8449a(0xe3),{'digest':_0x1798d5});}catch(_0x182651){_0x38dfa3[_0xc8449a(0x108)]['error'](_0x182651[_0xc8449a(0xb3)]);}}async function runBaselineDriftAnalysis(_0x4533a2){const _0x27329e=a0_0x3797fc;if(!_0x4533a2[_0x27329e(0xec)]||!_0x4533a2[_0x27329e(0xbd)])return;if(!canCallApi())return;const _0xb345fe=_0x4533a2[_0x27329e(0xc5)]['ltmStbWindowDays']||0xe;if(_0x4533a2[_0x27329e(0xc8)]['length']<_0xb345fe+0x7){await _0x4533a2[_0x27329e(0xe9)](_0x27329e(0xcb),{'val':_0x27329e(0xe1),'ack':!![]});return;}const _0x5768d7=_0x4533a2[_0x27329e(0xc8)][_0x27329e(0xdf)](-_0xb345fe),_0x4cefb0=_0x4533a2[_0x27329e(0xc8)]['slice'](0x0,_0x4533a2[_0x27329e(0xc8)]['length']-_0xb345fe),_0x4b1188=_0x27329e(0xc9)+JSON[_0x27329e(0xcd)](_0x4cefb0)+_0x27329e(0xf4)+JSON['stringify'](_0x5768d7);try{updateApiTimestamp();const _0x372528=await _0x4533a2[_0x27329e(0xbd)][_0x27329e(0xb5)](_0x4b1188),_0x2981b3=JSON[_0x27329e(0x90)](_0x372528[_0x27329e(0x8f)][_0x27329e(0xfa)]()['replace'](/```json|```/g,'')[_0x27329e(0xb6)]());_0x2981b3[_0x27329e(0x95)]&&(await _0x4533a2['setStateAsync'](_0x27329e(0xcb),{'val':_0x2981b3[_0x27329e(0x95)],'ack':!![]}),await _0x4533a2[_0x27329e(0xe9)](_0x27329e(0x93),{'val':_0x2981b3['driftDetails'],'ack':!![]}),await _0x4533a2[_0x27329e(0xe9)](_0x27329e(0xc2),{'val':Date[_0x27329e(0xf1)](),'ack':!![]}));}catch(_0x4b02e5){}}async function executeAutomationAction(_0x1c2768){const _0x7f2a2=a0_0x3797fc;try{const _0x3cf3bd=await _0x1c2768['getStateAsync']('analysis.automation.targetId'),_0x490450=await _0x1c2768[_0x7f2a2(0xf6)](_0x7f2a2(0xb9));if(_0x3cf3bd&&_0x3cf3bd[_0x7f2a2(0xc4)]&&_0x490450){const _0x2cad64=_0x3cf3bd[_0x7f2a2(0xc4)];let _0x937bb1=_0x490450[_0x7f2a2(0xc4)];try{_0x937bb1=JSON['parse'](_0x937bb1);}catch(_0x47b08a){}_0x1c2768[_0x7f2a2(0x108)][_0x7f2a2(0xff)](_0x7f2a2(0xa5)+_0x2cad64+'\x20=\x20'+_0x937bb1),await _0x1c2768[_0x7f2a2(0x89)](_0x2cad64,_0x937bb1);}else _0x1c2768[_0x7f2a2(0x108)][_0x7f2a2(0xb8)](_0x7f2a2(0xa9));}catch(_0x3b3997){_0x1c2768[_0x7f2a2(0x108)][_0x7f2a2(0xa2)]('BUTLER\x20Execution\x20Error:\x20'+_0x3b3997['message']);}}async function sendMorningBriefing(_0x7e5df2){const _0x2184e6=a0_0x3797fc;if(!_0x7e5df2[_0x2184e6(0xbd)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x557bf2=_0x2184e6(0xfe),_0x2103ff=await _0x7e5df2['geminiModel'][_0x2184e6(0xb5)](_0x557bf2),_0x3e5e33=_0x2103ff[_0x2184e6(0x8f)][_0x2184e6(0xfa)]();setup['sendNotification'](_0x7e5df2,_0x2184e6(0xb4)+_0x3e5e33);}catch(_0x31a56e){_0x7e5df2[_0x2184e6(0x108)][_0x2184e6(0xa2)]('Briefing\x20Error:\x20'+_0x31a56e[_0x2184e6(0xb3)]);}}module[a0_0x3797fc(0x8d)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};