const a0_0x5805ea=a0_0x1f03;(function(_0x570150,_0x50148d){const _0x45b29c=a0_0x1f03,_0x88fd58=_0x570150();while(!![]){try{const _0x14566e=-parseInt(_0x45b29c(0xf1))/0x1+parseInt(_0x45b29c(0xe5))/0x2*(-parseInt(_0x45b29c(0xc8))/0x3)+-parseInt(_0x45b29c(0x9c))/0x4+parseInt(_0x45b29c(0xf9))/0x5*(parseInt(_0x45b29c(0xb7))/0x6)+-parseInt(_0x45b29c(0xcb))/0x7*(parseInt(_0x45b29c(0x95))/0x8)+parseInt(_0x45b29c(0xe0))/0x9*(-parseInt(_0x45b29c(0x8c))/0xa)+parseInt(_0x45b29c(0xdb))/0xb;if(_0x14566e===_0x50148d)break;else _0x88fd58['push'](_0x88fd58['shift']());}catch(_0x594a7e){_0x88fd58['push'](_0x88fd58['shift']());}}}(a0_0x2b59,0x66933));const a0_0x3f2fcb=(function(){let _0x67d86e=!![];return function(_0x4a1608,_0x4611ab){const _0x2c4b4c=_0x67d86e?function(){const _0x35402d=a0_0x1f03;if(_0x4611ab){const _0x1be4b5=_0x4611ab[_0x35402d(0x75)](_0x4a1608,arguments);return _0x4611ab=null,_0x1be4b5;}}:function(){};return _0x67d86e=![],_0x2c4b4c;};}()),a0_0x521a3c=a0_0x3f2fcb(this,function(){const _0x1e110b=a0_0x1f03;return a0_0x521a3c[_0x1e110b(0xbd)]()[_0x1e110b(0xa2)](_0x1e110b(0x8f))[_0x1e110b(0xbd)]()[_0x1e110b(0x7f)](a0_0x521a3c)[_0x1e110b(0xa2)](_0x1e110b(0x8f));});function a0_0x1f03(_0x20bbad,_0x13fb84){const _0x1c9e97=a0_0x2b59();return a0_0x1f03=function(_0x521a3c,_0x3f2fcb){_0x521a3c=_0x521a3c-0x6f;let _0x2b5950=_0x1c9e97[_0x521a3c];return _0x2b5950;},a0_0x1f03(_0x20bbad,_0x13fb84);}a0_0x521a3c();'use strict';const {GoogleGenerativeAI}=require(a0_0x5805ea(0xe1)),setup=require(a0_0x5805ea(0xee)),GEMINI_MODEL=a0_0x5805ea(0xd5),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x5805ea(0x87),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;function a0_0x2b59(){const _0x5687bb=['driftDetails','unshift','currentSystemMode','1693449TiHcDY','targetId','\x0aAktivitÃ¤t:\x20','147fUYIVs','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','.\x20ANWESEND:\x20','decision','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','analysis.isAlert',',\x20LichtverhÃ¤ltnisse:\x20','error','setForeignStateAsync','slice','models/gemini-flash-latest','Â°C,\x20','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','N/A\x20(Learning)',').\x20Sending\x20notification...','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','21190631YCwSGA','Nacht','.\x20KONTEXT:\x20','automationProposal','analysis.lastResult','27GHkTKp','@google/generative-ai','âš ï¸\x20ALARM:\x20','send','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','2kSZoMO','response','Keine\x20Details.','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','approved','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','isProVersion','./setup','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','toISOString','54596zOnaxe','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','length','parse',',\x20Wetter:\x20','info','.Current.Temperature','322675XSJjhg','val','.Current.IsNight','ltmLtbWindowDays','baselineDrift','system.presenceWho','splice','config','Unbekannt','apply','analysis.analysisHistory','toLocaleTimeString','log','Started...','KI-Fehler\x20(Fallback)','useWeather','Wetterdaten\x20nicht\x20abrufbar','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','text','constructor','.\x20EVENTS:\x20','analysisHistory','aiPersona','analysis.automation.autoApply','isAlert','setStateAsync','analysis.automation.patternDetected','LTM.processingStatus','ANALYZE_HEALTH','eventHistory','ðŸŒ…\x20Morning\x20Briefing:\x0a','trim','2478920alVZAk','\x0aSTB:\x20','warn','(((.+)+)+)+$','summary','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','targetValue','now','Briefing\x20Error:\x20','26888KkanFI','alertReason','analysis.automation.targetId','description','replace','.\x20SYSTEM_MODE:\x20','Digest','2615012JArUOP','detected','push','getForeignStateAsync','toFixed','.forecast.current.temperature','search','Gemini\x20Error:\x20','isEmergency','lastAlertState','getStateAsync','analysis.activitySummary','\x20->\x20','ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','.\x20EMERGENCY:\x20','.Current.WeatherText','Success','generic','ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20','ðŸ“…\x20Daily\x20Digest:\x0a','%)\x20nach\x20\x22','livingContext','analysis.automation.targetValue','Sicherheit\x20geht\x20vor.','stringify','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','activityLevel','54UwzygF','analysis.automation.description','generateContent','debug','rawEventLog','BUTLER\x20Execution\x20Error:\x20','toString','dailyDigests','reason','geminiModel','pop','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','sendNotification','weatherInstance'];a0_0x2b59=function(){return _0x5687bb;};return a0_0x2b59();}const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':a0_0x5805ea(0xcf),'family':'Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','single_comfort':a0_0x5805ea(0xeb),'security':a0_0x5805ea(0xb3),'energy_saver':a0_0x5805ea(0x7d)};function canCallApi(){const _0x4548ab=a0_0x5805ea,_0x49f65a=Date[_0x4548ab(0x93)]();return _0x49f65a-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x11f90f=a0_0x5805ea;lastGlobalApiCall=Date[_0x11f90f(0x93)]();}async function getWeatherContext(_0x4e92e1){const _0x2fddb7=a0_0x5805ea;if(!_0x4e92e1[_0x2fddb7(0x73)][_0x2fddb7(0x7b)]||!_0x4e92e1[_0x2fddb7(0x73)][_0x2fddb7(0xc4)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x2cc7e5=_0x4e92e1[_0x2fddb7(0x73)][_0x2fddb7(0xc4)];let _0xd366c5=await _0x4e92e1[_0x2fddb7(0x9f)](_0x2cc7e5+_0x2fddb7(0xf8));if(!_0xd366c5)_0xd366c5=await _0x4e92e1[_0x2fddb7(0x9f)](_0x2cc7e5+_0x2fddb7(0xa1));let _0x421169=await _0x4e92e1['getForeignStateAsync'](_0x2cc7e5+_0x2fddb7(0xab));if(!_0x421169)_0x421169=await _0x4e92e1['getForeignStateAsync'](_0x2cc7e5+'.forecast.current.state');let _0x2ad93d='Unbekannt';const _0x3b898e=await _0x4e92e1[_0x2fddb7(0x9f)](_0x2cc7e5+_0x2fddb7(0xfb));if(_0x3b898e)_0x2ad93d=_0x3b898e[_0x2fddb7(0xfa)]?_0x2fddb7(0xdc):'Tag';if(_0xd366c5&&_0x421169)return _0xd366c5['val']+_0x2fddb7(0xd6)+_0x421169[_0x2fddb7(0xfa)]+_0x2fddb7(0xd1)+_0x2ad93d;}catch(_0x213752){}return _0x2fddb7(0x7c);}async function consultButler(_0x190350,_0x347e68,_0x2d907d,_0x390326){const _0x6b023e=a0_0x5805ea;if(!_0x190350[_0x6b023e(0xc0)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x3d1015=Date[_0x6b023e(0x93)]();if(decisionCache[_0x347e68]&&_0x3d1015-decisionCache[_0x347e68]['timestamp']<CACHE_TTL_MS){const _0x187cba=decisionCache[_0x347e68][_0x6b023e(0xce)];return _0x190350[_0x6b023e(0x78)]['debug'](_0x6b023e(0xb5)+_0x347e68+_0x6b023e(0xa8)+(_0x187cba[_0x6b023e(0xe9)]?'OK':'NO')+'\x20('+_0x187cba[_0x6b023e(0xbf)]+')'),_0x187cba;}if(!canCallApi())return _0x190350[_0x6b023e(0x78)][_0x6b023e(0xba)]('ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20'+_0x347e68+'\x20Ã¼bersprungen\x20(Auto-Approved).'),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x10b58e=new Date()[_0x6b023e(0x77)](),_0x3235fd=await getWeatherContext(_0x190350),_0x1bcacd=PERSONA_MAPPING[_0x190350[_0x6b023e(0x73)][_0x6b023e(0x82)]||_0x6b023e(0xad)],_0x272892=_0x6b023e(0xd7)+_0x10b58e+_0x6b023e(0xf6)+_0x3235fd+_0x6b023e(0xf2)+(_0x390326*0x64)[_0x6b023e(0xa0)](0x0)+_0x6b023e(0xb0)+_0x347e68+'\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22'+_0x2d907d+_0x6b023e(0xef)+_0x1bcacd+_0x6b023e(0x91);try{updateApiTimestamp();const _0x25034d=await _0x190350[_0x6b023e(0xc0)][_0x6b023e(0xb9)](_0x272892),_0x3e7aaa=_0x25034d[_0x6b023e(0xe6)][_0x6b023e(0x7e)]()[_0x6b023e(0x99)](/```json|```/g,'')[_0x6b023e(0x8b)](),_0x26dd64=JSON['parse'](_0x3e7aaa);return decisionCache[_0x347e68]={'decision':_0x26dd64,'timestamp':_0x3d1015},_0x26dd64;}catch(_0x5c9a82){return _0x190350[_0x6b023e(0x78)][_0x6b023e(0x8e)](_0x6b023e(0xea)+_0x5c9a82['message']),decisionCache[_0x347e68]={'decision':{'approved':!![],'reason':_0x6b023e(0x7a)},'timestamp':_0x3d1015-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x6b023e(0x7a)};}}async function runGeminiAnalysis(_0x42be65,_0x2f3c47=''){const _0x27b4f9=a0_0x5805ea;if(!_0x42be65[_0x27b4f9(0xc0)])return;if(!canCallApi()){_0x42be65[_0x27b4f9(0x78)][_0x27b4f9(0xba)](_0x27b4f9(0xf3));return;}if(_0x42be65['eventHistory']['length']===0x0)return;const _0x300923=_0x42be65[_0x27b4f9(0x89)]['slice'](0x0,0xf),_0x5afe6f=_0x42be65[_0x27b4f9(0xc7)],_0x51223f=PERSONA_MAPPING[_0x42be65[_0x27b4f9(0x73)]['aiPersona']||_0x27b4f9(0xad)],_0x407d4a=_0x42be65[_0x27b4f9(0x73)][_0x27b4f9(0xb1)]||_0x27b4f9(0xe7);let _0x6480c7=_0x27b4f9(0x74);try{const _0xb30ac2=await _0x42be65['getStateAsync'](_0x27b4f9(0x71));if(_0xb30ac2&&_0xb30ac2[_0x27b4f9(0xfa)])_0x6480c7=_0xb30ac2['val'];}catch(_0xbe066c){}let _0x74187d=![];try{const _0x163bb3=await _0x42be65[_0x27b4f9(0xa6)](_0x27b4f9(0x83));if(_0x163bb3&&_0x163bb3[_0x27b4f9(0xfa)])_0x74187d=!![];}catch(_0x4f92df){}const _0x3844cc=_0x27b4f9(0xc2)+_0x51223f+_0x27b4f9(0xdd)+_0x407d4a+_0x27b4f9(0x9a)+_0x5afe6f+_0x27b4f9(0xcd)+_0x6480c7+_0x27b4f9(0x80)+JSON[_0x27b4f9(0xb4)](_0x300923)+_0x27b4f9(0xaa)+_0x2f3c47+_0x27b4f9(0xe4);try{updateApiTimestamp();const _0x182031=await _0x42be65[_0x27b4f9(0xc0)][_0x27b4f9(0xb9)](_0x3844cc),_0x5ef82e=JSON[_0x27b4f9(0xf5)](_0x182031[_0x27b4f9(0xe6)]['text']()[_0x27b4f9(0x99)](/```json|```/g,'')[_0x27b4f9(0x8b)]());await _0x42be65[_0x27b4f9(0x85)](_0x27b4f9(0xdf),{'val':JSON[_0x27b4f9(0xb4)](_0x5ef82e),'ack':!![]});if(_0x5ef82e[_0x27b4f9(0x90)])await _0x42be65[_0x27b4f9(0x85)](_0x27b4f9(0xa7),{'val':_0x5ef82e[_0x27b4f9(0x90)],'ack':!![]});const _0x11ebb9={'timestamp':Date[_0x27b4f9(0x93)](),'id':Date[_0x27b4f9(0x93)]()['toString'](),'analysis':{'activity':{'summary':_0x5ef82e[_0x27b4f9(0x90)],'isAlert':_0x5ef82e['isAlert'],'alertReason':_0x5ef82e['alertReason']},'comfort':{'automationProposal':_0x5ef82e[_0x27b4f9(0xde)]}}};_0x42be65['analysisHistory'][_0x27b4f9(0xc6)](_0x11ebb9);if(_0x42be65[_0x27b4f9(0x81)][_0x27b4f9(0xf4)]>0x32)_0x42be65[_0x27b4f9(0x81)][_0x27b4f9(0xc1)]();await _0x42be65['setStateAsync'](_0x27b4f9(0x76),{'val':JSON[_0x27b4f9(0xb4)](_0x42be65['analysisHistory']),'ack':!![]});const _0xed93c8=_0x5ef82e[_0x27b4f9(0x84)]||![];_0xed93c8!==_0x42be65[_0x27b4f9(0xa5)]&&(await _0x42be65[_0x27b4f9(0x85)](_0x27b4f9(0xd0),{'val':_0xed93c8,'ack':!![]}),_0x42be65[_0x27b4f9(0xa5)]=_0xed93c8,_0xed93c8&&(await _0x42be65['setStateAsync']('analysis.alertReason',{'val':_0x5ef82e[_0x27b4f9(0x96)],'ack':!![]}),setup['sendNotification'](_0x42be65,_0x27b4f9(0xe2)+_0x5ef82e[_0x27b4f9(0x96)],![],_0x5ef82e[_0x27b4f9(0xa4)])));if(_0x5ef82e[_0x27b4f9(0xde)]&&_0x5ef82e['automationProposal'][_0x27b4f9(0x9d)]){await _0x42be65[_0x27b4f9(0x85)](_0x27b4f9(0x86),{'val':!![],'ack':!![]}),await _0x42be65['setStateAsync'](_0x27b4f9(0xb8),{'val':_0x5ef82e[_0x27b4f9(0xde)][_0x27b4f9(0x98)],'ack':!![]}),await _0x42be65[_0x27b4f9(0x85)]('analysis.automation.targetId',{'val':_0x5ef82e[_0x27b4f9(0xde)][_0x27b4f9(0xc9)],'ack':!![]}),await _0x42be65[_0x27b4f9(0x85)](_0x27b4f9(0xb2),{'val':JSON['stringify'](_0x5ef82e[_0x27b4f9(0xde)][_0x27b4f9(0x92)]),'ack':!![]});if(_0x74187d)executeAutomationAction(_0x42be65);}}catch(_0x831c7d){_0x42be65['log']['error'](_0x27b4f9(0xa3)+_0x831c7d['message']);}}async function createDailyDigest(_0x2c2326,_0x89bbac){const _0x4a81d8=a0_0x5805ea;if(!_0x2c2326['isProVersion'])return;if(!canCallApi()){await _0x2c2326['setStateAsync'](LTM_DP_STATUS,{'val':'Skipped\x20(Traffic)','ack':!![]});return;}await _0x2c2326[_0x4a81d8(0x85)](LTM_DP_STATUS,{'val':_0x4a81d8(0x79),'ack':!![]});if(!_0x2c2326[_0x4a81d8(0xc0)]||_0x2c2326[_0x4a81d8(0xbb)][_0x4a81d8(0xf4)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x2c2326[_0x4a81d8(0x85)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0xd5fc47=JSON[_0x4a81d8(0xf5)](JSON[_0x4a81d8(0xb4)](_0x2c2326['rawEventLog'])),_0x293861=_0xd5fc47[_0x4a81d8(0xf4)],_0x51da8e='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x4a81d8(0xb4)](_0xd5fc47);try{updateApiTimestamp();const _0x14afac=await _0x2c2326[_0x4a81d8(0xc0)]['generateContent'](_0x51da8e),_0x874742=JSON[_0x4a81d8(0xf5)](_0x14afac[_0x4a81d8(0xe6)][_0x4a81d8(0x7e)]()[_0x4a81d8(0x99)](/```json|```/g,'')[_0x4a81d8(0x8b)]()),_0xd34eee={'timestamp':new Date()[_0x4a81d8(0xf0)](),'eventCount':_0x293861,'summary':_0x874742[_0x4a81d8(0x90)]||_0x4a81d8(0x9b),'activityLevel':_0x874742[_0x4a81d8(0xb6)]||'normal','systemMode':_0x2c2326[_0x4a81d8(0xc7)]};_0x2c2326[_0x4a81d8(0xbe)][_0x4a81d8(0x9e)](_0xd34eee);const _0x378dcd=_0x2c2326[_0x4a81d8(0x73)][_0x4a81d8(0x6f)]||0x3c;_0x2c2326[_0x4a81d8(0xbe)][_0x4a81d8(0xf4)]>_0x378dcd&&_0x2c2326[_0x4a81d8(0xbe)][_0x4a81d8(0x72)](0x0,_0x2c2326['dailyDigests'][_0x4a81d8(0xf4)]-_0x378dcd);await _0x2c2326[_0x4a81d8(0x85)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x4a81d8(0xb4)](_0x2c2326[_0x4a81d8(0xbe)]),'ack':!![]}),_0x2c2326[_0x4a81d8(0xbb)]=[],await _0x2c2326[_0x4a81d8(0x85)](LTM_DP_RAW_LOG,{'val':JSON[_0x4a81d8(0xb4)](_0x2c2326[_0x4a81d8(0xbb)]),'ack':!![]}),await _0x2c2326[_0x4a81d8(0x85)](LTM_DP_STATUS,{'val':_0x4a81d8(0xac),'ack':!![]});const _0x14bf3a=_0x4a81d8(0xaf)+_0x874742[_0x4a81d8(0x90)]+_0x4a81d8(0xca)+_0x874742[_0x4a81d8(0xb6)];setup[_0x4a81d8(0xc3)](_0x2c2326,_0x14bf3a,![],![]);if(_0x2c2326[_0x4a81d8(0xed)]&&_0x89bbac)_0x89bbac[_0x4a81d8(0xe3)](_0x2c2326,_0x4a81d8(0x88),{'digest':_0xd34eee});}catch(_0x17ad9c){_0x2c2326[_0x4a81d8(0x78)]['error'](_0x17ad9c['message']);}}async function runBaselineDriftAnalysis(_0x5be922){const _0x4b8e14=a0_0x5805ea;if(!_0x5be922[_0x4b8e14(0xed)]||!_0x5be922[_0x4b8e14(0xc0)])return;if(!canCallApi())return;const _0x14ffad=_0x5be922[_0x4b8e14(0x73)]['ltmStbWindowDays']||0xe;if(_0x5be922['dailyDigests'][_0x4b8e14(0xf4)]<_0x14ffad+0x7){await _0x5be922['setStateAsync']('LTM.driftAnalysis.baselineDrift',{'val':_0x4b8e14(0xd8),'ack':!![]});return;}const _0xe2a9ca=_0x5be922['dailyDigests'][_0x4b8e14(0xd4)](-_0x14ffad),_0x32c863=_0x5be922[_0x4b8e14(0xbe)][_0x4b8e14(0xd4)](0x0,_0x5be922[_0x4b8e14(0xbe)][_0x4b8e14(0xf4)]-_0x14ffad),_0x1c9b74='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x4b8e14(0xb4)](_0x32c863)+_0x4b8e14(0x8d)+JSON[_0x4b8e14(0xb4)](_0xe2a9ca);try{updateApiTimestamp();const _0x48c166=await _0x5be922[_0x4b8e14(0xc0)][_0x4b8e14(0xb9)](_0x1c9b74),_0x52bb75=JSON[_0x4b8e14(0xf5)](_0x48c166['response']['text']()['replace'](/```json|```/g,'')[_0x4b8e14(0x8b)]());_0x52bb75[_0x4b8e14(0x70)]&&(await _0x5be922[_0x4b8e14(0x85)]('LTM.driftAnalysis.baselineDrift',{'val':_0x52bb75['baselineDrift'],'ack':!![]}),await _0x5be922[_0x4b8e14(0x85)]('LTM.driftAnalysis.driftDetails',{'val':_0x52bb75[_0x4b8e14(0xc5)],'ack':!![]}),await _0x5be922[_0x4b8e14(0x85)]('LTM.driftAnalysis.lastCheck',{'val':Date[_0x4b8e14(0x93)](),'ack':!![]}));}catch(_0x4b2071){}}async function executeAutomationAction(_0x5586fb){const _0x4e9f5f=a0_0x5805ea;try{const _0x18cdce=await _0x5586fb[_0x4e9f5f(0xa6)](_0x4e9f5f(0x97)),_0x217292=await _0x5586fb[_0x4e9f5f(0xa6)]('analysis.automation.targetValue');if(_0x18cdce&&_0x18cdce['val']&&_0x217292){const _0x33e8ad=_0x18cdce[_0x4e9f5f(0xfa)];let _0x56e450=_0x217292['val'];try{_0x56e450=JSON[_0x4e9f5f(0xf5)](_0x56e450);}catch(_0x1eddff){}_0x5586fb[_0x4e9f5f(0x78)][_0x4e9f5f(0xf7)](_0x4e9f5f(0xcc)+_0x33e8ad+'\x20=\x20'+_0x56e450),await _0x5586fb[_0x4e9f5f(0xd3)](_0x33e8ad,_0x56e450);}else _0x5586fb[_0x4e9f5f(0x78)][_0x4e9f5f(0x8e)](_0x4e9f5f(0xe8));}catch(_0x482fa){_0x5586fb[_0x4e9f5f(0x78)][_0x4e9f5f(0xd2)](_0x4e9f5f(0xbc)+_0x482fa['message']);}}async function sendMorningBriefing(_0x4d8659){const _0x21c329=a0_0x5805ea;if(!_0x4d8659[_0x21c329(0xc0)]){_0x4d8659[_0x21c329(0x78)][_0x21c329(0x8e)](_0x21c329(0xa9));return;}_0x4d8659[_0x21c329(0x78)][_0x21c329(0xf7)](_0x21c329(0xec));try{updateApiTimestamp();const _0x26234d=_0x21c329(0xda),_0x3b97d6=await _0x4d8659[_0x21c329(0xc0)][_0x21c329(0xb9)](_0x26234d),_0x2e0fdd=_0x3b97d6[_0x21c329(0xe6)][_0x21c329(0x7e)]();_0x4d8659[_0x21c329(0x78)]['info'](_0x21c329(0xae)+_0x2e0fdd['length']+_0x21c329(0xd9)),setup[_0x21c329(0xc3)](_0x4d8659,_0x21c329(0x8a)+_0x2e0fdd);}catch(_0x867c28){_0x4d8659[_0x21c329(0x78)]['error'](_0x21c329(0x94)+_0x867c28['message']);}}module['exports']={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};