const a0_0x398a0b=a0_0x1dcc;(function(_0x1f515d,_0x19f684){const _0x5f4861=a0_0x1dcc,_0x28ee6c=_0x1f515d();while(!![]){try{const _0x566866=-parseInt(_0x5f4861(0x24c))/0x1+-parseInt(_0x5f4861(0x216))/0x2+parseInt(_0x5f4861(0x210))/0x3*(parseInt(_0x5f4861(0x25d))/0x4)+parseInt(_0x5f4861(0x238))/0x5*(-parseInt(_0x5f4861(0x204))/0x6)+parseInt(_0x5f4861(0x26c))/0x7+parseInt(_0x5f4861(0x20f))/0x8+-parseInt(_0x5f4861(0x21a))/0x9;if(_0x566866===_0x19f684)break;else _0x28ee6c['push'](_0x28ee6c['shift']());}catch(_0x5701e7){_0x28ee6c['push'](_0x28ee6c['shift']());}}}(a0_0x30ef,0x348b4));const a0_0x44ee63=(function(){let _0x578d35=!![];return function(_0x3d6cc,_0x5c9974){const _0x482347=_0x578d35?function(){const _0x5bbf41=a0_0x1dcc;if(_0x5c9974){const _0x5c7f5b=_0x5c9974[_0x5bbf41(0x202)](_0x3d6cc,arguments);return _0x5c9974=null,_0x5c7f5b;}}:function(){};return _0x578d35=![],_0x482347;};}()),a0_0x5b2d96=a0_0x44ee63(this,function(){const _0x579258=a0_0x1dcc;return a0_0x5b2d96[_0x579258(0x23a)]()['search'](_0x579258(0x1fe))[_0x579258(0x23a)]()[_0x579258(0x22f)](a0_0x5b2d96)[_0x579258(0x26e)](_0x579258(0x1fe));});a0_0x5b2d96();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require(a0_0x398a0b(0x265)),GEMINI_MODEL=a0_0x398a0b(0x262),LTM_DP_DAILY_DIGESTS=a0_0x398a0b(0x215),LTM_DP_STATUS=a0_0x398a0b(0x267),LTM_DP_RAW_LOG=a0_0x398a0b(0x25b),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x398a0b(0x228),'senior_aal':a0_0x398a0b(0x21d),'family':'Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x398a0b(0x245)};function a0_0x30ef(){const _0x4525bb=['debug','ü§ñ\x20Butler\x20Brain\x20Error:\x20','length','.\x20SYSTEM_MODE:\x20','LTM.rawEventLog','decision','32LRSHLK','sendNotification','BUTLER\x20Execution\x20Error:\x20','send','analysis.alertReason','models/gemini-flash-latest','message','summary','./setup','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','LTM.processingStatus','analysis.isAlert','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','reason','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','2676387vgjuWc','Started...','search','toISOString','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','getForeignStateAsync','.\x20KONTEXT:\x20','setForeignStateAsync','\x0aSTB:\x20','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','activityLevel','trim','¬∞C,\x20','replace','livingContext','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','automationProposal','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','parse','lastAlertState','alertReason','unshift','config','(((.+)+)+)+$','analysis.automation.autoApply','LTM.driftAnalysis.driftDetails','Tag','apply','Unbekannt\x20(Kein\x20Sensor)','186GBbTXP','response',',\x20Lichtverh√§ltnisse:\x20','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','stringify','analysisHistory','analysis.analysisHistory','toFixed','aiPersona','Digest','\x20=\x20','2464904zBAwFj','113217MHhvxm','Traffic-Schutz\x20(Auto-Approved)','getStateAsync','LTM.driftAnalysis.baselineDrift','warn','LTM.dailyDigests','653316EjceVX','.Current.IsNight','Skipped\x20(No\x20AI\x20or\x20Data)','weatherInstance','1384380bWPbae','Skipped\x20(Traffic)','exports','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','dailyDigests','driftDetails','log','error','Keine\x20Details.','slice','push','rawEventLog','analysis.automation.targetId','timestamp','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','Unbekannt','Nacht','%)\x20nach\x20\x22','eventHistory',',\x20Wetter:\x20','constructor','ltmLtbWindowDays','isEmergency','currentSystemMode','.Current.WeatherText','targetValue','info','generic','LTM.driftAnalysis.lastCheck','29635AAjCUi','text','toString','now','üåÖ\x20Morning\x20Briefing:\x0a','val','normal','ltmStbWindowDays','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','pop','analysis.lastResult','geminiModel','isProVersion','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','\x20√ºbersprungen\x20(Auto-Approved).','description','baselineDrift','N/A\x20(Learning)','splice','setStateAsync','112931sxqXGv','useWeather','.\x20EMERGENCY:\x20','system.presenceWho','KI-Fehler\x20(Fallback)','targetId','analysis.automation.targetValue','generateContent','detected','approved','analysis.activitySummary'];a0_0x30ef=function(){return _0x4525bb;};return a0_0x30ef();}function canCallApi(){const _0x3d8ad2=a0_0x398a0b,_0x2fc41a=Date[_0x3d8ad2(0x23b)]();return _0x2fc41a-lastGlobalApiCall>MIN_API_GAP_MS;}function a0_0x1dcc(_0x506b54,_0x5e8e22){const _0x524ca7=a0_0x30ef();return a0_0x1dcc=function(_0x5b2d96,_0x44ee63){_0x5b2d96=_0x5b2d96-0x1eb;let _0x30ef8f=_0x524ca7[_0x5b2d96];return _0x30ef8f;},a0_0x1dcc(_0x506b54,_0x5e8e22);}function updateApiTimestamp(){const _0xbbd42b=a0_0x398a0b;lastGlobalApiCall=Date[_0xbbd42b(0x23b)]();}async function getWeatherContext(_0x2f2f79){const _0x3c5798=a0_0x398a0b;if(!_0x2f2f79[_0x3c5798(0x1fd)][_0x3c5798(0x24d)]||!_0x2f2f79[_0x3c5798(0x1fd)]['weatherInstance'])return _0x3c5798(0x203);try{const _0x547ca0=_0x2f2f79[_0x3c5798(0x1fd)][_0x3c5798(0x219)];let _0x150e03=await _0x2f2f79[_0x3c5798(0x1ec)](_0x547ca0+'.Current.Temperature');if(!_0x150e03)_0x150e03=await _0x2f2f79['getForeignStateAsync'](_0x547ca0+'.forecast.current.temperature');let _0x11f83a=await _0x2f2f79[_0x3c5798(0x1ec)](_0x547ca0+_0x3c5798(0x233));if(!_0x11f83a)_0x11f83a=await _0x2f2f79['getForeignStateAsync'](_0x547ca0+'.forecast.current.state');let _0x236a3b=_0x3c5798(0x22a);const _0x4a6d60=await _0x2f2f79[_0x3c5798(0x1ec)](_0x547ca0+_0x3c5798(0x217));if(_0x4a6d60)_0x236a3b=_0x4a6d60[_0x3c5798(0x23d)]?_0x3c5798(0x22b):_0x3c5798(0x201);if(_0x150e03&&_0x11f83a)return _0x150e03[_0x3c5798(0x23d)]+_0x3c5798(0x1f3)+_0x11f83a['val']+_0x3c5798(0x206)+_0x236a3b;}catch(_0x4d767e){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x46eaa7,_0x59f6e1,_0x3c76f2,_0x3c3d0b){const _0x441383=a0_0x398a0b;if(!_0x46eaa7[_0x441383(0x243)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x27107f=Date[_0x441383(0x23b)]();if(decisionCache[_0x59f6e1]&&_0x27107f-decisionCache[_0x59f6e1][_0x441383(0x227)]<CACHE_TTL_MS){const _0xcd5fc7=decisionCache[_0x59f6e1][_0x441383(0x25c)];return _0x46eaa7[_0x441383(0x220)][_0x441383(0x257)]('ü§ñ\x20Butler\x20Cache\x20Hit:\x20'+_0x59f6e1+'\x20->\x20'+(_0xcd5fc7[_0x441383(0x255)]?'OK':'NO')+'\x20('+_0xcd5fc7[_0x441383(0x26a)]+')'),_0xcd5fc7;}if(!canCallApi())return _0x46eaa7[_0x441383(0x220)]['debug'](_0x441383(0x1f0)+_0x59f6e1+_0x441383(0x246)),{'approved':!![],'reason':_0x441383(0x211)};const _0x21826a=new Date()['toLocaleTimeString'](),_0x384828=await getWeatherContext(_0x46eaa7),_0x2a8b8a=PERSONA_MAPPING[_0x46eaa7[_0x441383(0x1fd)][_0x441383(0x20c)]||_0x441383(0x236)],_0x4bbe5b=_0x441383(0x26b)+_0x21826a+_0x441383(0x22e)+_0x384828+_0x441383(0x269)+(_0x3c3d0b*0x64)[_0x441383(0x20b)](0x0)+_0x441383(0x22c)+_0x59f6e1+_0x441383(0x1f8)+_0x3c76f2+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x2a8b8a+_0x441383(0x1eb);try{updateApiTimestamp();const _0x4bbde9=await _0x46eaa7['geminiModel'][_0x441383(0x253)](_0x4bbe5b),_0x16b18d=_0x4bbde9[_0x441383(0x205)][_0x441383(0x239)]()['replace'](/```json|```/g,'')[_0x441383(0x1f2)](),_0x4b42b3=JSON['parse'](_0x16b18d);return decisionCache[_0x59f6e1]={'decision':_0x4b42b3,'timestamp':_0x27107f},_0x4b42b3;}catch(_0x4806fe){return _0x46eaa7[_0x441383(0x220)][_0x441383(0x214)](_0x441383(0x258)+_0x4806fe[_0x441383(0x263)]),decisionCache[_0x59f6e1]={'decision':{'approved':!![],'reason':_0x441383(0x250)},'timestamp':_0x27107f-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x441383(0x250)};}}async function runGeminiAnalysis(_0x5bf819,_0x2e5b95=''){const _0x1e857b=a0_0x398a0b;if(!_0x5bf819['geminiModel'])return;if(!canCallApi()){_0x5bf819[_0x1e857b(0x220)][_0x1e857b(0x257)]('ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x5bf819[_0x1e857b(0x22d)]['length']===0x0)return;const _0x218657=_0x5bf819[_0x1e857b(0x22d)]['slice'](0x0,0xf),_0x4cdd85=_0x5bf819['currentSystemMode'],_0x582a4a=PERSONA_MAPPING[_0x5bf819[_0x1e857b(0x1fd)][_0x1e857b(0x20c)]||_0x1e857b(0x236)],_0x105771=_0x5bf819[_0x1e857b(0x1fd)][_0x1e857b(0x1f5)]||_0x1e857b(0x222);let _0x22d886=_0x1e857b(0x22a);try{const _0x3b6d66=await _0x5bf819[_0x1e857b(0x212)](_0x1e857b(0x24f));if(_0x3b6d66&&_0x3b6d66['val'])_0x22d886=_0x3b6d66[_0x1e857b(0x23d)];}catch(_0x43011e){}let _0x5d5218=![];try{const _0x2e40c6=await _0x5bf819[_0x1e857b(0x212)](_0x1e857b(0x1ff));if(_0x2e40c6&&_0x2e40c6['val'])_0x5d5218=!![];}catch(_0x19b1a4){}const _0x549f1c=_0x1e857b(0x266)+_0x582a4a+_0x1e857b(0x1ed)+_0x105771+_0x1e857b(0x25a)+_0x4cdd85+'.\x20ANWESEND:\x20'+_0x22d886+'.\x20EVENTS:\x20'+JSON[_0x1e857b(0x208)](_0x218657)+_0x1e857b(0x24e)+_0x2e5b95+_0x1e857b(0x240);try{updateApiTimestamp();const _0x30a21f=await _0x5bf819[_0x1e857b(0x243)][_0x1e857b(0x253)](_0x549f1c),_0xdcd33c=JSON[_0x1e857b(0x1f9)](_0x30a21f[_0x1e857b(0x205)][_0x1e857b(0x239)]()[_0x1e857b(0x1f4)](/```json|```/g,'')[_0x1e857b(0x1f2)]());await _0x5bf819[_0x1e857b(0x24b)](_0x1e857b(0x242),{'val':JSON[_0x1e857b(0x208)](_0xdcd33c),'ack':!![]});if(_0xdcd33c[_0x1e857b(0x264)])await _0x5bf819[_0x1e857b(0x24b)](_0x1e857b(0x256),{'val':_0xdcd33c[_0x1e857b(0x264)],'ack':!![]});const _0x562f76={'timestamp':Date['now'](),'id':Date[_0x1e857b(0x23b)]()[_0x1e857b(0x23a)](),'analysis':{'activity':{'summary':_0xdcd33c[_0x1e857b(0x264)],'isAlert':_0xdcd33c['isAlert'],'alertReason':_0xdcd33c[_0x1e857b(0x1fb)]},'comfort':{'automationProposal':_0xdcd33c[_0x1e857b(0x1f7)]}}};_0x5bf819[_0x1e857b(0x209)][_0x1e857b(0x1fc)](_0x562f76);if(_0x5bf819['analysisHistory'][_0x1e857b(0x259)]>0x32)_0x5bf819[_0x1e857b(0x209)][_0x1e857b(0x241)]();await _0x5bf819[_0x1e857b(0x24b)](_0x1e857b(0x20a),{'val':JSON[_0x1e857b(0x208)](_0x5bf819[_0x1e857b(0x209)]),'ack':!![]});const _0x327a9a=_0xdcd33c['isAlert']||![];_0x327a9a!==_0x5bf819['lastAlertState']&&(await _0x5bf819[_0x1e857b(0x24b)](_0x1e857b(0x268),{'val':_0x327a9a,'ack':!![]}),_0x5bf819[_0x1e857b(0x1fa)]=_0x327a9a,_0x327a9a&&(await _0x5bf819[_0x1e857b(0x24b)](_0x1e857b(0x261),{'val':_0xdcd33c[_0x1e857b(0x1fb)],'ack':!![]}),setup[_0x1e857b(0x25e)](_0x5bf819,'‚ö†Ô∏è\x20ALARM:\x20'+_0xdcd33c[_0x1e857b(0x1fb)],![],_0xdcd33c[_0x1e857b(0x231)])));if(_0xdcd33c[_0x1e857b(0x1f7)]&&_0xdcd33c[_0x1e857b(0x1f7)][_0x1e857b(0x254)]){await _0x5bf819[_0x1e857b(0x24b)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x5bf819[_0x1e857b(0x24b)]('analysis.automation.description',{'val':_0xdcd33c['automationProposal'][_0x1e857b(0x247)],'ack':!![]}),await _0x5bf819['setStateAsync'](_0x1e857b(0x226),{'val':_0xdcd33c[_0x1e857b(0x1f7)][_0x1e857b(0x251)],'ack':!![]}),await _0x5bf819[_0x1e857b(0x24b)]('analysis.automation.targetValue',{'val':JSON[_0x1e857b(0x208)](_0xdcd33c[_0x1e857b(0x1f7)][_0x1e857b(0x234)]),'ack':!![]});if(_0x5d5218)executeAutomationAction(_0x5bf819);}}catch(_0x4d73c5){_0x5bf819[_0x1e857b(0x220)][_0x1e857b(0x221)]('Gemini\x20Error:\x20'+_0x4d73c5[_0x1e857b(0x263)]);}}async function createDailyDigest(_0x1abb6b,_0x3b9ad7){const _0x40ad24=a0_0x398a0b;if(!_0x1abb6b['isProVersion'])return;if(!canCallApi()){await _0x1abb6b[_0x40ad24(0x24b)](LTM_DP_STATUS,{'val':_0x40ad24(0x21b),'ack':!![]});return;}await _0x1abb6b[_0x40ad24(0x24b)](LTM_DP_STATUS,{'val':_0x40ad24(0x26d),'ack':!![]});if(!_0x1abb6b[_0x40ad24(0x243)]||_0x1abb6b['rawEventLog'][_0x40ad24(0x259)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x1abb6b[_0x40ad24(0x24b)](LTM_DP_STATUS,{'val':_0x40ad24(0x218),'ack':!![]});return;}const _0x231827=JSON[_0x40ad24(0x1f9)](JSON[_0x40ad24(0x208)](_0x1abb6b[_0x40ad24(0x225)])),_0x3e88db=_0x231827[_0x40ad24(0x259)],_0x2fc310=_0x40ad24(0x1f6)+JSON['stringify'](_0x231827);try{updateApiTimestamp();const _0x3be401=await _0x1abb6b['geminiModel'][_0x40ad24(0x253)](_0x2fc310),_0xfa56f4=JSON['parse'](_0x3be401[_0x40ad24(0x205)][_0x40ad24(0x239)]()[_0x40ad24(0x1f4)](/```json|```/g,'')[_0x40ad24(0x1f2)]()),_0x3aef3e={'timestamp':new Date()[_0x40ad24(0x26f)](),'eventCount':_0x3e88db,'summary':_0xfa56f4['summary']||_0x40ad24(0x20d),'activityLevel':_0xfa56f4[_0x40ad24(0x1f1)]||_0x40ad24(0x23e),'systemMode':_0x1abb6b[_0x40ad24(0x232)]};_0x1abb6b[_0x40ad24(0x21e)][_0x40ad24(0x224)](_0x3aef3e);const _0x3c89e3=_0x1abb6b[_0x40ad24(0x1fd)][_0x40ad24(0x230)]||0x3c;_0x1abb6b[_0x40ad24(0x21e)][_0x40ad24(0x259)]>_0x3c89e3&&_0x1abb6b[_0x40ad24(0x21e)][_0x40ad24(0x24a)](0x0,_0x1abb6b[_0x40ad24(0x21e)][_0x40ad24(0x259)]-_0x3c89e3);await _0x1abb6b[_0x40ad24(0x24b)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x40ad24(0x208)](_0x1abb6b[_0x40ad24(0x21e)]),'ack':!![]}),_0x1abb6b[_0x40ad24(0x225)]=[],await _0x1abb6b[_0x40ad24(0x24b)](LTM_DP_RAW_LOG,{'val':JSON[_0x40ad24(0x208)](_0x1abb6b['rawEventLog']),'ack':!![]}),await _0x1abb6b[_0x40ad24(0x24b)](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x1abb6b[_0x40ad24(0x244)]&&_0x3b9ad7)_0x3b9ad7[_0x40ad24(0x260)](_0x1abb6b,'ANALYZE_HEALTH',{'digest':_0x3aef3e});}catch(_0x244eba){_0x1abb6b[_0x40ad24(0x220)][_0x40ad24(0x221)](_0x244eba[_0x40ad24(0x263)]);}}async function runBaselineDriftAnalysis(_0x4fb778){const _0xd40f6f=a0_0x398a0b;if(!_0x4fb778[_0xd40f6f(0x244)]||!_0x4fb778[_0xd40f6f(0x243)])return;if(!canCallApi())return;const _0x2e908c=_0x4fb778[_0xd40f6f(0x1fd)][_0xd40f6f(0x23f)]||0xe;if(_0x4fb778[_0xd40f6f(0x21e)][_0xd40f6f(0x259)]<_0x2e908c+0x7){await _0x4fb778[_0xd40f6f(0x24b)](_0xd40f6f(0x213),{'val':_0xd40f6f(0x249),'ack':!![]});return;}const _0x141b6c=_0x4fb778['dailyDigests'][_0xd40f6f(0x223)](-_0x2e908c),_0x227772=_0x4fb778['dailyDigests']['slice'](0x0,_0x4fb778['dailyDigests'][_0xd40f6f(0x259)]-_0x2e908c),_0x873867='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON['stringify'](_0x227772)+_0xd40f6f(0x1ef)+JSON['stringify'](_0x141b6c);try{updateApiTimestamp();const _0x4b61f4=await _0x4fb778[_0xd40f6f(0x243)][_0xd40f6f(0x253)](_0x873867),_0x41d5c4=JSON[_0xd40f6f(0x1f9)](_0x4b61f4[_0xd40f6f(0x205)][_0xd40f6f(0x239)]()[_0xd40f6f(0x1f4)](/```json|```/g,'')['trim']());_0x41d5c4['baselineDrift']&&(await _0x4fb778[_0xd40f6f(0x24b)]('LTM.driftAnalysis.baselineDrift',{'val':_0x41d5c4[_0xd40f6f(0x248)],'ack':!![]}),await _0x4fb778['setStateAsync'](_0xd40f6f(0x200),{'val':_0x41d5c4[_0xd40f6f(0x21f)],'ack':!![]}),await _0x4fb778['setStateAsync'](_0xd40f6f(0x237),{'val':Date[_0xd40f6f(0x23b)](),'ack':!![]}));}catch(_0x57a376){}}async function executeAutomationAction(_0x1d8bfa){const _0x52bacd=a0_0x398a0b;try{const _0x121c71=await _0x1d8bfa[_0x52bacd(0x212)](_0x52bacd(0x226)),_0x505af8=await _0x1d8bfa[_0x52bacd(0x212)](_0x52bacd(0x252));if(_0x121c71&&_0x121c71[_0x52bacd(0x23d)]&&_0x505af8){const _0x5d9ffb=_0x121c71[_0x52bacd(0x23d)];let _0x17a1e9=_0x505af8['val'];try{_0x17a1e9=JSON[_0x52bacd(0x1f9)](_0x17a1e9);}catch(_0x138833){}_0x1d8bfa[_0x52bacd(0x220)][_0x52bacd(0x235)](_0x52bacd(0x207)+_0x5d9ffb+_0x52bacd(0x20e)+_0x17a1e9),await _0x1d8bfa[_0x52bacd(0x1ee)](_0x5d9ffb,_0x17a1e9);}else _0x1d8bfa['log']['warn']('ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x6304f2){_0x1d8bfa['log'][_0x52bacd(0x221)](_0x52bacd(0x25f)+_0x6304f2[_0x52bacd(0x263)]);}}async function sendMorningBriefing(_0x487120){const _0x323a77=a0_0x398a0b;if(!_0x487120[_0x323a77(0x243)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x30bcfd=_0x323a77(0x229),_0x310959=await _0x487120['geminiModel']['generateContent'](_0x30bcfd),_0x2686ad=_0x310959[_0x323a77(0x205)][_0x323a77(0x239)]();setup[_0x323a77(0x25e)](_0x487120,_0x323a77(0x23c)+_0x2686ad);}catch(_0x12608d){_0x487120[_0x323a77(0x220)]['error']('Briefing\x20Error:\x20'+_0x12608d[_0x323a77(0x263)]);}}module[a0_0x398a0b(0x21c)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};