const a0_0x406163=a0_0x5308;(function(_0x4ed469,_0x529862){const _0x1e44cc=a0_0x5308,_0x2402f1=_0x4ed469();while(!![]){try{const _0x3c3217=parseInt(_0x1e44cc(0xc0))/0x1+-parseInt(_0x1e44cc(0x132))/0x2*(-parseInt(_0x1e44cc(0xe8))/0x3)+-parseInt(_0x1e44cc(0x10c))/0x4*(parseInt(_0x1e44cc(0x12c))/0x5)+-parseInt(_0x1e44cc(0xba))/0x6*(parseInt(_0x1e44cc(0x126))/0x7)+-parseInt(_0x1e44cc(0xbb))/0x8*(parseInt(_0x1e44cc(0xd5))/0x9)+-parseInt(_0x1e44cc(0xdf))/0xa+parseInt(_0x1e44cc(0xc5))/0xb;if(_0x3c3217===_0x529862)break;else _0x2402f1['push'](_0x2402f1['shift']());}catch(_0x29216f){_0x2402f1['push'](_0x2402f1['shift']());}}}(a0_0x4bb0,0x845ac));const a0_0x47fd89=(function(){let _0x393c66=!![];return function(_0x276c38,_0x35c3b0){const _0x31c282=_0x393c66?function(){const _0xb482ae=a0_0x5308;if(_0x35c3b0){const _0x3be447=_0x35c3b0[_0xb482ae(0x135)](_0x276c38,arguments);return _0x35c3b0=null,_0x3be447;}}:function(){};return _0x393c66=![],_0x31c282;};}()),a0_0x2c52ae=a0_0x47fd89(this,function(){const _0x1b6577=a0_0x5308;return a0_0x2c52ae[_0x1b6577(0x11a)]()[_0x1b6577(0xc3)](_0x1b6577(0xbd))['toString']()[_0x1b6577(0x136)](a0_0x2c52ae)[_0x1b6577(0xc3)](_0x1b6577(0xbd));});a0_0x2c52ae();'use strict';const {GoogleGenerativeAI}=require(a0_0x406163(0xd2)),setup=require(a0_0x406163(0xd1)),GEMINI_MODEL=a0_0x406163(0xf7),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x406163(0xc1),LTM_DP_RAW_LOG=a0_0x406163(0xe4),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;function a0_0x5308(_0xcae7bc,_0x417ed6){const _0x295f01=a0_0x4bb0();return a0_0x5308=function(_0x2c52ae,_0x47fd89){_0x2c52ae=_0x2c52ae-0xb0;let _0x4bb001=_0x295f01[_0x2c52ae];return _0x4bb001;},a0_0x5308(_0xcae7bc,_0x417ed6);}function a0_0x4bb0(){const _0x4ced14=['generateContent','ltmStbWindowDays','pop','âš ï¸\x20ALARM:\x20','send','Unbekannt\x20(Kein\x20Sensor)','Wetterdaten\x20nicht\x20abrufbar','analysis.automation.patternDetected','Skipped\x20(Traffic)','warn','\x20=\x20','.Current.IsNight','config','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','response','log','290328ahiogi','Traffic-Schutz\x20(Auto-Approved)','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','analysis.alertReason','sendNotification','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','ltmLtbWindowDays','debug','.forecast.current.temperature','driftDetails','alertReason','Success','setStateAsync','toString','Keine\x20Details.','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','LTM.driftAnalysis.driftDetails','Skipped\x20(No\x20AI\x20or\x20Data)','system.presenceWho','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','.\x20EVENTS:\x20','.Current.Temperature','\x0aSTB:\x20','Tag','2098159RFRQPs','summary','activityLevel','Nacht','text','Started...','50YjgVvB','ANALYZE_HEALTH','automationProposal','rawEventLog','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','60842YBFfJo','Digest','analysisHistory','apply','constructor','geminiModel','val','analysis.automation.targetId','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','slice','analysis.automation.description','generic','isProVersion','ðŸŒ…\x20Morning\x20Briefing:\x0a','toISOString','6TpGRPa','16CPbiRk',',\x20Wetter:\x20','(((.+)+)+)+$','now','LTM.driftAnalysis.baselineDrift','285268oxbFxA','LTM.processingStatus','error','search','.\x20ANWESEND:\x20','20004303lgHpyo','eventHistory','info','analysis.activitySummary','analysis.lastResult','useWeather','parse','aiPersona','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','dailyDigests','.Current.WeatherText','./setup','@google/generative-ai','\x20Ã¼bersprungen\x20(Auto-Approved).','length','1378143fJBQvU','message','decision','trim','Unbekannt','%)\x20nach\x20\x22','isAlert','BUTLER\x20Execution\x20Error:\x20','weatherInstance','exports','10816940PFOifj','KI-Fehler\x20(Fallback)','analysis.automation.autoApply','N/A\x20(Learning)','description','LTM.rawEventLog','baselineDrift','KI\x20offline\x20(Fallback)','stringify','84qmaoDk','unshift','.\x20EMERGENCY:\x20','replace','detected','Sicherheit\x20geht\x20vor.','analysis.isAlert','setForeignStateAsync','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','analysis.analysisHistory','getForeignStateAsync','lastAlertState','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','targetValue','models/gemini-flash-latest','getStateAsync','\x20->\x20',',\x20LichtverhÃ¤ltnisse:\x20','currentSystemMode'];a0_0x4bb0=function(){return _0x4ced14;};return a0_0x4bb0();}let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x406163(0xf4),'senior_aal':'PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':'Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','single_comfort':a0_0x406163(0xf5),'security':a0_0x406163(0xed),'energy_saver':a0_0x406163(0x121)};function canCallApi(){const _0x151aad=a0_0x406163,_0x2caca2=Date[_0x151aad(0xbe)]();return _0x2caca2-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x3d52f6=a0_0x406163;lastGlobalApiCall=Date[_0x3d52f6(0xbe)]();}async function getWeatherContext(_0x224516){const _0x8d4c48=a0_0x406163;if(!_0x224516[_0x8d4c48(0x108)][_0x8d4c48(0xca)]||!_0x224516[_0x8d4c48(0x108)]['weatherInstance'])return _0x8d4c48(0x101);try{const _0x1b622f=_0x224516[_0x8d4c48(0x108)][_0x8d4c48(0xdd)];let _0x1970f0=await _0x224516[_0x8d4c48(0xf2)](_0x1b622f+_0x8d4c48(0x123));if(!_0x1970f0)_0x1970f0=await _0x224516['getForeignStateAsync'](_0x1b622f+_0x8d4c48(0x115));let _0x187800=await _0x224516[_0x8d4c48(0xf2)](_0x1b622f+_0x8d4c48(0xd0));if(!_0x187800)_0x187800=await _0x224516[_0x8d4c48(0xf2)](_0x1b622f+'.forecast.current.state');let _0x3e491c=_0x8d4c48(0xd9);const _0x9efdae=await _0x224516[_0x8d4c48(0xf2)](_0x1b622f+_0x8d4c48(0x107));if(_0x9efdae)_0x3e491c=_0x9efdae[_0x8d4c48(0xb1)]?_0x8d4c48(0x129):_0x8d4c48(0x125);if(_0x1970f0&&_0x187800)return _0x1970f0[_0x8d4c48(0xb1)]+'Â°C,\x20'+_0x187800[_0x8d4c48(0xb1)]+_0x8d4c48(0xfa)+_0x3e491c;}catch(_0x2a8dca){}return _0x8d4c48(0x102);}async function consultButler(_0x5d637d,_0x55a9d5,_0x3e150e,_0xb4f502){const _0x1ac975=a0_0x406163;if(!_0x5d637d['geminiModel'])return{'approved':!![],'reason':_0x1ac975(0xe6)};const _0x5e0241=Date['now']();if(decisionCache[_0x55a9d5]&&_0x5e0241-decisionCache[_0x55a9d5]['timestamp']<CACHE_TTL_MS){const _0x3bfef1=decisionCache[_0x55a9d5][_0x1ac975(0xd7)];return _0x5d637d[_0x1ac975(0x10b)][_0x1ac975(0x114)]('ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20'+_0x55a9d5+_0x1ac975(0xf9)+(_0x3bfef1['approved']?'OK':'NO')+'\x20('+_0x3bfef1['reason']+')'),_0x3bfef1;}if(!canCallApi())return _0x5d637d[_0x1ac975(0x10b)]['debug'](_0x1ac975(0xce)+_0x55a9d5+_0x1ac975(0xd3)),{'approved':!![],'reason':_0x1ac975(0x10d)};const _0x56975f=new Date()['toLocaleTimeString'](),_0x87ffe=await getWeatherContext(_0x5d637d),_0x2b6e0f=PERSONA_MAPPING[_0x5d637d[_0x1ac975(0x108)][_0x1ac975(0xcc)]||'generic'],_0x1fadb7=_0x1ac975(0xb3)+_0x56975f+_0x1ac975(0xbc)+_0x87ffe+_0x1ac975(0x130)+(_0xb4f502*0x64)['toFixed'](0x0)+_0x1ac975(0xda)+_0x55a9d5+'\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22'+_0x3e150e+_0x1ac975(0xf0)+_0x2b6e0f+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x4e91f7=await _0x5d637d[_0x1ac975(0xb0)][_0x1ac975(0xfc)](_0x1fadb7),_0x32c41c=_0x4e91f7[_0x1ac975(0x10a)][_0x1ac975(0x12a)]()[_0x1ac975(0xeb)](/```json|```/g,'')[_0x1ac975(0xd8)](),_0x5b28cf=JSON[_0x1ac975(0xcb)](_0x32c41c);return decisionCache[_0x55a9d5]={'decision':_0x5b28cf,'timestamp':_0x5e0241},_0x5b28cf;}catch(_0x574da0){return _0x5d637d[_0x1ac975(0x10b)]['warn'](_0x1ac975(0xcd)+_0x574da0[_0x1ac975(0xd6)]),decisionCache[_0x55a9d5]={'decision':{'approved':!![],'reason':_0x1ac975(0xe0)},'timestamp':_0x5e0241-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x1ac975(0xe0)};}}async function runGeminiAnalysis(_0x1eb177,_0x305e38=''){const _0x3ebd3c=a0_0x406163;if(!_0x1eb177[_0x3ebd3c(0xb0)])return;if(!canCallApi()){_0x1eb177['log'][_0x3ebd3c(0x114)](_0x3ebd3c(0x109));return;}if(_0x1eb177[_0x3ebd3c(0xc6)]['length']===0x0)return;const _0x1d129a=_0x1eb177[_0x3ebd3c(0xc6)]['slice'](0x0,0xf),_0x3f800f=_0x1eb177[_0x3ebd3c(0xfb)],_0x55de64=PERSONA_MAPPING[_0x1eb177[_0x3ebd3c(0x108)][_0x3ebd3c(0xcc)]||_0x3ebd3c(0xb6)],_0x214e88=_0x1eb177[_0x3ebd3c(0x108)]['livingContext']||_0x3ebd3c(0x11b);let _0x229979=_0x3ebd3c(0xd9);try{const _0xafeb=await _0x1eb177[_0x3ebd3c(0xf8)](_0x3ebd3c(0x120));if(_0xafeb&&_0xafeb[_0x3ebd3c(0xb1)])_0x229979=_0xafeb[_0x3ebd3c(0xb1)];}catch(_0x530b36){}let _0x1f718c=![];try{const _0x43846c=await _0x1eb177[_0x3ebd3c(0xf8)](_0x3ebd3c(0xe1));if(_0x43846c&&_0x43846c[_0x3ebd3c(0xb1)])_0x1f718c=!![];}catch(_0x593985){}const _0x59ea47=_0x3ebd3c(0x11d)+_0x55de64+'.\x20KONTEXT:\x20'+_0x214e88+'.\x20SYSTEM_MODE:\x20'+_0x3f800f+_0x3ebd3c(0xc4)+_0x229979+_0x3ebd3c(0x122)+JSON['stringify'](_0x1d129a)+_0x3ebd3c(0xea)+_0x305e38+_0x3ebd3c(0x11c);try{updateApiTimestamp();const _0x1a0930=await _0x1eb177['geminiModel'][_0x3ebd3c(0xfc)](_0x59ea47),_0x13f98d=JSON[_0x3ebd3c(0xcb)](_0x1a0930[_0x3ebd3c(0x10a)][_0x3ebd3c(0x12a)]()[_0x3ebd3c(0xeb)](/```json|```/g,'')['trim']());await _0x1eb177['setStateAsync'](_0x3ebd3c(0xc9),{'val':JSON['stringify'](_0x13f98d),'ack':!![]});if(_0x13f98d[_0x3ebd3c(0x127)])await _0x1eb177[_0x3ebd3c(0x119)](_0x3ebd3c(0xc8),{'val':_0x13f98d[_0x3ebd3c(0x127)],'ack':!![]});const _0x2e3ef5={'timestamp':Date[_0x3ebd3c(0xbe)](),'id':Date['now']()[_0x3ebd3c(0x11a)](),'analysis':{'activity':{'summary':_0x13f98d['summary'],'isAlert':_0x13f98d[_0x3ebd3c(0xdb)],'alertReason':_0x13f98d['alertReason']},'comfort':{'automationProposal':_0x13f98d[_0x3ebd3c(0x12e)]}}};_0x1eb177['analysisHistory'][_0x3ebd3c(0xe9)](_0x2e3ef5);if(_0x1eb177[_0x3ebd3c(0x134)][_0x3ebd3c(0xd4)]>0x32)_0x1eb177['analysisHistory'][_0x3ebd3c(0xfe)]();await _0x1eb177['setStateAsync'](_0x3ebd3c(0xf1),{'val':JSON[_0x3ebd3c(0xe7)](_0x1eb177['analysisHistory']),'ack':!![]});const _0x11a5ea=_0x13f98d[_0x3ebd3c(0xdb)]||![];_0x11a5ea!==_0x1eb177[_0x3ebd3c(0xf3)]&&(await _0x1eb177[_0x3ebd3c(0x119)](_0x3ebd3c(0xee),{'val':_0x11a5ea,'ack':!![]}),_0x1eb177['lastAlertState']=_0x11a5ea,_0x11a5ea&&(await _0x1eb177[_0x3ebd3c(0x119)](_0x3ebd3c(0x10f),{'val':_0x13f98d[_0x3ebd3c(0x117)],'ack':!![]}),setup[_0x3ebd3c(0x110)](_0x1eb177,_0x3ebd3c(0xff)+_0x13f98d[_0x3ebd3c(0x117)],![],_0x13f98d['isEmergency'])));if(_0x13f98d[_0x3ebd3c(0x12e)]&&_0x13f98d['automationProposal'][_0x3ebd3c(0xec)]){await _0x1eb177[_0x3ebd3c(0x119)](_0x3ebd3c(0x103),{'val':!![],'ack':!![]}),await _0x1eb177[_0x3ebd3c(0x119)](_0x3ebd3c(0xb5),{'val':_0x13f98d[_0x3ebd3c(0x12e)][_0x3ebd3c(0xe3)],'ack':!![]}),await _0x1eb177['setStateAsync'](_0x3ebd3c(0xb2),{'val':_0x13f98d['automationProposal']['targetId'],'ack':!![]}),await _0x1eb177[_0x3ebd3c(0x119)]('analysis.automation.targetValue',{'val':JSON[_0x3ebd3c(0xe7)](_0x13f98d[_0x3ebd3c(0x12e)][_0x3ebd3c(0xf6)]),'ack':!![]});if(_0x1f718c)executeAutomationAction(_0x1eb177);}}catch(_0x505437){_0x1eb177[_0x3ebd3c(0x10b)][_0x3ebd3c(0xc2)]('Gemini\x20Error:\x20'+_0x505437[_0x3ebd3c(0xd6)]);}}async function createDailyDigest(_0x465491,_0x439819){const _0xbd2ce=a0_0x406163;if(!_0x465491[_0xbd2ce(0xb7)])return;if(!canCallApi()){await _0x465491[_0xbd2ce(0x119)](LTM_DP_STATUS,{'val':_0xbd2ce(0x104),'ack':!![]});return;}await _0x465491[_0xbd2ce(0x119)](LTM_DP_STATUS,{'val':_0xbd2ce(0x12b),'ack':!![]});if(!_0x465491[_0xbd2ce(0xb0)]||_0x465491[_0xbd2ce(0x12f)][_0xbd2ce(0xd4)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x465491[_0xbd2ce(0x119)](LTM_DP_STATUS,{'val':_0xbd2ce(0x11f),'ack':!![]});return;}const _0x3c1945=JSON[_0xbd2ce(0xcb)](JSON[_0xbd2ce(0xe7)](_0x465491['rawEventLog'])),_0x4cfb8a=_0x3c1945[_0xbd2ce(0xd4)],_0x1b7958=_0xbd2ce(0x10e)+JSON[_0xbd2ce(0xe7)](_0x3c1945);try{updateApiTimestamp();const _0x272d9f=await _0x465491[_0xbd2ce(0xb0)][_0xbd2ce(0xfc)](_0x1b7958),_0x5accea=JSON[_0xbd2ce(0xcb)](_0x272d9f[_0xbd2ce(0x10a)][_0xbd2ce(0x12a)]()[_0xbd2ce(0xeb)](/```json|```/g,'')[_0xbd2ce(0xd8)]()),_0xf9082d={'timestamp':new Date()[_0xbd2ce(0xb9)](),'eventCount':_0x4cfb8a,'summary':_0x5accea[_0xbd2ce(0x127)]||_0xbd2ce(0x133),'activityLevel':_0x5accea[_0xbd2ce(0x128)]||'normal','systemMode':_0x465491[_0xbd2ce(0xfb)]};_0x465491[_0xbd2ce(0xcf)]['push'](_0xf9082d);const _0x51ad46=_0x465491[_0xbd2ce(0x108)][_0xbd2ce(0x113)]||0x3c;_0x465491['dailyDigests'][_0xbd2ce(0xd4)]>_0x51ad46&&_0x465491[_0xbd2ce(0xcf)]['splice'](0x0,_0x465491[_0xbd2ce(0xcf)]['length']-_0x51ad46);await _0x465491['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0xbd2ce(0xe7)](_0x465491['dailyDigests']),'ack':!![]}),_0x465491[_0xbd2ce(0x12f)]=[],await _0x465491[_0xbd2ce(0x119)](LTM_DP_RAW_LOG,{'val':JSON[_0xbd2ce(0xe7)](_0x465491['rawEventLog']),'ack':!![]}),await _0x465491[_0xbd2ce(0x119)](LTM_DP_STATUS,{'val':_0xbd2ce(0x118),'ack':!![]});if(_0x465491['isProVersion']&&_0x439819)_0x439819[_0xbd2ce(0x100)](_0x465491,_0xbd2ce(0x12d),{'digest':_0xf9082d});}catch(_0x120854){_0x465491[_0xbd2ce(0x10b)]['error'](_0x120854['message']);}}async function runBaselineDriftAnalysis(_0xa873ed){const _0x272a8a=a0_0x406163;if(!_0xa873ed[_0x272a8a(0xb7)]||!_0xa873ed[_0x272a8a(0xb0)])return;if(!canCallApi())return;const _0x21f3d5=_0xa873ed['config'][_0x272a8a(0xfd)]||0xe;if(_0xa873ed['dailyDigests']['length']<_0x21f3d5+0x7){await _0xa873ed[_0x272a8a(0x119)](_0x272a8a(0xbf),{'val':_0x272a8a(0xe2),'ack':!![]});return;}const _0x2f1acb=_0xa873ed[_0x272a8a(0xcf)][_0x272a8a(0xb4)](-_0x21f3d5),_0x5b4922=_0xa873ed[_0x272a8a(0xcf)][_0x272a8a(0xb4)](0x0,_0xa873ed['dailyDigests'][_0x272a8a(0xd4)]-_0x21f3d5),_0xe9f9a6=_0x272a8a(0x131)+JSON[_0x272a8a(0xe7)](_0x5b4922)+_0x272a8a(0x124)+JSON['stringify'](_0x2f1acb);try{updateApiTimestamp();const _0x26c309=await _0xa873ed[_0x272a8a(0xb0)][_0x272a8a(0xfc)](_0xe9f9a6),_0x3a9154=JSON['parse'](_0x26c309['response'][_0x272a8a(0x12a)]()[_0x272a8a(0xeb)](/```json|```/g,'')[_0x272a8a(0xd8)]());_0x3a9154[_0x272a8a(0xe5)]&&(await _0xa873ed[_0x272a8a(0x119)](_0x272a8a(0xbf),{'val':_0x3a9154[_0x272a8a(0xe5)],'ack':!![]}),await _0xa873ed[_0x272a8a(0x119)](_0x272a8a(0x11e),{'val':_0x3a9154[_0x272a8a(0x116)],'ack':!![]}),await _0xa873ed[_0x272a8a(0x119)]('LTM.driftAnalysis.lastCheck',{'val':Date['now'](),'ack':!![]}));}catch(_0x34f898){}}async function executeAutomationAction(_0x7e9ddf){const _0x4ce90c=a0_0x406163;try{const _0x1877bb=await _0x7e9ddf[_0x4ce90c(0xf8)](_0x4ce90c(0xb2)),_0x49147e=await _0x7e9ddf[_0x4ce90c(0xf8)]('analysis.automation.targetValue');if(_0x1877bb&&_0x1877bb[_0x4ce90c(0xb1)]&&_0x49147e){const _0x9f8079=_0x1877bb['val'];let _0x4f7d6e=_0x49147e[_0x4ce90c(0xb1)];try{_0x4f7d6e=JSON[_0x4ce90c(0xcb)](_0x4f7d6e);}catch(_0x28316b){}_0x7e9ddf[_0x4ce90c(0x10b)][_0x4ce90c(0xc7)](_0x4ce90c(0x111)+_0x9f8079+_0x4ce90c(0x106)+_0x4f7d6e),await _0x7e9ddf[_0x4ce90c(0xef)](_0x9f8079,_0x4f7d6e);}else _0x7e9ddf[_0x4ce90c(0x10b)][_0x4ce90c(0x105)](_0x4ce90c(0x112));}catch(_0x51e927){_0x7e9ddf[_0x4ce90c(0x10b)][_0x4ce90c(0xc2)](_0x4ce90c(0xdc)+_0x51e927[_0x4ce90c(0xd6)]);}}async function sendMorningBriefing(_0x5a18b5){const _0x2732ad=a0_0x406163;if(!_0x5a18b5[_0x2732ad(0xb0)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x3db66a='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x186c0a=await _0x5a18b5[_0x2732ad(0xb0)][_0x2732ad(0xfc)](_0x3db66a),_0x4a3f8e=_0x186c0a[_0x2732ad(0x10a)][_0x2732ad(0x12a)]();setup[_0x2732ad(0x110)](_0x5a18b5,_0x2732ad(0xb8)+_0x4a3f8e);}catch(_0x48720e){_0x5a18b5[_0x2732ad(0x10b)][_0x2732ad(0xc2)]('Briefing\x20Error:\x20'+_0x48720e[_0x2732ad(0xd6)]);}}module[a0_0x406163(0xde)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};