const a0_0x467ef8=a0_0x1c05;(function(_0x5c110f,_0x11be67){const _0x2d54d8=a0_0x1c05,_0x388da7=_0x5c110f();while(!![]){try{const _0x5ea952=parseInt(_0x2d54d8(0x234))/0x1*(-parseInt(_0x2d54d8(0x254))/0x2)+-parseInt(_0x2d54d8(0x1fa))/0x3*(-parseInt(_0x2d54d8(0x242))/0x4)+parseInt(_0x2d54d8(0x1f9))/0x5+-parseInt(_0x2d54d8(0x226))/0x6*(parseInt(_0x2d54d8(0x25c))/0x7)+-parseInt(_0x2d54d8(0x252))/0x8+parseInt(_0x2d54d8(0x233))/0x9+parseInt(_0x2d54d8(0x257))/0xa*(-parseInt(_0x2d54d8(0x244))/0xb);if(_0x5ea952===_0x11be67)break;else _0x388da7['push'](_0x388da7['shift']());}catch(_0x5c3d5e){_0x388da7['push'](_0x388da7['shift']());}}}(a0_0x3d8d,0x73e22));const a0_0x422737=(function(){let _0x4cd954=!![];return function(_0x1d1484,_0x3974ff){const _0x1d575e=_0x4cd954?function(){const _0xe0c9c9=a0_0x1c05;if(_0x3974ff){const _0x565aa2=_0x3974ff[_0xe0c9c9(0x1f4)](_0x1d1484,arguments);return _0x3974ff=null,_0x565aa2;}}:function(){};return _0x4cd954=![],_0x1d575e;};}()),a0_0x5bc333=a0_0x422737(this,function(){const _0x52916e=a0_0x1c05;return a0_0x5bc333[_0x52916e(0x210)]()['search']('(((.+)+)+)+$')[_0x52916e(0x210)]()['constructor'](a0_0x5bc333)[_0x52916e(0x1df)](_0x52916e(0x24e));});a0_0x5bc333();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require(a0_0x467ef8(0x248)),GEMINI_MODEL=a0_0x467ef8(0x200),LTM_DP_DAILY_DIGESTS=a0_0x467ef8(0x1fe),LTM_DP_STATUS=a0_0x467ef8(0x20b),LTM_DP_RAW_LOG=a0_0x467ef8(0x235),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x467ef8(0x223),'senior_aal':a0_0x467ef8(0x24b),'family':a0_0x467ef8(0x23c),'single_comfort':a0_0x467ef8(0x1eb),'security':a0_0x467ef8(0x219),'energy_saver':a0_0x467ef8(0x230)};function canCallApi(){const _0x10071e=a0_0x467ef8,_0x5801f0=Date[_0x10071e(0x1f5)]();return _0x5801f0-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x5cee0f=a0_0x467ef8;lastGlobalApiCall=Date[_0x5cee0f(0x1f5)]();}async function getWeatherContext(_0x344a67){const _0x3aefc3=a0_0x467ef8;if(!_0x344a67[_0x3aefc3(0x253)][_0x3aefc3(0x245)]||!_0x344a67[_0x3aefc3(0x253)][_0x3aefc3(0x231)])return _0x3aefc3(0x229);try{const _0x1c202c=_0x344a67[_0x3aefc3(0x253)][_0x3aefc3(0x231)];let _0x18325b=await _0x344a67[_0x3aefc3(0x22a)](_0x1c202c+'.Current.Temperature');if(!_0x18325b)_0x18325b=await _0x344a67[_0x3aefc3(0x22a)](_0x1c202c+'.forecast.current.temperature');let _0x881188=await _0x344a67[_0x3aefc3(0x22a)](_0x1c202c+_0x3aefc3(0x1ff));if(!_0x881188)_0x881188=await _0x344a67[_0x3aefc3(0x22a)](_0x1c202c+_0x3aefc3(0x251));let _0x1dfd73='Unbekannt';const _0x1b2899=await _0x344a67[_0x3aefc3(0x22a)](_0x1c202c+'.Current.IsNight');if(_0x1b2899)_0x1dfd73=_0x1b2899[_0x3aefc3(0x1ea)]?_0x3aefc3(0x1f3):_0x3aefc3(0x1e1);if(_0x18325b&&_0x881188)return _0x18325b[_0x3aefc3(0x1ea)]+_0x3aefc3(0x23d)+_0x881188[_0x3aefc3(0x1ea)]+_0x3aefc3(0x1f0)+_0x1dfd73;}catch(_0x16303a){}return _0x3aefc3(0x218);}async function consultButler(_0x3b2072,_0x161f67,_0x590b5c,_0xcf5b51){const _0xa5e2f4=a0_0x467ef8;if(!_0x3b2072['geminiModel'])return{'approved':!![],'reason':_0xa5e2f4(0x261)};const _0x244d1f=Date[_0xa5e2f4(0x1f5)]();if(decisionCache[_0x161f67]&&_0x244d1f-decisionCache[_0x161f67]['timestamp']<CACHE_TTL_MS){const _0x34f4e3=decisionCache[_0x161f67]['decision'];return _0x3b2072[_0xa5e2f4(0x20a)]['debug']('ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20'+_0x161f67+_0xa5e2f4(0x258)+(_0x34f4e3[_0xa5e2f4(0x213)]?'OK':'NO')+'\x20('+_0x34f4e3[_0xa5e2f4(0x216)]+')'),_0x34f4e3;}if(!canCallApi())return _0x3b2072['log'][_0xa5e2f4(0x23e)](_0xa5e2f4(0x1e3)+_0x161f67+_0xa5e2f4(0x1f2)),{'approved':!![],'reason':_0xa5e2f4(0x25e)};const _0x3b6357=new Date()[_0xa5e2f4(0x255)](),_0x5b0819=await getWeatherContext(_0x3b2072),_0x7f9eb2=PERSONA_MAPPING[_0x3b2072[_0xa5e2f4(0x253)][_0xa5e2f4(0x1ed)]||_0xa5e2f4(0x24a)],_0x58fcce='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x3b6357+_0xa5e2f4(0x1e8)+_0x5b0819+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0xcf5b51*0x64)[_0xa5e2f4(0x240)](0x0)+_0xa5e2f4(0x23b)+_0x161f67+_0xa5e2f4(0x1f1)+_0x590b5c+_0xa5e2f4(0x25a)+_0x7f9eb2+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x26444c=await _0x3b2072['geminiModel'][_0xa5e2f4(0x227)](_0x58fcce),_0x51016c=_0x26444c[_0xa5e2f4(0x21a)][_0xa5e2f4(0x1fc)]()['replace'](/```json|```/g,'')[_0xa5e2f4(0x1e5)](),_0x3ba218=JSON[_0xa5e2f4(0x1e7)](_0x51016c);return decisionCache[_0x161f67]={'decision':_0x3ba218,'timestamp':_0x244d1f},_0x3ba218;}catch(_0x2327ab){return _0x3b2072[_0xa5e2f4(0x20a)][_0xa5e2f4(0x239)](_0xa5e2f4(0x246)+_0x2327ab[_0xa5e2f4(0x260)]),decisionCache[_0x161f67]={'decision':{'approved':!![],'reason':_0xa5e2f4(0x202)},'timestamp':_0x244d1f-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}function a0_0x1c05(_0x57a6f2,_0x526a48){const _0x3d440e=a0_0x3d8d();return a0_0x1c05=function(_0x5bc333,_0x422737){_0x5bc333=_0x5bc333-0x1df;let _0x3d8dd2=_0x3d440e[_0x5bc333];return _0x3d8dd2;},a0_0x1c05(_0x57a6f2,_0x526a48);}async function runGeminiAnalysis(_0x1ec328,_0x42437f=''){const _0x5a6f75=a0_0x467ef8;if(!_0x1ec328['geminiModel'])return;if(!canCallApi()){_0x1ec328[_0x5a6f75(0x20a)][_0x5a6f75(0x23e)](_0x5a6f75(0x21e));return;}if(_0x1ec328[_0x5a6f75(0x22e)][_0x5a6f75(0x20d)]===0x0)return;const _0x1ad9ac=_0x1ec328[_0x5a6f75(0x22e)]['slice'](0x0,0xf),_0x5f3224=_0x1ec328[_0x5a6f75(0x20e)],_0x26d896=PERSONA_MAPPING[_0x1ec328[_0x5a6f75(0x253)]['aiPersona']||_0x5a6f75(0x24a)],_0x1c20d5=_0x1ec328[_0x5a6f75(0x253)]['livingContext']||_0x5a6f75(0x21f);let _0x188d76=_0x5a6f75(0x209);try{const _0x3a75bd=await _0x1ec328['getStateAsync'](_0x5a6f75(0x259));if(_0x3a75bd&&_0x3a75bd['val'])_0x188d76=_0x3a75bd[_0x5a6f75(0x1ea)];}catch(_0x4b40a6){}let _0x573616=![];try{const _0x1cf0c5=await _0x1ec328['getStateAsync'](_0x5a6f75(0x204));if(_0x1cf0c5&&_0x1cf0c5[_0x5a6f75(0x1ea)])_0x573616=!![];}catch(_0x494475){}const _0x53dba7=_0x5a6f75(0x262)+_0x26d896+_0x5a6f75(0x21b)+_0x1c20d5+_0x5a6f75(0x21d)+_0x5f3224+'.\x20ANWESEND:\x20'+_0x188d76+_0x5a6f75(0x206)+JSON['stringify'](_0x1ad9ac)+_0x5a6f75(0x1e9)+_0x42437f+_0x5a6f75(0x208);try{updateApiTimestamp();const _0x315494=await _0x1ec328['geminiModel'][_0x5a6f75(0x227)](_0x53dba7),_0x529dc7=JSON[_0x5a6f75(0x1e7)](_0x315494['response'][_0x5a6f75(0x1fc)]()[_0x5a6f75(0x1f6)](/```json|```/g,'')[_0x5a6f75(0x1e5)]());await _0x1ec328[_0x5a6f75(0x225)](_0x5a6f75(0x224),{'val':JSON['stringify'](_0x529dc7),'ack':!![]});if(_0x529dc7['summary'])await _0x1ec328[_0x5a6f75(0x225)](_0x5a6f75(0x22d),{'val':_0x529dc7[_0x5a6f75(0x221)],'ack':!![]});const _0x5b6ae1={'timestamp':Date[_0x5a6f75(0x1f5)](),'id':Date[_0x5a6f75(0x1f5)]()[_0x5a6f75(0x210)](),'analysis':{'activity':{'summary':_0x529dc7['summary'],'isAlert':_0x529dc7[_0x5a6f75(0x217)],'alertReason':_0x529dc7[_0x5a6f75(0x23a)]},'comfort':{'automationProposal':_0x529dc7['automationProposal']}}};_0x1ec328[_0x5a6f75(0x24d)][_0x5a6f75(0x238)](_0x5b6ae1);if(_0x1ec328[_0x5a6f75(0x24d)][_0x5a6f75(0x20d)]>0x32)_0x1ec328[_0x5a6f75(0x24d)]['pop']();await _0x1ec328[_0x5a6f75(0x225)](_0x5a6f75(0x1e6),{'val':JSON[_0x5a6f75(0x24c)](_0x1ec328[_0x5a6f75(0x24d)]),'ack':!![]});const _0x33df2a=_0x529dc7[_0x5a6f75(0x217)]||![];_0x33df2a!==_0x1ec328[_0x5a6f75(0x212)]&&(await _0x1ec328[_0x5a6f75(0x225)]('analysis.isAlert',{'val':_0x33df2a,'ack':!![]}),_0x1ec328[_0x5a6f75(0x212)]=_0x33df2a,_0x33df2a&&(await _0x1ec328['setStateAsync'](_0x5a6f75(0x203),{'val':_0x529dc7['alertReason'],'ack':!![]}),setup[_0x5a6f75(0x1e0)](_0x1ec328,_0x5a6f75(0x25b)+_0x529dc7[_0x5a6f75(0x23a)],![],_0x529dc7[_0x5a6f75(0x247)])));if(_0x529dc7[_0x5a6f75(0x201)]&&_0x529dc7[_0x5a6f75(0x201)][_0x5a6f75(0x24f)]){await _0x1ec328[_0x5a6f75(0x225)](_0x5a6f75(0x1fd),{'val':!![],'ack':!![]}),await _0x1ec328[_0x5a6f75(0x225)](_0x5a6f75(0x20c),{'val':_0x529dc7['automationProposal']['description'],'ack':!![]}),await _0x1ec328[_0x5a6f75(0x225)](_0x5a6f75(0x228),{'val':_0x529dc7['automationProposal'][_0x5a6f75(0x250)],'ack':!![]}),await _0x1ec328[_0x5a6f75(0x225)](_0x5a6f75(0x1ec),{'val':JSON[_0x5a6f75(0x24c)](_0x529dc7[_0x5a6f75(0x201)]['targetValue']),'ack':!![]});if(_0x573616)executeAutomationAction(_0x1ec328);}}catch(_0x24addb){_0x1ec328[_0x5a6f75(0x20a)]['error']('Gemini\x20Error:\x20'+_0x24addb[_0x5a6f75(0x260)]);}}async function createDailyDigest(_0x541054,_0x156c74){const _0x41d546=a0_0x467ef8;if(!_0x541054[_0x41d546(0x263)])return;if(!canCallApi()){await _0x541054[_0x41d546(0x225)](LTM_DP_STATUS,{'val':_0x41d546(0x1ef),'ack':!![]});return;}await _0x541054[_0x41d546(0x225)](LTM_DP_STATUS,{'val':_0x41d546(0x232),'ack':!![]});if(!_0x541054['geminiModel']||_0x541054[_0x41d546(0x22c)][_0x41d546(0x20d)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x541054[_0x41d546(0x225)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x5d0aef=JSON[_0x41d546(0x1e7)](JSON[_0x41d546(0x24c)](_0x541054[_0x41d546(0x22c)])),_0x1be567=_0x5d0aef[_0x41d546(0x20d)],_0x142929=_0x41d546(0x214)+JSON['stringify'](_0x5d0aef);try{updateApiTimestamp();const _0x3a1b47=await _0x541054[_0x41d546(0x1ee)][_0x41d546(0x227)](_0x142929),_0x16d577=JSON[_0x41d546(0x1e7)](_0x3a1b47[_0x41d546(0x21a)][_0x41d546(0x1fc)]()[_0x41d546(0x1f6)](/```json|```/g,'')[_0x41d546(0x1e5)]()),_0x59857b={'timestamp':new Date()[_0x41d546(0x243)](),'eventCount':_0x1be567,'summary':_0x16d577[_0x41d546(0x221)]||_0x41d546(0x205),'activityLevel':_0x16d577[_0x41d546(0x22b)]||_0x41d546(0x236),'systemMode':_0x541054[_0x41d546(0x20e)]};_0x541054['dailyDigests']['push'](_0x59857b);const _0x1ecd23=_0x541054[_0x41d546(0x253)][_0x41d546(0x215)]||0x3c;_0x541054[_0x41d546(0x1e4)][_0x41d546(0x20d)]>_0x1ecd23&&_0x541054['dailyDigests'][_0x41d546(0x20f)](0x0,_0x541054[_0x41d546(0x1e4)][_0x41d546(0x20d)]-_0x1ecd23);await _0x541054[_0x41d546(0x225)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x41d546(0x24c)](_0x541054[_0x41d546(0x1e4)]),'ack':!![]}),_0x541054['rawEventLog']=[],await _0x541054[_0x41d546(0x225)](LTM_DP_RAW_LOG,{'val':JSON[_0x41d546(0x24c)](_0x541054[_0x41d546(0x22c)]),'ack':!![]}),await _0x541054[_0x41d546(0x225)](LTM_DP_STATUS,{'val':_0x41d546(0x249),'ack':!![]});if(_0x541054[_0x41d546(0x263)]&&_0x156c74)_0x156c74[_0x41d546(0x222)](_0x541054,'ANALYZE_HEALTH',{'digest':_0x59857b});}catch(_0x3ded3e){_0x541054['log'][_0x41d546(0x211)](_0x3ded3e[_0x41d546(0x260)]);}}async function runBaselineDriftAnalysis(_0x665d9d){const _0x3dc4d5=a0_0x467ef8;if(!_0x665d9d[_0x3dc4d5(0x263)]||!_0x665d9d[_0x3dc4d5(0x1ee)])return;if(!canCallApi())return;const _0x4a9ec5=_0x665d9d[_0x3dc4d5(0x253)]['ltmStbWindowDays']||0xe;if(_0x665d9d['dailyDigests'][_0x3dc4d5(0x20d)]<_0x4a9ec5+0x7){await _0x665d9d['setStateAsync'](_0x3dc4d5(0x241),{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x4259a6=_0x665d9d[_0x3dc4d5(0x1e4)][_0x3dc4d5(0x21c)](-_0x4a9ec5),_0x20f848=_0x665d9d[_0x3dc4d5(0x1e4)][_0x3dc4d5(0x21c)](0x0,_0x665d9d['dailyDigests'][_0x3dc4d5(0x20d)]-_0x4a9ec5),_0x5550ae=_0x3dc4d5(0x237)+JSON[_0x3dc4d5(0x24c)](_0x20f848)+'\x0aSTB:\x20'+JSON['stringify'](_0x4259a6);try{updateApiTimestamp();const _0xd7cd01=await _0x665d9d[_0x3dc4d5(0x1ee)][_0x3dc4d5(0x227)](_0x5550ae),_0x237b3a=JSON[_0x3dc4d5(0x1e7)](_0xd7cd01[_0x3dc4d5(0x21a)][_0x3dc4d5(0x1fc)]()[_0x3dc4d5(0x1f6)](/```json|```/g,'')[_0x3dc4d5(0x1e5)]());_0x237b3a[_0x3dc4d5(0x1e2)]&&(await _0x665d9d[_0x3dc4d5(0x225)](_0x3dc4d5(0x241),{'val':_0x237b3a[_0x3dc4d5(0x1e2)],'ack':!![]}),await _0x665d9d[_0x3dc4d5(0x225)](_0x3dc4d5(0x264),{'val':_0x237b3a[_0x3dc4d5(0x22f)],'ack':!![]}),await _0x665d9d[_0x3dc4d5(0x225)](_0x3dc4d5(0x265),{'val':Date[_0x3dc4d5(0x1f5)](),'ack':!![]}));}catch(_0x31e85f){}}function a0_0x3d8d(){const _0x5b4001=['6241374gEHeiF','4BZfBSy','LTM.rawEventLog','normal','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','unshift','warn','alertReason','%)\x20nach\x20\x22','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','Â°C,\x20','debug','\x20=\x20','toFixed','LTM.driftAnalysis.baselineDrift','13340oPOlXe','toISOString','330GCUIbV','useWeather','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','isEmergency','./setup','Success','generic','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','stringify','analysisHistory','(((.+)+)+)+$','detected','targetId','.forecast.current.state','5075128ryrLZm','config','201582saBeMl','toLocaleTimeString','Briefing\x20Error:\x20','267390gNacbr','\x20->\x20','system.presenceWho','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','âš ï¸\x20ALARM:\x20','1088955wWyGON','exports','Traffic-Schutz\x20(Auto-Approved)','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','message','KI\x20offline\x20(Fallback)','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','isProVersion','LTM.driftAnalysis.driftDetails','LTM.driftAnalysis.lastCheck','search','sendNotification','Tag','baselineDrift','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','dailyDigests','trim','analysis.analysisHistory','parse',',\x20Wetter:\x20','.\x20EMERGENCY:\x20','val','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','analysis.automation.targetValue','aiPersona','geminiModel','Skipped\x20(Traffic)',',\x20LichtverhÃ¤ltnisse:\x20','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','\x20Ã¼bersprungen\x20(Auto-Approved).','Nacht','apply','now','replace','info','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','4196635fJRrjU','843djGmBf','BUTLER\x20Execution\x20Error:\x20','text','analysis.automation.patternDetected','LTM.dailyDigests','.Current.WeatherText','models/gemini-flash-latest','automationProposal','KI-Fehler\x20(Fallback)','analysis.alertReason','analysis.automation.autoApply','Digest','.\x20EVENTS:\x20','getStateAsync','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','Unbekannt','log','LTM.processingStatus','analysis.automation.description','length','currentSystemMode','splice','toString','error','lastAlertState','approved','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','ltmLtbWindowDays','reason','isAlert','Wetterdaten\x20nicht\x20abrufbar','Sicherheit\x20geht\x20vor.','response','.\x20KONTEXT:\x20','slice','.\x20SYSTEM_MODE:\x20','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','Keine\x20Details.','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','summary','send','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','analysis.lastResult','setStateAsync','6IxxDYk','generateContent','analysis.automation.targetId','Unbekannt\x20(Kein\x20Sensor)','getForeignStateAsync','activityLevel','rawEventLog','analysis.activitySummary','eventHistory','driftDetails','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','weatherInstance','Started...'];a0_0x3d8d=function(){return _0x5b4001;};return a0_0x3d8d();}async function executeAutomationAction(_0x4a88f9){const _0x4161a4=a0_0x467ef8;try{const _0x3ed4b3=await _0x4a88f9[_0x4161a4(0x207)](_0x4161a4(0x228)),_0x1a5cf6=await _0x4a88f9[_0x4161a4(0x207)]('analysis.automation.targetValue');if(_0x3ed4b3&&_0x3ed4b3[_0x4161a4(0x1ea)]&&_0x1a5cf6){const _0x21da33=_0x3ed4b3[_0x4161a4(0x1ea)];let _0x1200c0=_0x1a5cf6['val'];try{_0x1200c0=JSON[_0x4161a4(0x1e7)](_0x1200c0);}catch(_0x46d360){}_0x4a88f9[_0x4161a4(0x20a)][_0x4161a4(0x1f7)](_0x4161a4(0x25f)+_0x21da33+_0x4161a4(0x23f)+_0x1200c0),await _0x4a88f9['setForeignStateAsync'](_0x21da33,_0x1200c0);}else _0x4a88f9[_0x4161a4(0x20a)][_0x4161a4(0x239)](_0x4161a4(0x1f8));}catch(_0x51c62f){_0x4a88f9['log'][_0x4161a4(0x211)](_0x4161a4(0x1fb)+_0x51c62f['message']);}}async function sendMorningBriefing(_0x564367){const _0x2f64f7=a0_0x467ef8;if(!_0x564367['geminiModel'])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x35b31b=_0x2f64f7(0x220),_0x4b654d=await _0x564367[_0x2f64f7(0x1ee)]['generateContent'](_0x35b31b),_0x364d32=_0x4b654d[_0x2f64f7(0x21a)]['text']();setup[_0x2f64f7(0x1e0)](_0x564367,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x364d32);}catch(_0x10d39f){_0x564367['log'][_0x2f64f7(0x211)](_0x2f64f7(0x256)+_0x10d39f[_0x2f64f7(0x260)]);}}module[a0_0x467ef8(0x25d)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};