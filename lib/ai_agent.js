function a0_0x3398(){const _0x554b38=['toISOString','analysis.automation.description','rawEventLog','setStateAsync','normal','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','analysis.isAlert','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','toFixed','ANALYZE_HEALTH','log','analysis.lastResult','@google/generative-ai','approved','LTM.rawEventLog','geminiModel','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','Unbekannt\x20(Kein\x20Sensor)','constructor','Success','ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','.\x20EVENTS:\x20','isEmergency','3824721pcxZGY','.\x20EMERGENCY:\x20','summary','Tag','analysis.activitySummary','currentSystemMode','driftDetails','error','ðŸ“…\x20Daily\x20Digest:\x0a','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','5OIKBqZ','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','.\x20KONTEXT:\x20','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','analysis.alertReason','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','Unbekannt','243732ksBkGf','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','models/gemini-flash-latest','now','pop','push','LTM.driftAnalysis.driftDetails','baselineDrift','getForeignStateAsync','Traffic-Schutz\x20(Auto-Approved)','./setup','analysis.automation.targetId','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','analysis.analysisHistory','113870QKXNmR','Gemini\x20Error:\x20','\x20Ã¼bersprungen\x20(Auto-Approved).','N/A\x20(Learning)','detected','isProVersion','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','sendNotification','length','LTM.dailyDigests',',\x20LichtverhÃ¤ltnisse:\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','lastAlertState','2397256sKIKwi','search','.Current.IsNight','analysisHistory','parse','Started...','system.presenceWho','decision','\x20=\x20','getStateAsync','KI\x20offline\x20(Fallback)','238kRlxMu','alertReason','warn','timestamp','44eaWeWB','description','8gBKjpU','eventHistory','1650616tLUYhv','8300610wCOQcG','info','LTM.driftAnalysis.baselineDrift','LTM.processingStatus','generic','automationProposal','2937800uafjTa','.\x20ANWESEND:\x20','activityLevel','weatherInstance','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','toString','slice','debug','targetValue','dailyDigests',',\x20Wetter:\x20','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','(((.+)+)+)+$','isAlert','BUTLER\x20Execution\x20Error:\x20','âš ï¸\x20ALARM:\x20','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','replace','LTM.driftAnalysis.lastCheck','ltmLtbWindowDays','toLocaleTimeString','stringify','generateContent','useWeather','ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20','trim','analysis.automation.autoApply','unshift','send','\x0aAktivitÃ¤t:\x20','val','config','.Current.Temperature','livingContext','targetId','response','.forecast.current.state','Skipped\x20(No\x20AI\x20or\x20Data)','KI-Fehler\x20(Fallback)','aiPersona','analysis.automation.targetValue','analysis.automation.patternDetected','message','\x20->\x20','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','Briefing\x20Error:\x20','text','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','ðŸŒ…\x20Morning\x20Briefing:\x0a','Sicherheit\x20geht\x20vor.','exports','Â°C,\x20'];a0_0x3398=function(){return _0x554b38;};return a0_0x3398();}const a0_0x41113c=a0_0x3ec9;(function(_0x69a31f,_0x322366){const _0x5cf4f7=a0_0x3ec9,_0x4beaad=_0x69a31f();while(!![]){try{const _0x5674b2=-parseInt(_0x5cf4f7(0x1ae))/0x1*(-parseInt(_0x5cf4f7(0x1cc))/0x2)+-parseInt(_0x5cf4f7(0x18f))/0x3+parseInt(_0x5cf4f7(0x1ce))/0x4*(-parseInt(_0x5cf4f7(0x199))/0x5)+parseInt(_0x5cf4f7(0x1a0))/0x6*(parseInt(_0x5cf4f7(0x1c6))/0x7)+parseInt(_0x5cf4f7(0x1bb))/0x8+-parseInt(_0x5cf4f7(0x1cf))/0x9+parseInt(_0x5cf4f7(0x1d5))/0xa*(parseInt(_0x5cf4f7(0x1ca))/0xb);if(_0x5674b2===_0x322366)break;else _0x4beaad['push'](_0x4beaad['shift']());}catch(_0x2361d8){_0x4beaad['push'](_0x4beaad['shift']());}}}(a0_0x3398,0xab472));const a0_0x2a87a4=(function(){let _0xad8327=!![];return function(_0x5f4b22,_0x4ab979){const _0x5c8dd6=_0xad8327?function(){if(_0x4ab979){const _0x5c0561=_0x4ab979['apply'](_0x5f4b22,arguments);return _0x4ab979=null,_0x5c0561;}}:function(){};return _0xad8327=![],_0x5c8dd6;};}()),a0_0x13e1d4=a0_0x2a87a4(this,function(){const _0xd2ade5=a0_0x3ec9;return a0_0x13e1d4['toString']()[_0xd2ade5(0x1bc)](_0xd2ade5(0x1e2))[_0xd2ade5(0x1db)]()[_0xd2ade5(0x18a)](a0_0x13e1d4)[_0xd2ade5(0x1bc)](_0xd2ade5(0x1e2));});a0_0x13e1d4();'use strict';const {GoogleGenerativeAI}=require(a0_0x41113c(0x184)),setup=require(a0_0x41113c(0x1aa)),GEMINI_MODEL=a0_0x41113c(0x1a2),LTM_DP_DAILY_DIGESTS=a0_0x41113c(0x1b7),LTM_DP_STATUS=a0_0x41113c(0x1d2),LTM_DP_RAW_LOG=a0_0x41113c(0x186),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x41113c(0x1d9),'senior_aal':a0_0x41113c(0x206),'family':a0_0x41113c(0x1e1),'single_comfort':a0_0x41113c(0x1da),'security':a0_0x41113c(0x175),'energy_saver':a0_0x41113c(0x188)};function canCallApi(){const _0x4765d8=a0_0x41113c,_0x2a2be6=Date[_0x4765d8(0x1a3)]();return _0x2a2be6-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x2c49ef){const _0x12869a=a0_0x41113c;if(!_0x2c49ef[_0x12869a(0x1f5)][_0x12869a(0x1ed)]||!_0x2c49ef[_0x12869a(0x1f5)]['weatherInstance'])return _0x12869a(0x189);try{const _0x3f22c3=_0x2c49ef['config'][_0x12869a(0x1d8)];let _0x48dadd=await _0x2c49ef[_0x12869a(0x1a8)](_0x3f22c3+_0x12869a(0x1f6));if(!_0x48dadd)_0x48dadd=await _0x2c49ef['getForeignStateAsync'](_0x3f22c3+'.forecast.current.temperature');let _0x3a59af=await _0x2c49ef[_0x12869a(0x1a8)](_0x3f22c3+'.Current.WeatherText');if(!_0x3a59af)_0x3a59af=await _0x2c49ef[_0x12869a(0x1a8)](_0x3f22c3+_0x12869a(0x1fa));let _0x45b2e0=_0x12869a(0x19f);const _0x428feb=await _0x2c49ef['getForeignStateAsync'](_0x3f22c3+_0x12869a(0x1bd));if(_0x428feb)_0x45b2e0=_0x428feb['val']?'Nacht':_0x12869a(0x192);if(_0x48dadd&&_0x3a59af)return _0x48dadd[_0x12869a(0x1f4)]+_0x12869a(0x177)+_0x3a59af[_0x12869a(0x1f4)]+_0x12869a(0x1b8)+_0x45b2e0;}catch(_0xf71db){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x3bb9aa,_0x44eb6d,_0x4d787e,_0x4ea517){const _0xfd5581=a0_0x41113c;if(!_0x3bb9aa[_0xfd5581(0x187)])return{'approved':!![],'reason':_0xfd5581(0x1c5)};const _0x27e57b=Date[_0xfd5581(0x1a3)]();if(decisionCache[_0x44eb6d]&&_0x27e57b-decisionCache[_0x44eb6d][_0xfd5581(0x1c9)]<CACHE_TTL_MS){const _0x53a490=decisionCache[_0x44eb6d][_0xfd5581(0x1c2)];return _0x3bb9aa[_0xfd5581(0x182)][_0xfd5581(0x1dd)](_0xfd5581(0x17d)+_0x44eb6d+_0xfd5581(0x201)+(_0x53a490[_0xfd5581(0x185)]?'OK':'NO')+'\x20('+_0x53a490['reason']+')'),_0x53a490;}if(!canCallApi())return _0x3bb9aa[_0xfd5581(0x182)][_0xfd5581(0x1dd)](_0xfd5581(0x19a)+_0x44eb6d+_0xfd5581(0x1b0)),{'approved':!![],'reason':_0xfd5581(0x1a9)};const _0x443dc5=new Date()[_0xfd5581(0x1ea)](),_0x376e14=await getWeatherContext(_0x3bb9aa),_0x5e7932=PERSONA_MAPPING[_0x3bb9aa[_0xfd5581(0x1f5)][_0xfd5581(0x1fd)]||'generic'],_0x5f0673='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x443dc5+_0xfd5581(0x1e0)+_0x376e14+_0xfd5581(0x1e6)+(_0x4ea517*0x64)[_0xfd5581(0x180)](0x0)+'%)\x20nach\x20\x22'+_0x44eb6d+_0xfd5581(0x19e)+_0x4d787e+_0xfd5581(0x202)+_0x5e7932+_0xfd5581(0x1b4);try{updateApiTimestamp();const _0x51e417=await _0x3bb9aa['geminiModel'][_0xfd5581(0x1ec)](_0x5f0673),_0x34acd3=_0x51e417[_0xfd5581(0x1f9)][_0xfd5581(0x204)]()[_0xfd5581(0x1e7)](/```json|```/g,'')['trim'](),_0x17da26=JSON[_0xfd5581(0x1bf)](_0x34acd3);return decisionCache[_0x44eb6d]={'decision':_0x17da26,'timestamp':_0x27e57b},_0x17da26;}catch(_0x138bf2){return _0x3bb9aa[_0xfd5581(0x182)][_0xfd5581(0x1c8)](_0xfd5581(0x17f)+_0x138bf2[_0xfd5581(0x200)]),decisionCache[_0x44eb6d]={'decision':{'approved':!![],'reason':_0xfd5581(0x1fc)},'timestamp':_0x27e57b-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0xfd5581(0x1fc)};}}function a0_0x3ec9(_0x2006bc,_0x106aee){const _0x2a47b9=a0_0x3398();return a0_0x3ec9=function(_0x13e1d4,_0x2a87a4){_0x13e1d4=_0x13e1d4-0x174;let _0x33983e=_0x2a47b9[_0x13e1d4];return _0x33983e;},a0_0x3ec9(_0x2006bc,_0x106aee);}async function runGeminiAnalysis(_0x4be435,_0x1d750e=''){const _0x29b204=a0_0x41113c;if(!_0x4be435[_0x29b204(0x187)])return;if(!canCallApi()){_0x4be435['log']['debug'](_0x29b204(0x198));return;}if(_0x4be435[_0x29b204(0x1cd)][_0x29b204(0x1b6)]===0x0)return;const _0x475263=_0x4be435[_0x29b204(0x1cd)][_0x29b204(0x1dc)](0x0,0xf),_0x12b3a0=_0x4be435[_0x29b204(0x194)],_0x11e510=PERSONA_MAPPING[_0x4be435[_0x29b204(0x1f5)][_0x29b204(0x1fd)]||_0x29b204(0x1d3)],_0xfd8a1b=_0x4be435[_0x29b204(0x1f5)][_0x29b204(0x1f7)]||'Keine\x20Details.';let _0x28ea5e=_0x29b204(0x19f);try{const _0x5a44a4=await _0x4be435[_0x29b204(0x1c4)](_0x29b204(0x1c1));if(_0x5a44a4&&_0x5a44a4[_0x29b204(0x1f4)])_0x28ea5e=_0x5a44a4[_0x29b204(0x1f4)];}catch(_0x1ba358){}let _0xbb5b43=![];try{const _0x19487d=await _0x4be435['getStateAsync'](_0x29b204(0x1f0));if(_0x19487d&&_0x19487d[_0x29b204(0x1f4)])_0xbb5b43=!![];}catch(_0x3fc762){}const _0x9b6d22=_0x29b204(0x1b9)+_0x11e510+_0x29b204(0x19b)+_0xfd8a1b+'.\x20SYSTEM_MODE:\x20'+_0x12b3a0+_0x29b204(0x1d6)+_0x28ea5e+_0x29b204(0x18d)+JSON['stringify'](_0x475263)+_0x29b204(0x190)+_0x1d750e+_0x29b204(0x1ac);try{updateApiTimestamp();const _0xac27fe=await _0x4be435[_0x29b204(0x187)]['generateContent'](_0x9b6d22),_0xf1366=JSON[_0x29b204(0x1bf)](_0xac27fe[_0x29b204(0x1f9)][_0x29b204(0x204)]()[_0x29b204(0x1e7)](/```json|```/g,'')[_0x29b204(0x1ef)]());await _0x4be435['setStateAsync'](_0x29b204(0x183),{'val':JSON[_0x29b204(0x1eb)](_0xf1366),'ack':!![]});if(_0xf1366[_0x29b204(0x191)])await _0x4be435[_0x29b204(0x17b)](_0x29b204(0x193),{'val':_0xf1366[_0x29b204(0x191)],'ack':!![]});const _0x2e7d5c={'timestamp':Date[_0x29b204(0x1a3)](),'id':Date[_0x29b204(0x1a3)]()['toString'](),'analysis':{'activity':{'summary':_0xf1366['summary'],'isAlert':_0xf1366['isAlert'],'alertReason':_0xf1366[_0x29b204(0x1c7)]},'comfort':{'automationProposal':_0xf1366['automationProposal']}}};_0x4be435[_0x29b204(0x1be)][_0x29b204(0x1f1)](_0x2e7d5c);if(_0x4be435[_0x29b204(0x1be)][_0x29b204(0x1b6)]>0x32)_0x4be435['analysisHistory'][_0x29b204(0x1a4)]();await _0x4be435[_0x29b204(0x17b)](_0x29b204(0x1ad),{'val':JSON[_0x29b204(0x1eb)](_0x4be435['analysisHistory']),'ack':!![]});const _0x115f0b=_0xf1366[_0x29b204(0x1e3)]||![];_0x115f0b!==_0x4be435['lastAlertState']&&(await _0x4be435['setStateAsync'](_0x29b204(0x17e),{'val':_0x115f0b,'ack':!![]}),_0x4be435[_0x29b204(0x1ba)]=_0x115f0b,_0x115f0b&&(await _0x4be435[_0x29b204(0x17b)](_0x29b204(0x19d),{'val':_0xf1366[_0x29b204(0x1c7)],'ack':!![]}),setup[_0x29b204(0x1b5)](_0x4be435,_0x29b204(0x1e5)+_0xf1366['alertReason'],![],_0xf1366[_0x29b204(0x18e)])));if(_0xf1366[_0x29b204(0x1d4)]&&_0xf1366[_0x29b204(0x1d4)][_0x29b204(0x1b2)]){await _0x4be435['setStateAsync'](_0x29b204(0x1ff),{'val':!![],'ack':!![]}),await _0x4be435['setStateAsync'](_0x29b204(0x179),{'val':_0xf1366[_0x29b204(0x1d4)][_0x29b204(0x1cb)],'ack':!![]}),await _0x4be435[_0x29b204(0x17b)](_0x29b204(0x1ab),{'val':_0xf1366[_0x29b204(0x1d4)][_0x29b204(0x1f8)],'ack':!![]}),await _0x4be435[_0x29b204(0x17b)](_0x29b204(0x1fe),{'val':JSON[_0x29b204(0x1eb)](_0xf1366['automationProposal'][_0x29b204(0x1de)]),'ack':!![]});if(_0xbb5b43)executeAutomationAction(_0x4be435);}}catch(_0x2ea399){_0x4be435[_0x29b204(0x182)]['error'](_0x29b204(0x1af)+_0x2ea399[_0x29b204(0x200)]);}}async function createDailyDigest(_0x484763,_0x5bfeb7){const _0x23c3e1=a0_0x41113c;if(!_0x484763[_0x23c3e1(0x1b3)])return;if(!canCallApi()){await _0x484763[_0x23c3e1(0x17b)](LTM_DP_STATUS,{'val':'Skipped\x20(Traffic)','ack':!![]});return;}await _0x484763[_0x23c3e1(0x17b)](LTM_DP_STATUS,{'val':_0x23c3e1(0x1c0),'ack':!![]});if(!_0x484763[_0x23c3e1(0x187)]||_0x484763[_0x23c3e1(0x17a)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x484763[_0x23c3e1(0x17b)](LTM_DP_STATUS,{'val':_0x23c3e1(0x1fb),'ack':!![]});return;}const _0x303fff=JSON['parse'](JSON['stringify'](_0x484763[_0x23c3e1(0x17a)])),_0x2580a3=_0x303fff[_0x23c3e1(0x1b6)],_0xa38add=_0x23c3e1(0x1a1)+JSON['stringify'](_0x303fff);try{updateApiTimestamp();const _0x2d12cf=await _0x484763[_0x23c3e1(0x187)][_0x23c3e1(0x1ec)](_0xa38add),_0x4b572f=JSON[_0x23c3e1(0x1bf)](_0x2d12cf[_0x23c3e1(0x1f9)][_0x23c3e1(0x204)]()['replace'](/```json|```/g,'')[_0x23c3e1(0x1ef)]()),_0x185661={'timestamp':new Date()[_0x23c3e1(0x178)](),'eventCount':_0x2580a3,'summary':_0x4b572f['summary']||'Digest','activityLevel':_0x4b572f[_0x23c3e1(0x1d7)]||_0x23c3e1(0x17c),'systemMode':_0x484763[_0x23c3e1(0x194)]};_0x484763[_0x23c3e1(0x1df)][_0x23c3e1(0x1a5)](_0x185661);const _0x14dadf=_0x484763['config'][_0x23c3e1(0x1e9)]||0x3c;_0x484763[_0x23c3e1(0x1df)][_0x23c3e1(0x1b6)]>_0x14dadf&&_0x484763['dailyDigests']['splice'](0x0,_0x484763[_0x23c3e1(0x1df)]['length']-_0x14dadf);await _0x484763[_0x23c3e1(0x17b)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x23c3e1(0x1eb)](_0x484763[_0x23c3e1(0x1df)]),'ack':!![]}),_0x484763[_0x23c3e1(0x17a)]=[],await _0x484763[_0x23c3e1(0x17b)](LTM_DP_RAW_LOG,{'val':JSON[_0x23c3e1(0x1eb)](_0x484763[_0x23c3e1(0x17a)]),'ack':!![]}),await _0x484763[_0x23c3e1(0x17b)](LTM_DP_STATUS,{'val':_0x23c3e1(0x18b),'ack':!![]});const _0x352c0b=_0x23c3e1(0x197)+_0x4b572f[_0x23c3e1(0x191)]+_0x23c3e1(0x1f3)+_0x4b572f[_0x23c3e1(0x1d7)];setup[_0x23c3e1(0x1b5)](_0x484763,_0x352c0b,![],![]);if(_0x484763[_0x23c3e1(0x1b3)]&&_0x5bfeb7)_0x5bfeb7[_0x23c3e1(0x1f2)](_0x484763,_0x23c3e1(0x181),{'digest':_0x185661});}catch(_0x4d879b){_0x484763['log'][_0x23c3e1(0x196)](_0x4d879b[_0x23c3e1(0x200)]);}}async function runBaselineDriftAnalysis(_0x280427){const _0x23520a=a0_0x41113c;if(!_0x280427[_0x23520a(0x1b3)]||!_0x280427[_0x23520a(0x187)])return;if(!canCallApi())return;const _0x4883cf=_0x280427[_0x23520a(0x1f5)]['ltmStbWindowDays']||0xe;if(_0x280427[_0x23520a(0x1df)][_0x23520a(0x1b6)]<_0x4883cf+0x7){await _0x280427[_0x23520a(0x17b)](_0x23520a(0x1d1),{'val':_0x23520a(0x1b1),'ack':!![]});return;}const _0x1de41a=_0x280427[_0x23520a(0x1df)][_0x23520a(0x1dc)](-_0x4883cf),_0x44e913=_0x280427[_0x23520a(0x1df)]['slice'](0x0,_0x280427['dailyDigests'][_0x23520a(0x1b6)]-_0x4883cf),_0x482b9b=_0x23520a(0x205)+JSON[_0x23520a(0x1eb)](_0x44e913)+'\x0aSTB:\x20'+JSON[_0x23520a(0x1eb)](_0x1de41a);try{updateApiTimestamp();const _0xbc6b2c=await _0x280427['geminiModel'][_0x23520a(0x1ec)](_0x482b9b),_0x2fb61a=JSON[_0x23520a(0x1bf)](_0xbc6b2c['response']['text']()[_0x23520a(0x1e7)](/```json|```/g,'')[_0x23520a(0x1ef)]());_0x2fb61a[_0x23520a(0x1a7)]&&(await _0x280427[_0x23520a(0x17b)](_0x23520a(0x1d1),{'val':_0x2fb61a[_0x23520a(0x1a7)],'ack':!![]}),await _0x280427[_0x23520a(0x17b)](_0x23520a(0x1a6),{'val':_0x2fb61a[_0x23520a(0x195)],'ack':!![]}),await _0x280427[_0x23520a(0x17b)](_0x23520a(0x1e8),{'val':Date[_0x23520a(0x1a3)](),'ack':!![]}));}catch(_0x44e004){}}async function executeAutomationAction(_0x192fab){const _0x11c33c=a0_0x41113c;try{const _0x3753b4=await _0x192fab[_0x11c33c(0x1c4)](_0x11c33c(0x1ab)),_0x33284f=await _0x192fab['getStateAsync'](_0x11c33c(0x1fe));if(_0x3753b4&&_0x3753b4[_0x11c33c(0x1f4)]&&_0x33284f){const _0x48cc7f=_0x3753b4[_0x11c33c(0x1f4)];let _0x1e035c=_0x33284f['val'];try{_0x1e035c=JSON[_0x11c33c(0x1bf)](_0x1e035c);}catch(_0x46bdbb){}_0x192fab[_0x11c33c(0x182)][_0x11c33c(0x1d0)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x48cc7f+_0x11c33c(0x1c3)+_0x1e035c),await _0x192fab['setForeignStateAsync'](_0x48cc7f,_0x1e035c);}else _0x192fab[_0x11c33c(0x182)][_0x11c33c(0x1c8)](_0x11c33c(0x19c));}catch(_0x907e5a){_0x192fab[_0x11c33c(0x182)][_0x11c33c(0x196)](_0x11c33c(0x1e4)+_0x907e5a[_0x11c33c(0x200)]);}}async function sendMorningBriefing(_0x233232){const _0x397ad5=a0_0x41113c;if(!_0x233232['geminiModel']){_0x233232['log'][_0x397ad5(0x1c8)](_0x397ad5(0x18c));return;}_0x233232[_0x397ad5(0x182)][_0x397ad5(0x1d0)]('ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...');try{updateApiTimestamp();const _0x1dec2d='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x5a0a89=await _0x233232[_0x397ad5(0x187)][_0x397ad5(0x1ec)](_0x1dec2d),_0xbbd14c=_0x5a0a89[_0x397ad5(0x1f9)][_0x397ad5(0x204)]();_0x233232[_0x397ad5(0x182)][_0x397ad5(0x1d0)](_0x397ad5(0x1ee)+_0xbbd14c['length']+').\x20Sending\x20notification...'),setup[_0x397ad5(0x1b5)](_0x233232,_0x397ad5(0x174)+_0xbbd14c);}catch(_0x444a58){_0x233232['log'][_0x397ad5(0x196)](_0x397ad5(0x203)+_0x444a58['message']);}}module[a0_0x41113c(0x176)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};