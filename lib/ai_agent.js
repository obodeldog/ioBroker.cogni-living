function a0_0x531a(_0xaa46fe,_0x5d7667){const _0x123843=a0_0x23e4();return a0_0x531a=function(_0x5df8bc,_0x4e21e4){_0x5df8bc=_0x5df8bc-0x1b0;let _0x23e421=_0x123843[_0x5df8bc];return _0x23e421;},a0_0x531a(_0xaa46fe,_0x5d7667);}const a0_0xbf346=a0_0x531a;(function(_0x434d37,_0x455bf2){const _0x591df5=a0_0x531a,_0x34e293=_0x434d37();while(!![]){try{const _0x2115ac=parseInt(_0x591df5(0x236))/0x1+parseInt(_0x591df5(0x1cb))/0x2+parseInt(_0x591df5(0x1db))/0x3*(parseInt(_0x591df5(0x204))/0x4)+-parseInt(_0x591df5(0x226))/0x5+parseInt(_0x591df5(0x1dc))/0x6+-parseInt(_0x591df5(0x228))/0x7*(-parseInt(_0x591df5(0x21b))/0x8)+-parseInt(_0x591df5(0x1bf))/0x9;if(_0x2115ac===_0x455bf2)break;else _0x34e293['push'](_0x34e293['shift']());}catch(_0xec2cc2){_0x34e293['push'](_0x34e293['shift']());}}}(a0_0x23e4,0x37085));const a0_0x4e21e4=(function(){let _0x176cb9=!![];return function(_0x5bd2e2,_0x1d98a2){const _0x16cb9d=_0x176cb9?function(){const _0x2b1c80=a0_0x531a;if(_0x1d98a2){const _0x3c8f3a=_0x1d98a2[_0x2b1c80(0x1d1)](_0x5bd2e2,arguments);return _0x1d98a2=null,_0x3c8f3a;}}:function(){};return _0x176cb9=![],_0x16cb9d;};}()),a0_0x5df8bc=a0_0x4e21e4(this,function(){const _0x1d5b46=a0_0x531a;return a0_0x5df8bc[_0x1d5b46(0x20f)]()[_0x1d5b46(0x1b0)](_0x1d5b46(0x1c8))['toString']()[_0x1d5b46(0x20b)](a0_0x5df8bc)[_0x1d5b46(0x1b0)](_0x1d5b46(0x1c8));});function a0_0x23e4(){const _0x817993=['N/A\x20(Learning)','system.presenceWho','analysis.automation.autoApply','Success','isEmergency','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','decision','getStateAsync','targetId','analysis.automation.patternDetected','analysis.alertReason','timestamp','808088yaYvpv','Briefing\x20Error:\x20','analysis.isAlert','lastAlertState','.\x20ANWESEND:\x20','analysisHistory','toISOString','constructor','.\x20EVENTS:\x20','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','stringify','toString','LTM.dailyDigests','dailyDigests','analysis.automation.targetValue','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','pop','Traffic-Schutz\x20(Auto-Approved)','weatherInstance','KI-Fehler\x20(Fallback)','generic','@google/generative-ai','exports','16vHojOy','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','baselineDrift','LTM.driftAnalysis.driftDetails','.forecast.current.temperature','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','LTM.processingStatus','targetValue','.\x20KONTEXT:\x20','rawEventLog','useWeather','2081915mwUYMd','analysis.analysisHistory','665777RnwtLS','length','slice','parse','‚ö†Ô∏è\x20ALARM:\x20','LTM.driftAnalysis.lastCheck','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','.\x20SYSTEM_MODE:\x20','Tag','push','üåÖ\x20Morning\x20Briefing:\x0a','sendNotification','isProVersion','Keine\x20Details.','138536gyvKwX','generateContent','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','Unbekannt','Skipped\x20(No\x20AI\x20or\x20Data)','search','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','./setup','val','unshift','currentSystemMode','toFixed','log','replace','geminiModel','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','livingContext','Digest','setStateAsync','.forecast.current.state','4880070OOmEtW','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','normal','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','now','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','models/gemini-flash-latest','warn','analysis.automation.description','(((.+)+)+)+$','text','error','438304xZknLf','ANALYZE_HEALTH','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','config','message','ltmStbWindowDays','apply','driftDetails','toLocaleTimeString','LTM.driftAnalysis.baselineDrift','analysis.activitySummary','\x20=\x20','eventHistory','.Current.IsNight','summary','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','6ESgTdo','1392432kNmqCD','getForeignStateAsync','analysis.lastResult','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','debug','trim','.Current.WeatherText','BUTLER\x20Execution\x20Error:\x20','automationProposal','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','ü§ñ\x20Butler\x20Brain\x20Error:\x20','response','isAlert','.Current.Temperature','¬∞C,\x20','Skipped\x20(Traffic)','alertReason','\x20->\x20','\x20√ºbersprungen\x20(Auto-Approved).','LTM.rawEventLog','Unbekannt\x20(Kein\x20Sensor)','description','Sicherheit\x20geht\x20vor.','approved','info','Nacht','aiPersona','analysis.automation.targetId'];a0_0x23e4=function(){return _0x817993;};return a0_0x23e4();}a0_0x5df8bc();'use strict';const {GoogleGenerativeAI}=require(a0_0xbf346(0x219)),setup=require(a0_0xbf346(0x1b2)),GEMINI_MODEL=a0_0xbf346(0x1c5),LTM_DP_DAILY_DIGESTS=a0_0xbf346(0x210),LTM_DP_STATUS=a0_0xbf346(0x221),LTM_DP_RAW_LOG=a0_0xbf346(0x1ef),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0xbf346(0x213),'senior_aal':a0_0xbf346(0x1c0),'family':a0_0xbf346(0x1c2),'single_comfort':a0_0xbf346(0x1df),'security':a0_0xbf346(0x1f2),'energy_saver':a0_0xbf346(0x1e5)};function canCallApi(){const _0x5a3e3d=a0_0xbf346,_0x49a8a0=Date[_0x5a3e3d(0x1c3)]();return _0x49a8a0-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x4d2500=a0_0xbf346;lastGlobalApiCall=Date[_0x4d2500(0x1c3)]();}async function getWeatherContext(_0x27a8e7){const _0xa1e880=a0_0xbf346;if(!_0x27a8e7['config'][_0xa1e880(0x225)]||!_0x27a8e7[_0xa1e880(0x1ce)][_0xa1e880(0x216)])return _0xa1e880(0x1f0);try{const _0xc5c2d0=_0x27a8e7[_0xa1e880(0x1ce)][_0xa1e880(0x216)];let _0x341ff4=await _0x27a8e7[_0xa1e880(0x1dd)](_0xc5c2d0+_0xa1e880(0x1e9));if(!_0x341ff4)_0x341ff4=await _0x27a8e7[_0xa1e880(0x1dd)](_0xc5c2d0+_0xa1e880(0x21f));let _0x4e3744=await _0x27a8e7[_0xa1e880(0x1dd)](_0xc5c2d0+_0xa1e880(0x1e2));if(!_0x4e3744)_0x4e3744=await _0x27a8e7[_0xa1e880(0x1dd)](_0xc5c2d0+_0xa1e880(0x1be));let _0x28b7dc=_0xa1e880(0x239);const _0x2986fe=await _0x27a8e7[_0xa1e880(0x1dd)](_0xc5c2d0+_0xa1e880(0x1d8));if(_0x2986fe)_0x28b7dc=_0x2986fe[_0xa1e880(0x1b3)]?_0xa1e880(0x1f5):_0xa1e880(0x230);if(_0x341ff4&&_0x4e3744)return _0x341ff4[_0xa1e880(0x1b3)]+_0xa1e880(0x1ea)+_0x4e3744['val']+',\x20Lichtverh√§ltnisse:\x20'+_0x28b7dc;}catch(_0x4b562c){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x26eef3,_0xc31a60,_0x49cbf9,_0x1f7dea){const _0x3e1956=a0_0xbf346;if(!_0x26eef3[_0x3e1956(0x1b9)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x2fb108=Date[_0x3e1956(0x1c3)]();if(decisionCache[_0xc31a60]&&_0x2fb108-decisionCache[_0xc31a60][_0x3e1956(0x203)]<CACHE_TTL_MS){const _0x13a712=decisionCache[_0xc31a60][_0x3e1956(0x1fe)];return _0x26eef3[_0x3e1956(0x1b7)]['debug'](_0x3e1956(0x238)+_0xc31a60+_0x3e1956(0x1ed)+(_0x13a712[_0x3e1956(0x1f3)]?'OK':'NO')+'\x20('+_0x13a712['reason']+')'),_0x13a712;}if(!canCallApi())return _0x26eef3[_0x3e1956(0x1b7)]['debug'](_0x3e1956(0x1fd)+_0xc31a60+_0x3e1956(0x1ee)),{'approved':!![],'reason':_0x3e1956(0x215)};const _0x3b2767=new Date()[_0x3e1956(0x1d3)](),_0x142f48=await getWeatherContext(_0x26eef3),_0x262df2=PERSONA_MAPPING[_0x26eef3['config']['aiPersona']||'generic'],_0x433ea7='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x3b2767+',\x20Wetter:\x20'+_0x142f48+_0x3e1956(0x20d)+(_0x1f7dea*0x64)[_0x3e1956(0x1b6)](0x0)+'%)\x20nach\x20\x22'+_0xc31a60+_0x3e1956(0x1cd)+_0x49cbf9+_0x3e1956(0x220)+_0x262df2+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x4c9f97=await _0x26eef3['geminiModel'][_0x3e1956(0x237)](_0x433ea7),_0x556430=_0x4c9f97[_0x3e1956(0x1e7)][_0x3e1956(0x1c9)]()[_0x3e1956(0x1b8)](/```json|```/g,'')[_0x3e1956(0x1e1)](),_0x1d5048=JSON[_0x3e1956(0x22b)](_0x556430);return decisionCache[_0xc31a60]={'decision':_0x1d5048,'timestamp':_0x2fb108},_0x1d5048;}catch(_0x25a772){return _0x26eef3['log'][_0x3e1956(0x1c6)](_0x3e1956(0x1e6)+_0x25a772[_0x3e1956(0x1cf)]),decisionCache[_0xc31a60]={'decision':{'approved':!![],'reason':_0x3e1956(0x217)},'timestamp':_0x2fb108-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x3e1956(0x217)};}}async function runGeminiAnalysis(_0x2c037e,_0xeecda7=''){const _0x426a88=a0_0xbf346;if(!_0x2c037e[_0x426a88(0x1b9)])return;if(!canCallApi()){_0x2c037e[_0x426a88(0x1b7)][_0x426a88(0x1e0)](_0x426a88(0x22e));return;}if(_0x2c037e[_0x426a88(0x1d7)]['length']===0x0)return;const _0x2216de=_0x2c037e['eventHistory'][_0x426a88(0x22a)](0x0,0xf),_0x4ec60e=_0x2c037e[_0x426a88(0x1b5)],_0x41702a=PERSONA_MAPPING[_0x2c037e[_0x426a88(0x1ce)][_0x426a88(0x1f6)]||_0x426a88(0x218)],_0x6b1b5e=_0x2c037e[_0x426a88(0x1ce)][_0x426a88(0x1bb)]||_0x426a88(0x235);let _0x3c14a1=_0x426a88(0x239);try{const _0x25f446=await _0x2c037e[_0x426a88(0x1ff)](_0x426a88(0x1f9));if(_0x25f446&&_0x25f446[_0x426a88(0x1b3)])_0x3c14a1=_0x25f446[_0x426a88(0x1b3)];}catch(_0x47af1){}let _0x10a76d=![];try{const _0x58caa2=await _0x2c037e[_0x426a88(0x1ff)](_0x426a88(0x1fa));if(_0x58caa2&&_0x58caa2['val'])_0x10a76d=!![];}catch(_0x10c69a){}const _0x478560='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x41702a+_0x426a88(0x223)+_0x6b1b5e+_0x426a88(0x22f)+_0x4ec60e+_0x426a88(0x208)+_0x3c14a1+_0x426a88(0x20c)+JSON[_0x426a88(0x20e)](_0x2216de)+'.\x20EMERGENCY:\x20'+_0xeecda7+_0x426a88(0x21c);try{updateApiTimestamp();const _0x45633d=await _0x2c037e['geminiModel'][_0x426a88(0x237)](_0x478560),_0x52de73=JSON[_0x426a88(0x22b)](_0x45633d[_0x426a88(0x1e7)][_0x426a88(0x1c9)]()['replace'](/```json|```/g,'')['trim']());await _0x2c037e[_0x426a88(0x1bd)](_0x426a88(0x1de),{'val':JSON[_0x426a88(0x20e)](_0x52de73),'ack':!![]});if(_0x52de73[_0x426a88(0x1d9)])await _0x2c037e[_0x426a88(0x1bd)](_0x426a88(0x1d5),{'val':_0x52de73['summary'],'ack':!![]});const _0x4fcd23={'timestamp':Date[_0x426a88(0x1c3)](),'id':Date[_0x426a88(0x1c3)]()[_0x426a88(0x20f)](),'analysis':{'activity':{'summary':_0x52de73['summary'],'isAlert':_0x52de73[_0x426a88(0x1e8)],'alertReason':_0x52de73[_0x426a88(0x1ec)]},'comfort':{'automationProposal':_0x52de73[_0x426a88(0x1e4)]}}};_0x2c037e[_0x426a88(0x209)][_0x426a88(0x1b4)](_0x4fcd23);if(_0x2c037e['analysisHistory'][_0x426a88(0x229)]>0x32)_0x2c037e[_0x426a88(0x209)][_0x426a88(0x214)]();await _0x2c037e[_0x426a88(0x1bd)](_0x426a88(0x227),{'val':JSON['stringify'](_0x2c037e['analysisHistory']),'ack':!![]});const _0x4c55e4=_0x52de73[_0x426a88(0x1e8)]||![];_0x4c55e4!==_0x2c037e[_0x426a88(0x207)]&&(await _0x2c037e['setStateAsync'](_0x426a88(0x206),{'val':_0x4c55e4,'ack':!![]}),_0x2c037e[_0x426a88(0x207)]=_0x4c55e4,_0x4c55e4&&(await _0x2c037e[_0x426a88(0x1bd)](_0x426a88(0x202),{'val':_0x52de73[_0x426a88(0x1ec)],'ack':!![]}),setup[_0x426a88(0x233)](_0x2c037e,_0x426a88(0x22c)+_0x52de73[_0x426a88(0x1ec)],![],_0x52de73[_0x426a88(0x1fc)])));if(_0x52de73[_0x426a88(0x1e4)]&&_0x52de73[_0x426a88(0x1e4)]['detected']){await _0x2c037e[_0x426a88(0x1bd)](_0x426a88(0x201),{'val':!![],'ack':!![]}),await _0x2c037e[_0x426a88(0x1bd)](_0x426a88(0x1c7),{'val':_0x52de73[_0x426a88(0x1e4)][_0x426a88(0x1f1)],'ack':!![]}),await _0x2c037e[_0x426a88(0x1bd)](_0x426a88(0x1f7),{'val':_0x52de73[_0x426a88(0x1e4)][_0x426a88(0x200)],'ack':!![]}),await _0x2c037e['setStateAsync'](_0x426a88(0x212),{'val':JSON['stringify'](_0x52de73[_0x426a88(0x1e4)][_0x426a88(0x222)]),'ack':!![]});if(_0x10a76d)executeAutomationAction(_0x2c037e);}}catch(_0x5185b6){_0x2c037e[_0x426a88(0x1b7)][_0x426a88(0x1ca)]('Gemini\x20Error:\x20'+_0x5185b6[_0x426a88(0x1cf)]);}}async function createDailyDigest(_0x5a7dd7,_0xe00da5){const _0x22c1f4=a0_0xbf346;if(!_0x5a7dd7[_0x22c1f4(0x234)])return;if(!canCallApi()){await _0x5a7dd7[_0x22c1f4(0x1bd)](LTM_DP_STATUS,{'val':_0x22c1f4(0x1eb),'ack':!![]});return;}await _0x5a7dd7['setStateAsync'](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x5a7dd7[_0x22c1f4(0x1b9)]||_0x5a7dd7['rawEventLog'][_0x22c1f4(0x229)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x5a7dd7['setStateAsync'](LTM_DP_STATUS,{'val':_0x22c1f4(0x23a),'ack':!![]});return;}const _0x31f1ef=JSON[_0x22c1f4(0x22b)](JSON[_0x22c1f4(0x20e)](_0x5a7dd7[_0x22c1f4(0x224)])),_0x5b7fe0=_0x31f1ef['length'],_0x11c1e9=_0x22c1f4(0x1ba)+JSON['stringify'](_0x31f1ef);try{updateApiTimestamp();const _0x25d911=await _0x5a7dd7[_0x22c1f4(0x1b9)][_0x22c1f4(0x237)](_0x11c1e9),_0x572a55=JSON[_0x22c1f4(0x22b)](_0x25d911[_0x22c1f4(0x1e7)]['text']()[_0x22c1f4(0x1b8)](/```json|```/g,'')['trim']()),_0x1f147d={'timestamp':new Date()[_0x22c1f4(0x20a)](),'eventCount':_0x5b7fe0,'summary':_0x572a55['summary']||_0x22c1f4(0x1bc),'activityLevel':_0x572a55['activityLevel']||_0x22c1f4(0x1c1),'systemMode':_0x5a7dd7[_0x22c1f4(0x1b5)]};_0x5a7dd7[_0x22c1f4(0x211)][_0x22c1f4(0x231)](_0x1f147d);const _0x1604a1=_0x5a7dd7[_0x22c1f4(0x1ce)]['ltmLtbWindowDays']||0x3c;_0x5a7dd7[_0x22c1f4(0x211)][_0x22c1f4(0x229)]>_0x1604a1&&_0x5a7dd7[_0x22c1f4(0x211)]['splice'](0x0,_0x5a7dd7[_0x22c1f4(0x211)][_0x22c1f4(0x229)]-_0x1604a1);await _0x5a7dd7['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x22c1f4(0x20e)](_0x5a7dd7['dailyDigests']),'ack':!![]}),_0x5a7dd7[_0x22c1f4(0x224)]=[],await _0x5a7dd7[_0x22c1f4(0x1bd)](LTM_DP_RAW_LOG,{'val':JSON[_0x22c1f4(0x20e)](_0x5a7dd7[_0x22c1f4(0x224)]),'ack':!![]}),await _0x5a7dd7[_0x22c1f4(0x1bd)](LTM_DP_STATUS,{'val':_0x22c1f4(0x1fb),'ack':!![]});if(_0x5a7dd7[_0x22c1f4(0x234)]&&_0xe00da5)_0xe00da5['send'](_0x5a7dd7,_0x22c1f4(0x1cc),{'digest':_0x1f147d});}catch(_0x3a55fc){_0x5a7dd7[_0x22c1f4(0x1b7)][_0x22c1f4(0x1ca)](_0x3a55fc[_0x22c1f4(0x1cf)]);}}async function runBaselineDriftAnalysis(_0x4ab13c){const _0x333ce2=a0_0xbf346;if(!_0x4ab13c[_0x333ce2(0x234)]||!_0x4ab13c['geminiModel'])return;if(!canCallApi())return;const _0x5e073d=_0x4ab13c[_0x333ce2(0x1ce)][_0x333ce2(0x1d0)]||0xe;if(_0x4ab13c[_0x333ce2(0x211)]['length']<_0x5e073d+0x7){await _0x4ab13c[_0x333ce2(0x1bd)](_0x333ce2(0x1d4),{'val':_0x333ce2(0x1f8),'ack':!![]});return;}const _0x9ec272=_0x4ab13c[_0x333ce2(0x211)]['slice'](-_0x5e073d),_0x203b92=_0x4ab13c[_0x333ce2(0x211)][_0x333ce2(0x22a)](0x0,_0x4ab13c[_0x333ce2(0x211)][_0x333ce2(0x229)]-_0x5e073d),_0x4f9576=_0x333ce2(0x1da)+JSON[_0x333ce2(0x20e)](_0x203b92)+'\x0aSTB:\x20'+JSON[_0x333ce2(0x20e)](_0x9ec272);try{updateApiTimestamp();const _0x45069a=await _0x4ab13c[_0x333ce2(0x1b9)][_0x333ce2(0x237)](_0x4f9576),_0x2fa869=JSON[_0x333ce2(0x22b)](_0x45069a[_0x333ce2(0x1e7)]['text']()['replace'](/```json|```/g,'')[_0x333ce2(0x1e1)]());_0x2fa869['baselineDrift']&&(await _0x4ab13c[_0x333ce2(0x1bd)](_0x333ce2(0x1d4),{'val':_0x2fa869[_0x333ce2(0x21d)],'ack':!![]}),await _0x4ab13c[_0x333ce2(0x1bd)](_0x333ce2(0x21e),{'val':_0x2fa869[_0x333ce2(0x1d2)],'ack':!![]}),await _0x4ab13c['setStateAsync'](_0x333ce2(0x22d),{'val':Date[_0x333ce2(0x1c3)](),'ack':!![]}));}catch(_0x2ec2f0){}}async function executeAutomationAction(_0x8700be){const _0x4d38b8=a0_0xbf346;try{const _0x2c565c=await _0x8700be[_0x4d38b8(0x1ff)](_0x4d38b8(0x1f7)),_0x53ae45=await _0x8700be['getStateAsync'](_0x4d38b8(0x212));if(_0x2c565c&&_0x2c565c[_0x4d38b8(0x1b3)]&&_0x53ae45){const _0x43cde1=_0x2c565c[_0x4d38b8(0x1b3)];let _0x2b63ef=_0x53ae45[_0x4d38b8(0x1b3)];try{_0x2b63ef=JSON['parse'](_0x2b63ef);}catch(_0x1a2be1){}_0x8700be['log'][_0x4d38b8(0x1f4)](_0x4d38b8(0x1c4)+_0x43cde1+_0x4d38b8(0x1d6)+_0x2b63ef),await _0x8700be['setForeignStateAsync'](_0x43cde1,_0x2b63ef);}else _0x8700be[_0x4d38b8(0x1b7)][_0x4d38b8(0x1c6)](_0x4d38b8(0x1b1));}catch(_0x2711f4){_0x8700be[_0x4d38b8(0x1b7)][_0x4d38b8(0x1ca)](_0x4d38b8(0x1e3)+_0x2711f4[_0x4d38b8(0x1cf)]);}}async function sendMorningBriefing(_0x3fba99){const _0x264c70=a0_0xbf346;if(!_0x3fba99['geminiModel'])return;if(!canCallApi())return;try{updateApiTimestamp();const _0xb3e01e='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x542936=await _0x3fba99[_0x264c70(0x1b9)][_0x264c70(0x237)](_0xb3e01e),_0x4b9a35=_0x542936[_0x264c70(0x1e7)][_0x264c70(0x1c9)]();setup[_0x264c70(0x233)](_0x3fba99,_0x264c70(0x232)+_0x4b9a35);}catch(_0x2cbc59){_0x3fba99[_0x264c70(0x1b7)][_0x264c70(0x1ca)](_0x264c70(0x205)+_0x2cbc59['message']);}}module[a0_0xbf346(0x21a)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};