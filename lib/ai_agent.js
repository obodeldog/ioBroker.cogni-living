const a0_0x7f32fd=a0_0xba8a;(function(_0x2f55d3,_0x430c98){const _0x11cfc1=a0_0xba8a,_0x440058=_0x2f55d3();while(!![]){try{const _0x13250f=parseInt(_0x11cfc1(0x176))/0x1*(-parseInt(_0x11cfc1(0x14c))/0x2)+parseInt(_0x11cfc1(0x14e))/0x3+parseInt(_0x11cfc1(0x185))/0x4*(-parseInt(_0x11cfc1(0x1a8))/0x5)+-parseInt(_0x11cfc1(0x19f))/0x6*(parseInt(_0x11cfc1(0x1c4))/0x7)+parseInt(_0x11cfc1(0x1a3))/0x8*(parseInt(_0x11cfc1(0x152))/0x9)+parseInt(_0x11cfc1(0x18c))/0xa+-parseInt(_0x11cfc1(0x1a4))/0xb*(-parseInt(_0x11cfc1(0x1c8))/0xc);if(_0x13250f===_0x430c98)break;else _0x440058['push'](_0x440058['shift']());}catch(_0x31b019){_0x440058['push'](_0x440058['shift']());}}}(a0_0xf104,0xc04df));const a0_0x4f8a3b=(function(){let _0x2ea938=!![];return function(_0x253468,_0x5a0692){const _0x1ee0ad=_0x2ea938?function(){const _0x8f09d9=a0_0xba8a;if(_0x5a0692){const _0x1803a4=_0x5a0692[_0x8f09d9(0x155)](_0x253468,arguments);return _0x5a0692=null,_0x1803a4;}}:function(){};return _0x2ea938=![],_0x1ee0ad;};}()),a0_0x535552=a0_0x4f8a3b(this,function(){const _0x24f9fe=a0_0xba8a;return a0_0x535552['toString']()['search']('(((.+)+)+)+$')[_0x24f9fe(0x1ba)]()['constructor'](a0_0x535552)[_0x24f9fe(0x16c)](_0x24f9fe(0x1c9));});function a0_0xba8a(_0x158926,_0x2a426a){const _0x71f93f=a0_0xf104();return a0_0xba8a=function(_0x535552,_0x4f8a3b){_0x535552=_0x535552-0x132;let _0xf10472=_0x71f93f[_0x535552];return _0xf10472;},a0_0xba8a(_0x158926,_0x2a426a);}a0_0x535552();'use strict';const {GoogleGenerativeAI}=require(a0_0x7f32fd(0x19a)),setup=require(a0_0x7f32fd(0x135)),GEMINI_MODEL=a0_0x7f32fd(0x1b0),LTM_DP_DAILY_DIGESTS=a0_0x7f32fd(0x1ac),LTM_DP_STATUS=a0_0x7f32fd(0x18b),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x7f32fd(0x1b3),'senior_aal':'PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':a0_0x7f32fd(0x188),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':a0_0x7f32fd(0x1c1),'energy_saver':a0_0x7f32fd(0x16e)};function canCallApi(){const _0x13734c=a0_0x7f32fd,_0x116790=Date[_0x13734c(0x193)]();return _0x116790-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x32e133){const _0x4cc340=a0_0x7f32fd;if(!_0x32e133['config']['useWeather']||!_0x32e133['config']['weatherInstance'])return _0x4cc340(0x13f);try{const _0x3ad0ad=_0x32e133[_0x4cc340(0x1a1)][_0x4cc340(0x1c5)];let _0x178b85=await _0x32e133[_0x4cc340(0x14a)](_0x3ad0ad+_0x4cc340(0x18f));if(!_0x178b85)_0x178b85=await _0x32e133['getForeignStateAsync'](_0x3ad0ad+_0x4cc340(0x14b));let _0x4bb71f=await _0x32e133['getForeignStateAsync'](_0x3ad0ad+_0x4cc340(0x153));if(!_0x4bb71f)_0x4bb71f=await _0x32e133['getForeignStateAsync'](_0x3ad0ad+'.forecast.current.state');let _0x475833=_0x4cc340(0x178);const _0x4c42fc=await _0x32e133[_0x4cc340(0x14a)](_0x3ad0ad+_0x4cc340(0x1bd));if(_0x4c42fc)_0x475833=_0x4c42fc[_0x4cc340(0x148)]?'Nacht':'Tag';if(_0x178b85&&_0x4bb71f)return _0x178b85[_0x4cc340(0x148)]+_0x4cc340(0x1c2)+_0x4bb71f['val']+_0x4cc340(0x182)+_0x475833;}catch(_0x3f55b5){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x44457f,_0x3c31aa,_0x2a90e5,_0x403913){const _0x27c5d8=a0_0x7f32fd;if(!_0x44457f[_0x27c5d8(0x1cc)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x49ba6f=Date['now']();if(decisionCache[_0x3c31aa]&&_0x49ba6f-decisionCache[_0x3c31aa][_0x27c5d8(0x147)]<CACHE_TTL_MS){const _0x50a57c=decisionCache[_0x3c31aa][_0x27c5d8(0x132)];return _0x44457f['log'][_0x27c5d8(0x1a2)](_0x27c5d8(0x1c3)+_0x3c31aa+_0x27c5d8(0x171)+(_0x50a57c[_0x27c5d8(0x15a)]?'OK':'NO')+'\x20('+_0x50a57c[_0x27c5d8(0x1bf)]+')'),_0x50a57c;}if(!canCallApi())return _0x44457f[_0x27c5d8(0x189)]['debug'](_0x27c5d8(0x1b5)+_0x3c31aa+_0x27c5d8(0x151)),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x1375a1=new Date()['toLocaleTimeString'](),_0x5eac2f=await getWeatherContext(_0x44457f),_0x4d34c6=PERSONA_MAPPING[_0x44457f['config'][_0x27c5d8(0x19c)]||_0x27c5d8(0x13e)],_0x261775='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x1375a1+_0x27c5d8(0x1a5)+_0x5eac2f+_0x27c5d8(0x16d)+(_0x403913*0x64)[_0x27c5d8(0x169)](0x0)+_0x27c5d8(0x199)+_0x3c31aa+_0x27c5d8(0x197)+_0x2a90e5+_0x27c5d8(0x159)+_0x4d34c6+_0x27c5d8(0x180);try{updateApiTimestamp();const _0x5a9a37=await _0x44457f[_0x27c5d8(0x1cc)][_0x27c5d8(0x1c7)](_0x261775),_0xe857ad=_0x5a9a37[_0x27c5d8(0x143)][_0x27c5d8(0x195)]()[_0x27c5d8(0x139)](/```json|```/g,'')[_0x27c5d8(0x1ca)](),_0x5bbe94=JSON[_0x27c5d8(0x1b4)](_0xe857ad);return decisionCache[_0x3c31aa]={'decision':_0x5bbe94,'timestamp':_0x49ba6f},_0x5bbe94;}catch(_0x2ec379){return _0x44457f[_0x27c5d8(0x189)][_0x27c5d8(0x15c)](_0x27c5d8(0x175)+_0x2ec379[_0x27c5d8(0x194)]),decisionCache[_0x3c31aa]={'decision':{'approved':!![],'reason':_0x27c5d8(0x184)},'timestamp':_0x49ba6f-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x27c5d8(0x184)};}}async function runGeminiAnalysis(_0x324642,_0x1a0cf9=''){const _0x2c3619=a0_0x7f32fd;if(!_0x324642['geminiModel'])return;if(!canCallApi()){_0x324642['log'][_0x2c3619(0x1a2)]('ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x324642[_0x2c3619(0x146)]['length']===0x0)return;const _0x21b145=_0x324642[_0x2c3619(0x146)][_0x2c3619(0x1b1)](0x0,0xf),_0x271958=_0x324642[_0x2c3619(0x17b)],_0x1f3e67=PERSONA_MAPPING[_0x324642[_0x2c3619(0x1a1)]['aiPersona']||_0x2c3619(0x13e)],_0x37ec29=_0x324642[_0x2c3619(0x1a1)][_0x2c3619(0x158)]||_0x2c3619(0x18d);let _0x583dc9=_0x2c3619(0x178);try{const _0x17e3a6=await _0x324642[_0x2c3619(0x13c)](_0x2c3619(0x1a6));if(_0x17e3a6&&_0x17e3a6[_0x2c3619(0x148)])_0x583dc9=_0x17e3a6[_0x2c3619(0x148)];}catch(_0x18cfb5){}let _0x7ac2e3=![];try{const _0x10d7d4=await _0x324642[_0x2c3619(0x13c)](_0x2c3619(0x173));if(_0x10d7d4&&_0x10d7d4[_0x2c3619(0x148)])_0x7ac2e3=!![];}catch(_0x7ab1df){}const _0x4593bb='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x1f3e67+_0x2c3619(0x19b)+_0x37ec29+_0x2c3619(0x138)+_0x271958+_0x2c3619(0x1b6)+_0x583dc9+_0x2c3619(0x162)+JSON['stringify'](_0x21b145)+_0x2c3619(0x1ad)+_0x1a0cf9+_0x2c3619(0x165);try{updateApiTimestamp();const _0x408430=await _0x324642[_0x2c3619(0x1cc)][_0x2c3619(0x1c7)](_0x4593bb),_0x44bba2=JSON[_0x2c3619(0x1b4)](_0x408430[_0x2c3619(0x143)][_0x2c3619(0x195)]()[_0x2c3619(0x139)](/```json|```/g,'')['trim']());await _0x324642[_0x2c3619(0x160)](_0x2c3619(0x18a),{'val':JSON[_0x2c3619(0x142)](_0x44bba2),'ack':!![]});if(_0x44bba2[_0x2c3619(0x1a7)])await _0x324642['setStateAsync'](_0x2c3619(0x137),{'val':_0x44bba2[_0x2c3619(0x1a7)],'ack':!![]});const _0x5b4f0d={'timestamp':Date['now'](),'id':Date[_0x2c3619(0x193)]()[_0x2c3619(0x1ba)](),'analysis':{'activity':{'summary':_0x44bba2[_0x2c3619(0x1a7)],'isAlert':_0x44bba2[_0x2c3619(0x172)],'alertReason':_0x44bba2[_0x2c3619(0x145)]},'comfort':{'automationProposal':_0x44bba2[_0x2c3619(0x133)]}}};_0x324642[_0x2c3619(0x170)][_0x2c3619(0x174)](_0x5b4f0d);if(_0x324642[_0x2c3619(0x170)][_0x2c3619(0x161)]>0x32)_0x324642[_0x2c3619(0x170)]['pop']();await _0x324642['setStateAsync'](_0x2c3619(0x13b),{'val':JSON[_0x2c3619(0x142)](_0x324642[_0x2c3619(0x170)]),'ack':!![]});const _0x44227c=_0x44bba2['isAlert']||![];_0x44227c!==_0x324642[_0x2c3619(0x1b2)]&&(await _0x324642[_0x2c3619(0x160)](_0x2c3619(0x1ab),{'val':_0x44227c,'ack':!![]}),_0x324642['lastAlertState']=_0x44227c,_0x44227c&&(await _0x324642['setStateAsync'](_0x2c3619(0x166),{'val':_0x44bba2[_0x2c3619(0x145)],'ack':!![]}),setup[_0x2c3619(0x1a9)](_0x324642,'‚ö†Ô∏è\x20ALARM:\x20'+_0x44bba2[_0x2c3619(0x145)],![],_0x44bba2[_0x2c3619(0x196)])));if(_0x44bba2[_0x2c3619(0x133)]&&_0x44bba2[_0x2c3619(0x133)][_0x2c3619(0x186)]){await _0x324642[_0x2c3619(0x160)](_0x2c3619(0x1aa),{'val':!![],'ack':!![]}),await _0x324642['setStateAsync']('analysis.automation.description',{'val':_0x44bba2[_0x2c3619(0x133)]['description'],'ack':!![]}),await _0x324642[_0x2c3619(0x160)]('analysis.automation.targetId',{'val':_0x44bba2[_0x2c3619(0x133)]['targetId'],'ack':!![]}),await _0x324642[_0x2c3619(0x160)]('analysis.automation.targetValue',{'val':JSON[_0x2c3619(0x142)](_0x44bba2['automationProposal'][_0x2c3619(0x14d)]),'ack':!![]});if(_0x7ac2e3)executeAutomationAction(_0x324642);}}catch(_0x2d4f90){_0x324642['log'][_0x2c3619(0x1b9)](_0x2c3619(0x19d)+_0x2d4f90[_0x2c3619(0x194)]);}}async function createDailyDigest(_0x402d4f,_0x2b351a){const _0x1b9b8b=a0_0x7f32fd;if(!_0x402d4f[_0x1b9b8b(0x177)])return;if(!canCallApi()){await _0x402d4f[_0x1b9b8b(0x160)](LTM_DP_STATUS,{'val':_0x1b9b8b(0x179),'ack':!![]});return;}await _0x402d4f[_0x1b9b8b(0x160)](LTM_DP_STATUS,{'val':_0x1b9b8b(0x18e),'ack':!![]});if(!_0x402d4f[_0x1b9b8b(0x1cc)]||_0x402d4f[_0x1b9b8b(0x1b8)][_0x1b9b8b(0x161)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x402d4f[_0x1b9b8b(0x160)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x3f8ad7=JSON[_0x1b9b8b(0x1b4)](JSON[_0x1b9b8b(0x142)](_0x402d4f[_0x1b9b8b(0x1b8)])),_0x57f1f0=_0x3f8ad7[_0x1b9b8b(0x161)],_0x576fb7=_0x1b9b8b(0x168)+JSON[_0x1b9b8b(0x142)](_0x3f8ad7);try{updateApiTimestamp();const _0x4ddd58=await _0x402d4f['geminiModel'][_0x1b9b8b(0x1c7)](_0x576fb7),_0x9acd21=JSON[_0x1b9b8b(0x1b4)](_0x4ddd58[_0x1b9b8b(0x143)][_0x1b9b8b(0x195)]()['replace'](/```json|```/g,'')[_0x1b9b8b(0x1ca)]()),_0x5ad4c4={'timestamp':new Date()[_0x1b9b8b(0x156)](),'eventCount':_0x57f1f0,'summary':_0x9acd21[_0x1b9b8b(0x1a7)]||'Digest','activityLevel':_0x9acd21[_0x1b9b8b(0x1af)]||'normal','systemMode':_0x402d4f[_0x1b9b8b(0x17b)]};_0x402d4f[_0x1b9b8b(0x141)][_0x1b9b8b(0x1cd)](_0x5ad4c4);const _0xd71754=_0x402d4f[_0x1b9b8b(0x1a1)]['ltmLtbWindowDays']||0x3c;_0x402d4f[_0x1b9b8b(0x141)][_0x1b9b8b(0x161)]>_0xd71754&&_0x402d4f[_0x1b9b8b(0x141)]['splice'](0x0,_0x402d4f['dailyDigests'][_0x1b9b8b(0x161)]-_0xd71754);await _0x402d4f[_0x1b9b8b(0x160)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x1b9b8b(0x142)](_0x402d4f[_0x1b9b8b(0x141)]),'ack':!![]}),_0x402d4f[_0x1b9b8b(0x1b8)]=[],await _0x402d4f[_0x1b9b8b(0x160)](LTM_DP_RAW_LOG,{'val':JSON[_0x1b9b8b(0x142)](_0x402d4f['rawEventLog']),'ack':!![]}),await _0x402d4f[_0x1b9b8b(0x160)](LTM_DP_STATUS,{'val':_0x1b9b8b(0x190),'ack':!![]});const _0x262338='üìÖ\x20Daily\x20Digest:\x0a'+_0x9acd21['summary']+_0x1b9b8b(0x19e)+_0x9acd21['activityLevel'];setup[_0x1b9b8b(0x1a9)](_0x402d4f,_0x262338,![],![]);if(_0x402d4f[_0x1b9b8b(0x177)]&&_0x2b351a)_0x2b351a['send'](_0x402d4f,'ANALYZE_HEALTH',{'digest':_0x5ad4c4});}catch(_0x2df872){_0x402d4f[_0x1b9b8b(0x189)][_0x1b9b8b(0x1b9)](_0x2df872['message']);}}async function runBaselineDriftAnalysis(_0x2bcfda){const _0x58531a=a0_0x7f32fd;if(!_0x2bcfda[_0x58531a(0x177)]||!_0x2bcfda['geminiModel'])return;if(!canCallApi())return;const _0xcbb5fe=_0x2bcfda[_0x58531a(0x1a1)][_0x58531a(0x191)]||0xe;if(_0x2bcfda[_0x58531a(0x141)][_0x58531a(0x161)]<_0xcbb5fe+0x7){await _0x2bcfda[_0x58531a(0x160)](_0x58531a(0x1b7),{'val':_0x58531a(0x183),'ack':!![]});return;}const _0x439b13=_0x2bcfda['dailyDigests']['slice'](-_0xcbb5fe),_0x3503dd=_0x2bcfda['dailyDigests'][_0x58531a(0x1b1)](0x0,_0x2bcfda[_0x58531a(0x141)][_0x58531a(0x161)]-_0xcbb5fe),_0x20cc80='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x58531a(0x142)](_0x3503dd)+_0x58531a(0x150)+JSON[_0x58531a(0x142)](_0x439b13);try{updateApiTimestamp();const _0x42ecb4=await _0x2bcfda[_0x58531a(0x1cc)][_0x58531a(0x1c7)](_0x20cc80),_0x36471b=JSON[_0x58531a(0x1b4)](_0x42ecb4[_0x58531a(0x143)][_0x58531a(0x195)]()[_0x58531a(0x139)](/```json|```/g,'')[_0x58531a(0x1ca)]());_0x36471b[_0x58531a(0x1c6)]&&(await _0x2bcfda['setStateAsync'](_0x58531a(0x1b7),{'val':_0x36471b[_0x58531a(0x1c6)],'ack':!![]}),await _0x2bcfda[_0x58531a(0x160)](_0x58531a(0x140),{'val':_0x36471b[_0x58531a(0x13a)],'ack':!![]}),await _0x2bcfda[_0x58531a(0x160)]('LTM.driftAnalysis.lastCheck',{'val':Date[_0x58531a(0x193)](),'ack':!![]}));}catch(_0x385cfa){}}async function executeAutomationAction(_0x38a138){const _0x389420=a0_0x7f32fd;try{const _0x1df031=await _0x38a138[_0x389420(0x13c)](_0x389420(0x157)),_0x172617=await _0x38a138['getStateAsync']('analysis.automation.targetValue');if(_0x1df031&&_0x1df031[_0x389420(0x148)]&&_0x172617){const _0x4ce45d=_0x1df031['val'];let _0x5c59c8=_0x172617[_0x389420(0x148)];try{_0x5c59c8=JSON[_0x389420(0x1b4)](_0x5c59c8);}catch(_0x5765d9){}_0x38a138[_0x389420(0x189)][_0x389420(0x15b)]('ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x4ce45d+_0x389420(0x149)+_0x5c59c8),await _0x38a138[_0x389420(0x14f)](_0x4ce45d,_0x5c59c8);}else _0x38a138['log']['warn'](_0x389420(0x1cb));}catch(_0x866772){_0x38a138[_0x389420(0x189)]['error'](_0x389420(0x16f)+_0x866772[_0x389420(0x194)]);}}async function sendMorningBriefing(_0x36d67b){const _0x3a03d6=a0_0x7f32fd;if(!_0x36d67b[_0x3a03d6(0x1cc)]){_0x36d67b[_0x3a03d6(0x189)][_0x3a03d6(0x15c)](_0x3a03d6(0x181));return;}_0x36d67b[_0x3a03d6(0x189)][_0x3a03d6(0x15b)](_0x3a03d6(0x154));try{updateApiTimestamp();const _0x2b23c6=_0x3a03d6(0x164),_0x4ded41=await _0x36d67b[_0x3a03d6(0x1cc)][_0x3a03d6(0x1c7)](_0x2b23c6),_0x4b1af6=_0x4ded41[_0x3a03d6(0x143)][_0x3a03d6(0x195)]();_0x36d67b[_0x3a03d6(0x189)][_0x3a03d6(0x15b)](_0x3a03d6(0x17a)+_0x4b1af6[_0x3a03d6(0x161)]+_0x3a03d6(0x198)),setup[_0x3a03d6(0x1a9)](_0x36d67b,_0x3a03d6(0x1c0)+_0x4b1af6);}catch(_0x35ac7e){_0x36d67b['log'][_0x3a03d6(0x1b9)](_0x3a03d6(0x1bc)+_0x35ac7e[_0x3a03d6(0x194)]);}}async function generateHealthReport(_0x59b968,_0x59827e){const _0xeb0e65=a0_0x7f32fd;if(!_0x59b968[_0xeb0e65(0x1cc)])return;const _0x461e1b=Date['now']();_0x461e1b-lastGlobalApiCall<0xbb8&&(_0x59b968['log']['debug']('ü§ñ\x20API\x20Cooldown.\x20Waiting\x202s...'),await new Promise(_0x55fe14=>setTimeout(_0x55fe14,0x7d0)));const _0x47e51b=new Date();let _0x4384ed=0x0,_0x19c31f=_0x47e51b[_0xeb0e65(0x163)](),_0x1f3965='';if(_0x59827e==='NIGHT'){const _0x2e741e=new Date(_0x47e51b);_0x2e741e[_0xeb0e65(0x16b)](_0x2e741e[_0xeb0e65(0x13d)]()-0x1),_0x2e741e[_0xeb0e65(0x134)](0x16,0x0,0x0,0x0),_0x4384ed=_0x2e741e[_0xeb0e65(0x163)]();const _0x185ac9=new Date(_0x47e51b);_0x185ac9['setHours'](0x8,0x0,0x0,0x0),_0x19c31f=_0x185ac9[_0xeb0e65(0x163)](),_0x1f3965=_0xeb0e65(0x17f);}else{const _0xf8c591=new Date(_0x47e51b);_0xf8c591['setHours'](0x8,0x0,0x0,0x0),_0x4384ed=_0xf8c591[_0xeb0e65(0x163)](),_0x1f3965=_0xeb0e65(0x192);}const _0x422b90=_0x59b968[_0xeb0e65(0x146)][_0xeb0e65(0x187)](_0x2e7b86=>_0x2e7b86[_0xeb0e65(0x147)]>=_0x4384ed&&_0x2e7b86[_0xeb0e65(0x147)]<=_0x19c31f);if(_0x422b90[_0xeb0e65(0x161)]===0x0){const _0x57e139=_0x59827e===_0xeb0e65(0x1be)?_0xeb0e65(0x17c):_0xeb0e65(0x1bb),_0x13c014=_0x59827e==='NIGHT'?_0xeb0e65(0x17d):'analysis.health.geminiDay';await _0x59b968[_0xeb0e65(0x160)](_0x13c014,{'val':_0x57e139,'ack':!![]});return;}const _0x4cc305=_0x422b90['map'](_0x338e23=>new Date(_0x338e23[_0xeb0e65(0x147)])[_0xeb0e65(0x17e)]([],{'hour':_0xeb0e65(0x1ae),'minute':'2-digit'})+'\x20'+_0x338e23[_0xeb0e65(0x167)]+'\x20('+_0x338e23['value']+')')['join']('\x0a'),_0x42c079=_0xeb0e65(0x15d)+_0x1f3965+'\x0a\x20\x20\x20\x20EVENTS:\x0a'+_0x4cc305+_0xeb0e65(0x136);try{updateApiTimestamp();const _0x52ca00=await _0x59b968[_0xeb0e65(0x1cc)][_0xeb0e65(0x1c7)](_0x42c079),_0x2ec326=_0x52ca00[_0xeb0e65(0x143)]['text'](),_0x35b0ca=_0x59827e===_0xeb0e65(0x1be)?_0xeb0e65(0x17d):_0xeb0e65(0x15e);await _0x59b968[_0xeb0e65(0x160)](_0x35b0ca,{'val':_0x2ec326,'ack':!![]}),_0x59b968[_0xeb0e65(0x189)]['info'](_0xeb0e65(0x16a)+_0x59827e+_0xeb0e65(0x15f));}catch(_0x163029){_0x59b968['log'][_0xeb0e65(0x1b9)](_0xeb0e65(0x144)+_0x163029[_0xeb0e65(0x194)]);}}module[a0_0x7f32fd(0x1a0)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler,'generateHealthReport':generateHealthReport};function a0_0xf104(){const _0x34d4b9=['models/gemini-flash-latest','slice','lastAlertState','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','parse','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','.\x20ANWESEND:\x20','LTM.driftAnalysis.baselineDrift','rawEventLog','error','toString','Bisher\x20keine\x20Aktivit√§t\x20seit\x2008:00\x20Uhr\x20verzeichnet.','Briefing\x20Error:\x20','.Current.IsNight','NIGHT','reason','üåÖ\x20Morning\x20Briefing:\x0a','Sicherheit\x20geht\x20vor.','¬∞C,\x20','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','21chPLDP','weatherInstance','baselineDrift','generateContent','1140ruKwqq','(((.+)+)+)+$','trim','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','geminiModel','push','decision','automationProposal','setHours','./setup','\x0a\x20\x20\x20\x20ANTWORT-STIL:\x20Sachlich,\x20beruhigend,\x20pr√§zise.\x20Keine\x20Floskeln.\x0a\x20\x20\x20\x20','analysis.activitySummary','.\x20SYSTEM_MODE:\x20','replace','driftDetails','analysis.analysisHistory','getStateAsync','getDate','generic','Unbekannt\x20(Kein\x20Sensor)','LTM.driftAnalysis.driftDetails','dailyDigests','stringify','response','Health\x20Report\x20Error:\x20','alertReason','eventHistory','timestamp','val','\x20=\x20','getForeignStateAsync','.forecast.current.temperature','52DbmwBm','targetValue','2278743cOUPyl','setForeignStateAsync','\x0aSTB:\x20','\x20√ºbersprungen\x20(Auto-Approved).','11939706GjNECO','.Current.WeatherText','üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','apply','toISOString','analysis.automation.targetId','livingContext','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','approved','info','warn','\x0a\x20\x20\x20\x20ROLLE:\x20Medizinischer\x20Assistent\x20f√ºr\x20AAL\x20(Ambient\x20Assisted\x20Living).\x0a\x20\x20\x20\x20AUFGABE:\x20','analysis.health.geminiDay',')\x20generated.','setStateAsync','length','.\x20EVENTS:\x20','getTime','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','analysis.alertReason','name','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','toFixed','ü§ñ\x20Health\x20Report\x20(','setDate','search','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','BUTLER\x20Execution\x20Error:\x20','analysisHistory','\x20->\x20','isAlert','analysis.automation.autoApply','unshift','ü§ñ\x20Butler\x20Brain\x20Error:\x20','19821NnRDYJ','isProVersion','Unbekannt','Skipped\x20(Traffic)','üåÖ\x20Briefing\x20generated\x20(Length:\x20','currentSystemMode','Keine\x20Daten\x20f√ºr\x20die\x20Nacht\x20aufgezeichnet\x20(Sensoren\x20ruhig).','analysis.health.geminiNight','toLocaleTimeString','Analysiere\x20diese\x20Events\x20der\x20NACHT\x20(22:00-08:00).\x20War\x20der\x20Schlaf\x20ruhig?\x20Gab\x20es\x20Badg√§nge?\x20Antwort\x20kurz\x20f√ºr\x20den\x20besorgten\x20Sohn\x20(max\x202\x20S√§tze).','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.',',\x20Lichtverh√§ltnisse:\x20','N/A\x20(Learning)','KI-Fehler\x20(Fallback)','5716660seKnSj','detected','filter','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','log','analysis.lastResult','LTM.processingStatus','13763190BJpILS','Keine\x20Details.','Started...','.Current.Temperature','Success','ltmStbWindowDays','Analysiere\x20diese\x20Events\x20des\x20TAGES\x20(08:00-Jetzt).\x20Aktivit√§t?\x20Mahlzeiten?\x20Haust√ºr?\x20Antwort\x20kurz\x20f√ºr\x20den\x20besorgten\x20Sohn\x20(max\x202\x20S√§tze).','now','message','text','isEmergency','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22',').\x20Sending\x20notification...','%)\x20nach\x20\x22','@google/generative-ai','.\x20KONTEXT:\x20','aiPersona','Gemini\x20Error:\x20','\x0aAktivit√§t:\x20','1839738dPkqtl','exports','config','debug','8WDPzOK','21945tPurwa',',\x20Wetter:\x20','system.presenceWho','summary','5RRXbHz','sendNotification','analysis.automation.patternDetected','analysis.isAlert','LTM.dailyDigests','.\x20EMERGENCY:\x20','2-digit','activityLevel'];a0_0xf104=function(){return _0x34d4b9;};return a0_0xf104();}