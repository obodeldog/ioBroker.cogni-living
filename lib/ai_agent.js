const a0_0x225c23=a0_0x10f0;(function(_0x5244e7,_0x3f977e){const _0x5dc7a5=a0_0x10f0,_0x4803f8=_0x5244e7();while(!![]){try{const _0x1a97e2=parseInt(_0x5dc7a5(0xb1))/0x1+parseInt(_0x5dc7a5(0xc1))/0x2*(parseInt(_0x5dc7a5(0x9a))/0x3)+parseInt(_0x5dc7a5(0x8a))/0x4*(-parseInt(_0x5dc7a5(0xc7))/0x5)+parseInt(_0x5dc7a5(0xc8))/0x6*(parseInt(_0x5dc7a5(0x87))/0x7)+parseInt(_0x5dc7a5(0xa4))/0x8*(-parseInt(_0x5dc7a5(0x81))/0x9)+-parseInt(_0x5dc7a5(0xf5))/0xa+parseInt(_0x5dc7a5(0x88))/0xb;if(_0x1a97e2===_0x3f977e)break;else _0x4803f8['push'](_0x4803f8['shift']());}catch(_0x56c712){_0x4803f8['push'](_0x4803f8['shift']());}}}(a0_0xf4c6,0x4fdd0));function a0_0x10f0(_0x3c6637,_0x49f97f){const _0x1b6fdf=a0_0xf4c6();return a0_0x10f0=function(_0xc5324,_0x7f8564){_0xc5324=_0xc5324-0x81;let _0xf4c603=_0x1b6fdf[_0xc5324];return _0xf4c603;},a0_0x10f0(_0x3c6637,_0x49f97f);}const a0_0x7f8564=(function(){let _0xe3bd46=!![];return function(_0x8e20a6,_0x200203){const _0x11edff=_0xe3bd46?function(){if(_0x200203){const _0x4b3c51=_0x200203['apply'](_0x8e20a6,arguments);return _0x200203=null,_0x4b3c51;}}:function(){};return _0xe3bd46=![],_0x11edff;};}()),a0_0xc5324=a0_0x7f8564(this,function(){const _0x2a575b=a0_0x10f0;return a0_0xc5324[_0x2a575b(0xce)]()[_0x2a575b(0xf7)](_0x2a575b(0x107))[_0x2a575b(0xce)]()[_0x2a575b(0xd8)](a0_0xc5324)[_0x2a575b(0xf7)](_0x2a575b(0x107));});a0_0xc5324();'use strict';const {GoogleGenerativeAI}=require(a0_0x225c23(0x110)),setup=require('./setup'),GEMINI_MODEL=a0_0x225c23(0xa7),LTM_DP_DAILY_DIGESTS=a0_0x225c23(0x8b),LTM_DP_STATUS=a0_0x225c23(0x85),LTM_DP_RAW_LOG=a0_0x225c23(0x10d),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x225c23(0xeb),'senior_aal':a0_0x225c23(0xae),'family':a0_0x225c23(0xea),'single_comfort':a0_0x225c23(0x93),'security':a0_0x225c23(0x117),'energy_saver':a0_0x225c23(0x8f)};function canCallApi(){const _0x1edc7f=a0_0x225c23,_0x342791=Date[_0x1edc7f(0xa6)]();return _0x342791-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x30b3a5=a0_0x225c23;lastGlobalApiCall=Date[_0x30b3a5(0xa6)]();}async function getWeatherContext(_0x297752){const _0x3565eb=a0_0x225c23;if(!_0x297752['config'][_0x3565eb(0xe6)]||!_0x297752[_0x3565eb(0xff)][_0x3565eb(0xe0)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x55f6bd=_0x297752[_0x3565eb(0xff)][_0x3565eb(0xe0)];let _0x41e895=await _0x297752[_0x3565eb(0xfd)](_0x55f6bd+_0x3565eb(0xcb));if(!_0x41e895)_0x41e895=await _0x297752[_0x3565eb(0xfd)](_0x55f6bd+'.forecast.current.temperature');let _0x16d970=await _0x297752[_0x3565eb(0xfd)](_0x55f6bd+'.Current.WeatherText');if(!_0x16d970)_0x16d970=await _0x297752[_0x3565eb(0xfd)](_0x55f6bd+_0x3565eb(0xd5));let _0x5b1a6d='Unbekannt';const _0x176095=await _0x297752[_0x3565eb(0xfd)](_0x55f6bd+_0x3565eb(0x8d));if(_0x176095)_0x5b1a6d=_0x176095[_0x3565eb(0x96)]?_0x3565eb(0xdb):_0x3565eb(0xf8);if(_0x41e895&&_0x16d970)return _0x41e895[_0x3565eb(0x96)]+_0x3565eb(0xd4)+_0x16d970[_0x3565eb(0x96)]+_0x3565eb(0xb7)+_0x5b1a6d;}catch(_0x391e2a){}return _0x3565eb(0xb9);}async function consultButler(_0x17ba00,_0xd1ff4d,_0x21710e,_0x2f0bd4){const _0x594bd1=a0_0x225c23;if(!_0x17ba00[_0x594bd1(0x9f)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x7dee73=Date[_0x594bd1(0xa6)]();if(decisionCache[_0xd1ff4d]&&_0x7dee73-decisionCache[_0xd1ff4d][_0x594bd1(0xbd)]<CACHE_TTL_MS){const _0x553b3b=decisionCache[_0xd1ff4d][_0x594bd1(0x115)];return _0x17ba00['log']['debug'](_0x594bd1(0x84)+_0xd1ff4d+_0x594bd1(0x10e)+(_0x553b3b[_0x594bd1(0x10f)]?'OK':'NO')+'\x20('+_0x553b3b[_0x594bd1(0x9e)]+')'),_0x553b3b;}if(!canCallApi())return _0x17ba00[_0x594bd1(0xe4)][_0x594bd1(0xc9)]('ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20'+_0xd1ff4d+_0x594bd1(0x114)),{'approved':!![],'reason':_0x594bd1(0xe5)};const _0x134e0d=new Date()[_0x594bd1(0xbf)](),_0x5043f0=await getWeatherContext(_0x17ba00),_0x50ac89=PERSONA_MAPPING[_0x17ba00[_0x594bd1(0xff)][_0x594bd1(0xe9)]||_0x594bd1(0xde)],_0x12c9dd=_0x594bd1(0xa3)+_0x134e0d+_0x594bd1(0x113)+_0x5043f0+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x2f0bd4*0x64)[_0x594bd1(0xbc)](0x0)+_0x594bd1(0xb8)+_0xd1ff4d+_0x594bd1(0xfe)+_0x21710e+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x50ac89+_0x594bd1(0xbb);try{updateApiTimestamp();const _0x34c3a9=await _0x17ba00[_0x594bd1(0x9f)][_0x594bd1(0xc4)](_0x12c9dd),_0x382a58=_0x34c3a9[_0x594bd1(0x95)][_0x594bd1(0x108)]()[_0x594bd1(0xb3)](/```json|```/g,'')[_0x594bd1(0xed)](),_0x5eee0e=JSON[_0x594bd1(0xc0)](_0x382a58);return decisionCache[_0xd1ff4d]={'decision':_0x5eee0e,'timestamp':_0x7dee73},_0x5eee0e;}catch(_0x40a809){return _0x17ba00['log']['warn']('ü§ñ\x20Butler\x20Brain\x20Error:\x20'+_0x40a809[_0x594bd1(0xc5)]),decisionCache[_0xd1ff4d]={'decision':{'approved':!![],'reason':_0x594bd1(0x83)},'timestamp':_0x7dee73-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x594bd1(0x83)};}}async function runGeminiAnalysis(_0x3a483a,_0x3d079f=''){const _0x4e0c79=a0_0x225c23;if(!_0x3a483a[_0x4e0c79(0x9f)])return;if(!canCallApi()){_0x3a483a[_0x4e0c79(0xe4)][_0x4e0c79(0xc9)](_0x4e0c79(0xf1));return;}if(_0x3a483a[_0x4e0c79(0xe7)]['length']===0x0)return;const _0x22d2ac=_0x3a483a[_0x4e0c79(0xe7)]['slice'](0x0,0xf),_0x4e46a8=_0x3a483a[_0x4e0c79(0xd9)],_0xd6c07b=PERSONA_MAPPING[_0x3a483a[_0x4e0c79(0xff)][_0x4e0c79(0xe9)]||_0x4e0c79(0xde)],_0x15d171=_0x3a483a[_0x4e0c79(0xff)]['livingContext']||_0x4e0c79(0xf9);let _0x243948=_0x4e0c79(0xe2);try{const _0x553c19=await _0x3a483a[_0x4e0c79(0xd2)](_0x4e0c79(0xba));if(_0x553c19&&_0x553c19[_0x4e0c79(0x96)])_0x243948=_0x553c19['val'];}catch(_0x1a68d7){}let _0x3a97e4=![];try{const _0x18fccb=await _0x3a483a[_0x4e0c79(0xd2)](_0x4e0c79(0xd0));if(_0x18fccb&&_0x18fccb['val'])_0x3a97e4=!![];}catch(_0x376754){}const _0x278e01='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0xd6c07b+_0x4e0c79(0xf4)+_0x15d171+_0x4e0c79(0x9b)+_0x4e46a8+_0x4e0c79(0xdf)+_0x243948+'.\x20EVENTS:\x20'+JSON['stringify'](_0x22d2ac)+_0x4e0c79(0xc2)+_0x3d079f+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x4d8b26=await _0x3a483a[_0x4e0c79(0x9f)][_0x4e0c79(0xc4)](_0x278e01),_0x422129=JSON[_0x4e0c79(0xc0)](_0x4d8b26['response'][_0x4e0c79(0x108)]()[_0x4e0c79(0xb3)](/```json|```/g,'')['trim']());await _0x3a483a['setStateAsync'](_0x4e0c79(0x118),{'val':JSON[_0x4e0c79(0x10a)](_0x422129),'ack':!![]});if(_0x422129[_0x4e0c79(0xcd)])await _0x3a483a[_0x4e0c79(0xec)]('analysis.activitySummary',{'val':_0x422129[_0x4e0c79(0xcd)],'ack':!![]});const _0x296d1b={'timestamp':Date['now'](),'id':Date['now']()[_0x4e0c79(0xce)](),'analysis':{'activity':{'summary':_0x422129[_0x4e0c79(0xcd)],'isAlert':_0x422129['isAlert'],'alertReason':_0x422129[_0x4e0c79(0x9d)]},'comfort':{'automationProposal':_0x422129[_0x4e0c79(0xc3)]}}};_0x3a483a[_0x4e0c79(0xab)]['unshift'](_0x296d1b);if(_0x3a483a[_0x4e0c79(0xab)][_0x4e0c79(0x104)]>0x32)_0x3a483a[_0x4e0c79(0xab)][_0x4e0c79(0x89)]();await _0x3a483a[_0x4e0c79(0xec)](_0x4e0c79(0x97),{'val':JSON['stringify'](_0x3a483a[_0x4e0c79(0xab)]),'ack':!![]});const _0x44a1c7=_0x422129[_0x4e0c79(0xa0)]||![];_0x44a1c7!==_0x3a483a[_0x4e0c79(0xe8)]&&(await _0x3a483a[_0x4e0c79(0xec)](_0x4e0c79(0x103),{'val':_0x44a1c7,'ack':!![]}),_0x3a483a[_0x4e0c79(0xe8)]=_0x44a1c7,_0x44a1c7&&(await _0x3a483a['setStateAsync']('analysis.alertReason',{'val':_0x422129[_0x4e0c79(0x9d)],'ack':!![]}),setup['sendNotification'](_0x3a483a,_0x4e0c79(0xfa)+_0x422129[_0x4e0c79(0x9d)],![],_0x422129['isEmergency'])));if(_0x422129['automationProposal']&&_0x422129[_0x4e0c79(0xc3)]['detected']){await _0x3a483a[_0x4e0c79(0xec)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x3a483a[_0x4e0c79(0xec)]('analysis.automation.description',{'val':_0x422129[_0x4e0c79(0xc3)][_0x4e0c79(0xd3)],'ack':!![]}),await _0x3a483a[_0x4e0c79(0xec)](_0x4e0c79(0x90),{'val':_0x422129['automationProposal']['targetId'],'ack':!![]}),await _0x3a483a[_0x4e0c79(0xec)]('analysis.automation.targetValue',{'val':JSON[_0x4e0c79(0x10a)](_0x422129['automationProposal'][_0x4e0c79(0x82)]),'ack':!![]});if(_0x3a97e4)executeAutomationAction(_0x3a483a);}}catch(_0x4d8297){_0x3a483a[_0x4e0c79(0xe4)][_0x4e0c79(0xfc)](_0x4e0c79(0xd7)+_0x4d8297['message']);}}async function createDailyDigest(_0x4bf880,_0x50d155){const _0x130c07=a0_0x225c23;if(!_0x4bf880[_0x130c07(0xac)])return;if(!canCallApi()){await _0x4bf880[_0x130c07(0xec)](LTM_DP_STATUS,{'val':_0x130c07(0xa1),'ack':!![]});return;}await _0x4bf880[_0x130c07(0xec)](LTM_DP_STATUS,{'val':_0x130c07(0x98),'ack':!![]});if(!_0x4bf880[_0x130c07(0x9f)]||_0x4bf880[_0x130c07(0xdc)][_0x130c07(0x104)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4bf880[_0x130c07(0xec)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x1ad8c1=JSON[_0x130c07(0xc0)](JSON[_0x130c07(0x10a)](_0x4bf880['rawEventLog'])),_0x16b722=_0x1ad8c1[_0x130c07(0x104)],_0x22551c='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x130c07(0x10a)](_0x1ad8c1);try{updateApiTimestamp();const _0x536bc7=await _0x4bf880['geminiModel']['generateContent'](_0x22551c),_0x2ddd0f=JSON[_0x130c07(0xc0)](_0x536bc7['response'][_0x130c07(0x108)]()[_0x130c07(0xb3)](/```json|```/g,'')[_0x130c07(0xed)]()),_0x11fb36={'timestamp':new Date()['toISOString'](),'eventCount':_0x16b722,'summary':_0x2ddd0f['summary']||_0x130c07(0xb6),'activityLevel':_0x2ddd0f[_0x130c07(0x100)]||_0x130c07(0xb5),'systemMode':_0x4bf880[_0x130c07(0xd9)]};_0x4bf880[_0x130c07(0x8e)]['push'](_0x11fb36);const _0x4317a2=_0x4bf880[_0x130c07(0xff)][_0x130c07(0x106)]||0x3c;_0x4bf880[_0x130c07(0x8e)][_0x130c07(0x104)]>_0x4317a2&&_0x4bf880['dailyDigests'][_0x130c07(0x101)](0x0,_0x4bf880[_0x130c07(0x8e)]['length']-_0x4317a2);await _0x4bf880[_0x130c07(0xec)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x130c07(0x10a)](_0x4bf880[_0x130c07(0x8e)]),'ack':!![]}),_0x4bf880[_0x130c07(0xdc)]=[],await _0x4bf880[_0x130c07(0xec)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x4bf880[_0x130c07(0xdc)]),'ack':!![]}),await _0x4bf880[_0x130c07(0xec)](LTM_DP_STATUS,{'val':'Success','ack':!![]});const _0x114e1c=_0x130c07(0x92)+_0x2ddd0f[_0x130c07(0xcd)]+_0x130c07(0x116)+_0x2ddd0f[_0x130c07(0x100)];setup[_0x130c07(0x10c)](_0x4bf880,_0x114e1c,![],![]);if(_0x4bf880['isProVersion']&&_0x50d155)_0x50d155[_0x130c07(0x94)](_0x4bf880,'ANALYZE_HEALTH',{'digest':_0x11fb36});}catch(_0x7c31b4){_0x4bf880[_0x130c07(0xe4)]['error'](_0x7c31b4['message']);}}async function runBaselineDriftAnalysis(_0x4cff06){const _0x15057f=a0_0x225c23;if(!_0x4cff06[_0x15057f(0xac)]||!_0x4cff06[_0x15057f(0x9f)])return;if(!canCallApi())return;const _0x37fb15=_0x4cff06[_0x15057f(0xff)][_0x15057f(0xaf)]||0xe;if(_0x4cff06[_0x15057f(0x8e)][_0x15057f(0x104)]<_0x37fb15+0x7){await _0x4cff06[_0x15057f(0xec)]('LTM.driftAnalysis.baselineDrift',{'val':_0x15057f(0xda),'ack':!![]});return;}const _0x8a5253=_0x4cff06[_0x15057f(0x8e)][_0x15057f(0xa2)](-_0x37fb15),_0x5aa2fb=_0x4cff06[_0x15057f(0x8e)][_0x15057f(0xa2)](0x0,_0x4cff06[_0x15057f(0x8e)][_0x15057f(0x104)]-_0x37fb15),_0x4e9e56=_0x15057f(0xad)+JSON[_0x15057f(0x10a)](_0x5aa2fb)+'\x0aSTB:\x20'+JSON[_0x15057f(0x10a)](_0x8a5253);try{updateApiTimestamp();const _0x450d78=await _0x4cff06[_0x15057f(0x9f)][_0x15057f(0xc4)](_0x4e9e56),_0x14fdc7=JSON['parse'](_0x450d78[_0x15057f(0x95)]['text']()['replace'](/```json|```/g,'')[_0x15057f(0xed)]());_0x14fdc7['baselineDrift']&&(await _0x4cff06['setStateAsync']('LTM.driftAnalysis.baselineDrift',{'val':_0x14fdc7[_0x15057f(0x112)],'ack':!![]}),await _0x4cff06['setStateAsync'](_0x15057f(0xca),{'val':_0x14fdc7[_0x15057f(0x111)],'ack':!![]}),await _0x4cff06[_0x15057f(0xec)](_0x15057f(0xdd),{'val':Date['now'](),'ack':!![]}));}catch(_0x36f50d){}}async function executeAutomationAction(_0x1ee327){const _0x5c15d5=a0_0x225c23;try{const _0x34b30b=await _0x1ee327[_0x5c15d5(0xd2)](_0x5c15d5(0x90)),_0x8de3f0=await _0x1ee327['getStateAsync'](_0x5c15d5(0xd1));if(_0x34b30b&&_0x34b30b[_0x5c15d5(0x96)]&&_0x8de3f0){const _0x2918d6=_0x34b30b[_0x5c15d5(0x96)];let _0x33eea8=_0x8de3f0['val'];try{_0x33eea8=JSON[_0x5c15d5(0xc0)](_0x33eea8);}catch(_0x39d26b){}_0x1ee327[_0x5c15d5(0xe4)][_0x5c15d5(0xf2)](_0x5c15d5(0xe3)+_0x2918d6+_0x5c15d5(0xaa)+_0x33eea8),await _0x1ee327[_0x5c15d5(0x105)](_0x2918d6,_0x33eea8);}else _0x1ee327[_0x5c15d5(0xe4)][_0x5c15d5(0x91)]('ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x50be63){_0x1ee327[_0x5c15d5(0xe4)][_0x5c15d5(0xfc)](_0x5c15d5(0xee)+_0x50be63[_0x5c15d5(0xc5)]);}}async function sendMorningBriefing(_0x1fba28){const _0x3f06e7=a0_0x225c23;if(!_0x1fba28['geminiModel']){_0x1fba28[_0x3f06e7(0xe4)]['warn'](_0x3f06e7(0xb4));return;}_0x1fba28['log'][_0x3f06e7(0xf2)](_0x3f06e7(0xe1));try{updateApiTimestamp();const _0x1497e6=_0x3f06e7(0xc6),_0x40b4d0=await _0x1fba28['geminiModel'][_0x3f06e7(0xc4)](_0x1497e6),_0x37d84c=_0x40b4d0['response'][_0x3f06e7(0x108)]();_0x1fba28[_0x3f06e7(0xe4)][_0x3f06e7(0xf2)](_0x3f06e7(0xa8)+_0x37d84c[_0x3f06e7(0x104)]+_0x3f06e7(0x86)),setup[_0x3f06e7(0x10c)](_0x1fba28,'üåÖ\x20Morning\x20Briefing:\x0a'+_0x37d84c);}catch(_0x239217){_0x1fba28[_0x3f06e7(0xe4)][_0x3f06e7(0xfc)](_0x3f06e7(0xb2)+_0x239217[_0x3f06e7(0xc5)]);}}async function generateHealthReport(_0x26a727,_0x4096e5){const _0x35327b=a0_0x225c23;if(!_0x26a727[_0x35327b(0x9f)])return;const _0x563b43=Date[_0x35327b(0xa6)]();_0x563b43-lastGlobalApiCall<0xbb8&&(_0x26a727[_0x35327b(0xe4)][_0x35327b(0xc9)](_0x35327b(0x109)),await new Promise(_0x1fe079=>setTimeout(_0x1fe079,0x7d0)));const _0x31912c=new Date();let _0x771cdb=0x0,_0x33976a=_0x31912c[_0x35327b(0x10b)](),_0x5c3211='';if(_0x4096e5==='NIGHT'){const _0x3b9a1a=new Date(_0x31912c);_0x3b9a1a['setDate'](_0x3b9a1a[_0x35327b(0xf3)]()-0x1),_0x3b9a1a[_0x35327b(0xfb)](0x16,0x0,0x0,0x0),_0x771cdb=_0x3b9a1a['getTime']();const _0xdcb1b1=new Date(_0x31912c);_0xdcb1b1[_0x35327b(0xfb)](0x8,0x0,0x0,0x0),_0x33976a=_0xdcb1b1[_0x35327b(0x10b)](),_0x5c3211=_0x35327b(0xa5);}else{const _0x5f79af=new Date(_0x31912c);_0x5f79af['setHours'](0x8,0x0,0x0,0x0),_0x771cdb=_0x5f79af['getTime'](),_0x5c3211=_0x35327b(0xbe);}const _0x12c9be=_0x26a727[_0x35327b(0xe7)][_0x35327b(0x8c)](_0x73a0a8=>_0x73a0a8[_0x35327b(0xbd)]>=_0x771cdb&&_0x73a0a8[_0x35327b(0xbd)]<=_0x33976a);if(_0x12c9be[_0x35327b(0x104)]===0x0){const _0x2d63bc=_0x4096e5===_0x35327b(0x102)?'Keine\x20Daten\x20f√ºr\x20die\x20Nacht\x20aufgezeichnet\x20(Sensoren\x20ruhig).':_0x35327b(0xb0),_0x3e0d02=_0x4096e5===_0x35327b(0x102)?'analysis.health.geminiNight':_0x35327b(0xcc);await _0x26a727[_0x35327b(0xec)](_0x3e0d02,{'val':_0x2d63bc,'ack':!![]});return;}const _0x16c8f2=_0x12c9be['map'](_0x38041e=>new Date(_0x38041e[_0x35327b(0xbd)])[_0x35327b(0xbf)]([],{'hour':_0x35327b(0xcf),'minute':_0x35327b(0xcf)})+'\x20'+_0x38041e['name']+'\x20('+_0x38041e[_0x35327b(0xd6)]+')')[_0x35327b(0xef)]('\x0a'),_0x11fc5e='\x0a\x20\x20\x20\x20ROLLE:\x20Medizinischer\x20Assistent\x20f√ºr\x20AAL\x20(Ambient\x20Assisted\x20Living).\x0a\x20\x20\x20\x20AUFGABE:\x20'+_0x5c3211+'\x0a\x20\x20\x20\x20EVENTS:\x0a'+_0x16c8f2+_0x35327b(0x9c);try{updateApiTimestamp();const _0x3c1694=await _0x26a727[_0x35327b(0x9f)][_0x35327b(0xc4)](_0x11fc5e),_0x546008=_0x3c1694[_0x35327b(0x95)]['text'](),_0x52c880=_0x4096e5==='NIGHT'?'analysis.health.geminiNight':'analysis.health.geminiDay';await _0x26a727['setStateAsync'](_0x52c880,{'val':_0x546008,'ack':!![]}),_0x26a727[_0x35327b(0xe4)][_0x35327b(0xf2)](_0x35327b(0xf0)+_0x4096e5+_0x35327b(0x99));}catch(_0x3ea836){_0x26a727[_0x35327b(0xe4)]['error'](_0x35327b(0xf6)+_0x3ea836['message']);}}function a0_0xf4c6(){const _0x3baf65=['stringify','getTime','sendNotification','LTM.rawEventLog','\x20->\x20','approved','@google/generative-ai','driftDetails','baselineDrift',',\x20Wetter:\x20','\x20√ºbersprungen\x20(Auto-Approved).','decision','\x0aAktivit√§t:\x20','Sicherheit\x20geht\x20vor.','analysis.lastResult','9PhUkij','targetValue','KI-Fehler\x20(Fallback)','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','LTM.processingStatus',').\x20Sending\x20notification...','7RcaLyh','7035853SgFoJi','pop','4rvLoqb','LTM.dailyDigests','filter','.Current.IsNight','dailyDigests','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','analysis.automation.targetId','warn','üìÖ\x20Daily\x20Digest:\x0a','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','send','response','val','analysis.analysisHistory','Started...',')\x20generated.','3lmhsbW','.\x20SYSTEM_MODE:\x20','\x0a\x20\x20\x20\x20ANTWORT-STIL:\x20Sachlich,\x20beruhigend,\x20pr√§zise.\x20Keine\x20Floskeln.\x0a\x20\x20\x20\x20','alertReason','reason','geminiModel','isAlert','Skipped\x20(Traffic)','slice','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','3516856xhXxtB','Analysiere\x20diese\x20Events\x20der\x20NACHT\x20(22:00-08:00).\x20War\x20der\x20Schlaf\x20ruhig?\x20Gab\x20es\x20Badg√§nge?\x20Antwort\x20kurz\x20f√ºr\x20den\x20besorgten\x20Sohn\x20(max\x202\x20S√§tze).','now','models/gemini-flash-latest','üåÖ\x20Briefing\x20generated\x20(Length:\x20','exports','\x20=\x20','analysisHistory','isProVersion','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','ltmStbWindowDays','Bisher\x20keine\x20Aktivit√§t\x20seit\x2008:00\x20Uhr\x20verzeichnet.','373785hDMprw','Briefing\x20Error:\x20','replace','ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','normal','Digest',',\x20Lichtverh√§ltnisse:\x20','%)\x20nach\x20\x22','Wetterdaten\x20nicht\x20abrufbar','system.presenceWho','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','toFixed','timestamp','Analysiere\x20diese\x20Events\x20des\x20TAGES\x20(08:00-Jetzt).\x20Aktivit√§t?\x20Mahlzeiten?\x20Haust√ºr?\x20Antwort\x20kurz\x20f√ºr\x20den\x20besorgten\x20Sohn\x20(max\x202\x20S√§tze).','toLocaleTimeString','parse','27652UCgCnB','.\x20EMERGENCY:\x20','automationProposal','generateContent','message','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','959235GXQWAc','1470378osIGzo','debug','LTM.driftAnalysis.driftDetails','.Current.Temperature','analysis.health.geminiDay','summary','toString','2-digit','analysis.automation.autoApply','analysis.automation.targetValue','getStateAsync','description','¬∞C,\x20','.forecast.current.state','value','Gemini\x20Error:\x20','constructor','currentSystemMode','N/A\x20(Learning)','Nacht','rawEventLog','LTM.driftAnalysis.lastCheck','generic','.\x20ANWESEND:\x20','weatherInstance','üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','Unbekannt','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','log','Traffic-Schutz\x20(Auto-Approved)','useWeather','eventHistory','lastAlertState','aiPersona','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','setStateAsync','trim','BUTLER\x20Execution\x20Error:\x20','join','ü§ñ\x20Health\x20Report\x20(','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','info','getDate','.\x20KONTEXT:\x20','3137230qLdsYF','Health\x20Report\x20Error:\x20','search','Tag','Keine\x20Details.','‚ö†Ô∏è\x20ALARM:\x20','setHours','error','getForeignStateAsync','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','config','activityLevel','splice','NIGHT','analysis.isAlert','length','setForeignStateAsync','ltmLtbWindowDays','(((.+)+)+)+$','text','ü§ñ\x20API\x20Cooldown.\x20Waiting\x202s...'];a0_0xf4c6=function(){return _0x3baf65;};return a0_0xf4c6();}module[a0_0x225c23(0xa9)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler,'generateHealthReport':generateHealthReport};