const a0_0x33d0d1=a0_0x4026;(function(_0x44e89d,_0x281a08){const _0x53ff1a=a0_0x4026,_0x345085=_0x44e89d();while(!![]){try{const _0x40065a=-parseInt(_0x53ff1a(0x1cc))/0x1+parseInt(_0x53ff1a(0x1f4))/0x2+-parseInt(_0x53ff1a(0x1b9))/0x3+-parseInt(_0x53ff1a(0x1c6))/0x4*(-parseInt(_0x53ff1a(0x1b5))/0x5)+-parseInt(_0x53ff1a(0x1ed))/0x6*(parseInt(_0x53ff1a(0x1d3))/0x7)+parseInt(_0x53ff1a(0x1bc))/0x8*(-parseInt(_0x53ff1a(0x1fc))/0x9)+parseInt(_0x53ff1a(0x1f9))/0xa;if(_0x40065a===_0x281a08)break;else _0x345085['push'](_0x345085['shift']());}catch(_0x4d25e0){_0x345085['push'](_0x345085['shift']());}}}(a0_0x446c,0x79011));const a0_0x3f22f3=(function(){let _0x529dd4=!![];return function(_0x2f7244,_0x26ae82){const _0x2383fe=_0x529dd4?function(){const _0x2f47e1=a0_0x4026;if(_0x26ae82){const _0x330139=_0x26ae82[_0x2f47e1(0x225)](_0x2f7244,arguments);return _0x26ae82=null,_0x330139;}}:function(){};return _0x529dd4=![],_0x2383fe;};}()),a0_0x2b1264=a0_0x3f22f3(this,function(){const _0x5831d3=a0_0x4026;return a0_0x2b1264[_0x5831d3(0x1bf)]()[_0x5831d3(0x1ea)]('(((.+)+)+)+$')[_0x5831d3(0x1bf)]()[_0x5831d3(0x1d0)](a0_0x2b1264)[_0x5831d3(0x1ea)](_0x5831d3(0x1ee));});a0_0x2b1264();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require('./setup'),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x33d0d1(0x1ba),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG=a0_0x33d0d1(0x1a5),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;function a0_0x446c(){const _0x274e19=['apply','currentSystemMode','activityLevel','setForeignStateAsync','analysisHistory','config','message','Digest','eventHistory',').\x20Sending\x20notification...','LTM.rawEventLog','approved','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','N/A\x20(Learning)','aiPersona','detected','Success','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','Skipped\x20(No\x20AI\x20or\x20Data)','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','trim','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','stringify','getForeignStateAsync','generic','decision','1002845DQGsho','Started...','ltmStbWindowDays','.forecast.current.state','1877016HkiWhi','LTM.dailyDigests','toISOString','16ZPaJjn','Nacht','KI-Fehler\x20(Fallback)','toString','automationProposal','.forecast.current.temperature','isProVersion','push','analysis.automation.description','driftDetails','12OFyzdV','log','\x20=\x20','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','Sicherheit\x20geht\x20vor.','ltmLtbWindowDays','235170juoIoL','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','analysis.automation.targetValue','analysis.alertReason','constructor','info','Unbekannt','118993WTgZuV','\x0aAktivitÃ¤t:\x20','lastAlertState','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','now','KI\x20offline\x20(Fallback)','splice','generateContent','analysis.lastResult','ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','setStateAsync','dailyDigests','timestamp','\x20Ã¼bersprungen\x20(Auto-Approved).','Traffic-Schutz\x20(Auto-Approved)','length','LTM.driftAnalysis.baselineDrift','âš ï¸\x20ALARM:\x20','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','val','replace','sendNotification','search','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','\x20->\x20','102sIgFwo','(((.+)+)+)+$','analysis.analysisHistory','ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','livingContext','analysis.automation.patternDetected','634394hXzktD','.\x20SYSTEM_MODE:\x20','ðŸŒ…\x20Morning\x20Briefing:\x0a','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','response','12021280BtVPMB','debug','error','2140083AlOUfD','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','Keine\x20Details.','getStateAsync','.Current.IsNight','slice','targetId','Skipped\x20(Traffic)','Briefing\x20Error:\x20','%)\x20nach\x20\x22','warn','.\x20EVENTS:\x20','.\x20ANWESEND:\x20','ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20','toFixed','summary','unshift','analysis.automation.targetId','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','pop','isEmergency','rawEventLog','geminiModel','alertReason','analysis.automation.autoApply','analysis.isAlert','weatherInstance','parse','send',',\x20LichtverhÃ¤ltnisse:\x20','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','isAlert','description','ðŸ“…\x20Daily\x20Digest:\x0a','.Current.Temperature','Wetterdaten\x20nicht\x20abrufbar',',\x20Wetter:\x20','useWeather','text','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).'];a0_0x446c=function(){return _0x274e19;};return a0_0x446c();}let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':a0_0x33d0d1(0x20e),'family':a0_0x33d0d1(0x1a7),'single_comfort':a0_0x33d0d1(0x1eb),'security':a0_0x33d0d1(0x1ca),'energy_saver':a0_0x33d0d1(0x1e6)};function canCallApi(){const _0x121d0c=a0_0x33d0d1,_0x17bf22=Date[_0x121d0c(0x1d8)]();return _0x17bf22-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x4755eb){const _0x44b1b8=a0_0x33d0d1;if(!_0x4755eb[_0x44b1b8(0x1a0)][_0x44b1b8(0x222)]||!_0x4755eb[_0x44b1b8(0x1a0)][_0x44b1b8(0x216)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x57d5b0=_0x4755eb[_0x44b1b8(0x1a0)]['weatherInstance'];let _0x577892=await _0x4755eb[_0x44b1b8(0x1b2)](_0x57d5b0+_0x44b1b8(0x21f));if(!_0x577892)_0x577892=await _0x4755eb[_0x44b1b8(0x1b2)](_0x57d5b0+_0x44b1b8(0x1c1));let _0x3c7685=await _0x4755eb[_0x44b1b8(0x1b2)](_0x57d5b0+'.Current.WeatherText');if(!_0x3c7685)_0x3c7685=await _0x4755eb['getForeignStateAsync'](_0x57d5b0+_0x44b1b8(0x1b8));let _0x23a104='Unbekannt';const _0x5950f0=await _0x4755eb['getForeignStateAsync'](_0x57d5b0+_0x44b1b8(0x200));if(_0x5950f0)_0x23a104=_0x5950f0[_0x44b1b8(0x1e7)]?_0x44b1b8(0x1bd):'Tag';if(_0x577892&&_0x3c7685)return _0x577892['val']+'Â°C,\x20'+_0x3c7685[_0x44b1b8(0x1e7)]+_0x44b1b8(0x219)+_0x23a104;}catch(_0x47c31c){}return _0x44b1b8(0x220);}async function consultButler(_0xd4177a,_0x49c758,_0x4a22c5,_0xeba837){const _0x1f41c9=a0_0x33d0d1;if(!_0xd4177a['geminiModel'])return{'approved':!![],'reason':_0x1f41c9(0x1d9)};const _0x4fb950=Date[_0x1f41c9(0x1d8)]();if(decisionCache[_0x49c758]&&_0x4fb950-decisionCache[_0x49c758][_0x1f41c9(0x1e0)]<CACHE_TTL_MS){const _0x503c85=decisionCache[_0x49c758][_0x1f41c9(0x1b4)];return _0xd4177a[_0x1f41c9(0x1c7)]['debug'](_0x1f41c9(0x1fd)+_0x49c758+_0x1f41c9(0x1ec)+(_0x503c85[_0x1f41c9(0x1a6)]?'OK':'NO')+'\x20('+_0x503c85['reason']+')'),_0x503c85;}if(!canCallApi())return _0xd4177a[_0x1f41c9(0x1c7)][_0x1f41c9(0x1fa)]('ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20'+_0x49c758+_0x1f41c9(0x1e1)),{'approved':!![],'reason':_0x1f41c9(0x1e2)};const _0x5686fa=new Date()['toLocaleTimeString'](),_0x4f5112=await getWeatherContext(_0xd4177a),_0x5cafd3=PERSONA_MAPPING[_0xd4177a[_0x1f41c9(0x1a0)][_0x1f41c9(0x1a9)]||_0x1f41c9(0x1b3)],_0x3aa2a6=_0x1f41c9(0x1cd)+_0x5686fa+_0x1f41c9(0x221)+_0x4f5112+_0x1f41c9(0x21a)+(_0xeba837*0x64)[_0x1f41c9(0x20a)](0x0)+_0x1f41c9(0x205)+_0x49c758+_0x1f41c9(0x1ae)+_0x4a22c5+_0x1f41c9(0x1d6)+_0x5cafd3+_0x1f41c9(0x1f7);try{updateApiTimestamp();const _0x4110c1=await _0xd4177a['geminiModel']['generateContent'](_0x3aa2a6),_0x3d6373=_0x4110c1[_0x1f41c9(0x1f8)][_0x1f41c9(0x223)]()[_0x1f41c9(0x1e8)](/```json|```/g,'')[_0x1f41c9(0x1af)](),_0x20044d=JSON[_0x1f41c9(0x217)](_0x3d6373);return decisionCache[_0x49c758]={'decision':_0x20044d,'timestamp':_0x4fb950},_0x20044d;}catch(_0x2f6978){return _0xd4177a['log']['warn'](_0x1f41c9(0x21b)+_0x2f6978['message']),decisionCache[_0x49c758]={'decision':{'approved':!![],'reason':_0x1f41c9(0x1be)},'timestamp':_0x4fb950-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x1f41c9(0x1be)};}}async function runGeminiAnalysis(_0x52f569,_0x55b4c0=''){const _0x558d50=a0_0x33d0d1;if(!_0x52f569['geminiModel'])return;if(!canCallApi()){_0x52f569[_0x558d50(0x1c7)][_0x558d50(0x1fa)](_0x558d50(0x224));return;}if(_0x52f569['eventHistory']['length']===0x0)return;const _0x369d92=_0x52f569[_0x558d50(0x1a3)][_0x558d50(0x201)](0x0,0xf),_0x241c29=_0x52f569[_0x558d50(0x226)],_0x243173=PERSONA_MAPPING[_0x52f569[_0x558d50(0x1a0)][_0x558d50(0x1a9)]||'generic'],_0x3274ad=_0x52f569['config'][_0x558d50(0x1f2)]||_0x558d50(0x1fe);let _0x499818=_0x558d50(0x1d2);try{const _0x557f1d=await _0x52f569['getStateAsync']('system.presenceWho');if(_0x557f1d&&_0x557f1d[_0x558d50(0x1e7)])_0x499818=_0x557f1d['val'];}catch(_0x57c74d){}let _0x559551=![];try{const _0x53866e=await _0x52f569[_0x558d50(0x1ff)](_0x558d50(0x214));if(_0x53866e&&_0x53866e[_0x558d50(0x1e7)])_0x559551=!![];}catch(_0xc5ad9b){}const _0x14fcf0=_0x558d50(0x1ac)+_0x243173+'.\x20KONTEXT:\x20'+_0x3274ad+_0x558d50(0x1f5)+_0x241c29+_0x558d50(0x208)+_0x499818+_0x558d50(0x207)+JSON['stringify'](_0x369d92)+'.\x20EMERGENCY:\x20'+_0x55b4c0+_0x558d50(0x1c9);try{updateApiTimestamp();const _0x5ab3dc=await _0x52f569[_0x558d50(0x212)][_0x558d50(0x1db)](_0x14fcf0),_0x1c0085=JSON['parse'](_0x5ab3dc[_0x558d50(0x1f8)]['text']()[_0x558d50(0x1e8)](/```json|```/g,'')[_0x558d50(0x1af)]());await _0x52f569['setStateAsync'](_0x558d50(0x1dc),{'val':JSON[_0x558d50(0x1b1)](_0x1c0085),'ack':!![]});if(_0x1c0085['summary'])await _0x52f569[_0x558d50(0x1de)]('analysis.activitySummary',{'val':_0x1c0085[_0x558d50(0x20b)],'ack':!![]});const _0x276b38={'timestamp':Date[_0x558d50(0x1d8)](),'id':Date[_0x558d50(0x1d8)]()[_0x558d50(0x1bf)](),'analysis':{'activity':{'summary':_0x1c0085[_0x558d50(0x20b)],'isAlert':_0x1c0085['isAlert'],'alertReason':_0x1c0085[_0x558d50(0x213)]},'comfort':{'automationProposal':_0x1c0085[_0x558d50(0x1c0)]}}};_0x52f569[_0x558d50(0x19f)][_0x558d50(0x20c)](_0x276b38);if(_0x52f569[_0x558d50(0x19f)][_0x558d50(0x1e3)]>0x32)_0x52f569[_0x558d50(0x19f)][_0x558d50(0x20f)]();await _0x52f569[_0x558d50(0x1de)](_0x558d50(0x1ef),{'val':JSON[_0x558d50(0x1b1)](_0x52f569[_0x558d50(0x19f)]),'ack':!![]});const _0x5e866f=_0x1c0085[_0x558d50(0x21c)]||![];_0x5e866f!==_0x52f569[_0x558d50(0x1d5)]&&(await _0x52f569[_0x558d50(0x1de)](_0x558d50(0x215),{'val':_0x5e866f,'ack':!![]}),_0x52f569['lastAlertState']=_0x5e866f,_0x5e866f&&(await _0x52f569[_0x558d50(0x1de)](_0x558d50(0x1cf),{'val':_0x1c0085[_0x558d50(0x213)],'ack':!![]}),setup[_0x558d50(0x1e9)](_0x52f569,_0x558d50(0x1e5)+_0x1c0085[_0x558d50(0x213)],![],_0x1c0085[_0x558d50(0x210)])));if(_0x1c0085['automationProposal']&&_0x1c0085['automationProposal'][_0x558d50(0x1aa)]){await _0x52f569[_0x558d50(0x1de)](_0x558d50(0x1f3),{'val':!![],'ack':!![]}),await _0x52f569[_0x558d50(0x1de)](_0x558d50(0x1c4),{'val':_0x1c0085['automationProposal'][_0x558d50(0x21d)],'ack':!![]}),await _0x52f569['setStateAsync'](_0x558d50(0x20d),{'val':_0x1c0085[_0x558d50(0x1c0)][_0x558d50(0x202)],'ack':!![]}),await _0x52f569[_0x558d50(0x1de)](_0x558d50(0x1ce),{'val':JSON[_0x558d50(0x1b1)](_0x1c0085[_0x558d50(0x1c0)]['targetValue']),'ack':!![]});if(_0x559551)executeAutomationAction(_0x52f569);}}catch(_0x292de0){_0x52f569['log'][_0x558d50(0x1fb)]('Gemini\x20Error:\x20'+_0x292de0['message']);}}async function createDailyDigest(_0x2b9659,_0x206726){const _0x588ce1=a0_0x33d0d1;if(!_0x2b9659[_0x588ce1(0x1c2)])return;if(!canCallApi()){await _0x2b9659[_0x588ce1(0x1de)](LTM_DP_STATUS,{'val':_0x588ce1(0x203),'ack':!![]});return;}await _0x2b9659[_0x588ce1(0x1de)](LTM_DP_STATUS,{'val':_0x588ce1(0x1b6),'ack':!![]});if(!_0x2b9659[_0x588ce1(0x212)]||_0x2b9659[_0x588ce1(0x211)][_0x588ce1(0x1e3)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x2b9659[_0x588ce1(0x1de)](LTM_DP_STATUS,{'val':_0x588ce1(0x1ad),'ack':!![]});return;}const _0x1de4ac=JSON[_0x588ce1(0x217)](JSON[_0x588ce1(0x1b1)](_0x2b9659[_0x588ce1(0x211)])),_0x34caf8=_0x1de4ac['length'],_0x5e4b8c='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON['stringify'](_0x1de4ac);try{updateApiTimestamp();const _0xd1ba1a=await _0x2b9659['geminiModel'][_0x588ce1(0x1db)](_0x5e4b8c),_0x23ac0e=JSON['parse'](_0xd1ba1a[_0x588ce1(0x1f8)][_0x588ce1(0x223)]()[_0x588ce1(0x1e8)](/```json|```/g,'')[_0x588ce1(0x1af)]()),_0x3a6b15={'timestamp':new Date()[_0x588ce1(0x1bb)](),'eventCount':_0x34caf8,'summary':_0x23ac0e['summary']||_0x588ce1(0x1a2),'activityLevel':_0x23ac0e['activityLevel']||'normal','systemMode':_0x2b9659['currentSystemMode']};_0x2b9659[_0x588ce1(0x1df)][_0x588ce1(0x1c3)](_0x3a6b15);const _0x539080=_0x2b9659[_0x588ce1(0x1a0)][_0x588ce1(0x1cb)]||0x3c;_0x2b9659[_0x588ce1(0x1df)]['length']>_0x539080&&_0x2b9659[_0x588ce1(0x1df)][_0x588ce1(0x1da)](0x0,_0x2b9659[_0x588ce1(0x1df)]['length']-_0x539080);await _0x2b9659[_0x588ce1(0x1de)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x588ce1(0x1b1)](_0x2b9659['dailyDigests']),'ack':!![]}),_0x2b9659['rawEventLog']=[],await _0x2b9659[_0x588ce1(0x1de)](LTM_DP_RAW_LOG,{'val':JSON[_0x588ce1(0x1b1)](_0x2b9659[_0x588ce1(0x211)]),'ack':!![]}),await _0x2b9659[_0x588ce1(0x1de)](LTM_DP_STATUS,{'val':_0x588ce1(0x1ab),'ack':!![]});const _0x4dc1c3=_0x588ce1(0x21e)+_0x23ac0e[_0x588ce1(0x20b)]+_0x588ce1(0x1d4)+_0x23ac0e[_0x588ce1(0x227)];setup[_0x588ce1(0x1e9)](_0x2b9659,_0x4dc1c3,![],![]);if(_0x2b9659['isProVersion']&&_0x206726)_0x206726[_0x588ce1(0x218)](_0x2b9659,'ANALYZE_HEALTH',{'digest':_0x3a6b15});}catch(_0x28d26f){_0x2b9659[_0x588ce1(0x1c7)]['error'](_0x28d26f['message']);}}async function runBaselineDriftAnalysis(_0x21d385){const _0x51ce57=a0_0x33d0d1;if(!_0x21d385[_0x51ce57(0x1c2)]||!_0x21d385[_0x51ce57(0x212)])return;if(!canCallApi())return;const _0x4b91b2=_0x21d385[_0x51ce57(0x1a0)][_0x51ce57(0x1b7)]||0xe;if(_0x21d385['dailyDigests']['length']<_0x4b91b2+0x7){await _0x21d385[_0x51ce57(0x1de)](_0x51ce57(0x1e4),{'val':_0x51ce57(0x1a8),'ack':!![]});return;}const _0x42bc19=_0x21d385[_0x51ce57(0x1df)][_0x51ce57(0x201)](-_0x4b91b2),_0xe01d2=_0x21d385['dailyDigests'][_0x51ce57(0x201)](0x0,_0x21d385[_0x51ce57(0x1df)]['length']-_0x4b91b2),_0x392fc7='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x51ce57(0x1b1)](_0xe01d2)+'\x0aSTB:\x20'+JSON[_0x51ce57(0x1b1)](_0x42bc19);try{updateApiTimestamp();const _0x689ead=await _0x21d385['geminiModel'][_0x51ce57(0x1db)](_0x392fc7),_0x425e11=JSON[_0x51ce57(0x217)](_0x689ead[_0x51ce57(0x1f8)][_0x51ce57(0x223)]()[_0x51ce57(0x1e8)](/```json|```/g,'')[_0x51ce57(0x1af)]());_0x425e11['baselineDrift']&&(await _0x21d385['setStateAsync'](_0x51ce57(0x1e4),{'val':_0x425e11['baselineDrift'],'ack':!![]}),await _0x21d385[_0x51ce57(0x1de)]('LTM.driftAnalysis.driftDetails',{'val':_0x425e11[_0x51ce57(0x1c5)],'ack':!![]}),await _0x21d385[_0x51ce57(0x1de)]('LTM.driftAnalysis.lastCheck',{'val':Date['now'](),'ack':!![]}));}catch(_0x53ebf4){}}async function executeAutomationAction(_0x63eb86){const _0x18fd53=a0_0x33d0d1;try{const _0x390f72=await _0x63eb86[_0x18fd53(0x1ff)](_0x18fd53(0x20d)),_0x243df3=await _0x63eb86['getStateAsync']('analysis.automation.targetValue');if(_0x390f72&&_0x390f72['val']&&_0x243df3){const _0x4cfe39=_0x390f72[_0x18fd53(0x1e7)];let _0xdf8a78=_0x243df3['val'];try{_0xdf8a78=JSON['parse'](_0xdf8a78);}catch(_0x4b9500){}_0x63eb86[_0x18fd53(0x1c7)][_0x18fd53(0x1d1)](_0x18fd53(0x1b0)+_0x4cfe39+_0x18fd53(0x1c8)+_0xdf8a78),await _0x63eb86[_0x18fd53(0x228)](_0x4cfe39,_0xdf8a78);}else _0x63eb86[_0x18fd53(0x1c7)][_0x18fd53(0x206)](_0x18fd53(0x1f1));}catch(_0x56e61b){_0x63eb86['log'][_0x18fd53(0x1fb)]('BUTLER\x20Execution\x20Error:\x20'+_0x56e61b[_0x18fd53(0x1a1)]);}}function a0_0x4026(_0x528505,_0x577f5c){const _0x3b3383=a0_0x446c();return a0_0x4026=function(_0x2b1264,_0x3f22f3){_0x2b1264=_0x2b1264-0x19f;let _0x446c3a=_0x3b3383[_0x2b1264];return _0x446c3a;},a0_0x4026(_0x528505,_0x577f5c);}async function sendMorningBriefing(_0x1e5a44){const _0x101aaf=a0_0x33d0d1;if(!_0x1e5a44['geminiModel']){_0x1e5a44[_0x101aaf(0x1c7)]['warn'](_0x101aaf(0x1dd));return;}_0x1e5a44[_0x101aaf(0x1c7)][_0x101aaf(0x1d1)](_0x101aaf(0x1f0));try{updateApiTimestamp();const _0x745553=_0x101aaf(0x1d7),_0x4f4717=await _0x1e5a44[_0x101aaf(0x212)]['generateContent'](_0x745553),_0x2aa91b=_0x4f4717['response'][_0x101aaf(0x223)]();_0x1e5a44[_0x101aaf(0x1c7)][_0x101aaf(0x1d1)](_0x101aaf(0x209)+_0x2aa91b[_0x101aaf(0x1e3)]+_0x101aaf(0x1a4)),setup[_0x101aaf(0x1e9)](_0x1e5a44,_0x101aaf(0x1f6)+_0x2aa91b);}catch(_0x3a91b7){_0x1e5a44[_0x101aaf(0x1c7)]['error'](_0x101aaf(0x204)+_0x3a91b7[_0x101aaf(0x1a1)]);}}module['exports']={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};