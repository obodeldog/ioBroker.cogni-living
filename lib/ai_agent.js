const a0_0xc0dc04=a0_0x48fe;(function(_0x17d993,_0x471c0b){const _0x68544c=a0_0x48fe,_0x1e4931=_0x17d993();while(!![]){try{const _0x5b89fd=parseInt(_0x68544c(0x23b))/0x1*(-parseInt(_0x68544c(0x1c9))/0x2)+parseInt(_0x68544c(0x21d))/0x3*(-parseInt(_0x68544c(0x1d1))/0x4)+parseInt(_0x68544c(0x200))/0x5+-parseInt(_0x68544c(0x220))/0x6+parseInt(_0x68544c(0x1d5))/0x7+-parseInt(_0x68544c(0x22e))/0x8*(-parseInt(_0x68544c(0x1cd))/0x9)+parseInt(_0x68544c(0x212))/0xa;if(_0x5b89fd===_0x471c0b)break;else _0x1e4931['push'](_0x1e4931['shift']());}catch(_0x5d596a){_0x1e4931['push'](_0x1e4931['shift']());}}}(a0_0x5c99,0xd25f1));function a0_0x48fe(_0x3c1eb1,_0xe6752a){const _0x474f74=a0_0x5c99();return a0_0x48fe=function(_0x5675e1,_0x2a1287){_0x5675e1=_0x5675e1-0x1c1;let _0x5c994f=_0x474f74[_0x5675e1];return _0x5c994f;},a0_0x48fe(_0x3c1eb1,_0xe6752a);}const a0_0x2a1287=(function(){let _0x26eda1=!![];return function(_0x3ff65d,_0x520588){const _0xc15d7e=_0x26eda1?function(){const _0x5b4850=a0_0x48fe;if(_0x520588){const _0x372cab=_0x520588[_0x5b4850(0x202)](_0x3ff65d,arguments);return _0x520588=null,_0x372cab;}}:function(){};return _0x26eda1=![],_0xc15d7e;};}()),a0_0x5675e1=a0_0x2a1287(this,function(){const _0x333154=a0_0x48fe;return a0_0x5675e1['toString']()[_0x333154(0x1f2)](_0x333154(0x1f5))[_0x333154(0x214)]()[_0x333154(0x20c)](a0_0x5675e1)[_0x333154(0x1f2)](_0x333154(0x1f5));});function a0_0x5c99(){const _0x30fa43=['summary','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','text','25802500ImhuuF','isEmergency','toString','push','analysis.activitySummary','Tag','activityLevel','currentSystemMode','%)\x20nach\x20\x22','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','message','516EHXhpT','response','KI-Fehler\x20(Fallback)','7523850yuhkEe','warn','setStateAsync','automationProposal','Unbekannt\x20(Kein\x20Sensor)','.\x20EVENTS:\x20','config','Sicherheit\x20geht\x20vor.','debug','Nacht','Traffic-Schutz\x20(Auto-Approved)','livingContext','decision','driftDetails','1955320SNpFec','isProVersion','\x20Ã¼bersprungen\x20(Auto-Approved).','detected','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','LTM.driftAnalysis.lastCheck','.Current.IsNight','length','getForeignStateAsync','trim','.Current.WeatherText','Success','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','2cpVXws','analysisHistory','Â°C,\x20','analysis.automation.targetId','send','analysis.isAlert','exports','toFixed','BUTLER\x20Execution\x20Error:\x20','ðŸŒ…\x20Morning\x20Briefing:\x0a','analysis.alertReason','targetId','generic','system.presenceWho','\x20=\x20','error','analysis.lastResult','.forecast.current.temperature','Wetterdaten\x20nicht\x20abrufbar','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','stringify','N/A\x20(Learning)','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','837428kGOBsc','LTM.dailyDigests','generateContent','parse','18MFuqDc','toLocaleTimeString','.\x20SYSTEM_MODE:\x20','aiPersona','38224aTbrWs','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','\x0aSTB:\x20','1906737IsTiBX','toISOString','Skipped\x20(Traffic)','alertReason','slice','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','@google/generative-ai','ANALYZE_HEALTH','info','pop','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','./setup','rawEventLog','description',',\x20Wetter:\x20','Briefing\x20Error:\x20','dailyDigests','Gemini\x20Error:\x20','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','Skipped\x20(No\x20AI\x20or\x20Data)','log','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','Digest','.\x20EMERGENCY:\x20','getStateAsync','eventHistory','search','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','baselineDrift','(((.+)+)+)+$','useWeather','LTM.driftAnalysis.baselineDrift','analysis.automation.patternDetected','Started...','isAlert','sendNotification',',\x20LichtverhÃ¤ltnisse:\x20','replace','weatherInstance','normal','6276225UJhQkn','âš ï¸\x20ALARM:\x20','apply','Unbekannt','.forecast.current.state','geminiModel','splice','now','ltmStbWindowDays','val','analysis.automation.targetValue','reason','constructor','.\x20KONTEXT:\x20','lastAlertState'];a0_0x5c99=function(){return _0x30fa43;};return a0_0x5c99();}a0_0x5675e1();'use strict';const {GoogleGenerativeAI}=require(a0_0xc0dc04(0x1db)),setup=require(a0_0xc0dc04(0x1e0)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0xc0dc04(0x1ca),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0xc0dc04(0x232),'senior_aal':a0_0xc0dc04(0x1d2),'family':a0_0xc0dc04(0x1df),'single_comfort':a0_0xc0dc04(0x210),'security':a0_0xc0dc04(0x227),'energy_saver':a0_0xc0dc04(0x1ec)};function canCallApi(){const _0x4914c7=a0_0xc0dc04,_0x5e1164=Date[_0x4914c7(0x207)]();return _0x5e1164-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x158be6=a0_0xc0dc04;lastGlobalApiCall=Date[_0x158be6(0x207)]();}async function getWeatherContext(_0xa943ad){const _0x5b71da=a0_0xc0dc04;if(!_0xa943ad[_0x5b71da(0x226)][_0x5b71da(0x1f6)]||!_0xa943ad['config'][_0x5b71da(0x1fe)])return _0x5b71da(0x224);try{const _0x46b459=_0xa943ad[_0x5b71da(0x226)][_0x5b71da(0x1fe)];let _0x44fc50=await _0xa943ad[_0x5b71da(0x236)](_0x46b459+'.Current.Temperature');if(!_0x44fc50)_0x44fc50=await _0xa943ad[_0x5b71da(0x236)](_0x46b459+_0x5b71da(0x1c3));let _0xd2a911=await _0xa943ad[_0x5b71da(0x236)](_0x46b459+_0x5b71da(0x238));if(!_0xd2a911)_0xd2a911=await _0xa943ad[_0x5b71da(0x236)](_0x46b459+_0x5b71da(0x204));let _0x3f2eb3=_0x5b71da(0x203);const _0x2f500e=await _0xa943ad[_0x5b71da(0x236)](_0x46b459+_0x5b71da(0x234));if(_0x2f500e)_0x3f2eb3=_0x2f500e[_0x5b71da(0x209)]?_0x5b71da(0x229):_0x5b71da(0x217);if(_0x44fc50&&_0xd2a911)return _0x44fc50[_0x5b71da(0x209)]+_0x5b71da(0x23d)+_0xd2a911['val']+_0x5b71da(0x1fc)+_0x3f2eb3;}catch(_0x11698a){}return _0x5b71da(0x1c4);}async function consultButler(_0x53acb7,_0x4883dc,_0xa42c3b,_0x3c86cb){const _0x1a405d=a0_0xc0dc04;if(!_0x53acb7[_0x1a405d(0x205)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x223fbb=Date['now']();if(decisionCache[_0x4883dc]&&_0x223fbb-decisionCache[_0x4883dc]['timestamp']<CACHE_TTL_MS){const _0x98e849=decisionCache[_0x4883dc][_0x1a405d(0x22c)];return _0x53acb7['log'][_0x1a405d(0x228)](_0x1a405d(0x21b)+_0x4883dc+'\x20->\x20'+(_0x98e849['approved']?'OK':'NO')+'\x20('+_0x98e849[_0x1a405d(0x20b)]+')'),_0x98e849;}if(!canCallApi())return _0x53acb7[_0x1a405d(0x1ea)]['debug']('ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20'+_0x4883dc+_0x1a405d(0x230)),{'approved':!![],'reason':_0x1a405d(0x22a)};const _0x370af8=new Date()[_0x1a405d(0x1ce)](),_0x598d8b=await getWeatherContext(_0x53acb7),_0x4c91f4=PERSONA_MAPPING[_0x53acb7['config'][_0x1a405d(0x1d0)]||'generic'],_0x53d343='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x370af8+_0x1a405d(0x1e3)+_0x598d8b+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x3c86cb*0x64)[_0x1a405d(0x242)](0x0)+_0x1a405d(0x21a)+_0x4883dc+_0x1a405d(0x1f3)+_0xa42c3b+_0x1a405d(0x1c8)+_0x4c91f4+_0x1a405d(0x1e8);try{updateApiTimestamp();const _0x49402c=await _0x53acb7[_0x1a405d(0x205)][_0x1a405d(0x1cb)](_0x53d343),_0x403ff7=_0x49402c[_0x1a405d(0x21e)]['text']()[_0x1a405d(0x1fd)](/```json|```/g,'')[_0x1a405d(0x237)](),_0x4e8426=JSON[_0x1a405d(0x1cc)](_0x403ff7);return decisionCache[_0x4883dc]={'decision':_0x4e8426,'timestamp':_0x223fbb},_0x4e8426;}catch(_0x2c020e){return _0x53acb7[_0x1a405d(0x1ea)][_0x1a405d(0x221)](_0x1a405d(0x1da)+_0x2c020e[_0x1a405d(0x21c)]),decisionCache[_0x4883dc]={'decision':{'approved':!![],'reason':_0x1a405d(0x21f)},'timestamp':_0x223fbb-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x173375,_0x58fcbe=''){const _0x117b02=a0_0xc0dc04;if(!_0x173375[_0x117b02(0x205)])return;if(!canCallApi()){_0x173375['log'][_0x117b02(0x228)](_0x117b02(0x1d3));return;}if(_0x173375['eventHistory']['length']===0x0)return;const _0x3a8b83=_0x173375[_0x117b02(0x1f1)][_0x117b02(0x1d9)](0x0,0xf),_0x292749=_0x173375['currentSystemMode'],_0x22ad8c=PERSONA_MAPPING[_0x173375[_0x117b02(0x226)]['aiPersona']||_0x117b02(0x247)],_0x4ffebc=_0x173375[_0x117b02(0x226)][_0x117b02(0x22b)]||'Keine\x20Details.';let _0x4137e4='Unbekannt';try{const _0x4ccb5a=await _0x173375[_0x117b02(0x1f0)](_0x117b02(0x248));if(_0x4ccb5a&&_0x4ccb5a[_0x117b02(0x209)])_0x4137e4=_0x4ccb5a[_0x117b02(0x209)];}catch(_0x4945ca){}let _0x3162db=![];try{const _0x187539=await _0x173375['getStateAsync']('analysis.automation.autoApply');if(_0x187539&&_0x187539[_0x117b02(0x209)])_0x3162db=!![];}catch(_0x263568){}const _0x53d72f=_0x117b02(0x1ed)+_0x22ad8c+_0x117b02(0x20d)+_0x4ffebc+_0x117b02(0x1cf)+_0x292749+'.\x20ANWESEND:\x20'+_0x4137e4+_0x117b02(0x225)+JSON[_0x117b02(0x1c6)](_0x3a8b83)+_0x117b02(0x1ef)+_0x58fcbe+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x13e15e=await _0x173375['geminiModel']['generateContent'](_0x53d72f),_0x39c4cc=JSON[_0x117b02(0x1cc)](_0x13e15e['response'][_0x117b02(0x211)]()[_0x117b02(0x1fd)](/```json|```/g,'')['trim']());await _0x173375[_0x117b02(0x222)](_0x117b02(0x1c2),{'val':JSON[_0x117b02(0x1c6)](_0x39c4cc),'ack':!![]});if(_0x39c4cc[_0x117b02(0x20f)])await _0x173375['setStateAsync'](_0x117b02(0x216),{'val':_0x39c4cc[_0x117b02(0x20f)],'ack':!![]});const _0x19c054={'timestamp':Date[_0x117b02(0x207)](),'id':Date[_0x117b02(0x207)]()[_0x117b02(0x214)](),'analysis':{'activity':{'summary':_0x39c4cc['summary'],'isAlert':_0x39c4cc[_0x117b02(0x1fa)],'alertReason':_0x39c4cc['alertReason']},'comfort':{'automationProposal':_0x39c4cc[_0x117b02(0x223)]}}};_0x173375[_0x117b02(0x23c)]['unshift'](_0x19c054);if(_0x173375['analysisHistory'][_0x117b02(0x235)]>0x32)_0x173375[_0x117b02(0x23c)][_0x117b02(0x1de)]();await _0x173375[_0x117b02(0x222)]('analysis.analysisHistory',{'val':JSON[_0x117b02(0x1c6)](_0x173375[_0x117b02(0x23c)]),'ack':!![]});const _0x3258a2=_0x39c4cc[_0x117b02(0x1fa)]||![];_0x3258a2!==_0x173375['lastAlertState']&&(await _0x173375[_0x117b02(0x222)](_0x117b02(0x240),{'val':_0x3258a2,'ack':!![]}),_0x173375[_0x117b02(0x20e)]=_0x3258a2,_0x3258a2&&(await _0x173375[_0x117b02(0x222)](_0x117b02(0x245),{'val':_0x39c4cc[_0x117b02(0x1d8)],'ack':!![]}),setup[_0x117b02(0x1fb)](_0x173375,_0x117b02(0x201)+_0x39c4cc[_0x117b02(0x1d8)],![],_0x39c4cc[_0x117b02(0x213)])));if(_0x39c4cc[_0x117b02(0x223)]&&_0x39c4cc[_0x117b02(0x223)][_0x117b02(0x231)]){await _0x173375[_0x117b02(0x222)](_0x117b02(0x1f8),{'val':!![],'ack':!![]}),await _0x173375[_0x117b02(0x222)]('analysis.automation.description',{'val':_0x39c4cc['automationProposal'][_0x117b02(0x1e2)],'ack':!![]}),await _0x173375[_0x117b02(0x222)](_0x117b02(0x23e),{'val':_0x39c4cc[_0x117b02(0x223)][_0x117b02(0x246)],'ack':!![]}),await _0x173375[_0x117b02(0x222)]('analysis.automation.targetValue',{'val':JSON[_0x117b02(0x1c6)](_0x39c4cc[_0x117b02(0x223)]['targetValue']),'ack':!![]});if(_0x3162db)executeAutomationAction(_0x173375);}}catch(_0x15d743){_0x173375[_0x117b02(0x1ea)]['error'](_0x117b02(0x1e6)+_0x15d743[_0x117b02(0x21c)]);}}async function createDailyDigest(_0x43d6ec,_0x43ef04){const _0x5afbc6=a0_0xc0dc04;if(!_0x43d6ec[_0x5afbc6(0x22f)])return;if(!canCallApi()){await _0x43d6ec['setStateAsync'](LTM_DP_STATUS,{'val':_0x5afbc6(0x1d7),'ack':!![]});return;}await _0x43d6ec[_0x5afbc6(0x222)](LTM_DP_STATUS,{'val':_0x5afbc6(0x1f9),'ack':!![]});if(!_0x43d6ec[_0x5afbc6(0x205)]||_0x43d6ec[_0x5afbc6(0x1e1)][_0x5afbc6(0x235)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x43d6ec[_0x5afbc6(0x222)](LTM_DP_STATUS,{'val':_0x5afbc6(0x1e9),'ack':!![]});return;}const _0x5cffca=JSON[_0x5afbc6(0x1cc)](JSON[_0x5afbc6(0x1c6)](_0x43d6ec[_0x5afbc6(0x1e1)])),_0x606981=_0x5cffca['length'],_0x981fab=_0x5afbc6(0x1c5)+JSON['stringify'](_0x5cffca);try{updateApiTimestamp();const _0x5e7f94=await _0x43d6ec[_0x5afbc6(0x205)][_0x5afbc6(0x1cb)](_0x981fab),_0x500754=JSON[_0x5afbc6(0x1cc)](_0x5e7f94[_0x5afbc6(0x21e)]['text']()[_0x5afbc6(0x1fd)](/```json|```/g,'')['trim']()),_0x1d6783={'timestamp':new Date()[_0x5afbc6(0x1d6)](),'eventCount':_0x606981,'summary':_0x500754[_0x5afbc6(0x20f)]||_0x5afbc6(0x1ee),'activityLevel':_0x500754[_0x5afbc6(0x218)]||_0x5afbc6(0x1ff),'systemMode':_0x43d6ec[_0x5afbc6(0x219)]};_0x43d6ec[_0x5afbc6(0x1e5)][_0x5afbc6(0x215)](_0x1d6783);const _0x4f0fd9=_0x43d6ec[_0x5afbc6(0x226)]['ltmLtbWindowDays']||0x3c;_0x43d6ec['dailyDigests'][_0x5afbc6(0x235)]>_0x4f0fd9&&_0x43d6ec[_0x5afbc6(0x1e5)][_0x5afbc6(0x206)](0x0,_0x43d6ec[_0x5afbc6(0x1e5)][_0x5afbc6(0x235)]-_0x4f0fd9);await _0x43d6ec['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x5afbc6(0x1c6)](_0x43d6ec[_0x5afbc6(0x1e5)]),'ack':!![]}),_0x43d6ec[_0x5afbc6(0x1e1)]=[],await _0x43d6ec['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x5afbc6(0x1c6)](_0x43d6ec[_0x5afbc6(0x1e1)]),'ack':!![]}),await _0x43d6ec[_0x5afbc6(0x222)](LTM_DP_STATUS,{'val':_0x5afbc6(0x239),'ack':!![]});if(_0x43d6ec[_0x5afbc6(0x22f)]&&_0x43ef04)_0x43ef04[_0x5afbc6(0x23f)](_0x43d6ec,_0x5afbc6(0x1dc),{'digest':_0x1d6783});}catch(_0x4375fa){_0x43d6ec[_0x5afbc6(0x1ea)]['error'](_0x4375fa[_0x5afbc6(0x21c)]);}}async function runBaselineDriftAnalysis(_0x21cac5){const _0x12dd4a=a0_0xc0dc04;if(!_0x21cac5[_0x12dd4a(0x22f)]||!_0x21cac5[_0x12dd4a(0x205)])return;if(!canCallApi())return;const _0x21d7a4=_0x21cac5[_0x12dd4a(0x226)][_0x12dd4a(0x208)]||0xe;if(_0x21cac5[_0x12dd4a(0x1e5)]['length']<_0x21d7a4+0x7){await _0x21cac5[_0x12dd4a(0x222)](_0x12dd4a(0x1f7),{'val':_0x12dd4a(0x1c7),'ack':!![]});return;}const _0x489119=_0x21cac5[_0x12dd4a(0x1e5)][_0x12dd4a(0x1d9)](-_0x21d7a4),_0x549ef0=_0x21cac5[_0x12dd4a(0x1e5)]['slice'](0x0,_0x21cac5[_0x12dd4a(0x1e5)][_0x12dd4a(0x235)]-_0x21d7a4),_0x203c7c=_0x12dd4a(0x1eb)+JSON[_0x12dd4a(0x1c6)](_0x549ef0)+_0x12dd4a(0x1d4)+JSON['stringify'](_0x489119);try{updateApiTimestamp();const _0xacbe15=await _0x21cac5[_0x12dd4a(0x205)][_0x12dd4a(0x1cb)](_0x203c7c),_0x2faf5d=JSON[_0x12dd4a(0x1cc)](_0xacbe15['response'][_0x12dd4a(0x211)]()[_0x12dd4a(0x1fd)](/```json|```/g,'')[_0x12dd4a(0x237)]());_0x2faf5d[_0x12dd4a(0x1f4)]&&(await _0x21cac5[_0x12dd4a(0x222)](_0x12dd4a(0x1f7),{'val':_0x2faf5d[_0x12dd4a(0x1f4)],'ack':!![]}),await _0x21cac5[_0x12dd4a(0x222)]('LTM.driftAnalysis.driftDetails',{'val':_0x2faf5d[_0x12dd4a(0x22d)],'ack':!![]}),await _0x21cac5[_0x12dd4a(0x222)](_0x12dd4a(0x233),{'val':Date['now'](),'ack':!![]}));}catch(_0x25bd27){}}async function executeAutomationAction(_0x8631b8){const _0x57753e=a0_0xc0dc04;try{const _0x2fba31=await _0x8631b8[_0x57753e(0x1f0)](_0x57753e(0x23e)),_0xcd56c5=await _0x8631b8[_0x57753e(0x1f0)](_0x57753e(0x20a));if(_0x2fba31&&_0x2fba31['val']&&_0xcd56c5){const _0x4c9026=_0x2fba31[_0x57753e(0x209)];let _0x1ae1c8=_0xcd56c5['val'];try{_0x1ae1c8=JSON[_0x57753e(0x1cc)](_0x1ae1c8);}catch(_0x97263){}_0x8631b8[_0x57753e(0x1ea)][_0x57753e(0x1dd)](_0x57753e(0x23a)+_0x4c9026+_0x57753e(0x249)+_0x1ae1c8),await _0x8631b8['setForeignStateAsync'](_0x4c9026,_0x1ae1c8);}else _0x8631b8[_0x57753e(0x1ea)]['warn']('ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x35780d){_0x8631b8[_0x57753e(0x1ea)][_0x57753e(0x1c1)](_0x57753e(0x243)+_0x35780d[_0x57753e(0x21c)]);}}async function sendMorningBriefing(_0x32de78){const _0x98981f=a0_0xc0dc04;if(!_0x32de78[_0x98981f(0x205)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x1fbe1b=_0x98981f(0x1e7),_0x2197bf=await _0x32de78['geminiModel']['generateContent'](_0x1fbe1b),_0xc8c88d=_0x2197bf[_0x98981f(0x21e)][_0x98981f(0x211)]();setup['sendNotification'](_0x32de78,_0x98981f(0x244)+_0xc8c88d);}catch(_0x4adb35){_0x32de78['log']['error'](_0x98981f(0x1e4)+_0x4adb35[_0x98981f(0x21c)]);}}module[a0_0xc0dc04(0x241)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};