const a0_0x18f4d8=a0_0x1316;(function(_0x493a87,_0x10ef33){const _0xd4c352=a0_0x1316,_0x2b59de=_0x493a87();while(!![]){try{const _0x1ee06a=parseInt(_0xd4c352(0x126))/0x1*(-parseInt(_0xd4c352(0x14e))/0x2)+parseInt(_0xd4c352(0x119))/0x3*(-parseInt(_0xd4c352(0x157))/0x4)+-parseInt(_0xd4c352(0x18b))/0x5+parseInt(_0xd4c352(0x12e))/0x6*(parseInt(_0xd4c352(0x151))/0x7)+-parseInt(_0xd4c352(0x136))/0x8*(parseInt(_0xd4c352(0x18d))/0x9)+-parseInt(_0xd4c352(0x15b))/0xa+-parseInt(_0xd4c352(0x125))/0xb*(-parseInt(_0xd4c352(0x16a))/0xc);if(_0x1ee06a===_0x10ef33)break;else _0x2b59de['push'](_0x2b59de['shift']());}catch(_0x4d8c3e){_0x2b59de['push'](_0x2b59de['shift']());}}}(a0_0x16b5,0x95c89));const a0_0x1b7526=(function(){let _0x290d6c=!![];return function(_0x461fb0,_0x19b58e){const _0x1528f1=_0x290d6c?function(){const _0x1526c5=a0_0x1316;if(_0x19b58e){const _0x3a971a=_0x19b58e[_0x1526c5(0x18f)](_0x461fb0,arguments);return _0x19b58e=null,_0x3a971a;}}:function(){};return _0x290d6c=![],_0x1528f1;};}()),a0_0x8bbba9=a0_0x1b7526(this,function(){const _0x549b3d=a0_0x1316;return a0_0x8bbba9[_0x549b3d(0x131)]()[_0x549b3d(0x13d)]('(((.+)+)+)+$')[_0x549b3d(0x131)]()[_0x549b3d(0x186)](a0_0x8bbba9)['search'](_0x549b3d(0x147));});function a0_0x1316(_0x52523a,_0x22ffd5){const _0x5e24ef=a0_0x16b5();return a0_0x1316=function(_0x8bbba9,_0x1b7526){_0x8bbba9=_0x8bbba9-0x110;let _0x16b5c7=_0x5e24ef[_0x8bbba9];return _0x16b5c7;},a0_0x1316(_0x52523a,_0x22ffd5);}a0_0x8bbba9();'use strict';const {GoogleGenerativeAI}=require(a0_0x18f4d8(0x145)),setup=require(a0_0x18f4d8(0x11e)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x18f4d8(0x15a),LTM_DP_STATUS=a0_0x18f4d8(0x12d),LTM_DP_RAW_LOG=a0_0x18f4d8(0x12c),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;function a0_0x16b5(){const _0x41d272=['ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','text','\x20Ã¼bersprungen\x20(Auto-Approved).','Traffic-Schutz\x20(Auto-Approved)','push','val','log','baselineDrift','detected','348TJGDLR','LTM.driftAnalysis.driftDetails','Nacht','analysisHistory','getStateAsync','.forecast.current.state','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','isAlert','.\x20EVENTS:\x20','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','Gemini\x20Error:\x20','LTM.driftAnalysis.baselineDrift','message','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','aiPersona','ltmLtbWindowDays','Skipped\x20(No\x20AI\x20or\x20Data)','analysis.isAlert','sendNotification','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','analysis.automation.autoApply','toFixed','Unbekannt\x20(Kein\x20Sensor)','response','generic','slice','constructor','%)\x20nach\x20\x22','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(',',\x20Wetter:\x20','geminiModel','3791890EiMDYC','setForeignStateAsync','10107AspSjJ','Briefing\x20Error:\x20','apply','Unbekannt','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','analysis.alertReason','analysis.automation.targetValue','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','\x20=\x20','lastAlertState','targetId','eventHistory','weatherInstance','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','exports','replace','.Current.IsNight','\x20->\x20','targetValue','timestamp','analysis.automation.targetId','currentSystemMode','2523ucTufI','toISOString','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','analysis.activitySummary','LTM.driftAnalysis.lastCheck','./setup','.\x20KONTEXT:\x20','stringify','debug','ðŸŒ…\x20Morning\x20Briefing:\x0a','normal','dailyDigests','1107711HjhkSp','46cCHiJL','\x0aSTB:\x20','generateContent','analysis.analysisHistory','Sicherheit\x20geht\x20vor.','KI-Fehler\x20(Fallback)','LTM.rawEventLog','LTM.processingStatus','18mDWSaw','error','N/A\x20(Learning)','toString','parse','Digest','send','automationProposal','7696WqrEoz','setStateAsync','.Current.WeatherText','KI\x20offline\x20(Fallback)','Started...','trim','pop','search','Wetterdaten\x20nicht\x20abrufbar','analysis.lastResult','approved','unshift','Tag','Skipped\x20(Traffic)','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','@google/generative-ai','splice','(((.+)+)+)+$',',\x20LichtverhÃ¤ltnisse:\x20','.\x20ANWESEND:\x20','config','length','âš ï¸\x20ALARM:\x20','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','3346yxidgc','analysis.automation.description','livingContext','1997002qzfonE','rawEventLog','summary','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','Â°C,\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','964MKBDpa','alertReason','toLocaleTimeString','LTM.dailyDigests','10443310aXwlvj','getForeignStateAsync','warn','Success','now','isProVersion'];a0_0x16b5=function(){return _0x41d272;};return a0_0x16b5();}const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x18f4d8(0x154),'senior_aal':a0_0x18f4d8(0x174),'family':a0_0x18f4d8(0x144),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':a0_0x18f4d8(0x12a),'energy_saver':a0_0x18f4d8(0x194)};function canCallApi(){const _0x364bc7=a0_0x18f4d8,_0x491615=Date[_0x364bc7(0x15f)]();return _0x491615-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0xf0db49){const _0x5dffc5=a0_0x18f4d8;if(!_0xf0db49[_0x5dffc5(0x14a)]['useWeather']||!_0xf0db49[_0x5dffc5(0x14a)][_0x5dffc5(0x199)])return _0x5dffc5(0x182);try{const _0x33bdae=_0xf0db49['config'][_0x5dffc5(0x199)];let _0xa7aadb=await _0xf0db49['getForeignStateAsync'](_0x33bdae+'.Current.Temperature');if(!_0xa7aadb)_0xa7aadb=await _0xf0db49[_0x5dffc5(0x15c)](_0x33bdae+'.forecast.current.temperature');let _0x23e5a1=await _0xf0db49[_0x5dffc5(0x15c)](_0x33bdae+_0x5dffc5(0x138));if(!_0x23e5a1)_0x23e5a1=await _0xf0db49[_0x5dffc5(0x15c)](_0x33bdae+_0x5dffc5(0x16f));let _0x4c7975=_0x5dffc5(0x190);const _0x4f1475=await _0xf0db49['getForeignStateAsync'](_0x33bdae+_0x5dffc5(0x113));if(_0x4f1475)_0x4c7975=_0x4f1475['val']?_0x5dffc5(0x16c):_0x5dffc5(0x142);if(_0xa7aadb&&_0x23e5a1)return _0xa7aadb[_0x5dffc5(0x166)]+_0x5dffc5(0x155)+_0x23e5a1[_0x5dffc5(0x166)]+_0x5dffc5(0x148)+_0x4c7975;}catch(_0x5d09f2){}return _0x5dffc5(0x13e);}async function consultButler(_0x170bb0,_0x3b649e,_0x224e16,_0x1b8412){const _0x1021d9=a0_0x18f4d8;if(!_0x170bb0[_0x1021d9(0x18a)])return{'approved':!![],'reason':_0x1021d9(0x139)};const _0x8d5897=Date[_0x1021d9(0x15f)]();if(decisionCache[_0x3b649e]&&_0x8d5897-decisionCache[_0x3b649e][_0x1021d9(0x116)]<CACHE_TTL_MS){const _0x5c9ee9=decisionCache[_0x3b649e]['decision'];return _0x170bb0[_0x1021d9(0x167)][_0x1021d9(0x121)](_0x1021d9(0x11b)+_0x3b649e+_0x1021d9(0x114)+(_0x5c9ee9[_0x1021d9(0x140)]?'OK':'NO')+'\x20('+_0x5c9ee9['reason']+')'),_0x5c9ee9;}if(!canCallApi())return _0x170bb0[_0x1021d9(0x167)]['debug'](_0x1021d9(0x179)+_0x3b649e+_0x1021d9(0x163)),{'approved':!![],'reason':_0x1021d9(0x164)};const _0x4360c1=new Date()[_0x1021d9(0x159)](),_0x4ca4a5=await getWeatherContext(_0x170bb0),_0x553264=PERSONA_MAPPING[_0x170bb0[_0x1021d9(0x14a)][_0x1021d9(0x17a)]||_0x1021d9(0x184)],_0x58f6d7=_0x1021d9(0x175)+_0x4360c1+_0x1021d9(0x189)+_0x4ca4a5+_0x1021d9(0x188)+(_0x1b8412*0x64)[_0x1021d9(0x181)](0x0)+_0x1021d9(0x187)+_0x3b649e+_0x1021d9(0x170)+_0x224e16+_0x1021d9(0x17f)+_0x553264+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x5dc8cd=await _0x170bb0[_0x1021d9(0x18a)][_0x1021d9(0x128)](_0x58f6d7),_0x1510fd=_0x5dc8cd[_0x1021d9(0x183)][_0x1021d9(0x162)]()['replace'](/```json|```/g,'')[_0x1021d9(0x13b)](),_0x33f3b6=JSON[_0x1021d9(0x132)](_0x1510fd);return decisionCache[_0x3b649e]={'decision':_0x33f3b6,'timestamp':_0x8d5897},_0x33f3b6;}catch(_0xc6a28a){return _0x170bb0[_0x1021d9(0x167)][_0x1021d9(0x15d)](_0x1021d9(0x14d)+_0xc6a28a[_0x1021d9(0x178)]),decisionCache[_0x3b649e]={'decision':{'approved':!![],'reason':_0x1021d9(0x12b)},'timestamp':_0x8d5897-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x1021d9(0x12b)};}}async function runGeminiAnalysis(_0x2450f4,_0x4885db=''){const _0x3861ed=a0_0x18f4d8;if(!_0x2450f4[_0x3861ed(0x18a)])return;if(!canCallApi()){_0x2450f4[_0x3861ed(0x167)][_0x3861ed(0x121)](_0x3861ed(0x171));return;}if(_0x2450f4[_0x3861ed(0x198)][_0x3861ed(0x14b)]===0x0)return;const _0x895859=_0x2450f4['eventHistory'][_0x3861ed(0x185)](0x0,0xf),_0x2e960c=_0x2450f4[_0x3861ed(0x118)],_0x1b7aa8=PERSONA_MAPPING[_0x2450f4[_0x3861ed(0x14a)][_0x3861ed(0x17a)]||_0x3861ed(0x184)],_0x21dfc6=_0x2450f4[_0x3861ed(0x14a)][_0x3861ed(0x150)]||'Keine\x20Details.';let _0x25058d=_0x3861ed(0x190);try{const _0xb3114e=await _0x2450f4[_0x3861ed(0x16e)]('system.presenceWho');if(_0xb3114e&&_0xb3114e[_0x3861ed(0x166)])_0x25058d=_0xb3114e[_0x3861ed(0x166)];}catch(_0x2f89ae){}let _0x49897b=![];try{const _0x36f6c3=await _0x2450f4['getStateAsync'](_0x3861ed(0x180));if(_0x36f6c3&&_0x36f6c3['val'])_0x49897b=!![];}catch(_0x46a3ca){}const _0x31b1=_0x3861ed(0x156)+_0x1b7aa8+_0x3861ed(0x11f)+_0x21dfc6+'.\x20SYSTEM_MODE:\x20'+_0x2e960c+_0x3861ed(0x149)+_0x25058d+_0x3861ed(0x173)+JSON[_0x3861ed(0x120)](_0x895859)+'.\x20EMERGENCY:\x20'+_0x4885db+_0x3861ed(0x110);try{updateApiTimestamp();const _0x5ac68d=await _0x2450f4[_0x3861ed(0x18a)][_0x3861ed(0x128)](_0x31b1),_0x205de=JSON[_0x3861ed(0x132)](_0x5ac68d[_0x3861ed(0x183)][_0x3861ed(0x162)]()[_0x3861ed(0x112)](/```json|```/g,'')[_0x3861ed(0x13b)]());await _0x2450f4['setStateAsync'](_0x3861ed(0x13f),{'val':JSON[_0x3861ed(0x120)](_0x205de),'ack':!![]});if(_0x205de[_0x3861ed(0x153)])await _0x2450f4[_0x3861ed(0x137)](_0x3861ed(0x11c),{'val':_0x205de[_0x3861ed(0x153)],'ack':!![]});const _0x4c93fb={'timestamp':Date[_0x3861ed(0x15f)](),'id':Date[_0x3861ed(0x15f)]()[_0x3861ed(0x131)](),'analysis':{'activity':{'summary':_0x205de['summary'],'isAlert':_0x205de[_0x3861ed(0x172)],'alertReason':_0x205de[_0x3861ed(0x158)]},'comfort':{'automationProposal':_0x205de[_0x3861ed(0x135)]}}};_0x2450f4[_0x3861ed(0x16d)][_0x3861ed(0x141)](_0x4c93fb);if(_0x2450f4[_0x3861ed(0x16d)][_0x3861ed(0x14b)]>0x32)_0x2450f4[_0x3861ed(0x16d)][_0x3861ed(0x13c)]();await _0x2450f4[_0x3861ed(0x137)](_0x3861ed(0x129),{'val':JSON['stringify'](_0x2450f4['analysisHistory']),'ack':!![]});const _0x58ad52=_0x205de['isAlert']||![];_0x58ad52!==_0x2450f4['lastAlertState']&&(await _0x2450f4[_0x3861ed(0x137)](_0x3861ed(0x17d),{'val':_0x58ad52,'ack':!![]}),_0x2450f4[_0x3861ed(0x196)]=_0x58ad52,_0x58ad52&&(await _0x2450f4['setStateAsync'](_0x3861ed(0x192),{'val':_0x205de[_0x3861ed(0x158)],'ack':!![]}),setup['sendNotification'](_0x2450f4,_0x3861ed(0x14c)+_0x205de[_0x3861ed(0x158)],![],_0x205de['isEmergency'])));if(_0x205de[_0x3861ed(0x135)]&&_0x205de[_0x3861ed(0x135)][_0x3861ed(0x169)]){await _0x2450f4[_0x3861ed(0x137)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x2450f4[_0x3861ed(0x137)](_0x3861ed(0x14f),{'val':_0x205de[_0x3861ed(0x135)]['description'],'ack':!![]}),await _0x2450f4['setStateAsync'](_0x3861ed(0x117),{'val':_0x205de[_0x3861ed(0x135)][_0x3861ed(0x197)],'ack':!![]}),await _0x2450f4[_0x3861ed(0x137)](_0x3861ed(0x193),{'val':JSON[_0x3861ed(0x120)](_0x205de[_0x3861ed(0x135)][_0x3861ed(0x115)]),'ack':!![]});if(_0x49897b)executeAutomationAction(_0x2450f4);}}catch(_0x3b2eb9){_0x2450f4['log'][_0x3861ed(0x12f)](_0x3861ed(0x176)+_0x3b2eb9[_0x3861ed(0x178)]);}}async function createDailyDigest(_0x4eec90,_0x52c017){const _0x29f072=a0_0x18f4d8;if(!_0x4eec90[_0x29f072(0x160)])return;if(!canCallApi()){await _0x4eec90[_0x29f072(0x137)](LTM_DP_STATUS,{'val':_0x29f072(0x143),'ack':!![]});return;}await _0x4eec90['setStateAsync'](LTM_DP_STATUS,{'val':_0x29f072(0x13a),'ack':!![]});if(!_0x4eec90['geminiModel']||_0x4eec90[_0x29f072(0x152)][_0x29f072(0x14b)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4eec90[_0x29f072(0x137)](LTM_DP_STATUS,{'val':_0x29f072(0x17c),'ack':!![]});return;}const _0x3ea43d=JSON[_0x29f072(0x132)](JSON[_0x29f072(0x120)](_0x4eec90[_0x29f072(0x152)])),_0x2d1ed4=_0x3ea43d['length'],_0x394275='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON['stringify'](_0x3ea43d);try{updateApiTimestamp();const _0x3897ca=await _0x4eec90[_0x29f072(0x18a)][_0x29f072(0x128)](_0x394275),_0x4a20cb=JSON['parse'](_0x3897ca['response'][_0x29f072(0x162)]()[_0x29f072(0x112)](/```json|```/g,'')[_0x29f072(0x13b)]()),_0x4300cb={'timestamp':new Date()[_0x29f072(0x11a)](),'eventCount':_0x2d1ed4,'summary':_0x4a20cb[_0x29f072(0x153)]||_0x29f072(0x133),'activityLevel':_0x4a20cb['activityLevel']||_0x29f072(0x123),'systemMode':_0x4eec90[_0x29f072(0x118)]};_0x4eec90[_0x29f072(0x124)][_0x29f072(0x165)](_0x4300cb);const _0x2ce199=_0x4eec90[_0x29f072(0x14a)][_0x29f072(0x17b)]||0x3c;_0x4eec90['dailyDigests']['length']>_0x2ce199&&_0x4eec90[_0x29f072(0x124)][_0x29f072(0x146)](0x0,_0x4eec90[_0x29f072(0x124)]['length']-_0x2ce199);await _0x4eec90[_0x29f072(0x137)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x29f072(0x120)](_0x4eec90['dailyDigests']),'ack':!![]}),_0x4eec90[_0x29f072(0x152)]=[],await _0x4eec90[_0x29f072(0x137)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x4eec90[_0x29f072(0x152)]),'ack':!![]}),await _0x4eec90[_0x29f072(0x137)](LTM_DP_STATUS,{'val':_0x29f072(0x15e),'ack':!![]});if(_0x4eec90['isProVersion']&&_0x52c017)_0x52c017[_0x29f072(0x134)](_0x4eec90,'ANALYZE_HEALTH',{'digest':_0x4300cb});}catch(_0x43e991){_0x4eec90[_0x29f072(0x167)][_0x29f072(0x12f)](_0x43e991[_0x29f072(0x178)]);}}async function runBaselineDriftAnalysis(_0x4c7671){const _0x20e69d=a0_0x18f4d8;if(!_0x4c7671[_0x20e69d(0x160)]||!_0x4c7671[_0x20e69d(0x18a)])return;if(!canCallApi())return;const _0x2d1cdd=_0x4c7671[_0x20e69d(0x14a)]['ltmStbWindowDays']||0xe;if(_0x4c7671[_0x20e69d(0x124)][_0x20e69d(0x14b)]<_0x2d1cdd+0x7){await _0x4c7671[_0x20e69d(0x137)](_0x20e69d(0x177),{'val':_0x20e69d(0x130),'ack':!![]});return;}const _0x366fc1=_0x4c7671[_0x20e69d(0x124)]['slice'](-_0x2d1cdd),_0x22f173=_0x4c7671[_0x20e69d(0x124)]['slice'](0x0,_0x4c7671[_0x20e69d(0x124)][_0x20e69d(0x14b)]-_0x2d1cdd),_0x5de3fe='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x20e69d(0x120)](_0x22f173)+_0x20e69d(0x127)+JSON['stringify'](_0x366fc1);try{updateApiTimestamp();const _0x258ad3=await _0x4c7671['geminiModel']['generateContent'](_0x5de3fe),_0x25396f=JSON['parse'](_0x258ad3[_0x20e69d(0x183)][_0x20e69d(0x162)]()['replace'](/```json|```/g,'')[_0x20e69d(0x13b)]());_0x25396f[_0x20e69d(0x168)]&&(await _0x4c7671['setStateAsync'](_0x20e69d(0x177),{'val':_0x25396f[_0x20e69d(0x168)],'ack':!![]}),await _0x4c7671[_0x20e69d(0x137)](_0x20e69d(0x16b),{'val':_0x25396f['driftDetails'],'ack':!![]}),await _0x4c7671[_0x20e69d(0x137)](_0x20e69d(0x11d),{'val':Date[_0x20e69d(0x15f)](),'ack':!![]}));}catch(_0x35106a){}}async function executeAutomationAction(_0x3f2102){const _0x322b59=a0_0x18f4d8;try{const _0xab8d42=await _0x3f2102[_0x322b59(0x16e)](_0x322b59(0x117)),_0x213dfb=await _0x3f2102['getStateAsync']('analysis.automation.targetValue');if(_0xab8d42&&_0xab8d42[_0x322b59(0x166)]&&_0x213dfb){const _0x42eb92=_0xab8d42[_0x322b59(0x166)];let _0x2b54be=_0x213dfb['val'];try{_0x2b54be=JSON['parse'](_0x2b54be);}catch(_0x4b99d6){}_0x3f2102['log']['info'](_0x322b59(0x191)+_0x42eb92+_0x322b59(0x195)+_0x2b54be),await _0x3f2102[_0x322b59(0x18c)](_0x42eb92,_0x2b54be);}else _0x3f2102[_0x322b59(0x167)][_0x322b59(0x15d)](_0x322b59(0x161));}catch(_0x13a63c){_0x3f2102[_0x322b59(0x167)][_0x322b59(0x12f)]('BUTLER\x20Execution\x20Error:\x20'+_0x13a63c[_0x322b59(0x178)]);}}async function sendMorningBriefing(_0x2662e6){const _0x17b2cf=a0_0x18f4d8;if(!_0x2662e6[_0x17b2cf(0x18a)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x4a82f5='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x4a77ce=await _0x2662e6['geminiModel'][_0x17b2cf(0x128)](_0x4a82f5),_0x323d35=_0x4a77ce[_0x17b2cf(0x183)]['text']();setup[_0x17b2cf(0x17e)](_0x2662e6,_0x17b2cf(0x122)+_0x323d35);}catch(_0x3c2912){_0x2662e6[_0x17b2cf(0x167)][_0x17b2cf(0x12f)](_0x17b2cf(0x18e)+_0x3c2912[_0x17b2cf(0x178)]);}}module[a0_0x18f4d8(0x111)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};