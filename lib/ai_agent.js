const a0_0x2a3b40=a0_0x1840;(function(_0x29aa19,_0x7580e8){const _0x52d396=a0_0x1840,_0x5d71d1=_0x29aa19();while(!![]){try{const _0x1addbb=parseInt(_0x52d396(0x1ad))/0x1*(-parseInt(_0x52d396(0x1b8))/0x2)+-parseInt(_0x52d396(0x1f7))/0x3+parseInt(_0x52d396(0x1ba))/0x4+-parseInt(_0x52d396(0x1ed))/0x5*(-parseInt(_0x52d396(0x1b9))/0x6)+-parseInt(_0x52d396(0x206))/0x7+parseInt(_0x52d396(0x1a0))/0x8*(parseInt(_0x52d396(0x21e))/0x9)+-parseInt(_0x52d396(0x1d9))/0xa*(-parseInt(_0x52d396(0x198))/0xb);if(_0x1addbb===_0x7580e8)break;else _0x5d71d1['push'](_0x5d71d1['shift']());}catch(_0x459252){_0x5d71d1['push'](_0x5d71d1['shift']());}}}(a0_0x4138,0xa69b0));const a0_0x2376f5=(function(){let _0x5879ab=!![];return function(_0x210c0b,_0x3f4ef1){const _0x13d880=_0x5879ab?function(){const _0x28c0f6=a0_0x1840;if(_0x3f4ef1){const _0x2856bd=_0x3f4ef1[_0x28c0f6(0x1c2)](_0x210c0b,arguments);return _0x3f4ef1=null,_0x2856bd;}}:function(){};return _0x5879ab=![],_0x13d880;};}()),a0_0x1c6efd=a0_0x2376f5(this,function(){const _0x2f2696=a0_0x1840;return a0_0x1c6efd[_0x2f2696(0x201)]()[_0x2f2696(0x1db)]('(((.+)+)+)+$')[_0x2f2696(0x201)]()['constructor'](a0_0x1c6efd)[_0x2f2696(0x1db)](_0x2f2696(0x1fe));});a0_0x1c6efd();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require(a0_0x2a3b40(0x209)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x2a3b40(0x1fa),LTM_DP_STATUS=a0_0x2a3b40(0x1bb),LTM_DP_RAW_LOG=a0_0x2a3b40(0x1ce),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x2a3b40(0x20e),'senior_aal':a0_0x2a3b40(0x1cd),'family':a0_0x2a3b40(0x214),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x2a3b40(0x200)};function canCallApi(){const _0x2e6759=a0_0x2a3b40,_0x21272e=Date[_0x2e6759(0x1e5)]();return _0x21272e-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x4ac152=a0_0x2a3b40;lastGlobalApiCall=Date[_0x4ac152(0x1e5)]();}function a0_0x4138(){const _0x47abc9=['aiPersona','.\x20SYSTEM_MODE:\x20','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','\x0aSTB:\x20','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','analysisHistory','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22',',\x20LichtverhÃ¤ltnisse:\x20','config','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','analysis.automation.patternDetected','Gemini\x20Error:\x20','117ytDcnh','log','Unbekannt\x20(Kein\x20Sensor)','stringify','parse','approved','dailyDigests','analysis.automation.targetId','analysis.analysisHistory','.\x20EVENTS:\x20','473HMtJJw','isProVersion','Digest','Started...','info','activityLevel','analysis.automation.targetValue','generateContent','79136qslDsh','KI-Fehler\x20(Fallback)','targetValue','setStateAsync','automationProposal','\x20->\x20','analysis.alertReason','normal','.forecast.current.temperature','generic','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','rawEventLog','useWeather','18351SMRZKX','Briefing\x20Error:\x20','exports','LTM.driftAnalysis.driftDetails','lastAlertState','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','eventHistory',').\x20Sending\x20notification...','geminiModel','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','unshift','114GcLtxX','12bufJGR','1521624vUrhEt','LTM.processingStatus','ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','driftDetails','length','getForeignStateAsync','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','reason','apply','timestamp','Tag','\x20=\x20','isEmergency','getStateAsync','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','summary','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','livingContext','alertReason','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','LTM.rawEventLog','text','slice','.\x20KONTEXT:\x20','debug','Success','currentSystemMode','sendNotification','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','\x0aAktivitÃ¤t:\x20','error','525270yzxbaC','val','search','replace','detected','.Current.WeatherText','baselineDrift','BUTLER\x20Execution\x20Error:\x20','decision','âš ï¸\x20ALARM:\x20','KI\x20offline\x20(Fallback)','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','now','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','.Current.Temperature','analysis.isAlert','isAlert','.\x20EMERGENCY:\x20','trim','ANALYZE_HEALTH','3087730yNkImP','pop','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','.forecast.current.state','ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20','.Current.IsNight','ðŸ“…\x20Daily\x20Digest:\x0a','analysis.automation.description','Keine\x20Details.','Skipped\x20(Traffic)','3218325sFiyRU','system.presenceWho','LTM.driftAnalysis.lastCheck','LTM.dailyDigests','description','LTM.driftAnalysis.baselineDrift','analysis.activitySummary','(((.+)+)+)+$','send','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','toString','Unbekannt','response','toFixed',',\x20Wetter:\x20','8410899PlQMTd','weatherInstance','toISOString','./setup','Traffic-Schutz\x20(Auto-Approved)','ðŸŒ…\x20Morning\x20Briefing:\x0a','warn','Skipped\x20(No\x20AI\x20or\x20Data)','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','toLocaleTimeString','message','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'];a0_0x4138=function(){return _0x47abc9;};return a0_0x4138();}async function getWeatherContext(_0x2299d){const _0x3dfb95=a0_0x2a3b40;if(!_0x2299d['config'][_0x3dfb95(0x1ac)]||!_0x2299d[_0x3dfb95(0x21a)]['weatherInstance'])return _0x3dfb95(0x220);try{const _0x41e1a0=_0x2299d[_0x3dfb95(0x21a)][_0x3dfb95(0x207)];let _0x5ca2b8=await _0x2299d[_0x3dfb95(0x1bf)](_0x41e1a0+_0x3dfb95(0x1e7));if(!_0x5ca2b8)_0x5ca2b8=await _0x2299d[_0x3dfb95(0x1bf)](_0x41e1a0+_0x3dfb95(0x1a8));let _0x694f41=await _0x2299d[_0x3dfb95(0x1bf)](_0x41e1a0+_0x3dfb95(0x1de));if(!_0x694f41)_0x694f41=await _0x2299d['getForeignStateAsync'](_0x41e1a0+_0x3dfb95(0x1f0));let _0x405d1a=_0x3dfb95(0x202);const _0x307ce1=await _0x2299d['getForeignStateAsync'](_0x41e1a0+_0x3dfb95(0x1f2));if(_0x307ce1)_0x405d1a=_0x307ce1[_0x3dfb95(0x1da)]?'Nacht':_0x3dfb95(0x1c4);if(_0x5ca2b8&&_0x694f41)return _0x5ca2b8[_0x3dfb95(0x1da)]+'Â°C,\x20'+_0x694f41[_0x3dfb95(0x1da)]+_0x3dfb95(0x219)+_0x405d1a;}catch(_0x4e61ba){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0xe5d4ce,_0x16d5f2,_0x31ddf6,_0x2693bd){const _0x5e8473=a0_0x2a3b40;if(!_0xe5d4ce[_0x5e8473(0x1b5)])return{'approved':!![],'reason':_0x5e8473(0x1e3)};const _0x5f24c8=Date[_0x5e8473(0x1e5)]();if(decisionCache[_0x16d5f2]&&_0x5f24c8-decisionCache[_0x16d5f2][_0x5e8473(0x1c3)]<CACHE_TTL_MS){const _0x3a367c=decisionCache[_0x16d5f2][_0x5e8473(0x1e1)];return _0xe5d4ce['log'][_0x5e8473(0x1d2)](_0x5e8473(0x1e6)+_0x16d5f2+_0x5e8473(0x1a5)+(_0x3a367c[_0x5e8473(0x223)]?'OK':'NO')+'\x20('+_0x3a367c[_0x5e8473(0x1c1)]+')'),_0x3a367c;}if(!canCallApi())return _0xe5d4ce[_0x5e8473(0x21f)][_0x5e8473(0x1d2)](_0x5e8473(0x216)+_0x16d5f2+'\x20Ã¼bersprungen\x20(Auto-Approved).'),{'approved':!![],'reason':_0x5e8473(0x20a)};const _0x15af21=new Date()[_0x5e8473(0x20f)](),_0x26dff4=await getWeatherContext(_0xe5d4ce),_0x5020fd=PERSONA_MAPPING[_0xe5d4ce[_0x5e8473(0x21a)][_0x5e8473(0x212)]||_0x5e8473(0x1a9)],_0x17564c=_0x5e8473(0x1b2)+_0x15af21+_0x5e8473(0x205)+_0x26dff4+_0x5e8473(0x1aa)+(_0x2693bd*0x64)[_0x5e8473(0x204)](0x0)+'%)\x20nach\x20\x22'+_0x16d5f2+_0x5e8473(0x218)+_0x31ddf6+_0x5e8473(0x21b)+_0x5020fd+_0x5e8473(0x1d6);try{updateApiTimestamp();const _0x4a4905=await _0xe5d4ce[_0x5e8473(0x1b5)][_0x5e8473(0x19f)](_0x17564c),_0x330f0b=_0x4a4905[_0x5e8473(0x203)][_0x5e8473(0x1cf)]()['replace'](/```json|```/g,'')[_0x5e8473(0x1eb)](),_0x26bc6d=JSON[_0x5e8473(0x222)](_0x330f0b);return decisionCache[_0x16d5f2]={'decision':_0x26bc6d,'timestamp':_0x5f24c8},_0x26bc6d;}catch(_0x121ce8){return _0xe5d4ce['log'][_0x5e8473(0x20c)](_0x5e8473(0x1ca)+_0x121ce8['message']),decisionCache[_0x16d5f2]={'decision':{'approved':!![],'reason':_0x5e8473(0x1a1)},'timestamp':_0x5f24c8-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x182e17,_0x51776d=''){const _0x5b9d92=a0_0x2a3b40;if(!_0x182e17[_0x5b9d92(0x1b5)])return;if(!canCallApi()){_0x182e17[_0x5b9d92(0x21f)][_0x5b9d92(0x1d2)](_0x5b9d92(0x1c0));return;}if(_0x182e17[_0x5b9d92(0x1b3)][_0x5b9d92(0x1be)]===0x0)return;const _0x5eb2ab=_0x182e17[_0x5b9d92(0x1b3)]['slice'](0x0,0xf),_0x160b38=_0x182e17[_0x5b9d92(0x1d4)],_0x11a83b=PERSONA_MAPPING[_0x182e17[_0x5b9d92(0x21a)][_0x5b9d92(0x212)]||_0x5b9d92(0x1a9)],_0x385bc1=_0x182e17['config'][_0x5b9d92(0x1cb)]||_0x5b9d92(0x1f5);let _0x427f16='Unbekannt';try{const _0x14907a=await _0x182e17[_0x5b9d92(0x1c7)](_0x5b9d92(0x1f8));if(_0x14907a&&_0x14907a[_0x5b9d92(0x1da)])_0x427f16=_0x14907a[_0x5b9d92(0x1da)];}catch(_0x2f157b){}let _0x2fdd4b=![];try{const _0x3b676d=await _0x182e17[_0x5b9d92(0x1c7)]('analysis.automation.autoApply');if(_0x3b676d&&_0x3b676d[_0x5b9d92(0x1da)])_0x2fdd4b=!![];}catch(_0x25e359){}const _0x1a6168=_0x5b9d92(0x1b6)+_0x11a83b+_0x5b9d92(0x1d1)+_0x385bc1+_0x5b9d92(0x213)+_0x160b38+'.\x20ANWESEND:\x20'+_0x427f16+_0x5b9d92(0x197)+JSON['stringify'](_0x5eb2ab)+_0x5b9d92(0x1ea)+_0x51776d+_0x5b9d92(0x1ef);try{updateApiTimestamp();const _0x5b2257=await _0x182e17[_0x5b9d92(0x1b5)]['generateContent'](_0x1a6168),_0x1ad548=JSON[_0x5b9d92(0x222)](_0x5b2257['response']['text']()['replace'](/```json|```/g,'')[_0x5b9d92(0x1eb)]());await _0x182e17[_0x5b9d92(0x1a3)]('analysis.lastResult',{'val':JSON[_0x5b9d92(0x221)](_0x1ad548),'ack':!![]});if(_0x1ad548[_0x5b9d92(0x1c9)])await _0x182e17[_0x5b9d92(0x1a3)](_0x5b9d92(0x1fd),{'val':_0x1ad548[_0x5b9d92(0x1c9)],'ack':!![]});const _0x5e895d={'timestamp':Date[_0x5b9d92(0x1e5)](),'id':Date[_0x5b9d92(0x1e5)]()[_0x5b9d92(0x201)](),'analysis':{'activity':{'summary':_0x1ad548[_0x5b9d92(0x1c9)],'isAlert':_0x1ad548[_0x5b9d92(0x1e9)],'alertReason':_0x1ad548[_0x5b9d92(0x1cc)]},'comfort':{'automationProposal':_0x1ad548[_0x5b9d92(0x1a4)]}}};_0x182e17[_0x5b9d92(0x217)][_0x5b9d92(0x1b7)](_0x5e895d);if(_0x182e17[_0x5b9d92(0x217)]['length']>0x32)_0x182e17[_0x5b9d92(0x217)][_0x5b9d92(0x1ee)]();await _0x182e17[_0x5b9d92(0x1a3)](_0x5b9d92(0x196),{'val':JSON[_0x5b9d92(0x221)](_0x182e17[_0x5b9d92(0x217)]),'ack':!![]});const _0x4029a1=_0x1ad548[_0x5b9d92(0x1e9)]||![];_0x4029a1!==_0x182e17[_0x5b9d92(0x1b1)]&&(await _0x182e17[_0x5b9d92(0x1a3)](_0x5b9d92(0x1e8),{'val':_0x4029a1,'ack':!![]}),_0x182e17[_0x5b9d92(0x1b1)]=_0x4029a1,_0x4029a1&&(await _0x182e17[_0x5b9d92(0x1a3)](_0x5b9d92(0x1a6),{'val':_0x1ad548[_0x5b9d92(0x1cc)],'ack':!![]}),setup[_0x5b9d92(0x1d5)](_0x182e17,_0x5b9d92(0x1e2)+_0x1ad548[_0x5b9d92(0x1cc)],![],_0x1ad548[_0x5b9d92(0x1c6)])));if(_0x1ad548[_0x5b9d92(0x1a4)]&&_0x1ad548[_0x5b9d92(0x1a4)][_0x5b9d92(0x1dd)]){await _0x182e17[_0x5b9d92(0x1a3)](_0x5b9d92(0x21c),{'val':!![],'ack':!![]}),await _0x182e17[_0x5b9d92(0x1a3)](_0x5b9d92(0x1f4),{'val':_0x1ad548[_0x5b9d92(0x1a4)][_0x5b9d92(0x1fb)],'ack':!![]}),await _0x182e17[_0x5b9d92(0x1a3)]('analysis.automation.targetId',{'val':_0x1ad548['automationProposal']['targetId'],'ack':!![]}),await _0x182e17[_0x5b9d92(0x1a3)]('analysis.automation.targetValue',{'val':JSON['stringify'](_0x1ad548[_0x5b9d92(0x1a4)][_0x5b9d92(0x1a2)]),'ack':!![]});if(_0x2fdd4b)executeAutomationAction(_0x182e17);}}catch(_0x25d09c){_0x182e17[_0x5b9d92(0x21f)]['error'](_0x5b9d92(0x21d)+_0x25d09c['message']);}}async function createDailyDigest(_0x3fd1c2,_0x1cf210){const _0x1ed197=a0_0x2a3b40;if(!_0x3fd1c2[_0x1ed197(0x199)])return;if(!canCallApi()){await _0x3fd1c2['setStateAsync'](LTM_DP_STATUS,{'val':_0x1ed197(0x1f6),'ack':!![]});return;}await _0x3fd1c2['setStateAsync'](LTM_DP_STATUS,{'val':_0x1ed197(0x19b),'ack':!![]});if(!_0x3fd1c2[_0x1ed197(0x1b5)]||_0x3fd1c2[_0x1ed197(0x1ab)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x3fd1c2['setStateAsync'](LTM_DP_STATUS,{'val':_0x1ed197(0x20d),'ack':!![]});return;}const _0x462012=JSON['parse'](JSON['stringify'](_0x3fd1c2[_0x1ed197(0x1ab)])),_0xdcc9b5=_0x462012[_0x1ed197(0x1be)],_0x42c8d2=_0x1ed197(0x211)+JSON['stringify'](_0x462012);try{updateApiTimestamp();const _0x16a3db=await _0x3fd1c2[_0x1ed197(0x1b5)][_0x1ed197(0x19f)](_0x42c8d2),_0x14772f=JSON[_0x1ed197(0x222)](_0x16a3db[_0x1ed197(0x203)]['text']()[_0x1ed197(0x1dc)](/```json|```/g,'')[_0x1ed197(0x1eb)]()),_0x5000e9={'timestamp':new Date()[_0x1ed197(0x208)](),'eventCount':_0xdcc9b5,'summary':_0x14772f[_0x1ed197(0x1c9)]||_0x1ed197(0x19a),'activityLevel':_0x14772f[_0x1ed197(0x19d)]||_0x1ed197(0x1a7),'systemMode':_0x3fd1c2['currentSystemMode']};_0x3fd1c2[_0x1ed197(0x194)]['push'](_0x5000e9);const _0x5bf813=_0x3fd1c2[_0x1ed197(0x21a)]['ltmLtbWindowDays']||0x3c;_0x3fd1c2[_0x1ed197(0x194)][_0x1ed197(0x1be)]>_0x5bf813&&_0x3fd1c2['dailyDigests']['splice'](0x0,_0x3fd1c2['dailyDigests'][_0x1ed197(0x1be)]-_0x5bf813);await _0x3fd1c2['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x3fd1c2[_0x1ed197(0x194)]),'ack':!![]}),_0x3fd1c2[_0x1ed197(0x1ab)]=[],await _0x3fd1c2[_0x1ed197(0x1a3)](LTM_DP_RAW_LOG,{'val':JSON[_0x1ed197(0x221)](_0x3fd1c2['rawEventLog']),'ack':!![]}),await _0x3fd1c2[_0x1ed197(0x1a3)](LTM_DP_STATUS,{'val':_0x1ed197(0x1d3),'ack':!![]});const _0xa5b394=_0x1ed197(0x1f3)+_0x14772f['summary']+_0x1ed197(0x1d7)+_0x14772f['activityLevel'];setup['sendNotification'](_0x3fd1c2,_0xa5b394,![],![]);if(_0x3fd1c2['isProVersion']&&_0x1cf210)_0x1cf210[_0x1ed197(0x1ff)](_0x3fd1c2,_0x1ed197(0x1ec),{'digest':_0x5000e9});}catch(_0x3379a9){_0x3fd1c2[_0x1ed197(0x21f)][_0x1ed197(0x1d8)](_0x3379a9[_0x1ed197(0x210)]);}}async function runBaselineDriftAnalysis(_0x5f0245){const _0x561507=a0_0x2a3b40;if(!_0x5f0245['isProVersion']||!_0x5f0245[_0x561507(0x1b5)])return;if(!canCallApi())return;const _0x4348fa=_0x5f0245[_0x561507(0x21a)]['ltmStbWindowDays']||0xe;if(_0x5f0245[_0x561507(0x194)][_0x561507(0x1be)]<_0x4348fa+0x7){await _0x5f0245['setStateAsync'](_0x561507(0x1fc),{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x299354=_0x5f0245[_0x561507(0x194)][_0x561507(0x1d0)](-_0x4348fa),_0x251d0d=_0x5f0245[_0x561507(0x194)]['slice'](0x0,_0x5f0245[_0x561507(0x194)][_0x561507(0x1be)]-_0x4348fa),_0x542ab6='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON['stringify'](_0x251d0d)+_0x561507(0x215)+JSON[_0x561507(0x221)](_0x299354);try{updateApiTimestamp();const _0x1f5fc0=await _0x5f0245[_0x561507(0x1b5)][_0x561507(0x19f)](_0x542ab6),_0x9dc11f=JSON[_0x561507(0x222)](_0x1f5fc0[_0x561507(0x203)][_0x561507(0x1cf)]()[_0x561507(0x1dc)](/```json|```/g,'')[_0x561507(0x1eb)]());_0x9dc11f['baselineDrift']&&(await _0x5f0245[_0x561507(0x1a3)]('LTM.driftAnalysis.baselineDrift',{'val':_0x9dc11f[_0x561507(0x1df)],'ack':!![]}),await _0x5f0245['setStateAsync'](_0x561507(0x1b0),{'val':_0x9dc11f[_0x561507(0x1bd)],'ack':!![]}),await _0x5f0245[_0x561507(0x1a3)](_0x561507(0x1f9),{'val':Date[_0x561507(0x1e5)](),'ack':!![]}));}catch(_0x15c6a7){}}async function executeAutomationAction(_0x434c18){const _0x1620b5=a0_0x2a3b40;try{const _0x31ea85=await _0x434c18[_0x1620b5(0x1c7)](_0x1620b5(0x195)),_0x2f6353=await _0x434c18['getStateAsync'](_0x1620b5(0x19e));if(_0x31ea85&&_0x31ea85[_0x1620b5(0x1da)]&&_0x2f6353){const _0x2bf600=_0x31ea85[_0x1620b5(0x1da)];let _0x4ce2a0=_0x2f6353[_0x1620b5(0x1da)];try{_0x4ce2a0=JSON[_0x1620b5(0x222)](_0x4ce2a0);}catch(_0x422dd2){}_0x434c18[_0x1620b5(0x21f)][_0x1620b5(0x19c)](_0x1620b5(0x1e4)+_0x2bf600+_0x1620b5(0x1c5)+_0x4ce2a0),await _0x434c18['setForeignStateAsync'](_0x2bf600,_0x4ce2a0);}else _0x434c18[_0x1620b5(0x21f)][_0x1620b5(0x20c)](_0x1620b5(0x1c8));}catch(_0x424b3d){_0x434c18['log']['error'](_0x1620b5(0x1e0)+_0x424b3d[_0x1620b5(0x210)]);}}function a0_0x1840(_0x1c6c4c,_0x58eb46){const _0x486b92=a0_0x4138();return a0_0x1840=function(_0x1c6efd,_0x2376f5){_0x1c6efd=_0x1c6efd-0x194;let _0x4138a3=_0x486b92[_0x1c6efd];return _0x4138a3;},a0_0x1840(_0x1c6c4c,_0x58eb46);}async function sendMorningBriefing(_0x4bccef){const _0x2823bf=a0_0x2a3b40;if(!_0x4bccef[_0x2823bf(0x1b5)]){_0x4bccef[_0x2823bf(0x21f)][_0x2823bf(0x20c)](_0x2823bf(0x1bc));return;}_0x4bccef[_0x2823bf(0x21f)][_0x2823bf(0x19c)]('ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...');try{updateApiTimestamp();const _0xa3cbbb='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x3491b3=await _0x4bccef['geminiModel'][_0x2823bf(0x19f)](_0xa3cbbb),_0x203be0=_0x3491b3[_0x2823bf(0x203)][_0x2823bf(0x1cf)]();_0x4bccef[_0x2823bf(0x21f)][_0x2823bf(0x19c)](_0x2823bf(0x1f1)+_0x203be0[_0x2823bf(0x1be)]+_0x2823bf(0x1b4)),setup[_0x2823bf(0x1d5)](_0x4bccef,_0x2823bf(0x20b)+_0x203be0);}catch(_0x2058ee){_0x4bccef['log'][_0x2823bf(0x1d8)](_0x2823bf(0x1ae)+_0x2058ee[_0x2823bf(0x210)]);}}module[a0_0x2a3b40(0x1af)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};