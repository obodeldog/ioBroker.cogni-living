const a0_0x35eada=a0_0x3efc;(function(_0x34f116,_0xdcab47){const _0x4d267b=a0_0x3efc,_0x2a7442=_0x34f116();while(!![]){try{const _0x52a84c=parseInt(_0x4d267b(0x179))/0x1*(-parseInt(_0x4d267b(0x171))/0x2)+-parseInt(_0x4d267b(0x181))/0x3*(-parseInt(_0x4d267b(0x18e))/0x4)+parseInt(_0x4d267b(0x115))/0x5*(-parseInt(_0x4d267b(0x139))/0x6)+parseInt(_0x4d267b(0x15a))/0x7+-parseInt(_0x4d267b(0x14f))/0x8+parseInt(_0x4d267b(0x184))/0x9*(-parseInt(_0x4d267b(0x18c))/0xa)+-parseInt(_0x4d267b(0x19a))/0xb*(-parseInt(_0x4d267b(0x151))/0xc);if(_0x52a84c===_0xdcab47)break;else _0x2a7442['push'](_0x2a7442['shift']());}catch(_0x57823e){_0x2a7442['push'](_0x2a7442['shift']());}}}(a0_0x5d5f,0x7c2f5));const a0_0x10574c=(function(){let _0x4f1afc=!![];return function(_0x148bbb,_0x48f2aa){const _0x5aba9a=_0x4f1afc?function(){if(_0x48f2aa){const _0x62face=_0x48f2aa['apply'](_0x148bbb,arguments);return _0x48f2aa=null,_0x62face;}}:function(){};return _0x4f1afc=![],_0x5aba9a;};}()),a0_0x57be52=a0_0x10574c(this,function(){const _0x36ac5e=a0_0x3efc;return a0_0x57be52[_0x36ac5e(0x140)]()[_0x36ac5e(0x19c)](_0x36ac5e(0x17f))['toString']()['constructor'](a0_0x57be52)['search'](_0x36ac5e(0x17f));});a0_0x57be52();'use strict';function a0_0x3efc(_0xcf17ce,_0x522f86){const _0x1d8edf=a0_0x5d5f();return a0_0x3efc=function(_0x57be52,_0x10574c){_0x57be52=_0x57be52-0x112;let _0x5d5f7b=_0x1d8edf[_0x57be52];return _0x5d5f7b;},a0_0x3efc(_0xcf17ce,_0x522f86);}const {GoogleGenerativeAI}=require(a0_0x35eada(0x198)),setup=require(a0_0x35eada(0x167)),GEMINI_MODEL=a0_0x35eada(0x197),LTM_DP_DAILY_DIGESTS=a0_0x35eada(0x12f),LTM_DP_STATUS=a0_0x35eada(0x12c),LTM_DP_RAW_LOG=a0_0x35eada(0x119),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x35eada(0x130),'senior_aal':'PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':a0_0x35eada(0x126),'single_comfort':a0_0x35eada(0x17c),'security':a0_0x35eada(0x13f),'energy_saver':a0_0x35eada(0x16c)};function canCallApi(){const _0x14efc8=a0_0x35eada,_0xdb9fbd=Date[_0x14efc8(0x125)]();return _0xdb9fbd-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x2dc80e=a0_0x35eada;lastGlobalApiCall=Date[_0x2dc80e(0x125)]();}async function getWeatherContext(_0x8b660b){const _0x1c1a44=a0_0x35eada;if(!_0x8b660b[_0x1c1a44(0x152)]['useWeather']||!_0x8b660b[_0x1c1a44(0x152)]['weatherInstance'])return _0x1c1a44(0x156);try{const _0x30efd1=_0x8b660b[_0x1c1a44(0x152)][_0x1c1a44(0x123)];let _0xd5be2f=await _0x8b660b[_0x1c1a44(0x127)](_0x30efd1+_0x1c1a44(0x14a));if(!_0xd5be2f)_0xd5be2f=await _0x8b660b[_0x1c1a44(0x127)](_0x30efd1+'.forecast.current.temperature');let _0x126154=await _0x8b660b[_0x1c1a44(0x127)](_0x30efd1+_0x1c1a44(0x16d));if(!_0x126154)_0x126154=await _0x8b660b[_0x1c1a44(0x127)](_0x30efd1+_0x1c1a44(0x145));let _0x5a518c=_0x1c1a44(0x19d);const _0x4d1ee9=await _0x8b660b[_0x1c1a44(0x127)](_0x30efd1+_0x1c1a44(0x147));if(_0x4d1ee9)_0x5a518c=_0x4d1ee9['val']?_0x1c1a44(0x180):'Tag';if(_0xd5be2f&&_0x126154)return _0xd5be2f[_0x1c1a44(0x160)]+'Â°C,\x20'+_0x126154[_0x1c1a44(0x160)]+',\x20LichtverhÃ¤ltnisse:\x20'+_0x5a518c;}catch(_0x584491){}return _0x1c1a44(0x16b);}async function consultButler(_0x44bf2d,_0x4f02b7,_0x56bdf6,_0x36ef32){const _0x43508e=a0_0x35eada;if(!_0x44bf2d[_0x43508e(0x18f)])return{'approved':!![],'reason':_0x43508e(0x141)};const _0x4b3067=Date['now']();if(decisionCache[_0x4f02b7]&&_0x4b3067-decisionCache[_0x4f02b7][_0x43508e(0x172)]<CACHE_TTL_MS){const _0x432e5a=decisionCache[_0x4f02b7]['decision'];return _0x44bf2d[_0x43508e(0x173)][_0x43508e(0x158)](_0x43508e(0x154)+_0x4f02b7+_0x43508e(0x146)+(_0x432e5a['approved']?'OK':'NO')+'\x20('+_0x432e5a[_0x43508e(0x186)]+')'),_0x432e5a;}if(!canCallApi())return _0x44bf2d['log']['debug'](_0x43508e(0x128)+_0x4f02b7+_0x43508e(0x163)),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x51d460=new Date()[_0x43508e(0x13a)](),_0x1feef6=await getWeatherContext(_0x44bf2d),_0x1eb416=PERSONA_MAPPING[_0x44bf2d[_0x43508e(0x152)][_0x43508e(0x112)]||_0x43508e(0x13d)],_0x4f251c=_0x43508e(0x12a)+_0x51d460+',\x20Wetter:\x20'+_0x1feef6+_0x43508e(0x12b)+(_0x36ef32*0x64)[_0x43508e(0x131)](0x0)+_0x43508e(0x189)+_0x4f02b7+_0x43508e(0x124)+_0x56bdf6+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x1eb416+_0x43508e(0x116);try{updateApiTimestamp();const _0x1a44c5=await _0x44bf2d['geminiModel'][_0x43508e(0x199)](_0x4f251c),_0x43add9=_0x1a44c5['response'][_0x43508e(0x113)]()[_0x43508e(0x17e)](/```json|```/g,'')[_0x43508e(0x138)](),_0x428050=JSON[_0x43508e(0x133)](_0x43add9);return decisionCache[_0x4f02b7]={'decision':_0x428050,'timestamp':_0x4b3067},_0x428050;}catch(_0x2ce8b2){return _0x44bf2d[_0x43508e(0x173)][_0x43508e(0x183)]('ðŸ¤–\x20Butler\x20Brain\x20Error:\x20'+_0x2ce8b2[_0x43508e(0x17b)]),decisionCache[_0x4f02b7]={'decision':{'approved':!![],'reason':_0x43508e(0x11e)},'timestamp':_0x4b3067-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x43508e(0x11e)};}}async function runGeminiAnalysis(_0x3388fb,_0x4caa46=''){const _0x4075e2=a0_0x35eada;if(!_0x3388fb[_0x4075e2(0x18f)])return;if(!canCallApi()){_0x3388fb[_0x4075e2(0x173)][_0x4075e2(0x158)](_0x4075e2(0x161));return;}if(_0x3388fb[_0x4075e2(0x117)][_0x4075e2(0x164)]===0x0)return;const _0x57aaad=_0x3388fb[_0x4075e2(0x117)][_0x4075e2(0x170)](0x0,0xf),_0x49740e=_0x3388fb['currentSystemMode'],_0x2cf812=PERSONA_MAPPING[_0x3388fb[_0x4075e2(0x152)]['aiPersona']||_0x4075e2(0x13d)],_0x3880fa=_0x3388fb[_0x4075e2(0x152)][_0x4075e2(0x129)]||_0x4075e2(0x143);let _0xe5e639='Unbekannt';try{const _0x355b4f=await _0x3388fb[_0x4075e2(0x169)](_0x4075e2(0x159));if(_0x355b4f&&_0x355b4f[_0x4075e2(0x160)])_0xe5e639=_0x355b4f['val'];}catch(_0x211558){}let _0x53b93b=![];try{const _0x39c7d8=await _0x3388fb[_0x4075e2(0x169)](_0x4075e2(0x19b));if(_0x39c7d8&&_0x39c7d8[_0x4075e2(0x160)])_0x53b93b=!![];}catch(_0x334258){}const _0x258c48=_0x4075e2(0x182)+_0x2cf812+_0x4075e2(0x168)+_0x3880fa+'.\x20SYSTEM_MODE:\x20'+_0x49740e+_0x4075e2(0x14d)+_0xe5e639+_0x4075e2(0x155)+JSON[_0x4075e2(0x177)](_0x57aaad)+_0x4075e2(0x15c)+_0x4caa46+_0x4075e2(0x142);try{updateApiTimestamp();const _0x2c3b01=await _0x3388fb[_0x4075e2(0x18f)][_0x4075e2(0x199)](_0x258c48),_0x1a04cc=JSON['parse'](_0x2c3b01[_0x4075e2(0x16a)][_0x4075e2(0x113)]()['replace'](/```json|```/g,'')[_0x4075e2(0x138)]());await _0x3388fb[_0x4075e2(0x162)](_0x4075e2(0x15e),{'val':JSON[_0x4075e2(0x177)](_0x1a04cc),'ack':!![]});if(_0x1a04cc['summary'])await _0x3388fb[_0x4075e2(0x162)](_0x4075e2(0x15f),{'val':_0x1a04cc[_0x4075e2(0x157)],'ack':!![]});const _0xf796df={'timestamp':Date[_0x4075e2(0x125)](),'id':Date[_0x4075e2(0x125)]()['toString'](),'analysis':{'activity':{'summary':_0x1a04cc[_0x4075e2(0x157)],'isAlert':_0x1a04cc[_0x4075e2(0x15d)],'alertReason':_0x1a04cc['alertReason']},'comfort':{'automationProposal':_0x1a04cc[_0x4075e2(0x13c)]}}};_0x3388fb[_0x4075e2(0x195)][_0x4075e2(0x12e)](_0xf796df);if(_0x3388fb[_0x4075e2(0x195)]['length']>0x32)_0x3388fb[_0x4075e2(0x195)][_0x4075e2(0x11c)]();await _0x3388fb[_0x4075e2(0x162)]('analysis.analysisHistory',{'val':JSON[_0x4075e2(0x177)](_0x3388fb[_0x4075e2(0x195)]),'ack':!![]});const _0x12e548=_0x1a04cc[_0x4075e2(0x15d)]||![];_0x12e548!==_0x3388fb[_0x4075e2(0x144)]&&(await _0x3388fb[_0x4075e2(0x162)]('analysis.isAlert',{'val':_0x12e548,'ack':!![]}),_0x3388fb[_0x4075e2(0x144)]=_0x12e548,_0x12e548&&(await _0x3388fb[_0x4075e2(0x162)](_0x4075e2(0x14e),{'val':_0x1a04cc[_0x4075e2(0x148)],'ack':!![]}),setup[_0x4075e2(0x153)](_0x3388fb,'âš ï¸\x20ALARM:\x20'+_0x1a04cc[_0x4075e2(0x148)],![],_0x1a04cc[_0x4075e2(0x16f)])));if(_0x1a04cc['automationProposal']&&_0x1a04cc[_0x4075e2(0x13c)]['detected']){await _0x3388fb[_0x4075e2(0x162)](_0x4075e2(0x11d),{'val':!![],'ack':!![]}),await _0x3388fb[_0x4075e2(0x162)](_0x4075e2(0x13e),{'val':_0x1a04cc['automationProposal'][_0x4075e2(0x166)],'ack':!![]}),await _0x3388fb[_0x4075e2(0x162)](_0x4075e2(0x13b),{'val':_0x1a04cc[_0x4075e2(0x13c)][_0x4075e2(0x18d)],'ack':!![]}),await _0x3388fb[_0x4075e2(0x162)](_0x4075e2(0x14c),{'val':JSON[_0x4075e2(0x177)](_0x1a04cc[_0x4075e2(0x13c)][_0x4075e2(0x121)]),'ack':!![]});if(_0x53b93b)executeAutomationAction(_0x3388fb);}}catch(_0x46512b){_0x3388fb[_0x4075e2(0x173)]['error']('Gemini\x20Error:\x20'+_0x46512b[_0x4075e2(0x17b)]);}}function a0_0x5d5f(){const _0x19e1dc=['automationProposal','generic','analysis.automation.description','Sicherheit\x20geht\x20vor.','toString','KI\x20offline\x20(Fallback)','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','Keine\x20Details.','lastAlertState','.forecast.current.state','\x20->\x20','.Current.IsNight','alertReason','exports','.Current.Temperature','ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','analysis.automation.targetValue','.\x20ANWESEND:\x20','analysis.alertReason','2296080HLtXcX','splice','25358004URzLCM','config','sendNotification','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','.\x20EVENTS:\x20','Unbekannt\x20(Kein\x20Sensor)','summary','debug','system.presenceWho','3547698qFZwSB','Started...','.\x20EMERGENCY:\x20','isAlert','analysis.lastResult','analysis.activitySummary','val','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','setStateAsync','\x20Ã¼bersprungen\x20(Auto-Approved).','length','ANALYZE_HEALTH','description','./setup','.\x20KONTEXT:\x20','getStateAsync','response','Wetterdaten\x20nicht\x20abrufbar','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','.Current.WeatherText','toISOString','isEmergency','slice','872PYFBYd','timestamp','log','send','isProVersion','normal','stringify','error','2039EZkHsO','Skipped\x20(Traffic)','message','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','driftDetails','replace','(((.+)+)+)+$','Nacht','637647yyfJHR','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','warn','3923613pYczGt','\x0aSTB:\x20','reason','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','%)\x20nach\x20\x22','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','currentSystemMode','10ntapab','targetId','4wJBwHH','geminiModel','Skipped\x20(No\x20AI\x20or\x20Data)',').\x20Sending\x20notification...','ðŸŒ…\x20Morning\x20Briefing:\x0a','baselineDrift','activityLevel','analysisHistory','ltmLtbWindowDays','models/gemini-flash-latest','@google/generative-ai','generateContent','11gRitPn','analysis.automation.autoApply','search','Unbekannt','aiPersona','text','ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20','1779745xtHmSd','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','eventHistory','setForeignStateAsync','LTM.rawEventLog','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','LTM.driftAnalysis.baselineDrift','pop','analysis.automation.patternDetected','KI-Fehler\x20(Fallback)','rawEventLog','ltmStbWindowDays','targetValue','LTM.driftAnalysis.lastCheck','weatherInstance','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','now','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','getForeignStateAsync','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','livingContext','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','LTM.processingStatus','info','unshift','LTM.dailyDigests','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','toFixed','LTM.driftAnalysis.driftDetails','parse','BUTLER\x20Execution\x20Error:\x20','dailyDigests','N/A\x20(Learning)','ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','trim','12nOTZgF','toLocaleTimeString','analysis.automation.targetId'];a0_0x5d5f=function(){return _0x19e1dc;};return a0_0x5d5f();}async function createDailyDigest(_0x4b807e,_0x2c79d9){const _0x5e69f5=a0_0x35eada;if(!_0x4b807e[_0x5e69f5(0x175)])return;if(!canCallApi()){await _0x4b807e[_0x5e69f5(0x162)](LTM_DP_STATUS,{'val':_0x5e69f5(0x17a),'ack':!![]});return;}await _0x4b807e['setStateAsync'](LTM_DP_STATUS,{'val':_0x5e69f5(0x15b),'ack':!![]});if(!_0x4b807e[_0x5e69f5(0x18f)]||_0x4b807e[_0x5e69f5(0x11f)][_0x5e69f5(0x164)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4b807e[_0x5e69f5(0x162)](LTM_DP_STATUS,{'val':_0x5e69f5(0x190),'ack':!![]});return;}const _0x1a426a=JSON[_0x5e69f5(0x133)](JSON['stringify'](_0x4b807e[_0x5e69f5(0x11f)])),_0x1736ec=_0x1a426a[_0x5e69f5(0x164)],_0x55cd16=_0x5e69f5(0x187)+JSON[_0x5e69f5(0x177)](_0x1a426a);try{updateApiTimestamp();const _0x24bc59=await _0x4b807e[_0x5e69f5(0x18f)]['generateContent'](_0x55cd16),_0x553526=JSON[_0x5e69f5(0x133)](_0x24bc59[_0x5e69f5(0x16a)]['text']()[_0x5e69f5(0x17e)](/```json|```/g,'')['trim']()),_0x18073a={'timestamp':new Date()[_0x5e69f5(0x16e)](),'eventCount':_0x1736ec,'summary':_0x553526[_0x5e69f5(0x157)]||'Digest','activityLevel':_0x553526[_0x5e69f5(0x194)]||_0x5e69f5(0x176),'systemMode':_0x4b807e[_0x5e69f5(0x18b)]};_0x4b807e[_0x5e69f5(0x135)]['push'](_0x18073a);const _0x57c172=_0x4b807e['config'][_0x5e69f5(0x196)]||0x3c;_0x4b807e[_0x5e69f5(0x135)]['length']>_0x57c172&&_0x4b807e[_0x5e69f5(0x135)][_0x5e69f5(0x150)](0x0,_0x4b807e['dailyDigests'][_0x5e69f5(0x164)]-_0x57c172);await _0x4b807e[_0x5e69f5(0x162)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x5e69f5(0x177)](_0x4b807e[_0x5e69f5(0x135)]),'ack':!![]}),_0x4b807e[_0x5e69f5(0x11f)]=[],await _0x4b807e[_0x5e69f5(0x162)](LTM_DP_RAW_LOG,{'val':JSON[_0x5e69f5(0x177)](_0x4b807e[_0x5e69f5(0x11f)]),'ack':!![]}),await _0x4b807e[_0x5e69f5(0x162)](LTM_DP_STATUS,{'val':'Success','ack':!![]});const _0x34a1f7='ðŸ“…\x20Daily\x20Digest:\x0a'+_0x553526[_0x5e69f5(0x157)]+'\x0aAktivitÃ¤t:\x20'+_0x553526[_0x5e69f5(0x194)];setup[_0x5e69f5(0x153)](_0x4b807e,_0x34a1f7,![],![]);if(_0x4b807e[_0x5e69f5(0x175)]&&_0x2c79d9)_0x2c79d9[_0x5e69f5(0x174)](_0x4b807e,_0x5e69f5(0x165),{'digest':_0x18073a});}catch(_0x38c555){_0x4b807e[_0x5e69f5(0x173)][_0x5e69f5(0x178)](_0x38c555[_0x5e69f5(0x17b)]);}}async function runBaselineDriftAnalysis(_0x191ffb){const _0x5d8706=a0_0x35eada;if(!_0x191ffb[_0x5d8706(0x175)]||!_0x191ffb['geminiModel'])return;if(!canCallApi())return;const _0x39cbc6=_0x191ffb[_0x5d8706(0x152)][_0x5d8706(0x120)]||0xe;if(_0x191ffb[_0x5d8706(0x135)][_0x5d8706(0x164)]<_0x39cbc6+0x7){await _0x191ffb[_0x5d8706(0x162)](_0x5d8706(0x11b),{'val':_0x5d8706(0x136),'ack':!![]});return;}const _0x3598a8=_0x191ffb[_0x5d8706(0x135)][_0x5d8706(0x170)](-_0x39cbc6),_0x3d40e6=_0x191ffb[_0x5d8706(0x135)][_0x5d8706(0x170)](0x0,_0x191ffb[_0x5d8706(0x135)][_0x5d8706(0x164)]-_0x39cbc6),_0x88cd0b=_0x5d8706(0x18a)+JSON[_0x5d8706(0x177)](_0x3d40e6)+_0x5d8706(0x185)+JSON[_0x5d8706(0x177)](_0x3598a8);try{updateApiTimestamp();const _0x2ad7a0=await _0x191ffb['geminiModel'][_0x5d8706(0x199)](_0x88cd0b),_0x1f4556=JSON[_0x5d8706(0x133)](_0x2ad7a0[_0x5d8706(0x16a)]['text']()['replace'](/```json|```/g,'')[_0x5d8706(0x138)]());_0x1f4556[_0x5d8706(0x193)]&&(await _0x191ffb[_0x5d8706(0x162)](_0x5d8706(0x11b),{'val':_0x1f4556[_0x5d8706(0x193)],'ack':!![]}),await _0x191ffb['setStateAsync'](_0x5d8706(0x132),{'val':_0x1f4556[_0x5d8706(0x17d)],'ack':!![]}),await _0x191ffb[_0x5d8706(0x162)](_0x5d8706(0x122),{'val':Date[_0x5d8706(0x125)](),'ack':!![]}));}catch(_0x25e6ac){}}async function executeAutomationAction(_0x26991a){const _0x239c04=a0_0x35eada;try{const _0x158285=await _0x26991a[_0x239c04(0x169)](_0x239c04(0x13b)),_0x46e8d1=await _0x26991a[_0x239c04(0x169)](_0x239c04(0x14c));if(_0x158285&&_0x158285[_0x239c04(0x160)]&&_0x46e8d1){const _0x502542=_0x158285[_0x239c04(0x160)];let _0x2319df=_0x46e8d1[_0x239c04(0x160)];try{_0x2319df=JSON['parse'](_0x2319df);}catch(_0x2ff491){}_0x26991a[_0x239c04(0x173)]['info']('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x502542+'\x20=\x20'+_0x2319df),await _0x26991a[_0x239c04(0x118)](_0x502542,_0x2319df);}else _0x26991a[_0x239c04(0x173)][_0x239c04(0x183)](_0x239c04(0x11a));}catch(_0x1250e4){_0x26991a[_0x239c04(0x173)]['error'](_0x239c04(0x134)+_0x1250e4[_0x239c04(0x17b)]);}}async function sendMorningBriefing(_0x40544a){const _0x3b1135=a0_0x35eada;if(!_0x40544a['geminiModel']){_0x40544a[_0x3b1135(0x173)][_0x3b1135(0x183)](_0x3b1135(0x137));return;}_0x40544a[_0x3b1135(0x173)][_0x3b1135(0x12d)](_0x3b1135(0x14b));try{updateApiTimestamp();const _0x3cb2af=_0x3b1135(0x188),_0x5f5ddc=await _0x40544a[_0x3b1135(0x18f)]['generateContent'](_0x3cb2af),_0x16d0a4=_0x5f5ddc[_0x3b1135(0x16a)][_0x3b1135(0x113)]();_0x40544a[_0x3b1135(0x173)][_0x3b1135(0x12d)](_0x3b1135(0x114)+_0x16d0a4[_0x3b1135(0x164)]+_0x3b1135(0x191)),setup[_0x3b1135(0x153)](_0x40544a,_0x3b1135(0x192)+_0x16d0a4);}catch(_0x4e289b){_0x40544a[_0x3b1135(0x173)][_0x3b1135(0x178)]('Briefing\x20Error:\x20'+_0x4e289b[_0x3b1135(0x17b)]);}}module[a0_0x35eada(0x149)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};