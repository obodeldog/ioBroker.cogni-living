function a0_0x5dd2(){const _0x1bffab=['ltmLtbWindowDays','Briefing\x20Error:\x20','response','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','trim','LTM.driftAnalysis.lastCheck','search','val','Traffic-Schutz\x20(Auto-Approved)','unshift','normal','targetId','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','¬∞C,\x20','analysis.isAlert','generateContent','weatherInstance','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','lastAlertState','parse','analysisHistory','.Current.WeatherText','toString','21bazJPV','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','LTM.dailyDigests','now','Tag','1537905WWmMFc','./setup','eventHistory','getStateAsync','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','(((.+)+)+)+$','description','KI-Fehler\x20(Fallback)','getForeignStateAsync','analysis.automation.targetValue','analysis.automation.targetId','automationProposal','Skipped\x20(Traffic)','toLocaleTimeString','pop','KI\x20offline\x20(Fallback)','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','sendNotification','isProVersion','3101967QLvLsL','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','summary','ltmStbWindowDays','rawEventLog','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','.Current.IsNight','üåÖ\x20Morning\x20Briefing:\x0a','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','detected','aiPersona','replace','length','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','Gemini\x20Error:\x20','activityLevel','geminiModel','1151616IgyBAu','targetValue','.\x20KONTEXT:\x20','reason','approved','log','timestamp','constructor','toISOString','LTM.processingStatus','info','BUTLER\x20Execution\x20Error:\x20','message','generic','apply','%)\x20nach\x20\x22','system.presenceWho','debug','LTM.driftAnalysis.driftDetails','Unbekannt','.\x20EMERGENCY:\x20','377cQBLqg','\x20->\x20','decision',',\x20Lichtverh√§ltnisse:\x20','config','1844610cQjNqT','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','ANALYZE_HEALTH','alertReason','stringify','analysis.automation.description',',\x20Wetter:\x20','exports','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','analysis.analysisHistory','setStateAsync','.forecast.current.temperature','Skipped\x20(No\x20AI\x20or\x20Data)','.\x20SYSTEM_MODE:\x20','2926248KXTLfF','Sicherheit\x20geht\x20vor.','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','1224435FjeZmf','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','push','isEmergency','error','analysis.automation.patternDetected','2864iVeYJP','warn','analysis.automation.autoApply','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','send','analysis.alertReason','.Current.Temperature','N/A\x20(Learning)','analysis.lastResult','Keine\x20Details.','livingContext','ü§ñ\x20Butler\x20Brain\x20Error:\x20','baselineDrift','slice','\x20√ºbersprungen\x20(Auto-Approved).','dailyDigests','isAlert','Nacht','text','\x20=\x20','analysis.activitySummary','currentSystemMode'];a0_0x5dd2=function(){return _0x1bffab;};return a0_0x5dd2();}const a0_0x5d2cfa=a0_0x1762;(function(_0x1dee88,_0x16493e){const _0x1cdf89=a0_0x1762,_0x186e78=_0x1dee88();while(!![]){try{const _0x5500d4=parseInt(_0x1cdf89(0x1fb))/0x1*(parseInt(_0x1cdf89(0x218))/0x2)+-parseInt(_0x1cdf89(0x24a))/0x3+parseInt(_0x1cdf89(0x1e6))/0x4+parseInt(_0x1cdf89(0x211))/0x5+parseInt(_0x1cdf89(0x200))/0x6*(parseInt(_0x1cdf89(0x245))/0x7)+-parseInt(_0x1cdf89(0x20e))/0x8+-parseInt(_0x1cdf89(0x1d5))/0x9;if(_0x5500d4===_0x16493e)break;else _0x186e78['push'](_0x186e78['shift']());}catch(_0x137f0a){_0x186e78['push'](_0x186e78['shift']());}}}(a0_0x5dd2,0xbc729));const a0_0x2a7afb=(function(){let _0x5dac2b=!![];return function(_0x3ea9f8,_0x17ab54){const _0x2f1f90=_0x5dac2b?function(){const _0x3788cd=a0_0x1762;if(_0x17ab54){const _0x330d40=_0x17ab54[_0x3788cd(0x1f4)](_0x3ea9f8,arguments);return _0x17ab54=null,_0x330d40;}}:function(){};return _0x5dac2b=![],_0x2f1f90;};}()),a0_0x49a7b4=a0_0x2a7afb(this,function(){const _0x13ec57=a0_0x1762;return a0_0x49a7b4[_0x13ec57(0x244)]()['search'](_0x13ec57(0x1c7))['toString']()[_0x13ec57(0x1ed)](a0_0x49a7b4)[_0x13ec57(0x234)]('(((.+)+)+)+$');});a0_0x49a7b4();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require(a0_0x5d2cfa(0x1c3)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x5d2cfa(0x247),LTM_DP_STATUS=a0_0x5d2cfa(0x1ef),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;function a0_0x1762(_0xf79638,_0x2f4e29){const _0x3249e0=a0_0x5dd2();return a0_0x1762=function(_0x49a7b4,_0x2a7afb){_0x49a7b4=_0x49a7b4-0x1c3;let _0x5dd2aa=_0x3249e0[_0x49a7b4];return _0x5dd2aa;},a0_0x1762(_0xf79638,_0x2f4e29);}const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x5d2cfa(0x231),'senior_aal':a0_0x5d2cfa(0x21b),'family':a0_0x5d2cfa(0x1d2),'single_comfort':a0_0x5d2cfa(0x1dd),'security':a0_0x5d2cfa(0x20f),'energy_saver':a0_0x5d2cfa(0x23f)};function canCallApi(){const _0x16fa1e=Date['now']();return _0x16fa1e-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x3d2029=a0_0x5d2cfa;lastGlobalApiCall=Date[_0x3d2029(0x248)]();}async function getWeatherContext(_0x87a98c){const _0x170dc3=a0_0x5d2cfa;if(!_0x87a98c[_0x170dc3(0x1ff)]['useWeather']||!_0x87a98c[_0x170dc3(0x1ff)][_0x170dc3(0x23e)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x5a2cc8=_0x87a98c[_0x170dc3(0x1ff)][_0x170dc3(0x23e)];let _0x37382a=await _0x87a98c[_0x170dc3(0x1ca)](_0x5a2cc8+_0x170dc3(0x21e));if(!_0x37382a)_0x37382a=await _0x87a98c[_0x170dc3(0x1ca)](_0x5a2cc8+_0x170dc3(0x20b));let _0x351a5d=await _0x87a98c[_0x170dc3(0x1ca)](_0x5a2cc8+_0x170dc3(0x243));if(!_0x351a5d)_0x351a5d=await _0x87a98c[_0x170dc3(0x1ca)](_0x5a2cc8+'.forecast.current.state');let _0x55bd45='Unbekannt';const _0x287424=await _0x87a98c[_0x170dc3(0x1ca)](_0x5a2cc8+_0x170dc3(0x1db));if(_0x287424)_0x55bd45=_0x287424[_0x170dc3(0x235)]?_0x170dc3(0x229):_0x170dc3(0x249);if(_0x37382a&&_0x351a5d)return _0x37382a[_0x170dc3(0x235)]+_0x170dc3(0x23b)+_0x351a5d['val']+_0x170dc3(0x1fe)+_0x55bd45;}catch(_0x45ee80){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x486f5a,_0x524603,_0x35b1dd,_0x5a339d){const _0xec086=a0_0x5d2cfa;if(!_0x486f5a['geminiModel'])return{'approved':!![],'reason':_0xec086(0x1d1)};const _0x4c7a1e=Date[_0xec086(0x248)]();if(decisionCache[_0x524603]&&_0x4c7a1e-decisionCache[_0x524603][_0xec086(0x1ec)]<CACHE_TTL_MS){const _0x218feb=decisionCache[_0x524603][_0xec086(0x1fd)];return _0x486f5a[_0xec086(0x1eb)][_0xec086(0x1f7)](_0xec086(0x213)+_0x524603+_0xec086(0x1fc)+(_0x218feb[_0xec086(0x1ea)]?'OK':'NO')+'\x20('+_0x218feb[_0xec086(0x1e9)]+')'),_0x218feb;}if(!canCallApi())return _0x486f5a['log'][_0xec086(0x1f7)](_0xec086(0x1c6)+_0x524603+_0xec086(0x226)),{'approved':!![],'reason':_0xec086(0x236)};const _0x214259=new Date()[_0xec086(0x1cf)](),_0x409220=await getWeatherContext(_0x486f5a),_0x436c84=PERSONA_MAPPING[_0x486f5a[_0xec086(0x1ff)][_0xec086(0x1df)]||_0xec086(0x1f3)],_0x18face=_0xec086(0x212)+_0x214259+_0xec086(0x206)+_0x409220+_0xec086(0x210)+(_0x5a339d*0x64)['toFixed'](0x0)+_0xec086(0x1f5)+_0x524603+_0xec086(0x1d6)+_0x35b1dd+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x436c84+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x1fdaf7=await _0x486f5a['geminiModel'][_0xec086(0x23d)](_0x18face),_0x8cf808=_0x1fdaf7[_0xec086(0x230)][_0xec086(0x22a)]()[_0xec086(0x1e0)](/```json|```/g,'')['trim'](),_0x26ecd3=JSON[_0xec086(0x241)](_0x8cf808);return decisionCache[_0x524603]={'decision':_0x26ecd3,'timestamp':_0x4c7a1e},_0x26ecd3;}catch(_0x5ed865){return _0x486f5a[_0xec086(0x1eb)][_0xec086(0x219)](_0xec086(0x223)+_0x5ed865[_0xec086(0x1f2)]),decisionCache[_0x524603]={'decision':{'approved':!![],'reason':_0xec086(0x1c9)},'timestamp':_0x4c7a1e-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0xec086(0x1c9)};}}async function runGeminiAnalysis(_0x54de66,_0x36131b=''){const _0x5789bd=a0_0x5d2cfa;if(!_0x54de66[_0x5789bd(0x1e5)])return;if(!canCallApi()){_0x54de66[_0x5789bd(0x1eb)][_0x5789bd(0x1f7)](_0x5789bd(0x1e2));return;}if(_0x54de66[_0x5789bd(0x1c4)][_0x5789bd(0x1e1)]===0x0)return;const _0x30f6e0=_0x54de66[_0x5789bd(0x1c4)][_0x5789bd(0x225)](0x0,0xf),_0x4751d5=_0x54de66['currentSystemMode'],_0xd25503=PERSONA_MAPPING[_0x54de66[_0x5789bd(0x1ff)][_0x5789bd(0x1df)]||_0x5789bd(0x1f3)],_0x5eb2c3=_0x54de66['config'][_0x5789bd(0x222)]||_0x5789bd(0x221);let _0x4bd93b=_0x5789bd(0x1f9);try{const _0x3a3678=await _0x54de66[_0x5789bd(0x1c5)](_0x5789bd(0x1f6));if(_0x3a3678&&_0x3a3678['val'])_0x4bd93b=_0x3a3678['val'];}catch(_0x535697){}let _0x9c0bfe=![];try{const _0x4821af=await _0x54de66[_0x5789bd(0x1c5)](_0x5789bd(0x21a));if(_0x4821af&&_0x4821af[_0x5789bd(0x235)])_0x9c0bfe=!![];}catch(_0x84e1bf){}const _0x36eeb8=_0x5789bd(0x201)+_0xd25503+_0x5789bd(0x1e8)+_0x5eb2c3+_0x5789bd(0x20d)+_0x4751d5+'.\x20ANWESEND:\x20'+_0x4bd93b+'.\x20EVENTS:\x20'+JSON[_0x5789bd(0x204)](_0x30f6e0)+_0x5789bd(0x1fa)+_0x36131b+_0x5789bd(0x1da);try{updateApiTimestamp();const _0x4fcda0=await _0x54de66[_0x5789bd(0x1e5)][_0x5789bd(0x23d)](_0x36eeb8),_0x115f7a=JSON['parse'](_0x4fcda0[_0x5789bd(0x230)]['text']()[_0x5789bd(0x1e0)](/```json|```/g,'')[_0x5789bd(0x232)]());await _0x54de66[_0x5789bd(0x20a)](_0x5789bd(0x220),{'val':JSON[_0x5789bd(0x204)](_0x115f7a),'ack':!![]});if(_0x115f7a['summary'])await _0x54de66[_0x5789bd(0x20a)](_0x5789bd(0x22c),{'val':_0x115f7a['summary'],'ack':!![]});const _0x1a4bff={'timestamp':Date[_0x5789bd(0x248)](),'id':Date['now']()[_0x5789bd(0x244)](),'analysis':{'activity':{'summary':_0x115f7a[_0x5789bd(0x1d7)],'isAlert':_0x115f7a[_0x5789bd(0x228)],'alertReason':_0x115f7a[_0x5789bd(0x203)]},'comfort':{'automationProposal':_0x115f7a[_0x5789bd(0x1cd)]}}};_0x54de66[_0x5789bd(0x242)][_0x5789bd(0x237)](_0x1a4bff);if(_0x54de66[_0x5789bd(0x242)][_0x5789bd(0x1e1)]>0x32)_0x54de66[_0x5789bd(0x242)][_0x5789bd(0x1d0)]();await _0x54de66[_0x5789bd(0x20a)](_0x5789bd(0x209),{'val':JSON['stringify'](_0x54de66[_0x5789bd(0x242)]),'ack':!![]});const _0x2461e6=_0x115f7a[_0x5789bd(0x228)]||![];_0x2461e6!==_0x54de66[_0x5789bd(0x240)]&&(await _0x54de66['setStateAsync'](_0x5789bd(0x23c),{'val':_0x2461e6,'ack':!![]}),_0x54de66[_0x5789bd(0x240)]=_0x2461e6,_0x2461e6&&(await _0x54de66[_0x5789bd(0x20a)](_0x5789bd(0x21d),{'val':_0x115f7a[_0x5789bd(0x203)],'ack':!![]}),setup['sendNotification'](_0x54de66,'‚ö†Ô∏è\x20ALARM:\x20'+_0x115f7a['alertReason'],![],_0x115f7a[_0x5789bd(0x215)])));if(_0x115f7a[_0x5789bd(0x1cd)]&&_0x115f7a['automationProposal'][_0x5789bd(0x1de)]){await _0x54de66[_0x5789bd(0x20a)](_0x5789bd(0x217),{'val':!![],'ack':!![]}),await _0x54de66[_0x5789bd(0x20a)](_0x5789bd(0x205),{'val':_0x115f7a[_0x5789bd(0x1cd)][_0x5789bd(0x1c8)],'ack':!![]}),await _0x54de66[_0x5789bd(0x20a)](_0x5789bd(0x1cc),{'val':_0x115f7a[_0x5789bd(0x1cd)][_0x5789bd(0x239)],'ack':!![]}),await _0x54de66[_0x5789bd(0x20a)](_0x5789bd(0x1cb),{'val':JSON[_0x5789bd(0x204)](_0x115f7a['automationProposal'][_0x5789bd(0x1e7)]),'ack':!![]});if(_0x9c0bfe)executeAutomationAction(_0x54de66);}}catch(_0x12a95a){_0x54de66[_0x5789bd(0x1eb)][_0x5789bd(0x216)](_0x5789bd(0x1e3)+_0x12a95a[_0x5789bd(0x1f2)]);}}async function createDailyDigest(_0x593281,_0x42a4c5){const _0x3ec927=a0_0x5d2cfa;if(!_0x593281['isProVersion'])return;if(!canCallApi()){await _0x593281[_0x3ec927(0x20a)](LTM_DP_STATUS,{'val':_0x3ec927(0x1ce),'ack':!![]});return;}await _0x593281[_0x3ec927(0x20a)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x593281[_0x3ec927(0x1e5)]||_0x593281[_0x3ec927(0x1d9)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x593281[_0x3ec927(0x20a)](LTM_DP_STATUS,{'val':_0x3ec927(0x20c),'ack':!![]});return;}const _0xbcbcea=JSON[_0x3ec927(0x241)](JSON[_0x3ec927(0x204)](_0x593281[_0x3ec927(0x1d9)])),_0x49ae29=_0xbcbcea['length'],_0x2ddf0b='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x3ec927(0x204)](_0xbcbcea);try{updateApiTimestamp();const _0x41f9b2=await _0x593281['geminiModel'][_0x3ec927(0x23d)](_0x2ddf0b),_0x51e72e=JSON[_0x3ec927(0x241)](_0x41f9b2[_0x3ec927(0x230)][_0x3ec927(0x22a)]()['replace'](/```json|```/g,'')['trim']()),_0x46e755={'timestamp':new Date()[_0x3ec927(0x1ee)](),'eventCount':_0x49ae29,'summary':_0x51e72e[_0x3ec927(0x1d7)]||'Digest','activityLevel':_0x51e72e[_0x3ec927(0x1e4)]||_0x3ec927(0x238),'systemMode':_0x593281[_0x3ec927(0x22d)]};_0x593281['dailyDigests'][_0x3ec927(0x214)](_0x46e755);const _0x2330e8=_0x593281['config'][_0x3ec927(0x22e)]||0x3c;_0x593281[_0x3ec927(0x227)][_0x3ec927(0x1e1)]>_0x2330e8&&_0x593281[_0x3ec927(0x227)]['splice'](0x0,_0x593281[_0x3ec927(0x227)][_0x3ec927(0x1e1)]-_0x2330e8);await _0x593281[_0x3ec927(0x20a)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x3ec927(0x204)](_0x593281[_0x3ec927(0x227)]),'ack':!![]}),_0x593281[_0x3ec927(0x1d9)]=[],await _0x593281[_0x3ec927(0x20a)](LTM_DP_RAW_LOG,{'val':JSON[_0x3ec927(0x204)](_0x593281[_0x3ec927(0x1d9)]),'ack':!![]}),await _0x593281['setStateAsync'](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x593281[_0x3ec927(0x1d4)]&&_0x42a4c5)_0x42a4c5[_0x3ec927(0x21c)](_0x593281,_0x3ec927(0x202),{'digest':_0x46e755});}catch(_0x51b5e4){_0x593281[_0x3ec927(0x1eb)][_0x3ec927(0x216)](_0x51b5e4['message']);}}async function runBaselineDriftAnalysis(_0x37c25c){const _0x55c22e=a0_0x5d2cfa;if(!_0x37c25c[_0x55c22e(0x1d4)]||!_0x37c25c['geminiModel'])return;if(!canCallApi())return;const _0x2702f9=_0x37c25c['config'][_0x55c22e(0x1d8)]||0xe;if(_0x37c25c['dailyDigests'][_0x55c22e(0x1e1)]<_0x2702f9+0x7){await _0x37c25c[_0x55c22e(0x20a)]('LTM.driftAnalysis.baselineDrift',{'val':_0x55c22e(0x21f),'ack':!![]});return;}const _0x3b348c=_0x37c25c[_0x55c22e(0x227)]['slice'](-_0x2702f9),_0x1da438=_0x37c25c['dailyDigests'][_0x55c22e(0x225)](0x0,_0x37c25c[_0x55c22e(0x227)][_0x55c22e(0x1e1)]-_0x2702f9),_0x29fa96=_0x55c22e(0x208)+JSON['stringify'](_0x1da438)+'\x0aSTB:\x20'+JSON[_0x55c22e(0x204)](_0x3b348c);try{updateApiTimestamp();const _0x5b1cf8=await _0x37c25c[_0x55c22e(0x1e5)][_0x55c22e(0x23d)](_0x29fa96),_0x3b8877=JSON[_0x55c22e(0x241)](_0x5b1cf8[_0x55c22e(0x230)][_0x55c22e(0x22a)]()['replace'](/```json|```/g,'')[_0x55c22e(0x232)]());_0x3b8877['baselineDrift']&&(await _0x37c25c[_0x55c22e(0x20a)]('LTM.driftAnalysis.baselineDrift',{'val':_0x3b8877[_0x55c22e(0x224)],'ack':!![]}),await _0x37c25c['setStateAsync'](_0x55c22e(0x1f8),{'val':_0x3b8877['driftDetails'],'ack':!![]}),await _0x37c25c[_0x55c22e(0x20a)](_0x55c22e(0x233),{'val':Date[_0x55c22e(0x248)](),'ack':!![]}));}catch(_0x8ce665){}}async function executeAutomationAction(_0x267f5a){const _0x14a42b=a0_0x5d2cfa;try{const _0x4aff7b=await _0x267f5a[_0x14a42b(0x1c5)]('analysis.automation.targetId'),_0x26234e=await _0x267f5a['getStateAsync']('analysis.automation.targetValue');if(_0x4aff7b&&_0x4aff7b[_0x14a42b(0x235)]&&_0x26234e){const _0x27228f=_0x4aff7b[_0x14a42b(0x235)];let _0x4becaa=_0x26234e['val'];try{_0x4becaa=JSON['parse'](_0x4becaa);}catch(_0x2bd79c){}_0x267f5a['log'][_0x14a42b(0x1f0)]('ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x27228f+_0x14a42b(0x22b)+_0x4becaa),await _0x267f5a['setForeignStateAsync'](_0x27228f,_0x4becaa);}else _0x267f5a[_0x14a42b(0x1eb)]['warn'](_0x14a42b(0x23a));}catch(_0xc477e3){_0x267f5a[_0x14a42b(0x1eb)][_0x14a42b(0x216)](_0x14a42b(0x1f1)+_0xc477e3[_0x14a42b(0x1f2)]);}}async function sendMorningBriefing(_0x6404f8){const _0x2c6077=a0_0x5d2cfa;if(!_0x6404f8['geminiModel'])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x21b25c=_0x2c6077(0x246),_0x18b502=await _0x6404f8[_0x2c6077(0x1e5)][_0x2c6077(0x23d)](_0x21b25c),_0x14a869=_0x18b502[_0x2c6077(0x230)]['text']();setup[_0x2c6077(0x1d3)](_0x6404f8,_0x2c6077(0x1dc)+_0x14a869);}catch(_0x554f2e){_0x6404f8['log']['error'](_0x2c6077(0x22f)+_0x554f2e['message']);}}module[a0_0x5d2cfa(0x207)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};