const a0_0x131b7a=a0_0x1254;(function(_0x5c9e33,_0xec19){const _0x381ff6=a0_0x1254,_0x5230a2=_0x5c9e33();while(!![]){try{const _0xaa4c70=parseInt(_0x381ff6(0xdb))/0x1+-parseInt(_0x381ff6(0xbb))/0x2+parseInt(_0x381ff6(0xf1))/0x3*(parseInt(_0x381ff6(0xf0))/0x4)+parseInt(_0x381ff6(0xee))/0x5*(-parseInt(_0x381ff6(0xaa))/0x6)+parseInt(_0x381ff6(0xe0))/0x7*(-parseInt(_0x381ff6(0x9a))/0x8)+parseInt(_0x381ff6(0x98))/0x9*(parseInt(_0x381ff6(0x7f))/0xa)+parseInt(_0x381ff6(0xbe))/0xb*(parseInt(_0x381ff6(0xf2))/0xc);if(_0xaa4c70===_0xec19)break;else _0x5230a2['push'](_0x5230a2['shift']());}catch(_0x352441){_0x5230a2['push'](_0x5230a2['shift']());}}}(a0_0x1b0d,0xd4e47));const a0_0x2434ab=(function(){let _0x44861f=!![];return function(_0x598d6c,_0x4c9f26){const _0x27e714=_0x44861f?function(){if(_0x4c9f26){const _0x46ce3a=_0x4c9f26['apply'](_0x598d6c,arguments);return _0x4c9f26=null,_0x46ce3a;}}:function(){};return _0x44861f=![],_0x27e714;};}()),a0_0x121cc4=a0_0x2434ab(this,function(){const _0xae7132=a0_0x1254;return a0_0x121cc4[_0xae7132(0xbf)]()[_0xae7132(0xe9)](_0xae7132(0xef))[_0xae7132(0xbf)]()[_0xae7132(0x7d)](a0_0x121cc4)[_0xae7132(0xe9)](_0xae7132(0xef));});function a0_0x1254(_0x48e6d1,_0x3c65de){const _0x4fbab5=a0_0x1b0d();return a0_0x1254=function(_0x121cc4,_0x2434ab){_0x121cc4=_0x121cc4-0x77;let _0x1b0d18=_0x4fbab5[_0x121cc4];return _0x1b0d18;},a0_0x1254(_0x48e6d1,_0x3c65de);}a0_0x121cc4();'use strict';const {GoogleGenerativeAI}=require(a0_0x131b7a(0xcc)),setup=require('./setup'),GEMINI_MODEL=a0_0x131b7a(0x9e),LTM_DP_DAILY_DIGESTS=a0_0x131b7a(0xab),LTM_DP_STATUS=a0_0x131b7a(0xb0),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;function a0_0x1b0d(){const _0x2296c4=['Skipped\x20(No\x20AI\x20or\x20Data)','149933CVyvPc','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','analysis.automation.targetId','text','geminiModel','%)\x20nach\x20\x22','Started...','analysis.isAlert','LTM.driftAnalysis.baselineDrift','search','BUTLER\x20Execution\x20Error:\x20','\x20=\x20','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','unshift','335eeaQOJ','(((.+)+)+)+$','275984AnSGel','15TIeYqz','12RajWcW','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','stringify','Digest','rawEventLog','pop','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','system.presenceWho','constructor','analysisHistory','110mGjQwL','exports','replace','\x20->\x20','alertReason','isProVersion','error','decision','dailyDigests','Tag','\x20Ã¼bersprungen\x20(Auto-Approved).','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','eventHistory','livingContext','ltmStbWindowDays','.\x20ANWESEND:\x20','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','warn','aiPersona','.forecast.current.temperature','config','Gemini\x20Error:\x20','parse','targetId','toISOString','1022364RiRSsi','getStateAsync','496gCQAmr','analysis.alertReason','Briefing\x20Error:\x20','useWeather','models/gemini-flash-latest','baselineDrift','Nacht','Sicherheit\x20geht\x20vor.','analysis.lastResult','LTM.driftAnalysis.lastCheck','setStateAsync','summary','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','response','description','slice','78726lOTGfj','LTM.dailyDigests',',\x20Wetter:\x20','isEmergency','debug','trim','LTM.processingStatus','message','getForeignStateAsync','driftDetails','weatherInstance','.\x20KONTEXT:\x20','targetValue','generateContent','log','ðŸŒ…\x20Morning\x20Briefing:\x0a','length','2011088aIYRWt','âš ï¸\x20ALARM:\x20','activityLevel','15365779laHtoj','toString','generic','setForeignStateAsync','.Current.Temperature','currentSystemMode','isAlert','val','KI-Fehler\x20(Fallback)',',\x20LichtverhÃ¤ltnisse:\x20','toFixed','now','.Current.WeatherText','analysis.automation.targetValue','@google/generative-ai','Unbekannt\x20(Kein\x20Sensor)','Traffic-Schutz\x20(Auto-Approved)','.\x20EVENTS:\x20','automationProposal','Â°C,\x20','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','info','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','toLocaleTimeString','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','reason','normal','.forecast.current.state','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','1093211qXyInv','lastAlertState','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'];a0_0x1b0d=function(){return _0x2296c4;};return a0_0x1b0d();}let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x131b7a(0xa6),'senior_aal':a0_0x131b7a(0xf3),'family':a0_0x131b7a(0xec),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':a0_0x131b7a(0xa1),'energy_saver':a0_0x131b7a(0xde)};function canCallApi(){const _0x567db5=a0_0x131b7a,_0x54d7ec=Date[_0x567db5(0xc9)]();return _0x54d7ec-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x561545=a0_0x131b7a;lastGlobalApiCall=Date[_0x561545(0xc9)]();}async function getWeatherContext(_0x549a16){const _0x385c10=a0_0x131b7a;if(!_0x549a16[_0x385c10(0x93)][_0x385c10(0x9d)]||!_0x549a16['config'][_0x385c10(0xb4)])return _0x385c10(0xcd);try{const _0x2abc00=_0x549a16[_0x385c10(0x93)][_0x385c10(0xb4)];let _0x557add=await _0x549a16[_0x385c10(0xb2)](_0x2abc00+_0x385c10(0xc2));if(!_0x557add)_0x557add=await _0x549a16[_0x385c10(0xb2)](_0x2abc00+_0x385c10(0x92));let _0x25afcf=await _0x549a16[_0x385c10(0xb2)](_0x2abc00+_0x385c10(0xca));if(!_0x25afcf)_0x25afcf=await _0x549a16[_0x385c10(0xb2)](_0x2abc00+_0x385c10(0xd9));let _0x3e85ca='Unbekannt';const _0x319a3f=await _0x549a16[_0x385c10(0xb2)](_0x2abc00+'.Current.IsNight');if(_0x319a3f)_0x3e85ca=_0x319a3f[_0x385c10(0xc5)]?_0x385c10(0xa0):_0x385c10(0x88);if(_0x557add&&_0x25afcf)return _0x557add['val']+_0x385c10(0xd1)+_0x25afcf['val']+_0x385c10(0xc7)+_0x3e85ca;}catch(_0x12b412){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x50560a,_0x541ff8,_0x49fbb7,_0x4ea919){const _0x394126=a0_0x131b7a;if(!_0x50560a[_0x394126(0xe4)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x62c306=Date[_0x394126(0xc9)]();if(decisionCache[_0x541ff8]&&_0x62c306-decisionCache[_0x541ff8]['timestamp']<CACHE_TTL_MS){const _0x5af0b7=decisionCache[_0x541ff8][_0x394126(0x86)];return _0x50560a[_0x394126(0xb8)][_0x394126(0xae)](_0x394126(0xd4)+_0x541ff8+_0x394126(0x82)+(_0x5af0b7['approved']?'OK':'NO')+'\x20('+_0x5af0b7[_0x394126(0xd7)]+')'),_0x5af0b7;}if(!canCallApi())return _0x50560a[_0x394126(0xb8)][_0x394126(0xae)]('ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20'+_0x541ff8+_0x394126(0x89)),{'approved':!![],'reason':_0x394126(0xce)};const _0x47bc22=new Date()[_0x394126(0xd5)](),_0x136b15=await getWeatherContext(_0x50560a),_0x5e7e7c=PERSONA_MAPPING[_0x50560a[_0x394126(0x93)][_0x394126(0x91)]||_0x394126(0xc0)],_0x18055b=_0x394126(0xd2)+_0x47bc22+_0x394126(0xac)+_0x136b15+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x4ea919*0x64)[_0x394126(0xc8)](0x0)+_0x394126(0xe5)+_0x541ff8+_0x394126(0xe1)+_0x49fbb7+_0x394126(0x8f)+_0x5e7e7c+_0x394126(0x7b);try{updateApiTimestamp();const _0x3cbcd3=await _0x50560a[_0x394126(0xe4)][_0x394126(0xb7)](_0x18055b),_0x5d9b79=_0x3cbcd3[_0x394126(0xa7)][_0x394126(0xe3)]()['replace'](/```json|```/g,'')['trim'](),_0x460c53=JSON['parse'](_0x5d9b79);return decisionCache[_0x541ff8]={'decision':_0x460c53,'timestamp':_0x62c306},_0x460c53;}catch(_0x3ca7f4){return _0x50560a[_0x394126(0xb8)][_0x394126(0x90)](_0x394126(0xdd)+_0x3ca7f4['message']),decisionCache[_0x541ff8]={'decision':{'approved':!![],'reason':_0x394126(0xc6)},'timestamp':_0x62c306-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x394126(0xc6)};}}async function runGeminiAnalysis(_0x5bd94f,_0xd3a5c4=''){const _0x514f3b=a0_0x131b7a;if(!_0x5bd94f[_0x514f3b(0xe4)])return;if(!canCallApi()){_0x5bd94f[_0x514f3b(0xb8)][_0x514f3b(0xae)]('ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x5bd94f[_0x514f3b(0x8b)]['length']===0x0)return;const _0x7be0e2=_0x5bd94f[_0x514f3b(0x8b)][_0x514f3b(0xa9)](0x0,0xf),_0x25dfc5=_0x5bd94f[_0x514f3b(0xc3)],_0x4878e7=PERSONA_MAPPING[_0x5bd94f['config'][_0x514f3b(0x91)]||_0x514f3b(0xc0)],_0x2b860b=_0x5bd94f[_0x514f3b(0x93)][_0x514f3b(0x8c)]||'Keine\x20Details.';let _0x2e3821='Unbekannt';try{const _0x270a0b=await _0x5bd94f['getStateAsync'](_0x514f3b(0x7c));if(_0x270a0b&&_0x270a0b[_0x514f3b(0xc5)])_0x2e3821=_0x270a0b[_0x514f3b(0xc5)];}catch(_0x5f2fab){}let _0x45c164=![];try{const _0x2c2a46=await _0x5bd94f['getStateAsync']('analysis.automation.autoApply');if(_0x2c2a46&&_0x2c2a46[_0x514f3b(0xc5)])_0x45c164=!![];}catch(_0xe3d20f){}const _0x4011c4=_0x514f3b(0xd6)+_0x4878e7+_0x514f3b(0xb5)+_0x2b860b+'.\x20SYSTEM_MODE:\x20'+_0x25dfc5+_0x514f3b(0x8e)+_0x2e3821+_0x514f3b(0xcf)+JSON[_0x514f3b(0xf4)](_0x7be0e2)+'.\x20EMERGENCY:\x20'+_0xd3a5c4+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x2ffd79=await _0x5bd94f[_0x514f3b(0xe4)][_0x514f3b(0xb7)](_0x4011c4),_0x419e4a=JSON[_0x514f3b(0x95)](_0x2ffd79['response'][_0x514f3b(0xe3)]()[_0x514f3b(0x81)](/```json|```/g,'')[_0x514f3b(0xaf)]());await _0x5bd94f[_0x514f3b(0xa4)](_0x514f3b(0xa2),{'val':JSON[_0x514f3b(0xf4)](_0x419e4a),'ack':!![]});if(_0x419e4a[_0x514f3b(0xa5)])await _0x5bd94f[_0x514f3b(0xa4)]('analysis.activitySummary',{'val':_0x419e4a[_0x514f3b(0xa5)],'ack':!![]});const _0x14ef49={'timestamp':Date[_0x514f3b(0xc9)](),'id':Date[_0x514f3b(0xc9)]()['toString'](),'analysis':{'activity':{'summary':_0x419e4a[_0x514f3b(0xa5)],'isAlert':_0x419e4a[_0x514f3b(0xc4)],'alertReason':_0x419e4a['alertReason']},'comfort':{'automationProposal':_0x419e4a[_0x514f3b(0xd0)]}}};_0x5bd94f[_0x514f3b(0x7e)][_0x514f3b(0xed)](_0x14ef49);if(_0x5bd94f['analysisHistory'][_0x514f3b(0xba)]>0x32)_0x5bd94f['analysisHistory'][_0x514f3b(0x79)]();await _0x5bd94f[_0x514f3b(0xa4)]('analysis.analysisHistory',{'val':JSON['stringify'](_0x5bd94f[_0x514f3b(0x7e)]),'ack':!![]});const _0x461e85=_0x419e4a[_0x514f3b(0xc4)]||![];_0x461e85!==_0x5bd94f[_0x514f3b(0xdc)]&&(await _0x5bd94f[_0x514f3b(0xa4)](_0x514f3b(0xe7),{'val':_0x461e85,'ack':!![]}),_0x5bd94f[_0x514f3b(0xdc)]=_0x461e85,_0x461e85&&(await _0x5bd94f['setStateAsync'](_0x514f3b(0x9b),{'val':_0x419e4a[_0x514f3b(0x83)],'ack':!![]}),setup['sendNotification'](_0x5bd94f,_0x514f3b(0xbc)+_0x419e4a[_0x514f3b(0x83)],![],_0x419e4a[_0x514f3b(0xad)])));if(_0x419e4a[_0x514f3b(0xd0)]&&_0x419e4a[_0x514f3b(0xd0)]['detected']){await _0x5bd94f[_0x514f3b(0xa4)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x5bd94f[_0x514f3b(0xa4)]('analysis.automation.description',{'val':_0x419e4a[_0x514f3b(0xd0)][_0x514f3b(0xa8)],'ack':!![]}),await _0x5bd94f['setStateAsync'](_0x514f3b(0xe2),{'val':_0x419e4a[_0x514f3b(0xd0)][_0x514f3b(0x96)],'ack':!![]}),await _0x5bd94f[_0x514f3b(0xa4)](_0x514f3b(0xcb),{'val':JSON[_0x514f3b(0xf4)](_0x419e4a[_0x514f3b(0xd0)][_0x514f3b(0xb6)]),'ack':!![]});if(_0x45c164)executeAutomationAction(_0x5bd94f);}}catch(_0x4bb97d){_0x5bd94f[_0x514f3b(0xb8)]['error'](_0x514f3b(0x94)+_0x4bb97d[_0x514f3b(0xb1)]);}}async function createDailyDigest(_0x56725a,_0x49323d){const _0x5acd8e=a0_0x131b7a;if(!_0x56725a[_0x5acd8e(0x84)])return;if(!canCallApi()){await _0x56725a[_0x5acd8e(0xa4)](LTM_DP_STATUS,{'val':'Skipped\x20(Traffic)','ack':!![]});return;}await _0x56725a[_0x5acd8e(0xa4)](LTM_DP_STATUS,{'val':_0x5acd8e(0xe6),'ack':!![]});if(!_0x56725a[_0x5acd8e(0xe4)]||_0x56725a['rawEventLog'][_0x5acd8e(0xba)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x56725a['setStateAsync'](LTM_DP_STATUS,{'val':_0x5acd8e(0xdf),'ack':!![]});return;}const _0xe13019=JSON[_0x5acd8e(0x95)](JSON[_0x5acd8e(0xf4)](_0x56725a[_0x5acd8e(0x78)])),_0x57adc3=_0xe13019[_0x5acd8e(0xba)],_0x591300=_0x5acd8e(0x8a)+JSON[_0x5acd8e(0xf4)](_0xe13019);try{updateApiTimestamp();const _0x174b53=await _0x56725a[_0x5acd8e(0xe4)][_0x5acd8e(0xb7)](_0x591300),_0x91a2cb=JSON[_0x5acd8e(0x95)](_0x174b53['response'][_0x5acd8e(0xe3)]()[_0x5acd8e(0x81)](/```json|```/g,'')[_0x5acd8e(0xaf)]()),_0x2db4b1={'timestamp':new Date()[_0x5acd8e(0x97)](),'eventCount':_0x57adc3,'summary':_0x91a2cb[_0x5acd8e(0xa5)]||_0x5acd8e(0x77),'activityLevel':_0x91a2cb[_0x5acd8e(0xbd)]||_0x5acd8e(0xd8),'systemMode':_0x56725a['currentSystemMode']};_0x56725a['dailyDigests']['push'](_0x2db4b1);const _0x59615b=_0x56725a['config']['ltmLtbWindowDays']||0x3c;_0x56725a[_0x5acd8e(0x87)]['length']>_0x59615b&&_0x56725a[_0x5acd8e(0x87)]['splice'](0x0,_0x56725a[_0x5acd8e(0x87)][_0x5acd8e(0xba)]-_0x59615b);await _0x56725a[_0x5acd8e(0xa4)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x5acd8e(0xf4)](_0x56725a[_0x5acd8e(0x87)]),'ack':!![]}),_0x56725a[_0x5acd8e(0x78)]=[],await _0x56725a['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x5acd8e(0xf4)](_0x56725a['rawEventLog']),'ack':!![]}),await _0x56725a[_0x5acd8e(0xa4)](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x56725a[_0x5acd8e(0x84)]&&_0x49323d)_0x49323d['send'](_0x56725a,'ANALYZE_HEALTH',{'digest':_0x2db4b1});}catch(_0x42d7db){_0x56725a[_0x5acd8e(0xb8)][_0x5acd8e(0x85)](_0x42d7db[_0x5acd8e(0xb1)]);}}async function runBaselineDriftAnalysis(_0x46b4a0){const _0x433cfe=a0_0x131b7a;if(!_0x46b4a0['isProVersion']||!_0x46b4a0[_0x433cfe(0xe4)])return;if(!canCallApi())return;const _0x42e9cc=_0x46b4a0[_0x433cfe(0x93)][_0x433cfe(0x8d)]||0xe;if(_0x46b4a0[_0x433cfe(0x87)][_0x433cfe(0xba)]<_0x42e9cc+0x7){await _0x46b4a0[_0x433cfe(0xa4)](_0x433cfe(0xe8),{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x387ab9=_0x46b4a0[_0x433cfe(0x87)][_0x433cfe(0xa9)](-_0x42e9cc),_0x231024=_0x46b4a0[_0x433cfe(0x87)]['slice'](0x0,_0x46b4a0[_0x433cfe(0x87)]['length']-_0x42e9cc),_0x56f15b='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x433cfe(0xf4)](_0x231024)+'\x0aSTB:\x20'+JSON[_0x433cfe(0xf4)](_0x387ab9);try{updateApiTimestamp();const _0x2ac219=await _0x46b4a0[_0x433cfe(0xe4)][_0x433cfe(0xb7)](_0x56f15b),_0x15e089=JSON[_0x433cfe(0x95)](_0x2ac219[_0x433cfe(0xa7)]['text']()['replace'](/```json|```/g,'')[_0x433cfe(0xaf)]());_0x15e089[_0x433cfe(0x9f)]&&(await _0x46b4a0[_0x433cfe(0xa4)](_0x433cfe(0xe8),{'val':_0x15e089[_0x433cfe(0x9f)],'ack':!![]}),await _0x46b4a0[_0x433cfe(0xa4)]('LTM.driftAnalysis.driftDetails',{'val':_0x15e089[_0x433cfe(0xb3)],'ack':!![]}),await _0x46b4a0[_0x433cfe(0xa4)](_0x433cfe(0xa3),{'val':Date[_0x433cfe(0xc9)](),'ack':!![]}));}catch(_0x9c5cac){}}async function executeAutomationAction(_0x42bdcf){const _0x165872=a0_0x131b7a;try{const _0x59525c=await _0x42bdcf['getStateAsync'](_0x165872(0xe2)),_0x1f79b9=await _0x42bdcf[_0x165872(0x99)](_0x165872(0xcb));if(_0x59525c&&_0x59525c['val']&&_0x1f79b9){const _0x59e39f=_0x59525c['val'];let _0x279099=_0x1f79b9[_0x165872(0xc5)];try{_0x279099=JSON[_0x165872(0x95)](_0x279099);}catch(_0x19a4dc){}_0x42bdcf[_0x165872(0xb8)][_0x165872(0xd3)](_0x165872(0xda)+_0x59e39f+_0x165872(0xeb)+_0x279099),await _0x42bdcf[_0x165872(0xc1)](_0x59e39f,_0x279099);}else _0x42bdcf[_0x165872(0xb8)]['warn'](_0x165872(0x7a));}catch(_0x440286){_0x42bdcf['log'][_0x165872(0x85)](_0x165872(0xea)+_0x440286[_0x165872(0xb1)]);}}async function sendMorningBriefing(_0xf1547a){const _0x370cf9=a0_0x131b7a;if(!_0xf1547a[_0x370cf9(0xe4)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x3fc779='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x268224=await _0xf1547a['geminiModel'][_0x370cf9(0xb7)](_0x3fc779),_0x187d64=_0x268224['response']['text']();setup['sendNotification'](_0xf1547a,_0x370cf9(0xb9)+_0x187d64);}catch(_0x2cd285){_0xf1547a[_0x370cf9(0xb8)][_0x370cf9(0x85)](_0x370cf9(0x9c)+_0x2cd285[_0x370cf9(0xb1)]);}}module[a0_0x131b7a(0x80)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};