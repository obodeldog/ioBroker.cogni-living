const a0_0x5e074f=a0_0x32dd;(function(_0x3b584b,_0x2197ea){const _0x557f28=a0_0x32dd,_0x383b52=_0x3b584b();while(!![]){try{const _0x50adff=parseInt(_0x557f28(0x184))/0x1*(parseInt(_0x557f28(0x1a2))/0x2)+parseInt(_0x557f28(0x132))/0x3*(parseInt(_0x557f28(0x192))/0x4)+-parseInt(_0x557f28(0x14f))/0x5*(parseInt(_0x557f28(0x137))/0x6)+-parseInt(_0x557f28(0x160))/0x7*(parseInt(_0x557f28(0x16b))/0x8)+parseInt(_0x557f28(0x15d))/0x9*(parseInt(_0x557f28(0x169))/0xa)+-parseInt(_0x557f28(0x1a9))/0xb+parseInt(_0x557f28(0x18f))/0xc;if(_0x50adff===_0x2197ea)break;else _0x383b52['push'](_0x383b52['shift']());}catch(_0x3c530d){_0x383b52['push'](_0x383b52['shift']());}}}(a0_0x2d94,0x39dfa));const a0_0x141dd4=(function(){let _0x2f5bfe=!![];return function(_0x6bb56e,_0x30fe82){const _0xc5b637=_0x2f5bfe?function(){const _0x1978fc=a0_0x32dd;if(_0x30fe82){const _0x4426f9=_0x30fe82[_0x1978fc(0x142)](_0x6bb56e,arguments);return _0x30fe82=null,_0x4426f9;}}:function(){};return _0x2f5bfe=![],_0xc5b637;};}()),a0_0x10fecf=a0_0x141dd4(this,function(){const _0x405260=a0_0x32dd;return a0_0x10fecf[_0x405260(0x143)]()[_0x405260(0x14a)](_0x405260(0x14d))[_0x405260(0x143)]()[_0x405260(0x149)](a0_0x10fecf)[_0x405260(0x14a)](_0x405260(0x14d));});a0_0x10fecf();'use strict';const {GoogleGenerativeAI}=require(a0_0x5e074f(0x16a)),setup=require(a0_0x5e074f(0x12d)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x5e074f(0x174),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG=a0_0x5e074f(0x168),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;function a0_0x32dd(_0x2947d9,_0x4d6205){const _0x576ff8=a0_0x2d94();return a0_0x32dd=function(_0x10fecf,_0x141dd4){_0x10fecf=_0x10fecf-0x11f;let _0x2d94bd=_0x576ff8[_0x10fecf];return _0x2d94bd;},a0_0x32dd(_0x2947d9,_0x4d6205);}function a0_0x2d94(){const _0xc11d32=['weatherInstance','Digest','driftDetails','slice','alertReason','exports','LTM.dailyDigests','lastAlertState','replace','pop','getForeignStateAsync','LTM.driftAnalysis.baselineDrift','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','ðŸŒ…\x20Morning\x20Briefing:\x0a','.forecast.current.temperature','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','analysis.isAlert','info','text','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','debug','340060szXwMT','analysis.alertReason','useWeather','generateContent','config','splice','setForeignStateAsync','setStateAsync','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','automationProposal','4356948DdmyfH','Briefing\x20Error:\x20','currentSystemMode','160FYadbH',').\x20Sending\x20notification...','eventHistory','ltmStbWindowDays','.Current.Temperature','description','message','stringify','timestamp','analysis.activitySummary','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','targetValue','Unbekannt','analysis.lastResult','Sicherheit\x20geht\x20vor.','2GeRgfL','dailyDigests','response','toLocaleTimeString','unshift','warn','.\x20SYSTEM_MODE:\x20','4135483AmODkO','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20',',\x20Wetter:\x20','Wetterdaten\x20nicht\x20abrufbar','parse','livingContext','geminiModel','analysis.automation.targetValue','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','Started...','KI-Fehler\x20(Fallback)','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','isProVersion','error','val','trim','aiPersona','Traffic-Schutz\x20(Auto-Approved)','baselineDrift','analysisHistory','./setup','Tag','.Current.WeatherText','analysis.automation.targetId','normal','3375menHiO','sendNotification','activityLevel',',\x20LichtverhÃ¤ltnisse:\x20','push','885348pRdtzC','Skipped\x20(Traffic)','system.presenceWho','analysis.analysisHistory','N/A\x20(Learning)','\x0aAktivitÃ¤t:\x20','send','Keine\x20Details.','length','analysis.automation.description','detected','apply','toString','.\x20ANWESEND:\x20','LTM.driftAnalysis.lastCheck','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','BUTLER\x20Execution\x20Error:\x20','Skipped\x20(No\x20AI\x20or\x20Data)','constructor','search','decision','.\x20EVENTS:\x20','(((.+)+)+)+$','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','5VQlaEo','summary','ðŸ“…\x20Daily\x20Digest:\x0a','isEmergency','rawEventLog','Success','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','âš ï¸\x20ALARM:\x20','reason','\x20->\x20','getStateAsync','\x20=\x20','log','approved','171cWmzjn','isAlert','ltmLtbWindowDays','1879717fBKuUe','analysis.automation.patternDetected','now','toFixed','toISOString','\x20Ã¼bersprungen\x20(Auto-Approved).','Â°C,\x20','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','LTM.rawEventLog','147870IynWpx','@google/generative-ai','8ccaxOs','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.'];a0_0x2d94=function(){return _0xc11d32;};return a0_0x2d94();}let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':a0_0x5e074f(0x16c),'family':a0_0x5e074f(0x19c),'single_comfort':a0_0x5e074f(0x155),'security':a0_0x5e074f(0x1a1),'energy_saver':'PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'};function canCallApi(){const _0xe51a04=Date['now']();return _0xe51a04-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x130791=a0_0x5e074f;lastGlobalApiCall=Date[_0x130791(0x162)]();}async function getWeatherContext(_0x1762b5){const _0x2010ba=a0_0x5e074f;if(!_0x1762b5[_0x2010ba(0x188)][_0x2010ba(0x186)]||!_0x1762b5[_0x2010ba(0x188)][_0x2010ba(0x16e)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x6ed462=_0x1762b5[_0x2010ba(0x188)][_0x2010ba(0x16e)];let _0x2e78aa=await _0x1762b5[_0x2010ba(0x178)](_0x6ed462+_0x2010ba(0x196));if(!_0x2e78aa)_0x2e78aa=await _0x1762b5['getForeignStateAsync'](_0x6ed462+_0x2010ba(0x17c));let _0x4e2070=await _0x1762b5[_0x2010ba(0x178)](_0x6ed462+_0x2010ba(0x12f));if(!_0x4e2070)_0x4e2070=await _0x1762b5[_0x2010ba(0x178)](_0x6ed462+'.forecast.current.state');let _0x3c46c3=_0x2010ba(0x19f);const _0x216fa5=await _0x1762b5[_0x2010ba(0x178)](_0x6ed462+'.Current.IsNight');if(_0x216fa5)_0x3c46c3=_0x216fa5['val']?'Nacht':_0x2010ba(0x12e);if(_0x2e78aa&&_0x4e2070)return _0x2e78aa['val']+_0x2010ba(0x166)+_0x4e2070[_0x2010ba(0x127)]+_0x2010ba(0x135)+_0x3c46c3;}catch(_0x14fff0){}return _0x2010ba(0x1ac);}async function consultButler(_0x3d5f59,_0x14c0e7,_0x3ea14f,_0x5d6d91){const _0xfea861=a0_0x5e074f;if(!_0x3d5f59[_0xfea861(0x11f)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x59657d=Date['now']();if(decisionCache[_0x14c0e7]&&_0x59657d-decisionCache[_0x14c0e7][_0xfea861(0x19a)]<CACHE_TTL_MS){const _0x564ca5=decisionCache[_0x14c0e7][_0xfea861(0x14b)];return _0x3d5f59[_0xfea861(0x15b)][_0xfea861(0x183)](_0xfea861(0x19d)+_0x14c0e7+_0xfea861(0x158)+(_0x564ca5[_0xfea861(0x15c)]?'OK':'NO')+'\x20('+_0x564ca5[_0xfea861(0x157)]+')'),_0x564ca5;}if(!canCallApi())return _0x3d5f59[_0xfea861(0x15b)][_0xfea861(0x183)](_0xfea861(0x14e)+_0x14c0e7+_0xfea861(0x165)),{'approved':!![],'reason':_0xfea861(0x12a)};const _0x5692fb=new Date()[_0xfea861(0x1a5)](),_0x323a99=await getWeatherContext(_0x3d5f59),_0x53e27e=PERSONA_MAPPING[_0x3d5f59[_0xfea861(0x188)][_0xfea861(0x129)]||'generic'],_0x3ac5f0=_0xfea861(0x146)+_0x5692fb+_0xfea861(0x1ab)+_0x323a99+_0xfea861(0x182)+(_0x5d6d91*0x64)[_0xfea861(0x163)](0x0)+'%)\x20nach\x20\x22'+_0x14c0e7+_0xfea861(0x167)+_0x3ea14f+_0xfea861(0x1aa)+_0x53e27e+_0xfea861(0x181);try{updateApiTimestamp();const _0x3054f7=await _0x3d5f59[_0xfea861(0x11f)]['generateContent'](_0x3ac5f0),_0x33b082=_0x3054f7['response']['text']()[_0xfea861(0x176)](/```json|```/g,'')[_0xfea861(0x128)](),_0x405037=JSON[_0xfea861(0x1ad)](_0x33b082);return decisionCache[_0x14c0e7]={'decision':_0x405037,'timestamp':_0x59657d},_0x405037;}catch(_0x13bd17){return _0x3d5f59[_0xfea861(0x15b)][_0xfea861(0x1a7)]('ðŸ¤–\x20Butler\x20Brain\x20Error:\x20'+_0x13bd17[_0xfea861(0x198)]),decisionCache[_0x14c0e7]={'decision':{'approved':!![],'reason':_0xfea861(0x123)},'timestamp':_0x59657d-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x5b27f3,_0x5df58c=''){const _0x599be4=a0_0x5e074f;if(!_0x5b27f3[_0x599be4(0x11f)])return;if(!canCallApi()){_0x5b27f3[_0x599be4(0x15b)][_0x599be4(0x183)]('ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x5b27f3[_0x599be4(0x194)][_0x599be4(0x13f)]===0x0)return;const _0x1123cf=_0x5b27f3['eventHistory'][_0x599be4(0x171)](0x0,0xf),_0xe27bd5=_0x5b27f3[_0x599be4(0x191)],_0x579be4=PERSONA_MAPPING[_0x5b27f3[_0x599be4(0x188)][_0x599be4(0x129)]||'generic'],_0x3a60ca=_0x5b27f3[_0x599be4(0x188)][_0x599be4(0x1ae)]||_0x599be4(0x13e);let _0x5e942c=_0x599be4(0x19f);try{const _0x4f8198=await _0x5b27f3['getStateAsync'](_0x599be4(0x139));if(_0x4f8198&&_0x4f8198[_0x599be4(0x127)])_0x5e942c=_0x4f8198[_0x599be4(0x127)];}catch(_0x1133f8){}let _0xd9b091=![];try{const _0x5c847d=await _0x5b27f3[_0x599be4(0x159)]('analysis.automation.autoApply');if(_0x5c847d&&_0x5c847d[_0x599be4(0x127)])_0xd9b091=!![];}catch(_0x49ba8e){}const _0x222507='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x579be4+'.\x20KONTEXT:\x20'+_0x3a60ca+_0x599be4(0x1a8)+_0xe27bd5+_0x599be4(0x144)+_0x5e942c+_0x599be4(0x14c)+JSON[_0x599be4(0x199)](_0x1123cf)+'.\x20EMERGENCY:\x20'+_0x5df58c+_0x599be4(0x17a);try{updateApiTimestamp();const _0x1f84c3=await _0x5b27f3[_0x599be4(0x11f)][_0x599be4(0x187)](_0x222507),_0x3cff6d=JSON[_0x599be4(0x1ad)](_0x1f84c3['response'][_0x599be4(0x180)]()[_0x599be4(0x176)](/```json|```/g,'')[_0x599be4(0x128)]());await _0x5b27f3[_0x599be4(0x18b)](_0x599be4(0x1a0),{'val':JSON[_0x599be4(0x199)](_0x3cff6d),'ack':!![]});if(_0x3cff6d[_0x599be4(0x150)])await _0x5b27f3[_0x599be4(0x18b)](_0x599be4(0x19b),{'val':_0x3cff6d[_0x599be4(0x150)],'ack':!![]});const _0xc35ba7={'timestamp':Date[_0x599be4(0x162)](),'id':Date[_0x599be4(0x162)]()[_0x599be4(0x143)](),'analysis':{'activity':{'summary':_0x3cff6d['summary'],'isAlert':_0x3cff6d[_0x599be4(0x15e)],'alertReason':_0x3cff6d[_0x599be4(0x172)]},'comfort':{'automationProposal':_0x3cff6d[_0x599be4(0x18e)]}}};_0x5b27f3[_0x599be4(0x12c)][_0x599be4(0x1a6)](_0xc35ba7);if(_0x5b27f3[_0x599be4(0x12c)][_0x599be4(0x13f)]>0x32)_0x5b27f3[_0x599be4(0x12c)][_0x599be4(0x177)]();await _0x5b27f3[_0x599be4(0x18b)](_0x599be4(0x13a),{'val':JSON[_0x599be4(0x199)](_0x5b27f3[_0x599be4(0x12c)]),'ack':!![]});const _0x131d83=_0x3cff6d[_0x599be4(0x15e)]||![];_0x131d83!==_0x5b27f3[_0x599be4(0x175)]&&(await _0x5b27f3['setStateAsync'](_0x599be4(0x17e),{'val':_0x131d83,'ack':!![]}),_0x5b27f3['lastAlertState']=_0x131d83,_0x131d83&&(await _0x5b27f3[_0x599be4(0x18b)](_0x599be4(0x185),{'val':_0x3cff6d[_0x599be4(0x172)],'ack':!![]}),setup[_0x599be4(0x133)](_0x5b27f3,_0x599be4(0x156)+_0x3cff6d[_0x599be4(0x172)],![],_0x3cff6d[_0x599be4(0x152)])));if(_0x3cff6d[_0x599be4(0x18e)]&&_0x3cff6d[_0x599be4(0x18e)][_0x599be4(0x141)]){await _0x5b27f3['setStateAsync'](_0x599be4(0x161),{'val':!![],'ack':!![]}),await _0x5b27f3[_0x599be4(0x18b)](_0x599be4(0x140),{'val':_0x3cff6d[_0x599be4(0x18e)][_0x599be4(0x197)],'ack':!![]}),await _0x5b27f3[_0x599be4(0x18b)](_0x599be4(0x130),{'val':_0x3cff6d['automationProposal']['targetId'],'ack':!![]}),await _0x5b27f3[_0x599be4(0x18b)](_0x599be4(0x120),{'val':JSON[_0x599be4(0x199)](_0x3cff6d[_0x599be4(0x18e)][_0x599be4(0x19e)]),'ack':!![]});if(_0xd9b091)executeAutomationAction(_0x5b27f3);}}catch(_0x5bcc13){_0x5b27f3[_0x599be4(0x15b)][_0x599be4(0x126)]('Gemini\x20Error:\x20'+_0x5bcc13['message']);}}async function createDailyDigest(_0x1ec1f3,_0x5f44ce){const _0x1742f2=a0_0x5e074f;if(!_0x1ec1f3['isProVersion'])return;if(!canCallApi()){await _0x1ec1f3[_0x1742f2(0x18b)](LTM_DP_STATUS,{'val':_0x1742f2(0x138),'ack':!![]});return;}await _0x1ec1f3['setStateAsync'](LTM_DP_STATUS,{'val':_0x1742f2(0x122),'ack':!![]});if(!_0x1ec1f3[_0x1742f2(0x11f)]||_0x1ec1f3[_0x1742f2(0x153)][_0x1742f2(0x13f)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x1ec1f3['setStateAsync'](LTM_DP_STATUS,{'val':_0x1742f2(0x148),'ack':!![]});return;}const _0x5525a8=JSON[_0x1742f2(0x1ad)](JSON['stringify'](_0x1ec1f3[_0x1742f2(0x153)])),_0x2aa150=_0x5525a8[_0x1742f2(0x13f)],_0x5db401=_0x1742f2(0x17d)+JSON[_0x1742f2(0x199)](_0x5525a8);try{updateApiTimestamp();const _0x56206f=await _0x1ec1f3[_0x1742f2(0x11f)]['generateContent'](_0x5db401),_0x3160f3=JSON[_0x1742f2(0x1ad)](_0x56206f[_0x1742f2(0x1a4)]['text']()['replace'](/```json|```/g,'')[_0x1742f2(0x128)]()),_0x4034d1={'timestamp':new Date()[_0x1742f2(0x164)](),'eventCount':_0x2aa150,'summary':_0x3160f3['summary']||_0x1742f2(0x16f),'activityLevel':_0x3160f3[_0x1742f2(0x134)]||_0x1742f2(0x131),'systemMode':_0x1ec1f3[_0x1742f2(0x191)]};_0x1ec1f3['dailyDigests'][_0x1742f2(0x136)](_0x4034d1);const _0x364e19=_0x1ec1f3[_0x1742f2(0x188)][_0x1742f2(0x15f)]||0x3c;_0x1ec1f3['dailyDigests'][_0x1742f2(0x13f)]>_0x364e19&&_0x1ec1f3['dailyDigests'][_0x1742f2(0x189)](0x0,_0x1ec1f3[_0x1742f2(0x1a3)][_0x1742f2(0x13f)]-_0x364e19);await _0x1ec1f3[_0x1742f2(0x18b)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x1742f2(0x199)](_0x1ec1f3[_0x1742f2(0x1a3)]),'ack':!![]}),_0x1ec1f3[_0x1742f2(0x153)]=[],await _0x1ec1f3['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x1742f2(0x199)](_0x1ec1f3[_0x1742f2(0x153)]),'ack':!![]}),await _0x1ec1f3[_0x1742f2(0x18b)](LTM_DP_STATUS,{'val':_0x1742f2(0x154),'ack':!![]});const _0x46f28c=_0x1742f2(0x151)+_0x3160f3[_0x1742f2(0x150)]+_0x1742f2(0x13c)+_0x3160f3[_0x1742f2(0x134)];setup['sendNotification'](_0x1ec1f3,_0x46f28c,![],![]);if(_0x1ec1f3[_0x1742f2(0x125)]&&_0x5f44ce)_0x5f44ce[_0x1742f2(0x13d)](_0x1ec1f3,'ANALYZE_HEALTH',{'digest':_0x4034d1});}catch(_0x393328){_0x1ec1f3[_0x1742f2(0x15b)][_0x1742f2(0x126)](_0x393328['message']);}}async function runBaselineDriftAnalysis(_0x150061){const _0x681ead=a0_0x5e074f;if(!_0x150061[_0x681ead(0x125)]||!_0x150061[_0x681ead(0x11f)])return;if(!canCallApi())return;const _0x1c5f47=_0x150061[_0x681ead(0x188)][_0x681ead(0x195)]||0xe;if(_0x150061['dailyDigests'][_0x681ead(0x13f)]<_0x1c5f47+0x7){await _0x150061[_0x681ead(0x18b)](_0x681ead(0x179),{'val':_0x681ead(0x13b),'ack':!![]});return;}const _0x4e63ff=_0x150061[_0x681ead(0x1a3)][_0x681ead(0x171)](-_0x1c5f47),_0xa7cbe=_0x150061[_0x681ead(0x1a3)][_0x681ead(0x171)](0x0,_0x150061[_0x681ead(0x1a3)][_0x681ead(0x13f)]-_0x1c5f47),_0x1712ce=_0x681ead(0x18d)+JSON[_0x681ead(0x199)](_0xa7cbe)+'\x0aSTB:\x20'+JSON[_0x681ead(0x199)](_0x4e63ff);try{updateApiTimestamp();const _0x160dc0=await _0x150061['geminiModel'][_0x681ead(0x187)](_0x1712ce),_0x4f32cf=JSON[_0x681ead(0x1ad)](_0x160dc0['response']['text']()[_0x681ead(0x176)](/```json|```/g,'')['trim']());_0x4f32cf[_0x681ead(0x12b)]&&(await _0x150061[_0x681ead(0x18b)](_0x681ead(0x179),{'val':_0x4f32cf[_0x681ead(0x12b)],'ack':!![]}),await _0x150061[_0x681ead(0x18b)]('LTM.driftAnalysis.driftDetails',{'val':_0x4f32cf[_0x681ead(0x170)],'ack':!![]}),await _0x150061[_0x681ead(0x18b)](_0x681ead(0x145),{'val':Date['now'](),'ack':!![]}));}catch(_0x4e879f){}}async function executeAutomationAction(_0x11eeba){const _0x1f2c7a=a0_0x5e074f;try{const _0x54e71a=await _0x11eeba[_0x1f2c7a(0x159)](_0x1f2c7a(0x130)),_0x139809=await _0x11eeba[_0x1f2c7a(0x159)](_0x1f2c7a(0x120));if(_0x54e71a&&_0x54e71a[_0x1f2c7a(0x127)]&&_0x139809){const _0xb3320f=_0x54e71a['val'];let _0x271f94=_0x139809[_0x1f2c7a(0x127)];try{_0x271f94=JSON[_0x1f2c7a(0x1ad)](_0x271f94);}catch(_0x14ded8){}_0x11eeba[_0x1f2c7a(0x15b)][_0x1f2c7a(0x17f)](_0x1f2c7a(0x124)+_0xb3320f+_0x1f2c7a(0x15a)+_0x271f94),await _0x11eeba[_0x1f2c7a(0x18a)](_0xb3320f,_0x271f94);}else _0x11eeba[_0x1f2c7a(0x15b)]['warn'](_0x1f2c7a(0x121));}catch(_0x1c2b30){_0x11eeba[_0x1f2c7a(0x15b)]['error'](_0x1f2c7a(0x147)+_0x1c2b30['message']);}}async function sendMorningBriefing(_0x252213){const _0x3f5537=a0_0x5e074f;if(!_0x252213[_0x3f5537(0x11f)]){_0x252213[_0x3f5537(0x15b)]['warn'](_0x3f5537(0x16d));return;}_0x252213[_0x3f5537(0x15b)][_0x3f5537(0x17f)]('ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...');try{updateApiTimestamp();const _0xa37e09=_0x3f5537(0x18c),_0x89a900=await _0x252213[_0x3f5537(0x11f)][_0x3f5537(0x187)](_0xa37e09),_0x4d887d=_0x89a900['response'][_0x3f5537(0x180)]();_0x252213[_0x3f5537(0x15b)][_0x3f5537(0x17f)]('ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20'+_0x4d887d[_0x3f5537(0x13f)]+_0x3f5537(0x193)),setup[_0x3f5537(0x133)](_0x252213,_0x3f5537(0x17b)+_0x4d887d);}catch(_0x3bdf21){_0x252213[_0x3f5537(0x15b)][_0x3f5537(0x126)](_0x3f5537(0x190)+_0x3bdf21[_0x3f5537(0x198)]);}}module[a0_0x5e074f(0x173)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};