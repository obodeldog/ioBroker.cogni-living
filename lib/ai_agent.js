const a0_0x3f843c=a0_0x2840;(function(_0xd22281,_0x2dc04a){const _0x5cdbd8=a0_0x2840,_0x207095=_0xd22281();while(!![]){try{const _0x51676d=-parseInt(_0x5cdbd8(0xec))/0x1*(parseInt(_0x5cdbd8(0x11d))/0x2)+-parseInt(_0x5cdbd8(0xb8))/0x3+-parseInt(_0x5cdbd8(0x132))/0x4*(parseInt(_0x5cdbd8(0x103))/0x5)+-parseInt(_0x5cdbd8(0xbd))/0x6+-parseInt(_0x5cdbd8(0xca))/0x7*(-parseInt(_0x5cdbd8(0x11a))/0x8)+parseInt(_0x5cdbd8(0x125))/0x9*(parseInt(_0x5cdbd8(0xd7))/0xa)+parseInt(_0x5cdbd8(0x10e))/0xb;if(_0x51676d===_0x2dc04a)break;else _0x207095['push'](_0x207095['shift']());}catch(_0x51134e){_0x207095['push'](_0x207095['shift']());}}}(a0_0x1539,0xe9ce7));const a0_0x33f99a=(function(){let _0x24672a=!![];return function(_0x260baa,_0xe3330a){const _0xaed0a4=_0x24672a?function(){const _0x24d940=a0_0x2840;if(_0xe3330a){const _0x1243ae=_0xe3330a[_0x24d940(0x11e)](_0x260baa,arguments);return _0xe3330a=null,_0x1243ae;}}:function(){};return _0x24672a=![],_0xaed0a4;};}()),a0_0x4ef3a4=a0_0x33f99a(this,function(){const _0x5940ff=a0_0x2840;return a0_0x4ef3a4[_0x5940ff(0xc5)]()[_0x5940ff(0x124)]('(((.+)+)+)+$')['toString']()['constructor'](a0_0x4ef3a4)[_0x5940ff(0x124)](_0x5940ff(0xfb));});a0_0x4ef3a4();'use strict';const {GoogleGenerativeAI}=require(a0_0x3f843c(0x113)),setup=require('./setup'),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x3f843c(0xe8),LTM_DP_STATUS=a0_0x3f843c(0xb3),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x3f843c(0xf6),'senior_aal':a0_0x3f843c(0x12e),'family':'Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','single_comfort':a0_0x3f843c(0xdc),'security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x3f843c(0xc7)};function canCallApi(){const _0x120362=a0_0x3f843c,_0x29d150=Date[_0x120362(0x106)]();return _0x29d150-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x79d3a9=a0_0x3f843c;lastGlobalApiCall=Date[_0x79d3a9(0x106)]();}async function getWeatherContext(_0x1bf9d3){const _0x5bd495=a0_0x3f843c;if(!_0x1bf9d3[_0x5bd495(0xde)][_0x5bd495(0xc0)]||!_0x1bf9d3[_0x5bd495(0xde)][_0x5bd495(0xfd)])return _0x5bd495(0xb6);try{const _0x241df0=_0x1bf9d3['config'][_0x5bd495(0xfd)];let _0x536406=await _0x1bf9d3[_0x5bd495(0xf3)](_0x241df0+_0x5bd495(0xe6));if(!_0x536406)_0x536406=await _0x1bf9d3['getForeignStateAsync'](_0x241df0+_0x5bd495(0x129));let _0x37a3cd=await _0x1bf9d3[_0x5bd495(0xf3)](_0x241df0+'.Current.WeatherText');if(!_0x37a3cd)_0x37a3cd=await _0x1bf9d3[_0x5bd495(0xf3)](_0x241df0+_0x5bd495(0xb9));let _0x464f6a='Unbekannt';const _0x3ee8d3=await _0x1bf9d3[_0x5bd495(0xf3)](_0x241df0+'.Current.IsNight');if(_0x3ee8d3)_0x464f6a=_0x3ee8d3[_0x5bd495(0x135)]?'Nacht':_0x5bd495(0x12a);if(_0x536406&&_0x37a3cd)return _0x536406[_0x5bd495(0x135)]+_0x5bd495(0xf8)+_0x37a3cd[_0x5bd495(0x135)]+',\x20Lichtverh√§ltnisse:\x20'+_0x464f6a;}catch(_0x1f4302){}return _0x5bd495(0x104);}function a0_0x1539(){const _0x5acac6=['.\x20KONTEXT:\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','length','toString','getStateAsync','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','LTM.driftAnalysis.lastCheck','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','1684949uJMkbE','pop','setStateAsync','N/A\x20(Learning)','debug','Skipped\x20(No\x20AI\x20or\x20Data)','send','warn','system.presenceWho','slice','error','LTM.driftAnalysis.driftDetails','geminiModel','680070UhINyR','.\x20SYSTEM_MODE:\x20','analysis.automation.description','Success',',\x20Wetter:\x20','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','livingContext','config','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','.\x20EVENTS:\x20','Briefing\x20Error:\x20','alertReason','.\x20EMERGENCY:\x20','activityLevel','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','.Current.Temperature','isAlert','LTM.dailyDigests','currentSystemMode','analysis.automation.targetId','detected','209998ovMGqZ','description','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','KI\x20offline\x20(Fallback)','targetValue','isProVersion','approved','getForeignStateAsync','ANALYZE_HEALTH','parse','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','\x20√ºbersprungen\x20(Auto-Approved).','¬∞C,\x20','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','log','(((.+)+)+)+$','aiPersona','weatherInstance','lastAlertState','summary','timestamp','generic','üìÖ\x20Daily\x20Digest:\x0a','15dLmKMk','Wetterdaten\x20nicht\x20abrufbar','message','now','stringify','decision','rawEventLog','automationProposal','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','normal','isEmergency','7054168JVkxMK','unshift','reason','\x0aSTB:\x20','splice','@google/generative-ai','ltmLtbWindowDays','LTM.driftAnalysis.baselineDrift','analysis.automation.targetValue','üåÖ\x20Briefing\x20generated\x20(Length:\x20','analysis.analysisHistory','eventHistory','24VqLdiR','dailyDigests','Gemini\x20Error:\x20','10znEFrA','apply','baselineDrift','toLocaleTimeString','replace','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','search','225GTWrei','setForeignStateAsync','\x0aAktivit√§t:\x20','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','.forecast.current.temperature','Tag','Started...','analysis.automation.patternDetected','sendNotification','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','KI-Fehler\x20(Fallback)','exports','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','17684drzvpN','.\x20ANWESEND:\x20','response','val','toFixed','Unbekannt','trim','generateContent','ltmStbWindowDays','LTM.processingStatus','ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','text','Unbekannt\x20(Kein\x20Sensor)','\x20=\x20','652926UvThWB','.forecast.current.state','analysis.alertReason','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','analysisHistory','4950108vqAAHV',').\x20Sending\x20notification...','\x20->\x20','useWeather'];a0_0x1539=function(){return _0x5acac6;};return a0_0x1539();}function a0_0x2840(_0x102857,_0x3ceb8b){const _0x522f36=a0_0x1539();return a0_0x2840=function(_0x4ef3a4,_0x33f99a){_0x4ef3a4=_0x4ef3a4-0xaf;let _0x153936=_0x522f36[_0x4ef3a4];return _0x153936;},a0_0x2840(_0x102857,_0x3ceb8b);}async function consultButler(_0x3c8338,_0x58e9ce,_0x1284d3,_0x1f2213){const _0x5c33b5=a0_0x3f843c;if(!_0x3c8338[_0x5c33b5(0xd6)])return{'approved':!![],'reason':_0x5c33b5(0xef)};const _0x1fbd95=Date['now']();if(decisionCache[_0x58e9ce]&&_0x1fbd95-decisionCache[_0x58e9ce][_0x5c33b5(0x100)]<CACHE_TTL_MS){const _0x539282=decisionCache[_0x58e9ce][_0x5c33b5(0x108)];return _0x3c8338['log']['debug']('ü§ñ\x20Butler\x20Cache\x20Hit:\x20'+_0x58e9ce+_0x5c33b5(0xbf)+(_0x539282[_0x5c33b5(0xf2)]?'OK':'NO')+'\x20('+_0x539282[_0x5c33b5(0x110)]+')'),_0x539282;}if(!canCallApi())return _0x3c8338['log'][_0x5c33b5(0xce)]('ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20'+_0x58e9ce+_0x5c33b5(0xf7)),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x3fef51=new Date()[_0x5c33b5(0x120)](),_0x19ae5e=await getWeatherContext(_0x3c8338),_0x37fb77=PERSONA_MAPPING[_0x3c8338[_0x5c33b5(0xde)][_0x5c33b5(0xfc)]||'generic'],_0x4fba9a=_0x5c33b5(0x131)+_0x3fef51+_0x5c33b5(0xdb)+_0x19ae5e+_0x5c33b5(0x123)+(_0x1f2213*0x64)[_0x5c33b5(0x136)](0x0)+'%)\x20nach\x20\x22'+_0x58e9ce+_0x5c33b5(0xf9)+_0x1284d3+_0x5c33b5(0x10b)+_0x37fb77+_0x5c33b5(0xc3);try{updateApiTimestamp();const _0x43da2d=await _0x3c8338[_0x5c33b5(0xd6)][_0x5c33b5(0xb1)](_0x4fba9a),_0x566e6e=_0x43da2d[_0x5c33b5(0x134)][_0x5c33b5(0xb5)]()[_0x5c33b5(0x121)](/```json|```/g,'')[_0x5c33b5(0xb0)](),_0x357ed1=JSON[_0x5c33b5(0xf5)](_0x566e6e);return decisionCache[_0x58e9ce]={'decision':_0x357ed1,'timestamp':_0x1fbd95},_0x357ed1;}catch(_0x4fde10){return _0x3c8338['log']['warn']('ü§ñ\x20Butler\x20Brain\x20Error:\x20'+_0x4fde10[_0x5c33b5(0x105)]),decisionCache[_0x58e9ce]={'decision':{'approved':!![],'reason':_0x5c33b5(0x12f)},'timestamp':_0x1fbd95-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x5c33b5(0x12f)};}}async function runGeminiAnalysis(_0x53c061,_0x3c77ee=''){const _0x22d21a=a0_0x3f843c;if(!_0x53c061['geminiModel'])return;if(!canCallApi()){_0x53c061['log'][_0x22d21a(0xce)](_0x22d21a(0xc9));return;}if(_0x53c061[_0x22d21a(0x119)][_0x22d21a(0xc4)]===0x0)return;const _0x4ef5dd=_0x53c061[_0x22d21a(0x119)]['slice'](0x0,0xf),_0x2f40a1=_0x53c061[_0x22d21a(0xe9)],_0x11abca=PERSONA_MAPPING[_0x53c061[_0x22d21a(0xde)][_0x22d21a(0xfc)]||_0x22d21a(0x101)],_0x37b55e=_0x53c061[_0x22d21a(0xde)][_0x22d21a(0xdd)]||'Keine\x20Details.';let _0x3666d2=_0x22d21a(0xaf);try{const _0x595c14=await _0x53c061[_0x22d21a(0xc6)](_0x22d21a(0xd2));if(_0x595c14&&_0x595c14[_0x22d21a(0x135)])_0x3666d2=_0x595c14[_0x22d21a(0x135)];}catch(_0x38553c){}let _0x170097=![];try{const _0x35fbeb=await _0x53c061[_0x22d21a(0xc6)]('analysis.automation.autoApply');if(_0x35fbeb&&_0x35fbeb[_0x22d21a(0x135)])_0x170097=!![];}catch(_0x464e43){}const _0x519094=_0x22d21a(0xc2)+_0x11abca+_0x22d21a(0xc1)+_0x37b55e+_0x22d21a(0xd8)+_0x2f40a1+_0x22d21a(0x133)+_0x3666d2+_0x22d21a(0xe0)+JSON[_0x22d21a(0x107)](_0x4ef5dd)+_0x22d21a(0xe3)+_0x3c77ee+_0x22d21a(0xdf);try{updateApiTimestamp();const _0x778261=await _0x53c061['geminiModel'][_0x22d21a(0xb1)](_0x519094),_0x1fe6bd=JSON[_0x22d21a(0xf5)](_0x778261['response'][_0x22d21a(0xb5)]()['replace'](/```json|```/g,'')[_0x22d21a(0xb0)]());await _0x53c061[_0x22d21a(0xcc)]('analysis.lastResult',{'val':JSON[_0x22d21a(0x107)](_0x1fe6bd),'ack':!![]});if(_0x1fe6bd['summary'])await _0x53c061[_0x22d21a(0xcc)]('analysis.activitySummary',{'val':_0x1fe6bd['summary'],'ack':!![]});const _0x18b931={'timestamp':Date[_0x22d21a(0x106)](),'id':Date['now']()['toString'](),'analysis':{'activity':{'summary':_0x1fe6bd['summary'],'isAlert':_0x1fe6bd['isAlert'],'alertReason':_0x1fe6bd[_0x22d21a(0xe2)]},'comfort':{'automationProposal':_0x1fe6bd[_0x22d21a(0x10a)]}}};_0x53c061[_0x22d21a(0xbc)][_0x22d21a(0x10f)](_0x18b931);if(_0x53c061['analysisHistory'][_0x22d21a(0xc4)]>0x32)_0x53c061[_0x22d21a(0xbc)][_0x22d21a(0xcb)]();await _0x53c061[_0x22d21a(0xcc)](_0x22d21a(0x118),{'val':JSON[_0x22d21a(0x107)](_0x53c061[_0x22d21a(0xbc)]),'ack':!![]});const _0x53d1ef=_0x1fe6bd[_0x22d21a(0xe7)]||![];_0x53d1ef!==_0x53c061[_0x22d21a(0xfe)]&&(await _0x53c061['setStateAsync']('analysis.isAlert',{'val':_0x53d1ef,'ack':!![]}),_0x53c061['lastAlertState']=_0x53d1ef,_0x53d1ef&&(await _0x53c061[_0x22d21a(0xcc)](_0x22d21a(0xba),{'val':_0x1fe6bd['alertReason'],'ack':!![]}),setup[_0x22d21a(0x12d)](_0x53c061,'‚ö†Ô∏è\x20ALARM:\x20'+_0x1fe6bd[_0x22d21a(0xe2)],![],_0x1fe6bd[_0x22d21a(0x10d)])));if(_0x1fe6bd[_0x22d21a(0x10a)]&&_0x1fe6bd[_0x22d21a(0x10a)][_0x22d21a(0xeb)]){await _0x53c061[_0x22d21a(0xcc)](_0x22d21a(0x12c),{'val':!![],'ack':!![]}),await _0x53c061[_0x22d21a(0xcc)](_0x22d21a(0xd9),{'val':_0x1fe6bd[_0x22d21a(0x10a)][_0x22d21a(0xed)],'ack':!![]}),await _0x53c061[_0x22d21a(0xcc)]('analysis.automation.targetId',{'val':_0x1fe6bd[_0x22d21a(0x10a)]['targetId'],'ack':!![]}),await _0x53c061[_0x22d21a(0xcc)](_0x22d21a(0x116),{'val':JSON['stringify'](_0x1fe6bd[_0x22d21a(0x10a)][_0x22d21a(0xf0)]),'ack':!![]});if(_0x170097)executeAutomationAction(_0x53c061);}}catch(_0x5b01da){_0x53c061[_0x22d21a(0xfa)][_0x22d21a(0xd4)](_0x22d21a(0x11c)+_0x5b01da[_0x22d21a(0x105)]);}}async function createDailyDigest(_0x5d9023,_0x1c1233){const _0x1d15a1=a0_0x3f843c;if(!_0x5d9023[_0x1d15a1(0xf1)])return;if(!canCallApi()){await _0x5d9023['setStateAsync'](LTM_DP_STATUS,{'val':'Skipped\x20(Traffic)','ack':!![]});return;}await _0x5d9023['setStateAsync'](LTM_DP_STATUS,{'val':_0x1d15a1(0x12b),'ack':!![]});if(!_0x5d9023[_0x1d15a1(0xd6)]||_0x5d9023[_0x1d15a1(0x109)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x5d9023[_0x1d15a1(0xcc)](LTM_DP_STATUS,{'val':_0x1d15a1(0xcf),'ack':!![]});return;}const _0x41ba5a=JSON[_0x1d15a1(0xf5)](JSON[_0x1d15a1(0x107)](_0x5d9023[_0x1d15a1(0x109)])),_0x999f07=_0x41ba5a[_0x1d15a1(0xc4)],_0x2d73ea=_0x1d15a1(0xee)+JSON['stringify'](_0x41ba5a);try{updateApiTimestamp();const _0x38829d=await _0x5d9023[_0x1d15a1(0xd6)]['generateContent'](_0x2d73ea),_0x53863c=JSON[_0x1d15a1(0xf5)](_0x38829d[_0x1d15a1(0x134)]['text']()[_0x1d15a1(0x121)](/```json|```/g,'')[_0x1d15a1(0xb0)]()),_0x316071={'timestamp':new Date()['toISOString'](),'eventCount':_0x999f07,'summary':_0x53863c[_0x1d15a1(0xff)]||'Digest','activityLevel':_0x53863c[_0x1d15a1(0xe4)]||_0x1d15a1(0x10c),'systemMode':_0x5d9023['currentSystemMode']};_0x5d9023[_0x1d15a1(0x11b)]['push'](_0x316071);const _0x56f5a9=_0x5d9023[_0x1d15a1(0xde)][_0x1d15a1(0x114)]||0x3c;_0x5d9023[_0x1d15a1(0x11b)][_0x1d15a1(0xc4)]>_0x56f5a9&&_0x5d9023['dailyDigests'][_0x1d15a1(0x112)](0x0,_0x5d9023[_0x1d15a1(0x11b)][_0x1d15a1(0xc4)]-_0x56f5a9);await _0x5d9023[_0x1d15a1(0xcc)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x1d15a1(0x107)](_0x5d9023[_0x1d15a1(0x11b)]),'ack':!![]}),_0x5d9023[_0x1d15a1(0x109)]=[],await _0x5d9023[_0x1d15a1(0xcc)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x5d9023[_0x1d15a1(0x109)]),'ack':!![]}),await _0x5d9023[_0x1d15a1(0xcc)](LTM_DP_STATUS,{'val':_0x1d15a1(0xda),'ack':!![]});const _0x5935d8=_0x1d15a1(0x102)+_0x53863c[_0x1d15a1(0xff)]+_0x1d15a1(0x127)+_0x53863c[_0x1d15a1(0xe4)];setup[_0x1d15a1(0x12d)](_0x5d9023,_0x5935d8,![],![]);if(_0x5d9023[_0x1d15a1(0xf1)]&&_0x1c1233)_0x1c1233[_0x1d15a1(0xd0)](_0x5d9023,_0x1d15a1(0xf4),{'digest':_0x316071});}catch(_0x6ed829){_0x5d9023[_0x1d15a1(0xfa)]['error'](_0x6ed829[_0x1d15a1(0x105)]);}}async function runBaselineDriftAnalysis(_0x5a50a6){const _0x12c9d4=a0_0x3f843c;if(!_0x5a50a6[_0x12c9d4(0xf1)]||!_0x5a50a6[_0x12c9d4(0xd6)])return;if(!canCallApi())return;const _0xb7c4db=_0x5a50a6[_0x12c9d4(0xde)][_0x12c9d4(0xb2)]||0xe;if(_0x5a50a6[_0x12c9d4(0x11b)][_0x12c9d4(0xc4)]<_0xb7c4db+0x7){await _0x5a50a6[_0x12c9d4(0xcc)](_0x12c9d4(0x115),{'val':_0x12c9d4(0xcd),'ack':!![]});return;}const _0x23fad4=_0x5a50a6['dailyDigests'][_0x12c9d4(0xd3)](-_0xb7c4db),_0x5761fb=_0x5a50a6[_0x12c9d4(0x11b)][_0x12c9d4(0xd3)](0x0,_0x5a50a6['dailyDigests'][_0x12c9d4(0xc4)]-_0xb7c4db),_0xf5dce6=_0x12c9d4(0xbb)+JSON['stringify'](_0x5761fb)+_0x12c9d4(0x111)+JSON['stringify'](_0x23fad4);try{updateApiTimestamp();const _0x2dd52b=await _0x5a50a6['geminiModel']['generateContent'](_0xf5dce6),_0x525e59=JSON[_0x12c9d4(0xf5)](_0x2dd52b[_0x12c9d4(0x134)]['text']()['replace'](/```json|```/g,'')[_0x12c9d4(0xb0)]());_0x525e59[_0x12c9d4(0x11f)]&&(await _0x5a50a6['setStateAsync'](_0x12c9d4(0x115),{'val':_0x525e59[_0x12c9d4(0x11f)],'ack':!![]}),await _0x5a50a6[_0x12c9d4(0xcc)](_0x12c9d4(0xd5),{'val':_0x525e59['driftDetails'],'ack':!![]}),await _0x5a50a6[_0x12c9d4(0xcc)](_0x12c9d4(0xc8),{'val':Date['now'](),'ack':!![]}));}catch(_0x3f5af6){}}async function executeAutomationAction(_0x4ffcbe){const _0x3c94f2=a0_0x3f843c;try{const _0x5ca3a4=await _0x4ffcbe[_0x3c94f2(0xc6)](_0x3c94f2(0xea)),_0x394d47=await _0x4ffcbe['getStateAsync']('analysis.automation.targetValue');if(_0x5ca3a4&&_0x5ca3a4[_0x3c94f2(0x135)]&&_0x394d47){const _0x385bbf=_0x5ca3a4[_0x3c94f2(0x135)];let _0x322ec0=_0x394d47[_0x3c94f2(0x135)];try{_0x322ec0=JSON['parse'](_0x322ec0);}catch(_0x288d81){}_0x4ffcbe[_0x3c94f2(0xfa)]['info'](_0x3c94f2(0x122)+_0x385bbf+_0x3c94f2(0xb7)+_0x322ec0),await _0x4ffcbe[_0x3c94f2(0x126)](_0x385bbf,_0x322ec0);}else _0x4ffcbe[_0x3c94f2(0xfa)][_0x3c94f2(0xd1)](_0x3c94f2(0xe5));}catch(_0x2d3d1e){_0x4ffcbe[_0x3c94f2(0xfa)]['error']('BUTLER\x20Execution\x20Error:\x20'+_0x2d3d1e[_0x3c94f2(0x105)]);}}async function sendMorningBriefing(_0x505d54){const _0x37db15=a0_0x3f843c;if(!_0x505d54[_0x37db15(0xd6)]){_0x505d54[_0x37db15(0xfa)][_0x37db15(0xd1)](_0x37db15(0xb4));return;}_0x505d54[_0x37db15(0xfa)]['info']('üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...');try{updateApiTimestamp();const _0x452e55=_0x37db15(0x128),_0x5cf163=await _0x505d54['geminiModel'][_0x37db15(0xb1)](_0x452e55),_0x573f1a=_0x5cf163[_0x37db15(0x134)][_0x37db15(0xb5)]();_0x505d54[_0x37db15(0xfa)]['info'](_0x37db15(0x117)+_0x573f1a[_0x37db15(0xc4)]+_0x37db15(0xbe)),setup[_0x37db15(0x12d)](_0x505d54,'üåÖ\x20Morning\x20Briefing:\x0a'+_0x573f1a);}catch(_0x4b689d){_0x505d54[_0x37db15(0xfa)][_0x37db15(0xd4)](_0x37db15(0xe1)+_0x4b689d['message']);}}module[a0_0x3f843c(0x130)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};