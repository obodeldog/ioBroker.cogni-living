const a0_0x3750c6=a0_0x4c97;(function(_0x3fb5c2,_0x5ef22){const _0x56c9d2=a0_0x4c97,_0x2549a4=_0x3fb5c2();while(!![]){try{const _0x498d0c=-parseInt(_0x56c9d2(0x15a))/0x1+-parseInt(_0x56c9d2(0x19d))/0x2+-parseInt(_0x56c9d2(0x17f))/0x3*(-parseInt(_0x56c9d2(0x183))/0x4)+parseInt(_0x56c9d2(0x1b2))/0x5*(parseInt(_0x56c9d2(0x142))/0x6)+parseInt(_0x56c9d2(0x1b1))/0x7+-parseInt(_0x56c9d2(0x141))/0x8+-parseInt(_0x56c9d2(0x1b4))/0x9;if(_0x498d0c===_0x5ef22)break;else _0x2549a4['push'](_0x2549a4['shift']());}catch(_0x978a40){_0x2549a4['push'](_0x2549a4['shift']());}}}(a0_0x8a67,0x6ba9f));const a0_0x2ec0bb=(function(){let _0x1a59fc=!![];return function(_0x3fa12f,_0x15cbb5){const _0xf634e0=_0x1a59fc?function(){const _0x28445d=a0_0x4c97;if(_0x15cbb5){const _0x3e9364=_0x15cbb5[_0x28445d(0x18c)](_0x3fa12f,arguments);return _0x15cbb5=null,_0x3e9364;}}:function(){};return _0x1a59fc=![],_0xf634e0;};}()),a0_0x308ad3=a0_0x2ec0bb(this,function(){const _0x50572f=a0_0x4c97;return a0_0x308ad3[_0x50572f(0x14c)]()[_0x50572f(0x185)]('(((.+)+)+)+$')[_0x50572f(0x14c)]()[_0x50572f(0x165)](a0_0x308ad3)[_0x50572f(0x185)]('(((.+)+)+)+$');});a0_0x308ad3();'use strict';function a0_0x8a67(){const _0xa05ff9=['toString','Success','text','analysis.automation.autoApply','analysis.automation.patternDetected','weatherInstance','decision','üåÖ\x20Morning\x20Briefing:\x0a','analysis.automation.targetValue','KI\x20offline\x20(Fallback)','description','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','livingContext','\x20->\x20','166837LlSXRu','KI-Fehler\x20(Fallback)','geminiModel','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','rawEventLog','./setup','approved','debug','useWeather','toFixed','val','constructor','now','isAlert','error','analysis.alertReason','.\x20EVENTS:\x20','.forecast.current.state','Gemini\x20Error:\x20','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','Unbekannt','analysis.automation.description','analysis.lastResult','setStateAsync','analysis.automation.targetId','log','Sicherheit\x20geht\x20vor.','analysisHistory','ltmStbWindowDays','toISOString','.Current.WeatherText','ü§ñ\x20Butler\x20Brain\x20Error:\x20','Skipped\x20(No\x20AI\x20or\x20Data)','.forecast.current.temperature','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','message','trim','226641zouUFu','Started...','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','28tVqsLg','toLocaleTimeString','search','analysis.analysisHistory','\x0aSTB:\x20','getForeignStateAsync','targetId','generateContent','getStateAsync','apply','push','Unbekannt\x20(Kein\x20Sensor)','currentSystemMode','LTM.driftAnalysis.driftDetails','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','pop','LTM.driftAnalysis.baselineDrift','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','analysis.isAlert','unshift','LTM.dailyDigests',',\x20Wetter:\x20','warn','Nacht','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','generic','158484dNZJXx',',\x20Lichtverh√§ltnisse:\x20','summary','dailyDigests','replace','.Current.IsNight','sendNotification','response','isProVersion','normal','stringify','length','lastAlertState','\x20=\x20','baselineDrift','system.presenceWho','parse','aiPersona','driftDetails','Briefing\x20Error:\x20','6092177lpPEVZ','341480zBuTjU','Digest','9296631CMLufa','Tag','automationProposal','eventHistory','slice','config','.Current.Temperature','activityLevel','LTM.processingStatus','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','.\x20SYSTEM_MODE:\x20','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','¬∞C,\x20','send','2350200CWrzJM','54AquuIa','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','Wetterdaten\x20nicht\x20abrufbar','ltmLtbWindowDays','reason','alertReason','.\x20ANWESEND:\x20','.\x20KONTEXT:\x20','ANALYZE_HEALTH','analysis.activitySummary'];a0_0x8a67=function(){return _0xa05ff9;};return a0_0x8a67();}const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require(a0_0x3750c6(0x15f)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x3750c6(0x197),LTM_DP_STATUS=a0_0x3750c6(0x13a),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':a0_0x3750c6(0x13b),'family':a0_0x3750c6(0x13e),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':a0_0x3750c6(0x174),'energy_saver':'PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'};function canCallApi(){const _0x420a06=a0_0x3750c6,_0x2225a6=Date[_0x420a06(0x166)]();return _0x2225a6-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}function a0_0x4c97(_0xe844da,_0x2ac5a8){const _0xc3915f=a0_0x8a67();return a0_0x4c97=function(_0x308ad3,_0x2ec0bb){_0x308ad3=_0x308ad3-0x138;let _0x8a6708=_0xc3915f[_0x308ad3];return _0x8a6708;},a0_0x4c97(_0xe844da,_0x2ac5a8);}async function getWeatherContext(_0x26c838){const _0x5cd0fe=a0_0x3750c6;if(!_0x26c838['config'][_0x5cd0fe(0x162)]||!_0x26c838['config']['weatherInstance'])return _0x5cd0fe(0x18e);try{const _0x424adc=_0x26c838[_0x5cd0fe(0x1b9)][_0x5cd0fe(0x151)];let _0x4a5ecc=await _0x26c838['getForeignStateAsync'](_0x424adc+_0x5cd0fe(0x138));if(!_0x4a5ecc)_0x4a5ecc=await _0x26c838[_0x5cd0fe(0x188)](_0x424adc+_0x5cd0fe(0x17b));let _0x4bfe3f=await _0x26c838[_0x5cd0fe(0x188)](_0x424adc+_0x5cd0fe(0x178));if(!_0x4bfe3f)_0x4bfe3f=await _0x26c838[_0x5cd0fe(0x188)](_0x424adc+_0x5cd0fe(0x16b));let _0x8de359=_0x5cd0fe(0x16e);const _0x573105=await _0x26c838['getForeignStateAsync'](_0x424adc+_0x5cd0fe(0x1a2));if(_0x573105)_0x8de359=_0x573105[_0x5cd0fe(0x164)]?_0x5cd0fe(0x19a):_0x5cd0fe(0x1b5);if(_0x4a5ecc&&_0x4bfe3f)return _0x4a5ecc['val']+_0x5cd0fe(0x13f)+_0x4bfe3f[_0x5cd0fe(0x164)]+_0x5cd0fe(0x19e)+_0x8de359;}catch(_0x4c0ba4){}return _0x5cd0fe(0x144);}async function consultButler(_0x421db0,_0xc05342,_0x4bedf0,_0x57ec38){const _0x5d3cfa=a0_0x3750c6;if(!_0x421db0['geminiModel'])return{'approved':!![],'reason':_0x5d3cfa(0x155)};const _0x44986e=Date[_0x5d3cfa(0x166)]();if(decisionCache[_0xc05342]&&_0x44986e-decisionCache[_0xc05342]['timestamp']<CACHE_TTL_MS){const _0x4fc086=decisionCache[_0xc05342][_0x5d3cfa(0x152)];return _0x421db0[_0x5d3cfa(0x173)][_0x5d3cfa(0x161)]('ü§ñ\x20Butler\x20Cache\x20Hit:\x20'+_0xc05342+_0x5d3cfa(0x159)+(_0x4fc086[_0x5d3cfa(0x160)]?'OK':'NO')+'\x20('+_0x4fc086[_0x5d3cfa(0x146)]+')'),_0x4fc086;}if(!canCallApi())return _0x421db0[_0x5d3cfa(0x173)][_0x5d3cfa(0x161)](_0x5d3cfa(0x182)+_0xc05342+'\x20√ºbersprungen\x20(Auto-Approved).'),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x4af0d8=new Date()[_0x5d3cfa(0x184)](),_0x30bc25=await getWeatherContext(_0x421db0),_0x3a1bb6=PERSONA_MAPPING[_0x421db0[_0x5d3cfa(0x1b9)][_0x5d3cfa(0x1ae)]||_0x5d3cfa(0x19c)],_0xa46ee4=_0x5d3cfa(0x143)+_0x4af0d8+_0x5d3cfa(0x198)+_0x30bc25+_0x5d3cfa(0x17c)+(_0x57ec38*0x64)[_0x5d3cfa(0x163)](0x0)+'%)\x20nach\x20\x22'+_0xc05342+_0x5d3cfa(0x15d)+_0x4bedf0+_0x5d3cfa(0x16d)+_0x3a1bb6+_0x5d3cfa(0x181);try{updateApiTimestamp();const _0x5f23b7=await _0x421db0['geminiModel'][_0x5d3cfa(0x18a)](_0xa46ee4),_0x4616a9=_0x5f23b7['response'][_0x5d3cfa(0x14e)]()[_0x5d3cfa(0x1a1)](/```json|```/g,'')['trim'](),_0x1a7d3c=JSON[_0x5d3cfa(0x1ad)](_0x4616a9);return decisionCache[_0xc05342]={'decision':_0x1a7d3c,'timestamp':_0x44986e},_0x1a7d3c;}catch(_0xbcc660){return _0x421db0[_0x5d3cfa(0x173)][_0x5d3cfa(0x199)](_0x5d3cfa(0x179)+_0xbcc660[_0x5d3cfa(0x17d)]),decisionCache[_0xc05342]={'decision':{'approved':!![],'reason':_0x5d3cfa(0x15b)},'timestamp':_0x44986e-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x5d3cfa(0x15b)};}}async function runGeminiAnalysis(_0x4bdd23,_0x2df19e=''){const _0x1b9c6c=a0_0x3750c6;if(!_0x4bdd23[_0x1b9c6c(0x15c)])return;if(!canCallApi()){_0x4bdd23[_0x1b9c6c(0x173)][_0x1b9c6c(0x161)](_0x1b9c6c(0x191));return;}if(_0x4bdd23[_0x1b9c6c(0x1b7)][_0x1b9c6c(0x1a8)]===0x0)return;const _0x107471=_0x4bdd23['eventHistory'][_0x1b9c6c(0x1b8)](0x0,0xf),_0x219075=_0x4bdd23[_0x1b9c6c(0x18f)],_0x54aab4=PERSONA_MAPPING[_0x4bdd23[_0x1b9c6c(0x1b9)]['aiPersona']||_0x1b9c6c(0x19c)],_0xa2eec5=_0x4bdd23['config'][_0x1b9c6c(0x158)]||'Keine\x20Details.';let _0x5b9742='Unbekannt';try{const _0x435ada=await _0x4bdd23[_0x1b9c6c(0x18b)](_0x1b9c6c(0x1ac));if(_0x435ada&&_0x435ada[_0x1b9c6c(0x164)])_0x5b9742=_0x435ada[_0x1b9c6c(0x164)];}catch(_0x4983e3){}let _0x382721=![];try{const _0x1f0525=await _0x4bdd23[_0x1b9c6c(0x18b)](_0x1b9c6c(0x14f));if(_0x1f0525&&_0x1f0525['val'])_0x382721=!![];}catch(_0x50e211){}const _0x29c88d=_0x1b9c6c(0x19b)+_0x54aab4+_0x1b9c6c(0x149)+_0xa2eec5+_0x1b9c6c(0x13c)+_0x219075+_0x1b9c6c(0x148)+_0x5b9742+_0x1b9c6c(0x16a)+JSON[_0x1b9c6c(0x1a7)](_0x107471)+'.\x20EMERGENCY:\x20'+_0x2df19e+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x460aef=await _0x4bdd23['geminiModel'][_0x1b9c6c(0x18a)](_0x29c88d),_0x1f84d8=JSON['parse'](_0x460aef[_0x1b9c6c(0x1a4)][_0x1b9c6c(0x14e)]()[_0x1b9c6c(0x1a1)](/```json|```/g,'')[_0x1b9c6c(0x17e)]());await _0x4bdd23[_0x1b9c6c(0x171)](_0x1b9c6c(0x170),{'val':JSON[_0x1b9c6c(0x1a7)](_0x1f84d8),'ack':!![]});if(_0x1f84d8[_0x1b9c6c(0x19f)])await _0x4bdd23[_0x1b9c6c(0x171)](_0x1b9c6c(0x14b),{'val':_0x1f84d8[_0x1b9c6c(0x19f)],'ack':!![]});const _0x1fd91f={'timestamp':Date[_0x1b9c6c(0x166)](),'id':Date['now']()[_0x1b9c6c(0x14c)](),'analysis':{'activity':{'summary':_0x1f84d8[_0x1b9c6c(0x19f)],'isAlert':_0x1f84d8[_0x1b9c6c(0x167)],'alertReason':_0x1f84d8['alertReason']},'comfort':{'automationProposal':_0x1f84d8[_0x1b9c6c(0x1b6)]}}};_0x4bdd23[_0x1b9c6c(0x175)][_0x1b9c6c(0x196)](_0x1fd91f);if(_0x4bdd23[_0x1b9c6c(0x175)][_0x1b9c6c(0x1a8)]>0x32)_0x4bdd23[_0x1b9c6c(0x175)][_0x1b9c6c(0x192)]();await _0x4bdd23['setStateAsync'](_0x1b9c6c(0x186),{'val':JSON[_0x1b9c6c(0x1a7)](_0x4bdd23[_0x1b9c6c(0x175)]),'ack':!![]});const _0x1e1771=_0x1f84d8[_0x1b9c6c(0x167)]||![];_0x1e1771!==_0x4bdd23[_0x1b9c6c(0x1a9)]&&(await _0x4bdd23['setStateAsync'](_0x1b9c6c(0x195),{'val':_0x1e1771,'ack':!![]}),_0x4bdd23[_0x1b9c6c(0x1a9)]=_0x1e1771,_0x1e1771&&(await _0x4bdd23[_0x1b9c6c(0x171)](_0x1b9c6c(0x169),{'val':_0x1f84d8[_0x1b9c6c(0x147)],'ack':!![]}),setup[_0x1b9c6c(0x1a3)](_0x4bdd23,'‚ö†Ô∏è\x20ALARM:\x20'+_0x1f84d8['alertReason'],![],_0x1f84d8['isEmergency'])));if(_0x1f84d8[_0x1b9c6c(0x1b6)]&&_0x1f84d8['automationProposal']['detected']){await _0x4bdd23[_0x1b9c6c(0x171)](_0x1b9c6c(0x150),{'val':!![],'ack':!![]}),await _0x4bdd23[_0x1b9c6c(0x171)](_0x1b9c6c(0x16f),{'val':_0x1f84d8[_0x1b9c6c(0x1b6)][_0x1b9c6c(0x156)],'ack':!![]}),await _0x4bdd23['setStateAsync'](_0x1b9c6c(0x172),{'val':_0x1f84d8[_0x1b9c6c(0x1b6)][_0x1b9c6c(0x189)],'ack':!![]}),await _0x4bdd23['setStateAsync']('analysis.automation.targetValue',{'val':JSON[_0x1b9c6c(0x1a7)](_0x1f84d8[_0x1b9c6c(0x1b6)]['targetValue']),'ack':!![]});if(_0x382721)executeAutomationAction(_0x4bdd23);}}catch(_0x50800e){_0x4bdd23[_0x1b9c6c(0x173)][_0x1b9c6c(0x168)](_0x1b9c6c(0x16c)+_0x50800e[_0x1b9c6c(0x17d)]);}}async function createDailyDigest(_0x1c4007,_0x189acb){const _0x2ff6a5=a0_0x3750c6;if(!_0x1c4007[_0x2ff6a5(0x1a5)])return;if(!canCallApi()){await _0x1c4007[_0x2ff6a5(0x171)](LTM_DP_STATUS,{'val':'Skipped\x20(Traffic)','ack':!![]});return;}await _0x1c4007[_0x2ff6a5(0x171)](LTM_DP_STATUS,{'val':_0x2ff6a5(0x180),'ack':!![]});if(!_0x1c4007[_0x2ff6a5(0x15c)]||_0x1c4007[_0x2ff6a5(0x15e)][_0x2ff6a5(0x1a8)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x1c4007[_0x2ff6a5(0x171)](LTM_DP_STATUS,{'val':_0x2ff6a5(0x17a),'ack':!![]});return;}const _0x673b6e=JSON[_0x2ff6a5(0x1ad)](JSON[_0x2ff6a5(0x1a7)](_0x1c4007['rawEventLog'])),_0x420ab6=_0x673b6e[_0x2ff6a5(0x1a8)],_0x3cea8f=_0x2ff6a5(0x157)+JSON[_0x2ff6a5(0x1a7)](_0x673b6e);try{updateApiTimestamp();const _0x3c4905=await _0x1c4007[_0x2ff6a5(0x15c)][_0x2ff6a5(0x18a)](_0x3cea8f),_0x3e21ce=JSON[_0x2ff6a5(0x1ad)](_0x3c4905[_0x2ff6a5(0x1a4)]['text']()['replace'](/```json|```/g,'')[_0x2ff6a5(0x17e)]()),_0x1e8613={'timestamp':new Date()[_0x2ff6a5(0x177)](),'eventCount':_0x420ab6,'summary':_0x3e21ce[_0x2ff6a5(0x19f)]||_0x2ff6a5(0x1b3),'activityLevel':_0x3e21ce[_0x2ff6a5(0x139)]||_0x2ff6a5(0x1a6),'systemMode':_0x1c4007[_0x2ff6a5(0x18f)]};_0x1c4007[_0x2ff6a5(0x1a0)][_0x2ff6a5(0x18d)](_0x1e8613);const _0x3b5dd6=_0x1c4007[_0x2ff6a5(0x1b9)][_0x2ff6a5(0x145)]||0x3c;_0x1c4007[_0x2ff6a5(0x1a0)]['length']>_0x3b5dd6&&_0x1c4007[_0x2ff6a5(0x1a0)]['splice'](0x0,_0x1c4007[_0x2ff6a5(0x1a0)][_0x2ff6a5(0x1a8)]-_0x3b5dd6);await _0x1c4007[_0x2ff6a5(0x171)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x2ff6a5(0x1a7)](_0x1c4007[_0x2ff6a5(0x1a0)]),'ack':!![]}),_0x1c4007[_0x2ff6a5(0x15e)]=[],await _0x1c4007[_0x2ff6a5(0x171)](LTM_DP_RAW_LOG,{'val':JSON[_0x2ff6a5(0x1a7)](_0x1c4007[_0x2ff6a5(0x15e)]),'ack':!![]}),await _0x1c4007[_0x2ff6a5(0x171)](LTM_DP_STATUS,{'val':_0x2ff6a5(0x14d),'ack':!![]});if(_0x1c4007[_0x2ff6a5(0x1a5)]&&_0x189acb)_0x189acb[_0x2ff6a5(0x140)](_0x1c4007,_0x2ff6a5(0x14a),{'digest':_0x1e8613});}catch(_0x401eec){_0x1c4007[_0x2ff6a5(0x173)][_0x2ff6a5(0x168)](_0x401eec[_0x2ff6a5(0x17d)]);}}async function runBaselineDriftAnalysis(_0x1f722e){const _0x2a2281=a0_0x3750c6;if(!_0x1f722e[_0x2a2281(0x1a5)]||!_0x1f722e[_0x2a2281(0x15c)])return;if(!canCallApi())return;const _0x2c4261=_0x1f722e['config'][_0x2a2281(0x176)]||0xe;if(_0x1f722e[_0x2a2281(0x1a0)][_0x2a2281(0x1a8)]<_0x2c4261+0x7){await _0x1f722e['setStateAsync'](_0x2a2281(0x193),{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x33abff=_0x1f722e[_0x2a2281(0x1a0)][_0x2a2281(0x1b8)](-_0x2c4261),_0x496036=_0x1f722e['dailyDigests'][_0x2a2281(0x1b8)](0x0,_0x1f722e['dailyDigests'][_0x2a2281(0x1a8)]-_0x2c4261),_0x3b8c93='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x2a2281(0x1a7)](_0x496036)+_0x2a2281(0x187)+JSON['stringify'](_0x33abff);try{updateApiTimestamp();const _0x56a369=await _0x1f722e[_0x2a2281(0x15c)][_0x2a2281(0x18a)](_0x3b8c93),_0x47158e=JSON['parse'](_0x56a369[_0x2a2281(0x1a4)][_0x2a2281(0x14e)]()[_0x2a2281(0x1a1)](/```json|```/g,'')[_0x2a2281(0x17e)]());_0x47158e[_0x2a2281(0x1ab)]&&(await _0x1f722e['setStateAsync'](_0x2a2281(0x193),{'val':_0x47158e[_0x2a2281(0x1ab)],'ack':!![]}),await _0x1f722e[_0x2a2281(0x171)](_0x2a2281(0x190),{'val':_0x47158e[_0x2a2281(0x1af)],'ack':!![]}),await _0x1f722e[_0x2a2281(0x171)]('LTM.driftAnalysis.lastCheck',{'val':Date[_0x2a2281(0x166)](),'ack':!![]}));}catch(_0x5318d4){}}async function executeAutomationAction(_0x10cb9d){const _0x2cd30b=a0_0x3750c6;try{const _0x327470=await _0x10cb9d[_0x2cd30b(0x18b)]('analysis.automation.targetId'),_0x17109d=await _0x10cb9d[_0x2cd30b(0x18b)](_0x2cd30b(0x154));if(_0x327470&&_0x327470[_0x2cd30b(0x164)]&&_0x17109d){const _0x6fb431=_0x327470[_0x2cd30b(0x164)];let _0x48e5f0=_0x17109d[_0x2cd30b(0x164)];try{_0x48e5f0=JSON[_0x2cd30b(0x1ad)](_0x48e5f0);}catch(_0x2163d3){}_0x10cb9d[_0x2cd30b(0x173)]['info'](_0x2cd30b(0x13d)+_0x6fb431+_0x2cd30b(0x1aa)+_0x48e5f0),await _0x10cb9d['setForeignStateAsync'](_0x6fb431,_0x48e5f0);}else _0x10cb9d[_0x2cd30b(0x173)][_0x2cd30b(0x199)]('ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x3a302c){_0x10cb9d[_0x2cd30b(0x173)][_0x2cd30b(0x168)]('BUTLER\x20Execution\x20Error:\x20'+_0x3a302c['message']);}}async function sendMorningBriefing(_0x4913f4){const _0x1a2a90=a0_0x3750c6;if(!_0x4913f4[_0x1a2a90(0x15c)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x44d321=_0x1a2a90(0x194),_0x5e935d=await _0x4913f4[_0x1a2a90(0x15c)][_0x1a2a90(0x18a)](_0x44d321),_0x3fb8ad=_0x5e935d[_0x1a2a90(0x1a4)][_0x1a2a90(0x14e)]();setup[_0x1a2a90(0x1a3)](_0x4913f4,_0x1a2a90(0x153)+_0x3fb8ad);}catch(_0x471ac5){_0x4913f4[_0x1a2a90(0x173)][_0x1a2a90(0x168)](_0x1a2a90(0x1b0)+_0x471ac5[_0x1a2a90(0x17d)]);}}module['exports']={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};