const a0_0x218808=a0_0x49a8;(function(_0x2ddf55,_0x4a90ba){const _0x19f551=a0_0x49a8,_0x1f9df8=_0x2ddf55();while(!![]){try{const _0x5166d9=-parseInt(_0x19f551(0x16d))/0x1+parseInt(_0x19f551(0x1a1))/0x2*(-parseInt(_0x19f551(0x1a9))/0x3)+-parseInt(_0x19f551(0x1ae))/0x4+parseInt(_0x19f551(0x182))/0x5*(parseInt(_0x19f551(0x1b5))/0x6)+-parseInt(_0x19f551(0x1a8))/0x7+parseInt(_0x19f551(0x17b))/0x8+-parseInt(_0x19f551(0x175))/0x9*(-parseInt(_0x19f551(0x186))/0xa);if(_0x5166d9===_0x4a90ba)break;else _0x1f9df8['push'](_0x1f9df8['shift']());}catch(_0x92ec25){_0x1f9df8['push'](_0x1f9df8['shift']());}}}(a0_0x3746,0xbbfa3));const a0_0x2df3fd=(function(){let _0x3bf1a6=!![];return function(_0x1528f7,_0x37d95e){const _0x4b5e8d=_0x3bf1a6?function(){const _0x3ff30e=a0_0x49a8;if(_0x37d95e){const _0x21e6c8=_0x37d95e[_0x3ff30e(0x16e)](_0x1528f7,arguments);return _0x37d95e=null,_0x21e6c8;}}:function(){};return _0x3bf1a6=![],_0x4b5e8d;};}()),a0_0x369c1a=a0_0x2df3fd(this,function(){const _0x7ee551=a0_0x49a8;return a0_0x369c1a[_0x7ee551(0x16f)]()['search']('(((.+)+)+)+$')[_0x7ee551(0x16f)]()['constructor'](a0_0x369c1a)['search'](_0x7ee551(0x184));});function a0_0x49a8(_0x39ffde,_0x5351ce){const _0x394f0d=a0_0x3746();return a0_0x49a8=function(_0x369c1a,_0x2df3fd){_0x369c1a=_0x369c1a-0x139;let _0x3746b1=_0x394f0d[_0x369c1a];return _0x3746b1;},a0_0x49a8(_0x39ffde,_0x5351ce);}a0_0x369c1a();function a0_0x3746(){const _0x5cf2a0=['\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','LTM.driftAnalysis.driftDetails','models/gemini-flash-latest','819207MLDypx','automationProposal','currentSystemMode','Sicherheit\x20geht\x20vor.','splice','text','6574352CouTFJ','LTM.processingStatus','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','analysisHistory','baselineDrift','KI-Fehler\x20(Fallback)','generateContent','5092385GPOcRM','Success','(((.+)+)+)+$','üåÖ\x20Morning\x20Briefing:\x0a','170YqwvcI','length','.Current.IsNight','.\x20EMERGENCY:\x20','LTM.dailyDigests',').\x20Sending\x20notification...','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','¬∞C,\x20','unshift','toISOString','Skipped\x20(Traffic)','alertReason','livingContext','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','KI\x20offline\x20(Fallback)','geminiModel','message','approved','pop','useWeather','\x0aAktivit√§t:\x20','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','getForeignStateAsync','analysis.automation.targetValue','targetId','eventHistory','debug','121942yHeEOT','isProVersion','warn','LTM.rawEventLog','LTM.driftAnalysis.baselineDrift','summary','\x20->\x20','10632041AtJMYl','9HSyijY','generic','isAlert',',\x20Wetter:\x20','dailyDigests','62572FjufLJ','%)\x20nach\x20\x22','üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','exports','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','lastAlertState','6XZxkFC','aiPersona','trim','.Current.Temperature','Unbekannt\x20(Kein\x20Sensor)','isEmergency','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','Gemini\x20Error:\x20','analysis.automation.targetId','push','description','timestamp','response','ltmStbWindowDays','.\x20SYSTEM_MODE:\x20','@google/generative-ai','analysis.analysisHistory','normal','activityLevel','\x20=\x20','stringify','reason','analysis.automation.patternDetected','.Current.WeatherText','üìÖ\x20Daily\x20Digest:\x0a','config','error','analysis.lastResult','ltmLtbWindowDays','now','rawEventLog','getStateAsync','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','üåÖ\x20Briefing\x20generated\x20(Length:\x20','setStateAsync','detected','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','sendNotification','N/A\x20(Learning)','slice','.forecast.current.temperature','toFixed','\x20√ºbersprungen\x20(Auto-Approved).','ü§ñ\x20Butler\x20Brain\x20Error:\x20','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','\x0aSTB:\x20','Keine\x20Details.','ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','val','Nacht','.\x20ANWESEND:\x20','analysis.alertReason','send','system.presenceWho','parse','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','Digest','replace','weatherInstance','info','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','900288FqCElx','apply','toString','driftDetails','log'];a0_0x3746=function(){return _0x5cf2a0;};return a0_0x3746();}'use strict';const {GoogleGenerativeAI}=require(a0_0x218808(0x13e)),setup=require('./setup'),GEMINI_MODEL=a0_0x218808(0x174),LTM_DP_DAILY_DIGESTS=a0_0x218808(0x18a),LTM_DP_STATUS=a0_0x218808(0x17c),LTM_DP_RAW_LOG=a0_0x218808(0x1a4),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':a0_0x218808(0x167),'family':a0_0x218808(0x19b),'single_comfort':a0_0x218808(0x16c),'security':a0_0x218808(0x178),'energy_saver':a0_0x218808(0x18c)};function canCallApi(){const _0x5b1743=a0_0x218808,_0x37ac69=Date[_0x5b1743(0x14c)]();return _0x37ac69-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x17baa5=a0_0x218808;lastGlobalApiCall=Date[_0x17baa5(0x14c)]();}async function getWeatherContext(_0x2f734c){const _0x5d2d70=a0_0x218808;if(!_0x2f734c[_0x5d2d70(0x148)][_0x5d2d70(0x199)]||!_0x2f734c['config'][_0x5d2d70(0x16a)])return _0x5d2d70(0x1b9);try{const _0x100bc6=_0x2f734c[_0x5d2d70(0x148)][_0x5d2d70(0x16a)];let _0x1acc00=await _0x2f734c[_0x5d2d70(0x19c)](_0x100bc6+_0x5d2d70(0x1b8));if(!_0x1acc00)_0x1acc00=await _0x2f734c[_0x5d2d70(0x19c)](_0x100bc6+_0x5d2d70(0x157));let _0x48e6cc=await _0x2f734c['getForeignStateAsync'](_0x100bc6+_0x5d2d70(0x146));if(!_0x48e6cc)_0x48e6cc=await _0x2f734c[_0x5d2d70(0x19c)](_0x100bc6+'.forecast.current.state');let _0x1391fd='Unbekannt';const _0x4c703c=await _0x2f734c[_0x5d2d70(0x19c)](_0x100bc6+_0x5d2d70(0x188));if(_0x4c703c)_0x1391fd=_0x4c703c[_0x5d2d70(0x160)]?_0x5d2d70(0x161):'Tag';if(_0x1acc00&&_0x48e6cc)return _0x1acc00[_0x5d2d70(0x160)]+_0x5d2d70(0x18d)+_0x48e6cc[_0x5d2d70(0x160)]+',\x20Lichtverh√§ltnisse:\x20'+_0x1391fd;}catch(_0x230592){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x4191a1,_0x162a34,_0x4f0447,_0x5ee4dc){const _0x12986e=a0_0x218808;if(!_0x4191a1['geminiModel'])return{'approved':!![],'reason':_0x12986e(0x194)};const _0x1393ff=Date[_0x12986e(0x14c)]();if(decisionCache[_0x162a34]&&_0x1393ff-decisionCache[_0x162a34][_0x12986e(0x13a)]<CACHE_TTL_MS){const _0xd7fe6a=decisionCache[_0x162a34]['decision'];return _0x4191a1[_0x12986e(0x171)][_0x12986e(0x1a0)]('ü§ñ\x20Butler\x20Cache\x20Hit:\x20'+_0x162a34+_0x12986e(0x1a7)+(_0xd7fe6a[_0x12986e(0x197)]?'OK':'NO')+'\x20('+_0xd7fe6a[_0x12986e(0x144)]+')'),_0xd7fe6a;}if(!canCallApi())return _0x4191a1['log'][_0x12986e(0x1a0)]('ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20'+_0x162a34+_0x12986e(0x159)),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0xc8d124=new Date()['toLocaleTimeString'](),_0x46d4cd=await getWeatherContext(_0x4191a1),_0x3a842a=PERSONA_MAPPING[_0x4191a1[_0x12986e(0x148)][_0x12986e(0x1b6)]||_0x12986e(0x1aa)],_0x1b758c=_0x12986e(0x153)+_0xc8d124+_0x12986e(0x1ac)+_0x46d4cd+_0x12986e(0x14f)+(_0x5ee4dc*0x64)[_0x12986e(0x158)](0x0)+_0x12986e(0x1af)+_0x162a34+_0x12986e(0x1b3)+_0x4f0447+_0x12986e(0x193)+_0x3a842a+_0x12986e(0x172);try{updateApiTimestamp();const _0x6c8567=await _0x4191a1[_0x12986e(0x195)][_0x12986e(0x181)](_0x1b758c),_0xef2dc3=_0x6c8567[_0x12986e(0x13b)][_0x12986e(0x17a)]()[_0x12986e(0x169)](/```json|```/g,'')[_0x12986e(0x1b7)](),_0x36b490=JSON['parse'](_0xef2dc3);return decisionCache[_0x162a34]={'decision':_0x36b490,'timestamp':_0x1393ff},_0x36b490;}catch(_0x501df0){return _0x4191a1[_0x12986e(0x171)][_0x12986e(0x1a3)](_0x12986e(0x15a)+_0x501df0[_0x12986e(0x196)]),decisionCache[_0x162a34]={'decision':{'approved':!![],'reason':_0x12986e(0x180)},'timestamp':_0x1393ff-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x12986e(0x180)};}}async function runGeminiAnalysis(_0x4526b7,_0x3c869a=''){const _0x1a732f=a0_0x218808;if(!_0x4526b7[_0x1a732f(0x195)])return;if(!canCallApi()){_0x4526b7[_0x1a732f(0x171)]['debug'](_0x1a732f(0x15f));return;}if(_0x4526b7[_0x1a732f(0x19f)][_0x1a732f(0x187)]===0x0)return;const _0x1bd44f=_0x4526b7[_0x1a732f(0x19f)][_0x1a732f(0x156)](0x0,0xf),_0x5172b6=_0x4526b7[_0x1a732f(0x177)],_0x308dfb=PERSONA_MAPPING[_0x4526b7[_0x1a732f(0x148)][_0x1a732f(0x1b6)]||_0x1a732f(0x1aa)],_0x47f0fa=_0x4526b7[_0x1a732f(0x148)][_0x1a732f(0x192)]||_0x1a732f(0x15d);let _0x3018a2='Unbekannt';try{const _0x3ee198=await _0x4526b7['getStateAsync'](_0x1a732f(0x165));if(_0x3ee198&&_0x3ee198[_0x1a732f(0x160)])_0x3018a2=_0x3ee198[_0x1a732f(0x160)];}catch(_0x454fa7){}let _0x18c68e=![];try{const _0x1a6c40=await _0x4526b7['getStateAsync']('analysis.automation.autoApply');if(_0x1a6c40&&_0x1a6c40[_0x1a732f(0x160)])_0x18c68e=!![];}catch(_0x3f1d78){}const _0x1f329e=_0x1a732f(0x1b1)+_0x308dfb+'.\x20KONTEXT:\x20'+_0x47f0fa+_0x1a732f(0x13d)+_0x5172b6+_0x1a732f(0x162)+_0x3018a2+'.\x20EVENTS:\x20'+JSON[_0x1a732f(0x143)](_0x1bd44f)+_0x1a732f(0x189)+_0x3c869a+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x36bc36=await _0x4526b7[_0x1a732f(0x195)]['generateContent'](_0x1f329e),_0x238c69=JSON[_0x1a732f(0x166)](_0x36bc36[_0x1a732f(0x13b)]['text']()[_0x1a732f(0x169)](/```json|```/g,'')[_0x1a732f(0x1b7)]());await _0x4526b7[_0x1a732f(0x151)](_0x1a732f(0x14a),{'val':JSON[_0x1a732f(0x143)](_0x238c69),'ack':!![]});if(_0x238c69[_0x1a732f(0x1a6)])await _0x4526b7['setStateAsync']('analysis.activitySummary',{'val':_0x238c69[_0x1a732f(0x1a6)],'ack':!![]});const _0xe7ac57={'timestamp':Date[_0x1a732f(0x14c)](),'id':Date[_0x1a732f(0x14c)]()[_0x1a732f(0x16f)](),'analysis':{'activity':{'summary':_0x238c69[_0x1a732f(0x1a6)],'isAlert':_0x238c69[_0x1a732f(0x1ab)],'alertReason':_0x238c69[_0x1a732f(0x191)]},'comfort':{'automationProposal':_0x238c69['automationProposal']}}};_0x4526b7[_0x1a732f(0x17e)][_0x1a732f(0x18e)](_0xe7ac57);if(_0x4526b7['analysisHistory'][_0x1a732f(0x187)]>0x32)_0x4526b7[_0x1a732f(0x17e)][_0x1a732f(0x198)]();await _0x4526b7[_0x1a732f(0x151)](_0x1a732f(0x13f),{'val':JSON[_0x1a732f(0x143)](_0x4526b7[_0x1a732f(0x17e)]),'ack':!![]});const _0x5acd0=_0x238c69[_0x1a732f(0x1ab)]||![];_0x5acd0!==_0x4526b7['lastAlertState']&&(await _0x4526b7[_0x1a732f(0x151)]('analysis.isAlert',{'val':_0x5acd0,'ack':!![]}),_0x4526b7[_0x1a732f(0x1b4)]=_0x5acd0,_0x5acd0&&(await _0x4526b7['setStateAsync'](_0x1a732f(0x163),{'val':_0x238c69[_0x1a732f(0x191)],'ack':!![]}),setup[_0x1a732f(0x154)](_0x4526b7,'‚ö†Ô∏è\x20ALARM:\x20'+_0x238c69['alertReason'],![],_0x238c69[_0x1a732f(0x1ba)])));if(_0x238c69[_0x1a732f(0x176)]&&_0x238c69[_0x1a732f(0x176)][_0x1a732f(0x152)]){await _0x4526b7['setStateAsync'](_0x1a732f(0x145),{'val':!![],'ack':!![]}),await _0x4526b7['setStateAsync']('analysis.automation.description',{'val':_0x238c69[_0x1a732f(0x176)][_0x1a732f(0x139)],'ack':!![]}),await _0x4526b7[_0x1a732f(0x151)](_0x1a732f(0x1bd),{'val':_0x238c69[_0x1a732f(0x176)][_0x1a732f(0x19e)],'ack':!![]}),await _0x4526b7[_0x1a732f(0x151)](_0x1a732f(0x19d),{'val':JSON[_0x1a732f(0x143)](_0x238c69[_0x1a732f(0x176)]['targetValue']),'ack':!![]});if(_0x18c68e)executeAutomationAction(_0x4526b7);}}catch(_0x23a50f){_0x4526b7[_0x1a732f(0x171)]['error'](_0x1a732f(0x1bc)+_0x23a50f[_0x1a732f(0x196)]);}}async function createDailyDigest(_0x5a7986,_0x21853d){const _0x1c6952=a0_0x218808;if(!_0x5a7986[_0x1c6952(0x1a2)])return;if(!canCallApi()){await _0x5a7986[_0x1c6952(0x151)](LTM_DP_STATUS,{'val':_0x1c6952(0x190),'ack':!![]});return;}await _0x5a7986[_0x1c6952(0x151)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x5a7986['geminiModel']||_0x5a7986[_0x1c6952(0x14d)][_0x1c6952(0x187)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x5a7986['setStateAsync'](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x149e86=JSON['parse'](JSON[_0x1c6952(0x143)](_0x5a7986[_0x1c6952(0x14d)])),_0x3d4559=_0x149e86['length'],_0x557df6='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x1c6952(0x143)](_0x149e86);try{updateApiTimestamp();const _0x33ee50=await _0x5a7986[_0x1c6952(0x195)][_0x1c6952(0x181)](_0x557df6),_0x5a5585=JSON[_0x1c6952(0x166)](_0x33ee50[_0x1c6952(0x13b)][_0x1c6952(0x17a)]()[_0x1c6952(0x169)](/```json|```/g,'')[_0x1c6952(0x1b7)]()),_0x1c5f95={'timestamp':new Date()[_0x1c6952(0x18f)](),'eventCount':_0x3d4559,'summary':_0x5a5585[_0x1c6952(0x1a6)]||_0x1c6952(0x168),'activityLevel':_0x5a5585[_0x1c6952(0x141)]||_0x1c6952(0x140),'systemMode':_0x5a7986['currentSystemMode']};_0x5a7986[_0x1c6952(0x1ad)][_0x1c6952(0x1be)](_0x1c5f95);const _0x1effcb=_0x5a7986['config'][_0x1c6952(0x14b)]||0x3c;_0x5a7986['dailyDigests']['length']>_0x1effcb&&_0x5a7986[_0x1c6952(0x1ad)][_0x1c6952(0x179)](0x0,_0x5a7986[_0x1c6952(0x1ad)]['length']-_0x1effcb);await _0x5a7986[_0x1c6952(0x151)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x5a7986['dailyDigests']),'ack':!![]}),_0x5a7986[_0x1c6952(0x14d)]=[],await _0x5a7986[_0x1c6952(0x151)](LTM_DP_RAW_LOG,{'val':JSON[_0x1c6952(0x143)](_0x5a7986['rawEventLog']),'ack':!![]}),await _0x5a7986[_0x1c6952(0x151)](LTM_DP_STATUS,{'val':_0x1c6952(0x183),'ack':!![]});const _0xf6daa3=_0x1c6952(0x147)+_0x5a5585['summary']+_0x1c6952(0x19a)+_0x5a5585[_0x1c6952(0x141)];setup[_0x1c6952(0x154)](_0x5a7986,_0xf6daa3,![],![]);if(_0x5a7986[_0x1c6952(0x1a2)]&&_0x21853d)_0x21853d[_0x1c6952(0x164)](_0x5a7986,'ANALYZE_HEALTH',{'digest':_0x1c5f95});}catch(_0x10b1f7){_0x5a7986[_0x1c6952(0x171)]['error'](_0x10b1f7[_0x1c6952(0x196)]);}}async function runBaselineDriftAnalysis(_0x253053){const _0x45b350=a0_0x218808;if(!_0x253053[_0x45b350(0x1a2)]||!_0x253053[_0x45b350(0x195)])return;if(!canCallApi())return;const _0x476898=_0x253053[_0x45b350(0x148)][_0x45b350(0x13c)]||0xe;if(_0x253053[_0x45b350(0x1ad)][_0x45b350(0x187)]<_0x476898+0x7){await _0x253053[_0x45b350(0x151)]('LTM.driftAnalysis.baselineDrift',{'val':_0x45b350(0x155),'ack':!![]});return;}const _0x192161=_0x253053[_0x45b350(0x1ad)][_0x45b350(0x156)](-_0x476898),_0xb9bc99=_0x253053[_0x45b350(0x1ad)][_0x45b350(0x156)](0x0,_0x253053[_0x45b350(0x1ad)]['length']-_0x476898),_0x281f42=_0x45b350(0x17d)+JSON[_0x45b350(0x143)](_0xb9bc99)+_0x45b350(0x15c)+JSON[_0x45b350(0x143)](_0x192161);try{updateApiTimestamp();const _0x41bd8c=await _0x253053[_0x45b350(0x195)][_0x45b350(0x181)](_0x281f42),_0x4cb606=JSON['parse'](_0x41bd8c['response'][_0x45b350(0x17a)]()[_0x45b350(0x169)](/```json|```/g,'')[_0x45b350(0x1b7)]());_0x4cb606[_0x45b350(0x17f)]&&(await _0x253053[_0x45b350(0x151)](_0x45b350(0x1a5),{'val':_0x4cb606['baselineDrift'],'ack':!![]}),await _0x253053['setStateAsync'](_0x45b350(0x173),{'val':_0x4cb606[_0x45b350(0x170)],'ack':!![]}),await _0x253053[_0x45b350(0x151)]('LTM.driftAnalysis.lastCheck',{'val':Date['now'](),'ack':!![]}));}catch(_0x3a21c2){}}async function executeAutomationAction(_0x376eb8){const _0x2394c1=a0_0x218808;try{const _0x549c91=await _0x376eb8[_0x2394c1(0x14e)](_0x2394c1(0x1bd)),_0x35bedd=await _0x376eb8[_0x2394c1(0x14e)](_0x2394c1(0x19d));if(_0x549c91&&_0x549c91[_0x2394c1(0x160)]&&_0x35bedd){const _0x3cd2a3=_0x549c91[_0x2394c1(0x160)];let _0x3497c9=_0x35bedd[_0x2394c1(0x160)];try{_0x3497c9=JSON['parse'](_0x3497c9);}catch(_0x4e3117){}_0x376eb8[_0x2394c1(0x171)][_0x2394c1(0x16b)]('ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x3cd2a3+_0x2394c1(0x142)+_0x3497c9),await _0x376eb8['setForeignStateAsync'](_0x3cd2a3,_0x3497c9);}else _0x376eb8[_0x2394c1(0x171)][_0x2394c1(0x1a3)](_0x2394c1(0x15b));}catch(_0x438a19){_0x376eb8['log']['error']('BUTLER\x20Execution\x20Error:\x20'+_0x438a19['message']);}}async function sendMorningBriefing(_0x3ae838){const _0xd81ee9=a0_0x218808;if(!_0x3ae838[_0xd81ee9(0x195)]){_0x3ae838[_0xd81ee9(0x171)][_0xd81ee9(0x1a3)](_0xd81ee9(0x15e));return;}_0x3ae838[_0xd81ee9(0x171)]['info'](_0xd81ee9(0x1b0));try{updateApiTimestamp();const _0x327449=_0xd81ee9(0x1bb),_0x3c7af1=await _0x3ae838['geminiModel']['generateContent'](_0x327449),_0x191b4d=_0x3c7af1['response'][_0xd81ee9(0x17a)]();_0x3ae838[_0xd81ee9(0x171)]['info'](_0xd81ee9(0x150)+_0x191b4d['length']+_0xd81ee9(0x18b)),setup['sendNotification'](_0x3ae838,_0xd81ee9(0x185)+_0x191b4d);}catch(_0x2742a9){_0x3ae838[_0xd81ee9(0x171)][_0xd81ee9(0x149)]('Briefing\x20Error:\x20'+_0x2742a9[_0xd81ee9(0x196)]);}}module[a0_0x218808(0x1b2)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};