const a0_0x4ab65b=a0_0x1301;(function(_0x35fd80,_0xb36588){const _0x44c2bf=a0_0x1301,_0x51ecec=_0x35fd80();while(!![]){try{const _0x3b539b=-parseInt(_0x44c2bf(0x15c))/0x1+parseInt(_0x44c2bf(0x14b))/0x2+-parseInt(_0x44c2bf(0x1b6))/0x3*(-parseInt(_0x44c2bf(0x186))/0x4)+-parseInt(_0x44c2bf(0x198))/0x5*(parseInt(_0x44c2bf(0x1b5))/0x6)+-parseInt(_0x44c2bf(0x171))/0x7*(-parseInt(_0x44c2bf(0x1ab))/0x8)+parseInt(_0x44c2bf(0x194))/0x9+-parseInt(_0x44c2bf(0x14a))/0xa;if(_0x3b539b===_0xb36588)break;else _0x51ecec['push'](_0x51ecec['shift']());}catch(_0x49c81b){_0x51ecec['push'](_0x51ecec['shift']());}}}(a0_0x1ef2,0xe1bdb));const a0_0x28cd0b=(function(){let _0x4b57d4=!![];return function(_0x18eea4,_0x5e5555){const _0x59b641=_0x4b57d4?function(){const _0x3aff62=a0_0x1301;if(_0x5e5555){const _0xac3514=_0x5e5555[_0x3aff62(0x1aa)](_0x18eea4,arguments);return _0x5e5555=null,_0xac3514;}}:function(){};return _0x4b57d4=![],_0x59b641;};}()),a0_0x5e0796=a0_0x28cd0b(this,function(){const _0x44093b=a0_0x1301;return a0_0x5e0796[_0x44093b(0x185)]()[_0x44093b(0x172)](_0x44093b(0x17c))[_0x44093b(0x185)]()[_0x44093b(0x175)](a0_0x5e0796)[_0x44093b(0x172)](_0x44093b(0x17c));});a0_0x5e0796();'use strict';const {GoogleGenerativeAI}=require(a0_0x4ab65b(0x174)),setup=require(a0_0x4ab65b(0x170)),GEMINI_MODEL=a0_0x4ab65b(0x1ae),LTM_DP_DAILY_DIGESTS=a0_0x4ab65b(0x139),LTM_DP_STATUS=a0_0x4ab65b(0x173),LTM_DP_RAW_LOG=a0_0x4ab65b(0x162),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;function a0_0x1ef2(){const _0x4592e8=['analysis.activitySummary','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','getForeignStateAsync','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','./setup','6485269UwUEZQ','search','LTM.processingStatus','@google/generative-ai','constructor','val','âš ï¸\x20ALARM:\x20','message','log','exports','KI-Fehler\x20(Fallback)','(((.+)+)+)+$','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','length','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','isProVersion','pop','decision','stringify','toString','3682088eYuTzC','splice','error','analysisHistory','Skipped\x20(Traffic)','aiPersona','sendNotification','send','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','Gemini\x20Error:\x20','eventHistory','generateContent','targetId','.\x20SYSTEM_MODE:\x20','2146455YSBcwp','ltmStbWindowDays','currentSystemMode','Digest','5eEWsOL','LTM.driftAnalysis.baselineDrift','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','now','Tag','analysis.automation.autoApply','trim','config','Skipped\x20(No\x20AI\x20or\x20Data)','toLocaleTimeString','useWeather','activityLevel','analysis.alertReason','analysis.automation.description','ltmLtbWindowDays','rawEventLog','.\x20KONTEXT:\x20','generic','apply','8gyWMbz','summary','slice','models/gemini-flash-latest','targetValue','isAlert','.\x20ANWESEND:\x20','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','setStateAsync','\x20=\x20','9885066lNGAET','6njDcso','dailyDigests','analysis.automation.patternDetected','analysis.lastResult','LTM.dailyDigests','analysis.automation.targetId','weatherInstance','debug','detected','\x0aSTB:\x20','Unbekannt','Nacht','.forecast.current.state','replace','.\x20EMERGENCY:\x20','Unbekannt\x20(Kein\x20Sensor)','ANALYZE_HEALTH','Success','baselineDrift','.Current.WeatherText','N/A\x20(Learning)','615350qPIuSS','1358282uMeVAo','lastAlertState','Â°C,\x20','geminiModel','Sicherheit\x20geht\x20vor.','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','Traffic-Schutz\x20(Auto-Approved)','\x20Ã¼bersprungen\x20(Auto-Approved).','getStateAsync','BUTLER\x20Execution\x20Error:\x20','alertReason','analysis.automation.targetValue','approved','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','driftDetails','.Current.IsNight','info','1051466SYLxGa','automationProposal','Keine\x20Details.','analysis.analysisHistory','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','isEmergency','LTM.rawEventLog',',\x20LichtverhÃ¤ltnisse:\x20','\x0aAktivitÃ¤t:\x20','text','warn','parse','response','analysis.isAlert','reason','Started...'];a0_0x1ef2=function(){return _0x4592e8;};return a0_0x1ef2();}const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':'PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':a0_0x4ab65b(0x19a),'single_comfort':a0_0x4ab65b(0x180),'security':a0_0x4ab65b(0x14f),'energy_saver':'PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'};function canCallApi(){const _0x7adb78=Date['now']();return _0x7adb78-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x207ebb=a0_0x4ab65b;lastGlobalApiCall=Date[_0x207ebb(0x19b)]();}async function getWeatherContext(_0x547a61){const _0x595967=a0_0x4ab65b;if(!_0x547a61['config'][_0x595967(0x1a2)]||!_0x547a61[_0x595967(0x19f)][_0x595967(0x13b)])return _0x595967(0x144);try{const _0x48ea63=_0x547a61[_0x595967(0x19f)][_0x595967(0x13b)];let _0x3fb728=await _0x547a61[_0x595967(0x16e)](_0x48ea63+'.Current.Temperature');if(!_0x3fb728)_0x3fb728=await _0x547a61[_0x595967(0x16e)](_0x48ea63+'.forecast.current.temperature');let _0x4f5ca8=await _0x547a61['getForeignStateAsync'](_0x48ea63+_0x595967(0x148));if(!_0x4f5ca8)_0x4f5ca8=await _0x547a61['getForeignStateAsync'](_0x48ea63+_0x595967(0x141));let _0x474f22='Unbekannt';const _0x444a37=await _0x547a61[_0x595967(0x16e)](_0x48ea63+_0x595967(0x15a));if(_0x444a37)_0x474f22=_0x444a37[_0x595967(0x176)]?_0x595967(0x140):_0x595967(0x19c);if(_0x3fb728&&_0x4f5ca8)return _0x3fb728[_0x595967(0x176)]+_0x595967(0x14d)+_0x4f5ca8['val']+_0x595967(0x163)+_0x474f22;}catch(_0x51614b){}return'Wetterdaten\x20nicht\x20abrufbar';}function a0_0x1301(_0x576fd6,_0x270e64){const _0x41f034=a0_0x1ef2();return a0_0x1301=function(_0x5e0796,_0x28cd0b){_0x5e0796=_0x5e0796-0x139;let _0x1ef259=_0x41f034[_0x5e0796];return _0x1ef259;},a0_0x1301(_0x576fd6,_0x270e64);}async function consultButler(_0x117838,_0x49effe,_0x2ed0e7,_0x4e5aa8){const _0x3e1fc2=a0_0x4ab65b;if(!_0x117838[_0x3e1fc2(0x14e)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x5be504=Date[_0x3e1fc2(0x19b)]();if(decisionCache[_0x49effe]&&_0x5be504-decisionCache[_0x49effe]['timestamp']<CACHE_TTL_MS){const _0x18e572=decisionCache[_0x49effe][_0x3e1fc2(0x183)];return _0x117838[_0x3e1fc2(0x179)]['debug']('ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20'+_0x49effe+'\x20->\x20'+(_0x18e572[_0x3e1fc2(0x157)]?'OK':'NO')+'\x20('+_0x18e572[_0x3e1fc2(0x16a)]+')'),_0x18e572;}if(!canCallApi())return _0x117838[_0x3e1fc2(0x179)][_0x3e1fc2(0x13c)]('ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20'+_0x49effe+_0x3e1fc2(0x152)),{'approved':!![],'reason':_0x3e1fc2(0x151)};const _0x17b7da=new Date()[_0x3e1fc2(0x1a1)](),_0x27a627=await getWeatherContext(_0x117838),_0x2bc700=PERSONA_MAPPING[_0x117838[_0x3e1fc2(0x19f)]['aiPersona']||_0x3e1fc2(0x1a9)],_0x5e22e9=_0x3e1fc2(0x17f)+_0x17b7da+',\x20Wetter:\x20'+_0x27a627+_0x3e1fc2(0x158)+(_0x4e5aa8*0x64)['toFixed'](0x0)+'%)\x20nach\x20\x22'+_0x49effe+'\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22'+_0x2ed0e7+_0x3e1fc2(0x16f)+_0x2bc700+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x49c9d2=await _0x117838[_0x3e1fc2(0x14e)][_0x3e1fc2(0x191)](_0x5e22e9),_0x556769=_0x49c9d2['response'][_0x3e1fc2(0x165)]()[_0x3e1fc2(0x142)](/```json|```/g,'')['trim'](),_0x258799=JSON['parse'](_0x556769);return decisionCache[_0x49effe]={'decision':_0x258799,'timestamp':_0x5be504},_0x258799;}catch(_0x5876c9){return _0x117838['log']['warn'](_0x3e1fc2(0x16d)+_0x5876c9[_0x3e1fc2(0x178)]),decisionCache[_0x49effe]={'decision':{'approved':!![],'reason':_0x3e1fc2(0x17b)},'timestamp':_0x5be504-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x3e1fc2(0x17b)};}}async function runGeminiAnalysis(_0x194b25,_0x429008=''){const _0x51bea2=a0_0x4ab65b;if(!_0x194b25['geminiModel'])return;if(!canCallApi()){_0x194b25[_0x51bea2(0x179)]['debug'](_0x51bea2(0x160));return;}if(_0x194b25[_0x51bea2(0x190)][_0x51bea2(0x17e)]===0x0)return;const _0xf1edc=_0x194b25['eventHistory'][_0x51bea2(0x1ad)](0x0,0xf),_0x490393=_0x194b25['currentSystemMode'],_0x5f0862=PERSONA_MAPPING[_0x194b25['config'][_0x51bea2(0x18b)]||_0x51bea2(0x1a9)],_0x13a7e7=_0x194b25[_0x51bea2(0x19f)]['livingContext']||_0x51bea2(0x15e);let _0x48eeed=_0x51bea2(0x13f);try{const _0x30b4d4=await _0x194b25[_0x51bea2(0x153)]('system.presenceWho');if(_0x30b4d4&&_0x30b4d4[_0x51bea2(0x176)])_0x48eeed=_0x30b4d4['val'];}catch(_0x6a6f86){}let _0x24a30f=![];try{const _0x299dea=await _0x194b25['getStateAsync'](_0x51bea2(0x19d));if(_0x299dea&&_0x299dea[_0x51bea2(0x176)])_0x24a30f=!![];}catch(_0x1cb8f1){}const _0x1dd459=_0x51bea2(0x17d)+_0x5f0862+_0x51bea2(0x1a8)+_0x13a7e7+_0x51bea2(0x193)+_0x490393+_0x51bea2(0x1b1)+_0x48eeed+'.\x20EVENTS:\x20'+JSON[_0x51bea2(0x184)](_0xf1edc)+_0x51bea2(0x143)+_0x429008+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x39ad9f=await _0x194b25[_0x51bea2(0x14e)][_0x51bea2(0x191)](_0x1dd459),_0x58c507=JSON[_0x51bea2(0x167)](_0x39ad9f[_0x51bea2(0x168)]['text']()['replace'](/```json|```/g,'')[_0x51bea2(0x19e)]());await _0x194b25[_0x51bea2(0x1b3)](_0x51bea2(0x1b9),{'val':JSON[_0x51bea2(0x184)](_0x58c507),'ack':!![]});if(_0x58c507[_0x51bea2(0x1ac)])await _0x194b25[_0x51bea2(0x1b3)](_0x51bea2(0x16c),{'val':_0x58c507[_0x51bea2(0x1ac)],'ack':!![]});const _0x2b3f8a={'timestamp':Date[_0x51bea2(0x19b)](),'id':Date['now']()['toString'](),'analysis':{'activity':{'summary':_0x58c507['summary'],'isAlert':_0x58c507['isAlert'],'alertReason':_0x58c507[_0x51bea2(0x155)]},'comfort':{'automationProposal':_0x58c507[_0x51bea2(0x15d)]}}};_0x194b25[_0x51bea2(0x189)]['unshift'](_0x2b3f8a);if(_0x194b25['analysisHistory'][_0x51bea2(0x17e)]>0x32)_0x194b25[_0x51bea2(0x189)][_0x51bea2(0x182)]();await _0x194b25['setStateAsync'](_0x51bea2(0x15f),{'val':JSON['stringify'](_0x194b25['analysisHistory']),'ack':!![]});const _0x4f0b57=_0x58c507[_0x51bea2(0x1b0)]||![];_0x4f0b57!==_0x194b25[_0x51bea2(0x14c)]&&(await _0x194b25[_0x51bea2(0x1b3)](_0x51bea2(0x169),{'val':_0x4f0b57,'ack':!![]}),_0x194b25['lastAlertState']=_0x4f0b57,_0x4f0b57&&(await _0x194b25[_0x51bea2(0x1b3)](_0x51bea2(0x1a4),{'val':_0x58c507[_0x51bea2(0x155)],'ack':!![]}),setup[_0x51bea2(0x18c)](_0x194b25,_0x51bea2(0x177)+_0x58c507['alertReason'],![],_0x58c507[_0x51bea2(0x161)])));if(_0x58c507[_0x51bea2(0x15d)]&&_0x58c507[_0x51bea2(0x15d)][_0x51bea2(0x13d)]){await _0x194b25[_0x51bea2(0x1b3)](_0x51bea2(0x1b8),{'val':!![],'ack':!![]}),await _0x194b25[_0x51bea2(0x1b3)](_0x51bea2(0x1a5),{'val':_0x58c507[_0x51bea2(0x15d)]['description'],'ack':!![]}),await _0x194b25['setStateAsync'](_0x51bea2(0x13a),{'val':_0x58c507[_0x51bea2(0x15d)][_0x51bea2(0x192)],'ack':!![]}),await _0x194b25['setStateAsync'](_0x51bea2(0x156),{'val':JSON[_0x51bea2(0x184)](_0x58c507[_0x51bea2(0x15d)][_0x51bea2(0x1af)]),'ack':!![]});if(_0x24a30f)executeAutomationAction(_0x194b25);}}catch(_0x364b62){_0x194b25['log'][_0x51bea2(0x188)](_0x51bea2(0x18f)+_0x364b62[_0x51bea2(0x178)]);}}async function createDailyDigest(_0x151d1d,_0x2e0312){const _0x1d10b2=a0_0x4ab65b;if(!_0x151d1d[_0x1d10b2(0x181)])return;if(!canCallApi()){await _0x151d1d['setStateAsync'](LTM_DP_STATUS,{'val':_0x1d10b2(0x18a),'ack':!![]});return;}await _0x151d1d['setStateAsync'](LTM_DP_STATUS,{'val':_0x1d10b2(0x16b),'ack':!![]});if(!_0x151d1d[_0x1d10b2(0x14e)]||_0x151d1d[_0x1d10b2(0x1a7)][_0x1d10b2(0x17e)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x151d1d[_0x1d10b2(0x1b3)](LTM_DP_STATUS,{'val':_0x1d10b2(0x1a0),'ack':!![]});return;}const _0x298f09=JSON['parse'](JSON[_0x1d10b2(0x184)](_0x151d1d['rawEventLog'])),_0x5262ee=_0x298f09['length'],_0x282c8e=_0x1d10b2(0x150)+JSON[_0x1d10b2(0x184)](_0x298f09);try{updateApiTimestamp();const _0x1ddbb6=await _0x151d1d[_0x1d10b2(0x14e)][_0x1d10b2(0x191)](_0x282c8e),_0x5a1add=JSON['parse'](_0x1ddbb6[_0x1d10b2(0x168)][_0x1d10b2(0x165)]()[_0x1d10b2(0x142)](/```json|```/g,'')[_0x1d10b2(0x19e)]()),_0x91aa7d={'timestamp':new Date()['toISOString'](),'eventCount':_0x5262ee,'summary':_0x5a1add[_0x1d10b2(0x1ac)]||_0x1d10b2(0x197),'activityLevel':_0x5a1add[_0x1d10b2(0x1a3)]||'normal','systemMode':_0x151d1d[_0x1d10b2(0x196)]};_0x151d1d[_0x1d10b2(0x1b7)]['push'](_0x91aa7d);const _0x20d877=_0x151d1d[_0x1d10b2(0x19f)][_0x1d10b2(0x1a6)]||0x3c;_0x151d1d['dailyDigests'][_0x1d10b2(0x17e)]>_0x20d877&&_0x151d1d[_0x1d10b2(0x1b7)][_0x1d10b2(0x187)](0x0,_0x151d1d[_0x1d10b2(0x1b7)][_0x1d10b2(0x17e)]-_0x20d877);await _0x151d1d['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x1d10b2(0x184)](_0x151d1d[_0x1d10b2(0x1b7)]),'ack':!![]}),_0x151d1d[_0x1d10b2(0x1a7)]=[],await _0x151d1d[_0x1d10b2(0x1b3)](LTM_DP_RAW_LOG,{'val':JSON[_0x1d10b2(0x184)](_0x151d1d[_0x1d10b2(0x1a7)]),'ack':!![]}),await _0x151d1d[_0x1d10b2(0x1b3)](LTM_DP_STATUS,{'val':_0x1d10b2(0x146),'ack':!![]});const _0x3ddd81='ðŸ“…\x20Daily\x20Digest:\x0a'+_0x5a1add['summary']+_0x1d10b2(0x164)+_0x5a1add[_0x1d10b2(0x1a3)];setup[_0x1d10b2(0x18c)](_0x151d1d,_0x3ddd81,![],![]);if(_0x151d1d[_0x1d10b2(0x181)]&&_0x2e0312)_0x2e0312[_0x1d10b2(0x18d)](_0x151d1d,_0x1d10b2(0x145),{'digest':_0x91aa7d});}catch(_0x1a3509){_0x151d1d['log'][_0x1d10b2(0x188)](_0x1a3509[_0x1d10b2(0x178)]);}}async function runBaselineDriftAnalysis(_0x15686c){const _0x45aa2c=a0_0x4ab65b;if(!_0x15686c['isProVersion']||!_0x15686c[_0x45aa2c(0x14e)])return;if(!canCallApi())return;const _0x58ec58=_0x15686c[_0x45aa2c(0x19f)][_0x45aa2c(0x195)]||0xe;if(_0x15686c[_0x45aa2c(0x1b7)]['length']<_0x58ec58+0x7){await _0x15686c[_0x45aa2c(0x1b3)](_0x45aa2c(0x199),{'val':_0x45aa2c(0x149),'ack':!![]});return;}const _0x56fb16=_0x15686c[_0x45aa2c(0x1b7)][_0x45aa2c(0x1ad)](-_0x58ec58),_0x13ef51=_0x15686c[_0x45aa2c(0x1b7)]['slice'](0x0,_0x15686c[_0x45aa2c(0x1b7)]['length']-_0x58ec58),_0xb95d91=_0x45aa2c(0x18e)+JSON[_0x45aa2c(0x184)](_0x13ef51)+_0x45aa2c(0x13e)+JSON[_0x45aa2c(0x184)](_0x56fb16);try{updateApiTimestamp();const _0x323b01=await _0x15686c['geminiModel'][_0x45aa2c(0x191)](_0xb95d91),_0x35428a=JSON[_0x45aa2c(0x167)](_0x323b01[_0x45aa2c(0x168)][_0x45aa2c(0x165)]()['replace'](/```json|```/g,'')[_0x45aa2c(0x19e)]());_0x35428a[_0x45aa2c(0x147)]&&(await _0x15686c[_0x45aa2c(0x1b3)]('LTM.driftAnalysis.baselineDrift',{'val':_0x35428a[_0x45aa2c(0x147)],'ack':!![]}),await _0x15686c[_0x45aa2c(0x1b3)]('LTM.driftAnalysis.driftDetails',{'val':_0x35428a[_0x45aa2c(0x159)],'ack':!![]}),await _0x15686c[_0x45aa2c(0x1b3)]('LTM.driftAnalysis.lastCheck',{'val':Date[_0x45aa2c(0x19b)](),'ack':!![]}));}catch(_0x32764c){}}async function executeAutomationAction(_0x485a7d){const _0x3a48e5=a0_0x4ab65b;try{const _0x4d329e=await _0x485a7d['getStateAsync'](_0x3a48e5(0x13a)),_0x53c0bb=await _0x485a7d[_0x3a48e5(0x153)](_0x3a48e5(0x156));if(_0x4d329e&&_0x4d329e[_0x3a48e5(0x176)]&&_0x53c0bb){const _0x1cae5c=_0x4d329e[_0x3a48e5(0x176)];let _0x3ac81c=_0x53c0bb[_0x3a48e5(0x176)];try{_0x3ac81c=JSON[_0x3a48e5(0x167)](_0x3ac81c);}catch(_0x4d45a6){}_0x485a7d['log'][_0x3a48e5(0x15b)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x1cae5c+_0x3a48e5(0x1b4)+_0x3ac81c),await _0x485a7d['setForeignStateAsync'](_0x1cae5c,_0x3ac81c);}else _0x485a7d[_0x3a48e5(0x179)][_0x3a48e5(0x166)](_0x3a48e5(0x1b2));}catch(_0x3fb3a9){_0x485a7d['log']['error'](_0x3a48e5(0x154)+_0x3fb3a9[_0x3a48e5(0x178)]);}}async function sendMorningBriefing(_0xf55f21){const _0x429b03=a0_0x4ab65b;if(!_0xf55f21[_0x429b03(0x14e)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x587c07='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x161444=await _0xf55f21['geminiModel']['generateContent'](_0x587c07),_0x2d85c0=_0x161444[_0x429b03(0x168)][_0x429b03(0x165)]();setup['sendNotification'](_0xf55f21,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x2d85c0);}catch(_0x2eaa02){_0xf55f21['log']['error']('Briefing\x20Error:\x20'+_0x2eaa02['message']);}}module[a0_0x4ab65b(0x17a)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};