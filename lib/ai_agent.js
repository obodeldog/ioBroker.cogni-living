const a0_0x1672bb=a0_0x2f26;(function(_0x1e0f9e,_0x3325d9){const _0x570b89=a0_0x2f26,_0x384bcb=_0x1e0f9e();while(!![]){try{const _0x332366=-parseInt(_0x570b89(0x9a))/0x1*(-parseInt(_0x570b89(0x85))/0x2)+-parseInt(_0x570b89(0xd7))/0x3*(parseInt(_0x570b89(0xae))/0x4)+-parseInt(_0x570b89(0xab))/0x5*(-parseInt(_0x570b89(0xdf))/0x6)+parseInt(_0x570b89(0xb5))/0x7+parseInt(_0x570b89(0x7d))/0x8*(parseInt(_0x570b89(0xf4))/0x9)+parseInt(_0x570b89(0xd3))/0xa+-parseInt(_0x570b89(0xf8))/0xb;if(_0x332366===_0x3325d9)break;else _0x384bcb['push'](_0x384bcb['shift']());}catch(_0xfc6530){_0x384bcb['push'](_0x384bcb['shift']());}}}(a0_0x26b1,0xab558));const a0_0xa247fe=(function(){let _0x5ec25a=!![];return function(_0x465d2e,_0x27fe6a){const _0x930ef4=_0x5ec25a?function(){const _0x19870b=a0_0x2f26;if(_0x27fe6a){const _0x515764=_0x27fe6a[_0x19870b(0xaa)](_0x465d2e,arguments);return _0x27fe6a=null,_0x515764;}}:function(){};return _0x5ec25a=![],_0x930ef4;};}()),a0_0x496aec=a0_0xa247fe(this,function(){const _0x2658d6=a0_0x2f26;return a0_0x496aec['toString']()[_0x2658d6(0xfd)](_0x2658d6(0xe4))['toString']()[_0x2658d6(0xed)](a0_0x496aec)[_0x2658d6(0xfd)](_0x2658d6(0xe4));});a0_0x496aec();'use strict';const {GoogleGenerativeAI}=require(a0_0x1672bb(0xf9)),setup=require('./setup'),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x1672bb(0xb3),LTM_DP_STATUS=a0_0x1672bb(0xef),LTM_DP_RAW_LOG=a0_0x1672bb(0xc0),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':'PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':a0_0x1672bb(0xca),'single_comfort':a0_0x1672bb(0xd2),'security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x1672bb(0xa9)};function a0_0x2f26(_0xc4a789,_0x27029d){const _0x405360=a0_0x26b1();return a0_0x2f26=function(_0x496aec,_0xa247fe){_0x496aec=_0x496aec-0x77;let _0x26b147=_0x405360[_0x496aec];return _0x26b147;},a0_0x2f26(_0xc4a789,_0x27029d);}function a0_0x26b1(){const _0xd67f19=['dailyDigests','19349891xgzVot','@google/generative-ai','sendNotification','slice','toISOString','search','ltmLtbWindowDays','analysis.lastResult','analysis.automation.autoApply','isEmergency','.\x20EVENTS:\x20','.Current.IsNight','966760GGZIjV','baselineDrift','targetValue','LTM.driftAnalysis.driftDetails','targetId','.\x20KONTEXT:\x20','activityLevel',',\x20LichtverhÃ¤ltnisse:\x20','4qusJuW','setForeignStateAsync','analysis.activitySummary','length','analysis.automation.targetValue','.Current.Temperature','Keine\x20Details.','.\x20EMERGENCY:\x20','response','currentSystemMode','toString','normal',',\x20Wetter:\x20','KI-Fehler\x20(Fallback)','livingContext','debug','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','Started...','log','Nacht','analysis.analysisHistory','241784XjFrNG','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','ltmStbWindowDays','.\x20ANWESEND:\x20','system.presenceWho','parse','now','exports','Wetterdaten\x20nicht\x20abrufbar','analysis.automation.targetId','useWeather','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','reason','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','pop','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','apply','25WbxmgP','alertReason','ðŸŒ…\x20Morning\x20Briefing:\x0a','4EVqZfy','getStateAsync','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','error','LTM.dailyDigests','getForeignStateAsync','4254859YjzvaY','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','aiPersona','summary','lastAlertState','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','rawEventLog','replace','weatherInstance','val','\x20=\x20','LTM.rawEventLog','approved','Skipped\x20(No\x20AI\x20or\x20Data)','N/A\x20(Learning)','generateContent','LTM.driftAnalysis.lastCheck','analysis.automation.description','timestamp','analysis.automation.patternDetected','info','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','KI\x20offline\x20(Fallback)','\x20->\x20','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','.forecast.current.state','automationProposal','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','LTM.driftAnalysis.baselineDrift','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','1465960RijfnH','Tag','config','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','2817753BzgDgU','\x0aSTB:\x20','warn','stringify','eventHistory','analysisHistory','decision','setStateAsync','1144398qwNbuA','Traffic-Schutz\x20(Auto-Approved)','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','Skipped\x20(Traffic)','Unbekannt\x20(Kein\x20Sensor)','(((.+)+)+)+$','analysis.isAlert','push','âš ï¸\x20ALARM:\x20','trim','Unbekannt','isAlert','unshift','send','constructor','message','LTM.processingStatus','Digest','geminiModel','description','isProVersion','90jYuVqi','driftDetails','text'];a0_0x26b1=function(){return _0xd67f19;};return a0_0x26b1();}function canCallApi(){const _0xaecb19=a0_0x1672bb,_0x57f7c2=Date[_0xaecb19(0xa0)]();return _0x57f7c2-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x1ff5c7=a0_0x1672bb;lastGlobalApiCall=Date[_0x1ff5c7(0xa0)]();}async function getWeatherContext(_0x469039){const _0x568481=a0_0x1672bb;if(!_0x469039[_0x568481(0xd5)][_0x568481(0xa4)]||!_0x469039[_0x568481(0xd5)]['weatherInstance'])return _0x568481(0xe3);try{const _0x17f084=_0x469039[_0x568481(0xd5)][_0x568481(0xbd)];let _0x3e20ee=await _0x469039[_0x568481(0xb4)](_0x17f084+_0x568481(0x8a));if(!_0x3e20ee)_0x3e20ee=await _0x469039[_0x568481(0xb4)](_0x17f084+'.forecast.current.temperature');let _0x2f8905=await _0x469039[_0x568481(0xb4)](_0x17f084+'.Current.WeatherText');if(!_0x2f8905)_0x2f8905=await _0x469039[_0x568481(0xb4)](_0x17f084+_0x568481(0xce));let _0x689ca6=_0x568481(0xe9);const _0x5d3031=await _0x469039[_0x568481(0xb4)](_0x17f084+_0x568481(0x7c));if(_0x5d3031)_0x689ca6=_0x5d3031[_0x568481(0xbe)]?_0x568481(0x98):_0x568481(0xd4);if(_0x3e20ee&&_0x2f8905)return _0x3e20ee[_0x568481(0xbe)]+'Â°C,\x20'+_0x2f8905[_0x568481(0xbe)]+_0x568481(0x84)+_0x689ca6;}catch(_0x1ad525){}return _0x568481(0xa2);}async function consultButler(_0x321716,_0x75c1cb,_0x2f8911,_0x5b362a){const _0x151797=a0_0x1672bb;if(!_0x321716[_0x151797(0xf1)])return{'approved':!![],'reason':_0x151797(0xcb)};const _0x42240d=Date[_0x151797(0xa0)]();if(decisionCache[_0x75c1cb]&&_0x42240d-decisionCache[_0x75c1cb][_0x151797(0xc7)]<CACHE_TTL_MS){const _0x513603=decisionCache[_0x75c1cb][_0x151797(0xdd)];return _0x321716[_0x151797(0x97)][_0x151797(0x94)]('ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20'+_0x75c1cb+_0x151797(0xcc)+(_0x513603[_0x151797(0xc1)]?'OK':'NO')+'\x20('+_0x513603[_0x151797(0xa6)]+')'),_0x513603;}if(!canCallApi())return _0x321716[_0x151797(0x97)][_0x151797(0x94)](_0x151797(0xd0)+_0x75c1cb+'\x20Ã¼bersprungen\x20(Auto-Approved).'),{'approved':!![],'reason':_0x151797(0xe0)};const _0x59d290=new Date()['toLocaleTimeString'](),_0x2f8277=await getWeatherContext(_0x321716),_0x51db53=PERSONA_MAPPING[_0x321716['config'][_0x151797(0xb7)]||'generic'],_0x4a89ab=_0x151797(0x9b)+_0x59d290+_0x151797(0x91)+_0x2f8277+_0x151797(0xa5)+(_0x5b362a*0x64)['toFixed'](0x0)+'%)\x20nach\x20\x22'+_0x75c1cb+_0x151797(0xba)+_0x2f8911+_0x151797(0xd6)+_0x51db53+_0x151797(0xcd);try{updateApiTimestamp();const _0x5e1621=await _0x321716[_0x151797(0xf1)]['generateContent'](_0x4a89ab),_0x4709d3=_0x5e1621[_0x151797(0x8d)][_0x151797(0xf6)]()['replace'](/```json|```/g,'')[_0x151797(0xe8)](),_0x59ab70=JSON[_0x151797(0x9f)](_0x4709d3);return decisionCache[_0x75c1cb]={'decision':_0x59ab70,'timestamp':_0x42240d},_0x59ab70;}catch(_0x5e667c){return _0x321716[_0x151797(0x97)]['warn'](_0x151797(0xa7)+_0x5e667c[_0x151797(0xee)]),decisionCache[_0x75c1cb]={'decision':{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'},'timestamp':_0x42240d-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x151797(0x92)};}}async function runGeminiAnalysis(_0x3a9b12,_0x4f339b=''){const _0x26d2b3=a0_0x1672bb;if(!_0x3a9b12['geminiModel'])return;if(!canCallApi()){_0x3a9b12[_0x26d2b3(0x97)][_0x26d2b3(0x94)](_0x26d2b3(0x95));return;}if(_0x3a9b12['eventHistory'][_0x26d2b3(0x88)]===0x0)return;const _0x409bb6=_0x3a9b12[_0x26d2b3(0xdb)][_0x26d2b3(0xfb)](0x0,0xf),_0x58c109=_0x3a9b12[_0x26d2b3(0x8e)],_0x19d8de=PERSONA_MAPPING[_0x3a9b12['config'][_0x26d2b3(0xb7)]||'generic'],_0x50eab8=_0x3a9b12[_0x26d2b3(0xd5)][_0x26d2b3(0x93)]||_0x26d2b3(0x8b);let _0x18f79d='Unbekannt';try{const _0x3065df=await _0x3a9b12[_0x26d2b3(0xaf)](_0x26d2b3(0x9e));if(_0x3065df&&_0x3065df[_0x26d2b3(0xbe)])_0x18f79d=_0x3065df[_0x26d2b3(0xbe)];}catch(_0x185164){}let _0x1acfd1=![];try{const _0x195946=await _0x3a9b12[_0x26d2b3(0xaf)](_0x26d2b3(0x79));if(_0x195946&&_0x195946[_0x26d2b3(0xbe)])_0x1acfd1=!![];}catch(_0x3bc757){}const _0x218015=_0x26d2b3(0xb1)+_0x19d8de+_0x26d2b3(0x82)+_0x50eab8+'.\x20SYSTEM_MODE:\x20'+_0x58c109+_0x26d2b3(0x9d)+_0x18f79d+_0x26d2b3(0x7b)+JSON['stringify'](_0x409bb6)+_0x26d2b3(0x8c)+_0x4f339b+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x44ea92=await _0x3a9b12[_0x26d2b3(0xf1)][_0x26d2b3(0xc4)](_0x218015),_0x49b29e=JSON[_0x26d2b3(0x9f)](_0x44ea92['response'][_0x26d2b3(0xf6)]()[_0x26d2b3(0xbc)](/```json|```/g,'')[_0x26d2b3(0xe8)]());await _0x3a9b12[_0x26d2b3(0xde)](_0x26d2b3(0x78),{'val':JSON[_0x26d2b3(0xda)](_0x49b29e),'ack':!![]});if(_0x49b29e[_0x26d2b3(0xb8)])await _0x3a9b12['setStateAsync'](_0x26d2b3(0x87),{'val':_0x49b29e[_0x26d2b3(0xb8)],'ack':!![]});const _0x2fa63e={'timestamp':Date[_0x26d2b3(0xa0)](),'id':Date['now']()[_0x26d2b3(0x8f)](),'analysis':{'activity':{'summary':_0x49b29e['summary'],'isAlert':_0x49b29e[_0x26d2b3(0xea)],'alertReason':_0x49b29e['alertReason']},'comfort':{'automationProposal':_0x49b29e[_0x26d2b3(0xcf)]}}};_0x3a9b12[_0x26d2b3(0xdc)][_0x26d2b3(0xeb)](_0x2fa63e);if(_0x3a9b12['analysisHistory']['length']>0x32)_0x3a9b12['analysisHistory'][_0x26d2b3(0xa8)]();await _0x3a9b12['setStateAsync'](_0x26d2b3(0x99),{'val':JSON[_0x26d2b3(0xda)](_0x3a9b12[_0x26d2b3(0xdc)]),'ack':!![]});const _0x19291e=_0x49b29e[_0x26d2b3(0xea)]||![];_0x19291e!==_0x3a9b12[_0x26d2b3(0xb9)]&&(await _0x3a9b12[_0x26d2b3(0xde)](_0x26d2b3(0xe5),{'val':_0x19291e,'ack':!![]}),_0x3a9b12[_0x26d2b3(0xb9)]=_0x19291e,_0x19291e&&(await _0x3a9b12[_0x26d2b3(0xde)]('analysis.alertReason',{'val':_0x49b29e[_0x26d2b3(0xac)],'ack':!![]}),setup[_0x26d2b3(0xfa)](_0x3a9b12,_0x26d2b3(0xe7)+_0x49b29e[_0x26d2b3(0xac)],![],_0x49b29e[_0x26d2b3(0x7a)])));if(_0x49b29e['automationProposal']&&_0x49b29e[_0x26d2b3(0xcf)]['detected']){await _0x3a9b12['setStateAsync'](_0x26d2b3(0xc8),{'val':!![],'ack':!![]}),await _0x3a9b12[_0x26d2b3(0xde)](_0x26d2b3(0xc6),{'val':_0x49b29e[_0x26d2b3(0xcf)][_0x26d2b3(0xf2)],'ack':!![]}),await _0x3a9b12[_0x26d2b3(0xde)](_0x26d2b3(0xa3),{'val':_0x49b29e[_0x26d2b3(0xcf)][_0x26d2b3(0x81)],'ack':!![]}),await _0x3a9b12['setStateAsync'](_0x26d2b3(0x89),{'val':JSON[_0x26d2b3(0xda)](_0x49b29e[_0x26d2b3(0xcf)][_0x26d2b3(0x7f)]),'ack':!![]});if(_0x1acfd1)executeAutomationAction(_0x3a9b12);}}catch(_0x2a63e7){_0x3a9b12[_0x26d2b3(0x97)][_0x26d2b3(0xb2)]('Gemini\x20Error:\x20'+_0x2a63e7[_0x26d2b3(0xee)]);}}async function createDailyDigest(_0x573f38,_0x3043f3){const _0x1737b9=a0_0x1672bb;if(!_0x573f38[_0x1737b9(0xf3)])return;if(!canCallApi()){await _0x573f38['setStateAsync'](LTM_DP_STATUS,{'val':_0x1737b9(0xe2),'ack':!![]});return;}await _0x573f38['setStateAsync'](LTM_DP_STATUS,{'val':_0x1737b9(0x96),'ack':!![]});if(!_0x573f38[_0x1737b9(0xf1)]||_0x573f38[_0x1737b9(0xbb)][_0x1737b9(0x88)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x573f38[_0x1737b9(0xde)](LTM_DP_STATUS,{'val':_0x1737b9(0xc2),'ack':!![]});return;}const _0x238728=JSON['parse'](JSON['stringify'](_0x573f38[_0x1737b9(0xbb)])),_0x28e7dd=_0x238728['length'],_0x30793a='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x1737b9(0xda)](_0x238728);try{updateApiTimestamp();const _0x594980=await _0x573f38[_0x1737b9(0xf1)][_0x1737b9(0xc4)](_0x30793a),_0x1844c6=JSON['parse'](_0x594980[_0x1737b9(0x8d)][_0x1737b9(0xf6)]()[_0x1737b9(0xbc)](/```json|```/g,'')[_0x1737b9(0xe8)]()),_0x54e436={'timestamp':new Date()[_0x1737b9(0xfc)](),'eventCount':_0x28e7dd,'summary':_0x1844c6['summary']||_0x1737b9(0xf0),'activityLevel':_0x1844c6[_0x1737b9(0x83)]||_0x1737b9(0x90),'systemMode':_0x573f38[_0x1737b9(0x8e)]};_0x573f38[_0x1737b9(0xf7)][_0x1737b9(0xe6)](_0x54e436);const _0x464ed4=_0x573f38['config'][_0x1737b9(0x77)]||0x3c;_0x573f38[_0x1737b9(0xf7)]['length']>_0x464ed4&&_0x573f38['dailyDigests']['splice'](0x0,_0x573f38['dailyDigests'][_0x1737b9(0x88)]-_0x464ed4);await _0x573f38[_0x1737b9(0xde)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x1737b9(0xda)](_0x573f38[_0x1737b9(0xf7)]),'ack':!![]}),_0x573f38[_0x1737b9(0xbb)]=[],await _0x573f38[_0x1737b9(0xde)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x573f38[_0x1737b9(0xbb)]),'ack':!![]}),await _0x573f38[_0x1737b9(0xde)](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x573f38[_0x1737b9(0xf3)]&&_0x3043f3)_0x3043f3[_0x1737b9(0xec)](_0x573f38,'ANALYZE_HEALTH',{'digest':_0x54e436});}catch(_0x18019b){_0x573f38[_0x1737b9(0x97)][_0x1737b9(0xb2)](_0x18019b[_0x1737b9(0xee)]);}}async function runBaselineDriftAnalysis(_0x21015c){const _0x28d9ef=a0_0x1672bb;if(!_0x21015c[_0x28d9ef(0xf3)]||!_0x21015c['geminiModel'])return;if(!canCallApi())return;const _0x2602ec=_0x21015c[_0x28d9ef(0xd5)][_0x28d9ef(0x9c)]||0xe;if(_0x21015c[_0x28d9ef(0xf7)][_0x28d9ef(0x88)]<_0x2602ec+0x7){await _0x21015c[_0x28d9ef(0xde)](_0x28d9ef(0xd1),{'val':_0x28d9ef(0xc3),'ack':!![]});return;}const _0x46564d=_0x21015c[_0x28d9ef(0xf7)]['slice'](-_0x2602ec),_0x368b82=_0x21015c['dailyDigests']['slice'](0x0,_0x21015c[_0x28d9ef(0xf7)]['length']-_0x2602ec),_0x447026=_0x28d9ef(0xb6)+JSON[_0x28d9ef(0xda)](_0x368b82)+_0x28d9ef(0xd8)+JSON[_0x28d9ef(0xda)](_0x46564d);try{updateApiTimestamp();const _0x63453f=await _0x21015c[_0x28d9ef(0xf1)][_0x28d9ef(0xc4)](_0x447026),_0x1b0b29=JSON[_0x28d9ef(0x9f)](_0x63453f[_0x28d9ef(0x8d)]['text']()['replace'](/```json|```/g,'')[_0x28d9ef(0xe8)]());_0x1b0b29[_0x28d9ef(0x7e)]&&(await _0x21015c['setStateAsync'](_0x28d9ef(0xd1),{'val':_0x1b0b29[_0x28d9ef(0x7e)],'ack':!![]}),await _0x21015c[_0x28d9ef(0xde)](_0x28d9ef(0x80),{'val':_0x1b0b29[_0x28d9ef(0xf5)],'ack':!![]}),await _0x21015c[_0x28d9ef(0xde)](_0x28d9ef(0xc5),{'val':Date[_0x28d9ef(0xa0)](),'ack':!![]}));}catch(_0x413e29){}}async function executeAutomationAction(_0x5ca0de){const _0x4f6420=a0_0x1672bb;try{const _0x39160a=await _0x5ca0de['getStateAsync'](_0x4f6420(0xa3)),_0x34138a=await _0x5ca0de[_0x4f6420(0xaf)](_0x4f6420(0x89));if(_0x39160a&&_0x39160a[_0x4f6420(0xbe)]&&_0x34138a){const _0x1a113f=_0x39160a['val'];let _0x3600e3=_0x34138a[_0x4f6420(0xbe)];try{_0x3600e3=JSON[_0x4f6420(0x9f)](_0x3600e3);}catch(_0x49f061){}_0x5ca0de[_0x4f6420(0x97)][_0x4f6420(0xc9)](_0x4f6420(0xb0)+_0x1a113f+_0x4f6420(0xbf)+_0x3600e3),await _0x5ca0de[_0x4f6420(0x86)](_0x1a113f,_0x3600e3);}else _0x5ca0de['log'][_0x4f6420(0xd9)](_0x4f6420(0xe1));}catch(_0x3e4ee5){_0x5ca0de['log']['error']('BUTLER\x20Execution\x20Error:\x20'+_0x3e4ee5[_0x4f6420(0xee)]);}}async function sendMorningBriefing(_0x29a912){const _0x3d3541=a0_0x1672bb;if(!_0x29a912[_0x3d3541(0xf1)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x4ce339='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x3f10d7=await _0x29a912[_0x3d3541(0xf1)][_0x3d3541(0xc4)](_0x4ce339),_0x57c289=_0x3f10d7[_0x3d3541(0x8d)][_0x3d3541(0xf6)]();setup['sendNotification'](_0x29a912,_0x3d3541(0xad)+_0x57c289);}catch(_0x18ef1e){_0x29a912[_0x3d3541(0x97)]['error']('Briefing\x20Error:\x20'+_0x18ef1e[_0x3d3541(0xee)]);}}module[a0_0x1672bb(0xa1)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};