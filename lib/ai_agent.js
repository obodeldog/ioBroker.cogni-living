const a0_0x36735f=a0_0x5656;(function(_0x1e9698,_0x50fa2e){const _0x19a41a=a0_0x5656,_0x5d736f=_0x1e9698();while(!![]){try{const _0x230b59=-parseInt(_0x19a41a(0x17c))/0x1*(-parseInt(_0x19a41a(0x174))/0x2)+parseInt(_0x19a41a(0x1db))/0x3+parseInt(_0x19a41a(0x1da))/0x4+-parseInt(_0x19a41a(0x1cc))/0x5+parseInt(_0x19a41a(0x18f))/0x6*(parseInt(_0x19a41a(0x1d2))/0x7)+parseInt(_0x19a41a(0x168))/0x8+-parseInt(_0x19a41a(0x1b9))/0x9;if(_0x230b59===_0x50fa2e)break;else _0x5d736f['push'](_0x5d736f['shift']());}catch(_0x3d4b4c){_0x5d736f['push'](_0x5d736f['shift']());}}}(a0_0x4943,0xc8104));const a0_0x1e13f2=(function(){let _0x597590=!![];return function(_0x32a987,_0x57c5e6){const _0x192bfb=_0x597590?function(){const _0x6e1720=a0_0x5656;if(_0x57c5e6){const _0x2aac1a=_0x57c5e6[_0x6e1720(0x1a7)](_0x32a987,arguments);return _0x57c5e6=null,_0x2aac1a;}}:function(){};return _0x597590=![],_0x192bfb;};}()),a0_0x5db154=a0_0x1e13f2(this,function(){const _0x43e2b4=a0_0x5656;return a0_0x5db154[_0x43e2b4(0x1c3)]()['search'](_0x43e2b4(0x1d9))[_0x43e2b4(0x1c3)]()[_0x43e2b4(0x1d1)](a0_0x5db154)[_0x43e2b4(0x1b4)](_0x43e2b4(0x1d9));});a0_0x5db154();function a0_0x5656(_0x19647f,_0x3a4838){const _0x20ba2a=a0_0x4943();return a0_0x5656=function(_0x5db154,_0x1e13f2){_0x5db154=_0x5db154-0x166;let _0x494305=_0x20ba2a[_0x5db154];return _0x494305;},a0_0x5656(_0x19647f,_0x3a4838);}'use strict';const {GoogleGenerativeAI}=require(a0_0x36735f(0x17e)),setup=require(a0_0x36735f(0x183)),GEMINI_MODEL=a0_0x36735f(0x19a),LTM_DP_DAILY_DIGESTS=a0_0x36735f(0x1c5),LTM_DP_STATUS=a0_0x36735f(0x181),LTM_DP_RAW_LOG=a0_0x36735f(0x1b0),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;function a0_0x4943(){const _0x5e5215=['trim','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','ANALYZE_HEALTH','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','Briefing\x20Error:\x20','ltmLtbWindowDays','Digest','stringify','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','toString','analysis.lastResult','LTM.dailyDigests','setForeignStateAsync','toLocaleTimeString','text','eventHistory','LTM.driftAnalysis.baselineDrift','currentSystemMode','856275mdbJng','Tag','\x0aAktivit√§t:\x20','timestamp','.forecast.current.state','constructor','1272103HxdWen','slice','analysis.automation.description','\x20=\x20','lastAlertState','generateContent','.\x20EMERGENCY:\x20','(((.+)+)+)+$','4398952iccJhG','1152246ZamgQZ','dailyDigests','.Current.Temperature','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','BUTLER\x20Execution\x20Error:\x20','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','alertReason','driftDetails','parse','livingContext','error','analysis.automation.autoApply','normal','Wetterdaten\x20nicht\x20abrufbar','message','targetValue','.Current.WeatherText','LTM.driftAnalysis.lastCheck','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','push','ltmStbWindowDays','Unbekannt','9644904wBFMRR','Skipped\x20(Traffic)','analysis.automation.targetValue','system.presenceWho','Skipped\x20(No\x20AI\x20or\x20Data)','N/A\x20(Learning)','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','activityLevel','.\x20EVENTS:\x20','splice','summary','7274DWVfPH','isProVersion','warn','KI-Fehler\x20(Fallback)','now','\x20√ºbersprungen\x20(Auto-Approved).','send','LTM.driftAnalysis.driftDetails','10zvSzVP','baselineDrift','@google/generative-ai','Gemini\x20Error:\x20','description','LTM.processingStatus','exports','./setup','weatherInstance','isEmergency','replace','useWeather','val','aiPersona','analysis.automation.targetId','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','¬∞C,\x20','analysis.analysisHistory','automationProposal','30mhdzWi','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','approved','detected','ü§ñ\x20Butler\x20Brain\x20Error:\x20','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','debug','response','.\x20ANWESEND:\x20','decision','getStateAsync','models/gemini-flash-latest','isAlert','length','rawEventLog',',\x20Lichtverh√§ltnisse:\x20','reason','.\x20KONTEXT:\x20','\x20->\x20','generic','üåÖ\x20Morning\x20Briefing:\x0a','setStateAsync','toFixed','%)\x20nach\x20\x22','apply','Unbekannt\x20(Kein\x20Sensor)','getForeignStateAsync','sendNotification','config','analysisHistory','.forecast.current.temperature','geminiModel','pop','LTM.rawEventLog','log','KI\x20offline\x20(Fallback)','Started...','search','.\x20SYSTEM_MODE:\x20','\x0aSTB:\x20','üìÖ\x20Daily\x20Digest:\x0a','toISOString','23793597ScTwVx'];a0_0x4943=function(){return _0x5e5215;};return a0_0x4943();}let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':'PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':a0_0x36735f(0x194),'single_comfort':a0_0x36735f(0x1ed),'security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x36735f(0x1ef)};function canCallApi(){const _0x425778=Date['now']();return _0x425778-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x496be9=a0_0x36735f;lastGlobalApiCall=Date[_0x496be9(0x178)]();}async function getWeatherContext(_0x4db858){const _0x62dccc=a0_0x36735f;if(!_0x4db858[_0x62dccc(0x1ab)][_0x62dccc(0x187)]||!_0x4db858['config'][_0x62dccc(0x184)])return _0x62dccc(0x1a8);try{const _0x495681=_0x4db858[_0x62dccc(0x1ab)]['weatherInstance'];let _0x3f609d=await _0x4db858[_0x62dccc(0x1a9)](_0x495681+_0x62dccc(0x1dd));if(!_0x3f609d)_0x3f609d=await _0x4db858[_0x62dccc(0x1a9)](_0x495681+_0x62dccc(0x1ad));let _0x108ade=await _0x4db858[_0x62dccc(0x1a9)](_0x495681+_0x62dccc(0x1eb));if(!_0x108ade)_0x108ade=await _0x4db858['getForeignStateAsync'](_0x495681+_0x62dccc(0x1d0));let _0x57463f=_0x62dccc(0x167);const _0x14859a=await _0x4db858[_0x62dccc(0x1a9)](_0x495681+'.Current.IsNight');if(_0x14859a)_0x57463f=_0x14859a[_0x62dccc(0x188)]?'Nacht':_0x62dccc(0x1cd);if(_0x3f609d&&_0x108ade)return _0x3f609d[_0x62dccc(0x188)]+_0x62dccc(0x18c)+_0x108ade[_0x62dccc(0x188)]+_0x62dccc(0x19e)+_0x57463f;}catch(_0x2042fa){}return _0x62dccc(0x1e8);}async function consultButler(_0x3b9044,_0xd77ff6,_0x4496af,_0x30a66d){const _0x2402ed=a0_0x36735f;if(!_0x3b9044[_0x2402ed(0x1ae)])return{'approved':!![],'reason':_0x2402ed(0x1b2)};const _0x298c1b=Date[_0x2402ed(0x178)]();if(decisionCache[_0xd77ff6]&&_0x298c1b-decisionCache[_0xd77ff6][_0x2402ed(0x1cf)]<CACHE_TTL_MS){const _0x22c2f6=decisionCache[_0xd77ff6][_0x2402ed(0x198)];return _0x3b9044['log'][_0x2402ed(0x195)]('ü§ñ\x20Butler\x20Cache\x20Hit:\x20'+_0xd77ff6+_0x2402ed(0x1a1)+(_0x22c2f6[_0x2402ed(0x191)]?'OK':'NO')+'\x20('+_0x22c2f6[_0x2402ed(0x19f)]+')'),_0x22c2f6;}if(!canCallApi())return _0x3b9044[_0x2402ed(0x1b1)][_0x2402ed(0x195)]('ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20'+_0xd77ff6+_0x2402ed(0x179)),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0xdfc854=new Date()[_0x2402ed(0x1c7)](),_0x596092=await getWeatherContext(_0x3b9044),_0x947c03=PERSONA_MAPPING[_0x3b9044[_0x2402ed(0x1ab)]['aiPersona']||_0x2402ed(0x1a2)],_0x451fef=_0x2402ed(0x16e)+_0xdfc854+',\x20Wetter:\x20'+_0x596092+_0x2402ed(0x16f)+(_0x30a66d*0x64)[_0x2402ed(0x1a5)](0x0)+_0x2402ed(0x1a6)+_0xd77ff6+_0x2402ed(0x190)+_0x4496af+_0x2402ed(0x1bd)+_0x947c03+_0x2402ed(0x1e0);try{updateApiTimestamp();const _0xabcc06=await _0x3b9044[_0x2402ed(0x1ae)][_0x2402ed(0x1d7)](_0x451fef),_0x2c1c03=_0xabcc06['response'][_0x2402ed(0x1c8)]()[_0x2402ed(0x186)](/```json|```/g,'')['trim'](),_0x5d5f06=JSON[_0x2402ed(0x1e3)](_0x2c1c03);return decisionCache[_0xd77ff6]={'decision':_0x5d5f06,'timestamp':_0x298c1b},_0x5d5f06;}catch(_0x23e5eb){return _0x3b9044[_0x2402ed(0x1b1)][_0x2402ed(0x176)](_0x2402ed(0x193)+_0x23e5eb['message']),decisionCache[_0xd77ff6]={'decision':{'approved':!![],'reason':_0x2402ed(0x177)},'timestamp':_0x298c1b-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x2402ed(0x177)};}}async function runGeminiAnalysis(_0x56e0ed,_0x7868e4=''){const _0x1795b4=a0_0x36735f;if(!_0x56e0ed[_0x1795b4(0x1ae)])return;if(!canCallApi()){_0x56e0ed[_0x1795b4(0x1b1)]['debug']('ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x56e0ed[_0x1795b4(0x1c9)][_0x1795b4(0x19c)]===0x0)return;const _0x4647f3=_0x56e0ed[_0x1795b4(0x1c9)][_0x1795b4(0x1d3)](0x0,0xf),_0x5ea275=_0x56e0ed['currentSystemMode'],_0xd8b0b3=PERSONA_MAPPING[_0x56e0ed[_0x1795b4(0x1ab)][_0x1795b4(0x189)]||'generic'],_0x270521=_0x56e0ed[_0x1795b4(0x1ab)][_0x1795b4(0x1e4)]||'Keine\x20Details.';let _0x3ba811=_0x1795b4(0x167);try{const _0x5dd45c=await _0x56e0ed[_0x1795b4(0x199)](_0x1795b4(0x16b));if(_0x5dd45c&&_0x5dd45c[_0x1795b4(0x188)])_0x3ba811=_0x5dd45c[_0x1795b4(0x188)];}catch(_0x178c40){}let _0x1b0964=![];try{const _0x18fdde=await _0x56e0ed[_0x1795b4(0x199)](_0x1795b4(0x1e6));if(_0x18fdde&&_0x18fdde[_0x1795b4(0x188)])_0x1b0964=!![];}catch(_0x5c659c){}const _0x3fc196=_0x1795b4(0x1bb)+_0xd8b0b3+_0x1795b4(0x1a0)+_0x270521+_0x1795b4(0x1b5)+_0x5ea275+_0x1795b4(0x197)+_0x3ba811+_0x1795b4(0x171)+JSON[_0x1795b4(0x1c1)](_0x4647f3)+_0x1795b4(0x1d8)+_0x7868e4+_0x1795b4(0x1de);try{updateApiTimestamp();const _0x38944e=await _0x56e0ed[_0x1795b4(0x1ae)][_0x1795b4(0x1d7)](_0x3fc196),_0x168f9d=JSON[_0x1795b4(0x1e3)](_0x38944e[_0x1795b4(0x196)][_0x1795b4(0x1c8)]()[_0x1795b4(0x186)](/```json|```/g,'')[_0x1795b4(0x1ba)]());await _0x56e0ed[_0x1795b4(0x1a4)](_0x1795b4(0x1c4),{'val':JSON[_0x1795b4(0x1c1)](_0x168f9d),'ack':!![]});if(_0x168f9d[_0x1795b4(0x173)])await _0x56e0ed[_0x1795b4(0x1a4)]('analysis.activitySummary',{'val':_0x168f9d[_0x1795b4(0x173)],'ack':!![]});const _0x23fc57={'timestamp':Date['now'](),'id':Date['now']()['toString'](),'analysis':{'activity':{'summary':_0x168f9d[_0x1795b4(0x173)],'isAlert':_0x168f9d[_0x1795b4(0x19b)],'alertReason':_0x168f9d[_0x1795b4(0x1e1)]},'comfort':{'automationProposal':_0x168f9d[_0x1795b4(0x18e)]}}};_0x56e0ed[_0x1795b4(0x1ac)]['unshift'](_0x23fc57);if(_0x56e0ed['analysisHistory'][_0x1795b4(0x19c)]>0x32)_0x56e0ed[_0x1795b4(0x1ac)][_0x1795b4(0x1af)]();await _0x56e0ed[_0x1795b4(0x1a4)](_0x1795b4(0x18d),{'val':JSON['stringify'](_0x56e0ed['analysisHistory']),'ack':!![]});const _0x1fe155=_0x168f9d[_0x1795b4(0x19b)]||![];_0x1fe155!==_0x56e0ed['lastAlertState']&&(await _0x56e0ed['setStateAsync']('analysis.isAlert',{'val':_0x1fe155,'ack':!![]}),_0x56e0ed[_0x1795b4(0x1d6)]=_0x1fe155,_0x1fe155&&(await _0x56e0ed[_0x1795b4(0x1a4)]('analysis.alertReason',{'val':_0x168f9d[_0x1795b4(0x1e1)],'ack':!![]}),setup[_0x1795b4(0x1aa)](_0x56e0ed,'‚ö†Ô∏è\x20ALARM:\x20'+_0x168f9d[_0x1795b4(0x1e1)],![],_0x168f9d[_0x1795b4(0x185)])));if(_0x168f9d[_0x1795b4(0x18e)]&&_0x168f9d['automationProposal'][_0x1795b4(0x192)]){await _0x56e0ed['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x56e0ed[_0x1795b4(0x1a4)](_0x1795b4(0x1d4),{'val':_0x168f9d[_0x1795b4(0x18e)][_0x1795b4(0x180)],'ack':!![]}),await _0x56e0ed[_0x1795b4(0x1a4)](_0x1795b4(0x18a),{'val':_0x168f9d[_0x1795b4(0x18e)]['targetId'],'ack':!![]}),await _0x56e0ed[_0x1795b4(0x1a4)](_0x1795b4(0x16a),{'val':JSON[_0x1795b4(0x1c1)](_0x168f9d[_0x1795b4(0x18e)][_0x1795b4(0x1ea)]),'ack':!![]});if(_0x1b0964)executeAutomationAction(_0x56e0ed);}}catch(_0x215d5d){_0x56e0ed[_0x1795b4(0x1b1)][_0x1795b4(0x1e5)](_0x1795b4(0x17f)+_0x215d5d['message']);}}async function createDailyDigest(_0x1e88b8,_0x200c52){const _0x7f142d=a0_0x36735f;if(!_0x1e88b8['isProVersion'])return;if(!canCallApi()){await _0x1e88b8[_0x7f142d(0x1a4)](LTM_DP_STATUS,{'val':_0x7f142d(0x169),'ack':!![]});return;}await _0x1e88b8[_0x7f142d(0x1a4)](LTM_DP_STATUS,{'val':_0x7f142d(0x1b3),'ack':!![]});if(!_0x1e88b8[_0x7f142d(0x1ae)]||_0x1e88b8['rawEventLog'][_0x7f142d(0x19c)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x1e88b8[_0x7f142d(0x1a4)](LTM_DP_STATUS,{'val':_0x7f142d(0x16c),'ack':!![]});return;}const _0x11c09d=JSON[_0x7f142d(0x1e3)](JSON[_0x7f142d(0x1c1)](_0x1e88b8[_0x7f142d(0x19d)])),_0x427c6d=_0x11c09d[_0x7f142d(0x19c)],_0x26ccb6='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON['stringify'](_0x11c09d);try{updateApiTimestamp();const _0x34cf1a=await _0x1e88b8[_0x7f142d(0x1ae)][_0x7f142d(0x1d7)](_0x26ccb6),_0x570c0b=JSON[_0x7f142d(0x1e3)](_0x34cf1a[_0x7f142d(0x196)][_0x7f142d(0x1c8)]()[_0x7f142d(0x186)](/```json|```/g,'')['trim']()),_0x54feb5={'timestamp':new Date()[_0x7f142d(0x1b8)](),'eventCount':_0x427c6d,'summary':_0x570c0b['summary']||_0x7f142d(0x1c0),'activityLevel':_0x570c0b[_0x7f142d(0x170)]||_0x7f142d(0x1e7),'systemMode':_0x1e88b8[_0x7f142d(0x1cb)]};_0x1e88b8['dailyDigests'][_0x7f142d(0x1f0)](_0x54feb5);const _0x1c322a=_0x1e88b8['config'][_0x7f142d(0x1bf)]||0x3c;_0x1e88b8[_0x7f142d(0x1dc)][_0x7f142d(0x19c)]>_0x1c322a&&_0x1e88b8[_0x7f142d(0x1dc)][_0x7f142d(0x172)](0x0,_0x1e88b8[_0x7f142d(0x1dc)]['length']-_0x1c322a);await _0x1e88b8['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x7f142d(0x1c1)](_0x1e88b8[_0x7f142d(0x1dc)]),'ack':!![]}),_0x1e88b8[_0x7f142d(0x19d)]=[],await _0x1e88b8[_0x7f142d(0x1a4)](LTM_DP_RAW_LOG,{'val':JSON[_0x7f142d(0x1c1)](_0x1e88b8[_0x7f142d(0x19d)]),'ack':!![]}),await _0x1e88b8['setStateAsync'](LTM_DP_STATUS,{'val':'Success','ack':!![]});const _0x12089f=_0x7f142d(0x1b7)+_0x570c0b[_0x7f142d(0x173)]+_0x7f142d(0x1ce)+_0x570c0b[_0x7f142d(0x170)];setup[_0x7f142d(0x1aa)](_0x1e88b8,_0x12089f,![],![]);if(_0x1e88b8['isProVersion']&&_0x200c52)_0x200c52[_0x7f142d(0x17a)](_0x1e88b8,_0x7f142d(0x1bc),{'digest':_0x54feb5});}catch(_0x46fd98){_0x1e88b8['log']['error'](_0x46fd98[_0x7f142d(0x1e9)]);}}async function runBaselineDriftAnalysis(_0xb5faf9){const _0x4b2b9e=a0_0x36735f;if(!_0xb5faf9[_0x4b2b9e(0x175)]||!_0xb5faf9[_0x4b2b9e(0x1ae)])return;if(!canCallApi())return;const _0x34103f=_0xb5faf9[_0x4b2b9e(0x1ab)][_0x4b2b9e(0x166)]||0xe;if(_0xb5faf9[_0x4b2b9e(0x1dc)][_0x4b2b9e(0x19c)]<_0x34103f+0x7){await _0xb5faf9[_0x4b2b9e(0x1a4)](_0x4b2b9e(0x1ca),{'val':_0x4b2b9e(0x16d),'ack':!![]});return;}const _0x2065fd=_0xb5faf9[_0x4b2b9e(0x1dc)][_0x4b2b9e(0x1d3)](-_0x34103f),_0x5480db=_0xb5faf9[_0x4b2b9e(0x1dc)][_0x4b2b9e(0x1d3)](0x0,_0xb5faf9[_0x4b2b9e(0x1dc)]['length']-_0x34103f),_0xf415f1=_0x4b2b9e(0x1ee)+JSON[_0x4b2b9e(0x1c1)](_0x5480db)+_0x4b2b9e(0x1b6)+JSON[_0x4b2b9e(0x1c1)](_0x2065fd);try{updateApiTimestamp();const _0x4c83dc=await _0xb5faf9['geminiModel'][_0x4b2b9e(0x1d7)](_0xf415f1),_0x222f54=JSON[_0x4b2b9e(0x1e3)](_0x4c83dc['response'][_0x4b2b9e(0x1c8)]()['replace'](/```json|```/g,'')['trim']());_0x222f54[_0x4b2b9e(0x17d)]&&(await _0xb5faf9[_0x4b2b9e(0x1a4)](_0x4b2b9e(0x1ca),{'val':_0x222f54['baselineDrift'],'ack':!![]}),await _0xb5faf9[_0x4b2b9e(0x1a4)](_0x4b2b9e(0x17b),{'val':_0x222f54[_0x4b2b9e(0x1e2)],'ack':!![]}),await _0xb5faf9['setStateAsync'](_0x4b2b9e(0x1ec),{'val':Date[_0x4b2b9e(0x178)](),'ack':!![]}));}catch(_0x3fa192){}}async function executeAutomationAction(_0x4bb7c4){const _0x2776cb=a0_0x36735f;try{const _0x4737e5=await _0x4bb7c4[_0x2776cb(0x199)](_0x2776cb(0x18a)),_0x35e8d1=await _0x4bb7c4['getStateAsync']('analysis.automation.targetValue');if(_0x4737e5&&_0x4737e5[_0x2776cb(0x188)]&&_0x35e8d1){const _0x66eb9e=_0x4737e5[_0x2776cb(0x188)];let _0x251565=_0x35e8d1[_0x2776cb(0x188)];try{_0x251565=JSON[_0x2776cb(0x1e3)](_0x251565);}catch(_0x15a9e0){}_0x4bb7c4[_0x2776cb(0x1b1)]['info'](_0x2776cb(0x1c2)+_0x66eb9e+_0x2776cb(0x1d5)+_0x251565),await _0x4bb7c4[_0x2776cb(0x1c6)](_0x66eb9e,_0x251565);}else _0x4bb7c4[_0x2776cb(0x1b1)][_0x2776cb(0x176)](_0x2776cb(0x18b));}catch(_0x3e3e78){_0x4bb7c4[_0x2776cb(0x1b1)]['error'](_0x2776cb(0x1df)+_0x3e3e78['message']);}}async function sendMorningBriefing(_0x4b2d61){const _0x1241c7=a0_0x36735f;if(!_0x4b2d61[_0x1241c7(0x1ae)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x48d542='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x4d9925=await _0x4b2d61[_0x1241c7(0x1ae)]['generateContent'](_0x48d542),_0x2c174c=_0x4d9925[_0x1241c7(0x196)]['text']();setup[_0x1241c7(0x1aa)](_0x4b2d61,_0x1241c7(0x1a3)+_0x2c174c);}catch(_0x5e64cf){_0x4b2d61[_0x1241c7(0x1b1)]['error'](_0x1241c7(0x1be)+_0x5e64cf[_0x1241c7(0x1e9)]);}}module[a0_0x36735f(0x182)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};