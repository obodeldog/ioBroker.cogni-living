const a0_0x5d3017=a0_0x4081;(function(_0x4add29,_0x4577d4){const _0x3e7b03=a0_0x4081,_0x31ea87=_0x4add29();while(!![]){try{const _0x1406d4=-parseInt(_0x3e7b03(0x13c))/0x1*(-parseInt(_0x3e7b03(0x147))/0x2)+parseInt(_0x3e7b03(0x15c))/0x3*(parseInt(_0x3e7b03(0x180))/0x4)+-parseInt(_0x3e7b03(0x11f))/0x5*(-parseInt(_0x3e7b03(0x122))/0x6)+parseInt(_0x3e7b03(0x10f))/0x7+parseInt(_0x3e7b03(0x18e))/0x8*(-parseInt(_0x3e7b03(0x137))/0x9)+-parseInt(_0x3e7b03(0x156))/0xa*(parseInt(_0x3e7b03(0x166))/0xb)+-parseInt(_0x3e7b03(0x151))/0xc*(-parseInt(_0x3e7b03(0x13b))/0xd);if(_0x1406d4===_0x4577d4)break;else _0x31ea87['push'](_0x31ea87['shift']());}catch(_0x3bd2ca){_0x31ea87['push'](_0x31ea87['shift']());}}}(a0_0x59c1,0xcce35));const a0_0x1391f0=(function(){let _0x4f72b9=!![];return function(_0x2e1349,_0x68a060){const _0x19dbe0=_0x4f72b9?function(){const _0x3e3fd7=a0_0x4081;if(_0x68a060){const _0x536d05=_0x68a060[_0x3e3fd7(0x18b)](_0x2e1349,arguments);return _0x68a060=null,_0x536d05;}}:function(){};return _0x4f72b9=![],_0x19dbe0;};}()),a0_0x4eba23=a0_0x1391f0(this,function(){const _0x18005c=a0_0x4081;return a0_0x4eba23['toString']()[_0x18005c(0x173)]('(((.+)+)+)+$')[_0x18005c(0x17e)]()[_0x18005c(0x130)](a0_0x4eba23)[_0x18005c(0x173)]('(((.+)+)+)+$');});a0_0x4eba23();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require(a0_0x5d3017(0x127)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x5d3017(0x108),LTM_DP_STATUS=a0_0x5d3017(0x14d),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x5d3017(0x155),'senior_aal':a0_0x5d3017(0x153),'family':a0_0x5d3017(0x115),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':'Sicherheit\x20geht\x20vor.','energy_saver':'PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'};function canCallApi(){const _0x2e6fee=Date['now']();return _0x2e6fee-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x292cb7){const _0x42030b=a0_0x5d3017;if(!_0x292cb7[_0x42030b(0x177)][_0x42030b(0x107)]||!_0x292cb7[_0x42030b(0x177)][_0x42030b(0x182)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x59948a=_0x292cb7[_0x42030b(0x177)][_0x42030b(0x182)];let _0x579837=await _0x292cb7[_0x42030b(0x176)](_0x59948a+_0x42030b(0x17a));if(!_0x579837)_0x579837=await _0x292cb7[_0x42030b(0x176)](_0x59948a+_0x42030b(0x12d));let _0x6fb2e7=await _0x292cb7[_0x42030b(0x176)](_0x59948a+_0x42030b(0x183));if(!_0x6fb2e7)_0x6fb2e7=await _0x292cb7['getForeignStateAsync'](_0x59948a+_0x42030b(0x15e));let _0x35002b=_0x42030b(0x11a);const _0x4330ba=await _0x292cb7[_0x42030b(0x176)](_0x59948a+_0x42030b(0x112));if(_0x4330ba)_0x35002b=_0x4330ba[_0x42030b(0x12c)]?_0x42030b(0x18d):_0x42030b(0x126);if(_0x579837&&_0x6fb2e7)return _0x579837[_0x42030b(0x12c)]+'¬∞C,\x20'+_0x6fb2e7[_0x42030b(0x12c)]+_0x42030b(0x13a)+_0x35002b;}catch(_0x45e2d3){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x44ae6b,_0x3e37ff,_0x3acd33,_0x574296){const _0x4f64b6=a0_0x5d3017;if(!_0x44ae6b[_0x4f64b6(0x11b)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x26d9df=Date[_0x4f64b6(0x111)]();if(decisionCache[_0x3e37ff]&&_0x26d9df-decisionCache[_0x3e37ff]['timestamp']<CACHE_TTL_MS){const _0x49c137=decisionCache[_0x3e37ff]['decision'];return _0x44ae6b[_0x4f64b6(0x121)]['debug'](_0x4f64b6(0x123)+_0x3e37ff+_0x4f64b6(0x16d)+(_0x49c137[_0x4f64b6(0x10c)]?'OK':'NO')+'\x20('+_0x49c137[_0x4f64b6(0x16a)]+')'),_0x49c137;}if(!canCallApi())return _0x44ae6b[_0x4f64b6(0x121)][_0x4f64b6(0x18f)](_0x4f64b6(0x142)+_0x3e37ff+_0x4f64b6(0x118)),{'approved':!![],'reason':_0x4f64b6(0x167)};const _0x86d819=new Date()[_0x4f64b6(0x15f)](),_0x2983ca=await getWeatherContext(_0x44ae6b),_0x162f75=PERSONA_MAPPING[_0x44ae6b[_0x4f64b6(0x177)][_0x4f64b6(0x18c)]||'generic'],_0x2dca8c=_0x4f64b6(0x15a)+_0x86d819+',\x20Wetter:\x20'+_0x2983ca+_0x4f64b6(0x158)+(_0x574296*0x64)[_0x4f64b6(0x14f)](0x0)+'%)\x20nach\x20\x22'+_0x3e37ff+_0x4f64b6(0x170)+_0x3acd33+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x162f75+_0x4f64b6(0x14c);try{updateApiTimestamp();const _0x50127c=await _0x44ae6b[_0x4f64b6(0x11b)]['generateContent'](_0x2dca8c),_0x500bcd=_0x50127c['response'][_0x4f64b6(0x169)]()[_0x4f64b6(0x178)](/```json|```/g,'')[_0x4f64b6(0x144)](),_0x5aff50=JSON['parse'](_0x500bcd);return decisionCache[_0x3e37ff]={'decision':_0x5aff50,'timestamp':_0x26d9df},_0x5aff50;}catch(_0x2cefad){return _0x44ae6b['log'][_0x4f64b6(0x13e)](_0x4f64b6(0x106)+_0x2cefad[_0x4f64b6(0x16f)]),decisionCache[_0x3e37ff]={'decision':{'approved':!![],'reason':_0x4f64b6(0x113)},'timestamp':_0x26d9df-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x4f64b6(0x113)};}}async function runGeminiAnalysis(_0x4ba562,_0x1a8015=''){const _0x53feb4=a0_0x5d3017;if(!_0x4ba562[_0x53feb4(0x11b)])return;if(!canCallApi()){_0x4ba562[_0x53feb4(0x121)][_0x53feb4(0x18f)](_0x53feb4(0x15d));return;}if(_0x4ba562['eventHistory'][_0x53feb4(0x146)]===0x0)return;const _0x2c05e5=_0x4ba562['eventHistory']['slice'](0x0,0xf),_0x54213c=_0x4ba562[_0x53feb4(0x162)],_0x2fa75a=PERSONA_MAPPING[_0x4ba562[_0x53feb4(0x177)][_0x53feb4(0x18c)]||_0x53feb4(0x179)],_0x3d802e=_0x4ba562[_0x53feb4(0x177)][_0x53feb4(0x16c)]||_0x53feb4(0x10a);let _0x1de85e='Unbekannt';try{const _0x1f6f08=await _0x4ba562[_0x53feb4(0x138)](_0x53feb4(0x189));if(_0x1f6f08&&_0x1f6f08[_0x53feb4(0x12c)])_0x1de85e=_0x1f6f08['val'];}catch(_0x33d884){}let _0x50b65d=![];try{const _0x5602dd=await _0x4ba562[_0x53feb4(0x138)]('analysis.automation.autoApply');if(_0x5602dd&&_0x5602dd[_0x53feb4(0x12c)])_0x50b65d=!![];}catch(_0x555848){}const _0x5cfd77=_0x53feb4(0x14e)+_0x2fa75a+_0x53feb4(0x12f)+_0x3d802e+_0x53feb4(0x181)+_0x54213c+_0x53feb4(0x120)+_0x1de85e+_0x53feb4(0x17f)+JSON[_0x53feb4(0x152)](_0x2c05e5)+'.\x20EMERGENCY:\x20'+_0x1a8015+_0x53feb4(0x159);try{updateApiTimestamp();const _0x11bd0f=await _0x4ba562[_0x53feb4(0x11b)][_0x53feb4(0x11d)](_0x5cfd77),_0x3ed39a=JSON[_0x53feb4(0x184)](_0x11bd0f['response'][_0x53feb4(0x169)]()['replace'](/```json|```/g,'')[_0x53feb4(0x144)]());await _0x4ba562['setStateAsync'](_0x53feb4(0x141),{'val':JSON['stringify'](_0x3ed39a),'ack':!![]});if(_0x3ed39a[_0x53feb4(0x11e)])await _0x4ba562[_0x53feb4(0x17d)](_0x53feb4(0x185),{'val':_0x3ed39a[_0x53feb4(0x11e)],'ack':!![]});const _0x30833a={'timestamp':Date[_0x53feb4(0x111)](),'id':Date[_0x53feb4(0x111)]()[_0x53feb4(0x17e)](),'analysis':{'activity':{'summary':_0x3ed39a['summary'],'isAlert':_0x3ed39a[_0x53feb4(0x134)],'alertReason':_0x3ed39a[_0x53feb4(0x143)]},'comfort':{'automationProposal':_0x3ed39a['automationProposal']}}};_0x4ba562[_0x53feb4(0x124)][_0x53feb4(0x10e)](_0x30833a);if(_0x4ba562[_0x53feb4(0x124)][_0x53feb4(0x146)]>0x32)_0x4ba562['analysisHistory'][_0x53feb4(0x133)]();await _0x4ba562[_0x53feb4(0x17d)](_0x53feb4(0x188),{'val':JSON[_0x53feb4(0x152)](_0x4ba562[_0x53feb4(0x124)]),'ack':!![]});const _0x3efa66=_0x3ed39a[_0x53feb4(0x134)]||![];_0x3efa66!==_0x4ba562[_0x53feb4(0x10b)]&&(await _0x4ba562[_0x53feb4(0x17d)](_0x53feb4(0x16b),{'val':_0x3efa66,'ack':!![]}),_0x4ba562['lastAlertState']=_0x3efa66,_0x3efa66&&(await _0x4ba562['setStateAsync'](_0x53feb4(0x171),{'val':_0x3ed39a['alertReason'],'ack':!![]}),setup[_0x53feb4(0x132)](_0x4ba562,'‚ö†Ô∏è\x20ALARM:\x20'+_0x3ed39a[_0x53feb4(0x143)],![],_0x3ed39a['isEmergency'])));if(_0x3ed39a['automationProposal']&&_0x3ed39a['automationProposal'][_0x53feb4(0x17b)]){await _0x4ba562['setStateAsync'](_0x53feb4(0x18a),{'val':!![],'ack':!![]}),await _0x4ba562['setStateAsync'](_0x53feb4(0x148),{'val':_0x3ed39a[_0x53feb4(0x150)][_0x53feb4(0x165)],'ack':!![]}),await _0x4ba562[_0x53feb4(0x17d)](_0x53feb4(0x119),{'val':_0x3ed39a[_0x53feb4(0x150)][_0x53feb4(0x154)],'ack':!![]}),await _0x4ba562[_0x53feb4(0x17d)](_0x53feb4(0x13f),{'val':JSON[_0x53feb4(0x152)](_0x3ed39a[_0x53feb4(0x150)][_0x53feb4(0x135)]),'ack':!![]});if(_0x50b65d)executeAutomationAction(_0x4ba562);}}catch(_0x54a23c){_0x4ba562[_0x53feb4(0x121)]['error'](_0x53feb4(0x187)+_0x54a23c[_0x53feb4(0x16f)]);}}async function createDailyDigest(_0x1e61c2,_0x2bac95){const _0x2a4b62=a0_0x5d3017;if(!_0x1e61c2[_0x2a4b62(0x163)])return;if(!canCallApi()){await _0x1e61c2[_0x2a4b62(0x17d)](LTM_DP_STATUS,{'val':_0x2a4b62(0x131),'ack':!![]});return;}await _0x1e61c2['setStateAsync'](LTM_DP_STATUS,{'val':_0x2a4b62(0x157),'ack':!![]});if(!_0x1e61c2['geminiModel']||_0x1e61c2[_0x2a4b62(0x117)][_0x2a4b62(0x146)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x1e61c2['setStateAsync'](LTM_DP_STATUS,{'val':_0x2a4b62(0x164),'ack':!![]});return;}const _0x95314a=JSON[_0x2a4b62(0x184)](JSON['stringify'](_0x1e61c2[_0x2a4b62(0x117)])),_0x2802ba=_0x95314a[_0x2a4b62(0x146)],_0x3d22c6=_0x2a4b62(0x174)+JSON[_0x2a4b62(0x152)](_0x95314a);try{updateApiTimestamp();const _0x2923b7=await _0x1e61c2['geminiModel'][_0x2a4b62(0x11d)](_0x3d22c6),_0x27071e=JSON['parse'](_0x2923b7[_0x2a4b62(0x12b)][_0x2a4b62(0x169)]()[_0x2a4b62(0x178)](/```json|```/g,'')[_0x2a4b62(0x144)]()),_0x591406={'timestamp':new Date()[_0x2a4b62(0x13d)](),'eventCount':_0x2802ba,'summary':_0x27071e['summary']||_0x2a4b62(0x114),'activityLevel':_0x27071e[_0x2a4b62(0x11c)]||_0x2a4b62(0x116),'systemMode':_0x1e61c2['currentSystemMode']};_0x1e61c2[_0x2a4b62(0x109)][_0x2a4b62(0x14b)](_0x591406);const _0x1ef61f=_0x1e61c2[_0x2a4b62(0x177)]['ltmLtbWindowDays']||0x3c;_0x1e61c2[_0x2a4b62(0x109)][_0x2a4b62(0x146)]>_0x1ef61f&&_0x1e61c2['dailyDigests'][_0x2a4b62(0x17c)](0x0,_0x1e61c2['dailyDigests'][_0x2a4b62(0x146)]-_0x1ef61f);await _0x1e61c2['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x1e61c2[_0x2a4b62(0x109)]),'ack':!![]}),_0x1e61c2[_0x2a4b62(0x117)]=[],await _0x1e61c2[_0x2a4b62(0x17d)](LTM_DP_RAW_LOG,{'val':JSON[_0x2a4b62(0x152)](_0x1e61c2[_0x2a4b62(0x117)]),'ack':!![]}),await _0x1e61c2['setStateAsync'](LTM_DP_STATUS,{'val':_0x2a4b62(0x15b),'ack':!![]});const _0x67b1e2=_0x2a4b62(0x140)+_0x27071e[_0x2a4b62(0x11e)]+_0x2a4b62(0x16e)+_0x27071e[_0x2a4b62(0x11c)];setup['sendNotification'](_0x1e61c2,_0x67b1e2,![],![]);if(_0x1e61c2['isProVersion']&&_0x2bac95)_0x2bac95[_0x2a4b62(0x128)](_0x1e61c2,_0x2a4b62(0x149),{'digest':_0x591406});}catch(_0x3a77ab){_0x1e61c2[_0x2a4b62(0x121)][_0x2a4b62(0x145)](_0x3a77ab[_0x2a4b62(0x16f)]);}}async function runBaselineDriftAnalysis(_0x4a6d66){const _0x1544b5=a0_0x5d3017;if(!_0x4a6d66['isProVersion']||!_0x4a6d66['geminiModel'])return;if(!canCallApi())return;const _0x2f3262=_0x4a6d66['config'][_0x1544b5(0x160)]||0xe;if(_0x4a6d66['dailyDigests'][_0x1544b5(0x146)]<_0x2f3262+0x7){await _0x4a6d66[_0x1544b5(0x17d)]('LTM.driftAnalysis.baselineDrift',{'val':_0x1544b5(0x136),'ack':!![]});return;}const _0x21d2d3=_0x4a6d66[_0x1544b5(0x109)][_0x1544b5(0x168)](-_0x2f3262),_0xb2b89e=_0x4a6d66['dailyDigests'][_0x1544b5(0x168)](0x0,_0x4a6d66['dailyDigests'][_0x1544b5(0x146)]-_0x2f3262),_0x353d58='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x1544b5(0x152)](_0xb2b89e)+'\x0aSTB:\x20'+JSON['stringify'](_0x21d2d3);try{updateApiTimestamp();const _0x3dfae0=await _0x4a6d66[_0x1544b5(0x11b)]['generateContent'](_0x353d58),_0xdc3187=JSON[_0x1544b5(0x184)](_0x3dfae0['response'][_0x1544b5(0x169)]()[_0x1544b5(0x178)](/```json|```/g,'')[_0x1544b5(0x144)]());_0xdc3187['baselineDrift']&&(await _0x4a6d66[_0x1544b5(0x17d)](_0x1544b5(0x139),{'val':_0xdc3187[_0x1544b5(0x110)],'ack':!![]}),await _0x4a6d66[_0x1544b5(0x17d)]('LTM.driftAnalysis.driftDetails',{'val':_0xdc3187[_0x1544b5(0x12e)],'ack':!![]}),await _0x4a6d66[_0x1544b5(0x17d)](_0x1544b5(0x14a),{'val':Date[_0x1544b5(0x111)](),'ack':!![]}));}catch(_0x2f9ae0){}}function a0_0x4081(_0x349a31,_0x2c8f8c){const _0x4e8fbe=a0_0x59c1();return a0_0x4081=function(_0x4eba23,_0x1391f0){_0x4eba23=_0x4eba23-0x106;let _0x59c1df=_0x4e8fbe[_0x4eba23];return _0x59c1df;},a0_0x4081(_0x349a31,_0x2c8f8c);}async function executeAutomationAction(_0x3c9255){const _0x459ad3=a0_0x5d3017;try{const _0x50837d=await _0x3c9255[_0x459ad3(0x138)](_0x459ad3(0x119)),_0x835414=await _0x3c9255[_0x459ad3(0x138)]('analysis.automation.targetValue');if(_0x50837d&&_0x50837d[_0x459ad3(0x12c)]&&_0x835414){const _0x2ee13b=_0x50837d[_0x459ad3(0x12c)];let _0x4d1b6d=_0x835414['val'];try{_0x4d1b6d=JSON[_0x459ad3(0x184)](_0x4d1b6d);}catch(_0x53a2a2){}_0x3c9255[_0x459ad3(0x121)]['info'](_0x459ad3(0x175)+_0x2ee13b+_0x459ad3(0x125)+_0x4d1b6d),await _0x3c9255[_0x459ad3(0x12a)](_0x2ee13b,_0x4d1b6d);}else _0x3c9255['log']['warn'](_0x459ad3(0x10d));}catch(_0x301119){_0x3c9255[_0x459ad3(0x121)]['error'](_0x459ad3(0x172)+_0x301119[_0x459ad3(0x16f)]);}}function a0_0x59c1(){const _0x4bf088=['\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','analysis.alertReason','BUTLER\x20Execution\x20Error:\x20','search','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','getForeignStateAsync','config','replace','generic','.Current.Temperature','detected','splice','setStateAsync','toString','.\x20EVENTS:\x20','2979640EiXNWx','.\x20SYSTEM_MODE:\x20','weatherInstance','.Current.WeatherText','parse','analysis.activitySummary','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','Gemini\x20Error:\x20','analysis.analysisHistory','system.presenceWho','analysis.automation.patternDetected','apply','aiPersona','Nacht','751144JpVptL','debug','ü§ñ\x20Butler\x20Brain\x20Error:\x20','useWeather','LTM.dailyDigests','dailyDigests','Keine\x20Details.','lastAlertState','approved','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','unshift','206598DMVrvn','baselineDrift','now','.Current.IsNight','KI-Fehler\x20(Fallback)','Digest','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','normal','rawEventLog','\x20√ºbersprungen\x20(Auto-Approved).','analysis.automation.targetId','Unbekannt','geminiModel','activityLevel','generateContent','summary','1510HpDfQN','.\x20ANWESEND:\x20','log','12486quXwsR','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','analysisHistory','\x20=\x20','Tag','./setup','send','exports','setForeignStateAsync','response','val','.forecast.current.temperature','driftDetails','.\x20KONTEXT:\x20','constructor','Skipped\x20(Traffic)','sendNotification','pop','isAlert','targetValue','N/A\x20(Learning)','135IcduQr','getStateAsync','LTM.driftAnalysis.baselineDrift',',\x20Lichtverh√§ltnisse:\x20','231751JJfJuF','4247gVHhJK','toISOString','warn','analysis.automation.targetValue','üìÖ\x20Daily\x20Digest:\x0a','analysis.lastResult','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','alertReason','trim','error','length','422FpWVtT','analysis.automation.description','ANALYZE_HEALTH','LTM.driftAnalysis.lastCheck','push','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','LTM.processingStatus','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','toFixed','automationProposal','156hMMtsf','stringify','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','targetId','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','642530kSuAoa','Started...','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','Success','6sityja','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','.forecast.current.state','toLocaleTimeString','ltmStbWindowDays','üåÖ\x20Morning\x20Briefing:\x0a','currentSystemMode','isProVersion','Skipped\x20(No\x20AI\x20or\x20Data)','description','176QnNPOQ','Traffic-Schutz\x20(Auto-Approved)','slice','text','reason','analysis.isAlert','livingContext','\x20->\x20','\x0aAktivit√§t:\x20','message'];a0_0x59c1=function(){return _0x4bf088;};return a0_0x59c1();}async function sendMorningBriefing(_0x868b95){const _0x4c9b94=a0_0x5d3017;if(!_0x868b95['geminiModel'])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x112d13=_0x4c9b94(0x186),_0x1271be=await _0x868b95['geminiModel'][_0x4c9b94(0x11d)](_0x112d13),_0x507725=_0x1271be['response'][_0x4c9b94(0x169)]();setup['sendNotification'](_0x868b95,_0x4c9b94(0x161)+_0x507725);}catch(_0x16a221){_0x868b95['log'][_0x4c9b94(0x145)]('Briefing\x20Error:\x20'+_0x16a221[_0x4c9b94(0x16f)]);}}module[a0_0x5d3017(0x129)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};