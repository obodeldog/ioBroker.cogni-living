const a0_0x3d0fb7=a0_0x3796;(function(_0x47de23,_0x234ddc){const _0x4476d4=a0_0x3796,_0x1c12f9=_0x47de23();while(!![]){try{const _0x4c4a01=-parseInt(_0x4476d4(0x20a))/0x1+-parseInt(_0x4476d4(0x1f4))/0x2*(parseInt(_0x4476d4(0x224))/0x3)+parseInt(_0x4476d4(0x24c))/0x4+-parseInt(_0x4476d4(0x1f5))/0x5*(parseInt(_0x4476d4(0x247))/0x6)+-parseInt(_0x4476d4(0x1f0))/0x7*(-parseInt(_0x4476d4(0x1d3))/0x8)+parseInt(_0x4476d4(0x202))/0x9+-parseInt(_0x4476d4(0x1df))/0xa*(parseInt(_0x4476d4(0x1ce))/0xb);if(_0x4c4a01===_0x234ddc)break;else _0x1c12f9['push'](_0x1c12f9['shift']());}catch(_0x2cda73){_0x1c12f9['push'](_0x1c12f9['shift']());}}}(a0_0x3fee,0xd5022));const a0_0x182c49=(function(){let _0x678af3=!![];return function(_0x192812,_0x4f35fd){const _0x416d36=_0x678af3?function(){const _0x35f427=a0_0x3796;if(_0x4f35fd){const _0x196298=_0x4f35fd[_0x35f427(0x259)](_0x192812,arguments);return _0x4f35fd=null,_0x196298;}}:function(){};return _0x678af3=![],_0x416d36;};}()),a0_0x5d567f=a0_0x182c49(this,function(){const _0x1cc934=a0_0x3796;return a0_0x5d567f[_0x1cc934(0x207)]()[_0x1cc934(0x20b)](_0x1cc934(0x213))['toString']()[_0x1cc934(0x223)](a0_0x5d567f)['search']('(((.+)+)+)+$');});a0_0x5d567f();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require('./setup'),GEMINI_MODEL=a0_0x3d0fb7(0x229),LTM_DP_DAILY_DIGESTS=a0_0x3d0fb7(0x222),LTM_DP_STATUS=a0_0x3d0fb7(0x232),LTM_DP_RAW_LOG=a0_0x3d0fb7(0x1d1),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;function a0_0x3796(_0xe62d50,_0x53ed70){const _0x4c8607=a0_0x3fee();return a0_0x3796=function(_0x5d567f,_0x182c49){_0x5d567f=_0x5d567f-0x1cc;let _0x3fee67=_0x4c8607[_0x5d567f];return _0x3fee67;},a0_0x3796(_0xe62d50,_0x53ed70);}let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x3d0fb7(0x212),'senior_aal':a0_0x3d0fb7(0x200),'family':a0_0x3d0fb7(0x1e6),'single_comfort':a0_0x3d0fb7(0x225),'security':a0_0x3d0fb7(0x253),'energy_saver':a0_0x3d0fb7(0x1e5)};function canCallApi(){const _0x18aff1=Date['now']();return _0x18aff1-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x1d2c7a=a0_0x3d0fb7;lastGlobalApiCall=Date[_0x1d2c7a(0x256)]();}async function getWeatherContext(_0x58da32){const _0x3a6cc1=a0_0x3d0fb7;if(!_0x58da32[_0x3a6cc1(0x1fe)][_0x3a6cc1(0x1d8)]||!_0x58da32[_0x3a6cc1(0x1fe)][_0x3a6cc1(0x236)])return _0x3a6cc1(0x1f9);try{const _0x2619a7=_0x58da32[_0x3a6cc1(0x1fe)][_0x3a6cc1(0x236)];let _0xb0074b=await _0x58da32[_0x3a6cc1(0x1d9)](_0x2619a7+_0x3a6cc1(0x216));if(!_0xb0074b)_0xb0074b=await _0x58da32[_0x3a6cc1(0x1d9)](_0x2619a7+'.forecast.current.temperature');let _0x539b6b=await _0x58da32[_0x3a6cc1(0x1d9)](_0x2619a7+_0x3a6cc1(0x209));if(!_0x539b6b)_0x539b6b=await _0x58da32[_0x3a6cc1(0x1d9)](_0x2619a7+_0x3a6cc1(0x206));let _0x86da21=_0x3a6cc1(0x227);const _0x8f3952=await _0x58da32[_0x3a6cc1(0x1d9)](_0x2619a7+'.Current.IsNight');if(_0x8f3952)_0x86da21=_0x8f3952[_0x3a6cc1(0x258)]?'Nacht':'Tag';if(_0xb0074b&&_0x539b6b)return _0xb0074b[_0x3a6cc1(0x258)]+_0x3a6cc1(0x1ef)+_0x539b6b[_0x3a6cc1(0x258)]+_0x3a6cc1(0x1ee)+_0x86da21;}catch(_0x43d96d){}return'Wetterdaten\x20nicht\x20abrufbar';}function a0_0x3fee(){const _0x320934=['aiPersona','\x0aSTB:\x20','Skipped\x20(Traffic)','analysis.alertReason','useWeather','getForeignStateAsync','analysis.activitySummary','send','isProVersion','.\x20EVENTS:\x20','length','2387460uXfAmK','stringify','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','LTM.driftAnalysis.baselineDrift','trim','setForeignStateAsync','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','Skipped\x20(No\x20AI\x20or\x20Data)','message','analysis.automation.targetId','approved','analysis.automation.patternDetected','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','Briefing\x20Error:\x20',',\x20LichtverhÃ¤ltnisse:\x20','Â°C,\x20','154259EHRSiA','info','Keine\x20Details.','analysis.analysisHistory','666DWCilu','451955cGZgGk','splice','slice','unshift','Unbekannt\x20(Kein\x20Sensor)','geminiModel','summary','push','%)\x20nach\x20\x22','config','decision','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','9202356LFZlBi','.\x20EMERGENCY:\x20','baselineDrift','\x20=\x20','.forecast.current.state','toString','LTM.driftAnalysis.lastCheck','.Current.WeatherText','85773bbwVFp','search','getStateAsync','log','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','error','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','(((.+)+)+)+$','text','reason','.Current.Temperature','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','automationProposal','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','system.presenceWho','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','currentSystemMode','Digest','BUTLER\x20Execution\x20Error:\x20','Traffic-Schutz\x20(Auto-Approved)','debug','pop','LTM.dailyDigests','constructor','2697iQtXWm','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','KI-Fehler\x20(Fallback)','Unbekannt','analysis.automation.description','models/gemini-flash-latest','Success','alertReason','LTM.driftAnalysis.driftDetails','replace','ANALYZE_HEALTH','ltmStbWindowDays','livingContext','\x20Ã¼bersprungen\x20(Auto-Approved).','LTM.processingStatus','.\x20SYSTEM_MODE:\x20','analysis.isAlert','eventHistory','weatherInstance','description','analysisHistory','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','ðŸŒ…\x20Morning\x20Briefing:\x0a','response','âš ï¸\x20ALARM:\x20','Gemini\x20Error:\x20','\x20->\x20','warn','analysis.automation.targetValue','dailyDigests','KI\x20offline\x20(Fallback)','Started...','activityLevel','isAlert','rawEventLog','30eUuAec','toISOString','isEmergency','sendNotification','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','3938512sGuavM','exports','N/A\x20(Learning)','timestamp','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','lastAlertState','detected','Sicherheit\x20geht\x20vor.','setStateAsync','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','now','parse','val','apply','toFixed','.\x20KONTEXT:\x20','33ZLcHms','generateContent','generic','LTM.rawEventLog','targetValue','152CxaVoT'];a0_0x3fee=function(){return _0x320934;};return a0_0x3fee();}async function consultButler(_0x22e782,_0x57a7bd,_0x1bbba5,_0x1d7e43){const _0xb73168=a0_0x3d0fb7;if(!_0x22e782[_0xb73168(0x1fa)])return{'approved':!![],'reason':_0xb73168(0x242)};const _0x52ac31=Date[_0xb73168(0x256)]();if(decisionCache[_0x57a7bd]&&_0x52ac31-decisionCache[_0x57a7bd][_0xb73168(0x24f)]<CACHE_TTL_MS){const _0x145ea4=decisionCache[_0x57a7bd][_0xb73168(0x1ff)];return _0x22e782[_0xb73168(0x20d)][_0xb73168(0x220)](_0xb73168(0x1ec)+_0x57a7bd+_0xb73168(0x23e)+(_0x145ea4[_0xb73168(0x1ea)]?'OK':'NO')+'\x20('+_0x145ea4[_0xb73168(0x215)]+')'),_0x145ea4;}if(!canCallApi())return _0x22e782[_0xb73168(0x20d)][_0xb73168(0x220)]('ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20'+_0x57a7bd+_0xb73168(0x231)),{'approved':!![],'reason':_0xb73168(0x21f)};const _0x1c0ce9=new Date()['toLocaleTimeString'](),_0x5c5c0f=await getWeatherContext(_0x22e782),_0x32a3ba=PERSONA_MAPPING[_0x22e782['config'][_0xb73168(0x1d4)]||_0xb73168(0x1d0)],_0x19e4a8='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x1c0ce9+',\x20Wetter:\x20'+_0x5c5c0f+_0xb73168(0x239)+(_0x1d7e43*0x64)[_0xb73168(0x1cc)](0x0)+_0xb73168(0x1fd)+_0x57a7bd+_0xb73168(0x217)+_0x1bbba5+_0xb73168(0x219)+_0x32a3ba+_0xb73168(0x21b);try{updateApiTimestamp();const _0x29f5d2=await _0x22e782[_0xb73168(0x1fa)]['generateContent'](_0x19e4a8),_0x4a4542=_0x29f5d2[_0xb73168(0x23b)]['text']()[_0xb73168(0x22d)](/```json|```/g,'')[_0xb73168(0x1e3)](),_0x256f49=JSON[_0xb73168(0x257)](_0x4a4542);return decisionCache[_0x57a7bd]={'decision':_0x256f49,'timestamp':_0x52ac31},_0x256f49;}catch(_0x2c81b3){return _0x22e782[_0xb73168(0x20d)][_0xb73168(0x23f)](_0xb73168(0x211)+_0x2c81b3[_0xb73168(0x1e8)]),decisionCache[_0x57a7bd]={'decision':{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'},'timestamp':_0x52ac31-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0xb73168(0x226)};}}async function runGeminiAnalysis(_0x53054b,_0x3bb53b=''){const _0x4504b0=a0_0x3d0fb7;if(!_0x53054b[_0x4504b0(0x1fa)])return;if(!canCallApi()){_0x53054b[_0x4504b0(0x20d)]['debug'](_0x4504b0(0x255));return;}if(_0x53054b[_0x4504b0(0x235)][_0x4504b0(0x1de)]===0x0)return;const _0x4eb086=_0x53054b[_0x4504b0(0x235)][_0x4504b0(0x1f7)](0x0,0xf),_0x1e6efd=_0x53054b[_0x4504b0(0x21c)],_0x14b840=PERSONA_MAPPING[_0x53054b['config']['aiPersona']||'generic'],_0x567d15=_0x53054b[_0x4504b0(0x1fe)][_0x4504b0(0x230)]||_0x4504b0(0x1f2);let _0x3cc448=_0x4504b0(0x227);try{const _0x361b6e=await _0x53054b['getStateAsync'](_0x4504b0(0x21a));if(_0x361b6e&&_0x361b6e[_0x4504b0(0x258)])_0x3cc448=_0x361b6e[_0x4504b0(0x258)];}catch(_0x3cd414){}let _0x1e6284=![];try{const _0x39b639=await _0x53054b[_0x4504b0(0x20c)]('analysis.automation.autoApply');if(_0x39b639&&_0x39b639[_0x4504b0(0x258)])_0x1e6284=!![];}catch(_0x3e58d3){}const _0x1083ed=_0x4504b0(0x1e1)+_0x14b840+_0x4504b0(0x1cd)+_0x567d15+_0x4504b0(0x233)+_0x1e6efd+'.\x20ANWESEND:\x20'+_0x3cc448+_0x4504b0(0x1dd)+JSON['stringify'](_0x4eb086)+_0x4504b0(0x203)+_0x3bb53b+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x3074e4=await _0x53054b[_0x4504b0(0x1fa)][_0x4504b0(0x1cf)](_0x1083ed),_0x2cd15e=JSON[_0x4504b0(0x257)](_0x3074e4['response'][_0x4504b0(0x214)]()[_0x4504b0(0x22d)](/```json|```/g,'')[_0x4504b0(0x1e3)]());await _0x53054b[_0x4504b0(0x254)]('analysis.lastResult',{'val':JSON[_0x4504b0(0x1e0)](_0x2cd15e),'ack':!![]});if(_0x2cd15e[_0x4504b0(0x1fb)])await _0x53054b['setStateAsync'](_0x4504b0(0x1da),{'val':_0x2cd15e[_0x4504b0(0x1fb)],'ack':!![]});const _0x1bcb0e={'timestamp':Date['now'](),'id':Date[_0x4504b0(0x256)]()['toString'](),'analysis':{'activity':{'summary':_0x2cd15e[_0x4504b0(0x1fb)],'isAlert':_0x2cd15e[_0x4504b0(0x245)],'alertReason':_0x2cd15e[_0x4504b0(0x22b)]},'comfort':{'automationProposal':_0x2cd15e[_0x4504b0(0x218)]}}};_0x53054b[_0x4504b0(0x238)][_0x4504b0(0x1f8)](_0x1bcb0e);if(_0x53054b[_0x4504b0(0x238)]['length']>0x32)_0x53054b[_0x4504b0(0x238)][_0x4504b0(0x221)]();await _0x53054b[_0x4504b0(0x254)](_0x4504b0(0x1f3),{'val':JSON[_0x4504b0(0x1e0)](_0x53054b[_0x4504b0(0x238)]),'ack':!![]});const _0x1862c0=_0x2cd15e[_0x4504b0(0x245)]||![];_0x1862c0!==_0x53054b[_0x4504b0(0x251)]&&(await _0x53054b[_0x4504b0(0x254)](_0x4504b0(0x234),{'val':_0x1862c0,'ack':!![]}),_0x53054b[_0x4504b0(0x251)]=_0x1862c0,_0x1862c0&&(await _0x53054b[_0x4504b0(0x254)](_0x4504b0(0x1d7),{'val':_0x2cd15e[_0x4504b0(0x22b)],'ack':!![]}),setup[_0x4504b0(0x24a)](_0x53054b,_0x4504b0(0x23c)+_0x2cd15e['alertReason'],![],_0x2cd15e[_0x4504b0(0x249)])));if(_0x2cd15e[_0x4504b0(0x218)]&&_0x2cd15e[_0x4504b0(0x218)][_0x4504b0(0x252)]){await _0x53054b[_0x4504b0(0x254)](_0x4504b0(0x1eb),{'val':!![],'ack':!![]}),await _0x53054b[_0x4504b0(0x254)](_0x4504b0(0x228),{'val':_0x2cd15e[_0x4504b0(0x218)][_0x4504b0(0x237)],'ack':!![]}),await _0x53054b['setStateAsync'](_0x4504b0(0x1e9),{'val':_0x2cd15e[_0x4504b0(0x218)]['targetId'],'ack':!![]}),await _0x53054b[_0x4504b0(0x254)](_0x4504b0(0x240),{'val':JSON['stringify'](_0x2cd15e[_0x4504b0(0x218)][_0x4504b0(0x1d2)]),'ack':!![]});if(_0x1e6284)executeAutomationAction(_0x53054b);}}catch(_0x1453f5){_0x53054b[_0x4504b0(0x20d)][_0x4504b0(0x20f)](_0x4504b0(0x23d)+_0x1453f5[_0x4504b0(0x1e8)]);}}async function createDailyDigest(_0x2184cd,_0x4b3d3c){const _0x3d698c=a0_0x3d0fb7;if(!_0x2184cd['isProVersion'])return;if(!canCallApi()){await _0x2184cd[_0x3d698c(0x254)](LTM_DP_STATUS,{'val':_0x3d698c(0x1d6),'ack':!![]});return;}await _0x2184cd['setStateAsync'](LTM_DP_STATUS,{'val':_0x3d698c(0x243),'ack':!![]});if(!_0x2184cd['geminiModel']||_0x2184cd[_0x3d698c(0x246)][_0x3d698c(0x1de)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x2184cd[_0x3d698c(0x254)](LTM_DP_STATUS,{'val':_0x3d698c(0x1e7),'ack':!![]});return;}const _0x2a4b52=JSON[_0x3d698c(0x257)](JSON[_0x3d698c(0x1e0)](_0x2184cd['rawEventLog'])),_0x5737f7=_0x2a4b52['length'],_0x463d37=_0x3d698c(0x24b)+JSON['stringify'](_0x2a4b52);try{updateApiTimestamp();const _0x3b8c12=await _0x2184cd[_0x3d698c(0x1fa)]['generateContent'](_0x463d37),_0x19d12a=JSON['parse'](_0x3b8c12[_0x3d698c(0x23b)][_0x3d698c(0x214)]()[_0x3d698c(0x22d)](/```json|```/g,'')[_0x3d698c(0x1e3)]()),_0x37a0de={'timestamp':new Date()[_0x3d698c(0x248)](),'eventCount':_0x5737f7,'summary':_0x19d12a[_0x3d698c(0x1fb)]||_0x3d698c(0x21d),'activityLevel':_0x19d12a[_0x3d698c(0x244)]||'normal','systemMode':_0x2184cd[_0x3d698c(0x21c)]};_0x2184cd[_0x3d698c(0x241)][_0x3d698c(0x1fc)](_0x37a0de);const _0xe37ffb=_0x2184cd['config']['ltmLtbWindowDays']||0x3c;_0x2184cd[_0x3d698c(0x241)]['length']>_0xe37ffb&&_0x2184cd[_0x3d698c(0x241)][_0x3d698c(0x1f6)](0x0,_0x2184cd[_0x3d698c(0x241)]['length']-_0xe37ffb);await _0x2184cd['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x3d698c(0x1e0)](_0x2184cd[_0x3d698c(0x241)]),'ack':!![]}),_0x2184cd[_0x3d698c(0x246)]=[],await _0x2184cd['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x3d698c(0x1e0)](_0x2184cd[_0x3d698c(0x246)]),'ack':!![]}),await _0x2184cd['setStateAsync'](LTM_DP_STATUS,{'val':_0x3d698c(0x22a),'ack':!![]});if(_0x2184cd[_0x3d698c(0x1dc)]&&_0x4b3d3c)_0x4b3d3c[_0x3d698c(0x1db)](_0x2184cd,_0x3d698c(0x22e),{'digest':_0x37a0de});}catch(_0x587afa){_0x2184cd[_0x3d698c(0x20d)][_0x3d698c(0x20f)](_0x587afa[_0x3d698c(0x1e8)]);}}async function runBaselineDriftAnalysis(_0x23307a){const _0x4f4e46=a0_0x3d0fb7;if(!_0x23307a[_0x4f4e46(0x1dc)]||!_0x23307a[_0x4f4e46(0x1fa)])return;if(!canCallApi())return;const _0x5d1bd6=_0x23307a[_0x4f4e46(0x1fe)][_0x4f4e46(0x22f)]||0xe;if(_0x23307a[_0x4f4e46(0x241)][_0x4f4e46(0x1de)]<_0x5d1bd6+0x7){await _0x23307a[_0x4f4e46(0x254)](_0x4f4e46(0x1e2),{'val':_0x4f4e46(0x24e),'ack':!![]});return;}const _0x205942=_0x23307a['dailyDigests'][_0x4f4e46(0x1f7)](-_0x5d1bd6),_0x4b1760=_0x23307a['dailyDigests'][_0x4f4e46(0x1f7)](0x0,_0x23307a['dailyDigests']['length']-_0x5d1bd6),_0x1d3e2a=_0x4f4e46(0x20e)+JSON['stringify'](_0x4b1760)+_0x4f4e46(0x1d5)+JSON[_0x4f4e46(0x1e0)](_0x205942);try{updateApiTimestamp();const _0xf3a32d=await _0x23307a[_0x4f4e46(0x1fa)][_0x4f4e46(0x1cf)](_0x1d3e2a),_0x255e66=JSON['parse'](_0xf3a32d[_0x4f4e46(0x23b)][_0x4f4e46(0x214)]()['replace'](/```json|```/g,'')[_0x4f4e46(0x1e3)]());_0x255e66[_0x4f4e46(0x204)]&&(await _0x23307a[_0x4f4e46(0x254)]('LTM.driftAnalysis.baselineDrift',{'val':_0x255e66[_0x4f4e46(0x204)],'ack':!![]}),await _0x23307a[_0x4f4e46(0x254)](_0x4f4e46(0x22c),{'val':_0x255e66['driftDetails'],'ack':!![]}),await _0x23307a[_0x4f4e46(0x254)](_0x4f4e46(0x208),{'val':Date[_0x4f4e46(0x256)](),'ack':!![]}));}catch(_0x4f2899){}}async function executeAutomationAction(_0x831faf){const _0x1834cd=a0_0x3d0fb7;try{const _0x2670ec=await _0x831faf['getStateAsync'](_0x1834cd(0x1e9)),_0x374c22=await _0x831faf[_0x1834cd(0x20c)](_0x1834cd(0x240));if(_0x2670ec&&_0x2670ec[_0x1834cd(0x258)]&&_0x374c22){const _0x5f9c0=_0x2670ec[_0x1834cd(0x258)];let _0x5279e9=_0x374c22['val'];try{_0x5279e9=JSON[_0x1834cd(0x257)](_0x5279e9);}catch(_0xc7b4b){}_0x831faf[_0x1834cd(0x20d)][_0x1834cd(0x1f1)](_0x1834cd(0x250)+_0x5f9c0+_0x1834cd(0x205)+_0x5279e9),await _0x831faf[_0x1834cd(0x1e4)](_0x5f9c0,_0x5279e9);}else _0x831faf['log'][_0x1834cd(0x23f)](_0x1834cd(0x201));}catch(_0x43f4b9){_0x831faf[_0x1834cd(0x20d)]['error'](_0x1834cd(0x21e)+_0x43f4b9[_0x1834cd(0x1e8)]);}}async function sendMorningBriefing(_0x45b4ce){const _0x280b48=a0_0x3d0fb7;if(!_0x45b4ce[_0x280b48(0x1fa)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x510d91=_0x280b48(0x210),_0x468273=await _0x45b4ce['geminiModel'][_0x280b48(0x1cf)](_0x510d91),_0x1d7ce9=_0x468273['response'][_0x280b48(0x214)]();setup[_0x280b48(0x24a)](_0x45b4ce,_0x280b48(0x23a)+_0x1d7ce9);}catch(_0x1ceade){_0x45b4ce[_0x280b48(0x20d)][_0x280b48(0x20f)](_0x280b48(0x1ed)+_0x1ceade['message']);}}module[a0_0x3d0fb7(0x24d)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};