const a0_0x319132=a0_0x3ad4;(function(_0x8e5c83,_0x1277a4){const _0x156b14=a0_0x3ad4,_0x40e2f0=_0x8e5c83();while(!![]){try{const _0x1ec975=-parseInt(_0x156b14(0x1bd))/0x1*(-parseInt(_0x156b14(0x1c6))/0x2)+parseInt(_0x156b14(0x1b5))/0x3+-parseInt(_0x156b14(0x1d3))/0x4*(-parseInt(_0x156b14(0x1ad))/0x5)+-parseInt(_0x156b14(0x1cc))/0x6+parseInt(_0x156b14(0x194))/0x7*(-parseInt(_0x156b14(0x1ae))/0x8)+-parseInt(_0x156b14(0x1aa))/0x9*(-parseInt(_0x156b14(0x1e3))/0xa)+-parseInt(_0x156b14(0x1bb))/0xb;if(_0x1ec975===_0x1277a4)break;else _0x40e2f0['push'](_0x40e2f0['shift']());}catch(_0xc1a5da){_0x40e2f0['push'](_0x40e2f0['shift']());}}}(a0_0x4c00,0x5e0e3));const a0_0x160dc0=(function(){let _0x428594=!![];return function(_0x2fb5f9,_0x5d9d5a){const _0x43fdb7=_0x428594?function(){if(_0x5d9d5a){const _0x418771=_0x5d9d5a['apply'](_0x2fb5f9,arguments);return _0x5d9d5a=null,_0x418771;}}:function(){};return _0x428594=![],_0x43fdb7;};}()),a0_0x5802b9=a0_0x160dc0(this,function(){const _0x3ba4d6=a0_0x3ad4;return a0_0x5802b9[_0x3ba4d6(0x212)]()[_0x3ba4d6(0x20e)](_0x3ba4d6(0x1af))[_0x3ba4d6(0x212)]()[_0x3ba4d6(0x1cf)](a0_0x5802b9)[_0x3ba4d6(0x20e)]('(((.+)+)+)+$');});a0_0x5802b9();'use strict';const {GoogleGenerativeAI}=require(a0_0x319132(0x20d)),setup=require('./setup'),GEMINI_MODEL=a0_0x319132(0x1a9),LTM_DP_DAILY_DIGESTS=a0_0x319132(0x214),LTM_DP_STATUS=a0_0x319132(0x1a0),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':'PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':a0_0x319132(0x205),'single_comfort':a0_0x319132(0x1ba),'security':a0_0x319132(0x1dc),'energy_saver':a0_0x319132(0x200)};function a0_0x4c00(){const _0x2948a5=['aiPersona','response','toISOString','baselineDrift','targetValue','.Current.IsNight','models/gemini-flash-latest','9ulmYCI','\x0aSTB:\x20','Keine\x20Details.','10oYiLYB','8yFcKQF','(((.+)+)+)+$','automationProposal','toFixed','%)\x20nach\x20\x22','detected','currentSystemMode','2173251PWVtyL','sendNotification','analysis.automation.autoApply','generic','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','6306674inDPAI','pop','177PTOKVi','Unbekannt\x20(Kein\x20Sensor)','replace','getForeignStateAsync','slice',',\x20LichtverhÃ¤ltnisse:\x20','Digest','isProVersion','setStateAsync','486zRScWn','now','ltmStbWindowDays','\x20Ã¼bersprungen\x20(Auto-Approved).','\x20=\x20','system.presenceWho','3258486Vfvdlp','LTM.driftAnalysis.lastCheck','splice','constructor','toLocaleTimeString','push','geminiModel','1433452yTudJH','analysis.isAlert','ANALYZE_HEALTH','analysis.automation.targetId','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','trim','.Current.WeatherText','isAlert','analysis.activitySummary','Sicherheit\x20geht\x20vor.','generateContent','LTM.driftAnalysis.driftDetails','KI-Fehler\x20(Fallback)','weatherInstance','Traffic-Schutz\x20(Auto-Approved)','analysis.automation.patternDetected','3701180eeTpBI','LTM.driftAnalysis.baselineDrift','summary','exports','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','dailyDigests','N/A\x20(Learning)','approved','ltmLtbWindowDays','send','length','log','isEmergency','lastAlertState','error','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','parse','Unbekannt','val','config','useWeather','alertReason','Â°C,\x20','Gemini\x20Error:\x20','analysis.lastResult','âš ï¸\x20ALARM:\x20','analysis.alertReason','getStateAsync','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','Started...','Success','Wetterdaten\x20nicht\x20abrufbar','Skipped\x20(Traffic)','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','activityLevel','message','warn','.forecast.current.state','eventHistory','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','Skipped\x20(No\x20AI\x20or\x20Data)','@google/generative-ai','search','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','livingContext','.Current.Temperature','toString','stringify','LTM.dailyDigests','text','analysis.automation.description','2468242REemZo','.\x20SYSTEM_MODE:\x20','.\x20EVENTS:\x20','analysisHistory','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','analysis.automation.targetValue','info','.\x20KONTEXT:\x20','rawEventLog','.forecast.current.temperature','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','LTM.processingStatus','description','debug'];a0_0x4c00=function(){return _0x2948a5;};return a0_0x4c00();}function canCallApi(){const _0x4d8fc4=a0_0x319132,_0x4595df=Date[_0x4d8fc4(0x1c7)]();return _0x4595df-lastGlobalApiCall>MIN_API_GAP_MS;}function a0_0x3ad4(_0x4261e6,_0x2ea211){const _0x45c1c2=a0_0x4c00();return a0_0x3ad4=function(_0x5802b9,_0x160dc0){_0x5802b9=_0x5802b9-0x194;let _0x4c00a0=_0x45c1c2[_0x5802b9];return _0x4c00a0;},a0_0x3ad4(_0x4261e6,_0x2ea211);}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x4c162f){const _0x3f1c4a=a0_0x319132;if(!_0x4c162f[_0x3f1c4a(0x1f7)][_0x3f1c4a(0x1f8)]||!_0x4c162f[_0x3f1c4a(0x1f7)]['weatherInstance'])return _0x3f1c4a(0x1be);try{const _0x4e3796=_0x4c162f[_0x3f1c4a(0x1f7)][_0x3f1c4a(0x1e0)];let _0x4a2d2b=await _0x4c162f[_0x3f1c4a(0x1c0)](_0x4e3796+_0x3f1c4a(0x211));if(!_0x4a2d2b)_0x4a2d2b=await _0x4c162f[_0x3f1c4a(0x1c0)](_0x4e3796+_0x3f1c4a(0x19e));let _0x4beaed=await _0x4c162f['getForeignStateAsync'](_0x4e3796+_0x3f1c4a(0x1d9));if(!_0x4beaed)_0x4beaed=await _0x4c162f[_0x3f1c4a(0x1c0)](_0x4e3796+_0x3f1c4a(0x209));let _0x26dff5=_0x3f1c4a(0x1f5);const _0x38addd=await _0x4c162f[_0x3f1c4a(0x1c0)](_0x4e3796+_0x3f1c4a(0x1a8));if(_0x38addd)_0x26dff5=_0x38addd['val']?'Nacht':'Tag';if(_0x4a2d2b&&_0x4beaed)return _0x4a2d2b[_0x3f1c4a(0x1f6)]+_0x3f1c4a(0x1fa)+_0x4beaed['val']+_0x3f1c4a(0x1c2)+_0x26dff5;}catch(_0x1d63a6){}return _0x3f1c4a(0x203);}async function consultButler(_0x2d8924,_0x141fc3,_0x4036bd,_0x59c80e){const _0x418439=a0_0x319132;if(!_0x2d8924['geminiModel'])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x538434=Date[_0x418439(0x1c7)]();if(decisionCache[_0x141fc3]&&_0x538434-decisionCache[_0x141fc3]['timestamp']<CACHE_TTL_MS){const _0x26b0eb=decisionCache[_0x141fc3]['decision'];return _0x2d8924[_0x418439(0x1ee)][_0x418439(0x1a2)](_0x418439(0x1b9)+_0x141fc3+'\x20->\x20'+(_0x26b0eb[_0x418439(0x1ea)]?'OK':'NO')+'\x20('+_0x26b0eb['reason']+')'),_0x26b0eb;}if(!canCallApi())return _0x2d8924[_0x418439(0x1ee)][_0x418439(0x1a2)](_0x418439(0x1f2)+_0x141fc3+_0x418439(0x1c9)),{'approved':!![],'reason':_0x418439(0x1e1)};const _0xc703af=new Date()[_0x418439(0x1d0)](),_0x3c5c03=await getWeatherContext(_0x2d8924),_0x4de60f=PERSONA_MAPPING[_0x2d8924[_0x418439(0x1f7)][_0x418439(0x1a3)]||_0x418439(0x1b8)],_0x4e5ec1='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0xc703af+',\x20Wetter:\x20'+_0x3c5c03+_0x418439(0x1f3)+(_0x59c80e*0x64)[_0x418439(0x1b1)](0x0)+_0x418439(0x1b2)+_0x141fc3+'\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22'+_0x4036bd+_0x418439(0x199)+_0x4de60f+_0x418439(0x19f);try{updateApiTimestamp();const _0x14a563=await _0x2d8924[_0x418439(0x1d2)]['generateContent'](_0x4e5ec1),_0x11feb0=_0x14a563[_0x418439(0x1a4)][_0x418439(0x215)]()[_0x418439(0x1bf)](/```json|```/g,'')['trim'](),_0x101200=JSON[_0x418439(0x1f4)](_0x11feb0);return decisionCache[_0x141fc3]={'decision':_0x101200,'timestamp':_0x538434},_0x101200;}catch(_0x55465){return _0x2d8924['log'][_0x418439(0x208)]('ðŸ¤–\x20Butler\x20Brain\x20Error:\x20'+_0x55465[_0x418439(0x207)]),decisionCache[_0x141fc3]={'decision':{'approved':!![],'reason':_0x418439(0x1df)},'timestamp':_0x538434-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x418439(0x1df)};}}async function runGeminiAnalysis(_0x46c9fe,_0x2f80c2=''){const _0x475113=a0_0x319132;if(!_0x46c9fe['geminiModel'])return;if(!canCallApi()){_0x46c9fe[_0x475113(0x1ee)][_0x475113(0x1a2)]('ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x46c9fe[_0x475113(0x20a)][_0x475113(0x1ed)]===0x0)return;const _0x152ed9=_0x46c9fe[_0x475113(0x20a)][_0x475113(0x1c1)](0x0,0xf),_0x4aa852=_0x46c9fe[_0x475113(0x1b4)],_0x11ca05=PERSONA_MAPPING[_0x46c9fe['config'][_0x475113(0x1a3)]||_0x475113(0x1b8)],_0x24e2e4=_0x46c9fe[_0x475113(0x1f7)][_0x475113(0x210)]||_0x475113(0x1ac);let _0x45a15b=_0x475113(0x1f5);try{const _0x687b4f=await _0x46c9fe[_0x475113(0x1ff)](_0x475113(0x1cb));if(_0x687b4f&&_0x687b4f[_0x475113(0x1f6)])_0x45a15b=_0x687b4f[_0x475113(0x1f6)];}catch(_0x2e5e37){}let _0x33ac04=![];try{const _0x1d5c2b=await _0x46c9fe[_0x475113(0x1ff)](_0x475113(0x1b7));if(_0x1d5c2b&&_0x1d5c2b['val'])_0x33ac04=!![];}catch(_0x5b9abe){}const _0x1de14e='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x11ca05+_0x475113(0x19c)+_0x24e2e4+_0x475113(0x195)+_0x4aa852+'.\x20ANWESEND:\x20'+_0x45a15b+_0x475113(0x196)+JSON[_0x475113(0x213)](_0x152ed9)+'.\x20EMERGENCY:\x20'+_0x2f80c2+_0x475113(0x198);try{updateApiTimestamp();const _0x201259=await _0x46c9fe[_0x475113(0x1d2)][_0x475113(0x1dd)](_0x1de14e),_0x401b59=JSON['parse'](_0x201259['response'][_0x475113(0x215)]()['replace'](/```json|```/g,'')[_0x475113(0x1d8)]());await _0x46c9fe[_0x475113(0x1c5)](_0x475113(0x1fc),{'val':JSON[_0x475113(0x213)](_0x401b59),'ack':!![]});if(_0x401b59[_0x475113(0x1e5)])await _0x46c9fe[_0x475113(0x1c5)](_0x475113(0x1db),{'val':_0x401b59[_0x475113(0x1e5)],'ack':!![]});const _0x280ceb={'timestamp':Date[_0x475113(0x1c7)](),'id':Date[_0x475113(0x1c7)]()[_0x475113(0x212)](),'analysis':{'activity':{'summary':_0x401b59['summary'],'isAlert':_0x401b59['isAlert'],'alertReason':_0x401b59[_0x475113(0x1f9)]},'comfort':{'automationProposal':_0x401b59['automationProposal']}}};_0x46c9fe['analysisHistory']['unshift'](_0x280ceb);if(_0x46c9fe[_0x475113(0x197)][_0x475113(0x1ed)]>0x32)_0x46c9fe['analysisHistory'][_0x475113(0x1bc)]();await _0x46c9fe[_0x475113(0x1c5)]('analysis.analysisHistory',{'val':JSON[_0x475113(0x213)](_0x46c9fe[_0x475113(0x197)]),'ack':!![]});const _0x267f62=_0x401b59[_0x475113(0x1da)]||![];_0x267f62!==_0x46c9fe[_0x475113(0x1f0)]&&(await _0x46c9fe[_0x475113(0x1c5)](_0x475113(0x1d4),{'val':_0x267f62,'ack':!![]}),_0x46c9fe[_0x475113(0x1f0)]=_0x267f62,_0x267f62&&(await _0x46c9fe['setStateAsync'](_0x475113(0x1fe),{'val':_0x401b59[_0x475113(0x1f9)],'ack':!![]}),setup[_0x475113(0x1b6)](_0x46c9fe,_0x475113(0x1fd)+_0x401b59[_0x475113(0x1f9)],![],_0x401b59[_0x475113(0x1ef)])));if(_0x401b59['automationProposal']&&_0x401b59[_0x475113(0x1b0)][_0x475113(0x1b3)]){await _0x46c9fe[_0x475113(0x1c5)](_0x475113(0x1e2),{'val':!![],'ack':!![]}),await _0x46c9fe[_0x475113(0x1c5)](_0x475113(0x216),{'val':_0x401b59[_0x475113(0x1b0)][_0x475113(0x1a1)],'ack':!![]}),await _0x46c9fe[_0x475113(0x1c5)](_0x475113(0x1d6),{'val':_0x401b59['automationProposal']['targetId'],'ack':!![]}),await _0x46c9fe[_0x475113(0x1c5)]('analysis.automation.targetValue',{'val':JSON[_0x475113(0x213)](_0x401b59[_0x475113(0x1b0)][_0x475113(0x1a7)]),'ack':!![]});if(_0x33ac04)executeAutomationAction(_0x46c9fe);}}catch(_0x33c7db){_0x46c9fe[_0x475113(0x1ee)][_0x475113(0x1f1)](_0x475113(0x1fb)+_0x33c7db[_0x475113(0x207)]);}}async function createDailyDigest(_0x7fa06b,_0x3ca85d){const _0x23a4e9=a0_0x319132;if(!_0x7fa06b[_0x23a4e9(0x1c4)])return;if(!canCallApi()){await _0x7fa06b[_0x23a4e9(0x1c5)](LTM_DP_STATUS,{'val':_0x23a4e9(0x204),'ack':!![]});return;}await _0x7fa06b[_0x23a4e9(0x1c5)](LTM_DP_STATUS,{'val':_0x23a4e9(0x201),'ack':!![]});if(!_0x7fa06b[_0x23a4e9(0x1d2)]||_0x7fa06b[_0x23a4e9(0x19d)][_0x23a4e9(0x1ed)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x7fa06b[_0x23a4e9(0x1c5)](LTM_DP_STATUS,{'val':_0x23a4e9(0x20c),'ack':!![]});return;}const _0x1b10c3=JSON['parse'](JSON['stringify'](_0x7fa06b[_0x23a4e9(0x19d)])),_0x483536=_0x1b10c3[_0x23a4e9(0x1ed)],_0x5d1f49=_0x23a4e9(0x1e7)+JSON[_0x23a4e9(0x213)](_0x1b10c3);try{updateApiTimestamp();const _0x3318e2=await _0x7fa06b[_0x23a4e9(0x1d2)][_0x23a4e9(0x1dd)](_0x5d1f49),_0xd57e1d=JSON[_0x23a4e9(0x1f4)](_0x3318e2[_0x23a4e9(0x1a4)][_0x23a4e9(0x215)]()[_0x23a4e9(0x1bf)](/```json|```/g,'')['trim']()),_0x2d070c={'timestamp':new Date()[_0x23a4e9(0x1a5)](),'eventCount':_0x483536,'summary':_0xd57e1d[_0x23a4e9(0x1e5)]||_0x23a4e9(0x1c3),'activityLevel':_0xd57e1d[_0x23a4e9(0x206)]||'normal','systemMode':_0x7fa06b[_0x23a4e9(0x1b4)]};_0x7fa06b[_0x23a4e9(0x1e8)][_0x23a4e9(0x1d1)](_0x2d070c);const _0x2e0be5=_0x7fa06b[_0x23a4e9(0x1f7)][_0x23a4e9(0x1eb)]||0x3c;_0x7fa06b['dailyDigests'][_0x23a4e9(0x1ed)]>_0x2e0be5&&_0x7fa06b[_0x23a4e9(0x1e8)][_0x23a4e9(0x1ce)](0x0,_0x7fa06b['dailyDigests'][_0x23a4e9(0x1ed)]-_0x2e0be5);await _0x7fa06b[_0x23a4e9(0x1c5)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x23a4e9(0x213)](_0x7fa06b['dailyDigests']),'ack':!![]}),_0x7fa06b['rawEventLog']=[],await _0x7fa06b[_0x23a4e9(0x1c5)](LTM_DP_RAW_LOG,{'val':JSON[_0x23a4e9(0x213)](_0x7fa06b[_0x23a4e9(0x19d)]),'ack':!![]}),await _0x7fa06b['setStateAsync'](LTM_DP_STATUS,{'val':_0x23a4e9(0x202),'ack':!![]});if(_0x7fa06b[_0x23a4e9(0x1c4)]&&_0x3ca85d)_0x3ca85d[_0x23a4e9(0x1ec)](_0x7fa06b,_0x23a4e9(0x1d5),{'digest':_0x2d070c});}catch(_0x5ed351){_0x7fa06b[_0x23a4e9(0x1ee)][_0x23a4e9(0x1f1)](_0x5ed351[_0x23a4e9(0x207)]);}}async function runBaselineDriftAnalysis(_0x4e7a5e){const _0x4d86e7=a0_0x319132;if(!_0x4e7a5e[_0x4d86e7(0x1c4)]||!_0x4e7a5e[_0x4d86e7(0x1d2)])return;if(!canCallApi())return;const _0x237544=_0x4e7a5e[_0x4d86e7(0x1f7)][_0x4d86e7(0x1c8)]||0xe;if(_0x4e7a5e['dailyDigests']['length']<_0x237544+0x7){await _0x4e7a5e[_0x4d86e7(0x1c5)](_0x4d86e7(0x1e4),{'val':_0x4d86e7(0x1e9),'ack':!![]});return;}const _0x135911=_0x4e7a5e[_0x4d86e7(0x1e8)][_0x4d86e7(0x1c1)](-_0x237544),_0x37ebfa=_0x4e7a5e[_0x4d86e7(0x1e8)][_0x4d86e7(0x1c1)](0x0,_0x4e7a5e[_0x4d86e7(0x1e8)]['length']-_0x237544),_0x9c2b40=_0x4d86e7(0x20b)+JSON[_0x4d86e7(0x213)](_0x37ebfa)+_0x4d86e7(0x1ab)+JSON[_0x4d86e7(0x213)](_0x135911);try{updateApiTimestamp();const _0x272f1d=await _0x4e7a5e[_0x4d86e7(0x1d2)][_0x4d86e7(0x1dd)](_0x9c2b40),_0x4aba3f=JSON[_0x4d86e7(0x1f4)](_0x272f1d[_0x4d86e7(0x1a4)][_0x4d86e7(0x215)]()[_0x4d86e7(0x1bf)](/```json|```/g,'')['trim']());_0x4aba3f['baselineDrift']&&(await _0x4e7a5e[_0x4d86e7(0x1c5)]('LTM.driftAnalysis.baselineDrift',{'val':_0x4aba3f[_0x4d86e7(0x1a6)],'ack':!![]}),await _0x4e7a5e[_0x4d86e7(0x1c5)](_0x4d86e7(0x1de),{'val':_0x4aba3f['driftDetails'],'ack':!![]}),await _0x4e7a5e['setStateAsync'](_0x4d86e7(0x1cd),{'val':Date[_0x4d86e7(0x1c7)](),'ack':!![]}));}catch(_0x502aaf){}}async function executeAutomationAction(_0x1b64d6){const _0x3ef730=a0_0x319132;try{const _0x3a2e09=await _0x1b64d6[_0x3ef730(0x1ff)](_0x3ef730(0x1d6)),_0x5b577=await _0x1b64d6[_0x3ef730(0x1ff)](_0x3ef730(0x19a));if(_0x3a2e09&&_0x3a2e09[_0x3ef730(0x1f6)]&&_0x5b577){const _0x3e2614=_0x3a2e09[_0x3ef730(0x1f6)];let _0x5bd217=_0x5b577[_0x3ef730(0x1f6)];try{_0x5bd217=JSON[_0x3ef730(0x1f4)](_0x5bd217);}catch(_0x1293ff){}_0x1b64d6[_0x3ef730(0x1ee)][_0x3ef730(0x19b)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x3e2614+_0x3ef730(0x1ca)+_0x5bd217),await _0x1b64d6['setForeignStateAsync'](_0x3e2614,_0x5bd217);}else _0x1b64d6[_0x3ef730(0x1ee)]['warn'](_0x3ef730(0x1d7));}catch(_0x3affe8){_0x1b64d6[_0x3ef730(0x1ee)][_0x3ef730(0x1f1)]('BUTLER\x20Execution\x20Error:\x20'+_0x3affe8['message']);}}async function sendMorningBriefing(_0x56fef1){const _0xea09f9=a0_0x319132;if(!_0x56fef1[_0xea09f9(0x1d2)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x1ec6ee=_0xea09f9(0x20f),_0x31cb7e=await _0x56fef1[_0xea09f9(0x1d2)][_0xea09f9(0x1dd)](_0x1ec6ee),_0x2098ff=_0x31cb7e[_0xea09f9(0x1a4)][_0xea09f9(0x215)]();setup[_0xea09f9(0x1b6)](_0x56fef1,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x2098ff);}catch(_0x54ec0b){_0x56fef1['log'][_0xea09f9(0x1f1)]('Briefing\x20Error:\x20'+_0x54ec0b[_0xea09f9(0x207)]);}}module[a0_0x319132(0x1e6)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};