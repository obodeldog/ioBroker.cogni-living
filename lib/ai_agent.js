const a0_0x52f1f6=a0_0x23ae;(function(_0x479ae8,_0x7c5d1){const _0x5e3122=a0_0x23ae,_0x5e8ddb=_0x479ae8();while(!![]){try{const _0x562d2d=parseInt(_0x5e3122(0x203))/0x1*(-parseInt(_0x5e3122(0x21d))/0x2)+-parseInt(_0x5e3122(0x240))/0x3*(parseInt(_0x5e3122(0x1ce))/0x4)+-parseInt(_0x5e3122(0x1e1))/0x5*(-parseInt(_0x5e3122(0x1de))/0x6)+parseInt(_0x5e3122(0x212))/0x7+-parseInt(_0x5e3122(0x234))/0x8+parseInt(_0x5e3122(0x22a))/0x9+parseInt(_0x5e3122(0x20f))/0xa;if(_0x562d2d===_0x7c5d1)break;else _0x5e8ddb['push'](_0x5e8ddb['shift']());}catch(_0x256560){_0x5e8ddb['push'](_0x5e8ddb['shift']());}}}(a0_0x1cdc,0x1b54e));const a0_0x58c7c8=(function(){let _0x1c5e17=!![];return function(_0x12d9b9,_0x48648f){const _0x278ca1=_0x1c5e17?function(){const _0x2ae108=a0_0x23ae;if(_0x48648f){const _0x4d8882=_0x48648f[_0x2ae108(0x1ec)](_0x12d9b9,arguments);return _0x48648f=null,_0x4d8882;}}:function(){};return _0x1c5e17=![],_0x278ca1;};}()),a0_0xf9d931=a0_0x58c7c8(this,function(){const _0x28e93e=a0_0x23ae;return a0_0xf9d931['toString']()[_0x28e93e(0x236)](_0x28e93e(0x221))['toString']()[_0x28e93e(0x1ea)](a0_0xf9d931)['search'](_0x28e93e(0x221));});a0_0xf9d931();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require(a0_0x52f1f6(0x1d2)),GEMINI_MODEL=a0_0x52f1f6(0x233),LTM_DP_DAILY_DIGESTS=a0_0x52f1f6(0x215),LTM_DP_STATUS=a0_0x52f1f6(0x218),LTM_DP_RAW_LOG=a0_0x52f1f6(0x1f9),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x52f1f6(0x1eb),'senior_aal':'PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':a0_0x52f1f6(0x208),'single_comfort':a0_0x52f1f6(0x243),'security':a0_0x52f1f6(0x23a),'energy_saver':'PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'};function canCallApi(){const _0x11f339=a0_0x52f1f6,_0x333b3b=Date[_0x11f339(0x235)]();return _0x333b3b-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x426944){const _0x57ed6f=a0_0x52f1f6;if(!_0x426944[_0x57ed6f(0x20a)][_0x57ed6f(0x21a)]||!_0x426944[_0x57ed6f(0x20a)][_0x57ed6f(0x247)])return _0x57ed6f(0x219);try{const _0x15b800=_0x426944[_0x57ed6f(0x20a)][_0x57ed6f(0x247)];let _0x21fa28=await _0x426944[_0x57ed6f(0x209)](_0x15b800+'.Current.Temperature');if(!_0x21fa28)_0x21fa28=await _0x426944[_0x57ed6f(0x209)](_0x15b800+'.forecast.current.temperature');let _0x2c15f1=await _0x426944['getForeignStateAsync'](_0x15b800+_0x57ed6f(0x21b));if(!_0x2c15f1)_0x2c15f1=await _0x426944['getForeignStateAsync'](_0x15b800+'.forecast.current.state');let _0x1c5149=_0x57ed6f(0x23b);const _0x347130=await _0x426944[_0x57ed6f(0x209)](_0x15b800+_0x57ed6f(0x1f3));if(_0x347130)_0x1c5149=_0x347130['val']?_0x57ed6f(0x213):_0x57ed6f(0x1e0);if(_0x21fa28&&_0x2c15f1)return _0x21fa28[_0x57ed6f(0x24a)]+_0x57ed6f(0x24e)+_0x2c15f1[_0x57ed6f(0x24a)]+_0x57ed6f(0x22b)+_0x1c5149;}catch(_0x136104){}return'Wetterdaten\x20nicht\x20abrufbar';}function a0_0x23ae(_0x158e07,_0x31822a){const _0x4d54a4=a0_0x1cdc();return a0_0x23ae=function(_0xf9d931,_0x58c7c8){_0xf9d931=_0xf9d931-0x1ce;let _0x1cdc2b=_0x4d54a4[_0xf9d931];return _0x1cdc2b;},a0_0x23ae(_0x158e07,_0x31822a);}async function consultButler(_0x352fb9,_0x4478db,_0x1ecee0,_0x41ba46){const _0x5d5c51=a0_0x52f1f6;if(!_0x352fb9[_0x5d5c51(0x22f)])return{'approved':!![],'reason':_0x5d5c51(0x232)};const _0x50ef3c=Date[_0x5d5c51(0x235)]();if(decisionCache[_0x4478db]&&_0x50ef3c-decisionCache[_0x4478db][_0x5d5c51(0x201)]<CACHE_TTL_MS){const _0x5d9904=decisionCache[_0x4478db][_0x5d5c51(0x23f)];return _0x352fb9[_0x5d5c51(0x225)]['debug'](_0x5d5c51(0x202)+_0x4478db+_0x5d5c51(0x1fb)+(_0x5d9904['approved']?'OK':'NO')+'\x20('+_0x5d9904['reason']+')'),_0x5d9904;}if(!canCallApi())return _0x352fb9[_0x5d5c51(0x225)][_0x5d5c51(0x204)](_0x5d5c51(0x1fe)+_0x4478db+_0x5d5c51(0x1e3)),{'approved':!![],'reason':_0x5d5c51(0x1ff)};const _0x597d41=new Date()[_0x5d5c51(0x239)](),_0x21b5ff=await getWeatherContext(_0x352fb9),_0x3cfce7=PERSONA_MAPPING[_0x352fb9['config'][_0x5d5c51(0x241)]||_0x5d5c51(0x21c)],_0x52fd4d=_0x5d5c51(0x1f5)+_0x597d41+_0x5d5c51(0x1d5)+_0x21b5ff+_0x5d5c51(0x1cf)+(_0x41ba46*0x64)[_0x5d5c51(0x21f)](0x0)+'%)\x20nach\x20\x22'+_0x4478db+_0x5d5c51(0x248)+_0x1ecee0+_0x5d5c51(0x1d7)+_0x3cfce7+_0x5d5c51(0x20e);try{updateApiTimestamp();const _0x700aa3=await _0x352fb9['geminiModel'][_0x5d5c51(0x1f2)](_0x52fd4d),_0x458e2e=_0x700aa3[_0x5d5c51(0x1dc)]['text']()[_0x5d5c51(0x242)](/```json|```/g,'')[_0x5d5c51(0x211)](),_0x5389ae=JSON[_0x5d5c51(0x205)](_0x458e2e);return decisionCache[_0x4478db]={'decision':_0x5389ae,'timestamp':_0x50ef3c},_0x5389ae;}catch(_0x22e08b){return _0x352fb9[_0x5d5c51(0x225)][_0x5d5c51(0x1db)](_0x5d5c51(0x216)+_0x22e08b[_0x5d5c51(0x1e8)]),decisionCache[_0x4478db]={'decision':{'approved':!![],'reason':_0x5d5c51(0x1fa)},'timestamp':_0x50ef3c-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x5d5c51(0x1fa)};}}function a0_0x1cdc(){const _0x386b4f=['./setup','âš ï¸\x20ALARM:\x20','ANALYZE_HEALTH',',\x20Wetter:\x20','.\x20KONTEXT:\x20','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','analysis.isAlert','error','isProVersion','warn','response','toString','186qltUyC','targetValue','Tag','15505AQkDWw','dailyDigests','\x20Ã¼bersprungen\x20(Auto-Approved).','.\x20SYSTEM_MODE:\x20','exports','analysis.activitySummary','.\x20EMERGENCY:\x20','message','analysisHistory','constructor','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','apply','isEmergency','eventHistory','ðŸŒ…\x20Morning\x20Briefing:\x0a','ltmLtbWindowDays','send','generateContent','.Current.IsNight','N/A\x20(Learning)','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','rawEventLog','analysis.automation.targetValue','analysis.alertReason','LTM.rawEventLog','KI-Fehler\x20(Fallback)','\x20->\x20','summary','Started...','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','Traffic-Schutz\x20(Auto-Approved)','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','timestamp','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','1zIDRWH','debug','parse','.\x20EVENTS:\x20','Skipped\x20(No\x20AI\x20or\x20Data)','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','getForeignStateAsync','config','toISOString','getStateAsync','unshift','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','1051530sgZUBR','pop','trim','287504WyTfdW','Nacht','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','LTM.dailyDigests','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','ðŸ“…\x20Daily\x20Digest:\x0a','LTM.processingStatus','Unbekannt\x20(Kein\x20Sensor)','useWeather','.Current.WeatherText','generic','270658BwUZNS','LTM.driftAnalysis.baselineDrift','toFixed','BUTLER\x20Execution\x20Error:\x20','(((.+)+)+)+$','slice','currentSystemMode','lastAlertState','log','analysis.automation.autoApply','stringify','automationProposal','analysis.lastResult','1915506xDQaml',',\x20LichtverhÃ¤ltnisse:\x20','setStateAsync','Keine\x20Details.','length','geminiModel','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','push','KI\x20offline\x20(Fallback)','models/gemini-flash-latest','718360ETJAFh','now','search','.\x20ANWESEND:\x20','text','toLocaleTimeString','Sicherheit\x20geht\x20vor.','Unbekannt','analysis.automation.targetId','driftDetails','\x0aAktivitÃ¤t:\x20','decision','579EPslsZ','aiPersona','replace','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','info','Skipped\x20(Traffic)','description','weatherInstance','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','isAlert','val','analysis.automation.patternDetected','analysis.analysisHistory','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','Â°C,\x20','targetId','alertReason','2448XkkeYB','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','sendNotification','activityLevel'];a0_0x1cdc=function(){return _0x386b4f;};return a0_0x1cdc();}async function runGeminiAnalysis(_0x2d1766,_0x5aa823=''){const _0x5e6354=a0_0x52f1f6;if(!_0x2d1766[_0x5e6354(0x22f)])return;if(!canCallApi()){_0x2d1766[_0x5e6354(0x225)]['debug'](_0x5e6354(0x24d));return;}if(_0x2d1766['eventHistory'][_0x5e6354(0x22e)]===0x0)return;const _0x4b6902=_0x2d1766[_0x5e6354(0x1ee)]['slice'](0x0,0xf),_0x3dd886=_0x2d1766[_0x5e6354(0x223)],_0x462546=PERSONA_MAPPING[_0x2d1766[_0x5e6354(0x20a)][_0x5e6354(0x241)]||_0x5e6354(0x21c)],_0x3eaf0e=_0x2d1766[_0x5e6354(0x20a)]['livingContext']||_0x5e6354(0x22d);let _0x1fe2a0='Unbekannt';try{const _0x4d7305=await _0x2d1766['getStateAsync']('system.presenceWho');if(_0x4d7305&&_0x4d7305[_0x5e6354(0x24a)])_0x1fe2a0=_0x4d7305[_0x5e6354(0x24a)];}catch(_0x5d8f2b){}let _0x10da76=![];try{const _0x4b9635=await _0x2d1766[_0x5e6354(0x20c)](_0x5e6354(0x226));if(_0x4b9635&&_0x4b9635[_0x5e6354(0x24a)])_0x10da76=!![];}catch(_0x42ea0a){}const _0x4cbde1='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x462546+_0x5e6354(0x1d6)+_0x3eaf0e+_0x5e6354(0x1e4)+_0x3dd886+_0x5e6354(0x237)+_0x1fe2a0+_0x5e6354(0x206)+JSON[_0x5e6354(0x227)](_0x4b6902)+_0x5e6354(0x1e7)+_0x5aa823+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x317f94=await _0x2d1766[_0x5e6354(0x22f)][_0x5e6354(0x1f2)](_0x4cbde1),_0x114fd8=JSON['parse'](_0x317f94['response'][_0x5e6354(0x238)]()[_0x5e6354(0x242)](/```json|```/g,'')[_0x5e6354(0x211)]());await _0x2d1766[_0x5e6354(0x22c)](_0x5e6354(0x229),{'val':JSON[_0x5e6354(0x227)](_0x114fd8),'ack':!![]});if(_0x114fd8[_0x5e6354(0x1fc)])await _0x2d1766[_0x5e6354(0x22c)](_0x5e6354(0x1e6),{'val':_0x114fd8[_0x5e6354(0x1fc)],'ack':!![]});const _0x2bdc70={'timestamp':Date[_0x5e6354(0x235)](),'id':Date[_0x5e6354(0x235)]()[_0x5e6354(0x1dd)](),'analysis':{'activity':{'summary':_0x114fd8[_0x5e6354(0x1fc)],'isAlert':_0x114fd8[_0x5e6354(0x249)],'alertReason':_0x114fd8[_0x5e6354(0x250)]},'comfort':{'automationProposal':_0x114fd8[_0x5e6354(0x228)]}}};_0x2d1766['analysisHistory'][_0x5e6354(0x20d)](_0x2bdc70);if(_0x2d1766['analysisHistory'][_0x5e6354(0x22e)]>0x32)_0x2d1766[_0x5e6354(0x1e9)][_0x5e6354(0x210)]();await _0x2d1766['setStateAsync'](_0x5e6354(0x24c),{'val':JSON[_0x5e6354(0x227)](_0x2d1766['analysisHistory']),'ack':!![]});const _0x50b332=_0x114fd8[_0x5e6354(0x249)]||![];_0x50b332!==_0x2d1766[_0x5e6354(0x224)]&&(await _0x2d1766[_0x5e6354(0x22c)](_0x5e6354(0x1d8),{'val':_0x50b332,'ack':!![]}),_0x2d1766[_0x5e6354(0x224)]=_0x50b332,_0x50b332&&(await _0x2d1766[_0x5e6354(0x22c)](_0x5e6354(0x1f8),{'val':_0x114fd8[_0x5e6354(0x250)],'ack':!![]}),setup[_0x5e6354(0x1d0)](_0x2d1766,_0x5e6354(0x1d3)+_0x114fd8[_0x5e6354(0x250)],![],_0x114fd8[_0x5e6354(0x1ed)])));if(_0x114fd8[_0x5e6354(0x228)]&&_0x114fd8[_0x5e6354(0x228)]['detected']){await _0x2d1766[_0x5e6354(0x22c)](_0x5e6354(0x24b),{'val':!![],'ack':!![]}),await _0x2d1766['setStateAsync']('analysis.automation.description',{'val':_0x114fd8[_0x5e6354(0x228)][_0x5e6354(0x246)],'ack':!![]}),await _0x2d1766[_0x5e6354(0x22c)]('analysis.automation.targetId',{'val':_0x114fd8[_0x5e6354(0x228)][_0x5e6354(0x24f)],'ack':!![]}),await _0x2d1766['setStateAsync']('analysis.automation.targetValue',{'val':JSON[_0x5e6354(0x227)](_0x114fd8[_0x5e6354(0x228)][_0x5e6354(0x1df)]),'ack':!![]});if(_0x10da76)executeAutomationAction(_0x2d1766);}}catch(_0x290f5e){_0x2d1766[_0x5e6354(0x225)][_0x5e6354(0x1d9)]('Gemini\x20Error:\x20'+_0x290f5e['message']);}}async function createDailyDigest(_0x1d3131,_0x16ed20){const _0x44a652=a0_0x52f1f6;if(!_0x1d3131[_0x44a652(0x1da)])return;if(!canCallApi()){await _0x1d3131[_0x44a652(0x22c)](LTM_DP_STATUS,{'val':_0x44a652(0x245),'ack':!![]});return;}await _0x1d3131[_0x44a652(0x22c)](LTM_DP_STATUS,{'val':_0x44a652(0x1fd),'ack':!![]});if(!_0x1d3131[_0x44a652(0x22f)]||_0x1d3131[_0x44a652(0x1f6)][_0x44a652(0x22e)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x1d3131[_0x44a652(0x22c)](LTM_DP_STATUS,{'val':_0x44a652(0x207),'ack':!![]});return;}const _0x25f801=JSON[_0x44a652(0x205)](JSON['stringify'](_0x1d3131[_0x44a652(0x1f6)])),_0x361b0e=_0x25f801[_0x44a652(0x22e)],_0x1c2e3b='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x44a652(0x227)](_0x25f801);try{updateApiTimestamp();const _0xcd35=await _0x1d3131[_0x44a652(0x22f)][_0x44a652(0x1f2)](_0x1c2e3b),_0x536514=JSON[_0x44a652(0x205)](_0xcd35[_0x44a652(0x1dc)]['text']()['replace'](/```json|```/g,'')[_0x44a652(0x211)]()),_0x4a9346={'timestamp':new Date()[_0x44a652(0x20b)](),'eventCount':_0x361b0e,'summary':_0x536514['summary']||'Digest','activityLevel':_0x536514[_0x44a652(0x1d1)]||'normal','systemMode':_0x1d3131[_0x44a652(0x223)]};_0x1d3131[_0x44a652(0x1e2)][_0x44a652(0x231)](_0x4a9346);const _0x430738=_0x1d3131[_0x44a652(0x20a)][_0x44a652(0x1f0)]||0x3c;_0x1d3131[_0x44a652(0x1e2)][_0x44a652(0x22e)]>_0x430738&&_0x1d3131['dailyDigests']['splice'](0x0,_0x1d3131[_0x44a652(0x1e2)][_0x44a652(0x22e)]-_0x430738);await _0x1d3131[_0x44a652(0x22c)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x44a652(0x227)](_0x1d3131['dailyDigests']),'ack':!![]}),_0x1d3131['rawEventLog']=[],await _0x1d3131[_0x44a652(0x22c)](LTM_DP_RAW_LOG,{'val':JSON[_0x44a652(0x227)](_0x1d3131[_0x44a652(0x1f6)]),'ack':!![]}),await _0x1d3131[_0x44a652(0x22c)](LTM_DP_STATUS,{'val':'Success','ack':!![]});const _0xc14f1f=_0x44a652(0x217)+_0x536514[_0x44a652(0x1fc)]+_0x44a652(0x23e)+_0x536514[_0x44a652(0x1d1)];setup[_0x44a652(0x1d0)](_0x1d3131,_0xc14f1f,![],![]);if(_0x1d3131[_0x44a652(0x1da)]&&_0x16ed20)_0x16ed20[_0x44a652(0x1f1)](_0x1d3131,_0x44a652(0x1d4),{'digest':_0x4a9346});}catch(_0x5149aa){_0x1d3131['log']['error'](_0x5149aa['message']);}}async function runBaselineDriftAnalysis(_0x54f49c){const _0x5bbde3=a0_0x52f1f6;if(!_0x54f49c[_0x5bbde3(0x1da)]||!_0x54f49c[_0x5bbde3(0x22f)])return;if(!canCallApi())return;const _0x1a5dd7=_0x54f49c[_0x5bbde3(0x20a)]['ltmStbWindowDays']||0xe;if(_0x54f49c[_0x5bbde3(0x1e2)]['length']<_0x1a5dd7+0x7){await _0x54f49c[_0x5bbde3(0x22c)]('LTM.driftAnalysis.baselineDrift',{'val':_0x5bbde3(0x1f4),'ack':!![]});return;}const _0x4dd73b=_0x54f49c[_0x5bbde3(0x1e2)][_0x5bbde3(0x222)](-_0x1a5dd7),_0x40f125=_0x54f49c[_0x5bbde3(0x1e2)][_0x5bbde3(0x222)](0x0,_0x54f49c['dailyDigests'][_0x5bbde3(0x22e)]-_0x1a5dd7),_0x5b2135='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON['stringify'](_0x40f125)+'\x0aSTB:\x20'+JSON[_0x5bbde3(0x227)](_0x4dd73b);try{updateApiTimestamp();const _0x443fe3=await _0x54f49c[_0x5bbde3(0x22f)][_0x5bbde3(0x1f2)](_0x5b2135),_0x3d61c9=JSON[_0x5bbde3(0x205)](_0x443fe3[_0x5bbde3(0x1dc)][_0x5bbde3(0x238)]()[_0x5bbde3(0x242)](/```json|```/g,'')[_0x5bbde3(0x211)]());_0x3d61c9['baselineDrift']&&(await _0x54f49c[_0x5bbde3(0x22c)](_0x5bbde3(0x21e),{'val':_0x3d61c9['baselineDrift'],'ack':!![]}),await _0x54f49c[_0x5bbde3(0x22c)]('LTM.driftAnalysis.driftDetails',{'val':_0x3d61c9[_0x5bbde3(0x23d)],'ack':!![]}),await _0x54f49c[_0x5bbde3(0x22c)]('LTM.driftAnalysis.lastCheck',{'val':Date[_0x5bbde3(0x235)](),'ack':!![]}));}catch(_0x5d6ce4){}}async function executeAutomationAction(_0x5bc18c){const _0x48c692=a0_0x52f1f6;try{const _0x383103=await _0x5bc18c[_0x48c692(0x20c)](_0x48c692(0x23c)),_0x99198b=await _0x5bc18c['getStateAsync'](_0x48c692(0x1f7));if(_0x383103&&_0x383103[_0x48c692(0x24a)]&&_0x99198b){const _0x520170=_0x383103[_0x48c692(0x24a)];let _0x45df59=_0x99198b[_0x48c692(0x24a)];try{_0x45df59=JSON[_0x48c692(0x205)](_0x45df59);}catch(_0x55ad77){}_0x5bc18c['log'][_0x48c692(0x244)](_0x48c692(0x230)+_0x520170+'\x20=\x20'+_0x45df59),await _0x5bc18c['setForeignStateAsync'](_0x520170,_0x45df59);}else _0x5bc18c['log'][_0x48c692(0x1db)](_0x48c692(0x200));}catch(_0x3b85e7){_0x5bc18c[_0x48c692(0x225)][_0x48c692(0x1d9)](_0x48c692(0x220)+_0x3b85e7[_0x48c692(0x1e8)]);}}async function sendMorningBriefing(_0x1ba1df){const _0x3de9a7=a0_0x52f1f6;if(!_0x1ba1df['geminiModel'])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x20e6f8=_0x3de9a7(0x214),_0x1b52a6=await _0x1ba1df['geminiModel'][_0x3de9a7(0x1f2)](_0x20e6f8),_0x3e1233=_0x1b52a6[_0x3de9a7(0x1dc)][_0x3de9a7(0x238)]();setup[_0x3de9a7(0x1d0)](_0x1ba1df,_0x3de9a7(0x1ef)+_0x3e1233);}catch(_0x592717){_0x1ba1df['log'][_0x3de9a7(0x1d9)]('Briefing\x20Error:\x20'+_0x592717[_0x3de9a7(0x1e8)]);}}module[a0_0x52f1f6(0x1e5)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};