const a0_0x2078ec=a0_0x2271;(function(_0x4522c6,_0x3138ef){const _0x51ff8a=a0_0x2271,_0x5b4477=_0x4522c6();while(!![]){try{const _0x30de46=-parseInt(_0x51ff8a(0x16b))/0x1+-parseInt(_0x51ff8a(0x14a))/0x2+-parseInt(_0x51ff8a(0x131))/0x3*(-parseInt(_0x51ff8a(0x119))/0x4)+-parseInt(_0x51ff8a(0x10d))/0x5+parseInt(_0x51ff8a(0x137))/0x6*(parseInt(_0x51ff8a(0x157))/0x7)+parseInt(_0x51ff8a(0x161))/0x8+-parseInt(_0x51ff8a(0x154))/0x9;if(_0x30de46===_0x3138ef)break;else _0x5b4477['push'](_0x5b4477['shift']());}catch(_0x4dee37){_0x5b4477['push'](_0x5b4477['shift']());}}}(a0_0x1048,0x8189b));const a0_0x2b732c=(function(){let _0x4d3700=!![];return function(_0x5155dc,_0x573e5f){const _0x46c033=_0x4d3700?function(){const _0x59f956=a0_0x2271;if(_0x573e5f){const _0x3f1054=_0x573e5f[_0x59f956(0x140)](_0x5155dc,arguments);return _0x573e5f=null,_0x3f1054;}}:function(){};return _0x4d3700=![],_0x46c033;};}()),a0_0x2bcc6e=a0_0x2b732c(this,function(){const _0x583a19=a0_0x2271;return a0_0x2bcc6e[_0x583a19(0x139)]()[_0x583a19(0x105)](_0x583a19(0xfd))[_0x583a19(0x139)]()[_0x583a19(0x11f)](a0_0x2bcc6e)[_0x583a19(0x105)]('(((.+)+)+)+$');});a0_0x2bcc6e();function a0_0x2271(_0xe7ce93,_0x2c6f7d){const _0x45da3e=a0_0x1048();return a0_0x2271=function(_0x2bcc6e,_0x2b732c){_0x2bcc6e=_0x2bcc6e-0xef;let _0x104888=_0x45da3e[_0x2bcc6e];return _0x104888;},a0_0x2271(_0xe7ce93,_0x2c6f7d);}'use strict';const {GoogleGenerativeAI}=require(a0_0x2078ec(0x113)),setup=require(a0_0x2078ec(0x123)),GEMINI_MODEL=a0_0x2078ec(0x115),LTM_DP_DAILY_DIGESTS=a0_0x2078ec(0x103),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':'PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':a0_0x2078ec(0x11e),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':a0_0x2078ec(0x16e),'energy_saver':a0_0x2078ec(0x104)};function canCallApi(){const _0x4617dd=a0_0x2078ec,_0x1a902b=Date[_0x4617dd(0x13e)]();return _0x1a902b-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x197436=a0_0x2078ec;lastGlobalApiCall=Date[_0x197436(0x13e)]();}async function getWeatherContext(_0xe0a080){const _0xe875cd=a0_0x2078ec;if(!_0xe0a080[_0xe875cd(0x136)][_0xe875cd(0x11d)]||!_0xe0a080['config'][_0xe875cd(0x11c)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x13c4fd=_0xe0a080[_0xe875cd(0x136)]['weatherInstance'];let _0x181067=await _0xe0a080[_0xe875cd(0x12e)](_0x13c4fd+_0xe875cd(0xf6));if(!_0x181067)_0x181067=await _0xe0a080['getForeignStateAsync'](_0x13c4fd+_0xe875cd(0x162));let _0x38a341=await _0xe0a080[_0xe875cd(0x12e)](_0x13c4fd+'.Current.WeatherText');if(!_0x38a341)_0x38a341=await _0xe0a080[_0xe875cd(0x12e)](_0x13c4fd+_0xe875cd(0x147));let _0x81dbdc=_0xe875cd(0x122);const _0x438599=await _0xe0a080[_0xe875cd(0x12e)](_0x13c4fd+_0xe875cd(0x10b));if(_0x438599)_0x81dbdc=_0x438599[_0xe875cd(0x130)]?_0xe875cd(0x12c):'Tag';if(_0x181067&&_0x38a341)return _0x181067[_0xe875cd(0x130)]+_0xe875cd(0x173)+_0x38a341[_0xe875cd(0x130)]+_0xe875cd(0x153)+_0x81dbdc;}catch(_0xe88c78){}return _0xe875cd(0x13a);}async function consultButler(_0xb2fa8a,_0x439f23,_0x43d375,_0x521fdb){const _0x547cd0=a0_0x2078ec;if(!_0xb2fa8a['geminiModel'])return{'approved':!![],'reason':_0x547cd0(0x117)};const _0x31efea=Date[_0x547cd0(0x13e)]();if(decisionCache[_0x439f23]&&_0x31efea-decisionCache[_0x439f23][_0x547cd0(0x14e)]<CACHE_TTL_MS){const _0x335cc5=decisionCache[_0x439f23][_0x547cd0(0x164)];return _0xb2fa8a[_0x547cd0(0x13b)]['debug'](_0x547cd0(0xff)+_0x439f23+_0x547cd0(0x13f)+(_0x335cc5[_0x547cd0(0x109)]?'OK':'NO')+'\x20('+_0x335cc5[_0x547cd0(0xf1)]+')'),_0x335cc5;}if(!canCallApi())return _0xb2fa8a[_0x547cd0(0x13b)][_0x547cd0(0x134)](_0x547cd0(0xf0)+_0x439f23+_0x547cd0(0x10a)),{'approved':!![],'reason':_0x547cd0(0x111)};const _0x1d6f81=new Date()[_0x547cd0(0x138)](),_0x178a65=await getWeatherContext(_0xb2fa8a),_0x5dbf85=PERSONA_MAPPING[_0xb2fa8a[_0x547cd0(0x136)]['aiPersona']||_0x547cd0(0x14d)],_0x32a662=_0x547cd0(0xf4)+_0x1d6f81+_0x547cd0(0x10e)+_0x178a65+_0x547cd0(0x145)+(_0x521fdb*0x64)[_0x547cd0(0x142)](0x0)+_0x547cd0(0x101)+_0x439f23+_0x547cd0(0x159)+_0x43d375+_0x547cd0(0x171)+_0x5dbf85+_0x547cd0(0x149);try{updateApiTimestamp();const _0x15320c=await _0xb2fa8a[_0x547cd0(0x128)][_0x547cd0(0x152)](_0x32a662),_0x442d6d=_0x15320c[_0x547cd0(0x125)][_0x547cd0(0x120)]()['replace'](/```json|```/g,'')[_0x547cd0(0x168)](),_0x3475a0=JSON['parse'](_0x442d6d);return decisionCache[_0x439f23]={'decision':_0x3475a0,'timestamp':_0x31efea},_0x3475a0;}catch(_0x3708c8){return _0xb2fa8a['log'][_0x547cd0(0xfb)]('ü§ñ\x20Butler\x20Brain\x20Error:\x20'+_0x3708c8[_0x547cd0(0x165)]),decisionCache[_0x439f23]={'decision':{'approved':!![],'reason':_0x547cd0(0xf7)},'timestamp':_0x31efea-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x547cd0(0xf7)};}}async function runGeminiAnalysis(_0x4af956,_0xf4ae60=''){const _0x1c3cdd=a0_0x2078ec;if(!_0x4af956[_0x1c3cdd(0x128)])return;if(!canCallApi()){_0x4af956[_0x1c3cdd(0x13b)]['debug'](_0x1c3cdd(0x10f));return;}if(_0x4af956[_0x1c3cdd(0xf5)]['length']===0x0)return;const _0x4997dc=_0x4af956[_0x1c3cdd(0xf5)][_0x1c3cdd(0x16d)](0x0,0xf),_0x50a604=_0x4af956[_0x1c3cdd(0xf9)],_0x516f4f=PERSONA_MAPPING[_0x4af956[_0x1c3cdd(0x136)][_0x1c3cdd(0x11a)]||'generic'],_0x46c1eb=_0x4af956[_0x1c3cdd(0x136)][_0x1c3cdd(0x14b)]||_0x1c3cdd(0x15d);let _0x384e29=_0x1c3cdd(0x122);try{const _0x158dc5=await _0x4af956['getStateAsync']('system.presenceWho');if(_0x158dc5&&_0x158dc5[_0x1c3cdd(0x130)])_0x384e29=_0x158dc5[_0x1c3cdd(0x130)];}catch(_0x288266){}let _0x42fe6e=![];try{const _0x16f923=await _0x4af956[_0x1c3cdd(0x13d)](_0x1c3cdd(0x12d));if(_0x16f923&&_0x16f923['val'])_0x42fe6e=!![];}catch(_0x4ac60e){}const _0x41e459=_0x1c3cdd(0x144)+_0x516f4f+'.\x20KONTEXT:\x20'+_0x46c1eb+_0x1c3cdd(0x12a)+_0x50a604+_0x1c3cdd(0x16c)+_0x384e29+_0x1c3cdd(0x163)+JSON[_0x1c3cdd(0xfe)](_0x4997dc)+'.\x20EMERGENCY:\x20'+_0xf4ae60+_0x1c3cdd(0x108);try{updateApiTimestamp();const _0x2da4ea=await _0x4af956[_0x1c3cdd(0x128)][_0x1c3cdd(0x152)](_0x41e459),_0x55e40d=JSON[_0x1c3cdd(0x16a)](_0x2da4ea['response'][_0x1c3cdd(0x120)]()['replace'](/```json|```/g,'')['trim']());await _0x4af956['setStateAsync']('analysis.lastResult',{'val':JSON[_0x1c3cdd(0xfe)](_0x55e40d),'ack':!![]});if(_0x55e40d[_0x1c3cdd(0x141)])await _0x4af956[_0x1c3cdd(0x150)](_0x1c3cdd(0x160),{'val':_0x55e40d[_0x1c3cdd(0x141)],'ack':!![]});const _0xc0ed4f={'timestamp':Date[_0x1c3cdd(0x13e)](),'id':Date[_0x1c3cdd(0x13e)]()['toString'](),'analysis':{'activity':{'summary':_0x55e40d[_0x1c3cdd(0x141)],'isAlert':_0x55e40d['isAlert'],'alertReason':_0x55e40d[_0x1c3cdd(0x13c)]},'comfort':{'automationProposal':_0x55e40d[_0x1c3cdd(0x16f)]}}};_0x4af956[_0x1c3cdd(0x100)]['unshift'](_0xc0ed4f);if(_0x4af956[_0x1c3cdd(0x100)]['length']>0x32)_0x4af956[_0x1c3cdd(0x100)]['pop']();await _0x4af956[_0x1c3cdd(0x150)]('analysis.analysisHistory',{'val':JSON[_0x1c3cdd(0xfe)](_0x4af956[_0x1c3cdd(0x100)]),'ack':!![]});const _0x17a50d=_0x55e40d[_0x1c3cdd(0x112)]||![];_0x17a50d!==_0x4af956[_0x1c3cdd(0x110)]&&(await _0x4af956['setStateAsync'](_0x1c3cdd(0x10c),{'val':_0x17a50d,'ack':!![]}),_0x4af956[_0x1c3cdd(0x110)]=_0x17a50d,_0x17a50d&&(await _0x4af956[_0x1c3cdd(0x150)](_0x1c3cdd(0x151),{'val':_0x55e40d[_0x1c3cdd(0x13c)],'ack':!![]}),setup['sendNotification'](_0x4af956,_0x1c3cdd(0x146)+_0x55e40d[_0x1c3cdd(0x13c)],![],_0x55e40d[_0x1c3cdd(0x116)])));if(_0x55e40d[_0x1c3cdd(0x16f)]&&_0x55e40d[_0x1c3cdd(0x16f)]['detected']){await _0x4af956['setStateAsync'](_0x1c3cdd(0x15a),{'val':!![],'ack':!![]}),await _0x4af956['setStateAsync']('analysis.automation.description',{'val':_0x55e40d[_0x1c3cdd(0x16f)]['description'],'ack':!![]}),await _0x4af956['setStateAsync'](_0x1c3cdd(0xf2),{'val':_0x55e40d[_0x1c3cdd(0x16f)][_0x1c3cdd(0x14c)],'ack':!![]}),await _0x4af956[_0x1c3cdd(0x150)]('analysis.automation.targetValue',{'val':JSON[_0x1c3cdd(0xfe)](_0x55e40d['automationProposal'][_0x1c3cdd(0x114)]),'ack':!![]});if(_0x42fe6e)executeAutomationAction(_0x4af956);}}catch(_0x2b8ff0){_0x4af956[_0x1c3cdd(0x13b)][_0x1c3cdd(0x15e)](_0x1c3cdd(0x15c)+_0x2b8ff0[_0x1c3cdd(0x165)]);}}async function createDailyDigest(_0x4142ee,_0x56a180){const _0x14b2a0=a0_0x2078ec;if(!_0x4142ee[_0x14b2a0(0xef)])return;if(!canCallApi()){await _0x4142ee[_0x14b2a0(0x150)](LTM_DP_STATUS,{'val':_0x14b2a0(0x133),'ack':!![]});return;}await _0x4142ee[_0x14b2a0(0x150)](LTM_DP_STATUS,{'val':_0x14b2a0(0x15b),'ack':!![]});if(!_0x4142ee['geminiModel']||_0x4142ee[_0x14b2a0(0x169)][_0x14b2a0(0x155)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4142ee[_0x14b2a0(0x150)](LTM_DP_STATUS,{'val':_0x14b2a0(0x106),'ack':!![]});return;}const _0x55b090=JSON['parse'](JSON[_0x14b2a0(0xfe)](_0x4142ee[_0x14b2a0(0x169)])),_0xad679c=_0x55b090[_0x14b2a0(0x155)],_0x309135=_0x14b2a0(0x135)+JSON[_0x14b2a0(0xfe)](_0x55b090);try{updateApiTimestamp();const _0xd8f4e3=await _0x4142ee[_0x14b2a0(0x128)][_0x14b2a0(0x152)](_0x309135),_0x30c585=JSON[_0x14b2a0(0x16a)](_0xd8f4e3[_0x14b2a0(0x125)][_0x14b2a0(0x120)]()[_0x14b2a0(0x156)](/```json|```/g,'')['trim']()),_0x30466b={'timestamp':new Date()[_0x14b2a0(0x172)](),'eventCount':_0xad679c,'summary':_0x30c585[_0x14b2a0(0x141)]||_0x14b2a0(0x129),'activityLevel':_0x30c585[_0x14b2a0(0x107)]||_0x14b2a0(0x124),'systemMode':_0x4142ee[_0x14b2a0(0xf9)]};_0x4142ee[_0x14b2a0(0xfc)][_0x14b2a0(0x14f)](_0x30466b);const _0x117da5=_0x4142ee[_0x14b2a0(0x136)]['ltmLtbWindowDays']||0x3c;_0x4142ee[_0x14b2a0(0xfc)][_0x14b2a0(0x155)]>_0x117da5&&_0x4142ee[_0x14b2a0(0xfc)][_0x14b2a0(0x11b)](0x0,_0x4142ee['dailyDigests']['length']-_0x117da5);await _0x4142ee[_0x14b2a0(0x150)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x14b2a0(0xfe)](_0x4142ee[_0x14b2a0(0xfc)]),'ack':!![]}),_0x4142ee[_0x14b2a0(0x169)]=[],await _0x4142ee[_0x14b2a0(0x150)](LTM_DP_RAW_LOG,{'val':JSON[_0x14b2a0(0xfe)](_0x4142ee[_0x14b2a0(0x169)]),'ack':!![]}),await _0x4142ee[_0x14b2a0(0x150)](LTM_DP_STATUS,{'val':_0x14b2a0(0x15f),'ack':!![]});if(_0x4142ee[_0x14b2a0(0xef)]&&_0x56a180)_0x56a180['send'](_0x4142ee,'ANALYZE_HEALTH',{'digest':_0x30466b});}catch(_0x1274c2){_0x4142ee[_0x14b2a0(0x13b)]['error'](_0x1274c2[_0x14b2a0(0x165)]);}}async function runBaselineDriftAnalysis(_0x5b65ec){const _0x558198=a0_0x2078ec;if(!_0x5b65ec[_0x558198(0xef)]||!_0x5b65ec[_0x558198(0x128)])return;if(!canCallApi())return;const _0x34ba7c=_0x5b65ec[_0x558198(0x136)]['ltmStbWindowDays']||0xe;if(_0x5b65ec[_0x558198(0xfc)][_0x558198(0x155)]<_0x34ba7c+0x7){await _0x5b65ec[_0x558198(0x150)](_0x558198(0x121),{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x3d94ea=_0x5b65ec[_0x558198(0xfc)][_0x558198(0x16d)](-_0x34ba7c),_0x52d1ed=_0x5b65ec[_0x558198(0xfc)][_0x558198(0x16d)](0x0,_0x5b65ec['dailyDigests'][_0x558198(0x155)]-_0x34ba7c),_0x5f7c2c=_0x558198(0xf8)+JSON[_0x558198(0xfe)](_0x52d1ed)+_0x558198(0x167)+JSON[_0x558198(0xfe)](_0x3d94ea);try{updateApiTimestamp();const _0x2b57c0=await _0x5b65ec[_0x558198(0x128)]['generateContent'](_0x5f7c2c),_0x3191e4=JSON[_0x558198(0x16a)](_0x2b57c0['response']['text']()[_0x558198(0x156)](/```json|```/g,'')[_0x558198(0x168)]());_0x3191e4[_0x558198(0x102)]&&(await _0x5b65ec[_0x558198(0x150)](_0x558198(0x121),{'val':_0x3191e4[_0x558198(0x102)],'ack':!![]}),await _0x5b65ec[_0x558198(0x150)](_0x558198(0x148),{'val':_0x3191e4[_0x558198(0x127)],'ack':!![]}),await _0x5b65ec[_0x558198(0x150)](_0x558198(0x143),{'val':Date['now'](),'ack':!![]}));}catch(_0x2840c8){}}async function executeAutomationAction(_0x535581){const _0x1ea075=a0_0x2078ec;try{const _0x244874=await _0x535581['getStateAsync'](_0x1ea075(0xf2)),_0x352e84=await _0x535581[_0x1ea075(0x13d)](_0x1ea075(0x158));if(_0x244874&&_0x244874['val']&&_0x352e84){const _0x2c5b79=_0x244874[_0x1ea075(0x130)];let _0x4b8712=_0x352e84['val'];try{_0x4b8712=JSON[_0x1ea075(0x16a)](_0x4b8712);}catch(_0x643ff0){}_0x535581['log']['info'](_0x1ea075(0x132)+_0x2c5b79+'\x20=\x20'+_0x4b8712),await _0x535581[_0x1ea075(0x170)](_0x2c5b79,_0x4b8712);}else _0x535581[_0x1ea075(0x13b)]['warn'](_0x1ea075(0xfa));}catch(_0x4de0c0){_0x535581[_0x1ea075(0x13b)][_0x1ea075(0x15e)](_0x1ea075(0x12f)+_0x4de0c0[_0x1ea075(0x165)]);}}function a0_0x1048(){const _0x556c00=['üåÖ\x20Morning\x20Briefing:\x0a','188bzXDPt','aiPersona','splice','weatherInstance','useWeather','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','constructor','text','LTM.driftAnalysis.baselineDrift','Unbekannt','./setup','normal','response','Briefing\x20Error:\x20','driftDetails','geminiModel','Digest','.\x20SYSTEM_MODE:\x20','exports','Nacht','analysis.automation.autoApply','getForeignStateAsync','BUTLER\x20Execution\x20Error:\x20','val','46149NosOkA','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','Skipped\x20(Traffic)','debug','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','config','105162EbEArX','toLocaleTimeString','toString','Wetterdaten\x20nicht\x20abrufbar','log','alertReason','getStateAsync','now','\x20->\x20','apply','summary','toFixed','LTM.driftAnalysis.lastCheck','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','‚ö†Ô∏è\x20ALARM:\x20','.forecast.current.state','LTM.driftAnalysis.driftDetails','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','36922GLyZTc','livingContext','targetId','generic','timestamp','push','setStateAsync','analysis.alertReason','generateContent',',\x20Lichtverh√§ltnisse:\x20','5990103suSDFE','length','replace','301wtrssm','analysis.automation.targetValue','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','analysis.automation.patternDetected','Started...','Gemini\x20Error:\x20','Keine\x20Details.','error','Success','analysis.activitySummary','7917120fCaTum','.forecast.current.temperature','.\x20EVENTS:\x20','decision','message','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','\x0aSTB:\x20','trim','rawEventLog','parse','479411VFuKbj','.\x20ANWESEND:\x20','slice','Sicherheit\x20geht\x20vor.','automationProposal','setForeignStateAsync','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','toISOString','¬∞C,\x20','isProVersion','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','reason','analysis.automation.targetId','sendNotification','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','eventHistory','.Current.Temperature','KI-Fehler\x20(Fallback)','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','currentSystemMode','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','warn','dailyDigests','(((.+)+)+)+$','stringify','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','analysisHistory','%)\x20nach\x20\x22','baselineDrift','LTM.dailyDigests','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','search','Skipped\x20(No\x20AI\x20or\x20Data)','activityLevel','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','approved','\x20√ºbersprungen\x20(Auto-Approved).','.Current.IsNight','analysis.isAlert','3861380ZwQebG',',\x20Wetter:\x20','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','lastAlertState','Traffic-Schutz\x20(Auto-Approved)','isAlert','@google/generative-ai','targetValue','models/gemini-flash-latest','isEmergency','KI\x20offline\x20(Fallback)'];a0_0x1048=function(){return _0x556c00;};return a0_0x1048();}async function sendMorningBriefing(_0x15f2b5){const _0xa9d0b0=a0_0x2078ec;if(!_0x15f2b5['geminiModel'])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x584b05=_0xa9d0b0(0x166),_0x481c66=await _0x15f2b5[_0xa9d0b0(0x128)][_0xa9d0b0(0x152)](_0x584b05),_0x41c6ae=_0x481c66[_0xa9d0b0(0x125)][_0xa9d0b0(0x120)]();setup[_0xa9d0b0(0xf3)](_0x15f2b5,_0xa9d0b0(0x118)+_0x41c6ae);}catch(_0x18630e){_0x15f2b5[_0xa9d0b0(0x13b)][_0xa9d0b0(0x15e)](_0xa9d0b0(0x126)+_0x18630e[_0xa9d0b0(0x165)]);}}module[a0_0x2078ec(0x12b)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};