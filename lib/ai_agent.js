const a0_0x734559=a0_0x5c4c;(function(_0x45e06b,_0x3f1088){const _0x231ccf=a0_0x5c4c,_0x2fbc51=_0x45e06b();while(!![]){try{const _0x57799a=-parseInt(_0x231ccf(0x77))/0x1+-parseInt(_0x231ccf(0xaa))/0x2*(-parseInt(_0x231ccf(0xa4))/0x3)+parseInt(_0x231ccf(0xaf))/0x4*(-parseInt(_0x231ccf(0xdd))/0x5)+parseInt(_0x231ccf(0x95))/0x6+-parseInt(_0x231ccf(0xae))/0x7*(-parseInt(_0x231ccf(0xee))/0x8)+-parseInt(_0x231ccf(0x98))/0x9*(parseInt(_0x231ccf(0xc0))/0xa)+-parseInt(_0x231ccf(0xa7))/0xb*(-parseInt(_0x231ccf(0xb7))/0xc);if(_0x57799a===_0x3f1088)break;else _0x2fbc51['push'](_0x2fbc51['shift']());}catch(_0x304670){_0x2fbc51['push'](_0x2fbc51['shift']());}}}(a0_0x1549,0x1db47));const a0_0x38916d=(function(){let _0x2c997c=!![];return function(_0x48ec2c,_0x3fe165){const _0x650404=_0x2c997c?function(){const _0x2d93ce=a0_0x5c4c;if(_0x3fe165){const _0x55ee36=_0x3fe165[_0x2d93ce(0xd6)](_0x48ec2c,arguments);return _0x3fe165=null,_0x55ee36;}}:function(){};return _0x2c997c=![],_0x650404;};}()),a0_0x37908c=a0_0x38916d(this,function(){const _0x59227b=a0_0x5c4c;return a0_0x37908c[_0x59227b(0xa0)]()['search'](_0x59227b(0x90))[_0x59227b(0xa0)]()[_0x59227b(0xd7)](a0_0x37908c)[_0x59227b(0x8d)]('(((.+)+)+)+$');});a0_0x37908c();function a0_0x5c4c(_0x3e6d36,_0x276d9f){const _0x402a3e=a0_0x1549();return a0_0x5c4c=function(_0x37908c,_0x38916d){_0x37908c=_0x37908c-0x6d;let _0x1549f2=_0x402a3e[_0x37908c];return _0x1549f2;},a0_0x5c4c(_0x3e6d36,_0x276d9f);}'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require(a0_0x734559(0xa2)),GEMINI_MODEL=a0_0x734559(0x9a),LTM_DP_DAILY_DIGESTS=a0_0x734559(0x82),LTM_DP_STATUS=a0_0x734559(0xc5),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':a0_0x734559(0xf0),'family':a0_0x734559(0x7f),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':a0_0x734559(0xea),'energy_saver':a0_0x734559(0xd3)};function canCallApi(){const _0x2232f0=a0_0x734559,_0x5a0ee1=Date[_0x2232f0(0xb6)]();return _0x5a0ee1-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x328a4b=a0_0x734559;lastGlobalApiCall=Date[_0x328a4b(0xb6)]();}async function getWeatherContext(_0x563ef4){const _0x336a01=a0_0x734559;if(!_0x563ef4[_0x336a01(0xc4)][_0x336a01(0x9d)]||!_0x563ef4[_0x336a01(0xc4)][_0x336a01(0xc2)])return _0x336a01(0x79);try{const _0x249202=_0x563ef4[_0x336a01(0xc4)]['weatherInstance'];let _0x215d6c=await _0x563ef4['getForeignStateAsync'](_0x249202+_0x336a01(0x91));if(!_0x215d6c)_0x215d6c=await _0x563ef4[_0x336a01(0x80)](_0x249202+_0x336a01(0xdb));let _0x2ee58e=await _0x563ef4[_0x336a01(0x80)](_0x249202+_0x336a01(0x81));if(!_0x2ee58e)_0x2ee58e=await _0x563ef4[_0x336a01(0x80)](_0x249202+'.forecast.current.state');let _0x80626c=_0x336a01(0x71);const _0x2043f0=await _0x563ef4[_0x336a01(0x80)](_0x249202+_0x336a01(0xdc));if(_0x2043f0)_0x80626c=_0x2043f0[_0x336a01(0xe8)]?'Nacht':_0x336a01(0xcc);if(_0x215d6c&&_0x2ee58e)return _0x215d6c['val']+_0x336a01(0xa1)+_0x2ee58e[_0x336a01(0xe8)]+_0x336a01(0xb5)+_0x80626c;}catch(_0x34fb13){}return _0x336a01(0xba);}async function consultButler(_0x5e90a0,_0x54c8ad,_0xb7a2e8,_0x320176){const _0x3c8fd4=a0_0x734559;if(!_0x5e90a0[_0x3c8fd4(0xec)])return{'approved':!![],'reason':_0x3c8fd4(0xcb)};const _0x48995f=Date[_0x3c8fd4(0xb6)]();if(decisionCache[_0x54c8ad]&&_0x48995f-decisionCache[_0x54c8ad][_0x3c8fd4(0xe3)]<CACHE_TTL_MS){const _0x2d8fb8=decisionCache[_0x54c8ad]['decision'];return _0x5e90a0[_0x3c8fd4(0xab)][_0x3c8fd4(0xc9)](_0x3c8fd4(0x8e)+_0x54c8ad+_0x3c8fd4(0x9b)+(_0x2d8fb8['approved']?'OK':'NO')+'\x20('+_0x2d8fb8[_0x3c8fd4(0x74)]+')'),_0x2d8fb8;}if(!canCallApi())return _0x5e90a0[_0x3c8fd4(0xab)][_0x3c8fd4(0xc9)](_0x3c8fd4(0x70)+_0x54c8ad+_0x3c8fd4(0x76)),{'approved':!![],'reason':_0x3c8fd4(0xeb)};const _0xe5e9d8=new Date()[_0x3c8fd4(0xb8)](),_0x27b9cb=await getWeatherContext(_0x5e90a0),_0x3fca53=PERSONA_MAPPING[_0x5e90a0[_0x3c8fd4(0xc4)][_0x3c8fd4(0xe5)]||_0x3c8fd4(0x97)],_0x539197=_0x3c8fd4(0x93)+_0xe5e9d8+_0x3c8fd4(0xb4)+_0x27b9cb+_0x3c8fd4(0xb9)+(_0x320176*0x64)['toFixed'](0x0)+_0x3c8fd4(0xcd)+_0x54c8ad+'\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22'+_0xb7a2e8+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x3fca53+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x6ec060=await _0x5e90a0[_0x3c8fd4(0xec)]['generateContent'](_0x539197),_0x25da98=_0x6ec060[_0x3c8fd4(0x86)]['text']()[_0x3c8fd4(0x7d)](/```json|```/g,'')[_0x3c8fd4(0xac)](),_0x3c9ed0=JSON['parse'](_0x25da98);return decisionCache[_0x54c8ad]={'decision':_0x3c9ed0,'timestamp':_0x48995f},_0x3c9ed0;}catch(_0x174f44){return _0x5e90a0[_0x3c8fd4(0xab)][_0x3c8fd4(0x75)](_0x3c8fd4(0x73)+_0x174f44[_0x3c8fd4(0xd8)]),decisionCache[_0x54c8ad]={'decision':{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'},'timestamp':_0x48995f-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x3c8fd4(0x9e)};}}function a0_0x1549(){const _0x4f49b4=['parse','isAlert','apply','constructor','message','summary','automationProposal','.forecast.current.temperature','.Current.IsNight','25CwTveq','.\x20EMERGENCY:\x20','generateContent','analysis.analysisHistory','sendNotification','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','timestamp','LTM.driftAnalysis.baselineDrift','aiPersona','push','stringify','val','analysis.alertReason','Sicherheit\x20geht\x20vor.','Traffic-Schutz\x20(Auto-Approved)','geminiModel','ltmStbWindowDays','40OGPwBh','LTM.driftAnalysis.lastCheck','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','error','analysis.lastResult','Gemini\x20Error:\x20','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','Unbekannt','\x0aAktivitÃ¤t:\x20','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','reason','warn','\x20Ã¼bersprungen\x20(Auto-Approved).','53553NNRDeE','targetId','Unbekannt\x20(Kein\x20Sensor)','analysis.automation.targetValue','eventHistory','getStateAsync','replace','livingContext','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','getForeignStateAsync','.Current.WeatherText','LTM.dailyDigests','driftDetails','âš ï¸\x20ALARM:\x20','system.presenceWho','response','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','isEmergency','analysis.isAlert','activityLevel','analysis.activitySummary','ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','search','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','(((.+)+)+)+$','.Current.Temperature','.\x20SYSTEM_MODE:\x20','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','unshift','1174080rfSIme','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','generic','18KoNCCi','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','models/gemini-flash-latest','\x20->\x20','alertReason','useWeather','KI-Fehler\x20(Fallback)','slice','toString','Â°C,\x20','./setup','Briefing\x20Error:\x20','174VIteCO','description','toISOString','11EnytYr','splice','rawEventLog','2350nQGEfH','log','trim','length','63952syGmzk','104732RGoCiW','baselineDrift','analysisHistory','ðŸŒ…\x20Morning\x20Briefing:\x0a','isProVersion',',\x20Wetter:\x20',',\x20LichtverhÃ¤ltnisse:\x20','now','220164cNPZZS','toLocaleTimeString','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','Wetterdaten\x20nicht\x20abrufbar','info','Keine\x20Details.','ltmLtbWindowDays','ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','text','108590PaGYvM','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','weatherInstance','pop','config','LTM.processingStatus','ANALYZE_HEALTH','normal','setStateAsync','debug','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','KI\x20offline\x20(Fallback)','Tag','%)\x20nach\x20\x22','analysis.automation.targetId','Digest','lastAlertState','currentSystemMode','dailyDigests','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'];a0_0x1549=function(){return _0x4f49b4;};return a0_0x1549();}async function runGeminiAnalysis(_0x1a5d4c,_0x2d1174=''){const _0x51a463=a0_0x734559;if(!_0x1a5d4c[_0x51a463(0xec)])return;if(!canCallApi()){_0x1a5d4c['log']['debug'](_0x51a463(0x8f));return;}if(_0x1a5d4c[_0x51a463(0x7b)][_0x51a463(0xad)]===0x0)return;const _0x1aa207=_0x1a5d4c[_0x51a463(0x7b)][_0x51a463(0x9f)](0x0,0xf),_0x397c3f=_0x1a5d4c[_0x51a463(0xd1)],_0xfb2ccb=PERSONA_MAPPING[_0x1a5d4c[_0x51a463(0xc4)]['aiPersona']||'generic'],_0x22dc36=_0x1a5d4c[_0x51a463(0xc4)][_0x51a463(0x7e)]||_0x51a463(0xbc);let _0x327204='Unbekannt';try{const _0x4184e8=await _0x1a5d4c[_0x51a463(0x7c)](_0x51a463(0x85));if(_0x4184e8&&_0x4184e8[_0x51a463(0xe8)])_0x327204=_0x4184e8['val'];}catch(_0x3d6d36){}let _0x4421bc=![];try{const _0x4bf81a=await _0x1a5d4c[_0x51a463(0x7c)]('analysis.automation.autoApply');if(_0x4bf81a&&_0x4bf81a[_0x51a463(0xe8)])_0x4421bc=!![];}catch(_0x45cba4){}const _0x122dbc='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0xfb2ccb+'.\x20KONTEXT:\x20'+_0x22dc36+_0x51a463(0x92)+_0x397c3f+'.\x20ANWESEND:\x20'+_0x327204+'.\x20EVENTS:\x20'+JSON['stringify'](_0x1aa207)+_0x51a463(0xde)+_0x2d1174+_0x51a463(0x96);try{updateApiTimestamp();const _0x5d1dbc=await _0x1a5d4c[_0x51a463(0xec)][_0x51a463(0xdf)](_0x122dbc),_0x127ee7=JSON[_0x51a463(0xd4)](_0x5d1dbc[_0x51a463(0x86)][_0x51a463(0xbf)]()[_0x51a463(0x7d)](/```json|```/g,'')[_0x51a463(0xac)]());await _0x1a5d4c['setStateAsync'](_0x51a463(0x6e),{'val':JSON['stringify'](_0x127ee7),'ack':!![]});if(_0x127ee7[_0x51a463(0xd9)])await _0x1a5d4c[_0x51a463(0xc8)](_0x51a463(0x8b),{'val':_0x127ee7[_0x51a463(0xd9)],'ack':!![]});const _0x51f875={'timestamp':Date[_0x51a463(0xb6)](),'id':Date[_0x51a463(0xb6)]()[_0x51a463(0xa0)](),'analysis':{'activity':{'summary':_0x127ee7[_0x51a463(0xd9)],'isAlert':_0x127ee7[_0x51a463(0xd5)],'alertReason':_0x127ee7[_0x51a463(0x9c)]},'comfort':{'automationProposal':_0x127ee7[_0x51a463(0xda)]}}};_0x1a5d4c['analysisHistory'][_0x51a463(0x94)](_0x51f875);if(_0x1a5d4c[_0x51a463(0xb1)][_0x51a463(0xad)]>0x32)_0x1a5d4c['analysisHistory'][_0x51a463(0xc3)]();await _0x1a5d4c[_0x51a463(0xc8)](_0x51a463(0xe0),{'val':JSON[_0x51a463(0xe7)](_0x1a5d4c[_0x51a463(0xb1)]),'ack':!![]});const _0x1883f8=_0x127ee7[_0x51a463(0xd5)]||![];_0x1883f8!==_0x1a5d4c['lastAlertState']&&(await _0x1a5d4c[_0x51a463(0xc8)](_0x51a463(0x89),{'val':_0x1883f8,'ack':!![]}),_0x1a5d4c[_0x51a463(0xd0)]=_0x1883f8,_0x1883f8&&(await _0x1a5d4c[_0x51a463(0xc8)](_0x51a463(0xe9),{'val':_0x127ee7[_0x51a463(0x9c)],'ack':!![]}),setup[_0x51a463(0xe1)](_0x1a5d4c,_0x51a463(0x84)+_0x127ee7[_0x51a463(0x9c)],![],_0x127ee7[_0x51a463(0x88)])));if(_0x127ee7[_0x51a463(0xda)]&&_0x127ee7[_0x51a463(0xda)]['detected']){await _0x1a5d4c['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x1a5d4c[_0x51a463(0xc8)]('analysis.automation.description',{'val':_0x127ee7[_0x51a463(0xda)][_0x51a463(0xa5)],'ack':!![]}),await _0x1a5d4c[_0x51a463(0xc8)](_0x51a463(0xce),{'val':_0x127ee7[_0x51a463(0xda)][_0x51a463(0x78)],'ack':!![]}),await _0x1a5d4c[_0x51a463(0xc8)](_0x51a463(0x7a),{'val':JSON['stringify'](_0x127ee7[_0x51a463(0xda)]['targetValue']),'ack':!![]});if(_0x4421bc)executeAutomationAction(_0x1a5d4c);}}catch(_0x1a68ff){_0x1a5d4c['log']['error'](_0x51a463(0x6f)+_0x1a68ff[_0x51a463(0xd8)]);}}async function createDailyDigest(_0x5e0d74,_0x315118){const _0x62a11d=a0_0x734559;if(!_0x5e0d74['isProVersion'])return;if(!canCallApi()){await _0x5e0d74[_0x62a11d(0xc8)](LTM_DP_STATUS,{'val':'Skipped\x20(Traffic)','ack':!![]});return;}await _0x5e0d74[_0x62a11d(0xc8)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x5e0d74['geminiModel']||_0x5e0d74['rawEventLog']['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x5e0d74[_0x62a11d(0xc8)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x4d74b1=JSON[_0x62a11d(0xd4)](JSON[_0x62a11d(0xe7)](_0x5e0d74['rawEventLog'])),_0x4058cd=_0x4d74b1['length'],_0x85a5c3=_0x62a11d(0xc1)+JSON[_0x62a11d(0xe7)](_0x4d74b1);try{updateApiTimestamp();const _0xbf4f9b=await _0x5e0d74[_0x62a11d(0xec)]['generateContent'](_0x85a5c3),_0x1da8cc=JSON[_0x62a11d(0xd4)](_0xbf4f9b['response'][_0x62a11d(0xbf)]()[_0x62a11d(0x7d)](/```json|```/g,'')[_0x62a11d(0xac)]()),_0x20544e={'timestamp':new Date()[_0x62a11d(0xa6)](),'eventCount':_0x4058cd,'summary':_0x1da8cc[_0x62a11d(0xd9)]||_0x62a11d(0xcf),'activityLevel':_0x1da8cc[_0x62a11d(0x8a)]||_0x62a11d(0xc7),'systemMode':_0x5e0d74[_0x62a11d(0xd1)]};_0x5e0d74[_0x62a11d(0xd2)][_0x62a11d(0xe6)](_0x20544e);const _0x465a88=_0x5e0d74[_0x62a11d(0xc4)][_0x62a11d(0xbd)]||0x3c;_0x5e0d74['dailyDigests'][_0x62a11d(0xad)]>_0x465a88&&_0x5e0d74[_0x62a11d(0xd2)][_0x62a11d(0xa8)](0x0,_0x5e0d74[_0x62a11d(0xd2)][_0x62a11d(0xad)]-_0x465a88);await _0x5e0d74[_0x62a11d(0xc8)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x5e0d74[_0x62a11d(0xd2)]),'ack':!![]}),_0x5e0d74[_0x62a11d(0xa9)]=[],await _0x5e0d74['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x62a11d(0xe7)](_0x5e0d74['rawEventLog']),'ack':!![]}),await _0x5e0d74[_0x62a11d(0xc8)](LTM_DP_STATUS,{'val':'Success','ack':!![]});const _0xc7c7f0='ðŸ“…\x20Daily\x20Digest:\x0a'+_0x1da8cc[_0x62a11d(0xd9)]+_0x62a11d(0x72)+_0x1da8cc[_0x62a11d(0x8a)];setup[_0x62a11d(0xe1)](_0x5e0d74,_0xc7c7f0,![],![]);if(_0x5e0d74[_0x62a11d(0xb3)]&&_0x315118)_0x315118['send'](_0x5e0d74,_0x62a11d(0xc6),{'digest':_0x20544e});}catch(_0x172cc2){_0x5e0d74[_0x62a11d(0xab)][_0x62a11d(0x6d)](_0x172cc2[_0x62a11d(0xd8)]);}}async function runBaselineDriftAnalysis(_0x4185da){const _0x566367=a0_0x734559;if(!_0x4185da[_0x566367(0xb3)]||!_0x4185da[_0x566367(0xec)])return;if(!canCallApi())return;const _0x377764=_0x4185da['config'][_0x566367(0xed)]||0xe;if(_0x4185da['dailyDigests'][_0x566367(0xad)]<_0x377764+0x7){await _0x4185da[_0x566367(0xc8)](_0x566367(0xe4),{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x9f8436=_0x4185da['dailyDigests'][_0x566367(0x9f)](-_0x377764),_0x5f5557=_0x4185da[_0x566367(0xd2)][_0x566367(0x9f)](0x0,_0x4185da[_0x566367(0xd2)][_0x566367(0xad)]-_0x377764),_0x5b3548=_0x566367(0xca)+JSON[_0x566367(0xe7)](_0x5f5557)+'\x0aSTB:\x20'+JSON[_0x566367(0xe7)](_0x9f8436);try{updateApiTimestamp();const _0x195fa3=await _0x4185da[_0x566367(0xec)][_0x566367(0xdf)](_0x5b3548),_0x1444b8=JSON[_0x566367(0xd4)](_0x195fa3[_0x566367(0x86)][_0x566367(0xbf)]()[_0x566367(0x7d)](/```json|```/g,'')[_0x566367(0xac)]());_0x1444b8[_0x566367(0xb0)]&&(await _0x4185da[_0x566367(0xc8)](_0x566367(0xe4),{'val':_0x1444b8[_0x566367(0xb0)],'ack':!![]}),await _0x4185da[_0x566367(0xc8)]('LTM.driftAnalysis.driftDetails',{'val':_0x1444b8[_0x566367(0x83)],'ack':!![]}),await _0x4185da[_0x566367(0xc8)](_0x566367(0xef),{'val':Date[_0x566367(0xb6)](),'ack':!![]}));}catch(_0xb3478){}}async function executeAutomationAction(_0x2b5e40){const _0x4308ae=a0_0x734559;try{const _0x827fef=await _0x2b5e40[_0x4308ae(0x7c)](_0x4308ae(0xce)),_0x5cea92=await _0x2b5e40['getStateAsync'](_0x4308ae(0x7a));if(_0x827fef&&_0x827fef[_0x4308ae(0xe8)]&&_0x5cea92){const _0x489919=_0x827fef[_0x4308ae(0xe8)];let _0xc4c429=_0x5cea92['val'];try{_0xc4c429=JSON[_0x4308ae(0xd4)](_0xc4c429);}catch(_0x4e5848){}_0x2b5e40[_0x4308ae(0xab)]['info'](_0x4308ae(0xe2)+_0x489919+'\x20=\x20'+_0xc4c429),await _0x2b5e40['setForeignStateAsync'](_0x489919,_0xc4c429);}else _0x2b5e40[_0x4308ae(0xab)][_0x4308ae(0x75)](_0x4308ae(0x87));}catch(_0x468080){_0x2b5e40[_0x4308ae(0xab)][_0x4308ae(0x6d)]('BUTLER\x20Execution\x20Error:\x20'+_0x468080[_0x4308ae(0xd8)]);}}async function sendMorningBriefing(_0x5d15d9){const _0x2492df=a0_0x734559;if(!_0x5d15d9['geminiModel']){_0x5d15d9['log'][_0x2492df(0x75)](_0x2492df(0x8c));return;}_0x5d15d9[_0x2492df(0xab)][_0x2492df(0xbb)](_0x2492df(0xbe));try{updateApiTimestamp();const _0x54b2b9=_0x2492df(0x99),_0xecf938=await _0x5d15d9['geminiModel'][_0x2492df(0xdf)](_0x54b2b9),_0x5007c1=_0xecf938[_0x2492df(0x86)]['text']();_0x5d15d9[_0x2492df(0xab)][_0x2492df(0xbb)]('ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20'+_0x5007c1[_0x2492df(0xad)]+').\x20Sending\x20notification...'),setup[_0x2492df(0xe1)](_0x5d15d9,_0x2492df(0xb2)+_0x5007c1);}catch(_0x196c2c){_0x5d15d9['log'][_0x2492df(0x6d)](_0x2492df(0xa3)+_0x196c2c[_0x2492df(0xd8)]);}}module['exports']={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};