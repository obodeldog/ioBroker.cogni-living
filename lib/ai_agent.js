const a0_0x171749=a0_0x569a;(function(_0x3c2f00,_0x168eee){const _0x1832a4=a0_0x569a,_0x42cae6=_0x3c2f00();while(!![]){try{const _0x147eda=parseInt(_0x1832a4(0x1af))/0x1*(parseInt(_0x1832a4(0x1df))/0x2)+parseInt(_0x1832a4(0x1e3))/0x3*(parseInt(_0x1832a4(0x1bf))/0x4)+parseInt(_0x1832a4(0x1c4))/0x5*(parseInt(_0x1832a4(0x1fd))/0x6)+parseInt(_0x1832a4(0x1d2))/0x7*(parseInt(_0x1832a4(0x1ca))/0x8)+-parseInt(_0x1832a4(0x1e0))/0x9*(-parseInt(_0x1832a4(0x1e2))/0xa)+-parseInt(_0x1832a4(0x1fa))/0xb+-parseInt(_0x1832a4(0x1dc))/0xc;if(_0x147eda===_0x168eee)break;else _0x42cae6['push'](_0x42cae6['shift']());}catch(_0x47a1b0){_0x42cae6['push'](_0x42cae6['shift']());}}}(a0_0x340a,0xcd8da));const a0_0x1865d1=(function(){let _0x49d61e=!![];return function(_0xea0723,_0xcb055f){const _0x44493a=_0x49d61e?function(){const _0x1b1035=a0_0x569a;if(_0xcb055f){const _0x9b8a27=_0xcb055f[_0x1b1035(0x1ae)](_0xea0723,arguments);return _0xcb055f=null,_0x9b8a27;}}:function(){};return _0x49d61e=![],_0x44493a;};}()),a0_0x40bf27=a0_0x1865d1(this,function(){const _0x49ac9c=a0_0x569a;return a0_0x40bf27[_0x49ac9c(0x1ea)]()[_0x49ac9c(0x1b1)](_0x49ac9c(0x1ba))[_0x49ac9c(0x1ea)]()[_0x49ac9c(0x204)](a0_0x40bf27)[_0x49ac9c(0x1b1)](_0x49ac9c(0x1ba));});a0_0x40bf27();'use strict';const {GoogleGenerativeAI}=require(a0_0x171749(0x1fc)),setup=require(a0_0x171749(0x19b)),GEMINI_MODEL=a0_0x171749(0x1be),LTM_DP_DAILY_DIGESTS=a0_0x171749(0x1c0),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x171749(0x1d3),'senior_aal':a0_0x171749(0x1db),'family':a0_0x171749(0x190),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':a0_0x171749(0x20a),'energy_saver':a0_0x171749(0x200)};function canCallApi(){const _0x31d686=Date['now']();return _0x31d686-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x94e8d1=a0_0x171749;lastGlobalApiCall=Date[_0x94e8d1(0x19e)]();}async function getWeatherContext(_0xd155e8){const _0x42c933=a0_0x171749;if(!_0xd155e8[_0x42c933(0x196)]['useWeather']||!_0xd155e8[_0x42c933(0x196)]['weatherInstance'])return _0x42c933(0x1c5);try{const _0x2c3ba3=_0xd155e8[_0x42c933(0x196)]['weatherInstance'];let _0xf3665d=await _0xd155e8[_0x42c933(0x1da)](_0x2c3ba3+_0x42c933(0x20e));if(!_0xf3665d)_0xf3665d=await _0xd155e8[_0x42c933(0x1da)](_0x2c3ba3+'.forecast.current.temperature');let _0x4844ab=await _0xd155e8[_0x42c933(0x1da)](_0x2c3ba3+_0x42c933(0x1de));if(!_0x4844ab)_0x4844ab=await _0xd155e8[_0x42c933(0x1da)](_0x2c3ba3+'.forecast.current.state');let _0xec832c=_0x42c933(0x20b);const _0x2808a7=await _0xd155e8[_0x42c933(0x1da)](_0x2c3ba3+_0x42c933(0x1e8));if(_0x2808a7)_0xec832c=_0x2808a7['val']?_0x42c933(0x198):'Tag';if(_0xf3665d&&_0x4844ab)return _0xf3665d['val']+_0x42c933(0x1d0)+_0x4844ab[_0x42c933(0x1b3)]+_0x42c933(0x1ab)+_0xec832c;}catch(_0x5dc58f){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x219a32,_0x303246,_0x17e4fe,_0x5b0468){const _0x1fc527=a0_0x171749;if(!_0x219a32['geminiModel'])return{'approved':!![],'reason':_0x1fc527(0x1cf)};const _0x5e7a08=Date[_0x1fc527(0x19e)]();if(decisionCache[_0x303246]&&_0x5e7a08-decisionCache[_0x303246][_0x1fc527(0x1a8)]<CACHE_TTL_MS){const _0x59a87a=decisionCache[_0x303246][_0x1fc527(0x1a7)];return _0x219a32[_0x1fc527(0x1a1)]['debug']('ü§ñ\x20Butler\x20Cache\x20Hit:\x20'+_0x303246+'\x20->\x20'+(_0x59a87a[_0x1fc527(0x1c3)]?'OK':'NO')+'\x20('+_0x59a87a['reason']+')'),_0x59a87a;}if(!canCallApi())return _0x219a32[_0x1fc527(0x1a1)][_0x1fc527(0x1cb)](_0x1fc527(0x1a4)+_0x303246+_0x1fc527(0x209)),{'approved':!![],'reason':_0x1fc527(0x19f)};const _0x58d154=new Date()[_0x1fc527(0x18a)](),_0x664479=await getWeatherContext(_0x219a32),_0x4fdca4=PERSONA_MAPPING[_0x219a32[_0x1fc527(0x196)][_0x1fc527(0x1e9)]||_0x1fc527(0x1b0)],_0x37f4f0=_0x1fc527(0x202)+_0x58d154+_0x1fc527(0x20f)+_0x664479+_0x1fc527(0x18d)+(_0x5b0468*0x64)['toFixed'](0x0)+_0x1fc527(0x1d7)+_0x303246+_0x1fc527(0x1d6)+_0x17e4fe+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x4fdca4+_0x1fc527(0x18e);try{updateApiTimestamp();const _0x2a1f27=await _0x219a32[_0x1fc527(0x1fb)][_0x1fc527(0x1d8)](_0x37f4f0),_0x4c65f8=_0x2a1f27[_0x1fc527(0x1f7)]['text']()['replace'](/```json|```/g,'')[_0x1fc527(0x1e1)](),_0x2d997f=JSON[_0x1fc527(0x195)](_0x4c65f8);return decisionCache[_0x303246]={'decision':_0x2d997f,'timestamp':_0x5e7a08},_0x2d997f;}catch(_0x253d00){return _0x219a32[_0x1fc527(0x1a1)]['warn'](_0x1fc527(0x1bb)+_0x253d00[_0x1fc527(0x194)]),decisionCache[_0x303246]={'decision':{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'},'timestamp':_0x5e7a08-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x1fc527(0x1d1)};}}async function runGeminiAnalysis(_0x1ae78c,_0x569a80=''){const _0x315d15=a0_0x171749;if(!_0x1ae78c[_0x315d15(0x1fb)])return;if(!canCallApi()){_0x1ae78c[_0x315d15(0x1a1)]['debug'](_0x315d15(0x203));return;}if(_0x1ae78c['eventHistory'][_0x315d15(0x208)]===0x0)return;const _0xcb287c=_0x1ae78c[_0x315d15(0x1b7)]['slice'](0x0,0xf),_0x1e9968=_0x1ae78c[_0x315d15(0x191)],_0x4902c7=PERSONA_MAPPING[_0x1ae78c[_0x315d15(0x196)][_0x315d15(0x1e9)]||'generic'],_0x12f64f=_0x1ae78c[_0x315d15(0x196)]['livingContext']||_0x315d15(0x19d);let _0x15b676=_0x315d15(0x20b);try{const _0x47a740=await _0x1ae78c[_0x315d15(0x1a0)](_0x315d15(0x20d));if(_0x47a740&&_0x47a740[_0x315d15(0x1b3)])_0x15b676=_0x47a740[_0x315d15(0x1b3)];}catch(_0x2a0c99){}let _0xa3e756=![];try{const _0x5561a7=await _0x1ae78c[_0x315d15(0x1a0)]('analysis.automation.autoApply');if(_0x5561a7&&_0x5561a7[_0x315d15(0x1b3)])_0xa3e756=!![];}catch(_0x21f7a8){}const _0x265810=_0x315d15(0x18c)+_0x4902c7+_0x315d15(0x1c1)+_0x12f64f+_0x315d15(0x1f1)+_0x1e9968+_0x315d15(0x1ed)+_0x15b676+_0x315d15(0x1c9)+JSON[_0x315d15(0x1e5)](_0xcb287c)+_0x315d15(0x1a3)+_0x569a80+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x32c807=await _0x1ae78c[_0x315d15(0x1fb)]['generateContent'](_0x265810),_0x1792f8=JSON[_0x315d15(0x195)](_0x32c807[_0x315d15(0x1f7)][_0x315d15(0x1ff)]()[_0x315d15(0x1ce)](/```json|```/g,'')[_0x315d15(0x1e1)]());await _0x1ae78c[_0x315d15(0x1cd)](_0x315d15(0x1f8),{'val':JSON['stringify'](_0x1792f8),'ack':!![]});if(_0x1792f8[_0x315d15(0x1eb)])await _0x1ae78c[_0x315d15(0x1cd)](_0x315d15(0x1aa),{'val':_0x1792f8['summary'],'ack':!![]});const _0x30910f={'timestamp':Date[_0x315d15(0x19e)](),'id':Date['now']()['toString'](),'analysis':{'activity':{'summary':_0x1792f8[_0x315d15(0x1eb)],'isAlert':_0x1792f8[_0x315d15(0x1cc)],'alertReason':_0x1792f8[_0x315d15(0x1c6)]},'comfort':{'automationProposal':_0x1792f8[_0x315d15(0x1f6)]}}};_0x1ae78c[_0x315d15(0x1fe)][_0x315d15(0x197)](_0x30910f);if(_0x1ae78c[_0x315d15(0x1fe)][_0x315d15(0x208)]>0x32)_0x1ae78c['analysisHistory']['pop']();await _0x1ae78c[_0x315d15(0x1cd)](_0x315d15(0x1f0),{'val':JSON[_0x315d15(0x1e5)](_0x1ae78c[_0x315d15(0x1fe)]),'ack':!![]});const _0xbefe1c=_0x1792f8[_0x315d15(0x1cc)]||![];_0xbefe1c!==_0x1ae78c[_0x315d15(0x1dd)]&&(await _0x1ae78c['setStateAsync'](_0x315d15(0x199),{'val':_0xbefe1c,'ack':!![]}),_0x1ae78c[_0x315d15(0x1dd)]=_0xbefe1c,_0xbefe1c&&(await _0x1ae78c[_0x315d15(0x1cd)]('analysis.alertReason',{'val':_0x1792f8[_0x315d15(0x1c6)],'ack':!![]}),setup[_0x315d15(0x205)](_0x1ae78c,_0x315d15(0x1c2)+_0x1792f8[_0x315d15(0x1c6)],![],_0x1792f8['isEmergency'])));if(_0x1792f8[_0x315d15(0x1f6)]&&_0x1792f8[_0x315d15(0x1f6)][_0x315d15(0x1d9)]){await _0x1ae78c[_0x315d15(0x1cd)](_0x315d15(0x1a2),{'val':!![],'ack':!![]}),await _0x1ae78c['setStateAsync'](_0x315d15(0x19c),{'val':_0x1792f8[_0x315d15(0x1f6)][_0x315d15(0x1e6)],'ack':!![]}),await _0x1ae78c[_0x315d15(0x1cd)](_0x315d15(0x193),{'val':_0x1792f8[_0x315d15(0x1f6)][_0x315d15(0x19a)],'ack':!![]}),await _0x1ae78c[_0x315d15(0x1cd)](_0x315d15(0x18b),{'val':JSON[_0x315d15(0x1e5)](_0x1792f8[_0x315d15(0x1f6)]['targetValue']),'ack':!![]});if(_0xa3e756)executeAutomationAction(_0x1ae78c);}}catch(_0x218f82){_0x1ae78c[_0x315d15(0x1a1)][_0x315d15(0x1f5)](_0x315d15(0x1b4)+_0x218f82[_0x315d15(0x194)]);}}function a0_0x569a(_0x4d6616,_0x592350){const _0x46eb49=a0_0x340a();return a0_0x569a=function(_0x40bf27,_0x1865d1){_0x40bf27=_0x40bf27-0x189;let _0x340aef=_0x46eb49[_0x40bf27];return _0x340aef;},a0_0x569a(_0x4d6616,_0x592350);}function a0_0x340a(){const _0x18acce=['trim','4099430CZhQwi','5631NecwbC','ANALYZE_HEALTH','stringify','description','\x20=\x20','.Current.IsNight','aiPersona','toString','summary','activityLevel','.\x20ANWESEND:\x20','info','BUTLER\x20Execution\x20Error:\x20','analysis.analysisHistory','.\x20SYSTEM_MODE:\x20','N/A\x20(Learning)','slice','ltmStbWindowDays','error','automationProposal','response','analysis.lastResult','setForeignStateAsync','1628297qzLgZZ','geminiModel','@google/generative-ai','3060552GmpEBt','analysisHistory','text','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','push','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','constructor','sendNotification','ltmLtbWindowDays','Digest','length','\x20√ºbersprungen\x20(Auto-Approved).','Sicherheit\x20geht\x20vor.','Unbekannt','baselineDrift','system.presenceWho','.Current.Temperature',',\x20Wetter:\x20','LTM.driftAnalysis.lastCheck','üåÖ\x20Morning\x20Briefing:\x0a','toLocaleTimeString','analysis.automation.targetValue','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','exports','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','currentSystemMode','Success','analysis.automation.targetId','message','parse','config','unshift','Nacht','analysis.isAlert','targetId','./setup','analysis.automation.description','Keine\x20Details.','now','Traffic-Schutz\x20(Auto-Approved)','getStateAsync','log','analysis.automation.patternDetected','.\x20EMERGENCY:\x20','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','toISOString','send','decision','timestamp','splice','analysis.activitySummary',',\x20Lichtverh√§ltnisse:\x20','Started...','rawEventLog','apply','29AQlcta','generic','search','warn','val','Gemini\x20Error:\x20','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','eventHistory','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','driftDetails','(((.+)+)+)+$','ü§ñ\x20Butler\x20Brain\x20Error:\x20','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','\x0aSTB:\x20','models/gemini-flash-latest','3320cSkzyp','LTM.dailyDigests','.\x20KONTEXT:\x20','‚ö†Ô∏è\x20ALARM:\x20','approved','5wCfmiS','Unbekannt\x20(Kein\x20Sensor)','alertReason','Briefing\x20Error:\x20','dailyDigests','.\x20EVENTS:\x20','520072rFhSxd','debug','isAlert','setStateAsync','replace','KI\x20offline\x20(Fallback)','¬∞C,\x20','KI-Fehler\x20(Fallback)','35lUcpgr','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','LTM.driftAnalysis.baselineDrift','isProVersion','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','%)\x20nach\x20\x22','generateContent','detected','getForeignStateAsync','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','27932856cmjHdD','lastAlertState','.Current.WeatherText','35498CaBsbB','9wUrnxw'];a0_0x340a=function(){return _0x18acce;};return a0_0x340a();}async function createDailyDigest(_0x12b6e0,_0x47fd21){const _0x2d0e82=a0_0x171749;if(!_0x12b6e0[_0x2d0e82(0x1d5)])return;if(!canCallApi()){await _0x12b6e0[_0x2d0e82(0x1cd)](LTM_DP_STATUS,{'val':'Skipped\x20(Traffic)','ack':!![]});return;}await _0x12b6e0[_0x2d0e82(0x1cd)](LTM_DP_STATUS,{'val':_0x2d0e82(0x1ac),'ack':!![]});if(!_0x12b6e0[_0x2d0e82(0x1fb)]||_0x12b6e0['rawEventLog'][_0x2d0e82(0x208)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x12b6e0['setStateAsync'](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x289d5a=JSON['parse'](JSON['stringify'](_0x12b6e0[_0x2d0e82(0x1ad)])),_0x49add3=_0x289d5a[_0x2d0e82(0x208)],_0x875703=_0x2d0e82(0x1bc)+JSON['stringify'](_0x289d5a);try{updateApiTimestamp();const _0x5dfbc0=await _0x12b6e0[_0x2d0e82(0x1fb)][_0x2d0e82(0x1d8)](_0x875703),_0x58f969=JSON[_0x2d0e82(0x195)](_0x5dfbc0[_0x2d0e82(0x1f7)][_0x2d0e82(0x1ff)]()[_0x2d0e82(0x1ce)](/```json|```/g,'')[_0x2d0e82(0x1e1)]()),_0x5e4e87={'timestamp':new Date()[_0x2d0e82(0x1a5)](),'eventCount':_0x49add3,'summary':_0x58f969['summary']||_0x2d0e82(0x207),'activityLevel':_0x58f969[_0x2d0e82(0x1ec)]||'normal','systemMode':_0x12b6e0[_0x2d0e82(0x191)]};_0x12b6e0[_0x2d0e82(0x1c8)][_0x2d0e82(0x201)](_0x5e4e87);const _0x59473a=_0x12b6e0[_0x2d0e82(0x196)][_0x2d0e82(0x206)]||0x3c;_0x12b6e0[_0x2d0e82(0x1c8)][_0x2d0e82(0x208)]>_0x59473a&&_0x12b6e0[_0x2d0e82(0x1c8)][_0x2d0e82(0x1a9)](0x0,_0x12b6e0[_0x2d0e82(0x1c8)][_0x2d0e82(0x208)]-_0x59473a);await _0x12b6e0[_0x2d0e82(0x1cd)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x2d0e82(0x1e5)](_0x12b6e0[_0x2d0e82(0x1c8)]),'ack':!![]}),_0x12b6e0[_0x2d0e82(0x1ad)]=[],await _0x12b6e0['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x2d0e82(0x1e5)](_0x12b6e0[_0x2d0e82(0x1ad)]),'ack':!![]}),await _0x12b6e0[_0x2d0e82(0x1cd)](LTM_DP_STATUS,{'val':_0x2d0e82(0x192),'ack':!![]});if(_0x12b6e0[_0x2d0e82(0x1d5)]&&_0x47fd21)_0x47fd21[_0x2d0e82(0x1a6)](_0x12b6e0,_0x2d0e82(0x1e4),{'digest':_0x5e4e87});}catch(_0x2e9be2){_0x12b6e0[_0x2d0e82(0x1a1)][_0x2d0e82(0x1f5)](_0x2e9be2[_0x2d0e82(0x194)]);}}async function runBaselineDriftAnalysis(_0xfad39){const _0x173630=a0_0x171749;if(!_0xfad39[_0x173630(0x1d5)]||!_0xfad39['geminiModel'])return;if(!canCallApi())return;const _0x548a87=_0xfad39[_0x173630(0x196)][_0x173630(0x1f4)]||0xe;if(_0xfad39['dailyDigests']['length']<_0x548a87+0x7){await _0xfad39['setStateAsync'](_0x173630(0x1d4),{'val':_0x173630(0x1f2),'ack':!![]});return;}const _0x13dea1=_0xfad39[_0x173630(0x1c8)][_0x173630(0x1f3)](-_0x548a87),_0x1cb0fa=_0xfad39[_0x173630(0x1c8)][_0x173630(0x1f3)](0x0,_0xfad39[_0x173630(0x1c8)][_0x173630(0x208)]-_0x548a87),_0x12d0bc='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x173630(0x1e5)](_0x1cb0fa)+_0x173630(0x1bd)+JSON[_0x173630(0x1e5)](_0x13dea1);try{updateApiTimestamp();const _0x3c67f4=await _0xfad39[_0x173630(0x1fb)][_0x173630(0x1d8)](_0x12d0bc),_0x2c288c=JSON[_0x173630(0x195)](_0x3c67f4['response'][_0x173630(0x1ff)]()[_0x173630(0x1ce)](/```json|```/g,'')['trim']());_0x2c288c[_0x173630(0x20c)]&&(await _0xfad39[_0x173630(0x1cd)](_0x173630(0x1d4),{'val':_0x2c288c['baselineDrift'],'ack':!![]}),await _0xfad39[_0x173630(0x1cd)]('LTM.driftAnalysis.driftDetails',{'val':_0x2c288c[_0x173630(0x1b9)],'ack':!![]}),await _0xfad39['setStateAsync'](_0x173630(0x210),{'val':Date['now'](),'ack':!![]}));}catch(_0xea50f5){}}async function executeAutomationAction(_0x413bf7){const _0x4c04f6=a0_0x171749;try{const _0x2c43cd=await _0x413bf7[_0x4c04f6(0x1a0)](_0x4c04f6(0x193)),_0x36bf79=await _0x413bf7['getStateAsync'](_0x4c04f6(0x18b));if(_0x2c43cd&&_0x2c43cd[_0x4c04f6(0x1b3)]&&_0x36bf79){const _0x307204=_0x2c43cd[_0x4c04f6(0x1b3)];let _0x33e529=_0x36bf79[_0x4c04f6(0x1b3)];try{_0x33e529=JSON['parse'](_0x33e529);}catch(_0x447535){}_0x413bf7[_0x4c04f6(0x1a1)][_0x4c04f6(0x1ee)](_0x4c04f6(0x1b8)+_0x307204+_0x4c04f6(0x1e7)+_0x33e529),await _0x413bf7[_0x4c04f6(0x1f9)](_0x307204,_0x33e529);}else _0x413bf7[_0x4c04f6(0x1a1)][_0x4c04f6(0x1b2)](_0x4c04f6(0x1b6));}catch(_0x14b8c5){_0x413bf7[_0x4c04f6(0x1a1)][_0x4c04f6(0x1f5)](_0x4c04f6(0x1ef)+_0x14b8c5['message']);}}async function sendMorningBriefing(_0x1240c1){const _0x1757cf=a0_0x171749;if(!_0x1240c1[_0x1757cf(0x1fb)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x3819f4=_0x1757cf(0x1b5),_0x2b2db6=await _0x1240c1['geminiModel'][_0x1757cf(0x1d8)](_0x3819f4),_0x31984e=_0x2b2db6['response'][_0x1757cf(0x1ff)]();setup[_0x1757cf(0x205)](_0x1240c1,_0x1757cf(0x189)+_0x31984e);}catch(_0x3450c8){_0x1240c1[_0x1757cf(0x1a1)][_0x1757cf(0x1f5)](_0x1757cf(0x1c7)+_0x3450c8[_0x1757cf(0x194)]);}}module[a0_0x171749(0x18f)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};