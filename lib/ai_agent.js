const a0_0x1bb391=a0_0x4a1b;(function(_0x3f81d0,_0x271c63){const _0x1c534f=a0_0x4a1b,_0x599b24=_0x3f81d0();while(!![]){try{const _0x2359b7=-parseInt(_0x1c534f(0xf6))/0x1+-parseInt(_0x1c534f(0xa5))/0x2+parseInt(_0x1c534f(0xf5))/0x3*(parseInt(_0x1c534f(0x93))/0x4)+-parseInt(_0x1c534f(0xe8))/0x5+-parseInt(_0x1c534f(0xeb))/0x6*(parseInt(_0x1c534f(0x115))/0x7)+-parseInt(_0x1c534f(0xd2))/0x8*(-parseInt(_0x1c534f(0xe9))/0x9)+-parseInt(_0x1c534f(0xed))/0xa*(-parseInt(_0x1c534f(0x9b))/0xb);if(_0x2359b7===_0x271c63)break;else _0x599b24['push'](_0x599b24['shift']());}catch(_0x51bbe7){_0x599b24['push'](_0x599b24['shift']());}}}(a0_0xd0d7,0xb0904));const a0_0x94bb1d=(function(){let _0x27b1bb=!![];return function(_0x827f0d,_0x4b646f){const _0x52ce3d=_0x27b1bb?function(){const _0x3acc3d=a0_0x4a1b;if(_0x4b646f){const _0x15092a=_0x4b646f[_0x3acc3d(0x95)](_0x827f0d,arguments);return _0x4b646f=null,_0x15092a;}}:function(){};return _0x27b1bb=![],_0x52ce3d;};}()),a0_0x55ca0a=a0_0x94bb1d(this,function(){const _0x412c37=a0_0x4a1b;return a0_0x55ca0a[_0x412c37(0xa9)]()[_0x412c37(0xf1)](_0x412c37(0xf4))[_0x412c37(0xa9)]()[_0x412c37(0x10d)](a0_0x55ca0a)[_0x412c37(0xf1)](_0x412c37(0xf4));});a0_0x55ca0a();'use strict';const {GoogleGenerativeAI}=require(a0_0x1bb391(0x10e)),setup=require('./setup'),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x1bb391(0xc1),LTM_DP_STATUS=a0_0x1bb391(0xb0),LTM_DP_RAW_LOG=a0_0x1bb391(0xc9),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;function a0_0xd0d7(){const _0xe4a469=['val','735339FGMylk','Gemini\x20Error:\x20','slice','Success','replace','timestamp','analysis.automation.autoApply','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','LTM.driftAnalysis.driftDetails','decision','162556RpKvdv','config','analysis.lastResult','isAlert','toString','message','\x20=\x20','debug','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','ltmStbWindowDays','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','LTM.processingStatus','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','targetId','getStateAsync','üåÖ\x20Morning\x20Briefing:\x0a','info','generic','analysis.isAlert','currentSystemMode','LTM.driftAnalysis.baselineDrift','analysis.automation.targetId','send',',\x20Wetter:\x20','¬∞C,\x20','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','Briefing\x20Error:\x20','driftDetails','LTM.dailyDigests','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','livingContext','Started...','stringify','error','.Current.WeatherText','eventHistory','LTM.rawEventLog','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','.\x20EVENTS:\x20','length','üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','rawEventLog','warn','980680pJdCnf','push','sendNotification','weatherInstance','.forecast.current.temperature','.\x20KONTEXT:\x20','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','dailyDigests','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','%)\x20nach\x20\x22','LTM.driftAnalysis.lastCheck','pop','aiPersona','Tag','analysis.activitySummary','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','BUTLER\x20Execution\x20Error:\x20','response','baselineDrift','analysisHistory','summary','Unbekannt','4191975qtXtck','81HFSAbp','text','3433866miTQsS','isEmergency','190GhKlMK','ü§ñ\x20Butler\x20Brain\x20Error:\x20','.\x20SYSTEM_MODE:\x20',').\x20Sending\x20notification...','search','generateContent','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','(((.+)+)+)+$','27vFffeE','571389AhAraz','description','analysis.analysisHistory','activityLevel','ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','normal','alertReason',',\x20Lichtverh√§ltnisse:\x20','parse','setStateAsync','reason','isProVersion','automationProposal','toLocaleTimeString','Keine\x20Details.','analysis.alertReason','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','log','targetValue','.forecast.current.state','analysis.automation.description','now','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','constructor','@google/generative-ai','\x0aSTB:\x20','geminiModel','trim','üìÖ\x20Daily\x20Digest:\x0a','lastAlertState','exports','7NUovgo','detected','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','setForeignStateAsync','analysis.automation.targetValue','getForeignStateAsync','‚ö†Ô∏è\x20ALARM:\x20','system.presenceWho','KI-Fehler\x20(Fallback)','.\x20ANWESEND:\x20','toFixed','useWeather','183636SuihzI','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','apply','N/A\x20(Learning)','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','splice','Unbekannt\x20(Kein\x20Sensor)'];a0_0xd0d7=function(){return _0xe4a469;};return a0_0xd0d7();}const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x1bb391(0xda),'senior_aal':a0_0x1bb391(0x97),'family':a0_0x1bb391(0xbe),'single_comfort':a0_0x1bb391(0xd8),'security':'Sicherheit\x20geht\x20vor.','energy_saver':'PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'};function canCallApi(){const _0x2ecd60=a0_0x1bb391,_0x5a11e7=Date[_0x2ecd60(0x10b)]();return _0x5a11e7-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x517452=a0_0x1bb391;lastGlobalApiCall=Date[_0x517452(0x10b)]();}async function getWeatherContext(_0xf3b013){const _0x486fbb=a0_0x1bb391;if(!_0xf3b013[_0x486fbb(0xa6)][_0x486fbb(0x92)]||!_0xf3b013[_0x486fbb(0xa6)][_0x486fbb(0xd5)])return _0x486fbb(0x99);try{const _0x1f44d5=_0xf3b013['config']['weatherInstance'];let _0x5ca117=await _0xf3b013[_0x486fbb(0x11a)](_0x1f44d5+'.Current.Temperature');if(!_0x5ca117)_0x5ca117=await _0xf3b013[_0x486fbb(0x11a)](_0x1f44d5+_0x486fbb(0xd6));let _0x46ed60=await _0xf3b013[_0x486fbb(0x11a)](_0x1f44d5+_0x486fbb(0xc7));if(!_0x46ed60)_0x46ed60=await _0xf3b013[_0x486fbb(0x11a)](_0x1f44d5+_0x486fbb(0x109));let _0x4f7360=_0x486fbb(0xe7);const _0x860835=await _0xf3b013[_0x486fbb(0x11a)](_0x1f44d5+'.Current.IsNight');if(_0x860835)_0x4f7360=_0x860835[_0x486fbb(0x9a)]?'Nacht':_0x486fbb(0xdf);if(_0x5ca117&&_0x46ed60)return _0x5ca117['val']+_0x486fbb(0xbd)+_0x46ed60[_0x486fbb(0x9a)]+_0x486fbb(0xfd)+_0x4f7360;}catch(_0x595cc1){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x311804,_0x395deb,_0x5af4a5,_0x3049f5){const _0x2ade12=a0_0x1bb391;if(!_0x311804[_0x2ade12(0x110)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x3e9c27=Date[_0x2ade12(0x10b)]();if(decisionCache[_0x395deb]&&_0x3e9c27-decisionCache[_0x395deb][_0x2ade12(0xa0)]<CACHE_TTL_MS){const _0x1cc858=decisionCache[_0x395deb][_0x2ade12(0xa4)];return _0x311804[_0x2ade12(0x107)][_0x2ade12(0xac)](_0x2ade12(0xca)+_0x395deb+'\x20->\x20'+(_0x1cc858['approved']?'OK':'NO')+'\x20('+_0x1cc858[_0x2ade12(0x100)]+')'),_0x1cc858;}if(!canCallApi())return _0x311804[_0x2ade12(0x107)][_0x2ade12(0xac)](_0x2ade12(0xe1)+_0x395deb+'\x20√ºbersprungen\x20(Auto-Approved).'),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x1e328b=new Date()[_0x2ade12(0x103)](),_0x493519=await getWeatherContext(_0x311804),_0x43ea82=PERSONA_MAPPING[_0x311804['config'][_0x2ade12(0xde)]||_0x2ade12(0xb6)],_0x2a48e0=_0x2ade12(0xcf)+_0x1e328b+_0x2ade12(0xbc)+_0x493519+_0x2ade12(0xad)+(_0x3049f5*0x64)[_0x2ade12(0x11f)](0x0)+_0x2ade12(0xdb)+_0x395deb+_0x2ade12(0xf3)+_0x5af4a5+_0x2ade12(0xc2)+_0x43ea82+_0x2ade12(0xb1);try{updateApiTimestamp();const _0x45ad2f=await _0x311804[_0x2ade12(0x110)][_0x2ade12(0xf2)](_0x2a48e0),_0x1fa098=_0x45ad2f[_0x2ade12(0xe3)][_0x2ade12(0xea)]()[_0x2ade12(0x9f)](/```json|```/g,'')[_0x2ade12(0x111)](),_0xe83f7=JSON[_0x2ade12(0xfe)](_0x1fa098);return decisionCache[_0x395deb]={'decision':_0xe83f7,'timestamp':_0x3e9c27},_0xe83f7;}catch(_0x11546b){return _0x311804['log'][_0x2ade12(0xd1)](_0x2ade12(0xee)+_0x11546b[_0x2ade12(0xaa)]),decisionCache[_0x395deb]={'decision':{'approved':!![],'reason':_0x2ade12(0x11d)},'timestamp':_0x3e9c27-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x3e4f43,_0xc68c71=''){const _0x7260a9=a0_0x1bb391;if(!_0x3e4f43[_0x7260a9(0x110)])return;if(!canCallApi()){_0x3e4f43['log'][_0x7260a9(0xac)](_0x7260a9(0x106));return;}if(_0x3e4f43[_0x7260a9(0xc8)][_0x7260a9(0xcd)]===0x0)return;const _0x5a46b3=_0x3e4f43[_0x7260a9(0xc8)][_0x7260a9(0x9d)](0x0,0xf),_0x4d519b=_0x3e4f43[_0x7260a9(0xb8)],_0x55b97f=PERSONA_MAPPING[_0x3e4f43[_0x7260a9(0xa6)][_0x7260a9(0xde)]||_0x7260a9(0xb6)],_0x5b4dce=_0x3e4f43['config'][_0x7260a9(0xc3)]||_0x7260a9(0x104);let _0x4aa29f=_0x7260a9(0xe7);try{const _0x1712c6=await _0x3e4f43[_0x7260a9(0xb3)](_0x7260a9(0x11c));if(_0x1712c6&&_0x1712c6[_0x7260a9(0x9a)])_0x4aa29f=_0x1712c6[_0x7260a9(0x9a)];}catch(_0x590f52){}let _0x196741=![];try{const _0x57f181=await _0x3e4f43[_0x7260a9(0xb3)](_0x7260a9(0xa1));if(_0x57f181&&_0x57f181[_0x7260a9(0x9a)])_0x196741=!![];}catch(_0x464e7b){}const _0x13668c=_0x7260a9(0x10c)+_0x55b97f+_0x7260a9(0xd7)+_0x5b4dce+_0x7260a9(0xef)+_0x4d519b+_0x7260a9(0x11e)+_0x4aa29f+_0x7260a9(0xcc)+JSON[_0x7260a9(0xc5)](_0x5a46b3)+'.\x20EMERGENCY:\x20'+_0xc68c71+_0x7260a9(0xaf);try{updateApiTimestamp();const _0x2cd74c=await _0x3e4f43[_0x7260a9(0x110)][_0x7260a9(0xf2)](_0x13668c),_0x7e8df5=JSON['parse'](_0x2cd74c['response'][_0x7260a9(0xea)]()['replace'](/```json|```/g,'')[_0x7260a9(0x111)]());await _0x3e4f43[_0x7260a9(0xff)](_0x7260a9(0xa7),{'val':JSON[_0x7260a9(0xc5)](_0x7e8df5),'ack':!![]});if(_0x7e8df5[_0x7260a9(0xe6)])await _0x3e4f43[_0x7260a9(0xff)](_0x7260a9(0xe0),{'val':_0x7e8df5['summary'],'ack':!![]});const _0x16ba37={'timestamp':Date['now'](),'id':Date[_0x7260a9(0x10b)]()['toString'](),'analysis':{'activity':{'summary':_0x7e8df5['summary'],'isAlert':_0x7e8df5[_0x7260a9(0xa8)],'alertReason':_0x7e8df5['alertReason']},'comfort':{'automationProposal':_0x7e8df5[_0x7260a9(0x102)]}}};_0x3e4f43[_0x7260a9(0xe5)]['unshift'](_0x16ba37);if(_0x3e4f43[_0x7260a9(0xe5)][_0x7260a9(0xcd)]>0x32)_0x3e4f43['analysisHistory'][_0x7260a9(0xdd)]();await _0x3e4f43[_0x7260a9(0xff)](_0x7260a9(0xf8),{'val':JSON[_0x7260a9(0xc5)](_0x3e4f43['analysisHistory']),'ack':!![]});const _0x1790a8=_0x7e8df5['isAlert']||![];_0x1790a8!==_0x3e4f43[_0x7260a9(0x113)]&&(await _0x3e4f43[_0x7260a9(0xff)](_0x7260a9(0xb7),{'val':_0x1790a8,'ack':!![]}),_0x3e4f43[_0x7260a9(0x113)]=_0x1790a8,_0x1790a8&&(await _0x3e4f43[_0x7260a9(0xff)](_0x7260a9(0x105),{'val':_0x7e8df5[_0x7260a9(0xfc)],'ack':!![]}),setup[_0x7260a9(0xd4)](_0x3e4f43,_0x7260a9(0x11b)+_0x7e8df5[_0x7260a9(0xfc)],![],_0x7e8df5[_0x7260a9(0xec)])));if(_0x7e8df5[_0x7260a9(0x102)]&&_0x7e8df5[_0x7260a9(0x102)][_0x7260a9(0x116)]){await _0x3e4f43[_0x7260a9(0xff)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x3e4f43[_0x7260a9(0xff)](_0x7260a9(0x10a),{'val':_0x7e8df5['automationProposal'][_0x7260a9(0xf7)],'ack':!![]}),await _0x3e4f43['setStateAsync'](_0x7260a9(0xba),{'val':_0x7e8df5[_0x7260a9(0x102)][_0x7260a9(0xb2)],'ack':!![]}),await _0x3e4f43[_0x7260a9(0xff)](_0x7260a9(0x119),{'val':JSON[_0x7260a9(0xc5)](_0x7e8df5['automationProposal'][_0x7260a9(0x108)]),'ack':!![]});if(_0x196741)executeAutomationAction(_0x3e4f43);}}catch(_0x52dce8){_0x3e4f43[_0x7260a9(0x107)][_0x7260a9(0xc6)](_0x7260a9(0x9c)+_0x52dce8[_0x7260a9(0xaa)]);}}async function createDailyDigest(_0x162875,_0x2021e0){const _0x187b70=a0_0x1bb391;if(!_0x162875[_0x187b70(0x101)])return;if(!canCallApi()){await _0x162875[_0x187b70(0xff)](LTM_DP_STATUS,{'val':'Skipped\x20(Traffic)','ack':!![]});return;}await _0x162875[_0x187b70(0xff)](LTM_DP_STATUS,{'val':_0x187b70(0xc4),'ack':!![]});if(!_0x162875['geminiModel']||_0x162875[_0x187b70(0xd0)][_0x187b70(0xcd)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x162875['setStateAsync'](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x43c1e9=JSON[_0x187b70(0xfe)](JSON['stringify'](_0x162875[_0x187b70(0xd0)])),_0x24dba1=_0x43c1e9[_0x187b70(0xcd)],_0x16f36b='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x187b70(0xc5)](_0x43c1e9);try{updateApiTimestamp();const _0x11c73e=await _0x162875['geminiModel'][_0x187b70(0xf2)](_0x16f36b),_0x7b1a4d=JSON[_0x187b70(0xfe)](_0x11c73e[_0x187b70(0xe3)][_0x187b70(0xea)]()[_0x187b70(0x9f)](/```json|```/g,'')[_0x187b70(0x111)]()),_0x2a54ac={'timestamp':new Date()['toISOString'](),'eventCount':_0x24dba1,'summary':_0x7b1a4d['summary']||'Digest','activityLevel':_0x7b1a4d[_0x187b70(0xf9)]||_0x187b70(0xfb),'systemMode':_0x162875[_0x187b70(0xb8)]};_0x162875[_0x187b70(0xd9)][_0x187b70(0xd3)](_0x2a54ac);const _0x45647a=_0x162875[_0x187b70(0xa6)]['ltmLtbWindowDays']||0x3c;_0x162875[_0x187b70(0xd9)][_0x187b70(0xcd)]>_0x45647a&&_0x162875[_0x187b70(0xd9)][_0x187b70(0x98)](0x0,_0x162875[_0x187b70(0xd9)]['length']-_0x45647a);await _0x162875[_0x187b70(0xff)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x187b70(0xc5)](_0x162875[_0x187b70(0xd9)]),'ack':!![]}),_0x162875['rawEventLog']=[],await _0x162875[_0x187b70(0xff)](LTM_DP_RAW_LOG,{'val':JSON[_0x187b70(0xc5)](_0x162875[_0x187b70(0xd0)]),'ack':!![]}),await _0x162875[_0x187b70(0xff)](LTM_DP_STATUS,{'val':_0x187b70(0x9e),'ack':!![]});const _0x5799be=_0x187b70(0x112)+_0x7b1a4d['summary']+'\x0aAktivit√§t:\x20'+_0x7b1a4d['activityLevel'];setup[_0x187b70(0xd4)](_0x162875,_0x5799be,![],![]);if(_0x162875[_0x187b70(0x101)]&&_0x2021e0)_0x2021e0[_0x187b70(0xbb)](_0x162875,'ANALYZE_HEALTH',{'digest':_0x2a54ac});}catch(_0x56b954){_0x162875[_0x187b70(0x107)][_0x187b70(0xc6)](_0x56b954[_0x187b70(0xaa)]);}}async function runBaselineDriftAnalysis(_0x75edf6){const _0x555463=a0_0x1bb391;if(!_0x75edf6[_0x555463(0x101)]||!_0x75edf6[_0x555463(0x110)])return;if(!canCallApi())return;const _0xefbe0d=_0x75edf6[_0x555463(0xa6)][_0x555463(0xae)]||0xe;if(_0x75edf6[_0x555463(0xd9)][_0x555463(0xcd)]<_0xefbe0d+0x7){await _0x75edf6[_0x555463(0xff)]('LTM.driftAnalysis.baselineDrift',{'val':_0x555463(0x96),'ack':!![]});return;}const _0x53bdae=_0x75edf6['dailyDigests']['slice'](-_0xefbe0d),_0x17b867=_0x75edf6[_0x555463(0xd9)]['slice'](0x0,_0x75edf6['dailyDigests']['length']-_0xefbe0d),_0x31a27b=_0x555463(0xcb)+JSON[_0x555463(0xc5)](_0x17b867)+_0x555463(0x10f)+JSON[_0x555463(0xc5)](_0x53bdae);try{updateApiTimestamp();const _0x18e096=await _0x75edf6[_0x555463(0x110)][_0x555463(0xf2)](_0x31a27b),_0x4600bf=JSON['parse'](_0x18e096['response'][_0x555463(0xea)]()[_0x555463(0x9f)](/```json|```/g,'')[_0x555463(0x111)]());_0x4600bf[_0x555463(0xe4)]&&(await _0x75edf6[_0x555463(0xff)](_0x555463(0xb9),{'val':_0x4600bf[_0x555463(0xe4)],'ack':!![]}),await _0x75edf6[_0x555463(0xff)](_0x555463(0xa3),{'val':_0x4600bf[_0x555463(0xc0)],'ack':!![]}),await _0x75edf6[_0x555463(0xff)](_0x555463(0xdc),{'val':Date[_0x555463(0x10b)](),'ack':!![]}));}catch(_0xd6fabc){}}async function executeAutomationAction(_0x40bf5d){const _0x7a355=a0_0x1bb391;try{const _0x1c6eac=await _0x40bf5d['getStateAsync'](_0x7a355(0xba)),_0x232e40=await _0x40bf5d[_0x7a355(0xb3)](_0x7a355(0x119));if(_0x1c6eac&&_0x1c6eac[_0x7a355(0x9a)]&&_0x232e40){const _0x2ff819=_0x1c6eac[_0x7a355(0x9a)];let _0x62d223=_0x232e40[_0x7a355(0x9a)];try{_0x62d223=JSON[_0x7a355(0xfe)](_0x62d223);}catch(_0x2c7c7d){}_0x40bf5d['log'][_0x7a355(0xb5)](_0x7a355(0x117)+_0x2ff819+_0x7a355(0xab)+_0x62d223),await _0x40bf5d[_0x7a355(0x118)](_0x2ff819,_0x62d223);}else _0x40bf5d[_0x7a355(0x107)]['warn'](_0x7a355(0x94));}catch(_0x5a7ec7){_0x40bf5d[_0x7a355(0x107)][_0x7a355(0xc6)](_0x7a355(0xe2)+_0x5a7ec7[_0x7a355(0xaa)]);}}async function sendMorningBriefing(_0x5669c7){const _0x41bf93=a0_0x1bb391;if(!_0x5669c7[_0x41bf93(0x110)]){_0x5669c7['log'][_0x41bf93(0xd1)](_0x41bf93(0xfa));return;}_0x5669c7[_0x41bf93(0x107)]['info'](_0x41bf93(0xce));try{updateApiTimestamp();const _0x3f8c19=_0x41bf93(0xa2),_0x11754e=await _0x5669c7[_0x41bf93(0x110)][_0x41bf93(0xf2)](_0x3f8c19),_0x2d8b01=_0x11754e['response'][_0x41bf93(0xea)]();_0x5669c7['log'][_0x41bf93(0xb5)]('üåÖ\x20Briefing\x20generated\x20(Length:\x20'+_0x2d8b01['length']+_0x41bf93(0xf0)),setup['sendNotification'](_0x5669c7,_0x41bf93(0xb4)+_0x2d8b01);}catch(_0x2550b4){_0x5669c7[_0x41bf93(0x107)][_0x41bf93(0xc6)](_0x41bf93(0xbf)+_0x2550b4['message']);}}function a0_0x4a1b(_0x580613,_0x1e1998){const _0x486eee=a0_0xd0d7();return a0_0x4a1b=function(_0x55ca0a,_0x94bb1d){_0x55ca0a=_0x55ca0a-0x92;let _0xd0d7b5=_0x486eee[_0x55ca0a];return _0xd0d7b5;},a0_0x4a1b(_0x580613,_0x1e1998);}module[a0_0x1bb391(0x114)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};