function a0_0x402c(){const _0x9013ca=['Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','info','approved','245yIhwhl','targetValue','Digest','constructor','error','Keine\x20Details.','LTM.processingStatus','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','5129080EFzqFb','isProVersion','baselineDrift','setStateAsync','system.presenceWho','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','currentSystemMode','isAlert','generic','toFixed','Unbekannt\x20(Kein\x20Sensor)','debug','.\x20EMERGENCY:\x20','./setup','setForeignStateAsync','isEmergency','LTM.driftAnalysis.driftDetails','Traffic-Schutz\x20(Auto-Approved)','warn','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','eventHistory','livingContext','exports','parse','driftDetails','5Zlszok','analysis.lastResult','decision','N/A\x20(Learning)','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','1707HTvIbe','LTM.rawEventLog','7342914hkuThP','sendNotification','trim','send','analysisHistory','val',',\x20Wetter:\x20','31337412yzZznv','unshift','.\x20KONTEXT:\x20','analysis.analysisHistory','LTM.driftAnalysis.lastCheck','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','5hloQZx','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','Nacht','11SEjXbi','.\x20EVENTS:\x20','ANALYZE_HEALTH','368798kZkGgm','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','stringify','dailyDigests','log','analysis.automation.autoApply','.forecast.current.temperature','response','toString','now','length','analysis.automation.targetValue','activityLevel','text','.\x20ANWESEND:\x20','âš ï¸\x20ALARM:\x20','Success','replace','@google/generative-ai','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','6736nQxWyw','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','.Current.Temperature','weatherInstance','search','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','Started...','Tag','2908566oJBEkb','(((.+)+)+)+$','automationProposal','analysis.automation.targetId','Skipped\x20(Traffic)','LTM.driftAnalysis.baselineDrift','useWeather','analysis.alertReason','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','KI-Fehler\x20(Fallback)','summary','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20',',\x20LichtverhÃ¤ltnisse:\x20','getStateAsync','getForeignStateAsync','message','analysis.automation.description','\x20=\x20','aiPersona','targetId','alertReason','generateContent','%)\x20nach\x20\x22','.Current.IsNight','ðŸŒ…\x20Morning\x20Briefing:\x0a','lastAlertState','Unbekannt','slice','config','Briefing\x20Error:\x20','\x0aSTB:\x20','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','rawEventLog','\x20->\x20','56104rhdoRh','push','apply','toLocaleTimeString','toISOString','geminiModel','analysis.activitySummary','Gemini\x20Error:\x20','\x20Ã¼bersprungen\x20(Auto-Approved).'];a0_0x402c=function(){return _0x9013ca;};return a0_0x402c();}const a0_0x197fdb=a0_0x132e;(function(_0x3ca0d6,_0x506cf2){const _0x17f75f=a0_0x132e,_0x2c2e28=_0x3ca0d6();while(!![]){try{const _0x46e977=parseInt(_0x17f75f(0x1c4))/0x1*(-parseInt(_0x17f75f(0x1de))/0x2)+-parseInt(_0x17f75f(0x1c9))/0x3*(-parseInt(_0x17f75f(0x1f2))/0x4)+parseInt(_0x17f75f(0x1d8))/0x5*(-parseInt(_0x17f75f(0x1cb))/0x6)+-parseInt(_0x17f75f(0x1a3))/0x7*(parseInt(_0x17f75f(0x21e))/0x8)+parseInt(_0x17f75f(0x1fb))/0x9+-parseInt(_0x17f75f(0x1ab))/0xa+parseInt(_0x17f75f(0x1db))/0xb*(parseInt(_0x17f75f(0x1d2))/0xc);if(_0x46e977===_0x506cf2)break;else _0x2c2e28['push'](_0x2c2e28['shift']());}catch(_0x24da42){_0x2c2e28['push'](_0x2c2e28['shift']());}}}(a0_0x402c,0xf15e4));const a0_0x1ec0c3=(function(){let _0x56808f=!![];return function(_0x4d1956,_0x1e532d){const _0x8b9a48=_0x56808f?function(){const _0x126196=a0_0x132e;if(_0x1e532d){const _0x304acf=_0x1e532d[_0x126196(0x220)](_0x4d1956,arguments);return _0x1e532d=null,_0x304acf;}}:function(){};return _0x56808f=![],_0x8b9a48;};}()),a0_0x44c86e=a0_0x1ec0c3(this,function(){const _0x3afa2c=a0_0x132e;return a0_0x44c86e[_0x3afa2c(0x1e6)]()[_0x3afa2c(0x1f6)](_0x3afa2c(0x1fc))[_0x3afa2c(0x1e6)]()[_0x3afa2c(0x1a6)](a0_0x44c86e)['search'](_0x3afa2c(0x1fc));});a0_0x44c86e();'use strict';const {GoogleGenerativeAI}=require(a0_0x197fdb(0x1f0)),setup=require(a0_0x197fdb(0x1b8)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x197fdb(0x1a9),LTM_DP_RAW_LOG=a0_0x197fdb(0x1ca),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;function a0_0x132e(_0x1eb9f5,_0x5e77fe){const _0x335159=a0_0x402c();return a0_0x132e=function(_0x44c86e,_0x1ec0c3){_0x44c86e=_0x44c86e-0x19c;let _0x402cae=_0x335159[_0x44c86e];return _0x402cae;},a0_0x132e(_0x1eb9f5,_0x5e77fe);}const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x197fdb(0x21a),'senior_aal':'PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':a0_0x197fdb(0x1be),'single_comfort':a0_0x197fdb(0x21b),'security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x197fdb(0x1aa)};function canCallApi(){const _0x22d132=a0_0x197fdb,_0x303dbf=Date[_0x22d132(0x1e7)]();return _0x303dbf-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x461b29=a0_0x197fdb;lastGlobalApiCall=Date[_0x461b29(0x1e7)]();}async function getWeatherContext(_0x5b7536){const _0x1c0dd8=a0_0x197fdb;if(!_0x5b7536[_0x1c0dd8(0x217)][_0x1c0dd8(0x201)]||!_0x5b7536[_0x1c0dd8(0x217)]['weatherInstance'])return _0x1c0dd8(0x1b5);try{const _0x41ab44=_0x5b7536[_0x1c0dd8(0x217)][_0x1c0dd8(0x1f5)];let _0x1328ff=await _0x5b7536['getForeignStateAsync'](_0x41ab44+_0x1c0dd8(0x1f4));if(!_0x1328ff)_0x1328ff=await _0x5b7536[_0x1c0dd8(0x209)](_0x41ab44+_0x1c0dd8(0x1e4));let _0xbfdef5=await _0x5b7536[_0x1c0dd8(0x209)](_0x41ab44+'.Current.WeatherText');if(!_0xbfdef5)_0xbfdef5=await _0x5b7536['getForeignStateAsync'](_0x41ab44+'.forecast.current.state');let _0x5e4a58='Unbekannt';const _0x1ef986=await _0x5b7536[_0x1c0dd8(0x209)](_0x41ab44+_0x1c0dd8(0x212));if(_0x1ef986)_0x5e4a58=_0x1ef986[_0x1c0dd8(0x1d0)]?_0x1c0dd8(0x1da):_0x1c0dd8(0x1fa);if(_0x1328ff&&_0xbfdef5)return _0x1328ff['val']+'Â°C,\x20'+_0xbfdef5[_0x1c0dd8(0x1d0)]+_0x1c0dd8(0x207)+_0x5e4a58;}catch(_0xdcb7b6){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x416a74,_0xcf05c3,_0x30deb6,_0x360c09){const _0x4cd47b=a0_0x197fdb;if(!_0x416a74[_0x4cd47b(0x19c)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x3062c4=Date['now']();if(decisionCache[_0xcf05c3]&&_0x3062c4-decisionCache[_0xcf05c3]['timestamp']<CACHE_TTL_MS){const _0x39fc1f=decisionCache[_0xcf05c3][_0x4cd47b(0x1c6)];return _0x416a74[_0x4cd47b(0x1e2)]['debug'](_0x4cd47b(0x1f7)+_0xcf05c3+_0x4cd47b(0x21d)+(_0x39fc1f[_0x4cd47b(0x1a2)]?'OK':'NO')+'\x20('+_0x39fc1f['reason']+')'),_0x39fc1f;}if(!canCallApi())return _0x416a74['log'][_0x4cd47b(0x1b6)](_0x4cd47b(0x1f1)+_0xcf05c3+_0x4cd47b(0x19f)),{'approved':!![],'reason':_0x4cd47b(0x1bc)};const _0x577d60=new Date()[_0x4cd47b(0x221)](),_0x5d8fe8=await getWeatherContext(_0x416a74),_0x1a40e3=PERSONA_MAPPING[_0x416a74[_0x4cd47b(0x217)]['aiPersona']||'generic'],_0x1c8617=_0x4cd47b(0x206)+_0x577d60+_0x4cd47b(0x1d1)+_0x5d8fe8+_0x4cd47b(0x203)+(_0x360c09*0x64)[_0x4cd47b(0x1b4)](0x0)+_0x4cd47b(0x211)+_0xcf05c3+_0x4cd47b(0x1df)+_0x30deb6+_0x4cd47b(0x1f3)+_0x1a40e3+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0xe0bcda=await _0x416a74[_0x4cd47b(0x19c)][_0x4cd47b(0x210)](_0x1c8617),_0x2e7a3e=_0xe0bcda[_0x4cd47b(0x1e5)][_0x4cd47b(0x1eb)]()[_0x4cd47b(0x1ef)](/```json|```/g,'')['trim'](),_0x6bb7af=JSON[_0x4cd47b(0x1c2)](_0x2e7a3e);return decisionCache[_0xcf05c3]={'decision':_0x6bb7af,'timestamp':_0x3062c4},_0x6bb7af;}catch(_0x3ffc50){return _0x416a74[_0x4cd47b(0x1e2)][_0x4cd47b(0x1bd)](_0x4cd47b(0x1b0)+_0x3ffc50[_0x4cd47b(0x20a)]),decisionCache[_0xcf05c3]={'decision':{'approved':!![],'reason':_0x4cd47b(0x204)},'timestamp':_0x3062c4-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x1bdef9,_0x4a6f8a=''){const _0x1ceb8f=a0_0x197fdb;if(!_0x1bdef9[_0x1ceb8f(0x19c)])return;if(!canCallApi()){_0x1bdef9['log'][_0x1ceb8f(0x1b6)]('ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x1bdef9[_0x1ceb8f(0x1bf)][_0x1ceb8f(0x1e8)]===0x0)return;const _0x5c58bc=_0x1bdef9[_0x1ceb8f(0x1bf)][_0x1ceb8f(0x216)](0x0,0xf),_0x102ca7=_0x1bdef9[_0x1ceb8f(0x1b1)],_0x235e92=PERSONA_MAPPING[_0x1bdef9[_0x1ceb8f(0x217)][_0x1ceb8f(0x20d)]||_0x1ceb8f(0x1b3)],_0x3c0366=_0x1bdef9[_0x1ceb8f(0x217)][_0x1ceb8f(0x1c0)]||_0x1ceb8f(0x1a8);let _0x1bdd9b=_0x1ceb8f(0x215);try{const _0x21b41a=await _0x1bdef9[_0x1ceb8f(0x208)](_0x1ceb8f(0x1af));if(_0x21b41a&&_0x21b41a[_0x1ceb8f(0x1d0)])_0x1bdd9b=_0x21b41a[_0x1ceb8f(0x1d0)];}catch(_0x187299){}let _0x2c40bd=![];try{const _0x46c767=await _0x1bdef9[_0x1ceb8f(0x208)](_0x1ceb8f(0x1e3));if(_0x46c767&&_0x46c767[_0x1ceb8f(0x1d0)])_0x2c40bd=!![];}catch(_0x576479){}const _0x5a8387='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x235e92+_0x1ceb8f(0x1d4)+_0x3c0366+'.\x20SYSTEM_MODE:\x20'+_0x102ca7+_0x1ceb8f(0x1ec)+_0x1bdd9b+_0x1ceb8f(0x1dc)+JSON[_0x1ceb8f(0x1e0)](_0x5c58bc)+_0x1ceb8f(0x1b7)+_0x4a6f8a+_0x1ceb8f(0x1c8);try{updateApiTimestamp();const _0x2ec5e3=await _0x1bdef9[_0x1ceb8f(0x19c)][_0x1ceb8f(0x210)](_0x5a8387),_0x2131cc=JSON['parse'](_0x2ec5e3['response']['text']()[_0x1ceb8f(0x1ef)](/```json|```/g,'')[_0x1ceb8f(0x1cd)]());await _0x1bdef9['setStateAsync'](_0x1ceb8f(0x1c5),{'val':JSON['stringify'](_0x2131cc),'ack':!![]});if(_0x2131cc['summary'])await _0x1bdef9[_0x1ceb8f(0x1ae)](_0x1ceb8f(0x19d),{'val':_0x2131cc[_0x1ceb8f(0x205)],'ack':!![]});const _0xcf4267={'timestamp':Date['now'](),'id':Date['now']()[_0x1ceb8f(0x1e6)](),'analysis':{'activity':{'summary':_0x2131cc['summary'],'isAlert':_0x2131cc['isAlert'],'alertReason':_0x2131cc[_0x1ceb8f(0x20f)]},'comfort':{'automationProposal':_0x2131cc[_0x1ceb8f(0x1fd)]}}};_0x1bdef9[_0x1ceb8f(0x1cf)][_0x1ceb8f(0x1d3)](_0xcf4267);if(_0x1bdef9[_0x1ceb8f(0x1cf)][_0x1ceb8f(0x1e8)]>0x32)_0x1bdef9['analysisHistory']['pop']();await _0x1bdef9[_0x1ceb8f(0x1ae)](_0x1ceb8f(0x1d5),{'val':JSON[_0x1ceb8f(0x1e0)](_0x1bdef9[_0x1ceb8f(0x1cf)]),'ack':!![]});const _0x4d4fe6=_0x2131cc[_0x1ceb8f(0x1b2)]||![];_0x4d4fe6!==_0x1bdef9[_0x1ceb8f(0x214)]&&(await _0x1bdef9[_0x1ceb8f(0x1ae)]('analysis.isAlert',{'val':_0x4d4fe6,'ack':!![]}),_0x1bdef9['lastAlertState']=_0x4d4fe6,_0x4d4fe6&&(await _0x1bdef9[_0x1ceb8f(0x1ae)](_0x1ceb8f(0x202),{'val':_0x2131cc[_0x1ceb8f(0x20f)],'ack':!![]}),setup[_0x1ceb8f(0x1cc)](_0x1bdef9,_0x1ceb8f(0x1ed)+_0x2131cc['alertReason'],![],_0x2131cc[_0x1ceb8f(0x1ba)])));if(_0x2131cc[_0x1ceb8f(0x1fd)]&&_0x2131cc[_0x1ceb8f(0x1fd)]['detected']){await _0x1bdef9[_0x1ceb8f(0x1ae)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x1bdef9[_0x1ceb8f(0x1ae)](_0x1ceb8f(0x20b),{'val':_0x2131cc[_0x1ceb8f(0x1fd)]['description'],'ack':!![]}),await _0x1bdef9[_0x1ceb8f(0x1ae)](_0x1ceb8f(0x1fe),{'val':_0x2131cc[_0x1ceb8f(0x1fd)][_0x1ceb8f(0x20e)],'ack':!![]}),await _0x1bdef9['setStateAsync'](_0x1ceb8f(0x1e9),{'val':JSON[_0x1ceb8f(0x1e0)](_0x2131cc[_0x1ceb8f(0x1fd)][_0x1ceb8f(0x1a4)]),'ack':!![]});if(_0x2c40bd)executeAutomationAction(_0x1bdef9);}}catch(_0x7c231f){_0x1bdef9['log'][_0x1ceb8f(0x1a7)](_0x1ceb8f(0x19e)+_0x7c231f[_0x1ceb8f(0x20a)]);}}async function createDailyDigest(_0x286c50,_0x2daa39){const _0x3181f9=a0_0x197fdb;if(!_0x286c50[_0x3181f9(0x1ac)])return;if(!canCallApi()){await _0x286c50[_0x3181f9(0x1ae)](LTM_DP_STATUS,{'val':_0x3181f9(0x1ff),'ack':!![]});return;}await _0x286c50[_0x3181f9(0x1ae)](LTM_DP_STATUS,{'val':_0x3181f9(0x1f9),'ack':!![]});if(!_0x286c50['geminiModel']||_0x286c50[_0x3181f9(0x21c)][_0x3181f9(0x1e8)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x286c50[_0x3181f9(0x1ae)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x1c2802=JSON[_0x3181f9(0x1c2)](JSON[_0x3181f9(0x1e0)](_0x286c50[_0x3181f9(0x21c)])),_0x49462f=_0x1c2802[_0x3181f9(0x1e8)],_0x1a1da0=_0x3181f9(0x1d9)+JSON['stringify'](_0x1c2802);try{updateApiTimestamp();const _0x5d12e6=await _0x286c50[_0x3181f9(0x19c)][_0x3181f9(0x210)](_0x1a1da0),_0x2ba6ea=JSON[_0x3181f9(0x1c2)](_0x5d12e6[_0x3181f9(0x1e5)]['text']()['replace'](/```json|```/g,'')['trim']()),_0x10db9b={'timestamp':new Date()[_0x3181f9(0x222)](),'eventCount':_0x49462f,'summary':_0x2ba6ea[_0x3181f9(0x205)]||_0x3181f9(0x1a5),'activityLevel':_0x2ba6ea[_0x3181f9(0x1ea)]||'normal','systemMode':_0x286c50[_0x3181f9(0x1b1)]};_0x286c50['dailyDigests'][_0x3181f9(0x21f)](_0x10db9b);const _0x35608a=_0x286c50[_0x3181f9(0x217)]['ltmLtbWindowDays']||0x3c;_0x286c50[_0x3181f9(0x1e1)][_0x3181f9(0x1e8)]>_0x35608a&&_0x286c50[_0x3181f9(0x1e1)]['splice'](0x0,_0x286c50[_0x3181f9(0x1e1)][_0x3181f9(0x1e8)]-_0x35608a);await _0x286c50[_0x3181f9(0x1ae)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x3181f9(0x1e0)](_0x286c50[_0x3181f9(0x1e1)]),'ack':!![]}),_0x286c50[_0x3181f9(0x21c)]=[],await _0x286c50[_0x3181f9(0x1ae)](LTM_DP_RAW_LOG,{'val':JSON[_0x3181f9(0x1e0)](_0x286c50[_0x3181f9(0x21c)]),'ack':!![]}),await _0x286c50[_0x3181f9(0x1ae)](LTM_DP_STATUS,{'val':_0x3181f9(0x1ee),'ack':!![]});if(_0x286c50[_0x3181f9(0x1ac)]&&_0x2daa39)_0x2daa39[_0x3181f9(0x1ce)](_0x286c50,_0x3181f9(0x1dd),{'digest':_0x10db9b});}catch(_0x47eb16){_0x286c50[_0x3181f9(0x1e2)][_0x3181f9(0x1a7)](_0x47eb16[_0x3181f9(0x20a)]);}}async function runBaselineDriftAnalysis(_0x1f2c5e){const _0x11cd00=a0_0x197fdb;if(!_0x1f2c5e[_0x11cd00(0x1ac)]||!_0x1f2c5e[_0x11cd00(0x19c)])return;if(!canCallApi())return;const _0x1d4381=_0x1f2c5e[_0x11cd00(0x217)]['ltmStbWindowDays']||0xe;if(_0x1f2c5e['dailyDigests'][_0x11cd00(0x1e8)]<_0x1d4381+0x7){await _0x1f2c5e[_0x11cd00(0x1ae)](_0x11cd00(0x200),{'val':_0x11cd00(0x1c7),'ack':!![]});return;}const _0x1e5ceb=_0x1f2c5e[_0x11cd00(0x1e1)][_0x11cd00(0x216)](-_0x1d4381),_0x2cc084=_0x1f2c5e[_0x11cd00(0x1e1)][_0x11cd00(0x216)](0x0,_0x1f2c5e[_0x11cd00(0x1e1)][_0x11cd00(0x1e8)]-_0x1d4381),_0x176da3='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x11cd00(0x1e0)](_0x2cc084)+_0x11cd00(0x219)+JSON['stringify'](_0x1e5ceb);try{updateApiTimestamp();const _0x3b2122=await _0x1f2c5e['geminiModel'][_0x11cd00(0x210)](_0x176da3),_0x3a94f2=JSON['parse'](_0x3b2122[_0x11cd00(0x1e5)][_0x11cd00(0x1eb)]()['replace'](/```json|```/g,'')[_0x11cd00(0x1cd)]());_0x3a94f2[_0x11cd00(0x1ad)]&&(await _0x1f2c5e['setStateAsync']('LTM.driftAnalysis.baselineDrift',{'val':_0x3a94f2[_0x11cd00(0x1ad)],'ack':!![]}),await _0x1f2c5e[_0x11cd00(0x1ae)](_0x11cd00(0x1bb),{'val':_0x3a94f2[_0x11cd00(0x1c3)],'ack':!![]}),await _0x1f2c5e[_0x11cd00(0x1ae)](_0x11cd00(0x1d6),{'val':Date[_0x11cd00(0x1e7)](),'ack':!![]}));}catch(_0x48441d){}}async function executeAutomationAction(_0x46cff1){const _0x124d1=a0_0x197fdb;try{const _0x5c1535=await _0x46cff1[_0x124d1(0x208)](_0x124d1(0x1fe)),_0x39301a=await _0x46cff1[_0x124d1(0x208)](_0x124d1(0x1e9));if(_0x5c1535&&_0x5c1535[_0x124d1(0x1d0)]&&_0x39301a){const _0x5dcd62=_0x5c1535[_0x124d1(0x1d0)];let _0x3f7b8f=_0x39301a[_0x124d1(0x1d0)];try{_0x3f7b8f=JSON[_0x124d1(0x1c2)](_0x3f7b8f);}catch(_0x5cc67a){}_0x46cff1[_0x124d1(0x1e2)][_0x124d1(0x1a1)](_0x124d1(0x1f8)+_0x5dcd62+_0x124d1(0x20c)+_0x3f7b8f),await _0x46cff1[_0x124d1(0x1b9)](_0x5dcd62,_0x3f7b8f);}else _0x46cff1[_0x124d1(0x1e2)][_0x124d1(0x1bd)](_0x124d1(0x1d7));}catch(_0x2ea08f){_0x46cff1[_0x124d1(0x1e2)]['error']('BUTLER\x20Execution\x20Error:\x20'+_0x2ea08f[_0x124d1(0x20a)]);}}async function sendMorningBriefing(_0x29ecdb){const _0x36667b=a0_0x197fdb;if(!_0x29ecdb[_0x36667b(0x19c)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x14a850=_0x36667b(0x1a0),_0x1fb83e=await _0x29ecdb[_0x36667b(0x19c)]['generateContent'](_0x14a850),_0x3b3183=_0x1fb83e[_0x36667b(0x1e5)][_0x36667b(0x1eb)]();setup['sendNotification'](_0x29ecdb,_0x36667b(0x213)+_0x3b3183);}catch(_0x5af64a){_0x29ecdb['log'][_0x36667b(0x1a7)](_0x36667b(0x218)+_0x5af64a[_0x36667b(0x20a)]);}}module[a0_0x197fdb(0x1c1)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};