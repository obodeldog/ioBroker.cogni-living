const a0_0x1de0f1=a0_0x2dae;(function(_0x2c954c,_0x3e75ae){const _0x3ac4e5=a0_0x2dae,_0x30d7cb=_0x2c954c();while(!![]){try{const _0x33a39b=parseInt(_0x3ac4e5(0x1d4))/0x1*(parseInt(_0x3ac4e5(0x1bd))/0x2)+parseInt(_0x3ac4e5(0x1ed))/0x3*(parseInt(_0x3ac4e5(0x234))/0x4)+-parseInt(_0x3ac4e5(0x22f))/0x5+parseInt(_0x3ac4e5(0x1c5))/0x6*(-parseInt(_0x3ac4e5(0x236))/0x7)+parseInt(_0x3ac4e5(0x1ce))/0x8+parseInt(_0x3ac4e5(0x1cf))/0x9*(-parseInt(_0x3ac4e5(0x22d))/0xa)+-parseInt(_0x3ac4e5(0x218))/0xb*(-parseInt(_0x3ac4e5(0x200))/0xc);if(_0x33a39b===_0x3e75ae)break;else _0x30d7cb['push'](_0x30d7cb['shift']());}catch(_0x4fe369){_0x30d7cb['push'](_0x30d7cb['shift']());}}}(a0_0x3188,0xac162));const a0_0xdd901d=(function(){let _0x204efa=!![];return function(_0x12fc84,_0x594cbb){const _0xbbacf4=_0x204efa?function(){const _0x34e917=a0_0x2dae;if(_0x594cbb){const _0x116e58=_0x594cbb[_0x34e917(0x1e2)](_0x12fc84,arguments);return _0x594cbb=null,_0x116e58;}}:function(){};return _0x204efa=![],_0xbbacf4;};}()),a0_0x5a982c=a0_0xdd901d(this,function(){const _0x3acf9c=a0_0x2dae;return a0_0x5a982c[_0x3acf9c(0x225)]()[_0x3acf9c(0x1e5)](_0x3acf9c(0x1f3))[_0x3acf9c(0x225)]()[_0x3acf9c(0x21e)](a0_0x5a982c)[_0x3acf9c(0x1e5)](_0x3acf9c(0x1f3));});a0_0x5a982c();'use strict';const {GoogleGenerativeAI}=require(a0_0x1de0f1(0x1dc)),setup=require(a0_0x1de0f1(0x221)),GEMINI_MODEL=a0_0x1de0f1(0x21c),LTM_DP_DAILY_DIGESTS=a0_0x1de0f1(0x1b7),LTM_DP_STATUS=a0_0x1de0f1(0x1d9),LTM_DP_RAW_LOG=a0_0x1de0f1(0x1c4),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x1de0f1(0x1d1),'senior_aal':a0_0x1de0f1(0x1c8),'family':'Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':a0_0x1de0f1(0x1fb),'energy_saver':'PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'};function canCallApi(){const _0x36ae74=Date['now']();return _0x36ae74-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}function a0_0x2dae(_0x392491,_0x29607f){const _0x1e1f96=a0_0x3188();return a0_0x2dae=function(_0x5a982c,_0xdd901d){_0x5a982c=_0x5a982c-0x1b2;let _0x318806=_0x1e1f96[_0x5a982c];return _0x318806;},a0_0x2dae(_0x392491,_0x29607f);}async function getWeatherContext(_0x125285){const _0x37c3c0=a0_0x1de0f1;if(!_0x125285[_0x37c3c0(0x20a)][_0x37c3c0(0x1d6)]||!_0x125285[_0x37c3c0(0x20a)][_0x37c3c0(0x1c3)])return _0x37c3c0(0x1cd);try{const _0x33ccc0=_0x125285['config'][_0x37c3c0(0x1c3)];let _0x2332c2=await _0x125285['getForeignStateAsync'](_0x33ccc0+_0x37c3c0(0x1f6));if(!_0x2332c2)_0x2332c2=await _0x125285['getForeignStateAsync'](_0x33ccc0+_0x37c3c0(0x238));let _0x4d6cb1=await _0x125285['getForeignStateAsync'](_0x33ccc0+_0x37c3c0(0x217));if(!_0x4d6cb1)_0x4d6cb1=await _0x125285['getForeignStateAsync'](_0x33ccc0+_0x37c3c0(0x1e8));let _0x328fb4='Unbekannt';const _0x54d9b3=await _0x125285[_0x37c3c0(0x231)](_0x33ccc0+_0x37c3c0(0x1dd));if(_0x54d9b3)_0x328fb4=_0x54d9b3['val']?_0x37c3c0(0x229):_0x37c3c0(0x1e3);if(_0x2332c2&&_0x4d6cb1)return _0x2332c2[_0x37c3c0(0x1eb)]+'Â°C,\x20'+_0x4d6cb1['val']+_0x37c3c0(0x1de)+_0x328fb4;}catch(_0x132ccc){}return _0x37c3c0(0x1e7);}function a0_0x3188(){const _0x51f65b=['LTM.driftAnalysis.lastCheck','targetValue','Gemini\x20Error:\x20','analysis.automation.description','Unbekannt\x20(Kein\x20Sensor)','6678024pOPMAF','18EQLhdo','analysisHistory','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','Unbekannt','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','16372qUZIrT','debug','useWeather','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','activityLevel','LTM.processingStatus','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','info','@google/generative-ai','.Current.IsNight',',\x20LichtverhÃ¤ltnisse:\x20','splice','setForeignStateAsync','isProVersion','apply','Tag','âš ï¸\x20ALARM:\x20','search',',\x20Wetter:\x20','Wetterdaten\x20nicht\x20abrufbar','.forecast.current.state','aiPersona','stringify','val','Keine\x20Details.','11589gpxSFH','\x0aSTB:\x20','decision','normal','toFixed','Success','(((.+)+)+)+$','toISOString','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','.Current.Temperature','Skipped\x20(Traffic)','approved','N/A\x20(Learning)','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','Sicherheit\x20geht\x20vor.','setStateAsync','Digest','KI-Fehler\x20(Fallback)','message','192ydTJFW','generateContent','generic','summary','log','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','now','toLocaleTimeString','analysis.automation.targetValue','rawEventLog','config','timestamp','text','push','driftDetails','analysis.isAlert','response','Traffic-Schutz\x20(Auto-Approved)','geminiModel','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','slice','getStateAsync','ltmLtbWindowDays','.Current.WeatherText','1037014jnFTEF','targetId','\x20Ã¼bersprungen\x20(Auto-Approved).','analysis.automation.targetId','models/gemini-flash-latest','alertReason','constructor','analysis.lastResult','Started...','./setup','system.presenceWho','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','.\x20ANWESEND:\x20','toString','automationProposal','baselineDrift','exports','Nacht','isAlert','length','detected','5641330ncTWrb','\x20=\x20','2063605sPXftg','LTM.driftAnalysis.driftDetails','getForeignStateAsync','replace','LTM.driftAnalysis.baselineDrift','612WFxxwq','ltmStbWindowDays','21ZnNnzz','sendNotification','.forecast.current.temperature','currentSystemMode','send','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','trim','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','%)\x20nach\x20\x22','LTM.dailyDigests','dailyDigests','parse','reason','\x20->\x20','analysis.activitySummary','60BXhuGa','ANALYZE_HEALTH','lastAlertState','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','eventHistory','.\x20EMERGENCY:\x20','weatherInstance','LTM.rawEventLog','2358966JjWYYu','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','error','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.'];a0_0x3188=function(){return _0x51f65b;};return a0_0x3188();}async function consultButler(_0x391342,_0x510425,_0x53a33e,_0x161b6f){const _0x21ffc8=a0_0x1de0f1;if(!_0x391342[_0x21ffc8(0x212)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x393a2d=Date[_0x21ffc8(0x206)]();if(decisionCache[_0x510425]&&_0x393a2d-decisionCache[_0x510425][_0x21ffc8(0x20b)]<CACHE_TTL_MS){const _0x58a82c=decisionCache[_0x510425][_0x21ffc8(0x1ef)];return _0x391342[_0x21ffc8(0x204)][_0x21ffc8(0x1d5)](_0x21ffc8(0x1b5)+_0x510425+_0x21ffc8(0x1bb)+(_0x58a82c[_0x21ffc8(0x1f8)]?'OK':'NO')+'\x20('+_0x58a82c[_0x21ffc8(0x1ba)]+')'),_0x58a82c;}if(!canCallApi())return _0x391342['log'][_0x21ffc8(0x1d5)]('ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20'+_0x510425+_0x21ffc8(0x21a)),{'approved':!![],'reason':_0x21ffc8(0x211)};const _0x5cc79c=new Date()[_0x21ffc8(0x207)](),_0x4b8fde=await getWeatherContext(_0x391342),_0x49753a=PERSONA_MAPPING[_0x391342['config'][_0x21ffc8(0x1e9)]||'generic'],_0x38bce1=_0x21ffc8(0x1f5)+_0x5cc79c+_0x21ffc8(0x1e6)+_0x4b8fde+_0x21ffc8(0x1d7)+(_0x161b6f*0x64)[_0x21ffc8(0x1f1)](0x0)+_0x21ffc8(0x1b6)+_0x510425+_0x21ffc8(0x1c6)+_0x53a33e+_0x21ffc8(0x1fa)+_0x49753a+_0x21ffc8(0x1d3);try{updateApiTimestamp();const _0x1e0268=await _0x391342[_0x21ffc8(0x212)]['generateContent'](_0x38bce1),_0x5da7dc=_0x1e0268[_0x21ffc8(0x210)][_0x21ffc8(0x20c)]()[_0x21ffc8(0x232)](/```json|```/g,'')[_0x21ffc8(0x1b4)](),_0x3742b0=JSON[_0x21ffc8(0x1b9)](_0x5da7dc);return decisionCache[_0x510425]={'decision':_0x3742b0,'timestamp':_0x393a2d},_0x3742b0;}catch(_0x4c52cc){return _0x391342[_0x21ffc8(0x204)]['warn'](_0x21ffc8(0x223)+_0x4c52cc[_0x21ffc8(0x1ff)]),decisionCache[_0x510425]={'decision':{'approved':!![],'reason':_0x21ffc8(0x1fe)},'timestamp':_0x393a2d-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x21ffc8(0x1fe)};}}async function runGeminiAnalysis(_0x50013f,_0x243c34=''){const _0x4445e1=a0_0x1de0f1;if(!_0x50013f[_0x4445e1(0x212)])return;if(!canCallApi()){_0x50013f['log'][_0x4445e1(0x1d5)]('ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x50013f[_0x4445e1(0x1c1)][_0x4445e1(0x22b)]===0x0)return;const _0x4a88e4=_0x50013f[_0x4445e1(0x1c1)][_0x4445e1(0x214)](0x0,0xf),_0x41a651=_0x50013f[_0x4445e1(0x239)],_0x25a53c=PERSONA_MAPPING[_0x50013f[_0x4445e1(0x20a)][_0x4445e1(0x1e9)]||_0x4445e1(0x202)],_0x567abf=_0x50013f[_0x4445e1(0x20a)]['livingContext']||_0x4445e1(0x1ec);let _0x28df92=_0x4445e1(0x1d2);try{const _0x5a1841=await _0x50013f['getStateAsync'](_0x4445e1(0x222));if(_0x5a1841&&_0x5a1841[_0x4445e1(0x1eb)])_0x28df92=_0x5a1841[_0x4445e1(0x1eb)];}catch(_0x5a37c2){}let _0x5b3b96=![];try{const _0x5dea0f=await _0x50013f['getStateAsync']('analysis.automation.autoApply');if(_0x5dea0f&&_0x5dea0f[_0x4445e1(0x1eb)])_0x5b3b96=!![];}catch(_0x507a7d){}const _0x5bb348='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x25a53c+'.\x20KONTEXT:\x20'+_0x567abf+'.\x20SYSTEM_MODE:\x20'+_0x41a651+_0x4445e1(0x224)+_0x28df92+'.\x20EVENTS:\x20'+JSON[_0x4445e1(0x1ea)](_0x4a88e4)+_0x4445e1(0x1c2)+_0x243c34+_0x4445e1(0x1da);try{updateApiTimestamp();const _0x302692=await _0x50013f[_0x4445e1(0x212)][_0x4445e1(0x201)](_0x5bb348),_0x22cfa6=JSON[_0x4445e1(0x1b9)](_0x302692[_0x4445e1(0x210)][_0x4445e1(0x20c)]()[_0x4445e1(0x232)](/```json|```/g,'')['trim']());await _0x50013f['setStateAsync'](_0x4445e1(0x21f),{'val':JSON[_0x4445e1(0x1ea)](_0x22cfa6),'ack':!![]});if(_0x22cfa6[_0x4445e1(0x203)])await _0x50013f[_0x4445e1(0x1fc)](_0x4445e1(0x1bc),{'val':_0x22cfa6['summary'],'ack':!![]});const _0x1de44b={'timestamp':Date['now'](),'id':Date[_0x4445e1(0x206)]()['toString'](),'analysis':{'activity':{'summary':_0x22cfa6[_0x4445e1(0x203)],'isAlert':_0x22cfa6[_0x4445e1(0x22a)],'alertReason':_0x22cfa6['alertReason']},'comfort':{'automationProposal':_0x22cfa6[_0x4445e1(0x226)]}}};_0x50013f[_0x4445e1(0x1d0)]['unshift'](_0x1de44b);if(_0x50013f[_0x4445e1(0x1d0)]['length']>0x32)_0x50013f[_0x4445e1(0x1d0)]['pop']();await _0x50013f[_0x4445e1(0x1fc)]('analysis.analysisHistory',{'val':JSON[_0x4445e1(0x1ea)](_0x50013f['analysisHistory']),'ack':!![]});const _0x99135c=_0x22cfa6['isAlert']||![];_0x99135c!==_0x50013f[_0x4445e1(0x1bf)]&&(await _0x50013f[_0x4445e1(0x1fc)](_0x4445e1(0x20f),{'val':_0x99135c,'ack':!![]}),_0x50013f[_0x4445e1(0x1bf)]=_0x99135c,_0x99135c&&(await _0x50013f[_0x4445e1(0x1fc)]('analysis.alertReason',{'val':_0x22cfa6[_0x4445e1(0x21d)],'ack':!![]}),setup[_0x4445e1(0x237)](_0x50013f,_0x4445e1(0x1e4)+_0x22cfa6['alertReason'],![],_0x22cfa6['isEmergency'])));if(_0x22cfa6[_0x4445e1(0x226)]&&_0x22cfa6[_0x4445e1(0x226)][_0x4445e1(0x22c)]){await _0x50013f[_0x4445e1(0x1fc)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x50013f[_0x4445e1(0x1fc)](_0x4445e1(0x1cc),{'val':_0x22cfa6['automationProposal']['description'],'ack':!![]}),await _0x50013f[_0x4445e1(0x1fc)]('analysis.automation.targetId',{'val':_0x22cfa6[_0x4445e1(0x226)][_0x4445e1(0x219)],'ack':!![]}),await _0x50013f[_0x4445e1(0x1fc)](_0x4445e1(0x208),{'val':JSON[_0x4445e1(0x1ea)](_0x22cfa6[_0x4445e1(0x226)][_0x4445e1(0x1ca)]),'ack':!![]});if(_0x5b3b96)executeAutomationAction(_0x50013f);}}catch(_0x159e58){_0x50013f[_0x4445e1(0x204)][_0x4445e1(0x1c7)](_0x4445e1(0x1cb)+_0x159e58[_0x4445e1(0x1ff)]);}}async function createDailyDigest(_0x7653d8,_0x4663a6){const _0x442b1d=a0_0x1de0f1;if(!_0x7653d8['isProVersion'])return;if(!canCallApi()){await _0x7653d8[_0x442b1d(0x1fc)](LTM_DP_STATUS,{'val':_0x442b1d(0x1f7),'ack':!![]});return;}await _0x7653d8[_0x442b1d(0x1fc)](LTM_DP_STATUS,{'val':_0x442b1d(0x220),'ack':!![]});if(!_0x7653d8[_0x442b1d(0x212)]||_0x7653d8[_0x442b1d(0x209)][_0x442b1d(0x22b)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x7653d8['setStateAsync'](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x17221a=JSON['parse'](JSON[_0x442b1d(0x1ea)](_0x7653d8[_0x442b1d(0x209)])),_0x5731b0=_0x17221a[_0x442b1d(0x22b)],_0x356c5c=_0x442b1d(0x1b3)+JSON['stringify'](_0x17221a);try{updateApiTimestamp();const _0x5d136b=await _0x7653d8[_0x442b1d(0x212)]['generateContent'](_0x356c5c),_0x506337=JSON[_0x442b1d(0x1b9)](_0x5d136b[_0x442b1d(0x210)][_0x442b1d(0x20c)]()[_0x442b1d(0x232)](/```json|```/g,'')['trim']()),_0xf2ecfb={'timestamp':new Date()[_0x442b1d(0x1f4)](),'eventCount':_0x5731b0,'summary':_0x506337[_0x442b1d(0x203)]||_0x442b1d(0x1fd),'activityLevel':_0x506337[_0x442b1d(0x1d8)]||_0x442b1d(0x1f0),'systemMode':_0x7653d8[_0x442b1d(0x239)]};_0x7653d8[_0x442b1d(0x1b8)][_0x442b1d(0x20d)](_0xf2ecfb);const _0xf735b4=_0x7653d8['config'][_0x442b1d(0x216)]||0x3c;_0x7653d8[_0x442b1d(0x1b8)][_0x442b1d(0x22b)]>_0xf735b4&&_0x7653d8[_0x442b1d(0x1b8)][_0x442b1d(0x1df)](0x0,_0x7653d8[_0x442b1d(0x1b8)][_0x442b1d(0x22b)]-_0xf735b4);await _0x7653d8[_0x442b1d(0x1fc)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x442b1d(0x1ea)](_0x7653d8['dailyDigests']),'ack':!![]}),_0x7653d8['rawEventLog']=[],await _0x7653d8['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x442b1d(0x1ea)](_0x7653d8['rawEventLog']),'ack':!![]}),await _0x7653d8[_0x442b1d(0x1fc)](LTM_DP_STATUS,{'val':_0x442b1d(0x1f2),'ack':!![]});if(_0x7653d8[_0x442b1d(0x1e1)]&&_0x4663a6)_0x4663a6[_0x442b1d(0x1b2)](_0x7653d8,_0x442b1d(0x1be),{'digest':_0xf2ecfb});}catch(_0x32a02e){_0x7653d8[_0x442b1d(0x204)][_0x442b1d(0x1c7)](_0x32a02e[_0x442b1d(0x1ff)]);}}async function runBaselineDriftAnalysis(_0x31e9a8){const _0x8590a5=a0_0x1de0f1;if(!_0x31e9a8['isProVersion']||!_0x31e9a8[_0x8590a5(0x212)])return;if(!canCallApi())return;const _0x2ceec9=_0x31e9a8[_0x8590a5(0x20a)][_0x8590a5(0x235)]||0xe;if(_0x31e9a8[_0x8590a5(0x1b8)][_0x8590a5(0x22b)]<_0x2ceec9+0x7){await _0x31e9a8[_0x8590a5(0x1fc)](_0x8590a5(0x233),{'val':_0x8590a5(0x1f9),'ack':!![]});return;}const _0x5357b7=_0x31e9a8['dailyDigests'][_0x8590a5(0x214)](-_0x2ceec9),_0x1cf6ed=_0x31e9a8[_0x8590a5(0x1b8)][_0x8590a5(0x214)](0x0,_0x31e9a8['dailyDigests']['length']-_0x2ceec9),_0x2e5015=_0x8590a5(0x213)+JSON['stringify'](_0x1cf6ed)+_0x8590a5(0x1ee)+JSON[_0x8590a5(0x1ea)](_0x5357b7);try{updateApiTimestamp();const _0x14fd3b=await _0x31e9a8[_0x8590a5(0x212)][_0x8590a5(0x201)](_0x2e5015),_0x29a9d9=JSON['parse'](_0x14fd3b[_0x8590a5(0x210)][_0x8590a5(0x20c)]()['replace'](/```json|```/g,'')[_0x8590a5(0x1b4)]());_0x29a9d9[_0x8590a5(0x227)]&&(await _0x31e9a8[_0x8590a5(0x1fc)](_0x8590a5(0x233),{'val':_0x29a9d9['baselineDrift'],'ack':!![]}),await _0x31e9a8[_0x8590a5(0x1fc)](_0x8590a5(0x230),{'val':_0x29a9d9[_0x8590a5(0x20e)],'ack':!![]}),await _0x31e9a8[_0x8590a5(0x1fc)](_0x8590a5(0x1c9),{'val':Date['now'](),'ack':!![]}));}catch(_0x1f6014){}}async function executeAutomationAction(_0x577118){const _0xda63e0=a0_0x1de0f1;try{const _0x41b528=await _0x577118[_0xda63e0(0x215)](_0xda63e0(0x21b)),_0x115c90=await _0x577118['getStateAsync'](_0xda63e0(0x208));if(_0x41b528&&_0x41b528[_0xda63e0(0x1eb)]&&_0x115c90){const _0x5344a0=_0x41b528['val'];let _0x5ebe7a=_0x115c90[_0xda63e0(0x1eb)];try{_0x5ebe7a=JSON[_0xda63e0(0x1b9)](_0x5ebe7a);}catch(_0x4a0daf){}_0x577118[_0xda63e0(0x204)][_0xda63e0(0x1db)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x5344a0+_0xda63e0(0x22e)+_0x5ebe7a),await _0x577118[_0xda63e0(0x1e0)](_0x5344a0,_0x5ebe7a);}else _0x577118[_0xda63e0(0x204)]['warn'](_0xda63e0(0x1c0));}catch(_0x20743e){_0x577118[_0xda63e0(0x204)][_0xda63e0(0x1c7)]('BUTLER\x20Execution\x20Error:\x20'+_0x20743e[_0xda63e0(0x1ff)]);}}async function sendMorningBriefing(_0x59e31c){const _0x3ef025=a0_0x1de0f1;if(!_0x59e31c[_0x3ef025(0x212)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x3eeedc=_0x3ef025(0x205),_0x115f83=await _0x59e31c[_0x3ef025(0x212)][_0x3ef025(0x201)](_0x3eeedc),_0x2af41d=_0x115f83['response'][_0x3ef025(0x20c)]();setup[_0x3ef025(0x237)](_0x59e31c,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x2af41d);}catch(_0xa3e103){_0x59e31c[_0x3ef025(0x204)][_0x3ef025(0x1c7)]('Briefing\x20Error:\x20'+_0xa3e103['message']);}}module[a0_0x1de0f1(0x228)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};