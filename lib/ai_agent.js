const a0_0x17da40=a0_0x562c;(function(_0x1c65d0,_0x26b850){const _0x416f7a=a0_0x562c,_0x389aa6=_0x1c65d0();while(!![]){try{const _0x290116=-parseInt(_0x416f7a(0x21e))/0x1*(-parseInt(_0x416f7a(0x219))/0x2)+parseInt(_0x416f7a(0x1ca))/0x3+-parseInt(_0x416f7a(0x1f9))/0x4+parseInt(_0x416f7a(0x1c6))/0x5+parseInt(_0x416f7a(0x1e1))/0x6*(parseInt(_0x416f7a(0x1d1))/0x7)+parseInt(_0x416f7a(0x1fa))/0x8*(-parseInt(_0x416f7a(0x1d2))/0x9)+parseInt(_0x416f7a(0x1d0))/0xa*(-parseInt(_0x416f7a(0x1d4))/0xb);if(_0x290116===_0x26b850)break;else _0x389aa6['push'](_0x389aa6['shift']());}catch(_0x4c9950){_0x389aa6['push'](_0x389aa6['shift']());}}}(a0_0x2398,0x6a023));const a0_0x9b2f22=(function(){let _0x1ad9a3=!![];return function(_0x20b92b,_0x12358b){const _0x1ef9b0=_0x1ad9a3?function(){if(_0x12358b){const _0x18c121=_0x12358b['apply'](_0x20b92b,arguments);return _0x12358b=null,_0x18c121;}}:function(){};return _0x1ad9a3=![],_0x1ef9b0;};}()),a0_0x35c908=a0_0x9b2f22(this,function(){const _0xa334f0=a0_0x562c;return a0_0x35c908[_0xa334f0(0x21c)]()[_0xa334f0(0x230)](_0xa334f0(0x1dd))[_0xa334f0(0x21c)]()['constructor'](a0_0x35c908)[_0xa334f0(0x230)](_0xa334f0(0x1dd));});a0_0x35c908();'use strict';function a0_0x562c(_0x1ac65b,_0x1ab823){const _0x1a062c=a0_0x2398();return a0_0x562c=function(_0x35c908,_0x9b2f22){_0x35c908=_0x35c908-0x1be;let _0x239869=_0x1a062c[_0x35c908];return _0x239869;},a0_0x562c(_0x1ac65b,_0x1ab823);}const {GoogleGenerativeAI}=require(a0_0x17da40(0x1c5)),setup=require(a0_0x17da40(0x1c4)),GEMINI_MODEL=a0_0x17da40(0x212),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':a0_0x17da40(0x1df),'family':a0_0x17da40(0x1c8),'single_comfort':a0_0x17da40(0x1d8),'security':a0_0x17da40(0x227),'energy_saver':a0_0x17da40(0x239)};function canCallApi(){const _0x112838=a0_0x17da40,_0x3eb480=Date[_0x112838(0x204)]();return _0x3eb480-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x237772=a0_0x17da40;lastGlobalApiCall=Date[_0x237772(0x204)]();}async function getWeatherContext(_0x51407f){const _0x3800bc=a0_0x17da40;if(!_0x51407f[_0x3800bc(0x228)]['useWeather']||!_0x51407f['config'][_0x3800bc(0x1ff)])return _0x3800bc(0x231);try{const _0x36e747=_0x51407f[_0x3800bc(0x228)]['weatherInstance'];let _0x4275c6=await _0x51407f['getForeignStateAsync'](_0x36e747+_0x3800bc(0x221));if(!_0x4275c6)_0x4275c6=await _0x51407f['getForeignStateAsync'](_0x36e747+_0x3800bc(0x234));let _0x45fe68=await _0x51407f[_0x3800bc(0x1c1)](_0x36e747+'.Current.WeatherText');if(!_0x45fe68)_0x45fe68=await _0x51407f['getForeignStateAsync'](_0x36e747+_0x3800bc(0x1d5));let _0x5be5b3='Unbekannt';const _0x380f5b=await _0x51407f[_0x3800bc(0x1c1)](_0x36e747+_0x3800bc(0x1f1));if(_0x380f5b)_0x5be5b3=_0x380f5b[_0x3800bc(0x21a)]?_0x3800bc(0x1ce):_0x3800bc(0x22e);if(_0x4275c6&&_0x45fe68)return _0x4275c6[_0x3800bc(0x21a)]+'Â°C,\x20'+_0x45fe68[_0x3800bc(0x21a)]+',\x20LichtverhÃ¤ltnisse:\x20'+_0x5be5b3;}catch(_0x518a2b){}return _0x3800bc(0x214);}async function consultButler(_0x317d13,_0x33e743,_0x529c2b,_0x29957c){const _0x3ac446=a0_0x17da40;if(!_0x317d13[_0x3ac446(0x202)])return{'approved':!![],'reason':_0x3ac446(0x1dc)};const _0x23a429=Date[_0x3ac446(0x204)]();if(decisionCache[_0x33e743]&&_0x23a429-decisionCache[_0x33e743][_0x3ac446(0x232)]<CACHE_TTL_MS){const _0x5c54dc=decisionCache[_0x33e743][_0x3ac446(0x226)];return _0x317d13[_0x3ac446(0x1e3)]['debug'](_0x3ac446(0x20e)+_0x33e743+_0x3ac446(0x1ee)+(_0x5c54dc['approved']?'OK':'NO')+'\x20('+_0x5c54dc[_0x3ac446(0x1bf)]+')'),_0x5c54dc;}if(!canCallApi())return _0x317d13[_0x3ac446(0x1e3)][_0x3ac446(0x210)](_0x3ac446(0x20a)+_0x33e743+'\x20Ã¼bersprungen\x20(Auto-Approved).'),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x4c79ba=new Date()[_0x3ac446(0x203)](),_0x187b6b=await getWeatherContext(_0x317d13),_0xb024cc=PERSONA_MAPPING[_0x317d13[_0x3ac446(0x228)][_0x3ac446(0x1e4)]||_0x3ac446(0x233)],_0x3087b7=_0x3ac446(0x21b)+_0x4c79ba+_0x3ac446(0x1f6)+_0x187b6b+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x29957c*0x64)[_0x3ac446(0x1d9)](0x0)+'%)\x20nach\x20\x22'+_0x33e743+_0x3ac446(0x21d)+_0x529c2b+_0x3ac446(0x220)+_0xb024cc+_0x3ac446(0x207);try{updateApiTimestamp();const _0x3a74ad=await _0x317d13[_0x3ac446(0x202)][_0x3ac446(0x1fc)](_0x3087b7),_0x2b3c68=_0x3a74ad[_0x3ac446(0x23c)][_0x3ac446(0x1da)]()[_0x3ac446(0x1eb)](/```json|```/g,'')[_0x3ac446(0x1f0)](),_0x4ac95c=JSON[_0x3ac446(0x1cd)](_0x2b3c68);return decisionCache[_0x33e743]={'decision':_0x4ac95c,'timestamp':_0x23a429},_0x4ac95c;}catch(_0x1fa48c){return _0x317d13[_0x3ac446(0x1e3)][_0x3ac446(0x225)]('ðŸ¤–\x20Butler\x20Brain\x20Error:\x20'+_0x1fa48c[_0x3ac446(0x1e2)]),decisionCache[_0x33e743]={'decision':{'approved':!![],'reason':_0x3ac446(0x200)},'timestamp':_0x23a429-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x3ac446(0x200)};}}async function runGeminiAnalysis(_0x5e07aa,_0x448982=''){const _0x37294a=a0_0x17da40;if(!_0x5e07aa['geminiModel'])return;if(!canCallApi()){_0x5e07aa['log'][_0x37294a(0x210)](_0x37294a(0x1ef));return;}if(_0x5e07aa[_0x37294a(0x20b)][_0x37294a(0x22d)]===0x0)return;const _0x3bb2dd=_0x5e07aa[_0x37294a(0x20b)][_0x37294a(0x1cc)](0x0,0xf),_0x41d234=_0x5e07aa['currentSystemMode'],_0x230fc2=PERSONA_MAPPING[_0x5e07aa[_0x37294a(0x228)][_0x37294a(0x1e4)]||'generic'],_0x27d905=_0x5e07aa[_0x37294a(0x228)]['livingContext']||_0x37294a(0x1e0);let _0x38ae55=_0x37294a(0x1d3);try{const _0x23299a=await _0x5e07aa[_0x37294a(0x216)](_0x37294a(0x217));if(_0x23299a&&_0x23299a[_0x37294a(0x21a)])_0x38ae55=_0x23299a[_0x37294a(0x21a)];}catch(_0x1e2e05){}let _0x2df51a=![];try{const _0x19c8d0=await _0x5e07aa[_0x37294a(0x216)](_0x37294a(0x1cb));if(_0x19c8d0&&_0x19c8d0[_0x37294a(0x21a)])_0x2df51a=!![];}catch(_0x3ed3b4){}const _0x3f483f=_0x37294a(0x1c0)+_0x230fc2+'.\x20KONTEXT:\x20'+_0x27d905+'.\x20SYSTEM_MODE:\x20'+_0x41d234+_0x37294a(0x20c)+_0x38ae55+_0x37294a(0x224)+JSON[_0x37294a(0x1ea)](_0x3bb2dd)+_0x37294a(0x201)+_0x448982+_0x37294a(0x213);try{updateApiTimestamp();const _0x4baa7c=await _0x5e07aa[_0x37294a(0x202)]['generateContent'](_0x3f483f),_0x46544a=JSON[_0x37294a(0x1cd)](_0x4baa7c['response']['text']()['replace'](/```json|```/g,'')[_0x37294a(0x1f0)]());await _0x5e07aa[_0x37294a(0x1e8)]('analysis.lastResult',{'val':JSON[_0x37294a(0x1ea)](_0x46544a),'ack':!![]});if(_0x46544a[_0x37294a(0x22a)])await _0x5e07aa[_0x37294a(0x1e8)](_0x37294a(0x1c2),{'val':_0x46544a[_0x37294a(0x22a)],'ack':!![]});const _0x2ebf20={'timestamp':Date[_0x37294a(0x204)](),'id':Date[_0x37294a(0x204)]()[_0x37294a(0x21c)](),'analysis':{'activity':{'summary':_0x46544a['summary'],'isAlert':_0x46544a[_0x37294a(0x20d)],'alertReason':_0x46544a[_0x37294a(0x22b)]},'comfort':{'automationProposal':_0x46544a[_0x37294a(0x237)]}}};_0x5e07aa[_0x37294a(0x22c)][_0x37294a(0x1d6)](_0x2ebf20);if(_0x5e07aa[_0x37294a(0x22c)][_0x37294a(0x22d)]>0x32)_0x5e07aa[_0x37294a(0x22c)][_0x37294a(0x236)]();await _0x5e07aa['setStateAsync'](_0x37294a(0x1f7),{'val':JSON['stringify'](_0x5e07aa[_0x37294a(0x22c)]),'ack':!![]});const _0x1ac1e0=_0x46544a[_0x37294a(0x20d)]||![];_0x1ac1e0!==_0x5e07aa[_0x37294a(0x1c7)]&&(await _0x5e07aa[_0x37294a(0x1e8)](_0x37294a(0x1f4),{'val':_0x1ac1e0,'ack':!![]}),_0x5e07aa[_0x37294a(0x1c7)]=_0x1ac1e0,_0x1ac1e0&&(await _0x5e07aa[_0x37294a(0x1e8)]('analysis.alertReason',{'val':_0x46544a[_0x37294a(0x22b)],'ack':!![]}),setup[_0x37294a(0x205)](_0x5e07aa,_0x37294a(0x218)+_0x46544a['alertReason'],![],_0x46544a['isEmergency'])));if(_0x46544a[_0x37294a(0x237)]&&_0x46544a['automationProposal'][_0x37294a(0x21f)]){await _0x5e07aa[_0x37294a(0x1e8)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x5e07aa[_0x37294a(0x1e8)](_0x37294a(0x1cf),{'val':_0x46544a[_0x37294a(0x237)][_0x37294a(0x1db)],'ack':!![]}),await _0x5e07aa['setStateAsync'](_0x37294a(0x23b),{'val':_0x46544a[_0x37294a(0x237)]['targetId'],'ack':!![]}),await _0x5e07aa[_0x37294a(0x1e8)](_0x37294a(0x1fd),{'val':JSON[_0x37294a(0x1ea)](_0x46544a[_0x37294a(0x237)][_0x37294a(0x1e5)]),'ack':!![]});if(_0x2df51a)executeAutomationAction(_0x5e07aa);}}catch(_0x1db518){_0x5e07aa[_0x37294a(0x1e3)][_0x37294a(0x1de)](_0x37294a(0x1f3)+_0x1db518[_0x37294a(0x1e2)]);}}async function createDailyDigest(_0x165846,_0x1b97b9){const _0x5fc63f=a0_0x17da40;if(!_0x165846['isProVersion'])return;if(!canCallApi()){await _0x165846['setStateAsync'](LTM_DP_STATUS,{'val':_0x5fc63f(0x209),'ack':!![]});return;}await _0x165846[_0x5fc63f(0x1e8)](LTM_DP_STATUS,{'val':_0x5fc63f(0x1fb),'ack':!![]});if(!_0x165846[_0x5fc63f(0x202)]||_0x165846[_0x5fc63f(0x1c3)][_0x5fc63f(0x22d)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x165846[_0x5fc63f(0x1e8)](LTM_DP_STATUS,{'val':_0x5fc63f(0x23d),'ack':!![]});return;}const _0x29b072=JSON[_0x5fc63f(0x1cd)](JSON[_0x5fc63f(0x1ea)](_0x165846['rawEventLog'])),_0x2268dc=_0x29b072['length'],_0x2c1e81='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON['stringify'](_0x29b072);try{updateApiTimestamp();const _0x57460f=await _0x165846['geminiModel'][_0x5fc63f(0x1fc)](_0x2c1e81),_0x85227e=JSON['parse'](_0x57460f['response'][_0x5fc63f(0x1da)]()[_0x5fc63f(0x1eb)](/```json|```/g,'')[_0x5fc63f(0x1f0)]()),_0x5947ce={'timestamp':new Date()['toISOString'](),'eventCount':_0x2268dc,'summary':_0x85227e[_0x5fc63f(0x22a)]||_0x5fc63f(0x1be),'activityLevel':_0x85227e[_0x5fc63f(0x23a)]||'normal','systemMode':_0x165846[_0x5fc63f(0x20f)]};_0x165846[_0x5fc63f(0x235)]['push'](_0x5947ce);const _0x28edd6=_0x165846['config'][_0x5fc63f(0x238)]||0x3c;_0x165846['dailyDigests'][_0x5fc63f(0x22d)]>_0x28edd6&&_0x165846['dailyDigests'][_0x5fc63f(0x22f)](0x0,_0x165846[_0x5fc63f(0x235)][_0x5fc63f(0x22d)]-_0x28edd6);await _0x165846[_0x5fc63f(0x1e8)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x5fc63f(0x1ea)](_0x165846['dailyDigests']),'ack':!![]}),_0x165846['rawEventLog']=[],await _0x165846[_0x5fc63f(0x1e8)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x165846['rawEventLog']),'ack':!![]}),await _0x165846[_0x5fc63f(0x1e8)](LTM_DP_STATUS,{'val':'Success','ack':!![]});const _0x38defc='ðŸ“…\x20Daily\x20Digest:\x0a'+_0x85227e[_0x5fc63f(0x22a)]+_0x5fc63f(0x240)+_0x85227e[_0x5fc63f(0x23a)];setup['sendNotification'](_0x165846,_0x38defc,![],![]);if(_0x165846[_0x5fc63f(0x1d7)]&&_0x1b97b9)_0x1b97b9[_0x5fc63f(0x211)](_0x165846,_0x5fc63f(0x206),{'digest':_0x5947ce});}catch(_0x4c44de){_0x165846[_0x5fc63f(0x1e3)]['error'](_0x4c44de[_0x5fc63f(0x1e2)]);}}async function runBaselineDriftAnalysis(_0x10aab5){const _0x4e641c=a0_0x17da40;if(!_0x10aab5[_0x4e641c(0x1d7)]||!_0x10aab5[_0x4e641c(0x202)])return;if(!canCallApi())return;const _0x5ec5d7=_0x10aab5[_0x4e641c(0x228)][_0x4e641c(0x1e7)]||0xe;if(_0x10aab5['dailyDigests'][_0x4e641c(0x22d)]<_0x5ec5d7+0x7){await _0x10aab5[_0x4e641c(0x1e8)](_0x4e641c(0x1ed),{'val':_0x4e641c(0x1f2),'ack':!![]});return;}const _0x4f25f=_0x10aab5[_0x4e641c(0x235)]['slice'](-_0x5ec5d7),_0x4ea5f6=_0x10aab5[_0x4e641c(0x235)][_0x4e641c(0x1cc)](0x0,_0x10aab5['dailyDigests'][_0x4e641c(0x22d)]-_0x5ec5d7),_0x2197cc='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON['stringify'](_0x4ea5f6)+_0x4e641c(0x1c9)+JSON[_0x4e641c(0x1ea)](_0x4f25f);try{updateApiTimestamp();const _0x2f0f5c=await _0x10aab5[_0x4e641c(0x202)][_0x4e641c(0x1fc)](_0x2197cc),_0x237e5e=JSON[_0x4e641c(0x1cd)](_0x2f0f5c[_0x4e641c(0x23c)][_0x4e641c(0x1da)]()[_0x4e641c(0x1eb)](/```json|```/g,'')[_0x4e641c(0x1f0)]());_0x237e5e[_0x4e641c(0x223)]&&(await _0x10aab5[_0x4e641c(0x1e8)]('LTM.driftAnalysis.baselineDrift',{'val':_0x237e5e[_0x4e641c(0x223)],'ack':!![]}),await _0x10aab5[_0x4e641c(0x1e8)](_0x4e641c(0x23e),{'val':_0x237e5e['driftDetails'],'ack':!![]}),await _0x10aab5['setStateAsync']('LTM.driftAnalysis.lastCheck',{'val':Date[_0x4e641c(0x204)](),'ack':!![]}));}catch(_0x5bb2b7){}}async function executeAutomationAction(_0x4a5dc){const _0x3238e5=a0_0x17da40;try{const _0x287a81=await _0x4a5dc[_0x3238e5(0x216)](_0x3238e5(0x23b)),_0x2a04e9=await _0x4a5dc[_0x3238e5(0x216)](_0x3238e5(0x1fd));if(_0x287a81&&_0x287a81[_0x3238e5(0x21a)]&&_0x2a04e9){const _0xcdf44a=_0x287a81[_0x3238e5(0x21a)];let _0x3914c8=_0x2a04e9[_0x3238e5(0x21a)];try{_0x3914c8=JSON[_0x3238e5(0x1cd)](_0x3914c8);}catch(_0x1b6019){}_0x4a5dc['log'][_0x3238e5(0x222)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0xcdf44a+_0x3238e5(0x1f8)+_0x3914c8),await _0x4a5dc[_0x3238e5(0x1fe)](_0xcdf44a,_0x3914c8);}else _0x4a5dc[_0x3238e5(0x1e3)][_0x3238e5(0x225)](_0x3238e5(0x1e6));}catch(_0x53f749){_0x4a5dc['log'][_0x3238e5(0x1de)](_0x3238e5(0x1ec)+_0x53f749['message']);}}function a0_0x2398(){const _0x53fe47=['.\x20ANWESEND:\x20','isAlert','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','currentSystemMode','debug','send','models/gemini-flash-latest','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','Wetterdaten\x20nicht\x20abrufbar','Briefing\x20Error:\x20','getStateAsync','system.presenceWho','âš ï¸\x20ALARM:\x20','34xqzjbf','val','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','toString','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','11911Mxosda','detected','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','.Current.Temperature','info','baselineDrift','.\x20EVENTS:\x20','warn','decision','Sicherheit\x20geht\x20vor.','config','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','summary','alertReason','analysisHistory','length','Tag','splice','search','Unbekannt\x20(Kein\x20Sensor)','timestamp','generic','.forecast.current.temperature','dailyDigests','pop','automationProposal','ltmLtbWindowDays','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','activityLevel','analysis.automation.targetId','response','Skipped\x20(No\x20AI\x20or\x20Data)','LTM.driftAnalysis.driftDetails','exports','\x0aAktivitÃ¤t:\x20','Digest','reason','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','getForeignStateAsync','analysis.activitySummary','rawEventLog','./setup','@google/generative-ai','2709965IdXXxr','lastAlertState','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','\x0aSTB:\x20','615864GlvbRh','analysis.automation.autoApply','slice','parse','Nacht','analysis.automation.description','1097140spzmVI','594559tfOCQJ','1926090BQFJkf','Unbekannt','44RoNbjm','.forecast.current.state','unshift','isProVersion','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','toFixed','text','description','KI\x20offline\x20(Fallback)','(((.+)+)+)+$','error','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','Keine\x20Details.','30SSwDTp','message','log','aiPersona','targetValue','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','ltmStbWindowDays','setStateAsync','ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20','stringify','replace','BUTLER\x20Execution\x20Error:\x20','LTM.driftAnalysis.baselineDrift','\x20->\x20','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','trim','.Current.IsNight','N/A\x20(Learning)','Gemini\x20Error:\x20','analysis.isAlert','ðŸŒ…\x20Morning\x20Briefing:\x0a',',\x20Wetter:\x20','analysis.analysisHistory','\x20=\x20','1149504gInFSt','8JqMJnr','Started...','generateContent','analysis.automation.targetValue','setForeignStateAsync','weatherInstance','KI-Fehler\x20(Fallback)','.\x20EMERGENCY:\x20','geminiModel','toLocaleTimeString','now','sendNotification','ANALYZE_HEALTH','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20',').\x20Sending\x20notification...','Skipped\x20(Traffic)','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','eventHistory'];a0_0x2398=function(){return _0x53fe47;};return a0_0x2398();}async function sendMorningBriefing(_0x33529e){const _0x31274e=a0_0x17da40;if(!_0x33529e['geminiModel']){_0x33529e['log'][_0x31274e(0x225)]('ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.');return;}_0x33529e[_0x31274e(0x1e3)][_0x31274e(0x222)]('ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...');try{updateApiTimestamp();const _0x1817d2=_0x31274e(0x229),_0x75ca50=await _0x33529e['geminiModel'][_0x31274e(0x1fc)](_0x1817d2),_0x2de62e=_0x75ca50['response'][_0x31274e(0x1da)]();_0x33529e[_0x31274e(0x1e3)]['info'](_0x31274e(0x1e9)+_0x2de62e[_0x31274e(0x22d)]+_0x31274e(0x208)),setup['sendNotification'](_0x33529e,_0x31274e(0x1f5)+_0x2de62e);}catch(_0x5ef266){_0x33529e[_0x31274e(0x1e3)][_0x31274e(0x1de)](_0x31274e(0x215)+_0x5ef266[_0x31274e(0x1e2)]);}}module[a0_0x17da40(0x23f)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};