const a0_0x45f6d2=a0_0x50d7;(function(_0x264ec2,_0x5e629c){const _0x1d0040=a0_0x50d7,_0x404727=_0x264ec2();while(!![]){try{const _0x54d13e=parseInt(_0x1d0040(0x7a))/0x1+-parseInt(_0x1d0040(0xe2))/0x2+-parseInt(_0x1d0040(0xcf))/0x3*(parseInt(_0x1d0040(0xb2))/0x4)+-parseInt(_0x1d0040(0xe0))/0x5+-parseInt(_0x1d0040(0xe3))/0x6+-parseInt(_0x1d0040(0xbc))/0x7+parseInt(_0x1d0040(0x77))/0x8;if(_0x54d13e===_0x5e629c)break;else _0x404727['push'](_0x404727['shift']());}catch(_0xa926df){_0x404727['push'](_0x404727['shift']());}}}(a0_0x176f,0x82da1));const a0_0x1c35c4=(function(){let _0x20b668=!![];return function(_0x1b7656,_0x3ad075){const _0x30329f=_0x20b668?function(){if(_0x3ad075){const _0x11f9de=_0x3ad075['apply'](_0x1b7656,arguments);return _0x3ad075=null,_0x11f9de;}}:function(){};return _0x20b668=![],_0x30329f;};}()),a0_0x185f1c=a0_0x1c35c4(this,function(){const _0x2a8650=a0_0x50d7;return a0_0x185f1c[_0x2a8650(0x70)]()[_0x2a8650(0x79)](_0x2a8650(0xed))[_0x2a8650(0x70)]()[_0x2a8650(0xd6)](a0_0x185f1c)['search']('(((.+)+)+)+$');});a0_0x185f1c();'use strict';const {GoogleGenerativeAI}=require(a0_0x45f6d2(0x81)),setup=require(a0_0x45f6d2(0x6c)),GEMINI_MODEL=a0_0x45f6d2(0x7b),LTM_DP_DAILY_DIGESTS=a0_0x45f6d2(0xaf),LTM_DP_STATUS=a0_0x45f6d2(0x68),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x45f6d2(0xc6),'senior_aal':'PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':a0_0x45f6d2(0xe8),'single_comfort':a0_0x45f6d2(0x69),'security':a0_0x45f6d2(0xbd),'energy_saver':'PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'};function canCallApi(){const _0x2edecc=a0_0x45f6d2,_0x9189d9=Date[_0x2edecc(0xd7)]();return _0x9189d9-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x22a42c=a0_0x45f6d2;lastGlobalApiCall=Date[_0x22a42c(0xd7)]();}async function getWeatherContext(_0x258167){const _0x251386=a0_0x45f6d2;if(!_0x258167[_0x251386(0xb8)][_0x251386(0xb3)]||!_0x258167['config'][_0x251386(0xbf)])return _0x251386(0xd5);try{const _0x51aef5=_0x258167[_0x251386(0xb8)][_0x251386(0xbf)];let _0x4d5b23=await _0x258167[_0x251386(0x8b)](_0x51aef5+_0x251386(0xad));if(!_0x4d5b23)_0x4d5b23=await _0x258167[_0x251386(0x8b)](_0x51aef5+'.forecast.current.temperature');let _0x23033b=await _0x258167[_0x251386(0x8b)](_0x51aef5+_0x251386(0xdd));if(!_0x23033b)_0x23033b=await _0x258167[_0x251386(0x8b)](_0x51aef5+'.forecast.current.state');let _0x200786=_0x251386(0xac);const _0x368c30=await _0x258167['getForeignStateAsync'](_0x51aef5+'.Current.IsNight');if(_0x368c30)_0x200786=_0x368c30[_0x251386(0xa0)]?_0x251386(0x84):_0x251386(0xae);if(_0x4d5b23&&_0x23033b)return _0x4d5b23[_0x251386(0xa0)]+_0x251386(0x82)+_0x23033b[_0x251386(0xa0)]+_0x251386(0x88)+_0x200786;}catch(_0x243659){}return _0x251386(0xb4);}async function consultButler(_0x4391bc,_0x3ae63d,_0x25553b,_0x3818c9){const _0x2a5c89=a0_0x45f6d2;if(!_0x4391bc[_0x2a5c89(0xbe)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x5d49f5=Date[_0x2a5c89(0xd7)]();if(decisionCache[_0x3ae63d]&&_0x5d49f5-decisionCache[_0x3ae63d][_0x2a5c89(0xc5)]<CACHE_TTL_MS){const _0x18c38d=decisionCache[_0x3ae63d]['decision'];return _0x4391bc['log'][_0x2a5c89(0xf0)](_0x2a5c89(0xd4)+_0x3ae63d+_0x2a5c89(0x9b)+(_0x18c38d[_0x2a5c89(0xdc)]?'OK':'NO')+'\x20('+_0x18c38d['reason']+')'),_0x18c38d;}if(!canCallApi())return _0x4391bc[_0x2a5c89(0xe6)][_0x2a5c89(0xf0)](_0x2a5c89(0xda)+_0x3ae63d+_0x2a5c89(0xee)),{'approved':!![],'reason':_0x2a5c89(0xd0)};const _0x215836=new Date()[_0x2a5c89(0xb0)](),_0x26a956=await getWeatherContext(_0x4391bc),_0x5b29d5=PERSONA_MAPPING[_0x4391bc[_0x2a5c89(0xb8)][_0x2a5c89(0xc1)]||_0x2a5c89(0xc9)],_0x4c34ce=_0x2a5c89(0xc2)+_0x215836+_0x2a5c89(0xe4)+_0x26a956+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x3818c9*0x64)['toFixed'](0x0)+_0x2a5c89(0x7f)+_0x3ae63d+_0x2a5c89(0xe5)+_0x25553b+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x5b29d5+_0x2a5c89(0x94);try{updateApiTimestamp();const _0x54b894=await _0x4391bc[_0x2a5c89(0xbe)][_0x2a5c89(0xba)](_0x4c34ce),_0x538dba=_0x54b894[_0x2a5c89(0x96)][_0x2a5c89(0x7c)]()[_0x2a5c89(0x98)](/```json|```/g,'')[_0x2a5c89(0x80)](),_0x41a865=JSON[_0x2a5c89(0xf1)](_0x538dba);return decisionCache[_0x3ae63d]={'decision':_0x41a865,'timestamp':_0x5d49f5},_0x41a865;}catch(_0x3542d6){return _0x4391bc[_0x2a5c89(0xe6)][_0x2a5c89(0x8e)](_0x2a5c89(0xf2)+_0x3542d6[_0x2a5c89(0xa1)]),decisionCache[_0x3ae63d]={'decision':{'approved':!![],'reason':_0x2a5c89(0x9a)},'timestamp':_0x5d49f5-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x2a5c89(0x9a)};}}function a0_0x50d7(_0x131bdb,_0x2eef94){const _0x5d90c1=a0_0x176f();return a0_0x50d7=function(_0x185f1c,_0x1c35c4){_0x185f1c=_0x185f1c-0x67;let _0x176f59=_0x5d90c1[_0x185f1c];return _0x176f59;},a0_0x50d7(_0x131bdb,_0x2eef94);}async function runGeminiAnalysis(_0x396549,_0x261602=''){const _0x3d84b0=a0_0x45f6d2;if(!_0x396549[_0x3d84b0(0xbe)])return;if(!canCallApi()){_0x396549['log'][_0x3d84b0(0xf0)](_0x3d84b0(0x76));return;}if(_0x396549['eventHistory'][_0x3d84b0(0xa5)]===0x0)return;const _0x35455f=_0x396549[_0x3d84b0(0xd1)][_0x3d84b0(0xcb)](0x0,0xf),_0x2ce010=_0x396549[_0x3d84b0(0xd9)],_0x342a47=PERSONA_MAPPING[_0x396549[_0x3d84b0(0xb8)][_0x3d84b0(0xc1)]||_0x3d84b0(0xc9)],_0x197f66=_0x396549[_0x3d84b0(0xb8)][_0x3d84b0(0xde)]||_0x3d84b0(0xcd);let _0x1f415d=_0x3d84b0(0xac);try{const _0x4298f6=await _0x396549['getStateAsync'](_0x3d84b0(0xca));if(_0x4298f6&&_0x4298f6['val'])_0x1f415d=_0x4298f6[_0x3d84b0(0xa0)];}catch(_0x5bcbd5){}let _0x5f37ee=![];try{const _0x2c2ca4=await _0x396549[_0x3d84b0(0x8f)]('analysis.automation.autoApply');if(_0x2c2ca4&&_0x2c2ca4[_0x3d84b0(0xa0)])_0x5f37ee=!![];}catch(_0x15df43){}const _0x330499='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x342a47+_0x3d84b0(0x8c)+_0x197f66+_0x3d84b0(0x67)+_0x2ce010+_0x3d84b0(0xa6)+_0x1f415d+_0x3d84b0(0xef)+JSON[_0x3d84b0(0x87)](_0x35455f)+_0x3d84b0(0x92)+_0x261602+_0x3d84b0(0xa9);try{updateApiTimestamp();const _0x27bca8=await _0x396549[_0x3d84b0(0xbe)]['generateContent'](_0x330499),_0x139bae=JSON[_0x3d84b0(0xf1)](_0x27bca8[_0x3d84b0(0x96)][_0x3d84b0(0x7c)]()['replace'](/```json|```/g,'')['trim']());await _0x396549['setStateAsync']('analysis.lastResult',{'val':JSON[_0x3d84b0(0x87)](_0x139bae),'ack':!![]});if(_0x139bae['summary'])await _0x396549['setStateAsync'](_0x3d84b0(0xd3),{'val':_0x139bae[_0x3d84b0(0x7e)],'ack':!![]});const _0x18f581={'timestamp':Date[_0x3d84b0(0xd7)](),'id':Date[_0x3d84b0(0xd7)]()[_0x3d84b0(0x70)](),'analysis':{'activity':{'summary':_0x139bae[_0x3d84b0(0x7e)],'isAlert':_0x139bae[_0x3d84b0(0x71)],'alertReason':_0x139bae['alertReason']},'comfort':{'automationProposal':_0x139bae[_0x3d84b0(0x74)]}}};_0x396549[_0x3d84b0(0x86)][_0x3d84b0(0xe9)](_0x18f581);if(_0x396549[_0x3d84b0(0x86)][_0x3d84b0(0xa5)]>0x32)_0x396549[_0x3d84b0(0x86)][_0x3d84b0(0x6a)]();await _0x396549['setStateAsync'](_0x3d84b0(0xb6),{'val':JSON[_0x3d84b0(0x87)](_0x396549[_0x3d84b0(0x86)]),'ack':!![]});const _0x36f36e=_0x139bae[_0x3d84b0(0x71)]||![];_0x36f36e!==_0x396549['lastAlertState']&&(await _0x396549['setStateAsync'](_0x3d84b0(0xa3),{'val':_0x36f36e,'ack':!![]}),_0x396549[_0x3d84b0(0x6f)]=_0x36f36e,_0x36f36e&&(await _0x396549['setStateAsync'](_0x3d84b0(0x8a),{'val':_0x139bae['alertReason'],'ack':!![]}),setup['sendNotification'](_0x396549,_0x3d84b0(0xbb)+_0x139bae['alertReason'],![],_0x139bae[_0x3d84b0(0x90)])));if(_0x139bae['automationProposal']&&_0x139bae['automationProposal']['detected']){await _0x396549[_0x3d84b0(0xb1)](_0x3d84b0(0xc8),{'val':!![],'ack':!![]}),await _0x396549[_0x3d84b0(0xb1)](_0x3d84b0(0x9d),{'val':_0x139bae['automationProposal'][_0x3d84b0(0x75)],'ack':!![]}),await _0x396549[_0x3d84b0(0xb1)]('analysis.automation.targetId',{'val':_0x139bae['automationProposal'][_0x3d84b0(0x95)],'ack':!![]}),await _0x396549[_0x3d84b0(0xb1)](_0x3d84b0(0xc0),{'val':JSON[_0x3d84b0(0x87)](_0x139bae[_0x3d84b0(0x74)][_0x3d84b0(0xea)]),'ack':!![]});if(_0x5f37ee)executeAutomationAction(_0x396549);}}catch(_0x2a65f8){_0x396549[_0x3d84b0(0xe6)][_0x3d84b0(0xd8)](_0x3d84b0(0xb5)+_0x2a65f8['message']);}}async function createDailyDigest(_0x2cb4dc,_0x5a166f){const _0x2f1e66=a0_0x45f6d2;if(!_0x2cb4dc['isProVersion'])return;if(!canCallApi()){await _0x2cb4dc[_0x2f1e66(0xb1)](LTM_DP_STATUS,{'val':_0x2f1e66(0xdf),'ack':!![]});return;}await _0x2cb4dc['setStateAsync'](LTM_DP_STATUS,{'val':_0x2f1e66(0x99),'ack':!![]});if(!_0x2cb4dc['geminiModel']||_0x2cb4dc['rawEventLog']['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x2cb4dc['setStateAsync'](LTM_DP_STATUS,{'val':_0x2f1e66(0x9e),'ack':!![]});return;}const _0x2176c7=JSON[_0x2f1e66(0xf1)](JSON[_0x2f1e66(0x87)](_0x2cb4dc[_0x2f1e66(0xce)])),_0x31ae37=_0x2176c7[_0x2f1e66(0xa5)],_0x1261bd=_0x2f1e66(0x78)+JSON[_0x2f1e66(0x87)](_0x2176c7);try{updateApiTimestamp();const _0x27beed=await _0x2cb4dc[_0x2f1e66(0xbe)][_0x2f1e66(0xba)](_0x1261bd),_0x9c6839=JSON[_0x2f1e66(0xf1)](_0x27beed[_0x2f1e66(0x96)]['text']()[_0x2f1e66(0x98)](/```json|```/g,'')[_0x2f1e66(0x80)]()),_0x325761={'timestamp':new Date()[_0x2f1e66(0x73)](),'eventCount':_0x31ae37,'summary':_0x9c6839[_0x2f1e66(0x7e)]||_0x2f1e66(0xcc),'activityLevel':_0x9c6839['activityLevel']||_0x2f1e66(0x97),'systemMode':_0x2cb4dc[_0x2f1e66(0xd9)]};_0x2cb4dc[_0x2f1e66(0xa8)]['push'](_0x325761);const _0x3089d5=_0x2cb4dc[_0x2f1e66(0xb8)][_0x2f1e66(0x83)]||0x3c;_0x2cb4dc['dailyDigests'][_0x2f1e66(0xa5)]>_0x3089d5&&_0x2cb4dc[_0x2f1e66(0xa8)][_0x2f1e66(0x85)](0x0,_0x2cb4dc[_0x2f1e66(0xa8)][_0x2f1e66(0xa5)]-_0x3089d5);await _0x2cb4dc['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x2f1e66(0x87)](_0x2cb4dc[_0x2f1e66(0xa8)]),'ack':!![]}),_0x2cb4dc[_0x2f1e66(0xce)]=[],await _0x2cb4dc['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x2f1e66(0x87)](_0x2cb4dc[_0x2f1e66(0xce)]),'ack':!![]}),await _0x2cb4dc[_0x2f1e66(0xb1)](LTM_DP_STATUS,{'val':_0x2f1e66(0xb7),'ack':!![]});const _0x4a0a96=_0x2f1e66(0xdb)+_0x9c6839[_0x2f1e66(0x7e)]+_0x2f1e66(0x9f)+_0x9c6839[_0x2f1e66(0xe7)];setup['sendNotification'](_0x2cb4dc,_0x4a0a96,![],![]);if(_0x2cb4dc[_0x2f1e66(0xe1)]&&_0x5a166f)_0x5a166f[_0x2f1e66(0xc4)](_0x2cb4dc,'ANALYZE_HEALTH',{'digest':_0x325761});}catch(_0x4362d1){_0x2cb4dc['log'][_0x2f1e66(0xd8)](_0x4362d1['message']);}}async function runBaselineDriftAnalysis(_0x3440fa){const _0x155c53=a0_0x45f6d2;if(!_0x3440fa[_0x155c53(0xe1)]||!_0x3440fa[_0x155c53(0xbe)])return;if(!canCallApi())return;const _0x3b3a02=_0x3440fa[_0x155c53(0xb8)]['ltmStbWindowDays']||0xe;if(_0x3440fa[_0x155c53(0xa8)][_0x155c53(0xa5)]<_0x3b3a02+0x7){await _0x3440fa['setStateAsync'](_0x155c53(0xa2),{'val':_0x155c53(0x91),'ack':!![]});return;}const _0x4ef2c0=_0x3440fa[_0x155c53(0xa8)]['slice'](-_0x3b3a02),_0x6dfe75=_0x3440fa[_0x155c53(0xa8)][_0x155c53(0xcb)](0x0,_0x3440fa['dailyDigests'][_0x155c53(0xa5)]-_0x3b3a02),_0x35b54c=_0x155c53(0xaa)+JSON['stringify'](_0x6dfe75)+_0x155c53(0xb9)+JSON['stringify'](_0x4ef2c0);try{updateApiTimestamp();const _0x834ed7=await _0x3440fa[_0x155c53(0xbe)][_0x155c53(0xba)](_0x35b54c),_0x39ec9c=JSON[_0x155c53(0xf1)](_0x834ed7['response'][_0x155c53(0x7c)]()[_0x155c53(0x98)](/```json|```/g,'')[_0x155c53(0x80)]());_0x39ec9c[_0x155c53(0x93)]&&(await _0x3440fa[_0x155c53(0xb1)](_0x155c53(0xa2),{'val':_0x39ec9c[_0x155c53(0x93)],'ack':!![]}),await _0x3440fa['setStateAsync'](_0x155c53(0x6d),{'val':_0x39ec9c[_0x155c53(0xa4)],'ack':!![]}),await _0x3440fa['setStateAsync'](_0x155c53(0xa7),{'val':Date[_0x155c53(0xd7)](),'ack':!![]}));}catch(_0xac81fd){}}function a0_0x176f(){const _0x10940c=['parse','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','.\x20SYSTEM_MODE:\x20','LTM.processingStatus','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','pop','ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','./setup','LTM.driftAnalysis.driftDetails','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','lastAlertState','toString','isAlert','analysis.automation.targetId','toISOString','automationProposal','description','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','23756584vweyCh','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','search','565901gixxjn','models/gemini-flash-latest','text','BUTLER\x20Execution\x20Error:\x20','summary','%)\x20nach\x20\x22','trim','@google/generative-ai','Â°C,\x20','ltmLtbWindowDays','Nacht','splice','analysisHistory','stringify',',\x20LichtverhÃ¤ltnisse:\x20','ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','analysis.alertReason','getForeignStateAsync','.\x20KONTEXT:\x20','info','warn','getStateAsync','isEmergency','N/A\x20(Learning)','.\x20EMERGENCY:\x20','baselineDrift','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','targetId','response','normal','replace','Started...','KI-Fehler\x20(Fallback)','\x20->\x20','ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20','analysis.automation.description','Skipped\x20(No\x20AI\x20or\x20Data)','\x0aAktivitÃ¤t:\x20','val','message','LTM.driftAnalysis.baselineDrift','analysis.isAlert','driftDetails','length','.\x20ANWESEND:\x20','LTM.driftAnalysis.lastCheck','dailyDigests','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','setForeignStateAsync','Unbekannt','.Current.Temperature','Tag','LTM.dailyDigests','toLocaleTimeString','setStateAsync','436YSPvLf','useWeather','Wetterdaten\x20nicht\x20abrufbar','Gemini\x20Error:\x20','analysis.analysisHistory','Success','config','\x0aSTB:\x20','generateContent','âš ï¸\x20ALARM:\x20','5044690LFDoKg','Sicherheit\x20geht\x20vor.','geminiModel','weatherInstance','analysis.automation.targetValue','aiPersona','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','sendNotification','send','timestamp','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','analysis.automation.patternDetected','generic','system.presenceWho','slice','Digest','Keine\x20Details.','rawEventLog','4062tWGwrC','Traffic-Schutz\x20(Auto-Approved)','eventHistory','ðŸŒ…\x20Morning\x20Briefing:\x0a','analysis.activitySummary','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','Unbekannt\x20(Kein\x20Sensor)','constructor','now','error','currentSystemMode','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','ðŸ“…\x20Daily\x20Digest:\x0a','approved','.Current.WeatherText','livingContext','Skipped\x20(Traffic)','3030385fAdaAO','isProVersion','1147518Epmidp','5708478hAVDlC',',\x20Wetter:\x20','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','log','activityLevel','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','unshift','targetValue','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','Briefing\x20Error:\x20','(((.+)+)+)+$','\x20Ã¼bersprungen\x20(Auto-Approved).','.\x20EVENTS:\x20','debug'];a0_0x176f=function(){return _0x10940c;};return a0_0x176f();}async function executeAutomationAction(_0x599af3){const _0x5f2215=a0_0x45f6d2;try{const _0x3b7d92=await _0x599af3[_0x5f2215(0x8f)](_0x5f2215(0x72)),_0x1638ab=await _0x599af3['getStateAsync'](_0x5f2215(0xc0));if(_0x3b7d92&&_0x3b7d92[_0x5f2215(0xa0)]&&_0x1638ab){const _0x2c2fc7=_0x3b7d92['val'];let _0x389f55=_0x1638ab[_0x5f2215(0xa0)];try{_0x389f55=JSON[_0x5f2215(0xf1)](_0x389f55);}catch(_0x4f591c){}_0x599af3['log'][_0x5f2215(0x8d)](_0x5f2215(0xc7)+_0x2c2fc7+'\x20=\x20'+_0x389f55),await _0x599af3[_0x5f2215(0xab)](_0x2c2fc7,_0x389f55);}else _0x599af3[_0x5f2215(0xe6)]['warn'](_0x5f2215(0x6e));}catch(_0x38e269){_0x599af3['log'][_0x5f2215(0xd8)](_0x5f2215(0x7d)+_0x38e269[_0x5f2215(0xa1)]);}}async function sendMorningBriefing(_0x2b56b4){const _0x50a64c=a0_0x45f6d2;if(!_0x2b56b4[_0x50a64c(0xbe)]){_0x2b56b4[_0x50a64c(0xe6)]['warn'](_0x50a64c(0x6b));return;}_0x2b56b4[_0x50a64c(0xe6)][_0x50a64c(0x8d)](_0x50a64c(0x89));try{updateApiTimestamp();const _0x1e3fd1=_0x50a64c(0xeb),_0x97c0ff=await _0x2b56b4[_0x50a64c(0xbe)][_0x50a64c(0xba)](_0x1e3fd1),_0x1b9189=_0x97c0ff[_0x50a64c(0x96)]['text']();_0x2b56b4[_0x50a64c(0xe6)][_0x50a64c(0x8d)](_0x50a64c(0x9c)+_0x1b9189[_0x50a64c(0xa5)]+').\x20Sending\x20notification...'),setup[_0x50a64c(0xc3)](_0x2b56b4,_0x50a64c(0xd2)+_0x1b9189);}catch(_0x181b54){_0x2b56b4[_0x50a64c(0xe6)]['error'](_0x50a64c(0xec)+_0x181b54['message']);}}module['exports']={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};