const a0_0x1547aa=a0_0x2e30;(function(_0x50f27c,_0x4c9107){const _0x5ce3ef=a0_0x2e30,_0x33a125=_0x50f27c();while(!![]){try{const _0x8833c4=parseInt(_0x5ce3ef(0x216))/0x1*(parseInt(_0x5ce3ef(0x1fb))/0x2)+parseInt(_0x5ce3ef(0x218))/0x3*(-parseInt(_0x5ce3ef(0x1b1))/0x4)+parseInt(_0x5ce3ef(0x1d8))/0x5+parseInt(_0x5ce3ef(0x214))/0x6*(parseInt(_0x5ce3ef(0x1bb))/0x7)+parseInt(_0x5ce3ef(0x1d3))/0x8*(parseInt(_0x5ce3ef(0x209))/0x9)+-parseInt(_0x5ce3ef(0x210))/0xa*(-parseInt(_0x5ce3ef(0x233))/0xb)+parseInt(_0x5ce3ef(0x1c6))/0xc*(-parseInt(_0x5ce3ef(0x1d0))/0xd);if(_0x8833c4===_0x4c9107)break;else _0x33a125['push'](_0x33a125['shift']());}catch(_0x5021a6){_0x33a125['push'](_0x33a125['shift']());}}}(a0_0x1969,0x3cd65));const a0_0x5dacad=(function(){let _0x25cc61=!![];return function(_0x4b5389,_0x8069f7){const _0x5ee464=_0x25cc61?function(){if(_0x8069f7){const _0x1547e5=_0x8069f7['apply'](_0x4b5389,arguments);return _0x8069f7=null,_0x1547e5;}}:function(){};return _0x25cc61=![],_0x5ee464;};}()),a0_0x1305d0=a0_0x5dacad(this,function(){const _0x4a880a=a0_0x2e30;return a0_0x1305d0[_0x4a880a(0x22d)]()['search']('(((.+)+)+)+$')[_0x4a880a(0x22d)]()[_0x4a880a(0x21e)](a0_0x1305d0)[_0x4a880a(0x21b)](_0x4a880a(0x223));});a0_0x1305d0();'use strict';const {GoogleGenerativeAI}=require(a0_0x1547aa(0x22a)),setup=require(a0_0x1547aa(0x1a9)),GEMINI_MODEL=a0_0x1547aa(0x202),LTM_DP_DAILY_DIGESTS=a0_0x1547aa(0x1e9),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x1547aa(0x21c),'senior_aal':'PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':a0_0x1547aa(0x19a),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x1547aa(0x229)};function canCallApi(){const _0x1c343f=a0_0x1547aa,_0x15c419=Date[_0x1c343f(0x1f4)]();return _0x15c419-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x3f0ddb=a0_0x1547aa;lastGlobalApiCall=Date[_0x3f0ddb(0x1f4)]();}async function getWeatherContext(_0x16e1a7){const _0x32ea26=a0_0x1547aa;if(!_0x16e1a7['config'][_0x32ea26(0x1b7)]||!_0x16e1a7['config'][_0x32ea26(0x1a0)])return _0x32ea26(0x204);try{const _0x3eda24=_0x16e1a7[_0x32ea26(0x201)][_0x32ea26(0x1a0)];let _0x2f5d08=await _0x16e1a7[_0x32ea26(0x1ea)](_0x3eda24+_0x32ea26(0x1e8));if(!_0x2f5d08)_0x2f5d08=await _0x16e1a7[_0x32ea26(0x1ea)](_0x3eda24+_0x32ea26(0x1b2));let _0x38b0c1=await _0x16e1a7[_0x32ea26(0x1ea)](_0x3eda24+_0x32ea26(0x225));if(!_0x38b0c1)_0x38b0c1=await _0x16e1a7[_0x32ea26(0x1ea)](_0x3eda24+_0x32ea26(0x215));let _0x127a9b=_0x32ea26(0x20d);const _0x329b97=await _0x16e1a7['getForeignStateAsync'](_0x3eda24+_0x32ea26(0x221));if(_0x329b97)_0x127a9b=_0x329b97['val']?'Nacht':_0x32ea26(0x1a5);if(_0x2f5d08&&_0x38b0c1)return _0x2f5d08[_0x32ea26(0x1dd)]+_0x32ea26(0x208)+_0x38b0c1[_0x32ea26(0x1dd)]+',\x20LichtverhÃ¤ltnisse:\x20'+_0x127a9b;}catch(_0x381e74){}return _0x32ea26(0x237);}async function consultButler(_0x506a99,_0x3c158f,_0x296605,_0x196f48){const _0x478e77=a0_0x1547aa;if(!_0x506a99[_0x478e77(0x1ee)])return{'approved':!![],'reason':_0x478e77(0x1cd)};const _0x236681=Date[_0x478e77(0x1f4)]();if(decisionCache[_0x3c158f]&&_0x236681-decisionCache[_0x3c158f][_0x478e77(0x234)]<CACHE_TTL_MS){const _0x42e6e1=decisionCache[_0x3c158f][_0x478e77(0x22c)];return _0x506a99[_0x478e77(0x231)][_0x478e77(0x1fd)](_0x478e77(0x236)+_0x3c158f+_0x478e77(0x1b8)+(_0x42e6e1['approved']?'OK':'NO')+'\x20('+_0x42e6e1['reason']+')'),_0x42e6e1;}if(!canCallApi())return _0x506a99[_0x478e77(0x231)][_0x478e77(0x1fd)]('ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20'+_0x3c158f+'\x20Ã¼bersprungen\x20(Auto-Approved).'),{'approved':!![],'reason':_0x478e77(0x1f7)};const _0x349284=new Date()['toLocaleTimeString'](),_0x2af331=await getWeatherContext(_0x506a99),_0x3bc25f=PERSONA_MAPPING[_0x506a99['config'][_0x478e77(0x217)]||_0x478e77(0x230)],_0x2e0e12=_0x478e77(0x222)+_0x349284+',\x20Wetter:\x20'+_0x2af331+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x196f48*0x64)[_0x478e77(0x1c5)](0x0)+_0x478e77(0x1a1)+_0x3c158f+_0x478e77(0x1ff)+_0x296605+_0x478e77(0x1ce)+_0x3bc25f+_0x478e77(0x20a);try{updateApiTimestamp();const _0x1b38a9=await _0x506a99[_0x478e77(0x1ee)]['generateContent'](_0x2e0e12),_0x2c7402=_0x1b38a9[_0x478e77(0x20b)][_0x478e77(0x1b6)]()[_0x478e77(0x19d)](/```json|```/g,'')[_0x478e77(0x20f)](),_0x7ba920=JSON['parse'](_0x2c7402);return decisionCache[_0x3c158f]={'decision':_0x7ba920,'timestamp':_0x236681},_0x7ba920;}catch(_0x536d6f){return _0x506a99[_0x478e77(0x231)]['warn']('ðŸ¤–\x20Butler\x20Brain\x20Error:\x20'+_0x536d6f[_0x478e77(0x1df)]),decisionCache[_0x3c158f]={'decision':{'approved':!![],'reason':_0x478e77(0x1e4)},'timestamp':_0x236681-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x3520b9,_0x33d1d1=''){const _0x36f1c4=a0_0x1547aa;if(!_0x3520b9[_0x36f1c4(0x1ee)])return;if(!canCallApi()){_0x3520b9['log']['debug']('ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x3520b9[_0x36f1c4(0x1af)][_0x36f1c4(0x1aa)]===0x0)return;const _0x354490=_0x3520b9['eventHistory'][_0x36f1c4(0x227)](0x0,0xf),_0x2cdeea=_0x3520b9[_0x36f1c4(0x19b)],_0x947eba=PERSONA_MAPPING[_0x3520b9[_0x36f1c4(0x201)]['aiPersona']||_0x36f1c4(0x230)],_0x356e54=_0x3520b9[_0x36f1c4(0x201)][_0x36f1c4(0x21f)]||'Keine\x20Details.';let _0x30b340='Unbekannt';try{const _0x1f1e4a=await _0x3520b9[_0x36f1c4(0x1e2)]('system.presenceWho');if(_0x1f1e4a&&_0x1f1e4a[_0x36f1c4(0x1dd)])_0x30b340=_0x1f1e4a[_0x36f1c4(0x1dd)];}catch(_0x36a411){}let _0x1e7667=![];try{const _0x1afb2e=await _0x3520b9[_0x36f1c4(0x1e2)](_0x36f1c4(0x1fa));if(_0x1afb2e&&_0x1afb2e[_0x36f1c4(0x1dd)])_0x1e7667=!![];}catch(_0x5e4cb2){}const _0x49cf62=_0x36f1c4(0x22b)+_0x947eba+_0x36f1c4(0x232)+_0x356e54+'.\x20SYSTEM_MODE:\x20'+_0x2cdeea+_0x36f1c4(0x1a3)+_0x30b340+'.\x20EVENTS:\x20'+JSON[_0x36f1c4(0x1bd)](_0x354490)+_0x36f1c4(0x228)+_0x33d1d1+_0x36f1c4(0x1d9);try{updateApiTimestamp();const _0x24ee75=await _0x3520b9['geminiModel'][_0x36f1c4(0x21d)](_0x49cf62),_0x3baf7b=JSON['parse'](_0x24ee75[_0x36f1c4(0x20b)][_0x36f1c4(0x1b6)]()[_0x36f1c4(0x19d)](/```json|```/g,'')[_0x36f1c4(0x20f)]());await _0x3520b9['setStateAsync']('analysis.lastResult',{'val':JSON[_0x36f1c4(0x1bd)](_0x3baf7b),'ack':!![]});if(_0x3baf7b[_0x36f1c4(0x1d6)])await _0x3520b9[_0x36f1c4(0x238)](_0x36f1c4(0x200),{'val':_0x3baf7b[_0x36f1c4(0x1d6)],'ack':!![]});const _0x1a73f2={'timestamp':Date[_0x36f1c4(0x1f4)](),'id':Date[_0x36f1c4(0x1f4)]()[_0x36f1c4(0x22d)](),'analysis':{'activity':{'summary':_0x3baf7b[_0x36f1c4(0x1d6)],'isAlert':_0x3baf7b[_0x36f1c4(0x19f)],'alertReason':_0x3baf7b[_0x36f1c4(0x1c4)]},'comfort':{'automationProposal':_0x3baf7b['automationProposal']}}};_0x3520b9['analysisHistory'][_0x36f1c4(0x1bf)](_0x1a73f2);if(_0x3520b9[_0x36f1c4(0x1be)][_0x36f1c4(0x1aa)]>0x32)_0x3520b9['analysisHistory'][_0x36f1c4(0x1f3)]();await _0x3520b9['setStateAsync'](_0x36f1c4(0x1a8),{'val':JSON[_0x36f1c4(0x1bd)](_0x3520b9[_0x36f1c4(0x1be)]),'ack':!![]});const _0x2fc6ba=_0x3baf7b[_0x36f1c4(0x19f)]||![];_0x2fc6ba!==_0x3520b9[_0x36f1c4(0x206)]&&(await _0x3520b9[_0x36f1c4(0x238)]('analysis.isAlert',{'val':_0x2fc6ba,'ack':!![]}),_0x3520b9[_0x36f1c4(0x206)]=_0x2fc6ba,_0x2fc6ba&&(await _0x3520b9[_0x36f1c4(0x238)](_0x36f1c4(0x1b5),{'val':_0x3baf7b[_0x36f1c4(0x1c4)],'ack':!![]}),setup[_0x36f1c4(0x1ab)](_0x3520b9,_0x36f1c4(0x1d2)+_0x3baf7b[_0x36f1c4(0x1c4)],![],_0x3baf7b[_0x36f1c4(0x1a6)])));if(_0x3baf7b['automationProposal']&&_0x3baf7b['automationProposal'][_0x36f1c4(0x1cc)]){await _0x3520b9[_0x36f1c4(0x238)](_0x36f1c4(0x1f0),{'val':!![],'ack':!![]}),await _0x3520b9['setStateAsync']('analysis.automation.description',{'val':_0x3baf7b[_0x36f1c4(0x1a4)][_0x36f1c4(0x219)],'ack':!![]}),await _0x3520b9[_0x36f1c4(0x238)](_0x36f1c4(0x224),{'val':_0x3baf7b['automationProposal'][_0x36f1c4(0x1cb)],'ack':!![]}),await _0x3520b9[_0x36f1c4(0x238)](_0x36f1c4(0x1a7),{'val':JSON[_0x36f1c4(0x1bd)](_0x3baf7b[_0x36f1c4(0x1a4)]['targetValue']),'ack':!![]});if(_0x1e7667)executeAutomationAction(_0x3520b9);}}catch(_0x5f3c0a){_0x3520b9[_0x36f1c4(0x231)]['error'](_0x36f1c4(0x1c9)+_0x5f3c0a[_0x36f1c4(0x1df)]);}}function a0_0x2e30(_0x13e72f,_0x24e569){const _0x67aa82=a0_0x1969();return a0_0x2e30=function(_0x1305d0,_0x5dacad){_0x1305d0=_0x1305d0-0x19a;let _0x1969c4=_0x67aa82[_0x1305d0];return _0x1969c4;},a0_0x2e30(_0x13e72f,_0x24e569);}async function createDailyDigest(_0xfac0b0,_0xa7bd5f){const _0x38c508=a0_0x1547aa;if(!_0xfac0b0[_0x38c508(0x1b9)])return;if(!canCallApi()){await _0xfac0b0[_0x38c508(0x238)](LTM_DP_STATUS,{'val':_0x38c508(0x1a2),'ack':!![]});return;}await _0xfac0b0['setStateAsync'](LTM_DP_STATUS,{'val':_0x38c508(0x1f8),'ack':!![]});if(!_0xfac0b0[_0x38c508(0x1ee)]||_0xfac0b0[_0x38c508(0x1cf)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0xfac0b0[_0x38c508(0x238)](LTM_DP_STATUS,{'val':_0x38c508(0x1da),'ack':!![]});return;}const _0x5004d4=JSON['parse'](JSON[_0x38c508(0x1bd)](_0xfac0b0[_0x38c508(0x1cf)])),_0x18f0cf=_0x5004d4[_0x38c508(0x1aa)],_0x4109b3=_0x38c508(0x1f6)+JSON[_0x38c508(0x1bd)](_0x5004d4);try{updateApiTimestamp();const _0x53a674=await _0xfac0b0[_0x38c508(0x1ee)][_0x38c508(0x21d)](_0x4109b3),_0x7a6e0c=JSON['parse'](_0x53a674[_0x38c508(0x20b)][_0x38c508(0x1b6)]()['replace'](/```json|```/g,'')[_0x38c508(0x20f)]()),_0x295d2e={'timestamp':new Date()[_0x38c508(0x235)](),'eventCount':_0x18f0cf,'summary':_0x7a6e0c[_0x38c508(0x1d6)]||'Digest','activityLevel':_0x7a6e0c[_0x38c508(0x22e)]||'normal','systemMode':_0xfac0b0['currentSystemMode']};_0xfac0b0[_0x38c508(0x20c)][_0x38c508(0x1e5)](_0x295d2e);const _0x5cb838=_0xfac0b0[_0x38c508(0x201)][_0x38c508(0x1d4)]||0x3c;_0xfac0b0[_0x38c508(0x20c)]['length']>_0x5cb838&&_0xfac0b0[_0x38c508(0x20c)][_0x38c508(0x1c1)](0x0,_0xfac0b0['dailyDigests'][_0x38c508(0x1aa)]-_0x5cb838);await _0xfac0b0[_0x38c508(0x238)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x38c508(0x1bd)](_0xfac0b0['dailyDigests']),'ack':!![]}),_0xfac0b0[_0x38c508(0x1cf)]=[],await _0xfac0b0['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x38c508(0x1bd)](_0xfac0b0['rawEventLog']),'ack':!![]}),await _0xfac0b0[_0x38c508(0x238)](LTM_DP_STATUS,{'val':_0x38c508(0x1c3),'ack':!![]});const _0x59fdcd=_0x38c508(0x1ac)+_0x7a6e0c['summary']+_0x38c508(0x1bc)+_0x7a6e0c[_0x38c508(0x22e)];setup[_0x38c508(0x1ab)](_0xfac0b0,_0x59fdcd,![],![]);if(_0xfac0b0['isProVersion']&&_0xa7bd5f)_0xa7bd5f[_0x38c508(0x212)](_0xfac0b0,_0x38c508(0x1f5),{'digest':_0x295d2e});}catch(_0x3363b1){_0xfac0b0['log'][_0x38c508(0x1eb)](_0x3363b1['message']);}}async function runBaselineDriftAnalysis(_0x4c28cd){const _0x561809=a0_0x1547aa;if(!_0x4c28cd['isProVersion']||!_0x4c28cd['geminiModel'])return;if(!canCallApi())return;const _0x47ede5=_0x4c28cd[_0x561809(0x201)][_0x561809(0x1b0)]||0xe;if(_0x4c28cd['dailyDigests'][_0x561809(0x1aa)]<_0x47ede5+0x7){await _0x4c28cd['setStateAsync'](_0x561809(0x21a),{'val':_0x561809(0x1e7),'ack':!![]});return;}const _0x4f1d3f=_0x4c28cd[_0x561809(0x20c)][_0x561809(0x227)](-_0x47ede5),_0x2eebd3=_0x4c28cd['dailyDigests'][_0x561809(0x227)](0x0,_0x4c28cd['dailyDigests'][_0x561809(0x1aa)]-_0x47ede5),_0x12afd6=_0x561809(0x1ba)+JSON[_0x561809(0x1bd)](_0x2eebd3)+_0x561809(0x207)+JSON[_0x561809(0x1bd)](_0x4f1d3f);try{updateApiTimestamp();const _0x228944=await _0x4c28cd['geminiModel']['generateContent'](_0x12afd6),_0x4af48a=JSON[_0x561809(0x1ed)](_0x228944[_0x561809(0x20b)][_0x561809(0x1b6)]()['replace'](/```json|```/g,'')[_0x561809(0x20f)]());_0x4af48a['baselineDrift']&&(await _0x4c28cd[_0x561809(0x238)]('LTM.driftAnalysis.baselineDrift',{'val':_0x4af48a[_0x561809(0x1c2)],'ack':!![]}),await _0x4c28cd[_0x561809(0x238)](_0x561809(0x203),{'val':_0x4af48a[_0x561809(0x1ca)],'ack':!![]}),await _0x4c28cd[_0x561809(0x238)](_0x561809(0x1d1),{'val':Date[_0x561809(0x1f4)](),'ack':!![]}));}catch(_0x401727){}}async function executeAutomationAction(_0x1d698e){const _0x2f2b9e=a0_0x1547aa;try{const _0x16a5d3=await _0x1d698e[_0x2f2b9e(0x1e2)](_0x2f2b9e(0x224)),_0x3c59e3=await _0x1d698e[_0x2f2b9e(0x1e2)]('analysis.automation.targetValue');if(_0x16a5d3&&_0x16a5d3[_0x2f2b9e(0x1dd)]&&_0x3c59e3){const _0x10a1e7=_0x16a5d3[_0x2f2b9e(0x1dd)];let _0x558872=_0x3c59e3['val'];try{_0x558872=JSON[_0x2f2b9e(0x1ed)](_0x558872);}catch(_0x51f01a){}_0x1d698e[_0x2f2b9e(0x231)][_0x2f2b9e(0x1e1)](_0x2f2b9e(0x205)+_0x10a1e7+_0x2f2b9e(0x1fc)+_0x558872),await _0x1d698e['setForeignStateAsync'](_0x10a1e7,_0x558872);}else _0x1d698e[_0x2f2b9e(0x231)][_0x2f2b9e(0x1f2)](_0x2f2b9e(0x211));}catch(_0x5d44b4){_0x1d698e[_0x2f2b9e(0x231)]['error']('BUTLER\x20Execution\x20Error:\x20'+_0x5d44b4[_0x2f2b9e(0x1df)]);}}async function sendMorningBriefing(_0x58cc8e){const _0x147cdf=a0_0x1547aa;if(!_0x58cc8e[_0x147cdf(0x1ee)]){_0x58cc8e['log'][_0x147cdf(0x1f2)]('ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.');return;}_0x58cc8e['log']['info'](_0x147cdf(0x22f));try{updateApiTimestamp();const _0xf6077=_0x147cdf(0x1c8),_0x3a1579=await _0x58cc8e[_0x147cdf(0x1ee)][_0x147cdf(0x21d)](_0xf6077),_0x44aacd=_0x3a1579['response'][_0x147cdf(0x1b6)]();_0x58cc8e[_0x147cdf(0x231)][_0x147cdf(0x1e1)]('ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20'+_0x44aacd[_0x147cdf(0x1aa)]+').\x20Sending\x20notification...'),setup['sendNotification'](_0x58cc8e,_0x147cdf(0x220)+_0x44aacd);}catch(_0x407d7d){_0x58cc8e[_0x147cdf(0x231)][_0x147cdf(0x1eb)](_0x147cdf(0x1e6)+_0x407d7d[_0x147cdf(0x1df)]);}}async function generateHealthReport(_0x2389b7,_0x3c8e46){const _0x223ba0=a0_0x1547aa;if(!_0x2389b7[_0x223ba0(0x1ee)])return;const _0x373f06=Date[_0x223ba0(0x1f4)]();_0x373f06-lastGlobalApiCall<0xbb8&&(_0x2389b7[_0x223ba0(0x231)]['debug'](_0x223ba0(0x1ef)),await new Promise(_0x8ea566=>setTimeout(_0x8ea566,0x7d0)));const _0x30ce89=new Date();let _0x393dd3=0x0,_0x270fbb=_0x30ce89['getTime'](),_0x5464ff='';if(_0x3c8e46==='NIGHT'){const _0x11532c=new Date(_0x30ce89);_0x11532c[_0x223ba0(0x1dc)](_0x11532c[_0x223ba0(0x1d7)]()-0x1),_0x11532c[_0x223ba0(0x213)](0x16,0x0,0x0,0x0),_0x393dd3=_0x11532c[_0x223ba0(0x1c0)]();const _0xc0fcd8=new Date(_0x30ce89);_0xc0fcd8[_0x223ba0(0x213)](0x8,0x0,0x0,0x0),_0x270fbb=_0xc0fcd8[_0x223ba0(0x1c0)](),_0x5464ff=_0x223ba0(0x1c7);}else{const _0x941f0=new Date(_0x30ce89);_0x941f0['setHours'](0x8,0x0,0x0,0x0),_0x393dd3=_0x941f0[_0x223ba0(0x1c0)](),_0x5464ff='Analysiere\x20diese\x20Events\x20des\x20TAGES\x20(08:00-Jetzt).\x20AktivitÃ¤t?\x20Mahlzeiten?\x20HaustÃ¼r?\x20Antwort\x20kurz\x20fÃ¼r\x20den\x20besorgten\x20Sohn\x20(max\x202\x20SÃ¤tze).';}const _0x767270=_0x2389b7[_0x223ba0(0x1af)][_0x223ba0(0x226)](_0x208c51=>_0x208c51['timestamp']>=_0x393dd3&&_0x208c51['timestamp']<=_0x270fbb);if(_0x767270[_0x223ba0(0x1aa)]===0x0){const _0x39f61f=_0x3c8e46===_0x223ba0(0x20e)?_0x223ba0(0x1ec):_0x223ba0(0x1ad),_0x30d402=_0x3c8e46==='NIGHT'?_0x223ba0(0x1db):'analysis.health.geminiDay';await _0x2389b7['setStateAsync'](_0x30d402,{'val':_0x39f61f,'ack':!![]});return;}const _0x138abc=_0x767270[_0x223ba0(0x1f1)](_0x41a674=>new Date(_0x41a674[_0x223ba0(0x234)])[_0x223ba0(0x1e3)]([],{'hour':_0x223ba0(0x1de),'minute':_0x223ba0(0x1de)})+'\x20'+_0x41a674['name']+'\x20('+_0x41a674[_0x223ba0(0x19e)]+')')[_0x223ba0(0x1e0)]('\x0a'),_0x4bb418=_0x223ba0(0x1f9)+_0x5464ff+_0x223ba0(0x1d5)+_0x138abc+_0x223ba0(0x1fe);try{updateApiTimestamp();const _0x587207=await _0x2389b7[_0x223ba0(0x1ee)][_0x223ba0(0x21d)](_0x4bb418),_0x371e85=_0x587207['response'][_0x223ba0(0x1b6)](),_0xeca277=_0x3c8e46===_0x223ba0(0x20e)?_0x223ba0(0x1db):_0x223ba0(0x1b4);await _0x2389b7['setStateAsync'](_0xeca277,{'val':_0x371e85,'ack':!![]}),_0x2389b7[_0x223ba0(0x231)][_0x223ba0(0x1e1)](_0x223ba0(0x1ae)+_0x3c8e46+_0x223ba0(0x1b3));}catch(_0x1e937b){_0x2389b7[_0x223ba0(0x231)][_0x223ba0(0x1eb)](_0x223ba0(0x19c)+_0x1e937b[_0x223ba0(0x1df)]);}}module['exports']={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler,'generateHealthReport':generateHealthReport};function a0_0x1969(){const _0x4d0656=['Bisher\x20keine\x20AktivitÃ¤t\x20seit\x2008:00\x20Uhr\x20verzeichnet.','ðŸ¤–\x20Health\x20Report\x20(','eventHistory','ltmStbWindowDays','1474260ILANHE','.forecast.current.temperature',')\x20generated.','analysis.health.geminiDay','analysis.alertReason','text','useWeather','\x20->\x20','isProVersion','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','255115pubxiM','\x0aAktivitÃ¤t:\x20','stringify','analysisHistory','unshift','getTime','splice','baselineDrift','Success','alertReason','toFixed','2350092tvEVvA','Analysiere\x20diese\x20Events\x20der\x20NACHT\x20(22:00-08:00).\x20War\x20der\x20Schlaf\x20ruhig?\x20Gab\x20es\x20BadgÃ¤nge?\x20Antwort\x20kurz\x20fÃ¼r\x20den\x20besorgten\x20Sohn\x20(max\x202\x20SÃ¤tze).','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','Gemini\x20Error:\x20','driftDetails','targetId','detected','KI\x20offline\x20(Fallback)','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','rawEventLog','65jTJnMI','LTM.driftAnalysis.lastCheck','âš ï¸\x20ALARM:\x20','112XvQHEb','ltmLtbWindowDays','\x0a\x20\x20\x20\x20EVENTS:\x0a','summary','getDate','2376675lzGERR','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','Skipped\x20(No\x20AI\x20or\x20Data)','analysis.health.geminiNight','setDate','val','2-digit','message','join','info','getStateAsync','toLocaleTimeString','KI-Fehler\x20(Fallback)','push','Briefing\x20Error:\x20','N/A\x20(Learning)','.Current.Temperature','LTM.dailyDigests','getForeignStateAsync','error','Keine\x20Daten\x20fÃ¼r\x20die\x20Nacht\x20aufgezeichnet\x20(Sensoren\x20ruhig).','parse','geminiModel','ðŸ¤–\x20API\x20Cooldown.\x20Waiting\x202s...','analysis.automation.patternDetected','map','warn','pop','now','ANALYZE_HEALTH','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','Traffic-Schutz\x20(Auto-Approved)','Started...','\x0a\x20\x20\x20\x20ROLLE:\x20Medizinischer\x20Assistent\x20fÃ¼r\x20AAL\x20(Ambient\x20Assisted\x20Living).\x0a\x20\x20\x20\x20AUFGABE:\x20','analysis.automation.autoApply','827486tkSFGX','\x20=\x20','debug','\x0a\x20\x20\x20\x20ANTWORT-STIL:\x20Sachlich,\x20beruhigend,\x20prÃ¤zise.\x20Keine\x20Floskeln.\x0a\x20\x20\x20\x20','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','analysis.activitySummary','config','models/gemini-flash-latest','LTM.driftAnalysis.driftDetails','Unbekannt\x20(Kein\x20Sensor)','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','lastAlertState','\x0aSTB:\x20','Â°C,\x20','31653hNuLwE','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','response','dailyDigests','Unbekannt','NIGHT','trim','17580fuKVZi','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','send','setHours','30JvSBeu','.forecast.current.state','1UbEgkQ','aiPersona','3YLEsAJ','description','LTM.driftAnalysis.baselineDrift','search','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','generateContent','constructor','livingContext','ðŸŒ…\x20Morning\x20Briefing:\x0a','.Current.IsNight','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','(((.+)+)+)+$','analysis.automation.targetId','.Current.WeatherText','filter','slice','.\x20EMERGENCY:\x20','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','@google/generative-ai','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','decision','toString','activityLevel','ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','generic','log','.\x20KONTEXT:\x20','2981rKjsxt','timestamp','toISOString','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','Wetterdaten\x20nicht\x20abrufbar','setStateAsync','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','currentSystemMode','Health\x20Report\x20Error:\x20','replace','value','isAlert','weatherInstance','%)\x20nach\x20\x22','Skipped\x20(Traffic)','.\x20ANWESEND:\x20','automationProposal','Tag','isEmergency','analysis.automation.targetValue','analysis.analysisHistory','./setup','length','sendNotification','ðŸ“…\x20Daily\x20Digest:\x0a'];a0_0x1969=function(){return _0x4d0656;};return a0_0x1969();}