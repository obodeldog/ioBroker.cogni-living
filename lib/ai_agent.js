const a0_0x4f866b=a0_0x264e;(function(_0x4395f4,_0x2f2eaa){const _0xc2a45a=a0_0x264e,_0x33bd83=_0x4395f4();while(!![]){try{const _0x269dbf=parseInt(_0xc2a45a(0x18a))/0x1+parseInt(_0xc2a45a(0x123))/0x2+-parseInt(_0xc2a45a(0x153))/0x3+parseInt(_0xc2a45a(0x12d))/0x4*(-parseInt(_0xc2a45a(0x125))/0x5)+-parseInt(_0xc2a45a(0x187))/0x6+-parseInt(_0xc2a45a(0x11a))/0x7*(parseInt(_0xc2a45a(0x14f))/0x8)+-parseInt(_0xc2a45a(0x14e))/0x9*(-parseInt(_0xc2a45a(0x16b))/0xa);if(_0x269dbf===_0x2f2eaa)break;else _0x33bd83['push'](_0x33bd83['shift']());}catch(_0x10b087){_0x33bd83['push'](_0x33bd83['shift']());}}}(a0_0x5bbe,0xc52cf));const a0_0x2bf4f2=(function(){let _0x726e9b=!![];return function(_0xf1e760,_0x4e9c6a){const _0x34d61a=_0x726e9b?function(){const _0x2516b9=a0_0x264e;if(_0x4e9c6a){const _0x3fce8e=_0x4e9c6a[_0x2516b9(0x115)](_0xf1e760,arguments);return _0x4e9c6a=null,_0x3fce8e;}}:function(){};return _0x726e9b=![],_0x34d61a;};}()),a0_0x4d8145=a0_0x2bf4f2(this,function(){const _0xbd6ebb=a0_0x264e;return a0_0x4d8145[_0xbd6ebb(0x135)]()['search'](_0xbd6ebb(0x198))[_0xbd6ebb(0x135)]()[_0xbd6ebb(0x147)](a0_0x4d8145)['search']('(((.+)+)+)+$');});a0_0x4d8145();function a0_0x264e(_0x59e024,_0x4e3f41){const _0x10fb5a=a0_0x5bbe();return a0_0x264e=function(_0x4d8145,_0x2bf4f2){_0x4d8145=_0x4d8145-0x114;let _0x5bbeed=_0x10fb5a[_0x4d8145];return _0x5bbeed;},a0_0x264e(_0x59e024,_0x4e3f41);}'use strict';const {GoogleGenerativeAI}=require(a0_0x4f866b(0x162)),setup=require(a0_0x4f866b(0x170)),GEMINI_MODEL=a0_0x4f866b(0x124),LTM_DP_DAILY_DIGESTS=a0_0x4f866b(0x178),LTM_DP_STATUS=a0_0x4f866b(0x186),LTM_DP_RAW_LOG=a0_0x4f866b(0x185),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x4f866b(0x188),'senior_aal':a0_0x4f866b(0x18d),'family':a0_0x4f866b(0x177),'single_comfort':a0_0x4f866b(0x17f),'security':a0_0x4f866b(0x138),'energy_saver':'PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'};function canCallApi(){const _0x1b15f4=a0_0x4f866b,_0x17e09f=Date[_0x1b15f4(0x146)]();return _0x17e09f-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0xcda663=a0_0x4f866b;lastGlobalApiCall=Date[_0xcda663(0x146)]();}function a0_0x5bbe(){const _0x5d4d92=['getForeignStateAsync','system.presenceWho','.forecast.current.state','KI-Fehler\x20(Fallback)','val','unshift','isAlert','trim','isProVersion','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','@google/generative-ai','weatherInstance','toISOString','analysisHistory','generic','approved','toFixed','config','stringify','10lWstTU','error','timestamp','alertReason','currentSystemMode','./setup','.Current.IsNight','ltmStbWindowDays','KI\x20offline\x20(Fallback)','Keine\x20Details.','eventHistory','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','LTM.dailyDigests','Traffic-Schutz\x20(Auto-Approved)','toLocaleTimeString','debug','driftDetails','analysis.isAlert','sendNotification','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','log','message','Unbekannt','detected','.Current.WeatherText','LTM.rawEventLog','LTM.processingStatus','2672736CaZRcI','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','.\x20EMERGENCY:\x20','1542989ShVGAm','\x0aSTB:\x20','livingContext','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','analysis.activitySummary','Skipped\x20(No\x20AI\x20or\x20Data)','targetValue','Skipped\x20(Traffic)','summary','automationProposal','¬∞C,\x20','N/A\x20(Learning)','Nacht','LTM.driftAnalysis.driftDetails','(((.+)+)+)+$','\x20->\x20','lastAlertState','apply','analysis.automation.targetValue','.\x20KONTEXT:\x20',',\x20Wetter:\x20','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','21LLqWhG','Gemini\x20Error:\x20','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','activityLevel','analysis.automation.autoApply','Started...','.\x20ANWESEND:\x20','generateContent','analysis.analysisHistory','901308dMldAp','models/gemini-flash-latest','577120xqmuZo','warn','Success','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','replace','push','.forecast.current.temperature','analysis.alertReason','20cUdIAQ','ANALYZE_HEALTH','analysis.automation.patternDetected','text','baselineDrift','geminiModel','parse','.\x20EVENTS:\x20','toString','Wetterdaten\x20nicht\x20abrufbar','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','Sicherheit\x20geht\x20vor.','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','response','LTM.driftAnalysis.baselineDrift','rawEventLog','%)\x20nach\x20\x22','Unbekannt\x20(Kein\x20Sensor)','Digest','.Current.Temperature','setForeignStateAsync','setStateAsync','analysis.lastResult','dailyDigests',',\x20Lichtverh√§ltnisse:\x20','now','constructor','Tag','normal','slice','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','aiPersona','length','14115051MDxjyF','2071240DMExei','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','ltmLtbWindowDays','üåÖ\x20Morning\x20Briefing:\x0a','2865180VHCDgQ','analysis.automation.targetId','ü§ñ\x20Butler\x20Brain\x20Error:\x20','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','getStateAsync'];a0_0x5bbe=function(){return _0x5d4d92;};return a0_0x5bbe();}async function getWeatherContext(_0xf19fc){const _0x38d56a=a0_0x4f866b;if(!_0xf19fc[_0x38d56a(0x169)]['useWeather']||!_0xf19fc[_0x38d56a(0x169)]['weatherInstance'])return _0x38d56a(0x13e);try{const _0x38833f=_0xf19fc[_0x38d56a(0x169)][_0x38d56a(0x163)];let _0x2193cc=await _0xf19fc[_0x38d56a(0x158)](_0x38833f+_0x38d56a(0x140));if(!_0x2193cc)_0x2193cc=await _0xf19fc['getForeignStateAsync'](_0x38833f+_0x38d56a(0x12b));let _0x29e610=await _0xf19fc['getForeignStateAsync'](_0x38833f+_0x38d56a(0x184));if(!_0x29e610)_0x29e610=await _0xf19fc[_0x38d56a(0x158)](_0x38833f+_0x38d56a(0x15a));let _0x2ebdab=_0x38d56a(0x182);const _0x4a4d72=await _0xf19fc[_0x38d56a(0x158)](_0x38833f+_0x38d56a(0x171));if(_0x4a4d72)_0x2ebdab=_0x4a4d72[_0x38d56a(0x15c)]?_0x38d56a(0x196):_0x38d56a(0x148);if(_0x2193cc&&_0x29e610)return _0x2193cc['val']+_0x38d56a(0x194)+_0x29e610[_0x38d56a(0x15c)]+_0x38d56a(0x145)+_0x2ebdab;}catch(_0xee153e){}return _0x38d56a(0x136);}async function consultButler(_0x4f4f9a,_0x5e7488,_0x4ffe9e,_0x4a7b2e){const _0x3514f5=a0_0x4f866b;if(!_0x4f4f9a['geminiModel'])return{'approved':!![],'reason':_0x3514f5(0x173)};const _0x3425bb=Date[_0x3514f5(0x146)]();if(decisionCache[_0x5e7488]&&_0x3425bb-decisionCache[_0x5e7488][_0x3514f5(0x16d)]<CACHE_TTL_MS){const _0x295c3c=decisionCache[_0x5e7488]['decision'];return _0x4f4f9a['log'][_0x3514f5(0x17b)]('ü§ñ\x20Butler\x20Cache\x20Hit:\x20'+_0x5e7488+_0x3514f5(0x199)+(_0x295c3c[_0x3514f5(0x167)]?'OK':'NO')+'\x20('+_0x295c3c['reason']+')'),_0x295c3c;}if(!canCallApi())return _0x4f4f9a[_0x3514f5(0x180)][_0x3514f5(0x17b)]('ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20'+_0x5e7488+'\x20√ºbersprungen\x20(Auto-Approved).'),{'approved':!![],'reason':_0x3514f5(0x179)};const _0xb9f26f=new Date()[_0x3514f5(0x17a)](),_0x3f13ea=await getWeatherContext(_0x4f4f9a),_0x5bc260=PERSONA_MAPPING[_0x4f4f9a[_0x3514f5(0x169)][_0x3514f5(0x14c)]||_0x3514f5(0x166)],_0x36ce6d=_0x3514f5(0x156)+_0xb9f26f+_0x3514f5(0x118)+_0x3f13ea+_0x3514f5(0x139)+(_0x4a7b2e*0x64)[_0x3514f5(0x168)](0x0)+_0x3514f5(0x13d)+_0x5e7488+_0x3514f5(0x119)+_0x4ffe9e+_0x3514f5(0x150)+_0x5bc260+_0x3514f5(0x11c);try{updateApiTimestamp();const _0x27fb06=await _0x4f4f9a[_0x3514f5(0x132)]['generateContent'](_0x36ce6d),_0x460c0d=_0x27fb06[_0x3514f5(0x13a)][_0x3514f5(0x130)]()[_0x3514f5(0x129)](/```json|```/g,'')[_0x3514f5(0x15f)](),_0x324886=JSON[_0x3514f5(0x133)](_0x460c0d);return decisionCache[_0x5e7488]={'decision':_0x324886,'timestamp':_0x3425bb},_0x324886;}catch(_0x518175){return _0x4f4f9a[_0x3514f5(0x180)][_0x3514f5(0x126)](_0x3514f5(0x155)+_0x518175[_0x3514f5(0x181)]),decisionCache[_0x5e7488]={'decision':{'approved':!![],'reason':_0x3514f5(0x15b)},'timestamp':_0x3425bb-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x185c1d,_0x513449=''){const _0x11b2c0=a0_0x4f866b;if(!_0x185c1d[_0x11b2c0(0x132)])return;if(!canCallApi()){_0x185c1d[_0x11b2c0(0x180)][_0x11b2c0(0x17b)]('ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x185c1d[_0x11b2c0(0x175)][_0x11b2c0(0x14d)]===0x0)return;const _0x4e00dc=_0x185c1d[_0x11b2c0(0x175)][_0x11b2c0(0x14a)](0x0,0xf),_0x207279=_0x185c1d[_0x11b2c0(0x16f)],_0x3a0ae8=PERSONA_MAPPING[_0x185c1d[_0x11b2c0(0x169)][_0x11b2c0(0x14c)]||'generic'],_0xd843fa=_0x185c1d[_0x11b2c0(0x169)][_0x11b2c0(0x18c)]||_0x11b2c0(0x174);let _0x419fb8=_0x11b2c0(0x182);try{const _0xf43b74=await _0x185c1d[_0x11b2c0(0x157)](_0x11b2c0(0x159));if(_0xf43b74&&_0xf43b74['val'])_0x419fb8=_0xf43b74['val'];}catch(_0xfa0a9){}let _0x5a079d=![];try{const _0x451cc2=await _0x185c1d['getStateAsync'](_0x11b2c0(0x11e));if(_0x451cc2&&_0x451cc2[_0x11b2c0(0x15c)])_0x5a079d=!![];}catch(_0x2c2231){}const _0x1adf10=_0x11b2c0(0x137)+_0x3a0ae8+_0x11b2c0(0x117)+_0xd843fa+'.\x20SYSTEM_MODE:\x20'+_0x207279+_0x11b2c0(0x120)+_0x419fb8+_0x11b2c0(0x134)+JSON[_0x11b2c0(0x16a)](_0x4e00dc)+_0x11b2c0(0x189)+_0x513449+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x1aa83f=await _0x185c1d[_0x11b2c0(0x132)][_0x11b2c0(0x121)](_0x1adf10),_0x4235ff=JSON['parse'](_0x1aa83f[_0x11b2c0(0x13a)][_0x11b2c0(0x130)]()['replace'](/```json|```/g,'')[_0x11b2c0(0x15f)]());await _0x185c1d[_0x11b2c0(0x142)](_0x11b2c0(0x143),{'val':JSON[_0x11b2c0(0x16a)](_0x4235ff),'ack':!![]});if(_0x4235ff[_0x11b2c0(0x192)])await _0x185c1d[_0x11b2c0(0x142)](_0x11b2c0(0x18e),{'val':_0x4235ff[_0x11b2c0(0x192)],'ack':!![]});const _0x3d6115={'timestamp':Date[_0x11b2c0(0x146)](),'id':Date[_0x11b2c0(0x146)]()[_0x11b2c0(0x135)](),'analysis':{'activity':{'summary':_0x4235ff[_0x11b2c0(0x192)],'isAlert':_0x4235ff[_0x11b2c0(0x15e)],'alertReason':_0x4235ff[_0x11b2c0(0x16e)]},'comfort':{'automationProposal':_0x4235ff[_0x11b2c0(0x193)]}}};_0x185c1d[_0x11b2c0(0x165)][_0x11b2c0(0x15d)](_0x3d6115);if(_0x185c1d[_0x11b2c0(0x165)]['length']>0x32)_0x185c1d[_0x11b2c0(0x165)]['pop']();await _0x185c1d['setStateAsync'](_0x11b2c0(0x122),{'val':JSON[_0x11b2c0(0x16a)](_0x185c1d[_0x11b2c0(0x165)]),'ack':!![]});const _0x1774a6=_0x4235ff[_0x11b2c0(0x15e)]||![];_0x1774a6!==_0x185c1d[_0x11b2c0(0x114)]&&(await _0x185c1d[_0x11b2c0(0x142)](_0x11b2c0(0x17d),{'val':_0x1774a6,'ack':!![]}),_0x185c1d['lastAlertState']=_0x1774a6,_0x1774a6&&(await _0x185c1d[_0x11b2c0(0x142)](_0x11b2c0(0x12c),{'val':_0x4235ff[_0x11b2c0(0x16e)],'ack':!![]}),setup[_0x11b2c0(0x17e)](_0x185c1d,'‚ö†Ô∏è\x20ALARM:\x20'+_0x4235ff[_0x11b2c0(0x16e)],![],_0x4235ff['isEmergency'])));if(_0x4235ff['automationProposal']&&_0x4235ff[_0x11b2c0(0x193)][_0x11b2c0(0x183)]){await _0x185c1d[_0x11b2c0(0x142)](_0x11b2c0(0x12f),{'val':!![],'ack':!![]}),await _0x185c1d['setStateAsync']('analysis.automation.description',{'val':_0x4235ff[_0x11b2c0(0x193)]['description'],'ack':!![]}),await _0x185c1d[_0x11b2c0(0x142)](_0x11b2c0(0x154),{'val':_0x4235ff[_0x11b2c0(0x193)]['targetId'],'ack':!![]}),await _0x185c1d[_0x11b2c0(0x142)](_0x11b2c0(0x116),{'val':JSON[_0x11b2c0(0x16a)](_0x4235ff[_0x11b2c0(0x193)][_0x11b2c0(0x190)]),'ack':!![]});if(_0x5a079d)executeAutomationAction(_0x185c1d);}}catch(_0x29ae33){_0x185c1d[_0x11b2c0(0x180)][_0x11b2c0(0x16c)](_0x11b2c0(0x11b)+_0x29ae33[_0x11b2c0(0x181)]);}}async function createDailyDigest(_0x29cc4c,_0x3cc3df){const _0x482824=a0_0x4f866b;if(!_0x29cc4c['isProVersion'])return;if(!canCallApi()){await _0x29cc4c[_0x482824(0x142)](LTM_DP_STATUS,{'val':_0x482824(0x191),'ack':!![]});return;}await _0x29cc4c['setStateAsync'](LTM_DP_STATUS,{'val':_0x482824(0x11f),'ack':!![]});if(!_0x29cc4c['geminiModel']||_0x29cc4c[_0x482824(0x13c)][_0x482824(0x14d)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x29cc4c[_0x482824(0x142)](LTM_DP_STATUS,{'val':_0x482824(0x18f),'ack':!![]});return;}const _0x5d972b=JSON['parse'](JSON[_0x482824(0x16a)](_0x29cc4c['rawEventLog'])),_0xb0f668=_0x5d972b['length'],_0x36ef4f=_0x482824(0x176)+JSON[_0x482824(0x16a)](_0x5d972b);try{updateApiTimestamp();const _0xbbd1d3=await _0x29cc4c[_0x482824(0x132)]['generateContent'](_0x36ef4f),_0x36f299=JSON[_0x482824(0x133)](_0xbbd1d3['response']['text']()[_0x482824(0x129)](/```json|```/g,'')['trim']()),_0x425ae9={'timestamp':new Date()[_0x482824(0x164)](),'eventCount':_0xb0f668,'summary':_0x36f299[_0x482824(0x192)]||_0x482824(0x13f),'activityLevel':_0x36f299[_0x482824(0x11d)]||_0x482824(0x149),'systemMode':_0x29cc4c[_0x482824(0x16f)]};_0x29cc4c['dailyDigests'][_0x482824(0x12a)](_0x425ae9);const _0x131b26=_0x29cc4c[_0x482824(0x169)][_0x482824(0x151)]||0x3c;_0x29cc4c['dailyDigests'][_0x482824(0x14d)]>_0x131b26&&_0x29cc4c[_0x482824(0x144)]['splice'](0x0,_0x29cc4c[_0x482824(0x144)][_0x482824(0x14d)]-_0x131b26);await _0x29cc4c[_0x482824(0x142)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x482824(0x16a)](_0x29cc4c['dailyDigests']),'ack':!![]}),_0x29cc4c[_0x482824(0x13c)]=[],await _0x29cc4c['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x29cc4c[_0x482824(0x13c)]),'ack':!![]}),await _0x29cc4c['setStateAsync'](LTM_DP_STATUS,{'val':_0x482824(0x127),'ack':!![]});if(_0x29cc4c[_0x482824(0x160)]&&_0x3cc3df)_0x3cc3df['send'](_0x29cc4c,_0x482824(0x12e),{'digest':_0x425ae9});}catch(_0xfdcd2e){_0x29cc4c[_0x482824(0x180)][_0x482824(0x16c)](_0xfdcd2e[_0x482824(0x181)]);}}async function runBaselineDriftAnalysis(_0x3a4fd7){const _0x39ef45=a0_0x4f866b;if(!_0x3a4fd7[_0x39ef45(0x160)]||!_0x3a4fd7[_0x39ef45(0x132)])return;if(!canCallApi())return;const _0x5ea164=_0x3a4fd7[_0x39ef45(0x169)][_0x39ef45(0x172)]||0xe;if(_0x3a4fd7['dailyDigests']['length']<_0x5ea164+0x7){await _0x3a4fd7['setStateAsync'](_0x39ef45(0x13b),{'val':_0x39ef45(0x195),'ack':!![]});return;}const _0x34d64f=_0x3a4fd7[_0x39ef45(0x144)]['slice'](-_0x5ea164),_0x2e49d2=_0x3a4fd7[_0x39ef45(0x144)][_0x39ef45(0x14a)](0x0,_0x3a4fd7[_0x39ef45(0x144)][_0x39ef45(0x14d)]-_0x5ea164),_0x457c4a=_0x39ef45(0x14b)+JSON[_0x39ef45(0x16a)](_0x2e49d2)+_0x39ef45(0x18b)+JSON['stringify'](_0x34d64f);try{updateApiTimestamp();const _0x206a4a=await _0x3a4fd7[_0x39ef45(0x132)]['generateContent'](_0x457c4a),_0x4e473b=JSON[_0x39ef45(0x133)](_0x206a4a[_0x39ef45(0x13a)][_0x39ef45(0x130)]()[_0x39ef45(0x129)](/```json|```/g,'')[_0x39ef45(0x15f)]());_0x4e473b[_0x39ef45(0x131)]&&(await _0x3a4fd7['setStateAsync'](_0x39ef45(0x13b),{'val':_0x4e473b[_0x39ef45(0x131)],'ack':!![]}),await _0x3a4fd7[_0x39ef45(0x142)](_0x39ef45(0x197),{'val':_0x4e473b[_0x39ef45(0x17c)],'ack':!![]}),await _0x3a4fd7[_0x39ef45(0x142)]('LTM.driftAnalysis.lastCheck',{'val':Date['now'](),'ack':!![]}));}catch(_0x1bf362){}}async function executeAutomationAction(_0x56d4dc){const _0x1a3b54=a0_0x4f866b;try{const _0x10ce53=await _0x56d4dc[_0x1a3b54(0x157)](_0x1a3b54(0x154)),_0x4112ee=await _0x56d4dc[_0x1a3b54(0x157)](_0x1a3b54(0x116));if(_0x10ce53&&_0x10ce53[_0x1a3b54(0x15c)]&&_0x4112ee){const _0x5636e9=_0x10ce53[_0x1a3b54(0x15c)];let _0x22f77c=_0x4112ee['val'];try{_0x22f77c=JSON[_0x1a3b54(0x133)](_0x22f77c);}catch(_0x5d43b2){}_0x56d4dc[_0x1a3b54(0x180)]['info']('ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x5636e9+'\x20=\x20'+_0x22f77c),await _0x56d4dc[_0x1a3b54(0x141)](_0x5636e9,_0x22f77c);}else _0x56d4dc[_0x1a3b54(0x180)][_0x1a3b54(0x126)](_0x1a3b54(0x128));}catch(_0x2021f4){_0x56d4dc[_0x1a3b54(0x180)][_0x1a3b54(0x16c)]('BUTLER\x20Execution\x20Error:\x20'+_0x2021f4[_0x1a3b54(0x181)]);}}async function sendMorningBriefing(_0x3e403f){const _0x2a8abb=a0_0x4f866b;if(!_0x3e403f[_0x2a8abb(0x132)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x239e16=_0x2a8abb(0x161),_0xe8e44b=await _0x3e403f[_0x2a8abb(0x132)][_0x2a8abb(0x121)](_0x239e16),_0x258517=_0xe8e44b[_0x2a8abb(0x13a)][_0x2a8abb(0x130)]();setup[_0x2a8abb(0x17e)](_0x3e403f,_0x2a8abb(0x152)+_0x258517);}catch(_0x5869f5){_0x3e403f[_0x2a8abb(0x180)][_0x2a8abb(0x16c)]('Briefing\x20Error:\x20'+_0x5869f5[_0x2a8abb(0x181)]);}}module['exports']={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};