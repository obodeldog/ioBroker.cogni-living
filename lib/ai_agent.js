const a0_0x7b374f=a0_0x3c76;(function(_0x341764,_0x254a4e){const _0x1336db=a0_0x3c76,_0x7f93f1=_0x341764();while(!![]){try{const _0x2d24ba=-parseInt(_0x1336db(0x205))/0x1+parseInt(_0x1336db(0x1a2))/0x2+parseInt(_0x1336db(0x1dc))/0x3*(-parseInt(_0x1336db(0x18e))/0x4)+-parseInt(_0x1336db(0x1c2))/0x5*(parseInt(_0x1336db(0x206))/0x6)+-parseInt(_0x1336db(0x1ff))/0x7+-parseInt(_0x1336db(0x19f))/0x8*(-parseInt(_0x1336db(0x1b8))/0x9)+-parseInt(_0x1336db(0x203))/0xa*(-parseInt(_0x1336db(0x1b5))/0xb);if(_0x2d24ba===_0x254a4e)break;else _0x7f93f1['push'](_0x7f93f1['shift']());}catch(_0x452c90){_0x7f93f1['push'](_0x7f93f1['shift']());}}}(a0_0xf66c,0xef512));const a0_0x2f0bd2=(function(){let _0x1bd127=!![];return function(_0x475d20,_0x458f5e){const _0x3c2264=_0x1bd127?function(){const _0x3c3a97=a0_0x3c76;if(_0x458f5e){const _0x381f31=_0x458f5e[_0x3c3a97(0x197)](_0x475d20,arguments);return _0x458f5e=null,_0x381f31;}}:function(){};return _0x1bd127=![],_0x3c2264;};}()),a0_0x2d2deb=a0_0x2f0bd2(this,function(){const _0x3bb36e=a0_0x3c76;return a0_0x2d2deb[_0x3bb36e(0x1db)]()[_0x3bb36e(0x201)](_0x3bb36e(0x19d))[_0x3bb36e(0x1db)]()['constructor'](a0_0x2d2deb)[_0x3bb36e(0x201)](_0x3bb36e(0x19d));});a0_0x2d2deb();'use strict';function a0_0xf66c(){const _0x2678cc=['aiPersona','summary','warn','sendNotification','livingContext','.\x20SYSTEM_MODE:\x20','generateContent','.\x20ANWESEND:\x20','getStateAsync','analysis.automation.targetValue','alertReason','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','slice','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','BUTLER\x20Execution\x20Error:\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','Tag','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','analysisHistory','@google/generative-ai','LTM.driftAnalysis.driftDetails','toLocaleTimeString','rawEventLog','toString','133410koFOao','Unbekannt','activityLevel','Started...','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','LTM.processingStatus','.\x20EMERGENCY:\x20','analysis.automation.autoApply','LTM.driftAnalysis.baselineDrift','response','Digest','\x20=\x20','Skipped\x20(Traffic)','Briefing\x20Error:\x20','automationProposal','\x0aAktivitÃ¤t:\x20','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','âš ï¸\x20ALARM:\x20','.Current.Temperature','normal','timestamp','unshift','Skipped\x20(No\x20AI\x20or\x20Data)','debug','send','KI\x20offline\x20(Fallback)','analysis.isAlert','.Current.WeatherText','analysis.lastResult','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','exports','ANALYZE_HEALTH','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','2905882qWefFt','\x0aSTB:\x20','search','ltmStbWindowDays','4211450dPcwPa','val','1353670liWebo','325830GVSwUy','trim','baselineDrift','dailyDigests','replace','ðŸŒ…\x20Morning\x20Briefing:\x0a','KI-Fehler\x20(Fallback)','weatherInstance','targetValue','text','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','analysis.automation.targetId','LTM.rawEventLog','analysis.alertReason','pop','Nacht','stringify','currentSystemMode','analysis.activitySummary','isProVersion','Wetterdaten\x20nicht\x20abrufbar','targetId','96OsVBEj','setStateAsync','config','system.presenceWho','LTM.driftAnalysis.lastCheck','analysis.automation.patternDetected','\x20->\x20','Unbekannt\x20(Kein\x20Sensor)','.Current.IsNight','apply','Sicherheit\x20geht\x20vor.','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','reason','message','log','(((.+)+)+)+$','now','123560nfbAxy','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','429636PfIqMF','Traffic-Schutz\x20(Auto-Approved)','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','.\x20KONTEXT:\x20','./setup','lastAlertState','ðŸ“…\x20Daily\x20Digest:\x0a','Gemini\x20Error:\x20','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','error',').\x20Sending\x20notification...','driftDetails','LTM.dailyDigests','%)\x20nach\x20\x22','length','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','Keine\x20Details.','push','99TlAQru','getForeignStateAsync','geminiModel','333fTXelP','info','description','generic','eventHistory','models/gemini-flash-latest','isAlert',',\x20Wetter:\x20','parse','N/A\x20(Learning)','70gtdoiU','ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.'];a0_0xf66c=function(){return _0x2678cc;};return a0_0xf66c();}const {GoogleGenerativeAI}=require(a0_0x7b374f(0x1d7)),setup=require(a0_0x7b374f(0x1a6)),GEMINI_MODEL=a0_0x7b374f(0x1bd),LTM_DP_DAILY_DIGESTS=a0_0x7b374f(0x1af),LTM_DP_STATUS=a0_0x7b374f(0x1e2),LTM_DP_RAW_LOG=a0_0x7b374f(0x212),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x7b374f(0x1e1),'senior_aal':a0_0x7b374f(0x1a4),'family':a0_0x7b374f(0x199),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':a0_0x7b374f(0x198),'energy_saver':a0_0x7b374f(0x1e0)};function canCallApi(){const _0x5a85c8=Date['now']();return _0x5a85c8-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x2be3db=a0_0x7b374f;lastGlobalApiCall=Date[_0x2be3db(0x19e)]();}async function getWeatherContext(_0x404453){const _0x468c84=a0_0x7b374f;if(!_0x404453['config']['useWeather']||!_0x404453[_0x468c84(0x190)][_0x468c84(0x20d)])return _0x468c84(0x195);try{const _0x4608c=_0x404453['config']['weatherInstance'];let _0x34551d=await _0x404453[_0x468c84(0x1b6)](_0x4608c+_0x468c84(0x1f0));if(!_0x34551d)_0x34551d=await _0x404453['getForeignStateAsync'](_0x4608c+'.forecast.current.temperature');let _0x330bd8=await _0x404453['getForeignStateAsync'](_0x4608c+_0x468c84(0x1f9));if(!_0x330bd8)_0x330bd8=await _0x404453[_0x468c84(0x1b6)](_0x4608c+'.forecast.current.state');let _0x3eaeb2='Unbekannt';const _0x38dc4b=await _0x404453['getForeignStateAsync'](_0x4608c+_0x468c84(0x196));if(_0x38dc4b)_0x3eaeb2=_0x38dc4b[_0x468c84(0x204)]?_0x468c84(0x215):_0x468c84(0x1d4);if(_0x34551d&&_0x330bd8)return _0x34551d[_0x468c84(0x204)]+'Â°C,\x20'+_0x330bd8[_0x468c84(0x204)]+',\x20LichtverhÃ¤ltnisse:\x20'+_0x3eaeb2;}catch(_0x564fa3){}return _0x468c84(0x18c);}async function consultButler(_0x9d3b70,_0x4b7695,_0x6c4796,_0x60e209){const _0x351057=a0_0x7b374f;if(!_0x9d3b70[_0x351057(0x1b7)])return{'approved':!![],'reason':_0x351057(0x1f7)};const _0xfc9670=Date[_0x351057(0x19e)]();if(decisionCache[_0x4b7695]&&_0xfc9670-decisionCache[_0x4b7695][_0x351057(0x1f2)]<CACHE_TTL_MS){const _0x5e79c3=decisionCache[_0x4b7695]['decision'];return _0x9d3b70[_0x351057(0x19c)][_0x351057(0x1f5)](_0x351057(0x1b2)+_0x4b7695+_0x351057(0x194)+(_0x5e79c3['approved']?'OK':'NO')+'\x20('+_0x5e79c3[_0x351057(0x19a)]+')'),_0x5e79c3;}if(!canCallApi())return _0x9d3b70[_0x351057(0x19c)][_0x351057(0x1f5)]('ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20'+_0x4b7695+'\x20Ã¼bersprungen\x20(Auto-Approved).'),{'approved':!![],'reason':_0x351057(0x1a3)};const _0x3d4d34=new Date()[_0x351057(0x1d9)](),_0x11c6e9=await getWeatherContext(_0x9d3b70),_0x59e6d6=PERSONA_MAPPING[_0x9d3b70[_0x351057(0x190)][_0x351057(0x1c4)]||_0x351057(0x1bb)],_0x4d19f6=_0x351057(0x1ee)+_0x3d4d34+_0x351057(0x1bf)+_0x11c6e9+_0x351057(0x1ab)+(_0x60e209*0x64)['toFixed'](0x0)+_0x351057(0x1b0)+_0x4b7695+_0x351057(0x1a0)+_0x6c4796+_0x351057(0x1d1)+_0x59e6d6+_0x351057(0x210);try{updateApiTimestamp();const _0x1e7275=await _0x9d3b70[_0x351057(0x1b7)][_0x351057(0x1ca)](_0x4d19f6),_0x4f074a=_0x1e7275[_0x351057(0x1e6)][_0x351057(0x20f)]()[_0x351057(0x20a)](/```json|```/g,'')['trim'](),_0xa4776f=JSON[_0x351057(0x1c0)](_0x4f074a);return decisionCache[_0x4b7695]={'decision':_0xa4776f,'timestamp':_0xfc9670},_0xa4776f;}catch(_0xbfebf8){return _0x9d3b70[_0x351057(0x19c)][_0x351057(0x1c6)](_0x351057(0x1fb)+_0xbfebf8[_0x351057(0x19b)]),decisionCache[_0x4b7695]={'decision':{'approved':!![],'reason':_0x351057(0x20c)},'timestamp':_0xfc9670-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x351057(0x20c)};}}async function runGeminiAnalysis(_0x48995d,_0x279300=''){const _0x48e737=a0_0x7b374f;if(!_0x48995d['geminiModel'])return;if(!canCallApi()){_0x48995d[_0x48e737(0x19c)]['debug']('ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x48995d[_0x48e737(0x1bc)][_0x48e737(0x1b1)]===0x0)return;const _0x1ebc8b=_0x48995d[_0x48e737(0x1bc)][_0x48e737(0x1d0)](0x0,0xf),_0x16dcd6=_0x48995d[_0x48e737(0x217)],_0x1a4671=PERSONA_MAPPING[_0x48995d[_0x48e737(0x190)][_0x48e737(0x1c4)]||_0x48e737(0x1bb)],_0x1700e5=_0x48995d[_0x48e737(0x190)][_0x48e737(0x1c8)]||_0x48e737(0x1b3);let _0x53a512=_0x48e737(0x1dd);try{const _0x982254=await _0x48995d[_0x48e737(0x1cc)](_0x48e737(0x191));if(_0x982254&&_0x982254[_0x48e737(0x204)])_0x53a512=_0x982254[_0x48e737(0x204)];}catch(_0x49a8d3){}let _0x5d7014=![];try{const _0xdd435f=await _0x48995d['getStateAsync'](_0x48e737(0x1e4));if(_0xdd435f&&_0xdd435f['val'])_0x5d7014=!![];}catch(_0x3c08ad){}const _0x1bbabc=_0x48e737(0x1d3)+_0x1a4671+_0x48e737(0x1a5)+_0x1700e5+_0x48e737(0x1c9)+_0x16dcd6+_0x48e737(0x1cb)+_0x53a512+'.\x20EVENTS:\x20'+JSON['stringify'](_0x1ebc8b)+_0x48e737(0x1e3)+_0x279300+_0x48e737(0x1aa);try{updateApiTimestamp();const _0x46856a=await _0x48995d['geminiModel'][_0x48e737(0x1ca)](_0x1bbabc),_0x366465=JSON[_0x48e737(0x1c0)](_0x46856a['response'][_0x48e737(0x20f)]()[_0x48e737(0x20a)](/```json|```/g,'')[_0x48e737(0x207)]());await _0x48995d[_0x48e737(0x18f)](_0x48e737(0x1fa),{'val':JSON['stringify'](_0x366465),'ack':!![]});if(_0x366465[_0x48e737(0x1c5)])await _0x48995d['setStateAsync'](_0x48e737(0x18a),{'val':_0x366465[_0x48e737(0x1c5)],'ack':!![]});const _0x3dd817={'timestamp':Date['now'](),'id':Date[_0x48e737(0x19e)]()[_0x48e737(0x1db)](),'analysis':{'activity':{'summary':_0x366465[_0x48e737(0x1c5)],'isAlert':_0x366465[_0x48e737(0x1be)],'alertReason':_0x366465[_0x48e737(0x1ce)]},'comfort':{'automationProposal':_0x366465[_0x48e737(0x1eb)]}}};_0x48995d[_0x48e737(0x1d6)][_0x48e737(0x1f3)](_0x3dd817);if(_0x48995d['analysisHistory'][_0x48e737(0x1b1)]>0x32)_0x48995d[_0x48e737(0x1d6)][_0x48e737(0x214)]();await _0x48995d[_0x48e737(0x18f)]('analysis.analysisHistory',{'val':JSON[_0x48e737(0x216)](_0x48995d['analysisHistory']),'ack':!![]});const _0x59ed2=_0x366465[_0x48e737(0x1be)]||![];_0x59ed2!==_0x48995d[_0x48e737(0x1a7)]&&(await _0x48995d['setStateAsync'](_0x48e737(0x1f8),{'val':_0x59ed2,'ack':!![]}),_0x48995d[_0x48e737(0x1a7)]=_0x59ed2,_0x59ed2&&(await _0x48995d[_0x48e737(0x18f)](_0x48e737(0x213),{'val':_0x366465[_0x48e737(0x1ce)],'ack':!![]}),setup['sendNotification'](_0x48995d,_0x48e737(0x1ef)+_0x366465[_0x48e737(0x1ce)],![],_0x366465['isEmergency'])));if(_0x366465[_0x48e737(0x1eb)]&&_0x366465['automationProposal']['detected']){await _0x48995d[_0x48e737(0x18f)](_0x48e737(0x193),{'val':!![],'ack':!![]}),await _0x48995d[_0x48e737(0x18f)]('analysis.automation.description',{'val':_0x366465[_0x48e737(0x1eb)][_0x48e737(0x1ba)],'ack':!![]}),await _0x48995d[_0x48e737(0x18f)](_0x48e737(0x211),{'val':_0x366465['automationProposal'][_0x48e737(0x18d)],'ack':!![]}),await _0x48995d[_0x48e737(0x18f)](_0x48e737(0x1cd),{'val':JSON[_0x48e737(0x216)](_0x366465[_0x48e737(0x1eb)][_0x48e737(0x20e)]),'ack':!![]});if(_0x5d7014)executeAutomationAction(_0x48995d);}}catch(_0x3eb7ca){_0x48995d[_0x48e737(0x19c)][_0x48e737(0x1ac)](_0x48e737(0x1a9)+_0x3eb7ca[_0x48e737(0x19b)]);}}async function createDailyDigest(_0x58b7ee,_0x59eee5){const _0x7b1d82=a0_0x7b374f;if(!_0x58b7ee[_0x7b1d82(0x18b)])return;if(!canCallApi()){await _0x58b7ee[_0x7b1d82(0x18f)](LTM_DP_STATUS,{'val':_0x7b1d82(0x1e9),'ack':!![]});return;}await _0x58b7ee[_0x7b1d82(0x18f)](LTM_DP_STATUS,{'val':_0x7b1d82(0x1df),'ack':!![]});if(!_0x58b7ee[_0x7b1d82(0x1b7)]||_0x58b7ee[_0x7b1d82(0x1da)][_0x7b1d82(0x1b1)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x58b7ee[_0x7b1d82(0x18f)](LTM_DP_STATUS,{'val':_0x7b1d82(0x1f4),'ack':!![]});return;}const _0x41e191=JSON['parse'](JSON[_0x7b1d82(0x216)](_0x58b7ee[_0x7b1d82(0x1da)])),_0x46079f=_0x41e191[_0x7b1d82(0x1b1)],_0x315cb8=_0x7b1d82(0x1ed)+JSON['stringify'](_0x41e191);try{updateApiTimestamp();const _0x3c1893=await _0x58b7ee['geminiModel'][_0x7b1d82(0x1ca)](_0x315cb8),_0x525eb9=JSON[_0x7b1d82(0x1c0)](_0x3c1893[_0x7b1d82(0x1e6)][_0x7b1d82(0x20f)]()[_0x7b1d82(0x20a)](/```json|```/g,'')[_0x7b1d82(0x207)]()),_0x5c6333={'timestamp':new Date()['toISOString'](),'eventCount':_0x46079f,'summary':_0x525eb9[_0x7b1d82(0x1c5)]||_0x7b1d82(0x1e7),'activityLevel':_0x525eb9[_0x7b1d82(0x1de)]||_0x7b1d82(0x1f1),'systemMode':_0x58b7ee[_0x7b1d82(0x217)]};_0x58b7ee['dailyDigests'][_0x7b1d82(0x1b4)](_0x5c6333);const _0x13bdd2=_0x58b7ee['config']['ltmLtbWindowDays']||0x3c;_0x58b7ee[_0x7b1d82(0x209)][_0x7b1d82(0x1b1)]>_0x13bdd2&&_0x58b7ee[_0x7b1d82(0x209)]['splice'](0x0,_0x58b7ee[_0x7b1d82(0x209)][_0x7b1d82(0x1b1)]-_0x13bdd2);await _0x58b7ee[_0x7b1d82(0x18f)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x7b1d82(0x216)](_0x58b7ee[_0x7b1d82(0x209)]),'ack':!![]}),_0x58b7ee['rawEventLog']=[],await _0x58b7ee[_0x7b1d82(0x18f)](LTM_DP_RAW_LOG,{'val':JSON[_0x7b1d82(0x216)](_0x58b7ee[_0x7b1d82(0x1da)]),'ack':!![]}),await _0x58b7ee['setStateAsync'](LTM_DP_STATUS,{'val':'Success','ack':!![]});const _0x37517b=_0x7b1d82(0x1a8)+_0x525eb9[_0x7b1d82(0x1c5)]+_0x7b1d82(0x1ec)+_0x525eb9[_0x7b1d82(0x1de)];setup[_0x7b1d82(0x1c7)](_0x58b7ee,_0x37517b,![],![]);if(_0x58b7ee[_0x7b1d82(0x18b)]&&_0x59eee5)_0x59eee5[_0x7b1d82(0x1f6)](_0x58b7ee,_0x7b1d82(0x1fd),{'digest':_0x5c6333});}catch(_0x163751){_0x58b7ee[_0x7b1d82(0x19c)][_0x7b1d82(0x1ac)](_0x163751[_0x7b1d82(0x19b)]);}}async function runBaselineDriftAnalysis(_0x61531e){const _0x54f870=a0_0x7b374f;if(!_0x61531e[_0x54f870(0x18b)]||!_0x61531e[_0x54f870(0x1b7)])return;if(!canCallApi())return;const _0x4070bc=_0x61531e['config'][_0x54f870(0x202)]||0xe;if(_0x61531e[_0x54f870(0x209)]['length']<_0x4070bc+0x7){await _0x61531e[_0x54f870(0x18f)](_0x54f870(0x1e5),{'val':_0x54f870(0x1c1),'ack':!![]});return;}const _0x19f420=_0x61531e['dailyDigests'][_0x54f870(0x1d0)](-_0x4070bc),_0x348166=_0x61531e[_0x54f870(0x209)][_0x54f870(0x1d0)](0x0,_0x61531e[_0x54f870(0x209)][_0x54f870(0x1b1)]-_0x4070bc),_0x41cc7a=_0x54f870(0x1d5)+JSON['stringify'](_0x348166)+_0x54f870(0x200)+JSON[_0x54f870(0x216)](_0x19f420);try{updateApiTimestamp();const _0x40c928=await _0x61531e['geminiModel']['generateContent'](_0x41cc7a),_0x19b767=JSON['parse'](_0x40c928[_0x54f870(0x1e6)]['text']()[_0x54f870(0x20a)](/```json|```/g,'')['trim']());_0x19b767[_0x54f870(0x208)]&&(await _0x61531e[_0x54f870(0x18f)](_0x54f870(0x1e5),{'val':_0x19b767[_0x54f870(0x208)],'ack':!![]}),await _0x61531e[_0x54f870(0x18f)](_0x54f870(0x1d8),{'val':_0x19b767[_0x54f870(0x1ae)],'ack':!![]}),await _0x61531e[_0x54f870(0x18f)](_0x54f870(0x192),{'val':Date[_0x54f870(0x19e)](),'ack':!![]}));}catch(_0x1458a3){}}function a0_0x3c76(_0x2b4867,_0x442c91){const _0x539143=a0_0xf66c();return a0_0x3c76=function(_0x2d2deb,_0x2f0bd2){_0x2d2deb=_0x2d2deb-0x18a;let _0xf66cc7=_0x539143[_0x2d2deb];return _0xf66cc7;},a0_0x3c76(_0x2b4867,_0x442c91);}async function executeAutomationAction(_0x366a4e){const _0x2e1012=a0_0x7b374f;try{const _0x540b67=await _0x366a4e[_0x2e1012(0x1cc)]('analysis.automation.targetId'),_0xf2762c=await _0x366a4e['getStateAsync'](_0x2e1012(0x1cd));if(_0x540b67&&_0x540b67[_0x2e1012(0x204)]&&_0xf2762c){const _0x1b5b17=_0x540b67[_0x2e1012(0x204)];let _0x1b0011=_0xf2762c['val'];try{_0x1b0011=JSON[_0x2e1012(0x1c0)](_0x1b0011);}catch(_0x5774e2){}_0x366a4e[_0x2e1012(0x19c)]['info']('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x1b5b17+_0x2e1012(0x1e8)+_0x1b0011),await _0x366a4e['setForeignStateAsync'](_0x1b5b17,_0x1b0011);}else _0x366a4e['log'][_0x2e1012(0x1c6)](_0x2e1012(0x1cf));}catch(_0x45b95c){_0x366a4e[_0x2e1012(0x19c)]['error'](_0x2e1012(0x1d2)+_0x45b95c[_0x2e1012(0x19b)]);}}async function sendMorningBriefing(_0x706293){const _0x5227e0=a0_0x7b374f;if(!_0x706293[_0x5227e0(0x1b7)]){_0x706293['log'][_0x5227e0(0x1c6)](_0x5227e0(0x1c3));return;}_0x706293[_0x5227e0(0x19c)][_0x5227e0(0x1b9)](_0x5227e0(0x1a1));try{updateApiTimestamp();const _0x3d0883=_0x5227e0(0x1fe),_0x6c3958=await _0x706293['geminiModel'][_0x5227e0(0x1ca)](_0x3d0883),_0x4761b6=_0x6c3958[_0x5227e0(0x1e6)][_0x5227e0(0x20f)]();_0x706293[_0x5227e0(0x19c)][_0x5227e0(0x1b9)]('ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20'+_0x4761b6[_0x5227e0(0x1b1)]+_0x5227e0(0x1ad)),setup['sendNotification'](_0x706293,_0x5227e0(0x20b)+_0x4761b6);}catch(_0x40e8c6){_0x706293[_0x5227e0(0x19c)]['error'](_0x5227e0(0x1ea)+_0x40e8c6[_0x5227e0(0x19b)]);}}module[a0_0x7b374f(0x1fc)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};