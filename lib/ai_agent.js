function a0_0x4c11(){const _0x363dbd=['isProVersion','Tag','baselineDrift','targetId','\x20->\x20','ltmLtbWindowDays','568kzZGTg','dailyDigests','apply','useWeather','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','BUTLER\x20Execution\x20Error:\x20','1671720tilxRZ','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','toLocaleTimeString','âš ï¸\x20ALARM:\x20','.Current.IsNight','11pSLrtb','LTM.driftAnalysis.driftDetails','KI-Fehler\x20(Fallback)','%)\x20nach\x20\x22','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','driftDetails','LTM.driftAnalysis.baselineDrift','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','4loFKIi','slice','automationProposal','now','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','3564thnmeE','splice','LTM.rawEventLog','analysis.automation.patternDetected','LTM.driftAnalysis.lastCheck','81336pvkLDq','config','analysisHistory','geminiModel','toString','.forecast.current.temperature','getForeignStateAsync','livingContext','setStateAsync','5903916liwNbi','decision','warn','reason','(((.+)+)+)+$','Keine\x20Details.','Started...','6kuMcMn','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','targetValue','./setup','generateContent','models/gemini-flash-latest','.\x20KONTEXT:\x20','ltmStbWindowDays','.\x20EVENTS:\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','constructor','description','\x20=\x20','Skipped\x20(Traffic)','length','weatherInstance','timestamp','log','.\x20ANWESEND:\x20','Nacht','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','lastAlertState','pop','ðŸŒ…\x20Morning\x20Briefing:\x0a','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','.Current.Temperature',',\x20Wetter:\x20','Skipped\x20(No\x20AI\x20or\x20Data)','.forecast.current.state','Traffic-Schutz\x20(Auto-Approved)','alertReason','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','analysis.isAlert','replace','Success','debug','598135mKdUSH','analysis.analysisHistory','.\x20EMERGENCY:\x20','2403121RuZcOm','LTM.dailyDigests','analysis.automation.targetId','.\x20SYSTEM_MODE:\x20','search','9qetMaB','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','321326ugqTkf','analysis.alertReason','Digest','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','val','toFixed','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','Unbekannt','push','currentSystemMode','sendNotification','response','aiPersona','isAlert','send','parse','Sicherheit\x20geht\x20vor.','\x0aSTB:\x20','rawEventLog','KI\x20offline\x20(Fallback)','LTM.processingStatus','error','@google/generative-ai','trim','system.presenceWho','analysis.activitySummary','Unbekannt\x20(Kein\x20Sensor)','toISOString','message','text','eventHistory','analysis.automation.targetValue','detected','exports','getStateAsync','summary','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','stringify'];a0_0x4c11=function(){return _0x363dbd;};return a0_0x4c11();}const a0_0x159768=a0_0x3eb7;(function(_0x327330,_0x412f56){const _0x47c649=a0_0x3eb7,_0x39e708=_0x327330();while(!![]){try{const _0x462fb6=-parseInt(_0x47c649(0xba))/0x1+-parseInt(_0x47c649(0xf8))/0x2*(parseInt(_0x47c649(0xf6))/0x3)+-parseInt(_0x47c649(0xb0))/0x4*(-parseInt(_0x47c649(0xee))/0x5)+parseInt(_0x47c649(0xca))/0x6*(parseInt(_0x47c649(0xf1))/0x7)+-parseInt(_0x47c649(0x9d))/0x8*(-parseInt(_0x47c649(0xb5))/0x9)+-parseInt(_0x47c649(0xa3))/0xa+-parseInt(_0x47c649(0xa8))/0xb*(-parseInt(_0x47c649(0xc3))/0xc);if(_0x462fb6===_0x412f56)break;else _0x39e708['push'](_0x39e708['shift']());}catch(_0x399708){_0x39e708['push'](_0x39e708['shift']());}}}(a0_0x4c11,0x3da7e));const a0_0x4a779c=(function(){let _0x159b31=!![];return function(_0x92c3d0,_0x42971a){const _0x44e752=_0x159b31?function(){const _0x298e9c=a0_0x3eb7;if(_0x42971a){const _0x3bb385=_0x42971a[_0x298e9c(0x9f)](_0x92c3d0,arguments);return _0x42971a=null,_0x3bb385;}}:function(){};return _0x159b31=![],_0x44e752;};}()),a0_0x3924a5=a0_0x4a779c(this,function(){const _0x28943c=a0_0x3eb7;return a0_0x3924a5[_0x28943c(0xbe)]()[_0x28943c(0xf5)](_0x28943c(0xc7))['toString']()[_0x28943c(0xd4)](a0_0x3924a5)[_0x28943c(0xf5)](_0x28943c(0xc7));});a0_0x3924a5();'use strict';const {GoogleGenerativeAI}=require(a0_0x159768(0x10e)),setup=require(a0_0x159768(0xcd)),GEMINI_MODEL=a0_0x159768(0xcf),LTM_DP_DAILY_DIGESTS=a0_0x159768(0xf2),LTM_DP_STATUS=a0_0x159768(0x10c),LTM_DP_RAW_LOG=a0_0x159768(0xb7),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x159768(0xaf),'senior_aal':a0_0x159768(0xac),'family':a0_0x159768(0xb4),'single_comfort':a0_0x159768(0xe9),'security':a0_0x159768(0x108),'energy_saver':a0_0x159768(0xcb)};function canCallApi(){const _0x1173c1=a0_0x159768,_0xc70e5a=Date[_0x1173c1(0xb3)]();return _0xc70e5a-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x1b29fd=a0_0x159768;lastGlobalApiCall=Date[_0x1b29fd(0xb3)]();}async function getWeatherContext(_0x2f4f88){const _0x1f2554=a0_0x159768;if(!_0x2f4f88[_0x1f2554(0xbb)][_0x1f2554(0xa0)]||!_0x2f4f88[_0x1f2554(0xbb)][_0x1f2554(0xd9)])return _0x1f2554(0x112);try{const _0x536447=_0x2f4f88[_0x1f2554(0xbb)][_0x1f2554(0xd9)];let _0x15328e=await _0x2f4f88[_0x1f2554(0xc0)](_0x536447+_0x1f2554(0xe3));if(!_0x15328e)_0x15328e=await _0x2f4f88[_0x1f2554(0xc0)](_0x536447+_0x1f2554(0xbf));let _0x414d54=await _0x2f4f88[_0x1f2554(0xc0)](_0x536447+'.Current.WeatherText');if(!_0x414d54)_0x414d54=await _0x2f4f88[_0x1f2554(0xc0)](_0x536447+_0x1f2554(0xe6));let _0xa3174a=_0x1f2554(0xff);const _0x4fb047=await _0x2f4f88['getForeignStateAsync'](_0x536447+_0x1f2554(0xa7));if(_0x4fb047)_0xa3174a=_0x4fb047[_0x1f2554(0xfc)]?_0x1f2554(0xdd):_0x1f2554(0x121);if(_0x15328e&&_0x414d54)return _0x15328e[_0x1f2554(0xfc)]+'Â°C,\x20'+_0x414d54[_0x1f2554(0xfc)]+',\x20LichtverhÃ¤ltnisse:\x20'+_0xa3174a;}catch(_0x561e5e){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x35fbba,_0x143de8,_0x5f0a92,_0x1797ca){const _0x53f5d5=a0_0x159768;if(!_0x35fbba[_0x53f5d5(0xbd)])return{'approved':!![],'reason':_0x53f5d5(0x10b)};const _0x2acb05=Date[_0x53f5d5(0xb3)]();if(decisionCache[_0x143de8]&&_0x2acb05-decisionCache[_0x143de8][_0x53f5d5(0xda)]<CACHE_TTL_MS){const _0x1794e2=decisionCache[_0x143de8][_0x53f5d5(0xc4)];return _0x35fbba['log'][_0x53f5d5(0xed)](_0x53f5d5(0xa4)+_0x143de8+_0x53f5d5(0x124)+(_0x1794e2['approved']?'OK':'NO')+'\x20('+_0x1794e2[_0x53f5d5(0xc6)]+')'),_0x1794e2;}if(!canCallApi())return _0x35fbba[_0x53f5d5(0xdb)]['debug'](_0x53f5d5(0x11c)+_0x143de8+'\x20Ã¼bersprungen\x20(Auto-Approved).'),{'approved':!![],'reason':_0x53f5d5(0xe7)};const _0x24e8a7=new Date()[_0x53f5d5(0xa5)](),_0x1c2d2d=await getWeatherContext(_0x35fbba),_0x3b6580=PERSONA_MAPPING[_0x35fbba['config'][_0x53f5d5(0x104)]||'generic'],_0x4d37a4=_0x53f5d5(0xa1)+_0x24e8a7+_0x53f5d5(0xe4)+_0x1c2d2d+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x1797ca*0x64)[_0x53f5d5(0xfd)](0x0)+_0x53f5d5(0xab)+_0x143de8+_0x53f5d5(0x11e)+_0x5f0a92+_0x53f5d5(0xf7)+_0x3b6580+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x1bfec3=await _0x35fbba[_0x53f5d5(0xbd)]['generateContent'](_0x4d37a4),_0x1ca1ed=_0x1bfec3['response'][_0x53f5d5(0x115)]()[_0x53f5d5(0xeb)](/```json|```/g,'')[_0x53f5d5(0x10f)](),_0x3d3f47=JSON[_0x53f5d5(0x107)](_0x1ca1ed);return decisionCache[_0x143de8]={'decision':_0x3d3f47,'timestamp':_0x2acb05},_0x3d3f47;}catch(_0x3f4519){return _0x35fbba['log']['warn']('ðŸ¤–\x20Butler\x20Brain\x20Error:\x20'+_0x3f4519[_0x53f5d5(0x114)]),decisionCache[_0x143de8]={'decision':{'approved':!![],'reason':_0x53f5d5(0xaa)},'timestamp':_0x2acb05-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x53f5d5(0xaa)};}}async function runGeminiAnalysis(_0x434f56,_0x2b79e2=''){const _0x6c93ac=a0_0x159768;if(!_0x434f56[_0x6c93ac(0xbd)])return;if(!canCallApi()){_0x434f56[_0x6c93ac(0xdb)][_0x6c93ac(0xed)](_0x6c93ac(0xfe));return;}if(_0x434f56[_0x6c93ac(0x116)][_0x6c93ac(0xd8)]===0x0)return;const _0x57a03c=_0x434f56[_0x6c93ac(0x116)][_0x6c93ac(0xb1)](0x0,0xf),_0x265ebb=_0x434f56[_0x6c93ac(0x101)],_0x1b9962=PERSONA_MAPPING[_0x434f56[_0x6c93ac(0xbb)][_0x6c93ac(0x104)]||'generic'],_0x552814=_0x434f56['config'][_0x6c93ac(0xc1)]||_0x6c93ac(0xc8);let _0x25cc79=_0x6c93ac(0xff);try{const _0x296075=await _0x434f56['getStateAsync'](_0x6c93ac(0x110));if(_0x296075&&_0x296075['val'])_0x25cc79=_0x296075[_0x6c93ac(0xfc)];}catch(_0x1c9c70){}let _0x4607f3=![];try{const _0x65e93e=await _0x434f56[_0x6c93ac(0x11a)]('analysis.automation.autoApply');if(_0x65e93e&&_0x65e93e[_0x6c93ac(0xfc)])_0x4607f3=!![];}catch(_0x2c98dd){}const _0x220680=_0x6c93ac(0xd3)+_0x1b9962+_0x6c93ac(0xd0)+_0x552814+_0x6c93ac(0xf4)+_0x265ebb+_0x6c93ac(0xdc)+_0x25cc79+_0x6c93ac(0xd2)+JSON[_0x6c93ac(0x11f)](_0x57a03c)+_0x6c93ac(0xf0)+_0x2b79e2+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x193936=await _0x434f56[_0x6c93ac(0xbd)]['generateContent'](_0x220680),_0x117eda=JSON['parse'](_0x193936[_0x6c93ac(0x103)][_0x6c93ac(0x115)]()[_0x6c93ac(0xeb)](/```json|```/g,'')[_0x6c93ac(0x10f)]());await _0x434f56[_0x6c93ac(0xc2)]('analysis.lastResult',{'val':JSON[_0x6c93ac(0x11f)](_0x117eda),'ack':!![]});if(_0x117eda['summary'])await _0x434f56[_0x6c93ac(0xc2)](_0x6c93ac(0x111),{'val':_0x117eda['summary'],'ack':!![]});const _0x5ccbd1={'timestamp':Date[_0x6c93ac(0xb3)](),'id':Date[_0x6c93ac(0xb3)]()[_0x6c93ac(0xbe)](),'analysis':{'activity':{'summary':_0x117eda[_0x6c93ac(0x11b)],'isAlert':_0x117eda[_0x6c93ac(0x105)],'alertReason':_0x117eda['alertReason']},'comfort':{'automationProposal':_0x117eda[_0x6c93ac(0xb2)]}}};_0x434f56[_0x6c93ac(0xbc)]['unshift'](_0x5ccbd1);if(_0x434f56[_0x6c93ac(0xbc)][_0x6c93ac(0xd8)]>0x32)_0x434f56[_0x6c93ac(0xbc)][_0x6c93ac(0xe0)]();await _0x434f56[_0x6c93ac(0xc2)](_0x6c93ac(0xef),{'val':JSON[_0x6c93ac(0x11f)](_0x434f56[_0x6c93ac(0xbc)]),'ack':!![]});const _0x2ed244=_0x117eda[_0x6c93ac(0x105)]||![];_0x2ed244!==_0x434f56[_0x6c93ac(0xdf)]&&(await _0x434f56[_0x6c93ac(0xc2)](_0x6c93ac(0xea),{'val':_0x2ed244,'ack':!![]}),_0x434f56[_0x6c93ac(0xdf)]=_0x2ed244,_0x2ed244&&(await _0x434f56[_0x6c93ac(0xc2)](_0x6c93ac(0xf9),{'val':_0x117eda[_0x6c93ac(0xe8)],'ack':!![]}),setup[_0x6c93ac(0x102)](_0x434f56,_0x6c93ac(0xa6)+_0x117eda[_0x6c93ac(0xe8)],![],_0x117eda['isEmergency'])));if(_0x117eda[_0x6c93ac(0xb2)]&&_0x117eda[_0x6c93ac(0xb2)][_0x6c93ac(0x118)]){await _0x434f56['setStateAsync'](_0x6c93ac(0xb8),{'val':!![],'ack':!![]}),await _0x434f56['setStateAsync']('analysis.automation.description',{'val':_0x117eda[_0x6c93ac(0xb2)][_0x6c93ac(0xd5)],'ack':!![]}),await _0x434f56[_0x6c93ac(0xc2)]('analysis.automation.targetId',{'val':_0x117eda['automationProposal'][_0x6c93ac(0x123)],'ack':!![]}),await _0x434f56[_0x6c93ac(0xc2)](_0x6c93ac(0x117),{'val':JSON[_0x6c93ac(0x11f)](_0x117eda['automationProposal'][_0x6c93ac(0xcc)]),'ack':!![]});if(_0x4607f3)executeAutomationAction(_0x434f56);}}catch(_0x50b07d){_0x434f56[_0x6c93ac(0xdb)][_0x6c93ac(0x10d)]('Gemini\x20Error:\x20'+_0x50b07d['message']);}}async function createDailyDigest(_0xe6600c,_0x2031cf){const _0x4b7123=a0_0x159768;if(!_0xe6600c['isProVersion'])return;if(!canCallApi()){await _0xe6600c[_0x4b7123(0xc2)](LTM_DP_STATUS,{'val':_0x4b7123(0xd7),'ack':!![]});return;}await _0xe6600c[_0x4b7123(0xc2)](LTM_DP_STATUS,{'val':_0x4b7123(0xc9),'ack':!![]});if(!_0xe6600c[_0x4b7123(0xbd)]||_0xe6600c['rawEventLog'][_0x4b7123(0xd8)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0xe6600c[_0x4b7123(0xc2)](LTM_DP_STATUS,{'val':_0x4b7123(0xe5),'ack':!![]});return;}const _0x2104b2=JSON[_0x4b7123(0x107)](JSON[_0x4b7123(0x11f)](_0xe6600c[_0x4b7123(0x10a)])),_0x1283ba=_0x2104b2[_0x4b7123(0xd8)],_0x1c62e1=_0x4b7123(0x11d)+JSON[_0x4b7123(0x11f)](_0x2104b2);try{updateApiTimestamp();const _0x5863ec=await _0xe6600c[_0x4b7123(0xbd)][_0x4b7123(0xce)](_0x1c62e1),_0x53e77d=JSON[_0x4b7123(0x107)](_0x5863ec[_0x4b7123(0x103)]['text']()[_0x4b7123(0xeb)](/```json|```/g,'')['trim']()),_0x378d83={'timestamp':new Date()[_0x4b7123(0x113)](),'eventCount':_0x1283ba,'summary':_0x53e77d[_0x4b7123(0x11b)]||_0x4b7123(0xfa),'activityLevel':_0x53e77d['activityLevel']||'normal','systemMode':_0xe6600c[_0x4b7123(0x101)]};_0xe6600c['dailyDigests'][_0x4b7123(0x100)](_0x378d83);const _0x1cc108=_0xe6600c['config'][_0x4b7123(0x9c)]||0x3c;_0xe6600c['dailyDigests']['length']>_0x1cc108&&_0xe6600c[_0x4b7123(0x9e)][_0x4b7123(0xb6)](0x0,_0xe6600c[_0x4b7123(0x9e)][_0x4b7123(0xd8)]-_0x1cc108);await _0xe6600c[_0x4b7123(0xc2)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0xe6600c[_0x4b7123(0x9e)]),'ack':!![]}),_0xe6600c[_0x4b7123(0x10a)]=[],await _0xe6600c[_0x4b7123(0xc2)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0xe6600c[_0x4b7123(0x10a)]),'ack':!![]}),await _0xe6600c['setStateAsync'](LTM_DP_STATUS,{'val':_0x4b7123(0xec),'ack':!![]});if(_0xe6600c[_0x4b7123(0x120)]&&_0x2031cf)_0x2031cf[_0x4b7123(0x106)](_0xe6600c,'ANALYZE_HEALTH',{'digest':_0x378d83});}catch(_0x21a5e5){_0xe6600c[_0x4b7123(0xdb)][_0x4b7123(0x10d)](_0x21a5e5[_0x4b7123(0x114)]);}}function a0_0x3eb7(_0x2cda29,_0x408054){const _0x15c35d=a0_0x4c11();return a0_0x3eb7=function(_0x3924a5,_0x4a779c){_0x3924a5=_0x3924a5-0x9c;let _0x4c1186=_0x15c35d[_0x3924a5];return _0x4c1186;},a0_0x3eb7(_0x2cda29,_0x408054);}async function runBaselineDriftAnalysis(_0xa976c){const _0x302a89=a0_0x159768;if(!_0xa976c[_0x302a89(0x120)]||!_0xa976c[_0x302a89(0xbd)])return;if(!canCallApi())return;const _0x4df0cd=_0xa976c[_0x302a89(0xbb)][_0x302a89(0xd1)]||0xe;if(_0xa976c[_0x302a89(0x9e)]['length']<_0x4df0cd+0x7){await _0xa976c['setStateAsync'](_0x302a89(0xae),{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x58f706=_0xa976c['dailyDigests'][_0x302a89(0xb1)](-_0x4df0cd),_0x2a91db=_0xa976c['dailyDigests'][_0x302a89(0xb1)](0x0,_0xa976c[_0x302a89(0x9e)][_0x302a89(0xd8)]-_0x4df0cd),_0x4a339c=_0x302a89(0xfb)+JSON[_0x302a89(0x11f)](_0x2a91db)+_0x302a89(0x109)+JSON[_0x302a89(0x11f)](_0x58f706);try{updateApiTimestamp();const _0x12fa03=await _0xa976c['geminiModel'][_0x302a89(0xce)](_0x4a339c),_0x5263ad=JSON[_0x302a89(0x107)](_0x12fa03[_0x302a89(0x103)][_0x302a89(0x115)]()[_0x302a89(0xeb)](/```json|```/g,'')[_0x302a89(0x10f)]());_0x5263ad[_0x302a89(0x122)]&&(await _0xa976c[_0x302a89(0xc2)](_0x302a89(0xae),{'val':_0x5263ad[_0x302a89(0x122)],'ack':!![]}),await _0xa976c['setStateAsync'](_0x302a89(0xa9),{'val':_0x5263ad[_0x302a89(0xad)],'ack':!![]}),await _0xa976c[_0x302a89(0xc2)](_0x302a89(0xb9),{'val':Date[_0x302a89(0xb3)](),'ack':!![]}));}catch(_0x2ecb28){}}async function executeAutomationAction(_0x4d6a95){const _0x172499=a0_0x159768;try{const _0x521151=await _0x4d6a95[_0x172499(0x11a)](_0x172499(0xf3)),_0x5b337d=await _0x4d6a95[_0x172499(0x11a)](_0x172499(0x117));if(_0x521151&&_0x521151[_0x172499(0xfc)]&&_0x5b337d){const _0x2309df=_0x521151[_0x172499(0xfc)];let _0x1087d7=_0x5b337d[_0x172499(0xfc)];try{_0x1087d7=JSON['parse'](_0x1087d7);}catch(_0x19510b){}_0x4d6a95[_0x172499(0xdb)]['info']('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x2309df+_0x172499(0xd6)+_0x1087d7),await _0x4d6a95['setForeignStateAsync'](_0x2309df,_0x1087d7);}else _0x4d6a95['log'][_0x172499(0xc5)](_0x172499(0xe2));}catch(_0xeb3554){_0x4d6a95[_0x172499(0xdb)]['error'](_0x172499(0xa2)+_0xeb3554[_0x172499(0x114)]);}}async function sendMorningBriefing(_0x2b7091){const _0x3db820=a0_0x159768;if(!_0x2b7091[_0x3db820(0xbd)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x500345=_0x3db820(0xde),_0x57db0f=await _0x2b7091[_0x3db820(0xbd)]['generateContent'](_0x500345),_0x26c665=_0x57db0f['response']['text']();setup[_0x3db820(0x102)](_0x2b7091,_0x3db820(0xe1)+_0x26c665);}catch(_0x1877d0){_0x2b7091[_0x3db820(0xdb)]['error']('Briefing\x20Error:\x20'+_0x1877d0[_0x3db820(0x114)]);}}module[a0_0x159768(0x119)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};