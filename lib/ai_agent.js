const a0_0x8a68bb=a0_0x333a;(function(_0x52d48d,_0x3c9ef8){const _0x89d834=a0_0x333a,_0x5f3191=_0x52d48d();while(!![]){try{const _0x26e884=-parseInt(_0x89d834(0x202))/0x1*(-parseInt(_0x89d834(0x240))/0x2)+parseInt(_0x89d834(0x217))/0x3+parseInt(_0x89d834(0x207))/0x4*(-parseInt(_0x89d834(0x265))/0x5)+parseInt(_0x89d834(0x229))/0x6*(-parseInt(_0x89d834(0x23d))/0x7)+parseInt(_0x89d834(0x23f))/0x8+-parseInt(_0x89d834(0x20a))/0x9+parseInt(_0x89d834(0x204))/0xa*(parseInt(_0x89d834(0x24e))/0xb);if(_0x26e884===_0x3c9ef8)break;else _0x5f3191['push'](_0x5f3191['shift']());}catch(_0x2ef16d){_0x5f3191['push'](_0x5f3191['shift']());}}}(a0_0xf909,0xea2a5));const a0_0x50263d=(function(){let _0x11a17b=!![];return function(_0x37dc81,_0x233ae7){const _0x3b6f84=_0x11a17b?function(){const _0x38cbf7=a0_0x333a;if(_0x233ae7){const _0x36ff7f=_0x233ae7[_0x38cbf7(0x21f)](_0x37dc81,arguments);return _0x233ae7=null,_0x36ff7f;}}:function(){};return _0x11a17b=![],_0x3b6f84;};}()),a0_0x226a3=a0_0x50263d(this,function(){const _0xc316a6=a0_0x333a;return a0_0x226a3[_0xc316a6(0x1f0)]()[_0xc316a6(0x20c)](_0xc316a6(0x24a))['toString']()[_0xc316a6(0x1fe)](a0_0x226a3)[_0xc316a6(0x20c)]('(((.+)+)+)+$');});a0_0x226a3();'use strict';const {GoogleGenerativeAI}=require(a0_0x8a68bb(0x245)),setup=require(a0_0x8a68bb(0x1de)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x8a68bb(0x266),LTM_DP_STATUS=a0_0x8a68bb(0x20b),LTM_DP_RAW_LOG=a0_0x8a68bb(0x260),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;function a0_0x333a(_0xe2cc74,_0x23372b){const _0x48b2c4=a0_0xf909();return a0_0x333a=function(_0x226a3,_0x50263d){_0x226a3=_0x226a3-0x1da;let _0xf90971=_0x48b2c4[_0x226a3];return _0xf90971;},a0_0x333a(_0xe2cc74,_0x23372b);}let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x8a68bb(0x224),'senior_aal':a0_0x8a68bb(0x1f6),'family':a0_0x8a68bb(0x268),'single_comfort':a0_0x8a68bb(0x1ff),'security':a0_0x8a68bb(0x23a),'energy_saver':a0_0x8a68bb(0x22f)};function canCallApi(){const _0x5964ff=a0_0x8a68bb,_0x230676=Date[_0x5964ff(0x21b)]();return _0x230676-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x448d02){const _0x4613d5=a0_0x8a68bb;if(!_0x448d02[_0x4613d5(0x251)]['useWeather']||!_0x448d02[_0x4613d5(0x251)][_0x4613d5(0x25b)])return _0x4613d5(0x226);try{const _0x5c9c13=_0x448d02[_0x4613d5(0x251)]['weatherInstance'];let _0x127b8b=await _0x448d02[_0x4613d5(0x25c)](_0x5c9c13+_0x4613d5(0x26a));if(!_0x127b8b)_0x127b8b=await _0x448d02[_0x4613d5(0x25c)](_0x5c9c13+'.forecast.current.temperature');let _0x5701cf=await _0x448d02[_0x4613d5(0x25c)](_0x5c9c13+_0x4613d5(0x210));if(!_0x5701cf)_0x5701cf=await _0x448d02[_0x4613d5(0x25c)](_0x5c9c13+_0x4613d5(0x1f7));let _0x32c842=_0x4613d5(0x21a);const _0x21f193=await _0x448d02[_0x4613d5(0x25c)](_0x5c9c13+_0x4613d5(0x208));if(_0x21f193)_0x32c842=_0x21f193['val']?_0x4613d5(0x1fb):_0x4613d5(0x230);if(_0x127b8b&&_0x5701cf)return _0x127b8b[_0x4613d5(0x201)]+_0x4613d5(0x20f)+_0x5701cf[_0x4613d5(0x201)]+_0x4613d5(0x1fa)+_0x32c842;}catch(_0x25da57){}return'Wetterdaten\x20nicht\x20abrufbar';}function a0_0xf909(){const _0x104bb1=['activityLevel','apply','Traffic-Schutz\x20(Auto-Approved)','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','timestamp','\x20=\x20','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','Unbekannt\x20(Kein\x20Sensor)','approved','âš ï¸\x20ALARM:\x20','774pcfLEB','.\x20SYSTEM_MODE:\x20','pop','analysis.activitySummary','analysis.automation.description','ðŸŒ…\x20Morning\x20Briefing:\x0a','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','Tag','splice','isEmergency','analysis.lastResult','generateContent','currentSystemMode','slice','toLocaleTimeString','Keine\x20Details.','.\x20EVENTS:\x20','Sicherheit\x20geht\x20vor.','isAlert','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','89439BZzeQz','sendNotification','12837424Cizplg','4dwfnUo','description','message','analysis.automation.targetValue','response','@google/generative-ai','Skipped\x20(No\x20AI\x20or\x20Data)','debug','N/A\x20(Learning)','toISOString','(((.+)+)+)+$','detected','parse','stringify','869MzwpvP','LTM.driftAnalysis.baselineDrift','decision','config','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','info','text','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','reason','LTM.driftAnalysis.lastCheck','push','unshift','generic','weatherInstance','getForeignStateAsync','analysisHistory','KI\x20offline\x20(Fallback)','log','LTM.rawEventLog','Digest','\x0aSTB:\x20','setForeignStateAsync','Gemini\x20Error:\x20','4382965YUiJMj','LTM.dailyDigests','replace','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','.\x20ANWESEND:\x20','.Current.Temperature','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','error','system.presenceWho','send','./setup','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','analysis.automation.targetId','livingContext','KI-Fehler\x20(Fallback)','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','analysis.automation.autoApply','geminiModel','%)\x20nach\x20\x22','ANALYZE_HEALTH','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','setStateAsync','targetValue','normal','.\x20EMERGENCY:\x20','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','LTM.driftAnalysis.driftDetails','\x20->\x20','toString','analysis.automation.patternDetected','warn','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','toFixed','trim','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','.forecast.current.state','eventHistory','getStateAsync',',\x20LichtverhÃ¤ltnisse:\x20','Nacht','alertReason','lastAlertState','constructor','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','dailyDigests','val','797789MPhuse','ltmLtbWindowDays','82970qLFJSc','exports','\x20Ã¼bersprungen\x20(Auto-Approved).','8oOLCnC','.Current.IsNight','rawEventLog','11243088uMwDkx','LTM.processingStatus','search','aiPersona','baselineDrift','Â°C,\x20','.Current.WeatherText','isProVersion','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','driftDetails','length','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','BUTLER\x20Execution\x20Error:\x20','5262219AiQsfA','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','summary','Unbekannt','now','automationProposal','Skipped\x20(Traffic)'];a0_0xf909=function(){return _0x104bb1;};return a0_0xf909();}async function consultButler(_0x2159a9,_0x2193ce,_0x2e11ae,_0x5b3cc6){const _0x2e1f85=a0_0x8a68bb;if(!_0x2159a9['geminiModel'])return{'approved':!![],'reason':_0x2e1f85(0x25e)};const _0x8b2466=Date[_0x2e1f85(0x21b)]();if(decisionCache[_0x2193ce]&&_0x8b2466-decisionCache[_0x2193ce][_0x2e1f85(0x222)]<CACHE_TTL_MS){const _0x57bc58=decisionCache[_0x2193ce][_0x2e1f85(0x250)];return _0x2159a9[_0x2e1f85(0x25f)][_0x2e1f85(0x247)](_0x2e1f85(0x212)+_0x2193ce+_0x2e1f85(0x1ef)+(_0x57bc58[_0x2e1f85(0x227)]?'OK':'NO')+'\x20('+_0x57bc58[_0x2e1f85(0x256)]+')'),_0x57bc58;}if(!canCallApi())return _0x2159a9[_0x2e1f85(0x25f)]['debug'](_0x2e1f85(0x255)+_0x2193ce+_0x2e1f85(0x206)),{'approved':!![],'reason':_0x2e1f85(0x220)};const _0x54c9fb=new Date()[_0x2e1f85(0x237)](),_0x1688cf=await getWeatherContext(_0x2159a9),_0x42b46c=PERSONA_MAPPING[_0x2159a9['config']['aiPersona']||'generic'],_0x4ed261=_0x2e1f85(0x225)+_0x54c9fb+',\x20Wetter:\x20'+_0x1688cf+_0x2e1f85(0x221)+(_0x5b3cc6*0x64)[_0x2e1f85(0x1f4)](0x0)+_0x2e1f85(0x1e6)+_0x2193ce+'\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22'+_0x2e11ae+_0x2e1f85(0x1da)+_0x42b46c+_0x2e1f85(0x218);try{updateApiTimestamp();const _0x4e1bd1=await _0x2159a9['geminiModel'][_0x2e1f85(0x234)](_0x4ed261),_0x41db3f=_0x4e1bd1[_0x2e1f85(0x244)][_0x2e1f85(0x254)]()['replace'](/```json|```/g,'')['trim'](),_0x41d2b1=JSON['parse'](_0x41db3f);return decisionCache[_0x2193ce]={'decision':_0x41d2b1,'timestamp':_0x8b2466},_0x41d2b1;}catch(_0x58aacb){return _0x2159a9['log'][_0x2e1f85(0x1f2)](_0x2e1f85(0x23c)+_0x58aacb[_0x2e1f85(0x242)]),decisionCache[_0x2193ce]={'decision':{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'},'timestamp':_0x8b2466-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x2e1f85(0x1e2)};}}async function runGeminiAnalysis(_0x5e8e28,_0x4bf6dd=''){const _0x3cae3c=a0_0x8a68bb;if(!_0x5e8e28[_0x3cae3c(0x1e5)])return;if(!canCallApi()){_0x5e8e28[_0x3cae3c(0x25f)][_0x3cae3c(0x247)](_0x3cae3c(0x1e8));return;}if(_0x5e8e28[_0x3cae3c(0x1f8)]['length']===0x0)return;const _0xd65cce=_0x5e8e28['eventHistory'][_0x3cae3c(0x236)](0x0,0xf),_0x3bd431=_0x5e8e28[_0x3cae3c(0x235)],_0x554445=PERSONA_MAPPING[_0x5e8e28['config'][_0x3cae3c(0x20d)]||_0x3cae3c(0x25a)],_0x50dfe0=_0x5e8e28[_0x3cae3c(0x251)][_0x3cae3c(0x1e1)]||_0x3cae3c(0x238);let _0x199223='Unbekannt';try{const _0x59c486=await _0x5e8e28['getStateAsync'](_0x3cae3c(0x1dc));if(_0x59c486&&_0x59c486[_0x3cae3c(0x201)])_0x199223=_0x59c486[_0x3cae3c(0x201)];}catch(_0x2a86e6){}let _0x41cbfd=![];try{const _0x16da28=await _0x5e8e28['getStateAsync'](_0x3cae3c(0x1e4));if(_0x16da28&&_0x16da28[_0x3cae3c(0x201)])_0x41cbfd=!![];}catch(_0xb925bc){}const _0x478e9e=_0x3cae3c(0x252)+_0x554445+'.\x20KONTEXT:\x20'+_0x50dfe0+_0x3cae3c(0x22a)+_0x3bd431+_0x3cae3c(0x269)+_0x199223+_0x3cae3c(0x239)+JSON[_0x3cae3c(0x24d)](_0xd65cce)+_0x3cae3c(0x1ec)+_0x4bf6dd+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x15a978=await _0x5e8e28[_0x3cae3c(0x1e5)][_0x3cae3c(0x234)](_0x478e9e),_0x5a4453=JSON[_0x3cae3c(0x24c)](_0x15a978['response'][_0x3cae3c(0x254)]()['replace'](/```json|```/g,'')[_0x3cae3c(0x1f5)]());await _0x5e8e28[_0x3cae3c(0x1e9)](_0x3cae3c(0x233),{'val':JSON[_0x3cae3c(0x24d)](_0x5a4453),'ack':!![]});if(_0x5a4453[_0x3cae3c(0x219)])await _0x5e8e28[_0x3cae3c(0x1e9)](_0x3cae3c(0x22c),{'val':_0x5a4453[_0x3cae3c(0x219)],'ack':!![]});const _0x219f26={'timestamp':Date['now'](),'id':Date['now']()[_0x3cae3c(0x1f0)](),'analysis':{'activity':{'summary':_0x5a4453[_0x3cae3c(0x219)],'isAlert':_0x5a4453[_0x3cae3c(0x23b)],'alertReason':_0x5a4453[_0x3cae3c(0x1fc)]},'comfort':{'automationProposal':_0x5a4453[_0x3cae3c(0x21c)]}}};_0x5e8e28[_0x3cae3c(0x25d)][_0x3cae3c(0x259)](_0x219f26);if(_0x5e8e28['analysisHistory'][_0x3cae3c(0x214)]>0x32)_0x5e8e28['analysisHistory'][_0x3cae3c(0x22b)]();await _0x5e8e28[_0x3cae3c(0x1e9)]('analysis.analysisHistory',{'val':JSON['stringify'](_0x5e8e28[_0x3cae3c(0x25d)]),'ack':!![]});const _0x2bce24=_0x5a4453[_0x3cae3c(0x23b)]||![];_0x2bce24!==_0x5e8e28[_0x3cae3c(0x1fd)]&&(await _0x5e8e28['setStateAsync']('analysis.isAlert',{'val':_0x2bce24,'ack':!![]}),_0x5e8e28[_0x3cae3c(0x1fd)]=_0x2bce24,_0x2bce24&&(await _0x5e8e28[_0x3cae3c(0x1e9)]('analysis.alertReason',{'val':_0x5a4453[_0x3cae3c(0x1fc)],'ack':!![]}),setup[_0x3cae3c(0x23e)](_0x5e8e28,_0x3cae3c(0x228)+_0x5a4453[_0x3cae3c(0x1fc)],![],_0x5a4453[_0x3cae3c(0x232)])));if(_0x5a4453[_0x3cae3c(0x21c)]&&_0x5a4453[_0x3cae3c(0x21c)][_0x3cae3c(0x24b)]){await _0x5e8e28[_0x3cae3c(0x1e9)](_0x3cae3c(0x1f1),{'val':!![],'ack':!![]}),await _0x5e8e28[_0x3cae3c(0x1e9)](_0x3cae3c(0x22d),{'val':_0x5a4453[_0x3cae3c(0x21c)][_0x3cae3c(0x241)],'ack':!![]}),await _0x5e8e28[_0x3cae3c(0x1e9)](_0x3cae3c(0x1e0),{'val':_0x5a4453[_0x3cae3c(0x21c)]['targetId'],'ack':!![]}),await _0x5e8e28['setStateAsync'](_0x3cae3c(0x243),{'val':JSON[_0x3cae3c(0x24d)](_0x5a4453[_0x3cae3c(0x21c)][_0x3cae3c(0x1ea)]),'ack':!![]});if(_0x41cbfd)executeAutomationAction(_0x5e8e28);}}catch(_0x1e9145){_0x5e8e28[_0x3cae3c(0x25f)][_0x3cae3c(0x1db)](_0x3cae3c(0x264)+_0x1e9145[_0x3cae3c(0x242)]);}}async function createDailyDigest(_0x206523,_0x50ead0){const _0x48f138=a0_0x8a68bb;if(!_0x206523[_0x48f138(0x211)])return;if(!canCallApi()){await _0x206523[_0x48f138(0x1e9)](LTM_DP_STATUS,{'val':_0x48f138(0x21d),'ack':!![]});return;}await _0x206523[_0x48f138(0x1e9)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x206523['geminiModel']||_0x206523['rawEventLog'][_0x48f138(0x214)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x206523['setStateAsync'](LTM_DP_STATUS,{'val':_0x48f138(0x246),'ack':!![]});return;}const _0x44c40b=JSON[_0x48f138(0x24c)](JSON[_0x48f138(0x24d)](_0x206523[_0x48f138(0x209)])),_0x509755=_0x44c40b[_0x48f138(0x214)],_0x52dc8e=_0x48f138(0x1ed)+JSON[_0x48f138(0x24d)](_0x44c40b);try{updateApiTimestamp();const _0x1de70b=await _0x206523[_0x48f138(0x1e5)][_0x48f138(0x234)](_0x52dc8e),_0x5d943a=JSON[_0x48f138(0x24c)](_0x1de70b['response'][_0x48f138(0x254)]()[_0x48f138(0x267)](/```json|```/g,'')[_0x48f138(0x1f5)]()),_0x3abd82={'timestamp':new Date()[_0x48f138(0x249)](),'eventCount':_0x509755,'summary':_0x5d943a[_0x48f138(0x219)]||_0x48f138(0x261),'activityLevel':_0x5d943a[_0x48f138(0x21e)]||_0x48f138(0x1eb),'systemMode':_0x206523[_0x48f138(0x235)]};_0x206523[_0x48f138(0x200)][_0x48f138(0x258)](_0x3abd82);const _0x4603b2=_0x206523[_0x48f138(0x251)][_0x48f138(0x203)]||0x3c;_0x206523['dailyDigests'][_0x48f138(0x214)]>_0x4603b2&&_0x206523['dailyDigests'][_0x48f138(0x231)](0x0,_0x206523['dailyDigests'][_0x48f138(0x214)]-_0x4603b2);await _0x206523[_0x48f138(0x1e9)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x48f138(0x24d)](_0x206523['dailyDigests']),'ack':!![]}),_0x206523['rawEventLog']=[],await _0x206523[_0x48f138(0x1e9)](LTM_DP_RAW_LOG,{'val':JSON[_0x48f138(0x24d)](_0x206523['rawEventLog']),'ack':!![]}),await _0x206523[_0x48f138(0x1e9)](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x206523['isProVersion']&&_0x50ead0)_0x50ead0[_0x48f138(0x1dd)](_0x206523,_0x48f138(0x1e7),{'digest':_0x3abd82});}catch(_0x455f24){_0x206523[_0x48f138(0x25f)][_0x48f138(0x1db)](_0x455f24[_0x48f138(0x242)]);}}async function runBaselineDriftAnalysis(_0x326c2d){const _0x3d3f3f=a0_0x8a68bb;if(!_0x326c2d['isProVersion']||!_0x326c2d[_0x3d3f3f(0x1e5)])return;if(!canCallApi())return;const _0x1458e9=_0x326c2d[_0x3d3f3f(0x251)]['ltmStbWindowDays']||0xe;if(_0x326c2d[_0x3d3f3f(0x200)][_0x3d3f3f(0x214)]<_0x1458e9+0x7){await _0x326c2d[_0x3d3f3f(0x1e9)](_0x3d3f3f(0x24f),{'val':_0x3d3f3f(0x248),'ack':!![]});return;}const _0x1bd2eb=_0x326c2d['dailyDigests'][_0x3d3f3f(0x236)](-_0x1458e9),_0x1ad11d=_0x326c2d[_0x3d3f3f(0x200)]['slice'](0x0,_0x326c2d['dailyDigests'][_0x3d3f3f(0x214)]-_0x1458e9),_0x5cb328=_0x3d3f3f(0x1e3)+JSON[_0x3d3f3f(0x24d)](_0x1ad11d)+_0x3d3f3f(0x262)+JSON[_0x3d3f3f(0x24d)](_0x1bd2eb);try{updateApiTimestamp();const _0xd20115=await _0x326c2d[_0x3d3f3f(0x1e5)]['generateContent'](_0x5cb328),_0x1a4827=JSON[_0x3d3f3f(0x24c)](_0xd20115[_0x3d3f3f(0x244)][_0x3d3f3f(0x254)]()[_0x3d3f3f(0x267)](/```json|```/g,'')[_0x3d3f3f(0x1f5)]());_0x1a4827[_0x3d3f3f(0x20e)]&&(await _0x326c2d[_0x3d3f3f(0x1e9)](_0x3d3f3f(0x24f),{'val':_0x1a4827[_0x3d3f3f(0x20e)],'ack':!![]}),await _0x326c2d[_0x3d3f3f(0x1e9)](_0x3d3f3f(0x1ee),{'val':_0x1a4827[_0x3d3f3f(0x213)],'ack':!![]}),await _0x326c2d[_0x3d3f3f(0x1e9)](_0x3d3f3f(0x257),{'val':Date['now'](),'ack':!![]}));}catch(_0x2870fa){}}async function executeAutomationAction(_0x8351cd){const _0x1dc4dc=a0_0x8a68bb;try{const _0x564dbe=await _0x8351cd['getStateAsync'](_0x1dc4dc(0x1e0)),_0x4045f5=await _0x8351cd[_0x1dc4dc(0x1f9)](_0x1dc4dc(0x243));if(_0x564dbe&&_0x564dbe['val']&&_0x4045f5){const _0x4062b6=_0x564dbe[_0x1dc4dc(0x201)];let _0x19bda8=_0x4045f5[_0x1dc4dc(0x201)];try{_0x19bda8=JSON['parse'](_0x19bda8);}catch(_0xa2266){}_0x8351cd['log'][_0x1dc4dc(0x253)](_0x1dc4dc(0x1f3)+_0x4062b6+_0x1dc4dc(0x223)+_0x19bda8),await _0x8351cd[_0x1dc4dc(0x263)](_0x4062b6,_0x19bda8);}else _0x8351cd[_0x1dc4dc(0x25f)][_0x1dc4dc(0x1f2)](_0x1dc4dc(0x1df));}catch(_0x4af936){_0x8351cd[_0x1dc4dc(0x25f)][_0x1dc4dc(0x1db)](_0x1dc4dc(0x216)+_0x4af936[_0x1dc4dc(0x242)]);}}async function sendMorningBriefing(_0x1e7e9e){const _0x3525bc=a0_0x8a68bb;if(!_0x1e7e9e['geminiModel'])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x3c2165=_0x3525bc(0x215),_0x562f02=await _0x1e7e9e['geminiModel'][_0x3525bc(0x234)](_0x3c2165),_0x39b425=_0x562f02[_0x3525bc(0x244)][_0x3525bc(0x254)]();setup[_0x3525bc(0x23e)](_0x1e7e9e,_0x3525bc(0x22e)+_0x39b425);}catch(_0x150160){_0x1e7e9e['log'][_0x3525bc(0x1db)]('Briefing\x20Error:\x20'+_0x150160['message']);}}module[a0_0x8a68bb(0x205)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};