const a0_0x4fccc9=a0_0x3ce3;(function(_0x22b16e,_0x2e69cb){const _0x1a12da=a0_0x3ce3,_0x17cc83=_0x22b16e();while(!![]){try{const _0x2e5f9d=parseInt(_0x1a12da(0x131))/0x1+-parseInt(_0x1a12da(0x156))/0x2+parseInt(_0x1a12da(0x153))/0x3+parseInt(_0x1a12da(0x12f))/0x4+-parseInt(_0x1a12da(0x165))/0x5*(parseInt(_0x1a12da(0xfc))/0x6)+parseInt(_0x1a12da(0xff))/0x7*(-parseInt(_0x1a12da(0x137))/0x8)+parseInt(_0x1a12da(0xf9))/0x9*(parseInt(_0x1a12da(0x16d))/0xa);if(_0x2e5f9d===_0x2e69cb)break;else _0x17cc83['push'](_0x17cc83['shift']());}catch(_0x43fbef){_0x17cc83['push'](_0x17cc83['shift']());}}}(a0_0x4154,0x646b8));const a0_0x4e50a7=(function(){let _0x56f057=!![];return function(_0x3d8032,_0x1d587a){const _0x403db1=_0x56f057?function(){const _0x1c3a79=a0_0x3ce3;if(_0x1d587a){const _0x72da2=_0x1d587a[_0x1c3a79(0x127)](_0x3d8032,arguments);return _0x1d587a=null,_0x72da2;}}:function(){};return _0x56f057=![],_0x403db1;};}()),a0_0x56f681=a0_0x4e50a7(this,function(){const _0x5ee51b=a0_0x3ce3;return a0_0x56f681['toString']()[_0x5ee51b(0x129)](_0x5ee51b(0xfe))[_0x5ee51b(0x174)]()[_0x5ee51b(0x154)](a0_0x56f681)[_0x5ee51b(0x129)](_0x5ee51b(0xfe));});a0_0x56f681();'use strict';const {GoogleGenerativeAI}=require(a0_0x4fccc9(0x109)),setup=require(a0_0x4fccc9(0xf3)),GEMINI_MODEL=a0_0x4fccc9(0x102),LTM_DP_DAILY_DIGESTS=a0_0x4fccc9(0x10d),LTM_DP_STATUS=a0_0x4fccc9(0x128),LTM_DP_RAW_LOG=a0_0x4fccc9(0x147),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;function a0_0x3ce3(_0x194a46,_0x1a73ee){const _0x3bc374=a0_0x4154();return a0_0x3ce3=function(_0x56f681,_0x4e50a7){_0x56f681=_0x56f681-0xf3;let _0x415482=_0x3bc374[_0x56f681];return _0x415482;},a0_0x3ce3(_0x194a46,_0x1a73ee);}let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x4fccc9(0x16e),'senior_aal':a0_0x4fccc9(0x150),'family':'Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','single_comfort':a0_0x4fccc9(0x11f),'security':a0_0x4fccc9(0x113),'energy_saver':a0_0x4fccc9(0xfb)};function canCallApi(){const _0x566847=a0_0x4fccc9,_0x35869f=Date[_0x566847(0x15f)]();return _0x35869f-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x4e25e4=a0_0x4fccc9;lastGlobalApiCall=Date[_0x4e25e4(0x15f)]();}async function getWeatherContext(_0x4820df){const _0x107ce1=a0_0x4fccc9;if(!_0x4820df[_0x107ce1(0x161)][_0x107ce1(0x12e)]||!_0x4820df[_0x107ce1(0x161)][_0x107ce1(0x114)])return _0x107ce1(0x138);try{const _0x1c01a1=_0x4820df[_0x107ce1(0x161)][_0x107ce1(0x114)];let _0x269819=await _0x4820df[_0x107ce1(0x10a)](_0x1c01a1+'.Current.Temperature');if(!_0x269819)_0x269819=await _0x4820df['getForeignStateAsync'](_0x1c01a1+_0x107ce1(0x124));let _0x1c0ccd=await _0x4820df[_0x107ce1(0x10a)](_0x1c01a1+_0x107ce1(0x152));if(!_0x1c0ccd)_0x1c0ccd=await _0x4820df[_0x107ce1(0x10a)](_0x1c01a1+'.forecast.current.state');let _0x4b90f3=_0x107ce1(0x121);const _0x1292a3=await _0x4820df[_0x107ce1(0x10a)](_0x1c01a1+_0x107ce1(0x166));if(_0x1292a3)_0x4b90f3=_0x1292a3[_0x107ce1(0x118)]?'Nacht':_0x107ce1(0x104);if(_0x269819&&_0x1c0ccd)return _0x269819[_0x107ce1(0x118)]+_0x107ce1(0x115)+_0x1c0ccd['val']+',\x20Lichtverh√§ltnisse:\x20'+_0x4b90f3;}catch(_0x596bba){}return'Wetterdaten\x20nicht\x20abrufbar';}function a0_0x4154(){const _0x43a991=['activityLevel','.Current.WeatherText','2212497aSkwVF','constructor','system.presenceWho','272712weyOgC','length','analysis.automation.patternDetected','isProVersion','ltmLtbWindowDays','generateContent','Skipped\x20(No\x20AI\x20or\x20Data)','text','toLocaleTimeString','now','geminiModel','config','replace','.\x20KONTEXT:\x20','LTM.driftAnalysis.lastCheck','206775RRyIjX','.Current.IsNight','analysis.alertReason','slice','\x0aAktivit√§t:\x20','getStateAsync','KI-Fehler\x20(Fallback)','üìÖ\x20Daily\x20Digest:\x0a','1870310FqzIin','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','Briefing\x20Error:\x20','setStateAsync','analysis.lastResult','rawEventLog','.\x20EVENTS:\x20','toString','analysis.automation.description','aiPersona','message','./setup','\x0aSTB:\x20','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','ANALYZE_HEALTH','analysisHistory','27nmKmGh','.\x20ANWESEND:\x20','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','114RlZTIo','log','(((.+)+)+)+$','7XPEggX','\x20=\x20','baselineDrift','models/gemini-flash-latest','Gemini\x20Error:\x20','Tag','splice','automationProposal','normal',',\x20Wetter:\x20','@google/generative-ai','getForeignStateAsync','LTM.driftAnalysis.driftDetails','%)\x20nach\x20\x22','LTM.dailyDigests','debug','.\x20SYSTEM_MODE:\x20','exports','analysis.analysisHistory','BUTLER\x20Execution\x20Error:\x20','Sicherheit\x20geht\x20vor.','weatherInstance','¬∞C,\x20','toFixed','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','val','analysis.automation.targetId','dailyDigests','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','isAlert','LTM.driftAnalysis.baselineDrift','push','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','lastAlertState','Unbekannt','setForeignStateAsync','summary','.forecast.current.temperature','N/A\x20(Learning)','Keine\x20Details.','apply','LTM.processingStatus','search','analysis.automation.autoApply','targetId','reason','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','useWeather','575152olJxTP','error','390728cXAVFV','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','description','pop','generic','Started...','3997496llDCVa','Unbekannt\x20(Kein\x20Sensor)','parse','stringify','eventHistory','.\x20EMERGENCY:\x20','ü§ñ\x20Butler\x20Brain\x20Error:\x20','analysis.isAlert','response','targetValue','Skipped\x20(Traffic)','analysis.automation.targetValue','driftDetails','trim','sendNotification','üåÖ\x20Briefing\x20generated\x20(Length:\x20','LTM.rawEventLog','toISOString','currentSystemMode','info','send','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','alertReason','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.'];a0_0x4154=function(){return _0x43a991;};return a0_0x4154();}async function consultButler(_0x1f4279,_0x5aacaa,_0x22b1b8,_0x378b99){const _0x14116b=a0_0x4fccc9;if(!_0x1f4279[_0x14116b(0x160)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x22a951=Date[_0x14116b(0x15f)]();if(decisionCache[_0x5aacaa]&&_0x22a951-decisionCache[_0x5aacaa]['timestamp']<CACHE_TTL_MS){const _0x2bc52c=decisionCache[_0x5aacaa]['decision'];return _0x1f4279['log'][_0x14116b(0x10e)](_0x14116b(0xf6)+_0x5aacaa+'\x20->\x20'+(_0x2bc52c['approved']?'OK':'NO')+'\x20('+_0x2bc52c[_0x14116b(0x12c)]+')'),_0x2bc52c;}if(!canCallApi())return _0x1f4279['log'][_0x14116b(0x10e)](_0x14116b(0x12d)+_0x5aacaa+'\x20√ºbersprungen\x20(Auto-Approved).'),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x1de588=new Date()[_0x14116b(0x15e)](),_0x1e63f0=await getWeatherContext(_0x1f4279),_0x1406e1=PERSONA_MAPPING[_0x1f4279[_0x14116b(0x161)][_0x14116b(0x176)]||'generic'],_0x3fb169='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x1de588+_0x14116b(0x108)+_0x1e63f0+_0x14116b(0x14c)+(_0x378b99*0x64)[_0x14116b(0x116)](0x0)+_0x14116b(0x10c)+_0x5aacaa+_0x14116b(0x14f)+_0x22b1b8+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x1406e1+_0x14116b(0x11b);try{updateApiTimestamp();const _0x16adc0=await _0x1f4279[_0x14116b(0x160)]['generateContent'](_0x3fb169),_0x465644=_0x16adc0[_0x14116b(0x13f)][_0x14116b(0x15d)]()[_0x14116b(0x162)](/```json|```/g,'')['trim'](),_0x550e69=JSON[_0x14116b(0x139)](_0x465644);return decisionCache[_0x5aacaa]={'decision':_0x550e69,'timestamp':_0x22a951},_0x550e69;}catch(_0x4b0c1b){return _0x1f4279[_0x14116b(0xfd)]['warn'](_0x14116b(0x13d)+_0x4b0c1b[_0x14116b(0x177)]),decisionCache[_0x5aacaa]={'decision':{'approved':!![],'reason':_0x14116b(0x16b)},'timestamp':_0x22a951-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x1f9cd3,_0x31b22e=''){const _0x5da3c2=a0_0x4fccc9;if(!_0x1f9cd3[_0x5da3c2(0x160)])return;if(!canCallApi()){_0x1f9cd3['log'][_0x5da3c2(0x10e)]('ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x1f9cd3[_0x5da3c2(0x13b)][_0x5da3c2(0x157)]===0x0)return;const _0x1e26b5=_0x1f9cd3[_0x5da3c2(0x13b)][_0x5da3c2(0x168)](0x0,0xf),_0x388cd0=_0x1f9cd3[_0x5da3c2(0x149)],_0x1604e4=PERSONA_MAPPING[_0x1f9cd3[_0x5da3c2(0x161)][_0x5da3c2(0x176)]||_0x5da3c2(0x135)],_0x572a27=_0x1f9cd3[_0x5da3c2(0x161)]['livingContext']||_0x5da3c2(0x126);let _0x4f733b='Unbekannt';try{const _0x3b7c6c=await _0x1f9cd3[_0x5da3c2(0x16a)](_0x5da3c2(0x155));if(_0x3b7c6c&&_0x3b7c6c[_0x5da3c2(0x118)])_0x4f733b=_0x3b7c6c[_0x5da3c2(0x118)];}catch(_0x1a5e2a){}let _0x228203=![];try{const _0x49445b=await _0x1f9cd3[_0x5da3c2(0x16a)](_0x5da3c2(0x12a));if(_0x49445b&&_0x49445b[_0x5da3c2(0x118)])_0x228203=!![];}catch(_0x111029){}const _0x40ab00='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x1604e4+_0x5da3c2(0x163)+_0x572a27+_0x5da3c2(0x10f)+_0x388cd0+_0x5da3c2(0xfa)+_0x4f733b+_0x5da3c2(0x173)+JSON[_0x5da3c2(0x13a)](_0x1e26b5)+_0x5da3c2(0x13c)+_0x31b22e+_0x5da3c2(0xf5);try{updateApiTimestamp();const _0x2e5d8a=await _0x1f9cd3['geminiModel']['generateContent'](_0x40ab00),_0x1c8430=JSON[_0x5da3c2(0x139)](_0x2e5d8a[_0x5da3c2(0x13f)]['text']()[_0x5da3c2(0x162)](/```json|```/g,'')['trim']());await _0x1f9cd3[_0x5da3c2(0x170)](_0x5da3c2(0x171),{'val':JSON[_0x5da3c2(0x13a)](_0x1c8430),'ack':!![]});if(_0x1c8430[_0x5da3c2(0x123)])await _0x1f9cd3['setStateAsync']('analysis.activitySummary',{'val':_0x1c8430[_0x5da3c2(0x123)],'ack':!![]});const _0x210160={'timestamp':Date[_0x5da3c2(0x15f)](),'id':Date[_0x5da3c2(0x15f)]()[_0x5da3c2(0x174)](),'analysis':{'activity':{'summary':_0x1c8430[_0x5da3c2(0x123)],'isAlert':_0x1c8430['isAlert'],'alertReason':_0x1c8430[_0x5da3c2(0x14e)]},'comfort':{'automationProposal':_0x1c8430[_0x5da3c2(0x106)]}}};_0x1f9cd3[_0x5da3c2(0xf8)]['unshift'](_0x210160);if(_0x1f9cd3[_0x5da3c2(0xf8)][_0x5da3c2(0x157)]>0x32)_0x1f9cd3['analysisHistory'][_0x5da3c2(0x134)]();await _0x1f9cd3[_0x5da3c2(0x170)](_0x5da3c2(0x111),{'val':JSON[_0x5da3c2(0x13a)](_0x1f9cd3[_0x5da3c2(0xf8)]),'ack':!![]});const _0x2c6267=_0x1c8430[_0x5da3c2(0x11c)]||![];_0x2c6267!==_0x1f9cd3['lastAlertState']&&(await _0x1f9cd3[_0x5da3c2(0x170)](_0x5da3c2(0x13e),{'val':_0x2c6267,'ack':!![]}),_0x1f9cd3[_0x5da3c2(0x120)]=_0x2c6267,_0x2c6267&&(await _0x1f9cd3[_0x5da3c2(0x170)](_0x5da3c2(0x167),{'val':_0x1c8430[_0x5da3c2(0x14e)],'ack':!![]}),setup[_0x5da3c2(0x145)](_0x1f9cd3,'‚ö†Ô∏è\x20ALARM:\x20'+_0x1c8430[_0x5da3c2(0x14e)],![],_0x1c8430['isEmergency'])));if(_0x1c8430[_0x5da3c2(0x106)]&&_0x1c8430[_0x5da3c2(0x106)]['detected']){await _0x1f9cd3['setStateAsync'](_0x5da3c2(0x158),{'val':!![],'ack':!![]}),await _0x1f9cd3[_0x5da3c2(0x170)](_0x5da3c2(0x175),{'val':_0x1c8430['automationProposal'][_0x5da3c2(0x133)],'ack':!![]}),await _0x1f9cd3[_0x5da3c2(0x170)]('analysis.automation.targetId',{'val':_0x1c8430[_0x5da3c2(0x106)][_0x5da3c2(0x12b)],'ack':!![]}),await _0x1f9cd3[_0x5da3c2(0x170)](_0x5da3c2(0x142),{'val':JSON['stringify'](_0x1c8430['automationProposal'][_0x5da3c2(0x140)]),'ack':!![]});if(_0x228203)executeAutomationAction(_0x1f9cd3);}}catch(_0x2f5178){_0x1f9cd3[_0x5da3c2(0xfd)][_0x5da3c2(0x130)](_0x5da3c2(0x103)+_0x2f5178[_0x5da3c2(0x177)]);}}async function createDailyDigest(_0x242889,_0x5e3cdb){const _0x13fa98=a0_0x4fccc9;if(!_0x242889['isProVersion'])return;if(!canCallApi()){await _0x242889[_0x13fa98(0x170)](LTM_DP_STATUS,{'val':_0x13fa98(0x141),'ack':!![]});return;}await _0x242889[_0x13fa98(0x170)](LTM_DP_STATUS,{'val':_0x13fa98(0x136),'ack':!![]});if(!_0x242889[_0x13fa98(0x160)]||_0x242889['rawEventLog'][_0x13fa98(0x157)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x242889['setStateAsync'](LTM_DP_STATUS,{'val':_0x13fa98(0x15c),'ack':!![]});return;}const _0x8f1e3b=JSON[_0x13fa98(0x139)](JSON['stringify'](_0x242889[_0x13fa98(0x172)])),_0x5d7ff5=_0x8f1e3b[_0x13fa98(0x157)],_0x327a05='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON['stringify'](_0x8f1e3b);try{updateApiTimestamp();const _0x1aece6=await _0x242889[_0x13fa98(0x160)][_0x13fa98(0x15b)](_0x327a05),_0x21ab64=JSON[_0x13fa98(0x139)](_0x1aece6[_0x13fa98(0x13f)]['text']()['replace'](/```json|```/g,'')[_0x13fa98(0x144)]()),_0x20b8c5={'timestamp':new Date()[_0x13fa98(0x148)](),'eventCount':_0x5d7ff5,'summary':_0x21ab64['summary']||'Digest','activityLevel':_0x21ab64['activityLevel']||_0x13fa98(0x107),'systemMode':_0x242889[_0x13fa98(0x149)]};_0x242889['dailyDigests'][_0x13fa98(0x11e)](_0x20b8c5);const _0x102078=_0x242889['config'][_0x13fa98(0x15a)]||0x3c;_0x242889[_0x13fa98(0x11a)][_0x13fa98(0x157)]>_0x102078&&_0x242889[_0x13fa98(0x11a)][_0x13fa98(0x105)](0x0,_0x242889[_0x13fa98(0x11a)][_0x13fa98(0x157)]-_0x102078);await _0x242889[_0x13fa98(0x170)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x13fa98(0x13a)](_0x242889[_0x13fa98(0x11a)]),'ack':!![]}),_0x242889[_0x13fa98(0x172)]=[],await _0x242889[_0x13fa98(0x170)](LTM_DP_RAW_LOG,{'val':JSON[_0x13fa98(0x13a)](_0x242889[_0x13fa98(0x172)]),'ack':!![]}),await _0x242889[_0x13fa98(0x170)](LTM_DP_STATUS,{'val':'Success','ack':!![]});const _0x38cf14=_0x13fa98(0x16c)+_0x21ab64['summary']+_0x13fa98(0x169)+_0x21ab64[_0x13fa98(0x151)];setup[_0x13fa98(0x145)](_0x242889,_0x38cf14,![],![]);if(_0x242889[_0x13fa98(0x159)]&&_0x5e3cdb)_0x5e3cdb[_0x13fa98(0x14b)](_0x242889,_0x13fa98(0xf7),{'digest':_0x20b8c5});}catch(_0x39a1ec){_0x242889[_0x13fa98(0xfd)]['error'](_0x39a1ec[_0x13fa98(0x177)]);}}async function runBaselineDriftAnalysis(_0xe58013){const _0x4572fa=a0_0x4fccc9;if(!_0xe58013[_0x4572fa(0x159)]||!_0xe58013[_0x4572fa(0x160)])return;if(!canCallApi())return;const _0x5b1d3a=_0xe58013[_0x4572fa(0x161)]['ltmStbWindowDays']||0xe;if(_0xe58013[_0x4572fa(0x11a)][_0x4572fa(0x157)]<_0x5b1d3a+0x7){await _0xe58013[_0x4572fa(0x170)](_0x4572fa(0x11d),{'val':_0x4572fa(0x125),'ack':!![]});return;}const _0x3337f9=_0xe58013['dailyDigests']['slice'](-_0x5b1d3a),_0x469a68=_0xe58013[_0x4572fa(0x11a)][_0x4572fa(0x168)](0x0,_0xe58013[_0x4572fa(0x11a)][_0x4572fa(0x157)]-_0x5b1d3a),_0x2b193f='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x4572fa(0x13a)](_0x469a68)+_0x4572fa(0xf4)+JSON[_0x4572fa(0x13a)](_0x3337f9);try{updateApiTimestamp();const _0xf60169=await _0xe58013[_0x4572fa(0x160)][_0x4572fa(0x15b)](_0x2b193f),_0x23d56a=JSON[_0x4572fa(0x139)](_0xf60169[_0x4572fa(0x13f)][_0x4572fa(0x15d)]()['replace'](/```json|```/g,'')[_0x4572fa(0x144)]());_0x23d56a[_0x4572fa(0x101)]&&(await _0xe58013[_0x4572fa(0x170)](_0x4572fa(0x11d),{'val':_0x23d56a['baselineDrift'],'ack':!![]}),await _0xe58013[_0x4572fa(0x170)](_0x4572fa(0x10b),{'val':_0x23d56a[_0x4572fa(0x143)],'ack':!![]}),await _0xe58013['setStateAsync'](_0x4572fa(0x164),{'val':Date[_0x4572fa(0x15f)](),'ack':!![]}));}catch(_0x4651f0){}}async function executeAutomationAction(_0xa62dda){const _0x5befd0=a0_0x4fccc9;try{const _0x2776c1=await _0xa62dda[_0x5befd0(0x16a)](_0x5befd0(0x119)),_0x13237a=await _0xa62dda[_0x5befd0(0x16a)]('analysis.automation.targetValue');if(_0x2776c1&&_0x2776c1['val']&&_0x13237a){const _0x1cae6c=_0x2776c1[_0x5befd0(0x118)];let _0x208c64=_0x13237a[_0x5befd0(0x118)];try{_0x208c64=JSON[_0x5befd0(0x139)](_0x208c64);}catch(_0x52dc76){}_0xa62dda[_0x5befd0(0xfd)]['info'](_0x5befd0(0x132)+_0x1cae6c+_0x5befd0(0x100)+_0x208c64),await _0xa62dda[_0x5befd0(0x122)](_0x1cae6c,_0x208c64);}else _0xa62dda[_0x5befd0(0xfd)]['warn'](_0x5befd0(0x117));}catch(_0x263042){_0xa62dda[_0x5befd0(0xfd)][_0x5befd0(0x130)](_0x5befd0(0x112)+_0x263042[_0x5befd0(0x177)]);}}async function sendMorningBriefing(_0x31c7e9){const _0x301dbf=a0_0x4fccc9;if(!_0x31c7e9[_0x301dbf(0x160)]){_0x31c7e9[_0x301dbf(0xfd)]['warn']('ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.');return;}_0x31c7e9[_0x301dbf(0xfd)][_0x301dbf(0x14a)](_0x301dbf(0x14d));try{updateApiTimestamp();const _0x577862='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x44a87c=await _0x31c7e9[_0x301dbf(0x160)]['generateContent'](_0x577862),_0x2972a9=_0x44a87c['response']['text']();_0x31c7e9['log'][_0x301dbf(0x14a)](_0x301dbf(0x146)+_0x2972a9[_0x301dbf(0x157)]+').\x20Sending\x20notification...'),setup[_0x301dbf(0x145)](_0x31c7e9,'üåÖ\x20Morning\x20Briefing:\x0a'+_0x2972a9);}catch(_0x3791a2){_0x31c7e9['log'][_0x301dbf(0x130)](_0x301dbf(0x16f)+_0x3791a2[_0x301dbf(0x177)]);}}module[a0_0x4fccc9(0x110)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};