const a0_0x2964b4=a0_0x12fa;function a0_0x12fa(_0x2a25d3,_0x14c780){const _0x193980=a0_0x2fc9();return a0_0x12fa=function(_0x5421ac,_0x242051){_0x5421ac=_0x5421ac-0x1b5;let _0x2fc923=_0x193980[_0x5421ac];return _0x2fc923;},a0_0x12fa(_0x2a25d3,_0x14c780);}(function(_0x41b7f6,_0x3e15a7){const _0x30ac69=a0_0x12fa,_0x145e05=_0x41b7f6();while(!![]){try{const _0x107267=-parseInt(_0x30ac69(0x1c3))/0x1+-parseInt(_0x30ac69(0x205))/0x2*(-parseInt(_0x30ac69(0x1df))/0x3)+-parseInt(_0x30ac69(0x217))/0x4*(-parseInt(_0x30ac69(0x1f0))/0x5)+-parseInt(_0x30ac69(0x20a))/0x6+-parseInt(_0x30ac69(0x1f8))/0x7*(parseInt(_0x30ac69(0x224))/0x8)+parseInt(_0x30ac69(0x1c2))/0x9*(-parseInt(_0x30ac69(0x228))/0xa)+-parseInt(_0x30ac69(0x1d4))/0xb*(-parseInt(_0x30ac69(0x1b8))/0xc);if(_0x107267===_0x3e15a7)break;else _0x145e05['push'](_0x145e05['shift']());}catch(_0x455b2a){_0x145e05['push'](_0x145e05['shift']());}}}(a0_0x2fc9,0xa5d72));const a0_0x242051=(function(){let _0x2f4f27=!![];return function(_0x2b251f,_0x4c281f){const _0x58be04=_0x2f4f27?function(){if(_0x4c281f){const _0x4cc890=_0x4c281f['apply'](_0x2b251f,arguments);return _0x4c281f=null,_0x4cc890;}}:function(){};return _0x2f4f27=![],_0x58be04;};}()),a0_0x5421ac=a0_0x242051(this,function(){const _0xddf277=a0_0x12fa;return a0_0x5421ac[_0xddf277(0x1e3)]()[_0xddf277(0x1ea)](_0xddf277(0x1e6))[_0xddf277(0x1e3)]()[_0xddf277(0x1ee)](a0_0x5421ac)[_0xddf277(0x1ea)](_0xddf277(0x1e6));});a0_0x5421ac();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require(a0_0x2964b4(0x220)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x2964b4(0x1c9),LTM_DP_STATUS=a0_0x2964b4(0x1ff),LTM_DP_RAW_LOG=a0_0x2964b4(0x232),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x2964b4(0x201),'senior_aal':'PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':a0_0x2964b4(0x1c0),'single_comfort':a0_0x2964b4(0x1da),'security':a0_0x2964b4(0x1f9),'energy_saver':a0_0x2964b4(0x22b)};function canCallApi(){const _0x3c40a2=a0_0x2964b4,_0x25086a=Date[_0x3c40a2(0x20d)]();return _0x25086a-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x5b297b=a0_0x2964b4;lastGlobalApiCall=Date[_0x5b297b(0x20d)]();}async function getWeatherContext(_0x2e7162){const _0x1f0013=a0_0x2964b4;if(!_0x2e7162['config']['useWeather']||!_0x2e7162[_0x1f0013(0x1c8)][_0x1f0013(0x1bc)])return _0x1f0013(0x207);try{const _0x5b2102=_0x2e7162[_0x1f0013(0x1c8)][_0x1f0013(0x1bc)];let _0xb63764=await _0x2e7162[_0x1f0013(0x1f4)](_0x5b2102+_0x1f0013(0x1f2));if(!_0xb63764)_0xb63764=await _0x2e7162[_0x1f0013(0x1f4)](_0x5b2102+_0x1f0013(0x20e));let _0x3a41aa=await _0x2e7162[_0x1f0013(0x1f4)](_0x5b2102+_0x1f0013(0x203));if(!_0x3a41aa)_0x3a41aa=await _0x2e7162[_0x1f0013(0x1f4)](_0x5b2102+_0x1f0013(0x20f));let _0x518b0e=_0x1f0013(0x209);const _0x150fcc=await _0x2e7162['getForeignStateAsync'](_0x5b2102+_0x1f0013(0x1bf));if(_0x150fcc)_0x518b0e=_0x150fcc[_0x1f0013(0x1cf)]?_0x1f0013(0x1e0):'Tag';if(_0xb63764&&_0x3a41aa)return _0xb63764[_0x1f0013(0x1cf)]+_0x1f0013(0x234)+_0x3a41aa[_0x1f0013(0x1cf)]+',\x20Lichtverh√§ltnisse:\x20'+_0x518b0e;}catch(_0x202291){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x3210d3,_0x3d0d54,_0x1aa5d8,_0xc7aba9){const _0x32d049=a0_0x2964b4;if(!_0x3210d3[_0x32d049(0x1d9)])return{'approved':!![],'reason':_0x32d049(0x1e4)};const _0x469395=Date[_0x32d049(0x20d)]();if(decisionCache[_0x3d0d54]&&_0x469395-decisionCache[_0x3d0d54]['timestamp']<CACHE_TTL_MS){const _0x532d2a=decisionCache[_0x3d0d54][_0x32d049(0x1b7)];return _0x3210d3['log'][_0x32d049(0x1b6)](_0x32d049(0x213)+_0x3d0d54+'\x20->\x20'+(_0x532d2a[_0x32d049(0x223)]?'OK':'NO')+'\x20('+_0x532d2a[_0x32d049(0x1f6)]+')'),_0x532d2a;}if(!canCallApi())return _0x3210d3[_0x32d049(0x21c)][_0x32d049(0x1b6)](_0x32d049(0x1e2)+_0x3d0d54+_0x32d049(0x1d7)),{'approved':!![],'reason':_0x32d049(0x1ca)};const _0x10bae5=new Date()[_0x32d049(0x239)](),_0x9dfcb6=await getWeatherContext(_0x3210d3),_0x24b140=PERSONA_MAPPING[_0x3210d3[_0x32d049(0x1c8)][_0x32d049(0x1ce)]||_0x32d049(0x1dc)],_0x454917='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x10bae5+_0x32d049(0x1c5)+_0x9dfcb6+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0xc7aba9*0x64)[_0x32d049(0x1b9)](0x0)+_0x32d049(0x1cb)+_0x3d0d54+_0x32d049(0x1f3)+_0x1aa5d8+_0x32d049(0x227)+_0x24b140+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x53500c=await _0x3210d3[_0x32d049(0x1d9)][_0x32d049(0x1e8)](_0x454917),_0xb19de2=_0x53500c[_0x32d049(0x1dd)]['text']()['replace'](/```json|```/g,'')[_0x32d049(0x21d)](),_0x45e618=JSON[_0x32d049(0x1e9)](_0xb19de2);return decisionCache[_0x3d0d54]={'decision':_0x45e618,'timestamp':_0x469395},_0x45e618;}catch(_0x41079e){return _0x3210d3[_0x32d049(0x21c)][_0x32d049(0x21a)](_0x32d049(0x221)+_0x41079e['message']),decisionCache[_0x3d0d54]={'decision':{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'},'timestamp':_0x469395-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x32d049(0x204)};}}async function runGeminiAnalysis(_0x1159a7,_0x4a6c0c=''){const _0x22c2f9=a0_0x2964b4;if(!_0x1159a7[_0x22c2f9(0x1d9)])return;if(!canCallApi()){_0x1159a7[_0x22c2f9(0x21c)][_0x22c2f9(0x1b6)]('ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x1159a7[_0x22c2f9(0x1cc)][_0x22c2f9(0x1c1)]===0x0)return;const _0x4fc94e=_0x1159a7[_0x22c2f9(0x1cc)]['slice'](0x0,0xf),_0x586f2a=_0x1159a7[_0x22c2f9(0x236)],_0x466cb8=PERSONA_MAPPING[_0x1159a7[_0x22c2f9(0x1c8)]['aiPersona']||_0x22c2f9(0x1dc)],_0x4d810e=_0x1159a7[_0x22c2f9(0x1c8)][_0x22c2f9(0x202)]||_0x22c2f9(0x1be);let _0x59dfe4=_0x22c2f9(0x209);try{const _0x183f07=await _0x1159a7['getStateAsync']('system.presenceWho');if(_0x183f07&&_0x183f07[_0x22c2f9(0x1cf)])_0x59dfe4=_0x183f07[_0x22c2f9(0x1cf)];}catch(_0x2a3dc1){}let _0x4f2e4e=![];try{const _0x53e396=await _0x1159a7[_0x22c2f9(0x1e1)]('analysis.automation.autoApply');if(_0x53e396&&_0x53e396[_0x22c2f9(0x1cf)])_0x4f2e4e=!![];}catch(_0x2d4810){}const _0x4df48d=_0x22c2f9(0x1c4)+_0x466cb8+_0x22c2f9(0x22f)+_0x4d810e+'.\x20SYSTEM_MODE:\x20'+_0x586f2a+_0x22c2f9(0x235)+_0x59dfe4+'.\x20EVENTS:\x20'+JSON['stringify'](_0x4fc94e)+_0x22c2f9(0x1fb)+_0x4a6c0c+_0x22c2f9(0x1c7);try{updateApiTimestamp();const _0x1d4347=await _0x1159a7[_0x22c2f9(0x1d9)]['generateContent'](_0x4df48d),_0x522205=JSON[_0x22c2f9(0x1e9)](_0x1d4347[_0x22c2f9(0x1dd)][_0x22c2f9(0x1bb)]()[_0x22c2f9(0x1f5)](/```json|```/g,'')[_0x22c2f9(0x21d)]());await _0x1159a7[_0x22c2f9(0x1ef)](_0x22c2f9(0x231),{'val':JSON[_0x22c2f9(0x206)](_0x522205),'ack':!![]});if(_0x522205[_0x22c2f9(0x230)])await _0x1159a7['setStateAsync']('analysis.activitySummary',{'val':_0x522205[_0x22c2f9(0x230)],'ack':!![]});const _0x4b59bd={'timestamp':Date['now'](),'id':Date[_0x22c2f9(0x20d)]()[_0x22c2f9(0x1e3)](),'analysis':{'activity':{'summary':_0x522205[_0x22c2f9(0x230)],'isAlert':_0x522205['isAlert'],'alertReason':_0x522205['alertReason']},'comfort':{'automationProposal':_0x522205[_0x22c2f9(0x1d2)]}}};_0x1159a7[_0x22c2f9(0x1fd)][_0x22c2f9(0x1d3)](_0x4b59bd);if(_0x1159a7[_0x22c2f9(0x1fd)][_0x22c2f9(0x1c1)]>0x32)_0x1159a7[_0x22c2f9(0x1fd)]['pop']();await _0x1159a7[_0x22c2f9(0x1ef)](_0x22c2f9(0x20c),{'val':JSON[_0x22c2f9(0x206)](_0x1159a7['analysisHistory']),'ack':!![]});const _0x2d7e22=_0x522205[_0x22c2f9(0x1b5)]||![];_0x2d7e22!==_0x1159a7[_0x22c2f9(0x212)]&&(await _0x1159a7[_0x22c2f9(0x1ef)](_0x22c2f9(0x237),{'val':_0x2d7e22,'ack':!![]}),_0x1159a7['lastAlertState']=_0x2d7e22,_0x2d7e22&&(await _0x1159a7[_0x22c2f9(0x1ef)]('analysis.alertReason',{'val':_0x522205[_0x22c2f9(0x215)],'ack':!![]}),setup[_0x22c2f9(0x1d6)](_0x1159a7,_0x22c2f9(0x1d8)+_0x522205[_0x22c2f9(0x215)],![],_0x522205[_0x22c2f9(0x22e)])));if(_0x522205[_0x22c2f9(0x1d2)]&&_0x522205[_0x22c2f9(0x1d2)]['detected']){await _0x1159a7[_0x22c2f9(0x1ef)](_0x22c2f9(0x21f),{'val':!![],'ack':!![]}),await _0x1159a7['setStateAsync'](_0x22c2f9(0x1cd),{'val':_0x522205['automationProposal'][_0x22c2f9(0x1ed)],'ack':!![]}),await _0x1159a7[_0x22c2f9(0x1ef)]('analysis.automation.targetId',{'val':_0x522205['automationProposal'][_0x22c2f9(0x233)],'ack':!![]}),await _0x1159a7['setStateAsync']('analysis.automation.targetValue',{'val':JSON[_0x22c2f9(0x206)](_0x522205[_0x22c2f9(0x1d2)]['targetValue']),'ack':!![]});if(_0x4f2e4e)executeAutomationAction(_0x1159a7);}}catch(_0x4d7297){_0x1159a7[_0x22c2f9(0x21c)][_0x22c2f9(0x225)](_0x22c2f9(0x1d5)+_0x4d7297[_0x22c2f9(0x216)]);}}function a0_0x2fc9(){const _0x21aebb=['analysis.analysisHistory','now','.forecast.current.temperature','.forecast.current.state','dailyDigests','\x20=\x20','lastAlertState','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','Skipped\x20(Traffic)','alertReason','message','32vAIrvK','BUTLER\x20Execution\x20Error:\x20','normal','warn','push','log','trim','LTM.driftAnalysis.lastCheck','analysis.automation.patternDetected','./setup','ü§ñ\x20Butler\x20Brain\x20Error:\x20','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','approved','16ynCHmg','error','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','50SaXfpu','\x0aSTB:\x20','ltmLtbWindowDays','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','splice','isEmergency','.\x20KONTEXT:\x20','summary','analysis.lastResult','LTM.rawEventLog','targetId','¬∞C,\x20','.\x20ANWESEND:\x20','currentSystemMode','analysis.isAlert','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','toLocaleTimeString','isAlert','debug','decision','24TzHTrl','toFixed','activityLevel','text','weatherInstance','Success','Keine\x20Details.','.Current.IsNight','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','length','877203YPoEws','1066759aWWlMG','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20',',\x20Wetter:\x20','Skipped\x20(No\x20AI\x20or\x20Data)','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','config','LTM.dailyDigests','Traffic-Schutz\x20(Auto-Approved)','%)\x20nach\x20\x22','eventHistory','analysis.automation.description','aiPersona','val','driftDetails','LTM.driftAnalysis.baselineDrift','automationProposal','unshift','17438146UGjPqX','Gemini\x20Error:\x20','sendNotification','\x20√ºbersprungen\x20(Auto-Approved).','‚ö†Ô∏è\x20ALARM:\x20','geminiModel','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','exports','generic','response','ltmStbWindowDays','586797nOEtuF','Nacht','getStateAsync','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','toString','KI\x20offline\x20(Fallback)','rawEventLog','(((.+)+)+)+$','ANALYZE_HEALTH','generateContent','parse','search','isProVersion','send','description','constructor','setStateAsync','305645xetsHz','baselineDrift','.Current.Temperature','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','getForeignStateAsync','replace','reason','Digest','4054967cEyTxd','Sicherheit\x20geht\x20vor.','N/A\x20(Learning)','.\x20EMERGENCY:\x20','slice','analysisHistory','toISOString','LTM.processingStatus','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','livingContext','.Current.WeatherText','KI-Fehler\x20(Fallback)','6fwmZkR','stringify','Unbekannt\x20(Kein\x20Sensor)','Briefing\x20Error:\x20','Unbekannt','5126778Hjtwff','LTM.driftAnalysis.driftDetails'];a0_0x2fc9=function(){return _0x21aebb;};return a0_0x2fc9();}async function createDailyDigest(_0x5292db,_0x4f520e){const _0x42264f=a0_0x2964b4;if(!_0x5292db[_0x42264f(0x1eb)])return;if(!canCallApi()){await _0x5292db['setStateAsync'](LTM_DP_STATUS,{'val':_0x42264f(0x214),'ack':!![]});return;}await _0x5292db[_0x42264f(0x1ef)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x5292db[_0x42264f(0x1d9)]||_0x5292db[_0x42264f(0x1e5)][_0x42264f(0x1c1)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x5292db[_0x42264f(0x1ef)](LTM_DP_STATUS,{'val':_0x42264f(0x1c6),'ack':!![]});return;}const _0x387641=JSON['parse'](JSON[_0x42264f(0x206)](_0x5292db[_0x42264f(0x1e5)])),_0x551e3c=_0x387641[_0x42264f(0x1c1)],_0x59a669=_0x42264f(0x238)+JSON['stringify'](_0x387641);try{updateApiTimestamp();const _0x29430f=await _0x5292db[_0x42264f(0x1d9)][_0x42264f(0x1e8)](_0x59a669),_0x1aa997=JSON[_0x42264f(0x1e9)](_0x29430f[_0x42264f(0x1dd)]['text']()['replace'](/```json|```/g,'')[_0x42264f(0x21d)]()),_0x23a7f0={'timestamp':new Date()[_0x42264f(0x1fe)](),'eventCount':_0x551e3c,'summary':_0x1aa997[_0x42264f(0x230)]||_0x42264f(0x1f7),'activityLevel':_0x1aa997[_0x42264f(0x1ba)]||_0x42264f(0x219),'systemMode':_0x5292db['currentSystemMode']};_0x5292db[_0x42264f(0x210)][_0x42264f(0x21b)](_0x23a7f0);const _0x2b0183=_0x5292db['config'][_0x42264f(0x22a)]||0x3c;_0x5292db['dailyDigests'][_0x42264f(0x1c1)]>_0x2b0183&&_0x5292db[_0x42264f(0x210)][_0x42264f(0x22d)](0x0,_0x5292db['dailyDigests'][_0x42264f(0x1c1)]-_0x2b0183);await _0x5292db[_0x42264f(0x1ef)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x42264f(0x206)](_0x5292db[_0x42264f(0x210)]),'ack':!![]}),_0x5292db[_0x42264f(0x1e5)]=[],await _0x5292db[_0x42264f(0x1ef)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x5292db['rawEventLog']),'ack':!![]}),await _0x5292db[_0x42264f(0x1ef)](LTM_DP_STATUS,{'val':_0x42264f(0x1bd),'ack':!![]});if(_0x5292db[_0x42264f(0x1eb)]&&_0x4f520e)_0x4f520e[_0x42264f(0x1ec)](_0x5292db,_0x42264f(0x1e7),{'digest':_0x23a7f0});}catch(_0x1b84f8){_0x5292db[_0x42264f(0x21c)][_0x42264f(0x225)](_0x1b84f8[_0x42264f(0x216)]);}}async function runBaselineDriftAnalysis(_0x5adc53){const _0x3da57e=a0_0x2964b4;if(!_0x5adc53[_0x3da57e(0x1eb)]||!_0x5adc53[_0x3da57e(0x1d9)])return;if(!canCallApi())return;const _0x129cb8=_0x5adc53['config'][_0x3da57e(0x1de)]||0xe;if(_0x5adc53[_0x3da57e(0x210)][_0x3da57e(0x1c1)]<_0x129cb8+0x7){await _0x5adc53[_0x3da57e(0x1ef)](_0x3da57e(0x1d1),{'val':_0x3da57e(0x1fa),'ack':!![]});return;}const _0x249d10=_0x5adc53[_0x3da57e(0x210)][_0x3da57e(0x1fc)](-_0x129cb8),_0x408b7c=_0x5adc53['dailyDigests'][_0x3da57e(0x1fc)](0x0,_0x5adc53[_0x3da57e(0x210)]['length']-_0x129cb8),_0x50e93d=_0x3da57e(0x226)+JSON[_0x3da57e(0x206)](_0x408b7c)+_0x3da57e(0x229)+JSON[_0x3da57e(0x206)](_0x249d10);try{updateApiTimestamp();const _0x94c663=await _0x5adc53[_0x3da57e(0x1d9)][_0x3da57e(0x1e8)](_0x50e93d),_0x18e04e=JSON[_0x3da57e(0x1e9)](_0x94c663[_0x3da57e(0x1dd)][_0x3da57e(0x1bb)]()['replace'](/```json|```/g,'')['trim']());_0x18e04e[_0x3da57e(0x1f1)]&&(await _0x5adc53[_0x3da57e(0x1ef)](_0x3da57e(0x1d1),{'val':_0x18e04e[_0x3da57e(0x1f1)],'ack':!![]}),await _0x5adc53['setStateAsync'](_0x3da57e(0x20b),{'val':_0x18e04e[_0x3da57e(0x1d0)],'ack':!![]}),await _0x5adc53[_0x3da57e(0x1ef)](_0x3da57e(0x21e),{'val':Date[_0x3da57e(0x20d)](),'ack':!![]}));}catch(_0x747d12){}}async function executeAutomationAction(_0x21e156){const _0x51592c=a0_0x2964b4;try{const _0x1639b6=await _0x21e156[_0x51592c(0x1e1)]('analysis.automation.targetId'),_0x381e9b=await _0x21e156[_0x51592c(0x1e1)]('analysis.automation.targetValue');if(_0x1639b6&&_0x1639b6[_0x51592c(0x1cf)]&&_0x381e9b){const _0x2b5aa4=_0x1639b6['val'];let _0xbacaa0=_0x381e9b['val'];try{_0xbacaa0=JSON[_0x51592c(0x1e9)](_0xbacaa0);}catch(_0x52cbcc){}_0x21e156[_0x51592c(0x21c)]['info'](_0x51592c(0x222)+_0x2b5aa4+_0x51592c(0x211)+_0xbacaa0),await _0x21e156['setForeignStateAsync'](_0x2b5aa4,_0xbacaa0);}else _0x21e156[_0x51592c(0x21c)][_0x51592c(0x21a)](_0x51592c(0x22c));}catch(_0x1179b2){_0x21e156['log'][_0x51592c(0x225)](_0x51592c(0x218)+_0x1179b2[_0x51592c(0x216)]);}}async function sendMorningBriefing(_0x45f9a6){const _0x3e84b8=a0_0x2964b4;if(!_0x45f9a6[_0x3e84b8(0x1d9)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x1224b2=_0x3e84b8(0x200),_0x3f9b4d=await _0x45f9a6[_0x3e84b8(0x1d9)]['generateContent'](_0x1224b2),_0x1a3a32=_0x3f9b4d[_0x3e84b8(0x1dd)][_0x3e84b8(0x1bb)]();setup[_0x3e84b8(0x1d6)](_0x45f9a6,'üåÖ\x20Morning\x20Briefing:\x0a'+_0x1a3a32);}catch(_0x377f0d){_0x45f9a6[_0x3e84b8(0x21c)][_0x3e84b8(0x225)](_0x3e84b8(0x208)+_0x377f0d[_0x3e84b8(0x216)]);}}module[a0_0x2964b4(0x1db)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};