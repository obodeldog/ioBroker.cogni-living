const a0_0x1b9096=a0_0x4865;(function(_0x585040,_0x2e3a74){const _0x2d4f56=a0_0x4865,_0x1c1bea=_0x585040();while(!![]){try{const _0x418aba=parseInt(_0x2d4f56(0x14d))/0x1+parseInt(_0x2d4f56(0x164))/0x2+parseInt(_0x2d4f56(0x161))/0x3*(-parseInt(_0x2d4f56(0x1bb))/0x4)+parseInt(_0x2d4f56(0x162))/0x5*(parseInt(_0x2d4f56(0x18d))/0x6)+parseInt(_0x2d4f56(0x1ac))/0x7+-parseInt(_0x2d4f56(0x1bd))/0x8+-parseInt(_0x2d4f56(0x195))/0x9;if(_0x418aba===_0x2e3a74)break;else _0x1c1bea['push'](_0x1c1bea['shift']());}catch(_0x4cea81){_0x1c1bea['push'](_0x1c1bea['shift']());}}}(a0_0x4552,0xd8e39));const a0_0x15b713=(function(){let _0x5732ad=!![];return function(_0xfe2088,_0xc2ee96){const _0x5164d0=_0x5732ad?function(){if(_0xc2ee96){const _0x1ed5a0=_0xc2ee96['apply'](_0xfe2088,arguments);return _0xc2ee96=null,_0x1ed5a0;}}:function(){};return _0x5732ad=![],_0x5164d0;};}()),a0_0x368b21=a0_0x15b713(this,function(){const _0x2d4917=a0_0x4865;return a0_0x368b21['toString']()[_0x2d4917(0x16c)](_0x2d4917(0x1c0))['toString']()[_0x2d4917(0x1b6)](a0_0x368b21)[_0x2d4917(0x16c)](_0x2d4917(0x1c0));});a0_0x368b21();'use strict';const {GoogleGenerativeAI}=require(a0_0x1b9096(0x145)),setup=require(a0_0x1b9096(0x147)),GEMINI_MODEL=a0_0x1b9096(0x14e),LTM_DP_DAILY_DIGESTS=a0_0x1b9096(0x169),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG=a0_0x1b9096(0x182),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;function a0_0x4552(){const _0x3d752d=['1014144udFQwA','Briefing\x20Error:\x20','analysis.alertReason','ANALYZE_HEALTH','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','LTM.dailyDigests','.Current.IsNight','Gemini\x20Error:\x20','search','timestamp','reason','Unbekannt','approved','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','Sicherheit\x20geht\x20vor.','analysis.automation.targetValue','info','.forecast.current.temperature','parse','normal','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','eventHistory','analysis.automation.targetId','log','description','analysis.analysisHistory','push','pop','LTM.driftAnalysis.lastCheck','targetId','LTM.rawEventLog','ltmLtbWindowDays','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','Digest','livingContext','Started...',',\x20LichtverhÃ¤ltnisse:\x20','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','Wetterdaten\x20nicht\x20abrufbar','.\x20EVENTS:\x20','automationProposal','12648gaJKvI','isProVersion','system.presenceWho','\x0aSTB:\x20','slice','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','âš ï¸\x20ALARM:\x20','ltmStbWindowDays','12573648UoczAF','\x20Ã¼bersprungen\x20(Auto-Approved).','splice','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','Keine\x20Details.','getStateAsync','length','useWeather','aiPersona','val','summary','analysis.automation.patternDetected','error','generic','message','.\x20SYSTEM_MODE:\x20','setForeignStateAsync','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','exports','currentSystemMode','rawEventLog','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','126266wetQyq','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','Â°C,\x20','text','getForeignStateAsync','analysis.automation.autoApply','generateContent','\x20->\x20','analysis.isAlert','now','constructor','replace','%)\x20nach\x20\x22','toLocaleTimeString','LTM.driftAnalysis.baselineDrift','1112016eHzXUZ','alertReason','4709040FExGeh','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','.\x20KONTEXT:\x20','(((.+)+)+)+$','driftDetails','Traffic-Schutz\x20(Auto-Approved)','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.',',\x20Wetter:\x20','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','.forecast.current.state','setStateAsync','.Current.WeatherText','toISOString','KI\x20offline\x20(Fallback)','isAlert','debug','LTM.driftAnalysis.driftDetails','Tag','toFixed','weatherInstance','@google/generative-ai','response','./setup','analysis.automation.description','N/A\x20(Learning)','.\x20ANWESEND:\x20','isEmergency','decision','972193xLjFJW','models/gemini-flash-latest','Unbekannt\x20(Kein\x20Sensor)','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','send','analysisHistory','warn','ðŸŒ…\x20Morning\x20Briefing:\x0a','trim','dailyDigests','geminiModel','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','Skipped\x20(Traffic)','stringify','analysis.lastResult','unshift','KI-Fehler\x20(Fallback)','lastAlertState','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','.Current.Temperature','3sigsxX','3925ZPQlJj','config'];a0_0x4552=function(){return _0x3d752d;};return a0_0x4552();}const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x1b9096(0x184),'senior_aal':a0_0x1b9096(0x1ab),'family':'Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','single_comfort':a0_0x1b9096(0x1c3),'security':a0_0x1b9096(0x172),'energy_saver':a0_0x1b9096(0x1a6)};function canCallApi(){const _0x3c9a98=a0_0x1b9096,_0x557899=Date[_0x3c9a98(0x1b5)]();return _0x557899-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x3e2b80=a0_0x1b9096;lastGlobalApiCall=Date[_0x3e2b80(0x1b5)]();}async function getWeatherContext(_0x10bb52){const _0x5978e3=a0_0x1b9096;if(!_0x10bb52[_0x5978e3(0x163)][_0x5978e3(0x19c)]||!_0x10bb52['config'][_0x5978e3(0x144)])return _0x5978e3(0x14f);try{const _0x4fa7ec=_0x10bb52[_0x5978e3(0x163)][_0x5978e3(0x144)];let _0x233a09=await _0x10bb52['getForeignStateAsync'](_0x4fa7ec+_0x5978e3(0x160));if(!_0x233a09)_0x233a09=await _0x10bb52['getForeignStateAsync'](_0x4fa7ec+_0x5978e3(0x175));let _0x2c5369=await _0x10bb52[_0x5978e3(0x1b0)](_0x4fa7ec+_0x5978e3(0x1c8));if(!_0x2c5369)_0x2c5369=await _0x10bb52['getForeignStateAsync'](_0x4fa7ec+_0x5978e3(0x1c6));let _0x446d5e='Unbekannt';const _0x22e19e=await _0x10bb52[_0x5978e3(0x1b0)](_0x4fa7ec+_0x5978e3(0x16a));if(_0x22e19e)_0x446d5e=_0x22e19e['val']?'Nacht':_0x5978e3(0x142);if(_0x233a09&&_0x2c5369)return _0x233a09[_0x5978e3(0x19e)]+_0x5978e3(0x1ae)+_0x2c5369['val']+_0x5978e3(0x188)+_0x446d5e;}catch(_0x484273){}return _0x5978e3(0x18a);}async function consultButler(_0x5bc2f6,_0xb87dfc,_0x344cdf,_0x45bc5a){const _0x417e36=a0_0x1b9096;if(!_0x5bc2f6['geminiModel'])return{'approved':!![],'reason':_0x417e36(0x1ca)};const _0x34a60b=Date[_0x417e36(0x1b5)]();if(decisionCache[_0xb87dfc]&&_0x34a60b-decisionCache[_0xb87dfc][_0x417e36(0x16d)]<CACHE_TTL_MS){const _0x2e22ed=decisionCache[_0xb87dfc][_0x417e36(0x14c)];return _0x5bc2f6[_0x417e36(0x17b)][_0x417e36(0x1cc)](_0x417e36(0x198)+_0xb87dfc+_0x417e36(0x1b3)+(_0x2e22ed[_0x417e36(0x170)]?'OK':'NO')+'\x20('+_0x2e22ed[_0x417e36(0x16e)]+')'),_0x2e22ed;}if(!canCallApi())return _0x5bc2f6[_0x417e36(0x17b)][_0x417e36(0x1cc)](_0x417e36(0x171)+_0xb87dfc+_0x417e36(0x196)),{'approved':!![],'reason':_0x417e36(0x1c2)};const _0x5225dd=new Date()[_0x417e36(0x1b9)](),_0x209119=await getWeatherContext(_0x5bc2f6),_0x5c8adf=PERSONA_MAPPING[_0x5bc2f6[_0x417e36(0x163)][_0x417e36(0x19d)]||_0x417e36(0x1a2)],_0x48d061=_0x417e36(0x150)+_0x5225dd+_0x417e36(0x1c4)+_0x209119+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x45bc5a*0x64)[_0x417e36(0x143)](0x0)+_0x417e36(0x1b8)+_0xb87dfc+_0x417e36(0x1c5)+_0x344cdf+_0x417e36(0x189)+_0x5c8adf+_0x417e36(0x1a7);try{updateApiTimestamp();const _0x22e461=await _0x5bc2f6[_0x417e36(0x157)]['generateContent'](_0x48d061),_0x4dc6b1=_0x22e461[_0x417e36(0x146)][_0x417e36(0x1af)]()[_0x417e36(0x1b7)](/```json|```/g,'')[_0x417e36(0x155)](),_0x375083=JSON[_0x417e36(0x176)](_0x4dc6b1);return decisionCache[_0xb87dfc]={'decision':_0x375083,'timestamp':_0x34a60b},_0x375083;}catch(_0x4d860a){return _0x5bc2f6[_0x417e36(0x17b)][_0x417e36(0x153)](_0x417e36(0x15f)+_0x4d860a[_0x417e36(0x1a3)]),decisionCache[_0xb87dfc]={'decision':{'approved':!![],'reason':_0x417e36(0x15d)},'timestamp':_0x34a60b-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x417e36(0x15d)};}}async function runGeminiAnalysis(_0x2940b2,_0x18b3c3=''){const _0x1f7fd9=a0_0x1b9096;if(!_0x2940b2['geminiModel'])return;if(!canCallApi()){_0x2940b2[_0x1f7fd9(0x17b)][_0x1f7fd9(0x1cc)](_0x1f7fd9(0x1be));return;}if(_0x2940b2[_0x1f7fd9(0x179)][_0x1f7fd9(0x19b)]===0x0)return;const _0x2a3588=_0x2940b2[_0x1f7fd9(0x179)][_0x1f7fd9(0x191)](0x0,0xf),_0x27c193=_0x2940b2[_0x1f7fd9(0x1a9)],_0x580cdf=PERSONA_MAPPING[_0x2940b2['config'][_0x1f7fd9(0x19d)]||_0x1f7fd9(0x1a2)],_0x52eee8=_0x2940b2['config'][_0x1f7fd9(0x186)]||_0x1f7fd9(0x199);let _0x3441dc=_0x1f7fd9(0x16f);try{const _0x5bb4c9=await _0x2940b2['getStateAsync'](_0x1f7fd9(0x18f));if(_0x5bb4c9&&_0x5bb4c9[_0x1f7fd9(0x19e)])_0x3441dc=_0x5bb4c9['val'];}catch(_0x1e6ecf){}let _0x281c59=![];try{const _0x419628=await _0x2940b2[_0x1f7fd9(0x19a)](_0x1f7fd9(0x1b1));if(_0x419628&&_0x419628[_0x1f7fd9(0x19e)])_0x281c59=!![];}catch(_0x1310b7){}const _0x4b6640=_0x1f7fd9(0x178)+_0x580cdf+_0x1f7fd9(0x1bf)+_0x52eee8+_0x1f7fd9(0x1a4)+_0x27c193+_0x1f7fd9(0x14a)+_0x3441dc+_0x1f7fd9(0x18b)+JSON[_0x1f7fd9(0x15a)](_0x2a3588)+'.\x20EMERGENCY:\x20'+_0x18b3c3+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x515f28=await _0x2940b2[_0x1f7fd9(0x157)]['generateContent'](_0x4b6640),_0x43f438=JSON[_0x1f7fd9(0x176)](_0x515f28[_0x1f7fd9(0x146)][_0x1f7fd9(0x1af)]()[_0x1f7fd9(0x1b7)](/```json|```/g,'')[_0x1f7fd9(0x155)]());await _0x2940b2[_0x1f7fd9(0x1c7)](_0x1f7fd9(0x15b),{'val':JSON[_0x1f7fd9(0x15a)](_0x43f438),'ack':!![]});if(_0x43f438['summary'])await _0x2940b2[_0x1f7fd9(0x1c7)]('analysis.activitySummary',{'val':_0x43f438[_0x1f7fd9(0x19f)],'ack':!![]});const _0x566266={'timestamp':Date[_0x1f7fd9(0x1b5)](),'id':Date[_0x1f7fd9(0x1b5)]()['toString'](),'analysis':{'activity':{'summary':_0x43f438[_0x1f7fd9(0x19f)],'isAlert':_0x43f438[_0x1f7fd9(0x1cb)],'alertReason':_0x43f438[_0x1f7fd9(0x1bc)]},'comfort':{'automationProposal':_0x43f438[_0x1f7fd9(0x18c)]}}};_0x2940b2[_0x1f7fd9(0x152)][_0x1f7fd9(0x15c)](_0x566266);if(_0x2940b2[_0x1f7fd9(0x152)][_0x1f7fd9(0x19b)]>0x32)_0x2940b2[_0x1f7fd9(0x152)][_0x1f7fd9(0x17f)]();await _0x2940b2[_0x1f7fd9(0x1c7)](_0x1f7fd9(0x17d),{'val':JSON['stringify'](_0x2940b2[_0x1f7fd9(0x152)]),'ack':!![]});const _0x442a6d=_0x43f438[_0x1f7fd9(0x1cb)]||![];_0x442a6d!==_0x2940b2[_0x1f7fd9(0x15e)]&&(await _0x2940b2['setStateAsync'](_0x1f7fd9(0x1b4),{'val':_0x442a6d,'ack':!![]}),_0x2940b2[_0x1f7fd9(0x15e)]=_0x442a6d,_0x442a6d&&(await _0x2940b2[_0x1f7fd9(0x1c7)](_0x1f7fd9(0x166),{'val':_0x43f438[_0x1f7fd9(0x1bc)],'ack':!![]}),setup['sendNotification'](_0x2940b2,_0x1f7fd9(0x193)+_0x43f438[_0x1f7fd9(0x1bc)],![],_0x43f438[_0x1f7fd9(0x14b)])));if(_0x43f438[_0x1f7fd9(0x18c)]&&_0x43f438[_0x1f7fd9(0x18c)]['detected']){await _0x2940b2[_0x1f7fd9(0x1c7)](_0x1f7fd9(0x1a0),{'val':!![],'ack':!![]}),await _0x2940b2[_0x1f7fd9(0x1c7)](_0x1f7fd9(0x148),{'val':_0x43f438[_0x1f7fd9(0x18c)][_0x1f7fd9(0x17c)],'ack':!![]}),await _0x2940b2[_0x1f7fd9(0x1c7)](_0x1f7fd9(0x17a),{'val':_0x43f438[_0x1f7fd9(0x18c)][_0x1f7fd9(0x181)],'ack':!![]}),await _0x2940b2[_0x1f7fd9(0x1c7)](_0x1f7fd9(0x173),{'val':JSON[_0x1f7fd9(0x15a)](_0x43f438[_0x1f7fd9(0x18c)]['targetValue']),'ack':!![]});if(_0x281c59)executeAutomationAction(_0x2940b2);}}catch(_0x2d4e65){_0x2940b2[_0x1f7fd9(0x17b)][_0x1f7fd9(0x1a1)](_0x1f7fd9(0x16b)+_0x2d4e65[_0x1f7fd9(0x1a3)]);}}function a0_0x4865(_0x3cf414,_0x1b7c0a){const _0x5b5ef7=a0_0x4552();return a0_0x4865=function(_0x368b21,_0x15b713){_0x368b21=_0x368b21-0x142;let _0x45529a=_0x5b5ef7[_0x368b21];return _0x45529a;},a0_0x4865(_0x3cf414,_0x1b7c0a);}async function createDailyDigest(_0x1a10e7,_0x4771d5){const _0x283eae=a0_0x1b9096;if(!_0x1a10e7[_0x283eae(0x18e)])return;if(!canCallApi()){await _0x1a10e7[_0x283eae(0x1c7)](LTM_DP_STATUS,{'val':_0x283eae(0x159),'ack':!![]});return;}await _0x1a10e7[_0x283eae(0x1c7)](LTM_DP_STATUS,{'val':_0x283eae(0x187),'ack':!![]});if(!_0x1a10e7[_0x283eae(0x157)]||_0x1a10e7[_0x283eae(0x1aa)][_0x283eae(0x19b)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x1a10e7[_0x283eae(0x1c7)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x2f079b=JSON['parse'](JSON[_0x283eae(0x15a)](_0x1a10e7[_0x283eae(0x1aa)])),_0x341dd4=_0x2f079b['length'],_0x29211e=_0x283eae(0x168)+JSON[_0x283eae(0x15a)](_0x2f079b);try{updateApiTimestamp();const _0x3c23b9=await _0x1a10e7[_0x283eae(0x157)][_0x283eae(0x1b2)](_0x29211e),_0x24c25d=JSON['parse'](_0x3c23b9[_0x283eae(0x146)]['text']()['replace'](/```json|```/g,'')['trim']()),_0x2a6c6f={'timestamp':new Date()[_0x283eae(0x1c9)](),'eventCount':_0x341dd4,'summary':_0x24c25d[_0x283eae(0x19f)]||_0x283eae(0x185),'activityLevel':_0x24c25d['activityLevel']||_0x283eae(0x177),'systemMode':_0x1a10e7['currentSystemMode']};_0x1a10e7[_0x283eae(0x156)][_0x283eae(0x17e)](_0x2a6c6f);const _0x50e68c=_0x1a10e7[_0x283eae(0x163)][_0x283eae(0x183)]||0x3c;_0x1a10e7[_0x283eae(0x156)]['length']>_0x50e68c&&_0x1a10e7[_0x283eae(0x156)][_0x283eae(0x197)](0x0,_0x1a10e7[_0x283eae(0x156)]['length']-_0x50e68c);await _0x1a10e7[_0x283eae(0x1c7)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x283eae(0x15a)](_0x1a10e7['dailyDigests']),'ack':!![]}),_0x1a10e7[_0x283eae(0x1aa)]=[],await _0x1a10e7[_0x283eae(0x1c7)](LTM_DP_RAW_LOG,{'val':JSON[_0x283eae(0x15a)](_0x1a10e7[_0x283eae(0x1aa)]),'ack':!![]}),await _0x1a10e7['setStateAsync'](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x1a10e7[_0x283eae(0x18e)]&&_0x4771d5)_0x4771d5[_0x283eae(0x151)](_0x1a10e7,_0x283eae(0x167),{'digest':_0x2a6c6f});}catch(_0x191ddb){_0x1a10e7['log'][_0x283eae(0x1a1)](_0x191ddb[_0x283eae(0x1a3)]);}}async function runBaselineDriftAnalysis(_0x4ccdba){const _0x36f34a=a0_0x1b9096;if(!_0x4ccdba[_0x36f34a(0x18e)]||!_0x4ccdba[_0x36f34a(0x157)])return;if(!canCallApi())return;const _0x16353f=_0x4ccdba[_0x36f34a(0x163)][_0x36f34a(0x194)]||0xe;if(_0x4ccdba[_0x36f34a(0x156)][_0x36f34a(0x19b)]<_0x16353f+0x7){await _0x4ccdba[_0x36f34a(0x1c7)]('LTM.driftAnalysis.baselineDrift',{'val':_0x36f34a(0x149),'ack':!![]});return;}const _0x2b3b6=_0x4ccdba[_0x36f34a(0x156)][_0x36f34a(0x191)](-_0x16353f),_0x2eed47=_0x4ccdba['dailyDigests'][_0x36f34a(0x191)](0x0,_0x4ccdba[_0x36f34a(0x156)][_0x36f34a(0x19b)]-_0x16353f),_0x463597='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON['stringify'](_0x2eed47)+_0x36f34a(0x190)+JSON[_0x36f34a(0x15a)](_0x2b3b6);try{updateApiTimestamp();const _0x145936=await _0x4ccdba[_0x36f34a(0x157)][_0x36f34a(0x1b2)](_0x463597),_0x37b80e=JSON['parse'](_0x145936[_0x36f34a(0x146)]['text']()[_0x36f34a(0x1b7)](/```json|```/g,'')[_0x36f34a(0x155)]());_0x37b80e['baselineDrift']&&(await _0x4ccdba[_0x36f34a(0x1c7)](_0x36f34a(0x1ba),{'val':_0x37b80e['baselineDrift'],'ack':!![]}),await _0x4ccdba[_0x36f34a(0x1c7)](_0x36f34a(0x1cd),{'val':_0x37b80e[_0x36f34a(0x1c1)],'ack':!![]}),await _0x4ccdba[_0x36f34a(0x1c7)](_0x36f34a(0x180),{'val':Date[_0x36f34a(0x1b5)](),'ack':!![]}));}catch(_0x23710c){}}async function executeAutomationAction(_0x26c1f6){const _0x571b97=a0_0x1b9096;try{const _0x2fe16c=await _0x26c1f6['getStateAsync'](_0x571b97(0x17a)),_0x9df28a=await _0x26c1f6[_0x571b97(0x19a)](_0x571b97(0x173));if(_0x2fe16c&&_0x2fe16c[_0x571b97(0x19e)]&&_0x9df28a){const _0x40995d=_0x2fe16c[_0x571b97(0x19e)];let _0x1ee7de=_0x9df28a[_0x571b97(0x19e)];try{_0x1ee7de=JSON[_0x571b97(0x176)](_0x1ee7de);}catch(_0x3e8b96){}_0x26c1f6[_0x571b97(0x17b)][_0x571b97(0x174)](_0x571b97(0x158)+_0x40995d+'\x20=\x20'+_0x1ee7de),await _0x26c1f6[_0x571b97(0x1a5)](_0x40995d,_0x1ee7de);}else _0x26c1f6[_0x571b97(0x17b)][_0x571b97(0x153)](_0x571b97(0x1ad));}catch(_0xf106){_0x26c1f6[_0x571b97(0x17b)][_0x571b97(0x1a1)]('BUTLER\x20Execution\x20Error:\x20'+_0xf106['message']);}}async function sendMorningBriefing(_0x49fa30){const _0xe90c13=a0_0x1b9096;if(!_0x49fa30['geminiModel'])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x181399=_0xe90c13(0x192),_0x348cd8=await _0x49fa30['geminiModel'][_0xe90c13(0x1b2)](_0x181399),_0x6d7562=_0x348cd8[_0xe90c13(0x146)]['text']();setup['sendNotification'](_0x49fa30,_0xe90c13(0x154)+_0x6d7562);}catch(_0x130e9a){_0x49fa30[_0xe90c13(0x17b)][_0xe90c13(0x1a1)](_0xe90c13(0x165)+_0x130e9a[_0xe90c13(0x1a3)]);}}module[a0_0x1b9096(0x1a8)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};