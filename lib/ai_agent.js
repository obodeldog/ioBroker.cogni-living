const a0_0x2a0906=a0_0x95d2;(function(_0x51e4c1,_0x402402){const _0x565bce=a0_0x95d2,_0x4feb30=_0x51e4c1();while(!![]){try{const _0x30854d=-parseInt(_0x565bce(0xaf))/0x1*(parseInt(_0x565bce(0xda))/0x2)+-parseInt(_0x565bce(0x8c))/0x3+-parseInt(_0x565bce(0x106))/0x4+-parseInt(_0x565bce(0xb2))/0x5+-parseInt(_0x565bce(0xa4))/0x6+-parseInt(_0x565bce(0x9b))/0x7*(parseInt(_0x565bce(0xb8))/0x8)+parseInt(_0x565bce(0x8e))/0x9*(parseInt(_0x565bce(0xae))/0xa);if(_0x30854d===_0x402402)break;else _0x4feb30['push'](_0x4feb30['shift']());}catch(_0x55efba){_0x4feb30['push'](_0x4feb30['shift']());}}}(a0_0x23ae,0x76d12));const a0_0x2d86c8=(function(){let _0xdaff31=!![];return function(_0x4b87d8,_0x3f320e){const _0x3e6582=_0xdaff31?function(){const _0x18465a=a0_0x95d2;if(_0x3f320e){const _0xaa775b=_0x3f320e[_0x18465a(0x104)](_0x4b87d8,arguments);return _0x3f320e=null,_0xaa775b;}}:function(){};return _0xdaff31=![],_0x3e6582;};}()),a0_0x2121cb=a0_0x2d86c8(this,function(){const _0x34c872=a0_0x95d2;return a0_0x2121cb[_0x34c872(0xbb)]()[_0x34c872(0x10c)](_0x34c872(0xd7))[_0x34c872(0xbb)]()[_0x34c872(0xf2)](a0_0x2121cb)[_0x34c872(0x10c)]('(((.+)+)+)+$');});a0_0x2121cb();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require(a0_0x2a0906(0x110)),GEMINI_MODEL=a0_0x2a0906(0xba),LTM_DP_DAILY_DIGESTS=a0_0x2a0906(0xfa),LTM_DP_STATUS=a0_0x2a0906(0x9e),LTM_DP_RAW_LOG=a0_0x2a0906(0xe5),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;function a0_0x95d2(_0xf09b0,_0x41be45){const _0x5bad0b=a0_0x23ae();return a0_0x95d2=function(_0x2121cb,_0x2d86c8){_0x2121cb=_0x2121cb-0x8a;let _0x23ae11=_0x5bad0b[_0x2121cb];return _0x23ae11;},a0_0x95d2(_0xf09b0,_0x41be45);}const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x2a0906(0xf1),'senior_aal':a0_0x2a0906(0xbf),'family':a0_0x2a0906(0x9a),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':a0_0x2a0906(0xb1),'energy_saver':a0_0x2a0906(0xad)};function canCallApi(){const _0x4f431d=a0_0x2a0906,_0x2e510e=Date[_0x4f431d(0xb7)]();return _0x2e510e-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x288141=a0_0x2a0906;lastGlobalApiCall=Date[_0x288141(0xb7)]();}async function getWeatherContext(_0x269527){const _0x14a2ed=a0_0x2a0906;if(!_0x269527['config']['useWeather']||!_0x269527[_0x14a2ed(0xd4)]['weatherInstance'])return _0x14a2ed(0xff);try{const _0x38ac0f=_0x269527[_0x14a2ed(0xd4)][_0x14a2ed(0xbc)];let _0xcbe1a8=await _0x269527['getForeignStateAsync'](_0x38ac0f+_0x14a2ed(0xc1));if(!_0xcbe1a8)_0xcbe1a8=await _0x269527[_0x14a2ed(0xe1)](_0x38ac0f+'.forecast.current.temperature');let _0x2be58a=await _0x269527[_0x14a2ed(0xe1)](_0x38ac0f+_0x14a2ed(0xdd));if(!_0x2be58a)_0x2be58a=await _0x269527['getForeignStateAsync'](_0x38ac0f+_0x14a2ed(0xa5));let _0x1bbe72=_0x14a2ed(0xfb);const _0x49ad8b=await _0x269527[_0x14a2ed(0xe1)](_0x38ac0f+'.Current.IsNight');if(_0x49ad8b)_0x1bbe72=_0x49ad8b[_0x14a2ed(0xb6)]?'Nacht':_0x14a2ed(0x92);if(_0xcbe1a8&&_0x2be58a)return _0xcbe1a8[_0x14a2ed(0xb6)]+'¬∞C,\x20'+_0x2be58a[_0x14a2ed(0xb6)]+_0x14a2ed(0x111)+_0x1bbe72;}catch(_0x38a905){}return _0x14a2ed(0xa2);}async function consultButler(_0x5d94c9,_0x462ab8,_0xafbffc,_0x47691a){const _0x4adf44=a0_0x2a0906;if(!_0x5d94c9[_0x4adf44(0xe0)])return{'approved':!![],'reason':_0x4adf44(0xfc)};const _0x477f78=Date['now']();if(decisionCache[_0x462ab8]&&_0x477f78-decisionCache[_0x462ab8]['timestamp']<CACHE_TTL_MS){const _0x583920=decisionCache[_0x462ab8]['decision'];return _0x5d94c9[_0x4adf44(0xf3)][_0x4adf44(0xcd)](_0x4adf44(0x9d)+_0x462ab8+'\x20->\x20'+(_0x583920['approved']?'OK':'NO')+'\x20('+_0x583920[_0x4adf44(0xb0)]+')'),_0x583920;}if(!canCallApi())return _0x5d94c9[_0x4adf44(0xf3)]['debug'](_0x4adf44(0xc6)+_0x462ab8+_0x4adf44(0xf0)),{'approved':!![],'reason':_0x4adf44(0xc9)};const _0x16e11c=new Date()[_0x4adf44(0x98)](),_0x87a6ba=await getWeatherContext(_0x5d94c9),_0x1bd604=PERSONA_MAPPING[_0x5d94c9[_0x4adf44(0xd4)][_0x4adf44(0xf8)]||_0x4adf44(0xf7)],_0x28dc87=_0x4adf44(0xd1)+_0x16e11c+_0x4adf44(0x96)+_0x87a6ba+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x47691a*0x64)[_0x4adf44(0xee)](0x0)+'%)\x20nach\x20\x22'+_0x462ab8+_0x4adf44(0xde)+_0xafbffc+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x1bd604+_0x4adf44(0x102);try{updateApiTimestamp();const _0x259f98=await _0x5d94c9[_0x4adf44(0xe0)][_0x4adf44(0xe7)](_0x28dc87),_0x4a395d=_0x259f98[_0x4adf44(0xc7)]['text']()[_0x4adf44(0xa0)](/```json|```/g,'')[_0x4adf44(0x95)](),_0x1dae78=JSON[_0x4adf44(0xcf)](_0x4a395d);return decisionCache[_0x462ab8]={'decision':_0x1dae78,'timestamp':_0x477f78},_0x1dae78;}catch(_0x36a5de){return _0x5d94c9[_0x4adf44(0xf3)][_0x4adf44(0x8d)](_0x4adf44(0xca)+_0x36a5de[_0x4adf44(0x93)]),decisionCache[_0x462ab8]={'decision':{'approved':!![],'reason':_0x4adf44(0x10a)},'timestamp':_0x477f78-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x4adf44(0x10a)};}}function a0_0x23ae(){const _0x4d45dd=['Gemini\x20Error:\x20','config','Briefing\x20Error:\x20',').\x20Sending\x20notification...','(((.+)+)+)+$','Keine\x20Details.','analysis.automation.targetValue','1391004Hcpokb','slice','ANALYZE_HEALTH','.Current.WeatherText','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','detected','geminiModel','getForeignStateAsync','Success','analysis.automation.autoApply','analysis.isAlert','LTM.rawEventLog','dailyDigests','generateContent','setForeignStateAsync','targetValue','.\x20ANWESEND:\x20','analysis.automation.patternDetected','\x0aSTB:\x20','üåÖ\x20Morning\x20Briefing:\x0a','toFixed','isEmergency','\x20√ºbersprungen\x20(Auto-Approved).','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','constructor','log','info','\x0aAktivit√§t:\x20','BUTLER\x20Execution\x20Error:\x20','generic','aiPersona','stringify','LTM.dailyDigests','Unbekannt','KI\x20offline\x20(Fallback)','analysis.activitySummary','getStateAsync','Unbekannt\x20(Kein\x20Sensor)','description','activityLevel','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','Skipped\x20(No\x20AI\x20or\x20Data)','apply','rawEventLog','2794016BATUgA','normal','pop','driftDetails','KI-Fehler\x20(Fallback)','üåÖ\x20Briefing\x20generated\x20(Length:\x20','search','baselineDrift','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','./setup',',\x20Lichtverh√§ltnisse:\x20','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','.\x20KONTEXT:\x20','analysisHistory','analysis.alertReason','2026704oadOUZ','warn','279wAiEyV','length','unshift','error','Tag','message','Started...','trim',',\x20Wetter:\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','toLocaleTimeString','ltmStbWindowDays','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','161959ltmwZQ','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','LTM.processingStatus','.\x20EVENTS:\x20','replace','LTM.driftAnalysis.lastCheck','Wetterdaten\x20nicht\x20abrufbar','send','5784798ajJtCb','.forecast.current.state','automationProposal','push','text','.\x20SYSTEM_MODE:\x20','setStateAsync','üìÖ\x20Daily\x20Digest:\x0a','toISOString','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','1532390LGGWvg','1hdAxjY','reason','Sicherheit\x20geht\x20vor.','3142330eLjkLx','analysis.automation.targetId','üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','sendNotification','val','now','208NHEzOK','currentSystemMode','models/gemini-flash-latest','toString','weatherInstance','isAlert','LTM.driftAnalysis.baselineDrift','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','splice','.Current.Temperature','N/A\x20(Learning)','alertReason','eventHistory','system.presenceWho','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','response','Skipped\x20(Traffic)','Traffic-Schutz\x20(Auto-Approved)','ü§ñ\x20Butler\x20Brain\x20Error:\x20','Digest','lastAlertState','debug','analysis.analysisHistory','parse','summary','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','isProVersion'];a0_0x23ae=function(){return _0x4d45dd;};return a0_0x23ae();}async function runGeminiAnalysis(_0x21bbf5,_0x42a70e=''){const _0x45d265=a0_0x2a0906;if(!_0x21bbf5[_0x45d265(0xe0)])return;if(!canCallApi()){_0x21bbf5[_0x45d265(0xf3)][_0x45d265(0xcd)]('ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x21bbf5[_0x45d265(0xc4)][_0x45d265(0x8f)]===0x0)return;const _0x4c847d=_0x21bbf5['eventHistory']['slice'](0x0,0xf),_0x5ebf24=_0x21bbf5[_0x45d265(0xb9)],_0x25e9d7=PERSONA_MAPPING[_0x21bbf5[_0x45d265(0xd4)][_0x45d265(0xf8)]||_0x45d265(0xf7)],_0x3d2638=_0x21bbf5[_0x45d265(0xd4)]['livingContext']||_0x45d265(0xd8);let _0x2ec0ea=_0x45d265(0xfb);try{const _0x3d8ab8=await _0x21bbf5[_0x45d265(0xfe)](_0x45d265(0xc5));if(_0x3d8ab8&&_0x3d8ab8[_0x45d265(0xb6)])_0x2ec0ea=_0x3d8ab8[_0x45d265(0xb6)];}catch(_0x245256){}let _0x896651=![];try{const _0x20b100=await _0x21bbf5['getStateAsync'](_0x45d265(0xe3));if(_0x20b100&&_0x20b100[_0x45d265(0xb6)])_0x896651=!![];}catch(_0x102eb9){}const _0x436cd=_0x45d265(0x97)+_0x25e9d7+_0x45d265(0x113)+_0x3d2638+_0x45d265(0xa9)+_0x5ebf24+_0x45d265(0xea)+_0x2ec0ea+_0x45d265(0x9f)+JSON[_0x45d265(0xf9)](_0x4c847d)+'.\x20EMERGENCY:\x20'+_0x42a70e+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x2b9882=await _0x21bbf5[_0x45d265(0xe0)]['generateContent'](_0x436cd),_0x57c958=JSON[_0x45d265(0xcf)](_0x2b9882[_0x45d265(0xc7)][_0x45d265(0xa8)]()[_0x45d265(0xa0)](/```json|```/g,'')[_0x45d265(0x95)]());await _0x21bbf5['setStateAsync']('analysis.lastResult',{'val':JSON[_0x45d265(0xf9)](_0x57c958),'ack':!![]});if(_0x57c958['summary'])await _0x21bbf5[_0x45d265(0xaa)](_0x45d265(0xfd),{'val':_0x57c958[_0x45d265(0xd0)],'ack':!![]});const _0x3e6821={'timestamp':Date[_0x45d265(0xb7)](),'id':Date[_0x45d265(0xb7)]()['toString'](),'analysis':{'activity':{'summary':_0x57c958[_0x45d265(0xd0)],'isAlert':_0x57c958[_0x45d265(0xbd)],'alertReason':_0x57c958[_0x45d265(0xc3)]},'comfort':{'automationProposal':_0x57c958['automationProposal']}}};_0x21bbf5['analysisHistory'][_0x45d265(0x90)](_0x3e6821);if(_0x21bbf5[_0x45d265(0x8a)][_0x45d265(0x8f)]>0x32)_0x21bbf5[_0x45d265(0x8a)][_0x45d265(0x108)]();await _0x21bbf5['setStateAsync'](_0x45d265(0xce),{'val':JSON[_0x45d265(0xf9)](_0x21bbf5[_0x45d265(0x8a)]),'ack':!![]});const _0x1ccb61=_0x57c958['isAlert']||![];_0x1ccb61!==_0x21bbf5[_0x45d265(0xcc)]&&(await _0x21bbf5[_0x45d265(0xaa)](_0x45d265(0xe4),{'val':_0x1ccb61,'ack':!![]}),_0x21bbf5[_0x45d265(0xcc)]=_0x1ccb61,_0x1ccb61&&(await _0x21bbf5[_0x45d265(0xaa)](_0x45d265(0x8b),{'val':_0x57c958[_0x45d265(0xc3)],'ack':!![]}),setup[_0x45d265(0xb5)](_0x21bbf5,'‚ö†Ô∏è\x20ALARM:\x20'+_0x57c958[_0x45d265(0xc3)],![],_0x57c958[_0x45d265(0xef)])));if(_0x57c958['automationProposal']&&_0x57c958[_0x45d265(0xa6)][_0x45d265(0xdf)]){await _0x21bbf5[_0x45d265(0xaa)](_0x45d265(0xeb),{'val':!![],'ack':!![]}),await _0x21bbf5['setStateAsync']('analysis.automation.description',{'val':_0x57c958[_0x45d265(0xa6)][_0x45d265(0x100)],'ack':!![]}),await _0x21bbf5['setStateAsync'](_0x45d265(0xb3),{'val':_0x57c958[_0x45d265(0xa6)]['targetId'],'ack':!![]}),await _0x21bbf5[_0x45d265(0xaa)](_0x45d265(0xd9),{'val':JSON[_0x45d265(0xf9)](_0x57c958[_0x45d265(0xa6)][_0x45d265(0xe9)]),'ack':!![]});if(_0x896651)executeAutomationAction(_0x21bbf5);}}catch(_0xeca715){_0x21bbf5['log'][_0x45d265(0x91)](_0x45d265(0xd3)+_0xeca715[_0x45d265(0x93)]);}}async function createDailyDigest(_0x183b57,_0x1d6647){const _0x44503c=a0_0x2a0906;if(!_0x183b57[_0x44503c(0xd2)])return;if(!canCallApi()){await _0x183b57[_0x44503c(0xaa)](LTM_DP_STATUS,{'val':_0x44503c(0xc8),'ack':!![]});return;}await _0x183b57['setStateAsync'](LTM_DP_STATUS,{'val':_0x44503c(0x94),'ack':!![]});if(!_0x183b57[_0x44503c(0xe0)]||_0x183b57[_0x44503c(0x105)][_0x44503c(0x8f)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x183b57['setStateAsync'](LTM_DP_STATUS,{'val':_0x44503c(0x103),'ack':!![]});return;}const _0x3337e0=JSON[_0x44503c(0xcf)](JSON['stringify'](_0x183b57[_0x44503c(0x105)])),_0x47d1c2=_0x3337e0[_0x44503c(0x8f)],_0x17855a=_0x44503c(0x10f)+JSON['stringify'](_0x3337e0);try{updateApiTimestamp();const _0x1dab08=await _0x183b57[_0x44503c(0xe0)][_0x44503c(0xe7)](_0x17855a),_0x126792=JSON[_0x44503c(0xcf)](_0x1dab08['response']['text']()[_0x44503c(0xa0)](/```json|```/g,'')[_0x44503c(0x95)]()),_0x3bcdda={'timestamp':new Date()[_0x44503c(0xac)](),'eventCount':_0x47d1c2,'summary':_0x126792[_0x44503c(0xd0)]||_0x44503c(0xcb),'activityLevel':_0x126792['activityLevel']||_0x44503c(0x107),'systemMode':_0x183b57[_0x44503c(0xb9)]};_0x183b57['dailyDigests'][_0x44503c(0xa7)](_0x3bcdda);const _0xfd7293=_0x183b57['config']['ltmLtbWindowDays']||0x3c;_0x183b57[_0x44503c(0xe6)][_0x44503c(0x8f)]>_0xfd7293&&_0x183b57[_0x44503c(0xe6)][_0x44503c(0xc0)](0x0,_0x183b57[_0x44503c(0xe6)][_0x44503c(0x8f)]-_0xfd7293);await _0x183b57['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x44503c(0xf9)](_0x183b57[_0x44503c(0xe6)]),'ack':!![]}),_0x183b57[_0x44503c(0x105)]=[],await _0x183b57[_0x44503c(0xaa)](LTM_DP_RAW_LOG,{'val':JSON[_0x44503c(0xf9)](_0x183b57[_0x44503c(0x105)]),'ack':!![]}),await _0x183b57[_0x44503c(0xaa)](LTM_DP_STATUS,{'val':_0x44503c(0xe2),'ack':!![]});const _0x45b1df=_0x44503c(0xab)+_0x126792[_0x44503c(0xd0)]+_0x44503c(0xf5)+_0x126792[_0x44503c(0x101)];setup['sendNotification'](_0x183b57,_0x45b1df,![],![]);if(_0x183b57['isProVersion']&&_0x1d6647)_0x1d6647[_0x44503c(0xa3)](_0x183b57,_0x44503c(0xdc),{'digest':_0x3bcdda});}catch(_0x127f90){_0x183b57['log'][_0x44503c(0x91)](_0x127f90[_0x44503c(0x93)]);}}async function runBaselineDriftAnalysis(_0x24bd32){const _0x1f3eb3=a0_0x2a0906;if(!_0x24bd32[_0x1f3eb3(0xd2)]||!_0x24bd32[_0x1f3eb3(0xe0)])return;if(!canCallApi())return;const _0x45cd52=_0x24bd32[_0x1f3eb3(0xd4)][_0x1f3eb3(0x99)]||0xe;if(_0x24bd32['dailyDigests'][_0x1f3eb3(0x8f)]<_0x45cd52+0x7){await _0x24bd32[_0x1f3eb3(0xaa)](_0x1f3eb3(0xbe),{'val':_0x1f3eb3(0xc2),'ack':!![]});return;}const _0x3a6be2=_0x24bd32[_0x1f3eb3(0xe6)][_0x1f3eb3(0xdb)](-_0x45cd52),_0x3e37d8=_0x24bd32[_0x1f3eb3(0xe6)][_0x1f3eb3(0xdb)](0x0,_0x24bd32[_0x1f3eb3(0xe6)][_0x1f3eb3(0x8f)]-_0x45cd52),_0x5c9027='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x1f3eb3(0xf9)](_0x3e37d8)+_0x1f3eb3(0xec)+JSON[_0x1f3eb3(0xf9)](_0x3a6be2);try{updateApiTimestamp();const _0x5aa176=await _0x24bd32[_0x1f3eb3(0xe0)][_0x1f3eb3(0xe7)](_0x5c9027),_0x47c4bf=JSON[_0x1f3eb3(0xcf)](_0x5aa176[_0x1f3eb3(0xc7)][_0x1f3eb3(0xa8)]()[_0x1f3eb3(0xa0)](/```json|```/g,'')['trim']());_0x47c4bf[_0x1f3eb3(0x10d)]&&(await _0x24bd32[_0x1f3eb3(0xaa)]('LTM.driftAnalysis.baselineDrift',{'val':_0x47c4bf['baselineDrift'],'ack':!![]}),await _0x24bd32[_0x1f3eb3(0xaa)]('LTM.driftAnalysis.driftDetails',{'val':_0x47c4bf[_0x1f3eb3(0x109)],'ack':!![]}),await _0x24bd32['setStateAsync'](_0x1f3eb3(0xa1),{'val':Date[_0x1f3eb3(0xb7)](),'ack':!![]}));}catch(_0x3addcc){}}async function executeAutomationAction(_0xab69e7){const _0x1a7b3e=a0_0x2a0906;try{const _0x5d2277=await _0xab69e7['getStateAsync'](_0x1a7b3e(0xb3)),_0x1909c3=await _0xab69e7['getStateAsync']('analysis.automation.targetValue');if(_0x5d2277&&_0x5d2277[_0x1a7b3e(0xb6)]&&_0x1909c3){const _0xd42838=_0x5d2277[_0x1a7b3e(0xb6)];let _0x44715c=_0x1909c3[_0x1a7b3e(0xb6)];try{_0x44715c=JSON[_0x1a7b3e(0xcf)](_0x44715c);}catch(_0x3373bc){}_0xab69e7[_0x1a7b3e(0xf3)][_0x1a7b3e(0xf4)](_0x1a7b3e(0x112)+_0xd42838+'\x20=\x20'+_0x44715c),await _0xab69e7[_0x1a7b3e(0xe8)](_0xd42838,_0x44715c);}else _0xab69e7['log'][_0x1a7b3e(0x8d)](_0x1a7b3e(0x10e));}catch(_0x5d26ce){_0xab69e7['log'][_0x1a7b3e(0x91)](_0x1a7b3e(0xf6)+_0x5d26ce[_0x1a7b3e(0x93)]);}}async function sendMorningBriefing(_0x3cd536){const _0x2194d2=a0_0x2a0906;if(!_0x3cd536['geminiModel']){_0x3cd536['log']['warn']('ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.');return;}_0x3cd536[_0x2194d2(0xf3)][_0x2194d2(0xf4)](_0x2194d2(0xb4));try{updateApiTimestamp();const _0x4d7a76=_0x2194d2(0x9c),_0x323cf6=await _0x3cd536[_0x2194d2(0xe0)][_0x2194d2(0xe7)](_0x4d7a76),_0x32c6ce=_0x323cf6[_0x2194d2(0xc7)]['text']();_0x3cd536[_0x2194d2(0xf3)][_0x2194d2(0xf4)](_0x2194d2(0x10b)+_0x32c6ce['length']+_0x2194d2(0xd6)),setup['sendNotification'](_0x3cd536,_0x2194d2(0xed)+_0x32c6ce);}catch(_0xabd470){_0x3cd536[_0x2194d2(0xf3)][_0x2194d2(0x91)](_0x2194d2(0xd5)+_0xabd470[_0x2194d2(0x93)]);}}module['exports']={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};