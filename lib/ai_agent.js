const a0_0x575973=a0_0x3d6d;(function(_0x24f2fb,_0x394141){const _0x299a3b=a0_0x3d6d,_0x55a564=_0x24f2fb();while(!![]){try{const _0x4b35c5=parseInt(_0x299a3b(0x127))/0x1*(parseInt(_0x299a3b(0x17b))/0x2)+-parseInt(_0x299a3b(0x118))/0x3*(parseInt(_0x299a3b(0x107))/0x4)+-parseInt(_0x299a3b(0x100))/0x5*(-parseInt(_0x299a3b(0x16c))/0x6)+-parseInt(_0x299a3b(0x150))/0x7+-parseInt(_0x299a3b(0x160))/0x8+-parseInt(_0x299a3b(0x11d))/0x9*(parseInt(_0x299a3b(0x12f))/0xa)+parseInt(_0x299a3b(0x142))/0xb*(parseInt(_0x299a3b(0x12d))/0xc);if(_0x4b35c5===_0x394141)break;else _0x55a564['push'](_0x55a564['shift']());}catch(_0x4e0b68){_0x55a564['push'](_0x55a564['shift']());}}}(a0_0x45b1,0x5c533));const a0_0x37b5a5=(function(){let _0x523cb0=!![];return function(_0x1a2f39,_0x6d9366){const _0x59ea57=_0x523cb0?function(){if(_0x6d9366){const _0xfa608a=_0x6d9366['apply'](_0x1a2f39,arguments);return _0x6d9366=null,_0xfa608a;}}:function(){};return _0x523cb0=![],_0x59ea57;};}()),a0_0x3c8926=a0_0x37b5a5(this,function(){const _0x1b10b7=a0_0x3d6d;return a0_0x3c8926[_0x1b10b7(0x167)]()[_0x1b10b7(0x136)]('(((.+)+)+)+$')['toString']()[_0x1b10b7(0x10b)](a0_0x3c8926)[_0x1b10b7(0x136)](_0x1b10b7(0x17a));});function a0_0x3d6d(_0x23d61b,_0x53cf7e){const _0x1ffc2a=a0_0x45b1();return a0_0x3d6d=function(_0x3c8926,_0x37b5a5){_0x3c8926=_0x3c8926-0xf4;let _0x45b1c9=_0x1ffc2a[_0x3c8926];return _0x45b1c9;},a0_0x3d6d(_0x23d61b,_0x53cf7e);}a0_0x3c8926();function a0_0x45b1(){const _0x467253=['isProVersion','%)\x20nach\x20\x22','automationProposal','9wjpbhZ','analysisHistory','Skipped\x20(Traffic)','error','Tag','generateContent','analysis.lastResult','sendNotification','warn','.Current.WeatherText','89829iAYPse','@google/generative-ai','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','KI-Fehler\x20(Fallback)','Skipped\x20(No\x20AI\x20or\x20Data)','trim','60bdTWds','.\x20KONTEXT:\x20','1154210AtwDFf','LTM.driftAnalysis.baselineDrift','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','log','isEmergency','LTM.processingStatus','stringify','search','generic','message','config','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','.\x20EMERGENCY:\x20','ü§ñ\x20Butler\x20Brain\x20Error:\x20','now','driftDetails','unshift','summary','currentSystemMode','333685tldZDt','Digest','üìÖ\x20Daily\x20Digest:\x0a','reason','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','targetId','analysis.automation.targetValue','val','aiPersona','debug','isAlert','LTM.driftAnalysis.driftDetails','.Current.IsNight','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','917448BXRlup','Unbekannt\x20(Kein\x20Sensor)','detected','ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','getForeignStateAsync','info','Sicherheit\x20geht\x20vor.','baselineDrift','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','Gemini\x20Error:\x20','normal','rawEventLog','text','üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','LTM.rawEventLog','eventHistory','2434728oActUL','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','parse','Traffic-Schutz\x20(Auto-Approved)','models/gemini-flash-latest','getStateAsync','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','toString','setForeignStateAsync','geminiModel','exports','dailyDigests','490902OupeWi','‚ö†Ô∏è\x20ALARM:\x20','\x20->\x20','Briefing\x20Error:\x20','alertReason','LTM.driftAnalysis.lastCheck','Unbekannt','LTM.dailyDigests','response','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','analysis.isAlert','useWeather','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','(((.+)+)+)+$','2whjokf','.Current.Temperature','length','decision','toLocaleTimeString','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','analysis.automation.autoApply','setStateAsync','analysis.analysisHistory','weatherInstance',').\x20Sending\x20notification...','activityLevel','splice','üåÖ\x20Morning\x20Briefing:\x0a','45DXPUwX','ltmLtbWindowDays','approved','analysis.alertReason','analysis.automation.targetId','ltmStbWindowDays','üåÖ\x20Briefing\x20generated\x20(Length:\x20','10288CUxMkj','.\x20EVENTS:\x20','timestamp','toISOString','constructor','BUTLER\x20Execution\x20Error:\x20','¬∞C,\x20','replace','Keine\x20Details.','system.presenceWho','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','\x20√ºbersprungen\x20(Auto-Approved).','slice','Nacht','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','57CkpBnY','analysis.automation.patternDetected'];a0_0x45b1=function(){return _0x467253;};return a0_0x45b1();}'use strict';const {GoogleGenerativeAI}=require(a0_0x575973(0x128)),setup=require('./setup'),GEMINI_MODEL=a0_0x575973(0x164),LTM_DP_DAILY_DIGESTS=a0_0x575973(0x173),LTM_DP_STATUS=a0_0x575973(0x134),LTM_DP_RAW_LOG=a0_0x575973(0x15e),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x575973(0x13a),'senior_aal':a0_0x575973(0x176),'family':'Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','single_comfort':a0_0x575973(0x129),'security':a0_0x575973(0x156),'energy_saver':a0_0x575973(0x115)};function canCallApi(){const _0x37e441=a0_0x575973,_0x54bc04=Date[_0x37e441(0x13d)]();return _0x54bc04-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x2f561a=a0_0x575973;lastGlobalApiCall=Date[_0x2f561a(0x13d)]();}async function getWeatherContext(_0x2cb1e4){const _0x4af9a0=a0_0x575973;if(!_0x2cb1e4[_0x4af9a0(0x139)][_0x4af9a0(0x178)]||!_0x2cb1e4[_0x4af9a0(0x139)][_0x4af9a0(0xfb)])return _0x4af9a0(0x151);try{const _0xdb8766=_0x2cb1e4[_0x4af9a0(0x139)][_0x4af9a0(0xfb)];let _0x32dcb9=await _0x2cb1e4['getForeignStateAsync'](_0xdb8766+_0x4af9a0(0x17c));if(!_0x32dcb9)_0x32dcb9=await _0x2cb1e4[_0x4af9a0(0x154)](_0xdb8766+'.forecast.current.temperature');let _0x3933ca=await _0x2cb1e4[_0x4af9a0(0x154)](_0xdb8766+_0x4af9a0(0x126));if(!_0x3933ca)_0x3933ca=await _0x2cb1e4[_0x4af9a0(0x154)](_0xdb8766+'.forecast.current.state');let _0x22c448=_0x4af9a0(0x172);const _0x6d14fc=await _0x2cb1e4[_0x4af9a0(0x154)](_0xdb8766+_0x4af9a0(0x14e));if(_0x6d14fc)_0x22c448=_0x6d14fc['val']?_0x4af9a0(0x114):_0x4af9a0(0x121);if(_0x32dcb9&&_0x3933ca)return _0x32dcb9[_0x4af9a0(0x149)]+_0x4af9a0(0x10d)+_0x3933ca['val']+',\x20Lichtverh√§ltnisse:\x20'+_0x22c448;}catch(_0x521876){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x4a5673,_0x194da4,_0x50d171,_0x14bd6c){const _0x24e31f=a0_0x575973;if(!_0x4a5673[_0x24e31f(0x169)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x1746c5=Date['now']();if(decisionCache[_0x194da4]&&_0x1746c5-decisionCache[_0x194da4][_0x24e31f(0x109)]<CACHE_TTL_MS){const _0x850e40=decisionCache[_0x194da4][_0x24e31f(0xf5)];return _0x4a5673[_0x24e31f(0x132)][_0x24e31f(0x14b)](_0x24e31f(0x116)+_0x194da4+_0x24e31f(0x16e)+(_0x850e40[_0x24e31f(0x102)]?'OK':'NO')+'\x20('+_0x850e40[_0x24e31f(0x145)]+')'),_0x850e40;}if(!canCallApi())return _0x4a5673[_0x24e31f(0x132)]['debug'](_0x24e31f(0x179)+_0x194da4+_0x24e31f(0x112)),{'approved':!![],'reason':_0x24e31f(0x163)};const _0x343c40=new Date()[_0x24e31f(0xf6)](),_0x2f4ce4=await getWeatherContext(_0x4a5673),_0x51a8dd=PERSONA_MAPPING[_0x4a5673[_0x24e31f(0x139)][_0x24e31f(0x14a)]||_0x24e31f(0x137)],_0x374d36=_0x24e31f(0x161)+_0x343c40+',\x20Wetter:\x20'+_0x2f4ce4+_0x24e31f(0x111)+(_0x14bd6c*0x64)['toFixed'](0x0)+_0x24e31f(0x11b)+_0x194da4+'\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22'+_0x50d171+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x51a8dd+_0x24e31f(0x117);try{updateApiTimestamp();const _0x14a6bf=await _0x4a5673[_0x24e31f(0x169)][_0x24e31f(0x122)](_0x374d36),_0x1f55b2=_0x14a6bf[_0x24e31f(0x174)][_0x24e31f(0x15c)]()[_0x24e31f(0x10e)](/```json|```/g,'')[_0x24e31f(0x12c)](),_0x325b87=JSON[_0x24e31f(0x162)](_0x1f55b2);return decisionCache[_0x194da4]={'decision':_0x325b87,'timestamp':_0x1746c5},_0x325b87;}catch(_0x339e37){return _0x4a5673[_0x24e31f(0x132)][_0x24e31f(0x125)](_0x24e31f(0x13c)+_0x339e37[_0x24e31f(0x138)]),decisionCache[_0x194da4]={'decision':{'approved':!![],'reason':_0x24e31f(0x12a)},'timestamp':_0x1746c5-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x1e6872,_0x1179e9=''){const _0x2053cb=a0_0x575973;if(!_0x1e6872['geminiModel'])return;if(!canCallApi()){_0x1e6872[_0x2053cb(0x132)][_0x2053cb(0x14b)](_0x2053cb(0x158));return;}if(_0x1e6872[_0x2053cb(0x15f)]['length']===0x0)return;const _0x6599f8=_0x1e6872['eventHistory'][_0x2053cb(0x113)](0x0,0xf),_0x535343=_0x1e6872['currentSystemMode'],_0x4900bd=PERSONA_MAPPING[_0x1e6872[_0x2053cb(0x139)][_0x2053cb(0x14a)]||'generic'],_0x168dbe=_0x1e6872[_0x2053cb(0x139)]['livingContext']||_0x2053cb(0x10f);let _0x26070a=_0x2053cb(0x172);try{const _0x4c3c1a=await _0x1e6872[_0x2053cb(0x165)](_0x2053cb(0x110));if(_0x4c3c1a&&_0x4c3c1a['val'])_0x26070a=_0x4c3c1a[_0x2053cb(0x149)];}catch(_0x3193b3){}let _0x23be40=![];try{const _0x34c1c6=await _0x1e6872[_0x2053cb(0x165)](_0x2053cb(0xf8));if(_0x34c1c6&&_0x34c1c6[_0x2053cb(0x149)])_0x23be40=!![];}catch(_0x241b0d){}const _0x23cdb4=_0x2053cb(0x146)+_0x4900bd+_0x2053cb(0x12e)+_0x168dbe+'.\x20SYSTEM_MODE:\x20'+_0x535343+'.\x20ANWESEND:\x20'+_0x26070a+_0x2053cb(0x108)+JSON[_0x2053cb(0x135)](_0x6599f8)+_0x2053cb(0x13b)+_0x1179e9+_0x2053cb(0x175);try{updateApiTimestamp();const _0x4809d9=await _0x1e6872['geminiModel'][_0x2053cb(0x122)](_0x23cdb4),_0x1131f1=JSON[_0x2053cb(0x162)](_0x4809d9[_0x2053cb(0x174)][_0x2053cb(0x15c)]()[_0x2053cb(0x10e)](/```json|```/g,'')['trim']());await _0x1e6872['setStateAsync'](_0x2053cb(0x123),{'val':JSON['stringify'](_0x1131f1),'ack':!![]});if(_0x1131f1[_0x2053cb(0x140)])await _0x1e6872[_0x2053cb(0xf9)]('analysis.activitySummary',{'val':_0x1131f1[_0x2053cb(0x140)],'ack':!![]});const _0x13da13={'timestamp':Date['now'](),'id':Date[_0x2053cb(0x13d)]()[_0x2053cb(0x167)](),'analysis':{'activity':{'summary':_0x1131f1['summary'],'isAlert':_0x1131f1[_0x2053cb(0x14c)],'alertReason':_0x1131f1[_0x2053cb(0x170)]},'comfort':{'automationProposal':_0x1131f1[_0x2053cb(0x11c)]}}};_0x1e6872[_0x2053cb(0x11e)][_0x2053cb(0x13f)](_0x13da13);if(_0x1e6872['analysisHistory'][_0x2053cb(0xf4)]>0x32)_0x1e6872[_0x2053cb(0x11e)]['pop']();await _0x1e6872[_0x2053cb(0xf9)](_0x2053cb(0xfa),{'val':JSON[_0x2053cb(0x135)](_0x1e6872['analysisHistory']),'ack':!![]});const _0xf8863c=_0x1131f1[_0x2053cb(0x14c)]||![];_0xf8863c!==_0x1e6872['lastAlertState']&&(await _0x1e6872[_0x2053cb(0xf9)](_0x2053cb(0x177),{'val':_0xf8863c,'ack':!![]}),_0x1e6872['lastAlertState']=_0xf8863c,_0xf8863c&&(await _0x1e6872[_0x2053cb(0xf9)](_0x2053cb(0x103),{'val':_0x1131f1[_0x2053cb(0x170)],'ack':!![]}),setup[_0x2053cb(0x124)](_0x1e6872,_0x2053cb(0x16d)+_0x1131f1[_0x2053cb(0x170)],![],_0x1131f1[_0x2053cb(0x133)])));if(_0x1131f1['automationProposal']&&_0x1131f1['automationProposal'][_0x2053cb(0x152)]){await _0x1e6872[_0x2053cb(0xf9)](_0x2053cb(0x119),{'val':!![],'ack':!![]}),await _0x1e6872[_0x2053cb(0xf9)]('analysis.automation.description',{'val':_0x1131f1[_0x2053cb(0x11c)]['description'],'ack':!![]}),await _0x1e6872[_0x2053cb(0xf9)](_0x2053cb(0x104),{'val':_0x1131f1[_0x2053cb(0x11c)][_0x2053cb(0x147)],'ack':!![]}),await _0x1e6872[_0x2053cb(0xf9)](_0x2053cb(0x148),{'val':JSON[_0x2053cb(0x135)](_0x1131f1[_0x2053cb(0x11c)]['targetValue']),'ack':!![]});if(_0x23be40)executeAutomationAction(_0x1e6872);}}catch(_0x41f6ec){_0x1e6872[_0x2053cb(0x132)][_0x2053cb(0x120)](_0x2053cb(0x159)+_0x41f6ec[_0x2053cb(0x138)]);}}async function createDailyDigest(_0x4927d9,_0x4da78c){const _0x2610f4=a0_0x575973;if(!_0x4927d9[_0x2610f4(0x11a)])return;if(!canCallApi()){await _0x4927d9['setStateAsync'](LTM_DP_STATUS,{'val':_0x2610f4(0x11f),'ack':!![]});return;}await _0x4927d9['setStateAsync'](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x4927d9['geminiModel']||_0x4927d9[_0x2610f4(0x15b)][_0x2610f4(0xf4)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4927d9[_0x2610f4(0xf9)](LTM_DP_STATUS,{'val':_0x2610f4(0x12b),'ack':!![]});return;}const _0x235bc1=JSON[_0x2610f4(0x162)](JSON[_0x2610f4(0x135)](_0x4927d9[_0x2610f4(0x15b)])),_0x303715=_0x235bc1[_0x2610f4(0xf4)],_0x5b560a='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x2610f4(0x135)](_0x235bc1);try{updateApiTimestamp();const _0x2bfd64=await _0x4927d9[_0x2610f4(0x169)][_0x2610f4(0x122)](_0x5b560a),_0x231af6=JSON[_0x2610f4(0x162)](_0x2bfd64[_0x2610f4(0x174)][_0x2610f4(0x15c)]()[_0x2610f4(0x10e)](/```json|```/g,'')[_0x2610f4(0x12c)]()),_0x302612={'timestamp':new Date()[_0x2610f4(0x10a)](),'eventCount':_0x303715,'summary':_0x231af6[_0x2610f4(0x140)]||_0x2610f4(0x143),'activityLevel':_0x231af6[_0x2610f4(0xfd)]||_0x2610f4(0x15a),'systemMode':_0x4927d9[_0x2610f4(0x141)]};_0x4927d9['dailyDigests']['push'](_0x302612);const _0x5afb57=_0x4927d9[_0x2610f4(0x139)][_0x2610f4(0x101)]||0x3c;_0x4927d9[_0x2610f4(0x16b)]['length']>_0x5afb57&&_0x4927d9[_0x2610f4(0x16b)][_0x2610f4(0xfe)](0x0,_0x4927d9[_0x2610f4(0x16b)][_0x2610f4(0xf4)]-_0x5afb57);await _0x4927d9['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x4927d9[_0x2610f4(0x16b)]),'ack':!![]}),_0x4927d9[_0x2610f4(0x15b)]=[],await _0x4927d9[_0x2610f4(0xf9)](LTM_DP_RAW_LOG,{'val':JSON[_0x2610f4(0x135)](_0x4927d9[_0x2610f4(0x15b)]),'ack':!![]}),await _0x4927d9[_0x2610f4(0xf9)](LTM_DP_STATUS,{'val':'Success','ack':!![]});const _0x360273=_0x2610f4(0x144)+_0x231af6[_0x2610f4(0x140)]+'\x0aAktivit√§t:\x20'+_0x231af6[_0x2610f4(0xfd)];setup[_0x2610f4(0x124)](_0x4927d9,_0x360273,![],![]);if(_0x4927d9[_0x2610f4(0x11a)]&&_0x4da78c)_0x4da78c['send'](_0x4927d9,'ANALYZE_HEALTH',{'digest':_0x302612});}catch(_0xcf83da){_0x4927d9[_0x2610f4(0x132)]['error'](_0xcf83da[_0x2610f4(0x138)]);}}async function runBaselineDriftAnalysis(_0x3e2691){const _0x4a2d6d=a0_0x575973;if(!_0x3e2691[_0x4a2d6d(0x11a)]||!_0x3e2691[_0x4a2d6d(0x169)])return;if(!canCallApi())return;const _0x52979d=_0x3e2691[_0x4a2d6d(0x139)][_0x4a2d6d(0x105)]||0xe;if(_0x3e2691[_0x4a2d6d(0x16b)][_0x4a2d6d(0xf4)]<_0x52979d+0x7){await _0x3e2691[_0x4a2d6d(0xf9)](_0x4a2d6d(0x130),{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x34f303=_0x3e2691[_0x4a2d6d(0x16b)][_0x4a2d6d(0x113)](-_0x52979d),_0x251817=_0x3e2691['dailyDigests'][_0x4a2d6d(0x113)](0x0,_0x3e2691[_0x4a2d6d(0x16b)]['length']-_0x52979d),_0x3f8941=_0x4a2d6d(0x166)+JSON[_0x4a2d6d(0x135)](_0x251817)+'\x0aSTB:\x20'+JSON[_0x4a2d6d(0x135)](_0x34f303);try{updateApiTimestamp();const _0x3cf5c6=await _0x3e2691[_0x4a2d6d(0x169)][_0x4a2d6d(0x122)](_0x3f8941),_0x59e62c=JSON['parse'](_0x3cf5c6[_0x4a2d6d(0x174)][_0x4a2d6d(0x15c)]()[_0x4a2d6d(0x10e)](/```json|```/g,'')['trim']());_0x59e62c[_0x4a2d6d(0x157)]&&(await _0x3e2691['setStateAsync']('LTM.driftAnalysis.baselineDrift',{'val':_0x59e62c['baselineDrift'],'ack':!![]}),await _0x3e2691[_0x4a2d6d(0xf9)](_0x4a2d6d(0x14d),{'val':_0x59e62c[_0x4a2d6d(0x13e)],'ack':!![]}),await _0x3e2691[_0x4a2d6d(0xf9)](_0x4a2d6d(0x171),{'val':Date[_0x4a2d6d(0x13d)](),'ack':!![]}));}catch(_0xb817f8){}}async function executeAutomationAction(_0x2c0b2e){const _0x4b1476=a0_0x575973;try{const _0x182439=await _0x2c0b2e[_0x4b1476(0x165)](_0x4b1476(0x104)),_0x155bd2=await _0x2c0b2e['getStateAsync'](_0x4b1476(0x148));if(_0x182439&&_0x182439[_0x4b1476(0x149)]&&_0x155bd2){const _0x3dcbbc=_0x182439['val'];let _0x1b4fb7=_0x155bd2[_0x4b1476(0x149)];try{_0x1b4fb7=JSON['parse'](_0x1b4fb7);}catch(_0x25c3b0){}_0x2c0b2e[_0x4b1476(0x132)]['info'](_0x4b1476(0xf7)+_0x3dcbbc+'\x20=\x20'+_0x1b4fb7),await _0x2c0b2e[_0x4b1476(0x168)](_0x3dcbbc,_0x1b4fb7);}else _0x2c0b2e['log'][_0x4b1476(0x125)](_0x4b1476(0x14f));}catch(_0x3c161d){_0x2c0b2e['log']['error'](_0x4b1476(0x10c)+_0x3c161d[_0x4b1476(0x138)]);}}async function sendMorningBriefing(_0x25a847){const _0x1f8257=a0_0x575973;if(!_0x25a847[_0x1f8257(0x169)]){_0x25a847[_0x1f8257(0x132)]['warn'](_0x1f8257(0x153));return;}_0x25a847[_0x1f8257(0x132)][_0x1f8257(0x155)](_0x1f8257(0x15d));try{updateApiTimestamp();const _0x58db1b=_0x1f8257(0x131),_0x5112ef=await _0x25a847[_0x1f8257(0x169)][_0x1f8257(0x122)](_0x58db1b),_0x48b2ba=_0x5112ef['response'][_0x1f8257(0x15c)]();_0x25a847['log'][_0x1f8257(0x155)](_0x1f8257(0x106)+_0x48b2ba[_0x1f8257(0xf4)]+_0x1f8257(0xfc)),setup['sendNotification'](_0x25a847,_0x1f8257(0xff)+_0x48b2ba);}catch(_0x3b4777){_0x25a847['log'][_0x1f8257(0x120)](_0x1f8257(0x16f)+_0x3b4777[_0x1f8257(0x138)]);}}module[a0_0x575973(0x16a)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};