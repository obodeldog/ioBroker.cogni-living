const a0_0x15a5e4=a0_0x4a21;(function(_0x145baf,_0x51d920){const _0xa09bbe=a0_0x4a21,_0xcb46a5=_0x145baf();while(!![]){try{const _0x5863d5=parseInt(_0xa09bbe(0x123))/0x1+-parseInt(_0xa09bbe(0x120))/0x2+parseInt(_0xa09bbe(0x110))/0x3*(parseInt(_0xa09bbe(0xc0))/0x4)+parseInt(_0xa09bbe(0x128))/0x5*(parseInt(_0xa09bbe(0xa9))/0x6)+parseInt(_0xa09bbe(0xdc))/0x7*(parseInt(_0xa09bbe(0xb6))/0x8)+parseInt(_0xa09bbe(0x113))/0x9*(-parseInt(_0xa09bbe(0xb9))/0xa)+-parseInt(_0xa09bbe(0xb2))/0xb;if(_0x5863d5===_0x51d920)break;else _0xcb46a5['push'](_0xcb46a5['shift']());}catch(_0x5463a8){_0xcb46a5['push'](_0xcb46a5['shift']());}}}(a0_0x5157,0xa91d8));const a0_0x177e5c=(function(){let _0x114b60=!![];return function(_0x3659b8,_0x360c89){const _0x5e9e17=_0x114b60?function(){const _0x5ecec2=a0_0x4a21;if(_0x360c89){const _0x3c0527=_0x360c89[_0x5ecec2(0xd7)](_0x3659b8,arguments);return _0x360c89=null,_0x3c0527;}}:function(){};return _0x114b60=![],_0x5e9e17;};}()),a0_0x302632=a0_0x177e5c(this,function(){const _0x4d5f80=a0_0x4a21;return a0_0x302632[_0x4d5f80(0xf3)]()[_0x4d5f80(0x108)](_0x4d5f80(0x119))['toString']()[_0x4d5f80(0xbb)](a0_0x302632)['search']('(((.+)+)+)+$');});a0_0x302632();'use strict';const {GoogleGenerativeAI}=require(a0_0x15a5e4(0xdf)),setup=require(a0_0x15a5e4(0x106)),GEMINI_MODEL=a0_0x15a5e4(0xdb),LTM_DP_DAILY_DIGESTS=a0_0x15a5e4(0x10f),LTM_DP_STATUS=a0_0x15a5e4(0xe3),LTM_DP_RAW_LOG=a0_0x15a5e4(0x10d),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x15a5e4(0x11c),'senior_aal':a0_0x15a5e4(0x111),'family':'Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','single_comfort':a0_0x15a5e4(0xe2),'security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x15a5e4(0xb0)};function canCallApi(){const _0x1747ce=a0_0x15a5e4,_0x234d33=Date[_0x1747ce(0xf6)]();return _0x234d33-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x14d42c=a0_0x15a5e4;lastGlobalApiCall=Date[_0x14d42c(0xf6)]();}async function getWeatherContext(_0x100c61){const _0x1be677=a0_0x15a5e4;if(!_0x100c61[_0x1be677(0x109)][_0x1be677(0xc7)]||!_0x100c61[_0x1be677(0x109)][_0x1be677(0xf8)])return _0x1be677(0xb4);try{const _0x38e60b=_0x100c61[_0x1be677(0x109)]['weatherInstance'];let _0x476e83=await _0x100c61[_0x1be677(0xd6)](_0x38e60b+_0x1be677(0xc5));if(!_0x476e83)_0x476e83=await _0x100c61[_0x1be677(0xd6)](_0x38e60b+_0x1be677(0xca));let _0x23b103=await _0x100c61[_0x1be677(0xd6)](_0x38e60b+_0x1be677(0x10c));if(!_0x23b103)_0x23b103=await _0x100c61[_0x1be677(0xd6)](_0x38e60b+_0x1be677(0x11f));let _0xde1181=_0x1be677(0xdd);const _0x11d9af=await _0x100c61[_0x1be677(0xd6)](_0x38e60b+_0x1be677(0xea));if(_0x11d9af)_0xde1181=_0x11d9af[_0x1be677(0x12b)]?_0x1be677(0xee):_0x1be677(0x117);if(_0x476e83&&_0x23b103)return _0x476e83[_0x1be677(0x12b)]+'Â°C,\x20'+_0x23b103['val']+',\x20LichtverhÃ¤ltnisse:\x20'+_0xde1181;}catch(_0x3c7300){}return _0x1be677(0x127);}async function consultButler(_0x1012c5,_0xc14b01,_0x3404ef,_0x3bdf77){const _0x347d13=a0_0x15a5e4;if(!_0x1012c5[_0x347d13(0xb8)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x4753ff=Date[_0x347d13(0xf6)]();if(decisionCache[_0xc14b01]&&_0x4753ff-decisionCache[_0xc14b01]['timestamp']<CACHE_TTL_MS){const _0x454b59=decisionCache[_0xc14b01]['decision'];return _0x1012c5[_0x347d13(0x115)][_0x347d13(0xf9)]('ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20'+_0xc14b01+'\x20->\x20'+(_0x454b59[_0x347d13(0xe8)]?'OK':'NO')+'\x20('+_0x454b59[_0x347d13(0xcc)]+')'),_0x454b59;}if(!canCallApi())return _0x1012c5[_0x347d13(0x115)][_0x347d13(0xf9)](_0x347d13(0xb7)+_0xc14b01+_0x347d13(0x107)),{'approved':!![],'reason':_0x347d13(0xde)};const _0x27df7f=new Date()[_0x347d13(0xc1)](),_0x595e27=await getWeatherContext(_0x1012c5),_0x14f5dd=PERSONA_MAPPING[_0x1012c5[_0x347d13(0x109)][_0x347d13(0x116)]||_0x347d13(0xb1)],_0x4e72f0=_0x347d13(0x112)+_0x27df7f+',\x20Wetter:\x20'+_0x595e27+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x3bdf77*0x64)['toFixed'](0x0)+_0x347d13(0xeb)+_0xc14b01+_0x347d13(0xfd)+_0x3404ef+_0x347d13(0xec)+_0x14f5dd+_0x347d13(0x129);try{updateApiTimestamp();const _0x4c7a67=await _0x1012c5[_0x347d13(0xb8)][_0x347d13(0x124)](_0x4e72f0),_0x1b3a45=_0x4c7a67[_0x347d13(0x10a)][_0x347d13(0xb5)]()[_0x347d13(0xe4)](/```json|```/g,'')[_0x347d13(0x12d)](),_0x13cacf=JSON['parse'](_0x1b3a45);return decisionCache[_0xc14b01]={'decision':_0x13cacf,'timestamp':_0x4753ff},_0x13cacf;}catch(_0x4c574a){return _0x1012c5[_0x347d13(0x115)][_0x347d13(0xe7)](_0x347d13(0xae)+_0x4c574a[_0x347d13(0xfc)]),decisionCache[_0xc14b01]={'decision':{'approved':!![],'reason':_0x347d13(0x100)},'timestamp':_0x4753ff-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x347d13(0x100)};}}function a0_0x5157(){const _0x324073=['N/A\x20(Learning)','currentSystemMode','ANALYZE_HEALTH','stringify','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','analysis.automation.autoApply','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','generic','18162144CdwogO','parse','Unbekannt\x20(Kein\x20Sensor)','text','8Uxxhdl','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','geminiModel','2110USLMGV','eventHistory','constructor','livingContext','analysis.automation.targetId','getStateAsync','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','2876QdOSqH','toLocaleTimeString','error','unshift','Keine\x20Details.','.Current.Temperature','analysisHistory','useWeather','sendNotification','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','.forecast.current.temperature','send','reason','isAlert','.\x20KONTEXT:\x20','analysis.automation.targetValue','.\x20EVENTS:\x20','lastAlertState','automationProposal','analysis.alertReason','Skipped\x20(No\x20AI\x20or\x20Data)','ltmLtbWindowDays','getForeignStateAsync','apply','.\x20EMERGENCY:\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','system.presenceWho','models/gemini-flash-latest','2798971aPrJNW','Unbekannt','Traffic-Schutz\x20(Auto-Approved)','@google/generative-ai','isEmergency','Digest','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','LTM.processingStatus','replace','alertReason','\x0aSTB:\x20','warn','approved','length','.Current.IsNight','%)\x20nach\x20\x22','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','analysis.automation.patternDetected','Nacht','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','slice','dailyDigests','pop','toString','âš ï¸\x20ALARM:\x20','LTM.driftAnalysis.baselineDrift','now','analysis.analysisHistory','weatherInstance','debug','Success','rawEventLog','message','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','splice','analysis.isAlert','KI-Fehler\x20(Fallback)','Skipped\x20(Traffic)','targetId','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','push','detected','./setup','\x20Ã¼bersprungen\x20(Auto-Approved).','search','config','response','LTM.driftAnalysis.driftDetails','.Current.WeatherText','LTM.rawEventLog','Started...','LTM.dailyDigests','3054mLusUB','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','23211JxVfIJ','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','log','aiPersona','Tag','LTM.driftAnalysis.lastCheck','(((.+)+)+)+$','Gemini\x20Error:\x20','normal','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','toISOString','exports','.forecast.current.state','551970XbDcpx','analysis.activitySummary','ðŸŒ…\x20Morning\x20Briefing:\x0a','849240duDObJ','generateContent','driftDetails','.\x20ANWESEND:\x20','Wetterdaten\x20nicht\x20abrufbar','5mOosBN','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','setStateAsync','val','BUTLER\x20Execution\x20Error:\x20','trim','isProVersion','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','summary','7097514FSKXzz'];a0_0x5157=function(){return _0x324073;};return a0_0x5157();}async function runGeminiAnalysis(_0x45a99c,_0x3360fc=''){const _0xc7dedb=a0_0x15a5e4;if(!_0x45a99c[_0xc7dedb(0xb8)])return;if(!canCallApi()){_0x45a99c[_0xc7dedb(0x115)][_0xc7dedb(0xf9)](_0xc7dedb(0x114));return;}if(_0x45a99c[_0xc7dedb(0xba)][_0xc7dedb(0xe9)]===0x0)return;const _0x1cceea=_0x45a99c[_0xc7dedb(0xba)]['slice'](0x0,0xf),_0x4ee71a=_0x45a99c[_0xc7dedb(0xab)],_0x1b9fd0=PERSONA_MAPPING[_0x45a99c[_0xc7dedb(0x109)][_0xc7dedb(0x116)]||_0xc7dedb(0xb1)],_0x12b63a=_0x45a99c[_0xc7dedb(0x109)][_0xc7dedb(0xbc)]||_0xc7dedb(0xc4);let _0x43ca57=_0xc7dedb(0xdd);try{const _0x900646=await _0x45a99c[_0xc7dedb(0xbe)](_0xc7dedb(0xda));if(_0x900646&&_0x900646[_0xc7dedb(0x12b)])_0x43ca57=_0x900646[_0xc7dedb(0x12b)];}catch(_0x6c5a7c){}let _0x1bdf6f=![];try{const _0x1ed3e2=await _0x45a99c[_0xc7dedb(0xbe)](_0xc7dedb(0xaf));if(_0x1ed3e2&&_0x1ed3e2[_0xc7dedb(0x12b)])_0x1bdf6f=!![];}catch(_0x22532e){}const _0x37c72c=_0xc7dedb(0xd9)+_0x1b9fd0+_0xc7dedb(0xce)+_0x12b63a+'.\x20SYSTEM_MODE:\x20'+_0x4ee71a+_0xc7dedb(0x126)+_0x43ca57+_0xc7dedb(0xd0)+JSON[_0xc7dedb(0xad)](_0x1cceea)+_0xc7dedb(0xd8)+_0x3360fc+_0xc7dedb(0xbf);try{updateApiTimestamp();const _0x34babc=await _0x45a99c[_0xc7dedb(0xb8)][_0xc7dedb(0x124)](_0x37c72c),_0x314bfc=JSON[_0xc7dedb(0xb3)](_0x34babc[_0xc7dedb(0x10a)][_0xc7dedb(0xb5)]()[_0xc7dedb(0xe4)](/```json|```/g,'')[_0xc7dedb(0x12d)]());await _0x45a99c['setStateAsync']('analysis.lastResult',{'val':JSON['stringify'](_0x314bfc),'ack':!![]});if(_0x314bfc[_0xc7dedb(0x130)])await _0x45a99c[_0xc7dedb(0x12a)](_0xc7dedb(0x121),{'val':_0x314bfc[_0xc7dedb(0x130)],'ack':!![]});const _0xa73c35={'timestamp':Date[_0xc7dedb(0xf6)](),'id':Date[_0xc7dedb(0xf6)]()['toString'](),'analysis':{'activity':{'summary':_0x314bfc[_0xc7dedb(0x130)],'isAlert':_0x314bfc[_0xc7dedb(0xcd)],'alertReason':_0x314bfc['alertReason']},'comfort':{'automationProposal':_0x314bfc[_0xc7dedb(0xd2)]}}};_0x45a99c[_0xc7dedb(0xc6)][_0xc7dedb(0xc3)](_0xa73c35);if(_0x45a99c[_0xc7dedb(0xc6)]['length']>0x32)_0x45a99c[_0xc7dedb(0xc6)][_0xc7dedb(0xf2)]();await _0x45a99c[_0xc7dedb(0x12a)](_0xc7dedb(0xf7),{'val':JSON['stringify'](_0x45a99c['analysisHistory']),'ack':!![]});const _0x596639=_0x314bfc[_0xc7dedb(0xcd)]||![];_0x596639!==_0x45a99c[_0xc7dedb(0xd1)]&&(await _0x45a99c[_0xc7dedb(0x12a)](_0xc7dedb(0xff),{'val':_0x596639,'ack':!![]}),_0x45a99c[_0xc7dedb(0xd1)]=_0x596639,_0x596639&&(await _0x45a99c['setStateAsync'](_0xc7dedb(0xd3),{'val':_0x314bfc[_0xc7dedb(0xe5)],'ack':!![]}),setup[_0xc7dedb(0xc8)](_0x45a99c,_0xc7dedb(0xf4)+_0x314bfc[_0xc7dedb(0xe5)],![],_0x314bfc[_0xc7dedb(0xe0)])));if(_0x314bfc[_0xc7dedb(0xd2)]&&_0x314bfc[_0xc7dedb(0xd2)][_0xc7dedb(0x105)]){await _0x45a99c[_0xc7dedb(0x12a)](_0xc7dedb(0xed),{'val':!![],'ack':!![]}),await _0x45a99c[_0xc7dedb(0x12a)]('analysis.automation.description',{'val':_0x314bfc[_0xc7dedb(0xd2)]['description'],'ack':!![]}),await _0x45a99c[_0xc7dedb(0x12a)](_0xc7dedb(0xbd),{'val':_0x314bfc[_0xc7dedb(0xd2)][_0xc7dedb(0x102)],'ack':!![]}),await _0x45a99c['setStateAsync'](_0xc7dedb(0xcf),{'val':JSON[_0xc7dedb(0xad)](_0x314bfc['automationProposal']['targetValue']),'ack':!![]});if(_0x1bdf6f)executeAutomationAction(_0x45a99c);}}catch(_0x2c522b){_0x45a99c[_0xc7dedb(0x115)][_0xc7dedb(0xc2)](_0xc7dedb(0x11a)+_0x2c522b['message']);}}async function createDailyDigest(_0x556040,_0x535a6f){const _0x71c75f=a0_0x15a5e4;if(!_0x556040['isProVersion'])return;if(!canCallApi()){await _0x556040[_0x71c75f(0x12a)](LTM_DP_STATUS,{'val':_0x71c75f(0x101),'ack':!![]});return;}await _0x556040['setStateAsync'](LTM_DP_STATUS,{'val':_0x71c75f(0x10e),'ack':!![]});if(!_0x556040['geminiModel']||_0x556040[_0x71c75f(0xfb)][_0x71c75f(0xe9)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x556040[_0x71c75f(0x12a)](LTM_DP_STATUS,{'val':_0x71c75f(0xd4),'ack':!![]});return;}const _0x464bd9=JSON[_0x71c75f(0xb3)](JSON['stringify'](_0x556040[_0x71c75f(0xfb)])),_0x3f7158=_0x464bd9[_0x71c75f(0xe9)],_0x4939a2='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x71c75f(0xad)](_0x464bd9);try{updateApiTimestamp();const _0x358f38=await _0x556040[_0x71c75f(0xb8)][_0x71c75f(0x124)](_0x4939a2),_0x4d1462=JSON[_0x71c75f(0xb3)](_0x358f38[_0x71c75f(0x10a)][_0x71c75f(0xb5)]()[_0x71c75f(0xe4)](/```json|```/g,'')['trim']()),_0x372f9d={'timestamp':new Date()[_0x71c75f(0x11d)](),'eventCount':_0x3f7158,'summary':_0x4d1462[_0x71c75f(0x130)]||_0x71c75f(0xe1),'activityLevel':_0x4d1462['activityLevel']||_0x71c75f(0x11b),'systemMode':_0x556040[_0x71c75f(0xab)]};_0x556040[_0x71c75f(0xf1)][_0x71c75f(0x104)](_0x372f9d);const _0x41633b=_0x556040['config'][_0x71c75f(0xd5)]||0x3c;_0x556040[_0x71c75f(0xf1)][_0x71c75f(0xe9)]>_0x41633b&&_0x556040[_0x71c75f(0xf1)][_0x71c75f(0xfe)](0x0,_0x556040[_0x71c75f(0xf1)]['length']-_0x41633b);await _0x556040[_0x71c75f(0x12a)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x71c75f(0xad)](_0x556040[_0x71c75f(0xf1)]),'ack':!![]}),_0x556040[_0x71c75f(0xfb)]=[],await _0x556040[_0x71c75f(0x12a)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x556040[_0x71c75f(0xfb)]),'ack':!![]}),await _0x556040['setStateAsync'](LTM_DP_STATUS,{'val':_0x71c75f(0xfa),'ack':!![]});if(_0x556040[_0x71c75f(0x12e)]&&_0x535a6f)_0x535a6f[_0x71c75f(0xcb)](_0x556040,_0x71c75f(0xac),{'digest':_0x372f9d});}catch(_0x4de1f8){_0x556040[_0x71c75f(0x115)][_0x71c75f(0xc2)](_0x4de1f8[_0x71c75f(0xfc)]);}}async function runBaselineDriftAnalysis(_0x578666){const _0x3714a9=a0_0x15a5e4;if(!_0x578666[_0x3714a9(0x12e)]||!_0x578666[_0x3714a9(0xb8)])return;if(!canCallApi())return;const _0x257749=_0x578666['config']['ltmStbWindowDays']||0xe;if(_0x578666[_0x3714a9(0xf1)]['length']<_0x257749+0x7){await _0x578666[_0x3714a9(0x12a)](_0x3714a9(0xf5),{'val':_0x3714a9(0xaa),'ack':!![]});return;}const _0x3d3f2b=_0x578666[_0x3714a9(0xf1)][_0x3714a9(0xf0)](-_0x257749),_0x440015=_0x578666['dailyDigests'][_0x3714a9(0xf0)](0x0,_0x578666[_0x3714a9(0xf1)][_0x3714a9(0xe9)]-_0x257749),_0x1bc185=_0x3714a9(0xef)+JSON['stringify'](_0x440015)+_0x3714a9(0xe6)+JSON[_0x3714a9(0xad)](_0x3d3f2b);try{updateApiTimestamp();const _0x2b8f32=await _0x578666[_0x3714a9(0xb8)][_0x3714a9(0x124)](_0x1bc185),_0x5957d3=JSON[_0x3714a9(0xb3)](_0x2b8f32['response'][_0x3714a9(0xb5)]()[_0x3714a9(0xe4)](/```json|```/g,'')[_0x3714a9(0x12d)]());_0x5957d3['baselineDrift']&&(await _0x578666['setStateAsync'](_0x3714a9(0xf5),{'val':_0x5957d3['baselineDrift'],'ack':!![]}),await _0x578666[_0x3714a9(0x12a)](_0x3714a9(0x10b),{'val':_0x5957d3[_0x3714a9(0x125)],'ack':!![]}),await _0x578666[_0x3714a9(0x12a)](_0x3714a9(0x118),{'val':Date[_0x3714a9(0xf6)](),'ack':!![]}));}catch(_0x29c9ee){}}function a0_0x4a21(_0x20a062,_0xfb75b1){const _0x4acedd=a0_0x5157();return a0_0x4a21=function(_0x302632,_0x177e5c){_0x302632=_0x302632-0xa9;let _0x5157df=_0x4acedd[_0x302632];return _0x5157df;},a0_0x4a21(_0x20a062,_0xfb75b1);}async function executeAutomationAction(_0x103389){const _0x2e866d=a0_0x15a5e4;try{const _0x9d1c8=await _0x103389['getStateAsync'](_0x2e866d(0xbd)),_0xf392b1=await _0x103389[_0x2e866d(0xbe)](_0x2e866d(0xcf));if(_0x9d1c8&&_0x9d1c8[_0x2e866d(0x12b)]&&_0xf392b1){const _0x284fb0=_0x9d1c8[_0x2e866d(0x12b)];let _0x286ab1=_0xf392b1[_0x2e866d(0x12b)];try{_0x286ab1=JSON[_0x2e866d(0xb3)](_0x286ab1);}catch(_0x4cb179){}_0x103389['log']['info'](_0x2e866d(0x12f)+_0x284fb0+'\x20=\x20'+_0x286ab1),await _0x103389['setForeignStateAsync'](_0x284fb0,_0x286ab1);}else _0x103389[_0x2e866d(0x115)][_0x2e866d(0xe7)](_0x2e866d(0x103));}catch(_0x3e7538){_0x103389[_0x2e866d(0x115)][_0x2e866d(0xc2)](_0x2e866d(0x12c)+_0x3e7538[_0x2e866d(0xfc)]);}}async function sendMorningBriefing(_0x42ea5a){const _0x12e00c=a0_0x15a5e4;if(!_0x42ea5a[_0x12e00c(0xb8)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x548dc3=_0x12e00c(0xc9),_0x362673=await _0x42ea5a[_0x12e00c(0xb8)]['generateContent'](_0x548dc3),_0x4f0f54=_0x362673[_0x12e00c(0x10a)]['text']();setup[_0x12e00c(0xc8)](_0x42ea5a,_0x12e00c(0x122)+_0x4f0f54);}catch(_0x3dbea0){_0x42ea5a[_0x12e00c(0x115)][_0x12e00c(0xc2)]('Briefing\x20Error:\x20'+_0x3dbea0[_0x12e00c(0xfc)]);}}module[a0_0x15a5e4(0x11e)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};