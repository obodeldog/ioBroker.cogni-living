const a0_0x39c29c=a0_0x3aef;(function(_0x527122,_0x31c5f9){const _0x15a6dc=a0_0x3aef,_0x5161ef=_0x527122();while(!![]){try{const _0x191479=-parseInt(_0x15a6dc(0x8c))/0x1*(-parseInt(_0x15a6dc(0xd2))/0x2)+-parseInt(_0x15a6dc(0x9d))/0x3+parseInt(_0x15a6dc(0xe0))/0x4+parseInt(_0x15a6dc(0xe2))/0x5+parseInt(_0x15a6dc(0xe4))/0x6+-parseInt(_0x15a6dc(0x105))/0x7+-parseInt(_0x15a6dc(0x101))/0x8;if(_0x191479===_0x31c5f9)break;else _0x5161ef['push'](_0x5161ef['shift']());}catch(_0x5c661d){_0x5161ef['push'](_0x5161ef['shift']());}}}(a0_0x39fe,0x86a1f));const a0_0x1b66d0=(function(){let _0x2aa35e=!![];return function(_0xc482d5,_0xbed4b7){const _0x2c7340=_0x2aa35e?function(){if(_0xbed4b7){const _0x553440=_0xbed4b7['apply'](_0xc482d5,arguments);return _0xbed4b7=null,_0x553440;}}:function(){};return _0x2aa35e=![],_0x2c7340;};}()),a0_0x59242e=a0_0x1b66d0(this,function(){const _0x38213e=a0_0x3aef;return a0_0x59242e[_0x38213e(0xbd)]()['search'](_0x38213e(0xa9))['toString']()[_0x38213e(0xaf)](a0_0x59242e)[_0x38213e(0xca)](_0x38213e(0xa9));});a0_0x59242e();'use strict';const {GoogleGenerativeAI}=require(a0_0x39c29c(0x92)),setup=require('./setup'),GEMINI_MODEL=a0_0x39c29c(0xdb),LTM_DP_DAILY_DIGESTS=a0_0x39c29c(0x107),LTM_DP_STATUS=a0_0x39c29c(0x9e),LTM_DP_RAW_LOG=a0_0x39c29c(0xf5),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;function a0_0x3aef(_0x3e0621,_0xa08670){const _0x123837=a0_0x39fe();return a0_0x3aef=function(_0x59242e,_0x1b66d0){_0x59242e=_0x59242e-0x81;let _0x39fe09=_0x123837[_0x59242e];return _0x39fe09;},a0_0x3aef(_0x3e0621,_0xa08670);}let lastGlobalApiCall=0x0;function a0_0x39fe(){const _0x52763b=['.\x20ANWESEND:\x20','Nacht','isAlert','log','getStateAsync','toString','weatherInstance','currentSystemMode','Unbekannt','âš ï¸\x20ALARM:\x20',',\x20LichtverhÃ¤ltnisse:\x20','isProVersion','decision','.Current.Temperature','Â°C,\x20','.\x20SYSTEM_MODE:\x20','normal','Tag','search','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','LTM.driftAnalysis.baselineDrift','trim','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','Unbekannt\x20(Kein\x20Sensor)','push','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','3146ROxXWG','targetId','error','eventHistory','Traffic-Schutz\x20(Auto-Approved)','geminiModel','KI-Fehler\x20(Fallback)','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','replace','models/gemini-flash-latest','send','\x0aAktivitÃ¤t:\x20','summary','activityLevel','1328560XEHbcW','lastAlertState','3410300DCRYKU','Wetterdaten\x20nicht\x20abrufbar','2442984fsQAlV','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','Success','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','analysis.isAlert','exports','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','getForeignStateAsync','generateContent','approved','\x20->\x20','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','isEmergency','toISOString','warn','.Current.WeatherText','\x20=\x20','LTM.rawEventLog','Skipped\x20(No\x20AI\x20or\x20Data)','analysisHistory','baselineDrift','parse','ANALYZE_HEALTH','dailyDigests','ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','Skipped\x20(Traffic)','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','Sicherheit\x20geht\x20vor.','.\x20KONTEXT:\x20','6973984bktKTK','Keine\x20Details.','now','message','1640331GBLkLV','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','LTM.dailyDigests','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','sendNotification','.\x20EVENTS:\x20','val','ltmStbWindowDays','ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','toFixed','response','slice','analysis.automation.targetId','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','281sbEGnT','Started...',',\x20Wetter:\x20','text','targetValue','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','@google/generative-ai','reason','.forecast.current.state','automationProposal','length','debug','aiPersona','.forecast.current.temperature','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','info','config','617523gPAsHX','LTM.processingStatus','Briefing\x20Error:\x20','splice','\x0aSTB:\x20','description','Gemini\x20Error:\x20','generic','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','analysis.automation.targetValue','analysis.automation.patternDetected','stringify','(((.+)+)+)+$','setStateAsync','analysis.automation.autoApply','rawEventLog','driftDetails','system.presenceWho','constructor','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','useWeather','N/A\x20(Learning)','alertReason','LTM.driftAnalysis.driftDetails','Digest','%)\x20nach\x20\x22'];a0_0x39fe=function(){return _0x52763b;};return a0_0x39fe();}const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x39c29c(0x106),'senior_aal':'PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':a0_0x39c29c(0xe5),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':a0_0x39c29c(0xff),'energy_saver':a0_0x39c29c(0xd9)};function canCallApi(){const _0x3c958e=a0_0x39c29c,_0x30b444=Date[_0x3c958e(0x103)]();return _0x30b444-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x59b19d){const _0x17c905=a0_0x39c29c;if(!_0x59b19d[_0x17c905(0x9c)][_0x17c905(0xb2)]||!_0x59b19d[_0x17c905(0x9c)][_0x17c905(0xbe)])return _0x17c905(0xcf);try{const _0x2f719b=_0x59b19d[_0x17c905(0x9c)][_0x17c905(0xbe)];let _0x5dcb3c=await _0x59b19d['getForeignStateAsync'](_0x2f719b+_0x17c905(0xc5));if(!_0x5dcb3c)_0x5dcb3c=await _0x59b19d[_0x17c905(0xeb)](_0x2f719b+_0x17c905(0x99));let _0xbcca43=await _0x59b19d[_0x17c905(0xeb)](_0x2f719b+_0x17c905(0xf3));if(!_0xbcca43)_0xbcca43=await _0x59b19d[_0x17c905(0xeb)](_0x2f719b+_0x17c905(0x94));let _0x16216d=_0x17c905(0xc0);const _0x6f8316=await _0x59b19d[_0x17c905(0xeb)](_0x2f719b+'.Current.IsNight');if(_0x6f8316)_0x16216d=_0x6f8316[_0x17c905(0x84)]?_0x17c905(0xb9):_0x17c905(0xc9);if(_0x5dcb3c&&_0xbcca43)return _0x5dcb3c[_0x17c905(0x84)]+_0x17c905(0xc6)+_0xbcca43[_0x17c905(0x84)]+_0x17c905(0xc2)+_0x16216d;}catch(_0x58ca53){}return _0x17c905(0xe3);}async function consultButler(_0x1f9022,_0x2b8926,_0x5187d1,_0x27fe3b){const _0x4ea145=a0_0x39c29c;if(!_0x1f9022[_0x4ea145(0xd7)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x1b3c5b=Date['now']();if(decisionCache[_0x2b8926]&&_0x1b3c5b-decisionCache[_0x2b8926]['timestamp']<CACHE_TTL_MS){const _0x186609=decisionCache[_0x2b8926][_0x4ea145(0xc4)];return _0x1f9022[_0x4ea145(0xbb)][_0x4ea145(0x97)](_0x4ea145(0xe7)+_0x2b8926+_0x4ea145(0xee)+(_0x186609[_0x4ea145(0xed)]?'OK':'NO')+'\x20('+_0x186609[_0x4ea145(0x93)]+')'),_0x186609;}if(!canCallApi())return _0x1f9022[_0x4ea145(0xbb)]['debug'](_0x4ea145(0xd1)+_0x2b8926+'\x20Ã¼bersprungen\x20(Auto-Approved).'),{'approved':!![],'reason':_0x4ea145(0xd6)};const _0xd0be9d=new Date()['toLocaleTimeString'](),_0x412b30=await getWeatherContext(_0x1f9022),_0x189101=PERSONA_MAPPING[_0x1f9022['config'][_0x4ea145(0x98)]||_0x4ea145(0xa4)],_0x2539e7=_0x4ea145(0xfe)+_0xd0be9d+_0x4ea145(0x8e)+_0x412b30+_0x4ea145(0x108)+(_0x27fe3b*0x64)[_0x4ea145(0x87)](0x0)+_0x4ea145(0xb7)+_0x2b8926+'\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22'+_0x5187d1+_0x4ea145(0xb0)+_0x189101+_0x4ea145(0x91);try{updateApiTimestamp();const _0x5a4dd7=await _0x1f9022['geminiModel']['generateContent'](_0x2539e7),_0x41ba7f=_0x5a4dd7['response'][_0x4ea145(0x8f)]()[_0x4ea145(0xda)](/```json|```/g,'')[_0x4ea145(0xcd)](),_0x2f1759=JSON[_0x4ea145(0xf9)](_0x41ba7f);return decisionCache[_0x2b8926]={'decision':_0x2f1759,'timestamp':_0x1b3c5b},_0x2f1759;}catch(_0xf923a1){return _0x1f9022['log'][_0x4ea145(0xf2)](_0x4ea145(0x81)+_0xf923a1[_0x4ea145(0x104)]),decisionCache[_0x2b8926]={'decision':{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'},'timestamp':_0x1b3c5b-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x4ea145(0xd8)};}}async function runGeminiAnalysis(_0x20b1e1,_0x15c3fc=''){const _0x4e854c=a0_0x39c29c;if(!_0x20b1e1['geminiModel'])return;if(!canCallApi()){_0x20b1e1[_0x4e854c(0xbb)]['debug'](_0x4e854c(0x8b));return;}if(_0x20b1e1[_0x4e854c(0xd5)]['length']===0x0)return;const _0x4bfec6=_0x20b1e1[_0x4e854c(0xd5)][_0x4e854c(0x89)](0x0,0xf),_0x232dd4=_0x20b1e1[_0x4e854c(0xbf)],_0x2f45c2=PERSONA_MAPPING[_0x20b1e1[_0x4e854c(0x9c)][_0x4e854c(0x98)]||_0x4e854c(0xa4)],_0x486b4c=_0x20b1e1['config']['livingContext']||_0x4e854c(0x102);let _0x11bbf2=_0x4e854c(0xc0);try{const _0x2c97ae=await _0x20b1e1[_0x4e854c(0xbc)](_0x4e854c(0xae));if(_0x2c97ae&&_0x2c97ae['val'])_0x11bbf2=_0x2c97ae['val'];}catch(_0x5e673d){}let _0x2163d7=![];try{const _0x344c30=await _0x20b1e1[_0x4e854c(0xbc)](_0x4e854c(0xab));if(_0x344c30&&_0x344c30[_0x4e854c(0x84)])_0x2163d7=!![];}catch(_0x2fb037){}const _0x5c0fd0=_0x4e854c(0xb1)+_0x2f45c2+_0x4e854c(0x100)+_0x486b4c+_0x4e854c(0xc7)+_0x232dd4+_0x4e854c(0xb8)+_0x11bbf2+_0x4e854c(0x83)+JSON[_0x4e854c(0xa8)](_0x4bfec6)+'.\x20EMERGENCY:\x20'+_0x15c3fc+_0x4e854c(0x9a);try{updateApiTimestamp();const _0x54b55c=await _0x20b1e1[_0x4e854c(0xd7)]['generateContent'](_0x5c0fd0),_0x38b33e=JSON[_0x4e854c(0xf9)](_0x54b55c[_0x4e854c(0x88)]['text']()[_0x4e854c(0xda)](/```json|```/g,'')[_0x4e854c(0xcd)]());await _0x20b1e1[_0x4e854c(0xaa)]('analysis.lastResult',{'val':JSON[_0x4e854c(0xa8)](_0x38b33e),'ack':!![]});if(_0x38b33e[_0x4e854c(0xde)])await _0x20b1e1['setStateAsync']('analysis.activitySummary',{'val':_0x38b33e['summary'],'ack':!![]});const _0x5f1752={'timestamp':Date['now'](),'id':Date[_0x4e854c(0x103)]()[_0x4e854c(0xbd)](),'analysis':{'activity':{'summary':_0x38b33e[_0x4e854c(0xde)],'isAlert':_0x38b33e[_0x4e854c(0xba)],'alertReason':_0x38b33e[_0x4e854c(0xb4)]},'comfort':{'automationProposal':_0x38b33e[_0x4e854c(0x95)]}}};_0x20b1e1[_0x4e854c(0xf7)]['unshift'](_0x5f1752);if(_0x20b1e1[_0x4e854c(0xf7)][_0x4e854c(0x96)]>0x32)_0x20b1e1['analysisHistory']['pop']();await _0x20b1e1['setStateAsync']('analysis.analysisHistory',{'val':JSON[_0x4e854c(0xa8)](_0x20b1e1['analysisHistory']),'ack':!![]});const _0x313019=_0x38b33e[_0x4e854c(0xba)]||![];_0x313019!==_0x20b1e1[_0x4e854c(0xe1)]&&(await _0x20b1e1['setStateAsync'](_0x4e854c(0xe8),{'val':_0x313019,'ack':!![]}),_0x20b1e1[_0x4e854c(0xe1)]=_0x313019,_0x313019&&(await _0x20b1e1[_0x4e854c(0xaa)]('analysis.alertReason',{'val':_0x38b33e[_0x4e854c(0xb4)],'ack':!![]}),setup[_0x4e854c(0x82)](_0x20b1e1,_0x4e854c(0xc1)+_0x38b33e[_0x4e854c(0xb4)],![],_0x38b33e[_0x4e854c(0xf0)])));if(_0x38b33e[_0x4e854c(0x95)]&&_0x38b33e[_0x4e854c(0x95)]['detected']){await _0x20b1e1[_0x4e854c(0xaa)](_0x4e854c(0xa7),{'val':!![],'ack':!![]}),await _0x20b1e1['setStateAsync']('analysis.automation.description',{'val':_0x38b33e['automationProposal'][_0x4e854c(0xa2)],'ack':!![]}),await _0x20b1e1[_0x4e854c(0xaa)]('analysis.automation.targetId',{'val':_0x38b33e[_0x4e854c(0x95)][_0x4e854c(0xd3)],'ack':!![]}),await _0x20b1e1['setStateAsync'](_0x4e854c(0xa6),{'val':JSON['stringify'](_0x38b33e['automationProposal'][_0x4e854c(0x90)]),'ack':!![]});if(_0x2163d7)executeAutomationAction(_0x20b1e1);}}catch(_0x1a9170){_0x20b1e1[_0x4e854c(0xbb)]['error'](_0x4e854c(0xa3)+_0x1a9170[_0x4e854c(0x104)]);}}async function createDailyDigest(_0x313bf4,_0x226153){const _0x2740d5=a0_0x39c29c;if(!_0x313bf4['isProVersion'])return;if(!canCallApi()){await _0x313bf4[_0x2740d5(0xaa)](LTM_DP_STATUS,{'val':_0x2740d5(0xfd),'ack':!![]});return;}await _0x313bf4[_0x2740d5(0xaa)](LTM_DP_STATUS,{'val':_0x2740d5(0x8d),'ack':!![]});if(!_0x313bf4[_0x2740d5(0xd7)]||_0x313bf4[_0x2740d5(0xac)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x313bf4[_0x2740d5(0xaa)](LTM_DP_STATUS,{'val':_0x2740d5(0xf6),'ack':!![]});return;}const _0x33f32=JSON[_0x2740d5(0xf9)](JSON['stringify'](_0x313bf4[_0x2740d5(0xac)])),_0x4feb10=_0x33f32[_0x2740d5(0x96)],_0x571a9b=_0x2740d5(0xce)+JSON[_0x2740d5(0xa8)](_0x33f32);try{updateApiTimestamp();const _0x3d85b9=await _0x313bf4[_0x2740d5(0xd7)][_0x2740d5(0xec)](_0x571a9b),_0x317dcd=JSON[_0x2740d5(0xf9)](_0x3d85b9[_0x2740d5(0x88)][_0x2740d5(0x8f)]()[_0x2740d5(0xda)](/```json|```/g,'')[_0x2740d5(0xcd)]()),_0x475151={'timestamp':new Date()[_0x2740d5(0xf1)](),'eventCount':_0x4feb10,'summary':_0x317dcd[_0x2740d5(0xde)]||_0x2740d5(0xb6),'activityLevel':_0x317dcd[_0x2740d5(0xdf)]||_0x2740d5(0xc8),'systemMode':_0x313bf4['currentSystemMode']};_0x313bf4[_0x2740d5(0xfb)][_0x2740d5(0xd0)](_0x475151);const _0x33f421=_0x313bf4['config']['ltmLtbWindowDays']||0x3c;_0x313bf4[_0x2740d5(0xfb)][_0x2740d5(0x96)]>_0x33f421&&_0x313bf4[_0x2740d5(0xfb)][_0x2740d5(0xa0)](0x0,_0x313bf4['dailyDigests'][_0x2740d5(0x96)]-_0x33f421);await _0x313bf4[_0x2740d5(0xaa)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x2740d5(0xa8)](_0x313bf4[_0x2740d5(0xfb)]),'ack':!![]}),_0x313bf4[_0x2740d5(0xac)]=[],await _0x313bf4['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x2740d5(0xa8)](_0x313bf4[_0x2740d5(0xac)]),'ack':!![]}),await _0x313bf4[_0x2740d5(0xaa)](LTM_DP_STATUS,{'val':_0x2740d5(0xe6),'ack':!![]});const _0x331c82='ðŸ“…\x20Daily\x20Digest:\x0a'+_0x317dcd[_0x2740d5(0xde)]+_0x2740d5(0xdd)+_0x317dcd[_0x2740d5(0xdf)];setup[_0x2740d5(0x82)](_0x313bf4,_0x331c82,![],![]);if(_0x313bf4[_0x2740d5(0xc3)]&&_0x226153)_0x226153[_0x2740d5(0xdc)](_0x313bf4,_0x2740d5(0xfa),{'digest':_0x475151});}catch(_0x38601d){_0x313bf4[_0x2740d5(0xbb)]['error'](_0x38601d[_0x2740d5(0x104)]);}}async function runBaselineDriftAnalysis(_0xf8fb69){const _0x326cb8=a0_0x39c29c;if(!_0xf8fb69[_0x326cb8(0xc3)]||!_0xf8fb69['geminiModel'])return;if(!canCallApi())return;const _0x3801d6=_0xf8fb69[_0x326cb8(0x9c)][_0x326cb8(0x85)]||0xe;if(_0xf8fb69['dailyDigests'][_0x326cb8(0x96)]<_0x3801d6+0x7){await _0xf8fb69['setStateAsync'](_0x326cb8(0xcc),{'val':_0x326cb8(0xb3),'ack':!![]});return;}const _0x23d5c0=_0xf8fb69['dailyDigests'][_0x326cb8(0x89)](-_0x3801d6),_0x5dca8f=_0xf8fb69[_0x326cb8(0xfb)][_0x326cb8(0x89)](0x0,_0xf8fb69[_0x326cb8(0xfb)][_0x326cb8(0x96)]-_0x3801d6),_0x2921c0=_0x326cb8(0xcb)+JSON[_0x326cb8(0xa8)](_0x5dca8f)+_0x326cb8(0xa1)+JSON[_0x326cb8(0xa8)](_0x23d5c0);try{updateApiTimestamp();const _0x2fea26=await _0xf8fb69[_0x326cb8(0xd7)][_0x326cb8(0xec)](_0x2921c0),_0x58f14e=JSON['parse'](_0x2fea26[_0x326cb8(0x88)][_0x326cb8(0x8f)]()['replace'](/```json|```/g,'')[_0x326cb8(0xcd)]());_0x58f14e[_0x326cb8(0xf8)]&&(await _0xf8fb69[_0x326cb8(0xaa)](_0x326cb8(0xcc),{'val':_0x58f14e['baselineDrift'],'ack':!![]}),await _0xf8fb69[_0x326cb8(0xaa)](_0x326cb8(0xb5),{'val':_0x58f14e[_0x326cb8(0xad)],'ack':!![]}),await _0xf8fb69[_0x326cb8(0xaa)]('LTM.driftAnalysis.lastCheck',{'val':Date[_0x326cb8(0x103)](),'ack':!![]}));}catch(_0x49b8e2){}}async function executeAutomationAction(_0x3eafbe){const _0x92ea5c=a0_0x39c29c;try{const _0x17a824=await _0x3eafbe[_0x92ea5c(0xbc)](_0x92ea5c(0x8a)),_0x2496f4=await _0x3eafbe[_0x92ea5c(0xbc)](_0x92ea5c(0xa6));if(_0x17a824&&_0x17a824['val']&&_0x2496f4){const _0x1b86da=_0x17a824['val'];let _0xfff911=_0x2496f4[_0x92ea5c(0x84)];try{_0xfff911=JSON['parse'](_0xfff911);}catch(_0x3ae2f2){}_0x3eafbe[_0x92ea5c(0xbb)][_0x92ea5c(0x9b)](_0x92ea5c(0xef)+_0x1b86da+_0x92ea5c(0xf4)+_0xfff911),await _0x3eafbe['setForeignStateAsync'](_0x1b86da,_0xfff911);}else _0x3eafbe['log'][_0x92ea5c(0xf2)](_0x92ea5c(0xea));}catch(_0x22c9ef){_0x3eafbe[_0x92ea5c(0xbb)]['error']('BUTLER\x20Execution\x20Error:\x20'+_0x22c9ef[_0x92ea5c(0x104)]);}}async function sendMorningBriefing(_0x4e12fc){const _0x4d00a6=a0_0x39c29c;if(!_0x4e12fc[_0x4d00a6(0xd7)]){_0x4e12fc[_0x4d00a6(0xbb)][_0x4d00a6(0xf2)](_0x4d00a6(0x86));return;}_0x4e12fc[_0x4d00a6(0xbb)][_0x4d00a6(0x9b)](_0x4d00a6(0xfc));try{updateApiTimestamp();const _0x1c97e7=_0x4d00a6(0xa5),_0x2be400=await _0x4e12fc[_0x4d00a6(0xd7)][_0x4d00a6(0xec)](_0x1c97e7),_0x10ea47=_0x2be400['response']['text']();_0x4e12fc[_0x4d00a6(0xbb)][_0x4d00a6(0x9b)]('ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20'+_0x10ea47['length']+').\x20Sending\x20notification...'),setup[_0x4d00a6(0x82)](_0x4e12fc,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x10ea47);}catch(_0x282371){_0x4e12fc[_0x4d00a6(0xbb)][_0x4d00a6(0xd4)](_0x4d00a6(0x9f)+_0x282371['message']);}}module[a0_0x39c29c(0xe9)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};