const a0_0xd6b02c=a0_0x4c14;(function(_0x201241,_0x13fae7){const _0x15b1a5=a0_0x4c14,_0x1acd6a=_0x201241();while(!![]){try{const _0x4aca3e=-parseInt(_0x15b1a5(0x1af))/0x1+-parseInt(_0x15b1a5(0x20c))/0x2*(parseInt(_0x15b1a5(0x1df))/0x3)+parseInt(_0x15b1a5(0x1c7))/0x4+parseInt(_0x15b1a5(0x214))/0x5+-parseInt(_0x15b1a5(0x227))/0x6*(parseInt(_0x15b1a5(0x1b1))/0x7)+-parseInt(_0x15b1a5(0x208))/0x8+parseInt(_0x15b1a5(0x222))/0x9;if(_0x4aca3e===_0x13fae7)break;else _0x1acd6a['push'](_0x1acd6a['shift']());}catch(_0x449b31){_0x1acd6a['push'](_0x1acd6a['shift']());}}}(a0_0x15e1,0x41891));const a0_0x5c122a=(function(){let _0x3abe3d=!![];return function(_0x527f69,_0x4a91b5){const _0x4ba293=_0x3abe3d?function(){const _0x43a606=a0_0x4c14;if(_0x4a91b5){const _0x634046=_0x4a91b5[_0x43a606(0x1bd)](_0x527f69,arguments);return _0x4a91b5=null,_0x634046;}}:function(){};return _0x3abe3d=![],_0x4ba293;};}()),a0_0x44b70e=a0_0x5c122a(this,function(){const _0x517923=a0_0x4c14;return a0_0x44b70e[_0x517923(0x200)]()[_0x517923(0x1e0)](_0x517923(0x223))[_0x517923(0x200)]()['constructor'](a0_0x44b70e)[_0x517923(0x1e0)](_0x517923(0x223));});a0_0x44b70e();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require(a0_0xd6b02c(0x21f)),GEMINI_MODEL=a0_0xd6b02c(0x1b0),LTM_DP_DAILY_DIGESTS=a0_0xd6b02c(0x1a4),LTM_DP_STATUS=a0_0xd6b02c(0x209),LTM_DP_RAW_LOG=a0_0xd6b02c(0x1c1),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':a0_0xd6b02c(0x1de),'family':a0_0xd6b02c(0x1f5),'single_comfort':a0_0xd6b02c(0x202),'security':a0_0xd6b02c(0x22a),'energy_saver':a0_0xd6b02c(0x1f6)};function canCallApi(){const _0x2ec4cf=a0_0xd6b02c,_0x22d977=Date[_0x2ec4cf(0x1b2)]();return _0x22d977-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0xc8533a=a0_0xd6b02c;lastGlobalApiCall=Date[_0xc8533a(0x1b2)]();}async function getWeatherContext(_0x4a2fc4){const _0x36bfe6=a0_0xd6b02c;if(!_0x4a2fc4[_0x36bfe6(0x1d2)][_0x36bfe6(0x1d6)]||!_0x4a2fc4[_0x36bfe6(0x1d2)][_0x36bfe6(0x1b3)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0xd28fd5=_0x4a2fc4[_0x36bfe6(0x1d2)][_0x36bfe6(0x1b3)];let _0xf99ba9=await _0x4a2fc4[_0x36bfe6(0x1f9)](_0xd28fd5+'.Current.Temperature');if(!_0xf99ba9)_0xf99ba9=await _0x4a2fc4[_0x36bfe6(0x1f9)](_0xd28fd5+_0x36bfe6(0x1e1));let _0x4d767e=await _0x4a2fc4[_0x36bfe6(0x1f9)](_0xd28fd5+_0x36bfe6(0x1f3));if(!_0x4d767e)_0x4d767e=await _0x4a2fc4[_0x36bfe6(0x1f9)](_0xd28fd5+_0x36bfe6(0x1a6));let _0x3df3f9=_0x36bfe6(0x1cb);const _0x5e2682=await _0x4a2fc4[_0x36bfe6(0x1f9)](_0xd28fd5+_0x36bfe6(0x1e7));if(_0x5e2682)_0x3df3f9=_0x5e2682[_0x36bfe6(0x1c2)]?_0x36bfe6(0x1ad):'Tag';if(_0xf99ba9&&_0x4d767e)return _0xf99ba9[_0x36bfe6(0x1c2)]+_0x36bfe6(0x1d1)+_0x4d767e[_0x36bfe6(0x1c2)]+',\x20LichtverhÃ¤ltnisse:\x20'+_0x3df3f9;}catch(_0xe27073){}return _0x36bfe6(0x1ab);}function a0_0x4c14(_0x1cb4dd,_0x44879b){const _0x522a3a=a0_0x15e1();return a0_0x4c14=function(_0x44b70e,_0x5c122a){_0x44b70e=_0x44b70e-0x1a2;let _0x15e1ea=_0x522a3a[_0x44b70e];return _0x15e1ea;},a0_0x4c14(_0x1cb4dd,_0x44879b);}function a0_0x15e1(){const _0x15a0f8=['530059tPiSku','models/gemini-flash-latest','1757PKrlEH','now','weatherInstance','isProVersion','analysisHistory','Keine\x20Details.','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','rawEventLog','toLocaleTimeString','push','aiPersona','livingContext','apply','stringify','generateContent','analysis.analysisHistory','LTM.rawEventLog','val','detected','description','isEmergency','.\x20EVENTS:\x20','1926632KiXHny','targetId','decision','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','Unbekannt','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','\x0aSTB:\x20','analysis.lastResult','analysis.automation.targetValue','alertReason','Â°C,\x20','config','Briefing\x20Error:\x20','.\x20EMERGENCY:\x20','geminiModel','useWeather','ðŸŒ…\x20Morning\x20Briefing:\x0a','setStateAsync','Traffic-Schutz\x20(Auto-Approved)','KI\x20offline\x20(Fallback)','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','LTM.driftAnalysis.baselineDrift','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','1323vsVCma','search','.forecast.current.temperature','send','automationProposal','currentSystemMode','dailyDigests','slice','.Current.IsNight','approved','analysis.automation.autoApply','.\x20KONTEXT:\x20','Skipped\x20(No\x20AI\x20or\x20Data)','debug','normal','lastAlertState','analysis.isAlert','âš ï¸\x20ALARM:\x20','ltmStbWindowDays','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','.Current.WeatherText','analysis.alertReason','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','log','.\x20SYSTEM_MODE:\x20','getForeignStateAsync',',\x20Wetter:\x20','LTM.driftAnalysis.driftDetails','Success','message','length','\x20Ã¼bersprungen\x20(Auto-Approved).','toString','warn','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','Gemini\x20Error:\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','Skipped\x20(Traffic)','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','targetValue','1486496JWdEBT','LTM.processingStatus','generic','getStateAsync','1532uvTQUu','analysis.automation.description','analysis.automation.patternDetected','ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','eventHistory','\x20->\x20','baselineDrift','parse','1739210aMcbHG','KI-Fehler\x20(Fallback)','summary','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','system.presenceWho','error','setForeignStateAsync',').\x20Sending\x20notification...','response','text','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','./setup','trim','info','6471108LJjhVf','(((.+)+)+)+$','activityLevel','Started...','isAlert','5412NFcnQE','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','splice','Sicherheit\x20geht\x20vor.','timestamp','sendNotification','LTM.dailyDigests','unshift','.forecast.current.state','ðŸ“…\x20Daily\x20Digest:\x0a','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','replace','\x0aAktivitÃ¤t:\x20','Wetterdaten\x20nicht\x20abrufbar','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','Nacht','N/A\x20(Learning)'];a0_0x15e1=function(){return _0x15a0f8;};return a0_0x15e1();}async function consultButler(_0x16dfdc,_0x15d20f,_0x580441,_0x8f1c09){const _0x263049=a0_0xd6b02c;if(!_0x16dfdc[_0x263049(0x1d5)])return{'approved':!![],'reason':_0x263049(0x1da)};const _0x8e1643=Date[_0x263049(0x1b2)]();if(decisionCache[_0x15d20f]&&_0x8e1643-decisionCache[_0x15d20f][_0x263049(0x1a2)]<CACHE_TTL_MS){const _0x183c22=decisionCache[_0x15d20f][_0x263049(0x1c9)];return _0x16dfdc['log'][_0x263049(0x1ec)](_0x263049(0x1ca)+_0x15d20f+_0x263049(0x211)+(_0x183c22[_0x263049(0x1e8)]?'OK':'NO')+'\x20('+_0x183c22['reason']+')'),_0x183c22;}if(!canCallApi())return _0x16dfdc[_0x263049(0x1f7)][_0x263049(0x1ec)]('ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20'+_0x15d20f+_0x263049(0x1ff)),{'approved':!![],'reason':_0x263049(0x1d9)};const _0x4e2ff0=new Date()[_0x263049(0x1b9)](),_0x57654f=await getWeatherContext(_0x16dfdc),_0x70620=PERSONA_MAPPING[_0x16dfdc[_0x263049(0x1d2)][_0x263049(0x1bb)]||_0x263049(0x20a)],_0x558bed=_0x263049(0x1db)+_0x4e2ff0+_0x263049(0x1fa)+_0x57654f+_0x263049(0x1a8)+(_0x8f1c09*0x64)['toFixed'](0x0)+'%)\x20nach\x20\x22'+_0x15d20f+_0x263049(0x1ac)+_0x580441+_0x263049(0x206)+_0x70620+_0x263049(0x21e);try{updateApiTimestamp();const _0x28aa79=await _0x16dfdc['geminiModel'][_0x263049(0x1bf)](_0x558bed),_0x4b39d4=_0x28aa79[_0x263049(0x21c)][_0x263049(0x21d)]()[_0x263049(0x1a9)](/```json|```/g,'')[_0x263049(0x220)](),_0x369fac=JSON[_0x263049(0x213)](_0x4b39d4);return decisionCache[_0x15d20f]={'decision':_0x369fac,'timestamp':_0x8e1643},_0x369fac;}catch(_0x373143){return _0x16dfdc[_0x263049(0x1f7)][_0x263049(0x201)]('ðŸ¤–\x20Butler\x20Brain\x20Error:\x20'+_0x373143[_0x263049(0x1fd)]),decisionCache[_0x15d20f]={'decision':{'approved':!![],'reason':_0x263049(0x215)},'timestamp':_0x8e1643-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x263049(0x215)};}}async function runGeminiAnalysis(_0x36bcde,_0x2e3c17=''){const _0x1bd397=a0_0xd6b02c;if(!_0x36bcde[_0x1bd397(0x1d5)])return;if(!canCallApi()){_0x36bcde[_0x1bd397(0x1f7)][_0x1bd397(0x1ec)]('ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x36bcde[_0x1bd397(0x210)][_0x1bd397(0x1fe)]===0x0)return;const _0x149bce=_0x36bcde[_0x1bd397(0x210)][_0x1bd397(0x1e6)](0x0,0xf),_0x106fd9=_0x36bcde[_0x1bd397(0x1e4)],_0xcdb80a=PERSONA_MAPPING[_0x36bcde[_0x1bd397(0x1d2)][_0x1bd397(0x1bb)]||_0x1bd397(0x20a)],_0x5ef317=_0x36bcde[_0x1bd397(0x1d2)][_0x1bd397(0x1bc)]||_0x1bd397(0x1b6);let _0x53f1f5=_0x1bd397(0x1cb);try{const _0xb77a4e=await _0x36bcde[_0x1bd397(0x20b)](_0x1bd397(0x218));if(_0xb77a4e&&_0xb77a4e[_0x1bd397(0x1c2)])_0x53f1f5=_0xb77a4e[_0x1bd397(0x1c2)];}catch(_0x31f8c9){}let _0xa8054e=![];try{const _0x379679=await _0x36bcde[_0x1bd397(0x20b)](_0x1bd397(0x1e9));if(_0x379679&&_0x379679['val'])_0xa8054e=!![];}catch(_0x2d0c24){}const _0xa13fe9=_0x1bd397(0x204)+_0xcdb80a+_0x1bd397(0x1ea)+_0x5ef317+_0x1bd397(0x1f8)+_0x106fd9+'.\x20ANWESEND:\x20'+_0x53f1f5+_0x1bd397(0x1c6)+JSON[_0x1bd397(0x1be)](_0x149bce)+_0x1bd397(0x1d4)+_0x2e3c17+_0x1bd397(0x1cc);try{updateApiTimestamp();const _0x139257=await _0x36bcde[_0x1bd397(0x1d5)][_0x1bd397(0x1bf)](_0xa13fe9),_0x4eb2bb=JSON['parse'](_0x139257[_0x1bd397(0x21c)][_0x1bd397(0x21d)]()['replace'](/```json|```/g,'')['trim']());await _0x36bcde[_0x1bd397(0x1d8)](_0x1bd397(0x1ce),{'val':JSON[_0x1bd397(0x1be)](_0x4eb2bb),'ack':!![]});if(_0x4eb2bb[_0x1bd397(0x216)])await _0x36bcde[_0x1bd397(0x1d8)]('analysis.activitySummary',{'val':_0x4eb2bb[_0x1bd397(0x216)],'ack':!![]});const _0x4ba4a2={'timestamp':Date[_0x1bd397(0x1b2)](),'id':Date['now']()[_0x1bd397(0x200)](),'analysis':{'activity':{'summary':_0x4eb2bb[_0x1bd397(0x216)],'isAlert':_0x4eb2bb[_0x1bd397(0x226)],'alertReason':_0x4eb2bb[_0x1bd397(0x1d0)]},'comfort':{'automationProposal':_0x4eb2bb[_0x1bd397(0x1e3)]}}};_0x36bcde[_0x1bd397(0x1b5)][_0x1bd397(0x1a5)](_0x4ba4a2);if(_0x36bcde[_0x1bd397(0x1b5)]['length']>0x32)_0x36bcde['analysisHistory']['pop']();await _0x36bcde[_0x1bd397(0x1d8)](_0x1bd397(0x1c0),{'val':JSON['stringify'](_0x36bcde[_0x1bd397(0x1b5)]),'ack':!![]});const _0x3dafd6=_0x4eb2bb['isAlert']||![];_0x3dafd6!==_0x36bcde[_0x1bd397(0x1ee)]&&(await _0x36bcde[_0x1bd397(0x1d8)](_0x1bd397(0x1ef),{'val':_0x3dafd6,'ack':!![]}),_0x36bcde[_0x1bd397(0x1ee)]=_0x3dafd6,_0x3dafd6&&(await _0x36bcde['setStateAsync'](_0x1bd397(0x1f4),{'val':_0x4eb2bb[_0x1bd397(0x1d0)],'ack':!![]}),setup['sendNotification'](_0x36bcde,_0x1bd397(0x1f0)+_0x4eb2bb[_0x1bd397(0x1d0)],![],_0x4eb2bb[_0x1bd397(0x1c5)])));if(_0x4eb2bb['automationProposal']&&_0x4eb2bb[_0x1bd397(0x1e3)][_0x1bd397(0x1c3)]){await _0x36bcde['setStateAsync'](_0x1bd397(0x20e),{'val':!![],'ack':!![]}),await _0x36bcde[_0x1bd397(0x1d8)](_0x1bd397(0x20d),{'val':_0x4eb2bb['automationProposal'][_0x1bd397(0x1c4)],'ack':!![]}),await _0x36bcde[_0x1bd397(0x1d8)]('analysis.automation.targetId',{'val':_0x4eb2bb['automationProposal'][_0x1bd397(0x1c8)],'ack':!![]}),await _0x36bcde[_0x1bd397(0x1d8)](_0x1bd397(0x1cf),{'val':JSON[_0x1bd397(0x1be)](_0x4eb2bb[_0x1bd397(0x1e3)][_0x1bd397(0x207)]),'ack':!![]});if(_0xa8054e)executeAutomationAction(_0x36bcde);}}catch(_0x314b7d){_0x36bcde['log'][_0x1bd397(0x219)](_0x1bd397(0x203)+_0x314b7d[_0x1bd397(0x1fd)]);}}async function createDailyDigest(_0x2f6ed2,_0x449b3e){const _0x1a9302=a0_0xd6b02c;if(!_0x2f6ed2['isProVersion'])return;if(!canCallApi()){await _0x2f6ed2['setStateAsync'](LTM_DP_STATUS,{'val':_0x1a9302(0x205),'ack':!![]});return;}await _0x2f6ed2['setStateAsync'](LTM_DP_STATUS,{'val':_0x1a9302(0x225),'ack':!![]});if(!_0x2f6ed2['geminiModel']||_0x2f6ed2[_0x1a9302(0x1b8)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x2f6ed2[_0x1a9302(0x1d8)](LTM_DP_STATUS,{'val':_0x1a9302(0x1eb),'ack':!![]});return;}const _0x46d6da=JSON[_0x1a9302(0x213)](JSON[_0x1a9302(0x1be)](_0x2f6ed2[_0x1a9302(0x1b8)])),_0x1c6663=_0x46d6da[_0x1a9302(0x1fe)],_0x499d22=_0x1a9302(0x228)+JSON[_0x1a9302(0x1be)](_0x46d6da);try{updateApiTimestamp();const _0x10d007=await _0x2f6ed2[_0x1a9302(0x1d5)][_0x1a9302(0x1bf)](_0x499d22),_0x6009d8=JSON[_0x1a9302(0x213)](_0x10d007[_0x1a9302(0x21c)][_0x1a9302(0x21d)]()[_0x1a9302(0x1a9)](/```json|```/g,'')[_0x1a9302(0x220)]()),_0x13dd07={'timestamp':new Date()['toISOString'](),'eventCount':_0x1c6663,'summary':_0x6009d8['summary']||'Digest','activityLevel':_0x6009d8[_0x1a9302(0x224)]||_0x1a9302(0x1ed),'systemMode':_0x2f6ed2[_0x1a9302(0x1e4)]};_0x2f6ed2[_0x1a9302(0x1e5)][_0x1a9302(0x1ba)](_0x13dd07);const _0x583bfe=_0x2f6ed2[_0x1a9302(0x1d2)]['ltmLtbWindowDays']||0x3c;_0x2f6ed2[_0x1a9302(0x1e5)][_0x1a9302(0x1fe)]>_0x583bfe&&_0x2f6ed2[_0x1a9302(0x1e5)][_0x1a9302(0x229)](0x0,_0x2f6ed2[_0x1a9302(0x1e5)]['length']-_0x583bfe);await _0x2f6ed2[_0x1a9302(0x1d8)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x2f6ed2[_0x1a9302(0x1e5)]),'ack':!![]}),_0x2f6ed2['rawEventLog']=[],await _0x2f6ed2[_0x1a9302(0x1d8)](LTM_DP_RAW_LOG,{'val':JSON[_0x1a9302(0x1be)](_0x2f6ed2[_0x1a9302(0x1b8)]),'ack':!![]}),await _0x2f6ed2['setStateAsync'](LTM_DP_STATUS,{'val':_0x1a9302(0x1fc),'ack':!![]});const _0x348977=_0x1a9302(0x1a7)+_0x6009d8[_0x1a9302(0x216)]+_0x1a9302(0x1aa)+_0x6009d8[_0x1a9302(0x224)];setup[_0x1a9302(0x1a3)](_0x2f6ed2,_0x348977,![],![]);if(_0x2f6ed2[_0x1a9302(0x1b4)]&&_0x449b3e)_0x449b3e[_0x1a9302(0x1e2)](_0x2f6ed2,'ANALYZE_HEALTH',{'digest':_0x13dd07});}catch(_0x1ad76e){_0x2f6ed2[_0x1a9302(0x1f7)][_0x1a9302(0x219)](_0x1ad76e[_0x1a9302(0x1fd)]);}}async function runBaselineDriftAnalysis(_0x2f3a9a){const _0x298566=a0_0xd6b02c;if(!_0x2f3a9a['isProVersion']||!_0x2f3a9a[_0x298566(0x1d5)])return;if(!canCallApi())return;const _0x32d56c=_0x2f3a9a[_0x298566(0x1d2)][_0x298566(0x1f1)]||0xe;if(_0x2f3a9a['dailyDigests']['length']<_0x32d56c+0x7){await _0x2f3a9a[_0x298566(0x1d8)](_0x298566(0x1dd),{'val':_0x298566(0x1ae),'ack':!![]});return;}const _0x346f79=_0x2f3a9a['dailyDigests'][_0x298566(0x1e6)](-_0x32d56c),_0x15746a=_0x2f3a9a[_0x298566(0x1e5)]['slice'](0x0,_0x2f3a9a[_0x298566(0x1e5)][_0x298566(0x1fe)]-_0x32d56c),_0x128031='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x298566(0x1be)](_0x15746a)+_0x298566(0x1cd)+JSON[_0x298566(0x1be)](_0x346f79);try{updateApiTimestamp();const _0x3a544b=await _0x2f3a9a[_0x298566(0x1d5)][_0x298566(0x1bf)](_0x128031),_0x4c66c6=JSON['parse'](_0x3a544b[_0x298566(0x21c)][_0x298566(0x21d)]()[_0x298566(0x1a9)](/```json|```/g,'')[_0x298566(0x220)]());_0x4c66c6['baselineDrift']&&(await _0x2f3a9a[_0x298566(0x1d8)]('LTM.driftAnalysis.baselineDrift',{'val':_0x4c66c6[_0x298566(0x212)],'ack':!![]}),await _0x2f3a9a[_0x298566(0x1d8)](_0x298566(0x1fb),{'val':_0x4c66c6['driftDetails'],'ack':!![]}),await _0x2f3a9a[_0x298566(0x1d8)]('LTM.driftAnalysis.lastCheck',{'val':Date[_0x298566(0x1b2)](),'ack':!![]}));}catch(_0x524931){}}async function executeAutomationAction(_0x495b89){const _0x47eae5=a0_0xd6b02c;try{const _0x2b3b09=await _0x495b89[_0x47eae5(0x20b)]('analysis.automation.targetId'),_0x3793fd=await _0x495b89[_0x47eae5(0x20b)](_0x47eae5(0x1cf));if(_0x2b3b09&&_0x2b3b09[_0x47eae5(0x1c2)]&&_0x3793fd){const _0xfe5ab8=_0x2b3b09[_0x47eae5(0x1c2)];let _0xfc7c49=_0x3793fd[_0x47eae5(0x1c2)];try{_0xfc7c49=JSON['parse'](_0xfc7c49);}catch(_0x367957){}_0x495b89[_0x47eae5(0x1f7)][_0x47eae5(0x221)](_0x47eae5(0x217)+_0xfe5ab8+'\x20=\x20'+_0xfc7c49),await _0x495b89[_0x47eae5(0x21a)](_0xfe5ab8,_0xfc7c49);}else _0x495b89[_0x47eae5(0x1f7)][_0x47eae5(0x201)](_0x47eae5(0x1f2));}catch(_0x18d08f){_0x495b89[_0x47eae5(0x1f7)]['error']('BUTLER\x20Execution\x20Error:\x20'+_0x18d08f['message']);}}async function sendMorningBriefing(_0x9c600b){const _0x942c84=a0_0xd6b02c;if(!_0x9c600b[_0x942c84(0x1d5)]){_0x9c600b[_0x942c84(0x1f7)][_0x942c84(0x201)](_0x942c84(0x1dc));return;}_0x9c600b['log']['info'](_0x942c84(0x20f));try{updateApiTimestamp();const _0xcc1844=_0x942c84(0x1b7),_0x459181=await _0x9c600b[_0x942c84(0x1d5)][_0x942c84(0x1bf)](_0xcc1844),_0x2efa26=_0x459181[_0x942c84(0x21c)][_0x942c84(0x21d)]();_0x9c600b[_0x942c84(0x1f7)]['info']('ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20'+_0x2efa26['length']+_0x942c84(0x21b)),setup['sendNotification'](_0x9c600b,_0x942c84(0x1d7)+_0x2efa26);}catch(_0x45395d){_0x9c600b[_0x942c84(0x1f7)][_0x942c84(0x219)](_0x942c84(0x1d3)+_0x45395d[_0x942c84(0x1fd)]);}}module['exports']={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};