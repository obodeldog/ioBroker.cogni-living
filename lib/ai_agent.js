const a0_0x528327=a0_0x3ca7;(function(_0x47d175,_0x12dc5c){const _0x588805=a0_0x3ca7,_0x120315=_0x47d175();while(!![]){try{const _0x13aca8=-parseInt(_0x588805(0x177))/0x1*(-parseInt(_0x588805(0x168))/0x2)+-parseInt(_0x588805(0x1af))/0x3+parseInt(_0x588805(0x19a))/0x4*(parseInt(_0x588805(0x125))/0x5)+parseInt(_0x588805(0x169))/0x6*(parseInt(_0x588805(0x1a7))/0x7)+parseInt(_0x588805(0x18f))/0x8+parseInt(_0x588805(0x18c))/0x9+-parseInt(_0x588805(0x13e))/0xa*(parseInt(_0x588805(0x15d))/0xb);if(_0x13aca8===_0x12dc5c)break;else _0x120315['push'](_0x120315['shift']());}catch(_0x34c395){_0x120315['push'](_0x120315['shift']());}}}(a0_0x5dfe,0xf0ea2));const a0_0x2a3d5b=(function(){let _0x34a8de=!![];return function(_0x508056,_0x162af3){const _0x1fdc65=_0x34a8de?function(){const _0x2e3f1d=a0_0x3ca7;if(_0x162af3){const _0x484ac8=_0x162af3[_0x2e3f1d(0x193)](_0x508056,arguments);return _0x162af3=null,_0x484ac8;}}:function(){};return _0x34a8de=![],_0x1fdc65;};}()),a0_0x4a81e3=a0_0x2a3d5b(this,function(){const _0x16d2a7=a0_0x3ca7;return a0_0x4a81e3[_0x16d2a7(0x16e)]()[_0x16d2a7(0x17d)]('(((.+)+)+)+$')['toString']()[_0x16d2a7(0x1a4)](a0_0x4a81e3)[_0x16d2a7(0x17d)]('(((.+)+)+)+$');});a0_0x4a81e3();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require(a0_0x528327(0x134)),GEMINI_MODEL=a0_0x528327(0x162),LTM_DP_DAILY_DIGESTS=a0_0x528327(0x144),LTM_DP_STATUS=a0_0x528327(0x1ad),LTM_DP_RAW_LOG=a0_0x528327(0x186),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;function a0_0x3ca7(_0x413b34,_0x3226aa){const _0x41fffa=a0_0x5dfe();return a0_0x3ca7=function(_0x4a81e3,_0x2a3d5b){_0x4a81e3=_0x4a81e3-0x125;let _0x5dfe87=_0x41fffa[_0x4a81e3];return _0x5dfe87;},a0_0x3ca7(_0x413b34,_0x3226aa);}const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':a0_0x528327(0x132),'family':'Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','single_comfort':a0_0x528327(0x13c),'security':a0_0x528327(0x185),'energy_saver':a0_0x528327(0x1a8)};function canCallApi(){const _0x158d3b=Date['now']();return _0x158d3b-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x2380e7=a0_0x528327;lastGlobalApiCall=Date[_0x2380e7(0x13d)]();}async function getWeatherContext(_0x444c11){const _0x218fe3=a0_0x528327;if(!_0x444c11[_0x218fe3(0x129)][_0x218fe3(0x199)]||!_0x444c11[_0x218fe3(0x129)][_0x218fe3(0x139)])return _0x218fe3(0x184);try{const _0x43b144=_0x444c11['config']['weatherInstance'];let _0x574def=await _0x444c11[_0x218fe3(0x136)](_0x43b144+'.Current.Temperature');if(!_0x574def)_0x574def=await _0x444c11['getForeignStateAsync'](_0x43b144+'.forecast.current.temperature');let _0x3a882a=await _0x444c11[_0x218fe3(0x136)](_0x43b144+_0x218fe3(0x1a5));if(!_0x3a882a)_0x3a882a=await _0x444c11[_0x218fe3(0x136)](_0x43b144+'.forecast.current.state');let _0x35228e=_0x218fe3(0x147);const _0x2ebf5f=await _0x444c11[_0x218fe3(0x136)](_0x43b144+_0x218fe3(0x1a0));if(_0x2ebf5f)_0x35228e=_0x2ebf5f[_0x218fe3(0x181)]?_0x218fe3(0x14d):_0x218fe3(0x17b);if(_0x574def&&_0x3a882a)return _0x574def['val']+_0x218fe3(0x126)+_0x3a882a[_0x218fe3(0x181)]+_0x218fe3(0x131)+_0x35228e;}catch(_0x13137c){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x3bc603,_0x398989,_0x48e1ce,_0x4c1974){const _0xf3663f=a0_0x528327;if(!_0x3bc603['geminiModel'])return{'approved':!![],'reason':_0xf3663f(0x141)};const _0x511af7=Date['now']();if(decisionCache[_0x398989]&&_0x511af7-decisionCache[_0x398989][_0xf3663f(0x138)]<CACHE_TTL_MS){const _0x10f341=decisionCache[_0x398989][_0xf3663f(0x179)];return _0x3bc603['log'][_0xf3663f(0x170)]('ü§ñ\x20Butler\x20Cache\x20Hit:\x20'+_0x398989+_0xf3663f(0x190)+(_0x10f341[_0xf3663f(0x142)]?'OK':'NO')+'\x20('+_0x10f341[_0xf3663f(0x127)]+')'),_0x10f341;}if(!canCallApi())return _0x3bc603[_0xf3663f(0x1a9)][_0xf3663f(0x170)]('ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20'+_0x398989+_0xf3663f(0x178)),{'approved':!![],'reason':_0xf3663f(0x153)};const _0x205e6b=new Date()[_0xf3663f(0x160)](),_0x33acb5=await getWeatherContext(_0x3bc603),_0x1fce81=PERSONA_MAPPING[_0x3bc603[_0xf3663f(0x129)]['aiPersona']||'generic'],_0x26f49f=_0xf3663f(0x148)+_0x205e6b+_0xf3663f(0x155)+_0x33acb5+_0xf3663f(0x198)+(_0x4c1974*0x64)['toFixed'](0x0)+_0xf3663f(0x13b)+_0x398989+'\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22'+_0x48e1ce+_0xf3663f(0x182)+_0x1fce81+_0xf3663f(0x143);try{updateApiTimestamp();const _0x148b69=await _0x3bc603['geminiModel'][_0xf3663f(0x156)](_0x26f49f),_0x4544d9=_0x148b69[_0xf3663f(0x19b)][_0xf3663f(0x137)]()[_0xf3663f(0x1b0)](/```json|```/g,'')[_0xf3663f(0x13a)](),_0x381a77=JSON[_0xf3663f(0x171)](_0x4544d9);return decisionCache[_0x398989]={'decision':_0x381a77,'timestamp':_0x511af7},_0x381a77;}catch(_0x4350b1){return _0x3bc603[_0xf3663f(0x1a9)][_0xf3663f(0x158)](_0xf3663f(0x159)+_0x4350b1[_0xf3663f(0x12c)]),decisionCache[_0x398989]={'decision':{'approved':!![],'reason':_0xf3663f(0x12a)},'timestamp':_0x511af7-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0xf3663f(0x12a)};}}async function runGeminiAnalysis(_0x4e117e,_0x2373c9=''){const _0x5618c3=a0_0x528327;if(!_0x4e117e[_0x5618c3(0x130)])return;if(!canCallApi()){_0x4e117e['log'][_0x5618c3(0x170)](_0x5618c3(0x12d));return;}if(_0x4e117e[_0x5618c3(0x14b)][_0x5618c3(0x189)]===0x0)return;const _0x52237e=_0x4e117e[_0x5618c3(0x14b)][_0x5618c3(0x173)](0x0,0xf),_0x17a80c=_0x4e117e[_0x5618c3(0x19d)],_0x26ea84=PERSONA_MAPPING[_0x4e117e[_0x5618c3(0x129)][_0x5618c3(0x197)]||_0x5618c3(0x149)],_0x256365=_0x4e117e['config'][_0x5618c3(0x17f)]||'Keine\x20Details.';let _0x56ce0a=_0x5618c3(0x147);try{const _0x24c72f=await _0x4e117e[_0x5618c3(0x163)](_0x5618c3(0x151));if(_0x24c72f&&_0x24c72f['val'])_0x56ce0a=_0x24c72f['val'];}catch(_0x30f79f){}let _0x358364=![];try{const _0x58f477=await _0x4e117e['getStateAsync'](_0x5618c3(0x174));if(_0x58f477&&_0x58f477[_0x5618c3(0x181)])_0x358364=!![];}catch(_0x4cf639){}const _0x33915d=_0x5618c3(0x165)+_0x26ea84+_0x5618c3(0x135)+_0x256365+_0x5618c3(0x167)+_0x17a80c+'.\x20ANWESEND:\x20'+_0x56ce0a+_0x5618c3(0x183)+JSON[_0x5618c3(0x166)](_0x52237e)+_0x5618c3(0x1ae)+_0x2373c9+_0x5618c3(0x194);try{updateApiTimestamp();const _0x29895c=await _0x4e117e[_0x5618c3(0x130)][_0x5618c3(0x156)](_0x33915d),_0x1cbaf1=JSON[_0x5618c3(0x171)](_0x29895c[_0x5618c3(0x19b)][_0x5618c3(0x137)]()[_0x5618c3(0x1b0)](/```json|```/g,'')[_0x5618c3(0x13a)]());await _0x4e117e[_0x5618c3(0x152)](_0x5618c3(0x17c),{'val':JSON[_0x5618c3(0x166)](_0x1cbaf1),'ack':!![]});if(_0x1cbaf1['summary'])await _0x4e117e[_0x5618c3(0x152)]('analysis.activitySummary',{'val':_0x1cbaf1[_0x5618c3(0x1a6)],'ack':!![]});const _0xd53da3={'timestamp':Date['now'](),'id':Date[_0x5618c3(0x13d)]()['toString'](),'analysis':{'activity':{'summary':_0x1cbaf1['summary'],'isAlert':_0x1cbaf1[_0x5618c3(0x17e)],'alertReason':_0x1cbaf1[_0x5618c3(0x12e)]},'comfort':{'automationProposal':_0x1cbaf1[_0x5618c3(0x146)]}}};_0x4e117e[_0x5618c3(0x195)][_0x5618c3(0x18d)](_0xd53da3);if(_0x4e117e[_0x5618c3(0x195)][_0x5618c3(0x189)]>0x32)_0x4e117e[_0x5618c3(0x195)][_0x5618c3(0x145)]();await _0x4e117e[_0x5618c3(0x152)](_0x5618c3(0x1ab),{'val':JSON[_0x5618c3(0x166)](_0x4e117e[_0x5618c3(0x195)]),'ack':!![]});const _0x201ff5=_0x1cbaf1[_0x5618c3(0x17e)]||![];_0x201ff5!==_0x4e117e[_0x5618c3(0x12b)]&&(await _0x4e117e[_0x5618c3(0x152)](_0x5618c3(0x175),{'val':_0x201ff5,'ack':!![]}),_0x4e117e['lastAlertState']=_0x201ff5,_0x201ff5&&(await _0x4e117e[_0x5618c3(0x152)](_0x5618c3(0x16d),{'val':_0x1cbaf1[_0x5618c3(0x12e)],'ack':!![]}),setup[_0x5618c3(0x133)](_0x4e117e,_0x5618c3(0x1a3)+_0x1cbaf1['alertReason'],![],_0x1cbaf1[_0x5618c3(0x17a)])));if(_0x1cbaf1['automationProposal']&&_0x1cbaf1[_0x5618c3(0x146)]['detected']){await _0x4e117e[_0x5618c3(0x152)](_0x5618c3(0x1ac),{'val':!![],'ack':!![]}),await _0x4e117e['setStateAsync'](_0x5618c3(0x188),{'val':_0x1cbaf1[_0x5618c3(0x146)]['description'],'ack':!![]}),await _0x4e117e['setStateAsync'](_0x5618c3(0x15c),{'val':_0x1cbaf1['automationProposal']['targetId'],'ack':!![]}),await _0x4e117e[_0x5618c3(0x152)](_0x5618c3(0x16c),{'val':JSON[_0x5618c3(0x166)](_0x1cbaf1[_0x5618c3(0x146)][_0x5618c3(0x176)]),'ack':!![]});if(_0x358364)executeAutomationAction(_0x4e117e);}}catch(_0x1117af){_0x4e117e[_0x5618c3(0x1a9)][_0x5618c3(0x192)]('Gemini\x20Error:\x20'+_0x1117af['message']);}}async function createDailyDigest(_0x218ad4,_0x17a4dd){const _0x3d4747=a0_0x528327;if(!_0x218ad4[_0x3d4747(0x18e)])return;if(!canCallApi()){await _0x218ad4['setStateAsync'](LTM_DP_STATUS,{'val':_0x3d4747(0x19e),'ack':!![]});return;}await _0x218ad4[_0x3d4747(0x152)](LTM_DP_STATUS,{'val':_0x3d4747(0x164),'ack':!![]});if(!_0x218ad4[_0x3d4747(0x130)]||_0x218ad4[_0x3d4747(0x161)][_0x3d4747(0x189)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x218ad4[_0x3d4747(0x152)](LTM_DP_STATUS,{'val':_0x3d4747(0x14f),'ack':!![]});return;}const _0x293b61=JSON[_0x3d4747(0x171)](JSON[_0x3d4747(0x166)](_0x218ad4[_0x3d4747(0x161)])),_0x595eef=_0x293b61[_0x3d4747(0x189)],_0x30f5fc=_0x3d4747(0x128)+JSON[_0x3d4747(0x166)](_0x293b61);try{updateApiTimestamp();const _0x4f7c18=await _0x218ad4['geminiModel'][_0x3d4747(0x156)](_0x30f5fc),_0x5ead3c=JSON['parse'](_0x4f7c18[_0x3d4747(0x19b)][_0x3d4747(0x137)]()[_0x3d4747(0x1b0)](/```json|```/g,'')[_0x3d4747(0x13a)]()),_0x16d073={'timestamp':new Date()[_0x3d4747(0x16f)](),'eventCount':_0x595eef,'summary':_0x5ead3c[_0x3d4747(0x1a6)]||_0x3d4747(0x172),'activityLevel':_0x5ead3c['activityLevel']||'normal','systemMode':_0x218ad4[_0x3d4747(0x19d)]};_0x218ad4['dailyDigests']['push'](_0x16d073);const _0x100821=_0x218ad4['config'][_0x3d4747(0x1a1)]||0x3c;_0x218ad4[_0x3d4747(0x191)][_0x3d4747(0x189)]>_0x100821&&_0x218ad4[_0x3d4747(0x191)][_0x3d4747(0x1b1)](0x0,_0x218ad4[_0x3d4747(0x191)][_0x3d4747(0x189)]-_0x100821);await _0x218ad4[_0x3d4747(0x152)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x3d4747(0x166)](_0x218ad4['dailyDigests']),'ack':!![]}),_0x218ad4[_0x3d4747(0x161)]=[],await _0x218ad4[_0x3d4747(0x152)](LTM_DP_RAW_LOG,{'val':JSON[_0x3d4747(0x166)](_0x218ad4['rawEventLog']),'ack':!![]}),await _0x218ad4[_0x3d4747(0x152)](LTM_DP_STATUS,{'val':_0x3d4747(0x15f),'ack':!![]});const _0x3d6080=_0x3d4747(0x14a)+_0x5ead3c[_0x3d4747(0x1a6)]+_0x3d4747(0x15a)+_0x5ead3c[_0x3d4747(0x18a)];setup[_0x3d4747(0x133)](_0x218ad4,_0x3d6080,![],![]);if(_0x218ad4[_0x3d4747(0x18e)]&&_0x17a4dd)_0x17a4dd['send'](_0x218ad4,_0x3d4747(0x19c),{'digest':_0x16d073});}catch(_0x57b98d){_0x218ad4[_0x3d4747(0x1a9)]['error'](_0x57b98d['message']);}}function a0_0x5dfe(){const _0x3fa493=['toString','toISOString','debug','parse','Digest','slice','analysis.automation.autoApply','analysis.isAlert','targetValue','1DWkRDL','\x20√ºbersprungen\x20(Auto-Approved).','decision','isEmergency','Tag','analysis.lastResult','search','isAlert','livingContext','üåÖ\x20Morning\x20Briefing:\x0a','val','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','.\x20EVENTS:\x20','Unbekannt\x20(Kein\x20Sensor)','Sicherheit\x20geht\x20vor.','LTM.rawEventLog','LTM.driftAnalysis.lastCheck','analysis.automation.description','length','activityLevel','ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','16951923NOCffH','unshift','isProVersion','11074264RJAdJF','\x20->\x20','dailyDigests','error','apply','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','analysisHistory',').\x20Sending\x20notification...','aiPersona','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','useWeather','53584eLUcax','response','ANALYZE_HEALTH','currentSystemMode','Skipped\x20(Traffic)','info','.Current.IsNight','ltmLtbWindowDays','driftDetails','‚ö†Ô∏è\x20ALARM:\x20','constructor','.Current.WeatherText','summary','10036453yHhlDe','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','log','\x20=\x20','analysis.analysisHistory','analysis.automation.patternDetected','LTM.processingStatus','.\x20EMERGENCY:\x20','917436hoKwAs','replace','splice','20wyHLxL','¬∞C,\x20','reason','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','config','KI-Fehler\x20(Fallback)','lastAlertState','message','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','alertReason','ltmStbWindowDays','geminiModel',',\x20Lichtverh√§ltnisse:\x20','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','sendNotification','./setup','.\x20KONTEXT:\x20','getForeignStateAsync','text','timestamp','weatherInstance','trim','%)\x20nach\x20\x22','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','now','3240wEcUVG','exports','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','KI\x20offline\x20(Fallback)','approved','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','LTM.dailyDigests','pop','automationProposal','Unbekannt','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','generic','üìÖ\x20Daily\x20Digest:\x0a','eventHistory','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','Nacht','BUTLER\x20Execution\x20Error:\x20','Skipped\x20(No\x20AI\x20or\x20Data)','Briefing\x20Error:\x20','system.presenceWho','setStateAsync','Traffic-Schutz\x20(Auto-Approved)','baselineDrift',',\x20Wetter:\x20','generateContent','LTM.driftAnalysis.baselineDrift','warn','ü§ñ\x20Butler\x20Brain\x20Error:\x20','\x0aAktivit√§t:\x20','N/A\x20(Learning)','analysis.automation.targetId','158257rkyXoU','LTM.driftAnalysis.driftDetails','Success','toLocaleTimeString','rawEventLog','models/gemini-flash-latest','getStateAsync','Started...','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','stringify','.\x20SYSTEM_MODE:\x20','2397586PkfvHH','6OQUxqp','üåÖ\x20Briefing\x20generated\x20(Length:\x20','\x0aSTB:\x20','analysis.automation.targetValue','analysis.alertReason'];a0_0x5dfe=function(){return _0x3fa493;};return a0_0x5dfe();}async function runBaselineDriftAnalysis(_0x1c9106){const _0x3f8acf=a0_0x528327;if(!_0x1c9106[_0x3f8acf(0x18e)]||!_0x1c9106[_0x3f8acf(0x130)])return;if(!canCallApi())return;const _0x56888c=_0x1c9106[_0x3f8acf(0x129)][_0x3f8acf(0x12f)]||0xe;if(_0x1c9106[_0x3f8acf(0x191)][_0x3f8acf(0x189)]<_0x56888c+0x7){await _0x1c9106[_0x3f8acf(0x152)](_0x3f8acf(0x157),{'val':_0x3f8acf(0x15b),'ack':!![]});return;}const _0x9f195d=_0x1c9106[_0x3f8acf(0x191)][_0x3f8acf(0x173)](-_0x56888c),_0xd34b0c=_0x1c9106[_0x3f8acf(0x191)]['slice'](0x0,_0x1c9106[_0x3f8acf(0x191)][_0x3f8acf(0x189)]-_0x56888c),_0x43cd4f='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x3f8acf(0x166)](_0xd34b0c)+_0x3f8acf(0x16b)+JSON[_0x3f8acf(0x166)](_0x9f195d);try{updateApiTimestamp();const _0x378d72=await _0x1c9106[_0x3f8acf(0x130)][_0x3f8acf(0x156)](_0x43cd4f),_0x1baa23=JSON[_0x3f8acf(0x171)](_0x378d72[_0x3f8acf(0x19b)][_0x3f8acf(0x137)]()[_0x3f8acf(0x1b0)](/```json|```/g,'')[_0x3f8acf(0x13a)]());_0x1baa23[_0x3f8acf(0x154)]&&(await _0x1c9106[_0x3f8acf(0x152)](_0x3f8acf(0x157),{'val':_0x1baa23['baselineDrift'],'ack':!![]}),await _0x1c9106['setStateAsync'](_0x3f8acf(0x15e),{'val':_0x1baa23[_0x3f8acf(0x1a2)],'ack':!![]}),await _0x1c9106[_0x3f8acf(0x152)](_0x3f8acf(0x187),{'val':Date['now'](),'ack':!![]}));}catch(_0x281738){}}async function executeAutomationAction(_0x8b6b0f){const _0x2c8a75=a0_0x528327;try{const _0x22839f=await _0x8b6b0f[_0x2c8a75(0x163)](_0x2c8a75(0x15c)),_0x43568a=await _0x8b6b0f['getStateAsync']('analysis.automation.targetValue');if(_0x22839f&&_0x22839f[_0x2c8a75(0x181)]&&_0x43568a){const _0x1cb6e2=_0x22839f['val'];let _0x252175=_0x43568a[_0x2c8a75(0x181)];try{_0x252175=JSON[_0x2c8a75(0x171)](_0x252175);}catch(_0x496b2c){}_0x8b6b0f['log']['info']('ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x1cb6e2+_0x2c8a75(0x1aa)+_0x252175),await _0x8b6b0f['setForeignStateAsync'](_0x1cb6e2,_0x252175);}else _0x8b6b0f['log']['warn'](_0x2c8a75(0x140));}catch(_0x39a0d6){_0x8b6b0f[_0x2c8a75(0x1a9)][_0x2c8a75(0x192)](_0x2c8a75(0x14e)+_0x39a0d6[_0x2c8a75(0x12c)]);}}async function sendMorningBriefing(_0x307f4e){const _0x428a0c=a0_0x528327;if(!_0x307f4e[_0x428a0c(0x130)]){_0x307f4e[_0x428a0c(0x1a9)][_0x428a0c(0x158)](_0x428a0c(0x18b));return;}_0x307f4e[_0x428a0c(0x1a9)]['info']('üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...');try{updateApiTimestamp();const _0x55a962=_0x428a0c(0x14c),_0x7c9e49=await _0x307f4e[_0x428a0c(0x130)][_0x428a0c(0x156)](_0x55a962),_0x2ffbb2=_0x7c9e49[_0x428a0c(0x19b)]['text']();_0x307f4e['log'][_0x428a0c(0x19f)](_0x428a0c(0x16a)+_0x2ffbb2[_0x428a0c(0x189)]+_0x428a0c(0x196)),setup[_0x428a0c(0x133)](_0x307f4e,_0x428a0c(0x180)+_0x2ffbb2);}catch(_0x5a388f){_0x307f4e['log'][_0x428a0c(0x192)](_0x428a0c(0x150)+_0x5a388f[_0x428a0c(0x12c)]);}}module[a0_0x528327(0x13f)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};