const a0_0x26c040=a0_0xf93f;(function(_0x58c92d,_0x132fcf){const _0x3cc2f6=a0_0xf93f,_0x1474a7=_0x58c92d();while(!![]){try{const _0x1b1fa9=parseInt(_0x3cc2f6(0x17c))/0x1+-parseInt(_0x3cc2f6(0x18c))/0x2*(parseInt(_0x3cc2f6(0x1e1))/0x3)+-parseInt(_0x3cc2f6(0x18f))/0x4+parseInt(_0x3cc2f6(0x16c))/0x5+parseInt(_0x3cc2f6(0x190))/0x6*(parseInt(_0x3cc2f6(0x1df))/0x7)+parseInt(_0x3cc2f6(0x19f))/0x8+parseInt(_0x3cc2f6(0x179))/0x9*(-parseInt(_0x3cc2f6(0x1be))/0xa);if(_0x1b1fa9===_0x132fcf)break;else _0x1474a7['push'](_0x1474a7['shift']());}catch(_0x52c608){_0x1474a7['push'](_0x1474a7['shift']());}}}(a0_0x5e34,0xda3b1));const a0_0x563c92=(function(){let _0x19b018=!![];return function(_0x4804ff,_0x1df458){const _0x29f0e5=_0x19b018?function(){const _0x496284=a0_0xf93f;if(_0x1df458){const _0x2ff580=_0x1df458[_0x496284(0x19b)](_0x4804ff,arguments);return _0x1df458=null,_0x2ff580;}}:function(){};return _0x19b018=![],_0x29f0e5;};}()),a0_0x241e08=a0_0x563c92(this,function(){const _0x529a35=a0_0xf93f;return a0_0x241e08[_0x529a35(0x192)]()['search'](_0x529a35(0x1bb))[_0x529a35(0x192)]()[_0x529a35(0x1db)](a0_0x241e08)[_0x529a35(0x17e)](_0x529a35(0x1bb));});a0_0x241e08();'use strict';const {GoogleGenerativeAI}=require(a0_0x26c040(0x187)),setup=require(a0_0x26c040(0x165)),GEMINI_MODEL=a0_0x26c040(0x1dd),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x26c040(0x181),LTM_DP_RAW_LOG=a0_0x26c040(0x19a),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;function a0_0x5e34(){const _0xd277bf=['search',',\x20Lichtverh√§ltnisse:\x20','timestamp','LTM.processingStatus','summary','analysis.automation.autoApply','LTM.driftAnalysis.driftDetails','lastAlertState','useWeather','@google/generative-ai','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','LTM.driftAnalysis.lastCheck','analysis.isAlert','setForeignStateAsync','4DFRxop','isAlert','.forecast.current.temperature','3174464vjcLze','8374218nTpfXq','%)\x20nach\x20\x22','toString','generic','ltmLtbWindowDays','weatherInstance','Unbekannt','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','analysis.automation.targetId','KI\x20offline\x20(Fallback)','LTM.rawEventLog','apply','targetId','Digest','ANALYZE_HEALTH','8633848zmqLMG','decision','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','Sicherheit\x20geht\x20vor.','analysisHistory','isEmergency','ü§ñ\x20Butler\x20Brain\x20Error:\x20','analysis.alertReason','Gemini\x20Error:\x20','\x20√ºbersprungen\x20(Auto-Approved).','Started...','.\x20EMERGENCY:\x20','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','.\x20KONTEXT:\x20','currentSystemMode','sendNotification','analysis.automation.targetValue','warn','.\x20EVENTS:\x20','.Current.WeatherText','rawEventLog','setStateAsync','automationProposal','analysis.automation.patternDetected',',\x20Wetter:\x20','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','analysis.automation.description','KI-Fehler\x20(Fallback)','(((.+)+)+)+$','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','val','59990YecHWl','detected','info','slice','toISOString','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','activityLevel','Nacht','\x20=\x20','dailyDigests','message','Skipped\x20(Traffic)','text','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','eventHistory','getStateAsync','.forecast.current.state','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','debug','parse','baselineDrift','Traffic-Schutz\x20(Auto-Approved)','Skipped\x20(No\x20AI\x20or\x20Data)','isProVersion','BUTLER\x20Execution\x20Error:\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','length','approved','livingContext','constructor','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','models/gemini-flash-latest','analysis.analysisHistory','7HcZfhL','generateContent','961698UhBMUY','\x0aSTB:\x20','aiPersona','push','log','toLocaleTimeString','now','replace','./setup','.Current.IsNight','Tag','error','trim','splice','getForeignStateAsync','709015beFpjB','ltmStbWindowDays','Briefing\x20Error:\x20','geminiModel','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','system.presenceWho','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','driftDetails','¬∞C,\x20','stringify','response','config','603BPOxnP','alertReason','unshift','113817HZOARL','LTM.driftAnalysis.baselineDrift'];a0_0x5e34=function(){return _0xd277bf;};return a0_0x5e34();}let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x26c040(0x188),'senior_aal':'PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':'Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','single_comfort':a0_0x26c040(0x1b8),'security':a0_0x26c040(0x1a2),'energy_saver':a0_0x26c040(0x1cf)};function a0_0xf93f(_0x7ece80,_0x520af4){const _0x38d375=a0_0x5e34();return a0_0xf93f=function(_0x241e08,_0x563c92){_0x241e08=_0x241e08-0x162;let _0x5e340e=_0x38d375[_0x241e08];return _0x5e340e;},a0_0xf93f(_0x7ece80,_0x520af4);}function canCallApi(){const _0x17d86a=Date['now']();return _0x17d86a-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x56abb4){const _0x2c71c7=a0_0x26c040;if(!_0x56abb4['config'][_0x2c71c7(0x186)]||!_0x56abb4[_0x2c71c7(0x178)][_0x2c71c7(0x195)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x2820df=_0x56abb4[_0x2c71c7(0x178)][_0x2c71c7(0x195)];let _0xa00be4=await _0x56abb4['getForeignStateAsync'](_0x2820df+'.Current.Temperature');if(!_0xa00be4)_0xa00be4=await _0x56abb4[_0x2c71c7(0x16b)](_0x2820df+_0x2c71c7(0x18e));let _0x322ae4=await _0x56abb4[_0x2c71c7(0x16b)](_0x2820df+_0x2c71c7(0x1b2));if(!_0x322ae4)_0x322ae4=await _0x56abb4[_0x2c71c7(0x16b)](_0x2820df+_0x2c71c7(0x1ce));let _0x9dc41c=_0x2c71c7(0x196);const _0x3d6cd2=await _0x56abb4['getForeignStateAsync'](_0x2820df+_0x2c71c7(0x166));if(_0x3d6cd2)_0x9dc41c=_0x3d6cd2['val']?_0x2c71c7(0x1c5):_0x2c71c7(0x167);if(_0xa00be4&&_0x322ae4)return _0xa00be4['val']+_0x2c71c7(0x175)+_0x322ae4['val']+_0x2c71c7(0x17f)+_0x9dc41c;}catch(_0x1a3772){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x32b37a,_0x5ea6df,_0x129a64,_0xd0def2){const _0x70f99f=a0_0x26c040;if(!_0x32b37a[_0x70f99f(0x16f)])return{'approved':!![],'reason':_0x70f99f(0x199)};const _0x24b009=Date[_0x70f99f(0x163)]();if(decisionCache[_0x5ea6df]&&_0x24b009-decisionCache[_0x5ea6df][_0x70f99f(0x180)]<CACHE_TTL_MS){const _0xc4631e=decisionCache[_0x5ea6df][_0x70f99f(0x1a0)];return _0x32b37a['log'][_0x70f99f(0x1d0)]('ü§ñ\x20Butler\x20Cache\x20Hit:\x20'+_0x5ea6df+'\x20->\x20'+(_0xc4631e[_0x70f99f(0x1d9)]?'OK':'NO')+'\x20('+_0xc4631e['reason']+')'),_0xc4631e;}if(!canCallApi())return _0x32b37a[_0x70f99f(0x1e5)][_0x70f99f(0x1d0)](_0x70f99f(0x1a1)+_0x5ea6df+_0x70f99f(0x1a8)),{'approved':!![],'reason':_0x70f99f(0x1d3)};const _0x1d86de=new Date()[_0x70f99f(0x162)](),_0x8977be=await getWeatherContext(_0x32b37a),_0x179f3b=PERSONA_MAPPING[_0x32b37a[_0x70f99f(0x178)][_0x70f99f(0x1e3)]||'generic'],_0x1233b2='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x1d86de+_0x70f99f(0x1b7)+_0x8977be+_0x70f99f(0x1c3)+(_0xd0def2*0x64)['toFixed'](0x0)+_0x70f99f(0x191)+_0x5ea6df+'\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22'+_0x129a64+_0x70f99f(0x1dc)+_0x179f3b+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x1b5e43=await _0x32b37a[_0x70f99f(0x16f)]['generateContent'](_0x1233b2),_0x33aac8=_0x1b5e43[_0x70f99f(0x177)][_0x70f99f(0x1ca)]()[_0x70f99f(0x164)](/```json|```/g,'')[_0x70f99f(0x169)](),_0x42b5f3=JSON[_0x70f99f(0x1d1)](_0x33aac8);return decisionCache[_0x5ea6df]={'decision':_0x42b5f3,'timestamp':_0x24b009},_0x42b5f3;}catch(_0x415103){return _0x32b37a[_0x70f99f(0x1e5)][_0x70f99f(0x1b0)](_0x70f99f(0x1a5)+_0x415103['message']),decisionCache[_0x5ea6df]={'decision':{'approved':!![],'reason':_0x70f99f(0x1ba)},'timestamp':_0x24b009-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x70f99f(0x1ba)};}}async function runGeminiAnalysis(_0x53d454,_0x2b8216=''){const _0x3ca73b=a0_0x26c040;if(!_0x53d454[_0x3ca73b(0x16f)])return;if(!canCallApi()){_0x53d454[_0x3ca73b(0x1e5)][_0x3ca73b(0x1d0)](_0x3ca73b(0x170));return;}if(_0x53d454[_0x3ca73b(0x1cc)][_0x3ca73b(0x1d8)]===0x0)return;const _0x3a0dbc=_0x53d454[_0x3ca73b(0x1cc)][_0x3ca73b(0x1c1)](0x0,0xf),_0x518d01=_0x53d454[_0x3ca73b(0x1ad)],_0x5e161a=PERSONA_MAPPING[_0x53d454[_0x3ca73b(0x178)][_0x3ca73b(0x1e3)]||_0x3ca73b(0x193)],_0x388259=_0x53d454[_0x3ca73b(0x178)][_0x3ca73b(0x1da)]||'Keine\x20Details.';let _0xfd9b28=_0x3ca73b(0x196);try{const _0x5010ca=await _0x53d454[_0x3ca73b(0x1cd)](_0x3ca73b(0x172));if(_0x5010ca&&_0x5010ca['val'])_0xfd9b28=_0x5010ca[_0x3ca73b(0x1bd)];}catch(_0x4cf819){}let _0x5739db=![];try{const _0x4e0f61=await _0x53d454[_0x3ca73b(0x1cd)](_0x3ca73b(0x183));if(_0x4e0f61&&_0x4e0f61[_0x3ca73b(0x1bd)])_0x5739db=!![];}catch(_0x14f2a1){}const _0x38507e=_0x3ca73b(0x1d7)+_0x5e161a+_0x3ca73b(0x1ac)+_0x388259+'.\x20SYSTEM_MODE:\x20'+_0x518d01+'.\x20ANWESEND:\x20'+_0xfd9b28+_0x3ca73b(0x1b1)+JSON[_0x3ca73b(0x176)](_0x3a0dbc)+_0x3ca73b(0x1aa)+_0x2b8216+_0x3ca73b(0x1ab);try{updateApiTimestamp();const _0xc6f3c4=await _0x53d454['geminiModel'][_0x3ca73b(0x1e0)](_0x38507e),_0x1cb20b=JSON[_0x3ca73b(0x1d1)](_0xc6f3c4[_0x3ca73b(0x177)]['text']()[_0x3ca73b(0x164)](/```json|```/g,'')[_0x3ca73b(0x169)]());await _0x53d454[_0x3ca73b(0x1b4)]('analysis.lastResult',{'val':JSON['stringify'](_0x1cb20b),'ack':!![]});if(_0x1cb20b[_0x3ca73b(0x182)])await _0x53d454[_0x3ca73b(0x1b4)]('analysis.activitySummary',{'val':_0x1cb20b[_0x3ca73b(0x182)],'ack':!![]});const _0x349bda={'timestamp':Date[_0x3ca73b(0x163)](),'id':Date['now']()['toString'](),'analysis':{'activity':{'summary':_0x1cb20b[_0x3ca73b(0x182)],'isAlert':_0x1cb20b[_0x3ca73b(0x18d)],'alertReason':_0x1cb20b[_0x3ca73b(0x17a)]},'comfort':{'automationProposal':_0x1cb20b[_0x3ca73b(0x1b5)]}}};_0x53d454[_0x3ca73b(0x1a3)][_0x3ca73b(0x17b)](_0x349bda);if(_0x53d454[_0x3ca73b(0x1a3)][_0x3ca73b(0x1d8)]>0x32)_0x53d454['analysisHistory']['pop']();await _0x53d454[_0x3ca73b(0x1b4)](_0x3ca73b(0x1de),{'val':JSON[_0x3ca73b(0x176)](_0x53d454['analysisHistory']),'ack':!![]});const _0xc5d20b=_0x1cb20b[_0x3ca73b(0x18d)]||![];_0xc5d20b!==_0x53d454[_0x3ca73b(0x185)]&&(await _0x53d454[_0x3ca73b(0x1b4)](_0x3ca73b(0x18a),{'val':_0xc5d20b,'ack':!![]}),_0x53d454[_0x3ca73b(0x185)]=_0xc5d20b,_0xc5d20b&&(await _0x53d454[_0x3ca73b(0x1b4)](_0x3ca73b(0x1a6),{'val':_0x1cb20b['alertReason'],'ack':!![]}),setup[_0x3ca73b(0x1ae)](_0x53d454,'‚ö†Ô∏è\x20ALARM:\x20'+_0x1cb20b['alertReason'],![],_0x1cb20b[_0x3ca73b(0x1a4)])));if(_0x1cb20b[_0x3ca73b(0x1b5)]&&_0x1cb20b[_0x3ca73b(0x1b5)][_0x3ca73b(0x1bf)]){await _0x53d454[_0x3ca73b(0x1b4)](_0x3ca73b(0x1b6),{'val':!![],'ack':!![]}),await _0x53d454[_0x3ca73b(0x1b4)](_0x3ca73b(0x1b9),{'val':_0x1cb20b[_0x3ca73b(0x1b5)]['description'],'ack':!![]}),await _0x53d454['setStateAsync']('analysis.automation.targetId',{'val':_0x1cb20b['automationProposal'][_0x3ca73b(0x19c)],'ack':!![]}),await _0x53d454[_0x3ca73b(0x1b4)](_0x3ca73b(0x1af),{'val':JSON[_0x3ca73b(0x176)](_0x1cb20b['automationProposal']['targetValue']),'ack':!![]});if(_0x5739db)executeAutomationAction(_0x53d454);}}catch(_0x434cfe){_0x53d454['log'][_0x3ca73b(0x168)](_0x3ca73b(0x1a7)+_0x434cfe[_0x3ca73b(0x1c8)]);}}async function createDailyDigest(_0x295ec5,_0x5e29ec){const _0x17ccef=a0_0x26c040;if(!_0x295ec5[_0x17ccef(0x1d5)])return;if(!canCallApi()){await _0x295ec5[_0x17ccef(0x1b4)](LTM_DP_STATUS,{'val':_0x17ccef(0x1c9),'ack':!![]});return;}await _0x295ec5[_0x17ccef(0x1b4)](LTM_DP_STATUS,{'val':_0x17ccef(0x1a9),'ack':!![]});if(!_0x295ec5['geminiModel']||_0x295ec5[_0x17ccef(0x1b3)][_0x17ccef(0x1d8)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x295ec5[_0x17ccef(0x1b4)](LTM_DP_STATUS,{'val':_0x17ccef(0x1d4),'ack':!![]});return;}const _0x68626a=JSON[_0x17ccef(0x1d1)](JSON[_0x17ccef(0x176)](_0x295ec5['rawEventLog'])),_0x56eb12=_0x68626a['length'],_0x4aec2f=_0x17ccef(0x1cb)+JSON[_0x17ccef(0x176)](_0x68626a);try{updateApiTimestamp();const _0x116e76=await _0x295ec5[_0x17ccef(0x16f)][_0x17ccef(0x1e0)](_0x4aec2f),_0x2b5daa=JSON[_0x17ccef(0x1d1)](_0x116e76[_0x17ccef(0x177)]['text']()[_0x17ccef(0x164)](/```json|```/g,'')[_0x17ccef(0x169)]()),_0x33a417={'timestamp':new Date()[_0x17ccef(0x1c2)](),'eventCount':_0x56eb12,'summary':_0x2b5daa['summary']||_0x17ccef(0x19d),'activityLevel':_0x2b5daa[_0x17ccef(0x1c4)]||'normal','systemMode':_0x295ec5[_0x17ccef(0x1ad)]};_0x295ec5[_0x17ccef(0x1c7)][_0x17ccef(0x1e4)](_0x33a417);const _0x1efbbd=_0x295ec5[_0x17ccef(0x178)][_0x17ccef(0x194)]||0x3c;_0x295ec5[_0x17ccef(0x1c7)]['length']>_0x1efbbd&&_0x295ec5[_0x17ccef(0x1c7)][_0x17ccef(0x16a)](0x0,_0x295ec5[_0x17ccef(0x1c7)][_0x17ccef(0x1d8)]-_0x1efbbd);await _0x295ec5[_0x17ccef(0x1b4)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x17ccef(0x176)](_0x295ec5[_0x17ccef(0x1c7)]),'ack':!![]}),_0x295ec5[_0x17ccef(0x1b3)]=[],await _0x295ec5[_0x17ccef(0x1b4)](LTM_DP_RAW_LOG,{'val':JSON[_0x17ccef(0x176)](_0x295ec5[_0x17ccef(0x1b3)]),'ack':!![]}),await _0x295ec5['setStateAsync'](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x295ec5[_0x17ccef(0x1d5)]&&_0x5e29ec)_0x5e29ec['send'](_0x295ec5,_0x17ccef(0x19e),{'digest':_0x33a417});}catch(_0x29a0e7){_0x295ec5[_0x17ccef(0x1e5)]['error'](_0x29a0e7['message']);}}async function runBaselineDriftAnalysis(_0x2fc14e){const _0x23129f=a0_0x26c040;if(!_0x2fc14e[_0x23129f(0x1d5)]||!_0x2fc14e['geminiModel'])return;if(!canCallApi())return;const _0x1cf8ba=_0x2fc14e['config'][_0x23129f(0x16d)]||0xe;if(_0x2fc14e[_0x23129f(0x1c7)][_0x23129f(0x1d8)]<_0x1cf8ba+0x7){await _0x2fc14e['setStateAsync']('LTM.driftAnalysis.baselineDrift',{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x4d79e7=_0x2fc14e['dailyDigests'][_0x23129f(0x1c1)](-_0x1cf8ba),_0x4dfeb3=_0x2fc14e[_0x23129f(0x1c7)][_0x23129f(0x1c1)](0x0,_0x2fc14e[_0x23129f(0x1c7)][_0x23129f(0x1d8)]-_0x1cf8ba),_0x366e29=_0x23129f(0x173)+JSON[_0x23129f(0x176)](_0x4dfeb3)+_0x23129f(0x1e2)+JSON['stringify'](_0x4d79e7);try{updateApiTimestamp();const _0x1ed32b=await _0x2fc14e[_0x23129f(0x16f)][_0x23129f(0x1e0)](_0x366e29),_0x39a267=JSON[_0x23129f(0x1d1)](_0x1ed32b[_0x23129f(0x177)]['text']()[_0x23129f(0x164)](/```json|```/g,'')[_0x23129f(0x169)]());_0x39a267[_0x23129f(0x1d2)]&&(await _0x2fc14e[_0x23129f(0x1b4)](_0x23129f(0x17d),{'val':_0x39a267[_0x23129f(0x1d2)],'ack':!![]}),await _0x2fc14e[_0x23129f(0x1b4)](_0x23129f(0x184),{'val':_0x39a267[_0x23129f(0x174)],'ack':!![]}),await _0x2fc14e[_0x23129f(0x1b4)](_0x23129f(0x189),{'val':Date[_0x23129f(0x163)](),'ack':!![]}));}catch(_0x162a72){}}async function executeAutomationAction(_0x1a1eea){const _0x3348bc=a0_0x26c040;try{const _0x57178=await _0x1a1eea['getStateAsync'](_0x3348bc(0x198)),_0x53749c=await _0x1a1eea[_0x3348bc(0x1cd)]('analysis.automation.targetValue');if(_0x57178&&_0x57178[_0x3348bc(0x1bd)]&&_0x53749c){const _0x388677=_0x57178[_0x3348bc(0x1bd)];let _0x9a0b0f=_0x53749c['val'];try{_0x9a0b0f=JSON[_0x3348bc(0x1d1)](_0x9a0b0f);}catch(_0x2569ab){}_0x1a1eea[_0x3348bc(0x1e5)][_0x3348bc(0x1c0)](_0x3348bc(0x197)+_0x388677+_0x3348bc(0x1c6)+_0x9a0b0f),await _0x1a1eea[_0x3348bc(0x18b)](_0x388677,_0x9a0b0f);}else _0x1a1eea[_0x3348bc(0x1e5)][_0x3348bc(0x1b0)](_0x3348bc(0x171));}catch(_0x50f53e){_0x1a1eea[_0x3348bc(0x1e5)]['error'](_0x3348bc(0x1d6)+_0x50f53e[_0x3348bc(0x1c8)]);}}async function sendMorningBriefing(_0x120854){const _0x46c432=a0_0x26c040;if(!_0x120854[_0x46c432(0x16f)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x9e39d1=_0x46c432(0x1bc),_0x531bc0=await _0x120854[_0x46c432(0x16f)][_0x46c432(0x1e0)](_0x9e39d1),_0x2af9bf=_0x531bc0[_0x46c432(0x177)][_0x46c432(0x1ca)]();setup[_0x46c432(0x1ae)](_0x120854,'üåÖ\x20Morning\x20Briefing:\x0a'+_0x2af9bf);}catch(_0x44c292){_0x120854[_0x46c432(0x1e5)][_0x46c432(0x168)](_0x46c432(0x16e)+_0x44c292['message']);}}module['exports']={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};