const a0_0x59462f=a0_0x4e67;(function(_0x3ffd13,_0x36f1ff){const _0x40521c=a0_0x4e67,_0x1b3d8a=_0x3ffd13();while(!![]){try{const _0x52e2ad=parseInt(_0x40521c(0xe9))/0x1*(-parseInt(_0x40521c(0xdd))/0x2)+parseInt(_0x40521c(0x103))/0x3*(parseInt(_0x40521c(0xd5))/0x4)+-parseInt(_0x40521c(0xd7))/0x5+-parseInt(_0x40521c(0x12b))/0x6+parseInt(_0x40521c(0xcd))/0x7*(-parseInt(_0x40521c(0x104))/0x8)+-parseInt(_0x40521c(0xfe))/0x9+parseInt(_0x40521c(0xe8))/0xa;if(_0x52e2ad===_0x36f1ff)break;else _0x1b3d8a['push'](_0x1b3d8a['shift']());}catch(_0x429aa3){_0x1b3d8a['push'](_0x1b3d8a['shift']());}}}(a0_0x21ab,0xd37ed));const a0_0x5bbe92=(function(){let _0x32afbe=!![];return function(_0xb536e4,_0xb8a9b8){const _0x59d56b=_0x32afbe?function(){const _0x99546b=a0_0x4e67;if(_0xb8a9b8){const _0x1fe574=_0xb8a9b8[_0x99546b(0x112)](_0xb536e4,arguments);return _0xb8a9b8=null,_0x1fe574;}}:function(){};return _0x32afbe=![],_0x59d56b;};}()),a0_0x3d3f32=a0_0x5bbe92(this,function(){const _0x5700b2=a0_0x4e67;return a0_0x3d3f32['toString']()[_0x5700b2(0x127)](_0x5700b2(0xf0))[_0x5700b2(0x110)]()[_0x5700b2(0x111)](a0_0x3d3f32)[_0x5700b2(0x127)](_0x5700b2(0xf0));});a0_0x3d3f32();'use strict';function a0_0x21ab(){const _0x5e380e=['KI-Fehler\x20(Fallback)','approved','summary','Success','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','description','slice','setStateAsync','Nacht','analysis.automation.targetId','error','LTM.rawEventLog','Skipped\x20(No\x20AI\x20or\x20Data)','.\x20SYSTEM_MODE:\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','analysis.automation.patternDetected','weatherInstance','ltmLtbWindowDays','.\x20EMERGENCY:\x20','models/gemini-flash-latest','useWeather','7734244OvoukP','analysis.alertReason','generateContent','.Current.Temperature','baselineDrift','toLocaleTimeString','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','analysis.lastResult','337612wEWqoS','unshift','1482690kPzYUS','parse','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','getStateAsync','timestamp','isEmergency','3100372nsdtIx','log','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','Unbekannt\x20(Kein\x20Sensor)','driftDetails','Started...','.forecast.current.temperature','replace','Tag','response','48001820RhEcEA','1qisnUn','system.presenceWho','analysisHistory','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','./setup','config','pop','(((.+)+)+)+$','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','debug','lastAlertState','decision','Skipped\x20(Traffic)','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','automationProposal','KI\x20offline\x20(Fallback)','trim','text','.\x20EVENTS:\x20','stringify','\x20->\x20','6977736vYGwSf','getForeignStateAsync','reason','analysis.automation.targetValue','warn','51frvaow','8NALJEt','.\x20KONTEXT:\x20','@google/generative-ai','isProVersion','rawEventLog','length','alertReason','Traffic-Schutz\x20(Auto-Approved)','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','setForeignStateAsync','Unbekannt','Wetterdaten\x20nicht\x20abrufbar','toString','constructor','apply','ANALYZE_HEALTH','LTM.driftAnalysis.baselineDrift','isAlert','analysis.isAlert','LTM.driftAnalysis.lastCheck','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.',',\x20LichtverhÃ¤ltnisse:\x20','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','message','ltmStbWindowDays','toISOString','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','âš ï¸\x20ALARM:\x20','dailyDigests','push','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','%)\x20nach\x20\x22','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','eventHistory','search','LTM.driftAnalysis.driftDetails','targetValue','now','9850968exbgKN','.forecast.current.state','analysis.automation.description','currentSystemMode','\x0aSTB:\x20','Keine\x20Details.','activityLevel','geminiModel','Digest','aiPersona','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','\x20=\x20','.\x20ANWESEND:\x20','generic','sendNotification','LTM.processingStatus','val','.Current.WeatherText','Sicherheit\x20geht\x20vor.','Gemini\x20Error:\x20'];a0_0x21ab=function(){return _0x5e380e;};return a0_0x21ab();}const {GoogleGenerativeAI}=require(a0_0x59462f(0x106)),setup=require(a0_0x59462f(0xed)),GEMINI_MODEL=a0_0x59462f(0xcb),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x59462f(0xb3),LTM_DP_RAW_LOG=a0_0x59462f(0xc3),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x59462f(0x10c),'senior_aal':a0_0x59462f(0x118),'family':a0_0x59462f(0xec),'single_comfort':a0_0x59462f(0xd9),'security':a0_0x59462f(0xb6),'energy_saver':a0_0x59462f(0xf6)};function canCallApi(){const _0x5f1dcc=a0_0x59462f,_0x10748d=Date[_0x5f1dcc(0x12a)]();return _0x10748d-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x4d2194=a0_0x59462f;lastGlobalApiCall=Date[_0x4d2194(0x12a)]();}function a0_0x4e67(_0x4b0d15,_0x2ecb44){const _0x20acad=a0_0x21ab();return a0_0x4e67=function(_0x3d3f32,_0x5bbe92){_0x3d3f32=_0x3d3f32-0xb1;let _0x21abe3=_0x20acad[_0x3d3f32];return _0x21abe3;},a0_0x4e67(_0x4b0d15,_0x2ecb44);}async function getWeatherContext(_0x5b4fa1){const _0x1cc818=a0_0x59462f;if(!_0x5b4fa1[_0x1cc818(0xee)][_0x1cc818(0xcc)]||!_0x5b4fa1[_0x1cc818(0xee)]['weatherInstance'])return _0x1cc818(0xe1);try{const _0x3f0b02=_0x5b4fa1['config'][_0x1cc818(0xc8)];let _0x623d2d=await _0x5b4fa1[_0x1cc818(0xff)](_0x3f0b02+_0x1cc818(0xd0));if(!_0x623d2d)_0x623d2d=await _0x5b4fa1['getForeignStateAsync'](_0x3f0b02+_0x1cc818(0xe4));let _0x1047d3=await _0x5b4fa1['getForeignStateAsync'](_0x3f0b02+_0x1cc818(0xb5));if(!_0x1047d3)_0x1047d3=await _0x5b4fa1['getForeignStateAsync'](_0x3f0b02+_0x1cc818(0x12c));let _0x26d9bb=_0x1cc818(0x10e);const _0x4ae4fa=await _0x5b4fa1[_0x1cc818(0xff)](_0x3f0b02+'.Current.IsNight');if(_0x4ae4fa)_0x26d9bb=_0x4ae4fa[_0x1cc818(0xb4)]?_0x1cc818(0xc0):_0x1cc818(0xe6);if(_0x623d2d&&_0x1047d3)return _0x623d2d[_0x1cc818(0xb4)]+'Â°C,\x20'+_0x1047d3[_0x1cc818(0xb4)]+_0x1cc818(0x119)+_0x26d9bb;}catch(_0x583741){}return _0x1cc818(0x10f);}async function consultButler(_0x55eba3,_0x287e94,_0x2460b3,_0x1e6987){const _0x3f3e6c=a0_0x59462f;if(!_0x55eba3[_0x3f3e6c(0x132)])return{'approved':!![],'reason':_0x3f3e6c(0xf8)};const _0x383be9=Date[_0x3f3e6c(0x12a)]();if(decisionCache[_0x287e94]&&_0x383be9-decisionCache[_0x287e94][_0x3f3e6c(0xdb)]<CACHE_TTL_MS){const _0x115da6=decisionCache[_0x287e94][_0x3f3e6c(0xf4)];return _0x55eba3[_0x3f3e6c(0xde)][_0x3f3e6c(0xf2)](_0x3f3e6c(0xf1)+_0x287e94+_0x3f3e6c(0xfd)+(_0x115da6[_0x3f3e6c(0xb9)]?'OK':'NO')+'\x20('+_0x115da6[_0x3f3e6c(0x100)]+')'),_0x115da6;}if(!canCallApi())return _0x55eba3[_0x3f3e6c(0xde)][_0x3f3e6c(0xf2)](_0x3f3e6c(0x11a)+_0x287e94+'\x20Ã¼bersprungen\x20(Auto-Approved).'),{'approved':!![],'reason':_0x3f3e6c(0x10b)};const _0x4e9344=new Date()[_0x3f3e6c(0xd2)](),_0x5404b6=await getWeatherContext(_0x55eba3),_0x864b56=PERSONA_MAPPING[_0x55eba3[_0x3f3e6c(0xee)]['aiPersona']||_0x3f3e6c(0xb1)],_0x3b30f1=_0x3f3e6c(0x11f)+_0x4e9344+',\x20Wetter:\x20'+_0x5404b6+_0x3f3e6c(0x137)+(_0x1e6987*0x64)['toFixed'](0x0)+_0x3f3e6c(0x124)+_0x287e94+_0x3f3e6c(0xdf)+_0x2460b3+_0x3f3e6c(0xe0)+_0x864b56+_0x3f3e6c(0x123);try{updateApiTimestamp();const _0x3cfb87=await _0x55eba3['geminiModel'][_0x3f3e6c(0xcf)](_0x3b30f1),_0x228a19=_0x3cfb87[_0x3f3e6c(0xe7)]['text']()[_0x3f3e6c(0xe5)](/```json|```/g,'')[_0x3f3e6c(0xf9)](),_0x573497=JSON[_0x3f3e6c(0xd8)](_0x228a19);return decisionCache[_0x287e94]={'decision':_0x573497,'timestamp':_0x383be9},_0x573497;}catch(_0x822e55){return _0x55eba3[_0x3f3e6c(0xde)][_0x3f3e6c(0x102)](_0x3f3e6c(0x11b)+_0x822e55[_0x3f3e6c(0x11c)]),decisionCache[_0x287e94]={'decision':{'approved':!![],'reason':_0x3f3e6c(0xb8)},'timestamp':_0x383be9-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x3f3e6c(0xb8)};}}async function runGeminiAnalysis(_0x1071d6,_0x59f06f=''){const _0x6883d4=a0_0x59462f;if(!_0x1071d6[_0x6883d4(0x132)])return;if(!canCallApi()){_0x1071d6['log'][_0x6883d4(0xf2)](_0x6883d4(0xd3));return;}if(_0x1071d6[_0x6883d4(0x126)][_0x6883d4(0x109)]===0x0)return;const _0x4d4f84=_0x1071d6['eventHistory'][_0x6883d4(0xbe)](0x0,0xf),_0xd04d5b=_0x1071d6['currentSystemMode'],_0x1e3fff=PERSONA_MAPPING[_0x1071d6[_0x6883d4(0xee)][_0x6883d4(0x134)]||'generic'],_0x184441=_0x1071d6[_0x6883d4(0xee)]['livingContext']||_0x6883d4(0x130);let _0x4c8602='Unbekannt';try{const _0x222cb2=await _0x1071d6['getStateAsync'](_0x6883d4(0xea));if(_0x222cb2&&_0x222cb2[_0x6883d4(0xb4)])_0x4c8602=_0x222cb2[_0x6883d4(0xb4)];}catch(_0x4f21b1){}let _0x2a8cd0=![];try{const _0x1e1b52=await _0x1071d6[_0x6883d4(0xda)]('analysis.automation.autoApply');if(_0x1e1b52&&_0x1e1b52[_0x6883d4(0xb4)])_0x2a8cd0=!![];}catch(_0x2cf218){}const _0x5b2255=_0x6883d4(0xc6)+_0x1e3fff+_0x6883d4(0x105)+_0x184441+_0x6883d4(0xc5)+_0xd04d5b+_0x6883d4(0x13a)+_0x4c8602+_0x6883d4(0xfb)+JSON['stringify'](_0x4d4f84)+_0x6883d4(0xca)+_0x59f06f+_0x6883d4(0x125);try{updateApiTimestamp();const _0x45fe4c=await _0x1071d6[_0x6883d4(0x132)][_0x6883d4(0xcf)](_0x5b2255),_0x300eef=JSON[_0x6883d4(0xd8)](_0x45fe4c['response'][_0x6883d4(0xfa)]()['replace'](/```json|```/g,'')[_0x6883d4(0xf9)]());await _0x1071d6[_0x6883d4(0xbf)](_0x6883d4(0xd4),{'val':JSON['stringify'](_0x300eef),'ack':!![]});if(_0x300eef[_0x6883d4(0xba)])await _0x1071d6[_0x6883d4(0xbf)]('analysis.activitySummary',{'val':_0x300eef[_0x6883d4(0xba)],'ack':!![]});const _0x3172c9={'timestamp':Date['now'](),'id':Date[_0x6883d4(0x12a)]()[_0x6883d4(0x110)](),'analysis':{'activity':{'summary':_0x300eef[_0x6883d4(0xba)],'isAlert':_0x300eef[_0x6883d4(0x115)],'alertReason':_0x300eef[_0x6883d4(0x10a)]},'comfort':{'automationProposal':_0x300eef[_0x6883d4(0xf7)]}}};_0x1071d6[_0x6883d4(0xeb)][_0x6883d4(0xd6)](_0x3172c9);if(_0x1071d6[_0x6883d4(0xeb)]['length']>0x32)_0x1071d6[_0x6883d4(0xeb)][_0x6883d4(0xef)]();await _0x1071d6[_0x6883d4(0xbf)]('analysis.analysisHistory',{'val':JSON[_0x6883d4(0xfc)](_0x1071d6[_0x6883d4(0xeb)]),'ack':!![]});const _0x355cb1=_0x300eef[_0x6883d4(0x115)]||![];_0x355cb1!==_0x1071d6['lastAlertState']&&(await _0x1071d6[_0x6883d4(0xbf)](_0x6883d4(0x116),{'val':_0x355cb1,'ack':!![]}),_0x1071d6[_0x6883d4(0xf3)]=_0x355cb1,_0x355cb1&&(await _0x1071d6[_0x6883d4(0xbf)](_0x6883d4(0xce),{'val':_0x300eef[_0x6883d4(0x10a)],'ack':!![]}),setup['sendNotification'](_0x1071d6,_0x6883d4(0x120)+_0x300eef[_0x6883d4(0x10a)],![],_0x300eef[_0x6883d4(0xdc)])));if(_0x300eef[_0x6883d4(0xf7)]&&_0x300eef[_0x6883d4(0xf7)]['detected']){await _0x1071d6['setStateAsync'](_0x6883d4(0xc7),{'val':!![],'ack':!![]}),await _0x1071d6[_0x6883d4(0xbf)](_0x6883d4(0x12d),{'val':_0x300eef[_0x6883d4(0xf7)][_0x6883d4(0xbd)],'ack':!![]}),await _0x1071d6[_0x6883d4(0xbf)](_0x6883d4(0xc1),{'val':_0x300eef[_0x6883d4(0xf7)]['targetId'],'ack':!![]}),await _0x1071d6[_0x6883d4(0xbf)](_0x6883d4(0x101),{'val':JSON[_0x6883d4(0xfc)](_0x300eef['automationProposal'][_0x6883d4(0x129)]),'ack':!![]});if(_0x2a8cd0)executeAutomationAction(_0x1071d6);}}catch(_0x14bbe6){_0x1071d6[_0x6883d4(0xde)][_0x6883d4(0xc2)](_0x6883d4(0xb7)+_0x14bbe6[_0x6883d4(0x11c)]);}}async function createDailyDigest(_0x1adbd9,_0x309018){const _0x586f6c=a0_0x59462f;if(!_0x1adbd9[_0x586f6c(0x107)])return;if(!canCallApi()){await _0x1adbd9[_0x586f6c(0xbf)](LTM_DP_STATUS,{'val':_0x586f6c(0xf5),'ack':!![]});return;}await _0x1adbd9[_0x586f6c(0xbf)](LTM_DP_STATUS,{'val':_0x586f6c(0xe3),'ack':!![]});if(!_0x1adbd9[_0x586f6c(0x132)]||_0x1adbd9[_0x586f6c(0x108)][_0x586f6c(0x109)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x1adbd9['setStateAsync'](LTM_DP_STATUS,{'val':_0x586f6c(0xc4),'ack':!![]});return;}const _0x564dfd=JSON[_0x586f6c(0xd8)](JSON[_0x586f6c(0xfc)](_0x1adbd9[_0x586f6c(0x108)])),_0x473e2c=_0x564dfd['length'],_0x712425=_0x586f6c(0x138)+JSON[_0x586f6c(0xfc)](_0x564dfd);try{updateApiTimestamp();const _0x5ade15=await _0x1adbd9[_0x586f6c(0x132)][_0x586f6c(0xcf)](_0x712425),_0x6828f0=JSON[_0x586f6c(0xd8)](_0x5ade15[_0x586f6c(0xe7)][_0x586f6c(0xfa)]()[_0x586f6c(0xe5)](/```json|```/g,'')[_0x586f6c(0xf9)]()),_0x57bfe6={'timestamp':new Date()[_0x586f6c(0x11e)](),'eventCount':_0x473e2c,'summary':_0x6828f0[_0x586f6c(0xba)]||_0x586f6c(0x133),'activityLevel':_0x6828f0[_0x586f6c(0x131)]||'normal','systemMode':_0x1adbd9[_0x586f6c(0x12e)]};_0x1adbd9[_0x586f6c(0x121)][_0x586f6c(0x122)](_0x57bfe6);const _0x5bcb97=_0x1adbd9[_0x586f6c(0xee)][_0x586f6c(0xc9)]||0x3c;_0x1adbd9[_0x586f6c(0x121)][_0x586f6c(0x109)]>_0x5bcb97&&_0x1adbd9[_0x586f6c(0x121)]['splice'](0x0,_0x1adbd9['dailyDigests'][_0x586f6c(0x109)]-_0x5bcb97);await _0x1adbd9[_0x586f6c(0xbf)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x1adbd9[_0x586f6c(0x121)]),'ack':!![]}),_0x1adbd9[_0x586f6c(0x108)]=[],await _0x1adbd9['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x586f6c(0xfc)](_0x1adbd9['rawEventLog']),'ack':!![]}),await _0x1adbd9[_0x586f6c(0xbf)](LTM_DP_STATUS,{'val':_0x586f6c(0xbb),'ack':!![]});if(_0x1adbd9['isProVersion']&&_0x309018)_0x309018['send'](_0x1adbd9,_0x586f6c(0x113),{'digest':_0x57bfe6});}catch(_0x4a2dbb){_0x1adbd9[_0x586f6c(0xde)][_0x586f6c(0xc2)](_0x4a2dbb[_0x586f6c(0x11c)]);}}async function runBaselineDriftAnalysis(_0x208c59){const _0x1b5be8=a0_0x59462f;if(!_0x208c59['isProVersion']||!_0x208c59[_0x1b5be8(0x132)])return;if(!canCallApi())return;const _0x4eb9db=_0x208c59[_0x1b5be8(0xee)][_0x1b5be8(0x11d)]||0xe;if(_0x208c59['dailyDigests'][_0x1b5be8(0x109)]<_0x4eb9db+0x7){await _0x208c59[_0x1b5be8(0xbf)](_0x1b5be8(0x114),{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x4d318f=_0x208c59[_0x1b5be8(0x121)][_0x1b5be8(0xbe)](-_0x4eb9db),_0x2d93f7=_0x208c59[_0x1b5be8(0x121)][_0x1b5be8(0xbe)](0x0,_0x208c59['dailyDigests'][_0x1b5be8(0x109)]-_0x4eb9db),_0x536ab1=_0x1b5be8(0x135)+JSON[_0x1b5be8(0xfc)](_0x2d93f7)+_0x1b5be8(0x12f)+JSON[_0x1b5be8(0xfc)](_0x4d318f);try{updateApiTimestamp();const _0x35311f=await _0x208c59[_0x1b5be8(0x132)][_0x1b5be8(0xcf)](_0x536ab1),_0x29c9ff=JSON[_0x1b5be8(0xd8)](_0x35311f[_0x1b5be8(0xe7)]['text']()[_0x1b5be8(0xe5)](/```json|```/g,'')[_0x1b5be8(0xf9)]());_0x29c9ff[_0x1b5be8(0xd1)]&&(await _0x208c59['setStateAsync']('LTM.driftAnalysis.baselineDrift',{'val':_0x29c9ff['baselineDrift'],'ack':!![]}),await _0x208c59[_0x1b5be8(0xbf)](_0x1b5be8(0x128),{'val':_0x29c9ff[_0x1b5be8(0xe2)],'ack':!![]}),await _0x208c59[_0x1b5be8(0xbf)](_0x1b5be8(0x117),{'val':Date[_0x1b5be8(0x12a)](),'ack':!![]}));}catch(_0x517ecd){}}async function executeAutomationAction(_0x502d46){const _0x22ecc2=a0_0x59462f;try{const _0x269f97=await _0x502d46[_0x22ecc2(0xda)](_0x22ecc2(0xc1)),_0x32ce53=await _0x502d46['getStateAsync'](_0x22ecc2(0x101));if(_0x269f97&&_0x269f97['val']&&_0x32ce53){const _0x7887b5=_0x269f97[_0x22ecc2(0xb4)];let _0x3dd82b=_0x32ce53[_0x22ecc2(0xb4)];try{_0x3dd82b=JSON['parse'](_0x3dd82b);}catch(_0x245b14){}_0x502d46[_0x22ecc2(0xde)]['info']('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x7887b5+_0x22ecc2(0x139)+_0x3dd82b),await _0x502d46[_0x22ecc2(0x10d)](_0x7887b5,_0x3dd82b);}else _0x502d46[_0x22ecc2(0xde)][_0x22ecc2(0x102)](_0x22ecc2(0xbc));}catch(_0x58a4e5){_0x502d46[_0x22ecc2(0xde)][_0x22ecc2(0xc2)]('BUTLER\x20Execution\x20Error:\x20'+_0x58a4e5['message']);}}async function sendMorningBriefing(_0x34ca7d){const _0x52ce29=a0_0x59462f;if(!_0x34ca7d[_0x52ce29(0x132)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x3de927=_0x52ce29(0x136),_0x3fc670=await _0x34ca7d['geminiModel'][_0x52ce29(0xcf)](_0x3de927),_0x2d08cb=_0x3fc670[_0x52ce29(0xe7)][_0x52ce29(0xfa)]();setup[_0x52ce29(0xb2)](_0x34ca7d,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x2d08cb);}catch(_0x12d283){_0x34ca7d[_0x52ce29(0xde)][_0x52ce29(0xc2)]('Briefing\x20Error:\x20'+_0x12d283['message']);}}module['exports']={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};