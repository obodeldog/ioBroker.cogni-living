const a0_0x3a97d3=a0_0x8650;(function(_0x356a02,_0x18727f){const _0x4306da=a0_0x8650,_0xf7dedb=_0x356a02();while(!![]){try{const _0x588399=-parseInt(_0x4306da(0x184))/0x1+-parseInt(_0x4306da(0x168))/0x2+parseInt(_0x4306da(0x165))/0x3*(parseInt(_0x4306da(0x1c8))/0x4)+parseInt(_0x4306da(0x176))/0x5*(-parseInt(_0x4306da(0x1af))/0x6)+-parseInt(_0x4306da(0x1c5))/0x7+-parseInt(_0x4306da(0x16c))/0x8*(-parseInt(_0x4306da(0x17f))/0x9)+parseInt(_0x4306da(0x15f))/0xa;if(_0x588399===_0x18727f)break;else _0xf7dedb['push'](_0xf7dedb['shift']());}catch(_0x42d4a6){_0xf7dedb['push'](_0xf7dedb['shift']());}}}(a0_0x47d9,0xdce4f));const a0_0x4b1a66=(function(){let _0x3c9eef=!![];return function(_0x3d6980,_0x2cb3dd){const _0x401c28=_0x3c9eef?function(){if(_0x2cb3dd){const _0x2b9dc0=_0x2cb3dd['apply'](_0x3d6980,arguments);return _0x2cb3dd=null,_0x2b9dc0;}}:function(){};return _0x3c9eef=![],_0x401c28;};}()),a0_0x15b633=a0_0x4b1a66(this,function(){const _0x31051c=a0_0x8650;return a0_0x15b633[_0x31051c(0x1a4)]()['search'](_0x31051c(0x1b1))[_0x31051c(0x1a4)]()['constructor'](a0_0x15b633)['search'](_0x31051c(0x1b1));});a0_0x15b633();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require('./setup'),GEMINI_MODEL=a0_0x3a97d3(0x159),LTM_DP_DAILY_DIGESTS=a0_0x3a97d3(0x196),LTM_DP_STATUS=a0_0x3a97d3(0x166),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x3a97d3(0x1c1),'senior_aal':a0_0x3a97d3(0x15b),'family':a0_0x3a97d3(0x152),'single_comfort':a0_0x3a97d3(0x198),'security':a0_0x3a97d3(0x1d0),'energy_saver':'PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'};function canCallApi(){const _0x1964f3=a0_0x3a97d3,_0x59ae8f=Date[_0x1964f3(0x1cf)]();return _0x59ae8f-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x583fe0=a0_0x3a97d3;lastGlobalApiCall=Date[_0x583fe0(0x1cf)]();}async function getWeatherContext(_0x199bdc){const _0x2b5ebb=a0_0x3a97d3;if(!_0x199bdc[_0x2b5ebb(0x1c4)]['useWeather']||!_0x199bdc[_0x2b5ebb(0x1c4)]['weatherInstance'])return _0x2b5ebb(0x197);try{const _0x22c97e=_0x199bdc[_0x2b5ebb(0x1c4)]['weatherInstance'];let _0x4194ce=await _0x199bdc['getForeignStateAsync'](_0x22c97e+_0x2b5ebb(0x174));if(!_0x4194ce)_0x4194ce=await _0x199bdc[_0x2b5ebb(0x175)](_0x22c97e+_0x2b5ebb(0x1ce));let _0x3866cb=await _0x199bdc['getForeignStateAsync'](_0x22c97e+_0x2b5ebb(0x14e));if(!_0x3866cb)_0x3866cb=await _0x199bdc[_0x2b5ebb(0x175)](_0x22c97e+_0x2b5ebb(0x15a));let _0x5baf33=_0x2b5ebb(0x14d);const _0x4828a0=await _0x199bdc[_0x2b5ebb(0x175)](_0x22c97e+_0x2b5ebb(0x199));if(_0x4828a0)_0x5baf33=_0x4828a0[_0x2b5ebb(0x1b9)]?_0x2b5ebb(0x1a2):'Tag';if(_0x4194ce&&_0x3866cb)return _0x4194ce[_0x2b5ebb(0x1b9)]+_0x2b5ebb(0x1ca)+_0x3866cb['val']+_0x2b5ebb(0x194)+_0x5baf33;}catch(_0x2047ab){}return _0x2b5ebb(0x16d);}async function consultButler(_0x2702dd,_0x35ced4,_0x24aaa4,_0x36f370){const _0x237d2a=a0_0x3a97d3;if(!_0x2702dd['geminiModel'])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x669067=Date['now']();if(decisionCache[_0x35ced4]&&_0x669067-decisionCache[_0x35ced4][_0x237d2a(0x170)]<CACHE_TTL_MS){const _0x472cf7=decisionCache[_0x35ced4][_0x237d2a(0x14c)];return _0x2702dd['log'][_0x237d2a(0x1ba)]('ü§ñ\x20Butler\x20Cache\x20Hit:\x20'+_0x35ced4+_0x237d2a(0x1c0)+(_0x472cf7['approved']?'OK':'NO')+'\x20('+_0x472cf7[_0x237d2a(0x1bf)]+')'),_0x472cf7;}if(!canCallApi())return _0x2702dd[_0x237d2a(0x1a0)][_0x237d2a(0x1ba)](_0x237d2a(0x1a3)+_0x35ced4+_0x237d2a(0x1bc)),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x1c6d84=new Date()[_0x237d2a(0x1b2)](),_0x4bb035=await getWeatherContext(_0x2702dd),_0x26241c=PERSONA_MAPPING[_0x2702dd[_0x237d2a(0x1c4)][_0x237d2a(0x18b)]||'generic'],_0x3ae417=_0x237d2a(0x18c)+_0x1c6d84+_0x237d2a(0x1c9)+_0x4bb035+_0x237d2a(0x18d)+(_0x36f370*0x64)[_0x237d2a(0x1a7)](0x0)+_0x237d2a(0x1a8)+_0x35ced4+_0x237d2a(0x1ab)+_0x24aaa4+_0x237d2a(0x171)+_0x26241c+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x2fbca2=await _0x2702dd['geminiModel'][_0x237d2a(0x19a)](_0x3ae417),_0x17708f=_0x2fbca2['response'][_0x237d2a(0x181)]()[_0x237d2a(0x1d1)](/```json|```/g,'')[_0x237d2a(0x18f)](),_0x3efe64=JSON[_0x237d2a(0x189)](_0x17708f);return decisionCache[_0x35ced4]={'decision':_0x3efe64,'timestamp':_0x669067},_0x3efe64;}catch(_0x2b2018){return _0x2702dd[_0x237d2a(0x1a0)][_0x237d2a(0x153)]('ü§ñ\x20Butler\x20Brain\x20Error:\x20'+_0x2b2018[_0x237d2a(0x14f)]),decisionCache[_0x35ced4]={'decision':{'approved':!![],'reason':_0x237d2a(0x1b7)},'timestamp':_0x669067-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}function a0_0x8650(_0x50cc83,_0x3d986b){const _0x3458f3=a0_0x47d9();return a0_0x8650=function(_0x15b633,_0x4b1a66){_0x15b633=_0x15b633-0x149;let _0x47d9c9=_0x3458f3[_0x15b633];return _0x47d9c9;},a0_0x8650(_0x50cc83,_0x3d986b);}async function runGeminiAnalysis(_0x216765,_0x4e4942=''){const _0x1a0e33=a0_0x3a97d3;if(!_0x216765[_0x1a0e33(0x185)])return;if(!canCallApi()){_0x216765[_0x1a0e33(0x1a0)][_0x1a0e33(0x1ba)]('ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x216765[_0x1a0e33(0x190)][_0x1a0e33(0x158)]===0x0)return;const _0x35ef6a=_0x216765['eventHistory'][_0x1a0e33(0x15c)](0x0,0xf),_0x32ab0a=_0x216765['currentSystemMode'],_0x3ec5e2=PERSONA_MAPPING[_0x216765[_0x1a0e33(0x1c4)][_0x1a0e33(0x18b)]||_0x1a0e33(0x1c7)],_0x27e546=_0x216765[_0x1a0e33(0x1c4)][_0x1a0e33(0x1b0)]||_0x1a0e33(0x154);let _0x2b8d39='Unbekannt';try{const _0xb93d52=await _0x216765[_0x1a0e33(0x1c2)](_0x1a0e33(0x178));if(_0xb93d52&&_0xb93d52[_0x1a0e33(0x1b9)])_0x2b8d39=_0xb93d52[_0x1a0e33(0x1b9)];}catch(_0x12cb02){}let _0xa06cea=![];try{const _0x28e440=await _0x216765[_0x1a0e33(0x1c2)](_0x1a0e33(0x1a5));if(_0x28e440&&_0x28e440['val'])_0xa06cea=!![];}catch(_0x34ab2f){}const _0x1e0e65=_0x1a0e33(0x1b4)+_0x3ec5e2+_0x1a0e33(0x16a)+_0x27e546+_0x1a0e33(0x160)+_0x32ab0a+_0x1a0e33(0x155)+_0x2b8d39+'.\x20EVENTS:\x20'+JSON['stringify'](_0x35ef6a)+_0x1a0e33(0x14b)+_0x4e4942+_0x1a0e33(0x162);try{updateApiTimestamp();const _0x51343b=await _0x216765[_0x1a0e33(0x185)][_0x1a0e33(0x19a)](_0x1e0e65),_0x32b3d6=JSON[_0x1a0e33(0x189)](_0x51343b[_0x1a0e33(0x149)][_0x1a0e33(0x181)]()[_0x1a0e33(0x1d1)](/```json|```/g,'')[_0x1a0e33(0x18f)]());await _0x216765[_0x1a0e33(0x156)](_0x1a0e33(0x161),{'val':JSON[_0x1a0e33(0x180)](_0x32b3d6),'ack':!![]});if(_0x32b3d6[_0x1a0e33(0x1b3)])await _0x216765[_0x1a0e33(0x156)](_0x1a0e33(0x1cb),{'val':_0x32b3d6[_0x1a0e33(0x1b3)],'ack':!![]});const _0x245809={'timestamp':Date['now'](),'id':Date[_0x1a0e33(0x1cf)]()[_0x1a0e33(0x1a4)](),'analysis':{'activity':{'summary':_0x32b3d6[_0x1a0e33(0x1b3)],'isAlert':_0x32b3d6['isAlert'],'alertReason':_0x32b3d6['alertReason']},'comfort':{'automationProposal':_0x32b3d6[_0x1a0e33(0x150)]}}};_0x216765['analysisHistory'][_0x1a0e33(0x1bb)](_0x245809);if(_0x216765[_0x1a0e33(0x179)][_0x1a0e33(0x158)]>0x32)_0x216765['analysisHistory'][_0x1a0e33(0x173)]();await _0x216765[_0x1a0e33(0x156)](_0x1a0e33(0x1be),{'val':JSON['stringify'](_0x216765['analysisHistory']),'ack':!![]});const _0x47c08c=_0x32b3d6[_0x1a0e33(0x1cc)]||![];_0x47c08c!==_0x216765[_0x1a0e33(0x182)]&&(await _0x216765[_0x1a0e33(0x156)](_0x1a0e33(0x1b6),{'val':_0x47c08c,'ack':!![]}),_0x216765[_0x1a0e33(0x182)]=_0x47c08c,_0x47c08c&&(await _0x216765['setStateAsync'](_0x1a0e33(0x19e),{'val':_0x32b3d6[_0x1a0e33(0x195)],'ack':!![]}),setup[_0x1a0e33(0x186)](_0x216765,_0x1a0e33(0x15e)+_0x32b3d6[_0x1a0e33(0x195)],![],_0x32b3d6[_0x1a0e33(0x17d)])));if(_0x32b3d6[_0x1a0e33(0x150)]&&_0x32b3d6[_0x1a0e33(0x150)][_0x1a0e33(0x188)]){await _0x216765[_0x1a0e33(0x156)](_0x1a0e33(0x15d),{'val':!![],'ack':!![]}),await _0x216765[_0x1a0e33(0x156)](_0x1a0e33(0x193),{'val':_0x32b3d6[_0x1a0e33(0x150)][_0x1a0e33(0x151)],'ack':!![]}),await _0x216765['setStateAsync'](_0x1a0e33(0x177),{'val':_0x32b3d6[_0x1a0e33(0x150)][_0x1a0e33(0x17e)],'ack':!![]}),await _0x216765[_0x1a0e33(0x156)](_0x1a0e33(0x187),{'val':JSON[_0x1a0e33(0x180)](_0x32b3d6[_0x1a0e33(0x150)][_0x1a0e33(0x16f)]),'ack':!![]});if(_0xa06cea)executeAutomationAction(_0x216765);}}catch(_0x2d7965){_0x216765[_0x1a0e33(0x1a0)][_0x1a0e33(0x14a)](_0x1a0e33(0x1a1)+_0x2d7965[_0x1a0e33(0x14f)]);}}async function createDailyDigest(_0x22ced0,_0x32ceb1){const _0x1c7267=a0_0x3a97d3;if(!_0x22ced0[_0x1c7267(0x1ac)])return;if(!canCallApi()){await _0x22ced0['setStateAsync'](LTM_DP_STATUS,{'val':_0x1c7267(0x192),'ack':!![]});return;}await _0x22ced0['setStateAsync'](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x22ced0['geminiModel']||_0x22ced0['rawEventLog']['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x22ced0[_0x1c7267(0x156)](LTM_DP_STATUS,{'val':_0x1c7267(0x1ae),'ack':!![]});return;}const _0x598ddb=JSON['parse'](JSON[_0x1c7267(0x180)](_0x22ced0[_0x1c7267(0x169)])),_0x2e13a8=_0x598ddb[_0x1c7267(0x158)],_0x161195=_0x1c7267(0x17c)+JSON[_0x1c7267(0x180)](_0x598ddb);try{updateApiTimestamp();const _0x503543=await _0x22ced0[_0x1c7267(0x185)][_0x1c7267(0x19a)](_0x161195),_0x7b7660=JSON[_0x1c7267(0x189)](_0x503543[_0x1c7267(0x149)][_0x1c7267(0x181)]()['replace'](/```json|```/g,'')[_0x1c7267(0x18f)]()),_0x5d5392={'timestamp':new Date()[_0x1c7267(0x1a6)](),'eventCount':_0x2e13a8,'summary':_0x7b7660[_0x1c7267(0x1b3)]||_0x1c7267(0x19f),'activityLevel':_0x7b7660[_0x1c7267(0x1cd)]||_0x1c7267(0x16b),'systemMode':_0x22ced0['currentSystemMode']};_0x22ced0[_0x1c7267(0x19c)][_0x1c7267(0x1bd)](_0x5d5392);const _0x3cb2da=_0x22ced0['config'][_0x1c7267(0x1b5)]||0x3c;_0x22ced0[_0x1c7267(0x19c)]['length']>_0x3cb2da&&_0x22ced0[_0x1c7267(0x19c)][_0x1c7267(0x191)](0x0,_0x22ced0[_0x1c7267(0x19c)]['length']-_0x3cb2da);await _0x22ced0['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x1c7267(0x180)](_0x22ced0[_0x1c7267(0x19c)]),'ack':!![]}),_0x22ced0[_0x1c7267(0x169)]=[],await _0x22ced0['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x1c7267(0x180)](_0x22ced0[_0x1c7267(0x169)]),'ack':!![]}),await _0x22ced0[_0x1c7267(0x156)](LTM_DP_STATUS,{'val':'Success','ack':!![]});const _0x363c7f=_0x1c7267(0x172)+_0x7b7660[_0x1c7267(0x1b3)]+_0x1c7267(0x167)+_0x7b7660[_0x1c7267(0x1cd)];setup[_0x1c7267(0x186)](_0x22ced0,_0x363c7f,![],![]);if(_0x22ced0[_0x1c7267(0x1ac)]&&_0x32ceb1)_0x32ceb1['send'](_0x22ced0,_0x1c7267(0x19b),{'digest':_0x5d5392});}catch(_0x41ab72){_0x22ced0['log'][_0x1c7267(0x14a)](_0x41ab72[_0x1c7267(0x14f)]);}}async function runBaselineDriftAnalysis(_0x431735){const _0x19be6b=a0_0x3a97d3;if(!_0x431735['isProVersion']||!_0x431735[_0x19be6b(0x185)])return;if(!canCallApi())return;const _0x45be19=_0x431735[_0x19be6b(0x1c4)][_0x19be6b(0x163)]||0xe;if(_0x431735[_0x19be6b(0x19c)][_0x19be6b(0x158)]<_0x45be19+0x7){await _0x431735[_0x19be6b(0x156)](_0x19be6b(0x1c3),{'val':_0x19be6b(0x1aa),'ack':!![]});return;}const _0x1f8b57=_0x431735[_0x19be6b(0x19c)][_0x19be6b(0x15c)](-_0x45be19),_0x59976a=_0x431735[_0x19be6b(0x19c)][_0x19be6b(0x15c)](0x0,_0x431735[_0x19be6b(0x19c)][_0x19be6b(0x158)]-_0x45be19),_0x590bca=_0x19be6b(0x16e)+JSON[_0x19be6b(0x180)](_0x59976a)+'\x0aSTB:\x20'+JSON[_0x19be6b(0x180)](_0x1f8b57);try{updateApiTimestamp();const _0x2a62b2=await _0x431735[_0x19be6b(0x185)][_0x19be6b(0x19a)](_0x590bca),_0x522435=JSON[_0x19be6b(0x189)](_0x2a62b2['response']['text']()[_0x19be6b(0x1d1)](/```json|```/g,'')[_0x19be6b(0x18f)]());_0x522435[_0x19be6b(0x1b8)]&&(await _0x431735['setStateAsync'](_0x19be6b(0x1c3),{'val':_0x522435[_0x19be6b(0x1b8)],'ack':!![]}),await _0x431735[_0x19be6b(0x156)](_0x19be6b(0x17b),{'val':_0x522435['driftDetails'],'ack':!![]}),await _0x431735[_0x19be6b(0x156)](_0x19be6b(0x19d),{'val':Date['now'](),'ack':!![]}));}catch(_0x5b9c85){}}function a0_0x47d9(){const _0x400ab5=['toFixed','%)\x20nach\x20\x22','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','N/A\x20(Learning)','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','isProVersion','info','Skipped\x20(No\x20AI\x20or\x20Data)','6pxzyXw','livingContext','(((.+)+)+)+$','toLocaleTimeString','summary','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','ltmLtbWindowDays','analysis.isAlert','KI-Fehler\x20(Fallback)','baselineDrift','val','debug','unshift','\x20√ºbersprungen\x20(Auto-Approved).','push','analysis.analysisHistory','reason','\x20->\x20','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','getStateAsync','LTM.driftAnalysis.baselineDrift','config','628159XyVflU','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','generic','886932UGAgmk',',\x20Wetter:\x20','¬∞C,\x20','analysis.activitySummary','isAlert','activityLevel','.forecast.current.temperature','now','Sicherheit\x20geht\x20vor.','replace','response','error','.\x20EMERGENCY:\x20','decision','Unbekannt','.Current.WeatherText','message','automationProposal','description','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','warn','Keine\x20Details.','.\x20ANWESEND:\x20','setStateAsync','Briefing\x20Error:\x20','length','models/gemini-flash-latest','.forecast.current.state','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','slice','analysis.automation.patternDetected','‚ö†Ô∏è\x20ALARM:\x20','20947260KwEqmk','.\x20SYSTEM_MODE:\x20','analysis.lastResult','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','ltmStbWindowDays','setForeignStateAsync','3BWQJDt','LTM.processingStatus','\x0aAktivit√§t:\x20','2465844sivMuZ','rawEventLog','.\x20KONTEXT:\x20','normal','632MPqkQa','Wetterdaten\x20nicht\x20abrufbar','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','targetValue','timestamp','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','üìÖ\x20Daily\x20Digest:\x0a','pop','.Current.Temperature','getForeignStateAsync','379920nAJiHa','analysis.automation.targetId','system.presenceWho','analysisHistory','üåÖ\x20Morning\x20Briefing:\x0a','LTM.driftAnalysis.driftDetails','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','isEmergency','targetId','30177OdNgQW','stringify','text','lastAlertState','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','277920fDuQJC','geminiModel','sendNotification','analysis.automation.targetValue','detected','parse','BUTLER\x20Execution\x20Error:\x20','aiPersona','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','\x20=\x20','trim','eventHistory','splice','Skipped\x20(Traffic)','analysis.automation.description',',\x20Lichtverh√§ltnisse:\x20','alertReason','LTM.dailyDigests','Unbekannt\x20(Kein\x20Sensor)','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','.Current.IsNight','generateContent','ANALYZE_HEALTH','dailyDigests','LTM.driftAnalysis.lastCheck','analysis.alertReason','Digest','log','Gemini\x20Error:\x20','Nacht','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','toString','analysis.automation.autoApply','toISOString'];a0_0x47d9=function(){return _0x400ab5;};return a0_0x47d9();}async function executeAutomationAction(_0x5129af){const _0x189def=a0_0x3a97d3;try{const _0x2f23a2=await _0x5129af[_0x189def(0x1c2)](_0x189def(0x177)),_0x121414=await _0x5129af[_0x189def(0x1c2)](_0x189def(0x187));if(_0x2f23a2&&_0x2f23a2[_0x189def(0x1b9)]&&_0x121414){const _0x27fd6f=_0x2f23a2[_0x189def(0x1b9)];let _0x3dceb6=_0x121414[_0x189def(0x1b9)];try{_0x3dceb6=JSON['parse'](_0x3dceb6);}catch(_0x1e7823){}_0x5129af[_0x189def(0x1a0)][_0x189def(0x1ad)](_0x189def(0x1c6)+_0x27fd6f+_0x189def(0x18e)+_0x3dceb6),await _0x5129af[_0x189def(0x164)](_0x27fd6f,_0x3dceb6);}else _0x5129af[_0x189def(0x1a0)][_0x189def(0x153)](_0x189def(0x1a9));}catch(_0x49c9db){_0x5129af[_0x189def(0x1a0)][_0x189def(0x14a)](_0x189def(0x18a)+_0x49c9db['message']);}}async function sendMorningBriefing(_0x4e82b8){const _0x4d60d7=a0_0x3a97d3;if(!_0x4e82b8[_0x4d60d7(0x185)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x121e39=_0x4d60d7(0x183),_0x5815e1=await _0x4e82b8['geminiModel']['generateContent'](_0x121e39),_0x5b4797=_0x5815e1['response'][_0x4d60d7(0x181)]();setup[_0x4d60d7(0x186)](_0x4e82b8,_0x4d60d7(0x17a)+_0x5b4797);}catch(_0x46f3d4){_0x4e82b8['log']['error'](_0x4d60d7(0x157)+_0x46f3d4['message']);}}module['exports']={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};