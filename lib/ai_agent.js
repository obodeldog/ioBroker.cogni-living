const a0_0x125279=a0_0x483a;(function(_0x4f38b3,_0x489aa2){const _0x37b326=a0_0x483a,_0x129dfe=_0x4f38b3();while(!![]){try{const _0x495e7b=-parseInt(_0x37b326(0x1ab))/0x1+-parseInt(_0x37b326(0x1af))/0x2*(-parseInt(_0x37b326(0x188))/0x3)+-parseInt(_0x37b326(0x192))/0x4+-parseInt(_0x37b326(0x1a2))/0x5+-parseInt(_0x37b326(0x19d))/0x6*(-parseInt(_0x37b326(0x190))/0x7)+-parseInt(_0x37b326(0x1b0))/0x8+-parseInt(_0x37b326(0x164))/0x9*(-parseInt(_0x37b326(0x1ac))/0xa);if(_0x495e7b===_0x489aa2)break;else _0x129dfe['push'](_0x129dfe['shift']());}catch(_0xa36644){_0x129dfe['push'](_0x129dfe['shift']());}}}(a0_0x40b9,0xd6792));const a0_0x220333=(function(){let _0x2577ad=!![];return function(_0x1ca31b,_0x56c838){const _0x18f336=_0x2577ad?function(){const _0x5cefca=a0_0x483a;if(_0x56c838){const _0x5e4600=_0x56c838[_0x5cefca(0x184)](_0x1ca31b,arguments);return _0x56c838=null,_0x5e4600;}}:function(){};return _0x2577ad=![],_0x18f336;};}()),a0_0x46dfe2=a0_0x220333(this,function(){const _0x2382ab=a0_0x483a;return a0_0x46dfe2[_0x2382ab(0x170)]()[_0x2382ab(0x16e)](_0x2382ab(0x19a))[_0x2382ab(0x170)]()[_0x2382ab(0x12e)](a0_0x46dfe2)[_0x2382ab(0x16e)](_0x2382ab(0x19a));});a0_0x46dfe2();'use strict';function a0_0x483a(_0x348829,_0x215428){const _0xac7118=a0_0x40b9();return a0_0x483a=function(_0x46dfe2,_0x220333){_0x46dfe2=_0x46dfe2-0x12e;let _0x40b90a=_0xac7118[_0x46dfe2];return _0x40b90a;},a0_0x483a(_0x348829,_0x215428);}const {GoogleGenerativeAI}=require(a0_0x125279(0x18a)),setup=require(a0_0x125279(0x1b3)),GEMINI_MODEL=a0_0x125279(0x13e),LTM_DP_DAILY_DIGESTS=a0_0x125279(0x1a9),LTM_DP_STATUS=a0_0x125279(0x154),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;function a0_0x40b9(){const _0x55a6a0=['Started...','setStateAsync','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','21TwSJCg','livingContext','878596JmmObp','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','message','Skipped\x20(No\x20AI\x20or\x20Data)','isEmergency','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','ltmLtbWindowDays','dailyDigests','(((.+)+)+)+$','useWeather','decision','2605938LEieng','LTM.driftAnalysis.driftDetails','üåÖ\x20Morning\x20Briefing:\x0a','slice','rawEventLog','5782000tHiRiZ','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','.\x20ANWESEND:\x20','.Current.WeatherText','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','alertReason','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','LTM.dailyDigests','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','914402szAuJP','544110uUgndM','weatherInstance','Traffic-Schutz\x20(Auto-Approved)','3494020XCWXME','4707112bSjMzJ','analysis.automation.autoApply','baselineDrift','./setup','Nacht','BUTLER\x20Execution\x20Error:\x20','Unbekannt','constructor','\x20=\x20','N/A\x20(Learning)','Unbekannt\x20(Kein\x20Sensor)','pop','generic','analysis.analysisHistory','isProVersion','toFixed','reason','eventHistory','automationProposal','Gemini\x20Error:\x20','splice','response','debug','models/gemini-flash-latest','getStateAsync','summary','stringify','analysis.automation.targetValue','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','setForeignStateAsync','targetValue','Success','%)\x20nach\x20\x22','KI\x20offline\x20(Fallback)','Sicherheit\x20geht\x20vor.','analysis.automation.description','.Current.Temperature','config','toLocaleTimeString','Digest','lastAlertState','log','analysis.activitySummary',',\x20Wetter:\x20','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','LTM.processingStatus','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','isAlert','length','Tag','currentSystemMode','ltmStbWindowDays','¬∞C,\x20','sendNotification','unshift','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','.\x20EVENTS:\x20','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','.forecast.current.state','analysisHistory','Keine\x20Details.','117kOdNLI','ANALYZE_HEALTH','targetId','analysis.lastResult','\x20->\x20','LTM.driftAnalysis.baselineDrift','replace','exports','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','search','error','toString','approved','description','now','geminiModel','info','getForeignStateAsync','parse','.\x20SYSTEM_MODE:\x20','\x0aSTB:\x20','Skipped\x20(Traffic)','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','Briefing\x20Error:\x20','aiPersona','text','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','Wetterdaten\x20nicht\x20abrufbar','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','generateContent','apply','analysis.automation.patternDetected','warn','push','3UVliXq','trim','@google/generative-ai','val','system.presenceWho'];a0_0x40b9=function(){return _0x55a6a0;};return a0_0x40b9();}let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x125279(0x1a6),'senior_aal':a0_0x125279(0x1aa),'family':a0_0x125279(0x15e),'single_comfort':a0_0x125279(0x16c),'security':a0_0x125279(0x149),'energy_saver':a0_0x125279(0x197)};function canCallApi(){const _0x27cccb=a0_0x125279,_0x5a5677=Date[_0x27cccb(0x173)]();return _0x5a5677-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x3bcb32){const _0x2a53b9=a0_0x125279;if(!_0x3bcb32[_0x2a53b9(0x14c)][_0x2a53b9(0x19b)]||!_0x3bcb32[_0x2a53b9(0x14c)][_0x2a53b9(0x1ad)])return _0x2a53b9(0x131);try{const _0x210225=_0x3bcb32[_0x2a53b9(0x14c)][_0x2a53b9(0x1ad)];let _0xa1545e=await _0x3bcb32[_0x2a53b9(0x176)](_0x210225+_0x2a53b9(0x14b));if(!_0xa1545e)_0xa1545e=await _0x3bcb32[_0x2a53b9(0x176)](_0x210225+'.forecast.current.temperature');let _0x4eae50=await _0x3bcb32[_0x2a53b9(0x176)](_0x210225+_0x2a53b9(0x1a5));if(!_0x4eae50)_0x4eae50=await _0x3bcb32[_0x2a53b9(0x176)](_0x210225+_0x2a53b9(0x161));let _0xde9aa1='Unbekannt';const _0x423309=await _0x3bcb32[_0x2a53b9(0x176)](_0x210225+'.Current.IsNight');if(_0x423309)_0xde9aa1=_0x423309[_0x2a53b9(0x18b)]?_0x2a53b9(0x1b4):_0x2a53b9(0x158);if(_0xa1545e&&_0x4eae50)return _0xa1545e['val']+_0x2a53b9(0x15b)+_0x4eae50['val']+',\x20Lichtverh√§ltnisse:\x20'+_0xde9aa1;}catch(_0x5c426){}return _0x2a53b9(0x180);}async function consultButler(_0x111d36,_0x30f2fc,_0x4b05ea,_0x6a34df){const _0x55eaff=a0_0x125279;if(!_0x111d36[_0x55eaff(0x174)])return{'approved':!![],'reason':_0x55eaff(0x148)};const _0x3700ec=Date[_0x55eaff(0x173)]();if(decisionCache[_0x30f2fc]&&_0x3700ec-decisionCache[_0x30f2fc]['timestamp']<CACHE_TTL_MS){const _0x152e4a=decisionCache[_0x30f2fc][_0x55eaff(0x19c)];return _0x111d36[_0x55eaff(0x150)][_0x55eaff(0x13d)](_0x55eaff(0x17f)+_0x30f2fc+_0x55eaff(0x168)+(_0x152e4a[_0x55eaff(0x171)]?'OK':'NO')+'\x20('+_0x152e4a[_0x55eaff(0x137)]+')'),_0x152e4a;}if(!canCallApi())return _0x111d36['log'][_0x55eaff(0x13d)](_0x55eaff(0x193)+_0x30f2fc+'\x20√ºbersprungen\x20(Auto-Approved).'),{'approved':!![],'reason':_0x55eaff(0x1ae)};const _0x348bd9=new Date()[_0x55eaff(0x14d)](),_0x3c7f49=await getWeatherContext(_0x111d36),_0x3175da=PERSONA_MAPPING[_0x111d36[_0x55eaff(0x14c)][_0x55eaff(0x17d)]||_0x55eaff(0x133)],_0x46a07b='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x348bd9+_0x55eaff(0x152)+_0x3c7f49+_0x55eaff(0x182)+(_0x6a34df*0x64)[_0x55eaff(0x136)](0x0)+_0x55eaff(0x147)+_0x30f2fc+_0x55eaff(0x18f)+_0x4b05ea+_0x55eaff(0x16d)+_0x3175da+_0x55eaff(0x17b);try{updateApiTimestamp();const _0x450800=await _0x111d36['geminiModel'][_0x55eaff(0x183)](_0x46a07b),_0x1b1318=_0x450800[_0x55eaff(0x13c)]['text']()[_0x55eaff(0x16a)](/```json|```/g,'')['trim'](),_0x6a46d5=JSON[_0x55eaff(0x177)](_0x1b1318);return decisionCache[_0x30f2fc]={'decision':_0x6a46d5,'timestamp':_0x3700ec},_0x6a46d5;}catch(_0x1c6054){return _0x111d36[_0x55eaff(0x150)][_0x55eaff(0x186)]('ü§ñ\x20Butler\x20Brain\x20Error:\x20'+_0x1c6054[_0x55eaff(0x194)]),decisionCache[_0x30f2fc]={'decision':{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'},'timestamp':_0x3700ec-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x45839b,_0x557bd1=''){const _0x2c6d6f=a0_0x125279;if(!_0x45839b[_0x2c6d6f(0x174)])return;if(!canCallApi()){_0x45839b[_0x2c6d6f(0x150)][_0x2c6d6f(0x13d)](_0x2c6d6f(0x155));return;}if(_0x45839b[_0x2c6d6f(0x138)][_0x2c6d6f(0x157)]===0x0)return;const _0x43672e=_0x45839b[_0x2c6d6f(0x138)][_0x2c6d6f(0x1a0)](0x0,0xf),_0x444396=_0x45839b['currentSystemMode'],_0x52fcee=PERSONA_MAPPING[_0x45839b[_0x2c6d6f(0x14c)][_0x2c6d6f(0x17d)]||_0x2c6d6f(0x133)],_0xf63b67=_0x45839b[_0x2c6d6f(0x14c)][_0x2c6d6f(0x191)]||_0x2c6d6f(0x163);let _0x180f79=_0x2c6d6f(0x1b6);try{const _0x518911=await _0x45839b[_0x2c6d6f(0x13f)](_0x2c6d6f(0x18c));if(_0x518911&&_0x518911['val'])_0x180f79=_0x518911['val'];}catch(_0x4c1524){}let _0xfbe2ef=![];try{const _0x2404f8=await _0x45839b[_0x2c6d6f(0x13f)](_0x2c6d6f(0x1b1));if(_0x2404f8&&_0x2404f8[_0x2c6d6f(0x18b)])_0xfbe2ef=!![];}catch(_0xe68b3e){}const _0x4775ea=_0x2c6d6f(0x181)+_0x52fcee+'.\x20KONTEXT:\x20'+_0xf63b67+_0x2c6d6f(0x178)+_0x444396+_0x2c6d6f(0x1a4)+_0x180f79+_0x2c6d6f(0x15f)+JSON[_0x2c6d6f(0x141)](_0x43672e)+'.\x20EMERGENCY:\x20'+_0x557bd1+_0x2c6d6f(0x160);try{updateApiTimestamp();const _0x188d32=await _0x45839b[_0x2c6d6f(0x174)][_0x2c6d6f(0x183)](_0x4775ea),_0x5ae822=JSON[_0x2c6d6f(0x177)](_0x188d32[_0x2c6d6f(0x13c)]['text']()[_0x2c6d6f(0x16a)](/```json|```/g,'')[_0x2c6d6f(0x189)]());await _0x45839b[_0x2c6d6f(0x18e)](_0x2c6d6f(0x167),{'val':JSON[_0x2c6d6f(0x141)](_0x5ae822),'ack':!![]});if(_0x5ae822['summary'])await _0x45839b[_0x2c6d6f(0x18e)](_0x2c6d6f(0x151),{'val':_0x5ae822[_0x2c6d6f(0x140)],'ack':!![]});const _0x3bf100={'timestamp':Date[_0x2c6d6f(0x173)](),'id':Date[_0x2c6d6f(0x173)]()['toString'](),'analysis':{'activity':{'summary':_0x5ae822['summary'],'isAlert':_0x5ae822['isAlert'],'alertReason':_0x5ae822[_0x2c6d6f(0x1a7)]},'comfort':{'automationProposal':_0x5ae822['automationProposal']}}};_0x45839b['analysisHistory'][_0x2c6d6f(0x15d)](_0x3bf100);if(_0x45839b['analysisHistory'][_0x2c6d6f(0x157)]>0x32)_0x45839b[_0x2c6d6f(0x162)][_0x2c6d6f(0x132)]();await _0x45839b[_0x2c6d6f(0x18e)](_0x2c6d6f(0x134),{'val':JSON[_0x2c6d6f(0x141)](_0x45839b['analysisHistory']),'ack':!![]});const _0x2cd5c9=_0x5ae822[_0x2c6d6f(0x156)]||![];_0x2cd5c9!==_0x45839b['lastAlertState']&&(await _0x45839b[_0x2c6d6f(0x18e)]('analysis.isAlert',{'val':_0x2cd5c9,'ack':!![]}),_0x45839b[_0x2c6d6f(0x14f)]=_0x2cd5c9,_0x2cd5c9&&(await _0x45839b[_0x2c6d6f(0x18e)]('analysis.alertReason',{'val':_0x5ae822['alertReason'],'ack':!![]}),setup[_0x2c6d6f(0x15c)](_0x45839b,'‚ö†Ô∏è\x20ALARM:\x20'+_0x5ae822['alertReason'],![],_0x5ae822[_0x2c6d6f(0x196)])));if(_0x5ae822['automationProposal']&&_0x5ae822['automationProposal']['detected']){await _0x45839b['setStateAsync'](_0x2c6d6f(0x185),{'val':!![],'ack':!![]}),await _0x45839b['setStateAsync'](_0x2c6d6f(0x14a),{'val':_0x5ae822[_0x2c6d6f(0x139)][_0x2c6d6f(0x172)],'ack':!![]}),await _0x45839b['setStateAsync']('analysis.automation.targetId',{'val':_0x5ae822['automationProposal'][_0x2c6d6f(0x166)],'ack':!![]}),await _0x45839b['setStateAsync'](_0x2c6d6f(0x142),{'val':JSON[_0x2c6d6f(0x141)](_0x5ae822['automationProposal'][_0x2c6d6f(0x145)]),'ack':!![]});if(_0xfbe2ef)executeAutomationAction(_0x45839b);}}catch(_0x404da7){_0x45839b[_0x2c6d6f(0x150)][_0x2c6d6f(0x16f)](_0x2c6d6f(0x13a)+_0x404da7[_0x2c6d6f(0x194)]);}}async function createDailyDigest(_0xa2c6fe,_0x468dff){const _0x1e5b72=a0_0x125279;if(!_0xa2c6fe[_0x1e5b72(0x135)])return;if(!canCallApi()){await _0xa2c6fe[_0x1e5b72(0x18e)](LTM_DP_STATUS,{'val':_0x1e5b72(0x17a),'ack':!![]});return;}await _0xa2c6fe[_0x1e5b72(0x18e)](LTM_DP_STATUS,{'val':_0x1e5b72(0x18d),'ack':!![]});if(!_0xa2c6fe[_0x1e5b72(0x174)]||_0xa2c6fe[_0x1e5b72(0x1a1)][_0x1e5b72(0x157)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0xa2c6fe['setStateAsync'](LTM_DP_STATUS,{'val':_0x1e5b72(0x195),'ack':!![]});return;}const _0x558c5e=JSON[_0x1e5b72(0x177)](JSON[_0x1e5b72(0x141)](_0xa2c6fe[_0x1e5b72(0x1a1)])),_0x17ebf6=_0x558c5e[_0x1e5b72(0x157)],_0x59305a=_0x1e5b72(0x153)+JSON[_0x1e5b72(0x141)](_0x558c5e);try{updateApiTimestamp();const _0x1a7e82=await _0xa2c6fe['geminiModel'][_0x1e5b72(0x183)](_0x59305a),_0x242d6e=JSON[_0x1e5b72(0x177)](_0x1a7e82[_0x1e5b72(0x13c)][_0x1e5b72(0x17e)]()[_0x1e5b72(0x16a)](/```json|```/g,'')['trim']()),_0x1c2d7d={'timestamp':new Date()['toISOString'](),'eventCount':_0x17ebf6,'summary':_0x242d6e['summary']||_0x1e5b72(0x14e),'activityLevel':_0x242d6e['activityLevel']||'normal','systemMode':_0xa2c6fe[_0x1e5b72(0x159)]};_0xa2c6fe[_0x1e5b72(0x199)][_0x1e5b72(0x187)](_0x1c2d7d);const _0x24f0de=_0xa2c6fe[_0x1e5b72(0x14c)][_0x1e5b72(0x198)]||0x3c;_0xa2c6fe[_0x1e5b72(0x199)][_0x1e5b72(0x157)]>_0x24f0de&&_0xa2c6fe[_0x1e5b72(0x199)][_0x1e5b72(0x13b)](0x0,_0xa2c6fe[_0x1e5b72(0x199)][_0x1e5b72(0x157)]-_0x24f0de);await _0xa2c6fe['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x1e5b72(0x141)](_0xa2c6fe[_0x1e5b72(0x199)]),'ack':!![]}),_0xa2c6fe[_0x1e5b72(0x1a1)]=[],await _0xa2c6fe[_0x1e5b72(0x18e)](LTM_DP_RAW_LOG,{'val':JSON[_0x1e5b72(0x141)](_0xa2c6fe[_0x1e5b72(0x1a1)]),'ack':!![]}),await _0xa2c6fe[_0x1e5b72(0x18e)](LTM_DP_STATUS,{'val':_0x1e5b72(0x146),'ack':!![]});if(_0xa2c6fe[_0x1e5b72(0x135)]&&_0x468dff)_0x468dff['send'](_0xa2c6fe,_0x1e5b72(0x165),{'digest':_0x1c2d7d});}catch(_0x13f8f2){_0xa2c6fe[_0x1e5b72(0x150)][_0x1e5b72(0x16f)](_0x13f8f2['message']);}}async function runBaselineDriftAnalysis(_0x269cf7){const _0x232cc7=a0_0x125279;if(!_0x269cf7[_0x232cc7(0x135)]||!_0x269cf7['geminiModel'])return;if(!canCallApi())return;const _0x435d84=_0x269cf7[_0x232cc7(0x14c)][_0x232cc7(0x15a)]||0xe;if(_0x269cf7[_0x232cc7(0x199)]['length']<_0x435d84+0x7){await _0x269cf7['setStateAsync'](_0x232cc7(0x169),{'val':_0x232cc7(0x130),'ack':!![]});return;}const _0x1471c9=_0x269cf7[_0x232cc7(0x199)][_0x232cc7(0x1a0)](-_0x435d84),_0x100066=_0x269cf7[_0x232cc7(0x199)]['slice'](0x0,_0x269cf7[_0x232cc7(0x199)][_0x232cc7(0x157)]-_0x435d84),_0x1cd50b=_0x232cc7(0x1a3)+JSON['stringify'](_0x100066)+_0x232cc7(0x179)+JSON[_0x232cc7(0x141)](_0x1471c9);try{updateApiTimestamp();const _0x1eac35=await _0x269cf7[_0x232cc7(0x174)][_0x232cc7(0x183)](_0x1cd50b),_0x207fa7=JSON[_0x232cc7(0x177)](_0x1eac35['response'][_0x232cc7(0x17e)]()[_0x232cc7(0x16a)](/```json|```/g,'')[_0x232cc7(0x189)]());_0x207fa7['baselineDrift']&&(await _0x269cf7[_0x232cc7(0x18e)](_0x232cc7(0x169),{'val':_0x207fa7[_0x232cc7(0x1b2)],'ack':!![]}),await _0x269cf7[_0x232cc7(0x18e)](_0x232cc7(0x19e),{'val':_0x207fa7['driftDetails'],'ack':!![]}),await _0x269cf7[_0x232cc7(0x18e)]('LTM.driftAnalysis.lastCheck',{'val':Date[_0x232cc7(0x173)](),'ack':!![]}));}catch(_0x264945){}}async function executeAutomationAction(_0x17de84){const _0x4ef3e4=a0_0x125279;try{const _0x448f72=await _0x17de84['getStateAsync']('analysis.automation.targetId'),_0x5f2716=await _0x17de84[_0x4ef3e4(0x13f)](_0x4ef3e4(0x142));if(_0x448f72&&_0x448f72[_0x4ef3e4(0x18b)]&&_0x5f2716){const _0x544643=_0x448f72[_0x4ef3e4(0x18b)];let _0xd728c9=_0x5f2716[_0x4ef3e4(0x18b)];try{_0xd728c9=JSON[_0x4ef3e4(0x177)](_0xd728c9);}catch(_0x19bf57){}_0x17de84[_0x4ef3e4(0x150)][_0x4ef3e4(0x175)](_0x4ef3e4(0x1a8)+_0x544643+_0x4ef3e4(0x12f)+_0xd728c9),await _0x17de84[_0x4ef3e4(0x144)](_0x544643,_0xd728c9);}else _0x17de84[_0x4ef3e4(0x150)][_0x4ef3e4(0x186)](_0x4ef3e4(0x143));}catch(_0x14230d){_0x17de84[_0x4ef3e4(0x150)]['error'](_0x4ef3e4(0x1b5)+_0x14230d[_0x4ef3e4(0x194)]);}}async function sendMorningBriefing(_0x32c351){const _0x4d4d46=a0_0x125279;if(!_0x32c351[_0x4d4d46(0x174)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0xe0e3a9='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x35d36d=await _0x32c351[_0x4d4d46(0x174)][_0x4d4d46(0x183)](_0xe0e3a9),_0x5798fa=_0x35d36d[_0x4d4d46(0x13c)][_0x4d4d46(0x17e)]();setup[_0x4d4d46(0x15c)](_0x32c351,_0x4d4d46(0x19f)+_0x5798fa);}catch(_0x3c4d59){_0x32c351[_0x4d4d46(0x150)][_0x4d4d46(0x16f)](_0x4d4d46(0x17c)+_0x3c4d59[_0x4d4d46(0x194)]);}}module[a0_0x125279(0x16b)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};