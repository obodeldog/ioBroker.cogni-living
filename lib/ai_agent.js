const a0_0x157aec=a0_0x1c8f;(function(_0x38bdaf,_0x2b9a09){const _0x4beb74=a0_0x1c8f,_0x5621a1=_0x38bdaf();while(!![]){try{const _0x2d2bb3=parseInt(_0x4beb74(0x111))/0x1*(parseInt(_0x4beb74(0xe5))/0x2)+parseInt(_0x4beb74(0x117))/0x3*(-parseInt(_0x4beb74(0xf0))/0x4)+parseInt(_0x4beb74(0xe6))/0x5+parseInt(_0x4beb74(0xa3))/0x6+parseInt(_0x4beb74(0xd2))/0x7*(-parseInt(_0x4beb74(0x118))/0x8)+parseInt(_0x4beb74(0xb6))/0x9*(-parseInt(_0x4beb74(0xd8))/0xa)+-parseInt(_0x4beb74(0x113))/0xb;if(_0x2d2bb3===_0x2b9a09)break;else _0x5621a1['push'](_0x5621a1['shift']());}catch(_0x1be955){_0x5621a1['push'](_0x5621a1['shift']());}}}(a0_0x3b60,0xdf847));const a0_0xb010e0=(function(){let _0x31eb54=!![];return function(_0x5f2b07,_0x1947d3){const _0x3998e9=_0x31eb54?function(){const _0x4444f1=a0_0x1c8f;if(_0x1947d3){const _0x1ed2d0=_0x1947d3[_0x4444f1(0xd6)](_0x5f2b07,arguments);return _0x1947d3=null,_0x1ed2d0;}}:function(){};return _0x31eb54=![],_0x3998e9;};}()),a0_0x51dcf1=a0_0xb010e0(this,function(){const _0x24bfb5=a0_0x1c8f;return a0_0x51dcf1['toString']()['search'](_0x24bfb5(0x105))[_0x24bfb5(0xfc)]()[_0x24bfb5(0xe1)](a0_0x51dcf1)[_0x24bfb5(0xc9)]('(((.+)+)+)+$');});a0_0x51dcf1();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require(a0_0x157aec(0x104)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x157aec(0x106),LTM_DP_STATUS=a0_0x157aec(0xd0),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x157aec(0xe9),'senior_aal':a0_0x157aec(0xbf),'family':a0_0x157aec(0xf3),'single_comfort':a0_0x157aec(0xf2),'security':a0_0x157aec(0xb8),'energy_saver':'PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'};function canCallApi(){const _0x59f945=a0_0x157aec,_0x4d7a4d=Date[_0x59f945(0xac)]();return _0x4d7a4d-lastGlobalApiCall>MIN_API_GAP_MS;}function a0_0x3b60(){const _0x116050=['detected','ðŸŒ…\x20Morning\x20Briefing:\x0a','weatherInstance','apply','.\x20EMERGENCY:\x20','377260CyJTvS','Digest','.Current.IsNight','BUTLER\x20Execution\x20Error:\x20','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','lastAlertState','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','generateContent','Success','constructor','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','.\x20SYSTEM_MODE:\x20','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','8HZPBYd','5212370HPszzq','getForeignStateAsync','setStateAsync','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','response','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','timestamp','analysis.automation.targetId','toLocaleTimeString','748684teiaYo','decision','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','isProVersion','baselineDrift','\x20->\x20','info','warn','LTM.driftAnalysis.driftDetails','val','slice','toString','length','LTM.driftAnalysis.baselineDrift','âš ï¸\x20ALARM:\x20','normal','approved','ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','./setup','(((.+)+)+)+$','LTM.dailyDigests','push','ðŸ“…\x20Daily\x20Digest:\x0a','generic','.\x20KONTEXT:\x20','analysis.automation.autoApply','ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','analysis.activitySummary','summary','pop','splice','388159zhtKhf','error','9632766tPRxSA','dailyDigests','text','log','9CQEsPL','581704KsiqHz','parse','alertReason','N/A\x20(Learning)','.\x20EVENTS:\x20','exports','geminiModel','send','stringify','analysis.alertReason','description','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','getStateAsync','5801922ZzhFwp','isAlert','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','Traffic-Schutz\x20(Auto-Approved)','Keine\x20Details.','activityLevel','ANALYZE_HEALTH','Gemini\x20Error:\x20','automationProposal','now','KI-Fehler\x20(Fallback)','Skipped\x20(No\x20AI\x20or\x20Data)','analysisHistory','rawEventLog','config','driftDetails','currentSystemMode','ltmStbWindowDays','toISOString','63ozqlcz','Started...','Sicherheit\x20geht\x20vor.','message','\x0aSTB:\x20','system.presenceWho','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','targetValue','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','analysis.isAlert','aiPersona','Unbekannt','\x20=\x20','replace','trim','Tag','analysis.automation.description','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','search','analysis.automation.targetValue','%)\x20nach\x20\x22','ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','Unbekannt\x20(Kein\x20Sensor)','\x20Ã¼bersprungen\x20(Auto-Approved).','.Current.Temperature','LTM.processingStatus','debug','91ycvKsi'];a0_0x3b60=function(){return _0x116050;};return a0_0x3b60();}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x425dd8){const _0x5cd6a4=a0_0x157aec;if(!_0x425dd8[_0x5cd6a4(0xb1)]['useWeather']||!_0x425dd8['config'][_0x5cd6a4(0xd5)])return _0x5cd6a4(0xcd);try{const _0x1f2e3c=_0x425dd8[_0x5cd6a4(0xb1)]['weatherInstance'];let _0x44f3b9=await _0x425dd8['getForeignStateAsync'](_0x1f2e3c+_0x5cd6a4(0xcf));if(!_0x44f3b9)_0x44f3b9=await _0x425dd8['getForeignStateAsync'](_0x1f2e3c+'.forecast.current.temperature');let _0x22851e=await _0x425dd8[_0x5cd6a4(0xe7)](_0x1f2e3c+'.Current.WeatherText');if(!_0x22851e)_0x22851e=await _0x425dd8[_0x5cd6a4(0xe7)](_0x1f2e3c+'.forecast.current.state');let _0x4bd9c4=_0x5cd6a4(0xc2);const _0x5b0430=await _0x425dd8[_0x5cd6a4(0xe7)](_0x1f2e3c+_0x5cd6a4(0xda));if(_0x5b0430)_0x4bd9c4=_0x5b0430[_0x5cd6a4(0xfa)]?'Nacht':_0x5cd6a4(0xc6);if(_0x44f3b9&&_0x22851e)return _0x44f3b9[_0x5cd6a4(0xfa)]+'Â°C,\x20'+_0x22851e['val']+',\x20LichtverhÃ¤ltnisse:\x20'+_0x4bd9c4;}catch(_0x238c82){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x533ec5,_0x5d3a60,_0x157fac,_0x565ed3){const _0x42265d=a0_0x157aec;if(!_0x533ec5['geminiModel'])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x50f5c5=Date[_0x42265d(0xac)]();if(decisionCache[_0x5d3a60]&&_0x50f5c5-decisionCache[_0x5d3a60][_0x42265d(0xed)]<CACHE_TTL_MS){const _0xe940bd=decisionCache[_0x5d3a60][_0x42265d(0xf1)];return _0x533ec5['log']['debug'](_0x42265d(0x123)+_0x5d3a60+_0x42265d(0xf6)+(_0xe940bd[_0x42265d(0x101)]?'OK':'NO')+'\x20('+_0xe940bd['reason']+')'),_0xe940bd;}if(!canCallApi())return _0x533ec5[_0x42265d(0x116)][_0x42265d(0xd1)](_0x42265d(0xbe)+_0x5d3a60+_0x42265d(0xce)),{'approved':!![],'reason':_0x42265d(0xa6)};const _0x326815=new Date()[_0x42265d(0xef)](),_0x3cbe51=await getWeatherContext(_0x533ec5),_0x38baed=PERSONA_MAPPING[_0x533ec5[_0x42265d(0xb1)][_0x42265d(0xc1)]||_0x42265d(0x109)],_0x4184b8=_0x42265d(0xe4)+_0x326815+',\x20Wetter:\x20'+_0x3cbe51+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x565ed3*0x64)['toFixed'](0x0)+_0x42265d(0xcb)+_0x5d3a60+_0x42265d(0xdc)+_0x157fac+_0x42265d(0xbc)+_0x38baed+_0x42265d(0xea);try{updateApiTimestamp();const _0x4bdebd=await _0x533ec5[_0x42265d(0x11e)][_0x42265d(0xdf)](_0x4184b8),_0x57848b=_0x4bdebd['response'][_0x42265d(0x115)]()[_0x42265d(0xc4)](/```json|```/g,'')[_0x42265d(0xc5)](),_0x2ff4e0=JSON['parse'](_0x57848b);return decisionCache[_0x5d3a60]={'decision':_0x2ff4e0,'timestamp':_0x50f5c5},_0x2ff4e0;}catch(_0x296906){return _0x533ec5['log']['warn'](_0x42265d(0xec)+_0x296906['message']),decisionCache[_0x5d3a60]={'decision':{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'},'timestamp':_0x50f5c5-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x42265d(0xad)};}}function a0_0x1c8f(_0x1b3c44,_0x472220){const _0x4382bc=a0_0x3b60();return a0_0x1c8f=function(_0x51dcf1,_0xb010e0){_0x51dcf1=_0x51dcf1-0xa2;let _0x3b6011=_0x4382bc[_0x51dcf1];return _0x3b6011;},a0_0x1c8f(_0x1b3c44,_0x472220);}async function runGeminiAnalysis(_0x599dd8,_0x5b04b3=''){const _0x30b619=a0_0x157aec;if(!_0x599dd8[_0x30b619(0x11e)])return;if(!canCallApi()){_0x599dd8['log'][_0x30b619(0xd1)](_0x30b619(0xe2));return;}if(_0x599dd8['eventHistory'][_0x30b619(0xfd)]===0x0)return;const _0x23e6e4=_0x599dd8['eventHistory'][_0x30b619(0xfb)](0x0,0xf),_0x1435a7=_0x599dd8['currentSystemMode'],_0x27a21f=PERSONA_MAPPING[_0x599dd8[_0x30b619(0xb1)][_0x30b619(0xc1)]||_0x30b619(0x109)],_0x489ffc=_0x599dd8['config']['livingContext']||_0x30b619(0xa7);let _0x5442c8=_0x30b619(0xc2);try{const _0x3312e4=await _0x599dd8[_0x30b619(0xa2)](_0x30b619(0xbb));if(_0x3312e4&&_0x3312e4['val'])_0x5442c8=_0x3312e4[_0x30b619(0xfa)];}catch(_0x1053e1){}let _0x1f20d4=![];try{const _0x30e9a6=await _0x599dd8[_0x30b619(0xa2)](_0x30b619(0x10b));if(_0x30e9a6&&_0x30e9a6[_0x30b619(0xfa)])_0x1f20d4=!![];}catch(_0x4ff704){}const _0x4c019d=_0x30b619(0x103)+_0x27a21f+_0x30b619(0x10a)+_0x489ffc+_0x30b619(0xe3)+_0x1435a7+'.\x20ANWESEND:\x20'+_0x5442c8+_0x30b619(0x11c)+JSON[_0x30b619(0x120)](_0x23e6e4)+_0x30b619(0xd7)+_0x5b04b3+_0x30b619(0xc8);try{updateApiTimestamp();const _0x917294=await _0x599dd8['geminiModel'][_0x30b619(0xdf)](_0x4c019d),_0x5dc4e8=JSON['parse'](_0x917294[_0x30b619(0xeb)][_0x30b619(0x115)]()[_0x30b619(0xc4)](/```json|```/g,'')[_0x30b619(0xc5)]());await _0x599dd8[_0x30b619(0xe8)]('analysis.lastResult',{'val':JSON[_0x30b619(0x120)](_0x5dc4e8),'ack':!![]});if(_0x5dc4e8[_0x30b619(0x10e)])await _0x599dd8['setStateAsync'](_0x30b619(0x10d),{'val':_0x5dc4e8['summary'],'ack':!![]});const _0x1dd3e7={'timestamp':Date['now'](),'id':Date[_0x30b619(0xac)]()[_0x30b619(0xfc)](),'analysis':{'activity':{'summary':_0x5dc4e8[_0x30b619(0x10e)],'isAlert':_0x5dc4e8[_0x30b619(0xa4)],'alertReason':_0x5dc4e8[_0x30b619(0x11a)]},'comfort':{'automationProposal':_0x5dc4e8[_0x30b619(0xab)]}}};_0x599dd8[_0x30b619(0xaf)]['unshift'](_0x1dd3e7);if(_0x599dd8[_0x30b619(0xaf)][_0x30b619(0xfd)]>0x32)_0x599dd8[_0x30b619(0xaf)][_0x30b619(0x10f)]();await _0x599dd8[_0x30b619(0xe8)]('analysis.analysisHistory',{'val':JSON[_0x30b619(0x120)](_0x599dd8[_0x30b619(0xaf)]),'ack':!![]});const _0x373f91=_0x5dc4e8[_0x30b619(0xa4)]||![];_0x373f91!==_0x599dd8[_0x30b619(0xdd)]&&(await _0x599dd8[_0x30b619(0xe8)](_0x30b619(0xc0),{'val':_0x373f91,'ack':!![]}),_0x599dd8[_0x30b619(0xdd)]=_0x373f91,_0x373f91&&(await _0x599dd8['setStateAsync'](_0x30b619(0x121),{'val':_0x5dc4e8[_0x30b619(0x11a)],'ack':!![]}),setup['sendNotification'](_0x599dd8,_0x30b619(0xff)+_0x5dc4e8[_0x30b619(0x11a)],![],_0x5dc4e8['isEmergency'])));if(_0x5dc4e8[_0x30b619(0xab)]&&_0x5dc4e8[_0x30b619(0xab)][_0x30b619(0xd3)]){await _0x599dd8[_0x30b619(0xe8)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x599dd8['setStateAsync'](_0x30b619(0xc7),{'val':_0x5dc4e8['automationProposal'][_0x30b619(0x122)],'ack':!![]}),await _0x599dd8[_0x30b619(0xe8)](_0x30b619(0xee),{'val':_0x5dc4e8[_0x30b619(0xab)]['targetId'],'ack':!![]}),await _0x599dd8['setStateAsync'](_0x30b619(0xca),{'val':JSON[_0x30b619(0x120)](_0x5dc4e8['automationProposal'][_0x30b619(0xbd)]),'ack':!![]});if(_0x1f20d4)executeAutomationAction(_0x599dd8);}}catch(_0x49b2f5){_0x599dd8[_0x30b619(0x116)][_0x30b619(0x112)](_0x30b619(0xaa)+_0x49b2f5[_0x30b619(0xb9)]);}}async function createDailyDigest(_0x1571b2,_0x2c6ad9){const _0x32425c=a0_0x157aec;if(!_0x1571b2[_0x32425c(0xf4)])return;if(!canCallApi()){await _0x1571b2[_0x32425c(0xe8)](LTM_DP_STATUS,{'val':'Skipped\x20(Traffic)','ack':!![]});return;}await _0x1571b2['setStateAsync'](LTM_DP_STATUS,{'val':_0x32425c(0xb7),'ack':!![]});if(!_0x1571b2[_0x32425c(0x11e)]||_0x1571b2[_0x32425c(0xb0)][_0x32425c(0xfd)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x1571b2[_0x32425c(0xe8)](LTM_DP_STATUS,{'val':_0x32425c(0xae),'ack':!![]});return;}const _0x2c00ec=JSON['parse'](JSON[_0x32425c(0x120)](_0x1571b2[_0x32425c(0xb0)])),_0x14b63e=_0x2c00ec[_0x32425c(0xfd)],_0xda9051='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x32425c(0x120)](_0x2c00ec);try{updateApiTimestamp();const _0x41cea5=await _0x1571b2[_0x32425c(0x11e)][_0x32425c(0xdf)](_0xda9051),_0x1b147f=JSON['parse'](_0x41cea5['response'][_0x32425c(0x115)]()[_0x32425c(0xc4)](/```json|```/g,'')[_0x32425c(0xc5)]()),_0x35aec3={'timestamp':new Date()[_0x32425c(0xb5)](),'eventCount':_0x14b63e,'summary':_0x1b147f[_0x32425c(0x10e)]||_0x32425c(0xd9),'activityLevel':_0x1b147f[_0x32425c(0xa8)]||_0x32425c(0x100),'systemMode':_0x1571b2[_0x32425c(0xb3)]};_0x1571b2[_0x32425c(0x114)][_0x32425c(0x107)](_0x35aec3);const _0xa897ff=_0x1571b2['config']['ltmLtbWindowDays']||0x3c;_0x1571b2[_0x32425c(0x114)][_0x32425c(0xfd)]>_0xa897ff&&_0x1571b2[_0x32425c(0x114)][_0x32425c(0x110)](0x0,_0x1571b2['dailyDigests'][_0x32425c(0xfd)]-_0xa897ff);await _0x1571b2[_0x32425c(0xe8)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x1571b2['dailyDigests']),'ack':!![]}),_0x1571b2[_0x32425c(0xb0)]=[],await _0x1571b2['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x1571b2[_0x32425c(0xb0)]),'ack':!![]}),await _0x1571b2[_0x32425c(0xe8)](LTM_DP_STATUS,{'val':_0x32425c(0xe0),'ack':!![]});const _0x55af17=_0x32425c(0x108)+_0x1b147f[_0x32425c(0x10e)]+'\x0aAktivitÃ¤t:\x20'+_0x1b147f[_0x32425c(0xa8)];setup['sendNotification'](_0x1571b2,_0x55af17,![],![]);if(_0x1571b2[_0x32425c(0xf4)]&&_0x2c6ad9)_0x2c6ad9[_0x32425c(0x11f)](_0x1571b2,_0x32425c(0xa9),{'digest':_0x35aec3});}catch(_0x193d5f){_0x1571b2[_0x32425c(0x116)]['error'](_0x193d5f[_0x32425c(0xb9)]);}}async function runBaselineDriftAnalysis(_0x1d5346){const _0x3c473c=a0_0x157aec;if(!_0x1d5346['isProVersion']||!_0x1d5346[_0x3c473c(0x11e)])return;if(!canCallApi())return;const _0x5f5224=_0x1d5346['config'][_0x3c473c(0xb4)]||0xe;if(_0x1d5346[_0x3c473c(0x114)][_0x3c473c(0xfd)]<_0x5f5224+0x7){await _0x1d5346[_0x3c473c(0xe8)](_0x3c473c(0xfe),{'val':_0x3c473c(0x11b),'ack':!![]});return;}const _0x129207=_0x1d5346['dailyDigests']['slice'](-_0x5f5224),_0x6c3b61=_0x1d5346[_0x3c473c(0x114)][_0x3c473c(0xfb)](0x0,_0x1d5346['dailyDigests'][_0x3c473c(0xfd)]-_0x5f5224),_0x29a9ae=_0x3c473c(0xde)+JSON[_0x3c473c(0x120)](_0x6c3b61)+_0x3c473c(0xba)+JSON['stringify'](_0x129207);try{updateApiTimestamp();const _0x1d6119=await _0x1d5346[_0x3c473c(0x11e)][_0x3c473c(0xdf)](_0x29a9ae),_0x327739=JSON[_0x3c473c(0x119)](_0x1d6119[_0x3c473c(0xeb)][_0x3c473c(0x115)]()['replace'](/```json|```/g,'')['trim']());_0x327739['baselineDrift']&&(await _0x1d5346[_0x3c473c(0xe8)](_0x3c473c(0xfe),{'val':_0x327739[_0x3c473c(0xf5)],'ack':!![]}),await _0x1d5346[_0x3c473c(0xe8)](_0x3c473c(0xf9),{'val':_0x327739[_0x3c473c(0xb2)],'ack':!![]}),await _0x1d5346['setStateAsync']('LTM.driftAnalysis.lastCheck',{'val':Date['now'](),'ack':!![]}));}catch(_0x317da5){}}async function executeAutomationAction(_0x52fbec){const _0x3fc535=a0_0x157aec;try{const _0x41f03c=await _0x52fbec[_0x3fc535(0xa2)](_0x3fc535(0xee)),_0x2d72fe=await _0x52fbec[_0x3fc535(0xa2)]('analysis.automation.targetValue');if(_0x41f03c&&_0x41f03c['val']&&_0x2d72fe){const _0xf1567c=_0x41f03c['val'];let _0x19ec8b=_0x2d72fe[_0x3fc535(0xfa)];try{_0x19ec8b=JSON[_0x3fc535(0x119)](_0x19ec8b);}catch(_0x28e0fe){}_0x52fbec['log'][_0x3fc535(0xf7)](_0x3fc535(0xa5)+_0xf1567c+_0x3fc535(0xc3)+_0x19ec8b),await _0x52fbec['setForeignStateAsync'](_0xf1567c,_0x19ec8b);}else _0x52fbec['log'][_0x3fc535(0xf8)]('ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x39c5bf){_0x52fbec[_0x3fc535(0x116)][_0x3fc535(0x112)](_0x3fc535(0xdb)+_0x39c5bf[_0x3fc535(0xb9)]);}}async function sendMorningBriefing(_0x4256bb){const _0x11af18=a0_0x157aec;if(!_0x4256bb[_0x11af18(0x11e)]){_0x4256bb[_0x11af18(0x116)][_0x11af18(0xf8)](_0x11af18(0x10c));return;}_0x4256bb['log']['info'](_0x11af18(0xcc));try{updateApiTimestamp();const _0x28696e='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x4378d0=await _0x4256bb[_0x11af18(0x11e)]['generateContent'](_0x28696e),_0x1490d4=_0x4378d0['response'][_0x11af18(0x115)]();_0x4256bb[_0x11af18(0x116)][_0x11af18(0xf7)](_0x11af18(0x102)+_0x1490d4[_0x11af18(0xfd)]+').\x20Sending\x20notification...'),setup['sendNotification'](_0x4256bb,_0x11af18(0xd4)+_0x1490d4);}catch(_0x5421b3){_0x4256bb['log'][_0x11af18(0x112)]('Briefing\x20Error:\x20'+_0x5421b3[_0x11af18(0xb9)]);}}module[a0_0x157aec(0x11d)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};