const a0_0x45c52e=a0_0x4659;(function(_0x28f14c,_0x1608c5){const _0x1a39ad=a0_0x4659,_0x5b43af=_0x28f14c();while(!![]){try{const _0x5d0380=parseInt(_0x1a39ad(0x259))/0x1*(parseInt(_0x1a39ad(0x203))/0x2)+parseInt(_0x1a39ad(0x1e6))/0x3+parseInt(_0x1a39ad(0x23b))/0x4*(-parseInt(_0x1a39ad(0x267))/0x5)+parseInt(_0x1a39ad(0x278))/0x6*(parseInt(_0x1a39ad(0x227))/0x7)+-parseInt(_0x1a39ad(0x26a))/0x8*(parseInt(_0x1a39ad(0x240))/0x9)+-parseInt(_0x1a39ad(0x24a))/0xa*(parseInt(_0x1a39ad(0x27f))/0xb)+-parseInt(_0x1a39ad(0x238))/0xc*(-parseInt(_0x1a39ad(0x1e8))/0xd);if(_0x5d0380===_0x1608c5)break;else _0x5b43af['push'](_0x5b43af['shift']());}catch(_0x1d1b5f){_0x5b43af['push'](_0x5b43af['shift']());}}}(a0_0x5f4a,0x4312c));const a0_0x285f5e=(function(){let _0x4de31d=!![];return function(_0x210bd5,_0x36fcec){const _0x390f34=_0x4de31d?function(){const _0x2a0cda=a0_0x4659;if(_0x36fcec){const _0x3b4861=_0x36fcec[_0x2a0cda(0x20b)](_0x210bd5,arguments);return _0x36fcec=null,_0x3b4861;}}:function(){};return _0x4de31d=![],_0x390f34;};}()),a0_0x2126c7=a0_0x285f5e(this,function(){const _0x5ddd9c=a0_0x4659;return a0_0x2126c7[_0x5ddd9c(0x266)]()[_0x5ddd9c(0x24b)](_0x5ddd9c(0x248))['toString']()[_0x5ddd9c(0x213)](a0_0x2126c7)[_0x5ddd9c(0x24b)]('(((.+)+)+)+$');});a0_0x2126c7();'use strict';const {GoogleGenerativeAI}=require(a0_0x45c52e(0x258)),setup=require(a0_0x45c52e(0x26e)),GEMINI_MODEL=a0_0x45c52e(0x289),LTM_DP_DAILY_DIGESTS=a0_0x45c52e(0x239),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG=a0_0x45c52e(0x228),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x45c52e(0x281),'senior_aal':a0_0x45c52e(0x20c),'family':a0_0x45c52e(0x247),'single_comfort':a0_0x45c52e(0x241),'security':a0_0x45c52e(0x220),'energy_saver':a0_0x45c52e(0x276)};function canCallApi(){const _0x402c4c=a0_0x45c52e,_0x42c970=Date[_0x402c4c(0x22d)]();return _0x42c970-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x36955d=a0_0x45c52e;lastGlobalApiCall=Date[_0x36955d(0x22d)]();}async function getWeatherContext(_0x16bab5){const _0xb9ee6c=a0_0x45c52e;if(!_0x16bab5[_0xb9ee6c(0x21e)][_0xb9ee6c(0x222)]||!_0x16bab5[_0xb9ee6c(0x21e)][_0xb9ee6c(0x252)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x47be05=_0x16bab5[_0xb9ee6c(0x21e)][_0xb9ee6c(0x252)];let _0x8ce0f=await _0x16bab5[_0xb9ee6c(0x214)](_0x47be05+_0xb9ee6c(0x25d));if(!_0x8ce0f)_0x8ce0f=await _0x16bab5[_0xb9ee6c(0x214)](_0x47be05+_0xb9ee6c(0x25f));let _0xfa071d=await _0x16bab5['getForeignStateAsync'](_0x47be05+_0xb9ee6c(0x256));if(!_0xfa071d)_0xfa071d=await _0x16bab5[_0xb9ee6c(0x214)](_0x47be05+_0xb9ee6c(0x242));let _0x57ce0e='Unbekannt';const _0x3ed60c=await _0x16bab5[_0xb9ee6c(0x214)](_0x47be05+_0xb9ee6c(0x26b));if(_0x3ed60c)_0x57ce0e=_0x3ed60c['val']?_0xb9ee6c(0x286):_0xb9ee6c(0x26f);if(_0x8ce0f&&_0xfa071d)return _0x8ce0f[_0xb9ee6c(0x25c)]+_0xb9ee6c(0x233)+_0xfa071d[_0xb9ee6c(0x25c)]+',\x20Lichtverh√§ltnisse:\x20'+_0x57ce0e;}catch(_0x563c4f){}return _0xb9ee6c(0x23d);}async function consultButler(_0x4c4a58,_0x1449a4,_0x324f9f,_0x365c08){const _0x43979e=a0_0x45c52e;if(!_0x4c4a58[_0x43979e(0x26d)])return{'approved':!![],'reason':_0x43979e(0x1f1)};const _0x246714=Date[_0x43979e(0x22d)]();if(decisionCache[_0x1449a4]&&_0x246714-decisionCache[_0x1449a4]['timestamp']<CACHE_TTL_MS){const _0x5bdc75=decisionCache[_0x1449a4][_0x43979e(0x211)];return _0x4c4a58['log']['debug']('ü§ñ\x20Butler\x20Cache\x20Hit:\x20'+_0x1449a4+'\x20->\x20'+(_0x5bdc75[_0x43979e(0x263)]?'OK':'NO')+'\x20('+_0x5bdc75[_0x43979e(0x1fb)]+')'),_0x5bdc75;}if(!canCallApi())return _0x4c4a58[_0x43979e(0x237)]['debug']('ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20'+_0x1449a4+_0x43979e(0x1ec)),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x5a1d31=new Date()[_0x43979e(0x275)](),_0x338e97=await getWeatherContext(_0x4c4a58),_0x3d2427=PERSONA_MAPPING[_0x4c4a58[_0x43979e(0x21e)]['aiPersona']||_0x43979e(0x24f)],_0x307e9f=_0x43979e(0x21c)+_0x5a1d31+_0x43979e(0x279)+_0x338e97+_0x43979e(0x254)+(_0x365c08*0x64)[_0x43979e(0x1f3)](0x0)+_0x43979e(0x235)+_0x1449a4+_0x43979e(0x268)+_0x324f9f+_0x43979e(0x1f6)+_0x3d2427+_0x43979e(0x216);try{updateApiTimestamp();const _0x2d3c60=await _0x4c4a58[_0x43979e(0x26d)]['generateContent'](_0x307e9f),_0x5e2148=_0x2d3c60['response'][_0x43979e(0x284)]()[_0x43979e(0x25e)](/```json|```/g,'')['trim'](),_0xda7c61=JSON[_0x43979e(0x22b)](_0x5e2148);return decisionCache[_0x1449a4]={'decision':_0xda7c61,'timestamp':_0x246714},_0xda7c61;}catch(_0x5bee3a){return _0x4c4a58[_0x43979e(0x237)][_0x43979e(0x223)](_0x43979e(0x277)+_0x5bee3a[_0x43979e(0x265)]),decisionCache[_0x1449a4]={'decision':{'approved':!![],'reason':_0x43979e(0x232)},'timestamp':_0x246714-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x43979e(0x232)};}}function a0_0x4659(_0x534ba3,_0x5d5286){const _0x5ae74=a0_0x5f4a();return a0_0x4659=function(_0x2126c7,_0x285f5e){_0x2126c7=_0x2126c7-0x1df;let _0x5f4a3d=_0x5ae74[_0x2126c7];return _0x5f4a3d;},a0_0x4659(_0x534ba3,_0x5d5286);}async function runGeminiAnalysis(_0x2c97bf,_0x21403f=''){const _0x1fe3e8=a0_0x45c52e;if(!_0x2c97bf[_0x1fe3e8(0x26d)])return;if(!canCallApi()){_0x2c97bf[_0x1fe3e8(0x237)][_0x1fe3e8(0x26c)](_0x1fe3e8(0x260));return;}if(_0x2c97bf[_0x1fe3e8(0x24c)]['length']===0x0)return;const _0x31696d=_0x2c97bf[_0x1fe3e8(0x24c)]['slice'](0x0,0xf),_0x3f9043=_0x2c97bf['currentSystemMode'],_0x42cd31=PERSONA_MAPPING[_0x2c97bf[_0x1fe3e8(0x21e)][_0x1fe3e8(0x282)]||_0x1fe3e8(0x24f)],_0xb007fd=_0x2c97bf['config'][_0x1fe3e8(0x207)]||'Keine\x20Details.';let _0x426360='Unbekannt';try{const _0x17ce8d=await _0x2c97bf['getStateAsync']('system.presenceWho');if(_0x17ce8d&&_0x17ce8d[_0x1fe3e8(0x25c)])_0x426360=_0x17ce8d['val'];}catch(_0x27c763){}let _0x10e733=![];try{const _0x9ac443=await _0x2c97bf['getStateAsync'](_0x1fe3e8(0x21a));if(_0x9ac443&&_0x9ac443['val'])_0x10e733=!![];}catch(_0x54fc1a){}const _0x378411=_0x1fe3e8(0x20f)+_0x42cd31+_0x1fe3e8(0x255)+_0xb007fd+_0x1fe3e8(0x23a)+_0x3f9043+_0x1fe3e8(0x1e7)+_0x426360+_0x1fe3e8(0x230)+JSON[_0x1fe3e8(0x1e2)](_0x31696d)+_0x1fe3e8(0x205)+_0x21403f+_0x1fe3e8(0x264);try{updateApiTimestamp();const _0x573615=await _0x2c97bf[_0x1fe3e8(0x26d)][_0x1fe3e8(0x20a)](_0x378411),_0x309c0f=JSON[_0x1fe3e8(0x22b)](_0x573615[_0x1fe3e8(0x251)][_0x1fe3e8(0x284)]()[_0x1fe3e8(0x25e)](/```json|```/g,'')['trim']());await _0x2c97bf[_0x1fe3e8(0x244)](_0x1fe3e8(0x249),{'val':JSON['stringify'](_0x309c0f),'ack':!![]});if(_0x309c0f[_0x1fe3e8(0x23f)])await _0x2c97bf['setStateAsync'](_0x1fe3e8(0x1eb),{'val':_0x309c0f[_0x1fe3e8(0x23f)],'ack':!![]});const _0x3852d0={'timestamp':Date['now'](),'id':Date[_0x1fe3e8(0x22d)]()[_0x1fe3e8(0x266)](),'analysis':{'activity':{'summary':_0x309c0f[_0x1fe3e8(0x23f)],'isAlert':_0x309c0f[_0x1fe3e8(0x287)],'alertReason':_0x309c0f[_0x1fe3e8(0x261)]},'comfort':{'automationProposal':_0x309c0f['automationProposal']}}};_0x2c97bf[_0x1fe3e8(0x1ff)][_0x1fe3e8(0x225)](_0x3852d0);if(_0x2c97bf[_0x1fe3e8(0x1ff)]['length']>0x32)_0x2c97bf[_0x1fe3e8(0x1ff)][_0x1fe3e8(0x23e)]();await _0x2c97bf[_0x1fe3e8(0x244)](_0x1fe3e8(0x226),{'val':JSON['stringify'](_0x2c97bf['analysisHistory']),'ack':!![]});const _0x75a1e3=_0x309c0f[_0x1fe3e8(0x287)]||![];_0x75a1e3!==_0x2c97bf[_0x1fe3e8(0x1f9)]&&(await _0x2c97bf['setStateAsync'](_0x1fe3e8(0x27d),{'val':_0x75a1e3,'ack':!![]}),_0x2c97bf[_0x1fe3e8(0x1f9)]=_0x75a1e3,_0x75a1e3&&(await _0x2c97bf[_0x1fe3e8(0x244)](_0x1fe3e8(0x1f7),{'val':_0x309c0f[_0x1fe3e8(0x261)],'ack':!![]}),setup[_0x1fe3e8(0x219)](_0x2c97bf,_0x1fe3e8(0x25a)+_0x309c0f[_0x1fe3e8(0x261)],![],_0x309c0f['isEmergency'])));if(_0x309c0f['automationProposal']&&_0x309c0f['automationProposal'][_0x1fe3e8(0x257)]){await _0x2c97bf[_0x1fe3e8(0x244)](_0x1fe3e8(0x231),{'val':!![],'ack':!![]}),await _0x2c97bf['setStateAsync'](_0x1fe3e8(0x272),{'val':_0x309c0f['automationProposal'][_0x1fe3e8(0x285)],'ack':!![]}),await _0x2c97bf[_0x1fe3e8(0x244)](_0x1fe3e8(0x22c),{'val':_0x309c0f[_0x1fe3e8(0x200)][_0x1fe3e8(0x1f0)],'ack':!![]}),await _0x2c97bf[_0x1fe3e8(0x244)](_0x1fe3e8(0x24d),{'val':JSON['stringify'](_0x309c0f[_0x1fe3e8(0x200)]['targetValue']),'ack':!![]});if(_0x10e733)executeAutomationAction(_0x2c97bf);}}catch(_0x24fc70){_0x2c97bf[_0x1fe3e8(0x237)][_0x1fe3e8(0x204)](_0x1fe3e8(0x1fd)+_0x24fc70[_0x1fe3e8(0x265)]);}}async function createDailyDigest(_0x55404c,_0x3c4fcf){const _0x1be64d=a0_0x45c52e;if(!_0x55404c[_0x1be64d(0x1f5)])return;if(!canCallApi()){await _0x55404c[_0x1be64d(0x244)](LTM_DP_STATUS,{'val':_0x1be64d(0x21d),'ack':!![]});return;}await _0x55404c[_0x1be64d(0x244)](LTM_DP_STATUS,{'val':_0x1be64d(0x21f),'ack':!![]});if(!_0x55404c[_0x1be64d(0x26d)]||_0x55404c[_0x1be64d(0x25b)][_0x1be64d(0x27e)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x55404c['setStateAsync'](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x567d4a=JSON[_0x1be64d(0x22b)](JSON[_0x1be64d(0x1e2)](_0x55404c[_0x1be64d(0x25b)])),_0x12a8ca=_0x567d4a[_0x1be64d(0x27e)],_0x34b0f2=_0x1be64d(0x245)+JSON[_0x1be64d(0x1e2)](_0x567d4a);try{updateApiTimestamp();const _0x4724e2=await _0x55404c[_0x1be64d(0x26d)][_0x1be64d(0x20a)](_0x34b0f2),_0x1d5362=JSON['parse'](_0x4724e2['response'][_0x1be64d(0x284)]()[_0x1be64d(0x25e)](/```json|```/g,'')[_0x1be64d(0x218)]()),_0x387be8={'timestamp':new Date()[_0x1be64d(0x274)](),'eventCount':_0x12a8ca,'summary':_0x1d5362['summary']||_0x1be64d(0x273),'activityLevel':_0x1d5362[_0x1be64d(0x202)]||_0x1be64d(0x246),'systemMode':_0x55404c[_0x1be64d(0x269)]};_0x55404c[_0x1be64d(0x1f8)]['push'](_0x387be8);const _0x2242ab=_0x55404c['config']['ltmLtbWindowDays']||0x3c;_0x55404c[_0x1be64d(0x1f8)]['length']>_0x2242ab&&_0x55404c[_0x1be64d(0x1f8)]['splice'](0x0,_0x55404c[_0x1be64d(0x1f8)][_0x1be64d(0x27e)]-_0x2242ab);await _0x55404c[_0x1be64d(0x244)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x55404c[_0x1be64d(0x1f8)]),'ack':!![]}),_0x55404c[_0x1be64d(0x25b)]=[],await _0x55404c[_0x1be64d(0x244)](LTM_DP_RAW_LOG,{'val':JSON[_0x1be64d(0x1e2)](_0x55404c[_0x1be64d(0x25b)]),'ack':!![]}),await _0x55404c[_0x1be64d(0x244)](LTM_DP_STATUS,{'val':_0x1be64d(0x1f4),'ack':!![]});const _0x46f432=_0x1be64d(0x22a)+_0x1d5362[_0x1be64d(0x23f)]+_0x1be64d(0x1e0)+_0x1d5362[_0x1be64d(0x202)];setup[_0x1be64d(0x219)](_0x55404c,_0x46f432,![],![]);if(_0x55404c['isProVersion']&&_0x3c4fcf)_0x3c4fcf[_0x1be64d(0x23c)](_0x55404c,_0x1be64d(0x1e9),{'digest':_0x387be8});}catch(_0x246d4a){_0x55404c['log'][_0x1be64d(0x204)](_0x246d4a[_0x1be64d(0x265)]);}}async function runBaselineDriftAnalysis(_0x237a9c){const _0xb014b7=a0_0x45c52e;if(!_0x237a9c[_0xb014b7(0x1f5)]||!_0x237a9c[_0xb014b7(0x26d)])return;if(!canCallApi())return;const _0xdf1891=_0x237a9c['config'][_0xb014b7(0x1fa)]||0xe;if(_0x237a9c[_0xb014b7(0x1f8)]['length']<_0xdf1891+0x7){await _0x237a9c[_0xb014b7(0x244)](_0xb014b7(0x20e),{'val':_0xb014b7(0x236),'ack':!![]});return;}const _0x3c1d65=_0x237a9c[_0xb014b7(0x1f8)][_0xb014b7(0x206)](-_0xdf1891),_0x57d573=_0x237a9c[_0xb014b7(0x1f8)][_0xb014b7(0x206)](0x0,_0x237a9c[_0xb014b7(0x1f8)][_0xb014b7(0x27e)]-_0xdf1891),_0x2bb81b=_0xb014b7(0x234)+JSON['stringify'](_0x57d573)+_0xb014b7(0x283)+JSON[_0xb014b7(0x1e2)](_0x3c1d65);try{updateApiTimestamp();const _0xc0eaa3=await _0x237a9c[_0xb014b7(0x26d)]['generateContent'](_0x2bb81b),_0x486dfd=JSON[_0xb014b7(0x22b)](_0xc0eaa3[_0xb014b7(0x251)]['text']()['replace'](/```json|```/g,'')[_0xb014b7(0x218)]());_0x486dfd[_0xb014b7(0x1ef)]&&(await _0x237a9c[_0xb014b7(0x244)](_0xb014b7(0x20e),{'val':_0x486dfd[_0xb014b7(0x1ef)],'ack':!![]}),await _0x237a9c['setStateAsync'](_0xb014b7(0x27b),{'val':_0x486dfd['driftDetails'],'ack':!![]}),await _0x237a9c['setStateAsync'](_0xb014b7(0x229),{'val':Date['now'](),'ack':!![]}));}catch(_0x48b349){}}async function executeAutomationAction(_0x3a3b01){const _0x5a8444=a0_0x45c52e;try{const _0x5b3429=await _0x3a3b01[_0x5a8444(0x253)](_0x5a8444(0x22c)),_0x33576b=await _0x3a3b01['getStateAsync'](_0x5a8444(0x24d));if(_0x5b3429&&_0x5b3429[_0x5a8444(0x25c)]&&_0x33576b){const _0xfdccce=_0x5b3429[_0x5a8444(0x25c)];let _0x201cf9=_0x33576b[_0x5a8444(0x25c)];try{_0x201cf9=JSON['parse'](_0x201cf9);}catch(_0xcb6b47){}_0x3a3b01[_0x5a8444(0x237)][_0x5a8444(0x270)](_0x5a8444(0x212)+_0xfdccce+_0x5a8444(0x20d)+_0x201cf9),await _0x3a3b01[_0x5a8444(0x1e4)](_0xfdccce,_0x201cf9);}else _0x3a3b01[_0x5a8444(0x237)][_0x5a8444(0x223)]('ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x5d3e51){_0x3a3b01[_0x5a8444(0x237)]['error'](_0x5a8444(0x24e)+_0x5d3e51[_0x5a8444(0x265)]);}}async function sendMorningBriefing(_0x505a06){const _0x3d7eef=a0_0x45c52e;if(!_0x505a06['geminiModel']){_0x505a06[_0x3d7eef(0x237)][_0x3d7eef(0x223)](_0x3d7eef(0x22f));return;}_0x505a06[_0x3d7eef(0x237)][_0x3d7eef(0x270)](_0x3d7eef(0x1ee));try{updateApiTimestamp();const _0x422367=_0x3d7eef(0x201),_0x52b76e=await _0x505a06[_0x3d7eef(0x26d)][_0x3d7eef(0x20a)](_0x422367),_0xd51c3d=_0x52b76e[_0x3d7eef(0x251)][_0x3d7eef(0x284)]();_0x505a06[_0x3d7eef(0x237)][_0x3d7eef(0x270)](_0x3d7eef(0x22e)+_0xd51c3d[_0x3d7eef(0x27e)]+_0x3d7eef(0x1f2)),setup[_0x3d7eef(0x219)](_0x505a06,_0x3d7eef(0x288)+_0xd51c3d);}catch(_0x5cae24){_0x505a06[_0x3d7eef(0x237)]['error'](_0x3d7eef(0x250)+_0x5cae24['message']);}}function a0_0x5f4a(){const _0x41f4cb=['2eiymrP','error','.\x20EMERGENCY:\x20','slice','livingContext','exports','NIGHT','generateContent','apply','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','\x20=\x20','LTM.driftAnalysis.baselineDrift','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','analysis.health.geminiNight','decision','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','constructor','getForeignStateAsync','\x0a\x20\x20\x20\x20EVENTS:\x0a','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','timestamp','trim','sendNotification','analysis.automation.autoApply','Keine\x20Daten\x20f√ºr\x20die\x20Nacht\x20aufgezeichnet\x20(Sensoren\x20ruhig).','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','Skipped\x20(Traffic)','config','Started...','Sicherheit\x20geht\x20vor.','analysis.health.geminiDay','useWeather','warn','setDate','unshift','analysis.analysisHistory','14VdGbHv','LTM.rawEventLog','LTM.driftAnalysis.lastCheck','üìÖ\x20Daily\x20Digest:\x0a','parse','analysis.automation.targetId','now','üåÖ\x20Briefing\x20generated\x20(Length:\x20','ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','.\x20EVENTS:\x20','analysis.automation.patternDetected','KI-Fehler\x20(Fallback)','¬∞C,\x20','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','%)\x20nach\x20\x22','N/A\x20(Learning)','log','12FWZxHQ','LTM.dailyDigests','.\x20SYSTEM_MODE:\x20','4UpNTcG','send','Wetterdaten\x20nicht\x20abrufbar','pop','summary','39699hNjXyv','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','.forecast.current.state','name','setStateAsync','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','normal','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','(((.+)+)+)+$','analysis.lastResult','912160PDtFvC','search','eventHistory','analysis.automation.targetValue','BUTLER\x20Execution\x20Error:\x20','generic','Briefing\x20Error:\x20','response','weatherInstance','getStateAsync','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','.\x20KONTEXT:\x20','.Current.WeatherText','detected','@google/generative-ai','237739YQxvYf','‚ö†Ô∏è\x20ALARM:\x20','rawEventLog','val','.Current.Temperature','replace','.forecast.current.temperature','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','alertReason','setHours','approved','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','message','toString','2124170EBticr','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','currentSystemMode','568EuDPdN','.Current.IsNight','debug','geminiModel','./setup','Tag','info','getDate','analysis.automation.description','Digest','toISOString','toLocaleTimeString','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','ü§ñ\x20Butler\x20Brain\x20Error:\x20','1501302USAcou',',\x20Wetter:\x20','join','LTM.driftAnalysis.driftDetails','getTime','analysis.isAlert','length','66vDzjyi','2-digit','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','aiPersona','\x0aSTB:\x20','text','description','Nacht','isAlert','üåÖ\x20Morning\x20Briefing:\x0a','models/gemini-flash-latest','Health\x20Report\x20Error:\x20','Bisher\x20keine\x20Aktivit√§t\x20seit\x2008:00\x20Uhr\x20verzeichnet.','\x0aAktivit√§t:\x20','Analysiere\x20diese\x20Events\x20der\x20NACHT\x20(22:00-08:00).\x20War\x20der\x20Schlaf\x20ruhig?\x20Gab\x20es\x20Badg√§nge?\x20Antwort\x20kurz\x20f√ºr\x20den\x20besorgten\x20Sohn\x20(max\x202\x20S√§tze).','stringify','\x0a\x20\x20\x20\x20ROLLE:\x20Medizinischer\x20Assistent\x20f√ºr\x20AAL\x20(Ambient\x20Assisted\x20Living).\x0a\x20\x20\x20\x20AUFGABE:\x20','setForeignStateAsync',')\x20generated.','693999KXgphM','.\x20ANWESEND:\x20','7676981bzWNQE','ANALYZE_HEALTH','value','analysis.activitySummary','\x20√ºbersprungen\x20(Auto-Approved).','Analysiere\x20diese\x20Events\x20des\x20TAGES\x20(08:00-Jetzt).\x20Aktivit√§t?\x20Mahlzeiten?\x20Haust√ºr?\x20Antwort\x20kurz\x20f√ºr\x20den\x20besorgten\x20Sohn\x20(max\x202\x20S√§tze).','üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','baselineDrift','targetId','KI\x20offline\x20(Fallback)',').\x20Sending\x20notification...','toFixed','Success','isProVersion','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','analysis.alertReason','dailyDigests','lastAlertState','ltmStbWindowDays','reason','\x0a\x20\x20\x20\x20ANTWORT-STIL:\x20Sachlich,\x20beruhigend,\x20pr√§zise.\x20Keine\x20Floskeln.\x0a\x20\x20\x20\x20','Gemini\x20Error:\x20','ü§ñ\x20Health\x20Report\x20(','analysisHistory','automationProposal','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','activityLevel'];a0_0x5f4a=function(){return _0x41f4cb;};return a0_0x5f4a();}async function generateHealthReport(_0x2943ad,_0x502384){const _0x302150=a0_0x45c52e;if(!_0x2943ad[_0x302150(0x26d)])return;const _0x334a73=Date[_0x302150(0x22d)]();_0x334a73-lastGlobalApiCall<0xbb8&&(_0x2943ad['log'][_0x302150(0x26c)]('ü§ñ\x20API\x20Cooldown.\x20Waiting\x202s...'),await new Promise(_0x57df0f=>setTimeout(_0x57df0f,0x7d0)));const _0x2c7b32=new Date();let _0x292ac1=0x0,_0x108e66=_0x2c7b32[_0x302150(0x27c)](),_0x50ba0b='';if(_0x502384===_0x302150(0x209)){const _0x388346=new Date(_0x2c7b32);_0x388346[_0x302150(0x224)](_0x388346[_0x302150(0x271)]()-0x1),_0x388346[_0x302150(0x262)](0x16,0x0,0x0,0x0),_0x292ac1=_0x388346['getTime']();const _0x327921=new Date(_0x2c7b32);_0x327921[_0x302150(0x262)](0x8,0x0,0x0,0x0),_0x108e66=_0x327921[_0x302150(0x27c)](),_0x50ba0b=_0x302150(0x1e1);}else{const _0x144f13=new Date(_0x2c7b32);_0x144f13[_0x302150(0x262)](0x8,0x0,0x0,0x0),_0x292ac1=_0x144f13[_0x302150(0x27c)](),_0x50ba0b=_0x302150(0x1ed);}const _0x36e78e=_0x2943ad[_0x302150(0x24c)]['filter'](_0x5bdd0f=>_0x5bdd0f[_0x302150(0x217)]>=_0x292ac1&&_0x5bdd0f[_0x302150(0x217)]<=_0x108e66);if(_0x36e78e[_0x302150(0x27e)]===0x0){const _0x1b5bf6=_0x502384==='NIGHT'?_0x302150(0x21b):_0x302150(0x1df),_0x3f1dda=_0x502384===_0x302150(0x209)?'analysis.health.geminiNight':_0x302150(0x221);await _0x2943ad[_0x302150(0x244)](_0x3f1dda,{'val':_0x1b5bf6,'ack':!![]});return;}const _0x495f00=_0x36e78e['map'](_0x576128=>new Date(_0x576128[_0x302150(0x217)])[_0x302150(0x275)]([],{'hour':_0x302150(0x280),'minute':_0x302150(0x280)})+'\x20'+_0x576128[_0x302150(0x243)]+'\x20('+_0x576128[_0x302150(0x1ea)]+')')[_0x302150(0x27a)]('\x0a'),_0x5bb976=_0x302150(0x1e3)+_0x50ba0b+_0x302150(0x215)+_0x495f00+_0x302150(0x1fc);try{updateApiTimestamp();const _0x2a7527=await _0x2943ad[_0x302150(0x26d)][_0x302150(0x20a)](_0x5bb976),_0x3f7a64=_0x2a7527['response']['text'](),_0x1aa57f=_0x502384===_0x302150(0x209)?_0x302150(0x210):_0x302150(0x221);await _0x2943ad[_0x302150(0x244)](_0x1aa57f,{'val':_0x3f7a64,'ack':!![]}),_0x2943ad[_0x302150(0x237)]['info'](_0x302150(0x1fe)+_0x502384+_0x302150(0x1e5));}catch(_0x1cce6b){_0x2943ad[_0x302150(0x237)][_0x302150(0x204)](_0x302150(0x28a)+_0x1cce6b[_0x302150(0x265)]);}}module[a0_0x45c52e(0x208)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler,'generateHealthReport':generateHealthReport};