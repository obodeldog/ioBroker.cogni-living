const a0_0x333eeb=a0_0x3861;(function(_0x3a3762,_0x1b1192){const _0x48e9e1=a0_0x3861,_0x2cd97f=_0x3a3762();while(!![]){try{const _0x77f1e9=-parseInt(_0x48e9e1(0xfb))/0x1*(-parseInt(_0x48e9e1(0x109))/0x2)+-parseInt(_0x48e9e1(0xc4))/0x3*(-parseInt(_0x48e9e1(0x101))/0x4)+parseInt(_0x48e9e1(0x10d))/0x5+parseInt(_0x48e9e1(0xe8))/0x6+-parseInt(_0x48e9e1(0xd7))/0x7+-parseInt(_0x48e9e1(0xf3))/0x8+-parseInt(_0x48e9e1(0x131))/0x9*(parseInt(_0x48e9e1(0xd5))/0xa);if(_0x77f1e9===_0x1b1192)break;else _0x2cd97f['push'](_0x2cd97f['shift']());}catch(_0x41f6e8){_0x2cd97f['push'](_0x2cd97f['shift']());}}}(a0_0xaf21,0xb0548));const a0_0x19e705=(function(){let _0x216909=!![];return function(_0x48542c,_0xc618b){const _0xa8da64=_0x216909?function(){if(_0xc618b){const _0x7d55b6=_0xc618b['apply'](_0x48542c,arguments);return _0xc618b=null,_0x7d55b6;}}:function(){};return _0x216909=![],_0xa8da64;};}()),a0_0x5d5d90=a0_0x19e705(this,function(){const _0x589109=a0_0x3861;return a0_0x5d5d90['toString']()[_0x589109(0xd1)](_0x589109(0xdf))[_0x589109(0x133)]()[_0x589109(0xef)](a0_0x5d5d90)[_0x589109(0xd1)](_0x589109(0xdf));});a0_0x5d5d90();'use strict';const {GoogleGenerativeAI}=require(a0_0x333eeb(0x123)),setup=require(a0_0x333eeb(0x10c)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x333eeb(0x12f),LTM_DP_STATUS=a0_0x333eeb(0xc3),LTM_DP_RAW_LOG=a0_0x333eeb(0x11b),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;function a0_0xaf21(){const _0x1744d8=['\x0aAktivit√§t:\x20','ANALYZE_HEALTH','debug','\x0aSTB:\x20','targetId','targetValue','alertReason','activityLevel','stringify','val','length','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','now','LTM.processingStatus','6MqUDgA','%)\x20nach\x20\x22','analysis.automation.targetId','generic','config','analysis.automation.targetValue','decision','setStateAsync','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','Wetterdaten\x20nicht\x20abrufbar','analysis.alertReason','üåÖ\x20Briefing\x20generated\x20(Length:\x20','analysisHistory','search','analysis.lastResult','geminiModel','automationProposal','480WSoPcf','detected','5180504UVwkKh','isAlert','Traffic-Schutz\x20(Auto-Approved)','summary','Digest','isProVersion','text','baselineDrift','(((.+)+)+)+$','.forecast.current.state','message','analysis.automation.patternDetected','description','.\x20EMERGENCY:\x20','toFixed','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','trim','4761996leKrry','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','.\x20KONTEXT:\x20','unshift','warn','Started...','lastAlertState','constructor','response','getForeignStateAsync','LTM.driftAnalysis.lastCheck','6904888ueMpbU','slice','BUTLER\x20Execution\x20Error:\x20','.Current.Temperature','setForeignStateAsync',').\x20Sending\x20notification...','error','LTM.driftAnalysis.driftDetails','868867wUVyfE','parse','sendNotification','¬∞C,\x20','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','Skipped\x20(Traffic)','2204264BKJAmD','currentSystemMode','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','LTM.driftAnalysis.baselineDrift','send','exports','Sicherheit\x20geht\x20vor.','Keine\x20Details.','2zNhGrQ','push','üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','./setup','1952230gcgteZ','toISOString','eventHistory','Unbekannt\x20(Kein\x20Sensor)','replace','pop','rawEventLog','analysis.automation.autoApply','analysis.activitySummary','approved','Tag','Unbekannt','Success','dailyDigests','LTM.rawEventLog','.\x20ANWESEND:\x20','KI-Fehler\x20(Fallback)','Skipped\x20(No\x20AI\x20or\x20Data)','KI\x20offline\x20(Fallback)','info','Gemini\x20Error:\x20','.Current.WeatherText','@google/generative-ai','system.presenceWho','livingContext','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','analysis.automation.description','Briefing\x20Error:\x20','N/A\x20(Learning)','generateContent','getStateAsync','weatherInstance','reason','.\x20EVENTS:\x20','LTM.dailyDigests','\x20->\x20','155565Xujvsl','log','toString'];a0_0xaf21=function(){return _0x1744d8;};return a0_0xaf21();}const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':'PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':a0_0x333eeb(0xe9),'single_comfort':a0_0x333eeb(0xff),'security':a0_0x333eeb(0x107),'energy_saver':a0_0x333eeb(0x13f)};function a0_0x3861(_0x3ec80e,_0x2c2022){const _0x35de5a=a0_0xaf21();return a0_0x3861=function(_0x5d5d90,_0x19e705){_0x5d5d90=_0x5d5d90-0xc3;let _0xaf210f=_0x35de5a[_0x5d5d90];return _0xaf210f;},a0_0x3861(_0x3ec80e,_0x2c2022);}function canCallApi(){const _0x159101=a0_0x333eeb,_0x3535d7=Date[_0x159101(0x141)]();return _0x3535d7-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x356ff2=a0_0x333eeb;lastGlobalApiCall=Date[_0x356ff2(0x141)]();}async function getWeatherContext(_0x2c8041){const _0x4a9e26=a0_0x333eeb;if(!_0x2c8041[_0x4a9e26(0xc8)]['useWeather']||!_0x2c8041[_0x4a9e26(0xc8)][_0x4a9e26(0x12c)])return _0x4a9e26(0x110);try{const _0x2361a5=_0x2c8041['config'][_0x4a9e26(0x12c)];let _0x809935=await _0x2c8041['getForeignStateAsync'](_0x2361a5+_0x4a9e26(0xf6));if(!_0x809935)_0x809935=await _0x2c8041[_0x4a9e26(0xf1)](_0x2361a5+'.forecast.current.temperature');let _0x5b84b4=await _0x2c8041[_0x4a9e26(0xf1)](_0x2361a5+_0x4a9e26(0x122));if(!_0x5b84b4)_0x5b84b4=await _0x2c8041[_0x4a9e26(0xf1)](_0x2361a5+_0x4a9e26(0xe0));let _0x266371=_0x4a9e26(0x118);const _0xa8ecee=await _0x2c8041[_0x4a9e26(0xf1)](_0x2361a5+'.Current.IsNight');if(_0xa8ecee)_0x266371=_0xa8ecee[_0x4a9e26(0x13d)]?'Nacht':_0x4a9e26(0x117);if(_0x809935&&_0x5b84b4)return _0x809935['val']+_0x4a9e26(0xfe)+_0x5b84b4[_0x4a9e26(0x13d)]+',\x20Lichtverh√§ltnisse:\x20'+_0x266371;}catch(_0x1ce0b3){}return _0x4a9e26(0xcd);}async function consultButler(_0x910621,_0x11bd2b,_0x3e26e6,_0x18b964){const _0x52147c=a0_0x333eeb;if(!_0x910621[_0x52147c(0xd3)])return{'approved':!![],'reason':_0x52147c(0x11f)};const _0x4fe53b=Date['now']();if(decisionCache[_0x11bd2b]&&_0x4fe53b-decisionCache[_0x11bd2b]['timestamp']<CACHE_TTL_MS){const _0x5c1224=decisionCache[_0x11bd2b][_0x52147c(0xca)];return _0x910621[_0x52147c(0x132)]['debug']('ü§ñ\x20Butler\x20Cache\x20Hit:\x20'+_0x11bd2b+_0x52147c(0x130)+(_0x5c1224[_0x52147c(0x116)]?'OK':'NO')+'\x20('+_0x5c1224[_0x52147c(0x12d)]+')'),_0x5c1224;}if(!canCallApi())return _0x910621[_0x52147c(0x132)][_0x52147c(0x136)](_0x52147c(0x140)+_0x11bd2b+'\x20√ºbersprungen\x20(Auto-Approved).'),{'approved':!![],'reason':_0x52147c(0xd9)};const _0x5305db=new Date()['toLocaleTimeString'](),_0x427100=await getWeatherContext(_0x910621),_0x280266=PERSONA_MAPPING[_0x910621[_0x52147c(0xc8)]['aiPersona']||_0x52147c(0xc7)],_0x3d8e75='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x5305db+',\x20Wetter:\x20'+_0x427100+_0x52147c(0xe6)+(_0x18b964*0x64)[_0x52147c(0xe5)](0x0)+_0x52147c(0xc5)+_0x11bd2b+_0x52147c(0x126)+_0x3e26e6+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x280266+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x4b5ccf=await _0x910621[_0x52147c(0xd3)]['generateContent'](_0x3d8e75),_0x194f0c=_0x4b5ccf[_0x52147c(0xf0)][_0x52147c(0xdd)]()['replace'](/```json|```/g,'')[_0x52147c(0xe7)](),_0x1af186=JSON[_0x52147c(0xfc)](_0x194f0c);return decisionCache[_0x11bd2b]={'decision':_0x1af186,'timestamp':_0x4fe53b},_0x1af186;}catch(_0x278a92){return _0x910621['log'][_0x52147c(0xec)]('ü§ñ\x20Butler\x20Brain\x20Error:\x20'+_0x278a92[_0x52147c(0xe1)]),decisionCache[_0x11bd2b]={'decision':{'approved':!![],'reason':_0x52147c(0x11d)},'timestamp':_0x4fe53b-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x52147c(0x11d)};}}async function runGeminiAnalysis(_0xe98d7f,_0x26a575=''){const _0x14d5d3=a0_0x333eeb;if(!_0xe98d7f[_0x14d5d3(0xd3)])return;if(!canCallApi()){_0xe98d7f[_0x14d5d3(0x132)][_0x14d5d3(0x136)]('ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0xe98d7f['eventHistory']['length']===0x0)return;const _0x190003=_0xe98d7f[_0x14d5d3(0x10f)][_0x14d5d3(0xf4)](0x0,0xf),_0x49fcf7=_0xe98d7f['currentSystemMode'],_0x2916cc=PERSONA_MAPPING[_0xe98d7f['config']['aiPersona']||_0x14d5d3(0xc7)],_0xf22d78=_0xe98d7f['config'][_0x14d5d3(0x125)]||_0x14d5d3(0x108);let _0x54b559='Unbekannt';try{const _0x4921e0=await _0xe98d7f['getStateAsync'](_0x14d5d3(0x124));if(_0x4921e0&&_0x4921e0[_0x14d5d3(0x13d)])_0x54b559=_0x4921e0[_0x14d5d3(0x13d)];}catch(_0x3dbcfd){}let _0x5e8c39=![];try{const _0x4d5030=await _0xe98d7f[_0x14d5d3(0x12b)](_0x14d5d3(0x114));if(_0x4d5030&&_0x4d5030[_0x14d5d3(0x13d)])_0x5e8c39=!![];}catch(_0x598902){}const _0x14ecbe='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x2916cc+_0x14d5d3(0xea)+_0xf22d78+'.\x20SYSTEM_MODE:\x20'+_0x49fcf7+_0x14d5d3(0x11c)+_0x54b559+_0x14d5d3(0x12e)+JSON['stringify'](_0x190003)+_0x14d5d3(0xe4)+_0x26a575+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x1b6c6d=await _0xe98d7f[_0x14d5d3(0xd3)][_0x14d5d3(0x12a)](_0x14ecbe),_0x460165=JSON[_0x14d5d3(0xfc)](_0x1b6c6d[_0x14d5d3(0xf0)]['text']()[_0x14d5d3(0x111)](/```json|```/g,'')[_0x14d5d3(0xe7)]());await _0xe98d7f['setStateAsync'](_0x14d5d3(0xd2),{'val':JSON['stringify'](_0x460165),'ack':!![]});if(_0x460165[_0x14d5d3(0xda)])await _0xe98d7f[_0x14d5d3(0xcb)](_0x14d5d3(0x115),{'val':_0x460165[_0x14d5d3(0xda)],'ack':!![]});const _0x255a66={'timestamp':Date[_0x14d5d3(0x141)](),'id':Date['now']()[_0x14d5d3(0x133)](),'analysis':{'activity':{'summary':_0x460165[_0x14d5d3(0xda)],'isAlert':_0x460165[_0x14d5d3(0xd8)],'alertReason':_0x460165['alertReason']},'comfort':{'automationProposal':_0x460165['automationProposal']}}};_0xe98d7f['analysisHistory'][_0x14d5d3(0xeb)](_0x255a66);if(_0xe98d7f[_0x14d5d3(0xd0)][_0x14d5d3(0x13e)]>0x32)_0xe98d7f[_0x14d5d3(0xd0)][_0x14d5d3(0x112)]();await _0xe98d7f[_0x14d5d3(0xcb)]('analysis.analysisHistory',{'val':JSON['stringify'](_0xe98d7f[_0x14d5d3(0xd0)]),'ack':!![]});const _0x28c16a=_0x460165[_0x14d5d3(0xd8)]||![];_0x28c16a!==_0xe98d7f[_0x14d5d3(0xee)]&&(await _0xe98d7f[_0x14d5d3(0xcb)]('analysis.isAlert',{'val':_0x28c16a,'ack':!![]}),_0xe98d7f[_0x14d5d3(0xee)]=_0x28c16a,_0x28c16a&&(await _0xe98d7f[_0x14d5d3(0xcb)](_0x14d5d3(0xce),{'val':_0x460165[_0x14d5d3(0x13a)],'ack':!![]}),setup[_0x14d5d3(0xfd)](_0xe98d7f,'‚ö†Ô∏è\x20ALARM:\x20'+_0x460165[_0x14d5d3(0x13a)],![],_0x460165['isEmergency'])));if(_0x460165[_0x14d5d3(0xd4)]&&_0x460165[_0x14d5d3(0xd4)][_0x14d5d3(0xd6)]){await _0xe98d7f[_0x14d5d3(0xcb)](_0x14d5d3(0xe2),{'val':!![],'ack':!![]}),await _0xe98d7f[_0x14d5d3(0xcb)](_0x14d5d3(0x127),{'val':_0x460165['automationProposal'][_0x14d5d3(0xe3)],'ack':!![]}),await _0xe98d7f[_0x14d5d3(0xcb)](_0x14d5d3(0xc6),{'val':_0x460165[_0x14d5d3(0xd4)][_0x14d5d3(0x138)],'ack':!![]}),await _0xe98d7f['setStateAsync'](_0x14d5d3(0xc9),{'val':JSON[_0x14d5d3(0x13c)](_0x460165[_0x14d5d3(0xd4)][_0x14d5d3(0x139)]),'ack':!![]});if(_0x5e8c39)executeAutomationAction(_0xe98d7f);}}catch(_0x198493){_0xe98d7f[_0x14d5d3(0x132)][_0x14d5d3(0xf9)](_0x14d5d3(0x121)+_0x198493[_0x14d5d3(0xe1)]);}}async function createDailyDigest(_0x27fd62,_0xef0e95){const _0x48e3c7=a0_0x333eeb;if(!_0x27fd62[_0x48e3c7(0xdc)])return;if(!canCallApi()){await _0x27fd62[_0x48e3c7(0xcb)](LTM_DP_STATUS,{'val':_0x48e3c7(0x100),'ack':!![]});return;}await _0x27fd62[_0x48e3c7(0xcb)](LTM_DP_STATUS,{'val':_0x48e3c7(0xed),'ack':!![]});if(!_0x27fd62['geminiModel']||_0x27fd62['rawEventLog'][_0x48e3c7(0x13e)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x27fd62[_0x48e3c7(0xcb)](LTM_DP_STATUS,{'val':_0x48e3c7(0x11e),'ack':!![]});return;}const _0xf283a8=JSON[_0x48e3c7(0xfc)](JSON[_0x48e3c7(0x13c)](_0x27fd62[_0x48e3c7(0x113)])),_0x2299b3=_0xf283a8[_0x48e3c7(0x13e)],_0x48134a='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x48e3c7(0x13c)](_0xf283a8);try{updateApiTimestamp();const _0x1b43ac=await _0x27fd62[_0x48e3c7(0xd3)][_0x48e3c7(0x12a)](_0x48134a),_0x3f4d06=JSON[_0x48e3c7(0xfc)](_0x1b43ac['response'][_0x48e3c7(0xdd)]()[_0x48e3c7(0x111)](/```json|```/g,'')['trim']()),_0x2bcca5={'timestamp':new Date()[_0x48e3c7(0x10e)](),'eventCount':_0x2299b3,'summary':_0x3f4d06[_0x48e3c7(0xda)]||_0x48e3c7(0xdb),'activityLevel':_0x3f4d06[_0x48e3c7(0x13b)]||'normal','systemMode':_0x27fd62[_0x48e3c7(0x102)]};_0x27fd62[_0x48e3c7(0x11a)][_0x48e3c7(0x10a)](_0x2bcca5);const _0x1ee84a=_0x27fd62[_0x48e3c7(0xc8)]['ltmLtbWindowDays']||0x3c;_0x27fd62[_0x48e3c7(0x11a)][_0x48e3c7(0x13e)]>_0x1ee84a&&_0x27fd62[_0x48e3c7(0x11a)]['splice'](0x0,_0x27fd62[_0x48e3c7(0x11a)][_0x48e3c7(0x13e)]-_0x1ee84a);await _0x27fd62[_0x48e3c7(0xcb)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x48e3c7(0x13c)](_0x27fd62[_0x48e3c7(0x11a)]),'ack':!![]}),_0x27fd62[_0x48e3c7(0x113)]=[],await _0x27fd62[_0x48e3c7(0xcb)](LTM_DP_RAW_LOG,{'val':JSON[_0x48e3c7(0x13c)](_0x27fd62[_0x48e3c7(0x113)]),'ack':!![]}),await _0x27fd62['setStateAsync'](LTM_DP_STATUS,{'val':_0x48e3c7(0x119),'ack':!![]});const _0x35c34d='üìÖ\x20Daily\x20Digest:\x0a'+_0x3f4d06[_0x48e3c7(0xda)]+_0x48e3c7(0x134)+_0x3f4d06['activityLevel'];setup['sendNotification'](_0x27fd62,_0x35c34d,![],![]);if(_0x27fd62[_0x48e3c7(0xdc)]&&_0xef0e95)_0xef0e95[_0x48e3c7(0x105)](_0x27fd62,_0x48e3c7(0x135),{'digest':_0x2bcca5});}catch(_0x19e79e){_0x27fd62[_0x48e3c7(0x132)][_0x48e3c7(0xf9)](_0x19e79e[_0x48e3c7(0xe1)]);}}async function runBaselineDriftAnalysis(_0x172f5e){const _0x1463fb=a0_0x333eeb;if(!_0x172f5e[_0x1463fb(0xdc)]||!_0x172f5e[_0x1463fb(0xd3)])return;if(!canCallApi())return;const _0x4a3e1b=_0x172f5e[_0x1463fb(0xc8)]['ltmStbWindowDays']||0xe;if(_0x172f5e[_0x1463fb(0x11a)][_0x1463fb(0x13e)]<_0x4a3e1b+0x7){await _0x172f5e[_0x1463fb(0xcb)](_0x1463fb(0x104),{'val':_0x1463fb(0x129),'ack':!![]});return;}const _0x30a77a=_0x172f5e[_0x1463fb(0x11a)][_0x1463fb(0xf4)](-_0x4a3e1b),_0x3c9257=_0x172f5e[_0x1463fb(0x11a)]['slice'](0x0,_0x172f5e['dailyDigests'][_0x1463fb(0x13e)]-_0x4a3e1b),_0x2dc3bc=_0x1463fb(0xcc)+JSON[_0x1463fb(0x13c)](_0x3c9257)+_0x1463fb(0x137)+JSON['stringify'](_0x30a77a);try{updateApiTimestamp();const _0x1b24ee=await _0x172f5e[_0x1463fb(0xd3)][_0x1463fb(0x12a)](_0x2dc3bc),_0x27af42=JSON[_0x1463fb(0xfc)](_0x1b24ee[_0x1463fb(0xf0)]['text']()[_0x1463fb(0x111)](/```json|```/g,'')['trim']());_0x27af42[_0x1463fb(0xde)]&&(await _0x172f5e[_0x1463fb(0xcb)]('LTM.driftAnalysis.baselineDrift',{'val':_0x27af42[_0x1463fb(0xde)],'ack':!![]}),await _0x172f5e[_0x1463fb(0xcb)](_0x1463fb(0xfa),{'val':_0x27af42['driftDetails'],'ack':!![]}),await _0x172f5e[_0x1463fb(0xcb)](_0x1463fb(0xf2),{'val':Date[_0x1463fb(0x141)](),'ack':!![]}));}catch(_0x33a220){}}async function executeAutomationAction(_0x551e05){const _0x55cfe1=a0_0x333eeb;try{const _0x3c7bc6=await _0x551e05['getStateAsync']('analysis.automation.targetId'),_0x53e340=await _0x551e05[_0x55cfe1(0x12b)](_0x55cfe1(0xc9));if(_0x3c7bc6&&_0x3c7bc6[_0x55cfe1(0x13d)]&&_0x53e340){const _0x58b608=_0x3c7bc6[_0x55cfe1(0x13d)];let _0x4c102e=_0x53e340[_0x55cfe1(0x13d)];try{_0x4c102e=JSON[_0x55cfe1(0xfc)](_0x4c102e);}catch(_0x18efcd){}_0x551e05[_0x55cfe1(0x132)][_0x55cfe1(0x120)](_0x55cfe1(0x103)+_0x58b608+'\x20=\x20'+_0x4c102e),await _0x551e05[_0x55cfe1(0xf7)](_0x58b608,_0x4c102e);}else _0x551e05['log'][_0x55cfe1(0xec)]('ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x25453f){_0x551e05[_0x55cfe1(0x132)][_0x55cfe1(0xf9)](_0x55cfe1(0xf5)+_0x25453f[_0x55cfe1(0xe1)]);}}async function sendMorningBriefing(_0x3157f5){const _0x2b3c81=a0_0x333eeb;if(!_0x3157f5[_0x2b3c81(0xd3)]){_0x3157f5['log'][_0x2b3c81(0xec)]('ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.');return;}_0x3157f5['log'][_0x2b3c81(0x120)](_0x2b3c81(0x10b));try{updateApiTimestamp();const _0x2448bf='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x5c99cf=await _0x3157f5['geminiModel'][_0x2b3c81(0x12a)](_0x2448bf),_0xe1c70e=_0x5c99cf[_0x2b3c81(0xf0)]['text']();_0x3157f5[_0x2b3c81(0x132)][_0x2b3c81(0x120)](_0x2b3c81(0xcf)+_0xe1c70e[_0x2b3c81(0x13e)]+_0x2b3c81(0xf8)),setup[_0x2b3c81(0xfd)](_0x3157f5,'üåÖ\x20Morning\x20Briefing:\x0a'+_0xe1c70e);}catch(_0x2eb171){_0x3157f5[_0x2b3c81(0x132)][_0x2b3c81(0xf9)](_0x2b3c81(0x128)+_0x2eb171[_0x2b3c81(0xe1)]);}}module[a0_0x333eeb(0x106)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};