const a0_0x685f8e=a0_0x115c;(function(_0xf90b2d,_0x51b573){const _0x250d66=a0_0x115c,_0x450ce8=_0xf90b2d();while(!![]){try{const _0x1d13ad=-parseInt(_0x250d66(0xcf))/0x1+-parseInt(_0x250d66(0xb2))/0x2+parseInt(_0x250d66(0x96))/0x3*(-parseInt(_0x250d66(0xb7))/0x4)+parseInt(_0x250d66(0xa6))/0x5*(-parseInt(_0x250d66(0xed))/0x6)+parseInt(_0x250d66(0xb9))/0x7+parseInt(_0x250d66(0x108))/0x8*(parseInt(_0x250d66(0xee))/0x9)+parseInt(_0x250d66(0xc7))/0xa*(parseInt(_0x250d66(0xa2))/0xb);if(_0x1d13ad===_0x51b573)break;else _0x450ce8['push'](_0x450ce8['shift']());}catch(_0x760c88){_0x450ce8['push'](_0x450ce8['shift']());}}}(a0_0x449c,0xde2e6));function a0_0x115c(_0x5d8b44,_0x1bc716){const _0x159126=a0_0x449c();return a0_0x115c=function(_0x48534c,_0x34e47f){_0x48534c=_0x48534c-0x91;let _0x449cf4=_0x159126[_0x48534c];return _0x449cf4;},a0_0x115c(_0x5d8b44,_0x1bc716);}const a0_0x34e47f=(function(){let _0x2dc5d9=!![];return function(_0x13c992,_0x1aee7c){const _0x2f3d97=_0x2dc5d9?function(){const _0xfd16aa=a0_0x115c;if(_0x1aee7c){const _0x591b5d=_0x1aee7c[_0xfd16aa(0xdf)](_0x13c992,arguments);return _0x1aee7c=null,_0x591b5d;}}:function(){};return _0x2dc5d9=![],_0x2f3d97;};}()),a0_0x48534c=a0_0x34e47f(this,function(){const _0x20c561=a0_0x115c;return a0_0x48534c[_0x20c561(0xa7)]()[_0x20c561(0x113)](_0x20c561(0xca))[_0x20c561(0xa7)]()[_0x20c561(0x107)](a0_0x48534c)[_0x20c561(0x113)](_0x20c561(0xca));});a0_0x48534c();'use strict';const {GoogleGenerativeAI}=require(a0_0x685f8e(0x115)),setup=require(a0_0x685f8e(0xcd)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x685f8e(0xf4),LTM_DP_STATUS=a0_0x685f8e(0xef),LTM_DP_RAW_LOG=a0_0x685f8e(0xb1),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':'PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':a0_0x685f8e(0x109),'single_comfort':a0_0x685f8e(0x9d),'security':a0_0x685f8e(0xd0),'energy_saver':a0_0x685f8e(0x101)};function canCallApi(){const _0x3df149=Date['now']();return _0x3df149-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x37dd55=a0_0x685f8e;lastGlobalApiCall=Date[_0x37dd55(0x9c)]();}async function getWeatherContext(_0x5713bf){const _0xec0887=a0_0x685f8e;if(!_0x5713bf['config']['useWeather']||!_0x5713bf['config']['weatherInstance'])return _0xec0887(0xba);try{const _0x3d1b55=_0x5713bf[_0xec0887(0xfd)][_0xec0887(0xfb)];let _0x498dd8=await _0x5713bf['getForeignStateAsync'](_0x3d1b55+_0xec0887(0x112));if(!_0x498dd8)_0x498dd8=await _0x5713bf[_0xec0887(0xcb)](_0x3d1b55+_0xec0887(0x93));let _0x3bf18c=await _0x5713bf['getForeignStateAsync'](_0x3d1b55+_0xec0887(0x102));if(!_0x3bf18c)_0x3bf18c=await _0x5713bf[_0xec0887(0xcb)](_0x3d1b55+'.forecast.current.state');let _0x3bcab6='Unbekannt';const _0x9829da=await _0x5713bf[_0xec0887(0xcb)](_0x3d1b55+_0xec0887(0xbf));if(_0x9829da)_0x3bcab6=_0x9829da[_0xec0887(0xb5)]?_0xec0887(0x92):_0xec0887(0x9b);if(_0x498dd8&&_0x3bf18c)return _0x498dd8['val']+_0xec0887(0xe9)+_0x3bf18c[_0xec0887(0xb5)]+',\x20Lichtverh√§ltnisse:\x20'+_0x3bcab6;}catch(_0x3ff845){}return _0xec0887(0xac);}async function consultButler(_0x3fcb40,_0x2362bc,_0x50cd21,_0x440a53){const _0x168833=a0_0x685f8e;if(!_0x3fcb40[_0x168833(0xe4)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x9a407b=Date[_0x168833(0x9c)]();if(decisionCache[_0x2362bc]&&_0x9a407b-decisionCache[_0x2362bc][_0x168833(0xf8)]<CACHE_TTL_MS){const _0x317765=decisionCache[_0x2362bc][_0x168833(0x103)];return _0x3fcb40[_0x168833(0xbd)][_0x168833(0xdc)](_0x168833(0xd2)+_0x2362bc+_0x168833(0xf0)+(_0x317765[_0x168833(0xb0)]?'OK':'NO')+'\x20('+_0x317765[_0x168833(0x10d)]+')'),_0x317765;}if(!canCallApi())return _0x3fcb40[_0x168833(0xbd)][_0x168833(0xdc)](_0x168833(0xbe)+_0x2362bc+_0x168833(0x91)),{'approved':!![],'reason':_0x168833(0x99)};const _0x2a4524=new Date()['toLocaleTimeString'](),_0x280d9d=await getWeatherContext(_0x3fcb40),_0x47eac8=PERSONA_MAPPING[_0x3fcb40[_0x168833(0xfd)][_0x168833(0xf9)]||'generic'],_0x4095dc=_0x168833(0xf7)+_0x2a4524+_0x168833(0xc0)+_0x280d9d+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x440a53*0x64)[_0x168833(0xc1)](0x0)+'%)\x20nach\x20\x22'+_0x2362bc+_0x168833(0x10e)+_0x50cd21+_0x168833(0xd1)+_0x47eac8+_0x168833(0xc8);try{updateApiTimestamp();const _0x123021=await _0x3fcb40['geminiModel'][_0x168833(0x111)](_0x4095dc),_0x2dceea=_0x123021[_0x168833(0xcc)][_0x168833(0x105)]()['replace'](/```json|```/g,'')[_0x168833(0x97)](),_0x2d350a=JSON[_0x168833(0xbc)](_0x2dceea);return decisionCache[_0x2362bc]={'decision':_0x2d350a,'timestamp':_0x9a407b},_0x2d350a;}catch(_0x8d4173){return _0x3fcb40[_0x168833(0xbd)][_0x168833(0x94)]('ü§ñ\x20Butler\x20Brain\x20Error:\x20'+_0x8d4173[_0x168833(0x10b)]),decisionCache[_0x2362bc]={'decision':{'approved':!![],'reason':_0x168833(0xa1)},'timestamp':_0x9a407b-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x168833(0xa1)};}}async function runGeminiAnalysis(_0x670ce4,_0x1d2222=''){const _0x10d22a=a0_0x685f8e;if(!_0x670ce4[_0x10d22a(0xe4)])return;if(!canCallApi()){_0x670ce4[_0x10d22a(0xbd)][_0x10d22a(0xdc)]('ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x670ce4['eventHistory']['length']===0x0)return;const _0x2cbbeb=_0x670ce4[_0x10d22a(0xf5)][_0x10d22a(0x100)](0x0,0xf),_0x306b7a=_0x670ce4['currentSystemMode'],_0xacd673=PERSONA_MAPPING[_0x670ce4[_0x10d22a(0xfd)][_0x10d22a(0xf9)]||_0x10d22a(0xc9)],_0x3ee00b=_0x670ce4[_0x10d22a(0xfd)][_0x10d22a(0xc3)]||_0x10d22a(0x104);let _0x2d842c='Unbekannt';try{const _0x30296a=await _0x670ce4['getStateAsync'](_0x10d22a(0x9e));if(_0x30296a&&_0x30296a[_0x10d22a(0xb5)])_0x2d842c=_0x30296a[_0x10d22a(0xb5)];}catch(_0x43d133){}let _0xad9f4b=![];try{const _0x2e5d52=await _0x670ce4[_0x10d22a(0xa8)](_0x10d22a(0xd7));if(_0x2e5d52&&_0x2e5d52[_0x10d22a(0xb5)])_0xad9f4b=!![];}catch(_0x564e28){}const _0x54575f='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0xacd673+_0x10d22a(0xda)+_0x3ee00b+'.\x20SYSTEM_MODE:\x20'+_0x306b7a+_0x10d22a(0xd9)+_0x2d842c+'.\x20EVENTS:\x20'+JSON['stringify'](_0x2cbbeb)+_0x10d22a(0x114)+_0x1d2222+_0x10d22a(0x9a);try{updateApiTimestamp();const _0x2fa7a2=await _0x670ce4[_0x10d22a(0xe4)][_0x10d22a(0x111)](_0x54575f),_0x288f3d=JSON[_0x10d22a(0xbc)](_0x2fa7a2['response']['text']()[_0x10d22a(0xbb)](/```json|```/g,'')[_0x10d22a(0x97)]());await _0x670ce4[_0x10d22a(0x9f)](_0x10d22a(0xc5),{'val':JSON[_0x10d22a(0xc2)](_0x288f3d),'ack':!![]});if(_0x288f3d['summary'])await _0x670ce4[_0x10d22a(0x9f)]('analysis.activitySummary',{'val':_0x288f3d[_0x10d22a(0xdb)],'ack':!![]});const _0x23c59c={'timestamp':Date[_0x10d22a(0x9c)](),'id':Date['now']()['toString'](),'analysis':{'activity':{'summary':_0x288f3d[_0x10d22a(0xdb)],'isAlert':_0x288f3d[_0x10d22a(0xb6)],'alertReason':_0x288f3d[_0x10d22a(0x95)]},'comfort':{'automationProposal':_0x288f3d['automationProposal']}}};_0x670ce4[_0x10d22a(0xae)][_0x10d22a(0xfc)](_0x23c59c);if(_0x670ce4[_0x10d22a(0xae)][_0x10d22a(0xa0)]>0x32)_0x670ce4['analysisHistory'][_0x10d22a(0xce)]();await _0x670ce4[_0x10d22a(0x9f)]('analysis.analysisHistory',{'val':JSON['stringify'](_0x670ce4[_0x10d22a(0xae)]),'ack':!![]});const _0x40bd13=_0x288f3d['isAlert']||![];_0x40bd13!==_0x670ce4[_0x10d22a(0xe5)]&&(await _0x670ce4[_0x10d22a(0x9f)](_0x10d22a(0xc6),{'val':_0x40bd13,'ack':!![]}),_0x670ce4[_0x10d22a(0xe5)]=_0x40bd13,_0x40bd13&&(await _0x670ce4['setStateAsync'](_0x10d22a(0x106),{'val':_0x288f3d[_0x10d22a(0x95)],'ack':!![]}),setup[_0x10d22a(0x118)](_0x670ce4,_0x10d22a(0xf2)+_0x288f3d[_0x10d22a(0x95)],![],_0x288f3d[_0x10d22a(0xdd)])));if(_0x288f3d['automationProposal']&&_0x288f3d[_0x10d22a(0x116)]['detected']){await _0x670ce4[_0x10d22a(0x9f)](_0x10d22a(0xf1),{'val':!![],'ack':!![]}),await _0x670ce4[_0x10d22a(0x9f)](_0x10d22a(0xec),{'val':_0x288f3d[_0x10d22a(0x116)][_0x10d22a(0x119)],'ack':!![]}),await _0x670ce4[_0x10d22a(0x9f)]('analysis.automation.targetId',{'val':_0x288f3d[_0x10d22a(0x116)][_0x10d22a(0xc4)],'ack':!![]}),await _0x670ce4['setStateAsync'](_0x10d22a(0x10f),{'val':JSON['stringify'](_0x288f3d[_0x10d22a(0x116)][_0x10d22a(0x10a)]),'ack':!![]});if(_0xad9f4b)executeAutomationAction(_0x670ce4);}}catch(_0x194aca){_0x670ce4[_0x10d22a(0xbd)][_0x10d22a(0xd4)](_0x10d22a(0xab)+_0x194aca[_0x10d22a(0x10b)]);}}function a0_0x449c(){const _0x25505a=['.\x20EMERGENCY:\x20','@google/generative-ai','automationProposal','üåÖ\x20Morning\x20Briefing:\x0a','sendNotification','description','\x20√ºbersprungen\x20(Auto-Approved).','Nacht','.forecast.current.temperature','warn','alertReason','12mygBmL','trim','üåÖ\x20Briefing\x20generated\x20(Length:\x20','Traffic-Schutz\x20(Auto-Approved)','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','Tag','now','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','system.presenceWho','setStateAsync','length','KI-Fehler\x20(Fallback)','33CwsHlU','LTM.driftAnalysis.driftDetails','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','push','105rEcFmH','toString','getStateAsync','ltmStbWindowDays','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','Gemini\x20Error:\x20','Wetterdaten\x20nicht\x20abrufbar','BUTLER\x20Execution\x20Error:\x20','analysisHistory','isProVersion','approved','LTM.rawEventLog','693998WpmCkr','send','analysis.automation.targetId','val','isAlert','1082888zcSAwr','activityLevel','4404344KmlTdh','Unbekannt\x20(Kein\x20Sensor)','replace','parse','log','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','.Current.IsNight',',\x20Wetter:\x20','toFixed','stringify','livingContext','targetId','analysis.lastResult','analysis.isAlert','9433990pFImLo','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','generic','(((.+)+)+)+$','getForeignStateAsync','response','./setup','pop','1289682cMTjzx','Sicherheit\x20geht\x20vor.','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','error','toISOString','Started...','analysis.automation.autoApply',').\x20Sending\x20notification...','.\x20ANWESEND:\x20','.\x20KONTEXT:\x20','summary','debug','isEmergency','Success','apply','normal','üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','setForeignStateAsync','LTM.driftAnalysis.lastCheck','geminiModel','lastAlertState','Digest','dailyDigests','ANALYZE_HEALTH','¬∞C,\x20','üìÖ\x20Daily\x20Digest:\x0a','rawEventLog','analysis.automation.description','260298dtsvFd','9731493kYBsjx','LTM.processingStatus','\x20->\x20','analysis.automation.patternDetected','‚ö†Ô∏è\x20ALARM:\x20','baselineDrift','LTM.dailyDigests','eventHistory','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','timestamp','aiPersona','Skipped\x20(No\x20AI\x20or\x20Data)','weatherInstance','unshift','config','ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','Skipped\x20(Traffic)','slice','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','.Current.WeatherText','decision','Keine\x20Details.','text','analysis.alertReason','constructor','8cmXZrw','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','targetValue','message','info','reason','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','analysis.automation.targetValue','exports','generateContent','.Current.Temperature','search'];a0_0x449c=function(){return _0x25505a;};return a0_0x449c();}async function createDailyDigest(_0x5689af,_0x1acc1a){const _0x4a6104=a0_0x685f8e;if(!_0x5689af[_0x4a6104(0xaf)])return;if(!canCallApi()){await _0x5689af['setStateAsync'](LTM_DP_STATUS,{'val':_0x4a6104(0xff),'ack':!![]});return;}await _0x5689af[_0x4a6104(0x9f)](LTM_DP_STATUS,{'val':_0x4a6104(0xd6),'ack':!![]});if(!_0x5689af['geminiModel']||_0x5689af[_0x4a6104(0xeb)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x5689af[_0x4a6104(0x9f)](LTM_DP_STATUS,{'val':_0x4a6104(0xfa),'ack':!![]});return;}const _0x4c67b6=JSON[_0x4a6104(0xbc)](JSON['stringify'](_0x5689af['rawEventLog'])),_0x855187=_0x4c67b6[_0x4a6104(0xa0)],_0x16e14e=_0x4a6104(0xaa)+JSON[_0x4a6104(0xc2)](_0x4c67b6);try{updateApiTimestamp();const _0x592ccb=await _0x5689af[_0x4a6104(0xe4)][_0x4a6104(0x111)](_0x16e14e),_0x154ab2=JSON['parse'](_0x592ccb['response'][_0x4a6104(0x105)]()[_0x4a6104(0xbb)](/```json|```/g,'')['trim']()),_0x12243f={'timestamp':new Date()[_0x4a6104(0xd5)](),'eventCount':_0x855187,'summary':_0x154ab2[_0x4a6104(0xdb)]||_0x4a6104(0xe6),'activityLevel':_0x154ab2[_0x4a6104(0xb8)]||_0x4a6104(0xe0),'systemMode':_0x5689af['currentSystemMode']};_0x5689af[_0x4a6104(0xe7)][_0x4a6104(0xa5)](_0x12243f);const _0x52f998=_0x5689af[_0x4a6104(0xfd)]['ltmLtbWindowDays']||0x3c;_0x5689af[_0x4a6104(0xe7)][_0x4a6104(0xa0)]>_0x52f998&&_0x5689af[_0x4a6104(0xe7)]['splice'](0x0,_0x5689af[_0x4a6104(0xe7)]['length']-_0x52f998);await _0x5689af[_0x4a6104(0x9f)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x4a6104(0xc2)](_0x5689af['dailyDigests']),'ack':!![]}),_0x5689af['rawEventLog']=[],await _0x5689af[_0x4a6104(0x9f)](LTM_DP_RAW_LOG,{'val':JSON[_0x4a6104(0xc2)](_0x5689af[_0x4a6104(0xeb)]),'ack':!![]}),await _0x5689af[_0x4a6104(0x9f)](LTM_DP_STATUS,{'val':_0x4a6104(0xde),'ack':!![]});const _0x57d2d0=_0x4a6104(0xea)+_0x154ab2[_0x4a6104(0xdb)]+'\x0aAktivit√§t:\x20'+_0x154ab2['activityLevel'];setup[_0x4a6104(0x118)](_0x5689af,_0x57d2d0,![],![]);if(_0x5689af[_0x4a6104(0xaf)]&&_0x1acc1a)_0x1acc1a[_0x4a6104(0xb3)](_0x5689af,_0x4a6104(0xe8),{'digest':_0x12243f});}catch(_0x4a35c0){_0x5689af['log']['error'](_0x4a35c0[_0x4a6104(0x10b)]);}}async function runBaselineDriftAnalysis(_0x404dff){const _0x3251a3=a0_0x685f8e;if(!_0x404dff['isProVersion']||!_0x404dff['geminiModel'])return;if(!canCallApi())return;const _0x59b8f3=_0x404dff[_0x3251a3(0xfd)][_0x3251a3(0xa9)]||0xe;if(_0x404dff['dailyDigests'][_0x3251a3(0xa0)]<_0x59b8f3+0x7){await _0x404dff['setStateAsync']('LTM.driftAnalysis.baselineDrift',{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x2fa179=_0x404dff['dailyDigests'][_0x3251a3(0x100)](-_0x59b8f3),_0x1ff99f=_0x404dff[_0x3251a3(0xe7)][_0x3251a3(0x100)](0x0,_0x404dff[_0x3251a3(0xe7)][_0x3251a3(0xa0)]-_0x59b8f3),_0x4e35ad=_0x3251a3(0xd3)+JSON[_0x3251a3(0xc2)](_0x1ff99f)+'\x0aSTB:\x20'+JSON[_0x3251a3(0xc2)](_0x2fa179);try{updateApiTimestamp();const _0x3860d5=await _0x404dff[_0x3251a3(0xe4)][_0x3251a3(0x111)](_0x4e35ad),_0x5e4744=JSON[_0x3251a3(0xbc)](_0x3860d5[_0x3251a3(0xcc)][_0x3251a3(0x105)]()[_0x3251a3(0xbb)](/```json|```/g,'')[_0x3251a3(0x97)]());_0x5e4744[_0x3251a3(0xf3)]&&(await _0x404dff[_0x3251a3(0x9f)]('LTM.driftAnalysis.baselineDrift',{'val':_0x5e4744[_0x3251a3(0xf3)],'ack':!![]}),await _0x404dff[_0x3251a3(0x9f)](_0x3251a3(0xa3),{'val':_0x5e4744['driftDetails'],'ack':!![]}),await _0x404dff['setStateAsync'](_0x3251a3(0xe3),{'val':Date[_0x3251a3(0x9c)](),'ack':!![]}));}catch(_0x1b1ecc){}}async function executeAutomationAction(_0x109d2a){const _0x1a0be0=a0_0x685f8e;try{const _0xe9a341=await _0x109d2a[_0x1a0be0(0xa8)](_0x1a0be0(0xb4)),_0x281e90=await _0x109d2a['getStateAsync'](_0x1a0be0(0x10f));if(_0xe9a341&&_0xe9a341[_0x1a0be0(0xb5)]&&_0x281e90){const _0x49dcc9=_0xe9a341['val'];let _0x4a7acd=_0x281e90['val'];try{_0x4a7acd=JSON[_0x1a0be0(0xbc)](_0x4a7acd);}catch(_0x162d33){}_0x109d2a[_0x1a0be0(0xbd)]['info']('ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x49dcc9+'\x20=\x20'+_0x4a7acd),await _0x109d2a[_0x1a0be0(0xe2)](_0x49dcc9,_0x4a7acd);}else _0x109d2a[_0x1a0be0(0xbd)][_0x1a0be0(0x94)](_0x1a0be0(0xa4));}catch(_0x2a46c4){_0x109d2a[_0x1a0be0(0xbd)][_0x1a0be0(0xd4)](_0x1a0be0(0xad)+_0x2a46c4[_0x1a0be0(0x10b)]);}}async function sendMorningBriefing(_0x14ed8a){const _0x4a781b=a0_0x685f8e;if(!_0x14ed8a[_0x4a781b(0xe4)]){_0x14ed8a[_0x4a781b(0xbd)]['warn'](_0x4a781b(0xfe));return;}_0x14ed8a[_0x4a781b(0xbd)][_0x4a781b(0x10c)](_0x4a781b(0xe1));try{updateApiTimestamp();const _0xce7d03=_0x4a781b(0xf6),_0x5d6daf=await _0x14ed8a[_0x4a781b(0xe4)][_0x4a781b(0x111)](_0xce7d03),_0xb95aae=_0x5d6daf['response'][_0x4a781b(0x105)]();_0x14ed8a[_0x4a781b(0xbd)][_0x4a781b(0x10c)](_0x4a781b(0x98)+_0xb95aae[_0x4a781b(0xa0)]+_0x4a781b(0xd8)),setup[_0x4a781b(0x118)](_0x14ed8a,_0x4a781b(0x117)+_0xb95aae);}catch(_0x4a590b){_0x14ed8a[_0x4a781b(0xbd)]['error']('Briefing\x20Error:\x20'+_0x4a590b[_0x4a781b(0x10b)]);}}module[a0_0x685f8e(0x110)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};