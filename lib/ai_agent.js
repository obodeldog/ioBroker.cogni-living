const a0_0x4cf49e=a0_0x4ea0;(function(_0x4e7d8e,_0x60d9fc){const _0x274d41=a0_0x4ea0,_0x41c247=_0x4e7d8e();while(!![]){try{const _0x422b15=parseInt(_0x274d41(0x252))/0x1*(-parseInt(_0x274d41(0x256))/0x2)+parseInt(_0x274d41(0x219))/0x3*(-parseInt(_0x274d41(0x231))/0x4)+-parseInt(_0x274d41(0x225))/0x5+parseInt(_0x274d41(0x239))/0x6+parseInt(_0x274d41(0x21b))/0x7+-parseInt(_0x274d41(0x214))/0x8*(-parseInt(_0x274d41(0x1ed))/0x9)+parseInt(_0x274d41(0x23d))/0xa;if(_0x422b15===_0x60d9fc)break;else _0x41c247['push'](_0x41c247['shift']());}catch(_0x1e5b0c){_0x41c247['push'](_0x41c247['shift']());}}}(a0_0x3c8e,0x589da));const a0_0x3d9b6a=(function(){let _0x2ac9de=!![];return function(_0x41aed4,_0x4eb0df){const _0x24f0d1=_0x2ac9de?function(){if(_0x4eb0df){const _0x4c9880=_0x4eb0df['apply'](_0x41aed4,arguments);return _0x4eb0df=null,_0x4c9880;}}:function(){};return _0x2ac9de=![],_0x24f0d1;};}()),a0_0x120234=a0_0x3d9b6a(this,function(){const _0x45d0df=a0_0x4ea0;return a0_0x120234['toString']()[_0x45d0df(0x26a)](_0x45d0df(0x1ec))[_0x45d0df(0x268)]()['constructor'](a0_0x120234)[_0x45d0df(0x26a)]('(((.+)+)+)+$');});a0_0x120234();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require(a0_0x4cf49e(0x26b)),GEMINI_MODEL=a0_0x4cf49e(0x238),LTM_DP_DAILY_DIGESTS=a0_0x4cf49e(0x210),LTM_DP_STATUS=a0_0x4cf49e(0x22c),LTM_DP_RAW_LOG=a0_0x4cf49e(0x264),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;function a0_0x3c8e(){const _0x34aa94=['\x20=\x20','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','system.presenceWho','stringify','val','analysis.automation.targetId','error','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','Started...','LTM.dailyDigests',',\x20Wetter:\x20','debug','toISOString','112oRznyq','currentSystemMode','geminiModel','toFixed','replace','1024869MTMVpW','isAlert','3407880aOzhKt','now','text','Traffic-Schutz\x20(Auto-Approved)','lastAlertState','sendNotification','setStateAsync','\x20Ã¼bersprungen\x20(Auto-Approved).','\x20->\x20','.\x20KONTEXT:\x20','2359020RuOfKy','eventHistory','Skipped\x20(No\x20AI\x20or\x20Data)','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','LTM.driftAnalysis.baselineDrift','ltmStbWindowDays','activityLevel','LTM.processingStatus','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','Unbekannt\x20(Kein\x20Sensor)','Gemini\x20Error:\x20','send','4QZbBXJ','driftDetails','analysisHistory','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','analysis.automation.targetValue','isEmergency','summary','models/gemini-flash-latest','1519044pYnPGk','analysis.activitySummary','ltmLtbWindowDays','.Current.Temperature','5973430JJBumd','parse','baselineDrift','Nacht','Wetterdaten\x20nicht\x20abrufbar','Digest','response','Sicherheit\x20geht\x20vor.','Success','analysis.lastResult','getForeignStateAsync','normal','ANALYZE_HEALTH','getStateAsync','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','LTM.driftAnalysis.lastCheck','warn','N/A\x20(Learning)','rawEventLog','reason','unshift','166pvgNxq','.forecast.current.state','.\x20EVENTS:\x20','automationProposal','5052uhMbRM','Unbekannt','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','alertReason','KI-Fehler\x20(Fallback)','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','useWeather','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','pop','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','description','Keine\x20Details.','âš ï¸\x20ALARM:\x20','LTM.rawEventLog','generateContent','Skipped\x20(Traffic)','BUTLER\x20Execution\x20Error:\x20','toString','analysis.automation.autoApply','search','./setup','toLocaleTimeString','isProVersion','message','.\x20SYSTEM_MODE:\x20','generic','(((.+)+)+)+$','166086ZXbzSF','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','.Current.WeatherText','analysis.automation.description','exports','trim','.forecast.current.temperature','Tag','length','\x0aSTB:\x20','slice','aiPersona','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','ðŸŒ…\x20Morning\x20Briefing:\x0a','splice','config','.\x20ANWESEND:\x20','log','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','decision','Â°C,\x20','approved',',\x20LichtverhÃ¤ltnisse:\x20','LTM.driftAnalysis.driftDetails','dailyDigests','info'];a0_0x3c8e=function(){return _0x34aa94;};return a0_0x3c8e();}let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x4cf49e(0x228),'senior_aal':a0_0x4cf49e(0x208),'family':a0_0x4cf49e(0x258),'single_comfort':a0_0x4cf49e(0x20e),'security':a0_0x4cf49e(0x244),'energy_saver':a0_0x4cf49e(0x1ee)};function canCallApi(){const _0xba6b44=a0_0x4cf49e,_0x14e22a=Date[_0xba6b44(0x21c)]();return _0x14e22a-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x9b91f3){const _0x42926b=a0_0x4cf49e;if(!_0x9b91f3[_0x42926b(0x1fc)][_0x42926b(0x25c)]||!_0x9b91f3[_0x42926b(0x1fc)]['weatherInstance'])return _0x42926b(0x22e);try{const _0x875ab3=_0x9b91f3[_0x42926b(0x1fc)]['weatherInstance'];let _0x58449b=await _0x9b91f3[_0x42926b(0x247)](_0x875ab3+_0x42926b(0x23c));if(!_0x58449b)_0x58449b=await _0x9b91f3['getForeignStateAsync'](_0x875ab3+_0x42926b(0x1f3));let _0x2748ca=await _0x9b91f3[_0x42926b(0x247)](_0x875ab3+_0x42926b(0x1ef));if(!_0x2748ca)_0x2748ca=await _0x9b91f3[_0x42926b(0x247)](_0x875ab3+_0x42926b(0x253));let _0x530646='Unbekannt';const _0x2efe23=await _0x9b91f3['getForeignStateAsync'](_0x875ab3+'.Current.IsNight');if(_0x2efe23)_0x530646=_0x2efe23[_0x42926b(0x20b)]?_0x42926b(0x240):_0x42926b(0x1f4);if(_0x58449b&&_0x2748ca)return _0x58449b[_0x42926b(0x20b)]+_0x42926b(0x201)+_0x2748ca['val']+_0x42926b(0x203)+_0x530646;}catch(_0x422f65){}return _0x42926b(0x241);}async function consultButler(_0x47ff2b,_0x41e77d,_0x3089b5,_0x18f671){const _0x187768=a0_0x4cf49e;if(!_0x47ff2b[_0x187768(0x216)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x3c0a02=Date[_0x187768(0x21c)]();if(decisionCache[_0x41e77d]&&_0x3c0a02-decisionCache[_0x41e77d]['timestamp']<CACHE_TTL_MS){const _0x57f06a=decisionCache[_0x41e77d][_0x187768(0x200)];return _0x47ff2b[_0x187768(0x1fe)][_0x187768(0x212)](_0x187768(0x22d)+_0x41e77d+_0x187768(0x223)+(_0x57f06a[_0x187768(0x202)]?'OK':'NO')+'\x20('+_0x57f06a[_0x187768(0x250)]+')'),_0x57f06a;}if(!canCallApi())return _0x47ff2b[_0x187768(0x1fe)][_0x187768(0x212)]('ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20'+_0x41e77d+_0x187768(0x222)),{'approved':!![],'reason':_0x187768(0x21e)};const _0x2572be=new Date()[_0x187768(0x26c)](),_0x5c1444=await getWeatherContext(_0x47ff2b),_0x54c20c=PERSONA_MAPPING[_0x47ff2b[_0x187768(0x1fc)][_0x187768(0x1f8)]||_0x187768(0x270)],_0x713416=_0x187768(0x25e)+_0x2572be+_0x187768(0x211)+_0x5c1444+_0x187768(0x25b)+(_0x18f671*0x64)[_0x187768(0x217)](0x0)+'%)\x20nach\x20\x22'+_0x41e77d+_0x187768(0x25d)+_0x3089b5+_0x187768(0x1ff)+_0x54c20c+_0x187768(0x1f9);try{updateApiTimestamp();const _0x4f0e94=await _0x47ff2b[_0x187768(0x216)]['generateContent'](_0x713416),_0x130e9a=_0x4f0e94[_0x187768(0x243)][_0x187768(0x21d)]()[_0x187768(0x218)](/```json|```/g,'')[_0x187768(0x1f2)](),_0xe971cd=JSON['parse'](_0x130e9a);return decisionCache[_0x41e77d]={'decision':_0xe971cd,'timestamp':_0x3c0a02},_0xe971cd;}catch(_0x46f69e){return _0x47ff2b[_0x187768(0x1fe)][_0x187768(0x24d)]('ðŸ¤–\x20Butler\x20Brain\x20Error:\x20'+_0x46f69e[_0x187768(0x26e)]),decisionCache[_0x41e77d]={'decision':{'approved':!![],'reason':_0x187768(0x25a)},'timestamp':_0x3c0a02-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x187768(0x25a)};}}async function runGeminiAnalysis(_0xc9f684,_0x82a577=''){const _0x2dceb7=a0_0x4cf49e;if(!_0xc9f684[_0x2dceb7(0x216)])return;if(!canCallApi()){_0xc9f684[_0x2dceb7(0x1fe)][_0x2dceb7(0x212)](_0x2dceb7(0x260));return;}if(_0xc9f684[_0x2dceb7(0x226)][_0x2dceb7(0x1f5)]===0x0)return;const _0x4832db=_0xc9f684[_0x2dceb7(0x226)][_0x2dceb7(0x1f7)](0x0,0xf),_0x1aed49=_0xc9f684['currentSystemMode'],_0xf55462=PERSONA_MAPPING[_0xc9f684[_0x2dceb7(0x1fc)]['aiPersona']||_0x2dceb7(0x270)],_0x5304b4=_0xc9f684[_0x2dceb7(0x1fc)]['livingContext']||_0x2dceb7(0x262);let _0x15bf91=_0x2dceb7(0x257);try{const _0x8f87c2=await _0xc9f684[_0x2dceb7(0x24a)](_0x2dceb7(0x209));if(_0x8f87c2&&_0x8f87c2['val'])_0x15bf91=_0x8f87c2[_0x2dceb7(0x20b)];}catch(_0x37ef71){}let _0x3be42f=![];try{const _0x18b8b9=await _0xc9f684['getStateAsync'](_0x2dceb7(0x269));if(_0x18b8b9&&_0x18b8b9[_0x2dceb7(0x20b)])_0x3be42f=!![];}catch(_0x1b1127){}const _0x4165f2='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0xf55462+_0x2dceb7(0x224)+_0x5304b4+_0x2dceb7(0x26f)+_0x1aed49+_0x2dceb7(0x1fd)+_0x15bf91+_0x2dceb7(0x254)+JSON[_0x2dceb7(0x20a)](_0x4832db)+'.\x20EMERGENCY:\x20'+_0x82a577+_0x2dceb7(0x24b);try{updateApiTimestamp();const _0x48e7f5=await _0xc9f684[_0x2dceb7(0x216)]['generateContent'](_0x4165f2),_0x385585=JSON[_0x2dceb7(0x23e)](_0x48e7f5[_0x2dceb7(0x243)]['text']()[_0x2dceb7(0x218)](/```json|```/g,'')[_0x2dceb7(0x1f2)]());await _0xc9f684[_0x2dceb7(0x221)](_0x2dceb7(0x246),{'val':JSON[_0x2dceb7(0x20a)](_0x385585),'ack':!![]});if(_0x385585['summary'])await _0xc9f684[_0x2dceb7(0x221)](_0x2dceb7(0x23a),{'val':_0x385585[_0x2dceb7(0x237)],'ack':!![]});const _0x46db85={'timestamp':Date[_0x2dceb7(0x21c)](),'id':Date[_0x2dceb7(0x21c)]()[_0x2dceb7(0x268)](),'analysis':{'activity':{'summary':_0x385585[_0x2dceb7(0x237)],'isAlert':_0x385585[_0x2dceb7(0x21a)],'alertReason':_0x385585[_0x2dceb7(0x259)]},'comfort':{'automationProposal':_0x385585[_0x2dceb7(0x255)]}}};_0xc9f684[_0x2dceb7(0x233)][_0x2dceb7(0x251)](_0x46db85);if(_0xc9f684[_0x2dceb7(0x233)]['length']>0x32)_0xc9f684[_0x2dceb7(0x233)][_0x2dceb7(0x25f)]();await _0xc9f684[_0x2dceb7(0x221)]('analysis.analysisHistory',{'val':JSON[_0x2dceb7(0x20a)](_0xc9f684[_0x2dceb7(0x233)]),'ack':!![]});const _0x5a9c66=_0x385585[_0x2dceb7(0x21a)]||![];_0x5a9c66!==_0xc9f684[_0x2dceb7(0x21f)]&&(await _0xc9f684[_0x2dceb7(0x221)]('analysis.isAlert',{'val':_0x5a9c66,'ack':!![]}),_0xc9f684[_0x2dceb7(0x21f)]=_0x5a9c66,_0x5a9c66&&(await _0xc9f684[_0x2dceb7(0x221)]('analysis.alertReason',{'val':_0x385585[_0x2dceb7(0x259)],'ack':!![]}),setup[_0x2dceb7(0x220)](_0xc9f684,_0x2dceb7(0x263)+_0x385585[_0x2dceb7(0x259)],![],_0x385585[_0x2dceb7(0x236)])));if(_0x385585[_0x2dceb7(0x255)]&&_0x385585[_0x2dceb7(0x255)]['detected']){await _0xc9f684[_0x2dceb7(0x221)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0xc9f684[_0x2dceb7(0x221)](_0x2dceb7(0x1f0),{'val':_0x385585[_0x2dceb7(0x255)][_0x2dceb7(0x261)],'ack':!![]}),await _0xc9f684[_0x2dceb7(0x221)](_0x2dceb7(0x20c),{'val':_0x385585[_0x2dceb7(0x255)]['targetId'],'ack':!![]}),await _0xc9f684['setStateAsync'](_0x2dceb7(0x235),{'val':JSON[_0x2dceb7(0x20a)](_0x385585[_0x2dceb7(0x255)]['targetValue']),'ack':!![]});if(_0x3be42f)executeAutomationAction(_0xc9f684);}}catch(_0x53cb2b){_0xc9f684['log']['error'](_0x2dceb7(0x22f)+_0x53cb2b['message']);}}async function createDailyDigest(_0x37214e,_0x10c72e){const _0x5ee8b9=a0_0x4cf49e;if(!_0x37214e['isProVersion'])return;if(!canCallApi()){await _0x37214e['setStateAsync'](LTM_DP_STATUS,{'val':_0x5ee8b9(0x266),'ack':!![]});return;}await _0x37214e[_0x5ee8b9(0x221)](LTM_DP_STATUS,{'val':_0x5ee8b9(0x20f),'ack':!![]});if(!_0x37214e[_0x5ee8b9(0x216)]||_0x37214e['rawEventLog']['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x37214e[_0x5ee8b9(0x221)](LTM_DP_STATUS,{'val':_0x5ee8b9(0x227),'ack':!![]});return;}const _0x486dbe=JSON[_0x5ee8b9(0x23e)](JSON[_0x5ee8b9(0x20a)](_0x37214e[_0x5ee8b9(0x24f)])),_0x5df279=_0x486dbe['length'],_0x2e94ae='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON['stringify'](_0x486dbe);try{updateApiTimestamp();const _0x176f79=await _0x37214e['geminiModel']['generateContent'](_0x2e94ae),_0x9c12a5=JSON['parse'](_0x176f79[_0x5ee8b9(0x243)][_0x5ee8b9(0x21d)]()[_0x5ee8b9(0x218)](/```json|```/g,'')[_0x5ee8b9(0x1f2)]()),_0x1c585d={'timestamp':new Date()[_0x5ee8b9(0x213)](),'eventCount':_0x5df279,'summary':_0x9c12a5[_0x5ee8b9(0x237)]||_0x5ee8b9(0x242),'activityLevel':_0x9c12a5[_0x5ee8b9(0x22b)]||_0x5ee8b9(0x248),'systemMode':_0x37214e[_0x5ee8b9(0x215)]};_0x37214e[_0x5ee8b9(0x205)]['push'](_0x1c585d);const _0x40dc3c=_0x37214e['config'][_0x5ee8b9(0x23b)]||0x3c;_0x37214e[_0x5ee8b9(0x205)][_0x5ee8b9(0x1f5)]>_0x40dc3c&&_0x37214e['dailyDigests'][_0x5ee8b9(0x1fb)](0x0,_0x37214e[_0x5ee8b9(0x205)][_0x5ee8b9(0x1f5)]-_0x40dc3c);await _0x37214e[_0x5ee8b9(0x221)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x5ee8b9(0x20a)](_0x37214e[_0x5ee8b9(0x205)]),'ack':!![]}),_0x37214e[_0x5ee8b9(0x24f)]=[],await _0x37214e['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x5ee8b9(0x20a)](_0x37214e['rawEventLog']),'ack':!![]}),await _0x37214e[_0x5ee8b9(0x221)](LTM_DP_STATUS,{'val':_0x5ee8b9(0x245),'ack':!![]});if(_0x37214e[_0x5ee8b9(0x26d)]&&_0x10c72e)_0x10c72e[_0x5ee8b9(0x230)](_0x37214e,_0x5ee8b9(0x249),{'digest':_0x1c585d});}catch(_0x45367f){_0x37214e[_0x5ee8b9(0x1fe)][_0x5ee8b9(0x20d)](_0x45367f[_0x5ee8b9(0x26e)]);}}function a0_0x4ea0(_0x3ce449,_0x559490){const _0x201c26=a0_0x3c8e();return a0_0x4ea0=function(_0x120234,_0x3d9b6a){_0x120234=_0x120234-0x1ec;let _0x3c8e2b=_0x201c26[_0x120234];return _0x3c8e2b;},a0_0x4ea0(_0x3ce449,_0x559490);}async function runBaselineDriftAnalysis(_0x2f2d5e){const _0x3a243b=a0_0x4cf49e;if(!_0x2f2d5e['isProVersion']||!_0x2f2d5e['geminiModel'])return;if(!canCallApi())return;const _0x32ee08=_0x2f2d5e[_0x3a243b(0x1fc)][_0x3a243b(0x22a)]||0xe;if(_0x2f2d5e[_0x3a243b(0x205)]['length']<_0x32ee08+0x7){await _0x2f2d5e['setStateAsync'](_0x3a243b(0x229),{'val':_0x3a243b(0x24e),'ack':!![]});return;}const _0x51ab6c=_0x2f2d5e[_0x3a243b(0x205)][_0x3a243b(0x1f7)](-_0x32ee08),_0x47efa8=_0x2f2d5e['dailyDigests'][_0x3a243b(0x1f7)](0x0,_0x2f2d5e[_0x3a243b(0x205)][_0x3a243b(0x1f5)]-_0x32ee08),_0x7299a='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON['stringify'](_0x47efa8)+_0x3a243b(0x1f6)+JSON['stringify'](_0x51ab6c);try{updateApiTimestamp();const _0x370864=await _0x2f2d5e[_0x3a243b(0x216)][_0x3a243b(0x265)](_0x7299a),_0x563d9b=JSON[_0x3a243b(0x23e)](_0x370864[_0x3a243b(0x243)][_0x3a243b(0x21d)]()[_0x3a243b(0x218)](/```json|```/g,'')[_0x3a243b(0x1f2)]());_0x563d9b[_0x3a243b(0x23f)]&&(await _0x2f2d5e[_0x3a243b(0x221)](_0x3a243b(0x229),{'val':_0x563d9b['baselineDrift'],'ack':!![]}),await _0x2f2d5e[_0x3a243b(0x221)](_0x3a243b(0x204),{'val':_0x563d9b[_0x3a243b(0x232)],'ack':!![]}),await _0x2f2d5e[_0x3a243b(0x221)](_0x3a243b(0x24c),{'val':Date[_0x3a243b(0x21c)](),'ack':!![]}));}catch(_0x39fab4){}}async function executeAutomationAction(_0x6be78b){const _0x60004a=a0_0x4cf49e;try{const _0x1f2e8d=await _0x6be78b[_0x60004a(0x24a)](_0x60004a(0x20c)),_0x1c7ec7=await _0x6be78b['getStateAsync'](_0x60004a(0x235));if(_0x1f2e8d&&_0x1f2e8d[_0x60004a(0x20b)]&&_0x1c7ec7){const _0x197c82=_0x1f2e8d[_0x60004a(0x20b)];let _0x5354a6=_0x1c7ec7[_0x60004a(0x20b)];try{_0x5354a6=JSON['parse'](_0x5354a6);}catch(_0x10d4e3){}_0x6be78b['log'][_0x60004a(0x206)](_0x60004a(0x234)+_0x197c82+_0x60004a(0x207)+_0x5354a6),await _0x6be78b['setForeignStateAsync'](_0x197c82,_0x5354a6);}else _0x6be78b[_0x60004a(0x1fe)][_0x60004a(0x24d)]('ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x7765c9){_0x6be78b['log'][_0x60004a(0x20d)](_0x60004a(0x267)+_0x7765c9[_0x60004a(0x26e)]);}}async function sendMorningBriefing(_0x20dbbc){const _0x4b1d2f=a0_0x4cf49e;if(!_0x20dbbc[_0x4b1d2f(0x216)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x150781='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x28fa41=await _0x20dbbc[_0x4b1d2f(0x216)][_0x4b1d2f(0x265)](_0x150781),_0x24e96d=_0x28fa41[_0x4b1d2f(0x243)][_0x4b1d2f(0x21d)]();setup[_0x4b1d2f(0x220)](_0x20dbbc,_0x4b1d2f(0x1fa)+_0x24e96d);}catch(_0x356751){_0x20dbbc[_0x4b1d2f(0x1fe)][_0x4b1d2f(0x20d)]('Briefing\x20Error:\x20'+_0x356751['message']);}}module[a0_0x4cf49e(0x1f1)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};