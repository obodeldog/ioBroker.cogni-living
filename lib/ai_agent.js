const a0_0x590be7=a0_0x2940;(function(_0xffc098,_0x43fb98){const _0x379547=a0_0x2940,_0x1e8670=_0xffc098();while(!![]){try{const _0x58bab4=-parseInt(_0x379547(0x1da))/0x1*(parseInt(_0x379547(0x211))/0x2)+parseInt(_0x379547(0x22d))/0x3*(-parseInt(_0x379547(0x1f6))/0x4)+parseInt(_0x379547(0x1ec))/0x5*(-parseInt(_0x379547(0x1f2))/0x6)+-parseInt(_0x379547(0x1de))/0x7+-parseInt(_0x379547(0x23d))/0x8*(parseInt(_0x379547(0x1c8))/0x9)+parseInt(_0x379547(0x1ff))/0xa*(parseInt(_0x379547(0x1f5))/0xb)+parseInt(_0x379547(0x1c5))/0xc;if(_0x58bab4===_0x43fb98)break;else _0x1e8670['push'](_0x1e8670['shift']());}catch(_0x3445d9){_0x1e8670['push'](_0x1e8670['shift']());}}}(a0_0x1170,0x5716b));const a0_0x53114c=(function(){let _0x35c4ec=!![];return function(_0x5f9f68,_0x2d5b55){const _0x4edf1a=_0x35c4ec?function(){const _0x22bd2f=a0_0x2940;if(_0x2d5b55){const _0x3ec4e6=_0x2d5b55[_0x22bd2f(0x1db)](_0x5f9f68,arguments);return _0x2d5b55=null,_0x3ec4e6;}}:function(){};return _0x35c4ec=![],_0x4edf1a;};}()),a0_0x33605e=a0_0x53114c(this,function(){const _0xe9014d=a0_0x2940;return a0_0x33605e[_0xe9014d(0x1f3)]()[_0xe9014d(0x1e3)]('(((.+)+)+)+$')['toString']()['constructor'](a0_0x33605e)[_0xe9014d(0x1e3)]('(((.+)+)+)+$');});function a0_0x1170(){const _0x227e5f=['ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','.\x20EMERGENCY:\x20','üåÖ\x20Briefing\x20generated\x20(Length:\x20','LTM.driftAnalysis.baselineDrift','value','parse','eventHistory','sendNotification','.\x20SYSTEM_MODE:\x20',',\x20Lichtverh√§ltnisse:\x20',',\x20Wetter:\x20','BUTLER\x20Execution\x20Error:\x20','LTM.driftAnalysis.lastCheck','Skipped\x20(Traffic)','analysisHistory',').\x20Sending\x20notification...','¬∞C,\x20','508671YoZCHN','Briefing\x20Error:\x20','NIGHT','now','analysis.analysisHistory','debug','message','.Current.WeatherText','ltmLtbWindowDays','ü§ñ\x20Butler\x20Brain\x20Error:\x20','ü§ñ\x20Health\x20Report\x20(','setForeignStateAsync','send','analysis.health.geminiDay','config','isProVersion','716728gbjVZy','analysis.isAlert','filter','\x0a\x20\x20\x20\x20ROLLE:\x20Medizinischer\x20Assistent\x20f√ºr\x20AAL\x20(Ambient\x20Assisted\x20Living).\x0a\x20\x20\x20\x20AUFGABE:\x20','weatherInstance','alertReason','Traffic-Schutz\x20(Auto-Approved)','ANALYZE_HEALTH','useWeather','targetId','setHours','map','trim','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','üåÖ\x20Morning\x20Briefing:\x0a','response','exports','.\x20KONTEXT:\x20','LTM.processingStatus','%)\x20nach\x20\x22','push','N/A\x20(Learning)','toFixed','LTM.dailyDigests','Bisher\x20keine\x20Aktivit√§t\x20seit\x2008:00\x20Uhr\x20verzeichnet.','analysis.activitySummary','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','dailyDigests','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','getStateAsync','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','Unbekannt','baselineDrift','@google/generative-ai','Success','log','analysis.automation.targetId','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','Keine\x20Daten\x20f√ºr\x20die\x20Nacht\x20aufgezeichnet\x20(Sensoren\x20ruhig).','20570580LGSNeA','timestamp','system.presenceWho','9wlRrCl','analysis.alertReason','automationProposal','models/gemini-flash-latest','toLocaleTimeString','üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','stringify','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','\x20√ºbersprungen\x20(Auto-Approved).','ü§ñ\x20API\x20Cooldown.\x20Waiting\x202s...','LTM.rawEventLog','activityLevel','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','./setup','lastAlertState','LTM.driftAnalysis.driftDetails','Wetterdaten\x20nicht\x20abrufbar','setDate','5LHGCvn','apply','getDate','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','3108399fUWqZu','analysis.automation.description','normal','analysis.automation.autoApply','approved','search','Sicherheit\x20geht\x20vor.','aiPersona','geminiModel','currentSystemMode','üìÖ\x20Daily\x20Digest:\x0a','Skipped\x20(No\x20AI\x20or\x20Data)','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','decision','5twkSUF','Analysiere\x20diese\x20Events\x20der\x20NACHT\x20(22:00-08:00).\x20War\x20der\x20Schlaf\x20ruhig?\x20Gab\x20es\x20Badg√§nge?\x20Antwort\x20kurz\x20f√ºr\x20den\x20besorgten\x20Sohn\x20(max\x202\x20S√§tze).','\x0a\x20\x20\x20\x20ANTWORT-STIL:\x20Sachlich,\x20beruhigend,\x20pr√§zise.\x20Keine\x20Floskeln.\x0a\x20\x20\x20\x20','setStateAsync','Started...','text','3697770SbcoOk','toString','replace','1558645hQyRJi','4HYdBif','pop','Gemini\x20Error:\x20','generateContent','error','reason','analysis.lastResult','Unbekannt\x20(Kein\x20Sensor)','ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','10caAECr','getForeignStateAsync','info','Analysiere\x20diese\x20Events\x20des\x20TAGES\x20(08:00-Jetzt).\x20Aktivit√§t?\x20Mahlzeiten?\x20Haust√ºr?\x20Antwort\x20kurz\x20f√ºr\x20den\x20besorgten\x20Sohn\x20(max\x202\x20S√§tze).','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','generic','\x20->\x20','getTime','Keine\x20Details.','warn','val','2-digit','ltmStbWindowDays','\x0aSTB:\x20','Nacht','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','\x20=\x20','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','71878tmHKMe','slice','summary','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','description',')\x20generated.','length','analysis.automation.targetValue','splice','toISOString','rawEventLog'];a0_0x1170=function(){return _0x227e5f;};return a0_0x1170();}a0_0x33605e();'use strict';const {GoogleGenerativeAI}=require(a0_0x590be7(0x1bf)),setup=require(a0_0x590be7(0x1d5)),GEMINI_MODEL=a0_0x590be7(0x1cb),LTM_DP_DAILY_DIGESTS=a0_0x590be7(0x254),LTM_DP_STATUS=a0_0x590be7(0x24f),LTM_DP_RAW_LOG=a0_0x590be7(0x1d2),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':a0_0x590be7(0x214),'family':a0_0x590be7(0x1bc),'single_comfort':a0_0x590be7(0x259),'security':a0_0x590be7(0x1e4),'energy_saver':a0_0x590be7(0x1ea)};function canCallApi(){const _0x2054ce=a0_0x590be7,_0x39bd96=Date[_0x2054ce(0x230)]();return _0x39bd96-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x5e5a53){const _0x64c581=a0_0x590be7;if(!_0x5e5a53[_0x64c581(0x23b)][_0x64c581(0x245)]||!_0x5e5a53[_0x64c581(0x23b)][_0x64c581(0x241)])return _0x64c581(0x1fd);try{const _0x69bd86=_0x5e5a53[_0x64c581(0x23b)][_0x64c581(0x241)];let _0x4a1dff=await _0x5e5a53[_0x64c581(0x200)](_0x69bd86+'.Current.Temperature');if(!_0x4a1dff)_0x4a1dff=await _0x5e5a53[_0x64c581(0x200)](_0x69bd86+'.forecast.current.temperature');let _0x90741=await _0x5e5a53[_0x64c581(0x200)](_0x69bd86+_0x64c581(0x234));if(!_0x90741)_0x90741=await _0x5e5a53[_0x64c581(0x200)](_0x69bd86+'.forecast.current.state');let _0x2eba9e=_0x64c581(0x1bd);const _0x408425=await _0x5e5a53[_0x64c581(0x200)](_0x69bd86+'.Current.IsNight');if(_0x408425)_0x2eba9e=_0x408425['val']?_0x64c581(0x20d):'Tag';if(_0x4a1dff&&_0x90741)return _0x4a1dff[_0x64c581(0x209)]+_0x64c581(0x22c)+_0x90741['val']+_0x64c581(0x225)+_0x2eba9e;}catch(_0x1a9a3a){}return _0x64c581(0x1d8);}async function consultButler(_0x423119,_0x31a9ba,_0x4511f3,_0x3e827e){const _0x4234c0=a0_0x590be7;if(!_0x423119[_0x4234c0(0x1e6)])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x94d1e7=Date[_0x4234c0(0x230)]();if(decisionCache[_0x31a9ba]&&_0x94d1e7-decisionCache[_0x31a9ba][_0x4234c0(0x1c6)]<CACHE_TTL_MS){const _0x347294=decisionCache[_0x31a9ba][_0x4234c0(0x1eb)];return _0x423119[_0x4234c0(0x1c1)][_0x4234c0(0x232)](_0x4234c0(0x1dd)+_0x31a9ba+_0x4234c0(0x205)+(_0x347294[_0x4234c0(0x1e2)]?'OK':'NO')+'\x20('+_0x347294[_0x4234c0(0x1fb)]+')'),_0x347294;}if(!canCallApi())return _0x423119['log'][_0x4234c0(0x232)](_0x4234c0(0x24a)+_0x31a9ba+_0x4234c0(0x1d0)),{'approved':!![],'reason':_0x4234c0(0x243)};const _0x24a9d2=new Date()[_0x4234c0(0x1cc)](),_0x5a5698=await getWeatherContext(_0x423119),_0x24fc01=PERSONA_MAPPING[_0x423119[_0x4234c0(0x23b)][_0x4234c0(0x1e5)]||'generic'],_0x3834d0='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x24a9d2+_0x4234c0(0x226)+_0x5a5698+_0x4234c0(0x257)+(_0x3e827e*0x64)[_0x4234c0(0x253)](0x0)+_0x4234c0(0x250)+_0x31a9ba+'\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22'+_0x4511f3+_0x4234c0(0x210)+_0x24fc01+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x22b293=await _0x423119[_0x4234c0(0x1e6)]['generateContent'](_0x3834d0),_0x29a0ba=_0x22b293[_0x4234c0(0x24c)][_0x4234c0(0x1f1)]()[_0x4234c0(0x1f4)](/```json|```/g,'')[_0x4234c0(0x249)](),_0x57b041=JSON[_0x4234c0(0x221)](_0x29a0ba);return decisionCache[_0x31a9ba]={'decision':_0x57b041,'timestamp':_0x94d1e7},_0x57b041;}catch(_0x13bf6f){return _0x423119[_0x4234c0(0x1c1)][_0x4234c0(0x208)](_0x4234c0(0x236)+_0x13bf6f[_0x4234c0(0x233)]),decisionCache[_0x31a9ba]={'decision':{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'},'timestamp':_0x94d1e7-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x4c20c1,_0x2def8c=''){const _0xa205c4=a0_0x590be7;if(!_0x4c20c1[_0xa205c4(0x1e6)])return;if(!canCallApi()){_0x4c20c1[_0xa205c4(0x1c1)][_0xa205c4(0x232)]('ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x4c20c1['eventHistory'][_0xa205c4(0x217)]===0x0)return;const _0x13fa9e=_0x4c20c1[_0xa205c4(0x222)][_0xa205c4(0x212)](0x0,0xf),_0x2e97fc=_0x4c20c1[_0xa205c4(0x1e7)],_0x2d2abb=PERSONA_MAPPING[_0x4c20c1['config'][_0xa205c4(0x1e5)]||_0xa205c4(0x204)],_0x15c22f=_0x4c20c1[_0xa205c4(0x23b)]['livingContext']||_0xa205c4(0x207);let _0x4ffaed=_0xa205c4(0x1bd);try{const _0x5f1a2c=await _0x4c20c1[_0xa205c4(0x25a)](_0xa205c4(0x1c7));if(_0x5f1a2c&&_0x5f1a2c[_0xa205c4(0x209)])_0x4ffaed=_0x5f1a2c['val'];}catch(_0xcf9ce9){}let _0x4320e5=![];try{const _0x3d85a8=await _0x4c20c1['getStateAsync'](_0xa205c4(0x1e1));if(_0x3d85a8&&_0x3d85a8['val'])_0x4320e5=!![];}catch(_0x1d7dc0){}const _0x595f08=_0xa205c4(0x20e)+_0x2d2abb+_0xa205c4(0x24e)+_0x15c22f+_0xa205c4(0x224)+_0x2e97fc+'.\x20ANWESEND:\x20'+_0x4ffaed+'.\x20EVENTS:\x20'+JSON[_0xa205c4(0x1ce)](_0x13fa9e)+_0xa205c4(0x21d)+_0x2def8c+_0xa205c4(0x203);try{updateApiTimestamp();const _0x39acdd=await _0x4c20c1[_0xa205c4(0x1e6)]['generateContent'](_0x595f08),_0x583b2b=JSON[_0xa205c4(0x221)](_0x39acdd[_0xa205c4(0x24c)]['text']()['replace'](/```json|```/g,'')[_0xa205c4(0x249)]());await _0x4c20c1[_0xa205c4(0x1ef)](_0xa205c4(0x1fc),{'val':JSON[_0xa205c4(0x1ce)](_0x583b2b),'ack':!![]});if(_0x583b2b[_0xa205c4(0x213)])await _0x4c20c1[_0xa205c4(0x1ef)](_0xa205c4(0x256),{'val':_0x583b2b['summary'],'ack':!![]});const _0x16e6d4={'timestamp':Date['now'](),'id':Date[_0xa205c4(0x230)]()[_0xa205c4(0x1f3)](),'analysis':{'activity':{'summary':_0x583b2b[_0xa205c4(0x213)],'isAlert':_0x583b2b['isAlert'],'alertReason':_0x583b2b['alertReason']},'comfort':{'automationProposal':_0x583b2b['automationProposal']}}};_0x4c20c1['analysisHistory']['unshift'](_0x16e6d4);if(_0x4c20c1[_0xa205c4(0x22a)]['length']>0x32)_0x4c20c1[_0xa205c4(0x22a)][_0xa205c4(0x1f7)]();await _0x4c20c1[_0xa205c4(0x1ef)](_0xa205c4(0x231),{'val':JSON[_0xa205c4(0x1ce)](_0x4c20c1[_0xa205c4(0x22a)]),'ack':!![]});const _0x2738be=_0x583b2b['isAlert']||![];_0x2738be!==_0x4c20c1['lastAlertState']&&(await _0x4c20c1[_0xa205c4(0x1ef)](_0xa205c4(0x23e),{'val':_0x2738be,'ack':!![]}),_0x4c20c1[_0xa205c4(0x1d6)]=_0x2738be,_0x2738be&&(await _0x4c20c1['setStateAsync'](_0xa205c4(0x1c9),{'val':_0x583b2b[_0xa205c4(0x242)],'ack':!![]}),setup[_0xa205c4(0x223)](_0x4c20c1,'‚ö†Ô∏è\x20ALARM:\x20'+_0x583b2b['alertReason'],![],_0x583b2b['isEmergency'])));if(_0x583b2b[_0xa205c4(0x1ca)]&&_0x583b2b['automationProposal']['detected']){await _0x4c20c1[_0xa205c4(0x1ef)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x4c20c1[_0xa205c4(0x1ef)](_0xa205c4(0x1df),{'val':_0x583b2b[_0xa205c4(0x1ca)][_0xa205c4(0x215)],'ack':!![]}),await _0x4c20c1[_0xa205c4(0x1ef)](_0xa205c4(0x1c2),{'val':_0x583b2b['automationProposal'][_0xa205c4(0x246)],'ack':!![]}),await _0x4c20c1['setStateAsync'](_0xa205c4(0x218),{'val':JSON[_0xa205c4(0x1ce)](_0x583b2b[_0xa205c4(0x1ca)]['targetValue']),'ack':!![]});if(_0x4320e5)executeAutomationAction(_0x4c20c1);}}catch(_0x5e06e3){_0x4c20c1[_0xa205c4(0x1c1)][_0xa205c4(0x1fa)](_0xa205c4(0x1f8)+_0x5e06e3[_0xa205c4(0x233)]);}}async function createDailyDigest(_0x39e49f,_0x4e6d1b){const _0x1842a7=a0_0x590be7;if(!_0x39e49f[_0x1842a7(0x23c)])return;if(!canCallApi()){await _0x39e49f['setStateAsync'](LTM_DP_STATUS,{'val':_0x1842a7(0x229),'ack':!![]});return;}await _0x39e49f[_0x1842a7(0x1ef)](LTM_DP_STATUS,{'val':_0x1842a7(0x1f0),'ack':!![]});if(!_0x39e49f[_0x1842a7(0x1e6)]||_0x39e49f['rawEventLog'][_0x1842a7(0x217)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x39e49f['setStateAsync'](LTM_DP_STATUS,{'val':_0x1842a7(0x1e9),'ack':!![]});return;}const _0x1e0413=JSON['parse'](JSON[_0x1842a7(0x1ce)](_0x39e49f[_0x1842a7(0x21b)])),_0x4c4929=_0x1e0413[_0x1842a7(0x217)],_0x385034=_0x1842a7(0x1d4)+JSON['stringify'](_0x1e0413);try{updateApiTimestamp();const _0x1c628b=await _0x39e49f[_0x1842a7(0x1e6)]['generateContent'](_0x385034),_0x111bc4=JSON[_0x1842a7(0x221)](_0x1c628b[_0x1842a7(0x24c)]['text']()['replace'](/```json|```/g,'')[_0x1842a7(0x249)]()),_0x430d4d={'timestamp':new Date()[_0x1842a7(0x21a)](),'eventCount':_0x4c4929,'summary':_0x111bc4[_0x1842a7(0x213)]||'Digest','activityLevel':_0x111bc4[_0x1842a7(0x1d3)]||_0x1842a7(0x1e0),'systemMode':_0x39e49f[_0x1842a7(0x1e7)]};_0x39e49f['dailyDigests'][_0x1842a7(0x251)](_0x430d4d);const _0x3fa50d=_0x39e49f[_0x1842a7(0x23b)][_0x1842a7(0x235)]||0x3c;_0x39e49f['dailyDigests'][_0x1842a7(0x217)]>_0x3fa50d&&_0x39e49f[_0x1842a7(0x258)][_0x1842a7(0x219)](0x0,_0x39e49f[_0x1842a7(0x258)]['length']-_0x3fa50d);await _0x39e49f['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x1842a7(0x1ce)](_0x39e49f[_0x1842a7(0x258)]),'ack':!![]}),_0x39e49f['rawEventLog']=[],await _0x39e49f[_0x1842a7(0x1ef)](LTM_DP_RAW_LOG,{'val':JSON[_0x1842a7(0x1ce)](_0x39e49f[_0x1842a7(0x21b)]),'ack':!![]}),await _0x39e49f['setStateAsync'](LTM_DP_STATUS,{'val':_0x1842a7(0x1c0),'ack':!![]});const _0x5e1f47=_0x1842a7(0x1e8)+_0x111bc4[_0x1842a7(0x213)]+'\x0aAktivit√§t:\x20'+_0x111bc4['activityLevel'];setup[_0x1842a7(0x223)](_0x39e49f,_0x5e1f47,![],![]);if(_0x39e49f[_0x1842a7(0x23c)]&&_0x4e6d1b)_0x4e6d1b[_0x1842a7(0x239)](_0x39e49f,_0x1842a7(0x244),{'digest':_0x430d4d});}catch(_0x50dd1c){_0x39e49f['log'][_0x1842a7(0x1fa)](_0x50dd1c[_0x1842a7(0x233)]);}}async function runBaselineDriftAnalysis(_0x1e1c8c){const _0xf35378=a0_0x590be7;if(!_0x1e1c8c[_0xf35378(0x23c)]||!_0x1e1c8c[_0xf35378(0x1e6)])return;if(!canCallApi())return;const _0x4343ab=_0x1e1c8c[_0xf35378(0x23b)][_0xf35378(0x20b)]||0xe;if(_0x1e1c8c[_0xf35378(0x258)][_0xf35378(0x217)]<_0x4343ab+0x7){await _0x1e1c8c[_0xf35378(0x1ef)](_0xf35378(0x21f),{'val':_0xf35378(0x252),'ack':!![]});return;}const _0x50f82f=_0x1e1c8c[_0xf35378(0x258)][_0xf35378(0x212)](-_0x4343ab),_0x2fc9c0=_0x1e1c8c['dailyDigests'][_0xf35378(0x212)](0x0,_0x1e1c8c[_0xf35378(0x258)]['length']-_0x4343ab),_0x5b8fc0='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON['stringify'](_0x2fc9c0)+_0xf35378(0x20c)+JSON[_0xf35378(0x1ce)](_0x50f82f);try{updateApiTimestamp();const _0x4bb39c=await _0x1e1c8c[_0xf35378(0x1e6)][_0xf35378(0x1f9)](_0x5b8fc0),_0x4b22e7=JSON[_0xf35378(0x221)](_0x4bb39c[_0xf35378(0x24c)]['text']()[_0xf35378(0x1f4)](/```json|```/g,'')[_0xf35378(0x249)]());_0x4b22e7[_0xf35378(0x1be)]&&(await _0x1e1c8c[_0xf35378(0x1ef)](_0xf35378(0x21f),{'val':_0x4b22e7[_0xf35378(0x1be)],'ack':!![]}),await _0x1e1c8c[_0xf35378(0x1ef)](_0xf35378(0x1d7),{'val':_0x4b22e7['driftDetails'],'ack':!![]}),await _0x1e1c8c['setStateAsync'](_0xf35378(0x228),{'val':Date['now'](),'ack':!![]}));}catch(_0x652942){}}function a0_0x2940(_0x234e6f,_0x198739){const _0x5a01c7=a0_0x1170();return a0_0x2940=function(_0x33605e,_0x53114c){_0x33605e=_0x33605e-0x1bc;let _0x11706b=_0x5a01c7[_0x33605e];return _0x11706b;},a0_0x2940(_0x234e6f,_0x198739);}async function executeAutomationAction(_0x5be91b){const _0xa5bef8=a0_0x590be7;try{const _0x3e461d=await _0x5be91b[_0xa5bef8(0x25a)](_0xa5bef8(0x1c2)),_0x54818c=await _0x5be91b[_0xa5bef8(0x25a)]('analysis.automation.targetValue');if(_0x3e461d&&_0x3e461d['val']&&_0x54818c){const _0x23d8eb=_0x3e461d[_0xa5bef8(0x209)];let _0x108c0a=_0x54818c[_0xa5bef8(0x209)];try{_0x108c0a=JSON['parse'](_0x108c0a);}catch(_0x9be339){}_0x5be91b[_0xa5bef8(0x1c1)][_0xa5bef8(0x201)](_0xa5bef8(0x1c3)+_0x23d8eb+_0xa5bef8(0x20f)+_0x108c0a),await _0x5be91b[_0xa5bef8(0x238)](_0x23d8eb,_0x108c0a);}else _0x5be91b['log']['warn'](_0xa5bef8(0x21c));}catch(_0x1c7248){_0x5be91b['log'][_0xa5bef8(0x1fa)](_0xa5bef8(0x227)+_0x1c7248[_0xa5bef8(0x233)]);}}async function sendMorningBriefing(_0x4a9d43){const _0x218b72=a0_0x590be7;if(!_0x4a9d43[_0x218b72(0x1e6)]){_0x4a9d43[_0x218b72(0x1c1)]['warn'](_0x218b72(0x1fe));return;}_0x4a9d43[_0x218b72(0x1c1)]['info'](_0x218b72(0x1cd));try{updateApiTimestamp();const _0x5b7132=_0x218b72(0x1cf),_0xb765ce=await _0x4a9d43[_0x218b72(0x1e6)][_0x218b72(0x1f9)](_0x5b7132),_0x405ce3=_0xb765ce[_0x218b72(0x24c)][_0x218b72(0x1f1)]();_0x4a9d43['log'][_0x218b72(0x201)](_0x218b72(0x21e)+_0x405ce3[_0x218b72(0x217)]+_0x218b72(0x22b)),setup[_0x218b72(0x223)](_0x4a9d43,_0x218b72(0x24b)+_0x405ce3);}catch(_0x19e587){_0x4a9d43['log'][_0x218b72(0x1fa)](_0x218b72(0x22e)+_0x19e587[_0x218b72(0x233)]);}}async function generateHealthReport(_0x4d3b40,_0x27ca27){const _0x4cb897=a0_0x590be7;if(!_0x4d3b40['geminiModel'])return;const _0x13c45d=Date[_0x4cb897(0x230)]();_0x13c45d-lastGlobalApiCall<0xbb8&&(_0x4d3b40[_0x4cb897(0x1c1)][_0x4cb897(0x232)](_0x4cb897(0x1d1)),await new Promise(_0x109981=>setTimeout(_0x109981,0x7d0)));const _0x29ea5d=new Date();let _0x340ad2=0x0,_0x3c7a36=_0x29ea5d[_0x4cb897(0x206)](),_0x260395='';if(_0x27ca27==='NIGHT'){const _0x25677f=new Date(_0x29ea5d);_0x25677f[_0x4cb897(0x1d9)](_0x25677f[_0x4cb897(0x1dc)]()-0x1),_0x25677f[_0x4cb897(0x247)](0x16,0x0,0x0,0x0),_0x340ad2=_0x25677f['getTime']();const _0x52e68f=new Date(_0x29ea5d);_0x52e68f[_0x4cb897(0x247)](0x8,0x0,0x0,0x0),_0x3c7a36=_0x52e68f[_0x4cb897(0x206)](),_0x260395=_0x4cb897(0x1ed);}else{const _0x2c774f=new Date(_0x29ea5d);_0x2c774f['setHours'](0x8,0x0,0x0,0x0),_0x340ad2=_0x2c774f[_0x4cb897(0x206)](),_0x260395=_0x4cb897(0x202);}const _0x10a556=_0x4d3b40[_0x4cb897(0x222)][_0x4cb897(0x23f)](_0x318819=>_0x318819['timestamp']>=_0x340ad2&&_0x318819['timestamp']<=_0x3c7a36);if(_0x10a556[_0x4cb897(0x217)]===0x0){const _0x4c6ed2=_0x27ca27===_0x4cb897(0x22f)?_0x4cb897(0x1c4):_0x4cb897(0x255),_0x3aa8de=_0x27ca27===_0x4cb897(0x22f)?'analysis.health.geminiNight':'analysis.health.geminiDay';await _0x4d3b40[_0x4cb897(0x1ef)](_0x3aa8de,{'val':_0x4c6ed2,'ack':!![]});return;}const _0x234803=_0x10a556[_0x4cb897(0x248)](_0x1bee4f=>new Date(_0x1bee4f[_0x4cb897(0x1c6)])[_0x4cb897(0x1cc)]([],{'hour':_0x4cb897(0x20a),'minute':_0x4cb897(0x20a)})+'\x20'+_0x1bee4f['name']+'\x20('+_0x1bee4f[_0x4cb897(0x220)]+')')['join']('\x0a'),_0x5d80dc=_0x4cb897(0x240)+_0x260395+'\x0a\x20\x20\x20\x20EVENTS:\x0a'+_0x234803+_0x4cb897(0x1ee);try{updateApiTimestamp();const _0xdb60c7=await _0x4d3b40[_0x4cb897(0x1e6)][_0x4cb897(0x1f9)](_0x5d80dc),_0x2ac918=_0xdb60c7[_0x4cb897(0x24c)][_0x4cb897(0x1f1)](),_0x3e467e=_0x27ca27==='NIGHT'?'analysis.health.geminiNight':_0x4cb897(0x23a);await _0x4d3b40[_0x4cb897(0x1ef)](_0x3e467e,{'val':_0x2ac918,'ack':!![]}),_0x4d3b40[_0x4cb897(0x1c1)][_0x4cb897(0x201)](_0x4cb897(0x237)+_0x27ca27+_0x4cb897(0x216));}catch(_0x538608){_0x4d3b40[_0x4cb897(0x1c1)][_0x4cb897(0x1fa)]('Health\x20Report\x20Error:\x20'+_0x538608[_0x4cb897(0x233)]);}}module[a0_0x590be7(0x24d)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler,'generateHealthReport':generateHealthReport};