const a0_0xd023b4=a0_0x4aa1;(function(_0x1ba9a8,_0x3603fb){const _0x39405f=a0_0x4aa1,_0x46ef50=_0x1ba9a8();while(!![]){try{const _0x1c0656=-parseInt(_0x39405f(0x1bc))/0x1*(-parseInt(_0x39405f(0x190))/0x2)+parseInt(_0x39405f(0x1f9))/0x3+parseInt(_0x39405f(0x1d7))/0x4*(parseInt(_0x39405f(0x1fa))/0x5)+parseInt(_0x39405f(0x20b))/0x6+-parseInt(_0x39405f(0x19e))/0x7*(parseInt(_0x39405f(0x20f))/0x8)+parseInt(_0x39405f(0x1cd))/0x9+-parseInt(_0x39405f(0x1c1))/0xa*(parseInt(_0x39405f(0x1bb))/0xb);if(_0x1c0656===_0x3603fb)break;else _0x46ef50['push'](_0x46ef50['shift']());}catch(_0x47a771){_0x46ef50['push'](_0x46ef50['shift']());}}}(a0_0x2c4b,0xa9f7a));const a0_0x3e71bb=(function(){let _0xea9bb6=!![];return function(_0x2e4536,_0x480ef4){const _0x26f109=_0xea9bb6?function(){const _0x11f458=a0_0x4aa1;if(_0x480ef4){const _0x2e022a=_0x480ef4[_0x11f458(0x21a)](_0x2e4536,arguments);return _0x480ef4=null,_0x2e022a;}}:function(){};return _0xea9bb6=![],_0x26f109;};}()),a0_0x2ce992=a0_0x3e71bb(this,function(){const _0x2ef318=a0_0x4aa1;return a0_0x2ce992[_0x2ef318(0x18f)]()[_0x2ef318(0x1c8)](_0x2ef318(0x19f))[_0x2ef318(0x18f)]()[_0x2ef318(0x1de)](a0_0x2ce992)[_0x2ef318(0x1c8)]('(((.+)+)+)+$');});a0_0x2ce992();'use strict';const {GoogleGenerativeAI}=require(a0_0xd023b4(0x214)),setup=require(a0_0xd023b4(0x1dc)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0xd023b4(0x1ae),LTM_DP_STATUS=a0_0xd023b4(0x1d8),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':a0_0xd023b4(0x1d9),'family':a0_0xd023b4(0x1ee),'single_comfort':a0_0xd023b4(0x20d),'security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0xd023b4(0x1fd)};function canCallApi(){const _0x580743=a0_0xd023b4,_0x59c519=Date[_0x580743(0x1a4)]();return _0x59c519-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x30a083=a0_0xd023b4;lastGlobalApiCall=Date[_0x30a083(0x1a4)]();}async function getWeatherContext(_0x45de98){const _0x4b0e7c=a0_0xd023b4;if(!_0x45de98[_0x4b0e7c(0x1eb)]['useWeather']||!_0x45de98['config']['weatherInstance'])return _0x4b0e7c(0x1ad);try{const _0x219c97=_0x45de98[_0x4b0e7c(0x1eb)][_0x4b0e7c(0x195)];let _0x4bdfd7=await _0x45de98[_0x4b0e7c(0x205)](_0x219c97+'.Current.Temperature');if(!_0x4bdfd7)_0x4bdfd7=await _0x45de98[_0x4b0e7c(0x205)](_0x219c97+_0x4b0e7c(0x197));let _0x131a98=await _0x45de98[_0x4b0e7c(0x205)](_0x219c97+_0x4b0e7c(0x188));if(!_0x131a98)_0x131a98=await _0x45de98[_0x4b0e7c(0x205)](_0x219c97+'.forecast.current.state');let _0x3e0979='Unbekannt';const _0xf62ed6=await _0x45de98[_0x4b0e7c(0x205)](_0x219c97+_0x4b0e7c(0x217));if(_0xf62ed6)_0x3e0979=_0xf62ed6[_0x4b0e7c(0x1f4)]?_0x4b0e7c(0x198):_0x4b0e7c(0x1b9);if(_0x4bdfd7&&_0x131a98)return _0x4bdfd7[_0x4b0e7c(0x1f4)]+_0x4b0e7c(0x193)+_0x131a98['val']+_0x4b0e7c(0x1b4)+_0x3e0979;}catch(_0x40d2dd){}return _0x4b0e7c(0x209);}function a0_0x2c4b(){const _0xadd7dd=['ltmStbWindowDays','ltmLtbWindowDays','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','isAlert','LTM.driftAnalysis.lastCheck','config','decision','info','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','driftDetails','slice','baselineDrift','BUTLER\x20Execution\x20Error:\x20','isProVersion','val','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','analysis.isAlert','error','KI-Fehler\x20(Fallback)','3337344foVUjh','20IfRwXk','analysis.automation.targetValue','\x0aSTB:\x20','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','response','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','system.presenceWho','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','stringify','normal','send','getForeignStateAsync','analysis.automation.patternDetected','\x20=\x20','timestamp','Wetterdaten\x20nicht\x20abrufbar','replace','7885014vATGJC','setForeignStateAsync','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','parse','8nXUaPC','currentSystemMode','Traffic-Schutz\x20(Auto-Approved)','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','@google/generative-ai','automationProposal','debug','.Current.IsNight','text','exports','apply','.Current.WeatherText','targetValue','ðŸ“…\x20Daily\x20Digest:\x0a',',\x20Wetter:\x20','alertReason','detected','approved','toString','13914ZGrdec','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','âš ï¸\x20ALARM:\x20','Â°C,\x20','setStateAsync','weatherInstance','LTM.driftAnalysis.driftDetails','.forecast.current.temperature','Nacht','pop','\x20->\x20','\x20Ã¼bersprungen\x20(Auto-Approved).','analysis.analysisHistory','rawEventLog','1555652bqbANU','(((.+)+)+)+$','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','toFixed','description','sendNotification','now','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','analysis.automation.targetId','eventHistory','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','aiPersona',').\x20Sending\x20notification...','Started...','splice','Unbekannt\x20(Kein\x20Sensor)','LTM.dailyDigests','Briefing\x20Error:\x20','%)\x20nach\x20\x22','reason','activityLevel','unshift',',\x20LichtverhÃ¤ltnisse:\x20','dailyDigests','generateContent','.\x20ANWESEND:\x20','lastAlertState','Tag','ðŸŒ…\x20Morning\x20Briefing:\x0a','30921TXYKIL','45bCldqr','summary','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','analysis.automation.autoApply','analysis.activitySummary','10860vxAaqa','geminiModel','warn','getStateAsync','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','analysis.lastResult','Unbekannt','search','.\x20SYSTEM_MODE:\x20','.\x20EVENTS:\x20','ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20','length','7261362lCbTUi','Skipped\x20(No\x20AI\x20or\x20Data)','Gemini\x20Error:\x20','toISOString','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','Skipped\x20(Traffic)','KI\x20offline\x20(Fallback)','generic','log','424668pVCYBn','LTM.processingStatus','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','message','./setup','N/A\x20(Learning)','constructor','.\x20KONTEXT:\x20','analysisHistory','ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','Success','LTM.driftAnalysis.baselineDrift','push','trim'];a0_0x2c4b=function(){return _0xadd7dd;};return a0_0x2c4b();}async function consultButler(_0x2442ac,_0x3f6d27,_0x4f4920,_0x4748d6){const _0x1596dc=a0_0xd023b4;if(!_0x2442ac[_0x1596dc(0x1c2)])return{'approved':!![],'reason':_0x1596dc(0x1d4)};const _0x496efc=Date[_0x1596dc(0x1a4)]();if(decisionCache[_0x3f6d27]&&_0x496efc-decisionCache[_0x3f6d27][_0x1596dc(0x208)]<CACHE_TTL_MS){const _0x4a0fd4=decisionCache[_0x3f6d27][_0x1596dc(0x1ec)];return _0x2442ac['log']['debug'](_0x1596dc(0x1d2)+_0x3f6d27+_0x1596dc(0x19a)+(_0x4a0fd4[_0x1596dc(0x18e)]?'OK':'NO')+'\x20('+_0x4a0fd4[_0x1596dc(0x1b1)]+')'),_0x4a0fd4;}if(!canCallApi())return _0x2442ac[_0x1596dc(0x1d6)][_0x1596dc(0x216)]('ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20'+_0x3f6d27+_0x1596dc(0x19b)),{'approved':!![],'reason':_0x1596dc(0x211)};const _0x171e4b=new Date()['toLocaleTimeString'](),_0x44ffbc=await getWeatherContext(_0x2442ac),_0x5a999e=PERSONA_MAPPING[_0x2442ac['config'][_0x1596dc(0x1a9)]||_0x1596dc(0x1d5)],_0x106981=_0x1596dc(0x1a5)+_0x171e4b+_0x1596dc(0x18b)+_0x44ffbc+_0x1596dc(0x1f5)+(_0x4748d6*0x64)[_0x1596dc(0x1a1)](0x0)+_0x1596dc(0x1b0)+_0x3f6d27+_0x1596dc(0x1a0)+_0x4f4920+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x5a999e+_0x1596dc(0x1e8);try{updateApiTimestamp();const _0xe65582=await _0x2442ac['geminiModel'][_0x1596dc(0x1b6)](_0x106981),_0x3355b3=_0xe65582[_0x1596dc(0x1fe)][_0x1596dc(0x218)]()[_0x1596dc(0x20a)](/```json|```/g,'')[_0x1596dc(0x1e5)](),_0x3162f3=JSON['parse'](_0x3355b3);return decisionCache[_0x3f6d27]={'decision':_0x3162f3,'timestamp':_0x496efc},_0x3162f3;}catch(_0x26ebc3){return _0x2442ac[_0x1596dc(0x1d6)][_0x1596dc(0x1c3)](_0x1596dc(0x1da)+_0x26ebc3[_0x1596dc(0x1db)]),decisionCache[_0x3f6d27]={'decision':{'approved':!![],'reason':_0x1596dc(0x1f8)},'timestamp':_0x496efc-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x1596dc(0x1f8)};}}async function runGeminiAnalysis(_0x4d5d4c,_0x443d80=''){const _0x496ab8=a0_0xd023b4;if(!_0x4d5d4c[_0x496ab8(0x1c2)])return;if(!canCallApi()){_0x4d5d4c[_0x496ab8(0x1d6)][_0x496ab8(0x216)](_0x496ab8(0x191));return;}if(_0x4d5d4c[_0x496ab8(0x1a7)][_0x496ab8(0x1cc)]===0x0)return;const _0x19eaf0=_0x4d5d4c[_0x496ab8(0x1a7)][_0x496ab8(0x1f0)](0x0,0xf),_0x3f24f1=_0x4d5d4c[_0x496ab8(0x210)],_0x55f3f0=PERSONA_MAPPING[_0x4d5d4c['config']['aiPersona']||_0x496ab8(0x1d5)],_0x4e40d7=_0x4d5d4c[_0x496ab8(0x1eb)]['livingContext']||'Keine\x20Details.';let _0x57c5a3=_0x496ab8(0x1c7);try{const _0x42fb5f=await _0x4d5d4c[_0x496ab8(0x1c4)](_0x496ab8(0x200));if(_0x42fb5f&&_0x42fb5f[_0x496ab8(0x1f4)])_0x57c5a3=_0x42fb5f[_0x496ab8(0x1f4)];}catch(_0x369908){}let _0x2ebc40=![];try{const _0x347efc=await _0x4d5d4c[_0x496ab8(0x1c4)](_0x496ab8(0x1bf));if(_0x347efc&&_0x347efc['val'])_0x2ebc40=!![];}catch(_0x41b0f6){}const _0xbeb496=_0x496ab8(0x201)+_0x55f3f0+_0x496ab8(0x1df)+_0x4e40d7+_0x496ab8(0x1c9)+_0x3f24f1+_0x496ab8(0x1b7)+_0x57c5a3+_0x496ab8(0x1ca)+JSON[_0x496ab8(0x202)](_0x19eaf0)+'.\x20EMERGENCY:\x20'+_0x443d80+_0x496ab8(0x1c5);try{updateApiTimestamp();const _0x4c357d=await _0x4d5d4c['geminiModel'][_0x496ab8(0x1b6)](_0xbeb496),_0x592ea5=JSON[_0x496ab8(0x20e)](_0x4c357d[_0x496ab8(0x1fe)][_0x496ab8(0x218)]()['replace'](/```json|```/g,'')['trim']());await _0x4d5d4c[_0x496ab8(0x194)](_0x496ab8(0x1c6),{'val':JSON[_0x496ab8(0x202)](_0x592ea5),'ack':!![]});if(_0x592ea5['summary'])await _0x4d5d4c[_0x496ab8(0x194)](_0x496ab8(0x1c0),{'val':_0x592ea5[_0x496ab8(0x1bd)],'ack':!![]});const _0x4b1953={'timestamp':Date[_0x496ab8(0x1a4)](),'id':Date[_0x496ab8(0x1a4)]()[_0x496ab8(0x18f)](),'analysis':{'activity':{'summary':_0x592ea5[_0x496ab8(0x1bd)],'isAlert':_0x592ea5['isAlert'],'alertReason':_0x592ea5[_0x496ab8(0x18c)]},'comfort':{'automationProposal':_0x592ea5[_0x496ab8(0x215)]}}};_0x4d5d4c[_0x496ab8(0x1e0)][_0x496ab8(0x1b3)](_0x4b1953);if(_0x4d5d4c[_0x496ab8(0x1e0)][_0x496ab8(0x1cc)]>0x32)_0x4d5d4c[_0x496ab8(0x1e0)][_0x496ab8(0x199)]();await _0x4d5d4c[_0x496ab8(0x194)](_0x496ab8(0x19c),{'val':JSON[_0x496ab8(0x202)](_0x4d5d4c[_0x496ab8(0x1e0)]),'ack':!![]});const _0x957bd=_0x592ea5[_0x496ab8(0x1e9)]||![];_0x957bd!==_0x4d5d4c[_0x496ab8(0x1b8)]&&(await _0x4d5d4c[_0x496ab8(0x194)](_0x496ab8(0x1f6),{'val':_0x957bd,'ack':!![]}),_0x4d5d4c[_0x496ab8(0x1b8)]=_0x957bd,_0x957bd&&(await _0x4d5d4c[_0x496ab8(0x194)]('analysis.alertReason',{'val':_0x592ea5[_0x496ab8(0x18c)],'ack':!![]}),setup[_0x496ab8(0x1a3)](_0x4d5d4c,_0x496ab8(0x192)+_0x592ea5[_0x496ab8(0x18c)],![],_0x592ea5['isEmergency'])));if(_0x592ea5[_0x496ab8(0x215)]&&_0x592ea5[_0x496ab8(0x215)][_0x496ab8(0x18d)]){await _0x4d5d4c[_0x496ab8(0x194)](_0x496ab8(0x206),{'val':!![],'ack':!![]}),await _0x4d5d4c[_0x496ab8(0x194)]('analysis.automation.description',{'val':_0x592ea5[_0x496ab8(0x215)][_0x496ab8(0x1a2)],'ack':!![]}),await _0x4d5d4c[_0x496ab8(0x194)](_0x496ab8(0x1a6),{'val':_0x592ea5[_0x496ab8(0x215)]['targetId'],'ack':!![]}),await _0x4d5d4c['setStateAsync'](_0x496ab8(0x1fb),{'val':JSON['stringify'](_0x592ea5[_0x496ab8(0x215)][_0x496ab8(0x189)]),'ack':!![]});if(_0x2ebc40)executeAutomationAction(_0x4d5d4c);}}catch(_0x12f5d2){_0x4d5d4c[_0x496ab8(0x1d6)][_0x496ab8(0x1f7)](_0x496ab8(0x1cf)+_0x12f5d2['message']);}}async function createDailyDigest(_0x4f1303,_0x4ad85d){const _0x36308b=a0_0xd023b4;if(!_0x4f1303[_0x36308b(0x1f3)])return;if(!canCallApi()){await _0x4f1303[_0x36308b(0x194)](LTM_DP_STATUS,{'val':_0x36308b(0x1d3),'ack':!![]});return;}await _0x4f1303[_0x36308b(0x194)](LTM_DP_STATUS,{'val':_0x36308b(0x1ab),'ack':!![]});if(!_0x4f1303['geminiModel']||_0x4f1303[_0x36308b(0x19d)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4f1303[_0x36308b(0x194)](LTM_DP_STATUS,{'val':_0x36308b(0x1ce),'ack':!![]});return;}const _0x340315=JSON[_0x36308b(0x20e)](JSON['stringify'](_0x4f1303['rawEventLog'])),_0x480eea=_0x340315[_0x36308b(0x1cc)],_0x24188a=_0x36308b(0x1a8)+JSON[_0x36308b(0x202)](_0x340315);try{updateApiTimestamp();const _0x4be04d=await _0x4f1303['geminiModel'][_0x36308b(0x1b6)](_0x24188a),_0x2257ce=JSON[_0x36308b(0x20e)](_0x4be04d[_0x36308b(0x1fe)][_0x36308b(0x218)]()[_0x36308b(0x20a)](/```json|```/g,'')[_0x36308b(0x1e5)]()),_0x13dec7={'timestamp':new Date()[_0x36308b(0x1d0)](),'eventCount':_0x480eea,'summary':_0x2257ce[_0x36308b(0x1bd)]||'Digest','activityLevel':_0x2257ce[_0x36308b(0x1b2)]||_0x36308b(0x203),'systemMode':_0x4f1303[_0x36308b(0x210)]};_0x4f1303[_0x36308b(0x1b5)][_0x36308b(0x1e4)](_0x13dec7);const _0x22f625=_0x4f1303[_0x36308b(0x1eb)][_0x36308b(0x1e7)]||0x3c;_0x4f1303[_0x36308b(0x1b5)][_0x36308b(0x1cc)]>_0x22f625&&_0x4f1303[_0x36308b(0x1b5)][_0x36308b(0x1ac)](0x0,_0x4f1303[_0x36308b(0x1b5)][_0x36308b(0x1cc)]-_0x22f625);await _0x4f1303[_0x36308b(0x194)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x36308b(0x202)](_0x4f1303[_0x36308b(0x1b5)]),'ack':!![]}),_0x4f1303[_0x36308b(0x19d)]=[],await _0x4f1303[_0x36308b(0x194)](LTM_DP_RAW_LOG,{'val':JSON[_0x36308b(0x202)](_0x4f1303[_0x36308b(0x19d)]),'ack':!![]}),await _0x4f1303['setStateAsync'](LTM_DP_STATUS,{'val':_0x36308b(0x1e2),'ack':!![]});const _0x6462dc=_0x36308b(0x18a)+_0x2257ce[_0x36308b(0x1bd)]+'\x0aAktivitÃ¤t:\x20'+_0x2257ce[_0x36308b(0x1b2)];setup[_0x36308b(0x1a3)](_0x4f1303,_0x6462dc,![],![]);if(_0x4f1303[_0x36308b(0x1f3)]&&_0x4ad85d)_0x4ad85d[_0x36308b(0x204)](_0x4f1303,'ANALYZE_HEALTH',{'digest':_0x13dec7});}catch(_0x19b35b){_0x4f1303[_0x36308b(0x1d6)][_0x36308b(0x1f7)](_0x19b35b['message']);}}async function runBaselineDriftAnalysis(_0x6840e8){const _0x63eecf=a0_0xd023b4;if(!_0x6840e8[_0x63eecf(0x1f3)]||!_0x6840e8[_0x63eecf(0x1c2)])return;if(!canCallApi())return;const _0x3bfcd6=_0x6840e8['config'][_0x63eecf(0x1e6)]||0xe;if(_0x6840e8['dailyDigests']['length']<_0x3bfcd6+0x7){await _0x6840e8[_0x63eecf(0x194)](_0x63eecf(0x1e3),{'val':_0x63eecf(0x1dd),'ack':!![]});return;}const _0x32496=_0x6840e8[_0x63eecf(0x1b5)]['slice'](-_0x3bfcd6),_0x2c18b4=_0x6840e8[_0x63eecf(0x1b5)][_0x63eecf(0x1f0)](0x0,_0x6840e8[_0x63eecf(0x1b5)][_0x63eecf(0x1cc)]-_0x3bfcd6),_0x1bab0b=_0x63eecf(0x212)+JSON['stringify'](_0x2c18b4)+_0x63eecf(0x1fc)+JSON[_0x63eecf(0x202)](_0x32496);try{updateApiTimestamp();const _0x3c37db=await _0x6840e8[_0x63eecf(0x1c2)][_0x63eecf(0x1b6)](_0x1bab0b),_0x919c86=JSON[_0x63eecf(0x20e)](_0x3c37db[_0x63eecf(0x1fe)][_0x63eecf(0x218)]()[_0x63eecf(0x20a)](/```json|```/g,'')['trim']());_0x919c86[_0x63eecf(0x1f1)]&&(await _0x6840e8[_0x63eecf(0x194)](_0x63eecf(0x1e3),{'val':_0x919c86[_0x63eecf(0x1f1)],'ack':!![]}),await _0x6840e8[_0x63eecf(0x194)](_0x63eecf(0x196),{'val':_0x919c86[_0x63eecf(0x1ef)],'ack':!![]}),await _0x6840e8[_0x63eecf(0x194)](_0x63eecf(0x1ea),{'val':Date['now'](),'ack':!![]}));}catch(_0x12f373){}}async function executeAutomationAction(_0x24a944){const _0x581475=a0_0xd023b4;try{const _0x3ca711=await _0x24a944['getStateAsync'](_0x581475(0x1a6)),_0x249b2a=await _0x24a944[_0x581475(0x1c4)](_0x581475(0x1fb));if(_0x3ca711&&_0x3ca711[_0x581475(0x1f4)]&&_0x249b2a){const _0x2d8bf8=_0x3ca711[_0x581475(0x1f4)];let _0x57abe9=_0x249b2a[_0x581475(0x1f4)];try{_0x57abe9=JSON[_0x581475(0x20e)](_0x57abe9);}catch(_0x247889){}_0x24a944['log'][_0x581475(0x1ed)](_0x581475(0x1ff)+_0x2d8bf8+_0x581475(0x207)+_0x57abe9),await _0x24a944[_0x581475(0x20c)](_0x2d8bf8,_0x57abe9);}else _0x24a944[_0x581475(0x1d6)][_0x581475(0x1c3)](_0x581475(0x1d1));}catch(_0x33210e){_0x24a944[_0x581475(0x1d6)]['error'](_0x581475(0x1f2)+_0x33210e[_0x581475(0x1db)]);}}function a0_0x4aa1(_0x39baa5,_0x1bddc1){const _0x5214a8=a0_0x2c4b();return a0_0x4aa1=function(_0x2ce992,_0x3e71bb){_0x2ce992=_0x2ce992-0x188;let _0x2c4ba4=_0x5214a8[_0x2ce992];return _0x2c4ba4;},a0_0x4aa1(_0x39baa5,_0x1bddc1);}async function sendMorningBriefing(_0x289668){const _0x1667de=a0_0xd023b4;if(!_0x289668[_0x1667de(0x1c2)]){_0x289668[_0x1667de(0x1d6)][_0x1667de(0x1c3)](_0x1667de(0x213));return;}_0x289668[_0x1667de(0x1d6)][_0x1667de(0x1ed)](_0x1667de(0x1e1));try{updateApiTimestamp();const _0xfeaf2b=_0x1667de(0x1be),_0xcc09b3=await _0x289668[_0x1667de(0x1c2)][_0x1667de(0x1b6)](_0xfeaf2b),_0x5b2da2=_0xcc09b3['response'][_0x1667de(0x218)]();_0x289668[_0x1667de(0x1d6)]['info'](_0x1667de(0x1cb)+_0x5b2da2[_0x1667de(0x1cc)]+_0x1667de(0x1aa)),setup[_0x1667de(0x1a3)](_0x289668,_0x1667de(0x1ba)+_0x5b2da2);}catch(_0x505622){_0x289668[_0x1667de(0x1d6)][_0x1667de(0x1f7)](_0x1667de(0x1af)+_0x505622[_0x1667de(0x1db)]);}}module[a0_0xd023b4(0x219)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};