const a0_0xc17c16=a0_0x237c;(function(_0x37da6b,_0x43ac8f){const _0x5a8a32=a0_0x237c,_0x3ede8b=_0x37da6b();while(!![]){try{const _0x215bf2=-parseInt(_0x5a8a32(0x1f8))/0x1+-parseInt(_0x5a8a32(0x206))/0x2*(parseInt(_0x5a8a32(0x214))/0x3)+-parseInt(_0x5a8a32(0x185))/0x4*(-parseInt(_0x5a8a32(0x204))/0x5)+parseInt(_0x5a8a32(0x1a7))/0x6*(parseInt(_0x5a8a32(0x1eb))/0x7)+parseInt(_0x5a8a32(0x1cb))/0x8*(parseInt(_0x5a8a32(0x1c3))/0x9)+parseInt(_0x5a8a32(0x210))/0xa*(-parseInt(_0x5a8a32(0x20a))/0xb)+parseInt(_0x5a8a32(0x18e))/0xc*(parseInt(_0x5a8a32(0x190))/0xd);if(_0x215bf2===_0x43ac8f)break;else _0x3ede8b['push'](_0x3ede8b['shift']());}catch(_0x7168a0){_0x3ede8b['push'](_0x3ede8b['shift']());}}}(a0_0x281d,0x747fd));const a0_0x3d4c43=(function(){let _0x1c5835=!![];return function(_0x14f489,_0x1ad66b){const _0x159486=_0x1c5835?function(){const _0x30733e=a0_0x237c;if(_0x1ad66b){const _0x2ab3c9=_0x1ad66b[_0x30733e(0x1c7)](_0x14f489,arguments);return _0x1ad66b=null,_0x2ab3c9;}}:function(){};return _0x1c5835=![],_0x159486;};}()),a0_0x38d5b8=a0_0x3d4c43(this,function(){const _0xda37bd=a0_0x237c;return a0_0x38d5b8[_0xda37bd(0x18f)]()[_0xda37bd(0x1de)](_0xda37bd(0x1d8))[_0xda37bd(0x18f)]()[_0xda37bd(0x1b4)](a0_0x38d5b8)[_0xda37bd(0x1de)](_0xda37bd(0x1d8));});a0_0x38d5b8();'use strict';function a0_0x237c(_0x4ee3a3,_0x1846f9){const _0x1ed83f=a0_0x281d();return a0_0x237c=function(_0x38d5b8,_0x3d4c43){_0x38d5b8=_0x38d5b8-0x185;let _0x281d31=_0x1ed83f[_0x38d5b8];return _0x281d31;},a0_0x237c(_0x4ee3a3,_0x1846f9);}const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require('./setup'),GEMINI_MODEL=a0_0xc17c16(0x21e),LTM_DP_DAILY_DIGESTS=a0_0xc17c16(0x208),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0xc17c16(0x194),'senior_aal':a0_0xc17c16(0x1c2),'family':a0_0xc17c16(0x1a2),'single_comfort':a0_0xc17c16(0x20c),'security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0xc17c16(0x1be)};function canCallApi(){const _0x2617d4=a0_0xc17c16,_0x5154fd=Date[_0x2617d4(0x1ef)]();return _0x5154fd-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x5671e8=a0_0xc17c16;lastGlobalApiCall=Date[_0x5671e8(0x1ef)]();}async function getWeatherContext(_0x3f621d){const _0x17c779=a0_0xc17c16;if(!_0x3f621d[_0x17c779(0x1f6)][_0x17c779(0x1e2)]||!_0x3f621d[_0x17c779(0x1f6)][_0x17c779(0x186)])return _0x17c779(0x21d);try{const _0x2e4d4f=_0x3f621d['config'][_0x17c779(0x186)];let _0x2674d2=await _0x3f621d['getForeignStateAsync'](_0x2e4d4f+_0x17c779(0x1d7));if(!_0x2674d2)_0x2674d2=await _0x3f621d['getForeignStateAsync'](_0x2e4d4f+_0x17c779(0x1ee));let _0x446258=await _0x3f621d[_0x17c779(0x1f9)](_0x2e4d4f+'.Current.WeatherText');if(!_0x446258)_0x446258=await _0x3f621d[_0x17c779(0x1f9)](_0x2e4d4f+'.forecast.current.state');let _0x3065a0=_0x17c779(0x19c);const _0x2bcfa0=await _0x3f621d[_0x17c779(0x1f9)](_0x2e4d4f+_0x17c779(0x1fc));if(_0x2bcfa0)_0x3065a0=_0x2bcfa0[_0x17c779(0x219)]?'Nacht':_0x17c779(0x1d2);if(_0x2674d2&&_0x446258)return _0x2674d2[_0x17c779(0x219)]+_0x17c779(0x1e9)+_0x446258[_0x17c779(0x219)]+_0x17c779(0x217)+_0x3065a0;}catch(_0x35825b){}return _0x17c779(0x1d6);}async function consultButler(_0x1eeb2d,_0xb00f8d,_0x4b5c37,_0x1a8c3c){const _0x5a0a5a=a0_0xc17c16;if(!_0x1eeb2d['geminiModel'])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x4c07da=Date['now']();if(decisionCache[_0xb00f8d]&&_0x4c07da-decisionCache[_0xb00f8d][_0x5a0a5a(0x1e8)]<CACHE_TTL_MS){const _0xf9a85f=decisionCache[_0xb00f8d][_0x5a0a5a(0x1b5)];return _0x1eeb2d['log']['debug']('ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20'+_0xb00f8d+'\x20->\x20'+(_0xf9a85f[_0x5a0a5a(0x1dd)]?'OK':'NO')+'\x20('+_0xf9a85f[_0x5a0a5a(0x1e4)]+')'),_0xf9a85f;}if(!canCallApi())return _0x1eeb2d[_0x5a0a5a(0x20e)][_0x5a0a5a(0x1cc)](_0x5a0a5a(0x1ca)+_0xb00f8d+_0x5a0a5a(0x1fd)),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x54c9c6=new Date()['toLocaleTimeString'](),_0x4d873e=await getWeatherContext(_0x1eeb2d),_0xca40d3=PERSONA_MAPPING[_0x1eeb2d[_0x5a0a5a(0x1f6)][_0x5a0a5a(0x19d)]||_0x5a0a5a(0x218)],_0x3eac84='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x54c9c6+_0x5a0a5a(0x203)+_0x4d873e+_0x5a0a5a(0x220)+(_0x1a8c3c*0x64)['toFixed'](0x0)+_0x5a0a5a(0x1f0)+_0xb00f8d+_0x5a0a5a(0x18b)+_0x4b5c37+_0x5a0a5a(0x1c8)+_0xca40d3+_0x5a0a5a(0x1d4);try{updateApiTimestamp();const _0x4c8bd0=await _0x1eeb2d[_0x5a0a5a(0x198)][_0x5a0a5a(0x1f1)](_0x3eac84),_0x551511=_0x4c8bd0[_0x5a0a5a(0x1c4)]['text']()[_0x5a0a5a(0x1ed)](/```json|```/g,'')[_0x5a0a5a(0x1fb)](),_0x195b91=JSON['parse'](_0x551511);return decisionCache[_0xb00f8d]={'decision':_0x195b91,'timestamp':_0x4c07da},_0x195b91;}catch(_0x430310){return _0x1eeb2d[_0x5a0a5a(0x20e)][_0x5a0a5a(0x1b6)](_0x5a0a5a(0x187)+_0x430310[_0x5a0a5a(0x216)]),decisionCache[_0xb00f8d]={'decision':{'approved':!![],'reason':_0x5a0a5a(0x21c)},'timestamp':_0x4c07da-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x5a0a5a(0x21c)};}}async function runGeminiAnalysis(_0x4fc287,_0x181d32=''){const _0x151ff7=a0_0xc17c16;if(!_0x4fc287[_0x151ff7(0x198)])return;if(!canCallApi()){_0x4fc287[_0x151ff7(0x20e)][_0x151ff7(0x1cc)](_0x151ff7(0x1e7));return;}if(_0x4fc287[_0x151ff7(0x1b1)][_0x151ff7(0x213)]===0x0)return;const _0x62a549=_0x4fc287[_0x151ff7(0x1b1)][_0x151ff7(0x200)](0x0,0xf),_0x568aef=_0x4fc287['currentSystemMode'],_0x39e24e=PERSONA_MAPPING[_0x4fc287[_0x151ff7(0x1f6)][_0x151ff7(0x19d)]||_0x151ff7(0x218)],_0x24a5ac=_0x4fc287[_0x151ff7(0x1f6)]['livingContext']||_0x151ff7(0x1bb);let _0x5784f3=_0x151ff7(0x19c);try{const _0x56a060=await _0x4fc287['getStateAsync']('system.presenceWho');if(_0x56a060&&_0x56a060[_0x151ff7(0x219)])_0x5784f3=_0x56a060[_0x151ff7(0x219)];}catch(_0x51d725){}let _0xf78b45=![];try{const _0x428378=await _0x4fc287[_0x151ff7(0x1a0)](_0x151ff7(0x20d));if(_0x428378&&_0x428378[_0x151ff7(0x219)])_0xf78b45=!![];}catch(_0x6de8c3){}const _0x3d704d=_0x151ff7(0x211)+_0x39e24e+_0x151ff7(0x1bf)+_0x24a5ac+'.\x20SYSTEM_MODE:\x20'+_0x568aef+'.\x20ANWESEND:\x20'+_0x5784f3+_0x151ff7(0x19f)+JSON[_0x151ff7(0x1f7)](_0x62a549)+_0x151ff7(0x1a6)+_0x181d32+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x57d9e8=await _0x4fc287[_0x151ff7(0x198)][_0x151ff7(0x1f1)](_0x3d704d),_0x57d05f=JSON['parse'](_0x57d9e8[_0x151ff7(0x1c4)][_0x151ff7(0x1ec)]()[_0x151ff7(0x1ed)](/```json|```/g,'')[_0x151ff7(0x1fb)]());await _0x4fc287[_0x151ff7(0x1d3)](_0x151ff7(0x1c5),{'val':JSON[_0x151ff7(0x1f7)](_0x57d05f),'ack':!![]});if(_0x57d05f[_0x151ff7(0x193)])await _0x4fc287[_0x151ff7(0x1d3)](_0x151ff7(0x209),{'val':_0x57d05f['summary'],'ack':!![]});const _0x1c81c4={'timestamp':Date[_0x151ff7(0x1ef)](),'id':Date[_0x151ff7(0x1ef)]()[_0x151ff7(0x18f)](),'analysis':{'activity':{'summary':_0x57d05f[_0x151ff7(0x193)],'isAlert':_0x57d05f[_0x151ff7(0x199)],'alertReason':_0x57d05f[_0x151ff7(0x21b)]},'comfort':{'automationProposal':_0x57d05f[_0x151ff7(0x1d1)]}}};_0x4fc287[_0x151ff7(0x20b)][_0x151ff7(0x202)](_0x1c81c4);if(_0x4fc287[_0x151ff7(0x20b)][_0x151ff7(0x213)]>0x32)_0x4fc287[_0x151ff7(0x20b)][_0x151ff7(0x195)]();await _0x4fc287[_0x151ff7(0x1d3)](_0x151ff7(0x221),{'val':JSON[_0x151ff7(0x1f7)](_0x4fc287[_0x151ff7(0x20b)]),'ack':!![]});const _0x58eaf3=_0x57d05f['isAlert']||![];_0x58eaf3!==_0x4fc287[_0x151ff7(0x1a3)]&&(await _0x4fc287[_0x151ff7(0x1d3)](_0x151ff7(0x1df),{'val':_0x58eaf3,'ack':!![]}),_0x4fc287[_0x151ff7(0x1a3)]=_0x58eaf3,_0x58eaf3&&(await _0x4fc287[_0x151ff7(0x1d3)](_0x151ff7(0x1b7),{'val':_0x57d05f[_0x151ff7(0x21b)],'ack':!![]}),setup['sendNotification'](_0x4fc287,_0x151ff7(0x19b)+_0x57d05f[_0x151ff7(0x21b)],![],_0x57d05f['isEmergency'])));if(_0x57d05f[_0x151ff7(0x1d1)]&&_0x57d05f[_0x151ff7(0x1d1)][_0x151ff7(0x1c6)]){await _0x4fc287[_0x151ff7(0x1d3)](_0x151ff7(0x1d9),{'val':!![],'ack':!![]}),await _0x4fc287[_0x151ff7(0x1d3)](_0x151ff7(0x1fa),{'val':_0x57d05f['automationProposal']['description'],'ack':!![]}),await _0x4fc287['setStateAsync'](_0x151ff7(0x1b3),{'val':_0x57d05f['automationProposal'][_0x151ff7(0x196)],'ack':!![]}),await _0x4fc287['setStateAsync'](_0x151ff7(0x1f4),{'val':JSON['stringify'](_0x57d05f['automationProposal'][_0x151ff7(0x1fe)]),'ack':!![]});if(_0xf78b45)executeAutomationAction(_0x4fc287);}}catch(_0x4f051e){_0x4fc287[_0x151ff7(0x20e)]['error'](_0x151ff7(0x1aa)+_0x4f051e[_0x151ff7(0x216)]);}}async function createDailyDigest(_0x13c9c6,_0x3a337e){const _0x8d0469=a0_0xc17c16;if(!_0x13c9c6[_0x8d0469(0x1da)])return;if(!canCallApi()){await _0x13c9c6[_0x8d0469(0x1d3)](LTM_DP_STATUS,{'val':_0x8d0469(0x1cd),'ack':!![]});return;}await _0x13c9c6['setStateAsync'](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x13c9c6['geminiModel']||_0x13c9c6['rawEventLog']['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x13c9c6[_0x8d0469(0x1d3)](LTM_DP_STATUS,{'val':_0x8d0469(0x1dc),'ack':!![]});return;}const _0xff912d=JSON[_0x8d0469(0x1bd)](JSON['stringify'](_0x13c9c6[_0x8d0469(0x1b2)])),_0x2871c9=_0xff912d[_0x8d0469(0x213)],_0x1a17b1='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x8d0469(0x1f7)](_0xff912d);try{updateApiTimestamp();const _0x452f91=await _0x13c9c6['geminiModel'][_0x8d0469(0x1f1)](_0x1a17b1),_0x18f539=JSON['parse'](_0x452f91[_0x8d0469(0x1c4)][_0x8d0469(0x1ec)]()[_0x8d0469(0x1ed)](/```json|```/g,'')[_0x8d0469(0x1fb)]()),_0xd95c0b={'timestamp':new Date()[_0x8d0469(0x201)](),'eventCount':_0x2871c9,'summary':_0x18f539['summary']||_0x8d0469(0x1a9),'activityLevel':_0x18f539['activityLevel']||_0x8d0469(0x1db),'systemMode':_0x13c9c6[_0x8d0469(0x1ff)]};_0x13c9c6[_0x8d0469(0x188)][_0x8d0469(0x1a5)](_0xd95c0b);const _0x3c724f=_0x13c9c6[_0x8d0469(0x1f6)][_0x8d0469(0x1ac)]||0x3c;_0x13c9c6[_0x8d0469(0x188)][_0x8d0469(0x213)]>_0x3c724f&&_0x13c9c6[_0x8d0469(0x188)]['splice'](0x0,_0x13c9c6['dailyDigests']['length']-_0x3c724f);await _0x13c9c6[_0x8d0469(0x1d3)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x13c9c6[_0x8d0469(0x188)]),'ack':!![]}),_0x13c9c6[_0x8d0469(0x1b2)]=[],await _0x13c9c6[_0x8d0469(0x1d3)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x13c9c6['rawEventLog']),'ack':!![]}),await _0x13c9c6[_0x8d0469(0x1d3)](LTM_DP_STATUS,{'val':_0x8d0469(0x212),'ack':!![]});const _0x196631=_0x8d0469(0x197)+_0x18f539[_0x8d0469(0x193)]+_0x8d0469(0x1c1)+_0x18f539[_0x8d0469(0x1b0)];setup[_0x8d0469(0x19e)](_0x13c9c6,_0x196631,![],![]);if(_0x13c9c6[_0x8d0469(0x1da)]&&_0x3a337e)_0x3a337e[_0x8d0469(0x1f3)](_0x13c9c6,'ANALYZE_HEALTH',{'digest':_0xd95c0b});}catch(_0x1e69b9){_0x13c9c6['log'][_0x8d0469(0x1b8)](_0x1e69b9[_0x8d0469(0x216)]);}}async function runBaselineDriftAnalysis(_0x4688fa){const _0x33e514=a0_0xc17c16;if(!_0x4688fa['isProVersion']||!_0x4688fa[_0x33e514(0x198)])return;if(!canCallApi())return;const _0x428b3b=_0x4688fa[_0x33e514(0x1f6)][_0x33e514(0x18c)]||0xe;if(_0x4688fa[_0x33e514(0x188)]['length']<_0x428b3b+0x7){await _0x4688fa[_0x33e514(0x1d3)](_0x33e514(0x1cf),{'val':_0x33e514(0x189),'ack':!![]});return;}const _0x5f0023=_0x4688fa[_0x33e514(0x188)][_0x33e514(0x200)](-_0x428b3b),_0xb35a6a=_0x4688fa['dailyDigests'][_0x33e514(0x200)](0x0,_0x4688fa[_0x33e514(0x188)][_0x33e514(0x213)]-_0x428b3b),_0xa9fc55='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x33e514(0x1f7)](_0xb35a6a)+'\x0aSTB:\x20'+JSON[_0x33e514(0x1f7)](_0x5f0023);try{updateApiTimestamp();const _0xb7400=await _0x4688fa[_0x33e514(0x198)][_0x33e514(0x1f1)](_0xa9fc55),_0x2feda8=JSON[_0x33e514(0x1bd)](_0xb7400[_0x33e514(0x1c4)][_0x33e514(0x1ec)]()[_0x33e514(0x1ed)](/```json|```/g,'')['trim']());_0x2feda8['baselineDrift']&&(await _0x4688fa[_0x33e514(0x1d3)](_0x33e514(0x1cf),{'val':_0x2feda8[_0x33e514(0x1ea)],'ack':!![]}),await _0x4688fa[_0x33e514(0x1d3)](_0x33e514(0x1af),{'val':_0x2feda8[_0x33e514(0x1e5)],'ack':!![]}),await _0x4688fa[_0x33e514(0x1d3)](_0x33e514(0x205),{'val':Date[_0x33e514(0x1ef)](),'ack':!![]}));}catch(_0x515f7b){}}async function executeAutomationAction(_0x4a0699){const _0x196216=a0_0xc17c16;try{const _0x49fa46=await _0x4a0699[_0x196216(0x1a0)](_0x196216(0x1b3)),_0x5c7ef3=await _0x4a0699[_0x196216(0x1a0)](_0x196216(0x1f4));if(_0x49fa46&&_0x49fa46[_0x196216(0x219)]&&_0x5c7ef3){const _0x58d281=_0x49fa46[_0x196216(0x219)];let _0x1503cd=_0x5c7ef3[_0x196216(0x219)];try{_0x1503cd=JSON['parse'](_0x1503cd);}catch(_0x2dcd0a){}_0x4a0699['log'][_0x196216(0x1f2)](_0x196216(0x1ba)+_0x58d281+_0x196216(0x1ae)+_0x1503cd),await _0x4a0699['setForeignStateAsync'](_0x58d281,_0x1503cd);}else _0x4a0699[_0x196216(0x20e)]['warn'](_0x196216(0x1c0));}catch(_0x5e82dd){_0x4a0699['log'][_0x196216(0x1b8)]('BUTLER\x20Execution\x20Error:\x20'+_0x5e82dd['message']);}}async function sendMorningBriefing(_0x28133d){const _0x5c351e=a0_0xc17c16;if(!_0x28133d[_0x5c351e(0x198)]){_0x28133d['log']['warn'](_0x5c351e(0x1ab));return;}_0x28133d[_0x5c351e(0x20e)][_0x5c351e(0x1f2)](_0x5c351e(0x18a));try{updateApiTimestamp();const _0xe5e89f=_0x5c351e(0x207),_0x102efb=await _0x28133d[_0x5c351e(0x198)][_0x5c351e(0x1f1)](_0xe5e89f),_0x430db7=_0x102efb['response'][_0x5c351e(0x1ec)]();_0x28133d['log'][_0x5c351e(0x1f2)](_0x5c351e(0x1e6)+_0x430db7[_0x5c351e(0x213)]+_0x5c351e(0x1a4)),setup['sendNotification'](_0x28133d,_0x5c351e(0x1d0)+_0x430db7);}catch(_0x54504a){_0x28133d[_0x5c351e(0x20e)][_0x5c351e(0x1b8)](_0x5c351e(0x1bc)+_0x54504a[_0x5c351e(0x216)]);}}async function generateHealthReport(_0x1857a9,_0x1f8c99){const _0x21a0de=a0_0xc17c16;if(!_0x1857a9['geminiModel'])return;const _0x488bd1=Date[_0x21a0de(0x1ef)]();_0x488bd1-lastGlobalApiCall<0xbb8&&(_0x1857a9[_0x21a0de(0x20e)]['debug'](_0x21a0de(0x1e0)),await new Promise(_0x52d30f=>setTimeout(_0x52d30f,0x7d0)));const _0x36beb6=new Date();let _0x305e43=0x0,_0x30aadc=_0x36beb6['getTime'](),_0x5b2fea='';if(_0x1f8c99===_0x21a0de(0x1e3)){const _0x53469d=new Date(_0x36beb6);_0x53469d['setDate'](_0x53469d[_0x21a0de(0x1c9)]()-0x1),_0x53469d[_0x21a0de(0x18d)](0x16,0x0,0x0,0x0),_0x305e43=_0x53469d[_0x21a0de(0x21f)]();const _0xf71b32=new Date(_0x36beb6);_0xf71b32[_0x21a0de(0x18d)](0x8,0x0,0x0,0x0),_0x30aadc=_0xf71b32[_0x21a0de(0x21f)](),_0x5b2fea=_0x21a0de(0x1a8);}else{const _0x72fa36=new Date(_0x36beb6);_0x72fa36[_0x21a0de(0x18d)](0x8,0x0,0x0,0x0),_0x305e43=_0x72fa36[_0x21a0de(0x21f)](),_0x5b2fea=_0x21a0de(0x1ce);}const _0x265e7d=_0x1857a9['eventHistory'][_0x21a0de(0x192)](_0x21446e=>_0x21446e[_0x21a0de(0x1e8)]>=_0x305e43&&_0x21446e[_0x21a0de(0x1e8)]<=_0x30aadc);if(_0x265e7d[_0x21a0de(0x213)]===0x0){const _0x237f04=_0x1f8c99===_0x21a0de(0x1e3)?_0x21a0de(0x191):_0x21a0de(0x1a1),_0x434ca3=_0x1f8c99===_0x21a0de(0x1e3)?_0x21a0de(0x1d5):_0x21a0de(0x20f);await _0x1857a9[_0x21a0de(0x1d3)](_0x434ca3,{'val':_0x237f04,'ack':!![]});return;}const _0xd66e6e=_0x265e7d[_0x21a0de(0x1b9)](_0xa448de=>new Date(_0xa448de[_0x21a0de(0x1e8)])['toLocaleTimeString']([],{'hour':'2-digit','minute':_0x21a0de(0x21a)})+'\x20'+_0xa448de['name']+'\x20('+_0xa448de['value']+')')['join']('\x0a'),_0x36940a=_0x21a0de(0x215)+_0x5b2fea+_0x21a0de(0x19a)+_0xd66e6e+_0x21a0de(0x1ad);try{updateApiTimestamp();const _0x28a6ad=await _0x1857a9[_0x21a0de(0x198)][_0x21a0de(0x1f1)](_0x36940a),_0x13937a=_0x28a6ad['response'][_0x21a0de(0x1ec)](),_0x23a5fb=_0x1f8c99===_0x21a0de(0x1e3)?_0x21a0de(0x1d5):_0x21a0de(0x20f);await _0x1857a9[_0x21a0de(0x1d3)](_0x23a5fb,{'val':_0x13937a,'ack':!![]}),_0x1857a9[_0x21a0de(0x20e)]['info'](_0x21a0de(0x1e1)+_0x1f8c99+')\x20generated.');}catch(_0x5eda4b){_0x1857a9[_0x21a0de(0x20e)][_0x21a0de(0x1b8)]('Health\x20Report\x20Error:\x20'+_0x5eda4b[_0x21a0de(0x216)]);}}function a0_0x281d(){const _0x438525=['N/A\x20(Learning)','ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','ltmStbWindowDays','setHours','814872qXHhBA','toString','13UGWZZf','Keine\x20Daten\x20fÃ¼r\x20die\x20Nacht\x20aufgezeichnet\x20(Sensoren\x20ruhig).','filter','summary','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','pop','targetId','ðŸ“…\x20Daily\x20Digest:\x0a','geminiModel','isAlert','\x0a\x20\x20\x20\x20EVENTS:\x0a','âš ï¸\x20ALARM:\x20','Unbekannt','aiPersona','sendNotification','.\x20EVENTS:\x20','getStateAsync','Bisher\x20keine\x20AktivitÃ¤t\x20seit\x2008:00\x20Uhr\x20verzeichnet.','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','lastAlertState',').\x20Sending\x20notification...','push','.\x20EMERGENCY:\x20','1431222vwekhp','Analysiere\x20diese\x20Events\x20der\x20NACHT\x20(22:00-08:00).\x20War\x20der\x20Schlaf\x20ruhig?\x20Gab\x20es\x20BadgÃ¤nge?\x20Antwort\x20kurz\x20fÃ¼r\x20den\x20besorgten\x20Sohn\x20(max\x202\x20SÃ¤tze).','Digest','Gemini\x20Error:\x20','ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','ltmLtbWindowDays','\x0a\x20\x20\x20\x20ANTWORT-STIL:\x20Sachlich,\x20beruhigend,\x20prÃ¤zise.\x20Keine\x20Floskeln.\x0a\x20\x20\x20\x20','\x20=\x20','LTM.driftAnalysis.driftDetails','activityLevel','eventHistory','rawEventLog','analysis.automation.targetId','constructor','decision','warn','analysis.alertReason','error','map','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','Keine\x20Details.','Briefing\x20Error:\x20','parse','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','.\x20KONTEXT:\x20','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','\x0aAktivitÃ¤t:\x20','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','54qWPrIV','response','analysis.lastResult','detected','apply','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','getDate','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','296240RrTZid','debug','Skipped\x20(Traffic)','Analysiere\x20diese\x20Events\x20des\x20TAGES\x20(08:00-Jetzt).\x20AktivitÃ¤t?\x20Mahlzeiten?\x20HaustÃ¼r?\x20Antwort\x20kurz\x20fÃ¼r\x20den\x20besorgten\x20Sohn\x20(max\x202\x20SÃ¤tze).','LTM.driftAnalysis.baselineDrift','ðŸŒ…\x20Morning\x20Briefing:\x0a','automationProposal','Tag','setStateAsync','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','analysis.health.geminiNight','Wetterdaten\x20nicht\x20abrufbar','.Current.Temperature','(((.+)+)+)+$','analysis.automation.patternDetected','isProVersion','normal','Skipped\x20(No\x20AI\x20or\x20Data)','approved','search','analysis.isAlert','ðŸ¤–\x20API\x20Cooldown.\x20Waiting\x202s...','ðŸ¤–\x20Health\x20Report\x20(','useWeather','NIGHT','reason','driftDetails','ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','timestamp','Â°C,\x20','baselineDrift','7iYtkaE','text','replace','.forecast.current.temperature','now','%)\x20nach\x20\x22','generateContent','info','send','analysis.automation.targetValue','exports','config','stringify','217473gOeQWO','getForeignStateAsync','analysis.automation.description','trim','.Current.IsNight','\x20Ã¼bersprungen\x20(Auto-Approved).','targetValue','currentSystemMode','slice','toISOString','unshift',',\x20Wetter:\x20','2306195YxMOTd','LTM.driftAnalysis.lastCheck','4wjoxpE','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','LTM.dailyDigests','analysis.activitySummary','5439709WuCVyT','analysisHistory','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','analysis.automation.autoApply','log','analysis.health.geminiDay','10VBDWEZ','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','Success','length','392892DmPEGZ','\x0a\x20\x20\x20\x20ROLLE:\x20Medizinischer\x20Assistent\x20fÃ¼r\x20AAL\x20(Ambient\x20Assisted\x20Living).\x0a\x20\x20\x20\x20AUFGABE:\x20','message',',\x20LichtverhÃ¤ltnisse:\x20','generic','val','2-digit','alertReason','KI-Fehler\x20(Fallback)','Unbekannt\x20(Kein\x20Sensor)','models/gemini-flash-latest','getTime','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','analysis.analysisHistory','8fKSihu','weatherInstance','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','dailyDigests'];a0_0x281d=function(){return _0x438525;};return a0_0x281d();}module[a0_0xc17c16(0x1f5)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler,'generateHealthReport':generateHealthReport};