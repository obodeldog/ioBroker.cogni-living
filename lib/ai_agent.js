const a0_0x19f572=a0_0x37c0;(function(_0x56faca,_0x23c516){const _0x48097f=a0_0x37c0,_0x5daa7b=_0x56faca();while(!![]){try{const _0x447188=-parseInt(_0x48097f(0x22d))/0x1*(parseInt(_0x48097f(0x1d3))/0x2)+-parseInt(_0x48097f(0x1ce))/0x3+-parseInt(_0x48097f(0x23b))/0x4+-parseInt(_0x48097f(0x21e))/0x5+-parseInt(_0x48097f(0x249))/0x6+-parseInt(_0x48097f(0x243))/0x7+-parseInt(_0x48097f(0x23f))/0x8*(-parseInt(_0x48097f(0x212))/0x9);if(_0x447188===_0x23c516)break;else _0x5daa7b['push'](_0x5daa7b['shift']());}catch(_0x3bf12a){_0x5daa7b['push'](_0x5daa7b['shift']());}}}(a0_0xcd63,0xa9c70));const a0_0x58de42=(function(){let _0x220fa2=!![];return function(_0x33db42,_0x29274a){const _0x10ffc6=_0x220fa2?function(){const _0x55bb93=a0_0x37c0;if(_0x29274a){const _0x473463=_0x29274a[_0x55bb93(0x1e0)](_0x33db42,arguments);return _0x29274a=null,_0x473463;}}:function(){};return _0x220fa2=![],_0x10ffc6;};}()),a0_0x3571eb=a0_0x58de42(this,function(){const _0x2640cc=a0_0x37c0;return a0_0x3571eb[_0x2640cc(0x245)]()[_0x2640cc(0x247)](_0x2640cc(0x1ca))[_0x2640cc(0x245)]()['constructor'](a0_0x3571eb)['search']('(((.+)+)+)+$');});a0_0x3571eb();'use strict';const {GoogleGenerativeAI}=require(a0_0x19f572(0x204)),setup=require(a0_0x19f572(0x1ec)),GEMINI_MODEL=a0_0x19f572(0x1e4),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x19f572(0x219),LTM_DP_RAW_LOG=a0_0x19f572(0x20f),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x19f572(0x238),'senior_aal':a0_0x19f572(0x1cd),'family':a0_0x19f572(0x1ff),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x19f572(0x1f3)};function canCallApi(){const _0x465b19=a0_0x19f572,_0xf300af=Date[_0x465b19(0x22e)]();return _0xf300af-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x4467cf=a0_0x19f572;lastGlobalApiCall=Date[_0x4467cf(0x22e)]();}function a0_0x37c0(_0x4e0a3b,_0x211b50){const _0x2504df=a0_0xcd63();return a0_0x37c0=function(_0x3571eb,_0x58de42){_0x3571eb=_0x3571eb-0x1c7;let _0xcd639c=_0x2504df[_0x3571eb];return _0xcd639c;},a0_0x37c0(_0x4e0a3b,_0x211b50);}async function getWeatherContext(_0x33fefa){const _0x36f597=a0_0x19f572;if(!_0x33fefa[_0x36f597(0x1c9)]['useWeather']||!_0x33fefa['config'][_0x36f597(0x1f9)])return _0x36f597(0x213);try{const _0x4d8b9b=_0x33fefa[_0x36f597(0x1c9)]['weatherInstance'];let _0x3fb5b9=await _0x33fefa[_0x36f597(0x20d)](_0x4d8b9b+_0x36f597(0x1fa));if(!_0x3fb5b9)_0x3fb5b9=await _0x33fefa[_0x36f597(0x20d)](_0x4d8b9b+_0x36f597(0x217));let _0x3c3123=await _0x33fefa[_0x36f597(0x20d)](_0x4d8b9b+_0x36f597(0x244));if(!_0x3c3123)_0x3c3123=await _0x33fefa[_0x36f597(0x20d)](_0x4d8b9b+_0x36f597(0x206));let _0x565ff5=_0x36f597(0x21c);const _0x1f1962=await _0x33fefa[_0x36f597(0x20d)](_0x4d8b9b+'.Current.IsNight');if(_0x1f1962)_0x565ff5=_0x1f1962[_0x36f597(0x1f8)]?_0x36f597(0x1dd):_0x36f597(0x24c);if(_0x3fb5b9&&_0x3c3123)return _0x3fb5b9[_0x36f597(0x1f8)]+_0x36f597(0x21f)+_0x3c3123['val']+_0x36f597(0x200)+_0x565ff5;}catch(_0x40c592){}return _0x36f597(0x201);}async function consultButler(_0xe68257,_0x2d04f1,_0x9aa595,_0x3cdeea){const _0x5952a1=a0_0x19f572;if(!_0xe68257[_0x5952a1(0x1f5)])return{'approved':!![],'reason':_0x5952a1(0x1f0)};const _0x5bb7fe=Date['now']();if(decisionCache[_0x2d04f1]&&_0x5bb7fe-decisionCache[_0x2d04f1][_0x5952a1(0x20e)]<CACHE_TTL_MS){const _0x32125c=decisionCache[_0x2d04f1]['decision'];return _0xe68257['log']['debug']('ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20'+_0x2d04f1+_0x5952a1(0x1e3)+(_0x32125c[_0x5952a1(0x1c8)]?'OK':'NO')+'\x20('+_0x32125c[_0x5952a1(0x1d8)]+')'),_0x32125c;}if(!canCallApi())return _0xe68257[_0x5952a1(0x234)][_0x5952a1(0x21a)](_0x5952a1(0x236)+_0x2d04f1+_0x5952a1(0x1d1)),{'approved':!![],'reason':_0x5952a1(0x1fc)};const _0x4fa2a5=new Date()[_0x5952a1(0x1f2)](),_0x21d52b=await getWeatherContext(_0xe68257),_0x41548d=PERSONA_MAPPING[_0xe68257[_0x5952a1(0x1c9)][_0x5952a1(0x230)]||_0x5952a1(0x21b)],_0x575913=_0x5952a1(0x232)+_0x4fa2a5+_0x5952a1(0x211)+_0x21d52b+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x3cdeea*0x64)['toFixed'](0x0)+'%)\x20nach\x20\x22'+_0x2d04f1+_0x5952a1(0x226)+_0x9aa595+_0x5952a1(0x239)+_0x41548d+_0x5952a1(0x1fe);try{updateApiTimestamp();const _0x136d8a=await _0xe68257[_0x5952a1(0x1f5)]['generateContent'](_0x575913),_0x40a042=_0x136d8a['response'][_0x5952a1(0x24d)]()[_0x5952a1(0x228)](/```json|```/g,'')[_0x5952a1(0x1fb)](),_0x352bd9=JSON[_0x5952a1(0x1d7)](_0x40a042);return decisionCache[_0x2d04f1]={'decision':_0x352bd9,'timestamp':_0x5bb7fe},_0x352bd9;}catch(_0x481883){return _0xe68257[_0x5952a1(0x234)][_0x5952a1(0x20c)](_0x5952a1(0x1d5)+_0x481883[_0x5952a1(0x1cb)]),decisionCache[_0x2d04f1]={'decision':{'approved':!![],'reason':_0x5952a1(0x231)},'timestamp':_0x5bb7fe-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x5952a1(0x231)};}}async function runGeminiAnalysis(_0xca685b,_0x4cc8fb=''){const _0x5a99e4=a0_0x19f572;if(!_0xca685b[_0x5a99e4(0x1f5)])return;if(!canCallApi()){_0xca685b['log'][_0x5a99e4(0x21a)](_0x5a99e4(0x1df));return;}if(_0xca685b[_0x5a99e4(0x227)][_0x5a99e4(0x21d)]===0x0)return;const _0x2988aa=_0xca685b[_0x5a99e4(0x227)][_0x5a99e4(0x1dc)](0x0,0xf),_0x5ee51c=_0xca685b[_0x5a99e4(0x1ee)],_0x452e0f=PERSONA_MAPPING[_0xca685b['config'][_0x5a99e4(0x230)]||_0x5a99e4(0x21b)],_0x2b78cc=_0xca685b['config']['livingContext']||'Keine\x20Details.';let _0x540743='Unbekannt';try{const _0x33bac9=await _0xca685b[_0x5a99e4(0x229)]('system.presenceWho');if(_0x33bac9&&_0x33bac9[_0x5a99e4(0x1f8)])_0x540743=_0x33bac9[_0x5a99e4(0x1f8)];}catch(_0x276ae3){}let _0x299f12=![];try{const _0xcdafa6=await _0xca685b[_0x5a99e4(0x229)](_0x5a99e4(0x1d9));if(_0xcdafa6&&_0xcdafa6[_0x5a99e4(0x1f8)])_0x299f12=!![];}catch(_0x3f1854){}const _0x334140=_0x5a99e4(0x23e)+_0x452e0f+'.\x20KONTEXT:\x20'+_0x2b78cc+_0x5a99e4(0x210)+_0x5ee51c+_0x5a99e4(0x1da)+_0x540743+'.\x20EVENTS:\x20'+JSON[_0x5a99e4(0x1fd)](_0x2988aa)+_0x5a99e4(0x23d)+_0x4cc8fb+_0x5a99e4(0x22f);try{updateApiTimestamp();const _0x2e0310=await _0xca685b[_0x5a99e4(0x1f5)][_0x5a99e4(0x221)](_0x334140),_0x42e1f8=JSON[_0x5a99e4(0x1d7)](_0x2e0310[_0x5a99e4(0x242)][_0x5a99e4(0x24d)]()[_0x5a99e4(0x228)](/```json|```/g,'')[_0x5a99e4(0x1fb)]());await _0xca685b[_0x5a99e4(0x1d4)](_0x5a99e4(0x1e1),{'val':JSON['stringify'](_0x42e1f8),'ack':!![]});if(_0x42e1f8['summary'])await _0xca685b[_0x5a99e4(0x1d4)](_0x5a99e4(0x220),{'val':_0x42e1f8[_0x5a99e4(0x1d2)],'ack':!![]});const _0x337d4d={'timestamp':Date[_0x5a99e4(0x22e)](),'id':Date[_0x5a99e4(0x22e)]()['toString'](),'analysis':{'activity':{'summary':_0x42e1f8[_0x5a99e4(0x1d2)],'isAlert':_0x42e1f8[_0x5a99e4(0x224)],'alertReason':_0x42e1f8[_0x5a99e4(0x225)]},'comfort':{'automationProposal':_0x42e1f8[_0x5a99e4(0x23c)]}}};_0xca685b[_0x5a99e4(0x1de)][_0x5a99e4(0x1cf)](_0x337d4d);if(_0xca685b[_0x5a99e4(0x1de)][_0x5a99e4(0x21d)]>0x32)_0xca685b[_0x5a99e4(0x1de)]['pop']();await _0xca685b[_0x5a99e4(0x1d4)](_0x5a99e4(0x205),{'val':JSON['stringify'](_0xca685b[_0x5a99e4(0x1de)]),'ack':!![]});const _0x15c54c=_0x42e1f8[_0x5a99e4(0x224)]||![];_0x15c54c!==_0xca685b[_0x5a99e4(0x235)]&&(await _0xca685b[_0x5a99e4(0x1d4)](_0x5a99e4(0x215),{'val':_0x15c54c,'ack':!![]}),_0xca685b[_0x5a99e4(0x235)]=_0x15c54c,_0x15c54c&&(await _0xca685b[_0x5a99e4(0x1d4)](_0x5a99e4(0x22b),{'val':_0x42e1f8[_0x5a99e4(0x225)],'ack':!![]}),setup[_0x5a99e4(0x223)](_0xca685b,_0x5a99e4(0x1f1)+_0x42e1f8[_0x5a99e4(0x225)],![],_0x42e1f8[_0x5a99e4(0x209)])));if(_0x42e1f8[_0x5a99e4(0x23c)]&&_0x42e1f8[_0x5a99e4(0x23c)][_0x5a99e4(0x214)]){await _0xca685b['setStateAsync'](_0x5a99e4(0x202),{'val':!![],'ack':!![]}),await _0xca685b[_0x5a99e4(0x1d4)](_0x5a99e4(0x1e8),{'val':_0x42e1f8[_0x5a99e4(0x23c)]['description'],'ack':!![]}),await _0xca685b[_0x5a99e4(0x1d4)](_0x5a99e4(0x216),{'val':_0x42e1f8[_0x5a99e4(0x23c)][_0x5a99e4(0x1d6)],'ack':!![]}),await _0xca685b[_0x5a99e4(0x1d4)](_0x5a99e4(0x24e),{'val':JSON[_0x5a99e4(0x1fd)](_0x42e1f8['automationProposal']['targetValue']),'ack':!![]});if(_0x299f12)executeAutomationAction(_0xca685b);}}catch(_0x12ded7){_0xca685b['log']['error'](_0x5a99e4(0x240)+_0x12ded7[_0x5a99e4(0x1cb)]);}}async function createDailyDigest(_0x2d852e,_0x43aed8){const _0xabcb64=a0_0x19f572;if(!_0x2d852e[_0xabcb64(0x248)])return;if(!canCallApi()){await _0x2d852e[_0xabcb64(0x1d4)](LTM_DP_STATUS,{'val':_0xabcb64(0x1ea),'ack':!![]});return;}await _0x2d852e[_0xabcb64(0x1d4)](LTM_DP_STATUS,{'val':_0xabcb64(0x1e7),'ack':!![]});if(!_0x2d852e[_0xabcb64(0x1f5)]||_0x2d852e[_0xabcb64(0x1eb)][_0xabcb64(0x21d)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x2d852e[_0xabcb64(0x1d4)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x178d5d=JSON[_0xabcb64(0x1d7)](JSON[_0xabcb64(0x1fd)](_0x2d852e[_0xabcb64(0x1eb)])),_0x2a601b=_0x178d5d[_0xabcb64(0x21d)],_0x47b1f6=_0xabcb64(0x1e5)+JSON[_0xabcb64(0x1fd)](_0x178d5d);try{updateApiTimestamp();const _0x1c9801=await _0x2d852e[_0xabcb64(0x1f5)][_0xabcb64(0x221)](_0x47b1f6),_0x4f2e93=JSON['parse'](_0x1c9801[_0xabcb64(0x242)]['text']()[_0xabcb64(0x228)](/```json|```/g,'')[_0xabcb64(0x1fb)]()),_0x138f3a={'timestamp':new Date()[_0xabcb64(0x23a)](),'eventCount':_0x2a601b,'summary':_0x4f2e93['summary']||_0xabcb64(0x1cc),'activityLevel':_0x4f2e93[_0xabcb64(0x22a)]||_0xabcb64(0x1e9),'systemMode':_0x2d852e[_0xabcb64(0x1ee)]};_0x2d852e[_0xabcb64(0x1ef)][_0xabcb64(0x208)](_0x138f3a);const _0x58016b=_0x2d852e[_0xabcb64(0x1c9)][_0xabcb64(0x233)]||0x3c;_0x2d852e[_0xabcb64(0x1ef)][_0xabcb64(0x21d)]>_0x58016b&&_0x2d852e[_0xabcb64(0x1ef)][_0xabcb64(0x1ed)](0x0,_0x2d852e['dailyDigests'][_0xabcb64(0x21d)]-_0x58016b);await _0x2d852e['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x2d852e['dailyDigests']),'ack':!![]}),_0x2d852e[_0xabcb64(0x1eb)]=[],await _0x2d852e[_0xabcb64(0x1d4)](LTM_DP_RAW_LOG,{'val':JSON[_0xabcb64(0x1fd)](_0x2d852e[_0xabcb64(0x1eb)]),'ack':!![]}),await _0x2d852e[_0xabcb64(0x1d4)](LTM_DP_STATUS,{'val':_0xabcb64(0x203),'ack':!![]});if(_0x2d852e[_0xabcb64(0x248)]&&_0x43aed8)_0x43aed8[_0xabcb64(0x1c7)](_0x2d852e,_0xabcb64(0x207),{'digest':_0x138f3a});}catch(_0x159102){_0x2d852e[_0xabcb64(0x234)][_0xabcb64(0x237)](_0x159102[_0xabcb64(0x1cb)]);}}async function runBaselineDriftAnalysis(_0x2bf591){const _0x4bf052=a0_0x19f572;if(!_0x2bf591[_0x4bf052(0x248)]||!_0x2bf591[_0x4bf052(0x1f5)])return;if(!canCallApi())return;const _0x4eaa52=_0x2bf591[_0x4bf052(0x1c9)][_0x4bf052(0x222)]||0xe;if(_0x2bf591['dailyDigests'][_0x4bf052(0x21d)]<_0x4eaa52+0x7){await _0x2bf591[_0x4bf052(0x1d4)](_0x4bf052(0x22c),{'val':_0x4bf052(0x1f4),'ack':!![]});return;}const _0x590a70=_0x2bf591['dailyDigests'][_0x4bf052(0x1dc)](-_0x4eaa52),_0x4fe1ba=_0x2bf591['dailyDigests'][_0x4bf052(0x1dc)](0x0,_0x2bf591['dailyDigests']['length']-_0x4eaa52),_0x5507ed='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x4bf052(0x1fd)](_0x4fe1ba)+_0x4bf052(0x1e6)+JSON[_0x4bf052(0x1fd)](_0x590a70);try{updateApiTimestamp();const _0x5b109d=await _0x2bf591[_0x4bf052(0x1f5)][_0x4bf052(0x221)](_0x5507ed),_0x2e15a0=JSON[_0x4bf052(0x1d7)](_0x5b109d[_0x4bf052(0x242)]['text']()[_0x4bf052(0x228)](/```json|```/g,'')[_0x4bf052(0x1fb)]());_0x2e15a0['baselineDrift']&&(await _0x2bf591['setStateAsync'](_0x4bf052(0x22c),{'val':_0x2e15a0['baselineDrift'],'ack':!![]}),await _0x2bf591[_0x4bf052(0x1d4)](_0x4bf052(0x20b),{'val':_0x2e15a0[_0x4bf052(0x1f7)],'ack':!![]}),await _0x2bf591[_0x4bf052(0x1d4)](_0x4bf052(0x1e2),{'val':Date[_0x4bf052(0x22e)](),'ack':!![]}));}catch(_0x4085af){}}async function executeAutomationAction(_0xff9a8e){const _0x28332e=a0_0x19f572;try{const _0x2a9ddd=await _0xff9a8e[_0x28332e(0x229)](_0x28332e(0x216)),_0x4f637b=await _0xff9a8e[_0x28332e(0x229)]('analysis.automation.targetValue');if(_0x2a9ddd&&_0x2a9ddd[_0x28332e(0x1f8)]&&_0x4f637b){const _0xa0164d=_0x2a9ddd['val'];let _0x42b884=_0x4f637b['val'];try{_0x42b884=JSON['parse'](_0x42b884);}catch(_0x281642){}_0xff9a8e[_0x28332e(0x234)][_0x28332e(0x246)](_0x28332e(0x1f6)+_0xa0164d+_0x28332e(0x24a)+_0x42b884),await _0xff9a8e['setForeignStateAsync'](_0xa0164d,_0x42b884);}else _0xff9a8e[_0x28332e(0x234)][_0x28332e(0x20c)](_0x28332e(0x24b));}catch(_0x5130ba){_0xff9a8e[_0x28332e(0x234)]['error'](_0x28332e(0x20a)+_0x5130ba['message']);}}function a0_0xcd63(){const _0xcbdb0f=['\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','eventHistory','replace','getStateAsync','activityLevel','analysis.alertReason','LTM.driftAnalysis.baselineDrift','5NyAqPA','now','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','aiPersona','KI-Fehler\x20(Fallback)','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','ltmLtbWindowDays','log','lastAlertState','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','error','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','toISOString','3186312NJpHfX','automationProposal','.\x20EMERGENCY:\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','104EhBWcV','Gemini\x20Error:\x20','Briefing\x20Error:\x20','response','1668933XVkcoe','.Current.WeatherText','toString','info','search','isProVersion','2298390MVXCNm','\x20=\x20','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','Tag','text','analysis.automation.targetValue','send','approved','config','(((.+)+)+)+$','message','Digest','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','1196031SEIXvO','unshift','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','\x20Ã¼bersprungen\x20(Auto-Approved).','summary','21226KCJCbc','setStateAsync','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','targetId','parse','reason','analysis.automation.autoApply','.\x20ANWESEND:\x20','exports','slice','Nacht','analysisHistory','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','apply','analysis.lastResult','LTM.driftAnalysis.lastCheck','\x20->\x20','models/gemini-flash-latest','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','\x0aSTB:\x20','Started...','analysis.automation.description','normal','Skipped\x20(Traffic)','rawEventLog','./setup','splice','currentSystemMode','dailyDigests','KI\x20offline\x20(Fallback)','âš ï¸\x20ALARM:\x20','toLocaleTimeString','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','N/A\x20(Learning)','geminiModel','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','driftDetails','val','weatherInstance','.Current.Temperature','trim','Traffic-Schutz\x20(Auto-Approved)','stringify','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.',',\x20LichtverhÃ¤ltnisse:\x20','Wetterdaten\x20nicht\x20abrufbar','analysis.automation.patternDetected','Success','@google/generative-ai','analysis.analysisHistory','.forecast.current.state','ANALYZE_HEALTH','push','isEmergency','BUTLER\x20Execution\x20Error:\x20','LTM.driftAnalysis.driftDetails','warn','getForeignStateAsync','timestamp','LTM.rawEventLog','.\x20SYSTEM_MODE:\x20',',\x20Wetter:\x20','1787409cyMsFC','Unbekannt\x20(Kein\x20Sensor)','detected','analysis.isAlert','analysis.automation.targetId','.forecast.current.temperature','ðŸŒ…\x20Morning\x20Briefing:\x0a','LTM.processingStatus','debug','generic','Unbekannt','length','83005blogNy','Â°C,\x20','analysis.activitySummary','generateContent','ltmStbWindowDays','sendNotification','isAlert','alertReason'];a0_0xcd63=function(){return _0xcbdb0f;};return a0_0xcd63();}async function sendMorningBriefing(_0x424b93){const _0x282eec=a0_0x19f572;if(!_0x424b93['geminiModel'])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x32fc45=_0x282eec(0x1d0),_0x3a295e=await _0x424b93[_0x282eec(0x1f5)]['generateContent'](_0x32fc45),_0x206ed4=_0x3a295e[_0x282eec(0x242)][_0x282eec(0x24d)]();setup['sendNotification'](_0x424b93,_0x282eec(0x218)+_0x206ed4);}catch(_0xf85941){_0x424b93['log']['error'](_0x282eec(0x241)+_0xf85941['message']);}}module[a0_0x19f572(0x1db)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};