const a0_0x2fff2a=a0_0x4a3b;(function(_0x300926,_0x521dda){const _0x223df3=a0_0x4a3b,_0x285848=_0x300926();while(!![]){try{const _0x5ab38d=-parseInt(_0x223df3(0x17e))/0x1*(parseInt(_0x223df3(0x168))/0x2)+-parseInt(_0x223df3(0x14b))/0x3*(parseInt(_0x223df3(0x138))/0x4)+parseInt(_0x223df3(0x158))/0x5+parseInt(_0x223df3(0x131))/0x6+parseInt(_0x223df3(0x184))/0x7*(-parseInt(_0x223df3(0x13e))/0x8)+-parseInt(_0x223df3(0x154))/0x9*(-parseInt(_0x223df3(0x13a))/0xa)+parseInt(_0x223df3(0x197))/0xb;if(_0x5ab38d===_0x521dda)break;else _0x285848['push'](_0x285848['shift']());}catch(_0x280ec5){_0x285848['push'](_0x285848['shift']());}}}(a0_0x4d70,0x35bad));function a0_0x4a3b(_0xb2830b,_0x23e833){const _0x5da224=a0_0x4d70();return a0_0x4a3b=function(_0x7d88a3,_0x3bc659){_0x7d88a3=_0x7d88a3-0x117;let _0x4d7066=_0x5da224[_0x7d88a3];return _0x4d7066;},a0_0x4a3b(_0xb2830b,_0x23e833);}function a0_0x4d70(){const _0x4c9595=['Digest','error','getStateAsync','analysis.isAlert','1110220vRyxmI','val','48770cRNMnd','\x0aSTB:\x20','Skipped\x20(No\x20AI\x20or\x20Data)','toString','8NHnqKu','automationProposal','getForeignStateAsync','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','text','.\x20SYSTEM_MODE:\x20','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','toISOString','LTM.dailyDigests','analysis.lastResult','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','Unbekannt','trim','3VwVSSr','analysis.alertReason','models/gemini-flash-latest','summary','Tag','pop','driftDetails','livingContext','KI\x20offline\x20(Fallback)','225bUtVDK','response','@google/generative-ai','alertReason','388170VszKYU','toLocaleTimeString','slice','analysisHistory','log','ltmStbWindowDays','baselineDrift','LTM.processingStatus','ü§ñ\x20Butler\x20Brain\x20Error:\x20','generic','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','detected','splice','\x20=\x20','sendNotification','approved','10WHGfip',',\x20Wetter:\x20','analysis.automation.description','.forecast.current.temperature','.Current.Temperature','activityLevel','analysis.automation.targetValue','generateContent','ANALYZE_HEALTH','analysis.analysisHistory','analysis.activitySummary','Skipped\x20(Traffic)','KI-Fehler\x20(Fallback)','isProVersion','replace','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','rawEventLog','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','reason','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','normal','currentSystemMode','26342xQCYFG','config','LTM.driftAnalysis.driftDetails','targetId','setForeignStateAsync','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','2091460JCqaiT','info','.\x20EMERGENCY:\x20','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','BUTLER\x20Execution\x20Error:\x20','description','Gemini\x20Error:\x20','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','\x20√ºbersprungen\x20(Auto-Approved).','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','stringify','geminiModel','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','useWeather','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','Briefing\x20Error:\x20','send','lastAlertState','length','3837867pBqkwC','N/A\x20(Learning)','dailyDigests','Unbekannt\x20(Kein\x20Sensor)','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','.\x20KONTEXT:\x20','LTM.driftAnalysis.baselineDrift','Keine\x20Details.','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','decision','analysis.automation.autoApply','now','push','message','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','üåÖ\x20Morning\x20Briefing:\x0a','%)\x20nach\x20\x22','.\x20EVENTS:\x20','.Current.WeatherText','debug','warn','.Current.IsNight','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','aiPersona','weatherInstance','.forecast.current.state','parse','Sicherheit\x20geht\x20vor.','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','2277996kqctGd','search','setStateAsync'];a0_0x4d70=function(){return _0x4c9595;};return a0_0x4d70();}const a0_0x3bc659=(function(){let _0x5a4cbd=!![];return function(_0x640c47,_0x13b3a8){const _0xef4596=_0x5a4cbd?function(){if(_0x13b3a8){const _0x4c2216=_0x13b3a8['apply'](_0x640c47,arguments);return _0x13b3a8=null,_0x4c2216;}}:function(){};return _0x5a4cbd=![],_0xef4596;};}()),a0_0x7d88a3=a0_0x3bc659(this,function(){const _0x3a1d51=a0_0x4a3b;return a0_0x7d88a3['toString']()[_0x3a1d51(0x132)]('(((.+)+)+)+$')['toString']()['constructor'](a0_0x7d88a3)[_0x3a1d51(0x132)]('(((.+)+)+)+$');});a0_0x7d88a3();'use strict';const {GoogleGenerativeAI}=require(a0_0x2fff2a(0x156)),setup=require('./setup'),GEMINI_MODEL=a0_0x2fff2a(0x14d),LTM_DP_DAILY_DIGESTS=a0_0x2fff2a(0x146),LTM_DP_STATUS=a0_0x2fff2a(0x15f),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x2fff2a(0x122),'senior_aal':a0_0x2fff2a(0x177),'family':a0_0x2fff2a(0x190),'single_comfort':a0_0x2fff2a(0x18b),'security':a0_0x2fff2a(0x12f),'energy_saver':a0_0x2fff2a(0x183)};function canCallApi(){const _0x1afaf4=a0_0x2fff2a,_0x35494e=Date[_0x1afaf4(0x11f)]();return _0x35494e-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x38ab71=a0_0x2fff2a;lastGlobalApiCall=Date[_0x38ab71(0x11f)]();}async function getWeatherContext(_0x24f4b1){const _0x23bc9e=a0_0x2fff2a;if(!_0x24f4b1[_0x23bc9e(0x17f)][_0x23bc9e(0x191)]||!_0x24f4b1['config'][_0x23bc9e(0x12c)])return _0x23bc9e(0x117);try{const _0x216d47=_0x24f4b1['config'][_0x23bc9e(0x12c)];let _0x1c124a=await _0x24f4b1[_0x23bc9e(0x140)](_0x216d47+_0x23bc9e(0x16c));if(!_0x1c124a)_0x1c124a=await _0x24f4b1[_0x23bc9e(0x140)](_0x216d47+_0x23bc9e(0x16b));let _0x161f91=await _0x24f4b1['getForeignStateAsync'](_0x216d47+_0x23bc9e(0x126));if(!_0x161f91)_0x161f91=await _0x24f4b1[_0x23bc9e(0x140)](_0x216d47+_0x23bc9e(0x12d));let _0x45c201=_0x23bc9e(0x149);const _0x265227=await _0x24f4b1[_0x23bc9e(0x140)](_0x216d47+_0x23bc9e(0x129));if(_0x265227)_0x45c201=_0x265227['val']?'Nacht':_0x23bc9e(0x14f);if(_0x1c124a&&_0x161f91)return _0x1c124a[_0x23bc9e(0x139)]+'¬∞C,\x20'+_0x161f91['val']+',\x20Lichtverh√§ltnisse:\x20'+_0x45c201;}catch(_0x2cfe19){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x440629,_0xbd9aea,_0x14279d,_0x16b8b7){const _0x1df9b9=a0_0x2fff2a;if(!_0x440629[_0x1df9b9(0x18f)])return{'approved':!![],'reason':_0x1df9b9(0x153)};const _0x3f7ec2=Date[_0x1df9b9(0x11f)]();if(decisionCache[_0xbd9aea]&&_0x3f7ec2-decisionCache[_0xbd9aea]['timestamp']<CACHE_TTL_MS){const _0x324db4=decisionCache[_0xbd9aea][_0x1df9b9(0x11d)];return _0x440629['log'][_0x1df9b9(0x127)](_0x1df9b9(0x187)+_0xbd9aea+'\x20->\x20'+(_0x324db4[_0x1df9b9(0x167)]?'OK':'NO')+'\x20('+_0x324db4[_0x1df9b9(0x17a)]+')'),_0x324db4;}if(!canCallApi())return _0x440629[_0x1df9b9(0x15c)]['debug'](_0x1df9b9(0x148)+_0xbd9aea+_0x1df9b9(0x18c)),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x1b556f=new Date()[_0x1df9b9(0x159)](),_0x3fb049=await getWeatherContext(_0x440629),_0x583111=PERSONA_MAPPING[_0x440629[_0x1df9b9(0x17f)]['aiPersona']||_0x1df9b9(0x161)],_0x40b95a=_0x1df9b9(0x130)+_0x1b556f+_0x1df9b9(0x169)+_0x3fb049+_0x1df9b9(0x17b)+(_0x16b8b7*0x64)['toFixed'](0x0)+_0x1df9b9(0x124)+_0xbd9aea+_0x1df9b9(0x141)+_0x14279d+_0x1df9b9(0x12a)+_0x583111+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x39ac68=await _0x440629[_0x1df9b9(0x18f)][_0x1df9b9(0x16f)](_0x40b95a),_0x25b3ab=_0x39ac68[_0x1df9b9(0x155)]['text']()['replace'](/```json|```/g,'')[_0x1df9b9(0x14a)](),_0x14f1d4=JSON[_0x1df9b9(0x12e)](_0x25b3ab);return decisionCache[_0xbd9aea]={'decision':_0x14f1d4,'timestamp':_0x3f7ec2},_0x14f1d4;}catch(_0xea1217){return _0x440629[_0x1df9b9(0x15c)][_0x1df9b9(0x128)](_0x1df9b9(0x160)+_0xea1217[_0x1df9b9(0x121)]),decisionCache[_0xbd9aea]={'decision':{'approved':!![],'reason':_0x1df9b9(0x174)},'timestamp':_0x3f7ec2-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x1df9b9(0x174)};}}async function runGeminiAnalysis(_0x4298d9,_0x25bbf2=''){const _0x3c2cb6=a0_0x2fff2a;if(!_0x4298d9[_0x3c2cb6(0x18f)])return;if(!canCallApi()){_0x4298d9[_0x3c2cb6(0x15c)][_0x3c2cb6(0x127)](_0x3c2cb6(0x144));return;}if(_0x4298d9['eventHistory'][_0x3c2cb6(0x196)]===0x0)return;const _0x3575a7=_0x4298d9['eventHistory'][_0x3c2cb6(0x15a)](0x0,0xf),_0x1bb54a=_0x4298d9['currentSystemMode'],_0x4cf171=PERSONA_MAPPING[_0x4298d9['config'][_0x3c2cb6(0x12b)]||'generic'],_0x514ae8=_0x4298d9['config'][_0x3c2cb6(0x152)]||_0x3c2cb6(0x11b);let _0x5c55c2='Unbekannt';try{const _0x3aa596=await _0x4298d9[_0x3c2cb6(0x136)]('system.presenceWho');if(_0x3aa596&&_0x3aa596['val'])_0x5c55c2=_0x3aa596[_0x3c2cb6(0x139)];}catch(_0x461aa5){}let _0x503e63=![];try{const _0x269291=await _0x4298d9[_0x3c2cb6(0x136)](_0x3c2cb6(0x11e));if(_0x269291&&_0x269291[_0x3c2cb6(0x139)])_0x503e63=!![];}catch(_0x4d7485){}const _0x37911f='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x4cf171+_0x3c2cb6(0x119)+_0x514ae8+_0x3c2cb6(0x143)+_0x1bb54a+'.\x20ANWESEND:\x20'+_0x5c55c2+_0x3c2cb6(0x125)+JSON[_0x3c2cb6(0x18e)](_0x3575a7)+_0x3c2cb6(0x186)+_0x25bbf2+_0x3c2cb6(0x192);try{updateApiTimestamp();const _0x513056=await _0x4298d9[_0x3c2cb6(0x18f)][_0x3c2cb6(0x16f)](_0x37911f),_0x222a2f=JSON[_0x3c2cb6(0x12e)](_0x513056[_0x3c2cb6(0x155)][_0x3c2cb6(0x142)]()[_0x3c2cb6(0x176)](/```json|```/g,'')[_0x3c2cb6(0x14a)]());await _0x4298d9[_0x3c2cb6(0x133)](_0x3c2cb6(0x147),{'val':JSON[_0x3c2cb6(0x18e)](_0x222a2f),'ack':!![]});if(_0x222a2f[_0x3c2cb6(0x14e)])await _0x4298d9[_0x3c2cb6(0x133)](_0x3c2cb6(0x172),{'val':_0x222a2f[_0x3c2cb6(0x14e)],'ack':!![]});const _0x10e6c2={'timestamp':Date[_0x3c2cb6(0x11f)](),'id':Date[_0x3c2cb6(0x11f)]()[_0x3c2cb6(0x13d)](),'analysis':{'activity':{'summary':_0x222a2f[_0x3c2cb6(0x14e)],'isAlert':_0x222a2f['isAlert'],'alertReason':_0x222a2f['alertReason']},'comfort':{'automationProposal':_0x222a2f[_0x3c2cb6(0x13f)]}}};_0x4298d9['analysisHistory']['unshift'](_0x10e6c2);if(_0x4298d9[_0x3c2cb6(0x15b)][_0x3c2cb6(0x196)]>0x32)_0x4298d9[_0x3c2cb6(0x15b)][_0x3c2cb6(0x150)]();await _0x4298d9[_0x3c2cb6(0x133)](_0x3c2cb6(0x171),{'val':JSON[_0x3c2cb6(0x18e)](_0x4298d9[_0x3c2cb6(0x15b)]),'ack':!![]});const _0x5bcd2e=_0x222a2f['isAlert']||![];_0x5bcd2e!==_0x4298d9[_0x3c2cb6(0x195)]&&(await _0x4298d9[_0x3c2cb6(0x133)](_0x3c2cb6(0x137),{'val':_0x5bcd2e,'ack':!![]}),_0x4298d9[_0x3c2cb6(0x195)]=_0x5bcd2e,_0x5bcd2e&&(await _0x4298d9['setStateAsync'](_0x3c2cb6(0x14c),{'val':_0x222a2f['alertReason'],'ack':!![]}),setup[_0x3c2cb6(0x166)](_0x4298d9,'‚ö†Ô∏è\x20ALARM:\x20'+_0x222a2f[_0x3c2cb6(0x157)],![],_0x222a2f['isEmergency'])));if(_0x222a2f[_0x3c2cb6(0x13f)]&&_0x222a2f[_0x3c2cb6(0x13f)][_0x3c2cb6(0x163)]){await _0x4298d9['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x4298d9[_0x3c2cb6(0x133)](_0x3c2cb6(0x16a),{'val':_0x222a2f['automationProposal'][_0x3c2cb6(0x189)],'ack':!![]}),await _0x4298d9[_0x3c2cb6(0x133)]('analysis.automation.targetId',{'val':_0x222a2f['automationProposal'][_0x3c2cb6(0x181)],'ack':!![]}),await _0x4298d9[_0x3c2cb6(0x133)](_0x3c2cb6(0x16e),{'val':JSON[_0x3c2cb6(0x18e)](_0x222a2f['automationProposal']['targetValue']),'ack':!![]});if(_0x503e63)executeAutomationAction(_0x4298d9);}}catch(_0x259e3b){_0x4298d9['log'][_0x3c2cb6(0x135)](_0x3c2cb6(0x18a)+_0x259e3b[_0x3c2cb6(0x121)]);}}async function createDailyDigest(_0x5f2ea4,_0x1c2c90){const _0x4c4ae2=a0_0x2fff2a;if(!_0x5f2ea4[_0x4c4ae2(0x175)])return;if(!canCallApi()){await _0x5f2ea4[_0x4c4ae2(0x133)](LTM_DP_STATUS,{'val':_0x4c4ae2(0x173),'ack':!![]});return;}await _0x5f2ea4[_0x4c4ae2(0x133)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x5f2ea4[_0x4c4ae2(0x18f)]||_0x5f2ea4[_0x4c4ae2(0x178)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x5f2ea4['setStateAsync'](LTM_DP_STATUS,{'val':_0x4c4ae2(0x13c),'ack':!![]});return;}const _0x1c8058=JSON[_0x4c4ae2(0x12e)](JSON['stringify'](_0x5f2ea4[_0x4c4ae2(0x178)])),_0x35f090=_0x1c8058[_0x4c4ae2(0x196)],_0x46984e=_0x4c4ae2(0x118)+JSON[_0x4c4ae2(0x18e)](_0x1c8058);try{updateApiTimestamp();const _0xd987a2=await _0x5f2ea4[_0x4c4ae2(0x18f)][_0x4c4ae2(0x16f)](_0x46984e),_0x41e51f=JSON[_0x4c4ae2(0x12e)](_0xd987a2[_0x4c4ae2(0x155)]['text']()[_0x4c4ae2(0x176)](/```json|```/g,'')[_0x4c4ae2(0x14a)]()),_0x511a19={'timestamp':new Date()[_0x4c4ae2(0x145)](),'eventCount':_0x35f090,'summary':_0x41e51f[_0x4c4ae2(0x14e)]||_0x4c4ae2(0x134),'activityLevel':_0x41e51f[_0x4c4ae2(0x16d)]||_0x4c4ae2(0x17c),'systemMode':_0x5f2ea4[_0x4c4ae2(0x17d)]};_0x5f2ea4['dailyDigests'][_0x4c4ae2(0x120)](_0x511a19);const _0x6a5bb0=_0x5f2ea4[_0x4c4ae2(0x17f)]['ltmLtbWindowDays']||0x3c;_0x5f2ea4[_0x4c4ae2(0x199)][_0x4c4ae2(0x196)]>_0x6a5bb0&&_0x5f2ea4['dailyDigests'][_0x4c4ae2(0x164)](0x0,_0x5f2ea4['dailyDigests'][_0x4c4ae2(0x196)]-_0x6a5bb0);await _0x5f2ea4[_0x4c4ae2(0x133)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x4c4ae2(0x18e)](_0x5f2ea4[_0x4c4ae2(0x199)]),'ack':!![]}),_0x5f2ea4[_0x4c4ae2(0x178)]=[],await _0x5f2ea4['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x4c4ae2(0x18e)](_0x5f2ea4[_0x4c4ae2(0x178)]),'ack':!![]}),await _0x5f2ea4['setStateAsync'](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x5f2ea4[_0x4c4ae2(0x175)]&&_0x1c2c90)_0x1c2c90[_0x4c4ae2(0x194)](_0x5f2ea4,_0x4c4ae2(0x170),{'digest':_0x511a19});}catch(_0x5416fd){_0x5f2ea4[_0x4c4ae2(0x15c)][_0x4c4ae2(0x135)](_0x5416fd[_0x4c4ae2(0x121)]);}}async function runBaselineDriftAnalysis(_0x4820ac){const _0x12e870=a0_0x2fff2a;if(!_0x4820ac[_0x12e870(0x175)]||!_0x4820ac['geminiModel'])return;if(!canCallApi())return;const _0xdd3ada=_0x4820ac[_0x12e870(0x17f)][_0x12e870(0x15d)]||0xe;if(_0x4820ac[_0x12e870(0x199)][_0x12e870(0x196)]<_0xdd3ada+0x7){await _0x4820ac[_0x12e870(0x133)](_0x12e870(0x11a),{'val':_0x12e870(0x198),'ack':!![]});return;}const _0x30de3b=_0x4820ac[_0x12e870(0x199)]['slice'](-_0xdd3ada),_0x4dc251=_0x4820ac[_0x12e870(0x199)]['slice'](0x0,_0x4820ac['dailyDigests'][_0x12e870(0x196)]-_0xdd3ada),_0x5a4c40=_0x12e870(0x179)+JSON[_0x12e870(0x18e)](_0x4dc251)+_0x12e870(0x13b)+JSON[_0x12e870(0x18e)](_0x30de3b);try{updateApiTimestamp();const _0x516c48=await _0x4820ac[_0x12e870(0x18f)][_0x12e870(0x16f)](_0x5a4c40),_0x8b47dd=JSON['parse'](_0x516c48[_0x12e870(0x155)][_0x12e870(0x142)]()[_0x12e870(0x176)](/```json|```/g,'')['trim']());_0x8b47dd['baselineDrift']&&(await _0x4820ac[_0x12e870(0x133)](_0x12e870(0x11a),{'val':_0x8b47dd[_0x12e870(0x15e)],'ack':!![]}),await _0x4820ac[_0x12e870(0x133)](_0x12e870(0x180),{'val':_0x8b47dd[_0x12e870(0x151)],'ack':!![]}),await _0x4820ac[_0x12e870(0x133)]('LTM.driftAnalysis.lastCheck',{'val':Date[_0x12e870(0x11f)](),'ack':!![]}));}catch(_0x554336){}}async function executeAutomationAction(_0x431a89){const _0x1a3084=a0_0x2fff2a;try{const _0x428d1b=await _0x431a89['getStateAsync']('analysis.automation.targetId'),_0x4bfd09=await _0x431a89['getStateAsync']('analysis.automation.targetValue');if(_0x428d1b&&_0x428d1b['val']&&_0x4bfd09){const _0x5ab7aa=_0x428d1b['val'];let _0x489aad=_0x4bfd09[_0x1a3084(0x139)];try{_0x489aad=JSON[_0x1a3084(0x12e)](_0x489aad);}catch(_0x3f7781){}_0x431a89[_0x1a3084(0x15c)][_0x1a3084(0x185)](_0x1a3084(0x18d)+_0x5ab7aa+_0x1a3084(0x165)+_0x489aad),await _0x431a89[_0x1a3084(0x182)](_0x5ab7aa,_0x489aad);}else _0x431a89[_0x1a3084(0x15c)][_0x1a3084(0x128)](_0x1a3084(0x11c));}catch(_0x36eba3){_0x431a89[_0x1a3084(0x15c)][_0x1a3084(0x135)](_0x1a3084(0x188)+_0x36eba3['message']);}}async function sendMorningBriefing(_0x39da55){const _0x4348b4=a0_0x2fff2a;if(!_0x39da55[_0x4348b4(0x18f)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x54040b=_0x4348b4(0x162),_0x497cff=await _0x39da55['geminiModel'][_0x4348b4(0x16f)](_0x54040b),_0xc6f13a=_0x497cff[_0x4348b4(0x155)][_0x4348b4(0x142)]();setup[_0x4348b4(0x166)](_0x39da55,_0x4348b4(0x123)+_0xc6f13a);}catch(_0x5693ec){_0x39da55[_0x4348b4(0x15c)][_0x4348b4(0x135)](_0x4348b4(0x193)+_0x5693ec[_0x4348b4(0x121)]);}}module['exports']={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};