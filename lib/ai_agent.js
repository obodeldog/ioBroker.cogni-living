const a0_0x453acc=a0_0xb525;(function(_0x4e4a4b,_0x5cd030){const _0x46d4eb=a0_0xb525,_0x48d2b9=_0x4e4a4b();while(!![]){try{const _0x360d0f=parseInt(_0x46d4eb(0xfd))/0x1+parseInt(_0x46d4eb(0xbd))/0x2*(parseInt(_0x46d4eb(0x119))/0x3)+parseInt(_0x46d4eb(0xd1))/0x4*(-parseInt(_0x46d4eb(0x102))/0x5)+-parseInt(_0x46d4eb(0x101))/0x6*(parseInt(_0x46d4eb(0x126))/0x7)+-parseInt(_0x46d4eb(0xbe))/0x8*(-parseInt(_0x46d4eb(0xad))/0x9)+parseInt(_0x46d4eb(0xaf))/0xa*(parseInt(_0x46d4eb(0x112))/0xb)+-parseInt(_0x46d4eb(0x124))/0xc;if(_0x360d0f===_0x5cd030)break;else _0x48d2b9['push'](_0x48d2b9['shift']());}catch(_0x5447be){_0x48d2b9['push'](_0x48d2b9['shift']());}}}(a0_0x2631,0x50161));const a0_0x51fffe=(function(){let _0x1cb5f4=!![];return function(_0x480951,_0x552fdf){const _0x2a2ecb=_0x1cb5f4?function(){if(_0x552fdf){const _0x30242b=_0x552fdf['apply'](_0x480951,arguments);return _0x552fdf=null,_0x30242b;}}:function(){};return _0x1cb5f4=![],_0x2a2ecb;};}()),a0_0x484356=a0_0x51fffe(this,function(){const _0x3246c2=a0_0xb525;return a0_0x484356['toString']()[_0x3246c2(0xc5)]('(((.+)+)+)+$')['toString']()[_0x3246c2(0x10b)](a0_0x484356)['search'](_0x3246c2(0xf6));});a0_0x484356();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require(a0_0x453acc(0x113)),GEMINI_MODEL=a0_0x453acc(0xd2),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x453acc(0xd4),LTM_DP_RAW_LOG=a0_0x453acc(0xda),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;function a0_0x2631(){const _0x18bdc2=['Skipped\x20(No\x20AI\x20or\x20Data)','decision','getForeignStateAsync','BUTLER\x20Execution\x20Error:\x20','activityLevel','isEmergency','isAlert','LTM.driftAnalysis.lastCheck','generic','currentSystemMode','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','geminiModel','LTM.driftAnalysis.baselineDrift','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','approved','reason','(((.+)+)+)+$','push','length','text','.\x20ANWESEND:\x20','analysis.automation.targetValue','dailyDigests','228087bnGtVL','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','Â°C,\x20','analysis.automation.description','6QYanXo','1631310qqcSaF','debug','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','stringify','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','setStateAsync','aiPersona','baselineDrift','targetId','constructor','unshift','trim','Unbekannt','normal','setForeignStateAsync','getStateAsync','167497gOYwEE','./setup','ðŸŒ…\x20Morning\x20Briefing:\x0a','replace','\x20->\x20','analysis.alertReason','ltmStbWindowDays','177045clkaNb','weatherInstance','toFixed','driftDetails','sendNotification','analysis.automation.autoApply','analysis.activitySummary','Wetterdaten\x20nicht\x20abrufbar','analysisHistory','info','now','5764752TnUDFo','parse','1356418UCwYvP','pop',',\x20Wetter:\x20','timestamp','alertReason','%)\x20nach\x20\x22','2367ahMZBH','response','230idFoDI','\x20=\x20','ANALYZE_HEALTH','val','log','summary','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','error','detected','useWeather','generateContent','analysis.automation.targetId','Sicherheit\x20geht\x20vor.','.\x20SYSTEM_MODE:\x20','22nrWfaS','3072jyiOpU','ltmLtbWindowDays','âš ï¸\x20ALARM:\x20','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','.\x20EVENTS:\x20','Success','isProVersion','search','warn','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','analysis.analysisHistory','Traffic-Schutz\x20(Auto-Approved)','toLocaleTimeString','slice','Digest','KI-Fehler\x20(Fallback)','config','4xwcNzE','models/gemini-flash-latest','message','LTM.processingStatus','eventHistory','.Current.WeatherText','KI\x20offline\x20(Fallback)','\x0aAktivitÃ¤t:\x20','toString','LTM.rawEventLog','lastAlertState','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','analysis.isAlert','send','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','automationProposal','.Current.Temperature','Unbekannt\x20(Kein\x20Sensor)','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','rawEventLog'];a0_0x2631=function(){return _0x18bdc2;};return a0_0x2631();}let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x453acc(0xe3),'senior_aal':a0_0x453acc(0xdf),'family':a0_0x453acc(0x106),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':a0_0x453acc(0xbb),'energy_saver':a0_0x453acc(0xf3)};function canCallApi(){const _0x31eee2=a0_0x453acc,_0x22a024=Date[_0x31eee2(0x123)]();return _0x22a024-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x53b9e7=a0_0x453acc;lastGlobalApiCall=Date[_0x53b9e7(0x123)]();}function a0_0xb525(_0x1fece2,_0x3d4353){const _0x5aa796=a0_0x2631();return a0_0xb525=function(_0x484356,_0x51fffe){_0x484356=_0x484356-0xac;let _0x2631f5=_0x5aa796[_0x484356];return _0x2631f5;},a0_0xb525(_0x1fece2,_0x3d4353);}async function getWeatherContext(_0x49c817){const _0x322f09=a0_0x453acc;if(!_0x49c817[_0x322f09(0xd0)][_0x322f09(0xb8)]||!_0x49c817['config'][_0x322f09(0x11a)])return _0x322f09(0xe2);try{const _0x112713=_0x49c817[_0x322f09(0xd0)][_0x322f09(0x11a)];let _0x1e83e2=await _0x49c817[_0x322f09(0xe7)](_0x112713+_0x322f09(0xe1));if(!_0x1e83e2)_0x1e83e2=await _0x49c817[_0x322f09(0xe7)](_0x112713+'.forecast.current.temperature');let _0x412a5e=await _0x49c817[_0x322f09(0xe7)](_0x112713+_0x322f09(0xd6));if(!_0x412a5e)_0x412a5e=await _0x49c817[_0x322f09(0xe7)](_0x112713+'.forecast.current.state');let _0x211ae1=_0x322f09(0x10e);const _0x2d9b19=await _0x49c817[_0x322f09(0xe7)](_0x112713+'.Current.IsNight');if(_0x2d9b19)_0x211ae1=_0x2d9b19[_0x322f09(0xb2)]?'Nacht':'Tag';if(_0x1e83e2&&_0x412a5e)return _0x1e83e2['val']+_0x322f09(0xff)+_0x412a5e['val']+',\x20LichtverhÃ¤ltnisse:\x20'+_0x211ae1;}catch(_0x18860a){}return _0x322f09(0x120);}async function consultButler(_0xc2eea7,_0x3cc377,_0x3305fc,_0x54fa79){const _0x50dc95=a0_0x453acc;if(!_0xc2eea7[_0x50dc95(0xf0)])return{'approved':!![],'reason':_0x50dc95(0xd7)};const _0x5dd061=Date['now']();if(decisionCache[_0x3cc377]&&_0x5dd061-decisionCache[_0x3cc377][_0x50dc95(0x129)]<CACHE_TTL_MS){const _0x54d395=decisionCache[_0x3cc377][_0x50dc95(0xe6)];return _0xc2eea7[_0x50dc95(0xb3)][_0x50dc95(0x103)]('ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20'+_0x3cc377+_0x50dc95(0x116)+(_0x54d395[_0x50dc95(0xf4)]?'OK':'NO')+'\x20('+_0x54d395[_0x50dc95(0xf5)]+')'),_0x54d395;}if(!canCallApi())return _0xc2eea7[_0x50dc95(0xb3)]['debug']('ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20'+_0x3cc377+'\x20Ã¼bersprungen\x20(Auto-Approved).'),{'approved':!![],'reason':_0x50dc95(0xcb)};const _0x3f4f61=new Date()[_0x50dc95(0xcc)](),_0x45a7ef=await getWeatherContext(_0xc2eea7),_0x5cc0b9=PERSONA_MAPPING[_0xc2eea7[_0x50dc95(0xd0)][_0x50dc95(0x108)]||_0x50dc95(0xed)],_0x34a6f7='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x3f4f61+_0x50dc95(0x128)+_0x45a7ef+_0x50dc95(0xc8)+(_0x54fa79*0x64)[_0x50dc95(0x11b)](0x0)+_0x50dc95(0xac)+_0x3cc377+_0x50dc95(0xef)+_0x3305fc+_0x50dc95(0xf2)+_0x5cc0b9+_0x50dc95(0xfe);try{updateApiTimestamp();const _0xa183c6=await _0xc2eea7[_0x50dc95(0xf0)][_0x50dc95(0xb9)](_0x34a6f7),_0x599513=_0xa183c6[_0x50dc95(0xae)][_0x50dc95(0xf9)]()[_0x50dc95(0x115)](/```json|```/g,'')['trim'](),_0x540667=JSON[_0x50dc95(0x125)](_0x599513);return decisionCache[_0x3cc377]={'decision':_0x540667,'timestamp':_0x5dd061},_0x540667;}catch(_0x487076){return _0xc2eea7[_0x50dc95(0xb3)][_0x50dc95(0xc6)](_0x50dc95(0xc9)+_0x487076[_0x50dc95(0xd3)]),decisionCache[_0x3cc377]={'decision':{'approved':!![],'reason':_0x50dc95(0xcf)},'timestamp':_0x5dd061-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x50dc95(0xcf)};}}async function runGeminiAnalysis(_0x8e3cd1,_0x25d171=''){const _0x47b1bf=a0_0x453acc;if(!_0x8e3cd1[_0x47b1bf(0xf0)])return;if(!canCallApi()){_0x8e3cd1[_0x47b1bf(0xb3)][_0x47b1bf(0x103)](_0x47b1bf(0xc1));return;}if(_0x8e3cd1[_0x47b1bf(0xd5)][_0x47b1bf(0xf8)]===0x0)return;const _0xbb860f=_0x8e3cd1[_0x47b1bf(0xd5)][_0x47b1bf(0xcd)](0x0,0xf),_0x303f0c=_0x8e3cd1[_0x47b1bf(0xee)],_0xcfa04b=PERSONA_MAPPING[_0x8e3cd1[_0x47b1bf(0xd0)]['aiPersona']||_0x47b1bf(0xed)],_0x302398=_0x8e3cd1[_0x47b1bf(0xd0)]['livingContext']||'Keine\x20Details.';let _0x12a768='Unbekannt';try{const _0x6d69=await _0x8e3cd1[_0x47b1bf(0x111)]('system.presenceWho');if(_0x6d69&&_0x6d69[_0x47b1bf(0xb2)])_0x12a768=_0x6d69[_0x47b1bf(0xb2)];}catch(_0xbc9efa){}let _0x22355a=![];try{const _0x231194=await _0x8e3cd1[_0x47b1bf(0x111)](_0x47b1bf(0x11e));if(_0x231194&&_0x231194[_0x47b1bf(0xb2)])_0x22355a=!![];}catch(_0x5c5098){}const _0x2c1640=_0x47b1bf(0xc7)+_0xcfa04b+'.\x20KONTEXT:\x20'+_0x302398+_0x47b1bf(0xbc)+_0x303f0c+_0x47b1bf(0xfa)+_0x12a768+_0x47b1bf(0xc2)+JSON[_0x47b1bf(0x105)](_0xbb860f)+'.\x20EMERGENCY:\x20'+_0x25d171+_0x47b1bf(0xb5);try{updateApiTimestamp();const _0x5df1cd=await _0x8e3cd1[_0x47b1bf(0xf0)][_0x47b1bf(0xb9)](_0x2c1640),_0x511874=JSON['parse'](_0x5df1cd[_0x47b1bf(0xae)]['text']()[_0x47b1bf(0x115)](/```json|```/g,'')[_0x47b1bf(0x10d)]());await _0x8e3cd1['setStateAsync']('analysis.lastResult',{'val':JSON[_0x47b1bf(0x105)](_0x511874),'ack':!![]});if(_0x511874[_0x47b1bf(0xb4)])await _0x8e3cd1[_0x47b1bf(0x107)](_0x47b1bf(0x11f),{'val':_0x511874[_0x47b1bf(0xb4)],'ack':!![]});const _0x498cbb={'timestamp':Date[_0x47b1bf(0x123)](),'id':Date[_0x47b1bf(0x123)]()[_0x47b1bf(0xd9)](),'analysis':{'activity':{'summary':_0x511874[_0x47b1bf(0xb4)],'isAlert':_0x511874[_0x47b1bf(0xeb)],'alertReason':_0x511874[_0x47b1bf(0x12a)]},'comfort':{'automationProposal':_0x511874[_0x47b1bf(0xe0)]}}};_0x8e3cd1[_0x47b1bf(0x121)][_0x47b1bf(0x10c)](_0x498cbb);if(_0x8e3cd1[_0x47b1bf(0x121)][_0x47b1bf(0xf8)]>0x32)_0x8e3cd1[_0x47b1bf(0x121)][_0x47b1bf(0x127)]();await _0x8e3cd1[_0x47b1bf(0x107)](_0x47b1bf(0xca),{'val':JSON[_0x47b1bf(0x105)](_0x8e3cd1[_0x47b1bf(0x121)]),'ack':!![]});const _0x5e028c=_0x511874[_0x47b1bf(0xeb)]||![];_0x5e028c!==_0x8e3cd1[_0x47b1bf(0xdb)]&&(await _0x8e3cd1[_0x47b1bf(0x107)](_0x47b1bf(0xdd),{'val':_0x5e028c,'ack':!![]}),_0x8e3cd1[_0x47b1bf(0xdb)]=_0x5e028c,_0x5e028c&&(await _0x8e3cd1[_0x47b1bf(0x107)](_0x47b1bf(0x117),{'val':_0x511874[_0x47b1bf(0x12a)],'ack':!![]}),setup[_0x47b1bf(0x11d)](_0x8e3cd1,_0x47b1bf(0xc0)+_0x511874['alertReason'],![],_0x511874[_0x47b1bf(0xea)])));if(_0x511874[_0x47b1bf(0xe0)]&&_0x511874[_0x47b1bf(0xe0)][_0x47b1bf(0xb7)]){await _0x8e3cd1['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x8e3cd1[_0x47b1bf(0x107)](_0x47b1bf(0x100),{'val':_0x511874[_0x47b1bf(0xe0)]['description'],'ack':!![]}),await _0x8e3cd1[_0x47b1bf(0x107)](_0x47b1bf(0xba),{'val':_0x511874[_0x47b1bf(0xe0)][_0x47b1bf(0x10a)],'ack':!![]}),await _0x8e3cd1[_0x47b1bf(0x107)](_0x47b1bf(0xfb),{'val':JSON['stringify'](_0x511874[_0x47b1bf(0xe0)]['targetValue']),'ack':!![]});if(_0x22355a)executeAutomationAction(_0x8e3cd1);}}catch(_0x4db2c5){_0x8e3cd1['log'][_0x47b1bf(0xb6)]('Gemini\x20Error:\x20'+_0x4db2c5[_0x47b1bf(0xd3)]);}}async function createDailyDigest(_0x5a0f4e,_0x5339b3){const _0x127960=a0_0x453acc;if(!_0x5a0f4e['isProVersion'])return;if(!canCallApi()){await _0x5a0f4e['setStateAsync'](LTM_DP_STATUS,{'val':'Skipped\x20(Traffic)','ack':!![]});return;}await _0x5a0f4e[_0x127960(0x107)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x5a0f4e[_0x127960(0xf0)]||_0x5a0f4e[_0x127960(0xe4)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x5a0f4e[_0x127960(0x107)](LTM_DP_STATUS,{'val':_0x127960(0xe5),'ack':!![]});return;}const _0xccc743=JSON[_0x127960(0x125)](JSON[_0x127960(0x105)](_0x5a0f4e['rawEventLog'])),_0x5560f9=_0xccc743['length'],_0x24730c='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x127960(0x105)](_0xccc743);try{updateApiTimestamp();const _0x43c468=await _0x5a0f4e[_0x127960(0xf0)]['generateContent'](_0x24730c),_0x16e309=JSON[_0x127960(0x125)](_0x43c468['response'][_0x127960(0xf9)]()[_0x127960(0x115)](/```json|```/g,'')[_0x127960(0x10d)]()),_0x49c0b2={'timestamp':new Date()['toISOString'](),'eventCount':_0x5560f9,'summary':_0x16e309[_0x127960(0xb4)]||_0x127960(0xce),'activityLevel':_0x16e309[_0x127960(0xe9)]||_0x127960(0x10f),'systemMode':_0x5a0f4e[_0x127960(0xee)]};_0x5a0f4e[_0x127960(0xfc)][_0x127960(0xf7)](_0x49c0b2);const _0x20a2e9=_0x5a0f4e[_0x127960(0xd0)][_0x127960(0xbf)]||0x3c;_0x5a0f4e[_0x127960(0xfc)][_0x127960(0xf8)]>_0x20a2e9&&_0x5a0f4e['dailyDigests']['splice'](0x0,_0x5a0f4e[_0x127960(0xfc)][_0x127960(0xf8)]-_0x20a2e9);await _0x5a0f4e['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x127960(0x105)](_0x5a0f4e[_0x127960(0xfc)]),'ack':!![]}),_0x5a0f4e[_0x127960(0xe4)]=[],await _0x5a0f4e[_0x127960(0x107)](LTM_DP_RAW_LOG,{'val':JSON[_0x127960(0x105)](_0x5a0f4e['rawEventLog']),'ack':!![]}),await _0x5a0f4e[_0x127960(0x107)](LTM_DP_STATUS,{'val':_0x127960(0xc3),'ack':!![]});const _0x5692fc='ðŸ“…\x20Daily\x20Digest:\x0a'+_0x16e309[_0x127960(0xb4)]+_0x127960(0xd8)+_0x16e309['activityLevel'];setup[_0x127960(0x11d)](_0x5a0f4e,_0x5692fc,![],![]);if(_0x5a0f4e[_0x127960(0xc4)]&&_0x5339b3)_0x5339b3[_0x127960(0xde)](_0x5a0f4e,_0x127960(0xb1),{'digest':_0x49c0b2});}catch(_0x54b2b5){_0x5a0f4e[_0x127960(0xb3)][_0x127960(0xb6)](_0x54b2b5[_0x127960(0xd3)]);}}async function runBaselineDriftAnalysis(_0x3f81de){const _0x20eae0=a0_0x453acc;if(!_0x3f81de[_0x20eae0(0xc4)]||!_0x3f81de[_0x20eae0(0xf0)])return;if(!canCallApi())return;const _0x5d2019=_0x3f81de[_0x20eae0(0xd0)][_0x20eae0(0x118)]||0xe;if(_0x3f81de[_0x20eae0(0xfc)][_0x20eae0(0xf8)]<_0x5d2019+0x7){await _0x3f81de[_0x20eae0(0x107)](_0x20eae0(0xf1),{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x2f4ee4=_0x3f81de[_0x20eae0(0xfc)][_0x20eae0(0xcd)](-_0x5d2019),_0x373291=_0x3f81de[_0x20eae0(0xfc)][_0x20eae0(0xcd)](0x0,_0x3f81de['dailyDigests']['length']-_0x5d2019),_0x560c0='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON['stringify'](_0x373291)+'\x0aSTB:\x20'+JSON['stringify'](_0x2f4ee4);try{updateApiTimestamp();const _0x467298=await _0x3f81de[_0x20eae0(0xf0)]['generateContent'](_0x560c0),_0x325723=JSON[_0x20eae0(0x125)](_0x467298['response'][_0x20eae0(0xf9)]()[_0x20eae0(0x115)](/```json|```/g,'')['trim']());_0x325723[_0x20eae0(0x109)]&&(await _0x3f81de['setStateAsync'](_0x20eae0(0xf1),{'val':_0x325723[_0x20eae0(0x109)],'ack':!![]}),await _0x3f81de[_0x20eae0(0x107)]('LTM.driftAnalysis.driftDetails',{'val':_0x325723[_0x20eae0(0x11c)],'ack':!![]}),await _0x3f81de[_0x20eae0(0x107)](_0x20eae0(0xec),{'val':Date[_0x20eae0(0x123)](),'ack':!![]}));}catch(_0x1b08c5){}}async function executeAutomationAction(_0x4f75ed){const _0x3fabd3=a0_0x453acc;try{const _0x243c01=await _0x4f75ed['getStateAsync'](_0x3fabd3(0xba)),_0x1d225c=await _0x4f75ed[_0x3fabd3(0x111)](_0x3fabd3(0xfb));if(_0x243c01&&_0x243c01['val']&&_0x1d225c){const _0x52fc97=_0x243c01['val'];let _0x1c554f=_0x1d225c[_0x3fabd3(0xb2)];try{_0x1c554f=JSON[_0x3fabd3(0x125)](_0x1c554f);}catch(_0x19035a){}_0x4f75ed[_0x3fabd3(0xb3)][_0x3fabd3(0x122)](_0x3fabd3(0xdc)+_0x52fc97+_0x3fabd3(0xb0)+_0x1c554f),await _0x4f75ed[_0x3fabd3(0x110)](_0x52fc97,_0x1c554f);}else _0x4f75ed[_0x3fabd3(0xb3)][_0x3fabd3(0xc6)]('ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x3abcec){_0x4f75ed[_0x3fabd3(0xb3)]['error'](_0x3fabd3(0xe8)+_0x3abcec[_0x3fabd3(0xd3)]);}}async function sendMorningBriefing(_0x40d450){const _0x20f87d=a0_0x453acc;if(!_0x40d450[_0x20f87d(0xf0)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x14ebf0=_0x20f87d(0x104),_0x2cf767=await _0x40d450['geminiModel'][_0x20f87d(0xb9)](_0x14ebf0),_0x67b95f=_0x2cf767['response'][_0x20f87d(0xf9)]();setup[_0x20f87d(0x11d)](_0x40d450,_0x20f87d(0x114)+_0x67b95f);}catch(_0x361222){_0x40d450[_0x20f87d(0xb3)][_0x20f87d(0xb6)]('Briefing\x20Error:\x20'+_0x361222[_0x20f87d(0xd3)]);}}module['exports']={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};