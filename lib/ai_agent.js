const a0_0x5d7db5=a0_0x1601;(function(_0x68478c,_0x10c727){const _0x5ac74e=a0_0x1601,_0x57aa20=_0x68478c();while(!![]){try{const _0x1b6878=-parseInt(_0x5ac74e(0x1ee))/0x1+parseInt(_0x5ac74e(0x1fb))/0x2*(parseInt(_0x5ac74e(0x1ca))/0x3)+parseInt(_0x5ac74e(0x220))/0x4+-parseInt(_0x5ac74e(0x1e9))/0x5+-parseInt(_0x5ac74e(0x1c9))/0x6*(-parseInt(_0x5ac74e(0x203))/0x7)+-parseInt(_0x5ac74e(0x1b2))/0x8*(parseInt(_0x5ac74e(0x1e2))/0x9)+parseInt(_0x5ac74e(0x1fa))/0xa;if(_0x1b6878===_0x10c727)break;else _0x57aa20['push'](_0x57aa20['shift']());}catch(_0x454245){_0x57aa20['push'](_0x57aa20['shift']());}}}(a0_0x29da,0x3a7d6));const a0_0x3f33ae=(function(){let _0x19b752=!![];return function(_0x4536ae,_0x239bdb){const _0xc3c8f0=_0x19b752?function(){const _0x59307c=a0_0x1601;if(_0x239bdb){const _0x556868=_0x239bdb[_0x59307c(0x1e4)](_0x4536ae,arguments);return _0x239bdb=null,_0x556868;}}:function(){};return _0x19b752=![],_0xc3c8f0;};}()),a0_0x30c410=a0_0x3f33ae(this,function(){const _0x1d460c=a0_0x1601;return a0_0x30c410[_0x1d460c(0x21d)]()[_0x1d460c(0x226)](_0x1d460c(0x208))['toString']()[_0x1d460c(0x1f0)](a0_0x30c410)[_0x1d460c(0x226)](_0x1d460c(0x208));});a0_0x30c410();'use strict';function a0_0x1601(_0x2b2112,_0x3f648f){const _0x485f71=a0_0x29da();return a0_0x1601=function(_0x30c410,_0x3f33ae){_0x30c410=_0x30c410-0x1ab;let _0x29da0b=_0x485f71[_0x30c410];return _0x29da0b;},a0_0x1601(_0x2b2112,_0x3f648f);}const {GoogleGenerativeAI}=require(a0_0x5d7db5(0x1bd)),setup=require(a0_0x5d7db5(0x1d5)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x5d7db5(0x216),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG=a0_0x5d7db5(0x1d3),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x5d7db5(0x1e1),'senior_aal':a0_0x5d7db5(0x213),'family':a0_0x5d7db5(0x1c2),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x5d7db5(0x1fd)};function canCallApi(){const _0xe4be2d=Date['now']();return _0xe4be2d-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x189e53=a0_0x5d7db5;lastGlobalApiCall=Date[_0x189e53(0x1bf)]();}async function getWeatherContext(_0x4ae3ef){const _0x2346fe=a0_0x5d7db5;if(!_0x4ae3ef[_0x2346fe(0x1ef)][_0x2346fe(0x1ff)]||!_0x4ae3ef['config'][_0x2346fe(0x1b3)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x2d43ae=_0x4ae3ef[_0x2346fe(0x1ef)][_0x2346fe(0x1b3)];let _0x3310ad=await _0x4ae3ef[_0x2346fe(0x1b0)](_0x2d43ae+'.Current.Temperature');if(!_0x3310ad)_0x3310ad=await _0x4ae3ef[_0x2346fe(0x1b0)](_0x2d43ae+'.forecast.current.temperature');let _0x22f27f=await _0x4ae3ef['getForeignStateAsync'](_0x2d43ae+_0x2346fe(0x1d8));if(!_0x22f27f)_0x22f27f=await _0x4ae3ef[_0x2346fe(0x1b0)](_0x2d43ae+_0x2346fe(0x1c6));let _0x126f62=_0x2346fe(0x1d4);const _0x4d5fce=await _0x4ae3ef[_0x2346fe(0x1b0)](_0x2d43ae+'.Current.IsNight');if(_0x4d5fce)_0x126f62=_0x4d5fce[_0x2346fe(0x1d0)]?_0x2346fe(0x1b5):'Tag';if(_0x3310ad&&_0x22f27f)return _0x3310ad[_0x2346fe(0x1d0)]+_0x2346fe(0x218)+_0x22f27f[_0x2346fe(0x1d0)]+',\x20LichtverhÃ¤ltnisse:\x20'+_0x126f62;}catch(_0x418279){}return _0x2346fe(0x1d9);}function a0_0x29da(){const _0xa84450=['setStateAsync','now','analysis.automation.patternDetected','lastAlertState','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','.\x20EMERGENCY:\x20','targetValue','warn','.forecast.current.state','ltmStbWindowDays','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','532938SYQkrS','81888FSrnYz','normal','baselineDrift','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','val','dailyDigests','parse','LTM.rawEventLog','Unbekannt','./setup','âš ï¸\x20ALARM:\x20','pop','.Current.WeatherText','Wetterdaten\x20nicht\x20abrufbar','decision','Gemini\x20Error:\x20','.\x20ANWESEND:\x20','\x20Ã¼bersprungen\x20(Auto-Approved).','N/A\x20(Learning)','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','analysis.automation.autoApply','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','6525wbJunD','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','apply','approved','slice','generic','Skipped\x20(Traffic)','2243350hxufFQ','stringify','targetId','analysis.automation.targetValue','unshift','187428PSXoVc','config','constructor','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','analysisHistory','LTM.driftAnalysis.lastCheck','Skipped\x20(No\x20AI\x20or\x20Data)','splice','toFixed','driftDetails','rawEventLog','geminiModel','1594620PKQLAd','30cpinfx','activityLevel','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','\x20->\x20','useWeather','trim','Success','summary','14aEfNix','sendNotification','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','alertReason','%)\x20nach\x20\x22','(((.+)+)+)+$','reason','toISOString','analysis.isAlert','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','analysis.automation.targetId','getStateAsync','.\x20EVENTS:\x20','message','error','toLocaleTimeString','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','eventHistory','analysis.alertReason','LTM.dailyDigests','LTM.driftAnalysis.driftDetails','Â°C,\x20','generateContent','ANALYZE_HEALTH','timestamp','Digest','toString','aiPersona','KI\x20offline\x20(Fallback)','1084896LsHdMJ','\x0aSTB:\x20','\x20=\x20','LTM.driftAnalysis.baselineDrift','push','currentSystemMode','search','automationProposal','analysis.automation.description','Started...','detected','send','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','exports','replace','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','response','getForeignStateAsync','.\x20KONTEXT:\x20','1568LPNoni','weatherInstance','length','Nacht','isProVersion','setForeignStateAsync','description','text','isAlert','log','Briefing\x20Error:\x20','@google/generative-ai'];a0_0x29da=function(){return _0xa84450;};return a0_0x29da();}async function consultButler(_0x155de5,_0x5a9d6c,_0xf3ebd0,_0x35a33b){const _0x5b8d24=a0_0x5d7db5;if(!_0x155de5['geminiModel'])return{'approved':!![],'reason':_0x5b8d24(0x21f)};const _0x4fac00=Date[_0x5b8d24(0x1bf)]();if(decisionCache[_0x5a9d6c]&&_0x4fac00-decisionCache[_0x5a9d6c][_0x5b8d24(0x21b)]<CACHE_TTL_MS){const _0x1ac382=decisionCache[_0x5a9d6c][_0x5b8d24(0x1da)];return _0x155de5['log']['debug'](_0x5b8d24(0x1cf)+_0x5a9d6c+_0x5b8d24(0x1fe)+(_0x1ac382[_0x5b8d24(0x1e5)]?'OK':'NO')+'\x20('+_0x1ac382[_0x5b8d24(0x209)]+')'),_0x1ac382;}if(!canCallApi())return _0x155de5['log']['debug']('ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20'+_0x5a9d6c+_0x5b8d24(0x1dd)),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x3c622d=new Date()[_0x5b8d24(0x212)](),_0x1eb3ce=await getWeatherContext(_0x155de5),_0x4d7c1b=PERSONA_MAPPING[_0x155de5[_0x5b8d24(0x1ef)][_0x5b8d24(0x21e)]||_0x5b8d24(0x1e7)],_0x46582d=_0x5b8d24(0x1c8)+_0x3c622d+',\x20Wetter:\x20'+_0x1eb3ce+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x35a33b*0x64)[_0x5b8d24(0x1f6)](0x0)+_0x5b8d24(0x207)+_0x5a9d6c+_0x5b8d24(0x1ab)+_0xf3ebd0+_0x5b8d24(0x1e3)+_0x4d7c1b+_0x5b8d24(0x1ae);try{updateApiTimestamp();const _0xe0236c=await _0x155de5['geminiModel'][_0x5b8d24(0x219)](_0x46582d),_0x1f0877=_0xe0236c[_0x5b8d24(0x1af)][_0x5b8d24(0x1b9)]()[_0x5b8d24(0x1ad)](/```json|```/g,'')['trim'](),_0x270dee=JSON[_0x5b8d24(0x1d2)](_0x1f0877);return decisionCache[_0x5a9d6c]={'decision':_0x270dee,'timestamp':_0x4fac00},_0x270dee;}catch(_0x59f6f5){return _0x155de5[_0x5b8d24(0x1bb)][_0x5b8d24(0x1c5)](_0x5b8d24(0x205)+_0x59f6f5[_0x5b8d24(0x210)]),decisionCache[_0x5a9d6c]={'decision':{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'},'timestamp':_0x4fac00-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x2948b0,_0x192632=''){const _0x5b5033=a0_0x5d7db5;if(!_0x2948b0[_0x5b5033(0x1f9)])return;if(!canCallApi()){_0x2948b0['log']['debug']('ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x2948b0[_0x5b5033(0x214)][_0x5b5033(0x1b4)]===0x0)return;const _0x40f3f7=_0x2948b0['eventHistory'][_0x5b5033(0x1e6)](0x0,0xf),_0x2d761c=_0x2948b0[_0x5b5033(0x225)],_0xb3f8e4=PERSONA_MAPPING[_0x2948b0[_0x5b5033(0x1ef)][_0x5b5033(0x21e)]||_0x5b5033(0x1e7)],_0x42fc7c=_0x2948b0[_0x5b5033(0x1ef)]['livingContext']||'Keine\x20Details.';let _0x16bc8c=_0x5b5033(0x1d4);try{const _0x5ca6df=await _0x2948b0[_0x5b5033(0x20e)]('system.presenceWho');if(_0x5ca6df&&_0x5ca6df[_0x5b5033(0x1d0)])_0x16bc8c=_0x5ca6df[_0x5b5033(0x1d0)];}catch(_0x1e3c23){}let _0x1c9200=![];try{const _0x9ca805=await _0x2948b0['getStateAsync'](_0x5b5033(0x1e0));if(_0x9ca805&&_0x9ca805['val'])_0x1c9200=!![];}catch(_0x3ef8aa){}const _0x8f9fec=_0x5b5033(0x1f1)+_0xb3f8e4+_0x5b5033(0x1b1)+_0x42fc7c+'.\x20SYSTEM_MODE:\x20'+_0x2d761c+_0x5b5033(0x1dc)+_0x16bc8c+_0x5b5033(0x20f)+JSON[_0x5b5033(0x1ea)](_0x40f3f7)+_0x5b5033(0x1c3)+_0x192632+_0x5b5033(0x1ce);try{updateApiTimestamp();const _0x1a448a=await _0x2948b0[_0x5b5033(0x1f9)][_0x5b5033(0x219)](_0x8f9fec),_0x3d06e6=JSON[_0x5b5033(0x1d2)](_0x1a448a[_0x5b5033(0x1af)]['text']()[_0x5b5033(0x1ad)](/```json|```/g,'')['trim']());await _0x2948b0['setStateAsync']('analysis.lastResult',{'val':JSON[_0x5b5033(0x1ea)](_0x3d06e6),'ack':!![]});if(_0x3d06e6[_0x5b5033(0x202)])await _0x2948b0[_0x5b5033(0x1be)]('analysis.activitySummary',{'val':_0x3d06e6[_0x5b5033(0x202)],'ack':!![]});const _0x417ee1={'timestamp':Date[_0x5b5033(0x1bf)](),'id':Date[_0x5b5033(0x1bf)]()[_0x5b5033(0x21d)](),'analysis':{'activity':{'summary':_0x3d06e6[_0x5b5033(0x202)],'isAlert':_0x3d06e6[_0x5b5033(0x1ba)],'alertReason':_0x3d06e6[_0x5b5033(0x206)]},'comfort':{'automationProposal':_0x3d06e6[_0x5b5033(0x227)]}}};_0x2948b0[_0x5b5033(0x1f2)][_0x5b5033(0x1ed)](_0x417ee1);if(_0x2948b0[_0x5b5033(0x1f2)]['length']>0x32)_0x2948b0[_0x5b5033(0x1f2)][_0x5b5033(0x1d7)]();await _0x2948b0[_0x5b5033(0x1be)]('analysis.analysisHistory',{'val':JSON[_0x5b5033(0x1ea)](_0x2948b0['analysisHistory']),'ack':!![]});const _0x1078a0=_0x3d06e6[_0x5b5033(0x1ba)]||![];_0x1078a0!==_0x2948b0[_0x5b5033(0x1c1)]&&(await _0x2948b0[_0x5b5033(0x1be)](_0x5b5033(0x20b),{'val':_0x1078a0,'ack':!![]}),_0x2948b0[_0x5b5033(0x1c1)]=_0x1078a0,_0x1078a0&&(await _0x2948b0[_0x5b5033(0x1be)](_0x5b5033(0x215),{'val':_0x3d06e6[_0x5b5033(0x206)],'ack':!![]}),setup[_0x5b5033(0x204)](_0x2948b0,_0x5b5033(0x1d6)+_0x3d06e6[_0x5b5033(0x206)],![],_0x3d06e6['isEmergency'])));if(_0x3d06e6[_0x5b5033(0x227)]&&_0x3d06e6[_0x5b5033(0x227)][_0x5b5033(0x22a)]){await _0x2948b0[_0x5b5033(0x1be)](_0x5b5033(0x1c0),{'val':!![],'ack':!![]}),await _0x2948b0['setStateAsync'](_0x5b5033(0x228),{'val':_0x3d06e6[_0x5b5033(0x227)][_0x5b5033(0x1b8)],'ack':!![]}),await _0x2948b0[_0x5b5033(0x1be)]('analysis.automation.targetId',{'val':_0x3d06e6[_0x5b5033(0x227)][_0x5b5033(0x1eb)],'ack':!![]}),await _0x2948b0['setStateAsync']('analysis.automation.targetValue',{'val':JSON[_0x5b5033(0x1ea)](_0x3d06e6['automationProposal'][_0x5b5033(0x1c4)]),'ack':!![]});if(_0x1c9200)executeAutomationAction(_0x2948b0);}}catch(_0x27cd4b){_0x2948b0['log']['error'](_0x5b5033(0x1db)+_0x27cd4b[_0x5b5033(0x210)]);}}async function createDailyDigest(_0x1063a1,_0x55806d){const _0x1cf883=a0_0x5d7db5;if(!_0x1063a1[_0x1cf883(0x1b6)])return;if(!canCallApi()){await _0x1063a1['setStateAsync'](LTM_DP_STATUS,{'val':_0x1cf883(0x1e8),'ack':!![]});return;}await _0x1063a1[_0x1cf883(0x1be)](LTM_DP_STATUS,{'val':_0x1cf883(0x229),'ack':!![]});if(!_0x1063a1[_0x1cf883(0x1f9)]||_0x1063a1[_0x1cf883(0x1f8)][_0x1cf883(0x1b4)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x1063a1[_0x1cf883(0x1be)](LTM_DP_STATUS,{'val':_0x1cf883(0x1f4),'ack':!![]});return;}const _0x3107db=JSON[_0x1cf883(0x1d2)](JSON['stringify'](_0x1063a1['rawEventLog'])),_0x4e1b8c=_0x3107db[_0x1cf883(0x1b4)],_0x233bfb=_0x1cf883(0x1df)+JSON['stringify'](_0x3107db);try{updateApiTimestamp();const _0x2f5a4f=await _0x1063a1[_0x1cf883(0x1f9)]['generateContent'](_0x233bfb),_0x4a990a=JSON['parse'](_0x2f5a4f[_0x1cf883(0x1af)]['text']()['replace'](/```json|```/g,'')[_0x1cf883(0x200)]()),_0x260af9={'timestamp':new Date()[_0x1cf883(0x20a)](),'eventCount':_0x4e1b8c,'summary':_0x4a990a[_0x1cf883(0x202)]||_0x1cf883(0x21c),'activityLevel':_0x4a990a[_0x1cf883(0x1fc)]||_0x1cf883(0x1cb),'systemMode':_0x1063a1[_0x1cf883(0x225)]};_0x1063a1[_0x1cf883(0x1d1)][_0x1cf883(0x224)](_0x260af9);const _0xb5b103=_0x1063a1[_0x1cf883(0x1ef)]['ltmLtbWindowDays']||0x3c;_0x1063a1['dailyDigests'][_0x1cf883(0x1b4)]>_0xb5b103&&_0x1063a1[_0x1cf883(0x1d1)][_0x1cf883(0x1f5)](0x0,_0x1063a1[_0x1cf883(0x1d1)][_0x1cf883(0x1b4)]-_0xb5b103);await _0x1063a1[_0x1cf883(0x1be)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x1063a1[_0x1cf883(0x1d1)]),'ack':!![]}),_0x1063a1[_0x1cf883(0x1f8)]=[],await _0x1063a1[_0x1cf883(0x1be)](LTM_DP_RAW_LOG,{'val':JSON[_0x1cf883(0x1ea)](_0x1063a1[_0x1cf883(0x1f8)]),'ack':!![]}),await _0x1063a1[_0x1cf883(0x1be)](LTM_DP_STATUS,{'val':_0x1cf883(0x201),'ack':!![]});if(_0x1063a1[_0x1cf883(0x1b6)]&&_0x55806d)_0x55806d[_0x1cf883(0x22b)](_0x1063a1,_0x1cf883(0x21a),{'digest':_0x260af9});}catch(_0x42c17d){_0x1063a1[_0x1cf883(0x1bb)][_0x1cf883(0x211)](_0x42c17d[_0x1cf883(0x210)]);}}async function runBaselineDriftAnalysis(_0x3c3826){const _0x2f35b9=a0_0x5d7db5;if(!_0x3c3826[_0x2f35b9(0x1b6)]||!_0x3c3826['geminiModel'])return;if(!canCallApi())return;const _0x4bf315=_0x3c3826[_0x2f35b9(0x1ef)][_0x2f35b9(0x1c7)]||0xe;if(_0x3c3826['dailyDigests']['length']<_0x4bf315+0x7){await _0x3c3826[_0x2f35b9(0x1be)](_0x2f35b9(0x223),{'val':_0x2f35b9(0x1de),'ack':!![]});return;}const _0x31d9e3=_0x3c3826[_0x2f35b9(0x1d1)][_0x2f35b9(0x1e6)](-_0x4bf315),_0x65519a=_0x3c3826['dailyDigests'][_0x2f35b9(0x1e6)](0x0,_0x3c3826[_0x2f35b9(0x1d1)][_0x2f35b9(0x1b4)]-_0x4bf315),_0x305549='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x2f35b9(0x1ea)](_0x65519a)+_0x2f35b9(0x221)+JSON[_0x2f35b9(0x1ea)](_0x31d9e3);try{updateApiTimestamp();const _0x54e3cb=await _0x3c3826[_0x2f35b9(0x1f9)][_0x2f35b9(0x219)](_0x305549),_0x8616dd=JSON[_0x2f35b9(0x1d2)](_0x54e3cb[_0x2f35b9(0x1af)][_0x2f35b9(0x1b9)]()['replace'](/```json|```/g,'')[_0x2f35b9(0x200)]());_0x8616dd[_0x2f35b9(0x1cc)]&&(await _0x3c3826[_0x2f35b9(0x1be)](_0x2f35b9(0x223),{'val':_0x8616dd[_0x2f35b9(0x1cc)],'ack':!![]}),await _0x3c3826[_0x2f35b9(0x1be)](_0x2f35b9(0x217),{'val':_0x8616dd[_0x2f35b9(0x1f7)],'ack':!![]}),await _0x3c3826['setStateAsync'](_0x2f35b9(0x1f3),{'val':Date[_0x2f35b9(0x1bf)](),'ack':!![]}));}catch(_0x2811c9){}}async function executeAutomationAction(_0x54d026){const _0x41ee74=a0_0x5d7db5;try{const _0x23d422=await _0x54d026['getStateAsync'](_0x41ee74(0x20d)),_0x307766=await _0x54d026[_0x41ee74(0x20e)](_0x41ee74(0x1ec));if(_0x23d422&&_0x23d422[_0x41ee74(0x1d0)]&&_0x307766){const _0x3aac08=_0x23d422[_0x41ee74(0x1d0)];let _0x401349=_0x307766['val'];try{_0x401349=JSON[_0x41ee74(0x1d2)](_0x401349);}catch(_0x6ec2f0){}_0x54d026[_0x41ee74(0x1bb)]['info']('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x3aac08+_0x41ee74(0x222)+_0x401349),await _0x54d026[_0x41ee74(0x1b7)](_0x3aac08,_0x401349);}else _0x54d026[_0x41ee74(0x1bb)][_0x41ee74(0x1c5)](_0x41ee74(0x1cd));}catch(_0x2ce239){_0x54d026[_0x41ee74(0x1bb)][_0x41ee74(0x211)]('BUTLER\x20Execution\x20Error:\x20'+_0x2ce239[_0x41ee74(0x210)]);}}async function sendMorningBriefing(_0x48e1db){const _0x572c56=a0_0x5d7db5;if(!_0x48e1db['geminiModel'])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x570bb4=_0x572c56(0x20c),_0x2f71f3=await _0x48e1db['geminiModel'][_0x572c56(0x219)](_0x570bb4),_0x4cbf02=_0x2f71f3[_0x572c56(0x1af)][_0x572c56(0x1b9)]();setup['sendNotification'](_0x48e1db,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x4cbf02);}catch(_0x4955cd){_0x48e1db[_0x572c56(0x1bb)][_0x572c56(0x211)](_0x572c56(0x1bc)+_0x4955cd[_0x572c56(0x210)]);}}module[a0_0x5d7db5(0x1ac)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};