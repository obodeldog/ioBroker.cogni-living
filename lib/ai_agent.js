const a0_0x2b3f2b=a0_0x3490;(function(_0xbdc094,_0xdbd484){const _0x18996f=a0_0x3490,_0x36a49d=_0xbdc094();while(!![]){try{const _0x4808dd=-parseInt(_0x18996f(0x173))/0x1*(-parseInt(_0x18996f(0x1b9))/0x2)+-parseInt(_0x18996f(0x1e0))/0x3+-parseInt(_0x18996f(0x160))/0x4+-parseInt(_0x18996f(0x192))/0x5+parseInt(_0x18996f(0x181))/0x6+-parseInt(_0x18996f(0x1ab))/0x7+parseInt(_0x18996f(0x1a9))/0x8;if(_0x4808dd===_0xdbd484)break;else _0x36a49d['push'](_0x36a49d['shift']());}catch(_0xc4c39f){_0x36a49d['push'](_0x36a49d['shift']());}}}(a0_0x31c3,0x3c0af));const a0_0x2768a5=(function(){let _0x100025=!![];return function(_0x438012,_0x374922){const _0x5d88c2=_0x100025?function(){const _0x645625=a0_0x3490;if(_0x374922){const _0x2236c9=_0x374922[_0x645625(0x188)](_0x438012,arguments);return _0x374922=null,_0x2236c9;}}:function(){};return _0x100025=![],_0x5d88c2;};}()),a0_0x10a44a=a0_0x2768a5(this,function(){const _0x13a972=a0_0x3490;return a0_0x10a44a['toString']()[_0x13a972(0x19a)](_0x13a972(0x193))['toString']()[_0x13a972(0x1df)](a0_0x10a44a)[_0x13a972(0x19a)]('(((.+)+)+)+$');});function a0_0x31c3(){const _0x20ce26=['LTM.driftAnalysis.lastCheck','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','.Current.Temperature','22lARIML','getStateAsync','toFixed','stringify','âš ï¸\x20ALARM:\x20','rawEventLog','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','\x20=\x20','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','generic','LTM.driftAnalysis.driftDetails','ltmLtbWindowDays','warn','Unbekannt','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','push','decision','currentSystemMode','now','Briefing\x20Error:\x20','length','livingContext','analysis.automation.description','lastAlertState','send','.\x20ANWESEND:\x20','Keine\x20Details.','activityLevel','targetId','analysis.automation.targetId','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','parse','analysis.automation.autoApply','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','response','toString','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','setStateAsync','constructor','52407UiRQdM','system.presenceWho','analysis.automation.targetValue','geminiModel','detected','LTM.driftAnalysis.baselineDrift','isProVersion','pop','Success','analysis.activitySummary','900772upwboH','exports','BUTLER\x20Execution\x20Error:\x20','summary','KI-Fehler\x20(Fallback)','.Current.WeatherText','replace','aiPersona','ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','Traffic-Schutz\x20(Auto-Approved)','config','Sicherheit\x20geht\x20vor.','ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20','trim','automationProposal','splice','isEmergency','alertReason','normal','36313VOYJDu','\x20Ã¼bersprungen\x20(Auto-Approved).','\x0aAktivitÃ¤t:\x20','Wetterdaten\x20nicht\x20abrufbar','ltmStbWindowDays','toLocaleTimeString','Skipped\x20(Traffic)','Unbekannt\x20(Kein\x20Sensor)','./setup','ANALYZE_HEALTH','sendNotification','Digest','slice','description','2478090hnrokc','dailyDigests','timestamp','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','driftDetails','Â°C,\x20','info','apply','error',').\x20Sending\x20notification...','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','log','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','.\x20EMERGENCY:\x20','reason','approved','Nacht','1032630KcUPEs','(((.+)+)+)+$','Skipped\x20(No\x20AI\x20or\x20Data)','models/gemini-flash-latest','baselineDrift','.\x20SYSTEM_MODE:\x20','isAlert','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','search','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','getForeignStateAsync','ðŸ“…\x20Daily\x20Digest:\x0a','toISOString','analysisHistory','LTM.processingStatus','Tag','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.',',\x20Wetter:\x20','targetValue','LTM.rawEventLog','Gemini\x20Error:\x20','text','2616432rMVPvU',',\x20LichtverhÃ¤ltnisse:\x20','3110723UBPIqr','N/A\x20(Learning)','val','generateContent','eventHistory','%)\x20nach\x20\x22','debug','analysis.alertReason','message'];a0_0x31c3=function(){return _0x20ce26;};return a0_0x31c3();}a0_0x10a44a();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require(a0_0x2b3f2b(0x17b)),GEMINI_MODEL=a0_0x2b3f2b(0x195),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x2b3f2b(0x1a0),LTM_DP_RAW_LOG=a0_0x2b3f2b(0x1a6),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x2b3f2b(0x1c1),'senior_aal':a0_0x2b3f2b(0x199),'family':'Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','single_comfort':a0_0x2b3f2b(0x1a3),'security':a0_0x2b3f2b(0x16b),'energy_saver':a0_0x2b3f2b(0x1b5)};function canCallApi(){const _0xe66f9b=Date['now']();return _0xe66f9b-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x31a23c){const _0x40fc24=a0_0x2b3f2b;if(!_0x31a23c[_0x40fc24(0x16a)]['useWeather']||!_0x31a23c[_0x40fc24(0x16a)]['weatherInstance'])return _0x40fc24(0x17a);try{const _0x225e7a=_0x31a23c[_0x40fc24(0x16a)]['weatherInstance'];let _0x416f3e=await _0x31a23c['getForeignStateAsync'](_0x225e7a+_0x40fc24(0x1b8));if(!_0x416f3e)_0x416f3e=await _0x31a23c[_0x40fc24(0x19c)](_0x225e7a+'.forecast.current.temperature');let _0x1b03e7=await _0x31a23c['getForeignStateAsync'](_0x225e7a+_0x40fc24(0x165));if(!_0x1b03e7)_0x1b03e7=await _0x31a23c[_0x40fc24(0x19c)](_0x225e7a+'.forecast.current.state');let _0x372a27=_0x40fc24(0x1c6);const _0x2576a3=await _0x31a23c['getForeignStateAsync'](_0x225e7a+'.Current.IsNight');if(_0x2576a3)_0x372a27=_0x2576a3[_0x40fc24(0x1ad)]?_0x40fc24(0x191):_0x40fc24(0x1a1);if(_0x416f3e&&_0x1b03e7)return _0x416f3e[_0x40fc24(0x1ad)]+_0x40fc24(0x186)+_0x1b03e7[_0x40fc24(0x1ad)]+_0x40fc24(0x1aa)+_0x372a27;}catch(_0x29a8ed){}return _0x40fc24(0x176);}function a0_0x3490(_0x2c77cd,_0x3fc10f){const _0x38aca7=a0_0x31c3();return a0_0x3490=function(_0x10a44a,_0x2768a5){_0x10a44a=_0x10a44a-0x158;let _0x31c394=_0x38aca7[_0x10a44a];return _0x31c394;},a0_0x3490(_0x2c77cd,_0x3fc10f);}async function consultButler(_0x3d5ffa,_0x1adbc4,_0x55b29d,_0x14005d){const _0x4fa98e=a0_0x2b3f2b;if(!_0x3d5ffa['geminiModel'])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x3a0ef4=Date[_0x4fa98e(0x1cb)]();if(decisionCache[_0x1adbc4]&&_0x3a0ef4-decisionCache[_0x1adbc4][_0x4fa98e(0x183)]<CACHE_TTL_MS){const _0x223bfe=decisionCache[_0x1adbc4][_0x4fa98e(0x1c9)];return _0x3d5ffa[_0x4fa98e(0x18c)][_0x4fa98e(0x1b1)](_0x4fa98e(0x184)+_0x1adbc4+'\x20->\x20'+(_0x223bfe[_0x4fa98e(0x190)]?'OK':'NO')+'\x20('+_0x223bfe[_0x4fa98e(0x18f)]+')'),_0x223bfe;}if(!canCallApi())return _0x3d5ffa[_0x4fa98e(0x18c)][_0x4fa98e(0x1b1)](_0x4fa98e(0x1c7)+_0x1adbc4+_0x4fa98e(0x174)),{'approved':!![],'reason':_0x4fa98e(0x169)};const _0x113a1e=new Date()[_0x4fa98e(0x178)](),_0x5e2041=await getWeatherContext(_0x3d5ffa),_0x17fb47=PERSONA_MAPPING[_0x3d5ffa[_0x4fa98e(0x16a)]['aiPersona']||_0x4fa98e(0x1c2)],_0x3f7521=_0x4fa98e(0x1a2)+_0x113a1e+_0x4fa98e(0x1a4)+_0x5e2041+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x14005d*0x64)[_0x4fa98e(0x1bb)](0x0)+_0x4fa98e(0x1b0)+_0x1adbc4+_0x4fa98e(0x1dd)+_0x55b29d+_0x4fa98e(0x18d)+_0x17fb47+_0x4fa98e(0x1da);try{updateApiTimestamp();const _0x30bead=await _0x3d5ffa[_0x4fa98e(0x159)][_0x4fa98e(0x1ae)](_0x3f7521),_0xeefb8d=_0x30bead[_0x4fa98e(0x1db)][_0x4fa98e(0x1a8)]()['replace'](/```json|```/g,'')[_0x4fa98e(0x16d)](),_0x34fc10=JSON['parse'](_0xeefb8d);return decisionCache[_0x1adbc4]={'decision':_0x34fc10,'timestamp':_0x3a0ef4},_0x34fc10;}catch(_0x3147f8){return _0x3d5ffa[_0x4fa98e(0x18c)][_0x4fa98e(0x1c5)](_0x4fa98e(0x19b)+_0x3147f8[_0x4fa98e(0x1b3)]),decisionCache[_0x1adbc4]={'decision':{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'},'timestamp':_0x3a0ef4-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x4fa98e(0x164)};}}async function runGeminiAnalysis(_0x2492c7,_0x973552=''){const _0xa9cb47=a0_0x2b3f2b;if(!_0x2492c7[_0xa9cb47(0x159)])return;if(!canCallApi()){_0x2492c7[_0xa9cb47(0x18c)][_0xa9cb47(0x1b1)](_0xa9cb47(0x1bf));return;}if(_0x2492c7[_0xa9cb47(0x1af)][_0xa9cb47(0x1cd)]===0x0)return;const _0x2ed1d6=_0x2492c7[_0xa9cb47(0x1af)][_0xa9cb47(0x17f)](0x0,0xf),_0x367916=_0x2492c7['currentSystemMode'],_0x4c9813=PERSONA_MAPPING[_0x2492c7[_0xa9cb47(0x16a)][_0xa9cb47(0x167)]||'generic'],_0x9b9742=_0x2492c7['config'][_0xa9cb47(0x1ce)]||_0xa9cb47(0x1d3);let _0x219d05='Unbekannt';try{const _0x1750e0=await _0x2492c7[_0xa9cb47(0x1ba)](_0xa9cb47(0x1e1));if(_0x1750e0&&_0x1750e0[_0xa9cb47(0x1ad)])_0x219d05=_0x1750e0[_0xa9cb47(0x1ad)];}catch(_0x5498d3){}let _0x2ad0ce=![];try{const _0x460d73=await _0x2492c7[_0xa9cb47(0x1ba)](_0xa9cb47(0x1d9));if(_0x460d73&&_0x460d73[_0xa9cb47(0x1ad)])_0x2ad0ce=!![];}catch(_0x3598b8){}const _0x20c34c=_0xa9cb47(0x1d7)+_0x4c9813+'.\x20KONTEXT:\x20'+_0x9b9742+_0xa9cb47(0x197)+_0x367916+_0xa9cb47(0x1d2)+_0x219d05+'.\x20EVENTS:\x20'+JSON[_0xa9cb47(0x1bc)](_0x2ed1d6)+_0xa9cb47(0x18e)+_0x973552+_0xa9cb47(0x18b);try{updateApiTimestamp();const _0x4291f1=await _0x2492c7['geminiModel']['generateContent'](_0x20c34c),_0x487e3c=JSON[_0xa9cb47(0x1d8)](_0x4291f1['response'][_0xa9cb47(0x1a8)]()['replace'](/```json|```/g,'')[_0xa9cb47(0x16d)]());await _0x2492c7['setStateAsync']('analysis.lastResult',{'val':JSON['stringify'](_0x487e3c),'ack':!![]});if(_0x487e3c[_0xa9cb47(0x163)])await _0x2492c7[_0xa9cb47(0x1de)](_0xa9cb47(0x15f),{'val':_0x487e3c[_0xa9cb47(0x163)],'ack':!![]});const _0x3cd666={'timestamp':Date[_0xa9cb47(0x1cb)](),'id':Date[_0xa9cb47(0x1cb)]()[_0xa9cb47(0x1dc)](),'analysis':{'activity':{'summary':_0x487e3c[_0xa9cb47(0x163)],'isAlert':_0x487e3c[_0xa9cb47(0x198)],'alertReason':_0x487e3c[_0xa9cb47(0x171)]},'comfort':{'automationProposal':_0x487e3c[_0xa9cb47(0x16e)]}}};_0x2492c7[_0xa9cb47(0x19f)]['unshift'](_0x3cd666);if(_0x2492c7[_0xa9cb47(0x19f)][_0xa9cb47(0x1cd)]>0x32)_0x2492c7[_0xa9cb47(0x19f)][_0xa9cb47(0x15d)]();await _0x2492c7[_0xa9cb47(0x1de)]('analysis.analysisHistory',{'val':JSON[_0xa9cb47(0x1bc)](_0x2492c7[_0xa9cb47(0x19f)]),'ack':!![]});const _0x566649=_0x487e3c[_0xa9cb47(0x198)]||![];_0x566649!==_0x2492c7['lastAlertState']&&(await _0x2492c7[_0xa9cb47(0x1de)]('analysis.isAlert',{'val':_0x566649,'ack':!![]}),_0x2492c7[_0xa9cb47(0x1d0)]=_0x566649,_0x566649&&(await _0x2492c7['setStateAsync'](_0xa9cb47(0x1b2),{'val':_0x487e3c['alertReason'],'ack':!![]}),setup['sendNotification'](_0x2492c7,_0xa9cb47(0x1bd)+_0x487e3c[_0xa9cb47(0x171)],![],_0x487e3c[_0xa9cb47(0x170)])));if(_0x487e3c['automationProposal']&&_0x487e3c[_0xa9cb47(0x16e)][_0xa9cb47(0x15a)]){await _0x2492c7['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x2492c7[_0xa9cb47(0x1de)](_0xa9cb47(0x1cf),{'val':_0x487e3c[_0xa9cb47(0x16e)][_0xa9cb47(0x180)],'ack':!![]}),await _0x2492c7[_0xa9cb47(0x1de)](_0xa9cb47(0x1d6),{'val':_0x487e3c[_0xa9cb47(0x16e)][_0xa9cb47(0x1d5)],'ack':!![]}),await _0x2492c7[_0xa9cb47(0x1de)](_0xa9cb47(0x158),{'val':JSON[_0xa9cb47(0x1bc)](_0x487e3c['automationProposal'][_0xa9cb47(0x1a5)]),'ack':!![]});if(_0x2ad0ce)executeAutomationAction(_0x2492c7);}}catch(_0x2ba45f){_0x2492c7[_0xa9cb47(0x18c)][_0xa9cb47(0x189)](_0xa9cb47(0x1a7)+_0x2ba45f[_0xa9cb47(0x1b3)]);}}async function createDailyDigest(_0x480d0d,_0x3bd7ea){const _0x50bff5=a0_0x2b3f2b;if(!_0x480d0d[_0x50bff5(0x15c)])return;if(!canCallApi()){await _0x480d0d[_0x50bff5(0x1de)](LTM_DP_STATUS,{'val':_0x50bff5(0x179),'ack':!![]});return;}await _0x480d0d[_0x50bff5(0x1de)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x480d0d[_0x50bff5(0x159)]||_0x480d0d['rawEventLog'][_0x50bff5(0x1cd)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x480d0d[_0x50bff5(0x1de)](LTM_DP_STATUS,{'val':_0x50bff5(0x194),'ack':!![]});return;}const _0x119bb4=JSON[_0x50bff5(0x1d8)](JSON['stringify'](_0x480d0d['rawEventLog'])),_0x400ab0=_0x119bb4['length'],_0x1e93a5='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x50bff5(0x1bc)](_0x119bb4);try{updateApiTimestamp();const _0x4d7f27=await _0x480d0d['geminiModel']['generateContent'](_0x1e93a5),_0x2fead1=JSON['parse'](_0x4d7f27['response'][_0x50bff5(0x1a8)]()['replace'](/```json|```/g,'')['trim']()),_0x3d2970={'timestamp':new Date()[_0x50bff5(0x19e)](),'eventCount':_0x400ab0,'summary':_0x2fead1['summary']||_0x50bff5(0x17e),'activityLevel':_0x2fead1['activityLevel']||_0x50bff5(0x172),'systemMode':_0x480d0d[_0x50bff5(0x1ca)]};_0x480d0d['dailyDigests'][_0x50bff5(0x1c8)](_0x3d2970);const _0x435c89=_0x480d0d[_0x50bff5(0x16a)][_0x50bff5(0x1c4)]||0x3c;_0x480d0d['dailyDigests'][_0x50bff5(0x1cd)]>_0x435c89&&_0x480d0d[_0x50bff5(0x182)][_0x50bff5(0x16f)](0x0,_0x480d0d[_0x50bff5(0x182)][_0x50bff5(0x1cd)]-_0x435c89);await _0x480d0d[_0x50bff5(0x1de)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x50bff5(0x1bc)](_0x480d0d[_0x50bff5(0x182)]),'ack':!![]}),_0x480d0d[_0x50bff5(0x1be)]=[],await _0x480d0d[_0x50bff5(0x1de)](LTM_DP_RAW_LOG,{'val':JSON[_0x50bff5(0x1bc)](_0x480d0d[_0x50bff5(0x1be)]),'ack':!![]}),await _0x480d0d[_0x50bff5(0x1de)](LTM_DP_STATUS,{'val':_0x50bff5(0x15e),'ack':!![]});const _0x1edb4c=_0x50bff5(0x19d)+_0x2fead1['summary']+_0x50bff5(0x175)+_0x2fead1[_0x50bff5(0x1d4)];setup['sendNotification'](_0x480d0d,_0x1edb4c,![],![]);if(_0x480d0d[_0x50bff5(0x15c)]&&_0x3bd7ea)_0x3bd7ea[_0x50bff5(0x1d1)](_0x480d0d,_0x50bff5(0x17c),{'digest':_0x3d2970});}catch(_0x49aa6b){_0x480d0d[_0x50bff5(0x18c)][_0x50bff5(0x189)](_0x49aa6b[_0x50bff5(0x1b3)]);}}async function runBaselineDriftAnalysis(_0x2052fd){const _0x104b23=a0_0x2b3f2b;if(!_0x2052fd[_0x104b23(0x15c)]||!_0x2052fd[_0x104b23(0x159)])return;if(!canCallApi())return;const _0x57a9c3=_0x2052fd[_0x104b23(0x16a)][_0x104b23(0x177)]||0xe;if(_0x2052fd[_0x104b23(0x182)]['length']<_0x57a9c3+0x7){await _0x2052fd[_0x104b23(0x1de)](_0x104b23(0x15b),{'val':_0x104b23(0x1ac),'ack':!![]});return;}const _0x46e8af=_0x2052fd[_0x104b23(0x182)][_0x104b23(0x17f)](-_0x57a9c3),_0x5abc91=_0x2052fd[_0x104b23(0x182)][_0x104b23(0x17f)](0x0,_0x2052fd[_0x104b23(0x182)][_0x104b23(0x1cd)]-_0x57a9c3),_0x4b47d7='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON['stringify'](_0x5abc91)+'\x0aSTB:\x20'+JSON[_0x104b23(0x1bc)](_0x46e8af);try{updateApiTimestamp();const _0x2c5c90=await _0x2052fd[_0x104b23(0x159)][_0x104b23(0x1ae)](_0x4b47d7),_0x2c9702=JSON[_0x104b23(0x1d8)](_0x2c5c90[_0x104b23(0x1db)][_0x104b23(0x1a8)]()[_0x104b23(0x166)](/```json|```/g,'')[_0x104b23(0x16d)]());_0x2c9702[_0x104b23(0x196)]&&(await _0x2052fd[_0x104b23(0x1de)]('LTM.driftAnalysis.baselineDrift',{'val':_0x2c9702[_0x104b23(0x196)],'ack':!![]}),await _0x2052fd[_0x104b23(0x1de)](_0x104b23(0x1c3),{'val':_0x2c9702[_0x104b23(0x185)],'ack':!![]}),await _0x2052fd[_0x104b23(0x1de)](_0x104b23(0x1b4),{'val':Date[_0x104b23(0x1cb)](),'ack':!![]}));}catch(_0x4aac02){}}async function executeAutomationAction(_0x356fc2){const _0x44eefb=a0_0x2b3f2b;try{const _0x30dfe5=await _0x356fc2['getStateAsync'](_0x44eefb(0x1d6)),_0x476099=await _0x356fc2['getStateAsync'](_0x44eefb(0x158));if(_0x30dfe5&&_0x30dfe5[_0x44eefb(0x1ad)]&&_0x476099){const _0x3fd9db=_0x30dfe5[_0x44eefb(0x1ad)];let _0x204819=_0x476099[_0x44eefb(0x1ad)];try{_0x204819=JSON[_0x44eefb(0x1d8)](_0x204819);}catch(_0x3fb5aa){}_0x356fc2[_0x44eefb(0x18c)][_0x44eefb(0x187)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x3fd9db+_0x44eefb(0x1c0)+_0x204819),await _0x356fc2['setForeignStateAsync'](_0x3fd9db,_0x204819);}else _0x356fc2[_0x44eefb(0x18c)][_0x44eefb(0x1c5)](_0x44eefb(0x1b7));}catch(_0x1178a8){_0x356fc2[_0x44eefb(0x18c)][_0x44eefb(0x189)](_0x44eefb(0x162)+_0x1178a8[_0x44eefb(0x1b3)]);}}async function sendMorningBriefing(_0x4c899d){const _0x10bc67=a0_0x2b3f2b;if(!_0x4c899d[_0x10bc67(0x159)]){_0x4c899d[_0x10bc67(0x18c)][_0x10bc67(0x1c5)]('ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.');return;}_0x4c899d[_0x10bc67(0x18c)][_0x10bc67(0x187)](_0x10bc67(0x168));try{updateApiTimestamp();const _0x40f695=_0x10bc67(0x1b6),_0x3173b2=await _0x4c899d[_0x10bc67(0x159)][_0x10bc67(0x1ae)](_0x40f695),_0x1ba369=_0x3173b2[_0x10bc67(0x1db)]['text']();_0x4c899d[_0x10bc67(0x18c)][_0x10bc67(0x187)](_0x10bc67(0x16c)+_0x1ba369[_0x10bc67(0x1cd)]+_0x10bc67(0x18a)),setup[_0x10bc67(0x17d)](_0x4c899d,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x1ba369);}catch(_0x19a1fd){_0x4c899d[_0x10bc67(0x18c)]['error'](_0x10bc67(0x1cc)+_0x19a1fd[_0x10bc67(0x1b3)]);}}module[a0_0x2b3f2b(0x161)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};