const a0_0x404771=a0_0x2996;(function(_0x24e587,_0x4c03b9){const _0x3da3d3=a0_0x2996,_0x59081e=_0x24e587();while(!![]){try{const _0x4a0478=parseInt(_0x3da3d3(0x1b2))/0x1*(parseInt(_0x3da3d3(0x1aa))/0x2)+-parseInt(_0x3da3d3(0x16e))/0x3*(-parseInt(_0x3da3d3(0x16d))/0x4)+parseInt(_0x3da3d3(0x16f))/0x5+parseInt(_0x3da3d3(0x170))/0x6+parseInt(_0x3da3d3(0x189))/0x7+parseInt(_0x3da3d3(0x184))/0x8*(parseInt(_0x3da3d3(0x165))/0x9)+-parseInt(_0x3da3d3(0x142))/0xa;if(_0x4a0478===_0x4c03b9)break;else _0x59081e['push'](_0x59081e['shift']());}catch(_0x4ae386){_0x59081e['push'](_0x59081e['shift']());}}}(a0_0x1944,0x8dc8c));const a0_0x58450b=(function(){let _0x6ed642=!![];return function(_0x1cc548,_0x107eca){const _0x134172=_0x6ed642?function(){const _0x32e56d=a0_0x2996;if(_0x107eca){const _0x3dca5e=_0x107eca[_0x32e56d(0x14b)](_0x1cc548,arguments);return _0x107eca=null,_0x3dca5e;}}:function(){};return _0x6ed642=![],_0x134172;};}()),a0_0x35f5df=a0_0x58450b(this,function(){const _0x5df24b=a0_0x2996;return a0_0x35f5df[_0x5df24b(0x1a7)]()[_0x5df24b(0x1a2)](_0x5df24b(0x166))['toString']()[_0x5df24b(0x149)](a0_0x35f5df)['search'](_0x5df24b(0x166));});a0_0x35f5df();'use strict';const {GoogleGenerativeAI}=require(a0_0x404771(0x15c)),setup=require('./setup'),GEMINI_MODEL=a0_0x404771(0x1af),LTM_DP_DAILY_DIGESTS=a0_0x404771(0x15d),LTM_DP_STATUS=a0_0x404771(0x1a1),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x404771(0x1ae),'senior_aal':a0_0x404771(0x1ac),'family':a0_0x404771(0x1bd),'single_comfort':a0_0x404771(0x144),'security':a0_0x404771(0x188),'energy_saver':a0_0x404771(0x1a6)};function canCallApi(){const _0x58f496=a0_0x404771,_0x3e5436=Date[_0x58f496(0x169)]();return _0x3e5436-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x768ba3=a0_0x404771;lastGlobalApiCall=Date[_0x768ba3(0x169)]();}function a0_0x2996(_0x1aa6f1,_0x3b5fac){const _0x42f56f=a0_0x1944();return a0_0x2996=function(_0x35f5df,_0x58450b){_0x35f5df=_0x35f5df-0x140;let _0x19448b=_0x42f56f[_0x35f5df];return _0x19448b;},a0_0x2996(_0x1aa6f1,_0x3b5fac);}function a0_0x1944(){const _0x2acba5=['search','baselineDrift','.Current.Temperature','sendNotification','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','toString','ltmStbWindowDays','üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','2428HbydSt','Nacht','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','analysis.analysisHistory','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','models/gemini-flash-latest','approved','parse','453BeVeSM','.\x20EVENTS:\x20','push','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','analysis.automation.targetId','length','KI\x20offline\x20(Fallback)','dailyDigests','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','error','splice','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.',',\x20Wetter:\x20','trim','useWeather','description','N/A\x20(Learning)','detected','livingContext','getStateAsync','Unbekannt','generateContent','%)\x20nach\x20\x22','¬∞C,\x20','30262700yzfAbe','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','LTM.driftAnalysis.lastCheck','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','setForeignStateAsync','slice','constructor','stringify','apply','log','normal','Briefing\x20Error:\x20','ANALYZE_HEALTH','reason','analysis.automation.patternDetected','alertReason','message','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','.\x20KONTEXT:\x20','exports','automationProposal','lastAlertState','summary','val','timestamp','@google/generative-ai','LTM.dailyDigests','rawEventLog','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','KI-Fehler\x20(Fallback)','response','setStateAsync','analysis.activitySummary','8271icXdZm','(((.+)+)+)+$','targetId','driftDetails','now','warn','.\x20EMERGENCY:\x20','analysis.automation.targetValue','2307944wRPhqz','3KpoAJT','2657670ftIpfg','5310774PCfjWz','\x0aSTB:\x20','system.presenceWho','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','geminiModel','analysisHistory','\x20=\x20','text','isProVersion','unshift','isAlert','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','Keine\x20Details.','info','\x20->\x20','replace','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','eventHistory','Gemini\x20Error:\x20','Unbekannt\x20(Kein\x20Sensor)','2104vFsBbr','decision','generic','\x0aAktivit√§t:\x20','Sicherheit\x20geht\x20vor.','5752110iIdeUa','activityLevel','.\x20SYSTEM_MODE:\x20','config','Digest','ü§ñ\x20Butler\x20Brain\x20Error:\x20',').\x20Sending\x20notification...','analysis.isAlert','Started...','debug','getForeignStateAsync','üåÖ\x20Briefing\x20generated\x20(Length:\x20','isEmergency','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','targetValue','üìÖ\x20Daily\x20Digest:\x0a','currentSystemMode','analysis.alertReason','Success',',\x20Lichtverh√§ltnisse:\x20','weatherInstance','aiPersona','.Current.IsNight','LTM.driftAnalysis.baselineDrift','LTM.processingStatus'];a0_0x1944=function(){return _0x2acba5;};return a0_0x1944();}async function getWeatherContext(_0x4c1314){const _0x19a306=a0_0x404771;if(!_0x4c1314[_0x19a306(0x18c)][_0x19a306(0x1c0)]||!_0x4c1314['config'][_0x19a306(0x19d)])return _0x19a306(0x183);try{const _0x1048f0=_0x4c1314[_0x19a306(0x18c)][_0x19a306(0x19d)];let _0x2e44eb=await _0x4c1314[_0x19a306(0x193)](_0x1048f0+_0x19a306(0x1a4));if(!_0x2e44eb)_0x2e44eb=await _0x4c1314['getForeignStateAsync'](_0x1048f0+'.forecast.current.temperature');let _0x23c79d=await _0x4c1314[_0x19a306(0x193)](_0x1048f0+'.Current.WeatherText');if(!_0x23c79d)_0x23c79d=await _0x4c1314[_0x19a306(0x193)](_0x1048f0+'.forecast.current.state');let _0x249f89=_0x19a306(0x1c6);const _0xf5d53e=await _0x4c1314[_0x19a306(0x193)](_0x1048f0+_0x19a306(0x19f));if(_0xf5d53e)_0x249f89=_0xf5d53e[_0x19a306(0x15a)]?_0x19a306(0x1ab):'Tag';if(_0x2e44eb&&_0x23c79d)return _0x2e44eb[_0x19a306(0x15a)]+_0x19a306(0x141)+_0x23c79d[_0x19a306(0x15a)]+_0x19a306(0x19c)+_0x249f89;}catch(_0x246411){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x79f28,_0x367935,_0x589788,_0x34bbbc){const _0x210846=a0_0x404771;if(!_0x79f28[_0x210846(0x174)])return{'approved':!![],'reason':_0x210846(0x1b8)};const _0x386822=Date[_0x210846(0x169)]();if(decisionCache[_0x367935]&&_0x386822-decisionCache[_0x367935][_0x210846(0x15b)]<CACHE_TTL_MS){const _0x419089=decisionCache[_0x367935][_0x210846(0x185)];return _0x79f28['log']['debug'](_0x210846(0x143)+_0x367935+_0x210846(0x17e)+(_0x419089[_0x210846(0x1b0)]?'OK':'NO')+'\x20('+_0x419089[_0x210846(0x150)]+')'),_0x419089;}if(!canCallApi())return _0x79f28[_0x210846(0x14c)][_0x210846(0x192)](_0x210846(0x154)+_0x367935+'\x20√ºbersprungen\x20(Auto-Approved).'),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x37e9b4=new Date()['toLocaleTimeString'](),_0x55234a=await getWeatherContext(_0x79f28),_0x1b4f9c=PERSONA_MAPPING[_0x79f28[_0x210846(0x18c)][_0x210846(0x19e)]||'generic'],_0x42448a=_0x210846(0x15f)+_0x37e9b4+_0x210846(0x1be)+_0x55234a+_0x210846(0x160)+(_0x34bbbc*0x64)['toFixed'](0x0)+_0x210846(0x140)+_0x367935+'\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22'+_0x589788+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x1b4f9c+_0x210846(0x146);try{updateApiTimestamp();const _0x1c9107=await _0x79f28[_0x210846(0x174)][_0x210846(0x1c7)](_0x42448a),_0x42f45a=_0x1c9107[_0x210846(0x162)][_0x210846(0x177)]()[_0x210846(0x17f)](/```json|```/g,'')[_0x210846(0x1bf)](),_0x2fb9c5=JSON[_0x210846(0x1b1)](_0x42f45a);return decisionCache[_0x367935]={'decision':_0x2fb9c5,'timestamp':_0x386822},_0x2fb9c5;}catch(_0x40ec1d){return _0x79f28['log'][_0x210846(0x16a)](_0x210846(0x18e)+_0x40ec1d['message']),decisionCache[_0x367935]={'decision':{'approved':!![],'reason':_0x210846(0x161)},'timestamp':_0x386822-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x210846(0x161)};}}async function runGeminiAnalysis(_0x4c6094,_0x2e5ec8=''){const _0x20b16a=a0_0x404771;if(!_0x4c6094[_0x20b16a(0x174)])return;if(!canCallApi()){_0x4c6094[_0x20b16a(0x14c)]['debug'](_0x20b16a(0x180));return;}if(_0x4c6094[_0x20b16a(0x181)][_0x20b16a(0x1b7)]===0x0)return;const _0x3ce3c8=_0x4c6094[_0x20b16a(0x181)][_0x20b16a(0x148)](0x0,0xf),_0x43d813=_0x4c6094[_0x20b16a(0x199)],_0x2d50ac=PERSONA_MAPPING[_0x4c6094[_0x20b16a(0x18c)][_0x20b16a(0x19e)]||_0x20b16a(0x186)],_0x5e60a2=_0x4c6094[_0x20b16a(0x18c)][_0x20b16a(0x1c4)]||_0x20b16a(0x17c);let _0x296ed9='Unbekannt';try{const _0x5f2e3e=await _0x4c6094[_0x20b16a(0x1c5)](_0x20b16a(0x172));if(_0x5f2e3e&&_0x5f2e3e[_0x20b16a(0x15a)])_0x296ed9=_0x5f2e3e[_0x20b16a(0x15a)];}catch(_0x185fd1){}let _0x412760=![];try{const _0x57cb98=await _0x4c6094[_0x20b16a(0x1c5)]('analysis.automation.autoApply');if(_0x57cb98&&_0x57cb98['val'])_0x412760=!![];}catch(_0x407ba1){}const _0x1df659=_0x20b16a(0x1b5)+_0x2d50ac+_0x20b16a(0x155)+_0x5e60a2+_0x20b16a(0x18b)+_0x43d813+'.\x20ANWESEND:\x20'+_0x296ed9+_0x20b16a(0x1b3)+JSON[_0x20b16a(0x14a)](_0x3ce3c8)+_0x20b16a(0x16b)+_0x2e5ec8+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x1d3b53=await _0x4c6094[_0x20b16a(0x174)][_0x20b16a(0x1c7)](_0x1df659),_0x1c415f=JSON['parse'](_0x1d3b53[_0x20b16a(0x162)][_0x20b16a(0x177)]()[_0x20b16a(0x17f)](/```json|```/g,'')[_0x20b16a(0x1bf)]());await _0x4c6094[_0x20b16a(0x163)]('analysis.lastResult',{'val':JSON[_0x20b16a(0x14a)](_0x1c415f),'ack':!![]});if(_0x1c415f[_0x20b16a(0x159)])await _0x4c6094[_0x20b16a(0x163)](_0x20b16a(0x164),{'val':_0x1c415f[_0x20b16a(0x159)],'ack':!![]});const _0x411fc8={'timestamp':Date['now'](),'id':Date['now']()[_0x20b16a(0x1a7)](),'analysis':{'activity':{'summary':_0x1c415f[_0x20b16a(0x159)],'isAlert':_0x1c415f[_0x20b16a(0x17a)],'alertReason':_0x1c415f[_0x20b16a(0x152)]},'comfort':{'automationProposal':_0x1c415f[_0x20b16a(0x157)]}}};_0x4c6094['analysisHistory'][_0x20b16a(0x179)](_0x411fc8);if(_0x4c6094[_0x20b16a(0x175)][_0x20b16a(0x1b7)]>0x32)_0x4c6094[_0x20b16a(0x175)]['pop']();await _0x4c6094['setStateAsync'](_0x20b16a(0x1ad),{'val':JSON[_0x20b16a(0x14a)](_0x4c6094[_0x20b16a(0x175)]),'ack':!![]});const _0x348172=_0x1c415f[_0x20b16a(0x17a)]||![];_0x348172!==_0x4c6094[_0x20b16a(0x158)]&&(await _0x4c6094['setStateAsync'](_0x20b16a(0x190),{'val':_0x348172,'ack':!![]}),_0x4c6094[_0x20b16a(0x158)]=_0x348172,_0x348172&&(await _0x4c6094['setStateAsync'](_0x20b16a(0x19a),{'val':_0x1c415f[_0x20b16a(0x152)],'ack':!![]}),setup[_0x20b16a(0x1a5)](_0x4c6094,'‚ö†Ô∏è\x20ALARM:\x20'+_0x1c415f['alertReason'],![],_0x1c415f[_0x20b16a(0x195)])));if(_0x1c415f['automationProposal']&&_0x1c415f[_0x20b16a(0x157)][_0x20b16a(0x1c3)]){await _0x4c6094[_0x20b16a(0x163)](_0x20b16a(0x151),{'val':!![],'ack':!![]}),await _0x4c6094[_0x20b16a(0x163)]('analysis.automation.description',{'val':_0x1c415f[_0x20b16a(0x157)][_0x20b16a(0x1c1)],'ack':!![]}),await _0x4c6094[_0x20b16a(0x163)](_0x20b16a(0x1b6),{'val':_0x1c415f[_0x20b16a(0x157)][_0x20b16a(0x167)],'ack':!![]}),await _0x4c6094[_0x20b16a(0x163)](_0x20b16a(0x16c),{'val':JSON[_0x20b16a(0x14a)](_0x1c415f[_0x20b16a(0x157)][_0x20b16a(0x197)]),'ack':!![]});if(_0x412760)executeAutomationAction(_0x4c6094);}}catch(_0xfd1ba6){_0x4c6094['log'][_0x20b16a(0x1bb)](_0x20b16a(0x182)+_0xfd1ba6[_0x20b16a(0x153)]);}}async function createDailyDigest(_0x598781,_0x4ff50d){const _0x73585c=a0_0x404771;if(!_0x598781[_0x73585c(0x178)])return;if(!canCallApi()){await _0x598781[_0x73585c(0x163)](LTM_DP_STATUS,{'val':'Skipped\x20(Traffic)','ack':!![]});return;}await _0x598781[_0x73585c(0x163)](LTM_DP_STATUS,{'val':_0x73585c(0x191),'ack':!![]});if(!_0x598781['geminiModel']||_0x598781[_0x73585c(0x15e)][_0x73585c(0x1b7)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x598781[_0x73585c(0x163)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x58d01b=JSON[_0x73585c(0x1b1)](JSON[_0x73585c(0x14a)](_0x598781[_0x73585c(0x15e)])),_0x43ef99=_0x58d01b['length'],_0x13d568=_0x73585c(0x173)+JSON[_0x73585c(0x14a)](_0x58d01b);try{updateApiTimestamp();const _0x23f9c=await _0x598781[_0x73585c(0x174)]['generateContent'](_0x13d568),_0x4ce332=JSON[_0x73585c(0x1b1)](_0x23f9c[_0x73585c(0x162)][_0x73585c(0x177)]()[_0x73585c(0x17f)](/```json|```/g,'')['trim']()),_0x25caaf={'timestamp':new Date()['toISOString'](),'eventCount':_0x43ef99,'summary':_0x4ce332['summary']||_0x73585c(0x18d),'activityLevel':_0x4ce332[_0x73585c(0x18a)]||_0x73585c(0x14d),'systemMode':_0x598781['currentSystemMode']};_0x598781[_0x73585c(0x1b9)][_0x73585c(0x1b4)](_0x25caaf);const _0x39fda5=_0x598781[_0x73585c(0x18c)]['ltmLtbWindowDays']||0x3c;_0x598781[_0x73585c(0x1b9)]['length']>_0x39fda5&&_0x598781[_0x73585c(0x1b9)][_0x73585c(0x1bc)](0x0,_0x598781['dailyDigests'][_0x73585c(0x1b7)]-_0x39fda5);await _0x598781[_0x73585c(0x163)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x73585c(0x14a)](_0x598781[_0x73585c(0x1b9)]),'ack':!![]}),_0x598781[_0x73585c(0x15e)]=[],await _0x598781[_0x73585c(0x163)](LTM_DP_RAW_LOG,{'val':JSON[_0x73585c(0x14a)](_0x598781['rawEventLog']),'ack':!![]}),await _0x598781[_0x73585c(0x163)](LTM_DP_STATUS,{'val':_0x73585c(0x19b),'ack':!![]});const _0xddfd1e=_0x73585c(0x198)+_0x4ce332[_0x73585c(0x159)]+_0x73585c(0x187)+_0x4ce332[_0x73585c(0x18a)];setup[_0x73585c(0x1a5)](_0x598781,_0xddfd1e,![],![]);if(_0x598781[_0x73585c(0x178)]&&_0x4ff50d)_0x4ff50d['send'](_0x598781,_0x73585c(0x14f),{'digest':_0x25caaf});}catch(_0xbf031f){_0x598781[_0x73585c(0x14c)][_0x73585c(0x1bb)](_0xbf031f[_0x73585c(0x153)]);}}async function runBaselineDriftAnalysis(_0x3208a0){const _0x2693bc=a0_0x404771;if(!_0x3208a0['isProVersion']||!_0x3208a0[_0x2693bc(0x174)])return;if(!canCallApi())return;const _0x3e7dc3=_0x3208a0[_0x2693bc(0x18c)][_0x2693bc(0x1a8)]||0xe;if(_0x3208a0[_0x2693bc(0x1b9)][_0x2693bc(0x1b7)]<_0x3e7dc3+0x7){await _0x3208a0['setStateAsync'](_0x2693bc(0x1a0),{'val':_0x2693bc(0x1c2),'ack':!![]});return;}const _0x2e07af=_0x3208a0[_0x2693bc(0x1b9)]['slice'](-_0x3e7dc3),_0x3c159b=_0x3208a0[_0x2693bc(0x1b9)][_0x2693bc(0x148)](0x0,_0x3208a0['dailyDigests']['length']-_0x3e7dc3),_0x207129=_0x2693bc(0x17b)+JSON[_0x2693bc(0x14a)](_0x3c159b)+_0x2693bc(0x171)+JSON[_0x2693bc(0x14a)](_0x2e07af);try{updateApiTimestamp();const _0x1818e2=await _0x3208a0[_0x2693bc(0x174)][_0x2693bc(0x1c7)](_0x207129),_0x4cdec7=JSON[_0x2693bc(0x1b1)](_0x1818e2[_0x2693bc(0x162)][_0x2693bc(0x177)]()[_0x2693bc(0x17f)](/```json|```/g,'')[_0x2693bc(0x1bf)]());_0x4cdec7[_0x2693bc(0x1a3)]&&(await _0x3208a0['setStateAsync'](_0x2693bc(0x1a0),{'val':_0x4cdec7['baselineDrift'],'ack':!![]}),await _0x3208a0[_0x2693bc(0x163)]('LTM.driftAnalysis.driftDetails',{'val':_0x4cdec7[_0x2693bc(0x168)],'ack':!![]}),await _0x3208a0['setStateAsync'](_0x2693bc(0x145),{'val':Date['now'](),'ack':!![]}));}catch(_0x2a1805){}}async function executeAutomationAction(_0x41e245){const _0x232c74=a0_0x404771;try{const _0x215cf9=await _0x41e245[_0x232c74(0x1c5)](_0x232c74(0x1b6)),_0x233fe6=await _0x41e245['getStateAsync']('analysis.automation.targetValue');if(_0x215cf9&&_0x215cf9[_0x232c74(0x15a)]&&_0x233fe6){const _0x5c61c8=_0x215cf9[_0x232c74(0x15a)];let _0x4636a1=_0x233fe6[_0x232c74(0x15a)];try{_0x4636a1=JSON[_0x232c74(0x1b1)](_0x4636a1);}catch(_0x5ab522){}_0x41e245['log'][_0x232c74(0x17d)](_0x232c74(0x1ba)+_0x5c61c8+_0x232c74(0x176)+_0x4636a1),await _0x41e245[_0x232c74(0x147)](_0x5c61c8,_0x4636a1);}else _0x41e245[_0x232c74(0x14c)][_0x232c74(0x16a)](_0x232c74(0x196));}catch(_0x171002){_0x41e245[_0x232c74(0x14c)][_0x232c74(0x1bb)]('BUTLER\x20Execution\x20Error:\x20'+_0x171002[_0x232c74(0x153)]);}}async function sendMorningBriefing(_0x3e00ff){const _0x36a16c=a0_0x404771;if(!_0x3e00ff[_0x36a16c(0x174)]){_0x3e00ff[_0x36a16c(0x14c)][_0x36a16c(0x16a)]('ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.');return;}_0x3e00ff[_0x36a16c(0x14c)][_0x36a16c(0x17d)](_0x36a16c(0x1a9));try{updateApiTimestamp();const _0x5f1c21='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x202e06=await _0x3e00ff['geminiModel'][_0x36a16c(0x1c7)](_0x5f1c21),_0x41f632=_0x202e06['response'][_0x36a16c(0x177)]();_0x3e00ff[_0x36a16c(0x14c)][_0x36a16c(0x17d)](_0x36a16c(0x194)+_0x41f632['length']+_0x36a16c(0x18f)),setup[_0x36a16c(0x1a5)](_0x3e00ff,'üåÖ\x20Morning\x20Briefing:\x0a'+_0x41f632);}catch(_0x3ec522){_0x3e00ff[_0x36a16c(0x14c)]['error'](_0x36a16c(0x14e)+_0x3ec522[_0x36a16c(0x153)]);}}module[a0_0x404771(0x156)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};