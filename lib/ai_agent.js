const a0_0x3e3008=a0_0x3b16;(function(_0x1a99d8,_0x55a731){const _0x10ed7b=a0_0x3b16,_0x9b9ebe=_0x1a99d8();while(!![]){try{const _0x26c6fd=parseInt(_0x10ed7b(0x1e6))/0x1*(-parseInt(_0x10ed7b(0x1d2))/0x2)+-parseInt(_0x10ed7b(0x1ea))/0x3+-parseInt(_0x10ed7b(0x1e7))/0x4*(-parseInt(_0x10ed7b(0x1de))/0x5)+-parseInt(_0x10ed7b(0x1d7))/0x6+-parseInt(_0x10ed7b(0x1f5))/0x7*(-parseInt(_0x10ed7b(0x1bd))/0x8)+-parseInt(_0x10ed7b(0x205))/0x9*(-parseInt(_0x10ed7b(0x208))/0xa)+parseInt(_0x10ed7b(0x1f7))/0xb;if(_0x26c6fd===_0x55a731)break;else _0x9b9ebe['push'](_0x9b9ebe['shift']());}catch(_0xdb0ecb){_0x9b9ebe['push'](_0x9b9ebe['shift']());}}}(a0_0x5ab6,0xe43d6));function a0_0x5ab6(){const _0x3dd163=['slice','sendNotification','analysis.automation.targetId','LTM.dailyDigests','KI-Fehler\x20(Fallback)','stringify','useWeather','replace','./setup','targetValue','push','ðŸŒ…\x20Morning\x20Briefing:\x0a','detected','config','geminiModel','(((.+)+)+)+$','analysis.activitySummary','.Current.Temperature','models/gemini-flash-latest','generateContent','1385074lSiwVh','debug','targetId','setForeignStateAsync','.\x20EMERGENCY:\x20','2284068hlxMAP','parse','Unbekannt','message','N/A\x20(Learning)','ltmLtbWindowDays','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','1010GKIDov','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','LTM.rawEventLog','generic','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','getForeignStateAsync','response','1dxFCRa','10844zNKFoh','Keine\x20Details.','LTM.driftAnalysis.baselineDrift','5594319KToyeM','livingContext','now','Started...','send','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20',',\x20Wetter:\x20','toFixed','unshift','Nacht','log','14UDmwdR','BUTLER\x20Execution\x20Error:\x20','22567534ihUiDN','.forecast.current.temperature','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','LTM.driftAnalysis.driftDetails','alertReason','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','summary','ltmStbWindowDays','toString','analysis.lastResult','.forecast.current.state','constructor','trim','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','18awDhOO','eventHistory','isAlert','4122920dACXHE','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','Traffic-Schutz\x20(Auto-Approved)','aiPersona','@google/generative-ai','Gemini\x20Error:\x20','\x20Ã¼bersprungen\x20(Auto-Approved).','driftDetails','dailyDigests','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','search','analysisHistory','KI\x20offline\x20(Fallback)','length','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','warn','.\x20ANWESEND:\x20','.\x20KONTEXT:\x20','Briefing\x20Error:\x20','analysis.alertReason','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','toLocaleTimeString','description','rawEventLog','text','toISOString','getStateAsync','automationProposal','currentSystemMode','baselineDrift','normal','\x20->\x20','splice','Skipped\x20(No\x20AI\x20or\x20Data)','isEmergency','\x0aSTB:\x20','analysis.automation.autoApply',',\x20LichtverhÃ¤ltnisse:\x20','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','analysis.automation.description','val','setStateAsync','âš ï¸\x20ALARM:\x20','timestamp','.\x20EVENTS:\x20','isProVersion','weatherInstance','Â°C,\x20','apply','info','Success','activityLevel','error','approved','%)\x20nach\x20\x22','1796232RCAFay'];a0_0x5ab6=function(){return _0x3dd163;};return a0_0x5ab6();}const a0_0xdf47c7=(function(){let _0x4ce841=!![];return function(_0xf3a6ea,_0x2defac){const _0x13de62=_0x4ce841?function(){const _0x5ed40a=a0_0x3b16;if(_0x2defac){const _0x1facb8=_0x2defac[_0x5ed40a(0x1b6)](_0xf3a6ea,arguments);return _0x2defac=null,_0x1facb8;}}:function(){};return _0x4ce841=![],_0x13de62;};}()),a0_0x466989=a0_0xdf47c7(this,function(){const _0x58add3=a0_0x3b16;return a0_0x466989[_0x58add3(0x1ff)]()[_0x58add3(0x213)]('(((.+)+)+)+$')[_0x58add3(0x1ff)]()[_0x58add3(0x202)](a0_0x466989)[_0x58add3(0x213)](_0x58add3(0x1cd));});a0_0x466989();'use strict';const {GoogleGenerativeAI}=require(a0_0x3e3008(0x20c)),setup=require(a0_0x3e3008(0x1c6)),GEMINI_MODEL=a0_0x3e3008(0x1d0),LTM_DP_DAILY_DIGESTS=a0_0x3e3008(0x1c1),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG=a0_0x3e3008(0x1e0),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x3e3008(0x1e3),'senior_aal':'PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':a0_0x3e3008(0x211),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':'Sicherheit\x20geht\x20vor.','energy_saver':'PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'};function canCallApi(){const _0x5335e3=a0_0x3e3008,_0x3be79d=Date[_0x5335e3(0x1ec)]();return _0x3be79d-lastGlobalApiCall>MIN_API_GAP_MS;}function a0_0x3b16(_0x47452b,_0x512d0c){const _0x390377=a0_0x5ab6();return a0_0x3b16=function(_0x466989,_0xdf47c7){_0x466989=_0x466989-0x1a8;let _0x5ab6be=_0x390377[_0x466989];return _0x5ab6be;},a0_0x3b16(_0x47452b,_0x512d0c);}function updateApiTimestamp(){const _0x457d56=a0_0x3e3008;lastGlobalApiCall=Date[_0x457d56(0x1ec)]();}async function getWeatherContext(_0x46c0e0){const _0x3f2957=a0_0x3e3008;if(!_0x46c0e0[_0x3f2957(0x1cb)][_0x3f2957(0x1c4)]||!_0x46c0e0[_0x3f2957(0x1cb)][_0x3f2957(0x1b4)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x492bae=_0x46c0e0[_0x3f2957(0x1cb)][_0x3f2957(0x1b4)];let _0x26225a=await _0x46c0e0[_0x3f2957(0x1e4)](_0x492bae+_0x3f2957(0x1cf));if(!_0x26225a)_0x26225a=await _0x46c0e0[_0x3f2957(0x1e4)](_0x492bae+_0x3f2957(0x1f8));let _0x178900=await _0x46c0e0['getForeignStateAsync'](_0x492bae+'.Current.WeatherText');if(!_0x178900)_0x178900=await _0x46c0e0[_0x3f2957(0x1e4)](_0x492bae+_0x3f2957(0x201));let _0x3e0239=_0x3f2957(0x1d9);const _0x26199c=await _0x46c0e0[_0x3f2957(0x1e4)](_0x492bae+'.Current.IsNight');if(_0x26199c)_0x3e0239=_0x26199c[_0x3f2957(0x1ae)]?_0x3f2957(0x1f3):'Tag';if(_0x26225a&&_0x178900)return _0x26225a['val']+_0x3f2957(0x1b5)+_0x178900[_0x3f2957(0x1ae)]+_0x3f2957(0x1ab)+_0x3e0239;}catch(_0x29e1b4){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x3d7a53,_0x3027a8,_0x4f0cc0,_0x552d7a){const _0x44d2dd=a0_0x3e3008;if(!_0x3d7a53[_0x44d2dd(0x1cc)])return{'approved':!![],'reason':_0x44d2dd(0x215)};const _0x413ea5=Date[_0x44d2dd(0x1ec)]();if(decisionCache[_0x3027a8]&&_0x413ea5-decisionCache[_0x3027a8][_0x44d2dd(0x1b1)]<CACHE_TTL_MS){const _0x203b8b=decisionCache[_0x3027a8]['decision'];return _0x3d7a53[_0x44d2dd(0x1f4)]['debug'](_0x44d2dd(0x1fc)+_0x3027a8+_0x44d2dd(0x229)+(_0x203b8b[_0x44d2dd(0x1bb)]?'OK':'NO')+'\x20('+_0x203b8b['reason']+')'),_0x203b8b;}if(!canCallApi())return _0x3d7a53[_0x44d2dd(0x1f4)][_0x44d2dd(0x1d3)](_0x44d2dd(0x1ef)+_0x3027a8+_0x44d2dd(0x20e)),{'approved':!![],'reason':_0x44d2dd(0x20a)};const _0x92d15a=new Date()[_0x44d2dd(0x21f)](),_0x53a530=await getWeatherContext(_0x3d7a53),_0x1ea85b=PERSONA_MAPPING[_0x3d7a53['config']['aiPersona']||_0x44d2dd(0x1e1)],_0x9b6e5f=_0x44d2dd(0x217)+_0x92d15a+_0x44d2dd(0x1f0)+_0x53a530+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x552d7a*0x64)[_0x44d2dd(0x1f1)](0x0)+_0x44d2dd(0x1bc)+_0x3027a8+_0x44d2dd(0x212)+_0x4f0cc0+_0x44d2dd(0x209)+_0x1ea85b+_0x44d2dd(0x1dd);try{updateApiTimestamp();const _0x10206d=await _0x3d7a53['geminiModel']['generateContent'](_0x9b6e5f),_0x4df1e4=_0x10206d[_0x44d2dd(0x1e5)][_0x44d2dd(0x222)]()[_0x44d2dd(0x1c5)](/```json|```/g,'')[_0x44d2dd(0x203)](),_0x3aaab7=JSON['parse'](_0x4df1e4);return decisionCache[_0x3027a8]={'decision':_0x3aaab7,'timestamp':_0x413ea5},_0x3aaab7;}catch(_0x7ad568){return _0x3d7a53[_0x44d2dd(0x1f4)]['warn'](_0x44d2dd(0x1f9)+_0x7ad568[_0x44d2dd(0x1da)]),decisionCache[_0x3027a8]={'decision':{'approved':!![],'reason':_0x44d2dd(0x1c2)},'timestamp':_0x413ea5-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x405944,_0x52b5a3=''){const _0x35d472=a0_0x3e3008;if(!_0x405944['geminiModel'])return;if(!canCallApi()){_0x405944[_0x35d472(0x1f4)]['debug'](_0x35d472(0x1df));return;}if(_0x405944[_0x35d472(0x206)][_0x35d472(0x216)]===0x0)return;const _0x57b8fe=_0x405944[_0x35d472(0x206)]['slice'](0x0,0xf),_0x59727c=_0x405944[_0x35d472(0x226)],_0x5a3368=PERSONA_MAPPING[_0x405944[_0x35d472(0x1cb)][_0x35d472(0x20b)]||_0x35d472(0x1e1)],_0x221ea6=_0x405944[_0x35d472(0x1cb)][_0x35d472(0x1eb)]||_0x35d472(0x1e8);let _0x316285='Unbekannt';try{const _0xa2ae1e=await _0x405944[_0x35d472(0x224)]('system.presenceWho');if(_0xa2ae1e&&_0xa2ae1e[_0x35d472(0x1ae)])_0x316285=_0xa2ae1e[_0x35d472(0x1ae)];}catch(_0x171b69){}let _0x1883c5=![];try{const _0x20f1fb=await _0x405944[_0x35d472(0x224)](_0x35d472(0x1aa));if(_0x20f1fb&&_0x20f1fb[_0x35d472(0x1ae)])_0x1883c5=!![];}catch(_0x141b73){}const _0x56589b=_0x35d472(0x21e)+_0x5a3368+_0x35d472(0x21a)+_0x221ea6+'.\x20SYSTEM_MODE:\x20'+_0x59727c+_0x35d472(0x219)+_0x316285+_0x35d472(0x1b2)+JSON[_0x35d472(0x1c3)](_0x57b8fe)+_0x35d472(0x1d6)+_0x52b5a3+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x52de86=await _0x405944['geminiModel']['generateContent'](_0x56589b),_0x39a0dd=JSON[_0x35d472(0x1d8)](_0x52de86['response'][_0x35d472(0x222)]()[_0x35d472(0x1c5)](/```json|```/g,'')['trim']());await _0x405944[_0x35d472(0x1af)](_0x35d472(0x200),{'val':JSON[_0x35d472(0x1c3)](_0x39a0dd),'ack':!![]});if(_0x39a0dd[_0x35d472(0x1fd)])await _0x405944[_0x35d472(0x1af)](_0x35d472(0x1ce),{'val':_0x39a0dd[_0x35d472(0x1fd)],'ack':!![]});const _0x115ff2={'timestamp':Date['now'](),'id':Date['now']()[_0x35d472(0x1ff)](),'analysis':{'activity':{'summary':_0x39a0dd[_0x35d472(0x1fd)],'isAlert':_0x39a0dd[_0x35d472(0x207)],'alertReason':_0x39a0dd['alertReason']},'comfort':{'automationProposal':_0x39a0dd[_0x35d472(0x225)]}}};_0x405944[_0x35d472(0x214)][_0x35d472(0x1f2)](_0x115ff2);if(_0x405944[_0x35d472(0x214)][_0x35d472(0x216)]>0x32)_0x405944[_0x35d472(0x214)]['pop']();await _0x405944[_0x35d472(0x1af)]('analysis.analysisHistory',{'val':JSON[_0x35d472(0x1c3)](_0x405944[_0x35d472(0x214)]),'ack':!![]});const _0x46c7b2=_0x39a0dd[_0x35d472(0x207)]||![];_0x46c7b2!==_0x405944['lastAlertState']&&(await _0x405944['setStateAsync']('analysis.isAlert',{'val':_0x46c7b2,'ack':!![]}),_0x405944['lastAlertState']=_0x46c7b2,_0x46c7b2&&(await _0x405944[_0x35d472(0x1af)](_0x35d472(0x21c),{'val':_0x39a0dd[_0x35d472(0x1fb)],'ack':!![]}),setup[_0x35d472(0x1bf)](_0x405944,_0x35d472(0x1b0)+_0x39a0dd[_0x35d472(0x1fb)],![],_0x39a0dd[_0x35d472(0x1a8)])));if(_0x39a0dd[_0x35d472(0x225)]&&_0x39a0dd[_0x35d472(0x225)][_0x35d472(0x1ca)]){await _0x405944['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x405944['setStateAsync'](_0x35d472(0x1ad),{'val':_0x39a0dd[_0x35d472(0x225)][_0x35d472(0x220)],'ack':!![]}),await _0x405944[_0x35d472(0x1af)](_0x35d472(0x1c0),{'val':_0x39a0dd['automationProposal'][_0x35d472(0x1d4)],'ack':!![]}),await _0x405944['setStateAsync']('analysis.automation.targetValue',{'val':JSON[_0x35d472(0x1c3)](_0x39a0dd[_0x35d472(0x225)][_0x35d472(0x1c7)]),'ack':!![]});if(_0x1883c5)executeAutomationAction(_0x405944);}}catch(_0xe6a8a5){_0x405944[_0x35d472(0x1f4)][_0x35d472(0x1ba)](_0x35d472(0x20d)+_0xe6a8a5[_0x35d472(0x1da)]);}}async function createDailyDigest(_0x4a5373,_0xd3c81c){const _0x58f4ee=a0_0x3e3008;if(!_0x4a5373[_0x58f4ee(0x1b3)])return;if(!canCallApi()){await _0x4a5373['setStateAsync'](LTM_DP_STATUS,{'val':'Skipped\x20(Traffic)','ack':!![]});return;}await _0x4a5373[_0x58f4ee(0x1af)](LTM_DP_STATUS,{'val':_0x58f4ee(0x1ed),'ack':!![]});if(!_0x4a5373[_0x58f4ee(0x1cc)]||_0x4a5373[_0x58f4ee(0x221)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4a5373['setStateAsync'](LTM_DP_STATUS,{'val':_0x58f4ee(0x22b),'ack':!![]});return;}const _0x46be76=JSON[_0x58f4ee(0x1d8)](JSON['stringify'](_0x4a5373[_0x58f4ee(0x221)])),_0x14adcf=_0x46be76[_0x58f4ee(0x216)],_0xc317f6=_0x58f4ee(0x21d)+JSON[_0x58f4ee(0x1c3)](_0x46be76);try{updateApiTimestamp();const _0x90e14f=await _0x4a5373[_0x58f4ee(0x1cc)][_0x58f4ee(0x1d1)](_0xc317f6),_0x2826c7=JSON[_0x58f4ee(0x1d8)](_0x90e14f['response'][_0x58f4ee(0x222)]()['replace'](/```json|```/g,'')[_0x58f4ee(0x203)]()),_0x553237={'timestamp':new Date()[_0x58f4ee(0x223)](),'eventCount':_0x14adcf,'summary':_0x2826c7[_0x58f4ee(0x1fd)]||'Digest','activityLevel':_0x2826c7[_0x58f4ee(0x1b9)]||_0x58f4ee(0x228),'systemMode':_0x4a5373[_0x58f4ee(0x226)]};_0x4a5373[_0x58f4ee(0x210)][_0x58f4ee(0x1c8)](_0x553237);const _0x44db90=_0x4a5373[_0x58f4ee(0x1cb)][_0x58f4ee(0x1dc)]||0x3c;_0x4a5373[_0x58f4ee(0x210)]['length']>_0x44db90&&_0x4a5373['dailyDigests'][_0x58f4ee(0x22a)](0x0,_0x4a5373['dailyDigests'][_0x58f4ee(0x216)]-_0x44db90);await _0x4a5373[_0x58f4ee(0x1af)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x4a5373[_0x58f4ee(0x210)]),'ack':!![]}),_0x4a5373[_0x58f4ee(0x221)]=[],await _0x4a5373[_0x58f4ee(0x1af)](LTM_DP_RAW_LOG,{'val':JSON[_0x58f4ee(0x1c3)](_0x4a5373['rawEventLog']),'ack':!![]}),await _0x4a5373['setStateAsync'](LTM_DP_STATUS,{'val':_0x58f4ee(0x1b8),'ack':!![]});if(_0x4a5373[_0x58f4ee(0x1b3)]&&_0xd3c81c)_0xd3c81c[_0x58f4ee(0x1ee)](_0x4a5373,'ANALYZE_HEALTH',{'digest':_0x553237});}catch(_0x1128ad){_0x4a5373['log'][_0x58f4ee(0x1ba)](_0x1128ad[_0x58f4ee(0x1da)]);}}async function runBaselineDriftAnalysis(_0x5c3b72){const _0xc969d=a0_0x3e3008;if(!_0x5c3b72[_0xc969d(0x1b3)]||!_0x5c3b72['geminiModel'])return;if(!canCallApi())return;const _0x315c99=_0x5c3b72[_0xc969d(0x1cb)][_0xc969d(0x1fe)]||0xe;if(_0x5c3b72[_0xc969d(0x210)][_0xc969d(0x216)]<_0x315c99+0x7){await _0x5c3b72[_0xc969d(0x1af)](_0xc969d(0x1e9),{'val':_0xc969d(0x1db),'ack':!![]});return;}const _0x4ee062=_0x5c3b72[_0xc969d(0x210)][_0xc969d(0x1be)](-_0x315c99),_0x42e424=_0x5c3b72[_0xc969d(0x210)][_0xc969d(0x1be)](0x0,_0x5c3b72[_0xc969d(0x210)][_0xc969d(0x216)]-_0x315c99),_0x357d21=_0xc969d(0x204)+JSON[_0xc969d(0x1c3)](_0x42e424)+_0xc969d(0x1a9)+JSON[_0xc969d(0x1c3)](_0x4ee062);try{updateApiTimestamp();const _0x1d6ee3=await _0x5c3b72['geminiModel'][_0xc969d(0x1d1)](_0x357d21),_0x418a30=JSON[_0xc969d(0x1d8)](_0x1d6ee3[_0xc969d(0x1e5)][_0xc969d(0x222)]()['replace'](/```json|```/g,'')[_0xc969d(0x203)]());_0x418a30['baselineDrift']&&(await _0x5c3b72[_0xc969d(0x1af)](_0xc969d(0x1e9),{'val':_0x418a30[_0xc969d(0x227)],'ack':!![]}),await _0x5c3b72[_0xc969d(0x1af)](_0xc969d(0x1fa),{'val':_0x418a30[_0xc969d(0x20f)],'ack':!![]}),await _0x5c3b72['setStateAsync']('LTM.driftAnalysis.lastCheck',{'val':Date[_0xc969d(0x1ec)](),'ack':!![]}));}catch(_0x3f36ce){}}async function executeAutomationAction(_0x5df259){const _0x31e605=a0_0x3e3008;try{const _0x481ac8=await _0x5df259[_0x31e605(0x224)](_0x31e605(0x1c0)),_0x2b8e8c=await _0x5df259['getStateAsync']('analysis.automation.targetValue');if(_0x481ac8&&_0x481ac8[_0x31e605(0x1ae)]&&_0x2b8e8c){const _0x20bf3a=_0x481ac8[_0x31e605(0x1ae)];let _0x34ca10=_0x2b8e8c[_0x31e605(0x1ae)];try{_0x34ca10=JSON[_0x31e605(0x1d8)](_0x34ca10);}catch(_0x5158fe){}_0x5df259[_0x31e605(0x1f4)][_0x31e605(0x1b7)](_0x31e605(0x1e2)+_0x20bf3a+'\x20=\x20'+_0x34ca10),await _0x5df259[_0x31e605(0x1d5)](_0x20bf3a,_0x34ca10);}else _0x5df259['log'][_0x31e605(0x218)](_0x31e605(0x1ac));}catch(_0x283a96){_0x5df259[_0x31e605(0x1f4)][_0x31e605(0x1ba)](_0x31e605(0x1f6)+_0x283a96['message']);}}async function sendMorningBriefing(_0xc477c8){const _0x5a8023=a0_0x3e3008;if(!_0xc477c8[_0x5a8023(0x1cc)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x4f0d6f='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0xfe1db7=await _0xc477c8[_0x5a8023(0x1cc)][_0x5a8023(0x1d1)](_0x4f0d6f),_0x49596d=_0xfe1db7['response'][_0x5a8023(0x222)]();setup[_0x5a8023(0x1bf)](_0xc477c8,_0x5a8023(0x1c9)+_0x49596d);}catch(_0x100035){_0xc477c8[_0x5a8023(0x1f4)][_0x5a8023(0x1ba)](_0x5a8023(0x21b)+_0x100035[_0x5a8023(0x1da)]);}}module['exports']={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};