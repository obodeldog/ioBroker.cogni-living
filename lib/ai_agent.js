const a0_0x2c8b6a=a0_0x1c03;(function(_0x70273,_0x39ef04){const _0x457dc7=a0_0x1c03,_0x4b7aa3=_0x70273();while(!![]){try{const _0x4b38d7=-parseInt(_0x457dc7(0x158))/0x1*(parseInt(_0x457dc7(0x1c4))/0x2)+-parseInt(_0x457dc7(0x1ac))/0x3+-parseInt(_0x457dc7(0x1ce))/0x4+parseInt(_0x457dc7(0x162))/0x5+-parseInt(_0x457dc7(0x150))/0x6+-parseInt(_0x457dc7(0x1ca))/0x7*(parseInt(_0x457dc7(0x192))/0x8)+-parseInt(_0x457dc7(0x172))/0x9*(-parseInt(_0x457dc7(0x18d))/0xa);if(_0x4b38d7===_0x39ef04)break;else _0x4b7aa3['push'](_0x4b7aa3['shift']());}catch(_0x332af3){_0x4b7aa3['push'](_0x4b7aa3['shift']());}}}(a0_0x1e4e,0x3de48));const a0_0xf23da1=(function(){let _0x444484=!![];return function(_0x50fc53,_0x501a59){const _0x539590=_0x444484?function(){if(_0x501a59){const _0x205bde=_0x501a59['apply'](_0x50fc53,arguments);return _0x501a59=null,_0x205bde;}}:function(){};return _0x444484=![],_0x539590;};}()),a0_0x4235b3=a0_0xf23da1(this,function(){const _0x42d761=a0_0x1c03;return a0_0x4235b3[_0x42d761(0x1a2)]()['search'](_0x42d761(0x154))[_0x42d761(0x1a2)]()['constructor'](a0_0x4235b3)[_0x42d761(0x176)]('(((.+)+)+)+$');});function a0_0x1c03(_0x425347,_0x52383d){const _0x9ba3c4=a0_0x1e4e();return a0_0x1c03=function(_0x4235b3,_0xf23da1){_0x4235b3=_0x4235b3-0x145;let _0x1e4e72=_0x9ba3c4[_0x4235b3];return _0x1e4e72;},a0_0x1c03(_0x425347,_0x52383d);}a0_0x4235b3();'use strict';const {GoogleGenerativeAI}=require(a0_0x2c8b6a(0x1c8)),setup=require(a0_0x2c8b6a(0x1bc)),GEMINI_MODEL=a0_0x2c8b6a(0x19a),LTM_DP_DAILY_DIGESTS=a0_0x2c8b6a(0x1b6),LTM_DP_STATUS=a0_0x2c8b6a(0x164),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x2c8b6a(0x1a4),'senior_aal':a0_0x2c8b6a(0x1c6),'family':a0_0x2c8b6a(0x14a),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':a0_0x2c8b6a(0x1ab),'energy_saver':a0_0x2c8b6a(0x18a)};function canCallApi(){const _0x18b157=Date['now']();return _0x18b157-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x398fc9=a0_0x2c8b6a;lastGlobalApiCall=Date[_0x398fc9(0x170)]();}async function getWeatherContext(_0xc2dd6){const _0x26bf37=a0_0x2c8b6a;if(!_0xc2dd6[_0x26bf37(0x17f)][_0x26bf37(0x1c5)]||!_0xc2dd6[_0x26bf37(0x17f)][_0x26bf37(0x149)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x4e74ad=_0xc2dd6[_0x26bf37(0x17f)][_0x26bf37(0x149)];let _0x11bc5e=await _0xc2dd6[_0x26bf37(0x1cf)](_0x4e74ad+_0x26bf37(0x16a));if(!_0x11bc5e)_0x11bc5e=await _0xc2dd6[_0x26bf37(0x1cf)](_0x4e74ad+_0x26bf37(0x1b5));let _0x3341db=await _0xc2dd6['getForeignStateAsync'](_0x4e74ad+_0x26bf37(0x1b3));if(!_0x3341db)_0x3341db=await _0xc2dd6[_0x26bf37(0x1cf)](_0x4e74ad+_0x26bf37(0x1a8));let _0x5624b7=_0x26bf37(0x1a0);const _0x456f7d=await _0xc2dd6[_0x26bf37(0x1cf)](_0x4e74ad+_0x26bf37(0x1b7));if(_0x456f7d)_0x5624b7=_0x456f7d[_0x26bf37(0x151)]?_0x26bf37(0x18e):'Tag';if(_0x11bc5e&&_0x3341db)return _0x11bc5e[_0x26bf37(0x151)]+'Â°C,\x20'+_0x3341db['val']+_0x26bf37(0x195)+_0x5624b7;}catch(_0x433779){}return _0x26bf37(0x17a);}async function consultButler(_0x49a00b,_0xbc30b9,_0x3177fd,_0x909ee){const _0x4b05bb=a0_0x2c8b6a;if(!_0x49a00b[_0x4b05bb(0x166)])return{'approved':!![],'reason':_0x4b05bb(0x1d1)};const _0x420739=Date[_0x4b05bb(0x170)]();if(decisionCache[_0xbc30b9]&&_0x420739-decisionCache[_0xbc30b9][_0x4b05bb(0x163)]<CACHE_TTL_MS){const _0x357854=decisionCache[_0xbc30b9]['decision'];return _0x49a00b[_0x4b05bb(0x16c)][_0x4b05bb(0x19d)](_0x4b05bb(0x17c)+_0xbc30b9+'\x20->\x20'+(_0x357854[_0x4b05bb(0x19c)]?'OK':'NO')+'\x20('+_0x357854[_0x4b05bb(0x1a3)]+')'),_0x357854;}if(!canCallApi())return _0x49a00b[_0x4b05bb(0x16c)][_0x4b05bb(0x19d)]('ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20'+_0xbc30b9+_0x4b05bb(0x14c)),{'approved':!![],'reason':_0x4b05bb(0x18b)};const _0x6cce0b=new Date()[_0x4b05bb(0x1b9)](),_0x2122bb=await getWeatherContext(_0x49a00b),_0x304657=PERSONA_MAPPING[_0x49a00b[_0x4b05bb(0x17f)][_0x4b05bb(0x182)]||_0x4b05bb(0x160)],_0x54959f=_0x4b05bb(0x183)+_0x6cce0b+_0x4b05bb(0x17d)+_0x2122bb+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x909ee*0x64)[_0x4b05bb(0x16e)](0x0)+'%)\x20nach\x20\x22'+_0xbc30b9+'\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22'+_0x3177fd+_0x4b05bb(0x1c1)+_0x304657+_0x4b05bb(0x1a1);try{updateApiTimestamp();const _0x4a3020=await _0x49a00b['geminiModel'][_0x4b05bb(0x14f)](_0x54959f),_0x15a292=_0x4a3020['response'][_0x4b05bb(0x1c2)]()[_0x4b05bb(0x193)](/```json|```/g,'')[_0x4b05bb(0x1b0)](),_0x343263=JSON[_0x4b05bb(0x179)](_0x15a292);return decisionCache[_0xbc30b9]={'decision':_0x343263,'timestamp':_0x420739},_0x343263;}catch(_0x22526d){return _0x49a00b['log']['warn'](_0x4b05bb(0x1bf)+_0x22526d[_0x4b05bb(0x14b)]),decisionCache[_0xbc30b9]={'decision':{'approved':!![],'reason':_0x4b05bb(0x153)},'timestamp':_0x420739-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x4b05bb(0x153)};}}async function runGeminiAnalysis(_0x2ab28e,_0x5c0f56=''){const _0x635fd4=a0_0x2c8b6a;if(!_0x2ab28e['geminiModel'])return;if(!canCallApi()){_0x2ab28e['log'][_0x635fd4(0x19d)]('ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x2ab28e[_0x635fd4(0x1a6)][_0x635fd4(0x1a7)]===0x0)return;const _0x3e43ba=_0x2ab28e[_0x635fd4(0x1a6)][_0x635fd4(0x17b)](0x0,0xf),_0x46edcf=_0x2ab28e['currentSystemMode'],_0x1c046c=PERSONA_MAPPING[_0x2ab28e[_0x635fd4(0x17f)][_0x635fd4(0x182)]||_0x635fd4(0x160)],_0xed170c=_0x2ab28e[_0x635fd4(0x17f)]['livingContext']||_0x635fd4(0x178);let _0x50f4c9='Unbekannt';try{const _0x4deec3=await _0x2ab28e[_0x635fd4(0x148)](_0x635fd4(0x16b));if(_0x4deec3&&_0x4deec3['val'])_0x50f4c9=_0x4deec3[_0x635fd4(0x151)];}catch(_0x7f7f15){}let _0x1573de=![];try{const _0x36203b=await _0x2ab28e[_0x635fd4(0x148)](_0x635fd4(0x1cd));if(_0x36203b&&_0x36203b[_0x635fd4(0x151)])_0x1573de=!![];}catch(_0x88072){}const _0x39b708=_0x635fd4(0x167)+_0x1c046c+_0x635fd4(0x152)+_0xed170c+_0x635fd4(0x185)+_0x46edcf+_0x635fd4(0x18c)+_0x50f4c9+_0x635fd4(0x1ae)+JSON[_0x635fd4(0x181)](_0x3e43ba)+'.\x20EMERGENCY:\x20'+_0x5c0f56+_0x635fd4(0x1cc);try{updateApiTimestamp();const _0x5b0b37=await _0x2ab28e[_0x635fd4(0x166)][_0x635fd4(0x14f)](_0x39b708),_0x3e25f6=JSON[_0x635fd4(0x179)](_0x5b0b37[_0x635fd4(0x1b1)][_0x635fd4(0x1c2)]()[_0x635fd4(0x193)](/```json|```/g,'')[_0x635fd4(0x1b0)]());await _0x2ab28e[_0x635fd4(0x194)](_0x635fd4(0x173),{'val':JSON[_0x635fd4(0x181)](_0x3e25f6),'ack':!![]});if(_0x3e25f6[_0x635fd4(0x18f)])await _0x2ab28e[_0x635fd4(0x194)](_0x635fd4(0x177),{'val':_0x3e25f6[_0x635fd4(0x18f)],'ack':!![]});const _0x189f2a={'timestamp':Date[_0x635fd4(0x170)](),'id':Date[_0x635fd4(0x170)]()[_0x635fd4(0x1a2)](),'analysis':{'activity':{'summary':_0x3e25f6[_0x635fd4(0x18f)],'isAlert':_0x3e25f6['isAlert'],'alertReason':_0x3e25f6[_0x635fd4(0x189)]},'comfort':{'automationProposal':_0x3e25f6['automationProposal']}}};_0x2ab28e[_0x635fd4(0x169)][_0x635fd4(0x1c7)](_0x189f2a);if(_0x2ab28e['analysisHistory'][_0x635fd4(0x1a7)]>0x32)_0x2ab28e[_0x635fd4(0x169)][_0x635fd4(0x1b2)]();await _0x2ab28e[_0x635fd4(0x194)](_0x635fd4(0x147),{'val':JSON[_0x635fd4(0x181)](_0x2ab28e[_0x635fd4(0x169)]),'ack':!![]});const _0x464ddc=_0x3e25f6['isAlert']||![];_0x464ddc!==_0x2ab28e[_0x635fd4(0x184)]&&(await _0x2ab28e[_0x635fd4(0x194)]('analysis.isAlert',{'val':_0x464ddc,'ack':!![]}),_0x2ab28e['lastAlertState']=_0x464ddc,_0x464ddc&&(await _0x2ab28e[_0x635fd4(0x194)](_0x635fd4(0x14e),{'val':_0x3e25f6[_0x635fd4(0x189)],'ack':!![]}),setup[_0x635fd4(0x16f)](_0x2ab28e,_0x635fd4(0x198)+_0x3e25f6[_0x635fd4(0x189)],![],_0x3e25f6[_0x635fd4(0x174)])));if(_0x3e25f6[_0x635fd4(0x145)]&&_0x3e25f6[_0x635fd4(0x145)][_0x635fd4(0x180)]){await _0x2ab28e[_0x635fd4(0x194)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x2ab28e[_0x635fd4(0x194)](_0x635fd4(0x1af),{'val':_0x3e25f6[_0x635fd4(0x145)][_0x635fd4(0x187)],'ack':!![]}),await _0x2ab28e[_0x635fd4(0x194)](_0x635fd4(0x14d),{'val':_0x3e25f6[_0x635fd4(0x145)][_0x635fd4(0x156)],'ack':!![]}),await _0x2ab28e[_0x635fd4(0x194)]('analysis.automation.targetValue',{'val':JSON[_0x635fd4(0x181)](_0x3e25f6[_0x635fd4(0x145)][_0x635fd4(0x1aa)]),'ack':!![]});if(_0x1573de)executeAutomationAction(_0x2ab28e);}}catch(_0x5eee7b){_0x2ab28e[_0x635fd4(0x16c)]['error'](_0x635fd4(0x15e)+_0x5eee7b[_0x635fd4(0x14b)]);}}async function createDailyDigest(_0x471632,_0x5e0c81){const _0x1efb7d=a0_0x2c8b6a;if(!_0x471632[_0x1efb7d(0x190)])return;if(!canCallApi()){await _0x471632['setStateAsync'](LTM_DP_STATUS,{'val':_0x1efb7d(0x186),'ack':!![]});return;}await _0x471632[_0x1efb7d(0x194)](LTM_DP_STATUS,{'val':_0x1efb7d(0x171),'ack':!![]});if(!_0x471632[_0x1efb7d(0x166)]||_0x471632[_0x1efb7d(0x15c)][_0x1efb7d(0x1a7)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x471632['setStateAsync'](LTM_DP_STATUS,{'val':_0x1efb7d(0x1be),'ack':!![]});return;}const _0x592b29=JSON[_0x1efb7d(0x179)](JSON[_0x1efb7d(0x181)](_0x471632['rawEventLog'])),_0x226ddf=_0x592b29['length'],_0x10e913=_0x1efb7d(0x19b)+JSON[_0x1efb7d(0x181)](_0x592b29);try{updateApiTimestamp();const _0x471d2a=await _0x471632[_0x1efb7d(0x166)][_0x1efb7d(0x14f)](_0x10e913),_0x40e9f4=JSON[_0x1efb7d(0x179)](_0x471d2a['response']['text']()[_0x1efb7d(0x193)](/```json|```/g,'')['trim']()),_0x180ea6={'timestamp':new Date()[_0x1efb7d(0x1d0)](),'eventCount':_0x226ddf,'summary':_0x40e9f4[_0x1efb7d(0x18f)]||'Digest','activityLevel':_0x40e9f4[_0x1efb7d(0x19e)]||_0x1efb7d(0x1c9),'systemMode':_0x471632[_0x1efb7d(0x15a)]};_0x471632[_0x1efb7d(0x19f)][_0x1efb7d(0x15d)](_0x180ea6);const _0x35e4a7=_0x471632[_0x1efb7d(0x17f)]['ltmLtbWindowDays']||0x3c;_0x471632[_0x1efb7d(0x19f)][_0x1efb7d(0x1a7)]>_0x35e4a7&&_0x471632[_0x1efb7d(0x19f)][_0x1efb7d(0x161)](0x0,_0x471632[_0x1efb7d(0x19f)][_0x1efb7d(0x1a7)]-_0x35e4a7);await _0x471632[_0x1efb7d(0x194)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x1efb7d(0x181)](_0x471632[_0x1efb7d(0x19f)]),'ack':!![]}),_0x471632[_0x1efb7d(0x15c)]=[],await _0x471632[_0x1efb7d(0x194)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x471632['rawEventLog']),'ack':!![]}),await _0x471632[_0x1efb7d(0x194)](LTM_DP_STATUS,{'val':_0x1efb7d(0x155),'ack':!![]});const _0x1100ae=_0x1efb7d(0x188)+_0x40e9f4[_0x1efb7d(0x18f)]+_0x1efb7d(0x15b)+_0x40e9f4[_0x1efb7d(0x19e)];setup[_0x1efb7d(0x16f)](_0x471632,_0x1100ae,![],![]);if(_0x471632[_0x1efb7d(0x190)]&&_0x5e0c81)_0x5e0c81[_0x1efb7d(0x168)](_0x471632,_0x1efb7d(0x196),{'digest':_0x180ea6});}catch(_0x451468){_0x471632[_0x1efb7d(0x16c)][_0x1efb7d(0x1b8)](_0x451468[_0x1efb7d(0x14b)]);}}async function runBaselineDriftAnalysis(_0x57d21d){const _0x5e68cd=a0_0x2c8b6a;if(!_0x57d21d[_0x5e68cd(0x190)]||!_0x57d21d[_0x5e68cd(0x166)])return;if(!canCallApi())return;const _0x3913fe=_0x57d21d[_0x5e68cd(0x17f)][_0x5e68cd(0x15f)]||0xe;if(_0x57d21d[_0x5e68cd(0x19f)]['length']<_0x3913fe+0x7){await _0x57d21d[_0x5e68cd(0x194)]('LTM.driftAnalysis.baselineDrift',{'val':_0x5e68cd(0x165),'ack':!![]});return;}const _0x2b8a2b=_0x57d21d[_0x5e68cd(0x19f)][_0x5e68cd(0x17b)](-_0x3913fe),_0x134d90=_0x57d21d[_0x5e68cd(0x19f)]['slice'](0x0,_0x57d21d[_0x5e68cd(0x19f)][_0x5e68cd(0x1a7)]-_0x3913fe),_0x1b95e9=_0x5e68cd(0x159)+JSON[_0x5e68cd(0x181)](_0x134d90)+_0x5e68cd(0x16d)+JSON[_0x5e68cd(0x181)](_0x2b8a2b);try{updateApiTimestamp();const _0x546a77=await _0x57d21d[_0x5e68cd(0x166)][_0x5e68cd(0x14f)](_0x1b95e9),_0x13f91a=JSON[_0x5e68cd(0x179)](_0x546a77[_0x5e68cd(0x1b1)]['text']()[_0x5e68cd(0x193)](/```json|```/g,'')['trim']());_0x13f91a[_0x5e68cd(0x146)]&&(await _0x57d21d['setStateAsync'](_0x5e68cd(0x1bd),{'val':_0x13f91a[_0x5e68cd(0x146)],'ack':!![]}),await _0x57d21d[_0x5e68cd(0x194)]('LTM.driftAnalysis.driftDetails',{'val':_0x13f91a['driftDetails'],'ack':!![]}),await _0x57d21d['setStateAsync'](_0x5e68cd(0x1c0),{'val':Date[_0x5e68cd(0x170)](),'ack':!![]}));}catch(_0x532d0a){}}function a0_0x1e4e(){const _0x3bac1e=['N/A\x20(Learning)','geminiModel','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','send','analysisHistory','.Current.Temperature','system.presenceWho','log','\x0aSTB:\x20','toFixed','sendNotification','now','Started...','15130701ZSJmBt','analysis.lastResult','isEmergency','ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','search','analysis.activitySummary','Keine\x20Details.','parse','Wetterdaten\x20nicht\x20abrufbar','slice','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20',',\x20Wetter:\x20','info','config','detected','stringify','aiPersona','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','lastAlertState','.\x20SYSTEM_MODE:\x20','Skipped\x20(Traffic)','description','ðŸ“…\x20Daily\x20Digest:\x0a','alertReason','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','Traffic-Schutz\x20(Auto-Approved)','.\x20ANWESEND:\x20','10aqYQPo','Nacht','summary','isProVersion','ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','4944xKblpG','replace','setStateAsync',',\x20LichtverhÃ¤ltnisse:\x20','ANALYZE_HEALTH','ðŸŒ…\x20Morning\x20Briefing:\x0a','âš ï¸\x20ALARM:\x20',').\x20Sending\x20notification...','models/gemini-flash-latest','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','approved','debug','activityLevel','dailyDigests','Unbekannt','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','toString','reason','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','eventHistory','length','.forecast.current.state','analysis.automation.targetValue','targetValue','Sicherheit\x20geht\x20vor.','1179207GBCfFb','warn','.\x20EVENTS:\x20','analysis.automation.description','trim','response','pop','.Current.WeatherText','ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20','.forecast.current.temperature','LTM.dailyDigests','.Current.IsNight','error','toLocaleTimeString','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','setForeignStateAsync','./setup','LTM.driftAnalysis.baselineDrift','Skipped\x20(No\x20AI\x20or\x20Data)','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','LTM.driftAnalysis.lastCheck','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','text','\x20=\x20','70XBAIYO','useWeather','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','unshift','@google/generative-ai','normal','322GNegtU','Briefing\x20Error:\x20','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','analysis.automation.autoApply','1659424ZkDyHE','getForeignStateAsync','toISOString','KI\x20offline\x20(Fallback)','automationProposal','baselineDrift','analysis.analysisHistory','getStateAsync','weatherInstance','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','message','\x20Ã¼bersprungen\x20(Auto-Approved).','analysis.automation.targetId','analysis.alertReason','generateContent','1400490pySExe','val','.\x20KONTEXT:\x20','KI-Fehler\x20(Fallback)','(((.+)+)+)+$','Success','targetId','exports','14239uSdFwZ','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','currentSystemMode','\x0aAktivitÃ¤t:\x20','rawEventLog','push','Gemini\x20Error:\x20','ltmStbWindowDays','generic','splice','702280dLVhqX','timestamp','LTM.processingStatus'];a0_0x1e4e=function(){return _0x3bac1e;};return a0_0x1e4e();}async function executeAutomationAction(_0x31ee27){const _0xdf8626=a0_0x2c8b6a;try{const _0x5421f4=await _0x31ee27['getStateAsync'](_0xdf8626(0x14d)),_0x798538=await _0x31ee27[_0xdf8626(0x148)](_0xdf8626(0x1a9));if(_0x5421f4&&_0x5421f4[_0xdf8626(0x151)]&&_0x798538){const _0x560d32=_0x5421f4[_0xdf8626(0x151)];let _0x25120b=_0x798538[_0xdf8626(0x151)];try{_0x25120b=JSON[_0xdf8626(0x179)](_0x25120b);}catch(_0x5d6721){}_0x31ee27[_0xdf8626(0x16c)][_0xdf8626(0x17e)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x560d32+_0xdf8626(0x1c3)+_0x25120b),await _0x31ee27[_0xdf8626(0x1bb)](_0x560d32,_0x25120b);}else _0x31ee27[_0xdf8626(0x16c)][_0xdf8626(0x1ad)](_0xdf8626(0x1a5));}catch(_0x19890c){_0x31ee27[_0xdf8626(0x16c)][_0xdf8626(0x1b8)]('BUTLER\x20Execution\x20Error:\x20'+_0x19890c[_0xdf8626(0x14b)]);}}async function sendMorningBriefing(_0x57e084){const _0x59ed6a=a0_0x2c8b6a;if(!_0x57e084['geminiModel']){_0x57e084[_0x59ed6a(0x16c)][_0x59ed6a(0x1ad)](_0x59ed6a(0x175));return;}_0x57e084[_0x59ed6a(0x16c)][_0x59ed6a(0x17e)](_0x59ed6a(0x191));try{updateApiTimestamp();const _0x3f4f89=_0x59ed6a(0x1ba),_0x35d4c5=await _0x57e084[_0x59ed6a(0x166)][_0x59ed6a(0x14f)](_0x3f4f89),_0x599d63=_0x35d4c5[_0x59ed6a(0x1b1)][_0x59ed6a(0x1c2)]();_0x57e084['log']['info'](_0x59ed6a(0x1b4)+_0x599d63[_0x59ed6a(0x1a7)]+_0x59ed6a(0x199)),setup['sendNotification'](_0x57e084,_0x59ed6a(0x197)+_0x599d63);}catch(_0xfa86a1){_0x57e084[_0x59ed6a(0x16c)]['error'](_0x59ed6a(0x1cb)+_0xfa86a1['message']);}}module[a0_0x2c8b6a(0x157)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};