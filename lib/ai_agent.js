const a0_0x2b1293=a0_0x507b;(function(_0x5cb9a8,_0x192655){const _0x19549a=a0_0x507b,_0x23e18c=_0x5cb9a8();while(!![]){try{const _0x4abf52=-parseInt(_0x19549a(0x196))/0x1+-parseInt(_0x19549a(0x17c))/0x2*(parseInt(_0x19549a(0x192))/0x3)+-parseInt(_0x19549a(0x1ad))/0x4+-parseInt(_0x19549a(0x1ce))/0x5*(-parseInt(_0x19549a(0x1e3))/0x6)+parseInt(_0x19549a(0x1ac))/0x7+parseInt(_0x19549a(0x18c))/0x8*(-parseInt(_0x19549a(0x1cc))/0x9)+parseInt(_0x19549a(0x17a))/0xa;if(_0x4abf52===_0x192655)break;else _0x23e18c['push'](_0x23e18c['shift']());}catch(_0x42d7ba){_0x23e18c['push'](_0x23e18c['shift']());}}}(a0_0xb24d,0x7b3ff));const a0_0x788830=(function(){let _0x3fd67d=!![];return function(_0x1ae96f,_0x3e659b){const _0x419866=_0x3fd67d?function(){const _0x5abc04=a0_0x507b;if(_0x3e659b){const _0x39cf73=_0x3e659b[_0x5abc04(0x17d)](_0x1ae96f,arguments);return _0x3e659b=null,_0x39cf73;}}:function(){};return _0x3fd67d=![],_0x419866;};}()),a0_0xf091e=a0_0x788830(this,function(){const _0xe17ce6=a0_0x507b;return a0_0xf091e[_0xe17ce6(0x1db)]()[_0xe17ce6(0x1a1)]('(((.+)+)+)+$')[_0xe17ce6(0x1db)]()[_0xe17ce6(0x198)](a0_0xf091e)['search']('(((.+)+)+)+$');});a0_0xf091e();'use strict';const {GoogleGenerativeAI}=require(a0_0x2b1293(0x1d5)),setup=require('./setup'),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x2b1293(0x1f9),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG=a0_0x2b1293(0x188),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x2b1293(0x199),'senior_aal':a0_0x2b1293(0x1a7),'family':a0_0x2b1293(0x1bc),'single_comfort':a0_0x2b1293(0x183),'security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x2b1293(0x174)};function canCallApi(){const _0x210a73=Date['now']();return _0x210a73-lastGlobalApiCall>MIN_API_GAP_MS;}function a0_0xb24d(){const _0x3fda56=['approved','detected','isEmergency','âš ï¸\x20ALARM:\x20','ðŸ“…\x20Daily\x20Digest:\x0a','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','currentSystemMode','5608665uTMOqO','KI\x20offline\x20(Fallback)','5kAwejj','push','LTM.driftAnalysis.baselineDrift','.Current.IsNight','Success','\x20Ã¼bersprungen\x20(Auto-Approved).','lastAlertState','@google/generative-ai','activityLevel','description','analysis.automation.targetValue','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','\x20->\x20','toString','targetId','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','splice','log','analysis.activitySummary','debug','ANALYZE_HEALTH','99174emjFgZ','.Current.WeatherText','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','analysis.alertReason','alertReason','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','KI-Fehler\x20(Fallback)','val',',\x20LichtverhÃ¤ltnisse:\x20','Tag','system.presenceWho','normal','automationProposal','ltmLtbWindowDays','slice','analysis.automation.targetId','config','.Current.Temperature','setStateAsync','unshift','Unbekannt\x20(Kein\x20Sensor)','Skipped\x20(Traffic)','LTM.dailyDigests','Gemini\x20Error:\x20','error','parse','response','Digest','aiPersona','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','Traffic-Schutz\x20(Auto-Approved)','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a',',\x20Wetter:\x20','27193670aKTjDz','analysis.automation.description','3662aUZPLJ','apply','Unbekannt','Wetterdaten\x20nicht\x20abrufbar','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','length','warn','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','analysisHistory','isAlert','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','message','LTM.rawEventLog','Briefing\x20Error:\x20','send','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','8gTGChp','baselineDrift','rawEventLog','ðŸŒ…\x20Morning\x20Briefing:\x0a','getStateAsync','dailyDigests','1539XgYQud','eventHistory','weatherInstance','now','720528lSunYZ','.\x20EVENTS:\x20','constructor','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','useWeather','toLocaleTimeString','Started...','text','sendNotification','timestamp','replace','search','summary','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','Skipped\x20(No\x20AI\x20or\x20Data)','analysis.automation.autoApply','\x20=\x20','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','exports','analysis.automation.patternDetected','driftDetails','isProVersion','1215431oIXpJl','486728Luablx','toISOString','.\x20EMERGENCY:\x20','trim','toFixed','Nacht','geminiModel','\x0aAktivitÃ¤t:\x20','Â°C,\x20','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','getForeignStateAsync','livingContext','targetValue','.forecast.current.state','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','LTM.driftAnalysis.lastCheck','generic','Keine\x20Details.','pop','.forecast.current.temperature','generateContent','stringify','info'];a0_0xb24d=function(){return _0x3fda56;};return a0_0xb24d();}function updateApiTimestamp(){const _0x34e3d2=a0_0x2b1293;lastGlobalApiCall=Date[_0x34e3d2(0x195)]();}function a0_0x507b(_0x3d8f98,_0x1ec96d){const _0x2dd643=a0_0xb24d();return a0_0x507b=function(_0xf091e,_0x788830){_0xf091e=_0xf091e-0x174;let _0xb24d81=_0x2dd643[_0xf091e];return _0xb24d81;},a0_0x507b(_0x3d8f98,_0x1ec96d);}async function getWeatherContext(_0x496605){const _0x4445ed=a0_0x2b1293;if(!_0x496605['config'][_0x4445ed(0x19a)]||!_0x496605[_0x4445ed(0x1f3)][_0x4445ed(0x194)])return _0x4445ed(0x1f7);try{const _0xc2bf1b=_0x496605[_0x4445ed(0x1f3)]['weatherInstance'];let _0x491e7d=await _0x496605[_0x4445ed(0x1b7)](_0xc2bf1b+_0x4445ed(0x1f4));if(!_0x491e7d)_0x491e7d=await _0x496605[_0x4445ed(0x1b7)](_0xc2bf1b+_0x4445ed(0x1c1));let _0x5ecf77=await _0x496605[_0x4445ed(0x1b7)](_0xc2bf1b+_0x4445ed(0x1e4));if(!_0x5ecf77)_0x5ecf77=await _0x496605[_0x4445ed(0x1b7)](_0xc2bf1b+_0x4445ed(0x1ba));let _0x260f98=_0x4445ed(0x17e);const _0x6481b1=await _0x496605[_0x4445ed(0x1b7)](_0xc2bf1b+_0x4445ed(0x1d1));if(_0x6481b1)_0x260f98=_0x6481b1[_0x4445ed(0x1ea)]?_0x4445ed(0x1b2):_0x4445ed(0x1ec);if(_0x491e7d&&_0x5ecf77)return _0x491e7d[_0x4445ed(0x1ea)]+_0x4445ed(0x1b5)+_0x5ecf77[_0x4445ed(0x1ea)]+_0x4445ed(0x1eb)+_0x260f98;}catch(_0x486303){}return _0x4445ed(0x17f);}async function consultButler(_0x31adf7,_0xd7d6ca,_0x1eb417,_0x342ec4){const _0x2b1117=a0_0x2b1293;if(!_0x31adf7[_0x2b1117(0x1b3)])return{'approved':!![],'reason':_0x2b1117(0x1cd)};const _0x531303=Date[_0x2b1117(0x195)]();if(decisionCache[_0xd7d6ca]&&_0x531303-decisionCache[_0xd7d6ca][_0x2b1117(0x19f)]<CACHE_TTL_MS){const _0x2c2564=decisionCache[_0xd7d6ca]['decision'];return _0x31adf7['log'][_0x2b1117(0x1e1)](_0x2b1117(0x1bb)+_0xd7d6ca+_0x2b1117(0x1da)+(_0x2c2564[_0x2b1117(0x1c5)]?'OK':'NO')+'\x20('+_0x2c2564['reason']+')'),_0x2c2564;}if(!canCallApi())return _0x31adf7[_0x2b1117(0x1df)][_0x2b1117(0x1e1)](_0x2b1117(0x1a3)+_0xd7d6ca+_0x2b1117(0x1d3)),{'approved':!![],'reason':_0x2b1117(0x176)};const _0x3d37bf=new Date()[_0x2b1117(0x19b)](),_0x40e9d8=await getWeatherContext(_0x31adf7),_0x27e22a=PERSONA_MAPPING[_0x31adf7[_0x2b1117(0x1f3)][_0x2b1117(0x1ff)]||_0x2b1117(0x1be)],_0x1596ae=_0x2b1117(0x1dd)+_0x3d37bf+_0x2b1117(0x179)+_0x40e9d8+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x342ec4*0x64)[_0x2b1117(0x1b1)](0x0)+'%)\x20nach\x20\x22'+_0xd7d6ca+_0x2b1117(0x175)+_0x1eb417+_0x2b1117(0x177)+_0x27e22a+_0x2b1117(0x200);try{updateApiTimestamp();const _0x511233=await _0x31adf7[_0x2b1117(0x1b3)][_0x2b1117(0x1c2)](_0x1596ae),_0x3e20ba=_0x511233[_0x2b1117(0x1fd)][_0x2b1117(0x19d)]()[_0x2b1117(0x1a0)](/```json|```/g,'')[_0x2b1117(0x1b0)](),_0x5492db=JSON[_0x2b1117(0x1fc)](_0x3e20ba);return decisionCache[_0xd7d6ca]={'decision':_0x5492db,'timestamp':_0x531303},_0x5492db;}catch(_0xfcd525){return _0x31adf7[_0x2b1117(0x1df)][_0x2b1117(0x182)](_0x2b1117(0x1e8)+_0xfcd525[_0x2b1117(0x187)]),decisionCache[_0xd7d6ca]={'decision':{'approved':!![],'reason':_0x2b1117(0x1e9)},'timestamp':_0x531303-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x27b471,_0x278c70=''){const _0x9695dd=a0_0x2b1293;if(!_0x27b471['geminiModel'])return;if(!canCallApi()){_0x27b471[_0x9695dd(0x1df)][_0x9695dd(0x1e1)](_0x9695dd(0x186));return;}if(_0x27b471[_0x9695dd(0x193)]['length']===0x0)return;const _0x568e75=_0x27b471[_0x9695dd(0x193)][_0x9695dd(0x1f1)](0x0,0xf),_0xbed0f=_0x27b471[_0x9695dd(0x1cb)],_0x459d6a=PERSONA_MAPPING[_0x27b471[_0x9695dd(0x1f3)][_0x9695dd(0x1ff)]||_0x9695dd(0x1be)],_0x2d658d=_0x27b471[_0x9695dd(0x1f3)][_0x9695dd(0x1b8)]||_0x9695dd(0x1bf);let _0x4b8519='Unbekannt';try{const _0x417044=await _0x27b471[_0x9695dd(0x190)](_0x9695dd(0x1ed));if(_0x417044&&_0x417044['val'])_0x4b8519=_0x417044[_0x9695dd(0x1ea)];}catch(_0xa0d6d3){}let _0x3667cc=![];try{const _0x2824d5=await _0x27b471[_0x9695dd(0x190)](_0x9695dd(0x1a5));if(_0x2824d5&&_0x2824d5[_0x9695dd(0x1ea)])_0x3667cc=!![];}catch(_0x51808a){}const _0x51c138=_0x9695dd(0x1ca)+_0x459d6a+'.\x20KONTEXT:\x20'+_0x2d658d+'.\x20SYSTEM_MODE:\x20'+_0xbed0f+'.\x20ANWESEND:\x20'+_0x4b8519+_0x9695dd(0x197)+JSON[_0x9695dd(0x1c3)](_0x568e75)+_0x9695dd(0x1af)+_0x278c70+_0x9695dd(0x1d9);try{updateApiTimestamp();const _0x3f965c=await _0x27b471['geminiModel'][_0x9695dd(0x1c2)](_0x51c138),_0x322e72=JSON['parse'](_0x3f965c[_0x9695dd(0x1fd)][_0x9695dd(0x19d)]()[_0x9695dd(0x1a0)](/```json|```/g,'')[_0x9695dd(0x1b0)]());await _0x27b471[_0x9695dd(0x1f5)]('analysis.lastResult',{'val':JSON[_0x9695dd(0x1c3)](_0x322e72),'ack':!![]});if(_0x322e72['summary'])await _0x27b471[_0x9695dd(0x1f5)](_0x9695dd(0x1e0),{'val':_0x322e72[_0x9695dd(0x1a2)],'ack':!![]});const _0x43c1b0={'timestamp':Date[_0x9695dd(0x195)](),'id':Date['now']()[_0x9695dd(0x1db)](),'analysis':{'activity':{'summary':_0x322e72[_0x9695dd(0x1a2)],'isAlert':_0x322e72['isAlert'],'alertReason':_0x322e72[_0x9695dd(0x1e7)]},'comfort':{'automationProposal':_0x322e72[_0x9695dd(0x1ef)]}}};_0x27b471['analysisHistory'][_0x9695dd(0x1f6)](_0x43c1b0);if(_0x27b471[_0x9695dd(0x184)]['length']>0x32)_0x27b471[_0x9695dd(0x184)][_0x9695dd(0x1c0)]();await _0x27b471[_0x9695dd(0x1f5)]('analysis.analysisHistory',{'val':JSON['stringify'](_0x27b471[_0x9695dd(0x184)]),'ack':!![]});const _0x4c7209=_0x322e72[_0x9695dd(0x185)]||![];_0x4c7209!==_0x27b471[_0x9695dd(0x1d4)]&&(await _0x27b471[_0x9695dd(0x1f5)]('analysis.isAlert',{'val':_0x4c7209,'ack':!![]}),_0x27b471['lastAlertState']=_0x4c7209,_0x4c7209&&(await _0x27b471[_0x9695dd(0x1f5)](_0x9695dd(0x1e6),{'val':_0x322e72[_0x9695dd(0x1e7)],'ack':!![]}),setup[_0x9695dd(0x19e)](_0x27b471,_0x9695dd(0x1c8)+_0x322e72['alertReason'],![],_0x322e72[_0x9695dd(0x1c7)])));if(_0x322e72[_0x9695dd(0x1ef)]&&_0x322e72[_0x9695dd(0x1ef)][_0x9695dd(0x1c6)]){await _0x27b471[_0x9695dd(0x1f5)](_0x9695dd(0x1a9),{'val':!![],'ack':!![]}),await _0x27b471['setStateAsync'](_0x9695dd(0x17b),{'val':_0x322e72[_0x9695dd(0x1ef)][_0x9695dd(0x1d7)],'ack':!![]}),await _0x27b471['setStateAsync'](_0x9695dd(0x1f2),{'val':_0x322e72[_0x9695dd(0x1ef)][_0x9695dd(0x1dc)],'ack':!![]}),await _0x27b471[_0x9695dd(0x1f5)](_0x9695dd(0x1d8),{'val':JSON['stringify'](_0x322e72['automationProposal'][_0x9695dd(0x1b9)]),'ack':!![]});if(_0x3667cc)executeAutomationAction(_0x27b471);}}catch(_0x57a7fb){_0x27b471[_0x9695dd(0x1df)][_0x9695dd(0x1fb)](_0x9695dd(0x1fa)+_0x57a7fb[_0x9695dd(0x187)]);}}async function createDailyDigest(_0x187048,_0x243a4d){const _0x310765=a0_0x2b1293;if(!_0x187048[_0x310765(0x1ab)])return;if(!canCallApi()){await _0x187048[_0x310765(0x1f5)](LTM_DP_STATUS,{'val':_0x310765(0x1f8),'ack':!![]});return;}await _0x187048[_0x310765(0x1f5)](LTM_DP_STATUS,{'val':_0x310765(0x19c),'ack':!![]});if(!_0x187048[_0x310765(0x1b3)]||_0x187048[_0x310765(0x18e)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x187048[_0x310765(0x1f5)](LTM_DP_STATUS,{'val':_0x310765(0x1a4),'ack':!![]});return;}const _0x1f4a03=JSON[_0x310765(0x1fc)](JSON['stringify'](_0x187048[_0x310765(0x18e)])),_0x1e9287=_0x1f4a03[_0x310765(0x181)],_0x2f0ba6=_0x310765(0x178)+JSON['stringify'](_0x1f4a03);try{updateApiTimestamp();const _0xb5e8ba=await _0x187048[_0x310765(0x1b3)][_0x310765(0x1c2)](_0x2f0ba6),_0x1cc8e3=JSON['parse'](_0xb5e8ba[_0x310765(0x1fd)][_0x310765(0x19d)]()[_0x310765(0x1a0)](/```json|```/g,'')[_0x310765(0x1b0)]()),_0x2821b4={'timestamp':new Date()[_0x310765(0x1ae)](),'eventCount':_0x1e9287,'summary':_0x1cc8e3[_0x310765(0x1a2)]||_0x310765(0x1fe),'activityLevel':_0x1cc8e3[_0x310765(0x1d6)]||_0x310765(0x1ee),'systemMode':_0x187048['currentSystemMode']};_0x187048[_0x310765(0x191)][_0x310765(0x1cf)](_0x2821b4);const _0xa6b174=_0x187048['config'][_0x310765(0x1f0)]||0x3c;_0x187048[_0x310765(0x191)]['length']>_0xa6b174&&_0x187048[_0x310765(0x191)][_0x310765(0x1de)](0x0,_0x187048['dailyDigests'][_0x310765(0x181)]-_0xa6b174);await _0x187048['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x310765(0x1c3)](_0x187048[_0x310765(0x191)]),'ack':!![]}),_0x187048['rawEventLog']=[],await _0x187048['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x310765(0x1c3)](_0x187048[_0x310765(0x18e)]),'ack':!![]}),await _0x187048[_0x310765(0x1f5)](LTM_DP_STATUS,{'val':_0x310765(0x1d2),'ack':!![]});const _0x2afcff=_0x310765(0x1c9)+_0x1cc8e3[_0x310765(0x1a2)]+_0x310765(0x1b4)+_0x1cc8e3[_0x310765(0x1d6)];setup['sendNotification'](_0x187048,_0x2afcff,![],![]);if(_0x187048[_0x310765(0x1ab)]&&_0x243a4d)_0x243a4d[_0x310765(0x18a)](_0x187048,_0x310765(0x1e2),{'digest':_0x2821b4});}catch(_0x30e5d0){_0x187048[_0x310765(0x1df)]['error'](_0x30e5d0['message']);}}async function runBaselineDriftAnalysis(_0x292add){const _0x1fc598=a0_0x2b1293;if(!_0x292add[_0x1fc598(0x1ab)]||!_0x292add[_0x1fc598(0x1b3)])return;if(!canCallApi())return;const _0x168a3b=_0x292add[_0x1fc598(0x1f3)]['ltmStbWindowDays']||0xe;if(_0x292add[_0x1fc598(0x191)][_0x1fc598(0x181)]<_0x168a3b+0x7){await _0x292add[_0x1fc598(0x1f5)](_0x1fc598(0x1d0),{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x3f97f4=_0x292add[_0x1fc598(0x191)][_0x1fc598(0x1f1)](-_0x168a3b),_0x51a35b=_0x292add[_0x1fc598(0x191)][_0x1fc598(0x1f1)](0x0,_0x292add['dailyDigests'][_0x1fc598(0x181)]-_0x168a3b),_0x4659c3=_0x1fc598(0x18b)+JSON[_0x1fc598(0x1c3)](_0x51a35b)+'\x0aSTB:\x20'+JSON[_0x1fc598(0x1c3)](_0x3f97f4);try{updateApiTimestamp();const _0x41bfd3=await _0x292add[_0x1fc598(0x1b3)]['generateContent'](_0x4659c3),_0x11643e=JSON[_0x1fc598(0x1fc)](_0x41bfd3[_0x1fc598(0x1fd)][_0x1fc598(0x19d)]()['replace'](/```json|```/g,'')[_0x1fc598(0x1b0)]());_0x11643e[_0x1fc598(0x18d)]&&(await _0x292add['setStateAsync'](_0x1fc598(0x1d0),{'val':_0x11643e[_0x1fc598(0x18d)],'ack':!![]}),await _0x292add[_0x1fc598(0x1f5)]('LTM.driftAnalysis.driftDetails',{'val':_0x11643e[_0x1fc598(0x1aa)],'ack':!![]}),await _0x292add[_0x1fc598(0x1f5)](_0x1fc598(0x1bd),{'val':Date['now'](),'ack':!![]}));}catch(_0x31dee1){}}async function executeAutomationAction(_0x4b1d2f){const _0x2fc742=a0_0x2b1293;try{const _0x14139e=await _0x4b1d2f['getStateAsync']('analysis.automation.targetId'),_0xc59a02=await _0x4b1d2f['getStateAsync']('analysis.automation.targetValue');if(_0x14139e&&_0x14139e['val']&&_0xc59a02){const _0x252e28=_0x14139e[_0x2fc742(0x1ea)];let _0xb4b54b=_0xc59a02[_0x2fc742(0x1ea)];try{_0xb4b54b=JSON['parse'](_0xb4b54b);}catch(_0x5a5178){}_0x4b1d2f[_0x2fc742(0x1df)][_0x2fc742(0x1c4)](_0x2fc742(0x180)+_0x252e28+_0x2fc742(0x1a6)+_0xb4b54b),await _0x4b1d2f['setForeignStateAsync'](_0x252e28,_0xb4b54b);}else _0x4b1d2f[_0x2fc742(0x1df)][_0x2fc742(0x182)](_0x2fc742(0x1e5));}catch(_0x282242){_0x4b1d2f[_0x2fc742(0x1df)]['error']('BUTLER\x20Execution\x20Error:\x20'+_0x282242['message']);}}async function sendMorningBriefing(_0x3d079d){const _0xdede53=a0_0x2b1293;if(!_0x3d079d[_0xdede53(0x1b3)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x724319=_0xdede53(0x1b6),_0x9d378c=await _0x3d079d['geminiModel'][_0xdede53(0x1c2)](_0x724319),_0xd272a6=_0x9d378c[_0xdede53(0x1fd)][_0xdede53(0x19d)]();setup[_0xdede53(0x19e)](_0x3d079d,_0xdede53(0x18f)+_0xd272a6);}catch(_0x4c758b){_0x3d079d[_0xdede53(0x1df)][_0xdede53(0x1fb)](_0xdede53(0x189)+_0x4c758b[_0xdede53(0x187)]);}}module[a0_0x2b1293(0x1a8)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};