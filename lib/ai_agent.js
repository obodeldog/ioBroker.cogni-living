const a0_0x58364c=a0_0x4f48;(function(_0x490780,_0x5950f0){const _0x3cc72f=a0_0x4f48,_0x158faf=_0x490780();while(!![]){try{const _0x1c3168=-parseInt(_0x3cc72f(0xd2))/0x1+-parseInt(_0x3cc72f(0x8d))/0x2*(-parseInt(_0x3cc72f(0xec))/0x3)+parseInt(_0x3cc72f(0xe9))/0x4+-parseInt(_0x3cc72f(0xac))/0x5+-parseInt(_0x3cc72f(0xb4))/0x6+parseInt(_0x3cc72f(0x103))/0x7*(parseInt(_0x3cc72f(0xe8))/0x8)+-parseInt(_0x3cc72f(0x91))/0x9*(parseInt(_0x3cc72f(0x10f))/0xa);if(_0x1c3168===_0x5950f0)break;else _0x158faf['push'](_0x158faf['shift']());}catch(_0x282adb){_0x158faf['push'](_0x158faf['shift']());}}}(a0_0xba10,0xbd4ab));const a0_0x5f3d34=(function(){let _0x26a6b2=!![];return function(_0x415dbe,_0x4016ef){const _0x4fe0b7=_0x26a6b2?function(){const _0x1524b1=a0_0x4f48;if(_0x4016ef){const _0xe099b7=_0x4016ef[_0x1524b1(0xaf)](_0x415dbe,arguments);return _0x4016ef=null,_0xe099b7;}}:function(){};return _0x26a6b2=![],_0x4fe0b7;};}()),a0_0x48f215=a0_0x5f3d34(this,function(){const _0x787a97=a0_0x4f48;return a0_0x48f215[_0x787a97(0x102)]()['search'](_0x787a97(0x106))[_0x787a97(0x102)]()[_0x787a97(0xfe)](a0_0x48f215)[_0x787a97(0xcd)](_0x787a97(0x106));});a0_0x48f215();'use strict';function a0_0xba10(){const _0x1c0f2b=['.\x20EVENTS:\x20','stringify','.Current.IsNight','reason','alertReason','2840990IHZBWd','analysis.automation.targetId','.\x20ANWESEND:\x20','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','Gemini\x20Error:\x20','lastAlertState','Unbekannt\x20(Kein\x20Sensor)','length','LTM.rawEventLog','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','activityLevel','4Jajpmj','setStateAsync','BUTLER\x20Execution\x20Error:\x20','.\x20SYSTEM_MODE:\x20','18BxNRcJ','¬∞C,\x20','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','rawEventLog','baselineDrift','splice','unshift','geminiModel','approved','Success','generic','trim','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','.\x20EMERGENCY:\x20','pop','.Current.WeatherText','‚ö†Ô∏è\x20ALARM:\x20','val','getStateAsync','system.presenceWho','LTM.driftAnalysis.lastCheck','üåÖ\x20Morning\x20Briefing:\x0a','warn','Wetterdaten\x20nicht\x20abrufbar','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','livingContext','Keine\x20Details.','837285tfLnkw','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','Tag','apply','N/A\x20(Learning)','exports','detected','setForeignStateAsync','744474sbvyyT','\x20->\x20','toISOString','push','\x0aSTB:\x20','analysis.lastResult','.Current.Temperature','%)\x20nach\x20\x22',',\x20Lichtverh√§ltnisse:\x20','models/gemini-flash-latest','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','generateContent','analysis.analysisHistory','dailyDigests','sendNotification',',\x20Wetter:\x20','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','toFixed','isAlert','KI\x20offline\x20(Fallback)','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','log','response','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','search','eventHistory','now','weatherInstance','normal','371367DcrUEy','error','summary','aiPersona','description','analysis.automation.description','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','Unbekannt','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','LTM.driftAnalysis.driftDetails','üìÖ\x20Daily\x20Digest:\x0a','.\x20KONTEXT:\x20','.forecast.current.temperature','ANALYZE_HEALTH','decision','targetId','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','currentSystemMode','analysis.activitySummary','parse','send','debug','997592pCkXeM','3121212JagBum','@google/generative-ai','automationProposal','903963dbaZiv','Sicherheit\x20geht\x20vor.','text','message','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','Skipped\x20(Traffic)','analysisHistory','info','KI-Fehler\x20(Fallback)','config','./setup','LTM.driftAnalysis.baselineDrift','targetValue','slice','ltmStbWindowDays','\x20√ºbersprungen\x20(Auto-Approved).','analysis.alertReason','getForeignStateAsync','constructor','analysis.automation.targetValue','isProVersion','replace','toString','35ruPEho','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','LTM.dailyDigests','(((.+)+)+)+$','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','Skipped\x20(No\x20AI\x20or\x20Data)','useWeather'];a0_0xba10=function(){return _0x1c0f2b;};return a0_0xba10();}const {GoogleGenerativeAI}=require(a0_0x58364c(0xea)),setup=require(a0_0x58364c(0xf6)),GEMINI_MODEL=a0_0x58364c(0xbd),LTM_DP_DAILY_DIGESTS=a0_0x58364c(0x105),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG=a0_0x58364c(0x8a),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x58364c(0xc4),'senior_aal':a0_0x58364c(0xbe),'family':a0_0x58364c(0x107),'single_comfort':a0_0x58364c(0x8b),'security':a0_0x58364c(0xed),'energy_saver':a0_0x58364c(0x104)};function canCallApi(){const _0x49a7b5=Date['now']();return _0x49a7b5-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0xc99eca){const _0x4fecc3=a0_0x58364c;if(!_0xc99eca[_0x4fecc3(0xf5)][_0x4fecc3(0x109)]||!_0xc99eca['config'][_0x4fecc3(0xd0)])return _0x4fecc3(0x115);try{const _0x4ecceb=_0xc99eca[_0x4fecc3(0xf5)][_0x4fecc3(0xd0)];let _0x17b737=await _0xc99eca[_0x4fecc3(0xfd)](_0x4ecceb+_0x4fecc3(0xba));if(!_0x17b737)_0x17b737=await _0xc99eca[_0x4fecc3(0xfd)](_0x4ecceb+_0x4fecc3(0xde));let _0x211e8e=await _0xc99eca[_0x4fecc3(0xfd)](_0x4ecceb+_0x4fecc3(0xa0));if(!_0x211e8e)_0x211e8e=await _0xc99eca['getForeignStateAsync'](_0x4ecceb+'.forecast.current.state');let _0x20892e=_0x4fecc3(0xd9);const _0x46f6a9=await _0xc99eca[_0x4fecc3(0xfd)](_0x4ecceb+_0x4fecc3(0x10c));if(_0x46f6a9)_0x20892e=_0x46f6a9['val']?'Nacht':_0x4fecc3(0xae);if(_0x17b737&&_0x211e8e)return _0x17b737[_0x4fecc3(0xa2)]+_0x4fecc3(0x92)+_0x211e8e[_0x4fecc3(0xa2)]+_0x4fecc3(0xbc)+_0x20892e;}catch(_0x3b51c7){}return _0x4fecc3(0xa8);}async function consultButler(_0x56d8d4,_0x2485ae,_0x53bc10,_0xf58857){const _0x1fc525=a0_0x58364c;if(!_0x56d8d4['geminiModel'])return{'approved':!![],'reason':_0x1fc525(0xc8)};const _0x3bf234=Date[_0x1fc525(0xcf)]();if(decisionCache[_0x2485ae]&&_0x3bf234-decisionCache[_0x2485ae]['timestamp']<CACHE_TTL_MS){const _0x1cb0cf=decisionCache[_0x2485ae][_0x1fc525(0xe0)];return _0x56d8d4['log'][_0x1fc525(0xe7)](_0x1fc525(0x9d)+_0x2485ae+_0x1fc525(0xb5)+(_0x1cb0cf[_0x1fc525(0x99)]?'OK':'NO')+'\x20('+_0x1cb0cf[_0x1fc525(0x10d)]+')'),_0x1cb0cf;}if(!canCallApi())return _0x56d8d4[_0x1fc525(0xca)][_0x1fc525(0xe7)]('ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20'+_0x2485ae+_0x1fc525(0xfb)),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x35e840=new Date()['toLocaleTimeString'](),_0x24ba72=await getWeatherContext(_0x56d8d4),_0x244c4e=PERSONA_MAPPING[_0x56d8d4[_0x1fc525(0xf5)][_0x1fc525(0xd5)]||_0x1fc525(0x9b)],_0x4337e3='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x35e840+_0x1fc525(0xc3)+_0x24ba72+_0x1fc525(0xf0)+(_0xf58857*0x64)[_0x1fc525(0xc6)](0x0)+_0x1fc525(0xbb)+_0x2485ae+'\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22'+_0x53bc10+_0x1fc525(0xd8)+_0x244c4e+_0x1fc525(0xc9);try{updateApiTimestamp();const _0x1ba242=await _0x56d8d4[_0x1fc525(0x98)][_0x1fc525(0xbf)](_0x4337e3),_0x54cdef=_0x1ba242[_0x1fc525(0xcb)][_0x1fc525(0xee)]()[_0x1fc525(0x101)](/```json|```/g,'')[_0x1fc525(0x9c)](),_0x4c48ab=JSON[_0x1fc525(0xe5)](_0x54cdef);return decisionCache[_0x2485ae]={'decision':_0x4c48ab,'timestamp':_0x3bf234},_0x4c48ab;}catch(_0x3653bb){return _0x56d8d4[_0x1fc525(0xca)][_0x1fc525(0xa7)]('ü§ñ\x20Butler\x20Brain\x20Error:\x20'+_0x3653bb['message']),decisionCache[_0x2485ae]={'decision':{'approved':!![],'reason':_0x1fc525(0xf4)},'timestamp':_0x3bf234-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x1fc525(0xf4)};}}async function runGeminiAnalysis(_0x323fc6,_0x7ca263=''){const _0x5d3255=a0_0x58364c;if(!_0x323fc6[_0x5d3255(0x98)])return;if(!canCallApi()){_0x323fc6['log'][_0x5d3255(0xe7)](_0x5d3255(0xda));return;}if(_0x323fc6[_0x5d3255(0xce)][_0x5d3255(0x116)]===0x0)return;const _0x50c9c0=_0x323fc6[_0x5d3255(0xce)][_0x5d3255(0xf9)](0x0,0xf),_0x4a0ed5=_0x323fc6[_0x5d3255(0xe3)],_0x40790e=PERSONA_MAPPING[_0x323fc6[_0x5d3255(0xf5)][_0x5d3255(0xd5)]||_0x5d3255(0x9b)],_0xaccb01=_0x323fc6[_0x5d3255(0xf5)][_0x5d3255(0xaa)]||_0x5d3255(0xab);let _0xb7951='Unbekannt';try{const _0xb3f3d=await _0x323fc6['getStateAsync'](_0x5d3255(0xa4));if(_0xb3f3d&&_0xb3f3d[_0x5d3255(0xa2)])_0xb7951=_0xb3f3d[_0x5d3255(0xa2)];}catch(_0x6f2a5b){}let _0x5ba5b4=![];try{const _0xc5755f=await _0x323fc6['getStateAsync']('analysis.automation.autoApply');if(_0xc5755f&&_0xc5755f['val'])_0x5ba5b4=!![];}catch(_0x8aef99){}const _0x5317d3=_0x5d3255(0xa9)+_0x40790e+_0x5d3255(0xdd)+_0xaccb01+_0x5d3255(0x90)+_0x4a0ed5+_0x5d3255(0x111)+_0xb7951+_0x5d3255(0x10a)+JSON[_0x5d3255(0x10b)](_0x50c9c0)+_0x5d3255(0x9e)+_0x7ca263+_0x5d3255(0xad);try{updateApiTimestamp();const _0x204edb=await _0x323fc6[_0x5d3255(0x98)][_0x5d3255(0xbf)](_0x5317d3),_0x2795e9=JSON[_0x5d3255(0xe5)](_0x204edb[_0x5d3255(0xcb)][_0x5d3255(0xee)]()['replace'](/```json|```/g,'')[_0x5d3255(0x9c)]());await _0x323fc6['setStateAsync'](_0x5d3255(0xb9),{'val':JSON[_0x5d3255(0x10b)](_0x2795e9),'ack':!![]});if(_0x2795e9[_0x5d3255(0xd4)])await _0x323fc6['setStateAsync'](_0x5d3255(0xe4),{'val':_0x2795e9['summary'],'ack':!![]});const _0x25d25a={'timestamp':Date[_0x5d3255(0xcf)](),'id':Date['now']()[_0x5d3255(0x102)](),'analysis':{'activity':{'summary':_0x2795e9[_0x5d3255(0xd4)],'isAlert':_0x2795e9['isAlert'],'alertReason':_0x2795e9['alertReason']},'comfort':{'automationProposal':_0x2795e9[_0x5d3255(0xeb)]}}};_0x323fc6['analysisHistory'][_0x5d3255(0x97)](_0x25d25a);if(_0x323fc6[_0x5d3255(0xf2)]['length']>0x32)_0x323fc6[_0x5d3255(0xf2)][_0x5d3255(0x9f)]();await _0x323fc6['setStateAsync'](_0x5d3255(0xc0),{'val':JSON['stringify'](_0x323fc6[_0x5d3255(0xf2)]),'ack':!![]});const _0x1aa48a=_0x2795e9[_0x5d3255(0xc7)]||![];_0x1aa48a!==_0x323fc6[_0x5d3255(0x114)]&&(await _0x323fc6[_0x5d3255(0x8e)]('analysis.isAlert',{'val':_0x1aa48a,'ack':!![]}),_0x323fc6[_0x5d3255(0x114)]=_0x1aa48a,_0x1aa48a&&(await _0x323fc6['setStateAsync'](_0x5d3255(0xfc),{'val':_0x2795e9['alertReason'],'ack':!![]}),setup['sendNotification'](_0x323fc6,_0x5d3255(0xa1)+_0x2795e9[_0x5d3255(0x10e)],![],_0x2795e9['isEmergency'])));if(_0x2795e9[_0x5d3255(0xeb)]&&_0x2795e9[_0x5d3255(0xeb)][_0x5d3255(0xb2)]){await _0x323fc6['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x323fc6[_0x5d3255(0x8e)](_0x5d3255(0xd7),{'val':_0x2795e9['automationProposal'][_0x5d3255(0xd6)],'ack':!![]}),await _0x323fc6[_0x5d3255(0x8e)](_0x5d3255(0x110),{'val':_0x2795e9['automationProposal'][_0x5d3255(0xe1)],'ack':!![]}),await _0x323fc6[_0x5d3255(0x8e)]('analysis.automation.targetValue',{'val':JSON[_0x5d3255(0x10b)](_0x2795e9['automationProposal'][_0x5d3255(0xf8)]),'ack':!![]});if(_0x5ba5b4)executeAutomationAction(_0x323fc6);}}catch(_0x2823c8){_0x323fc6[_0x5d3255(0xca)][_0x5d3255(0xd3)](_0x5d3255(0x113)+_0x2823c8[_0x5d3255(0xef)]);}}async function createDailyDigest(_0x29edbb,_0x2f8330){const _0x56f513=a0_0x58364c;if(!_0x29edbb['isProVersion'])return;if(!canCallApi()){await _0x29edbb['setStateAsync'](LTM_DP_STATUS,{'val':_0x56f513(0xf1),'ack':!![]});return;}await _0x29edbb[_0x56f513(0x8e)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x29edbb[_0x56f513(0x98)]||_0x29edbb['rawEventLog']['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x29edbb[_0x56f513(0x8e)](LTM_DP_STATUS,{'val':_0x56f513(0x108),'ack':!![]});return;}const _0x1932a2=JSON[_0x56f513(0xe5)](JSON['stringify'](_0x29edbb[_0x56f513(0x94)])),_0x21d75b=_0x1932a2[_0x56f513(0x116)],_0x58d0ca=_0x56f513(0x93)+JSON[_0x56f513(0x10b)](_0x1932a2);try{updateApiTimestamp();const _0x55aba1=await _0x29edbb[_0x56f513(0x98)]['generateContent'](_0x58d0ca),_0x2d5ed3=JSON[_0x56f513(0xe5)](_0x55aba1['response'][_0x56f513(0xee)]()[_0x56f513(0x101)](/```json|```/g,'')['trim']()),_0x4cd88d={'timestamp':new Date()[_0x56f513(0xb6)](),'eventCount':_0x21d75b,'summary':_0x2d5ed3[_0x56f513(0xd4)]||'Digest','activityLevel':_0x2d5ed3['activityLevel']||_0x56f513(0xd1),'systemMode':_0x29edbb['currentSystemMode']};_0x29edbb['dailyDigests'][_0x56f513(0xb7)](_0x4cd88d);const _0x234086=_0x29edbb[_0x56f513(0xf5)]['ltmLtbWindowDays']||0x3c;_0x29edbb['dailyDigests'][_0x56f513(0x116)]>_0x234086&&_0x29edbb[_0x56f513(0xc1)][_0x56f513(0x96)](0x0,_0x29edbb[_0x56f513(0xc1)][_0x56f513(0x116)]-_0x234086);await _0x29edbb['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x56f513(0x10b)](_0x29edbb[_0x56f513(0xc1)]),'ack':!![]}),_0x29edbb[_0x56f513(0x94)]=[],await _0x29edbb[_0x56f513(0x8e)](LTM_DP_RAW_LOG,{'val':JSON[_0x56f513(0x10b)](_0x29edbb[_0x56f513(0x94)]),'ack':!![]}),await _0x29edbb['setStateAsync'](LTM_DP_STATUS,{'val':_0x56f513(0x9a),'ack':!![]});const _0x388f52=_0x56f513(0xdc)+_0x2d5ed3[_0x56f513(0xd4)]+'\x0aAktivit√§t:\x20'+_0x2d5ed3[_0x56f513(0x8c)];setup[_0x56f513(0xc2)](_0x29edbb,_0x388f52,![],![]);if(_0x29edbb['isProVersion']&&_0x2f8330)_0x2f8330[_0x56f513(0xe6)](_0x29edbb,_0x56f513(0xdf),{'digest':_0x4cd88d});}catch(_0x7e2c84){_0x29edbb[_0x56f513(0xca)][_0x56f513(0xd3)](_0x7e2c84[_0x56f513(0xef)]);}}function a0_0x4f48(_0x316ab2,_0x1841e6){const _0x43caa2=a0_0xba10();return a0_0x4f48=function(_0x48f215,_0x5f3d34){_0x48f215=_0x48f215-0x8a;let _0xba10f7=_0x43caa2[_0x48f215];return _0xba10f7;},a0_0x4f48(_0x316ab2,_0x1841e6);}async function runBaselineDriftAnalysis(_0x475ff6){const _0x3f4637=a0_0x58364c;if(!_0x475ff6[_0x3f4637(0x100)]||!_0x475ff6[_0x3f4637(0x98)])return;if(!canCallApi())return;const _0x3a40e1=_0x475ff6['config'][_0x3f4637(0xfa)]||0xe;if(_0x475ff6[_0x3f4637(0xc1)][_0x3f4637(0x116)]<_0x3a40e1+0x7){await _0x475ff6[_0x3f4637(0x8e)](_0x3f4637(0xf7),{'val':_0x3f4637(0xb0),'ack':!![]});return;}const _0x2fb415=_0x475ff6[_0x3f4637(0xc1)][_0x3f4637(0xf9)](-_0x3a40e1),_0x4faaaf=_0x475ff6['dailyDigests']['slice'](0x0,_0x475ff6[_0x3f4637(0xc1)][_0x3f4637(0x116)]-_0x3a40e1),_0x12f15a=_0x3f4637(0x112)+JSON['stringify'](_0x4faaaf)+_0x3f4637(0xb8)+JSON[_0x3f4637(0x10b)](_0x2fb415);try{updateApiTimestamp();const _0x3b93bb=await _0x475ff6[_0x3f4637(0x98)][_0x3f4637(0xbf)](_0x12f15a),_0x14a6f4=JSON['parse'](_0x3b93bb[_0x3f4637(0xcb)]['text']()[_0x3f4637(0x101)](/```json|```/g,'')[_0x3f4637(0x9c)]());_0x14a6f4[_0x3f4637(0x95)]&&(await _0x475ff6[_0x3f4637(0x8e)](_0x3f4637(0xf7),{'val':_0x14a6f4[_0x3f4637(0x95)],'ack':!![]}),await _0x475ff6[_0x3f4637(0x8e)](_0x3f4637(0xdb),{'val':_0x14a6f4['driftDetails'],'ack':!![]}),await _0x475ff6[_0x3f4637(0x8e)](_0x3f4637(0xa5),{'val':Date[_0x3f4637(0xcf)](),'ack':!![]}));}catch(_0x9d67e3){}}async function executeAutomationAction(_0x16fb95){const _0x561ea9=a0_0x58364c;try{const _0x47b420=await _0x16fb95['getStateAsync']('analysis.automation.targetId'),_0x1f49f2=await _0x16fb95[_0x561ea9(0xa3)](_0x561ea9(0xff));if(_0x47b420&&_0x47b420['val']&&_0x1f49f2){const _0x35a191=_0x47b420[_0x561ea9(0xa2)];let _0x39bb74=_0x1f49f2['val'];try{_0x39bb74=JSON[_0x561ea9(0xe5)](_0x39bb74);}catch(_0x308e6e){}_0x16fb95[_0x561ea9(0xca)][_0x561ea9(0xf3)](_0x561ea9(0xcc)+_0x35a191+'\x20=\x20'+_0x39bb74),await _0x16fb95[_0x561ea9(0xb3)](_0x35a191,_0x39bb74);}else _0x16fb95[_0x561ea9(0xca)][_0x561ea9(0xa7)](_0x561ea9(0xe2));}catch(_0x509e1d){_0x16fb95[_0x561ea9(0xca)]['error'](_0x561ea9(0x8f)+_0x509e1d[_0x561ea9(0xef)]);}}async function sendMorningBriefing(_0x199669){const _0x532b9c=a0_0x58364c;if(!_0x199669[_0x532b9c(0x98)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x1e7695=_0x532b9c(0xc5),_0x1fe8be=await _0x199669[_0x532b9c(0x98)]['generateContent'](_0x1e7695),_0x2c813c=_0x1fe8be[_0x532b9c(0xcb)]['text']();setup['sendNotification'](_0x199669,_0x532b9c(0xa6)+_0x2c813c);}catch(_0x7f80c1){_0x199669[_0x532b9c(0xca)][_0x532b9c(0xd3)]('Briefing\x20Error:\x20'+_0x7f80c1[_0x532b9c(0xef)]);}}module[a0_0x58364c(0xb1)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};