const a0_0x16c5d8=a0_0x215e;(function(_0x4a7e86,_0x47ec75){const _0x2cbbb5=a0_0x215e,_0x376d60=_0x4a7e86();while(!![]){try{const _0x2bbca2=parseInt(_0x2cbbb5(0x224))/0x1*(parseInt(_0x2cbbb5(0x21c))/0x2)+parseInt(_0x2cbbb5(0x1fd))/0x3+-parseInt(_0x2cbbb5(0x1f1))/0x4+-parseInt(_0x2cbbb5(0x1cf))/0x5*(parseInt(_0x2cbbb5(0x207))/0x6)+parseInt(_0x2cbbb5(0x1df))/0x7*(-parseInt(_0x2cbbb5(0x1e9))/0x8)+parseInt(_0x2cbbb5(0x23e))/0x9*(parseInt(_0x2cbbb5(0x230))/0xa)+parseInt(_0x2cbbb5(0x212))/0xb*(parseInt(_0x2cbbb5(0x20a))/0xc);if(_0x2bbca2===_0x47ec75)break;else _0x376d60['push'](_0x376d60['shift']());}catch(_0xf6d460){_0x376d60['push'](_0x376d60['shift']());}}}(a0_0x2b96,0xc88db));const a0_0x1854ad=(function(){let _0x30a280=!![];return function(_0x4a9caa,_0x205b33){const _0x1ba181=_0x30a280?function(){if(_0x205b33){const _0x28607d=_0x205b33['apply'](_0x4a9caa,arguments);return _0x205b33=null,_0x28607d;}}:function(){};return _0x30a280=![],_0x1ba181;};}()),a0_0x1b1b8e=a0_0x1854ad(this,function(){const _0x4076fe=a0_0x215e;return a0_0x1b1b8e['toString']()[_0x4076fe(0x1c0)](_0x4076fe(0x214))[_0x4076fe(0x1c7)]()['constructor'](a0_0x1b1b8e)[_0x4076fe(0x1c0)]('(((.+)+)+)+$');});function a0_0x2b96(){const _0xcb2ec4=['currentSystemMode','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','getForeignStateAsync','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','Gemini\x20Error:\x20','\x20->\x20','getStateAsync','isEmergency','val','@google/generative-ai','ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20','8834967SCHTbh','ltmStbWindowDays','âš ï¸\x20ALARM:\x20','decision','analysis.automation.autoApply','Skipped\x20(Traffic)','BUTLER\x20Execution\x20Error:\x20','geminiModel','analysis.automation.patternDetected','weatherInstance','analysis.automation.targetId','info','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','replace','search','.\x20ANWESEND:\x20','aiPersona','debug','Digest','LTM.driftAnalysis.lastCheck','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','toString','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','Sicherheit\x20geht\x20vor.','reason','toFixed','splice','baselineDrift','log','3902045JckfkG','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','activityLevel','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','normal','rawEventLog','\x20=\x20','trim','isProVersion','automationProposal','message',').\x20Sending\x20notification...','\x20Ã¼bersprungen\x20(Auto-Approved).','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','slice','1601537FpMduk','LTM.dailyDigests','alertReason','LTM.driftAnalysis.baselineDrift','Nacht','analysis.isAlert','.\x20KONTEXT:\x20','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','ðŸŒ…\x20Morning\x20Briefing:\x0a','.Current.Temperature','48ZBPwqm','stringify','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','analysis.automation.targetValue','text','driftDetails','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','Unbekannt','2540608VXlVMq','Â°C,\x20','%)\x20nach\x20\x22','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20',',\x20Wetter:\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','models/gemini-flash-latest','parse','ANALYZE_HEALTH','summary','config','analysisHistory','1535775cTxbHV','setStateAsync','send','ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','analysis.alertReason','Traffic-Schutz\x20(Auto-Approved)','livingContext','Keine\x20Details.','lastAlertState','sendNotification','6nBkxey','.\x20SYSTEM_MODE:\x20','exports','448764OjfgOw','analysis.lastResult','now','./setup','response','LTM.rawEventLog','toLocaleTimeString','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','187qLrsLZ','error','(((.+)+)+)+$','generic','ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','system.presenceWho','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','N/A\x20(Learning)','analysis.automation.description','.Current.IsNight','14ZzVqtQ','.\x20EVENTS:\x20',',\x20LichtverhÃ¤ltnisse:\x20','generateContent','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','length','push','approved','211491eoBbmJ','\x0aSTB:\x20','KI-Fehler\x20(Fallback)','setForeignStateAsync','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','dailyDigests','eventHistory','pop','Tag','isAlert','KI\x20offline\x20(Fallback)','warn','10IkpRkG','LTM.driftAnalysis.driftDetails','.Current.WeatherText'];a0_0x2b96=function(){return _0xcb2ec4;};return a0_0x2b96();}function a0_0x215e(_0x85823f,_0x53c421){const _0xaabe51=a0_0x2b96();return a0_0x215e=function(_0x1b1b8e,_0x1854ad){_0x1b1b8e=_0x1b1b8e-0x1b4;let _0x2b96df=_0xaabe51[_0x1b1b8e];return _0x2b96df;},a0_0x215e(_0x85823f,_0x53c421);}a0_0x1b1b8e();'use strict';const {GoogleGenerativeAI}=require(a0_0x16c5d8(0x23c)),setup=require(a0_0x16c5d8(0x20d)),GEMINI_MODEL=a0_0x16c5d8(0x1f7),LTM_DP_DAILY_DIGESTS=a0_0x16c5d8(0x1e0),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG=a0_0x16c5d8(0x20f),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x16c5d8(0x1dd),'senior_aal':a0_0x16c5d8(0x1ef),'family':a0_0x16c5d8(0x1d1),'single_comfort':a0_0x16c5d8(0x211),'security':a0_0x16c5d8(0x1c9),'energy_saver':a0_0x16c5d8(0x1c8)};function canCallApi(){const _0x49574c=a0_0x16c5d8,_0x23e851=Date[_0x49574c(0x20c)]();return _0x23e851-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x1fda7a=a0_0x16c5d8;lastGlobalApiCall=Date[_0x1fda7a(0x20c)]();}async function getWeatherContext(_0x25834a){const _0x98f632=a0_0x16c5d8;if(!_0x25834a[_0x98f632(0x1fb)]['useWeather']||!_0x25834a[_0x98f632(0x1fb)][_0x98f632(0x1bb)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x1c3d4b=_0x25834a[_0x98f632(0x1fb)][_0x98f632(0x1bb)];let _0x365f5d=await _0x25834a[_0x98f632(0x235)](_0x1c3d4b+_0x98f632(0x1e8));if(!_0x365f5d)_0x365f5d=await _0x25834a[_0x98f632(0x235)](_0x1c3d4b+'.forecast.current.temperature');let _0x549790=await _0x25834a['getForeignStateAsync'](_0x1c3d4b+_0x98f632(0x232));if(!_0x549790)_0x549790=await _0x25834a[_0x98f632(0x235)](_0x1c3d4b+'.forecast.current.state');let _0x29a7d9=_0x98f632(0x1f0);const _0x49fd64=await _0x25834a[_0x98f632(0x235)](_0x1c3d4b+_0x98f632(0x21b));if(_0x49fd64)_0x29a7d9=_0x49fd64[_0x98f632(0x23b)]?_0x98f632(0x1e3):_0x98f632(0x22c);if(_0x365f5d&&_0x549790)return _0x365f5d[_0x98f632(0x23b)]+_0x98f632(0x1f2)+_0x549790[_0x98f632(0x23b)]+_0x98f632(0x21e)+_0x29a7d9;}catch(_0x3a0e0f){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x3329fd,_0x370708,_0x37194e,_0x5ebc63){const _0x4f0d0c=a0_0x16c5d8;if(!_0x3329fd['geminiModel'])return{'approved':!![],'reason':_0x4f0d0c(0x22e)};const _0x5b6c8a=Date[_0x4f0d0c(0x20c)]();if(decisionCache[_0x370708]&&_0x5b6c8a-decisionCache[_0x370708]['timestamp']<CACHE_TTL_MS){const _0x3896b9=decisionCache[_0x370708][_0x4f0d0c(0x1b5)];return _0x3329fd['log'][_0x4f0d0c(0x1c3)](_0x4f0d0c(0x220)+_0x370708+_0x4f0d0c(0x238)+(_0x3896b9[_0x4f0d0c(0x223)]?'OK':'NO')+'\x20('+_0x3896b9[_0x4f0d0c(0x1ca)]+')'),_0x3896b9;}if(!canCallApi())return _0x3329fd[_0x4f0d0c(0x1ce)][_0x4f0d0c(0x1c3)](_0x4f0d0c(0x228)+_0x370708+_0x4f0d0c(0x1dc)),{'approved':!![],'reason':_0x4f0d0c(0x202)};const _0x37e900=new Date()[_0x4f0d0c(0x210)](),_0x1ca300=await getWeatherContext(_0x3329fd),_0x29fed3=PERSONA_MAPPING[_0x3329fd[_0x4f0d0c(0x1fb)][_0x4f0d0c(0x1c2)]||_0x4f0d0c(0x215)],_0x521998='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x37e900+_0x4f0d0c(0x1f5)+_0x1ca300+_0x4f0d0c(0x1c6)+(_0x5ebc63*0x64)[_0x4f0d0c(0x1cb)](0x0)+_0x4f0d0c(0x1f3)+_0x370708+_0x4f0d0c(0x1be)+_0x37194e+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x29fed3+_0x4f0d0c(0x1f4);try{updateApiTimestamp();const _0x44dcde=await _0x3329fd[_0x4f0d0c(0x1b9)][_0x4f0d0c(0x21f)](_0x521998),_0x3c3242=_0x44dcde[_0x4f0d0c(0x20e)][_0x4f0d0c(0x1ed)]()[_0x4f0d0c(0x1bf)](/```json|```/g,'')['trim'](),_0x115f6e=JSON[_0x4f0d0c(0x1f8)](_0x3c3242);return decisionCache[_0x370708]={'decision':_0x115f6e,'timestamp':_0x5b6c8a},_0x115f6e;}catch(_0x374cd7){return _0x3329fd[_0x4f0d0c(0x1ce)]['warn'](_0x4f0d0c(0x1d3)+_0x374cd7['message']),decisionCache[_0x370708]={'decision':{'approved':!![],'reason':_0x4f0d0c(0x226)},'timestamp':_0x5b6c8a-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x4f0d0c(0x226)};}}async function runGeminiAnalysis(_0x49c9a9,_0x341a51=''){const _0x4c43cf=a0_0x16c5d8;if(!_0x49c9a9[_0x4c43cf(0x1b9)])return;if(!canCallApi()){_0x49c9a9[_0x4c43cf(0x1ce)][_0x4c43cf(0x1c3)](_0x4c43cf(0x234));return;}if(_0x49c9a9[_0x4c43cf(0x22a)][_0x4c43cf(0x221)]===0x0)return;const _0x42f351=_0x49c9a9[_0x4c43cf(0x22a)][_0x4c43cf(0x1de)](0x0,0xf),_0x1486f3=_0x49c9a9[_0x4c43cf(0x233)],_0x27f355=PERSONA_MAPPING[_0x49c9a9['config'][_0x4c43cf(0x1c2)]||_0x4c43cf(0x215)],_0x254bfc=_0x49c9a9['config'][_0x4c43cf(0x203)]||_0x4c43cf(0x204);let _0x4e0c37=_0x4c43cf(0x1f0);try{const _0x756421=await _0x49c9a9[_0x4c43cf(0x239)](_0x4c43cf(0x217));if(_0x756421&&_0x756421[_0x4c43cf(0x23b)])_0x4e0c37=_0x756421['val'];}catch(_0x46c1c3){}let _0x5c271a=![];try{const _0x59253a=await _0x49c9a9[_0x4c43cf(0x239)](_0x4c43cf(0x1b6));if(_0x59253a&&_0x59253a[_0x4c43cf(0x23b)])_0x5c271a=!![];}catch(_0x17227e){}const _0x246321=_0x4c43cf(0x1f6)+_0x27f355+_0x4c43cf(0x1e5)+_0x254bfc+_0x4c43cf(0x208)+_0x1486f3+_0x4c43cf(0x1c1)+_0x4e0c37+_0x4c43cf(0x21d)+JSON[_0x4c43cf(0x1ea)](_0x42f351)+'.\x20EMERGENCY:\x20'+_0x341a51+_0x4c43cf(0x1eb);try{updateApiTimestamp();const _0x3e7185=await _0x49c9a9['geminiModel']['generateContent'](_0x246321),_0x4f515d=JSON[_0x4c43cf(0x1f8)](_0x3e7185[_0x4c43cf(0x20e)][_0x4c43cf(0x1ed)]()[_0x4c43cf(0x1bf)](/```json|```/g,'')[_0x4c43cf(0x1d7)]());await _0x49c9a9[_0x4c43cf(0x1fe)](_0x4c43cf(0x20b),{'val':JSON['stringify'](_0x4f515d),'ack':!![]});if(_0x4f515d[_0x4c43cf(0x1fa)])await _0x49c9a9[_0x4c43cf(0x1fe)]('analysis.activitySummary',{'val':_0x4f515d[_0x4c43cf(0x1fa)],'ack':!![]});const _0x3820c1={'timestamp':Date[_0x4c43cf(0x20c)](),'id':Date['now']()[_0x4c43cf(0x1c7)](),'analysis':{'activity':{'summary':_0x4f515d[_0x4c43cf(0x1fa)],'isAlert':_0x4f515d['isAlert'],'alertReason':_0x4f515d['alertReason']},'comfort':{'automationProposal':_0x4f515d['automationProposal']}}};_0x49c9a9['analysisHistory']['unshift'](_0x3820c1);if(_0x49c9a9[_0x4c43cf(0x1fc)][_0x4c43cf(0x221)]>0x32)_0x49c9a9[_0x4c43cf(0x1fc)][_0x4c43cf(0x22b)]();await _0x49c9a9[_0x4c43cf(0x1fe)]('analysis.analysisHistory',{'val':JSON[_0x4c43cf(0x1ea)](_0x49c9a9['analysisHistory']),'ack':!![]});const _0x201a58=_0x4f515d[_0x4c43cf(0x22d)]||![];_0x201a58!==_0x49c9a9[_0x4c43cf(0x205)]&&(await _0x49c9a9[_0x4c43cf(0x1fe)](_0x4c43cf(0x1e4),{'val':_0x201a58,'ack':!![]}),_0x49c9a9[_0x4c43cf(0x205)]=_0x201a58,_0x201a58&&(await _0x49c9a9['setStateAsync'](_0x4c43cf(0x201),{'val':_0x4f515d[_0x4c43cf(0x1e1)],'ack':!![]}),setup[_0x4c43cf(0x206)](_0x49c9a9,_0x4c43cf(0x1b4)+_0x4f515d[_0x4c43cf(0x1e1)],![],_0x4f515d[_0x4c43cf(0x23a)])));if(_0x4f515d[_0x4c43cf(0x1d9)]&&_0x4f515d[_0x4c43cf(0x1d9)]['detected']){await _0x49c9a9[_0x4c43cf(0x1fe)](_0x4c43cf(0x1ba),{'val':!![],'ack':!![]}),await _0x49c9a9['setStateAsync'](_0x4c43cf(0x21a),{'val':_0x4f515d[_0x4c43cf(0x1d9)]['description'],'ack':!![]}),await _0x49c9a9[_0x4c43cf(0x1fe)](_0x4c43cf(0x1bc),{'val':_0x4f515d[_0x4c43cf(0x1d9)]['targetId'],'ack':!![]}),await _0x49c9a9[_0x4c43cf(0x1fe)]('analysis.automation.targetValue',{'val':JSON[_0x4c43cf(0x1ea)](_0x4f515d[_0x4c43cf(0x1d9)]['targetValue']),'ack':!![]});if(_0x5c271a)executeAutomationAction(_0x49c9a9);}}catch(_0x211491){_0x49c9a9[_0x4c43cf(0x1ce)]['error'](_0x4c43cf(0x237)+_0x211491[_0x4c43cf(0x1da)]);}}async function createDailyDigest(_0x36d656,_0xb62909){const _0x302814=a0_0x16c5d8;if(!_0x36d656[_0x302814(0x1d8)])return;if(!canCallApi()){await _0x36d656[_0x302814(0x1fe)](LTM_DP_STATUS,{'val':_0x302814(0x1b7),'ack':!![]});return;}await _0x36d656['setStateAsync'](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x36d656['geminiModel']||_0x36d656['rawEventLog']['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x36d656[_0x302814(0x1fe)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x4618eb=JSON[_0x302814(0x1f8)](JSON[_0x302814(0x1ea)](_0x36d656[_0x302814(0x1d5)])),_0x2297ea=_0x4618eb['length'],_0x5a42fc=_0x302814(0x236)+JSON[_0x302814(0x1ea)](_0x4618eb);try{updateApiTimestamp();const _0x44318a=await _0x36d656[_0x302814(0x1b9)]['generateContent'](_0x5a42fc),_0x30cc0d=JSON[_0x302814(0x1f8)](_0x44318a[_0x302814(0x20e)][_0x302814(0x1ed)]()[_0x302814(0x1bf)](/```json|```/g,'')[_0x302814(0x1d7)]()),_0x45facd={'timestamp':new Date()['toISOString'](),'eventCount':_0x2297ea,'summary':_0x30cc0d['summary']||_0x302814(0x1c4),'activityLevel':_0x30cc0d['activityLevel']||_0x302814(0x1d4),'systemMode':_0x36d656['currentSystemMode']};_0x36d656[_0x302814(0x229)][_0x302814(0x222)](_0x45facd);const _0x39e0fd=_0x36d656[_0x302814(0x1fb)]['ltmLtbWindowDays']||0x3c;_0x36d656[_0x302814(0x229)][_0x302814(0x221)]>_0x39e0fd&&_0x36d656[_0x302814(0x229)][_0x302814(0x1cc)](0x0,_0x36d656[_0x302814(0x229)]['length']-_0x39e0fd);await _0x36d656[_0x302814(0x1fe)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x302814(0x1ea)](_0x36d656[_0x302814(0x229)]),'ack':!![]}),_0x36d656['rawEventLog']=[],await _0x36d656['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x302814(0x1ea)](_0x36d656[_0x302814(0x1d5)]),'ack':!![]}),await _0x36d656[_0x302814(0x1fe)](LTM_DP_STATUS,{'val':'Success','ack':!![]});const _0x15ae4d='ðŸ“…\x20Daily\x20Digest:\x0a'+_0x30cc0d['summary']+'\x0aAktivitÃ¤t:\x20'+_0x30cc0d[_0x302814(0x1d2)];setup[_0x302814(0x206)](_0x36d656,_0x15ae4d,![],![]);if(_0x36d656[_0x302814(0x1d8)]&&_0xb62909)_0xb62909[_0x302814(0x1ff)](_0x36d656,_0x302814(0x1f9),{'digest':_0x45facd});}catch(_0x11a05e){_0x36d656[_0x302814(0x1ce)][_0x302814(0x213)](_0x11a05e[_0x302814(0x1da)]);}}async function runBaselineDriftAnalysis(_0x2d7b14){const _0x3fb9b3=a0_0x16c5d8;if(!_0x2d7b14[_0x3fb9b3(0x1d8)]||!_0x2d7b14['geminiModel'])return;if(!canCallApi())return;const _0x1a3171=_0x2d7b14[_0x3fb9b3(0x1fb)][_0x3fb9b3(0x23f)]||0xe;if(_0x2d7b14[_0x3fb9b3(0x229)][_0x3fb9b3(0x221)]<_0x1a3171+0x7){await _0x2d7b14[_0x3fb9b3(0x1fe)](_0x3fb9b3(0x1e2),{'val':_0x3fb9b3(0x219),'ack':!![]});return;}const _0x40c8fa=_0x2d7b14['dailyDigests'][_0x3fb9b3(0x1de)](-_0x1a3171),_0x44b004=_0x2d7b14[_0x3fb9b3(0x229)]['slice'](0x0,_0x2d7b14['dailyDigests'][_0x3fb9b3(0x221)]-_0x1a3171),_0x2ecdde=_0x3fb9b3(0x218)+JSON[_0x3fb9b3(0x1ea)](_0x44b004)+_0x3fb9b3(0x225)+JSON[_0x3fb9b3(0x1ea)](_0x40c8fa);try{updateApiTimestamp();const _0x5c9a8f=await _0x2d7b14[_0x3fb9b3(0x1b9)]['generateContent'](_0x2ecdde),_0x1c0255=JSON[_0x3fb9b3(0x1f8)](_0x5c9a8f[_0x3fb9b3(0x20e)]['text']()['replace'](/```json|```/g,'')[_0x3fb9b3(0x1d7)]());_0x1c0255[_0x3fb9b3(0x1cd)]&&(await _0x2d7b14[_0x3fb9b3(0x1fe)](_0x3fb9b3(0x1e2),{'val':_0x1c0255[_0x3fb9b3(0x1cd)],'ack':!![]}),await _0x2d7b14['setStateAsync'](_0x3fb9b3(0x231),{'val':_0x1c0255[_0x3fb9b3(0x1ee)],'ack':!![]}),await _0x2d7b14[_0x3fb9b3(0x1fe)](_0x3fb9b3(0x1c5),{'val':Date[_0x3fb9b3(0x20c)](),'ack':!![]}));}catch(_0x496986){}}async function executeAutomationAction(_0x57b8a8){const _0xc003f4=a0_0x16c5d8;try{const _0x2d64ad=await _0x57b8a8[_0xc003f4(0x239)](_0xc003f4(0x1bc)),_0x42dd63=await _0x57b8a8[_0xc003f4(0x239)](_0xc003f4(0x1ec));if(_0x2d64ad&&_0x2d64ad[_0xc003f4(0x23b)]&&_0x42dd63){const _0x5b382f=_0x2d64ad[_0xc003f4(0x23b)];let _0x6120bb=_0x42dd63[_0xc003f4(0x23b)];try{_0x6120bb=JSON['parse'](_0x6120bb);}catch(_0x450f6d){}_0x57b8a8[_0xc003f4(0x1ce)][_0xc003f4(0x1bd)](_0xc003f4(0x1e6)+_0x5b382f+_0xc003f4(0x1d6)+_0x6120bb),await _0x57b8a8[_0xc003f4(0x227)](_0x5b382f,_0x6120bb);}else _0x57b8a8[_0xc003f4(0x1ce)][_0xc003f4(0x22f)]('ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x5165c5){_0x57b8a8[_0xc003f4(0x1ce)][_0xc003f4(0x213)](_0xc003f4(0x1b8)+_0x5165c5['message']);}}async function sendMorningBriefing(_0x3778fc){const _0x37ad94=a0_0x16c5d8;if(!_0x3778fc[_0x37ad94(0x1b9)]){_0x3778fc[_0x37ad94(0x1ce)]['warn'](_0x37ad94(0x216));return;}_0x3778fc[_0x37ad94(0x1ce)]['info'](_0x37ad94(0x200));try{updateApiTimestamp();const _0x585934=_0x37ad94(0x1d0),_0x452a75=await _0x3778fc[_0x37ad94(0x1b9)]['generateContent'](_0x585934),_0x132bfa=_0x452a75[_0x37ad94(0x20e)][_0x37ad94(0x1ed)]();_0x3778fc['log'][_0x37ad94(0x1bd)](_0x37ad94(0x23d)+_0x132bfa[_0x37ad94(0x221)]+_0x37ad94(0x1db)),setup['sendNotification'](_0x3778fc,_0x37ad94(0x1e7)+_0x132bfa);}catch(_0x333ebf){_0x3778fc[_0x37ad94(0x1ce)][_0x37ad94(0x213)]('Briefing\x20Error:\x20'+_0x333ebf[_0x37ad94(0x1da)]);}}module[a0_0x16c5d8(0x209)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};