const a0_0x3c1c7a=a0_0x336c;(function(_0x8b9c4b,_0x285e06){const _0xf45023=a0_0x336c,_0x39dd24=_0x8b9c4b();while(!![]){try{const _0x4ef7a2=parseInt(_0xf45023(0x20a))/0x1+parseInt(_0xf45023(0x218))/0x2+parseInt(_0xf45023(0x1e0))/0x3*(parseInt(_0xf45023(0x1eb))/0x4)+parseInt(_0xf45023(0x238))/0x5*(parseInt(_0xf45023(0x1e2))/0x6)+-parseInt(_0xf45023(0x1ca))/0x7*(-parseInt(_0xf45023(0x1cb))/0x8)+-parseInt(_0xf45023(0x200))/0x9+-parseInt(_0xf45023(0x1cc))/0xa;if(_0x4ef7a2===_0x285e06)break;else _0x39dd24['push'](_0x39dd24['shift']());}catch(_0x174b9b){_0x39dd24['push'](_0x39dd24['shift']());}}}(a0_0x190e,0x65e84));const a0_0xb4553f=(function(){let _0x57d2fc=!![];return function(_0x5e13c7,_0x25816b){const _0xf237f0=_0x57d2fc?function(){const _0x5ad93a=a0_0x336c;if(_0x25816b){const _0x2913d9=_0x25816b[_0x5ad93a(0x21b)](_0x5e13c7,arguments);return _0x25816b=null,_0x2913d9;}}:function(){};return _0x57d2fc=![],_0xf237f0;};}()),a0_0x2b6f3e=a0_0xb4553f(this,function(){const _0x312162=a0_0x336c;return a0_0x2b6f3e['toString']()[_0x312162(0x1fc)](_0x312162(0x1f4))[_0x312162(0x227)]()[_0x312162(0x222)](a0_0x2b6f3e)['search'](_0x312162(0x1f4));});a0_0x2b6f3e();function a0_0x190e(){const _0x548562=['analysis.lastResult','Success','\x0aSTB:\x20','Skipped\x20(No\x20AI\x20or\x20Data)','analysis.activitySummary','KI\x20offline\x20(Fallback)','models/gemini-flash-latest','toLocaleTimeString','N/A\x20(Learning)','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.',',\x20LichtverhÃ¤ltnisse:\x20','.\x20SYSTEM_MODE:\x20','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','isAlert','generateContent','BUTLER\x20Execution\x20Error:\x20','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','%)\x20nach\x20\x22','7MikCEk','1185944jZLikF','16189150UyQwvL','splice','config','summary','analysis.alertReason','analysis.automation.targetValue','exports','analysisHistory','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','.Current.WeatherText','driftDetails','lastAlertState','analysis.automation.patternDetected','currentSystemMode','slice','setStateAsync','approved','.\x20EVENTS:\x20','automationProposal','log','1807599FQqyZQ','âš ï¸\x20ALARM:\x20','12mtWttR','ltmStbWindowDays','.forecast.current.temperature','now','ltmLtbWindowDays','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','Â°C,\x20','length','4WZtBou','alertReason','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','message','Nacht','.Current.IsNight','isEmergency','.\x20EMERGENCY:\x20','(((.+)+)+)+$','generic','detected','.Current.Temperature','warn','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','LTM.rawEventLog','info','search','Digest','\x20Ã¼bersprungen\x20(Auto-Approved).','LTM.driftAnalysis.lastCheck','1297647UWPdxN','LTM.driftAnalysis.driftDetails','geminiModel','\x20=\x20',',\x20Wetter:\x20','trim','normal','Skipped\x20(Traffic)','.forecast.current.state','@google/generative-ai','540198RqxRBL','getForeignStateAsync','Briefing\x20Error:\x20','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','Unbekannt','targetId','.\x20ANWESEND:\x20','analysis.automation.autoApply','Gemini\x20Error:\x20','analysis.automation.targetId','toFixed','system.presenceWho','./setup','LTM.driftAnalysis.baselineDrift','1179160KtTXOA','debug','baselineDrift','apply','aiPersona','error','Sicherheit\x20geht\x20vor.','KI-Fehler\x20(Fallback)','activityLevel','rawEventLog','constructor','targetValue','sendNotification','weatherInstance','LTM.processingStatus','toString','dailyDigests','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','val','getStateAsync','parse','eventHistory','analysis.automation.description','reason','response','timestamp','stringify','Tag','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','isProVersion','replace','749890XrLEDk','unshift','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.'];a0_0x190e=function(){return _0x548562;};return a0_0x190e();}'use strict';const {GoogleGenerativeAI}=require(a0_0x3c1c7a(0x209)),setup=require(a0_0x3c1c7a(0x216)),GEMINI_MODEL=a0_0x3c1c7a(0x241),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x3c1c7a(0x226),LTM_DP_RAW_LOG=a0_0x3c1c7a(0x1fa),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x3c1c7a(0x22a),'senior_aal':a0_0x3c1c7a(0x23a),'family':a0_0x3c1c7a(0x245),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':a0_0x3c1c7a(0x21e),'energy_saver':'PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'};function canCallApi(){const _0x12da1d=a0_0x3c1c7a,_0x5821c0=Date[_0x12da1d(0x1e5)]();return _0x5821c0-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0xd6ed6b){const _0x25f758=a0_0x3c1c7a;if(!_0xd6ed6b[_0x25f758(0x1ce)]['useWeather']||!_0xd6ed6b[_0x25f758(0x1ce)][_0x25f758(0x225)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x58eb80=_0xd6ed6b[_0x25f758(0x1ce)][_0x25f758(0x225)];let _0xaf6576=await _0xd6ed6b[_0x25f758(0x20b)](_0x58eb80+_0x25f758(0x1f7));if(!_0xaf6576)_0xaf6576=await _0xd6ed6b[_0x25f758(0x20b)](_0x58eb80+_0x25f758(0x1e4));let _0x4024a5=await _0xd6ed6b[_0x25f758(0x20b)](_0x58eb80+_0x25f758(0x1d5));if(!_0x4024a5)_0x4024a5=await _0xd6ed6b[_0x25f758(0x20b)](_0x58eb80+_0x25f758(0x208));let _0xefa0af=_0x25f758(0x20e);const _0x2ac0a7=await _0xd6ed6b[_0x25f758(0x20b)](_0x58eb80+_0x25f758(0x1f1));if(_0x2ac0a7)_0xefa0af=_0x2ac0a7[_0x25f758(0x22b)]?_0x25f758(0x1f0):_0x25f758(0x234);if(_0xaf6576&&_0x4024a5)return _0xaf6576['val']+_0x25f758(0x1e9)+_0x4024a5[_0x25f758(0x22b)]+_0x25f758(0x246)+_0xefa0af;}catch(_0x52f0ca){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x9c6229,_0x24387b,_0x456683,_0x3fa426){const _0x23fa3b=a0_0x3c1c7a;if(!_0x9c6229['geminiModel'])return{'approved':!![],'reason':_0x23fa3b(0x240)};const _0x19308e=Date[_0x23fa3b(0x1e5)]();if(decisionCache[_0x24387b]&&_0x19308e-decisionCache[_0x24387b][_0x23fa3b(0x232)]<CACHE_TTL_MS){const _0x1679f0=decisionCache[_0x24387b]['decision'];return _0x9c6229[_0x23fa3b(0x1df)][_0x23fa3b(0x219)]('ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20'+_0x24387b+'\x20->\x20'+(_0x1679f0[_0x23fa3b(0x1dc)]?'OK':'NO')+'\x20('+_0x1679f0[_0x23fa3b(0x230)]+')'),_0x1679f0;}if(!canCallApi())return _0x9c6229[_0x23fa3b(0x1df)][_0x23fa3b(0x219)](_0x23fa3b(0x1e8)+_0x24387b+_0x23fa3b(0x1fe)),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x216315=new Date()[_0x23fa3b(0x242)](),_0x284a6a=await getWeatherContext(_0x9c6229),_0x5ccc0b=PERSONA_MAPPING[_0x9c6229[_0x23fa3b(0x1ce)]['aiPersona']||_0x23fa3b(0x1f5)],_0x413e5a='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x216315+_0x23fa3b(0x204)+_0x284a6a+_0x23fa3b(0x235)+(_0x3fa426*0x64)[_0x23fa3b(0x214)](0x0)+_0x23fa3b(0x1c9)+_0x24387b+_0x23fa3b(0x1c8)+_0x456683+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x5ccc0b+_0x23fa3b(0x1f9);try{updateApiTimestamp();const _0x5f121a=await _0x9c6229[_0x23fa3b(0x202)][_0x23fa3b(0x24a)](_0x413e5a),_0xc1eb0a=_0x5f121a[_0x23fa3b(0x231)]['text']()[_0x23fa3b(0x237)](/```json|```/g,'')['trim'](),_0x976d6b=JSON[_0x23fa3b(0x22d)](_0xc1eb0a);return decisionCache[_0x24387b]={'decision':_0x976d6b,'timestamp':_0x19308e},_0x976d6b;}catch(_0x198857){return _0x9c6229[_0x23fa3b(0x1df)][_0x23fa3b(0x1f8)](_0x23fa3b(0x20d)+_0x198857['message']),decisionCache[_0x24387b]={'decision':{'approved':!![],'reason':_0x23fa3b(0x21f)},'timestamp':_0x19308e-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x23fa3b(0x21f)};}}async function runGeminiAnalysis(_0x469079,_0xfaeb39=''){const _0x39a2c8=a0_0x3c1c7a;if(!_0x469079[_0x39a2c8(0x202)])return;if(!canCallApi()){_0x469079['log'][_0x39a2c8(0x219)](_0x39a2c8(0x1ee));return;}if(_0x469079[_0x39a2c8(0x22e)]['length']===0x0)return;const _0x21efe5=_0x469079[_0x39a2c8(0x22e)][_0x39a2c8(0x1da)](0x0,0xf),_0x5fff68=_0x469079['currentSystemMode'],_0x2653f2=PERSONA_MAPPING[_0x469079[_0x39a2c8(0x1ce)][_0x39a2c8(0x21c)]||_0x39a2c8(0x1f5)],_0x29ffd8=_0x469079[_0x39a2c8(0x1ce)]['livingContext']||'Keine\x20Details.';let _0x4f4c47=_0x39a2c8(0x20e);try{const _0x1e7b4b=await _0x469079[_0x39a2c8(0x22c)](_0x39a2c8(0x215));if(_0x1e7b4b&&_0x1e7b4b[_0x39a2c8(0x22b)])_0x4f4c47=_0x1e7b4b['val'];}catch(_0x3ac92d){}let _0x5b7235=![];try{const _0x54ba44=await _0x469079[_0x39a2c8(0x22c)](_0x39a2c8(0x211));if(_0x54ba44&&_0x54ba44[_0x39a2c8(0x22b)])_0x5b7235=!![];}catch(_0x13e8b3){}const _0x47e6e8=_0x39a2c8(0x1e7)+_0x2653f2+'.\x20KONTEXT:\x20'+_0x29ffd8+_0x39a2c8(0x247)+_0x5fff68+_0x39a2c8(0x210)+_0x4f4c47+_0x39a2c8(0x1dd)+JSON[_0x39a2c8(0x233)](_0x21efe5)+_0x39a2c8(0x1f3)+_0xfaeb39+_0x39a2c8(0x1d4);try{updateApiTimestamp();const _0x560fda=await _0x469079[_0x39a2c8(0x202)][_0x39a2c8(0x24a)](_0x47e6e8),_0x3bc4e0=JSON[_0x39a2c8(0x22d)](_0x560fda[_0x39a2c8(0x231)]['text']()['replace'](/```json|```/g,'')[_0x39a2c8(0x205)]());await _0x469079[_0x39a2c8(0x1db)](_0x39a2c8(0x23b),{'val':JSON['stringify'](_0x3bc4e0),'ack':!![]});if(_0x3bc4e0[_0x39a2c8(0x1cf)])await _0x469079[_0x39a2c8(0x1db)](_0x39a2c8(0x23f),{'val':_0x3bc4e0[_0x39a2c8(0x1cf)],'ack':!![]});const _0x3245f5={'timestamp':Date[_0x39a2c8(0x1e5)](),'id':Date[_0x39a2c8(0x1e5)]()[_0x39a2c8(0x227)](),'analysis':{'activity':{'summary':_0x3bc4e0['summary'],'isAlert':_0x3bc4e0[_0x39a2c8(0x249)],'alertReason':_0x3bc4e0[_0x39a2c8(0x1ec)]},'comfort':{'automationProposal':_0x3bc4e0[_0x39a2c8(0x1de)]}}};_0x469079[_0x39a2c8(0x1d3)][_0x39a2c8(0x239)](_0x3245f5);if(_0x469079[_0x39a2c8(0x1d3)]['length']>0x32)_0x469079[_0x39a2c8(0x1d3)]['pop']();await _0x469079[_0x39a2c8(0x1db)]('analysis.analysisHistory',{'val':JSON['stringify'](_0x469079[_0x39a2c8(0x1d3)]),'ack':!![]});const _0x19fa8f=_0x3bc4e0['isAlert']||![];_0x19fa8f!==_0x469079[_0x39a2c8(0x1d7)]&&(await _0x469079[_0x39a2c8(0x1db)]('analysis.isAlert',{'val':_0x19fa8f,'ack':!![]}),_0x469079[_0x39a2c8(0x1d7)]=_0x19fa8f,_0x19fa8f&&(await _0x469079[_0x39a2c8(0x1db)](_0x39a2c8(0x1d0),{'val':_0x3bc4e0[_0x39a2c8(0x1ec)],'ack':!![]}),setup[_0x39a2c8(0x224)](_0x469079,_0x39a2c8(0x1e1)+_0x3bc4e0['alertReason'],![],_0x3bc4e0[_0x39a2c8(0x1f2)])));if(_0x3bc4e0[_0x39a2c8(0x1de)]&&_0x3bc4e0[_0x39a2c8(0x1de)][_0x39a2c8(0x1f6)]){await _0x469079[_0x39a2c8(0x1db)](_0x39a2c8(0x1d8),{'val':!![],'ack':!![]}),await _0x469079[_0x39a2c8(0x1db)](_0x39a2c8(0x22f),{'val':_0x3bc4e0[_0x39a2c8(0x1de)]['description'],'ack':!![]}),await _0x469079['setStateAsync'](_0x39a2c8(0x213),{'val':_0x3bc4e0[_0x39a2c8(0x1de)][_0x39a2c8(0x20f)],'ack':!![]}),await _0x469079[_0x39a2c8(0x1db)](_0x39a2c8(0x1d1),{'val':JSON[_0x39a2c8(0x233)](_0x3bc4e0[_0x39a2c8(0x1de)][_0x39a2c8(0x223)]),'ack':!![]});if(_0x5b7235)executeAutomationAction(_0x469079);}}catch(_0x5e7204){_0x469079[_0x39a2c8(0x1df)]['error'](_0x39a2c8(0x212)+_0x5e7204['message']);}}function a0_0x336c(_0x5e18f9,_0x3bcaa5){const _0x786876=a0_0x190e();return a0_0x336c=function(_0x2b6f3e,_0xb4553f){_0x2b6f3e=_0x2b6f3e-0x1c8;let _0x190e31=_0x786876[_0x2b6f3e];return _0x190e31;},a0_0x336c(_0x5e18f9,_0x3bcaa5);}async function createDailyDigest(_0x118df5,_0x58d4a0){const _0x5c6650=a0_0x3c1c7a;if(!_0x118df5['isProVersion'])return;if(!canCallApi()){await _0x118df5['setStateAsync'](LTM_DP_STATUS,{'val':_0x5c6650(0x207),'ack':!![]});return;}await _0x118df5[_0x5c6650(0x1db)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x118df5[_0x5c6650(0x202)]||_0x118df5[_0x5c6650(0x221)][_0x5c6650(0x1ea)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x118df5[_0x5c6650(0x1db)](LTM_DP_STATUS,{'val':_0x5c6650(0x23e),'ack':!![]});return;}const _0xf12519=JSON[_0x5c6650(0x22d)](JSON['stringify'](_0x118df5[_0x5c6650(0x221)])),_0x116bfe=_0xf12519[_0x5c6650(0x1ea)],_0x522ea4=_0x5c6650(0x248)+JSON[_0x5c6650(0x233)](_0xf12519);try{updateApiTimestamp();const _0x4fe30a=await _0x118df5[_0x5c6650(0x202)][_0x5c6650(0x24a)](_0x522ea4),_0x3fbd11=JSON[_0x5c6650(0x22d)](_0x4fe30a[_0x5c6650(0x231)]['text']()[_0x5c6650(0x237)](/```json|```/g,'')[_0x5c6650(0x205)]()),_0x56d3d9={'timestamp':new Date()['toISOString'](),'eventCount':_0x116bfe,'summary':_0x3fbd11[_0x5c6650(0x1cf)]||_0x5c6650(0x1fd),'activityLevel':_0x3fbd11[_0x5c6650(0x220)]||_0x5c6650(0x206),'systemMode':_0x118df5[_0x5c6650(0x1d9)]};_0x118df5[_0x5c6650(0x228)]['push'](_0x56d3d9);const _0x4464b3=_0x118df5[_0x5c6650(0x1ce)][_0x5c6650(0x1e6)]||0x3c;_0x118df5[_0x5c6650(0x228)]['length']>_0x4464b3&&_0x118df5[_0x5c6650(0x228)][_0x5c6650(0x1cd)](0x0,_0x118df5[_0x5c6650(0x228)][_0x5c6650(0x1ea)]-_0x4464b3);await _0x118df5['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x5c6650(0x233)](_0x118df5[_0x5c6650(0x228)]),'ack':!![]}),_0x118df5['rawEventLog']=[],await _0x118df5[_0x5c6650(0x1db)](LTM_DP_RAW_LOG,{'val':JSON[_0x5c6650(0x233)](_0x118df5[_0x5c6650(0x221)]),'ack':!![]}),await _0x118df5[_0x5c6650(0x1db)](LTM_DP_STATUS,{'val':_0x5c6650(0x23c),'ack':!![]});if(_0x118df5[_0x5c6650(0x236)]&&_0x58d4a0)_0x58d4a0['send'](_0x118df5,'ANALYZE_HEALTH',{'digest':_0x56d3d9});}catch(_0xce8ec8){_0x118df5['log'][_0x5c6650(0x21d)](_0xce8ec8['message']);}}async function runBaselineDriftAnalysis(_0x24aa7a){const _0x33f07e=a0_0x3c1c7a;if(!_0x24aa7a[_0x33f07e(0x236)]||!_0x24aa7a['geminiModel'])return;if(!canCallApi())return;const _0xadf963=_0x24aa7a[_0x33f07e(0x1ce)][_0x33f07e(0x1e3)]||0xe;if(_0x24aa7a['dailyDigests'][_0x33f07e(0x1ea)]<_0xadf963+0x7){await _0x24aa7a[_0x33f07e(0x1db)](_0x33f07e(0x217),{'val':_0x33f07e(0x243),'ack':!![]});return;}const _0xa20e37=_0x24aa7a[_0x33f07e(0x228)][_0x33f07e(0x1da)](-_0xadf963),_0x1c6710=_0x24aa7a['dailyDigests'][_0x33f07e(0x1da)](0x0,_0x24aa7a['dailyDigests'][_0x33f07e(0x1ea)]-_0xadf963),_0x36755f=_0x33f07e(0x1ed)+JSON[_0x33f07e(0x233)](_0x1c6710)+_0x33f07e(0x23d)+JSON[_0x33f07e(0x233)](_0xa20e37);try{updateApiTimestamp();const _0x138834=await _0x24aa7a[_0x33f07e(0x202)][_0x33f07e(0x24a)](_0x36755f),_0x7827b4=JSON[_0x33f07e(0x22d)](_0x138834[_0x33f07e(0x231)]['text']()[_0x33f07e(0x237)](/```json|```/g,'')[_0x33f07e(0x205)]());_0x7827b4[_0x33f07e(0x21a)]&&(await _0x24aa7a['setStateAsync'](_0x33f07e(0x217),{'val':_0x7827b4['baselineDrift'],'ack':!![]}),await _0x24aa7a[_0x33f07e(0x1db)](_0x33f07e(0x201),{'val':_0x7827b4[_0x33f07e(0x1d6)],'ack':!![]}),await _0x24aa7a[_0x33f07e(0x1db)](_0x33f07e(0x1ff),{'val':Date[_0x33f07e(0x1e5)](),'ack':!![]}));}catch(_0x5f3496){}}async function executeAutomationAction(_0x21332a){const _0x33823d=a0_0x3c1c7a;try{const _0x253184=await _0x21332a['getStateAsync'](_0x33823d(0x213)),_0x3a3bae=await _0x21332a[_0x33823d(0x22c)](_0x33823d(0x1d1));if(_0x253184&&_0x253184['val']&&_0x3a3bae){const _0x2603c8=_0x253184[_0x33823d(0x22b)];let _0x8e19ce=_0x3a3bae['val'];try{_0x8e19ce=JSON['parse'](_0x8e19ce);}catch(_0x3987aa){}_0x21332a[_0x33823d(0x1df)][_0x33823d(0x1fb)](_0x33823d(0x244)+_0x2603c8+_0x33823d(0x203)+_0x8e19ce),await _0x21332a['setForeignStateAsync'](_0x2603c8,_0x8e19ce);}else _0x21332a[_0x33823d(0x1df)]['warn']('ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x2b50b7){_0x21332a[_0x33823d(0x1df)]['error'](_0x33823d(0x24b)+_0x2b50b7[_0x33823d(0x1ef)]);}}async function sendMorningBriefing(_0x2a30a5){const _0x2c0f6f=a0_0x3c1c7a;if(!_0x2a30a5[_0x2c0f6f(0x202)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x2c11ef=_0x2c0f6f(0x229),_0x22c9aa=await _0x2a30a5[_0x2c0f6f(0x202)]['generateContent'](_0x2c11ef),_0x20989f=_0x22c9aa[_0x2c0f6f(0x231)]['text']();setup[_0x2c0f6f(0x224)](_0x2a30a5,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x20989f);}catch(_0x379428){_0x2a30a5[_0x2c0f6f(0x1df)][_0x2c0f6f(0x21d)](_0x2c0f6f(0x20c)+_0x379428[_0x2c0f6f(0x1ef)]);}}module[a0_0x3c1c7a(0x1d2)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};