const a0_0x222a88=a0_0x47cb;(function(_0x515276,_0x295dd8){const _0x46eb88=a0_0x47cb,_0x30bc47=_0x515276();while(!![]){try{const _0x1addc9=parseInt(_0x46eb88(0x1b8))/0x1+parseInt(_0x46eb88(0x16f))/0x2*(parseInt(_0x46eb88(0x169))/0x3)+parseInt(_0x46eb88(0x1b7))/0x4+parseInt(_0x46eb88(0x188))/0x5+-parseInt(_0x46eb88(0x184))/0x6*(parseInt(_0x46eb88(0x1a0))/0x7)+parseInt(_0x46eb88(0x172))/0x8*(-parseInt(_0x46eb88(0x1e1))/0x9)+parseInt(_0x46eb88(0x1e4))/0xa*(-parseInt(_0x46eb88(0x173))/0xb);if(_0x1addc9===_0x295dd8)break;else _0x30bc47['push'](_0x30bc47['shift']());}catch(_0x3c9b02){_0x30bc47['push'](_0x30bc47['shift']());}}}(a0_0x56cb,0xd256d));const a0_0x484511=(function(){let _0x4fd37c=!![];return function(_0x43fda6,_0x2caac8){const _0x2ae0a7=_0x4fd37c?function(){const _0x511dd3=a0_0x47cb;if(_0x2caac8){const _0x44c62c=_0x2caac8[_0x511dd3(0x17f)](_0x43fda6,arguments);return _0x2caac8=null,_0x44c62c;}}:function(){};return _0x4fd37c=![],_0x2ae0a7;};}()),a0_0x5be5b6=a0_0x484511(this,function(){const _0x4b849c=a0_0x47cb;return a0_0x5be5b6[_0x4b849c(0x1a9)]()[_0x4b849c(0x170)](_0x4b849c(0x1cc))[_0x4b849c(0x1a9)]()[_0x4b849c(0x1d3)](a0_0x5be5b6)[_0x4b849c(0x170)]('(((.+)+)+)+$');});a0_0x5be5b6();'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require(a0_0x222a88(0x1de)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x222a88(0x1e7),LTM_DP_STATUS=a0_0x222a88(0x19c),LTM_DP_RAW_LOG=a0_0x222a88(0x174),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x222a88(0x166),'senior_aal':a0_0x222a88(0x16c),'family':a0_0x222a88(0x185),'single_comfort':a0_0x222a88(0x190),'security':'Sicherheit\x20geht\x20vor.','energy_saver':'PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'};function a0_0x56cb(){const _0x1c99bd=['KI\x20offline\x20(Fallback)','Tag','Â°C,\x20','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','replace','isProVersion','dailyDigests','\x0aAktivitÃ¤t:\x20','.Current.WeatherText','Wetterdaten\x20nicht\x20abrufbar','(((.+)+)+)+$','currentSystemMode','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','.\x20SYSTEM_MODE:\x20','eventHistory','analysis.automation.targetValue','toISOString','constructor','send','.forecast.current.temperature','debug','length','analysis.automation.description','aiPersona','Started...',',\x20LichtverhÃ¤ltnisse:\x20','driftDetails','analysis.isAlert','./setup','setForeignStateAsync','reason','56790lpMvpw','geminiModel','automationProposal','10fvsZbU','timestamp','alertReason','LTM.dailyDigests','analysis.automation.patternDetected','isEmergency','isAlert','decision','targetId','stringify','targetValue','toLocaleTimeString','slice','warn','ltmLtbWindowDays','analysis.automation.targetId','trim','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','push','baselineDrift','6ducYMC','LTM.driftAnalysis.driftDetails','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','Unbekannt','\x20=\x20','433892zdVbdS','search','Unbekannt\x20(Kein\x20Sensor)','2104dieDST','25394237JPxiqF','LTM.rawEventLog','getStateAsync','getForeignStateAsync','N/A\x20(Learning)','now','setStateAsync','ðŸ“…\x20Daily\x20Digest:\x0a','text','message','analysis.lastResult','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','apply','ðŸŒ…\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','parse','analysis.analysisHistory','generic','6beOwbc','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','analysisHistory','ANALYZE_HEALTH','8450285LlCAvM','toFixed','val','unshift','%)\x20nach\x20\x22','error','useWeather','log','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','âš ï¸\x20ALARM:\x20','\x20Ã¼bersprungen\x20(Auto-Approved).','summary','pop','ðŸ¤–\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','.Current.IsNight','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','splice','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','LTM.processingStatus','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','approved','\x20->\x20','400743BveTEC','response','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','lastAlertState','ltmStbWindowDays','config','.\x20ANWESEND:\x20','Gemini\x20Error:\x20','weatherInstance','toString',').\x20Sending\x20notification...','Keine\x20Details.','activityLevel','system.presenceWho','.Current.Temperature','generateContent','livingContext',',\x20Wetter:\x20','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','Skipped\x20(No\x20AI\x20or\x20Data)','Skipped\x20(Traffic)','exports','ðŸŒ…\x20Briefing\x20generated\x20(Length:\x20','5268984oFOpSu','1445700xunffr','info','Success','rawEventLog','sendNotification','\x0aSTB:\x20','analysis.automation.autoApply','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','.forecast.current.state','LTM.driftAnalysis.baselineDrift'];a0_0x56cb=function(){return _0x1c99bd;};return a0_0x56cb();}function a0_0x47cb(_0x5660a7,_0x54048a){const _0x5cec0a=a0_0x56cb();return a0_0x47cb=function(_0x5be5b6,_0x484511){_0x5be5b6=_0x5be5b6-0x15e;let _0x56cbab=_0x5cec0a[_0x5be5b6];return _0x56cbab;},a0_0x47cb(_0x5660a7,_0x54048a);}function canCallApi(){const _0x141363=a0_0x222a88,_0x4f699f=Date[_0x141363(0x178)]();return _0x4f699f-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x2b5cf2){const _0x233f64=a0_0x222a88;if(!_0x2b5cf2[_0x233f64(0x1a5)][_0x233f64(0x18e)]||!_0x2b5cf2[_0x233f64(0x1a5)][_0x233f64(0x1a8)])return _0x233f64(0x171);try{const _0x253b33=_0x2b5cf2['config'][_0x233f64(0x1a8)];let _0x37f9fa=await _0x2b5cf2[_0x233f64(0x176)](_0x253b33+_0x233f64(0x1ae));if(!_0x37f9fa)_0x37f9fa=await _0x2b5cf2[_0x233f64(0x176)](_0x253b33+_0x233f64(0x1d5));let _0x2bd00f=await _0x2b5cf2[_0x233f64(0x176)](_0x253b33+_0x233f64(0x1ca));if(!_0x2bd00f)_0x2bd00f=await _0x2b5cf2[_0x233f64(0x176)](_0x253b33+_0x233f64(0x1c0));let _0x16a00a=_0x233f64(0x16d);const _0x8c62bf=await _0x2b5cf2[_0x233f64(0x176)](_0x253b33+_0x233f64(0x196));if(_0x8c62bf)_0x16a00a=_0x8c62bf[_0x233f64(0x18a)]?'Nacht':_0x233f64(0x1c3);if(_0x37f9fa&&_0x2bd00f)return _0x37f9fa[_0x233f64(0x18a)]+_0x233f64(0x1c4)+_0x2bd00f['val']+_0x233f64(0x1db)+_0x16a00a;}catch(_0x3d3ef2){}return _0x233f64(0x1cb);}async function consultButler(_0x5c51ad,_0x339276,_0x19242c,_0xb78207){const _0xb5d689=a0_0x222a88;if(!_0x5c51ad[_0xb5d689(0x1e2)])return{'approved':!![],'reason':_0xb5d689(0x1c2)};const _0x108957=Date['now']();if(decisionCache[_0x339276]&&_0x108957-decisionCache[_0x339276][_0xb5d689(0x1e5)]<CACHE_TTL_MS){const _0x330a6f=decisionCache[_0x339276][_0xb5d689(0x1eb)];return _0x5c51ad[_0xb5d689(0x18f)]['debug'](_0xb5d689(0x1b2)+_0x339276+_0xb5d689(0x19f)+(_0x330a6f[_0xb5d689(0x19e)]?'OK':'NO')+'\x20('+_0x330a6f[_0xb5d689(0x1e0)]+')'),_0x330a6f;}if(!canCallApi())return _0x5c51ad[_0xb5d689(0x18f)][_0xb5d689(0x1d6)](_0xb5d689(0x1ce)+_0x339276+_0xb5d689(0x192)),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x4ec9fc=new Date()[_0xb5d689(0x15f)](),_0x5c81ff=await getWeatherContext(_0x5c51ad),_0x4a1513=PERSONA_MAPPING[_0x5c51ad[_0xb5d689(0x1a5)]['aiPersona']||_0xb5d689(0x183)],_0x1a3b9f='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x4ec9fc+_0xb5d689(0x1b1)+_0x5c81ff+_0xb5d689(0x165)+(_0xb78207*0x64)[_0xb5d689(0x189)](0x0)+_0xb5d689(0x18c)+_0x339276+_0xb5d689(0x197)+_0x19242c+_0xb5d689(0x16b)+_0x4a1513+_0xb5d689(0x1a2);try{updateApiTimestamp();const _0x42d777=await _0x5c51ad[_0xb5d689(0x1e2)][_0xb5d689(0x1af)](_0x1a3b9f),_0x13d16b=_0x42d777['response'][_0xb5d689(0x17b)]()['replace'](/```json|```/g,'')[_0xb5d689(0x164)](),_0x36d917=JSON[_0xb5d689(0x181)](_0x13d16b);return decisionCache[_0x339276]={'decision':_0x36d917,'timestamp':_0x108957},_0x36d917;}catch(_0x348725){return _0x5c51ad['log'][_0xb5d689(0x161)](_0xb5d689(0x198)+_0x348725[_0xb5d689(0x17c)]),decisionCache[_0x339276]={'decision':{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'},'timestamp':_0x108957-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x3f035b,_0x4dcb32=''){const _0x4c47a3=a0_0x222a88;if(!_0x3f035b[_0x4c47a3(0x1e2)])return;if(!canCallApi()){_0x3f035b[_0x4c47a3(0x18f)]['debug'](_0x4c47a3(0x1c5));return;}if(_0x3f035b[_0x4c47a3(0x1d0)][_0x4c47a3(0x1d7)]===0x0)return;const _0x5caab9=_0x3f035b[_0x4c47a3(0x1d0)][_0x4c47a3(0x160)](0x0,0xf),_0x3937d6=_0x3f035b[_0x4c47a3(0x1cd)],_0x1fb342=PERSONA_MAPPING[_0x3f035b[_0x4c47a3(0x1a5)][_0x4c47a3(0x1d9)]||_0x4c47a3(0x183)],_0x458722=_0x3f035b['config'][_0x4c47a3(0x1b0)]||_0x4c47a3(0x1ab);let _0x1599d1=_0x4c47a3(0x16d);try{const _0x5b4ccc=await _0x3f035b[_0x4c47a3(0x175)](_0x4c47a3(0x1ad));if(_0x5b4ccc&&_0x5b4ccc[_0x4c47a3(0x18a)])_0x1599d1=_0x5b4ccc[_0x4c47a3(0x18a)];}catch(_0x3a9c86){}let _0x1c4027=![];try{const _0xd8f764=await _0x3f035b[_0x4c47a3(0x175)](_0x4c47a3(0x1be));if(_0xd8f764&&_0xd8f764[_0x4c47a3(0x18a)])_0x1c4027=!![];}catch(_0x467147){}const _0x5ef9da=_0x4c47a3(0x1bf)+_0x1fb342+'.\x20KONTEXT:\x20'+_0x458722+_0x4c47a3(0x1cf)+_0x3937d6+_0x4c47a3(0x1a6)+_0x1599d1+'.\x20EVENTS:\x20'+JSON[_0x4c47a3(0x1ed)](_0x5caab9)+'.\x20EMERGENCY:\x20'+_0x4dcb32+_0x4c47a3(0x19a);try{updateApiTimestamp();const _0x20bced=await _0x3f035b[_0x4c47a3(0x1e2)][_0x4c47a3(0x1af)](_0x5ef9da),_0xfd477c=JSON[_0x4c47a3(0x181)](_0x20bced[_0x4c47a3(0x1a1)][_0x4c47a3(0x17b)]()[_0x4c47a3(0x1c6)](/```json|```/g,'')[_0x4c47a3(0x164)]());await _0x3f035b[_0x4c47a3(0x179)](_0x4c47a3(0x17d),{'val':JSON[_0x4c47a3(0x1ed)](_0xfd477c),'ack':!![]});if(_0xfd477c[_0x4c47a3(0x193)])await _0x3f035b[_0x4c47a3(0x179)]('analysis.activitySummary',{'val':_0xfd477c[_0x4c47a3(0x193)],'ack':!![]});const _0x51ee6a={'timestamp':Date[_0x4c47a3(0x178)](),'id':Date[_0x4c47a3(0x178)]()[_0x4c47a3(0x1a9)](),'analysis':{'activity':{'summary':_0xfd477c['summary'],'isAlert':_0xfd477c[_0x4c47a3(0x1ea)],'alertReason':_0xfd477c[_0x4c47a3(0x1e6)]},'comfort':{'automationProposal':_0xfd477c[_0x4c47a3(0x1e3)]}}};_0x3f035b[_0x4c47a3(0x186)][_0x4c47a3(0x18b)](_0x51ee6a);if(_0x3f035b['analysisHistory'][_0x4c47a3(0x1d7)]>0x32)_0x3f035b[_0x4c47a3(0x186)][_0x4c47a3(0x194)]();await _0x3f035b['setStateAsync'](_0x4c47a3(0x182),{'val':JSON[_0x4c47a3(0x1ed)](_0x3f035b['analysisHistory']),'ack':!![]});const _0x2e71cc=_0xfd477c[_0x4c47a3(0x1ea)]||![];_0x2e71cc!==_0x3f035b[_0x4c47a3(0x1a3)]&&(await _0x3f035b[_0x4c47a3(0x179)](_0x4c47a3(0x1dd),{'val':_0x2e71cc,'ack':!![]}),_0x3f035b[_0x4c47a3(0x1a3)]=_0x2e71cc,_0x2e71cc&&(await _0x3f035b[_0x4c47a3(0x179)]('analysis.alertReason',{'val':_0xfd477c[_0x4c47a3(0x1e6)],'ack':!![]}),setup['sendNotification'](_0x3f035b,_0x4c47a3(0x191)+_0xfd477c[_0x4c47a3(0x1e6)],![],_0xfd477c[_0x4c47a3(0x1e9)])));if(_0xfd477c[_0x4c47a3(0x1e3)]&&_0xfd477c[_0x4c47a3(0x1e3)]['detected']){await _0x3f035b[_0x4c47a3(0x179)](_0x4c47a3(0x1e8),{'val':!![],'ack':!![]}),await _0x3f035b['setStateAsync'](_0x4c47a3(0x1d8),{'val':_0xfd477c[_0x4c47a3(0x1e3)]['description'],'ack':!![]}),await _0x3f035b[_0x4c47a3(0x179)](_0x4c47a3(0x163),{'val':_0xfd477c[_0x4c47a3(0x1e3)][_0x4c47a3(0x1ec)],'ack':!![]}),await _0x3f035b[_0x4c47a3(0x179)]('analysis.automation.targetValue',{'val':JSON[_0x4c47a3(0x1ed)](_0xfd477c['automationProposal'][_0x4c47a3(0x15e)]),'ack':!![]});if(_0x1c4027)executeAutomationAction(_0x3f035b);}}catch(_0x569f8c){_0x3f035b[_0x4c47a3(0x18f)][_0x4c47a3(0x18d)](_0x4c47a3(0x1a7)+_0x569f8c[_0x4c47a3(0x17c)]);}}async function createDailyDigest(_0x3967e6,_0x4567f3){const _0x569e90=a0_0x222a88;if(!_0x3967e6[_0x569e90(0x1c7)])return;if(!canCallApi()){await _0x3967e6[_0x569e90(0x179)](LTM_DP_STATUS,{'val':_0x569e90(0x1b4),'ack':!![]});return;}await _0x3967e6[_0x569e90(0x179)](LTM_DP_STATUS,{'val':_0x569e90(0x1da),'ack':!![]});if(!_0x3967e6[_0x569e90(0x1e2)]||_0x3967e6['rawEventLog'][_0x569e90(0x1d7)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x3967e6['setStateAsync'](LTM_DP_STATUS,{'val':_0x569e90(0x1b3),'ack':!![]});return;}const _0x4a8fa3=JSON['parse'](JSON[_0x569e90(0x1ed)](_0x3967e6[_0x569e90(0x1bb)])),_0x3aa7f9=_0x4a8fa3[_0x569e90(0x1d7)],_0x4c99c0=_0x569e90(0x17e)+JSON[_0x569e90(0x1ed)](_0x4a8fa3);try{updateApiTimestamp();const _0xd36814=await _0x3967e6[_0x569e90(0x1e2)][_0x569e90(0x1af)](_0x4c99c0),_0x519dcb=JSON[_0x569e90(0x181)](_0xd36814[_0x569e90(0x1a1)][_0x569e90(0x17b)]()[_0x569e90(0x1c6)](/```json|```/g,'')['trim']()),_0x693cd1={'timestamp':new Date()[_0x569e90(0x1d2)](),'eventCount':_0x3aa7f9,'summary':_0x519dcb[_0x569e90(0x193)]||'Digest','activityLevel':_0x519dcb[_0x569e90(0x1ac)]||'normal','systemMode':_0x3967e6[_0x569e90(0x1cd)]};_0x3967e6[_0x569e90(0x1c8)][_0x569e90(0x167)](_0x693cd1);const _0x4a7bf3=_0x3967e6[_0x569e90(0x1a5)][_0x569e90(0x162)]||0x3c;_0x3967e6['dailyDigests'][_0x569e90(0x1d7)]>_0x4a7bf3&&_0x3967e6[_0x569e90(0x1c8)][_0x569e90(0x199)](0x0,_0x3967e6[_0x569e90(0x1c8)][_0x569e90(0x1d7)]-_0x4a7bf3);await _0x3967e6[_0x569e90(0x179)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x569e90(0x1ed)](_0x3967e6[_0x569e90(0x1c8)]),'ack':!![]}),_0x3967e6[_0x569e90(0x1bb)]=[],await _0x3967e6[_0x569e90(0x179)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x3967e6[_0x569e90(0x1bb)]),'ack':!![]}),await _0x3967e6['setStateAsync'](LTM_DP_STATUS,{'val':_0x569e90(0x1ba),'ack':!![]});const _0x56424e=_0x569e90(0x17a)+_0x519dcb[_0x569e90(0x193)]+_0x569e90(0x1c9)+_0x519dcb[_0x569e90(0x1ac)];setup['sendNotification'](_0x3967e6,_0x56424e,![],![]);if(_0x3967e6[_0x569e90(0x1c7)]&&_0x4567f3)_0x4567f3[_0x569e90(0x1d4)](_0x3967e6,_0x569e90(0x187),{'digest':_0x693cd1});}catch(_0x5c05db){_0x3967e6[_0x569e90(0x18f)][_0x569e90(0x18d)](_0x5c05db[_0x569e90(0x17c)]);}}async function runBaselineDriftAnalysis(_0x31f32a){const _0x13d010=a0_0x222a88;if(!_0x31f32a['isProVersion']||!_0x31f32a[_0x13d010(0x1e2)])return;if(!canCallApi())return;const _0x5b86a6=_0x31f32a[_0x13d010(0x1a5)][_0x13d010(0x1a4)]||0xe;if(_0x31f32a['dailyDigests']['length']<_0x5b86a6+0x7){await _0x31f32a[_0x13d010(0x179)](_0x13d010(0x1c1),{'val':_0x13d010(0x177),'ack':!![]});return;}const _0x4a0628=_0x31f32a[_0x13d010(0x1c8)]['slice'](-_0x5b86a6),_0x1493ec=_0x31f32a['dailyDigests'][_0x13d010(0x160)](0x0,_0x31f32a['dailyDigests'][_0x13d010(0x1d7)]-_0x5b86a6),_0x3fcf86='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x13d010(0x1ed)](_0x1493ec)+_0x13d010(0x1bd)+JSON[_0x13d010(0x1ed)](_0x4a0628);try{updateApiTimestamp();const _0x14d640=await _0x31f32a[_0x13d010(0x1e2)][_0x13d010(0x1af)](_0x3fcf86),_0x35a626=JSON[_0x13d010(0x181)](_0x14d640['response'][_0x13d010(0x17b)]()[_0x13d010(0x1c6)](/```json|```/g,'')[_0x13d010(0x164)]());_0x35a626[_0x13d010(0x168)]&&(await _0x31f32a[_0x13d010(0x179)](_0x13d010(0x1c1),{'val':_0x35a626[_0x13d010(0x168)],'ack':!![]}),await _0x31f32a[_0x13d010(0x179)](_0x13d010(0x16a),{'val':_0x35a626[_0x13d010(0x1dc)],'ack':!![]}),await _0x31f32a[_0x13d010(0x179)]('LTM.driftAnalysis.lastCheck',{'val':Date['now'](),'ack':!![]}));}catch(_0x258ef1){}}async function executeAutomationAction(_0x4b4a26){const _0x26eee7=a0_0x222a88;try{const _0x2259f2=await _0x4b4a26[_0x26eee7(0x175)](_0x26eee7(0x163)),_0x2638ce=await _0x4b4a26['getStateAsync'](_0x26eee7(0x1d1));if(_0x2259f2&&_0x2259f2[_0x26eee7(0x18a)]&&_0x2638ce){const _0x86518f=_0x2259f2[_0x26eee7(0x18a)];let _0x3c67df=_0x2638ce[_0x26eee7(0x18a)];try{_0x3c67df=JSON['parse'](_0x3c67df);}catch(_0x9fa447){}_0x4b4a26['log'][_0x26eee7(0x1b9)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x86518f+_0x26eee7(0x16e)+_0x3c67df),await _0x4b4a26[_0x26eee7(0x1df)](_0x86518f,_0x3c67df);}else _0x4b4a26[_0x26eee7(0x18f)][_0x26eee7(0x161)](_0x26eee7(0x19d));}catch(_0x174220){_0x4b4a26['log'][_0x26eee7(0x18d)]('BUTLER\x20Execution\x20Error:\x20'+_0x174220['message']);}}async function sendMorningBriefing(_0x3eaf57){const _0x54021c=a0_0x222a88;if(!_0x3eaf57[_0x54021c(0x1e2)]){_0x3eaf57[_0x54021c(0x18f)][_0x54021c(0x161)](_0x54021c(0x195));return;}_0x3eaf57[_0x54021c(0x18f)][_0x54021c(0x1b9)](_0x54021c(0x180));try{updateApiTimestamp();const _0x5565a0=_0x54021c(0x19b),_0x3435f5=await _0x3eaf57['geminiModel']['generateContent'](_0x5565a0),_0x5f027e=_0x3435f5[_0x54021c(0x1a1)]['text']();_0x3eaf57['log'][_0x54021c(0x1b9)](_0x54021c(0x1b6)+_0x5f027e[_0x54021c(0x1d7)]+_0x54021c(0x1aa)),setup[_0x54021c(0x1bc)](_0x3eaf57,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x5f027e);}catch(_0x7d733){_0x3eaf57[_0x54021c(0x18f)][_0x54021c(0x18d)]('Briefing\x20Error:\x20'+_0x7d733[_0x54021c(0x17c)]);}}module[a0_0x222a88(0x1b5)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};