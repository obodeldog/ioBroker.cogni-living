const a0_0x387cbe=a0_0x4e53;(function(_0x408f34,_0x19529c){const _0x230768=a0_0x4e53,_0x2cb501=_0x408f34();while(!![]){try{const _0xa6878a=-parseInt(_0x230768(0x183))/0x1+parseInt(_0x230768(0x17a))/0x2*(-parseInt(_0x230768(0x190))/0x3)+parseInt(_0x230768(0x1ad))/0x4*(-parseInt(_0x230768(0x1a4))/0x5)+parseInt(_0x230768(0x1bc))/0x6*(parseInt(_0x230768(0x15e))/0x7)+-parseInt(_0x230768(0x1d2))/0x8+parseInt(_0x230768(0x198))/0x9+parseInt(_0x230768(0x1b8))/0xa*(parseInt(_0x230768(0x1ab))/0xb);if(_0xa6878a===_0x19529c)break;else _0x2cb501['push'](_0x2cb501['shift']());}catch(_0x34dfd3){_0x2cb501['push'](_0x2cb501['shift']());}}}(a0_0xf54e,0x7c42f));const a0_0x43d095=(function(){let _0xdb155b=!![];return function(_0x16a685,_0x15b828){const _0x1090e8=_0xdb155b?function(){const _0x35f807=a0_0x4e53;if(_0x15b828){const _0x12e34d=_0x15b828[_0x35f807(0x182)](_0x16a685,arguments);return _0x15b828=null,_0x12e34d;}}:function(){};return _0xdb155b=![],_0x1090e8;};}()),a0_0x51ee66=a0_0x43d095(this,function(){const _0x1b1d37=a0_0x4e53;return a0_0x51ee66[_0x1b1d37(0x180)]()['search'](_0x1b1d37(0x193))[_0x1b1d37(0x180)]()[_0x1b1d37(0x19f)](a0_0x51ee66)[_0x1b1d37(0x1ce)](_0x1b1d37(0x193));});a0_0x51ee66();function a0_0x4e53(_0x312d81,_0x35d2a4){const _0x5d0e37=a0_0xf54e();return a0_0x4e53=function(_0x51ee66,_0x43d095){_0x51ee66=_0x51ee66-0x154;let _0xf54ed4=_0x5d0e37[_0x51ee66];return _0xf54ed4;},a0_0x4e53(_0x312d81,_0x35d2a4);}'use strict';function a0_0xf54e(){const _0xac4c8b=['LTM.processingStatus','automationProposal','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','warn','@google/generative-ai','N/A\x20(Learning)','isAlert','baselineDrift','replace','18853110UjtbHN','alertReason','.forecast.current.state','analysis.automation.patternDetected','36ScaUcL','text','LTM.rawEventLog','parse','info','Keine\x20Details.','decision','system.presenceWho','debug','normal','ðŸŒ…\x20Morning\x20Briefing:\x0a','analysis.automation.targetValue','.\x20SYSTEM_MODE:\x20','error','getStateAsync','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','.Current.WeatherText','driftDetails','search',',\x20LichtverhÃ¤ltnisse:\x20','.\x20ANWESEND:\x20','config','1614536DRBeHe','Started...','Unbekannt\x20(Kein\x20Sensor)','val','\x20=\x20','now','toISOString','Unbekannt','response','KI-Fehler\x20(Fallback)','push','splice','%)\x20nach\x20\x22','1021860HEtskJ','generateContent','useWeather','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','generic','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','Skipped\x20(No\x20AI\x20or\x20Data)','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','setStateAsync','Sicherheit\x20geht\x20vor.','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','lastAlertState','Digest','\x20Ã¼bersprungen\x20(Auto-Approved).','Wetterdaten\x20nicht\x20abrufbar','KI\x20offline\x20(Fallback)','dailyDigests','analysis.activitySummary','./setup','message','weatherInstance','models/gemini-flash-latest','.Current.Temperature',',\x20Wetter:\x20','Gemini\x20Error:\x20','\x0aSTB:\x20','.forecast.current.temperature','slice','188414zbxUWs','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','activityLevel','exports','currentSystemMode','LTM.driftAnalysis.baselineDrift','toString','description','apply','914496oIPJHh','isProVersion','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','geminiModel','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','pop','analysis.automation.autoApply','analysis.isAlert','Â°C,\x20','BUTLER\x20Execution\x20Error:\x20','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','stringify','24VSbWzB','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','summary','(((.+)+)+)+$','trim','rawEventLog','analysis.automation.targetId','LTM.driftAnalysis.lastCheck','135612WGrKNu','sendNotification','getForeignStateAsync','analysis.alertReason','analysisHistory','âš ï¸\x20ALARM:\x20','toFixed','constructor','reason','aiPersona','LTM.dailyDigests','targetId','1735YmpLOB','Briefing\x20Error:\x20','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','log','length','analysis.analysisHistory','isEmergency','11fPhfsF','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','4580KkFjPQ','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.'];a0_0xf54e=function(){return _0xac4c8b;};return a0_0xf54e();}const {GoogleGenerativeAI}=require(a0_0x387cbe(0x1b3)),setup=require(a0_0x387cbe(0x170)),GEMINI_MODEL=a0_0x387cbe(0x173),LTM_DP_DAILY_DIGESTS=a0_0x387cbe(0x1a2),LTM_DP_STATUS=a0_0x387cbe(0x1af),LTM_DP_RAW_LOG=a0_0x387cbe(0x1be),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':a0_0x387cbe(0x161),'family':a0_0x387cbe(0x1ac),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':a0_0x387cbe(0x167),'energy_saver':a0_0x387cbe(0x17b)};function canCallApi(){const _0x15a4c6=a0_0x387cbe,_0x3f6446=Date[_0x15a4c6(0x156)]();return _0x3f6446-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0xbffd0b=a0_0x387cbe;lastGlobalApiCall=Date[_0xbffd0b(0x156)]();}async function getWeatherContext(_0xd8c8e){const _0x8c8f3c=a0_0x387cbe;if(!_0xd8c8e[_0x8c8f3c(0x1d1)][_0x8c8f3c(0x160)]||!_0xd8c8e[_0x8c8f3c(0x1d1)][_0x8c8f3c(0x172)])return _0x8c8f3c(0x1d4);try{const _0x43b275=_0xd8c8e[_0x8c8f3c(0x1d1)][_0x8c8f3c(0x172)];let _0x3fbe76=await _0xd8c8e[_0x8c8f3c(0x19a)](_0x43b275+_0x8c8f3c(0x174));if(!_0x3fbe76)_0x3fbe76=await _0xd8c8e['getForeignStateAsync'](_0x43b275+_0x8c8f3c(0x178));let _0x1a937c=await _0xd8c8e[_0x8c8f3c(0x19a)](_0x43b275+_0x8c8f3c(0x1cc));if(!_0x1a937c)_0x1a937c=await _0xd8c8e[_0x8c8f3c(0x19a)](_0x43b275+_0x8c8f3c(0x1ba));let _0x1a0824='Unbekannt';const _0xaa3ac0=await _0xd8c8e[_0x8c8f3c(0x19a)](_0x43b275+'.Current.IsNight');if(_0xaa3ac0)_0x1a0824=_0xaa3ac0['val']?'Nacht':'Tag';if(_0x3fbe76&&_0x1a937c)return _0x3fbe76[_0x8c8f3c(0x154)]+_0x8c8f3c(0x18b)+_0x1a937c[_0x8c8f3c(0x154)]+_0x8c8f3c(0x1cf)+_0x1a0824;}catch(_0x1d7003){}return _0x8c8f3c(0x16c);}async function consultButler(_0x35581e,_0x1ffebd,_0x384269,_0x2c31c7){const _0x279a91=a0_0x387cbe;if(!_0x35581e[_0x279a91(0x186)])return{'approved':!![],'reason':_0x279a91(0x16d)};const _0x1a79b5=Date['now']();if(decisionCache[_0x1ffebd]&&_0x1a79b5-decisionCache[_0x1ffebd]['timestamp']<CACHE_TTL_MS){const _0x5df556=decisionCache[_0x1ffebd][_0x279a91(0x1c2)];return _0x35581e[_0x279a91(0x1a7)][_0x279a91(0x1c4)](_0x279a91(0x191)+_0x1ffebd+'\x20->\x20'+(_0x5df556['approved']?'OK':'NO')+'\x20('+_0x5df556[_0x279a91(0x1a0)]+')'),_0x5df556;}if(!canCallApi())return _0x35581e[_0x279a91(0x1a7)][_0x279a91(0x1c4)](_0x279a91(0x163)+_0x1ffebd+_0x279a91(0x16b)),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x2a00fb=new Date()['toLocaleTimeString'](),_0x1557f8=await getWeatherContext(_0x35581e),_0x43622c=PERSONA_MAPPING[_0x35581e[_0x279a91(0x1d1)][_0x279a91(0x1a1)]||'generic'],_0x225513=_0x279a91(0x168)+_0x2a00fb+_0x279a91(0x175)+_0x1557f8+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x2c31c7*0x64)[_0x279a91(0x19e)](0x0)+_0x279a91(0x15d)+_0x1ffebd+'\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22'+_0x384269+_0x279a91(0x187)+_0x43622c+_0x279a91(0x1cb);try{updateApiTimestamp();const _0x2dd665=await _0x35581e[_0x279a91(0x186)][_0x279a91(0x15f)](_0x225513),_0x2b6ddf=_0x2dd665[_0x279a91(0x159)][_0x279a91(0x1bd)]()[_0x279a91(0x1b7)](/```json|```/g,'')[_0x279a91(0x194)](),_0x19f862=JSON['parse'](_0x2b6ddf);return decisionCache[_0x1ffebd]={'decision':_0x19f862,'timestamp':_0x1a79b5},_0x19f862;}catch(_0x23e2ba){return _0x35581e['log'][_0x279a91(0x1b2)](_0x279a91(0x18d)+_0x23e2ba[_0x279a91(0x171)]),decisionCache[_0x1ffebd]={'decision':{'approved':!![],'reason':_0x279a91(0x15a)},'timestamp':_0x1a79b5-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x1fa47e,_0x443052=''){const _0x559e47=a0_0x387cbe;if(!_0x1fa47e['geminiModel'])return;if(!canCallApi()){_0x1fa47e[_0x559e47(0x1a7)][_0x559e47(0x1c4)](_0x559e47(0x1a6));return;}if(_0x1fa47e['eventHistory'][_0x559e47(0x1a8)]===0x0)return;const _0x4b59df=_0x1fa47e['eventHistory']['slice'](0x0,0xf),_0x1868c6=_0x1fa47e[_0x559e47(0x17e)],_0x134558=PERSONA_MAPPING[_0x1fa47e['config'][_0x559e47(0x1a1)]||_0x559e47(0x162)],_0x419f58=_0x1fa47e[_0x559e47(0x1d1)]['livingContext']||_0x559e47(0x1c1);let _0xb6d774=_0x559e47(0x158);try{const _0x5e86d0=await _0x1fa47e[_0x559e47(0x1ca)](_0x559e47(0x1c3));if(_0x5e86d0&&_0x5e86d0[_0x559e47(0x154)])_0xb6d774=_0x5e86d0[_0x559e47(0x154)];}catch(_0x3d52a9){}let _0x22c5c6=![];try{const _0x109b68=await _0x1fa47e[_0x559e47(0x1ca)](_0x559e47(0x189));if(_0x109b68&&_0x109b68[_0x559e47(0x154)])_0x22c5c6=!![];}catch(_0x3c8878){}const _0x518e5f='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x134558+'.\x20KONTEXT:\x20'+_0x419f58+_0x559e47(0x1c8)+_0x1868c6+_0x559e47(0x1d0)+_0xb6d774+'.\x20EVENTS:\x20'+JSON[_0x559e47(0x18f)](_0x4b59df)+'.\x20EMERGENCY:\x20'+_0x443052+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x4f053c=await _0x1fa47e['geminiModel'][_0x559e47(0x15f)](_0x518e5f),_0x58d97b=JSON[_0x559e47(0x1bf)](_0x4f053c[_0x559e47(0x159)][_0x559e47(0x1bd)]()[_0x559e47(0x1b7)](/```json|```/g,'')[_0x559e47(0x194)]());await _0x1fa47e[_0x559e47(0x166)]('analysis.lastResult',{'val':JSON['stringify'](_0x58d97b),'ack':!![]});if(_0x58d97b[_0x559e47(0x192)])await _0x1fa47e[_0x559e47(0x166)](_0x559e47(0x16f),{'val':_0x58d97b[_0x559e47(0x192)],'ack':!![]});const _0x5c217b={'timestamp':Date[_0x559e47(0x156)](),'id':Date[_0x559e47(0x156)]()['toString'](),'analysis':{'activity':{'summary':_0x58d97b[_0x559e47(0x192)],'isAlert':_0x58d97b[_0x559e47(0x1b5)],'alertReason':_0x58d97b[_0x559e47(0x1b9)]},'comfort':{'automationProposal':_0x58d97b[_0x559e47(0x1b0)]}}};_0x1fa47e['analysisHistory']['unshift'](_0x5c217b);if(_0x1fa47e[_0x559e47(0x19c)][_0x559e47(0x1a8)]>0x32)_0x1fa47e['analysisHistory'][_0x559e47(0x188)]();await _0x1fa47e[_0x559e47(0x166)](_0x559e47(0x1a9),{'val':JSON[_0x559e47(0x18f)](_0x1fa47e[_0x559e47(0x19c)]),'ack':!![]});const _0x53d118=_0x58d97b['isAlert']||![];_0x53d118!==_0x1fa47e[_0x559e47(0x169)]&&(await _0x1fa47e['setStateAsync'](_0x559e47(0x18a),{'val':_0x53d118,'ack':!![]}),_0x1fa47e[_0x559e47(0x169)]=_0x53d118,_0x53d118&&(await _0x1fa47e[_0x559e47(0x166)](_0x559e47(0x19b),{'val':_0x58d97b[_0x559e47(0x1b9)],'ack':!![]}),setup['sendNotification'](_0x1fa47e,_0x559e47(0x19d)+_0x58d97b[_0x559e47(0x1b9)],![],_0x58d97b[_0x559e47(0x1aa)])));if(_0x58d97b[_0x559e47(0x1b0)]&&_0x58d97b[_0x559e47(0x1b0)]['detected']){await _0x1fa47e[_0x559e47(0x166)](_0x559e47(0x1bb),{'val':!![],'ack':!![]}),await _0x1fa47e['setStateAsync']('analysis.automation.description',{'val':_0x58d97b[_0x559e47(0x1b0)][_0x559e47(0x181)],'ack':!![]}),await _0x1fa47e['setStateAsync'](_0x559e47(0x196),{'val':_0x58d97b[_0x559e47(0x1b0)][_0x559e47(0x1a3)],'ack':!![]}),await _0x1fa47e[_0x559e47(0x166)](_0x559e47(0x1c7),{'val':JSON[_0x559e47(0x18f)](_0x58d97b[_0x559e47(0x1b0)]['targetValue']),'ack':!![]});if(_0x22c5c6)executeAutomationAction(_0x1fa47e);}}catch(_0x4fbdc3){_0x1fa47e[_0x559e47(0x1a7)][_0x559e47(0x1c9)](_0x559e47(0x176)+_0x4fbdc3[_0x559e47(0x171)]);}}async function createDailyDigest(_0x4de44a,_0x7bd828){const _0x5042be=a0_0x387cbe;if(!_0x4de44a['isProVersion'])return;if(!canCallApi()){await _0x4de44a[_0x5042be(0x166)](LTM_DP_STATUS,{'val':'Skipped\x20(Traffic)','ack':!![]});return;}await _0x4de44a['setStateAsync'](LTM_DP_STATUS,{'val':_0x5042be(0x1d3),'ack':!![]});if(!_0x4de44a[_0x5042be(0x186)]||_0x4de44a[_0x5042be(0x195)][_0x5042be(0x1a8)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4de44a[_0x5042be(0x166)](LTM_DP_STATUS,{'val':_0x5042be(0x164),'ack':!![]});return;}const _0x493377=JSON[_0x5042be(0x1bf)](JSON[_0x5042be(0x18f)](_0x4de44a[_0x5042be(0x195)])),_0x59b7f0=_0x493377[_0x5042be(0x1a8)],_0x3e8fa6=_0x5042be(0x18e)+JSON[_0x5042be(0x18f)](_0x493377);try{updateApiTimestamp();const _0xac12a8=await _0x4de44a[_0x5042be(0x186)]['generateContent'](_0x3e8fa6),_0x3a0037=JSON[_0x5042be(0x1bf)](_0xac12a8[_0x5042be(0x159)]['text']()[_0x5042be(0x1b7)](/```json|```/g,'')['trim']()),_0x33cc9c={'timestamp':new Date()[_0x5042be(0x157)](),'eventCount':_0x59b7f0,'summary':_0x3a0037['summary']||_0x5042be(0x16a),'activityLevel':_0x3a0037[_0x5042be(0x17c)]||_0x5042be(0x1c5),'systemMode':_0x4de44a[_0x5042be(0x17e)]};_0x4de44a[_0x5042be(0x16e)][_0x5042be(0x15b)](_0x33cc9c);const _0x1aac53=_0x4de44a[_0x5042be(0x1d1)]['ltmLtbWindowDays']||0x3c;_0x4de44a[_0x5042be(0x16e)][_0x5042be(0x1a8)]>_0x1aac53&&_0x4de44a[_0x5042be(0x16e)][_0x5042be(0x15c)](0x0,_0x4de44a[_0x5042be(0x16e)][_0x5042be(0x1a8)]-_0x1aac53);await _0x4de44a[_0x5042be(0x166)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x4de44a[_0x5042be(0x16e)]),'ack':!![]}),_0x4de44a[_0x5042be(0x195)]=[],await _0x4de44a['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x5042be(0x18f)](_0x4de44a[_0x5042be(0x195)]),'ack':!![]}),await _0x4de44a[_0x5042be(0x166)](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x4de44a['isProVersion']&&_0x7bd828)_0x7bd828['send'](_0x4de44a,'ANALYZE_HEALTH',{'digest':_0x33cc9c});}catch(_0x246f40){_0x4de44a[_0x5042be(0x1a7)]['error'](_0x246f40['message']);}}async function runBaselineDriftAnalysis(_0x31088c){const _0x790b88=a0_0x387cbe;if(!_0x31088c[_0x790b88(0x184)]||!_0x31088c[_0x790b88(0x186)])return;if(!canCallApi())return;const _0x5ad471=_0x31088c[_0x790b88(0x1d1)]['ltmStbWindowDays']||0xe;if(_0x31088c[_0x790b88(0x16e)]['length']<_0x5ad471+0x7){await _0x31088c[_0x790b88(0x166)](_0x790b88(0x17f),{'val':_0x790b88(0x1b4),'ack':!![]});return;}const _0x3ebc22=_0x31088c['dailyDigests'][_0x790b88(0x179)](-_0x5ad471),_0x29aaa3=_0x31088c['dailyDigests'][_0x790b88(0x179)](0x0,_0x31088c[_0x790b88(0x16e)]['length']-_0x5ad471),_0x3bcc80=_0x790b88(0x165)+JSON[_0x790b88(0x18f)](_0x29aaa3)+_0x790b88(0x177)+JSON['stringify'](_0x3ebc22);try{updateApiTimestamp();const _0xcfc376=await _0x31088c[_0x790b88(0x186)][_0x790b88(0x15f)](_0x3bcc80),_0x3ffccd=JSON[_0x790b88(0x1bf)](_0xcfc376[_0x790b88(0x159)][_0x790b88(0x1bd)]()[_0x790b88(0x1b7)](/```json|```/g,'')[_0x790b88(0x194)]());_0x3ffccd[_0x790b88(0x1b6)]&&(await _0x31088c['setStateAsync'](_0x790b88(0x17f),{'val':_0x3ffccd[_0x790b88(0x1b6)],'ack':!![]}),await _0x31088c[_0x790b88(0x166)]('LTM.driftAnalysis.driftDetails',{'val':_0x3ffccd[_0x790b88(0x1cd)],'ack':!![]}),await _0x31088c['setStateAsync'](_0x790b88(0x197),{'val':Date[_0x790b88(0x156)](),'ack':!![]}));}catch(_0x20ab3a){}}async function executeAutomationAction(_0x50db6e){const _0x2ae783=a0_0x387cbe;try{const _0x327356=await _0x50db6e['getStateAsync'](_0x2ae783(0x196)),_0x45a098=await _0x50db6e['getStateAsync']('analysis.automation.targetValue');if(_0x327356&&_0x327356[_0x2ae783(0x154)]&&_0x45a098){const _0x21a8f7=_0x327356[_0x2ae783(0x154)];let _0x4b2dd5=_0x45a098[_0x2ae783(0x154)];try{_0x4b2dd5=JSON[_0x2ae783(0x1bf)](_0x4b2dd5);}catch(_0x31768f){}_0x50db6e[_0x2ae783(0x1a7)][_0x2ae783(0x1c0)](_0x2ae783(0x185)+_0x21a8f7+_0x2ae783(0x155)+_0x4b2dd5),await _0x50db6e['setForeignStateAsync'](_0x21a8f7,_0x4b2dd5);}else _0x50db6e[_0x2ae783(0x1a7)][_0x2ae783(0x1b2)](_0x2ae783(0x1ae));}catch(_0x491a6d){_0x50db6e[_0x2ae783(0x1a7)][_0x2ae783(0x1c9)](_0x2ae783(0x18c)+_0x491a6d[_0x2ae783(0x171)]);}}async function sendMorningBriefing(_0x23d78a){const _0xa1a5cc=a0_0x387cbe;if(!_0x23d78a['geminiModel'])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x562464=_0xa1a5cc(0x1b1),_0x3da500=await _0x23d78a[_0xa1a5cc(0x186)][_0xa1a5cc(0x15f)](_0x562464),_0x462295=_0x3da500[_0xa1a5cc(0x159)][_0xa1a5cc(0x1bd)]();setup[_0xa1a5cc(0x199)](_0x23d78a,_0xa1a5cc(0x1c6)+_0x462295);}catch(_0x1d4e8c){_0x23d78a[_0xa1a5cc(0x1a7)][_0xa1a5cc(0x1c9)](_0xa1a5cc(0x1a5)+_0x1d4e8c['message']);}}module[a0_0x387cbe(0x17d)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};