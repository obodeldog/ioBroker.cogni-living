function a0_0x31ca(_0x59764a,_0x392150){const _0x1d0fa3=a0_0x5d2d();return a0_0x31ca=function(_0x31c2a6,_0x4294fa){_0x31c2a6=_0x31c2a6-0x8c;let _0x5d2dfa=_0x1d0fa3[_0x31c2a6];return _0x5d2dfa;},a0_0x31ca(_0x59764a,_0x392150);}const a0_0x5d5680=a0_0x31ca;(function(_0x445f98,_0x5b3810){const _0x47783c=a0_0x31ca,_0x16dfc5=_0x445f98();while(!![]){try{const _0x212717=parseInt(_0x47783c(0xd2))/0x1+parseInt(_0x47783c(0xd9))/0x2+-parseInt(_0x47783c(0xa3))/0x3+-parseInt(_0x47783c(0x102))/0x4*(parseInt(_0x47783c(0x116))/0x5)+parseInt(_0x47783c(0xa7))/0x6+parseInt(_0x47783c(0x114))/0x7*(parseInt(_0x47783c(0xae))/0x8)+-parseInt(_0x47783c(0xe0))/0x9;if(_0x212717===_0x5b3810)break;else _0x16dfc5['push'](_0x16dfc5['shift']());}catch(_0x37c193){_0x16dfc5['push'](_0x16dfc5['shift']());}}}(a0_0x5d2d,0x5cadf));const a0_0x4294fa=(function(){let _0x2dfaf2=!![];return function(_0x39921a,_0x82b54b){const _0x5baf0c=_0x2dfaf2?function(){const _0x257b89=a0_0x31ca;if(_0x82b54b){const _0x1d498c=_0x82b54b[_0x257b89(0xad)](_0x39921a,arguments);return _0x82b54b=null,_0x1d498c;}}:function(){};return _0x2dfaf2=![],_0x5baf0c;};}()),a0_0x31c2a6=a0_0x4294fa(this,function(){const _0xff9a45=a0_0x31ca;return a0_0x31c2a6[_0xff9a45(0x98)]()[_0xff9a45(0x9d)](_0xff9a45(0xa5))[_0xff9a45(0x98)]()[_0xff9a45(0x10b)](a0_0x31c2a6)['search'](_0xff9a45(0xa5));});a0_0x31c2a6();'use strict';const {GoogleGenerativeAI}=require(a0_0x5d5680(0xf3)),setup=require(a0_0x5d5680(0xc2)),GEMINI_MODEL=a0_0x5d5680(0x107),LTM_DP_DAILY_DIGESTS=a0_0x5d5680(0xb5),LTM_DP_STATUS=a0_0x5d5680(0xb2),LTM_DP_RAW_LOG=a0_0x5d5680(0x115),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x5d5680(0xe7),'senior_aal':a0_0x5d5680(0xe5),'family':a0_0x5d5680(0xa6),'single_comfort':a0_0x5d5680(0xea),'security':a0_0x5d5680(0xe6),'energy_saver':'PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'};function canCallApi(){const _0x3c275c=a0_0x5d5680,_0x52854f=Date[_0x3c275c(0xbc)]();return _0x52854f-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x34fba7=a0_0x5d5680;lastGlobalApiCall=Date[_0x34fba7(0xbc)]();}async function getWeatherContext(_0x284ea2){const _0x159fa7=a0_0x5d5680;if(!_0x284ea2[_0x159fa7(0x96)]['useWeather']||!_0x284ea2['config'][_0x159fa7(0xe3)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0xda4769=_0x284ea2[_0x159fa7(0x96)][_0x159fa7(0xe3)];let _0xb5013e=await _0x284ea2[_0x159fa7(0xb4)](_0xda4769+_0x159fa7(0xcf));if(!_0xb5013e)_0xb5013e=await _0x284ea2[_0x159fa7(0xb4)](_0xda4769+_0x159fa7(0x111));let _0xc95a6d=await _0x284ea2[_0x159fa7(0xb4)](_0xda4769+_0x159fa7(0x94));if(!_0xc95a6d)_0xc95a6d=await _0x284ea2[_0x159fa7(0xb4)](_0xda4769+_0x159fa7(0x8d));let _0x23c0da=_0x159fa7(0xbd);const _0x121bb8=await _0x284ea2[_0x159fa7(0xb4)](_0xda4769+'.Current.IsNight');if(_0x121bb8)_0x23c0da=_0x121bb8[_0x159fa7(0xeb)]?_0x159fa7(0xf2):_0x159fa7(0xa8);if(_0xb5013e&&_0xc95a6d)return _0xb5013e[_0x159fa7(0xeb)]+'Â°C,\x20'+_0xc95a6d['val']+_0x159fa7(0xd8)+_0x23c0da;}catch(_0x10c5f6){}return _0x159fa7(0x9b);}function a0_0x5d2d(){const _0x1c3cdc=['system.presenceWho','.forecast.current.state','eventHistory','text','toLocaleTimeString','ltmStbWindowDays','LTM.driftAnalysis.lastCheck','activityLevel','.Current.WeatherText','push','config','.\x20KONTEXT:\x20','toString','generic','Briefing\x20Error:\x20','Wetterdaten\x20nicht\x20abrufbar','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','search','.\x20EMERGENCY:\x20',',\x20Wetter:\x20','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','summary','parse','336249vyzrla','Digest','(((.+)+)+)+$','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','272436TmmqLd','Tag','KI\x20offline\x20(Fallback)','.\x20EVENTS:\x20','analysis.automation.targetId','analysis.automation.targetValue','apply','2505624FGSeXM','getStateAsync','LTM.driftAnalysis.driftDetails','setForeignStateAsync','LTM.processingStatus','Gemini\x20Error:\x20','getForeignStateAsync','LTM.dailyDigests','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','ðŸ“…\x20Daily\x20Digest:\x0a','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','%)\x20nach\x20\x22','.\x20ANWESEND:\x20','now','Unbekannt','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','targetId','slice','setStateAsync','./setup','message','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','isProVersion','\x20Ã¼bersprungen\x20(Auto-Approved).','analysis.automation.patternDetected','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','length','driftDetails','targetValue','detected','âš ï¸\x20ALARM:\x20','\x20->\x20','.Current.Temperature','Success','LTM.driftAnalysis.baselineDrift','696685PJVUlP','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','analysis.automation.description','\x0aSTB:\x20','pop','KI-Fehler\x20(Fallback)',',\x20LichtverhÃ¤ltnisse:\x20','822678dBjBUD','analysisHistory','isEmergency','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','ðŸŒ…\x20Morning\x20Briefing:\x0a','reason','log','6153822ztDiDj','analysis.alertReason','trim','weatherInstance','BUTLER\x20Execution\x20Error:\x20','PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','Sicherheit\x20geht\x20vor.','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','N/A\x20(Learning)','rawEventLog','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','val','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','unshift','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','exports','Skipped\x20(No\x20AI\x20or\x20Data)','automationProposal','Nacht','@google/generative-ai','info','sendNotification','geminiModel','alertReason','response','analysis.isAlert','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','ANALYZE_HEALTH','dailyDigests','analysis.automation.autoApply','analysis.lastResult','ltmLtbWindowDays','description','1164708pCnPpQ','decision','generateContent','Skipped\x20(Traffic)','currentSystemMode','models/gemini-flash-latest','error','debug','stringify','constructor','approved','toISOString','livingContext','baselineDrift','Started...','.forecast.current.temperature','replace','warn','7moAPTm','LTM.rawEventLog','5cgqkSn','isAlert','analysis.analysisHistory','aiPersona'];a0_0x5d2d=function(){return _0x1c3cdc;};return a0_0x5d2d();}async function consultButler(_0x39a071,_0x48d402,_0x38cae5,_0x2116cc){const _0x272bfe=a0_0x5d5680;if(!_0x39a071[_0x272bfe(0xf6)])return{'approved':!![],'reason':_0x272bfe(0xa9)};const _0x48fc17=Date[_0x272bfe(0xbc)]();if(decisionCache[_0x48d402]&&_0x48fc17-decisionCache[_0x48d402]['timestamp']<CACHE_TTL_MS){const _0x35cadc=decisionCache[_0x48d402][_0x272bfe(0x103)];return _0x39a071[_0x272bfe(0xdf)][_0x272bfe(0x109)](_0x272bfe(0xd3)+_0x48d402+_0x272bfe(0xce)+(_0x35cadc[_0x272bfe(0x10c)]?'OK':'NO')+'\x20('+_0x35cadc[_0x272bfe(0xde)]+')'),_0x35cadc;}if(!canCallApi())return _0x39a071[_0x272bfe(0xdf)]['debug'](_0x272bfe(0xec)+_0x48d402+_0x272bfe(0xc6)),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x2170d3=new Date()[_0x272bfe(0x90)](),_0x14d6a9=await getWeatherContext(_0x39a071),_0x54966b=PERSONA_MAPPING[_0x39a071[_0x272bfe(0x96)][_0x272bfe(0x119)]||_0x272bfe(0x99)],_0x12ef29='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x2170d3+_0x272bfe(0x9f)+_0x14d6a9+_0x272bfe(0xa0)+(_0x2116cc*0x64)['toFixed'](0x0)+_0x272bfe(0xba)+_0x48d402+_0x272bfe(0xfa)+_0x38cae5+_0x272bfe(0xc8)+_0x54966b+_0x272bfe(0xc4);try{updateApiTimestamp();const _0x14d108=await _0x39a071[_0x272bfe(0xf6)][_0x272bfe(0x104)](_0x12ef29),_0xbf6bf5=_0x14d108[_0x272bfe(0xf8)][_0x272bfe(0x8f)]()[_0x272bfe(0x112)](/```json|```/g,'')[_0x272bfe(0xe2)](),_0x33694f=JSON[_0x272bfe(0xa2)](_0xbf6bf5);return decisionCache[_0x48d402]={'decision':_0x33694f,'timestamp':_0x48fc17},_0x33694f;}catch(_0x2cd4fb){return _0x39a071[_0x272bfe(0xdf)][_0x272bfe(0x113)](_0x272bfe(0xb6)+_0x2cd4fb[_0x272bfe(0xc3)]),decisionCache[_0x48d402]={'decision':{'approved':!![],'reason':_0x272bfe(0xd7)},'timestamp':_0x48fc17-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x272bfe(0xd7)};}}async function runGeminiAnalysis(_0x1c75c9,_0x238510=''){const _0xe132cc=a0_0x5d5680;if(!_0x1c75c9[_0xe132cc(0xf6)])return;if(!canCallApi()){_0x1c75c9[_0xe132cc(0xdf)]['debug'](_0xe132cc(0xbe));return;}if(_0x1c75c9[_0xe132cc(0x8e)][_0xe132cc(0xc9)]===0x0)return;const _0x303c11=_0x1c75c9[_0xe132cc(0x8e)][_0xe132cc(0xc0)](0x0,0xf),_0x59250d=_0x1c75c9[_0xe132cc(0x106)],_0x41833a=PERSONA_MAPPING[_0x1c75c9['config']['aiPersona']||_0xe132cc(0x99)],_0x1665ac=_0x1c75c9['config'][_0xe132cc(0x10e)]||'Keine\x20Details.';let _0x1b6790='Unbekannt';try{const _0x4d20dc=await _0x1c75c9[_0xe132cc(0xaf)](_0xe132cc(0x8c));if(_0x4d20dc&&_0x4d20dc['val'])_0x1b6790=_0x4d20dc[_0xe132cc(0xeb)];}catch(_0x46be20){}let _0x41de84=![];try{const _0x1d1e23=await _0x1c75c9[_0xe132cc(0xaf)](_0xe132cc(0xfe));if(_0x1d1e23&&_0x1d1e23['val'])_0x41de84=!![];}catch(_0x5ded2a){}const _0x33a0f2=_0xe132cc(0xee)+_0x41833a+_0xe132cc(0x97)+_0x1665ac+'.\x20SYSTEM_MODE:\x20'+_0x59250d+_0xe132cc(0xbb)+_0x1b6790+_0xe132cc(0xaa)+JSON['stringify'](_0x303c11)+_0xe132cc(0x9e)+_0x238510+_0xe132cc(0xfb);try{updateApiTimestamp();const _0x1b3f78=await _0x1c75c9[_0xe132cc(0xf6)][_0xe132cc(0x104)](_0x33a0f2),_0x4dc8fb=JSON[_0xe132cc(0xa2)](_0x1b3f78[_0xe132cc(0xf8)][_0xe132cc(0x8f)]()[_0xe132cc(0x112)](/```json|```/g,'')[_0xe132cc(0xe2)]());await _0x1c75c9['setStateAsync'](_0xe132cc(0xff),{'val':JSON[_0xe132cc(0x10a)](_0x4dc8fb),'ack':!![]});if(_0x4dc8fb['summary'])await _0x1c75c9[_0xe132cc(0xc1)]('analysis.activitySummary',{'val':_0x4dc8fb[_0xe132cc(0xa1)],'ack':!![]});const _0x39dd77={'timestamp':Date['now'](),'id':Date[_0xe132cc(0xbc)]()[_0xe132cc(0x98)](),'analysis':{'activity':{'summary':_0x4dc8fb[_0xe132cc(0xa1)],'isAlert':_0x4dc8fb[_0xe132cc(0x117)],'alertReason':_0x4dc8fb[_0xe132cc(0xf7)]},'comfort':{'automationProposal':_0x4dc8fb['automationProposal']}}};_0x1c75c9[_0xe132cc(0xda)][_0xe132cc(0xed)](_0x39dd77);if(_0x1c75c9[_0xe132cc(0xda)][_0xe132cc(0xc9)]>0x32)_0x1c75c9['analysisHistory'][_0xe132cc(0xd6)]();await _0x1c75c9['setStateAsync'](_0xe132cc(0x118),{'val':JSON[_0xe132cc(0x10a)](_0x1c75c9[_0xe132cc(0xda)]),'ack':!![]});const _0xe6dc0f=_0x4dc8fb[_0xe132cc(0x117)]||![];_0xe6dc0f!==_0x1c75c9['lastAlertState']&&(await _0x1c75c9[_0xe132cc(0xc1)](_0xe132cc(0xf9),{'val':_0xe6dc0f,'ack':!![]}),_0x1c75c9['lastAlertState']=_0xe6dc0f,_0xe6dc0f&&(await _0x1c75c9[_0xe132cc(0xc1)](_0xe132cc(0xe1),{'val':_0x4dc8fb[_0xe132cc(0xf7)],'ack':!![]}),setup[_0xe132cc(0xf5)](_0x1c75c9,_0xe132cc(0xcd)+_0x4dc8fb[_0xe132cc(0xf7)],![],_0x4dc8fb[_0xe132cc(0xdb)])));if(_0x4dc8fb[_0xe132cc(0xf1)]&&_0x4dc8fb[_0xe132cc(0xf1)][_0xe132cc(0xcc)]){await _0x1c75c9[_0xe132cc(0xc1)](_0xe132cc(0xc7),{'val':!![],'ack':!![]}),await _0x1c75c9[_0xe132cc(0xc1)](_0xe132cc(0xd4),{'val':_0x4dc8fb[_0xe132cc(0xf1)][_0xe132cc(0x101)],'ack':!![]}),await _0x1c75c9[_0xe132cc(0xc1)](_0xe132cc(0xab),{'val':_0x4dc8fb[_0xe132cc(0xf1)][_0xe132cc(0xbf)],'ack':!![]}),await _0x1c75c9[_0xe132cc(0xc1)](_0xe132cc(0xac),{'val':JSON['stringify'](_0x4dc8fb[_0xe132cc(0xf1)][_0xe132cc(0xcb)]),'ack':!![]});if(_0x41de84)executeAutomationAction(_0x1c75c9);}}catch(_0x26a9b4){_0x1c75c9[_0xe132cc(0xdf)][_0xe132cc(0x108)](_0xe132cc(0xb3)+_0x26a9b4[_0xe132cc(0xc3)]);}}async function createDailyDigest(_0x17e879,_0x5cccf4){const _0x377b4b=a0_0x5d5680;if(!_0x17e879[_0x377b4b(0xc5)])return;if(!canCallApi()){await _0x17e879['setStateAsync'](LTM_DP_STATUS,{'val':_0x377b4b(0x105),'ack':!![]});return;}await _0x17e879['setStateAsync'](LTM_DP_STATUS,{'val':_0x377b4b(0x110),'ack':!![]});if(!_0x17e879['geminiModel']||_0x17e879[_0x377b4b(0xe9)][_0x377b4b(0xc9)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x17e879[_0x377b4b(0xc1)](LTM_DP_STATUS,{'val':_0x377b4b(0xf0),'ack':!![]});return;}const _0x2d9c6a=JSON['parse'](JSON[_0x377b4b(0x10a)](_0x17e879['rawEventLog'])),_0xa3d765=_0x2d9c6a[_0x377b4b(0xc9)],_0x2c01f5=_0x377b4b(0x9c)+JSON[_0x377b4b(0x10a)](_0x2d9c6a);try{updateApiTimestamp();const _0x566570=await _0x17e879[_0x377b4b(0xf6)][_0x377b4b(0x104)](_0x2c01f5),_0xdd1b4f=JSON['parse'](_0x566570[_0x377b4b(0xf8)]['text']()[_0x377b4b(0x112)](/```json|```/g,'')[_0x377b4b(0xe2)]()),_0x28f3b0={'timestamp':new Date()[_0x377b4b(0x10d)](),'eventCount':_0xa3d765,'summary':_0xdd1b4f[_0x377b4b(0xa1)]||_0x377b4b(0xa4),'activityLevel':_0xdd1b4f['activityLevel']||'normal','systemMode':_0x17e879[_0x377b4b(0x106)]};_0x17e879[_0x377b4b(0xfd)][_0x377b4b(0x95)](_0x28f3b0);const _0x4427c5=_0x17e879[_0x377b4b(0x96)][_0x377b4b(0x100)]||0x3c;_0x17e879[_0x377b4b(0xfd)][_0x377b4b(0xc9)]>_0x4427c5&&_0x17e879['dailyDigests']['splice'](0x0,_0x17e879['dailyDigests'][_0x377b4b(0xc9)]-_0x4427c5);await _0x17e879[_0x377b4b(0xc1)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x377b4b(0x10a)](_0x17e879['dailyDigests']),'ack':!![]}),_0x17e879[_0x377b4b(0xe9)]=[],await _0x17e879[_0x377b4b(0xc1)](LTM_DP_RAW_LOG,{'val':JSON[_0x377b4b(0x10a)](_0x17e879[_0x377b4b(0xe9)]),'ack':!![]}),await _0x17e879[_0x377b4b(0xc1)](LTM_DP_STATUS,{'val':_0x377b4b(0xd0),'ack':!![]});const _0x1e1cce=_0x377b4b(0xb7)+_0xdd1b4f[_0x377b4b(0xa1)]+'\x0aAktivitÃ¤t:\x20'+_0xdd1b4f[_0x377b4b(0x93)];setup[_0x377b4b(0xf5)](_0x17e879,_0x1e1cce,![],![]);if(_0x17e879[_0x377b4b(0xc5)]&&_0x5cccf4)_0x5cccf4['send'](_0x17e879,_0x377b4b(0xfc),{'digest':_0x28f3b0});}catch(_0x3b4a59){_0x17e879[_0x377b4b(0xdf)]['error'](_0x3b4a59[_0x377b4b(0xc3)]);}}async function runBaselineDriftAnalysis(_0x1d8349){const _0x22f210=a0_0x5d5680;if(!_0x1d8349[_0x22f210(0xc5)]||!_0x1d8349[_0x22f210(0xf6)])return;if(!canCallApi())return;const _0x297ef4=_0x1d8349[_0x22f210(0x96)][_0x22f210(0x91)]||0xe;if(_0x1d8349[_0x22f210(0xfd)][_0x22f210(0xc9)]<_0x297ef4+0x7){await _0x1d8349[_0x22f210(0xc1)](_0x22f210(0xd1),{'val':_0x22f210(0xe8),'ack':!![]});return;}const _0x13ec6c=_0x1d8349['dailyDigests'][_0x22f210(0xc0)](-_0x297ef4),_0x112d25=_0x1d8349[_0x22f210(0xfd)]['slice'](0x0,_0x1d8349[_0x22f210(0xfd)][_0x22f210(0xc9)]-_0x297ef4),_0x569056=_0x22f210(0xb9)+JSON['stringify'](_0x112d25)+_0x22f210(0xd5)+JSON['stringify'](_0x13ec6c);try{updateApiTimestamp();const _0x29e477=await _0x1d8349['geminiModel'][_0x22f210(0x104)](_0x569056),_0x57e77b=JSON[_0x22f210(0xa2)](_0x29e477['response'][_0x22f210(0x8f)]()['replace'](/```json|```/g,'')[_0x22f210(0xe2)]());_0x57e77b[_0x22f210(0x10f)]&&(await _0x1d8349[_0x22f210(0xc1)]('LTM.driftAnalysis.baselineDrift',{'val':_0x57e77b[_0x22f210(0x10f)],'ack':!![]}),await _0x1d8349['setStateAsync'](_0x22f210(0xb0),{'val':_0x57e77b[_0x22f210(0xca)],'ack':!![]}),await _0x1d8349[_0x22f210(0xc1)](_0x22f210(0x92),{'val':Date[_0x22f210(0xbc)](),'ack':!![]}));}catch(_0x44ed29){}}async function executeAutomationAction(_0x3f07c7){const _0x2ec490=a0_0x5d5680;try{const _0x3e27fe=await _0x3f07c7[_0x2ec490(0xaf)]('analysis.automation.targetId'),_0x13dd7b=await _0x3f07c7[_0x2ec490(0xaf)]('analysis.automation.targetValue');if(_0x3e27fe&&_0x3e27fe['val']&&_0x13dd7b){const _0x18d71f=_0x3e27fe[_0x2ec490(0xeb)];let _0x98a197=_0x13dd7b['val'];try{_0x98a197=JSON['parse'](_0x98a197);}catch(_0x5de91e){}_0x3f07c7[_0x2ec490(0xdf)][_0x2ec490(0xf4)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x18d71f+'\x20=\x20'+_0x98a197),await _0x3f07c7[_0x2ec490(0xb1)](_0x18d71f,_0x98a197);}else _0x3f07c7[_0x2ec490(0xdf)][_0x2ec490(0x113)](_0x2ec490(0xb8));}catch(_0x583504){_0x3f07c7[_0x2ec490(0xdf)][_0x2ec490(0x108)](_0x2ec490(0xe4)+_0x583504[_0x2ec490(0xc3)]);}}async function sendMorningBriefing(_0x4bb5a8){const _0x1273d6=a0_0x5d5680;if(!_0x4bb5a8[_0x1273d6(0xf6)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x4e343d=_0x1273d6(0xdc),_0x49a51c=await _0x4bb5a8[_0x1273d6(0xf6)][_0x1273d6(0x104)](_0x4e343d),_0x1b248a=_0x49a51c[_0x1273d6(0xf8)][_0x1273d6(0x8f)]();setup[_0x1273d6(0xf5)](_0x4bb5a8,_0x1273d6(0xdd)+_0x1b248a);}catch(_0x17631d){_0x4bb5a8[_0x1273d6(0xdf)]['error'](_0x1273d6(0x9a)+_0x17631d[_0x1273d6(0xc3)]);}}module[a0_0x5d5680(0xef)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};