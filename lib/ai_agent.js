const a0_0x3b1097=a0_0x3023;(function(_0x50f9cd,_0xf95396){const _0x1f0a3a=a0_0x3023,_0x293746=_0x50f9cd();while(!![]){try{const _0x4b3503=-parseInt(_0x1f0a3a(0x1c5))/0x1*(parseInt(_0x1f0a3a(0x197))/0x2)+parseInt(_0x1f0a3a(0x185))/0x3*(-parseInt(_0x1f0a3a(0x1dd))/0x4)+parseInt(_0x1f0a3a(0x1d9))/0x5+parseInt(_0x1f0a3a(0x1d7))/0x6*(parseInt(_0x1f0a3a(0x184))/0x7)+-parseInt(_0x1f0a3a(0x188))/0x8*(-parseInt(_0x1f0a3a(0x1f1))/0x9)+parseInt(_0x1f0a3a(0x1d6))/0xa*(parseInt(_0x1f0a3a(0x186))/0xb)+parseInt(_0x1f0a3a(0x19f))/0xc*(-parseInt(_0x1f0a3a(0x1a8))/0xd);if(_0x4b3503===_0xf95396)break;else _0x293746['push'](_0x293746['shift']());}catch(_0x4ff775){_0x293746['push'](_0x293746['shift']());}}}(a0_0x621b,0x920da));const a0_0x43e63d=(function(){let _0x10e5c2=!![];return function(_0x2d7e9e,_0x29c9e7){const _0x5b8d1a=_0x10e5c2?function(){if(_0x29c9e7){const _0x10255a=_0x29c9e7['apply'](_0x2d7e9e,arguments);return _0x29c9e7=null,_0x10255a;}}:function(){};return _0x10e5c2=![],_0x5b8d1a;};}()),a0_0x36db69=a0_0x43e63d(this,function(){const _0x41c53f=a0_0x3023;return a0_0x36db69[_0x41c53f(0x1bd)]()[_0x41c53f(0x1cf)](_0x41c53f(0x1d2))[_0x41c53f(0x1bd)]()[_0x41c53f(0x1e6)](a0_0x36db69)[_0x41c53f(0x1cf)](_0x41c53f(0x1d2));});a0_0x36db69();'use strict';const {GoogleGenerativeAI}=require(a0_0x3b1097(0x1a7)),setup=require('./setup'),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x3b1097(0x1aa),LTM_DP_RAW_LOG=a0_0x3b1097(0x1c2),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':a0_0x3b1097(0x1f3),'family':'Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','single_comfort':a0_0x3b1097(0x1d0),'security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x3b1097(0x1a3)};function canCallApi(){const _0x507d0c=a0_0x3b1097,_0x5eb90b=Date[_0x507d0c(0x1e1)]();return _0x5eb90b-lastGlobalApiCall>MIN_API_GAP_MS;}function a0_0x621b(){const _0x36cd5b=['trim','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','driftDetails',',\x20Wetter:\x20','isEmergency','decision','397802PvLkTX','\x20->\x20','alertReason','generateContent','analysisHistory','Wetterdaten\x20nicht\x20abrufbar','pop','message','12JePTah','stringify','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','debug','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','ANALYZE_HEALTH','.\x20EVENTS:\x20','Traffic-Schutz\x20(Auto-Approved)','@google/generative-ai','4137783CKPMpK','KI-Fehler\x20(Fallback)','LTM.processingStatus','.Current.Temperature','unshift','isProVersion','normal','.\x20ANWESEND:\x20','lastAlertState','.\x20EMERGENCY:\x20','getForeignStateAsync','KI\x20offline\x20(Fallback)','Digest','baselineDrift','LTM.driftAnalysis.baselineDrift','text','targetId','reason','info','\x20=\x20','automationProposal','toString','rawEventLog','Started...','analysis.automation.autoApply','analysis.automation.description','LTM.rawEventLog','analysis.automation.patternDetected','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','2psBMgq','activityLevel','isAlert','log','description','weatherInstance','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','geminiModel','¬∞C,\x20','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','search','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','Gemini\x20Error:\x20','(((.+)+)+)+$','.\x20SYSTEM_MODE:\x20','‚ö†Ô∏è\x20ALARM:\x20','analysis.automation.targetId','30EISqLN','4425438tRxufd','setForeignStateAsync','569565ttSsyU','val','livingContext','analysis.analysisHistory','4HxpDjc','push','Skipped\x20(Traffic)','timestamp','now','parse','setStateAsync','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','constructor','generic','getStateAsync','Success','Unbekannt','warn',',\x20Lichtverh√§ltnisse:\x20','Skipped\x20(No\x20AI\x20or\x20Data)','.forecast.current.state','response','detected','216vDHTlv','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','aiPersona','ltmStbWindowDays','sendNotification','dailyDigests','%)\x20nach\x20\x22','summary','slice','N/A\x20(Learning)','Briefing\x20Error:\x20','eventHistory','.Current.IsNight','toLocaleTimeString','currentSystemMode','üåÖ\x20Morning\x20Briefing:\x0a','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','analysis.alertReason','approved','.Current.WeatherText','useWeather','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','7NaeuiN','1927032HrqhJf','3192409yziqAS','replace','78176wGrCAi','config','ltmLtbWindowDays','.forecast.current.temperature','Keine\x20Details.','error','length','analysis.lastResult'];a0_0x621b=function(){return _0x36cd5b;};return a0_0x621b();}function updateApiTimestamp(){const _0x50f610=a0_0x3b1097;lastGlobalApiCall=Date[_0x50f610(0x1e1)]();}async function getWeatherContext(_0xb6afdc){const _0x12b4e0=a0_0x3b1097;if(!_0xb6afdc[_0x12b4e0(0x189)][_0x12b4e0(0x182)]||!_0xb6afdc[_0x12b4e0(0x189)]['weatherInstance'])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x21d196=_0xb6afdc[_0x12b4e0(0x189)][_0x12b4e0(0x1ca)];let _0x232c9c=await _0xb6afdc[_0x12b4e0(0x1b2)](_0x21d196+_0x12b4e0(0x1ab));if(!_0x232c9c)_0x232c9c=await _0xb6afdc[_0x12b4e0(0x1b2)](_0x21d196+_0x12b4e0(0x18b));let _0x1aa1a3=await _0xb6afdc['getForeignStateAsync'](_0x21d196+_0x12b4e0(0x181));if(!_0x1aa1a3)_0x1aa1a3=await _0xb6afdc[_0x12b4e0(0x1b2)](_0x21d196+_0x12b4e0(0x1ee));let _0x86a651=_0x12b4e0(0x1ea);const _0x2cd406=await _0xb6afdc[_0x12b4e0(0x1b2)](_0x21d196+_0x12b4e0(0x1fe));if(_0x2cd406)_0x86a651=_0x2cd406[_0x12b4e0(0x1da)]?'Nacht':'Tag';if(_0x232c9c&&_0x1aa1a3)return _0x232c9c['val']+_0x12b4e0(0x1cd)+_0x1aa1a3[_0x12b4e0(0x1da)]+_0x12b4e0(0x1ec)+_0x86a651;}catch(_0x4c56aa){}return _0x12b4e0(0x19c);}async function consultButler(_0x1bb86c,_0x29f102,_0x52e60a,_0x176d54){const _0x2fca1e=a0_0x3b1097;if(!_0x1bb86c['geminiModel'])return{'approved':!![],'reason':_0x2fca1e(0x1b3)};const _0xae0a65=Date[_0x2fca1e(0x1e1)]();if(decisionCache[_0x29f102]&&_0xae0a65-decisionCache[_0x29f102][_0x2fca1e(0x1e0)]<CACHE_TTL_MS){const _0x292fc5=decisionCache[_0x29f102][_0x2fca1e(0x196)];return _0x1bb86c['log'][_0x2fca1e(0x1a2)]('ü§ñ\x20Butler\x20Cache\x20Hit:\x20'+_0x29f102+_0x2fca1e(0x198)+(_0x292fc5[_0x2fca1e(0x180)]?'OK':'NO')+'\x20('+_0x292fc5[_0x2fca1e(0x1b9)]+')'),_0x292fc5;}if(!canCallApi())return _0x1bb86c[_0x2fca1e(0x1c8)][_0x2fca1e(0x1a2)](_0x2fca1e(0x192)+_0x29f102+'\x20√ºbersprungen\x20(Auto-Approved).'),{'approved':!![],'reason':_0x2fca1e(0x1a6)};const _0x1e876e=new Date()[_0x2fca1e(0x1ff)](),_0x35e84b=await getWeatherContext(_0x1bb86c),_0x864845=PERSONA_MAPPING[_0x1bb86c[_0x2fca1e(0x189)][_0x2fca1e(0x1f4)]||_0x2fca1e(0x1e7)],_0x3f0275=_0x2fca1e(0x191)+_0x1e876e+_0x2fca1e(0x194)+_0x35e84b+_0x2fca1e(0x1f2)+(_0x176d54*0x64)['toFixed'](0x0)+_0x2fca1e(0x1f8)+_0x29f102+_0x2fca1e(0x1c4)+_0x52e60a+_0x2fca1e(0x1e4)+_0x864845+_0x2fca1e(0x1e5);try{updateApiTimestamp();const _0x361ddb=await _0x1bb86c[_0x2fca1e(0x1cc)][_0x2fca1e(0x19a)](_0x3f0275),_0x109cb2=_0x361ddb['response'][_0x2fca1e(0x1b7)]()['replace'](/```json|```/g,'')['trim'](),_0x166651=JSON['parse'](_0x109cb2);return decisionCache[_0x29f102]={'decision':_0x166651,'timestamp':_0xae0a65},_0x166651;}catch(_0x4165a0){return _0x1bb86c[_0x2fca1e(0x1c8)][_0x2fca1e(0x1eb)]('ü§ñ\x20Butler\x20Brain\x20Error:\x20'+_0x4165a0[_0x2fca1e(0x19e)]),decisionCache[_0x29f102]={'decision':{'approved':!![],'reason':_0x2fca1e(0x1a9)},'timestamp':_0xae0a65-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x2fca1e(0x1a9)};}}async function runGeminiAnalysis(_0xed45f0,_0x45241c=''){const _0xf8c708=a0_0x3b1097;if(!_0xed45f0[_0xf8c708(0x1cc)])return;if(!canCallApi()){_0xed45f0[_0xf8c708(0x1c8)]['debug'](_0xf8c708(0x183));return;}if(_0xed45f0[_0xf8c708(0x1fd)][_0xf8c708(0x18e)]===0x0)return;const _0x3df36c=_0xed45f0[_0xf8c708(0x1fd)][_0xf8c708(0x1fa)](0x0,0xf),_0x45d72c=_0xed45f0['currentSystemMode'],_0x5b2fdc=PERSONA_MAPPING[_0xed45f0[_0xf8c708(0x189)][_0xf8c708(0x1f4)]||_0xf8c708(0x1e7)],_0x38c9b6=_0xed45f0[_0xf8c708(0x189)][_0xf8c708(0x1db)]||_0xf8c708(0x18c);let _0x34ae8a=_0xf8c708(0x1ea);try{const _0x5cebab=await _0xed45f0[_0xf8c708(0x1e8)]('system.presenceWho');if(_0x5cebab&&_0x5cebab['val'])_0x34ae8a=_0x5cebab[_0xf8c708(0x1da)];}catch(_0x2a321d){}let _0xbaf516=![];try{const _0x8e986e=await _0xed45f0[_0xf8c708(0x1e8)](_0xf8c708(0x1c0));if(_0x8e986e&&_0x8e986e[_0xf8c708(0x1da)])_0xbaf516=!![];}catch(_0x7a587c){}const _0x165769=_0xf8c708(0x202)+_0x5b2fdc+'.\x20KONTEXT:\x20'+_0x38c9b6+_0xf8c708(0x1d3)+_0x45d72c+_0xf8c708(0x1af)+_0x34ae8a+_0xf8c708(0x1a5)+JSON[_0xf8c708(0x1a0)](_0x3df36c)+_0xf8c708(0x1b1)+_0x45241c+_0xf8c708(0x1a1);try{updateApiTimestamp();const _0x2ab0db=await _0xed45f0[_0xf8c708(0x1cc)][_0xf8c708(0x19a)](_0x165769),_0x39f03d=JSON[_0xf8c708(0x1e2)](_0x2ab0db['response'][_0xf8c708(0x1b7)]()[_0xf8c708(0x187)](/```json|```/g,'')['trim']());await _0xed45f0[_0xf8c708(0x1e3)](_0xf8c708(0x18f),{'val':JSON[_0xf8c708(0x1a0)](_0x39f03d),'ack':!![]});if(_0x39f03d['summary'])await _0xed45f0[_0xf8c708(0x1e3)]('analysis.activitySummary',{'val':_0x39f03d[_0xf8c708(0x1f9)],'ack':!![]});const _0x4f3bf8={'timestamp':Date['now'](),'id':Date['now']()['toString'](),'analysis':{'activity':{'summary':_0x39f03d[_0xf8c708(0x1f9)],'isAlert':_0x39f03d['isAlert'],'alertReason':_0x39f03d[_0xf8c708(0x199)]},'comfort':{'automationProposal':_0x39f03d['automationProposal']}}};_0xed45f0[_0xf8c708(0x19b)][_0xf8c708(0x1ac)](_0x4f3bf8);if(_0xed45f0['analysisHistory']['length']>0x32)_0xed45f0[_0xf8c708(0x19b)][_0xf8c708(0x19d)]();await _0xed45f0[_0xf8c708(0x1e3)](_0xf8c708(0x1dc),{'val':JSON[_0xf8c708(0x1a0)](_0xed45f0['analysisHistory']),'ack':!![]});const _0x119d81=_0x39f03d[_0xf8c708(0x1c7)]||![];_0x119d81!==_0xed45f0[_0xf8c708(0x1b0)]&&(await _0xed45f0[_0xf8c708(0x1e3)]('analysis.isAlert',{'val':_0x119d81,'ack':!![]}),_0xed45f0[_0xf8c708(0x1b0)]=_0x119d81,_0x119d81&&(await _0xed45f0[_0xf8c708(0x1e3)](_0xf8c708(0x17f),{'val':_0x39f03d[_0xf8c708(0x199)],'ack':!![]}),setup[_0xf8c708(0x1f6)](_0xed45f0,_0xf8c708(0x1d4)+_0x39f03d['alertReason'],![],_0x39f03d[_0xf8c708(0x195)])));if(_0x39f03d[_0xf8c708(0x1bc)]&&_0x39f03d[_0xf8c708(0x1bc)][_0xf8c708(0x1f0)]){await _0xed45f0['setStateAsync'](_0xf8c708(0x1c3),{'val':!![],'ack':!![]}),await _0xed45f0['setStateAsync'](_0xf8c708(0x1c1),{'val':_0x39f03d[_0xf8c708(0x1bc)][_0xf8c708(0x1c9)],'ack':!![]}),await _0xed45f0[_0xf8c708(0x1e3)](_0xf8c708(0x1d5),{'val':_0x39f03d[_0xf8c708(0x1bc)][_0xf8c708(0x1b8)],'ack':!![]}),await _0xed45f0[_0xf8c708(0x1e3)]('analysis.automation.targetValue',{'val':JSON[_0xf8c708(0x1a0)](_0x39f03d[_0xf8c708(0x1bc)]['targetValue']),'ack':!![]});if(_0xbaf516)executeAutomationAction(_0xed45f0);}}catch(_0x36d8a3){_0xed45f0[_0xf8c708(0x1c8)]['error'](_0xf8c708(0x1d1)+_0x36d8a3[_0xf8c708(0x19e)]);}}async function createDailyDigest(_0x14b0fc,_0x556b94){const _0x53c438=a0_0x3b1097;if(!_0x14b0fc[_0x53c438(0x1ad)])return;if(!canCallApi()){await _0x14b0fc[_0x53c438(0x1e3)](LTM_DP_STATUS,{'val':_0x53c438(0x1df),'ack':!![]});return;}await _0x14b0fc[_0x53c438(0x1e3)](LTM_DP_STATUS,{'val':_0x53c438(0x1bf),'ack':!![]});if(!_0x14b0fc[_0x53c438(0x1cc)]||_0x14b0fc[_0x53c438(0x1be)][_0x53c438(0x18e)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x14b0fc[_0x53c438(0x1e3)](LTM_DP_STATUS,{'val':_0x53c438(0x1ed),'ack':!![]});return;}const _0x36f4af=JSON[_0x53c438(0x1e2)](JSON['stringify'](_0x14b0fc[_0x53c438(0x1be)])),_0x3743b3=_0x36f4af[_0x53c438(0x18e)],_0x2a1159='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x53c438(0x1a0)](_0x36f4af);try{updateApiTimestamp();const _0x5c0f37=await _0x14b0fc[_0x53c438(0x1cc)][_0x53c438(0x19a)](_0x2a1159),_0x20606e=JSON[_0x53c438(0x1e2)](_0x5c0f37['response']['text']()[_0x53c438(0x187)](/```json|```/g,'')['trim']()),_0x1a4c26={'timestamp':new Date()['toISOString'](),'eventCount':_0x3743b3,'summary':_0x20606e[_0x53c438(0x1f9)]||_0x53c438(0x1b4),'activityLevel':_0x20606e['activityLevel']||_0x53c438(0x1ae),'systemMode':_0x14b0fc[_0x53c438(0x200)]};_0x14b0fc['dailyDigests'][_0x53c438(0x1de)](_0x1a4c26);const _0x4016f6=_0x14b0fc[_0x53c438(0x189)][_0x53c438(0x18a)]||0x3c;_0x14b0fc[_0x53c438(0x1f7)][_0x53c438(0x18e)]>_0x4016f6&&_0x14b0fc['dailyDigests']['splice'](0x0,_0x14b0fc['dailyDigests'][_0x53c438(0x18e)]-_0x4016f6);await _0x14b0fc[_0x53c438(0x1e3)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x53c438(0x1a0)](_0x14b0fc[_0x53c438(0x1f7)]),'ack':!![]}),_0x14b0fc['rawEventLog']=[],await _0x14b0fc[_0x53c438(0x1e3)](LTM_DP_RAW_LOG,{'val':JSON[_0x53c438(0x1a0)](_0x14b0fc['rawEventLog']),'ack':!![]}),await _0x14b0fc[_0x53c438(0x1e3)](LTM_DP_STATUS,{'val':_0x53c438(0x1e9),'ack':!![]});const _0x5338e7='üìÖ\x20Daily\x20Digest:\x0a'+_0x20606e[_0x53c438(0x1f9)]+'\x0aAktivit√§t:\x20'+_0x20606e[_0x53c438(0x1c6)];setup['sendNotification'](_0x14b0fc,_0x5338e7,![],![]);if(_0x14b0fc[_0x53c438(0x1ad)]&&_0x556b94)_0x556b94['send'](_0x14b0fc,_0x53c438(0x1a4),{'digest':_0x1a4c26});}catch(_0x1f4b68){_0x14b0fc[_0x53c438(0x1c8)][_0x53c438(0x18d)](_0x1f4b68[_0x53c438(0x19e)]);}}async function runBaselineDriftAnalysis(_0x4e65c5){const _0x405ecc=a0_0x3b1097;if(!_0x4e65c5[_0x405ecc(0x1ad)]||!_0x4e65c5[_0x405ecc(0x1cc)])return;if(!canCallApi())return;const _0xf6cda1=_0x4e65c5[_0x405ecc(0x189)][_0x405ecc(0x1f5)]||0xe;if(_0x4e65c5['dailyDigests']['length']<_0xf6cda1+0x7){await _0x4e65c5[_0x405ecc(0x1e3)](_0x405ecc(0x1b6),{'val':_0x405ecc(0x1fb),'ack':!![]});return;}const _0x235b66=_0x4e65c5[_0x405ecc(0x1f7)][_0x405ecc(0x1fa)](-_0xf6cda1),_0xc30169=_0x4e65c5[_0x405ecc(0x1f7)][_0x405ecc(0x1fa)](0x0,_0x4e65c5[_0x405ecc(0x1f7)][_0x405ecc(0x18e)]-_0xf6cda1),_0x1a7127='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x405ecc(0x1a0)](_0xc30169)+'\x0aSTB:\x20'+JSON[_0x405ecc(0x1a0)](_0x235b66);try{updateApiTimestamp();const _0x3378a9=await _0x4e65c5['geminiModel'][_0x405ecc(0x19a)](_0x1a7127),_0x7447fd=JSON['parse'](_0x3378a9[_0x405ecc(0x1ef)][_0x405ecc(0x1b7)]()[_0x405ecc(0x187)](/```json|```/g,'')[_0x405ecc(0x190)]());_0x7447fd[_0x405ecc(0x1b5)]&&(await _0x4e65c5['setStateAsync'](_0x405ecc(0x1b6),{'val':_0x7447fd['baselineDrift'],'ack':!![]}),await _0x4e65c5[_0x405ecc(0x1e3)]('LTM.driftAnalysis.driftDetails',{'val':_0x7447fd[_0x405ecc(0x193)],'ack':!![]}),await _0x4e65c5[_0x405ecc(0x1e3)]('LTM.driftAnalysis.lastCheck',{'val':Date[_0x405ecc(0x1e1)](),'ack':!![]}));}catch(_0x35bd8c){}}async function executeAutomationAction(_0x18f8e4){const _0x1f3918=a0_0x3b1097;try{const _0x4474f9=await _0x18f8e4[_0x1f3918(0x1e8)](_0x1f3918(0x1d5)),_0x2056f6=await _0x18f8e4['getStateAsync']('analysis.automation.targetValue');if(_0x4474f9&&_0x4474f9[_0x1f3918(0x1da)]&&_0x2056f6){const _0x38bcf8=_0x4474f9[_0x1f3918(0x1da)];let _0x51652d=_0x2056f6[_0x1f3918(0x1da)];try{_0x51652d=JSON[_0x1f3918(0x1e2)](_0x51652d);}catch(_0x1653e4){}_0x18f8e4[_0x1f3918(0x1c8)][_0x1f3918(0x1ba)]('ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x38bcf8+_0x1f3918(0x1bb)+_0x51652d),await _0x18f8e4[_0x1f3918(0x1d8)](_0x38bcf8,_0x51652d);}else _0x18f8e4[_0x1f3918(0x1c8)][_0x1f3918(0x1eb)](_0x1f3918(0x1cb));}catch(_0x49363f){_0x18f8e4[_0x1f3918(0x1c8)][_0x1f3918(0x18d)]('BUTLER\x20Execution\x20Error:\x20'+_0x49363f['message']);}}async function sendMorningBriefing(_0x31eaf6){const _0x574c1c=a0_0x3b1097;if(!_0x31eaf6['geminiModel'])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x5cc4c1=_0x574c1c(0x1ce),_0x2dd4c4=await _0x31eaf6['geminiModel']['generateContent'](_0x5cc4c1),_0x4d81fd=_0x2dd4c4[_0x574c1c(0x1ef)]['text']();setup['sendNotification'](_0x31eaf6,_0x574c1c(0x201)+_0x4d81fd);}catch(_0x1ea04d){_0x31eaf6['log']['error'](_0x574c1c(0x1fc)+_0x1ea04d[_0x574c1c(0x19e)]);}}function a0_0x3023(_0xd40621,_0x1066c2){const _0x4bfc74=a0_0x621b();return a0_0x3023=function(_0x36db69,_0x43e63d){_0x36db69=_0x36db69-0x17f;let _0x621bcb=_0x4bfc74[_0x36db69];return _0x621bcb;},a0_0x3023(_0xd40621,_0x1066c2);}module['exports']={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};