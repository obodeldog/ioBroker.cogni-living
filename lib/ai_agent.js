const a0_0x322cf4=a0_0x55f1;function a0_0x55f1(_0x544091,_0xebff){const _0x16df3d=a0_0xd53e();return a0_0x55f1=function(_0x467101,_0x2c97bf){_0x467101=_0x467101-0xa7;let _0xd53ef8=_0x16df3d[_0x467101];return _0xd53ef8;},a0_0x55f1(_0x544091,_0xebff);}(function(_0x5559d4,_0xb328ea){const _0x494bb1=a0_0x55f1,_0x418af3=_0x5559d4();while(!![]){try{const _0x619c93=-parseInt(_0x494bb1(0xd2))/0x1*(parseInt(_0x494bb1(0x127))/0x2)+-parseInt(_0x494bb1(0xae))/0x3+-parseInt(_0x494bb1(0xda))/0x4+-parseInt(_0x494bb1(0xa9))/0x5+-parseInt(_0x494bb1(0x10c))/0x6*(parseInt(_0x494bb1(0x11e))/0x7)+parseInt(_0x494bb1(0xd3))/0x8*(parseInt(_0x494bb1(0xc8))/0x9)+parseInt(_0x494bb1(0xf3))/0xa*(parseInt(_0x494bb1(0xe2))/0xb);if(_0x619c93===_0xb328ea)break;else _0x418af3['push'](_0x418af3['shift']());}catch(_0x45d402){_0x418af3['push'](_0x418af3['shift']());}}}(a0_0xd53e,0x602be));function a0_0xd53e(){const _0x5be0a0=['baselineDrift','detected','getStateAsync','(((.+)+)+)+$','stringify','toFixed','exports','Traffic-Schutz\x20(Auto-Approved)','‚ö†Ô∏è\x20ALARM:\x20','aiPersona','livingContext','slice','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','ltmLtbWindowDays','activityLevel','analysis.lastResult','KI\x20offline\x20(Fallback)','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','analysis.automation.autoApply','toString','208062KAccQY','isAlert','LTM.rawEventLog','pop','val','Unbekannt','LTM.driftAnalysis.lastCheck','lastAlertState','analysis.isAlert','summary','1DYdTMK','8uSjVWr','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','.Current.WeatherText','.Current.Temperature','decision','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','Skipped\x20(Traffic)','2576152rogIqC','analysisHistory','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','currentSystemMode','isEmergency','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','analysis.alertReason','setStateAsync','671HarrPX','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','generic','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','unshift','text','targetId','models/gemini-flash-latest','rawEventLog','analysis.automation.targetValue','Keine\x20Details.',',\x20Wetter:\x20','\x20->\x20','ANALYZE_HEALTH','Success','targetValue','dailyDigests','634730XaGAgC','constructor','.\x20EMERGENCY:\x20','\x0aSTB:\x20','sendNotification','LTM.dailyDigests','automationProposal','Tag','alertReason','parse','%)\x20nach\x20\x22','error','config','now','@google/generative-ai','KI-Fehler\x20(Fallback)','generateContent','isProVersion','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','üåÖ\x20Morning\x20Briefing:\x0a','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','toLocaleTimeString','log','response','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','3767886adLZin','push','approved','\x20√ºbersprungen\x20(Auto-Approved).','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','.forecast.current.state','useWeather','weatherInstance','system.presenceWho','BUTLER\x20Execution\x20Error:\x20','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','analysis.automation.description','.Current.IsNight','geminiModel','search','analysis.activitySummary','trim','.\x20ANWESEND:\x20','7UwCLNm','getForeignStateAsync','Gemini\x20Error:\x20','N/A\x20(Learning)','debug','Unbekannt\x20(Kein\x20Sensor)','analysis.analysisHistory','length','LTM.driftAnalysis.driftDetails','1446350ZpVumK','Skipped\x20(No\x20AI\x20or\x20Data)','replace','Nacht','eventHistory','3615730dyVmXP','.forecast.current.temperature','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','send','Digest','2348139AsJYCb','message','normal','¬∞C,\x20','apply','analysis.automation.targetId'];a0_0xd53e=function(){return _0x5be0a0;};return a0_0xd53e();}const a0_0x2c97bf=(function(){let _0x145a64=!![];return function(_0x3a3b67,_0x1374a4){const _0x197697=_0x145a64?function(){const _0x599d3f=a0_0x55f1;if(_0x1374a4){const _0xdccfd5=_0x1374a4[_0x599d3f(0xb2)](_0x3a3b67,arguments);return _0x1374a4=null,_0xdccfd5;}}:function(){};return _0x145a64=![],_0x197697;};}()),a0_0x467101=a0_0x2c97bf(this,function(){const _0x3669bd=a0_0x55f1;return a0_0x467101['toString']()[_0x3669bd(0x11a)](_0x3669bd(0xb7))[_0x3669bd(0xc7)]()[_0x3669bd(0xf4)](a0_0x467101)[_0x3669bd(0x11a)](_0x3669bd(0xb7));});a0_0x467101();'use strict';const {GoogleGenerativeAI}=require(a0_0x322cf4(0x101)),setup=require('./setup'),GEMINI_MODEL=a0_0x322cf4(0xe9),LTM_DP_DAILY_DIGESTS=a0_0x322cf4(0xf8),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG=a0_0x322cf4(0xca),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x322cf4(0xd8),'senior_aal':a0_0x322cf4(0xc5),'family':'Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','single_comfort':a0_0x322cf4(0xab),'security':'Sicherheit\x20geht\x20vor.','energy_saver':'PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'};function canCallApi(){const _0x32a5e1=a0_0x322cf4,_0x2c796d=Date[_0x32a5e1(0x100)]();return _0x2c796d-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x3a0144=a0_0x322cf4;lastGlobalApiCall=Date[_0x3a0144(0x100)]();}async function getWeatherContext(_0x572d1b){const _0x15b17d=a0_0x322cf4;if(!_0x572d1b['config'][_0x15b17d(0x112)]||!_0x572d1b['config'][_0x15b17d(0x113)])return _0x15b17d(0x123);try{const _0x366c1c=_0x572d1b[_0x15b17d(0xff)]['weatherInstance'];let _0x173fc2=await _0x572d1b[_0x15b17d(0x11f)](_0x366c1c+_0x15b17d(0xd6));if(!_0x173fc2)_0x173fc2=await _0x572d1b[_0x15b17d(0x11f)](_0x366c1c+_0x15b17d(0xaa));let _0x1f6347=await _0x572d1b['getForeignStateAsync'](_0x366c1c+_0x15b17d(0xd5));if(!_0x1f6347)_0x1f6347=await _0x572d1b[_0x15b17d(0x11f)](_0x366c1c+_0x15b17d(0x111));let _0x11282f='Unbekannt';const _0x319c90=await _0x572d1b['getForeignStateAsync'](_0x366c1c+_0x15b17d(0x118));if(_0x319c90)_0x11282f=_0x319c90[_0x15b17d(0xcc)]?_0x15b17d(0xa7):_0x15b17d(0xfa);if(_0x173fc2&&_0x1f6347)return _0x173fc2[_0x15b17d(0xcc)]+_0x15b17d(0xb1)+_0x1f6347[_0x15b17d(0xcc)]+',\x20Lichtverh√§ltnisse:\x20'+_0x11282f;}catch(_0xf6c377){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x5e2b89,_0x209b15,_0x93a8c9,_0x2608b3){const _0x521547=a0_0x322cf4;if(!_0x5e2b89[_0x521547(0x119)])return{'approved':!![],'reason':_0x521547(0xc4)};const _0x4bc325=Date[_0x521547(0x100)]();if(decisionCache[_0x209b15]&&_0x4bc325-decisionCache[_0x209b15]['timestamp']<CACHE_TTL_MS){const _0x44e32e=decisionCache[_0x209b15][_0x521547(0xd7)];return _0x5e2b89[_0x521547(0x109)][_0x521547(0x122)](_0x521547(0xe5)+_0x209b15+_0x521547(0xee)+(_0x44e32e[_0x521547(0x10e)]?'OK':'NO')+'\x20('+_0x44e32e['reason']+')'),_0x44e32e;}if(!canCallApi())return _0x5e2b89['log']['debug'](_0x521547(0xe3)+_0x209b15+_0x521547(0x10f)),{'approved':!![],'reason':_0x521547(0xbb)};const _0x1b0488=new Date()[_0x521547(0x108)](),_0x450775=await getWeatherContext(_0x5e2b89),_0xb228e1=PERSONA_MAPPING[_0x5e2b89[_0x521547(0xff)][_0x521547(0xbd)]||_0x521547(0xe4)],_0x253c1d=_0x521547(0xd4)+_0x1b0488+_0x521547(0xed)+_0x450775+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x2608b3*0x64)[_0x521547(0xb9)](0x0)+_0x521547(0xfd)+_0x209b15+_0x521547(0x116)+_0x93a8c9+_0x521547(0x110)+_0xb228e1+_0x521547(0xdc);try{updateApiTimestamp();const _0x382f78=await _0x5e2b89['geminiModel'][_0x521547(0x103)](_0x253c1d),_0x5bc77a=_0x382f78[_0x521547(0x10a)][_0x521547(0xe7)]()['replace'](/```json|```/g,'')[_0x521547(0x11c)](),_0x40090f=JSON['parse'](_0x5bc77a);return decisionCache[_0x209b15]={'decision':_0x40090f,'timestamp':_0x4bc325},_0x40090f;}catch(_0xd79160){return _0x5e2b89[_0x521547(0x109)]['warn']('ü§ñ\x20Butler\x20Brain\x20Error:\x20'+_0xd79160[_0x521547(0xaf)]),decisionCache[_0x209b15]={'decision':{'approved':!![],'reason':_0x521547(0x102)},'timestamp':_0x4bc325-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x5916d5,_0x168c7b=''){const _0x2be014=a0_0x322cf4;if(!_0x5916d5[_0x2be014(0x119)])return;if(!canCallApi()){_0x5916d5[_0x2be014(0x109)][_0x2be014(0x122)]('ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x5916d5['eventHistory'][_0x2be014(0x125)]===0x0)return;const _0x15a677=_0x5916d5[_0x2be014(0xa8)][_0x2be014(0xbf)](0x0,0xf),_0x5c0213=_0x5916d5['currentSystemMode'],_0xf60c03=PERSONA_MAPPING[_0x5916d5[_0x2be014(0xff)][_0x2be014(0xbd)]||_0x2be014(0xe4)],_0xe61c31=_0x5916d5[_0x2be014(0xff)][_0x2be014(0xbe)]||_0x2be014(0xec);let _0x38cfae=_0x2be014(0xcd);try{const _0x3129e9=await _0x5916d5[_0x2be014(0xb6)](_0x2be014(0x114));if(_0x3129e9&&_0x3129e9['val'])_0x38cfae=_0x3129e9[_0x2be014(0xcc)];}catch(_0x26b54b){}let _0x205236=![];try{const _0x9b747f=await _0x5916d5[_0x2be014(0xb6)](_0x2be014(0xc6));if(_0x9b747f&&_0x9b747f[_0x2be014(0xcc)])_0x205236=!![];}catch(_0x3d55bf){}const _0x1525a4=_0x2be014(0xc0)+_0xf60c03+'.\x20KONTEXT:\x20'+_0xe61c31+'.\x20SYSTEM_MODE:\x20'+_0x5c0213+_0x2be014(0x11d)+_0x38cfae+'.\x20EVENTS:\x20'+JSON[_0x2be014(0xb8)](_0x15a677)+_0x2be014(0xf5)+_0x168c7b+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x25d042=await _0x5916d5[_0x2be014(0x119)]['generateContent'](_0x1525a4),_0x4d1203=JSON[_0x2be014(0xfc)](_0x25d042[_0x2be014(0x10a)][_0x2be014(0xe7)]()[_0x2be014(0x129)](/```json|```/g,'')[_0x2be014(0x11c)]());await _0x5916d5['setStateAsync'](_0x2be014(0xc3),{'val':JSON[_0x2be014(0xb8)](_0x4d1203),'ack':!![]});if(_0x4d1203[_0x2be014(0xd1)])await _0x5916d5[_0x2be014(0xe1)](_0x2be014(0x11b),{'val':_0x4d1203[_0x2be014(0xd1)],'ack':!![]});const _0x21b493={'timestamp':Date['now'](),'id':Date['now']()[_0x2be014(0xc7)](),'analysis':{'activity':{'summary':_0x4d1203[_0x2be014(0xd1)],'isAlert':_0x4d1203[_0x2be014(0xc9)],'alertReason':_0x4d1203[_0x2be014(0xfb)]},'comfort':{'automationProposal':_0x4d1203[_0x2be014(0xf9)]}}};_0x5916d5[_0x2be014(0xdb)][_0x2be014(0xe6)](_0x21b493);if(_0x5916d5[_0x2be014(0xdb)][_0x2be014(0x125)]>0x32)_0x5916d5[_0x2be014(0xdb)][_0x2be014(0xcb)]();await _0x5916d5[_0x2be014(0xe1)](_0x2be014(0x124),{'val':JSON['stringify'](_0x5916d5[_0x2be014(0xdb)]),'ack':!![]});const _0x4c6031=_0x4d1203[_0x2be014(0xc9)]||![];_0x4c6031!==_0x5916d5['lastAlertState']&&(await _0x5916d5['setStateAsync'](_0x2be014(0xd0),{'val':_0x4c6031,'ack':!![]}),_0x5916d5[_0x2be014(0xcf)]=_0x4c6031,_0x4c6031&&(await _0x5916d5[_0x2be014(0xe1)](_0x2be014(0xe0),{'val':_0x4d1203[_0x2be014(0xfb)],'ack':!![]}),setup[_0x2be014(0xf7)](_0x5916d5,_0x2be014(0xbc)+_0x4d1203[_0x2be014(0xfb)],![],_0x4d1203[_0x2be014(0xde)])));if(_0x4d1203[_0x2be014(0xf9)]&&_0x4d1203[_0x2be014(0xf9)][_0x2be014(0xb5)]){await _0x5916d5['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x5916d5[_0x2be014(0xe1)](_0x2be014(0x117),{'val':_0x4d1203[_0x2be014(0xf9)]['description'],'ack':!![]}),await _0x5916d5['setStateAsync'](_0x2be014(0xb3),{'val':_0x4d1203[_0x2be014(0xf9)][_0x2be014(0xe8)],'ack':!![]}),await _0x5916d5[_0x2be014(0xe1)]('analysis.automation.targetValue',{'val':JSON[_0x2be014(0xb8)](_0x4d1203[_0x2be014(0xf9)][_0x2be014(0xf1)]),'ack':!![]});if(_0x205236)executeAutomationAction(_0x5916d5);}}catch(_0x3c82cc){_0x5916d5[_0x2be014(0x109)]['error'](_0x2be014(0x120)+_0x3c82cc['message']);}}async function createDailyDigest(_0xc35713,_0x343f7d){const _0xc07fcf=a0_0x322cf4;if(!_0xc35713[_0xc07fcf(0x104)])return;if(!canCallApi()){await _0xc35713[_0xc07fcf(0xe1)](LTM_DP_STATUS,{'val':_0xc07fcf(0xd9),'ack':!![]});return;}await _0xc35713[_0xc07fcf(0xe1)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0xc35713[_0xc07fcf(0x119)]||_0xc35713['rawEventLog']['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0xc35713[_0xc07fcf(0xe1)](LTM_DP_STATUS,{'val':_0xc07fcf(0x128),'ack':!![]});return;}const _0x3e9236=JSON['parse'](JSON[_0xc07fcf(0xb8)](_0xc35713[_0xc07fcf(0xea)])),_0x4c0a22=_0x3e9236[_0xc07fcf(0x125)],_0x4b6ac3=_0xc07fcf(0x107)+JSON[_0xc07fcf(0xb8)](_0x3e9236);try{updateApiTimestamp();const _0x197120=await _0xc35713['geminiModel'][_0xc07fcf(0x103)](_0x4b6ac3),_0x5a3a1d=JSON[_0xc07fcf(0xfc)](_0x197120[_0xc07fcf(0x10a)][_0xc07fcf(0xe7)]()[_0xc07fcf(0x129)](/```json|```/g,'')[_0xc07fcf(0x11c)]()),_0x12c277={'timestamp':new Date()['toISOString'](),'eventCount':_0x4c0a22,'summary':_0x5a3a1d[_0xc07fcf(0xd1)]||_0xc07fcf(0xad),'activityLevel':_0x5a3a1d[_0xc07fcf(0xc2)]||_0xc07fcf(0xb0),'systemMode':_0xc35713[_0xc07fcf(0xdd)]};_0xc35713[_0xc07fcf(0xf2)][_0xc07fcf(0x10d)](_0x12c277);const _0x4c69c2=_0xc35713[_0xc07fcf(0xff)][_0xc07fcf(0xc1)]||0x3c;_0xc35713['dailyDigests'][_0xc07fcf(0x125)]>_0x4c69c2&&_0xc35713[_0xc07fcf(0xf2)]['splice'](0x0,_0xc35713[_0xc07fcf(0xf2)][_0xc07fcf(0x125)]-_0x4c69c2);await _0xc35713['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0xc07fcf(0xb8)](_0xc35713[_0xc07fcf(0xf2)]),'ack':!![]}),_0xc35713[_0xc07fcf(0xea)]=[],await _0xc35713['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0xc07fcf(0xb8)](_0xc35713[_0xc07fcf(0xea)]),'ack':!![]}),await _0xc35713[_0xc07fcf(0xe1)](LTM_DP_STATUS,{'val':_0xc07fcf(0xf0),'ack':!![]});if(_0xc35713[_0xc07fcf(0x104)]&&_0x343f7d)_0x343f7d[_0xc07fcf(0xac)](_0xc35713,_0xc07fcf(0xef),{'digest':_0x12c277});}catch(_0x46a5c2){_0xc35713['log'][_0xc07fcf(0xfe)](_0x46a5c2['message']);}}async function runBaselineDriftAnalysis(_0x40ef16){const _0xf01b63=a0_0x322cf4;if(!_0x40ef16['isProVersion']||!_0x40ef16['geminiModel'])return;if(!canCallApi())return;const _0x26111a=_0x40ef16[_0xf01b63(0xff)]['ltmStbWindowDays']||0xe;if(_0x40ef16['dailyDigests'][_0xf01b63(0x125)]<_0x26111a+0x7){await _0x40ef16['setStateAsync']('LTM.driftAnalysis.baselineDrift',{'val':_0xf01b63(0x121),'ack':!![]});return;}const _0x2c24af=_0x40ef16[_0xf01b63(0xf2)][_0xf01b63(0xbf)](-_0x26111a),_0x4fbeb9=_0x40ef16[_0xf01b63(0xf2)][_0xf01b63(0xbf)](0x0,_0x40ef16[_0xf01b63(0xf2)][_0xf01b63(0x125)]-_0x26111a),_0x4c34fd=_0xf01b63(0xdf)+JSON['stringify'](_0x4fbeb9)+_0xf01b63(0xf6)+JSON['stringify'](_0x2c24af);try{updateApiTimestamp();const _0x1cff1e=await _0x40ef16[_0xf01b63(0x119)][_0xf01b63(0x103)](_0x4c34fd),_0x2fad44=JSON[_0xf01b63(0xfc)](_0x1cff1e['response'][_0xf01b63(0xe7)]()['replace'](/```json|```/g,'')[_0xf01b63(0x11c)]());_0x2fad44[_0xf01b63(0xb4)]&&(await _0x40ef16[_0xf01b63(0xe1)]('LTM.driftAnalysis.baselineDrift',{'val':_0x2fad44['baselineDrift'],'ack':!![]}),await _0x40ef16[_0xf01b63(0xe1)](_0xf01b63(0x126),{'val':_0x2fad44['driftDetails'],'ack':!![]}),await _0x40ef16[_0xf01b63(0xe1)](_0xf01b63(0xce),{'val':Date[_0xf01b63(0x100)](),'ack':!![]}));}catch(_0x3ac181){}}async function executeAutomationAction(_0x335338){const _0x4244bf=a0_0x322cf4;try{const _0x5a5a07=await _0x335338[_0x4244bf(0xb6)](_0x4244bf(0xb3)),_0x5e9fc4=await _0x335338[_0x4244bf(0xb6)](_0x4244bf(0xeb));if(_0x5a5a07&&_0x5a5a07[_0x4244bf(0xcc)]&&_0x5e9fc4){const _0x4dc50e=_0x5a5a07['val'];let _0x584979=_0x5e9fc4['val'];try{_0x584979=JSON[_0x4244bf(0xfc)](_0x584979);}catch(_0x21fa72){}_0x335338[_0x4244bf(0x109)]['info']('ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x4dc50e+'\x20=\x20'+_0x584979),await _0x335338['setForeignStateAsync'](_0x4dc50e,_0x584979);}else _0x335338[_0x4244bf(0x109)]['warn'](_0x4244bf(0x10b));}catch(_0x1e7261){_0x335338[_0x4244bf(0x109)][_0x4244bf(0xfe)](_0x4244bf(0x115)+_0x1e7261['message']);}}async function sendMorningBriefing(_0x174bcc){const _0x5ee0f7=a0_0x322cf4;if(!_0x174bcc['geminiModel'])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x52c666=_0x5ee0f7(0x105),_0x2810b1=await _0x174bcc[_0x5ee0f7(0x119)][_0x5ee0f7(0x103)](_0x52c666),_0x4ef073=_0x2810b1[_0x5ee0f7(0x10a)][_0x5ee0f7(0xe7)]();setup[_0x5ee0f7(0xf7)](_0x174bcc,_0x5ee0f7(0x106)+_0x4ef073);}catch(_0x5adf1e){_0x174bcc['log'][_0x5ee0f7(0xfe)]('Briefing\x20Error:\x20'+_0x5adf1e[_0x5ee0f7(0xaf)]);}}module[a0_0x322cf4(0xba)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};