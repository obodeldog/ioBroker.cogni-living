const a0_0x6ba508=a0_0x5107;(function(_0x78040f,_0x54349f){const _0x8886a1=a0_0x5107,_0x55dc9a=_0x78040f();while(!![]){try{const _0x188907=parseInt(_0x8886a1(0x150))/0x1*(parseInt(_0x8886a1(0x1bb))/0x2)+-parseInt(_0x8886a1(0x1b7))/0x3+-parseInt(_0x8886a1(0x1c2))/0x4+-parseInt(_0x8886a1(0x1be))/0x5*(-parseInt(_0x8886a1(0x183))/0x6)+parseInt(_0x8886a1(0x15e))/0x7+-parseInt(_0x8886a1(0x1af))/0x8+parseInt(_0x8886a1(0x186))/0x9;if(_0x188907===_0x54349f)break;else _0x55dc9a['push'](_0x55dc9a['shift']());}catch(_0x22b69b){_0x55dc9a['push'](_0x55dc9a['shift']());}}}(a0_0x31cd,0xabc9a));const a0_0x3f3a2e=(function(){let _0x3142e6=!![];return function(_0x42ab94,_0x46f885){const _0x4c3084=_0x3142e6?function(){const _0x448be7=a0_0x5107;if(_0x46f885){const _0x3b1793=_0x46f885[_0x448be7(0x151)](_0x42ab94,arguments);return _0x46f885=null,_0x3b1793;}}:function(){};return _0x3142e6=![],_0x4c3084;};}()),a0_0x300ddc=a0_0x3f3a2e(this,function(){const _0x4bf5f0=a0_0x5107;return a0_0x300ddc['toString']()[_0x4bf5f0(0x140)](_0x4bf5f0(0x198))['toString']()['constructor'](a0_0x300ddc)[_0x4bf5f0(0x140)](_0x4bf5f0(0x198));});a0_0x300ddc();'use strict';const {GoogleGenerativeAI}=require(a0_0x6ba508(0x1a7)),setup=require('./setup'),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x6ba508(0x17a),LTM_DP_STATUS=a0_0x6ba508(0x1ab),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':a0_0x6ba508(0x18a),'family':a0_0x6ba508(0x1b2),'single_comfort':a0_0x6ba508(0x1a3),'security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x6ba508(0x1c1)};function a0_0x31cd(){const _0x56525c=['.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','targetId','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','1702340bHOOym','üåÖ\x20Briefing\x20generated\x20(Length:\x20','error','toLocaleTimeString','Gemini\x20Error:\x20','search','detected',',\x20Lichtverh√§ltnisse:\x20','stringify','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','isProVersion','length','LTM.driftAnalysis.driftDetails','activityLevel','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','Briefing\x20Error:\x20','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','send','generic','push','N/A\x20(Learning)','174316CqyqQB','apply','driftDetails','geminiModel','livingContext','Success','val','ü§ñ\x20Butler\x20Brain\x20Error:\x20','.Current.IsNight','KI\x20offline\x20(Fallback)','message','analysis.activitySummary','toFixed',',\x20Wetter:\x20','8605275NFYwwQ','aiPersona','üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','.\x20KONTEXT:\x20','analysis.lastResult','info','baselineDrift','Unbekannt',').\x20Sending\x20notification...','rawEventLog','trim','now','Skipped\x20(No\x20AI\x20or\x20Data)','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','toString','analysis.automation.patternDetected','exports','.forecast.current.temperature','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','weatherInstance','parse','.forecast.current.state','ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','automationProposal','üåÖ\x20Morning\x20Briefing:\x0a','replace','sendNotification','isAlert','LTM.dailyDigests','Nacht','Tag','Keine\x20Details.','reason','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','¬∞C,\x20','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','generateContent','177972fWvJLp','config','Traffic-Schutz\x20(Auto-Approved)','3926079jXIcxp','getForeignStateAsync','Wetterdaten\x20nicht\x20abrufbar','\x0aAktivit√§t:\x20','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','LTM.driftAnalysis.lastCheck','üìÖ\x20Daily\x20Digest:\x0a','analysis.alertReason','timestamp','debug','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','.\x20EVENTS:\x20','ANALYZE_HEALTH','ltmLtbWindowDays','slice','setForeignStateAsync','response','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','(((.+)+)+)+$','eventHistory','log','pop','targetValue','BUTLER\x20Execution\x20Error:\x20','\x20√ºbersprungen\x20(Auto-Approved).','.Current.WeatherText','.\x20EMERGENCY:\x20','alertReason','system.presenceWho','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','Digest','.\x20SYSTEM_MODE:\x20','analysis.automation.autoApply','@google/generative-ai','analysis.automation.description','dailyDigests','currentSystemMode','LTM.processingStatus','getStateAsync','unshift','\x20=\x20','4603560zwtQRi','LTM.driftAnalysis.baselineDrift','summary','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','KI-Fehler\x20(Fallback)','toISOString','Unbekannt\x20(Kein\x20Sensor)','warn','2063430KCTyIy','analysis.automation.targetId','text','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','8VPWuTs','analysis.isAlert','setStateAsync','5wLhpsE'];a0_0x31cd=function(){return _0x56525c;};return a0_0x31cd();}function canCallApi(){const _0x293616=Date['now']();return _0x293616-lastGlobalApiCall>MIN_API_GAP_MS;}function a0_0x5107(_0x1f8b0d,_0x2a4d73){const _0x4c4829=a0_0x31cd();return a0_0x5107=function(_0x300ddc,_0x3f3a2e){_0x300ddc=_0x300ddc-0x140;let _0x31cd3f=_0x4c4829[_0x300ddc];return _0x31cd3f;},a0_0x5107(_0x1f8b0d,_0x2a4d73);}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x5a4712){const _0x3e3e5a=a0_0x6ba508;if(!_0x5a4712[_0x3e3e5a(0x184)]['useWeather']||!_0x5a4712['config'][_0x3e3e5a(0x171)])return _0x3e3e5a(0x1b5);try{const _0x1ea3c9=_0x5a4712[_0x3e3e5a(0x184)][_0x3e3e5a(0x171)];let _0x52546d=await _0x5a4712['getForeignStateAsync'](_0x1ea3c9+'.Current.Temperature');if(!_0x52546d)_0x52546d=await _0x5a4712[_0x3e3e5a(0x187)](_0x1ea3c9+_0x3e3e5a(0x16f));let _0x2197c1=await _0x5a4712[_0x3e3e5a(0x187)](_0x1ea3c9+_0x3e3e5a(0x19f));if(!_0x2197c1)_0x2197c1=await _0x5a4712['getForeignStateAsync'](_0x1ea3c9+_0x3e3e5a(0x173));let _0x58453e=_0x3e3e5a(0x165);const _0x3b8bae=await _0x5a4712[_0x3e3e5a(0x187)](_0x1ea3c9+_0x3e3e5a(0x158));if(_0x3b8bae)_0x58453e=_0x3b8bae[_0x3e3e5a(0x156)]?_0x3e3e5a(0x17b):_0x3e3e5a(0x17c);if(_0x52546d&&_0x2197c1)return _0x52546d[_0x3e3e5a(0x156)]+_0x3e3e5a(0x180)+_0x2197c1['val']+_0x3e3e5a(0x142)+_0x58453e;}catch(_0x5d719e){}return _0x3e3e5a(0x188);}async function consultButler(_0x457206,_0x324cab,_0x51b0d9,_0x3185f3){const _0x2cd744=a0_0x6ba508;if(!_0x457206[_0x2cd744(0x153)])return{'approved':!![],'reason':_0x2cd744(0x159)};const _0x6c141d=Date['now']();if(decisionCache[_0x324cab]&&_0x6c141d-decisionCache[_0x324cab][_0x2cd744(0x18e)]<CACHE_TTL_MS){const _0x118852=decisionCache[_0x324cab]['decision'];return _0x457206[_0x2cd744(0x19a)]['debug']('ü§ñ\x20Butler\x20Cache\x20Hit:\x20'+_0x324cab+'\x20->\x20'+(_0x118852['approved']?'OK':'NO')+'\x20('+_0x118852[_0x2cd744(0x17e)]+')'),_0x118852;}if(!canCallApi())return _0x457206['log'][_0x2cd744(0x18f)](_0x2cd744(0x17f)+_0x324cab+_0x2cd744(0x19e)),{'approved':!![],'reason':_0x2cd744(0x185)};const _0x3c4e20=new Date()[_0x2cd744(0x1c5)](),_0x3f3298=await getWeatherContext(_0x457206),_0x5ec8a1=PERSONA_MAPPING[_0x457206['config'][_0x2cd744(0x15f)]||_0x2cd744(0x14d)],_0x58b809=_0x2cd744(0x14b)+_0x3c4e20+_0x2cd744(0x15d)+_0x3f3298+_0x2cd744(0x1ba)+(_0x3185f3*0x64)[_0x2cd744(0x15c)](0x0)+'%)\x20nach\x20\x22'+_0x324cab+_0x2cd744(0x181)+_0x51b0d9+_0x2cd744(0x190)+_0x5ec8a1+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x4244ae=await _0x457206[_0x2cd744(0x153)]['generateContent'](_0x58b809),_0x1774b6=_0x4244ae[_0x2cd744(0x196)][_0x2cd744(0x1b9)]()[_0x2cd744(0x177)](/```json|```/g,'')[_0x2cd744(0x168)](),_0x785dc7=JSON[_0x2cd744(0x172)](_0x1774b6);return decisionCache[_0x324cab]={'decision':_0x785dc7,'timestamp':_0x6c141d},_0x785dc7;}catch(_0x55a384){return _0x457206[_0x2cd744(0x19a)]['warn'](_0x2cd744(0x157)+_0x55a384[_0x2cd744(0x15a)]),decisionCache[_0x324cab]={'decision':{'approved':!![],'reason':_0x2cd744(0x1b3)},'timestamp':_0x6c141d-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0x50d16f,_0x27dcef=''){const _0x3433e7=a0_0x6ba508;if(!_0x50d16f[_0x3433e7(0x153)])return;if(!canCallApi()){_0x50d16f[_0x3433e7(0x19a)][_0x3433e7(0x18f)]('ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x50d16f[_0x3433e7(0x199)][_0x3433e7(0x146)]===0x0)return;const _0x204335=_0x50d16f['eventHistory'][_0x3433e7(0x194)](0x0,0xf),_0x1106e8=_0x50d16f['currentSystemMode'],_0x1f5a51=PERSONA_MAPPING[_0x50d16f['config'][_0x3433e7(0x15f)]||_0x3433e7(0x14d)],_0x304389=_0x50d16f['config'][_0x3433e7(0x154)]||_0x3433e7(0x17d);let _0x5e26e5=_0x3433e7(0x165);try{const _0x1d7f37=await _0x50d16f[_0x3433e7(0x1ac)](_0x3433e7(0x1a2));if(_0x1d7f37&&_0x1d7f37[_0x3433e7(0x156)])_0x5e26e5=_0x1d7f37[_0x3433e7(0x156)];}catch(_0x3d08d5){}let _0x333407=![];try{const _0x3314e3=await _0x50d16f[_0x3433e7(0x1ac)](_0x3433e7(0x1a6));if(_0x3314e3&&_0x3314e3[_0x3433e7(0x156)])_0x333407=!![];}catch(_0x4cccfe){}const _0x1b886f=_0x3433e7(0x16b)+_0x1f5a51+_0x3433e7(0x161)+_0x304389+_0x3433e7(0x1a5)+_0x1106e8+'.\x20ANWESEND:\x20'+_0x5e26e5+_0x3433e7(0x191)+JSON[_0x3433e7(0x143)](_0x204335)+_0x3433e7(0x1a0)+_0x27dcef+_0x3433e7(0x1bf);try{updateApiTimestamp();const _0x239ad2=await _0x50d16f[_0x3433e7(0x153)][_0x3433e7(0x182)](_0x1b886f),_0x1924e2=JSON[_0x3433e7(0x172)](_0x239ad2[_0x3433e7(0x196)]['text']()[_0x3433e7(0x177)](/```json|```/g,'')[_0x3433e7(0x168)]());await _0x50d16f['setStateAsync'](_0x3433e7(0x162),{'val':JSON[_0x3433e7(0x143)](_0x1924e2),'ack':!![]});if(_0x1924e2[_0x3433e7(0x1b1)])await _0x50d16f[_0x3433e7(0x1bd)](_0x3433e7(0x15b),{'val':_0x1924e2[_0x3433e7(0x1b1)],'ack':!![]});const _0xd624c6={'timestamp':Date['now'](),'id':Date[_0x3433e7(0x169)]()[_0x3433e7(0x16c)](),'analysis':{'activity':{'summary':_0x1924e2[_0x3433e7(0x1b1)],'isAlert':_0x1924e2[_0x3433e7(0x179)],'alertReason':_0x1924e2[_0x3433e7(0x1a1)]},'comfort':{'automationProposal':_0x1924e2['automationProposal']}}};_0x50d16f['analysisHistory'][_0x3433e7(0x1ad)](_0xd624c6);if(_0x50d16f['analysisHistory'][_0x3433e7(0x146)]>0x32)_0x50d16f['analysisHistory'][_0x3433e7(0x19b)]();await _0x50d16f[_0x3433e7(0x1bd)]('analysis.analysisHistory',{'val':JSON[_0x3433e7(0x143)](_0x50d16f['analysisHistory']),'ack':!![]});const _0xdfe3d3=_0x1924e2[_0x3433e7(0x179)]||![];_0xdfe3d3!==_0x50d16f['lastAlertState']&&(await _0x50d16f['setStateAsync'](_0x3433e7(0x1bc),{'val':_0xdfe3d3,'ack':!![]}),_0x50d16f['lastAlertState']=_0xdfe3d3,_0xdfe3d3&&(await _0x50d16f[_0x3433e7(0x1bd)](_0x3433e7(0x18d),{'val':_0x1924e2[_0x3433e7(0x1a1)],'ack':!![]}),setup['sendNotification'](_0x50d16f,'‚ö†Ô∏è\x20ALARM:\x20'+_0x1924e2['alertReason'],![],_0x1924e2['isEmergency'])));if(_0x1924e2[_0x3433e7(0x175)]&&_0x1924e2['automationProposal'][_0x3433e7(0x141)]){await _0x50d16f[_0x3433e7(0x1bd)](_0x3433e7(0x16d),{'val':!![],'ack':!![]}),await _0x50d16f[_0x3433e7(0x1bd)](_0x3433e7(0x1a8),{'val':_0x1924e2['automationProposal']['description'],'ack':!![]}),await _0x50d16f['setStateAsync'](_0x3433e7(0x1b8),{'val':_0x1924e2[_0x3433e7(0x175)][_0x3433e7(0x1c0)],'ack':!![]}),await _0x50d16f['setStateAsync']('analysis.automation.targetValue',{'val':JSON['stringify'](_0x1924e2[_0x3433e7(0x175)][_0x3433e7(0x19c)]),'ack':!![]});if(_0x333407)executeAutomationAction(_0x50d16f);}}catch(_0x270095){_0x50d16f[_0x3433e7(0x19a)]['error'](_0x3433e7(0x1c6)+_0x270095[_0x3433e7(0x15a)]);}}async function createDailyDigest(_0x4c196e,_0x57be7e){const _0x3d379c=a0_0x6ba508;if(!_0x4c196e[_0x3d379c(0x145)])return;if(!canCallApi()){await _0x4c196e[_0x3d379c(0x1bd)](LTM_DP_STATUS,{'val':'Skipped\x20(Traffic)','ack':!![]});return;}await _0x4c196e[_0x3d379c(0x1bd)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x4c196e[_0x3d379c(0x153)]||_0x4c196e[_0x3d379c(0x167)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4c196e['setStateAsync'](LTM_DP_STATUS,{'val':_0x3d379c(0x16a),'ack':!![]});return;}const _0x2e3ae1=JSON[_0x3d379c(0x172)](JSON[_0x3d379c(0x143)](_0x4c196e[_0x3d379c(0x167)])),_0x3e6e93=_0x2e3ae1[_0x3d379c(0x146)],_0xbf31cb=_0x3d379c(0x197)+JSON['stringify'](_0x2e3ae1);try{updateApiTimestamp();const _0x149460=await _0x4c196e['geminiModel'][_0x3d379c(0x182)](_0xbf31cb),_0x67eeb8=JSON[_0x3d379c(0x172)](_0x149460['response']['text']()[_0x3d379c(0x177)](/```json|```/g,'')[_0x3d379c(0x168)]()),_0x4ddffa={'timestamp':new Date()[_0x3d379c(0x1b4)](),'eventCount':_0x3e6e93,'summary':_0x67eeb8['summary']||_0x3d379c(0x1a4),'activityLevel':_0x67eeb8[_0x3d379c(0x148)]||'normal','systemMode':_0x4c196e[_0x3d379c(0x1aa)]};_0x4c196e[_0x3d379c(0x1a9)][_0x3d379c(0x14e)](_0x4ddffa);const _0x555b99=_0x4c196e[_0x3d379c(0x184)][_0x3d379c(0x193)]||0x3c;_0x4c196e[_0x3d379c(0x1a9)][_0x3d379c(0x146)]>_0x555b99&&_0x4c196e[_0x3d379c(0x1a9)]['splice'](0x0,_0x4c196e[_0x3d379c(0x1a9)][_0x3d379c(0x146)]-_0x555b99);await _0x4c196e[_0x3d379c(0x1bd)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x3d379c(0x143)](_0x4c196e[_0x3d379c(0x1a9)]),'ack':!![]}),_0x4c196e['rawEventLog']=[],await _0x4c196e[_0x3d379c(0x1bd)](LTM_DP_RAW_LOG,{'val':JSON[_0x3d379c(0x143)](_0x4c196e[_0x3d379c(0x167)]),'ack':!![]}),await _0x4c196e[_0x3d379c(0x1bd)](LTM_DP_STATUS,{'val':_0x3d379c(0x155),'ack':!![]});const _0x16fc40=_0x3d379c(0x18c)+_0x67eeb8['summary']+_0x3d379c(0x189)+_0x67eeb8['activityLevel'];setup['sendNotification'](_0x4c196e,_0x16fc40,![],![]);if(_0x4c196e[_0x3d379c(0x145)]&&_0x57be7e)_0x57be7e[_0x3d379c(0x14c)](_0x4c196e,_0x3d379c(0x192),{'digest':_0x4ddffa});}catch(_0x45c97b){_0x4c196e['log'][_0x3d379c(0x1c4)](_0x45c97b[_0x3d379c(0x15a)]);}}async function runBaselineDriftAnalysis(_0x581910){const _0x29e95a=a0_0x6ba508;if(!_0x581910[_0x29e95a(0x145)]||!_0x581910[_0x29e95a(0x153)])return;if(!canCallApi())return;const _0x481031=_0x581910[_0x29e95a(0x184)]['ltmStbWindowDays']||0xe;if(_0x581910[_0x29e95a(0x1a9)]['length']<_0x481031+0x7){await _0x581910[_0x29e95a(0x1bd)](_0x29e95a(0x1b0),{'val':_0x29e95a(0x14f),'ack':!![]});return;}const _0x2957a2=_0x581910[_0x29e95a(0x1a9)]['slice'](-_0x481031),_0x517014=_0x581910['dailyDigests'][_0x29e95a(0x194)](0x0,_0x581910[_0x29e95a(0x1a9)][_0x29e95a(0x146)]-_0x481031),_0x3a990c=_0x29e95a(0x170)+JSON['stringify'](_0x517014)+'\x0aSTB:\x20'+JSON['stringify'](_0x2957a2);try{updateApiTimestamp();const _0x53b329=await _0x581910[_0x29e95a(0x153)][_0x29e95a(0x182)](_0x3a990c),_0x5189b9=JSON['parse'](_0x53b329[_0x29e95a(0x196)][_0x29e95a(0x1b9)]()[_0x29e95a(0x177)](/```json|```/g,'')['trim']());_0x5189b9[_0x29e95a(0x164)]&&(await _0x581910[_0x29e95a(0x1bd)](_0x29e95a(0x1b0),{'val':_0x5189b9[_0x29e95a(0x164)],'ack':!![]}),await _0x581910['setStateAsync'](_0x29e95a(0x147),{'val':_0x5189b9[_0x29e95a(0x152)],'ack':!![]}),await _0x581910[_0x29e95a(0x1bd)](_0x29e95a(0x18b),{'val':Date[_0x29e95a(0x169)](),'ack':!![]}));}catch(_0x47be7e){}}async function executeAutomationAction(_0x3e41a4){const _0x57a1a4=a0_0x6ba508;try{const _0xb073fd=await _0x3e41a4['getStateAsync'](_0x57a1a4(0x1b8)),_0x57eba9=await _0x3e41a4[_0x57a1a4(0x1ac)]('analysis.automation.targetValue');if(_0xb073fd&&_0xb073fd['val']&&_0x57eba9){const _0x14a898=_0xb073fd[_0x57a1a4(0x156)];let _0x580bac=_0x57eba9['val'];try{_0x580bac=JSON[_0x57a1a4(0x172)](_0x580bac);}catch(_0x1aa8b0){}_0x3e41a4[_0x57a1a4(0x19a)][_0x57a1a4(0x163)](_0x57a1a4(0x144)+_0x14a898+_0x57a1a4(0x1ae)+_0x580bac),await _0x3e41a4[_0x57a1a4(0x195)](_0x14a898,_0x580bac);}else _0x3e41a4['log'][_0x57a1a4(0x1b6)](_0x57a1a4(0x149));}catch(_0x296965){_0x3e41a4[_0x57a1a4(0x19a)][_0x57a1a4(0x1c4)](_0x57a1a4(0x19d)+_0x296965[_0x57a1a4(0x15a)]);}}async function sendMorningBriefing(_0x5a9878){const _0x1c7c00=a0_0x6ba508;if(!_0x5a9878[_0x1c7c00(0x153)]){_0x5a9878[_0x1c7c00(0x19a)][_0x1c7c00(0x1b6)](_0x1c7c00(0x174));return;}_0x5a9878[_0x1c7c00(0x19a)]['info'](_0x1c7c00(0x160));try{updateApiTimestamp();const _0x45286d='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x4fb8e8=await _0x5a9878[_0x1c7c00(0x153)][_0x1c7c00(0x182)](_0x45286d),_0x526814=_0x4fb8e8[_0x1c7c00(0x196)][_0x1c7c00(0x1b9)]();_0x5a9878[_0x1c7c00(0x19a)][_0x1c7c00(0x163)](_0x1c7c00(0x1c3)+_0x526814['length']+_0x1c7c00(0x166)),setup[_0x1c7c00(0x178)](_0x5a9878,_0x1c7c00(0x176)+_0x526814);}catch(_0x4f568e){_0x5a9878[_0x1c7c00(0x19a)][_0x1c7c00(0x1c4)](_0x1c7c00(0x14a)+_0x4f568e['message']);}}module[a0_0x6ba508(0x16e)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};