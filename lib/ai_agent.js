const a0_0x295703=a0_0x5c42;function a0_0x11df(){const _0x5dcf48=['isAlert','analysis.alertReason','Tag','Started...','normal','search','473DyWsBt','analysis.isAlert','Nacht','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','\x20->\x20','exports','922488dMWVow','toLocaleTimeString','BUTLER\x20Execution\x20Error:\x20','eventHistory','KI\x20offline\x20(Fallback)',',\x20Wetter:\x20','constructor','analysis.automation.autoApply','LTM.driftAnalysis.driftDetails','stringify','Briefing\x20Error:\x20','KI-Fehler\x20(Fallback)','log','LTM.processingStatus','toISOString','ltmStbWindowDays','parse','aiPersona','Unbekannt','warn','getStateAsync','Skipped\x20(No\x20AI\x20or\x20Data)',',\x20Lichtverh√§ltnisse:\x20','¬∞C,\x20','Digest','\x20√ºbersprungen\x20(Auto-Approved).','targetValue','Gemini\x20Error:\x20','.Current.WeatherText','Unbekannt\x20(Kein\x20Sensor)','625098SqkoWv','isProVersion','analysis.automation.description','rawEventLog','4qoYyJS','./setup','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','%)\x20nach\x20\x22','message','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','targetId','unshift','activityLevel','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','trim','sendNotification','setForeignStateAsync','LTM.driftAnalysis.baselineDrift','now','LTM.dailyDigests','.\x20SYSTEM_MODE:\x20','send','getForeignStateAsync','info','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','.Current.IsNight','isEmergency','analysisHistory','Keine\x20Details.','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','346330OvKnuz','.forecast.current.state','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','decision','Success','timestamp','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','automationProposal','N/A\x20(Learning)','.Current.Temperature','16JaGMvo','LTM.rawEventLog','detected','\x20=\x20','length','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','.\x20EVENTS:\x20','debug','197140XJcBgs','generic','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','livingContext','analysis.analysisHistory','üåÖ\x20Morning\x20Briefing:\x0a','models/gemini-flash-latest','Skipped\x20(Traffic)','analysis.automation.targetValue','generateContent','baselineDrift','val','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','replace','setStateAsync','\x0aAktivit√§t:\x20','currentSystemMode','text','reason','1251954VzCLBS','lastAlertState','push','description','.\x20EMERGENCY:\x20','5663294arEEfw','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','analysis.automation.targetId','alertReason','@google/generative-ai','weatherInstance','error','geminiModel','splice','127994dJDgoT','ANALYZE_HEALTH','ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','60Alincd','LTM.driftAnalysis.lastCheck','.forecast.current.temperature','(((.+)+)+)+$','dailyDigests','config','useWeather','summary','üìÖ\x20Daily\x20Digest:\x0a','apply','slice','response'];a0_0x11df=function(){return _0x5dcf48;};return a0_0x11df();}(function(_0x311183,_0xf1149){const _0x322cb1=a0_0x5c42,_0x494d6c=_0x311183();while(!![]){try{const _0x379423=-parseInt(_0x322cb1(0x15e))/0x1*(parseInt(_0x322cb1(0x121))/0x2)+parseInt(_0x322cb1(0x15a))/0x3+-parseInt(_0x322cb1(0x13c))/0x4+-parseInt(_0x322cb1(0xee))/0x5*(parseInt(_0x322cb1(0x124))/0x6)+parseInt(_0x322cb1(0x118))/0x7+parseInt(_0x322cb1(0xf8))/0x8*(-parseInt(_0x322cb1(0x113))/0x9)+parseInt(_0x322cb1(0x100))/0xa*(parseInt(_0x322cb1(0x136))/0xb);if(_0x379423===_0xf1149)break;else _0x494d6c['push'](_0x494d6c['shift']());}catch(_0xe1d010){_0x494d6c['push'](_0x494d6c['shift']());}}}(a0_0x11df,0x6384c));const a0_0x4fd6c1=(function(){let _0x5836db=!![];return function(_0x143ba9,_0x2850d5){const _0x12995f=_0x5836db?function(){const _0x303ec4=a0_0x5c42;if(_0x2850d5){const _0x27a47e=_0x2850d5[_0x303ec4(0x12d)](_0x143ba9,arguments);return _0x2850d5=null,_0x27a47e;}}:function(){};return _0x5836db=![],_0x12995f;};}()),a0_0x9d78df=a0_0x4fd6c1(this,function(){const _0x3a207d=a0_0x5c42;return a0_0x9d78df['toString']()[_0x3a207d(0x135)](_0x3a207d(0x127))['toString']()[_0x3a207d(0x142)](a0_0x9d78df)[_0x3a207d(0x135)]('(((.+)+)+)+$');});a0_0x9d78df();'use strict';const {GoogleGenerativeAI}=require(a0_0x295703(0x11c)),setup=require(a0_0x295703(0x15f)),GEMINI_MODEL=a0_0x295703(0x106),LTM_DP_DAILY_DIGESTS=a0_0x295703(0x16f),LTM_DP_STATUS=a0_0x295703(0x149),LTM_DP_RAW_LOG=a0_0x295703(0xf9),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x295703(0x165),'senior_aal':a0_0x295703(0x169),'family':a0_0x295703(0x10c),'single_comfort':a0_0x295703(0xe8),'security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x295703(0x164)};function canCallApi(){const _0x21ff74=a0_0x295703,_0x41ad60=Date[_0x21ff74(0x16e)]();return _0x41ad60-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x31f28f=a0_0x295703;lastGlobalApiCall=Date[_0x31f28f(0x16e)]();}async function getWeatherContext(_0x456eac){const _0x494fc8=a0_0x295703;if(!_0x456eac[_0x494fc8(0x129)][_0x494fc8(0x12a)]||!_0x456eac[_0x494fc8(0x129)][_0x494fc8(0x11d)])return _0x494fc8(0x159);try{const _0x2d00e4=_0x456eac[_0x494fc8(0x129)][_0x494fc8(0x11d)];let _0x6e7b6b=await _0x456eac[_0x494fc8(0x172)](_0x2d00e4+_0x494fc8(0xf7));if(!_0x6e7b6b)_0x6e7b6b=await _0x456eac[_0x494fc8(0x172)](_0x2d00e4+_0x494fc8(0x126));let _0x569462=await _0x456eac[_0x494fc8(0x172)](_0x2d00e4+_0x494fc8(0x158));if(!_0x569462)_0x569462=await _0x456eac[_0x494fc8(0x172)](_0x2d00e4+_0x494fc8(0xef));let _0x125784=_0x494fc8(0x14e);const _0x145cd5=await _0x456eac[_0x494fc8(0x172)](_0x2d00e4+_0x494fc8(0xe9));if(_0x145cd5)_0x125784=_0x145cd5[_0x494fc8(0x10b)]?_0x494fc8(0x138):_0x494fc8(0x132);if(_0x6e7b6b&&_0x569462)return _0x6e7b6b[_0x494fc8(0x10b)]+_0x494fc8(0x153)+_0x569462[_0x494fc8(0x10b)]+_0x494fc8(0x152)+_0x125784;}catch(_0x4b6cfa){}return'Wetterdaten\x20nicht\x20abrufbar';}async function consultButler(_0x2824a2,_0x48997d,_0x2cc90a,_0x1ae152){const _0x2118d8=a0_0x295703;if(!_0x2824a2[_0x2118d8(0x11f)])return{'approved':!![],'reason':_0x2118d8(0x140)};const _0x4301bc=Date[_0x2118d8(0x16e)]();if(decisionCache[_0x48997d]&&_0x4301bc-decisionCache[_0x48997d][_0x2118d8(0xf3)]<CACHE_TTL_MS){const _0x36407f=decisionCache[_0x48997d][_0x2118d8(0xf1)];return _0x2824a2[_0x2118d8(0x148)]['debug']('ü§ñ\x20Butler\x20Cache\x20Hit:\x20'+_0x48997d+_0x2118d8(0x13a)+(_0x36407f['approved']?'OK':'NO')+'\x20('+_0x36407f[_0x2118d8(0x112)]+')'),_0x36407f;}if(!canCallApi())return _0x2824a2['log'][_0x2118d8(0xff)](_0x2118d8(0x119)+_0x48997d+_0x2118d8(0x155)),{'approved':!![],'reason':'Traffic-Schutz\x20(Auto-Approved)'};const _0x13203e=new Date()[_0x2118d8(0x13d)](),_0x3f7594=await getWeatherContext(_0x2824a2),_0x3440e9=PERSONA_MAPPING[_0x2824a2['config'][_0x2118d8(0x14d)]||_0x2118d8(0x101)],_0x37678a=_0x2118d8(0x139)+_0x13203e+_0x2118d8(0x141)+_0x3f7594+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x1ae152*0x64)['toFixed'](0x0)+_0x2118d8(0x162)+_0x48997d+_0x2118d8(0x161)+_0x2cc90a+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x3440e9+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x4d9316=await _0x2824a2['geminiModel'][_0x2118d8(0x109)](_0x37678a),_0xaf20a5=_0x4d9316[_0x2118d8(0x12f)]['text']()[_0x2118d8(0x10d)](/```json|```/g,'')['trim'](),_0xe5f2a8=JSON[_0x2118d8(0x14c)](_0xaf20a5);return decisionCache[_0x48997d]={'decision':_0xe5f2a8,'timestamp':_0x4301bc},_0xe5f2a8;}catch(_0x30aeeb){return _0x2824a2[_0x2118d8(0x148)][_0x2118d8(0x14f)]('ü§ñ\x20Butler\x20Brain\x20Error:\x20'+_0x30aeeb[_0x2118d8(0x163)]),decisionCache[_0x48997d]={'decision':{'approved':!![],'reason':_0x2118d8(0x147)},'timestamp':_0x4301bc-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x2118d8(0x147)};}}async function runGeminiAnalysis(_0x24afb6,_0x572653=''){const _0x476083=a0_0x295703;if(!_0x24afb6[_0x476083(0x11f)])return;if(!canCallApi()){_0x24afb6[_0x476083(0x148)]['debug']('ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).');return;}if(_0x24afb6['eventHistory']['length']===0x0)return;const _0x3f1b96=_0x24afb6[_0x476083(0x13f)][_0x476083(0x12e)](0x0,0xf),_0x2f3a80=_0x24afb6[_0x476083(0x110)],_0x3e8a5a=PERSONA_MAPPING[_0x24afb6[_0x476083(0x129)][_0x476083(0x14d)]||_0x476083(0x101)],_0x46ec6c=_0x24afb6['config'][_0x476083(0x103)]||_0x476083(0xec);let _0x278685=_0x476083(0x14e);try{const _0x5e68d7=await _0x24afb6['getStateAsync']('system.presenceWho');if(_0x5e68d7&&_0x5e68d7[_0x476083(0x10b)])_0x278685=_0x5e68d7['val'];}catch(_0x14cbdc){}let _0x3902bd=![];try{const _0xc8a0d0=await _0x24afb6[_0x476083(0x150)](_0x476083(0x143));if(_0xc8a0d0&&_0xc8a0d0['val'])_0x3902bd=!![];}catch(_0x1d49e4){}const _0x4915d6=_0x476083(0xf4)+_0x3e8a5a+'.\x20KONTEXT:\x20'+_0x46ec6c+_0x476083(0x170)+_0x2f3a80+'.\x20ANWESEND:\x20'+_0x278685+_0x476083(0xfe)+JSON[_0x476083(0x145)](_0x3f1b96)+_0x476083(0x117)+_0x572653+_0x476083(0x160);try{updateApiTimestamp();const _0x2e67bf=await _0x24afb6[_0x476083(0x11f)]['generateContent'](_0x4915d6),_0xaa4ced=JSON['parse'](_0x2e67bf[_0x476083(0x12f)][_0x476083(0x111)]()[_0x476083(0x10d)](/```json|```/g,'')[_0x476083(0x16a)]());await _0x24afb6[_0x476083(0x10e)]('analysis.lastResult',{'val':JSON[_0x476083(0x145)](_0xaa4ced),'ack':!![]});if(_0xaa4ced[_0x476083(0x12b)])await _0x24afb6[_0x476083(0x10e)]('analysis.activitySummary',{'val':_0xaa4ced['summary'],'ack':!![]});const _0x3fdcb1={'timestamp':Date[_0x476083(0x16e)](),'id':Date['now']()['toString'](),'analysis':{'activity':{'summary':_0xaa4ced['summary'],'isAlert':_0xaa4ced[_0x476083(0x130)],'alertReason':_0xaa4ced[_0x476083(0x11b)]},'comfort':{'automationProposal':_0xaa4ced[_0x476083(0xf5)]}}};_0x24afb6[_0x476083(0xeb)][_0x476083(0x167)](_0x3fdcb1);if(_0x24afb6[_0x476083(0xeb)]['length']>0x32)_0x24afb6['analysisHistory']['pop']();await _0x24afb6['setStateAsync'](_0x476083(0x104),{'val':JSON['stringify'](_0x24afb6[_0x476083(0xeb)]),'ack':!![]});const _0x4674e1=_0xaa4ced['isAlert']||![];_0x4674e1!==_0x24afb6[_0x476083(0x114)]&&(await _0x24afb6[_0x476083(0x10e)](_0x476083(0x137),{'val':_0x4674e1,'ack':!![]}),_0x24afb6[_0x476083(0x114)]=_0x4674e1,_0x4674e1&&(await _0x24afb6[_0x476083(0x10e)](_0x476083(0x131),{'val':_0xaa4ced['alertReason'],'ack':!![]}),setup['sendNotification'](_0x24afb6,'‚ö†Ô∏è\x20ALARM:\x20'+_0xaa4ced[_0x476083(0x11b)],![],_0xaa4ced[_0x476083(0xea)])));if(_0xaa4ced[_0x476083(0xf5)]&&_0xaa4ced['automationProposal'][_0x476083(0xfa)]){await _0x24afb6[_0x476083(0x10e)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x24afb6[_0x476083(0x10e)](_0x476083(0x15c),{'val':_0xaa4ced[_0x476083(0xf5)][_0x476083(0x116)],'ack':!![]}),await _0x24afb6[_0x476083(0x10e)](_0x476083(0x11a),{'val':_0xaa4ced[_0x476083(0xf5)][_0x476083(0x166)],'ack':!![]}),await _0x24afb6[_0x476083(0x10e)](_0x476083(0x108),{'val':JSON[_0x476083(0x145)](_0xaa4ced[_0x476083(0xf5)][_0x476083(0x156)]),'ack':!![]});if(_0x3902bd)executeAutomationAction(_0x24afb6);}}catch(_0x4ac131){_0x24afb6[_0x476083(0x148)][_0x476083(0x11e)](_0x476083(0x157)+_0x4ac131[_0x476083(0x163)]);}}async function createDailyDigest(_0x4cdf36,_0x1dff46){const _0x2888c8=a0_0x295703;if(!_0x4cdf36[_0x2888c8(0x15b)])return;if(!canCallApi()){await _0x4cdf36[_0x2888c8(0x10e)](LTM_DP_STATUS,{'val':_0x2888c8(0x107),'ack':!![]});return;}await _0x4cdf36['setStateAsync'](LTM_DP_STATUS,{'val':_0x2888c8(0x133),'ack':!![]});if(!_0x4cdf36[_0x2888c8(0x11f)]||_0x4cdf36[_0x2888c8(0x15d)][_0x2888c8(0xfc)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4cdf36[_0x2888c8(0x10e)](LTM_DP_STATUS,{'val':_0x2888c8(0x151),'ack':!![]});return;}const _0x14ab5a=JSON[_0x2888c8(0x14c)](JSON['stringify'](_0x4cdf36['rawEventLog'])),_0x208afd=_0x14ab5a[_0x2888c8(0xfc)],_0x93af1a=_0x2888c8(0xfd)+JSON[_0x2888c8(0x145)](_0x14ab5a);try{updateApiTimestamp();const _0x89b70=await _0x4cdf36[_0x2888c8(0x11f)][_0x2888c8(0x109)](_0x93af1a),_0x14667c=JSON[_0x2888c8(0x14c)](_0x89b70[_0x2888c8(0x12f)]['text']()[_0x2888c8(0x10d)](/```json|```/g,'')[_0x2888c8(0x16a)]()),_0x32d70a={'timestamp':new Date()[_0x2888c8(0x14a)](),'eventCount':_0x208afd,'summary':_0x14667c['summary']||_0x2888c8(0x154),'activityLevel':_0x14667c[_0x2888c8(0x168)]||_0x2888c8(0x134),'systemMode':_0x4cdf36[_0x2888c8(0x110)]};_0x4cdf36[_0x2888c8(0x128)][_0x2888c8(0x115)](_0x32d70a);const _0x1f2cb6=_0x4cdf36[_0x2888c8(0x129)]['ltmLtbWindowDays']||0x3c;_0x4cdf36[_0x2888c8(0x128)][_0x2888c8(0xfc)]>_0x1f2cb6&&_0x4cdf36['dailyDigests'][_0x2888c8(0x120)](0x0,_0x4cdf36[_0x2888c8(0x128)]['length']-_0x1f2cb6);await _0x4cdf36[_0x2888c8(0x10e)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x4cdf36['dailyDigests']),'ack':!![]}),_0x4cdf36[_0x2888c8(0x15d)]=[],await _0x4cdf36[_0x2888c8(0x10e)](LTM_DP_RAW_LOG,{'val':JSON[_0x2888c8(0x145)](_0x4cdf36[_0x2888c8(0x15d)]),'ack':!![]}),await _0x4cdf36['setStateAsync'](LTM_DP_STATUS,{'val':_0x2888c8(0xf2),'ack':!![]});const _0x4a1c2a=_0x2888c8(0x12c)+_0x14667c['summary']+_0x2888c8(0x10f)+_0x14667c['activityLevel'];setup[_0x2888c8(0x16b)](_0x4cdf36,_0x4a1c2a,![],![]);if(_0x4cdf36['isProVersion']&&_0x1dff46)_0x1dff46[_0x2888c8(0x171)](_0x4cdf36,_0x2888c8(0x122),{'digest':_0x32d70a});}catch(_0x80c942){_0x4cdf36['log'][_0x2888c8(0x11e)](_0x80c942[_0x2888c8(0x163)]);}}async function runBaselineDriftAnalysis(_0x3a4102){const _0x2c4890=a0_0x295703;if(!_0x3a4102['isProVersion']||!_0x3a4102['geminiModel'])return;if(!canCallApi())return;const _0x4d8c16=_0x3a4102[_0x2c4890(0x129)][_0x2c4890(0x14b)]||0xe;if(_0x3a4102[_0x2c4890(0x128)]['length']<_0x4d8c16+0x7){await _0x3a4102[_0x2c4890(0x10e)]('LTM.driftAnalysis.baselineDrift',{'val':_0x2c4890(0xf6),'ack':!![]});return;}const _0x5b9016=_0x3a4102['dailyDigests'][_0x2c4890(0x12e)](-_0x4d8c16),_0x2b7ae1=_0x3a4102[_0x2c4890(0x128)][_0x2c4890(0x12e)](0x0,_0x3a4102[_0x2c4890(0x128)][_0x2c4890(0xfc)]-_0x4d8c16),_0x309aab='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x2c4890(0x145)](_0x2b7ae1)+'\x0aSTB:\x20'+JSON[_0x2c4890(0x145)](_0x5b9016);try{updateApiTimestamp();const _0x10cd0a=await _0x3a4102[_0x2c4890(0x11f)][_0x2c4890(0x109)](_0x309aab),_0x5b5f58=JSON[_0x2c4890(0x14c)](_0x10cd0a[_0x2c4890(0x12f)][_0x2c4890(0x111)]()[_0x2c4890(0x10d)](/```json|```/g,'')[_0x2c4890(0x16a)]());_0x5b5f58[_0x2c4890(0x10a)]&&(await _0x3a4102[_0x2c4890(0x10e)](_0x2c4890(0x16d),{'val':_0x5b5f58[_0x2c4890(0x10a)],'ack':!![]}),await _0x3a4102[_0x2c4890(0x10e)](_0x2c4890(0x144),{'val':_0x5b5f58['driftDetails'],'ack':!![]}),await _0x3a4102[_0x2c4890(0x10e)](_0x2c4890(0x125),{'val':Date[_0x2c4890(0x16e)](),'ack':!![]}));}catch(_0x7d673c){}}async function executeAutomationAction(_0x591e8e){const _0x289164=a0_0x295703;try{const _0x2ad40a=await _0x591e8e[_0x289164(0x150)](_0x289164(0x11a)),_0x55007f=await _0x591e8e['getStateAsync'](_0x289164(0x108));if(_0x2ad40a&&_0x2ad40a[_0x289164(0x10b)]&&_0x55007f){const _0x488853=_0x2ad40a['val'];let _0x124c0a=_0x55007f[_0x289164(0x10b)];try{_0x124c0a=JSON[_0x289164(0x14c)](_0x124c0a);}catch(_0x561b43){}_0x591e8e[_0x289164(0x148)][_0x289164(0x173)](_0x289164(0x102)+_0x488853+_0x289164(0xfb)+_0x124c0a),await _0x591e8e[_0x289164(0x16c)](_0x488853,_0x124c0a);}else _0x591e8e['log'][_0x289164(0x14f)](_0x289164(0xf0));}catch(_0x347928){_0x591e8e[_0x289164(0x148)][_0x289164(0x11e)](_0x289164(0x13e)+_0x347928[_0x289164(0x163)]);}}async function sendMorningBriefing(_0x2131dd){const _0x5884d6=a0_0x295703;if(!_0x2131dd['geminiModel']){_0x2131dd[_0x5884d6(0x148)][_0x5884d6(0x14f)](_0x5884d6(0x123));return;}_0x2131dd[_0x5884d6(0x148)][_0x5884d6(0x173)]('üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...');try{updateApiTimestamp();const _0x3799b7=_0x5884d6(0xed),_0x9ac461=await _0x2131dd[_0x5884d6(0x11f)][_0x5884d6(0x109)](_0x3799b7),_0x5221be=_0x9ac461['response']['text']();_0x2131dd[_0x5884d6(0x148)][_0x5884d6(0x173)]('üåÖ\x20Briefing\x20generated\x20(Length:\x20'+_0x5221be['length']+').\x20Sending\x20notification...'),setup[_0x5884d6(0x16b)](_0x2131dd,_0x5884d6(0x105)+_0x5221be);}catch(_0x230890){_0x2131dd[_0x5884d6(0x148)]['error'](_0x5884d6(0x146)+_0x230890[_0x5884d6(0x163)]);}}function a0_0x5c42(_0x3bb8c3,_0xa18f4e){const _0x1645c1=a0_0x11df();return a0_0x5c42=function(_0x9d78df,_0x4fd6c1){_0x9d78df=_0x9d78df-0xe8;let _0x11dfb5=_0x1645c1[_0x9d78df];return _0x11dfb5;},a0_0x5c42(_0x3bb8c3,_0xa18f4e);}module[a0_0x295703(0x13b)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};