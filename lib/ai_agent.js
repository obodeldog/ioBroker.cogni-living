const a0_0x29297e=a0_0x2358;(function(_0x31e59d,_0x39db5f){const _0x374b56=a0_0x2358,_0x5d628f=_0x31e59d();while(!![]){try{const _0x3c2743=-parseInt(_0x374b56(0xad))/0x1+parseInt(_0x374b56(0xd0))/0x2*(-parseInt(_0x374b56(0x10b))/0x3)+-parseInt(_0x374b56(0x10a))/0x4+parseInt(_0x374b56(0xbc))/0x5*(parseInt(_0x374b56(0x106))/0x6)+-parseInt(_0x374b56(0xe1))/0x7+parseInt(_0x374b56(0xd7))/0x8+parseInt(_0x374b56(0xcb))/0x9;if(_0x3c2743===_0x39db5f)break;else _0x5d628f['push'](_0x5d628f['shift']());}catch(_0x59929c){_0x5d628f['push'](_0x5d628f['shift']());}}}(a0_0x5ee7,0xe26eb));const a0_0x3be11d=(function(){let _0x4d048d=!![];return function(_0x68ecaa,_0x4c315c){const _0x187a12=_0x4d048d?function(){const _0x5b7fec=a0_0x2358;if(_0x4c315c){const _0x56bbf6=_0x4c315c[_0x5b7fec(0xe2)](_0x68ecaa,arguments);return _0x4c315c=null,_0x56bbf6;}}:function(){};return _0x4d048d=![],_0x187a12;};}()),a0_0x4452de=a0_0x3be11d(this,function(){const _0x11db50=a0_0x2358;return a0_0x4452de['toString']()[_0x11db50(0xe7)](_0x11db50(0x9a))[_0x11db50(0x98)]()[_0x11db50(0xb9)](a0_0x4452de)[_0x11db50(0xe7)](_0x11db50(0x9a));});a0_0x4452de();'use strict';const {GoogleGenerativeAI}=require(a0_0x29297e(0xf9)),setup=require('./setup'),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x29297e(0xbf),LTM_DP_RAW_LOG=a0_0x29297e(0xb1),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;function a0_0x5ee7(){const _0x175648=['ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','warn','weatherInstance','1177603LcrwSO','useWeather',',\x20Wetter:\x20','analysis.analysisHistory','LTM.rawEventLog','config','response','analysis.lastResult','rawEventLog','log','summary','message','constructor','.\x20SYSTEM_MODE:\x20','stringify','15josnEc','KI-Fehler\x20(Fallback)','push','LTM.processingStatus','eventHistory','automationProposal','BUTLER\x20Execution\x20Error:\x20','ðŸ¤–\x20Butler\x20Brain\x20Error:\x20','Keine\x20Details.','LTM.driftAnalysis.baselineDrift','\x0aSTB:\x20','exports','targetValue','error','ltmLtbWindowDays','36412812uQSKrf','analysis.automation.autoApply','ðŸŒ…\x20Morning\x20Briefing:\x0a','.\x20EVENTS:\x20','sendNotification','4846XAGSAN','\x20=\x20','ðŸ“…\x20Daily\x20Digest:\x0a','val','livingContext','ðŸ¤–\x20Traffic\x20Schutz:\x20Anfrage\x20fÃ¼r\x20','debug','10737960pgVWxt','geminiModel','\x20Ã¼bersprungen\x20(Auto-Approved).','splice','analysis.automation.targetId','analysis.automation.targetValue','dailyDigests','toISOString',',\x20LichtverhÃ¤ltnisse:\x20','Traffic-Schutz\x20(Auto-Approved)','11089463mCVPpD','apply','Skipped\x20(No\x20AI\x20or\x20Data)','analysis.alertReason','normal','Started...','search','analysis.automation.description','Fokus\x20auf\x20Komfort\x20fÃ¼r\x20die\x20Familie.','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','Unbekannt','Wetterdaten\x20nicht\x20abrufbar','.Current.Temperature','ltmStbWindowDays','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','Nacht','ðŸ¤–\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','Gemini\x20Error:\x20','activityLevel','isProVersion','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','baselineDrift','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','toLocaleTimeString','@google/generative-ai','detected','driftDetails','text','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','Â°C,\x20','PRIORITÃ„T:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','ANALYZE_HEALTH','analysisHistory','N/A\x20(Learning)','Digest','Skipped\x20(Traffic)','287682LqQIhL','isAlert','âš ï¸\x20ALARM:\x20','aiPersona','5190000VNKgEH','675sVhabf','now','analysis.activitySummary','setStateAsync','targetId','\x0aAktivitÃ¤t:\x20','generateContent','.forecast.current.temperature','timestamp','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','.\x20EMERGENCY:\x20','lastAlertState','Tag','Unbekannt\x20(Kein\x20Sensor)','.forecast.current.state','parse','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20fÃ¼r\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','toString','currentSystemMode','(((.+)+)+)+$','info','getForeignStateAsync','slice','getStateAsync','length','ðŸ¤–\x20Butler\x20Cache\x20Hit:\x20','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','alertReason','Success','trim','approved','setForeignStateAsync','replace','%)\x20nach\x20\x22','generic'];a0_0x5ee7=function(){return _0x175648;};return a0_0x5ee7();}let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x29297e(0xf5),'senior_aal':'PRIORITÃ„T:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':a0_0x29297e(0xe9),'single_comfort':a0_0x29297e(0x100),'security':'Sicherheit\x20geht\x20vor.','energy_saver':a0_0x29297e(0xff)};function canCallApi(){const _0x1447a4=Date['now']();return _0x1447a4-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x234ede=a0_0x29297e;lastGlobalApiCall=Date[_0x234ede(0x10c)]();}async function getWeatherContext(_0x31368a){const _0x3e5cd2=a0_0x29297e;if(!_0x31368a[_0x3e5cd2(0xb2)][_0x3e5cd2(0xae)]||!_0x31368a[_0x3e5cd2(0xb2)]['weatherInstance'])return _0x3e5cd2(0x94);try{const _0x2b1e91=_0x31368a['config'][_0x3e5cd2(0xac)];let _0x263ebb=await _0x31368a['getForeignStateAsync'](_0x2b1e91+_0x3e5cd2(0xed));if(!_0x263ebb)_0x263ebb=await _0x31368a[_0x3e5cd2(0x9c)](_0x2b1e91+_0x3e5cd2(0x112));let _0x4ad74d=await _0x31368a['getForeignStateAsync'](_0x2b1e91+'.Current.WeatherText');if(!_0x4ad74d)_0x4ad74d=await _0x31368a[_0x3e5cd2(0x9c)](_0x2b1e91+_0x3e5cd2(0x95));let _0x3ab31c=_0x3e5cd2(0xeb);const _0x21f6e9=await _0x31368a['getForeignStateAsync'](_0x2b1e91+'.Current.IsNight');if(_0x21f6e9)_0x3ab31c=_0x21f6e9[_0x3e5cd2(0xd3)]?_0x3e5cd2(0xf0):_0x3e5cd2(0x93);if(_0x263ebb&&_0x4ad74d)return _0x263ebb['val']+_0x3e5cd2(0xfe)+_0x4ad74d['val']+_0x3e5cd2(0xdf)+_0x3ab31c;}catch(_0x121995){}return _0x3e5cd2(0xec);}function a0_0x2358(_0x3b6b87,_0x28c6a5){const _0x5a122b=a0_0x5ee7();return a0_0x2358=function(_0x4452de,_0x3be11d){_0x4452de=_0x4452de-0x93;let _0x5ee7e9=_0x5a122b[_0x4452de];return _0x5ee7e9;},a0_0x2358(_0x3b6b87,_0x28c6a5);}async function consultButler(_0x118e8c,_0x599530,_0x616de2,_0x1ea482){const _0x5320c7=a0_0x29297e;if(!_0x118e8c['geminiModel'])return{'approved':!![],'reason':'KI\x20offline\x20(Fallback)'};const _0x365c7a=Date['now']();if(decisionCache[_0x599530]&&_0x365c7a-decisionCache[_0x599530][_0x5320c7(0x113)]<CACHE_TTL_MS){const _0x16477d=decisionCache[_0x599530]['decision'];return _0x118e8c[_0x5320c7(0xb6)]['debug'](_0x5320c7(0xa0)+_0x599530+'\x20->\x20'+(_0x16477d[_0x5320c7(0xa5)]?'OK':'NO')+'\x20('+_0x16477d['reason']+')'),_0x16477d;}if(!canCallApi())return _0x118e8c[_0x5320c7(0xb6)]['debug'](_0x5320c7(0xd5)+_0x599530+_0x5320c7(0xd9)),{'approved':!![],'reason':_0x5320c7(0xe0)};const _0x5fdf37=new Date()[_0x5320c7(0xf8)](),_0x2f9028=await getWeatherContext(_0x118e8c),_0x4e261a=PERSONA_MAPPING[_0x118e8c[_0x5320c7(0xb2)][_0x5320c7(0x109)]||_0x5320c7(0xa9)],_0xe5dc57='\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20'+_0x5fdf37+_0x5320c7(0xaf)+_0x2f9028+_0x5320c7(0xa1)+(_0x1ea482*0x64)['toFixed'](0x0)+_0x5320c7(0xa8)+_0x599530+'\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22'+_0x616de2+_0x5320c7(0xea)+_0x4e261a+_0x5320c7(0x97);try{updateApiTimestamp();const _0x4e842b=await _0x118e8c[_0x5320c7(0xd8)][_0x5320c7(0x111)](_0xe5dc57),_0x352999=_0x4e842b[_0x5320c7(0xb3)][_0x5320c7(0xfc)]()[_0x5320c7(0xa7)](/```json|```/g,'')[_0x5320c7(0xa4)](),_0x44db0a=JSON[_0x5320c7(0x96)](_0x352999);return decisionCache[_0x599530]={'decision':_0x44db0a,'timestamp':_0x365c7a},_0x44db0a;}catch(_0x1440db){return _0x118e8c[_0x5320c7(0xb6)][_0x5320c7(0xab)](_0x5320c7(0xc3)+_0x1440db[_0x5320c7(0xb8)]),decisionCache[_0x599530]={'decision':{'approved':!![],'reason':_0x5320c7(0xbd)},'timestamp':_0x365c7a-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x5320c7(0xbd)};}}async function runGeminiAnalysis(_0x5977ac,_0x245121=''){const _0xd074f4=a0_0x29297e;if(!_0x5977ac[_0xd074f4(0xd8)])return;if(!canCallApi()){_0x5977ac[_0xd074f4(0xb6)][_0xd074f4(0xd6)](_0xd074f4(0xf1));return;}if(_0x5977ac[_0xd074f4(0xc0)][_0xd074f4(0x9f)]===0x0)return;const _0x117523=_0x5977ac[_0xd074f4(0xc0)][_0xd074f4(0x9d)](0x0,0xf),_0x2877c5=_0x5977ac[_0xd074f4(0x99)],_0x5decf7=PERSONA_MAPPING[_0x5977ac[_0xd074f4(0xb2)][_0xd074f4(0x109)]||'generic'],_0x1eb887=_0x5977ac['config'][_0xd074f4(0xd4)]||_0xd074f4(0xc4);let _0x1254d8=_0xd074f4(0xeb);try{const _0x2236b9=await _0x5977ac['getStateAsync']('system.presenceWho');if(_0x2236b9&&_0x2236b9[_0xd074f4(0xd3)])_0x1254d8=_0x2236b9[_0xd074f4(0xd3)];}catch(_0x38c5bf){}let _0xb5aa4=![];try{const _0xe40fe8=await _0x5977ac[_0xd074f4(0x9e)](_0xd074f4(0xcc));if(_0xe40fe8&&_0xe40fe8['val'])_0xb5aa4=!![];}catch(_0x40310f){}const _0x10b030='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x5decf7+'.\x20KONTEXT:\x20'+_0x1eb887+_0xd074f4(0xba)+_0x2877c5+'.\x20ANWESEND:\x20'+_0x1254d8+_0xd074f4(0xce)+JSON[_0xd074f4(0xbb)](_0x117523)+_0xd074f4(0x115)+_0x245121+_0xd074f4(0xef);try{updateApiTimestamp();const _0x5ae202=await _0x5977ac['geminiModel'][_0xd074f4(0x111)](_0x10b030),_0x446b3c=JSON[_0xd074f4(0x96)](_0x5ae202['response'][_0xd074f4(0xfc)]()[_0xd074f4(0xa7)](/```json|```/g,'')[_0xd074f4(0xa4)]());await _0x5977ac[_0xd074f4(0x10e)](_0xd074f4(0xb4),{'val':JSON['stringify'](_0x446b3c),'ack':!![]});if(_0x446b3c['summary'])await _0x5977ac[_0xd074f4(0x10e)](_0xd074f4(0x10d),{'val':_0x446b3c[_0xd074f4(0xb7)],'ack':!![]});const _0x1ff2c7={'timestamp':Date[_0xd074f4(0x10c)](),'id':Date[_0xd074f4(0x10c)]()['toString'](),'analysis':{'activity':{'summary':_0x446b3c[_0xd074f4(0xb7)],'isAlert':_0x446b3c['isAlert'],'alertReason':_0x446b3c[_0xd074f4(0xa2)]},'comfort':{'automationProposal':_0x446b3c[_0xd074f4(0xc1)]}}};_0x5977ac[_0xd074f4(0x102)]['unshift'](_0x1ff2c7);if(_0x5977ac['analysisHistory'][_0xd074f4(0x9f)]>0x32)_0x5977ac[_0xd074f4(0x102)]['pop']();await _0x5977ac[_0xd074f4(0x10e)](_0xd074f4(0xb0),{'val':JSON[_0xd074f4(0xbb)](_0x5977ac[_0xd074f4(0x102)]),'ack':!![]});const _0x573d01=_0x446b3c[_0xd074f4(0x107)]||![];_0x573d01!==_0x5977ac[_0xd074f4(0x116)]&&(await _0x5977ac[_0xd074f4(0x10e)]('analysis.isAlert',{'val':_0x573d01,'ack':!![]}),_0x5977ac[_0xd074f4(0x116)]=_0x573d01,_0x573d01&&(await _0x5977ac[_0xd074f4(0x10e)](_0xd074f4(0xe4),{'val':_0x446b3c[_0xd074f4(0xa2)],'ack':!![]}),setup[_0xd074f4(0xcf)](_0x5977ac,_0xd074f4(0x108)+_0x446b3c[_0xd074f4(0xa2)],![],_0x446b3c['isEmergency'])));if(_0x446b3c[_0xd074f4(0xc1)]&&_0x446b3c[_0xd074f4(0xc1)][_0xd074f4(0xfa)]){await _0x5977ac[_0xd074f4(0x10e)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x5977ac[_0xd074f4(0x10e)](_0xd074f4(0xe8),{'val':_0x446b3c[_0xd074f4(0xc1)]['description'],'ack':!![]}),await _0x5977ac['setStateAsync'](_0xd074f4(0xdb),{'val':_0x446b3c['automationProposal'][_0xd074f4(0x10f)],'ack':!![]}),await _0x5977ac[_0xd074f4(0x10e)](_0xd074f4(0xdc),{'val':JSON[_0xd074f4(0xbb)](_0x446b3c[_0xd074f4(0xc1)][_0xd074f4(0xc8)]),'ack':!![]});if(_0xb5aa4)executeAutomationAction(_0x5977ac);}}catch(_0x272d98){_0x5977ac['log'][_0xd074f4(0xc9)](_0xd074f4(0xf2)+_0x272d98[_0xd074f4(0xb8)]);}}async function createDailyDigest(_0x176584,_0x12d8d2){const _0x1c8303=a0_0x29297e;if(!_0x176584[_0x1c8303(0xf4)])return;if(!canCallApi()){await _0x176584['setStateAsync'](LTM_DP_STATUS,{'val':_0x1c8303(0x105),'ack':!![]});return;}await _0x176584[_0x1c8303(0x10e)](LTM_DP_STATUS,{'val':_0x1c8303(0xe6),'ack':!![]});if(!_0x176584['geminiModel']||_0x176584[_0x1c8303(0xb5)][_0x1c8303(0x9f)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x176584['setStateAsync'](LTM_DP_STATUS,{'val':_0x1c8303(0xe3),'ack':!![]});return;}const _0x122bc6=JSON[_0x1c8303(0x96)](JSON[_0x1c8303(0xbb)](_0x176584[_0x1c8303(0xb5)])),_0x3389c1=_0x122bc6[_0x1c8303(0x9f)],_0x45d545=_0x1c8303(0xaa)+JSON['stringify'](_0x122bc6);try{updateApiTimestamp();const _0x545f39=await _0x176584[_0x1c8303(0xd8)][_0x1c8303(0x111)](_0x45d545),_0x17df35=JSON[_0x1c8303(0x96)](_0x545f39['response'][_0x1c8303(0xfc)]()['replace'](/```json|```/g,'')[_0x1c8303(0xa4)]()),_0x357c7f={'timestamp':new Date()[_0x1c8303(0xde)](),'eventCount':_0x3389c1,'summary':_0x17df35['summary']||_0x1c8303(0x104),'activityLevel':_0x17df35[_0x1c8303(0xf3)]||_0x1c8303(0xe5),'systemMode':_0x176584['currentSystemMode']};_0x176584['dailyDigests'][_0x1c8303(0xbe)](_0x357c7f);const _0x5bd0b8=_0x176584['config'][_0x1c8303(0xca)]||0x3c;_0x176584[_0x1c8303(0xdd)][_0x1c8303(0x9f)]>_0x5bd0b8&&_0x176584[_0x1c8303(0xdd)][_0x1c8303(0xda)](0x0,_0x176584['dailyDigests']['length']-_0x5bd0b8);await _0x176584[_0x1c8303(0x10e)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x1c8303(0xbb)](_0x176584[_0x1c8303(0xdd)]),'ack':!![]}),_0x176584[_0x1c8303(0xb5)]=[],await _0x176584[_0x1c8303(0x10e)](LTM_DP_RAW_LOG,{'val':JSON[_0x1c8303(0xbb)](_0x176584[_0x1c8303(0xb5)]),'ack':!![]}),await _0x176584['setStateAsync'](LTM_DP_STATUS,{'val':_0x1c8303(0xa3),'ack':!![]});const _0xd695b5=_0x1c8303(0xd2)+_0x17df35['summary']+_0x1c8303(0x110)+_0x17df35[_0x1c8303(0xf3)];setup[_0x1c8303(0xcf)](_0x176584,_0xd695b5,![],![]);if(_0x176584[_0x1c8303(0xf4)]&&_0x12d8d2)_0x12d8d2['send'](_0x176584,_0x1c8303(0x101),{'digest':_0x357c7f});}catch(_0x35558b){_0x176584[_0x1c8303(0xb6)][_0x1c8303(0xc9)](_0x35558b[_0x1c8303(0xb8)]);}}async function runBaselineDriftAnalysis(_0x20b9f5){const _0x568356=a0_0x29297e;if(!_0x20b9f5[_0x568356(0xf4)]||!_0x20b9f5['geminiModel'])return;if(!canCallApi())return;const _0x40b6e7=_0x20b9f5[_0x568356(0xb2)][_0x568356(0xee)]||0xe;if(_0x20b9f5[_0x568356(0xdd)][_0x568356(0x9f)]<_0x40b6e7+0x7){await _0x20b9f5[_0x568356(0x10e)]('LTM.driftAnalysis.baselineDrift',{'val':_0x568356(0x103),'ack':!![]});return;}const _0x4677c9=_0x20b9f5[_0x568356(0xdd)][_0x568356(0x9d)](-_0x40b6e7),_0x3c6e3e=_0x20b9f5[_0x568356(0xdd)][_0x568356(0x9d)](0x0,_0x20b9f5['dailyDigests'][_0x568356(0x9f)]-_0x40b6e7),_0x591d77=_0x568356(0x114)+JSON[_0x568356(0xbb)](_0x3c6e3e)+_0x568356(0xc6)+JSON['stringify'](_0x4677c9);try{updateApiTimestamp();const _0x3ce8f3=await _0x20b9f5[_0x568356(0xd8)][_0x568356(0x111)](_0x591d77),_0x375396=JSON[_0x568356(0x96)](_0x3ce8f3[_0x568356(0xb3)]['text']()[_0x568356(0xa7)](/```json|```/g,'')[_0x568356(0xa4)]());_0x375396[_0x568356(0xf6)]&&(await _0x20b9f5[_0x568356(0x10e)](_0x568356(0xc5),{'val':_0x375396['baselineDrift'],'ack':!![]}),await _0x20b9f5[_0x568356(0x10e)]('LTM.driftAnalysis.driftDetails',{'val':_0x375396[_0x568356(0xfb)],'ack':!![]}),await _0x20b9f5[_0x568356(0x10e)]('LTM.driftAnalysis.lastCheck',{'val':Date['now'](),'ack':!![]}));}catch(_0x3bf349){}}async function executeAutomationAction(_0xa062c7){const _0x1dd252=a0_0x29297e;try{const _0x461138=await _0xa062c7[_0x1dd252(0x9e)](_0x1dd252(0xdb)),_0x36f492=await _0xa062c7['getStateAsync'](_0x1dd252(0xdc));if(_0x461138&&_0x461138[_0x1dd252(0xd3)]&&_0x36f492){const _0x511a83=_0x461138['val'];let _0x5d9e65=_0x36f492[_0x1dd252(0xd3)];try{_0x5d9e65=JSON[_0x1dd252(0x96)](_0x5d9e65);}catch(_0x44e841){}_0xa062c7['log'][_0x1dd252(0x9b)](_0x1dd252(0xfd)+_0x511a83+_0x1dd252(0xd1)+_0x5d9e65),await _0xa062c7[_0x1dd252(0xa6)](_0x511a83,_0x5d9e65);}else _0xa062c7[_0x1dd252(0xb6)][_0x1dd252(0xab)](_0x1dd252(0xf7));}catch(_0x126649){_0xa062c7['log'][_0x1dd252(0xc9)](_0x1dd252(0xc2)+_0x126649[_0x1dd252(0xb8)]);}}async function sendMorningBriefing(_0x288cc6){const _0x3cd25b=a0_0x29297e;if(!_0x288cc6['geminiModel'])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x574296='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x451cb4=await _0x288cc6[_0x3cd25b(0xd8)][_0x3cd25b(0x111)](_0x574296),_0x5adc19=_0x451cb4[_0x3cd25b(0xb3)]['text']();setup['sendNotification'](_0x288cc6,_0x3cd25b(0xcd)+_0x5adc19);}catch(_0x1b47e3){_0x288cc6['log'][_0x3cd25b(0xc9)]('Briefing\x20Error:\x20'+_0x1b47e3[_0x3cd25b(0xb8)]);}}module[a0_0x29297e(0xc7)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};