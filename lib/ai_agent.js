const a0_0x940a8c=a0_0x14d0;(function(_0x1923f9,_0x3a8557){const _0x4177c2=a0_0x14d0,_0x180352=_0x1923f9();while(!![]){try{const _0x292d64=parseInt(_0x4177c2(0x112))/0x1+parseInt(_0x4177c2(0xce))/0x2+-parseInt(_0x4177c2(0x11d))/0x3*(-parseInt(_0x4177c2(0xf9))/0x4)+parseInt(_0x4177c2(0x13c))/0x5*(-parseInt(_0x4177c2(0xf0))/0x6)+parseInt(_0x4177c2(0xda))/0x7*(-parseInt(_0x4177c2(0xe5))/0x8)+parseInt(_0x4177c2(0x107))/0x9*(-parseInt(_0x4177c2(0x103))/0xa)+parseInt(_0x4177c2(0x132))/0xb*(-parseInt(_0x4177c2(0x10a))/0xc);if(_0x292d64===_0x3a8557)break;else _0x180352['push'](_0x180352['shift']());}catch(_0x2cb197){_0x180352['push'](_0x180352['shift']());}}}(a0_0x310c,0x9da0c));const a0_0x56e0d9=(function(){let _0x4ce65a=!![];return function(_0x26da98,_0xb1aa5d){const _0x1dfbe3=_0x4ce65a?function(){const _0x1b8a27=a0_0x14d0;if(_0xb1aa5d){const _0x1c61fa=_0xb1aa5d[_0x1b8a27(0xf5)](_0x26da98,arguments);return _0xb1aa5d=null,_0x1c61fa;}}:function(){};return _0x4ce65a=![],_0x1dfbe3;};}()),a0_0x2f6af0=a0_0x56e0d9(this,function(){const _0x316fd9=a0_0x14d0;return a0_0x2f6af0['toString']()[_0x316fd9(0x137)](_0x316fd9(0x106))['toString']()['constructor'](a0_0x2f6af0)[_0x316fd9(0x137)](_0x316fd9(0x106));});a0_0x2f6af0();function a0_0x14d0(_0x4da8eb,_0xdba03f){const _0x27e61e=a0_0x310c();return a0_0x14d0=function(_0x2f6af0,_0x56e0d9){_0x2f6af0=_0x2f6af0-0xbb;let _0x310c5b=_0x27e61e[_0x2f6af0];return _0x310c5b;},a0_0x14d0(_0x4da8eb,_0xdba03f);}'use strict';const {GoogleGenerativeAI}=require('@google/generative-ai'),setup=require('./setup'),GEMINI_MODEL=a0_0x940a8c(0xc3),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x940a8c(0x12c),LTM_DP_RAW_LOG=a0_0x940a8c(0x113),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':'Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','senior_aal':'PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','family':a0_0x940a8c(0xd1),'single_comfort':'Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','security':a0_0x940a8c(0xc6),'energy_saver':'PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).'};function canCallApi(){const _0x584962=a0_0x940a8c,_0x2e9913=Date[_0x584962(0x127)]();return _0x2e9913-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}function a0_0x310c(){const _0x28e48a=['ü§ñ\x20Butler\x20Brain\x20Error:\x20','currentSystemMode','replace','\x20√ºbersprungen\x20(Auto-Approved).','activityLevel','response','description','stringify','¬∞C,\x20','ltmStbWindowDays','6mHSRrg','Digest','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','N/A\x20(Learning)','apply','analysisHistory','Skipped\x20(Traffic)','LTM.driftAnalysis.driftDetails','1316PEEsjb','analysis.automation.autoApply','toLocaleTimeString','analysis.isAlert','.\x20SYSTEM_MODE:\x20','generateContent','push','val','KI\x20offline\x20(Fallback)','decision','247370BjbdLd','Nacht','setStateAsync','(((.+)+)+)+$','333YeUkNe','analysis.automation.description','.Current.IsNight','1833564BlXfjF','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','analysis.automation.patternDetected','Started...','warn','\x20->\x20','reason','1027801xvMyBs','LTM.rawEventLog','summary','.\x20EVENTS:\x20','alertReason','lastAlertState','.Current.Temperature','analysis.automation.targetId','rawEventLog','Wetterdaten\x20nicht\x20abrufbar','detected','10311TswAKQ','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','livingContext','system.presenceWho','parse','toISOString','isProVersion','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','toString','timestamp','now','üìÖ\x20Daily\x20Digest:\x0a','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','weatherInstance','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','LTM.processingStatus','text','dailyDigests','Success','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','aiPersona','77niJfpe','log','baselineDrift','eventHistory','.forecast.current.temperature','search','analysis.analysisHistory','trim','pop','automationProposal','956510VAoZWW','targetId','getStateAsync','normal','Traffic-Schutz\x20(Auto-Approved)','Unbekannt\x20(Kein\x20Sensor)','Briefing\x20Error:\x20','config','analysis.lastResult','BUTLER\x20Execution\x20Error:\x20','models/gemini-flash-latest','Keine\x20Details.',',\x20Lichtverh√§ltnisse:\x20','Sicherheit\x20geht\x20vor.','approved','analysis.alertReason','.\x20ANWESEND:\x20','slice','getForeignStateAsync','error','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','1714964uiRXei','KI-Fehler\x20(Fallback)','geminiModel','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','debug','sendNotification','info','exports','analysis.automation.targetValue','.\x20KONTEXT:\x20','generic','length','7juvYXz','\x0aSTB:\x20','splice','LTM.driftAnalysis.baselineDrift','targetValue','toFixed','Unbekannt','message','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','üåÖ\x20Morning\x20Briefing:\x0a','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','1554096RBiHKr'];a0_0x310c=function(){return _0x28e48a;};return a0_0x310c();}async function getWeatherContext(_0x4f9553){const _0x5826ec=a0_0x940a8c;if(!_0x4f9553[_0x5826ec(0xc0)]['useWeather']||!_0x4f9553[_0x5826ec(0xc0)][_0x5826ec(0x12a)])return _0x5826ec(0xbe);try{const _0x2478da=_0x4f9553[_0x5826ec(0xc0)][_0x5826ec(0x12a)];let _0x3ba311=await _0x4f9553[_0x5826ec(0xcb)](_0x2478da+_0x5826ec(0x118));if(!_0x3ba311)_0x3ba311=await _0x4f9553['getForeignStateAsync'](_0x2478da+_0x5826ec(0x136));let _0x418a57=await _0x4f9553[_0x5826ec(0xcb)](_0x2478da+'.Current.WeatherText');if(!_0x418a57)_0x418a57=await _0x4f9553[_0x5826ec(0xcb)](_0x2478da+'.forecast.current.state');let _0x497e92=_0x5826ec(0xe0);const _0x324d1a=await _0x4f9553[_0x5826ec(0xcb)](_0x2478da+_0x5826ec(0x109));if(_0x324d1a)_0x497e92=_0x324d1a[_0x5826ec(0x100)]?_0x5826ec(0x104):'Tag';if(_0x3ba311&&_0x418a57)return _0x3ba311[_0x5826ec(0x100)]+_0x5826ec(0xee)+_0x418a57[_0x5826ec(0x100)]+_0x5826ec(0xc5)+_0x497e92;}catch(_0x276099){}return _0x5826ec(0x11b);}async function consultButler(_0x2e4f7f,_0x243cb8,_0x139d60,_0x591c05){const _0x30952=a0_0x940a8c;if(!_0x2e4f7f[_0x30952(0xd0)])return{'approved':!![],'reason':_0x30952(0x101)};const _0x59abe8=Date['now']();if(decisionCache[_0x243cb8]&&_0x59abe8-decisionCache[_0x243cb8][_0x30952(0x126)]<CACHE_TTL_MS){const _0x450fd6=decisionCache[_0x243cb8][_0x30952(0x102)];return _0x2e4f7f[_0x30952(0x133)][_0x30952(0xd2)](_0x30952(0x124)+_0x243cb8+_0x30952(0x110)+(_0x450fd6[_0x30952(0xc7)]?'OK':'NO')+'\x20('+_0x450fd6[_0x30952(0x111)]+')'),_0x450fd6;}if(!canCallApi())return _0x2e4f7f[_0x30952(0x133)][_0x30952(0xd2)](_0x30952(0x130)+_0x243cb8+_0x30952(0xe9)),{'approved':!![],'reason':_0x30952(0xbd)};const _0x4eb060=new Date()[_0x30952(0xfb)](),_0x244980=await getWeatherContext(_0x2e4f7f),_0x2b302d=PERSONA_MAPPING[_0x2e4f7f[_0x30952(0xc0)][_0x30952(0x131)]||_0x30952(0xd8)],_0x4aba86=_0x30952(0xcd)+_0x4eb060+',\x20Wetter:\x20'+_0x244980+_0x30952(0x11e)+(_0x591c05*0x64)[_0x30952(0xdf)](0x0)+'%)\x20nach\x20\x22'+_0x243cb8+_0x30952(0x10b)+_0x139d60+_0x30952(0xf2)+_0x2b302d+'\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x479691=await _0x2e4f7f['geminiModel'][_0x30952(0xfe)](_0x4aba86),_0x4f5a3c=_0x479691['response'][_0x30952(0x12d)]()[_0x30952(0xe8)](/```json|```/g,'')[_0x30952(0x139)](),_0x2f8542=JSON['parse'](_0x4f5a3c);return decisionCache[_0x243cb8]={'decision':_0x2f8542,'timestamp':_0x59abe8},_0x2f8542;}catch(_0x4ae679){return _0x2e4f7f[_0x30952(0x133)][_0x30952(0x10f)](_0x30952(0xe6)+_0x4ae679[_0x30952(0xe1)]),decisionCache[_0x243cb8]={'decision':{'approved':!![],'reason':_0x30952(0xcf)},'timestamp':_0x59abe8-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':'KI-Fehler\x20(Fallback)'};}}async function runGeminiAnalysis(_0xd619e3,_0x35a428=''){const _0xcc1e03=a0_0x940a8c;if(!_0xd619e3['geminiModel'])return;if(!canCallApi()){_0xd619e3['log'][_0xcc1e03(0xd2)](_0xcc1e03(0xf3));return;}if(_0xd619e3[_0xcc1e03(0x135)][_0xcc1e03(0xd9)]===0x0)return;const _0x5ecfb4=_0xd619e3[_0xcc1e03(0x135)][_0xcc1e03(0xca)](0x0,0xf),_0x5c9976=_0xd619e3[_0xcc1e03(0xe7)],_0x52e754=PERSONA_MAPPING[_0xd619e3[_0xcc1e03(0xc0)][_0xcc1e03(0x131)]||'generic'],_0x3297e7=_0xd619e3[_0xcc1e03(0xc0)][_0xcc1e03(0x11f)]||_0xcc1e03(0xc4);let _0x33bbc1=_0xcc1e03(0xe0);try{const _0x4f764=await _0xd619e3[_0xcc1e03(0xbb)](_0xcc1e03(0x120));if(_0x4f764&&_0x4f764[_0xcc1e03(0x100)])_0x33bbc1=_0x4f764[_0xcc1e03(0x100)];}catch(_0x3b530c){}let _0x31d2d3=![];try{const _0x2eb1c9=await _0xd619e3[_0xcc1e03(0xbb)](_0xcc1e03(0xfa));if(_0x2eb1c9&&_0x2eb1c9[_0xcc1e03(0x100)])_0x31d2d3=!![];}catch(_0x1723a8){}const _0x4108ae=_0xcc1e03(0x129)+_0x52e754+_0xcc1e03(0xd7)+_0x3297e7+_0xcc1e03(0xfd)+_0x5c9976+_0xcc1e03(0xc9)+_0x33bbc1+_0xcc1e03(0x115)+JSON['stringify'](_0x5ecfb4)+'.\x20EMERGENCY:\x20'+_0x35a428+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{updateApiTimestamp();const _0x1729a2=await _0xd619e3[_0xcc1e03(0xd0)]['generateContent'](_0x4108ae),_0x34a331=JSON[_0xcc1e03(0x121)](_0x1729a2['response'][_0xcc1e03(0x12d)]()['replace'](/```json|```/g,'')[_0xcc1e03(0x139)]());await _0xd619e3['setStateAsync'](_0xcc1e03(0xc1),{'val':JSON['stringify'](_0x34a331),'ack':!![]});if(_0x34a331['summary'])await _0xd619e3['setStateAsync']('analysis.activitySummary',{'val':_0x34a331[_0xcc1e03(0x114)],'ack':!![]});const _0x5d7a39={'timestamp':Date[_0xcc1e03(0x127)](),'id':Date[_0xcc1e03(0x127)]()[_0xcc1e03(0x125)](),'analysis':{'activity':{'summary':_0x34a331[_0xcc1e03(0x114)],'isAlert':_0x34a331['isAlert'],'alertReason':_0x34a331[_0xcc1e03(0x116)]},'comfort':{'automationProposal':_0x34a331[_0xcc1e03(0x13b)]}}};_0xd619e3['analysisHistory']['unshift'](_0x5d7a39);if(_0xd619e3['analysisHistory'][_0xcc1e03(0xd9)]>0x32)_0xd619e3[_0xcc1e03(0xf6)][_0xcc1e03(0x13a)]();await _0xd619e3[_0xcc1e03(0x105)](_0xcc1e03(0x138),{'val':JSON[_0xcc1e03(0xed)](_0xd619e3[_0xcc1e03(0xf6)]),'ack':!![]});const _0x298ad8=_0x34a331['isAlert']||![];_0x298ad8!==_0xd619e3[_0xcc1e03(0x117)]&&(await _0xd619e3[_0xcc1e03(0x105)](_0xcc1e03(0xfc),{'val':_0x298ad8,'ack':!![]}),_0xd619e3[_0xcc1e03(0x117)]=_0x298ad8,_0x298ad8&&(await _0xd619e3[_0xcc1e03(0x105)](_0xcc1e03(0xc8),{'val':_0x34a331[_0xcc1e03(0x116)],'ack':!![]}),setup[_0xcc1e03(0xd3)](_0xd619e3,'‚ö†Ô∏è\x20ALARM:\x20'+_0x34a331[_0xcc1e03(0x116)],![],_0x34a331['isEmergency'])));if(_0x34a331[_0xcc1e03(0x13b)]&&_0x34a331[_0xcc1e03(0x13b)][_0xcc1e03(0x11c)]){await _0xd619e3['setStateAsync'](_0xcc1e03(0x10d),{'val':!![],'ack':!![]}),await _0xd619e3[_0xcc1e03(0x105)](_0xcc1e03(0x108),{'val':_0x34a331[_0xcc1e03(0x13b)][_0xcc1e03(0xec)],'ack':!![]}),await _0xd619e3[_0xcc1e03(0x105)](_0xcc1e03(0x119),{'val':_0x34a331[_0xcc1e03(0x13b)][_0xcc1e03(0x13d)],'ack':!![]}),await _0xd619e3[_0xcc1e03(0x105)]('analysis.automation.targetValue',{'val':JSON[_0xcc1e03(0xed)](_0x34a331[_0xcc1e03(0x13b)][_0xcc1e03(0xde)]),'ack':!![]});if(_0x31d2d3)executeAutomationAction(_0xd619e3);}}catch(_0x265f74){_0xd619e3[_0xcc1e03(0x133)][_0xcc1e03(0xcc)]('Gemini\x20Error:\x20'+_0x265f74[_0xcc1e03(0xe1)]);}}async function createDailyDigest(_0x1a669f,_0x352efc){const _0x1c7c4b=a0_0x940a8c;if(!_0x1a669f[_0x1c7c4b(0x123)])return;if(!canCallApi()){await _0x1a669f[_0x1c7c4b(0x105)](LTM_DP_STATUS,{'val':_0x1c7c4b(0xf7),'ack':!![]});return;}await _0x1a669f[_0x1c7c4b(0x105)](LTM_DP_STATUS,{'val':_0x1c7c4b(0x10e),'ack':!![]});if(!_0x1a669f[_0x1c7c4b(0xd0)]||_0x1a669f['rawEventLog'][_0x1c7c4b(0xd9)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x1a669f['setStateAsync'](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x16d972=JSON[_0x1c7c4b(0x121)](JSON[_0x1c7c4b(0xed)](_0x1a669f[_0x1c7c4b(0x11a)])),_0x36bc45=_0x16d972[_0x1c7c4b(0xd9)],_0x165bb6=_0x1c7c4b(0xe4)+JSON['stringify'](_0x16d972);try{updateApiTimestamp();const _0x200964=await _0x1a669f[_0x1c7c4b(0xd0)][_0x1c7c4b(0xfe)](_0x165bb6),_0x4dfc95=JSON['parse'](_0x200964[_0x1c7c4b(0xeb)][_0x1c7c4b(0x12d)]()[_0x1c7c4b(0xe8)](/```json|```/g,'')[_0x1c7c4b(0x139)]()),_0x3dee4e={'timestamp':new Date()[_0x1c7c4b(0x122)](),'eventCount':_0x36bc45,'summary':_0x4dfc95[_0x1c7c4b(0x114)]||_0x1c7c4b(0xf1),'activityLevel':_0x4dfc95[_0x1c7c4b(0xea)]||_0x1c7c4b(0xbc),'systemMode':_0x1a669f[_0x1c7c4b(0xe7)]};_0x1a669f[_0x1c7c4b(0x12e)][_0x1c7c4b(0xff)](_0x3dee4e);const _0x1b58c5=_0x1a669f[_0x1c7c4b(0xc0)]['ltmLtbWindowDays']||0x3c;_0x1a669f[_0x1c7c4b(0x12e)][_0x1c7c4b(0xd9)]>_0x1b58c5&&_0x1a669f[_0x1c7c4b(0x12e)][_0x1c7c4b(0xdc)](0x0,_0x1a669f[_0x1c7c4b(0x12e)][_0x1c7c4b(0xd9)]-_0x1b58c5);await _0x1a669f[_0x1c7c4b(0x105)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x1c7c4b(0xed)](_0x1a669f[_0x1c7c4b(0x12e)]),'ack':!![]}),_0x1a669f[_0x1c7c4b(0x11a)]=[],await _0x1a669f[_0x1c7c4b(0x105)](LTM_DP_RAW_LOG,{'val':JSON[_0x1c7c4b(0xed)](_0x1a669f['rawEventLog']),'ack':!![]}),await _0x1a669f[_0x1c7c4b(0x105)](LTM_DP_STATUS,{'val':_0x1c7c4b(0x12f),'ack':!![]});const _0xb5ff14=_0x1c7c4b(0x128)+_0x4dfc95[_0x1c7c4b(0x114)]+'\x0aAktivit√§t:\x20'+_0x4dfc95[_0x1c7c4b(0xea)];setup[_0x1c7c4b(0xd3)](_0x1a669f,_0xb5ff14,![],![]);if(_0x1a669f[_0x1c7c4b(0x123)]&&_0x352efc)_0x352efc['send'](_0x1a669f,'ANALYZE_HEALTH',{'digest':_0x3dee4e});}catch(_0x1b3158){_0x1a669f[_0x1c7c4b(0x133)][_0x1c7c4b(0xcc)](_0x1b3158[_0x1c7c4b(0xe1)]);}}async function runBaselineDriftAnalysis(_0x26d192){const _0x44ffa8=a0_0x940a8c;if(!_0x26d192['isProVersion']||!_0x26d192[_0x44ffa8(0xd0)])return;if(!canCallApi())return;const _0x229c12=_0x26d192[_0x44ffa8(0xc0)][_0x44ffa8(0xef)]||0xe;if(_0x26d192[_0x44ffa8(0x12e)]['length']<_0x229c12+0x7){await _0x26d192[_0x44ffa8(0x105)](_0x44ffa8(0xdd),{'val':_0x44ffa8(0xf4),'ack':!![]});return;}const _0xf3d201=_0x26d192[_0x44ffa8(0x12e)]['slice'](-_0x229c12),_0xef96f6=_0x26d192[_0x44ffa8(0x12e)][_0x44ffa8(0xca)](0x0,_0x26d192[_0x44ffa8(0x12e)][_0x44ffa8(0xd9)]-_0x229c12),_0x6de2e5='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x44ffa8(0xed)](_0xef96f6)+_0x44ffa8(0xdb)+JSON[_0x44ffa8(0xed)](_0xf3d201);try{updateApiTimestamp();const _0x42a495=await _0x26d192[_0x44ffa8(0xd0)]['generateContent'](_0x6de2e5),_0x241766=JSON[_0x44ffa8(0x121)](_0x42a495[_0x44ffa8(0xeb)][_0x44ffa8(0x12d)]()[_0x44ffa8(0xe8)](/```json|```/g,'')['trim']());_0x241766[_0x44ffa8(0x134)]&&(await _0x26d192[_0x44ffa8(0x105)](_0x44ffa8(0xdd),{'val':_0x241766[_0x44ffa8(0x134)],'ack':!![]}),await _0x26d192['setStateAsync'](_0x44ffa8(0xf8),{'val':_0x241766['driftDetails'],'ack':!![]}),await _0x26d192[_0x44ffa8(0x105)]('LTM.driftAnalysis.lastCheck',{'val':Date[_0x44ffa8(0x127)](),'ack':!![]}));}catch(_0x42f5f5){}}async function executeAutomationAction(_0x176a56){const _0x131e95=a0_0x940a8c;try{const _0x3a42e5=await _0x176a56[_0x131e95(0xbb)](_0x131e95(0x119)),_0x3fb6ec=await _0x176a56[_0x131e95(0xbb)](_0x131e95(0xd6));if(_0x3a42e5&&_0x3a42e5[_0x131e95(0x100)]&&_0x3fb6ec){const _0x5ea5f4=_0x3a42e5[_0x131e95(0x100)];let _0x47b632=_0x3fb6ec[_0x131e95(0x100)];try{_0x47b632=JSON[_0x131e95(0x121)](_0x47b632);}catch(_0x4255e1){}_0x176a56['log'][_0x131e95(0xd4)](_0x131e95(0x10c)+_0x5ea5f4+'\x20=\x20'+_0x47b632),await _0x176a56['setForeignStateAsync'](_0x5ea5f4,_0x47b632);}else _0x176a56['log'][_0x131e95(0x10f)](_0x131e95(0x12b));}catch(_0x4ec6c5){_0x176a56[_0x131e95(0x133)]['error'](_0x131e95(0xc2)+_0x4ec6c5[_0x131e95(0xe1)]);}}async function sendMorningBriefing(_0x5b4906){const _0x1d38cd=a0_0x940a8c;if(!_0x5b4906[_0x1d38cd(0xd0)])return;if(!canCallApi())return;try{updateApiTimestamp();const _0x463669=_0x1d38cd(0xe2),_0x3d40de=await _0x5b4906[_0x1d38cd(0xd0)][_0x1d38cd(0xfe)](_0x463669),_0x45c4a7=_0x3d40de[_0x1d38cd(0xeb)][_0x1d38cd(0x12d)]();setup[_0x1d38cd(0xd3)](_0x5b4906,_0x1d38cd(0xe3)+_0x45c4a7);}catch(_0x46c848){_0x5b4906['log'][_0x1d38cd(0xcc)](_0x1d38cd(0xbf)+_0x46c848[_0x1d38cd(0xe1)]);}}module[a0_0x940a8c(0xd5)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler};