const a0_0x15239d=a0_0x454a;(function(_0x419226,_0x6a5339){const _0x1bf905=a0_0x454a,_0x202bb2=_0x419226();while(!![]){try{const _0xa2f5b7=parseInt(_0x1bf905(0xa3))/0x1*(-parseInt(_0x1bf905(0xe5))/0x2)+parseInt(_0x1bf905(0xbb))/0x3+-parseInt(_0x1bf905(0x11f))/0x4+parseInt(_0x1bf905(0xa8))/0x5*(-parseInt(_0x1bf905(0xb5))/0x6)+parseInt(_0x1bf905(0x8f))/0x7+parseInt(_0x1bf905(0xad))/0x8*(-parseInt(_0x1bf905(0xdf))/0x9)+parseInt(_0x1bf905(0x102))/0xa*(parseInt(_0x1bf905(0xee))/0xb);if(_0xa2f5b7===_0x6a5339)break;else _0x202bb2['push'](_0x202bb2['shift']());}catch(_0x28c6bb){_0x202bb2['push'](_0x202bb2['shift']());}}}(a0_0x3fbe,0xecace));const a0_0x532804=(function(){let _0x1ba44d=!![];return function(_0x510fa5,_0xdbc98d){const _0x6d5963=_0x1ba44d?function(){if(_0xdbc98d){const _0x2402fd=_0xdbc98d['apply'](_0x510fa5,arguments);return _0xdbc98d=null,_0x2402fd;}}:function(){};return _0x1ba44d=![],_0x6d5963;};}()),a0_0x518b8a=a0_0x532804(this,function(){const _0x2739a1=a0_0x454a;return a0_0x518b8a[_0x2739a1(0xbf)]()[_0x2739a1(0x88)]('(((.+)+)+)+$')[_0x2739a1(0xbf)]()['constructor'](a0_0x518b8a)[_0x2739a1(0x88)](_0x2739a1(0x11a));});function a0_0x454a(_0x46f922,_0x24544b){const _0xe1bd93=a0_0x3fbe();return a0_0x454a=function(_0x518b8a,_0x532804){_0x518b8a=_0x518b8a-0x85;let _0x3fbe51=_0xe1bd93[_0x518b8a];return _0x3fbe51;},a0_0x454a(_0x46f922,_0x24544b);}a0_0x518b8a();'use strict';const {GoogleGenerativeAI}=require(a0_0x15239d(0xcb)),setup=require(a0_0x15239d(0x85)),GEMINI_MODEL=a0_0x15239d(0x90),LTM_DP_DAILY_DIGESTS=a0_0x15239d(0xae),LTM_DP_STATUS=a0_0x15239d(0xd9),LTM_DP_RAW_LOG=a0_0x15239d(0xea),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x15239d(0x110),'senior_aal':a0_0x15239d(0xf2),'family':a0_0x15239d(0x116),'single_comfort':a0_0x15239d(0x107),'security':a0_0x15239d(0xab),'energy_saver':a0_0x15239d(0xba)};function canCallApi(){const _0x8c9118=a0_0x15239d,_0x65aefb=Date[_0x8c9118(0x11b)]();return _0x65aefb-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){lastGlobalApiCall=Date['now']();}async function getWeatherContext(_0x29eebb){const _0x2dc3bf=a0_0x15239d;if(!_0x29eebb['config'][_0x2dc3bf(0xc1)]||!_0x29eebb[_0x2dc3bf(0xe0)][_0x2dc3bf(0xd2)])return'Unbekannt\x20(Kein\x20Sensor)';try{const _0x368b21=_0x29eebb[_0x2dc3bf(0xe0)][_0x2dc3bf(0xd2)];let _0xd60168=await _0x29eebb[_0x2dc3bf(0xc7)](_0x368b21+'.Current.Temperature');if(!_0xd60168)_0xd60168=await _0x29eebb[_0x2dc3bf(0xc7)](_0x368b21+_0x2dc3bf(0xe8));let _0x3e8f2b=await _0x29eebb[_0x2dc3bf(0xc7)](_0x368b21+_0x2dc3bf(0xcc));if(!_0x3e8f2b)_0x3e8f2b=await _0x29eebb['getForeignStateAsync'](_0x368b21+_0x2dc3bf(0xaf));let _0x25657c='Unbekannt';const _0x3f2c0d=await _0x29eebb[_0x2dc3bf(0xc7)](_0x368b21+_0x2dc3bf(0xb6));if(_0x3f2c0d)_0x25657c=_0x3f2c0d[_0x2dc3bf(0x86)]?'Nacht':_0x2dc3bf(0xc3);if(_0xd60168&&_0x3e8f2b)return _0xd60168[_0x2dc3bf(0x86)]+_0x2dc3bf(0xef)+_0x3e8f2b[_0x2dc3bf(0x86)]+_0x2dc3bf(0x115)+_0x25657c;}catch(_0x4108a3){}return _0x2dc3bf(0xf1);}async function consultButler(_0x5a9b9d,_0xbd76c3,_0x5360b9,_0x3260df){const _0x45dbdb=a0_0x15239d;if(!_0x5a9b9d['geminiModel'])return{'approved':!![],'reason':_0x45dbdb(0xd1)};const _0x288585=Date['now']();if(decisionCache[_0xbd76c3]&&_0x288585-decisionCache[_0xbd76c3]['timestamp']<CACHE_TTL_MS){const _0x2df1cc=decisionCache[_0xbd76c3][_0x45dbdb(0x10a)];return _0x5a9b9d[_0x45dbdb(0xaa)][_0x45dbdb(0xb2)]('ü§ñ\x20Butler\x20Cache\x20Hit:\x20'+_0xbd76c3+_0x45dbdb(0x9a)+(_0x2df1cc[_0x45dbdb(0x10c)]?'OK':'NO')+'\x20('+_0x2df1cc[_0x45dbdb(0x95)]+')'),_0x2df1cc;}if(!canCallApi())return _0x5a9b9d['log'][_0x45dbdb(0xb2)](_0x45dbdb(0xf3)+_0xbd76c3+_0x45dbdb(0xf0)),{'approved':!![],'reason':_0x45dbdb(0xd6)};const _0x31a747=new Date()[_0x45dbdb(0xb9)](),_0x2ac18f=await getWeatherContext(_0x5a9b9d),_0x3a9a69=PERSONA_MAPPING[_0x5a9b9d[_0x45dbdb(0xe0)]['aiPersona']||_0x45dbdb(0xb7)],_0x2f0537=_0x45dbdb(0x9f)+_0x31a747+_0x45dbdb(0xe2)+_0x2ac18f+_0x45dbdb(0xfe)+(_0x3260df*0x64)['toFixed'](0x0)+_0x45dbdb(0x106)+_0xbd76c3+_0x45dbdb(0xa1)+_0x5360b9+_0x45dbdb(0xe3)+_0x3a9a69+_0x45dbdb(0xfc);try{updateApiTimestamp();const _0x3e46b8=await _0x5a9b9d[_0x45dbdb(0xd7)][_0x45dbdb(0x117)](_0x2f0537),_0x11ac8e=_0x3e46b8[_0x45dbdb(0xa4)][_0x45dbdb(0xd5)]()[_0x45dbdb(0xc5)](/```json|```/g,'')[_0x45dbdb(0xfd)](),_0x207ae6=JSON['parse'](_0x11ac8e);return decisionCache[_0xbd76c3]={'decision':_0x207ae6,'timestamp':_0x288585},_0x207ae6;}catch(_0x1f07a6){return _0x5a9b9d[_0x45dbdb(0xaa)]['warn']('ü§ñ\x20Butler\x20Brain\x20Error:\x20'+_0x1f07a6[_0x45dbdb(0xfb)]),decisionCache[_0xbd76c3]={'decision':{'approved':!![],'reason':_0x45dbdb(0xd3)},'timestamp':_0x288585-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x45dbdb(0xd3)};}}async function runGeminiAnalysis(_0x435072,_0x32a670=''){const _0x211e85=a0_0x15239d;if(!_0x435072[_0x211e85(0xd7)])return;if(!canCallApi()){_0x435072[_0x211e85(0xaa)][_0x211e85(0xb2)](_0x211e85(0xa6));return;}if(_0x435072[_0x211e85(0xcf)][_0x211e85(0xbc)]===0x0)return;const _0x494124=_0x435072[_0x211e85(0xcf)][_0x211e85(0x109)](0x0,0xf),_0x28d616=_0x435072['currentSystemMode'],_0x3ce5b6=PERSONA_MAPPING[_0x435072['config']['aiPersona']||'generic'],_0x5056f5=_0x435072[_0x211e85(0xe0)][_0x211e85(0x104)]||_0x211e85(0x8c);let _0x4c2569=_0x211e85(0xc6);try{const _0x4dcd1b=await _0x435072[_0x211e85(0x92)]('system.presenceWho');if(_0x4dcd1b&&_0x4dcd1b['val'])_0x4c2569=_0x4dcd1b[_0x211e85(0x86)];}catch(_0x44762c){}let _0x807290=![];try{const _0x5e727a=await _0x435072[_0x211e85(0x92)](_0x211e85(0xb0));if(_0x5e727a&&_0x5e727a[_0x211e85(0x86)])_0x807290=!![];}catch(_0x162b6a){}const _0x7b5b98=_0x211e85(0x9c)+_0x3ce5b6+'.\x20KONTEXT:\x20'+_0x5056f5+_0x211e85(0xed)+_0x28d616+_0x211e85(0xe4)+_0x4c2569+_0x211e85(0xff)+JSON[_0x211e85(0xe9)](_0x494124)+'.\x20EMERGENCY:\x20'+_0x32a670+_0x211e85(0x91);try{updateApiTimestamp();const _0x5c02a9=await _0x435072[_0x211e85(0xd7)][_0x211e85(0x117)](_0x7b5b98),_0x404bd4=JSON[_0x211e85(0x94)](_0x5c02a9['response']['text']()[_0x211e85(0xc5)](/```json|```/g,'')['trim']());await _0x435072[_0x211e85(0xa5)](_0x211e85(0xa9),{'val':JSON[_0x211e85(0xe9)](_0x404bd4),'ack':!![]});if(_0x404bd4['summary'])await _0x435072[_0x211e85(0xa5)](_0x211e85(0xec),{'val':_0x404bd4[_0x211e85(0x10d)],'ack':!![]});const _0x227c6d={'timestamp':Date['now'](),'id':Date[_0x211e85(0x11b)]()['toString'](),'analysis':{'activity':{'summary':_0x404bd4[_0x211e85(0x10d)],'isAlert':_0x404bd4['isAlert'],'alertReason':_0x404bd4[_0x211e85(0x105)]},'comfort':{'automationProposal':_0x404bd4[_0x211e85(0xf9)]}}};_0x435072['analysisHistory']['unshift'](_0x227c6d);if(_0x435072['analysisHistory'][_0x211e85(0xbc)]>0x32)_0x435072[_0x211e85(0x9e)][_0x211e85(0x114)]();await _0x435072[_0x211e85(0xa5)](_0x211e85(0xe7),{'val':JSON[_0x211e85(0xe9)](_0x435072['analysisHistory']),'ack':!![]});const _0x5a81f1=_0x404bd4['isAlert']||![];_0x5a81f1!==_0x435072['lastAlertState']&&(await _0x435072[_0x211e85(0xa5)](_0x211e85(0xd8),{'val':_0x5a81f1,'ack':!![]}),_0x435072[_0x211e85(0x111)]=_0x5a81f1,_0x5a81f1&&(await _0x435072[_0x211e85(0xa5)](_0x211e85(0x8a),{'val':_0x404bd4[_0x211e85(0x105)],'ack':!![]}),setup[_0x211e85(0xc2)](_0x435072,'‚ö†Ô∏è\x20ALARM:\x20'+_0x404bd4[_0x211e85(0x105)],![],_0x404bd4['isEmergency'])));if(_0x404bd4[_0x211e85(0xf9)]&&_0x404bd4[_0x211e85(0xf9)][_0x211e85(0xa7)]){await _0x435072[_0x211e85(0xa5)](_0x211e85(0xfa),{'val':!![],'ack':!![]}),await _0x435072[_0x211e85(0xa5)](_0x211e85(0x11d),{'val':_0x404bd4[_0x211e85(0xf9)][_0x211e85(0xbe)],'ack':!![]}),await _0x435072[_0x211e85(0xa5)]('analysis.automation.targetId',{'val':_0x404bd4[_0x211e85(0xf9)]['targetId'],'ack':!![]}),await _0x435072[_0x211e85(0xa5)]('analysis.automation.targetValue',{'val':JSON[_0x211e85(0xe9)](_0x404bd4[_0x211e85(0xf9)][_0x211e85(0x11e)]),'ack':!![]});if(_0x807290)executeAutomationAction(_0x435072);}}catch(_0x3e2c0a){_0x435072[_0x211e85(0xaa)][_0x211e85(0x103)](_0x211e85(0xc9)+_0x3e2c0a[_0x211e85(0xfb)]);}}async function createDailyDigest(_0x22700d,_0x4c3ffc){const _0x1d5f51=a0_0x15239d;if(!_0x22700d[_0x1d5f51(0x100)])return;if(!canCallApi()){await _0x22700d[_0x1d5f51(0xa5)](LTM_DP_STATUS,{'val':_0x1d5f51(0xdc),'ack':!![]});return;}await _0x22700d[_0x1d5f51(0xa5)](LTM_DP_STATUS,{'val':_0x1d5f51(0x108),'ack':!![]});if(!_0x22700d['geminiModel']||_0x22700d[_0x1d5f51(0xf4)][_0x1d5f51(0xbc)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x22700d[_0x1d5f51(0xa5)](LTM_DP_STATUS,{'val':_0x1d5f51(0xf8),'ack':!![]});return;}const _0xa06ec2=JSON[_0x1d5f51(0x94)](JSON[_0x1d5f51(0xe9)](_0x22700d['rawEventLog'])),_0xc8980f=_0xa06ec2[_0x1d5f51(0xbc)],_0x43b42a=_0x1d5f51(0x10e)+JSON[_0x1d5f51(0xe9)](_0xa06ec2);try{updateApiTimestamp();const _0x486225=await _0x22700d[_0x1d5f51(0xd7)][_0x1d5f51(0x117)](_0x43b42a),_0x26a47c=JSON[_0x1d5f51(0x94)](_0x486225[_0x1d5f51(0xa4)]['text']()[_0x1d5f51(0xc5)](/```json|```/g,'')[_0x1d5f51(0xfd)]()),_0x23ff95={'timestamp':new Date()['toISOString'](),'eventCount':_0xc8980f,'summary':_0x26a47c['summary']||_0x1d5f51(0x8e),'activityLevel':_0x26a47c['activityLevel']||_0x1d5f51(0xa2),'systemMode':_0x22700d['currentSystemMode']};_0x22700d['dailyDigests']['push'](_0x23ff95);const _0x1335c7=_0x22700d[_0x1d5f51(0xe0)]['ltmLtbWindowDays']||0x3c;_0x22700d[_0x1d5f51(0x87)][_0x1d5f51(0xbc)]>_0x1335c7&&_0x22700d[_0x1d5f51(0x87)]['splice'](0x0,_0x22700d['dailyDigests'][_0x1d5f51(0xbc)]-_0x1335c7);await _0x22700d['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x22700d['dailyDigests']),'ack':!![]}),_0x22700d['rawEventLog']=[],await _0x22700d['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x1d5f51(0xe9)](_0x22700d[_0x1d5f51(0xf4)]),'ack':!![]}),await _0x22700d['setStateAsync'](LTM_DP_STATUS,{'val':_0x1d5f51(0xe6),'ack':!![]});const _0x5e9639='üìÖ\x20Daily\x20Digest:\x0a'+_0x26a47c[_0x1d5f51(0x10d)]+'\x0aAktivit√§t:\x20'+_0x26a47c[_0x1d5f51(0x10b)];setup[_0x1d5f51(0xc2)](_0x22700d,_0x5e9639,![],![]);if(_0x22700d['isProVersion']&&_0x4c3ffc)_0x4c3ffc[_0x1d5f51(0xb3)](_0x22700d,'ANALYZE_HEALTH',{'digest':_0x23ff95});}catch(_0x2dfdeb){_0x22700d[_0x1d5f51(0xaa)][_0x1d5f51(0x103)](_0x2dfdeb['message']);}}async function runBaselineDriftAnalysis(_0x1ca3d9){const _0x56c96d=a0_0x15239d;if(!_0x1ca3d9['isProVersion']||!_0x1ca3d9[_0x56c96d(0xd7)])return;if(!canCallApi())return;const _0x100143=_0x1ca3d9[_0x56c96d(0xe0)][_0x56c96d(0xc0)]||0xe;if(_0x1ca3d9[_0x56c96d(0x87)][_0x56c96d(0xbc)]<_0x100143+0x7){await _0x1ca3d9[_0x56c96d(0xa5)](_0x56c96d(0x11c),{'val':_0x56c96d(0xca),'ack':!![]});return;}const _0x5dbd08=_0x1ca3d9[_0x56c96d(0x87)][_0x56c96d(0x109)](-_0x100143),_0x52aba3=_0x1ca3d9[_0x56c96d(0x87)]['slice'](0x0,_0x1ca3d9[_0x56c96d(0x87)][_0x56c96d(0xbc)]-_0x100143),_0x5be848=_0x56c96d(0x8d)+JSON[_0x56c96d(0xe9)](_0x52aba3)+_0x56c96d(0xeb)+JSON[_0x56c96d(0xe9)](_0x5dbd08);try{updateApiTimestamp();const _0x3b039d=await _0x1ca3d9[_0x56c96d(0xd7)]['generateContent'](_0x5be848),_0x3c5442=JSON[_0x56c96d(0x94)](_0x3b039d[_0x56c96d(0xa4)][_0x56c96d(0xd5)]()[_0x56c96d(0xc5)](/```json|```/g,'')[_0x56c96d(0xfd)]());_0x3c5442[_0x56c96d(0xe1)]&&(await _0x1ca3d9[_0x56c96d(0xa5)](_0x56c96d(0x11c),{'val':_0x3c5442['baselineDrift'],'ack':!![]}),await _0x1ca3d9[_0x56c96d(0xa5)](_0x56c96d(0xd0),{'val':_0x3c5442[_0x56c96d(0x10f)],'ack':!![]}),await _0x1ca3d9['setStateAsync'](_0x56c96d(0x113),{'val':Date[_0x56c96d(0x11b)](),'ack':!![]}));}catch(_0x561c20){}}function a0_0x3fbe(){const _0x1a8959=['getForeignStateAsync','2-digit','Gemini\x20Error:\x20','N/A\x20(Learning)','@google/generative-ai','.Current.WeatherText','name','setDate','eventHistory','LTM.driftAnalysis.driftDetails','KI\x20offline\x20(Fallback)','weatherInstance','KI-Fehler\x20(Fallback)','analysis.health.geminiDay','text','Traffic-Schutz\x20(Auto-Approved)','geminiModel','analysis.isAlert','LTM.processingStatus','join','üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','Skipped\x20(Traffic)',').\x20Sending\x20notification...','exports','9kgCowZ','config','baselineDrift',',\x20Wetter:\x20','\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20','.\x20ANWESEND:\x20','78QdgDzZ','Success','analysis.analysisHistory','.forecast.current.temperature','stringify','LTM.rawEventLog','\x0aSTB:\x20','analysis.activitySummary','.\x20SYSTEM_MODE:\x20','392282WMCOwu','¬∞C,\x20','\x20√ºbersprungen\x20(Auto-Approved).','Wetterdaten\x20nicht\x20abrufbar','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20','rawEventLog','getDate','filter','Keine\x20Daten\x20f√ºr\x20die\x20Nacht\x20aufgezeichnet\x20(Sensoren\x20ruhig).','Skipped\x20(No\x20AI\x20or\x20Data)','automationProposal','analysis.automation.patternDetected','message','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','trim','.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20(','.\x20EVENTS:\x20','isProVersion','Analysiere\x20diese\x20Events\x20der\x20NACHT\x20(22:00-08:00).\x20War\x20der\x20Schlaf\x20ruhig?\x20Gab\x20es\x20Badg√§nge?\x20Antwort\x20kurz\x20f√ºr\x20den\x20besorgten\x20Sohn\x20(max\x202\x20S√§tze).','520YzRLhT','error','livingContext','alertReason','%)\x20nach\x20\x22','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','Started...','slice','decision','activityLevel','approved','summary','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','driftDetails','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','lastAlertState','ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.','LTM.driftAnalysis.lastCheck','pop',',\x20Lichtverh√§ltnisse:\x20','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','generateContent','NIGHT','analysis.automation.targetValue','(((.+)+)+)+$','now','LTM.driftAnalysis.baselineDrift','analysis.automation.description','targetValue','7396788FhDoYx','./setup','val','dailyDigests','search','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','analysis.alertReason','\x0a\x20\x20\x20\x20ANTWORT-STIL:\x20Sachlich,\x20beruhigend,\x20pr√§zise.\x20Keine\x20Floskeln.\x0a\x20\x20\x20\x20','Keine\x20Details.','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','Digest','13390426OdRLeJ','models/gemini-flash-latest','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','getStateAsync','timestamp','parse','reason','analysis.automation.targetId','Health\x20Report\x20Error:\x20','getTime',')\x20generated.','\x20->\x20','üåÖ\x20Briefing\x20generated\x20(Length:\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','analysis.health.geminiNight','analysisHistory','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','Analysiere\x20diese\x20Events\x20des\x20TAGES\x20(08:00-Jetzt).\x20Aktivit√§t?\x20Mahlzeiten?\x20Haust√ºr?\x20Antwort\x20kurz\x20f√ºr\x20den\x20besorgten\x20Sohn\x20(max\x202\x20S√§tze).','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','normal','6768tDSemW','response','setStateAsync','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','detected','10pUqRFl','analysis.lastResult','log','Sicherheit\x20geht\x20vor.','setForeignStateAsync','4586024VHIeuC','LTM.dailyDigests','.forecast.current.state','analysis.automation.autoApply','Bisher\x20keine\x20Aktivit√§t\x20seit\x2008:00\x20Uhr\x20verzeichnet.','debug','send','info','3899934PqUxiH','.Current.IsNight','generic','map','toLocaleTimeString','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','3565380RBaRMT','length','setHours','description','toString','ltmStbWindowDays','useWeather','sendNotification','Tag','warn','replace','Unbekannt'];a0_0x3fbe=function(){return _0x1a8959;};return a0_0x3fbe();}async function executeAutomationAction(_0x53bf81){const _0x4232a5=a0_0x15239d;try{const _0x4f98d7=await _0x53bf81[_0x4232a5(0x92)](_0x4232a5(0x96)),_0x234174=await _0x53bf81[_0x4232a5(0x92)](_0x4232a5(0x119));if(_0x4f98d7&&_0x4f98d7[_0x4232a5(0x86)]&&_0x234174){const _0x66dfa8=_0x4f98d7[_0x4232a5(0x86)];let _0x2b8793=_0x234174[_0x4232a5(0x86)];try{_0x2b8793=JSON[_0x4232a5(0x94)](_0x2b8793);}catch(_0x40dd8c){}_0x53bf81['log'][_0x4232a5(0xb4)]('ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x66dfa8+'\x20=\x20'+_0x2b8793),await _0x53bf81[_0x4232a5(0xac)](_0x66dfa8,_0x2b8793);}else _0x53bf81[_0x4232a5(0xaa)][_0x4232a5(0xc4)]('ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x2e407c){_0x53bf81[_0x4232a5(0xaa)][_0x4232a5(0x103)]('BUTLER\x20Execution\x20Error:\x20'+_0x2e407c[_0x4232a5(0xfb)]);}}async function sendMorningBriefing(_0x594ed0){const _0x108019=a0_0x15239d;if(!_0x594ed0[_0x108019(0xd7)]){_0x594ed0[_0x108019(0xaa)][_0x108019(0xc4)](_0x108019(0x112));return;}_0x594ed0[_0x108019(0xaa)][_0x108019(0xb4)](_0x108019(0xdb));try{updateApiTimestamp();const _0x23e55d=_0x108019(0x89),_0x853254=await _0x594ed0[_0x108019(0xd7)][_0x108019(0x117)](_0x23e55d),_0x3add24=_0x853254[_0x108019(0xa4)][_0x108019(0xd5)]();_0x594ed0[_0x108019(0xaa)][_0x108019(0xb4)](_0x108019(0x9b)+_0x3add24['length']+_0x108019(0xdd)),setup[_0x108019(0xc2)](_0x594ed0,'üåÖ\x20Morning\x20Briefing:\x0a'+_0x3add24);}catch(_0x4e9231){_0x594ed0[_0x108019(0xaa)][_0x108019(0x103)]('Briefing\x20Error:\x20'+_0x4e9231[_0x108019(0xfb)]);}}async function generateHealthReport(_0x34aefe,_0x3722f3){const _0x286090=a0_0x15239d;if(!_0x34aefe[_0x286090(0xd7)])return;const _0x196cfc=Date[_0x286090(0x11b)]();_0x196cfc-lastGlobalApiCall<0xbb8&&(_0x34aefe['log'][_0x286090(0xb2)]('ü§ñ\x20API\x20Cooldown.\x20Waiting\x202s...'),await new Promise(_0x4c29eb=>setTimeout(_0x4c29eb,0x7d0)));const _0x278c16=new Date();let _0x44bb7b=0x0,_0x456230=_0x278c16['getTime'](),_0x160411='';if(_0x3722f3==='NIGHT'){const _0x3d7a19=new Date(_0x278c16);_0x3d7a19[_0x286090(0xce)](_0x3d7a19[_0x286090(0xf5)]()-0x1),_0x3d7a19[_0x286090(0xbd)](0x16,0x0,0x0,0x0),_0x44bb7b=_0x3d7a19[_0x286090(0x98)]();const _0x386a7a=new Date(_0x278c16);_0x386a7a[_0x286090(0xbd)](0x8,0x0,0x0,0x0),_0x456230=_0x386a7a[_0x286090(0x98)](),_0x160411=_0x286090(0x101);}else{const _0xcd49b5=new Date(_0x278c16);_0xcd49b5[_0x286090(0xbd)](0x8,0x0,0x0,0x0),_0x44bb7b=_0xcd49b5[_0x286090(0x98)](),_0x160411=_0x286090(0xa0);}const _0x37258f=_0x34aefe[_0x286090(0xcf)][_0x286090(0xf6)](_0x3676d6=>_0x3676d6[_0x286090(0x93)]>=_0x44bb7b&&_0x3676d6[_0x286090(0x93)]<=_0x456230);if(_0x37258f[_0x286090(0xbc)]===0x0){const _0x507678=_0x3722f3===_0x286090(0x118)?_0x286090(0xf7):_0x286090(0xb1),_0x257099=_0x3722f3===_0x286090(0x118)?'analysis.health.geminiNight':_0x286090(0xd4);await _0x34aefe[_0x286090(0xa5)](_0x257099,{'val':_0x507678,'ack':!![]});return;}const _0x48fea8=_0x37258f[_0x286090(0xb8)](_0x5764cf=>new Date(_0x5764cf[_0x286090(0x93)])[_0x286090(0xb9)]([],{'hour':_0x286090(0xc8),'minute':'2-digit'})+'\x20'+_0x5764cf[_0x286090(0xcd)]+'\x20('+_0x5764cf['value']+')')[_0x286090(0xda)]('\x0a'),_0x1287ba='\x0a\x20\x20\x20\x20ROLLE:\x20Medizinischer\x20Assistent\x20f√ºr\x20AAL\x20(Ambient\x20Assisted\x20Living).\x0a\x20\x20\x20\x20AUFGABE:\x20'+_0x160411+'\x0a\x20\x20\x20\x20EVENTS:\x0a'+_0x48fea8+_0x286090(0x8b);try{updateApiTimestamp();const _0x7ecc04=await _0x34aefe[_0x286090(0xd7)]['generateContent'](_0x1287ba),_0x1545bd=_0x7ecc04[_0x286090(0xa4)][_0x286090(0xd5)](),_0x196c3f=_0x3722f3===_0x286090(0x118)?_0x286090(0x9d):_0x286090(0xd4);await _0x34aefe[_0x286090(0xa5)](_0x196c3f,{'val':_0x1545bd,'ack':!![]}),_0x34aefe['log']['info']('ü§ñ\x20Health\x20Report\x20('+_0x3722f3+_0x286090(0x99));}catch(_0x51b476){_0x34aefe[_0x286090(0xaa)]['error'](_0x286090(0x97)+_0x51b476[_0x286090(0xfb)]);}}module[a0_0x15239d(0xde)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler,'generateHealthReport':generateHealthReport};