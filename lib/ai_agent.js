const a0_0x41e558=a0_0x5e39;(function(_0x45f823,_0x262e73){const _0x1634f2=a0_0x5e39,_0x55bac4=_0x45f823();while(!![]){try{const _0x1dd6a9=-parseInt(_0x1634f2(0x111))/0x1*(parseInt(_0x1634f2(0x11c))/0x2)+-parseInt(_0x1634f2(0x130))/0x3*(parseInt(_0x1634f2(0x134))/0x4)+parseInt(_0x1634f2(0x103))/0x5*(parseInt(_0x1634f2(0x15c))/0x6)+parseInt(_0x1634f2(0x151))/0x7+parseInt(_0x1634f2(0x126))/0x8+parseInt(_0x1634f2(0x188))/0x9*(parseInt(_0x1634f2(0x120))/0xa)+-parseInt(_0x1634f2(0x152))/0xb;if(_0x1dd6a9===_0x262e73)break;else _0x55bac4['push'](_0x55bac4['shift']());}catch(_0x40e2d7){_0x55bac4['push'](_0x55bac4['shift']());}}}(a0_0x7a92,0xb392d));const a0_0x371aae=(function(){let _0x3a87e1=!![];return function(_0x40ff13,_0xac5ac5){const _0x45c86d=_0x3a87e1?function(){const _0x56c00a=a0_0x5e39;if(_0xac5ac5){const _0x2c6edb=_0xac5ac5[_0x56c00a(0x17b)](_0x40ff13,arguments);return _0xac5ac5=null,_0x2c6edb;}}:function(){};return _0x3a87e1=![],_0x45c86d;};}()),a0_0x24b4d1=a0_0x371aae(this,function(){const _0x11fea8=a0_0x5e39;return a0_0x24b4d1[_0x11fea8(0x101)]()[_0x11fea8(0x125)](_0x11fea8(0xf5))[_0x11fea8(0x101)]()['constructor'](a0_0x24b4d1)[_0x11fea8(0x125)](_0x11fea8(0xf5));});a0_0x24b4d1();'use strict';const {GoogleGenerativeAI}=require(a0_0x41e558(0x115)),setup=require(a0_0x41e558(0x12b)),GEMINI_MODEL='models/gemini-flash-latest',LTM_DP_DAILY_DIGESTS=a0_0x41e558(0x106),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_RAW_LOG=a0_0x41e558(0x153),LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,MIN_API_GAP_MS=0x4e20;let lastGlobalApiCall=0x0;const decisionCache={},CACHE_TTL_MS=0xf*0x3c*0x3e8,PERSONA_MAPPING={'generic':a0_0x41e558(0x12c),'senior_aal':a0_0x41e558(0x132),'family':a0_0x41e558(0x143),'single_comfort':a0_0x41e558(0x165),'security':a0_0x41e558(0x16c),'energy_saver':a0_0x41e558(0x121)};function canCallApi(){const _0x5c9c91=a0_0x41e558,_0x47c6df=Date[_0x5c9c91(0x13a)]();return _0x47c6df-lastGlobalApiCall>MIN_API_GAP_MS;}function updateApiTimestamp(){const _0x114f3d=a0_0x41e558;lastGlobalApiCall=Date[_0x114f3d(0x13a)]();}async function getWeatherContext(_0x162bc0){const _0x289119=a0_0x41e558;if(!_0x162bc0[_0x289119(0x145)][_0x289119(0x17c)]||!_0x162bc0[_0x289119(0x145)][_0x289119(0x13d)])return _0x289119(0xf3);try{const _0x423295=_0x162bc0[_0x289119(0x145)]['weatherInstance'];let _0x19f3a1=await _0x162bc0[_0x289119(0x10f)](_0x423295+'.Current.Temperature');if(!_0x19f3a1)_0x19f3a1=await _0x162bc0[_0x289119(0x10f)](_0x423295+_0x289119(0x118));let _0x103896=await _0x162bc0[_0x289119(0x10f)](_0x423295+'.Current.WeatherText');if(!_0x103896)_0x103896=await _0x162bc0[_0x289119(0x10f)](_0x423295+'.forecast.current.state');let _0x470188=_0x289119(0x116);const _0x1b6c49=await _0x162bc0[_0x289119(0x10f)](_0x423295+'.Current.IsNight');if(_0x1b6c49)_0x470188=_0x1b6c49[_0x289119(0x129)]?_0x289119(0x137):_0x289119(0xfb);if(_0x19f3a1&&_0x103896)return _0x19f3a1[_0x289119(0x129)]+'¬∞C,\x20'+_0x103896[_0x289119(0x129)]+_0x289119(0x177)+_0x470188;}catch(_0x329bcd){}return _0x289119(0x133);}function a0_0x5e39(_0x406a7d,_0x45cf72){const _0x40d612=a0_0x7a92();return a0_0x5e39=function(_0x24b4d1,_0x371aae){_0x24b4d1=_0x24b4d1-0xf1;let _0x7a9203=_0x40d612[_0x24b4d1];return _0x7a9203;},a0_0x5e39(_0x406a7d,_0x45cf72);}async function consultButler(_0xc300af,_0x57a5af,_0x1fae51,_0x5796a6){const _0x443c4c=a0_0x41e558;if(!_0xc300af['geminiModel'])return{'approved':!![],'reason':_0x443c4c(0x161)};const _0x31de79=Date[_0x443c4c(0x13a)]();if(decisionCache[_0x57a5af]&&_0x31de79-decisionCache[_0x57a5af][_0x443c4c(0x11d)]<CACHE_TTL_MS){const _0x2d8681=decisionCache[_0x57a5af][_0x443c4c(0x14e)];return _0xc300af[_0x443c4c(0x17a)][_0x443c4c(0xff)](_0x443c4c(0x173)+_0x57a5af+_0x443c4c(0xf9)+(_0x2d8681[_0x443c4c(0x112)]?'OK':'NO')+'\x20('+_0x2d8681[_0x443c4c(0x10e)]+')'),_0x2d8681;}if(!canCallApi())return _0xc300af[_0x443c4c(0x17a)][_0x443c4c(0xff)]('ü§ñ\x20Traffic\x20Schutz:\x20Anfrage\x20f√ºr\x20'+_0x57a5af+_0x443c4c(0x135)),{'approved':!![],'reason':_0x443c4c(0x109)};const _0x453c32=new Date()['toLocaleTimeString'](),_0xdb3542=await getWeatherContext(_0xc300af),_0x45cb28=PERSONA_MAPPING[_0xc300af[_0x443c4c(0x145)][_0x443c4c(0x172)]||_0x443c4c(0xf4)],_0x2e4c9d=_0x443c4c(0x155)+_0x453c32+_0x443c4c(0x13e)+_0xdb3542+'.\x0a\x20\x20\x20\x20EVENT:\x20Bewohner\x20geht\x20wahrscheinlich\x20('+(_0x5796a6*0x64)[_0x443c4c(0x16d)](0x0)+'%)\x20nach\x20\x22'+_0x57a5af+_0x443c4c(0x117)+_0x1fae51+'\x22\x20AN.\x0a\x20\x20\x20\x20STRATEGIE:\x20'+_0x45cb28+_0x443c4c(0x140);try{updateApiTimestamp();const _0x1faa3a=await _0xc300af[_0x443c4c(0x15d)][_0x443c4c(0x100)](_0x2e4c9d),_0x531526=_0x1faa3a[_0x443c4c(0x163)][_0x443c4c(0xf6)]()[_0x443c4c(0x183)](/```json|```/g,'')[_0x443c4c(0x14c)](),_0x249055=JSON[_0x443c4c(0x166)](_0x531526);return decisionCache[_0x57a5af]={'decision':_0x249055,'timestamp':_0x31de79},_0x249055;}catch(_0x14ceda){return _0xc300af[_0x443c4c(0x17a)][_0x443c4c(0x179)](_0x443c4c(0x15f)+_0x14ceda['message']),decisionCache[_0x57a5af]={'decision':{'approved':!![],'reason':_0x443c4c(0x156)},'timestamp':_0x31de79-(CACHE_TTL_MS-0xea60)},{'approved':!![],'reason':_0x443c4c(0x156)};}}async function runGeminiAnalysis(_0x1560fc,_0x1716eb=''){const _0xdb9fb0=a0_0x41e558;if(!_0x1560fc['geminiModel'])return;if(!canCallApi()){_0x1560fc[_0xdb9fb0(0x17a)]['debug'](_0xdb9fb0(0x141));return;}if(_0x1560fc[_0xdb9fb0(0x167)]['length']===0x0)return;const _0x4bb2bb=_0x1560fc[_0xdb9fb0(0x167)][_0xdb9fb0(0x113)](0x0,0xf),_0x440fc3=_0x1560fc[_0xdb9fb0(0x127)],_0x5833b1=PERSONA_MAPPING[_0x1560fc[_0xdb9fb0(0x145)][_0xdb9fb0(0x172)]||_0xdb9fb0(0xf4)],_0xe70c7e=_0x1560fc[_0xdb9fb0(0x145)][_0xdb9fb0(0x14b)]||_0xdb9fb0(0x182);let _0x1cf823=_0xdb9fb0(0x116);try{const _0x42e345=await _0x1560fc[_0xdb9fb0(0x16f)](_0xdb9fb0(0xfd));if(_0x42e345&&_0x42e345[_0xdb9fb0(0x129)])_0x1cf823=_0x42e345[_0xdb9fb0(0x129)];}catch(_0x5549dc){}let _0x5d2cfe=![];try{const _0x226c09=await _0x1560fc[_0xdb9fb0(0x16f)]('analysis.automation.autoApply');if(_0x226c09&&_0x226c09[_0xdb9fb0(0x129)])_0x5d2cfe=!![];}catch(_0x59bcbd){}const _0x2f7f42=_0xdb9fb0(0x16e)+_0x5833b1+_0xdb9fb0(0x131)+_0xe70c7e+_0xdb9fb0(0x110)+_0x440fc3+'.\x20ANWESEND:\x20'+_0x1cf823+_0xdb9fb0(0x11f)+JSON['stringify'](_0x4bb2bb)+'.\x20EMERGENCY:\x20'+_0x1716eb+_0xdb9fb0(0x17e);try{updateApiTimestamp();const _0x1b135a=await _0x1560fc[_0xdb9fb0(0x15d)][_0xdb9fb0(0x100)](_0x2f7f42),_0x17b9ca=JSON['parse'](_0x1b135a[_0xdb9fb0(0x163)][_0xdb9fb0(0xf6)]()[_0xdb9fb0(0x183)](/```json|```/g,'')[_0xdb9fb0(0x14c)]());await _0x1560fc[_0xdb9fb0(0x170)](_0xdb9fb0(0x102),{'val':JSON[_0xdb9fb0(0x15e)](_0x17b9ca),'ack':!![]});if(_0x17b9ca[_0xdb9fb0(0x185)])await _0x1560fc[_0xdb9fb0(0x170)]('analysis.activitySummary',{'val':_0x17b9ca[_0xdb9fb0(0x185)],'ack':!![]});const _0x31c288={'timestamp':Date[_0xdb9fb0(0x13a)](),'id':Date[_0xdb9fb0(0x13a)]()[_0xdb9fb0(0x101)](),'analysis':{'activity':{'summary':_0x17b9ca[_0xdb9fb0(0x185)],'isAlert':_0x17b9ca[_0xdb9fb0(0xf2)],'alertReason':_0x17b9ca[_0xdb9fb0(0x162)]},'comfort':{'automationProposal':_0x17b9ca[_0xdb9fb0(0x164)]}}};_0x1560fc[_0xdb9fb0(0x148)][_0xdb9fb0(0x144)](_0x31c288);if(_0x1560fc[_0xdb9fb0(0x148)][_0xdb9fb0(0x189)]>0x32)_0x1560fc[_0xdb9fb0(0x148)]['pop']();await _0x1560fc[_0xdb9fb0(0x170)](_0xdb9fb0(0x104),{'val':JSON[_0xdb9fb0(0x15e)](_0x1560fc[_0xdb9fb0(0x148)]),'ack':!![]});const _0x4ecf03=_0x17b9ca[_0xdb9fb0(0xf2)]||![];_0x4ecf03!==_0x1560fc[_0xdb9fb0(0x12f)]&&(await _0x1560fc[_0xdb9fb0(0x170)](_0xdb9fb0(0x184),{'val':_0x4ecf03,'ack':!![]}),_0x1560fc[_0xdb9fb0(0x12f)]=_0x4ecf03,_0x4ecf03&&(await _0x1560fc[_0xdb9fb0(0x170)]('analysis.alertReason',{'val':_0x17b9ca[_0xdb9fb0(0x162)],'ack':!![]}),setup[_0xdb9fb0(0x136)](_0x1560fc,_0xdb9fb0(0x174)+_0x17b9ca[_0xdb9fb0(0x162)],![],_0x17b9ca['isEmergency'])));if(_0x17b9ca['automationProposal']&&_0x17b9ca['automationProposal']['detected']){await _0x1560fc[_0xdb9fb0(0x170)](_0xdb9fb0(0x128),{'val':!![],'ack':!![]}),await _0x1560fc[_0xdb9fb0(0x170)]('analysis.automation.description',{'val':_0x17b9ca[_0xdb9fb0(0x164)][_0xdb9fb0(0x138)],'ack':!![]}),await _0x1560fc[_0xdb9fb0(0x170)](_0xdb9fb0(0x14f),{'val':_0x17b9ca['automationProposal'][_0xdb9fb0(0x18c)],'ack':!![]}),await _0x1560fc[_0xdb9fb0(0x170)](_0xdb9fb0(0x17d),{'val':JSON[_0xdb9fb0(0x15e)](_0x17b9ca[_0xdb9fb0(0x164)][_0xdb9fb0(0xfa)]),'ack':!![]});if(_0x5d2cfe)executeAutomationAction(_0x1560fc);}}catch(_0x5b5a10){_0x1560fc[_0xdb9fb0(0x17a)][_0xdb9fb0(0xf1)](_0xdb9fb0(0x11e)+_0x5b5a10[_0xdb9fb0(0x187)]);}}async function createDailyDigest(_0xe4d05,_0x5a423c){const _0x27a343=a0_0x41e558;if(!_0xe4d05[_0x27a343(0x146)])return;if(!canCallApi()){await _0xe4d05[_0x27a343(0x170)](LTM_DP_STATUS,{'val':'Skipped\x20(Traffic)','ack':!![]});return;}await _0xe4d05[_0x27a343(0x170)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0xe4d05[_0x27a343(0x15d)]||_0xe4d05[_0x27a343(0x122)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0xe4d05['setStateAsync'](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x5ca3c7=JSON[_0x27a343(0x166)](JSON['stringify'](_0xe4d05[_0x27a343(0x122)])),_0x2c3682=_0x5ca3c7[_0x27a343(0x189)],_0xd893f9=_0x27a343(0x12a)+JSON[_0x27a343(0x15e)](_0x5ca3c7);try{updateApiTimestamp();const _0x3dc252=await _0xe4d05[_0x27a343(0x15d)][_0x27a343(0x100)](_0xd893f9),_0x149c7e=JSON[_0x27a343(0x166)](_0x3dc252[_0x27a343(0x163)][_0x27a343(0xf6)]()[_0x27a343(0x183)](/```json|```/g,'')['trim']()),_0x14457c={'timestamp':new Date()['toISOString'](),'eventCount':_0x2c3682,'summary':_0x149c7e[_0x27a343(0x185)]||_0x27a343(0x13b),'activityLevel':_0x149c7e[_0x27a343(0x12d)]||_0x27a343(0x105),'systemMode':_0xe4d05[_0x27a343(0x127)]};_0xe4d05[_0x27a343(0x139)][_0x27a343(0x17f)](_0x14457c);const _0x489755=_0xe4d05['config']['ltmLtbWindowDays']||0x3c;_0xe4d05['dailyDigests'][_0x27a343(0x189)]>_0x489755&&_0xe4d05[_0x27a343(0x139)][_0x27a343(0x176)](0x0,_0xe4d05['dailyDigests'][_0x27a343(0x189)]-_0x489755);await _0xe4d05[_0x27a343(0x170)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0xe4d05[_0x27a343(0x139)]),'ack':!![]}),_0xe4d05['rawEventLog']=[],await _0xe4d05[_0x27a343(0x170)](LTM_DP_RAW_LOG,{'val':JSON[_0x27a343(0x15e)](_0xe4d05[_0x27a343(0x122)]),'ack':!![]}),await _0xe4d05[_0x27a343(0x170)](LTM_DP_STATUS,{'val':_0x27a343(0x160),'ack':!![]});const _0x530b2f=_0x27a343(0x10b)+_0x149c7e['summary']+'\x0aAktivit√§t:\x20'+_0x149c7e[_0x27a343(0x12d)];setup[_0x27a343(0x136)](_0xe4d05,_0x530b2f,![],![]);if(_0xe4d05[_0x27a343(0x146)]&&_0x5a423c)_0x5a423c[_0x27a343(0x123)](_0xe4d05,'ANALYZE_HEALTH',{'digest':_0x14457c});}catch(_0x3cd9c0){_0xe4d05['log'][_0x27a343(0xf1)](_0x3cd9c0[_0x27a343(0x187)]);}}async function runBaselineDriftAnalysis(_0x2ee6a8){const _0x355073=a0_0x41e558;if(!_0x2ee6a8['isProVersion']||!_0x2ee6a8[_0x355073(0x15d)])return;if(!canCallApi())return;const _0xf9ed61=_0x2ee6a8[_0x355073(0x145)][_0x355073(0x14d)]||0xe;if(_0x2ee6a8['dailyDigests']['length']<_0xf9ed61+0x7){await _0x2ee6a8[_0x355073(0x170)]('LTM.driftAnalysis.baselineDrift',{'val':_0x355073(0x169),'ack':!![]});return;}const _0x3b0873=_0x2ee6a8[_0x355073(0x139)][_0x355073(0x113)](-_0xf9ed61),_0x33a276=_0x2ee6a8[_0x355073(0x139)][_0x355073(0x113)](0x0,_0x2ee6a8['dailyDigests']['length']-_0xf9ed61),_0xb6a9b8=_0x355073(0x175)+JSON[_0x355073(0x15e)](_0x33a276)+_0x355073(0xfe)+JSON[_0x355073(0x15e)](_0x3b0873);try{updateApiTimestamp();const _0x4b2301=await _0x2ee6a8[_0x355073(0x15d)][_0x355073(0x100)](_0xb6a9b8),_0x454321=JSON[_0x355073(0x166)](_0x4b2301[_0x355073(0x163)][_0x355073(0xf6)]()[_0x355073(0x183)](/```json|```/g,'')[_0x355073(0x14c)]());_0x454321[_0x355073(0x114)]&&(await _0x2ee6a8[_0x355073(0x170)](_0x355073(0x124),{'val':_0x454321[_0x355073(0x114)],'ack':!![]}),await _0x2ee6a8[_0x355073(0x170)](_0x355073(0x10a),{'val':_0x454321['driftDetails'],'ack':!![]}),await _0x2ee6a8[_0x355073(0x170)](_0x355073(0x16a),{'val':Date[_0x355073(0x13a)](),'ack':!![]}));}catch(_0x4b16e4){}}async function executeAutomationAction(_0x3c1814){const _0x3a632a=a0_0x41e558;try{const _0x2e36e9=await _0x3c1814['getStateAsync']('analysis.automation.targetId'),_0x533df5=await _0x3c1814['getStateAsync'](_0x3a632a(0x17d));if(_0x2e36e9&&_0x2e36e9[_0x3a632a(0x129)]&&_0x533df5){const _0x19be8b=_0x2e36e9[_0x3a632a(0x129)];let _0x411ed4=_0x533df5[_0x3a632a(0x129)];try{_0x411ed4=JSON['parse'](_0x411ed4);}catch(_0x27fb03){}_0x3c1814[_0x3a632a(0x17a)][_0x3a632a(0x11b)](_0x3a632a(0x154)+_0x19be8b+_0x3a632a(0x171)+_0x411ed4),await _0x3c1814[_0x3a632a(0x13f)](_0x19be8b,_0x411ed4);}else _0x3c1814[_0x3a632a(0x17a)][_0x3a632a(0x179)](_0x3a632a(0x147));}catch(_0x30026d){_0x3c1814[_0x3a632a(0x17a)]['error'](_0x3a632a(0x18d)+_0x30026d[_0x3a632a(0x187)]);}}async function sendMorningBriefing(_0x5c1770){const _0x5e94ff=a0_0x41e558;if(!_0x5c1770[_0x5e94ff(0x15d)]){_0x5c1770[_0x5e94ff(0x17a)][_0x5e94ff(0x179)]('ü§ñ\x20Morning\x20Briefing\x20skipped:\x20No\x20Gemini\x20Model.');return;}_0x5c1770[_0x5e94ff(0x17a)][_0x5e94ff(0x11b)](_0x5e94ff(0x15a));try{updateApiTimestamp();const _0x174067=_0x5e94ff(0x10d),_0x385801=await _0x5c1770[_0x5e94ff(0x15d)][_0x5e94ff(0x100)](_0x174067),_0x55c328=_0x385801['response'][_0x5e94ff(0xf6)]();_0x5c1770['log'][_0x5e94ff(0x11b)](_0x5e94ff(0x14a)+_0x55c328[_0x5e94ff(0x189)]+_0x5e94ff(0xf8)),setup['sendNotification'](_0x5c1770,'üåÖ\x20Morning\x20Briefing:\x0a'+_0x55c328);}catch(_0x5c01fa){_0x5c1770['log'][_0x5e94ff(0xf1)](_0x5e94ff(0xf7)+_0x5c01fa[_0x5e94ff(0x187)]);}}async function generateHealthReport(_0x5ad87d,_0x392afa){const _0x33f68d=a0_0x41e558;if(!_0x5ad87d['geminiModel'])return;const _0x502165=Date[_0x33f68d(0x13a)]();_0x502165-lastGlobalApiCall<0xbb8&&(_0x5ad87d[_0x33f68d(0x17a)][_0x33f68d(0xff)](_0x33f68d(0x181)),await new Promise(_0x41bc31=>setTimeout(_0x41bc31,0x7d0)));const _0x4d6af3=new Date();let _0x390515=0x0,_0x3601a3=_0x4d6af3[_0x33f68d(0xfc)](),_0x572111='';if(_0x392afa===_0x33f68d(0x15b)){const _0x5980c3=new Date(_0x4d6af3);_0x5980c3[_0x33f68d(0x107)](_0x5980c3[_0x33f68d(0x157)]()-0x1),_0x5980c3[_0x33f68d(0x11a)](0x16,0x0,0x0,0x0),_0x390515=_0x5980c3[_0x33f68d(0xfc)]();const _0x30054e=new Date(_0x4d6af3);_0x30054e[_0x33f68d(0x11a)](0x8,0x0,0x0,0x0),_0x3601a3=_0x30054e[_0x33f68d(0xfc)](),_0x572111=_0x33f68d(0x178);}else{const _0x10e921=new Date(_0x4d6af3);_0x10e921[_0x33f68d(0x11a)](0x8,0x0,0x0,0x0),_0x390515=_0x10e921['getTime'](),_0x572111=_0x33f68d(0x186);}const _0x577f41=_0x5ad87d[_0x33f68d(0x167)]['filter'](_0x23e0d5=>_0x23e0d5[_0x33f68d(0x11d)]>=_0x390515&&_0x23e0d5[_0x33f68d(0x11d)]<=_0x3601a3);if(_0x577f41['length']===0x0){const _0x1381d4=_0x392afa===_0x33f68d(0x15b)?_0x33f68d(0x159):_0x33f68d(0x13c),_0x50737a=_0x392afa===_0x33f68d(0x15b)?_0x33f68d(0x142):_0x33f68d(0x12e);await _0x5ad87d[_0x33f68d(0x170)](_0x50737a,{'val':_0x1381d4,'ack':!![]});return;}const _0x4f0de2=_0x577f41[_0x33f68d(0x158)](_0x296121=>new Date(_0x296121[_0x33f68d(0x11d)])[_0x33f68d(0x180)]([],{'hour':_0x33f68d(0x168),'minute':_0x33f68d(0x168)})+'\x20'+_0x296121[_0x33f68d(0x18a)]+'\x20('+_0x296121[_0x33f68d(0x16b)]+')')[_0x33f68d(0x119)]('\x0a'),_0xa7c4d9='\x0a\x20\x20\x20\x20ROLLE:\x20Medizinischer\x20Assistent\x20f√ºr\x20AAL\x20(Ambient\x20Assisted\x20Living).\x0a\x20\x20\x20\x20AUFGABE:\x20'+_0x572111+_0x33f68d(0x18b)+_0x4f0de2+'\x0a\x20\x20\x20\x20ANTWORT-STIL:\x20Sachlich,\x20beruhigend,\x20pr√§zise.\x20Keine\x20Floskeln.\x0a\x20\x20\x20\x20';try{updateApiTimestamp();const _0x3a732d=await _0x5ad87d[_0x33f68d(0x15d)][_0x33f68d(0x100)](_0xa7c4d9),_0x3d2d3e=_0x3a732d[_0x33f68d(0x163)]['text'](),_0x1b3d02=_0x392afa==='NIGHT'?_0x33f68d(0x142):_0x33f68d(0x12e);await _0x5ad87d[_0x33f68d(0x170)](_0x1b3d02,{'val':_0x3d2d3e,'ack':!![]}),_0x5ad87d[_0x33f68d(0x17a)][_0x33f68d(0x11b)](_0x33f68d(0x150)+_0x392afa+_0x33f68d(0x149));}catch(_0x2c672b){_0x5ad87d[_0x33f68d(0x17a)]['error'](_0x33f68d(0x10c)+_0x2c672b[_0x33f68d(0x187)]);}}function a0_0x7a92(){const _0x2e15fe=['.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','push','toLocaleTimeString','ü§ñ\x20API\x20Cooldown.\x20Waiting\x202s...','Keine\x20Details.','replace','analysis.isAlert','summary','Analysiere\x20diese\x20Events\x20des\x20TAGES\x20(08:00-Jetzt).\x20Aktivit√§t?\x20Mahlzeiten?\x20Haust√ºr?\x20Antwort\x20kurz\x20f√ºr\x20den\x20besorgten\x20Sohn\x20(max\x202\x20S√§tze).','message','2741958jsTKjU','length','name','\x0a\x20\x20\x20\x20EVENTS:\x0a','targetId','BUTLER\x20Execution\x20Error:\x20','error','isAlert','Unbekannt\x20(Kein\x20Sensor)','generic','(((.+)+)+)+$','text','Briefing\x20Error:\x20',').\x20Sending\x20notification...','\x20->\x20','targetValue','Tag','getTime','system.presenceWho','\x0aSTB:\x20','debug','generateContent','toString','analysis.lastResult','3319805hWBIeB','analysis.analysisHistory','normal','LTM.dailyDigests','setDate','exports','Traffic-Schutz\x20(Auto-Approved)','LTM.driftAnalysis.driftDetails','üìÖ\x20Daily\x20Digest:\x0a','Health\x20Report\x20Error:\x20','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','reason','getForeignStateAsync','.\x20SYSTEM_MODE:\x20','1IxBzty','approved','slice','baselineDrift','@google/generative-ai','Unbekannt','\x22.\x0a\x20\x20\x20\x20AKTION:\x20Schalte\x20\x22','.forecast.current.temperature','join','setHours','info','918276XhpTAj','timestamp','Gemini\x20Error:\x20','.\x20EVENTS:\x20','30Qkfjco','PRIORIT√ÑT:\x20Energie\x20sparen.\x20Schalte\x20nur,\x20wenn\x20absolut\x20notwendig\x20(Dunkelheit).','rawEventLog','send','LTM.driftAnalysis.baselineDrift','search','11500712HbTlnm','currentSystemMode','analysis.automation.patternDetected','val','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','./setup','Entscheide\x20ausgewogen\x20zwischen\x20Komfort\x20und\x20Energie.','activityLevel','analysis.health.geminiDay','lastAlertState','1758OHoItQ','.\x20KONTEXT:\x20','PRIORIT√ÑT:\x20Sicherheit\x20und\x20Licht.\x20Schalte\x20lieber\x20einmal\x20zu\x20viel\x20als\x20zu\x20wenig.','Wetterdaten\x20nicht\x20abrufbar','2516BDOeUN','\x20√ºbersprungen\x20(Auto-Approved).','sendNotification','Nacht','description','dailyDigests','now','Digest','Bisher\x20keine\x20Aktivit√§t\x20seit\x2008:00\x20Uhr\x20verzeichnet.','weatherInstance',',\x20Wetter:\x20','setForeignStateAsync','\x0a\x20\x20\x20\x20FRAGE:\x20Ist\x20es\x20dunkel\x20genug\x20f√ºr\x20Licht?\x0a\x20\x20\x20\x20FORMAT:\x20{\x20\x22approved\x22:\x20boolean,\x20\x22reason\x22:\x20\x22kurzer\x20Grund\x22\x20}\x0a\x20\x20\x20\x20','ü§ñ\x20Autopilot\x20skipped\x20(Traffic\x20Protection\x20active).','analysis.health.geminiNight','Fokus\x20auf\x20Komfort\x20f√ºr\x20die\x20Familie.','unshift','config','isProVersion','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','analysisHistory',')\x20generated.','üåÖ\x20Briefing\x20generated\x20(Length:\x20','livingContext','trim','ltmStbWindowDays','decision','analysis.automation.targetId','ü§ñ\x20Health\x20Report\x20(','4312714XLEinE','30055674gCIPPe','LTM.rawEventLog','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','\x0a\x20\x20\x20\x20ROLLE:\x20Haus-Butler.\x0a\x20\x20\x20\x20SITUATION:\x20','KI-Fehler\x20(Fallback)','getDate','map','Keine\x20Daten\x20f√ºr\x20die\x20Nacht\x20aufgezeichnet\x20(Sensoren\x20ruhig).','üåÖ\x20Starting\x20Morning\x20Briefing\x20sequence\x20(Traffic\x20Check\x20bypassed)...','NIGHT','12vVvYbY','geminiModel','stringify','ü§ñ\x20Butler\x20Brain\x20Error:\x20','Success','KI\x20offline\x20(Fallback)','alertReason','response','automationProposal','Maximaler\x20Komfort,\x20Energie\x20ist\x20zweitrangig.','parse','eventHistory','2-digit','N/A\x20(Learning)','LTM.driftAnalysis.lastCheck','value','Sicherheit\x20geht\x20vor.','toFixed','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','getStateAsync','setStateAsync','\x20=\x20','aiPersona','ü§ñ\x20Butler\x20Cache\x20Hit:\x20','‚ö†Ô∏è\x20ALARM:\x20','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','splice',',\x20Lichtverh√§ltnisse:\x20','Analysiere\x20diese\x20Events\x20der\x20NACHT\x20(22:00-08:00).\x20War\x20der\x20Schlaf\x20ruhig?\x20Gab\x20es\x20Badg√§nge?\x20Antwort\x20kurz\x20f√ºr\x20den\x20besorgten\x20Sohn\x20(max\x202\x20S√§tze).','warn','log','apply','useWeather','analysis.automation.targetValue'];a0_0x7a92=function(){return _0x2e15fe;};return a0_0x7a92();}module[a0_0x41e558(0x108)]={'executeAutomationAction':executeAutomationAction,'createDailyDigest':createDailyDigest,'runBaselineDriftAnalysis':runBaselineDriftAnalysis,'sendMorningBriefing':sendMorningBriefing,'runGeminiAnalysis':runGeminiAnalysis,'consultButler':consultButler,'generateHealthReport':generateHealthReport};