function a2_0xc72a(){const _0xc40bcc=['error','pre_warn','610984FtTfzA','now','Unknown','default','ðŸ‘¼\x20Schutzengel:\x20Ãœberwache\x20','warn','(((.+)+)+)+$','1981240PSfpin','33825UEZSvt','\x20fÃ¼r\x20','1816bWMVWS','parse','analysis.safety.deadMan.alarmState','indexOf','toString','1007208GcFaZP','exports','constructor','[DeadMan]\x20','10xQMNZB','ðŸš¨\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20','./setup','ðŸ‘¼\x20Schutzengel-Frage:\x20','message','\x27.\x20Nicht\x20verbunden\x20mit\x20Ã¼berwachtem\x20\x27','9BzwgJE','[DeadMan]\x20Topology\x20check\x20failed:\x20','3269MLoowf','analysis.topology.structure','sendNotification','log','analysis.safety.deadMan.config','alarm','[DeadMan]\x20Ignoriere\x20Bewegung\x20in\x20\x27','\x27.\x20(Multi-Person\x20Filter)','analysis.safety.deadMan.active','apply','val','162700JXrPWR','setStateAsync','search','\x20Min.','info','toLowerCase','getStateAsync','4FjsMxs','480750ZuDgcX'];a2_0xc72a=function(){return _0xc40bcc;};return a2_0xc72a();}const a2_0x30a7ca=a2_0x5c82;(function(_0x2a5122,_0x4bcea0){const _0x17e72e=a2_0x5c82,_0x3319a5=_0x2a5122();while(!![]){try{const _0x38bdec=-parseInt(_0x17e72e(0xbf))/0x1+parseInt(_0x17e72e(0xac))/0x2*(-parseInt(_0x17e72e(0xa1))/0x3)+parseInt(_0x17e72e(0x95))/0x4*(-parseInt(_0x17e72e(0x96))/0x5)+parseInt(_0x17e72e(0xa8))/0x6+-parseInt(_0x17e72e(0xb4))/0x7*(-parseInt(_0x17e72e(0xa3))/0x8)+parseInt(_0x17e72e(0xb2))/0x9*(parseInt(_0x17e72e(0xa0))/0xa)+-parseInt(_0x17e72e(0x99))/0xb;if(_0x38bdec===_0x4bcea0)break;else _0x3319a5['push'](_0x3319a5['shift']());}catch(_0xacae26){_0x3319a5['push'](_0x3319a5['shift']());}}}(a2_0xc72a,0x18b70));const a2_0x46b33a=(function(){let _0x20502e=!![];return function(_0x651bf3,_0x12833f){const _0x3225e5=_0x20502e?function(){const _0x21c6a7=a2_0x5c82;if(_0x12833f){const _0x166ef1=_0x12833f[_0x21c6a7(0xbd)](_0x651bf3,arguments);return _0x12833f=null,_0x166ef1;}}:function(){};return _0x20502e=![],_0x3225e5;};}()),a2_0x4992f8=a2_0x46b33a(this,function(){const _0x5a358f=a2_0x5c82;return a2_0x4992f8['toString']()[_0x5a358f(0xc1)](_0x5a358f(0x9f))[_0x5a358f(0xa7)]()[_0x5a358f(0xaa)](a2_0x4992f8)[_0x5a358f(0xc1)]('(((.+)+)+)+$');});a2_0x4992f8();function a2_0x5c82(_0x192b4e,_0x27ef41){const _0x598f3c=a2_0xc72a();return a2_0x5c82=function(_0x4992f8,_0x46b33a){_0x4992f8=_0x4992f8-0x95;let _0xc72af=_0x598f3c[_0x4992f8];return _0xc72af;},a2_0x5c82(_0x192b4e,_0x27ef41);}'use strict';const setup=require(a2_0x30a7ca(0xae));let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};async function loadConfig(_0x1bbb1e){const _0x115b85=a2_0x30a7ca;try{const _0x1f3b59=await _0x1bbb1e['getStateAsync'](_0x115b85(0xb8));if(_0x1f3b59&&_0x1f3b59[_0x115b85(0xbe)])return JSON['parse'](_0x1f3b59['val']);}catch(_0x3cb8af){}return{};}async function isActive(_0x2f9a8a){const _0x4a0506=a2_0x30a7ca;try{const _0x4f0d55=await _0x2f9a8a[_0x4a0506(0xc5)](_0x4a0506(0xbc));return _0x4f0d55&&_0x4f0d55[_0x4a0506(0xbe)];}catch(_0x450ab6){return![];}}async function areRoomsConnected(_0x26c875,_0x2426b7,_0xa19294){const _0x38690c=a2_0x30a7ca;try{const _0x23303a=await _0x26c875[_0x38690c(0xc5)](_0x38690c(0xb5));if(!_0x23303a||!_0x23303a[_0x38690c(0xbe)])return!![];const _0x182bbe=JSON[_0x38690c(0xa4)](_0x23303a[_0x38690c(0xbe)]),{rooms:_0x3ab42c,matrix:_0x528d2e}=_0x182bbe;if(!_0x3ab42c||!_0x528d2e)return!![];const _0x6d96f9=_0x3ab42c[_0x38690c(0xa6)](_0x2426b7),_0xd744cb=_0x3ab42c[_0x38690c(0xa6)](_0xa19294);if(_0x6d96f9===-0x1||_0xd744cb===-0x1)return!![];const _0x131c91=_0x528d2e[_0x6d96f9][_0xd744cb]>0x0||_0x528d2e[_0xd744cb][_0x6d96f9]>0x0;return _0x131c91;}catch(_0x578be7){return _0x26c875[_0x38690c(0xb7)][_0x38690c(0x9e)](_0x38690c(0xb3)+_0x578be7[_0x38690c(0xb0)]),!![];}}async function updateLocation(_0x18df0a,_0x26045d){const _0x4ad78c=a2_0x30a7ca;if(!_0x26045d||_0x26045d===_0x4ad78c(0x9b))return;if(!await isActive(_0x18df0a)){resetTimer(_0x18df0a);return;}if(currentMonitoredRoom&&currentMonitoredRoom!==_0x26045d){const _0x4109c7=await areRoomsConnected(_0x18df0a,currentMonitoredRoom,_0x26045d);if(!_0x4109c7){_0x18df0a[_0x4ad78c(0xb7)][_0x4ad78c(0xc3)](_0x4ad78c(0xba)+_0x26045d+_0x4ad78c(0xb1)+currentMonitoredRoom+_0x4ad78c(0xbb));return;}resetTimer(_0x18df0a);}if(!currentMonitoredRoom){await _0x18df0a[_0x4ad78c(0xc0)]('analysis.safety.deadMan.currentRoom',{'val':_0x26045d,'ack':!![]});const _0x40489c=await loadConfig(_0x18df0a),_0x5b99ba=_0x26045d[_0x4ad78c(0xc4)]();let _0x55b63c=_0x40489c[_0x26045d]||_0x40489c[_0x5b99ba];if(!_0x55b63c)for(const _0x6b69af in DEFAULT_TIMEOUTS){if(_0x5b99ba['includes'](_0x6b69af)){_0x55b63c=DEFAULT_TIMEOUTS[_0x6b69af];break;}}if(!_0x55b63c&&_0x40489c['default'])_0x55b63c=_0x40489c[_0x4ad78c(0x9c)];if(!_0x55b63c)return;currentMonitoredRoom=_0x26045d,startTimer(_0x18df0a,_0x55b63c);}}function startTimer(_0x260105,_0x5e71a7){const _0x397ecc=a2_0x30a7ca;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x5e71a7*0x3c*0x3e8,startTime=Date[_0x397ecc(0x9a)](),alarmStage=0x0,_0x260105[_0x397ecc(0xb7)][_0x397ecc(0xc3)](_0x397ecc(0x9d)+currentMonitoredRoom+_0x397ecc(0xa2)+_0x5e71a7+_0x397ecc(0xc2)),_0x260105[_0x397ecc(0xc0)](_0x397ecc(0xa5),{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x260105),timeoutMs);}function resetTimer(_0x3d4e22){const _0x22d4c3=a2_0x30a7ca;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x3d4e22[_0x22d4c3(0xc0)](_0x22d4c3(0xa5),{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x2f9815){const _0x547f34=a2_0x30a7ca;alarmStage=0x1,await _0x2f9815[_0x547f34(0xc0)](_0x547f34(0xa5),{'val':_0x547f34(0x98),'ack':!![]});const _0x11e63f='â³\x20ACHTUNG:\x20UngewÃ¶hnlich\x20lange\x20InaktivitÃ¤t\x20in\x20'+currentMonitoredRoom+'.\x20Alles\x20in\x20Ordnung?';_0x2f9815['log'][_0x547f34(0x9e)]('[DeadMan]\x20'+_0x11e63f),await setup[_0x547f34(0xb6)](_0x2f9815,_0x547f34(0xaf)+_0x11e63f),activeTimer=setTimeout(()=>triggerAlarm(_0x2f9815),0x5*0x3c*0x3e8);}async function triggerAlarm(_0x926225){const _0x5904df=a2_0x30a7ca;alarmStage=0x2,await _0x926225[_0x5904df(0xc0)]('analysis.safety.deadMan.alarmState',{'val':_0x5904df(0xb9),'ack':!![]});const _0x35b3c5=_0x5904df(0xad)+currentMonitoredRoom+'!';_0x926225[_0x5904df(0xb7)][_0x5904df(0x97)](_0x5904df(0xab)+_0x35b3c5),await setup[_0x5904df(0xb6)](_0x926225,_0x35b3c5,![],!![]);}module[a2_0x30a7ca(0xa9)]={'updateLocation':updateLocation};