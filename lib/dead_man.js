const a2_0x3815b9=a2_0x5057;(function(_0x1495ff,_0x5bf188){const _0xb2645c=a2_0x5057,_0x42d558=_0x1495ff();while(!![]){try{const _0x1a5d36=-parseInt(_0xb2645c(0x16e))/0x1*(parseInt(_0xb2645c(0x16a))/0x2)+-parseInt(_0xb2645c(0x174))/0x3+-parseInt(_0xb2645c(0x17a))/0x4*(parseInt(_0xb2645c(0x161))/0x5)+-parseInt(_0xb2645c(0x184))/0x6+parseInt(_0xb2645c(0x170))/0x7*(-parseInt(_0xb2645c(0x169))/0x8)+parseInt(_0xb2645c(0x164))/0x9+parseInt(_0xb2645c(0x18b))/0xa;if(_0x1a5d36===_0x5bf188)break;else _0x42d558['push'](_0x42d558['shift']());}catch(_0x31c564){_0x42d558['push'](_0x42d558['shift']());}}}(a2_0x10e7,0xd3991));const a2_0x1f7c54=(function(){let _0x498a37=!![];return function(_0x2ff10b,_0x42ab01){const _0x33ec67=_0x498a37?function(){const _0xa157b4=a2_0x5057;if(_0x42ab01){const _0x15c8e7=_0x42ab01[_0xa157b4(0x177)](_0x2ff10b,arguments);return _0x42ab01=null,_0x15c8e7;}}:function(){};return _0x498a37=![],_0x33ec67;};}()),a2_0x48df17=a2_0x1f7c54(this,function(){const _0x414774=a2_0x5057;return a2_0x48df17['toString']()[_0x414774(0x165)](_0x414774(0x168))[_0x414774(0x186)]()[_0x414774(0x15c)](a2_0x48df17)[_0x414774(0x165)](_0x414774(0x168));});a2_0x48df17();'use strict';const setup=require(a2_0x3815b9(0x167));let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};async function loadConfig(_0x3bfad9){const _0x4811b4=a2_0x3815b9;try{const _0x257ae3=await _0x3bfad9[_0x4811b4(0x185)](_0x4811b4(0x187));if(_0x257ae3&&_0x257ae3[_0x4811b4(0x18a)])return JSON[_0x4811b4(0x181)](_0x257ae3[_0x4811b4(0x18a)]);}catch(_0x55d30c){}return{};}async function isActive(_0x384414){const _0x531d7c=a2_0x3815b9;try{const _0x3f8091=await _0x384414['getStateAsync'](_0x531d7c(0x16f));return _0x3f8091&&_0x3f8091[_0x531d7c(0x18a)];}catch(_0x483138){return![];}}async function areRoomsConnected(_0x3a5e99,_0x4ff86f,_0x4f6f91){const _0xcffcc2=a2_0x3815b9;try{const _0x3e2bc1=await _0x3a5e99[_0xcffcc2(0x185)](_0xcffcc2(0x17c));if(!_0x3e2bc1||!_0x3e2bc1[_0xcffcc2(0x18a)])return!![];const _0x25cd43=JSON[_0xcffcc2(0x181)](_0x3e2bc1[_0xcffcc2(0x18a)]),{rooms:_0x3c4d19,matrix:_0x3de4b2}=_0x25cd43;if(!_0x3c4d19||!_0x3de4b2)return!![];const _0x93c51e=_0x3c4d19[_0xcffcc2(0x17e)](_0x4ff86f),_0x83884a=_0x3c4d19[_0xcffcc2(0x17e)](_0x4f6f91);if(_0x93c51e===-0x1||_0x83884a===-0x1)return!![];const _0x3e50c7=_0x3de4b2[_0x93c51e][_0x83884a]>0x0||_0x3de4b2[_0x83884a][_0x93c51e]>0x0;return _0x3e50c7;}catch(_0xe10ecc){return _0x3a5e99[_0xcffcc2(0x163)]['warn']('[DeadMan]\x20Topology\x20check\x20failed:\x20'+_0xe10ecc[_0xcffcc2(0x175)]),!![];}}async function updateLocation(_0x175eb8,_0x4902b3){const _0x171875=a2_0x3815b9;if(!_0x4902b3||_0x4902b3===_0x171875(0x180))return;if(!await isActive(_0x175eb8)){resetTimer(_0x175eb8);return;}if(currentMonitoredRoom&&currentMonitoredRoom!==_0x4902b3){const _0x4e6f1b=await areRoomsConnected(_0x175eb8,currentMonitoredRoom,_0x4902b3);if(!_0x4e6f1b){_0x175eb8[_0x171875(0x163)][_0x171875(0x172)](_0x171875(0x183)+_0x4902b3+_0x171875(0x176)+currentMonitoredRoom+_0x171875(0x173));return;}resetTimer(_0x175eb8);}if(!currentMonitoredRoom){await _0x175eb8[_0x171875(0x15f)]('analysis.safety.deadMan.currentRoom',{'val':_0x4902b3,'ack':!![]});const _0x13b810=await loadConfig(_0x175eb8),_0x40975b=_0x4902b3[_0x171875(0x17f)]();let _0x3e652f=_0x13b810[_0x4902b3]||_0x13b810[_0x40975b];if(!_0x3e652f)for(const _0x236504 in DEFAULT_TIMEOUTS){if(_0x40975b[_0x171875(0x179)](_0x236504)){_0x3e652f=DEFAULT_TIMEOUTS[_0x236504];break;}}if(!_0x3e652f&&_0x13b810[_0x171875(0x17b)])_0x3e652f=_0x13b810[_0x171875(0x17b)];if(!_0x3e652f)return;currentMonitoredRoom=_0x4902b3,startTimer(_0x175eb8,_0x3e652f);}}function a2_0x10e7(){const _0x58c458=['\x27.\x20(Multi-Person\x20Filter)','2656617uXazfH','message','\x27.\x20Nicht\x20verbunden\x20mit\x20Ã¼berwachtem\x20\x27','apply','sendNotification','includes','124RDJnHK','default','analysis.topology.structure','[DeadMan]\x20','indexOf','toLowerCase','Unknown','parse','ðŸš¨\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20','[DeadMan]\x20Ignoriere\x20Bewegung\x20in\x20\x27','3571098fvsOYJ','getStateAsync','toString','analysis.safety.deadMan.config','exports','ðŸ‘¼\x20Schutzengel:\x20Ãœberwache\x20','val','43443940mSBxvS','constructor','now','error','setStateAsync','â³\x20ACHTUNG:\x20UngewÃ¶hnlich\x20lange\x20InaktivitÃ¤t\x20in\x20','121430oRALpF','\x20Min.','log','1423962tbhzvj','search','warn','./setup','(((.+)+)+)+$','405416sHhXLq','1542qTicWE','analysis.safety.deadMan.alarmState','ðŸ‘¼\x20Schutzengel-Frage:\x20','\x20fÃ¼r\x20','1293iopsWW','analysis.safety.deadMan.active','56nbrfNU','.\x20Alles\x20in\x20Ordnung?','info'];a2_0x10e7=function(){return _0x58c458;};return a2_0x10e7();}function a2_0x5057(_0x4dec95,_0x1f0c2c){const _0x3c30dd=a2_0x10e7();return a2_0x5057=function(_0x48df17,_0x1f7c54){_0x48df17=_0x48df17-0x15c;let _0x10e788=_0x3c30dd[_0x48df17];return _0x10e788;},a2_0x5057(_0x4dec95,_0x1f0c2c);}function startTimer(_0x176112,_0x516511){const _0x4b210c=a2_0x3815b9;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x516511*0x3c*0x3e8,startTime=Date[_0x4b210c(0x15d)](),alarmStage=0x0,_0x176112[_0x4b210c(0x163)][_0x4b210c(0x172)](_0x4b210c(0x189)+currentMonitoredRoom+_0x4b210c(0x16d)+_0x516511+_0x4b210c(0x162)),_0x176112['setStateAsync'](_0x4b210c(0x16b),{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x176112),timeoutMs);}function resetTimer(_0x523301){const _0x58d20f=a2_0x3815b9;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x523301[_0x58d20f(0x15f)](_0x58d20f(0x16b),{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x283c49){const _0x3d6c76=a2_0x3815b9;alarmStage=0x1,await _0x283c49['setStateAsync'](_0x3d6c76(0x16b),{'val':'pre_warn','ack':!![]});const _0x344101=_0x3d6c76(0x160)+currentMonitoredRoom+_0x3d6c76(0x171);_0x283c49[_0x3d6c76(0x163)][_0x3d6c76(0x166)](_0x3d6c76(0x17d)+_0x344101),await setup['sendNotification'](_0x283c49,_0x3d6c76(0x16c)+_0x344101),activeTimer=setTimeout(()=>triggerAlarm(_0x283c49),0x5*0x3c*0x3e8);}async function triggerAlarm(_0x422ca3){const _0x437171=a2_0x3815b9;alarmStage=0x2,await _0x422ca3[_0x437171(0x15f)]('analysis.safety.deadMan.alarmState',{'val':'alarm','ack':!![]});const _0x411e62=_0x437171(0x182)+currentMonitoredRoom+'!';_0x422ca3['log'][_0x437171(0x15e)](_0x437171(0x17d)+_0x411e62),await setup[_0x437171(0x178)](_0x422ca3,_0x411e62,![],!![]);}module[a2_0x3815b9(0x188)]={'updateLocation':updateLocation};