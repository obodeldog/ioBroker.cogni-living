const a2_0x4013f9=a2_0x542e;(function(_0x281762,_0x4775d3){const _0x1b8dfa=a2_0x542e,_0x4e1283=_0x281762();while(!![]){try{const _0x51dc5a=parseInt(_0x1b8dfa(0x1a9))/0x1+-parseInt(_0x1b8dfa(0x19c))/0x2*(parseInt(_0x1b8dfa(0x1ab))/0x3)+parseInt(_0x1b8dfa(0x198))/0x4+parseInt(_0x1b8dfa(0x199))/0x5+-parseInt(_0x1b8dfa(0x1a8))/0x6*(parseInt(_0x1b8dfa(0x1b6))/0x7)+parseInt(_0x1b8dfa(0x1aa))/0x8*(parseInt(_0x1b8dfa(0x1a4))/0x9)+-parseInt(_0x1b8dfa(0x1b7))/0xa;if(_0x51dc5a===_0x4775d3)break;else _0x4e1283['push'](_0x4e1283['shift']());}catch(_0x579173){_0x4e1283['push'](_0x4e1283['shift']());}}}(a2_0x3e6a,0x6805a));const a2_0x345b32=(function(){let _0x4c557c=!![];return function(_0x3737f1,_0x2dcc82){const _0x1131a2=_0x4c557c?function(){if(_0x2dcc82){const _0x28035b=_0x2dcc82['apply'](_0x3737f1,arguments);return _0x2dcc82=null,_0x28035b;}}:function(){};return _0x4c557c=![],_0x1131a2;};}()),a2_0x401b12=a2_0x345b32(this,function(){const _0x2192c2=a2_0x542e;return a2_0x401b12[_0x2192c2(0x1a6)]()[_0x2192c2(0x1a5)](_0x2192c2(0x1b5))[_0x2192c2(0x1a6)]()['constructor'](a2_0x401b12)['search'](_0x2192c2(0x1b5));});a2_0x401b12();'use strict';const setup=require(a2_0x4013f9(0x19e));let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};async function loadConfig(_0x4888e1){const _0x5aa643=a2_0x4013f9;try{const _0x1ce9a4=await _0x4888e1[_0x5aa643(0x192)]('analysis.safety.deadMan.config');if(_0x1ce9a4&&_0x1ce9a4['val'])return JSON['parse'](_0x1ce9a4[_0x5aa643(0x19b)]);}catch(_0x5c2e47){}return{};}function a2_0x3e6a(){const _0x28f46d=['analysis.safety.deadMan.alarmState','â³\x20ACHTUNG:\x20UngewÃ¶hnlich\x20lange\x20InaktivitÃ¤t\x20in\x20','default','(((.+)+)+)+$','7vvWGYe','8790100CNzgNp','indexOf','[DeadMan]\x20Topology\x20check\x20failed:\x20','ðŸ‘¼\x20Schutzengel-Frage:\x20','analysis.safety.deadMan.active','info','log','[DeadMan]\x20Ignoriere\x20Bewegung\x20in\x20\x27','getStateAsync','toLowerCase','Unknown','now','.\x20Alles\x20in\x20Ordnung?','ðŸ‘¼\x20Schutzengel:\x20Ãœberwache\x20','920976CUerMc','3614585UyGBdf','[DeadMan]\x20','val','4854sxiqwt','message','./setup','error','includes','\x20fÃ¼r\x20','exports','\x27.\x20(Multi-Person\x20Filter)','54pOUAHC','search','toString','analysis.safety.deadMan.currentRoom','2414058yhUohV','146403hFJjOh','1046712FjmblK','219jasabj','pre_warn','\x27.\x20Nicht\x20verbunden\x20mit\x20Ã¼berwachtem\x20\x27','sendNotification','warn','setStateAsync','ðŸš¨\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20'];a2_0x3e6a=function(){return _0x28f46d;};return a2_0x3e6a();}async function isActive(_0x443ffc){const _0x353154=a2_0x4013f9;try{const _0x3f5717=await _0x443ffc[_0x353154(0x192)](_0x353154(0x18e));return _0x3f5717&&_0x3f5717[_0x353154(0x19b)];}catch(_0x5024b9){return![];}}async function areRoomsConnected(_0x349f69,_0x23452b,_0xc32b48){const _0xd49058=a2_0x4013f9;try{const _0x59953b=await _0x349f69[_0xd49058(0x192)]('analysis.topology.structure');if(!_0x59953b||!_0x59953b[_0xd49058(0x19b)])return!![];const _0x3ace76=JSON['parse'](_0x59953b[_0xd49058(0x19b)]),{rooms:_0x359168,matrix:_0x22ec6b}=_0x3ace76;if(!_0x359168||!_0x22ec6b)return!![];const _0x4d0bfb=_0x359168['indexOf'](_0x23452b),_0x41b9ec=_0x359168[_0xd49058(0x1b8)](_0xc32b48);if(_0x4d0bfb===-0x1||_0x41b9ec===-0x1)return!![];const _0xc57805=_0x22ec6b[_0x4d0bfb][_0x41b9ec]>0x0||_0x22ec6b[_0x41b9ec][_0x4d0bfb]>0x0;return _0xc57805;}catch(_0xb83aa6){return _0x349f69[_0xd49058(0x190)][_0xd49058(0x1af)](_0xd49058(0x1b9)+_0xb83aa6[_0xd49058(0x19d)]),!![];}}async function updateLocation(_0x2186e2,_0x508b66){const _0x3cfbfd=a2_0x4013f9;if(!_0x508b66||_0x508b66===_0x3cfbfd(0x194))return;if(!await isActive(_0x2186e2)){resetTimer(_0x2186e2);return;}if(currentMonitoredRoom&&currentMonitoredRoom!==_0x508b66){const _0x5d6a3d=await areRoomsConnected(_0x2186e2,currentMonitoredRoom,_0x508b66);if(!_0x5d6a3d){_0x2186e2[_0x3cfbfd(0x190)]['info'](_0x3cfbfd(0x191)+_0x508b66+_0x3cfbfd(0x1ad)+currentMonitoredRoom+_0x3cfbfd(0x1a3));return;}resetTimer(_0x2186e2);}if(!currentMonitoredRoom){await _0x2186e2[_0x3cfbfd(0x1b0)](_0x3cfbfd(0x1a7),{'val':_0x508b66,'ack':!![]});const _0x33fe42=await loadConfig(_0x2186e2),_0xdcb217=_0x508b66[_0x3cfbfd(0x193)]();let _0x2ee488=_0x33fe42[_0x508b66]||_0x33fe42[_0xdcb217];if(!_0x2ee488)for(const _0x2eae26 in DEFAULT_TIMEOUTS){if(_0xdcb217[_0x3cfbfd(0x1a0)](_0x2eae26)){_0x2ee488=DEFAULT_TIMEOUTS[_0x2eae26];break;}}if(!_0x2ee488&&_0x33fe42['default'])_0x2ee488=_0x33fe42[_0x3cfbfd(0x1b4)];if(!_0x2ee488)return;currentMonitoredRoom=_0x508b66,startTimer(_0x2186e2,_0x2ee488);}}function startTimer(_0x52078c,_0xc51500){const _0x399329=a2_0x4013f9;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0xc51500*0x3c*0x3e8,startTime=Date[_0x399329(0x195)](),alarmStage=0x0,_0x52078c['log'][_0x399329(0x18f)](_0x399329(0x197)+currentMonitoredRoom+_0x399329(0x1a1)+_0xc51500+'\x20Min.'),_0x52078c[_0x399329(0x1b0)](_0x399329(0x1b2),{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x52078c),timeoutMs);}function a2_0x542e(_0x32e73a,_0x1ad6b6){const _0x973a04=a2_0x3e6a();return a2_0x542e=function(_0x401b12,_0x345b32){_0x401b12=_0x401b12-0x18d;let _0x3e6a69=_0x973a04[_0x401b12];return _0x3e6a69;},a2_0x542e(_0x32e73a,_0x1ad6b6);}function resetTimer(_0x4b3a05){const _0x3eec79=a2_0x4013f9;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x4b3a05[_0x3eec79(0x1b0)](_0x3eec79(0x1b2),{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x4ba484){const _0x13a160=a2_0x4013f9;alarmStage=0x1,await _0x4ba484[_0x13a160(0x1b0)](_0x13a160(0x1b2),{'val':_0x13a160(0x1ac),'ack':!![]});const _0x4504cc=_0x13a160(0x1b3)+currentMonitoredRoom+_0x13a160(0x196);_0x4ba484[_0x13a160(0x190)][_0x13a160(0x1af)]('[DeadMan]\x20'+_0x4504cc),await setup[_0x13a160(0x1ae)](_0x4ba484,_0x13a160(0x18d)+_0x4504cc),activeTimer=setTimeout(()=>triggerAlarm(_0x4ba484),0x5*0x3c*0x3e8);}async function triggerAlarm(_0x2fb3ab){const _0x184d24=a2_0x4013f9;alarmStage=0x2,await _0x2fb3ab['setStateAsync'](_0x184d24(0x1b2),{'val':'alarm','ack':!![]});const _0xcdf226=_0x184d24(0x1b1)+currentMonitoredRoom+'!';_0x2fb3ab[_0x184d24(0x190)][_0x184d24(0x19f)](_0x184d24(0x19a)+_0xcdf226),await setup['sendNotification'](_0x2fb3ab,_0xcdf226,![],!![]);}module[a2_0x4013f9(0x1a2)]={'updateLocation':updateLocation};