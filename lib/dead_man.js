const a2_0x1dc2a3=a2_0x3c58;(function(_0x3b49a6,_0x5a3539){const _0x4c4cb0=a2_0x3c58,_0x4731b5=_0x3b49a6();while(!![]){try{const _0x1083dd=-parseInt(_0x4c4cb0(0x169))/0x1+-parseInt(_0x4c4cb0(0x167))/0x2+-parseInt(_0x4c4cb0(0x153))/0x3+parseInt(_0x4c4cb0(0x14c))/0x4*(parseInt(_0x4c4cb0(0x159))/0x5)+-parseInt(_0x4c4cb0(0x173))/0x6*(-parseInt(_0x4c4cb0(0x163))/0x7)+-parseInt(_0x4c4cb0(0x16d))/0x8+-parseInt(_0x4c4cb0(0x16b))/0x9*(-parseInt(_0x4c4cb0(0x166))/0xa);if(_0x1083dd===_0x5a3539)break;else _0x4731b5['push'](_0x4731b5['shift']());}catch(_0x3adb78){_0x4731b5['push'](_0x4731b5['shift']());}}}(a2_0x3aed,0x405c5));const a2_0x12f44f=(function(){let _0x1f5b9d=!![];return function(_0x278040,_0x3a8861){const _0x45911a=_0x1f5b9d?function(){const _0x501dd2=a2_0x3c58;if(_0x3a8861){const _0x887ac7=_0x3a8861[_0x501dd2(0x168)](_0x278040,arguments);return _0x3a8861=null,_0x887ac7;}}:function(){};return _0x1f5b9d=![],_0x45911a;};}()),a2_0x9f08e=a2_0x12f44f(this,function(){const _0x4b4f40=a2_0x3c58;return a2_0x9f08e[_0x4b4f40(0x170)]()['search'](_0x4b4f40(0x150))[_0x4b4f40(0x170)]()['constructor'](a2_0x9f08e)[_0x4b4f40(0x14f)](_0x4b4f40(0x150));});a2_0x9f08e();'use strict';function a2_0x3c58(_0x27d4d9,_0x23ec4b){const _0x167b4c=a2_0x3aed();return a2_0x3c58=function(_0x9f08e,_0x12f44f){_0x9f08e=_0x9f08e-0x149;let _0x3aed72=_0x167b4c[_0x9f08e];return _0x3aed72;},a2_0x3c58(_0x27d4d9,_0x23ec4b);}const setup=require(a2_0x1dc2a3(0x161));let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};async function loadConfig(_0x17e35c){const _0x42602f=a2_0x1dc2a3;try{const _0x3a4bd4=await _0x17e35c[_0x42602f(0x15b)](_0x42602f(0x149));if(_0x3a4bd4&&_0x3a4bd4[_0x42602f(0x15a)])return JSON[_0x42602f(0x162)](_0x3a4bd4[_0x42602f(0x15a)]);}catch(_0x31af25){}return{};}async function isActive(_0x1144ed){const _0x4e24f1=a2_0x1dc2a3;try{const _0x72b78=await _0x1144ed[_0x4e24f1(0x15b)](_0x4e24f1(0x158));return _0x72b78&&_0x72b78[_0x4e24f1(0x15a)];}catch(_0x3751ee){return![];}}async function areRoomsConnected(_0xc3557a,_0x68aae6,_0x5860fe){const _0x2d627=a2_0x1dc2a3;try{const _0x1e322e=await _0xc3557a['getStateAsync'](_0x2d627(0x175));if(!_0x1e322e||!_0x1e322e['val'])return!![];const _0x21074d=JSON['parse'](_0x1e322e[_0x2d627(0x15a)]),{rooms:_0x38a7a5,matrix:_0x1eba7c}=_0x21074d;if(!_0x38a7a5||!_0x1eba7c)return!![];const _0x11db8d=_0x38a7a5[_0x2d627(0x171)](_0x68aae6),_0x241975=_0x38a7a5[_0x2d627(0x171)](_0x5860fe);if(_0x11db8d===-0x1||_0x241975===-0x1)return!![];const _0x7231b=_0x1eba7c[_0x11db8d][_0x241975]>0x0||_0x1eba7c[_0x241975][_0x11db8d]>0x0;return _0x7231b;}catch(_0xa322b2){return _0xc3557a[_0x2d627(0x16e)][_0x2d627(0x15f)](_0x2d627(0x15e)+_0xa322b2['message']),!![];}}async function updateLocation(_0x2f0f5c,_0x529a56){const _0x216050=a2_0x1dc2a3;if(!_0x529a56||_0x529a56==='Unknown')return;if(!await isActive(_0x2f0f5c)){resetTimer(_0x2f0f5c);return;}if(currentMonitoredRoom&&currentMonitoredRoom!==_0x529a56){const _0x162b28=await areRoomsConnected(_0x2f0f5c,currentMonitoredRoom,_0x529a56);if(!_0x162b28){_0x2f0f5c[_0x216050(0x16e)][_0x216050(0x16a)](_0x216050(0x16f)+_0x529a56+'\x27.\x20Nicht\x20verbunden\x20mit\x20√ºberwachtem\x20\x27'+currentMonitoredRoom+_0x216050(0x14b));return;}resetTimer(_0x2f0f5c);}if(!currentMonitoredRoom){await _0x2f0f5c[_0x216050(0x156)](_0x216050(0x14a),{'val':_0x529a56,'ack':!![]});const _0xfbb920=await loadConfig(_0x2f0f5c),_0x3b2d1b=_0x529a56[_0x216050(0x160)]();let _0xe181b7=_0xfbb920[_0x529a56]||_0xfbb920[_0x3b2d1b];if(!_0xe181b7)for(const _0x2ae583 in DEFAULT_TIMEOUTS){if(_0x3b2d1b['includes'](_0x2ae583)){_0xe181b7=DEFAULT_TIMEOUTS[_0x2ae583];break;}}if(!_0xe181b7&&_0xfbb920[_0x216050(0x154)])_0xe181b7=_0xfbb920[_0x216050(0x154)];if(!_0xe181b7)return;currentMonitoredRoom=_0x529a56,startTimer(_0x2f0f5c,_0xe181b7);}}function startTimer(_0x3ac9f1,_0x4c8a99){const _0x12da6d=a2_0x1dc2a3;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x4c8a99*0x3c*0x3e8,startTime=Date['now'](),alarmStage=0x0,_0x3ac9f1['log'][_0x12da6d(0x16a)](_0x12da6d(0x16c)+currentMonitoredRoom+_0x12da6d(0x176)+_0x4c8a99+_0x12da6d(0x164)),_0x3ac9f1[_0x12da6d(0x156)](_0x12da6d(0x15c),{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x3ac9f1),timeoutMs);}function resetTimer(_0x29cb20){const _0x3b582a=a2_0x1dc2a3;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x29cb20[_0x3b582a(0x156)](_0x3b582a(0x15c),{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x1514b5){const _0x562bbf=a2_0x1dc2a3;alarmStage=0x1,await _0x1514b5[_0x562bbf(0x156)](_0x562bbf(0x15c),{'val':_0x562bbf(0x174),'ack':!![]});const _0x1c62a6=_0x562bbf(0x155)+currentMonitoredRoom+_0x562bbf(0x151);_0x1514b5[_0x562bbf(0x16e)][_0x562bbf(0x15f)](_0x562bbf(0x14d)+_0x1c62a6),await setup[_0x562bbf(0x165)](_0x1514b5,_0x562bbf(0x152)+_0x1c62a6),activeTimer=setTimeout(()=>triggerAlarm(_0x1514b5),0x5*0x3c*0x3e8);}async function triggerAlarm(_0x33cf2f){const _0x31ea5c=a2_0x1dc2a3;alarmStage=0x2,await _0x33cf2f[_0x31ea5c(0x156)](_0x31ea5c(0x15c),{'val':_0x31ea5c(0x14e),'ack':!![]});const _0x3a915a=_0x31ea5c(0x172)+currentMonitoredRoom+'!';_0x33cf2f['log'][_0x31ea5c(0x157)](_0x31ea5c(0x14d)+_0x3a915a),await setup[_0x31ea5c(0x165)](_0x33cf2f,_0x3a915a,![],!![]);}module[a2_0x1dc2a3(0x15d)]={'updateLocation':updateLocation};function a2_0x3aed(){const _0x3e5b51=['analysis.topology.structure','\x20f√ºr\x20','analysis.safety.deadMan.config','analysis.safety.deadMan.currentRoom','\x27.\x20(Multi-Person\x20Filter)','19172iAGvOi','[DeadMan]\x20','alarm','search','(((.+)+)+)+$','.\x20Alles\x20in\x20Ordnung?','üëº\x20Schutzengel-Frage:\x20','340626XQEDFi','default','‚è≥\x20ACHTUNG:\x20Ungew√∂hnlich\x20lange\x20Inaktivit√§t\x20in\x20','setStateAsync','error','analysis.safety.deadMan.active','255TcKDaK','val','getStateAsync','analysis.safety.deadMan.alarmState','exports','[DeadMan]\x20Topology\x20check\x20failed:\x20','warn','toLowerCase','./setup','parse','455pRDFWb','\x20Min.','sendNotification','90NNGivK','480824oDibZS','apply','66519BrQvwu','info','750879mFUePs','üëº\x20Schutzengel:\x20√úberwache\x20','3754984XwbTRu','log','[DeadMan]\x20Ignoriere\x20Bewegung\x20in\x20\x27','toString','indexOf','üö®\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20','14598uIIcGE','pre_warn'];a2_0x3aed=function(){return _0x3e5b51;};return a2_0x3aed();}