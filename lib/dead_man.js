function a2_0x5dad(_0x489010,_0x1a44fc){const _0x495dbb=a2_0xdfed();return a2_0x5dad=function(_0x2c19b7,_0xb58ac1){_0x2c19b7=_0x2c19b7-0x14c;let _0xdfedcf=_0x495dbb[_0x2c19b7];return _0xdfedcf;},a2_0x5dad(_0x489010,_0x1a44fc);}const a2_0xc711a2=a2_0x5dad;function a2_0xdfed(){const _0x3b32a5=['\x20fÃ¼r\x20','3aduUXc','search','log','11850bGQJpg','3998ZeaPea','7929210FqwQpp','[DeadMan]\x20Ignoriere\x20Bewegung\x20in\x20\x27','apply','constructor','14OpptPh','5973576HrjCqi','message','[DeadMan]\x20','analysis.safety.deadMan.active','.\x20Alles\x20in\x20Ordnung?','1152TpmPPH','exports','includes','\x27.\x20(Multi-Person\x20Filter)','toString','29082229gOZQpv','sendNotification','default','2816572wnbsnu','now','toLowerCase','parse','ðŸ‘¼\x20Schutzengel-Frage:\x20','(((.+)+)+)+$','analysis.safety.deadMan.currentRoom','â³\x20ACHTUNG:\x20UngewÃ¶hnlich\x20lange\x20InaktivitÃ¤t\x20in\x20','./setup','\x20Min.','analysis.safety.deadMan.alarmState','setStateAsync','Unknown','indexOf','warn','getStateAsync','info','9072099koOToT','analysis.safety.deadMan.config','val','pre_warn','154FuVUYh'];a2_0xdfed=function(){return _0x3b32a5;};return a2_0xdfed();}(function(_0x348f2a,_0xa1a5fe){const _0x3a9592=a2_0x5dad,_0x2be369=_0x348f2a();while(!![]){try{const _0x1a1fcb=-parseInt(_0x3a9592(0x156))/0x1*(parseInt(_0x3a9592(0x150))/0x2)+-parseInt(_0x3a9592(0x152))/0x3*(parseInt(_0x3a9592(0x169))/0x4)+parseInt(_0x3a9592(0x155))/0x5*(-parseInt(_0x3a9592(0x161))/0x6)+parseInt(_0x3a9592(0x15b))/0x7*(parseInt(_0x3a9592(0x15c))/0x8)+-parseInt(_0x3a9592(0x14c))/0x9+-parseInt(_0x3a9592(0x157))/0xa+parseInt(_0x3a9592(0x166))/0xb;if(_0x1a1fcb===_0xa1a5fe)break;else _0x2be369['push'](_0x2be369['shift']());}catch(_0xe4910c){_0x2be369['push'](_0x2be369['shift']());}}}(a2_0xdfed,0xd4398));const a2_0xb58ac1=(function(){let _0x1885c4=!![];return function(_0xcadf93,_0x2e6768){const _0x534fc3=_0x1885c4?function(){const _0x1de1c6=a2_0x5dad;if(_0x2e6768){const _0x3a13c9=_0x2e6768[_0x1de1c6(0x159)](_0xcadf93,arguments);return _0x2e6768=null,_0x3a13c9;}}:function(){};return _0x1885c4=![],_0x534fc3;};}()),a2_0x2c19b7=a2_0xb58ac1(this,function(){const _0x145fa5=a2_0x5dad;return a2_0x2c19b7[_0x145fa5(0x165)]()[_0x145fa5(0x153)](_0x145fa5(0x16e))[_0x145fa5(0x165)]()[_0x145fa5(0x15a)](a2_0x2c19b7)[_0x145fa5(0x153)](_0x145fa5(0x16e));});a2_0x2c19b7();'use strict';const setup=require(a2_0xc711a2(0x171));let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};async function loadConfig(_0x582fe8){const _0xb64e1e=a2_0xc711a2;try{const _0x3bc84d=await _0x582fe8[_0xb64e1e(0x178)](_0xb64e1e(0x14d));if(_0x3bc84d&&_0x3bc84d[_0xb64e1e(0x14e)])return JSON[_0xb64e1e(0x16c)](_0x3bc84d[_0xb64e1e(0x14e)]);}catch(_0x5cc55b){}return{};}async function isActive(_0x2fbe5d){const _0x5a4d85=a2_0xc711a2;try{const _0x200a62=await _0x2fbe5d[_0x5a4d85(0x178)](_0x5a4d85(0x15f));return _0x200a62&&_0x200a62[_0x5a4d85(0x14e)];}catch(_0x3b6983){return![];}}async function areRoomsConnected(_0x2d6237,_0x481c10,_0x291ed9){const _0x225555=a2_0xc711a2;try{const _0x5ee17a=await _0x2d6237[_0x225555(0x178)]('analysis.topology.structure');if(!_0x5ee17a||!_0x5ee17a['val'])return!![];const _0x55bb64=JSON['parse'](_0x5ee17a[_0x225555(0x14e)]),{rooms:_0x1a238e,matrix:_0x1a8fae}=_0x55bb64;if(!_0x1a238e||!_0x1a8fae)return!![];const _0x3eb30c=_0x1a238e[_0x225555(0x176)](_0x481c10),_0x4ad6c2=_0x1a238e[_0x225555(0x176)](_0x291ed9);if(_0x3eb30c===-0x1||_0x4ad6c2===-0x1)return!![];const _0x329799=_0x1a8fae[_0x3eb30c][_0x4ad6c2]>0x0||_0x1a8fae[_0x4ad6c2][_0x3eb30c]>0x0;return _0x329799;}catch(_0x41b489){return _0x2d6237[_0x225555(0x154)][_0x225555(0x177)]('[DeadMan]\x20Topology\x20check\x20failed:\x20'+_0x41b489[_0x225555(0x15d)]),!![];}}async function updateLocation(_0x1c20da,_0x36be88){const _0x9377a3=a2_0xc711a2;if(!_0x36be88||_0x36be88===_0x9377a3(0x175))return;if(!await isActive(_0x1c20da)){resetTimer(_0x1c20da);return;}if(currentMonitoredRoom&&currentMonitoredRoom!==_0x36be88){const _0x2527e7=await areRoomsConnected(_0x1c20da,currentMonitoredRoom,_0x36be88);if(!_0x2527e7){_0x1c20da[_0x9377a3(0x154)][_0x9377a3(0x179)](_0x9377a3(0x158)+_0x36be88+'\x27.\x20Nicht\x20verbunden\x20mit\x20Ã¼berwachtem\x20\x27'+currentMonitoredRoom+_0x9377a3(0x164));return;}resetTimer(_0x1c20da);}if(!currentMonitoredRoom){await _0x1c20da[_0x9377a3(0x174)](_0x9377a3(0x16f),{'val':_0x36be88,'ack':!![]});const _0x3974cd=await loadConfig(_0x1c20da),_0x462996=_0x36be88[_0x9377a3(0x16b)]();let _0x2b8eeb=_0x3974cd[_0x36be88]||_0x3974cd[_0x462996];if(!_0x2b8eeb)for(const _0x4daee2 in DEFAULT_TIMEOUTS){if(_0x462996[_0x9377a3(0x163)](_0x4daee2)){_0x2b8eeb=DEFAULT_TIMEOUTS[_0x4daee2];break;}}if(!_0x2b8eeb&&_0x3974cd[_0x9377a3(0x168)])_0x2b8eeb=_0x3974cd[_0x9377a3(0x168)];if(!_0x2b8eeb)return;currentMonitoredRoom=_0x36be88,startTimer(_0x1c20da,_0x2b8eeb);}}function startTimer(_0x4eb4a3,_0x268897){const _0x506fac=a2_0xc711a2;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x268897*0x3c*0x3e8,startTime=Date[_0x506fac(0x16a)](),alarmStage=0x0,_0x4eb4a3[_0x506fac(0x154)][_0x506fac(0x179)]('ðŸ‘¼\x20Schutzengel:\x20Ãœberwache\x20'+currentMonitoredRoom+_0x506fac(0x151)+_0x268897+_0x506fac(0x172)),_0x4eb4a3['setStateAsync']('analysis.safety.deadMan.alarmState',{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x4eb4a3),timeoutMs);}function resetTimer(_0x16503d){const _0x4604a6=a2_0xc711a2;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x16503d[_0x4604a6(0x174)]('analysis.safety.deadMan.alarmState',{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x510f99){const _0x530e4e=a2_0xc711a2;alarmStage=0x1,await _0x510f99[_0x530e4e(0x174)](_0x530e4e(0x173),{'val':_0x530e4e(0x14f),'ack':!![]});const _0x1aea71=_0x530e4e(0x170)+currentMonitoredRoom+_0x530e4e(0x160);_0x510f99['log'][_0x530e4e(0x177)](_0x530e4e(0x15e)+_0x1aea71),await setup[_0x530e4e(0x167)](_0x510f99,_0x530e4e(0x16d)+_0x1aea71),activeTimer=setTimeout(()=>triggerAlarm(_0x510f99),0x5*0x3c*0x3e8);}async function triggerAlarm(_0xe714a4){const _0x4ee45a=a2_0xc711a2;alarmStage=0x2,await _0xe714a4[_0x4ee45a(0x174)](_0x4ee45a(0x173),{'val':'alarm','ack':!![]});const _0x5b5b01='ðŸš¨\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20'+currentMonitoredRoom+'!';_0xe714a4['log']['error']('[DeadMan]\x20'+_0x5b5b01),await setup[_0x4ee45a(0x167)](_0xe714a4,_0x5b5b01,![],!![]);}module[a2_0xc711a2(0x162)]={'updateLocation':updateLocation};