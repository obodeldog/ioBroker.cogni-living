const a2_0x2893f9=a2_0x5e57;(function(_0x57e81c,_0x261d84){const _0x460c19=a2_0x5e57,_0x416f2c=_0x57e81c();while(!![]){try{const _0x5e36e1=-parseInt(_0x460c19(0x72))/0x1+-parseInt(_0x460c19(0x68))/0x2+parseInt(_0x460c19(0x87))/0x3*(-parseInt(_0x460c19(0x80))/0x4)+parseInt(_0x460c19(0x73))/0x5+parseInt(_0x460c19(0x6d))/0x6*(-parseInt(_0x460c19(0x8c))/0x7)+-parseInt(_0x460c19(0x75))/0x8*(-parseInt(_0x460c19(0x88))/0x9)+parseInt(_0x460c19(0x78))/0xa;if(_0x5e36e1===_0x261d84)break;else _0x416f2c['push'](_0x416f2c['shift']());}catch(_0x380bff){_0x416f2c['push'](_0x416f2c['shift']());}}}(a2_0x49eb,0x778a9));const a2_0x9ed0e8=(function(){let _0x220f83=!![];return function(_0x2d5b17,_0x41a9d9){const _0x5629c1=_0x220f83?function(){const _0xbf9b99=a2_0x5e57;if(_0x41a9d9){const _0x27b6ca=_0x41a9d9[_0xbf9b99(0x69)](_0x2d5b17,arguments);return _0x41a9d9=null,_0x27b6ca;}}:function(){};return _0x220f83=![],_0x5629c1;};}()),a2_0x4072dd=a2_0x9ed0e8(this,function(){const _0x505f1f=a2_0x5e57;return a2_0x4072dd[_0x505f1f(0x83)]()['search'](_0x505f1f(0x70))['toString']()[_0x505f1f(0x7c)](a2_0x4072dd)['search'](_0x505f1f(0x70));});function a2_0x49eb(){const _0x1ef4e7=['18pKtdyr','log','\x27.\x20Nicht\x20verbunden\x20mit\x20Ã¼berwachtem\x20\x27','info','392zmopUq','[DeadMan]\x20Topology\x20check\x20failed:\x20','getStateAsync','parse','sendNotification','now','\x27.\x20(Multi-Person\x20Filter)','alarm','1655816CYRgUA','apply','message','analysis.topology.structure','analysis.safety.deadMan.currentRoom','7116ksSOkZ','pre_warn','analysis.safety.deadMan.alarmState','(((.+)+)+)+$','val','731755jhghUD','3388545ahPVAG','error','2807776kwrZyH','./setup','ðŸ‘¼\x20Schutzengel:\x20Ãœberwache\x20','10203450vCCVLE','indexOf','setStateAsync','default','constructor','toLowerCase','ðŸ‘¼\x20Schutzengel-Frage:\x20','ðŸš¨\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20','29924xMUaYD','[DeadMan]\x20','analysis.safety.deadMan.config','toString','Unknown','â³\x20ACHTUNG:\x20UngewÃ¶hnlich\x20lange\x20InaktivitÃ¤t\x20in\x20','warn','114hwiNGH'];a2_0x49eb=function(){return _0x1ef4e7;};return a2_0x49eb();}a2_0x4072dd();'use strict';const setup=require(a2_0x2893f9(0x76));let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};async function loadConfig(_0x374f0f){const _0x1b2e95=a2_0x2893f9;try{const _0x3d214f=await _0x374f0f[_0x1b2e95(0x8e)](_0x1b2e95(0x82));if(_0x3d214f&&_0x3d214f[_0x1b2e95(0x71)])return JSON[_0x1b2e95(0x8f)](_0x3d214f[_0x1b2e95(0x71)]);}catch(_0x4eacb1){}return{};}async function isActive(_0xd06e8a){const _0x41ecc9=a2_0x2893f9;try{const _0x3fb97d=await _0xd06e8a[_0x41ecc9(0x8e)]('analysis.safety.deadMan.active');return _0x3fb97d&&_0x3fb97d[_0x41ecc9(0x71)];}catch(_0x148b71){return![];}}async function areRoomsConnected(_0x3cac17,_0x4e66bc,_0x51aebe){const _0x3f80cd=a2_0x2893f9;try{const _0x3cddf0=await _0x3cac17[_0x3f80cd(0x8e)](_0x3f80cd(0x6b));if(!_0x3cddf0||!_0x3cddf0[_0x3f80cd(0x71)])return!![];const _0x576f57=JSON[_0x3f80cd(0x8f)](_0x3cddf0[_0x3f80cd(0x71)]),{rooms:_0x334626,matrix:_0x7100d0}=_0x576f57;if(!_0x334626||!_0x7100d0)return!![];const _0x292508=_0x334626[_0x3f80cd(0x79)](_0x4e66bc),_0x5b26ff=_0x334626[_0x3f80cd(0x79)](_0x51aebe);if(_0x292508===-0x1||_0x5b26ff===-0x1)return!![];const _0x1f5a15=_0x7100d0[_0x292508][_0x5b26ff]>0x0||_0x7100d0[_0x5b26ff][_0x292508]>0x0;return _0x1f5a15;}catch(_0x2eb902){return _0x3cac17[_0x3f80cd(0x89)][_0x3f80cd(0x86)](_0x3f80cd(0x8d)+_0x2eb902[_0x3f80cd(0x6a)]),!![];}}async function updateLocation(_0xb8f5a,_0x434ae2){const _0x156a8f=a2_0x2893f9;if(!_0x434ae2||_0x434ae2===_0x156a8f(0x84))return;if(!await isActive(_0xb8f5a)){resetTimer(_0xb8f5a);return;}if(currentMonitoredRoom&&currentMonitoredRoom!==_0x434ae2){const _0x2df3f4=await areRoomsConnected(_0xb8f5a,currentMonitoredRoom,_0x434ae2);if(!_0x2df3f4){_0xb8f5a[_0x156a8f(0x89)]['info']('[DeadMan]\x20Ignoriere\x20Bewegung\x20in\x20\x27'+_0x434ae2+_0x156a8f(0x8a)+currentMonitoredRoom+_0x156a8f(0x66));return;}resetTimer(_0xb8f5a);}if(!currentMonitoredRoom){await _0xb8f5a[_0x156a8f(0x7a)](_0x156a8f(0x6c),{'val':_0x434ae2,'ack':!![]});const _0x403962=await loadConfig(_0xb8f5a),_0x13358a=_0x434ae2[_0x156a8f(0x7d)]();let _0x4e10b2=_0x403962[_0x434ae2]||_0x403962[_0x13358a];if(!_0x4e10b2)for(const _0xb78d32 in DEFAULT_TIMEOUTS){if(_0x13358a['includes'](_0xb78d32)){_0x4e10b2=DEFAULT_TIMEOUTS[_0xb78d32];break;}}if(!_0x4e10b2&&_0x403962[_0x156a8f(0x7b)])_0x4e10b2=_0x403962[_0x156a8f(0x7b)];if(!_0x4e10b2)return;currentMonitoredRoom=_0x434ae2,startTimer(_0xb8f5a,_0x4e10b2);}}function startTimer(_0x35c6c1,_0x39beba){const _0x4c4224=a2_0x2893f9;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x39beba*0x3c*0x3e8,startTime=Date[_0x4c4224(0x65)](),alarmStage=0x0,_0x35c6c1[_0x4c4224(0x89)][_0x4c4224(0x8b)](_0x4c4224(0x77)+currentMonitoredRoom+'\x20fÃ¼r\x20'+_0x39beba+'\x20Min.'),_0x35c6c1[_0x4c4224(0x7a)](_0x4c4224(0x6f),{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x35c6c1),timeoutMs);}function resetTimer(_0xd9514a){const _0x4e05a7=a2_0x2893f9;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0xd9514a[_0x4e05a7(0x7a)](_0x4e05a7(0x6f),{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x16b1e8){const _0x3732de=a2_0x2893f9;alarmStage=0x1,await _0x16b1e8[_0x3732de(0x7a)](_0x3732de(0x6f),{'val':_0x3732de(0x6e),'ack':!![]});const _0x5939b3=_0x3732de(0x85)+currentMonitoredRoom+'.\x20Alles\x20in\x20Ordnung?';_0x16b1e8[_0x3732de(0x89)][_0x3732de(0x86)](_0x3732de(0x81)+_0x5939b3),await setup[_0x3732de(0x90)](_0x16b1e8,_0x3732de(0x7e)+_0x5939b3),activeTimer=setTimeout(()=>triggerAlarm(_0x16b1e8),0x5*0x3c*0x3e8);}async function triggerAlarm(_0x236cf1){const _0x3bb0d=a2_0x2893f9;alarmStage=0x2,await _0x236cf1[_0x3bb0d(0x7a)](_0x3bb0d(0x6f),{'val':_0x3bb0d(0x67),'ack':!![]});const _0x2c5c7d=_0x3bb0d(0x7f)+currentMonitoredRoom+'!';_0x236cf1['log'][_0x3bb0d(0x74)]('[DeadMan]\x20'+_0x2c5c7d),await setup[_0x3bb0d(0x90)](_0x236cf1,_0x2c5c7d,![],!![]);}function a2_0x5e57(_0x18321f,_0x16603e){const _0x3b5d5c=a2_0x49eb();return a2_0x5e57=function(_0x4072dd,_0x9ed0e8){_0x4072dd=_0x4072dd-0x65;let _0x49eba6=_0x3b5d5c[_0x4072dd];return _0x49eba6;},a2_0x5e57(_0x18321f,_0x16603e);}module['exports']={'updateLocation':updateLocation};