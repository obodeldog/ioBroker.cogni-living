const a2_0x1178c8=a2_0x11ce;(function(_0x4c0906,_0x3975bb){const _0x11cbff=a2_0x11ce,_0x30afa9=_0x4c0906();while(!![]){try{const _0xfe6330=-parseInt(_0x11cbff(0x1cb))/0x1+-parseInt(_0x11cbff(0x1d0))/0x2*(-parseInt(_0x11cbff(0x1ea))/0x3)+-parseInt(_0x11cbff(0x1ce))/0x4*(parseInt(_0x11cbff(0x1e9))/0x5)+parseInt(_0x11cbff(0x1d8))/0x6*(parseInt(_0x11cbff(0x1f1))/0x7)+-parseInt(_0x11cbff(0x1cf))/0x8+parseInt(_0x11cbff(0x1df))/0x9+-parseInt(_0x11cbff(0x1ec))/0xa*(-parseInt(_0x11cbff(0x1e8))/0xb);if(_0xfe6330===_0x3975bb)break;else _0x30afa9['push'](_0x30afa9['shift']());}catch(_0x52b57b){_0x30afa9['push'](_0x30afa9['shift']());}}}(a2_0x55d2,0xe1247));const a2_0x4c95a0=(function(){let _0x39d66f=!![];return function(_0x39eb41,_0x35fb2a){const _0x2ae095=_0x39d66f?function(){const _0x51388f=a2_0x11ce;if(_0x35fb2a){const _0x1227f4=_0x35fb2a[_0x51388f(0x1db)](_0x39eb41,arguments);return _0x35fb2a=null,_0x1227f4;}}:function(){};return _0x39d66f=![],_0x2ae095;};}()),a2_0x3d76ad=a2_0x4c95a0(this,function(){const _0x2a31a9=a2_0x11ce;return a2_0x3d76ad[_0x2a31a9(0x1e6)]()['search'](_0x2a31a9(0x1d2))[_0x2a31a9(0x1e6)]()[_0x2a31a9(0x1d7)](a2_0x3d76ad)[_0x2a31a9(0x1ca)]('(((.+)+)+)+$');});a2_0x3d76ad();'use strict';const setup=require('./setup');function a2_0x11ce(_0x375276,_0x27acb7){const _0x4519bf=a2_0x55d2();return a2_0x11ce=function(_0x3d76ad,_0x4c95a0){_0x3d76ad=_0x3d76ad-0x1c8;let _0x55d24e=_0x4519bf[_0x3d76ad];return _0x55d24e;},a2_0x11ce(_0x375276,_0x27acb7);}let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c,'default':0x78};async function loadConfig(_0x296430){const _0x24400f=a2_0x11ce;try{const _0x32a036=await _0x296430[_0x24400f(0x1d1)](_0x24400f(0x1d5));if(_0x32a036&&_0x32a036[_0x24400f(0x1e5)])return JSON[_0x24400f(0x1e4)](_0x32a036[_0x24400f(0x1e5)]);}catch(_0x20279d){}return{};}async function isActive(_0x3d921a){const _0xf1aab4=a2_0x11ce;try{const _0x11fa73=await _0x3d921a[_0xf1aab4(0x1d1)](_0xf1aab4(0x1d4));return _0x11fa73&&_0x11fa73[_0xf1aab4(0x1e5)];}catch(_0x58153b){return![];}}async function updateLocation(_0x30a98a,_0x13e8f1){const _0x22cabf=a2_0x11ce;if(!_0x13e8f1||_0x13e8f1===_0x22cabf(0x1e0))return;if(!await isActive(_0x30a98a)){resetTimer(_0x30a98a);return;}const _0x56dc97=await loadConfig(_0x30a98a),_0x58aeef=_0x13e8f1['toLowerCase']();if(currentMonitoredRoom!==_0x13e8f1){resetTimer(_0x30a98a),currentMonitoredRoom=_0x13e8f1,await _0x30a98a[_0x22cabf(0x1de)]('analysis.safety.deadMan.currentRoom',{'val':_0x13e8f1,'ack':!![]});let _0x174722=_0x56dc97[_0x13e8f1]||_0x56dc97[_0x58aeef];if(!_0x174722)for(const _0x1c5040 in DEFAULT_TIMEOUTS){if(_0x58aeef[_0x22cabf(0x1ee)](_0x1c5040)){_0x174722=DEFAULT_TIMEOUTS[_0x1c5040];break;}}if(!_0x174722&&!_0x56dc97[_0x22cabf(0x1c9)]){_0x30a98a['log'][_0x22cabf(0x1f0)]('[DeadMan]\x20Kein\x20Timer\x20f√ºr\x20'+_0x13e8f1+_0x22cabf(0x1dd));return;}_0x174722=_0x174722||DEFAULT_TIMEOUTS[_0x22cabf(0x1c9)],startTimer(_0x30a98a,_0x174722);}}function startTimer(_0x4079ef,_0x53c47f){const _0x186e63=a2_0x11ce;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x53c47f*0x3c*0x3e8,startTime=Date[_0x186e63(0x1d6)](),alarmStage=0x0,_0x4079ef['log'][_0x186e63(0x1d9)]('üëº\x20Schutzengel:\x20√úberwache\x20'+currentMonitoredRoom+_0x186e63(0x1da)+_0x53c47f+_0x186e63(0x1ef)),_0x4079ef[_0x186e63(0x1de)](_0x186e63(0x1f2),{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x4079ef),timeoutMs);}function resetTimer(_0x38fddc){const _0x28cd35=a2_0x11ce;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x38fddc[_0x28cd35(0x1de)](_0x28cd35(0x1f2),{'val':'ok','ack':!![]}),_0x38fddc[_0x28cd35(0x1de)](_0x28cd35(0x1eb),{'val':'','ack':!![]});}async function triggerPreWarn(_0x1aead2){const _0x7012da=a2_0x11ce;alarmStage=0x1,await _0x1aead2[_0x7012da(0x1de)](_0x7012da(0x1f2),{'val':_0x7012da(0x1c8),'ack':!![]});const _0x43b67c=_0x7012da(0x1e7)+currentMonitoredRoom+_0x7012da(0x1e3);_0x1aead2[_0x7012da(0x1e1)]['warn']('[DeadMan]\x20'+_0x43b67c),await setup['sendNotification'](_0x1aead2,_0x7012da(0x1e2)+_0x43b67c),activeTimer=setTimeout(()=>triggerAlarm(_0x1aead2),0x5*0x3c*0x3e8);}async function triggerAlarm(_0x678b87){const _0x5a3e02=a2_0x11ce;alarmStage=0x2,await _0x678b87[_0x5a3e02(0x1de)](_0x5a3e02(0x1f2),{'val':'alarm','ack':!![]});const _0x1a9ea8=_0x5a3e02(0x1dc)+currentMonitoredRoom+'!';_0x678b87[_0x5a3e02(0x1e1)][_0x5a3e02(0x1cc)](_0x5a3e02(0x1ed)+_0x1a9ea8),await setup[_0x5a3e02(0x1d3)](_0x678b87,_0x1a9ea8,![],!![]);}function a2_0x55d2(){const _0x28f52b=['üëº\x20Schutzengel-Frage:\x20','.\x20Alles\x20in\x20Ordnung?','parse','val','toString','‚è≥\x20ACHTUNG:\x20Ungew√∂hnlich\x20lange\x20Inaktivit√§t\x20in\x20','28505246grELGn','1163185XjBDHJ','90JVMCjO','analysis.safety.deadMan.currentRoom','10BUGzzH','[DeadMan]\x20','includes','\x20Min.','debug','574vNBYTo','analysis.safety.deadMan.alarmState','pre_warn','default','search','1522734jxSWfa','error','exports','28ejjibw','10249088zFCPmq','20012CVTWpw','getStateAsync','(((.+)+)+)+$','sendNotification','analysis.safety.deadMan.active','analysis.safety.deadMan.config','now','constructor','130002WsvmCN','info','\x20f√ºr\x20','apply','üö®\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20','\x20(Ignoriert)','setStateAsync','6176268BqlSeM','Unknown','log'];a2_0x55d2=function(){return _0x28f52b;};return a2_0x55d2();}module[a2_0x1178c8(0x1cd)]={'updateLocation':updateLocation};