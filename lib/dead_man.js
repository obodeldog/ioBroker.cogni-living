(function(_0x170cc8,_0x7d7fe9){const _0x246629=a2_0x4e17,_0x180218=_0x170cc8();while(!![]){try{const _0x1c4e6a=parseInt(_0x246629(0x108))/0x1*(parseInt(_0x246629(0x111))/0x2)+-parseInt(_0x246629(0xeb))/0x3+-parseInt(_0x246629(0x101))/0x4*(-parseInt(_0x246629(0xec))/0x5)+-parseInt(_0x246629(0xee))/0x6+-parseInt(_0x246629(0xfb))/0x7*(parseInt(_0x246629(0xed))/0x8)+-parseInt(_0x246629(0x103))/0x9*(-parseInt(_0x246629(0x110))/0xa)+-parseInt(_0x246629(0xf0))/0xb;if(_0x1c4e6a===_0x7d7fe9)break;else _0x180218['push'](_0x180218['shift']());}catch(_0x320b63){_0x180218['push'](_0x180218['shift']());}}}(a2_0x4a7e,0xdc1ee));const a2_0xf7e404=(function(){let _0x3ccac9=!![];return function(_0x42f16e,_0x13448c){const _0x3e1790=_0x3ccac9?function(){const _0x2bc401=a2_0x4e17;if(_0x13448c){const _0x387f23=_0x13448c[_0x2bc401(0xfd)](_0x42f16e,arguments);return _0x13448c=null,_0x387f23;}}:function(){};return _0x3ccac9=![],_0x3e1790;};}()),a2_0x4c1625=a2_0xf7e404(this,function(){const _0x36a81f=a2_0x4e17;return a2_0x4c1625[_0x36a81f(0xf3)]()[_0x36a81f(0xea)](_0x36a81f(0x107))[_0x36a81f(0xf3)]()[_0x36a81f(0x102)](a2_0x4c1625)['search'](_0x36a81f(0x107));});a2_0x4c1625();'use strict';const setup=require('./setup');let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;function a2_0x4e17(_0x43ba35,_0x47f244){const _0x4a2cb9=a2_0x4a7e();return a2_0x4e17=function(_0x4c1625,_0xf7e404){_0x4c1625=_0x4c1625-0xea;let _0x4a7e04=_0x4a2cb9[_0x4c1625];return _0x4a7e04;},a2_0x4e17(_0x43ba35,_0x47f244);}const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};async function loadConfig(_0x370e60){const _0x5313f3=a2_0x4e17;try{const _0x19dae4=await _0x370e60[_0x5313f3(0x10c)](_0x5313f3(0xf6));if(_0x19dae4&&_0x19dae4[_0x5313f3(0x10e)])return JSON['parse'](_0x19dae4[_0x5313f3(0x10e)]);}catch(_0x2eaac6){}return{};}async function isActive(_0xb4d202){const _0x4fa378=a2_0x4e17;try{const _0x36eb83=await _0xb4d202[_0x4fa378(0x10c)](_0x4fa378(0xf4));return _0x36eb83&&_0x36eb83[_0x4fa378(0x10e)];}catch(_0x5eccbc){return![];}}function a2_0x4a7e(){const _0x4ced6f=['val','now','1461070UfGYHR','1162446ljaelQ','.\x20Alles\x20in\x20Ordnung?','search','3884040CjetWo','1485mYqIRW','2504UNPPJw','3148332yXcidf','â³\x20ACHTUNG:\x20UngewÃ¶hnlich\x20lange\x20InaktivitÃ¤t\x20in\x20','16447002RibyMI','ðŸ‘¼\x20Schutzengel:\x20Ãœberwache\x20','info','toString','analysis.safety.deadMan.active','Unknown','analysis.safety.deadMan.config','sendNotification','default','analysis.safety.deadMan.currentRoom','error','1211tpJOlo','\x20Min.','apply','toLowerCase','debug','setStateAsync','18244Xcrovj','constructor','108TlCucB','analysis.safety.deadMan.alarmState','ðŸ‘¼\x20Schutzengel-Frage:\x20','warn','(((.+)+)+)+$','2TiTFdi','\x20fÃ¼r\x20','[DeadMan]\x20','alarm','getStateAsync','log'];a2_0x4a7e=function(){return _0x4ced6f;};return a2_0x4a7e();}async function updateLocation(_0x138a0b,_0x42a8b8){const _0xed8148=a2_0x4e17;if(!_0x42a8b8||_0x42a8b8===_0xed8148(0xf5))return;if(!await isActive(_0x138a0b)){resetTimer(_0x138a0b);return;}if(currentMonitoredRoom!==_0x42a8b8){resetTimer(_0x138a0b),await _0x138a0b[_0xed8148(0x100)](_0xed8148(0xf9),{'val':_0x42a8b8,'ack':!![]});const _0x4c9238=await loadConfig(_0x138a0b),_0x18a55d=_0x42a8b8[_0xed8148(0xfe)]();let _0x55b369=_0x4c9238[_0x42a8b8]||_0x4c9238[_0x18a55d];if(!_0x55b369)for(const _0x5ac4c3 in DEFAULT_TIMEOUTS){if(_0x18a55d['includes'](_0x5ac4c3)){_0x55b369=DEFAULT_TIMEOUTS[_0x5ac4c3];break;}}!_0x55b369&&_0x4c9238[_0xed8148(0xf8)]&&(_0x55b369=_0x4c9238['default']);if(!_0x55b369){_0x138a0b[_0xed8148(0x10d)][_0xed8148(0xff)](_0xed8148(0x10a)+_0x42a8b8+'\x20ist\x20sicher\x20(Kein\x20Timer).\x20Ãœberwachung\x20pausiert.');return;}currentMonitoredRoom=_0x42a8b8,startTimer(_0x138a0b,_0x55b369);}}function startTimer(_0x26b2aa,_0x3c5a0c){const _0x4eac36=a2_0x4e17;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x3c5a0c*0x3c*0x3e8,startTime=Date[_0x4eac36(0x10f)](),alarmStage=0x0,_0x26b2aa['log'][_0x4eac36(0xf2)](_0x4eac36(0xf1)+currentMonitoredRoom+_0x4eac36(0x109)+_0x3c5a0c+_0x4eac36(0xfc)),_0x26b2aa[_0x4eac36(0x100)](_0x4eac36(0x104),{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x26b2aa),timeoutMs);}function resetTimer(_0x4038e5){const _0x40ad42=a2_0x4e17;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x4038e5[_0x40ad42(0x100)](_0x40ad42(0x104),{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x696263){const _0xff0915=a2_0x4e17;alarmStage=0x1,await _0x696263[_0xff0915(0x100)](_0xff0915(0x104),{'val':'pre_warn','ack':!![]});const _0x2125b8=_0xff0915(0xef)+currentMonitoredRoom+_0xff0915(0x112);_0x696263[_0xff0915(0x10d)][_0xff0915(0x106)](_0xff0915(0x10a)+_0x2125b8),await setup[_0xff0915(0xf7)](_0x696263,_0xff0915(0x105)+_0x2125b8),activeTimer=setTimeout(()=>triggerAlarm(_0x696263),0x5*0x3c*0x3e8);}async function triggerAlarm(_0x2fe615){const _0x381370=a2_0x4e17;alarmStage=0x2,await _0x2fe615[_0x381370(0x100)](_0x381370(0x104),{'val':_0x381370(0x10b),'ack':!![]});const _0x436130='ðŸš¨\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20'+currentMonitoredRoom+'!';_0x2fe615[_0x381370(0x10d)][_0x381370(0xfa)](_0x381370(0x10a)+_0x436130),await setup[_0x381370(0xf7)](_0x2fe615,_0x436130,![],!![]);}module['exports']={'updateLocation':updateLocation};