const a2_0x46e5c3=a2_0x44db;(function(_0x4bada9,_0x398e13){const _0x17b869=a2_0x44db,_0x344ac9=_0x4bada9();while(!![]){try{const _0x42e626=-parseInt(_0x17b869(0x1f6))/0x1*(-parseInt(_0x17b869(0x217))/0x2)+-parseInt(_0x17b869(0x1f7))/0x3+parseInt(_0x17b869(0x20a))/0x4*(-parseInt(_0x17b869(0x1ec))/0x5)+-parseInt(_0x17b869(0x20f))/0x6*(parseInt(_0x17b869(0x205))/0x7)+parseInt(_0x17b869(0x201))/0x8+parseInt(_0x17b869(0x1e8))/0x9+-parseInt(_0x17b869(0x1e9))/0xa*(-parseInt(_0x17b869(0x1ea))/0xb);if(_0x42e626===_0x398e13)break;else _0x344ac9['push'](_0x344ac9['shift']());}catch(_0x519de2){_0x344ac9['push'](_0x344ac9['shift']());}}}(a2_0x3820,0x854b7));const a2_0x1a51d9=(function(){let _0x5b24eb=!![];return function(_0x1e5e2c,_0x18efc9){const _0x1f0a20=_0x5b24eb?function(){const _0x26bff9=a2_0x44db;if(_0x18efc9){const _0x493549=_0x18efc9[_0x26bff9(0x204)](_0x1e5e2c,arguments);return _0x18efc9=null,_0x493549;}}:function(){};return _0x5b24eb=![],_0x1f0a20;};}()),a2_0x5cfa8b=a2_0x1a51d9(this,function(){const _0xc93750=a2_0x44db;return a2_0x5cfa8b[_0xc93750(0x200)]()['search'](_0xc93750(0x203))[_0xc93750(0x200)]()['constructor'](a2_0x5cfa8b)[_0xc93750(0x206)]('(((.+)+)+)+$');});a2_0x5cfa8b();'use strict';const setup=require(a2_0x46e5c3(0x210));function a2_0x3820(){const _0x370789=['message','toLowerCase','36iWAtWp','analysis.safety.deadMan.currentRoom','3692133xACpgs','1336970aLsPeE','55HToWGj','now','6535deNeQc','val','\x20Min.','ðŸš¨\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20','â³\x20ACHTUNG:\x20UngewÃ¶hnlich\x20lange\x20InaktivitÃ¤t\x20in\x20','sendNotification','analysis.safety.deadMan.config','exports','log','alarm','44721emWQiK','673575dRXsLa','getStateAsync','parse','[DeadMan]\x20Topology\x20check\x20failed:\x20','warn','analysis.safety.deadMan.active','ðŸ‘¼\x20Schutzengel-Frage:\x20','\x27.\x20(Multi-Person\x20Filter)','info','toString','2260392tsppWd','default','(((.+)+)+)+$','apply','2807CwAKTB','search','setStateAsync','analysis.safety.deadMan.alarmState','indexOf','1784qXqFQE','analysis.topology.structure','includes','pre_warn','error','12162PYczMK','./setup','[DeadMan]\x20','ðŸ‘¼\x20Schutzengel:\x20Ãœberwache\x20','Unknown','.\x20Alles\x20in\x20Ordnung?'];a2_0x3820=function(){return _0x370789;};return a2_0x3820();}let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};async function loadConfig(_0xe0e7a5){const _0x15c4b0=a2_0x46e5c3;try{const _0x11f338=await _0xe0e7a5[_0x15c4b0(0x1f8)](_0x15c4b0(0x1f2));if(_0x11f338&&_0x11f338[_0x15c4b0(0x1ed)])return JSON[_0x15c4b0(0x1f9)](_0x11f338['val']);}catch(_0x546bb9){}return{};}async function isActive(_0x38a13d){const _0x5db969=a2_0x46e5c3;try{const _0x155245=await _0x38a13d['getStateAsync'](_0x5db969(0x1fc));return _0x155245&&_0x155245[_0x5db969(0x1ed)];}catch(_0x364863){return![];}}async function areRoomsConnected(_0x2920e4,_0x451b38,_0x1f8e78){const _0x445527=a2_0x46e5c3;try{const _0x31958b=await _0x2920e4['getStateAsync'](_0x445527(0x20b));if(!_0x31958b||!_0x31958b[_0x445527(0x1ed)])return!![];const _0x24d176=JSON[_0x445527(0x1f9)](_0x31958b[_0x445527(0x1ed)]),{rooms:_0xa4cf9c,matrix:_0x4f49fc}=_0x24d176;if(!_0xa4cf9c||!_0x4f49fc)return!![];const _0x18aad4=_0xa4cf9c[_0x445527(0x209)](_0x451b38),_0x2a358b=_0xa4cf9c[_0x445527(0x209)](_0x1f8e78);if(_0x18aad4===-0x1||_0x2a358b===-0x1)return!![];const _0x7f89f8=_0x4f49fc[_0x18aad4][_0x2a358b]>0x0||_0x4f49fc[_0x2a358b][_0x18aad4]>0x0;return _0x7f89f8;}catch(_0x3ead2d){return _0x2920e4[_0x445527(0x1f4)][_0x445527(0x1fb)](_0x445527(0x1fa)+_0x3ead2d[_0x445527(0x215)]),!![];}}async function updateLocation(_0x2a93c9,_0x52fe65){const _0x3e11fa=a2_0x46e5c3;if(!_0x52fe65||_0x52fe65===_0x3e11fa(0x213))return;if(!await isActive(_0x2a93c9)){resetTimer(_0x2a93c9);return;}if(currentMonitoredRoom&&currentMonitoredRoom!==_0x52fe65){const _0x1e9276=await areRoomsConnected(_0x2a93c9,currentMonitoredRoom,_0x52fe65);if(!_0x1e9276){_0x2a93c9[_0x3e11fa(0x1f4)]['info']('[DeadMan]\x20Ignoriere\x20Bewegung\x20in\x20\x27'+_0x52fe65+'\x27.\x20Nicht\x20verbunden\x20mit\x20Ã¼berwachtem\x20\x27'+currentMonitoredRoom+_0x3e11fa(0x1fe));return;}resetTimer(_0x2a93c9);}if(!currentMonitoredRoom){await _0x2a93c9['setStateAsync'](_0x3e11fa(0x218),{'val':_0x52fe65,'ack':!![]});const _0x59beed=await loadConfig(_0x2a93c9),_0x5094da=_0x52fe65[_0x3e11fa(0x216)]();let _0x3e9b41=_0x59beed[_0x52fe65]||_0x59beed[_0x5094da];if(!_0x3e9b41)for(const _0x2eedd8 in DEFAULT_TIMEOUTS){if(_0x5094da[_0x3e11fa(0x20c)](_0x2eedd8)){_0x3e9b41=DEFAULT_TIMEOUTS[_0x2eedd8];break;}}if(!_0x3e9b41&&_0x59beed[_0x3e11fa(0x202)])_0x3e9b41=_0x59beed[_0x3e11fa(0x202)];if(!_0x3e9b41)return;currentMonitoredRoom=_0x52fe65,startTimer(_0x2a93c9,_0x3e9b41);}}function startTimer(_0x307b01,_0x1f6bbd){const _0x4a081e=a2_0x46e5c3;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x1f6bbd*0x3c*0x3e8,startTime=Date[_0x4a081e(0x1eb)](),alarmStage=0x0,_0x307b01[_0x4a081e(0x1f4)][_0x4a081e(0x1ff)](_0x4a081e(0x212)+currentMonitoredRoom+'\x20fÃ¼r\x20'+_0x1f6bbd+_0x4a081e(0x1ee)),_0x307b01[_0x4a081e(0x207)](_0x4a081e(0x208),{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x307b01),timeoutMs);}function a2_0x44db(_0x31fa94,_0x3889e0){const _0x52227e=a2_0x3820();return a2_0x44db=function(_0x5cfa8b,_0x1a51d9){_0x5cfa8b=_0x5cfa8b-0x1e8;let _0x3820b0=_0x52227e[_0x5cfa8b];return _0x3820b0;},a2_0x44db(_0x31fa94,_0x3889e0);}function resetTimer(_0x25247d){const _0x328ce3=a2_0x46e5c3;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x25247d['setStateAsync'](_0x328ce3(0x208),{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x455103){const _0x17bfdd=a2_0x46e5c3;alarmStage=0x1,await _0x455103[_0x17bfdd(0x207)]('analysis.safety.deadMan.alarmState',{'val':_0x17bfdd(0x20d),'ack':!![]});const _0x225c97=_0x17bfdd(0x1f0)+currentMonitoredRoom+_0x17bfdd(0x214);_0x455103[_0x17bfdd(0x1f4)][_0x17bfdd(0x1fb)](_0x17bfdd(0x211)+_0x225c97),await setup[_0x17bfdd(0x1f1)](_0x455103,_0x17bfdd(0x1fd)+_0x225c97),activeTimer=setTimeout(()=>triggerAlarm(_0x455103),0x5*0x3c*0x3e8);}async function triggerAlarm(_0x42b513){const _0x450911=a2_0x46e5c3;alarmStage=0x2,await _0x42b513[_0x450911(0x207)](_0x450911(0x208),{'val':_0x450911(0x1f5),'ack':!![]});const _0x3dbf24=_0x450911(0x1ef)+currentMonitoredRoom+'!';_0x42b513[_0x450911(0x1f4)][_0x450911(0x20e)](_0x450911(0x211)+_0x3dbf24),await setup[_0x450911(0x1f1)](_0x42b513,_0x3dbf24,![],!![]);}module[a2_0x46e5c3(0x1f3)]={'updateLocation':updateLocation};