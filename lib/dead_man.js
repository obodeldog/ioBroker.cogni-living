const a2_0x5d2621=a2_0x265e;(function(_0x128352,_0x384220){const _0x2545fc=a2_0x265e,_0x3a0f37=_0x128352();while(!![]){try{const _0x3f0773=parseInt(_0x2545fc(0x1a2))/0x1+-parseInt(_0x2545fc(0x1a3))/0x2*(parseInt(_0x2545fc(0x18d))/0x3)+-parseInt(_0x2545fc(0x188))/0x4+parseInt(_0x2545fc(0x196))/0x5+-parseInt(_0x2545fc(0x191))/0x6*(parseInt(_0x2545fc(0x17b))/0x7)+-parseInt(_0x2545fc(0x1a4))/0x8+-parseInt(_0x2545fc(0x1a8))/0x9*(-parseInt(_0x2545fc(0x195))/0xa);if(_0x3f0773===_0x384220)break;else _0x3a0f37['push'](_0x3a0f37['shift']());}catch(_0x56ca60){_0x3a0f37['push'](_0x3a0f37['shift']());}}}(a2_0x53fc,0x63384));const a2_0x8b067b=(function(){let _0x227f82=!![];return function(_0x483259,_0x1cd5d8){const _0x2a2032=_0x227f82?function(){const _0x54ff16=a2_0x265e;if(_0x1cd5d8){const _0x2b9276=_0x1cd5d8[_0x54ff16(0x185)](_0x483259,arguments);return _0x1cd5d8=null,_0x2b9276;}}:function(){};return _0x227f82=![],_0x2a2032;};}()),a2_0x3638a5=a2_0x8b067b(this,function(){const _0x4603f9=a2_0x265e;return a2_0x3638a5['toString']()[_0x4603f9(0x1a0)](_0x4603f9(0x19a))[_0x4603f9(0x1a6)]()['constructor'](a2_0x3638a5)[_0x4603f9(0x1a0)](_0x4603f9(0x19a));});a2_0x3638a5();'use strict';const setup=require(a2_0x5d2621(0x187));let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};async function loadConfig(_0xf24e4f){const _0x421143=a2_0x5d2621;try{const _0x5047f1=await _0xf24e4f['getStateAsync'](_0x421143(0x17d));if(_0x5047f1&&_0x5047f1['val'])return JSON['parse'](_0x5047f1['val']);}catch(_0x2c78ce){}return{};}async function isActive(_0x59b3f6){const _0x142817=a2_0x5d2621;try{const _0x3f9b85=await _0x59b3f6['getStateAsync'](_0x142817(0x190));return _0x3f9b85&&_0x3f9b85[_0x142817(0x199)];}catch(_0xd4e87c){return![];}}async function areRoomsConnected(_0x49dc72,_0x41256c,_0x2d5b04){const _0x32ff2f=a2_0x5d2621;try{const _0x3f7d08=await _0x49dc72[_0x32ff2f(0x183)](_0x32ff2f(0x18f));if(!_0x3f7d08||!_0x3f7d08[_0x32ff2f(0x199)])return!![];const _0x222fb0=JSON[_0x32ff2f(0x19b)](_0x3f7d08[_0x32ff2f(0x199)]),{rooms:_0x1febcf,matrix:_0x9eab4c}=_0x222fb0;if(!_0x1febcf||!_0x9eab4c)return!![];const _0x2f23f7=_0x1febcf[_0x32ff2f(0x19c)](_0x41256c),_0x8f92e6=_0x1febcf['indexOf'](_0x2d5b04);if(_0x2f23f7===-0x1||_0x8f92e6===-0x1)return!![];const _0x39404f=_0x9eab4c[_0x2f23f7][_0x8f92e6]>0x0||_0x9eab4c[_0x8f92e6][_0x2f23f7]>0x0;return _0x39404f;}catch(_0x5919a0){return _0x49dc72['log'][_0x32ff2f(0x182)](_0x32ff2f(0x198)+_0x5919a0[_0x32ff2f(0x1a1)]),!![];}}async function updateLocation(_0xeb072b,_0xca9e2c){const _0xc0bfcf=a2_0x5d2621;if(!_0xca9e2c||_0xca9e2c===_0xc0bfcf(0x17f))return;if(!await isActive(_0xeb072b)){resetTimer(_0xeb072b);return;}if(currentMonitoredRoom&&currentMonitoredRoom!==_0xca9e2c){const _0x53bccb=await areRoomsConnected(_0xeb072b,currentMonitoredRoom,_0xca9e2c);if(!_0x53bccb){_0xeb072b['log']['info']('[DeadMan]\x20Ignoriere\x20Bewegung\x20in\x20\x27'+_0xca9e2c+_0xc0bfcf(0x18b)+currentMonitoredRoom+_0xc0bfcf(0x18a));return;}resetTimer(_0xeb072b);}if(!currentMonitoredRoom){await _0xeb072b[_0xc0bfcf(0x18e)]('analysis.safety.deadMan.currentRoom',{'val':_0xca9e2c,'ack':!![]});const _0x5c1eca=await loadConfig(_0xeb072b),_0x50d061=_0xca9e2c[_0xc0bfcf(0x17c)]();let _0x217e9a=_0x5c1eca[_0xca9e2c]||_0x5c1eca[_0x50d061];if(!_0x217e9a)for(const _0xc102f4 in DEFAULT_TIMEOUTS){if(_0x50d061[_0xc0bfcf(0x193)](_0xc102f4)){_0x217e9a=DEFAULT_TIMEOUTS[_0xc102f4];break;}}if(!_0x217e9a&&_0x5c1eca[_0xc0bfcf(0x192)])_0x217e9a=_0x5c1eca[_0xc0bfcf(0x192)];if(!_0x217e9a)return;currentMonitoredRoom=_0xca9e2c,startTimer(_0xeb072b,_0x217e9a);}}function startTimer(_0x178013,_0x1842cc){const _0x2aba28=a2_0x5d2621;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x1842cc*0x3c*0x3e8,startTime=Date[_0x2aba28(0x181)](),alarmStage=0x0,_0x178013[_0x2aba28(0x197)][_0x2aba28(0x19d)](_0x2aba28(0x1a5)+currentMonitoredRoom+_0x2aba28(0x19e)+_0x1842cc+_0x2aba28(0x1aa)),_0x178013[_0x2aba28(0x18e)](_0x2aba28(0x1a7),{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x178013),timeoutMs);}function resetTimer(_0x22f1e9){const _0x5a1d75=a2_0x5d2621;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x22f1e9[_0x5a1d75(0x18e)](_0x5a1d75(0x1a7),{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x10091f){const _0x1d653e=a2_0x5d2621;alarmStage=0x1,await _0x10091f[_0x1d653e(0x18e)](_0x1d653e(0x1a7),{'val':_0x1d653e(0x180),'ack':!![]});const _0x5a44e6=_0x1d653e(0x1a9)+currentMonitoredRoom+_0x1d653e(0x194);_0x10091f[_0x1d653e(0x197)][_0x1d653e(0x182)](_0x1d653e(0x189)+_0x5a44e6),await setup['sendNotification'](_0x10091f,_0x1d653e(0x1ab)+_0x5a44e6),activeTimer=setTimeout(()=>triggerAlarm(_0x10091f),0x5*0x3c*0x3e8);}async function triggerAlarm(_0x24e1cf){const _0x753f93=a2_0x5d2621;alarmStage=0x2,await _0x24e1cf[_0x753f93(0x18e)](_0x753f93(0x1a7),{'val':_0x753f93(0x17e),'ack':!![]});const _0x2c172b=_0x753f93(0x184)+currentMonitoredRoom+'!';_0x24e1cf[_0x753f93(0x197)][_0x753f93(0x19f)](_0x753f93(0x189)+_0x2c172b),await setup[_0x753f93(0x186)](_0x24e1cf,_0x2c172b,![],!![]);}function a2_0x53fc(){const _0x529dfd=['\x27.\x20(Multi-Person\x20Filter)','\x27.\x20Nicht\x20verbunden\x20mit\x20√ºberwachtem\x20\x27','exports','432oMaXbV','setStateAsync','analysis.topology.structure','analysis.safety.deadMan.active','189066zslHuN','default','includes','.\x20Alles\x20in\x20Ordnung?','6230xEpfEy','1405490fQXQpM','log','[DeadMan]\x20Topology\x20check\x20failed:\x20','val','(((.+)+)+)+$','parse','indexOf','info','\x20f√ºr\x20','error','search','message','396452bQgsbS','3452icTsKU','3866976CMWCKa','üëº\x20Schutzengel:\x20√úberwache\x20','toString','analysis.safety.deadMan.alarmState','20331MXRnZg','‚è≥\x20ACHTUNG:\x20Ungew√∂hnlich\x20lange\x20Inaktivit√§t\x20in\x20','\x20Min.','üëº\x20Schutzengel-Frage:\x20','175uVzXLb','toLowerCase','analysis.safety.deadMan.config','alarm','Unknown','pre_warn','now','warn','getStateAsync','üö®\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20','apply','sendNotification','./setup','635248dCJpBJ','[DeadMan]\x20'];a2_0x53fc=function(){return _0x529dfd;};return a2_0x53fc();}function a2_0x265e(_0x4f33b9,_0x16f774){const _0x182a22=a2_0x53fc();return a2_0x265e=function(_0x3638a5,_0x8b067b){_0x3638a5=_0x3638a5-0x17b;let _0x53fc07=_0x182a22[_0x3638a5];return _0x53fc07;},a2_0x265e(_0x4f33b9,_0x16f774);}module[a2_0x5d2621(0x18c)]={'updateLocation':updateLocation};