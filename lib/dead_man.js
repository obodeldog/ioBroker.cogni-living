const a2_0x3ea316=a2_0x44eb;(function(_0x16483d,_0x34d3fb){const _0x2e9c22=a2_0x44eb,_0x3678ef=_0x16483d();while(!![]){try{const _0x13ee6a=parseInt(_0x2e9c22(0x194))/0x1*(parseInt(_0x2e9c22(0x178))/0x2)+parseInt(_0x2e9c22(0x18e))/0x3*(-parseInt(_0x2e9c22(0x1a2))/0x4)+parseInt(_0x2e9c22(0x18c))/0x5*(parseInt(_0x2e9c22(0x19c))/0x6)+-parseInt(_0x2e9c22(0x17e))/0x7+parseInt(_0x2e9c22(0x18b))/0x8*(-parseInt(_0x2e9c22(0x1a6))/0x9)+-parseInt(_0x2e9c22(0x1a3))/0xa+-parseInt(_0x2e9c22(0x195))/0xb*(-parseInt(_0x2e9c22(0x18a))/0xc);if(_0x13ee6a===_0x34d3fb)break;else _0x3678ef['push'](_0x3678ef['shift']());}catch(_0x30d660){_0x3678ef['push'](_0x3678ef['shift']());}}}(a2_0x41ab,0x3ec3d));const a2_0x1af667=(function(){let _0x5c662d=!![];return function(_0x16b9f7,_0x3293f8){const _0x361754=_0x5c662d?function(){const _0x2f98b0=a2_0x44eb;if(_0x3293f8){const _0xaa5c95=_0x3293f8[_0x2f98b0(0x19b)](_0x16b9f7,arguments);return _0x3293f8=null,_0xaa5c95;}}:function(){};return _0x5c662d=![],_0x361754;};}()),a2_0x313b5b=a2_0x1af667(this,function(){const _0x4dba06=a2_0x44eb;return a2_0x313b5b[_0x4dba06(0x193)]()[_0x4dba06(0x18d)](_0x4dba06(0x17a))['toString']()[_0x4dba06(0x1a0)](a2_0x313b5b)[_0x4dba06(0x18d)](_0x4dba06(0x17a));});a2_0x313b5b();'use strict';const setup=require(a2_0x3ea316(0x19e));let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};async function loadConfig(_0x4a1066){const _0x250999=a2_0x3ea316;try{const _0x52818a=await _0x4a1066['getStateAsync'](_0x250999(0x199));if(_0x52818a&&_0x52818a['val'])return JSON[_0x250999(0x1a9)](_0x52818a[_0x250999(0x17c)]);}catch(_0xe65684){}return{};}async function isActive(_0x2cd79d){const _0x3d761f=a2_0x3ea316;try{const _0xae1994=await _0x2cd79d[_0x3d761f(0x19f)]('analysis.safety.deadMan.active');return _0xae1994&&_0xae1994[_0x3d761f(0x17c)];}catch(_0x26ddc3){return![];}}function a2_0x44eb(_0x3b3be9,_0xe9f352){const _0x4cf49a=a2_0x41ab();return a2_0x44eb=function(_0x313b5b,_0x1af667){_0x313b5b=_0x313b5b-0x178;let _0x41ab37=_0x4cf49a[_0x313b5b];return _0x41ab37;},a2_0x44eb(_0x3b3be9,_0xe9f352);}async function areRoomsConnected(_0x3212e8,_0x1c4068,_0x1e456d){const _0x387607=a2_0x3ea316;try{const _0x1094e6=await _0x3212e8[_0x387607(0x19f)](_0x387607(0x183));if(!_0x1094e6||!_0x1094e6[_0x387607(0x17c)])return!![];const _0x2c6a51=JSON['parse'](_0x1094e6[_0x387607(0x17c)]),{rooms:_0x24d741,matrix:_0x5cd4ad}=_0x2c6a51;if(!_0x24d741||!_0x5cd4ad)return!![];const _0x20c675=_0x24d741[_0x387607(0x196)](_0x1c4068),_0xe91974=_0x24d741['indexOf'](_0x1e456d);if(_0x20c675===-0x1||_0xe91974===-0x1)return!![];const _0x2f5f33=_0x5cd4ad[_0x20c675][_0xe91974]>0x0||_0x5cd4ad[_0xe91974][_0x20c675]>0x0;return _0x2f5f33;}catch(_0x220624){return _0x3212e8[_0x387607(0x187)][_0x387607(0x17f)]('[DeadMan]\x20Topology\x20check\x20failed:\x20'+_0x220624[_0x387607(0x17b)]),!![];}}function a2_0x41ab(){const _0x1a19d7=['warn','exports','toLowerCase','analysis.safety.deadMan.lastIgnored','analysis.topology.structure','\x20Min.','ðŸ‘¼\x20Schutzengel-Frage:\x20','analysis.safety.deadMan.alarmState','log','Ignoriere\x20Bewegung\x20in\x20\x27','[DeadMan]\x20','12yZiLaa','608dKHJRX','2488215YkHogb','search','12OnLATk','\x20(Multi-Person\x20Filter)','ðŸ‘¼\x20Schutzengel:\x20Ãœberwache\x20','info','Unknown','toString','1758fqNSNW','6133930axjiEB','indexOf','\x27.\x20Nicht\x20verbunden\x20mit\x20Ã¼berwachtem\x20\x27','\x20fÃ¼r\x20','analysis.safety.deadMan.config','pre_warn','apply','6sRpsma','setStateAsync','./setup','getStateAsync','constructor','sendNotification','361404znfJPb','584490eJJxHT','default','ðŸš¨\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20','49968jvugiH','now','â³\x20ACHTUNG:\x20UngewÃ¶hnlich\x20lange\x20InaktivitÃ¤t\x20in\x20','parse','256QaalUN','error','(((.+)+)+)+$','message','val','alarm','1269849OwxawB'];a2_0x41ab=function(){return _0x1a19d7;};return a2_0x41ab();}async function updateLocation(_0x49c7a1,_0x435c2f){const _0xad0b0f=a2_0x3ea316;if(!_0x435c2f||_0x435c2f===_0xad0b0f(0x192))return;if(!await isActive(_0x49c7a1)){resetTimer(_0x49c7a1);return;}if(currentMonitoredRoom&&currentMonitoredRoom!==_0x435c2f){const _0x5955bb=await areRoomsConnected(_0x49c7a1,currentMonitoredRoom,_0x435c2f);if(!_0x5955bb){const _0x56c36b=_0xad0b0f(0x188)+_0x435c2f+_0xad0b0f(0x197)+currentMonitoredRoom+'\x27.';_0x49c7a1[_0xad0b0f(0x187)][_0xad0b0f(0x191)](_0xad0b0f(0x189)+_0x56c36b+_0xad0b0f(0x18f)),await _0x49c7a1[_0xad0b0f(0x19d)](_0xad0b0f(0x182),{'val':JSON['stringify']({'room':_0x435c2f,'reason':_0x56c36b,'timestamp':Date['now']()}),'ack':!![]});return;}resetTimer(_0x49c7a1);}if(!currentMonitoredRoom){await _0x49c7a1[_0xad0b0f(0x19d)]('analysis.safety.deadMan.currentRoom',{'val':_0x435c2f,'ack':!![]});const _0x2909dc=await loadConfig(_0x49c7a1),_0x106f2e=_0x435c2f[_0xad0b0f(0x181)]();let _0xe4bcc2=_0x2909dc[_0x435c2f]||_0x2909dc[_0x106f2e];if(!_0xe4bcc2)for(const _0x3909dd in DEFAULT_TIMEOUTS){if(_0x106f2e['includes'](_0x3909dd)){_0xe4bcc2=DEFAULT_TIMEOUTS[_0x3909dd];break;}}if(!_0xe4bcc2&&_0x2909dc[_0xad0b0f(0x1a4)])_0xe4bcc2=_0x2909dc['default'];if(!_0xe4bcc2)return;currentMonitoredRoom=_0x435c2f,startTimer(_0x49c7a1,_0xe4bcc2);}}function startTimer(_0x292309,_0x620b6c){const _0x1445df=a2_0x3ea316;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x620b6c*0x3c*0x3e8,startTime=Date[_0x1445df(0x1a7)](),alarmStage=0x0,_0x292309[_0x1445df(0x187)][_0x1445df(0x191)](_0x1445df(0x190)+currentMonitoredRoom+_0x1445df(0x198)+_0x620b6c+_0x1445df(0x184)),_0x292309[_0x1445df(0x19d)]('analysis.safety.deadMan.alarmState',{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x292309),timeoutMs);}function resetTimer(_0x26efc8){const _0x49bbfa=a2_0x3ea316;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x26efc8[_0x49bbfa(0x19d)](_0x49bbfa(0x186),{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x368516){const _0x4b18f1=a2_0x3ea316;alarmStage=0x1,await _0x368516['setStateAsync'](_0x4b18f1(0x186),{'val':_0x4b18f1(0x19a),'ack':!![]});const _0x13df1f=_0x4b18f1(0x1a8)+currentMonitoredRoom+'.\x20Alles\x20in\x20Ordnung?';_0x368516[_0x4b18f1(0x187)]['warn'](_0x4b18f1(0x189)+_0x13df1f),await setup[_0x4b18f1(0x1a1)](_0x368516,_0x4b18f1(0x185)+_0x13df1f),activeTimer=setTimeout(()=>triggerAlarm(_0x368516),0x5*0x3c*0x3e8);}async function triggerAlarm(_0x3a17a6){const _0x1b7af2=a2_0x3ea316;alarmStage=0x2,await _0x3a17a6['setStateAsync']('analysis.safety.deadMan.alarmState',{'val':_0x1b7af2(0x17d),'ack':!![]});const _0x4acd7b=_0x1b7af2(0x1a5)+currentMonitoredRoom+'!';_0x3a17a6[_0x1b7af2(0x187)][_0x1b7af2(0x179)](_0x1b7af2(0x189)+_0x4acd7b),await setup[_0x1b7af2(0x1a1)](_0x3a17a6,_0x4acd7b,![],!![]);}module[a2_0x3ea316(0x180)]={'updateLocation':updateLocation};