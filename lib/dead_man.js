const a2_0x56bd6e=a2_0x5300;(function(_0x52c954,_0x5ea5c4){const _0x12c3ff=a2_0x5300,_0x328890=_0x52c954();while(!![]){try{const _0x130612=-parseInt(_0x12c3ff(0xc8))/0x1*(-parseInt(_0x12c3ff(0xb7))/0x2)+parseInt(_0x12c3ff(0xbb))/0x3+parseInt(_0x12c3ff(0xcd))/0x4*(parseInt(_0x12c3ff(0xb9))/0x5)+parseInt(_0x12c3ff(0xa1))/0x6*(parseInt(_0x12c3ff(0xb1))/0x7)+-parseInt(_0x12c3ff(0xab))/0x8*(parseInt(_0x12c3ff(0xbf))/0x9)+parseInt(_0x12c3ff(0xca))/0xa+-parseInt(_0x12c3ff(0xbd))/0xb;if(_0x130612===_0x5ea5c4)break;else _0x328890['push'](_0x328890['shift']());}catch(_0x2e0cb1){_0x328890['push'](_0x328890['shift']());}}}(a2_0x2bce,0x2911c));const a2_0x64d01a=(function(){let _0x5c4050=!![];return function(_0x158117,_0x1295fc){const _0x37b4eb=_0x5c4050?function(){const _0x1f12a9=a2_0x5300;if(_0x1295fc){const _0x29efc1=_0x1295fc[_0x1f12a9(0xb3)](_0x158117,arguments);return _0x1295fc=null,_0x29efc1;}}:function(){};return _0x5c4050=![],_0x37b4eb;};}()),a2_0x39227c=a2_0x64d01a(this,function(){const _0x5b2585=a2_0x5300;return a2_0x39227c[_0x5b2585(0xba)]()[_0x5b2585(0xaa)](_0x5b2585(0xb0))[_0x5b2585(0xba)]()[_0x5b2585(0xbc)](a2_0x39227c)[_0x5b2585(0xaa)](_0x5b2585(0xb0));});a2_0x39227c();'use strict';const setup=require(a2_0x56bd6e(0xc4));let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};async function loadConfig(_0x56bcdc){const _0x48c2e5=a2_0x56bd6e;try{const _0x555569=await _0x56bcdc[_0x48c2e5(0xb4)](_0x48c2e5(0xa0));if(_0x555569&&_0x555569[_0x48c2e5(0xa2)])return JSON[_0x48c2e5(0xce)](_0x555569[_0x48c2e5(0xa2)]);}catch(_0x102b59){}return{};}async function isActive(_0x5c9ee3){const _0x49d63c=a2_0x56bd6e;try{const _0x2cfdd2=await _0x5c9ee3['getStateAsync'](_0x49d63c(0xa6));return _0x2cfdd2&&_0x2cfdd2[_0x49d63c(0xa2)];}catch(_0xad99c2){return![];}}function a2_0x5300(_0x45ced1,_0x1753d3){const _0x12450f=a2_0x2bce();return a2_0x5300=function(_0x39227c,_0x64d01a){_0x39227c=_0x39227c-0x9d;let _0x2bce0f=_0x12450f[_0x39227c];return _0x2bce0f;},a2_0x5300(_0x45ced1,_0x1753d3);}async function areRoomsConnected(_0x2975e5,_0x1c42e3,_0x424ff8){const _0x461b6d=a2_0x56bd6e;try{const _0x366cb0=await _0x2975e5['getStateAsync'](_0x461b6d(0xa3));if(!_0x366cb0||!_0x366cb0[_0x461b6d(0xa2)])return!![];const _0x2625d0=JSON['parse'](_0x366cb0['val']),{rooms:_0x5018a5,matrix:_0x8d4807}=_0x2625d0;if(!_0x5018a5||!_0x8d4807)return!![];const _0x399638=_0x5018a5[_0x461b6d(0xcb)](_0x1c42e3),_0xf08f0e=_0x5018a5[_0x461b6d(0xcb)](_0x424ff8);if(_0x399638===-0x1||_0xf08f0e===-0x1)return!![];const _0x38b91d=_0x8d4807[_0x399638][_0xf08f0e]>0x0||_0x8d4807[_0xf08f0e][_0x399638]>0x0;return _0x38b91d;}catch(_0x395464){return _0x2975e5['log'][_0x461b6d(0xaf)](_0x461b6d(0xc6)+_0x395464[_0x461b6d(0xa4)]),!![];}}async function updateLocation(_0x5b835a,_0x1d08b9){const _0x1b31ea=a2_0x56bd6e;if(!_0x1d08b9||_0x1d08b9==='Unknown')return;if(!await isActive(_0x5b835a)){resetTimer(_0x5b835a);return;}if(currentMonitoredRoom&&currentMonitoredRoom!==_0x1d08b9){const _0x4b4407=await areRoomsConnected(_0x5b835a,currentMonitoredRoom,_0x1d08b9);if(!_0x4b4407){const _0xa02b98='Ignoriere\x20Bewegung\x20in\x20\x27'+_0x1d08b9+'\x27.\x20Nicht\x20verbunden\x20mit\x20√ºberwachtem\x20\x27'+currentMonitoredRoom+'\x27.';_0x5b835a[_0x1b31ea(0xb6)][_0x1b31ea(0x9d)](_0x1b31ea(0xc3)+_0xa02b98+_0x1b31ea(0xc1)),await _0x5b835a[_0x1b31ea(0xa5)]('analysis.safety.deadMan.lastIgnored',{'val':JSON[_0x1b31ea(0xc9)]({'room':_0x1d08b9,'reason':_0xa02b98,'timestamp':Date[_0x1b31ea(0x9e)]()}),'ack':!![]});return;}resetTimer(_0x5b835a);}if(!currentMonitoredRoom){await _0x5b835a['setStateAsync'](_0x1b31ea(0xc5),{'val':_0x1d08b9,'ack':!![]});const _0xa70c7f=await loadConfig(_0x5b835a),_0x102147=_0x1d08b9[_0x1b31ea(0xcc)]();let _0x1220a2=_0xa70c7f[_0x1d08b9]||_0xa70c7f[_0x102147];if(!_0x1220a2)for(const _0x4a29cd in DEFAULT_TIMEOUTS){if(_0x102147[_0x1b31ea(0xad)](_0x4a29cd)){_0x1220a2=DEFAULT_TIMEOUTS[_0x4a29cd];break;}}if(!_0x1220a2&&_0xa70c7f[_0x1b31ea(0xa7)])_0x1220a2=_0xa70c7f[_0x1b31ea(0xa7)];if(!_0x1220a2)return;currentMonitoredRoom=_0x1d08b9,startTimer(_0x5b835a,_0x1220a2);}}function startTimer(_0x432b50,_0x10d242){const _0x2c5fb7=a2_0x56bd6e;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x10d242*0x3c*0x3e8,startTime=Date[_0x2c5fb7(0x9e)](),alarmStage=0x0,_0x432b50[_0x2c5fb7(0xb6)][_0x2c5fb7(0x9d)](_0x2c5fb7(0xc7)+currentMonitoredRoom+_0x2c5fb7(0xa8)+_0x10d242+_0x2c5fb7(0xbe)),_0x432b50[_0x2c5fb7(0xa5)]('analysis.safety.deadMan.alarmState',{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x432b50),timeoutMs);}function resetTimer(_0x2bcd93){const _0x1fa839=a2_0x56bd6e;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x2bcd93['setStateAsync'](_0x1fa839(0xb2),{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x5eb4c0){const _0x28de9d=a2_0x56bd6e;alarmStage=0x1,await _0x5eb4c0[_0x28de9d(0xa5)]('analysis.safety.deadMan.alarmState',{'val':_0x28de9d(0xa9),'ack':!![]});const _0x189a60=_0x28de9d(0xc0)+currentMonitoredRoom+_0x28de9d(0xc2);_0x5eb4c0['log'][_0x28de9d(0xaf)](_0x28de9d(0xc3)+_0x189a60),await setup[_0x28de9d(0xac)](_0x5eb4c0,_0x28de9d(0x9f)+_0x189a60),activeTimer=setTimeout(()=>triggerAlarm(_0x5eb4c0),0x5*0x3c*0x3e8);}async function triggerAlarm(_0x3cbad0){const _0x4f1657=a2_0x56bd6e;alarmStage=0x2,await _0x3cbad0[_0x4f1657(0xa5)](_0x4f1657(0xb2),{'val':_0x4f1657(0xb5),'ack':!![]});const _0x15c8d4='üö®\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20'+currentMonitoredRoom+'!';_0x3cbad0['log'][_0x4f1657(0xb8)]('[DeadMan]\x20'+_0x15c8d4),await setup[_0x4f1657(0xac)](_0x3cbad0,_0x15c8d4,![],!![]);}function a2_0x2bce(){const _0x8648d1=['1525520bPDQAB','toString','798279vFyVey','constructor','2124716gBwgqZ','\x20Min.','285255NcdmwP','‚è≥\x20ACHTUNG:\x20Ungew√∂hnlich\x20lange\x20Inaktivit√§t\x20in\x20','\x20(Multi-Person\x20Filter)','.\x20Alles\x20in\x20Ordnung?','[DeadMan]\x20','./setup','analysis.safety.deadMan.currentRoom','[DeadMan]\x20Topology\x20check\x20failed:\x20','üëº\x20Schutzengel:\x20√úberwache\x20','39397lePUqn','stringify','121830ulxovq','indexOf','toLowerCase','4WakGxN','parse','info','now','üëº\x20Schutzengel-Frage:\x20','analysis.safety.deadMan.config','333294nDgQFn','val','analysis.topology.structure','message','setStateAsync','analysis.safety.deadMan.active','default','\x20f√ºr\x20','pre_warn','search','80vqyNeS','sendNotification','includes','exports','warn','(((.+)+)+)+$','7ZcFqaD','analysis.safety.deadMan.alarmState','apply','getStateAsync','alarm','log','2XzcVcG','error'];a2_0x2bce=function(){return _0x8648d1;};return a2_0x2bce();}module[a2_0x56bd6e(0xae)]={'updateLocation':updateLocation};