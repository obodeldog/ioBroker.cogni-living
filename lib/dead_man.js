const a2_0x867ba1=a2_0x4afe;(function(_0x29535e,_0x2bc6ae){const _0x3a432b=a2_0x4afe,_0x2c1341=_0x29535e();while(!![]){try{const _0x190d5c=-parseInt(_0x3a432b(0x19d))/0x1+-parseInt(_0x3a432b(0x1a2))/0x2*(-parseInt(_0x3a432b(0x1b0))/0x3)+parseInt(_0x3a432b(0x1b8))/0x4+parseInt(_0x3a432b(0x1b3))/0x5*(parseInt(_0x3a432b(0x1a3))/0x6)+parseInt(_0x3a432b(0x1ba))/0x7+parseInt(_0x3a432b(0x19c))/0x8*(-parseInt(_0x3a432b(0x1bf))/0x9)+-parseInt(_0x3a432b(0x1be))/0xa*(parseInt(_0x3a432b(0x197))/0xb);if(_0x190d5c===_0x2bc6ae)break;else _0x2c1341['push'](_0x2c1341['shift']());}catch(_0x298b85){_0x2c1341['push'](_0x2c1341['shift']());}}}(a2_0x1a55,0xe5c90));const a2_0x1ad3a2=(function(){let _0x574aa0=!![];return function(_0x15d951,_0x463b43){const _0x58e4de=_0x574aa0?function(){const _0xa7a96=a2_0x4afe;if(_0x463b43){const _0xe675ac=_0x463b43[_0xa7a96(0x1b9)](_0x15d951,arguments);return _0x463b43=null,_0xe675ac;}}:function(){};return _0x574aa0=![],_0x58e4de;};}()),a2_0x3ad28c=a2_0x1ad3a2(this,function(){const _0x6364e1=a2_0x4afe;return a2_0x3ad28c[_0x6364e1(0x1a9)]()[_0x6364e1(0x1af)](_0x6364e1(0x1a0))[_0x6364e1(0x1a9)]()['constructor'](a2_0x3ad28c)[_0x6364e1(0x1af)]('(((.+)+)+)+$');});a2_0x3ad28c();'use strict';const setup=require(a2_0x867ba1(0x1bb));let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;function a2_0x4afe(_0x4cf103,_0xabf0ef){const _0x44d383=a2_0x1a55();return a2_0x4afe=function(_0x3ad28c,_0x1ad3a2){_0x3ad28c=_0x3ad28c-0x197;let _0x1a55dc=_0x44d383[_0x3ad28c];return _0x1a55dc;},a2_0x4afe(_0x4cf103,_0xabf0ef);}const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};async function loadConfig(_0x1c7c07){const _0x5a40c3=a2_0x867ba1;try{const _0x5b9be7=await _0x1c7c07[_0x5a40c3(0x19b)](_0x5a40c3(0x1b2));if(_0x5b9be7&&_0x5b9be7['val'])return JSON[_0x5a40c3(0x1b1)](_0x5b9be7[_0x5a40c3(0x1a6)]);}catch(_0x47c030){}return{};}async function isActive(_0x1aa2c6){const _0x1abfb3=a2_0x867ba1;try{const _0x13b3c0=await _0x1aa2c6[_0x1abfb3(0x19b)]('analysis.safety.deadMan.active');return _0x13b3c0&&_0x13b3c0[_0x1abfb3(0x1a6)];}catch(_0x5e5e31){return![];}}function a2_0x1a55(){const _0x523e9e=['ðŸ‘¼\x20Schutzengel-Frage:\x20','error','(((.+)+)+)+$','[DeadMan]\x20Topology\x20check\x20failed:\x20','117462tWWuUt','6451512PSykZn','[DeadMan]\x20Ignoriere\x20Bewegung\x20in\x20\x27','\x27.\x20(Multi-Person\x20Filter)','val','warn','Unknown','toString','analysis.topology.structure','toLowerCase','default','[DeadMan]\x20','sendNotification','search','33PxigHO','parse','analysis.safety.deadMan.config','5HNDgxu','analysis.safety.deadMan.alarmState','log','â³\x20ACHTUNG:\x20UngewÃ¶hnlich\x20lange\x20InaktivitÃ¤t\x20in\x20','indexOf','4227012HPxHtm','apply','3242169zeFVAu','./setup','includes','exports','12147880lYRMYa','9gMIpWz','message','ðŸ‘¼\x20Schutzengel:\x20Ãœberwache\x20','\x20fÃ¼r\x20','11kOllvp','\x20Min.','\x27.\x20Nicht\x20verbunden\x20mit\x20Ã¼berwachtem\x20\x27','setStateAsync','getStateAsync','2277368HoUary','800554dLQnpW'];a2_0x1a55=function(){return _0x523e9e;};return a2_0x1a55();}async function areRoomsConnected(_0x256aa9,_0x4959ad,_0x4f7525){const _0x1ea381=a2_0x867ba1;try{const _0x460f25=await _0x256aa9[_0x1ea381(0x19b)](_0x1ea381(0x1aa));if(!_0x460f25||!_0x460f25[_0x1ea381(0x1a6)])return!![];const _0x32166e=JSON['parse'](_0x460f25['val']),{rooms:_0x38b1ac,matrix:_0x5d3af9}=_0x32166e;if(!_0x38b1ac||!_0x5d3af9)return!![];const _0xfe5b43=_0x38b1ac[_0x1ea381(0x1b7)](_0x4959ad),_0x74b295=_0x38b1ac[_0x1ea381(0x1b7)](_0x4f7525);if(_0xfe5b43===-0x1||_0x74b295===-0x1)return!![];const _0x49285a=_0x5d3af9[_0xfe5b43][_0x74b295]>0x0||_0x5d3af9[_0x74b295][_0xfe5b43]>0x0;return _0x49285a;}catch(_0x131ef9){return _0x256aa9['log']['warn'](_0x1ea381(0x1a1)+_0x131ef9[_0x1ea381(0x1c0)]),!![];}}async function updateLocation(_0x3bdc60,_0x59b903){const _0x4c429d=a2_0x867ba1;if(!_0x59b903||_0x59b903===_0x4c429d(0x1a8))return;if(!await isActive(_0x3bdc60)){resetTimer(_0x3bdc60);return;}if(currentMonitoredRoom&&currentMonitoredRoom!==_0x59b903){const _0x33e627=await areRoomsConnected(_0x3bdc60,currentMonitoredRoom,_0x59b903);if(!_0x33e627){_0x3bdc60[_0x4c429d(0x1b5)]['info'](_0x4c429d(0x1a4)+_0x59b903+_0x4c429d(0x199)+currentMonitoredRoom+_0x4c429d(0x1a5));return;}resetTimer(_0x3bdc60);}if(!currentMonitoredRoom){await _0x3bdc60[_0x4c429d(0x19a)]('analysis.safety.deadMan.currentRoom',{'val':_0x59b903,'ack':!![]});const _0x4196bb=await loadConfig(_0x3bdc60),_0x429fc0=_0x59b903[_0x4c429d(0x1ab)]();let _0x547d52=_0x4196bb[_0x59b903]||_0x4196bb[_0x429fc0];if(!_0x547d52)for(const _0x4836fe in DEFAULT_TIMEOUTS){if(_0x429fc0[_0x4c429d(0x1bc)](_0x4836fe)){_0x547d52=DEFAULT_TIMEOUTS[_0x4836fe];break;}}if(!_0x547d52&&_0x4196bb[_0x4c429d(0x1ac)])_0x547d52=_0x4196bb[_0x4c429d(0x1ac)];if(!_0x547d52)return;currentMonitoredRoom=_0x59b903,startTimer(_0x3bdc60,_0x547d52);}}function startTimer(_0x5254c2,_0x30573b){const _0x14b090=a2_0x867ba1;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x30573b*0x3c*0x3e8,startTime=Date['now'](),alarmStage=0x0,_0x5254c2[_0x14b090(0x1b5)]['info'](_0x14b090(0x1c1)+currentMonitoredRoom+_0x14b090(0x1c2)+_0x30573b+_0x14b090(0x198)),_0x5254c2[_0x14b090(0x19a)](_0x14b090(0x1b4),{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x5254c2),timeoutMs);}function resetTimer(_0x5a9a6c){const _0x59f173=a2_0x867ba1;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x5a9a6c[_0x59f173(0x19a)]('analysis.safety.deadMan.alarmState',{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x3936ae){const _0x1f7bfe=a2_0x867ba1;alarmStage=0x1,await _0x3936ae[_0x1f7bfe(0x19a)]('analysis.safety.deadMan.alarmState',{'val':'pre_warn','ack':!![]});const _0x23c6f8=_0x1f7bfe(0x1b6)+currentMonitoredRoom+'.\x20Alles\x20in\x20Ordnung?';_0x3936ae[_0x1f7bfe(0x1b5)][_0x1f7bfe(0x1a7)]('[DeadMan]\x20'+_0x23c6f8),await setup[_0x1f7bfe(0x1ae)](_0x3936ae,_0x1f7bfe(0x19e)+_0x23c6f8),activeTimer=setTimeout(()=>triggerAlarm(_0x3936ae),0x5*0x3c*0x3e8);}async function triggerAlarm(_0x3f976b){const _0xaf1d6c=a2_0x867ba1;alarmStage=0x2,await _0x3f976b[_0xaf1d6c(0x19a)]('analysis.safety.deadMan.alarmState',{'val':'alarm','ack':!![]});const _0x52b1cb='ðŸš¨\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20'+currentMonitoredRoom+'!';_0x3f976b[_0xaf1d6c(0x1b5)][_0xaf1d6c(0x19f)](_0xaf1d6c(0x1ad)+_0x52b1cb),await setup[_0xaf1d6c(0x1ae)](_0x3f976b,_0x52b1cb,![],!![]);}module[a2_0x867ba1(0x1bd)]={'updateLocation':updateLocation};