const a2_0x10c25f=a2_0x34a1;(function(_0x48e2b6,_0x20acf9){const _0x1bf2c4=a2_0x34a1,_0x34e3e0=_0x48e2b6();while(!![]){try{const _0x108df6=parseInt(_0x1bf2c4(0x6b))/0x1*(parseInt(_0x1bf2c4(0x8c))/0x2)+-parseInt(_0x1bf2c4(0x80))/0x3+parseInt(_0x1bf2c4(0x73))/0x4+parseInt(_0x1bf2c4(0x86))/0x5+-parseInt(_0x1bf2c4(0x83))/0x6+parseInt(_0x1bf2c4(0x74))/0x7*(-parseInt(_0x1bf2c4(0x89))/0x8)+parseInt(_0x1bf2c4(0x6a))/0x9;if(_0x108df6===_0x20acf9)break;else _0x34e3e0['push'](_0x34e3e0['shift']());}catch(_0x17c22f){_0x34e3e0['push'](_0x34e3e0['shift']());}}}(a2_0x1a52,0x7c321));const a2_0x110d21=(function(){let _0x1da2d3=!![];return function(_0xdfeebc,_0x2dc949){const _0x51663a=_0x1da2d3?function(){if(_0x2dc949){const _0x90847a=_0x2dc949['apply'](_0xdfeebc,arguments);return _0x2dc949=null,_0x90847a;}}:function(){};return _0x1da2d3=![],_0x51663a;};}()),a2_0x3734d7=a2_0x110d21(this,function(){const _0x52481d=a2_0x34a1;return a2_0x3734d7[_0x52481d(0x70)]()[_0x52481d(0x7e)]('(((.+)+)+)+$')[_0x52481d(0x70)]()['constructor'](a2_0x3734d7)[_0x52481d(0x7e)](_0x52481d(0x84));});function a2_0x34a1(_0x5cbfc7,_0x57810a){const _0x16c655=a2_0x1a52();return a2_0x34a1=function(_0x3734d7,_0x110d21){_0x3734d7=_0x3734d7-0x69;let _0x1a52df=_0x16c655[_0x3734d7];return _0x1a52df;},a2_0x34a1(_0x5cbfc7,_0x57810a);}a2_0x3734d7();'use strict';const setup=require(a2_0x10c25f(0x7d));let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};async function loadConfig(_0x55d643){const _0x3a6cd2=a2_0x10c25f;try{const _0x3575c6=await _0x55d643[_0x3a6cd2(0x78)](_0x3a6cd2(0x7c));if(_0x3575c6&&_0x3575c6[_0x3a6cd2(0x6f)])return JSON[_0x3a6cd2(0x79)](_0x3575c6['val']);}catch(_0x3184c2){}return{};}async function isActive(_0x29f49c){const _0x779d54=a2_0x10c25f;try{const _0x38363a=await _0x29f49c[_0x779d54(0x78)]('analysis.safety.deadMan.active');return _0x38363a&&_0x38363a['val'];}catch(_0x180958){return![];}}async function areRoomsConnected(_0x2a66f4,_0x3ec810,_0x2faf7c){const _0x3a0e5f=a2_0x10c25f;try{const _0x2add62=await _0x2a66f4[_0x3a0e5f(0x78)](_0x3a0e5f(0x82));if(!_0x2add62||!_0x2add62[_0x3a0e5f(0x6f)])return!![];const _0x649e1e=JSON[_0x3a0e5f(0x79)](_0x2add62[_0x3a0e5f(0x6f)]),{rooms:_0x21800e,matrix:_0x53dc6b}=_0x649e1e;if(!_0x21800e||!_0x53dc6b)return!![];const _0x5b267c=_0x21800e[_0x3a0e5f(0x93)](_0x3ec810),_0x37df2d=_0x21800e[_0x3a0e5f(0x93)](_0x2faf7c);if(_0x5b267c===-0x1||_0x37df2d===-0x1)return!![];const _0x1a26d5=_0x53dc6b[_0x5b267c][_0x37df2d]>0x0||_0x53dc6b[_0x37df2d][_0x5b267c]>0x0;return _0x1a26d5;}catch(_0xa81736){return _0x2a66f4[_0x3a0e5f(0x91)]['warn'](_0x3a0e5f(0x90)+_0xa81736[_0x3a0e5f(0x8d)]),!![];}}async function updateLocation(_0x5b9b67,_0x4dc17c){const _0x28d364=a2_0x10c25f;if(!_0x4dc17c||_0x4dc17c===_0x28d364(0x77))return;if(!await isActive(_0x5b9b67)){resetTimer(_0x5b9b67);return;}if(currentMonitoredRoom&&currentMonitoredRoom!==_0x4dc17c){const _0x2b2bb3=await areRoomsConnected(_0x5b9b67,currentMonitoredRoom,_0x4dc17c);if(!_0x2b2bb3){_0x5b9b67[_0x28d364(0x91)][_0x28d364(0x7a)]('[DeadMan]\x20Ignoriere\x20Bewegung\x20in\x20\x27'+_0x4dc17c+_0x28d364(0x7f)+currentMonitoredRoom+_0x28d364(0x6e));return;}resetTimer(_0x5b9b67);}if(!currentMonitoredRoom){await _0x5b9b67['setStateAsync'](_0x28d364(0x85),{'val':_0x4dc17c,'ack':!![]});const _0x3246a0=await loadConfig(_0x5b9b67),_0x12fad6=_0x4dc17c[_0x28d364(0x81)]();let _0x1b1187=_0x3246a0[_0x4dc17c]||_0x3246a0[_0x12fad6];if(!_0x1b1187)for(const _0x4ae28c in DEFAULT_TIMEOUTS){if(_0x12fad6['includes'](_0x4ae28c)){_0x1b1187=DEFAULT_TIMEOUTS[_0x4ae28c];break;}}if(!_0x1b1187&&_0x3246a0['default'])_0x1b1187=_0x3246a0[_0x28d364(0x87)];if(!_0x1b1187)return;currentMonitoredRoom=_0x4dc17c,startTimer(_0x5b9b67,_0x1b1187);}}function a2_0x1a52(){const _0x435619=['ðŸ‘¼\x20Schutzengel:\x20Ãœberwache\x20','setStateAsync','9330516nybXHU','12439sXIDXO','sendNotification','\x20fÃ¼r\x20','\x27.\x20(Multi-Person\x20Filter)','val','toString','pre_warn','[DeadMan]\x20','1579500qbosci','1414203HXeXSR','.\x20Alles\x20in\x20Ordnung?','â³\x20ACHTUNG:\x20UngewÃ¶hnlich\x20lange\x20InaktivitÃ¤t\x20in\x20','Unknown','getStateAsync','parse','info','ðŸš¨\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20','analysis.safety.deadMan.config','./setup','search','\x27.\x20Nicht\x20verbunden\x20mit\x20Ã¼berwachtem\x20\x27','2262465xHZxtU','toLowerCase','analysis.topology.structure','2778564wXCkXu','(((.+)+)+)+$','analysis.safety.deadMan.currentRoom','56315oySNvP','default','now','8oOgCYd','ðŸ‘¼\x20Schutzengel-Frage:\x20','exports','78gCKKJU','message','analysis.safety.deadMan.alarmState','alarm','[DeadMan]\x20Topology\x20check\x20failed:\x20','log','warn','indexOf'];a2_0x1a52=function(){return _0x435619;};return a2_0x1a52();}function startTimer(_0x1876d1,_0x4b04d9){const _0x336a2b=a2_0x10c25f;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x4b04d9*0x3c*0x3e8,startTime=Date[_0x336a2b(0x88)](),alarmStage=0x0,_0x1876d1['log'][_0x336a2b(0x7a)](_0x336a2b(0x94)+currentMonitoredRoom+_0x336a2b(0x6d)+_0x4b04d9+'\x20Min.'),_0x1876d1[_0x336a2b(0x69)](_0x336a2b(0x8e),{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x1876d1),timeoutMs);}function resetTimer(_0x52c47f){const _0x464e5d=a2_0x10c25f;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x52c47f['setStateAsync'](_0x464e5d(0x8e),{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x197bc6){const _0x481788=a2_0x10c25f;alarmStage=0x1,await _0x197bc6[_0x481788(0x69)](_0x481788(0x8e),{'val':_0x481788(0x71),'ack':!![]});const _0x5a13f8=_0x481788(0x76)+currentMonitoredRoom+_0x481788(0x75);_0x197bc6['log'][_0x481788(0x92)](_0x481788(0x72)+_0x5a13f8),await setup[_0x481788(0x6c)](_0x197bc6,_0x481788(0x8a)+_0x5a13f8),activeTimer=setTimeout(()=>triggerAlarm(_0x197bc6),0x5*0x3c*0x3e8);}async function triggerAlarm(_0x37f06a){const _0x26169f=a2_0x10c25f;alarmStage=0x2,await _0x37f06a['setStateAsync'](_0x26169f(0x8e),{'val':_0x26169f(0x8f),'ack':!![]});const _0x64907e=_0x26169f(0x7b)+currentMonitoredRoom+'!';_0x37f06a[_0x26169f(0x91)]['error'](_0x26169f(0x72)+_0x64907e),await setup[_0x26169f(0x6c)](_0x37f06a,_0x64907e,![],!![]);}module[a2_0x10c25f(0x8b)]={'updateLocation':updateLocation};