function a2_0x2e37(){const _0x45a5b6=['analysis.safety.deadMan.alarmState','â³\x20ACHTUNG:\x20UngewÃ¶hnlich\x20lange\x20InaktivitÃ¤t\x20in\x20','parse','constructor','analysis.topology.structure','[DeadMan]\x20Topology\x20check\x20failed:\x20','[DeadMan]\x20Ignoriere\x20Bewegung\x20in\x20\x27','apply','toLowerCase','2ftcDSX','alarm','error','738ynxQds','setStateAsync','indexOf','4754031hoTFux','warn','1960oCzJzA','117139GXqMsN','[DeadMan]\x20','toString','default','5676JGgRnM','analysis.safety.deadMan.active','14434rYdCen','pre_warn','log','val','exports','analysis.safety.deadMan.config','1169028tmLPnU','20588oQmkKY','3716682vZVciE','sendNotification','\x20fÃ¼r\x20','search','.\x20Alles\x20in\x20Ordnung?','Unknown','(((.+)+)+)+$','15TnRQWi','info','getStateAsync','ðŸ‘¼\x20Schutzengel-Frage:\x20','104270Xqsczr','message','\x20Min.','./setup','ðŸ‘¼\x20Schutzengel:\x20Ãœberwache\x20'];a2_0x2e37=function(){return _0x45a5b6;};return a2_0x2e37();}const a2_0x1ac470=a2_0x365e;(function(_0x1252c1,_0x2ceaef){const _0x465d79=a2_0x365e,_0x1f9c88=_0x1252c1();while(!![]){try{const _0x2baf86=parseInt(_0x465d79(0xd7))/0x1*(parseInt(_0x465d79(0xf2))/0x2)+parseInt(_0x465d79(0xc8))/0x3+-parseInt(_0x465d79(0xd8))/0x4+parseInt(_0x465d79(0xe0))/0x5*(parseInt(_0x465d79(0xd9))/0x6)+-parseInt(_0x465d79(0xd1))/0x7*(-parseInt(_0x465d79(0xca))/0x8)+parseInt(_0x465d79(0xc5))/0x9*(parseInt(_0x465d79(0xe4))/0xa)+parseInt(_0x465d79(0xcb))/0xb*(-parseInt(_0x465d79(0xcf))/0xc);if(_0x2baf86===_0x2ceaef)break;else _0x1f9c88['push'](_0x1f9c88['shift']());}catch(_0x221c37){_0x1f9c88['push'](_0x1f9c88['shift']());}}}(a2_0x2e37,0xe314e));function a2_0x365e(_0x479761,_0x3e2eca){const _0x252560=a2_0x2e37();return a2_0x365e=function(_0x1b84b8,_0x4438da){_0x1b84b8=_0x1b84b8-0xc4;let _0x2e3780=_0x252560[_0x1b84b8];return _0x2e3780;},a2_0x365e(_0x479761,_0x3e2eca);}const a2_0x4438da=(function(){let _0x833940=!![];return function(_0x1c858d,_0x5cebea){const _0x20ab0a=_0x833940?function(){const _0x40ee6e=a2_0x365e;if(_0x5cebea){const _0x230a8b=_0x5cebea[_0x40ee6e(0xf0)](_0x1c858d,arguments);return _0x5cebea=null,_0x230a8b;}}:function(){};return _0x833940=![],_0x20ab0a;};}()),a2_0x1b84b8=a2_0x4438da(this,function(){const _0xd9f925=a2_0x365e;return a2_0x1b84b8[_0xd9f925(0xcd)]()['search'](_0xd9f925(0xdf))[_0xd9f925(0xcd)]()[_0xd9f925(0xec)](a2_0x1b84b8)[_0xd9f925(0xdc)](_0xd9f925(0xdf));});a2_0x1b84b8();'use strict';const setup=require(a2_0x1ac470(0xe7));let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};async function loadConfig(_0x44880d){const _0x11b782=a2_0x1ac470;try{const _0xe78c87=await _0x44880d[_0x11b782(0xe2)](_0x11b782(0xd6));if(_0xe78c87&&_0xe78c87[_0x11b782(0xd4)])return JSON[_0x11b782(0xeb)](_0xe78c87[_0x11b782(0xd4)]);}catch(_0x2292e6){}return{};}async function isActive(_0x11b041){const _0x3e839a=a2_0x1ac470;try{const _0x5ecae9=await _0x11b041[_0x3e839a(0xe2)](_0x3e839a(0xd0));return _0x5ecae9&&_0x5ecae9[_0x3e839a(0xd4)];}catch(_0x20f198){return![];}}async function areRoomsConnected(_0x2effa9,_0x8ba90a,_0x2fd147){const _0x123289=a2_0x1ac470;try{const _0x198747=await _0x2effa9[_0x123289(0xe2)](_0x123289(0xed));if(!_0x198747||!_0x198747[_0x123289(0xd4)])return!![];const _0x248e9b=JSON[_0x123289(0xeb)](_0x198747[_0x123289(0xd4)]),{rooms:_0x4e2ffc,matrix:_0x311603}=_0x248e9b;if(!_0x4e2ffc||!_0x311603)return!![];const _0x9f5e64=_0x4e2ffc[_0x123289(0xc7)](_0x8ba90a),_0x4a34db=_0x4e2ffc['indexOf'](_0x2fd147);if(_0x9f5e64===-0x1||_0x4a34db===-0x1)return!![];const _0xcd1c29=_0x311603[_0x9f5e64][_0x4a34db]>0x0||_0x311603[_0x4a34db][_0x9f5e64]>0x0;return _0xcd1c29;}catch(_0x415905){return _0x2effa9[_0x123289(0xd3)][_0x123289(0xc9)](_0x123289(0xee)+_0x415905[_0x123289(0xe5)]),!![];}}async function updateLocation(_0x483b35,_0x2c5c31){const _0x466955=a2_0x1ac470;if(!_0x2c5c31||_0x2c5c31===_0x466955(0xde))return;if(!await isActive(_0x483b35)){resetTimer(_0x483b35);return;}if(currentMonitoredRoom&&currentMonitoredRoom!==_0x2c5c31){const _0xccd4cf=await areRoomsConnected(_0x483b35,currentMonitoredRoom,_0x2c5c31);if(!_0xccd4cf){_0x483b35['log'][_0x466955(0xe1)](_0x466955(0xef)+_0x2c5c31+'\x27.\x20Nicht\x20verbunden\x20mit\x20Ã¼berwachtem\x20\x27'+currentMonitoredRoom+'\x27.\x20(Multi-Person\x20Filter)');return;}resetTimer(_0x483b35);}if(!currentMonitoredRoom){await _0x483b35[_0x466955(0xc6)]('analysis.safety.deadMan.currentRoom',{'val':_0x2c5c31,'ack':!![]});const _0x3c6a8f=await loadConfig(_0x483b35),_0x5d1c38=_0x2c5c31[_0x466955(0xf1)]();let _0x380553=_0x3c6a8f[_0x2c5c31]||_0x3c6a8f[_0x5d1c38];if(!_0x380553)for(const _0x29a5c8 in DEFAULT_TIMEOUTS){if(_0x5d1c38['includes'](_0x29a5c8)){_0x380553=DEFAULT_TIMEOUTS[_0x29a5c8];break;}}if(!_0x380553&&_0x3c6a8f[_0x466955(0xce)])_0x380553=_0x3c6a8f[_0x466955(0xce)];if(!_0x380553)return;currentMonitoredRoom=_0x2c5c31,startTimer(_0x483b35,_0x380553);}}function startTimer(_0x2d7dca,_0x49f02d){const _0xd5920a=a2_0x1ac470;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x49f02d*0x3c*0x3e8,startTime=Date['now'](),alarmStage=0x0,_0x2d7dca[_0xd5920a(0xd3)][_0xd5920a(0xe1)](_0xd5920a(0xe8)+currentMonitoredRoom+_0xd5920a(0xdb)+_0x49f02d+_0xd5920a(0xe6)),_0x2d7dca[_0xd5920a(0xc6)](_0xd5920a(0xe9),{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x2d7dca),timeoutMs);}function resetTimer(_0x4e0474){const _0x4efa57=a2_0x1ac470;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x4e0474[_0x4efa57(0xc6)](_0x4efa57(0xe9),{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x2f42c7){const _0x195f82=a2_0x1ac470;alarmStage=0x1,await _0x2f42c7['setStateAsync'](_0x195f82(0xe9),{'val':_0x195f82(0xd2),'ack':!![]});const _0x104925=_0x195f82(0xea)+currentMonitoredRoom+_0x195f82(0xdd);_0x2f42c7[_0x195f82(0xd3)][_0x195f82(0xc9)](_0x195f82(0xcc)+_0x104925),await setup[_0x195f82(0xda)](_0x2f42c7,_0x195f82(0xe3)+_0x104925),activeTimer=setTimeout(()=>triggerAlarm(_0x2f42c7),0x5*0x3c*0x3e8);}async function triggerAlarm(_0x4fa2c8){const _0x5cc74f=a2_0x1ac470;alarmStage=0x2,await _0x4fa2c8[_0x5cc74f(0xc6)](_0x5cc74f(0xe9),{'val':_0x5cc74f(0xf3),'ack':!![]});const _0x1bd32e='ðŸš¨\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20'+currentMonitoredRoom+'!';_0x4fa2c8['log'][_0x5cc74f(0xc4)](_0x5cc74f(0xcc)+_0x1bd32e),await setup[_0x5cc74f(0xda)](_0x4fa2c8,_0x1bd32e,![],!![]);}module[a2_0x1ac470(0xd5)]={'updateLocation':updateLocation};