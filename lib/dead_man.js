const a2_0x47f089=a2_0x26ac;(function(_0x193fae,_0x540d03){const _0x5369f0=a2_0x26ac,_0x90f7b0=_0x193fae();while(!![]){try{const _0x54783f=-parseInt(_0x5369f0(0xe4))/0x1*(-parseInt(_0x5369f0(0xf8))/0x2)+parseInt(_0x5369f0(0xec))/0x3+-parseInt(_0x5369f0(0xf3))/0x4+parseInt(_0x5369f0(0xf7))/0x5*(parseInt(_0x5369f0(0xe7))/0x6)+-parseInt(_0x5369f0(0xd6))/0x7*(-parseInt(_0x5369f0(0xd4))/0x8)+-parseInt(_0x5369f0(0xe8))/0x9+parseInt(_0x5369f0(0xde))/0xa*(parseInt(_0x5369f0(0xe0))/0xb);if(_0x54783f===_0x540d03)break;else _0x90f7b0['push'](_0x90f7b0['shift']());}catch(_0x373138){_0x90f7b0['push'](_0x90f7b0['shift']());}}}(a2_0x2597,0x5511b));const a2_0x45decb=(function(){let _0x9171ed=!![];return function(_0x5b9ce7,_0x568ece){const _0x1ef2cd=_0x9171ed?function(){const _0xc5a6c0=a2_0x26ac;if(_0x568ece){const _0x5a5498=_0x568ece[_0xc5a6c0(0xf9)](_0x5b9ce7,arguments);return _0x568ece=null,_0x5a5498;}}:function(){};return _0x9171ed=![],_0x1ef2cd;};}()),a2_0x415b2d=a2_0x45decb(this,function(){const _0x4a87fb=a2_0x26ac;return a2_0x415b2d[_0x4a87fb(0xe5)]()[_0x4a87fb(0xe1)](_0x4a87fb(0xed))[_0x4a87fb(0xe5)]()[_0x4a87fb(0xda)](a2_0x415b2d)['search'](_0x4a87fb(0xed));});a2_0x415b2d();'use strict';const setup=require(a2_0x47f089(0xee));let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};function a2_0x26ac(_0x24b267,_0x6b3915){const _0xb9642f=a2_0x2597();return a2_0x26ac=function(_0x415b2d,_0x45decb){_0x415b2d=_0x415b2d-0xcf;let _0x259726=_0xb9642f[_0x415b2d];return _0x259726;},a2_0x26ac(_0x24b267,_0x6b3915);}async function loadConfig(_0x5912cd){const _0xe5d06e=a2_0x47f089;try{const _0x2687ff=await _0x5912cd[_0xe5d06e(0xfc)](_0xe5d06e(0xdc));if(_0x2687ff&&_0x2687ff['val'])return JSON['parse'](_0x2687ff['val']);}catch(_0x4a2d9e){}return{};}async function isActive(_0x3fa5bd){const _0x1bfee8=a2_0x47f089;try{const _0x4882ba=await _0x3fa5bd[_0x1bfee8(0xfc)](_0x1bfee8(0xd0));return _0x4882ba&&_0x4882ba[_0x1bfee8(0xfb)];}catch(_0x2d81f5){return![];}}async function areRoomsConnected(_0x308a32,_0x392665,_0x58000d){const _0x274b17=a2_0x47f089;try{const _0x4feaf4=await _0x308a32[_0x274b17(0xfc)](_0x274b17(0xf2));if(!_0x4feaf4||!_0x4feaf4['val'])return!![];const _0x5dad2f=JSON[_0x274b17(0xd1)](_0x4feaf4['val']),{rooms:_0x3821c8,matrix:_0x5d92bd}=_0x5dad2f;if(!_0x3821c8||!_0x5d92bd)return!![];const _0x1697be=_0x3821c8[_0x274b17(0xfa)](_0x392665),_0x23fd3c=_0x3821c8[_0x274b17(0xfa)](_0x58000d);if(_0x1697be===-0x1||_0x23fd3c===-0x1)return!![];const _0x438290=_0x5d92bd[_0x1697be][_0x23fd3c]>0x0||_0x5d92bd[_0x23fd3c][_0x1697be]>0x0;return _0x438290;}catch(_0x4d2f9d){return _0x308a32[_0x274b17(0xf6)]['warn'](_0x274b17(0xd5)+_0x4d2f9d[_0x274b17(0xd9)]),!![];}}async function updateLocation(_0x364047,_0x4e0480){const _0x41326c=a2_0x47f089;if(!_0x4e0480||_0x4e0480==='Unknown')return;if(!await isActive(_0x364047)){resetTimer(_0x364047);return;}if(currentMonitoredRoom&&currentMonitoredRoom!==_0x4e0480){const _0x50b479=await areRoomsConnected(_0x364047,currentMonitoredRoom,_0x4e0480);if(!_0x50b479){_0x364047[_0x41326c(0xf6)][_0x41326c(0xdb)](_0x41326c(0xeb)+_0x4e0480+_0x41326c(0xf1)+currentMonitoredRoom+_0x41326c(0xdd));return;}resetTimer(_0x364047);}if(!currentMonitoredRoom){await _0x364047[_0x41326c(0xf4)](_0x41326c(0xcf),{'val':_0x4e0480,'ack':!![]});const _0x3e2ee5=await loadConfig(_0x364047),_0x34ae99=_0x4e0480[_0x41326c(0xf0)]();let _0x2319d7=_0x3e2ee5[_0x4e0480]||_0x3e2ee5[_0x34ae99];if(!_0x2319d7)for(const _0x1617ec in DEFAULT_TIMEOUTS){if(_0x34ae99[_0x41326c(0xef)](_0x1617ec)){_0x2319d7=DEFAULT_TIMEOUTS[_0x1617ec];break;}}if(!_0x2319d7&&_0x3e2ee5['default'])_0x2319d7=_0x3e2ee5[_0x41326c(0xe6)];if(!_0x2319d7)return;currentMonitoredRoom=_0x4e0480,startTimer(_0x364047,_0x2319d7);}}function startTimer(_0x355c03,_0x338876){const _0x4ee9c6=a2_0x47f089;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x338876*0x3c*0x3e8,startTime=Date['now'](),alarmStage=0x0,_0x355c03['log'][_0x4ee9c6(0xdb)](_0x4ee9c6(0xdf)+currentMonitoredRoom+'\x20f√ºr\x20'+_0x338876+_0x4ee9c6(0xd7)),_0x355c03['setStateAsync']('analysis.safety.deadMan.alarmState',{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x355c03),timeoutMs);}function resetTimer(_0x410972){if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x410972['setStateAsync']('analysis.safety.deadMan.alarmState',{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x274e04){const _0x65502b=a2_0x47f089;alarmStage=0x1,await _0x274e04[_0x65502b(0xf4)](_0x65502b(0xf5),{'val':'pre_warn','ack':!![]});const _0x761e96=_0x65502b(0xd2)+currentMonitoredRoom+'.\x20Alles\x20in\x20Ordnung?';_0x274e04[_0x65502b(0xf6)][_0x65502b(0xd3)](_0x65502b(0xe2)+_0x761e96),await setup[_0x65502b(0xea)](_0x274e04,_0x65502b(0xe9)+_0x761e96),activeTimer=setTimeout(()=>triggerAlarm(_0x274e04),0x5*0x3c*0x3e8);}async function triggerAlarm(_0x537058){const _0x1dccec=a2_0x47f089;alarmStage=0x2,await _0x537058[_0x1dccec(0xf4)]('analysis.safety.deadMan.alarmState',{'val':'alarm','ack':!![]});const _0x12d7d6=_0x1dccec(0xe3)+currentMonitoredRoom+'!';_0x537058[_0x1dccec(0xf6)][_0x1dccec(0xfd)]('[DeadMan]\x20'+_0x12d7d6),await setup[_0x1dccec(0xea)](_0x537058,_0x12d7d6,![],!![]);}module[a2_0x47f089(0xd8)]={'updateLocation':updateLocation};function a2_0x2597(){const _0x59d52e=['1045863maQiiV','(((.+)+)+)+$','./setup','includes','toLowerCase','\x27.\x20Nicht\x20verbunden\x20mit\x20√ºberwachtem\x20\x27','analysis.topology.structure','1740868mmqMpF','setStateAsync','analysis.safety.deadMan.alarmState','log','5xtcOCb','261306yGelzI','apply','indexOf','val','getStateAsync','error','analysis.safety.deadMan.currentRoom','analysis.safety.deadMan.active','parse','‚è≥\x20ACHTUNG:\x20Ungew√∂hnlich\x20lange\x20Inaktivit√§t\x20in\x20','warn','65432zbNFFN','[DeadMan]\x20Topology\x20check\x20failed:\x20','35IkQwwP','\x20Min.','exports','message','constructor','info','analysis.safety.deadMan.config','\x27.\x20(Multi-Person\x20Filter)','10koZRiR','üëº\x20Schutzengel:\x20√úberwache\x20','6648378gflTTI','search','[DeadMan]\x20','üö®\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20','1UBdnTb','toString','default','220482vIAFZH','3398886lJdRtH','üëº\x20Schutzengel-Frage:\x20','sendNotification','[DeadMan]\x20Ignoriere\x20Bewegung\x20in\x20\x27'];a2_0x2597=function(){return _0x59d52e;};return a2_0x2597();}