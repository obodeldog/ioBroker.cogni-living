const a2_0x36ec65=a2_0xa65f;(function(_0x44c69e,_0x591e95){const _0x20866a=a2_0xa65f,_0x5b4ed7=_0x44c69e();while(!![]){try{const _0x2f7160=-parseInt(_0x20866a(0x187))/0x1+parseInt(_0x20866a(0x191))/0x2*(parseInt(_0x20866a(0x197))/0x3)+parseInt(_0x20866a(0x189))/0x4+parseInt(_0x20866a(0x188))/0x5*(parseInt(_0x20866a(0x192))/0x6)+parseInt(_0x20866a(0x196))/0x7*(parseInt(_0x20866a(0x199))/0x8)+-parseInt(_0x20866a(0x176))/0x9*(parseInt(_0x20866a(0x184))/0xa)+-parseInt(_0x20866a(0x19c))/0xb;if(_0x2f7160===_0x591e95)break;else _0x5b4ed7['push'](_0x5b4ed7['shift']());}catch(_0x1921b2){_0x5b4ed7['push'](_0x5b4ed7['shift']());}}}(a2_0x11dd,0x73a68));const a2_0x4314e9=(function(){let _0x165998=!![];return function(_0x4cdd3c,_0x13ff74){const _0xbe25b=_0x165998?function(){if(_0x13ff74){const _0x1c343f=_0x13ff74['apply'](_0x4cdd3c,arguments);return _0x13ff74=null,_0x1c343f;}}:function(){};return _0x165998=![],_0xbe25b;};}()),a2_0x3e0573=a2_0x4314e9(this,function(){const _0x2d5d03=a2_0xa65f;return a2_0x3e0573['toString']()[_0x2d5d03(0x190)](_0x2d5d03(0x17d))['toString']()[_0x2d5d03(0x17f)](a2_0x3e0573)['search'](_0x2d5d03(0x17d));});a2_0x3e0573();'use strict';const setup=require('./setup');let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;function a2_0xa65f(_0x17d534,_0x1a12fc){const _0x4cd796=a2_0x11dd();return a2_0xa65f=function(_0x3e0573,_0x4314e9){_0x3e0573=_0x3e0573-0x174;let _0x11ddb4=_0x4cd796[_0x3e0573];return _0x11ddb4;},a2_0xa65f(_0x17d534,_0x1a12fc);}const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c,'default':0x78};async function loadConfig(_0x4f4ae8){const _0x1249bb=a2_0xa65f;try{const _0x5db475=await _0x4f4ae8[_0x1249bb(0x177)](_0x1249bb(0x18a));if(_0x5db475&&_0x5db475[_0x1249bb(0x17e)])return JSON['parse'](_0x5db475['val']);}catch(_0x2d970b){}return{};}async function isActive(_0x58fcd7){const _0x4b9746=a2_0xa65f;try{const _0x38fb6d=await _0x58fcd7[_0x4b9746(0x177)]('analysis.safety.deadMan.active');return _0x38fb6d&&_0x38fb6d['val'];}catch(_0x31449d){return![];}}async function updateLocation(_0x1093f6,_0xeb0764){const _0x553df5=a2_0xa65f;if(!_0xeb0764||_0xeb0764==='Unknown')return;if(!await isActive(_0x1093f6)){resetTimer(_0x1093f6);return;}const _0x54c77e=await loadConfig(_0x1093f6),_0x31a14a=_0xeb0764[_0x553df5(0x195)]();if(currentMonitoredRoom!==_0xeb0764){resetTimer(_0x1093f6),currentMonitoredRoom=_0xeb0764,await _0x1093f6['setStateAsync'](_0x553df5(0x19a),{'val':_0xeb0764,'ack':!![]});let _0x13aea5=_0x54c77e[_0xeb0764]||_0x54c77e[_0x31a14a];if(!_0x13aea5)for(const _0x2a1ee3 in DEFAULT_TIMEOUTS){if(_0x31a14a[_0x553df5(0x179)](_0x2a1ee3)){_0x13aea5=DEFAULT_TIMEOUTS[_0x2a1ee3];break;}}if(!_0x13aea5&&!_0x54c77e[_0x553df5(0x18b)]){_0x1093f6['log'][_0x553df5(0x182)](_0x553df5(0x194)+_0xeb0764+_0x553df5(0x18d));return;}_0x13aea5=_0x13aea5||DEFAULT_TIMEOUTS[_0x553df5(0x18b)],startTimer(_0x1093f6,_0x13aea5);}else{}}function startTimer(_0x384128,_0x153a5f){const _0x2eab7c=a2_0xa65f;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x153a5f*0x3c*0x3e8,startTime=Date[_0x2eab7c(0x17c)](),alarmStage=0x0,_0x384128[_0x2eab7c(0x183)][_0x2eab7c(0x180)]('üëº\x20Schutzengel:\x20√úberwache\x20'+currentMonitoredRoom+_0x2eab7c(0x193)+_0x153a5f+_0x2eab7c(0x178)),_0x384128['setStateAsync']('analysis.safety.deadMan.alarmState',{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x384128),timeoutMs);}function resetTimer(_0x1c17dc){const _0x158bcc=a2_0xa65f;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x1c17dc[_0x158bcc(0x175)](_0x158bcc(0x18f),{'val':'ok','ack':!![]}),_0x1c17dc['setStateAsync'](_0x158bcc(0x19a),{'val':'','ack':!![]});}async function triggerPreWarn(_0x20b91b){const _0x2832b4=a2_0xa65f;alarmStage=0x1,await _0x20b91b[_0x2832b4(0x175)](_0x2832b4(0x18f),{'val':_0x2832b4(0x174),'ack':!![]});const _0xa3dc1f=_0x2832b4(0x186)+currentMonitoredRoom+_0x2832b4(0x181);_0x20b91b[_0x2832b4(0x183)][_0x2832b4(0x198)](_0x2832b4(0x17a)+_0xa3dc1f),setup['sendNotification'](_0x20b91b,_0x2832b4(0x18e)+_0xa3dc1f),activeTimer=setTimeout(()=>triggerAlarm(_0x20b91b),0x5*0x3c*0x3e8);}function a2_0x11dd(){const _0x335ccc=['4088650unsAjU','661428wMsYvb','analysis.safety.deadMan.config','default','sendNotification','\x20(Ignoriert)','üëº\x20Schutzengel-Frage:\x20','analysis.safety.deadMan.alarmState','search','1528220OCrNgF','6YzGIHI','\x20f√ºr\x20','[DeadMan]\x20Kein\x20Timer\x20f√ºr\x20','toLowerCase','364924WSxEsd','3aWrtse','warn','136ZxCNfx','analysis.safety.deadMan.currentRoom','exports','13179595qwjKXX','pre_warn','setStateAsync','228591Gxxyix','getStateAsync','\x20Min.','includes','[DeadMan]\x20','alarm','now','(((.+)+)+)+$','val','constructor','info','.\x20Alles\x20in\x20Ordnung?','debug','log','370QarrzQ','error','‚è≥\x20ACHTUNG:\x20Ungew√∂hnlich\x20lange\x20Inaktivit√§t\x20in\x20','21829VBclaP'];a2_0x11dd=function(){return _0x335ccc;};return a2_0x11dd();}async function triggerAlarm(_0x1128af){const _0x46c8f1=a2_0xa65f;alarmStage=0x2,await _0x1128af[_0x46c8f1(0x175)](_0x46c8f1(0x18f),{'val':_0x46c8f1(0x17b),'ack':!![]});const _0xe026cc='üö®\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20'+currentMonitoredRoom+'!';_0x1128af[_0x46c8f1(0x183)][_0x46c8f1(0x185)]('[DeadMan]\x20'+_0xe026cc),setup[_0x46c8f1(0x18c)](_0x1128af,_0xe026cc,![],!![]);}module[a2_0x36ec65(0x19b)]={'updateLocation':updateLocation};