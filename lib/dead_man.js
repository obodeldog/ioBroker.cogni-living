function a2_0x18cd(_0x1ba2cc,_0x640bfc){const _0x36110f=a2_0x5926();return a2_0x18cd=function(_0x4e062b,_0x19049d){_0x4e062b=_0x4e062b-0xdf;let _0x592627=_0x36110f[_0x4e062b];return _0x592627;},a2_0x18cd(_0x1ba2cc,_0x640bfc);}function a2_0x5926(){const _0x234dec=['sendNotification','Unknown','analysis.safety.deadMan.alarmState','analysis.safety.deadMan.currentRoom','10981872IKLqNG','60ZBpGDL','error','623370IwIaVn','now','default','analysis.safety.deadMan.config','143aAIZbb','log','indexOf','(((.+)+)+)+$','alarm','1785SailVX','113345dmafdq','includes','\x20fÃ¼r\x20','27171rUbPZW','parse','toString','2854geHUxB','./setup','33CWtrQT','ðŸ‘¼\x20Schutzengel-Frage:\x20','[DeadMan]\x20Topology\x20check\x20failed:\x20','824ORIQYf','pre_warn','analysis.topology.structure','setStateAsync','getStateAsync','search','ðŸ‘¼\x20Schutzengel:\x20Ãœberwache\x20','exports','1182010LouTwh','6924wogsoN','val','warn','apply','\x27.\x20Nicht\x20verbunden\x20mit\x20Ã¼berwachtem\x20\x27','message','\x20Min.'];a2_0x5926=function(){return _0x234dec;};return a2_0x5926();}const a2_0x6e40df=a2_0x18cd;(function(_0x4d93d2,_0x352578){const _0x1d1135=a2_0x18cd,_0x17982a=_0x4d93d2();while(!![]){try{const _0x1044c7=parseInt(_0x1d1135(0xee))/0x1*(-parseInt(_0x1d1135(0xfa))/0x2)+parseInt(_0x1d1135(0xea))/0x3+parseInt(_0x1d1135(0xe8))/0x4*(-parseInt(_0x1d1135(0xf4))/0x5)+parseInt(_0x1d1135(0x108))/0x6*(parseInt(_0x1d1135(0xf3))/0x7)+parseInt(_0x1d1135(0xff))/0x8*(-parseInt(_0x1d1135(0xf7))/0x9)+parseInt(_0x1d1135(0x107))/0xa*(-parseInt(_0x1d1135(0xfc))/0xb)+parseInt(_0x1d1135(0xe7))/0xc;if(_0x1044c7===_0x352578)break;else _0x17982a['push'](_0x17982a['shift']());}catch(_0x47fbf9){_0x17982a['push'](_0x17982a['shift']());}}}(a2_0x5926,0x32ac8));const a2_0x19049d=(function(){let _0x6a6e64=!![];return function(_0x144bb0,_0x2d5773){const _0x2ca27d=_0x6a6e64?function(){const _0x5c27f8=a2_0x18cd;if(_0x2d5773){const _0x375796=_0x2d5773[_0x5c27f8(0xdf)](_0x144bb0,arguments);return _0x2d5773=null,_0x375796;}}:function(){};return _0x6a6e64=![],_0x2ca27d;};}()),a2_0x4e062b=a2_0x19049d(this,function(){const _0x1e8031=a2_0x18cd;return a2_0x4e062b['toString']()[_0x1e8031(0x104)](_0x1e8031(0xf1))[_0x1e8031(0xf9)]()['constructor'](a2_0x4e062b)[_0x1e8031(0x104)](_0x1e8031(0xf1));});a2_0x4e062b();'use strict';const setup=require(a2_0x6e40df(0xfb));let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};async function loadConfig(_0x73baff){const _0x381277=a2_0x6e40df;try{const _0x1699d1=await _0x73baff[_0x381277(0x103)](_0x381277(0xed));if(_0x1699d1&&_0x1699d1[_0x381277(0x109)])return JSON[_0x381277(0xf8)](_0x1699d1[_0x381277(0x109)]);}catch(_0x9013b3){}return{};}async function isActive(_0x2017c6){const _0x178cc4=a2_0x6e40df;try{const _0x3d29ab=await _0x2017c6[_0x178cc4(0x103)]('analysis.safety.deadMan.active');return _0x3d29ab&&_0x3d29ab['val'];}catch(_0x6c1e24){return![];}}async function areRoomsConnected(_0x58cccf,_0x3ecab7,_0x4eb534){const _0xc2ff7a=a2_0x6e40df;try{const _0x43ec3a=await _0x58cccf[_0xc2ff7a(0x103)](_0xc2ff7a(0x101));if(!_0x43ec3a||!_0x43ec3a[_0xc2ff7a(0x109)])return!![];const _0x1db981=JSON[_0xc2ff7a(0xf8)](_0x43ec3a[_0xc2ff7a(0x109)]),{rooms:_0x5f1850,matrix:_0x4c7ed8}=_0x1db981;if(!_0x5f1850||!_0x4c7ed8)return!![];const _0x34609e=_0x5f1850[_0xc2ff7a(0xf0)](_0x3ecab7),_0x2afda0=_0x5f1850[_0xc2ff7a(0xf0)](_0x4eb534);if(_0x34609e===-0x1||_0x2afda0===-0x1)return!![];const _0x45b11d=_0x4c7ed8[_0x34609e][_0x2afda0]>0x0||_0x4c7ed8[_0x2afda0][_0x34609e]>0x0;return _0x45b11d;}catch(_0x5d3fd3){return _0x58cccf[_0xc2ff7a(0xef)]['warn'](_0xc2ff7a(0xfe)+_0x5d3fd3[_0xc2ff7a(0xe1)]),!![];}}async function updateLocation(_0x123042,_0x4ff74b){const _0x34d89f=a2_0x6e40df;if(!_0x4ff74b||_0x4ff74b===_0x34d89f(0xe4))return;if(!await isActive(_0x123042)){resetTimer(_0x123042);return;}if(currentMonitoredRoom&&currentMonitoredRoom!==_0x4ff74b){const _0x61acad=await areRoomsConnected(_0x123042,currentMonitoredRoom,_0x4ff74b);if(!_0x61acad){_0x123042[_0x34d89f(0xef)]['info']('[DeadMan]\x20Ignoriere\x20Bewegung\x20in\x20\x27'+_0x4ff74b+_0x34d89f(0xe0)+currentMonitoredRoom+'\x27.\x20(Multi-Person\x20Filter)');return;}resetTimer(_0x123042);}if(!currentMonitoredRoom){await _0x123042['setStateAsync'](_0x34d89f(0xe6),{'val':_0x4ff74b,'ack':!![]});const _0x38203e=await loadConfig(_0x123042),_0x46942c=_0x4ff74b['toLowerCase']();let _0xc54a34=_0x38203e[_0x4ff74b]||_0x38203e[_0x46942c];if(!_0xc54a34)for(const _0x3ea852 in DEFAULT_TIMEOUTS){if(_0x46942c[_0x34d89f(0xf5)](_0x3ea852)){_0xc54a34=DEFAULT_TIMEOUTS[_0x3ea852];break;}}if(!_0xc54a34&&_0x38203e[_0x34d89f(0xec)])_0xc54a34=_0x38203e[_0x34d89f(0xec)];if(!_0xc54a34)return;currentMonitoredRoom=_0x4ff74b,startTimer(_0x123042,_0xc54a34);}}function startTimer(_0x3acb29,_0x1d903b){const _0xb345ed=a2_0x6e40df;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x1d903b*0x3c*0x3e8,startTime=Date[_0xb345ed(0xeb)](),alarmStage=0x0,_0x3acb29[_0xb345ed(0xef)]['info'](_0xb345ed(0x105)+currentMonitoredRoom+_0xb345ed(0xf6)+_0x1d903b+_0xb345ed(0xe2)),_0x3acb29[_0xb345ed(0x102)](_0xb345ed(0xe5),{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x3acb29),timeoutMs);}function resetTimer(_0x46a046){const _0x22d7f7=a2_0x6e40df;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x46a046[_0x22d7f7(0x102)](_0x22d7f7(0xe5),{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x4088e0){const _0x15554d=a2_0x6e40df;alarmStage=0x1,await _0x4088e0[_0x15554d(0x102)](_0x15554d(0xe5),{'val':_0x15554d(0x100),'ack':!![]});const _0x581c82='â³\x20ACHTUNG:\x20UngewÃ¶hnlich\x20lange\x20InaktivitÃ¤t\x20in\x20'+currentMonitoredRoom+'.\x20Alles\x20in\x20Ordnung?';_0x4088e0[_0x15554d(0xef)][_0x15554d(0x10a)]('[DeadMan]\x20'+_0x581c82),await setup[_0x15554d(0xe3)](_0x4088e0,_0x15554d(0xfd)+_0x581c82),activeTimer=setTimeout(()=>triggerAlarm(_0x4088e0),0x5*0x3c*0x3e8);}async function triggerAlarm(_0x362564){const _0x40064e=a2_0x6e40df;alarmStage=0x2,await _0x362564[_0x40064e(0x102)]('analysis.safety.deadMan.alarmState',{'val':_0x40064e(0xf2),'ack':!![]});const _0x177372='ðŸš¨\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20'+currentMonitoredRoom+'!';_0x362564[_0x40064e(0xef)][_0x40064e(0xe9)]('[DeadMan]\x20'+_0x177372),await setup['sendNotification'](_0x362564,_0x177372,![],!![]);}module[a2_0x6e40df(0x106)]={'updateLocation':updateLocation};