const a2_0x243039=a2_0x48d9;(function(_0x5d9b8d,_0x4da332){const _0x42edab=a2_0x48d9,_0x4f3075=_0x5d9b8d();while(!![]){try{const _0x47c125=-parseInt(_0x42edab(0x1f0))/0x1*(-parseInt(_0x42edab(0x1ee))/0x2)+parseInt(_0x42edab(0x20c))/0x3+parseInt(_0x42edab(0x204))/0x4+parseInt(_0x42edab(0x1ed))/0x5+-parseInt(_0x42edab(0x1fd))/0x6+-parseInt(_0x42edab(0x1ef))/0x7+-parseInt(_0x42edab(0x1f6))/0x8*(-parseInt(_0x42edab(0x1ec))/0x9);if(_0x47c125===_0x4da332)break;else _0x4f3075['push'](_0x4f3075['shift']());}catch(_0xf2538d){_0x4f3075['push'](_0x4f3075['shift']());}}}(a2_0x3a43,0xebf0c));const a2_0x1a0daf=(function(){let _0x4188a2=!![];return function(_0x297ba8,_0x49d921){const _0x175aa8=_0x4188a2?function(){const _0x544403=a2_0x48d9;if(_0x49d921){const _0x51246c=_0x49d921[_0x544403(0x20b)](_0x297ba8,arguments);return _0x49d921=null,_0x51246c;}}:function(){};return _0x4188a2=![],_0x175aa8;};}()),a2_0x3049fc=a2_0x1a0daf(this,function(){const _0x230779=a2_0x48d9;return a2_0x3049fc[_0x230779(0x1fc)]()['search'](_0x230779(0x212))[_0x230779(0x1fc)]()[_0x230779(0x1fe)](a2_0x3049fc)['search'](_0x230779(0x212));});a2_0x3049fc();'use strict';const setup=require(a2_0x243039(0x1fb));let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;function a2_0x48d9(_0x358da2,_0x1f8a3b){const _0x4f7d03=a2_0x3a43();return a2_0x48d9=function(_0x3049fc,_0x1a0daf){_0x3049fc=_0x3049fc-0x1e9;let _0x3a43a7=_0x4f7d03[_0x3049fc];return _0x3a43a7;},a2_0x48d9(_0x358da2,_0x1f8a3b);}const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};async function loadConfig(_0x3fbb49){const _0x5c9522=a2_0x243039;try{const _0x8a5036=await _0x3fbb49[_0x5c9522(0x20f)](_0x5c9522(0x1eb));if(_0x8a5036&&_0x8a5036['val'])return JSON[_0x5c9522(0x206)](_0x8a5036[_0x5c9522(0x1ff)]);}catch(_0x1abb42){}return{};}async function isActive(_0x57f99d){const _0x1b07ff=a2_0x243039;try{const _0x54686b=await _0x57f99d[_0x1b07ff(0x20f)]('analysis.safety.deadMan.active');return _0x54686b&&_0x54686b['val'];}catch(_0x5c21c4){return![];}}async function areRoomsConnected(_0x5a6b5c,_0x15a724,_0x3a9430){const _0x1317a1=a2_0x243039;try{const _0x11a2b5=await _0x5a6b5c[_0x1317a1(0x20f)]('analysis.topology.structure');if(!_0x11a2b5||!_0x11a2b5[_0x1317a1(0x1ff)])return!![];const _0x3fe652=JSON[_0x1317a1(0x206)](_0x11a2b5[_0x1317a1(0x1ff)]),{rooms:_0x52206b,matrix:_0x182b73}=_0x3fe652;if(!_0x52206b||!_0x182b73)return!![];const _0x3b3e5a=_0x52206b['indexOf'](_0x15a724),_0x5a63c8=_0x52206b['indexOf'](_0x3a9430);if(_0x3b3e5a===-0x1||_0x5a63c8===-0x1)return!![];const _0x46ef32=_0x182b73[_0x3b3e5a][_0x5a63c8]>0x0||_0x182b73[_0x5a63c8][_0x3b3e5a]>0x0;return _0x46ef32;}catch(_0x1e4a3e){return _0x5a6b5c[_0x1317a1(0x1f9)]['warn'](_0x1317a1(0x1f5)+_0x1e4a3e[_0x1317a1(0x209)]),!![];}}async function updateLocation(_0x3dfafe,_0x4309ff){const _0x2a9bba=a2_0x243039;if(!_0x4309ff||_0x4309ff===_0x2a9bba(0x20a))return;if(!await isActive(_0x3dfafe)){resetTimer(_0x3dfafe);return;}if(currentMonitoredRoom&&currentMonitoredRoom!==_0x4309ff){const _0x2429b7=await areRoomsConnected(_0x3dfafe,currentMonitoredRoom,_0x4309ff);if(!_0x2429b7){_0x3dfafe[_0x2a9bba(0x1f9)][_0x2a9bba(0x203)](_0x2a9bba(0x210)+_0x4309ff+_0x2a9bba(0x1f2)+currentMonitoredRoom+_0x2a9bba(0x1ea));return;}resetTimer(_0x3dfafe);}if(!currentMonitoredRoom){await _0x3dfafe[_0x2a9bba(0x202)](_0x2a9bba(0x20d),{'val':_0x4309ff,'ack':!![]});const _0x37acff=await loadConfig(_0x3dfafe),_0x3919a5=_0x4309ff[_0x2a9bba(0x205)]();let _0x32c5e9=_0x37acff[_0x4309ff]||_0x37acff[_0x3919a5];if(!_0x32c5e9)for(const _0xcfaeb6 in DEFAULT_TIMEOUTS){if(_0x3919a5[_0x2a9bba(0x1f4)](_0xcfaeb6)){_0x32c5e9=DEFAULT_TIMEOUTS[_0xcfaeb6];break;}}if(!_0x32c5e9&&_0x37acff[_0x2a9bba(0x20e)])_0x32c5e9=_0x37acff[_0x2a9bba(0x20e)];if(!_0x32c5e9)return;currentMonitoredRoom=_0x4309ff,startTimer(_0x3dfafe,_0x32c5e9);}}function startTimer(_0x5b2c54,_0x47b618){const _0x100694=a2_0x243039;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x47b618*0x3c*0x3e8,startTime=Date[_0x100694(0x208)](),alarmStage=0x0,_0x5b2c54['log'][_0x100694(0x203)]('ðŸ‘¼\x20Schutzengel:\x20Ãœberwache\x20'+currentMonitoredRoom+'\x20fÃ¼r\x20'+_0x47b618+_0x100694(0x1f1)),_0x5b2c54[_0x100694(0x202)](_0x100694(0x1e9),{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x5b2c54),timeoutMs);}function a2_0x3a43(){const _0x4b4bc4=['.\x20Alles\x20in\x20Ordnung?','setStateAsync','info','3414696sWMwUN','toLowerCase','parse','â³\x20ACHTUNG:\x20UngewÃ¶hnlich\x20lange\x20InaktivitÃ¤t\x20in\x20','now','message','Unknown','apply','2198547gZHHoD','analysis.safety.deadMan.currentRoom','default','getStateAsync','[DeadMan]\x20Ignoriere\x20Bewegung\x20in\x20\x27','exports','(((.+)+)+)+$','analysis.safety.deadMan.alarmState','\x27.\x20(Multi-Person\x20Filter)','analysis.safety.deadMan.config','7407tenPCU','3738935uoaQcZ','14176bkugao','10619147aFwHBx','56GvFfJa','\x20Min.','\x27.\x20Nicht\x20verbunden\x20mit\x20Ã¼berwachtem\x20\x27','alarm','includes','[DeadMan]\x20Topology\x20check\x20failed:\x20','6520kbGhEA','ðŸš¨\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20','sendNotification','log','error','./setup','toString','5511300eyBrWf','constructor','val','ðŸ‘¼\x20Schutzengel-Frage:\x20'];a2_0x3a43=function(){return _0x4b4bc4;};return a2_0x3a43();}function resetTimer(_0x49ec36){const _0x183f2f=a2_0x243039;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x49ec36[_0x183f2f(0x202)](_0x183f2f(0x1e9),{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x134967){const _0x1a7a97=a2_0x243039;alarmStage=0x1,await _0x134967[_0x1a7a97(0x202)](_0x1a7a97(0x1e9),{'val':'pre_warn','ack':!![]});const _0x69026f=_0x1a7a97(0x207)+currentMonitoredRoom+_0x1a7a97(0x201);_0x134967[_0x1a7a97(0x1f9)]['warn']('[DeadMan]\x20'+_0x69026f),await setup[_0x1a7a97(0x1f8)](_0x134967,_0x1a7a97(0x200)+_0x69026f),activeTimer=setTimeout(()=>triggerAlarm(_0x134967),0x5*0x3c*0x3e8);}async function triggerAlarm(_0x16c1d7){const _0x2040a0=a2_0x243039;alarmStage=0x2,await _0x16c1d7[_0x2040a0(0x202)](_0x2040a0(0x1e9),{'val':_0x2040a0(0x1f3),'ack':!![]});const _0x51a090=_0x2040a0(0x1f7)+currentMonitoredRoom+'!';_0x16c1d7[_0x2040a0(0x1f9)][_0x2040a0(0x1fa)]('[DeadMan]\x20'+_0x51a090),await setup[_0x2040a0(0x1f8)](_0x16c1d7,_0x51a090,![],!![]);}module[a2_0x243039(0x211)]={'updateLocation':updateLocation};