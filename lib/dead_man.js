function a2_0x11f1(){const _0x3fd62d=['analysis.safety.deadMan.config','log','analysis.topology.structure','2oOzoOL','default','\x20fÃ¼r\x20','now','constructor','getStateAsync','.\x20Alles\x20in\x20Ordnung?','stringify','exports','alarm','error','analysis.safety.deadMan.active','Unknown','(((.+)+)+)+$','333YKrKDn','ðŸ‘¼\x20Schutzengel-Frage:\x20','4839372GrzFLg','analysis.safety.deadMan.lastIgnored','parse','5227962mKjbeB','[DeadMan]\x20Topology\x20check\x20failed:\x20','apply','info','indexOf','1782507BLYbWv','sendNotification','val','analysis.safety.deadMan.alarmState','analysis.safety.deadMan.currentRoom','8475385qMMuoE','\x27.\x20Nicht\x20verbunden\x20mit\x20Ã¼berwachtem\x20\x27','[DeadMan]\x20','setStateAsync','2720396VMBffS','search','warn','1106488RBERPY','Ignoriere\x20Bewegung\x20in\x20\x27','ðŸš¨\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20','\x20(Multi-Person\x20Filter)','toLowerCase','./setup','message','3307470JkWCVY','toString'];a2_0x11f1=function(){return _0x3fd62d;};return a2_0x11f1();}const a2_0x11e759=a2_0x353d;(function(_0x46f764,_0x13fce3){const _0x2d78ab=a2_0x353d,_0x26ddb0=_0x46f764();while(!![]){try{const _0xdc2d=-parseInt(_0x2d78ab(0x9c))/0x1+parseInt(_0x2d78ab(0xb4))/0x2*(-parseInt(_0x2d78ab(0x97))/0x3)+parseInt(_0x2d78ab(0x94))/0x4+-parseInt(_0x2d78ab(0xa1))/0x5+-parseInt(_0x2d78ab(0xaf))/0x6+parseInt(_0x2d78ab(0xa5))/0x7+parseInt(_0x2d78ab(0xa8))/0x8*(parseInt(_0x2d78ab(0x92))/0x9);if(_0xdc2d===_0x13fce3)break;else _0x26ddb0['push'](_0x26ddb0['shift']());}catch(_0x53a365){_0x26ddb0['push'](_0x26ddb0['shift']());}}}(a2_0x11f1,0xe696f));const a2_0x4b78d9=(function(){let _0x319f6c=!![];return function(_0x248396,_0x4c5f72){const _0x1af617=_0x319f6c?function(){const _0x55e7a4=a2_0x353d;if(_0x4c5f72){const _0x3b1fe4=_0x4c5f72[_0x55e7a4(0x99)](_0x248396,arguments);return _0x4c5f72=null,_0x3b1fe4;}}:function(){};return _0x319f6c=![],_0x1af617;};}()),a2_0x1c668d=a2_0x4b78d9(this,function(){const _0x110ca2=a2_0x353d;return a2_0x1c668d[_0x110ca2(0xb0)]()[_0x110ca2(0xa6)](_0x110ca2(0x91))[_0x110ca2(0xb0)]()[_0x110ca2(0x88)](a2_0x1c668d)['search'](_0x110ca2(0x91));});a2_0x1c668d();'use strict';const setup=require(a2_0x11e759(0xad));let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;function a2_0x353d(_0x79b4a8,_0x2cc13e){const _0x3dbff7=a2_0x11f1();return a2_0x353d=function(_0x1c668d,_0x4b78d9){_0x1c668d=_0x1c668d-0x85;let _0x11f143=_0x3dbff7[_0x1c668d];return _0x11f143;},a2_0x353d(_0x79b4a8,_0x2cc13e);}const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};async function loadConfig(_0x2fee35){const _0x28c566=a2_0x11e759;try{const _0x5c12b0=await _0x2fee35[_0x28c566(0x89)](_0x28c566(0xb1));if(_0x5c12b0&&_0x5c12b0[_0x28c566(0x9e)])return JSON[_0x28c566(0x96)](_0x5c12b0[_0x28c566(0x9e)]);}catch(_0x11f914){}return{};}async function isActive(_0x41872a){const _0x58e9fc=a2_0x11e759;try{const _0x2bc722=await _0x41872a[_0x58e9fc(0x89)](_0x58e9fc(0x8f));return _0x2bc722&&_0x2bc722[_0x58e9fc(0x9e)];}catch(_0x25c00b){return![];}}async function areRoomsConnected(_0x2b9781,_0x36da8b,_0xe69ef2){const _0x14792f=a2_0x11e759;try{const _0x26d12e=await _0x2b9781[_0x14792f(0x89)](_0x14792f(0xb3));if(!_0x26d12e||!_0x26d12e['val'])return!![];const _0x11cd67=JSON[_0x14792f(0x96)](_0x26d12e[_0x14792f(0x9e)]),{rooms:_0x14c7f6,matrix:_0x127958}=_0x11cd67;if(!_0x14c7f6||!_0x127958)return!![];const _0x33539a=_0x14c7f6[_0x14792f(0x9b)](_0x36da8b),_0xa2ca49=_0x14c7f6[_0x14792f(0x9b)](_0xe69ef2);if(_0x33539a===-0x1||_0xa2ca49===-0x1)return!![];const _0x2ae992=_0x127958[_0x33539a][_0xa2ca49]>0x0||_0x127958[_0xa2ca49][_0x33539a]>0x0;return _0x2ae992;}catch(_0x524b7f){return _0x2b9781[_0x14792f(0xb2)][_0x14792f(0xa7)](_0x14792f(0x98)+_0x524b7f[_0x14792f(0xae)]),!![];}}async function updateLocation(_0x225695,_0x3b8cb4){const _0x167b05=a2_0x11e759;if(!_0x3b8cb4||_0x3b8cb4===_0x167b05(0x90))return;if(!await isActive(_0x225695)){resetTimer(_0x225695);return;}if(currentMonitoredRoom&&currentMonitoredRoom!==_0x3b8cb4){const _0x2532b9=await areRoomsConnected(_0x225695,currentMonitoredRoom,_0x3b8cb4);if(!_0x2532b9){const _0x549a44=_0x167b05(0xa9)+_0x3b8cb4+_0x167b05(0xa2)+currentMonitoredRoom+'\x27.';_0x225695[_0x167b05(0xb2)][_0x167b05(0x9a)](_0x167b05(0xa3)+_0x549a44+_0x167b05(0xab)),await _0x225695[_0x167b05(0xa4)](_0x167b05(0x95),{'val':JSON[_0x167b05(0x8b)]({'room':_0x3b8cb4,'reason':_0x549a44,'timestamp':Date[_0x167b05(0x87)]()}),'ack':!![]});return;}resetTimer(_0x225695);}if(!currentMonitoredRoom){await _0x225695['setStateAsync'](_0x167b05(0xa0),{'val':_0x3b8cb4,'ack':!![]});const _0x2f26e6=await loadConfig(_0x225695),_0x263b9b=_0x3b8cb4[_0x167b05(0xac)]();let _0xd3c448=_0x2f26e6[_0x3b8cb4]||_0x2f26e6[_0x263b9b];if(!_0xd3c448)for(const _0xdf9fc6 in DEFAULT_TIMEOUTS){if(_0x263b9b['includes'](_0xdf9fc6)){_0xd3c448=DEFAULT_TIMEOUTS[_0xdf9fc6];break;}}if(!_0xd3c448&&_0x2f26e6[_0x167b05(0x85)])_0xd3c448=_0x2f26e6['default'];if(!_0xd3c448)return;currentMonitoredRoom=_0x3b8cb4,startTimer(_0x225695,_0xd3c448);}}function startTimer(_0x3b4be6,_0x4e1493){const _0x1dccf7=a2_0x11e759;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x4e1493*0x3c*0x3e8,startTime=Date['now'](),alarmStage=0x0,_0x3b4be6['log'][_0x1dccf7(0x9a)]('ðŸ‘¼\x20Schutzengel:\x20Ãœberwache\x20'+currentMonitoredRoom+_0x1dccf7(0x86)+_0x4e1493+'\x20Min.'),_0x3b4be6['setStateAsync'](_0x1dccf7(0x9f),{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x3b4be6),timeoutMs);}function resetTimer(_0x3f31f2){const _0x50dfdd=a2_0x11e759;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x3f31f2[_0x50dfdd(0xa4)](_0x50dfdd(0x9f),{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x4df503){const _0x4758d8=a2_0x11e759;alarmStage=0x1,await _0x4df503['setStateAsync'](_0x4758d8(0x9f),{'val':'pre_warn','ack':!![]});const _0x2e04ba='â³\x20ACHTUNG:\x20UngewÃ¶hnlich\x20lange\x20InaktivitÃ¤t\x20in\x20'+currentMonitoredRoom+_0x4758d8(0x8a);_0x4df503[_0x4758d8(0xb2)][_0x4758d8(0xa7)](_0x4758d8(0xa3)+_0x2e04ba),await setup[_0x4758d8(0x9d)](_0x4df503,_0x4758d8(0x93)+_0x2e04ba),activeTimer=setTimeout(()=>triggerAlarm(_0x4df503),0x5*0x3c*0x3e8);}async function triggerAlarm(_0x299e3c){const _0x27ba90=a2_0x11e759;alarmStage=0x2,await _0x299e3c[_0x27ba90(0xa4)](_0x27ba90(0x9f),{'val':_0x27ba90(0x8d),'ack':!![]});const _0x4e8e21=_0x27ba90(0xaa)+currentMonitoredRoom+'!';_0x299e3c[_0x27ba90(0xb2)][_0x27ba90(0x8e)](_0x27ba90(0xa3)+_0x4e8e21),await setup[_0x27ba90(0x9d)](_0x299e3c,_0x4e8e21,![],!![]);}module[a2_0x11e759(0x8c)]={'updateLocation':updateLocation};