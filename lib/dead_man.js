const a2_0x4b044f=a2_0x467a;(function(_0x20b0c1,_0x5306e3){const _0x2966b6=a2_0x467a,_0x2be467=_0x20b0c1();while(!![]){try{const _0x5a1c4e=-parseInt(_0x2966b6(0x16f))/0x1*(-parseInt(_0x2966b6(0x180))/0x2)+parseInt(_0x2966b6(0x166))/0x3+-parseInt(_0x2966b6(0x184))/0x4*(parseInt(_0x2966b6(0x16d))/0x5)+-parseInt(_0x2966b6(0x165))/0x6+parseInt(_0x2966b6(0x182))/0x7+parseInt(_0x2966b6(0x18c))/0x8+-parseInt(_0x2966b6(0x179))/0x9*(parseInt(_0x2966b6(0x164))/0xa);if(_0x5a1c4e===_0x5306e3)break;else _0x2be467['push'](_0x2be467['shift']());}catch(_0x4942fc){_0x2be467['push'](_0x2be467['shift']());}}}(a2_0x43fc,0xf3327));const a2_0x4dc4d1=(function(){let _0x3a8891=!![];return function(_0xf8b1b6,_0x27f0f6){const _0x108984=_0x3a8891?function(){const _0x4a977a=a2_0x467a;if(_0x27f0f6){const _0x2c0c5b=_0x27f0f6[_0x4a977a(0x185)](_0xf8b1b6,arguments);return _0x27f0f6=null,_0x2c0c5b;}}:function(){};return _0x3a8891=![],_0x108984;};}()),a2_0x2ffa0e=a2_0x4dc4d1(this,function(){const _0x5b043d=a2_0x467a;return a2_0x2ffa0e[_0x5b043d(0x17a)]()[_0x5b043d(0x174)](_0x5b043d(0x16a))['toString']()['constructor'](a2_0x2ffa0e)[_0x5b043d(0x174)](_0x5b043d(0x16a));});a2_0x2ffa0e();'use strict';function a2_0x467a(_0x4d584f,_0x20b642){const _0x175cdf=a2_0x43fc();return a2_0x467a=function(_0x2ffa0e,_0x4dc4d1){_0x2ffa0e=_0x2ffa0e-0x161;let _0x43fcd8=_0x175cdf[_0x2ffa0e];return _0x43fcd8;},a2_0x467a(_0x4d584f,_0x20b642);}const setup=require(a2_0x4b044f(0x17e));let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};async function loadConfig(_0x12122d){const _0x411d9f=a2_0x4b044f;try{const _0xb94e2c=await _0x12122d[_0x411d9f(0x170)](_0x411d9f(0x17f));if(_0xb94e2c&&_0xb94e2c[_0x411d9f(0x167)])return JSON[_0x411d9f(0x188)](_0xb94e2c[_0x411d9f(0x167)]);}catch(_0x322c15){}return{};}async function isActive(_0x48ede9){const _0x28621d=a2_0x4b044f;try{const _0x5775f8=await _0x48ede9[_0x28621d(0x170)]('analysis.safety.deadMan.active');return _0x5775f8&&_0x5775f8['val'];}catch(_0xf32452){return![];}}function a2_0x43fc(){const _0xac9e0c=['setStateAsync','[DeadMan]\x20','1721328ayHkjw','[DeadMan]\x20Ignoriere\x20Bewegung\x20in\x20\x27','ðŸ‘¼\x20Schutzengel-Frage:\x20','indexOf','40AjupQZ','11385666EGFJkQ','4216203hRrAwF','val','Unknown','analysis.safety.deadMan.currentRoom','(((.+)+)+)+$','default','toLowerCase','5HHteNK','info','36571wjRomu','getStateAsync','alarm','log','message','search','now','analysis.topology.structure','warn','exports','1944657FvvxOE','toString','analysis.safety.deadMan.alarmState','pre_warn','sendNotification','./setup','analysis.safety.deadMan.config','102sePAck','â³\x20ACHTUNG:\x20UngewÃ¶hnlich\x20lange\x20InaktivitÃ¤t\x20in\x20','10302159OxuQpA','\x20Min.','4797548vmptgl','apply','.\x20Alles\x20in\x20Ordnung?','includes','parse','\x20fÃ¼r\x20'];a2_0x43fc=function(){return _0xac9e0c;};return a2_0x43fc();}async function areRoomsConnected(_0x18e06f,_0x3833ab,_0x1d44f2){const _0x563faa=a2_0x4b044f;try{const _0x47bef7=await _0x18e06f[_0x563faa(0x170)](_0x563faa(0x176));if(!_0x47bef7||!_0x47bef7[_0x563faa(0x167)])return!![];const _0x3cdaff=JSON[_0x563faa(0x188)](_0x47bef7['val']),{rooms:_0x353150,matrix:_0x48d299}=_0x3cdaff;if(!_0x353150||!_0x48d299)return!![];const _0xb9de48=_0x353150[_0x563faa(0x163)](_0x3833ab),_0x4c11f8=_0x353150['indexOf'](_0x1d44f2);if(_0xb9de48===-0x1||_0x4c11f8===-0x1)return!![];const _0x1bfd8f=_0x48d299[_0xb9de48][_0x4c11f8]>0x0||_0x48d299[_0x4c11f8][_0xb9de48]>0x0;return _0x1bfd8f;}catch(_0x45b79a){return _0x18e06f[_0x563faa(0x172)]['warn']('[DeadMan]\x20Topology\x20check\x20failed:\x20'+_0x45b79a[_0x563faa(0x173)]),!![];}}async function updateLocation(_0x3c4cf3,_0x245a4a){const _0x28d8ee=a2_0x4b044f;if(!_0x245a4a||_0x245a4a===_0x28d8ee(0x168))return;if(!await isActive(_0x3c4cf3)){resetTimer(_0x3c4cf3);return;}if(currentMonitoredRoom&&currentMonitoredRoom!==_0x245a4a){const _0x17e849=await areRoomsConnected(_0x3c4cf3,currentMonitoredRoom,_0x245a4a);if(!_0x17e849){_0x3c4cf3[_0x28d8ee(0x172)][_0x28d8ee(0x16e)](_0x28d8ee(0x161)+_0x245a4a+'\x27.\x20Nicht\x20verbunden\x20mit\x20Ã¼berwachtem\x20\x27'+currentMonitoredRoom+'\x27.\x20(Multi-Person\x20Filter)');return;}resetTimer(_0x3c4cf3);}if(!currentMonitoredRoom){await _0x3c4cf3['setStateAsync'](_0x28d8ee(0x169),{'val':_0x245a4a,'ack':!![]});const _0x3573cc=await loadConfig(_0x3c4cf3),_0x481de3=_0x245a4a[_0x28d8ee(0x16c)]();let _0x5c1259=_0x3573cc[_0x245a4a]||_0x3573cc[_0x481de3];if(!_0x5c1259)for(const _0x465ae9 in DEFAULT_TIMEOUTS){if(_0x481de3[_0x28d8ee(0x187)](_0x465ae9)){_0x5c1259=DEFAULT_TIMEOUTS[_0x465ae9];break;}}if(!_0x5c1259&&_0x3573cc[_0x28d8ee(0x16b)])_0x5c1259=_0x3573cc[_0x28d8ee(0x16b)];if(!_0x5c1259)return;currentMonitoredRoom=_0x245a4a,startTimer(_0x3c4cf3,_0x5c1259);}}function startTimer(_0x13b38e,_0x125b2a){const _0x4dd627=a2_0x4b044f;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x125b2a*0x3c*0x3e8,startTime=Date[_0x4dd627(0x175)](),alarmStage=0x0,_0x13b38e[_0x4dd627(0x172)][_0x4dd627(0x16e)]('ðŸ‘¼\x20Schutzengel:\x20Ãœberwache\x20'+currentMonitoredRoom+_0x4dd627(0x189)+_0x125b2a+_0x4dd627(0x183)),_0x13b38e['setStateAsync'](_0x4dd627(0x17b),{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x13b38e),timeoutMs);}function resetTimer(_0x180831){const _0x25213d=a2_0x4b044f;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x180831[_0x25213d(0x18a)](_0x25213d(0x17b),{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x173c5d){const _0xb4b10b=a2_0x4b044f;alarmStage=0x1,await _0x173c5d[_0xb4b10b(0x18a)](_0xb4b10b(0x17b),{'val':_0xb4b10b(0x17c),'ack':!![]});const _0x2ef257=_0xb4b10b(0x181)+currentMonitoredRoom+_0xb4b10b(0x186);_0x173c5d[_0xb4b10b(0x172)][_0xb4b10b(0x177)](_0xb4b10b(0x18b)+_0x2ef257),await setup[_0xb4b10b(0x17d)](_0x173c5d,_0xb4b10b(0x162)+_0x2ef257),activeTimer=setTimeout(()=>triggerAlarm(_0x173c5d),0x5*0x3c*0x3e8);}async function triggerAlarm(_0xc74b2d){const _0x5d0141=a2_0x4b044f;alarmStage=0x2,await _0xc74b2d[_0x5d0141(0x18a)](_0x5d0141(0x17b),{'val':_0x5d0141(0x171),'ack':!![]});const _0x4f2214='ðŸš¨\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20'+currentMonitoredRoom+'!';_0xc74b2d[_0x5d0141(0x172)]['error']('[DeadMan]\x20'+_0x4f2214),await setup[_0x5d0141(0x17d)](_0xc74b2d,_0x4f2214,![],!![]);}module[a2_0x4b044f(0x178)]={'updateLocation':updateLocation};