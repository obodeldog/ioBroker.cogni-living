const a2_0x209641=a2_0x3dd2;(function(_0x581549,_0x3e948e){const _0x1f1a89=a2_0x3dd2,_0x541c82=_0x581549();while(!![]){try{const _0x44b08c=-parseInt(_0x1f1a89(0x126))/0x1*(-parseInt(_0x1f1a89(0x142))/0x2)+parseInt(_0x1f1a89(0x13e))/0x3*(parseInt(_0x1f1a89(0x14a))/0x4)+-parseInt(_0x1f1a89(0x14b))/0x5+parseInt(_0x1f1a89(0x12b))/0x6+parseInt(_0x1f1a89(0x128))/0x7+-parseInt(_0x1f1a89(0x140))/0x8*(-parseInt(_0x1f1a89(0x141))/0x9)+-parseInt(_0x1f1a89(0x131))/0xa;if(_0x44b08c===_0x3e948e)break;else _0x541c82['push'](_0x541c82['shift']());}catch(_0x4b68a0){_0x541c82['push'](_0x541c82['shift']());}}}(a2_0x2dd5,0x26d42));const a2_0xf8785a=(function(){let _0x5f0810=!![];return function(_0x38e25a,_0xeb52a6){const _0x2cc64c=_0x5f0810?function(){const _0x45d3f1=a2_0x3dd2;if(_0xeb52a6){const _0x27658e=_0xeb52a6[_0x45d3f1(0x125)](_0x38e25a,arguments);return _0xeb52a6=null,_0x27658e;}}:function(){};return _0x5f0810=![],_0x2cc64c;};}()),a2_0x37a63f=a2_0xf8785a(this,function(){const _0x29c6e1=a2_0x3dd2;return a2_0x37a63f[_0x29c6e1(0x146)]()[_0x29c6e1(0x134)](_0x29c6e1(0x127))['toString']()[_0x29c6e1(0x123)](a2_0x37a63f)['search'](_0x29c6e1(0x127));});a2_0x37a63f();'use strict';const setup=require(a2_0x209641(0x132));let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};function a2_0x2dd5(){const _0x19d8db=['4092lruNEt','Unknown','1838776OdWeBX','9cSnzZw','27678USJKpY','log','warn','â³\x20ACHTUNG:\x20UngewÃ¶hnlich\x20lange\x20InaktivitÃ¤t\x20in\x20','toString','analysis.safety.deadMan.currentRoom','ðŸ‘¼\x20Schutzengel-Frage:\x20','pre_warn','284UIvoQt','243955cnWnKK','debug','constructor','analysis.safety.deadMan.active','apply','21YuAQSu','(((.+)+)+)+$','515424vTNuEk','ðŸš¨\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20','analysis.safety.deadMan.config','313020zLeCvp','alarm','now','\x20fÃ¼r\x20','analysis.safety.deadMan.alarmState','sendNotification','5352790eQKfaT','./setup','exports','search','\x20ist\x20sicher\x20(Kein\x20Timer).\x20Ãœberwachung\x20pausiert.','.\x20Alles\x20in\x20Ordnung?','default','toLowerCase','val','[DeadMan]\x20','info','setStateAsync','\x20Min.'];a2_0x2dd5=function(){return _0x19d8db;};return a2_0x2dd5();}function a2_0x3dd2(_0x4ca0f3,_0x40236a){const _0x215e8c=a2_0x2dd5();return a2_0x3dd2=function(_0x37a63f,_0xf8785a){_0x37a63f=_0x37a63f-0x123;let _0x2dd576=_0x215e8c[_0x37a63f];return _0x2dd576;},a2_0x3dd2(_0x4ca0f3,_0x40236a);}async function loadConfig(_0x340570){const _0x15517d=a2_0x209641;try{const _0x41ffe1=await _0x340570['getStateAsync'](_0x15517d(0x12a));if(_0x41ffe1&&_0x41ffe1[_0x15517d(0x139)])return JSON['parse'](_0x41ffe1['val']);}catch(_0x490fa2){}return{};}async function isActive(_0x3e2c39){const _0x3a5c93=a2_0x209641;try{const _0xdffb5d=await _0x3e2c39['getStateAsync'](_0x3a5c93(0x124));return _0xdffb5d&&_0xdffb5d['val'];}catch(_0x1df214){return![];}}async function updateLocation(_0x4dc08e,_0x1b400a){const _0x3ddafb=a2_0x209641;if(!_0x1b400a||_0x1b400a===_0x3ddafb(0x13f))return;if(!await isActive(_0x4dc08e)){resetTimer(_0x4dc08e);return;}if(currentMonitoredRoom!==_0x1b400a){resetTimer(_0x4dc08e),await _0x4dc08e[_0x3ddafb(0x13c)](_0x3ddafb(0x147),{'val':_0x1b400a,'ack':!![]});const _0x5b29e3=await loadConfig(_0x4dc08e),_0x32d300=_0x1b400a[_0x3ddafb(0x138)]();let _0xb4e332=_0x5b29e3[_0x1b400a]||_0x5b29e3[_0x32d300];if(!_0xb4e332)for(const _0x251987 in DEFAULT_TIMEOUTS){if(_0x32d300['includes'](_0x251987)){_0xb4e332=DEFAULT_TIMEOUTS[_0x251987];break;}}!_0xb4e332&&_0x5b29e3[_0x3ddafb(0x137)]&&(_0xb4e332=_0x5b29e3[_0x3ddafb(0x137)]);if(!_0xb4e332){_0x4dc08e[_0x3ddafb(0x143)][_0x3ddafb(0x14c)](_0x3ddafb(0x13a)+_0x1b400a+_0x3ddafb(0x135));return;}currentMonitoredRoom=_0x1b400a,startTimer(_0x4dc08e,_0xb4e332);}}function startTimer(_0x22bd45,_0x2a4023){const _0x23ec0d=a2_0x209641;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x2a4023*0x3c*0x3e8,startTime=Date[_0x23ec0d(0x12d)](),alarmStage=0x0,_0x22bd45['log'][_0x23ec0d(0x13b)]('ðŸ‘¼\x20Schutzengel:\x20Ãœberwache\x20'+currentMonitoredRoom+_0x23ec0d(0x12e)+_0x2a4023+_0x23ec0d(0x13d)),_0x22bd45[_0x23ec0d(0x13c)]('analysis.safety.deadMan.alarmState',{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x22bd45),timeoutMs);}function resetTimer(_0x573dd8){const _0x4d2310=a2_0x209641;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x573dd8[_0x4d2310(0x13c)]('analysis.safety.deadMan.alarmState',{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x597bb3){const _0x54f5c4=a2_0x209641;alarmStage=0x1,await _0x597bb3[_0x54f5c4(0x13c)]('analysis.safety.deadMan.alarmState',{'val':_0x54f5c4(0x149),'ack':!![]});const _0x19b032=_0x54f5c4(0x145)+currentMonitoredRoom+_0x54f5c4(0x136);_0x597bb3[_0x54f5c4(0x143)][_0x54f5c4(0x144)]('[DeadMan]\x20'+_0x19b032),await setup[_0x54f5c4(0x130)](_0x597bb3,_0x54f5c4(0x148)+_0x19b032),activeTimer=setTimeout(()=>triggerAlarm(_0x597bb3),0x5*0x3c*0x3e8);}async function triggerAlarm(_0xa95a2a){const _0x541ac9=a2_0x209641;alarmStage=0x2,await _0xa95a2a[_0x541ac9(0x13c)](_0x541ac9(0x12f),{'val':_0x541ac9(0x12c),'ack':!![]});const _0x50404a=_0x541ac9(0x129)+currentMonitoredRoom+'!';_0xa95a2a['log']['error']('[DeadMan]\x20'+_0x50404a),await setup[_0x541ac9(0x130)](_0xa95a2a,_0x50404a,![],!![]);}module[a2_0x209641(0x133)]={'updateLocation':updateLocation};