function a2_0x3aff(_0x139227,_0x255172){const _0x4f56e2=a2_0x16f6();return a2_0x3aff=function(_0x585113,_0x14a03a){_0x585113=_0x585113-0xef;let _0x16f6dc=_0x4f56e2[_0x585113];return _0x16f6dc;},a2_0x3aff(_0x139227,_0x255172);}const a2_0xcc958d=a2_0x3aff;(function(_0x3d75d3,_0x1069e5){const _0x3cb5cd=a2_0x3aff,_0x1dd0cc=_0x3d75d3();while(!![]){try{const _0x49d7a9=-parseInt(_0x3cb5cd(0x107))/0x1*(parseInt(_0x3cb5cd(0x11a))/0x2)+parseInt(_0x3cb5cd(0x102))/0x3+-parseInt(_0x3cb5cd(0xef))/0x4*(parseInt(_0x3cb5cd(0xf5))/0x5)+-parseInt(_0x3cb5cd(0x118))/0x6+parseInt(_0x3cb5cd(0xfd))/0x7*(parseInt(_0x3cb5cd(0x106))/0x8)+-parseInt(_0x3cb5cd(0xfa))/0x9*(parseInt(_0x3cb5cd(0x11c))/0xa)+parseInt(_0x3cb5cd(0xf7))/0xb;if(_0x49d7a9===_0x1069e5)break;else _0x1dd0cc['push'](_0x1dd0cc['shift']());}catch(_0x1b388b){_0x1dd0cc['push'](_0x1dd0cc['shift']());}}}(a2_0x16f6,0xb7eb1));const a2_0x14a03a=(function(){let _0x299ee0=!![];return function(_0x2842b1,_0x51b528){const _0x4c19fa=_0x299ee0?function(){const _0x48fd75=a2_0x3aff;if(_0x51b528){const _0x62c1be=_0x51b528[_0x48fd75(0xfe)](_0x2842b1,arguments);return _0x51b528=null,_0x62c1be;}}:function(){};return _0x299ee0=![],_0x4c19fa;};}()),a2_0x585113=a2_0x14a03a(this,function(){const _0x49b94a=a2_0x3aff;return a2_0x585113['toString']()[_0x49b94a(0xf8)](_0x49b94a(0xf4))[_0x49b94a(0xff)]()[_0x49b94a(0xf2)](a2_0x585113)[_0x49b94a(0xf8)](_0x49b94a(0xf4));});a2_0x585113();'use strict';const setup=require(a2_0xcc958d(0x110));let activeTimer=null,currentMonitoredRoom=null,timeoutMs=0x0,startTime=0x0,alarmStage=0x0;const DEFAULT_TIMEOUTS={'bad':0x2d,'bath':0x2d,'toilet':0x1e,'wc':0x1e,'keller':0x3c};async function loadConfig(_0x24e657){const _0x41b566=a2_0xcc958d;try{const _0x24adda=await _0x24e657[_0x41b566(0x111)]('analysis.safety.deadMan.config');if(_0x24adda&&_0x24adda[_0x41b566(0x10a)])return JSON[_0x41b566(0x103)](_0x24adda[_0x41b566(0x10a)]);}catch(_0x2d874c){}return{};}async function isActive(_0x1031ef){const _0x1f6d9a=a2_0xcc958d;try{const _0x2c2738=await _0x1031ef[_0x1f6d9a(0x111)]('analysis.safety.deadMan.active');return _0x2c2738&&_0x2c2738[_0x1f6d9a(0x10a)];}catch(_0x3f41f6){return![];}}async function areRoomsConnected(_0x20daa6,_0x1eeb1e,_0x11c2b8){const _0x3fed78=a2_0xcc958d;try{const _0x116ba6=await _0x20daa6[_0x3fed78(0x111)](_0x3fed78(0x10f));if(!_0x116ba6||!_0x116ba6[_0x3fed78(0x10a)])return!![];const _0x2a860f=JSON['parse'](_0x116ba6['val']),{rooms:_0x5478fb,matrix:_0x2c76ac}=_0x2a860f;if(!_0x5478fb||!_0x2c76ac)return!![];const _0x4b3810=_0x5478fb[_0x3fed78(0x10e)](_0x1eeb1e),_0x37e49=_0x5478fb[_0x3fed78(0x10e)](_0x11c2b8);if(_0x4b3810===-0x1||_0x37e49===-0x1)return!![];const _0x34ad87=_0x2c76ac[_0x4b3810][_0x37e49]>0x0||_0x2c76ac[_0x37e49][_0x4b3810]>0x0;return _0x34ad87;}catch(_0x32ba93){return _0x20daa6[_0x3fed78(0xf6)][_0x3fed78(0x100)](_0x3fed78(0x104)+_0x32ba93[_0x3fed78(0x105)]),!![];}}async function updateLocation(_0x938d26,_0x3eb5b2){const _0x19d973=a2_0xcc958d;if(!_0x3eb5b2||_0x3eb5b2===_0x19d973(0x11b))return;if(!await isActive(_0x938d26)){resetTimer(_0x938d26);return;}if(currentMonitoredRoom&&currentMonitoredRoom!==_0x3eb5b2){const _0x57ef53=await areRoomsConnected(_0x938d26,currentMonitoredRoom,_0x3eb5b2);if(!_0x57ef53){const _0x1b6b05='Ignoriere\x20Bewegung\x20in\x20\x27'+_0x3eb5b2+'\x27.\x20Nicht\x20verbunden\x20mit\x20√ºberwachtem\x20\x27'+currentMonitoredRoom+'\x27.';_0x938d26[_0x19d973(0xf6)][_0x19d973(0x115)]('[DeadMan]\x20'+_0x1b6b05+_0x19d973(0x11e)),await _0x938d26[_0x19d973(0x116)](_0x19d973(0x10b),{'val':JSON['stringify']({'room':_0x3eb5b2,'reason':_0x1b6b05,'timestamp':Date['now']()}),'ack':!![]});return;}resetTimer(_0x938d26);}if(!currentMonitoredRoom){await _0x938d26['setStateAsync'](_0x19d973(0x10d),{'val':_0x3eb5b2,'ack':!![]});const _0x18f9d8=await loadConfig(_0x938d26),_0x331077=_0x3eb5b2[_0x19d973(0xf0)]();let _0x113cb4=_0x18f9d8[_0x3eb5b2]||_0x18f9d8[_0x331077];if(!_0x113cb4)for(const _0x1bdead in DEFAULT_TIMEOUTS){if(_0x331077[_0x19d973(0xfc)](_0x1bdead)){_0x113cb4=DEFAULT_TIMEOUTS[_0x1bdead];break;}}if(!_0x113cb4&&_0x18f9d8[_0x19d973(0x101)])_0x113cb4=_0x18f9d8[_0x19d973(0x101)];if(!_0x113cb4)return;currentMonitoredRoom=_0x3eb5b2,startTimer(_0x938d26,_0x113cb4);}}function startTimer(_0x352e6d,_0x4bd164){const _0xbb5a40=a2_0xcc958d;if(activeTimer)clearTimeout(activeTimer);timeoutMs=_0x4bd164*0x3c*0x3e8,startTime=Date[_0xbb5a40(0x109)](),alarmStage=0x0,_0x352e6d[_0xbb5a40(0xf6)][_0xbb5a40(0x115)](_0xbb5a40(0x11d)+currentMonitoredRoom+'\x20f√ºr\x20'+_0x4bd164+_0xbb5a40(0x108)),_0x352e6d['setStateAsync'](_0xbb5a40(0xf1),{'val':'ok','ack':!![]}),activeTimer=setTimeout(()=>triggerPreWarn(_0x352e6d),timeoutMs);}function resetTimer(_0x5a6d99){const _0x34ad29=a2_0xcc958d;if(activeTimer)clearTimeout(activeTimer);activeTimer=null,currentMonitoredRoom=null,alarmStage=0x0,_0x5a6d99[_0x34ad29(0x116)](_0x34ad29(0xf1),{'val':'ok','ack':!![]});}async function triggerPreWarn(_0x37c9f3){const _0x202162=a2_0xcc958d;alarmStage=0x1,await _0x37c9f3[_0x202162(0x116)](_0x202162(0xf1),{'val':_0x202162(0xfb),'ack':!![]});const _0x594c35=_0x202162(0xf3)+currentMonitoredRoom+_0x202162(0x119);_0x37c9f3[_0x202162(0xf6)]['warn'](_0x202162(0x10c)+_0x594c35),await setup[_0x202162(0x114)](_0x37c9f3,_0x202162(0x117)+_0x594c35),activeTimer=setTimeout(()=>triggerAlarm(_0x37c9f3),0x5*0x3c*0x3e8);}async function triggerAlarm(_0x4592a3){const _0x18e0da=a2_0xcc958d;alarmStage=0x2,await _0x4592a3[_0x18e0da(0x116)](_0x18e0da(0xf1),{'val':_0x18e0da(0x113),'ack':!![]});const _0x3c551f='üö®\x20NOTFALL-ALARM:\x20Person\x20reagiert\x20nicht\x20in\x20'+currentMonitoredRoom+'!';_0x4592a3[_0x18e0da(0xf6)][_0x18e0da(0x112)](_0x18e0da(0x10c)+_0x3c551f),await setup[_0x18e0da(0x114)](_0x4592a3,_0x3c551f,![],!![]);}function a2_0x16f6(){const _0x1b77ae=['\x20Min.','now','val','analysis.safety.deadMan.lastIgnored','[DeadMan]\x20','analysis.safety.deadMan.currentRoom','indexOf','analysis.topology.structure','./setup','getStateAsync','error','alarm','sendNotification','info','setStateAsync','üëº\x20Schutzengel-Frage:\x20','5401566aeMfSM','.\x20Alles\x20in\x20Ordnung?','4EfdAaM','Unknown','30170cbhyZm','üëº\x20Schutzengel:\x20√úberwache\x20','\x20(Multi-Person\x20Filter)','1866584OtsuFD','toLowerCase','analysis.safety.deadMan.alarmState','constructor','‚è≥\x20ACHTUNG:\x20Ungew√∂hnlich\x20lange\x20Inaktivit√§t\x20in\x20','(((.+)+)+)+$','15wKXfjL','log','46149532IkEDJF','search','exports','3159IPJhiq','pre_warn','includes','3746946cyYMzl','apply','toString','warn','default','1811199xztCSP','parse','[DeadMan]\x20Topology\x20check\x20failed:\x20','message','8dUMJBT','610964wZDuiB'];a2_0x16f6=function(){return _0x1b77ae;};return a2_0x16f6();}module[a2_0xcc958d(0xf9)]={'updateLocation':updateLocation};