const a4_0x18d213=a4_0x1c4f;(function(_0x5b2faa,_0xe2bba9){const _0xaf529f=a4_0x1c4f,_0xbd5fd8=_0x5b2faa();while(!![]){try{const _0x322fc0=-parseInt(_0xaf529f(0x1a4))/0x1*(-parseInt(_0xaf529f(0x1ab))/0x2)+-parseInt(_0xaf529f(0x1cf))/0x3*(-parseInt(_0xaf529f(0x17f))/0x4)+-parseInt(_0xaf529f(0x1d0))/0x5*(parseInt(_0xaf529f(0x19e))/0x6)+parseInt(_0xaf529f(0x1c2))/0x7+parseInt(_0xaf529f(0x1b1))/0x8+-parseInt(_0xaf529f(0x1b9))/0x9+-parseInt(_0xaf529f(0x198))/0xa*(parseInt(_0xaf529f(0x1ba))/0xb);if(_0x322fc0===_0xe2bba9)break;else _0xbd5fd8['push'](_0xbd5fd8['shift']());}catch(_0x243eef){_0xbd5fd8['push'](_0xbd5fd8['shift']());}}}(a4_0x38c0,0xbe190));const a4_0x19d5b8=(function(){let _0x34ed53=!![];return function(_0x277fd6,_0x3178b9){const _0x5e522e=_0x34ed53?function(){const _0x3d2065=a4_0x1c4f;if(_0x3178b9){const _0x10fe51=_0x3178b9[_0x3d2065(0x1a0)](_0x277fd6,arguments);return _0x3178b9=null,_0x10fe51;}}:function(){};return _0x34ed53=![],_0x5e522e;};}()),a4_0x3771ab=a4_0x19d5b8(this,function(){const _0xa78b3e=a4_0x1c4f;return a4_0x3771ab['toString']()[_0xa78b3e(0x1c4)]('(((.+)+)+)+$')[_0xa78b3e(0x1cc)]()['constructor'](a4_0x3771ab)['search'](_0xa78b3e(0x174));});function a4_0x38c0(){const _0x24e36a=['PONG','log','366kKnpiI','error','apply','ENERGY_OPTIMIZE_RESULT','analysis.prediction.nextRoom','python_service','793qHsMQT','WARMUP_RESULT','./setup','TRACKER_RESULT','entries','details','insulation','2128glWDyv','analysis.security.currentThreshold','join','startsWith','sendToPythonWrapper','getState','520592olbPvh','toISOString','HEALTH_RESULT','setStateAsync','analysis.health.isAnomaly','existsSync','length','ENERGY_TRAIN_RESULT','7667784ydaMSO','11XZzBrZ','writable','analysis.security.lastCheck','type','[PYTHON]\x20','forEach','heating','service.py','4623395ZMTxAi','analysis.automation.detectedPatterns','search','analysis.health.gaitSpeed','analysis.health.lastCheck','toLocaleTimeString','debug','keys','stdout','kill','toString','path','Error\x20launching\x20Python:\x20','3CZEYIJ','27355WOtroA','analysis.energy.ventilationAlerts','TRAINING_COMPLETE','toFixed','(((.+)+)+)+$','./automation','analysis.energy.pinnForecast','handlePrediction','SIGNAL_RESULT','success','trim','analysis.energy.heatingScore','data','analysis.energy.insulationScore','reason','2605948GNDtBk','analysis.energy.warmupTimes','analysis.training.status','Success:\x20','sendNotification','threshold','parse','split','stdin','substring','analysis.prediction.trackerTopRoom','analysis.prediction.confidence','analysis.security.lastScore','ENERGY_PREDICT_RESULT','stringify','analysis.energy.forecast','\x0aGrund:\x20','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','message','[LOG]','write','close','SECURITY_RESULT','python3','info','2564510WASHRl','analysis.energy.mpcActive','analysis.isAlert','payload'];a4_0x38c0=function(){return _0x24e36a;};return a4_0x38c0();}a4_0x3771ab();'use strict';const {spawn}=require('child_process'),path=require(a4_0x18d213(0x1cd)),fs=require('fs'),setup=require(a4_0x18d213(0x1a6)),automation=require(a4_0x18d213(0x175));let pythonProcess=null;function send(_0x5ddbe0,_0x46223f,_0xe9411e={}){const _0x4d6506=a4_0x18d213;if(!pythonProcess||!pythonProcess[_0x4d6506(0x187)][_0x4d6506(0x1bb)])return;const _0x491bb0=JSON[_0x4d6506(0x18d)]({'command':_0x46223f,..._0xe9411e});try{pythonProcess[_0x4d6506(0x187)][_0x4d6506(0x193)](_0x491bb0+'\x0a');}catch(_0x1e6872){}}function handleResult(_0x9ac22d,_0x2a2814){const _0x3c63f4=a4_0x18d213;if(_0x2a2814[_0x3c63f4(0x1bd)]===_0x3c63f4(0x19c))_0x9ac22d[_0x3c63f4(0x19d)][_0x3c63f4(0x1c8)]('ðŸ\x20Python\x20Pong');else{if(_0x2a2814[_0x3c63f4(0x1bd)]===_0x3c63f4(0x195)){const {anomaly_score:_0x47c181,is_anomaly:_0x59466b,threshold:_0xbbc2df,explanation:_0x401b14}=_0x2a2814[_0x3c63f4(0x19b)];_0x9ac22d['setStateAsync'](_0x3c63f4(0x18b),{'val':_0x47c181,'ack':!![]}),_0x9ac22d['setStateAsync'](_0x3c63f4(0x1bc),{'val':new Date()[_0x3c63f4(0x1b2)](),'ack':!![]});if(_0xbbc2df)_0x9ac22d['setStateAsync']('analysis.security.currentThreshold',{'val':_0xbbc2df,'ack':!![]});if(_0x59466b){let _0x1edc43=_0x3c63f4(0x190)+_0x47c181[_0x3c63f4(0x173)](0x4)+')';if(_0x401b14&&_0x401b14!=='Unknown')_0x1edc43+=_0x3c63f4(0x18f)+_0x401b14;_0x9ac22d[_0x3c63f4(0x1b4)](_0x3c63f4(0x19a),{'val':!![],'ack':!![]}),_0x9ac22d[_0x3c63f4(0x1b4)]('analysis.alertReason',{'val':_0x1edc43,'ack':!![]}),setup[_0x3c63f4(0x183)](_0x9ac22d,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x1edc43,![],!![]);}}else{if(_0x2a2814[_0x3c63f4(0x1bd)]===_0x3c63f4(0x172)){const _0x207b59=_0x2a2814['payload'][_0x3c63f4(0x1a9)]||'',_0x2b9419=_0x2a2814[_0x3c63f4(0x19b)][_0x3c63f4(0x184)],_0x4530b0=_0x2a2814[_0x3c63f4(0x19b)][_0x3c63f4(0x179)]?_0x3c63f4(0x182)+new Date()[_0x3c63f4(0x1c7)]()+'\x20('+_0x207b59+')':'Failed:\x20'+_0x2a2814[_0x3c63f4(0x19b)][_0x3c63f4(0x17e)];_0x9ac22d[_0x3c63f4(0x1b4)](_0x3c63f4(0x181),{'val':_0x4530b0,'ack':!![]});if(_0x2a2814[_0x3c63f4(0x19b)]['success']&&_0x2b9419)_0x9ac22d['setStateAsync'](_0x3c63f4(0x1ac),{'val':_0x2b9419,'ack':!![]});}else{if(_0x2a2814['type']===_0x3c63f4(0x1b8)){if(_0x2a2814[_0x3c63f4(0x19b)][_0x3c63f4(0x179)])try{const _0x4cbe6f=JSON[_0x3c63f4(0x185)](_0x2a2814['payload'][_0x3c63f4(0x1a9)]);if(_0x4cbe6f[_0x3c63f4(0x1aa)])_0x9ac22d[_0x3c63f4(0x1b4)](_0x3c63f4(0x17d),{'val':JSON[_0x3c63f4(0x18d)](_0x4cbe6f[_0x3c63f4(0x1aa)]),'ack':!![]});if(_0x4cbe6f['heating'])_0x9ac22d[_0x3c63f4(0x1b4)](_0x3c63f4(0x17b),{'val':JSON['stringify'](_0x4cbe6f[_0x3c63f4(0x1c0)]),'ack':!![]});}catch(_0x55aced){}}else{if(_0x2a2814[_0x3c63f4(0x1bd)]==='HEALTH_TRAIN_RESULT'){if(_0x2a2814[_0x3c63f4(0x19b)]['success'])_0x9ac22d['log'][_0x3c63f4(0x197)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x2a2814[_0x3c63f4(0x1bd)]===_0x3c63f4(0x1b3))_0x9ac22d['setStateAsync'](_0x3c63f4(0x1c6),{'val':new Date()[_0x3c63f4(0x1b2)](),'ack':!![]}),_0x9ac22d[_0x3c63f4(0x1b4)](_0x3c63f4(0x1b5),{'val':_0x2a2814['payload']['is_anomaly'],'ack':!![]});else{if(_0x2a2814[_0x3c63f4(0x1bd)]==='GAIT_RESULT'){const {speed_trend:_0xe62e3}=_0x2a2814[_0x3c63f4(0x19b)];if(_0xe62e3!==undefined)_0x9ac22d[_0x3c63f4(0x1b4)](_0x3c63f4(0x1c5),{'val':_0xe62e3,'ack':!![]});}else{if(_0x2a2814[_0x3c63f4(0x1bd)]===_0x3c63f4(0x18c)){const {forecast:_0x3bec00}=_0x2a2814[_0x3c63f4(0x19b)];if(_0x3bec00)_0x9ac22d[_0x3c63f4(0x1b4)](_0x3c63f4(0x18e),{'val':JSON[_0x3c63f4(0x18d)](_0x3bec00),'ack':!![]});}else{if(_0x2a2814[_0x3c63f4(0x1bd)]===_0x3c63f4(0x1a5)){const {times:_0x154bf3}=_0x2a2814['payload'];if(_0x154bf3)_0x9ac22d[_0x3c63f4(0x1b4)](_0x3c63f4(0x180),{'val':JSON['stringify'](_0x154bf3),'ack':!![]});}else{if(_0x2a2814['type']==='PINN_PREDICT_RESULT'){const {forecast:_0x38ab9d}=_0x2a2814[_0x3c63f4(0x19b)];if(_0x38ab9d)_0x9ac22d[_0x3c63f4(0x1b4)](_0x3c63f4(0x176),{'val':JSON[_0x3c63f4(0x18d)](_0x38ab9d),'ack':!![]});}else{if(_0x2a2814[_0x3c63f4(0x1bd)]==='VENTILATION_ALERT'){const {alerts:_0x113ac6}=_0x2a2814['payload'];if(_0x113ac6)_0x9ac22d[_0x3c63f4(0x1b4)](_0x3c63f4(0x1d1),{'val':JSON['stringify'](_0x113ac6),'ack':!![]});}else{if(_0x2a2814[_0x3c63f4(0x1bd)]===_0x3c63f4(0x1a1)){const {proposals:_0x4d97c8}=_0x2a2814[_0x3c63f4(0x19b)];_0x9ac22d[_0x3c63f4(0x1b0)](_0x3c63f4(0x199),(_0x19b22e,_0x10d4e6)=>{const _0x591a4d=_0x3c63f4;_0x10d4e6&&_0x10d4e6['val']===!![]&&_0x4d97c8&&_0x4d97c8[_0x591a4d(0x1b7)]>0x0&&automation['applyEnergySavings'](_0x9ac22d,_0x4d97c8);});}else{if(_0x2a2814['type']===_0x3c63f4(0x178)){const {room:_0x5b57a3,propagation:_0x52d5b3}=_0x2a2814[_0x3c63f4(0x19b)];let _0x3116a3='Unknown',_0x4f8f5a=0x0;if(_0x52d5b3){const _0x5a2e60=Object[_0x3c63f4(0x1a8)](_0x52d5b3);_0x5a2e60[_0x3c63f4(0x1b7)]>0x0&&(_0x3116a3=_0x5a2e60[0x0][0x0],_0x4f8f5a=_0x5a2e60[0x0][0x1]);}_0x9ac22d['setStateAsync'](_0x3c63f4(0x1a2),{'val':_0x3116a3,'ack':!![]}),_0x9ac22d[_0x3c63f4(0x1b4)](_0x3c63f4(0x18a),{'val':_0x4f8f5a,'ack':!![]}),automation[_0x3c63f4(0x177)](_0x9ac22d,_0x3116a3,_0x4f8f5a);}else{if(_0x2a2814[_0x3c63f4(0x1bd)]===_0x3c63f4(0x1a7)){const {probabilities:_0x576cc3}=_0x2a2814[_0x3c63f4(0x19b)];if(_0x576cc3){_0x9ac22d['setStateAsync']('analysis.prediction.trackerState',{'val':JSON[_0x3c63f4(0x18d)](_0x576cc3),'ack':!![]});const _0x5c996e=Object[_0x3c63f4(0x1c9)](_0x576cc3);if(_0x5c996e[_0x3c63f4(0x1b7)]>0x0){const _0x42003b=_0x5c996e[0x0],_0x228e2e=_0x576cc3[_0x42003b];_0x9ac22d[_0x3c63f4(0x1b4)](_0x3c63f4(0x189),{'val':_0x42003b,'ack':!![]}),_0x9ac22d[_0x3c63f4(0x1b4)]('analysis.prediction.trackerConfidence',{'val':_0x228e2e,'ack':!![]});}}}else{if(_0x2a2814[_0x3c63f4(0x1bd)]==='COMFORT_RESULT'){const {patterns:_0x229ceb}=_0x2a2814[_0x3c63f4(0x19b)];if(_0x229ceb&&_0x229ceb['length']>0x0)_0x9ac22d['setStateAsync'](_0x3c63f4(0x1c3),{'val':JSON[_0x3c63f4(0x18d)](_0x229ceb),'ack':!![]});}}}}}}}}}}}}}}}}function startService(_0x5c6465,_0x923a10){const _0x3a83d7=a4_0x18d213;let _0x347231=_0x3a83d7(0x196);if(fs[_0x3a83d7(0x1b6)](_0x923a10))_0x347231=_0x923a10;try{const _0x84a8cd=path[_0x3a83d7(0x1ad)](__dirname,'..',_0x3a83d7(0x1a3),_0x3a83d7(0x1c1));pythonProcess=spawn(_0x347231,[_0x84a8cd]),pythonProcess[_0x3a83d7(0x1ca)]['on'](_0x3a83d7(0x17c),_0x2fe928=>{const _0xc5373b=_0x3a83d7,_0x5e8b7e=_0x2fe928[_0xc5373b(0x1cc)]()[_0xc5373b(0x186)]('\x0a');_0x5e8b7e[_0xc5373b(0x1bf)](_0x5003d4=>{const _0x314bdc=_0xc5373b,_0x10613b=_0x5003d4[_0x314bdc(0x17a)]();if(!_0x10613b)return;if(_0x10613b[_0x314bdc(0x1ae)](_0x314bdc(0x192)))_0x5c6465['log'][_0x314bdc(0x1c8)](_0x314bdc(0x1be)+_0x10613b['substring'](0x5)['trim']());else{if(_0x10613b[_0x314bdc(0x1ae)]('[RESULT]'))try{const _0x18fe41=JSON[_0x314bdc(0x185)](_0x10613b[_0x314bdc(0x188)](0x8)[_0x314bdc(0x17a)]());handleResult(_0x5c6465,_0x18fe41);}catch(_0x37749d){}}});}),pythonProcess['on'](_0x3a83d7(0x194),_0xb67343=>{pythonProcess=null;}),_0x5c6465[_0x3a83d7(0x1af)]=(_0x4345a0,_0x13f2a4)=>send(_0x5c6465,_0x4345a0,_0x13f2a4);}catch(_0x4442be){_0x5c6465['log'][_0x3a83d7(0x19f)](_0x3a83d7(0x1ce)+_0x4442be[_0x3a83d7(0x191)]);}}function stopService(_0x5095f1){const _0x15b00e=a4_0x18d213;if(pythonProcess){try{pythonProcess[_0x15b00e(0x1cb)]();}catch(_0x54eb0c){}pythonProcess=null;}}function a4_0x1c4f(_0xee5009,_0x2d07b9){const _0x44eef3=a4_0x38c0();return a4_0x1c4f=function(_0x3771ab,_0x19d5b8){_0x3771ab=_0x3771ab-0x172;let _0x38c00b=_0x44eef3[_0x3771ab];return _0x38c00b;},a4_0x1c4f(_0xee5009,_0x2d07b9);}module['exports']={'startService':startService,'stopService':stopService,'send':send};