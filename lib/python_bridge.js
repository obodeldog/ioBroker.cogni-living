function a3_0x3d68(_0x1b9e0a,_0x10221f){const _0x17e469=a3_0x372b();return a3_0x3d68=function(_0x4f5aa7,_0x4469f3){_0x4f5aa7=_0x4f5aa7-0x117;let _0x372b9d=_0x17e469[_0x4f5aa7];return _0x372b9d;},a3_0x3d68(_0x1b9e0a,_0x10221f);}const a3_0x293160=a3_0x3d68;function a3_0x372b(){const _0x13f86a=['constructor','exports','forEach','split','toString','Failed:\x20','service.py','analysis.prediction.confidence','trim','success','child_process','SIGNAL_RESULT','\x0aGrund:\x20','13864QooWvs','6915uMJdqt','type','analysis.health.trendDiagnosis','sendNotification','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','Unknown','details','660RSsYNg','analysis.security.lastScore','\x20->\x20','existsSync','./automation','startsWith','1057BPGEKK','analysis.training.status','3024474BzvOYd','path','stringify','analysis.energy.heatingScore','analysis.energy.forecast','1099368UPPiXN','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','handlePrediction','toFixed','ðŸ\x20Python\x20Pong','analysis.security.lastCheck','TOPOLOGY_RESULT','TREND_RESULT','[PYTHON]\x20','ENERGY_TRAIN_RESULT','SECURITY_RESULT','265331hRrIgf','analysis.health.isAnomaly','ANOMALY','analysis.automation.description','[RESULT]','is_anomaly','sendToPythonWrapper','analysis.alertReason','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','8381sRsJUP','analysis.health.trendValue','setStateAsync','info','entries','COMFORT_RESULT','insulation','Regel\x20erkannt:\x20','analysis.isAlert','message','log','parse','ðŸ\x20Python\x20confirmed\x20new\x20topology.','substring','join','analysis.automation.detectedPatterns','kill','search','analysis.prediction.nextRoom','[LOG]','analysis.health.lastCheck','python3','diagnosis','3MjxSWS','ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.','toLocaleTimeString','649266hGQpcv','1020mhaPaO','heating','payload','10bMGwQE','GAIT_RESULT','Error\x20launching\x20Python:\x20','close','python_service','confidence','toISOString','stdin','HEALTH_TRAIN_RESULT','analysis.security.currentThreshold','\x20->\x20Likely\x20','writable','analysis.automation.patternDetected','debug','analysis.security.topologyMatrix','length','stdout'];a3_0x372b=function(){return _0x13f86a;};return a3_0x372b();}(function(_0x195692,_0x26c187){const _0x18a6e9=a3_0x3d68,_0x21fb8e=_0x195692();while(!![]){try{const _0x1ad337=parseInt(_0x18a6e9(0x134))/0x1+parseInt(_0x18a6e9(0x14e))/0x2*(-parseInt(_0x18a6e9(0x14b))/0x3)+-parseInt(_0x18a6e9(0x14f))/0x4*(parseInt(_0x18a6e9(0x171))/0x5)+-parseInt(_0x18a6e9(0x11b))/0x6+-parseInt(_0x18a6e9(0x119))/0x7*(-parseInt(_0x18a6e9(0x170))/0x8)+parseInt(_0x18a6e9(0x120))/0x9*(-parseInt(_0x18a6e9(0x152))/0xa)+-parseInt(_0x18a6e9(0x12b))/0xb*(-parseInt(_0x18a6e9(0x178))/0xc);if(_0x1ad337===_0x26c187)break;else _0x21fb8e['push'](_0x21fb8e['shift']());}catch(_0x2d5950){_0x21fb8e['push'](_0x21fb8e['shift']());}}}(a3_0x372b,0x47946));const a3_0x4469f3=(function(){let _0x9654a=!![];return function(_0x424ed5,_0x11f717){const _0x41fe2c=_0x9654a?function(){if(_0x11f717){const _0x160ff5=_0x11f717['apply'](_0x424ed5,arguments);return _0x11f717=null,_0x160ff5;}}:function(){};return _0x9654a=![],_0x41fe2c;};}()),a3_0x4f5aa7=a3_0x4469f3(this,function(){const _0xd04013=a3_0x3d68;return a3_0x4f5aa7[_0xd04013(0x167)]()[_0xd04013(0x145)]('(((.+)+)+)+$')[_0xd04013(0x167)]()[_0xd04013(0x163)](a3_0x4f5aa7)['search']('(((.+)+)+)+$');});a3_0x4f5aa7();'use strict';const {spawn}=require(a3_0x293160(0x16d)),path=require(a3_0x293160(0x11c)),fs=require('fs'),setup=require('./setup'),automation=require(a3_0x293160(0x117));let pythonProcess=null;function send(_0x92438e,_0x14ae86,_0xfd498c={}){const _0xb5e243=a3_0x293160;if(!pythonProcess||!pythonProcess[_0xb5e243(0x159)][_0xb5e243(0x15d)])return;const _0x5aa24d=JSON[_0xb5e243(0x11d)]({'command':_0x14ae86,..._0xfd498c});try{pythonProcess[_0xb5e243(0x159)]['write'](_0x5aa24d+'\x0a');}catch(_0x3443db){}}function handleResult(_0x19f989,_0x2c6d18){const _0x3f9bc3=a3_0x293160;if(_0x2c6d18[_0x3f9bc3(0x172)]==='PONG')_0x19f989[_0x3f9bc3(0x13e)][_0x3f9bc3(0x15f)](_0x3f9bc3(0x124));else{if(_0x2c6d18['type']===_0x3f9bc3(0x12a)){const {anomaly_score:_0x4f3c67,is_anomaly:_0x2ccde0,threshold:_0xf3e6c4,explanation:_0x5c3528}=_0x2c6d18[_0x3f9bc3(0x151)];_0x19f989['log'][_0x3f9bc3(0x137)](_0x3f9bc3(0x175)+_0x4f3c67[_0x3f9bc3(0x123)](0x5)+_0x3f9bc3(0x17a)+(_0x2ccde0?_0x3f9bc3(0x12d):'OK')),_0x19f989[_0x3f9bc3(0x136)](_0x3f9bc3(0x179),{'val':_0x4f3c67,'ack':!![]}),_0x19f989[_0x3f9bc3(0x136)](_0x3f9bc3(0x125),{'val':new Date()['toISOString'](),'ack':!![]});if(_0xf3e6c4)_0x19f989[_0x3f9bc3(0x136)](_0x3f9bc3(0x15b),{'val':_0xf3e6c4,'ack':!![]});if(_0x2ccde0){let _0x21a40e=_0x3f9bc3(0x133)+_0x4f3c67[_0x3f9bc3(0x123)](0x4)+')';if(_0x5c3528&&_0x5c3528!==_0x3f9bc3(0x176))_0x21a40e+=_0x3f9bc3(0x16f)+_0x5c3528;_0x19f989[_0x3f9bc3(0x136)](_0x3f9bc3(0x13c),{'val':!![],'ack':!![]}),_0x19f989['setStateAsync'](_0x3f9bc3(0x132),{'val':_0x21a40e,'ack':!![]}),setup[_0x3f9bc3(0x174)](_0x19f989,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x21a40e,![],!![]);}}else{if(_0x2c6d18[_0x3f9bc3(0x172)]==='TRAINING_COMPLETE'){const _0x2fcaed=_0x2c6d18[_0x3f9bc3(0x151)][_0x3f9bc3(0x177)]||'',_0x43a0e5=_0x2c6d18['payload']['threshold'],_0x4fe470=_0x2c6d18[_0x3f9bc3(0x151)][_0x3f9bc3(0x16c)]?'Success:\x20'+new Date()[_0x3f9bc3(0x14d)]()+'\x20('+_0x2fcaed+')':_0x3f9bc3(0x168)+_0x2c6d18['payload']['reason'];_0x19f989['setStateAsync'](_0x3f9bc3(0x11a),{'val':_0x4fe470,'ack':!![]});if(_0x2c6d18[_0x3f9bc3(0x151)][_0x3f9bc3(0x16c)]&&_0x43a0e5)_0x19f989[_0x3f9bc3(0x136)](_0x3f9bc3(0x15b),{'val':_0x43a0e5,'ack':!![]});}else{if(_0x2c6d18['type']===_0x3f9bc3(0x139)){const {patterns:_0x25933f}=_0x2c6d18[_0x3f9bc3(0x151)];if(_0x25933f&&_0x25933f['length']>0x0){_0x19f989['log']['info']('ðŸ›‹ï¸\x20BUTLER:\x20Found\x20'+_0x25933f[_0x3f9bc3(0x161)]+'\x20new\x20patterns.'),_0x19f989[_0x3f9bc3(0x136)](_0x3f9bc3(0x143),{'val':JSON[_0x3f9bc3(0x11d)](_0x25933f),'ack':!![]});const _0x45c66d=_0x25933f[0x0],_0x9dbd82=_0x3f9bc3(0x13b)+_0x45c66d['rule']+'\x20('+(_0x45c66d[_0x3f9bc3(0x157)]*0x64)[_0x3f9bc3(0x123)](0x0)+'%)';_0x19f989[_0x3f9bc3(0x136)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x19f989[_0x3f9bc3(0x136)](_0x3f9bc3(0x12e),{'val':_0x9dbd82,'ack':!![]});}else _0x19f989[_0x3f9bc3(0x13e)]['info'](_0x3f9bc3(0x121)),_0x19f989[_0x3f9bc3(0x136)](_0x3f9bc3(0x15e),{'val':![],'ack':!![]}),_0x19f989[_0x3f9bc3(0x136)](_0x3f9bc3(0x143),{'val':'[]','ack':!![]});}else{if(_0x2c6d18[_0x3f9bc3(0x172)]===_0x3f9bc3(0x129)){if(_0x2c6d18[_0x3f9bc3(0x151)][_0x3f9bc3(0x16c)])try{const _0x1b5695=JSON[_0x3f9bc3(0x13f)](_0x2c6d18[_0x3f9bc3(0x151)]['details']);if(_0x1b5695[_0x3f9bc3(0x13a)])_0x19f989['setStateAsync']('analysis.energy.insulationScore',{'val':JSON['stringify'](_0x1b5695[_0x3f9bc3(0x13a)]),'ack':!![]});if(_0x1b5695[_0x3f9bc3(0x150)])_0x19f989['setStateAsync'](_0x3f9bc3(0x11e),{'val':JSON['stringify'](_0x1b5695[_0x3f9bc3(0x150)]),'ack':!![]});}catch(_0x35ac54){}}else{if(_0x2c6d18['type']===_0x3f9bc3(0x15a)){if(_0x2c6d18[_0x3f9bc3(0x151)][_0x3f9bc3(0x16c)])_0x19f989[_0x3f9bc3(0x13e)][_0x3f9bc3(0x137)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x2c6d18[_0x3f9bc3(0x172)]==='HEALTH_RESULT')_0x19f989[_0x3f9bc3(0x136)](_0x3f9bc3(0x148),{'val':new Date()[_0x3f9bc3(0x158)](),'ack':!![]}),_0x19f989[_0x3f9bc3(0x136)](_0x3f9bc3(0x12c),{'val':_0x2c6d18[_0x3f9bc3(0x151)][_0x3f9bc3(0x130)],'ack':!![]});else{if(_0x2c6d18['type']===_0x3f9bc3(0x127))_0x19f989[_0x3f9bc3(0x136)](_0x3f9bc3(0x173),{'val':_0x2c6d18[_0x3f9bc3(0x151)][_0x3f9bc3(0x14a)],'ack':!![]}),_0x19f989[_0x3f9bc3(0x136)](_0x3f9bc3(0x135),{'val':_0x2c6d18[_0x3f9bc3(0x151)]['change_percent'],'ack':!![]});else{if(_0x2c6d18[_0x3f9bc3(0x172)]===_0x3f9bc3(0x153)){const {speed_trend:_0x50f930}=_0x2c6d18['payload'];if(_0x50f930!==undefined)_0x19f989['setStateAsync']('analysis.health.gaitSpeed',{'val':_0x50f930,'ack':!![]});}else{if(_0x2c6d18[_0x3f9bc3(0x172)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x6a3974}=_0x2c6d18[_0x3f9bc3(0x151)];if(_0x6a3974)_0x19f989[_0x3f9bc3(0x136)](_0x3f9bc3(0x11f),{'val':JSON['stringify'](_0x6a3974),'ack':!![]});}else{if(_0x2c6d18[_0x3f9bc3(0x172)]===_0x3f9bc3(0x126)){const {data:_0xbf4a30}=_0x2c6d18['payload'];_0xbf4a30&&(_0x19f989[_0x3f9bc3(0x13e)][_0x3f9bc3(0x137)](_0x3f9bc3(0x14c)),_0x19f989[_0x3f9bc3(0x136)](_0x3f9bc3(0x160),{'val':JSON[_0x3f9bc3(0x11d)](_0xbf4a30),'ack':!![]}));}else{if(_0x2c6d18['type']==='TOPOLOGY_ACK')_0x19f989[_0x3f9bc3(0x13e)][_0x3f9bc3(0x15f)](_0x3f9bc3(0x140));else{if(_0x2c6d18[_0x3f9bc3(0x172)]===_0x3f9bc3(0x16e)){const {room:_0x4dd4e4,propagation:_0x289dac}=_0x2c6d18['payload'];let _0xcfe33d=_0x3f9bc3(0x176),_0x21e04a=0x0;if(_0x289dac){const _0x4da4fd=Object[_0x3f9bc3(0x138)](_0x289dac);_0x4da4fd[_0x3f9bc3(0x161)]>0x0&&(_0xcfe33d=_0x4da4fd[0x0][0x0],_0x21e04a=_0x4da4fd[0x0][0x1]);}_0x19f989['setStateAsync'](_0x3f9bc3(0x146),{'val':_0xcfe33d,'ack':!![]}),_0x19f989['setStateAsync'](_0x3f9bc3(0x16a),{'val':_0x21e04a,'ack':!![]}),_0x21e04a>0.4&&_0x19f989[_0x3f9bc3(0x13e)][_0x3f9bc3(0x15f)]('ðŸ”®\x20Prediction:\x20From\x20'+_0x4dd4e4+_0x3f9bc3(0x15c)+_0xcfe33d+'\x20('+(_0x21e04a*0x64)[_0x3f9bc3(0x123)](0x0)+'%)'),automation[_0x3f9bc3(0x122)](_0x19f989,_0xcfe33d,_0x21e04a);}}}}}}}}}}}}}}function startService(_0x595d6d,_0x10e309){const _0x505e9f=a3_0x293160;let _0x122717=_0x505e9f(0x149);if(fs[_0x505e9f(0x17b)](_0x10e309))_0x122717=_0x10e309;try{const _0x2873da=path[_0x505e9f(0x142)](__dirname,'..',_0x505e9f(0x156),_0x505e9f(0x169));pythonProcess=spawn(_0x122717,[_0x2873da]),pythonProcess[_0x505e9f(0x162)]['on']('data',_0x855fe=>{const _0x241ac0=_0x505e9f,_0x3d88a8=_0x855fe['toString']()[_0x241ac0(0x166)]('\x0a');_0x3d88a8[_0x241ac0(0x165)](_0x4ba5b7=>{const _0x25a393=_0x241ac0,_0x460a44=_0x4ba5b7[_0x25a393(0x16b)]();if(!_0x460a44)return;if(_0x460a44[_0x25a393(0x118)](_0x25a393(0x147)))_0x595d6d[_0x25a393(0x13e)][_0x25a393(0x15f)](_0x25a393(0x128)+_0x460a44[_0x25a393(0x141)](0x5)[_0x25a393(0x16b)]());else{if(_0x460a44[_0x25a393(0x118)](_0x25a393(0x12f)))try{const _0x5b610c=JSON[_0x25a393(0x13f)](_0x460a44[_0x25a393(0x141)](0x8)[_0x25a393(0x16b)]());handleResult(_0x595d6d,_0x5b610c);}catch(_0x3513f7){}}});}),pythonProcess['on'](_0x505e9f(0x155),_0xc06d0c=>{pythonProcess=null;}),_0x595d6d[_0x505e9f(0x131)]=(_0x3c79c4,_0x527ace)=>send(_0x595d6d,_0x3c79c4,_0x527ace);}catch(_0x1c6ea6){_0x595d6d['log']['error'](_0x505e9f(0x154)+_0x1c6ea6[_0x505e9f(0x13d)]);}}function stopService(_0x3155e8){const _0x53e270=a3_0x293160;if(pythonProcess){try{pythonProcess[_0x53e270(0x144)]();}catch(_0x23bab3){}pythonProcess=null;}}module[a3_0x293160(0x164)]={'startService':startService,'stopService':stopService,'send':send};