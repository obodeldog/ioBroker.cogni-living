const a4_0x2cd8f4=a4_0x23a2;(function(_0x54780f,_0x3edcd9){const _0x587b84=a4_0x23a2,_0x2c9dcd=_0x54780f();while(!![]){try{const _0x13cf37=-parseInt(_0x587b84(0x1ca))/0x1+-parseInt(_0x587b84(0x1cf))/0x2*(parseInt(_0x587b84(0x21f))/0x3)+parseInt(_0x587b84(0x1d3))/0x4+parseInt(_0x587b84(0x21d))/0x5+parseInt(_0x587b84(0x205))/0x6*(parseInt(_0x587b84(0x1e0))/0x7)+parseInt(_0x587b84(0x1de))/0x8+-parseInt(_0x587b84(0x202))/0x9;if(_0x13cf37===_0x3edcd9)break;else _0x2c9dcd['push'](_0x2c9dcd['shift']());}catch(_0x19db67){_0x2c9dcd['push'](_0x2c9dcd['shift']());}}}(a4_0x2e79,0x37da3));const a4_0x521505=(function(){let _0x4e5e46=!![];return function(_0x3a429b,_0x178f16){const _0x2956a5=_0x4e5e46?function(){const _0x51a25e=a4_0x23a2;if(_0x178f16){const _0x305f51=_0x178f16[_0x51a25e(0x1ec)](_0x3a429b,arguments);return _0x178f16=null,_0x305f51;}}:function(){};return _0x4e5e46=![],_0x2956a5;};}()),a4_0x26b2c3=a4_0x521505(this,function(){const _0x1ead5b=a4_0x23a2;return a4_0x26b2c3[_0x1ead5b(0x1d0)]()['search']('(((.+)+)+)+$')[_0x1ead5b(0x1d0)]()[_0x1ead5b(0x1cc)](a4_0x26b2c3)[_0x1ead5b(0x1e2)](_0x1ead5b(0x1cb));});a4_0x26b2c3();'use strict';const {spawn}=require(a4_0x2cd8f4(0x1fa)),path=require(a4_0x2cd8f4(0x203)),fs=require('fs'),setup=require(a4_0x2cd8f4(0x1fd)),automation=require('./automation');let pythonProcess=null;function a4_0x23a2(_0x50ab6d,_0x1138e6){const _0x1cfb87=a4_0x2e79();return a4_0x23a2=function(_0x26b2c3,_0x521505){_0x26b2c3=_0x26b2c3-0x1c9;let _0x2e794e=_0x1cfb87[_0x26b2c3];return _0x2e794e;},a4_0x23a2(_0x50ab6d,_0x1138e6);}function send(_0x2e5304,_0x12217f,_0xac7e37={}){const _0x55043f=a4_0x2cd8f4;if(!pythonProcess||!pythonProcess[_0x55043f(0x20d)][_0x55043f(0x1f4)])return;const _0x193dab=JSON[_0x55043f(0x1fe)]({'command':_0x12217f,..._0xac7e37});try{pythonProcess['stdin'][_0x55043f(0x206)](_0x193dab+'\x0a');}catch(_0x380e0e){}}function handleResult(_0x47a81b,_0x2fd980){const _0x1bdd0b=a4_0x2cd8f4;if(_0x2fd980[_0x1bdd0b(0x216)]==='PONG')_0x47a81b[_0x1bdd0b(0x211)][_0x1bdd0b(0x200)](_0x1bdd0b(0x226));else{if(_0x2fd980[_0x1bdd0b(0x216)]===_0x1bdd0b(0x1ef)){const {anomaly_score:_0x11339a,is_anomaly:_0x5ccb40,threshold:_0x3707ee,explanation:_0x298f17}=_0x2fd980['payload'];_0x47a81b[_0x1bdd0b(0x209)](_0x1bdd0b(0x21a),{'val':_0x11339a,'ack':!![]}),_0x47a81b[_0x1bdd0b(0x209)](_0x1bdd0b(0x1d2),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x3707ee)_0x47a81b['setStateAsync'](_0x1bdd0b(0x21e),{'val':_0x3707ee,'ack':!![]});if(_0x5ccb40){let _0x160bf9=_0x1bdd0b(0x1ee)+_0x11339a[_0x1bdd0b(0x1eb)](0x4)+')';if(_0x298f17&&_0x298f17!==_0x1bdd0b(0x1e6))_0x160bf9+=_0x1bdd0b(0x1d1)+_0x298f17;_0x47a81b[_0x1bdd0b(0x209)](_0x1bdd0b(0x1dd),{'val':!![],'ack':!![]}),_0x47a81b[_0x1bdd0b(0x209)](_0x1bdd0b(0x219),{'val':_0x160bf9,'ack':!![]}),setup[_0x1bdd0b(0x223)](_0x47a81b,_0x1bdd0b(0x1ed)+_0x160bf9,![],!![]);}}else{if(_0x2fd980[_0x1bdd0b(0x216)]===_0x1bdd0b(0x20c)){const _0x53424a=_0x2fd980[_0x1bdd0b(0x1d6)][_0x1bdd0b(0x1f9)]||'',_0x47c4ce=_0x2fd980[_0x1bdd0b(0x1d6)][_0x1bdd0b(0x224)],_0xd57a18=_0x2fd980[_0x1bdd0b(0x1d6)][_0x1bdd0b(0x1e5)]?_0x1bdd0b(0x1d4)+new Date()[_0x1bdd0b(0x1e9)]()+'\x20('+_0x53424a+')':_0x1bdd0b(0x21c)+_0x2fd980[_0x1bdd0b(0x1d6)][_0x1bdd0b(0x1d5)];_0x47a81b['setStateAsync'](_0x1bdd0b(0x1fc),{'val':_0xd57a18,'ack':!![]});if(_0x2fd980['payload'][_0x1bdd0b(0x1e5)]&&_0x47c4ce)_0x47a81b['setStateAsync'](_0x1bdd0b(0x21e),{'val':_0x47c4ce,'ack':!![]});}else{if(_0x2fd980[_0x1bdd0b(0x216)]===_0x1bdd0b(0x227)){if(_0x2fd980[_0x1bdd0b(0x1d6)][_0x1bdd0b(0x1e5)])try{const _0x55ac68=JSON[_0x1bdd0b(0x207)](_0x2fd980[_0x1bdd0b(0x1d6)][_0x1bdd0b(0x1f9)]);if(_0x55ac68[_0x1bdd0b(0x1ce)])_0x47a81b['setStateAsync'](_0x1bdd0b(0x228),{'val':JSON[_0x1bdd0b(0x1fe)](_0x55ac68['insulation']),'ack':!![]});if(_0x55ac68[_0x1bdd0b(0x1dc)])_0x47a81b[_0x1bdd0b(0x209)](_0x1bdd0b(0x1f3),{'val':JSON[_0x1bdd0b(0x1fe)](_0x55ac68[_0x1bdd0b(0x1dc)]),'ack':!![]});}catch(_0xa95111){}}else{if(_0x2fd980[_0x1bdd0b(0x216)]===_0x1bdd0b(0x1e4)){if(_0x2fd980[_0x1bdd0b(0x1d6)][_0x1bdd0b(0x1e5)])_0x47a81b[_0x1bdd0b(0x211)][_0x1bdd0b(0x20f)](_0x1bdd0b(0x213));}else{if(_0x2fd980['type']===_0x1bdd0b(0x1ff))_0x47a81b[_0x1bdd0b(0x209)](_0x1bdd0b(0x210),{'val':new Date()[_0x1bdd0b(0x1f7)](),'ack':!![]}),_0x47a81b['setStateAsync'](_0x1bdd0b(0x1d9),{'val':_0x2fd980['payload']['is_anomaly'],'ack':!![]});else{if(_0x2fd980[_0x1bdd0b(0x216)]===_0x1bdd0b(0x20a)){const {speed_trend:_0x1c1ddf}=_0x2fd980[_0x1bdd0b(0x1d6)];if(_0x1c1ddf!==undefined)_0x47a81b['setStateAsync'](_0x1bdd0b(0x1df),{'val':_0x1c1ddf,'ack':!![]});}else{if(_0x2fd980['type']===_0x1bdd0b(0x225)){const {forecast:_0x4dd468}=_0x2fd980[_0x1bdd0b(0x1d6)];if(_0x4dd468)_0x47a81b[_0x1bdd0b(0x209)](_0x1bdd0b(0x1d8),{'val':JSON[_0x1bdd0b(0x1fe)](_0x4dd468),'ack':!![]});}else{if(_0x2fd980['type']==='PINN_PREDICT_RESULT'){const {forecast:_0x22207d}=_0x2fd980[_0x1bdd0b(0x1d6)];if(_0x22207d)_0x47a81b['setStateAsync'](_0x1bdd0b(0x208),{'val':JSON[_0x1bdd0b(0x1fe)](_0x22207d),'ack':!![]});}else{if(_0x2fd980[_0x1bdd0b(0x216)]===_0x1bdd0b(0x1f6)){const {proposals:_0xca2531}=_0x2fd980[_0x1bdd0b(0x1d6)];_0x47a81b['getState'](_0x1bdd0b(0x1f8),(_0x25eba5,_0x41de93)=>{const _0x54fc67=_0x1bdd0b;_0x41de93&&_0x41de93[_0x54fc67(0x20b)]===!![]&&_0xca2531&&_0xca2531['length']>0x0&&automation[_0x54fc67(0x222)](_0x47a81b,_0xca2531);});}else{if(_0x2fd980['type']===_0x1bdd0b(0x221)){const {room:_0x33cbbc,propagation:_0x57d34e}=_0x2fd980['payload'];let _0x267ebe=_0x1bdd0b(0x1e6),_0x168548=0x0;if(_0x57d34e){const _0x383017=Object[_0x1bdd0b(0x229)](_0x57d34e);_0x383017['length']>0x0&&(_0x267ebe=_0x383017[0x0][0x0],_0x168548=_0x383017[0x0][0x1]);}_0x47a81b['setStateAsync']('analysis.prediction.nextRoom',{'val':_0x267ebe,'ack':!![]}),_0x47a81b['setStateAsync'](_0x1bdd0b(0x1fb),{'val':_0x168548,'ack':!![]}),automation['handlePrediction'](_0x47a81b,_0x267ebe,_0x168548);}else{if(_0x2fd980[_0x1bdd0b(0x216)]===_0x1bdd0b(0x1e8)){const {probabilities:_0x6ac624}=_0x2fd980[_0x1bdd0b(0x1d6)];if(_0x6ac624){_0x47a81b[_0x1bdd0b(0x209)](_0x1bdd0b(0x204),{'val':JSON['stringify'](_0x6ac624),'ack':!![]});const _0x4d891b=Object[_0x1bdd0b(0x1f1)](_0x6ac624);if(_0x4d891b['length']>0x0){const _0x453cba=_0x4d891b[0x0],_0x35130e=_0x6ac624[_0x453cba];_0x47a81b[_0x1bdd0b(0x209)](_0x1bdd0b(0x1cd),{'val':_0x453cba,'ack':!![]}),_0x47a81b[_0x1bdd0b(0x209)](_0x1bdd0b(0x212),{'val':_0x35130e,'ack':!![]});}}}else{if(_0x2fd980[_0x1bdd0b(0x216)]===_0x1bdd0b(0x1e1)){const {patterns:_0x205f22}=_0x2fd980['payload'];if(_0x205f22&&_0x205f22['length']>0x0)_0x47a81b[_0x1bdd0b(0x209)](_0x1bdd0b(0x1f5),{'val':JSON[_0x1bdd0b(0x1fe)](_0x205f22),'ack':!![]});}}}}}}}}}}}}}}function startService(_0x1a3c34,_0x5c3743){const _0x53225e=a4_0x2cd8f4;let _0x14fd14=_0x53225e(0x215);if(fs[_0x53225e(0x218)](_0x5c3743))_0x14fd14=_0x5c3743;try{const _0x11b0ab=path['join'](__dirname,'..',_0x53225e(0x1ea),'service.py');pythonProcess=spawn(_0x14fd14,[_0x11b0ab]),pythonProcess[_0x53225e(0x1db)]['on']('data',_0x459a46=>{const _0xf2d951=_0x53225e,_0x3cc5ac=_0x459a46[_0xf2d951(0x1d0)]()[_0xf2d951(0x1d7)]('\x0a');_0x3cc5ac[_0xf2d951(0x214)](_0xb67bac=>{const _0x5e87f2=_0xf2d951,_0x5325f9=_0xb67bac['trim']();if(!_0x5325f9)return;if(_0x5325f9['startsWith'](_0x5e87f2(0x220)))_0x1a3c34[_0x5e87f2(0x211)]['debug'](_0x5e87f2(0x1f2)+_0x5325f9[_0x5e87f2(0x201)](0x5)['trim']());else{if(_0x5325f9[_0x5e87f2(0x21b)](_0x5e87f2(0x20e)))try{const _0x4aa997=JSON['parse'](_0x5325f9['substring'](0x8)[_0x5e87f2(0x1e3)]());handleResult(_0x1a3c34,_0x4aa997);}catch(_0x3e0626){}}});}),pythonProcess['on']('close',_0x2825c3=>{pythonProcess=null;}),_0x1a3c34['sendToPythonWrapper']=(_0x4af5e4,_0x2e4857)=>send(_0x1a3c34,_0x4af5e4,_0x2e4857);}catch(_0x460df9){_0x1a3c34[_0x53225e(0x211)][_0x53225e(0x217)](_0x53225e(0x1e7)+_0x460df9[_0x53225e(0x1f0)]);}}function a4_0x2e79(){const _0x4dc94f=['204IMJtPq','[LOG]','SIGNAL_RESULT','applyEnergySavings','sendNotification','threshold','ENERGY_PREDICT_RESULT','üêç\x20Python\x20Pong','ENERGY_TRAIN_RESULT','analysis.energy.insulationScore','entries','kill','21900NnHmgr','(((.+)+)+)+$','constructor','analysis.prediction.trackerTopRoom','insulation','1868NhNMNv','toString','\x0aGrund:\x20','analysis.security.lastCheck','1512020srzwxg','Success:\x20','reason','payload','split','analysis.energy.forecast','analysis.health.isAnomaly','exports','stdout','heating','analysis.isAlert','3230224AOdRku','analysis.health.gaitSpeed','13979zGpbcj','COMFORT_RESULT','search','trim','HEALTH_TRAIN_RESULT','success','Unknown','Error\x20launching\x20Python:\x20','TRACKER_RESULT','toLocaleTimeString','python_service','toFixed','apply','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','SECURITY_RESULT','message','keys','[PYTHON]\x20','analysis.energy.heatingScore','writable','analysis.automation.detectedPatterns','ENERGY_OPTIMIZE_RESULT','toISOString','analysis.energy.mpcActive','details','child_process','analysis.prediction.confidence','analysis.training.status','./setup','stringify','HEALTH_RESULT','debug','substring','8762364mQASRC','path','analysis.prediction.trackerState','966BSOzmK','write','parse','analysis.energy.pinnForecast','setStateAsync','GAIT_RESULT','val','TRAINING_COMPLETE','stdin','[RESULT]','info','analysis.health.lastCheck','log','analysis.prediction.trackerConfidence','‚úÖ\x20HEALTH\x20TRAINED.','forEach','python3','type','error','existsSync','analysis.alertReason','analysis.security.lastScore','startsWith','Failed:\x20','922395upcEnu','analysis.security.currentThreshold'];a4_0x2e79=function(){return _0x4dc94f;};return a4_0x2e79();}function stopService(_0x515f24){const _0x20ba66=a4_0x2cd8f4;if(pythonProcess){try{pythonProcess[_0x20ba66(0x1c9)]();}catch(_0x176498){}pythonProcess=null;}}module[a4_0x2cd8f4(0x1da)]={'startService':startService,'stopService':stopService,'send':send};