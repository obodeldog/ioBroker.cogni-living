const a3_0x5d1450=a3_0x11c6;(function(_0x3b6c29,_0x20c7d4){const _0x223b8c=a3_0x11c6,_0x5dee75=_0x3b6c29();while(!![]){try{const _0x2ae1f0=-parseInt(_0x223b8c(0xfe))/0x1+parseInt(_0x223b8c(0x134))/0x2+parseInt(_0x223b8c(0x110))/0x3*(-parseInt(_0x223b8c(0x100))/0x4)+parseInt(_0x223b8c(0xd2))/0x5+-parseInt(_0x223b8c(0x121))/0x6*(-parseInt(_0x223b8c(0xf0))/0x7)+-parseInt(_0x223b8c(0xf3))/0x8*(-parseInt(_0x223b8c(0x107))/0x9)+-parseInt(_0x223b8c(0xee))/0xa*(parseInt(_0x223b8c(0xd3))/0xb);if(_0x2ae1f0===_0x20c7d4)break;else _0x5dee75['push'](_0x5dee75['shift']());}catch(_0x529269){_0x5dee75['push'](_0x5dee75['shift']());}}}(a3_0x5e2b,0xd5e76));function a3_0x5e2b(){const _0x5152c4=['\x20new\x20patterns.','âš ï¸\x20SECURITY\x20ALARM:\x20','HEALTH_TRAIN_RESULT','29577HQANIf','analysis.automation.detectedPatterns','success','write','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','type','search','[RESULT]','analysis.security.lastCheck','analysis.alertReason','message','python3','threshold','constructor','analysis.automation.patternDetected','COMFORT_RESULT','data','7193622kuHpnM','HEALTH_RESULT','analysis.energy.insulationScore','trim','stdout','TREND_RESULT','service.py','ðŸ”®\x20Prediction:\x20From\x20','stringify','error','ðŸ\x20Python\x20confirmed\x20new\x20topology.','reason','parse','change_percent','toLocaleTimeString','setStateAsync','Success:\x20','ANOMALY','SIGNAL_RESULT','752868rPcwmi','PONG','analysis.security.currentThreshold','[PYTHON]\x20','5810355TFuXYA','154gmvTLx','rule','stdin','debug','writable','split','sendToPythonWrapper','existsSync','analysis.isAlert','analysis.training.status','exports','startsWith','toFixed','child_process','analysis.health.trendDiagnosis','analysis.prediction.nextRoom','path','analysis.energy.heatingScore','log','TRAINING_COMPLETE','sendNotification','[LOG]','GAIT_RESULT','ENERGY_TRAIN_RESULT','Regel\x20erkannt:\x20','analysis.health.gaitSpeed','Unknown','388210rMElaU','ðŸ\x20Python\x20Pong','7MJfwHZ','ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.','details','88BDllBr','substring','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','analysis.health.isAnomaly','payload','(((.+)+)+)+$','diagnosis','TOPOLOGY_RESULT','Error\x20launching\x20Python:\x20','âœ…\x20HEALTH\x20TRAINED.','apply','1533853FFNxFx','is_anomaly','552NFOAsU','info','analysis.security.lastScore','toISOString','Failed:\x20','analysis.prediction.confidence','python_service','1289943hmKlwV','heating','length','confidence','ENERGY_PREDICT_RESULT','toString'];a3_0x5e2b=function(){return _0x5152c4;};return a3_0x5e2b();}const a3_0x437696=(function(){let _0x46c441=!![];return function(_0x5f405,_0x1f9786){const _0x3e4ac9=_0x46c441?function(){const _0x456fad=a3_0x11c6;if(_0x1f9786){const _0x5c9997=_0x1f9786[_0x456fad(0xfd)](_0x5f405,arguments);return _0x1f9786=null,_0x5c9997;}}:function(){};return _0x46c441=![],_0x3e4ac9;};}()),a3_0x35e05c=a3_0x437696(this,function(){const _0x5a3e86=a3_0x11c6;return a3_0x35e05c[_0x5a3e86(0x10c)]()[_0x5a3e86(0x116)]('(((.+)+)+)+$')[_0x5a3e86(0x10c)]()[_0x5a3e86(0x11d)](a3_0x35e05c)[_0x5a3e86(0x116)](_0x5a3e86(0xf8));});a3_0x35e05c();'use strict';const {spawn}=require(a3_0x5d1450(0xe0)),path=require(a3_0x5d1450(0xe3)),fs=require('fs'),setup=require('./setup'),automation=require('./automation');function a3_0x11c6(_0x11a48c,_0x3a0e36){const _0x4df82e=a3_0x5e2b();return a3_0x11c6=function(_0x35e05c,_0x437696){_0x35e05c=_0x35e05c-0xd2;let _0x5e2bf3=_0x4df82e[_0x35e05c];return _0x5e2bf3;},a3_0x11c6(_0x11a48c,_0x3a0e36);}let pythonProcess=null;function send(_0x4c2d24,_0x4056b6,_0xb3dacb={}){const _0x209dbe=a3_0x5d1450;if(!pythonProcess||!pythonProcess[_0x209dbe(0xd5)][_0x209dbe(0xd7)])return;const _0xe4dc6f=JSON[_0x209dbe(0x129)]({'command':_0x4056b6,..._0xb3dacb});try{pythonProcess[_0x209dbe(0xd5)][_0x209dbe(0x113)](_0xe4dc6f+'\x0a');}catch(_0x3085fb){}}function handleResult(_0x3c828f,_0x9c250f){const _0x4ca128=a3_0x5d1450;if(_0x9c250f[_0x4ca128(0x115)]===_0x4ca128(0x135))_0x3c828f['log'][_0x4ca128(0xd6)](_0x4ca128(0xef));else{if(_0x9c250f[_0x4ca128(0x115)]==='SECURITY_RESULT'){const {anomaly_score:_0x413f80,is_anomaly:_0x2943a7,threshold:_0x132048,explanation:_0x3ef8b3}=_0x9c250f['payload'];_0x3c828f[_0x4ca128(0xe5)][_0x4ca128(0x101)](_0x4ca128(0xf5)+_0x413f80['toFixed'](0x5)+'\x20->\x20'+(_0x2943a7?_0x4ca128(0x132):'OK')),_0x3c828f[_0x4ca128(0x130)](_0x4ca128(0x102),{'val':_0x413f80,'ack':!![]}),_0x3c828f[_0x4ca128(0x130)](_0x4ca128(0x118),{'val':new Date()[_0x4ca128(0x103)](),'ack':!![]});if(_0x132048)_0x3c828f['setStateAsync'](_0x4ca128(0x136),{'val':_0x132048,'ack':!![]});if(_0x2943a7){let _0x3d7646=_0x4ca128(0x114)+_0x413f80[_0x4ca128(0xdf)](0x4)+')';if(_0x3ef8b3&&_0x3ef8b3!==_0x4ca128(0xed))_0x3d7646+='\x0aGrund:\x20'+_0x3ef8b3;_0x3c828f['setStateAsync'](_0x4ca128(0xdb),{'val':!![],'ack':!![]}),_0x3c828f['setStateAsync'](_0x4ca128(0x119),{'val':_0x3d7646,'ack':!![]}),setup[_0x4ca128(0xe7)](_0x3c828f,_0x4ca128(0x10e)+_0x3d7646,![],!![]);}}else{if(_0x9c250f[_0x4ca128(0x115)]===_0x4ca128(0xe6)){const _0x3f3d06=_0x9c250f[_0x4ca128(0xf7)][_0x4ca128(0xf2)]||'',_0x5d776e=_0x9c250f[_0x4ca128(0xf7)][_0x4ca128(0x11c)],_0x671fd3=_0x9c250f[_0x4ca128(0xf7)][_0x4ca128(0x112)]?_0x4ca128(0x131)+new Date()[_0x4ca128(0x12f)]()+'\x20('+_0x3f3d06+')':_0x4ca128(0x104)+_0x9c250f[_0x4ca128(0xf7)][_0x4ca128(0x12c)];_0x3c828f[_0x4ca128(0x130)](_0x4ca128(0xdc),{'val':_0x671fd3,'ack':!![]});if(_0x9c250f[_0x4ca128(0xf7)][_0x4ca128(0x112)]&&_0x5d776e)_0x3c828f['setStateAsync'](_0x4ca128(0x136),{'val':_0x5d776e,'ack':!![]});}else{if(_0x9c250f[_0x4ca128(0x115)]===_0x4ca128(0x11f)){const {patterns:_0x45ca0e}=_0x9c250f['payload'];if(_0x45ca0e&&_0x45ca0e[_0x4ca128(0x109)]>0x0){_0x3c828f[_0x4ca128(0xe5)][_0x4ca128(0x101)]('ðŸ›‹ï¸\x20BUTLER:\x20Found\x20'+_0x45ca0e['length']+_0x4ca128(0x10d)),_0x3c828f['setStateAsync'](_0x4ca128(0x111),{'val':JSON[_0x4ca128(0x129)](_0x45ca0e),'ack':!![]});const _0x2bf985=_0x45ca0e[0x0],_0x1644b1=_0x4ca128(0xeb)+_0x2bf985[_0x4ca128(0xd4)]+'\x20('+(_0x2bf985[_0x4ca128(0x10a)]*0x64)[_0x4ca128(0xdf)](0x0)+'%)';_0x3c828f[_0x4ca128(0x130)](_0x4ca128(0x11e),{'val':!![],'ack':!![]}),_0x3c828f[_0x4ca128(0x130)]('analysis.automation.description',{'val':_0x1644b1,'ack':!![]});}else _0x3c828f[_0x4ca128(0xe5)][_0x4ca128(0x101)]('ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.'),_0x3c828f[_0x4ca128(0x130)](_0x4ca128(0x11e),{'val':![],'ack':!![]}),_0x3c828f[_0x4ca128(0x130)](_0x4ca128(0x111),{'val':'[]','ack':!![]});}else{if(_0x9c250f['type']===_0x4ca128(0xea)){if(_0x9c250f[_0x4ca128(0xf7)][_0x4ca128(0x112)])try{const _0x303a7e=JSON[_0x4ca128(0x12d)](_0x9c250f['payload'][_0x4ca128(0xf2)]);if(_0x303a7e['insulation'])_0x3c828f[_0x4ca128(0x130)](_0x4ca128(0x123),{'val':JSON[_0x4ca128(0x129)](_0x303a7e['insulation']),'ack':!![]});if(_0x303a7e[_0x4ca128(0x108)])_0x3c828f[_0x4ca128(0x130)](_0x4ca128(0xe4),{'val':JSON[_0x4ca128(0x129)](_0x303a7e[_0x4ca128(0x108)]),'ack':!![]});}catch(_0x1b23aa){}}else{if(_0x9c250f[_0x4ca128(0x115)]===_0x4ca128(0x10f)){if(_0x9c250f[_0x4ca128(0xf7)][_0x4ca128(0x112)])_0x3c828f['log'][_0x4ca128(0x101)](_0x4ca128(0xfc));}else{if(_0x9c250f[_0x4ca128(0x115)]===_0x4ca128(0x122))_0x3c828f[_0x4ca128(0x130)]('analysis.health.lastCheck',{'val':new Date()['toISOString'](),'ack':!![]}),_0x3c828f['setStateAsync'](_0x4ca128(0xf6),{'val':_0x9c250f[_0x4ca128(0xf7)][_0x4ca128(0xff)],'ack':!![]});else{if(_0x9c250f['type']===_0x4ca128(0x126))_0x3c828f[_0x4ca128(0x130)](_0x4ca128(0xe1),{'val':_0x9c250f['payload'][_0x4ca128(0xf9)],'ack':!![]}),_0x3c828f['setStateAsync']('analysis.health.trendValue',{'val':_0x9c250f['payload'][_0x4ca128(0x12e)],'ack':!![]});else{if(_0x9c250f[_0x4ca128(0x115)]===_0x4ca128(0xe9)){const {speed_trend:_0x3c104a}=_0x9c250f['payload'];if(_0x3c104a!==undefined)_0x3c828f[_0x4ca128(0x130)](_0x4ca128(0xec),{'val':_0x3c104a,'ack':!![]});}else{if(_0x9c250f['type']===_0x4ca128(0x10b)){const {forecast:_0x58617f}=_0x9c250f[_0x4ca128(0xf7)];if(_0x58617f)_0x3c828f['setStateAsync']('analysis.energy.forecast',{'val':JSON['stringify'](_0x58617f),'ack':!![]});}else{if(_0x9c250f[_0x4ca128(0x115)]===_0x4ca128(0xfa)){const {data:_0x33edf3}=_0x9c250f['payload'];_0x33edf3&&(_0x3c828f[_0x4ca128(0xe5)][_0x4ca128(0x101)](_0x4ca128(0xf1)),_0x3c828f[_0x4ca128(0x130)]('analysis.security.topologyMatrix',{'val':JSON['stringify'](_0x33edf3),'ack':!![]}));}else{if(_0x9c250f[_0x4ca128(0x115)]==='TOPOLOGY_ACK')_0x3c828f[_0x4ca128(0xe5)]['debug'](_0x4ca128(0x12b));else{if(_0x9c250f[_0x4ca128(0x115)]===_0x4ca128(0x133)){const {room:_0x42a89a,propagation:_0x3d3852}=_0x9c250f[_0x4ca128(0xf7)];let _0x24183b=_0x4ca128(0xed),_0x2412af=0x0;if(_0x3d3852){const _0x14592b=Object['entries'](_0x3d3852);_0x14592b[_0x4ca128(0x109)]>0x0&&(_0x24183b=_0x14592b[0x0][0x0],_0x2412af=_0x14592b[0x0][0x1]);}_0x3c828f[_0x4ca128(0x130)](_0x4ca128(0xe2),{'val':_0x24183b,'ack':!![]}),_0x3c828f[_0x4ca128(0x130)](_0x4ca128(0x105),{'val':_0x2412af,'ack':!![]}),_0x2412af>0.4&&_0x3c828f['log'][_0x4ca128(0xd6)](_0x4ca128(0x128)+_0x42a89a+'\x20->\x20Likely\x20'+_0x24183b+'\x20('+(_0x2412af*0x64)[_0x4ca128(0xdf)](0x0)+'%)'),automation['handlePrediction'](_0x3c828f,_0x24183b,_0x2412af);}}}}}}}}}}}}}}function startService(_0x53965c,_0x498d84){const _0x13b94f=a3_0x5d1450;let _0x2aa6a4=_0x13b94f(0x11b);if(fs[_0x13b94f(0xda)](_0x498d84))_0x2aa6a4=_0x498d84;try{const _0x778537=path['join'](__dirname,'..',_0x13b94f(0x106),_0x13b94f(0x127));pythonProcess=spawn(_0x2aa6a4,[_0x778537]),pythonProcess[_0x13b94f(0x125)]['on'](_0x13b94f(0x120),_0xa64447=>{const _0x2e0bfa=_0x13b94f,_0x7beabd=_0xa64447[_0x2e0bfa(0x10c)]()[_0x2e0bfa(0xd8)]('\x0a');_0x7beabd['forEach'](_0x41fe03=>{const _0x5d1969=_0x2e0bfa,_0x23eca0=_0x41fe03[_0x5d1969(0x124)]();if(!_0x23eca0)return;if(_0x23eca0[_0x5d1969(0xde)](_0x5d1969(0xe8)))_0x53965c[_0x5d1969(0xe5)]['debug'](_0x5d1969(0x137)+_0x23eca0[_0x5d1969(0xf4)](0x5)[_0x5d1969(0x124)]());else{if(_0x23eca0[_0x5d1969(0xde)](_0x5d1969(0x117)))try{const _0x2f9809=JSON[_0x5d1969(0x12d)](_0x23eca0[_0x5d1969(0xf4)](0x8)['trim']());handleResult(_0x53965c,_0x2f9809);}catch(_0x17b15d){}}});}),pythonProcess['on']('close',_0x464e20=>{pythonProcess=null;}),_0x53965c[_0x13b94f(0xd9)]=(_0x22d758,_0x952080)=>send(_0x53965c,_0x22d758,_0x952080);}catch(_0x3b40c5){_0x53965c[_0x13b94f(0xe5)][_0x13b94f(0x12a)](_0x13b94f(0xfb)+_0x3b40c5[_0x13b94f(0x11a)]);}}function stopService(_0x5eb425){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x4276ad){}pythonProcess=null;}}module[a3_0x5d1450(0xdd)]={'startService':startService,'stopService':stopService,'send':send};