const a4_0x2dc662=a4_0x5ca6;function a4_0x5ca6(_0x53befa,_0x29b159){const _0x54f081=a4_0x47bb();return a4_0x5ca6=function(_0x12803b,_0x1b202b){_0x12803b=_0x12803b-0xdd;let _0x47bba4=_0x54f081[_0x12803b];return _0x47bba4;},a4_0x5ca6(_0x53befa,_0x29b159);}(function(_0xc44f7d,_0x341ff4){const _0x5fd517=a4_0x5ca6,_0x1dd39e=_0xc44f7d();while(!![]){try{const _0x2bc6a7=parseInt(_0x5fd517(0x13e))/0x1+parseInt(_0x5fd517(0x131))/0x2+-parseInt(_0x5fd517(0x115))/0x3+parseInt(_0x5fd517(0x118))/0x4+parseInt(_0x5fd517(0xef))/0x5*(parseInt(_0x5fd517(0x101))/0x6)+-parseInt(_0x5fd517(0x10d))/0x7+-parseInt(_0x5fd517(0xf8))/0x8*(-parseInt(_0x5fd517(0x139))/0x9);if(_0x2bc6a7===_0x341ff4)break;else _0x1dd39e['push'](_0x1dd39e['shift']());}catch(_0x3819d3){_0x1dd39e['push'](_0x1dd39e['shift']());}}}(a4_0x47bb,0x8fa8b));const a4_0x1b202b=(function(){let _0x28d594=!![];return function(_0x23d44c,_0x9370a3){const _0x49c0ca=_0x28d594?function(){const _0xd28bb8=a4_0x5ca6;if(_0x9370a3){const _0x2a6ea0=_0x9370a3[_0xd28bb8(0x13b)](_0x23d44c,arguments);return _0x9370a3=null,_0x2a6ea0;}}:function(){};return _0x28d594=![],_0x49c0ca;};}()),a4_0x12803b=a4_0x1b202b(this,function(){const _0x561e02=a4_0x5ca6;return a4_0x12803b[_0x561e02(0x138)]()['search']('(((.+)+)+)+$')['toString']()[_0x561e02(0x113)](a4_0x12803b)[_0x561e02(0xfd)](_0x561e02(0xee));});function a4_0x47bb(){const _0x1126dd=['\x20->\x20','error','TOPOLOGY_ACK','Regel\x20erkannt:\x20','data','path','analysis.energy.forecast','write','analysis.health.isAnomaly','PONG','546238IMRHEg','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','\x0aGrund:\x20','âš ï¸\x20SECURITY\x20ALARM:\x20','toLocaleTimeString','âœ…\x20HEALTH\x20TRAINED.','type','toString','307935jcwjwf','join','apply','service.py','kill','559372ymTbOH','success','entries','TREND_RESULT','analysis.health.lastCheck','sendToPythonWrapper','insulation','ENERGY_PREDICT_RESULT','TRAINING_COMPLETE','details','python_service','substring','toISOString','SECURITY_RESULT','analysis.health.gaitSpeed','stdin','GAIT_RESULT','info','existsSync','analysis.health.trendDiagnosis','analysis.alertReason','is_anomaly','trim','Error\x20launching\x20Python:\x20','ðŸ\x20Python\x20Pong','python3','(((.+)+)+)+$','5nxAJvU','ðŸ”®\x20Prediction:\x20From\x20','length','SIGNAL_RESULT','ðŸ\x20Python\x20confirmed\x20new\x20topology.','./setup','toFixed','COMFORT_RESULT','handlePrediction','152OLFzwK','confidence','analysis.security.lastScore','analysis.security.currentThreshold','forEach','search','analysis.automation.detectedPatterns','analysis.automation.patternDetected','analysis.isAlert','1689858VmKLyM','payload','analysis.training.status','ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.','diagnosis','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','heating','analysis.energy.heatingScore','analysis.health.trendValue','child_process','reason','message','8082606rIDiOQ','exports','startsWith','setStateAsync','close','sendNotification','constructor','[PYTHON]\x20','691125eWRUVX','writable','log','836964BNwAig','HEALTH_TRAIN_RESULT','ENERGY_TRAIN_RESULT','analysis.automation.description','./automation','threshold','stdout','split','\x20->\x20Likely\x20','analysis.prediction.confidence','stringify','HEALTH_RESULT','debug','\x20new\x20patterns.','analysis.prediction.nextRoom'];a4_0x47bb=function(){return _0x1126dd;};return a4_0x47bb();}a4_0x12803b();'use strict';const {spawn}=require(a4_0x2dc662(0x10a)),path=require(a4_0x2dc662(0x12c)),fs=require('fs'),setup=require(a4_0x2dc662(0xf4)),automation=require(a4_0x2dc662(0x11c));let pythonProcess=null;function send(_0x88f2eb,_0x54683f,_0x2a2610={}){const _0xd9305d=a4_0x2dc662;if(!pythonProcess||!pythonProcess[_0xd9305d(0xe3)][_0xd9305d(0x116)])return;const _0x15fade=JSON[_0xd9305d(0x122)]({'command':_0x54683f,..._0x2a2610});try{pythonProcess[_0xd9305d(0xe3)][_0xd9305d(0x12e)](_0x15fade+'\x0a');}catch(_0x675d36){}}function handleResult(_0x5c3a03,_0x163d15){const _0x9686b5=a4_0x2dc662;if(_0x163d15[_0x9686b5(0x137)]===_0x9686b5(0x130))_0x5c3a03[_0x9686b5(0x117)][_0x9686b5(0x124)](_0x9686b5(0xec));else{if(_0x163d15['type']===_0x9686b5(0xe1)){const {anomaly_score:_0x44b133,is_anomaly:_0x495365,threshold:_0x35e74d,explanation:_0x18847c}=_0x163d15[_0x9686b5(0x102)];_0x5c3a03[_0x9686b5(0x117)][_0x9686b5(0xe5)](_0x9686b5(0x132)+_0x44b133['toFixed'](0x5)+_0x9686b5(0x127)+(_0x495365?'ANOMALY':'OK')),_0x5c3a03['setStateAsync'](_0x9686b5(0xfa),{'val':_0x44b133,'ack':!![]}),_0x5c3a03[_0x9686b5(0x110)]('analysis.security.lastCheck',{'val':new Date()[_0x9686b5(0xe0)](),'ack':!![]});if(_0x35e74d)_0x5c3a03['setStateAsync'](_0x9686b5(0xfb),{'val':_0x35e74d,'ack':!![]});if(_0x495365){let _0x12dfe2='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x44b133[_0x9686b5(0xf5)](0x4)+')';if(_0x18847c&&_0x18847c!=='Unknown')_0x12dfe2+=_0x9686b5(0x133)+_0x18847c;_0x5c3a03['setStateAsync'](_0x9686b5(0x100),{'val':!![],'ack':!![]}),_0x5c3a03[_0x9686b5(0x110)](_0x9686b5(0xe8),{'val':_0x12dfe2,'ack':!![]}),setup[_0x9686b5(0x112)](_0x5c3a03,_0x9686b5(0x134)+_0x12dfe2,![],!![]);}}else{if(_0x163d15['type']===_0x9686b5(0x146)){const _0x40daf3=_0x163d15[_0x9686b5(0x102)][_0x9686b5(0xdd)]||'',_0x233c4a=_0x163d15[_0x9686b5(0x102)][_0x9686b5(0x11d)],_0x57b4ab=_0x163d15['payload']['success']?'Success:\x20'+new Date()[_0x9686b5(0x135)]()+'\x20('+_0x40daf3+')':'Failed:\x20'+_0x163d15['payload'][_0x9686b5(0x10b)];_0x5c3a03['setStateAsync'](_0x9686b5(0x103),{'val':_0x57b4ab,'ack':!![]});if(_0x163d15[_0x9686b5(0x102)][_0x9686b5(0x13f)]&&_0x233c4a)_0x5c3a03['setStateAsync'](_0x9686b5(0xfb),{'val':_0x233c4a,'ack':!![]});}else{if(_0x163d15['type']===_0x9686b5(0xf6)){const {patterns:_0x480617}=_0x163d15[_0x9686b5(0x102)];if(_0x480617&&_0x480617[_0x9686b5(0xf1)]>0x0){_0x5c3a03['log'][_0x9686b5(0xe5)]('ðŸ›‹ï¸\x20BUTLER:\x20Found\x20'+_0x480617['length']+_0x9686b5(0x125)),_0x5c3a03['setStateAsync'](_0x9686b5(0xfe),{'val':JSON[_0x9686b5(0x122)](_0x480617),'ack':!![]});const _0x128c2a=_0x480617[0x0],_0x48fdb9=_0x9686b5(0x12a)+_0x128c2a['rule']+'\x20('+(_0x128c2a[_0x9686b5(0xf9)]*0x64)[_0x9686b5(0xf5)](0x0)+'%)';_0x5c3a03['setStateAsync'](_0x9686b5(0xff),{'val':!![],'ack':!![]}),_0x5c3a03[_0x9686b5(0x110)](_0x9686b5(0x11b),{'val':_0x48fdb9,'ack':!![]});}else _0x5c3a03['log'][_0x9686b5(0xe5)](_0x9686b5(0x106)),_0x5c3a03[_0x9686b5(0x110)](_0x9686b5(0xff),{'val':![],'ack':!![]}),_0x5c3a03[_0x9686b5(0x110)](_0x9686b5(0xfe),{'val':'[]','ack':!![]});}else{if(_0x163d15[_0x9686b5(0x137)]===_0x9686b5(0x11a)){if(_0x163d15[_0x9686b5(0x102)][_0x9686b5(0x13f)])try{const _0x4d72a7=JSON['parse'](_0x163d15[_0x9686b5(0x102)][_0x9686b5(0xdd)]);if(_0x4d72a7[_0x9686b5(0x144)])_0x5c3a03[_0x9686b5(0x110)]('analysis.energy.insulationScore',{'val':JSON[_0x9686b5(0x122)](_0x4d72a7[_0x9686b5(0x144)]),'ack':!![]});if(_0x4d72a7[_0x9686b5(0x107)])_0x5c3a03[_0x9686b5(0x110)](_0x9686b5(0x108),{'val':JSON[_0x9686b5(0x122)](_0x4d72a7['heating']),'ack':!![]});}catch(_0x498f0e){}}else{if(_0x163d15['type']===_0x9686b5(0x119)){if(_0x163d15[_0x9686b5(0x102)][_0x9686b5(0x13f)])_0x5c3a03[_0x9686b5(0x117)]['info'](_0x9686b5(0x136));}else{if(_0x163d15['type']===_0x9686b5(0x123))_0x5c3a03[_0x9686b5(0x110)](_0x9686b5(0x142),{'val':new Date()[_0x9686b5(0xe0)](),'ack':!![]}),_0x5c3a03[_0x9686b5(0x110)](_0x9686b5(0x12f),{'val':_0x163d15[_0x9686b5(0x102)][_0x9686b5(0xe9)],'ack':!![]});else{if(_0x163d15['type']===_0x9686b5(0x141))_0x5c3a03[_0x9686b5(0x110)](_0x9686b5(0xe7),{'val':_0x163d15[_0x9686b5(0x102)][_0x9686b5(0x105)],'ack':!![]}),_0x5c3a03[_0x9686b5(0x110)](_0x9686b5(0x109),{'val':_0x163d15['payload']['change_percent'],'ack':!![]});else{if(_0x163d15[_0x9686b5(0x137)]===_0x9686b5(0xe4)){const {speed_trend:_0x41f3b4}=_0x163d15[_0x9686b5(0x102)];if(_0x41f3b4!==undefined)_0x5c3a03[_0x9686b5(0x110)](_0x9686b5(0xe2),{'val':_0x41f3b4,'ack':!![]});}else{if(_0x163d15[_0x9686b5(0x137)]===_0x9686b5(0x145)){const {forecast:_0x5aea16}=_0x163d15[_0x9686b5(0x102)];if(_0x5aea16)_0x5c3a03[_0x9686b5(0x110)](_0x9686b5(0x12d),{'val':JSON[_0x9686b5(0x122)](_0x5aea16),'ack':!![]});}else{if(_0x163d15[_0x9686b5(0x137)]==='TOPOLOGY_RESULT'){const {data:_0x3b25d7}=_0x163d15[_0x9686b5(0x102)];_0x3b25d7&&(_0x5c3a03[_0x9686b5(0x117)][_0x9686b5(0xe5)](_0x9686b5(0x104)),_0x5c3a03[_0x9686b5(0x110)]('analysis.security.topologyMatrix',{'val':JSON[_0x9686b5(0x122)](_0x3b25d7),'ack':!![]}));}else{if(_0x163d15['type']===_0x9686b5(0x129))_0x5c3a03[_0x9686b5(0x117)][_0x9686b5(0x124)](_0x9686b5(0xf3));else{if(_0x163d15[_0x9686b5(0x137)]===_0x9686b5(0xf2)){const {room:_0xecaef0,propagation:_0x48b17a}=_0x163d15[_0x9686b5(0x102)];let _0x33d871='Unknown',_0x462234=0x0;if(_0x48b17a){const _0xe0864c=Object[_0x9686b5(0x140)](_0x48b17a);_0xe0864c[_0x9686b5(0xf1)]>0x0&&(_0x33d871=_0xe0864c[0x0][0x0],_0x462234=_0xe0864c[0x0][0x1]);}_0x5c3a03[_0x9686b5(0x110)](_0x9686b5(0x126),{'val':_0x33d871,'ack':!![]}),_0x5c3a03[_0x9686b5(0x110)](_0x9686b5(0x121),{'val':_0x462234,'ack':!![]}),_0x462234>0.4&&_0x5c3a03['log'][_0x9686b5(0x124)](_0x9686b5(0xf0)+_0xecaef0+_0x9686b5(0x120)+_0x33d871+'\x20('+(_0x462234*0x64)[_0x9686b5(0xf5)](0x0)+'%)'),automation[_0x9686b5(0xf7)](_0x5c3a03,_0x33d871,_0x462234);}}}}}}}}}}}}}}function startService(_0x4f8358,_0x29db11){const _0x569459=a4_0x2dc662;let _0x4f4c1c=_0x569459(0xed);if(fs[_0x569459(0xe6)](_0x29db11))_0x4f4c1c=_0x29db11;try{const _0xdc44ed=path[_0x569459(0x13a)](__dirname,'..',_0x569459(0xde),_0x569459(0x13c));pythonProcess=spawn(_0x4f4c1c,[_0xdc44ed]),pythonProcess[_0x569459(0x11e)]['on'](_0x569459(0x12b),_0x973e73=>{const _0x5449df=_0x569459,_0x1db013=_0x973e73['toString']()[_0x5449df(0x11f)]('\x0a');_0x1db013[_0x5449df(0xfc)](_0x2257a4=>{const _0x28397b=_0x5449df,_0x587adb=_0x2257a4['trim']();if(!_0x587adb)return;if(_0x587adb[_0x28397b(0x10f)]('[LOG]'))_0x4f8358[_0x28397b(0x117)][_0x28397b(0x124)](_0x28397b(0x114)+_0x587adb['substring'](0x5)[_0x28397b(0xea)]());else{if(_0x587adb['startsWith']('[RESULT]'))try{const _0x426475=JSON['parse'](_0x587adb[_0x28397b(0xdf)](0x8)[_0x28397b(0xea)]());handleResult(_0x4f8358,_0x426475);}catch(_0x3d1941){}}});}),pythonProcess['on'](_0x569459(0x111),_0x11cdbb=>{pythonProcess=null;}),_0x4f8358[_0x569459(0x143)]=(_0x56db76,_0x5c7754)=>send(_0x4f8358,_0x56db76,_0x5c7754);}catch(_0x5e4990){_0x4f8358[_0x569459(0x117)][_0x569459(0x128)](_0x569459(0xeb)+_0x5e4990[_0x569459(0x10c)]);}}function stopService(_0x393a9e){const _0x1fb3fc=a4_0x2dc662;if(pythonProcess){try{pythonProcess[_0x1fb3fc(0x13d)]();}catch(_0x175a87){}pythonProcess=null;}}module[a4_0x2dc662(0x10e)]={'startService':startService,'stopService':stopService,'send':send};