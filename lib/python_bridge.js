const a4_0x154380=a4_0x39f6;(function(_0x104430,_0x231c9f){const _0x263b2a=a4_0x39f6,_0x29cb36=_0x104430();while(!![]){try{const _0x5da577=parseInt(_0x263b2a(0x19c))/0x1*(parseInt(_0x263b2a(0x1b6))/0x2)+-parseInt(_0x263b2a(0x18b))/0x3+parseInt(_0x263b2a(0x175))/0x4+-parseInt(_0x263b2a(0x1a0))/0x5*(parseInt(_0x263b2a(0x1bb))/0x6)+-parseInt(_0x263b2a(0x186))/0x7+parseInt(_0x263b2a(0x18e))/0x8*(-parseInt(_0x263b2a(0x1b5))/0x9)+parseInt(_0x263b2a(0x196))/0xa;if(_0x5da577===_0x231c9f)break;else _0x29cb36['push'](_0x29cb36['shift']());}catch(_0x46251d){_0x29cb36['push'](_0x29cb36['shift']());}}}(a4_0xa1fc,0xba5ac));const a4_0x1f161c=(function(){let _0x115403=!![];return function(_0xf09d02,_0x495261){const _0x43f2cf=_0x115403?function(){const _0x14967f=a4_0x39f6;if(_0x495261){const _0x26d959=_0x495261[_0x14967f(0x1a8)](_0xf09d02,arguments);return _0x495261=null,_0x26d959;}}:function(){};return _0x115403=![],_0x43f2cf;};}()),a4_0x7fa7c4=a4_0x1f161c(this,function(){const _0x5283bb=a4_0x39f6;return a4_0x7fa7c4['toString']()['search'](_0x5283bb(0x181))['toString']()[_0x5283bb(0x180)](a4_0x7fa7c4)[_0x5283bb(0x16c)](_0x5283bb(0x181));});a4_0x7fa7c4();function a4_0x39f6(_0x44253c,_0x424240){const _0x30baf0=a4_0xa1fc();return a4_0x39f6=function(_0x7fa7c4,_0x1f161c){_0x7fa7c4=_0x7fa7c4-0x158;let _0xa1fcec=_0x30baf0[_0x7fa7c4];return _0xa1fcec;},a4_0x39f6(_0x44253c,_0x424240);}'use strict';const {spawn}=require(a4_0x154380(0x1b1)),path=require('path'),fs=require('fs'),setup=require(a4_0x154380(0x183)),automation=require(a4_0x154380(0x1ba));let pythonProcess=null;function send(_0x2083a0,_0x4fa727,_0x16abbd={}){const _0x21c909=a4_0x154380;if(!pythonProcess||!pythonProcess['stdin'][_0x21c909(0x193)])return;const _0x49dab7=JSON[_0x21c909(0x195)]({'command':_0x4fa727,..._0x16abbd});try{pythonProcess[_0x21c909(0x1b0)][_0x21c909(0x16a)](_0x49dab7+'\x0a');}catch(_0x52f730){}}function a4_0xa1fc(){const _0x17c4a6=['1733872kbtCkI','data','parse','TRAINING_COMPLETE','python_service','3958119XejKRH','message','ðŸ”®\x20Prediction:\x20From\x20','479392ZjyjXq','error','is_anomaly','Regel\x20erkannt:\x20','log','writable','analysis.automation.detectedPatterns','stringify','24623770pTBUTv','diagnosis','ðŸ\x20Python\x20confirmed\x20new\x20topology.','python3','analysis.prediction.nextRoom','HEALTH_TRAIN_RESULT','1eojrFw','analysis.health.gaitSpeed','substring','ANOMALY','5bnyQMC','analysis.alertReason','TREND_RESULT','reason','âš ï¸\x20SECURITY\x20ALARM:\x20','Success:\x20','length','[LOG]','apply','stdout','COMFORT_RESULT','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','toFixed','[RESULT]','analysis.automation.description','heating','stdin','child_process','analysis.security.currentThreshold','change_percent','toISOString','9FocjLq','593322RlHrBi','analysis.training.status','analysis.security.lastCheck','analysis.energy.forecast','./automation','7773042TveLMZ','analysis.security.lastScore','analysis.health.lastCheck','sendToPythonWrapper','HEALTH_RESULT','analysis.energy.heatingScore','ðŸ\x20Python\x20Pong','toLocaleTimeString','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','split','exports','analysis.prediction.confidence','info','\x20new\x20patterns.','TOPOLOGY_RESULT','kill','[PYTHON]\x20','service.py','success','join','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','type','write','analysis.automation.patternDetected','search','setStateAsync','SIGNAL_RESULT','debug','SECURITY_RESULT','analysis.health.isAnomaly','analysis.security.topologyMatrix','insulation','startsWith','3707080fEtWee','toString','payload','PONG','sendNotification','threshold','Error\x20launching\x20Python:\x20','analysis.isAlert','close','details','analysis.health.trendValue','constructor','(((.+)+)+)+$','handlePrediction','./setup','trim','\x0aGrund:\x20'];a4_0xa1fc=function(){return _0x17c4a6;};return a4_0xa1fc();}function handleResult(_0x51620d,_0x2982b1){const _0x4a2a65=a4_0x154380;if(_0x2982b1[_0x4a2a65(0x169)]===_0x4a2a65(0x178))_0x51620d[_0x4a2a65(0x192)]['debug'](_0x4a2a65(0x159));else{if(_0x2982b1['type']===_0x4a2a65(0x170)){const {anomaly_score:_0x4cb625,is_anomaly:_0x4d007a,threshold:_0x55b9ae,explanation:_0x30e2b6}=_0x2982b1[_0x4a2a65(0x177)];_0x51620d[_0x4a2a65(0x192)]['info'](_0x4a2a65(0x168)+_0x4cb625[_0x4a2a65(0x1ac)](0x5)+'\x20->\x20'+(_0x4d007a?_0x4a2a65(0x19f):'OK')),_0x51620d['setStateAsync'](_0x4a2a65(0x1bc),{'val':_0x4cb625,'ack':!![]}),_0x51620d[_0x4a2a65(0x16d)](_0x4a2a65(0x1b8),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x55b9ae)_0x51620d[_0x4a2a65(0x16d)](_0x4a2a65(0x1b2),{'val':_0x55b9ae,'ack':!![]});if(_0x4d007a){let _0x1db445=_0x4a2a65(0x167)+_0x4cb625['toFixed'](0x4)+')';if(_0x30e2b6&&_0x30e2b6!=='Unknown')_0x1db445+=_0x4a2a65(0x185)+_0x30e2b6;_0x51620d[_0x4a2a65(0x16d)](_0x4a2a65(0x17c),{'val':!![],'ack':!![]}),_0x51620d['setStateAsync'](_0x4a2a65(0x1a1),{'val':_0x1db445,'ack':!![]}),setup[_0x4a2a65(0x179)](_0x51620d,_0x4a2a65(0x1a4)+_0x1db445,![],!![]);}}else{if(_0x2982b1[_0x4a2a65(0x169)]===_0x4a2a65(0x189)){const _0x2e9f90=_0x2982b1['payload'][_0x4a2a65(0x17e)]||'',_0x3d02bc=_0x2982b1['payload'][_0x4a2a65(0x17a)],_0x1d8b1d=_0x2982b1[_0x4a2a65(0x177)]['success']?_0x4a2a65(0x1a5)+new Date()[_0x4a2a65(0x15a)]()+'\x20('+_0x2e9f90+')':'Failed:\x20'+_0x2982b1[_0x4a2a65(0x177)][_0x4a2a65(0x1a3)];_0x51620d[_0x4a2a65(0x16d)](_0x4a2a65(0x1b7),{'val':_0x1d8b1d,'ack':!![]});if(_0x2982b1[_0x4a2a65(0x177)][_0x4a2a65(0x165)]&&_0x3d02bc)_0x51620d[_0x4a2a65(0x16d)](_0x4a2a65(0x1b2),{'val':_0x3d02bc,'ack':!![]});}else{if(_0x2982b1[_0x4a2a65(0x169)]===_0x4a2a65(0x1aa)){const {patterns:_0x107f37}=_0x2982b1['payload'];if(_0x107f37&&_0x107f37[_0x4a2a65(0x1a6)]>0x0){_0x51620d['log'][_0x4a2a65(0x15f)](_0x4a2a65(0x15b)+_0x107f37[_0x4a2a65(0x1a6)]+_0x4a2a65(0x160)),_0x51620d['setStateAsync'](_0x4a2a65(0x194),{'val':JSON[_0x4a2a65(0x195)](_0x107f37),'ack':!![]});const _0x438ad9=_0x107f37[0x0],_0x41d448=_0x4a2a65(0x191)+_0x438ad9['rule']+'\x20('+(_0x438ad9['confidence']*0x64)[_0x4a2a65(0x1ac)](0x0)+'%)';_0x51620d[_0x4a2a65(0x16d)](_0x4a2a65(0x16b),{'val':!![],'ack':!![]}),_0x51620d[_0x4a2a65(0x16d)](_0x4a2a65(0x1ae),{'val':_0x41d448,'ack':!![]});}else _0x51620d[_0x4a2a65(0x192)][_0x4a2a65(0x15f)](_0x4a2a65(0x1ab)),_0x51620d[_0x4a2a65(0x16d)](_0x4a2a65(0x16b),{'val':![],'ack':!![]}),_0x51620d['setStateAsync'](_0x4a2a65(0x194),{'val':'[]','ack':!![]});}else{if(_0x2982b1[_0x4a2a65(0x169)]==='ENERGY_TRAIN_RESULT'){if(_0x2982b1[_0x4a2a65(0x177)][_0x4a2a65(0x165)])try{const _0x2e7031=JSON['parse'](_0x2982b1[_0x4a2a65(0x177)][_0x4a2a65(0x17e)]);if(_0x2e7031['insulation'])_0x51620d[_0x4a2a65(0x16d)]('analysis.energy.insulationScore',{'val':JSON['stringify'](_0x2e7031[_0x4a2a65(0x173)]),'ack':!![]});if(_0x2e7031['heating'])_0x51620d['setStateAsync'](_0x4a2a65(0x158),{'val':JSON[_0x4a2a65(0x195)](_0x2e7031[_0x4a2a65(0x1af)]),'ack':!![]});}catch(_0x486cbd){}}else{if(_0x2982b1['type']===_0x4a2a65(0x19b)){if(_0x2982b1['payload'][_0x4a2a65(0x165)])_0x51620d[_0x4a2a65(0x192)][_0x4a2a65(0x15f)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x2982b1[_0x4a2a65(0x169)]===_0x4a2a65(0x1bf))_0x51620d[_0x4a2a65(0x16d)](_0x4a2a65(0x1bd),{'val':new Date()[_0x4a2a65(0x1b4)](),'ack':!![]}),_0x51620d[_0x4a2a65(0x16d)](_0x4a2a65(0x171),{'val':_0x2982b1[_0x4a2a65(0x177)][_0x4a2a65(0x190)],'ack':!![]});else{if(_0x2982b1[_0x4a2a65(0x169)]===_0x4a2a65(0x1a2))_0x51620d[_0x4a2a65(0x16d)]('analysis.health.trendDiagnosis',{'val':_0x2982b1['payload'][_0x4a2a65(0x197)],'ack':!![]}),_0x51620d[_0x4a2a65(0x16d)](_0x4a2a65(0x17f),{'val':_0x2982b1[_0x4a2a65(0x177)][_0x4a2a65(0x1b3)],'ack':!![]});else{if(_0x2982b1[_0x4a2a65(0x169)]==='GAIT_RESULT'){const {speed_trend:_0x2d44c0}=_0x2982b1['payload'];if(_0x2d44c0!==undefined)_0x51620d[_0x4a2a65(0x16d)](_0x4a2a65(0x19d),{'val':_0x2d44c0,'ack':!![]});}else{if(_0x2982b1[_0x4a2a65(0x169)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x2b4692}=_0x2982b1['payload'];if(_0x2b4692)_0x51620d['setStateAsync'](_0x4a2a65(0x1b9),{'val':JSON[_0x4a2a65(0x195)](_0x2b4692),'ack':!![]});}else{if(_0x2982b1[_0x4a2a65(0x169)]===_0x4a2a65(0x161)){const {data:_0x1ae280}=_0x2982b1[_0x4a2a65(0x177)];_0x1ae280&&(_0x51620d[_0x4a2a65(0x192)][_0x4a2a65(0x15f)]('ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.'),_0x51620d[_0x4a2a65(0x16d)](_0x4a2a65(0x172),{'val':JSON[_0x4a2a65(0x195)](_0x1ae280),'ack':!![]}));}else{if(_0x2982b1[_0x4a2a65(0x169)]==='TOPOLOGY_ACK')_0x51620d['log']['debug'](_0x4a2a65(0x198));else{if(_0x2982b1[_0x4a2a65(0x169)]===_0x4a2a65(0x16e)){const {room:_0x3c7db3,propagation:_0x4f7e46}=_0x2982b1['payload'];let _0x25bb8e='Unknown',_0x1584ed=0x0;if(_0x4f7e46){const _0x2dd4ba=Object['entries'](_0x4f7e46);_0x2dd4ba[_0x4a2a65(0x1a6)]>0x0&&(_0x25bb8e=_0x2dd4ba[0x0][0x0],_0x1584ed=_0x2dd4ba[0x0][0x1]);}_0x51620d[_0x4a2a65(0x16d)](_0x4a2a65(0x19a),{'val':_0x25bb8e,'ack':!![]}),_0x51620d['setStateAsync'](_0x4a2a65(0x15e),{'val':_0x1584ed,'ack':!![]}),_0x1584ed>0.4&&_0x51620d[_0x4a2a65(0x192)][_0x4a2a65(0x16f)](_0x4a2a65(0x18d)+_0x3c7db3+'\x20->\x20Likely\x20'+_0x25bb8e+'\x20('+(_0x1584ed*0x64)['toFixed'](0x0)+'%)'),automation[_0x4a2a65(0x182)](_0x51620d,_0x25bb8e,_0x1584ed);}}}}}}}}}}}}}}function startService(_0x1bca2a,_0x4a9b56){const _0x559a93=a4_0x154380;let _0x423c59=_0x559a93(0x199);if(fs['existsSync'](_0x4a9b56))_0x423c59=_0x4a9b56;try{const _0x3b7a70=path[_0x559a93(0x166)](__dirname,'..',_0x559a93(0x18a),_0x559a93(0x164));pythonProcess=spawn(_0x423c59,[_0x3b7a70]),pythonProcess[_0x559a93(0x1a9)]['on'](_0x559a93(0x187),_0x54d33a=>{const _0x59365b=_0x559a93,_0x3ac8d9=_0x54d33a[_0x59365b(0x176)]()[_0x59365b(0x15c)]('\x0a');_0x3ac8d9['forEach'](_0x1606b4=>{const _0x13b25d=_0x59365b,_0x2c3c74=_0x1606b4[_0x13b25d(0x184)]();if(!_0x2c3c74)return;if(_0x2c3c74[_0x13b25d(0x174)](_0x13b25d(0x1a7)))_0x1bca2a['log'][_0x13b25d(0x16f)](_0x13b25d(0x163)+_0x2c3c74['substring'](0x5)[_0x13b25d(0x184)]());else{if(_0x2c3c74[_0x13b25d(0x174)](_0x13b25d(0x1ad)))try{const _0x5569c3=JSON[_0x13b25d(0x188)](_0x2c3c74[_0x13b25d(0x19e)](0x8)[_0x13b25d(0x184)]());handleResult(_0x1bca2a,_0x5569c3);}catch(_0xd5a82b){}}});}),pythonProcess['on'](_0x559a93(0x17d),_0x410917=>{pythonProcess=null;}),_0x1bca2a[_0x559a93(0x1be)]=(_0x103882,_0x19b4fe)=>send(_0x1bca2a,_0x103882,_0x19b4fe);}catch(_0x2cbc88){_0x1bca2a[_0x559a93(0x192)][_0x559a93(0x18f)](_0x559a93(0x17b)+_0x2cbc88[_0x559a93(0x18c)]);}}function stopService(_0x1caeab){const _0x282d17=a4_0x154380;if(pythonProcess){try{pythonProcess[_0x282d17(0x162)]();}catch(_0x3b365e){}pythonProcess=null;}}module[a4_0x154380(0x15d)]={'startService':startService,'stopService':stopService,'send':send};