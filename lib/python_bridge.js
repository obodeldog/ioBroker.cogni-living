const a4_0x279bb4=a4_0x7220;(function(_0x297264,_0x56589f){const _0x1131a0=a4_0x7220,_0x4b583c=_0x297264();while(!![]){try{const _0x14c7a8=parseInt(_0x1131a0(0x1a5))/0x1+parseInt(_0x1131a0(0x171))/0x2*(-parseInt(_0x1131a0(0x17f))/0x3)+-parseInt(_0x1131a0(0x188))/0x4*(-parseInt(_0x1131a0(0x18e))/0x5)+-parseInt(_0x1131a0(0x14f))/0x6*(-parseInt(_0x1131a0(0x179))/0x7)+parseInt(_0x1131a0(0x1a2))/0x8*(parseInt(_0x1131a0(0x145))/0x9)+parseInt(_0x1131a0(0x174))/0xa*(parseInt(_0x1131a0(0x13b))/0xb)+-parseInt(_0x1131a0(0x147))/0xc;if(_0x14c7a8===_0x56589f)break;else _0x4b583c['push'](_0x4b583c['shift']());}catch(_0x455f41){_0x4b583c['push'](_0x4b583c['shift']());}}}(a4_0x3d7c,0x2a901));const a4_0x2af0aa=(function(){let _0x5b8d78=!![];return function(_0x148971,_0x54eb14){const _0x274fba=_0x5b8d78?function(){if(_0x54eb14){const _0x6e4a04=_0x54eb14['apply'](_0x148971,arguments);return _0x54eb14=null,_0x6e4a04;}}:function(){};return _0x5b8d78=![],_0x274fba;};}()),a4_0x4d2d99=a4_0x2af0aa(this,function(){const _0x8af46b=a4_0x7220;return a4_0x4d2d99[_0x8af46b(0x156)]()['search'](_0x8af46b(0x14b))[_0x8af46b(0x156)]()['constructor'](a4_0x4d2d99)[_0x8af46b(0x148)](_0x8af46b(0x14b));});a4_0x4d2d99();'use strict';const {spawn}=require(a4_0x279bb4(0x186)),path=require('path'),fs=require('fs'),setup=require(a4_0x279bb4(0x15e)),automation=require(a4_0x279bb4(0x14c));let pythonProcess=null;function a4_0x7220(_0x20a584,_0x5858c3){const _0x375814=a4_0x3d7c();return a4_0x7220=function(_0x4d2d99,_0x2af0aa){_0x4d2d99=_0x4d2d99-0x138;let _0x3d7ce4=_0x375814[_0x4d2d99];return _0x3d7ce4;},a4_0x7220(_0x20a584,_0x5858c3);}function send(_0x148b31,_0x589773,_0x20a994={}){const _0x31d323=a4_0x279bb4;if(!pythonProcess||!pythonProcess['stdin'][_0x31d323(0x19d)])return;const _0x382f5e=JSON['stringify']({'command':_0x589773,..._0x20a994});try{pythonProcess['stdin'][_0x31d323(0x13d)](_0x382f5e+'\x0a');}catch(_0x1f8947){}}function handleResult(_0x42683b,_0x3bf97c){const _0x3ef24a=a4_0x279bb4;if(_0x3bf97c[_0x3ef24a(0x144)]===_0x3ef24a(0x18d))_0x42683b[_0x3ef24a(0x139)]['debug'](_0x3ef24a(0x173));else{if(_0x3bf97c['type']===_0x3ef24a(0x17c)){const {anomaly_score:_0x32015c,is_anomaly:_0x1273cb,threshold:_0x35dbae,explanation:_0x20a896}=_0x3bf97c['payload'];_0x42683b[_0x3ef24a(0x196)]('analysis.security.lastScore',{'val':_0x32015c,'ack':!![]}),_0x42683b[_0x3ef24a(0x196)](_0x3ef24a(0x16b),{'val':new Date()[_0x3ef24a(0x15b)](),'ack':!![]});if(_0x35dbae)_0x42683b[_0x3ef24a(0x196)](_0x3ef24a(0x183),{'val':_0x35dbae,'ack':!![]});if(_0x1273cb){let _0x4d6168=_0x3ef24a(0x158)+_0x32015c[_0x3ef24a(0x189)](0x4)+')';if(_0x20a896&&_0x20a896!=='Unknown')_0x4d6168+=_0x3ef24a(0x182)+_0x20a896;_0x42683b['setStateAsync'](_0x3ef24a(0x16a),{'val':!![],'ack':!![]}),_0x42683b[_0x3ef24a(0x196)](_0x3ef24a(0x198),{'val':_0x4d6168,'ack':!![]}),setup[_0x3ef24a(0x13c)](_0x42683b,_0x3ef24a(0x18c)+_0x4d6168,![],!![]);}}else{if(_0x3bf97c['type']==='TRAINING_COMPLETE'){const _0x16fce3=_0x3bf97c['payload'][_0x3ef24a(0x150)]||'',_0x20f8a3=_0x3bf97c[_0x3ef24a(0x142)][_0x3ef24a(0x13e)],_0x3d4ef7=_0x3bf97c[_0x3ef24a(0x142)]['success']?_0x3ef24a(0x175)+new Date()[_0x3ef24a(0x143)]()+'\x20('+_0x16fce3+')':_0x3ef24a(0x181)+_0x3bf97c[_0x3ef24a(0x142)][_0x3ef24a(0x161)];_0x42683b[_0x3ef24a(0x196)](_0x3ef24a(0x15f),{'val':_0x3d4ef7,'ack':!![]});if(_0x3bf97c[_0x3ef24a(0x142)]['success']&&_0x20f8a3)_0x42683b[_0x3ef24a(0x196)](_0x3ef24a(0x183),{'val':_0x20f8a3,'ack':!![]});}else{if(_0x3bf97c['type']===_0x3ef24a(0x16f)){if(_0x3bf97c[_0x3ef24a(0x142)][_0x3ef24a(0x165)])try{const _0x10fe59=JSON[_0x3ef24a(0x180)](_0x3bf97c[_0x3ef24a(0x142)][_0x3ef24a(0x150)]);if(_0x10fe59[_0x3ef24a(0x138)])_0x42683b[_0x3ef24a(0x196)](_0x3ef24a(0x184),{'val':JSON[_0x3ef24a(0x146)](_0x10fe59[_0x3ef24a(0x138)]),'ack':!![]});if(_0x10fe59['heating'])_0x42683b[_0x3ef24a(0x196)](_0x3ef24a(0x17b),{'val':JSON['stringify'](_0x10fe59[_0x3ef24a(0x170)]),'ack':!![]});}catch(_0x4dc24e){}}else{if(_0x3bf97c[_0x3ef24a(0x144)]===_0x3ef24a(0x1a4)){if(_0x3bf97c['payload'][_0x3ef24a(0x165)]){_0x42683b[_0x3ef24a(0x139)][_0x3ef24a(0x172)](_0x3ef24a(0x19b));const _0x375da8=new Date(),_0x181c47=_0x375da8[_0x3ef24a(0x17e)](_0x3ef24a(0x168),{'day':_0x3ef24a(0x167),'month':'short','hour':'2-digit','minute':_0x3ef24a(0x167)});_0x42683b[_0x3ef24a(0x196)](_0x3ef24a(0x14d),{'val':_0x181c47,'ack':!![]});}}else{if(_0x3bf97c[_0x3ef24a(0x144)]===_0x3ef24a(0x16d)){const _0x172681=new Date(),_0xfffa47=_0x172681['toLocaleDateString'](_0x3ef24a(0x168),{'day':'2-digit','month':_0x3ef24a(0x17d),'hour':_0x3ef24a(0x167),'minute':_0x3ef24a(0x167)});_0x42683b['setStateAsync']('analysis.health.lastCheck',{'val':_0xfffa47,'ack':!![]}),_0x42683b[_0x3ef24a(0x196)](_0x3ef24a(0x178),{'val':_0x3bf97c[_0x3ef24a(0x142)][_0x3ef24a(0x190)],'ack':!![]});}else{if(_0x3bf97c[_0x3ef24a(0x144)]===_0x3ef24a(0x13f)){const {trend_percent:_0x209a14,details:_0x558b81}=_0x3bf97c[_0x3ef24a(0x142)],_0x3e6c92=new Date(),_0x491544=_0x3e6c92[_0x3ef24a(0x17e)](_0x3ef24a(0x168),{'day':'2-digit','month':_0x3ef24a(0x17d),'hour':'2-digit','minute':_0x3ef24a(0x167)});_0x42683b[_0x3ef24a(0x196)]('analysis.health.lastCheck',{'val':_0x491544,'ack':!![]}),_0x42683b['setStateAsync'](_0x3ef24a(0x16e),{'val':_0x209a14,'ack':!![]}),_0x42683b[_0x3ef24a(0x139)][_0x3ef24a(0x172)](_0x3ef24a(0x13a)+_0x558b81);}else{if(_0x3bf97c[_0x3ef24a(0x144)]===_0x3ef24a(0x1a1)){const {speed_trend:_0x3a9625}=_0x3bf97c[_0x3ef24a(0x142)];if(_0x3a9625!==undefined)_0x42683b[_0x3ef24a(0x196)](_0x3ef24a(0x16e),{'val':_0x3a9625,'ack':!![]});}else{if(_0x3bf97c['type']===_0x3ef24a(0x15d)){const {forecast:_0x4d76c7}=_0x3bf97c[_0x3ef24a(0x142)];if(_0x4d76c7)_0x42683b[_0x3ef24a(0x196)]('analysis.energy.forecast',{'val':JSON[_0x3ef24a(0x146)](_0x4d76c7),'ack':!![]});}else{if(_0x3bf97c[_0x3ef24a(0x144)]===_0x3ef24a(0x19c)){const {times:_0x130259,sources:_0x36e3f1,details:_0x54adca}=_0x3bf97c[_0x3ef24a(0x142)];if(_0x130259)_0x42683b[_0x3ef24a(0x196)](_0x3ef24a(0x18f),{'val':JSON['stringify'](_0x130259),'ack':!![]});if(_0x36e3f1)_0x42683b['setStateAsync']('analysis.energy.warmupSources',{'val':JSON['stringify'](_0x36e3f1),'ack':!![]});if(_0x54adca)_0x42683b[_0x3ef24a(0x196)](_0x3ef24a(0x157),{'val':JSON[_0x3ef24a(0x146)](_0x54adca),'ack':!![]});}else{if(_0x3bf97c[_0x3ef24a(0x144)]===_0x3ef24a(0x155)){const {penalties:_0x52bbbc}=_0x3bf97c[_0x3ef24a(0x142)];if(_0x52bbbc)_0x42683b['setStateAsync'](_0x3ef24a(0x152),{'val':JSON['stringify'](_0x52bbbc),'ack':!![]});}else{if(_0x3bf97c['type']==='PINN_PREDICT_RESULT'){const {forecast:_0xf9faf8}=_0x3bf97c[_0x3ef24a(0x142)];if(_0xf9faf8)_0x42683b[_0x3ef24a(0x196)]('analysis.energy.pinnForecast',{'val':JSON[_0x3ef24a(0x146)](_0xf9faf8),'ack':!![]});}else{if(_0x3bf97c[_0x3ef24a(0x144)]===_0x3ef24a(0x151)){const {alerts:_0x1e0f76}=_0x3bf97c[_0x3ef24a(0x142)];if(_0x1e0f76)_0x42683b[_0x3ef24a(0x196)](_0x3ef24a(0x194),{'val':JSON[_0x3ef24a(0x146)](_0x1e0f76),'ack':!![]});}else{if(_0x3bf97c[_0x3ef24a(0x144)]===_0x3ef24a(0x1a0)){const {proposals:_0x36a1b6}=_0x3bf97c[_0x3ef24a(0x142)];_0x42683b['getState'](_0x3ef24a(0x177),(_0x2b5377,_0x121e19)=>{const _0x57dadd=_0x3ef24a;_0x121e19&&_0x121e19[_0x57dadd(0x14a)]===!![]&&_0x36a1b6&&_0x36a1b6['length']>0x0&&automation[_0x57dadd(0x185)](_0x42683b,_0x36a1b6);});}else{if(_0x3bf97c[_0x3ef24a(0x144)]===_0x3ef24a(0x15a)){const {room:_0x2cb99e,propagation:_0x5b6964}=_0x3bf97c[_0x3ef24a(0x142)];let _0x16d4be=_0x3ef24a(0x19e),_0x2f4d76=0x0;if(_0x5b6964){const _0x3c9dc0=Object['entries'](_0x5b6964);_0x3c9dc0[_0x3ef24a(0x197)]>0x0&&(_0x16d4be=_0x3c9dc0[0x0][0x0],_0x2f4d76=_0x3c9dc0[0x0][0x1]);}_0x42683b[_0x3ef24a(0x196)](_0x3ef24a(0x149),{'val':_0x16d4be,'ack':!![]}),_0x42683b[_0x3ef24a(0x196)](_0x3ef24a(0x1a6),{'val':_0x2f4d76,'ack':!![]}),automation[_0x3ef24a(0x18b)](_0x42683b,_0x16d4be,_0x2f4d76);}else{if(_0x3bf97c[_0x3ef24a(0x144)]===_0x3ef24a(0x159)){const {probabilities:_0x3cc20a}=_0x3bf97c[_0x3ef24a(0x142)];if(_0x3cc20a){_0x42683b[_0x3ef24a(0x196)](_0x3ef24a(0x191),{'val':JSON[_0x3ef24a(0x146)](_0x3cc20a),'ack':!![]});const _0x4e961f=Object[_0x3ef24a(0x19f)](_0x3cc20a);if(_0x4e961f[_0x3ef24a(0x197)]>0x0){const _0x432000=_0x4e961f[0x0],_0x2dadd2=_0x3cc20a[_0x432000];_0x42683b['setStateAsync'](_0x3ef24a(0x141),{'val':_0x432000,'ack':!![]}),_0x42683b['setStateAsync'](_0x3ef24a(0x162),{'val':_0x2dadd2,'ack':!![]});}}}else{if(_0x3bf97c[_0x3ef24a(0x144)]===_0x3ef24a(0x187)){const {patterns:_0x3ccccd}=_0x3bf97c[_0x3ef24a(0x142)];if(_0x3ccccd&&_0x3ccccd[_0x3ef24a(0x197)]>0x0)_0x42683b[_0x3ef24a(0x196)](_0x3ef24a(0x153),{'val':JSON[_0x3ef24a(0x146)](_0x3ccccd),'ack':!![]});}}}}}}}}}}}}}}}}}}function startService(_0x48ebfd,_0x4885a6){const _0x2dd96a=a4_0x279bb4;let _0x139f7b=_0x2dd96a(0x164);const _0x236b4c=path['join'](__dirname,'..','service.py');if(fs[_0x2dd96a(0x19a)](_0x4885a6))_0x139f7b=_0x4885a6;try{_0x48ebfd[_0x2dd96a(0x139)][_0x2dd96a(0x172)](_0x2dd96a(0x199)+_0x139f7b+'\x20'+_0x236b4c),pythonProcess=spawn(_0x139f7b,[_0x236b4c]),pythonProcess[_0x2dd96a(0x195)]['on']('data',_0x27e811=>{const _0x43d4f1=_0x2dd96a,_0x587f75=_0x27e811['toString']()['split']('\x0a');_0x587f75[_0x43d4f1(0x154)](_0x853671=>{const _0x2c8853=_0x43d4f1,_0x4aad03=_0x853671[_0x2c8853(0x15c)]();if(!_0x4aad03)return;if(_0x4aad03[_0x2c8853(0x18a)](_0x2c8853(0x169)))_0x48ebfd['log']['debug'](_0x2c8853(0x176)+_0x4aad03[_0x2c8853(0x140)](0x5)['trim']());else{if(_0x4aad03['startsWith']('[RESULT]'))try{const _0x1766a7=JSON[_0x2c8853(0x180)](_0x4aad03[_0x2c8853(0x140)](0x8)[_0x2c8853(0x15c)]());handleResult(_0x48ebfd,_0x1766a7);}catch(_0x4a8ce2){}}});}),pythonProcess['stderr']['on'](_0x2dd96a(0x17a),_0x230f43=>{const _0x191c6f=_0x2dd96a;_0x48ebfd['log'][_0x191c6f(0x192)](_0x191c6f(0x16c)+_0x230f43['toString']()['trim']());}),pythonProcess['on'](_0x2dd96a(0x1a3),_0xa1e8b=>{pythonProcess=null;}),_0x48ebfd[_0x2dd96a(0x163)]=(_0x46399b,_0x373a51)=>send(_0x48ebfd,_0x46399b,_0x373a51);}catch(_0x37350a){_0x48ebfd[_0x2dd96a(0x139)]['error'](_0x2dd96a(0x160)+_0x37350a[_0x2dd96a(0x166)]);}}function a4_0x3d7c(){const _0x582b67=['analysis.energy.mpcActive','analysis.health.isAnomaly','1739374EaObDz','data','analysis.energy.heatingScore','SECURITY_RESULT','short','toLocaleDateString','6mqcLSx','parse','Failed:\x20','\x0aGrund:\x20','analysis.security.currentThreshold','analysis.energy.insulationScore','applyEnergySavings','child_process','COMFORT_RESULT','16092TsUQLx','toFixed','startsWith','handlePrediction','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','PONG','55webOSP','analysis.energy.warmupTimes','is_anomaly','analysis.prediction.trackerState','error','exports','analysis.energy.ventilationAlerts','stdout','setStateAsync','length','analysis.alertReason','üöÄ\x20Starting\x20Python\x20Bridge\x20(Original\x20Style):\x20','existsSync','‚úÖ\x20HEALTH\x20TRAINED.','WARMUP_RESULT','writable','Unknown','keys','ENERGY_OPTIMIZE_RESULT','GAIT_RESULT','1118744oqWLYD','close','HEALTH_TRAIN_RESULT','25300XOOgmb','analysis.prediction.confidence','insulation','log','üìà\x20Health\x20Trend:\x20','1018149sFqRDY','sendNotification','write','threshold','HEALTH_TREND_RESULT','substring','analysis.prediction.trackerTopRoom','payload','toLocaleTimeString','type','9sISJeK','stringify','3173592WqjADf','search','analysis.prediction.nextRoom','val','(((.+)+)+)+$','./automation','analysis.health.lastCheck','kill','6NrruOh','details','VENTILATION_ALERT','analysis.energy.rlPenalties','analysis.automation.detectedPatterns','forEach','RL_PENALTY_UPDATE','toString','analysis.energy.warmupDetails','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','TRACKER_RESULT','SIGNAL_RESULT','toISOString','trim','ENERGY_PREDICT_RESULT','./setup','analysis.training.status','Error\x20launching\x20Python:\x20','reason','analysis.prediction.trackerConfidence','sendToPythonWrapper','python3','success','message','2-digit','de-DE','[LOG]','analysis.isAlert','analysis.security.lastCheck','[PYTHON\x20ERR]\x20','HEALTH_RESULT','analysis.health.gaitSpeed','ENERGY_TRAIN_RESULT','heating','111634WpbSFo','info','üêç\x20Python\x20Pong','10pWKSkB','Success:\x20','[PYTHON]\x20'];a4_0x3d7c=function(){return _0x582b67;};return a4_0x3d7c();}function stopService(_0x4dfb33){const _0x29272e=a4_0x279bb4;if(pythonProcess){try{pythonProcess[_0x29272e(0x14e)]();}catch(_0x333fb3){}pythonProcess=null;}}module[a4_0x279bb4(0x193)]={'startService':startService,'stopService':stopService,'send':send};