const a4_0x364f11=a4_0x2c39;(function(_0x51ddc9,_0x44cec7){const _0x4c3c0c=a4_0x2c39,_0x29dfd5=_0x51ddc9();while(!![]){try{const _0xb9a515=parseInt(_0x4c3c0c(0x15f))/0x1*(-parseInt(_0x4c3c0c(0x122))/0x2)+-parseInt(_0x4c3c0c(0x12b))/0x3+parseInt(_0x4c3c0c(0x15b))/0x4*(parseInt(_0x4c3c0c(0x170))/0x5)+parseInt(_0x4c3c0c(0x173))/0x6*(-parseInt(_0x4c3c0c(0x175))/0x7)+parseInt(_0x4c3c0c(0x130))/0x8*(-parseInt(_0x4c3c0c(0x14d))/0x9)+parseInt(_0x4c3c0c(0x124))/0xa+-parseInt(_0x4c3c0c(0x177))/0xb*(-parseInt(_0x4c3c0c(0x121))/0xc);if(_0xb9a515===_0x44cec7)break;else _0x29dfd5['push'](_0x29dfd5['shift']());}catch(_0x414b4f){_0x29dfd5['push'](_0x29dfd5['shift']());}}}(a4_0x5a4d,0x3079e));const a4_0x464748=(function(){let _0x39a8a0=!![];return function(_0xec8419,_0x365906){const _0xdda5c=_0x39a8a0?function(){const _0x2a3331=a4_0x2c39;if(_0x365906){const _0xa50d28=_0x365906[_0x2a3331(0x16c)](_0xec8419,arguments);return _0x365906=null,_0xa50d28;}}:function(){};return _0x39a8a0=![],_0xdda5c;};}()),a4_0x18576b=a4_0x464748(this,function(){const _0x5843bc=a4_0x2c39;return a4_0x18576b[_0x5843bc(0x178)]()[_0x5843bc(0x13c)](_0x5843bc(0x14e))['toString']()['constructor'](a4_0x18576b)['search']('(((.+)+)+)+$');});a4_0x18576b();'use strict';const {spawn}=require(a4_0x364f11(0x126)),path=require(a4_0x364f11(0x16d)),fs=require('fs'),setup=require('./setup'),automation=require('./automation');let pythonProcess=null;function send(_0x2f5750,_0xf35735,_0x29302e={}){const _0x3373a8=a4_0x364f11;if(!pythonProcess||!pythonProcess[_0x3373a8(0x125)]['writable'])return;const _0x3067a7=JSON[_0x3373a8(0x164)]({'command':_0xf35735,..._0x29302e});try{pythonProcess['stdin'][_0x3373a8(0x123)](_0x3067a7+'\x0a');}catch(_0x3d1a53){}}function a4_0x2c39(_0x24e0a8,_0x3735fd){const _0x31dd94=a4_0x5a4d();return a4_0x2c39=function(_0x18576b,_0x464748){_0x18576b=_0x18576b-0x11f;let _0x5a4da4=_0x31dd94[_0x18576b];return _0x5a4da4;},a4_0x2c39(_0x24e0a8,_0x3735fd);}function handleResult(_0x154f55,_0x475472){const _0xa50bd9=a4_0x364f11;if(_0x475472[_0xa50bd9(0x163)]===_0xa50bd9(0x16e))_0x154f55[_0xa50bd9(0x168)][_0xa50bd9(0x172)](_0xa50bd9(0x131));else{if(_0x475472[_0xa50bd9(0x163)]===_0xa50bd9(0x160)){const {anomaly_score:_0x197f0b,is_anomaly:_0x370a1d,threshold:_0x5e5bbe,explanation:_0x5b972a}=_0x475472[_0xa50bd9(0x133)];_0x154f55['setStateAsync']('analysis.security.lastScore',{'val':_0x197f0b,'ack':!![]}),_0x154f55['setStateAsync']('analysis.security.lastCheck',{'val':new Date()[_0xa50bd9(0x153)](),'ack':!![]});if(_0x5e5bbe)_0x154f55[_0xa50bd9(0x155)]('analysis.security.currentThreshold',{'val':_0x5e5bbe,'ack':!![]});if(_0x370a1d){let _0x299a3a=_0xa50bd9(0x15c)+_0x197f0b[_0xa50bd9(0x12e)](0x4)+')';if(_0x5b972a&&_0x5b972a!==_0xa50bd9(0x147))_0x299a3a+=_0xa50bd9(0x138)+_0x5b972a;_0x154f55['setStateAsync']('analysis.isAlert',{'val':!![],'ack':!![]}),_0x154f55[_0xa50bd9(0x155)](_0xa50bd9(0x16f),{'val':_0x299a3a,'ack':!![]}),setup[_0xa50bd9(0x137)](_0x154f55,_0xa50bd9(0x171)+_0x299a3a,![],!![]);}}else{if(_0x475472[_0xa50bd9(0x163)]===_0xa50bd9(0x165)){const _0x329a7d=_0x475472[_0xa50bd9(0x133)][_0xa50bd9(0x16b)]||'',_0xade2b6=_0x475472[_0xa50bd9(0x133)][_0xa50bd9(0x174)],_0x2dd4e1=_0x475472[_0xa50bd9(0x133)][_0xa50bd9(0x14a)]?_0xa50bd9(0x142)+new Date()[_0xa50bd9(0x12d)]()+'\x20('+_0x329a7d+')':_0xa50bd9(0x134)+_0x475472[_0xa50bd9(0x133)][_0xa50bd9(0x11f)];_0x154f55[_0xa50bd9(0x155)](_0xa50bd9(0x151),{'val':_0x2dd4e1,'ack':!![]});if(_0x475472['payload'][_0xa50bd9(0x14a)]&&_0xade2b6)_0x154f55[_0xa50bd9(0x155)](_0xa50bd9(0x132),{'val':_0xade2b6,'ack':!![]});}else{if(_0x475472[_0xa50bd9(0x163)]===_0xa50bd9(0x136)){if(_0x475472[_0xa50bd9(0x133)][_0xa50bd9(0x14a)])try{const _0x263cc0=JSON['parse'](_0x475472[_0xa50bd9(0x133)][_0xa50bd9(0x16b)]);if(_0x263cc0[_0xa50bd9(0x13a)])_0x154f55[_0xa50bd9(0x155)](_0xa50bd9(0x128),{'val':JSON[_0xa50bd9(0x164)](_0x263cc0[_0xa50bd9(0x13a)]),'ack':!![]});if(_0x263cc0[_0xa50bd9(0x167)])_0x154f55[_0xa50bd9(0x155)]('analysis.energy.heatingScore',{'val':JSON['stringify'](_0x263cc0[_0xa50bd9(0x167)]),'ack':!![]});}catch(_0x13d9d9){}}else{if(_0x475472[_0xa50bd9(0x163)]===_0xa50bd9(0x166)){if(_0x475472[_0xa50bd9(0x133)][_0xa50bd9(0x14a)])_0x154f55[_0xa50bd9(0x168)][_0xa50bd9(0x159)](_0xa50bd9(0x14b));}else{if(_0x475472[_0xa50bd9(0x163)]===_0xa50bd9(0x158))_0x154f55['setStateAsync']('analysis.health.lastCheck',{'val':new Date()[_0xa50bd9(0x153)](),'ack':!![]}),_0x154f55['setStateAsync'](_0xa50bd9(0x12a),{'val':_0x475472[_0xa50bd9(0x133)][_0xa50bd9(0x156)],'ack':!![]});else{if(_0x475472['type']===_0xa50bd9(0x14f)){const {speed_trend:_0x48f4f0}=_0x475472[_0xa50bd9(0x133)];if(_0x48f4f0!==undefined)_0x154f55[_0xa50bd9(0x155)](_0xa50bd9(0x15a),{'val':_0x48f4f0,'ack':!![]});}else{if(_0x475472[_0xa50bd9(0x163)]===_0xa50bd9(0x148)){const {forecast:_0x4db6aa}=_0x475472[_0xa50bd9(0x133)];if(_0x4db6aa)_0x154f55[_0xa50bd9(0x155)](_0xa50bd9(0x16a),{'val':JSON[_0xa50bd9(0x164)](_0x4db6aa),'ack':!![]});}else{if(_0x475472[_0xa50bd9(0x163)]===_0xa50bd9(0x146)){const {forecast:_0x9ed20e}=_0x475472[_0xa50bd9(0x133)];if(_0x9ed20e)_0x154f55['setStateAsync'](_0xa50bd9(0x13b),{'val':JSON['stringify'](_0x9ed20e),'ack':!![]});}else{if(_0x475472[_0xa50bd9(0x163)]===_0xa50bd9(0x135)){const {proposals:_0x2ec65f}=_0x475472['payload'];_0x154f55[_0xa50bd9(0x145)]('analysis.energy.mpcActive',(_0x639291,_0x257602)=>{const _0x84275=_0xa50bd9;_0x257602&&_0x257602[_0x84275(0x13d)]===!![]&&_0x2ec65f&&_0x2ec65f[_0x84275(0x129)]>0x0&&automation[_0x84275(0x157)](_0x154f55,_0x2ec65f);});}else{if(_0x475472[_0xa50bd9(0x163)]===_0xa50bd9(0x176)){const {room:_0x21bfc5,propagation:_0xd89d0}=_0x475472['payload'];let _0x458e4e=_0xa50bd9(0x147),_0x466b26=0x0;if(_0xd89d0){const _0x32c6dc=Object[_0xa50bd9(0x139)](_0xd89d0);_0x32c6dc[_0xa50bd9(0x129)]>0x0&&(_0x458e4e=_0x32c6dc[0x0][0x0],_0x466b26=_0x32c6dc[0x0][0x1]);}_0x154f55[_0xa50bd9(0x155)](_0xa50bd9(0x13e),{'val':_0x458e4e,'ack':!![]}),_0x154f55[_0xa50bd9(0x155)](_0xa50bd9(0x14c),{'val':_0x466b26,'ack':!![]}),automation[_0xa50bd9(0x169)](_0x154f55,_0x458e4e,_0x466b26);}else{if(_0x475472['type']===_0xa50bd9(0x144)){const {patterns:_0x30e147}=_0x475472['payload'];if(_0x30e147&&_0x30e147[_0xa50bd9(0x129)]>0x0)_0x154f55['setStateAsync'](_0xa50bd9(0x162),{'val':JSON[_0xa50bd9(0x164)](_0x30e147),'ack':!![]});}}}}}}}}}}}}}function startService(_0x4fdd7,_0xf7791){const _0x1f7607=a4_0x364f11;let _0x494bcf=_0x1f7607(0x149);if(fs[_0x1f7607(0x15e)](_0xf7791))_0x494bcf=_0xf7791;try{const _0xf1a128=path['join'](__dirname,'..',_0x1f7607(0x143),_0x1f7607(0x161));pythonProcess=spawn(_0x494bcf,[_0xf1a128]),pythonProcess[_0x1f7607(0x13f)]['on']('data',_0x56f9ed=>{const _0x1272c8=_0x1f7607,_0x4dad7e=_0x56f9ed[_0x1272c8(0x178)]()['split']('\x0a');_0x4dad7e[_0x1272c8(0x141)](_0x5a643f=>{const _0x42d861=_0x1272c8,_0x12fa06=_0x5a643f[_0x42d861(0x150)]();if(!_0x12fa06)return;if(_0x12fa06[_0x42d861(0x120)]('[LOG]'))_0x4fdd7[_0x42d861(0x168)][_0x42d861(0x172)]('[PYTHON]\x20'+_0x12fa06[_0x42d861(0x154)](0x5)[_0x42d861(0x150)]());else{if(_0x12fa06[_0x42d861(0x120)](_0x42d861(0x140)))try{const _0x139f31=JSON[_0x42d861(0x152)](_0x12fa06['substring'](0x8)['trim']());handleResult(_0x4fdd7,_0x139f31);}catch(_0x51b72b){}}});}),pythonProcess['on'](_0x1f7607(0x179),_0x53597a=>{pythonProcess=null;}),_0x4fdd7[_0x1f7607(0x12f)]=(_0x14f7df,_0x1657ff)=>send(_0x4fdd7,_0x14f7df,_0x1657ff);}catch(_0x18e273){_0x4fdd7[_0x1f7607(0x168)][_0x1f7607(0x127)]('Error\x20launching\x20Python:\x20'+_0x18e273[_0x1f7607(0x12c)]);}}function stopService(_0x125b1d){const _0x3d0d5a=a4_0x364f11;if(pythonProcess){try{pythonProcess[_0x3d0d5a(0x15d)]();}catch(_0x11c94c){}pythonProcess=null;}}function a4_0x5a4d(){const _0xf64c5=['is_anomaly','applyEnergySavings','HEALTH_RESULT','info','analysis.health.gaitSpeed','164mjOCmZ','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','kill','existsSync','16ciCGrg','SECURITY_RESULT','service.py','analysis.automation.detectedPatterns','type','stringify','TRAINING_COMPLETE','HEALTH_TRAIN_RESULT','heating','log','handlePrediction','analysis.energy.forecast','details','apply','path','PONG','analysis.alertReason','19330VeXxLw','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','debug','220326MShKyG','threshold','56YCXumG','SIGNAL_RESULT','17963QPvoZq','toString','close','reason','startsWith','4692SEcIvs','45404nsHGJU','write','3036300JgxNwu','stdin','child_process','error','analysis.energy.insulationScore','length','analysis.health.isAnomaly','700533YMnmNI','message','toLocaleTimeString','toFixed','sendToPythonWrapper','712CsAaDO','üêç\x20Python\x20Pong','analysis.security.currentThreshold','payload','Failed:\x20','ENERGY_OPTIMIZE_RESULT','ENERGY_TRAIN_RESULT','sendNotification','\x0aGrund:\x20','entries','insulation','analysis.energy.pinnForecast','search','val','analysis.prediction.nextRoom','stdout','[RESULT]','forEach','Success:\x20','python_service','COMFORT_RESULT','getState','PINN_PREDICT_RESULT','Unknown','ENERGY_PREDICT_RESULT','python3','success','‚úÖ\x20HEALTH\x20TRAINED.','analysis.prediction.confidence','1170aSCPfz','(((.+)+)+)+$','GAIT_RESULT','trim','analysis.training.status','parse','toISOString','substring','setStateAsync'];a4_0x5a4d=function(){return _0xf64c5;};return a4_0x5a4d();}module['exports']={'startService':startService,'stopService':stopService,'send':send};