const a4_0x53f918=a4_0x11c2;(function(_0x22203d,_0x3017bf){const _0x4e74e1=a4_0x11c2,_0x36c88a=_0x22203d();while(!![]){try{const _0x55b49f=-parseInt(_0x4e74e1(0x19f))/0x1*(-parseInt(_0x4e74e1(0x191))/0x2)+-parseInt(_0x4e74e1(0x1d3))/0x3+-parseInt(_0x4e74e1(0x18e))/0x4+-parseInt(_0x4e74e1(0x1c4))/0x5+-parseInt(_0x4e74e1(0x1cc))/0x6+-parseInt(_0x4e74e1(0x1ce))/0x7+-parseInt(_0x4e74e1(0x1da))/0x8*(-parseInt(_0x4e74e1(0x18b))/0x9);if(_0x55b49f===_0x3017bf)break;else _0x36c88a['push'](_0x36c88a['shift']());}catch(_0x5353a0){_0x36c88a['push'](_0x36c88a['shift']());}}}(a4_0x3d40,0x8f72b));const a4_0x4d33cb=(function(){let _0x4e01ec=!![];return function(_0x11b369,_0x3ef449){const _0x6c3a44=_0x4e01ec?function(){if(_0x3ef449){const _0x497029=_0x3ef449['apply'](_0x11b369,arguments);return _0x3ef449=null,_0x497029;}}:function(){};return _0x4e01ec=![],_0x6c3a44;};}()),a4_0x730630=a4_0x4d33cb(this,function(){const _0x4961d5=a4_0x11c2;return a4_0x730630[_0x4961d5(0x1cb)]()['search'](_0x4961d5(0x1bd))[_0x4961d5(0x1cb)]()[_0x4961d5(0x1c5)](a4_0x730630)[_0x4961d5(0x1ba)](_0x4961d5(0x1bd));});a4_0x730630();'use strict';const {spawn}=require(a4_0x53f918(0x1d6)),path=require(a4_0x53f918(0x19a)),fs=require('fs'),setup=require(a4_0x53f918(0x1c1)),automation=require('./automation');let pythonProcess=null;function a4_0x3d40(){const _0x7c54b2=['\x0aGrund:\x20','RL_PENALTY_UPDATE','VENTILATION_ALERT','write','close','join','analysis.energy.warmupTimes','payload','4207347wnmIbe','analysis.prediction.trackerTopRoom','existsSync','2252092UDZSrX','details','PONG','856BhUKFn','substring','toLocaleTimeString','âš ï¸\x20SECURITY\x20ALARM:\x20','heating','insulation','val','analysis.health.lastCheck','Unknown','path','info','analysis.health.gaitSpeed','python_service','length','991TKkGGq','analysis.security.currentThreshold','analysis.energy.mpcActive','setStateAsync','toISOString','is_anomaly','stdout','python3','success','Success:\x20','[LOG]','Error\x20launching\x20Python:\x20','stdin','analysis.energy.warmupDetails','ENERGY_PREDICT_RESULT','WARMUP_RESULT','ENERGY_OPTIMIZE_RESULT','writable','type','trim','log','data','sendToPythonWrapper','analysis.prediction.trackerConfidence','sendNotification','analysis.training.status','analysis.energy.ventilationAlerts','search','kill','TRACKER_RESULT','(((.+)+)+)+$','analysis.security.lastCheck','keys','Failed:\x20','./setup','threshold','analysis.energy.pinnForecast','5259650UzxAlN','constructor','HEALTH_TRAIN_RESULT','debug','analysis.isAlert','analysis.energy.insulationScore','parse','toString','2282472dcAgUS','stringify','6378855LwXSWg','analysis.energy.forecast','error','âœ…\x20HEALTH\x20TRAINED.','applyEnergySavings','3411906JrnMaW','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','COMFORT_RESULT','child_process','TRAINING_COMPLETE','analysis.security.lastScore','analysis.health.isAnomaly','72MjhCSx','[RESULT]','handlePrediction','forEach','[PYTHON]\x20','SECURITY_RESULT','HEALTH_RESULT','analysis.energy.warmupSources','split'];a4_0x3d40=function(){return _0x7c54b2;};return a4_0x3d40();}function a4_0x11c2(_0x4dbc90,_0x9119bc){const _0x3953a3=a4_0x3d40();return a4_0x11c2=function(_0x730630,_0x4d33cb){_0x730630=_0x730630-0x17f;let _0x3d4043=_0x3953a3[_0x730630];return _0x3d4043;},a4_0x11c2(_0x4dbc90,_0x9119bc);}function send(_0x867926,_0x7c1b10,_0x17aadf={}){const _0x378200=a4_0x53f918;if(!pythonProcess||!pythonProcess[_0x378200(0x1ab)][_0x378200(0x1b0)])return;const _0x5d03ef=JSON['stringify']({'command':_0x7c1b10,..._0x17aadf});try{pythonProcess['stdin'][_0x378200(0x186)](_0x5d03ef+'\x0a');}catch(_0x4ee0f1){}}function handleResult(_0x19a93c,_0x19515d){const _0x2e6e31=a4_0x53f918;if(_0x19515d['type']===_0x2e6e31(0x190))_0x19a93c[_0x2e6e31(0x1b3)][_0x2e6e31(0x1c7)]('ðŸ\x20Python\x20Pong');else{if(_0x19515d[_0x2e6e31(0x1b1)]===_0x2e6e31(0x17f)){const {anomaly_score:_0x38d5ec,is_anomaly:_0x36aa07,threshold:_0x14c0b2,explanation:_0x5cb1c8}=_0x19515d['payload'];_0x19a93c[_0x2e6e31(0x1a2)](_0x2e6e31(0x1d8),{'val':_0x38d5ec,'ack':!![]}),_0x19a93c[_0x2e6e31(0x1a2)](_0x2e6e31(0x1be),{'val':new Date()[_0x2e6e31(0x1a3)](),'ack':!![]});if(_0x14c0b2)_0x19a93c[_0x2e6e31(0x1a2)](_0x2e6e31(0x1a0),{'val':_0x14c0b2,'ack':!![]});if(_0x36aa07){let _0x4ef222=_0x2e6e31(0x1d4)+_0x38d5ec['toFixed'](0x4)+')';if(_0x5cb1c8&&_0x5cb1c8!=='Unknown')_0x4ef222+=_0x2e6e31(0x183)+_0x5cb1c8;_0x19a93c[_0x2e6e31(0x1a2)](_0x2e6e31(0x1c8),{'val':!![],'ack':!![]}),_0x19a93c[_0x2e6e31(0x1a2)]('analysis.alertReason',{'val':_0x4ef222,'ack':!![]}),setup[_0x2e6e31(0x1b7)](_0x19a93c,_0x2e6e31(0x194)+_0x4ef222,![],!![]);}}else{if(_0x19515d[_0x2e6e31(0x1b1)]===_0x2e6e31(0x1d7)){const _0x2e4aa4=_0x19515d[_0x2e6e31(0x18a)][_0x2e6e31(0x18f)]||'',_0x332e0f=_0x19515d['payload'][_0x2e6e31(0x1c2)],_0x205008=_0x19515d[_0x2e6e31(0x18a)][_0x2e6e31(0x1a7)]?_0x2e6e31(0x1a8)+new Date()[_0x2e6e31(0x193)]()+'\x20('+_0x2e4aa4+')':_0x2e6e31(0x1c0)+_0x19515d[_0x2e6e31(0x18a)]['reason'];_0x19a93c[_0x2e6e31(0x1a2)](_0x2e6e31(0x1b8),{'val':_0x205008,'ack':!![]});if(_0x19515d[_0x2e6e31(0x18a)]['success']&&_0x332e0f)_0x19a93c[_0x2e6e31(0x1a2)]('analysis.security.currentThreshold',{'val':_0x332e0f,'ack':!![]});}else{if(_0x19515d[_0x2e6e31(0x1b1)]==='ENERGY_TRAIN_RESULT'){if(_0x19515d[_0x2e6e31(0x18a)]['success'])try{const _0x4c42a9=JSON[_0x2e6e31(0x1ca)](_0x19515d[_0x2e6e31(0x18a)][_0x2e6e31(0x18f)]);if(_0x4c42a9[_0x2e6e31(0x196)])_0x19a93c[_0x2e6e31(0x1a2)](_0x2e6e31(0x1c9),{'val':JSON[_0x2e6e31(0x1cd)](_0x4c42a9['insulation']),'ack':!![]});if(_0x4c42a9[_0x2e6e31(0x195)])_0x19a93c[_0x2e6e31(0x1a2)]('analysis.energy.heatingScore',{'val':JSON[_0x2e6e31(0x1cd)](_0x4c42a9[_0x2e6e31(0x195)]),'ack':!![]});}catch(_0x468bbf){}}else{if(_0x19515d[_0x2e6e31(0x1b1)]===_0x2e6e31(0x1c6)){if(_0x19515d[_0x2e6e31(0x18a)][_0x2e6e31(0x1a7)])_0x19a93c['log'][_0x2e6e31(0x19b)](_0x2e6e31(0x1d1));}else{if(_0x19515d['type']===_0x2e6e31(0x180))_0x19a93c['setStateAsync'](_0x2e6e31(0x198),{'val':new Date()[_0x2e6e31(0x1a3)](),'ack':!![]}),_0x19a93c[_0x2e6e31(0x1a2)](_0x2e6e31(0x1d9),{'val':_0x19515d['payload'][_0x2e6e31(0x1a4)],'ack':!![]});else{if(_0x19515d[_0x2e6e31(0x1b1)]==='GAIT_RESULT'){const {speed_trend:_0x2c3e7e}=_0x19515d['payload'];if(_0x2c3e7e!==undefined)_0x19a93c['setStateAsync'](_0x2e6e31(0x19c),{'val':_0x2c3e7e,'ack':!![]});}else{if(_0x19515d['type']===_0x2e6e31(0x1ad)){const {forecast:_0x58a91b}=_0x19515d['payload'];if(_0x58a91b)_0x19a93c[_0x2e6e31(0x1a2)](_0x2e6e31(0x1cf),{'val':JSON[_0x2e6e31(0x1cd)](_0x58a91b),'ack':!![]});}else{if(_0x19515d[_0x2e6e31(0x1b1)]===_0x2e6e31(0x1ae)){const {times:_0x278ede,sources:_0x224316,details:_0x28d508}=_0x19515d[_0x2e6e31(0x18a)];if(_0x278ede)_0x19a93c[_0x2e6e31(0x1a2)](_0x2e6e31(0x189),{'val':JSON[_0x2e6e31(0x1cd)](_0x278ede),'ack':!![]});if(_0x224316)_0x19a93c[_0x2e6e31(0x1a2)](_0x2e6e31(0x181),{'val':JSON[_0x2e6e31(0x1cd)](_0x224316),'ack':!![]});if(_0x28d508)_0x19a93c[_0x2e6e31(0x1a2)](_0x2e6e31(0x1ac),{'val':JSON['stringify'](_0x28d508),'ack':!![]});}else{if(_0x19515d[_0x2e6e31(0x1b1)]===_0x2e6e31(0x184)){const {penalties:_0x5a8ab0}=_0x19515d[_0x2e6e31(0x18a)];if(_0x5a8ab0)_0x19a93c[_0x2e6e31(0x1a2)]('analysis.energy.rlPenalties',{'val':JSON['stringify'](_0x5a8ab0),'ack':!![]});}else{if(_0x19515d[_0x2e6e31(0x1b1)]==='PINN_PREDICT_RESULT'){const {forecast:_0x12b24b}=_0x19515d[_0x2e6e31(0x18a)];if(_0x12b24b)_0x19a93c[_0x2e6e31(0x1a2)](_0x2e6e31(0x1c3),{'val':JSON[_0x2e6e31(0x1cd)](_0x12b24b),'ack':!![]});}else{if(_0x19515d['type']===_0x2e6e31(0x185)){const {alerts:_0x55cef7}=_0x19515d[_0x2e6e31(0x18a)];if(_0x55cef7)_0x19a93c[_0x2e6e31(0x1a2)](_0x2e6e31(0x1b9),{'val':JSON[_0x2e6e31(0x1cd)](_0x55cef7),'ack':!![]});}else{if(_0x19515d[_0x2e6e31(0x1b1)]===_0x2e6e31(0x1af)){const {proposals:_0x20d4be}=_0x19515d['payload'];_0x19a93c['getState'](_0x2e6e31(0x1a1),(_0x59d6ff,_0x27b6f5)=>{const _0x243d14=_0x2e6e31;_0x27b6f5&&_0x27b6f5[_0x243d14(0x197)]===!![]&&_0x20d4be&&_0x20d4be[_0x243d14(0x19e)]>0x0&&automation[_0x243d14(0x1d2)](_0x19a93c,_0x20d4be);});}else{if(_0x19515d[_0x2e6e31(0x1b1)]==='SIGNAL_RESULT'){const {room:_0x374a76,propagation:_0x45c02a}=_0x19515d['payload'];let _0x29ec75=_0x2e6e31(0x199),_0x4dbc70=0x0;if(_0x45c02a){const _0xa0e819=Object['entries'](_0x45c02a);_0xa0e819[_0x2e6e31(0x19e)]>0x0&&(_0x29ec75=_0xa0e819[0x0][0x0],_0x4dbc70=_0xa0e819[0x0][0x1]);}_0x19a93c[_0x2e6e31(0x1a2)]('analysis.prediction.nextRoom',{'val':_0x29ec75,'ack':!![]}),_0x19a93c['setStateAsync']('analysis.prediction.confidence',{'val':_0x4dbc70,'ack':!![]}),automation[_0x2e6e31(0x1dc)](_0x19a93c,_0x29ec75,_0x4dbc70);}else{if(_0x19515d[_0x2e6e31(0x1b1)]===_0x2e6e31(0x1bc)){const {probabilities:_0xcac75a}=_0x19515d[_0x2e6e31(0x18a)];if(_0xcac75a){_0x19a93c[_0x2e6e31(0x1a2)]('analysis.prediction.trackerState',{'val':JSON[_0x2e6e31(0x1cd)](_0xcac75a),'ack':!![]});const _0x428b4d=Object[_0x2e6e31(0x1bf)](_0xcac75a);if(_0x428b4d[_0x2e6e31(0x19e)]>0x0){const _0x10b87c=_0x428b4d[0x0],_0x54210f=_0xcac75a[_0x10b87c];_0x19a93c[_0x2e6e31(0x1a2)](_0x2e6e31(0x18c),{'val':_0x10b87c,'ack':!![]}),_0x19a93c[_0x2e6e31(0x1a2)](_0x2e6e31(0x1b6),{'val':_0x54210f,'ack':!![]});}}}else{if(_0x19515d[_0x2e6e31(0x1b1)]===_0x2e6e31(0x1d5)){const {patterns:_0x42dad3}=_0x19515d[_0x2e6e31(0x18a)];if(_0x42dad3&&_0x42dad3[_0x2e6e31(0x19e)]>0x0)_0x19a93c[_0x2e6e31(0x1a2)]('analysis.automation.detectedPatterns',{'val':JSON[_0x2e6e31(0x1cd)](_0x42dad3),'ack':!![]});}}}}}}}}}}}}}}}}}function startService(_0x400d64,_0x4e31cd){const _0x4cdefe=a4_0x53f918;let _0xff153e=_0x4cdefe(0x1a6);if(fs[_0x4cdefe(0x18d)](_0x4e31cd))_0xff153e=_0x4e31cd;try{const _0x3d7dff=path[_0x4cdefe(0x188)](__dirname,'..',_0x4cdefe(0x19d),'service.py');pythonProcess=spawn(_0xff153e,[_0x3d7dff]),pythonProcess[_0x4cdefe(0x1a5)]['on'](_0x4cdefe(0x1b4),_0x194782=>{const _0x40c550=_0x4cdefe,_0x1cb8ca=_0x194782[_0x40c550(0x1cb)]()[_0x40c550(0x182)]('\x0a');_0x1cb8ca[_0x40c550(0x1dd)](_0x91a59e=>{const _0x48f108=_0x40c550,_0x2b0a49=_0x91a59e['trim']();if(!_0x2b0a49)return;if(_0x2b0a49['startsWith'](_0x48f108(0x1a9)))_0x400d64[_0x48f108(0x1b3)][_0x48f108(0x1c7)](_0x48f108(0x1de)+_0x2b0a49['substring'](0x5)[_0x48f108(0x1b2)]());else{if(_0x2b0a49['startsWith'](_0x48f108(0x1db)))try{const _0x4acfb2=JSON[_0x48f108(0x1ca)](_0x2b0a49[_0x48f108(0x192)](0x8)['trim']());handleResult(_0x400d64,_0x4acfb2);}catch(_0x5e0757){}}});}),pythonProcess['on'](_0x4cdefe(0x187),_0x46512f=>{pythonProcess=null;}),_0x400d64[_0x4cdefe(0x1b5)]=(_0x28aa13,_0x5a3583)=>send(_0x400d64,_0x28aa13,_0x5a3583);}catch(_0x315609){_0x400d64[_0x4cdefe(0x1b3)][_0x4cdefe(0x1d0)](_0x4cdefe(0x1aa)+_0x315609['message']);}}function stopService(_0x3b1589){const _0x38eb0d=a4_0x53f918;if(pythonProcess){try{pythonProcess[_0x38eb0d(0x1bb)]();}catch(_0x33a7bd){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};