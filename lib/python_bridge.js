const a4_0x16fb4a=a4_0x203e;(function(_0x58f3a3,_0x5dd869){const _0x5d8fa7=a4_0x203e,_0x1c3d92=_0x58f3a3();while(!![]){try{const _0x375ab0=parseInt(_0x5d8fa7(0x242))/0x1+parseInt(_0x5d8fa7(0x1e2))/0x2+parseInt(_0x5d8fa7(0x1ff))/0x3*(-parseInt(_0x5d8fa7(0x220))/0x4)+parseInt(_0x5d8fa7(0x241))/0x5*(-parseInt(_0x5d8fa7(0x1d4))/0x6)+parseInt(_0x5d8fa7(0x21b))/0x7+parseInt(_0x5d8fa7(0x1f6))/0x8*(parseInt(_0x5d8fa7(0x1fd))/0x9)+-parseInt(_0x5d8fa7(0x224))/0xa*(parseInt(_0x5d8fa7(0x215))/0xb);if(_0x375ab0===_0x5dd869)break;else _0x1c3d92['push'](_0x1c3d92['shift']());}catch(_0x4a3e0f){_0x1c3d92['push'](_0x1c3d92['shift']());}}}(a4_0x7d8b,0xe9352));const a4_0x22e429=(function(){let _0x469b7f=!![];return function(_0x2ef05c,_0x150ee5){const _0x5ea812=_0x469b7f?function(){if(_0x150ee5){const _0x19962e=_0x150ee5['apply'](_0x2ef05c,arguments);return _0x150ee5=null,_0x19962e;}}:function(){};return _0x469b7f=![],_0x5ea812;};}()),a4_0x524919=a4_0x22e429(this,function(){const _0x1c74f2=a4_0x203e;return a4_0x524919[_0x1c74f2(0x22a)]()[_0x1c74f2(0x1e0)](_0x1c74f2(0x233))[_0x1c74f2(0x22a)]()[_0x1c74f2(0x1dd)](a4_0x524919)[_0x1c74f2(0x1e0)](_0x1c74f2(0x233));});a4_0x524919();'use strict';function a4_0x7d8b(){const _0x2dd94b=['analysis.health.isAnomaly','224YGDgzv','debug','analysis.alertReason','stdin','data','analysis.training.status','setStateAsync','262188xCJBpe','analysis.health.gaitSensors','68505bsCywA','ENERGY_PREDICT_RESULT','analysis.automation.detectedPatterns','COMFORT_RESULT','Success:\x20','applyEnergySavings','analysis.energy.mpcActive','info','threshold','HEALTH_RESULT','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20','ENERGY_TRAIN_RESULT','type','sendToPythonWrapper','[PYTHON]\x20','insulation','close','GAIT_RESULT','service.py','current_temps','toFixed','length','7581398CTsWHw','kill','details','sendNotification','existsSync','handlePrediction','11703608IaqLMk','analysis.energy.rlPenalties','join','is_anomaly','analysis.energy.forecast','172XHrwhA','PONG','sequences','getState','30abDZfc','ENERGY_OPTIMIZE_RESULT','trim','analysis.energy.warmupTimes','HEALTH_TREND_RESULT','ðŸ“ˆ\x20Health\x20Trend:\x20','toString','Python\x20process\x20exited\x20with\x20code\x20','TRAINING_COMPLETE','SIGNAL_RESULT','.\x20Please\x20create\x20this\x20file!','targets','short','startsWith','analysis.energy.insulationScore','(((.+)+)+)+$','python_service','warn','Error\x20launching\x20Python:\x20','HEALTH_TRAIN_RESULT','toLocaleTimeString','heating','./setup','stderr','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','substring','\x0aGrund:\x20','toLocaleDateString','error','10XoeDhj','1347211cvEBTC','val','analysis.security.currentThreshold','SECURITY_RESULT','ðŸ\x20Python\x20Pong','TRAIN_TOPOLOGY','de-DE','stringify','analysis.security.lastScore','write','analysis.energy.heatingScore','normalizeRoomId','TRAIN_SECURITY','614634mzRHnD','Unknown','message','analysis.prediction.confidence','âš ï¸\x20SECURITY\x20ALARM:\x20','[LOG]','parse','entries','analysis.energy.warmupDetails','constructor','\x20AND\x20','analysis.health.gaitSpeed','search','toISOString','749608RbqbEM','stdout','payload','child_process','python3','RL_PENALTY_UPDATE','analysis.health.lastCheck','./automation','log','room','analysis.prediction.trackerConfidence','forEach','2-digit','map','[PYTHON\x20ERR]\x20','analysis.prediction.nextRoom','writable','success','PINN_PREDICT_RESULT'];a4_0x7d8b=function(){return _0x2dd94b;};return a4_0x7d8b();}const {spawn}=require(a4_0x16fb4a(0x1e5)),path=require('path'),fs=require('fs'),setup=require(a4_0x16fb4a(0x23a)),automation=require(a4_0x16fb4a(0x1e9));let pythonProcess=null;function send(_0x2aa551,_0x4a365b,_0x4ac322={}){const _0x1add72=a4_0x16fb4a;if(!pythonProcess||!pythonProcess[_0x1add72(0x1f9)][_0x1add72(0x1f2)])return;_0x4ac322[_0x1add72(0x1eb)]&&(_0x4ac322[_0x1add72(0x1eb)]=setup[_0x1add72(0x1d2)](_0x4ac322[_0x1add72(0x1eb)]));(_0x4a365b===_0x1add72(0x1cc)||_0x4a365b===_0x1add72(0x1d3))&&_0x4ac322[_0x1add72(0x222)]&&(_0x4ac322[_0x1add72(0x222)]=_0x4ac322['sequences'][_0x1add72(0x1ef)](_0x117424=>{const _0x550ed3=_0x1add72;return _0x117424[_0x550ed3(0x1ef)](_0x11f082=>setup[_0x550ed3(0x1d2)](_0x11f082));}));if(_0x4ac322[_0x1add72(0x212)]){const _0x19bdbd={};for(const [_0x70bfbd,_0x5b157c]of Object[_0x1add72(0x1db)](_0x4ac322['current_temps']))_0x19bdbd[setup[_0x1add72(0x1d2)](_0x70bfbd)]=_0x5b157c;_0x4ac322[_0x1add72(0x212)]=_0x19bdbd;}if(_0x4ac322[_0x1add72(0x22f)]){const _0x50513f={};for(const [_0x56ddf1,_0x42daae]of Object[_0x1add72(0x1db)](_0x4ac322[_0x1add72(0x22f)]))_0x50513f[setup[_0x1add72(0x1d2)](_0x56ddf1)]=_0x42daae;_0x4ac322[_0x1add72(0x22f)]=_0x50513f;}const _0x4262a3=JSON[_0x1add72(0x1ce)]({'command':_0x4a365b,..._0x4ac322});try{pythonProcess['stdin'][_0x1add72(0x1d0)](_0x4262a3+'\x0a');}catch(_0x28712a){}}function handleResult(_0x3545ad,_0x28813d){const _0x457fbd=a4_0x16fb4a;if(_0x28813d[_0x457fbd(0x20b)]===_0x457fbd(0x221))_0x3545ad['log'][_0x457fbd(0x1f7)](_0x457fbd(0x246));else{if(_0x28813d[_0x457fbd(0x20b)]===_0x457fbd(0x245)){const {anomaly_score:_0xe0f405,is_anomaly:_0x4b8ff3,threshold:_0x5c6f5d,explanation:_0x3cffb7}=_0x28813d[_0x457fbd(0x1e4)];_0x3545ad['setStateAsync'](_0x457fbd(0x1cf),{'val':_0xe0f405,'ack':!![]}),_0x3545ad[_0x457fbd(0x1fc)]('analysis.security.lastCheck',{'val':new Date()[_0x457fbd(0x1e1)](),'ack':!![]});if(_0x5c6f5d)_0x3545ad[_0x457fbd(0x1fc)](_0x457fbd(0x244),{'val':_0x5c6f5d,'ack':!![]});if(_0x4b8ff3){let _0x46f60e=_0x457fbd(0x23c)+_0xe0f405[_0x457fbd(0x213)](0x4)+')';if(_0x3cffb7&&_0x3cffb7!=='Unknown')_0x46f60e+=_0x457fbd(0x23e)+_0x3cffb7;_0x3545ad['setStateAsync']('analysis.isAlert',{'val':!![],'ack':!![]}),_0x3545ad[_0x457fbd(0x1fc)](_0x457fbd(0x1f8),{'val':_0x46f60e,'ack':!![]}),setup[_0x457fbd(0x218)](_0x3545ad,_0x457fbd(0x1d8)+_0x46f60e,![],!![]);}}else{if(_0x28813d['type']===_0x457fbd(0x22c)){const _0x5ae057=_0x28813d[_0x457fbd(0x1e4)][_0x457fbd(0x217)]||'',_0x533923=_0x28813d[_0x457fbd(0x1e4)][_0x457fbd(0x207)],_0x2158e4=_0x28813d[_0x457fbd(0x1e4)][_0x457fbd(0x1f3)]?_0x457fbd(0x203)+new Date()[_0x457fbd(0x238)]()+'\x20('+_0x5ae057+')':'Failed:\x20'+_0x28813d['payload']['reason'];_0x3545ad[_0x457fbd(0x1fc)](_0x457fbd(0x1fb),{'val':_0x2158e4,'ack':!![]});if(_0x28813d[_0x457fbd(0x1e4)][_0x457fbd(0x1f3)]&&_0x533923)_0x3545ad[_0x457fbd(0x1fc)](_0x457fbd(0x244),{'val':_0x533923,'ack':!![]});}else{if(_0x28813d[_0x457fbd(0x20b)]===_0x457fbd(0x20a)){if(_0x28813d[_0x457fbd(0x1e4)][_0x457fbd(0x1f3)])try{const _0x5770ff=JSON[_0x457fbd(0x1da)](_0x28813d[_0x457fbd(0x1e4)][_0x457fbd(0x217)]);if(_0x5770ff[_0x457fbd(0x20e)])_0x3545ad[_0x457fbd(0x1fc)](_0x457fbd(0x232),{'val':JSON['stringify'](_0x5770ff[_0x457fbd(0x20e)]),'ack':!![]});if(_0x5770ff['heating'])_0x3545ad[_0x457fbd(0x1fc)](_0x457fbd(0x1d1),{'val':JSON['stringify'](_0x5770ff[_0x457fbd(0x239)]),'ack':!![]});}catch(_0x337610){}}else{if(_0x28813d[_0x457fbd(0x20b)]===_0x457fbd(0x237)){if(_0x28813d[_0x457fbd(0x1e4)][_0x457fbd(0x1f3)]){_0x3545ad[_0x457fbd(0x1ea)]['info']('âœ…\x20HEALTH\x20TRAINED.');const _0xacff6a=new Date(),_0x58671f=_0xacff6a[_0x457fbd(0x23f)](_0x457fbd(0x1cd),{'day':'2-digit','month':_0x457fbd(0x230),'hour':_0x457fbd(0x1ee),'minute':'2-digit'});_0x3545ad[_0x457fbd(0x1fc)]('analysis.health.lastCheck',{'val':_0x58671f,'ack':!![]});}}else{if(_0x28813d[_0x457fbd(0x20b)]===_0x457fbd(0x208)){const _0x57d683=new Date(),_0x49e2b9=_0x57d683['toLocaleDateString']('de-DE',{'day':_0x457fbd(0x1ee),'month':_0x457fbd(0x230),'hour':_0x457fbd(0x1ee),'minute':_0x457fbd(0x1ee)});_0x3545ad[_0x457fbd(0x1fc)](_0x457fbd(0x1e8),{'val':_0x49e2b9,'ack':!![]}),_0x3545ad[_0x457fbd(0x1fc)](_0x457fbd(0x1f5),{'val':_0x28813d[_0x457fbd(0x1e4)][_0x457fbd(0x21e)],'ack':!![]});}else{if(_0x28813d[_0x457fbd(0x20b)]===_0x457fbd(0x228)){const {trend_percent:_0x4a12db,details:_0x4d83a0}=_0x28813d[_0x457fbd(0x1e4)],_0x13b402=new Date(),_0x243eeb=_0x13b402[_0x457fbd(0x23f)](_0x457fbd(0x1cd),{'day':_0x457fbd(0x1ee),'month':_0x457fbd(0x230),'hour':_0x457fbd(0x1ee),'minute':_0x457fbd(0x1ee)});_0x3545ad['setStateAsync'](_0x457fbd(0x1e8),{'val':_0x243eeb,'ack':!![]}),_0x3545ad[_0x457fbd(0x1fc)]('analysis.health.activityTrend',{'val':_0x4a12db,'ack':!![]}),_0x3545ad[_0x457fbd(0x1ea)][_0x457fbd(0x206)](_0x457fbd(0x229)+_0x4d83a0);}else{if(_0x28813d[_0x457fbd(0x20b)]===_0x457fbd(0x210)){const {speed_trend:_0x36d670,sensors:_0xe88adc,proof:_0x342545}=_0x28813d[_0x457fbd(0x1e4)];if(_0x36d670!==undefined)_0x3545ad[_0x457fbd(0x1fc)](_0x457fbd(0x1df),{'val':_0x36d670,'ack':!![]});if(_0xe88adc&&Array['isArray'](_0xe88adc))_0x3545ad[_0x457fbd(0x1fc)](_0x457fbd(0x1fe),{'val':_0xe88adc[_0x457fbd(0x21d)](',\x20'),'ack':!![]});if(_0x342545)_0x3545ad['setStateAsync']('analysis.health.gaitDebug',{'val':_0x342545,'ack':!![]});}else{if(_0x28813d[_0x457fbd(0x20b)]===_0x457fbd(0x200)){const {forecast:_0x543942}=_0x28813d['payload'];if(_0x543942)_0x3545ad[_0x457fbd(0x1fc)](_0x457fbd(0x21f),{'val':JSON[_0x457fbd(0x1ce)](_0x543942),'ack':!![]});}else{if(_0x28813d[_0x457fbd(0x20b)]==='WARMUP_RESULT'){const {times:_0x2973da,sources:_0x2415cb,details:_0x481f5c}=_0x28813d['payload'];if(_0x2973da)_0x3545ad[_0x457fbd(0x1fc)](_0x457fbd(0x227),{'val':JSON[_0x457fbd(0x1ce)](_0x2973da),'ack':!![]});if(_0x2415cb)_0x3545ad[_0x457fbd(0x1fc)]('analysis.energy.warmupSources',{'val':JSON['stringify'](_0x2415cb),'ack':!![]});if(_0x481f5c)_0x3545ad['setStateAsync'](_0x457fbd(0x1dc),{'val':JSON[_0x457fbd(0x1ce)](_0x481f5c),'ack':!![]});}else{if(_0x28813d[_0x457fbd(0x20b)]===_0x457fbd(0x1e7)){const {penalties:_0x4246c5}=_0x28813d[_0x457fbd(0x1e4)];if(_0x4246c5)_0x3545ad[_0x457fbd(0x1fc)](_0x457fbd(0x21c),{'val':JSON['stringify'](_0x4246c5),'ack':!![]});}else{if(_0x28813d[_0x457fbd(0x20b)]===_0x457fbd(0x1f4)){const {forecast:_0xc1d686}=_0x28813d[_0x457fbd(0x1e4)];if(_0xc1d686)_0x3545ad[_0x457fbd(0x1fc)]('analysis.energy.pinnForecast',{'val':JSON['stringify'](_0xc1d686),'ack':!![]});}else{if(_0x28813d['type']==='VENTILATION_ALERT'){const {alerts:_0x506170}=_0x28813d['payload'];if(_0x506170)_0x3545ad['setStateAsync']('analysis.energy.ventilationAlerts',{'val':JSON[_0x457fbd(0x1ce)](_0x506170),'ack':!![]});}else{if(_0x28813d['type']===_0x457fbd(0x225)){const {proposals:_0x13f893}=_0x28813d[_0x457fbd(0x1e4)];_0x3545ad[_0x457fbd(0x223)](_0x457fbd(0x205),(_0x123025,_0x4fc7b1)=>{const _0x3d8ef7=_0x457fbd;_0x4fc7b1&&_0x4fc7b1[_0x3d8ef7(0x243)]===!![]&&_0x13f893&&_0x13f893['length']>0x0&&automation[_0x3d8ef7(0x204)](_0x3545ad,_0x13f893);});}else{if(_0x28813d[_0x457fbd(0x20b)]===_0x457fbd(0x22d)){const {room:_0x49f855,propagation:_0x16e127}=_0x28813d[_0x457fbd(0x1e4)];let _0x24e9ca=_0x457fbd(0x1d5),_0x11195e=0x0;if(_0x16e127){const _0x298dcc=Object['entries'](_0x16e127);_0x298dcc[_0x457fbd(0x214)]>0x0&&(_0x24e9ca=_0x298dcc[0x0][0x0],_0x11195e=_0x298dcc[0x0][0x1]);}_0x3545ad[_0x457fbd(0x1fc)](_0x457fbd(0x1f1),{'val':_0x24e9ca,'ack':!![]}),_0x3545ad[_0x457fbd(0x1fc)](_0x457fbd(0x1d7),{'val':_0x11195e,'ack':!![]}),automation[_0x457fbd(0x21a)](_0x3545ad,_0x24e9ca,_0x11195e);}else{if(_0x28813d['type']==='TRACKER_RESULT'){const {probabilities:_0x2c599a}=_0x28813d[_0x457fbd(0x1e4)];if(_0x2c599a){_0x3545ad[_0x457fbd(0x1fc)]('analysis.prediction.trackerState',{'val':JSON['stringify'](_0x2c599a),'ack':!![]});const _0x4ea87f=Object['keys'](_0x2c599a);if(_0x4ea87f[_0x457fbd(0x214)]>0x0){const _0x378f0e=_0x4ea87f[0x0],_0x10fe0e=_0x2c599a[_0x378f0e];_0x3545ad['setStateAsync']('analysis.prediction.trackerTopRoom',{'val':_0x378f0e,'ack':!![]}),_0x3545ad['setStateAsync'](_0x457fbd(0x1ec),{'val':_0x10fe0e,'ack':!![]});}}}else{if(_0x28813d[_0x457fbd(0x20b)]===_0x457fbd(0x202)){const {patterns:_0x599bde}=_0x28813d['payload'];if(_0x599bde&&_0x599bde['length']>0x0)_0x3545ad['setStateAsync'](_0x457fbd(0x201),{'val':JSON['stringify'](_0x599bde),'ack':!![]});}}}}}}}}}}}}}}}}}}function startService(_0x3bf6c0,_0x497414){const _0x526b23=a4_0x16fb4a;let _0x122b09=_0x526b23(0x1e6);if(fs[_0x526b23(0x219)](_0x497414))_0x122b09=_0x497414;const _0x30a797=path[_0x526b23(0x21d)](__dirname,'..',_0x526b23(0x211)),_0x20806e=path[_0x526b23(0x21d)](__dirname,'..',_0x526b23(0x234),_0x526b23(0x211));let _0x2cd8bd='';if(fs['existsSync'](_0x30a797))_0x2cd8bd=_0x30a797;else{if(fs[_0x526b23(0x219)](_0x20806e))_0x2cd8bd=_0x20806e;else{_0x3bf6c0[_0x526b23(0x1ea)][_0x526b23(0x240)](_0x526b23(0x209)+_0x30a797+_0x526b23(0x1de)+_0x20806e+_0x526b23(0x22e));return;}}try{_0x3bf6c0['log']['info']('ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20'+_0x122b09+'\x20'+_0x2cd8bd),pythonProcess=spawn(_0x122b09,[_0x2cd8bd]),pythonProcess[_0x526b23(0x1e3)]['on']('data',_0x2b051a=>{const _0x398b63=_0x526b23,_0x1a6eaf=_0x2b051a['toString']()['split']('\x0a');_0x1a6eaf[_0x398b63(0x1ed)](_0x3df713=>{const _0x52ee44=_0x398b63,_0x4a316e=_0x3df713['trim']();if(!_0x4a316e)return;if(_0x4a316e[_0x52ee44(0x231)](_0x52ee44(0x1d9)))_0x3bf6c0[_0x52ee44(0x1ea)][_0x52ee44(0x1f7)](_0x52ee44(0x20d)+_0x4a316e['substring'](0x5)['trim']());else{if(_0x4a316e[_0x52ee44(0x231)]('[RESULT]'))try{const _0x54e492=JSON[_0x52ee44(0x1da)](_0x4a316e[_0x52ee44(0x23d)](0x8)[_0x52ee44(0x226)]());handleResult(_0x3bf6c0,_0x54e492);}catch(_0x24625b){}}});}),pythonProcess[_0x526b23(0x23b)]['on'](_0x526b23(0x1fa),_0x12318f=>{const _0x2cf6a5=_0x526b23;_0x3bf6c0[_0x2cf6a5(0x1ea)][_0x2cf6a5(0x240)](_0x2cf6a5(0x1f0)+_0x12318f[_0x2cf6a5(0x22a)]()[_0x2cf6a5(0x226)]());}),pythonProcess['on'](_0x526b23(0x20f),_0x3afc02=>{const _0x336265=_0x526b23;_0x3bf6c0[_0x336265(0x1ea)][_0x336265(0x235)](_0x336265(0x22b)+_0x3afc02),pythonProcess=null;}),_0x3bf6c0[_0x526b23(0x20c)]=(_0x254680,_0x200b81)=>send(_0x3bf6c0,_0x254680,_0x200b81);}catch(_0x1f84bb){_0x3bf6c0[_0x526b23(0x1ea)][_0x526b23(0x240)](_0x526b23(0x236)+_0x1f84bb[_0x526b23(0x1d6)]);}}function stopService(_0x48966f){const _0x5c435e=a4_0x16fb4a;if(pythonProcess){try{pythonProcess[_0x5c435e(0x216)]();}catch(_0x5c3c26){}pythonProcess=null;}}function a4_0x203e(_0x534c8c,_0x383f7b){const _0x5a10d0=a4_0x7d8b();return a4_0x203e=function(_0x524919,_0x22e429){_0x524919=_0x524919-0x1cc;let _0x7d8bec=_0x5a10d0[_0x524919];return _0x7d8bec;},a4_0x203e(_0x534c8c,_0x383f7b);}module['exports']={'startService':startService,'stopService':stopService,'send':send};