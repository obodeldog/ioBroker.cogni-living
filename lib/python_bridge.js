const a4_0x378d19=a4_0x3c03;(function(_0x9c019d,_0x19a058){const _0x35742f=a4_0x3c03,_0x201ad9=_0x9c019d();while(!![]){try{const _0x33767b=parseInt(_0x35742f(0x201))/0x1+parseInt(_0x35742f(0x214))/0x2+-parseInt(_0x35742f(0x211))/0x3*(parseInt(_0x35742f(0x21a))/0x4)+parseInt(_0x35742f(0x1e7))/0x5*(-parseInt(_0x35742f(0x1fc))/0x6)+parseInt(_0x35742f(0x203))/0x7+parseInt(_0x35742f(0x217))/0x8*(-parseInt(_0x35742f(0x239))/0x9)+parseInt(_0x35742f(0x1ee))/0xa;if(_0x33767b===_0x19a058)break;else _0x201ad9['push'](_0x201ad9['shift']());}catch(_0x103387){_0x201ad9['push'](_0x201ad9['shift']());}}}(a4_0x2109,0xdcab5));const a4_0x16eada=(function(){let _0x20832f=!![];return function(_0x2a72dd,_0x3a611a){const _0x56cd6=_0x20832f?function(){if(_0x3a611a){const _0x442598=_0x3a611a['apply'](_0x2a72dd,arguments);return _0x3a611a=null,_0x442598;}}:function(){};return _0x20832f=![],_0x56cd6;};}()),a4_0x298e83=a4_0x16eada(this,function(){const _0x1b3d2f=a4_0x3c03;return a4_0x298e83['toString']()['search'](_0x1b3d2f(0x20e))[_0x1b3d2f(0x20c)]()[_0x1b3d2f(0x1f6)](a4_0x298e83)[_0x1b3d2f(0x237)](_0x1b3d2f(0x20e));});a4_0x298e83();'use strict';const {spawn}=require('child_process'),path=require(a4_0x378d19(0x215)),fs=require('fs'),setup=require('./setup'),automation=require('./automation');function a4_0x2109(){const _0x4d0e6f=['1789202scmfIx','analysis.security.lastCheck','378595ufCiRO','analysis.prediction.confidence','success','analysis.security.lastScore','is_anomaly','Unknown','[PYTHON]\x20','message','length','toString','analysis.security.currentThreshold','(((.+)+)+)+$','HEALTH_RESULT','toISOString','78IznnsW','trim','error','1365678cVsRud','path','analysis.automation.detectedPatterns','8TOGmEg','stringify','COMFORT_RESULT','85660WcXfxJ','stdin','substring','analysis.isAlert','startsWith','info','existsSync','GAIT_RESULT','analysis.health.isAnomaly','details','reason','[RESULT]','type','ðŸ\x20Python\x20Pong','close','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','heating','exports','analysis.energy.mpcActive','analysis.prediction.nextRoom','payload','kill','\x0aGrund:\x20','writable','debug','analysis.alertReason','getState','SECURITY_RESULT','[LOG]','search','analysis.energy.heatingScore','14515911Scijtn','insulation','split','python3','408665FFNdVa','ENERGY_TRAIN_RESULT','analysis.health.lastCheck','parse','Success:\x20','SIGNAL_RESULT','sendToPythonWrapper','15282000VnwWYY','âš ï¸\x20SECURITY\x20ALARM:\x20','stdout','ENERGY_OPTIMIZE_RESULT','service.py','PONG','analysis.energy.pinnForecast','analysis.energy.forecast','constructor','TRAINING_COMPLETE','setStateAsync','HEALTH_TRAIN_RESULT','handlePrediction','log','72RxLRWJ','Error\x20launching\x20Python:\x20','threshold','ENERGY_PREDICT_RESULT','write'];a4_0x2109=function(){return _0x4d0e6f;};return a4_0x2109();}let pythonProcess=null;function send(_0x28a0db,_0x15f1af,_0x5f582e={}){const _0x5625d2=a4_0x378d19;if(!pythonProcess||!pythonProcess['stdin'][_0x5625d2(0x231)])return;const _0x189123=JSON[_0x5625d2(0x218)]({'command':_0x15f1af,..._0x5f582e});try{pythonProcess[_0x5625d2(0x21b)][_0x5625d2(0x200)](_0x189123+'\x0a');}catch(_0x379603){}}function handleResult(_0x1498ce,_0x32bcc1){const _0xb98297=a4_0x378d19;if(_0x32bcc1['type']===_0xb98297(0x1f3))_0x1498ce[_0xb98297(0x1fb)][_0xb98297(0x232)](_0xb98297(0x227));else{if(_0x32bcc1[_0xb98297(0x226)]===_0xb98297(0x235)){const {anomaly_score:_0x19fb09,is_anomaly:_0x2fac2f,threshold:_0x41086f,explanation:_0x1f00e8}=_0x32bcc1[_0xb98297(0x22e)];_0x1498ce[_0xb98297(0x1f8)](_0xb98297(0x206),{'val':_0x19fb09,'ack':!![]}),_0x1498ce['setStateAsync'](_0xb98297(0x202),{'val':new Date()[_0xb98297(0x210)](),'ack':!![]});if(_0x41086f)_0x1498ce[_0xb98297(0x1f8)](_0xb98297(0x20d),{'val':_0x41086f,'ack':!![]});if(_0x2fac2f){let _0xd0c843=_0xb98297(0x229)+_0x19fb09['toFixed'](0x4)+')';if(_0x1f00e8&&_0x1f00e8!==_0xb98297(0x208))_0xd0c843+=_0xb98297(0x230)+_0x1f00e8;_0x1498ce[_0xb98297(0x1f8)](_0xb98297(0x21d),{'val':!![],'ack':!![]}),_0x1498ce['setStateAsync'](_0xb98297(0x233),{'val':_0xd0c843,'ack':!![]}),setup['sendNotification'](_0x1498ce,_0xb98297(0x1ef)+_0xd0c843,![],!![]);}}else{if(_0x32bcc1[_0xb98297(0x226)]===_0xb98297(0x1f7)){const _0x29be71=_0x32bcc1[_0xb98297(0x22e)]['details']||'',_0x4f4ea5=_0x32bcc1['payload'][_0xb98297(0x1fe)],_0x6d76d0=_0x32bcc1[_0xb98297(0x22e)][_0xb98297(0x205)]?_0xb98297(0x1eb)+new Date()['toLocaleTimeString']()+'\x20('+_0x29be71+')':'Failed:\x20'+_0x32bcc1[_0xb98297(0x22e)][_0xb98297(0x224)];_0x1498ce[_0xb98297(0x1f8)]('analysis.training.status',{'val':_0x6d76d0,'ack':!![]});if(_0x32bcc1[_0xb98297(0x22e)][_0xb98297(0x205)]&&_0x4f4ea5)_0x1498ce[_0xb98297(0x1f8)](_0xb98297(0x20d),{'val':_0x4f4ea5,'ack':!![]});}else{if(_0x32bcc1[_0xb98297(0x226)]===_0xb98297(0x1e8)){if(_0x32bcc1[_0xb98297(0x22e)][_0xb98297(0x205)])try{const _0x50f038=JSON['parse'](_0x32bcc1[_0xb98297(0x22e)][_0xb98297(0x223)]);if(_0x50f038['insulation'])_0x1498ce[_0xb98297(0x1f8)]('analysis.energy.insulationScore',{'val':JSON[_0xb98297(0x218)](_0x50f038[_0xb98297(0x23a)]),'ack':!![]});if(_0x50f038['heating'])_0x1498ce['setStateAsync'](_0xb98297(0x238),{'val':JSON[_0xb98297(0x218)](_0x50f038[_0xb98297(0x22a)]),'ack':!![]});}catch(_0xfa9a92){}}else{if(_0x32bcc1[_0xb98297(0x226)]===_0xb98297(0x1f9)){if(_0x32bcc1[_0xb98297(0x22e)][_0xb98297(0x205)])_0x1498ce[_0xb98297(0x1fb)][_0xb98297(0x21f)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x32bcc1[_0xb98297(0x226)]===_0xb98297(0x20f))_0x1498ce[_0xb98297(0x1f8)](_0xb98297(0x1e9),{'val':new Date()[_0xb98297(0x210)](),'ack':!![]}),_0x1498ce['setStateAsync'](_0xb98297(0x222),{'val':_0x32bcc1[_0xb98297(0x22e)][_0xb98297(0x207)],'ack':!![]});else{if(_0x32bcc1['type']===_0xb98297(0x221)){const {speed_trend:_0x5acd61}=_0x32bcc1[_0xb98297(0x22e)];if(_0x5acd61!==undefined)_0x1498ce[_0xb98297(0x1f8)]('analysis.health.gaitSpeed',{'val':_0x5acd61,'ack':!![]});}else{if(_0x32bcc1['type']===_0xb98297(0x1ff)){const {forecast:_0x317688}=_0x32bcc1[_0xb98297(0x22e)];if(_0x317688)_0x1498ce[_0xb98297(0x1f8)](_0xb98297(0x1f5),{'val':JSON[_0xb98297(0x218)](_0x317688),'ack':!![]});}else{if(_0x32bcc1[_0xb98297(0x226)]==='PINN_PREDICT_RESULT'){const {forecast:_0x35f8ac}=_0x32bcc1[_0xb98297(0x22e)];if(_0x35f8ac)_0x1498ce[_0xb98297(0x1f8)](_0xb98297(0x1f4),{'val':JSON[_0xb98297(0x218)](_0x35f8ac),'ack':!![]});}else{if(_0x32bcc1[_0xb98297(0x226)]===_0xb98297(0x1f1)){const {proposals:_0x4950a6}=_0x32bcc1[_0xb98297(0x22e)];_0x1498ce[_0xb98297(0x234)](_0xb98297(0x22c),(_0x141e1d,_0xff5d9a)=>{const _0x475659=_0xb98297;_0xff5d9a&&_0xff5d9a['val']===!![]&&_0x4950a6&&_0x4950a6[_0x475659(0x20b)]>0x0&&automation['applyEnergySavings'](_0x1498ce,_0x4950a6);});}else{if(_0x32bcc1[_0xb98297(0x226)]===_0xb98297(0x1ec)){const {room:_0x409832,propagation:_0x5a9388}=_0x32bcc1[_0xb98297(0x22e)];let _0x15651e=_0xb98297(0x208),_0x31439f=0x0;if(_0x5a9388){const _0xb8ea4c=Object['entries'](_0x5a9388);_0xb8ea4c['length']>0x0&&(_0x15651e=_0xb8ea4c[0x0][0x0],_0x31439f=_0xb8ea4c[0x0][0x1]);}_0x1498ce[_0xb98297(0x1f8)](_0xb98297(0x22d),{'val':_0x15651e,'ack':!![]}),_0x1498ce['setStateAsync'](_0xb98297(0x204),{'val':_0x31439f,'ack':!![]}),automation[_0xb98297(0x1fa)](_0x1498ce,_0x15651e,_0x31439f);}else{if(_0x32bcc1[_0xb98297(0x226)]===_0xb98297(0x219)){const {patterns:_0x101593}=_0x32bcc1[_0xb98297(0x22e)];if(_0x101593&&_0x101593[_0xb98297(0x20b)]>0x0)_0x1498ce[_0xb98297(0x1f8)](_0xb98297(0x216),{'val':JSON[_0xb98297(0x218)](_0x101593),'ack':!![]});}}}}}}}}}}}}}function startService(_0x1a3f0a,_0x7372da){const _0x518eba=a4_0x378d19;let _0x2c417c=_0x518eba(0x1e6);if(fs[_0x518eba(0x220)](_0x7372da))_0x2c417c=_0x7372da;try{const _0x958fcd=path['join'](__dirname,'..','python_service',_0x518eba(0x1f2));pythonProcess=spawn(_0x2c417c,[_0x958fcd]),pythonProcess[_0x518eba(0x1f0)]['on']('data',_0x24f5b7=>{const _0x284aa9=_0x518eba,_0x3a8464=_0x24f5b7[_0x284aa9(0x20c)]()[_0x284aa9(0x1e5)]('\x0a');_0x3a8464['forEach'](_0x37d945=>{const _0x508cfa=_0x284aa9,_0x41373d=_0x37d945[_0x508cfa(0x212)]();if(!_0x41373d)return;if(_0x41373d['startsWith'](_0x508cfa(0x236)))_0x1a3f0a['log'][_0x508cfa(0x232)](_0x508cfa(0x209)+_0x41373d[_0x508cfa(0x21c)](0x5)[_0x508cfa(0x212)]());else{if(_0x41373d[_0x508cfa(0x21e)](_0x508cfa(0x225)))try{const _0x43fe11=JSON[_0x508cfa(0x1ea)](_0x41373d['substring'](0x8)[_0x508cfa(0x212)]());handleResult(_0x1a3f0a,_0x43fe11);}catch(_0x5accc0){}}});}),pythonProcess['on'](_0x518eba(0x228),_0x232bee=>{pythonProcess=null;}),_0x1a3f0a[_0x518eba(0x1ed)]=(_0x3bd4e6,_0x789a07)=>send(_0x1a3f0a,_0x3bd4e6,_0x789a07);}catch(_0x2f1222){_0x1a3f0a['log'][_0x518eba(0x213)](_0x518eba(0x1fd)+_0x2f1222[_0x518eba(0x20a)]);}}function stopService(_0x308f29){const _0x2309dd=a4_0x378d19;if(pythonProcess){try{pythonProcess[_0x2309dd(0x22f)]();}catch(_0x487994){}pythonProcess=null;}}function a4_0x3c03(_0x41f286,_0x13e42b){const _0x50dc3c=a4_0x2109();return a4_0x3c03=function(_0x298e83,_0x16eada){_0x298e83=_0x298e83-0x1e5;let _0x210999=_0x50dc3c[_0x298e83];return _0x210999;},a4_0x3c03(_0x41f286,_0x13e42b);}module[a4_0x378d19(0x22b)]={'startService':startService,'stopService':stopService,'send':send};