const a4_0x17ec17=a4_0x251a;(function(_0x520f3f,_0x5d379f){const _0x4ec28e=a4_0x251a,_0x1113e9=_0x520f3f();while(!![]){try{const _0x26d3af=-parseInt(_0x4ec28e(0x1af))/0x1+-parseInt(_0x4ec28e(0x165))/0x2*(parseInt(_0x4ec28e(0x159))/0x3)+-parseInt(_0x4ec28e(0x18d))/0x4+-parseInt(_0x4ec28e(0x15d))/0x5*(-parseInt(_0x4ec28e(0x177))/0x6)+-parseInt(_0x4ec28e(0x187))/0x7*(-parseInt(_0x4ec28e(0x1b7))/0x8)+-parseInt(_0x4ec28e(0x179))/0x9+parseInt(_0x4ec28e(0x1b6))/0xa;if(_0x26d3af===_0x5d379f)break;else _0x1113e9['push'](_0x1113e9['shift']());}catch(_0x55d76c){_0x1113e9['push'](_0x1113e9['shift']());}}}(a4_0x331f,0x86087));const a4_0x57593a=(function(){let _0x1408cb=!![];return function(_0x40b7aa,_0x34f1e5){const _0xe88155=_0x1408cb?function(){const _0x163aa7=a4_0x251a;if(_0x34f1e5){const _0x1fcebd=_0x34f1e5[_0x163aa7(0x197)](_0x40b7aa,arguments);return _0x34f1e5=null,_0x1fcebd;}}:function(){};return _0x1408cb=![],_0xe88155;};}()),a4_0x19fb8a=a4_0x57593a(this,function(){const _0x2a677f=a4_0x251a;return a4_0x19fb8a[_0x2a677f(0x1bc)]()['search']('(((.+)+)+)+$')[_0x2a677f(0x1bc)]()['constructor'](a4_0x19fb8a)[_0x2a677f(0x1ad)](_0x2a677f(0x1a6));});a4_0x19fb8a();'use strict';const {spawn}=require(a4_0x17ec17(0x1a0)),path=require(a4_0x17ec17(0x163)),fs=require('fs'),setup=require(a4_0x17ec17(0x162)),automation=require(a4_0x17ec17(0x186));let pythonProcess=null;function a4_0x251a(_0x16b625,_0x26d1a9){const _0x491215=a4_0x331f();return a4_0x251a=function(_0x19fb8a,_0x57593a){_0x19fb8a=_0x19fb8a-0x142;let _0x331f5d=_0x491215[_0x19fb8a];return _0x331f5d;},a4_0x251a(_0x16b625,_0x26d1a9);}function send(_0x47c978,_0x51ee3f,_0x56f183={}){const _0x220693=a4_0x17ec17;if(!pythonProcess||!pythonProcess[_0x220693(0x19a)][_0x220693(0x153)])return;if(_0x51ee3f==='SET_TOPOLOGY'){const _0x312a05=JSON['parse'](JSON[_0x220693(0x167)](_0x56f183));_0x312a05['rooms']&&Array[_0x220693(0x190)](_0x312a05[_0x220693(0x19b)])&&(_0x312a05[_0x220693(0x19b)]=_0x312a05[_0x220693(0x19b)][_0x220693(0x1ab)](_0x4ad417=>setup[_0x220693(0x195)](_0x4ad417)),_0x47c978['log'][_0x220693(0x148)](_0x220693(0x175)+_0x312a05[_0x220693(0x19b)][_0x220693(0x146)](0x0,0x3)['join'](',\x20')+_0x220693(0x1c1))),_0x312a05['monitored']&&Array[_0x220693(0x190)](_0x312a05[_0x220693(0x16f)])&&(_0x312a05[_0x220693(0x16f)]=_0x312a05[_0x220693(0x16f)]['map'](_0x453cdf=>setup[_0x220693(0x195)](_0x453cdf))),_0x56f183=_0x312a05;}if((_0x51ee3f===_0x220693(0x15b)||_0x51ee3f===_0x220693(0x199))&&_0x56f183[_0x220693(0x17d)]){if(Array['isArray'](_0x56f183['sequences']))try{_0x56f183['sequences'][_0x220693(0x171)]>0x0&&_0x47c978[_0x220693(0x174)][_0x220693(0x194)]('[Bridge-Debug]\x20Raw\x20Sequence\x20[0]:\x20'+JSON[_0x220693(0x167)](_0x56f183[_0x220693(0x17d)][0x0])[_0x220693(0x19f)](0x0,0x64)+_0x220693(0x1c1)),_0x56f183[_0x220693(0x17d)]=_0x56f183[_0x220693(0x17d)][_0x220693(0x1ab)](_0x555e6e=>{const _0x20dc93=_0x220693;if(_0x555e6e&&_0x555e6e[_0x20dc93(0x15a)]&&Array['isArray'](_0x555e6e[_0x20dc93(0x15a)]))return _0x555e6e[_0x20dc93(0x15a)][_0x20dc93(0x1ab)](_0x247b08=>{const _0x237e9a=_0x20dc93,_0x59c87b=_0x247b08[_0x237e9a(0x1b8)]||_0x247b08[_0x237e9a(0x14a)]||_0x247b08;return setup['normalizeRoomId'](_0x59c87b);});else{if(Array['isArray'](_0x555e6e))return _0x555e6e['map'](_0x1cabf6=>setup[_0x20dc93(0x195)](_0x1cabf6));}return[];}),_0x56f183[_0x220693(0x17d)]['length']>0x0&&_0x47c978['log'][_0x220693(0x148)]('[Bridge-Debug]\x20Normalized\x20Sequence\x20[0]\x20(Unpacked):\x20'+JSON[_0x220693(0x167)](_0x56f183['sequences'][0x0]));}catch(_0x15c254){_0x47c978['log'][_0x220693(0x14c)](_0x220693(0x180)+_0x15c254[_0x220693(0x142)]),_0x56f183[_0x220693(0x17d)]=[];}else _0x56f183['sequences']=[];}_0x56f183['room']&&typeof _0x56f183['room']===_0x220693(0x17b)&&(_0x56f183[_0x220693(0x166)]=setup[_0x220693(0x195)](_0x56f183[_0x220693(0x166)]));if(_0x56f183[_0x220693(0x1a7)]&&typeof _0x56f183[_0x220693(0x1a7)]===_0x220693(0x1c2)){const _0x110de6={};for(const [_0x501e47,_0x3f9fae]of Object[_0x220693(0x1bb)](_0x56f183[_0x220693(0x1a7)]))_0x110de6[setup[_0x220693(0x195)](_0x501e47)]=_0x3f9fae;_0x56f183['current_temps']=_0x110de6;}const _0x531b80=JSON[_0x220693(0x167)]({'command':_0x51ee3f,..._0x56f183});try{pythonProcess[_0x220693(0x19a)][_0x220693(0x150)](_0x531b80+'\x0a');}catch(_0x25f89b){}}function handleResult(_0x505702,_0x345732){const _0x3e3da8=a4_0x17ec17;if(_0x345732['type']===_0x3e3da8(0x1ac))_0x505702[_0x3e3da8(0x174)]['debug']('üêç\x20Python\x20Pong');else{if(_0x345732['type']===_0x3e3da8(0x156)){const {anomaly_score:_0xff06cd,is_anomaly:_0x21b80f,threshold:_0x1b17ab,explanation:_0x45b04f}=_0x345732[_0x3e3da8(0x1b2)];_0x505702[_0x3e3da8(0x17e)]('analysis.security.lastScore',{'val':_0xff06cd,'ack':!![]}),_0x505702[_0x3e3da8(0x17e)](_0x3e3da8(0x17f),{'val':new Date()[_0x3e3da8(0x1a2)](),'ack':!![]});if(_0x1b17ab)_0x505702[_0x3e3da8(0x17e)]('analysis.security.currentThreshold',{'val':_0x1b17ab,'ack':!![]});if(_0x21b80f){let _0x160dbb=_0x3e3da8(0x1a1)+_0xff06cd[_0x3e3da8(0x15e)](0x4)+')';if(_0x45b04f&&_0x45b04f!==_0x3e3da8(0x17c))_0x160dbb+=_0x3e3da8(0x16b)+_0x45b04f;_0x505702[_0x3e3da8(0x17e)](_0x3e3da8(0x1c8),{'val':!![],'ack':!![]}),_0x505702[_0x3e3da8(0x17e)]('analysis.alertReason',{'val':_0x160dbb,'ack':!![]}),setup[_0x3e3da8(0x185)](_0x505702,'‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20'+_0x160dbb,![],!![]);}}else{if(_0x345732[_0x3e3da8(0x191)]==='TRAINING_COMPLETE'){const _0x1b0b9d=_0x345732['payload'][_0x3e3da8(0x189)]||'',_0x1d4d6b=_0x345732[_0x3e3da8(0x1b2)]['threshold'],_0x5144d5=_0x345732[_0x3e3da8(0x1b2)]['success']?_0x3e3da8(0x14f)+new Date()['toLocaleTimeString']()+'\x20('+_0x1b0b9d+')':'Failed:\x20'+_0x345732[_0x3e3da8(0x1b2)][_0x3e3da8(0x168)];_0x505702[_0x3e3da8(0x17e)]('analysis.training.status',{'val':_0x5144d5,'ack':!![]});if(_0x345732['payload']['success']&&_0x1d4d6b)_0x505702[_0x3e3da8(0x17e)]('analysis.security.currentThreshold',{'val':_0x1d4d6b,'ack':!![]});}else{if(_0x345732[_0x3e3da8(0x191)]===_0x3e3da8(0x15c)){const _0x145ef1=_0x3e3da8(0x155)+_0x345732[_0x3e3da8(0x1b2)][_0x3e3da8(0x19b)][_0x3e3da8(0x171)]+_0x3e3da8(0x16d);_0x505702[_0x3e3da8(0x17e)](_0x3e3da8(0x178),{'val':_0x145ef1,'ack':!![]}),_0x345732[_0x3e3da8(0x1b2)][_0x3e3da8(0x18b)]&&_0x345732[_0x3e3da8(0x1b2)]['rooms']&&_0x505702[_0x3e3da8(0x17e)](_0x3e3da8(0x181),{'val':JSON[_0x3e3da8(0x167)](_0x345732['payload']),'ack':!![]});}else{if(_0x345732['type']===_0x3e3da8(0x1c7)){if(_0x345732[_0x3e3da8(0x1b2)][_0x3e3da8(0x1c5)])try{const _0x2255f2=JSON['parse'](_0x345732[_0x3e3da8(0x1b2)][_0x3e3da8(0x189)]);if(_0x2255f2[_0x3e3da8(0x145)])_0x505702['setStateAsync'](_0x3e3da8(0x1b0),{'val':JSON['stringify'](_0x2255f2['insulation']),'ack':!![]});if(_0x2255f2[_0x3e3da8(0x193)])_0x505702[_0x3e3da8(0x17e)](_0x3e3da8(0x14e),{'val':JSON[_0x3e3da8(0x167)](_0x2255f2[_0x3e3da8(0x193)]),'ack':!![]});}catch(_0x5dfc29){}}else{if(_0x345732[_0x3e3da8(0x191)]===_0x3e3da8(0x183))_0x505702[_0x3e3da8(0x174)][_0x3e3da8(0x148)](_0x3e3da8(0x1c9)),_0x505702[_0x3e3da8(0x17e)]('analysis.health.lastCheck',{'val':new Date()['toLocaleDateString'](),'ack':!![]});else{if(_0x345732[_0x3e3da8(0x191)]==='HEALTH_RESULT')_0x505702[_0x3e3da8(0x17e)]('analysis.health.isAnomaly',{'val':_0x345732[_0x3e3da8(0x1b2)][_0x3e3da8(0x19e)],'ack':!![]});else{if(_0x345732[_0x3e3da8(0x191)]==='HEALTH_TREND_RESULT')_0x505702[_0x3e3da8(0x17e)](_0x3e3da8(0x1b5),{'val':_0x345732[_0x3e3da8(0x1b2)]['trend_percent'],'ack':!![]}),_0x505702['log']['info'](_0x3e3da8(0x1c3)+_0x345732[_0x3e3da8(0x1b2)][_0x3e3da8(0x189)]);else{if(_0x345732[_0x3e3da8(0x191)]===_0x3e3da8(0x14d)){if(_0x345732[_0x3e3da8(0x1b2)]['speed_trend']!==undefined)_0x505702['setStateAsync'](_0x3e3da8(0x144),{'val':_0x345732[_0x3e3da8(0x1b2)]['speed_trend'],'ack':!![]});if(_0x345732[_0x3e3da8(0x1b2)][_0x3e3da8(0x172)])_0x505702[_0x3e3da8(0x17e)](_0x3e3da8(0x152),{'val':_0x345732[_0x3e3da8(0x1b2)]['sensors'][_0x3e3da8(0x149)](',\x20'),'ack':!![]});if(_0x345732['payload'][_0x3e3da8(0x147)])_0x505702['setStateAsync'](_0x3e3da8(0x188),{'val':_0x345732['payload'][_0x3e3da8(0x147)],'ack':!![]});}else{if(_0x345732[_0x3e3da8(0x191)]===_0x3e3da8(0x1bd)){if(_0x345732[_0x3e3da8(0x1b2)][_0x3e3da8(0x1bf)])_0x505702[_0x3e3da8(0x17e)]('analysis.energy.forecast',{'val':JSON[_0x3e3da8(0x167)](_0x345732[_0x3e3da8(0x1b2)][_0x3e3da8(0x1bf)]),'ack':!![]});}else{if(_0x345732[_0x3e3da8(0x191)]===_0x3e3da8(0x18f)){if(_0x345732[_0x3e3da8(0x1b2)][_0x3e3da8(0x1c6)])_0x505702[_0x3e3da8(0x17e)](_0x3e3da8(0x173),{'val':JSON[_0x3e3da8(0x167)](_0x345732[_0x3e3da8(0x1b2)][_0x3e3da8(0x1c6)]),'ack':!![]});if(_0x345732[_0x3e3da8(0x1b2)][_0x3e3da8(0x18e)])_0x505702[_0x3e3da8(0x17e)](_0x3e3da8(0x1a3),{'val':JSON[_0x3e3da8(0x167)](_0x345732[_0x3e3da8(0x1b2)][_0x3e3da8(0x18e)]),'ack':!![]});if(_0x345732[_0x3e3da8(0x1b2)]['details'])_0x505702['setStateAsync'](_0x3e3da8(0x16a),{'val':JSON['stringify'](_0x345732[_0x3e3da8(0x1b2)]['details']),'ack':!![]});}else{if(_0x345732[_0x3e3da8(0x191)]===_0x3e3da8(0x17a)){if(_0x345732[_0x3e3da8(0x1b2)]['penalties'])_0x505702['setStateAsync'](_0x3e3da8(0x15f),{'val':JSON['stringify'](_0x345732['payload']['penalties']),'ack':!![]});}else{if(_0x345732[_0x3e3da8(0x191)]===_0x3e3da8(0x161)){if(_0x345732[_0x3e3da8(0x1b2)]['forecast'])_0x505702['setStateAsync'](_0x3e3da8(0x170),{'val':JSON[_0x3e3da8(0x167)](_0x345732['payload'][_0x3e3da8(0x1bf)]),'ack':!![]});}else{if(_0x345732[_0x3e3da8(0x191)]===_0x3e3da8(0x198)){if(_0x345732[_0x3e3da8(0x1b2)][_0x3e3da8(0x18a)])_0x505702[_0x3e3da8(0x17e)](_0x3e3da8(0x184),{'val':JSON['stringify'](_0x345732[_0x3e3da8(0x1b2)][_0x3e3da8(0x18a)]),'ack':!![]});}else{if(_0x345732['type']==='ENERGY_OPTIMIZE_RESULT'){const {proposals:_0x2f7565}=_0x345732['payload'];_0x505702[_0x3e3da8(0x16e)](_0x3e3da8(0x14b),(_0x23497a,_0x41786e)=>{const _0x659671=_0x3e3da8;if(_0x41786e&&_0x41786e[_0x659671(0x1a4)]===!![]&&_0x2f7565&&_0x2f7565[_0x659671(0x171)]>0x0)automation[_0x659671(0x196)](_0x505702,_0x2f7565);});}else{if(_0x345732[_0x3e3da8(0x191)]===_0x3e3da8(0x1a5)){const {propagation:_0x36d5f2}=_0x345732[_0x3e3da8(0x1b2)];let _0x3a1250=_0x3e3da8(0x17c),_0x5ac357=0x0;if(_0x36d5f2){const _0x422e8a=Object[_0x3e3da8(0x1bb)](_0x36d5f2);_0x422e8a[_0x3e3da8(0x171)]>0x0&&(_0x3a1250=_0x422e8a[0x0][0x0],_0x5ac357=_0x422e8a[0x0][0x1]);}_0x505702[_0x3e3da8(0x17e)](_0x3e3da8(0x182),{'val':_0x3a1250,'ack':!![]}),_0x505702[_0x3e3da8(0x17e)]('analysis.prediction.confidence',{'val':_0x5ac357,'ack':!![]}),automation[_0x3e3da8(0x157)](_0x505702,_0x3a1250,_0x5ac357);}else{if(_0x345732[_0x3e3da8(0x191)]===_0x3e3da8(0x1b3)){const {probabilities:_0x3ea53e}=_0x345732[_0x3e3da8(0x1b2)];if(_0x3ea53e){_0x505702[_0x3e3da8(0x17e)](_0x3e3da8(0x1ae),{'val':JSON[_0x3e3da8(0x167)](_0x3ea53e),'ack':!![]});const _0x504321=Object[_0x3e3da8(0x1b4)](_0x3ea53e);_0x504321['length']>0x0&&(_0x505702[_0x3e3da8(0x17e)]('analysis.prediction.trackerTopRoom',{'val':_0x504321[0x0],'ack':!![]}),_0x505702[_0x3e3da8(0x17e)](_0x3e3da8(0x16c),{'val':_0x3ea53e[_0x504321[0x0]],'ack':!![]}));}}else{if(_0x345732[_0x3e3da8(0x191)]==='COMFORT_RESULT'){if(_0x345732[_0x3e3da8(0x1b2)][_0x3e3da8(0x1a9)])_0x505702[_0x3e3da8(0x17e)](_0x3e3da8(0x1c0),{'val':JSON[_0x3e3da8(0x167)](_0x345732[_0x3e3da8(0x1b2)][_0x3e3da8(0x1a9)]),'ack':!![]});}}}}}}}}}}}}}}}}}}}function startService(_0x1e428a,_0x54aab2){const _0x3cfcfd=a4_0x17ec17;let _0x41c55f='python3';if(fs['existsSync'](_0x54aab2))_0x41c55f=_0x54aab2;const _0x3ddf5d=path[_0x3cfcfd(0x149)](__dirname,'..',_0x3cfcfd(0x1b1)),_0x38099b=path[_0x3cfcfd(0x149)](__dirname,'..',_0x3cfcfd(0x19c),_0x3cfcfd(0x1b1));let _0x2a376a=fs[_0x3cfcfd(0x192)](_0x3ddf5d)?_0x3ddf5d:fs[_0x3cfcfd(0x192)](_0x38099b)?_0x38099b:null;if(!_0x2a376a){_0x1e428a[_0x3cfcfd(0x174)][_0x3cfcfd(0x160)](_0x3cfcfd(0x164));return;}try{_0x1e428a['log'][_0x3cfcfd(0x148)](_0x3cfcfd(0x143)+_0x41c55f+'\x20'+_0x2a376a),pythonProcess=spawn(_0x41c55f,[_0x2a376a]),pythonProcess[_0x3cfcfd(0x1ba)]['on']('data',_0x344fec=>{const _0x4f5c32=_0x3cfcfd,_0x3fb16f=_0x344fec[_0x4f5c32(0x1bc)]()['split']('\x0a');_0x3fb16f[_0x4f5c32(0x151)](_0x5c4dc2=>{const _0x26e594=_0x4f5c32,_0x4a836e=_0x5c4dc2[_0x26e594(0x154)]();if(!_0x4a836e)return;if(_0x4a836e[_0x26e594(0x1aa)]('[LOG]'))_0x1e428a[_0x26e594(0x174)][_0x26e594(0x194)](_0x26e594(0x176)+_0x4a836e[_0x26e594(0x19f)](0x5)[_0x26e594(0x154)]());else{if(_0x4a836e[_0x26e594(0x1aa)](_0x26e594(0x1a8)))try{const _0xfbb575=JSON['parse'](_0x4a836e[_0x26e594(0x19f)](0x8)['trim']());handleResult(_0x1e428a,_0xfbb575);}catch(_0x3a2d31){}}});}),pythonProcess[_0x3cfcfd(0x19d)]['on'](_0x3cfcfd(0x18c),_0x55e83e=>{const _0x19268=_0x3cfcfd;_0x1e428a[_0x19268(0x174)]['error'](_0x19268(0x1c4)+_0x55e83e[_0x19268(0x1bc)]()[_0x19268(0x154)]());}),pythonProcess['on'](_0x3cfcfd(0x1be),_0x3f6d7f=>{const _0x2e8648=_0x3cfcfd;_0x1e428a[_0x2e8648(0x174)][_0x2e8648(0x14c)]('Python\x20process\x20exited\x20with\x20code\x20'+_0x3f6d7f),pythonProcess=null;}),_0x1e428a['sendToPythonWrapper']=(_0x4e50fa,_0x2cf087)=>send(_0x1e428a,_0x4e50fa,_0x2cf087);}catch(_0x3017a7){_0x1e428a[_0x3cfcfd(0x174)][_0x3cfcfd(0x160)](_0x3cfcfd(0x1b9)+_0x3017a7['message']);}}function stopService(_0x29c519){const _0x4952bc=a4_0x17ec17;if(pythonProcess){try{pythonProcess[_0x4952bc(0x158)]();}catch(_0x550e31){}pythonProcess=null;}}function a4_0x331f(){const _0x155966=['room','stringify','reason','exports','analysis.energy.warmupDetails','\x0aGrund:\x20','analysis.prediction.trackerConfidence','\x20Rooms)','getState','monitored','analysis.energy.pinnForecast','length','sensors','analysis.energy.warmupTimes','log','[Bridge-Debug]\x20Setting\x20Topology\x20Rooms\x20(Sample):\x20','[PYTHON]\x20','328038hRHeuM','analysis.training.status','5672430vFysjl','RL_PENALTY_UPDATE','string','Unknown','sequences','setStateAsync','analysis.security.lastCheck','Gateway\x20Unpack\x20Error:\x20','analysis.security.topologyMatrix','analysis.prediction.nextRoom','HEALTH_TRAIN_RESULT','analysis.energy.ventilationAlerts','sendNotification','./automation','21NPmJzi','analysis.health.gaitDebug','details','alerts','matrix','data','3646724TiOcyz','sources','WARMUP_RESULT','isArray','type','existsSync','heating','debug','normalizeRoomId','applyEnergySavings','apply','VENTILATION_ALERT','TRAIN_SECURITY','stdin','rooms','python_service','stderr','is_anomaly','substring','child_process','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','toISOString','analysis.energy.warmupSources','val','SIGNAL_RESULT','(((.+)+)+)+$','current_temps','[RESULT]','patterns','startsWith','map','PONG','search','analysis.prediction.trackerState','67029fTqnow','analysis.energy.insulationScore','service.py','payload','TRACKER_RESULT','keys','analysis.health.activityTrend','19922170VAuUJY','644144acdovG','loc','Error\x20launching\x20Python:\x20','stdout','entries','toString','ENERGY_PREDICT_RESULT','close','forecast','analysis.automation.detectedPatterns','...','object','üìà\x20Health\x20Trend:\x20','[PYTHON\x20ERR]\x20','success','times','ENERGY_TRAIN_RESULT','analysis.isAlert','‚úÖ\x20HEALTH\x20TRAINED.','message','üöÄ\x20Starting\x20Python\x20Bridge\x20using:\x20','analysis.health.gaitSpeed','insulation','slice','proof','info','join','location','analysis.energy.mpcActive','warn','GAIT_RESULT','analysis.energy.heatingScore','Success:\x20','write','forEach','analysis.health.gaitSensors','writable','trim','Graph\x20Updated\x20(','SECURITY_RESULT','handlePrediction','kill','807DlOAPM','steps','TRAIN_TOPOLOGY','GRAPH_TRAINED','5yajQHt','toFixed','analysis.energy.rlPenalties','error','PINN_PREDICT_RESULT','./setup','path','‚ùå\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!','970YAnxmT'];a4_0x331f=function(){return _0x155966;};return a4_0x331f();}module[a4_0x17ec17(0x169)]={'startService':startService,'stopService':stopService,'send':send};