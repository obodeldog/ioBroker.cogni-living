const a4_0x1a0d2e=a4_0x313d;function a4_0x59d6(){const _0x145d9c=['startsWith','service.py','1099888obSCtb','7kdExkX','existsSync','ENERGY_PREDICT_RESULT','1608170OfwBru','\x0aGrund:\x20','search','python3','heating','child_process','payload','exports','write','stdin','analysis.security.currentThreshold','HEALTH_RESULT','4SzTUCh','(((.+)+)+)+$','analysis.energy.mpcActive','sendToPythonWrapper','trim','toISOString','57489XdYxei','debug','analysis.security.lastScore','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','./setup','success','./automation','860364NWnHzD','toString','apply','91141RpYHOP','10UfzntU','analysis.prediction.nextRoom','stdout','info','ENERGY_OPTIMIZE_RESULT','val','path','setStateAsync','log','analysis.health.gaitSpeed','2892558QfUtJh','insulation','substring','analysis.energy.forecast','python_service','analysis.energy.insulationScore','analysis.energy.pinnForecast','getState','2954347DweoKN','TRAINING_COMPLETE','COMFORT_RESULT','sendNotification','stringify','20YnsvqE','is_anomaly','message','[RESULT]','analysis.health.lastCheck','analysis.energy.heatingScore','analysis.prediction.confidence','toLocaleTimeString','details','Unknown','analysis.alertReason','handlePrediction','applyEnergySavings','analysis.automation.detectedPatterns','SIGNAL_RESULT','length','ðŸ\x20Python\x20Pong','PONG','Success:\x20','entries','Error\x20launching\x20Python:\x20','âœ…\x20HEALTH\x20TRAINED.','SECURITY_RESULT','analysis.training.status','reason','GAIT_RESULT','writable','threshold','parse','join','âš ï¸\x20SECURITY\x20ALARM:\x20','type'];a4_0x59d6=function(){return _0x145d9c;};return a4_0x59d6();}(function(_0xa8be7e,_0x40d689){const _0x4c5d10=a4_0x313d,_0x3e1e7c=_0xa8be7e();while(!![]){try{const _0x203bc2=parseInt(_0x4c5d10(0x174))/0x1*(-parseInt(_0x4c5d10(0x175))/0x2)+parseInt(_0x4c5d10(0x16a))/0x3*(parseInt(_0x4c5d10(0x164))/0x4)+-parseInt(_0x4c5d10(0x158))/0x5+parseInt(_0x4c5d10(0x17f))/0x6*(parseInt(_0x4c5d10(0x155))/0x7)+parseInt(_0x4c5d10(0x154))/0x8+parseInt(_0x4c5d10(0x171))/0x9*(parseInt(_0x4c5d10(0x132))/0xa)+parseInt(_0x4c5d10(0x12d))/0xb;if(_0x203bc2===_0x40d689)break;else _0x3e1e7c['push'](_0x3e1e7c['shift']());}catch(_0x501f8e){_0x3e1e7c['push'](_0x3e1e7c['shift']());}}}(a4_0x59d6,0x4e694));const a4_0x212ffe=(function(){let _0x326151=!![];return function(_0x5213fb,_0x15b948){const _0x54e40c=_0x326151?function(){const _0x216e7d=a4_0x313d;if(_0x15b948){const _0x1b5a9f=_0x15b948[_0x216e7d(0x173)](_0x5213fb,arguments);return _0x15b948=null,_0x1b5a9f;}}:function(){};return _0x326151=![],_0x54e40c;};}()),a4_0x337de4=a4_0x212ffe(this,function(){const _0x4a47f1=a4_0x313d;return a4_0x337de4[_0x4a47f1(0x172)]()[_0x4a47f1(0x15a)](_0x4a47f1(0x165))[_0x4a47f1(0x172)]()['constructor'](a4_0x337de4)[_0x4a47f1(0x15a)](_0x4a47f1(0x165));});a4_0x337de4();'use strict';const {spawn}=require(a4_0x1a0d2e(0x15d)),path=require(a4_0x1a0d2e(0x17b)),fs=require('fs'),setup=require(a4_0x1a0d2e(0x16e)),automation=require(a4_0x1a0d2e(0x170));let pythonProcess=null;function a4_0x313d(_0xa14f65,_0x4a009f){const _0x3dbebb=a4_0x59d6();return a4_0x313d=function(_0x337de4,_0x212ffe){_0x337de4=_0x337de4-0x12d;let _0x59d65e=_0x3dbebb[_0x337de4];return _0x59d65e;},a4_0x313d(_0xa14f65,_0x4a009f);}function send(_0x3a26a7,_0x371da9,_0x10ff32={}){const _0x4be27f=a4_0x1a0d2e;if(!pythonProcess||!pythonProcess['stdin'][_0x4be27f(0x14c)])return;const _0x552fdc=JSON[_0x4be27f(0x131)]({'command':_0x371da9,..._0x10ff32});try{pythonProcess[_0x4be27f(0x161)][_0x4be27f(0x160)](_0x552fdc+'\x0a');}catch(_0x3bf54c){}}function handleResult(_0x472ad7,_0xa1090){const _0x4c9d8f=a4_0x1a0d2e;if(_0xa1090[_0x4c9d8f(0x151)]===_0x4c9d8f(0x143))_0x472ad7[_0x4c9d8f(0x17d)][_0x4c9d8f(0x16b)](_0x4c9d8f(0x142));else{if(_0xa1090[_0x4c9d8f(0x151)]===_0x4c9d8f(0x148)){const {anomaly_score:_0x247620,is_anomaly:_0x141a1c,threshold:_0x3bec33,explanation:_0x5d3014}=_0xa1090[_0x4c9d8f(0x15e)];_0x472ad7['setStateAsync'](_0x4c9d8f(0x16c),{'val':_0x247620,'ack':!![]}),_0x472ad7[_0x4c9d8f(0x17c)]('analysis.security.lastCheck',{'val':new Date()['toISOString'](),'ack':!![]});if(_0x3bec33)_0x472ad7[_0x4c9d8f(0x17c)]('analysis.security.currentThreshold',{'val':_0x3bec33,'ack':!![]});if(_0x141a1c){let _0x31d1df=_0x4c9d8f(0x16d)+_0x247620['toFixed'](0x4)+')';if(_0x5d3014&&_0x5d3014!==_0x4c9d8f(0x13b))_0x31d1df+=_0x4c9d8f(0x159)+_0x5d3014;_0x472ad7[_0x4c9d8f(0x17c)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x472ad7[_0x4c9d8f(0x17c)](_0x4c9d8f(0x13c),{'val':_0x31d1df,'ack':!![]}),setup[_0x4c9d8f(0x130)](_0x472ad7,_0x4c9d8f(0x150)+_0x31d1df,![],!![]);}}else{if(_0xa1090[_0x4c9d8f(0x151)]===_0x4c9d8f(0x12e)){const _0x4727a2=_0xa1090[_0x4c9d8f(0x15e)][_0x4c9d8f(0x13a)]||'',_0x188eb8=_0xa1090[_0x4c9d8f(0x15e)][_0x4c9d8f(0x14d)],_0x9acdd3=_0xa1090[_0x4c9d8f(0x15e)][_0x4c9d8f(0x16f)]?_0x4c9d8f(0x144)+new Date()[_0x4c9d8f(0x139)]()+'\x20('+_0x4727a2+')':'Failed:\x20'+_0xa1090[_0x4c9d8f(0x15e)][_0x4c9d8f(0x14a)];_0x472ad7[_0x4c9d8f(0x17c)](_0x4c9d8f(0x149),{'val':_0x9acdd3,'ack':!![]});if(_0xa1090['payload']['success']&&_0x188eb8)_0x472ad7['setStateAsync'](_0x4c9d8f(0x162),{'val':_0x188eb8,'ack':!![]});}else{if(_0xa1090[_0x4c9d8f(0x151)]==='ENERGY_TRAIN_RESULT'){if(_0xa1090[_0x4c9d8f(0x15e)][_0x4c9d8f(0x16f)])try{const _0x57a0a0=JSON['parse'](_0xa1090[_0x4c9d8f(0x15e)]['details']);if(_0x57a0a0[_0x4c9d8f(0x180)])_0x472ad7[_0x4c9d8f(0x17c)](_0x4c9d8f(0x184),{'val':JSON[_0x4c9d8f(0x131)](_0x57a0a0[_0x4c9d8f(0x180)]),'ack':!![]});if(_0x57a0a0[_0x4c9d8f(0x15c)])_0x472ad7[_0x4c9d8f(0x17c)](_0x4c9d8f(0x137),{'val':JSON['stringify'](_0x57a0a0[_0x4c9d8f(0x15c)]),'ack':!![]});}catch(_0x11534f){}}else{if(_0xa1090[_0x4c9d8f(0x151)]==='HEALTH_TRAIN_RESULT'){if(_0xa1090['payload'][_0x4c9d8f(0x16f)])_0x472ad7[_0x4c9d8f(0x17d)][_0x4c9d8f(0x178)](_0x4c9d8f(0x147));}else{if(_0xa1090['type']===_0x4c9d8f(0x163))_0x472ad7['setStateAsync'](_0x4c9d8f(0x136),{'val':new Date()[_0x4c9d8f(0x169)](),'ack':!![]}),_0x472ad7[_0x4c9d8f(0x17c)]('analysis.health.isAnomaly',{'val':_0xa1090['payload'][_0x4c9d8f(0x133)],'ack':!![]});else{if(_0xa1090[_0x4c9d8f(0x151)]===_0x4c9d8f(0x14b)){const {speed_trend:_0x595c02}=_0xa1090[_0x4c9d8f(0x15e)];if(_0x595c02!==undefined)_0x472ad7[_0x4c9d8f(0x17c)](_0x4c9d8f(0x17e),{'val':_0x595c02,'ack':!![]});}else{if(_0xa1090[_0x4c9d8f(0x151)]===_0x4c9d8f(0x157)){const {forecast:_0x16cec7}=_0xa1090[_0x4c9d8f(0x15e)];if(_0x16cec7)_0x472ad7['setStateAsync'](_0x4c9d8f(0x182),{'val':JSON[_0x4c9d8f(0x131)](_0x16cec7),'ack':!![]});}else{if(_0xa1090['type']==='PINN_PREDICT_RESULT'){const {forecast:_0xb32eea}=_0xa1090['payload'];if(_0xb32eea)_0x472ad7[_0x4c9d8f(0x17c)](_0x4c9d8f(0x185),{'val':JSON[_0x4c9d8f(0x131)](_0xb32eea),'ack':!![]});}else{if(_0xa1090['type']===_0x4c9d8f(0x179)){const {proposals:_0x4c0239}=_0xa1090['payload'];_0x472ad7[_0x4c9d8f(0x186)](_0x4c9d8f(0x166),(_0x2318af,_0x2d7752)=>{const _0x16c2d6=_0x4c9d8f;_0x2d7752&&_0x2d7752[_0x16c2d6(0x17a)]===!![]&&_0x4c0239&&_0x4c0239[_0x16c2d6(0x141)]>0x0&&automation[_0x16c2d6(0x13e)](_0x472ad7,_0x4c0239);});}else{if(_0xa1090[_0x4c9d8f(0x151)]===_0x4c9d8f(0x140)){const {room:_0x11c8a9,propagation:_0x3f3d55}=_0xa1090[_0x4c9d8f(0x15e)];let _0x22169c='Unknown',_0x1486de=0x0;if(_0x3f3d55){const _0x4ce57a=Object[_0x4c9d8f(0x145)](_0x3f3d55);_0x4ce57a[_0x4c9d8f(0x141)]>0x0&&(_0x22169c=_0x4ce57a[0x0][0x0],_0x1486de=_0x4ce57a[0x0][0x1]);}_0x472ad7[_0x4c9d8f(0x17c)](_0x4c9d8f(0x176),{'val':_0x22169c,'ack':!![]}),_0x472ad7[_0x4c9d8f(0x17c)](_0x4c9d8f(0x138),{'val':_0x1486de,'ack':!![]}),automation[_0x4c9d8f(0x13d)](_0x472ad7,_0x22169c,_0x1486de);}else{if(_0xa1090[_0x4c9d8f(0x151)]===_0x4c9d8f(0x12f)){const {patterns:_0xa9f08}=_0xa1090['payload'];if(_0xa9f08&&_0xa9f08[_0x4c9d8f(0x141)]>0x0)_0x472ad7[_0x4c9d8f(0x17c)](_0x4c9d8f(0x13f),{'val':JSON[_0x4c9d8f(0x131)](_0xa9f08),'ack':!![]});}}}}}}}}}}}}}function startService(_0x4107ad,_0x1b9115){const _0x2533c1=a4_0x1a0d2e;let _0x435a75=_0x2533c1(0x15b);if(fs[_0x2533c1(0x156)](_0x1b9115))_0x435a75=_0x1b9115;try{const _0x371e58=path[_0x2533c1(0x14f)](__dirname,'..',_0x2533c1(0x183),_0x2533c1(0x153));pythonProcess=spawn(_0x435a75,[_0x371e58]),pythonProcess[_0x2533c1(0x177)]['on']('data',_0x2cafe2=>{const _0x2ed094=_0x2533c1,_0x1c4fa7=_0x2cafe2[_0x2ed094(0x172)]()['split']('\x0a');_0x1c4fa7['forEach'](_0xee9f1e=>{const _0x4d71a8=_0x2ed094,_0x19e14d=_0xee9f1e[_0x4d71a8(0x168)]();if(!_0x19e14d)return;if(_0x19e14d[_0x4d71a8(0x152)]('[LOG]'))_0x4107ad[_0x4d71a8(0x17d)]['debug']('[PYTHON]\x20'+_0x19e14d[_0x4d71a8(0x181)](0x5)[_0x4d71a8(0x168)]());else{if(_0x19e14d['startsWith'](_0x4d71a8(0x135)))try{const _0x109793=JSON[_0x4d71a8(0x14e)](_0x19e14d[_0x4d71a8(0x181)](0x8)[_0x4d71a8(0x168)]());handleResult(_0x4107ad,_0x109793);}catch(_0x5b49a3){}}});}),pythonProcess['on']('close',_0x21715d=>{pythonProcess=null;}),_0x4107ad[_0x2533c1(0x167)]=(_0x53bc43,_0x34d50e)=>send(_0x4107ad,_0x53bc43,_0x34d50e);}catch(_0x1eee08){_0x4107ad[_0x2533c1(0x17d)]['error'](_0x2533c1(0x146)+_0x1eee08[_0x2533c1(0x134)]);}}function stopService(_0x32cd92){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x2b88b1){}pythonProcess=null;}}module[a4_0x1a0d2e(0x15f)]={'startService':startService,'stopService':stopService,'send':send};