const a4_0xf5f176=a4_0x488c;function a4_0x3c1d(){const _0x17fbae=['heating','parse','analysis.energy.insulationScore','analysis.prediction.trackerConfidence','Failed:\x20','length','details','sendToPythonWrapper','analysis.prediction.trackerState','sendNotification','split','[RESULT]','(((.+)+)+)+$','handlePrediction','apply','setStateAsync','toISOString','stdout','[LOG]','Unknown','val','HEALTH_TRAIN_RESULT','HEALTH_RESULT','error','analysis.health.gaitSpeed','type','2905218xBeVoJ','analysis.prediction.trackerTopRoom','trim','entries','TRACKER_RESULT','[PYTHON]\x20','stringify','./automation','analysis.isAlert','getState','analysis.energy.mpcActive','reason','python3','analysis.security.currentThreshold','39084BehdMd','GAIT_RESULT','Success:\x20','260276KHRMLK','stdin','\x0aGrund:\x20','python_service','analysis.energy.ventilationAlerts','analysis.energy.heatingScore','532595LBnDtW','analysis.energy.warmupTimes','analysis.security.lastScore','âœ…\x20HEALTH\x20TRAINED.','data','9nTFnjN','analysis.automation.detectedPatterns','log','path','toFixed','6281fVlIpx','65uHEkDB','info','toString','child_process','analysis.health.lastCheck','existsSync','analysis.prediction.nextRoom','66160EFDwZQ','TRAINING_COMPLETE','payload','search','applyEnergySavings','12250kdQsyK','keys','analysis.health.isAnomaly','service.py','VENTILATION_ALERT','toLocaleTimeString','PONG','success','âš ï¸\x20SECURITY\x20ALARM:\x20','6191166GutMzc','substring','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','kill','16bkrzHl','insulation','Error\x20launching\x20Python:\x20','analysis.prediction.confidence','ENERGY_OPTIMIZE_RESULT','WARMUP_RESULT','writable','69SYixxG','is_anomaly','PINN_PREDICT_RESULT','ðŸ\x20Python\x20Pong'];a4_0x3c1d=function(){return _0x17fbae;};return a4_0x3c1d();}(function(_0x550225,_0x54a46b){const _0x277ecb=a4_0x488c,_0x480b14=_0x550225();while(!![]){try{const _0x4e9fe4=parseInt(_0x277ecb(0x186))/0x1*(-parseInt(_0x277ecb(0x1d2))/0x2)+-parseInt(_0x277ecb(0x1a4))/0x3+parseInt(_0x277ecb(0x1b5))/0x4*(-parseInt(_0x277ecb(0x1c6))/0x5)+parseInt(_0x277ecb(0x1db))/0x6+parseInt(_0x277ecb(0x1bb))/0x7*(parseInt(_0x277ecb(0x17f))/0x8)+-parseInt(_0x277ecb(0x1c0))/0x9*(parseInt(_0x277ecb(0x1cd))/0xa)+-parseInt(_0x277ecb(0x1c5))/0xb*(-parseInt(_0x277ecb(0x1b2))/0xc);if(_0x4e9fe4===_0x54a46b)break;else _0x480b14['push'](_0x480b14['shift']());}catch(_0x4e9f5a){_0x480b14['push'](_0x480b14['shift']());}}}(a4_0x3c1d,0xc35ea));const a4_0x5d77ab=(function(){let _0x4e0c14=!![];return function(_0x3d3514,_0x435d00){const _0x1341b6=_0x4e0c14?function(){const _0x1740c3=a4_0x488c;if(_0x435d00){const _0x353306=_0x435d00[_0x1740c3(0x198)](_0x3d3514,arguments);return _0x435d00=null,_0x353306;}}:function(){};return _0x4e0c14=![],_0x1341b6;};}()),a4_0x3dfb47=a4_0x5d77ab(this,function(){const _0x57fe10=a4_0x488c;return a4_0x3dfb47[_0x57fe10(0x1c8)]()[_0x57fe10(0x1d0)](_0x57fe10(0x196))[_0x57fe10(0x1c8)]()['constructor'](a4_0x3dfb47)[_0x57fe10(0x1d0)](_0x57fe10(0x196));});a4_0x3dfb47();'use strict';const {spawn}=require(a4_0xf5f176(0x1c9)),path=require(a4_0xf5f176(0x1c3)),fs=require('fs'),setup=require('./setup'),automation=require(a4_0xf5f176(0x1ab));let pythonProcess=null;function a4_0x488c(_0x42afb7,_0x530fcc){const _0x16e180=a4_0x3c1d();return a4_0x488c=function(_0x3dfb47,_0x5d77ab){_0x3dfb47=_0x3dfb47-0x17d;let _0x3c1d07=_0x16e180[_0x3dfb47];return _0x3c1d07;},a4_0x488c(_0x42afb7,_0x530fcc);}function send(_0x67c869,_0x432208,_0xf77c5c={}){const _0x369711=a4_0xf5f176;if(!pythonProcess||!pythonProcess[_0x369711(0x1b6)][_0x369711(0x185)])return;const _0x36ce78=JSON['stringify']({'command':_0x432208,..._0xf77c5c});try{pythonProcess['stdin']['write'](_0x36ce78+'\x0a');}catch(_0x3aafa1){}}function handleResult(_0x1a547d,_0x4d72f8){const _0x4fec74=a4_0xf5f176;if(_0x4d72f8[_0x4fec74(0x1a3)]===_0x4fec74(0x1d8))_0x1a547d['log']['debug'](_0x4fec74(0x189));else{if(_0x4d72f8['type']==='SECURITY_RESULT'){const {anomaly_score:_0xdc5330,is_anomaly:_0x2e5bdc,threshold:_0x15a5b1,explanation:_0x531223}=_0x4d72f8[_0x4fec74(0x1cf)];_0x1a547d[_0x4fec74(0x199)](_0x4fec74(0x1bd),{'val':_0xdc5330,'ack':!![]}),_0x1a547d[_0x4fec74(0x199)]('analysis.security.lastCheck',{'val':new Date()[_0x4fec74(0x19a)](),'ack':!![]});if(_0x15a5b1)_0x1a547d['setStateAsync']('analysis.security.currentThreshold',{'val':_0x15a5b1,'ack':!![]});if(_0x2e5bdc){let _0x4bcdb5=_0x4fec74(0x17d)+_0xdc5330[_0x4fec74(0x1c4)](0x4)+')';if(_0x531223&&_0x531223!==_0x4fec74(0x19d))_0x4bcdb5+=_0x4fec74(0x1b7)+_0x531223;_0x1a547d[_0x4fec74(0x199)](_0x4fec74(0x1ac),{'val':!![],'ack':!![]}),_0x1a547d[_0x4fec74(0x199)]('analysis.alertReason',{'val':_0x4bcdb5,'ack':!![]}),setup[_0x4fec74(0x193)](_0x1a547d,_0x4fec74(0x1da)+_0x4bcdb5,![],!![]);}}else{if(_0x4d72f8[_0x4fec74(0x1a3)]===_0x4fec74(0x1ce)){const _0x477345=_0x4d72f8['payload'][_0x4fec74(0x190)]||'',_0x19aa8c=_0x4d72f8[_0x4fec74(0x1cf)]['threshold'],_0x39fe7e=_0x4d72f8[_0x4fec74(0x1cf)][_0x4fec74(0x1d9)]?_0x4fec74(0x1b4)+new Date()[_0x4fec74(0x1d7)]()+'\x20('+_0x477345+')':_0x4fec74(0x18e)+_0x4d72f8['payload'][_0x4fec74(0x1af)];_0x1a547d[_0x4fec74(0x199)]('analysis.training.status',{'val':_0x39fe7e,'ack':!![]});if(_0x4d72f8[_0x4fec74(0x1cf)][_0x4fec74(0x1d9)]&&_0x19aa8c)_0x1a547d['setStateAsync'](_0x4fec74(0x1b1),{'val':_0x19aa8c,'ack':!![]});}else{if(_0x4d72f8['type']==='ENERGY_TRAIN_RESULT'){if(_0x4d72f8[_0x4fec74(0x1cf)][_0x4fec74(0x1d9)])try{const _0x26e7c0=JSON[_0x4fec74(0x18b)](_0x4d72f8[_0x4fec74(0x1cf)][_0x4fec74(0x190)]);if(_0x26e7c0[_0x4fec74(0x180)])_0x1a547d[_0x4fec74(0x199)](_0x4fec74(0x18c),{'val':JSON[_0x4fec74(0x1aa)](_0x26e7c0['insulation']),'ack':!![]});if(_0x26e7c0[_0x4fec74(0x18a)])_0x1a547d[_0x4fec74(0x199)](_0x4fec74(0x1ba),{'val':JSON[_0x4fec74(0x1aa)](_0x26e7c0[_0x4fec74(0x18a)]),'ack':!![]});}catch(_0x17409e){}}else{if(_0x4d72f8[_0x4fec74(0x1a3)]===_0x4fec74(0x19f)){if(_0x4d72f8[_0x4fec74(0x1cf)][_0x4fec74(0x1d9)])_0x1a547d[_0x4fec74(0x1c2)][_0x4fec74(0x1c7)](_0x4fec74(0x1be));}else{if(_0x4d72f8[_0x4fec74(0x1a3)]===_0x4fec74(0x1a0))_0x1a547d[_0x4fec74(0x199)](_0x4fec74(0x1ca),{'val':new Date()[_0x4fec74(0x19a)](),'ack':!![]}),_0x1a547d['setStateAsync'](_0x4fec74(0x1d4),{'val':_0x4d72f8[_0x4fec74(0x1cf)][_0x4fec74(0x187)],'ack':!![]});else{if(_0x4d72f8[_0x4fec74(0x1a3)]===_0x4fec74(0x1b3)){const {speed_trend:_0x3094b7}=_0x4d72f8[_0x4fec74(0x1cf)];if(_0x3094b7!==undefined)_0x1a547d[_0x4fec74(0x199)](_0x4fec74(0x1a2),{'val':_0x3094b7,'ack':!![]});}else{if(_0x4d72f8[_0x4fec74(0x1a3)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x5bd691}=_0x4d72f8['payload'];if(_0x5bd691)_0x1a547d[_0x4fec74(0x199)]('analysis.energy.forecast',{'val':JSON[_0x4fec74(0x1aa)](_0x5bd691),'ack':!![]});}else{if(_0x4d72f8[_0x4fec74(0x1a3)]===_0x4fec74(0x184)){const {times:_0x26a8c6}=_0x4d72f8[_0x4fec74(0x1cf)];if(_0x26a8c6)_0x1a547d[_0x4fec74(0x199)](_0x4fec74(0x1bc),{'val':JSON[_0x4fec74(0x1aa)](_0x26a8c6),'ack':!![]});}else{if(_0x4d72f8['type']===_0x4fec74(0x188)){const {forecast:_0x2132b8}=_0x4d72f8['payload'];if(_0x2132b8)_0x1a547d[_0x4fec74(0x199)]('analysis.energy.pinnForecast',{'val':JSON[_0x4fec74(0x1aa)](_0x2132b8),'ack':!![]});}else{if(_0x4d72f8[_0x4fec74(0x1a3)]===_0x4fec74(0x1d6)){const {alerts:_0x199dfc}=_0x4d72f8['payload'];if(_0x199dfc)_0x1a547d['setStateAsync'](_0x4fec74(0x1b9),{'val':JSON[_0x4fec74(0x1aa)](_0x199dfc),'ack':!![]});}else{if(_0x4d72f8['type']===_0x4fec74(0x183)){const {proposals:_0x1e3750}=_0x4d72f8[_0x4fec74(0x1cf)];_0x1a547d[_0x4fec74(0x1ad)](_0x4fec74(0x1ae),(_0x74fd95,_0xd9d6cf)=>{const _0x1cdaba=_0x4fec74;_0xd9d6cf&&_0xd9d6cf[_0x1cdaba(0x19e)]===!![]&&_0x1e3750&&_0x1e3750['length']>0x0&&automation[_0x1cdaba(0x1d1)](_0x1a547d,_0x1e3750);});}else{if(_0x4d72f8[_0x4fec74(0x1a3)]==='SIGNAL_RESULT'){const {room:_0x26c78d,propagation:_0x537cab}=_0x4d72f8[_0x4fec74(0x1cf)];let _0x50096d='Unknown',_0x3ca3ea=0x0;if(_0x537cab){const _0x3d01fa=Object[_0x4fec74(0x1a7)](_0x537cab);_0x3d01fa[_0x4fec74(0x18f)]>0x0&&(_0x50096d=_0x3d01fa[0x0][0x0],_0x3ca3ea=_0x3d01fa[0x0][0x1]);}_0x1a547d[_0x4fec74(0x199)](_0x4fec74(0x1cc),{'val':_0x50096d,'ack':!![]}),_0x1a547d[_0x4fec74(0x199)](_0x4fec74(0x182),{'val':_0x3ca3ea,'ack':!![]}),automation[_0x4fec74(0x197)](_0x1a547d,_0x50096d,_0x3ca3ea);}else{if(_0x4d72f8[_0x4fec74(0x1a3)]===_0x4fec74(0x1a8)){const {probabilities:_0x24d80f}=_0x4d72f8['payload'];if(_0x24d80f){_0x1a547d[_0x4fec74(0x199)](_0x4fec74(0x192),{'val':JSON[_0x4fec74(0x1aa)](_0x24d80f),'ack':!![]});const _0x7d2ed7=Object[_0x4fec74(0x1d3)](_0x24d80f);if(_0x7d2ed7[_0x4fec74(0x18f)]>0x0){const _0x3fe80a=_0x7d2ed7[0x0],_0x487845=_0x24d80f[_0x3fe80a];_0x1a547d[_0x4fec74(0x199)](_0x4fec74(0x1a5),{'val':_0x3fe80a,'ack':!![]}),_0x1a547d[_0x4fec74(0x199)](_0x4fec74(0x18d),{'val':_0x487845,'ack':!![]});}}}else{if(_0x4d72f8[_0x4fec74(0x1a3)]==='COMFORT_RESULT'){const {patterns:_0x215839}=_0x4d72f8[_0x4fec74(0x1cf)];if(_0x215839&&_0x215839[_0x4fec74(0x18f)]>0x0)_0x1a547d[_0x4fec74(0x199)](_0x4fec74(0x1c1),{'val':JSON['stringify'](_0x215839),'ack':!![]});}}}}}}}}}}}}}}}}function startService(_0x2aed1f,_0x457e1b){const _0x47c3b8=a4_0xf5f176;let _0x7a660b=_0x47c3b8(0x1b0);if(fs[_0x47c3b8(0x1cb)](_0x457e1b))_0x7a660b=_0x457e1b;try{const _0x4dd655=path['join'](__dirname,'..',_0x47c3b8(0x1b8),_0x47c3b8(0x1d5));pythonProcess=spawn(_0x7a660b,[_0x4dd655]),pythonProcess[_0x47c3b8(0x19b)]['on'](_0x47c3b8(0x1bf),_0x179458=>{const _0x307cb7=_0x47c3b8,_0x382d5e=_0x179458[_0x307cb7(0x1c8)]()[_0x307cb7(0x194)]('\x0a');_0x382d5e['forEach'](_0x176b8b=>{const _0x49469d=_0x307cb7,_0x2112df=_0x176b8b[_0x49469d(0x1a6)]();if(!_0x2112df)return;if(_0x2112df['startsWith'](_0x49469d(0x19c)))_0x2aed1f[_0x49469d(0x1c2)]['debug'](_0x49469d(0x1a9)+_0x2112df[_0x49469d(0x1dc)](0x5)['trim']());else{if(_0x2112df['startsWith'](_0x49469d(0x195)))try{const _0x3aebdd=JSON['parse'](_0x2112df[_0x49469d(0x1dc)](0x8)[_0x49469d(0x1a6)]());handleResult(_0x2aed1f,_0x3aebdd);}catch(_0x5a7232){}}});}),pythonProcess['on']('close',_0x185c8d=>{pythonProcess=null;}),_0x2aed1f[_0x47c3b8(0x191)]=(_0x30b9cc,_0x535da4)=>send(_0x2aed1f,_0x30b9cc,_0x535da4);}catch(_0x331618){_0x2aed1f['log'][_0x47c3b8(0x1a1)](_0x47c3b8(0x181)+_0x331618['message']);}}function stopService(_0x164708){const _0x55a0ab=a4_0xf5f176;if(pythonProcess){try{pythonProcess[_0x55a0ab(0x17e)]();}catch(_0x561063){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};