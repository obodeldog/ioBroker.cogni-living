const a4_0x3a844c=a4_0x5ab0;(function(_0x1e8ad4,_0x24f46b){const _0x9e270d=a4_0x5ab0,_0xaeb2ea=_0x1e8ad4();while(!![]){try{const _0x1e0220=parseInt(_0x9e270d(0xb1))/0x1+parseInt(_0x9e270d(0x8d))/0x2+parseInt(_0x9e270d(0x74))/0x3+parseInt(_0x9e270d(0xb8))/0x4*(parseInt(_0x9e270d(0x8c))/0x5)+parseInt(_0x9e270d(0x7c))/0x6*(-parseInt(_0x9e270d(0xa1))/0x7)+-parseInt(_0x9e270d(0x95))/0x8+-parseInt(_0x9e270d(0x9d))/0x9;if(_0x1e0220===_0x24f46b)break;else _0xaeb2ea['push'](_0xaeb2ea['shift']());}catch(_0x4c3ee0){_0xaeb2ea['push'](_0xaeb2ea['shift']());}}}(a4_0x3c83,0xc75fa));const a4_0x28eefc=(function(){let _0x464438=!![];return function(_0x139c56,_0x2a10d5){const _0x52d7f6=_0x464438?function(){const _0x243519=a4_0x5ab0;if(_0x2a10d5){const _0xd0f9fd=_0x2a10d5[_0x243519(0xc6)](_0x139c56,arguments);return _0x2a10d5=null,_0xd0f9fd;}}:function(){};return _0x464438=![],_0x52d7f6;};}()),a4_0x229308=a4_0x28eefc(this,function(){const _0x2be8df=a4_0x5ab0;return a4_0x229308['toString']()[_0x2be8df(0x72)](_0x2be8df(0x90))[_0x2be8df(0x7f)]()[_0x2be8df(0xaf)](a4_0x229308)[_0x2be8df(0x72)](_0x2be8df(0x90));});function a4_0x3c83(){const _0x243f2e=['1590501IYjSIu','VENTILATION_ALERT','ðŸ\x20Python\x20Pong','Success:\x20','TRACKER_RESULT','is_anomaly','trim','16ZJiHYM','applyEnergySavings','analysis.health.lastCheck','stdin','[LOG]','child_process','toISOString','WARMUP_RESULT','analysis.prediction.trackerState','exports','COMFORT_RESULT','ENERGY_OPTIMIZE_RESULT','sendNotification','stdout','apply','write','./automation','join','âš ï¸\x20SECURITY\x20ALARM:\x20','analysis.security.lastScore','search','handlePrediction','2256591rOfKpF','insulation','reason','./setup','PONG','kill','stringify','forEach','3391698LNnmqN','ENERGY_TRAIN_RESULT','entries','toString','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','[RESULT]','path','PINN_PREDICT_RESULT','analysis.energy.warmupTimes','Unknown','SECURITY_RESULT','keys','debug','service.py','writable','analysis.energy.forecast','1667875lJqUYP','2797652tyllNv','startsWith','Failed:\x20','(((.+)+)+)+$','analysis.energy.warmupDetails','length','setStateAsync','info','12353480GRsnWF','payload','substring','analysis.prediction.trackerConfidence','success','heating','Error\x20launching\x20Python:\x20','analysis.alertReason','19347498yDtZaj','log','type','âœ…\x20HEALTH\x20TRAINED.','7LiZqzS','analysis.prediction.trackerTopRoom','\x0aGrund:\x20','toLocaleTimeString','[PYTHON]\x20','error','python3','getState','analysis.prediction.nextRoom','message','analysis.isAlert','analysis.security.currentThreshold','SIGNAL_RESULT','analysis.training.status','constructor','analysis.security.lastCheck'];a4_0x3c83=function(){return _0x243f2e;};return a4_0x3c83();}a4_0x229308();'use strict';const {spawn}=require(a4_0x3a844c(0xbd)),path=require(a4_0x3a844c(0x82)),fs=require('fs'),setup=require(a4_0x3a844c(0x77)),automation=require(a4_0x3a844c(0xc8));let pythonProcess=null;function send(_0x27d002,_0x55433a,_0x4772b3={}){const _0xf56ad9=a4_0x3a844c;if(!pythonProcess||!pythonProcess['stdin'][_0xf56ad9(0x8a)])return;const _0x5a6d66=JSON['stringify']({'command':_0x55433a,..._0x4772b3});try{pythonProcess[_0xf56ad9(0xbb)][_0xf56ad9(0xc7)](_0x5a6d66+'\x0a');}catch(_0x7fe477){}}function handleResult(_0x365859,_0x2aa2b3){const _0x3f6992=a4_0x3a844c;if(_0x2aa2b3[_0x3f6992(0x9f)]===_0x3f6992(0x78))_0x365859[_0x3f6992(0x9e)][_0x3f6992(0x88)](_0x3f6992(0xb3));else{if(_0x2aa2b3[_0x3f6992(0x9f)]===_0x3f6992(0x86)){const {anomaly_score:_0x5d27f1,is_anomaly:_0x3a7a93,threshold:_0x313fa2,explanation:_0xb838d1}=_0x2aa2b3[_0x3f6992(0x96)];_0x365859[_0x3f6992(0x93)](_0x3f6992(0xcb),{'val':_0x5d27f1,'ack':!![]}),_0x365859['setStateAsync'](_0x3f6992(0xb0),{'val':new Date()[_0x3f6992(0xbe)](),'ack':!![]});if(_0x313fa2)_0x365859[_0x3f6992(0x93)]('analysis.security.currentThreshold',{'val':_0x313fa2,'ack':!![]});if(_0x3a7a93){let _0x2dbeb5=_0x3f6992(0x80)+_0x5d27f1['toFixed'](0x4)+')';if(_0xb838d1&&_0xb838d1!==_0x3f6992(0x85))_0x2dbeb5+=_0x3f6992(0xa3)+_0xb838d1;_0x365859[_0x3f6992(0x93)](_0x3f6992(0xab),{'val':!![],'ack':!![]}),_0x365859[_0x3f6992(0x93)](_0x3f6992(0x9c),{'val':_0x2dbeb5,'ack':!![]}),setup[_0x3f6992(0xc4)](_0x365859,_0x3f6992(0xca)+_0x2dbeb5,![],!![]);}}else{if(_0x2aa2b3['type']==='TRAINING_COMPLETE'){const _0xf4c115=_0x2aa2b3['payload']['details']||'',_0x5b2214=_0x2aa2b3[_0x3f6992(0x96)]['threshold'],_0xedc7a=_0x2aa2b3['payload'][_0x3f6992(0x99)]?_0x3f6992(0xb4)+new Date()[_0x3f6992(0xa4)]()+'\x20('+_0xf4c115+')':_0x3f6992(0x8f)+_0x2aa2b3['payload'][_0x3f6992(0x76)];_0x365859['setStateAsync'](_0x3f6992(0xae),{'val':_0xedc7a,'ack':!![]});if(_0x2aa2b3[_0x3f6992(0x96)]['success']&&_0x5b2214)_0x365859[_0x3f6992(0x93)](_0x3f6992(0xac),{'val':_0x5b2214,'ack':!![]});}else{if(_0x2aa2b3[_0x3f6992(0x9f)]===_0x3f6992(0x7d)){if(_0x2aa2b3[_0x3f6992(0x96)][_0x3f6992(0x99)])try{const _0x4868e4=JSON['parse'](_0x2aa2b3[_0x3f6992(0x96)]['details']);if(_0x4868e4['insulation'])_0x365859[_0x3f6992(0x93)]('analysis.energy.insulationScore',{'val':JSON[_0x3f6992(0x7a)](_0x4868e4[_0x3f6992(0x75)]),'ack':!![]});if(_0x4868e4['heating'])_0x365859[_0x3f6992(0x93)]('analysis.energy.heatingScore',{'val':JSON['stringify'](_0x4868e4[_0x3f6992(0x9a)]),'ack':!![]});}catch(_0x230d1e){}}else{if(_0x2aa2b3[_0x3f6992(0x9f)]==='HEALTH_TRAIN_RESULT'){if(_0x2aa2b3[_0x3f6992(0x96)][_0x3f6992(0x99)])_0x365859['log'][_0x3f6992(0x94)](_0x3f6992(0xa0));}else{if(_0x2aa2b3[_0x3f6992(0x9f)]==='HEALTH_RESULT')_0x365859['setStateAsync'](_0x3f6992(0xba),{'val':new Date()[_0x3f6992(0xbe)](),'ack':!![]}),_0x365859[_0x3f6992(0x93)]('analysis.health.isAnomaly',{'val':_0x2aa2b3[_0x3f6992(0x96)][_0x3f6992(0xb6)],'ack':!![]});else{if(_0x2aa2b3[_0x3f6992(0x9f)]==='GAIT_RESULT'){const {speed_trend:_0x3b4050}=_0x2aa2b3[_0x3f6992(0x96)];if(_0x3b4050!==undefined)_0x365859[_0x3f6992(0x93)]('analysis.health.gaitSpeed',{'val':_0x3b4050,'ack':!![]});}else{if(_0x2aa2b3[_0x3f6992(0x9f)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x2bef1a}=_0x2aa2b3[_0x3f6992(0x96)];if(_0x2bef1a)_0x365859[_0x3f6992(0x93)](_0x3f6992(0x8b),{'val':JSON['stringify'](_0x2bef1a),'ack':!![]});}else{if(_0x2aa2b3[_0x3f6992(0x9f)]===_0x3f6992(0xbf)){const {times:_0x4a7253,sources:_0x2db28c,details:_0x524466}=_0x2aa2b3[_0x3f6992(0x96)];if(_0x4a7253)_0x365859['setStateAsync'](_0x3f6992(0x84),{'val':JSON[_0x3f6992(0x7a)](_0x4a7253),'ack':!![]});if(_0x2db28c)_0x365859[_0x3f6992(0x93)]('analysis.energy.warmupSources',{'val':JSON[_0x3f6992(0x7a)](_0x2db28c),'ack':!![]});if(_0x524466)_0x365859[_0x3f6992(0x93)](_0x3f6992(0x91),{'val':JSON[_0x3f6992(0x7a)](_0x524466),'ack':!![]});}else{if(_0x2aa2b3[_0x3f6992(0x9f)]===_0x3f6992(0x83)){const {forecast:_0x4c6b29}=_0x2aa2b3[_0x3f6992(0x96)];if(_0x4c6b29)_0x365859[_0x3f6992(0x93)]('analysis.energy.pinnForecast',{'val':JSON[_0x3f6992(0x7a)](_0x4c6b29),'ack':!![]});}else{if(_0x2aa2b3[_0x3f6992(0x9f)]===_0x3f6992(0xb2)){const {alerts:_0x5e9cd2}=_0x2aa2b3[_0x3f6992(0x96)];if(_0x5e9cd2)_0x365859[_0x3f6992(0x93)]('analysis.energy.ventilationAlerts',{'val':JSON[_0x3f6992(0x7a)](_0x5e9cd2),'ack':!![]});}else{if(_0x2aa2b3[_0x3f6992(0x9f)]===_0x3f6992(0xc3)){const {proposals:_0x33aae7}=_0x2aa2b3[_0x3f6992(0x96)];_0x365859[_0x3f6992(0xa8)]('analysis.energy.mpcActive',(_0x283f27,_0x194e26)=>{const _0x4a5bca=_0x3f6992;_0x194e26&&_0x194e26['val']===!![]&&_0x33aae7&&_0x33aae7[_0x4a5bca(0x92)]>0x0&&automation[_0x4a5bca(0xb9)](_0x365859,_0x33aae7);});}else{if(_0x2aa2b3[_0x3f6992(0x9f)]===_0x3f6992(0xad)){const {room:_0x22f9d2,propagation:_0x35f700}=_0x2aa2b3[_0x3f6992(0x96)];let _0x396490='Unknown',_0x59838f=0x0;if(_0x35f700){const _0x369969=Object[_0x3f6992(0x7e)](_0x35f700);_0x369969[_0x3f6992(0x92)]>0x0&&(_0x396490=_0x369969[0x0][0x0],_0x59838f=_0x369969[0x0][0x1]);}_0x365859[_0x3f6992(0x93)](_0x3f6992(0xa9),{'val':_0x396490,'ack':!![]}),_0x365859['setStateAsync']('analysis.prediction.confidence',{'val':_0x59838f,'ack':!![]}),automation[_0x3f6992(0x73)](_0x365859,_0x396490,_0x59838f);}else{if(_0x2aa2b3['type']===_0x3f6992(0xb5)){const {probabilities:_0x23e705}=_0x2aa2b3[_0x3f6992(0x96)];if(_0x23e705){_0x365859['setStateAsync'](_0x3f6992(0xc0),{'val':JSON[_0x3f6992(0x7a)](_0x23e705),'ack':!![]});const _0x2e60c2=Object[_0x3f6992(0x87)](_0x23e705);if(_0x2e60c2[_0x3f6992(0x92)]>0x0){const _0x397ccd=_0x2e60c2[0x0],_0x39b581=_0x23e705[_0x397ccd];_0x365859[_0x3f6992(0x93)](_0x3f6992(0xa2),{'val':_0x397ccd,'ack':!![]}),_0x365859[_0x3f6992(0x93)](_0x3f6992(0x98),{'val':_0x39b581,'ack':!![]});}}}else{if(_0x2aa2b3[_0x3f6992(0x9f)]===_0x3f6992(0xc2)){const {patterns:_0x2026d7}=_0x2aa2b3[_0x3f6992(0x96)];if(_0x2026d7&&_0x2026d7['length']>0x0)_0x365859[_0x3f6992(0x93)]('analysis.automation.detectedPatterns',{'val':JSON['stringify'](_0x2026d7),'ack':!![]});}}}}}}}}}}}}}}}}function startService(_0x360288,_0x2ae257){const _0x1b7ab4=a4_0x3a844c;let _0x21efaf=_0x1b7ab4(0xa7);if(fs['existsSync'](_0x2ae257))_0x21efaf=_0x2ae257;try{const _0x37edea=path[_0x1b7ab4(0xc9)](__dirname,'..','python_service',_0x1b7ab4(0x89));pythonProcess=spawn(_0x21efaf,[_0x37edea]),pythonProcess[_0x1b7ab4(0xc5)]['on']('data',_0x432b68=>{const _0x250235=_0x1b7ab4,_0x339c3e=_0x432b68['toString']()['split']('\x0a');_0x339c3e[_0x250235(0x7b)](_0x4434df=>{const _0x4b4271=_0x250235,_0x538d9b=_0x4434df['trim']();if(!_0x538d9b)return;if(_0x538d9b[_0x4b4271(0x8e)](_0x4b4271(0xbc)))_0x360288[_0x4b4271(0x9e)][_0x4b4271(0x88)](_0x4b4271(0xa5)+_0x538d9b['substring'](0x5)['trim']());else{if(_0x538d9b[_0x4b4271(0x8e)](_0x4b4271(0x81)))try{const _0x47a124=JSON['parse'](_0x538d9b[_0x4b4271(0x97)](0x8)[_0x4b4271(0xb7)]());handleResult(_0x360288,_0x47a124);}catch(_0x324015){}}});}),pythonProcess['on']('close',_0x43a647=>{pythonProcess=null;}),_0x360288['sendToPythonWrapper']=(_0x17cb00,_0x4bf590)=>send(_0x360288,_0x17cb00,_0x4bf590);}catch(_0x6790c){_0x360288[_0x1b7ab4(0x9e)][_0x1b7ab4(0xa6)](_0x1b7ab4(0x9b)+_0x6790c[_0x1b7ab4(0xaa)]);}}function stopService(_0x4375fc){const _0x5a85aa=a4_0x3a844c;if(pythonProcess){try{pythonProcess[_0x5a85aa(0x79)]();}catch(_0x393439){}pythonProcess=null;}}function a4_0x5ab0(_0x189060,_0x7521b7){const _0x2c0175=a4_0x3c83();return a4_0x5ab0=function(_0x229308,_0x28eefc){_0x229308=_0x229308-0x72;let _0x3c83d5=_0x2c0175[_0x229308];return _0x3c83d5;},a4_0x5ab0(_0x189060,_0x7521b7);}module[a4_0x3a844c(0xc1)]={'startService':startService,'stopService':stopService,'send':send};