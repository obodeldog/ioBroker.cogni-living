function a4_0x4c0a(_0x99c71c,_0x1a7479){const _0x35629a=a4_0x231e();return a4_0x4c0a=function(_0x44ab86,_0x45615a){_0x44ab86=_0x44ab86-0x108;let _0x231e3d=_0x35629a[_0x44ab86];return _0x231e3d;},a4_0x4c0a(_0x99c71c,_0x1a7479);}const a4_0x1a9db6=a4_0x4c0a;(function(_0x22a3a9,_0x16fe44){const _0x846dfd=a4_0x4c0a,_0x33cdf2=_0x22a3a9();while(!![]){try{const _0x32d088=parseInt(_0x846dfd(0x147))/0x1+-parseInt(_0x846dfd(0x13e))/0x2+parseInt(_0x846dfd(0x152))/0x3+parseInt(_0x846dfd(0x156))/0x4+parseInt(_0x846dfd(0x163))/0x5*(parseInt(_0x846dfd(0x13f))/0x6)+-parseInt(_0x846dfd(0x14a))/0x7*(-parseInt(_0x846dfd(0x120))/0x8)+-parseInt(_0x846dfd(0x167))/0x9;if(_0x32d088===_0x16fe44)break;else _0x33cdf2['push'](_0x33cdf2['shift']());}catch(_0x45dbc0){_0x33cdf2['push'](_0x33cdf2['shift']());}}}(a4_0x231e,0x1962e));const a4_0x45615a=(function(){let _0x461d12=!![];return function(_0xc4bc62,_0x2a1abb){const _0x1fb49b=_0x461d12?function(){const _0x16a129=a4_0x4c0a;if(_0x2a1abb){const _0x1497cd=_0x2a1abb[_0x16a129(0x111)](_0xc4bc62,arguments);return _0x2a1abb=null,_0x1497cd;}}:function(){};return _0x461d12=![],_0x1fb49b;};}()),a4_0x44ab86=a4_0x45615a(this,function(){const _0x268148=a4_0x4c0a;return a4_0x44ab86[_0x268148(0x112)]()[_0x268148(0x126)](_0x268148(0x116))[_0x268148(0x112)]()['constructor'](a4_0x44ab86)['search']('(((.+)+)+)+$');});a4_0x44ab86();'use strict';const {spawn}=require(a4_0x1a9db6(0x121)),path=require(a4_0x1a9db6(0x15c)),fs=require('fs'),setup=require(a4_0x1a9db6(0x155)),automation=require('./automation');let pythonProcess=null;function send(_0x617c90,_0x27750d,_0x53171a={}){const _0x143612=a4_0x1a9db6;if(!pythonProcess||!pythonProcess[_0x143612(0x15f)][_0x143612(0x10c)])return;const _0x29a7b1=JSON[_0x143612(0x157)]({'command':_0x27750d,..._0x53171a});try{pythonProcess[_0x143612(0x15f)]['write'](_0x29a7b1+'\x0a');}catch(_0x89202f){}}function handleResult(_0x38fc9b,_0x4b6bd3){const _0x6ef841=a4_0x1a9db6;if(_0x4b6bd3[_0x6ef841(0x118)]==='PONG')_0x38fc9b['log'][_0x6ef841(0x13b)](_0x6ef841(0x114));else{if(_0x4b6bd3[_0x6ef841(0x118)]===_0x6ef841(0x10f)){const {anomaly_score:_0x2a9e51,is_anomaly:_0x4b0b15,threshold:_0x5281b3,explanation:_0x278982}=_0x4b6bd3[_0x6ef841(0x15b)];_0x38fc9b[_0x6ef841(0x119)](_0x6ef841(0x158),{'val':_0x2a9e51,'ack':!![]}),_0x38fc9b[_0x6ef841(0x119)](_0x6ef841(0x151),{'val':new Date()[_0x6ef841(0x148)](),'ack':!![]});if(_0x5281b3)_0x38fc9b['setStateAsync'](_0x6ef841(0x113),{'val':_0x5281b3,'ack':!![]});if(_0x4b0b15){let _0x5610b7=_0x6ef841(0x128)+_0x2a9e51[_0x6ef841(0x10b)](0x4)+')';if(_0x278982&&_0x278982!==_0x6ef841(0x109))_0x5610b7+=_0x6ef841(0x12e)+_0x278982;_0x38fc9b['setStateAsync'](_0x6ef841(0x14f),{'val':!![],'ack':!![]}),_0x38fc9b[_0x6ef841(0x119)](_0x6ef841(0x13a),{'val':_0x5610b7,'ack':!![]}),setup[_0x6ef841(0x134)](_0x38fc9b,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x5610b7,![],!![]);}}else{if(_0x4b6bd3[_0x6ef841(0x118)]==='TRAINING_COMPLETE'){const _0x5038c0=_0x4b6bd3['payload'][_0x6ef841(0x14b)]||'',_0x4b2483=_0x4b6bd3[_0x6ef841(0x15b)][_0x6ef841(0x142)],_0x2ad100=_0x4b6bd3[_0x6ef841(0x15b)]['success']?'Success:\x20'+new Date()[_0x6ef841(0x133)]()+'\x20('+_0x5038c0+')':'Failed:\x20'+_0x4b6bd3[_0x6ef841(0x15b)][_0x6ef841(0x12c)];_0x38fc9b[_0x6ef841(0x119)](_0x6ef841(0x10e),{'val':_0x2ad100,'ack':!![]});if(_0x4b6bd3[_0x6ef841(0x15b)][_0x6ef841(0x15a)]&&_0x4b2483)_0x38fc9b[_0x6ef841(0x119)](_0x6ef841(0x113),{'val':_0x4b2483,'ack':!![]});}else{if(_0x4b6bd3['type']===_0x6ef841(0x146)){if(_0x4b6bd3[_0x6ef841(0x15b)]['success'])try{const _0x5214b5=JSON[_0x6ef841(0x124)](_0x4b6bd3[_0x6ef841(0x15b)][_0x6ef841(0x14b)]);if(_0x5214b5[_0x6ef841(0x130)])_0x38fc9b[_0x6ef841(0x119)](_0x6ef841(0x161),{'val':JSON[_0x6ef841(0x157)](_0x5214b5[_0x6ef841(0x130)]),'ack':!![]});if(_0x5214b5[_0x6ef841(0x13d)])_0x38fc9b[_0x6ef841(0x119)](_0x6ef841(0x141),{'val':JSON[_0x6ef841(0x157)](_0x5214b5['heating']),'ack':!![]});}catch(_0x469b71){}}else{if(_0x4b6bd3[_0x6ef841(0x118)]===_0x6ef841(0x11e)){if(_0x4b6bd3[_0x6ef841(0x15b)][_0x6ef841(0x15a)])_0x38fc9b['log'][_0x6ef841(0x12b)](_0x6ef841(0x131));}else{if(_0x4b6bd3['type']===_0x6ef841(0x14d))_0x38fc9b[_0x6ef841(0x119)]('analysis.health.lastCheck',{'val':new Date()[_0x6ef841(0x148)](),'ack':!![]}),_0x38fc9b[_0x6ef841(0x119)](_0x6ef841(0x14e),{'val':_0x4b6bd3[_0x6ef841(0x15b)][_0x6ef841(0x110)],'ack':!![]});else{if(_0x4b6bd3[_0x6ef841(0x118)]===_0x6ef841(0x162)){const {speed_trend:_0x476a38}=_0x4b6bd3['payload'];if(_0x476a38!==undefined)_0x38fc9b[_0x6ef841(0x119)](_0x6ef841(0x129),{'val':_0x476a38,'ack':!![]});}else{if(_0x4b6bd3[_0x6ef841(0x118)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x1d7341}=_0x4b6bd3['payload'];if(_0x1d7341)_0x38fc9b[_0x6ef841(0x119)]('analysis.energy.forecast',{'val':JSON[_0x6ef841(0x157)](_0x1d7341),'ack':!![]});}else{if(_0x4b6bd3[_0x6ef841(0x118)]===_0x6ef841(0x125)){const {times:_0x20e6fc,sources:_0x16daf8,details:_0x3bf341}=_0x4b6bd3['payload'];if(_0x20e6fc)_0x38fc9b[_0x6ef841(0x119)](_0x6ef841(0x139),{'val':JSON[_0x6ef841(0x157)](_0x20e6fc),'ack':!![]});if(_0x16daf8)_0x38fc9b[_0x6ef841(0x119)](_0x6ef841(0x117),{'val':JSON['stringify'](_0x16daf8),'ack':!![]});if(_0x3bf341)_0x38fc9b['setStateAsync']('analysis.energy.warmupDetails',{'val':JSON['stringify'](_0x3bf341),'ack':!![]});}else{if(_0x4b6bd3['type']===_0x6ef841(0x12a)){const {forecast:_0x5d91e6}=_0x4b6bd3[_0x6ef841(0x15b)];if(_0x5d91e6)_0x38fc9b[_0x6ef841(0x119)](_0x6ef841(0x140),{'val':JSON['stringify'](_0x5d91e6),'ack':!![]});}else{if(_0x4b6bd3[_0x6ef841(0x118)]===_0x6ef841(0x154)){const {alerts:_0x3b9d6c}=_0x4b6bd3[_0x6ef841(0x15b)];if(_0x3b9d6c)_0x38fc9b[_0x6ef841(0x119)]('analysis.energy.ventilationAlerts',{'val':JSON['stringify'](_0x3b9d6c),'ack':!![]});}else{if(_0x4b6bd3[_0x6ef841(0x118)]==='ENERGY_OPTIMIZE_RESULT'){const {proposals:_0x2d7cf7}=_0x4b6bd3[_0x6ef841(0x15b)];_0x38fc9b[_0x6ef841(0x11f)](_0x6ef841(0x11b),(_0xfe867a,_0xd46213)=>{const _0x2832c7=_0x6ef841;_0xd46213&&_0xd46213[_0x2832c7(0x12d)]===!![]&&_0x2d7cf7&&_0x2d7cf7[_0x2832c7(0x127)]>0x0&&automation[_0x2832c7(0x159)](_0x38fc9b,_0x2d7cf7);});}else{if(_0x4b6bd3[_0x6ef841(0x118)]===_0x6ef841(0x137)){const {room:_0x577471,propagation:_0x2bb6e5}=_0x4b6bd3[_0x6ef841(0x15b)];let _0xc95be4='Unknown',_0x55f4a8=0x0;if(_0x2bb6e5){const _0xc25938=Object[_0x6ef841(0x143)](_0x2bb6e5);_0xc25938[_0x6ef841(0x127)]>0x0&&(_0xc95be4=_0xc25938[0x0][0x0],_0x55f4a8=_0xc25938[0x0][0x1]);}_0x38fc9b[_0x6ef841(0x119)](_0x6ef841(0x136),{'val':_0xc95be4,'ack':!![]}),_0x38fc9b[_0x6ef841(0x119)](_0x6ef841(0x164),{'val':_0x55f4a8,'ack':!![]}),automation[_0x6ef841(0x115)](_0x38fc9b,_0xc95be4,_0x55f4a8);}else{if(_0x4b6bd3[_0x6ef841(0x118)]===_0x6ef841(0x150)){const {probabilities:_0x5e1e08}=_0x4b6bd3[_0x6ef841(0x15b)];if(_0x5e1e08){_0x38fc9b[_0x6ef841(0x119)](_0x6ef841(0x108),{'val':JSON[_0x6ef841(0x157)](_0x5e1e08),'ack':!![]});const _0x10da05=Object[_0x6ef841(0x166)](_0x5e1e08);if(_0x10da05[_0x6ef841(0x127)]>0x0){const _0x56e725=_0x10da05[0x0],_0x3da394=_0x5e1e08[_0x56e725];_0x38fc9b[_0x6ef841(0x119)](_0x6ef841(0x144),{'val':_0x56e725,'ack':!![]}),_0x38fc9b['setStateAsync'](_0x6ef841(0x10d),{'val':_0x3da394,'ack':!![]});}}}else{if(_0x4b6bd3[_0x6ef841(0x118)]===_0x6ef841(0x11a)){const {patterns:_0x322f93}=_0x4b6bd3[_0x6ef841(0x15b)];if(_0x322f93&&_0x322f93[_0x6ef841(0x127)]>0x0)_0x38fc9b[_0x6ef841(0x119)]('analysis.automation.detectedPatterns',{'val':JSON[_0x6ef841(0x157)](_0x322f93),'ack':!![]});}}}}}}}}}}}}}}}}function a4_0x231e(){const _0x3cf6f0=['applyEnergySavings','success','payload','path','python_service','[PYTHON]\x20','stdin','error','analysis.energy.insulationScore','GAIT_RESULT','445495KMfFAe','analysis.prediction.confidence','[RESULT]','keys','4754250bIAwNB','analysis.prediction.trackerState','Unknown','log','toFixed','writable','analysis.prediction.trackerConfidence','analysis.training.status','SECURITY_RESULT','is_anomaly','apply','toString','analysis.security.currentThreshold','ðŸ\x20Python\x20Pong','handlePrediction','(((.+)+)+)+$','analysis.energy.warmupSources','type','setStateAsync','COMFORT_RESULT','analysis.energy.mpcActive','[LOG]','startsWith','HEALTH_TRAIN_RESULT','getState','8ZYHfQk','child_process','substring','sendToPythonWrapper','parse','WARMUP_RESULT','search','length','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','analysis.health.gaitSpeed','PINN_PREDICT_RESULT','info','reason','val','\x0aGrund:\x20','trim','insulation','âœ…\x20HEALTH\x20TRAINED.','existsSync','toLocaleTimeString','sendNotification','exports','analysis.prediction.nextRoom','SIGNAL_RESULT','Error\x20launching\x20Python:\x20','analysis.energy.warmupTimes','analysis.alertReason','debug','service.py','heating','61096RhMkce','6SbyQvy','analysis.energy.pinnForecast','analysis.energy.heatingScore','threshold','entries','analysis.prediction.trackerTopRoom','split','ENERGY_TRAIN_RESULT','119072sErxIh','toISOString','message','1389115ilkKcJ','details','python3','HEALTH_RESULT','analysis.health.isAnomaly','analysis.isAlert','TRACKER_RESULT','analysis.security.lastCheck','425997rTAWwe','data','VENTILATION_ALERT','./setup','456660bzNiTl','stringify','analysis.security.lastScore'];a4_0x231e=function(){return _0x3cf6f0;};return a4_0x231e();}function startService(_0x198ffd,_0x405c64){const _0x207821=a4_0x1a9db6;let _0x106b72=_0x207821(0x14c);if(fs[_0x207821(0x132)](_0x405c64))_0x106b72=_0x405c64;try{const _0x5e9baf=path['join'](__dirname,'..',_0x207821(0x15d),_0x207821(0x13c));pythonProcess=spawn(_0x106b72,[_0x5e9baf]),pythonProcess['stdout']['on'](_0x207821(0x153),_0x480d56=>{const _0x17a656=_0x207821,_0x10be78=_0x480d56[_0x17a656(0x112)]()[_0x17a656(0x145)]('\x0a');_0x10be78['forEach'](_0x3a235f=>{const _0x58969b=_0x17a656,_0x10997b=_0x3a235f['trim']();if(!_0x10997b)return;if(_0x10997b[_0x58969b(0x11d)](_0x58969b(0x11c)))_0x198ffd['log'][_0x58969b(0x13b)](_0x58969b(0x15e)+_0x10997b['substring'](0x5)[_0x58969b(0x12f)]());else{if(_0x10997b['startsWith'](_0x58969b(0x165)))try{const _0x2d3f11=JSON[_0x58969b(0x124)](_0x10997b[_0x58969b(0x122)](0x8)[_0x58969b(0x12f)]());handleResult(_0x198ffd,_0x2d3f11);}catch(_0xee0425){}}});}),pythonProcess['on']('close',_0xec4b0f=>{pythonProcess=null;}),_0x198ffd[_0x207821(0x123)]=(_0x18af83,_0x3e3329)=>send(_0x198ffd,_0x18af83,_0x3e3329);}catch(_0x3af399){_0x198ffd[_0x207821(0x10a)][_0x207821(0x160)](_0x207821(0x138)+_0x3af399[_0x207821(0x149)]);}}function stopService(_0x27c387){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x444ea0){}pythonProcess=null;}}module[a4_0x1a9db6(0x135)]={'startService':startService,'stopService':stopService,'send':send};