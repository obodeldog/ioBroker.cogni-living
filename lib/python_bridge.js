const a4_0x56a812=a4_0x3a69;function a4_0x3a69(_0x4d6548,_0x2dc5c5){const _0x5d1470=a4_0x29b3();return a4_0x3a69=function(_0x5a5a8c,_0x148dea){_0x5a5a8c=_0x5a5a8c-0x10e;let _0x29b33c=_0x5d1470[_0x5a5a8c];return _0x29b33c;},a4_0x3a69(_0x4d6548,_0x2dc5c5);}(function(_0x53c03d,_0x45167b){const _0xffedad=a4_0x3a69,_0x41e590=_0x53c03d();while(!![]){try{const _0x581b8c=-parseInt(_0xffedad(0x121))/0x1*(-parseInt(_0xffedad(0x14d))/0x2)+-parseInt(_0xffedad(0x14a))/0x3+-parseInt(_0xffedad(0x141))/0x4*(-parseInt(_0xffedad(0x15b))/0x5)+parseInt(_0xffedad(0x145))/0x6+-parseInt(_0xffedad(0x14c))/0x7*(parseInt(_0xffedad(0x167))/0x8)+-parseInt(_0xffedad(0x159))/0x9*(-parseInt(_0xffedad(0x119))/0xa)+-parseInt(_0xffedad(0x163))/0xb;if(_0x581b8c===_0x45167b)break;else _0x41e590['push'](_0x41e590['shift']());}catch(_0x3f3410){_0x41e590['push'](_0x41e590['shift']());}}}(a4_0x29b3,0xdca91));const a4_0x148dea=(function(){let _0x58b73c=!![];return function(_0x52592a,_0x55c623){const _0x4b8929=_0x58b73c?function(){const _0x5a591f=a4_0x3a69;if(_0x55c623){const _0x383a13=_0x55c623[_0x5a591f(0x122)](_0x52592a,arguments);return _0x55c623=null,_0x383a13;}}:function(){};return _0x58b73c=![],_0x4b8929;};}()),a4_0x5a5a8c=a4_0x148dea(this,function(){const _0x40b9d2=a4_0x3a69;return a4_0x5a5a8c[_0x40b9d2(0x117)]()[_0x40b9d2(0x113)](_0x40b9d2(0x151))[_0x40b9d2(0x117)]()[_0x40b9d2(0x13e)](a4_0x5a5a8c)[_0x40b9d2(0x113)](_0x40b9d2(0x151));});a4_0x5a5a8c();'use strict';const {spawn}=require(a4_0x56a812(0x144)),path=require(a4_0x56a812(0x123)),fs=require('fs'),setup=require('./setup'),automation=require(a4_0x56a812(0x111));let pythonProcess=null;function send(_0x9a1735,_0x10d601,_0x387924={}){const _0x36b8bd=a4_0x56a812;if(!pythonProcess||!pythonProcess[_0x36b8bd(0x153)]['writable'])return;const _0xd00a59=JSON['stringify']({'command':_0x10d601,..._0x387924});try{pythonProcess[_0x36b8bd(0x153)][_0x36b8bd(0x156)](_0xd00a59+'\x0a');}catch(_0x23b23a){}}function handleResult(_0x301703,_0x524ee8){const _0x17748f=a4_0x56a812;if(_0x524ee8[_0x17748f(0x126)]===_0x17748f(0x133))_0x301703['log'][_0x17748f(0x127)]('üêç\x20Python\x20Pong');else{if(_0x524ee8['type']===_0x17748f(0x154)){const {anomaly_score:_0x4b0a1a,is_anomaly:_0xde0a8a,threshold:_0x253f7a,explanation:_0x3ef9d1}=_0x524ee8[_0x17748f(0x129)];_0x301703['setStateAsync']('analysis.security.lastScore',{'val':_0x4b0a1a,'ack':!![]}),_0x301703[_0x17748f(0x165)](_0x17748f(0x15a),{'val':new Date()[_0x17748f(0x137)](),'ack':!![]});if(_0x253f7a)_0x301703[_0x17748f(0x165)](_0x17748f(0x13a),{'val':_0x253f7a,'ack':!![]});if(_0xde0a8a){let _0x49f9e4=_0x17748f(0x15e)+_0x4b0a1a[_0x17748f(0x148)](0x4)+')';if(_0x3ef9d1&&_0x3ef9d1!==_0x17748f(0x160))_0x49f9e4+=_0x17748f(0x136)+_0x3ef9d1;_0x301703[_0x17748f(0x165)](_0x17748f(0x12b),{'val':!![],'ack':!![]}),_0x301703['setStateAsync'](_0x17748f(0x10f),{'val':_0x49f9e4,'ack':!![]}),setup['sendNotification'](_0x301703,_0x17748f(0x120)+_0x49f9e4,![],!![]);}}else{if(_0x524ee8['type']===_0x17748f(0x13b)){const _0x3da359=_0x524ee8[_0x17748f(0x129)][_0x17748f(0x152)]||'',_0x54f94f=_0x524ee8[_0x17748f(0x129)][_0x17748f(0x12d)],_0x5570ef=_0x524ee8[_0x17748f(0x129)][_0x17748f(0x139)]?_0x17748f(0x146)+new Date()['toLocaleTimeString']()+'\x20('+_0x3da359+')':_0x17748f(0x14b)+_0x524ee8[_0x17748f(0x129)]['reason'];_0x301703[_0x17748f(0x165)]('analysis.training.status',{'val':_0x5570ef,'ack':!![]});if(_0x524ee8[_0x17748f(0x129)][_0x17748f(0x139)]&&_0x54f94f)_0x301703[_0x17748f(0x165)]('analysis.security.currentThreshold',{'val':_0x54f94f,'ack':!![]});}else{if(_0x524ee8['type']===_0x17748f(0x161)){if(_0x524ee8[_0x17748f(0x129)][_0x17748f(0x139)])try{const _0x223c01=JSON[_0x17748f(0x12c)](_0x524ee8[_0x17748f(0x129)][_0x17748f(0x152)]);if(_0x223c01['insulation'])_0x301703[_0x17748f(0x165)](_0x17748f(0x125),{'val':JSON['stringify'](_0x223c01[_0x17748f(0x164)]),'ack':!![]});if(_0x223c01[_0x17748f(0x158)])_0x301703[_0x17748f(0x165)](_0x17748f(0x149),{'val':JSON[_0x17748f(0x115)](_0x223c01[_0x17748f(0x158)]),'ack':!![]});}catch(_0x261bea){}}else{if(_0x524ee8[_0x17748f(0x126)]==='HEALTH_TRAIN_RESULT'){if(_0x524ee8[_0x17748f(0x129)][_0x17748f(0x139)])_0x301703[_0x17748f(0x131)][_0x17748f(0x112)](_0x17748f(0x11f));}else{if(_0x524ee8[_0x17748f(0x126)]===_0x17748f(0x14e))_0x301703[_0x17748f(0x165)](_0x17748f(0x162),{'val':new Date()['toISOString'](),'ack':!![]}),_0x301703[_0x17748f(0x165)](_0x17748f(0x143),{'val':_0x524ee8['payload'][_0x17748f(0x147)],'ack':!![]});else{if(_0x524ee8[_0x17748f(0x126)]===_0x17748f(0x132)){const {speed_trend:_0x5b66c2}=_0x524ee8[_0x17748f(0x129)];if(_0x5b66c2!==undefined)_0x301703['setStateAsync']('analysis.health.gaitSpeed',{'val':_0x5b66c2,'ack':!![]});}else{if(_0x524ee8[_0x17748f(0x126)]===_0x17748f(0x166)){const {forecast:_0x26690d}=_0x524ee8[_0x17748f(0x129)];if(_0x26690d)_0x301703[_0x17748f(0x165)](_0x17748f(0x14f),{'val':JSON['stringify'](_0x26690d),'ack':!![]});}else{if(_0x524ee8[_0x17748f(0x126)]===_0x17748f(0x12f)){const {forecast:_0x577e2a}=_0x524ee8[_0x17748f(0x129)];if(_0x577e2a)_0x301703['setStateAsync'](_0x17748f(0x138),{'val':JSON[_0x17748f(0x115)](_0x577e2a),'ack':!![]});}else{if(_0x524ee8['type']==='ENERGY_OPTIMIZE_RESULT'){const {proposals:_0x1e90b0}=_0x524ee8[_0x17748f(0x129)];_0x301703[_0x17748f(0x11b)](_0x17748f(0x13d),(_0x57566b,_0x13beb9)=>{const _0x4ea317=_0x17748f;_0x13beb9&&_0x13beb9[_0x4ea317(0x157)]===!![]&&_0x1e90b0&&_0x1e90b0[_0x4ea317(0x15f)]>0x0&&automation[_0x4ea317(0x11c)](_0x301703,_0x1e90b0);});}else{if(_0x524ee8[_0x17748f(0x126)]===_0x17748f(0x11a)){const {room:_0x434387,propagation:_0x548444}=_0x524ee8[_0x17748f(0x129)];let _0x156055='Unknown',_0x4f0f33=0x0;if(_0x548444){const _0x22189a=Object[_0x17748f(0x134)](_0x548444);_0x22189a[_0x17748f(0x15f)]>0x0&&(_0x156055=_0x22189a[0x0][0x0],_0x4f0f33=_0x22189a[0x0][0x1]);}_0x301703[_0x17748f(0x165)](_0x17748f(0x15c),{'val':_0x156055,'ack':!![]}),_0x301703[_0x17748f(0x165)](_0x17748f(0x15d),{'val':_0x4f0f33,'ack':!![]}),automation[_0x17748f(0x118)](_0x301703,_0x156055,_0x4f0f33);}else{if(_0x524ee8[_0x17748f(0x126)]===_0x17748f(0x128)){const {patterns:_0x1c181a}=_0x524ee8[_0x17748f(0x129)];if(_0x1c181a&&_0x1c181a[_0x17748f(0x15f)]>0x0)_0x301703[_0x17748f(0x165)](_0x17748f(0x12a),{'val':JSON['stringify'](_0x1c181a),'ack':!![]});}}}}}}}}}}}}}function startService(_0x2251bb,_0x152a3e){const _0x35f144=a4_0x56a812;let _0x10155c=_0x35f144(0x142);if(fs['existsSync'](_0x152a3e))_0x10155c=_0x152a3e;try{const _0xfa7808=path[_0x35f144(0x116)](__dirname,'..',_0x35f144(0x124),_0x35f144(0x13f));pythonProcess=spawn(_0x10155c,[_0xfa7808]),pythonProcess[_0x35f144(0x130)]['on'](_0x35f144(0x135),_0x591e8b=>{const _0x13d1e9=_0x35f144,_0x1d7ad0=_0x591e8b[_0x13d1e9(0x117)]()[_0x13d1e9(0x10e)]('\x0a');_0x1d7ad0['forEach'](_0xe716a9=>{const _0x222442=_0x13d1e9,_0x420a4a=_0xe716a9[_0x222442(0x114)]();if(!_0x420a4a)return;if(_0x420a4a['startsWith'](_0x222442(0x11d)))_0x2251bb[_0x222442(0x131)][_0x222442(0x127)](_0x222442(0x110)+_0x420a4a['substring'](0x5)[_0x222442(0x114)]());else{if(_0x420a4a[_0x222442(0x150)]('[RESULT]'))try{const _0x554f30=JSON[_0x222442(0x12c)](_0x420a4a[_0x222442(0x168)](0x8)['trim']());handleResult(_0x2251bb,_0x554f30);}catch(_0x28d0f9){}}});}),pythonProcess['on'](_0x35f144(0x155),_0x16885c=>{pythonProcess=null;}),_0x2251bb[_0x35f144(0x11e)]=(_0x2b4c16,_0x2445c8)=>send(_0x2251bb,_0x2b4c16,_0x2445c8);}catch(_0x16b417){_0x2251bb[_0x35f144(0x131)][_0x35f144(0x12e)](_0x35f144(0x13c)+_0x16b417['message']);}}function a4_0x29b3(){const _0x6a6ab9=['val','heating','954KcxwMV','analysis.security.lastCheck','10Srtvgn','analysis.prediction.nextRoom','analysis.prediction.confidence','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','length','Unknown','ENERGY_TRAIN_RESULT','analysis.health.lastCheck','10399323YMuBnR','insulation','setStateAsync','ENERGY_PREDICT_RESULT','176eIjUHc','substring','split','analysis.alertReason','[PYTHON]\x20','./automation','info','search','trim','stringify','join','toString','handlePrediction','3030cabdGN','SIGNAL_RESULT','getState','applyEnergySavings','[LOG]','sendToPythonWrapper','‚úÖ\x20HEALTH\x20TRAINED.','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','10fMvHWA','apply','path','python_service','analysis.energy.insulationScore','type','debug','COMFORT_RESULT','payload','analysis.automation.detectedPatterns','analysis.isAlert','parse','threshold','error','PINN_PREDICT_RESULT','stdout','log','GAIT_RESULT','PONG','entries','data','\x0aGrund:\x20','toISOString','analysis.energy.pinnForecast','success','analysis.security.currentThreshold','TRAINING_COMPLETE','Error\x20launching\x20Python:\x20','analysis.energy.mpcActive','constructor','service.py','kill','1885084VxkvMo','python3','analysis.health.isAnomaly','child_process','9987786cOiJSH','Success:\x20','is_anomaly','toFixed','analysis.energy.heatingScore','4665921sTsJaE','Failed:\x20','103306DDmEOh','217982OsevOs','HEALTH_RESULT','analysis.energy.forecast','startsWith','(((.+)+)+)+$','details','stdin','SECURITY_RESULT','close','write'];a4_0x29b3=function(){return _0x6a6ab9;};return a4_0x29b3();}function stopService(_0x414ee6){const _0x4a95c3=a4_0x56a812;if(pythonProcess){try{pythonProcess[_0x4a95c3(0x140)]();}catch(_0x62daae){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};