const a4_0x5a2b08=a4_0x2e72;function a4_0x7184(){const _0x557a72=['14151195NFgsiq','VENTILATION_ALERT','analysis.automation.detectedPatterns','success','7301538aZBZWx','service.py','split','toString','analysis.prediction.trackerTopRoom','setStateAsync','forEach','WARMUP_RESULT','keys','heating','python3','SIGNAL_RESULT','8gILeLn','analysis.prediction.trackerState','toFixed','ENERGY_TRAIN_RESULT','trim','toISOString','child_process','âœ…\x20HEALTH\x20TRAINED.','write','GAIT_RESULT','debug','SECURITY_RESULT','stdin','Unknown','analysis.prediction.nextRoom','analysis.prediction.trackerConfidence','analysis.energy.forecast','val','analysis.security.currentThreshold','handlePrediction','PONG','[LOG]','parse','search','sendToPythonWrapper','HEALTH_TRAIN_RESULT','2bFWTyp','sendNotification','apply','insulation','details','\x0aGrund:\x20','close','analysis.health.isAnomaly','substring','Error\x20launching\x20Python:\x20','ENERGY_PREDICT_RESULT','payload','existsSync','exports','6333502faJkfD','analysis.health.lastCheck','length','threshold','1054061jxHGWP','type','[PYTHON]\x20','TRACKER_RESULT','analysis.energy.pinnForecast','3625368Wuxzge','HEALTH_RESULT','applyEnergySavings','ENERGY_OPTIMIZE_RESULT','message','âš ï¸\x20SECURITY\x20ALARM:\x20','stringify','analysis.isAlert','analysis.energy.insulationScore','analysis.security.lastScore','analysis.energy.warmupTimes','./automation','error','is_anomaly','log','28698190MSizMB','python_service','80xBdSAO','416805QOtjcj','constructor','writable','(((.+)+)+)+$','analysis.energy.mpcActive','Success:\x20','Failed:\x20','stdout'];a4_0x7184=function(){return _0x557a72;};return a4_0x7184();}(function(_0x2a492c,_0x49fb1c){const _0x31b4fe=a4_0x2e72,_0x2fcc4a=_0x2a492c();while(!![]){try{const _0x491c09=parseInt(_0x31b4fe(0x1ae))/0x1*(-parseInt(_0x31b4fe(0x19c))/0x2)+parseInt(_0x31b4fe(0x1b3))/0x3+-parseInt(_0x31b4fe(0x169))/0x4*(-parseInt(_0x31b4fe(0x16a))/0x5)+-parseInt(_0x31b4fe(0x176))/0x6+-parseInt(_0x31b4fe(0x1aa))/0x7*(parseInt(_0x31b4fe(0x182))/0x8)+-parseInt(_0x31b4fe(0x172))/0x9+parseInt(_0x31b4fe(0x167))/0xa;if(_0x491c09===_0x49fb1c)break;else _0x2fcc4a['push'](_0x2fcc4a['shift']());}catch(_0x27acb9){_0x2fcc4a['push'](_0x2fcc4a['shift']());}}}(a4_0x7184,0xf37fa));function a4_0x2e72(_0x484b6c,_0x2e3812){const _0x33f781=a4_0x7184();return a4_0x2e72=function(_0x5179ea,_0x2134cb){_0x5179ea=_0x5179ea-0x160;let _0x7184d0=_0x33f781[_0x5179ea];return _0x7184d0;},a4_0x2e72(_0x484b6c,_0x2e3812);}const a4_0x2134cb=(function(){let _0x22096a=!![];return function(_0x5e4e42,_0x25b9fe){const _0x41ee8f=_0x22096a?function(){const _0x1c1a2e=a4_0x2e72;if(_0x25b9fe){const _0x252076=_0x25b9fe[_0x1c1a2e(0x19e)](_0x5e4e42,arguments);return _0x25b9fe=null,_0x252076;}}:function(){};return _0x22096a=![],_0x41ee8f;};}()),a4_0x5179ea=a4_0x2134cb(this,function(){const _0x186dbd=a4_0x2e72;return a4_0x5179ea['toString']()[_0x186dbd(0x199)](_0x186dbd(0x16d))[_0x186dbd(0x179)]()[_0x186dbd(0x16b)](a4_0x5179ea)[_0x186dbd(0x199)](_0x186dbd(0x16d));});a4_0x5179ea();'use strict';const {spawn}=require(a4_0x5a2b08(0x188)),path=require('path'),fs=require('fs'),setup=require('./setup'),automation=require(a4_0x5a2b08(0x163));let pythonProcess=null;function send(_0x5b1fb0,_0x5ad1ce,_0x54f685={}){const _0x3bfa6b=a4_0x5a2b08;if(!pythonProcess||!pythonProcess[_0x3bfa6b(0x18e)][_0x3bfa6b(0x16c)])return;const _0x5f06ae=JSON[_0x3bfa6b(0x1b9)]({'command':_0x5ad1ce,..._0x54f685});try{pythonProcess[_0x3bfa6b(0x18e)][_0x3bfa6b(0x18a)](_0x5f06ae+'\x0a');}catch(_0x4938b5){}}function handleResult(_0x19e5fb,_0x44fe97){const _0xba47ee=a4_0x5a2b08;if(_0x44fe97[_0xba47ee(0x1af)]===_0xba47ee(0x196))_0x19e5fb['log'][_0xba47ee(0x18c)]('ðŸ\x20Python\x20Pong');else{if(_0x44fe97[_0xba47ee(0x1af)]===_0xba47ee(0x18d)){const {anomaly_score:_0x54413d,is_anomaly:_0x131838,threshold:_0x1412da,explanation:_0x56cc5a}=_0x44fe97[_0xba47ee(0x1a7)];_0x19e5fb['setStateAsync'](_0xba47ee(0x161),{'val':_0x54413d,'ack':!![]}),_0x19e5fb[_0xba47ee(0x17b)]('analysis.security.lastCheck',{'val':new Date()[_0xba47ee(0x187)](),'ack':!![]});if(_0x1412da)_0x19e5fb['setStateAsync']('analysis.security.currentThreshold',{'val':_0x1412da,'ack':!![]});if(_0x131838){let _0x943ad0='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x54413d[_0xba47ee(0x184)](0x4)+')';if(_0x56cc5a&&_0x56cc5a!==_0xba47ee(0x18f))_0x943ad0+=_0xba47ee(0x1a1)+_0x56cc5a;_0x19e5fb[_0xba47ee(0x17b)](_0xba47ee(0x1ba),{'val':!![],'ack':!![]}),_0x19e5fb[_0xba47ee(0x17b)]('analysis.alertReason',{'val':_0x943ad0,'ack':!![]}),setup[_0xba47ee(0x19d)](_0x19e5fb,_0xba47ee(0x1b8)+_0x943ad0,![],!![]);}}else{if(_0x44fe97[_0xba47ee(0x1af)]==='TRAINING_COMPLETE'){const _0xe43474=_0x44fe97['payload'][_0xba47ee(0x1a0)]||'',_0x34b9aa=_0x44fe97[_0xba47ee(0x1a7)][_0xba47ee(0x1ad)],_0x2a4507=_0x44fe97[_0xba47ee(0x1a7)][_0xba47ee(0x175)]?_0xba47ee(0x16f)+new Date()['toLocaleTimeString']()+'\x20('+_0xe43474+')':_0xba47ee(0x170)+_0x44fe97[_0xba47ee(0x1a7)]['reason'];_0x19e5fb[_0xba47ee(0x17b)]('analysis.training.status',{'val':_0x2a4507,'ack':!![]});if(_0x44fe97['payload'][_0xba47ee(0x175)]&&_0x34b9aa)_0x19e5fb[_0xba47ee(0x17b)](_0xba47ee(0x194),{'val':_0x34b9aa,'ack':!![]});}else{if(_0x44fe97[_0xba47ee(0x1af)]===_0xba47ee(0x185)){if(_0x44fe97[_0xba47ee(0x1a7)][_0xba47ee(0x175)])try{const _0x3785dc=JSON['parse'](_0x44fe97['payload'][_0xba47ee(0x1a0)]);if(_0x3785dc[_0xba47ee(0x19f)])_0x19e5fb[_0xba47ee(0x17b)](_0xba47ee(0x160),{'val':JSON[_0xba47ee(0x1b9)](_0x3785dc['insulation']),'ack':!![]});if(_0x3785dc[_0xba47ee(0x17f)])_0x19e5fb[_0xba47ee(0x17b)]('analysis.energy.heatingScore',{'val':JSON[_0xba47ee(0x1b9)](_0x3785dc[_0xba47ee(0x17f)]),'ack':!![]});}catch(_0x39fa9e){}}else{if(_0x44fe97[_0xba47ee(0x1af)]===_0xba47ee(0x19b)){if(_0x44fe97[_0xba47ee(0x1a7)][_0xba47ee(0x175)])_0x19e5fb[_0xba47ee(0x166)]['info'](_0xba47ee(0x189));}else{if(_0x44fe97[_0xba47ee(0x1af)]===_0xba47ee(0x1b4))_0x19e5fb['setStateAsync'](_0xba47ee(0x1ab),{'val':new Date()['toISOString'](),'ack':!![]}),_0x19e5fb[_0xba47ee(0x17b)](_0xba47ee(0x1a3),{'val':_0x44fe97[_0xba47ee(0x1a7)][_0xba47ee(0x165)],'ack':!![]});else{if(_0x44fe97[_0xba47ee(0x1af)]===_0xba47ee(0x18b)){const {speed_trend:_0x2fddab}=_0x44fe97[_0xba47ee(0x1a7)];if(_0x2fddab!==undefined)_0x19e5fb[_0xba47ee(0x17b)]('analysis.health.gaitSpeed',{'val':_0x2fddab,'ack':!![]});}else{if(_0x44fe97['type']===_0xba47ee(0x1a6)){const {forecast:_0x45a08b}=_0x44fe97['payload'];if(_0x45a08b)_0x19e5fb[_0xba47ee(0x17b)](_0xba47ee(0x192),{'val':JSON['stringify'](_0x45a08b),'ack':!![]});}else{if(_0x44fe97['type']===_0xba47ee(0x17d)){const {times:_0x5535d7}=_0x44fe97[_0xba47ee(0x1a7)];if(_0x5535d7)_0x19e5fb[_0xba47ee(0x17b)](_0xba47ee(0x162),{'val':JSON[_0xba47ee(0x1b9)](_0x5535d7),'ack':!![]});}else{if(_0x44fe97[_0xba47ee(0x1af)]==='PINN_PREDICT_RESULT'){const {forecast:_0x27f64c}=_0x44fe97[_0xba47ee(0x1a7)];if(_0x27f64c)_0x19e5fb[_0xba47ee(0x17b)](_0xba47ee(0x1b2),{'val':JSON['stringify'](_0x27f64c),'ack':!![]});}else{if(_0x44fe97[_0xba47ee(0x1af)]===_0xba47ee(0x173)){const {alerts:_0x22445f}=_0x44fe97[_0xba47ee(0x1a7)];if(_0x22445f)_0x19e5fb['setStateAsync']('analysis.energy.ventilationAlerts',{'val':JSON[_0xba47ee(0x1b9)](_0x22445f),'ack':!![]});}else{if(_0x44fe97['type']===_0xba47ee(0x1b6)){const {proposals:_0x47860b}=_0x44fe97[_0xba47ee(0x1a7)];_0x19e5fb['getState'](_0xba47ee(0x16e),(_0x5636c8,_0x3aed02)=>{const _0xbfd2f3=_0xba47ee;_0x3aed02&&_0x3aed02[_0xbfd2f3(0x193)]===!![]&&_0x47860b&&_0x47860b['length']>0x0&&automation[_0xbfd2f3(0x1b5)](_0x19e5fb,_0x47860b);});}else{if(_0x44fe97[_0xba47ee(0x1af)]===_0xba47ee(0x181)){const {room:_0x4bb7d9,propagation:_0x27659f}=_0x44fe97[_0xba47ee(0x1a7)];let _0x460092=_0xba47ee(0x18f),_0x4c0b5d=0x0;if(_0x27659f){const _0x1f35d9=Object['entries'](_0x27659f);_0x1f35d9[_0xba47ee(0x1ac)]>0x0&&(_0x460092=_0x1f35d9[0x0][0x0],_0x4c0b5d=_0x1f35d9[0x0][0x1]);}_0x19e5fb[_0xba47ee(0x17b)](_0xba47ee(0x190),{'val':_0x460092,'ack':!![]}),_0x19e5fb['setStateAsync']('analysis.prediction.confidence',{'val':_0x4c0b5d,'ack':!![]}),automation[_0xba47ee(0x195)](_0x19e5fb,_0x460092,_0x4c0b5d);}else{if(_0x44fe97[_0xba47ee(0x1af)]===_0xba47ee(0x1b1)){const {probabilities:_0x497973}=_0x44fe97[_0xba47ee(0x1a7)];if(_0x497973){_0x19e5fb[_0xba47ee(0x17b)](_0xba47ee(0x183),{'val':JSON[_0xba47ee(0x1b9)](_0x497973),'ack':!![]});const _0x2fa510=Object[_0xba47ee(0x17e)](_0x497973);if(_0x2fa510[_0xba47ee(0x1ac)]>0x0){const _0x12686c=_0x2fa510[0x0],_0x11f93d=_0x497973[_0x12686c];_0x19e5fb[_0xba47ee(0x17b)](_0xba47ee(0x17a),{'val':_0x12686c,'ack':!![]}),_0x19e5fb['setStateAsync'](_0xba47ee(0x191),{'val':_0x11f93d,'ack':!![]});}}}else{if(_0x44fe97[_0xba47ee(0x1af)]==='COMFORT_RESULT'){const {patterns:_0x2c0de5}=_0x44fe97['payload'];if(_0x2c0de5&&_0x2c0de5[_0xba47ee(0x1ac)]>0x0)_0x19e5fb[_0xba47ee(0x17b)](_0xba47ee(0x174),{'val':JSON[_0xba47ee(0x1b9)](_0x2c0de5),'ack':!![]});}}}}}}}}}}}}}}}}function startService(_0x2822f1,_0x43f928){const _0x22fa3f=a4_0x5a2b08;let _0x30d5f7=_0x22fa3f(0x180);if(fs[_0x22fa3f(0x1a8)](_0x43f928))_0x30d5f7=_0x43f928;try{const _0x36958d=path['join'](__dirname,'..',_0x22fa3f(0x168),_0x22fa3f(0x177));pythonProcess=spawn(_0x30d5f7,[_0x36958d]),pythonProcess[_0x22fa3f(0x171)]['on']('data',_0x16b720=>{const _0x1d4eb8=_0x22fa3f,_0x2c347a=_0x16b720[_0x1d4eb8(0x179)]()[_0x1d4eb8(0x178)]('\x0a');_0x2c347a[_0x1d4eb8(0x17c)](_0x284d1f=>{const _0x4561cf=_0x1d4eb8,_0x367f1d=_0x284d1f[_0x4561cf(0x186)]();if(!_0x367f1d)return;if(_0x367f1d['startsWith'](_0x4561cf(0x197)))_0x2822f1[_0x4561cf(0x166)][_0x4561cf(0x18c)](_0x4561cf(0x1b0)+_0x367f1d[_0x4561cf(0x1a4)](0x5)[_0x4561cf(0x186)]());else{if(_0x367f1d['startsWith']('[RESULT]'))try{const _0x5f555a=JSON[_0x4561cf(0x198)](_0x367f1d[_0x4561cf(0x1a4)](0x8)[_0x4561cf(0x186)]());handleResult(_0x2822f1,_0x5f555a);}catch(_0x5a2945){}}});}),pythonProcess['on'](_0x22fa3f(0x1a2),_0x1310fb=>{pythonProcess=null;}),_0x2822f1[_0x22fa3f(0x19a)]=(_0xb724ef,_0x4fdabb)=>send(_0x2822f1,_0xb724ef,_0x4fdabb);}catch(_0x57993d){_0x2822f1[_0x22fa3f(0x166)][_0x22fa3f(0x164)](_0x22fa3f(0x1a5)+_0x57993d[_0x22fa3f(0x1b7)]);}}function stopService(_0xfeb33e){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x3a07f6){}pythonProcess=null;}}module[a4_0x5a2b08(0x1a9)]={'startService':startService,'stopService':stopService,'send':send};