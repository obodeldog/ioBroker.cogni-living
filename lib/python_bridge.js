const a4_0x51d7ae=a4_0x39c1;function a4_0x39c1(_0x4f7fee,_0x1f0462){const _0xeb83d8=a4_0x18eb();return a4_0x39c1=function(_0x3738eb,_0x599325){_0x3738eb=_0x3738eb-0x182;let _0x18eb4c=_0xeb83d8[_0x3738eb];return _0x18eb4c;},a4_0x39c1(_0x4f7fee,_0x1f0462);}function a4_0x18eb(){const _0x383a32=['analysis.health.gaitSpeed','type','kill','GAIT_RESULT','7PHeHZJ','COMFORT_RESULT','24adaKpl','val','166230vEMBjM','ENERGY_TRAIN_RESULT','analysis.training.status','debug','data','ENERGY_PREDICT_RESULT','entries','analysis.energy.pinnForecast','search','sendNotification','existsSync','TRAINING_COMPLETE','analysis.alertReason','trim','analysis.energy.mpcActive','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','242tNYIUr','1067079WUAfPi','toFixed','heating','analysis.security.lastScore','python3','analysis.isAlert','Success:\x20','\x0aGrund:\x20','payload','write','PONG','[RESULT]','3509548fGaaqp','248WLxgKn','log','success','insulation','HEALTH_TRAIN_RESULT','sendToPythonWrapper','[LOG]','threshold','apply','1782069qbbrRp','substring','reason','âš ï¸\x20SECURITY\x20ALARM:\x20','startsWith','ENERGY_OPTIMIZE_RESULT','SIGNAL_RESULT','analysis.security.lastCheck','toString','Unknown','stdin','parse','handlePrediction','analysis.prediction.confidence','constructor','python_service','forEach','stringify','exports','split','552515safQIg','join','(((.+)+)+)+$','analysis.security.currentThreshold','message','toISOString','details','PINN_PREDICT_RESULT','is_anomaly','SECURITY_RESULT','Error\x20launching\x20Python:\x20','Failed:\x20','78093asIIRr','analysis.energy.heatingScore','analysis.energy.insulationScore','close','setStateAsync','3730110nZtceR','error','length','path','analysis.prediction.nextRoom','âœ…\x20HEALTH\x20TRAINED.'];a4_0x18eb=function(){return _0x383a32;};return a4_0x18eb();}(function(_0x16b2b2,_0x1b547c){const _0x8e1578=a4_0x39c1,_0x256ed4=_0x16b2b2();while(!![]){try{const _0x586412=-parseInt(_0x8e1578(0x1a4))/0x1+parseInt(_0x8e1578(0x19a))/0x2+parseInt(_0x8e1578(0x18e))/0x3+-parseInt(_0x8e1578(0x1d5))/0x4*(parseInt(_0x8e1578(0x1b8))/0x5)+-parseInt(_0x8e1578(0x1c9))/0x6*(-parseInt(_0x8e1578(0x1d3))/0x7)+-parseInt(_0x8e1578(0x19b))/0x8*(-parseInt(_0x8e1578(0x1c4))/0x9)+parseInt(_0x8e1578(0x1d7))/0xa*(parseInt(_0x8e1578(0x18d))/0xb);if(_0x586412===_0x1b547c)break;else _0x256ed4['push'](_0x256ed4['shift']());}catch(_0x223d7f){_0x256ed4['push'](_0x256ed4['shift']());}}}(a4_0x18eb,0xe109e));const a4_0x599325=(function(){let _0x188c08=!![];return function(_0x17b932,_0x1d6859){const _0x253531=_0x188c08?function(){const _0x5d96f7=a4_0x39c1;if(_0x1d6859){const _0x436bed=_0x1d6859[_0x5d96f7(0x1a3)](_0x17b932,arguments);return _0x1d6859=null,_0x436bed;}}:function(){};return _0x188c08=![],_0x253531;};}()),a4_0x3738eb=a4_0x599325(this,function(){const _0xd5c87d=a4_0x39c1;return a4_0x3738eb[_0xd5c87d(0x1ac)]()[_0xd5c87d(0x185)](_0xd5c87d(0x1ba))[_0xd5c87d(0x1ac)]()[_0xd5c87d(0x1b2)](a4_0x3738eb)[_0xd5c87d(0x185)](_0xd5c87d(0x1ba));});a4_0x3738eb();'use strict';const {spawn}=require('child_process'),path=require(a4_0x51d7ae(0x1cc)),fs=require('fs'),setup=require('./setup'),automation=require('./automation');let pythonProcess=null;function send(_0x204deb,_0x39398f,_0x1434bd={}){const _0x1f59e9=a4_0x51d7ae;if(!pythonProcess||!pythonProcess[_0x1f59e9(0x1ae)]['writable'])return;const _0x2f3547=JSON[_0x1f59e9(0x1b5)]({'command':_0x39398f,..._0x1434bd});try{pythonProcess['stdin'][_0x1f59e9(0x197)](_0x2f3547+'\x0a');}catch(_0x24069d){}}function handleResult(_0x4d844e,_0x137dcc){const _0x4b8434=a4_0x51d7ae;if(_0x137dcc[_0x4b8434(0x1d0)]===_0x4b8434(0x198))_0x4d844e[_0x4b8434(0x19c)][_0x4b8434(0x1da)]('ðŸ\x20Python\x20Pong');else{if(_0x137dcc['type']===_0x4b8434(0x1c1)){const {anomaly_score:_0x12a225,is_anomaly:_0x2779fd,threshold:_0x4c7f63,explanation:_0x5a040e}=_0x137dcc[_0x4b8434(0x196)];_0x4d844e[_0x4b8434(0x1c8)](_0x4b8434(0x191),{'val':_0x12a225,'ack':!![]}),_0x4d844e[_0x4b8434(0x1c8)](_0x4b8434(0x1ab),{'val':new Date()[_0x4b8434(0x1bd)](),'ack':!![]});if(_0x4c7f63)_0x4d844e[_0x4b8434(0x1c8)]('analysis.security.currentThreshold',{'val':_0x4c7f63,'ack':!![]});if(_0x2779fd){let _0x12d5ae=_0x4b8434(0x18c)+_0x12a225[_0x4b8434(0x18f)](0x4)+')';if(_0x5a040e&&_0x5a040e!==_0x4b8434(0x1ad))_0x12d5ae+=_0x4b8434(0x195)+_0x5a040e;_0x4d844e[_0x4b8434(0x1c8)](_0x4b8434(0x193),{'val':!![],'ack':!![]}),_0x4d844e[_0x4b8434(0x1c8)](_0x4b8434(0x189),{'val':_0x12d5ae,'ack':!![]}),setup[_0x4b8434(0x186)](_0x4d844e,_0x4b8434(0x1a7)+_0x12d5ae,![],!![]);}}else{if(_0x137dcc[_0x4b8434(0x1d0)]===_0x4b8434(0x188)){const _0x5b2bd6=_0x137dcc[_0x4b8434(0x196)]['details']||'',_0x404896=_0x137dcc['payload'][_0x4b8434(0x1a2)],_0x48c3d0=_0x137dcc['payload'][_0x4b8434(0x19d)]?_0x4b8434(0x194)+new Date()['toLocaleTimeString']()+'\x20('+_0x5b2bd6+')':_0x4b8434(0x1c3)+_0x137dcc[_0x4b8434(0x196)][_0x4b8434(0x1a6)];_0x4d844e[_0x4b8434(0x1c8)](_0x4b8434(0x1d9),{'val':_0x48c3d0,'ack':!![]});if(_0x137dcc[_0x4b8434(0x196)]['success']&&_0x404896)_0x4d844e['setStateAsync'](_0x4b8434(0x1bb),{'val':_0x404896,'ack':!![]});}else{if(_0x137dcc['type']===_0x4b8434(0x1d8)){if(_0x137dcc['payload']['success'])try{const _0x258d6c=JSON[_0x4b8434(0x1af)](_0x137dcc[_0x4b8434(0x196)][_0x4b8434(0x1be)]);if(_0x258d6c[_0x4b8434(0x19e)])_0x4d844e['setStateAsync'](_0x4b8434(0x1c6),{'val':JSON[_0x4b8434(0x1b5)](_0x258d6c[_0x4b8434(0x19e)]),'ack':!![]});if(_0x258d6c[_0x4b8434(0x190)])_0x4d844e['setStateAsync'](_0x4b8434(0x1c5),{'val':JSON[_0x4b8434(0x1b5)](_0x258d6c[_0x4b8434(0x190)]),'ack':!![]});}catch(_0x3b9525){}}else{if(_0x137dcc[_0x4b8434(0x1d0)]===_0x4b8434(0x19f)){if(_0x137dcc[_0x4b8434(0x196)]['success'])_0x4d844e[_0x4b8434(0x19c)]['info'](_0x4b8434(0x1ce));}else{if(_0x137dcc[_0x4b8434(0x1d0)]==='HEALTH_RESULT')_0x4d844e[_0x4b8434(0x1c8)]('analysis.health.lastCheck',{'val':new Date()[_0x4b8434(0x1bd)](),'ack':!![]}),_0x4d844e[_0x4b8434(0x1c8)]('analysis.health.isAnomaly',{'val':_0x137dcc[_0x4b8434(0x196)][_0x4b8434(0x1c0)],'ack':!![]});else{if(_0x137dcc[_0x4b8434(0x1d0)]===_0x4b8434(0x1d2)){const {speed_trend:_0x4f225d}=_0x137dcc[_0x4b8434(0x196)];if(_0x4f225d!==undefined)_0x4d844e['setStateAsync'](_0x4b8434(0x1cf),{'val':_0x4f225d,'ack':!![]});}else{if(_0x137dcc[_0x4b8434(0x1d0)]===_0x4b8434(0x182)){const {forecast:_0x40fa46}=_0x137dcc[_0x4b8434(0x196)];if(_0x40fa46)_0x4d844e[_0x4b8434(0x1c8)]('analysis.energy.forecast',{'val':JSON[_0x4b8434(0x1b5)](_0x40fa46),'ack':!![]});}else{if(_0x137dcc['type']===_0x4b8434(0x1bf)){const {forecast:_0xccd5a0}=_0x137dcc['payload'];if(_0xccd5a0)_0x4d844e[_0x4b8434(0x1c8)](_0x4b8434(0x184),{'val':JSON[_0x4b8434(0x1b5)](_0xccd5a0),'ack':!![]});}else{if(_0x137dcc[_0x4b8434(0x1d0)]===_0x4b8434(0x1a9)){const {proposals:_0x12014f}=_0x137dcc[_0x4b8434(0x196)];_0x4d844e['getState'](_0x4b8434(0x18b),(_0x48e8f4,_0x2bb5d5)=>{const _0x214a7c=_0x4b8434;_0x2bb5d5&&_0x2bb5d5[_0x214a7c(0x1d6)]===!![]&&_0x12014f&&_0x12014f[_0x214a7c(0x1cb)]>0x0&&automation['applyEnergySavings'](_0x4d844e,_0x12014f);});}else{if(_0x137dcc['type']===_0x4b8434(0x1aa)){const {room:_0x386621,propagation:_0x5a8189}=_0x137dcc['payload'];let _0x1c8a70=_0x4b8434(0x1ad),_0x24809d=0x0;if(_0x5a8189){const _0x3e6c18=Object[_0x4b8434(0x183)](_0x5a8189);_0x3e6c18['length']>0x0&&(_0x1c8a70=_0x3e6c18[0x0][0x0],_0x24809d=_0x3e6c18[0x0][0x1]);}_0x4d844e['setStateAsync'](_0x4b8434(0x1cd),{'val':_0x1c8a70,'ack':!![]}),_0x4d844e[_0x4b8434(0x1c8)](_0x4b8434(0x1b1),{'val':_0x24809d,'ack':!![]}),automation[_0x4b8434(0x1b0)](_0x4d844e,_0x1c8a70,_0x24809d);}else{if(_0x137dcc[_0x4b8434(0x1d0)]===_0x4b8434(0x1d4)){const {patterns:_0x44a0cb}=_0x137dcc[_0x4b8434(0x196)];if(_0x44a0cb&&_0x44a0cb[_0x4b8434(0x1cb)]>0x0)_0x4d844e['setStateAsync']('analysis.automation.detectedPatterns',{'val':JSON[_0x4b8434(0x1b5)](_0x44a0cb),'ack':!![]});}}}}}}}}}}}}}function startService(_0x43f3f6,_0xbc9dee){const _0xdccd17=a4_0x51d7ae;let _0x5973ca=_0xdccd17(0x192);if(fs[_0xdccd17(0x187)](_0xbc9dee))_0x5973ca=_0xbc9dee;try{const _0x4f3711=path[_0xdccd17(0x1b9)](__dirname,'..',_0xdccd17(0x1b3),'service.py');pythonProcess=spawn(_0x5973ca,[_0x4f3711]),pythonProcess['stdout']['on'](_0xdccd17(0x1db),_0x274100=>{const _0x37db09=_0xdccd17,_0xb656fe=_0x274100[_0x37db09(0x1ac)]()[_0x37db09(0x1b7)]('\x0a');_0xb656fe[_0x37db09(0x1b4)](_0x518478=>{const _0x50611e=_0x37db09,_0x1e18d0=_0x518478['trim']();if(!_0x1e18d0)return;if(_0x1e18d0[_0x50611e(0x1a8)](_0x50611e(0x1a1)))_0x43f3f6[_0x50611e(0x19c)]['debug']('[PYTHON]\x20'+_0x1e18d0[_0x50611e(0x1a5)](0x5)[_0x50611e(0x18a)]());else{if(_0x1e18d0[_0x50611e(0x1a8)](_0x50611e(0x199)))try{const _0x496aed=JSON['parse'](_0x1e18d0[_0x50611e(0x1a5)](0x8)[_0x50611e(0x18a)]());handleResult(_0x43f3f6,_0x496aed);}catch(_0x5d380f){}}});}),pythonProcess['on'](_0xdccd17(0x1c7),_0x57fef6=>{pythonProcess=null;}),_0x43f3f6[_0xdccd17(0x1a0)]=(_0x33a84a,_0x4a9d35)=>send(_0x43f3f6,_0x33a84a,_0x4a9d35);}catch(_0x25071f){_0x43f3f6[_0xdccd17(0x19c)][_0xdccd17(0x1ca)](_0xdccd17(0x1c2)+_0x25071f[_0xdccd17(0x1bc)]);}}function stopService(_0x350b5e){const _0x311413=a4_0x51d7ae;if(pythonProcess){try{pythonProcess[_0x311413(0x1d1)]();}catch(_0x2b171c){}pythonProcess=null;}}module[a4_0x51d7ae(0x1b6)]={'startService':startService,'stopService':stopService,'send':send};