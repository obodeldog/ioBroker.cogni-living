const a4_0x31edac=a4_0x1232;(function(_0x2f938e,_0x3380b6){const _0x116323=a4_0x1232,_0x2aa800=_0x2f938e();while(!![]){try{const _0x168df2=-parseInt(_0x116323(0x10b))/0x1*(-parseInt(_0x116323(0x133))/0x2)+parseInt(_0x116323(0x119))/0x3+-parseInt(_0x116323(0x15d))/0x4+parseInt(_0x116323(0x14b))/0x5*(-parseInt(_0x116323(0x151))/0x6)+-parseInt(_0x116323(0x160))/0x7+-parseInt(_0x116323(0x165))/0x8+parseInt(_0x116323(0x126))/0x9*(parseInt(_0x116323(0x123))/0xa);if(_0x168df2===_0x3380b6)break;else _0x2aa800['push'](_0x2aa800['shift']());}catch(_0x4fcbdf){_0x2aa800['push'](_0x2aa800['shift']());}}}(a4_0x59b2,0x59f25));const a4_0x42541b=(function(){let _0x123cda=!![];return function(_0x4afb55,_0x2e7770){const _0x39df06=_0x123cda?function(){const _0x1d4a4f=a4_0x1232;if(_0x2e7770){const _0x31c926=_0x2e7770[_0x1d4a4f(0x168)](_0x4afb55,arguments);return _0x2e7770=null,_0x31c926;}}:function(){};return _0x123cda=![],_0x39df06;};}()),a4_0x3351fa=a4_0x42541b(this,function(){const _0x34cd1b=a4_0x1232;return a4_0x3351fa['toString']()['search'](_0x34cd1b(0x114))[_0x34cd1b(0x10a)]()[_0x34cd1b(0x11f)](a4_0x3351fa)[_0x34cd1b(0x158)]('(((.+)+)+)+$');});a4_0x3351fa();'use strict';const {spawn}=require('child_process'),path=require(a4_0x31edac(0x145)),fs=require('fs'),setup=require(a4_0x31edac(0x146)),automation=require(a4_0x31edac(0x163));let pythonProcess=null;function send(_0x1ff87a,_0x261a87,_0x37ddb8={}){const _0x4a26da=a4_0x31edac;if(!pythonProcess||!pythonProcess[_0x4a26da(0x138)]['writable'])return;const _0x57f3c9=JSON['stringify']({'command':_0x261a87,..._0x37ddb8});try{pythonProcess['stdin'][_0x4a26da(0x122)](_0x57f3c9+'\x0a');}catch(_0x25f4c4){}}function handleResult(_0x2bd3bf,_0x4ad3b6){const _0x1f8fcc=a4_0x31edac;if(_0x4ad3b6['type']===_0x1f8fcc(0x125))_0x2bd3bf[_0x1f8fcc(0x156)]['debug'](_0x1f8fcc(0x11d));else{if(_0x4ad3b6[_0x1f8fcc(0x111)]===_0x1f8fcc(0x135)){const {anomaly_score:_0x94bc4,is_anomaly:_0x3665cf,threshold:_0x287e77,explanation:_0x37866c}=_0x4ad3b6[_0x1f8fcc(0x10f)];_0x2bd3bf[_0x1f8fcc(0x118)](_0x1f8fcc(0x13f),{'val':_0x94bc4,'ack':!![]}),_0x2bd3bf['setStateAsync'](_0x1f8fcc(0x14e),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x287e77)_0x2bd3bf['setStateAsync'](_0x1f8fcc(0x144),{'val':_0x287e77,'ack':!![]});if(_0x3665cf){let _0xb0d06f=_0x1f8fcc(0x139)+_0x94bc4[_0x1f8fcc(0x13e)](0x4)+')';if(_0x37866c&&_0x37866c!==_0x1f8fcc(0x16d))_0xb0d06f+=_0x1f8fcc(0x15c)+_0x37866c;_0x2bd3bf['setStateAsync'](_0x1f8fcc(0x150),{'val':!![],'ack':!![]}),_0x2bd3bf[_0x1f8fcc(0x118)](_0x1f8fcc(0x124),{'val':_0xb0d06f,'ack':!![]}),setup[_0x1f8fcc(0x157)](_0x2bd3bf,'‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20'+_0xb0d06f,![],!![]);}}else{if(_0x4ad3b6['type']==='TRAINING_COMPLETE'){const _0x1e1735=_0x4ad3b6[_0x1f8fcc(0x10f)][_0x1f8fcc(0x112)]||'',_0x95021b=_0x4ad3b6[_0x1f8fcc(0x10f)][_0x1f8fcc(0x129)],_0x497069=_0x4ad3b6[_0x1f8fcc(0x10f)][_0x1f8fcc(0x147)]?'Success:\x20'+new Date()[_0x1f8fcc(0x13a)]()+'\x20('+_0x1e1735+')':_0x1f8fcc(0x132)+_0x4ad3b6[_0x1f8fcc(0x10f)][_0x1f8fcc(0x15a)];_0x2bd3bf[_0x1f8fcc(0x118)](_0x1f8fcc(0x11c),{'val':_0x497069,'ack':!![]});if(_0x4ad3b6[_0x1f8fcc(0x10f)][_0x1f8fcc(0x147)]&&_0x95021b)_0x2bd3bf[_0x1f8fcc(0x118)](_0x1f8fcc(0x144),{'val':_0x95021b,'ack':!![]});}else{if(_0x4ad3b6[_0x1f8fcc(0x111)]===_0x1f8fcc(0x14c)){if(_0x4ad3b6[_0x1f8fcc(0x10f)]['success'])try{const _0x177ec6=JSON[_0x1f8fcc(0x12d)](_0x4ad3b6[_0x1f8fcc(0x10f)][_0x1f8fcc(0x112)]);if(_0x177ec6['insulation'])_0x2bd3bf['setStateAsync'](_0x1f8fcc(0x12c),{'val':JSON[_0x1f8fcc(0x16b)](_0x177ec6['insulation']),'ack':!![]});if(_0x177ec6[_0x1f8fcc(0x14a)])_0x2bd3bf[_0x1f8fcc(0x118)](_0x1f8fcc(0x127),{'val':JSON['stringify'](_0x177ec6[_0x1f8fcc(0x14a)]),'ack':!![]});}catch(_0xefe40b){}}else{if(_0x4ad3b6[_0x1f8fcc(0x111)]===_0x1f8fcc(0x153)){if(_0x4ad3b6['payload']['success'])_0x2bd3bf[_0x1f8fcc(0x156)][_0x1f8fcc(0x128)]('‚úÖ\x20HEALTH\x20TRAINED.');}else{if(_0x4ad3b6['type']===_0x1f8fcc(0x154))_0x2bd3bf['setStateAsync'](_0x1f8fcc(0x130),{'val':new Date()[_0x1f8fcc(0x14d)](),'ack':!![]}),_0x2bd3bf['setStateAsync'](_0x1f8fcc(0x143),{'val':_0x4ad3b6[_0x1f8fcc(0x10f)][_0x1f8fcc(0x162)],'ack':!![]});else{if(_0x4ad3b6['type']===_0x1f8fcc(0x16c)){const {speed_trend:_0x323ccf}=_0x4ad3b6[_0x1f8fcc(0x10f)];if(_0x323ccf!==undefined)_0x2bd3bf[_0x1f8fcc(0x118)](_0x1f8fcc(0x120),{'val':_0x323ccf,'ack':!![]});}else{if(_0x4ad3b6['type']===_0x1f8fcc(0x12b)){const {forecast:_0x469c65}=_0x4ad3b6['payload'];if(_0x469c65)_0x2bd3bf[_0x1f8fcc(0x118)](_0x1f8fcc(0x12f),{'val':JSON['stringify'](_0x469c65),'ack':!![]});}else{if(_0x4ad3b6[_0x1f8fcc(0x111)]===_0x1f8fcc(0x137)){const {times:_0x157a85}=_0x4ad3b6[_0x1f8fcc(0x10f)];if(_0x157a85)_0x2bd3bf[_0x1f8fcc(0x118)]('analysis.energy.warmupTimes',{'val':JSON['stringify'](_0x157a85),'ack':!![]});}else{if(_0x4ad3b6[_0x1f8fcc(0x111)]==='PINN_PREDICT_RESULT'){const {forecast:_0x1083d1}=_0x4ad3b6[_0x1f8fcc(0x10f)];if(_0x1083d1)_0x2bd3bf[_0x1f8fcc(0x118)](_0x1f8fcc(0x134),{'val':JSON[_0x1f8fcc(0x16b)](_0x1083d1),'ack':!![]});}else{if(_0x4ad3b6['type']===_0x1f8fcc(0x13b)){const {alerts:_0x390daf}=_0x4ad3b6[_0x1f8fcc(0x10f)];if(_0x390daf)_0x2bd3bf[_0x1f8fcc(0x118)](_0x1f8fcc(0x142),{'val':JSON[_0x1f8fcc(0x16b)](_0x390daf),'ack':!![]});}else{if(_0x4ad3b6[_0x1f8fcc(0x111)]==='ENERGY_OPTIMIZE_RESULT'){const {proposals:_0xeb95c4}=_0x4ad3b6[_0x1f8fcc(0x10f)];_0x2bd3bf[_0x1f8fcc(0x148)](_0x1f8fcc(0x131),(_0x4289e1,_0x46104c)=>{const _0x9f1abd=_0x1f8fcc;_0x46104c&&_0x46104c[_0x9f1abd(0x13d)]===!![]&&_0xeb95c4&&_0xeb95c4[_0x9f1abd(0x10c)]>0x0&&automation[_0x9f1abd(0x140)](_0x2bd3bf,_0xeb95c4);});}else{if(_0x4ad3b6[_0x1f8fcc(0x111)]===_0x1f8fcc(0x141)){const {room:_0x555399,propagation:_0x525629}=_0x4ad3b6['payload'];let _0x4d6b24=_0x1f8fcc(0x16d),_0x8572d0=0x0;if(_0x525629){const _0x11cf4c=Object[_0x1f8fcc(0x113)](_0x525629);_0x11cf4c['length']>0x0&&(_0x4d6b24=_0x11cf4c[0x0][0x0],_0x8572d0=_0x11cf4c[0x0][0x1]);}_0x2bd3bf[_0x1f8fcc(0x118)](_0x1f8fcc(0x121),{'val':_0x4d6b24,'ack':!![]}),_0x2bd3bf[_0x1f8fcc(0x118)](_0x1f8fcc(0x12e),{'val':_0x8572d0,'ack':!![]}),automation[_0x1f8fcc(0x152)](_0x2bd3bf,_0x4d6b24,_0x8572d0);}else{if(_0x4ad3b6[_0x1f8fcc(0x111)]===_0x1f8fcc(0x12a)){const {probabilities:_0x4a6bff}=_0x4ad3b6['payload'];if(_0x4a6bff){_0x2bd3bf[_0x1f8fcc(0x118)](_0x1f8fcc(0x15b),{'val':JSON[_0x1f8fcc(0x16b)](_0x4a6bff),'ack':!![]});const _0x41c7bc=Object[_0x1f8fcc(0x10d)](_0x4a6bff);if(_0x41c7bc[_0x1f8fcc(0x10c)]>0x0){const _0x1d2ff6=_0x41c7bc[0x0],_0x3dee9f=_0x4a6bff[_0x1d2ff6];_0x2bd3bf[_0x1f8fcc(0x118)](_0x1f8fcc(0x159),{'val':_0x1d2ff6,'ack':!![]}),_0x2bd3bf[_0x1f8fcc(0x118)]('analysis.prediction.trackerConfidence',{'val':_0x3dee9f,'ack':!![]});}}}else{if(_0x4ad3b6[_0x1f8fcc(0x111)]===_0x1f8fcc(0x155)){const {patterns:_0x3b92e5}=_0x4ad3b6[_0x1f8fcc(0x10f)];if(_0x3b92e5&&_0x3b92e5[_0x1f8fcc(0x10c)]>0x0)_0x2bd3bf[_0x1f8fcc(0x118)](_0x1f8fcc(0x15e),{'val':JSON[_0x1f8fcc(0x16b)](_0x3b92e5),'ack':!![]});}}}}}}}}}}}}}}}}function a4_0x1232(_0x2c838b,_0x2986cb){const _0x3102e0=a4_0x59b2();return a4_0x1232=function(_0x3351fa,_0x42541b){_0x3351fa=_0x3351fa-0x10a;let _0x59b2b5=_0x3102e0[_0x3351fa];return _0x59b2b5;},a4_0x1232(_0x2c838b,_0x2986cb);}function startService(_0x25103e,_0x49286b){const _0x135f3c=a4_0x31edac;let _0x213dd2=_0x135f3c(0x16a);if(fs[_0x135f3c(0x11a)](_0x49286b))_0x213dd2=_0x49286b;try{const _0x1c2062=path[_0x135f3c(0x167)](__dirname,'..',_0x135f3c(0x11e),_0x135f3c(0x116));pythonProcess=spawn(_0x213dd2,[_0x1c2062]),pythonProcess['stdout']['on'](_0x135f3c(0x149),_0x33a7e4=>{const _0x5dd8a2=_0x135f3c,_0x28ea4b=_0x33a7e4[_0x5dd8a2(0x10a)]()[_0x5dd8a2(0x115)]('\x0a');_0x28ea4b[_0x5dd8a2(0x15f)](_0x64975f=>{const _0xa001b1=_0x5dd8a2,_0x32c0d6=_0x64975f[_0xa001b1(0x14f)]();if(!_0x32c0d6)return;if(_0x32c0d6[_0xa001b1(0x13c)](_0xa001b1(0x10e)))_0x25103e['log'][_0xa001b1(0x166)]('[PYTHON]\x20'+_0x32c0d6['substring'](0x5)[_0xa001b1(0x14f)]());else{if(_0x32c0d6[_0xa001b1(0x13c)](_0xa001b1(0x169)))try{const _0x4060ec=JSON['parse'](_0x32c0d6[_0xa001b1(0x164)](0x8)['trim']());handleResult(_0x25103e,_0x4060ec);}catch(_0x58d0be){}}});}),pythonProcess['on'](_0x135f3c(0x136),_0x66f9e8=>{pythonProcess=null;}),_0x25103e[_0x135f3c(0x11b)]=(_0x4a7f37,_0x4ec196)=>send(_0x25103e,_0x4a7f37,_0x4ec196);}catch(_0x521160){_0x25103e[_0x135f3c(0x156)][_0x135f3c(0x110)](_0x135f3c(0x117)+_0x521160['message']);}}function stopService(_0x1fa5a4){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x20c5cd){}pythonProcess=null;}}module[a4_0x31edac(0x161)]={'startService':startService,'stopService':stopService,'send':send};function a4_0x59b2(){const _0x15b8a0=['stringify','GAIT_RESULT','Unknown','toString','3HFaOXm','length','keys','[LOG]','payload','error','type','details','entries','(((.+)+)+)+$','split','service.py','Error\x20launching\x20Python:\x20','setStateAsync','2013696TcUPOJ','existsSync','sendToPythonWrapper','analysis.training.status','üêç\x20Python\x20Pong','python_service','constructor','analysis.health.gaitSpeed','analysis.prediction.nextRoom','write','15630qtuUwb','analysis.alertReason','PONG','3609CbzZFp','analysis.energy.heatingScore','info','threshold','TRACKER_RESULT','ENERGY_PREDICT_RESULT','analysis.energy.insulationScore','parse','analysis.prediction.confidence','analysis.energy.forecast','analysis.health.lastCheck','analysis.energy.mpcActive','Failed:\x20','315914jgYVjn','analysis.energy.pinnForecast','SECURITY_RESULT','close','WARMUP_RESULT','stdin','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','toLocaleTimeString','VENTILATION_ALERT','startsWith','val','toFixed','analysis.security.lastScore','applyEnergySavings','SIGNAL_RESULT','analysis.energy.ventilationAlerts','analysis.health.isAnomaly','analysis.security.currentThreshold','path','./setup','success','getState','data','heating','925wZIBol','ENERGY_TRAIN_RESULT','toISOString','analysis.security.lastCheck','trim','analysis.isAlert','9906VRUODR','handlePrediction','HEALTH_TRAIN_RESULT','HEALTH_RESULT','COMFORT_RESULT','log','sendNotification','search','analysis.prediction.trackerTopRoom','reason','analysis.prediction.trackerState','\x0aGrund:\x20','1053424MpikYh','analysis.automation.detectedPatterns','forEach','3978051CTwGLL','exports','is_anomaly','./automation','substring','2130888CKByuR','debug','join','apply','[RESULT]','python3'];a4_0x59b2=function(){return _0x15b8a0;};return a4_0x59b2();}