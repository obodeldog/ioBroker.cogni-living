const a4_0x568348=a4_0x4fd6;(function(_0x5a2834,_0xc978a2){const _0x1527a6=a4_0x4fd6,_0x2665c7=_0x5a2834();while(!![]){try{const _0x7062a=-parseInt(_0x1527a6(0x11e))/0x1*(parseInt(_0x1527a6(0x116))/0x2)+parseInt(_0x1527a6(0x164))/0x3+-parseInt(_0x1527a6(0x142))/0x4+parseInt(_0x1527a6(0x155))/0x5*(parseInt(_0x1527a6(0x122))/0x6)+-parseInt(_0x1527a6(0x10b))/0x7+-parseInt(_0x1527a6(0x110))/0x8+parseInt(_0x1527a6(0x114))/0x9;if(_0x7062a===_0xc978a2)break;else _0x2665c7['push'](_0x2665c7['shift']());}catch(_0x5b0b55){_0x2665c7['push'](_0x2665c7['shift']());}}}(a4_0x3d1e,0x8e52f));const a4_0x2f9ece=(function(){let _0x2ba4a2=!![];return function(_0x546f5d,_0x3a3201){const _0x3bd746=_0x2ba4a2?function(){const _0x1d6cb3=a4_0x4fd6;if(_0x3a3201){const _0x30fd5a=_0x3a3201[_0x1d6cb3(0x147)](_0x546f5d,arguments);return _0x3a3201=null,_0x30fd5a;}}:function(){};return _0x2ba4a2=![],_0x3bd746;};}()),a4_0x5dd917=a4_0x2f9ece(this,function(){const _0x1e6014=a4_0x4fd6;return a4_0x5dd917[_0x1e6014(0x15c)]()[_0x1e6014(0x104)]('(((.+)+)+)+$')[_0x1e6014(0x15c)]()[_0x1e6014(0x101)](a4_0x5dd917)[_0x1e6014(0x104)](_0x1e6014(0x121));});a4_0x5dd917();function a4_0x4fd6(_0x3d5aa0,_0x51fb9a){const _0x2f33bb=a4_0x3d1e();return a4_0x4fd6=function(_0x5dd917,_0x2f9ece){_0x5dd917=_0x5dd917-0x101;let _0x3d1ef4=_0x2f33bb[_0x5dd917];return _0x3d1ef4;},a4_0x4fd6(_0x3d5aa0,_0x51fb9a);}'use strict';const {spawn}=require(a4_0x568348(0x13f)),path=require(a4_0x568348(0x109)),fs=require('fs'),setup=require(a4_0x568348(0x13c)),automation=require(a4_0x568348(0x11c));let pythonProcess=null;function send(_0x2d2eed,_0x392a81,_0x41d206={}){const _0x17bf2d=a4_0x568348;if(!pythonProcess||!pythonProcess[_0x17bf2d(0x157)][_0x17bf2d(0x161)])return;const _0x2c41b2=JSON[_0x17bf2d(0x103)]({'command':_0x392a81,..._0x41d206});try{pythonProcess[_0x17bf2d(0x157)][_0x17bf2d(0x138)](_0x2c41b2+'\x0a');}catch(_0x41a071){}}function handleResult(_0x16eaf9,_0x484946){const _0x526621=a4_0x568348;if(_0x484946['type']===_0x526621(0x154))_0x16eaf9[_0x526621(0x135)][_0x526621(0x145)](_0x526621(0x15e));else{if(_0x484946[_0x526621(0x14c)]===_0x526621(0x15a)){const {anomaly_score:_0x3dac14,is_anomaly:_0x28cb7d,threshold:_0x3ec495,explanation:_0x349035}=_0x484946[_0x526621(0x11d)];_0x16eaf9[_0x526621(0x13a)]('analysis.security.lastScore',{'val':_0x3dac14,'ack':!![]}),_0x16eaf9[_0x526621(0x13a)](_0x526621(0x11a),{'val':new Date()[_0x526621(0x10a)](),'ack':!![]});if(_0x3ec495)_0x16eaf9[_0x526621(0x13a)]('analysis.security.currentThreshold',{'val':_0x3ec495,'ack':!![]});if(_0x28cb7d){let _0xc48126='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x3dac14[_0x526621(0x11f)](0x4)+')';if(_0x349035&&_0x349035!=='Unknown')_0xc48126+='\x0aGrund:\x20'+_0x349035;_0x16eaf9[_0x526621(0x13a)](_0x526621(0x125),{'val':!![],'ack':!![]}),_0x16eaf9['setStateAsync'](_0x526621(0x14d),{'val':_0xc48126,'ack':!![]}),setup[_0x526621(0x15d)](_0x16eaf9,_0x526621(0x141)+_0xc48126,![],!![]);}}else{if(_0x484946[_0x526621(0x14c)]===_0x526621(0x106)){const _0x47ed4e=_0x484946[_0x526621(0x11d)][_0x526621(0x12c)]||'',_0xa98bcd=_0x484946[_0x526621(0x11d)][_0x526621(0x14f)],_0x46c0a1=_0x484946[_0x526621(0x11d)][_0x526621(0x10e)]?'Success:\x20'+new Date()[_0x526621(0x123)]()+'\x20('+_0x47ed4e+')':_0x526621(0x13e)+_0x484946[_0x526621(0x11d)][_0x526621(0x108)];_0x16eaf9[_0x526621(0x13a)](_0x526621(0x152),{'val':_0x46c0a1,'ack':!![]});if(_0x484946[_0x526621(0x11d)]['success']&&_0xa98bcd)_0x16eaf9[_0x526621(0x13a)]('analysis.security.currentThreshold',{'val':_0xa98bcd,'ack':!![]});}else{if(_0x484946[_0x526621(0x14c)]==='ENERGY_TRAIN_RESULT'){if(_0x484946[_0x526621(0x11d)][_0x526621(0x10e)])try{const _0x2ee9b0=JSON[_0x526621(0x163)](_0x484946[_0x526621(0x11d)][_0x526621(0x12c)]);if(_0x2ee9b0['insulation'])_0x16eaf9['setStateAsync'](_0x526621(0x119),{'val':JSON[_0x526621(0x103)](_0x2ee9b0[_0x526621(0x13d)]),'ack':!![]});if(_0x2ee9b0[_0x526621(0x160)])_0x16eaf9[_0x526621(0x13a)](_0x526621(0x12e),{'val':JSON[_0x526621(0x103)](_0x2ee9b0[_0x526621(0x160)]),'ack':!![]});}catch(_0x42b2f1){}}else{if(_0x484946['type']===_0x526621(0x14e)){if(_0x484946[_0x526621(0x11d)][_0x526621(0x10e)])_0x16eaf9['log'][_0x526621(0x127)](_0x526621(0x13b));}else{if(_0x484946[_0x526621(0x14c)]==='HEALTH_RESULT')_0x16eaf9[_0x526621(0x13a)](_0x526621(0x130),{'val':new Date()[_0x526621(0x10a)](),'ack':!![]}),_0x16eaf9['setStateAsync'](_0x526621(0x144),{'val':_0x484946['payload'][_0x526621(0x112)],'ack':!![]});else{if(_0x484946[_0x526621(0x14c)]===_0x526621(0x10c)){const {speed_trend:_0x3d3cb3}=_0x484946[_0x526621(0x11d)];if(_0x3d3cb3!==undefined)_0x16eaf9[_0x526621(0x13a)]('analysis.health.gaitSpeed',{'val':_0x3d3cb3,'ack':!![]});}else{if(_0x484946['type']===_0x526621(0x10f)){const {forecast:_0x3871bd}=_0x484946[_0x526621(0x11d)];if(_0x3871bd)_0x16eaf9[_0x526621(0x13a)](_0x526621(0x132),{'val':JSON['stringify'](_0x3871bd),'ack':!![]});}else{if(_0x484946[_0x526621(0x14c)]===_0x526621(0x158)){const {times:_0xce7fd,sources:_0x398ec5,details:_0xe953aa}=_0x484946[_0x526621(0x11d)];if(_0xce7fd)_0x16eaf9[_0x526621(0x13a)]('analysis.energy.warmupTimes',{'val':JSON[_0x526621(0x103)](_0xce7fd),'ack':!![]});if(_0x398ec5)_0x16eaf9[_0x526621(0x13a)](_0x526621(0x146),{'val':JSON[_0x526621(0x103)](_0x398ec5),'ack':!![]});if(_0xe953aa)_0x16eaf9[_0x526621(0x13a)](_0x526621(0x134),{'val':JSON['stringify'](_0xe953aa),'ack':!![]});}else{if(_0x484946[_0x526621(0x14c)]===_0x526621(0x151)){const {penalties:_0x4a957b}=_0x484946[_0x526621(0x11d)];if(_0x4a957b)_0x16eaf9[_0x526621(0x13a)](_0x526621(0x111),{'val':JSON[_0x526621(0x103)](_0x4a957b),'ack':!![]});}else{if(_0x484946[_0x526621(0x14c)]===_0x526621(0x107)){const {forecast:_0x1a6529}=_0x484946[_0x526621(0x11d)];if(_0x1a6529)_0x16eaf9[_0x526621(0x13a)](_0x526621(0x143),{'val':JSON[_0x526621(0x103)](_0x1a6529),'ack':!![]});}else{if(_0x484946[_0x526621(0x14c)]===_0x526621(0x10d)){const {alerts:_0x2fb6f5}=_0x484946['payload'];if(_0x2fb6f5)_0x16eaf9['setStateAsync'](_0x526621(0x139),{'val':JSON[_0x526621(0x103)](_0x2fb6f5),'ack':!![]});}else{if(_0x484946[_0x526621(0x14c)]==='ENERGY_OPTIMIZE_RESULT'){const {proposals:_0x414495}=_0x484946[_0x526621(0x11d)];_0x16eaf9[_0x526621(0x11b)](_0x526621(0x148),(_0x528fca,_0x37ded8)=>{const _0x238d01=_0x526621;_0x37ded8&&_0x37ded8[_0x238d01(0x12b)]===!![]&&_0x414495&&_0x414495[_0x238d01(0x115)]>0x0&&automation[_0x238d01(0x150)](_0x16eaf9,_0x414495);});}else{if(_0x484946[_0x526621(0x14c)]==='SIGNAL_RESULT'){const {room:_0x51bd4b,propagation:_0x554872}=_0x484946[_0x526621(0x11d)];let _0x35bea9=_0x526621(0x131),_0xddb7e9=0x0;if(_0x554872){const _0x42c37a=Object[_0x526621(0x120)](_0x554872);_0x42c37a[_0x526621(0x115)]>0x0&&(_0x35bea9=_0x42c37a[0x0][0x0],_0xddb7e9=_0x42c37a[0x0][0x1]);}_0x16eaf9[_0x526621(0x13a)]('analysis.prediction.nextRoom',{'val':_0x35bea9,'ack':!![]}),_0x16eaf9[_0x526621(0x13a)](_0x526621(0x14a),{'val':_0xddb7e9,'ack':!![]}),automation[_0x526621(0x133)](_0x16eaf9,_0x35bea9,_0xddb7e9);}else{if(_0x484946[_0x526621(0x14c)]===_0x526621(0x149)){const {probabilities:_0x2cc5af}=_0x484946[_0x526621(0x11d)];if(_0x2cc5af){_0x16eaf9[_0x526621(0x13a)](_0x526621(0x117),{'val':JSON[_0x526621(0x103)](_0x2cc5af),'ack':!![]});const _0x57dc85=Object[_0x526621(0x136)](_0x2cc5af);if(_0x57dc85[_0x526621(0x115)]>0x0){const _0x2e195b=_0x57dc85[0x0],_0x43700f=_0x2cc5af[_0x2e195b];_0x16eaf9[_0x526621(0x13a)](_0x526621(0x126),{'val':_0x2e195b,'ack':!![]}),_0x16eaf9['setStateAsync'](_0x526621(0x159),{'val':_0x43700f,'ack':!![]});}}}else{if(_0x484946[_0x526621(0x14c)]==='COMFORT_RESULT'){const {patterns:_0x4db859}=_0x484946[_0x526621(0x11d)];if(_0x4db859&&_0x4db859[_0x526621(0x115)]>0x0)_0x16eaf9[_0x526621(0x13a)](_0x526621(0x153),{'val':JSON['stringify'](_0x4db859),'ack':!![]});}}}}}}}}}}}}}}}}}function a4_0x3d1e(){const _0x398d55=['type','analysis.alertReason','HEALTH_TRAIN_RESULT','threshold','applyEnergySavings','RL_PENALTY_UPDATE','analysis.training.status','analysis.automation.detectedPatterns','PONG','4790brJgRL','kill','stdin','WARMUP_RESULT','analysis.prediction.trackerConfidence','SECURITY_RESULT','forEach','toString','sendNotification','ðŸ\x20Python\x20Pong','close','heating','writable','startsWith','parse','2419896wZLghN','constructor','[RESULT]','stringify','search','stdout','TRAINING_COMPLETE','PINN_PREDICT_RESULT','reason','path','toISOString','6338472fUWvzb','GAIT_RESULT','VENTILATION_ALERT','success','ENERGY_PREDICT_RESULT','7460776jTTecv','analysis.energy.rlPenalties','is_anomaly','data','20596680dINOIb','length','696GxSOZg','analysis.prediction.trackerState','service.py','analysis.energy.insulationScore','analysis.security.lastCheck','getState','./automation','payload','3019weCjwl','toFixed','entries','(((.+)+)+)+$','5358imSLXq','toLocaleTimeString','[LOG]','analysis.isAlert','analysis.prediction.trackerTopRoom','info','substring','error','trim','val','details','existsSync','analysis.energy.heatingScore','exports','analysis.health.lastCheck','Unknown','analysis.energy.forecast','handlePrediction','analysis.energy.warmupDetails','log','keys','[PYTHON]\x20','write','analysis.energy.ventilationAlerts','setStateAsync','âœ…\x20HEALTH\x20TRAINED.','./setup','insulation','Failed:\x20','child_process','Error\x20launching\x20Python:\x20','âš ï¸\x20SECURITY\x20ALARM:\x20','1915928GOYjKp','analysis.energy.pinnForecast','analysis.health.isAnomaly','debug','analysis.energy.warmupSources','apply','analysis.energy.mpcActive','TRACKER_RESULT','analysis.prediction.confidence','sendToPythonWrapper'];a4_0x3d1e=function(){return _0x398d55;};return a4_0x3d1e();}function startService(_0x1a9476,_0x1e29fb){const _0x28bfb0=a4_0x568348;let _0x463e98='python3';if(fs[_0x28bfb0(0x12d)](_0x1e29fb))_0x463e98=_0x1e29fb;try{const _0x2b2985=path['join'](__dirname,'..','python_service',_0x28bfb0(0x118));pythonProcess=spawn(_0x463e98,[_0x2b2985]),pythonProcess[_0x28bfb0(0x105)]['on'](_0x28bfb0(0x113),_0x28a371=>{const _0x2ed0e6=_0x28bfb0,_0x19680c=_0x28a371['toString']()['split']('\x0a');_0x19680c[_0x2ed0e6(0x15b)](_0x3fe2cc=>{const _0xea5132=_0x2ed0e6,_0x1ded57=_0x3fe2cc['trim']();if(!_0x1ded57)return;if(_0x1ded57[_0xea5132(0x162)](_0xea5132(0x124)))_0x1a9476[_0xea5132(0x135)][_0xea5132(0x145)](_0xea5132(0x137)+_0x1ded57[_0xea5132(0x128)](0x5)[_0xea5132(0x12a)]());else{if(_0x1ded57[_0xea5132(0x162)](_0xea5132(0x102)))try{const _0x3e0bd9=JSON['parse'](_0x1ded57[_0xea5132(0x128)](0x8)['trim']());handleResult(_0x1a9476,_0x3e0bd9);}catch(_0x43e16a){}}});}),pythonProcess['on'](_0x28bfb0(0x15f),_0x3f7cfe=>{pythonProcess=null;}),_0x1a9476[_0x28bfb0(0x14b)]=(_0x934339,_0xf55ac2)=>send(_0x1a9476,_0x934339,_0xf55ac2);}catch(_0x3a42a2){_0x1a9476[_0x28bfb0(0x135)][_0x28bfb0(0x129)](_0x28bfb0(0x140)+_0x3a42a2['message']);}}function stopService(_0xbcdaf4){const _0x1188b5=a4_0x568348;if(pythonProcess){try{pythonProcess[_0x1188b5(0x156)]();}catch(_0x54ac7b){}pythonProcess=null;}}module[a4_0x568348(0x12f)]={'startService':startService,'stopService':stopService,'send':send};