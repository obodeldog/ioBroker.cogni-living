const a4_0x3ee70e=a4_0x3dd4;(function(_0x1fb107,_0x252c3d){const _0x47d3a1=a4_0x3dd4,_0xae34a1=_0x1fb107();while(!![]){try{const _0xe09f36=parseInt(_0x47d3a1(0x176))/0x1+-parseInt(_0x47d3a1(0x198))/0x2*(parseInt(_0x47d3a1(0x16f))/0x3)+-parseInt(_0x47d3a1(0x167))/0x4+-parseInt(_0x47d3a1(0x14c))/0x5+parseInt(_0x47d3a1(0x14d))/0x6+parseInt(_0x47d3a1(0x168))/0x7+parseInt(_0x47d3a1(0x191))/0x8;if(_0xe09f36===_0x252c3d)break;else _0xae34a1['push'](_0xae34a1['shift']());}catch(_0x19c49a){_0xae34a1['push'](_0xae34a1['shift']());}}}(a4_0x5950,0x47169));function a4_0x5950(){const _0x340860=['ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20','stdout','analysis.energy.mpcActive','sendToPythonWrapper','analysis.prediction.nextRoom','HEALTH_RESULT','PINN_PREDICT_RESULT','type','[PYTHON\x20ERR]\x20','analysis.prediction.trackerTopRoom','.\x20Please\x20create\x20this\x20file!','ðŸ\x20Python\x20Pong','Success:\x20','GAIT_RESULT','analysis.health.lastCheck','stdin','toLocaleTimeString','âš ï¸\x20SECURITY\x20ALARM:\x20','toString','substring','threshold','reason','stderr','\x0aGrund:\x20','(((.+)+)+)+$','analysis.energy.rlPenalties','VENTILATION_ALERT','Error\x20launching\x20Python:\x20','[RESULT]','applyEnergySavings','WARMUP_RESULT','Python\x20process\x20exited\x20with\x20code\x20','analysis.prediction.confidence','info','stringify','1697745TLxhSX','886962SgNrsQ','write','debug','analysis.energy.ventilationAlerts','message','analysis.training.status','analysis.isAlert','[LOG]','val','warn','ENERGY_OPTIMIZE_RESULT','analysis.health.gaitSensors','analysis.prediction.trackerConfidence','entries','analysis.energy.pinnForecast','analysis.automation.detectedPatterns','insulation','exports','SIGNAL_RESULT','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','join','handlePrediction','startsWith','./automation','success','apply','1467044eHLgAC','1570765yTNNeN','kill','is_anomaly','analysis.health.activityTrend','length','\x20AND\x20','analysis.security.lastCheck','1543197UhSRrh','forEach','getState','Unknown','data','close','details','345691YyPNPn','analysis.energy.forecast','log','error','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20','Failed:\x20','heating','child_process','toISOString','HEALTH_TREND_RESULT','setStateAsync','payload','2-digit','sendNotification','ENERGY_TRAIN_RESULT','analysis.health.gaitSpeed','isArray','python_service','analysis.prediction.trackerState','existsSync','analysis.health.gaitDebug','analysis.energy.heatingScore','toLocaleDateString','constructor','trim','service.py','short','6351784lGHRCT','python3','analysis.energy.warmupSources','parse','search','ðŸ“ˆ\x20Health\x20Trend:\x20','analysis.energy.warmupDetails','2wXjyOZ','analysis.security.currentThreshold','de-DE'];a4_0x5950=function(){return _0x340860;};return a4_0x5950();}const a4_0x43ac73=(function(){let _0x1c749a=!![];return function(_0x2a7d23,_0x3cd6e6){const _0x1ad436=_0x1c749a?function(){const _0x38bc06=a4_0x3dd4;if(_0x3cd6e6){const _0x2e0b9b=_0x3cd6e6[_0x38bc06(0x166)](_0x2a7d23,arguments);return _0x3cd6e6=null,_0x2e0b9b;}}:function(){};return _0x1c749a=![],_0x1ad436;};}()),a4_0x348141=a4_0x43ac73(this,function(){const _0x57fd1c=a4_0x3dd4;return a4_0x348141[_0x57fd1c(0x1ad)]()[_0x57fd1c(0x195)](_0x57fd1c(0x141))[_0x57fd1c(0x1ad)]()[_0x57fd1c(0x18d)](a4_0x348141)[_0x57fd1c(0x195)](_0x57fd1c(0x141));});a4_0x348141();'use strict';const {spawn}=require(a4_0x3ee70e(0x17d)),path=require('path'),fs=require('fs'),setup=require('./setup'),automation=require(a4_0x3ee70e(0x164));let pythonProcess=null;function send(_0x2abed4,_0x1d08ea,_0x5e3b4a={}){const _0x1915d2=a4_0x3ee70e;if(!pythonProcess||!pythonProcess[_0x1915d2(0x1aa)]['writable'])return;const _0x3109ed=JSON[_0x1915d2(0x14b)]({'command':_0x1d08ea,..._0x5e3b4a});try{pythonProcess['stdin'][_0x1915d2(0x14e)](_0x3109ed+'\x0a');}catch(_0x237818){}}function handleResult(_0x534372,_0x3cb61b){const _0x378479=a4_0x3ee70e;if(_0x3cb61b[_0x378479(0x1a2)]==='PONG')_0x534372['log'][_0x378479(0x14f)](_0x378479(0x1a6));else{if(_0x3cb61b[_0x378479(0x1a2)]==='SECURITY_RESULT'){const {anomaly_score:_0x2321ea,is_anomaly:_0x3a6f18,threshold:_0x1dc853,explanation:_0x1a56e7}=_0x3cb61b['payload'];_0x534372[_0x378479(0x180)]('analysis.security.lastScore',{'val':_0x2321ea,'ack':!![]}),_0x534372['setStateAsync'](_0x378479(0x16e),{'val':new Date()[_0x378479(0x17e)](),'ack':!![]});if(_0x1dc853)_0x534372[_0x378479(0x180)](_0x378479(0x199),{'val':_0x1dc853,'ack':!![]});if(_0x3a6f18){let _0x1d2072=_0x378479(0x160)+_0x2321ea['toFixed'](0x4)+')';if(_0x1a56e7&&_0x1a56e7!==_0x378479(0x172))_0x1d2072+=_0x378479(0x1b2)+_0x1a56e7;_0x534372['setStateAsync'](_0x378479(0x153),{'val':!![],'ack':!![]}),_0x534372[_0x378479(0x180)]('analysis.alertReason',{'val':_0x1d2072,'ack':!![]}),setup[_0x378479(0x183)](_0x534372,_0x378479(0x1ac)+_0x1d2072,![],!![]);}}else{if(_0x3cb61b['type']==='TRAINING_COMPLETE'){const _0x47529c=_0x3cb61b[_0x378479(0x181)][_0x378479(0x175)]||'',_0x3bf589=_0x3cb61b['payload'][_0x378479(0x1af)],_0x5164d5=_0x3cb61b[_0x378479(0x181)][_0x378479(0x165)]?_0x378479(0x1a7)+new Date()[_0x378479(0x1ab)]()+'\x20('+_0x47529c+')':_0x378479(0x17b)+_0x3cb61b['payload'][_0x378479(0x1b0)];_0x534372[_0x378479(0x180)](_0x378479(0x152),{'val':_0x5164d5,'ack':!![]});if(_0x3cb61b[_0x378479(0x181)][_0x378479(0x165)]&&_0x3bf589)_0x534372['setStateAsync'](_0x378479(0x199),{'val':_0x3bf589,'ack':!![]});}else{if(_0x3cb61b[_0x378479(0x1a2)]===_0x378479(0x184)){if(_0x3cb61b['payload'][_0x378479(0x165)])try{const _0x38285e=JSON['parse'](_0x3cb61b['payload'][_0x378479(0x175)]);if(_0x38285e[_0x378479(0x15d)])_0x534372[_0x378479(0x180)]('analysis.energy.insulationScore',{'val':JSON['stringify'](_0x38285e[_0x378479(0x15d)]),'ack':!![]});if(_0x38285e[_0x378479(0x17c)])_0x534372[_0x378479(0x180)](_0x378479(0x18b),{'val':JSON[_0x378479(0x14b)](_0x38285e[_0x378479(0x17c)]),'ack':!![]});}catch(_0x17c2ad){}}else{if(_0x3cb61b[_0x378479(0x1a2)]==='HEALTH_TRAIN_RESULT'){if(_0x3cb61b[_0x378479(0x181)]['success']){_0x534372[_0x378479(0x178)][_0x378479(0x14a)]('âœ…\x20HEALTH\x20TRAINED.');const _0x3c6c3c=new Date(),_0x2e085f=_0x3c6c3c[_0x378479(0x18c)]('de-DE',{'day':_0x378479(0x182),'month':_0x378479(0x190),'hour':_0x378479(0x182),'minute':_0x378479(0x182)});_0x534372[_0x378479(0x180)](_0x378479(0x1a9),{'val':_0x2e085f,'ack':!![]});}}else{if(_0x3cb61b[_0x378479(0x1a2)]===_0x378479(0x1a0)){const _0x43e196=new Date(),_0x5662e9=_0x43e196[_0x378479(0x18c)](_0x378479(0x19a),{'day':_0x378479(0x182),'month':'short','hour':_0x378479(0x182),'minute':'2-digit'});_0x534372['setStateAsync'](_0x378479(0x1a9),{'val':_0x5662e9,'ack':!![]}),_0x534372[_0x378479(0x180)]('analysis.health.isAnomaly',{'val':_0x3cb61b[_0x378479(0x181)][_0x378479(0x16a)],'ack':!![]});}else{if(_0x3cb61b[_0x378479(0x1a2)]===_0x378479(0x17f)){const {trend_percent:_0x346902,details:_0x5cd9fe}=_0x3cb61b[_0x378479(0x181)],_0x1ea020=new Date(),_0x406bf1=_0x1ea020[_0x378479(0x18c)](_0x378479(0x19a),{'day':_0x378479(0x182),'month':_0x378479(0x190),'hour':_0x378479(0x182),'minute':_0x378479(0x182)});_0x534372[_0x378479(0x180)](_0x378479(0x1a9),{'val':_0x406bf1,'ack':!![]}),_0x534372[_0x378479(0x180)](_0x378479(0x16b),{'val':_0x346902,'ack':!![]}),_0x534372[_0x378479(0x178)][_0x378479(0x14a)](_0x378479(0x196)+_0x5cd9fe);}else{if(_0x3cb61b[_0x378479(0x1a2)]===_0x378479(0x1a8)){const {speed_trend:_0x23ccdb,sensors:_0x387452,proof:_0x52bdd8}=_0x3cb61b[_0x378479(0x181)];if(_0x23ccdb!==undefined)_0x534372[_0x378479(0x180)](_0x378479(0x185),{'val':_0x23ccdb,'ack':!![]});if(_0x387452&&Array[_0x378479(0x186)](_0x387452))_0x534372[_0x378479(0x180)](_0x378479(0x158),{'val':_0x387452[_0x378479(0x161)](',\x20'),'ack':!![]});if(_0x52bdd8)_0x534372[_0x378479(0x180)](_0x378479(0x18a),{'val':_0x52bdd8,'ack':!![]});}else{if(_0x3cb61b[_0x378479(0x1a2)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x3d20f0}=_0x3cb61b[_0x378479(0x181)];if(_0x3d20f0)_0x534372[_0x378479(0x180)](_0x378479(0x177),{'val':JSON['stringify'](_0x3d20f0),'ack':!![]});}else{if(_0x3cb61b[_0x378479(0x1a2)]===_0x378479(0x147)){const {times:_0x3b2d15,sources:_0x3217ca,details:_0x5cadad}=_0x3cb61b['payload'];if(_0x3b2d15)_0x534372[_0x378479(0x180)]('analysis.energy.warmupTimes',{'val':JSON[_0x378479(0x14b)](_0x3b2d15),'ack':!![]});if(_0x3217ca)_0x534372['setStateAsync'](_0x378479(0x193),{'val':JSON[_0x378479(0x14b)](_0x3217ca),'ack':!![]});if(_0x5cadad)_0x534372['setStateAsync'](_0x378479(0x197),{'val':JSON[_0x378479(0x14b)](_0x5cadad),'ack':!![]});}else{if(_0x3cb61b[_0x378479(0x1a2)]==='RL_PENALTY_UPDATE'){const {penalties:_0x806a10}=_0x3cb61b[_0x378479(0x181)];if(_0x806a10)_0x534372[_0x378479(0x180)](_0x378479(0x142),{'val':JSON[_0x378479(0x14b)](_0x806a10),'ack':!![]});}else{if(_0x3cb61b[_0x378479(0x1a2)]===_0x378479(0x1a1)){const {forecast:_0x4879c9}=_0x3cb61b[_0x378479(0x181)];if(_0x4879c9)_0x534372[_0x378479(0x180)](_0x378479(0x15b),{'val':JSON[_0x378479(0x14b)](_0x4879c9),'ack':!![]});}else{if(_0x3cb61b['type']===_0x378479(0x143)){const {alerts:_0x442ecf}=_0x3cb61b['payload'];if(_0x442ecf)_0x534372[_0x378479(0x180)](_0x378479(0x150),{'val':JSON[_0x378479(0x14b)](_0x442ecf),'ack':!![]});}else{if(_0x3cb61b[_0x378479(0x1a2)]===_0x378479(0x157)){const {proposals:_0x7feddc}=_0x3cb61b[_0x378479(0x181)];_0x534372[_0x378479(0x171)](_0x378479(0x19d),(_0x529b1f,_0x53f7e3)=>{const _0x5db7af=_0x378479;_0x53f7e3&&_0x53f7e3[_0x5db7af(0x155)]===!![]&&_0x7feddc&&_0x7feddc[_0x5db7af(0x16c)]>0x0&&automation[_0x5db7af(0x146)](_0x534372,_0x7feddc);});}else{if(_0x3cb61b[_0x378479(0x1a2)]===_0x378479(0x15f)){const {room:_0x42315d,propagation:_0x466961}=_0x3cb61b['payload'];let _0x11bf05=_0x378479(0x172),_0x5e061e=0x0;if(_0x466961){const _0x21934c=Object[_0x378479(0x15a)](_0x466961);_0x21934c[_0x378479(0x16c)]>0x0&&(_0x11bf05=_0x21934c[0x0][0x0],_0x5e061e=_0x21934c[0x0][0x1]);}_0x534372['setStateAsync'](_0x378479(0x19f),{'val':_0x11bf05,'ack':!![]}),_0x534372[_0x378479(0x180)](_0x378479(0x149),{'val':_0x5e061e,'ack':!![]}),automation[_0x378479(0x162)](_0x534372,_0x11bf05,_0x5e061e);}else{if(_0x3cb61b[_0x378479(0x1a2)]==='TRACKER_RESULT'){const {probabilities:_0x520f4a}=_0x3cb61b[_0x378479(0x181)];if(_0x520f4a){_0x534372[_0x378479(0x180)](_0x378479(0x188),{'val':JSON[_0x378479(0x14b)](_0x520f4a),'ack':!![]});const _0x2685fa=Object['keys'](_0x520f4a);if(_0x2685fa[_0x378479(0x16c)]>0x0){const _0x39d53e=_0x2685fa[0x0],_0xd80e3f=_0x520f4a[_0x39d53e];_0x534372[_0x378479(0x180)](_0x378479(0x1a4),{'val':_0x39d53e,'ack':!![]}),_0x534372[_0x378479(0x180)](_0x378479(0x159),{'val':_0xd80e3f,'ack':!![]});}}}else{if(_0x3cb61b[_0x378479(0x1a2)]==='COMFORT_RESULT'){const {patterns:_0xda7252}=_0x3cb61b[_0x378479(0x181)];if(_0xda7252&&_0xda7252[_0x378479(0x16c)]>0x0)_0x534372[_0x378479(0x180)](_0x378479(0x15c),{'val':JSON[_0x378479(0x14b)](_0xda7252),'ack':!![]});}}}}}}}}}}}}}}}}}}function startService(_0x71a7e3,_0x223cc1){const _0x1887b4=a4_0x3ee70e;let _0x58dbe4=_0x1887b4(0x192);if(fs['existsSync'](_0x223cc1))_0x58dbe4=_0x223cc1;const _0x129b2a=path[_0x1887b4(0x161)](__dirname,'..',_0x1887b4(0x18f)),_0x220fcc=path['join'](__dirname,'..',_0x1887b4(0x187),_0x1887b4(0x18f));let _0x40d9d8='';if(fs[_0x1887b4(0x189)](_0x129b2a))_0x40d9d8=_0x129b2a;else{if(fs[_0x1887b4(0x189)](_0x220fcc))_0x40d9d8=_0x220fcc;else{_0x71a7e3['log'][_0x1887b4(0x179)](_0x1887b4(0x17a)+_0x129b2a+_0x1887b4(0x16d)+_0x220fcc+_0x1887b4(0x1a5));return;}}try{_0x71a7e3[_0x1887b4(0x178)][_0x1887b4(0x14a)](_0x1887b4(0x19b)+_0x58dbe4+'\x20'+_0x40d9d8),pythonProcess=spawn(_0x58dbe4,[_0x40d9d8]),pythonProcess[_0x1887b4(0x19c)]['on']('data',_0x3077f5=>{const _0x214358=_0x1887b4,_0x21bb0d=_0x3077f5[_0x214358(0x1ad)]()['split']('\x0a');_0x21bb0d[_0x214358(0x170)](_0x46785f=>{const _0x4e9278=_0x214358,_0x248555=_0x46785f[_0x4e9278(0x18e)]();if(!_0x248555)return;if(_0x248555['startsWith'](_0x4e9278(0x154)))_0x71a7e3[_0x4e9278(0x178)]['debug']('[PYTHON]\x20'+_0x248555[_0x4e9278(0x1ae)](0x5)[_0x4e9278(0x18e)]());else{if(_0x248555[_0x4e9278(0x163)](_0x4e9278(0x145)))try{const _0x3e2f85=JSON[_0x4e9278(0x194)](_0x248555['substring'](0x8)[_0x4e9278(0x18e)]());handleResult(_0x71a7e3,_0x3e2f85);}catch(_0x3e0ac1){}}});}),pythonProcess[_0x1887b4(0x1b1)]['on'](_0x1887b4(0x173),_0x166d24=>{const _0x4c1bbf=_0x1887b4;_0x71a7e3[_0x4c1bbf(0x178)][_0x4c1bbf(0x179)](_0x4c1bbf(0x1a3)+_0x166d24[_0x4c1bbf(0x1ad)]()[_0x4c1bbf(0x18e)]());}),pythonProcess['on'](_0x1887b4(0x174),_0x3c02d7=>{const _0x4a8390=_0x1887b4;_0x71a7e3[_0x4a8390(0x178)][_0x4a8390(0x156)](_0x4a8390(0x148)+_0x3c02d7),pythonProcess=null;}),_0x71a7e3[_0x1887b4(0x19e)]=(_0x19690c,_0x4b5436)=>send(_0x71a7e3,_0x19690c,_0x4b5436);}catch(_0x320640){_0x71a7e3[_0x1887b4(0x178)][_0x1887b4(0x179)](_0x1887b4(0x144)+_0x320640[_0x1887b4(0x151)]);}}function a4_0x3dd4(_0x543bda,_0x510564){const _0x18910b=a4_0x5950();return a4_0x3dd4=function(_0x348141,_0x43ac73){_0x348141=_0x348141-0x141;let _0x5950d7=_0x18910b[_0x348141];return _0x5950d7;},a4_0x3dd4(_0x543bda,_0x510564);}function stopService(_0xbce81e){const _0x10be91=a4_0x3ee70e;if(pythonProcess){try{pythonProcess[_0x10be91(0x169)]();}catch(_0x360f5b){}pythonProcess=null;}}module[a4_0x3ee70e(0x15e)]={'startService':startService,'stopService':stopService,'send':send};