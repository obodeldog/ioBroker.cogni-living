const a3_0x1067b1=a3_0x4ffb;function a3_0x1cf1(){const _0x34acf1=['\x0aGrund:\x20','analysis.automation.patternDetected','analysis.health.trendDiagnosis','diagnosis','apply','type','path','36834GdLxic','analysis.training.status','threshold','SIGNAL_RESULT','toISOString','toLocaleTimeString','substring','analysis.isAlert','insulation','search','forEach','analysis.security.currentThreshold','error','analysis.automation.detectedPatterns','setStateAsync','Unknown','toString','analysis.energy.forecast','4CxhGRZ','sendToPythonWrapper','103966WdKifZ','âš ï¸\x20SECURITY\x20ALARM:\x20','analysis.health.gaitSpeed','info','Regel\x20erkannt:\x20','1859030zoQakH','71400ghnBhv','heating','startsWith','8424BHpFmH','exports','./automation','Success:\x20','debug','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','93688ktpxpC','child_process','COMFORT_RESULT','HEALTH_RESULT','sendNotification','log','stringify','ðŸ”®\x20Prediction:\x20From\x20','[LOG]','PONG','analysis.security.topologyMatrix','Error\x20launching\x20Python:\x20','handlePrediction','trim','2931336vGBBQs','toFixed','payload','rule','analysis.automation.description','python3','./setup','analysis.health.trendValue','stdin','analysis.prediction.confidence','analysis.security.lastScore','ENERGY_TRAIN_RESULT','ðŸ\x20Python\x20Pong','ENERGY_PREDICT_RESULT','ANOMALY','details','success','confidence','length','analysis.health.isAnomaly','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','[RESULT]','message','kill','HEALTH_TRAIN_RESULT','parse','ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.','analysis.health.lastCheck','constructor','105GMPPxU','close','(((.+)+)+)+$','change_percent','ðŸ\x20Python\x20confirmed\x20new\x20topology.','write','8oJSjAe'];a3_0x1cf1=function(){return _0x34acf1;};return a3_0x1cf1();}(function(_0x1cd2cd,_0x281da4){const _0x5ca5c1=a3_0x4ffb,_0xbf4948=_0x1cd2cd();while(!![]){try{const _0x110166=parseInt(_0x5ca5c1(0x171))/0x1*(parseInt(_0x5ca5c1(0x16f))/0x2)+parseInt(_0x5ca5c1(0x1ac))/0x3*(-parseInt(_0x5ca5c1(0x17a))/0x4)+parseInt(_0x5ca5c1(0x177))/0x5+parseInt(_0x5ca5c1(0x1ba))/0x6+parseInt(_0x5ca5c1(0x180))/0x7+-parseInt(_0x5ca5c1(0x1b2))/0x8*(-parseInt(_0x5ca5c1(0x18e))/0x9)+-parseInt(_0x5ca5c1(0x176))/0xa;if(_0x110166===_0x281da4)break;else _0xbf4948['push'](_0xbf4948['shift']());}catch(_0x37b5d2){_0xbf4948['push'](_0xbf4948['shift']());}}}(a3_0x1cf1,0x4b272));const a3_0x314850=(function(){let _0x5c6eb9=!![];return function(_0x20e8a8,_0x5dba95){const _0x366bd6=_0x5c6eb9?function(){const _0x363349=a3_0x4ffb;if(_0x5dba95){const _0xe1f1f7=_0x5dba95[_0x363349(0x1b7)](_0x20e8a8,arguments);return _0x5dba95=null,_0xe1f1f7;}}:function(){};return _0x5c6eb9=![],_0x366bd6;};}()),a3_0x5140bf=a3_0x314850(this,function(){const _0x49abfb=a3_0x4ffb;return a3_0x5140bf[_0x49abfb(0x16d)]()[_0x49abfb(0x166)](_0x49abfb(0x1ae))['toString']()[_0x49abfb(0x1ab)](a3_0x5140bf)[_0x49abfb(0x166)]('(((.+)+)+)+$');});a3_0x5140bf();'use strict';const {spawn}=require(a3_0x1067b1(0x181)),path=require(a3_0x1067b1(0x1b9)),fs=require('fs'),setup=require(a3_0x1067b1(0x194)),automation=require(a3_0x1067b1(0x17c));let pythonProcess=null;function send(_0x816607,_0x59f8d8,_0x4139e3={}){const _0x4b40c4=a3_0x1067b1;if(!pythonProcess||!pythonProcess[_0x4b40c4(0x196)]['writable'])return;const _0x3b7334=JSON[_0x4b40c4(0x186)]({'command':_0x59f8d8,..._0x4139e3});try{pythonProcess[_0x4b40c4(0x196)][_0x4b40c4(0x1b1)](_0x3b7334+'\x0a');}catch(_0x5855c5){}}function a3_0x4ffb(_0x3c2c4e,_0x37c07b){const _0x2e9dc7=a3_0x1cf1();return a3_0x4ffb=function(_0x5140bf,_0x314850){_0x5140bf=_0x5140bf-0x15f;let _0x1cf13a=_0x2e9dc7[_0x5140bf];return _0x1cf13a;},a3_0x4ffb(_0x3c2c4e,_0x37c07b);}function handleResult(_0x40f7f2,_0x4ae19c){const _0x3c7cf4=a3_0x1067b1;if(_0x4ae19c[_0x3c7cf4(0x1b8)]===_0x3c7cf4(0x189))_0x40f7f2[_0x3c7cf4(0x185)][_0x3c7cf4(0x17e)](_0x3c7cf4(0x19a));else{if(_0x4ae19c[_0x3c7cf4(0x1b8)]==='SECURITY_RESULT'){const {anomaly_score:_0x2bd95b,is_anomaly:_0xb15ce1,threshold:_0x235161,explanation:_0x123710}=_0x4ae19c['payload'];_0x40f7f2['log'][_0x3c7cf4(0x174)]('ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20'+_0x2bd95b['toFixed'](0x5)+'\x20->\x20'+(_0xb15ce1?_0x3c7cf4(0x19c):'OK')),_0x40f7f2[_0x3c7cf4(0x16b)](_0x3c7cf4(0x198),{'val':_0x2bd95b,'ack':!![]}),_0x40f7f2[_0x3c7cf4(0x16b)]('analysis.security.lastCheck',{'val':new Date()[_0x3c7cf4(0x161)](),'ack':!![]});if(_0x235161)_0x40f7f2[_0x3c7cf4(0x16b)](_0x3c7cf4(0x168),{'val':_0x235161,'ack':!![]});if(_0xb15ce1){let _0x120cfd=_0x3c7cf4(0x17f)+_0x2bd95b['toFixed'](0x4)+')';if(_0x123710&&_0x123710!==_0x3c7cf4(0x16c))_0x120cfd+=_0x3c7cf4(0x1b3)+_0x123710;_0x40f7f2[_0x3c7cf4(0x16b)](_0x3c7cf4(0x164),{'val':!![],'ack':!![]}),_0x40f7f2[_0x3c7cf4(0x16b)]('analysis.alertReason',{'val':_0x120cfd,'ack':!![]}),setup[_0x3c7cf4(0x184)](_0x40f7f2,_0x3c7cf4(0x172)+_0x120cfd,![],!![]);}}else{if(_0x4ae19c[_0x3c7cf4(0x1b8)]==='TRAINING_COMPLETE'){const _0x29b076=_0x4ae19c['payload'][_0x3c7cf4(0x19d)]||'',_0x4fe56d=_0x4ae19c[_0x3c7cf4(0x190)][_0x3c7cf4(0x15f)],_0x4dc0c1=_0x4ae19c[_0x3c7cf4(0x190)]['success']?_0x3c7cf4(0x17d)+new Date()[_0x3c7cf4(0x162)]()+'\x20('+_0x29b076+')':'Failed:\x20'+_0x4ae19c[_0x3c7cf4(0x190)]['reason'];_0x40f7f2['setStateAsync'](_0x3c7cf4(0x1bb),{'val':_0x4dc0c1,'ack':!![]});if(_0x4ae19c[_0x3c7cf4(0x190)][_0x3c7cf4(0x19e)]&&_0x4fe56d)_0x40f7f2[_0x3c7cf4(0x16b)](_0x3c7cf4(0x168),{'val':_0x4fe56d,'ack':!![]});}else{if(_0x4ae19c['type']===_0x3c7cf4(0x182)){const {patterns:_0x206363}=_0x4ae19c['payload'];if(_0x206363&&_0x206363[_0x3c7cf4(0x1a0)]>0x0){_0x40f7f2[_0x3c7cf4(0x185)][_0x3c7cf4(0x174)](_0x3c7cf4(0x1a3)+_0x206363[_0x3c7cf4(0x1a0)]+'\x20new\x20patterns.'),_0x40f7f2[_0x3c7cf4(0x16b)](_0x3c7cf4(0x16a),{'val':JSON[_0x3c7cf4(0x186)](_0x206363),'ack':!![]});const _0x46a488=_0x206363[0x0],_0x1f97f7=_0x3c7cf4(0x175)+_0x46a488[_0x3c7cf4(0x191)]+'\x20('+(_0x46a488[_0x3c7cf4(0x19f)]*0x64)[_0x3c7cf4(0x18f)](0x0)+'%)';_0x40f7f2[_0x3c7cf4(0x16b)](_0x3c7cf4(0x1b4),{'val':!![],'ack':!![]}),_0x40f7f2[_0x3c7cf4(0x16b)](_0x3c7cf4(0x192),{'val':_0x1f97f7,'ack':!![]});}else _0x40f7f2['log'][_0x3c7cf4(0x174)](_0x3c7cf4(0x1a2)),_0x40f7f2[_0x3c7cf4(0x16b)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),_0x40f7f2['setStateAsync'](_0x3c7cf4(0x16a),{'val':'[]','ack':!![]});}else{if(_0x4ae19c[_0x3c7cf4(0x1b8)]===_0x3c7cf4(0x199)){if(_0x4ae19c[_0x3c7cf4(0x190)][_0x3c7cf4(0x19e)])try{const _0x47e659=JSON[_0x3c7cf4(0x1a8)](_0x4ae19c[_0x3c7cf4(0x190)][_0x3c7cf4(0x19d)]);if(_0x47e659[_0x3c7cf4(0x165)])_0x40f7f2[_0x3c7cf4(0x16b)]('analysis.energy.insulationScore',{'val':JSON[_0x3c7cf4(0x186)](_0x47e659[_0x3c7cf4(0x165)]),'ack':!![]});if(_0x47e659[_0x3c7cf4(0x178)])_0x40f7f2[_0x3c7cf4(0x16b)]('analysis.energy.heatingScore',{'val':JSON[_0x3c7cf4(0x186)](_0x47e659[_0x3c7cf4(0x178)]),'ack':!![]});}catch(_0x4da37f){}}else{if(_0x4ae19c['type']===_0x3c7cf4(0x1a7)){if(_0x4ae19c['payload'][_0x3c7cf4(0x19e)])_0x40f7f2[_0x3c7cf4(0x185)][_0x3c7cf4(0x174)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x4ae19c[_0x3c7cf4(0x1b8)]===_0x3c7cf4(0x183))_0x40f7f2[_0x3c7cf4(0x16b)](_0x3c7cf4(0x1aa),{'val':new Date()[_0x3c7cf4(0x161)](),'ack':!![]}),_0x40f7f2[_0x3c7cf4(0x16b)](_0x3c7cf4(0x1a1),{'val':_0x4ae19c['payload']['is_anomaly'],'ack':!![]});else{if(_0x4ae19c['type']==='TREND_RESULT')_0x40f7f2['setStateAsync'](_0x3c7cf4(0x1b5),{'val':_0x4ae19c[_0x3c7cf4(0x190)][_0x3c7cf4(0x1b6)],'ack':!![]}),_0x40f7f2[_0x3c7cf4(0x16b)](_0x3c7cf4(0x195),{'val':_0x4ae19c[_0x3c7cf4(0x190)][_0x3c7cf4(0x1af)],'ack':!![]});else{if(_0x4ae19c[_0x3c7cf4(0x1b8)]==='GAIT_RESULT'){const {speed_trend:_0x370903}=_0x4ae19c[_0x3c7cf4(0x190)];if(_0x370903!==undefined)_0x40f7f2[_0x3c7cf4(0x16b)](_0x3c7cf4(0x173),{'val':_0x370903,'ack':!![]});}else{if(_0x4ae19c['type']===_0x3c7cf4(0x19b)){const {forecast:_0x421c26}=_0x4ae19c[_0x3c7cf4(0x190)];if(_0x421c26)_0x40f7f2[_0x3c7cf4(0x16b)](_0x3c7cf4(0x16e),{'val':JSON[_0x3c7cf4(0x186)](_0x421c26),'ack':!![]});}else{if(_0x4ae19c[_0x3c7cf4(0x1b8)]==='TOPOLOGY_RESULT'){const {data:_0x1f345d}=_0x4ae19c[_0x3c7cf4(0x190)];_0x1f345d&&(_0x40f7f2[_0x3c7cf4(0x185)][_0x3c7cf4(0x174)](_0x3c7cf4(0x1a9)),_0x40f7f2['setStateAsync'](_0x3c7cf4(0x18a),{'val':JSON['stringify'](_0x1f345d),'ack':!![]}));}else{if(_0x4ae19c[_0x3c7cf4(0x1b8)]==='TOPOLOGY_ACK')_0x40f7f2[_0x3c7cf4(0x185)][_0x3c7cf4(0x17e)](_0x3c7cf4(0x1b0));else{if(_0x4ae19c[_0x3c7cf4(0x1b8)]===_0x3c7cf4(0x160)){const {room:_0x292d32,propagation:_0x5e7c41}=_0x4ae19c[_0x3c7cf4(0x190)];let _0x4d8c74=_0x3c7cf4(0x16c),_0x4b0bc7=0x0;if(_0x5e7c41){const _0x26321a=Object['entries'](_0x5e7c41);_0x26321a[_0x3c7cf4(0x1a0)]>0x0&&(_0x4d8c74=_0x26321a[0x0][0x0],_0x4b0bc7=_0x26321a[0x0][0x1]);}_0x40f7f2[_0x3c7cf4(0x16b)]('analysis.prediction.nextRoom',{'val':_0x4d8c74,'ack':!![]}),_0x40f7f2[_0x3c7cf4(0x16b)](_0x3c7cf4(0x197),{'val':_0x4b0bc7,'ack':!![]}),_0x4b0bc7>0.4&&_0x40f7f2[_0x3c7cf4(0x185)][_0x3c7cf4(0x17e)](_0x3c7cf4(0x187)+_0x292d32+'\x20->\x20Likely\x20'+_0x4d8c74+'\x20('+(_0x4b0bc7*0x64)[_0x3c7cf4(0x18f)](0x0)+'%)'),automation[_0x3c7cf4(0x18c)](_0x40f7f2,_0x4d8c74,_0x4b0bc7);}}}}}}}}}}}}}}function startService(_0x37c325,_0x571718){const _0x5b67ee=a3_0x1067b1;let _0x3f2a6b=_0x5b67ee(0x193);if(fs['existsSync'](_0x571718))_0x3f2a6b=_0x571718;try{const _0x16bb0d=path['join'](__dirname,'..','python_service','service.py');pythonProcess=spawn(_0x3f2a6b,[_0x16bb0d]),pythonProcess['stdout']['on']('data',_0x42bbbb=>{const _0x228eb9=_0x5b67ee,_0x3c1b9b=_0x42bbbb[_0x228eb9(0x16d)]()['split']('\x0a');_0x3c1b9b[_0x228eb9(0x167)](_0x463e50=>{const _0x2a2b88=_0x228eb9,_0x23a6ff=_0x463e50['trim']();if(!_0x23a6ff)return;if(_0x23a6ff[_0x2a2b88(0x179)](_0x2a2b88(0x188)))_0x37c325[_0x2a2b88(0x185)][_0x2a2b88(0x17e)]('[PYTHON]\x20'+_0x23a6ff[_0x2a2b88(0x163)](0x5)[_0x2a2b88(0x18d)]());else{if(_0x23a6ff[_0x2a2b88(0x179)](_0x2a2b88(0x1a4)))try{const _0x39d308=JSON[_0x2a2b88(0x1a8)](_0x23a6ff[_0x2a2b88(0x163)](0x8)[_0x2a2b88(0x18d)]());handleResult(_0x37c325,_0x39d308);}catch(_0x15c96d){}}});}),pythonProcess['on'](_0x5b67ee(0x1ad),_0x201b37=>{pythonProcess=null;}),_0x37c325[_0x5b67ee(0x170)]=(_0x6286b2,_0x753271)=>send(_0x37c325,_0x6286b2,_0x753271);}catch(_0x113345){_0x37c325['log'][_0x5b67ee(0x169)](_0x5b67ee(0x18b)+_0x113345[_0x5b67ee(0x1a5)]);}}function stopService(_0x190715){const _0x4651ab=a3_0x1067b1;if(pythonProcess){try{pythonProcess[_0x4651ab(0x1a6)]();}catch(_0x4c298d){}pythonProcess=null;}}module[a3_0x1067b1(0x17b)]={'startService':startService,'stopService':stopService,'send':send};