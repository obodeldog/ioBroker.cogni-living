const a4_0x191366=a4_0xb107;function a4_0x58ba(){const _0x314c32=['exports','[PYTHON]\x20','ENERGY_TRAIN_RESULT','toISOString','is_anomaly','length','./automation','PONG','python3','24YejPUf','analysis.isAlert','analysis.alertReason','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','trim','analysis.automation.detectedPatterns','analysis.health.isAnomaly','Failed:\x20','message','threshold','payload','Error\x20launching\x20Python:\x20','Success:\x20','1165002eBCnKw','Unknown','analysis.energy.pinnForecast','analysis.energy.mpcActive','stringify','startsWith','âš ï¸\x20SECURITY\x20ALARM:\x20','4723012YYNWmI','apply','search','child_process','3208509agVNeo','type','ENERGY_PREDICT_RESULT','analysis.security.lastScore','5uHSfXg','heating','toString','394NqzgbE','split','(((.+)+)+)+$','analysis.training.status','ENERGY_OPTIMIZE_RESULT','constructor','HEALTH_TRAIN_RESULT','analysis.prediction.trackerTopRoom','setStateAsync','TRACKER_RESULT','analysis.prediction.confidence','17711080MWHNwa','analysis.prediction.trackerConfidence','[RESULT]','./setup','writable','existsSync','TRAINING_COMPLETE','success','entries','âœ…\x20HEALTH\x20TRAINED.','analysis.security.currentThreshold','getState','analysis.energy.insulationScore','toFixed','parse','sendToPythonWrapper','COMFORT_RESULT','toLocaleTimeString','analysis.energy.heatingScore','4515756sHWrAN','insulation','path','applyEnergySavings','python_service','GAIT_RESULT','\x0aGrund:\x20','[LOG]','error','514gIHQiv','log','service.py','keys','kill','substring','1848591dCThcq','details','analysis.energy.forecast','forEach'];a4_0x58ba=function(){return _0x314c32;};return a4_0x58ba();}(function(_0x58c2a2,_0xe7871a){const _0x442882=a4_0xb107,_0x231e66=_0x58c2a2();while(!![]){try{const _0xcc6df9=-parseInt(_0x442882(0xd5))/0x1*(parseInt(_0x442882(0xa3))/0x2)+-parseInt(_0x442882(0xa9))/0x3+parseInt(_0x442882(0x9a))/0x4+-parseInt(_0x442882(0xd2))/0x5*(-parseInt(_0x442882(0xc3))/0x6)+-parseInt(_0x442882(0xca))/0x7+-parseInt(_0x442882(0xb6))/0x8*(parseInt(_0x442882(0xce))/0x9)+parseInt(_0x442882(0xe0))/0xa;if(_0xcc6df9===_0xe7871a)break;else _0x231e66['push'](_0x231e66['shift']());}catch(_0x260a8f){_0x231e66['push'](_0x231e66['shift']());}}}(a4_0x58ba,0x9a6dc));const a4_0x5bf134=(function(){let _0x5305ea=!![];return function(_0x2e4b22,_0x195deb){const _0x55ab1f=_0x5305ea?function(){const _0x6905ae=a4_0xb107;if(_0x195deb){const _0x3d480f=_0x195deb[_0x6905ae(0xcb)](_0x2e4b22,arguments);return _0x195deb=null,_0x3d480f;}}:function(){};return _0x5305ea=![],_0x55ab1f;};}()),a4_0x2efae=a4_0x5bf134(this,function(){const _0x3b6701=a4_0xb107;return a4_0x2efae[_0x3b6701(0xd4)]()[_0x3b6701(0xcc)](_0x3b6701(0xd7))[_0x3b6701(0xd4)]()[_0x3b6701(0xda)](a4_0x2efae)['search'](_0x3b6701(0xd7));});a4_0x2efae();function a4_0xb107(_0x18173c,_0x410aeb){const _0x133f62=a4_0x58ba();return a4_0xb107=function(_0x2efae,_0x5bf134){_0x2efae=_0x2efae-0x98;let _0x58bad1=_0x133f62[_0x2efae];return _0x58bad1;},a4_0xb107(_0x18173c,_0x410aeb);}'use strict';const {spawn}=require(a4_0x191366(0xcd)),path=require(a4_0x191366(0x9c)),fs=require('fs'),setup=require(a4_0x191366(0xe3)),automation=require(a4_0x191366(0xb3));let pythonProcess=null;function send(_0x827962,_0x5d7628,_0x2f3481={}){const _0x1f3825=a4_0x191366;if(!pythonProcess||!pythonProcess['stdin'][_0x1f3825(0xe4)])return;const _0x21c5ea=JSON[_0x1f3825(0xc7)]({'command':_0x5d7628,..._0x2f3481});try{pythonProcess['stdin']['write'](_0x21c5ea+'\x0a');}catch(_0x606a64){}}function handleResult(_0xcdbd86,_0x165691){const _0x8482a6=a4_0x191366;if(_0x165691[_0x8482a6(0xcf)]===_0x8482a6(0xb4))_0xcdbd86[_0x8482a6(0xa4)]['debug']('ðŸ\x20Python\x20Pong');else{if(_0x165691[_0x8482a6(0xcf)]==='SECURITY_RESULT'){const {anomaly_score:_0x43f4f2,is_anomaly:_0x4a9f0a,threshold:_0x4d9d1a,explanation:_0x1e925f}=_0x165691[_0x8482a6(0xc0)];_0xcdbd86[_0x8482a6(0xdd)](_0x8482a6(0xd1),{'val':_0x43f4f2,'ack':!![]}),_0xcdbd86['setStateAsync']('analysis.security.lastCheck',{'val':new Date()[_0x8482a6(0xb0)](),'ack':!![]});if(_0x4d9d1a)_0xcdbd86[_0x8482a6(0xdd)](_0x8482a6(0xea),{'val':_0x4d9d1a,'ack':!![]});if(_0x4a9f0a){let _0x267599=_0x8482a6(0xb9)+_0x43f4f2[_0x8482a6(0xed)](0x4)+')';if(_0x1e925f&&_0x1e925f!==_0x8482a6(0xc4))_0x267599+=_0x8482a6(0xa0)+_0x1e925f;_0xcdbd86[_0x8482a6(0xdd)](_0x8482a6(0xb7),{'val':!![],'ack':!![]}),_0xcdbd86[_0x8482a6(0xdd)](_0x8482a6(0xb8),{'val':_0x267599,'ack':!![]}),setup['sendNotification'](_0xcdbd86,_0x8482a6(0xc9)+_0x267599,![],!![]);}}else{if(_0x165691[_0x8482a6(0xcf)]===_0x8482a6(0xe6)){const _0x26ca36=_0x165691[_0x8482a6(0xc0)][_0x8482a6(0xaa)]||'',_0x20a3b3=_0x165691['payload'][_0x8482a6(0xbf)],_0x2a2a99=_0x165691['payload'][_0x8482a6(0xe7)]?_0x8482a6(0xc2)+new Date()[_0x8482a6(0x98)]()+'\x20('+_0x26ca36+')':_0x8482a6(0xbd)+_0x165691['payload']['reason'];_0xcdbd86[_0x8482a6(0xdd)](_0x8482a6(0xd8),{'val':_0x2a2a99,'ack':!![]});if(_0x165691['payload'][_0x8482a6(0xe7)]&&_0x20a3b3)_0xcdbd86[_0x8482a6(0xdd)]('analysis.security.currentThreshold',{'val':_0x20a3b3,'ack':!![]});}else{if(_0x165691['type']===_0x8482a6(0xaf)){if(_0x165691['payload'][_0x8482a6(0xe7)])try{const _0x3959c1=JSON[_0x8482a6(0xee)](_0x165691['payload']['details']);if(_0x3959c1[_0x8482a6(0x9b)])_0xcdbd86[_0x8482a6(0xdd)](_0x8482a6(0xec),{'val':JSON['stringify'](_0x3959c1['insulation']),'ack':!![]});if(_0x3959c1[_0x8482a6(0xd3)])_0xcdbd86[_0x8482a6(0xdd)](_0x8482a6(0x99),{'val':JSON[_0x8482a6(0xc7)](_0x3959c1[_0x8482a6(0xd3)]),'ack':!![]});}catch(_0x154ee8){}}else{if(_0x165691[_0x8482a6(0xcf)]===_0x8482a6(0xdb)){if(_0x165691[_0x8482a6(0xc0)][_0x8482a6(0xe7)])_0xcdbd86[_0x8482a6(0xa4)]['info'](_0x8482a6(0xe9));}else{if(_0x165691[_0x8482a6(0xcf)]==='HEALTH_RESULT')_0xcdbd86[_0x8482a6(0xdd)]('analysis.health.lastCheck',{'val':new Date()[_0x8482a6(0xb0)](),'ack':!![]}),_0xcdbd86[_0x8482a6(0xdd)](_0x8482a6(0xbc),{'val':_0x165691['payload'][_0x8482a6(0xb1)],'ack':!![]});else{if(_0x165691['type']===_0x8482a6(0x9f)){const {speed_trend:_0x1ae1f3}=_0x165691['payload'];if(_0x1ae1f3!==undefined)_0xcdbd86[_0x8482a6(0xdd)]('analysis.health.gaitSpeed',{'val':_0x1ae1f3,'ack':!![]});}else{if(_0x165691[_0x8482a6(0xcf)]===_0x8482a6(0xd0)){const {forecast:_0x4e5e9f}=_0x165691[_0x8482a6(0xc0)];if(_0x4e5e9f)_0xcdbd86[_0x8482a6(0xdd)](_0x8482a6(0xab),{'val':JSON['stringify'](_0x4e5e9f),'ack':!![]});}else{if(_0x165691['type']==='PINN_PREDICT_RESULT'){const {forecast:_0x57fe05}=_0x165691[_0x8482a6(0xc0)];if(_0x57fe05)_0xcdbd86['setStateAsync'](_0x8482a6(0xc5),{'val':JSON[_0x8482a6(0xc7)](_0x57fe05),'ack':!![]});}else{if(_0x165691['type']===_0x8482a6(0xd9)){const {proposals:_0x238287}=_0x165691['payload'];_0xcdbd86[_0x8482a6(0xeb)](_0x8482a6(0xc6),(_0x1098fa,_0xebbdd6)=>{const _0x36a689=_0x8482a6;_0xebbdd6&&_0xebbdd6['val']===!![]&&_0x238287&&_0x238287[_0x36a689(0xb2)]>0x0&&automation[_0x36a689(0x9d)](_0xcdbd86,_0x238287);});}else{if(_0x165691[_0x8482a6(0xcf)]==='SIGNAL_RESULT'){const {room:_0x28c1f1,propagation:_0x5dd44e}=_0x165691[_0x8482a6(0xc0)];let _0x48f019=_0x8482a6(0xc4),_0xe99ce7=0x0;if(_0x5dd44e){const _0x35373e=Object[_0x8482a6(0xe8)](_0x5dd44e);_0x35373e[_0x8482a6(0xb2)]>0x0&&(_0x48f019=_0x35373e[0x0][0x0],_0xe99ce7=_0x35373e[0x0][0x1]);}_0xcdbd86[_0x8482a6(0xdd)]('analysis.prediction.nextRoom',{'val':_0x48f019,'ack':!![]}),_0xcdbd86[_0x8482a6(0xdd)](_0x8482a6(0xdf),{'val':_0xe99ce7,'ack':!![]}),automation['handlePrediction'](_0xcdbd86,_0x48f019,_0xe99ce7);}else{if(_0x165691[_0x8482a6(0xcf)]===_0x8482a6(0xde)){const {probabilities:_0x210c17}=_0x165691[_0x8482a6(0xc0)];if(_0x210c17){_0xcdbd86[_0x8482a6(0xdd)]('analysis.prediction.trackerState',{'val':JSON[_0x8482a6(0xc7)](_0x210c17),'ack':!![]});const _0x4a8c4d=Object[_0x8482a6(0xa6)](_0x210c17);if(_0x4a8c4d[_0x8482a6(0xb2)]>0x0){const _0x13b0fe=_0x4a8c4d[0x0],_0xe3985f=_0x210c17[_0x13b0fe];_0xcdbd86[_0x8482a6(0xdd)](_0x8482a6(0xdc),{'val':_0x13b0fe,'ack':!![]}),_0xcdbd86['setStateAsync'](_0x8482a6(0xe1),{'val':_0xe3985f,'ack':!![]});}}}else{if(_0x165691[_0x8482a6(0xcf)]===_0x8482a6(0xf0)){const {patterns:_0x337d21}=_0x165691[_0x8482a6(0xc0)];if(_0x337d21&&_0x337d21[_0x8482a6(0xb2)]>0x0)_0xcdbd86[_0x8482a6(0xdd)](_0x8482a6(0xbb),{'val':JSON[_0x8482a6(0xc7)](_0x337d21),'ack':!![]});}}}}}}}}}}}}}}function startService(_0x5869cd,_0x4565ae){const _0x1c7b56=a4_0x191366;let _0x35060e=_0x1c7b56(0xb5);if(fs[_0x1c7b56(0xe5)](_0x4565ae))_0x35060e=_0x4565ae;try{const _0x59f769=path['join'](__dirname,'..',_0x1c7b56(0x9e),_0x1c7b56(0xa5));pythonProcess=spawn(_0x35060e,[_0x59f769]),pythonProcess['stdout']['on']('data',_0x667e6f=>{const _0x46c1ca=_0x1c7b56,_0x4b30f5=_0x667e6f[_0x46c1ca(0xd4)]()[_0x46c1ca(0xd6)]('\x0a');_0x4b30f5[_0x46c1ca(0xac)](_0x491abd=>{const _0x3251b1=_0x46c1ca,_0xfb276d=_0x491abd[_0x3251b1(0xba)]();if(!_0xfb276d)return;if(_0xfb276d[_0x3251b1(0xc8)](_0x3251b1(0xa1)))_0x5869cd[_0x3251b1(0xa4)]['debug'](_0x3251b1(0xae)+_0xfb276d['substring'](0x5)[_0x3251b1(0xba)]());else{if(_0xfb276d[_0x3251b1(0xc8)](_0x3251b1(0xe2)))try{const _0x3e8250=JSON[_0x3251b1(0xee)](_0xfb276d[_0x3251b1(0xa8)](0x8)[_0x3251b1(0xba)]());handleResult(_0x5869cd,_0x3e8250);}catch(_0x2c5c67){}}});}),pythonProcess['on']('close',_0x1861d6=>{pythonProcess=null;}),_0x5869cd[_0x1c7b56(0xef)]=(_0x22b37e,_0x5a7ab9)=>send(_0x5869cd,_0x22b37e,_0x5a7ab9);}catch(_0x5cdb34){_0x5869cd[_0x1c7b56(0xa4)][_0x1c7b56(0xa2)](_0x1c7b56(0xc1)+_0x5cdb34[_0x1c7b56(0xbe)]);}}function stopService(_0x3b76c9){const _0x1291e6=a4_0x191366;if(pythonProcess){try{pythonProcess[_0x1291e6(0xa7)]();}catch(_0x193493){}pythonProcess=null;}}module[a4_0x191366(0xad)]={'startService':startService,'stopService':stopService,'send':send};