const a4_0x4f4aaf=a4_0x195e;(function(_0x575be2,_0x21bdc8){const _0x56dfb0=a4_0x195e,_0x4e3763=_0x575be2();while(!![]){try{const _0xba8ee6=-parseInt(_0x56dfb0(0x215))/0x1+parseInt(_0x56dfb0(0x229))/0x2+-parseInt(_0x56dfb0(0x201))/0x3*(parseInt(_0x56dfb0(0x216))/0x4)+-parseInt(_0x56dfb0(0x1fe))/0x5*(-parseInt(_0x56dfb0(0x1ff))/0x6)+parseInt(_0x56dfb0(0x1fc))/0x7+parseInt(_0x56dfb0(0x1f8))/0x8+-parseInt(_0x56dfb0(0x204))/0x9;if(_0xba8ee6===_0x21bdc8)break;else _0x4e3763['push'](_0x4e3763['shift']());}catch(_0x428460){_0x4e3763['push'](_0x4e3763['shift']());}}}(a4_0x4e6d,0x5e6df));const a4_0x5d8f8f=(function(){let _0x5a2477=!![];return function(_0x529a16,_0x5b7176){const _0x2dc2d0=_0x5a2477?function(){const _0x209c7c=a4_0x195e;if(_0x5b7176){const _0x50804b=_0x5b7176[_0x209c7c(0x23d)](_0x529a16,arguments);return _0x5b7176=null,_0x50804b;}}:function(){};return _0x5a2477=![],_0x2dc2d0;};}()),a4_0x1fd229=a4_0x5d8f8f(this,function(){const _0x30ef53=a4_0x195e;return a4_0x1fd229[_0x30ef53(0x20a)]()[_0x30ef53(0x213)]('(((.+)+)+)+$')['toString']()[_0x30ef53(0x220)](a4_0x1fd229)[_0x30ef53(0x213)](_0x30ef53(0x205));});a4_0x1fd229();function a4_0x195e(_0x20d999,_0xcde295){const _0x21dc35=a4_0x4e6d();return a4_0x195e=function(_0x1fd229,_0x5d8f8f){_0x1fd229=_0x1fd229-0x1f3;let _0x4e6dce=_0x21dc35[_0x1fd229];return _0x4e6dce;},a4_0x195e(_0x20d999,_0xcde295);}'use strict';const {spawn}=require(a4_0x4f4aaf(0x217)),path=require(a4_0x4f4aaf(0x212)),fs=require('fs'),setup=require('./setup'),automation=require(a4_0x4f4aaf(0x21c));let pythonProcess=null;function send(_0x314f59,_0xdbbe90,_0x44d656={}){const _0x40cae8=a4_0x4f4aaf;if(!pythonProcess||!pythonProcess[_0x40cae8(0x20d)][_0x40cae8(0x211)])return;const _0x270a3f=JSON[_0x40cae8(0x249)]({'command':_0xdbbe90,..._0x44d656});try{pythonProcess[_0x40cae8(0x20d)][_0x40cae8(0x24d)](_0x270a3f+'\x0a');}catch(_0x3e5598){}}function handleResult(_0x84d378,_0x10f0ba){const _0x1f36e6=a4_0x4f4aaf;if(_0x10f0ba['type']===_0x1f36e6(0x23f))_0x84d378[_0x1f36e6(0x1f5)][_0x1f36e6(0x20f)](_0x1f36e6(0x221));else{if(_0x10f0ba[_0x1f36e6(0x233)]===_0x1f36e6(0x246)){const {anomaly_score:_0x172099,is_anomaly:_0x399129,threshold:_0x4ad8a1,explanation:_0x5bccc9}=_0x10f0ba[_0x1f36e6(0x236)];_0x84d378['setStateAsync'](_0x1f36e6(0x209),{'val':_0x172099,'ack':!![]}),_0x84d378[_0x1f36e6(0x222)](_0x1f36e6(0x22f),{'val':new Date()[_0x1f36e6(0x210)](),'ack':!![]});if(_0x4ad8a1)_0x84d378[_0x1f36e6(0x222)](_0x1f36e6(0x224),{'val':_0x4ad8a1,'ack':!![]});if(_0x399129){let _0x3397b3='Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x172099[_0x1f36e6(0x214)](0x4)+')';if(_0x5bccc9&&_0x5bccc9!=='Unknown')_0x3397b3+='\x0aGrund:\x20'+_0x5bccc9;_0x84d378[_0x1f36e6(0x222)](_0x1f36e6(0x23e),{'val':!![],'ack':!![]}),_0x84d378[_0x1f36e6(0x222)]('analysis.alertReason',{'val':_0x3397b3,'ack':!![]}),setup['sendNotification'](_0x84d378,_0x1f36e6(0x223)+_0x3397b3,![],!![]);}}else{if(_0x10f0ba[_0x1f36e6(0x233)]===_0x1f36e6(0x1f9)){const _0x22936a=_0x10f0ba['payload'][_0x1f36e6(0x244)]||'',_0x23d093=_0x10f0ba[_0x1f36e6(0x236)][_0x1f36e6(0x22c)],_0x4f3150=_0x10f0ba['payload'][_0x1f36e6(0x238)]?_0x1f36e6(0x231)+new Date()[_0x1f36e6(0x22a)]()+'\x20('+_0x22936a+')':'Failed:\x20'+_0x10f0ba[_0x1f36e6(0x236)][_0x1f36e6(0x24a)];_0x84d378[_0x1f36e6(0x222)](_0x1f36e6(0x20b),{'val':_0x4f3150,'ack':!![]});if(_0x10f0ba[_0x1f36e6(0x236)][_0x1f36e6(0x238)]&&_0x23d093)_0x84d378[_0x1f36e6(0x222)](_0x1f36e6(0x224),{'val':_0x23d093,'ack':!![]});}else{if(_0x10f0ba[_0x1f36e6(0x233)]==='ENERGY_TRAIN_RESULT'){if(_0x10f0ba[_0x1f36e6(0x236)][_0x1f36e6(0x238)])try{const _0x202914=JSON['parse'](_0x10f0ba[_0x1f36e6(0x236)][_0x1f36e6(0x244)]);if(_0x202914[_0x1f36e6(0x237)])_0x84d378[_0x1f36e6(0x222)](_0x1f36e6(0x1f7),{'val':JSON['stringify'](_0x202914[_0x1f36e6(0x237)]),'ack':!![]});if(_0x202914[_0x1f36e6(0x248)])_0x84d378[_0x1f36e6(0x222)](_0x1f36e6(0x24b),{'val':JSON[_0x1f36e6(0x249)](_0x202914[_0x1f36e6(0x248)]),'ack':!![]});}catch(_0x2b9cd5){}}else{if(_0x10f0ba[_0x1f36e6(0x233)]===_0x1f36e6(0x1fb)){if(_0x10f0ba['payload']['success'])_0x84d378[_0x1f36e6(0x1f5)][_0x1f36e6(0x21e)](_0x1f36e6(0x208));}else{if(_0x10f0ba[_0x1f36e6(0x233)]===_0x1f36e6(0x207))_0x84d378[_0x1f36e6(0x222)](_0x1f36e6(0x235),{'val':new Date()[_0x1f36e6(0x210)](),'ack':!![]}),_0x84d378[_0x1f36e6(0x222)](_0x1f36e6(0x226),{'val':_0x10f0ba[_0x1f36e6(0x236)][_0x1f36e6(0x234)],'ack':!![]});else{if(_0x10f0ba['type']===_0x1f36e6(0x21a)){const {speed_trend:_0x51234c}=_0x10f0ba[_0x1f36e6(0x236)];if(_0x51234c!==undefined)_0x84d378[_0x1f36e6(0x222)](_0x1f36e6(0x206),{'val':_0x51234c,'ack':!![]});}else{if(_0x10f0ba['type']===_0x1f36e6(0x22e)){const {forecast:_0x4a7a14}=_0x10f0ba[_0x1f36e6(0x236)];if(_0x4a7a14)_0x84d378[_0x1f36e6(0x222)](_0x1f36e6(0x203),{'val':JSON[_0x1f36e6(0x249)](_0x4a7a14),'ack':!![]});}else{if(_0x10f0ba[_0x1f36e6(0x233)]==='PINN_PREDICT_RESULT'){const {forecast:_0x31fe77}=_0x10f0ba[_0x1f36e6(0x236)];if(_0x31fe77)_0x84d378[_0x1f36e6(0x222)]('analysis.energy.pinnForecast',{'val':JSON[_0x1f36e6(0x249)](_0x31fe77),'ack':!![]});}else{if(_0x10f0ba[_0x1f36e6(0x233)]===_0x1f36e6(0x22b)){const {proposals:_0x3b0d4e}=_0x10f0ba[_0x1f36e6(0x236)];_0x84d378[_0x1f36e6(0x241)](_0x1f36e6(0x22d),(_0xda5599,_0x3c05d7)=>{const _0x234547=_0x1f36e6;_0x3c05d7&&_0x3c05d7[_0x234547(0x23b)]===!![]&&_0x3b0d4e&&_0x3b0d4e[_0x234547(0x230)]>0x0&&automation[_0x234547(0x232)](_0x84d378,_0x3b0d4e);});}else{if(_0x10f0ba[_0x1f36e6(0x233)]===_0x1f36e6(0x239)){const {room:_0x12af54,propagation:_0x48621c}=_0x10f0ba[_0x1f36e6(0x236)];let _0x49fb99=_0x1f36e6(0x218),_0x263cfe=0x0;if(_0x48621c){const _0xf6ab9b=Object[_0x1f36e6(0x225)](_0x48621c);_0xf6ab9b['length']>0x0&&(_0x49fb99=_0xf6ab9b[0x0][0x0],_0x263cfe=_0xf6ab9b[0x0][0x1]);}_0x84d378[_0x1f36e6(0x222)](_0x1f36e6(0x243),{'val':_0x49fb99,'ack':!![]}),_0x84d378['setStateAsync']('analysis.prediction.confidence',{'val':_0x263cfe,'ack':!![]}),automation['handlePrediction'](_0x84d378,_0x49fb99,_0x263cfe);}else{if(_0x10f0ba[_0x1f36e6(0x233)]===_0x1f36e6(0x20c)){const {patterns:_0x51729e}=_0x10f0ba['payload'];if(_0x51729e&&_0x51729e[_0x1f36e6(0x230)]>0x0)_0x84d378['setStateAsync'](_0x1f36e6(0x242),{'val':JSON[_0x1f36e6(0x249)](_0x51729e),'ack':!![]});}}}}}}}}}}}}}function startService(_0x507691,_0x5458ae){const _0x57c052=a4_0x4f4aaf;let _0x1063dd=_0x57c052(0x24c);if(fs[_0x57c052(0x1f3)](_0x5458ae))_0x1063dd=_0x5458ae;try{const _0x52e73f=path[_0x57c052(0x21d)](__dirname,'..',_0x57c052(0x1f4),_0x57c052(0x1fa));pythonProcess=spawn(_0x1063dd,[_0x52e73f]),pythonProcess[_0x57c052(0x20e)]['on'](_0x57c052(0x202),_0x1c7355=>{const _0x46f276=_0x57c052,_0x4cd84e=_0x1c7355[_0x46f276(0x20a)]()[_0x46f276(0x200)]('\x0a');_0x4cd84e['forEach'](_0x2c6729=>{const _0x2c87e4=_0x46f276,_0x35c6ce=_0x2c6729[_0x2c87e4(0x245)]();if(!_0x35c6ce)return;if(_0x35c6ce[_0x2c87e4(0x247)]('[LOG]'))_0x507691[_0x2c87e4(0x1f5)][_0x2c87e4(0x20f)](_0x2c87e4(0x23c)+_0x35c6ce[_0x2c87e4(0x23a)](0x5)[_0x2c87e4(0x245)]());else{if(_0x35c6ce[_0x2c87e4(0x247)](_0x2c87e4(0x240)))try{const _0x52a337=JSON[_0x2c87e4(0x227)](_0x35c6ce[_0x2c87e4(0x23a)](0x8)['trim']());handleResult(_0x507691,_0x52a337);}catch(_0x199d41){}}});}),pythonProcess['on'](_0x57c052(0x228),_0x36bf0d=>{pythonProcess=null;}),_0x507691[_0x57c052(0x21f)]=(_0xed495a,_0x5e55ae)=>send(_0x507691,_0xed495a,_0x5e55ae);}catch(_0x3ede23){_0x507691[_0x57c052(0x1f5)][_0x57c052(0x21b)]('Error\x20launching\x20Python:\x20'+_0x3ede23[_0x57c052(0x219)]);}}function stopService(_0x1cce6a){const _0x293138=a4_0x4f4aaf;if(pythonProcess){try{pythonProcess[_0x293138(0x1fd)]();}catch(_0x5025f5){}pythonProcess=null;}}function a4_0x4e6d(){const _0x21b529=['existsSync','python_service','log','exports','analysis.energy.insulationScore','4839600nsEqmT','TRAINING_COMPLETE','service.py','HEALTH_TRAIN_RESULT','1034264GTSvrP','kill','910895DMwRqY','12BCRwpZ','split','996FFZckZ','data','analysis.energy.forecast','1030995ZlEKxt','(((.+)+)+)+$','analysis.health.gaitSpeed','HEALTH_RESULT','‚úÖ\x20HEALTH\x20TRAINED.','analysis.security.lastScore','toString','analysis.training.status','COMFORT_RESULT','stdin','stdout','debug','toISOString','writable','path','search','toFixed','44445LPXEVN','7668nJZLYI','child_process','Unknown','message','GAIT_RESULT','error','./automation','join','info','sendToPythonWrapper','constructor','üêç\x20Python\x20Pong','setStateAsync','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','analysis.security.currentThreshold','entries','analysis.health.isAnomaly','parse','close','130334htEHqn','toLocaleTimeString','ENERGY_OPTIMIZE_RESULT','threshold','analysis.energy.mpcActive','ENERGY_PREDICT_RESULT','analysis.security.lastCheck','length','Success:\x20','applyEnergySavings','type','is_anomaly','analysis.health.lastCheck','payload','insulation','success','SIGNAL_RESULT','substring','val','[PYTHON]\x20','apply','analysis.isAlert','PONG','[RESULT]','getState','analysis.automation.detectedPatterns','analysis.prediction.nextRoom','details','trim','SECURITY_RESULT','startsWith','heating','stringify','reason','analysis.energy.heatingScore','python3','write'];a4_0x4e6d=function(){return _0x21b529;};return a4_0x4e6d();}module[a4_0x4f4aaf(0x1f6)]={'startService':startService,'stopService':stopService,'send':send};