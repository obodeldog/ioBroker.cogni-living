const a4_0x1cb1f6=a4_0xc82e;(function(_0x12bbf3,_0x5bff54){const _0x47da6c=a4_0xc82e,_0x30b7cb=_0x12bbf3();while(!![]){try{const _0x45cb11=-parseInt(_0x47da6c(0x25c))/0x1+-parseInt(_0x47da6c(0x226))/0x2*(-parseInt(_0x47da6c(0x273))/0x3)+parseInt(_0x47da6c(0x24d))/0x4+parseInt(_0x47da6c(0x25d))/0x5+-parseInt(_0x47da6c(0x223))/0x6+-parseInt(_0x47da6c(0x20a))/0x7+parseInt(_0x47da6c(0x256))/0x8;if(_0x45cb11===_0x5bff54)break;else _0x30b7cb['push'](_0x30b7cb['shift']());}catch(_0x45bcbb){_0x30b7cb['push'](_0x30b7cb['shift']());}}}(a4_0x372e,0x3d456));function a4_0x372e(){const _0x2c87bc=['message','debug','HEALTH_TREND_RESULT','sequences','\x0aGrund:\x20','stderr','[RESULT]','isArray','penalties','times','patterns','info','âœ…\x20HEALTH\x20TRAINED.','val','threshold','stdout','ENERGY_TRAIN_RESULT','sendToPythonWrapper','current_temps','analysis.security.lastCheck','analysis.energy.forecast','proof','analysis.isAlert','RL_PENALTY_UPDATE','alerts','ENERGY_PREDICT_RESULT','forEach','1266181YkuOxE','Success:\x20','normalizeRoomId','Python\x20process\x20exited\x20with\x20code\x20','is_anomaly','error','sendNotification','analysis.health.gaitSensors','analysis.prediction.trackerState','close','SET_TOPOLOGY','analysis.health.lastCheck','constructor','object','keys','string','room','path','exports','PINN_PREDICT_RESULT','rooms','ðŸ\x20Python\x20Pong','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!','analysis.prediction.trackerConfidence','TRACKER_RESULT','2588916Vpwmei','details','Graph\x20Updated\x20(','89458JefcfS','toLocaleTimeString','ðŸ“ˆ\x20Health\x20Trend:\x20','payload','HEALTH_TRAIN_RESULT','startsWith','./setup','heating','split','parse','[LOG]','write','warn','Failed:\x20','âš ï¸\x20SECURITY\x20ALARM:\x20','analysis.energy.mpcActive','sensors','Unknown','Gateway\x20Error:\x20','child_process','substring','writable','service.py','toString','existsSync','analysis.health.gaitSpeed','python_service','HEALTH_RESULT','analysis.health.activityTrend','insulation','ENERGY_OPTIMIZE_RESULT','analysis.training.status','analysis.health.isAnomaly','monitored','entries','toISOString','applyEnergySavings','search','map','1221952WROqMl','join','apply','forecast','GAIT_RESULT','PONG','speed_trend','type','TRAINING_COMPLETE','1416560fpTHTW','SECURITY_RESULT','analysis.health.gaitDebug','analysis.security.currentThreshold','analysis.security.lastScore','Error\x20launching\x20Python:\x20','144811cOWZLB','2180650ADbZOy','\x20Rooms)','VENTILATION_ALERT','log','setStateAsync','stringify','trend_percent','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','getState','stdin','sources','TRAIN_TOPOLOGY','length','(((.+)+)+)+$','analysis.energy.warmupSources','[PYTHON\x20ERR]\x20','toLocaleDateString','analysis.energy.ventilationAlerts','analysis.energy.warmupTimes','trim','success','COMFORT_RESULT','6wruSHi','./automation'];a4_0x372e=function(){return _0x2c87bc;};return a4_0x372e();}const a4_0x2d4876=(function(){let _0x3d17d9=!![];return function(_0x17b59b,_0x4da810){const _0x4f9cfa=_0x3d17d9?function(){const _0x532188=a4_0xc82e;if(_0x4da810){const _0x5b9eff=_0x4da810[_0x532188(0x24f)](_0x17b59b,arguments);return _0x4da810=null,_0x5b9eff;}}:function(){};return _0x3d17d9=![],_0x4f9cfa;};}()),a4_0x5da95b=a4_0x2d4876(this,function(){const _0x529ea4=a4_0xc82e;return a4_0x5da95b[_0x529ea4(0x23d)]()[_0x529ea4(0x24b)](_0x529ea4(0x26a))[_0x529ea4(0x23d)]()[_0x529ea4(0x216)](a4_0x5da95b)[_0x529ea4(0x24b)]('(((.+)+)+)+$');});a4_0x5da95b();'use strict';const {spawn}=require(a4_0x1cb1f6(0x239)),path=require(a4_0x1cb1f6(0x21b)),fs=require('fs'),setup=require(a4_0x1cb1f6(0x22c)),automation=require(a4_0x1cb1f6(0x274));let pythonProcess=null;function send(_0x284598,_0x38d99e,_0x14519e={}){const _0x45f714=a4_0x1cb1f6;if(!pythonProcess||!pythonProcess['stdin'][_0x45f714(0x23b)])return;if(_0x38d99e===_0x45f714(0x214)){const _0x3e35cc=JSON[_0x45f714(0x22f)](JSON[_0x45f714(0x262)](_0x14519e));_0x3e35cc['rooms']&&Array['isArray'](_0x3e35cc[_0x45f714(0x21e)])&&(_0x3e35cc[_0x45f714(0x21e)]=_0x3e35cc['rooms'][_0x45f714(0x24c)](_0x3c39f3=>setup[_0x45f714(0x20c)](_0x3c39f3))),_0x3e35cc[_0x45f714(0x247)]&&Array[_0x45f714(0x1f6)](_0x3e35cc['monitored'])&&(_0x3e35cc['monitored']=_0x3e35cc[_0x45f714(0x247)]['map'](_0x2acfe0=>setup[_0x45f714(0x20c)](_0x2acfe0))),_0x14519e=_0x3e35cc;}if((_0x38d99e===_0x45f714(0x268)||_0x38d99e==='TRAIN_SECURITY')&&_0x14519e[_0x45f714(0x1f2)]){if(Array['isArray'](_0x14519e[_0x45f714(0x1f2)]))try{_0x14519e[_0x45f714(0x1f2)]=_0x14519e[_0x45f714(0x1f2)][_0x45f714(0x24c)](_0x67ffdb=>{const _0x26e915=_0x45f714;if(Array[_0x26e915(0x1f6)](_0x67ffdb))return _0x67ffdb[_0x26e915(0x24c)](_0x5a49a0=>setup[_0x26e915(0x20c)](_0x5a49a0));return[];});}catch(_0x33e4d5){_0x284598['log'][_0x45f714(0x232)](_0x45f714(0x238)+_0x33e4d5[_0x45f714(0x275)]),_0x14519e[_0x45f714(0x1f2)]=[];}else _0x14519e[_0x45f714(0x1f2)]=[];}_0x14519e['room']&&typeof _0x14519e['room']===_0x45f714(0x219)&&(_0x14519e[_0x45f714(0x21a)]=setup[_0x45f714(0x20c)](_0x14519e[_0x45f714(0x21a)]));if(_0x14519e['current_temps']&&typeof _0x14519e[_0x45f714(0x201)]===_0x45f714(0x217)){const _0x1c6b27={};for(const [_0x13306a,_0x102740]of Object[_0x45f714(0x248)](_0x14519e[_0x45f714(0x201)]))_0x1c6b27[setup[_0x45f714(0x20c)](_0x13306a)]=_0x102740;_0x14519e['current_temps']=_0x1c6b27;}const _0xebb060=JSON['stringify']({'command':_0x38d99e,..._0x14519e});try{pythonProcess[_0x45f714(0x266)][_0x45f714(0x231)](_0xebb060+'\x0a');}catch(_0x214bca){}}function a4_0xc82e(_0x2f5594,_0x43139e){const _0x23e748=a4_0x372e();return a4_0xc82e=function(_0x5da95b,_0x2d4876){_0x5da95b=_0x5da95b-0x1f0;let _0x372e9b=_0x23e748[_0x5da95b];return _0x372e9b;},a4_0xc82e(_0x2f5594,_0x43139e);}function handleResult(_0x18a40f,_0x39eeef){const _0x3f0bbc=a4_0x1cb1f6;if(_0x39eeef['type']===_0x3f0bbc(0x252))_0x18a40f[_0x3f0bbc(0x260)]['debug'](_0x3f0bbc(0x21f));else{if(_0x39eeef[_0x3f0bbc(0x254)]===_0x3f0bbc(0x257)){const {anomaly_score:_0x4ae3fd,is_anomaly:_0x1126a7,threshold:_0x2414c8,explanation:_0x8e427}=_0x39eeef[_0x3f0bbc(0x229)];_0x18a40f[_0x3f0bbc(0x261)](_0x3f0bbc(0x25a),{'val':_0x4ae3fd,'ack':!![]}),_0x18a40f[_0x3f0bbc(0x261)](_0x3f0bbc(0x202),{'val':new Date()[_0x3f0bbc(0x249)](),'ack':!![]});if(_0x2414c8)_0x18a40f['setStateAsync'](_0x3f0bbc(0x259),{'val':_0x2414c8,'ack':!![]});if(_0x1126a7){let _0x49819a=_0x3f0bbc(0x264)+_0x4ae3fd['toFixed'](0x4)+')';if(_0x8e427&&_0x8e427!==_0x3f0bbc(0x237))_0x49819a+=_0x3f0bbc(0x1f3)+_0x8e427;_0x18a40f[_0x3f0bbc(0x261)](_0x3f0bbc(0x205),{'val':!![],'ack':!![]}),_0x18a40f[_0x3f0bbc(0x261)]('analysis.alertReason',{'val':_0x49819a,'ack':!![]}),setup[_0x3f0bbc(0x210)](_0x18a40f,_0x3f0bbc(0x234)+_0x49819a,![],!![]);}}else{if(_0x39eeef[_0x3f0bbc(0x254)]===_0x3f0bbc(0x255)){const _0xdb2759=_0x39eeef['payload']['details']||'',_0x1b9802=_0x39eeef[_0x3f0bbc(0x229)][_0x3f0bbc(0x1fd)],_0x517b61=_0x39eeef[_0x3f0bbc(0x229)][_0x3f0bbc(0x271)]?_0x3f0bbc(0x20b)+new Date()[_0x3f0bbc(0x227)]()+'\x20('+_0xdb2759+')':_0x3f0bbc(0x233)+_0x39eeef[_0x3f0bbc(0x229)]['reason'];_0x18a40f[_0x3f0bbc(0x261)]('analysis.training.status',{'val':_0x517b61,'ack':!![]});if(_0x39eeef['payload'][_0x3f0bbc(0x271)]&&_0x1b9802)_0x18a40f['setStateAsync']('analysis.security.currentThreshold',{'val':_0x1b9802,'ack':!![]});}else{if(_0x39eeef[_0x3f0bbc(0x254)]==='GRAPH_TRAINED'){const _0x5d4a32=_0x3f0bbc(0x225)+_0x39eeef['payload'][_0x3f0bbc(0x21e)][_0x3f0bbc(0x269)]+_0x3f0bbc(0x25e);_0x18a40f['setStateAsync'](_0x3f0bbc(0x245),{'val':_0x5d4a32,'ack':!![]});}else{if(_0x39eeef[_0x3f0bbc(0x254)]===_0x3f0bbc(0x1ff)){if(_0x39eeef[_0x3f0bbc(0x229)][_0x3f0bbc(0x271)])try{const _0x5b9683=JSON[_0x3f0bbc(0x22f)](_0x39eeef[_0x3f0bbc(0x229)][_0x3f0bbc(0x224)]);if(_0x5b9683[_0x3f0bbc(0x243)])_0x18a40f['setStateAsync']('analysis.energy.insulationScore',{'val':JSON[_0x3f0bbc(0x262)](_0x5b9683[_0x3f0bbc(0x243)]),'ack':!![]});if(_0x5b9683['heating'])_0x18a40f['setStateAsync']('analysis.energy.heatingScore',{'val':JSON['stringify'](_0x5b9683[_0x3f0bbc(0x22d)]),'ack':!![]});}catch(_0x45ef04){}}else{if(_0x39eeef[_0x3f0bbc(0x254)]===_0x3f0bbc(0x22a))_0x18a40f[_0x3f0bbc(0x260)][_0x3f0bbc(0x1fa)](_0x3f0bbc(0x1fb)),_0x18a40f[_0x3f0bbc(0x261)](_0x3f0bbc(0x215),{'val':new Date()[_0x3f0bbc(0x26d)](),'ack':!![]});else{if(_0x39eeef['type']===_0x3f0bbc(0x241))_0x18a40f[_0x3f0bbc(0x261)](_0x3f0bbc(0x246),{'val':_0x39eeef['payload'][_0x3f0bbc(0x20e)],'ack':!![]});else{if(_0x39eeef[_0x3f0bbc(0x254)]===_0x3f0bbc(0x1f1))_0x18a40f[_0x3f0bbc(0x261)](_0x3f0bbc(0x242),{'val':_0x39eeef[_0x3f0bbc(0x229)][_0x3f0bbc(0x263)],'ack':!![]}),_0x18a40f[_0x3f0bbc(0x260)][_0x3f0bbc(0x1fa)](_0x3f0bbc(0x228)+_0x39eeef[_0x3f0bbc(0x229)][_0x3f0bbc(0x224)]);else{if(_0x39eeef[_0x3f0bbc(0x254)]===_0x3f0bbc(0x251)){if(_0x39eeef[_0x3f0bbc(0x229)][_0x3f0bbc(0x253)]!==undefined)_0x18a40f[_0x3f0bbc(0x261)](_0x3f0bbc(0x23f),{'val':_0x39eeef['payload'][_0x3f0bbc(0x253)],'ack':!![]});if(_0x39eeef[_0x3f0bbc(0x229)][_0x3f0bbc(0x236)])_0x18a40f[_0x3f0bbc(0x261)](_0x3f0bbc(0x211),{'val':_0x39eeef[_0x3f0bbc(0x229)][_0x3f0bbc(0x236)]['join'](',\x20'),'ack':!![]});if(_0x39eeef[_0x3f0bbc(0x229)]['proof'])_0x18a40f[_0x3f0bbc(0x261)](_0x3f0bbc(0x258),{'val':_0x39eeef[_0x3f0bbc(0x229)][_0x3f0bbc(0x204)],'ack':!![]});}else{if(_0x39eeef[_0x3f0bbc(0x254)]===_0x3f0bbc(0x208)){if(_0x39eeef[_0x3f0bbc(0x229)]['forecast'])_0x18a40f['setStateAsync'](_0x3f0bbc(0x203),{'val':JSON[_0x3f0bbc(0x262)](_0x39eeef['payload']['forecast']),'ack':!![]});}else{if(_0x39eeef['type']==='WARMUP_RESULT'){if(_0x39eeef['payload'][_0x3f0bbc(0x1f8)])_0x18a40f[_0x3f0bbc(0x261)](_0x3f0bbc(0x26f),{'val':JSON[_0x3f0bbc(0x262)](_0x39eeef[_0x3f0bbc(0x229)][_0x3f0bbc(0x1f8)]),'ack':!![]});if(_0x39eeef[_0x3f0bbc(0x229)][_0x3f0bbc(0x267)])_0x18a40f[_0x3f0bbc(0x261)](_0x3f0bbc(0x26b),{'val':JSON[_0x3f0bbc(0x262)](_0x39eeef[_0x3f0bbc(0x229)][_0x3f0bbc(0x267)]),'ack':!![]});if(_0x39eeef[_0x3f0bbc(0x229)]['details'])_0x18a40f['setStateAsync']('analysis.energy.warmupDetails',{'val':JSON[_0x3f0bbc(0x262)](_0x39eeef[_0x3f0bbc(0x229)]['details']),'ack':!![]});}else{if(_0x39eeef[_0x3f0bbc(0x254)]===_0x3f0bbc(0x206)){if(_0x39eeef['payload'][_0x3f0bbc(0x1f7)])_0x18a40f['setStateAsync']('analysis.energy.rlPenalties',{'val':JSON[_0x3f0bbc(0x262)](_0x39eeef[_0x3f0bbc(0x229)][_0x3f0bbc(0x1f7)]),'ack':!![]});}else{if(_0x39eeef[_0x3f0bbc(0x254)]===_0x3f0bbc(0x21d)){if(_0x39eeef[_0x3f0bbc(0x229)][_0x3f0bbc(0x250)])_0x18a40f[_0x3f0bbc(0x261)]('analysis.energy.pinnForecast',{'val':JSON['stringify'](_0x39eeef[_0x3f0bbc(0x229)]['forecast']),'ack':!![]});}else{if(_0x39eeef[_0x3f0bbc(0x254)]===_0x3f0bbc(0x25f)){if(_0x39eeef[_0x3f0bbc(0x229)][_0x3f0bbc(0x207)])_0x18a40f[_0x3f0bbc(0x261)](_0x3f0bbc(0x26e),{'val':JSON[_0x3f0bbc(0x262)](_0x39eeef[_0x3f0bbc(0x229)][_0x3f0bbc(0x207)]),'ack':!![]});}else{if(_0x39eeef[_0x3f0bbc(0x254)]===_0x3f0bbc(0x244)){const {proposals:_0xfa627f}=_0x39eeef['payload'];_0x18a40f[_0x3f0bbc(0x265)](_0x3f0bbc(0x235),(_0x9517dc,_0x8108ac)=>{const _0x109232=_0x3f0bbc;if(_0x8108ac&&_0x8108ac[_0x109232(0x1fc)]===!![]&&_0xfa627f&&_0xfa627f[_0x109232(0x269)]>0x0)automation[_0x109232(0x24a)](_0x18a40f,_0xfa627f);});}else{if(_0x39eeef[_0x3f0bbc(0x254)]==='SIGNAL_RESULT'){const {propagation:_0x3015a5}=_0x39eeef[_0x3f0bbc(0x229)];let _0x1b0880=_0x3f0bbc(0x237),_0x3f0b96=0x0;if(_0x3015a5){const _0x1b7c5e=Object[_0x3f0bbc(0x248)](_0x3015a5);_0x1b7c5e[_0x3f0bbc(0x269)]>0x0&&(_0x1b0880=_0x1b7c5e[0x0][0x0],_0x3f0b96=_0x1b7c5e[0x0][0x1]);}_0x18a40f[_0x3f0bbc(0x261)]('analysis.prediction.nextRoom',{'val':_0x1b0880,'ack':!![]}),_0x18a40f['setStateAsync']('analysis.prediction.confidence',{'val':_0x3f0b96,'ack':!![]}),automation['handlePrediction'](_0x18a40f,_0x1b0880,_0x3f0b96);}else{if(_0x39eeef[_0x3f0bbc(0x254)]===_0x3f0bbc(0x222)){const {probabilities:_0x414c36}=_0x39eeef['payload'];if(_0x414c36){_0x18a40f[_0x3f0bbc(0x261)](_0x3f0bbc(0x212),{'val':JSON[_0x3f0bbc(0x262)](_0x414c36),'ack':!![]});const _0xcf5bfb=Object[_0x3f0bbc(0x218)](_0x414c36);_0xcf5bfb[_0x3f0bbc(0x269)]>0x0&&(_0x18a40f[_0x3f0bbc(0x261)]('analysis.prediction.trackerTopRoom',{'val':_0xcf5bfb[0x0],'ack':!![]}),_0x18a40f[_0x3f0bbc(0x261)](_0x3f0bbc(0x221),{'val':_0x414c36[_0xcf5bfb[0x0]],'ack':!![]}));}}else{if(_0x39eeef[_0x3f0bbc(0x254)]===_0x3f0bbc(0x272)){if(_0x39eeef[_0x3f0bbc(0x229)][_0x3f0bbc(0x1f9)])_0x18a40f['setStateAsync']('analysis.automation.detectedPatterns',{'val':JSON[_0x3f0bbc(0x262)](_0x39eeef['payload'][_0x3f0bbc(0x1f9)]),'ack':!![]});}}}}}}}}}}}}}}}}}}}function startService(_0x4dfb99,_0x947af6){const _0x19c319=a4_0x1cb1f6;let _0x2775c3='python3';if(fs['existsSync'](_0x947af6))_0x2775c3=_0x947af6;const _0x1540c0=path[_0x19c319(0x24e)](__dirname,'..',_0x19c319(0x23c)),_0x8b8167=path[_0x19c319(0x24e)](__dirname,'..',_0x19c319(0x240),'service.py');let _0x1ba7f1=fs[_0x19c319(0x23e)](_0x1540c0)?_0x1540c0:fs[_0x19c319(0x23e)](_0x8b8167)?_0x8b8167:null;if(!_0x1ba7f1){_0x4dfb99[_0x19c319(0x260)][_0x19c319(0x20f)](_0x19c319(0x220));return;}try{_0x4dfb99[_0x19c319(0x260)][_0x19c319(0x1fa)]('ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20'+_0x2775c3+'\x20'+_0x1ba7f1),pythonProcess=spawn(_0x2775c3,[_0x1ba7f1]),pythonProcess[_0x19c319(0x1fe)]['on']('data',_0x533128=>{const _0x37ff3a=_0x19c319,_0x1f7979=_0x533128[_0x37ff3a(0x23d)]()[_0x37ff3a(0x22e)]('\x0a');_0x1f7979[_0x37ff3a(0x209)](_0x1115c4=>{const _0x442563=_0x37ff3a,_0x2b3823=_0x1115c4[_0x442563(0x270)]();if(!_0x2b3823)return;if(_0x2b3823['startsWith'](_0x442563(0x230)))_0x4dfb99[_0x442563(0x260)][_0x442563(0x1f0)]('[PYTHON]\x20'+_0x2b3823[_0x442563(0x23a)](0x5)[_0x442563(0x270)]());else{if(_0x2b3823[_0x442563(0x22b)](_0x442563(0x1f5)))try{const _0x36cbe8=JSON[_0x442563(0x22f)](_0x2b3823[_0x442563(0x23a)](0x8)['trim']());handleResult(_0x4dfb99,_0x36cbe8);}catch(_0x59c786){}}});}),pythonProcess[_0x19c319(0x1f4)]['on']('data',_0x4cbc39=>{const _0x1730c7=_0x19c319;_0x4dfb99[_0x1730c7(0x260)][_0x1730c7(0x20f)](_0x1730c7(0x26c)+_0x4cbc39[_0x1730c7(0x23d)]()[_0x1730c7(0x270)]());}),pythonProcess['on'](_0x19c319(0x213),_0x270e5f=>{const _0x5ad029=_0x19c319;_0x4dfb99[_0x5ad029(0x260)]['warn'](_0x5ad029(0x20d)+_0x270e5f),pythonProcess=null;}),_0x4dfb99[_0x19c319(0x200)]=(_0x496c5e,_0x5a650d)=>send(_0x4dfb99,_0x496c5e,_0x5a650d);}catch(_0x2820bd){_0x4dfb99[_0x19c319(0x260)][_0x19c319(0x20f)](_0x19c319(0x25b)+_0x2820bd['message']);}}function stopService(_0x129101){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x352d6b){}pythonProcess=null;}}module[a4_0x1cb1f6(0x21c)]={'startService':startService,'stopService':stopService,'send':send};