const a4_0x17424c=a4_0x2ffe;(function(_0x5a8eff,_0xe4f6c7){const _0x2d8860=a4_0x2ffe,_0x3918b1=_0x5a8eff();while(!![]){try{const _0xab7e4f=-parseInt(_0x2d8860(0x16a))/0x1+parseInt(_0x2d8860(0x197))/0x2*(parseInt(_0x2d8860(0x196))/0x3)+-parseInt(_0x2d8860(0x188))/0x4*(parseInt(_0x2d8860(0x17d))/0x5)+parseInt(_0x2d8860(0x1b9))/0x6*(-parseInt(_0x2d8860(0x19e))/0x7)+-parseInt(_0x2d8860(0x1ab))/0x8*(-parseInt(_0x2d8860(0x16b))/0x9)+-parseInt(_0x2d8860(0x18b))/0xa*(-parseInt(_0x2d8860(0x18d))/0xb)+-parseInt(_0x2d8860(0x17c))/0xc;if(_0xab7e4f===_0xe4f6c7)break;else _0x3918b1['push'](_0x3918b1['shift']());}catch(_0x2adb59){_0x3918b1['push'](_0x3918b1['shift']());}}}(a4_0x26f5,0x7c796));const a4_0xd708=(function(){let _0x47b55b=!![];return function(_0x192bae,_0x246775){const _0xc96f03=_0x47b55b?function(){const _0x119a51=a4_0x2ffe;if(_0x246775){const _0x3e07a8=_0x246775[_0x119a51(0x1a1)](_0x192bae,arguments);return _0x246775=null,_0x3e07a8;}}:function(){};return _0x47b55b=![],_0xc96f03;};}()),a4_0x33abb6=a4_0xd708(this,function(){const _0x5e3b87=a4_0x2ffe;return a4_0x33abb6[_0x5e3b87(0x1a4)]()[_0x5e3b87(0x1ba)](_0x5e3b87(0x161))[_0x5e3b87(0x1a4)]()[_0x5e3b87(0x180)](a4_0x33abb6)['search'](_0x5e3b87(0x161));});a4_0x33abb6();'use strict';const {spawn}=require(a4_0x17424c(0x1a6)),path=require('path'),fs=require('fs'),setup=require('./setup'),automation=require(a4_0x17424c(0x16f));let pythonProcess=null;function a4_0x2ffe(_0x4018d4,_0x29b490){const _0x65b30f=a4_0x26f5();return a4_0x2ffe=function(_0x33abb6,_0xd708){_0x33abb6=_0x33abb6-0x15e;let _0x26f547=_0x65b30f[_0x33abb6];return _0x26f547;},a4_0x2ffe(_0x4018d4,_0x29b490);}function send(_0x338852,_0x59a53f,_0x21d5e4={}){const _0x1c1ae6=a4_0x17424c;if(!pythonProcess||!pythonProcess[_0x1c1ae6(0x1b1)][_0x1c1ae6(0x172)])return;const _0x4cc3b6=JSON[_0x1c1ae6(0x177)]({'command':_0x59a53f,..._0x21d5e4});try{pythonProcess[_0x1c1ae6(0x1b1)]['write'](_0x4cc3b6+'\x0a');}catch(_0x59cc77){}}function handleResult(_0xbde62f,_0x15d03b){const _0x5bf71d=a4_0x17424c;if(_0x15d03b[_0x5bf71d(0x1a0)]===_0x5bf71d(0x1a2))_0xbde62f['log'][_0x5bf71d(0x174)](_0x5bf71d(0x166));else{if(_0x15d03b[_0x5bf71d(0x1a0)]===_0x5bf71d(0x18a)){const {anomaly_score:_0x5c571a,is_anomaly:_0x44a94e,threshold:_0x374cf8,explanation:_0xe01ab}=_0x15d03b[_0x5bf71d(0x168)];_0xbde62f[_0x5bf71d(0x178)]('analysis.security.lastScore',{'val':_0x5c571a,'ack':!![]}),_0xbde62f[_0x5bf71d(0x178)](_0x5bf71d(0x169),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x374cf8)_0xbde62f[_0x5bf71d(0x178)](_0x5bf71d(0x1bc),{'val':_0x374cf8,'ack':!![]});if(_0x44a94e){let _0x6fa0dc=_0x5bf71d(0x1b8)+_0x5c571a[_0x5bf71d(0x1aa)](0x4)+')';if(_0xe01ab&&_0xe01ab!==_0x5bf71d(0x17b))_0x6fa0dc+=_0x5bf71d(0x19a)+_0xe01ab;_0xbde62f[_0x5bf71d(0x178)](_0x5bf71d(0x199),{'val':!![],'ack':!![]}),_0xbde62f[_0x5bf71d(0x178)](_0x5bf71d(0x15e),{'val':_0x6fa0dc,'ack':!![]}),setup[_0x5bf71d(0x164)](_0xbde62f,_0x5bf71d(0x195)+_0x6fa0dc,![],!![]);}}else{if(_0x15d03b['type']===_0x5bf71d(0x1ac)){const _0x50656e=_0x15d03b[_0x5bf71d(0x168)]['details']||'',_0x4d1077=_0x15d03b[_0x5bf71d(0x168)]['threshold'],_0x20e89c=_0x15d03b[_0x5bf71d(0x168)][_0x5bf71d(0x19d)]?_0x5bf71d(0x198)+new Date()[_0x5bf71d(0x19f)]()+'\x20('+_0x50656e+')':_0x5bf71d(0x1bd)+_0x15d03b[_0x5bf71d(0x168)][_0x5bf71d(0x191)];_0xbde62f[_0x5bf71d(0x178)](_0x5bf71d(0x189),{'val':_0x20e89c,'ack':!![]});if(_0x15d03b[_0x5bf71d(0x168)][_0x5bf71d(0x19d)]&&_0x4d1077)_0xbde62f[_0x5bf71d(0x178)](_0x5bf71d(0x1bc),{'val':_0x4d1077,'ack':!![]});}else{if(_0x15d03b[_0x5bf71d(0x1a0)]===_0x5bf71d(0x190)){if(_0x15d03b[_0x5bf71d(0x168)]['success'])try{const _0x2e1a12=JSON[_0x5bf71d(0x193)](_0x15d03b[_0x5bf71d(0x168)][_0x5bf71d(0x167)]);if(_0x2e1a12['insulation'])_0xbde62f[_0x5bf71d(0x178)](_0x5bf71d(0x19b),{'val':JSON['stringify'](_0x2e1a12['insulation']),'ack':!![]});if(_0x2e1a12[_0x5bf71d(0x1a5)])_0xbde62f['setStateAsync'](_0x5bf71d(0x162),{'val':JSON['stringify'](_0x2e1a12['heating']),'ack':!![]});}catch(_0x10e305){}}else{if(_0x15d03b[_0x5bf71d(0x1a0)]==='HEALTH_TRAIN_RESULT'){if(_0x15d03b[_0x5bf71d(0x168)]['success'])_0xbde62f[_0x5bf71d(0x17a)][_0x5bf71d(0x160)](_0x5bf71d(0x179));}else{if(_0x15d03b['type']==='HEALTH_RESULT')_0xbde62f['setStateAsync'](_0x5bf71d(0x1a3),{'val':new Date()[_0x5bf71d(0x175)](),'ack':!![]}),_0xbde62f[_0x5bf71d(0x178)](_0x5bf71d(0x185),{'val':_0x15d03b['payload']['is_anomaly'],'ack':!![]});else{if(_0x15d03b['type']==='GAIT_RESULT'){const {speed_trend:_0x5b330e}=_0x15d03b[_0x5bf71d(0x168)];if(_0x5b330e!==undefined)_0xbde62f[_0x5bf71d(0x178)](_0x5bf71d(0x184),{'val':_0x5b330e,'ack':!![]});}else{if(_0x15d03b[_0x5bf71d(0x1a0)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x1f0b2c}=_0x15d03b[_0x5bf71d(0x168)];if(_0x1f0b2c)_0xbde62f[_0x5bf71d(0x178)](_0x5bf71d(0x15f),{'val':JSON[_0x5bf71d(0x177)](_0x1f0b2c),'ack':!![]});}else{if(_0x15d03b[_0x5bf71d(0x1a0)]===_0x5bf71d(0x17e)){const {forecast:_0x5a0be9}=_0x15d03b[_0x5bf71d(0x168)];if(_0x5a0be9)_0xbde62f['setStateAsync'](_0x5bf71d(0x163),{'val':JSON[_0x5bf71d(0x177)](_0x5a0be9),'ack':!![]});}else{if(_0x15d03b[_0x5bf71d(0x1a0)]===_0x5bf71d(0x1b2)){const {proposals:_0x13ce29}=_0x15d03b[_0x5bf71d(0x168)];_0xbde62f['getState'](_0x5bf71d(0x194),(_0x90af7b,_0x40c6c2)=>{const _0x1e6564=_0x5bf71d;_0x40c6c2&&_0x40c6c2[_0x1e6564(0x18f)]===!![]&&_0x13ce29&&_0x13ce29[_0x1e6564(0x18c)]>0x0&&automation['applyEnergySavings'](_0xbde62f,_0x13ce29);});}else{if(_0x15d03b[_0x5bf71d(0x1a0)]===_0x5bf71d(0x1ae)){const {room:_0x23aa60,propagation:_0x3867e9}=_0x15d03b[_0x5bf71d(0x168)];let _0x29f4fb=_0x5bf71d(0x17b),_0x1be0bf=0x0;if(_0x3867e9){const _0x55b577=Object[_0x5bf71d(0x181)](_0x3867e9);_0x55b577['length']>0x0&&(_0x29f4fb=_0x55b577[0x0][0x0],_0x1be0bf=_0x55b577[0x0][0x1]);}_0xbde62f[_0x5bf71d(0x178)](_0x5bf71d(0x1bb),{'val':_0x29f4fb,'ack':!![]}),_0xbde62f['setStateAsync'](_0x5bf71d(0x19c),{'val':_0x1be0bf,'ack':!![]}),automation[_0x5bf71d(0x186)](_0xbde62f,_0x29f4fb,_0x1be0bf);}else{if(_0x15d03b[_0x5bf71d(0x1a0)]===_0x5bf71d(0x1b4)){const {probabilities:_0x44de6f}=_0x15d03b[_0x5bf71d(0x168)];if(_0x44de6f){_0xbde62f[_0x5bf71d(0x178)](_0x5bf71d(0x1b6),{'val':JSON[_0x5bf71d(0x177)](_0x44de6f),'ack':!![]});const _0xf078b5=Object[_0x5bf71d(0x182)](_0x44de6f);if(_0xf078b5[_0x5bf71d(0x18c)]>0x0){const _0x2a1576=_0xf078b5[0x0],_0x28475d=_0x44de6f[_0x2a1576];_0xbde62f[_0x5bf71d(0x178)](_0x5bf71d(0x183),{'val':_0x2a1576,'ack':!![]}),_0xbde62f[_0x5bf71d(0x178)]('analysis.prediction.trackerConfidence',{'val':_0x28475d,'ack':!![]});}}}else{if(_0x15d03b[_0x5bf71d(0x1a0)]===_0x5bf71d(0x1af)){const {patterns:_0x18546e}=_0x15d03b[_0x5bf71d(0x168)];if(_0x18546e&&_0x18546e[_0x5bf71d(0x18c)]>0x0)_0xbde62f[_0x5bf71d(0x178)](_0x5bf71d(0x187),{'val':JSON[_0x5bf71d(0x177)](_0x18546e),'ack':!![]});}}}}}}}}}}}}}}function startService(_0x38be8a,_0x52e8c7){const _0x23d07b=a4_0x17424c;let _0x55f801=_0x23d07b(0x1a8);if(fs[_0x23d07b(0x1a7)](_0x52e8c7))_0x55f801=_0x52e8c7;try{const _0x18ee8e=path[_0x23d07b(0x1b3)](__dirname,'..',_0x23d07b(0x17f),_0x23d07b(0x171));pythonProcess=spawn(_0x55f801,[_0x18ee8e]),pythonProcess[_0x23d07b(0x1a9)]['on'](_0x23d07b(0x176),_0x1eeebb=>{const _0x1e2616=_0x23d07b,_0x96a44d=_0x1eeebb[_0x1e2616(0x1a4)]()[_0x1e2616(0x18e)]('\x0a');_0x96a44d['forEach'](_0x432b99=>{const _0xb19421=_0x1e2616,_0x302e01=_0x432b99[_0xb19421(0x165)]();if(!_0x302e01)return;if(_0x302e01['startsWith']('[LOG]'))_0x38be8a['log']['debug'](_0xb19421(0x1ad)+_0x302e01[_0xb19421(0x170)](0x5)[_0xb19421(0x165)]());else{if(_0x302e01['startsWith'](_0xb19421(0x1b5)))try{const _0x22c017=JSON['parse'](_0x302e01[_0xb19421(0x170)](0x8)['trim']());handleResult(_0x38be8a,_0x22c017);}catch(_0x519c67){}}});}),pythonProcess['on'](_0x23d07b(0x16c),_0x11783d=>{pythonProcess=null;}),_0x38be8a[_0x23d07b(0x16d)]=(_0x353848,_0x3bb0fa)=>send(_0x38be8a,_0x353848,_0x3bb0fa);}catch(_0x328d48){_0x38be8a[_0x23d07b(0x17a)][_0x23d07b(0x192)](_0x23d07b(0x173)+_0x328d48[_0x23d07b(0x16e)]);}}function stopService(_0x38ef58){const _0x210ca8=a4_0x17424c;if(pythonProcess){try{pythonProcess[_0x210ca8(0x1b0)]();}catch(_0x39dadb){}pythonProcess=null;}}module[a4_0x17424c(0x1b7)]={'startService':startService,'stopService':stopService,'send':send};function a4_0x26f5(){const _0x1a7fef=['analysis.health.gaitSpeed','analysis.health.isAnomaly','handlePrediction','analysis.automation.detectedPatterns','137756VEmzIY','analysis.training.status','SECURITY_RESULT','10jlfepJ','length','2458577CsqgAh','split','val','ENERGY_TRAIN_RESULT','reason','error','parse','analysis.energy.mpcActive','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','530769PnAtsF','10XiefZL','Success:\x20','analysis.isAlert','\x0aGrund:\x20','analysis.energy.insulationScore','analysis.prediction.confidence','success','7InowpJ','toLocaleTimeString','type','apply','PONG','analysis.health.lastCheck','toString','heating','child_process','existsSync','python3','stdout','toFixed','752DYXnPj','TRAINING_COMPLETE','[PYTHON]\x20','SIGNAL_RESULT','COMFORT_RESULT','kill','stdin','ENERGY_OPTIMIZE_RESULT','join','TRACKER_RESULT','[RESULT]','analysis.prediction.trackerState','exports','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','3741648rguhui','search','analysis.prediction.nextRoom','analysis.security.currentThreshold','Failed:\x20','analysis.alertReason','analysis.energy.forecast','info','(((.+)+)+)+$','analysis.energy.heatingScore','analysis.energy.pinnForecast','sendNotification','trim','üêç\x20Python\x20Pong','details','payload','analysis.security.lastCheck','199611vkwmGV','41814gREyKI','close','sendToPythonWrapper','message','./automation','substring','service.py','writable','Error\x20launching\x20Python:\x20','debug','toISOString','data','stringify','setStateAsync','‚úÖ\x20HEALTH\x20TRAINED.','log','Unknown','2128104GoSidF','5CUOgRN','PINN_PREDICT_RESULT','python_service','constructor','entries','keys','analysis.prediction.trackerTopRoom'];a4_0x26f5=function(){return _0x1a7fef;};return a4_0x26f5();}