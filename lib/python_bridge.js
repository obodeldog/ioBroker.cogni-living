const a4_0x31df25=a4_0x1a4d;function a4_0x1926(){const _0x547a51=['analysis.prediction.trackerTopRoom','isArray','log','handlePrediction','./automation','analysis.energy.forecast','toISOString','warn','stringify','kill','(((.+)+)+)+$','analysis.energy.warmupSources','setStateAsync','toFixed','âš ï¸\x20SECURITY\x20ALARM:\x20','search','trim','analysis.automation.detectedPatterns','existsSync','analysis.health.gaitSensors','details','analysis.prediction.nextRoom','analysis.health.activityTrend','split','path','3668823CwfFIz','de-DE','sendNotification','analysis.energy.heatingScore','RL_PENALTY_UPDATE','./setup','constructor','[LOG]','ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','SIGNAL_RESULT','1355020WTijVw','analysis.energy.pinnForecast','PONG','.\x20Please\x20create\x20this\x20file!','insulation','error','analysis.health.gaitDebug','short','analysis.prediction.confidence','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20','analysis.energy.rlPenalties','[RESULT]','is_anomaly','forEach','analysis.energy.ventilationAlerts','analysis.training.status','payload','data','toLocaleDateString','python3','python_service','reason','analysis.security.currentThreshold','success','697383MUkgjx','VENTILATION_ALERT','analysis.energy.mpcActive','analysis.prediction.trackerConfidence','threshold','2OmNHCr','âœ…\x20HEALTH\x20TRAINED.','toString','2396856ftgkUa','join','getState','GAIT_RESULT','stderr','apply','1730610aTGbEX','[PYTHON\x20ERR]\x20','analysis.health.isAnomaly','ENERGY_OPTIMIZE_RESULT','substring','analysis.energy.warmupTimes','service.py','TRACKER_RESULT','24tprADd','debug','4075090pCrBXZ','Python\x20process\x20exited\x20with\x20code\x20','HEALTH_RESULT','2-digit','93009jbLHqd','4PYuZlq','PINN_PREDICT_RESULT','analysis.health.lastCheck','88qXoESo','sendToPythonWrapper','Success:\x20','Error\x20launching\x20Python:\x20','HEALTH_TRAIN_RESULT','toLocaleTimeString','stdin','analysis.prediction.trackerState','writable','COMFORT_RESULT','close','child_process','val','info','length','parse','write','Failed:\x20','analysis.security.lastScore','stdout','type','startsWith'];a4_0x1926=function(){return _0x547a51;};return a4_0x1926();}(function(_0x60522e,_0x1bbbf3){const _0x22a389=a4_0x1a4d,_0x5796d3=_0x60522e();while(!![]){try{const _0x2f8ecd=-parseInt(_0x22a389(0x200))/0x1*(parseInt(_0x22a389(0x205))/0x2)+-parseInt(_0x22a389(0x208))/0x3+-parseInt(_0x22a389(0x21d))/0x4*(-parseInt(_0x22a389(0x218))/0x5)+-parseInt(_0x22a389(0x20e))/0x6+-parseInt(_0x22a389(0x21c))/0x7*(-parseInt(_0x22a389(0x216))/0x8)+parseInt(_0x22a389(0x1dd))/0x9+parseInt(_0x22a389(0x1e8))/0xa*(parseInt(_0x22a389(0x220))/0xb);if(_0x2f8ecd===_0x1bbbf3)break;else _0x5796d3['push'](_0x5796d3['shift']());}catch(_0x3e1da0){_0x5796d3['push'](_0x5796d3['shift']());}}}(a4_0x1926,0x8926c));const a4_0x427ce6=(function(){let _0x5f42e5=!![];return function(_0x28fecf,_0xe8394d){const _0x12a149=_0x5f42e5?function(){const _0x5b44e8=a4_0x1a4d;if(_0xe8394d){const _0x2b178b=_0xe8394d[_0x5b44e8(0x20d)](_0x28fecf,arguments);return _0xe8394d=null,_0x2b178b;}}:function(){};return _0x5f42e5=![],_0x12a149;};}()),a4_0x3079d7=a4_0x427ce6(this,function(){const _0x11f999=a4_0x1a4d;return a4_0x3079d7[_0x11f999(0x207)]()['search'](_0x11f999(0x1ce))[_0x11f999(0x207)]()[_0x11f999(0x1e3)](a4_0x3079d7)[_0x11f999(0x1d3)]('(((.+)+)+)+$');});a4_0x3079d7();'use strict';const {spawn}=require(a4_0x31df25(0x22b)),path=require(a4_0x31df25(0x1dc)),fs=require('fs'),setup=require(a4_0x31df25(0x1e2)),automation=require(a4_0x31df25(0x23a));let pythonProcess=null;function send(_0x5898fb,_0x181f43,_0x219157={}){const _0x582c0b=a4_0x31df25;if(!pythonProcess||!pythonProcess[_0x582c0b(0x226)][_0x582c0b(0x228)])return;const _0x5c506b=JSON[_0x582c0b(0x1cc)]({'command':_0x181f43,..._0x219157});try{pythonProcess[_0x582c0b(0x226)][_0x582c0b(0x230)](_0x5c506b+'\x0a');}catch(_0x26f6cc){}}function handleResult(_0x3ee8ad,_0x1bdc7f){const _0x3f95e8=a4_0x31df25;if(_0x1bdc7f[_0x3f95e8(0x234)]===_0x3f95e8(0x1ea))_0x3ee8ad[_0x3f95e8(0x238)][_0x3f95e8(0x217)]('ðŸ\x20Python\x20Pong');else{if(_0x1bdc7f[_0x3f95e8(0x234)]==='SECURITY_RESULT'){const {anomaly_score:_0x55c839,is_anomaly:_0x317d12,threshold:_0x4b7852,explanation:_0x3c53db}=_0x1bdc7f[_0x3f95e8(0x1f8)];_0x3ee8ad[_0x3f95e8(0x1d0)](_0x3f95e8(0x232),{'val':_0x55c839,'ack':!![]}),_0x3ee8ad[_0x3f95e8(0x1d0)]('analysis.security.lastCheck',{'val':new Date()[_0x3f95e8(0x23c)](),'ack':!![]});if(_0x4b7852)_0x3ee8ad['setStateAsync'](_0x3f95e8(0x1fe),{'val':_0x4b7852,'ack':!![]});if(_0x317d12){let _0x2cb1b6=_0x3f95e8(0x1e6)+_0x55c839[_0x3f95e8(0x1d1)](0x4)+')';if(_0x3c53db&&_0x3c53db!=='Unknown')_0x2cb1b6+='\x0aGrund:\x20'+_0x3c53db;_0x3ee8ad[_0x3f95e8(0x1d0)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x3ee8ad[_0x3f95e8(0x1d0)]('analysis.alertReason',{'val':_0x2cb1b6,'ack':!![]}),setup[_0x3f95e8(0x1df)](_0x3ee8ad,_0x3f95e8(0x1d2)+_0x2cb1b6,![],!![]);}}else{if(_0x1bdc7f[_0x3f95e8(0x234)]==='TRAINING_COMPLETE'){const _0x2aa654=_0x1bdc7f[_0x3f95e8(0x1f8)][_0x3f95e8(0x1d8)]||'',_0xc76540=_0x1bdc7f[_0x3f95e8(0x1f8)][_0x3f95e8(0x204)],_0x1c9a0a=_0x1bdc7f[_0x3f95e8(0x1f8)][_0x3f95e8(0x1ff)]?_0x3f95e8(0x222)+new Date()[_0x3f95e8(0x225)]()+'\x20('+_0x2aa654+')':_0x3f95e8(0x231)+_0x1bdc7f[_0x3f95e8(0x1f8)][_0x3f95e8(0x1fd)];_0x3ee8ad[_0x3f95e8(0x1d0)](_0x3f95e8(0x1f7),{'val':_0x1c9a0a,'ack':!![]});if(_0x1bdc7f['payload'][_0x3f95e8(0x1ff)]&&_0xc76540)_0x3ee8ad[_0x3f95e8(0x1d0)](_0x3f95e8(0x1fe),{'val':_0xc76540,'ack':!![]});}else{if(_0x1bdc7f[_0x3f95e8(0x234)]==='ENERGY_TRAIN_RESULT'){if(_0x1bdc7f[_0x3f95e8(0x1f8)][_0x3f95e8(0x1ff)])try{const _0x24aec6=JSON[_0x3f95e8(0x22f)](_0x1bdc7f[_0x3f95e8(0x1f8)][_0x3f95e8(0x1d8)]);if(_0x24aec6[_0x3f95e8(0x1ec)])_0x3ee8ad[_0x3f95e8(0x1d0)]('analysis.energy.insulationScore',{'val':JSON[_0x3f95e8(0x1cc)](_0x24aec6[_0x3f95e8(0x1ec)]),'ack':!![]});if(_0x24aec6['heating'])_0x3ee8ad['setStateAsync'](_0x3f95e8(0x1e0),{'val':JSON[_0x3f95e8(0x1cc)](_0x24aec6['heating']),'ack':!![]});}catch(_0x5b3182){}}else{if(_0x1bdc7f[_0x3f95e8(0x234)]===_0x3f95e8(0x224)){if(_0x1bdc7f[_0x3f95e8(0x1f8)]['success']){_0x3ee8ad[_0x3f95e8(0x238)][_0x3f95e8(0x22d)](_0x3f95e8(0x206));const _0x1393f4=new Date(),_0x4d5c22=_0x1393f4[_0x3f95e8(0x1fa)]('de-DE',{'day':'2-digit','month':_0x3f95e8(0x1ef),'hour':_0x3f95e8(0x21b),'minute':'2-digit'});_0x3ee8ad['setStateAsync'](_0x3f95e8(0x21f),{'val':_0x4d5c22,'ack':!![]});}}else{if(_0x1bdc7f['type']===_0x3f95e8(0x21a)){const _0x554291=new Date(),_0x1bc303=_0x554291[_0x3f95e8(0x1fa)](_0x3f95e8(0x1de),{'day':_0x3f95e8(0x21b),'month':_0x3f95e8(0x1ef),'hour':_0x3f95e8(0x21b),'minute':'2-digit'});_0x3ee8ad['setStateAsync'](_0x3f95e8(0x21f),{'val':_0x1bc303,'ack':!![]}),_0x3ee8ad['setStateAsync'](_0x3f95e8(0x210),{'val':_0x1bdc7f['payload'][_0x3f95e8(0x1f4)],'ack':!![]});}else{if(_0x1bdc7f[_0x3f95e8(0x234)]==='HEALTH_TREND_RESULT'){const {trend_percent:_0x431e22,details:_0x20897b}=_0x1bdc7f['payload'],_0x5ef9f4=new Date(),_0x474dfd=_0x5ef9f4['toLocaleDateString'](_0x3f95e8(0x1de),{'day':'2-digit','month':_0x3f95e8(0x1ef),'hour':_0x3f95e8(0x21b),'minute':_0x3f95e8(0x21b)});_0x3ee8ad[_0x3f95e8(0x1d0)](_0x3f95e8(0x21f),{'val':_0x474dfd,'ack':!![]}),_0x3ee8ad[_0x3f95e8(0x1d0)](_0x3f95e8(0x1da),{'val':_0x431e22,'ack':!![]}),_0x3ee8ad[_0x3f95e8(0x238)][_0x3f95e8(0x22d)]('ðŸ“ˆ\x20Health\x20Trend:\x20'+_0x20897b);}else{if(_0x1bdc7f['type']===_0x3f95e8(0x20b)){const {speed_trend:_0x30c797,sensors:_0x3d449d,proof:_0x313185}=_0x1bdc7f['payload'];if(_0x30c797!==undefined)_0x3ee8ad[_0x3f95e8(0x1d0)]('analysis.health.gaitSpeed',{'val':_0x30c797,'ack':!![]});if(_0x3d449d&&Array[_0x3f95e8(0x237)](_0x3d449d))_0x3ee8ad[_0x3f95e8(0x1d0)](_0x3f95e8(0x1d7),{'val':_0x3d449d[_0x3f95e8(0x209)](',\x20'),'ack':!![]});if(_0x313185)_0x3ee8ad[_0x3f95e8(0x1d0)](_0x3f95e8(0x1ee),{'val':_0x313185,'ack':!![]});}else{if(_0x1bdc7f[_0x3f95e8(0x234)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x273a8e}=_0x1bdc7f['payload'];if(_0x273a8e)_0x3ee8ad['setStateAsync'](_0x3f95e8(0x23b),{'val':JSON[_0x3f95e8(0x1cc)](_0x273a8e),'ack':!![]});}else{if(_0x1bdc7f[_0x3f95e8(0x234)]==='WARMUP_RESULT'){const {times:_0x2109c0,sources:_0x453495,details:_0x17b9b1}=_0x1bdc7f[_0x3f95e8(0x1f8)];if(_0x2109c0)_0x3ee8ad['setStateAsync'](_0x3f95e8(0x213),{'val':JSON[_0x3f95e8(0x1cc)](_0x2109c0),'ack':!![]});if(_0x453495)_0x3ee8ad['setStateAsync'](_0x3f95e8(0x1cf),{'val':JSON['stringify'](_0x453495),'ack':!![]});if(_0x17b9b1)_0x3ee8ad[_0x3f95e8(0x1d0)]('analysis.energy.warmupDetails',{'val':JSON[_0x3f95e8(0x1cc)](_0x17b9b1),'ack':!![]});}else{if(_0x1bdc7f[_0x3f95e8(0x234)]===_0x3f95e8(0x1e1)){const {penalties:_0x1129eb}=_0x1bdc7f['payload'];if(_0x1129eb)_0x3ee8ad['setStateAsync'](_0x3f95e8(0x1f2),{'val':JSON[_0x3f95e8(0x1cc)](_0x1129eb),'ack':!![]});}else{if(_0x1bdc7f[_0x3f95e8(0x234)]===_0x3f95e8(0x21e)){const {forecast:_0x54c7d3}=_0x1bdc7f[_0x3f95e8(0x1f8)];if(_0x54c7d3)_0x3ee8ad[_0x3f95e8(0x1d0)](_0x3f95e8(0x1e9),{'val':JSON[_0x3f95e8(0x1cc)](_0x54c7d3),'ack':!![]});}else{if(_0x1bdc7f['type']===_0x3f95e8(0x201)){const {alerts:_0x5b71f3}=_0x1bdc7f['payload'];if(_0x5b71f3)_0x3ee8ad[_0x3f95e8(0x1d0)](_0x3f95e8(0x1f6),{'val':JSON['stringify'](_0x5b71f3),'ack':!![]});}else{if(_0x1bdc7f[_0x3f95e8(0x234)]===_0x3f95e8(0x211)){const {proposals:_0x4013a9}=_0x1bdc7f['payload'];_0x3ee8ad[_0x3f95e8(0x20a)](_0x3f95e8(0x202),(_0x2210e3,_0x134011)=>{const _0x108ac8=_0x3f95e8;_0x134011&&_0x134011[_0x108ac8(0x22c)]===!![]&&_0x4013a9&&_0x4013a9['length']>0x0&&automation['applyEnergySavings'](_0x3ee8ad,_0x4013a9);});}else{if(_0x1bdc7f[_0x3f95e8(0x234)]===_0x3f95e8(0x1e7)){const {room:_0x809500,propagation:_0x1c0905}=_0x1bdc7f[_0x3f95e8(0x1f8)];let _0x8da9f5='Unknown',_0x529045=0x0;if(_0x1c0905){const _0x10ebdf=Object['entries'](_0x1c0905);_0x10ebdf['length']>0x0&&(_0x8da9f5=_0x10ebdf[0x0][0x0],_0x529045=_0x10ebdf[0x0][0x1]);}_0x3ee8ad['setStateAsync'](_0x3f95e8(0x1d9),{'val':_0x8da9f5,'ack':!![]}),_0x3ee8ad['setStateAsync'](_0x3f95e8(0x1f0),{'val':_0x529045,'ack':!![]}),automation[_0x3f95e8(0x239)](_0x3ee8ad,_0x8da9f5,_0x529045);}else{if(_0x1bdc7f[_0x3f95e8(0x234)]===_0x3f95e8(0x215)){const {probabilities:_0x5f8869}=_0x1bdc7f['payload'];if(_0x5f8869){_0x3ee8ad[_0x3f95e8(0x1d0)](_0x3f95e8(0x227),{'val':JSON['stringify'](_0x5f8869),'ack':!![]});const _0x18300c=Object['keys'](_0x5f8869);if(_0x18300c['length']>0x0){const _0x4f6402=_0x18300c[0x0],_0x472d74=_0x5f8869[_0x4f6402];_0x3ee8ad['setStateAsync'](_0x3f95e8(0x236),{'val':_0x4f6402,'ack':!![]}),_0x3ee8ad['setStateAsync'](_0x3f95e8(0x203),{'val':_0x472d74,'ack':!![]});}}}else{if(_0x1bdc7f['type']===_0x3f95e8(0x229)){const {patterns:_0x29fc2e}=_0x1bdc7f['payload'];if(_0x29fc2e&&_0x29fc2e[_0x3f95e8(0x22e)]>0x0)_0x3ee8ad['setStateAsync'](_0x3f95e8(0x1d5),{'val':JSON[_0x3f95e8(0x1cc)](_0x29fc2e),'ack':!![]});}}}}}}}}}}}}}}}}}}function startService(_0x19aff7,_0x1d51e2){const _0x43f2d9=a4_0x31df25;let _0x21ee58=_0x43f2d9(0x1fb);if(fs[_0x43f2d9(0x1d6)](_0x1d51e2))_0x21ee58=_0x1d51e2;const _0x2f706b=path[_0x43f2d9(0x209)](__dirname,'..',_0x43f2d9(0x214)),_0x45bd2a=path['join'](__dirname,'..',_0x43f2d9(0x1fc),_0x43f2d9(0x214));let _0xb0729f='';if(fs[_0x43f2d9(0x1d6)](_0x2f706b))_0xb0729f=_0x2f706b;else{if(fs['existsSync'](_0x45bd2a))_0xb0729f=_0x45bd2a;else{_0x19aff7[_0x43f2d9(0x238)]['error'](_0x43f2d9(0x1f1)+_0x2f706b+'\x20AND\x20'+_0x45bd2a+_0x43f2d9(0x1eb));return;}}try{_0x19aff7[_0x43f2d9(0x238)][_0x43f2d9(0x22d)](_0x43f2d9(0x1e5)+_0x21ee58+'\x20'+_0xb0729f),pythonProcess=spawn(_0x21ee58,[_0xb0729f]),pythonProcess[_0x43f2d9(0x233)]['on']('data',_0x501497=>{const _0xa5f52e=_0x43f2d9,_0xc28b37=_0x501497['toString']()[_0xa5f52e(0x1db)]('\x0a');_0xc28b37[_0xa5f52e(0x1f5)](_0x383a8d=>{const _0x33dcd0=_0xa5f52e,_0x3179d6=_0x383a8d['trim']();if(!_0x3179d6)return;if(_0x3179d6[_0x33dcd0(0x235)](_0x33dcd0(0x1e4)))_0x19aff7[_0x33dcd0(0x238)][_0x33dcd0(0x217)]('[PYTHON]\x20'+_0x3179d6['substring'](0x5)[_0x33dcd0(0x1d4)]());else{if(_0x3179d6[_0x33dcd0(0x235)](_0x33dcd0(0x1f3)))try{const _0x38edf2=JSON['parse'](_0x3179d6[_0x33dcd0(0x212)](0x8)[_0x33dcd0(0x1d4)]());handleResult(_0x19aff7,_0x38edf2);}catch(_0x5bb025){}}});}),pythonProcess[_0x43f2d9(0x20c)]['on'](_0x43f2d9(0x1f9),_0x4c9684=>{const _0x2c5a43=_0x43f2d9;_0x19aff7[_0x2c5a43(0x238)]['error'](_0x2c5a43(0x20f)+_0x4c9684[_0x2c5a43(0x207)]()[_0x2c5a43(0x1d4)]());}),pythonProcess['on'](_0x43f2d9(0x22a),_0xf3c6be=>{const _0x29ee95=_0x43f2d9;_0x19aff7[_0x29ee95(0x238)][_0x29ee95(0x23d)](_0x29ee95(0x219)+_0xf3c6be),pythonProcess=null;}),_0x19aff7[_0x43f2d9(0x221)]=(_0x5d5f25,_0x5be258)=>send(_0x19aff7,_0x5d5f25,_0x5be258);}catch(_0x1b1b1b){_0x19aff7[_0x43f2d9(0x238)][_0x43f2d9(0x1ed)](_0x43f2d9(0x223)+_0x1b1b1b['message']);}}function a4_0x1a4d(_0x3794c4,_0x4055bb){const _0x50ead7=a4_0x1926();return a4_0x1a4d=function(_0x3079d7,_0x427ce6){_0x3079d7=_0x3079d7-0x1cc;let _0x19268d=_0x50ead7[_0x3079d7];return _0x19268d;},a4_0x1a4d(_0x3794c4,_0x4055bb);}function stopService(_0x136cff){const _0x47a32d=a4_0x31df25;if(pythonProcess){try{pythonProcess[_0x47a32d(0x1cd)]();}catch(_0x5ac31c){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};