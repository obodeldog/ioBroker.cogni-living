const a4_0x353bfd=a4_0x4a52;(function(_0x3f2c6e,_0xf9f49b){const _0x27418c=a4_0x4a52,_0x20fd48=_0x3f2c6e();while(!![]){try{const _0x4de72a=-parseInt(_0x27418c(0xd5))/0x1+parseInt(_0x27418c(0xdc))/0x2*(parseInt(_0x27418c(0xe5))/0x3)+-parseInt(_0x27418c(0x94))/0x4*(parseInt(_0x27418c(0xb2))/0x5)+-parseInt(_0x27418c(0xe0))/0x6+parseInt(_0x27418c(0xc4))/0x7*(-parseInt(_0x27418c(0xb8))/0x8)+-parseInt(_0x27418c(0x99))/0x9+parseInt(_0x27418c(0xd1))/0xa;if(_0x4de72a===_0xf9f49b)break;else _0x20fd48['push'](_0x20fd48['shift']());}catch(_0x4b6a13){_0x20fd48['push'](_0x20fd48['shift']());}}}(a4_0x1880,0xef973));const a4_0x2db61f=(function(){let _0x2758ae=!![];return function(_0x767fda,_0x57b00e){const _0x3a2137=_0x2758ae?function(){const _0x55e30f=a4_0x4a52;if(_0x57b00e){const _0x26fc28=_0x57b00e[_0x55e30f(0xdb)](_0x767fda,arguments);return _0x57b00e=null,_0x26fc28;}}:function(){};return _0x2758ae=![],_0x3a2137;};}()),a4_0x67686f=a4_0x2db61f(this,function(){const _0x1732bb=a4_0x4a52;return a4_0x67686f[_0x1732bb(0x8e)]()['search']('(((.+)+)+)+$')[_0x1732bb(0x8e)]()['constructor'](a4_0x67686f)[_0x1732bb(0xba)](_0x1732bb(0xda));});a4_0x67686f();'use strict';const {spawn}=require(a4_0x353bfd(0xa3)),path=require('path'),fs=require('fs'),setup=require(a4_0x353bfd(0x9d)),automation=require(a4_0x353bfd(0xaf));let pythonProcess=null;function send(_0x1ff21e,_0x5634de,_0x428a5a={}){const _0x2a0702=a4_0x353bfd;if(!pythonProcess||!pythonProcess[_0x2a0702(0xc8)][_0x2a0702(0xa2)])return;const _0x199bce=JSON[_0x2a0702(0xd8)]({'command':_0x5634de,..._0x428a5a});try{pythonProcess[_0x2a0702(0xc8)][_0x2a0702(0xd2)](_0x199bce+'\x0a');}catch(_0x3ed8a8){}}function handleResult(_0x2f4e5c,_0x1246f4){const _0x38f65e=a4_0x353bfd;if(_0x1246f4[_0x38f65e(0xfa)]==='PONG')_0x2f4e5c[_0x38f65e(0xb1)][_0x38f65e(0xf0)](_0x38f65e(0xee));else{if(_0x1246f4[_0x38f65e(0xfa)]===_0x38f65e(0xa7)){const {anomaly_score:_0x27a840,is_anomaly:_0x5e5bc4,threshold:_0x1b38b6,explanation:_0x1e503b}=_0x1246f4[_0x38f65e(0xe7)];_0x2f4e5c[_0x38f65e(0xc7)](_0x38f65e(0x8f),{'val':_0x27a840,'ack':!![]}),_0x2f4e5c[_0x38f65e(0xc7)](_0x38f65e(0xbc),{'val':new Date()[_0x38f65e(0xb5)](),'ack':!![]});if(_0x1b38b6)_0x2f4e5c[_0x38f65e(0xc7)](_0x38f65e(0xc9),{'val':_0x1b38b6,'ack':!![]});if(_0x5e5bc4){let _0x26cafc='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x27a840[_0x38f65e(0xbb)](0x4)+')';if(_0x1e503b&&_0x1e503b!==_0x38f65e(0xc0))_0x26cafc+='\x0aGrund:\x20'+_0x1e503b;_0x2f4e5c[_0x38f65e(0xc7)](_0x38f65e(0xc2),{'val':!![],'ack':!![]}),_0x2f4e5c[_0x38f65e(0xc7)]('analysis.alertReason',{'val':_0x26cafc,'ack':!![]}),setup[_0x38f65e(0xad)](_0x2f4e5c,_0x38f65e(0xc5)+_0x26cafc,![],!![]);}}else{if(_0x1246f4[_0x38f65e(0xfa)]==='TRAINING_COMPLETE'){const _0x3c52a3=_0x1246f4[_0x38f65e(0xe7)][_0x38f65e(0xb4)]||'',_0x35d822=_0x1246f4[_0x38f65e(0xe7)][_0x38f65e(0xdd)],_0x3e76eb=_0x1246f4[_0x38f65e(0xe7)]['success']?'Success:\x20'+new Date()[_0x38f65e(0xe9)]()+'\x20('+_0x3c52a3+')':_0x38f65e(0xf9)+_0x1246f4[_0x38f65e(0xe7)]['reason'];_0x2f4e5c['setStateAsync'](_0x38f65e(0x8d),{'val':_0x3e76eb,'ack':!![]});if(_0x1246f4[_0x38f65e(0xe7)][_0x38f65e(0x90)]&&_0x35d822)_0x2f4e5c[_0x38f65e(0xc7)](_0x38f65e(0xc9),{'val':_0x35d822,'ack':!![]});}else{if(_0x1246f4[_0x38f65e(0xfa)]==='ENERGY_TRAIN_RESULT'){if(_0x1246f4[_0x38f65e(0xe7)][_0x38f65e(0x90)])try{const _0x61c2a1=JSON['parse'](_0x1246f4['payload'][_0x38f65e(0xb4)]);if(_0x61c2a1[_0x38f65e(0xb9)])_0x2f4e5c['setStateAsync']('analysis.energy.insulationScore',{'val':JSON[_0x38f65e(0xd8)](_0x61c2a1[_0x38f65e(0xb9)]),'ack':!![]});if(_0x61c2a1[_0x38f65e(0xf4)])_0x2f4e5c[_0x38f65e(0xc7)]('analysis.energy.heatingScore',{'val':JSON[_0x38f65e(0xd8)](_0x61c2a1[_0x38f65e(0xf4)]),'ack':!![]});}catch(_0x4183fc){}}else{if(_0x1246f4['type']===_0x38f65e(0xf8)){if(_0x1246f4[_0x38f65e(0xe7)][_0x38f65e(0x90)]){_0x2f4e5c[_0x38f65e(0xb1)][_0x38f65e(0xf2)](_0x38f65e(0xea));const _0x81bc14=new Date(),_0x52a4f0=_0x81bc14[_0x38f65e(0xf6)](_0x38f65e(0xb7),{'day':_0x38f65e(0xb6),'month':_0x38f65e(0xef),'hour':_0x38f65e(0xb6),'minute':_0x38f65e(0xb6)});_0x2f4e5c[_0x38f65e(0xc7)](_0x38f65e(0x9a),{'val':_0x52a4f0,'ack':!![]});}}else{if(_0x1246f4[_0x38f65e(0xfa)]===_0x38f65e(0xc3)){const _0x579849=new Date(),_0xb8dba8=_0x579849['toLocaleDateString']('de-DE',{'day':_0x38f65e(0xb6),'month':_0x38f65e(0xef),'hour':_0x38f65e(0xb6),'minute':'2-digit'});_0x2f4e5c[_0x38f65e(0xc7)]('analysis.health.lastCheck',{'val':_0xb8dba8,'ack':!![]}),_0x2f4e5c[_0x38f65e(0xc7)](_0x38f65e(0xa8),{'val':_0x1246f4[_0x38f65e(0xe7)][_0x38f65e(0xe4)],'ack':!![]});}else{if(_0x1246f4[_0x38f65e(0xfa)]===_0x38f65e(0xc1)){const {trend_percent:_0x28854c,details:_0x45eb33}=_0x1246f4[_0x38f65e(0xe7)],_0x33362a=new Date(),_0x5e6eca=_0x33362a['toLocaleDateString'](_0x38f65e(0xb7),{'day':_0x38f65e(0xb6),'month':_0x38f65e(0xef),'hour':'2-digit','minute':_0x38f65e(0xb6)});_0x2f4e5c[_0x38f65e(0xc7)]('analysis.health.lastCheck',{'val':_0x5e6eca,'ack':!![]}),_0x2f4e5c[_0x38f65e(0xc7)](_0x38f65e(0x9c),{'val':_0x28854c,'ack':!![]}),_0x2f4e5c[_0x38f65e(0xb1)][_0x38f65e(0xf2)](_0x38f65e(0xbe)+_0x45eb33);}else{if(_0x1246f4[_0x38f65e(0xfa)]===_0x38f65e(0xaa)){const {speed_trend:_0x10ef90,sensors:_0x3325ec}=_0x1246f4['payload'];if(_0x10ef90!==undefined)_0x2f4e5c[_0x38f65e(0xc7)](_0x38f65e(0xce),{'val':_0x10ef90,'ack':!![]});_0x3325ec&&Array[_0x38f65e(0xa0)](_0x3325ec)&&_0x2f4e5c[_0x38f65e(0xc7)](_0x38f65e(0xca),{'val':_0x3325ec[_0x38f65e(0x9f)](',\x20'),'ack':!![]});}else{if(_0x1246f4[_0x38f65e(0xfa)]===_0x38f65e(0xab)){const {forecast:_0x5b0f36}=_0x1246f4['payload'];if(_0x5b0f36)_0x2f4e5c[_0x38f65e(0xc7)](_0x38f65e(0x92),{'val':JSON[_0x38f65e(0xd8)](_0x5b0f36),'ack':!![]});}else{if(_0x1246f4[_0x38f65e(0xfa)]===_0x38f65e(0xdf)){const {times:_0x4ab165,sources:_0x40d563,details:_0x2cdcc9}=_0x1246f4[_0x38f65e(0xe7)];if(_0x4ab165)_0x2f4e5c[_0x38f65e(0xc7)](_0x38f65e(0x93),{'val':JSON[_0x38f65e(0xd8)](_0x4ab165),'ack':!![]});if(_0x40d563)_0x2f4e5c[_0x38f65e(0xc7)]('analysis.energy.warmupSources',{'val':JSON['stringify'](_0x40d563),'ack':!![]});if(_0x2cdcc9)_0x2f4e5c[_0x38f65e(0xc7)](_0x38f65e(0xc6),{'val':JSON['stringify'](_0x2cdcc9),'ack':!![]});}else{if(_0x1246f4[_0x38f65e(0xfa)]===_0x38f65e(0x96)){const {penalties:_0x292370}=_0x1246f4['payload'];if(_0x292370)_0x2f4e5c[_0x38f65e(0xc7)](_0x38f65e(0xd9),{'val':JSON['stringify'](_0x292370),'ack':!![]});}else{if(_0x1246f4['type']==='PINN_PREDICT_RESULT'){const {forecast:_0x1be1df}=_0x1246f4['payload'];if(_0x1be1df)_0x2f4e5c[_0x38f65e(0xc7)]('analysis.energy.pinnForecast',{'val':JSON[_0x38f65e(0xd8)](_0x1be1df),'ack':!![]});}else{if(_0x1246f4[_0x38f65e(0xfa)]===_0x38f65e(0x95)){const {alerts:_0x53f8ba}=_0x1246f4[_0x38f65e(0xe7)];if(_0x53f8ba)_0x2f4e5c[_0x38f65e(0xc7)](_0x38f65e(0xa1),{'val':JSON['stringify'](_0x53f8ba),'ack':!![]});}else{if(_0x1246f4[_0x38f65e(0xfa)]===_0x38f65e(0xb0)){const {proposals:_0x3f386e}=_0x1246f4[_0x38f65e(0xe7)];_0x2f4e5c['getState'](_0x38f65e(0xf7),(_0x2d67f3,_0x88072e)=>{const _0x1f0385=_0x38f65e;_0x88072e&&_0x88072e[_0x1f0385(0xeb)]===!![]&&_0x3f386e&&_0x3f386e['length']>0x0&&automation['applyEnergySavings'](_0x2f4e5c,_0x3f386e);});}else{if(_0x1246f4[_0x38f65e(0xfa)]===_0x38f65e(0xcc)){const {room:_0x4c4a95,propagation:_0x57a972}=_0x1246f4[_0x38f65e(0xe7)];let _0x568492=_0x38f65e(0xc0),_0xcb8d89=0x0;if(_0x57a972){const _0x467d00=Object[_0x38f65e(0xa9)](_0x57a972);_0x467d00[_0x38f65e(0xe1)]>0x0&&(_0x568492=_0x467d00[0x0][0x0],_0xcb8d89=_0x467d00[0x0][0x1]);}_0x2f4e5c[_0x38f65e(0xc7)](_0x38f65e(0xe6),{'val':_0x568492,'ack':!![]}),_0x2f4e5c[_0x38f65e(0xc7)]('analysis.prediction.confidence',{'val':_0xcb8d89,'ack':!![]}),automation[_0x38f65e(0xe3)](_0x2f4e5c,_0x568492,_0xcb8d89);}else{if(_0x1246f4['type']===_0x38f65e(0xae)){const {probabilities:_0x494a9a}=_0x1246f4[_0x38f65e(0xe7)];if(_0x494a9a){_0x2f4e5c['setStateAsync'](_0x38f65e(0xb3),{'val':JSON[_0x38f65e(0xd8)](_0x494a9a),'ack':!![]});const _0x45a543=Object[_0x38f65e(0xed)](_0x494a9a);if(_0x45a543[_0x38f65e(0xe1)]>0x0){const _0x5ac622=_0x45a543[0x0],_0x1fa2b2=_0x494a9a[_0x5ac622];_0x2f4e5c[_0x38f65e(0xc7)]('analysis.prediction.trackerTopRoom',{'val':_0x5ac622,'ack':!![]}),_0x2f4e5c[_0x38f65e(0xc7)](_0x38f65e(0xa4),{'val':_0x1fa2b2,'ack':!![]});}}}else{if(_0x1246f4['type']===_0x38f65e(0xa6)){const {patterns:_0x27d687}=_0x1246f4[_0x38f65e(0xe7)];if(_0x27d687&&_0x27d687[_0x38f65e(0xe1)]>0x0)_0x2f4e5c[_0x38f65e(0xc7)]('analysis.automation.detectedPatterns',{'val':JSON[_0x38f65e(0xd8)](_0x27d687),'ack':!![]});}}}}}}}}}}}}}}}}}}function a4_0x1880(){const _0x50d397=['toLocaleTimeString','âœ…\x20HEALTH\x20TRAINED.','val','[LOG]','keys','ðŸ\x20Python\x20Pong','short','debug','Error\x20launching\x20Python:\x20','info','service.py','heating','existsSync','toLocaleDateString','analysis.energy.mpcActive','HEALTH_TRAIN_RESULT','Failed:\x20','type','analysis.training.status','toString','analysis.security.lastScore','success','split','analysis.energy.forecast','analysis.energy.warmupTimes','1316WAzbCl','VENTILATION_ALERT','RL_PENALTY_UPDATE','ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20','kill','2260197iRKNJj','analysis.health.lastCheck','warn','analysis.health.activityTrend','./setup','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20','join','isArray','analysis.energy.ventilationAlerts','writable','child_process','analysis.prediction.trackerConfidence','python_service','COMFORT_RESULT','SECURITY_RESULT','analysis.health.isAnomaly','entries','GAIT_RESULT','ENERGY_PREDICT_RESULT','close','sendNotification','TRACKER_RESULT','./automation','ENERGY_OPTIMIZE_RESULT','log','7670XKxIrd','analysis.prediction.trackerState','details','toISOString','2-digit','de-DE','48ifDRQy','insulation','search','toFixed','analysis.security.lastCheck','Python\x20process\x20exited\x20with\x20code\x20','ðŸ“ˆ\x20Health\x20Trend:\x20','python3','Unknown','HEALTH_TREND_RESULT','analysis.isAlert','HEALTH_RESULT','2121742hXXjzw','âš ï¸\x20SECURITY\x20ALARM:\x20','analysis.energy.warmupDetails','setStateAsync','stdin','analysis.security.currentThreshold','analysis.health.gaitSensors','.\x20Please\x20create\x20this\x20file!','SIGNAL_RESULT','error','analysis.health.gaitSpeed','\x20AND\x20','exports','50305970WPvsaM','write','sendToPythonWrapper','substring','1821695SNEvDR','data','message','stringify','analysis.energy.rlPenalties','(((.+)+)+)+$','apply','2Tjitsd','threshold','startsWith','WARMUP_RESULT','321276qmtSuv','length','trim','handlePrediction','is_anomaly','1201386dvbJkb','analysis.prediction.nextRoom','payload','stderr'];a4_0x1880=function(){return _0x50d397;};return a4_0x1880();}function startService(_0x1ac726,_0x76b99a){const _0x1e7bf7=a4_0x353bfd;let _0x127cfe=_0x1e7bf7(0xbf);if(fs['existsSync'](_0x76b99a))_0x127cfe=_0x76b99a;const _0x55fa14=path[_0x1e7bf7(0x9f)](__dirname,'..',_0x1e7bf7(0xf3)),_0x43df74=path['join'](__dirname,'..',_0x1e7bf7(0xa5),'service.py');let _0x405453='';if(fs[_0x1e7bf7(0xf5)](_0x55fa14))_0x405453=_0x55fa14;else{if(fs['existsSync'](_0x43df74))_0x405453=_0x43df74;else{_0x1ac726[_0x1e7bf7(0xb1)]['error'](_0x1e7bf7(0x9e)+_0x55fa14+_0x1e7bf7(0xcf)+_0x43df74+_0x1e7bf7(0xcb));return;}}try{_0x1ac726[_0x1e7bf7(0xb1)]['info'](_0x1e7bf7(0x97)+_0x127cfe+'\x20'+_0x405453),pythonProcess=spawn(_0x127cfe,[_0x405453]),pythonProcess['stdout']['on'](_0x1e7bf7(0xd6),_0x55d799=>{const _0x1a3b13=_0x1e7bf7,_0x2beb36=_0x55d799[_0x1a3b13(0x8e)]()[_0x1a3b13(0x91)]('\x0a');_0x2beb36['forEach'](_0x565fe7=>{const _0x5cdd78=_0x1a3b13,_0x40a37c=_0x565fe7[_0x5cdd78(0xe2)]();if(!_0x40a37c)return;if(_0x40a37c[_0x5cdd78(0xde)](_0x5cdd78(0xec)))_0x1ac726[_0x5cdd78(0xb1)][_0x5cdd78(0xf0)]('[PYTHON]\x20'+_0x40a37c[_0x5cdd78(0xd4)](0x5)['trim']());else{if(_0x40a37c[_0x5cdd78(0xde)]('[RESULT]'))try{const _0x278716=JSON['parse'](_0x40a37c[_0x5cdd78(0xd4)](0x8)[_0x5cdd78(0xe2)]());handleResult(_0x1ac726,_0x278716);}catch(_0x47cfaf){}}});}),pythonProcess[_0x1e7bf7(0xe8)]['on']('data',_0x557a5d=>{const _0x88df6f=_0x1e7bf7;_0x1ac726[_0x88df6f(0xb1)][_0x88df6f(0xcd)]('[PYTHON\x20ERR]\x20'+_0x557a5d[_0x88df6f(0x8e)]()[_0x88df6f(0xe2)]());}),pythonProcess['on'](_0x1e7bf7(0xac),_0x4dcd42=>{const _0x4d92be=_0x1e7bf7;_0x1ac726['log'][_0x4d92be(0x9b)](_0x4d92be(0xbd)+_0x4dcd42),pythonProcess=null;}),_0x1ac726[_0x1e7bf7(0xd3)]=(_0x5f332d,_0x3c71ca)=>send(_0x1ac726,_0x5f332d,_0x3c71ca);}catch(_0x118ff9){_0x1ac726[_0x1e7bf7(0xb1)]['error'](_0x1e7bf7(0xf1)+_0x118ff9[_0x1e7bf7(0xd7)]);}}function stopService(_0x31a40f){const _0x26195d=a4_0x353bfd;if(pythonProcess){try{pythonProcess[_0x26195d(0x98)]();}catch(_0xadbe6f){}pythonProcess=null;}}function a4_0x4a52(_0x175673,_0x31bd38){const _0x1d30c4=a4_0x1880();return a4_0x4a52=function(_0x67686f,_0x2db61f){_0x67686f=_0x67686f-0x8d;let _0x18805b=_0x1d30c4[_0x67686f];return _0x18805b;},a4_0x4a52(_0x175673,_0x31bd38);}module[a4_0x353bfd(0xd0)]={'startService':startService,'stopService':stopService,'send':send};