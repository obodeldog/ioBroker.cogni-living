const a4_0xb233db=a4_0x4d63;(function(_0x7ed0dc,_0x3d4af2){const _0x193d3b=a4_0x4d63,_0x28a8cb=_0x7ed0dc();while(!![]){try{const _0xbe9289=-parseInt(_0x193d3b(0xf4))/0x1*(parseInt(_0x193d3b(0x13e))/0x2)+parseInt(_0x193d3b(0x12a))/0x3*(-parseInt(_0x193d3b(0x11a))/0x4)+-parseInt(_0x193d3b(0x146))/0x5+-parseInt(_0x193d3b(0x147))/0x6*(-parseInt(_0x193d3b(0x132))/0x7)+parseInt(_0x193d3b(0x10e))/0x8+-parseInt(_0x193d3b(0x107))/0x9+-parseInt(_0x193d3b(0x141))/0xa*(-parseInt(_0x193d3b(0x11e))/0xb);if(_0xbe9289===_0x3d4af2)break;else _0x28a8cb['push'](_0x28a8cb['shift']());}catch(_0x2ccdb2){_0x28a8cb['push'](_0x28a8cb['shift']());}}}(a4_0x81ca,0xb233d));function a4_0x4d63(_0x538fe4,_0x14c7a8){const _0xaa0266=a4_0x81ca();return a4_0x4d63=function(_0x263c81,_0x25bd5a){_0x263c81=_0x263c81-0xee;let _0x81ca4=_0xaa0266[_0x263c81];return _0x81ca4;},a4_0x4d63(_0x538fe4,_0x14c7a8);}function a4_0x81ca(){const _0x12892c=['log','SIGNAL_RESULT','length','service.py','4690056WCsyHD','analysis.alertReason','setStateAsync','toFixed','keys','sendToPythonWrapper','ENERGY_PREDICT_RESULT','ðŸ\x20Python\x20Pong','analysis.isAlert','stringify','./automation','kill','284tjgmFF','analysis.security.currentThreshold','âš ï¸\x20SECURITY\x20ALARM:\x20','SECURITY_RESULT','105743gQyYGj','payload','handlePrediction','Success:\x20','TRAINING_COMPLETE','message','HEALTH_TRAIN_RESULT','COMFORT_RESULT','is_anomaly','write','ENERGY_TRAIN_RESULT','analysis.health.gaitSpeed','39189HOciBx','[RESULT]','insulation','analysis.energy.pinnForecast','HEALTH_RESULT','PONG','GAIT_RESULT','analysis.prediction.confidence','178199xDSYOt','TRACKER_RESULT','reason','WARMUP_RESULT','\x0aGrund:\x20','VENTILATION_ALERT','analysis.security.lastScore','applyEnergySavings','python3','val','python_service','type','626dFulPu','analysis.energy.warmupTimes','success','2560Zpvfxf','toString','error','data','getState','1154550zWawNl','102HdhbkL','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','[PYTHON]\x20','analysis.energy.insulationScore','Unknown','analysis.security.lastCheck','analysis.energy.ventilationAlerts','âœ…\x20HEALTH\x20TRAINED.','4253NmPXom','apply','toISOString','analysis.energy.forecast','stdin','debug','split','Failed:\x20','analysis.energy.heatingScore','join','startsWith','parse','./setup','heating','trim','search','child_process','entries','ENERGY_OPTIMIZE_RESULT','2344185NfGQXb','sendNotification','(((.+)+)+)+$'];a4_0x81ca=function(){return _0x12892c;};return a4_0x81ca();}const a4_0x25bd5a=(function(){let _0x247d16=!![];return function(_0x21d061,_0x2d80bb){const _0x42ffea=_0x247d16?function(){const _0x51e1eb=a4_0x4d63;if(_0x2d80bb){const _0x1453d9=_0x2d80bb[_0x51e1eb(0xf5)](_0x21d061,arguments);return _0x2d80bb=null,_0x1453d9;}}:function(){};return _0x247d16=![],_0x42ffea;};}()),a4_0x263c81=a4_0x25bd5a(this,function(){const _0x29d36a=a4_0x4d63;return a4_0x263c81[_0x29d36a(0x142)]()[_0x29d36a(0x103)]('(((.+)+)+)+$')[_0x29d36a(0x142)]()['constructor'](a4_0x263c81)[_0x29d36a(0x103)](_0x29d36a(0x109));});a4_0x263c81();'use strict';const {spawn}=require(a4_0xb233db(0x104)),path=require('path'),fs=require('fs'),setup=require(a4_0xb233db(0x100)),automation=require(a4_0xb233db(0x118));let pythonProcess=null;function send(_0x7b65ad,_0x40590c,_0x249166={}){const _0x5a6c67=a4_0xb233db;if(!pythonProcess||!pythonProcess[_0x5a6c67(0xf8)]['writable'])return;const _0x3614bb=JSON['stringify']({'command':_0x40590c,..._0x249166});try{pythonProcess[_0x5a6c67(0xf8)][_0x5a6c67(0x127)](_0x3614bb+'\x0a');}catch(_0x391e61){}}function handleResult(_0x431ac7,_0x362372){const _0x206bec=a4_0xb233db;if(_0x362372[_0x206bec(0x13d)]===_0x206bec(0x12f))_0x431ac7[_0x206bec(0x10a)][_0x206bec(0xf9)](_0x206bec(0x115));else{if(_0x362372[_0x206bec(0x13d)]===_0x206bec(0x11d)){const {anomaly_score:_0x57360f,is_anomaly:_0x3b0c2b,threshold:_0x122448,explanation:_0x4b34ec}=_0x362372[_0x206bec(0x11f)];_0x431ac7[_0x206bec(0x110)](_0x206bec(0x138),{'val':_0x57360f,'ack':!![]}),_0x431ac7[_0x206bec(0x110)](_0x206bec(0xf1),{'val':new Date()[_0x206bec(0xf6)](),'ack':!![]});if(_0x122448)_0x431ac7[_0x206bec(0x110)](_0x206bec(0x11b),{'val':_0x122448,'ack':!![]});if(_0x3b0c2b){let _0x545e49=_0x206bec(0x148)+_0x57360f[_0x206bec(0x111)](0x4)+')';if(_0x4b34ec&&_0x4b34ec!==_0x206bec(0xf0))_0x545e49+=_0x206bec(0x136)+_0x4b34ec;_0x431ac7['setStateAsync'](_0x206bec(0x116),{'val':!![],'ack':!![]}),_0x431ac7['setStateAsync'](_0x206bec(0x10f),{'val':_0x545e49,'ack':!![]}),setup[_0x206bec(0x108)](_0x431ac7,_0x206bec(0x11c)+_0x545e49,![],!![]);}}else{if(_0x362372[_0x206bec(0x13d)]===_0x206bec(0x122)){const _0x578b98=_0x362372['payload']['details']||'',_0x29ceb2=_0x362372[_0x206bec(0x11f)]['threshold'],_0x5e3d48=_0x362372[_0x206bec(0x11f)]['success']?_0x206bec(0x121)+new Date()['toLocaleTimeString']()+'\x20('+_0x578b98+')':_0x206bec(0xfb)+_0x362372['payload'][_0x206bec(0x134)];_0x431ac7[_0x206bec(0x110)]('analysis.training.status',{'val':_0x5e3d48,'ack':!![]});if(_0x362372[_0x206bec(0x11f)]['success']&&_0x29ceb2)_0x431ac7['setStateAsync']('analysis.security.currentThreshold',{'val':_0x29ceb2,'ack':!![]});}else{if(_0x362372[_0x206bec(0x13d)]===_0x206bec(0x128)){if(_0x362372[_0x206bec(0x11f)][_0x206bec(0x140)])try{const _0x47fb9d=JSON[_0x206bec(0xff)](_0x362372[_0x206bec(0x11f)]['details']);if(_0x47fb9d[_0x206bec(0x12c)])_0x431ac7[_0x206bec(0x110)](_0x206bec(0xef),{'val':JSON[_0x206bec(0x117)](_0x47fb9d['insulation']),'ack':!![]});if(_0x47fb9d[_0x206bec(0x101)])_0x431ac7[_0x206bec(0x110)](_0x206bec(0xfc),{'val':JSON[_0x206bec(0x117)](_0x47fb9d[_0x206bec(0x101)]),'ack':!![]});}catch(_0x34e1bf){}}else{if(_0x362372[_0x206bec(0x13d)]===_0x206bec(0x124)){if(_0x362372['payload'][_0x206bec(0x140)])_0x431ac7[_0x206bec(0x10a)]['info'](_0x206bec(0xf3));}else{if(_0x362372[_0x206bec(0x13d)]===_0x206bec(0x12e))_0x431ac7[_0x206bec(0x110)]('analysis.health.lastCheck',{'val':new Date()[_0x206bec(0xf6)](),'ack':!![]}),_0x431ac7['setStateAsync']('analysis.health.isAnomaly',{'val':_0x362372[_0x206bec(0x11f)][_0x206bec(0x126)],'ack':!![]});else{if(_0x362372['type']===_0x206bec(0x130)){const {speed_trend:_0x47626d}=_0x362372['payload'];if(_0x47626d!==undefined)_0x431ac7[_0x206bec(0x110)](_0x206bec(0x129),{'val':_0x47626d,'ack':!![]});}else{if(_0x362372[_0x206bec(0x13d)]===_0x206bec(0x114)){const {forecast:_0xeb17a9}=_0x362372[_0x206bec(0x11f)];if(_0xeb17a9)_0x431ac7[_0x206bec(0x110)](_0x206bec(0xf7),{'val':JSON['stringify'](_0xeb17a9),'ack':!![]});}else{if(_0x362372[_0x206bec(0x13d)]===_0x206bec(0x135)){const {times:_0x1bbdd1}=_0x362372[_0x206bec(0x11f)];if(_0x1bbdd1)_0x431ac7[_0x206bec(0x110)](_0x206bec(0x13f),{'val':JSON['stringify'](_0x1bbdd1),'ack':!![]});}else{if(_0x362372[_0x206bec(0x13d)]==='PINN_PREDICT_RESULT'){const {forecast:_0x3b9748}=_0x362372[_0x206bec(0x11f)];if(_0x3b9748)_0x431ac7[_0x206bec(0x110)](_0x206bec(0x12d),{'val':JSON[_0x206bec(0x117)](_0x3b9748),'ack':!![]});}else{if(_0x362372[_0x206bec(0x13d)]===_0x206bec(0x137)){const {alerts:_0xc0a953}=_0x362372['payload'];if(_0xc0a953)_0x431ac7[_0x206bec(0x110)](_0x206bec(0xf2),{'val':JSON[_0x206bec(0x117)](_0xc0a953),'ack':!![]});}else{if(_0x362372[_0x206bec(0x13d)]===_0x206bec(0x106)){const {proposals:_0x1e2c32}=_0x362372['payload'];_0x431ac7[_0x206bec(0x145)]('analysis.energy.mpcActive',(_0x940276,_0x2865d2)=>{const _0x452e7=_0x206bec;_0x2865d2&&_0x2865d2[_0x452e7(0x13b)]===!![]&&_0x1e2c32&&_0x1e2c32[_0x452e7(0x10c)]>0x0&&automation[_0x452e7(0x139)](_0x431ac7,_0x1e2c32);});}else{if(_0x362372[_0x206bec(0x13d)]===_0x206bec(0x10b)){const {room:_0x3f54d2,propagation:_0x4b845c}=_0x362372['payload'];let _0x41613e=_0x206bec(0xf0),_0xc8227b=0x0;if(_0x4b845c){const _0x4a635e=Object[_0x206bec(0x105)](_0x4b845c);_0x4a635e[_0x206bec(0x10c)]>0x0&&(_0x41613e=_0x4a635e[0x0][0x0],_0xc8227b=_0x4a635e[0x0][0x1]);}_0x431ac7[_0x206bec(0x110)]('analysis.prediction.nextRoom',{'val':_0x41613e,'ack':!![]}),_0x431ac7[_0x206bec(0x110)](_0x206bec(0x131),{'val':_0xc8227b,'ack':!![]}),automation[_0x206bec(0x120)](_0x431ac7,_0x41613e,_0xc8227b);}else{if(_0x362372['type']===_0x206bec(0x133)){const {probabilities:_0xd1da89}=_0x362372[_0x206bec(0x11f)];if(_0xd1da89){_0x431ac7[_0x206bec(0x110)]('analysis.prediction.trackerState',{'val':JSON[_0x206bec(0x117)](_0xd1da89),'ack':!![]});const _0x446326=Object[_0x206bec(0x112)](_0xd1da89);if(_0x446326['length']>0x0){const _0x684dd4=_0x446326[0x0],_0x4ed6ac=_0xd1da89[_0x684dd4];_0x431ac7[_0x206bec(0x110)]('analysis.prediction.trackerTopRoom',{'val':_0x684dd4,'ack':!![]}),_0x431ac7[_0x206bec(0x110)]('analysis.prediction.trackerConfidence',{'val':_0x4ed6ac,'ack':!![]});}}}else{if(_0x362372[_0x206bec(0x13d)]===_0x206bec(0x125)){const {patterns:_0x4e9b2a}=_0x362372[_0x206bec(0x11f)];if(_0x4e9b2a&&_0x4e9b2a[_0x206bec(0x10c)]>0x0)_0x431ac7[_0x206bec(0x110)]('analysis.automation.detectedPatterns',{'val':JSON[_0x206bec(0x117)](_0x4e9b2a),'ack':!![]});}}}}}}}}}}}}}}}}function startService(_0x1bcc2b,_0x4a8386){const _0x3095a4=a4_0xb233db;let _0x517327=_0x3095a4(0x13a);if(fs['existsSync'](_0x4a8386))_0x517327=_0x4a8386;try{const _0x5c8677=path[_0x3095a4(0xfd)](__dirname,'..',_0x3095a4(0x13c),_0x3095a4(0x10d));pythonProcess=spawn(_0x517327,[_0x5c8677]),pythonProcess['stdout']['on'](_0x3095a4(0x144),_0x4ab8a9=>{const _0x56374b=_0x3095a4,_0xf7c051=_0x4ab8a9['toString']()[_0x56374b(0xfa)]('\x0a');_0xf7c051['forEach'](_0x13e131=>{const _0x298827=_0x56374b,_0x199c90=_0x13e131[_0x298827(0x102)]();if(!_0x199c90)return;if(_0x199c90[_0x298827(0xfe)]('[LOG]'))_0x1bcc2b[_0x298827(0x10a)][_0x298827(0xf9)](_0x298827(0xee)+_0x199c90['substring'](0x5)['trim']());else{if(_0x199c90[_0x298827(0xfe)](_0x298827(0x12b)))try{const _0x34e288=JSON[_0x298827(0xff)](_0x199c90['substring'](0x8)[_0x298827(0x102)]());handleResult(_0x1bcc2b,_0x34e288);}catch(_0x57b4a0){}}});}),pythonProcess['on']('close',_0x233bf7=>{pythonProcess=null;}),_0x1bcc2b[_0x3095a4(0x113)]=(_0x482853,_0x55118d)=>send(_0x1bcc2b,_0x482853,_0x55118d);}catch(_0xf2d385){_0x1bcc2b[_0x3095a4(0x10a)][_0x3095a4(0x143)]('Error\x20launching\x20Python:\x20'+_0xf2d385[_0x3095a4(0x123)]);}}function stopService(_0x585692){const _0x2f1904=a4_0xb233db;if(pythonProcess){try{pythonProcess[_0x2f1904(0x119)]();}catch(_0x30b048){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};