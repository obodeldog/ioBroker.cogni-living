const a4_0x4dd382=a4_0x35cc;function a4_0x35cc(_0x3eda1e,_0x4ad2b2){const _0x41c9bb=a4_0xb346();return a4_0x35cc=function(_0xb1f295,_0x314b89){_0xb1f295=_0xb1f295-0x154;let _0xb346b3=_0x41c9bb[_0xb1f295];return _0xb346b3;},a4_0x35cc(_0x3eda1e,_0x4ad2b2);}(function(_0x50131e,_0xfc322){const _0x2dc095=a4_0x35cc,_0x2ff8fb=_0x50131e();while(!![]){try{const _0x45e5cd=-parseInt(_0x2dc095(0x16a))/0x1*(parseInt(_0x2dc095(0x183))/0x2)+parseInt(_0x2dc095(0x19a))/0x3*(-parseInt(_0x2dc095(0x194))/0x4)+-parseInt(_0x2dc095(0x17f))/0x5+parseInt(_0x2dc095(0x178))/0x6*(-parseInt(_0x2dc095(0x167))/0x7)+-parseInt(_0x2dc095(0x174))/0x8+-parseInt(_0x2dc095(0x181))/0x9+parseInt(_0x2dc095(0x15d))/0xa;if(_0x45e5cd===_0xfc322)break;else _0x2ff8fb['push'](_0x2ff8fb['shift']());}catch(_0x5377ce){_0x2ff8fb['push'](_0x2ff8fb['shift']());}}}(a4_0xb346,0x81f0f));const a4_0x314b89=(function(){let _0x520753=!![];return function(_0xe15004,_0x330f82){const _0x48cee9=_0x520753?function(){const _0x50766b=a4_0x35cc;if(_0x330f82){const _0x21bd1c=_0x330f82[_0x50766b(0x1ab)](_0xe15004,arguments);return _0x330f82=null,_0x21bd1c;}}:function(){};return _0x520753=![],_0x48cee9;};}()),a4_0xb1f295=a4_0x314b89(this,function(){const _0x4f76d7=a4_0x35cc;return a4_0xb1f295[_0x4f76d7(0x15a)]()[_0x4f76d7(0x17d)]('(((.+)+)+)+$')[_0x4f76d7(0x15a)]()[_0x4f76d7(0x162)](a4_0xb1f295)[_0x4f76d7(0x17d)](_0x4f76d7(0x19e));});a4_0xb1f295();'use strict';const {spawn}=require('child_process'),path=require(a4_0x4dd382(0x18a)),fs=require('fs'),setup=require(a4_0x4dd382(0x170)),automation=require('./automation');function a4_0xb346(){const _0x32a1a6=['4962DhTOsF','toLocaleTimeString','reason','sendToPythonWrapper','debug','search','toISOString','142605HFYWxK','analysis.security.lastCheck','5973273YzuJYM','kill','537748UqffWM','analysis.health.isAnomaly','stringify','ENERGY_PREDICT_RESULT','analysis.energy.mpcActive','log','âœ…\x20HEALTH\x20TRAINED.','path','writable','analysis.security.lastScore','stdout','message','error','analysis.prediction.confidence','entries','trim','[RESULT]','1092156ZVACNO','ENERGY_OPTIMIZE_RESULT','sendNotification','TRAINING_COMPLETE','success','exports','3dYvrIZ','analysis.automation.detectedPatterns','analysis.alertReason','ðŸ\x20Python\x20Pong','(((.+)+)+)+$','setStateAsync','startsWith','service.py','join','\x0aGrund:\x20','length','analysis.energy.forecast','SECURITY_RESULT','COMFORT_RESULT','payload','getState','type','apply','analysis.energy.insulationScore','parse','is_anomaly','ENERGY_TRAIN_RESULT','Failed:\x20','threshold','HEALTH_TRAIN_RESULT','toString','analysis.training.status','GAIT_RESULT','30313180AEHEiN','split','analysis.health.gaitSpeed','analysis.health.lastCheck','Unknown','constructor','stdin','close','applyEnergySavings','python3','6076KNdbjS','insulation','analysis.security.currentThreshold','1CKwaPx','analysis.energy.pinnForecast','HEALTH_RESULT','python_service','heating','data','./setup','analysis.energy.heatingScore','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','PONG','4376896BopRLS','[LOG]','info','analysis.prediction.nextRoom'];a4_0xb346=function(){return _0x32a1a6;};return a4_0xb346();}let pythonProcess=null;function send(_0x4abd22,_0x4cda2b,_0xe558d5={}){const _0x3fe888=a4_0x4dd382;if(!pythonProcess||!pythonProcess[_0x3fe888(0x163)][_0x3fe888(0x18b)])return;const _0x393e9a=JSON[_0x3fe888(0x185)]({'command':_0x4cda2b,..._0xe558d5});try{pythonProcess[_0x3fe888(0x163)]['write'](_0x393e9a+'\x0a');}catch(_0xdbc943){}}function handleResult(_0x15ef05,_0x3feef0){const _0x194854=a4_0x4dd382;if(_0x3feef0[_0x194854(0x1aa)]===_0x194854(0x173))_0x15ef05['log'][_0x194854(0x17c)](_0x194854(0x19d));else{if(_0x3feef0['type']===_0x194854(0x1a6)){const {anomaly_score:_0xe7da44,is_anomaly:_0x4aeb97,threshold:_0x2e3392,explanation:_0x2c83de}=_0x3feef0[_0x194854(0x1a8)];_0x15ef05['setStateAsync'](_0x194854(0x18c),{'val':_0xe7da44,'ack':!![]}),_0x15ef05[_0x194854(0x19f)](_0x194854(0x180),{'val':new Date()[_0x194854(0x17e)](),'ack':!![]});if(_0x2e3392)_0x15ef05[_0x194854(0x19f)](_0x194854(0x169),{'val':_0x2e3392,'ack':!![]});if(_0x4aeb97){let _0x363e86=_0x194854(0x172)+_0xe7da44['toFixed'](0x4)+')';if(_0x2c83de&&_0x2c83de!==_0x194854(0x161))_0x363e86+=_0x194854(0x1a3)+_0x2c83de;_0x15ef05[_0x194854(0x19f)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x15ef05['setStateAsync'](_0x194854(0x19c),{'val':_0x363e86,'ack':!![]}),setup[_0x194854(0x196)](_0x15ef05,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x363e86,![],!![]);}}else{if(_0x3feef0[_0x194854(0x1aa)]===_0x194854(0x197)){const _0x3abce1=_0x3feef0[_0x194854(0x1a8)]['details']||'',_0x6c0070=_0x3feef0[_0x194854(0x1a8)][_0x194854(0x158)],_0x10def2=_0x3feef0[_0x194854(0x1a8)]['success']?'Success:\x20'+new Date()[_0x194854(0x179)]()+'\x20('+_0x3abce1+')':_0x194854(0x157)+_0x3feef0[_0x194854(0x1a8)][_0x194854(0x17a)];_0x15ef05[_0x194854(0x19f)](_0x194854(0x15b),{'val':_0x10def2,'ack':!![]});if(_0x3feef0[_0x194854(0x1a8)][_0x194854(0x198)]&&_0x6c0070)_0x15ef05[_0x194854(0x19f)](_0x194854(0x169),{'val':_0x6c0070,'ack':!![]});}else{if(_0x3feef0['type']===_0x194854(0x156)){if(_0x3feef0[_0x194854(0x1a8)][_0x194854(0x198)])try{const _0x516712=JSON[_0x194854(0x154)](_0x3feef0[_0x194854(0x1a8)]['details']);if(_0x516712[_0x194854(0x168)])_0x15ef05[_0x194854(0x19f)](_0x194854(0x1ac),{'val':JSON['stringify'](_0x516712[_0x194854(0x168)]),'ack':!![]});if(_0x516712[_0x194854(0x16e)])_0x15ef05['setStateAsync'](_0x194854(0x171),{'val':JSON['stringify'](_0x516712[_0x194854(0x16e)]),'ack':!![]});}catch(_0x36887b){}}else{if(_0x3feef0[_0x194854(0x1aa)]===_0x194854(0x159)){if(_0x3feef0[_0x194854(0x1a8)][_0x194854(0x198)])_0x15ef05[_0x194854(0x188)][_0x194854(0x176)](_0x194854(0x189));}else{if(_0x3feef0['type']===_0x194854(0x16c))_0x15ef05[_0x194854(0x19f)](_0x194854(0x160),{'val':new Date()[_0x194854(0x17e)](),'ack':!![]}),_0x15ef05['setStateAsync'](_0x194854(0x184),{'val':_0x3feef0[_0x194854(0x1a8)][_0x194854(0x155)],'ack':!![]});else{if(_0x3feef0['type']===_0x194854(0x15c)){const {speed_trend:_0x14811b}=_0x3feef0[_0x194854(0x1a8)];if(_0x14811b!==undefined)_0x15ef05[_0x194854(0x19f)](_0x194854(0x15f),{'val':_0x14811b,'ack':!![]});}else{if(_0x3feef0[_0x194854(0x1aa)]===_0x194854(0x186)){const {forecast:_0x120666}=_0x3feef0['payload'];if(_0x120666)_0x15ef05[_0x194854(0x19f)](_0x194854(0x1a5),{'val':JSON['stringify'](_0x120666),'ack':!![]});}else{if(_0x3feef0[_0x194854(0x1aa)]==='PINN_PREDICT_RESULT'){const {forecast:_0x44df98}=_0x3feef0[_0x194854(0x1a8)];if(_0x44df98)_0x15ef05[_0x194854(0x19f)](_0x194854(0x16b),{'val':JSON[_0x194854(0x185)](_0x44df98),'ack':!![]});}else{if(_0x3feef0[_0x194854(0x1aa)]===_0x194854(0x195)){const {proposals:_0x318db7}=_0x3feef0[_0x194854(0x1a8)];_0x15ef05[_0x194854(0x1a9)](_0x194854(0x187),(_0x193b14,_0x1da5ff)=>{const _0x3011b6=_0x194854;_0x1da5ff&&_0x1da5ff['val']===!![]&&_0x318db7&&_0x318db7[_0x3011b6(0x1a4)]>0x0&&automation[_0x3011b6(0x165)](_0x15ef05,_0x318db7);});}else{if(_0x3feef0['type']==='SIGNAL_RESULT'){const {room:_0x57475f,propagation:_0x23394f}=_0x3feef0[_0x194854(0x1a8)];let _0x15018b='Unknown',_0xbf5e1=0x0;if(_0x23394f){const _0x5ab7af=Object[_0x194854(0x191)](_0x23394f);_0x5ab7af['length']>0x0&&(_0x15018b=_0x5ab7af[0x0][0x0],_0xbf5e1=_0x5ab7af[0x0][0x1]);}_0x15ef05['setStateAsync'](_0x194854(0x177),{'val':_0x15018b,'ack':!![]}),_0x15ef05['setStateAsync'](_0x194854(0x190),{'val':_0xbf5e1,'ack':!![]}),automation['handlePrediction'](_0x15ef05,_0x15018b,_0xbf5e1);}else{if(_0x3feef0[_0x194854(0x1aa)]===_0x194854(0x1a7)){const {patterns:_0x31b098}=_0x3feef0[_0x194854(0x1a8)];if(_0x31b098&&_0x31b098[_0x194854(0x1a4)]>0x0)_0x15ef05[_0x194854(0x19f)](_0x194854(0x19b),{'val':JSON[_0x194854(0x185)](_0x31b098),'ack':!![]});}}}}}}}}}}}}}function startService(_0x1079b0,_0x2b53c4){const _0x1ae37a=a4_0x4dd382;let _0x57232a=_0x1ae37a(0x166);if(fs['existsSync'](_0x2b53c4))_0x57232a=_0x2b53c4;try{const _0x4932f6=path[_0x1ae37a(0x1a2)](__dirname,'..',_0x1ae37a(0x16d),_0x1ae37a(0x1a1));pythonProcess=spawn(_0x57232a,[_0x4932f6]),pythonProcess[_0x1ae37a(0x18d)]['on'](_0x1ae37a(0x16f),_0x5d83d3=>{const _0x731dae=_0x1ae37a,_0x416807=_0x5d83d3['toString']()[_0x731dae(0x15e)]('\x0a');_0x416807['forEach'](_0x55951c=>{const _0x4000e6=_0x731dae,_0x85c65d=_0x55951c[_0x4000e6(0x192)]();if(!_0x85c65d)return;if(_0x85c65d[_0x4000e6(0x1a0)](_0x4000e6(0x175)))_0x1079b0['log'][_0x4000e6(0x17c)]('[PYTHON]\x20'+_0x85c65d['substring'](0x5)[_0x4000e6(0x192)]());else{if(_0x85c65d['startsWith'](_0x4000e6(0x193)))try{const _0x44c832=JSON[_0x4000e6(0x154)](_0x85c65d['substring'](0x8)[_0x4000e6(0x192)]());handleResult(_0x1079b0,_0x44c832);}catch(_0x38b2ee){}}});}),pythonProcess['on'](_0x1ae37a(0x164),_0x1db6fd=>{pythonProcess=null;}),_0x1079b0[_0x1ae37a(0x17b)]=(_0x510a5b,_0x50bf53)=>send(_0x1079b0,_0x510a5b,_0x50bf53);}catch(_0x54114e){_0x1079b0[_0x1ae37a(0x188)][_0x1ae37a(0x18f)]('Error\x20launching\x20Python:\x20'+_0x54114e[_0x1ae37a(0x18e)]);}}function stopService(_0x251861){const _0x6a67dd=a4_0x4dd382;if(pythonProcess){try{pythonProcess[_0x6a67dd(0x182)]();}catch(_0x1f07f5){}pythonProcess=null;}}module[a4_0x4dd382(0x199)]={'startService':startService,'stopService':stopService,'send':send};