const a4_0xeb2f51=a4_0x1875;(function(_0x155c9d,_0x18ab53){const _0x4efa17=a4_0x1875,_0x15fc66=_0x155c9d();while(!![]){try{const _0x409364=parseInt(_0x4efa17(0x165))/0x1+parseInt(_0x4efa17(0x150))/0x2*(-parseInt(_0x4efa17(0x151))/0x3)+-parseInt(_0x4efa17(0x152))/0x4*(-parseInt(_0x4efa17(0x18d))/0x5)+-parseInt(_0x4efa17(0x192))/0x6*(parseInt(_0x4efa17(0x141))/0x7)+parseInt(_0x4efa17(0x180))/0x8*(-parseInt(_0x4efa17(0x153))/0x9)+-parseInt(_0x4efa17(0x159))/0xa*(-parseInt(_0x4efa17(0x13d))/0xb)+parseInt(_0x4efa17(0x145))/0xc*(-parseInt(_0x4efa17(0x178))/0xd);if(_0x409364===_0x18ab53)break;else _0x15fc66['push'](_0x15fc66['shift']());}catch(_0x47ca78){_0x15fc66['push'](_0x15fc66['shift']());}}}(a4_0xdf3b,0xb1cef));const a4_0x4084c7=(function(){let _0x1a4835=!![];return function(_0x3b767f,_0x32251f){const _0x46fa05=_0x1a4835?function(){const _0x228fb9=a4_0x1875;if(_0x32251f){const _0x19d4bf=_0x32251f[_0x228fb9(0x15b)](_0x3b767f,arguments);return _0x32251f=null,_0x19d4bf;}}:function(){};return _0x1a4835=![],_0x46fa05;};}()),a4_0xe0f0ae=a4_0x4084c7(this,function(){const _0x160dbd=a4_0x1875;return a4_0xe0f0ae[_0x160dbd(0x146)]()[_0x160dbd(0x18c)]('(((.+)+)+)+$')[_0x160dbd(0x146)]()[_0x160dbd(0x164)](a4_0xe0f0ae)[_0x160dbd(0x18c)]('(((.+)+)+)+$');});function a4_0xdf3b(){const _0x5d30c4=['analysis.energy.mpcActive','Failed:\x20','applyEnergySavings','TRAINING_COMPLETE','analysis.prediction.nextRoom','message','VENTILATION_ALERT','sendToPythonWrapper','write','split','analysis.automation.detectedPatterns','analysis.energy.heatingScore','python_service','error','python3','721071dVYoQw','length','payload','analysis.health.isAnomaly','is_anomaly','analysis.energy.insulationScore','data','details','3205672BEoMAQ','âš ï¸\x20SECURITY\x20ALARM:\x20','stringify','analysis.security.lastScore','success','analysis.energy.warmupTimes','threshold','HEALTH_TRAIN_RESULT','PONG','forEach','stdin','ENERGY_TRAIN_RESULT','search','4155vMTrBu','ðŸ\x20Python\x20Pong','reason','analysis.alertReason','insulation','204SEpQLu','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','heating','SIGNAL_RESULT','analysis.energy.warmupDetails','child_process','type','sendNotification','service.py','setStateAsync','HEALTH_RESULT','Success:\x20','toISOString','exports','analysis.training.status','substring','analysis.security.currentThreshold','715YDGiej','analysis.health.gaitSpeed','analysis.prediction.trackerState','COMFORT_RESULT','229173LPjlJH','startsWith','analysis.prediction.trackerConfidence','Unknown','48fUOTdK','toString','handlePrediction','TRACKER_RESULT','ENERGY_OPTIMIZE_RESULT','trim','entries','parse','stdout','ENERGY_PREDICT_RESULT','[PYTHON]\x20','25808rpupwY','24kndZBo','488xtTntC','9cTYVrs','Error\x20launching\x20Python:\x20','analysis.prediction.confidence','\x0aGrund:\x20','[RESULT]','WARMUP_RESULT','168710snNMxd','analysis.energy.warmupSources','apply','./automation','join','log','[LOG]','analysis.energy.forecast','info','analysis.security.lastCheck','getState','constructor','1369241gZQVZG','PINN_PREDICT_RESULT','writable','analysis.health.lastCheck'];a4_0xdf3b=function(){return _0x5d30c4;};return a4_0xdf3b();}a4_0xe0f0ae();'use strict';const {spawn}=require(a4_0xeb2f51(0x197)),path=require('path'),fs=require('fs'),setup=require('./setup'),automation=require(a4_0xeb2f51(0x15c));let pythonProcess=null;function send(_0xa1c8b4,_0x5e50f8,_0x1a5b98={}){const _0x58c2c6=a4_0xeb2f51;if(!pythonProcess||!pythonProcess[_0x58c2c6(0x18a)][_0x58c2c6(0x167)])return;const _0x5e4890=JSON['stringify']({'command':_0x5e50f8,..._0x1a5b98});try{pythonProcess[_0x58c2c6(0x18a)][_0x58c2c6(0x171)](_0x5e4890+'\x0a');}catch(_0x1bae6f){}}function handleResult(_0x509f0a,_0x464fda){const _0x1fdeb2=a4_0xeb2f51;if(_0x464fda['type']===_0x1fdeb2(0x188))_0x509f0a[_0x1fdeb2(0x15e)]['debug'](_0x1fdeb2(0x18e));else{if(_0x464fda[_0x1fdeb2(0x198)]==='SECURITY_RESULT'){const {anomaly_score:_0x1ef45b,is_anomaly:_0x2a2020,threshold:_0x23d17e,explanation:_0x211b4a}=_0x464fda[_0x1fdeb2(0x17a)];_0x509f0a[_0x1fdeb2(0x19b)](_0x1fdeb2(0x183),{'val':_0x1ef45b,'ack':!![]}),_0x509f0a[_0x1fdeb2(0x19b)](_0x1fdeb2(0x162),{'val':new Date()[_0x1fdeb2(0x138)](),'ack':!![]});if(_0x23d17e)_0x509f0a[_0x1fdeb2(0x19b)]('analysis.security.currentThreshold',{'val':_0x23d17e,'ack':!![]});if(_0x2a2020){let _0x5c4625=_0x1fdeb2(0x193)+_0x1ef45b['toFixed'](0x4)+')';if(_0x211b4a&&_0x211b4a!==_0x1fdeb2(0x144))_0x5c4625+=_0x1fdeb2(0x156)+_0x211b4a;_0x509f0a[_0x1fdeb2(0x19b)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x509f0a[_0x1fdeb2(0x19b)](_0x1fdeb2(0x190),{'val':_0x5c4625,'ack':!![]}),setup[_0x1fdeb2(0x199)](_0x509f0a,_0x1fdeb2(0x181)+_0x5c4625,![],!![]);}}else{if(_0x464fda['type']===_0x1fdeb2(0x16c)){const _0x4cbd0d=_0x464fda[_0x1fdeb2(0x17a)][_0x1fdeb2(0x17f)]||'',_0xc47a40=_0x464fda[_0x1fdeb2(0x17a)][_0x1fdeb2(0x186)],_0x41f53f=_0x464fda[_0x1fdeb2(0x17a)][_0x1fdeb2(0x184)]?_0x1fdeb2(0x137)+new Date()['toLocaleTimeString']()+'\x20('+_0x4cbd0d+')':_0x1fdeb2(0x16a)+_0x464fda[_0x1fdeb2(0x17a)][_0x1fdeb2(0x18f)];_0x509f0a[_0x1fdeb2(0x19b)](_0x1fdeb2(0x13a),{'val':_0x41f53f,'ack':!![]});if(_0x464fda[_0x1fdeb2(0x17a)][_0x1fdeb2(0x184)]&&_0xc47a40)_0x509f0a['setStateAsync'](_0x1fdeb2(0x13c),{'val':_0xc47a40,'ack':!![]});}else{if(_0x464fda['type']===_0x1fdeb2(0x18b)){if(_0x464fda['payload'][_0x1fdeb2(0x184)])try{const _0x288ab7=JSON[_0x1fdeb2(0x14c)](_0x464fda[_0x1fdeb2(0x17a)]['details']);if(_0x288ab7[_0x1fdeb2(0x191)])_0x509f0a[_0x1fdeb2(0x19b)](_0x1fdeb2(0x17d),{'val':JSON[_0x1fdeb2(0x182)](_0x288ab7[_0x1fdeb2(0x191)]),'ack':!![]});if(_0x288ab7['heating'])_0x509f0a[_0x1fdeb2(0x19b)](_0x1fdeb2(0x174),{'val':JSON['stringify'](_0x288ab7[_0x1fdeb2(0x194)]),'ack':!![]});}catch(_0x53fefe){}}else{if(_0x464fda[_0x1fdeb2(0x198)]===_0x1fdeb2(0x187)){if(_0x464fda[_0x1fdeb2(0x17a)]['success'])_0x509f0a[_0x1fdeb2(0x15e)][_0x1fdeb2(0x161)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x464fda['type']===_0x1fdeb2(0x136))_0x509f0a[_0x1fdeb2(0x19b)](_0x1fdeb2(0x168),{'val':new Date()['toISOString'](),'ack':!![]}),_0x509f0a[_0x1fdeb2(0x19b)](_0x1fdeb2(0x17b),{'val':_0x464fda[_0x1fdeb2(0x17a)][_0x1fdeb2(0x17c)],'ack':!![]});else{if(_0x464fda[_0x1fdeb2(0x198)]==='GAIT_RESULT'){const {speed_trend:_0x4d8019}=_0x464fda[_0x1fdeb2(0x17a)];if(_0x4d8019!==undefined)_0x509f0a[_0x1fdeb2(0x19b)](_0x1fdeb2(0x13e),{'val':_0x4d8019,'ack':!![]});}else{if(_0x464fda[_0x1fdeb2(0x198)]===_0x1fdeb2(0x14e)){const {forecast:_0x29ff9b}=_0x464fda[_0x1fdeb2(0x17a)];if(_0x29ff9b)_0x509f0a[_0x1fdeb2(0x19b)](_0x1fdeb2(0x160),{'val':JSON[_0x1fdeb2(0x182)](_0x29ff9b),'ack':!![]});}else{if(_0x464fda[_0x1fdeb2(0x198)]===_0x1fdeb2(0x158)){const {times:_0x54e276,sources:_0x51772f,details:_0x1f4fb7}=_0x464fda[_0x1fdeb2(0x17a)];if(_0x54e276)_0x509f0a[_0x1fdeb2(0x19b)](_0x1fdeb2(0x185),{'val':JSON[_0x1fdeb2(0x182)](_0x54e276),'ack':!![]});if(_0x51772f)_0x509f0a['setStateAsync'](_0x1fdeb2(0x15a),{'val':JSON[_0x1fdeb2(0x182)](_0x51772f),'ack':!![]});if(_0x1f4fb7)_0x509f0a[_0x1fdeb2(0x19b)](_0x1fdeb2(0x196),{'val':JSON[_0x1fdeb2(0x182)](_0x1f4fb7),'ack':!![]});}else{if(_0x464fda[_0x1fdeb2(0x198)]==='RL_PENALTY_UPDATE'){const {penalties:_0x5ae52e}=_0x464fda[_0x1fdeb2(0x17a)];if(_0x5ae52e)_0x509f0a['setStateAsync']('analysis.energy.rlPenalties',{'val':JSON[_0x1fdeb2(0x182)](_0x5ae52e),'ack':!![]});}else{if(_0x464fda[_0x1fdeb2(0x198)]===_0x1fdeb2(0x166)){const {forecast:_0x8b5d2b}=_0x464fda[_0x1fdeb2(0x17a)];if(_0x8b5d2b)_0x509f0a['setStateAsync']('analysis.energy.pinnForecast',{'val':JSON[_0x1fdeb2(0x182)](_0x8b5d2b),'ack':!![]});}else{if(_0x464fda['type']===_0x1fdeb2(0x16f)){const {alerts:_0x3ba9ea}=_0x464fda[_0x1fdeb2(0x17a)];if(_0x3ba9ea)_0x509f0a[_0x1fdeb2(0x19b)]('analysis.energy.ventilationAlerts',{'val':JSON['stringify'](_0x3ba9ea),'ack':!![]});}else{if(_0x464fda['type']===_0x1fdeb2(0x149)){const {proposals:_0xf99281}=_0x464fda[_0x1fdeb2(0x17a)];_0x509f0a[_0x1fdeb2(0x163)](_0x1fdeb2(0x169),(_0x3cc114,_0x2ab2c8)=>{const _0x906567=_0x1fdeb2;_0x2ab2c8&&_0x2ab2c8['val']===!![]&&_0xf99281&&_0xf99281[_0x906567(0x179)]>0x0&&automation[_0x906567(0x16b)](_0x509f0a,_0xf99281);});}else{if(_0x464fda['type']===_0x1fdeb2(0x195)){const {room:_0x29f1d6,propagation:_0xa7c0d}=_0x464fda[_0x1fdeb2(0x17a)];let _0x152135='Unknown',_0x439632=0x0;if(_0xa7c0d){const _0x2c406e=Object[_0x1fdeb2(0x14b)](_0xa7c0d);_0x2c406e[_0x1fdeb2(0x179)]>0x0&&(_0x152135=_0x2c406e[0x0][0x0],_0x439632=_0x2c406e[0x0][0x1]);}_0x509f0a[_0x1fdeb2(0x19b)](_0x1fdeb2(0x16d),{'val':_0x152135,'ack':!![]}),_0x509f0a[_0x1fdeb2(0x19b)](_0x1fdeb2(0x155),{'val':_0x439632,'ack':!![]}),automation[_0x1fdeb2(0x147)](_0x509f0a,_0x152135,_0x439632);}else{if(_0x464fda['type']===_0x1fdeb2(0x148)){const {probabilities:_0x210f6c}=_0x464fda['payload'];if(_0x210f6c){_0x509f0a['setStateAsync'](_0x1fdeb2(0x13f),{'val':JSON[_0x1fdeb2(0x182)](_0x210f6c),'ack':!![]});const _0x5a24db=Object['keys'](_0x210f6c);if(_0x5a24db[_0x1fdeb2(0x179)]>0x0){const _0x2cd89e=_0x5a24db[0x0],_0x844a04=_0x210f6c[_0x2cd89e];_0x509f0a[_0x1fdeb2(0x19b)]('analysis.prediction.trackerTopRoom',{'val':_0x2cd89e,'ack':!![]}),_0x509f0a[_0x1fdeb2(0x19b)](_0x1fdeb2(0x143),{'val':_0x844a04,'ack':!![]});}}}else{if(_0x464fda[_0x1fdeb2(0x198)]===_0x1fdeb2(0x140)){const {patterns:_0x3a947f}=_0x464fda[_0x1fdeb2(0x17a)];if(_0x3a947f&&_0x3a947f[_0x1fdeb2(0x179)]>0x0)_0x509f0a[_0x1fdeb2(0x19b)](_0x1fdeb2(0x173),{'val':JSON['stringify'](_0x3a947f),'ack':!![]});}}}}}}}}}}}}}}}}}function startService(_0x25be23,_0xb5a211){const _0x3580f2=a4_0xeb2f51;let _0x17f326=_0x3580f2(0x177);if(fs['existsSync'](_0xb5a211))_0x17f326=_0xb5a211;try{const _0x4a3005=path[_0x3580f2(0x15d)](__dirname,'..',_0x3580f2(0x175),_0x3580f2(0x19a));pythonProcess=spawn(_0x17f326,[_0x4a3005]),pythonProcess[_0x3580f2(0x14d)]['on'](_0x3580f2(0x17e),_0x4c5747=>{const _0x4f48b6=_0x3580f2,_0x516c87=_0x4c5747['toString']()[_0x4f48b6(0x172)]('\x0a');_0x516c87[_0x4f48b6(0x189)](_0x206fd8=>{const _0x503406=_0x4f48b6,_0x1b7d2f=_0x206fd8['trim']();if(!_0x1b7d2f)return;if(_0x1b7d2f[_0x503406(0x142)](_0x503406(0x15f)))_0x25be23[_0x503406(0x15e)]['debug'](_0x503406(0x14f)+_0x1b7d2f[_0x503406(0x13b)](0x5)[_0x503406(0x14a)]());else{if(_0x1b7d2f[_0x503406(0x142)](_0x503406(0x157)))try{const _0x5e0ed1=JSON['parse'](_0x1b7d2f[_0x503406(0x13b)](0x8)[_0x503406(0x14a)]());handleResult(_0x25be23,_0x5e0ed1);}catch(_0x3891da){}}});}),pythonProcess['on']('close',_0x5736f2=>{pythonProcess=null;}),_0x25be23[_0x3580f2(0x170)]=(_0x52e6ea,_0x42deeb)=>send(_0x25be23,_0x52e6ea,_0x42deeb);}catch(_0x40f220){_0x25be23[_0x3580f2(0x15e)][_0x3580f2(0x176)](_0x3580f2(0x154)+_0x40f220[_0x3580f2(0x16e)]);}}function a4_0x1875(_0x3bf543,_0x47eade){const _0x2e3146=a4_0xdf3b();return a4_0x1875=function(_0xe0f0ae,_0x4084c7){_0xe0f0ae=_0xe0f0ae-0x136;let _0xdf3bac=_0x2e3146[_0xe0f0ae];return _0xdf3bac;},a4_0x1875(_0x3bf543,_0x47eade);}function stopService(_0x3c6216){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x4e413e){}pythonProcess=null;}}module[a4_0xeb2f51(0x139)]={'startService':startService,'stopService':stopService,'send':send};