const a4_0x46d639=a4_0x6779;(function(_0x577322,_0x130122){const _0x357cf2=a4_0x6779,_0x4d2399=_0x577322();while(!![]){try{const _0x1033a2=parseInt(_0x357cf2(0x1b4))/0x1*(parseInt(_0x357cf2(0x20b))/0x2)+parseInt(_0x357cf2(0x1c7))/0x3+-parseInt(_0x357cf2(0x209))/0x4+parseInt(_0x357cf2(0x1c4))/0x5+parseInt(_0x357cf2(0x1b5))/0x6+parseInt(_0x357cf2(0x1c3))/0x7+-parseInt(_0x357cf2(0x1ef))/0x8;if(_0x1033a2===_0x130122)break;else _0x4d2399['push'](_0x4d2399['shift']());}catch(_0x4ee789){_0x4d2399['push'](_0x4d2399['shift']());}}}(a4_0x37f4,0xf0718));const a4_0x5cc20b=(function(){let _0x1af196=!![];return function(_0x3c5290,_0x3a68fa){const _0x4c9851=_0x1af196?function(){const _0x1f542b=a4_0x6779;if(_0x3a68fa){const _0x572746=_0x3a68fa[_0x1f542b(0x1ba)](_0x3c5290,arguments);return _0x3a68fa=null,_0x572746;}}:function(){};return _0x1af196=![],_0x4c9851;};}()),a4_0x103958=a4_0x5cc20b(this,function(){const _0x18d5ec=a4_0x6779;return a4_0x103958['toString']()[_0x18d5ec(0x210)](_0x18d5ec(0x206))[_0x18d5ec(0x1f4)]()[_0x18d5ec(0x1b0)](a4_0x103958)['search'](_0x18d5ec(0x206));});function a4_0x37f4(){const _0x30390e=['[RESULT]','toString','python_service','[PYTHON]\x20','success','sendNotification','analysis.energy.pinnForecast','SIGNAL_RESULT','data','analysis.energy.heatingScore','parse','ðŸ\x20Python\x20Pong','substring','analysis.isAlert','insulation','analysis.security.lastScore','âœ…\x20HEALTH\x20TRAINED.','analysis.health.gaitSpeed','stringify','(((.+)+)+)+$','analysis.automation.detectedPatterns','child_process','3517960GOSVvP','TRAINING_COMPLETE','57734dsIWWm','analysis.prediction.trackerTopRoom','info','HEALTH_TRAIN_RESULT','analysis.energy.forecast','search','HEALTH_RESULT','./setup','constructor','analysis.security.currentThreshold','ENERGY_TRAIN_RESULT','[LOG]','33VbxWgo','9529668bZcCNz','writable','TRACKER_RESULT','service.py','kill','apply','GAIT_RESULT','PONG','COMFORT_RESULT','toFixed','analysis.security.lastCheck','is_anomaly','analysis.prediction.nextRoom','Failed:\x20','13404482lPtMbx','1443180sieqXs','close','analysis.energy.mpcActive','5722140gYXWmB','getState','debug','type','python3','trim','details','startsWith','analysis.health.isAnomaly','ENERGY_PREDICT_RESULT','split','toLocaleTimeString','exports','toISOString','analysis.alertReason','threshold','length','analysis.energy.insulationScore','./automation','Error\x20launching\x20Python:\x20','ENERGY_OPTIMIZE_RESULT','entries','payload','analysis.prediction.confidence','analysis.prediction.trackerState','VENTILATION_ALERT','forEach','error','analysis.energy.warmupTimes','analysis.energy.ventilationAlerts','SECURITY_RESULT','sendToPythonWrapper','analysis.prediction.trackerConfidence','applyEnergySavings','reason','write','analysis.health.lastCheck','\x0aGrund:\x20','Unknown','path','38299880tpYimo','log','setStateAsync','WARMUP_RESULT'];a4_0x37f4=function(){return _0x30390e;};return a4_0x37f4();}a4_0x103958();'use strict';const {spawn}=require(a4_0x46d639(0x208)),path=require(a4_0x46d639(0x1ee)),fs=require('fs'),setup=require(a4_0x46d639(0x1af)),automation=require(a4_0x46d639(0x1d9));let pythonProcess=null;function a4_0x6779(_0x1180da,_0x127617){const _0x162a69=a4_0x37f4();return a4_0x6779=function(_0x103958,_0x5cc20b){_0x103958=_0x103958-0x1af;let _0x37f4a1=_0x162a69[_0x103958];return _0x37f4a1;},a4_0x6779(_0x1180da,_0x127617);}function send(_0x280943,_0x56bab1,_0x3e67f2={}){const _0x519103=a4_0x46d639;if(!pythonProcess||!pythonProcess['stdin'][_0x519103(0x1b6)])return;const _0x439538=JSON[_0x519103(0x205)]({'command':_0x56bab1,..._0x3e67f2});try{pythonProcess['stdin'][_0x519103(0x1ea)](_0x439538+'\x0a');}catch(_0x3b829f){}}function handleResult(_0x56805c,_0x280909){const _0x372706=a4_0x46d639;if(_0x280909[_0x372706(0x1ca)]===_0x372706(0x1bc))_0x56805c['log'][_0x372706(0x1c9)](_0x372706(0x1fe));else{if(_0x280909[_0x372706(0x1ca)]===_0x372706(0x1e5)){const {anomaly_score:_0x2335be,is_anomaly:_0x24be31,threshold:_0x3180c4,explanation:_0x262b43}=_0x280909['payload'];_0x56805c[_0x372706(0x1f1)](_0x372706(0x202),{'val':_0x2335be,'ack':!![]}),_0x56805c[_0x372706(0x1f1)](_0x372706(0x1bf),{'val':new Date()[_0x372706(0x1d4)](),'ack':!![]});if(_0x3180c4)_0x56805c[_0x372706(0x1f1)](_0x372706(0x1b1),{'val':_0x3180c4,'ack':!![]});if(_0x24be31){let _0x12f7f8='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x2335be[_0x372706(0x1be)](0x4)+')';if(_0x262b43&&_0x262b43!==_0x372706(0x1ed))_0x12f7f8+=_0x372706(0x1ec)+_0x262b43;_0x56805c['setStateAsync'](_0x372706(0x200),{'val':!![],'ack':!![]}),_0x56805c[_0x372706(0x1f1)](_0x372706(0x1d5),{'val':_0x12f7f8,'ack':!![]}),setup[_0x372706(0x1f8)](_0x56805c,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x12f7f8,![],!![]);}}else{if(_0x280909[_0x372706(0x1ca)]===_0x372706(0x20a)){const _0x2ba131=_0x280909[_0x372706(0x1dd)][_0x372706(0x1cd)]||'',_0x51358d=_0x280909[_0x372706(0x1dd)][_0x372706(0x1d6)],_0x29bb47=_0x280909[_0x372706(0x1dd)][_0x372706(0x1f7)]?'Success:\x20'+new Date()[_0x372706(0x1d2)]()+'\x20('+_0x2ba131+')':_0x372706(0x1c2)+_0x280909['payload'][_0x372706(0x1e9)];_0x56805c[_0x372706(0x1f1)]('analysis.training.status',{'val':_0x29bb47,'ack':!![]});if(_0x280909['payload'][_0x372706(0x1f7)]&&_0x51358d)_0x56805c[_0x372706(0x1f1)](_0x372706(0x1b1),{'val':_0x51358d,'ack':!![]});}else{if(_0x280909[_0x372706(0x1ca)]===_0x372706(0x1b2)){if(_0x280909[_0x372706(0x1dd)][_0x372706(0x1f7)])try{const _0x3ddd6b=JSON['parse'](_0x280909[_0x372706(0x1dd)][_0x372706(0x1cd)]);if(_0x3ddd6b[_0x372706(0x201)])_0x56805c['setStateAsync'](_0x372706(0x1d8),{'val':JSON[_0x372706(0x205)](_0x3ddd6b[_0x372706(0x201)]),'ack':!![]});if(_0x3ddd6b['heating'])_0x56805c['setStateAsync'](_0x372706(0x1fc),{'val':JSON[_0x372706(0x205)](_0x3ddd6b['heating']),'ack':!![]});}catch(_0x551eca){}}else{if(_0x280909[_0x372706(0x1ca)]===_0x372706(0x20e)){if(_0x280909[_0x372706(0x1dd)][_0x372706(0x1f7)])_0x56805c[_0x372706(0x1f0)][_0x372706(0x20d)](_0x372706(0x203));}else{if(_0x280909[_0x372706(0x1ca)]===_0x372706(0x211))_0x56805c[_0x372706(0x1f1)](_0x372706(0x1eb),{'val':new Date()[_0x372706(0x1d4)](),'ack':!![]}),_0x56805c[_0x372706(0x1f1)](_0x372706(0x1cf),{'val':_0x280909['payload'][_0x372706(0x1c0)],'ack':!![]});else{if(_0x280909['type']===_0x372706(0x1bb)){const {speed_trend:_0x5d21d0}=_0x280909[_0x372706(0x1dd)];if(_0x5d21d0!==undefined)_0x56805c[_0x372706(0x1f1)](_0x372706(0x204),{'val':_0x5d21d0,'ack':!![]});}else{if(_0x280909[_0x372706(0x1ca)]===_0x372706(0x1d0)){const {forecast:_0x14f66c}=_0x280909[_0x372706(0x1dd)];if(_0x14f66c)_0x56805c[_0x372706(0x1f1)](_0x372706(0x20f),{'val':JSON[_0x372706(0x205)](_0x14f66c),'ack':!![]});}else{if(_0x280909[_0x372706(0x1ca)]===_0x372706(0x1f2)){const {times:_0x28b37b}=_0x280909[_0x372706(0x1dd)];if(_0x28b37b)_0x56805c[_0x372706(0x1f1)](_0x372706(0x1e3),{'val':JSON['stringify'](_0x28b37b),'ack':!![]});}else{if(_0x280909[_0x372706(0x1ca)]==='PINN_PREDICT_RESULT'){const {forecast:_0x3a50bf}=_0x280909[_0x372706(0x1dd)];if(_0x3a50bf)_0x56805c[_0x372706(0x1f1)](_0x372706(0x1f9),{'val':JSON['stringify'](_0x3a50bf),'ack':!![]});}else{if(_0x280909[_0x372706(0x1ca)]===_0x372706(0x1e0)){const {alerts:_0x5e6ced}=_0x280909[_0x372706(0x1dd)];if(_0x5e6ced)_0x56805c[_0x372706(0x1f1)](_0x372706(0x1e4),{'val':JSON[_0x372706(0x205)](_0x5e6ced),'ack':!![]});}else{if(_0x280909[_0x372706(0x1ca)]===_0x372706(0x1db)){const {proposals:_0x19643e}=_0x280909['payload'];_0x56805c[_0x372706(0x1c8)](_0x372706(0x1c6),(_0x457f82,_0x46f2aa)=>{const _0x26c374=_0x372706;_0x46f2aa&&_0x46f2aa['val']===!![]&&_0x19643e&&_0x19643e[_0x26c374(0x1d7)]>0x0&&automation[_0x26c374(0x1e8)](_0x56805c,_0x19643e);});}else{if(_0x280909['type']===_0x372706(0x1fa)){const {room:_0x413bea,propagation:_0x2e4447}=_0x280909[_0x372706(0x1dd)];let _0x527f58=_0x372706(0x1ed),_0x43cd45=0x0;if(_0x2e4447){const _0x2b3739=Object[_0x372706(0x1dc)](_0x2e4447);_0x2b3739['length']>0x0&&(_0x527f58=_0x2b3739[0x0][0x0],_0x43cd45=_0x2b3739[0x0][0x1]);}_0x56805c[_0x372706(0x1f1)](_0x372706(0x1c1),{'val':_0x527f58,'ack':!![]}),_0x56805c['setStateAsync'](_0x372706(0x1de),{'val':_0x43cd45,'ack':!![]}),automation['handlePrediction'](_0x56805c,_0x527f58,_0x43cd45);}else{if(_0x280909[_0x372706(0x1ca)]===_0x372706(0x1b7)){const {probabilities:_0x22213c}=_0x280909[_0x372706(0x1dd)];if(_0x22213c){_0x56805c[_0x372706(0x1f1)](_0x372706(0x1df),{'val':JSON['stringify'](_0x22213c),'ack':!![]});const _0x126310=Object['keys'](_0x22213c);if(_0x126310[_0x372706(0x1d7)]>0x0){const _0xabb2e5=_0x126310[0x0],_0x5ea825=_0x22213c[_0xabb2e5];_0x56805c[_0x372706(0x1f1)](_0x372706(0x20c),{'val':_0xabb2e5,'ack':!![]}),_0x56805c[_0x372706(0x1f1)](_0x372706(0x1e7),{'val':_0x5ea825,'ack':!![]});}}}else{if(_0x280909[_0x372706(0x1ca)]===_0x372706(0x1bd)){const {patterns:_0x10bfb8}=_0x280909[_0x372706(0x1dd)];if(_0x10bfb8&&_0x10bfb8[_0x372706(0x1d7)]>0x0)_0x56805c['setStateAsync'](_0x372706(0x207),{'val':JSON[_0x372706(0x205)](_0x10bfb8),'ack':!![]});}}}}}}}}}}}}}}}}function startService(_0x1326f8,_0xe09fef){const _0x34ed2f=a4_0x46d639;let _0x58b85c=_0x34ed2f(0x1cb);if(fs['existsSync'](_0xe09fef))_0x58b85c=_0xe09fef;try{const _0x2e9a3a=path['join'](__dirname,'..',_0x34ed2f(0x1f5),_0x34ed2f(0x1b8));pythonProcess=spawn(_0x58b85c,[_0x2e9a3a]),pythonProcess['stdout']['on'](_0x34ed2f(0x1fb),_0x3b0e12=>{const _0xf5996c=_0x34ed2f,_0x4bdf71=_0x3b0e12[_0xf5996c(0x1f4)]()[_0xf5996c(0x1d1)]('\x0a');_0x4bdf71[_0xf5996c(0x1e1)](_0x3580e2=>{const _0x222cb7=_0xf5996c,_0x2ce973=_0x3580e2[_0x222cb7(0x1cc)]();if(!_0x2ce973)return;if(_0x2ce973[_0x222cb7(0x1ce)](_0x222cb7(0x1b3)))_0x1326f8[_0x222cb7(0x1f0)][_0x222cb7(0x1c9)](_0x222cb7(0x1f6)+_0x2ce973['substring'](0x5)['trim']());else{if(_0x2ce973[_0x222cb7(0x1ce)](_0x222cb7(0x1f3)))try{const _0x26c262=JSON[_0x222cb7(0x1fd)](_0x2ce973[_0x222cb7(0x1ff)](0x8)[_0x222cb7(0x1cc)]());handleResult(_0x1326f8,_0x26c262);}catch(_0x118826){}}});}),pythonProcess['on'](_0x34ed2f(0x1c5),_0x27af40=>{pythonProcess=null;}),_0x1326f8[_0x34ed2f(0x1e6)]=(_0x2deea2,_0x339fdf)=>send(_0x1326f8,_0x2deea2,_0x339fdf);}catch(_0x2a338a){_0x1326f8[_0x34ed2f(0x1f0)][_0x34ed2f(0x1e2)](_0x34ed2f(0x1da)+_0x2a338a['message']);}}function stopService(_0x45a461){const _0x4bff39=a4_0x46d639;if(pythonProcess){try{pythonProcess[_0x4bff39(0x1b9)]();}catch(_0x2de018){}pythonProcess=null;}}module[a4_0x46d639(0x1d3)]={'startService':startService,'stopService':stopService,'send':send};