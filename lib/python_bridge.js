const a4_0x1a920d=a4_0x4173;(function(_0x53c4d4,_0x5a9d77){const _0x28738e=a4_0x4173,_0x3bd515=_0x53c4d4();while(!![]){try{const _0x1d794d=-parseInt(_0x28738e(0xb7))/0x1+-parseInt(_0x28738e(0xbb))/0x2*(parseInt(_0x28738e(0xc6))/0x3)+-parseInt(_0x28738e(0xb5))/0x4+-parseInt(_0x28738e(0xb0))/0x5+parseInt(_0x28738e(0xa6))/0x6*(parseInt(_0x28738e(0x10b))/0x7)+-parseInt(_0x28738e(0xcc))/0x8*(parseInt(_0x28738e(0xab))/0x9)+parseInt(_0x28738e(0xda))/0xa;if(_0x1d794d===_0x5a9d77)break;else _0x3bd515['push'](_0x3bd515['shift']());}catch(_0x4ea0f8){_0x3bd515['push'](_0x3bd515['shift']());}}}(a4_0x88ef,0xeb51e));const a4_0x4a88f6=(function(){let _0x5f18f0=!![];return function(_0xe2beaf,_0x42cbc4){const _0x395d39=_0x5f18f0?function(){const _0xf35b53=a4_0x4173;if(_0x42cbc4){const _0x235232=_0x42cbc4[_0xf35b53(0x106)](_0xe2beaf,arguments);return _0x42cbc4=null,_0x235232;}}:function(){};return _0x5f18f0=![],_0x395d39;};}()),a4_0xb9c8e=a4_0x4a88f6(this,function(){const _0x4417dc=a4_0x4173;return a4_0xb9c8e[_0x4417dc(0xb6)]()['search'](_0x4417dc(0xba))[_0x4417dc(0xb6)]()[_0x4417dc(0xc8)](a4_0xb9c8e)['search'](_0x4417dc(0xba));});a4_0xb9c8e();'use strict';const {spawn}=require(a4_0x1a920d(0xcd)),path=require('path'),fs=require('fs'),setup=require(a4_0x1a920d(0xc7)),automation=require(a4_0x1a920d(0x125));let pythonProcess=null;function a4_0x88ef(){const _0xe10788=['ðŸ\x20Python\x20Pong','details','steps','analysis.energy.ventilationAlerts','Graph\x20Updated\x20(','analysis.security.topologyMatrix','close','analysis.energy.insulationScore','[RESULT]','9ZCGcLk','./setup','constructor','toISOString','location','python_service','7088ecMzqX','child_process','threshold','GAIT_RESULT','room','analysis.health.isAnomaly','analysis.alertReason','HEALTH_RESULT','[PYTHON\x20ERR]\x20','payload','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!','Gateway\x20Unpack\x20Error:\x20','sensors','RL_PENALTY_UPDATE','61730570tgiUOZ','trim','analysis.health.gaitDebug','debug','string','service.py','log','map','setStateAsync','analysis.security.lastScore','kill','penalties','Python\x20process\x20exited\x20with\x20code\x20','sequences','stderr','analysis.security.lastCheck','ENERGY_TRAIN_RESULT','getState','TRAIN_SECURITY','toLocaleTimeString','stdout','TRAINING_COMPLETE','PONG','toFixed','analysis.health.lastCheck','handlePrediction','object','analysis.energy.warmupDetails','ENERGY_OPTIMIZE_RESULT','âš ï¸\x20SECURITY\x20ALARM:\x20','analysis.energy.mpcActive','âœ…\x20HEALTH\x20TRAINED.','stdin','sendToPythonWrapper','analysis.training.status','forecast','speed_trend','analysis.energy.forecast','message','data','[LOG]','[Bridge-Debug]\x20Setting\x20Topology\x20Rooms\x20(Sample):\x20','analysis.prediction.trackerState','alerts','apply','ENERGY_PREDICT_RESULT','\x0aGrund:\x20','trend_percent','proof','2234323qXDBTh','applyEnergySavings','analysis.prediction.trackerConfidence','WARMUP_RESULT','insulation','current_temps','monitored','sources','split','analysis.health.gaitSensors','isArray','normalizeRoomId','type','loc','analysis.prediction.confidence','val','TRACKER_RESULT','entries','analysis.isAlert','python3','length','[PYTHON]\x20','analysis.health.gaitSpeed','startsWith','analysis.prediction.nextRoom','join','./automation','Error\x20launching\x20Python:\x20','COMFORT_RESULT','forEach','times','Unknown','\x20Rooms)','patterns','...','SIGNAL_RESULT','slice','parse','30ZHsRXC','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','analysis.security.currentThreshold','rooms','warn','4995lPnEri','analysis.energy.rlPenalties','existsSync','substring','analysis.energy.warmupTimes','9439220QOGGFH','stringify','keys','GRAPH_TRAINED','info','3834868aYEiDQ','toString','1818608fZLjWP','HEALTH_TRAIN_RESULT','success','(((.+)+)+)+$','1098822VHkeDY','[Bridge-Debug]\x20Raw\x20Sequence\x20[0]:\x20'];a4_0x88ef=function(){return _0xe10788;};return a4_0x88ef();}function send(_0x42b86,_0x2c7ca4,_0x1ad7b7={}){const _0x44c447=a4_0x1a920d;if(!pythonProcess||!pythonProcess['stdin']['writable'])return;if(_0x2c7ca4==='SET_TOPOLOGY'){const _0x2e1b7f=JSON[_0x44c447(0xa5)](JSON['stringify'](_0x1ad7b7));_0x2e1b7f[_0x44c447(0xa9)]&&Array[_0x44c447(0x115)](_0x2e1b7f['rooms'])&&(_0x2e1b7f[_0x44c447(0xa9)]=_0x2e1b7f[_0x44c447(0xa9)][_0x44c447(0xe1)](_0x2559f7=>setup[_0x44c447(0x116)](_0x2559f7)),_0x42b86[_0x44c447(0xe0)][_0x44c447(0xb4)](_0x44c447(0x103)+_0x2e1b7f[_0x44c447(0xa9)][_0x44c447(0xa4)](0x0,0x3)['join'](',\x20')+'...')),_0x2e1b7f[_0x44c447(0x111)]&&Array['isArray'](_0x2e1b7f[_0x44c447(0x111)])&&(_0x2e1b7f[_0x44c447(0x111)]=_0x2e1b7f[_0x44c447(0x111)][_0x44c447(0xe1)](_0x1a86eb=>setup[_0x44c447(0x116)](_0x1a86eb))),_0x1ad7b7=_0x2e1b7f;}if((_0x2c7ca4==='TRAIN_TOPOLOGY'||_0x2c7ca4===_0x44c447(0xec))&&_0x1ad7b7['sequences']){if(Array[_0x44c447(0x115)](_0x1ad7b7[_0x44c447(0xe7)]))try{_0x1ad7b7['sequences']['length']>0x0&&_0x42b86[_0x44c447(0xe0)][_0x44c447(0xdd)](_0x44c447(0xbc)+JSON[_0x44c447(0xb1)](_0x1ad7b7[_0x44c447(0xe7)][0x0])[_0x44c447(0xae)](0x0,0x64)+_0x44c447(0xa2)),_0x1ad7b7[_0x44c447(0xe7)]=_0x1ad7b7[_0x44c447(0xe7)]['map'](_0x367281=>{const _0xb0cae1=_0x44c447;if(_0x367281&&_0x367281[_0xb0cae1(0xbf)]&&Array[_0xb0cae1(0x115)](_0x367281['steps']))return _0x367281['steps'][_0xb0cae1(0xe1)](_0x3bfc9c=>{const _0x50af03=_0xb0cae1,_0x4c71a9=_0x3bfc9c[_0x50af03(0x118)]||_0x3bfc9c[_0x50af03(0xca)]||_0x3bfc9c;return setup[_0x50af03(0x116)](_0x4c71a9);});else{if(Array[_0xb0cae1(0x115)](_0x367281))return _0x367281[_0xb0cae1(0xe1)](_0x377798=>setup['normalizeRoomId'](_0x377798));}return[];}),_0x1ad7b7[_0x44c447(0xe7)][_0x44c447(0x11f)]>0x0&&_0x42b86['log']['info']('[Bridge-Debug]\x20Normalized\x20Sequence\x20[0]\x20(Unpacked):\x20'+JSON[_0x44c447(0xb1)](_0x1ad7b7['sequences'][0x0]));}catch(_0xe34702){_0x42b86[_0x44c447(0xe0)][_0x44c447(0xaa)](_0x44c447(0xd7)+_0xe34702[_0x44c447(0x100)]),_0x1ad7b7[_0x44c447(0xe7)]=[];}else _0x1ad7b7[_0x44c447(0xe7)]=[];}_0x1ad7b7[_0x44c447(0xd0)]&&typeof _0x1ad7b7[_0x44c447(0xd0)]===_0x44c447(0xde)&&(_0x1ad7b7[_0x44c447(0xd0)]=setup[_0x44c447(0x116)](_0x1ad7b7[_0x44c447(0xd0)]));if(_0x1ad7b7[_0x44c447(0x110)]&&typeof _0x1ad7b7['current_temps']===_0x44c447(0xf4)){const _0xa300cd={};for(const [_0x470903,_0x17ad25]of Object[_0x44c447(0x11c)](_0x1ad7b7[_0x44c447(0x110)]))_0xa300cd[setup[_0x44c447(0x116)](_0x470903)]=_0x17ad25;_0x1ad7b7[_0x44c447(0x110)]=_0xa300cd;}const _0x449f22=JSON['stringify']({'command':_0x2c7ca4,..._0x1ad7b7});try{pythonProcess[_0x44c447(0xfa)]['write'](_0x449f22+'\x0a');}catch(_0x2229d8){}}function handleResult(_0x909c25,_0xfbfda2){const _0x31f560=a4_0x1a920d;if(_0xfbfda2['type']===_0x31f560(0xf0))_0x909c25[_0x31f560(0xe0)]['debug'](_0x31f560(0xbd));else{if(_0xfbfda2[_0x31f560(0x117)]==='SECURITY_RESULT'){const {anomaly_score:_0x6a01d2,is_anomaly:_0x49a280,threshold:_0x18a1c5,explanation:_0x595a04}=_0xfbfda2[_0x31f560(0xd5)];_0x909c25['setStateAsync'](_0x31f560(0xe3),{'val':_0x6a01d2,'ack':!![]}),_0x909c25[_0x31f560(0xe2)](_0x31f560(0xe9),{'val':new Date()[_0x31f560(0xc9)](),'ack':!![]});if(_0x18a1c5)_0x909c25[_0x31f560(0xe2)](_0x31f560(0xa8),{'val':_0x18a1c5,'ack':!![]});if(_0x49a280){let _0x115ce2=_0x31f560(0xa7)+_0x6a01d2[_0x31f560(0xf1)](0x4)+')';if(_0x595a04&&_0x595a04!==_0x31f560(0x9f))_0x115ce2+=_0x31f560(0x108)+_0x595a04;_0x909c25[_0x31f560(0xe2)](_0x31f560(0x11d),{'val':!![],'ack':!![]}),_0x909c25[_0x31f560(0xe2)](_0x31f560(0xd2),{'val':_0x115ce2,'ack':!![]}),setup['sendNotification'](_0x909c25,_0x31f560(0xf7)+_0x115ce2,![],!![]);}}else{if(_0xfbfda2[_0x31f560(0x117)]===_0x31f560(0xef)){const _0x6a352b=_0xfbfda2['payload'][_0x31f560(0xbe)]||'',_0x31f645=_0xfbfda2[_0x31f560(0xd5)][_0x31f560(0xce)],_0x41eba6=_0xfbfda2[_0x31f560(0xd5)][_0x31f560(0xb9)]?'Success:\x20'+new Date()[_0x31f560(0xed)]()+'\x20('+_0x6a352b+')':'Failed:\x20'+_0xfbfda2[_0x31f560(0xd5)]['reason'];_0x909c25['setStateAsync'](_0x31f560(0xfc),{'val':_0x41eba6,'ack':!![]});if(_0xfbfda2[_0x31f560(0xd5)]['success']&&_0x31f645)_0x909c25['setStateAsync'](_0x31f560(0xa8),{'val':_0x31f645,'ack':!![]});}else{if(_0xfbfda2[_0x31f560(0x117)]===_0x31f560(0xb3)){const _0x3f02d6=_0x31f560(0xc1)+_0xfbfda2[_0x31f560(0xd5)][_0x31f560(0xa9)][_0x31f560(0x11f)]+_0x31f560(0xa0);_0x909c25['setStateAsync']('analysis.training.status',{'val':_0x3f02d6,'ack':!![]}),_0xfbfda2[_0x31f560(0xd5)]['matrix']&&_0xfbfda2[_0x31f560(0xd5)][_0x31f560(0xa9)]&&_0x909c25[_0x31f560(0xe2)](_0x31f560(0xc2),{'val':JSON[_0x31f560(0xb1)](_0xfbfda2['payload']),'ack':!![]});}else{if(_0xfbfda2[_0x31f560(0x117)]===_0x31f560(0xea)){if(_0xfbfda2['payload'][_0x31f560(0xb9)])try{const _0x4487d2=JSON['parse'](_0xfbfda2['payload'][_0x31f560(0xbe)]);if(_0x4487d2[_0x31f560(0x10f)])_0x909c25[_0x31f560(0xe2)](_0x31f560(0xc4),{'val':JSON[_0x31f560(0xb1)](_0x4487d2[_0x31f560(0x10f)]),'ack':!![]});if(_0x4487d2['heating'])_0x909c25[_0x31f560(0xe2)]('analysis.energy.heatingScore',{'val':JSON[_0x31f560(0xb1)](_0x4487d2['heating']),'ack':!![]});}catch(_0x27b942){}}else{if(_0xfbfda2[_0x31f560(0x117)]===_0x31f560(0xb8))_0x909c25['log'][_0x31f560(0xb4)](_0x31f560(0xf9)),_0x909c25[_0x31f560(0xe2)](_0x31f560(0xf2),{'val':new Date()['toLocaleDateString'](),'ack':!![]});else{if(_0xfbfda2[_0x31f560(0x117)]===_0x31f560(0xd3))_0x909c25['setStateAsync'](_0x31f560(0xd1),{'val':_0xfbfda2[_0x31f560(0xd5)]['is_anomaly'],'ack':!![]});else{if(_0xfbfda2[_0x31f560(0x117)]==='HEALTH_TREND_RESULT')_0x909c25[_0x31f560(0xe2)]('analysis.health.activityTrend',{'val':_0xfbfda2[_0x31f560(0xd5)][_0x31f560(0x109)],'ack':!![]}),_0x909c25[_0x31f560(0xe0)]['info']('ðŸ“ˆ\x20Health\x20Trend:\x20'+_0xfbfda2['payload'][_0x31f560(0xbe)]);else{if(_0xfbfda2[_0x31f560(0x117)]===_0x31f560(0xcf)){if(_0xfbfda2[_0x31f560(0xd5)][_0x31f560(0xfe)]!==undefined)_0x909c25['setStateAsync'](_0x31f560(0x121),{'val':_0xfbfda2[_0x31f560(0xd5)]['speed_trend'],'ack':!![]});if(_0xfbfda2[_0x31f560(0xd5)][_0x31f560(0xd8)])_0x909c25['setStateAsync'](_0x31f560(0x114),{'val':_0xfbfda2['payload'][_0x31f560(0xd8)][_0x31f560(0x124)](',\x20'),'ack':!![]});if(_0xfbfda2[_0x31f560(0xd5)][_0x31f560(0x10a)])_0x909c25['setStateAsync'](_0x31f560(0xdc),{'val':_0xfbfda2[_0x31f560(0xd5)]['proof'],'ack':!![]});}else{if(_0xfbfda2[_0x31f560(0x117)]===_0x31f560(0x107)){if(_0xfbfda2[_0x31f560(0xd5)][_0x31f560(0xfd)])_0x909c25[_0x31f560(0xe2)](_0x31f560(0xff),{'val':JSON[_0x31f560(0xb1)](_0xfbfda2['payload'][_0x31f560(0xfd)]),'ack':!![]});}else{if(_0xfbfda2['type']===_0x31f560(0x10e)){if(_0xfbfda2[_0x31f560(0xd5)][_0x31f560(0x9e)])_0x909c25[_0x31f560(0xe2)](_0x31f560(0xaf),{'val':JSON[_0x31f560(0xb1)](_0xfbfda2[_0x31f560(0xd5)][_0x31f560(0x9e)]),'ack':!![]});if(_0xfbfda2[_0x31f560(0xd5)][_0x31f560(0x112)])_0x909c25['setStateAsync']('analysis.energy.warmupSources',{'val':JSON['stringify'](_0xfbfda2['payload']['sources']),'ack':!![]});if(_0xfbfda2['payload'][_0x31f560(0xbe)])_0x909c25[_0x31f560(0xe2)](_0x31f560(0xf5),{'val':JSON[_0x31f560(0xb1)](_0xfbfda2[_0x31f560(0xd5)][_0x31f560(0xbe)]),'ack':!![]});}else{if(_0xfbfda2[_0x31f560(0x117)]===_0x31f560(0xd9)){if(_0xfbfda2[_0x31f560(0xd5)][_0x31f560(0xe5)])_0x909c25[_0x31f560(0xe2)](_0x31f560(0xac),{'val':JSON['stringify'](_0xfbfda2[_0x31f560(0xd5)][_0x31f560(0xe5)]),'ack':!![]});}else{if(_0xfbfda2['type']==='PINN_PREDICT_RESULT'){if(_0xfbfda2[_0x31f560(0xd5)][_0x31f560(0xfd)])_0x909c25[_0x31f560(0xe2)]('analysis.energy.pinnForecast',{'val':JSON['stringify'](_0xfbfda2[_0x31f560(0xd5)][_0x31f560(0xfd)]),'ack':!![]});}else{if(_0xfbfda2[_0x31f560(0x117)]==='VENTILATION_ALERT'){if(_0xfbfda2['payload'][_0x31f560(0x105)])_0x909c25[_0x31f560(0xe2)](_0x31f560(0xc0),{'val':JSON[_0x31f560(0xb1)](_0xfbfda2[_0x31f560(0xd5)]['alerts']),'ack':!![]});}else{if(_0xfbfda2[_0x31f560(0x117)]===_0x31f560(0xf6)){const {proposals:_0x241a99}=_0xfbfda2[_0x31f560(0xd5)];_0x909c25[_0x31f560(0xeb)](_0x31f560(0xf8),(_0x433c50,_0x2f3f30)=>{const _0x3d2f86=_0x31f560;if(_0x2f3f30&&_0x2f3f30[_0x3d2f86(0x11a)]===!![]&&_0x241a99&&_0x241a99[_0x3d2f86(0x11f)]>0x0)automation[_0x3d2f86(0x10c)](_0x909c25,_0x241a99);});}else{if(_0xfbfda2[_0x31f560(0x117)]===_0x31f560(0xa3)){const {propagation:_0x5ac122}=_0xfbfda2[_0x31f560(0xd5)];let _0x3df04e=_0x31f560(0x9f),_0x23362d=0x0;if(_0x5ac122){const _0x53bd3a=Object['entries'](_0x5ac122);_0x53bd3a[_0x31f560(0x11f)]>0x0&&(_0x3df04e=_0x53bd3a[0x0][0x0],_0x23362d=_0x53bd3a[0x0][0x1]);}_0x909c25[_0x31f560(0xe2)](_0x31f560(0x123),{'val':_0x3df04e,'ack':!![]}),_0x909c25[_0x31f560(0xe2)](_0x31f560(0x119),{'val':_0x23362d,'ack':!![]}),automation[_0x31f560(0xf3)](_0x909c25,_0x3df04e,_0x23362d);}else{if(_0xfbfda2[_0x31f560(0x117)]===_0x31f560(0x11b)){const {probabilities:_0x5acfa5}=_0xfbfda2[_0x31f560(0xd5)];if(_0x5acfa5){_0x909c25[_0x31f560(0xe2)](_0x31f560(0x104),{'val':JSON[_0x31f560(0xb1)](_0x5acfa5),'ack':!![]});const _0xc9d2f2=Object[_0x31f560(0xb2)](_0x5acfa5);_0xc9d2f2[_0x31f560(0x11f)]>0x0&&(_0x909c25[_0x31f560(0xe2)]('analysis.prediction.trackerTopRoom',{'val':_0xc9d2f2[0x0],'ack':!![]}),_0x909c25[_0x31f560(0xe2)](_0x31f560(0x10d),{'val':_0x5acfa5[_0xc9d2f2[0x0]],'ack':!![]}));}}else{if(_0xfbfda2[_0x31f560(0x117)]===_0x31f560(0x9c)){if(_0xfbfda2['payload'][_0x31f560(0xa1)])_0x909c25[_0x31f560(0xe2)]('analysis.automation.detectedPatterns',{'val':JSON[_0x31f560(0xb1)](_0xfbfda2[_0x31f560(0xd5)][_0x31f560(0xa1)]),'ack':!![]});}}}}}}}}}}}}}}}}}}}function a4_0x4173(_0x3a182e,_0x3a41a1){const _0x5335a3=a4_0x88ef();return a4_0x4173=function(_0xb9c8e,_0x4a88f6){_0xb9c8e=_0xb9c8e-0x9b;let _0x88efd6=_0x5335a3[_0xb9c8e];return _0x88efd6;},a4_0x4173(_0x3a182e,_0x3a41a1);}function startService(_0x592238,_0x4a30df){const _0x360119=a4_0x1a920d;let _0x461536=_0x360119(0x11e);if(fs[_0x360119(0xad)](_0x4a30df))_0x461536=_0x4a30df;const _0x34e4d2=path[_0x360119(0x124)](__dirname,'..',_0x360119(0xdf)),_0x1bd0f3=path['join'](__dirname,'..',_0x360119(0xcb),'service.py');let _0x330fbe=fs[_0x360119(0xad)](_0x34e4d2)?_0x34e4d2:fs[_0x360119(0xad)](_0x1bd0f3)?_0x1bd0f3:null;if(!_0x330fbe){_0x592238[_0x360119(0xe0)]['error'](_0x360119(0xd6));return;}try{_0x592238[_0x360119(0xe0)][_0x360119(0xb4)]('ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20'+_0x461536+'\x20'+_0x330fbe),pythonProcess=spawn(_0x461536,[_0x330fbe]),pythonProcess[_0x360119(0xee)]['on'](_0x360119(0x101),_0xe9dc4b=>{const _0x3157e2=_0x360119,_0x3c2284=_0xe9dc4b[_0x3157e2(0xb6)]()[_0x3157e2(0x113)]('\x0a');_0x3c2284[_0x3157e2(0x9d)](_0x306ae0=>{const _0x100c7b=_0x3157e2,_0x37cf5d=_0x306ae0[_0x100c7b(0xdb)]();if(!_0x37cf5d)return;if(_0x37cf5d[_0x100c7b(0x122)](_0x100c7b(0x102)))_0x592238[_0x100c7b(0xe0)][_0x100c7b(0xdd)](_0x100c7b(0x120)+_0x37cf5d['substring'](0x5)[_0x100c7b(0xdb)]());else{if(_0x37cf5d[_0x100c7b(0x122)](_0x100c7b(0xc5)))try{const _0x5138a8=JSON['parse'](_0x37cf5d[_0x100c7b(0xae)](0x8)[_0x100c7b(0xdb)]());handleResult(_0x592238,_0x5138a8);}catch(_0x1ec9a4){}}});}),pythonProcess[_0x360119(0xe8)]['on'](_0x360119(0x101),_0x114f31=>{const _0x52e745=_0x360119;_0x592238[_0x52e745(0xe0)]['error'](_0x52e745(0xd4)+_0x114f31['toString']()[_0x52e745(0xdb)]());}),pythonProcess['on'](_0x360119(0xc3),_0x199972=>{const _0x2047df=_0x360119;_0x592238[_0x2047df(0xe0)][_0x2047df(0xaa)](_0x2047df(0xe6)+_0x199972),pythonProcess=null;}),_0x592238[_0x360119(0xfb)]=(_0x235a13,_0x10e2df)=>send(_0x592238,_0x235a13,_0x10e2df);}catch(_0x5ce847){_0x592238[_0x360119(0xe0)]['error'](_0x360119(0x9b)+_0x5ce847[_0x360119(0x100)]);}}function stopService(_0x11d5f7){const _0x27c6e2=a4_0x1a920d;if(pythonProcess){try{pythonProcess[_0x27c6e2(0xe4)]();}catch(_0x67aded){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};