const a4_0x5f2645=a4_0x5670;(function(_0x2597a7,_0x56a6e5){const _0x7d4558=a4_0x5670,_0x2b7fe4=_0x2597a7();while(!![]){try{const _0x5022af=-parseInt(_0x7d4558(0x18f))/0x1*(parseInt(_0x7d4558(0x153))/0x2)+parseInt(_0x7d4558(0x159))/0x3+parseInt(_0x7d4558(0x160))/0x4*(-parseInt(_0x7d4558(0x15d))/0x5)+parseInt(_0x7d4558(0x136))/0x6*(parseInt(_0x7d4558(0x195))/0x7)+-parseInt(_0x7d4558(0x193))/0x8+-parseInt(_0x7d4558(0x16b))/0x9*(-parseInt(_0x7d4558(0x14d))/0xa)+parseInt(_0x7d4558(0x15b))/0xb*(parseInt(_0x7d4558(0x14c))/0xc);if(_0x5022af===_0x56a6e5)break;else _0x2b7fe4['push'](_0x2b7fe4['shift']());}catch(_0x5483a5){_0x2b7fe4['push'](_0x2b7fe4['shift']());}}}(a4_0x36f5,0xa70d2));const a4_0x435e54=(function(){let _0x3321b9=!![];return function(_0x448a75,_0x2aa3db){const _0xe32ab2=_0x3321b9?function(){const _0x2ba695=a4_0x5670;if(_0x2aa3db){const _0x20c59b=_0x2aa3db[_0x2ba695(0x170)](_0x448a75,arguments);return _0x2aa3db=null,_0x20c59b;}}:function(){};return _0x3321b9=![],_0xe32ab2;};}()),a4_0x4434e5=a4_0x435e54(this,function(){const _0x59a57d=a4_0x5670;return a4_0x4434e5[_0x59a57d(0x151)]()[_0x59a57d(0x179)](_0x59a57d(0x196))[_0x59a57d(0x151)]()['constructor'](a4_0x4434e5)[_0x59a57d(0x179)](_0x59a57d(0x196));});function a4_0x5670(_0x1ed56d,_0x52a865){const _0x44ab1b=a4_0x36f5();return a4_0x5670=function(_0x4434e5,_0x435e54){_0x4434e5=_0x4434e5-0x136;let _0x36f568=_0x44ab1b[_0x4434e5];return _0x36f568;},a4_0x5670(_0x1ed56d,_0x52a865);}a4_0x4434e5();'use strict';function a4_0x36f5(){const _0x3ac082=['COMFORT_RESULT','125693rRZvNt','startsWith','keys','analysis.energy.heatingScore','8305968XFhcEY','analysis.energy.mpcActive','21VKSfQC','(((.+)+)+)+$','1860294PexGSN','PINN_PREDICT_RESULT','details','debug','error','TRAINING_COMPLETE','length','parse','substring','child_process','analysis.energy.ventilationAlerts','analysis.alertReason','analysis.health.gaitSpeed','./automation','analysis.security.lastScore','info','ENERGY_PREDICT_RESULT','./setup','analysis.prediction.trackerTopRoom','[LOG]','[PYTHON]\x20','insulation','11927712xpBtpO','7965450kBNGWw','split','Failed:\x20','SIGNAL_RESULT','toString','Unknown','14OcCSMr','threshold','stringify','analysis.prediction.trackerConfidence','path','GAIT_RESULT','2097354tRcazS','toFixed','11cxJhwJ','analysis.isAlert','5QpxcNy','WARMUP_RESULT','Success:\x20','3269788dVAPbM','sendToPythonWrapper','PONG','analysis.automation.detectedPatterns','analysis.health.lastCheck','payload','is_anomaly','python3','TRACKER_RESULT','analysis.prediction.confidence','exports','9AVZUmO','Error\x20launching\x20Python:\x20','ENERGY_OPTIMIZE_RESULT','analysis.health.isAnomaly','analysis.training.status','apply','type','heating','reason','close','stdin','stdout','kill','analysis.prediction.trackerState','search','âœ…\x20HEALTH\x20TRAINED.','ENERGY_TRAIN_RESULT','entries','forEach','toISOString','setStateAsync','trim','log','[RESULT]','âš ï¸\x20SECURITY\x20ALARM:\x20','VENTILATION_ALERT','getState','service.py','success','analysis.energy.warmupTimes','HEALTH_TRAIN_RESULT','message','HEALTH_RESULT','val','existsSync'];a4_0x36f5=function(){return _0x3ac082;};return a4_0x36f5();}const {spawn}=require(a4_0x5f2645(0x13f)),path=require(a4_0x5f2645(0x157)),fs=require('fs'),setup=require(a4_0x5f2645(0x147)),automation=require(a4_0x5f2645(0x143));let pythonProcess=null;function send(_0x5f0028,_0x3b5120,_0x3b2526={}){const _0x32aaf1=a4_0x5f2645;if(!pythonProcess||!pythonProcess['stdin']['writable'])return;const _0x43b2e9=JSON['stringify']({'command':_0x3b5120,..._0x3b2526});try{pythonProcess[_0x32aaf1(0x175)]['write'](_0x43b2e9+'\x0a');}catch(_0x13179a){}}function handleResult(_0x1e6d62,_0x6368eb){const _0x183c35=a4_0x5f2645;if(_0x6368eb[_0x183c35(0x171)]===_0x183c35(0x162))_0x1e6d62[_0x183c35(0x181)]['debug']('ðŸ\x20Python\x20Pong');else{if(_0x6368eb[_0x183c35(0x171)]==='SECURITY_RESULT'){const {anomaly_score:_0x1db58b,is_anomaly:_0x1dbeb9,threshold:_0x499d6e,explanation:_0x338ebf}=_0x6368eb[_0x183c35(0x165)];_0x1e6d62[_0x183c35(0x17f)](_0x183c35(0x144),{'val':_0x1db58b,'ack':!![]}),_0x1e6d62['setStateAsync']('analysis.security.lastCheck',{'val':new Date()[_0x183c35(0x17e)](),'ack':!![]});if(_0x499d6e)_0x1e6d62[_0x183c35(0x17f)]('analysis.security.currentThreshold',{'val':_0x499d6e,'ack':!![]});if(_0x1dbeb9){let _0x42afc4='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x1db58b[_0x183c35(0x15a)](0x4)+')';if(_0x338ebf&&_0x338ebf!=='Unknown')_0x42afc4+='\x0aGrund:\x20'+_0x338ebf;_0x1e6d62[_0x183c35(0x17f)](_0x183c35(0x15c),{'val':!![],'ack':!![]}),_0x1e6d62[_0x183c35(0x17f)](_0x183c35(0x141),{'val':_0x42afc4,'ack':!![]}),setup['sendNotification'](_0x1e6d62,_0x183c35(0x183)+_0x42afc4,![],!![]);}}else{if(_0x6368eb[_0x183c35(0x171)]===_0x183c35(0x13b)){const _0x289168=_0x6368eb[_0x183c35(0x165)][_0x183c35(0x138)]||'',_0x1f7c23=_0x6368eb[_0x183c35(0x165)][_0x183c35(0x154)],_0xfcf4e1=_0x6368eb[_0x183c35(0x165)][_0x183c35(0x187)]?_0x183c35(0x15f)+new Date()['toLocaleTimeString']()+'\x20('+_0x289168+')':_0x183c35(0x14f)+_0x6368eb[_0x183c35(0x165)][_0x183c35(0x173)];_0x1e6d62[_0x183c35(0x17f)](_0x183c35(0x16f),{'val':_0xfcf4e1,'ack':!![]});if(_0x6368eb[_0x183c35(0x165)][_0x183c35(0x187)]&&_0x1f7c23)_0x1e6d62['setStateAsync']('analysis.security.currentThreshold',{'val':_0x1f7c23,'ack':!![]});}else{if(_0x6368eb[_0x183c35(0x171)]===_0x183c35(0x17b)){if(_0x6368eb[_0x183c35(0x165)][_0x183c35(0x187)])try{const _0x29c6a8=JSON[_0x183c35(0x13d)](_0x6368eb[_0x183c35(0x165)][_0x183c35(0x138)]);if(_0x29c6a8[_0x183c35(0x14b)])_0x1e6d62[_0x183c35(0x17f)]('analysis.energy.insulationScore',{'val':JSON[_0x183c35(0x155)](_0x29c6a8[_0x183c35(0x14b)]),'ack':!![]});if(_0x29c6a8[_0x183c35(0x172)])_0x1e6d62[_0x183c35(0x17f)](_0x183c35(0x192),{'val':JSON[_0x183c35(0x155)](_0x29c6a8[_0x183c35(0x172)]),'ack':!![]});}catch(_0x836352){}}else{if(_0x6368eb[_0x183c35(0x171)]===_0x183c35(0x189)){if(_0x6368eb[_0x183c35(0x165)][_0x183c35(0x187)])_0x1e6d62[_0x183c35(0x181)][_0x183c35(0x145)](_0x183c35(0x17a));}else{if(_0x6368eb[_0x183c35(0x171)]===_0x183c35(0x18b))_0x1e6d62['setStateAsync'](_0x183c35(0x164),{'val':new Date()[_0x183c35(0x17e)](),'ack':!![]}),_0x1e6d62[_0x183c35(0x17f)](_0x183c35(0x16e),{'val':_0x6368eb[_0x183c35(0x165)][_0x183c35(0x166)],'ack':!![]});else{if(_0x6368eb[_0x183c35(0x171)]===_0x183c35(0x158)){const {speed_trend:_0x58775a}=_0x6368eb[_0x183c35(0x165)];if(_0x58775a!==undefined)_0x1e6d62[_0x183c35(0x17f)](_0x183c35(0x142),{'val':_0x58775a,'ack':!![]});}else{if(_0x6368eb[_0x183c35(0x171)]===_0x183c35(0x146)){const {forecast:_0x37a59f}=_0x6368eb[_0x183c35(0x165)];if(_0x37a59f)_0x1e6d62[_0x183c35(0x17f)]('analysis.energy.forecast',{'val':JSON[_0x183c35(0x155)](_0x37a59f),'ack':!![]});}else{if(_0x6368eb[_0x183c35(0x171)]===_0x183c35(0x15e)){const {times:_0x46b8d7}=_0x6368eb[_0x183c35(0x165)];if(_0x46b8d7)_0x1e6d62[_0x183c35(0x17f)](_0x183c35(0x188),{'val':JSON[_0x183c35(0x155)](_0x46b8d7),'ack':!![]});}else{if(_0x6368eb[_0x183c35(0x171)]===_0x183c35(0x137)){const {forecast:_0x4b1059}=_0x6368eb[_0x183c35(0x165)];if(_0x4b1059)_0x1e6d62['setStateAsync']('analysis.energy.pinnForecast',{'val':JSON[_0x183c35(0x155)](_0x4b1059),'ack':!![]});}else{if(_0x6368eb[_0x183c35(0x171)]===_0x183c35(0x184)){const {alerts:_0x1ae744}=_0x6368eb[_0x183c35(0x165)];if(_0x1ae744)_0x1e6d62['setStateAsync'](_0x183c35(0x140),{'val':JSON[_0x183c35(0x155)](_0x1ae744),'ack':!![]});}else{if(_0x6368eb[_0x183c35(0x171)]===_0x183c35(0x16d)){const {proposals:_0x5c7799}=_0x6368eb[_0x183c35(0x165)];_0x1e6d62[_0x183c35(0x185)](_0x183c35(0x194),(_0x42f31d,_0x403898)=>{const _0x28da6f=_0x183c35;_0x403898&&_0x403898[_0x28da6f(0x18c)]===!![]&&_0x5c7799&&_0x5c7799[_0x28da6f(0x13c)]>0x0&&automation['applyEnergySavings'](_0x1e6d62,_0x5c7799);});}else{if(_0x6368eb['type']===_0x183c35(0x150)){const {room:_0x17997b,propagation:_0x433ef4}=_0x6368eb[_0x183c35(0x165)];let _0x50ed7b=_0x183c35(0x152),_0x3ff568=0x0;if(_0x433ef4){const _0x3f9781=Object[_0x183c35(0x17c)](_0x433ef4);_0x3f9781['length']>0x0&&(_0x50ed7b=_0x3f9781[0x0][0x0],_0x3ff568=_0x3f9781[0x0][0x1]);}_0x1e6d62['setStateAsync']('analysis.prediction.nextRoom',{'val':_0x50ed7b,'ack':!![]}),_0x1e6d62[_0x183c35(0x17f)](_0x183c35(0x169),{'val':_0x3ff568,'ack':!![]}),automation['handlePrediction'](_0x1e6d62,_0x50ed7b,_0x3ff568);}else{if(_0x6368eb[_0x183c35(0x171)]===_0x183c35(0x168)){const {probabilities:_0x59b196}=_0x6368eb['payload'];if(_0x59b196){_0x1e6d62[_0x183c35(0x17f)](_0x183c35(0x178),{'val':JSON[_0x183c35(0x155)](_0x59b196),'ack':!![]});const _0x34d723=Object[_0x183c35(0x191)](_0x59b196);if(_0x34d723[_0x183c35(0x13c)]>0x0){const _0x438eb2=_0x34d723[0x0],_0x19cd7b=_0x59b196[_0x438eb2];_0x1e6d62['setStateAsync'](_0x183c35(0x148),{'val':_0x438eb2,'ack':!![]}),_0x1e6d62[_0x183c35(0x17f)](_0x183c35(0x156),{'val':_0x19cd7b,'ack':!![]});}}}else{if(_0x6368eb[_0x183c35(0x171)]===_0x183c35(0x18e)){const {patterns:_0x20913a}=_0x6368eb[_0x183c35(0x165)];if(_0x20913a&&_0x20913a[_0x183c35(0x13c)]>0x0)_0x1e6d62[_0x183c35(0x17f)](_0x183c35(0x163),{'val':JSON['stringify'](_0x20913a),'ack':!![]});}}}}}}}}}}}}}}}}function startService(_0x3e47d7,_0x2fd7b7){const _0x1fe904=a4_0x5f2645;let _0x2b75b7=_0x1fe904(0x167);if(fs[_0x1fe904(0x18d)](_0x2fd7b7))_0x2b75b7=_0x2fd7b7;try{const _0x1a6918=path['join'](__dirname,'..','python_service',_0x1fe904(0x186));pythonProcess=spawn(_0x2b75b7,[_0x1a6918]),pythonProcess[_0x1fe904(0x176)]['on']('data',_0x28ca8d=>{const _0x3ffc55=_0x1fe904,_0x41f552=_0x28ca8d['toString']()[_0x3ffc55(0x14e)]('\x0a');_0x41f552[_0x3ffc55(0x17d)](_0xf6ab91=>{const _0x23e333=_0x3ffc55,_0x25a247=_0xf6ab91['trim']();if(!_0x25a247)return;if(_0x25a247[_0x23e333(0x190)](_0x23e333(0x149)))_0x3e47d7[_0x23e333(0x181)][_0x23e333(0x139)](_0x23e333(0x14a)+_0x25a247[_0x23e333(0x13e)](0x5)['trim']());else{if(_0x25a247[_0x23e333(0x190)](_0x23e333(0x182)))try{const _0xdb7e41=JSON['parse'](_0x25a247[_0x23e333(0x13e)](0x8)[_0x23e333(0x180)]());handleResult(_0x3e47d7,_0xdb7e41);}catch(_0x3af606){}}});}),pythonProcess['on'](_0x1fe904(0x174),_0x42a007=>{pythonProcess=null;}),_0x3e47d7[_0x1fe904(0x161)]=(_0x23444d,_0x7d5e78)=>send(_0x3e47d7,_0x23444d,_0x7d5e78);}catch(_0x525fa9){_0x3e47d7[_0x1fe904(0x181)][_0x1fe904(0x13a)](_0x1fe904(0x16c)+_0x525fa9[_0x1fe904(0x18a)]);}}function stopService(_0x165c28){const _0x4ba3fa=a4_0x5f2645;if(pythonProcess){try{pythonProcess[_0x4ba3fa(0x177)]();}catch(_0x51984d){}pythonProcess=null;}}module[a4_0x5f2645(0x16a)]={'startService':startService,'stopService':stopService,'send':send};