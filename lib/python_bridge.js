const a4_0x2ad7ca=a4_0x1b80;(function(_0x24c380,_0x50bb56){const _0x4c3744=a4_0x1b80,_0x5953bc=_0x24c380();while(!![]){try{const _0x523c68=-parseInt(_0x4c3744(0x17d))/0x1+parseInt(_0x4c3744(0x18b))/0x2+parseInt(_0x4c3744(0x149))/0x3+parseInt(_0x4c3744(0x190))/0x4+parseInt(_0x4c3744(0x175))/0x5+parseInt(_0x4c3744(0x16d))/0x6+-parseInt(_0x4c3744(0x15f))/0x7;if(_0x523c68===_0x50bb56)break;else _0x5953bc['push'](_0x5953bc['shift']());}catch(_0x1629f1){_0x5953bc['push'](_0x5953bc['shift']());}}}(a4_0x1b91,0xc9444));const a4_0x56c8fa=(function(){let _0x51fb3b=!![];return function(_0x9190ac,_0x49d7a5){const _0x106231=_0x51fb3b?function(){if(_0x49d7a5){const _0x29cd7a=_0x49d7a5['apply'](_0x9190ac,arguments);return _0x49d7a5=null,_0x29cd7a;}}:function(){};return _0x51fb3b=![],_0x106231;};}()),a4_0x47793a=a4_0x56c8fa(this,function(){const _0x5099a0=a4_0x1b80;return a4_0x47793a[_0x5099a0(0x172)]()[_0x5099a0(0x151)](_0x5099a0(0x153))[_0x5099a0(0x172)]()['constructor'](a4_0x47793a)[_0x5099a0(0x151)]('(((.+)+)+)+$');});a4_0x47793a();function a4_0x1b91(){const _0x2c81f5=['keys','analysis.health.gaitSpeed','analysis.prediction.trackerState','existsSync','COMFORT_RESULT','ENERGY_TRAIN_RESULT','search','join','(((.+)+)+)+$','analysis.training.status','analysis.prediction.trackerConfidence','analysis.security.lastScore','parse','analysis.energy.mpcActive','[LOG]','TRACKER_RESULT','trim','analysis.health.isAnomaly','setStateAsync','âš ï¸\x20SECURITY\x20ALARM:\x20','21818496RoFoKk','analysis.isAlert','ENERGY_OPTIMIZE_RESULT','forEach','close','write','analysis.security.currentThreshold','WARMUP_RESULT','stringify','analysis.health.lastCheck','analysis.energy.ventilationAlerts','val','analysis.prediction.trackerTopRoom','python_service','3231642nFOMLr','Error\x20launching\x20Python:\x20','threshold','debug','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','toString','Unknown','Success:\x20','6994200OCUBEj','toFixed','insulation','toISOString','substring','./automation','service.py','[RESULT]','964310HtnJlQ','analysis.energy.forecast','analysis.prediction.nextRoom','VENTILATION_ALERT','length','SIGNAL_RESULT','reason','startsWith','child_process','is_anomaly','details','info','[PYTHON]\x20','HEALTH_TRAIN_RESULT','3160928hIzXSU','TRAINING_COMPLETE','success','getState','exports','4944924kBVhUT','âœ…\x20HEALTH\x20TRAINED.','analysis.alertReason','heating','ðŸ\x20Python\x20Pong','type','log','writable','SECURITY_RESULT','sendNotification','./setup','payload','ENERGY_PREDICT_RESULT','python3','analysis.energy.insulationScore','handlePrediction','analysis.energy.heatingScore','stdin','split','PONG','entries','toLocaleTimeString','GAIT_RESULT','\x0aGrund:\x20','message','454452cfpFrZ','HEALTH_RESULT'];a4_0x1b91=function(){return _0x2c81f5;};return a4_0x1b91();}'use strict';const {spawn}=require(a4_0x2ad7ca(0x185)),path=require('path'),fs=require('fs'),setup=require(a4_0x2ad7ca(0x13a)),automation=require(a4_0x2ad7ca(0x17a));let pythonProcess=null;function send(_0x35a805,_0x182ce2,_0x2f3392={}){const _0x48b910=a4_0x2ad7ca;if(!pythonProcess||!pythonProcess[_0x48b910(0x141)][_0x48b910(0x197)])return;const _0x1454a8=JSON[_0x48b910(0x167)]({'command':_0x182ce2,..._0x2f3392});try{pythonProcess['stdin'][_0x48b910(0x164)](_0x1454a8+'\x0a');}catch(_0x2a8715){}}function handleResult(_0x130c00,_0x85042){const _0x26a1bf=a4_0x2ad7ca;if(_0x85042[_0x26a1bf(0x195)]===_0x26a1bf(0x143))_0x130c00['log'][_0x26a1bf(0x170)](_0x26a1bf(0x194));else{if(_0x85042[_0x26a1bf(0x195)]===_0x26a1bf(0x198)){const {anomaly_score:_0x37eac8,is_anomaly:_0x10b6dd,threshold:_0xa62a21,explanation:_0x1c5cdf}=_0x85042['payload'];_0x130c00['setStateAsync'](_0x26a1bf(0x156),{'val':_0x37eac8,'ack':!![]}),_0x130c00[_0x26a1bf(0x15d)]('analysis.security.lastCheck',{'val':new Date()[_0x26a1bf(0x178)](),'ack':!![]});if(_0xa62a21)_0x130c00['setStateAsync'](_0x26a1bf(0x165),{'val':_0xa62a21,'ack':!![]});if(_0x10b6dd){let _0x2a4d91=_0x26a1bf(0x171)+_0x37eac8[_0x26a1bf(0x176)](0x4)+')';if(_0x1c5cdf&&_0x1c5cdf!==_0x26a1bf(0x173))_0x2a4d91+=_0x26a1bf(0x147)+_0x1c5cdf;_0x130c00['setStateAsync'](_0x26a1bf(0x160),{'val':!![],'ack':!![]}),_0x130c00[_0x26a1bf(0x15d)](_0x26a1bf(0x192),{'val':_0x2a4d91,'ack':!![]}),setup[_0x26a1bf(0x199)](_0x130c00,_0x26a1bf(0x15e)+_0x2a4d91,![],!![]);}}else{if(_0x85042[_0x26a1bf(0x195)]===_0x26a1bf(0x18c)){const _0x3d1f33=_0x85042[_0x26a1bf(0x13b)][_0x26a1bf(0x187)]||'',_0x205b81=_0x85042[_0x26a1bf(0x13b)][_0x26a1bf(0x16f)],_0x450ddf=_0x85042['payload'][_0x26a1bf(0x18d)]?_0x26a1bf(0x174)+new Date()[_0x26a1bf(0x145)]()+'\x20('+_0x3d1f33+')':'Failed:\x20'+_0x85042[_0x26a1bf(0x13b)][_0x26a1bf(0x183)];_0x130c00['setStateAsync'](_0x26a1bf(0x154),{'val':_0x450ddf,'ack':!![]});if(_0x85042['payload'][_0x26a1bf(0x18d)]&&_0x205b81)_0x130c00[_0x26a1bf(0x15d)](_0x26a1bf(0x165),{'val':_0x205b81,'ack':!![]});}else{if(_0x85042[_0x26a1bf(0x195)]===_0x26a1bf(0x150)){if(_0x85042[_0x26a1bf(0x13b)][_0x26a1bf(0x18d)])try{const _0xa3fd24=JSON['parse'](_0x85042[_0x26a1bf(0x13b)][_0x26a1bf(0x187)]);if(_0xa3fd24[_0x26a1bf(0x177)])_0x130c00['setStateAsync'](_0x26a1bf(0x13e),{'val':JSON[_0x26a1bf(0x167)](_0xa3fd24['insulation']),'ack':!![]});if(_0xa3fd24['heating'])_0x130c00[_0x26a1bf(0x15d)](_0x26a1bf(0x140),{'val':JSON[_0x26a1bf(0x167)](_0xa3fd24[_0x26a1bf(0x193)]),'ack':!![]});}catch(_0xdc84fd){}}else{if(_0x85042[_0x26a1bf(0x195)]===_0x26a1bf(0x18a)){if(_0x85042['payload'][_0x26a1bf(0x18d)])_0x130c00[_0x26a1bf(0x196)][_0x26a1bf(0x188)](_0x26a1bf(0x191));}else{if(_0x85042[_0x26a1bf(0x195)]===_0x26a1bf(0x14a))_0x130c00[_0x26a1bf(0x15d)](_0x26a1bf(0x168),{'val':new Date()[_0x26a1bf(0x178)](),'ack':!![]}),_0x130c00[_0x26a1bf(0x15d)](_0x26a1bf(0x15c),{'val':_0x85042[_0x26a1bf(0x13b)][_0x26a1bf(0x186)],'ack':!![]});else{if(_0x85042[_0x26a1bf(0x195)]===_0x26a1bf(0x146)){const {speed_trend:_0x36f019}=_0x85042[_0x26a1bf(0x13b)];if(_0x36f019!==undefined)_0x130c00[_0x26a1bf(0x15d)](_0x26a1bf(0x14c),{'val':_0x36f019,'ack':!![]});}else{if(_0x85042['type']===_0x26a1bf(0x13c)){const {forecast:_0x5be162}=_0x85042[_0x26a1bf(0x13b)];if(_0x5be162)_0x130c00[_0x26a1bf(0x15d)](_0x26a1bf(0x17e),{'val':JSON['stringify'](_0x5be162),'ack':!![]});}else{if(_0x85042[_0x26a1bf(0x195)]===_0x26a1bf(0x166)){const {times:_0xe46a55}=_0x85042[_0x26a1bf(0x13b)];if(_0xe46a55)_0x130c00[_0x26a1bf(0x15d)]('analysis.energy.warmupTimes',{'val':JSON[_0x26a1bf(0x167)](_0xe46a55),'ack':!![]});}else{if(_0x85042[_0x26a1bf(0x195)]==='PINN_PREDICT_RESULT'){const {forecast:_0x3a4e10}=_0x85042['payload'];if(_0x3a4e10)_0x130c00[_0x26a1bf(0x15d)]('analysis.energy.pinnForecast',{'val':JSON['stringify'](_0x3a4e10),'ack':!![]});}else{if(_0x85042['type']===_0x26a1bf(0x180)){const {alerts:_0x21ba4f}=_0x85042[_0x26a1bf(0x13b)];if(_0x21ba4f)_0x130c00['setStateAsync'](_0x26a1bf(0x169),{'val':JSON[_0x26a1bf(0x167)](_0x21ba4f),'ack':!![]});}else{if(_0x85042['type']===_0x26a1bf(0x161)){const {proposals:_0x188f2a}=_0x85042[_0x26a1bf(0x13b)];_0x130c00[_0x26a1bf(0x18e)](_0x26a1bf(0x158),(_0x5e7494,_0x458c3d)=>{const _0x38f251=_0x26a1bf;_0x458c3d&&_0x458c3d[_0x38f251(0x16a)]===!![]&&_0x188f2a&&_0x188f2a[_0x38f251(0x181)]>0x0&&automation['applyEnergySavings'](_0x130c00,_0x188f2a);});}else{if(_0x85042['type']===_0x26a1bf(0x182)){const {room:_0x57a0ce,propagation:_0x355054}=_0x85042['payload'];let _0x4cdfaf=_0x26a1bf(0x173),_0x6dcb95=0x0;if(_0x355054){const _0x4d1dd2=Object[_0x26a1bf(0x144)](_0x355054);_0x4d1dd2[_0x26a1bf(0x181)]>0x0&&(_0x4cdfaf=_0x4d1dd2[0x0][0x0],_0x6dcb95=_0x4d1dd2[0x0][0x1]);}_0x130c00['setStateAsync'](_0x26a1bf(0x17f),{'val':_0x4cdfaf,'ack':!![]}),_0x130c00[_0x26a1bf(0x15d)]('analysis.prediction.confidence',{'val':_0x6dcb95,'ack':!![]}),automation[_0x26a1bf(0x13f)](_0x130c00,_0x4cdfaf,_0x6dcb95);}else{if(_0x85042[_0x26a1bf(0x195)]===_0x26a1bf(0x15a)){const {probabilities:_0x472ceb}=_0x85042['payload'];if(_0x472ceb){_0x130c00[_0x26a1bf(0x15d)](_0x26a1bf(0x14d),{'val':JSON['stringify'](_0x472ceb),'ack':!![]});const _0x5dcdc6=Object[_0x26a1bf(0x14b)](_0x472ceb);if(_0x5dcdc6['length']>0x0){const _0x487142=_0x5dcdc6[0x0],_0x4f770c=_0x472ceb[_0x487142];_0x130c00[_0x26a1bf(0x15d)](_0x26a1bf(0x16b),{'val':_0x487142,'ack':!![]}),_0x130c00[_0x26a1bf(0x15d)](_0x26a1bf(0x155),{'val':_0x4f770c,'ack':!![]});}}}else{if(_0x85042['type']===_0x26a1bf(0x14f)){const {patterns:_0x16e8e0}=_0x85042['payload'];if(_0x16e8e0&&_0x16e8e0[_0x26a1bf(0x181)]>0x0)_0x130c00['setStateAsync']('analysis.automation.detectedPatterns',{'val':JSON[_0x26a1bf(0x167)](_0x16e8e0),'ack':!![]});}}}}}}}}}}}}}}}}function startService(_0x2bd49b,_0x487974){const _0x1823c4=a4_0x2ad7ca;let _0x29a92a=_0x1823c4(0x13d);if(fs[_0x1823c4(0x14e)](_0x487974))_0x29a92a=_0x487974;try{const _0x28c77b=path[_0x1823c4(0x152)](__dirname,'..',_0x1823c4(0x16c),_0x1823c4(0x17b));pythonProcess=spawn(_0x29a92a,[_0x28c77b]),pythonProcess['stdout']['on']('data',_0x3c8c80=>{const _0xca3d5d=_0x1823c4,_0x272d8d=_0x3c8c80['toString']()[_0xca3d5d(0x142)]('\x0a');_0x272d8d[_0xca3d5d(0x162)](_0x393a25=>{const _0x282ec4=_0xca3d5d,_0x3df02c=_0x393a25[_0x282ec4(0x15b)]();if(!_0x3df02c)return;if(_0x3df02c[_0x282ec4(0x184)](_0x282ec4(0x159)))_0x2bd49b['log']['debug'](_0x282ec4(0x189)+_0x3df02c[_0x282ec4(0x179)](0x5)[_0x282ec4(0x15b)]());else{if(_0x3df02c[_0x282ec4(0x184)](_0x282ec4(0x17c)))try{const _0x59dfd2=JSON[_0x282ec4(0x157)](_0x3df02c[_0x282ec4(0x179)](0x8)['trim']());handleResult(_0x2bd49b,_0x59dfd2);}catch(_0xe2ec72){}}});}),pythonProcess['on'](_0x1823c4(0x163),_0x1cac0f=>{pythonProcess=null;}),_0x2bd49b['sendToPythonWrapper']=(_0x4dc05f,_0xa2c1ea)=>send(_0x2bd49b,_0x4dc05f,_0xa2c1ea);}catch(_0x1e7473){_0x2bd49b['log']['error'](_0x1823c4(0x16e)+_0x1e7473[_0x1823c4(0x148)]);}}function a4_0x1b80(_0x13029c,_0x3060cd){const _0x5e768f=a4_0x1b91();return a4_0x1b80=function(_0x47793a,_0x56c8fa){_0x47793a=_0x47793a-0x13a;let _0x1b917a=_0x5e768f[_0x47793a];return _0x1b917a;},a4_0x1b80(_0x13029c,_0x3060cd);}function stopService(_0x5a479f){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x5775f4){}pythonProcess=null;}}module[a4_0x2ad7ca(0x18f)]={'startService':startService,'stopService':stopService,'send':send};