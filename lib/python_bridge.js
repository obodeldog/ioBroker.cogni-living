const a4_0x248816=a4_0x3424;(function(_0x296586,_0x41def3){const _0x24eab1=a4_0x3424,_0x53155c=_0x296586();while(!![]){try{const _0x15cab5=parseInt(_0x24eab1(0x1a2))/0x1+parseInt(_0x24eab1(0x1bf))/0x2+-parseInt(_0x24eab1(0x194))/0x3+-parseInt(_0x24eab1(0x1cf))/0x4+parseInt(_0x24eab1(0x1b1))/0x5+-parseInt(_0x24eab1(0x1da))/0x6+-parseInt(_0x24eab1(0x18e))/0x7*(-parseInt(_0x24eab1(0x1e3))/0x8);if(_0x15cab5===_0x41def3)break;else _0x53155c['push'](_0x53155c['shift']());}catch(_0x1c5a5e){_0x53155c['push'](_0x53155c['shift']());}}}(a4_0x2a84,0xa7418));const a4_0xde98af=(function(){let _0x498044=!![];return function(_0x980617,_0x36a77f){const _0x29143f=_0x498044?function(){const _0x59e6d7=a4_0x3424;if(_0x36a77f){const _0x321089=_0x36a77f[_0x59e6d7(0x1a0)](_0x980617,arguments);return _0x36a77f=null,_0x321089;}}:function(){};return _0x498044=![],_0x29143f;};}()),a4_0x16a80c=a4_0xde98af(this,function(){const _0x226677=a4_0x3424;return a4_0x16a80c[_0x226677(0x1c2)]()[_0x226677(0x1be)](_0x226677(0x1b4))['toString']()[_0x226677(0x198)](a4_0x16a80c)[_0x226677(0x1be)](_0x226677(0x1b4));});a4_0x16a80c();'use strict';function a4_0x2a84(){const _0x159e5a=['constructor','analysis.health.trendValue','debug','toLocaleTimeString','analysis.automation.detectedPatterns','reason','analysis.energy.forecast','toISOString','apply','payload','570335xtNXvX','âœ…\x20HEALTH\x20TRAINED.','message','diagnosis','\x20->\x20','join','TRAINING_COMPLETE','rule','error','python_service','exports','path','split','kill','type','1447720bTGWBc','forEach','PONG','(((.+)+)+)+$','[PYTHON]\x20','parse','TOPOLOGY_RESULT','Regel\x20erkannt:\x20','success','stdout','details','sendNotification','analysis.security.lastCheck','search','2664032YObYIa','confidence','analysis.isAlert','toString','stringify','Unknown','./automation','analysis.security.lastScore','ENERGY_TRAIN_RESULT','child_process','substring','python3','analysis.energy.heatingScore','handlePrediction','analysis.automation.patternDetected','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','2222068EtRDVn','startsWith','info','analysis.prediction.confidence','\x20->\x20Likely\x20','GAIT_RESULT','analysis.health.lastCheck','length','TOPOLOGY_ACK','writable','heating','6736026JglDYe','SIGNAL_RESULT','analysis.health.isAnomaly','ðŸ\x20Python\x20confirmed\x20new\x20topology.','ðŸ”®\x20Prediction:\x20From\x20','log','trim','change_percent','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','18152VgBNcQ','close','âš ï¸\x20SECURITY\x20ALARM:\x20','analysis.security.topologyMatrix','COMFORT_RESULT','threshold','Error\x20launching\x20Python:\x20','HEALTH_TRAIN_RESULT','[RESULT]','analysis.alertReason','stdin','data','[LOG]','SECURITY_RESULT','TREND_RESULT','4718OTjGPs','setStateAsync','entries','\x0aGrund:\x20','is_anomaly','toFixed','4073799iNxtfs','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','analysis.security.currentThreshold','ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.'];a4_0x2a84=function(){return _0x159e5a;};return a4_0x2a84();}const {spawn}=require(a4_0x248816(0x1c8)),path=require(a4_0x248816(0x1ad)),fs=require('fs'),setup=require('./setup'),automation=require(a4_0x248816(0x1c5));let pythonProcess=null;function send(_0xf1041c,_0x468a7e,_0x511d21={}){const _0x129588=a4_0x248816;if(!pythonProcess||!pythonProcess['stdin'][_0x129588(0x1d8)])return;const _0x22893f=JSON[_0x129588(0x1c3)]({'command':_0x468a7e,..._0x511d21});try{pythonProcess[_0x129588(0x189)]['write'](_0x22893f+'\x0a');}catch(_0x51715a){}}function handleResult(_0x35f2fb,_0x4789d9){const _0x5769b6=a4_0x248816;if(_0x4789d9[_0x5769b6(0x1b0)]===_0x5769b6(0x1b3))_0x35f2fb[_0x5769b6(0x1df)]['debug']('ðŸ\x20Python\x20Pong');else{if(_0x4789d9[_0x5769b6(0x1b0)]===_0x5769b6(0x18c)){const {anomaly_score:_0x302ede,is_anomaly:_0xb6af7b,threshold:_0x59a9f9,explanation:_0x337c2a}=_0x4789d9[_0x5769b6(0x1a1)];_0x35f2fb[_0x5769b6(0x1df)][_0x5769b6(0x1d1)](_0x5769b6(0x1ce)+_0x302ede[_0x5769b6(0x193)](0x5)+_0x5769b6(0x1a6)+(_0xb6af7b?'ANOMALY':'OK')),_0x35f2fb['setStateAsync'](_0x5769b6(0x1c6),{'val':_0x302ede,'ack':!![]}),_0x35f2fb['setStateAsync'](_0x5769b6(0x1bd),{'val':new Date()[_0x5769b6(0x19f)](),'ack':!![]});if(_0x59a9f9)_0x35f2fb[_0x5769b6(0x18f)]('analysis.security.currentThreshold',{'val':_0x59a9f9,'ack':!![]});if(_0xb6af7b){let _0x4a1bb0=_0x5769b6(0x195)+_0x302ede[_0x5769b6(0x193)](0x4)+')';if(_0x337c2a&&_0x337c2a!==_0x5769b6(0x1c4))_0x4a1bb0+=_0x5769b6(0x191)+_0x337c2a;_0x35f2fb['setStateAsync'](_0x5769b6(0x1c1),{'val':!![],'ack':!![]}),_0x35f2fb[_0x5769b6(0x18f)](_0x5769b6(0x188),{'val':_0x4a1bb0,'ack':!![]}),setup[_0x5769b6(0x1bc)](_0x35f2fb,_0x5769b6(0x1e5)+_0x4a1bb0,![],!![]);}}else{if(_0x4789d9[_0x5769b6(0x1b0)]===_0x5769b6(0x1a8)){const _0x167df8=_0x4789d9['payload'][_0x5769b6(0x1bb)]||'',_0x33bf14=_0x4789d9['payload'][_0x5769b6(0x184)],_0x4f0b7b=_0x4789d9[_0x5769b6(0x1a1)][_0x5769b6(0x1b9)]?'Success:\x20'+new Date()[_0x5769b6(0x19b)]()+'\x20('+_0x167df8+')':'Failed:\x20'+_0x4789d9[_0x5769b6(0x1a1)][_0x5769b6(0x19d)];_0x35f2fb[_0x5769b6(0x18f)]('analysis.training.status',{'val':_0x4f0b7b,'ack':!![]});if(_0x4789d9[_0x5769b6(0x1a1)][_0x5769b6(0x1b9)]&&_0x33bf14)_0x35f2fb[_0x5769b6(0x18f)](_0x5769b6(0x196),{'val':_0x33bf14,'ack':!![]});}else{if(_0x4789d9['type']===_0x5769b6(0x183)){const {patterns:_0x561dea}=_0x4789d9['payload'];if(_0x561dea&&_0x561dea[_0x5769b6(0x1d6)]>0x0){_0x35f2fb['log'][_0x5769b6(0x1d1)](_0x5769b6(0x1e2)+_0x561dea[_0x5769b6(0x1d6)]+'\x20new\x20patterns.'),_0x35f2fb['setStateAsync'](_0x5769b6(0x19c),{'val':JSON[_0x5769b6(0x1c3)](_0x561dea),'ack':!![]});const _0x292e0e=_0x561dea[0x0],_0x525637=_0x5769b6(0x1b8)+_0x292e0e[_0x5769b6(0x1a9)]+'\x20('+(_0x292e0e[_0x5769b6(0x1c0)]*0x64)[_0x5769b6(0x193)](0x0)+'%)';_0x35f2fb['setStateAsync'](_0x5769b6(0x1cd),{'val':!![],'ack':!![]}),_0x35f2fb[_0x5769b6(0x18f)]('analysis.automation.description',{'val':_0x525637,'ack':!![]});}else _0x35f2fb[_0x5769b6(0x1df)]['info']('ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.'),_0x35f2fb[_0x5769b6(0x18f)](_0x5769b6(0x1cd),{'val':![],'ack':!![]}),_0x35f2fb[_0x5769b6(0x18f)](_0x5769b6(0x19c),{'val':'[]','ack':!![]});}else{if(_0x4789d9[_0x5769b6(0x1b0)]===_0x5769b6(0x1c7)){if(_0x4789d9[_0x5769b6(0x1a1)][_0x5769b6(0x1b9)])try{const _0x55cc5e=JSON[_0x5769b6(0x1b6)](_0x4789d9[_0x5769b6(0x1a1)][_0x5769b6(0x1bb)]);if(_0x55cc5e['insulation'])_0x35f2fb[_0x5769b6(0x18f)]('analysis.energy.insulationScore',{'val':JSON[_0x5769b6(0x1c3)](_0x55cc5e['insulation']),'ack':!![]});if(_0x55cc5e[_0x5769b6(0x1d9)])_0x35f2fb[_0x5769b6(0x18f)](_0x5769b6(0x1cb),{'val':JSON[_0x5769b6(0x1c3)](_0x55cc5e[_0x5769b6(0x1d9)]),'ack':!![]});}catch(_0x28124e){}}else{if(_0x4789d9[_0x5769b6(0x1b0)]===_0x5769b6(0x186)){if(_0x4789d9['payload'][_0x5769b6(0x1b9)])_0x35f2fb[_0x5769b6(0x1df)][_0x5769b6(0x1d1)](_0x5769b6(0x1a3));}else{if(_0x4789d9[_0x5769b6(0x1b0)]==='HEALTH_RESULT')_0x35f2fb[_0x5769b6(0x18f)](_0x5769b6(0x1d5),{'val':new Date()[_0x5769b6(0x19f)](),'ack':!![]}),_0x35f2fb[_0x5769b6(0x18f)](_0x5769b6(0x1dc),{'val':_0x4789d9[_0x5769b6(0x1a1)][_0x5769b6(0x192)],'ack':!![]});else{if(_0x4789d9[_0x5769b6(0x1b0)]===_0x5769b6(0x18d))_0x35f2fb[_0x5769b6(0x18f)]('analysis.health.trendDiagnosis',{'val':_0x4789d9[_0x5769b6(0x1a1)][_0x5769b6(0x1a5)],'ack':!![]}),_0x35f2fb['setStateAsync'](_0x5769b6(0x199),{'val':_0x4789d9[_0x5769b6(0x1a1)][_0x5769b6(0x1e1)],'ack':!![]});else{if(_0x4789d9[_0x5769b6(0x1b0)]===_0x5769b6(0x1d4)){const {speed_trend:_0x103334}=_0x4789d9[_0x5769b6(0x1a1)];if(_0x103334!==undefined)_0x35f2fb[_0x5769b6(0x18f)]('analysis.health.gaitSpeed',{'val':_0x103334,'ack':!![]});}else{if(_0x4789d9[_0x5769b6(0x1b0)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x54ea52}=_0x4789d9[_0x5769b6(0x1a1)];if(_0x54ea52)_0x35f2fb[_0x5769b6(0x18f)](_0x5769b6(0x19e),{'val':JSON[_0x5769b6(0x1c3)](_0x54ea52),'ack':!![]});}else{if(_0x4789d9[_0x5769b6(0x1b0)]===_0x5769b6(0x1b7)){const {data:_0x3748e8}=_0x4789d9['payload'];_0x3748e8&&(_0x35f2fb[_0x5769b6(0x1df)]['info'](_0x5769b6(0x197)),_0x35f2fb[_0x5769b6(0x18f)](_0x5769b6(0x182),{'val':JSON[_0x5769b6(0x1c3)](_0x3748e8),'ack':!![]}));}else{if(_0x4789d9[_0x5769b6(0x1b0)]===_0x5769b6(0x1d7))_0x35f2fb[_0x5769b6(0x1df)]['debug'](_0x5769b6(0x1dd));else{if(_0x4789d9[_0x5769b6(0x1b0)]===_0x5769b6(0x1db)){const {room:_0x2d7abc,propagation:_0x56e94e}=_0x4789d9['payload'];let _0x430efc=_0x5769b6(0x1c4),_0x2a5a12=0x0;if(_0x56e94e){const _0x19cd9d=Object[_0x5769b6(0x190)](_0x56e94e);_0x19cd9d[_0x5769b6(0x1d6)]>0x0&&(_0x430efc=_0x19cd9d[0x0][0x0],_0x2a5a12=_0x19cd9d[0x0][0x1]);}_0x35f2fb[_0x5769b6(0x18f)]('analysis.prediction.nextRoom',{'val':_0x430efc,'ack':!![]}),_0x35f2fb[_0x5769b6(0x18f)](_0x5769b6(0x1d2),{'val':_0x2a5a12,'ack':!![]}),_0x2a5a12>0.4&&_0x35f2fb[_0x5769b6(0x1df)][_0x5769b6(0x19a)](_0x5769b6(0x1de)+_0x2d7abc+_0x5769b6(0x1d3)+_0x430efc+'\x20('+(_0x2a5a12*0x64)[_0x5769b6(0x193)](0x0)+'%)'),automation[_0x5769b6(0x1cc)](_0x35f2fb,_0x430efc,_0x2a5a12);}}}}}}}}}}}}}}function a4_0x3424(_0x22837d,_0x1965c9){const _0x591d61=a4_0x2a84();return a4_0x3424=function(_0x16a80c,_0xde98af){_0x16a80c=_0x16a80c-0x182;let _0x2a84ae=_0x591d61[_0x16a80c];return _0x2a84ae;},a4_0x3424(_0x22837d,_0x1965c9);}function startService(_0x2c955a,_0x170833){const _0x306237=a4_0x248816;let _0x25cb02=_0x306237(0x1ca);if(fs['existsSync'](_0x170833))_0x25cb02=_0x170833;try{const _0x1081f4=path[_0x306237(0x1a7)](__dirname,'..',_0x306237(0x1ab),'service.py');pythonProcess=spawn(_0x25cb02,[_0x1081f4]),pythonProcess[_0x306237(0x1ba)]['on'](_0x306237(0x18a),_0x2f5e8c=>{const _0x5b72db=_0x306237,_0x563262=_0x2f5e8c[_0x5b72db(0x1c2)]()[_0x5b72db(0x1ae)]('\x0a');_0x563262[_0x5b72db(0x1b2)](_0x557b86=>{const _0x313e5b=_0x5b72db,_0x25d659=_0x557b86[_0x313e5b(0x1e0)]();if(!_0x25d659)return;if(_0x25d659[_0x313e5b(0x1d0)](_0x313e5b(0x18b)))_0x2c955a[_0x313e5b(0x1df)][_0x313e5b(0x19a)](_0x313e5b(0x1b5)+_0x25d659['substring'](0x5)[_0x313e5b(0x1e0)]());else{if(_0x25d659[_0x313e5b(0x1d0)](_0x313e5b(0x187)))try{const _0x5bf186=JSON['parse'](_0x25d659[_0x313e5b(0x1c9)](0x8)[_0x313e5b(0x1e0)]());handleResult(_0x2c955a,_0x5bf186);}catch(_0x222978){}}});}),pythonProcess['on'](_0x306237(0x1e4),_0x309834=>{pythonProcess=null;}),_0x2c955a['sendToPythonWrapper']=(_0x5e92db,_0x51cac8)=>send(_0x2c955a,_0x5e92db,_0x51cac8);}catch(_0x4d6626){_0x2c955a['log'][_0x306237(0x1aa)](_0x306237(0x185)+_0x4d6626[_0x306237(0x1a4)]);}}function stopService(_0x84fafe){const _0x591882=a4_0x248816;if(pythonProcess){try{pythonProcess[_0x591882(0x1af)]();}catch(_0xa793c4){}pythonProcess=null;}}module[a4_0x248816(0x1ac)]={'startService':startService,'stopService':stopService,'send':send};