const a4_0x1d42ba=a4_0xa5d6;function a4_0x3444(){const _0x922fa7=['toLocaleTimeString','./automation','HEALTH_TRAIN_RESULT','heating','analysis.prediction.trackerState','parse','analysis.security.lastCheck','startsWith','analysis.isAlert','Failed:\x20','239421ZQXCQd','analysis.energy.pinnForecast','36063vTHksj','analysis.energy.insulationScore','type','analysis.energy.ventilationAlerts','message','analysis.health.gaitSpeed','5XSanea','debug','analysis.security.lastScore','error','ðŸ\x20Python\x20Pong','data','stdout','analysis.health.lastCheck','threshold','python3','ENERGY_TRAIN_RESULT','analysis.security.currentThreshold','âœ…\x20HEALTH\x20TRAINED.','forEach','exports','val','analysis.energy.mpcActive','GAIT_RESULT','stringify','writable','python_service','38748OutGfl','HEALTH_RESULT','is_anomaly','sendToPythonWrapper','analysis.prediction.trackerTopRoom','./setup','PINN_PREDICT_RESULT','Success:\x20','sendNotification','details','analysis.prediction.trackerConfidence','split','WARMUP_RESULT','523900BjXYXI','toISOString','Error\x20launching\x20Python:\x20','length','6012000IUkQoN','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','applyEnergySavings','SECURITY_RESULT','52ruZfBj','toString','close','analysis.prediction.nextRoom','log','analysis.health.isAnomaly','payload','insulation','success','analysis.automation.detectedPatterns','info','(((.+)+)+)+$','[LOG]','ENERGY_OPTIMIZE_RESULT','reason','Unknown','search','36092WDVrCM','analysis.energy.heatingScore','2376872sENiwC','join','analysis.energy.forecast','substring','keys','setStateAsync','âš ï¸\x20SECURITY\x20ALARM:\x20','stdin','constructor','trim'];a4_0x3444=function(){return _0x922fa7;};return a4_0x3444();}(function(_0x25db3e,_0x400ffe){const _0x313f23=a4_0xa5d6,_0x7fa57b=_0x25db3e();while(!![]){try{const _0xf010de=parseInt(_0x313f23(0xb3))/0x1+-parseInt(_0x313f23(0x84))/0x2+-parseInt(_0x313f23(0xb5))/0x3*(parseInt(_0x313f23(0x8c))/0x4)+-parseInt(_0x313f23(0xbb))/0x5*(parseInt(_0x313f23(0x77))/0x6)+-parseInt(_0x313f23(0x9d))/0x7+-parseInt(_0x313f23(0x9f))/0x8+parseInt(_0x313f23(0x88))/0x9;if(_0xf010de===_0x400ffe)break;else _0x7fa57b['push'](_0x7fa57b['shift']());}catch(_0x55d033){_0x7fa57b['push'](_0x7fa57b['shift']());}}}(a4_0x3444,0x2c0fb));const a4_0x1df224=(function(){let _0x124a6a=!![];return function(_0x2cc9f9,_0x506280){const _0x4f394b=_0x124a6a?function(){if(_0x506280){const _0x50334f=_0x506280['apply'](_0x2cc9f9,arguments);return _0x506280=null,_0x50334f;}}:function(){};return _0x124a6a=![],_0x4f394b;};}()),a4_0x517818=a4_0x1df224(this,function(){const _0x3f982a=a4_0xa5d6;return a4_0x517818[_0x3f982a(0x8d)]()['search'](_0x3f982a(0x97))[_0x3f982a(0x8d)]()[_0x3f982a(0xa7)](a4_0x517818)[_0x3f982a(0x9c)](_0x3f982a(0x97));});a4_0x517818();'use strict';const {spawn}=require('child_process'),path=require('path'),fs=require('fs'),setup=require(a4_0x1d42ba(0x7c)),automation=require(a4_0x1d42ba(0xaa));let pythonProcess=null;function a4_0xa5d6(_0x1bc604,_0x55fab6){const _0x7e7487=a4_0x3444();return a4_0xa5d6=function(_0x517818,_0x1df224){_0x517818=_0x517818-0x74;let _0x344466=_0x7e7487[_0x517818];return _0x344466;},a4_0xa5d6(_0x1bc604,_0x55fab6);}function send(_0x58e87b,_0x519140,_0x5d2a8a={}){const _0x4bff39=a4_0x1d42ba;if(!pythonProcess||!pythonProcess[_0x4bff39(0xa6)][_0x4bff39(0x75)])return;const _0x596419=JSON[_0x4bff39(0x74)]({'command':_0x519140,..._0x5d2a8a});try{pythonProcess[_0x4bff39(0xa6)]['write'](_0x596419+'\x0a');}catch(_0x7aa56a){}}function handleResult(_0x114f5a,_0x2054ce){const _0x2b633f=a4_0x1d42ba;if(_0x2054ce[_0x2b633f(0xb7)]==='PONG')_0x114f5a[_0x2b633f(0x90)]['debug'](_0x2b633f(0xbf));else{if(_0x2054ce[_0x2b633f(0xb7)]===_0x2b633f(0x8b)){const {anomaly_score:_0x577c68,is_anomaly:_0x2ebbd4,threshold:_0x4edbc1,explanation:_0x5f260b}=_0x2054ce[_0x2b633f(0x92)];_0x114f5a[_0x2b633f(0xa4)](_0x2b633f(0xbd),{'val':_0x577c68,'ack':!![]}),_0x114f5a[_0x2b633f(0xa4)](_0x2b633f(0xaf),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x4edbc1)_0x114f5a[_0x2b633f(0xa4)](_0x2b633f(0xc6),{'val':_0x4edbc1,'ack':!![]});if(_0x2ebbd4){let _0x2df96a=_0x2b633f(0x89)+_0x577c68['toFixed'](0x4)+')';if(_0x5f260b&&_0x5f260b!==_0x2b633f(0x9b))_0x2df96a+='\x0aGrund:\x20'+_0x5f260b;_0x114f5a[_0x2b633f(0xa4)](_0x2b633f(0xb1),{'val':!![],'ack':!![]}),_0x114f5a[_0x2b633f(0xa4)]('analysis.alertReason',{'val':_0x2df96a,'ack':!![]}),setup[_0x2b633f(0x7f)](_0x114f5a,_0x2b633f(0xa5)+_0x2df96a,![],!![]);}}else{if(_0x2054ce[_0x2b633f(0xb7)]==='TRAINING_COMPLETE'){const _0x2c3a07=_0x2054ce[_0x2b633f(0x92)][_0x2b633f(0x80)]||'',_0x435571=_0x2054ce[_0x2b633f(0x92)][_0x2b633f(0xc3)],_0x4f4150=_0x2054ce['payload']['success']?_0x2b633f(0x7e)+new Date()[_0x2b633f(0xa9)]()+'\x20('+_0x2c3a07+')':_0x2b633f(0xb2)+_0x2054ce[_0x2b633f(0x92)][_0x2b633f(0x9a)];_0x114f5a[_0x2b633f(0xa4)]('analysis.training.status',{'val':_0x4f4150,'ack':!![]});if(_0x2054ce[_0x2b633f(0x92)][_0x2b633f(0x94)]&&_0x435571)_0x114f5a[_0x2b633f(0xa4)]('analysis.security.currentThreshold',{'val':_0x435571,'ack':!![]});}else{if(_0x2054ce[_0x2b633f(0xb7)]===_0x2b633f(0xc5)){if(_0x2054ce[_0x2b633f(0x92)][_0x2b633f(0x94)])try{const _0x4d6877=JSON[_0x2b633f(0xae)](_0x2054ce[_0x2b633f(0x92)]['details']);if(_0x4d6877[_0x2b633f(0x93)])_0x114f5a['setStateAsync'](_0x2b633f(0xb6),{'val':JSON['stringify'](_0x4d6877[_0x2b633f(0x93)]),'ack':!![]});if(_0x4d6877[_0x2b633f(0xac)])_0x114f5a[_0x2b633f(0xa4)](_0x2b633f(0x9e),{'val':JSON[_0x2b633f(0x74)](_0x4d6877[_0x2b633f(0xac)]),'ack':!![]});}catch(_0x331cb2){}}else{if(_0x2054ce[_0x2b633f(0xb7)]===_0x2b633f(0xab)){if(_0x2054ce[_0x2b633f(0x92)][_0x2b633f(0x94)])_0x114f5a[_0x2b633f(0x90)][_0x2b633f(0x96)](_0x2b633f(0xc7));}else{if(_0x2054ce[_0x2b633f(0xb7)]===_0x2b633f(0x78))_0x114f5a[_0x2b633f(0xa4)](_0x2b633f(0xc2),{'val':new Date()[_0x2b633f(0x85)](),'ack':!![]}),_0x114f5a[_0x2b633f(0xa4)](_0x2b633f(0x91),{'val':_0x2054ce[_0x2b633f(0x92)][_0x2b633f(0x79)],'ack':!![]});else{if(_0x2054ce[_0x2b633f(0xb7)]===_0x2b633f(0xcc)){const {speed_trend:_0x1328c4}=_0x2054ce[_0x2b633f(0x92)];if(_0x1328c4!==undefined)_0x114f5a[_0x2b633f(0xa4)](_0x2b633f(0xba),{'val':_0x1328c4,'ack':!![]});}else{if(_0x2054ce['type']==='ENERGY_PREDICT_RESULT'){const {forecast:_0x5abf9d}=_0x2054ce[_0x2b633f(0x92)];if(_0x5abf9d)_0x114f5a['setStateAsync'](_0x2b633f(0xa1),{'val':JSON[_0x2b633f(0x74)](_0x5abf9d),'ack':!![]});}else{if(_0x2054ce[_0x2b633f(0xb7)]===_0x2b633f(0x83)){const {times:_0x512113}=_0x2054ce[_0x2b633f(0x92)];if(_0x512113)_0x114f5a[_0x2b633f(0xa4)]('analysis.energy.warmupTimes',{'val':JSON[_0x2b633f(0x74)](_0x512113),'ack':!![]});}else{if(_0x2054ce['type']===_0x2b633f(0x7d)){const {forecast:_0x395984}=_0x2054ce[_0x2b633f(0x92)];if(_0x395984)_0x114f5a['setStateAsync'](_0x2b633f(0xb4),{'val':JSON[_0x2b633f(0x74)](_0x395984),'ack':!![]});}else{if(_0x2054ce[_0x2b633f(0xb7)]==='VENTILATION_ALERT'){const {alerts:_0x58b6b8}=_0x2054ce[_0x2b633f(0x92)];if(_0x58b6b8)_0x114f5a[_0x2b633f(0xa4)](_0x2b633f(0xb8),{'val':JSON[_0x2b633f(0x74)](_0x58b6b8),'ack':!![]});}else{if(_0x2054ce['type']===_0x2b633f(0x99)){const {proposals:_0x18a30f}=_0x2054ce[_0x2b633f(0x92)];_0x114f5a['getState'](_0x2b633f(0xcb),(_0x3b4373,_0x3a2a80)=>{const _0x250991=_0x2b633f;_0x3a2a80&&_0x3a2a80[_0x250991(0xca)]===!![]&&_0x18a30f&&_0x18a30f[_0x250991(0x87)]>0x0&&automation[_0x250991(0x8a)](_0x114f5a,_0x18a30f);});}else{if(_0x2054ce[_0x2b633f(0xb7)]==='SIGNAL_RESULT'){const {room:_0x1761a1,propagation:_0x542b0b}=_0x2054ce[_0x2b633f(0x92)];let _0x111716=_0x2b633f(0x9b),_0x5015a1=0x0;if(_0x542b0b){const _0x9de74c=Object['entries'](_0x542b0b);_0x9de74c[_0x2b633f(0x87)]>0x0&&(_0x111716=_0x9de74c[0x0][0x0],_0x5015a1=_0x9de74c[0x0][0x1]);}_0x114f5a[_0x2b633f(0xa4)](_0x2b633f(0x8f),{'val':_0x111716,'ack':!![]}),_0x114f5a[_0x2b633f(0xa4)]('analysis.prediction.confidence',{'val':_0x5015a1,'ack':!![]}),automation['handlePrediction'](_0x114f5a,_0x111716,_0x5015a1);}else{if(_0x2054ce['type']==='TRACKER_RESULT'){const {probabilities:_0xca9e34}=_0x2054ce[_0x2b633f(0x92)];if(_0xca9e34){_0x114f5a[_0x2b633f(0xa4)](_0x2b633f(0xad),{'val':JSON[_0x2b633f(0x74)](_0xca9e34),'ack':!![]});const _0x2199ec=Object[_0x2b633f(0xa3)](_0xca9e34);if(_0x2199ec[_0x2b633f(0x87)]>0x0){const _0x5c3e85=_0x2199ec[0x0],_0x1f8957=_0xca9e34[_0x5c3e85];_0x114f5a[_0x2b633f(0xa4)](_0x2b633f(0x7b),{'val':_0x5c3e85,'ack':!![]}),_0x114f5a['setStateAsync'](_0x2b633f(0x81),{'val':_0x1f8957,'ack':!![]});}}}else{if(_0x2054ce[_0x2b633f(0xb7)]==='COMFORT_RESULT'){const {patterns:_0xd1f203}=_0x2054ce[_0x2b633f(0x92)];if(_0xd1f203&&_0xd1f203['length']>0x0)_0x114f5a['setStateAsync'](_0x2b633f(0x95),{'val':JSON[_0x2b633f(0x74)](_0xd1f203),'ack':!![]});}}}}}}}}}}}}}}}}function startService(_0x2f342b,_0x22d6b4){const _0xe59bc9=a4_0x1d42ba;let _0x486046=_0xe59bc9(0xc4);if(fs['existsSync'](_0x22d6b4))_0x486046=_0x22d6b4;try{const _0x2055b6=path[_0xe59bc9(0xa0)](__dirname,'..',_0xe59bc9(0x76),'service.py');pythonProcess=spawn(_0x486046,[_0x2055b6]),pythonProcess[_0xe59bc9(0xc1)]['on'](_0xe59bc9(0xc0),_0x15ac82=>{const _0x20455f=_0xe59bc9,_0x140c74=_0x15ac82[_0x20455f(0x8d)]()[_0x20455f(0x82)]('\x0a');_0x140c74[_0x20455f(0xc8)](_0x446d17=>{const _0x2df7d8=_0x20455f,_0x4e3932=_0x446d17[_0x2df7d8(0xa8)]();if(!_0x4e3932)return;if(_0x4e3932[_0x2df7d8(0xb0)](_0x2df7d8(0x98)))_0x2f342b[_0x2df7d8(0x90)][_0x2df7d8(0xbc)]('[PYTHON]\x20'+_0x4e3932[_0x2df7d8(0xa2)](0x5)[_0x2df7d8(0xa8)]());else{if(_0x4e3932[_0x2df7d8(0xb0)]('[RESULT]'))try{const _0x38b162=JSON[_0x2df7d8(0xae)](_0x4e3932[_0x2df7d8(0xa2)](0x8)[_0x2df7d8(0xa8)]());handleResult(_0x2f342b,_0x38b162);}catch(_0x20f2fc){}}});}),pythonProcess['on'](_0xe59bc9(0x8e),_0x3fc33e=>{pythonProcess=null;}),_0x2f342b[_0xe59bc9(0x7a)]=(_0x425cd3,_0x59a598)=>send(_0x2f342b,_0x425cd3,_0x59a598);}catch(_0x17836d){_0x2f342b[_0xe59bc9(0x90)][_0xe59bc9(0xbe)](_0xe59bc9(0x86)+_0x17836d[_0xe59bc9(0xb9)]);}}function stopService(_0xf971a5){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x5428ed){}pythonProcess=null;}}module[a4_0x1d42ba(0xc9)]={'startService':startService,'stopService':stopService,'send':send};