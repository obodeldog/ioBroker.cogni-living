const a4_0x1e3dbd=a4_0x5a8b;(function(_0x179fa4,_0x3e0ad9){const _0x1d48b4=a4_0x5a8b,_0x114e6b=_0x179fa4();while(!![]){try{const _0x1fc92a=-parseInt(_0x1d48b4(0x1c4))/0x1+parseInt(_0x1d48b4(0x185))/0x2*(parseInt(_0x1d48b4(0x194))/0x3)+parseInt(_0x1d48b4(0x183))/0x4+parseInt(_0x1d48b4(0x1ce))/0x5+parseInt(_0x1d48b4(0x18d))/0x6*(parseInt(_0x1d48b4(0x1a6))/0x7)+parseInt(_0x1d48b4(0x1b6))/0x8+-parseInt(_0x1d48b4(0x17a))/0x9;if(_0x1fc92a===_0x3e0ad9)break;else _0x114e6b['push'](_0x114e6b['shift']());}catch(_0x18d575){_0x114e6b['push'](_0x114e6b['shift']());}}}(a4_0x4012,0xccdfb));function a4_0x4012(){const _0x253627=['UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','service.py','analysis.security.currentThreshold','parse','ENERGY_TRAIN_RESULT','13109103fuBgtQ','threshold','stringify','HEALTH_RESULT','data','handlePrediction','analysis.prediction.trackerTopRoom','toLocaleDateString','WARMUP_RESULT','4318596AieegQ','ðŸ\x20Python\x20Pong','7582WHpYux','existsSync','kill','TRAINING_COMPLETE','apply','SECURITY_RESULT','HEALTH_TREND_RESULT','child_process','534XeTXTr','write','forEach','stdin','success','heating','ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20','1275kiQiyq','HEALTH_TRAIN_RESULT','analysis.energy.warmupDetails','./setup','close','Python\x20process\x20exited\x20with\x20code\x20','PINN_PREDICT_RESULT','GAIT_RESULT','sendNotification','./automation','sendToPythonWrapper','insulation','python3','exports','analysis.health.lastCheck','ðŸ“ˆ\x20Health\x20Trend:\x20','split','payload','2226sfCiLA','analysis.energy.warmupTimes','is_anomaly','applyEnergySavings','COMFORT_RESULT','val','PONG','setStateAsync','join','Failed:\x20','analysis.energy.mpcActive','de-DE','type','toISOString','analysis.energy.insulationScore','info','5782792Zpswmi','analysis.automation.detectedPatterns','âœ…\x20HEALTH\x20TRAINED.','error','message','.\x20Please\x20create\x20this\x20file!','analysis.energy.pinnForecast','trim','length','analysis.energy.heatingScore','Success:\x20','analysis.security.lastCheck','toLocaleTimeString','keys','1659000dVMGSQ','analysis.energy.forecast','\x0aGrund:\x20','2-digit','search','âš ï¸\x20SECURITY\x20ALARM:\x20','toString','startsWith','entries','analysis.energy.warmupSources','2563775owIcfJ','short','RL_PENALTY_UPDATE','warn','\x20AND\x20','analysis.prediction.nextRoom','stderr','analysis.energy.ventilationAlerts','log','ENERGY_OPTIMIZE_RESULT','debug','(((.+)+)+)+$','reason','[LOG]','[RESULT]','Unknown','constructor','analysis.health.gaitSpeed'];a4_0x4012=function(){return _0x253627;};return a4_0x4012();}const a4_0x20fb47=(function(){let _0x3e122e=!![];return function(_0x2e713b,_0x5f3ab8){const _0x36121c=_0x3e122e?function(){const _0x1af040=a4_0x5a8b;if(_0x5f3ab8){const _0x52293c=_0x5f3ab8[_0x1af040(0x189)](_0x2e713b,arguments);return _0x5f3ab8=null,_0x52293c;}}:function(){};return _0x3e122e=![],_0x36121c;};}()),a4_0x4ebb84=a4_0x20fb47(this,function(){const _0x23b8c1=a4_0x5a8b;return a4_0x4ebb84[_0x23b8c1(0x1ca)]()[_0x23b8c1(0x1c8)](_0x23b8c1(0x1d9))[_0x23b8c1(0x1ca)]()[_0x23b8c1(0x1de)](a4_0x4ebb84)[_0x23b8c1(0x1c8)](_0x23b8c1(0x1d9));});a4_0x4ebb84();'use strict';const {spawn}=require(a4_0x1e3dbd(0x18c)),path=require('path'),fs=require('fs'),setup=require(a4_0x1e3dbd(0x197)),automation=require(a4_0x1e3dbd(0x19d));let pythonProcess=null;function send(_0x109c26,_0x5de14c,_0x26a883={}){const _0x364525=a4_0x1e3dbd;if(!pythonProcess||!pythonProcess[_0x364525(0x190)]['writable'])return;const _0x2997ba=JSON[_0x364525(0x17c)]({'command':_0x5de14c,..._0x26a883});try{pythonProcess[_0x364525(0x190)][_0x364525(0x18e)](_0x2997ba+'\x0a');}catch(_0x56825b){}}function handleResult(_0x5bc513,_0x5e2131){const _0x239c41=a4_0x1e3dbd;if(_0x5e2131[_0x239c41(0x1b2)]===_0x239c41(0x1ac))_0x5bc513['log'][_0x239c41(0x1d8)](_0x239c41(0x184));else{if(_0x5e2131['type']===_0x239c41(0x18a)){const {anomaly_score:_0x48fb78,is_anomaly:_0x440717,threshold:_0x451e10,explanation:_0x4320ad}=_0x5e2131[_0x239c41(0x1a5)];_0x5bc513['setStateAsync']('analysis.security.lastScore',{'val':_0x48fb78,'ack':!![]}),_0x5bc513[_0x239c41(0x1ad)](_0x239c41(0x1c1),{'val':new Date()[_0x239c41(0x1b3)](),'ack':!![]});if(_0x451e10)_0x5bc513['setStateAsync']('analysis.security.currentThreshold',{'val':_0x451e10,'ack':!![]});if(_0x440717){let _0x5e34d8=_0x239c41(0x1e0)+_0x48fb78['toFixed'](0x4)+')';if(_0x4320ad&&_0x4320ad!==_0x239c41(0x1dd))_0x5e34d8+=_0x239c41(0x1c6)+_0x4320ad;_0x5bc513[_0x239c41(0x1ad)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x5bc513['setStateAsync']('analysis.alertReason',{'val':_0x5e34d8,'ack':!![]}),setup[_0x239c41(0x19c)](_0x5bc513,_0x239c41(0x1c9)+_0x5e34d8,![],!![]);}}else{if(_0x5e2131[_0x239c41(0x1b2)]===_0x239c41(0x188)){const _0x4b11a2=_0x5e2131[_0x239c41(0x1a5)]['details']||'',_0x2ed038=_0x5e2131[_0x239c41(0x1a5)][_0x239c41(0x17b)],_0x12399b=_0x5e2131[_0x239c41(0x1a5)]['success']?_0x239c41(0x1c0)+new Date()[_0x239c41(0x1c2)]()+'\x20('+_0x4b11a2+')':_0x239c41(0x1af)+_0x5e2131['payload'][_0x239c41(0x1da)];_0x5bc513[_0x239c41(0x1ad)]('analysis.training.status',{'val':_0x12399b,'ack':!![]});if(_0x5e2131[_0x239c41(0x1a5)][_0x239c41(0x191)]&&_0x2ed038)_0x5bc513['setStateAsync'](_0x239c41(0x177),{'val':_0x2ed038,'ack':!![]});}else{if(_0x5e2131['type']===_0x239c41(0x179)){if(_0x5e2131[_0x239c41(0x1a5)][_0x239c41(0x191)])try{const _0x23d411=JSON[_0x239c41(0x178)](_0x5e2131[_0x239c41(0x1a5)]['details']);if(_0x23d411[_0x239c41(0x19f)])_0x5bc513['setStateAsync'](_0x239c41(0x1b4),{'val':JSON[_0x239c41(0x17c)](_0x23d411[_0x239c41(0x19f)]),'ack':!![]});if(_0x23d411[_0x239c41(0x192)])_0x5bc513[_0x239c41(0x1ad)](_0x239c41(0x1bf),{'val':JSON[_0x239c41(0x17c)](_0x23d411[_0x239c41(0x192)]),'ack':!![]});}catch(_0x2a73f2){}}else{if(_0x5e2131[_0x239c41(0x1b2)]===_0x239c41(0x195)){if(_0x5e2131[_0x239c41(0x1a5)]['success']){_0x5bc513[_0x239c41(0x1d6)][_0x239c41(0x1b5)](_0x239c41(0x1b8));const _0x58ff4b=new Date(),_0x525729=_0x58ff4b[_0x239c41(0x181)](_0x239c41(0x1b1),{'day':_0x239c41(0x1c7),'month':'short','hour':'2-digit','minute':'2-digit'});_0x5bc513[_0x239c41(0x1ad)](_0x239c41(0x1a2),{'val':_0x525729,'ack':!![]});}}else{if(_0x5e2131[_0x239c41(0x1b2)]===_0x239c41(0x17d)){const _0x55154c=new Date(),_0x16a32d=_0x55154c['toLocaleDateString'](_0x239c41(0x1b1),{'day':_0x239c41(0x1c7),'month':_0x239c41(0x1cf),'hour':_0x239c41(0x1c7),'minute':_0x239c41(0x1c7)});_0x5bc513[_0x239c41(0x1ad)](_0x239c41(0x1a2),{'val':_0x16a32d,'ack':!![]}),_0x5bc513[_0x239c41(0x1ad)]('analysis.health.isAnomaly',{'val':_0x5e2131[_0x239c41(0x1a5)][_0x239c41(0x1a8)],'ack':!![]});}else{if(_0x5e2131[_0x239c41(0x1b2)]===_0x239c41(0x18b)){const {trend_percent:_0x3b9f2c,details:_0x4c578d}=_0x5e2131['payload'],_0x2d203d=new Date(),_0x2f143f=_0x2d203d[_0x239c41(0x181)](_0x239c41(0x1b1),{'day':_0x239c41(0x1c7),'month':_0x239c41(0x1cf),'hour':_0x239c41(0x1c7),'minute':_0x239c41(0x1c7)});_0x5bc513[_0x239c41(0x1ad)](_0x239c41(0x1a2),{'val':_0x2f143f,'ack':!![]}),_0x5bc513['setStateAsync'](_0x239c41(0x1df),{'val':_0x3b9f2c,'ack':!![]}),_0x5bc513[_0x239c41(0x1d6)][_0x239c41(0x1b5)](_0x239c41(0x1a3)+_0x4c578d);}else{if(_0x5e2131[_0x239c41(0x1b2)]===_0x239c41(0x19b)){const {speed_trend:_0x371108}=_0x5e2131[_0x239c41(0x1a5)];if(_0x371108!==undefined)_0x5bc513[_0x239c41(0x1ad)](_0x239c41(0x1df),{'val':_0x371108,'ack':!![]});}else{if(_0x5e2131[_0x239c41(0x1b2)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x2a5674}=_0x5e2131['payload'];if(_0x2a5674)_0x5bc513[_0x239c41(0x1ad)](_0x239c41(0x1c5),{'val':JSON[_0x239c41(0x17c)](_0x2a5674),'ack':!![]});}else{if(_0x5e2131[_0x239c41(0x1b2)]===_0x239c41(0x182)){const {times:_0x40ba68,sources:_0x40bf85,details:_0x44147d}=_0x5e2131['payload'];if(_0x40ba68)_0x5bc513[_0x239c41(0x1ad)](_0x239c41(0x1a7),{'val':JSON[_0x239c41(0x17c)](_0x40ba68),'ack':!![]});if(_0x40bf85)_0x5bc513[_0x239c41(0x1ad)](_0x239c41(0x1cd),{'val':JSON[_0x239c41(0x17c)](_0x40bf85),'ack':!![]});if(_0x44147d)_0x5bc513[_0x239c41(0x1ad)](_0x239c41(0x196),{'val':JSON[_0x239c41(0x17c)](_0x44147d),'ack':!![]});}else{if(_0x5e2131['type']===_0x239c41(0x1d0)){const {penalties:_0x4c793e}=_0x5e2131[_0x239c41(0x1a5)];if(_0x4c793e)_0x5bc513[_0x239c41(0x1ad)]('analysis.energy.rlPenalties',{'val':JSON[_0x239c41(0x17c)](_0x4c793e),'ack':!![]});}else{if(_0x5e2131[_0x239c41(0x1b2)]===_0x239c41(0x19a)){const {forecast:_0x4ae2a8}=_0x5e2131[_0x239c41(0x1a5)];if(_0x4ae2a8)_0x5bc513[_0x239c41(0x1ad)](_0x239c41(0x1bc),{'val':JSON[_0x239c41(0x17c)](_0x4ae2a8),'ack':!![]});}else{if(_0x5e2131[_0x239c41(0x1b2)]==='VENTILATION_ALERT'){const {alerts:_0x1e8baf}=_0x5e2131[_0x239c41(0x1a5)];if(_0x1e8baf)_0x5bc513[_0x239c41(0x1ad)](_0x239c41(0x1d5),{'val':JSON['stringify'](_0x1e8baf),'ack':!![]});}else{if(_0x5e2131[_0x239c41(0x1b2)]===_0x239c41(0x1d7)){const {proposals:_0x3af010}=_0x5e2131[_0x239c41(0x1a5)];_0x5bc513['getState'](_0x239c41(0x1b0),(_0x5e0d53,_0xdf4e39)=>{const _0xe25967=_0x239c41;_0xdf4e39&&_0xdf4e39[_0xe25967(0x1ab)]===!![]&&_0x3af010&&_0x3af010[_0xe25967(0x1be)]>0x0&&automation[_0xe25967(0x1a9)](_0x5bc513,_0x3af010);});}else{if(_0x5e2131[_0x239c41(0x1b2)]==='SIGNAL_RESULT'){const {room:_0x22dad0,propagation:_0xf119bb}=_0x5e2131['payload'];let _0x2cd690=_0x239c41(0x1dd),_0x51afb9=0x0;if(_0xf119bb){const _0x43f327=Object[_0x239c41(0x1cc)](_0xf119bb);_0x43f327[_0x239c41(0x1be)]>0x0&&(_0x2cd690=_0x43f327[0x0][0x0],_0x51afb9=_0x43f327[0x0][0x1]);}_0x5bc513[_0x239c41(0x1ad)](_0x239c41(0x1d3),{'val':_0x2cd690,'ack':!![]}),_0x5bc513[_0x239c41(0x1ad)]('analysis.prediction.confidence',{'val':_0x51afb9,'ack':!![]}),automation[_0x239c41(0x17f)](_0x5bc513,_0x2cd690,_0x51afb9);}else{if(_0x5e2131[_0x239c41(0x1b2)]==='TRACKER_RESULT'){const {probabilities:_0x35b3c5}=_0x5e2131[_0x239c41(0x1a5)];if(_0x35b3c5){_0x5bc513['setStateAsync']('analysis.prediction.trackerState',{'val':JSON[_0x239c41(0x17c)](_0x35b3c5),'ack':!![]});const _0x2c9278=Object[_0x239c41(0x1c3)](_0x35b3c5);if(_0x2c9278[_0x239c41(0x1be)]>0x0){const _0x1b65b0=_0x2c9278[0x0],_0x18a7fc=_0x35b3c5[_0x1b65b0];_0x5bc513[_0x239c41(0x1ad)](_0x239c41(0x180),{'val':_0x1b65b0,'ack':!![]}),_0x5bc513['setStateAsync']('analysis.prediction.trackerConfidence',{'val':_0x18a7fc,'ack':!![]});}}}else{if(_0x5e2131[_0x239c41(0x1b2)]===_0x239c41(0x1aa)){const {patterns:_0x7d596f}=_0x5e2131['payload'];if(_0x7d596f&&_0x7d596f[_0x239c41(0x1be)]>0x0)_0x5bc513[_0x239c41(0x1ad)](_0x239c41(0x1b7),{'val':JSON[_0x239c41(0x17c)](_0x7d596f),'ack':!![]});}}}}}}}}}}}}}}}}}}function a4_0x5a8b(_0x4faac5,_0x2d4263){const _0x42f93f=a4_0x4012();return a4_0x5a8b=function(_0x4ebb84,_0x20fb47){_0x4ebb84=_0x4ebb84-0x176;let _0x40129c=_0x42f93f[_0x4ebb84];return _0x40129c;},a4_0x5a8b(_0x4faac5,_0x2d4263);}function startService(_0x58b83d,_0x19a356){const _0xded0bd=a4_0x1e3dbd;let _0x367c74=_0xded0bd(0x1a0);if(fs[_0xded0bd(0x186)](_0x19a356))_0x367c74=_0x19a356;const _0x37193d=path[_0xded0bd(0x1ae)](__dirname,'..',_0xded0bd(0x176)),_0x1143bd=path[_0xded0bd(0x1ae)](__dirname,'..','python_service',_0xded0bd(0x176));let _0x48b867='';if(fs[_0xded0bd(0x186)](_0x37193d))_0x48b867=_0x37193d;else{if(fs[_0xded0bd(0x186)](_0x1143bd))_0x48b867=_0x1143bd;else{_0x58b83d[_0xded0bd(0x1d6)][_0xded0bd(0x1b9)]('âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20'+_0x37193d+_0xded0bd(0x1d2)+_0x1143bd+_0xded0bd(0x1bb));return;}}try{_0x58b83d[_0xded0bd(0x1d6)][_0xded0bd(0x1b5)](_0xded0bd(0x193)+_0x367c74+'\x20'+_0x48b867),pythonProcess=spawn(_0x367c74,[_0x48b867]),pythonProcess['stdout']['on'](_0xded0bd(0x17e),_0x39b445=>{const _0x222a49=_0xded0bd,_0xd921a8=_0x39b445[_0x222a49(0x1ca)]()[_0x222a49(0x1a4)]('\x0a');_0xd921a8[_0x222a49(0x18f)](_0x41166=>{const _0x11fb9a=_0x222a49,_0x20dfc4=_0x41166[_0x11fb9a(0x1bd)]();if(!_0x20dfc4)return;if(_0x20dfc4[_0x11fb9a(0x1cb)](_0x11fb9a(0x1db)))_0x58b83d[_0x11fb9a(0x1d6)][_0x11fb9a(0x1d8)]('[PYTHON]\x20'+_0x20dfc4['substring'](0x5)[_0x11fb9a(0x1bd)]());else{if(_0x20dfc4[_0x11fb9a(0x1cb)](_0x11fb9a(0x1dc)))try{const _0x32e508=JSON[_0x11fb9a(0x178)](_0x20dfc4['substring'](0x8)['trim']());handleResult(_0x58b83d,_0x32e508);}catch(_0x341ba2){}}});}),pythonProcess[_0xded0bd(0x1d4)]['on'](_0xded0bd(0x17e),_0x5ccd28=>{const _0x1313fa=_0xded0bd;_0x58b83d[_0x1313fa(0x1d6)][_0x1313fa(0x1b9)]('[PYTHON\x20ERR]\x20'+_0x5ccd28[_0x1313fa(0x1ca)]()[_0x1313fa(0x1bd)]());}),pythonProcess['on'](_0xded0bd(0x198),_0x2e7458=>{const _0x44fb14=_0xded0bd;_0x58b83d['log'][_0x44fb14(0x1d1)](_0x44fb14(0x199)+_0x2e7458),pythonProcess=null;}),_0x58b83d[_0xded0bd(0x19e)]=(_0x32ebcb,_0x4768df)=>send(_0x58b83d,_0x32ebcb,_0x4768df);}catch(_0x5bfceb){_0x58b83d[_0xded0bd(0x1d6)][_0xded0bd(0x1b9)]('Error\x20launching\x20Python:\x20'+_0x5bfceb[_0xded0bd(0x1ba)]);}}function stopService(_0x5daad7){const _0x4e161f=a4_0x1e3dbd;if(pythonProcess){try{pythonProcess[_0x4e161f(0x187)]();}catch(_0x107ab9){}pythonProcess=null;}}module[a4_0x1e3dbd(0x1a1)]={'startService':startService,'stopService':stopService,'send':send};