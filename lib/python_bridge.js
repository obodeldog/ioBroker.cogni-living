const a4_0x13fd58=a4_0x49ff;(function(_0x1223b2,_0x4f1c6e){const _0x4f1d0f=a4_0x49ff,_0xacb4ad=_0x1223b2();while(!![]){try{const _0x2ab4bf=-parseInt(_0x4f1d0f(0xff))/0x1+parseInt(_0x4f1d0f(0xb7))/0x2*(parseInt(_0x4f1d0f(0xa1))/0x3)+parseInt(_0x4f1d0f(0xb3))/0x4*(parseInt(_0x4f1d0f(0xcd))/0x5)+parseInt(_0x4f1d0f(0xa3))/0x6*(-parseInt(_0x4f1d0f(0xc2))/0x7)+-parseInt(_0x4f1d0f(0xcf))/0x8+parseInt(_0x4f1d0f(0xf7))/0x9+-parseInt(_0x4f1d0f(0xed))/0xa;if(_0x2ab4bf===_0x4f1c6e)break;else _0xacb4ad['push'](_0xacb4ad['shift']());}catch(_0x3c5ca9){_0xacb4ad['push'](_0xacb4ad['shift']());}}}(a4_0x4526,0xa4232));const a4_0x24dd12=(function(){let _0x186fa9=!![];return function(_0x3ce5aa,_0x390483){const _0x47e7e7=_0x186fa9?function(){const _0x3b8797=a4_0x49ff;if(_0x390483){const _0x237b19=_0x390483[_0x3b8797(0xc8)](_0x3ce5aa,arguments);return _0x390483=null,_0x237b19;}}:function(){};return _0x186fa9=![],_0x47e7e7;};}()),a4_0xae3b97=a4_0x24dd12(this,function(){const _0x3f11f1=a4_0x49ff;return a4_0xae3b97[_0x3f11f1(0xb4)]()[_0x3f11f1(0xf4)](_0x3f11f1(0xb2))[_0x3f11f1(0xb4)]()['constructor'](a4_0xae3b97)[_0x3f11f1(0xf4)](_0x3f11f1(0xb2));});a4_0xae3b97();'use strict';const {spawn}=require(a4_0x13fd58(0xbe)),path=require(a4_0x13fd58(0xb0)),fs=require('fs'),setup=require(a4_0x13fd58(0xe5)),automation=require(a4_0x13fd58(0xb8));function a4_0x4526(){const _0x5b0200=['\x0aGrund:\x20','[RESULT]','ENERGY_PREDICT_RESULT','6685BKgshe','handlePrediction','223632PkRPua','SIGNAL_RESULT','SECURITY_RESULT','analysis.security.lastScore','TRAINING_COMPLETE','analysis.health.isAnomaly','data','success','applyEnergySavings','PINN_PREDICT_RESULT','analysis.prediction.trackerConfidence','analysis.energy.warmupTimes','type','analysis.health.lastCheck','threshold','sendNotification','parse','toISOString','Error\x20launching\x20Python:\x20','getState','GAIT_RESULT','join','./setup','service.py','python3','HEALTH_TRAIN_RESULT','analysis.training.status','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','startsWith','heating','944250LGgaxh','analysis.energy.forecast','insulation','analysis.energy.insulationScore','stdout','substring','existsSync','search','analysis.alertReason','stdin','7990623ziEtBP','toLocaleTimeString','split','payload','ENERGY_OPTIMIZE_RESULT','analysis.security.lastCheck','VENTILATION_ALERT','trim','571367eXlDDK','933lgGsxz','setStateAsync','48ScmSbr','âš ï¸\x20SECURITY\x20ALARM:\x20','details','ENERGY_TRAIN_RESULT','analysis.security.currentThreshold','log','python_service','stringify','exports','analysis.prediction.trackerTopRoom','Failed:\x20','TRACKER_RESULT','Unknown','path','analysis.automation.detectedPatterns','(((.+)+)+)+$','3212xWaLcm','toString','write','writable','1068myBZDA','./automation','error','message','Success:\x20','analysis.energy.heatingScore','analysis.prediction.nextRoom','child_process','info','analysis.energy.pinnForecast','analysis.prediction.confidence','666295cWvJrD','keys','toFixed','length','analysis.health.gaitSpeed','sendToPythonWrapper','apply','analysis.prediction.trackerState'];a4_0x4526=function(){return _0x5b0200;};return a4_0x4526();}let pythonProcess=null;function send(_0x2d8903,_0x32ddae,_0x10eee1={}){const _0x478dba=a4_0x13fd58;if(!pythonProcess||!pythonProcess[_0x478dba(0xf6)][_0x478dba(0xb6)])return;const _0x295bf6=JSON[_0x478dba(0xaa)]({'command':_0x32ddae,..._0x10eee1});try{pythonProcess[_0x478dba(0xf6)][_0x478dba(0xb5)](_0x295bf6+'\x0a');}catch(_0xc2941d){}}function handleResult(_0xb6d9af,_0xf96804){const _0x3a4e6b=a4_0x13fd58;if(_0xf96804[_0x3a4e6b(0xdb)]==='PONG')_0xb6d9af[_0x3a4e6b(0xa8)]['debug']('ðŸ\x20Python\x20Pong');else{if(_0xf96804[_0x3a4e6b(0xdb)]===_0x3a4e6b(0xd1)){const {anomaly_score:_0x105154,is_anomaly:_0x5ec1e7,threshold:_0x79cbe8,explanation:_0x37ae03}=_0xf96804[_0x3a4e6b(0xfa)];_0xb6d9af[_0x3a4e6b(0xa2)](_0x3a4e6b(0xd2),{'val':_0x105154,'ack':!![]}),_0xb6d9af[_0x3a4e6b(0xa2)](_0x3a4e6b(0xfc),{'val':new Date()[_0x3a4e6b(0xe0)](),'ack':!![]});if(_0x79cbe8)_0xb6d9af['setStateAsync'](_0x3a4e6b(0xa7),{'val':_0x79cbe8,'ack':!![]});if(_0x5ec1e7){let _0x2357d3=_0x3a4e6b(0xea)+_0x105154[_0x3a4e6b(0xc4)](0x4)+')';if(_0x37ae03&&_0x37ae03!=='Unknown')_0x2357d3+=_0x3a4e6b(0xca)+_0x37ae03;_0xb6d9af[_0x3a4e6b(0xa2)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0xb6d9af[_0x3a4e6b(0xa2)](_0x3a4e6b(0xf5),{'val':_0x2357d3,'ack':!![]}),setup[_0x3a4e6b(0xde)](_0xb6d9af,_0x3a4e6b(0xa4)+_0x2357d3,![],!![]);}}else{if(_0xf96804[_0x3a4e6b(0xdb)]===_0x3a4e6b(0xd3)){const _0x335118=_0xf96804[_0x3a4e6b(0xfa)][_0x3a4e6b(0xa5)]||'',_0x551a27=_0xf96804[_0x3a4e6b(0xfa)][_0x3a4e6b(0xdd)],_0x5c6d12=_0xf96804[_0x3a4e6b(0xfa)]['success']?_0x3a4e6b(0xbb)+new Date()[_0x3a4e6b(0xf8)]()+'\x20('+_0x335118+')':_0x3a4e6b(0xad)+_0xf96804[_0x3a4e6b(0xfa)]['reason'];_0xb6d9af[_0x3a4e6b(0xa2)](_0x3a4e6b(0xe9),{'val':_0x5c6d12,'ack':!![]});if(_0xf96804['payload'][_0x3a4e6b(0xd6)]&&_0x551a27)_0xb6d9af[_0x3a4e6b(0xa2)]('analysis.security.currentThreshold',{'val':_0x551a27,'ack':!![]});}else{if(_0xf96804[_0x3a4e6b(0xdb)]===_0x3a4e6b(0xa6)){if(_0xf96804[_0x3a4e6b(0xfa)][_0x3a4e6b(0xd6)])try{const _0x212a16=JSON[_0x3a4e6b(0xdf)](_0xf96804[_0x3a4e6b(0xfa)]['details']);if(_0x212a16[_0x3a4e6b(0xef)])_0xb6d9af[_0x3a4e6b(0xa2)](_0x3a4e6b(0xf0),{'val':JSON[_0x3a4e6b(0xaa)](_0x212a16[_0x3a4e6b(0xef)]),'ack':!![]});if(_0x212a16['heating'])_0xb6d9af[_0x3a4e6b(0xa2)](_0x3a4e6b(0xbc),{'val':JSON['stringify'](_0x212a16[_0x3a4e6b(0xec)]),'ack':!![]});}catch(_0x34f6a6){}}else{if(_0xf96804[_0x3a4e6b(0xdb)]===_0x3a4e6b(0xe8)){if(_0xf96804[_0x3a4e6b(0xfa)][_0x3a4e6b(0xd6)])_0xb6d9af['log'][_0x3a4e6b(0xbf)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0xf96804[_0x3a4e6b(0xdb)]==='HEALTH_RESULT')_0xb6d9af[_0x3a4e6b(0xa2)](_0x3a4e6b(0xdc),{'val':new Date()[_0x3a4e6b(0xe0)](),'ack':!![]}),_0xb6d9af[_0x3a4e6b(0xa2)](_0x3a4e6b(0xd4),{'val':_0xf96804[_0x3a4e6b(0xfa)]['is_anomaly'],'ack':!![]});else{if(_0xf96804['type']===_0x3a4e6b(0xe3)){const {speed_trend:_0x40fe84}=_0xf96804[_0x3a4e6b(0xfa)];if(_0x40fe84!==undefined)_0xb6d9af['setStateAsync'](_0x3a4e6b(0xc6),{'val':_0x40fe84,'ack':!![]});}else{if(_0xf96804[_0x3a4e6b(0xdb)]===_0x3a4e6b(0xcc)){const {forecast:_0x40fba3}=_0xf96804[_0x3a4e6b(0xfa)];if(_0x40fba3)_0xb6d9af[_0x3a4e6b(0xa2)](_0x3a4e6b(0xee),{'val':JSON['stringify'](_0x40fba3),'ack':!![]});}else{if(_0xf96804[_0x3a4e6b(0xdb)]==='WARMUP_RESULT'){const {times:_0x5c7983}=_0xf96804[_0x3a4e6b(0xfa)];if(_0x5c7983)_0xb6d9af[_0x3a4e6b(0xa2)](_0x3a4e6b(0xda),{'val':JSON['stringify'](_0x5c7983),'ack':!![]});}else{if(_0xf96804[_0x3a4e6b(0xdb)]===_0x3a4e6b(0xd8)){const {forecast:_0x46bcab}=_0xf96804['payload'];if(_0x46bcab)_0xb6d9af[_0x3a4e6b(0xa2)](_0x3a4e6b(0xc0),{'val':JSON['stringify'](_0x46bcab),'ack':!![]});}else{if(_0xf96804['type']===_0x3a4e6b(0xfd)){const {alerts:_0x565eb1}=_0xf96804['payload'];if(_0x565eb1)_0xb6d9af['setStateAsync']('analysis.energy.ventilationAlerts',{'val':JSON[_0x3a4e6b(0xaa)](_0x565eb1),'ack':!![]});}else{if(_0xf96804[_0x3a4e6b(0xdb)]===_0x3a4e6b(0xfb)){const {proposals:_0x909e8}=_0xf96804[_0x3a4e6b(0xfa)];_0xb6d9af[_0x3a4e6b(0xe2)]('analysis.energy.mpcActive',(_0x8cb79b,_0x18de5b)=>{const _0x260a30=_0x3a4e6b;_0x18de5b&&_0x18de5b['val']===!![]&&_0x909e8&&_0x909e8[_0x260a30(0xc5)]>0x0&&automation[_0x260a30(0xd7)](_0xb6d9af,_0x909e8);});}else{if(_0xf96804[_0x3a4e6b(0xdb)]===_0x3a4e6b(0xd0)){const {room:_0x200792,propagation:_0x496c18}=_0xf96804[_0x3a4e6b(0xfa)];let _0x180072=_0x3a4e6b(0xaf),_0x1f6d8c=0x0;if(_0x496c18){const _0x592e95=Object['entries'](_0x496c18);_0x592e95[_0x3a4e6b(0xc5)]>0x0&&(_0x180072=_0x592e95[0x0][0x0],_0x1f6d8c=_0x592e95[0x0][0x1]);}_0xb6d9af[_0x3a4e6b(0xa2)](_0x3a4e6b(0xbd),{'val':_0x180072,'ack':!![]}),_0xb6d9af['setStateAsync'](_0x3a4e6b(0xc1),{'val':_0x1f6d8c,'ack':!![]}),automation[_0x3a4e6b(0xce)](_0xb6d9af,_0x180072,_0x1f6d8c);}else{if(_0xf96804[_0x3a4e6b(0xdb)]===_0x3a4e6b(0xae)){const {probabilities:_0x15a60c}=_0xf96804[_0x3a4e6b(0xfa)];if(_0x15a60c){_0xb6d9af[_0x3a4e6b(0xa2)](_0x3a4e6b(0xc9),{'val':JSON[_0x3a4e6b(0xaa)](_0x15a60c),'ack':!![]});const _0x3c3a75=Object[_0x3a4e6b(0xc3)](_0x15a60c);if(_0x3c3a75[_0x3a4e6b(0xc5)]>0x0){const _0x3f672f=_0x3c3a75[0x0],_0x3395eb=_0x15a60c[_0x3f672f];_0xb6d9af[_0x3a4e6b(0xa2)](_0x3a4e6b(0xac),{'val':_0x3f672f,'ack':!![]}),_0xb6d9af[_0x3a4e6b(0xa2)](_0x3a4e6b(0xd9),{'val':_0x3395eb,'ack':!![]});}}}else{if(_0xf96804['type']==='COMFORT_RESULT'){const {patterns:_0x46ea14}=_0xf96804[_0x3a4e6b(0xfa)];if(_0x46ea14&&_0x46ea14[_0x3a4e6b(0xc5)]>0x0)_0xb6d9af[_0x3a4e6b(0xa2)](_0x3a4e6b(0xb1),{'val':JSON[_0x3a4e6b(0xaa)](_0x46ea14),'ack':!![]});}}}}}}}}}}}}}}}}function a4_0x49ff(_0x38d35d,_0x1fca84){const _0x3084e2=a4_0x4526();return a4_0x49ff=function(_0xae3b97,_0x24dd12){_0xae3b97=_0xae3b97-0xa1;let _0x4526c9=_0x3084e2[_0xae3b97];return _0x4526c9;},a4_0x49ff(_0x38d35d,_0x1fca84);}function startService(_0x4d7b2c,_0x10f5fa){const _0x5b28ee=a4_0x13fd58;let _0x535513=_0x5b28ee(0xe7);if(fs[_0x5b28ee(0xf3)](_0x10f5fa))_0x535513=_0x10f5fa;try{const _0x5971b9=path[_0x5b28ee(0xe4)](__dirname,'..',_0x5b28ee(0xa9),_0x5b28ee(0xe6));pythonProcess=spawn(_0x535513,[_0x5971b9]),pythonProcess[_0x5b28ee(0xf1)]['on'](_0x5b28ee(0xd5),_0x5b5492=>{const _0x19ff74=_0x5b28ee,_0x53103a=_0x5b5492[_0x19ff74(0xb4)]()[_0x19ff74(0xf9)]('\x0a');_0x53103a['forEach'](_0x11351b=>{const _0x136d4f=_0x19ff74,_0x53b8ca=_0x11351b['trim']();if(!_0x53b8ca)return;if(_0x53b8ca[_0x136d4f(0xeb)]('[LOG]'))_0x4d7b2c['log']['debug']('[PYTHON]\x20'+_0x53b8ca[_0x136d4f(0xf2)](0x5)['trim']());else{if(_0x53b8ca['startsWith'](_0x136d4f(0xcb)))try{const _0x2e5a30=JSON[_0x136d4f(0xdf)](_0x53b8ca[_0x136d4f(0xf2)](0x8)[_0x136d4f(0xfe)]());handleResult(_0x4d7b2c,_0x2e5a30);}catch(_0x18059a){}}});}),pythonProcess['on']('close',_0x55ed72=>{pythonProcess=null;}),_0x4d7b2c[_0x5b28ee(0xc7)]=(_0xa3cdf7,_0xd41a4f)=>send(_0x4d7b2c,_0xa3cdf7,_0xd41a4f);}catch(_0x546584){_0x4d7b2c[_0x5b28ee(0xa8)][_0x5b28ee(0xb9)](_0x5b28ee(0xe1)+_0x546584[_0x5b28ee(0xba)]);}}function stopService(_0x148e7a){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x1febdd){}pythonProcess=null;}}module[a4_0x13fd58(0xab)]={'startService':startService,'stopService':stopService,'send':send};