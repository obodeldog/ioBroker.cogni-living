const a4_0x36014b=a4_0x2481;function a4_0x2481(_0x14a852,_0x2ad4b3){const _0x4e4689=a4_0xd540();return a4_0x2481=function(_0x559427,_0x34ed10){_0x559427=_0x559427-0x100;let _0xd5406e=_0x4e4689[_0x559427];return _0xd5406e;},a4_0x2481(_0x14a852,_0x2ad4b3);}(function(_0x467d0b,_0x2edc82){const _0x8977d1=a4_0x2481,_0x5b9a65=_0x467d0b();while(!![]){try{const _0x466dfa=-parseInt(_0x8977d1(0x10f))/0x1+-parseInt(_0x8977d1(0x105))/0x2*(parseInt(_0x8977d1(0x11d))/0x3)+parseInt(_0x8977d1(0x14c))/0x4*(parseInt(_0x8977d1(0x11f))/0x5)+parseInt(_0x8977d1(0x111))/0x6+-parseInt(_0x8977d1(0x141))/0x7*(parseInt(_0x8977d1(0x157))/0x8)+parseInt(_0x8977d1(0x14a))/0x9*(-parseInt(_0x8977d1(0x134))/0xa)+parseInt(_0x8977d1(0x11b))/0xb;if(_0x466dfa===_0x2edc82)break;else _0x5b9a65['push'](_0x5b9a65['shift']());}catch(_0x5c9f95){_0x5b9a65['push'](_0x5b9a65['shift']());}}}(a4_0xd540,0x9a250));const a4_0x34ed10=(function(){let _0x1dffc2=!![];return function(_0x50f65d,_0x2065a9){const _0x365fb3=_0x1dffc2?function(){if(_0x2065a9){const _0x896732=_0x2065a9['apply'](_0x50f65d,arguments);return _0x2065a9=null,_0x896732;}}:function(){};return _0x1dffc2=![],_0x365fb3;};}()),a4_0x559427=a4_0x34ed10(this,function(){const _0x538f7f=a4_0x2481;return a4_0x559427[_0x538f7f(0x159)]()['search'](_0x538f7f(0x137))['toString']()[_0x538f7f(0x125)](a4_0x559427)[_0x538f7f(0x10b)](_0x538f7f(0x137));});a4_0x559427();'use strict';const {spawn}=require('child_process'),path=require('path'),fs=require('fs'),setup=require('./setup'),automation=require(a4_0x36014b(0x156));let pythonProcess=null;function send(_0x409599,_0x27a0eb,_0x41a261={}){const _0x5d4d5e=a4_0x36014b;if(!pythonProcess||!pythonProcess[_0x5d4d5e(0x13e)][_0x5d4d5e(0x116)])return;const _0x4ddbab=JSON[_0x5d4d5e(0x106)]({'command':_0x27a0eb,..._0x41a261});try{pythonProcess[_0x5d4d5e(0x13e)][_0x5d4d5e(0x117)](_0x4ddbab+'\x0a');}catch(_0x34601a){}}function handleResult(_0x42cdd3,_0xd7928c){const _0x344e1f=a4_0x36014b;if(_0xd7928c[_0x344e1f(0x13f)]===_0x344e1f(0x128))_0x42cdd3[_0x344e1f(0x145)][_0x344e1f(0x113)](_0x344e1f(0x10d));else{if(_0xd7928c[_0x344e1f(0x13f)]===_0x344e1f(0x12c)){const {anomaly_score:_0x4ecdd,is_anomaly:_0x12854d,threshold:_0xed304e,explanation:_0x56dc6f}=_0xd7928c['payload'];_0x42cdd3['setStateAsync'](_0x344e1f(0x10e),{'val':_0x4ecdd,'ack':!![]}),_0x42cdd3[_0x344e1f(0x12d)](_0x344e1f(0x107),{'val':new Date()[_0x344e1f(0x147)](),'ack':!![]});if(_0xed304e)_0x42cdd3[_0x344e1f(0x12d)](_0x344e1f(0x140),{'val':_0xed304e,'ack':!![]});if(_0x12854d){let _0x4bf1b0=_0x344e1f(0x158)+_0x4ecdd[_0x344e1f(0x114)](0x4)+')';if(_0x56dc6f&&_0x56dc6f!=='Unknown')_0x4bf1b0+='\x0aGrund:\x20'+_0x56dc6f;_0x42cdd3[_0x344e1f(0x12d)](_0x344e1f(0x146),{'val':!![],'ack':!![]}),_0x42cdd3[_0x344e1f(0x12d)](_0x344e1f(0x12f),{'val':_0x4bf1b0,'ack':!![]}),setup[_0x344e1f(0x14b)](_0x42cdd3,'‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20'+_0x4bf1b0,![],!![]);}}else{if(_0xd7928c['type']===_0x344e1f(0x154)){const _0x48a588=_0xd7928c[_0x344e1f(0x112)][_0x344e1f(0x102)]||'',_0x1c7d6c=_0xd7928c[_0x344e1f(0x112)][_0x344e1f(0x13b)],_0x345ed4=_0xd7928c[_0x344e1f(0x112)][_0x344e1f(0x119)]?_0x344e1f(0x121)+new Date()['toLocaleTimeString']()+'\x20('+_0x48a588+')':_0x344e1f(0x120)+_0xd7928c[_0x344e1f(0x112)][_0x344e1f(0x100)];_0x42cdd3[_0x344e1f(0x12d)]('analysis.training.status',{'val':_0x345ed4,'ack':!![]});if(_0xd7928c[_0x344e1f(0x112)][_0x344e1f(0x119)]&&_0x1c7d6c)_0x42cdd3[_0x344e1f(0x12d)]('analysis.security.currentThreshold',{'val':_0x1c7d6c,'ack':!![]});}else{if(_0xd7928c[_0x344e1f(0x13f)]===_0x344e1f(0x152)){if(_0xd7928c[_0x344e1f(0x112)]['success'])try{const _0x1230a0=JSON[_0x344e1f(0x14e)](_0xd7928c[_0x344e1f(0x112)][_0x344e1f(0x102)]);if(_0x1230a0[_0x344e1f(0x11a)])_0x42cdd3['setStateAsync'](_0x344e1f(0x12b),{'val':JSON[_0x344e1f(0x106)](_0x1230a0['insulation']),'ack':!![]});if(_0x1230a0[_0x344e1f(0x138)])_0x42cdd3['setStateAsync']('analysis.energy.heatingScore',{'val':JSON['stringify'](_0x1230a0[_0x344e1f(0x138)]),'ack':!![]});}catch(_0xe896de){}}else{if(_0xd7928c[_0x344e1f(0x13f)]===_0x344e1f(0x12a)){if(_0xd7928c[_0x344e1f(0x112)]['success'])_0x42cdd3[_0x344e1f(0x145)][_0x344e1f(0x11e)](_0x344e1f(0x131));}else{if(_0xd7928c[_0x344e1f(0x13f)]===_0x344e1f(0x129))_0x42cdd3[_0x344e1f(0x12d)](_0x344e1f(0x155),{'val':new Date()['toISOString'](),'ack':!![]}),_0x42cdd3[_0x344e1f(0x12d)](_0x344e1f(0x124),{'val':_0xd7928c[_0x344e1f(0x112)]['is_anomaly'],'ack':!![]});else{if(_0xd7928c[_0x344e1f(0x13f)]===_0x344e1f(0x115)){const {speed_trend:_0x5f0764}=_0xd7928c[_0x344e1f(0x112)];if(_0x5f0764!==undefined)_0x42cdd3['setStateAsync'](_0x344e1f(0x10c),{'val':_0x5f0764,'ack':!![]});}else{if(_0xd7928c[_0x344e1f(0x13f)]===_0x344e1f(0x143)){const {forecast:_0x32147a}=_0xd7928c[_0x344e1f(0x112)];if(_0x32147a)_0x42cdd3['setStateAsync']('analysis.energy.forecast',{'val':JSON[_0x344e1f(0x106)](_0x32147a),'ack':!![]});}else{if(_0xd7928c[_0x344e1f(0x13f)]==='PINN_PREDICT_RESULT'){const {forecast:_0xade18b}=_0xd7928c[_0x344e1f(0x112)];if(_0xade18b)_0x42cdd3['setStateAsync']('analysis.energy.pinnForecast',{'val':JSON[_0x344e1f(0x106)](_0xade18b),'ack':!![]});}else{if(_0xd7928c['type']===_0x344e1f(0x12e)){const {proposals:_0x4c9b83}=_0xd7928c['payload'];_0x42cdd3['getState'](_0x344e1f(0x148),(_0x5235a2,_0x49f262)=>{const _0x47ff93=_0x344e1f;_0x49f262&&_0x49f262[_0x47ff93(0x104)]===!![]&&_0x4c9b83&&_0x4c9b83[_0x47ff93(0x126)]>0x0&&automation[_0x47ff93(0x151)](_0x42cdd3,_0x4c9b83);});}else{if(_0xd7928c[_0x344e1f(0x13f)]===_0x344e1f(0x150)){const {room:_0x524f06,propagation:_0x1b3417}=_0xd7928c[_0x344e1f(0x112)];let _0x5c44d3='Unknown',_0x34374f=0x0;if(_0x1b3417){const _0x42b48b=Object[_0x344e1f(0x142)](_0x1b3417);_0x42b48b[_0x344e1f(0x126)]>0x0&&(_0x5c44d3=_0x42b48b[0x0][0x0],_0x34374f=_0x42b48b[0x0][0x1]);}_0x42cdd3[_0x344e1f(0x12d)](_0x344e1f(0x123),{'val':_0x5c44d3,'ack':!![]}),_0x42cdd3[_0x344e1f(0x12d)](_0x344e1f(0x101),{'val':_0x34374f,'ack':!![]}),automation[_0x344e1f(0x122)](_0x42cdd3,_0x5c44d3,_0x34374f);}else{if(_0xd7928c[_0x344e1f(0x13f)]===_0x344e1f(0x130)){const {patterns:_0x3461ca}=_0xd7928c[_0x344e1f(0x112)];if(_0x3461ca&&_0x3461ca[_0x344e1f(0x126)]>0x0)_0x42cdd3[_0x344e1f(0x12d)](_0x344e1f(0x110),{'val':JSON['stringify'](_0x3461ca),'ack':!![]});}}}}}}}}}}}}}function startService(_0x2063ac,_0x3b30f7){const _0x5edb28=a4_0x36014b;let _0x365858=_0x5edb28(0x14f);if(fs[_0x5edb28(0x13d)](_0x3b30f7))_0x365858=_0x3b30f7;try{const _0x35117f=path[_0x5edb28(0x103)](__dirname,'..',_0x5edb28(0x135),_0x5edb28(0x13a));pythonProcess=spawn(_0x365858,[_0x35117f]),pythonProcess[_0x5edb28(0x127)]['on'](_0x5edb28(0x149),_0x35fe37=>{const _0x1cfbf9=_0x5edb28,_0x33407e=_0x35fe37['toString']()[_0x1cfbf9(0x139)]('\x0a');_0x33407e[_0x1cfbf9(0x153)](_0x2f4ca9=>{const _0x4ff034=_0x1cfbf9,_0x247cc0=_0x2f4ca9[_0x4ff034(0x13c)]();if(!_0x247cc0)return;if(_0x247cc0[_0x4ff034(0x108)](_0x4ff034(0x11c)))_0x2063ac[_0x4ff034(0x145)][_0x4ff034(0x113)](_0x4ff034(0x136)+_0x247cc0[_0x4ff034(0x118)](0x5)[_0x4ff034(0x13c)]());else{if(_0x247cc0[_0x4ff034(0x108)](_0x4ff034(0x109)))try{const _0x37cc2b=JSON[_0x4ff034(0x14e)](_0x247cc0['substring'](0x8)['trim']());handleResult(_0x2063ac,_0x37cc2b);}catch(_0x1bd313){}}});}),pythonProcess['on']('close',_0x54de35=>{pythonProcess=null;}),_0x2063ac[_0x5edb28(0x14d)]=(_0x26421d,_0x4b8728)=>send(_0x2063ac,_0x26421d,_0x4b8728);}catch(_0x366a66){_0x2063ac[_0x5edb28(0x145)][_0x5edb28(0x144)](_0x5edb28(0x133)+_0x366a66['message']);}}function stopService(_0x2f69d7){const _0x8e3382=a4_0x36014b;if(pythonProcess){try{pythonProcess[_0x8e3382(0x132)]();}catch(_0x26cda4){}pythonProcess=null;}}module[a4_0x36014b(0x10a)]={'startService':startService,'stopService':stopService,'send':send};function a4_0xd540(){const _0x37b552=['analysis.prediction.nextRoom','analysis.health.isAnomaly','constructor','length','stdout','PONG','HEALTH_RESULT','HEALTH_TRAIN_RESULT','analysis.energy.insulationScore','SECURITY_RESULT','setStateAsync','ENERGY_OPTIMIZE_RESULT','analysis.alertReason','COMFORT_RESULT','‚úÖ\x20HEALTH\x20TRAINED.','kill','Error\x20launching\x20Python:\x20','142690YmpXOY','python_service','[PYTHON]\x20','(((.+)+)+)+$','heating','split','service.py','threshold','trim','existsSync','stdin','type','analysis.security.currentThreshold','35gcmNOy','entries','ENERGY_PREDICT_RESULT','error','log','analysis.isAlert','toISOString','analysis.energy.mpcActive','data','603DtoNxU','sendNotification','4Sagsqq','sendToPythonWrapper','parse','python3','SIGNAL_RESULT','applyEnergySavings','ENERGY_TRAIN_RESULT','forEach','TRAINING_COMPLETE','analysis.health.lastCheck','./automation','906992GdKhDU','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','toString','reason','analysis.prediction.confidence','details','join','val','16238oNtRtq','stringify','analysis.security.lastCheck','startsWith','[RESULT]','exports','search','analysis.health.gaitSpeed','üêç\x20Python\x20Pong','analysis.security.lastScore','122218aMgUdk','analysis.automation.detectedPatterns','2422050rcsaln','payload','debug','toFixed','GAIT_RESULT','writable','write','substring','success','insulation','18973900EkpuEH','[LOG]','123BiTUwh','info','2403955kCmmoK','Failed:\x20','Success:\x20','handlePrediction'];a4_0xd540=function(){return _0x37b552;};return a4_0xd540();}