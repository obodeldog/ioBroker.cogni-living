const a4_0x4b37ab=a4_0x202d;(function(_0xd085d3,_0x3c1d49){const _0x554cb0=a4_0x202d,_0x2fdc8f=_0xd085d3();while(!![]){try{const _0x4745c6=parseInt(_0x554cb0(0x7e))/0x1+-parseInt(_0x554cb0(0x79))/0x2+-parseInt(_0x554cb0(0x94))/0x3*(-parseInt(_0x554cb0(0xe0))/0x4)+-parseInt(_0x554cb0(0x80))/0x5+parseInt(_0x554cb0(0x7b))/0x6*(-parseInt(_0x554cb0(0xb7))/0x7)+-parseInt(_0x554cb0(0xbd))/0x8+parseInt(_0x554cb0(0x91))/0x9*(parseInt(_0x554cb0(0xcc))/0xa);if(_0x4745c6===_0x3c1d49)break;else _0x2fdc8f['push'](_0x2fdc8f['shift']());}catch(_0x1a1f4d){_0x2fdc8f['push'](_0x2fdc8f['shift']());}}}(a4_0x14d8,0xef631));function a4_0x202d(_0x363b7d,_0x193afe){const _0xfceb9c=a4_0x14d8();return a4_0x202d=function(_0x53a030,_0x1d8096){_0x53a030=_0x53a030-0x73;let _0x14d818=_0xfceb9c[_0x53a030];return _0x14d818;},a4_0x202d(_0x363b7d,_0x193afe);}const a4_0x1d8096=(function(){let _0x249322=!![];return function(_0x5c379b,_0x14cdb6){const _0x233e30=_0x249322?function(){if(_0x14cdb6){const _0x22bf15=_0x14cdb6['apply'](_0x5c379b,arguments);return _0x14cdb6=null,_0x22bf15;}}:function(){};return _0x249322=![],_0x233e30;};}()),a4_0x53a030=a4_0x1d8096(this,function(){const _0x7e3fe6=a4_0x202d;return a4_0x53a030[_0x7e3fe6(0xa7)]()[_0x7e3fe6(0xd6)](_0x7e3fe6(0xdf))[_0x7e3fe6(0xa7)]()[_0x7e3fe6(0xdb)](a4_0x53a030)['search']('(((.+)+)+)+$');});a4_0x53a030();'use strict';const {spawn}=require(a4_0x4b37ab(0xad)),path=require(a4_0x4b37ab(0xce)),fs=require('fs'),setup=require(a4_0x4b37ab(0xc7)),automation=require('./automation');let pythonProcess=null;function send(_0x42d413,_0x44a978,_0x2afa2a={}){const _0x1f26c0=a4_0x4b37ab;if(!pythonProcess||!pythonProcess[_0x1f26c0(0xb8)][_0x1f26c0(0x7c)])return;const _0x1ce995=JSON[_0x1f26c0(0xb1)]({'command':_0x44a978,..._0x2afa2a});try{pythonProcess[_0x1f26c0(0xb8)]['write'](_0x1ce995+'\x0a');}catch(_0x1b9ab7){}}function handleResult(_0x36b95f,_0x1a16dd){const _0x11760e=a4_0x4b37ab;if(_0x1a16dd[_0x11760e(0xaa)]===_0x11760e(0xae))_0x36b95f['log'][_0x11760e(0x9a)](_0x11760e(0x88));else{if(_0x1a16dd[_0x11760e(0xaa)]===_0x11760e(0x81)){const {anomaly_score:_0x29fe9c,is_anomaly:_0x223864,threshold:_0x1f8267,explanation:_0x28db1b}=_0x1a16dd[_0x11760e(0x96)];_0x36b95f['setStateAsync'](_0x11760e(0x99),{'val':_0x29fe9c,'ack':!![]}),_0x36b95f[_0x11760e(0xda)](_0x11760e(0xa4),{'val':new Date()[_0x11760e(0xaf)](),'ack':!![]});if(_0x1f8267)_0x36b95f['setStateAsync'](_0x11760e(0x8c),{'val':_0x1f8267,'ack':!![]});if(_0x223864){let _0x5b13f5=_0x11760e(0xbf)+_0x29fe9c[_0x11760e(0xc3)](0x4)+')';if(_0x28db1b&&_0x28db1b!==_0x11760e(0xd9))_0x5b13f5+=_0x11760e(0x85)+_0x28db1b;_0x36b95f['setStateAsync'](_0x11760e(0xc4),{'val':!![],'ack':!![]}),_0x36b95f[_0x11760e(0xda)]('analysis.alertReason',{'val':_0x5b13f5,'ack':!![]}),setup[_0x11760e(0xb3)](_0x36b95f,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x5b13f5,![],!![]);}}else{if(_0x1a16dd[_0x11760e(0xaa)]===_0x11760e(0xdd)){const _0x4f4fc6=_0x1a16dd['payload'][_0x11760e(0xcf)]||'',_0x2142ce=_0x1a16dd['payload']['threshold'],_0x237877=_0x1a16dd[_0x11760e(0x96)][_0x11760e(0x73)]?_0x11760e(0xa6)+new Date()[_0x11760e(0x82)]()+'\x20('+_0x4f4fc6+')':_0x11760e(0x93)+_0x1a16dd['payload'][_0x11760e(0x92)];_0x36b95f['setStateAsync'](_0x11760e(0x9d),{'val':_0x237877,'ack':!![]});if(_0x1a16dd['payload'][_0x11760e(0x73)]&&_0x2142ce)_0x36b95f[_0x11760e(0xda)](_0x11760e(0x8c),{'val':_0x2142ce,'ack':!![]});}else{if(_0x1a16dd[_0x11760e(0xaa)]===_0x11760e(0xd8)){if(_0x1a16dd['payload'][_0x11760e(0x73)])try{const _0x290ec4=JSON[_0x11760e(0xc9)](_0x1a16dd[_0x11760e(0x96)][_0x11760e(0xcf)]);if(_0x290ec4['insulation'])_0x36b95f[_0x11760e(0xda)](_0x11760e(0x78),{'val':JSON[_0x11760e(0xb1)](_0x290ec4[_0x11760e(0xa0)]),'ack':!![]});if(_0x290ec4['heating'])_0x36b95f[_0x11760e(0xda)](_0x11760e(0xa9),{'val':JSON[_0x11760e(0xb1)](_0x290ec4[_0x11760e(0xd0)]),'ack':!![]});}catch(_0x18d379){}}else{if(_0x1a16dd[_0x11760e(0xaa)]===_0x11760e(0x9f)){if(_0x1a16dd['payload'][_0x11760e(0x73)]){_0x36b95f[_0x11760e(0x8a)]['info'](_0x11760e(0x9e));const _0x37eabf=new Date(),_0x4eb78a=_0x37eabf['toLocaleDateString'](_0x11760e(0xab),{'day':'2-digit','month':'short','hour':_0x11760e(0xc6),'minute':_0x11760e(0xc6)});_0x36b95f[_0x11760e(0xda)](_0x11760e(0x74),{'val':_0x4eb78a,'ack':!![]});}}else{if(_0x1a16dd[_0x11760e(0xaa)]===_0x11760e(0xc8)){const _0x4ae05d=new Date(),_0x37543b=_0x4ae05d[_0x11760e(0x9c)](_0x11760e(0xab),{'day':_0x11760e(0xc6),'month':'short','hour':_0x11760e(0xc6),'minute':_0x11760e(0xc6)});_0x36b95f[_0x11760e(0xda)](_0x11760e(0x74),{'val':_0x37543b,'ack':!![]}),_0x36b95f['setStateAsync'](_0x11760e(0x8f),{'val':_0x1a16dd[_0x11760e(0x96)]['is_anomaly'],'ack':!![]});}else{if(_0x1a16dd[_0x11760e(0xaa)]===_0x11760e(0xe4)){const {trend_percent:_0x228b3a,details:_0x27421e}=_0x1a16dd[_0x11760e(0x96)],_0x102554=new Date(),_0x51aadd=_0x102554[_0x11760e(0x9c)]('de-DE',{'day':_0x11760e(0xc6),'month':_0x11760e(0xa2),'hour':_0x11760e(0xc6),'minute':_0x11760e(0xc6)});_0x36b95f[_0x11760e(0xda)]('analysis.health.lastCheck',{'val':_0x51aadd,'ack':!![]}),_0x36b95f['setStateAsync'](_0x11760e(0xc2),{'val':_0x228b3a,'ack':!![]}),_0x36b95f[_0x11760e(0x8a)]['info'](_0x11760e(0xb5)+_0x27421e);}else{if(_0x1a16dd['type']==='GAIT_RESULT'){const {speed_trend:_0x4c6e5c,sensors:_0x5e8147,proof:_0x12992b}=_0x1a16dd['payload'];if(_0x4c6e5c!==undefined)_0x36b95f[_0x11760e(0xda)](_0x11760e(0x8d),{'val':_0x4c6e5c,'ack':!![]});if(_0x5e8147&&Array[_0x11760e(0xa3)](_0x5e8147))_0x36b95f[_0x11760e(0xda)](_0x11760e(0xb9),{'val':_0x5e8147[_0x11760e(0xd5)](',\x20'),'ack':!![]});if(_0x12992b)_0x36b95f[_0x11760e(0xda)](_0x11760e(0xb0),{'val':_0x12992b,'ack':!![]});}else{if(_0x1a16dd[_0x11760e(0xaa)]===_0x11760e(0x87)){const {forecast:_0x435fe9}=_0x1a16dd[_0x11760e(0x96)];if(_0x435fe9)_0x36b95f[_0x11760e(0xda)](_0x11760e(0xde),{'val':JSON['stringify'](_0x435fe9),'ack':!![]});}else{if(_0x1a16dd[_0x11760e(0xaa)]===_0x11760e(0x7a)){const {times:_0xe5f7fd,sources:_0x4e72af,details:_0x1c0b39}=_0x1a16dd[_0x11760e(0x96)];if(_0xe5f7fd)_0x36b95f[_0x11760e(0xda)](_0x11760e(0xbc),{'val':JSON['stringify'](_0xe5f7fd),'ack':!![]});if(_0x4e72af)_0x36b95f[_0x11760e(0xda)](_0x11760e(0x86),{'val':JSON[_0x11760e(0xb1)](_0x4e72af),'ack':!![]});if(_0x1c0b39)_0x36b95f[_0x11760e(0xda)](_0x11760e(0xa8),{'val':JSON[_0x11760e(0xb1)](_0x1c0b39),'ack':!![]});}else{if(_0x1a16dd[_0x11760e(0xaa)]===_0x11760e(0xd4)){const {penalties:_0x124894}=_0x1a16dd[_0x11760e(0x96)];if(_0x124894)_0x36b95f[_0x11760e(0xda)]('analysis.energy.rlPenalties',{'val':JSON['stringify'](_0x124894),'ack':!![]});}else{if(_0x1a16dd['type']===_0x11760e(0xcb)){const {forecast:_0x2ad563}=_0x1a16dd[_0x11760e(0x96)];if(_0x2ad563)_0x36b95f[_0x11760e(0xda)](_0x11760e(0x77),{'val':JSON[_0x11760e(0xb1)](_0x2ad563),'ack':!![]});}else{if(_0x1a16dd[_0x11760e(0xaa)]===_0x11760e(0xbe)){const {alerts:_0x336f0d}=_0x1a16dd[_0x11760e(0x96)];if(_0x336f0d)_0x36b95f['setStateAsync'](_0x11760e(0xa5),{'val':JSON[_0x11760e(0xb1)](_0x336f0d),'ack':!![]});}else{if(_0x1a16dd[_0x11760e(0xaa)]===_0x11760e(0x84)){const {proposals:_0x4a4d93}=_0x1a16dd[_0x11760e(0x96)];_0x36b95f[_0x11760e(0xd7)]('analysis.energy.mpcActive',(_0x113ae8,_0x4e44a0)=>{const _0x193e17=_0x11760e;_0x4e44a0&&_0x4e44a0['val']===!![]&&_0x4a4d93&&_0x4a4d93[_0x193e17(0x7f)]>0x0&&automation['applyEnergySavings'](_0x36b95f,_0x4a4d93);});}else{if(_0x1a16dd[_0x11760e(0xaa)]===_0x11760e(0xc1)){const {room:_0x5182b1,propagation:_0x1d590c}=_0x1a16dd[_0x11760e(0x96)];let _0x24108c=_0x11760e(0xd9),_0xe89866=0x0;if(_0x1d590c){const _0x286562=Object[_0x11760e(0x75)](_0x1d590c);_0x286562[_0x11760e(0x7f)]>0x0&&(_0x24108c=_0x286562[0x0][0x0],_0xe89866=_0x286562[0x0][0x1]);}_0x36b95f[_0x11760e(0xda)]('analysis.prediction.nextRoom',{'val':_0x24108c,'ack':!![]}),_0x36b95f[_0x11760e(0xda)]('analysis.prediction.confidence',{'val':_0xe89866,'ack':!![]}),automation[_0x11760e(0xbb)](_0x36b95f,_0x24108c,_0xe89866);}else{if(_0x1a16dd[_0x11760e(0xaa)]===_0x11760e(0x89)){const {probabilities:_0x4a3f22}=_0x1a16dd['payload'];if(_0x4a3f22){_0x36b95f['setStateAsync'](_0x11760e(0xd2),{'val':JSON[_0x11760e(0xb1)](_0x4a3f22),'ack':!![]});const _0x594e2e=Object[_0x11760e(0x97)](_0x4a3f22);if(_0x594e2e['length']>0x0){const _0x21295d=_0x594e2e[0x0],_0x63e93f=_0x4a3f22[_0x21295d];_0x36b95f[_0x11760e(0xda)]('analysis.prediction.trackerTopRoom',{'val':_0x21295d,'ack':!![]}),_0x36b95f[_0x11760e(0xda)](_0x11760e(0x95),{'val':_0x63e93f,'ack':!![]});}}}else{if(_0x1a16dd['type']===_0x11760e(0x98)){const {patterns:_0x39c44b}=_0x1a16dd[_0x11760e(0x96)];if(_0x39c44b&&_0x39c44b['length']>0x0)_0x36b95f['setStateAsync'](_0x11760e(0xd3),{'val':JSON[_0x11760e(0xb1)](_0x39c44b),'ack':!![]});}}}}}}}}}}}}}}}}}}function a4_0x14d8(){const _0x2adc3a=['2-digit','./setup','HEALTH_RESULT','parse','exports','PINN_PREDICT_RESULT','10eliYmI','ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20','path','details','heating','\x20AND\x20','analysis.prediction.trackerState','analysis.automation.detectedPatterns','RL_PENALTY_UPDATE','join','search','getState','ENERGY_TRAIN_RESULT','Unknown','setStateAsync','constructor','python_service','TRAINING_COMPLETE','analysis.energy.forecast','(((.+)+)+)+$','309996chwWxq','kill','[LOG]','existsSync','HEALTH_TREND_RESULT','success','analysis.health.lastCheck','entries','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20','analysis.energy.pinnForecast','analysis.energy.insulationScore','2486058hgLwsc','WARMUP_RESULT','6203586ZAAfFp','writable','stdout','1452296kbPvqi','length','4702835IHweXe','SECURITY_RESULT','toLocaleTimeString','forEach','ENERGY_OPTIMIZE_RESULT','\x0aGrund:\x20','analysis.energy.warmupSources','ENERGY_PREDICT_RESULT','ðŸ\x20Python\x20Pong','TRACKER_RESULT','log','error','analysis.security.currentThreshold','analysis.health.gaitSpeed','stderr','analysis.health.isAnomaly','data','38370501FyMiPA','reason','Failed:\x20','3OUMIvE','analysis.prediction.trackerConfidence','payload','keys','COMFORT_RESULT','analysis.security.lastScore','debug','trim','toLocaleDateString','analysis.training.status','âœ…\x20HEALTH\x20TRAINED.','HEALTH_TRAIN_RESULT','insulation','close','short','isArray','analysis.security.lastCheck','analysis.energy.ventilationAlerts','Success:\x20','toString','analysis.energy.warmupDetails','analysis.energy.heatingScore','type','de-DE','split','child_process','PONG','toISOString','analysis.health.gaitDebug','stringify','service.py','sendNotification','substring','ðŸ“ˆ\x20Health\x20Trend:\x20','warn','7aiCWGw','stdin','analysis.health.gaitSensors','Python\x20process\x20exited\x20with\x20code\x20','handlePrediction','analysis.energy.warmupTimes','12761024xiEsYg','VENTILATION_ALERT','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','sendToPythonWrapper','SIGNAL_RESULT','analysis.health.activityTrend','toFixed','analysis.isAlert','startsWith'];a4_0x14d8=function(){return _0x2adc3a;};return a4_0x14d8();}function startService(_0x2d1bf3,_0x5b5e03){const _0x492e98=a4_0x4b37ab;let _0x135e89='python3';if(fs[_0x492e98(0xe3)](_0x5b5e03))_0x135e89=_0x5b5e03;const _0x36c035=path['join'](__dirname,'..',_0x492e98(0xb2)),_0x560e48=path['join'](__dirname,'..',_0x492e98(0xdc),_0x492e98(0xb2));let _0x434ab1='';if(fs[_0x492e98(0xe3)](_0x36c035))_0x434ab1=_0x36c035;else{if(fs[_0x492e98(0xe3)](_0x560e48))_0x434ab1=_0x560e48;else{_0x2d1bf3[_0x492e98(0x8a)][_0x492e98(0x8b)](_0x492e98(0x76)+_0x36c035+_0x492e98(0xd1)+_0x560e48+'.\x20Please\x20create\x20this\x20file!');return;}}try{_0x2d1bf3[_0x492e98(0x8a)]['info'](_0x492e98(0xcd)+_0x135e89+'\x20'+_0x434ab1),pythonProcess=spawn(_0x135e89,[_0x434ab1]),pythonProcess[_0x492e98(0x7d)]['on'](_0x492e98(0x90),_0x353141=>{const _0x2d8d83=_0x492e98,_0x4044eb=_0x353141['toString']()[_0x2d8d83(0xac)]('\x0a');_0x4044eb[_0x2d8d83(0x83)](_0x173436=>{const _0x5209e5=_0x2d8d83,_0x568e80=_0x173436[_0x5209e5(0x9b)]();if(!_0x568e80)return;if(_0x568e80['startsWith'](_0x5209e5(0xe2)))_0x2d1bf3[_0x5209e5(0x8a)][_0x5209e5(0x9a)]('[PYTHON]\x20'+_0x568e80['substring'](0x5)[_0x5209e5(0x9b)]());else{if(_0x568e80[_0x5209e5(0xc5)]('[RESULT]'))try{const _0x12883a=JSON[_0x5209e5(0xc9)](_0x568e80[_0x5209e5(0xb4)](0x8)['trim']());handleResult(_0x2d1bf3,_0x12883a);}catch(_0x477888){}}});}),pythonProcess[_0x492e98(0x8e)]['on'](_0x492e98(0x90),_0xe1ab4e=>{const _0x440f23=_0x492e98;_0x2d1bf3[_0x440f23(0x8a)][_0x440f23(0x8b)]('[PYTHON\x20ERR]\x20'+_0xe1ab4e['toString']()[_0x440f23(0x9b)]());}),pythonProcess['on'](_0x492e98(0xa1),_0x2707ad=>{const _0x1c58d1=_0x492e98;_0x2d1bf3[_0x1c58d1(0x8a)][_0x1c58d1(0xb6)](_0x1c58d1(0xba)+_0x2707ad),pythonProcess=null;}),_0x2d1bf3[_0x492e98(0xc0)]=(_0x21356b,_0x12ff94)=>send(_0x2d1bf3,_0x21356b,_0x12ff94);}catch(_0x438ad0){_0x2d1bf3[_0x492e98(0x8a)][_0x492e98(0x8b)]('Error\x20launching\x20Python:\x20'+_0x438ad0['message']);}}function stopService(_0x1a3087){const _0x58a203=a4_0x4b37ab;if(pythonProcess){try{pythonProcess[_0x58a203(0xe1)]();}catch(_0x531772){}pythonProcess=null;}}module[a4_0x4b37ab(0xca)]={'startService':startService,'stopService':stopService,'send':send};