const a4_0x6281c6=a4_0x5930;function a4_0x5930(_0x427b08,_0x432693){const _0x24908c=a4_0x1e37();return a4_0x5930=function(_0x292000,_0xe2e2e5){_0x292000=_0x292000-0xf3;let _0x1e377c=_0x24908c[_0x292000];return _0x1e377c;},a4_0x5930(_0x427b08,_0x432693);}(function(_0x3c8cfd,_0x1810d9){const _0x14a1cf=a4_0x5930,_0x3dc77a=_0x3c8cfd();while(!![]){try{const _0x484f13=parseInt(_0x14a1cf(0x137))/0x1*(parseInt(_0x14a1cf(0x12a))/0x2)+parseInt(_0x14a1cf(0xf7))/0x3*(-parseInt(_0x14a1cf(0x13f))/0x4)+-parseInt(_0x14a1cf(0x102))/0x5*(-parseInt(_0x14a1cf(0x117))/0x6)+-parseInt(_0x14a1cf(0x127))/0x7*(-parseInt(_0x14a1cf(0x11f))/0x8)+-parseInt(_0x14a1cf(0x10b))/0x9+-parseInt(_0x14a1cf(0x13a))/0xa+-parseInt(_0x14a1cf(0x121))/0xb;if(_0x484f13===_0x1810d9)break;else _0x3dc77a['push'](_0x3dc77a['shift']());}catch(_0x342fa3){_0x3dc77a['push'](_0x3dc77a['shift']());}}}(a4_0x1e37,0x8fe88));const a4_0xe2e2e5=(function(){let _0x53d7af=!![];return function(_0x4aa2c2,_0x1f96c6){const _0x44a468=_0x53d7af?function(){const _0x1974a9=a4_0x5930;if(_0x1f96c6){const _0x439b34=_0x1f96c6[_0x1974a9(0x112)](_0x4aa2c2,arguments);return _0x1f96c6=null,_0x439b34;}}:function(){};return _0x53d7af=![],_0x44a468;};}()),a4_0x292000=a4_0xe2e2e5(this,function(){const _0x210aaa=a4_0x5930;return a4_0x292000[_0x210aaa(0x136)]()[_0x210aaa(0x146)]('(((.+)+)+)+$')[_0x210aaa(0x136)]()[_0x210aaa(0x12f)](a4_0x292000)['search'](_0x210aaa(0x139));});a4_0x292000();'use strict';const {spawn}=require('child_process'),path=require(a4_0x6281c6(0x126)),fs=require('fs'),setup=require(a4_0x6281c6(0xf6)),automation=require(a4_0x6281c6(0x124));let pythonProcess=null;function send(_0x525bbf,_0x54f81e,_0x3c2a76={}){const _0x364c5e=a4_0x6281c6;if(!pythonProcess||!pythonProcess[_0x364c5e(0x12d)][_0x364c5e(0x11b)])return;const _0x861d9e=JSON[_0x364c5e(0x13d)]({'command':_0x54f81e,..._0x3c2a76});try{pythonProcess['stdin'][_0x364c5e(0x123)](_0x861d9e+'\x0a');}catch(_0x2a9f66){}}function handleResult(_0x593a8c,_0x4d8d2f){const _0x4806f1=a4_0x6281c6;if(_0x4d8d2f[_0x4806f1(0xf4)]===_0x4806f1(0x113))_0x593a8c['log']['debug'](_0x4806f1(0x107));else{if(_0x4d8d2f['type']===_0x4806f1(0x142)){const {anomaly_score:_0x2da854,is_anomaly:_0x15aef0,threshold:_0x1a3f81,explanation:_0x34f13d}=_0x4d8d2f[_0x4806f1(0xfb)];_0x593a8c[_0x4806f1(0x103)](_0x4806f1(0xfc),{'val':_0x2da854,'ack':!![]}),_0x593a8c[_0x4806f1(0x103)]('analysis.security.lastCheck',{'val':new Date()[_0x4806f1(0xf8)](),'ack':!![]});if(_0x1a3f81)_0x593a8c[_0x4806f1(0x103)](_0x4806f1(0x10c),{'val':_0x1a3f81,'ack':!![]});if(_0x15aef0){let _0x167e59=_0x4806f1(0xfe)+_0x2da854[_0x4806f1(0x108)](0x4)+')';if(_0x34f13d&&_0x34f13d!==_0x4806f1(0x10f))_0x167e59+='\x0aGrund:\x20'+_0x34f13d;_0x593a8c[_0x4806f1(0x103)](_0x4806f1(0xf5),{'val':!![],'ack':!![]}),_0x593a8c[_0x4806f1(0x103)]('analysis.alertReason',{'val':_0x167e59,'ack':!![]}),setup[_0x4806f1(0xfa)](_0x593a8c,_0x4806f1(0x13b)+_0x167e59,![],!![]);}}else{if(_0x4d8d2f[_0x4806f1(0xf4)]===_0x4806f1(0x11a)){const _0x85f37c=_0x4d8d2f[_0x4806f1(0xfb)][_0x4806f1(0x138)]||'',_0x38fb64=_0x4d8d2f[_0x4806f1(0xfb)][_0x4806f1(0x131)],_0x145923=_0x4d8d2f['payload'][_0x4806f1(0x11e)]?'Success:\x20'+new Date()['toLocaleTimeString']()+'\x20('+_0x85f37c+')':_0x4806f1(0x119)+_0x4d8d2f[_0x4806f1(0xfb)][_0x4806f1(0x130)];_0x593a8c[_0x4806f1(0x103)](_0x4806f1(0x13e),{'val':_0x145923,'ack':!![]});if(_0x4d8d2f['payload'][_0x4806f1(0x11e)]&&_0x38fb64)_0x593a8c['setStateAsync'](_0x4806f1(0x10c),{'val':_0x38fb64,'ack':!![]});}else{if(_0x4d8d2f['type']===_0x4806f1(0x115)){if(_0x4d8d2f[_0x4806f1(0xfb)][_0x4806f1(0x11e)])try{const _0x2a4c04=JSON[_0x4806f1(0xfd)](_0x4d8d2f[_0x4806f1(0xfb)][_0x4806f1(0x138)]);if(_0x2a4c04[_0x4806f1(0x133)])_0x593a8c['setStateAsync'](_0x4806f1(0x140),{'val':JSON['stringify'](_0x2a4c04[_0x4806f1(0x133)]),'ack':!![]});if(_0x2a4c04['heating'])_0x593a8c['setStateAsync'](_0x4806f1(0x132),{'val':JSON[_0x4806f1(0x13d)](_0x2a4c04['heating']),'ack':!![]});}catch(_0x2a3159){}}else{if(_0x4d8d2f['type']==='HEALTH_TRAIN_RESULT'){if(_0x4d8d2f['payload'][_0x4806f1(0x11e)])_0x593a8c[_0x4806f1(0x116)][_0x4806f1(0x128)]('‚úÖ\x20HEALTH\x20TRAINED.');}else{if(_0x4d8d2f['type']===_0x4806f1(0x106))_0x593a8c[_0x4806f1(0x103)](_0x4806f1(0x118),{'val':new Date()[_0x4806f1(0xf8)](),'ack':!![]}),_0x593a8c['setStateAsync'](_0x4806f1(0x11d),{'val':_0x4d8d2f['payload'][_0x4806f1(0x10e)],'ack':!![]});else{if(_0x4d8d2f['type']==='GAIT_RESULT'){const {speed_trend:_0x1ff543}=_0x4d8d2f[_0x4806f1(0xfb)];if(_0x1ff543!==undefined)_0x593a8c[_0x4806f1(0x103)](_0x4806f1(0x120),{'val':_0x1ff543,'ack':!![]});}else{if(_0x4d8d2f[_0x4806f1(0xf4)]===_0x4806f1(0x100)){const {forecast:_0x3c0df3}=_0x4d8d2f[_0x4806f1(0xfb)];if(_0x3c0df3)_0x593a8c[_0x4806f1(0x103)](_0x4806f1(0xf3),{'val':JSON['stringify'](_0x3c0df3),'ack':!![]});}else{if(_0x4d8d2f['type']===_0x4806f1(0x141)){const {forecast:_0x1e3b5f}=_0x4d8d2f[_0x4806f1(0xfb)];if(_0x1e3b5f)_0x593a8c[_0x4806f1(0x103)](_0x4806f1(0x10a),{'val':JSON[_0x4806f1(0x13d)](_0x1e3b5f),'ack':!![]});}else{if(_0x4d8d2f[_0x4806f1(0xf4)]===_0x4806f1(0x104)){const {proposals:_0x32a990}=_0x4d8d2f[_0x4806f1(0xfb)];_0x593a8c[_0x4806f1(0x122)]('analysis.energy.mpcActive',(_0x1fc18b,_0x228124)=>{const _0xeaddf9=_0x4806f1;_0x228124&&_0x228124['val']===!![]&&_0x32a990&&_0x32a990[_0xeaddf9(0x109)]>0x0&&automation[_0xeaddf9(0x147)](_0x593a8c,_0x32a990);});}else{if(_0x4d8d2f[_0x4806f1(0xf4)]===_0x4806f1(0xff)){const {room:_0x267988,propagation:_0xfb87ec}=_0x4d8d2f[_0x4806f1(0xfb)];let _0x1d4d2b=_0x4806f1(0x10f),_0xddd049=0x0;if(_0xfb87ec){const _0x55a947=Object['entries'](_0xfb87ec);_0x55a947[_0x4806f1(0x109)]>0x0&&(_0x1d4d2b=_0x55a947[0x0][0x0],_0xddd049=_0x55a947[0x0][0x1]);}_0x593a8c['setStateAsync'](_0x4806f1(0x129),{'val':_0x1d4d2b,'ack':!![]}),_0x593a8c[_0x4806f1(0x103)](_0x4806f1(0x12e),{'val':_0xddd049,'ack':!![]}),automation[_0x4806f1(0x110)](_0x593a8c,_0x1d4d2b,_0xddd049);}else{if(_0x4d8d2f[_0x4806f1(0xf4)]===_0x4806f1(0x144)){const {patterns:_0x154d2c}=_0x4d8d2f[_0x4806f1(0xfb)];if(_0x154d2c&&_0x154d2c[_0x4806f1(0x109)]>0x0)_0x593a8c[_0x4806f1(0x103)]('analysis.automation.detectedPatterns',{'val':JSON['stringify'](_0x154d2c),'ack':!![]});}}}}}}}}}}}}}function startService(_0x14ba00,_0xe9da4b){const _0x2f67a0=a4_0x6281c6;let _0x31c923=_0x2f67a0(0x111);if(fs[_0x2f67a0(0x114)](_0xe9da4b))_0x31c923=_0xe9da4b;try{const _0x2d0973=path['join'](__dirname,'..','python_service','service.py');pythonProcess=spawn(_0x31c923,[_0x2d0973]),pythonProcess[_0x2f67a0(0x13c)]['on'](_0x2f67a0(0x143),_0xf367dc=>{const _0x444816=_0x2f67a0,_0x472b7c=_0xf367dc[_0x444816(0x136)]()[_0x444816(0x12b)]('\x0a');_0x472b7c[_0x444816(0x12c)](_0x3eca33=>{const _0x45a136=_0x444816,_0xa852e6=_0x3eca33[_0x45a136(0x135)]();if(!_0xa852e6)return;if(_0xa852e6[_0x45a136(0x10d)](_0x45a136(0x125)))_0x14ba00['log']['debug'](_0x45a136(0x101)+_0xa852e6[_0x45a136(0x105)](0x5)[_0x45a136(0x135)]());else{if(_0xa852e6[_0x45a136(0x10d)](_0x45a136(0xf9)))try{const _0x4a3ea0=JSON[_0x45a136(0xfd)](_0xa852e6[_0x45a136(0x105)](0x8)[_0x45a136(0x135)]());handleResult(_0x14ba00,_0x4a3ea0);}catch(_0x487aa8){}}});}),pythonProcess['on'](_0x2f67a0(0x11c),_0x2e60f0=>{pythonProcess=null;}),_0x14ba00['sendToPythonWrapper']=(_0x101e43,_0x3ab6f6)=>send(_0x14ba00,_0x101e43,_0x3ab6f6);}catch(_0x23a0c7){_0x14ba00[_0x2f67a0(0x116)][_0x2f67a0(0x148)]('Error\x20launching\x20Python:\x20'+_0x23a0c7[_0x2f67a0(0x134)]);}}function a4_0x1e37(){const _0x1829d0=['toFixed','length','analysis.energy.pinnForecast','2633184aksWXs','analysis.security.currentThreshold','startsWith','is_anomaly','Unknown','handlePrediction','python3','apply','PONG','existsSync','ENERGY_TRAIN_RESULT','log','18STAdnj','analysis.health.lastCheck','Failed:\x20','TRAINING_COMPLETE','writable','close','analysis.health.isAnomaly','success','40HRjhsk','analysis.health.gaitSpeed','395395pEyhtI','getState','write','./automation','[LOG]','path','1263199iiahHx','info','analysis.prediction.nextRoom','4MqFTvo','split','forEach','stdin','analysis.prediction.confidence','constructor','reason','threshold','analysis.energy.heatingScore','insulation','message','trim','toString','440579IHIHWN','details','(((.+)+)+)+$','4600540ZHlcTd','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','stdout','stringify','analysis.training.status','4jYusyT','analysis.energy.insulationScore','PINN_PREDICT_RESULT','SECURITY_RESULT','data','COMFORT_RESULT','exports','search','applyEnergySavings','error','analysis.energy.forecast','type','analysis.isAlert','./setup','2756043TxwHqy','toISOString','[RESULT]','sendNotification','payload','analysis.security.lastScore','parse','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','SIGNAL_RESULT','ENERGY_PREDICT_RESULT','[PYTHON]\x20','855435kxbPoE','setStateAsync','ENERGY_OPTIMIZE_RESULT','substring','HEALTH_RESULT','üêç\x20Python\x20Pong'];a4_0x1e37=function(){return _0x1829d0;};return a4_0x1e37();}function stopService(_0x19245a){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x477f0e){}pythonProcess=null;}}module[a4_0x6281c6(0x145)]={'startService':startService,'stopService':stopService,'send':send};