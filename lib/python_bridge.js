const a4_0x31ec99=a4_0x51a9;function a4_0x1516(){const _0x47f7fa=['success','Error\x20launching\x20Python:\x20','type','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','trim','253382TBFkPJ','sendToPythonWrapper','stringify','analysis.isAlert','toFixed','[PYTHON]\x20','SIGNAL_RESULT','rule','substring','apply','analysis.automation.detectedPatterns','threshold','analysis.security.topologyMatrix','startsWith','handlePrediction','ðŸ\x20Python\x20Pong','[RESULT]','Unknown','join','existsSync','6TYZikG','writable','analysis.energy.forecast','./automation','(((.+)+)+)+$','stdin','analysis.automation.description','constructor','ENERGY_TRAIN_RESULT','SECURITY_RESULT','payload','reason','error','setStateAsync','ANOMALY','\x20->\x20','forEach','ðŸ\x20Python\x20confirmed\x20new\x20topology.','âœ…\x20HEALTH\x20TRAINED.','2895Opxudo','analysis.health.gaitSpeed','message','HEALTH_TRAIN_RESULT','analysis.health.trendValue','child_process','TREND_RESULT','analysis.alertReason','analysis.security.currentThreshold','ENERGY_PREDICT_RESULT','43564HKiRoQ','confidence','split','analysis.energy.insulationScore','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','3gEAuuH','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','analysis.automation.patternDetected','analysis.security.lastScore','toISOString','debug','data','Regel\x20erkannt:\x20','diagnosis','[LOG]','parse','search','analysis.energy.heatingScore','PONG','change_percent','stdout','write','TOPOLOGY_RESULT','440VqidYf','details','heating','1216257VcCwaq','kill','toString','\x0aGrund:\x20','2148HoXftn','63701jAAfAb','HEALTH_RESULT','6161680iBMmrx','python_service','path','analysis.prediction.confidence','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','info','analysis.prediction.nextRoom','exports','Failed:\x20','insulation','ðŸ”®\x20Prediction:\x20From\x20','6523245XnZdGr','service.py','Success:\x20','ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.','log','length'];a4_0x1516=function(){return _0x47f7fa;};return a4_0x1516();}(function(_0x33d913,_0x269ac5){const _0x69056b=a4_0x51a9,_0x1abf66=_0x33d913();while(!![]){try{const _0x4e2329=parseInt(_0x69056b(0xf4))/0x1+parseInt(_0x69056b(0xbd))/0x2*(-parseInt(_0x69056b(0xc2))/0x3)+parseInt(_0x69056b(0xdb))/0x4*(-parseInt(_0x69056b(0xb3))/0x5)+-parseInt(_0x69056b(0xa0))/0x6*(-parseInt(_0x69056b(0xd7))/0x7)+parseInt(_0x69056b(0xde))/0x8+-parseInt(_0x69056b(0xe9))/0x9+-parseInt(_0x69056b(0xd4))/0xa*(-parseInt(_0x69056b(0xdc))/0xb);if(_0x4e2329===_0x269ac5)break;else _0x1abf66['push'](_0x1abf66['shift']());}catch(_0x9bd777){_0x1abf66['push'](_0x1abf66['shift']());}}}(a4_0x1516,0x6058d));const a4_0x46ac98=(function(){let _0x4d02fa=!![];return function(_0x4e3a79,_0x239b9a){const _0x46ce00=_0x4d02fa?function(){const _0xdccde7=a4_0x51a9;if(_0x239b9a){const _0x25d233=_0x239b9a[_0xdccde7(0xfd)](_0x4e3a79,arguments);return _0x239b9a=null,_0x25d233;}}:function(){};return _0x4d02fa=![],_0x46ce00;};}()),a4_0x16da33=a4_0x46ac98(this,function(){const _0x19dd99=a4_0x51a9;return a4_0x16da33[_0x19dd99(0xd9)]()[_0x19dd99(0xcd)](_0x19dd99(0xa4))['toString']()[_0x19dd99(0xa7)](a4_0x16da33)[_0x19dd99(0xcd)]('(((.+)+)+)+$');});a4_0x16da33();'use strict';const {spawn}=require(a4_0x31ec99(0xb8)),path=require(a4_0x31ec99(0xe0)),fs=require('fs'),setup=require('./setup'),automation=require(a4_0x31ec99(0xa3));let pythonProcess=null;function send(_0x3942de,_0x5275ff,_0x86362b={}){const _0x33f9bd=a4_0x31ec99;if(!pythonProcess||!pythonProcess['stdin'][_0x33f9bd(0xa1)])return;const _0x2c1d9f=JSON[_0x33f9bd(0xf6)]({'command':_0x5275ff,..._0x86362b});try{pythonProcess[_0x33f9bd(0xa5)][_0x33f9bd(0xd2)](_0x2c1d9f+'\x0a');}catch(_0x5d0f7e){}}function handleResult(_0x57eb0c,_0x231eef){const _0x1ebf48=a4_0x31ec99;if(_0x231eef[_0x1ebf48(0xf1)]===_0x1ebf48(0xcf))_0x57eb0c[_0x1ebf48(0xed)]['debug'](_0x1ebf48(0x9b));else{if(_0x231eef[_0x1ebf48(0xf1)]===_0x1ebf48(0xa9)){const {anomaly_score:_0xbd87,is_anomaly:_0x5b9f6a,threshold:_0x26de75,explanation:_0x45e5d7}=_0x231eef[_0x1ebf48(0xaa)];_0x57eb0c[_0x1ebf48(0xed)]['info'](_0x1ebf48(0xc1)+_0xbd87['toFixed'](0x5)+_0x1ebf48(0xaf)+(_0x5b9f6a?_0x1ebf48(0xae):'OK')),_0x57eb0c[_0x1ebf48(0xad)](_0x1ebf48(0xc5),{'val':_0xbd87,'ack':!![]}),_0x57eb0c[_0x1ebf48(0xad)]('analysis.security.lastCheck',{'val':new Date()[_0x1ebf48(0xc6)](),'ack':!![]});if(_0x26de75)_0x57eb0c[_0x1ebf48(0xad)](_0x1ebf48(0xbb),{'val':_0x26de75,'ack':!![]});if(_0x5b9f6a){let _0x339cd2=_0x1ebf48(0xf2)+_0xbd87[_0x1ebf48(0xf8)](0x4)+')';if(_0x45e5d7&&_0x45e5d7!==_0x1ebf48(0x9d))_0x339cd2+=_0x1ebf48(0xda)+_0x45e5d7;_0x57eb0c[_0x1ebf48(0xad)](_0x1ebf48(0xf7),{'val':!![],'ack':!![]}),_0x57eb0c[_0x1ebf48(0xad)](_0x1ebf48(0xba),{'val':_0x339cd2,'ack':!![]}),setup['sendNotification'](_0x57eb0c,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x339cd2,![],!![]);}}else{if(_0x231eef['type']==='TRAINING_COMPLETE'){const _0x4e1867=_0x231eef[_0x1ebf48(0xaa)][_0x1ebf48(0xd5)]||'',_0x438333=_0x231eef[_0x1ebf48(0xaa)][_0x1ebf48(0xff)],_0xeb6d1f=_0x231eef['payload'][_0x1ebf48(0xef)]?_0x1ebf48(0xeb)+new Date()['toLocaleTimeString']()+'\x20('+_0x4e1867+')':_0x1ebf48(0xe6)+_0x231eef[_0x1ebf48(0xaa)][_0x1ebf48(0xab)];_0x57eb0c[_0x1ebf48(0xad)]('analysis.training.status',{'val':_0xeb6d1f,'ack':!![]});if(_0x231eef[_0x1ebf48(0xaa)][_0x1ebf48(0xef)]&&_0x438333)_0x57eb0c[_0x1ebf48(0xad)](_0x1ebf48(0xbb),{'val':_0x438333,'ack':!![]});}else{if(_0x231eef[_0x1ebf48(0xf1)]==='COMFORT_RESULT'){const {patterns:_0x390b41}=_0x231eef[_0x1ebf48(0xaa)];if(_0x390b41&&_0x390b41['length']>0x0){_0x57eb0c[_0x1ebf48(0xed)][_0x1ebf48(0xe3)](_0x1ebf48(0xc3)+_0x390b41['length']+'\x20new\x20patterns.'),_0x57eb0c[_0x1ebf48(0xad)](_0x1ebf48(0xfe),{'val':JSON[_0x1ebf48(0xf6)](_0x390b41),'ack':!![]});const _0xd2a5a2=_0x390b41[0x0],_0x210da4=_0x1ebf48(0xc9)+_0xd2a5a2[_0x1ebf48(0xfb)]+'\x20('+(_0xd2a5a2[_0x1ebf48(0xbe)]*0x64)[_0x1ebf48(0xf8)](0x0)+'%)';_0x57eb0c[_0x1ebf48(0xad)](_0x1ebf48(0xc4),{'val':!![],'ack':!![]}),_0x57eb0c['setStateAsync'](_0x1ebf48(0xa6),{'val':_0x210da4,'ack':!![]});}else _0x57eb0c[_0x1ebf48(0xed)][_0x1ebf48(0xe3)](_0x1ebf48(0xe2)),_0x57eb0c['setStateAsync'](_0x1ebf48(0xc4),{'val':![],'ack':!![]}),_0x57eb0c[_0x1ebf48(0xad)](_0x1ebf48(0xfe),{'val':'[]','ack':!![]});}else{if(_0x231eef[_0x1ebf48(0xf1)]===_0x1ebf48(0xa8)){if(_0x231eef[_0x1ebf48(0xaa)][_0x1ebf48(0xef)])try{const _0x1d60ab=JSON[_0x1ebf48(0xcc)](_0x231eef['payload'][_0x1ebf48(0xd5)]);if(_0x1d60ab[_0x1ebf48(0xe7)])_0x57eb0c[_0x1ebf48(0xad)](_0x1ebf48(0xc0),{'val':JSON[_0x1ebf48(0xf6)](_0x1d60ab[_0x1ebf48(0xe7)]),'ack':!![]});if(_0x1d60ab['heating'])_0x57eb0c[_0x1ebf48(0xad)](_0x1ebf48(0xce),{'val':JSON['stringify'](_0x1d60ab[_0x1ebf48(0xd6)]),'ack':!![]});}catch(_0x752363){}}else{if(_0x231eef[_0x1ebf48(0xf1)]===_0x1ebf48(0xb6)){if(_0x231eef[_0x1ebf48(0xaa)][_0x1ebf48(0xef)])_0x57eb0c[_0x1ebf48(0xed)][_0x1ebf48(0xe3)](_0x1ebf48(0xb2));}else{if(_0x231eef[_0x1ebf48(0xf1)]===_0x1ebf48(0xdd))_0x57eb0c['setStateAsync']('analysis.health.lastCheck',{'val':new Date()[_0x1ebf48(0xc6)](),'ack':!![]}),_0x57eb0c[_0x1ebf48(0xad)]('analysis.health.isAnomaly',{'val':_0x231eef[_0x1ebf48(0xaa)]['is_anomaly'],'ack':!![]});else{if(_0x231eef[_0x1ebf48(0xf1)]===_0x1ebf48(0xb9))_0x57eb0c[_0x1ebf48(0xad)]('analysis.health.trendDiagnosis',{'val':_0x231eef['payload'][_0x1ebf48(0xca)],'ack':!![]}),_0x57eb0c[_0x1ebf48(0xad)](_0x1ebf48(0xb7),{'val':_0x231eef['payload'][_0x1ebf48(0xd0)],'ack':!![]});else{if(_0x231eef[_0x1ebf48(0xf1)]==='GAIT_RESULT'){const {speed_trend:_0x2801f7}=_0x231eef[_0x1ebf48(0xaa)];if(_0x2801f7!==undefined)_0x57eb0c[_0x1ebf48(0xad)](_0x1ebf48(0xb4),{'val':_0x2801f7,'ack':!![]});}else{if(_0x231eef[_0x1ebf48(0xf1)]===_0x1ebf48(0xbc)){const {forecast:_0x47220d}=_0x231eef[_0x1ebf48(0xaa)];if(_0x47220d)_0x57eb0c[_0x1ebf48(0xad)](_0x1ebf48(0xa2),{'val':JSON[_0x1ebf48(0xf6)](_0x47220d),'ack':!![]});}else{if(_0x231eef[_0x1ebf48(0xf1)]===_0x1ebf48(0xd3)){const {data:_0x15d696}=_0x231eef[_0x1ebf48(0xaa)];_0x15d696&&(_0x57eb0c[_0x1ebf48(0xed)]['info'](_0x1ebf48(0xec)),_0x57eb0c['setStateAsync'](_0x1ebf48(0x100),{'val':JSON[_0x1ebf48(0xf6)](_0x15d696),'ack':!![]}));}else{if(_0x231eef[_0x1ebf48(0xf1)]==='TOPOLOGY_ACK')_0x57eb0c[_0x1ebf48(0xed)]['debug'](_0x1ebf48(0xb1));else{if(_0x231eef[_0x1ebf48(0xf1)]===_0x1ebf48(0xfa)){const {room:_0x532cd1,propagation:_0x63fba9}=_0x231eef['payload'];let _0x5a3677=_0x1ebf48(0x9d),_0x28091b=0x0;if(_0x63fba9){const _0x58e12b=Object['entries'](_0x63fba9);_0x58e12b[_0x1ebf48(0xee)]>0x0&&(_0x5a3677=_0x58e12b[0x0][0x0],_0x28091b=_0x58e12b[0x0][0x1]);}_0x57eb0c[_0x1ebf48(0xad)](_0x1ebf48(0xe4),{'val':_0x5a3677,'ack':!![]}),_0x57eb0c[_0x1ebf48(0xad)](_0x1ebf48(0xe1),{'val':_0x28091b,'ack':!![]}),_0x28091b>0.4&&_0x57eb0c[_0x1ebf48(0xed)][_0x1ebf48(0xc7)](_0x1ebf48(0xe8)+_0x532cd1+'\x20->\x20Likely\x20'+_0x5a3677+'\x20('+(_0x28091b*0x64)['toFixed'](0x0)+'%)'),automation[_0x1ebf48(0x9a)](_0x57eb0c,_0x5a3677,_0x28091b);}}}}}}}}}}}}}}function a4_0x51a9(_0x307919,_0x1a0d31){const _0x16b719=a4_0x1516();return a4_0x51a9=function(_0x16da33,_0x46ac98){_0x16da33=_0x16da33-0x9a;let _0x151679=_0x16b719[_0x16da33];return _0x151679;},a4_0x51a9(_0x307919,_0x1a0d31);}function startService(_0x2a867f,_0x5bc8c5){const _0x5dbdd4=a4_0x31ec99;let _0x4ccfc0='python3';if(fs[_0x5dbdd4(0x9f)](_0x5bc8c5))_0x4ccfc0=_0x5bc8c5;try{const _0x3d8b5a=path[_0x5dbdd4(0x9e)](__dirname,'..',_0x5dbdd4(0xdf),_0x5dbdd4(0xea));pythonProcess=spawn(_0x4ccfc0,[_0x3d8b5a]),pythonProcess[_0x5dbdd4(0xd1)]['on'](_0x5dbdd4(0xc8),_0x29a7eb=>{const _0x20135e=_0x5dbdd4,_0x2c372c=_0x29a7eb['toString']()[_0x20135e(0xbf)]('\x0a');_0x2c372c[_0x20135e(0xb0)](_0x174107=>{const _0xc79f9e=_0x20135e,_0x1c950b=_0x174107[_0xc79f9e(0xf3)]();if(!_0x1c950b)return;if(_0x1c950b[_0xc79f9e(0x101)](_0xc79f9e(0xcb)))_0x2a867f[_0xc79f9e(0xed)][_0xc79f9e(0xc7)](_0xc79f9e(0xf9)+_0x1c950b[_0xc79f9e(0xfc)](0x5)[_0xc79f9e(0xf3)]());else{if(_0x1c950b['startsWith'](_0xc79f9e(0x9c)))try{const _0x4137d1=JSON[_0xc79f9e(0xcc)](_0x1c950b[_0xc79f9e(0xfc)](0x8)[_0xc79f9e(0xf3)]());handleResult(_0x2a867f,_0x4137d1);}catch(_0x56364b){}}});}),pythonProcess['on']('close',_0x25342e=>{pythonProcess=null;}),_0x2a867f[_0x5dbdd4(0xf5)]=(_0x32bfbc,_0x3eb07c)=>send(_0x2a867f,_0x32bfbc,_0x3eb07c);}catch(_0x1e79a4){_0x2a867f[_0x5dbdd4(0xed)][_0x5dbdd4(0xac)](_0x5dbdd4(0xf0)+_0x1e79a4[_0x5dbdd4(0xb5)]);}}function stopService(_0x11f1a6){const _0x475893=a4_0x31ec99;if(pythonProcess){try{pythonProcess[_0x475893(0xd8)]();}catch(_0x7427){}pythonProcess=null;}}module[a4_0x31ec99(0xe5)]={'startService':startService,'stopService':stopService,'send':send};