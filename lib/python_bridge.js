function a4_0x205a(_0x31215f,_0x110758){const _0x3de63a=a4_0x4e34();return a4_0x205a=function(_0x4d81dc,_0x30c1f2){_0x4d81dc=_0x4d81dc-0x1a0;let _0x4e348c=_0x3de63a[_0x4d81dc];return _0x4e348c;},a4_0x205a(_0x31215f,_0x110758);}const a4_0xff4424=a4_0x205a;(function(_0x383dd3,_0x1a40b3){const _0x29fbcd=a4_0x205a,_0x494b70=_0x383dd3();while(!![]){try{const _0x400da3=-parseInt(_0x29fbcd(0x1d3))/0x1+-parseInt(_0x29fbcd(0x1a3))/0x2*(-parseInt(_0x29fbcd(0x1d1))/0x3)+parseInt(_0x29fbcd(0x1bf))/0x4*(parseInt(_0x29fbcd(0x1bc))/0x5)+-parseInt(_0x29fbcd(0x1da))/0x6+parseInt(_0x29fbcd(0x1c5))/0x7*(parseInt(_0x29fbcd(0x1f6))/0x8)+parseInt(_0x29fbcd(0x1f9))/0x9*(parseInt(_0x29fbcd(0x1de))/0xa)+parseInt(_0x29fbcd(0x1fb))/0xb*(-parseInt(_0x29fbcd(0x1f2))/0xc);if(_0x400da3===_0x1a40b3)break;else _0x494b70['push'](_0x494b70['shift']());}catch(_0x23333f){_0x494b70['push'](_0x494b70['shift']());}}}(a4_0x4e34,0x89b25));const a4_0x30c1f2=(function(){let _0x2aef64=!![];return function(_0x420cf7,_0x5b8f2b){const _0x4a139b=_0x2aef64?function(){const _0xbfd619=a4_0x205a;if(_0x5b8f2b){const _0x514f75=_0x5b8f2b[_0xbfd619(0x1c3)](_0x420cf7,arguments);return _0x5b8f2b=null,_0x514f75;}}:function(){};return _0x2aef64=![],_0x4a139b;};}()),a4_0x4d81dc=a4_0x30c1f2(this,function(){const _0xdd0f0b=a4_0x205a;return a4_0x4d81dc[_0xdd0f0b(0x1f5)]()[_0xdd0f0b(0x1be)](_0xdd0f0b(0x1e4))[_0xdd0f0b(0x1f5)]()[_0xdd0f0b(0x1b0)](a4_0x4d81dc)[_0xdd0f0b(0x1be)]('(((.+)+)+)+$');});a4_0x4d81dc();'use strict';const {spawn}=require(a4_0xff4424(0x1f8)),path=require(a4_0xff4424(0x1ab)),fs=require('fs'),setup=require(a4_0xff4424(0x1e1)),automation=require('./automation');let pythonProcess=null;function send(_0x1915b7,_0xf3f3ee,_0x3e899e={}){const _0x51f216=a4_0xff4424;if(!pythonProcess||!pythonProcess[_0x51f216(0x1d8)]['writable'])return;const _0x5d8931=JSON[_0x51f216(0x1aa)]({'command':_0xf3f3ee,..._0x3e899e});try{pythonProcess[_0x51f216(0x1d8)][_0x51f216(0x1ea)](_0x5d8931+'\x0a');}catch(_0x1f950a){}}function a4_0x4e34(){const _0x574067=['handlePrediction','insulation','success','toFixed','kill','ðŸ\x20Python\x20Pong','stringify','path','error','TRAINING_COMPLETE','\x0aGrund:\x20','val','constructor','reason','[LOG]','length','analysis.security.lastScore','ENERGY_PREDICT_RESULT','analysis.health.isAnomaly','log','setStateAsync','analysis.alertReason','analysis.isAlert','heating','925415HLOyvt','âš ï¸\x20SECURITY\x20ALARM:\x20','search','24HpDyIY','analysis.training.status','analysis.energy.mpcActive','analysis.energy.forecast','apply','debug','1152886LdBtzG','info','analysis.automation.detectedPatterns','âœ…\x20HEALTH\x20TRAINED.','analysis.prediction.nextRoom','PONG','substring','toLocaleTimeString','analysis.security.lastCheck','sendNotification','exports','python3','27TsyfJh','ENERGY_OPTIMIZE_RESULT','997100CJZnEH','forEach','getState','type','stdout','stdin','python_service','6037542tOuFXy','is_anomaly','Success:\x20','threshold','470xglxli','GAIT_RESULT','ENERGY_TRAIN_RESULT','./setup','entries','analysis.energy.heatingScore','(((.+)+)+)+$','Unknown','analysis.security.currentThreshold','split','SECURITY_RESULT','startsWith','write','details','analysis.health.lastCheck','HEALTH_RESULT','toISOString','sendToPythonWrapper','COMFORT_RESULT','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','1367376DYzVJA','analysis.prediction.confidence','applyEnergySavings','toString','8DMHJAu','payload','child_process','98811LQZtqS','[RESULT]','22zSfNmc','trim','SIGNAL_RESULT','parse','223122vORdRs'];a4_0x4e34=function(){return _0x574067;};return a4_0x4e34();}function handleResult(_0x30a34e,_0x4e913c){const _0x1a1f75=a4_0xff4424;if(_0x4e913c[_0x1a1f75(0x1d6)]===_0x1a1f75(0x1ca))_0x30a34e['log']['debug'](_0x1a1f75(0x1a9));else{if(_0x4e913c[_0x1a1f75(0x1d6)]===_0x1a1f75(0x1e8)){const {anomaly_score:_0x32eb35,is_anomaly:_0x229a48,threshold:_0x4b2b70,explanation:_0x8b1acb}=_0x4e913c[_0x1a1f75(0x1f7)];_0x30a34e['setStateAsync'](_0x1a1f75(0x1b4),{'val':_0x32eb35,'ack':!![]}),_0x30a34e['setStateAsync'](_0x1a1f75(0x1cd),{'val':new Date()[_0x1a1f75(0x1ee)](),'ack':!![]});if(_0x4b2b70)_0x30a34e['setStateAsync'](_0x1a1f75(0x1e6),{'val':_0x4b2b70,'ack':!![]});if(_0x229a48){let _0x1d2188=_0x1a1f75(0x1f1)+_0x32eb35[_0x1a1f75(0x1a7)](0x4)+')';if(_0x8b1acb&&_0x8b1acb!=='Unknown')_0x1d2188+=_0x1a1f75(0x1ae)+_0x8b1acb;_0x30a34e['setStateAsync'](_0x1a1f75(0x1ba),{'val':!![],'ack':!![]}),_0x30a34e[_0x1a1f75(0x1b8)](_0x1a1f75(0x1b9),{'val':_0x1d2188,'ack':!![]}),setup[_0x1a1f75(0x1ce)](_0x30a34e,_0x1a1f75(0x1bd)+_0x1d2188,![],!![]);}}else{if(_0x4e913c['type']===_0x1a1f75(0x1ad)){const _0x21a118=_0x4e913c[_0x1a1f75(0x1f7)][_0x1a1f75(0x1eb)]||'',_0x21842c=_0x4e913c[_0x1a1f75(0x1f7)][_0x1a1f75(0x1dd)],_0x46996a=_0x4e913c[_0x1a1f75(0x1f7)][_0x1a1f75(0x1a6)]?_0x1a1f75(0x1dc)+new Date()[_0x1a1f75(0x1cc)]()+'\x20('+_0x21a118+')':'Failed:\x20'+_0x4e913c[_0x1a1f75(0x1f7)][_0x1a1f75(0x1b1)];_0x30a34e[_0x1a1f75(0x1b8)](_0x1a1f75(0x1c0),{'val':_0x46996a,'ack':!![]});if(_0x4e913c['payload'][_0x1a1f75(0x1a6)]&&_0x21842c)_0x30a34e[_0x1a1f75(0x1b8)]('analysis.security.currentThreshold',{'val':_0x21842c,'ack':!![]});}else{if(_0x4e913c[_0x1a1f75(0x1d6)]===_0x1a1f75(0x1e0)){if(_0x4e913c['payload'][_0x1a1f75(0x1a6)])try{const _0x5820a8=JSON[_0x1a1f75(0x1a2)](_0x4e913c[_0x1a1f75(0x1f7)][_0x1a1f75(0x1eb)]);if(_0x5820a8[_0x1a1f75(0x1a5)])_0x30a34e[_0x1a1f75(0x1b8)]('analysis.energy.insulationScore',{'val':JSON[_0x1a1f75(0x1aa)](_0x5820a8[_0x1a1f75(0x1a5)]),'ack':!![]});if(_0x5820a8[_0x1a1f75(0x1bb)])_0x30a34e[_0x1a1f75(0x1b8)](_0x1a1f75(0x1e3),{'val':JSON[_0x1a1f75(0x1aa)](_0x5820a8[_0x1a1f75(0x1bb)]),'ack':!![]});}catch(_0x33a5b3){}}else{if(_0x4e913c[_0x1a1f75(0x1d6)]==='HEALTH_TRAIN_RESULT'){if(_0x4e913c[_0x1a1f75(0x1f7)][_0x1a1f75(0x1a6)])_0x30a34e[_0x1a1f75(0x1b7)][_0x1a1f75(0x1c6)](_0x1a1f75(0x1c8));}else{if(_0x4e913c[_0x1a1f75(0x1d6)]===_0x1a1f75(0x1ed))_0x30a34e[_0x1a1f75(0x1b8)](_0x1a1f75(0x1ec),{'val':new Date()['toISOString'](),'ack':!![]}),_0x30a34e[_0x1a1f75(0x1b8)](_0x1a1f75(0x1b6),{'val':_0x4e913c[_0x1a1f75(0x1f7)][_0x1a1f75(0x1db)],'ack':!![]});else{if(_0x4e913c[_0x1a1f75(0x1d6)]===_0x1a1f75(0x1df)){const {speed_trend:_0x1b595b}=_0x4e913c['payload'];if(_0x1b595b!==undefined)_0x30a34e[_0x1a1f75(0x1b8)]('analysis.health.gaitSpeed',{'val':_0x1b595b,'ack':!![]});}else{if(_0x4e913c[_0x1a1f75(0x1d6)]===_0x1a1f75(0x1b5)){const {forecast:_0x46e389}=_0x4e913c[_0x1a1f75(0x1f7)];if(_0x46e389)_0x30a34e['setStateAsync'](_0x1a1f75(0x1c2),{'val':JSON[_0x1a1f75(0x1aa)](_0x46e389),'ack':!![]});}else{if(_0x4e913c[_0x1a1f75(0x1d6)]===_0x1a1f75(0x1d2)){const {proposals:_0x58bc8c}=_0x4e913c[_0x1a1f75(0x1f7)];_0x30a34e[_0x1a1f75(0x1d5)](_0x1a1f75(0x1c1),(_0x2e6d32,_0x484184)=>{const _0x2520cb=_0x1a1f75;_0x484184&&_0x484184[_0x2520cb(0x1af)]===!![]&&_0x58bc8c&&_0x58bc8c[_0x2520cb(0x1b3)]>0x0&&automation[_0x2520cb(0x1f4)](_0x30a34e,_0x58bc8c);});}else{if(_0x4e913c[_0x1a1f75(0x1d6)]===_0x1a1f75(0x1a1)){const {room:_0xb7eeba,propagation:_0x383ea1}=_0x4e913c[_0x1a1f75(0x1f7)];let _0x5b8e14=_0x1a1f75(0x1e5),_0x3b5ed5=0x0;if(_0x383ea1){const _0x199fde=Object[_0x1a1f75(0x1e2)](_0x383ea1);_0x199fde[_0x1a1f75(0x1b3)]>0x0&&(_0x5b8e14=_0x199fde[0x0][0x0],_0x3b5ed5=_0x199fde[0x0][0x1]);}_0x30a34e['setStateAsync'](_0x1a1f75(0x1c9),{'val':_0x5b8e14,'ack':!![]}),_0x30a34e[_0x1a1f75(0x1b8)](_0x1a1f75(0x1f3),{'val':_0x3b5ed5,'ack':!![]}),automation[_0x1a1f75(0x1a4)](_0x30a34e,_0x5b8e14,_0x3b5ed5);}else{if(_0x4e913c[_0x1a1f75(0x1d6)]===_0x1a1f75(0x1f0)){const {patterns:_0x14796d}=_0x4e913c[_0x1a1f75(0x1f7)];if(_0x14796d&&_0x14796d[_0x1a1f75(0x1b3)]>0x0)_0x30a34e[_0x1a1f75(0x1b8)](_0x1a1f75(0x1c7),{'val':JSON['stringify'](_0x14796d),'ack':!![]});}}}}}}}}}}}}function startService(_0xe07f90,_0x3c80a5){const _0x1a5fc7=a4_0xff4424;let _0x3e1960=_0x1a5fc7(0x1d0);if(fs['existsSync'](_0x3c80a5))_0x3e1960=_0x3c80a5;try{const _0x3b90db=path['join'](__dirname,'..',_0x1a5fc7(0x1d9),'service.py');pythonProcess=spawn(_0x3e1960,[_0x3b90db]),pythonProcess[_0x1a5fc7(0x1d7)]['on']('data',_0x42878c=>{const _0x5a733b=_0x1a5fc7,_0x4a06c9=_0x42878c[_0x5a733b(0x1f5)]()[_0x5a733b(0x1e7)]('\x0a');_0x4a06c9[_0x5a733b(0x1d4)](_0x55c61b=>{const _0x4d4952=_0x5a733b,_0x15aec8=_0x55c61b[_0x4d4952(0x1a0)]();if(!_0x15aec8)return;if(_0x15aec8[_0x4d4952(0x1e9)](_0x4d4952(0x1b2)))_0xe07f90['log'][_0x4d4952(0x1c4)]('[PYTHON]\x20'+_0x15aec8[_0x4d4952(0x1cb)](0x5)[_0x4d4952(0x1a0)]());else{if(_0x15aec8[_0x4d4952(0x1e9)](_0x4d4952(0x1fa)))try{const _0x4b3baf=JSON['parse'](_0x15aec8[_0x4d4952(0x1cb)](0x8)[_0x4d4952(0x1a0)]());handleResult(_0xe07f90,_0x4b3baf);}catch(_0x1ac804){}}});}),pythonProcess['on']('close',_0x5b0ca4=>{pythonProcess=null;}),_0xe07f90[_0x1a5fc7(0x1ef)]=(_0x5bce55,_0x45dd11)=>send(_0xe07f90,_0x5bce55,_0x45dd11);}catch(_0x25a7a8){_0xe07f90['log'][_0x1a5fc7(0x1ac)]('Error\x20launching\x20Python:\x20'+_0x25a7a8['message']);}}function stopService(_0x13de0f){const _0x4374ed=a4_0xff4424;if(pythonProcess){try{pythonProcess[_0x4374ed(0x1a8)]();}catch(_0x31ca37){}pythonProcess=null;}}module[a4_0xff4424(0x1cf)]={'startService':startService,'stopService':stopService,'send':send};