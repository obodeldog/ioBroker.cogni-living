const a4_0x221769=a4_0x2a81;(function(_0x18c62e,_0xa8c2bb){const _0x3f13e0=a4_0x2a81,_0x2687f4=_0x18c62e();while(!![]){try{const _0x2ea588=-parseInt(_0x3f13e0(0x8f))/0x1*(-parseInt(_0x3f13e0(0xc5))/0x2)+parseInt(_0x3f13e0(0xd7))/0x3*(-parseInt(_0x3f13e0(0xd2))/0x4)+parseInt(_0x3f13e0(0xc4))/0x5+-parseInt(_0x3f13e0(0x95))/0x6*(-parseInt(_0x3f13e0(0xe8))/0x7)+parseInt(_0x3f13e0(0xad))/0x8+parseInt(_0x3f13e0(0xdf))/0x9+-parseInt(_0x3f13e0(0x90))/0xa;if(_0x2ea588===_0xa8c2bb)break;else _0x2687f4['push'](_0x2687f4['shift']());}catch(_0x41c743){_0x2687f4['push'](_0x2687f4['shift']());}}}(a4_0x548d,0x42093));const a4_0x143bd8=(function(){let _0x1e0e70=!![];return function(_0x3df786,_0x416bc4){const _0x422539=_0x1e0e70?function(){if(_0x416bc4){const _0x388b3f=_0x416bc4['apply'](_0x3df786,arguments);return _0x416bc4=null,_0x388b3f;}}:function(){};return _0x1e0e70=![],_0x422539;};}()),a4_0x2ac5e4=a4_0x143bd8(this,function(){const _0x32fcaa=a4_0x2a81;return a4_0x2ac5e4[_0x32fcaa(0xd6)]()[_0x32fcaa(0xa7)](_0x32fcaa(0xb0))[_0x32fcaa(0xd6)]()[_0x32fcaa(0x93)](a4_0x2ac5e4)['search'](_0x32fcaa(0xb0));});a4_0x2ac5e4();'use strict';const {spawn}=require('child_process'),path=require(a4_0x221769(0xae)),fs=require('fs'),setup=require(a4_0x221769(0xc3)),automation=require(a4_0x221769(0xd5));let pythonProcess=null;function a4_0x548d(){const _0x537db8=['getState','analysis.prediction.confidence','message','entries','stringify','log','debug','[PYTHON]\x20','analysis.energy.forecast','Success:\x20','SIGNAL_RESULT','search','service.py','existsSync','analysis.energy.pinnForecast','close','analysis.security.lastScore','1561560cUyPoC','path','PONG','(((.+)+)+)+$','writable','ENERGY_TRAIN_RESULT','data','Error\x20launching\x20Python:\x20','success','python_service','split','kill','Failed:\x20','HEALTH_RESULT','applyEnergySavings','analysis.security.lastCheck','[LOG]','write','âœ…\x20HEALTH\x20TRAINED.','Unknown','[RESULT]','handlePrediction','./setup','886940QBIcFM','4KPdhIS','analysis.security.currentThreshold','analysis.energy.insulationScore','type','HEALTH_TRAIN_RESULT','startsWith','threshold','ðŸ\x20Python\x20Pong','analysis.health.isAnomaly','analysis.energy.mpcActive','\x0aGrund:\x20','substring','analysis.health.lastCheck','199876SBlANO','PINN_PREDICT_RESULT','length','./automation','toString','27SyEwSr','sendNotification','analysis.health.gaitSpeed','exports','heating','analysis.energy.heatingScore','GAIT_RESULT','ENERGY_OPTIMIZE_RESULT','2303685DIDtHW','sendToPythonWrapper','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','trim','COMFORT_RESULT','TRAINING_COMPLETE','setStateAsync','parse','toISOString','7KdMPsB','228728tGxdre','3675090uSYsGw','analysis.training.status','join','constructor','stdout','10254EQBrul','forEach','is_anomaly','analysis.isAlert','insulation','payload','toLocaleTimeString'];a4_0x548d=function(){return _0x537db8;};return a4_0x548d();}function send(_0x5a7c41,_0x5e39f3,_0x9c99fa={}){const _0x27efbe=a4_0x221769;if(!pythonProcess||!pythonProcess['stdin'][_0x27efbe(0xb1)])return;const _0x446122=JSON[_0x27efbe(0xa0)]({'command':_0x5e39f3,..._0x9c99fa});try{pythonProcess['stdin'][_0x27efbe(0xbe)](_0x446122+'\x0a');}catch(_0x4ed15e){}}function a4_0x2a81(_0x3cbc55,_0x12f359){const _0x4f7660=a4_0x548d();return a4_0x2a81=function(_0x2ac5e4,_0x143bd8){_0x2ac5e4=_0x2ac5e4-0x8f;let _0x548d96=_0x4f7660[_0x2ac5e4];return _0x548d96;},a4_0x2a81(_0x3cbc55,_0x12f359);}function handleResult(_0x3c3411,_0x296ac0){const _0x4ca447=a4_0x221769;if(_0x296ac0['type']===_0x4ca447(0xaf))_0x3c3411[_0x4ca447(0xa1)][_0x4ca447(0xa2)](_0x4ca447(0xcc));else{if(_0x296ac0[_0x4ca447(0xc8)]==='SECURITY_RESULT'){const {anomaly_score:_0x1795b8,is_anomaly:_0x19ff59,threshold:_0x2b9c2b,explanation:_0x4482fd}=_0x296ac0['payload'];_0x3c3411[_0x4ca447(0xe5)](_0x4ca447(0xac),{'val':_0x1795b8,'ack':!![]}),_0x3c3411[_0x4ca447(0xe5)](_0x4ca447(0xbc),{'val':new Date()[_0x4ca447(0xe7)](),'ack':!![]});if(_0x2b9c2b)_0x3c3411[_0x4ca447(0xe5)](_0x4ca447(0xc6),{'val':_0x2b9c2b,'ack':!![]});if(_0x19ff59){let _0x42fd94=_0x4ca447(0xe1)+_0x1795b8['toFixed'](0x4)+')';if(_0x4482fd&&_0x4482fd!=='Unknown')_0x42fd94+=_0x4ca447(0xcf)+_0x4482fd;_0x3c3411[_0x4ca447(0xe5)](_0x4ca447(0x98),{'val':!![],'ack':!![]}),_0x3c3411[_0x4ca447(0xe5)]('analysis.alertReason',{'val':_0x42fd94,'ack':!![]}),setup[_0x4ca447(0xd8)](_0x3c3411,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x42fd94,![],!![]);}}else{if(_0x296ac0[_0x4ca447(0xc8)]===_0x4ca447(0xe4)){const _0x1fe79e=_0x296ac0['payload']['details']||'',_0x31c2dc=_0x296ac0[_0x4ca447(0x9a)][_0x4ca447(0xcb)],_0x27a644=_0x296ac0['payload'][_0x4ca447(0xb5)]?_0x4ca447(0xa5)+new Date()[_0x4ca447(0x9b)]()+'\x20('+_0x1fe79e+')':_0x4ca447(0xb9)+_0x296ac0[_0x4ca447(0x9a)]['reason'];_0x3c3411[_0x4ca447(0xe5)](_0x4ca447(0x91),{'val':_0x27a644,'ack':!![]});if(_0x296ac0[_0x4ca447(0x9a)][_0x4ca447(0xb5)]&&_0x31c2dc)_0x3c3411[_0x4ca447(0xe5)]('analysis.security.currentThreshold',{'val':_0x31c2dc,'ack':!![]});}else{if(_0x296ac0[_0x4ca447(0xc8)]===_0x4ca447(0xb2)){if(_0x296ac0[_0x4ca447(0x9a)][_0x4ca447(0xb5)])try{const _0x428c07=JSON[_0x4ca447(0xe6)](_0x296ac0['payload']['details']);if(_0x428c07[_0x4ca447(0x99)])_0x3c3411[_0x4ca447(0xe5)](_0x4ca447(0xc7),{'val':JSON[_0x4ca447(0xa0)](_0x428c07[_0x4ca447(0x99)]),'ack':!![]});if(_0x428c07[_0x4ca447(0xdb)])_0x3c3411[_0x4ca447(0xe5)](_0x4ca447(0xdc),{'val':JSON[_0x4ca447(0xa0)](_0x428c07[_0x4ca447(0xdb)]),'ack':!![]});}catch(_0x299ba5){}}else{if(_0x296ac0[_0x4ca447(0xc8)]===_0x4ca447(0xc9)){if(_0x296ac0[_0x4ca447(0x9a)][_0x4ca447(0xb5)])_0x3c3411[_0x4ca447(0xa1)]['info'](_0x4ca447(0xbf));}else{if(_0x296ac0[_0x4ca447(0xc8)]===_0x4ca447(0xba))_0x3c3411[_0x4ca447(0xe5)](_0x4ca447(0xd1),{'val':new Date()[_0x4ca447(0xe7)](),'ack':!![]}),_0x3c3411['setStateAsync'](_0x4ca447(0xcd),{'val':_0x296ac0[_0x4ca447(0x9a)][_0x4ca447(0x97)],'ack':!![]});else{if(_0x296ac0[_0x4ca447(0xc8)]===_0x4ca447(0xdd)){const {speed_trend:_0x5df262}=_0x296ac0[_0x4ca447(0x9a)];if(_0x5df262!==undefined)_0x3c3411['setStateAsync'](_0x4ca447(0xd9),{'val':_0x5df262,'ack':!![]});}else{if(_0x296ac0[_0x4ca447(0xc8)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x25d7a4}=_0x296ac0['payload'];if(_0x25d7a4)_0x3c3411[_0x4ca447(0xe5)](_0x4ca447(0xa4),{'val':JSON[_0x4ca447(0xa0)](_0x25d7a4),'ack':!![]});}else{if(_0x296ac0[_0x4ca447(0xc8)]===_0x4ca447(0xd3)){const {forecast:_0x1cfa1b}=_0x296ac0['payload'];if(_0x1cfa1b)_0x3c3411[_0x4ca447(0xe5)](_0x4ca447(0xaa),{'val':JSON[_0x4ca447(0xa0)](_0x1cfa1b),'ack':!![]});}else{if(_0x296ac0[_0x4ca447(0xc8)]===_0x4ca447(0xde)){const {proposals:_0xc646a9}=_0x296ac0['payload'];_0x3c3411[_0x4ca447(0x9c)](_0x4ca447(0xce),(_0x1e5afc,_0x59a702)=>{const _0x2f931d=_0x4ca447;_0x59a702&&_0x59a702['val']===!![]&&_0xc646a9&&_0xc646a9['length']>0x0&&automation[_0x2f931d(0xbb)](_0x3c3411,_0xc646a9);});}else{if(_0x296ac0[_0x4ca447(0xc8)]===_0x4ca447(0xa6)){const {room:_0x724103,propagation:_0x2573c8}=_0x296ac0[_0x4ca447(0x9a)];let _0x4122e4=_0x4ca447(0xc0),_0x2c905e=0x0;if(_0x2573c8){const _0x5c3a57=Object[_0x4ca447(0x9f)](_0x2573c8);_0x5c3a57[_0x4ca447(0xd4)]>0x0&&(_0x4122e4=_0x5c3a57[0x0][0x0],_0x2c905e=_0x5c3a57[0x0][0x1]);}_0x3c3411[_0x4ca447(0xe5)]('analysis.prediction.nextRoom',{'val':_0x4122e4,'ack':!![]}),_0x3c3411['setStateAsync'](_0x4ca447(0x9d),{'val':_0x2c905e,'ack':!![]}),automation[_0x4ca447(0xc2)](_0x3c3411,_0x4122e4,_0x2c905e);}else{if(_0x296ac0[_0x4ca447(0xc8)]===_0x4ca447(0xe3)){const {patterns:_0x2d8f08}=_0x296ac0[_0x4ca447(0x9a)];if(_0x2d8f08&&_0x2d8f08[_0x4ca447(0xd4)]>0x0)_0x3c3411['setStateAsync']('analysis.automation.detectedPatterns',{'val':JSON['stringify'](_0x2d8f08),'ack':!![]});}}}}}}}}}}}}}function startService(_0x5314fd,_0x1afeb9){const _0x1ed506=a4_0x221769;let _0x31c928='python3';if(fs[_0x1ed506(0xa9)](_0x1afeb9))_0x31c928=_0x1afeb9;try{const _0x4d4ba2=path[_0x1ed506(0x92)](__dirname,'..',_0x1ed506(0xb6),_0x1ed506(0xa8));pythonProcess=spawn(_0x31c928,[_0x4d4ba2]),pythonProcess[_0x1ed506(0x94)]['on'](_0x1ed506(0xb3),_0x4e3b13=>{const _0xf7cd43=_0x1ed506,_0x857a2b=_0x4e3b13[_0xf7cd43(0xd6)]()[_0xf7cd43(0xb7)]('\x0a');_0x857a2b[_0xf7cd43(0x96)](_0x3cb5cc=>{const _0x3557c9=_0xf7cd43,_0x2754e1=_0x3cb5cc[_0x3557c9(0xe2)]();if(!_0x2754e1)return;if(_0x2754e1[_0x3557c9(0xca)](_0x3557c9(0xbd)))_0x5314fd[_0x3557c9(0xa1)][_0x3557c9(0xa2)](_0x3557c9(0xa3)+_0x2754e1[_0x3557c9(0xd0)](0x5)[_0x3557c9(0xe2)]());else{if(_0x2754e1[_0x3557c9(0xca)](_0x3557c9(0xc1)))try{const _0x5a40ee=JSON[_0x3557c9(0xe6)](_0x2754e1[_0x3557c9(0xd0)](0x8)[_0x3557c9(0xe2)]());handleResult(_0x5314fd,_0x5a40ee);}catch(_0x55d837){}}});}),pythonProcess['on'](_0x1ed506(0xab),_0x47639b=>{pythonProcess=null;}),_0x5314fd[_0x1ed506(0xe0)]=(_0x46d9b,_0x4e47d7)=>send(_0x5314fd,_0x46d9b,_0x4e47d7);}catch(_0x34edd6){_0x5314fd[_0x1ed506(0xa1)]['error'](_0x1ed506(0xb4)+_0x34edd6[_0x1ed506(0x9e)]);}}function stopService(_0x2c5101){const _0x74246e=a4_0x221769;if(pythonProcess){try{pythonProcess[_0x74246e(0xb8)]();}catch(_0x6cb5ec){}pythonProcess=null;}}module[a4_0x221769(0xda)]={'startService':startService,'stopService':stopService,'send':send};