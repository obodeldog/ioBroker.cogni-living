const a4_0x29f909=a4_0x2bbe;(function(_0x1cc1c2,_0x2b2793){const _0x14b881=a4_0x2bbe,_0xe96e05=_0x1cc1c2();while(!![]){try{const _0x4ab946=parseInt(_0x14b881(0xce))/0x1+parseInt(_0x14b881(0xb3))/0x2+-parseInt(_0x14b881(0xdb))/0x3+parseInt(_0x14b881(0xa6))/0x4+-parseInt(_0x14b881(0xcf))/0x5*(-parseInt(_0x14b881(0xa3))/0x6)+-parseInt(_0x14b881(0xe0))/0x7+-parseInt(_0x14b881(0xb2))/0x8;if(_0x4ab946===_0x2b2793)break;else _0xe96e05['push'](_0xe96e05['shift']());}catch(_0x52b303){_0xe96e05['push'](_0xe96e05['shift']());}}}(a4_0x1f6d,0x6bc38));function a4_0x2bbe(_0x12781d,_0x2e4fac){const _0xb0a129=a4_0x1f6d();return a4_0x2bbe=function(_0x1e7192,_0x26461a){_0x1e7192=_0x1e7192-0x94;let _0x1f6d6d=_0xb0a129[_0x1e7192];return _0x1f6d6d;},a4_0x2bbe(_0x12781d,_0x2e4fac);}const a4_0x26461a=(function(){let _0x2be39c=!![];return function(_0x1423e8,_0x442f4a){const _0x2f25ee=_0x2be39c?function(){if(_0x442f4a){const _0x2b6354=_0x442f4a['apply'](_0x1423e8,arguments);return _0x442f4a=null,_0x2b6354;}}:function(){};return _0x2be39c=![],_0x2f25ee;};}()),a4_0x1e7192=a4_0x26461a(this,function(){const _0xb73399=a4_0x2bbe;return a4_0x1e7192[_0xb73399(0x9b)]()[_0xb73399(0xc4)](_0xb73399(0xd7))[_0xb73399(0x9b)]()[_0xb73399(0x94)](a4_0x1e7192)[_0xb73399(0xc4)](_0xb73399(0xd7));});a4_0x1e7192();'use strict';const {spawn}=require(a4_0x29f909(0xbf)),path=require(a4_0x29f909(0xb4)),fs=require('fs'),setup=require(a4_0x29f909(0x99)),automation=require(a4_0x29f909(0xdc));let pythonProcess=null;function send(_0x2b61c7,_0x2fa128,_0x282ad7={}){const _0x573cdf=a4_0x29f909;if(!pythonProcess||!pythonProcess[_0x573cdf(0xd9)][_0x573cdf(0xa7)])return;const _0x54b487=JSON[_0x573cdf(0xd3)]({'command':_0x2fa128,..._0x282ad7});try{pythonProcess['stdin'][_0x573cdf(0xe7)](_0x54b487+'\x0a');}catch(_0x5f456f){}}function handleResult(_0x1be8e6,_0x1f9328){const _0xbb18a1=a4_0x29f909;if(_0x1f9328[_0xbb18a1(0x96)]===_0xbb18a1(0xbc))_0x1be8e6[_0xbb18a1(0xc0)][_0xbb18a1(0xc1)]('ðŸ\x20Python\x20Pong');else{if(_0x1f9328[_0xbb18a1(0x96)]===_0xbb18a1(0xa1)){const {anomaly_score:_0x361f9b,is_anomaly:_0x3341a5,threshold:_0x91669b,explanation:_0x5323bf}=_0x1f9328[_0xbb18a1(0xac)];_0x1be8e6[_0xbb18a1(0xb6)]('analysis.security.lastScore',{'val':_0x361f9b,'ack':!![]}),_0x1be8e6[_0xbb18a1(0xb6)](_0xbb18a1(0xc9),{'val':new Date()[_0xbb18a1(0x9e)](),'ack':!![]});if(_0x91669b)_0x1be8e6[_0xbb18a1(0xb6)](_0xbb18a1(0x95),{'val':_0x91669b,'ack':!![]});if(_0x3341a5){let _0x7a94bd=_0xbb18a1(0xc7)+_0x361f9b['toFixed'](0x4)+')';if(_0x5323bf&&_0x5323bf!==_0xbb18a1(0xe2))_0x7a94bd+=_0xbb18a1(0xd8)+_0x5323bf;_0x1be8e6[_0xbb18a1(0xb6)](_0xbb18a1(0xc8),{'val':!![],'ack':!![]}),_0x1be8e6[_0xbb18a1(0xb6)]('analysis.alertReason',{'val':_0x7a94bd,'ack':!![]}),setup[_0xbb18a1(0xa9)](_0x1be8e6,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x7a94bd,![],!![]);}}else{if(_0x1f9328[_0xbb18a1(0x96)]===_0xbb18a1(0xbb)){const _0x2aeaba=_0x1f9328['payload']['details']||'',_0x307351=_0x1f9328['payload'][_0xbb18a1(0xdf)],_0x2fa7bd=_0x1f9328[_0xbb18a1(0xac)]['success']?_0xbb18a1(0xe4)+new Date()[_0xbb18a1(0x9f)]()+'\x20('+_0x2aeaba+')':_0xbb18a1(0xd1)+_0x1f9328[_0xbb18a1(0xac)][_0xbb18a1(0xc6)];_0x1be8e6[_0xbb18a1(0xb6)](_0xbb18a1(0xe3),{'val':_0x2fa7bd,'ack':!![]});if(_0x1f9328[_0xbb18a1(0xac)]['success']&&_0x307351)_0x1be8e6[_0xbb18a1(0xb6)](_0xbb18a1(0x95),{'val':_0x307351,'ack':!![]});}else{if(_0x1f9328[_0xbb18a1(0x96)]==='ENERGY_TRAIN_RESULT'){if(_0x1f9328[_0xbb18a1(0xac)]['success'])try{const _0x41d7f2=JSON[_0xbb18a1(0xa4)](_0x1f9328[_0xbb18a1(0xac)]['details']);if(_0x41d7f2[_0xbb18a1(0x97)])_0x1be8e6['setStateAsync'](_0xbb18a1(0xa8),{'val':JSON[_0xbb18a1(0xd3)](_0x41d7f2['insulation']),'ack':!![]});if(_0x41d7f2['heating'])_0x1be8e6['setStateAsync'](_0xbb18a1(0xb7),{'val':JSON[_0xbb18a1(0xd3)](_0x41d7f2[_0xbb18a1(0xd2)]),'ack':!![]});}catch(_0x38add0){}}else{if(_0x1f9328[_0xbb18a1(0x96)]===_0xbb18a1(0xd6)){if(_0x1f9328[_0xbb18a1(0xac)][_0xbb18a1(0xb8)])_0x1be8e6[_0xbb18a1(0xc0)][_0xbb18a1(0xaf)](_0xbb18a1(0xb5));}else{if(_0x1f9328[_0xbb18a1(0x96)]==='HEALTH_RESULT')_0x1be8e6['setStateAsync'](_0xbb18a1(0xbe),{'val':new Date()[_0xbb18a1(0x9e)](),'ack':!![]}),_0x1be8e6[_0xbb18a1(0xb6)](_0xbb18a1(0xe1),{'val':_0x1f9328['payload'][_0xbb18a1(0xca)],'ack':!![]});else{if(_0x1f9328[_0xbb18a1(0x96)]===_0xbb18a1(0xd5)){const {speed_trend:_0x3e097d}=_0x1f9328['payload'];if(_0x3e097d!==undefined)_0x1be8e6[_0xbb18a1(0xb6)]('analysis.health.gaitSpeed',{'val':_0x3e097d,'ack':!![]});}else{if(_0x1f9328[_0xbb18a1(0x96)]===_0xbb18a1(0xde)){const {forecast:_0x20e8fe}=_0x1f9328[_0xbb18a1(0xac)];if(_0x20e8fe)_0x1be8e6[_0xbb18a1(0xb6)](_0xbb18a1(0xc2),{'val':JSON[_0xbb18a1(0xd3)](_0x20e8fe),'ack':!![]});}else{if(_0x1f9328[_0xbb18a1(0x96)]==='PINN_PREDICT_RESULT'){const {forecast:_0x446e9f}=_0x1f9328[_0xbb18a1(0xac)];if(_0x446e9f)_0x1be8e6[_0xbb18a1(0xb6)]('analysis.energy.pinnForecast',{'val':JSON[_0xbb18a1(0xd3)](_0x446e9f),'ack':!![]});}else{if(_0x1f9328[_0xbb18a1(0x96)]===_0xbb18a1(0xab)){const {proposals:_0x58d440}=_0x1f9328[_0xbb18a1(0xac)];_0x1be8e6[_0xbb18a1(0xc3)](_0xbb18a1(0xcc),(_0x595f8b,_0x2ac08a)=>{const _0x337797=_0xbb18a1;_0x2ac08a&&_0x2ac08a['val']===!![]&&_0x58d440&&_0x58d440[_0x337797(0xdd)]>0x0&&automation['applyEnergySavings'](_0x1be8e6,_0x58d440);});}else{if(_0x1f9328['type']==='SIGNAL_RESULT'){const {room:_0x44edd2,propagation:_0x56b8cc}=_0x1f9328[_0xbb18a1(0xac)];let _0x489d40=_0xbb18a1(0xe2),_0x24abec=0x0;if(_0x56b8cc){const _0x7f73e9=Object['entries'](_0x56b8cc);_0x7f73e9[_0xbb18a1(0xdd)]>0x0&&(_0x489d40=_0x7f73e9[0x0][0x0],_0x24abec=_0x7f73e9[0x0][0x1]);}_0x1be8e6['setStateAsync']('analysis.prediction.nextRoom',{'val':_0x489d40,'ack':!![]}),_0x1be8e6[_0xbb18a1(0xb6)]('analysis.prediction.confidence',{'val':_0x24abec,'ack':!![]}),automation['handlePrediction'](_0x1be8e6,_0x489d40,_0x24abec);}else{if(_0x1f9328[_0xbb18a1(0x96)]===_0xbb18a1(0xda)){const {patterns:_0x1dd1f0}=_0x1f9328[_0xbb18a1(0xac)];if(_0x1dd1f0&&_0x1dd1f0['length']>0x0)_0x1be8e6[_0xbb18a1(0xb6)](_0xbb18a1(0xaa),{'val':JSON[_0xbb18a1(0xd3)](_0x1dd1f0),'ack':!![]});}}}}}}}}}}}}}function startService(_0x113d2f,_0x5c1c69){const _0x1d39e3=a4_0x29f909;let _0x439e8a=_0x1d39e3(0x9c);if(fs[_0x1d39e3(0xcb)](_0x5c1c69))_0x439e8a=_0x5c1c69;try{const _0x36530a=path[_0x1d39e3(0xcd)](__dirname,'..',_0x1d39e3(0xd4),_0x1d39e3(0xb9));pythonProcess=spawn(_0x439e8a,[_0x36530a]),pythonProcess[_0x1d39e3(0xbd)]['on'](_0x1d39e3(0xe5),_0x4a5bac=>{const _0x17cba1=_0x1d39e3,_0x2475ab=_0x4a5bac['toString']()[_0x17cba1(0xd0)]('\x0a');_0x2475ab[_0x17cba1(0xb0)](_0x3452ab=>{const _0xd57780=_0x17cba1,_0x1080cb=_0x3452ab['trim']();if(!_0x1080cb)return;if(_0x1080cb['startsWith'](_0xd57780(0x9a)))_0x113d2f[_0xd57780(0xc0)][_0xd57780(0xc1)](_0xd57780(0xa5)+_0x1080cb[_0xd57780(0xa0)](0x5)[_0xd57780(0xb1)]());else{if(_0x1080cb[_0xd57780(0xe6)]('[RESULT]'))try{const _0x2b0668=JSON[_0xd57780(0xa4)](_0x1080cb['substring'](0x8)['trim']());handleResult(_0x113d2f,_0x2b0668);}catch(_0x42fa2e){}}});}),pythonProcess['on'](_0x1d39e3(0xad),_0x234aee=>{pythonProcess=null;}),_0x113d2f[_0x1d39e3(0xba)]=(_0x5c083f,_0x1c8b1e)=>send(_0x113d2f,_0x5c083f,_0x1c8b1e);}catch(_0x4bc298){_0x113d2f[_0x1d39e3(0xc0)][_0x1d39e3(0xa2)](_0x1d39e3(0x9d)+_0x4bc298[_0x1d39e3(0xae)]);}}function stopService(_0x1e5f41){const _0x5a7df7=a4_0x29f909;if(pythonProcess){try{pythonProcess[_0x5a7df7(0x98)]();}catch(_0x3d3ff8){}pythonProcess=null;}}module[a4_0x29f909(0xc5)]={'startService':startService,'stopService':stopService,'send':send};function a4_0x1f6d(){const _0x1f2d6a=['search','exports','reason','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','analysis.isAlert','analysis.security.lastCheck','is_anomaly','existsSync','analysis.energy.mpcActive','join','569440YqCPfM','410290RauAKC','split','Failed:\x20','heating','stringify','python_service','GAIT_RESULT','HEALTH_TRAIN_RESULT','(((.+)+)+)+$','\x0aGrund:\x20','stdin','COMFORT_RESULT','2329554SnlMYI','./automation','length','ENERGY_PREDICT_RESULT','threshold','3003728SMXLPu','analysis.health.isAnomaly','Unknown','analysis.training.status','Success:\x20','data','startsWith','write','constructor','analysis.security.currentThreshold','type','insulation','kill','./setup','[LOG]','toString','python3','Error\x20launching\x20Python:\x20','toISOString','toLocaleTimeString','substring','SECURITY_RESULT','error','6AfZDny','parse','[PYTHON]\x20','1339004aDjHFP','writable','analysis.energy.insulationScore','sendNotification','analysis.automation.detectedPatterns','ENERGY_OPTIMIZE_RESULT','payload','close','message','info','forEach','trim','1344160IrgpaY','1657586WLrjqb','path','âœ…\x20HEALTH\x20TRAINED.','setStateAsync','analysis.energy.heatingScore','success','service.py','sendToPythonWrapper','TRAINING_COMPLETE','PONG','stdout','analysis.health.lastCheck','child_process','log','debug','analysis.energy.forecast','getState'];a4_0x1f6d=function(){return _0x1f2d6a;};return a4_0x1f6d();}