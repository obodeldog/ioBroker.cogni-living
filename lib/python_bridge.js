const a4_0x2a4a36=a4_0x5a21;(function(_0x336913,_0x39d66f){const _0x3953f7=a4_0x5a21,_0x327edd=_0x336913();while(!![]){try{const _0x3d7b32=parseInt(_0x3953f7(0xc1))/0x1*(parseInt(_0x3953f7(0x9f))/0x2)+parseInt(_0x3953f7(0xe2))/0x3+parseInt(_0x3953f7(0x8a))/0x4*(parseInt(_0x3953f7(0xb8))/0x5)+-parseInt(_0x3953f7(0xa8))/0x6+parseInt(_0x3953f7(0x90))/0x7+parseInt(_0x3953f7(0xe1))/0x8*(parseInt(_0x3953f7(0xcf))/0x9)+-parseInt(_0x3953f7(0xe8))/0xa;if(_0x3d7b32===_0x39d66f)break;else _0x327edd['push'](_0x327edd['shift']());}catch(_0x3a5be6){_0x327edd['push'](_0x327edd['shift']());}}}(a4_0x36c3,0xaff61));const a4_0xff21db=(function(){let _0x3a1665=!![];return function(_0x260634,_0x1c2ed8){const _0x5c62b5=_0x3a1665?function(){const _0x17f227=a4_0x5a21;if(_0x1c2ed8){const _0x51c8a4=_0x1c2ed8[_0x17f227(0xb3)](_0x260634,arguments);return _0x1c2ed8=null,_0x51c8a4;}}:function(){};return _0x3a1665=![],_0x5c62b5;};}()),a4_0x288b74=a4_0xff21db(this,function(){const _0x4ee53c=a4_0x5a21;return a4_0x288b74[_0x4ee53c(0xe3)]()[_0x4ee53c(0xba)](_0x4ee53c(0xc9))[_0x4ee53c(0xe3)]()['constructor'](a4_0x288b74)[_0x4ee53c(0xba)](_0x4ee53c(0xc9));});function a4_0x5a21(_0x4dba38,_0x55d4d9){const _0x1f2db6=a4_0x36c3();return a4_0x5a21=function(_0x288b74,_0xff21db){_0x288b74=_0x288b74-0x83;let _0x36c32b=_0x1f2db6[_0x288b74];return _0x36c32b;},a4_0x5a21(_0x4dba38,_0x55d4d9);}function a4_0x36c3(){const _0x17262d=['TOPOLOGY_RESULT','ðŸ”®\x20Prediction:\x20From\x20','486HXhRXS','join','âœ…\x20HEALTH\x20TRAINED.','log','insulation','service.py','Regel\x20erkannt:\x20','change_percent','PONG','1159500nWlIQp','setStateAsync','âš ï¸\x20SECURITY\x20ALARM:\x20','Success:\x20','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','stdout','details','ANOMALY','diagnosis','stdin','child_process','apply','analysis.health.lastCheck','success','\x20new\x20patterns.','analysis.automation.detectedPatterns','354830mDtSqt','kill','search','analysis.prediction.confidence','type','heating','data','\x20->\x20Likely\x20','[LOG]','5050bcRwyW','TOPOLOGY_ACK','analysis.energy.forecast','analysis.automation.patternDetected','analysis.health.trendValue','analysis.security.currentThreshold','ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.','ENERGY_PREDICT_RESULT','(((.+)+)+)+$','ENERGY_TRAIN_RESULT','analysis.prediction.nextRoom','entries','rule','debug','1817118SqPoJD','threshold','SIGNAL_RESULT','forEach','ðŸ\x20Python\x20Pong','\x20->\x20','python3','Unknown','sendNotification','Error\x20launching\x20Python:\x20','SECURITY_RESULT','analysis.security.topologyMatrix','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','path','python_service','is_anomaly','[PYTHON]\x20','[RESULT]','56TrzUTT','2707605eZUxsj','toString','trim','parse','analysis.health.trendDiagnosis','handlePrediction','42003380AFoyyb','substring','stringify','reason','./setup','analysis.automation.description','TRAINING_COMPLETE','exports','analysis.health.isAnomaly','GAIT_RESULT','20iPCefH','./automation','close','error','analysis.alertReason','info','8515472WLjqah','analysis.security.lastCheck','payload','analysis.health.gaitSpeed','startsWith','toFixed','Failed:\x20','message','length','toLocaleTimeString','analysis.energy.heatingScore','ðŸ\x20Python\x20confirmed\x20new\x20topology.','confidence'];a4_0x36c3=function(){return _0x17262d;};return a4_0x36c3();}a4_0x288b74();'use strict';const {spawn}=require(a4_0x2a4a36(0xb2)),path=require(a4_0x2a4a36(0xdc)),fs=require('fs'),setup=require(a4_0x2a4a36(0x84)),automation=require(a4_0x2a4a36(0x8b));let pythonProcess=null;function send(_0x178b86,_0x4e8254,_0x6f52ac={}){const _0x27ff7e=a4_0x2a4a36;if(!pythonProcess||!pythonProcess[_0x27ff7e(0xb1)]['writable'])return;const _0x75e496=JSON[_0x27ff7e(0xea)]({'command':_0x4e8254,..._0x6f52ac});try{pythonProcess[_0x27ff7e(0xb1)]['write'](_0x75e496+'\x0a');}catch(_0x368741){}}function handleResult(_0x415911,_0x364c3c){const _0x15e3d3=a4_0x2a4a36;if(_0x364c3c['type']===_0x15e3d3(0xa7))_0x415911['log'][_0x15e3d3(0xce)](_0x15e3d3(0xd3));else{if(_0x364c3c[_0x15e3d3(0xbc)]===_0x15e3d3(0xd9)){const {anomaly_score:_0x165e9f,is_anomaly:_0x2195aa,threshold:_0x52fb9b,explanation:_0x412fd3}=_0x364c3c['payload'];_0x415911['log'][_0x15e3d3(0x8f)]('ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20'+_0x165e9f[_0x15e3d3(0x95)](0x5)+_0x15e3d3(0xd4)+(_0x2195aa?_0x15e3d3(0xaf):'OK')),_0x415911[_0x15e3d3(0xa9)]('analysis.security.lastScore',{'val':_0x165e9f,'ack':!![]}),_0x415911['setStateAsync'](_0x15e3d3(0x91),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x52fb9b)_0x415911[_0x15e3d3(0xa9)](_0x15e3d3(0xc6),{'val':_0x52fb9b,'ack':!![]});if(_0x2195aa){let _0x4ac435=_0x15e3d3(0xac)+_0x165e9f[_0x15e3d3(0x95)](0x4)+')';if(_0x412fd3&&_0x412fd3!=='Unknown')_0x4ac435+='\x0aGrund:\x20'+_0x412fd3;_0x415911[_0x15e3d3(0xa9)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x415911[_0x15e3d3(0xa9)](_0x15e3d3(0x8e),{'val':_0x4ac435,'ack':!![]}),setup[_0x15e3d3(0xd7)](_0x415911,_0x15e3d3(0xaa)+_0x4ac435,![],!![]);}}else{if(_0x364c3c[_0x15e3d3(0xbc)]===_0x15e3d3(0x86)){const _0x1e18a1=_0x364c3c[_0x15e3d3(0x92)]['details']||'',_0x859675=_0x364c3c[_0x15e3d3(0x92)][_0x15e3d3(0xd0)],_0x49b587=_0x364c3c[_0x15e3d3(0x92)]['success']?_0x15e3d3(0xab)+new Date()[_0x15e3d3(0x99)]()+'\x20('+_0x1e18a1+')':_0x15e3d3(0x96)+_0x364c3c[_0x15e3d3(0x92)][_0x15e3d3(0x83)];_0x415911[_0x15e3d3(0xa9)]('analysis.training.status',{'val':_0x49b587,'ack':!![]});if(_0x364c3c['payload'][_0x15e3d3(0xb5)]&&_0x859675)_0x415911[_0x15e3d3(0xa9)](_0x15e3d3(0xc6),{'val':_0x859675,'ack':!![]});}else{if(_0x364c3c[_0x15e3d3(0xbc)]==='COMFORT_RESULT'){const {patterns:_0x5429cb}=_0x364c3c[_0x15e3d3(0x92)];if(_0x5429cb&&_0x5429cb[_0x15e3d3(0x98)]>0x0){_0x415911[_0x15e3d3(0xa2)][_0x15e3d3(0x8f)]('ðŸ›‹ï¸\x20BUTLER:\x20Found\x20'+_0x5429cb[_0x15e3d3(0x98)]+_0x15e3d3(0xb6)),_0x415911[_0x15e3d3(0xa9)](_0x15e3d3(0xb7),{'val':JSON[_0x15e3d3(0xea)](_0x5429cb),'ack':!![]});const _0x38e60c=_0x5429cb[0x0],_0x51038d=_0x15e3d3(0xa5)+_0x38e60c[_0x15e3d3(0xcd)]+'\x20('+(_0x38e60c[_0x15e3d3(0x9c)]*0x64)[_0x15e3d3(0x95)](0x0)+'%)';_0x415911[_0x15e3d3(0xa9)](_0x15e3d3(0xc4),{'val':!![],'ack':!![]}),_0x415911[_0x15e3d3(0xa9)](_0x15e3d3(0x85),{'val':_0x51038d,'ack':!![]});}else _0x415911[_0x15e3d3(0xa2)]['info'](_0x15e3d3(0xdb)),_0x415911[_0x15e3d3(0xa9)](_0x15e3d3(0xc4),{'val':![],'ack':!![]}),_0x415911['setStateAsync'](_0x15e3d3(0xb7),{'val':'[]','ack':!![]});}else{if(_0x364c3c[_0x15e3d3(0xbc)]===_0x15e3d3(0xca)){if(_0x364c3c['payload'][_0x15e3d3(0xb5)])try{const _0x454b92=JSON[_0x15e3d3(0xe5)](_0x364c3c[_0x15e3d3(0x92)][_0x15e3d3(0xae)]);if(_0x454b92[_0x15e3d3(0xa3)])_0x415911[_0x15e3d3(0xa9)]('analysis.energy.insulationScore',{'val':JSON[_0x15e3d3(0xea)](_0x454b92['insulation']),'ack':!![]});if(_0x454b92[_0x15e3d3(0xbd)])_0x415911[_0x15e3d3(0xa9)](_0x15e3d3(0x9a),{'val':JSON['stringify'](_0x454b92['heating']),'ack':!![]});}catch(_0x27a79d){}}else{if(_0x364c3c[_0x15e3d3(0xbc)]==='HEALTH_TRAIN_RESULT'){if(_0x364c3c[_0x15e3d3(0x92)][_0x15e3d3(0xb5)])_0x415911['log'][_0x15e3d3(0x8f)](_0x15e3d3(0xa1));}else{if(_0x364c3c[_0x15e3d3(0xbc)]==='HEALTH_RESULT')_0x415911['setStateAsync'](_0x15e3d3(0xb4),{'val':new Date()['toISOString'](),'ack':!![]}),_0x415911[_0x15e3d3(0xa9)](_0x15e3d3(0x88),{'val':_0x364c3c[_0x15e3d3(0x92)][_0x15e3d3(0xde)],'ack':!![]});else{if(_0x364c3c[_0x15e3d3(0xbc)]==='TREND_RESULT')_0x415911['setStateAsync'](_0x15e3d3(0xe6),{'val':_0x364c3c['payload'][_0x15e3d3(0xb0)],'ack':!![]}),_0x415911[_0x15e3d3(0xa9)](_0x15e3d3(0xc5),{'val':_0x364c3c[_0x15e3d3(0x92)][_0x15e3d3(0xa6)],'ack':!![]});else{if(_0x364c3c[_0x15e3d3(0xbc)]===_0x15e3d3(0x89)){const {speed_trend:_0x46c5e5}=_0x364c3c[_0x15e3d3(0x92)];if(_0x46c5e5!==undefined)_0x415911[_0x15e3d3(0xa9)](_0x15e3d3(0x93),{'val':_0x46c5e5,'ack':!![]});}else{if(_0x364c3c[_0x15e3d3(0xbc)]===_0x15e3d3(0xc8)){const {forecast:_0x3880d0}=_0x364c3c[_0x15e3d3(0x92)];if(_0x3880d0)_0x415911[_0x15e3d3(0xa9)](_0x15e3d3(0xc3),{'val':JSON[_0x15e3d3(0xea)](_0x3880d0),'ack':!![]});}else{if(_0x364c3c[_0x15e3d3(0xbc)]===_0x15e3d3(0x9d)){const {data:_0x8d13fe}=_0x364c3c[_0x15e3d3(0x92)];_0x8d13fe&&(_0x415911[_0x15e3d3(0xa2)][_0x15e3d3(0x8f)](_0x15e3d3(0xc7)),_0x415911[_0x15e3d3(0xa9)](_0x15e3d3(0xda),{'val':JSON[_0x15e3d3(0xea)](_0x8d13fe),'ack':!![]}));}else{if(_0x364c3c['type']===_0x15e3d3(0xc2))_0x415911[_0x15e3d3(0xa2)][_0x15e3d3(0xce)](_0x15e3d3(0x9b));else{if(_0x364c3c['type']===_0x15e3d3(0xd1)){const {room:_0x376ade,propagation:_0x25898b}=_0x364c3c[_0x15e3d3(0x92)];let _0x1e53e8=_0x15e3d3(0xd6),_0xf366ab=0x0;if(_0x25898b){const _0x38ed90=Object[_0x15e3d3(0xcc)](_0x25898b);_0x38ed90[_0x15e3d3(0x98)]>0x0&&(_0x1e53e8=_0x38ed90[0x0][0x0],_0xf366ab=_0x38ed90[0x0][0x1]);}_0x415911[_0x15e3d3(0xa9)](_0x15e3d3(0xcb),{'val':_0x1e53e8,'ack':!![]}),_0x415911[_0x15e3d3(0xa9)](_0x15e3d3(0xbb),{'val':_0xf366ab,'ack':!![]}),_0xf366ab>0.4&&_0x415911[_0x15e3d3(0xa2)][_0x15e3d3(0xce)](_0x15e3d3(0x9e)+_0x376ade+_0x15e3d3(0xbf)+_0x1e53e8+'\x20('+(_0xf366ab*0x64)[_0x15e3d3(0x95)](0x0)+'%)'),automation[_0x15e3d3(0xe7)](_0x415911,_0x1e53e8,_0xf366ab);}}}}}}}}}}}}}}function startService(_0x4e7bbc,_0x2e73c0){const _0x1b5044=a4_0x2a4a36;let _0x424da7=_0x1b5044(0xd5);if(fs['existsSync'](_0x2e73c0))_0x424da7=_0x2e73c0;try{const _0x27f3cc=path[_0x1b5044(0xa0)](__dirname,'..',_0x1b5044(0xdd),_0x1b5044(0xa4));pythonProcess=spawn(_0x424da7,[_0x27f3cc]),pythonProcess[_0x1b5044(0xad)]['on'](_0x1b5044(0xbe),_0x53300b=>{const _0x4e6acc=_0x1b5044,_0x1652f0=_0x53300b[_0x4e6acc(0xe3)]()['split']('\x0a');_0x1652f0[_0x4e6acc(0xd2)](_0x42cc1d=>{const _0x15dd30=_0x4e6acc,_0x56c875=_0x42cc1d[_0x15dd30(0xe4)]();if(!_0x56c875)return;if(_0x56c875[_0x15dd30(0x94)](_0x15dd30(0xc0)))_0x4e7bbc['log']['debug'](_0x15dd30(0xdf)+_0x56c875[_0x15dd30(0xe9)](0x5)[_0x15dd30(0xe4)]());else{if(_0x56c875[_0x15dd30(0x94)](_0x15dd30(0xe0)))try{const _0x1b221c=JSON[_0x15dd30(0xe5)](_0x56c875[_0x15dd30(0xe9)](0x8)[_0x15dd30(0xe4)]());handleResult(_0x4e7bbc,_0x1b221c);}catch(_0x38349c){}}});}),pythonProcess['on'](_0x1b5044(0x8c),_0x36db37=>{pythonProcess=null;}),_0x4e7bbc['sendToPythonWrapper']=(_0x15b8a3,_0x4d7048)=>send(_0x4e7bbc,_0x15b8a3,_0x4d7048);}catch(_0x26e0f2){_0x4e7bbc[_0x1b5044(0xa2)][_0x1b5044(0x8d)](_0x1b5044(0xd8)+_0x26e0f2[_0x1b5044(0x97)]);}}function stopService(_0x301c81){const _0x3c021f=a4_0x2a4a36;if(pythonProcess){try{pythonProcess[_0x3c021f(0xb9)]();}catch(_0x416723){}pythonProcess=null;}}module[a4_0x2a4a36(0x87)]={'startService':startService,'stopService':stopService,'send':send};