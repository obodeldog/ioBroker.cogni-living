const a4_0x263857=a4_0x34c6;(function(_0x35ba66,_0x13d924){const _0x2d4296=a4_0x34c6,_0x4948e4=_0x35ba66();while(!![]){try{const _0x2914ed=-parseInt(_0x2d4296(0x205))/0x1+-parseInt(_0x2d4296(0x219))/0x2+parseInt(_0x2d4296(0x1f8))/0x3*(-parseInt(_0x2d4296(0x207))/0x4)+-parseInt(_0x2d4296(0x218))/0x5*(parseInt(_0x2d4296(0x214))/0x6)+parseInt(_0x2d4296(0x223))/0x7+parseInt(_0x2d4296(0x246))/0x8+parseInt(_0x2d4296(0x233))/0x9;if(_0x2914ed===_0x13d924)break;else _0x4948e4['push'](_0x4948e4['shift']());}catch(_0x17924d){_0x4948e4['push'](_0x4948e4['shift']());}}}(a4_0x2e5a,0x60a1b));const a4_0x23a309=(function(){let _0x4933b9=!![];return function(_0x102b8,_0xf4e1da){const _0x7fefeb=_0x4933b9?function(){const _0x337364=a4_0x34c6;if(_0xf4e1da){const _0x3c3085=_0xf4e1da[_0x337364(0x234)](_0x102b8,arguments);return _0xf4e1da=null,_0x3c3085;}}:function(){};return _0x4933b9=![],_0x7fefeb;};}()),a4_0x19d29b=a4_0x23a309(this,function(){const _0x29346b=a4_0x34c6;return a4_0x19d29b['toString']()[_0x29346b(0x243)]('(((.+)+)+)+$')[_0x29346b(0x239)]()['constructor'](a4_0x19d29b)[_0x29346b(0x243)](_0x29346b(0x1e7));});a4_0x19d29b();'use strict';const {spawn}=require(a4_0x263857(0x237)),path=require(a4_0x263857(0x1da)),fs=require('fs'),setup=require(a4_0x263857(0x21e)),automation=require('./automation');let pythonProcess=null;function send(_0x360981,_0x4943a7,_0x1565a0={}){const _0x2e1698=a4_0x263857;if(!pythonProcess||!pythonProcess[_0x2e1698(0x240)][_0x2e1698(0x245)])return;const _0x11ff93=JSON[_0x2e1698(0x21b)]({'command':_0x4943a7,..._0x1565a0});try{pythonProcess['stdin']['write'](_0x11ff93+'\x0a');}catch(_0x3cc861){}}function handleResult(_0x394535,_0x58d40f){const _0x249ed=a4_0x263857;if(_0x58d40f[_0x249ed(0x1f6)]===_0x249ed(0x1ea))_0x394535['log'][_0x249ed(0x23a)](_0x249ed(0x211));else{if(_0x58d40f['type']===_0x249ed(0x20f)){const {anomaly_score:_0x2e1bd4,is_anomaly:_0x5be34e,threshold:_0x1d3bb2,explanation:_0x11eaed}=_0x58d40f['payload'];_0x394535[_0x249ed(0x1f2)](_0x249ed(0x212),{'val':_0x2e1bd4,'ack':!![]}),_0x394535[_0x249ed(0x1f2)](_0x249ed(0x21f),{'val':new Date()[_0x249ed(0x1fe)](),'ack':!![]});if(_0x1d3bb2)_0x394535['setStateAsync'](_0x249ed(0x20c),{'val':_0x1d3bb2,'ack':!![]});if(_0x5be34e){let _0x1a0f1f=_0x249ed(0x226)+_0x2e1bd4[_0x249ed(0x22d)](0x4)+')';if(_0x11eaed&&_0x11eaed!==_0x249ed(0x1f3))_0x1a0f1f+='\x0aGrund:\x20'+_0x11eaed;_0x394535[_0x249ed(0x1f2)](_0x249ed(0x1eb),{'val':!![],'ack':!![]}),_0x394535['setStateAsync'](_0x249ed(0x20b),{'val':_0x1a0f1f,'ack':!![]}),setup['sendNotification'](_0x394535,_0x249ed(0x20d)+_0x1a0f1f,![],!![]);}}else{if(_0x58d40f[_0x249ed(0x1f6)]===_0x249ed(0x220)){const _0x4187c4=_0x58d40f['payload']['details']||'',_0x3715ee=_0x58d40f[_0x249ed(0x23c)][_0x249ed(0x1f0)],_0xb9e294=_0x58d40f['payload'][_0x249ed(0x1e4)]?'Success:\x20'+new Date()[_0x249ed(0x1e9)]()+'\x20('+_0x4187c4+')':_0x249ed(0x21d)+_0x58d40f[_0x249ed(0x23c)][_0x249ed(0x208)];_0x394535['setStateAsync'](_0x249ed(0x1f5),{'val':_0xb9e294,'ack':!![]});if(_0x58d40f[_0x249ed(0x23c)][_0x249ed(0x1e4)]&&_0x3715ee)_0x394535[_0x249ed(0x1f2)](_0x249ed(0x20c),{'val':_0x3715ee,'ack':!![]});}else{if(_0x58d40f['type']===_0x249ed(0x22e)){if(_0x58d40f[_0x249ed(0x23c)][_0x249ed(0x1e4)])try{const _0x32e3d7=JSON['parse'](_0x58d40f[_0x249ed(0x23c)][_0x249ed(0x206)]);if(_0x32e3d7[_0x249ed(0x1f7)])_0x394535[_0x249ed(0x1f2)](_0x249ed(0x1ff),{'val':JSON['stringify'](_0x32e3d7[_0x249ed(0x1f7)]),'ack':!![]});if(_0x32e3d7['heating'])_0x394535[_0x249ed(0x1f2)](_0x249ed(0x1f9),{'val':JSON[_0x249ed(0x21b)](_0x32e3d7[_0x249ed(0x1e5)]),'ack':!![]});}catch(_0x384e28){}}else{if(_0x58d40f[_0x249ed(0x1f6)]===_0x249ed(0x209)){if(_0x58d40f[_0x249ed(0x23c)][_0x249ed(0x1e4)]){_0x394535[_0x249ed(0x1ee)][_0x249ed(0x1ec)]('‚úÖ\x20HEALTH\x20TRAINED.');const _0x24a3a5=new Date(),_0x464d80=_0x24a3a5[_0x249ed(0x229)]('de-DE',{'day':'2-digit','month':_0x249ed(0x227),'hour':_0x249ed(0x1db),'minute':_0x249ed(0x1db)});_0x394535[_0x249ed(0x1f2)](_0x249ed(0x21a),{'val':_0x464d80,'ack':!![]});}}else{if(_0x58d40f[_0x249ed(0x1f6)]===_0x249ed(0x203)){const _0x7c11cd=new Date(),_0x148ef3=_0x7c11cd['toLocaleDateString'](_0x249ed(0x20a),{'day':'2-digit','month':_0x249ed(0x227),'hour':_0x249ed(0x1db),'minute':_0x249ed(0x1db)});_0x394535['setStateAsync'](_0x249ed(0x21a),{'val':_0x148ef3,'ack':!![]}),_0x394535[_0x249ed(0x1f2)](_0x249ed(0x238),{'val':_0x58d40f['payload'][_0x249ed(0x202)],'ack':!![]});}else{if(_0x58d40f[_0x249ed(0x1f6)]===_0x249ed(0x22a)){const {trend_percent:_0x35a360,details:_0x2b2c31}=_0x58d40f['payload'],_0x5034bf=new Date(),_0x41f6f0=_0x5034bf[_0x249ed(0x229)](_0x249ed(0x20a),{'day':_0x249ed(0x1db),'month':'short','hour':_0x249ed(0x1db),'minute':_0x249ed(0x1db)});_0x394535[_0x249ed(0x1f2)](_0x249ed(0x21a),{'val':_0x41f6f0,'ack':!![]}),_0x394535[_0x249ed(0x1f2)](_0x249ed(0x232),{'val':_0x35a360,'ack':!![]}),_0x394535[_0x249ed(0x1ee)][_0x249ed(0x1ec)]('üìà\x20Health\x20Trend:\x20'+_0x2b2c31);}else{if(_0x58d40f[_0x249ed(0x1f6)]===_0x249ed(0x221)){const {speed_trend:_0xf498b1}=_0x58d40f['payload'];if(_0xf498b1!==undefined)_0x394535[_0x249ed(0x1f2)]('analysis.health.gaitSpeed',{'val':_0xf498b1,'ack':!![]});}else{if(_0x58d40f['type']===_0x249ed(0x22c)){const {forecast:_0x86fcb4}=_0x58d40f[_0x249ed(0x23c)];if(_0x86fcb4)_0x394535['setStateAsync'](_0x249ed(0x1de),{'val':JSON[_0x249ed(0x21b)](_0x86fcb4),'ack':!![]});}else{if(_0x58d40f[_0x249ed(0x1f6)]===_0x249ed(0x241)){const {times:_0x53cd50,sources:_0x4d89d8,details:_0x54db90}=_0x58d40f[_0x249ed(0x23c)];if(_0x53cd50)_0x394535[_0x249ed(0x1f2)]('analysis.energy.warmupTimes',{'val':JSON[_0x249ed(0x21b)](_0x53cd50),'ack':!![]});if(_0x4d89d8)_0x394535[_0x249ed(0x1f2)]('analysis.energy.warmupSources',{'val':JSON[_0x249ed(0x21b)](_0x4d89d8),'ack':!![]});if(_0x54db90)_0x394535[_0x249ed(0x1f2)](_0x249ed(0x1ed),{'val':JSON[_0x249ed(0x21b)](_0x54db90),'ack':!![]});}else{if(_0x58d40f[_0x249ed(0x1f6)]===_0x249ed(0x1e1)){const {penalties:_0x1c337e}=_0x58d40f[_0x249ed(0x23c)];if(_0x1c337e)_0x394535[_0x249ed(0x1f2)](_0x249ed(0x1e6),{'val':JSON['stringify'](_0x1c337e),'ack':!![]});}else{if(_0x58d40f[_0x249ed(0x1f6)]===_0x249ed(0x215)){const {forecast:_0x3c912c}=_0x58d40f[_0x249ed(0x23c)];if(_0x3c912c)_0x394535[_0x249ed(0x1f2)]('analysis.energy.pinnForecast',{'val':JSON[_0x249ed(0x21b)](_0x3c912c),'ack':!![]});}else{if(_0x58d40f[_0x249ed(0x1f6)]===_0x249ed(0x225)){const {alerts:_0x462e41}=_0x58d40f[_0x249ed(0x23c)];if(_0x462e41)_0x394535[_0x249ed(0x1f2)]('analysis.energy.ventilationAlerts',{'val':JSON[_0x249ed(0x21b)](_0x462e41),'ack':!![]});}else{if(_0x58d40f['type']===_0x249ed(0x231)){const {proposals:_0x19dd14}=_0x58d40f['payload'];_0x394535[_0x249ed(0x230)](_0x249ed(0x1fb),(_0x5ad4b5,_0x2380f5)=>{const _0x524591=_0x249ed;_0x2380f5&&_0x2380f5[_0x524591(0x1fc)]===!![]&&_0x19dd14&&_0x19dd14[_0x524591(0x210)]>0x0&&automation[_0x524591(0x213)](_0x394535,_0x19dd14);});}else{if(_0x58d40f['type']===_0x249ed(0x1df)){const {room:_0x43f1aa,propagation:_0x25d7a1}=_0x58d40f[_0x249ed(0x23c)];let _0x37a95f=_0x249ed(0x1f3),_0xf1a9a0=0x0;if(_0x25d7a1){const _0xb6adf3=Object[_0x249ed(0x204)](_0x25d7a1);_0xb6adf3['length']>0x0&&(_0x37a95f=_0xb6adf3[0x0][0x0],_0xf1a9a0=_0xb6adf3[0x0][0x1]);}_0x394535[_0x249ed(0x1f2)](_0x249ed(0x1f1),{'val':_0x37a95f,'ack':!![]}),_0x394535[_0x249ed(0x1f2)](_0x249ed(0x20e),{'val':_0xf1a9a0,'ack':!![]}),automation[_0x249ed(0x1dd)](_0x394535,_0x37a95f,_0xf1a9a0);}else{if(_0x58d40f['type']==='TRACKER_RESULT'){const {probabilities:_0x384054}=_0x58d40f['payload'];if(_0x384054){_0x394535['setStateAsync'](_0x249ed(0x228),{'val':JSON[_0x249ed(0x21b)](_0x384054),'ack':!![]});const _0x828742=Object[_0x249ed(0x242)](_0x384054);if(_0x828742[_0x249ed(0x210)]>0x0){const _0x3cf4ef=_0x828742[0x0],_0x3c9834=_0x384054[_0x3cf4ef];_0x394535[_0x249ed(0x1f2)](_0x249ed(0x1e0),{'val':_0x3cf4ef,'ack':!![]}),_0x394535['setStateAsync'](_0x249ed(0x21c),{'val':_0x3c9834,'ack':!![]});}}}else{if(_0x58d40f[_0x249ed(0x1f6)]===_0x249ed(0x200)){const {patterns:_0x579459}=_0x58d40f[_0x249ed(0x23c)];if(_0x579459&&_0x579459['length']>0x0)_0x394535[_0x249ed(0x1f2)](_0x249ed(0x216),{'val':JSON['stringify'](_0x579459),'ack':!![]});}}}}}}}}}}}}}}}}}}function startService(_0x1f688a,_0x750912){const _0x232a87=a4_0x263857;let _0x27269e=_0x232a87(0x1e3);if(fs[_0x232a87(0x224)](_0x750912))_0x27269e=_0x750912;const _0x1d5547=path['join'](__dirname,'..',_0x232a87(0x201)),_0x2253f6=path['join'](__dirname,'..',_0x232a87(0x1ef),_0x232a87(0x201));let _0x934021='';if(fs[_0x232a87(0x224)](_0x1d5547))_0x934021=_0x1d5547;else{if(fs[_0x232a87(0x224)](_0x2253f6))_0x934021=_0x2253f6;else{_0x1f688a['log'][_0x232a87(0x1dc)]('‚ùå\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20'+_0x1d5547+_0x232a87(0x1fa)+_0x2253f6+'.\x20Please\x20create\x20this\x20file!');return;}}try{_0x1f688a[_0x232a87(0x1ee)][_0x232a87(0x1ec)](_0x232a87(0x1fd)+_0x27269e+'\x20'+_0x934021),pythonProcess=spawn(_0x27269e,[_0x934021]),pythonProcess[_0x232a87(0x217)]['on'](_0x232a87(0x236),_0x3a1984=>{const _0x30decb=_0x232a87,_0x287c6d=_0x3a1984[_0x30decb(0x239)]()[_0x30decb(0x23f)]('\x0a');_0x287c6d['forEach'](_0x530a7e=>{const _0x4aa636=_0x30decb,_0x586a07=_0x530a7e[_0x4aa636(0x235)]();if(!_0x586a07)return;if(_0x586a07['startsWith']('[LOG]'))_0x1f688a[_0x4aa636(0x1ee)][_0x4aa636(0x23a)]('[PYTHON]\x20'+_0x586a07['substring'](0x5)[_0x4aa636(0x235)]());else{if(_0x586a07[_0x4aa636(0x23e)]('[RESULT]'))try{const _0x5cff53=JSON[_0x4aa636(0x1f4)](_0x586a07['substring'](0x8)[_0x4aa636(0x235)]());handleResult(_0x1f688a,_0x5cff53);}catch(_0xc2ac04){}}});}),pythonProcess[_0x232a87(0x23d)]['on'](_0x232a87(0x236),_0x20a2e0=>{const _0x4b29ee=_0x232a87;_0x1f688a[_0x4b29ee(0x1ee)][_0x4b29ee(0x1dc)](_0x4b29ee(0x244)+_0x20a2e0[_0x4b29ee(0x239)]()[_0x4b29ee(0x235)]());}),pythonProcess['on'](_0x232a87(0x1e8),_0x47e6e0=>{_0x1f688a['log']['warn']('Python\x20process\x20exited\x20with\x20code\x20'+_0x47e6e0),pythonProcess=null;}),_0x1f688a[_0x232a87(0x1e2)]=(_0x4958d1,_0x77a07b)=>send(_0x1f688a,_0x4958d1,_0x77a07b);}catch(_0x3601ae){_0x1f688a[_0x232a87(0x1ee)][_0x232a87(0x1dc)](_0x232a87(0x222)+_0x3601ae[_0x232a87(0x23b)]);}}function a4_0x34c6(_0x29407b,_0x14561b){const _0xd6f75=a4_0x2e5a();return a4_0x34c6=function(_0x19d29b,_0x23a309){_0x19d29b=_0x19d29b-0x1da;let _0x2e5a9d=_0xd6f75[_0x19d29b];return _0x2e5a9d;},a4_0x34c6(_0x29407b,_0x14561b);}function stopService(_0x1bfc94){const _0x14cd05=a4_0x263857;if(pythonProcess){try{pythonProcess[_0x14cd05(0x22b)]();}catch(_0x4aa55b){}pythonProcess=null;}}module[a4_0x263857(0x22f)]={'startService':startService,'stopService':stopService,'send':send};function a4_0x2e5a(){const _0xdfd40f=['2798034lZPsIm','PINN_PREDICT_RESULT','analysis.automation.detectedPatterns','stdout','5GaWSLt','738912SAaXJv','analysis.health.lastCheck','stringify','analysis.prediction.trackerConfidence','Failed:\x20','./setup','analysis.security.lastCheck','TRAINING_COMPLETE','GAIT_RESULT','Error\x20launching\x20Python:\x20','3575033WyUXjM','existsSync','VENTILATION_ALERT','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','short','analysis.prediction.trackerState','toLocaleDateString','HEALTH_TREND_RESULT','kill','ENERGY_PREDICT_RESULT','toFixed','ENERGY_TRAIN_RESULT','exports','getState','ENERGY_OPTIMIZE_RESULT','analysis.health.activityTrend','14144823tSCphH','apply','trim','data','child_process','analysis.health.isAnomaly','toString','debug','message','payload','stderr','startsWith','split','stdin','WARMUP_RESULT','keys','search','[PYTHON\x20ERR]\x20','writable','2496224vAkUwU','path','2-digit','error','handlePrediction','analysis.energy.forecast','SIGNAL_RESULT','analysis.prediction.trackerTopRoom','RL_PENALTY_UPDATE','sendToPythonWrapper','python3','success','heating','analysis.energy.rlPenalties','(((.+)+)+)+$','close','toLocaleTimeString','PONG','analysis.isAlert','info','analysis.energy.warmupDetails','log','python_service','threshold','analysis.prediction.nextRoom','setStateAsync','Unknown','parse','analysis.training.status','type','insulation','3ExMure','analysis.energy.heatingScore','\x20AND\x20','analysis.energy.mpcActive','val','üöÄ\x20Starting\x20Python\x20Bridge\x20using:\x20','toISOString','analysis.energy.insulationScore','COMFORT_RESULT','service.py','is_anomaly','HEALTH_RESULT','entries','787809LmUoaL','details','1499948VzgiWF','reason','HEALTH_TRAIN_RESULT','de-DE','analysis.alertReason','analysis.security.currentThreshold','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','analysis.prediction.confidence','SECURITY_RESULT','length','üêç\x20Python\x20Pong','analysis.security.lastScore','applyEnergySavings'];a4_0x2e5a=function(){return _0xdfd40f;};return a4_0x2e5a();}