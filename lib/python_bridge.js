const a4_0xab88b9=a4_0x2d17;(function(_0x5cb95c,_0x3dbafc){const _0x1587c8=a4_0x2d17,_0x16bbc1=_0x5cb95c();while(!![]){try{const _0x455d2a=-parseInt(_0x1587c8(0xed))/0x1+parseInt(_0x1587c8(0xd0))/0x2+-parseInt(_0x1587c8(0xd8))/0x3+parseInt(_0x1587c8(0xb8))/0x4+-parseInt(_0x1587c8(0xc8))/0x5+-parseInt(_0x1587c8(0xd3))/0x6+-parseInt(_0x1587c8(0x119))/0x7*(-parseInt(_0x1587c8(0xc3))/0x8);if(_0x455d2a===_0x3dbafc)break;else _0x16bbc1['push'](_0x16bbc1['shift']());}catch(_0x3e6773){_0x16bbc1['push'](_0x16bbc1['shift']());}}}(a4_0xa151,0x8949a));const a4_0x27e02c=(function(){let _0x4b02eb=!![];return function(_0x2cede9,_0x23a4de){const _0x46d61d=_0x4b02eb?function(){const _0x4c17c7=a4_0x2d17;if(_0x23a4de){const _0x41c8a5=_0x23a4de[_0x4c17c7(0xbd)](_0x2cede9,arguments);return _0x23a4de=null,_0x41c8a5;}}:function(){};return _0x4b02eb=![],_0x46d61d;};}()),a4_0x2266f2=a4_0x27e02c(this,function(){const _0x2ea166=a4_0x2d17;return a4_0x2266f2[_0x2ea166(0xef)]()[_0x2ea166(0xdf)](_0x2ea166(0xfe))[_0x2ea166(0xef)]()[_0x2ea166(0x11b)](a4_0x2266f2)['search'](_0x2ea166(0xfe));});a4_0x2266f2();'use strict';const {spawn}=require(a4_0xab88b9(0x105)),path=require(a4_0xab88b9(0xc7)),fs=require('fs'),setup=require('./setup'),automation=require(a4_0xab88b9(0xe8));let pythonProcess=null;function a4_0x2d17(_0xd324cc,_0x54e463){const _0x4c7914=a4_0xa151();return a4_0x2d17=function(_0x2266f2,_0x27e02c){_0x2266f2=_0x2266f2-0xb0;let _0xa15194=_0x4c7914[_0x2266f2];return _0xa15194;},a4_0x2d17(_0xd324cc,_0x54e463);}function send(_0x556fd5,_0x4ae8ec,_0x53b478={}){const _0x1eb4d0=a4_0xab88b9;if(!pythonProcess||!pythonProcess[_0x1eb4d0(0xfd)][_0x1eb4d0(0x10a)])return;const _0xfec62e=JSON['stringify']({'command':_0x4ae8ec,..._0x53b478});try{pythonProcess[_0x1eb4d0(0xfd)]['write'](_0xfec62e+'\x0a');}catch(_0x3403f3){}}function handleResult(_0x23875d,_0x1c5356){const _0x129cda=a4_0xab88b9;if(_0x1c5356[_0x129cda(0xf4)]===_0x129cda(0xc9))_0x23875d[_0x129cda(0xe1)][_0x129cda(0xc4)]('üêç\x20Python\x20Pong');else{if(_0x1c5356[_0x129cda(0xf4)]==='SECURITY_RESULT'){const {anomaly_score:_0x13a293,is_anomaly:_0x2dc8c1,threshold:_0x52688a,explanation:_0x36e755}=_0x1c5356['payload'];_0x23875d['setStateAsync']('analysis.security.lastScore',{'val':_0x13a293,'ack':!![]}),_0x23875d['setStateAsync'](_0x129cda(0xe5),{'val':new Date()[_0x129cda(0x11c)](),'ack':!![]});if(_0x52688a)_0x23875d['setStateAsync'](_0x129cda(0xdb),{'val':_0x52688a,'ack':!![]});if(_0x2dc8c1){let _0x81d3b3='Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x13a293[_0x129cda(0xde)](0x4)+')';if(_0x36e755&&_0x36e755!=='Unknown')_0x81d3b3+='\x0aGrund:\x20'+_0x36e755;_0x23875d[_0x129cda(0xb1)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x23875d[_0x129cda(0xb1)](_0x129cda(0xe7),{'val':_0x81d3b3,'ack':!![]}),setup[_0x129cda(0xb7)](_0x23875d,'‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20'+_0x81d3b3,![],!![]);}}else{if(_0x1c5356[_0x129cda(0xf4)]==='TRAINING_COMPLETE'){const _0x43f852=_0x1c5356[_0x129cda(0xcb)][_0x129cda(0x117)]||'',_0x4b4099=_0x1c5356[_0x129cda(0xcb)]['threshold'],_0x1dfc3c=_0x1c5356[_0x129cda(0xcb)][_0x129cda(0xc1)]?_0x129cda(0x109)+new Date()[_0x129cda(0x102)]()+'\x20('+_0x43f852+')':_0x129cda(0xcf)+_0x1c5356[_0x129cda(0xcb)][_0x129cda(0x11e)];_0x23875d[_0x129cda(0xb1)](_0x129cda(0x101),{'val':_0x1dfc3c,'ack':!![]});if(_0x1c5356[_0x129cda(0xcb)]['success']&&_0x4b4099)_0x23875d[_0x129cda(0xb1)]('analysis.security.currentThreshold',{'val':_0x4b4099,'ack':!![]});}else{if(_0x1c5356[_0x129cda(0xf4)]===_0x129cda(0xd6)){if(_0x1c5356[_0x129cda(0xcb)][_0x129cda(0xc1)])try{const _0x3c6ae4=JSON[_0x129cda(0xd4)](_0x1c5356[_0x129cda(0xcb)][_0x129cda(0x117)]);if(_0x3c6ae4[_0x129cda(0x116)])_0x23875d[_0x129cda(0xb1)](_0x129cda(0x10e),{'val':JSON[_0x129cda(0xff)](_0x3c6ae4[_0x129cda(0x116)]),'ack':!![]});if(_0x3c6ae4[_0x129cda(0xfc)])_0x23875d[_0x129cda(0xb1)](_0x129cda(0x11d),{'val':JSON[_0x129cda(0xff)](_0x3c6ae4['heating']),'ack':!![]});}catch(_0xbe9805){}}else{if(_0x1c5356[_0x129cda(0xf4)]===_0x129cda(0x115)){if(_0x1c5356[_0x129cda(0xcb)]['success']){_0x23875d['log']['info'](_0x129cda(0xe0));const _0x14a565=new Date(),_0x3e2668=_0x14a565['toLocaleDateString'](_0x129cda(0xb5),{'day':_0x129cda(0xf2),'month':'short','hour':_0x129cda(0xf2),'minute':_0x129cda(0xf2)});_0x23875d[_0x129cda(0xb1)]('analysis.health.lastCheck',{'val':_0x3e2668,'ack':!![]});}}else{if(_0x1c5356[_0x129cda(0xf4)]===_0x129cda(0x10f)){const _0x20a757=new Date(),_0x1aa1bd=_0x20a757[_0x129cda(0xc5)](_0x129cda(0xb5),{'day':'2-digit','month':'short','hour':'2-digit','minute':_0x129cda(0xf2)});_0x23875d[_0x129cda(0xb1)](_0x129cda(0xf1),{'val':_0x1aa1bd,'ack':!![]}),_0x23875d[_0x129cda(0xb1)](_0x129cda(0xfa),{'val':_0x1c5356['payload'][_0x129cda(0xce)],'ack':!![]});}else{if(_0x1c5356['type']===_0x129cda(0xf5)){const {trend_percent:_0x57f408,details:_0x5b9b80}=_0x1c5356[_0x129cda(0xcb)],_0x2fefc3=new Date(),_0x1094f9=_0x2fefc3[_0x129cda(0xc5)](_0x129cda(0xb5),{'day':_0x129cda(0xf2),'month':_0x129cda(0x118),'hour':_0x129cda(0xf2),'minute':_0x129cda(0xf2)});_0x23875d[_0x129cda(0xb1)](_0x129cda(0xf1),{'val':_0x1094f9,'ack':!![]}),_0x23875d['setStateAsync']('analysis.health.activityTrend',{'val':_0x57f408,'ack':!![]}),_0x23875d[_0x129cda(0xe1)]['info']('üìà\x20Health\x20Trend:\x20'+_0x5b9b80);}else{if(_0x1c5356['type']===_0x129cda(0xb3)){const {speed_trend:_0xa3f88d,sensors:_0x4819da,proof:_0x2c46b5}=_0x1c5356[_0x129cda(0xcb)];if(_0xa3f88d!==undefined)_0x23875d['setStateAsync']('analysis.health.gaitSpeed',{'val':_0xa3f88d,'ack':!![]});if(_0x4819da&&Array['isArray'](_0x4819da))_0x23875d['setStateAsync'](_0x129cda(0xea),{'val':_0x4819da[_0x129cda(0xf7)](',\x20'),'ack':!![]});if(_0x2c46b5)_0x23875d[_0x129cda(0xb1)](_0x129cda(0xfb),{'val':_0x2c46b5,'ack':!![]});}else{if(_0x1c5356[_0x129cda(0xf4)]===_0x129cda(0xf0)){const {forecast:_0x157113}=_0x1c5356[_0x129cda(0xcb)];if(_0x157113)_0x23875d[_0x129cda(0xb1)](_0x129cda(0x106),{'val':JSON[_0x129cda(0xff)](_0x157113),'ack':!![]});}else{if(_0x1c5356[_0x129cda(0xf4)]===_0x129cda(0x107)){const {times:_0x223fbe,sources:_0x2dfc8a,details:_0x34056f}=_0x1c5356['payload'];if(_0x223fbe)_0x23875d[_0x129cda(0xb1)](_0x129cda(0xf8),{'val':JSON[_0x129cda(0xff)](_0x223fbe),'ack':!![]});if(_0x2dfc8a)_0x23875d[_0x129cda(0xb1)]('analysis.energy.warmupSources',{'val':JSON[_0x129cda(0xff)](_0x2dfc8a),'ack':!![]});if(_0x34056f)_0x23875d[_0x129cda(0xb1)](_0x129cda(0xd2),{'val':JSON[_0x129cda(0xff)](_0x34056f),'ack':!![]});}else{if(_0x1c5356['type']===_0x129cda(0xb4)){const {penalties:_0xc30734}=_0x1c5356[_0x129cda(0xcb)];if(_0xc30734)_0x23875d[_0x129cda(0xb1)](_0x129cda(0x103),{'val':JSON[_0x129cda(0xff)](_0xc30734),'ack':!![]});}else{if(_0x1c5356[_0x129cda(0xf4)]===_0x129cda(0xd1)){const {forecast:_0x2dba7e}=_0x1c5356[_0x129cda(0xcb)];if(_0x2dba7e)_0x23875d[_0x129cda(0xb1)](_0x129cda(0x108),{'val':JSON[_0x129cda(0xff)](_0x2dba7e),'ack':!![]});}else{if(_0x1c5356[_0x129cda(0xf4)]===_0x129cda(0xbf)){const {alerts:_0xb2c785}=_0x1c5356[_0x129cda(0xcb)];if(_0xb2c785)_0x23875d[_0x129cda(0xb1)](_0x129cda(0x110),{'val':JSON[_0x129cda(0xff)](_0xb2c785),'ack':!![]});}else{if(_0x1c5356[_0x129cda(0xf4)]===_0x129cda(0x111)){const {proposals:_0x399297}=_0x1c5356[_0x129cda(0xcb)];_0x23875d[_0x129cda(0xb9)](_0x129cda(0xda),(_0x4b408a,_0x1730d4)=>{const _0x5cf47f=_0x129cda;_0x1730d4&&_0x1730d4[_0x5cf47f(0x114)]===!![]&&_0x399297&&_0x399297[_0x5cf47f(0xd7)]>0x0&&automation['applyEnergySavings'](_0x23875d,_0x399297);});}else{if(_0x1c5356[_0x129cda(0xf4)]===_0x129cda(0xc0)){const {room:_0x435ee6,propagation:_0x1149c0}=_0x1c5356['payload'];let _0x355bdb=_0x129cda(0xba),_0x38d561=0x0;if(_0x1149c0){const _0x15fc61=Object[_0x129cda(0xc2)](_0x1149c0);_0x15fc61[_0x129cda(0xd7)]>0x0&&(_0x355bdb=_0x15fc61[0x0][0x0],_0x38d561=_0x15fc61[0x0][0x1]);}_0x23875d[_0x129cda(0xb1)](_0x129cda(0xee),{'val':_0x355bdb,'ack':!![]}),_0x23875d['setStateAsync'](_0x129cda(0xeb),{'val':_0x38d561,'ack':!![]}),automation[_0x129cda(0xb6)](_0x23875d,_0x355bdb,_0x38d561);}else{if(_0x1c5356[_0x129cda(0xf4)]===_0x129cda(0xec)){const {probabilities:_0x2e9354}=_0x1c5356[_0x129cda(0xcb)];if(_0x2e9354){_0x23875d[_0x129cda(0xb1)](_0x129cda(0xb0),{'val':JSON[_0x129cda(0xff)](_0x2e9354),'ack':!![]});const _0x14a2f6=Object['keys'](_0x2e9354);if(_0x14a2f6[_0x129cda(0xd7)]>0x0){const _0xfbb42=_0x14a2f6[0x0],_0x3f98a5=_0x2e9354[_0xfbb42];_0x23875d['setStateAsync'](_0x129cda(0xbc),{'val':_0xfbb42,'ack':!![]}),_0x23875d[_0x129cda(0xb1)](_0x129cda(0xe9),{'val':_0x3f98a5,'ack':!![]});}}}else{if(_0x1c5356[_0x129cda(0xf4)]==='COMFORT_RESULT'){const {patterns:_0x52b22f}=_0x1c5356['payload'];if(_0x52b22f&&_0x52b22f['length']>0x0)_0x23875d[_0x129cda(0xb1)]('analysis.automation.detectedPatterns',{'val':JSON['stringify'](_0x52b22f),'ack':!![]});}}}}}}}}}}}}}}}}}}function startService(_0x58b221,_0x216173){const _0x35ca06=a4_0xab88b9;let _0x23f982=_0x35ca06(0xe3);if(fs[_0x35ca06(0xf9)](_0x216173))_0x23f982=_0x216173;const _0x436235=path[_0x35ca06(0xf7)](__dirname,'..',_0x35ca06(0xdc)),_0x423192=path[_0x35ca06(0xf7)](__dirname,'..',_0x35ca06(0xe4),_0x35ca06(0xdc));let _0x587466='';if(fs[_0x35ca06(0xf9)](_0x436235))_0x587466=_0x436235;else{if(fs['existsSync'](_0x423192))_0x587466=_0x423192;else{_0x58b221[_0x35ca06(0xe1)][_0x35ca06(0xca)](_0x35ca06(0x11a)+_0x436235+'\x20AND\x20'+_0x423192+_0x35ca06(0xbe));return;}}try{_0x58b221[_0x35ca06(0xe1)][_0x35ca06(0x10b)](_0x35ca06(0xcc)+_0x23f982+'\x20'+_0x587466),pythonProcess=spawn(_0x23f982,[_0x587466]),pythonProcess[_0x35ca06(0x104)]['on'](_0x35ca06(0xf3),_0x8bb6b9=>{const _0x1c34a8=_0x35ca06,_0x1b024d=_0x8bb6b9[_0x1c34a8(0xef)]()[_0x1c34a8(0xe6)]('\x0a');_0x1b024d[_0x1c34a8(0x10c)](_0x3037e3=>{const _0x2832fc=_0x1c34a8,_0x51b5be=_0x3037e3[_0x2832fc(0x10d)]();if(!_0x51b5be)return;if(_0x51b5be['startsWith'](_0x2832fc(0xb2)))_0x58b221['log']['debug'](_0x2832fc(0xd5)+_0x51b5be[_0x2832fc(0x113)](0x5)[_0x2832fc(0x10d)]());else{if(_0x51b5be[_0x2832fc(0x100)](_0x2832fc(0xdd)))try{const _0x50e1da=JSON[_0x2832fc(0xd4)](_0x51b5be[_0x2832fc(0x113)](0x8)[_0x2832fc(0x10d)]());handleResult(_0x58b221,_0x50e1da);}catch(_0x43c1b0){}}});}),pythonProcess[_0x35ca06(0xd9)]['on'](_0x35ca06(0xf3),_0x3d044d=>{const _0x3f7241=_0x35ca06;_0x58b221[_0x3f7241(0xe1)][_0x3f7241(0xca)](_0x3f7241(0xe2)+_0x3d044d[_0x3f7241(0xef)]()['trim']());}),pythonProcess['on'](_0x35ca06(0xf6),_0x29ce84=>{const _0x59b66d=_0x35ca06;_0x58b221['log']['warn'](_0x59b66d(0x112)+_0x29ce84),pythonProcess=null;}),_0x58b221[_0x35ca06(0xbb)]=(_0x3b3ffa,_0x1ad84c)=>send(_0x58b221,_0x3b3ffa,_0x1ad84c);}catch(_0x2353ee){_0x58b221['log'][_0x35ca06(0xca)]('Error\x20launching\x20Python:\x20'+_0x2353ee['message']);}}function a4_0xa151(){const _0x2a8ada=['error','payload','üöÄ\x20Starting\x20Python\x20Bridge\x20using:\x20','exports','is_anomaly','Failed:\x20','273138GQcjTw','PINN_PREDICT_RESULT','analysis.energy.warmupDetails','1902726wUWKKb','parse','[PYTHON]\x20','ENERGY_TRAIN_RESULT','length','2136645ImUgIu','stderr','analysis.energy.mpcActive','analysis.security.currentThreshold','service.py','[RESULT]','toFixed','search','‚úÖ\x20HEALTH\x20TRAINED.','log','[PYTHON\x20ERR]\x20','python3','python_service','analysis.security.lastCheck','split','analysis.alertReason','./automation','analysis.prediction.trackerConfidence','analysis.health.gaitSensors','analysis.prediction.confidence','TRACKER_RESULT','740658rdHzKe','analysis.prediction.nextRoom','toString','ENERGY_PREDICT_RESULT','analysis.health.lastCheck','2-digit','data','type','HEALTH_TREND_RESULT','close','join','analysis.energy.warmupTimes','existsSync','analysis.health.isAnomaly','analysis.health.gaitDebug','heating','stdin','(((.+)+)+)+$','stringify','startsWith','analysis.training.status','toLocaleTimeString','analysis.energy.rlPenalties','stdout','child_process','analysis.energy.forecast','WARMUP_RESULT','analysis.energy.pinnForecast','Success:\x20','writable','info','forEach','trim','analysis.energy.insulationScore','HEALTH_RESULT','analysis.energy.ventilationAlerts','ENERGY_OPTIMIZE_RESULT','Python\x20process\x20exited\x20with\x20code\x20','substring','val','HEALTH_TRAIN_RESULT','insulation','details','short','56PaRxGe','‚ùå\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20','constructor','toISOString','analysis.energy.heatingScore','reason','analysis.prediction.trackerState','setStateAsync','[LOG]','GAIT_RESULT','RL_PENALTY_UPDATE','de-DE','handlePrediction','sendNotification','498668dtbsRe','getState','Unknown','sendToPythonWrapper','analysis.prediction.trackerTopRoom','apply','.\x20Please\x20create\x20this\x20file!','VENTILATION_ALERT','SIGNAL_RESULT','success','entries','3187000FiNpvy','debug','toLocaleDateString','kill','path','5579560PqPoxQ','PONG'];a4_0xa151=function(){return _0x2a8ada;};return a4_0xa151();}function stopService(_0xf5ccba){const _0x19ad62=a4_0xab88b9;if(pythonProcess){try{pythonProcess[_0x19ad62(0xc6)]();}catch(_0x118bf1){}pythonProcess=null;}}module[a4_0xab88b9(0xcd)]={'startService':startService,'stopService':stopService,'send':send};