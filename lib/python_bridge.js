const a4_0x2b5bec=a4_0x52eb;(function(_0x4755d0,_0x34ab6f){const _0x4a1f66=a4_0x52eb,_0x18d65b=_0x4755d0();while(!![]){try{const _0x314b5f=parseInt(_0x4a1f66(0x15e))/0x1+parseInt(_0x4a1f66(0x141))/0x2*(parseInt(_0x4a1f66(0x135))/0x3)+parseInt(_0x4a1f66(0x17b))/0x4+-parseInt(_0x4a1f66(0x11a))/0x5+-parseInt(_0x4a1f66(0x186))/0x6+-parseInt(_0x4a1f66(0x10f))/0x7+parseInt(_0x4a1f66(0x185))/0x8*(parseInt(_0x4a1f66(0x144))/0x9);if(_0x314b5f===_0x34ab6f)break;else _0x18d65b['push'](_0x18d65b['shift']());}catch(_0x39a8a7){_0x18d65b['push'](_0x18d65b['shift']());}}}(a4_0x12bd,0x3c9ac));const a4_0x3ff179=(function(){let _0x2e16ae=!![];return function(_0x51070a,_0x3f0934){const _0x314072=_0x2e16ae?function(){const _0x5842e5=a4_0x52eb;if(_0x3f0934){const _0x513e09=_0x3f0934[_0x5842e5(0x13d)](_0x51070a,arguments);return _0x3f0934=null,_0x513e09;}}:function(){};return _0x2e16ae=![],_0x314072;};}()),a4_0x1cb079=a4_0x3ff179(this,function(){const _0x4ba4e5=a4_0x52eb;return a4_0x1cb079[_0x4ba4e5(0x120)]()['search'](_0x4ba4e5(0x121))[_0x4ba4e5(0x120)]()['constructor'](a4_0x1cb079)[_0x4ba4e5(0x178)](_0x4ba4e5(0x121));});a4_0x1cb079();'use strict';const {spawn}=require(a4_0x2b5bec(0x13c)),path=require(a4_0x2b5bec(0x14e)),fs=require('fs'),setup=require(a4_0x2b5bec(0x137)),automation=require('./automation');let pythonProcess=null;function a4_0x52eb(_0x19605c,_0x1e71cd){const _0x5d754c=a4_0x12bd();return a4_0x52eb=function(_0x1cb079,_0x3ff179){_0x1cb079=_0x1cb079-0x10e;let _0x12bd43=_0x5d754c[_0x1cb079];return _0x12bd43;},a4_0x52eb(_0x19605c,_0x1e71cd);}function send(_0x251723,_0x57426b,_0x40175d={}){const _0x51a5dd=a4_0x2b5bec;if(!pythonProcess||!pythonProcess[_0x51a5dd(0x124)][_0x51a5dd(0x12e)])return;_0x40175d[_0x51a5dd(0x149)]&&(_0x40175d[_0x51a5dd(0x149)]=setup[_0x51a5dd(0x154)](_0x40175d[_0x51a5dd(0x149)]));(_0x57426b===_0x51a5dd(0x155)||_0x57426b===_0x51a5dd(0x114))&&_0x40175d['sequences']&&(_0x40175d[_0x51a5dd(0x15f)]=_0x40175d['sequences'][_0x51a5dd(0x170)](_0x1c1718=>{const _0x3ab121=_0x51a5dd;return _0x1c1718['map'](_0x3452d5=>setup[_0x3ab121(0x154)](_0x3452d5));}));if(_0x40175d[_0x51a5dd(0x125)]){const _0x4a7a23={};for(const [_0x418551,_0x1a3227]of Object[_0x51a5dd(0x14b)](_0x40175d[_0x51a5dd(0x125)]))_0x4a7a23[setup['normalizeRoomId'](_0x418551)]=_0x1a3227;_0x40175d[_0x51a5dd(0x125)]=_0x4a7a23;}if(_0x40175d['targets']){const _0x246748={};for(const [_0x1f7abf,_0x537e1e]of Object[_0x51a5dd(0x14b)](_0x40175d[_0x51a5dd(0x165)]))_0x246748[setup[_0x51a5dd(0x154)](_0x1f7abf)]=_0x537e1e;_0x40175d[_0x51a5dd(0x165)]=_0x246748;}const _0x2d7c64=JSON[_0x51a5dd(0x167)]({'command':_0x57426b,..._0x40175d});try{pythonProcess['stdin'][_0x51a5dd(0x161)](_0x2d7c64+'\x0a');}catch(_0xad36b5){}}function a4_0x12bd(){const _0x17bfc0=['entries','message','analysis.energy.mpcActive','path','toISOString','kill','TRAINING_COMPLETE','2-digit','val','normalizeRoomId','TRAIN_TOPOLOGY','WARMUP_RESULT','analysis.security.lastScore','isArray','join','[PYTHON]\x20','analysis.automation.detectedPatterns','details','error','103659ELitNP','sequences','âœ…\x20HEALTH\x20TRAINED.','write','SECURITY_RESULT','analysis.energy.rlPenalties','GAIT_RESULT','targets','SIGNAL_RESULT','stringify','analysis.health.gaitSpeed','.\x20Please\x20create\x20this\x20file!','Python\x20process\x20exited\x20with\x20code\x20','insulation','Success:\x20','analysis.prediction.trackerConfidence','success','data','map','sendToPythonWrapper','stderr','analysis.prediction.trackerState','TRACKER_RESULT','analysis.alertReason','analysis.health.gaitDebug','analysis.health.gaitSensors','search','reason','python3','1611164FfDSjd','analysis.energy.warmupTimes','PONG','length','stdout','[PYTHON\x20ERR]\x20','de-DE','toFixed','analysis.energy.ventilationAlerts','split','16hFNscD','2121198dJBawO','debug','âš ï¸\x20SECURITY\x20ALARM:\x20','forEach','\x20AND\x20','2748046CKMZsU','toLocaleDateString','VENTILATION_ALERT','ðŸ“ˆ\x20Health\x20Trend:\x20','log','TRAIN_SECURITY','COMFORT_RESULT','toLocaleTimeString','handlePrediction','analysis.energy.pinnForecast','payload','793590JyWNZh','service.py','Error\x20launching\x20Python:\x20','ENERGY_PREDICT_RESULT','heating','getState','toString','(((.+)+)+)+$','RL_PENALTY_UPDATE','analysis.energy.warmupSources','stdin','current_temps','Failed:\x20','python_service','setStateAsync','analysis.security.lastCheck','parse','HEALTH_TRAIN_RESULT','HEALTH_RESULT','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20','writable','analysis.health.activityTrend','startsWith','ðŸ\x20Python\x20Pong','Unknown','analysis.health.lastCheck','ENERGY_TRAIN_RESULT','3VwtJlO','is_anomaly','./setup','[RESULT]','analysis.energy.insulationScore','existsSync','threshold','child_process','apply','substring','analysis.energy.forecast','analysis.security.currentThreshold','570706LRpmDI','trim','analysis.prediction.confidence','1625679EEcTHp','applyEnergySavings','ENERGY_OPTIMIZE_RESULT','type','short','room','info'];a4_0x12bd=function(){return _0x17bfc0;};return a4_0x12bd();}function handleResult(_0x5ca87b,_0x482cbf){const _0x1732fd=a4_0x2b5bec;if(_0x482cbf['type']===_0x1732fd(0x17d))_0x5ca87b['log'][_0x1732fd(0x187)](_0x1732fd(0x131));else{if(_0x482cbf[_0x1732fd(0x147)]===_0x1732fd(0x162)){const {anomaly_score:_0x102004,is_anomaly:_0x36850a,threshold:_0x2c1e4c,explanation:_0x3282c7}=_0x482cbf[_0x1732fd(0x119)];_0x5ca87b[_0x1732fd(0x128)](_0x1732fd(0x157),{'val':_0x102004,'ack':!![]}),_0x5ca87b['setStateAsync'](_0x1732fd(0x129),{'val':new Date()[_0x1732fd(0x14f)](),'ack':!![]});if(_0x2c1e4c)_0x5ca87b[_0x1732fd(0x128)](_0x1732fd(0x140),{'val':_0x2c1e4c,'ack':!![]});if(_0x36850a){let _0xa1bb73='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x102004[_0x1732fd(0x182)](0x4)+')';if(_0x3282c7&&_0x3282c7!=='Unknown')_0xa1bb73+='\x0aGrund:\x20'+_0x3282c7;_0x5ca87b[_0x1732fd(0x128)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x5ca87b[_0x1732fd(0x128)](_0x1732fd(0x175),{'val':_0xa1bb73,'ack':!![]}),setup['sendNotification'](_0x5ca87b,_0x1732fd(0x188)+_0xa1bb73,![],!![]);}}else{if(_0x482cbf['type']===_0x1732fd(0x151)){const _0xe8b599=_0x482cbf['payload'][_0x1732fd(0x15c)]||'',_0x2c86bd=_0x482cbf[_0x1732fd(0x119)][_0x1732fd(0x13b)],_0x24fa88=_0x482cbf[_0x1732fd(0x119)][_0x1732fd(0x16e)]?_0x1732fd(0x16c)+new Date()[_0x1732fd(0x116)]()+'\x20('+_0xe8b599+')':_0x1732fd(0x126)+_0x482cbf[_0x1732fd(0x119)][_0x1732fd(0x179)];_0x5ca87b['setStateAsync']('analysis.training.status',{'val':_0x24fa88,'ack':!![]});if(_0x482cbf[_0x1732fd(0x119)][_0x1732fd(0x16e)]&&_0x2c86bd)_0x5ca87b[_0x1732fd(0x128)]('analysis.security.currentThreshold',{'val':_0x2c86bd,'ack':!![]});}else{if(_0x482cbf[_0x1732fd(0x147)]===_0x1732fd(0x134)){if(_0x482cbf[_0x1732fd(0x119)]['success'])try{const _0x317a5f=JSON[_0x1732fd(0x12a)](_0x482cbf[_0x1732fd(0x119)][_0x1732fd(0x15c)]);if(_0x317a5f[_0x1732fd(0x16b)])_0x5ca87b[_0x1732fd(0x128)](_0x1732fd(0x139),{'val':JSON[_0x1732fd(0x167)](_0x317a5f[_0x1732fd(0x16b)]),'ack':!![]});if(_0x317a5f[_0x1732fd(0x11e)])_0x5ca87b[_0x1732fd(0x128)]('analysis.energy.heatingScore',{'val':JSON[_0x1732fd(0x167)](_0x317a5f['heating']),'ack':!![]});}catch(_0x57636a){}}else{if(_0x482cbf[_0x1732fd(0x147)]===_0x1732fd(0x12b)){if(_0x482cbf['payload'][_0x1732fd(0x16e)]){_0x5ca87b[_0x1732fd(0x113)][_0x1732fd(0x14a)](_0x1732fd(0x160));const _0x27d599=new Date(),_0x3fa4dd=_0x27d599[_0x1732fd(0x110)](_0x1732fd(0x181),{'day':_0x1732fd(0x152),'month':_0x1732fd(0x148),'hour':_0x1732fd(0x152),'minute':'2-digit'});_0x5ca87b[_0x1732fd(0x128)](_0x1732fd(0x133),{'val':_0x3fa4dd,'ack':!![]});}}else{if(_0x482cbf['type']===_0x1732fd(0x12c)){const _0x4668c8=new Date(),_0x26fbce=_0x4668c8['toLocaleDateString']('de-DE',{'day':_0x1732fd(0x152),'month':'short','hour':_0x1732fd(0x152),'minute':_0x1732fd(0x152)});_0x5ca87b[_0x1732fd(0x128)](_0x1732fd(0x133),{'val':_0x26fbce,'ack':!![]}),_0x5ca87b[_0x1732fd(0x128)]('analysis.health.isAnomaly',{'val':_0x482cbf['payload'][_0x1732fd(0x136)],'ack':!![]});}else{if(_0x482cbf[_0x1732fd(0x147)]==='HEALTH_TREND_RESULT'){const {trend_percent:_0x1a1102,details:_0x2b2efe}=_0x482cbf[_0x1732fd(0x119)],_0x47016e=new Date(),_0x5e9bc0=_0x47016e[_0x1732fd(0x110)]('de-DE',{'day':'2-digit','month':_0x1732fd(0x148),'hour':_0x1732fd(0x152),'minute':_0x1732fd(0x152)});_0x5ca87b[_0x1732fd(0x128)]('analysis.health.lastCheck',{'val':_0x5e9bc0,'ack':!![]}),_0x5ca87b['setStateAsync'](_0x1732fd(0x12f),{'val':_0x1a1102,'ack':!![]}),_0x5ca87b[_0x1732fd(0x113)][_0x1732fd(0x14a)](_0x1732fd(0x112)+_0x2b2efe);}else{if(_0x482cbf['type']===_0x1732fd(0x164)){const {speed_trend:_0x57bf8d,sensors:_0x11676e,proof:_0x3e05f0}=_0x482cbf['payload'];if(_0x57bf8d!==undefined)_0x5ca87b[_0x1732fd(0x128)](_0x1732fd(0x168),{'val':_0x57bf8d,'ack':!![]});if(_0x11676e&&Array[_0x1732fd(0x158)](_0x11676e))_0x5ca87b[_0x1732fd(0x128)](_0x1732fd(0x177),{'val':_0x11676e[_0x1732fd(0x159)](',\x20'),'ack':!![]});if(_0x3e05f0)_0x5ca87b[_0x1732fd(0x128)](_0x1732fd(0x176),{'val':_0x3e05f0,'ack':!![]});}else{if(_0x482cbf[_0x1732fd(0x147)]===_0x1732fd(0x11d)){const {forecast:_0x51fafe}=_0x482cbf[_0x1732fd(0x119)];if(_0x51fafe)_0x5ca87b[_0x1732fd(0x128)](_0x1732fd(0x13f),{'val':JSON['stringify'](_0x51fafe),'ack':!![]});}else{if(_0x482cbf[_0x1732fd(0x147)]===_0x1732fd(0x156)){const {times:_0x17fb93,sources:_0x24f7f8,details:_0x2ade46}=_0x482cbf[_0x1732fd(0x119)];if(_0x17fb93)_0x5ca87b[_0x1732fd(0x128)](_0x1732fd(0x17c),{'val':JSON[_0x1732fd(0x167)](_0x17fb93),'ack':!![]});if(_0x24f7f8)_0x5ca87b['setStateAsync'](_0x1732fd(0x123),{'val':JSON[_0x1732fd(0x167)](_0x24f7f8),'ack':!![]});if(_0x2ade46)_0x5ca87b[_0x1732fd(0x128)]('analysis.energy.warmupDetails',{'val':JSON[_0x1732fd(0x167)](_0x2ade46),'ack':!![]});}else{if(_0x482cbf[_0x1732fd(0x147)]===_0x1732fd(0x122)){const {penalties:_0x97013b}=_0x482cbf[_0x1732fd(0x119)];if(_0x97013b)_0x5ca87b[_0x1732fd(0x128)](_0x1732fd(0x163),{'val':JSON[_0x1732fd(0x167)](_0x97013b),'ack':!![]});}else{if(_0x482cbf['type']==='PINN_PREDICT_RESULT'){const {forecast:_0x351213}=_0x482cbf['payload'];if(_0x351213)_0x5ca87b['setStateAsync'](_0x1732fd(0x118),{'val':JSON[_0x1732fd(0x167)](_0x351213),'ack':!![]});}else{if(_0x482cbf[_0x1732fd(0x147)]===_0x1732fd(0x111)){const {alerts:_0xb9b017}=_0x482cbf[_0x1732fd(0x119)];if(_0xb9b017)_0x5ca87b['setStateAsync'](_0x1732fd(0x183),{'val':JSON[_0x1732fd(0x167)](_0xb9b017),'ack':!![]});}else{if(_0x482cbf[_0x1732fd(0x147)]===_0x1732fd(0x146)){const {proposals:_0x4861e2}=_0x482cbf[_0x1732fd(0x119)];_0x5ca87b[_0x1732fd(0x11f)](_0x1732fd(0x14d),(_0x4aab5b,_0x17dce2)=>{const _0x26d008=_0x1732fd;_0x17dce2&&_0x17dce2[_0x26d008(0x153)]===!![]&&_0x4861e2&&_0x4861e2[_0x26d008(0x17e)]>0x0&&automation[_0x26d008(0x145)](_0x5ca87b,_0x4861e2);});}else{if(_0x482cbf[_0x1732fd(0x147)]===_0x1732fd(0x166)){const {room:_0x5e509e,propagation:_0x51c1e2}=_0x482cbf['payload'];let _0x272c3e=_0x1732fd(0x132),_0x2f588a=0x0;if(_0x51c1e2){const _0x4287d9=Object[_0x1732fd(0x14b)](_0x51c1e2);_0x4287d9['length']>0x0&&(_0x272c3e=_0x4287d9[0x0][0x0],_0x2f588a=_0x4287d9[0x0][0x1]);}_0x5ca87b[_0x1732fd(0x128)]('analysis.prediction.nextRoom',{'val':_0x272c3e,'ack':!![]}),_0x5ca87b[_0x1732fd(0x128)](_0x1732fd(0x143),{'val':_0x2f588a,'ack':!![]}),automation[_0x1732fd(0x117)](_0x5ca87b,_0x272c3e,_0x2f588a);}else{if(_0x482cbf['type']===_0x1732fd(0x174)){const {probabilities:_0x4bd250}=_0x482cbf[_0x1732fd(0x119)];if(_0x4bd250){_0x5ca87b[_0x1732fd(0x128)](_0x1732fd(0x173),{'val':JSON[_0x1732fd(0x167)](_0x4bd250),'ack':!![]});const _0x509bf4=Object['keys'](_0x4bd250);if(_0x509bf4[_0x1732fd(0x17e)]>0x0){const _0x5421e0=_0x509bf4[0x0],_0xc2383a=_0x4bd250[_0x5421e0];_0x5ca87b[_0x1732fd(0x128)]('analysis.prediction.trackerTopRoom',{'val':_0x5421e0,'ack':!![]}),_0x5ca87b[_0x1732fd(0x128)](_0x1732fd(0x16d),{'val':_0xc2383a,'ack':!![]});}}}else{if(_0x482cbf[_0x1732fd(0x147)]===_0x1732fd(0x115)){const {patterns:_0x2a76c7}=_0x482cbf[_0x1732fd(0x119)];if(_0x2a76c7&&_0x2a76c7['length']>0x0)_0x5ca87b[_0x1732fd(0x128)](_0x1732fd(0x15b),{'val':JSON[_0x1732fd(0x167)](_0x2a76c7),'ack':!![]});}}}}}}}}}}}}}}}}}}function startService(_0xfa385c,_0x20456e){const _0x466bed=a4_0x2b5bec;let _0x136b97=_0x466bed(0x17a);if(fs[_0x466bed(0x13a)](_0x20456e))_0x136b97=_0x20456e;const _0x4342c6=path[_0x466bed(0x159)](__dirname,'..',_0x466bed(0x11b)),_0x1d1e67=path[_0x466bed(0x159)](__dirname,'..',_0x466bed(0x127),'service.py');let _0x42acda='';if(fs['existsSync'](_0x4342c6))_0x42acda=_0x4342c6;else{if(fs['existsSync'](_0x1d1e67))_0x42acda=_0x1d1e67;else{_0xfa385c[_0x466bed(0x113)]['error'](_0x466bed(0x12d)+_0x4342c6+_0x466bed(0x10e)+_0x1d1e67+_0x466bed(0x169));return;}}try{_0xfa385c['log'][_0x466bed(0x14a)]('ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20'+_0x136b97+'\x20'+_0x42acda),pythonProcess=spawn(_0x136b97,[_0x42acda]),pythonProcess[_0x466bed(0x17f)]['on'](_0x466bed(0x16f),_0x2b4426=>{const _0x3fd960=_0x466bed,_0x2a82db=_0x2b4426[_0x3fd960(0x120)]()[_0x3fd960(0x184)]('\x0a');_0x2a82db[_0x3fd960(0x189)](_0x35d237=>{const _0xe9ce73=_0x3fd960,_0x46b786=_0x35d237[_0xe9ce73(0x142)]();if(!_0x46b786)return;if(_0x46b786['startsWith']('[LOG]'))_0xfa385c[_0xe9ce73(0x113)][_0xe9ce73(0x187)](_0xe9ce73(0x15a)+_0x46b786['substring'](0x5)[_0xe9ce73(0x142)]());else{if(_0x46b786[_0xe9ce73(0x130)](_0xe9ce73(0x138)))try{const _0x368d36=JSON[_0xe9ce73(0x12a)](_0x46b786[_0xe9ce73(0x13e)](0x8)[_0xe9ce73(0x142)]());handleResult(_0xfa385c,_0x368d36);}catch(_0x5b3536){}}});}),pythonProcess[_0x466bed(0x172)]['on'](_0x466bed(0x16f),_0x34d2ef=>{const _0x340a4e=_0x466bed;_0xfa385c[_0x340a4e(0x113)]['error'](_0x340a4e(0x180)+_0x34d2ef[_0x340a4e(0x120)]()['trim']());}),pythonProcess['on']('close',_0x3962ca=>{const _0x482796=_0x466bed;_0xfa385c[_0x482796(0x113)]['warn'](_0x482796(0x16a)+_0x3962ca),pythonProcess=null;}),_0xfa385c[_0x466bed(0x171)]=(_0x4d30bc,_0x416f62)=>send(_0xfa385c,_0x4d30bc,_0x416f62);}catch(_0xf7995d){_0xfa385c[_0x466bed(0x113)][_0x466bed(0x15d)](_0x466bed(0x11c)+_0xf7995d[_0x466bed(0x14c)]);}}function stopService(_0x473e9d){const _0x52561b=a4_0x2b5bec;if(pythonProcess){try{pythonProcess[_0x52561b(0x150)]();}catch(_0x16a0fd){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};