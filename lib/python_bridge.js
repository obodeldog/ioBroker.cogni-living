const a4_0x45bdaa=a4_0xdc1e;(function(_0x4ec57c,_0x18d4da){const _0x59e54b=a4_0xdc1e,_0x39b82b=_0x4ec57c();while(!![]){try{const _0x37e3bc=-parseInt(_0x59e54b(0x14b))/0x1*(parseInt(_0x59e54b(0x141))/0x2)+parseInt(_0x59e54b(0x189))/0x3*(parseInt(_0x59e54b(0x15e))/0x4)+-parseInt(_0x59e54b(0x13b))/0x5+-parseInt(_0x59e54b(0x13a))/0x6*(-parseInt(_0x59e54b(0x19d))/0x7)+-parseInt(_0x59e54b(0x183))/0x8*(parseInt(_0x59e54b(0x179))/0x9)+parseInt(_0x59e54b(0x16d))/0xa*(-parseInt(_0x59e54b(0x14a))/0xb)+parseInt(_0x59e54b(0x174))/0xc;if(_0x37e3bc===_0x18d4da)break;else _0x39b82b['push'](_0x39b82b['shift']());}catch(_0x2fac17){_0x39b82b['push'](_0x39b82b['shift']());}}}(a4_0x2eaf,0x4bab7));const a4_0x457e9f=(function(){let _0x10b5ba=!![];return function(_0xe34a85,_0x23f4b1){const _0x50c1da=_0x10b5ba?function(){const _0xb0d784=a4_0xdc1e;if(_0x23f4b1){const _0x24a5cd=_0x23f4b1[_0xb0d784(0x14c)](_0xe34a85,arguments);return _0x23f4b1=null,_0x24a5cd;}}:function(){};return _0x10b5ba=![],_0x50c1da;};}()),a4_0x3feb38=a4_0x457e9f(this,function(){const _0x4b05f7=a4_0xdc1e;return a4_0x3feb38['toString']()[_0x4b05f7(0x19a)](_0x4b05f7(0x15a))[_0x4b05f7(0x155)]()[_0x4b05f7(0x176)](a4_0x3feb38)[_0x4b05f7(0x19a)](_0x4b05f7(0x15a));});a4_0x3feb38();function a4_0xdc1e(_0x5ccb15,_0x1854ac){const _0x18e2a2=a4_0x2eaf();return a4_0xdc1e=function(_0x3feb38,_0x457e9f){_0x3feb38=_0x3feb38-0x136;let _0x2eaf7e=_0x18e2a2[_0x3feb38];return _0x2eaf7e;},a4_0xdc1e(_0x5ccb15,_0x1854ac);}'use strict';function a4_0x2eaf(){const _0x5d0096=['success','SIGNAL_RESULT','analysis.prediction.confidence','analysis.prediction.nextRoom','stringify','search','Unknown','setStateAsync','7uYtdnB','analysis.security.lastCheck','split','ðŸ“ˆ\x20Health\x20Trend:\x20','RL_PENALTY_UPDATE','close','payload','trim','length','python3','[PYTHON\x20ERR]\x20','.\x20Please\x20create\x20this\x20file!','1407282ryRYhR','2887130dMAgiR','service.py','reason','stdout','SECURITY_RESULT','parse','214006dxEcsJ','analysis.prediction.trackerConfidence','analysis.energy.warmupDetails','exports','path','analysis.energy.warmupSources','analysis.automation.detectedPatterns','analysis.isAlert','type','198pZWKmX','3pGehpe','apply','substring','toLocaleTimeString','Error\x20launching\x20Python:\x20','âš ï¸\x20SECURITY\x20ALARM:\x20','debug','sendNotification','Failed:\x20','analysis.alertReason','toString','startsWith','PINN_PREDICT_RESULT','HEALTH_TRAIN_RESULT','analysis.health.isAnomaly','(((.+)+)+)+$','./automation','is_anomaly','HEALTH_RESULT','12668TFDvky','analysis.energy.insulationScore','kill','ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20','PONG','[LOG]','data','insulation','child_process','join','analysis.health.gaitSpeed','writable','python_service','write','WARMUP_RESULT','8490RdBajA','log','VENTILATION_ALERT','[PYTHON]\x20','analysis.health.gaitDebug','ENERGY_TRAIN_RESULT','analysis.prediction.trackerTopRoom','15079500hsrTWM','\x0aGrund:\x20','constructor','analysis.energy.mpcActive','âœ…\x20HEALTH\x20TRAINED.','9FkpbUX','\x20AND\x20','threshold','analysis.energy.heatingScore','de-DE','info','isArray','toISOString','handlePrediction','val','3533576CVDLug','Success:\x20','analysis.energy.pinnForecast','sendToPythonWrapper','toFixed','2-digit','165mfdvEP','error','short','toLocaleDateString','forEach','heating','getState','COMFORT_RESULT','./setup','existsSync','analysis.health.gaitSensors','GAIT_RESULT'];a4_0x2eaf=function(){return _0x5d0096;};return a4_0x2eaf();}const {spawn}=require(a4_0x45bdaa(0x166)),path=require(a4_0x45bdaa(0x145)),fs=require('fs'),setup=require(a4_0x45bdaa(0x191)),automation=require(a4_0x45bdaa(0x15b));let pythonProcess=null;function send(_0xf0a18e,_0xd1d299,_0x5af92d={}){const _0x123b46=a4_0x45bdaa;if(!pythonProcess||!pythonProcess['stdin'][_0x123b46(0x169)])return;const _0x80afc4=JSON[_0x123b46(0x199)]({'command':_0xd1d299,..._0x5af92d});try{pythonProcess['stdin'][_0x123b46(0x16b)](_0x80afc4+'\x0a');}catch(_0x54d9a7){}}function handleResult(_0x3d0ce1,_0x257945){const _0x59d5bb=a4_0x45bdaa;if(_0x257945[_0x59d5bb(0x149)]===_0x59d5bb(0x162))_0x3d0ce1[_0x59d5bb(0x16e)][_0x59d5bb(0x151)]('ðŸ\x20Python\x20Pong');else{if(_0x257945[_0x59d5bb(0x149)]===_0x59d5bb(0x13f)){const {anomaly_score:_0x5f44a8,is_anomaly:_0x891fa,threshold:_0x2f6680,explanation:_0x1c5546}=_0x257945[_0x59d5bb(0x1a3)];_0x3d0ce1['setStateAsync']('analysis.security.lastScore',{'val':_0x5f44a8,'ack':!![]}),_0x3d0ce1[_0x59d5bb(0x19c)](_0x59d5bb(0x19e),{'val':new Date()[_0x59d5bb(0x180)](),'ack':!![]});if(_0x2f6680)_0x3d0ce1[_0x59d5bb(0x19c)]('analysis.security.currentThreshold',{'val':_0x2f6680,'ack':!![]});if(_0x891fa){let _0x5acc5b='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x5f44a8[_0x59d5bb(0x187)](0x4)+')';if(_0x1c5546&&_0x1c5546!==_0x59d5bb(0x19b))_0x5acc5b+=_0x59d5bb(0x175)+_0x1c5546;_0x3d0ce1[_0x59d5bb(0x19c)](_0x59d5bb(0x148),{'val':!![],'ack':!![]}),_0x3d0ce1[_0x59d5bb(0x19c)](_0x59d5bb(0x154),{'val':_0x5acc5b,'ack':!![]}),setup[_0x59d5bb(0x152)](_0x3d0ce1,_0x59d5bb(0x150)+_0x5acc5b,![],!![]);}}else{if(_0x257945[_0x59d5bb(0x149)]==='TRAINING_COMPLETE'){const _0x2eb6b1=_0x257945[_0x59d5bb(0x1a3)]['details']||'',_0x35f50f=_0x257945['payload'][_0x59d5bb(0x17b)],_0x247edd=_0x257945['payload'][_0x59d5bb(0x195)]?_0x59d5bb(0x184)+new Date()[_0x59d5bb(0x14e)]()+'\x20('+_0x2eb6b1+')':_0x59d5bb(0x153)+_0x257945[_0x59d5bb(0x1a3)][_0x59d5bb(0x13d)];_0x3d0ce1[_0x59d5bb(0x19c)]('analysis.training.status',{'val':_0x247edd,'ack':!![]});if(_0x257945['payload'][_0x59d5bb(0x195)]&&_0x35f50f)_0x3d0ce1[_0x59d5bb(0x19c)]('analysis.security.currentThreshold',{'val':_0x35f50f,'ack':!![]});}else{if(_0x257945[_0x59d5bb(0x149)]===_0x59d5bb(0x172)){if(_0x257945[_0x59d5bb(0x1a3)][_0x59d5bb(0x195)])try{const _0x3d505d=JSON[_0x59d5bb(0x140)](_0x257945[_0x59d5bb(0x1a3)]['details']);if(_0x3d505d[_0x59d5bb(0x165)])_0x3d0ce1['setStateAsync'](_0x59d5bb(0x15f),{'val':JSON['stringify'](_0x3d505d[_0x59d5bb(0x165)]),'ack':!![]});if(_0x3d505d[_0x59d5bb(0x18e)])_0x3d0ce1['setStateAsync'](_0x59d5bb(0x17c),{'val':JSON[_0x59d5bb(0x199)](_0x3d505d[_0x59d5bb(0x18e)]),'ack':!![]});}catch(_0x30a38f){}}else{if(_0x257945[_0x59d5bb(0x149)]===_0x59d5bb(0x158)){if(_0x257945[_0x59d5bb(0x1a3)][_0x59d5bb(0x195)]){_0x3d0ce1[_0x59d5bb(0x16e)][_0x59d5bb(0x17e)](_0x59d5bb(0x178));const _0x379154=new Date(),_0x59c9df=_0x379154['toLocaleDateString'](_0x59d5bb(0x17d),{'day':_0x59d5bb(0x188),'month':_0x59d5bb(0x18b),'hour':_0x59d5bb(0x188),'minute':'2-digit'});_0x3d0ce1[_0x59d5bb(0x19c)]('analysis.health.lastCheck',{'val':_0x59c9df,'ack':!![]});}}else{if(_0x257945[_0x59d5bb(0x149)]===_0x59d5bb(0x15d)){const _0x458ea2=new Date(),_0x525801=_0x458ea2['toLocaleDateString'](_0x59d5bb(0x17d),{'day':'2-digit','month':_0x59d5bb(0x18b),'hour':_0x59d5bb(0x188),'minute':_0x59d5bb(0x188)});_0x3d0ce1[_0x59d5bb(0x19c)]('analysis.health.lastCheck',{'val':_0x525801,'ack':!![]}),_0x3d0ce1['setStateAsync'](_0x59d5bb(0x159),{'val':_0x257945[_0x59d5bb(0x1a3)][_0x59d5bb(0x15c)],'ack':!![]});}else{if(_0x257945[_0x59d5bb(0x149)]==='HEALTH_TREND_RESULT'){const {trend_percent:_0xa0bddb,details:_0x423d57}=_0x257945[_0x59d5bb(0x1a3)],_0x54a312=new Date(),_0x4cd34c=_0x54a312[_0x59d5bb(0x18c)](_0x59d5bb(0x17d),{'day':'2-digit','month':_0x59d5bb(0x18b),'hour':_0x59d5bb(0x188),'minute':'2-digit'});_0x3d0ce1[_0x59d5bb(0x19c)]('analysis.health.lastCheck',{'val':_0x4cd34c,'ack':!![]}),_0x3d0ce1[_0x59d5bb(0x19c)]('analysis.health.activityTrend',{'val':_0xa0bddb,'ack':!![]}),_0x3d0ce1['log'][_0x59d5bb(0x17e)](_0x59d5bb(0x1a0)+_0x423d57);}else{if(_0x257945[_0x59d5bb(0x149)]===_0x59d5bb(0x194)){const {speed_trend:_0x581b78,sensors:_0x4a20d0,proof:_0x3cf1d5}=_0x257945[_0x59d5bb(0x1a3)];if(_0x581b78!==undefined)_0x3d0ce1[_0x59d5bb(0x19c)](_0x59d5bb(0x168),{'val':_0x581b78,'ack':!![]});if(_0x4a20d0&&Array[_0x59d5bb(0x17f)](_0x4a20d0))_0x3d0ce1[_0x59d5bb(0x19c)](_0x59d5bb(0x193),{'val':_0x4a20d0[_0x59d5bb(0x167)](',\x20'),'ack':!![]});if(_0x3cf1d5)_0x3d0ce1[_0x59d5bb(0x19c)](_0x59d5bb(0x171),{'val':_0x3cf1d5,'ack':!![]});}else{if(_0x257945[_0x59d5bb(0x149)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x1816d6}=_0x257945[_0x59d5bb(0x1a3)];if(_0x1816d6)_0x3d0ce1[_0x59d5bb(0x19c)]('analysis.energy.forecast',{'val':JSON[_0x59d5bb(0x199)](_0x1816d6),'ack':!![]});}else{if(_0x257945[_0x59d5bb(0x149)]===_0x59d5bb(0x16c)){const {times:_0x868149,sources:_0x35dfe8,details:_0x517846}=_0x257945['payload'];if(_0x868149)_0x3d0ce1[_0x59d5bb(0x19c)]('analysis.energy.warmupTimes',{'val':JSON[_0x59d5bb(0x199)](_0x868149),'ack':!![]});if(_0x35dfe8)_0x3d0ce1[_0x59d5bb(0x19c)](_0x59d5bb(0x146),{'val':JSON[_0x59d5bb(0x199)](_0x35dfe8),'ack':!![]});if(_0x517846)_0x3d0ce1[_0x59d5bb(0x19c)](_0x59d5bb(0x143),{'val':JSON[_0x59d5bb(0x199)](_0x517846),'ack':!![]});}else{if(_0x257945[_0x59d5bb(0x149)]===_0x59d5bb(0x1a1)){const {penalties:_0x381dd7}=_0x257945[_0x59d5bb(0x1a3)];if(_0x381dd7)_0x3d0ce1[_0x59d5bb(0x19c)]('analysis.energy.rlPenalties',{'val':JSON[_0x59d5bb(0x199)](_0x381dd7),'ack':!![]});}else{if(_0x257945['type']===_0x59d5bb(0x157)){const {forecast:_0x34d4ab}=_0x257945[_0x59d5bb(0x1a3)];if(_0x34d4ab)_0x3d0ce1[_0x59d5bb(0x19c)](_0x59d5bb(0x185),{'val':JSON[_0x59d5bb(0x199)](_0x34d4ab),'ack':!![]});}else{if(_0x257945[_0x59d5bb(0x149)]===_0x59d5bb(0x16f)){const {alerts:_0x9f0f9d}=_0x257945[_0x59d5bb(0x1a3)];if(_0x9f0f9d)_0x3d0ce1[_0x59d5bb(0x19c)]('analysis.energy.ventilationAlerts',{'val':JSON[_0x59d5bb(0x199)](_0x9f0f9d),'ack':!![]});}else{if(_0x257945[_0x59d5bb(0x149)]==='ENERGY_OPTIMIZE_RESULT'){const {proposals:_0x1cfdb2}=_0x257945[_0x59d5bb(0x1a3)];_0x3d0ce1[_0x59d5bb(0x18f)](_0x59d5bb(0x177),(_0x55246d,_0x52cb5f)=>{const _0x68cbf1=_0x59d5bb;_0x52cb5f&&_0x52cb5f[_0x68cbf1(0x182)]===!![]&&_0x1cfdb2&&_0x1cfdb2[_0x68cbf1(0x136)]>0x0&&automation['applyEnergySavings'](_0x3d0ce1,_0x1cfdb2);});}else{if(_0x257945[_0x59d5bb(0x149)]===_0x59d5bb(0x196)){const {room:_0x486503,propagation:_0x1126dc}=_0x257945[_0x59d5bb(0x1a3)];let _0x20a911='Unknown',_0x2a593b=0x0;if(_0x1126dc){const _0x2fb1aa=Object['entries'](_0x1126dc);_0x2fb1aa[_0x59d5bb(0x136)]>0x0&&(_0x20a911=_0x2fb1aa[0x0][0x0],_0x2a593b=_0x2fb1aa[0x0][0x1]);}_0x3d0ce1['setStateAsync'](_0x59d5bb(0x198),{'val':_0x20a911,'ack':!![]}),_0x3d0ce1['setStateAsync'](_0x59d5bb(0x197),{'val':_0x2a593b,'ack':!![]}),automation[_0x59d5bb(0x181)](_0x3d0ce1,_0x20a911,_0x2a593b);}else{if(_0x257945[_0x59d5bb(0x149)]==='TRACKER_RESULT'){const {probabilities:_0x36c28c}=_0x257945[_0x59d5bb(0x1a3)];if(_0x36c28c){_0x3d0ce1['setStateAsync']('analysis.prediction.trackerState',{'val':JSON[_0x59d5bb(0x199)](_0x36c28c),'ack':!![]});const _0x42b058=Object['keys'](_0x36c28c);if(_0x42b058[_0x59d5bb(0x136)]>0x0){const _0x487467=_0x42b058[0x0],_0x3f6a19=_0x36c28c[_0x487467];_0x3d0ce1['setStateAsync'](_0x59d5bb(0x173),{'val':_0x487467,'ack':!![]}),_0x3d0ce1['setStateAsync'](_0x59d5bb(0x142),{'val':_0x3f6a19,'ack':!![]});}}}else{if(_0x257945[_0x59d5bb(0x149)]===_0x59d5bb(0x190)){const {patterns:_0x582382}=_0x257945['payload'];if(_0x582382&&_0x582382[_0x59d5bb(0x136)]>0x0)_0x3d0ce1[_0x59d5bb(0x19c)](_0x59d5bb(0x147),{'val':JSON[_0x59d5bb(0x199)](_0x582382),'ack':!![]});}}}}}}}}}}}}}}}}}}function startService(_0xb6adc0,_0x27b80c){const _0x411631=a4_0x45bdaa;let _0x28dd6a=_0x411631(0x137);if(fs[_0x411631(0x192)](_0x27b80c))_0x28dd6a=_0x27b80c;const _0x4e61c0=path[_0x411631(0x167)](__dirname,'..','service.py'),_0x404be2=path[_0x411631(0x167)](__dirname,'..',_0x411631(0x16a),_0x411631(0x13c));let _0x3716b3='';if(fs[_0x411631(0x192)](_0x4e61c0))_0x3716b3=_0x4e61c0;else{if(fs[_0x411631(0x192)](_0x404be2))_0x3716b3=_0x404be2;else{_0xb6adc0[_0x411631(0x16e)][_0x411631(0x18a)]('âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20'+_0x4e61c0+_0x411631(0x17a)+_0x404be2+_0x411631(0x139));return;}}try{_0xb6adc0[_0x411631(0x16e)][_0x411631(0x17e)](_0x411631(0x161)+_0x28dd6a+'\x20'+_0x3716b3),pythonProcess=spawn(_0x28dd6a,[_0x3716b3]),pythonProcess[_0x411631(0x13e)]['on'](_0x411631(0x164),_0x2c5b91=>{const _0x57a21c=_0x411631,_0x4be797=_0x2c5b91[_0x57a21c(0x155)]()[_0x57a21c(0x19f)]('\x0a');_0x4be797[_0x57a21c(0x18d)](_0xf06760=>{const _0x4590a8=_0x57a21c,_0x50cdee=_0xf06760[_0x4590a8(0x1a4)]();if(!_0x50cdee)return;if(_0x50cdee['startsWith'](_0x4590a8(0x163)))_0xb6adc0[_0x4590a8(0x16e)][_0x4590a8(0x151)](_0x4590a8(0x170)+_0x50cdee['substring'](0x5)['trim']());else{if(_0x50cdee[_0x4590a8(0x156)]('[RESULT]'))try{const _0x20fb92=JSON[_0x4590a8(0x140)](_0x50cdee[_0x4590a8(0x14d)](0x8)[_0x4590a8(0x1a4)]());handleResult(_0xb6adc0,_0x20fb92);}catch(_0x5df845){}}});}),pythonProcess['stderr']['on'](_0x411631(0x164),_0x2cf0e8=>{const _0x54c4d0=_0x411631;_0xb6adc0[_0x54c4d0(0x16e)][_0x54c4d0(0x18a)](_0x54c4d0(0x138)+_0x2cf0e8['toString']()[_0x54c4d0(0x1a4)]());}),pythonProcess['on'](_0x411631(0x1a2),_0x4b1858=>{const _0x1b85da=_0x411631;_0xb6adc0[_0x1b85da(0x16e)]['warn']('Python\x20process\x20exited\x20with\x20code\x20'+_0x4b1858),pythonProcess=null;}),_0xb6adc0[_0x411631(0x186)]=(_0x58346a,_0xc75c6a)=>send(_0xb6adc0,_0x58346a,_0xc75c6a);}catch(_0x1b2b46){_0xb6adc0[_0x411631(0x16e)][_0x411631(0x18a)](_0x411631(0x14f)+_0x1b2b46['message']);}}function stopService(_0x596d35){const _0x186b2b=a4_0x45bdaa;if(pythonProcess){try{pythonProcess[_0x186b2b(0x160)]();}catch(_0x5be20b){}pythonProcess=null;}}module[a4_0x45bdaa(0x144)]={'startService':startService,'stopService':stopService,'send':send};