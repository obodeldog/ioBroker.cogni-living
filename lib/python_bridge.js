const a4_0x2c25e1=a4_0x31cf;(function(_0x39bc8d,_0x4832d6){const _0x3586f9=a4_0x31cf,_0x5483bc=_0x39bc8d();while(!![]){try{const _0x28339e=-parseInt(_0x3586f9(0x1dd))/0x1*(parseInt(_0x3586f9(0x1ed))/0x2)+-parseInt(_0x3586f9(0x226))/0x3*(-parseInt(_0x3586f9(0x1d4))/0x4)+parseInt(_0x3586f9(0x1d3))/0x5+-parseInt(_0x3586f9(0x20b))/0x6*(parseInt(_0x3586f9(0x209))/0x7)+parseInt(_0x3586f9(0x205))/0x8*(parseInt(_0x3586f9(0x227))/0x9)+parseInt(_0x3586f9(0x1dc))/0xa+-parseInt(_0x3586f9(0x206))/0xb;if(_0x28339e===_0x4832d6)break;else _0x5483bc['push'](_0x5483bc['shift']());}catch(_0x193c0c){_0x5483bc['push'](_0x5483bc['shift']());}}}(a4_0x2e65,0x9bda5));function a4_0x2e65(){const _0x4ffe85=['17625641eMqMjy','analysis.health.lastCheck','message','7jTMYNA','heating','3870624LIAczu','setStateAsync','length','VENTILATION_ALERT','analysis.prediction.nextRoom','âœ…\x20HEALTH\x20TRAINED.','\x0aGrund:\x20','constructor','success','search','payload','toISOString','stdin','ðŸ\x20Python\x20Pong','[RESULT]','data','analysis.health.gaitSpeed','./setup','parse','kill','write','join','TRACKER_RESULT','SECURITY_RESULT','analysis.training.status','existsSync','sendToPythonWrapper','2615835BvTtZo','9eGiypP','python3','Failed:\x20','insulation','./automation','sendNotification','forEach','analysis.automation.detectedPatterns','2604025UteiZc','4yeCGxw','details','type','threshold','python_service','writable','toString','GAIT_RESULT','8573180eDbwcM','26293YQupIY','Error\x20launching\x20Python:\x20','log','startsWith','[PYTHON]\x20','HEALTH_TRAIN_RESULT','analysis.energy.insulationScore','Unknown','analysis.energy.heatingScore','stdout','debug','Success:\x20','analysis.security.currentThreshold','analysis.energy.mpcActive','analysis.energy.warmupTimes','substring','2CuuBsQ','PINN_PREDICT_RESULT','analysis.prediction.trackerConfidence','trim','analysis.health.isAnomaly','(((.+)+)+)+$','reason','toFixed','âš ï¸\x20SECURITY\x20ALARM:\x20','TRAINING_COMPLETE','close','stringify','child_process','getState','keys','applyEnergySavings','analysis.security.lastScore','val','analysis.energy.ventilationAlerts','analysis.prediction.trackerTopRoom','split','analysis.alertReason','analysis.prediction.trackerState','WARMUP_RESULT','5296264DcmrXf'];a4_0x2e65=function(){return _0x4ffe85;};return a4_0x2e65();}const a4_0x57688f=(function(){let _0x4a4e24=!![];return function(_0x2024a4,_0x50cf30){const _0x423599=_0x4a4e24?function(){if(_0x50cf30){const _0x4a5c1f=_0x50cf30['apply'](_0x2024a4,arguments);return _0x50cf30=null,_0x4a5c1f;}}:function(){};return _0x4a4e24=![],_0x423599;};}()),a4_0x45c74b=a4_0x57688f(this,function(){const _0x19ccd8=a4_0x31cf;return a4_0x45c74b[_0x19ccd8(0x1da)]()[_0x19ccd8(0x214)](_0x19ccd8(0x1f2))[_0x19ccd8(0x1da)]()[_0x19ccd8(0x212)](a4_0x45c74b)['search'](_0x19ccd8(0x1f2));});function a4_0x31cf(_0x3053f3,_0xe6bb46){const _0x2a826b=a4_0x2e65();return a4_0x31cf=function(_0x45c74b,_0x57688f){_0x45c74b=_0x45c74b-0x1cf;let _0x2e6597=_0x2a826b[_0x45c74b];return _0x2e6597;},a4_0x31cf(_0x3053f3,_0xe6bb46);}a4_0x45c74b();'use strict';const {spawn}=require(a4_0x2c25e1(0x1f9)),path=require('path'),fs=require('fs'),setup=require(a4_0x2c25e1(0x21c)),automation=require(a4_0x2c25e1(0x1cf));let pythonProcess=null;function send(_0x3a1693,_0xd45fba,_0x2f2264={}){const _0x528457=a4_0x2c25e1;if(!pythonProcess||!pythonProcess[_0x528457(0x217)][_0x528457(0x1d9)])return;const _0x526f54=JSON[_0x528457(0x1f8)]({'command':_0xd45fba,..._0x2f2264});try{pythonProcess[_0x528457(0x217)][_0x528457(0x21f)](_0x526f54+'\x0a');}catch(_0x2b08e9){}}function handleResult(_0x4e65c3,_0x1246a1){const _0x2d5957=a4_0x2c25e1;if(_0x1246a1['type']==='PONG')_0x4e65c3['log'][_0x2d5957(0x1e7)](_0x2d5957(0x218));else{if(_0x1246a1['type']===_0x2d5957(0x222)){const {anomaly_score:_0xcef7f1,is_anomaly:_0x19dc87,threshold:_0x26741,explanation:_0x2bf53a}=_0x1246a1['payload'];_0x4e65c3[_0x2d5957(0x20c)](_0x2d5957(0x1fd),{'val':_0xcef7f1,'ack':!![]}),_0x4e65c3[_0x2d5957(0x20c)]('analysis.security.lastCheck',{'val':new Date()[_0x2d5957(0x216)](),'ack':!![]});if(_0x26741)_0x4e65c3[_0x2d5957(0x20c)](_0x2d5957(0x1e9),{'val':_0x26741,'ack':!![]});if(_0x19dc87){let _0x2d9236='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0xcef7f1[_0x2d5957(0x1f4)](0x4)+')';if(_0x2bf53a&&_0x2bf53a!=='Unknown')_0x2d9236+=_0x2d5957(0x211)+_0x2bf53a;_0x4e65c3[_0x2d5957(0x20c)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x4e65c3['setStateAsync'](_0x2d5957(0x202),{'val':_0x2d9236,'ack':!![]}),setup[_0x2d5957(0x1d0)](_0x4e65c3,_0x2d5957(0x1f5)+_0x2d9236,![],!![]);}}else{if(_0x1246a1[_0x2d5957(0x1d6)]===_0x2d5957(0x1f6)){const _0x1ee594=_0x1246a1[_0x2d5957(0x215)][_0x2d5957(0x1d5)]||'',_0x2e23c1=_0x1246a1[_0x2d5957(0x215)][_0x2d5957(0x1d7)],_0x46602b=_0x1246a1[_0x2d5957(0x215)][_0x2d5957(0x213)]?_0x2d5957(0x1e8)+new Date()['toLocaleTimeString']()+'\x20('+_0x1ee594+')':_0x2d5957(0x229)+_0x1246a1[_0x2d5957(0x215)][_0x2d5957(0x1f3)];_0x4e65c3['setStateAsync'](_0x2d5957(0x223),{'val':_0x46602b,'ack':!![]});if(_0x1246a1[_0x2d5957(0x215)]['success']&&_0x2e23c1)_0x4e65c3['setStateAsync'](_0x2d5957(0x1e9),{'val':_0x2e23c1,'ack':!![]});}else{if(_0x1246a1[_0x2d5957(0x1d6)]==='ENERGY_TRAIN_RESULT'){if(_0x1246a1['payload'][_0x2d5957(0x213)])try{const _0x20d199=JSON[_0x2d5957(0x21d)](_0x1246a1[_0x2d5957(0x215)][_0x2d5957(0x1d5)]);if(_0x20d199[_0x2d5957(0x22a)])_0x4e65c3[_0x2d5957(0x20c)](_0x2d5957(0x1e3),{'val':JSON[_0x2d5957(0x1f8)](_0x20d199[_0x2d5957(0x22a)]),'ack':!![]});if(_0x20d199[_0x2d5957(0x20a)])_0x4e65c3[_0x2d5957(0x20c)](_0x2d5957(0x1e5),{'val':JSON[_0x2d5957(0x1f8)](_0x20d199[_0x2d5957(0x20a)]),'ack':!![]});}catch(_0x54acae){}}else{if(_0x1246a1['type']===_0x2d5957(0x1e2)){if(_0x1246a1[_0x2d5957(0x215)][_0x2d5957(0x213)])_0x4e65c3['log']['info'](_0x2d5957(0x210));}else{if(_0x1246a1[_0x2d5957(0x1d6)]==='HEALTH_RESULT')_0x4e65c3[_0x2d5957(0x20c)](_0x2d5957(0x207),{'val':new Date()[_0x2d5957(0x216)](),'ack':!![]}),_0x4e65c3[_0x2d5957(0x20c)](_0x2d5957(0x1f1),{'val':_0x1246a1['payload']['is_anomaly'],'ack':!![]});else{if(_0x1246a1[_0x2d5957(0x1d6)]===_0x2d5957(0x1db)){const {speed_trend:_0x3d60d7}=_0x1246a1[_0x2d5957(0x215)];if(_0x3d60d7!==undefined)_0x4e65c3['setStateAsync'](_0x2d5957(0x21b),{'val':_0x3d60d7,'ack':!![]});}else{if(_0x1246a1[_0x2d5957(0x1d6)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x3a5fe7}=_0x1246a1['payload'];if(_0x3a5fe7)_0x4e65c3['setStateAsync']('analysis.energy.forecast',{'val':JSON[_0x2d5957(0x1f8)](_0x3a5fe7),'ack':!![]});}else{if(_0x1246a1['type']===_0x2d5957(0x204)){const {times:_0x4a0a17}=_0x1246a1[_0x2d5957(0x215)];if(_0x4a0a17)_0x4e65c3[_0x2d5957(0x20c)](_0x2d5957(0x1eb),{'val':JSON[_0x2d5957(0x1f8)](_0x4a0a17),'ack':!![]});}else{if(_0x1246a1['type']===_0x2d5957(0x1ee)){const {forecast:_0xec808}=_0x1246a1['payload'];if(_0xec808)_0x4e65c3[_0x2d5957(0x20c)]('analysis.energy.pinnForecast',{'val':JSON[_0x2d5957(0x1f8)](_0xec808),'ack':!![]});}else{if(_0x1246a1[_0x2d5957(0x1d6)]===_0x2d5957(0x20e)){const {alerts:_0x4b70b0}=_0x1246a1['payload'];if(_0x4b70b0)_0x4e65c3[_0x2d5957(0x20c)](_0x2d5957(0x1ff),{'val':JSON[_0x2d5957(0x1f8)](_0x4b70b0),'ack':!![]});}else{if(_0x1246a1['type']==='ENERGY_OPTIMIZE_RESULT'){const {proposals:_0x2fe904}=_0x1246a1[_0x2d5957(0x215)];_0x4e65c3[_0x2d5957(0x1fa)](_0x2d5957(0x1ea),(_0x4ce905,_0x58fa74)=>{const _0x4262d7=_0x2d5957;_0x58fa74&&_0x58fa74[_0x4262d7(0x1fe)]===!![]&&_0x2fe904&&_0x2fe904[_0x4262d7(0x20d)]>0x0&&automation[_0x4262d7(0x1fc)](_0x4e65c3,_0x2fe904);});}else{if(_0x1246a1[_0x2d5957(0x1d6)]==='SIGNAL_RESULT'){const {room:_0x3a4d1e,propagation:_0x472794}=_0x1246a1[_0x2d5957(0x215)];let _0x475cf9=_0x2d5957(0x1e4),_0xf38f33=0x0;if(_0x472794){const _0x4b7dde=Object['entries'](_0x472794);_0x4b7dde[_0x2d5957(0x20d)]>0x0&&(_0x475cf9=_0x4b7dde[0x0][0x0],_0xf38f33=_0x4b7dde[0x0][0x1]);}_0x4e65c3[_0x2d5957(0x20c)](_0x2d5957(0x20f),{'val':_0x475cf9,'ack':!![]}),_0x4e65c3['setStateAsync']('analysis.prediction.confidence',{'val':_0xf38f33,'ack':!![]}),automation['handlePrediction'](_0x4e65c3,_0x475cf9,_0xf38f33);}else{if(_0x1246a1[_0x2d5957(0x1d6)]===_0x2d5957(0x221)){const {probabilities:_0x3daadc}=_0x1246a1[_0x2d5957(0x215)];if(_0x3daadc){_0x4e65c3['setStateAsync'](_0x2d5957(0x203),{'val':JSON[_0x2d5957(0x1f8)](_0x3daadc),'ack':!![]});const _0xa1205=Object[_0x2d5957(0x1fb)](_0x3daadc);if(_0xa1205[_0x2d5957(0x20d)]>0x0){const _0x26a325=_0xa1205[0x0],_0xc86dfb=_0x3daadc[_0x26a325];_0x4e65c3[_0x2d5957(0x20c)](_0x2d5957(0x200),{'val':_0x26a325,'ack':!![]}),_0x4e65c3[_0x2d5957(0x20c)](_0x2d5957(0x1ef),{'val':_0xc86dfb,'ack':!![]});}}}else{if(_0x1246a1[_0x2d5957(0x1d6)]==='COMFORT_RESULT'){const {patterns:_0x55e9fb}=_0x1246a1[_0x2d5957(0x215)];if(_0x55e9fb&&_0x55e9fb[_0x2d5957(0x20d)]>0x0)_0x4e65c3[_0x2d5957(0x20c)](_0x2d5957(0x1d2),{'val':JSON['stringify'](_0x55e9fb),'ack':!![]});}}}}}}}}}}}}}}}}function startService(_0x6119c1,_0x572081){const _0x15953a=a4_0x2c25e1;let _0x69f335=_0x15953a(0x228);if(fs[_0x15953a(0x224)](_0x572081))_0x69f335=_0x572081;try{const _0x4526a9=path[_0x15953a(0x220)](__dirname,'..',_0x15953a(0x1d8),'service.py');pythonProcess=spawn(_0x69f335,[_0x4526a9]),pythonProcess[_0x15953a(0x1e6)]['on'](_0x15953a(0x21a),_0x54bbd2=>{const _0x3c87fb=_0x15953a,_0x15a90f=_0x54bbd2[_0x3c87fb(0x1da)]()[_0x3c87fb(0x201)]('\x0a');_0x15a90f[_0x3c87fb(0x1d1)](_0x2f4539=>{const _0x34e479=_0x3c87fb,_0x2276fc=_0x2f4539[_0x34e479(0x1f0)]();if(!_0x2276fc)return;if(_0x2276fc[_0x34e479(0x1e0)]('[LOG]'))_0x6119c1[_0x34e479(0x1df)][_0x34e479(0x1e7)](_0x34e479(0x1e1)+_0x2276fc[_0x34e479(0x1ec)](0x5)[_0x34e479(0x1f0)]());else{if(_0x2276fc[_0x34e479(0x1e0)](_0x34e479(0x219)))try{const _0x355a38=JSON['parse'](_0x2276fc[_0x34e479(0x1ec)](0x8)[_0x34e479(0x1f0)]());handleResult(_0x6119c1,_0x355a38);}catch(_0xc9f966){}}});}),pythonProcess['on'](_0x15953a(0x1f7),_0x2997f8=>{pythonProcess=null;}),_0x6119c1[_0x15953a(0x225)]=(_0xbd65e1,_0x349766)=>send(_0x6119c1,_0xbd65e1,_0x349766);}catch(_0x580f13){_0x6119c1[_0x15953a(0x1df)]['error'](_0x15953a(0x1de)+_0x580f13[_0x15953a(0x208)]);}}function stopService(_0x243520){const _0x3e9db9=a4_0x2c25e1;if(pythonProcess){try{pythonProcess[_0x3e9db9(0x21e)]();}catch(_0x19efdd){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};