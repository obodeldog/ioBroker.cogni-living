function a4_0x6b5b(){const _0x16aaf0=['analysis.health.lastCheck','getState','TRAINING_COMPLETE','info','heating','data','5468210JgadeS','sendToPythonWrapper','./setup','search','analysis.health.isAnomaly','error','analysis.automation.detectedPatterns','success','toString','message','âœ…\x20HEALTH\x20TRAINED.','apply','[LOG]','reason','stdout','analysis.health.gaitSpeed','HEALTH_RESULT','toISOString','analysis.prediction.nextRoom','GAIT_RESULT','kill','39075cnbzYI','6980208pTMVLT','ENERGY_TRAIN_RESULT','parse','trim','stringify','PONG','startsWith','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','analysis.security.currentThreshold','Unknown','SIGNAL_RESULT','applyEnergySavings','handlePrediction','18rWmJWR','service.py','3993060XTyvSA','debug','is_anomaly','join','toLocaleTimeString','python3','stdin','1035158nqGWSF','analysis.isAlert','Failed:\x20','analysis.energy.mpcActive','./automation','ENERGY_OPTIMIZE_RESULT','224TuuRfH','split','ENERGY_PREDICT_RESULT','analysis.energy.pinnForecast','close','ðŸ\x20Python\x20Pong','substring','insulation','1427532upAbrz','\x0aGrund:\x20','existsSync','analysis.energy.heatingScore','(((.+)+)+)+$','analysis.security.lastScore','setStateAsync','analysis.energy.insulationScore','analysis.security.lastCheck','entries','sendNotification','analysis.alertReason','log','analysis.prediction.confidence','7485135Lcwkfc','threshold','length','payload','type','[PYTHON]\x20','val','HEALTH_TRAIN_RESULT','details','path','writable'];a4_0x6b5b=function(){return _0x16aaf0;};return a4_0x6b5b();}function a4_0x90a0(_0x475fe0,_0x3b0462){const _0x570668=a4_0x6b5b();return a4_0x90a0=function(_0x2fad84,_0x466d6b){_0x2fad84=_0x2fad84-0x1a2;let _0x6b5bd9=_0x570668[_0x2fad84];return _0x6b5bd9;},a4_0x90a0(_0x475fe0,_0x3b0462);}const a4_0x6890b4=a4_0x90a0;(function(_0x56d390,_0xab2508){const _0x3e6f44=a4_0x90a0,_0x1848a2=_0x56d390();while(!![]){try{const _0x477883=-parseInt(_0x3e6f44(0x1f7))/0x1+parseInt(_0x3e6f44(0x1ac))/0x2+parseInt(_0x3e6f44(0x1e0))/0x3*(parseInt(_0x3e6f44(0x1a4))/0x4)+-parseInt(_0x3e6f44(0x1cb))/0x5+parseInt(_0x3e6f44(0x1f0))/0x6+-parseInt(_0x3e6f44(0x1ba))/0x7+-parseInt(_0x3e6f44(0x1e1))/0x8*(-parseInt(_0x3e6f44(0x1ee))/0x9);if(_0x477883===_0xab2508)break;else _0x1848a2['push'](_0x1848a2['shift']());}catch(_0x5a8f79){_0x1848a2['push'](_0x1848a2['shift']());}}}(a4_0x6b5b,0xa0107));const a4_0x466d6b=(function(){let _0x2cf7ec=!![];return function(_0x2f7660,_0x439f61){const _0x778bc2=_0x2cf7ec?function(){const _0x43387b=a4_0x90a0;if(_0x439f61){const _0x120ed5=_0x439f61[_0x43387b(0x1d6)](_0x2f7660,arguments);return _0x439f61=null,_0x120ed5;}}:function(){};return _0x2cf7ec=![],_0x778bc2;};}()),a4_0x2fad84=a4_0x466d6b(this,function(){const _0x24c001=a4_0x90a0;return a4_0x2fad84[_0x24c001(0x1d3)]()[_0x24c001(0x1ce)](_0x24c001(0x1b0))[_0x24c001(0x1d3)]()['constructor'](a4_0x2fad84)[_0x24c001(0x1ce)]('(((.+)+)+)+$');});a4_0x2fad84();'use strict';const {spawn}=require('child_process'),path=require(a4_0x6890b4(0x1c3)),fs=require('fs'),setup=require(a4_0x6890b4(0x1cd)),automation=require(a4_0x6890b4(0x1a2));let pythonProcess=null;function send(_0x10e259,_0x110f08,_0x435706={}){const _0xe6b631=a4_0x6890b4;if(!pythonProcess||!pythonProcess[_0xe6b631(0x1f6)][_0xe6b631(0x1c4)])return;const _0x4fdc6a=JSON[_0xe6b631(0x1e5)]({'command':_0x110f08,..._0x435706});try{pythonProcess[_0xe6b631(0x1f6)]['write'](_0x4fdc6a+'\x0a');}catch(_0x257d38){}}function handleResult(_0x2e11a6,_0x575aef){const _0x2de0b1=a4_0x6890b4;if(_0x575aef[_0x2de0b1(0x1be)]===_0x2de0b1(0x1e6))_0x2e11a6[_0x2de0b1(0x1b8)][_0x2de0b1(0x1f1)](_0x2de0b1(0x1a9));else{if(_0x575aef[_0x2de0b1(0x1be)]==='SECURITY_RESULT'){const {anomaly_score:_0x1da8d4,is_anomaly:_0x5e8a54,threshold:_0x3f2091,explanation:_0x5166b1}=_0x575aef[_0x2de0b1(0x1bd)];_0x2e11a6['setStateAsync'](_0x2de0b1(0x1b1),{'val':_0x1da8d4,'ack':!![]}),_0x2e11a6['setStateAsync'](_0x2de0b1(0x1b4),{'val':new Date()[_0x2de0b1(0x1dc)](),'ack':!![]});if(_0x3f2091)_0x2e11a6[_0x2de0b1(0x1b2)]('analysis.security.currentThreshold',{'val':_0x3f2091,'ack':!![]});if(_0x5e8a54){let _0x562965=_0x2de0b1(0x1e8)+_0x1da8d4['toFixed'](0x4)+')';if(_0x5166b1&&_0x5166b1!==_0x2de0b1(0x1ea))_0x562965+=_0x2de0b1(0x1ad)+_0x5166b1;_0x2e11a6[_0x2de0b1(0x1b2)](_0x2de0b1(0x1f8),{'val':!![],'ack':!![]}),_0x2e11a6[_0x2de0b1(0x1b2)](_0x2de0b1(0x1b7),{'val':_0x562965,'ack':!![]}),setup[_0x2de0b1(0x1b6)](_0x2e11a6,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x562965,![],!![]);}}else{if(_0x575aef[_0x2de0b1(0x1be)]===_0x2de0b1(0x1c7)){const _0x2e97cc=_0x575aef['payload']['details']||'',_0x1496b0=_0x575aef[_0x2de0b1(0x1bd)][_0x2de0b1(0x1bb)],_0x3df4e3=_0x575aef['payload'][_0x2de0b1(0x1d2)]?'Success:\x20'+new Date()[_0x2de0b1(0x1f4)]()+'\x20('+_0x2e97cc+')':_0x2de0b1(0x1f9)+_0x575aef[_0x2de0b1(0x1bd)][_0x2de0b1(0x1d8)];_0x2e11a6[_0x2de0b1(0x1b2)]('analysis.training.status',{'val':_0x3df4e3,'ack':!![]});if(_0x575aef[_0x2de0b1(0x1bd)][_0x2de0b1(0x1d2)]&&_0x1496b0)_0x2e11a6['setStateAsync'](_0x2de0b1(0x1e9),{'val':_0x1496b0,'ack':!![]});}else{if(_0x575aef[_0x2de0b1(0x1be)]===_0x2de0b1(0x1e2)){if(_0x575aef[_0x2de0b1(0x1bd)][_0x2de0b1(0x1d2)])try{const _0x52f413=JSON[_0x2de0b1(0x1e3)](_0x575aef[_0x2de0b1(0x1bd)][_0x2de0b1(0x1c2)]);if(_0x52f413['insulation'])_0x2e11a6[_0x2de0b1(0x1b2)](_0x2de0b1(0x1b3),{'val':JSON[_0x2de0b1(0x1e5)](_0x52f413[_0x2de0b1(0x1ab)]),'ack':!![]});if(_0x52f413[_0x2de0b1(0x1c9)])_0x2e11a6[_0x2de0b1(0x1b2)](_0x2de0b1(0x1af),{'val':JSON['stringify'](_0x52f413[_0x2de0b1(0x1c9)]),'ack':!![]});}catch(_0x491637){}}else{if(_0x575aef[_0x2de0b1(0x1be)]===_0x2de0b1(0x1c1)){if(_0x575aef['payload'][_0x2de0b1(0x1d2)])_0x2e11a6[_0x2de0b1(0x1b8)][_0x2de0b1(0x1c8)](_0x2de0b1(0x1d5));}else{if(_0x575aef[_0x2de0b1(0x1be)]===_0x2de0b1(0x1db))_0x2e11a6['setStateAsync'](_0x2de0b1(0x1c5),{'val':new Date()['toISOString'](),'ack':!![]}),_0x2e11a6['setStateAsync'](_0x2de0b1(0x1cf),{'val':_0x575aef['payload'][_0x2de0b1(0x1f2)],'ack':!![]});else{if(_0x575aef['type']===_0x2de0b1(0x1de)){const {speed_trend:_0x116560}=_0x575aef[_0x2de0b1(0x1bd)];if(_0x116560!==undefined)_0x2e11a6[_0x2de0b1(0x1b2)](_0x2de0b1(0x1da),{'val':_0x116560,'ack':!![]});}else{if(_0x575aef[_0x2de0b1(0x1be)]===_0x2de0b1(0x1a6)){const {forecast:_0x226a7d}=_0x575aef[_0x2de0b1(0x1bd)];if(_0x226a7d)_0x2e11a6[_0x2de0b1(0x1b2)]('analysis.energy.forecast',{'val':JSON[_0x2de0b1(0x1e5)](_0x226a7d),'ack':!![]});}else{if(_0x575aef['type']==='PINN_PREDICT_RESULT'){const {forecast:_0x2e249f}=_0x575aef[_0x2de0b1(0x1bd)];if(_0x2e249f)_0x2e11a6['setStateAsync'](_0x2de0b1(0x1a7),{'val':JSON[_0x2de0b1(0x1e5)](_0x2e249f),'ack':!![]});}else{if(_0x575aef['type']===_0x2de0b1(0x1a3)){const {proposals:_0x2e2e0c}=_0x575aef[_0x2de0b1(0x1bd)];_0x2e11a6[_0x2de0b1(0x1c6)](_0x2de0b1(0x1fa),(_0x4afc13,_0x3141ca)=>{const _0x10e594=_0x2de0b1;_0x3141ca&&_0x3141ca[_0x10e594(0x1c0)]===!![]&&_0x2e2e0c&&_0x2e2e0c[_0x10e594(0x1bc)]>0x0&&automation[_0x10e594(0x1ec)](_0x2e11a6,_0x2e2e0c);});}else{if(_0x575aef[_0x2de0b1(0x1be)]===_0x2de0b1(0x1eb)){const {room:_0x8e9087,propagation:_0x5b4f41}=_0x575aef[_0x2de0b1(0x1bd)];let _0xb6763b=_0x2de0b1(0x1ea),_0x5771a4=0x0;if(_0x5b4f41){const _0x43b8c8=Object[_0x2de0b1(0x1b5)](_0x5b4f41);_0x43b8c8[_0x2de0b1(0x1bc)]>0x0&&(_0xb6763b=_0x43b8c8[0x0][0x0],_0x5771a4=_0x43b8c8[0x0][0x1]);}_0x2e11a6[_0x2de0b1(0x1b2)](_0x2de0b1(0x1dd),{'val':_0xb6763b,'ack':!![]}),_0x2e11a6[_0x2de0b1(0x1b2)](_0x2de0b1(0x1b9),{'val':_0x5771a4,'ack':!![]}),automation[_0x2de0b1(0x1ed)](_0x2e11a6,_0xb6763b,_0x5771a4);}else{if(_0x575aef[_0x2de0b1(0x1be)]==='COMFORT_RESULT'){const {patterns:_0x34c022}=_0x575aef[_0x2de0b1(0x1bd)];if(_0x34c022&&_0x34c022[_0x2de0b1(0x1bc)]>0x0)_0x2e11a6['setStateAsync'](_0x2de0b1(0x1d1),{'val':JSON[_0x2de0b1(0x1e5)](_0x34c022),'ack':!![]});}}}}}}}}}}}}}function startService(_0x33e908,_0x2db22e){const _0x23c823=a4_0x6890b4;let _0x224769=_0x23c823(0x1f5);if(fs[_0x23c823(0x1ae)](_0x2db22e))_0x224769=_0x2db22e;try{const _0x6ff6a=path[_0x23c823(0x1f3)](__dirname,'..','python_service',_0x23c823(0x1ef));pythonProcess=spawn(_0x224769,[_0x6ff6a]),pythonProcess[_0x23c823(0x1d9)]['on'](_0x23c823(0x1ca),_0x41f8c1=>{const _0x425f26=_0x23c823,_0x4ebb14=_0x41f8c1[_0x425f26(0x1d3)]()[_0x425f26(0x1a5)]('\x0a');_0x4ebb14['forEach'](_0x52d602=>{const _0x1ca1d4=_0x425f26,_0x503e94=_0x52d602[_0x1ca1d4(0x1e4)]();if(!_0x503e94)return;if(_0x503e94[_0x1ca1d4(0x1e7)](_0x1ca1d4(0x1d7)))_0x33e908[_0x1ca1d4(0x1b8)][_0x1ca1d4(0x1f1)](_0x1ca1d4(0x1bf)+_0x503e94[_0x1ca1d4(0x1aa)](0x5)['trim']());else{if(_0x503e94[_0x1ca1d4(0x1e7)]('[RESULT]'))try{const _0x20cad9=JSON[_0x1ca1d4(0x1e3)](_0x503e94[_0x1ca1d4(0x1aa)](0x8)[_0x1ca1d4(0x1e4)]());handleResult(_0x33e908,_0x20cad9);}catch(_0x11714e){}}});}),pythonProcess['on'](_0x23c823(0x1a8),_0x23bfd8=>{pythonProcess=null;}),_0x33e908[_0x23c823(0x1cc)]=(_0x55f1d1,_0xf664db)=>send(_0x33e908,_0x55f1d1,_0xf664db);}catch(_0x1d6f3f){_0x33e908[_0x23c823(0x1b8)][_0x23c823(0x1d0)]('Error\x20launching\x20Python:\x20'+_0x1d6f3f[_0x23c823(0x1d4)]);}}function stopService(_0x1e8b37){const _0x53600a=a4_0x6890b4;if(pythonProcess){try{pythonProcess[_0x53600a(0x1df)]();}catch(_0x17de92){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};