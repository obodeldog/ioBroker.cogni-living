const a4_0x4740ea=a4_0x3a5b;(function(_0x362376,_0xb3a14d){const _0x5248fa=a4_0x3a5b,_0x4f3cd9=_0x362376();while(!![]){try{const _0x22a80f=parseInt(_0x5248fa(0xfc))/0x1*(-parseInt(_0x5248fa(0x135))/0x2)+-parseInt(_0x5248fa(0x118))/0x3*(parseInt(_0x5248fa(0xf8))/0x4)+parseInt(_0x5248fa(0x11a))/0x5+-parseInt(_0x5248fa(0xf7))/0x6*(-parseInt(_0x5248fa(0xf5))/0x7)+parseInt(_0x5248fa(0x150))/0x8*(parseInt(_0x5248fa(0x112))/0x9)+parseInt(_0x5248fa(0xfa))/0xa+-parseInt(_0x5248fa(0x132))/0xb*(parseInt(_0x5248fa(0x12b))/0xc);if(_0x22a80f===_0xb3a14d)break;else _0x4f3cd9['push'](_0x4f3cd9['shift']());}catch(_0xb9f74a){_0x4f3cd9['push'](_0x4f3cd9['shift']());}}}(a4_0x31a6,0x9b474));function a4_0x31a6(){const _0x50ebdd=['threshold','details','ðŸ\x20Python\x20Pong','1424YVvXri','error','\x0aGrund:\x20','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','stringify','toString','handlePrediction','analysis.energy.insulationScore','analysis.energy.mpcActive','./setup','analysis.prediction.trackerConfidence','trim','WARMUP_RESULT','Unknown','heating','python_service','GAIT_RESULT','existsSync','HEALTH_TRAIN_RESULT','7lSEZOJ','startsWith','5464776jqcgAF','36TCvfGn','Failed:\x20','3393990XPkAso','analysis.energy.rlPenalties','49kkEqEy','toFixed','is_anomaly','child_process','path','sendToPythonWrapper','SIGNAL_RESULT','kill','python3','analysis.health.gaitSpeed','analysis.automation.detectedPatterns','sendNotification','getState','analysis.security.lastScore','ðŸ“ˆ\x20Health\x20Trend:\x20','\x20AND\x20','.\x20Please\x20create\x20this\x20file!','de-DE','write','analysis.prediction.nextRoom','info','message','58554bIPqKi','analysis.energy.warmupDetails','âœ…\x20HEALTH\x20TRAINED.','toLocaleTimeString','HEALTH_RESULT','search','315498baiKrE','analysis.prediction.trackerState','899880eSAtZI','Success:\x20','data','./automation','TRAINING_COMPLETE','join','apply','warn','[RESULT]','success','split','analysis.health.lastCheck','parse','stderr','ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20','payload','debug','1176wSgufH','analysis.energy.warmupTimes','2-digit','length','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20','analysis.security.lastCheck','COMFORT_RESULT','86053FolbAH','applyEnergySavings','substring','9758HZVzfF','(((.+)+)+)+$','analysis.energy.heatingScore','analysis.security.currentThreshold','RL_PENALTY_UPDATE','type','toLocaleDateString','ENERGY_OPTIMIZE_RESULT','ENERGY_PREDICT_RESULT','analysis.energy.ventilationAlerts','short','Error\x20launching\x20Python:\x20','log','analysis.training.status','stdin','forEach','setStateAsync','service.py','PINN_PREDICT_RESULT','analysis.energy.forecast','ENERGY_TRAIN_RESULT','stdout','analysis.prediction.trackerTopRoom','insulation'];a4_0x31a6=function(){return _0x50ebdd;};return a4_0x31a6();}const a4_0x54e667=(function(){let _0x5e5550=!![];return function(_0x46ea2b,_0x28653b){const _0x10bcbe=_0x5e5550?function(){const _0xa6ee99=a4_0x3a5b;if(_0x28653b){const _0x37adec=_0x28653b[_0xa6ee99(0x120)](_0x46ea2b,arguments);return _0x28653b=null,_0x37adec;}}:function(){};return _0x5e5550=![],_0x10bcbe;};}()),a4_0x30df7e=a4_0x54e667(this,function(){const _0x23a0d1=a4_0x3a5b;return a4_0x30df7e[_0x23a0d1(0x155)]()['search'](_0x23a0d1(0x136))['toString']()['constructor'](a4_0x30df7e)[_0x23a0d1(0x117)](_0x23a0d1(0x136));});a4_0x30df7e();'use strict';const {spawn}=require(a4_0x4740ea(0xff)),path=require(a4_0x4740ea(0x100)),fs=require('fs'),setup=require(a4_0x4740ea(0xeb)),automation=require(a4_0x4740ea(0x11d));let pythonProcess=null;function send(_0x5180d5,_0x561943,_0xc3742a={}){const _0xa2a718=a4_0x4740ea;if(!pythonProcess||!pythonProcess[_0xa2a718(0x143)]['writable'])return;const _0x45de37=JSON['stringify']({'command':_0x561943,..._0xc3742a});try{pythonProcess[_0xa2a718(0x143)][_0xa2a718(0x10e)](_0x45de37+'\x0a');}catch(_0x59e324){}}function handleResult(_0x1bc928,_0x3709dd){const _0x110769=a4_0x4740ea;if(_0x3709dd[_0x110769(0x13a)]==='PONG')_0x1bc928[_0x110769(0x141)]['debug'](_0x110769(0x14f));else{if(_0x3709dd[_0x110769(0x13a)]==='SECURITY_RESULT'){const {anomaly_score:_0x1d84e9,is_anomaly:_0x4a883e,threshold:_0x5d0d5d,explanation:_0xe1d519}=_0x3709dd[_0x110769(0x129)];_0x1bc928['setStateAsync'](_0x110769(0x109),{'val':_0x1d84e9,'ack':!![]}),_0x1bc928['setStateAsync'](_0x110769(0x130),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x5d0d5d)_0x1bc928['setStateAsync']('analysis.security.currentThreshold',{'val':_0x5d0d5d,'ack':!![]});if(_0x4a883e){let _0x20f3f5=_0x110769(0x153)+_0x1d84e9[_0x110769(0xfd)](0x4)+')';if(_0xe1d519&&_0xe1d519!==_0x110769(0xef))_0x20f3f5+=_0x110769(0x152)+_0xe1d519;_0x1bc928['setStateAsync']('analysis.isAlert',{'val':!![],'ack':!![]}),_0x1bc928[_0x110769(0x145)]('analysis.alertReason',{'val':_0x20f3f5,'ack':!![]}),setup[_0x110769(0x107)](_0x1bc928,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x20f3f5,![],!![]);}}else{if(_0x3709dd['type']===_0x110769(0x11e)){const _0x5130bf=_0x3709dd[_0x110769(0x129)][_0x110769(0x14e)]||'',_0x1bc47c=_0x3709dd[_0x110769(0x129)][_0x110769(0x14d)],_0x3c3756=_0x3709dd[_0x110769(0x129)][_0x110769(0x123)]?_0x110769(0x11b)+new Date()[_0x110769(0x115)]()+'\x20('+_0x5130bf+')':_0x110769(0xf9)+_0x3709dd[_0x110769(0x129)]['reason'];_0x1bc928[_0x110769(0x145)](_0x110769(0x142),{'val':_0x3c3756,'ack':!![]});if(_0x3709dd['payload'][_0x110769(0x123)]&&_0x1bc47c)_0x1bc928[_0x110769(0x145)](_0x110769(0x138),{'val':_0x1bc47c,'ack':!![]});}else{if(_0x3709dd[_0x110769(0x13a)]===_0x110769(0x149)){if(_0x3709dd[_0x110769(0x129)][_0x110769(0x123)])try{const _0x3a02c7=JSON[_0x110769(0x126)](_0x3709dd[_0x110769(0x129)]['details']);if(_0x3a02c7[_0x110769(0x14c)])_0x1bc928[_0x110769(0x145)](_0x110769(0xe9),{'val':JSON[_0x110769(0x154)](_0x3a02c7[_0x110769(0x14c)]),'ack':!![]});if(_0x3a02c7[_0x110769(0xf0)])_0x1bc928[_0x110769(0x145)](_0x110769(0x137),{'val':JSON[_0x110769(0x154)](_0x3a02c7[_0x110769(0xf0)]),'ack':!![]});}catch(_0xed47f2){}}else{if(_0x3709dd[_0x110769(0x13a)]===_0x110769(0xf4)){if(_0x3709dd[_0x110769(0x129)][_0x110769(0x123)]){_0x1bc928[_0x110769(0x141)]['info'](_0x110769(0x114));const _0x384a44=new Date(),_0x2d5c2a=_0x384a44[_0x110769(0x13b)](_0x110769(0x10d),{'day':_0x110769(0x12d),'month':_0x110769(0x13f),'hour':_0x110769(0x12d),'minute':'2-digit'});_0x1bc928[_0x110769(0x145)](_0x110769(0x125),{'val':_0x2d5c2a,'ack':!![]});}}else{if(_0x3709dd['type']===_0x110769(0x116)){const _0x1ccfc1=new Date(),_0x2a6db8=_0x1ccfc1[_0x110769(0x13b)](_0x110769(0x10d),{'day':_0x110769(0x12d),'month':'short','hour':'2-digit','minute':_0x110769(0x12d)});_0x1bc928[_0x110769(0x145)](_0x110769(0x125),{'val':_0x2a6db8,'ack':!![]}),_0x1bc928[_0x110769(0x145)]('analysis.health.isAnomaly',{'val':_0x3709dd['payload'][_0x110769(0xfe)],'ack':!![]});}else{if(_0x3709dd[_0x110769(0x13a)]==='HEALTH_TREND_RESULT'){const {trend_percent:_0x331013,details:_0x1d5704}=_0x3709dd[_0x110769(0x129)],_0x5951f6=new Date(),_0x6fd477=_0x5951f6['toLocaleDateString']('de-DE',{'day':'2-digit','month':'short','hour':_0x110769(0x12d),'minute':_0x110769(0x12d)});_0x1bc928[_0x110769(0x145)]('analysis.health.lastCheck',{'val':_0x6fd477,'ack':!![]}),_0x1bc928['setStateAsync'](_0x110769(0x105),{'val':_0x331013,'ack':!![]}),_0x1bc928['log'][_0x110769(0x110)](_0x110769(0x10a)+_0x1d5704);}else{if(_0x3709dd['type']===_0x110769(0xf2)){const {speed_trend:_0x3c2242}=_0x3709dd[_0x110769(0x129)];if(_0x3c2242!==undefined)_0x1bc928['setStateAsync']('analysis.health.gaitSpeed',{'val':_0x3c2242,'ack':!![]});}else{if(_0x3709dd[_0x110769(0x13a)]===_0x110769(0x13d)){const {forecast:_0x26cba0}=_0x3709dd[_0x110769(0x129)];if(_0x26cba0)_0x1bc928[_0x110769(0x145)](_0x110769(0x148),{'val':JSON[_0x110769(0x154)](_0x26cba0),'ack':!![]});}else{if(_0x3709dd[_0x110769(0x13a)]===_0x110769(0xee)){const {times:_0x51e76b,sources:_0x58eccc,details:_0x5cb8ac}=_0x3709dd[_0x110769(0x129)];if(_0x51e76b)_0x1bc928[_0x110769(0x145)](_0x110769(0x12c),{'val':JSON[_0x110769(0x154)](_0x51e76b),'ack':!![]});if(_0x58eccc)_0x1bc928[_0x110769(0x145)]('analysis.energy.warmupSources',{'val':JSON[_0x110769(0x154)](_0x58eccc),'ack':!![]});if(_0x5cb8ac)_0x1bc928[_0x110769(0x145)](_0x110769(0x113),{'val':JSON[_0x110769(0x154)](_0x5cb8ac),'ack':!![]});}else{if(_0x3709dd[_0x110769(0x13a)]===_0x110769(0x139)){const {penalties:_0x493eed}=_0x3709dd[_0x110769(0x129)];if(_0x493eed)_0x1bc928['setStateAsync'](_0x110769(0xfb),{'val':JSON['stringify'](_0x493eed),'ack':!![]});}else{if(_0x3709dd[_0x110769(0x13a)]===_0x110769(0x147)){const {forecast:_0x532626}=_0x3709dd[_0x110769(0x129)];if(_0x532626)_0x1bc928[_0x110769(0x145)]('analysis.energy.pinnForecast',{'val':JSON[_0x110769(0x154)](_0x532626),'ack':!![]});}else{if(_0x3709dd[_0x110769(0x13a)]==='VENTILATION_ALERT'){const {alerts:_0x1c0919}=_0x3709dd[_0x110769(0x129)];if(_0x1c0919)_0x1bc928[_0x110769(0x145)](_0x110769(0x13e),{'val':JSON[_0x110769(0x154)](_0x1c0919),'ack':!![]});}else{if(_0x3709dd[_0x110769(0x13a)]===_0x110769(0x13c)){const {proposals:_0x4b02f8}=_0x3709dd[_0x110769(0x129)];_0x1bc928[_0x110769(0x108)](_0x110769(0xea),(_0x450899,_0x43948d)=>{const _0x22055d=_0x110769;_0x43948d&&_0x43948d['val']===!![]&&_0x4b02f8&&_0x4b02f8[_0x22055d(0x12e)]>0x0&&automation[_0x22055d(0x133)](_0x1bc928,_0x4b02f8);});}else{if(_0x3709dd['type']===_0x110769(0x102)){const {room:_0x5129c0,propagation:_0x38fe53}=_0x3709dd[_0x110769(0x129)];let _0x5ec1ff=_0x110769(0xef),_0x2bc7df=0x0;if(_0x38fe53){const _0x1f9f4a=Object['entries'](_0x38fe53);_0x1f9f4a[_0x110769(0x12e)]>0x0&&(_0x5ec1ff=_0x1f9f4a[0x0][0x0],_0x2bc7df=_0x1f9f4a[0x0][0x1]);}_0x1bc928[_0x110769(0x145)](_0x110769(0x10f),{'val':_0x5ec1ff,'ack':!![]}),_0x1bc928[_0x110769(0x145)]('analysis.prediction.confidence',{'val':_0x2bc7df,'ack':!![]}),automation[_0x110769(0x156)](_0x1bc928,_0x5ec1ff,_0x2bc7df);}else{if(_0x3709dd[_0x110769(0x13a)]==='TRACKER_RESULT'){const {probabilities:_0x2ecaa1}=_0x3709dd['payload'];if(_0x2ecaa1){_0x1bc928['setStateAsync'](_0x110769(0x119),{'val':JSON[_0x110769(0x154)](_0x2ecaa1),'ack':!![]});const _0x804cb7=Object['keys'](_0x2ecaa1);if(_0x804cb7[_0x110769(0x12e)]>0x0){const _0x2c2851=_0x804cb7[0x0],_0xfb7217=_0x2ecaa1[_0x2c2851];_0x1bc928[_0x110769(0x145)](_0x110769(0x14b),{'val':_0x2c2851,'ack':!![]}),_0x1bc928[_0x110769(0x145)](_0x110769(0xec),{'val':_0xfb7217,'ack':!![]});}}}else{if(_0x3709dd[_0x110769(0x13a)]===_0x110769(0x131)){const {patterns:_0x5d8d90}=_0x3709dd['payload'];if(_0x5d8d90&&_0x5d8d90[_0x110769(0x12e)]>0x0)_0x1bc928[_0x110769(0x145)](_0x110769(0x106),{'val':JSON[_0x110769(0x154)](_0x5d8d90),'ack':!![]});}}}}}}}}}}}}}}}}}}function a4_0x3a5b(_0xc64ac1,_0x3b76e9){const _0x30360a=a4_0x31a6();return a4_0x3a5b=function(_0x30df7e,_0x54e667){_0x30df7e=_0x30df7e-0xe9;let _0x31a69e=_0x30360a[_0x30df7e];return _0x31a69e;},a4_0x3a5b(_0xc64ac1,_0x3b76e9);}function startService(_0x4ed258,_0x5bffb4){const _0x240423=a4_0x4740ea;let _0x4874ab=_0x240423(0x104);if(fs[_0x240423(0xf3)](_0x5bffb4))_0x4874ab=_0x5bffb4;const _0x1692cd=path[_0x240423(0x11f)](__dirname,'..',_0x240423(0x146)),_0x9b6689=path['join'](__dirname,'..',_0x240423(0xf1),_0x240423(0x146));let _0x529e77='';if(fs[_0x240423(0xf3)](_0x1692cd))_0x529e77=_0x1692cd;else{if(fs[_0x240423(0xf3)](_0x9b6689))_0x529e77=_0x9b6689;else{_0x4ed258[_0x240423(0x141)][_0x240423(0x151)](_0x240423(0x12f)+_0x1692cd+_0x240423(0x10b)+_0x9b6689+_0x240423(0x10c));return;}}try{_0x4ed258[_0x240423(0x141)][_0x240423(0x110)](_0x240423(0x128)+_0x4874ab+'\x20'+_0x529e77),pythonProcess=spawn(_0x4874ab,[_0x529e77]),pythonProcess[_0x240423(0x14a)]['on'](_0x240423(0x11c),_0x4afbfc=>{const _0xd4b66c=_0x240423,_0x2597f5=_0x4afbfc[_0xd4b66c(0x155)]()[_0xd4b66c(0x124)]('\x0a');_0x2597f5[_0xd4b66c(0x144)](_0x596c29=>{const _0x3804df=_0xd4b66c,_0x328ee2=_0x596c29[_0x3804df(0xed)]();if(!_0x328ee2)return;if(_0x328ee2['startsWith']('[LOG]'))_0x4ed258['log'][_0x3804df(0x12a)]('[PYTHON]\x20'+_0x328ee2[_0x3804df(0x134)](0x5)['trim']());else{if(_0x328ee2[_0x3804df(0xf6)](_0x3804df(0x122)))try{const _0x66e322=JSON['parse'](_0x328ee2['substring'](0x8)['trim']());handleResult(_0x4ed258,_0x66e322);}catch(_0x182105){}}});}),pythonProcess[_0x240423(0x127)]['on'](_0x240423(0x11c),_0x451209=>{const _0x3006ed=_0x240423;_0x4ed258[_0x3006ed(0x141)]['error']('[PYTHON\x20ERR]\x20'+_0x451209[_0x3006ed(0x155)]()['trim']());}),pythonProcess['on']('close',_0x78f32e=>{const _0x30fcf5=_0x240423;_0x4ed258[_0x30fcf5(0x141)][_0x30fcf5(0x121)]('Python\x20process\x20exited\x20with\x20code\x20'+_0x78f32e),pythonProcess=null;}),_0x4ed258[_0x240423(0x101)]=(_0x4166ac,_0x1a8bf3)=>send(_0x4ed258,_0x4166ac,_0x1a8bf3);}catch(_0x3f99a8){_0x4ed258[_0x240423(0x141)]['error'](_0x240423(0x140)+_0x3f99a8[_0x240423(0x111)]);}}function stopService(_0x10a6e6){const _0x5c97cb=a4_0x4740ea;if(pythonProcess){try{pythonProcess[_0x5c97cb(0x103)]();}catch(_0x2ba754){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};