const a4_0x5b5107=a4_0x26e1;(function(_0x4e6efc,_0x2cb79e){const _0x432950=a4_0x26e1,_0x2a2733=_0x4e6efc();while(!![]){try{const _0x17b196=-parseInt(_0x432950(0x153))/0x1*(-parseInt(_0x432950(0x12f))/0x2)+parseInt(_0x432950(0x14d))/0x3+parseInt(_0x432950(0x186))/0x4+-parseInt(_0x432950(0x12d))/0x5+parseInt(_0x432950(0x178))/0x6*(-parseInt(_0x432950(0x142))/0x7)+-parseInt(_0x432950(0x179))/0x8*(parseInt(_0x432950(0x15a))/0x9)+-parseInt(_0x432950(0x12c))/0xa*(parseInt(_0x432950(0x132))/0xb);if(_0x17b196===_0x2cb79e)break;else _0x2a2733['push'](_0x2a2733['shift']());}catch(_0x397974){_0x2a2733['push'](_0x2a2733['shift']());}}}(a4_0x3669,0x93dad));const a4_0x4f6d23=(function(){let _0x56a786=!![];return function(_0x26249c,_0x2f2f48){const _0x23c475=_0x56a786?function(){const _0x408a99=a4_0x26e1;if(_0x2f2f48){const _0x446471=_0x2f2f48[_0x408a99(0x13b)](_0x26249c,arguments);return _0x2f2f48=null,_0x446471;}}:function(){};return _0x56a786=![],_0x23c475;};}()),a4_0x37e260=a4_0x4f6d23(this,function(){const _0x4bc425=a4_0x26e1;return a4_0x37e260[_0x4bc425(0x14c)]()['search'](_0x4bc425(0x14e))['toString']()['constructor'](a4_0x37e260)['search'](_0x4bc425(0x14e));});a4_0x37e260();'use strict';const {spawn}=require('child_process'),path=require(a4_0x5b5107(0x180)),fs=require('fs'),setup=require(a4_0x5b5107(0x14b)),automation=require(a4_0x5b5107(0x158));let pythonProcess=null;function a4_0x26e1(_0x396f6f,_0x1b6336){const _0x29c581=a4_0x3669();return a4_0x26e1=function(_0x37e260,_0x4f6d23){_0x37e260=_0x37e260-0x124;let _0x366951=_0x29c581[_0x37e260];return _0x366951;},a4_0x26e1(_0x396f6f,_0x1b6336);}function a4_0x3669(){const _0x2f11fd=['success','writable','\x20AND\x20','[RESULT]','error','analysis.energy.warmupDetails','path','log','HEALTH_RESULT','SECURITY_RESULT','analysis.health.isAnomaly','[LOG]','4778264ojMXcJ','threshold','isArray','stdin','WARMUP_RESULT','stringify','analysis.energy.warmupSources','info','type','payload','.\x20Please\x20create\x20this\x20file!','analysis.health.lastCheck','analysis.health.gaitDebug','analysis.security.lastCheck','analysis.security.lastScore','Success:\x20','HEALTH_TRAIN_RESULT','PONG','12950MniWXN','2370460pMYIDZ','entries','134qFqiiE','SIGNAL_RESULT','stderr','1265vblqHV','service.py','applyEnergySavings','analysis.energy.forecast','âœ…\x20HEALTH\x20TRAINED.','analysis.energy.mpcActive','analysis.energy.heatingScore','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','write','apply','RL_PENALTY_UPDATE','analysis.energy.warmupTimes','python3','startsWith','warn','analysis.energy.ventilationAlerts','77pieOXT','toFixed','sendNotification','analysis.energy.insulationScore','Python\x20process\x20exited\x20with\x20code\x20','exports','trim','existsSync','close','./setup','toString','2411436SuALjn','(((.+)+)+)+$','forEach','heating','toLocaleDateString','analysis.prediction.trackerConfidence','1206NUxqBg','parse','Error\x20launching\x20Python:\x20','substring','Unknown','./automation','GAIT_RESULT','625167wVlRoc','debug','data','val','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20','python_service','analysis.health.activityTrend','ENERGY_TRAIN_RESULT','length','VENTILATION_ALERT','\x0aGrund:\x20','ENERGY_PREDICT_RESULT','analysis.automation.detectedPatterns','short','analysis.prediction.trackerTopRoom','stdout','setStateAsync','analysis.energy.pinnForecast','reason','TRAINING_COMPLETE','keys','TRACKER_RESULT','de-DE','[PYTHON\x20ERR]\x20','details','join','2-digit','toLocaleTimeString','analysis.isAlert','ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20','198714EfvoHn','56zCXizI'];a4_0x3669=function(){return _0x2f11fd;};return a4_0x3669();}function send(_0x2a2604,_0x5ca6bd,_0x37a460={}){const _0x12630f=a4_0x5b5107;if(!pythonProcess||!pythonProcess[_0x12630f(0x189)][_0x12630f(0x17b)])return;const _0x58484a=JSON[_0x12630f(0x18b)]({'command':_0x5ca6bd,..._0x37a460});try{pythonProcess[_0x12630f(0x189)][_0x12630f(0x13a)](_0x58484a+'\x0a');}catch(_0x531324){}}function handleResult(_0x3513a2,_0x346a9a){const _0x237e4d=a4_0x5b5107;if(_0x346a9a['type']===_0x237e4d(0x12b))_0x3513a2[_0x237e4d(0x181)][_0x237e4d(0x15b)]('ðŸ\x20Python\x20Pong');else{if(_0x346a9a[_0x237e4d(0x18e)]===_0x237e4d(0x183)){const {anomaly_score:_0x4633ad,is_anomaly:_0x4e4c4b,threshold:_0x3f509b,explanation:_0x205361}=_0x346a9a['payload'];_0x3513a2[_0x237e4d(0x16a)](_0x237e4d(0x128),{'val':_0x4633ad,'ack':!![]}),_0x3513a2[_0x237e4d(0x16a)](_0x237e4d(0x127),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x3f509b)_0x3513a2['setStateAsync']('analysis.security.currentThreshold',{'val':_0x3f509b,'ack':!![]});if(_0x4e4c4b){let _0xebb7f2=_0x237e4d(0x139)+_0x4633ad[_0x237e4d(0x143)](0x4)+')';if(_0x205361&&_0x205361!=='Unknown')_0xebb7f2+=_0x237e4d(0x164)+_0x205361;_0x3513a2[_0x237e4d(0x16a)](_0x237e4d(0x176),{'val':!![],'ack':!![]}),_0x3513a2[_0x237e4d(0x16a)]('analysis.alertReason',{'val':_0xebb7f2,'ack':!![]}),setup[_0x237e4d(0x144)](_0x3513a2,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0xebb7f2,![],!![]);}}else{if(_0x346a9a[_0x237e4d(0x18e)]===_0x237e4d(0x16d)){const _0x29e680=_0x346a9a[_0x237e4d(0x18f)][_0x237e4d(0x172)]||'',_0x1e9543=_0x346a9a['payload'][_0x237e4d(0x187)],_0x3600d0=_0x346a9a[_0x237e4d(0x18f)][_0x237e4d(0x17a)]?_0x237e4d(0x129)+new Date()[_0x237e4d(0x175)]()+'\x20('+_0x29e680+')':'Failed:\x20'+_0x346a9a[_0x237e4d(0x18f)][_0x237e4d(0x16c)];_0x3513a2[_0x237e4d(0x16a)]('analysis.training.status',{'val':_0x3600d0,'ack':!![]});if(_0x346a9a[_0x237e4d(0x18f)]['success']&&_0x1e9543)_0x3513a2['setStateAsync']('analysis.security.currentThreshold',{'val':_0x1e9543,'ack':!![]});}else{if(_0x346a9a[_0x237e4d(0x18e)]===_0x237e4d(0x161)){if(_0x346a9a[_0x237e4d(0x18f)][_0x237e4d(0x17a)])try{const _0x25f623=JSON[_0x237e4d(0x154)](_0x346a9a[_0x237e4d(0x18f)]['details']);if(_0x25f623['insulation'])_0x3513a2[_0x237e4d(0x16a)](_0x237e4d(0x145),{'val':JSON[_0x237e4d(0x18b)](_0x25f623['insulation']),'ack':!![]});if(_0x25f623[_0x237e4d(0x150)])_0x3513a2[_0x237e4d(0x16a)](_0x237e4d(0x138),{'val':JSON[_0x237e4d(0x18b)](_0x25f623['heating']),'ack':!![]});}catch(_0x1c470a){}}else{if(_0x346a9a[_0x237e4d(0x18e)]===_0x237e4d(0x12a)){if(_0x346a9a[_0x237e4d(0x18f)][_0x237e4d(0x17a)]){_0x3513a2['log']['info'](_0x237e4d(0x136));const _0x40de27=new Date(),_0x41a830=_0x40de27[_0x237e4d(0x151)]('de-DE',{'day':_0x237e4d(0x174),'month':_0x237e4d(0x167),'hour':_0x237e4d(0x174),'minute':'2-digit'});_0x3513a2[_0x237e4d(0x16a)]('analysis.health.lastCheck',{'val':_0x41a830,'ack':!![]});}}else{if(_0x346a9a[_0x237e4d(0x18e)]===_0x237e4d(0x182)){const _0xc1f03f=new Date(),_0x37d101=_0xc1f03f[_0x237e4d(0x151)](_0x237e4d(0x170),{'day':_0x237e4d(0x174),'month':'short','hour':_0x237e4d(0x174),'minute':_0x237e4d(0x174)});_0x3513a2['setStateAsync'](_0x237e4d(0x125),{'val':_0x37d101,'ack':!![]}),_0x3513a2[_0x237e4d(0x16a)](_0x237e4d(0x184),{'val':_0x346a9a[_0x237e4d(0x18f)]['is_anomaly'],'ack':!![]});}else{if(_0x346a9a[_0x237e4d(0x18e)]==='HEALTH_TREND_RESULT'){const {trend_percent:_0x5a5649,details:_0x345309}=_0x346a9a[_0x237e4d(0x18f)],_0x47077c=new Date(),_0x12e97e=_0x47077c[_0x237e4d(0x151)](_0x237e4d(0x170),{'day':'2-digit','month':_0x237e4d(0x167),'hour':_0x237e4d(0x174),'minute':'2-digit'});_0x3513a2[_0x237e4d(0x16a)]('analysis.health.lastCheck',{'val':_0x12e97e,'ack':!![]}),_0x3513a2[_0x237e4d(0x16a)](_0x237e4d(0x160),{'val':_0x5a5649,'ack':!![]}),_0x3513a2[_0x237e4d(0x181)][_0x237e4d(0x18d)]('ðŸ“ˆ\x20Health\x20Trend:\x20'+_0x345309);}else{if(_0x346a9a[_0x237e4d(0x18e)]===_0x237e4d(0x159)){const {speed_trend:_0x158698,sensors:_0x192c0b,proof:_0x388efc}=_0x346a9a[_0x237e4d(0x18f)];if(_0x158698!==undefined)_0x3513a2[_0x237e4d(0x16a)]('analysis.health.gaitSpeed',{'val':_0x158698,'ack':!![]});if(_0x192c0b&&Array[_0x237e4d(0x188)](_0x192c0b))_0x3513a2[_0x237e4d(0x16a)]('analysis.health.gaitSensors',{'val':_0x192c0b['join'](',\x20'),'ack':!![]});if(_0x388efc)_0x3513a2[_0x237e4d(0x16a)](_0x237e4d(0x126),{'val':_0x388efc,'ack':!![]});}else{if(_0x346a9a[_0x237e4d(0x18e)]===_0x237e4d(0x165)){const {forecast:_0x12a8a2}=_0x346a9a[_0x237e4d(0x18f)];if(_0x12a8a2)_0x3513a2[_0x237e4d(0x16a)](_0x237e4d(0x135),{'val':JSON[_0x237e4d(0x18b)](_0x12a8a2),'ack':!![]});}else{if(_0x346a9a[_0x237e4d(0x18e)]===_0x237e4d(0x18a)){const {times:_0x318db6,sources:_0x27fb05,details:_0x18e294}=_0x346a9a[_0x237e4d(0x18f)];if(_0x318db6)_0x3513a2[_0x237e4d(0x16a)](_0x237e4d(0x13d),{'val':JSON[_0x237e4d(0x18b)](_0x318db6),'ack':!![]});if(_0x27fb05)_0x3513a2['setStateAsync'](_0x237e4d(0x18c),{'val':JSON['stringify'](_0x27fb05),'ack':!![]});if(_0x18e294)_0x3513a2['setStateAsync'](_0x237e4d(0x17f),{'val':JSON[_0x237e4d(0x18b)](_0x18e294),'ack':!![]});}else{if(_0x346a9a['type']===_0x237e4d(0x13c)){const {penalties:_0x468cfd}=_0x346a9a[_0x237e4d(0x18f)];if(_0x468cfd)_0x3513a2[_0x237e4d(0x16a)]('analysis.energy.rlPenalties',{'val':JSON[_0x237e4d(0x18b)](_0x468cfd),'ack':!![]});}else{if(_0x346a9a['type']==='PINN_PREDICT_RESULT'){const {forecast:_0x5c1d27}=_0x346a9a[_0x237e4d(0x18f)];if(_0x5c1d27)_0x3513a2['setStateAsync'](_0x237e4d(0x16b),{'val':JSON[_0x237e4d(0x18b)](_0x5c1d27),'ack':!![]});}else{if(_0x346a9a[_0x237e4d(0x18e)]===_0x237e4d(0x163)){const {alerts:_0x5b76ce}=_0x346a9a['payload'];if(_0x5b76ce)_0x3513a2[_0x237e4d(0x16a)](_0x237e4d(0x141),{'val':JSON[_0x237e4d(0x18b)](_0x5b76ce),'ack':!![]});}else{if(_0x346a9a[_0x237e4d(0x18e)]==='ENERGY_OPTIMIZE_RESULT'){const {proposals:_0x557c60}=_0x346a9a[_0x237e4d(0x18f)];_0x3513a2['getState'](_0x237e4d(0x137),(_0x203910,_0x2c07ce)=>{const _0x5acfe0=_0x237e4d;_0x2c07ce&&_0x2c07ce[_0x5acfe0(0x15d)]===!![]&&_0x557c60&&_0x557c60[_0x5acfe0(0x162)]>0x0&&automation[_0x5acfe0(0x134)](_0x3513a2,_0x557c60);});}else{if(_0x346a9a[_0x237e4d(0x18e)]===_0x237e4d(0x130)){const {room:_0x145662,propagation:_0x56d1aa}=_0x346a9a[_0x237e4d(0x18f)];let _0x4f7c4a=_0x237e4d(0x157),_0x59e6bf=0x0;if(_0x56d1aa){const _0x2e029=Object[_0x237e4d(0x12e)](_0x56d1aa);_0x2e029[_0x237e4d(0x162)]>0x0&&(_0x4f7c4a=_0x2e029[0x0][0x0],_0x59e6bf=_0x2e029[0x0][0x1]);}_0x3513a2['setStateAsync']('analysis.prediction.nextRoom',{'val':_0x4f7c4a,'ack':!![]}),_0x3513a2[_0x237e4d(0x16a)]('analysis.prediction.confidence',{'val':_0x59e6bf,'ack':!![]}),automation['handlePrediction'](_0x3513a2,_0x4f7c4a,_0x59e6bf);}else{if(_0x346a9a[_0x237e4d(0x18e)]===_0x237e4d(0x16f)){const {probabilities:_0x4c5a46}=_0x346a9a[_0x237e4d(0x18f)];if(_0x4c5a46){_0x3513a2[_0x237e4d(0x16a)]('analysis.prediction.trackerState',{'val':JSON[_0x237e4d(0x18b)](_0x4c5a46),'ack':!![]});const _0x31888d=Object[_0x237e4d(0x16e)](_0x4c5a46);if(_0x31888d[_0x237e4d(0x162)]>0x0){const _0x53713f=_0x31888d[0x0],_0x539239=_0x4c5a46[_0x53713f];_0x3513a2['setStateAsync'](_0x237e4d(0x168),{'val':_0x53713f,'ack':!![]}),_0x3513a2[_0x237e4d(0x16a)](_0x237e4d(0x152),{'val':_0x539239,'ack':!![]});}}}else{if(_0x346a9a[_0x237e4d(0x18e)]==='COMFORT_RESULT'){const {patterns:_0x47cb1c}=_0x346a9a[_0x237e4d(0x18f)];if(_0x47cb1c&&_0x47cb1c[_0x237e4d(0x162)]>0x0)_0x3513a2[_0x237e4d(0x16a)](_0x237e4d(0x166),{'val':JSON[_0x237e4d(0x18b)](_0x47cb1c),'ack':!![]});}}}}}}}}}}}}}}}}}}function startService(_0x247f3b,_0x219a9b){const _0x41fafc=a4_0x5b5107;let _0x39a0e7=_0x41fafc(0x13e);if(fs['existsSync'](_0x219a9b))_0x39a0e7=_0x219a9b;const _0x1d600c=path[_0x41fafc(0x173)](__dirname,'..',_0x41fafc(0x133)),_0x264e2b=path[_0x41fafc(0x173)](__dirname,'..',_0x41fafc(0x15f),_0x41fafc(0x133));let _0x5552d2='';if(fs[_0x41fafc(0x149)](_0x1d600c))_0x5552d2=_0x1d600c;else{if(fs[_0x41fafc(0x149)](_0x264e2b))_0x5552d2=_0x264e2b;else{_0x247f3b[_0x41fafc(0x181)]['error'](_0x41fafc(0x15e)+_0x1d600c+_0x41fafc(0x17c)+_0x264e2b+_0x41fafc(0x124));return;}}try{_0x247f3b[_0x41fafc(0x181)][_0x41fafc(0x18d)](_0x41fafc(0x177)+_0x39a0e7+'\x20'+_0x5552d2),pythonProcess=spawn(_0x39a0e7,[_0x5552d2]),pythonProcess[_0x41fafc(0x169)]['on'](_0x41fafc(0x15c),_0x51b831=>{const _0x37ce38=_0x41fafc,_0x4b60ca=_0x51b831[_0x37ce38(0x14c)]()['split']('\x0a');_0x4b60ca[_0x37ce38(0x14f)](_0x572e06=>{const _0x14d99f=_0x37ce38,_0x1d49b4=_0x572e06[_0x14d99f(0x148)]();if(!_0x1d49b4)return;if(_0x1d49b4['startsWith'](_0x14d99f(0x185)))_0x247f3b['log'][_0x14d99f(0x15b)]('[PYTHON]\x20'+_0x1d49b4['substring'](0x5)[_0x14d99f(0x148)]());else{if(_0x1d49b4[_0x14d99f(0x13f)](_0x14d99f(0x17d)))try{const _0x4926fa=JSON[_0x14d99f(0x154)](_0x1d49b4[_0x14d99f(0x156)](0x8)[_0x14d99f(0x148)]());handleResult(_0x247f3b,_0x4926fa);}catch(_0x39f81d){}}});}),pythonProcess[_0x41fafc(0x131)]['on'](_0x41fafc(0x15c),_0x41584e=>{const _0x488be7=_0x41fafc;_0x247f3b[_0x488be7(0x181)][_0x488be7(0x17e)](_0x488be7(0x171)+_0x41584e['toString']()[_0x488be7(0x148)]());}),pythonProcess['on'](_0x41fafc(0x14a),_0x1eb576=>{const _0x3b5959=_0x41fafc;_0x247f3b[_0x3b5959(0x181)][_0x3b5959(0x140)](_0x3b5959(0x146)+_0x1eb576),pythonProcess=null;}),_0x247f3b['sendToPythonWrapper']=(_0x71022c,_0x811a8e)=>send(_0x247f3b,_0x71022c,_0x811a8e);}catch(_0x3b28ec){_0x247f3b[_0x41fafc(0x181)][_0x41fafc(0x17e)](_0x41fafc(0x155)+_0x3b28ec['message']);}}function stopService(_0x10242f){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x2e99b4){}pythonProcess=null;}}module[a4_0x5b5107(0x147)]={'startService':startService,'stopService':stopService,'send':send};