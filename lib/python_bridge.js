function a3_0x246c(){const _0x591c55=['analysis.prediction.nextRoom','setStateAsync','GAIT_RESULT','substring','write','writable','48kdyKbr','heating','analysis.energy.forecast','TOPOLOGY_ACK','type','payload','639ghYVPU','7YcSDVe','HEALTH_RESULT','\x20->\x20Likely\x20','analysis.health.lastCheck','analysis.automation.description','debug','startsWith','split','toString','TOPOLOGY_RESULT','1787356CObcJE','existsSync','stdout','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','SECURITY_RESULT','HEALTH_TRAIN_RESULT','constructor','analysis.automation.detectedPatterns','error','Failed:\x20','python_service','close','data','message','ANOMALY','apply','903728DrOrtH','info','ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.','analysis.prediction.confidence','details','toFixed','success','length','toLocaleTimeString','53090QTjYGl','trim','confidence','insulation','./setup','PONG','parse','1221741enHpPw','./automation','(((.+)+)+)+$','python3','analysis.security.lastScore','[RESULT]','1355955KuomTE','search','toISOString','TREND_RESULT','analysis.health.isAnomaly','analysis.automation.patternDetected','TRAINING_COMPLETE','analysis.security.lastCheck','analysis.security.topologyMatrix','[PYTHON]\x20','threshold','handlePrediction','sendNotification','ENERGY_PREDICT_RESULT','SIGNAL_RESULT','\x0aGrund:\x20','analysis.security.currentThreshold','path','2562703nLIOko','Regel\x20erkannt:\x20','Unknown','analysis.alertReason','log','42qrgbvC','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','12242CvMeIo','stdin','6mzYOWt','analysis.health.gaitSpeed','COMFORT_RESULT','Success:\x20','exports','change_percent','stringify','analysis.health.trendValue','[LOG]'];a3_0x246c=function(){return _0x591c55;};return a3_0x246c();}const a3_0x54bdf8=a3_0x3857;(function(_0x2865c6,_0x4ee97b){const _0x347fd8=a3_0x3857,_0x54cdfb=_0x2865c6();while(!![]){try{const _0x3b3421=parseInt(_0x347fd8(0x1be))/0x1*(-parseInt(_0x347fd8(0x1bc))/0x2)+-parseInt(_0x347fd8(0x19f))/0x3+-parseInt(_0x347fd8(0x17f))/0x4+parseInt(_0x347fd8(0x1a5))/0x5*(parseInt(_0x347fd8(0x1c0))/0x6)+-parseInt(_0x347fd8(0x175))/0x7*(parseInt(_0x347fd8(0x18f))/0x8)+parseInt(_0x347fd8(0x174))/0x9*(parseInt(_0x347fd8(0x198))/0xa)+parseInt(_0x347fd8(0x1b7))/0xb*(parseInt(_0x347fd8(0x16e))/0xc);if(_0x3b3421===_0x4ee97b)break;else _0x54cdfb['push'](_0x54cdfb['shift']());}catch(_0x2de868){_0x54cdfb['push'](_0x54cdfb['shift']());}}}(a3_0x246c,0x56e30));const a3_0x29ce68=(function(){let _0x523b1f=!![];return function(_0x45ab70,_0x257ca4){const _0x2f731c=_0x523b1f?function(){const _0x31c5d=a3_0x3857;if(_0x257ca4){const _0x4ec37b=_0x257ca4[_0x31c5d(0x18e)](_0x45ab70,arguments);return _0x257ca4=null,_0x4ec37b;}}:function(){};return _0x523b1f=![],_0x2f731c;};}()),a3_0x460888=a3_0x29ce68(this,function(){const _0x3e8815=a3_0x3857;return a3_0x460888['toString']()['search'](_0x3e8815(0x1a1))[_0x3e8815(0x17d)]()[_0x3e8815(0x185)](a3_0x460888)[_0x3e8815(0x1a6)]('(((.+)+)+)+$');});a3_0x460888();'use strict';const {spawn}=require('child_process'),path=require(a3_0x54bdf8(0x1b6)),fs=require('fs'),setup=require(a3_0x54bdf8(0x19c)),automation=require(a3_0x54bdf8(0x1a0));let pythonProcess=null;function send(_0x494de2,_0x3900cd,_0xe165b4={}){const _0x172557=a3_0x54bdf8;if(!pythonProcess||!pythonProcess['stdin'][_0x172557(0x16d)])return;const _0x218155=JSON[_0x172557(0x165)]({'command':_0x3900cd,..._0xe165b4});try{pythonProcess[_0x172557(0x1bf)][_0x172557(0x16c)](_0x218155+'\x0a');}catch(_0x1e76b8){}}function handleResult(_0x346a9b,_0x54ca26){const _0x4cca7d=a3_0x54bdf8;if(_0x54ca26['type']===_0x4cca7d(0x19d))_0x346a9b[_0x4cca7d(0x1bb)][_0x4cca7d(0x17a)]('ðŸ\x20Python\x20Pong');else{if(_0x54ca26['type']===_0x4cca7d(0x183)){const {anomaly_score:_0x559e31,is_anomaly:_0x3c57b0,threshold:_0x4f7ffd,explanation:_0x3f5781}=_0x54ca26[_0x4cca7d(0x173)];_0x346a9b[_0x4cca7d(0x1bb)][_0x4cca7d(0x190)]('ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20'+_0x559e31[_0x4cca7d(0x194)](0x5)+'\x20->\x20'+(_0x3c57b0?_0x4cca7d(0x18d):'OK')),_0x346a9b[_0x4cca7d(0x169)](_0x4cca7d(0x1a3),{'val':_0x559e31,'ack':!![]}),_0x346a9b['setStateAsync'](_0x4cca7d(0x1ac),{'val':new Date()[_0x4cca7d(0x1a7)](),'ack':!![]});if(_0x4f7ffd)_0x346a9b[_0x4cca7d(0x169)](_0x4cca7d(0x1b5),{'val':_0x4f7ffd,'ack':!![]});if(_0x3c57b0){let _0x503a73='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x559e31[_0x4cca7d(0x194)](0x4)+')';if(_0x3f5781&&_0x3f5781!==_0x4cca7d(0x1b9))_0x503a73+=_0x4cca7d(0x1b4)+_0x3f5781;_0x346a9b[_0x4cca7d(0x169)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x346a9b[_0x4cca7d(0x169)](_0x4cca7d(0x1ba),{'val':_0x503a73,'ack':!![]}),setup[_0x4cca7d(0x1b1)](_0x346a9b,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x503a73,![],!![]);}}else{if(_0x54ca26['type']===_0x4cca7d(0x1ab)){const _0x15f643=_0x54ca26[_0x4cca7d(0x173)][_0x4cca7d(0x193)]||'',_0x21e05d=_0x54ca26[_0x4cca7d(0x173)][_0x4cca7d(0x1af)],_0x4e195e=_0x54ca26[_0x4cca7d(0x173)][_0x4cca7d(0x195)]?_0x4cca7d(0x162)+new Date()[_0x4cca7d(0x197)]()+'\x20('+_0x15f643+')':_0x4cca7d(0x188)+_0x54ca26['payload']['reason'];_0x346a9b[_0x4cca7d(0x169)]('analysis.training.status',{'val':_0x4e195e,'ack':!![]});if(_0x54ca26['payload'][_0x4cca7d(0x195)]&&_0x21e05d)_0x346a9b[_0x4cca7d(0x169)](_0x4cca7d(0x1b5),{'val':_0x21e05d,'ack':!![]});}else{if(_0x54ca26[_0x4cca7d(0x172)]===_0x4cca7d(0x1c2)){const {patterns:_0x580204}=_0x54ca26['payload'];if(_0x580204&&_0x580204[_0x4cca7d(0x196)]>0x0){_0x346a9b[_0x4cca7d(0x1bb)][_0x4cca7d(0x190)](_0x4cca7d(0x1bd)+_0x580204[_0x4cca7d(0x196)]+'\x20new\x20patterns.'),_0x346a9b[_0x4cca7d(0x169)]('analysis.automation.detectedPatterns',{'val':JSON[_0x4cca7d(0x165)](_0x580204),'ack':!![]});const _0x289458=_0x580204[0x0],_0x401ac5=_0x4cca7d(0x1b8)+_0x289458['rule']+'\x20('+(_0x289458[_0x4cca7d(0x19a)]*0x64)[_0x4cca7d(0x194)](0x0)+'%)';_0x346a9b[_0x4cca7d(0x169)](_0x4cca7d(0x1aa),{'val':!![],'ack':!![]}),_0x346a9b[_0x4cca7d(0x169)](_0x4cca7d(0x179),{'val':_0x401ac5,'ack':!![]});}else _0x346a9b[_0x4cca7d(0x1bb)][_0x4cca7d(0x190)](_0x4cca7d(0x182)),_0x346a9b[_0x4cca7d(0x169)](_0x4cca7d(0x1aa),{'val':![],'ack':!![]}),_0x346a9b[_0x4cca7d(0x169)](_0x4cca7d(0x186),{'val':'[]','ack':!![]});}else{if(_0x54ca26[_0x4cca7d(0x172)]==='ENERGY_TRAIN_RESULT'){if(_0x54ca26[_0x4cca7d(0x173)][_0x4cca7d(0x195)])try{const _0x656461=JSON[_0x4cca7d(0x19e)](_0x54ca26['payload'][_0x4cca7d(0x193)]);if(_0x656461[_0x4cca7d(0x19b)])_0x346a9b[_0x4cca7d(0x169)]('analysis.energy.insulationScore',{'val':JSON[_0x4cca7d(0x165)](_0x656461[_0x4cca7d(0x19b)]),'ack':!![]});if(_0x656461['heating'])_0x346a9b[_0x4cca7d(0x169)]('analysis.energy.heatingScore',{'val':JSON[_0x4cca7d(0x165)](_0x656461[_0x4cca7d(0x16f)]),'ack':!![]});}catch(_0x101913){}}else{if(_0x54ca26[_0x4cca7d(0x172)]===_0x4cca7d(0x184)){if(_0x54ca26[_0x4cca7d(0x173)][_0x4cca7d(0x195)])_0x346a9b['log'][_0x4cca7d(0x190)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x54ca26[_0x4cca7d(0x172)]===_0x4cca7d(0x176))_0x346a9b[_0x4cca7d(0x169)](_0x4cca7d(0x178),{'val':new Date()[_0x4cca7d(0x1a7)](),'ack':!![]}),_0x346a9b[_0x4cca7d(0x169)](_0x4cca7d(0x1a9),{'val':_0x54ca26[_0x4cca7d(0x173)]['is_anomaly'],'ack':!![]});else{if(_0x54ca26[_0x4cca7d(0x172)]===_0x4cca7d(0x1a8))_0x346a9b['setStateAsync']('analysis.health.trendDiagnosis',{'val':_0x54ca26[_0x4cca7d(0x173)]['diagnosis'],'ack':!![]}),_0x346a9b[_0x4cca7d(0x169)](_0x4cca7d(0x166),{'val':_0x54ca26[_0x4cca7d(0x173)][_0x4cca7d(0x164)],'ack':!![]});else{if(_0x54ca26[_0x4cca7d(0x172)]===_0x4cca7d(0x16a)){const {speed_trend:_0xb3c501}=_0x54ca26[_0x4cca7d(0x173)];if(_0xb3c501!==undefined)_0x346a9b[_0x4cca7d(0x169)](_0x4cca7d(0x1c1),{'val':_0xb3c501,'ack':!![]});}else{if(_0x54ca26[_0x4cca7d(0x172)]===_0x4cca7d(0x1b2)){const {forecast:_0xd0daf5}=_0x54ca26[_0x4cca7d(0x173)];if(_0xd0daf5)_0x346a9b[_0x4cca7d(0x169)](_0x4cca7d(0x170),{'val':JSON[_0x4cca7d(0x165)](_0xd0daf5),'ack':!![]});}else{if(_0x54ca26[_0x4cca7d(0x172)]===_0x4cca7d(0x17e)){const {data:_0x30c2e5}=_0x54ca26['payload'];_0x30c2e5&&(_0x346a9b['log'][_0x4cca7d(0x190)](_0x4cca7d(0x191)),_0x346a9b[_0x4cca7d(0x169)](_0x4cca7d(0x1ad),{'val':JSON[_0x4cca7d(0x165)](_0x30c2e5),'ack':!![]}));}else{if(_0x54ca26[_0x4cca7d(0x172)]===_0x4cca7d(0x171))_0x346a9b['log']['debug']('ðŸ\x20Python\x20confirmed\x20new\x20topology.');else{if(_0x54ca26[_0x4cca7d(0x172)]===_0x4cca7d(0x1b3)){const {room:_0x15a3e2,propagation:_0x4d1abe}=_0x54ca26[_0x4cca7d(0x173)];let _0x578abb=_0x4cca7d(0x1b9),_0x24dd69=0x0;if(_0x4d1abe){const _0xdd03f1=Object['entries'](_0x4d1abe);_0xdd03f1[_0x4cca7d(0x196)]>0x0&&(_0x578abb=_0xdd03f1[0x0][0x0],_0x24dd69=_0xdd03f1[0x0][0x1]);}_0x346a9b['setStateAsync'](_0x4cca7d(0x168),{'val':_0x578abb,'ack':!![]}),_0x346a9b[_0x4cca7d(0x169)](_0x4cca7d(0x192),{'val':_0x24dd69,'ack':!![]}),_0x24dd69>0.4&&_0x346a9b[_0x4cca7d(0x1bb)][_0x4cca7d(0x17a)]('ðŸ”®\x20Prediction:\x20From\x20'+_0x15a3e2+_0x4cca7d(0x177)+_0x578abb+'\x20('+(_0x24dd69*0x64)['toFixed'](0x0)+'%)'),automation[_0x4cca7d(0x1b0)](_0x346a9b,_0x578abb,_0x24dd69);}}}}}}}}}}}}}}function a3_0x3857(_0x2f92a3,_0x18f500){const _0x1212f3=a3_0x246c();return a3_0x3857=function(_0x460888,_0x29ce68){_0x460888=_0x460888-0x162;let _0x246c15=_0x1212f3[_0x460888];return _0x246c15;},a3_0x3857(_0x2f92a3,_0x18f500);}function startService(_0x2b0dd1,_0x2b4c9a){const _0x3b2ea9=a3_0x54bdf8;let _0x125610=_0x3b2ea9(0x1a2);if(fs[_0x3b2ea9(0x180)](_0x2b4c9a))_0x125610=_0x2b4c9a;try{const _0x1b12c5=path['join'](__dirname,'..',_0x3b2ea9(0x189),'service.py');pythonProcess=spawn(_0x125610,[_0x1b12c5]),pythonProcess[_0x3b2ea9(0x181)]['on'](_0x3b2ea9(0x18b),_0x6eb818=>{const _0x2c992a=_0x3b2ea9,_0x48ec15=_0x6eb818[_0x2c992a(0x17d)]()[_0x2c992a(0x17c)]('\x0a');_0x48ec15['forEach'](_0x5cb3bf=>{const _0x2b64da=_0x2c992a,_0x528c07=_0x5cb3bf[_0x2b64da(0x199)]();if(!_0x528c07)return;if(_0x528c07[_0x2b64da(0x17b)](_0x2b64da(0x167)))_0x2b0dd1[_0x2b64da(0x1bb)][_0x2b64da(0x17a)](_0x2b64da(0x1ae)+_0x528c07[_0x2b64da(0x16b)](0x5)[_0x2b64da(0x199)]());else{if(_0x528c07['startsWith'](_0x2b64da(0x1a4)))try{const _0x5899ea=JSON[_0x2b64da(0x19e)](_0x528c07[_0x2b64da(0x16b)](0x8)['trim']());handleResult(_0x2b0dd1,_0x5899ea);}catch(_0x3dfee8){}}});}),pythonProcess['on'](_0x3b2ea9(0x18a),_0x4d1a67=>{pythonProcess=null;}),_0x2b0dd1['sendToPythonWrapper']=(_0x5dd331,_0x4aee24)=>send(_0x2b0dd1,_0x5dd331,_0x4aee24);}catch(_0x2bcc3e){_0x2b0dd1[_0x3b2ea9(0x1bb)][_0x3b2ea9(0x187)]('Error\x20launching\x20Python:\x20'+_0x2bcc3e[_0x3b2ea9(0x18c)]);}}function stopService(_0x25f6ed){if(pythonProcess){try{pythonProcess['kill']();}catch(_0xc7d909){}pythonProcess=null;}}module[a3_0x54bdf8(0x163)]={'startService':startService,'stopService':stopService,'send':send};