const a4_0x5a7b82=a4_0xbfb5;(function(_0x353491,_0x4123db){const _0x175114=a4_0xbfb5,_0x3c38dc=_0x353491();while(!![]){try{const _0x25ff91=-parseInt(_0x175114(0x1ef))/0x1+parseInt(_0x175114(0x203))/0x2*(-parseInt(_0x175114(0x215))/0x3)+-parseInt(_0x175114(0x1ff))/0x4+parseInt(_0x175114(0x204))/0x5*(parseInt(_0x175114(0x1e3))/0x6)+parseInt(_0x175114(0x1f5))/0x7+parseInt(_0x175114(0x227))/0x8+parseInt(_0x175114(0x1f9))/0x9;if(_0x25ff91===_0x4123db)break;else _0x3c38dc['push'](_0x3c38dc['shift']());}catch(_0x26d04b){_0x3c38dc['push'](_0x3c38dc['shift']());}}}(a4_0x22b3,0xb8217));const a4_0x112b12=(function(){let _0x4d451e=!![];return function(_0x474b02,_0x591230){const _0x51829f=_0x4d451e?function(){const _0x5e7d38=a4_0xbfb5;if(_0x591230){const _0x1d5a4c=_0x591230[_0x5e7d38(0x1eb)](_0x474b02,arguments);return _0x591230=null,_0x1d5a4c;}}:function(){};return _0x4d451e=![],_0x51829f;};}()),a4_0x419a00=a4_0x112b12(this,function(){const _0x2beaa6=a4_0xbfb5;return a4_0x419a00[_0x2beaa6(0x200)]()[_0x2beaa6(0x21a)](_0x2beaa6(0x1e8))[_0x2beaa6(0x200)]()[_0x2beaa6(0x208)](a4_0x419a00)[_0x2beaa6(0x21a)]('(((.+)+)+)+$');});a4_0x419a00();function a4_0x22b3(){const _0x5b17cd=['analysis.automation.description','âœ…\x20HEALTH\x20TRAINED.','is_anomaly','analysis.automation.patternDetected','Failed:\x20','3868112yRmhTU','log','analysis.security.currentThreshold','TRAINING_COMPLETE','analysis.energy.heatingScore','info','analysis.health.gaitSpeed','ENERGY_TRAIN_RESULT','toLocaleTimeString','substring','trim','ENERGY_PREDICT_RESULT','\x0aGrund:\x20','ðŸ”®\x20Prediction:\x20From\x20','sendNotification','toISOString','stdout','insulation','exports','Success:\x20','analysis.alertReason','[PYTHON]\x20','stdin','debug','entries','change_percent','6QovSAi','HEALTH_TRAIN_RESULT','threshold','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','TOPOLOGY_ACK','(((.+)+)+)+$','startsWith','sendToPythonWrapper','apply','TREND_RESULT','ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.','Regel\x20erkannt:\x20','481724pAjBaa','type','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','analysis.security.topologyMatrix','HEALTH_RESULT','analysis.security.lastCheck','4447884mggyXh','SECURITY_RESULT','analysis.health.lastCheck','payload','25064757uYaIFi','ðŸ\x20Python\x20Pong','Error\x20launching\x20Python:\x20','join','confidence','analysis.prediction.nextRoom','5722568wQbojz','toString','analysis.energy.forecast','analysis.automation.detectedPatterns','2qMmdwj','1276235LLZmlX','âš ï¸\x20SECURITY\x20ALARM:\x20','data','\x20new\x20patterns.','constructor','success','setStateAsync','stringify','toFixed','SIGNAL_RESULT','TOPOLOGY_RESULT','./automation','analysis.security.lastScore','python3','analysis.health.trendDiagnosis','existsSync','error','4477743OGvmhs','ANOMALY','length','COMFORT_RESULT','parse','search','Unknown','close','diagnosis','forEach','handlePrediction','[LOG]','heating'];a4_0x22b3=function(){return _0x5b17cd;};return a4_0x22b3();}function a4_0xbfb5(_0x255340,_0x47c613){const _0x50a1bd=a4_0x22b3();return a4_0xbfb5=function(_0x419a00,_0x112b12){_0x419a00=_0x419a00-0x1d7;let _0x22b383=_0x50a1bd[_0x419a00];return _0x22b383;},a4_0xbfb5(_0x255340,_0x47c613);}'use strict';const {spawn}=require('child_process'),path=require('path'),fs=require('fs'),setup=require('./setup'),automation=require(a4_0x5a7b82(0x20f));let pythonProcess=null;function send(_0x1c18c6,_0x21f5da,_0x3e8415={}){const _0x3a10f1=a4_0x5a7b82;if(!pythonProcess||!pythonProcess[_0x3a10f1(0x1df)]['writable'])return;const _0x518404=JSON[_0x3a10f1(0x20b)]({'command':_0x21f5da,..._0x3e8415});try{pythonProcess[_0x3a10f1(0x1df)]['write'](_0x518404+'\x0a');}catch(_0xcbafd4){}}function handleResult(_0x3c5527,_0x2b8631){const _0x17c85c=a4_0x5a7b82;if(_0x2b8631[_0x17c85c(0x1f0)]==='PONG')_0x3c5527['log'][_0x17c85c(0x1e0)](_0x17c85c(0x1fa));else{if(_0x2b8631[_0x17c85c(0x1f0)]===_0x17c85c(0x1f6)){const {anomaly_score:_0x3cc7a9,is_anomaly:_0x3e179e,threshold:_0x2b7013,explanation:_0x549348}=_0x2b8631[_0x17c85c(0x1f8)];_0x3c5527[_0x17c85c(0x228)]['info'](_0x17c85c(0x1e6)+_0x3cc7a9[_0x17c85c(0x20c)](0x5)+'\x20->\x20'+(_0x3e179e?_0x17c85c(0x216):'OK')),_0x3c5527[_0x17c85c(0x20a)](_0x17c85c(0x210),{'val':_0x3cc7a9,'ack':!![]}),_0x3c5527[_0x17c85c(0x20a)](_0x17c85c(0x1f4),{'val':new Date()[_0x17c85c(0x1d8)](),'ack':!![]});if(_0x2b7013)_0x3c5527[_0x17c85c(0x20a)](_0x17c85c(0x229),{'val':_0x2b7013,'ack':!![]});if(_0x3e179e){let _0x25c00a='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x3cc7a9[_0x17c85c(0x20c)](0x4)+')';if(_0x549348&&_0x549348!==_0x17c85c(0x21b))_0x25c00a+=_0x17c85c(0x233)+_0x549348;_0x3c5527[_0x17c85c(0x20a)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x3c5527[_0x17c85c(0x20a)](_0x17c85c(0x1dd),{'val':_0x25c00a,'ack':!![]}),setup[_0x17c85c(0x1d7)](_0x3c5527,_0x17c85c(0x205)+_0x25c00a,![],!![]);}}else{if(_0x2b8631['type']===_0x17c85c(0x22a)){const _0x35b198=_0x2b8631[_0x17c85c(0x1f8)]['details']||'',_0x2beefa=_0x2b8631['payload'][_0x17c85c(0x1e5)],_0x570a46=_0x2b8631[_0x17c85c(0x1f8)]['success']?_0x17c85c(0x1dc)+new Date()[_0x17c85c(0x22f)]()+'\x20('+_0x35b198+')':_0x17c85c(0x226)+_0x2b8631[_0x17c85c(0x1f8)]['reason'];_0x3c5527[_0x17c85c(0x20a)]('analysis.training.status',{'val':_0x570a46,'ack':!![]});if(_0x2b8631[_0x17c85c(0x1f8)][_0x17c85c(0x209)]&&_0x2beefa)_0x3c5527[_0x17c85c(0x20a)](_0x17c85c(0x229),{'val':_0x2beefa,'ack':!![]});}else{if(_0x2b8631[_0x17c85c(0x1f0)]===_0x17c85c(0x218)){const {patterns:_0x4bb66e}=_0x2b8631['payload'];if(_0x4bb66e&&_0x4bb66e[_0x17c85c(0x217)]>0x0){_0x3c5527['log'][_0x17c85c(0x22c)](_0x17c85c(0x1f1)+_0x4bb66e[_0x17c85c(0x217)]+_0x17c85c(0x207)),_0x3c5527['setStateAsync']('analysis.automation.detectedPatterns',{'val':JSON[_0x17c85c(0x20b)](_0x4bb66e),'ack':!![]});const _0x272059=_0x4bb66e[0x0],_0x58ee29=_0x17c85c(0x1ee)+_0x272059['rule']+'\x20('+(_0x272059[_0x17c85c(0x1fd)]*0x64)['toFixed'](0x0)+'%)';_0x3c5527['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x3c5527[_0x17c85c(0x20a)](_0x17c85c(0x222),{'val':_0x58ee29,'ack':!![]});}else _0x3c5527[_0x17c85c(0x228)][_0x17c85c(0x22c)]('ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.'),_0x3c5527['setStateAsync'](_0x17c85c(0x225),{'val':![],'ack':!![]}),_0x3c5527[_0x17c85c(0x20a)](_0x17c85c(0x202),{'val':'[]','ack':!![]});}else{if(_0x2b8631[_0x17c85c(0x1f0)]===_0x17c85c(0x22e)){if(_0x2b8631[_0x17c85c(0x1f8)][_0x17c85c(0x209)])try{const _0x20c812=JSON[_0x17c85c(0x219)](_0x2b8631[_0x17c85c(0x1f8)]['details']);if(_0x20c812[_0x17c85c(0x1da)])_0x3c5527[_0x17c85c(0x20a)]('analysis.energy.insulationScore',{'val':JSON['stringify'](_0x20c812[_0x17c85c(0x1da)]),'ack':!![]});if(_0x20c812[_0x17c85c(0x221)])_0x3c5527[_0x17c85c(0x20a)](_0x17c85c(0x22b),{'val':JSON[_0x17c85c(0x20b)](_0x20c812['heating']),'ack':!![]});}catch(_0x4b2a77){}}else{if(_0x2b8631[_0x17c85c(0x1f0)]===_0x17c85c(0x1e4)){if(_0x2b8631['payload'][_0x17c85c(0x209)])_0x3c5527['log']['info'](_0x17c85c(0x223));}else{if(_0x2b8631[_0x17c85c(0x1f0)]===_0x17c85c(0x1f3))_0x3c5527[_0x17c85c(0x20a)](_0x17c85c(0x1f7),{'val':new Date()[_0x17c85c(0x1d8)](),'ack':!![]}),_0x3c5527[_0x17c85c(0x20a)]('analysis.health.isAnomaly',{'val':_0x2b8631[_0x17c85c(0x1f8)][_0x17c85c(0x224)],'ack':!![]});else{if(_0x2b8631[_0x17c85c(0x1f0)]===_0x17c85c(0x1ec))_0x3c5527[_0x17c85c(0x20a)](_0x17c85c(0x212),{'val':_0x2b8631[_0x17c85c(0x1f8)][_0x17c85c(0x21d)],'ack':!![]}),_0x3c5527[_0x17c85c(0x20a)]('analysis.health.trendValue',{'val':_0x2b8631[_0x17c85c(0x1f8)][_0x17c85c(0x1e2)],'ack':!![]});else{if(_0x2b8631[_0x17c85c(0x1f0)]==='GAIT_RESULT'){const {speed_trend:_0x10042f}=_0x2b8631['payload'];if(_0x10042f!==undefined)_0x3c5527[_0x17c85c(0x20a)](_0x17c85c(0x22d),{'val':_0x10042f,'ack':!![]});}else{if(_0x2b8631['type']===_0x17c85c(0x232)){const {forecast:_0xec3809}=_0x2b8631['payload'];if(_0xec3809)_0x3c5527[_0x17c85c(0x20a)](_0x17c85c(0x201),{'val':JSON[_0x17c85c(0x20b)](_0xec3809),'ack':!![]});}else{if(_0x2b8631[_0x17c85c(0x1f0)]===_0x17c85c(0x20e)){const {data:_0x4ed29e}=_0x2b8631['payload'];_0x4ed29e&&(_0x3c5527[_0x17c85c(0x228)][_0x17c85c(0x22c)](_0x17c85c(0x1ed)),_0x3c5527[_0x17c85c(0x20a)](_0x17c85c(0x1f2),{'val':JSON[_0x17c85c(0x20b)](_0x4ed29e),'ack':!![]}));}else{if(_0x2b8631[_0x17c85c(0x1f0)]===_0x17c85c(0x1e7))_0x3c5527[_0x17c85c(0x228)][_0x17c85c(0x1e0)]('ðŸ\x20Python\x20confirmed\x20new\x20topology.');else{if(_0x2b8631[_0x17c85c(0x1f0)]===_0x17c85c(0x20d)){const {room:_0x3ae344,propagation:_0x44e5f8}=_0x2b8631[_0x17c85c(0x1f8)];let _0x4a7177='Unknown',_0x5972ad=0x0;if(_0x44e5f8){const _0x17756a=Object[_0x17c85c(0x1e1)](_0x44e5f8);_0x17756a[_0x17c85c(0x217)]>0x0&&(_0x4a7177=_0x17756a[0x0][0x0],_0x5972ad=_0x17756a[0x0][0x1]);}_0x3c5527[_0x17c85c(0x20a)](_0x17c85c(0x1fe),{'val':_0x4a7177,'ack':!![]}),_0x3c5527[_0x17c85c(0x20a)]('analysis.prediction.confidence',{'val':_0x5972ad,'ack':!![]}),_0x5972ad>0.4&&_0x3c5527[_0x17c85c(0x228)][_0x17c85c(0x1e0)](_0x17c85c(0x234)+_0x3ae344+'\x20->\x20Likely\x20'+_0x4a7177+'\x20('+(_0x5972ad*0x64)['toFixed'](0x0)+'%)'),automation[_0x17c85c(0x21f)](_0x3c5527,_0x4a7177,_0x5972ad);}}}}}}}}}}}}}}function startService(_0x1ec63e,_0x35e7bf){const _0x2af90d=a4_0x5a7b82;let _0x7a8e6b=_0x2af90d(0x211);if(fs[_0x2af90d(0x213)](_0x35e7bf))_0x7a8e6b=_0x35e7bf;try{const _0x40cf77=path[_0x2af90d(0x1fc)](__dirname,'..','python_service','service.py');pythonProcess=spawn(_0x7a8e6b,[_0x40cf77]),pythonProcess[_0x2af90d(0x1d9)]['on'](_0x2af90d(0x206),_0x15ba26=>{const _0x4f0735=_0x2af90d,_0x260af9=_0x15ba26[_0x4f0735(0x200)]()['split']('\x0a');_0x260af9[_0x4f0735(0x21e)](_0x18af0a=>{const _0x18f4cf=_0x4f0735,_0x2acd11=_0x18af0a[_0x18f4cf(0x231)]();if(!_0x2acd11)return;if(_0x2acd11[_0x18f4cf(0x1e9)](_0x18f4cf(0x220)))_0x1ec63e[_0x18f4cf(0x228)][_0x18f4cf(0x1e0)](_0x18f4cf(0x1de)+_0x2acd11[_0x18f4cf(0x230)](0x5)[_0x18f4cf(0x231)]());else{if(_0x2acd11['startsWith']('[RESULT]'))try{const _0x4dd461=JSON[_0x18f4cf(0x219)](_0x2acd11['substring'](0x8)[_0x18f4cf(0x231)]());handleResult(_0x1ec63e,_0x4dd461);}catch(_0x3a3334){}}});}),pythonProcess['on'](_0x2af90d(0x21c),_0xfa07b0=>{pythonProcess=null;}),_0x1ec63e[_0x2af90d(0x1ea)]=(_0x53e49b,_0x59c4b9)=>send(_0x1ec63e,_0x53e49b,_0x59c4b9);}catch(_0x16c090){_0x1ec63e[_0x2af90d(0x228)][_0x2af90d(0x214)](_0x2af90d(0x1fb)+_0x16c090['message']);}}function stopService(_0x561f8b){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x1deabb){}pythonProcess=null;}}module[a4_0x5a7b82(0x1db)]={'startService':startService,'stopService':stopService,'send':send};