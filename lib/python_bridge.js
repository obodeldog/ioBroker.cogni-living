const a4_0x2531d9=a4_0x4e1f;(function(_0x8ae38f,_0x4a8852){const _0x3fbea4=a4_0x4e1f,_0x20c72c=_0x8ae38f();while(!![]){try{const _0x2677a7=-parseInt(_0x3fbea4(0x10f))/0x1+parseInt(_0x3fbea4(0xdd))/0x2+parseInt(_0x3fbea4(0xf1))/0x3*(-parseInt(_0x3fbea4(0xd4))/0x4)+parseInt(_0x3fbea4(0xfe))/0x5+-parseInt(_0x3fbea4(0xd2))/0x6*(-parseInt(_0x3fbea4(0xd1))/0x7)+parseInt(_0x3fbea4(0xd8))/0x8+-parseInt(_0x3fbea4(0xf6))/0x9*(-parseInt(_0x3fbea4(0xe1))/0xa);if(_0x2677a7===_0x4a8852)break;else _0x20c72c['push'](_0x20c72c['shift']());}catch(_0x523df4){_0x20c72c['push'](_0x20c72c['shift']());}}}(a4_0x5e23,0x933ab));function a4_0x5e23(){const _0x438ee8=['sendNotification','âœ…\x20HEALTH\x20TRAINED.','writable','log','toFixed','parse','child_process','info','\x0aGrund:\x20','length','join','[RESULT]','python_service','GAIT_RESULT','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','345323acVUxi','analysis.health.lastCheck','stdin','write','analysis.alertReason','stdout','analysis.prediction.nextRoom','handlePrediction','SIGNAL_RESULT','HEALTH_RESULT','analysis.energy.mpcActive','threshold','analysis.health.isAnomaly','analysis.training.status','[PYTHON]\x20','COMFORT_RESULT','analysis.prediction.confidence','existsSync','search','Error\x20launching\x20Python:\x20','ðŸ\x20Python\x20Pong','forEach','debug','stringify','./automation','data','exports','Success:\x20','heating','3370199AqiHDd','6eeqtfd','ENERGY_TRAIN_RESULT','20464GpXXEU','applyEnergySavings','error','analysis.health.gaitSpeed','116336vkNuRL','reason','setStateAsync','analysis.security.lastScore','success','92334SHZsPE','insulation','analysis.security.lastCheck','toISOString','1520xMmfZr','entries','path','ENERGY_PREDICT_RESULT','payload','./setup','type','analysis.energy.pinnForecast','trim','analysis.energy.heatingScore','split','toLocaleTimeString','analysis.automation.detectedPatterns','Unknown','startsWith','python3','156EhcSyC','kill','substring','analysis.security.currentThreshold','details','23310OhbYkz','PONG','analysis.energy.insulationScore','toString','(((.+)+)+)+$','constructor','ENERGY_OPTIMIZE_RESULT','analysis.energy.forecast','1392800LVFGhs','PINN_PREDICT_RESULT'];a4_0x5e23=function(){return _0x438ee8;};return a4_0x5e23();}const a4_0x2cb17f=(function(){let _0x563073=!![];return function(_0x5497c6,_0x17d01d){const _0x39b03b=_0x563073?function(){if(_0x17d01d){const _0x2d8774=_0x17d01d['apply'](_0x5497c6,arguments);return _0x17d01d=null,_0x2d8774;}}:function(){};return _0x563073=![],_0x39b03b;};}()),a4_0x3db700=a4_0x2cb17f(this,function(){const _0x4b59c9=a4_0x4e1f;return a4_0x3db700[_0x4b59c9(0xf9)]()[_0x4b59c9(0x121)](_0x4b59c9(0xfa))[_0x4b59c9(0xf9)]()[_0x4b59c9(0xfb)](a4_0x3db700)[_0x4b59c9(0x121)](_0x4b59c9(0xfa));});a4_0x3db700();'use strict';const {spawn}=require(a4_0x2531d9(0x106)),path=require(a4_0x2531d9(0xe3)),fs=require('fs'),setup=require(a4_0x2531d9(0xe6)),automation=require(a4_0x2531d9(0xcc));let pythonProcess=null;function a4_0x4e1f(_0x2852e6,_0x4d620d){const _0x36ac46=a4_0x5e23();return a4_0x4e1f=function(_0x3db700,_0x2cb17f){_0x3db700=_0x3db700-0xcc;let _0x5e231c=_0x36ac46[_0x3db700];return _0x5e231c;},a4_0x4e1f(_0x2852e6,_0x4d620d);}function send(_0x22054d,_0x1d2998,_0x57b690={}){const _0x373935=a4_0x2531d9;if(!pythonProcess||!pythonProcess['stdin'][_0x373935(0x102)])return;const _0x5df3e4=JSON['stringify']({'command':_0x1d2998,..._0x57b690});try{pythonProcess[_0x373935(0x111)][_0x373935(0x112)](_0x5df3e4+'\x0a');}catch(_0x542640){}}function handleResult(_0x572a6a,_0x5f30fb){const _0x495e8d=a4_0x2531d9;if(_0x5f30fb[_0x495e8d(0xe7)]===_0x495e8d(0xf7))_0x572a6a[_0x495e8d(0x103)][_0x495e8d(0x125)](_0x495e8d(0x123));else{if(_0x5f30fb[_0x495e8d(0xe7)]==='SECURITY_RESULT'){const {anomaly_score:_0x20ea60,is_anomaly:_0x92d79a,threshold:_0x423d1f,explanation:_0x1c335c}=_0x5f30fb['payload'];_0x572a6a[_0x495e8d(0xda)](_0x495e8d(0xdb),{'val':_0x20ea60,'ack':!![]}),_0x572a6a[_0x495e8d(0xda)](_0x495e8d(0xdf),{'val':new Date()[_0x495e8d(0xe0)](),'ack':!![]});if(_0x423d1f)_0x572a6a[_0x495e8d(0xda)](_0x495e8d(0xf4),{'val':_0x423d1f,'ack':!![]});if(_0x92d79a){let _0x33e711=_0x495e8d(0x10e)+_0x20ea60[_0x495e8d(0x104)](0x4)+')';if(_0x1c335c&&_0x1c335c!==_0x495e8d(0xee))_0x33e711+=_0x495e8d(0x108)+_0x1c335c;_0x572a6a[_0x495e8d(0xda)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x572a6a[_0x495e8d(0xda)](_0x495e8d(0x113),{'val':_0x33e711,'ack':!![]}),setup[_0x495e8d(0x100)](_0x572a6a,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x33e711,![],!![]);}}else{if(_0x5f30fb['type']==='TRAINING_COMPLETE'){const _0x443499=_0x5f30fb[_0x495e8d(0xe5)][_0x495e8d(0xf5)]||'',_0x4a1963=_0x5f30fb[_0x495e8d(0xe5)][_0x495e8d(0x11a)],_0x1bae57=_0x5f30fb[_0x495e8d(0xe5)]['success']?_0x495e8d(0xcf)+new Date()[_0x495e8d(0xec)]()+'\x20('+_0x443499+')':'Failed:\x20'+_0x5f30fb['payload'][_0x495e8d(0xd9)];_0x572a6a['setStateAsync'](_0x495e8d(0x11c),{'val':_0x1bae57,'ack':!![]});if(_0x5f30fb[_0x495e8d(0xe5)][_0x495e8d(0xdc)]&&_0x4a1963)_0x572a6a['setStateAsync'](_0x495e8d(0xf4),{'val':_0x4a1963,'ack':!![]});}else{if(_0x5f30fb[_0x495e8d(0xe7)]===_0x495e8d(0xd3)){if(_0x5f30fb[_0x495e8d(0xe5)][_0x495e8d(0xdc)])try{const _0x560a3d=JSON[_0x495e8d(0x105)](_0x5f30fb['payload']['details']);if(_0x560a3d[_0x495e8d(0xde)])_0x572a6a[_0x495e8d(0xda)](_0x495e8d(0xf8),{'val':JSON[_0x495e8d(0x126)](_0x560a3d[_0x495e8d(0xde)]),'ack':!![]});if(_0x560a3d[_0x495e8d(0xd0)])_0x572a6a[_0x495e8d(0xda)](_0x495e8d(0xea),{'val':JSON[_0x495e8d(0x126)](_0x560a3d[_0x495e8d(0xd0)]),'ack':!![]});}catch(_0x50fb6c){}}else{if(_0x5f30fb[_0x495e8d(0xe7)]==='HEALTH_TRAIN_RESULT'){if(_0x5f30fb[_0x495e8d(0xe5)][_0x495e8d(0xdc)])_0x572a6a[_0x495e8d(0x103)][_0x495e8d(0x107)](_0x495e8d(0x101));}else{if(_0x5f30fb['type']===_0x495e8d(0x118))_0x572a6a[_0x495e8d(0xda)](_0x495e8d(0x110),{'val':new Date()['toISOString'](),'ack':!![]}),_0x572a6a[_0x495e8d(0xda)](_0x495e8d(0x11b),{'val':_0x5f30fb[_0x495e8d(0xe5)]['is_anomaly'],'ack':!![]});else{if(_0x5f30fb[_0x495e8d(0xe7)]===_0x495e8d(0x10d)){const {speed_trend:_0x33bbd1}=_0x5f30fb[_0x495e8d(0xe5)];if(_0x33bbd1!==undefined)_0x572a6a[_0x495e8d(0xda)](_0x495e8d(0xd7),{'val':_0x33bbd1,'ack':!![]});}else{if(_0x5f30fb['type']===_0x495e8d(0xe4)){const {forecast:_0x557418}=_0x5f30fb[_0x495e8d(0xe5)];if(_0x557418)_0x572a6a[_0x495e8d(0xda)](_0x495e8d(0xfd),{'val':JSON[_0x495e8d(0x126)](_0x557418),'ack':!![]});}else{if(_0x5f30fb[_0x495e8d(0xe7)]===_0x495e8d(0xff)){const {forecast:_0x58257d}=_0x5f30fb[_0x495e8d(0xe5)];if(_0x58257d)_0x572a6a[_0x495e8d(0xda)](_0x495e8d(0xe8),{'val':JSON[_0x495e8d(0x126)](_0x58257d),'ack':!![]});}else{if(_0x5f30fb['type']===_0x495e8d(0xfc)){const {proposals:_0x53c797}=_0x5f30fb[_0x495e8d(0xe5)];_0x572a6a['getState'](_0x495e8d(0x119),(_0x23369e,_0x3d4cb1)=>{const _0x5e8159=_0x495e8d;_0x3d4cb1&&_0x3d4cb1['val']===!![]&&_0x53c797&&_0x53c797[_0x5e8159(0x109)]>0x0&&automation[_0x5e8159(0xd5)](_0x572a6a,_0x53c797);});}else{if(_0x5f30fb[_0x495e8d(0xe7)]===_0x495e8d(0x117)){const {room:_0x47aba5,propagation:_0x9831a7}=_0x5f30fb[_0x495e8d(0xe5)];let _0x3fef28=_0x495e8d(0xee),_0xa5d7b6=0x0;if(_0x9831a7){const _0x2683c1=Object[_0x495e8d(0xe2)](_0x9831a7);_0x2683c1[_0x495e8d(0x109)]>0x0&&(_0x3fef28=_0x2683c1[0x0][0x0],_0xa5d7b6=_0x2683c1[0x0][0x1]);}_0x572a6a['setStateAsync'](_0x495e8d(0x115),{'val':_0x3fef28,'ack':!![]}),_0x572a6a[_0x495e8d(0xda)](_0x495e8d(0x11f),{'val':_0xa5d7b6,'ack':!![]}),automation[_0x495e8d(0x116)](_0x572a6a,_0x3fef28,_0xa5d7b6);}else{if(_0x5f30fb[_0x495e8d(0xe7)]===_0x495e8d(0x11e)){const {patterns:_0x7db236}=_0x5f30fb['payload'];if(_0x7db236&&_0x7db236[_0x495e8d(0x109)]>0x0)_0x572a6a[_0x495e8d(0xda)](_0x495e8d(0xed),{'val':JSON['stringify'](_0x7db236),'ack':!![]});}}}}}}}}}}}}}function startService(_0x1d6762,_0x7de48a){const _0x112cb1=a4_0x2531d9;let _0x5638bc=_0x112cb1(0xf0);if(fs[_0x112cb1(0x120)](_0x7de48a))_0x5638bc=_0x7de48a;try{const _0x37bb5d=path[_0x112cb1(0x10a)](__dirname,'..',_0x112cb1(0x10c),'service.py');pythonProcess=spawn(_0x5638bc,[_0x37bb5d]),pythonProcess[_0x112cb1(0x114)]['on'](_0x112cb1(0xcd),_0x16f4ea=>{const _0xeb2c28=_0x112cb1,_0xb82b56=_0x16f4ea[_0xeb2c28(0xf9)]()[_0xeb2c28(0xeb)]('\x0a');_0xb82b56[_0xeb2c28(0x124)](_0x4441b5=>{const _0x208572=_0xeb2c28,_0x2c39ed=_0x4441b5[_0x208572(0xe9)]();if(!_0x2c39ed)return;if(_0x2c39ed[_0x208572(0xef)]('[LOG]'))_0x1d6762['log'][_0x208572(0x125)](_0x208572(0x11d)+_0x2c39ed[_0x208572(0xf3)](0x5)[_0x208572(0xe9)]());else{if(_0x2c39ed['startsWith'](_0x208572(0x10b)))try{const _0x296095=JSON[_0x208572(0x105)](_0x2c39ed[_0x208572(0xf3)](0x8)[_0x208572(0xe9)]());handleResult(_0x1d6762,_0x296095);}catch(_0xf3be4){}}});}),pythonProcess['on']('close',_0x1d61dd=>{pythonProcess=null;}),_0x1d6762['sendToPythonWrapper']=(_0x9fd2bd,_0xffdf6a)=>send(_0x1d6762,_0x9fd2bd,_0xffdf6a);}catch(_0x285510){_0x1d6762[_0x112cb1(0x103)][_0x112cb1(0xd6)](_0x112cb1(0x122)+_0x285510['message']);}}function stopService(_0x2296f5){const _0x382fdd=a4_0x2531d9;if(pythonProcess){try{pythonProcess[_0x382fdd(0xf2)]();}catch(_0x16db2d){}pythonProcess=null;}}module[a4_0x2531d9(0xce)]={'startService':startService,'stopService':stopService,'send':send};