const a4_0x1dd419=a4_0xb574;function a4_0xb574(_0xa7394d,_0x54105e){const _0x404ccd=a4_0x1b63();return a4_0xb574=function(_0x1c2770,_0x27db41){_0x1c2770=_0x1c2770-0x1f4;let _0x1b63f9=_0x404ccd[_0x1c2770];return _0x1b63f9;},a4_0xb574(_0xa7394d,_0x54105e);}(function(_0x11f1b3,_0x4371ed){const _0x75041=a4_0xb574,_0x69dc3b=_0x11f1b3();while(!![]){try{const _0x31ac80=parseInt(_0x75041(0x222))/0x1+-parseInt(_0x75041(0x246))/0x2*(parseInt(_0x75041(0x225))/0x3)+-parseInt(_0x75041(0x231))/0x4+-parseInt(_0x75041(0x250))/0x5*(parseInt(_0x75041(0x213))/0x6)+-parseInt(_0x75041(0x1f9))/0x7+parseInt(_0x75041(0x25a))/0x8+parseInt(_0x75041(0x241))/0x9;if(_0x31ac80===_0x4371ed)break;else _0x69dc3b['push'](_0x69dc3b['shift']());}catch(_0x5529fa){_0x69dc3b['push'](_0x69dc3b['shift']());}}}(a4_0x1b63,0xb0a46));const a4_0x27db41=(function(){let _0x13d6ea=!![];return function(_0x5b7cfc,_0x46ffb2){const _0xc33b1f=_0x13d6ea?function(){const _0x1c55f2=a4_0xb574;if(_0x46ffb2){const _0x396773=_0x46ffb2[_0x1c55f2(0x206)](_0x5b7cfc,arguments);return _0x46ffb2=null,_0x396773;}}:function(){};return _0x13d6ea=![],_0xc33b1f;};}()),a4_0x1c2770=a4_0x27db41(this,function(){const _0xfeb61a=a4_0xb574;return a4_0x1c2770[_0xfeb61a(0x233)]()[_0xfeb61a(0x23f)](_0xfeb61a(0x21b))[_0xfeb61a(0x233)]()[_0xfeb61a(0x251)](a4_0x1c2770)['search'](_0xfeb61a(0x21b));});a4_0x1c2770();'use strict';const {spawn}=require('child_process'),path=require(a4_0x1dd419(0x255)),fs=require('fs'),setup=require(a4_0x1dd419(0x247)),automation=require(a4_0x1dd419(0x1ff));function a4_0x1b63(){const _0x3b11cf=['success','analysis.training.status','Python\x20process\x20exited\x20with\x20code\x20','2340394lhiOro','analysis.security.currentThreshold','analysis.energy.pinnForecast','warn','.\x20Please\x20create\x20this\x20file!','[PYTHON]\x20','./automation','entries','de-DE','threshold','Success:\x20','Unknown','analysis.energy.warmupSources','apply','HEALTH_TREND_RESULT','val','startsWith','existsSync','[PYTHON\x20ERR]\x20','HEALTH_RESULT','analysis.prediction.trackerState','analysis.health.gaitSensors','HEALTH_TRAIN_RESULT','analysis.automation.detectedPatterns','error','VENTILATION_ALERT','31470treazR','RL_PENALTY_UPDATE','data','info','analysis.energy.warmupDetails','toFixed','writable','analysis.health.lastCheck','(((.+)+)+)+$','payload','ðŸ“ˆ\x20Health\x20Trend:\x20','getState','\x0aGrund:\x20','sendToPythonWrapper','analysis.isAlert','111574YdlGnB','toISOString','analysis.prediction.trackerConfidence','45sEVrXb','analysis.health.activityTrend','join','type','analysis.security.lastScore','analysis.security.lastCheck','setStateAsync','GAIT_RESULT','service.py','[RESULT]','insulation','WARMUP_RESULT','5206468jjAozY','heating','toString','kill','stdin','stderr','write','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20','isArray','analysis.energy.insulationScore','ðŸ\x20Python\x20Pong','stdout','analysis.health.gaitSpeed','ENERGY_OPTIMIZE_RESULT','search','python_service','25608807LEadol','analysis.energy.heatingScore','details','ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20','[LOG]','80958clXYib','./setup','reason','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','analysis.health.gaitDebug','stringify','toLocaleDateString','2-digit','analysis.energy.mpcActive','âœ…\x20HEALTH\x20TRAINED.','325QNAFhX','constructor','analysis.energy.warmupTimes','log','TRAINING_COMPLETE','path','trim','substring','length','debug','2804784dsbRfC','analysis.energy.rlPenalties','SECURITY_RESULT','Error\x20launching\x20Python:\x20','close','analysis.energy.ventilationAlerts','short','analysis.energy.forecast','parse','\x20AND\x20'];a4_0x1b63=function(){return _0x3b11cf;};return a4_0x1b63();}let pythonProcess=null;function send(_0x1c6bd6,_0xf5a547,_0x278ea3={}){const _0x24f265=a4_0x1dd419;if(!pythonProcess||!pythonProcess[_0x24f265(0x235)][_0x24f265(0x219)])return;const _0x4c69c2=JSON[_0x24f265(0x24b)]({'command':_0xf5a547,..._0x278ea3});try{pythonProcess[_0x24f265(0x235)][_0x24f265(0x237)](_0x4c69c2+'\x0a');}catch(_0x424c40){}}function handleResult(_0x4ff4c9,_0x102964){const _0x8f3f13=a4_0x1dd419;if(_0x102964['type']==='PONG')_0x4ff4c9['log'][_0x8f3f13(0x259)](_0x8f3f13(0x23b));else{if(_0x102964[_0x8f3f13(0x228)]===_0x8f3f13(0x25c)){const {anomaly_score:_0x2bd424,is_anomaly:_0x33b56f,threshold:_0x2a571c,explanation:_0x1b76ea}=_0x102964['payload'];_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x229),{'val':_0x2bd424,'ack':!![]}),_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x22a),{'val':new Date()[_0x8f3f13(0x223)](),'ack':!![]});if(_0x2a571c)_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x1fa),{'val':_0x2a571c,'ack':!![]});if(_0x33b56f){let _0x3c9e13=_0x8f3f13(0x249)+_0x2bd424[_0x8f3f13(0x218)](0x4)+')';if(_0x1b76ea&&_0x1b76ea!==_0x8f3f13(0x204))_0x3c9e13+=_0x8f3f13(0x21f)+_0x1b76ea;_0x4ff4c9['setStateAsync'](_0x8f3f13(0x221),{'val':!![],'ack':!![]}),_0x4ff4c9[_0x8f3f13(0x22b)]('analysis.alertReason',{'val':_0x3c9e13,'ack':!![]}),setup['sendNotification'](_0x4ff4c9,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x3c9e13,![],!![]);}}else{if(_0x102964[_0x8f3f13(0x228)]===_0x8f3f13(0x254)){const _0x47942b=_0x102964[_0x8f3f13(0x21c)][_0x8f3f13(0x243)]||'',_0x4880ac=_0x102964[_0x8f3f13(0x21c)][_0x8f3f13(0x202)],_0x31347f=_0x102964[_0x8f3f13(0x21c)][_0x8f3f13(0x1f6)]?_0x8f3f13(0x203)+new Date()['toLocaleTimeString']()+'\x20('+_0x47942b+')':'Failed:\x20'+_0x102964[_0x8f3f13(0x21c)][_0x8f3f13(0x248)];_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x1f7),{'val':_0x31347f,'ack':!![]});if(_0x102964['payload'][_0x8f3f13(0x1f6)]&&_0x4880ac)_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x1fa),{'val':_0x4880ac,'ack':!![]});}else{if(_0x102964[_0x8f3f13(0x228)]==='ENERGY_TRAIN_RESULT'){if(_0x102964[_0x8f3f13(0x21c)][_0x8f3f13(0x1f6)])try{const _0x3d4266=JSON[_0x8f3f13(0x1f4)](_0x102964[_0x8f3f13(0x21c)]['details']);if(_0x3d4266[_0x8f3f13(0x22f)])_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x23a),{'val':JSON[_0x8f3f13(0x24b)](_0x3d4266[_0x8f3f13(0x22f)]),'ack':!![]});if(_0x3d4266[_0x8f3f13(0x232)])_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x242),{'val':JSON[_0x8f3f13(0x24b)](_0x3d4266['heating']),'ack':!![]});}catch(_0x27050d){}}else{if(_0x102964['type']===_0x8f3f13(0x20f)){if(_0x102964[_0x8f3f13(0x21c)][_0x8f3f13(0x1f6)]){_0x4ff4c9[_0x8f3f13(0x253)][_0x8f3f13(0x216)](_0x8f3f13(0x24f));const _0x51c90e=new Date(),_0x713fad=_0x51c90e['toLocaleDateString'](_0x8f3f13(0x201),{'day':'2-digit','month':'short','hour':_0x8f3f13(0x24d),'minute':_0x8f3f13(0x24d)});_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x21a),{'val':_0x713fad,'ack':!![]});}}else{if(_0x102964[_0x8f3f13(0x228)]===_0x8f3f13(0x20c)){const _0x5c8f1c=new Date(),_0x2ec6c0=_0x5c8f1c[_0x8f3f13(0x24c)](_0x8f3f13(0x201),{'day':'2-digit','month':_0x8f3f13(0x260),'hour':_0x8f3f13(0x24d),'minute':'2-digit'});_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x21a),{'val':_0x2ec6c0,'ack':!![]}),_0x4ff4c9[_0x8f3f13(0x22b)]('analysis.health.isAnomaly',{'val':_0x102964[_0x8f3f13(0x21c)]['is_anomaly'],'ack':!![]});}else{if(_0x102964[_0x8f3f13(0x228)]===_0x8f3f13(0x207)){const {trend_percent:_0x53426a,details:_0xee1d88}=_0x102964['payload'],_0x22cfa0=new Date(),_0x33b0d6=_0x22cfa0[_0x8f3f13(0x24c)](_0x8f3f13(0x201),{'day':_0x8f3f13(0x24d),'month':_0x8f3f13(0x260),'hour':'2-digit','minute':_0x8f3f13(0x24d)});_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x21a),{'val':_0x33b0d6,'ack':!![]}),_0x4ff4c9['setStateAsync'](_0x8f3f13(0x226),{'val':_0x53426a,'ack':!![]}),_0x4ff4c9[_0x8f3f13(0x253)]['info'](_0x8f3f13(0x21d)+_0xee1d88);}else{if(_0x102964[_0x8f3f13(0x228)]===_0x8f3f13(0x22c)){const {speed_trend:_0x25db42,sensors:_0x55a56c,proof:_0x4778f7}=_0x102964['payload'];if(_0x25db42!==undefined)_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x23d),{'val':_0x25db42,'ack':!![]});if(_0x55a56c&&Array[_0x8f3f13(0x239)](_0x55a56c))_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x20e),{'val':_0x55a56c[_0x8f3f13(0x227)](',\x20'),'ack':!![]});if(_0x4778f7)_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x24a),{'val':_0x4778f7,'ack':!![]});}else{if(_0x102964[_0x8f3f13(0x228)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x4b8b96}=_0x102964['payload'];if(_0x4b8b96)_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x261),{'val':JSON[_0x8f3f13(0x24b)](_0x4b8b96),'ack':!![]});}else{if(_0x102964['type']===_0x8f3f13(0x230)){const {times:_0x252313,sources:_0xab0889,details:_0x1efaab}=_0x102964['payload'];if(_0x252313)_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x252),{'val':JSON[_0x8f3f13(0x24b)](_0x252313),'ack':!![]});if(_0xab0889)_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x205),{'val':JSON[_0x8f3f13(0x24b)](_0xab0889),'ack':!![]});if(_0x1efaab)_0x4ff4c9['setStateAsync'](_0x8f3f13(0x217),{'val':JSON[_0x8f3f13(0x24b)](_0x1efaab),'ack':!![]});}else{if(_0x102964[_0x8f3f13(0x228)]===_0x8f3f13(0x214)){const {penalties:_0x3f7a04}=_0x102964[_0x8f3f13(0x21c)];if(_0x3f7a04)_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x25b),{'val':JSON[_0x8f3f13(0x24b)](_0x3f7a04),'ack':!![]});}else{if(_0x102964['type']==='PINN_PREDICT_RESULT'){const {forecast:_0x4f4d98}=_0x102964[_0x8f3f13(0x21c)];if(_0x4f4d98)_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x1fb),{'val':JSON['stringify'](_0x4f4d98),'ack':!![]});}else{if(_0x102964['type']===_0x8f3f13(0x212)){const {alerts:_0x1953b5}=_0x102964[_0x8f3f13(0x21c)];if(_0x1953b5)_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x25f),{'val':JSON[_0x8f3f13(0x24b)](_0x1953b5),'ack':!![]});}else{if(_0x102964['type']===_0x8f3f13(0x23e)){const {proposals:_0x22ddb7}=_0x102964[_0x8f3f13(0x21c)];_0x4ff4c9[_0x8f3f13(0x21e)](_0x8f3f13(0x24e),(_0x25fb11,_0x437a36)=>{const _0x53098e=_0x8f3f13;_0x437a36&&_0x437a36[_0x53098e(0x208)]===!![]&&_0x22ddb7&&_0x22ddb7[_0x53098e(0x258)]>0x0&&automation['applyEnergySavings'](_0x4ff4c9,_0x22ddb7);});}else{if(_0x102964[_0x8f3f13(0x228)]==='SIGNAL_RESULT'){const {room:_0x3d5e0a,propagation:_0x518b1e}=_0x102964[_0x8f3f13(0x21c)];let _0x2d2a2f=_0x8f3f13(0x204),_0x4c3697=0x0;if(_0x518b1e){const _0x8f7af=Object[_0x8f3f13(0x200)](_0x518b1e);_0x8f7af['length']>0x0&&(_0x2d2a2f=_0x8f7af[0x0][0x0],_0x4c3697=_0x8f7af[0x0][0x1]);}_0x4ff4c9[_0x8f3f13(0x22b)]('analysis.prediction.nextRoom',{'val':_0x2d2a2f,'ack':!![]}),_0x4ff4c9[_0x8f3f13(0x22b)]('analysis.prediction.confidence',{'val':_0x4c3697,'ack':!![]}),automation['handlePrediction'](_0x4ff4c9,_0x2d2a2f,_0x4c3697);}else{if(_0x102964['type']==='TRACKER_RESULT'){const {probabilities:_0x528846}=_0x102964[_0x8f3f13(0x21c)];if(_0x528846){_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x20d),{'val':JSON[_0x8f3f13(0x24b)](_0x528846),'ack':!![]});const _0x541ece=Object['keys'](_0x528846);if(_0x541ece[_0x8f3f13(0x258)]>0x0){const _0x32e3f1=_0x541ece[0x0],_0x401367=_0x528846[_0x32e3f1];_0x4ff4c9[_0x8f3f13(0x22b)]('analysis.prediction.trackerTopRoom',{'val':_0x32e3f1,'ack':!![]}),_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x224),{'val':_0x401367,'ack':!![]});}}}else{if(_0x102964[_0x8f3f13(0x228)]==='COMFORT_RESULT'){const {patterns:_0x235fa6}=_0x102964[_0x8f3f13(0x21c)];if(_0x235fa6&&_0x235fa6[_0x8f3f13(0x258)]>0x0)_0x4ff4c9[_0x8f3f13(0x22b)](_0x8f3f13(0x210),{'val':JSON[_0x8f3f13(0x24b)](_0x235fa6),'ack':!![]});}}}}}}}}}}}}}}}}}}function startService(_0x3a3741,_0x8bf78f){const _0x1cb173=a4_0x1dd419;let _0x1144e9='python3';if(fs[_0x1cb173(0x20a)](_0x8bf78f))_0x1144e9=_0x8bf78f;const _0x2e0e4c=path[_0x1cb173(0x227)](__dirname,'..',_0x1cb173(0x22d)),_0x3b6208=path[_0x1cb173(0x227)](__dirname,'..',_0x1cb173(0x240),_0x1cb173(0x22d));let _0x2825d5='';if(fs[_0x1cb173(0x20a)](_0x2e0e4c))_0x2825d5=_0x2e0e4c;else{if(fs[_0x1cb173(0x20a)](_0x3b6208))_0x2825d5=_0x3b6208;else{_0x3a3741[_0x1cb173(0x253)]['error'](_0x1cb173(0x238)+_0x2e0e4c+_0x1cb173(0x1f5)+_0x3b6208+_0x1cb173(0x1fd));return;}}try{_0x3a3741[_0x1cb173(0x253)][_0x1cb173(0x216)](_0x1cb173(0x244)+_0x1144e9+'\x20'+_0x2825d5),pythonProcess=spawn(_0x1144e9,[_0x2825d5]),pythonProcess[_0x1cb173(0x23c)]['on'](_0x1cb173(0x215),_0x410fd6=>{const _0x4f20cc=_0x1cb173,_0x5505f5=_0x410fd6[_0x4f20cc(0x233)]()['split']('\x0a');_0x5505f5['forEach'](_0x1ca499=>{const _0x1d8751=_0x4f20cc,_0x24d14f=_0x1ca499[_0x1d8751(0x256)]();if(!_0x24d14f)return;if(_0x24d14f[_0x1d8751(0x209)](_0x1d8751(0x245)))_0x3a3741[_0x1d8751(0x253)]['debug'](_0x1d8751(0x1fe)+_0x24d14f[_0x1d8751(0x257)](0x5)[_0x1d8751(0x256)]());else{if(_0x24d14f[_0x1d8751(0x209)](_0x1d8751(0x22e)))try{const _0x5d4221=JSON['parse'](_0x24d14f[_0x1d8751(0x257)](0x8)[_0x1d8751(0x256)]());handleResult(_0x3a3741,_0x5d4221);}catch(_0xd6b59e){}}});}),pythonProcess[_0x1cb173(0x236)]['on']('data',_0x2d6c27=>{const _0x1c4eee=_0x1cb173;_0x3a3741[_0x1c4eee(0x253)][_0x1c4eee(0x211)](_0x1c4eee(0x20b)+_0x2d6c27[_0x1c4eee(0x233)]()[_0x1c4eee(0x256)]());}),pythonProcess['on'](_0x1cb173(0x25e),_0x16a6d4=>{const _0x159a9f=_0x1cb173;_0x3a3741['log'][_0x159a9f(0x1fc)](_0x159a9f(0x1f8)+_0x16a6d4),pythonProcess=null;}),_0x3a3741[_0x1cb173(0x220)]=(_0xc3f578,_0x16162c)=>send(_0x3a3741,_0xc3f578,_0x16162c);}catch(_0x371b1f){_0x3a3741[_0x1cb173(0x253)][_0x1cb173(0x211)](_0x1cb173(0x25d)+_0x371b1f['message']);}}function stopService(_0x336856){const _0x416fcd=a4_0x1dd419;if(pythonProcess){try{pythonProcess[_0x416fcd(0x234)]();}catch(_0x5b2b0b){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};