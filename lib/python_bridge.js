const a4_0x39335f=a4_0x2f89;(function(_0x57006e,_0x137481){const _0x3fbe28=a4_0x2f89,_0x35458d=_0x57006e();while(!![]){try{const _0x36f1d6=parseInt(_0x3fbe28(0x104))/0x1+-parseInt(_0x3fbe28(0x108))/0x2+parseInt(_0x3fbe28(0xef))/0x3+-parseInt(_0x3fbe28(0xf3))/0x4*(-parseInt(_0x3fbe28(0x138))/0x5)+parseInt(_0x3fbe28(0x12a))/0x6+-parseInt(_0x3fbe28(0x12d))/0x7+-parseInt(_0x3fbe28(0x14e))/0x8;if(_0x36f1d6===_0x137481)break;else _0x35458d['push'](_0x35458d['shift']());}catch(_0x41a6a5){_0x35458d['push'](_0x35458d['shift']());}}}(a4_0x208d,0x6817b));const a4_0x23898d=(function(){let _0x5e32aa=!![];return function(_0xac4f6,_0x2278fc){const _0x31c34b=_0x5e32aa?function(){if(_0x2278fc){const _0x4f5883=_0x2278fc['apply'](_0xac4f6,arguments);return _0x2278fc=null,_0x4f5883;}}:function(){};return _0x5e32aa=![],_0x31c34b;};}()),a4_0x23e722=a4_0x23898d(this,function(){const _0x32d7ec=a4_0x2f89;return a4_0x23e722[_0x32d7ec(0x13a)]()[_0x32d7ec(0xf2)](_0x32d7ec(0x151))[_0x32d7ec(0x13a)]()[_0x32d7ec(0xe1)](a4_0x23e722)[_0x32d7ec(0xf2)]('(((.+)+)+)+$');});function a4_0x2f89(_0x5d6758,_0x326349){const _0x2d4238=a4_0x208d();return a4_0x2f89=function(_0x23e722,_0x23898d){_0x23e722=_0x23e722-0xcc;let _0x208d89=_0x2d4238[_0x23e722];return _0x208d89;},a4_0x2f89(_0x5d6758,_0x326349);}a4_0x23e722();function a4_0x208d(){const _0x4f0ccc=['Gateway\x20Unpack\x20Error:\x20','error','val','analysis.prediction.trackerState','COMFORT_RESULT','getState','WARMUP_RESULT','[Bridge-Debug]\x20Normalized\x20Sequence\x20[0]\x20(Unpacked):\x20','info','stderr','object','analysis.isAlert','Graph\x20Updated\x20(','constructor','Unknown','times','PONG','threshold','length','current_temps','analysis.automation.detectedPatterns','forEach','substring','HEALTH_TRAIN_RESULT','HEALTH_RESULT','analysis.prediction.nextRoom','setStateAsync','689469mxmOBp','penalties','[Bridge-Debug]\x20Raw\x20Sequence\x20[0]:\x20','search','11488RLIfFI','loc','applyEnergySavings','analysis.health.gaitSensors','data','steps','heating','SECURITY_RESULT','analysis.energy.insulationScore','toISOString','analysis.security.lastCheck','debug','slice','trend_percent','[RESULT]','speed_trend','patterns','274743YdSVVa','isArray','startsWith','RL_PENALTY_UPDATE','711668OjHgiG','path','...','./setup','existsSync','analysis.energy.heatingScore','sendToPythonWrapper','analysis.energy.rlPenalties','HEALTH_TREND_RESULT','stdin','ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20','TRAIN_SECURITY','reason','forecast','normalizeRoomId','entries','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','GRAPH_TRAINED','monitored','ðŸ“ˆ\x20Health\x20Trend:\x20','join','writable','keys','analysis.health.gaitDebug','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!','./automation','sources','trim','proof','analysis.alertReason','analysis.security.currentThreshold','alerts','SET_TOPOLOGY','Python\x20process\x20exited\x20with\x20code\x20','3062268HToZqM','\x0aGrund:\x20','string','828513CYQSXS','type','analysis.energy.forecast','stdout','split','analysis.energy.warmupTimes','kill','Error\x20launching\x20Python:\x20','ðŸ\x20Python\x20Pong','ENERGY_TRAIN_RESULT','analysis.energy.warmupSources','1145qznUYq','write','toString','analysis.security.lastScore','room','analysis.prediction.trackerTopRoom','ENERGY_OPTIMIZE_RESULT','exports','analysis.energy.ventilationAlerts','log','analysis.energy.warmupDetails','service.py','rooms','PINN_PREDICT_RESULT','payload','analysis.energy.pinnForecast','[Bridge-Debug]\x20Setting\x20Topology\x20Rooms\x20(Sample):\x20','GAIT_RESULT','analysis.health.activityTrend','location','python3','map','6176608KiNGEC','analysis.health.gaitSpeed','parse','(((.+)+)+)+$','details','warn','toLocaleDateString','TRACKER_RESULT','success','sensors','toFixed','sequences','is_anomaly','stringify'];a4_0x208d=function(){return _0x4f0ccc;};return a4_0x208d();}'use strict';const {spawn}=require('child_process'),path=require(a4_0x39335f(0x109)),fs=require('fs'),setup=require(a4_0x39335f(0x10b)),automation=require(a4_0x39335f(0x121));let pythonProcess=null;function send(_0x1e6cc0,_0x4c3b3b,_0x1fd992={}){const _0xdb076=a4_0x39335f;if(!pythonProcess||!pythonProcess[_0xdb076(0x111)][_0xdb076(0x11d)])return;if(_0x4c3b3b===_0xdb076(0x128)){const _0x323074=JSON['parse'](JSON[_0xdb076(0xd3)](_0x1fd992));_0x323074[_0xdb076(0x144)]&&Array[_0xdb076(0x105)](_0x323074[_0xdb076(0x144)])&&(_0x323074[_0xdb076(0x144)]=_0x323074[_0xdb076(0x144)]['map'](_0x22a5ea=>setup[_0xdb076(0x116)](_0x22a5ea)),_0x1e6cc0[_0xdb076(0x141)][_0xdb076(0xdc)](_0xdb076(0x148)+_0x323074[_0xdb076(0x144)][_0xdb076(0xff)](0x0,0x3)[_0xdb076(0x11c)](',\x20')+_0xdb076(0x10a))),_0x323074[_0xdb076(0x11a)]&&Array[_0xdb076(0x105)](_0x323074[_0xdb076(0x11a)])&&(_0x323074['monitored']=_0x323074[_0xdb076(0x11a)]['map'](_0x253bd7=>setup[_0xdb076(0x116)](_0x253bd7))),_0x1fd992=_0x323074;}if((_0x4c3b3b==='TRAIN_TOPOLOGY'||_0x4c3b3b===_0xdb076(0x113))&&_0x1fd992[_0xdb076(0xd1)]){if(Array[_0xdb076(0x105)](_0x1fd992['sequences']))try{_0x1fd992[_0xdb076(0xd1)][_0xdb076(0xe6)]>0x0&&_0x1e6cc0[_0xdb076(0x141)][_0xdb076(0xfe)](_0xdb076(0xf1)+JSON['stringify'](_0x1fd992['sequences'][0x0])['substring'](0x0,0x64)+_0xdb076(0x10a)),_0x1fd992['sequences']=_0x1fd992[_0xdb076(0xd1)]['map'](_0x323c8d=>{const _0x808f56=_0xdb076;if(_0x323c8d&&_0x323c8d[_0x808f56(0xf8)]&&Array[_0x808f56(0x105)](_0x323c8d[_0x808f56(0xf8)]))return _0x323c8d[_0x808f56(0xf8)][_0x808f56(0x14d)](_0x372ab4=>{const _0x51af67=_0x808f56,_0x246c77=_0x372ab4[_0x51af67(0xf4)]||_0x372ab4[_0x51af67(0x14b)]||_0x372ab4;return setup[_0x51af67(0x116)](_0x246c77);});else{if(Array[_0x808f56(0x105)](_0x323c8d))return _0x323c8d[_0x808f56(0x14d)](_0x38ee6a=>setup[_0x808f56(0x116)](_0x38ee6a));}return[];}),_0x1fd992[_0xdb076(0xd1)][_0xdb076(0xe6)]>0x0&&_0x1e6cc0[_0xdb076(0x141)][_0xdb076(0xdc)](_0xdb076(0xdb)+JSON[_0xdb076(0xd3)](_0x1fd992[_0xdb076(0xd1)][0x0]));}catch(_0x2a7066){_0x1e6cc0[_0xdb076(0x141)][_0xdb076(0x153)](_0xdb076(0xd4)+_0x2a7066['message']),_0x1fd992[_0xdb076(0xd1)]=[];}else _0x1fd992['sequences']=[];}_0x1fd992['room']&&typeof _0x1fd992['room']===_0xdb076(0x12c)&&(_0x1fd992['room']=setup[_0xdb076(0x116)](_0x1fd992[_0xdb076(0x13c)]));if(_0x1fd992['current_temps']&&typeof _0x1fd992[_0xdb076(0xe7)]===_0xdb076(0xde)){const _0x3d2b03={};for(const [_0x566c9c,_0x338e2a]of Object[_0xdb076(0x117)](_0x1fd992[_0xdb076(0xe7)]))_0x3d2b03[setup[_0xdb076(0x116)](_0x566c9c)]=_0x338e2a;_0x1fd992['current_temps']=_0x3d2b03;}const _0x3827ac=JSON['stringify']({'command':_0x4c3b3b,..._0x1fd992});try{pythonProcess['stdin'][_0xdb076(0x139)](_0x3827ac+'\x0a');}catch(_0x554c33){}}function handleResult(_0x43602e,_0x1d6103){const _0x17473b=a4_0x39335f;if(_0x1d6103[_0x17473b(0x12e)]===_0x17473b(0xe4))_0x43602e[_0x17473b(0x141)]['debug'](_0x17473b(0x135));else{if(_0x1d6103['type']===_0x17473b(0xfa)){const {anomaly_score:_0x23f386,is_anomaly:_0x54fd8a,threshold:_0x51d062,explanation:_0x3ec813}=_0x1d6103['payload'];_0x43602e[_0x17473b(0xee)](_0x17473b(0x13b),{'val':_0x23f386,'ack':!![]}),_0x43602e[_0x17473b(0xee)](_0x17473b(0xfd),{'val':new Date()[_0x17473b(0xfc)](),'ack':!![]});if(_0x51d062)_0x43602e[_0x17473b(0xee)](_0x17473b(0x126),{'val':_0x51d062,'ack':!![]});if(_0x54fd8a){let _0x485ad9=_0x17473b(0x118)+_0x23f386[_0x17473b(0xd0)](0x4)+')';if(_0x3ec813&&_0x3ec813!==_0x17473b(0xe2))_0x485ad9+=_0x17473b(0x12b)+_0x3ec813;_0x43602e[_0x17473b(0xee)](_0x17473b(0xdf),{'val':!![],'ack':!![]}),_0x43602e['setStateAsync'](_0x17473b(0x125),{'val':_0x485ad9,'ack':!![]}),setup['sendNotification'](_0x43602e,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x485ad9,![],!![]);}}else{if(_0x1d6103[_0x17473b(0x12e)]==='TRAINING_COMPLETE'){const _0x466084=_0x1d6103[_0x17473b(0x146)][_0x17473b(0x152)]||'',_0x540fe4=_0x1d6103['payload'][_0x17473b(0xe5)],_0x50ff25=_0x1d6103[_0x17473b(0x146)][_0x17473b(0xce)]?'Success:\x20'+new Date()['toLocaleTimeString']()+'\x20('+_0x466084+')':'Failed:\x20'+_0x1d6103[_0x17473b(0x146)][_0x17473b(0x114)];_0x43602e['setStateAsync']('analysis.training.status',{'val':_0x50ff25,'ack':!![]});if(_0x1d6103[_0x17473b(0x146)][_0x17473b(0xce)]&&_0x540fe4)_0x43602e[_0x17473b(0xee)](_0x17473b(0x126),{'val':_0x540fe4,'ack':!![]});}else{if(_0x1d6103[_0x17473b(0x12e)]===_0x17473b(0x119)){const _0xaf55c7=_0x17473b(0xe0)+_0x1d6103[_0x17473b(0x146)][_0x17473b(0x144)][_0x17473b(0xe6)]+'\x20Rooms)';_0x43602e['setStateAsync']('analysis.training.status',{'val':_0xaf55c7,'ack':!![]}),_0x1d6103[_0x17473b(0x146)]['matrix']&&_0x1d6103['payload'][_0x17473b(0x144)]&&_0x43602e[_0x17473b(0xee)]('analysis.security.topologyMatrix',{'val':JSON[_0x17473b(0xd3)](_0x1d6103[_0x17473b(0x146)]),'ack':!![]});}else{if(_0x1d6103['type']===_0x17473b(0x136)){if(_0x1d6103[_0x17473b(0x146)][_0x17473b(0xce)])try{const _0x46ffbd=JSON[_0x17473b(0x150)](_0x1d6103[_0x17473b(0x146)][_0x17473b(0x152)]);if(_0x46ffbd['insulation'])_0x43602e[_0x17473b(0xee)](_0x17473b(0xfb),{'val':JSON[_0x17473b(0xd3)](_0x46ffbd['insulation']),'ack':!![]});if(_0x46ffbd[_0x17473b(0xf9)])_0x43602e['setStateAsync'](_0x17473b(0x10d),{'val':JSON[_0x17473b(0xd3)](_0x46ffbd[_0x17473b(0xf9)]),'ack':!![]});}catch(_0x3f8c2b){}}else{if(_0x1d6103[_0x17473b(0x12e)]===_0x17473b(0xeb))_0x43602e[_0x17473b(0x141)][_0x17473b(0xdc)]('âœ…\x20HEALTH\x20TRAINED.'),_0x43602e['setStateAsync']('analysis.health.lastCheck',{'val':new Date()[_0x17473b(0xcc)](),'ack':!![]});else{if(_0x1d6103[_0x17473b(0x12e)]===_0x17473b(0xec))_0x43602e[_0x17473b(0xee)]('analysis.health.isAnomaly',{'val':_0x1d6103[_0x17473b(0x146)][_0x17473b(0xd2)],'ack':!![]});else{if(_0x1d6103[_0x17473b(0x12e)]===_0x17473b(0x110))_0x43602e[_0x17473b(0xee)](_0x17473b(0x14a),{'val':_0x1d6103[_0x17473b(0x146)][_0x17473b(0x100)],'ack':!![]}),_0x43602e[_0x17473b(0x141)][_0x17473b(0xdc)](_0x17473b(0x11b)+_0x1d6103[_0x17473b(0x146)]['details']);else{if(_0x1d6103[_0x17473b(0x12e)]===_0x17473b(0x149)){if(_0x1d6103[_0x17473b(0x146)]['speed_trend']!==undefined)_0x43602e[_0x17473b(0xee)](_0x17473b(0x14f),{'val':_0x1d6103[_0x17473b(0x146)][_0x17473b(0x102)],'ack':!![]});if(_0x1d6103[_0x17473b(0x146)]['sensors'])_0x43602e[_0x17473b(0xee)](_0x17473b(0xf6),{'val':_0x1d6103[_0x17473b(0x146)][_0x17473b(0xcf)]['join'](',\x20'),'ack':!![]});if(_0x1d6103['payload'][_0x17473b(0x124)])_0x43602e['setStateAsync'](_0x17473b(0x11f),{'val':_0x1d6103[_0x17473b(0x146)][_0x17473b(0x124)],'ack':!![]});}else{if(_0x1d6103[_0x17473b(0x12e)]==='ENERGY_PREDICT_RESULT'){if(_0x1d6103[_0x17473b(0x146)][_0x17473b(0x115)])_0x43602e[_0x17473b(0xee)](_0x17473b(0x12f),{'val':JSON[_0x17473b(0xd3)](_0x1d6103[_0x17473b(0x146)][_0x17473b(0x115)]),'ack':!![]});}else{if(_0x1d6103[_0x17473b(0x12e)]===_0x17473b(0xda)){if(_0x1d6103['payload'][_0x17473b(0xe3)])_0x43602e[_0x17473b(0xee)](_0x17473b(0x132),{'val':JSON['stringify'](_0x1d6103['payload'][_0x17473b(0xe3)]),'ack':!![]});if(_0x1d6103['payload'][_0x17473b(0x122)])_0x43602e[_0x17473b(0xee)](_0x17473b(0x137),{'val':JSON[_0x17473b(0xd3)](_0x1d6103[_0x17473b(0x146)][_0x17473b(0x122)]),'ack':!![]});if(_0x1d6103[_0x17473b(0x146)]['details'])_0x43602e[_0x17473b(0xee)](_0x17473b(0x142),{'val':JSON[_0x17473b(0xd3)](_0x1d6103[_0x17473b(0x146)][_0x17473b(0x152)]),'ack':!![]});}else{if(_0x1d6103[_0x17473b(0x12e)]===_0x17473b(0x107)){if(_0x1d6103[_0x17473b(0x146)]['penalties'])_0x43602e[_0x17473b(0xee)](_0x17473b(0x10f),{'val':JSON['stringify'](_0x1d6103[_0x17473b(0x146)][_0x17473b(0xf0)]),'ack':!![]});}else{if(_0x1d6103[_0x17473b(0x12e)]===_0x17473b(0x145)){if(_0x1d6103[_0x17473b(0x146)][_0x17473b(0x115)])_0x43602e[_0x17473b(0xee)](_0x17473b(0x147),{'val':JSON[_0x17473b(0xd3)](_0x1d6103[_0x17473b(0x146)][_0x17473b(0x115)]),'ack':!![]});}else{if(_0x1d6103['type']==='VENTILATION_ALERT'){if(_0x1d6103[_0x17473b(0x146)][_0x17473b(0x127)])_0x43602e[_0x17473b(0xee)](_0x17473b(0x140),{'val':JSON[_0x17473b(0xd3)](_0x1d6103[_0x17473b(0x146)]['alerts']),'ack':!![]});}else{if(_0x1d6103['type']===_0x17473b(0x13e)){const {proposals:_0x2af466}=_0x1d6103[_0x17473b(0x146)];_0x43602e[_0x17473b(0xd9)]('analysis.energy.mpcActive',(_0x33abe2,_0x180d50)=>{const _0x294289=_0x17473b;if(_0x180d50&&_0x180d50[_0x294289(0xd6)]===!![]&&_0x2af466&&_0x2af466[_0x294289(0xe6)]>0x0)automation[_0x294289(0xf5)](_0x43602e,_0x2af466);});}else{if(_0x1d6103[_0x17473b(0x12e)]==='SIGNAL_RESULT'){const {propagation:_0x227f88}=_0x1d6103[_0x17473b(0x146)];let _0x39f686=_0x17473b(0xe2),_0x51dbb7=0x0;if(_0x227f88){const _0x300242=Object['entries'](_0x227f88);_0x300242['length']>0x0&&(_0x39f686=_0x300242[0x0][0x0],_0x51dbb7=_0x300242[0x0][0x1]);}_0x43602e[_0x17473b(0xee)](_0x17473b(0xed),{'val':_0x39f686,'ack':!![]}),_0x43602e['setStateAsync']('analysis.prediction.confidence',{'val':_0x51dbb7,'ack':!![]}),automation['handlePrediction'](_0x43602e,_0x39f686,_0x51dbb7);}else{if(_0x1d6103[_0x17473b(0x12e)]===_0x17473b(0xcd)){const {probabilities:_0x3f6111}=_0x1d6103[_0x17473b(0x146)];if(_0x3f6111){_0x43602e[_0x17473b(0xee)](_0x17473b(0xd7),{'val':JSON[_0x17473b(0xd3)](_0x3f6111),'ack':!![]});const _0x4ee958=Object[_0x17473b(0x11e)](_0x3f6111);_0x4ee958[_0x17473b(0xe6)]>0x0&&(_0x43602e['setStateAsync'](_0x17473b(0x13d),{'val':_0x4ee958[0x0],'ack':!![]}),_0x43602e[_0x17473b(0xee)]('analysis.prediction.trackerConfidence',{'val':_0x3f6111[_0x4ee958[0x0]],'ack':!![]}));}}else{if(_0x1d6103[_0x17473b(0x12e)]===_0x17473b(0xd8)){if(_0x1d6103[_0x17473b(0x146)][_0x17473b(0x103)])_0x43602e[_0x17473b(0xee)](_0x17473b(0xe8),{'val':JSON[_0x17473b(0xd3)](_0x1d6103[_0x17473b(0x146)]['patterns']),'ack':!![]});}}}}}}}}}}}}}}}}}}}function startService(_0x383e99,_0x3bf4f6){const _0x47fac0=a4_0x39335f;let _0x1fb96c=_0x47fac0(0x14c);if(fs['existsSync'](_0x3bf4f6))_0x1fb96c=_0x3bf4f6;const _0x208351=path[_0x47fac0(0x11c)](__dirname,'..',_0x47fac0(0x143)),_0x335903=path[_0x47fac0(0x11c)](__dirname,'..','python_service',_0x47fac0(0x143));let _0x34f408=fs[_0x47fac0(0x10c)](_0x208351)?_0x208351:fs[_0x47fac0(0x10c)](_0x335903)?_0x335903:null;if(!_0x34f408){_0x383e99[_0x47fac0(0x141)][_0x47fac0(0xd5)](_0x47fac0(0x120));return;}try{_0x383e99['log'][_0x47fac0(0xdc)](_0x47fac0(0x112)+_0x1fb96c+'\x20'+_0x34f408),pythonProcess=spawn(_0x1fb96c,[_0x34f408]),pythonProcess[_0x47fac0(0x130)]['on'](_0x47fac0(0xf7),_0x2fa1fb=>{const _0x4bc2a3=_0x47fac0,_0x837333=_0x2fa1fb[_0x4bc2a3(0x13a)]()[_0x4bc2a3(0x131)]('\x0a');_0x837333[_0x4bc2a3(0xe9)](_0x1453e3=>{const _0x2a8fb6=_0x4bc2a3,_0x33fc77=_0x1453e3[_0x2a8fb6(0x123)]();if(!_0x33fc77)return;if(_0x33fc77[_0x2a8fb6(0x106)]('[LOG]'))_0x383e99[_0x2a8fb6(0x141)][_0x2a8fb6(0xfe)]('[PYTHON]\x20'+_0x33fc77[_0x2a8fb6(0xea)](0x5)[_0x2a8fb6(0x123)]());else{if(_0x33fc77[_0x2a8fb6(0x106)](_0x2a8fb6(0x101)))try{const _0x359efb=JSON[_0x2a8fb6(0x150)](_0x33fc77['substring'](0x8)[_0x2a8fb6(0x123)]());handleResult(_0x383e99,_0x359efb);}catch(_0x40a5b4){}}});}),pythonProcess[_0x47fac0(0xdd)]['on'](_0x47fac0(0xf7),_0x3a5fcb=>{const _0x3144a6=_0x47fac0;_0x383e99[_0x3144a6(0x141)][_0x3144a6(0xd5)]('[PYTHON\x20ERR]\x20'+_0x3a5fcb['toString']()[_0x3144a6(0x123)]());}),pythonProcess['on']('close',_0x8f451b=>{const _0x1bdc1=_0x47fac0;_0x383e99[_0x1bdc1(0x141)][_0x1bdc1(0x153)](_0x1bdc1(0x129)+_0x8f451b),pythonProcess=null;}),_0x383e99[_0x47fac0(0x10e)]=(_0x3b7b39,_0x1d2f6e)=>send(_0x383e99,_0x3b7b39,_0x1d2f6e);}catch(_0x6e6968){_0x383e99[_0x47fac0(0x141)][_0x47fac0(0xd5)](_0x47fac0(0x134)+_0x6e6968['message']);}}function stopService(_0x1d945b){const _0x5a7af8=a4_0x39335f;if(pythonProcess){try{pythonProcess[_0x5a7af8(0x133)]();}catch(_0x1441b7){}pythonProcess=null;}}module[a4_0x39335f(0x13f)]={'startService':startService,'stopService':stopService,'send':send};