const a4_0x1105f7=a4_0x356e;function a4_0x59c9(){const _0x1f4827=['sendToPythonWrapper','âœ…\x20HEALTH\x20TRAINED.','heating','apply','HEALTH_TREND_RESULT','val','details','WARMUP_RESULT','search','keys','ðŸ“ˆ\x20Health\x20Trend:\x20','info','toLocaleDateString','5rVZFBZ','analysis.prediction.trackerState','stdout','GAIT_RESULT','trim','analysis.health.isAnomaly','analysis.prediction.trackerTopRoom','constructor','analysis.energy.warmupTimes','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20','analysis.energy.warmupSources','child_process','1221025wjsjBJ','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','forEach','analysis.health.activityTrend','analysis.health.lastCheck','HEALTH_TRAIN_RESULT','success','length','294022SOshLS','ENERGY_TRAIN_RESULT','stdin','Failed:\x20','./automation','existsSync','SECURITY_RESULT','stringify','isArray','[PYTHON]\x20','PONG','[LOG]','analysis.security.lastScore','analysis.security.currentThreshold','warn','analysis.health.gaitSensors','14VcicPN','data','analysis.energy.forecast','[RESULT]','insulation','80oHrHkT','log','analysis.energy.mpcActive','analysis.health.gaitSpeed','626139wJgTns','toString','analysis.alertReason','\x0aGrund:\x20','kill','write','analysis.energy.insulationScore','1853464ivtGWx','PINN_PREDICT_RESULT','analysis.prediction.nextRoom','TRACKER_RESULT','python3','[PYTHON\x20ERR]\x20','SIGNAL_RESULT','analysis.energy.warmupDetails','ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20','analysis.prediction.trackerConfidence','.\x20Please\x20create\x20this\x20file!','analysis.security.lastCheck','debug','2-digit','1165938aCxpUL','stderr','HEALTH_RESULT','22299ldPagB','ENERGY_PREDICT_RESULT','getState','type','entries','toFixed','Unknown','exports','message','applyEnergySavings','analysis.health.gaitDebug','split','ðŸ\x20Python\x20Pong','Error\x20launching\x20Python:\x20','substring','is_anomaly','analysis.energy.ventilationAlerts','de-DE','setStateAsync','writable','parse','28783788pHIpGo','(((.+)+)+)+$','error','analysis.automation.detectedPatterns','./setup','analysis.training.status','threshold','startsWith','payload','\x20AND\x20','toISOString','short','reason','ENERGY_OPTIMIZE_RESULT','8NhxKlv','analysis.isAlert','analysis.energy.heatingScore','join','toLocaleTimeString'];a4_0x59c9=function(){return _0x1f4827;};return a4_0x59c9();}function a4_0x356e(_0x584add,_0xabf1d0){const _0x2bacbf=a4_0x59c9();return a4_0x356e=function(_0x41673d,_0x2faadb){_0x41673d=_0x41673d-0x1d7;let _0x59c97b=_0x2bacbf[_0x41673d];return _0x59c97b;},a4_0x356e(_0x584add,_0xabf1d0);}(function(_0x2190ed,_0x387ee3){const _0xd0f354=a4_0x356e,_0x2c8bef=_0x2190ed();while(!![]){try{const _0x268f09=-parseInt(_0xd0f354(0x1dd))/0x1*(parseInt(_0xd0f354(0x1f1))/0x2)+-parseInt(_0xd0f354(0x222))/0x3*(-parseInt(_0xd0f354(0x245))/0x4)+-parseInt(_0xd0f354(0x1e9))/0x5+-parseInt(_0xd0f354(0x21f))/0x6+-parseInt(_0xd0f354(0x201))/0x7*(parseInt(_0xd0f354(0x211))/0x8)+parseInt(_0xd0f354(0x20a))/0x9*(-parseInt(_0xd0f354(0x206))/0xa)+parseInt(_0xd0f354(0x237))/0xb;if(_0x268f09===_0x387ee3)break;else _0x2c8bef['push'](_0x2c8bef['shift']());}catch(_0x4931e1){_0x2c8bef['push'](_0x2c8bef['shift']());}}}(a4_0x59c9,0x6af29));const a4_0x2faadb=(function(){let _0x4819f9=!![];return function(_0x10374b,_0x58e37a){const _0x5aabb0=_0x4819f9?function(){const _0x429cd=a4_0x356e;if(_0x58e37a){const _0x4bdb60=_0x58e37a[_0x429cd(0x24d)](_0x10374b,arguments);return _0x58e37a=null,_0x4bdb60;}}:function(){};return _0x4819f9=![],_0x5aabb0;};}()),a4_0x41673d=a4_0x2faadb(this,function(){const _0x23f356=a4_0x356e;return a4_0x41673d[_0x23f356(0x20b)]()[_0x23f356(0x1d8)](_0x23f356(0x238))[_0x23f356(0x20b)]()[_0x23f356(0x1e4)](a4_0x41673d)[_0x23f356(0x1d8)]('(((.+)+)+)+$');});a4_0x41673d();'use strict';const {spawn}=require(a4_0x1105f7(0x1e8)),path=require('path'),fs=require('fs'),setup=require(a4_0x1105f7(0x23b)),automation=require(a4_0x1105f7(0x1f5));let pythonProcess=null;function send(_0x7a47b6,_0x94f1bb,_0x317610={}){const _0x2c5581=a4_0x1105f7;if(!pythonProcess||!pythonProcess[_0x2c5581(0x1f3)][_0x2c5581(0x235)])return;const _0x5082d9=JSON[_0x2c5581(0x1f8)]({'command':_0x94f1bb,..._0x317610});try{pythonProcess[_0x2c5581(0x1f3)][_0x2c5581(0x20f)](_0x5082d9+'\x0a');}catch(_0x11efee){}}function handleResult(_0x233690,_0x3e41aa){const _0x53b361=a4_0x1105f7;if(_0x3e41aa[_0x53b361(0x225)]===_0x53b361(0x1fb))_0x233690[_0x53b361(0x207)][_0x53b361(0x21d)](_0x53b361(0x22e));else{if(_0x3e41aa[_0x53b361(0x225)]===_0x53b361(0x1f7)){const {anomaly_score:_0x1e452f,is_anomaly:_0x3bfe49,threshold:_0x37bbc8,explanation:_0x55d51f}=_0x3e41aa[_0x53b361(0x23f)];_0x233690[_0x53b361(0x234)](_0x53b361(0x1fd),{'val':_0x1e452f,'ack':!![]}),_0x233690[_0x53b361(0x234)](_0x53b361(0x21c),{'val':new Date()[_0x53b361(0x241)](),'ack':!![]});if(_0x37bbc8)_0x233690[_0x53b361(0x234)](_0x53b361(0x1fe),{'val':_0x37bbc8,'ack':!![]});if(_0x3bfe49){let _0xd7a565=_0x53b361(0x1ea)+_0x1e452f[_0x53b361(0x227)](0x4)+')';if(_0x55d51f&&_0x55d51f!==_0x53b361(0x228))_0xd7a565+=_0x53b361(0x20d)+_0x55d51f;_0x233690[_0x53b361(0x234)](_0x53b361(0x246),{'val':!![],'ack':!![]}),_0x233690[_0x53b361(0x234)](_0x53b361(0x20c),{'val':_0xd7a565,'ack':!![]}),setup['sendNotification'](_0x233690,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0xd7a565,![],!![]);}}else{if(_0x3e41aa[_0x53b361(0x225)]==='TRAINING_COMPLETE'){const _0x482168=_0x3e41aa[_0x53b361(0x23f)]['details']||'',_0x32e33a=_0x3e41aa[_0x53b361(0x23f)][_0x53b361(0x23d)],_0x152b38=_0x3e41aa[_0x53b361(0x23f)][_0x53b361(0x1ef)]?'Success:\x20'+new Date()[_0x53b361(0x249)]()+'\x20('+_0x482168+')':_0x53b361(0x1f4)+_0x3e41aa[_0x53b361(0x23f)][_0x53b361(0x243)];_0x233690[_0x53b361(0x234)](_0x53b361(0x23c),{'val':_0x152b38,'ack':!![]});if(_0x3e41aa[_0x53b361(0x23f)][_0x53b361(0x1ef)]&&_0x32e33a)_0x233690[_0x53b361(0x234)]('analysis.security.currentThreshold',{'val':_0x32e33a,'ack':!![]});}else{if(_0x3e41aa['type']===_0x53b361(0x1f2)){if(_0x3e41aa['payload']['success'])try{const _0x54006a=JSON[_0x53b361(0x236)](_0x3e41aa[_0x53b361(0x23f)][_0x53b361(0x250)]);if(_0x54006a[_0x53b361(0x205)])_0x233690[_0x53b361(0x234)](_0x53b361(0x210),{'val':JSON[_0x53b361(0x1f8)](_0x54006a[_0x53b361(0x205)]),'ack':!![]});if(_0x54006a[_0x53b361(0x24c)])_0x233690['setStateAsync'](_0x53b361(0x247),{'val':JSON[_0x53b361(0x1f8)](_0x54006a[_0x53b361(0x24c)]),'ack':!![]});}catch(_0x59345a){}}else{if(_0x3e41aa[_0x53b361(0x225)]===_0x53b361(0x1ee)){if(_0x3e41aa[_0x53b361(0x23f)][_0x53b361(0x1ef)]){_0x233690[_0x53b361(0x207)][_0x53b361(0x1db)](_0x53b361(0x24b));const _0x54e32c=new Date(),_0xd4c098=_0x54e32c[_0x53b361(0x1dc)](_0x53b361(0x233),{'day':_0x53b361(0x21e),'month':_0x53b361(0x242),'hour':'2-digit','minute':_0x53b361(0x21e)});_0x233690[_0x53b361(0x234)](_0x53b361(0x1ed),{'val':_0xd4c098,'ack':!![]});}}else{if(_0x3e41aa[_0x53b361(0x225)]===_0x53b361(0x221)){const _0x2ee4f2=new Date(),_0x35fa7a=_0x2ee4f2[_0x53b361(0x1dc)](_0x53b361(0x233),{'day':_0x53b361(0x21e),'month':_0x53b361(0x242),'hour':_0x53b361(0x21e),'minute':'2-digit'});_0x233690[_0x53b361(0x234)](_0x53b361(0x1ed),{'val':_0x35fa7a,'ack':!![]}),_0x233690['setStateAsync'](_0x53b361(0x1e2),{'val':_0x3e41aa['payload'][_0x53b361(0x231)],'ack':!![]});}else{if(_0x3e41aa[_0x53b361(0x225)]===_0x53b361(0x24e)){const {trend_percent:_0x3bfca9,details:_0x49a405}=_0x3e41aa[_0x53b361(0x23f)],_0x5c1449=new Date(),_0x36b233=_0x5c1449[_0x53b361(0x1dc)]('de-DE',{'day':'2-digit','month':_0x53b361(0x242),'hour':'2-digit','minute':_0x53b361(0x21e)});_0x233690[_0x53b361(0x234)](_0x53b361(0x1ed),{'val':_0x36b233,'ack':!![]}),_0x233690[_0x53b361(0x234)](_0x53b361(0x1ec),{'val':_0x3bfca9,'ack':!![]}),_0x233690[_0x53b361(0x207)]['info'](_0x53b361(0x1da)+_0x49a405);}else{if(_0x3e41aa[_0x53b361(0x225)]===_0x53b361(0x1e0)){const {speed_trend:_0x5b4c07,sensors:_0x50158f,proof:_0x4aa49f}=_0x3e41aa[_0x53b361(0x23f)];if(_0x5b4c07!==undefined)_0x233690[_0x53b361(0x234)](_0x53b361(0x209),{'val':_0x5b4c07,'ack':!![]});if(_0x50158f&&Array[_0x53b361(0x1f9)](_0x50158f))_0x233690[_0x53b361(0x234)](_0x53b361(0x200),{'val':_0x50158f['join'](',\x20'),'ack':!![]});if(_0x4aa49f)_0x233690[_0x53b361(0x234)](_0x53b361(0x22c),{'val':_0x4aa49f,'ack':!![]});}else{if(_0x3e41aa['type']===_0x53b361(0x223)){const {forecast:_0x438219}=_0x3e41aa[_0x53b361(0x23f)];if(_0x438219)_0x233690[_0x53b361(0x234)](_0x53b361(0x203),{'val':JSON[_0x53b361(0x1f8)](_0x438219),'ack':!![]});}else{if(_0x3e41aa[_0x53b361(0x225)]===_0x53b361(0x1d7)){const {times:_0x2caf9c,sources:_0x3f9da0,details:_0x19e74f}=_0x3e41aa[_0x53b361(0x23f)];if(_0x2caf9c)_0x233690[_0x53b361(0x234)](_0x53b361(0x1e5),{'val':JSON[_0x53b361(0x1f8)](_0x2caf9c),'ack':!![]});if(_0x3f9da0)_0x233690[_0x53b361(0x234)](_0x53b361(0x1e7),{'val':JSON[_0x53b361(0x1f8)](_0x3f9da0),'ack':!![]});if(_0x19e74f)_0x233690[_0x53b361(0x234)](_0x53b361(0x218),{'val':JSON[_0x53b361(0x1f8)](_0x19e74f),'ack':!![]});}else{if(_0x3e41aa['type']==='RL_PENALTY_UPDATE'){const {penalties:_0x2dc978}=_0x3e41aa[_0x53b361(0x23f)];if(_0x2dc978)_0x233690['setStateAsync']('analysis.energy.rlPenalties',{'val':JSON['stringify'](_0x2dc978),'ack':!![]});}else{if(_0x3e41aa[_0x53b361(0x225)]===_0x53b361(0x212)){const {forecast:_0x4763ce}=_0x3e41aa[_0x53b361(0x23f)];if(_0x4763ce)_0x233690[_0x53b361(0x234)]('analysis.energy.pinnForecast',{'val':JSON[_0x53b361(0x1f8)](_0x4763ce),'ack':!![]});}else{if(_0x3e41aa['type']==='VENTILATION_ALERT'){const {alerts:_0x40327f}=_0x3e41aa[_0x53b361(0x23f)];if(_0x40327f)_0x233690[_0x53b361(0x234)](_0x53b361(0x232),{'val':JSON[_0x53b361(0x1f8)](_0x40327f),'ack':!![]});}else{if(_0x3e41aa[_0x53b361(0x225)]===_0x53b361(0x244)){const {proposals:_0x38cff2}=_0x3e41aa[_0x53b361(0x23f)];_0x233690[_0x53b361(0x224)](_0x53b361(0x208),(_0x221273,_0x466966)=>{const _0x60c12f=_0x53b361;_0x466966&&_0x466966[_0x60c12f(0x24f)]===!![]&&_0x38cff2&&_0x38cff2[_0x60c12f(0x1f0)]>0x0&&automation[_0x60c12f(0x22b)](_0x233690,_0x38cff2);});}else{if(_0x3e41aa[_0x53b361(0x225)]===_0x53b361(0x217)){const {room:_0x45fc43,propagation:_0x4a3147}=_0x3e41aa[_0x53b361(0x23f)];let _0x5431f7='Unknown',_0xd850f8=0x0;if(_0x4a3147){const _0x4f187c=Object[_0x53b361(0x226)](_0x4a3147);_0x4f187c[_0x53b361(0x1f0)]>0x0&&(_0x5431f7=_0x4f187c[0x0][0x0],_0xd850f8=_0x4f187c[0x0][0x1]);}_0x233690['setStateAsync'](_0x53b361(0x213),{'val':_0x5431f7,'ack':!![]}),_0x233690[_0x53b361(0x234)]('analysis.prediction.confidence',{'val':_0xd850f8,'ack':!![]}),automation['handlePrediction'](_0x233690,_0x5431f7,_0xd850f8);}else{if(_0x3e41aa['type']===_0x53b361(0x214)){const {probabilities:_0x388a31}=_0x3e41aa[_0x53b361(0x23f)];if(_0x388a31){_0x233690[_0x53b361(0x234)](_0x53b361(0x1de),{'val':JSON[_0x53b361(0x1f8)](_0x388a31),'ack':!![]});const _0x277b13=Object[_0x53b361(0x1d9)](_0x388a31);if(_0x277b13[_0x53b361(0x1f0)]>0x0){const _0x1844aa=_0x277b13[0x0],_0x5099b5=_0x388a31[_0x1844aa];_0x233690[_0x53b361(0x234)](_0x53b361(0x1e3),{'val':_0x1844aa,'ack':!![]}),_0x233690[_0x53b361(0x234)](_0x53b361(0x21a),{'val':_0x5099b5,'ack':!![]});}}}else{if(_0x3e41aa['type']==='COMFORT_RESULT'){const {patterns:_0x410f38}=_0x3e41aa[_0x53b361(0x23f)];if(_0x410f38&&_0x410f38[_0x53b361(0x1f0)]>0x0)_0x233690['setStateAsync'](_0x53b361(0x23a),{'val':JSON['stringify'](_0x410f38),'ack':!![]});}}}}}}}}}}}}}}}}}}function startService(_0x49e9b0,_0x4b6e34){const _0xbe2dd1=a4_0x1105f7;let _0x557598=_0xbe2dd1(0x215);if(fs['existsSync'](_0x4b6e34))_0x557598=_0x4b6e34;const _0x4d981f=path[_0xbe2dd1(0x248)](__dirname,'..','service.py'),_0x5e57d3=path[_0xbe2dd1(0x248)](__dirname,'..','python_service','service.py');let _0x508d91='';if(fs[_0xbe2dd1(0x1f6)](_0x4d981f))_0x508d91=_0x4d981f;else{if(fs[_0xbe2dd1(0x1f6)](_0x5e57d3))_0x508d91=_0x5e57d3;else{_0x49e9b0[_0xbe2dd1(0x207)][_0xbe2dd1(0x239)](_0xbe2dd1(0x1e6)+_0x4d981f+_0xbe2dd1(0x240)+_0x5e57d3+_0xbe2dd1(0x21b));return;}}try{_0x49e9b0[_0xbe2dd1(0x207)]['info'](_0xbe2dd1(0x219)+_0x557598+'\x20'+_0x508d91),pythonProcess=spawn(_0x557598,[_0x508d91]),pythonProcess[_0xbe2dd1(0x1df)]['on'](_0xbe2dd1(0x202),_0x59d1c1=>{const _0x3cba45=_0xbe2dd1,_0x306a31=_0x59d1c1[_0x3cba45(0x20b)]()[_0x3cba45(0x22d)]('\x0a');_0x306a31[_0x3cba45(0x1eb)](_0x505b28=>{const _0x266dd2=_0x3cba45,_0x4a149b=_0x505b28['trim']();if(!_0x4a149b)return;if(_0x4a149b[_0x266dd2(0x23e)](_0x266dd2(0x1fc)))_0x49e9b0[_0x266dd2(0x207)][_0x266dd2(0x21d)](_0x266dd2(0x1fa)+_0x4a149b[_0x266dd2(0x230)](0x5)[_0x266dd2(0x1e1)]());else{if(_0x4a149b['startsWith'](_0x266dd2(0x204)))try{const _0x3938c7=JSON['parse'](_0x4a149b[_0x266dd2(0x230)](0x8)[_0x266dd2(0x1e1)]());handleResult(_0x49e9b0,_0x3938c7);}catch(_0x300d9f){}}});}),pythonProcess[_0xbe2dd1(0x220)]['on']('data',_0x37713d=>{const _0x52e851=_0xbe2dd1;_0x49e9b0['log'][_0x52e851(0x239)](_0x52e851(0x216)+_0x37713d[_0x52e851(0x20b)]()[_0x52e851(0x1e1)]());}),pythonProcess['on']('close',_0x1ae4a9=>{const _0x43e317=_0xbe2dd1;_0x49e9b0[_0x43e317(0x207)][_0x43e317(0x1ff)]('Python\x20process\x20exited\x20with\x20code\x20'+_0x1ae4a9),pythonProcess=null;}),_0x49e9b0[_0xbe2dd1(0x24a)]=(_0x19c074,_0x1732a8)=>send(_0x49e9b0,_0x19c074,_0x1732a8);}catch(_0x949d62){_0x49e9b0[_0xbe2dd1(0x207)][_0xbe2dd1(0x239)](_0xbe2dd1(0x22f)+_0x949d62[_0xbe2dd1(0x22a)]);}}function stopService(_0x38dde9){const _0x5fe90f=a4_0x1105f7;if(pythonProcess){try{pythonProcess[_0x5fe90f(0x20e)]();}catch(_0x428e04){}pythonProcess=null;}}module[a4_0x1105f7(0x229)]={'startService':startService,'stopService':stopService,'send':send};