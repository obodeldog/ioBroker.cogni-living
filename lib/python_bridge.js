const a4_0x552213=a4_0x287c;(function(_0x2c1c04,_0x5339f6){const _0x571049=a4_0x287c,_0x135362=_0x2c1c04();while(!![]){try{const _0x988431=-parseInt(_0x571049(0x1c1))/0x1*(parseInt(_0x571049(0x1cf))/0x2)+parseInt(_0x571049(0x20f))/0x3*(parseInt(_0x571049(0x1e4))/0x4)+parseInt(_0x571049(0x200))/0x5*(parseInt(_0x571049(0x1ee))/0x6)+parseInt(_0x571049(0x1f1))/0x7*(parseInt(_0x571049(0x1e1))/0x8)+parseInt(_0x571049(0x1f2))/0x9*(parseInt(_0x571049(0x1d8))/0xa)+parseInt(_0x571049(0x1f9))/0xb+parseInt(_0x571049(0x1d6))/0xc*(-parseInt(_0x571049(0x212))/0xd);if(_0x988431===_0x5339f6)break;else _0x135362['push'](_0x135362['shift']());}catch(_0x1071af){_0x135362['push'](_0x135362['shift']());}}}(a4_0x33a7,0x63458));function a4_0x33a7(){const _0x20ef85=['toLocaleTimeString','stringify','[PYTHON]\x20','analysis.energy.rlPenalties','TRACKER_RESULT','SIGNAL_RESULT','analysis.security.lastScore','entries','analysis.energy.insulationScore','GAIT_RESULT','analysis.security.currentThreshold','VENTILATION_ALERT','HEALTH_RESULT','analysis.prediction.nextRoom','constructor','analysis.security.lastCheck','python_service','is_anomaly','service.py','success','stdin','1HZaMVs','parse','length','existsSync','message','analysis.alertReason','analysis.health.lastCheck','analysis.prediction.confidence','type','setStateAsync','TRAINING_COMPLETE','Success:\x20','data','heating','1473914FdvoRA','python3','reason','RL_PENALTY_UPDATE','applyEnergySavings','analysis.health.isAnomaly','(((.+)+)+)+$','6907920RkimGj','val','3997930hyoZwb','COMFORT_RESULT','log','substring','sendNotification','analysis.prediction.trackerTopRoom','PONG','apply','toFixed','18912VFXzng','threshold','writable','155096gUkZnu','analysis.automation.detectedPatterns','close','trim','analysis.energy.warmupDetails','PINN_PREDICT_RESULT','analysis.energy.pinnForecast','join','analysis.prediction.trackerState','./automation','6XJWbuE','toISOString','âœ…\x20HEALTH\x20TRAINED.','189kKUZBT','9hmMAqO','keys','HEALTH_TRAIN_RESULT','analysis.energy.mpcActive','forEach','âš ï¸\x20SECURITY\x20ALARM:\x20','analysis.training.status','2991395sVrSdN','Failed:\x20','[RESULT]','toString','analysis.prediction.trackerConfidence','analysis.energy.warmupSources','analysis.isAlert','3948985GwLssG','info','split','sendToPythonWrapper','debug','getState','Unknown','./setup','startsWith','kill','ENERGY_TRAIN_RESULT','payload','[LOG]','analysis.energy.warmupTimes','analysis.energy.heatingScore','15mZzMsp','search','error','13waMOAM'];a4_0x33a7=function(){return _0x20ef85;};return a4_0x33a7();}const a4_0x2aee79=(function(){let _0xe4746c=!![];return function(_0x306f09,_0x4e39a1){const _0x4a8221=_0xe4746c?function(){const _0x346bac=a4_0x287c;if(_0x4e39a1){const _0x4dfdd4=_0x4e39a1[_0x346bac(0x1df)](_0x306f09,arguments);return _0x4e39a1=null,_0x4dfdd4;}}:function(){};return _0xe4746c=![],_0x4a8221;};}()),a4_0x39ede7=a4_0x2aee79(this,function(){const _0x2f1581=a4_0x287c;return a4_0x39ede7['toString']()[_0x2f1581(0x210)](_0x2f1581(0x1d5))['toString']()[_0x2f1581(0x1ba)](a4_0x39ede7)[_0x2f1581(0x210)](_0x2f1581(0x1d5));});a4_0x39ede7();'use strict';const {spawn}=require('child_process'),path=require('path'),fs=require('fs'),setup=require(a4_0x552213(0x207)),automation=require(a4_0x552213(0x1ed));let pythonProcess=null;function send(_0x57e3e3,_0x570fbe,_0xb16d71={}){const _0x5695a1=a4_0x552213;if(!pythonProcess||!pythonProcess['stdin'][_0x5695a1(0x1e3)])return;const _0x357530=JSON[_0x5695a1(0x214)]({'command':_0x570fbe,..._0xb16d71});try{pythonProcess[_0x5695a1(0x1c0)]['write'](_0x357530+'\x0a');}catch(_0x31266b){}}function a4_0x287c(_0x3b89f1,_0x15c502){const _0x52641d=a4_0x33a7();return a4_0x287c=function(_0x39ede7,_0x2aee79){_0x39ede7=_0x39ede7-0x1b1;let _0x33a7f9=_0x52641d[_0x39ede7];return _0x33a7f9;},a4_0x287c(_0x3b89f1,_0x15c502);}function handleResult(_0x11bb30,_0x496f0c){const _0x2a0b6b=a4_0x552213;if(_0x496f0c[_0x2a0b6b(0x1c9)]===_0x2a0b6b(0x1de))_0x11bb30[_0x2a0b6b(0x1da)][_0x2a0b6b(0x204)]('ðŸ\x20Python\x20Pong');else{if(_0x496f0c[_0x2a0b6b(0x1c9)]==='SECURITY_RESULT'){const {anomaly_score:_0x5c4635,is_anomaly:_0x4f48ac,threshold:_0x2b2e14,explanation:_0x568d38}=_0x496f0c[_0x2a0b6b(0x20b)];_0x11bb30[_0x2a0b6b(0x1ca)](_0x2a0b6b(0x1b2),{'val':_0x5c4635,'ack':!![]}),_0x11bb30['setStateAsync'](_0x2a0b6b(0x1bb),{'val':new Date()[_0x2a0b6b(0x1ef)](),'ack':!![]});if(_0x2b2e14)_0x11bb30[_0x2a0b6b(0x1ca)]('analysis.security.currentThreshold',{'val':_0x2b2e14,'ack':!![]});if(_0x4f48ac){let _0x36e8c9='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x5c4635[_0x2a0b6b(0x1e0)](0x4)+')';if(_0x568d38&&_0x568d38!=='Unknown')_0x36e8c9+='\x0aGrund:\x20'+_0x568d38;_0x11bb30[_0x2a0b6b(0x1ca)](_0x2a0b6b(0x1ff),{'val':!![],'ack':!![]}),_0x11bb30[_0x2a0b6b(0x1ca)](_0x2a0b6b(0x1c6),{'val':_0x36e8c9,'ack':!![]}),setup[_0x2a0b6b(0x1dc)](_0x11bb30,_0x2a0b6b(0x1f7)+_0x36e8c9,![],!![]);}}else{if(_0x496f0c[_0x2a0b6b(0x1c9)]===_0x2a0b6b(0x1cb)){const _0x3b7d93=_0x496f0c['payload']['details']||'',_0x2b6005=_0x496f0c[_0x2a0b6b(0x20b)][_0x2a0b6b(0x1e2)],_0x50268a=_0x496f0c[_0x2a0b6b(0x20b)][_0x2a0b6b(0x1bf)]?_0x2a0b6b(0x1cc)+new Date()[_0x2a0b6b(0x213)]()+'\x20('+_0x3b7d93+')':_0x2a0b6b(0x1fa)+_0x496f0c[_0x2a0b6b(0x20b)][_0x2a0b6b(0x1d1)];_0x11bb30['setStateAsync'](_0x2a0b6b(0x1f8),{'val':_0x50268a,'ack':!![]});if(_0x496f0c['payload']['success']&&_0x2b6005)_0x11bb30['setStateAsync'](_0x2a0b6b(0x1b6),{'val':_0x2b6005,'ack':!![]});}else{if(_0x496f0c[_0x2a0b6b(0x1c9)]===_0x2a0b6b(0x20a)){if(_0x496f0c[_0x2a0b6b(0x20b)][_0x2a0b6b(0x1bf)])try{const _0x26e4f7=JSON[_0x2a0b6b(0x1c2)](_0x496f0c[_0x2a0b6b(0x20b)]['details']);if(_0x26e4f7['insulation'])_0x11bb30[_0x2a0b6b(0x1ca)](_0x2a0b6b(0x1b4),{'val':JSON['stringify'](_0x26e4f7['insulation']),'ack':!![]});if(_0x26e4f7[_0x2a0b6b(0x1ce)])_0x11bb30[_0x2a0b6b(0x1ca)](_0x2a0b6b(0x20e),{'val':JSON[_0x2a0b6b(0x214)](_0x26e4f7['heating']),'ack':!![]});}catch(_0x388606){}}else{if(_0x496f0c[_0x2a0b6b(0x1c9)]===_0x2a0b6b(0x1f4)){if(_0x496f0c[_0x2a0b6b(0x20b)][_0x2a0b6b(0x1bf)])_0x11bb30[_0x2a0b6b(0x1da)][_0x2a0b6b(0x201)](_0x2a0b6b(0x1f0));}else{if(_0x496f0c[_0x2a0b6b(0x1c9)]===_0x2a0b6b(0x1b8))_0x11bb30[_0x2a0b6b(0x1ca)](_0x2a0b6b(0x1c7),{'val':new Date()['toISOString'](),'ack':!![]}),_0x11bb30['setStateAsync'](_0x2a0b6b(0x1d4),{'val':_0x496f0c[_0x2a0b6b(0x20b)][_0x2a0b6b(0x1bd)],'ack':!![]});else{if(_0x496f0c[_0x2a0b6b(0x1c9)]===_0x2a0b6b(0x1b5)){const {speed_trend:_0x3ed993}=_0x496f0c[_0x2a0b6b(0x20b)];if(_0x3ed993!==undefined)_0x11bb30[_0x2a0b6b(0x1ca)]('analysis.health.gaitSpeed',{'val':_0x3ed993,'ack':!![]});}else{if(_0x496f0c[_0x2a0b6b(0x1c9)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x722a9b}=_0x496f0c['payload'];if(_0x722a9b)_0x11bb30['setStateAsync']('analysis.energy.forecast',{'val':JSON[_0x2a0b6b(0x214)](_0x722a9b),'ack':!![]});}else{if(_0x496f0c['type']==='WARMUP_RESULT'){const {times:_0x3895a6,sources:_0x33b778,details:_0x189271}=_0x496f0c[_0x2a0b6b(0x20b)];if(_0x3895a6)_0x11bb30[_0x2a0b6b(0x1ca)](_0x2a0b6b(0x20d),{'val':JSON[_0x2a0b6b(0x214)](_0x3895a6),'ack':!![]});if(_0x33b778)_0x11bb30[_0x2a0b6b(0x1ca)](_0x2a0b6b(0x1fe),{'val':JSON[_0x2a0b6b(0x214)](_0x33b778),'ack':!![]});if(_0x189271)_0x11bb30[_0x2a0b6b(0x1ca)](_0x2a0b6b(0x1e8),{'val':JSON[_0x2a0b6b(0x214)](_0x189271),'ack':!![]});}else{if(_0x496f0c[_0x2a0b6b(0x1c9)]===_0x2a0b6b(0x1d2)){const {penalties:_0x50ac3a}=_0x496f0c[_0x2a0b6b(0x20b)];if(_0x50ac3a)_0x11bb30[_0x2a0b6b(0x1ca)](_0x2a0b6b(0x216),{'val':JSON['stringify'](_0x50ac3a),'ack':!![]});}else{if(_0x496f0c[_0x2a0b6b(0x1c9)]===_0x2a0b6b(0x1e9)){const {forecast:_0x238d98}=_0x496f0c[_0x2a0b6b(0x20b)];if(_0x238d98)_0x11bb30[_0x2a0b6b(0x1ca)](_0x2a0b6b(0x1ea),{'val':JSON[_0x2a0b6b(0x214)](_0x238d98),'ack':!![]});}else{if(_0x496f0c['type']===_0x2a0b6b(0x1b7)){const {alerts:_0x4c1d3e}=_0x496f0c['payload'];if(_0x4c1d3e)_0x11bb30[_0x2a0b6b(0x1ca)]('analysis.energy.ventilationAlerts',{'val':JSON[_0x2a0b6b(0x214)](_0x4c1d3e),'ack':!![]});}else{if(_0x496f0c['type']==='ENERGY_OPTIMIZE_RESULT'){const {proposals:_0x168150}=_0x496f0c[_0x2a0b6b(0x20b)];_0x11bb30[_0x2a0b6b(0x205)](_0x2a0b6b(0x1f5),(_0x4b0eac,_0x5ee698)=>{const _0x51367f=_0x2a0b6b;_0x5ee698&&_0x5ee698[_0x51367f(0x1d7)]===!![]&&_0x168150&&_0x168150['length']>0x0&&automation[_0x51367f(0x1d3)](_0x11bb30,_0x168150);});}else{if(_0x496f0c['type']===_0x2a0b6b(0x1b1)){const {room:_0x3d49b2,propagation:_0x539568}=_0x496f0c[_0x2a0b6b(0x20b)];let _0x38c45d=_0x2a0b6b(0x206),_0x2854fb=0x0;if(_0x539568){const _0x5ef211=Object[_0x2a0b6b(0x1b3)](_0x539568);_0x5ef211[_0x2a0b6b(0x1c3)]>0x0&&(_0x38c45d=_0x5ef211[0x0][0x0],_0x2854fb=_0x5ef211[0x0][0x1]);}_0x11bb30[_0x2a0b6b(0x1ca)](_0x2a0b6b(0x1b9),{'val':_0x38c45d,'ack':!![]}),_0x11bb30[_0x2a0b6b(0x1ca)](_0x2a0b6b(0x1c8),{'val':_0x2854fb,'ack':!![]}),automation['handlePrediction'](_0x11bb30,_0x38c45d,_0x2854fb);}else{if(_0x496f0c['type']===_0x2a0b6b(0x217)){const {probabilities:_0x54f706}=_0x496f0c[_0x2a0b6b(0x20b)];if(_0x54f706){_0x11bb30[_0x2a0b6b(0x1ca)](_0x2a0b6b(0x1ec),{'val':JSON[_0x2a0b6b(0x214)](_0x54f706),'ack':!![]});const _0x245242=Object[_0x2a0b6b(0x1f3)](_0x54f706);if(_0x245242['length']>0x0){const _0xcf768=_0x245242[0x0],_0x245e4c=_0x54f706[_0xcf768];_0x11bb30[_0x2a0b6b(0x1ca)](_0x2a0b6b(0x1dd),{'val':_0xcf768,'ack':!![]}),_0x11bb30[_0x2a0b6b(0x1ca)](_0x2a0b6b(0x1fd),{'val':_0x245e4c,'ack':!![]});}}}else{if(_0x496f0c[_0x2a0b6b(0x1c9)]===_0x2a0b6b(0x1d9)){const {patterns:_0x4961e3}=_0x496f0c[_0x2a0b6b(0x20b)];if(_0x4961e3&&_0x4961e3[_0x2a0b6b(0x1c3)]>0x0)_0x11bb30[_0x2a0b6b(0x1ca)](_0x2a0b6b(0x1e5),{'val':JSON[_0x2a0b6b(0x214)](_0x4961e3),'ack':!![]});}}}}}}}}}}}}}}}}}function startService(_0x599ca6,_0x2d4935){const _0x194804=a4_0x552213;let _0x190130=_0x194804(0x1d0);if(fs[_0x194804(0x1c4)](_0x2d4935))_0x190130=_0x2d4935;try{const _0x52e4a7=path[_0x194804(0x1eb)](__dirname,'..',_0x194804(0x1bc),_0x194804(0x1be));pythonProcess=spawn(_0x190130,[_0x52e4a7]),pythonProcess['stdout']['on'](_0x194804(0x1cd),_0x43027f=>{const _0x51ea1b=_0x194804,_0x2afd7c=_0x43027f[_0x51ea1b(0x1fc)]()[_0x51ea1b(0x202)]('\x0a');_0x2afd7c[_0x51ea1b(0x1f6)](_0x130a94=>{const _0x330d14=_0x51ea1b,_0x5b8038=_0x130a94[_0x330d14(0x1e7)]();if(!_0x5b8038)return;if(_0x5b8038[_0x330d14(0x208)](_0x330d14(0x20c)))_0x599ca6[_0x330d14(0x1da)][_0x330d14(0x204)](_0x330d14(0x215)+_0x5b8038[_0x330d14(0x1db)](0x5)[_0x330d14(0x1e7)]());else{if(_0x5b8038[_0x330d14(0x208)](_0x330d14(0x1fb)))try{const _0x565f95=JSON['parse'](_0x5b8038[_0x330d14(0x1db)](0x8)[_0x330d14(0x1e7)]());handleResult(_0x599ca6,_0x565f95);}catch(_0x3b5420){}}});}),pythonProcess['on'](_0x194804(0x1e6),_0x33c601=>{pythonProcess=null;}),_0x599ca6[_0x194804(0x203)]=(_0x6185b4,_0x65d6ad)=>send(_0x599ca6,_0x6185b4,_0x65d6ad);}catch(_0x3d343a){_0x599ca6[_0x194804(0x1da)][_0x194804(0x211)]('Error\x20launching\x20Python:\x20'+_0x3d343a[_0x194804(0x1c5)]);}}function stopService(_0x2fc909){const _0x1bcef3=a4_0x552213;if(pythonProcess){try{pythonProcess[_0x1bcef3(0x209)]();}catch(_0x2edaaf){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};