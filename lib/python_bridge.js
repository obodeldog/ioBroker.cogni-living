const a4_0x43453a=a4_0xbc6c;(function(_0x3216b9,_0x2b7c64){const _0xb016c7=a4_0xbc6c,_0x49f007=_0x3216b9();while(!![]){try{const _0x4ea3ef=-parseInt(_0xb016c7(0xac))/0x1+parseInt(_0xb016c7(0x9b))/0x2*(-parseInt(_0xb016c7(0x9a))/0x3)+-parseInt(_0xb016c7(0xa2))/0x4*(-parseInt(_0xb016c7(0x86))/0x5)+-parseInt(_0xb016c7(0x8d))/0x6*(parseInt(_0xb016c7(0x98))/0x7)+-parseInt(_0xb016c7(0xc9))/0x8+-parseInt(_0xb016c7(0x95))/0x9+-parseInt(_0xb016c7(0x6f))/0xa*(-parseInt(_0xb016c7(0xb9))/0xb);if(_0x4ea3ef===_0x2b7c64)break;else _0x49f007['push'](_0x49f007['shift']());}catch(_0x998a40){_0x49f007['push'](_0x49f007['shift']());}}}(a4_0x2bab,0x905b4));function a4_0xbc6c(_0x175b1d,_0x412faf){const _0x8fe989=a4_0x2bab();return a4_0xbc6c=function(_0x50c334,_0x4d5124){_0x50c334=_0x50c334-0x6f;let _0x2babe4=_0x8fe989[_0x50c334];return _0x2babe4;},a4_0xbc6c(_0x175b1d,_0x412faf);}const a4_0x4d5124=(function(){let _0x3cd500=!![];return function(_0x4c911e,_0x4e83f6){const _0x5993cb=_0x3cd500?function(){const _0x439ddc=a4_0xbc6c;if(_0x4e83f6){const _0xfc3f1d=_0x4e83f6[_0x439ddc(0x70)](_0x4c911e,arguments);return _0x4e83f6=null,_0xfc3f1d;}}:function(){};return _0x3cd500=![],_0x5993cb;};}()),a4_0x50c334=a4_0x4d5124(this,function(){const _0x2d7a6a=a4_0xbc6c;return a4_0x50c334['toString']()[_0x2d7a6a(0xa0)](_0x2d7a6a(0x9d))[_0x2d7a6a(0xb6)]()['constructor'](a4_0x50c334)[_0x2d7a6a(0xa0)](_0x2d7a6a(0x9d));});a4_0x50c334();'use strict';const {spawn}=require(a4_0x43453a(0x79)),path=require(a4_0x43453a(0xb3)),fs=require('fs'),setup=require(a4_0x43453a(0xc3)),automation=require(a4_0x43453a(0xbe));let pythonProcess=null;function send(_0x15adad,_0x1dd9c7,_0x1d1726={}){const _0x36519d=a4_0x43453a;if(!pythonProcess||!pythonProcess[_0x36519d(0x76)][_0x36519d(0xcd)])return;const _0x4b5375=JSON[_0x36519d(0x90)]({'command':_0x1dd9c7,..._0x1d1726});try{pythonProcess[_0x36519d(0x76)][_0x36519d(0xa5)](_0x4b5375+'\x0a');}catch(_0x7035af){}}function handleResult(_0x35951c,_0x2ea0ee){const _0xaa3be4=a4_0x43453a;if(_0x2ea0ee[_0xaa3be4(0xb8)]===_0xaa3be4(0xad))_0x35951c['log'][_0xaa3be4(0x89)](_0xaa3be4(0x80));else{if(_0x2ea0ee[_0xaa3be4(0xb8)]===_0xaa3be4(0xc1)){const {anomaly_score:_0x2e6e6b,is_anomaly:_0x3b13b7,threshold:_0x4ac55d,explanation:_0x3d1f0c}=_0x2ea0ee['payload'];_0x35951c[_0xaa3be4(0x84)](_0xaa3be4(0x85),{'val':_0x2e6e6b,'ack':!![]}),_0x35951c[_0xaa3be4(0x84)](_0xaa3be4(0xce),{'val':new Date()[_0xaa3be4(0x9c)](),'ack':!![]});if(_0x4ac55d)_0x35951c[_0xaa3be4(0x84)](_0xaa3be4(0xa9),{'val':_0x4ac55d,'ack':!![]});if(_0x3b13b7){let _0x18b2b9=_0xaa3be4(0x71)+_0x2e6e6b[_0xaa3be4(0x8c)](0x4)+')';if(_0x3d1f0c&&_0x3d1f0c!==_0xaa3be4(0x73))_0x18b2b9+=_0xaa3be4(0x7b)+_0x3d1f0c;_0x35951c[_0xaa3be4(0x84)](_0xaa3be4(0xca),{'val':!![],'ack':!![]}),_0x35951c[_0xaa3be4(0x84)]('analysis.alertReason',{'val':_0x18b2b9,'ack':!![]}),setup[_0xaa3be4(0xb1)](_0x35951c,'‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20'+_0x18b2b9,![],!![]);}}else{if(_0x2ea0ee[_0xaa3be4(0xb8)]===_0xaa3be4(0x87)){const _0x42effd=_0x2ea0ee[_0xaa3be4(0xa8)][_0xaa3be4(0xae)]||'',_0x11fdc1=_0x2ea0ee['payload'][_0xaa3be4(0x8f)],_0x19953c=_0x2ea0ee[_0xaa3be4(0xa8)][_0xaa3be4(0xb0)]?_0xaa3be4(0x7a)+new Date()[_0xaa3be4(0xb5)]()+'\x20('+_0x42effd+')':_0xaa3be4(0x8e)+_0x2ea0ee['payload'][_0xaa3be4(0x82)];_0x35951c[_0xaa3be4(0x84)](_0xaa3be4(0xb4),{'val':_0x19953c,'ack':!![]});if(_0x2ea0ee['payload'][_0xaa3be4(0xb0)]&&_0x11fdc1)_0x35951c[_0xaa3be4(0x84)](_0xaa3be4(0xa9),{'val':_0x11fdc1,'ack':!![]});}else{if(_0x2ea0ee[_0xaa3be4(0xb8)]==='ENERGY_TRAIN_RESULT'){if(_0x2ea0ee['payload'][_0xaa3be4(0xb0)])try{const _0x2be998=JSON['parse'](_0x2ea0ee[_0xaa3be4(0xa8)]['details']);if(_0x2be998[_0xaa3be4(0x72)])_0x35951c[_0xaa3be4(0x84)](_0xaa3be4(0x93),{'val':JSON['stringify'](_0x2be998[_0xaa3be4(0x72)]),'ack':!![]});if(_0x2be998[_0xaa3be4(0xbb)])_0x35951c[_0xaa3be4(0x84)](_0xaa3be4(0xa6),{'val':JSON[_0xaa3be4(0x90)](_0x2be998[_0xaa3be4(0xbb)]),'ack':!![]});}catch(_0x200e1f){}}else{if(_0x2ea0ee[_0xaa3be4(0xb8)]===_0xaa3be4(0xa7)){if(_0x2ea0ee[_0xaa3be4(0xa8)][_0xaa3be4(0xb0)])_0x35951c['log'][_0xaa3be4(0x74)]('‚úÖ\x20HEALTH\x20TRAINED.');}else{if(_0x2ea0ee[_0xaa3be4(0xb8)]===_0xaa3be4(0x9f))_0x35951c['setStateAsync'](_0xaa3be4(0x7f),{'val':new Date()[_0xaa3be4(0x9c)](),'ack':!![]}),_0x35951c[_0xaa3be4(0x84)](_0xaa3be4(0xd0),{'val':_0x2ea0ee[_0xaa3be4(0xa8)][_0xaa3be4(0xa3)],'ack':!![]});else{if(_0x2ea0ee[_0xaa3be4(0xb8)]===_0xaa3be4(0x8b)){const {speed_trend:_0x3d2d79}=_0x2ea0ee[_0xaa3be4(0xa8)];if(_0x3d2d79!==undefined)_0x35951c[_0xaa3be4(0x84)](_0xaa3be4(0x81),{'val':_0x3d2d79,'ack':!![]});}else{if(_0x2ea0ee[_0xaa3be4(0xb8)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x532bc1}=_0x2ea0ee[_0xaa3be4(0xa8)];if(_0x532bc1)_0x35951c['setStateAsync'](_0xaa3be4(0xcf),{'val':JSON[_0xaa3be4(0x90)](_0x532bc1),'ack':!![]});}else{if(_0x2ea0ee['type']===_0xaa3be4(0x7c)){const {times:_0x230e60,sources:_0x27da60,details:_0x4c9bf5}=_0x2ea0ee['payload'];if(_0x230e60)_0x35951c[_0xaa3be4(0x84)]('analysis.energy.warmupTimes',{'val':JSON['stringify'](_0x230e60),'ack':!![]});if(_0x27da60)_0x35951c[_0xaa3be4(0x84)](_0xaa3be4(0x92),{'val':JSON[_0xaa3be4(0x90)](_0x27da60),'ack':!![]});if(_0x4c9bf5)_0x35951c[_0xaa3be4(0x84)](_0xaa3be4(0xc6),{'val':JSON[_0xaa3be4(0x90)](_0x4c9bf5),'ack':!![]});}else{if(_0x2ea0ee[_0xaa3be4(0xb8)]===_0xaa3be4(0xaf)){const {penalties:_0x5bd7db}=_0x2ea0ee['payload'];if(_0x5bd7db)_0x35951c['setStateAsync'](_0xaa3be4(0x91),{'val':JSON['stringify'](_0x5bd7db),'ack':!![]});}else{if(_0x2ea0ee[_0xaa3be4(0xb8)]===_0xaa3be4(0x77)){const {forecast:_0x33dc86}=_0x2ea0ee[_0xaa3be4(0xa8)];if(_0x33dc86)_0x35951c[_0xaa3be4(0x84)](_0xaa3be4(0xbf),{'val':JSON[_0xaa3be4(0x90)](_0x33dc86),'ack':!![]});}else{if(_0x2ea0ee['type']===_0xaa3be4(0xb7)){const {alerts:_0x1a31a3}=_0x2ea0ee[_0xaa3be4(0xa8)];if(_0x1a31a3)_0x35951c[_0xaa3be4(0x84)](_0xaa3be4(0xbd),{'val':JSON[_0xaa3be4(0x90)](_0x1a31a3),'ack':!![]});}else{if(_0x2ea0ee['type']===_0xaa3be4(0x8a)){const {proposals:_0x3e2131}=_0x2ea0ee[_0xaa3be4(0xa8)];_0x35951c[_0xaa3be4(0xcb)]('analysis.energy.mpcActive',(_0x36cf55,_0xe7611)=>{const _0x8bfe87=_0xaa3be4;_0xe7611&&_0xe7611[_0x8bfe87(0x7d)]===!![]&&_0x3e2131&&_0x3e2131[_0x8bfe87(0xab)]>0x0&&automation['applyEnergySavings'](_0x35951c,_0x3e2131);});}else{if(_0x2ea0ee[_0xaa3be4(0xb8)]==='SIGNAL_RESULT'){const {room:_0x15e6f0,propagation:_0x42c4d5}=_0x2ea0ee[_0xaa3be4(0xa8)];let _0x1ade9f=_0xaa3be4(0x73),_0x29a29f=0x0;if(_0x42c4d5){const _0x364cc3=Object[_0xaa3be4(0xc8)](_0x42c4d5);_0x364cc3[_0xaa3be4(0xab)]>0x0&&(_0x1ade9f=_0x364cc3[0x0][0x0],_0x29a29f=_0x364cc3[0x0][0x1]);}_0x35951c[_0xaa3be4(0x84)](_0xaa3be4(0xa4),{'val':_0x1ade9f,'ack':!![]}),_0x35951c[_0xaa3be4(0x84)]('analysis.prediction.confidence',{'val':_0x29a29f,'ack':!![]}),automation['handlePrediction'](_0x35951c,_0x1ade9f,_0x29a29f);}else{if(_0x2ea0ee[_0xaa3be4(0xb8)]===_0xaa3be4(0xaa)){const {probabilities:_0x171e42}=_0x2ea0ee[_0xaa3be4(0xa8)];if(_0x171e42){_0x35951c[_0xaa3be4(0x84)](_0xaa3be4(0xc0),{'val':JSON[_0xaa3be4(0x90)](_0x171e42),'ack':!![]});const _0x209ba0=Object[_0xaa3be4(0x75)](_0x171e42);if(_0x209ba0[_0xaa3be4(0xab)]>0x0){const _0x322357=_0x209ba0[0x0],_0x478bd9=_0x171e42[_0x322357];_0x35951c[_0xaa3be4(0x84)](_0xaa3be4(0xa1),{'val':_0x322357,'ack':!![]}),_0x35951c[_0xaa3be4(0x84)](_0xaa3be4(0x83),{'val':_0x478bd9,'ack':!![]});}}}else{if(_0x2ea0ee[_0xaa3be4(0xb8)]==='COMFORT_RESULT'){const {patterns:_0x9208c}=_0x2ea0ee[_0xaa3be4(0xa8)];if(_0x9208c&&_0x9208c[_0xaa3be4(0xab)]>0x0)_0x35951c[_0xaa3be4(0x84)]('analysis.automation.detectedPatterns',{'val':JSON[_0xaa3be4(0x90)](_0x9208c),'ack':!![]});}}}}}}}}}}}}}}}}}function startService(_0x59029f,_0x5ad9bb){const _0x5aaa3b=a4_0x43453a;let _0x11f075=_0x5aaa3b(0xbc);if(fs['existsSync'](_0x5ad9bb))_0x11f075=_0x5ad9bb;try{const _0x4bed80=path['join'](__dirname,'..','python_service',_0x5aaa3b(0x78));pythonProcess=spawn(_0x11f075,[_0x4bed80]),pythonProcess[_0x5aaa3b(0x97)]['on'](_0x5aaa3b(0xc7),_0x4c7d31=>{const _0x12ae28=_0x5aaa3b,_0x2d1d5a=_0x4c7d31[_0x12ae28(0xb6)]()[_0x12ae28(0xcc)]('\x0a');_0x2d1d5a[_0x12ae28(0xba)](_0x367a09=>{const _0x3cffbc=_0x12ae28,_0x1d8623=_0x367a09[_0x3cffbc(0x99)]();if(!_0x1d8623)return;if(_0x1d8623['startsWith'](_0x3cffbc(0x7e)))_0x59029f[_0x3cffbc(0x88)][_0x3cffbc(0x89)](_0x3cffbc(0xc4)+_0x1d8623[_0x3cffbc(0xc2)](0x5)[_0x3cffbc(0x99)]());else{if(_0x1d8623['startsWith'](_0x3cffbc(0x96)))try{const _0x59a89e=JSON[_0x3cffbc(0x94)](_0x1d8623[_0x3cffbc(0xc2)](0x8)[_0x3cffbc(0x99)]());handleResult(_0x59029f,_0x59a89e);}catch(_0x26f1fe){}}});}),pythonProcess['on']('close',_0x2b66a8=>{pythonProcess=null;}),_0x59029f[_0x5aaa3b(0x9e)]=(_0x460760,_0x37e81c)=>send(_0x59029f,_0x460760,_0x37e81c);}catch(_0x40bbf4){_0x59029f['log'][_0x5aaa3b(0xb2)](_0x5aaa3b(0xc5)+_0x40bbf4['message']);}}function a4_0x2bab(){const _0x564795=['PONG','details','RL_PENALTY_UPDATE','success','sendNotification','error','path','analysis.training.status','toLocaleTimeString','toString','VENTILATION_ALERT','type','11gbBgDJ','forEach','heating','python3','analysis.energy.ventilationAlerts','./automation','analysis.energy.pinnForecast','analysis.prediction.trackerState','SECURITY_RESULT','substring','./setup','[PYTHON]\x20','Error\x20launching\x20Python:\x20','analysis.energy.warmupDetails','data','entries','6610824tfDTKd','analysis.isAlert','getState','split','writable','analysis.security.lastCheck','analysis.energy.forecast','analysis.health.isAnomaly','28577810fVPrJG','apply','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','insulation','Unknown','info','keys','stdin','PINN_PREDICT_RESULT','service.py','child_process','Success:\x20','\x0aGrund:\x20','WARMUP_RESULT','val','[LOG]','analysis.health.lastCheck','üêç\x20Python\x20Pong','analysis.health.gaitSpeed','reason','analysis.prediction.trackerConfidence','setStateAsync','analysis.security.lastScore','5CEpLhI','TRAINING_COMPLETE','log','debug','ENERGY_OPTIMIZE_RESULT','GAIT_RESULT','toFixed','23658tRwDiU','Failed:\x20','threshold','stringify','analysis.energy.rlPenalties','analysis.energy.warmupSources','analysis.energy.insulationScore','parse','5102667LezSoR','[RESULT]','stdout','56frIMvU','trim','3KkXeXb','1195370nWCjjh','toISOString','(((.+)+)+)+$','sendToPythonWrapper','HEALTH_RESULT','search','analysis.prediction.trackerTopRoom','456016NOfjCF','is_anomaly','analysis.prediction.nextRoom','write','analysis.energy.heatingScore','HEALTH_TRAIN_RESULT','payload','analysis.security.currentThreshold','TRACKER_RESULT','length','357956xfvnfs'];a4_0x2bab=function(){return _0x564795;};return a4_0x2bab();}function stopService(_0x34964b){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x1ef89f){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};