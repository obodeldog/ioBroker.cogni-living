function a4_0x28ab(_0x2e85dd,_0x3cef79){const _0x3d195c=a4_0x2720();return a4_0x28ab=function(_0x1cdcf0,_0x2fd81f){_0x1cdcf0=_0x1cdcf0-0x9f;let _0x2720c5=_0x3d195c[_0x1cdcf0];return _0x2720c5;},a4_0x28ab(_0x2e85dd,_0x3cef79);}const a4_0x224b3f=a4_0x28ab;(function(_0xf31cba,_0x29806c){const _0x2b4cae=a4_0x28ab,_0x2357ad=_0xf31cba();while(!![]){try{const _0xa8fcd1=-parseInt(_0x2b4cae(0xcd))/0x1*(parseInt(_0x2b4cae(0xda))/0x2)+-parseInt(_0x2b4cae(0xd0))/0x3*(parseInt(_0x2b4cae(0xca))/0x4)+-parseInt(_0x2b4cae(0xe7))/0x5*(-parseInt(_0x2b4cae(0xc9))/0x6)+parseInt(_0x2b4cae(0xd8))/0x7+parseInt(_0x2b4cae(0xe9))/0x8*(-parseInt(_0x2b4cae(0xc8))/0x9)+parseInt(_0x2b4cae(0xce))/0xa*(parseInt(_0x2b4cae(0xb6))/0xb)+parseInt(_0x2b4cae(0xf3))/0xc;if(_0xa8fcd1===_0x29806c)break;else _0x2357ad['push'](_0x2357ad['shift']());}catch(_0x5f0015){_0x2357ad['push'](_0x2357ad['shift']());}}}(a4_0x2720,0x9e792));const a4_0x2fd81f=(function(){let _0x1df898=!![];return function(_0x448d38,_0x1d7533){const _0x297bb8=_0x1df898?function(){const _0x156e8f=a4_0x28ab;if(_0x1d7533){const _0x328346=_0x1d7533[_0x156e8f(0xc1)](_0x448d38,arguments);return _0x1d7533=null,_0x328346;}}:function(){};return _0x1df898=![],_0x297bb8;};}()),a4_0x1cdcf0=a4_0x2fd81f(this,function(){const _0xdb94b3=a4_0x28ab;return a4_0x1cdcf0[_0xdb94b3(0xef)]()[_0xdb94b3(0xcf)](_0xdb94b3(0xe4))['toString']()['constructor'](a4_0x1cdcf0)[_0xdb94b3(0xcf)](_0xdb94b3(0xe4));});a4_0x1cdcf0();'use strict';const {spawn}=require(a4_0x224b3f(0xf0)),path=require('path'),fs=require('fs'),setup=require('./setup'),automation=require(a4_0x224b3f(0xe0));let pythonProcess=null;function a4_0x2720(){const _0x53185d=['Unknown','close','length','./automation','insulation','sendToPythonWrapper','entries','(((.+)+)+)+$','[RESULT]','data','15aJddpi','HEALTH_TRAIN_RESULT','193576KaFIHv','parse','trim','analysis.security.currentThreshold','debug','analysis.prediction.nextRoom','toString','child_process','stdout','Failed:\x20','2526492rFTQlq','analysis.security.lastScore','ENERGY_OPTIMIZE_RESULT','stdin','success','applyEnergySavings','\x0aGrund:\x20','reason','setStateAsync','[PYTHON]\x20','substring','ENERGY_PREDICT_RESULT','analysis.energy.heatingScore','service.py','type','Error\x20launching\x20Python:\x20','is_anomaly','analysis.health.gaitSpeed','analysis.health.isAnomaly','heating','analysis.energy.mpcActive','TRACKER_RESULT','analysis.energy.forecast','HEALTH_RESULT','ðŸ\x20Python\x20Pong','163405gBSFOh','details','ENERGY_TRAIN_RESULT','startsWith','getState','existsSync','analysis.training.status','âš ï¸\x20SECURITY\x20ALARM:\x20','Success:\x20','stringify','âœ…\x20HEALTH\x20TRAINED.','apply','log','threshold','write','analysis.prediction.trackerTopRoom','GAIT_RESULT','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','342vHZTMZ','1854402xxiWHR','4nfazFj','payload','python3','123QNoZYT','570iUHivk','search','2004702mwpoKr','toLocaleTimeString','info','exports','SIGNAL_RESULT','toISOString','PINN_PREDICT_RESULT','error','8434888Mzwksa','TRAINING_COMPLETE','15490ILhvyz','message','split'];a4_0x2720=function(){return _0x53185d;};return a4_0x2720();}function send(_0x18dadb,_0x49f460,_0x2bfb30={}){const _0xef2860=a4_0x224b3f;if(!pythonProcess||!pythonProcess[_0xef2860(0xa0)]['writable'])return;const _0x563ae9=JSON['stringify']({'command':_0x49f460,..._0x2bfb30});try{pythonProcess[_0xef2860(0xa0)][_0xef2860(0xc4)](_0x563ae9+'\x0a');}catch(_0x4ae006){}}function handleResult(_0x45d4e4,_0x195ba9){const _0x2d63ba=a4_0x224b3f;if(_0x195ba9[_0x2d63ba(0xab)]==='PONG')_0x45d4e4['log'][_0x2d63ba(0xed)](_0x2d63ba(0xb5));else{if(_0x195ba9[_0x2d63ba(0xab)]==='SECURITY_RESULT'){const {anomaly_score:_0x1577f3,is_anomaly:_0x3c8e7b,threshold:_0x5de25a,explanation:_0xfebea3}=_0x195ba9[_0x2d63ba(0xcb)];_0x45d4e4[_0x2d63ba(0xa5)](_0x2d63ba(0xf4),{'val':_0x1577f3,'ack':!![]}),_0x45d4e4[_0x2d63ba(0xa5)]('analysis.security.lastCheck',{'val':new Date()[_0x2d63ba(0xd5)](),'ack':!![]});if(_0x5de25a)_0x45d4e4[_0x2d63ba(0xa5)](_0x2d63ba(0xec),{'val':_0x5de25a,'ack':!![]});if(_0x3c8e7b){let _0x427153=_0x2d63ba(0xc7)+_0x1577f3['toFixed'](0x4)+')';if(_0xfebea3&&_0xfebea3!==_0x2d63ba(0xdd))_0x427153+=_0x2d63ba(0xa3)+_0xfebea3;_0x45d4e4['setStateAsync']('analysis.isAlert',{'val':!![],'ack':!![]}),_0x45d4e4[_0x2d63ba(0xa5)]('analysis.alertReason',{'val':_0x427153,'ack':!![]}),setup['sendNotification'](_0x45d4e4,_0x2d63ba(0xbd)+_0x427153,![],!![]);}}else{if(_0x195ba9[_0x2d63ba(0xab)]===_0x2d63ba(0xd9)){const _0x2ab215=_0x195ba9[_0x2d63ba(0xcb)][_0x2d63ba(0xb7)]||'',_0x981c47=_0x195ba9['payload'][_0x2d63ba(0xc3)],_0x299e84=_0x195ba9[_0x2d63ba(0xcb)][_0x2d63ba(0xa1)]?_0x2d63ba(0xbe)+new Date()[_0x2d63ba(0xd1)]()+'\x20('+_0x2ab215+')':_0x2d63ba(0xf2)+_0x195ba9[_0x2d63ba(0xcb)][_0x2d63ba(0xa4)];_0x45d4e4[_0x2d63ba(0xa5)](_0x2d63ba(0xbc),{'val':_0x299e84,'ack':!![]});if(_0x195ba9[_0x2d63ba(0xcb)]['success']&&_0x981c47)_0x45d4e4[_0x2d63ba(0xa5)](_0x2d63ba(0xec),{'val':_0x981c47,'ack':!![]});}else{if(_0x195ba9['type']===_0x2d63ba(0xb8)){if(_0x195ba9['payload']['success'])try{const _0x2827c2=JSON[_0x2d63ba(0xea)](_0x195ba9[_0x2d63ba(0xcb)][_0x2d63ba(0xb7)]);if(_0x2827c2[_0x2d63ba(0xe1)])_0x45d4e4[_0x2d63ba(0xa5)]('analysis.energy.insulationScore',{'val':JSON[_0x2d63ba(0xbf)](_0x2827c2[_0x2d63ba(0xe1)]),'ack':!![]});if(_0x2827c2[_0x2d63ba(0xb0)])_0x45d4e4[_0x2d63ba(0xa5)](_0x2d63ba(0xa9),{'val':JSON[_0x2d63ba(0xbf)](_0x2827c2[_0x2d63ba(0xb0)]),'ack':!![]});}catch(_0x507542){}}else{if(_0x195ba9[_0x2d63ba(0xab)]===_0x2d63ba(0xe8)){if(_0x195ba9[_0x2d63ba(0xcb)]['success'])_0x45d4e4['log'][_0x2d63ba(0xd2)](_0x2d63ba(0xc0));}else{if(_0x195ba9[_0x2d63ba(0xab)]===_0x2d63ba(0xb4))_0x45d4e4[_0x2d63ba(0xa5)]('analysis.health.lastCheck',{'val':new Date()[_0x2d63ba(0xd5)](),'ack':!![]}),_0x45d4e4[_0x2d63ba(0xa5)](_0x2d63ba(0xaf),{'val':_0x195ba9[_0x2d63ba(0xcb)][_0x2d63ba(0xad)],'ack':!![]});else{if(_0x195ba9[_0x2d63ba(0xab)]===_0x2d63ba(0xc6)){const {speed_trend:_0x5f3af7}=_0x195ba9['payload'];if(_0x5f3af7!==undefined)_0x45d4e4[_0x2d63ba(0xa5)](_0x2d63ba(0xae),{'val':_0x5f3af7,'ack':!![]});}else{if(_0x195ba9[_0x2d63ba(0xab)]===_0x2d63ba(0xa8)){const {forecast:_0x21739b}=_0x195ba9[_0x2d63ba(0xcb)];if(_0x21739b)_0x45d4e4[_0x2d63ba(0xa5)](_0x2d63ba(0xb3),{'val':JSON[_0x2d63ba(0xbf)](_0x21739b),'ack':!![]});}else{if(_0x195ba9[_0x2d63ba(0xab)]===_0x2d63ba(0xd6)){const {forecast:_0x3ab221}=_0x195ba9[_0x2d63ba(0xcb)];if(_0x3ab221)_0x45d4e4['setStateAsync']('analysis.energy.pinnForecast',{'val':JSON[_0x2d63ba(0xbf)](_0x3ab221),'ack':!![]});}else{if(_0x195ba9[_0x2d63ba(0xab)]===_0x2d63ba(0x9f)){const {proposals:_0x362280}=_0x195ba9[_0x2d63ba(0xcb)];_0x45d4e4[_0x2d63ba(0xba)](_0x2d63ba(0xb1),(_0x2b249b,_0x5b64b0)=>{const _0x2a1e44=_0x2d63ba;_0x5b64b0&&_0x5b64b0['val']===!![]&&_0x362280&&_0x362280[_0x2a1e44(0xdf)]>0x0&&automation[_0x2a1e44(0xa2)](_0x45d4e4,_0x362280);});}else{if(_0x195ba9[_0x2d63ba(0xab)]===_0x2d63ba(0xd4)){const {room:_0x8906b1,propagation:_0x140110}=_0x195ba9[_0x2d63ba(0xcb)];let _0x3bdf4c=_0x2d63ba(0xdd),_0xbf0b7=0x0;if(_0x140110){const _0x311b70=Object[_0x2d63ba(0xe3)](_0x140110);_0x311b70['length']>0x0&&(_0x3bdf4c=_0x311b70[0x0][0x0],_0xbf0b7=_0x311b70[0x0][0x1]);}_0x45d4e4[_0x2d63ba(0xa5)](_0x2d63ba(0xee),{'val':_0x3bdf4c,'ack':!![]}),_0x45d4e4[_0x2d63ba(0xa5)]('analysis.prediction.confidence',{'val':_0xbf0b7,'ack':!![]}),automation['handlePrediction'](_0x45d4e4,_0x3bdf4c,_0xbf0b7);}else{if(_0x195ba9['type']===_0x2d63ba(0xb2)){const {probabilities:_0x55b454}=_0x195ba9[_0x2d63ba(0xcb)];if(_0x55b454){_0x45d4e4[_0x2d63ba(0xa5)]('analysis.prediction.trackerState',{'val':JSON[_0x2d63ba(0xbf)](_0x55b454),'ack':!![]});const _0x4a57fd=Object['keys'](_0x55b454);if(_0x4a57fd[_0x2d63ba(0xdf)]>0x0){const _0xbb21f1=_0x4a57fd[0x0],_0x52aed7=_0x55b454[_0xbb21f1];_0x45d4e4[_0x2d63ba(0xa5)](_0x2d63ba(0xc5),{'val':_0xbb21f1,'ack':!![]}),_0x45d4e4[_0x2d63ba(0xa5)]('analysis.prediction.trackerConfidence',{'val':_0x52aed7,'ack':!![]});}}}else{if(_0x195ba9[_0x2d63ba(0xab)]==='COMFORT_RESULT'){const {patterns:_0x394b3e}=_0x195ba9[_0x2d63ba(0xcb)];if(_0x394b3e&&_0x394b3e[_0x2d63ba(0xdf)]>0x0)_0x45d4e4[_0x2d63ba(0xa5)]('analysis.automation.detectedPatterns',{'val':JSON[_0x2d63ba(0xbf)](_0x394b3e),'ack':!![]});}}}}}}}}}}}}}}function startService(_0xfc8084,_0x4144c5){const _0x405145=a4_0x224b3f;let _0x10d4b7=_0x405145(0xcc);if(fs[_0x405145(0xbb)](_0x4144c5))_0x10d4b7=_0x4144c5;try{const _0xae595c=path['join'](__dirname,'..','python_service',_0x405145(0xaa));pythonProcess=spawn(_0x10d4b7,[_0xae595c]),pythonProcess[_0x405145(0xf1)]['on'](_0x405145(0xe6),_0x147047=>{const _0x550ad7=_0x405145,_0x3c6825=_0x147047[_0x550ad7(0xef)]()[_0x550ad7(0xdc)]('\x0a');_0x3c6825['forEach'](_0x2d3518=>{const _0x23d84e=_0x550ad7,_0x5c116c=_0x2d3518['trim']();if(!_0x5c116c)return;if(_0x5c116c[_0x23d84e(0xb9)]('[LOG]'))_0xfc8084[_0x23d84e(0xc2)][_0x23d84e(0xed)](_0x23d84e(0xa6)+_0x5c116c[_0x23d84e(0xa7)](0x5)[_0x23d84e(0xeb)]());else{if(_0x5c116c[_0x23d84e(0xb9)](_0x23d84e(0xe5)))try{const _0xe9f9de=JSON[_0x23d84e(0xea)](_0x5c116c[_0x23d84e(0xa7)](0x8)['trim']());handleResult(_0xfc8084,_0xe9f9de);}catch(_0x1286fa){}}});}),pythonProcess['on'](_0x405145(0xde),_0x5a7d78=>{pythonProcess=null;}),_0xfc8084[_0x405145(0xe2)]=(_0x357953,_0x544326)=>send(_0xfc8084,_0x357953,_0x544326);}catch(_0x15c23e){_0xfc8084[_0x405145(0xc2)][_0x405145(0xd7)](_0x405145(0xac)+_0x15c23e[_0x405145(0xdb)]);}}function stopService(_0x1049f5){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x4e2ad5){}pythonProcess=null;}}module[a4_0x224b3f(0xd3)]={'startService':startService,'stopService':stopService,'send':send};