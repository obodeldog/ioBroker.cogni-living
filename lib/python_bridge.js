const a4_0x31249d=a4_0x53ae;(function(_0x57adf9,_0x8eb877){const _0x37b2ff=a4_0x53ae,_0x447f03=_0x57adf9();while(!![]){try{const _0xec2c29=parseInt(_0x37b2ff(0x19a))/0x1+-parseInt(_0x37b2ff(0x18d))/0x2*(parseInt(_0x37b2ff(0x186))/0x3)+parseInt(_0x37b2ff(0x1bf))/0x4*(-parseInt(_0x37b2ff(0x181))/0x5)+parseInt(_0x37b2ff(0x1ad))/0x6+-parseInt(_0x37b2ff(0x1cd))/0x7*(-parseInt(_0x37b2ff(0x1b5))/0x8)+-parseInt(_0x37b2ff(0x1ca))/0x9*(-parseInt(_0x37b2ff(0x1b6))/0xa)+-parseInt(_0x37b2ff(0x180))/0xb;if(_0xec2c29===_0x8eb877)break;else _0x447f03['push'](_0x447f03['shift']());}catch(_0x358b4b){_0x447f03['push'](_0x447f03['shift']());}}}(a4_0x1cb6,0x33cd4));function a4_0x1cb6(){const _0x460721=['threshold','Unknown','1473ENNMMb','ENERGY_TRAIN_RESULT','toFixed','analysis.energy.mpcActive','analysis.training.status','SIGNAL_RESULT','writable','1338TnYJqT','analysis.health.gaitSpeed','Failed:\x20','analysis.prediction.confidence','toLocaleTimeString','analysis.alertReason','parse','substring','analysis.health.lastCheck','exports','GAIT_RESULT','ENERGY_PREDICT_RESULT','error','341751wRuqSs','write','heating','ENERGY_OPTIMIZE_RESULT','debug','constructor','startsWith','service.py','getState','SECURITY_RESULT','analysis.energy.pinnForecast','join','analysis.prediction.nextRoom','apply','[PYTHON]\x20','payload','analysis.security.lastCheck','details','HEALTH_RESULT','40368zTxcjM','close','stdout','./setup','WARMUP_RESULT','data','sendToPythonWrapper','analysis.energy.heatingScore','24zKGVoY','30OvnTaT','(((.+)+)+)+$','insulation','analysis.automation.detectedPatterns','analysis.energy.insulationScore','Success:\x20','PONG','search','entries','232pZwurS','âš ï¸\x20SECURITY\x20ALARM:\x20','length','existsSync','path','analysis.energy.forecast','âœ…\x20HEALTH\x20TRAINED.','./automation','\x0aGrund:\x20','type','analysis.prediction.trackerTopRoom','1171323HSdroo','stringify','log','124229aVEdXe','analysis.security.currentThreshold','is_anomaly','handlePrediction','success','trim','kill','analysis.security.lastScore','Error\x20launching\x20Python:\x20','val','VENTILATION_ALERT','COMFORT_RESULT','PINN_PREDICT_RESULT','toString','analysis.prediction.trackerState','analysis.health.isAnomaly','TRACKER_RESULT','setStateAsync','26950wLqChn','21470enZiih','keys','toISOString'];a4_0x1cb6=function(){return _0x460721;};return a4_0x1cb6();}const a4_0xd931f9=(function(){let _0x21cc9c=!![];return function(_0x5f3582,_0x5120cc){const _0x283b9b=_0x21cc9c?function(){const _0x3fafcc=a4_0x53ae;if(_0x5120cc){const _0x4e3590=_0x5120cc[_0x3fafcc(0x1a7)](_0x5f3582,arguments);return _0x5120cc=null,_0x4e3590;}}:function(){};return _0x21cc9c=![],_0x283b9b;};}()),a4_0x21194a=a4_0xd931f9(this,function(){const _0x127de9=a4_0x53ae;return a4_0x21194a[_0x127de9(0x1da)]()[_0x127de9(0x1bd)](_0x127de9(0x1b7))['toString']()[_0x127de9(0x19f)](a4_0x21194a)[_0x127de9(0x1bd)](_0x127de9(0x1b7));});a4_0x21194a();'use strict';const {spawn}=require('child_process'),path=require(a4_0x31249d(0x1c3)),fs=require('fs'),setup=require(a4_0x31249d(0x1b0)),automation=require(a4_0x31249d(0x1c6));let pythonProcess=null;function a4_0x53ae(_0x9afe61,_0x2c47ec){const _0x3f237a=a4_0x1cb6();return a4_0x53ae=function(_0x21194a,_0xd931f9){_0x21194a=_0x21194a-0x17f;let _0x1cb66f=_0x3f237a[_0x21194a];return _0x1cb66f;},a4_0x53ae(_0x9afe61,_0x2c47ec);}function send(_0x42c805,_0x42e01e,_0x1d684a={}){const _0x3b5e4f=a4_0x31249d;if(!pythonProcess||!pythonProcess['stdin'][_0x3b5e4f(0x18c)])return;const _0x118216=JSON[_0x3b5e4f(0x1cb)]({'command':_0x42e01e,..._0x1d684a});try{pythonProcess['stdin'][_0x3b5e4f(0x19b)](_0x118216+'\x0a');}catch(_0x4865dc){}}function handleResult(_0xbf946,_0x1c448f){const _0x20026a=a4_0x31249d;if(_0x1c448f[_0x20026a(0x1c8)]===_0x20026a(0x1bc))_0xbf946['log'][_0x20026a(0x19e)]('ðŸ\x20Python\x20Pong');else{if(_0x1c448f[_0x20026a(0x1c8)]===_0x20026a(0x1a3)){const {anomaly_score:_0x3e5db8,is_anomaly:_0x3fa770,threshold:_0x21502b,explanation:_0xf5ec12}=_0x1c448f[_0x20026a(0x1a9)];_0xbf946[_0x20026a(0x17f)](_0x20026a(0x1d4),{'val':_0x3e5db8,'ack':!![]}),_0xbf946[_0x20026a(0x17f)](_0x20026a(0x1aa),{'val':new Date()[_0x20026a(0x183)](),'ack':!![]});if(_0x21502b)_0xbf946[_0x20026a(0x17f)](_0x20026a(0x1ce),{'val':_0x21502b,'ack':!![]});if(_0x3fa770){let _0x4041a1='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x3e5db8[_0x20026a(0x188)](0x4)+')';if(_0xf5ec12&&_0xf5ec12!==_0x20026a(0x185))_0x4041a1+=_0x20026a(0x1c7)+_0xf5ec12;_0xbf946[_0x20026a(0x17f)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0xbf946[_0x20026a(0x17f)](_0x20026a(0x192),{'val':_0x4041a1,'ack':!![]}),setup['sendNotification'](_0xbf946,_0x20026a(0x1c0)+_0x4041a1,![],!![]);}}else{if(_0x1c448f[_0x20026a(0x1c8)]==='TRAINING_COMPLETE'){const _0x3c7349=_0x1c448f[_0x20026a(0x1a9)][_0x20026a(0x1ab)]||'',_0x49833f=_0x1c448f[_0x20026a(0x1a9)][_0x20026a(0x184)],_0x17983d=_0x1c448f[_0x20026a(0x1a9)][_0x20026a(0x1d1)]?_0x20026a(0x1bb)+new Date()[_0x20026a(0x191)]()+'\x20('+_0x3c7349+')':_0x20026a(0x18f)+_0x1c448f[_0x20026a(0x1a9)]['reason'];_0xbf946[_0x20026a(0x17f)](_0x20026a(0x18a),{'val':_0x17983d,'ack':!![]});if(_0x1c448f[_0x20026a(0x1a9)][_0x20026a(0x1d1)]&&_0x49833f)_0xbf946[_0x20026a(0x17f)](_0x20026a(0x1ce),{'val':_0x49833f,'ack':!![]});}else{if(_0x1c448f['type']===_0x20026a(0x187)){if(_0x1c448f[_0x20026a(0x1a9)][_0x20026a(0x1d1)])try{const _0x584d51=JSON[_0x20026a(0x193)](_0x1c448f[_0x20026a(0x1a9)][_0x20026a(0x1ab)]);if(_0x584d51[_0x20026a(0x1b8)])_0xbf946['setStateAsync'](_0x20026a(0x1ba),{'val':JSON['stringify'](_0x584d51[_0x20026a(0x1b8)]),'ack':!![]});if(_0x584d51[_0x20026a(0x19c)])_0xbf946[_0x20026a(0x17f)](_0x20026a(0x1b4),{'val':JSON[_0x20026a(0x1cb)](_0x584d51[_0x20026a(0x19c)]),'ack':!![]});}catch(_0x504025){}}else{if(_0x1c448f['type']==='HEALTH_TRAIN_RESULT'){if(_0x1c448f[_0x20026a(0x1a9)]['success'])_0xbf946[_0x20026a(0x1cc)]['info'](_0x20026a(0x1c5));}else{if(_0x1c448f[_0x20026a(0x1c8)]===_0x20026a(0x1ac))_0xbf946[_0x20026a(0x17f)](_0x20026a(0x195),{'val':new Date()[_0x20026a(0x183)](),'ack':!![]}),_0xbf946[_0x20026a(0x17f)](_0x20026a(0x1dc),{'val':_0x1c448f[_0x20026a(0x1a9)][_0x20026a(0x1cf)],'ack':!![]});else{if(_0x1c448f[_0x20026a(0x1c8)]===_0x20026a(0x197)){const {speed_trend:_0x2f1896}=_0x1c448f[_0x20026a(0x1a9)];if(_0x2f1896!==undefined)_0xbf946[_0x20026a(0x17f)](_0x20026a(0x18e),{'val':_0x2f1896,'ack':!![]});}else{if(_0x1c448f['type']===_0x20026a(0x198)){const {forecast:_0x57fe45}=_0x1c448f['payload'];if(_0x57fe45)_0xbf946[_0x20026a(0x17f)](_0x20026a(0x1c4),{'val':JSON[_0x20026a(0x1cb)](_0x57fe45),'ack':!![]});}else{if(_0x1c448f[_0x20026a(0x1c8)]===_0x20026a(0x1b1)){const {times:_0x5352b4}=_0x1c448f['payload'];if(_0x5352b4)_0xbf946[_0x20026a(0x17f)]('analysis.energy.warmupTimes',{'val':JSON['stringify'](_0x5352b4),'ack':!![]});}else{if(_0x1c448f['type']===_0x20026a(0x1d9)){const {forecast:_0x58d1a5}=_0x1c448f[_0x20026a(0x1a9)];if(_0x58d1a5)_0xbf946[_0x20026a(0x17f)](_0x20026a(0x1a4),{'val':JSON['stringify'](_0x58d1a5),'ack':!![]});}else{if(_0x1c448f['type']===_0x20026a(0x1d7)){const {alerts:_0x3e9d4f}=_0x1c448f[_0x20026a(0x1a9)];if(_0x3e9d4f)_0xbf946[_0x20026a(0x17f)]('analysis.energy.ventilationAlerts',{'val':JSON['stringify'](_0x3e9d4f),'ack':!![]});}else{if(_0x1c448f[_0x20026a(0x1c8)]===_0x20026a(0x19d)){const {proposals:_0x1ee7dc}=_0x1c448f[_0x20026a(0x1a9)];_0xbf946[_0x20026a(0x1a2)](_0x20026a(0x189),(_0x554157,_0x338c5d)=>{const _0x236437=_0x20026a;_0x338c5d&&_0x338c5d[_0x236437(0x1d6)]===!![]&&_0x1ee7dc&&_0x1ee7dc[_0x236437(0x1c1)]>0x0&&automation['applyEnergySavings'](_0xbf946,_0x1ee7dc);});}else{if(_0x1c448f['type']===_0x20026a(0x18b)){const {room:_0x493e5b,propagation:_0x29ddb2}=_0x1c448f['payload'];let _0x2372c6='Unknown',_0x3d47c6=0x0;if(_0x29ddb2){const _0x4d3eed=Object[_0x20026a(0x1be)](_0x29ddb2);_0x4d3eed['length']>0x0&&(_0x2372c6=_0x4d3eed[0x0][0x0],_0x3d47c6=_0x4d3eed[0x0][0x1]);}_0xbf946[_0x20026a(0x17f)](_0x20026a(0x1a6),{'val':_0x2372c6,'ack':!![]}),_0xbf946[_0x20026a(0x17f)](_0x20026a(0x190),{'val':_0x3d47c6,'ack':!![]}),automation[_0x20026a(0x1d0)](_0xbf946,_0x2372c6,_0x3d47c6);}else{if(_0x1c448f['type']===_0x20026a(0x1dd)){const {probabilities:_0x44be64}=_0x1c448f['payload'];if(_0x44be64){_0xbf946['setStateAsync'](_0x20026a(0x1db),{'val':JSON[_0x20026a(0x1cb)](_0x44be64),'ack':!![]});const _0x56fb30=Object[_0x20026a(0x182)](_0x44be64);if(_0x56fb30[_0x20026a(0x1c1)]>0x0){const _0x5843dd=_0x56fb30[0x0],_0x50de91=_0x44be64[_0x5843dd];_0xbf946[_0x20026a(0x17f)](_0x20026a(0x1c9),{'val':_0x5843dd,'ack':!![]}),_0xbf946[_0x20026a(0x17f)]('analysis.prediction.trackerConfidence',{'val':_0x50de91,'ack':!![]});}}}else{if(_0x1c448f[_0x20026a(0x1c8)]===_0x20026a(0x1d8)){const {patterns:_0x1611e2}=_0x1c448f[_0x20026a(0x1a9)];if(_0x1611e2&&_0x1611e2['length']>0x0)_0xbf946[_0x20026a(0x17f)](_0x20026a(0x1b9),{'val':JSON['stringify'](_0x1611e2),'ack':!![]});}}}}}}}}}}}}}}}}function startService(_0x160164,_0x5d5a04){const _0x45d5bb=a4_0x31249d;let _0x1e7f95='python3';if(fs[_0x45d5bb(0x1c2)](_0x5d5a04))_0x1e7f95=_0x5d5a04;try{const _0x3ab2f8=path[_0x45d5bb(0x1a5)](__dirname,'..','python_service',_0x45d5bb(0x1a1));pythonProcess=spawn(_0x1e7f95,[_0x3ab2f8]),pythonProcess[_0x45d5bb(0x1af)]['on'](_0x45d5bb(0x1b2),_0x3cbba4=>{const _0x458977=_0x3cbba4['toString']()['split']('\x0a');_0x458977['forEach'](_0x235a68=>{const _0x52c78f=a4_0x53ae,_0x27b045=_0x235a68['trim']();if(!_0x27b045)return;if(_0x27b045[_0x52c78f(0x1a0)]('[LOG]'))_0x160164[_0x52c78f(0x1cc)][_0x52c78f(0x19e)](_0x52c78f(0x1a8)+_0x27b045[_0x52c78f(0x194)](0x5)[_0x52c78f(0x1d2)]());else{if(_0x27b045[_0x52c78f(0x1a0)]('[RESULT]'))try{const _0x467b18=JSON['parse'](_0x27b045[_0x52c78f(0x194)](0x8)['trim']());handleResult(_0x160164,_0x467b18);}catch(_0x47f823){}}});}),pythonProcess['on'](_0x45d5bb(0x1ae),_0xd1a2b8=>{pythonProcess=null;}),_0x160164[_0x45d5bb(0x1b3)]=(_0x2e2f14,_0xd3710)=>send(_0x160164,_0x2e2f14,_0xd3710);}catch(_0x42a1d9){_0x160164[_0x45d5bb(0x1cc)][_0x45d5bb(0x199)](_0x45d5bb(0x1d5)+_0x42a1d9['message']);}}function stopService(_0x2ced2f){const _0x324ab0=a4_0x31249d;if(pythonProcess){try{pythonProcess[_0x324ab0(0x1d3)]();}catch(_0x3e96c4){}pythonProcess=null;}}module[a4_0x31249d(0x196)]={'startService':startService,'stopService':stopService,'send':send};