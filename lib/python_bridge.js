const a3_0x2ea43d=a3_0x1207;(function(_0x44ee01,_0x341978){const _0x546662=a3_0x1207,_0x2f70ba=_0x44ee01();while(!![]){try{const _0x363bd3=-parseInt(_0x546662(0x1cf))/0x1+-parseInt(_0x546662(0x20e))/0x2*(parseInt(_0x546662(0x1e1))/0x3)+-parseInt(_0x546662(0x1b0))/0x4+-parseInt(_0x546662(0x1ba))/0x5+-parseInt(_0x546662(0x1f3))/0x6*(-parseInt(_0x546662(0x1ce))/0x7)+parseInt(_0x546662(0x1d6))/0x8+parseInt(_0x546662(0x1ed))/0x9;if(_0x363bd3===_0x341978)break;else _0x2f70ba['push'](_0x2f70ba['shift']());}catch(_0x168fda){_0x2f70ba['push'](_0x2f70ba['shift']());}}}(a3_0x2bd8,0x65418));const a3_0x27e05b=(function(){let _0x48b950=!![];return function(_0x24719a,_0x266879){const _0xaffb59=_0x48b950?function(){const _0x53b197=a3_0x1207;if(_0x266879){const _0x415336=_0x266879[_0x53b197(0x1b2)](_0x24719a,arguments);return _0x266879=null,_0x415336;}}:function(){};return _0x48b950=![],_0xaffb59;};}()),a3_0xd9d310=a3_0x27e05b(this,function(){const _0x4071db=a3_0x1207;return a3_0xd9d310[_0x4071db(0x1e5)]()[_0x4071db(0x1d0)](_0x4071db(0x1ea))[_0x4071db(0x1e5)]()[_0x4071db(0x1b7)](a3_0xd9d310)[_0x4071db(0x1d0)](_0x4071db(0x1ea));});a3_0xd9d310();function a3_0x1207(_0x9e6995,_0x10473d){const _0x1e8722=a3_0x2bd8();return a3_0x1207=function(_0xd9d310,_0x27e05b){_0xd9d310=_0xd9d310-0x1aa;let _0x2bd84c=_0x1e8722[_0xd9d310];return _0x2bd84c;},a3_0x1207(_0x9e6995,_0x10473d);}function a3_0x2bd8(){const _0xff9f24=['./automation','analysis.automation.detectedPatterns','TOPOLOGY_RESULT','ðŸ”®\x20Prediction:\x20From\x20','debug','SECURITY_RESULT','Unknown','threshold','ENERGY_PREDICT_RESULT','analysis.health.lastCheck','HEALTH_TRAIN_RESULT','diagnosis','startsWith','analysis.training.status','stringify','1078uISHRA','93860dSMXEb','search','analysis.prediction.confidence','\x20->\x20','success','toISOString','analysis.automation.patternDetected','5985552YmPNlO','ANOMALY','path','length','details','analysis.health.trendDiagnosis','split','is_anomaly','analysis.security.lastCheck','ENERGY_TRAIN_RESULT','python_service','3jCkaJD','write','child_process','analysis.security.currentThreshold','toString','parse','âš ï¸\x20SECURITY\x20ALARM:\x20','confidence','SIGNAL_RESULT','(((.+)+)+)+$','TREND_RESULT','close','4021839eoqQcN','\x20new\x20patterns.','analysis.isAlert','substring','toFixed','insulation','19974xEQiKo','message','sendNotification','info','analysis.health.gaitSpeed','payload','trim','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','analysis.security.lastScore','analysis.energy.insulationScore','forEach','Failed:\x20','[RESULT]','Regel\x20erkannt:\x20','toLocaleTimeString','analysis.alertReason','type','analysis.prediction.nextRoom','Success:\x20','PONG','service.py','ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.','./setup','entries','error','analysis.health.isAnomaly','ðŸ\x20Python\x20Pong','682698YrqoQf','heating','analysis.energy.forecast','analysis.security.topologyMatrix','TRAINING_COMPLETE','stdout','\x0aGrund:\x20','kill','sendToPythonWrapper','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','844416iDaSKT','data','apply','exports','join','reason','Error\x20launching\x20Python:\x20','constructor','GAIT_RESULT','setStateAsync','3233370wIpoZr','analysis.energy.heatingScore','TOPOLOGY_ACK','rule','log'];a3_0x2bd8=function(){return _0xff9f24;};return a3_0x2bd8();}'use strict';const {spawn}=require(a3_0x2ea43d(0x1e3)),path=require(a3_0x2ea43d(0x1d8)),fs=require('fs'),setup=require(a3_0x2ea43d(0x209)),automation=require(a3_0x2ea43d(0x1bf));let pythonProcess=null;function send(_0x2007b7,_0x1aa853,_0x3a7f28={}){const _0x5e7afc=a3_0x2ea43d;if(!pythonProcess||!pythonProcess['stdin']['writable'])return;const _0xd0f5ca=JSON[_0x5e7afc(0x1cd)]({'command':_0x1aa853,..._0x3a7f28});try{pythonProcess['stdin'][_0x5e7afc(0x1e2)](_0xd0f5ca+'\x0a');}catch(_0x4ff6e2){}}function handleResult(_0x524ea4,_0x1fe1db){const _0x5be7f1=a3_0x2ea43d;if(_0x1fe1db[_0x5be7f1(0x203)]===_0x5be7f1(0x206))_0x524ea4[_0x5be7f1(0x1be)][_0x5be7f1(0x1c3)](_0x5be7f1(0x20d));else{if(_0x1fe1db[_0x5be7f1(0x203)]===_0x5be7f1(0x1c4)){const {anomaly_score:_0x5456cc,is_anomaly:_0x2d1846,threshold:_0x1bcdb3,explanation:_0x49357a}=_0x1fe1db[_0x5be7f1(0x1f8)];_0x524ea4[_0x5be7f1(0x1be)][_0x5be7f1(0x1f6)](_0x5be7f1(0x1fa)+_0x5456cc[_0x5be7f1(0x1f1)](0x5)+_0x5be7f1(0x1d2)+(_0x2d1846?_0x5be7f1(0x1d7):'OK')),_0x524ea4['setStateAsync'](_0x5be7f1(0x1fb),{'val':_0x5456cc,'ack':!![]}),_0x524ea4[_0x5be7f1(0x1b9)](_0x5be7f1(0x1de),{'val':new Date()[_0x5be7f1(0x1d4)](),'ack':!![]});if(_0x1bcdb3)_0x524ea4[_0x5be7f1(0x1b9)](_0x5be7f1(0x1e4),{'val':_0x1bcdb3,'ack':!![]});if(_0x2d1846){let _0x2d992b=_0x5be7f1(0x1af)+_0x5456cc[_0x5be7f1(0x1f1)](0x4)+')';if(_0x49357a&&_0x49357a!==_0x5be7f1(0x1c5))_0x2d992b+=_0x5be7f1(0x1ac)+_0x49357a;_0x524ea4[_0x5be7f1(0x1b9)](_0x5be7f1(0x1ef),{'val':!![],'ack':!![]}),_0x524ea4['setStateAsync'](_0x5be7f1(0x202),{'val':_0x2d992b,'ack':!![]}),setup[_0x5be7f1(0x1f5)](_0x524ea4,_0x5be7f1(0x1e7)+_0x2d992b,![],!![]);}}else{if(_0x1fe1db[_0x5be7f1(0x203)]===_0x5be7f1(0x1aa)){const _0x2fb445=_0x1fe1db[_0x5be7f1(0x1f8)][_0x5be7f1(0x1da)]||'',_0x2df881=_0x1fe1db['payload'][_0x5be7f1(0x1c6)],_0x4a1db2=_0x1fe1db[_0x5be7f1(0x1f8)]['success']?_0x5be7f1(0x205)+new Date()[_0x5be7f1(0x201)]()+'\x20('+_0x2fb445+')':_0x5be7f1(0x1fe)+_0x1fe1db[_0x5be7f1(0x1f8)][_0x5be7f1(0x1b5)];_0x524ea4[_0x5be7f1(0x1b9)](_0x5be7f1(0x1cc),{'val':_0x4a1db2,'ack':!![]});if(_0x1fe1db['payload'][_0x5be7f1(0x1d3)]&&_0x2df881)_0x524ea4[_0x5be7f1(0x1b9)](_0x5be7f1(0x1e4),{'val':_0x2df881,'ack':!![]});}else{if(_0x1fe1db[_0x5be7f1(0x203)]==='COMFORT_RESULT'){const {patterns:_0x44f0ca}=_0x1fe1db['payload'];if(_0x44f0ca&&_0x44f0ca[_0x5be7f1(0x1d9)]>0x0){_0x524ea4[_0x5be7f1(0x1be)][_0x5be7f1(0x1f6)]('ðŸ›‹ï¸\x20BUTLER:\x20Found\x20'+_0x44f0ca[_0x5be7f1(0x1d9)]+_0x5be7f1(0x1ee)),_0x524ea4['setStateAsync'](_0x5be7f1(0x1c0),{'val':JSON[_0x5be7f1(0x1cd)](_0x44f0ca),'ack':!![]});const _0x5af685=_0x44f0ca[0x0],_0x3432ae=_0x5be7f1(0x200)+_0x5af685[_0x5be7f1(0x1bd)]+'\x20('+(_0x5af685[_0x5be7f1(0x1e8)]*0x64)[_0x5be7f1(0x1f1)](0x0)+'%)';_0x524ea4[_0x5be7f1(0x1b9)](_0x5be7f1(0x1d5),{'val':!![],'ack':!![]}),_0x524ea4[_0x5be7f1(0x1b9)]('analysis.automation.description',{'val':_0x3432ae,'ack':!![]});}else _0x524ea4['log'][_0x5be7f1(0x1f6)]('ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.'),_0x524ea4[_0x5be7f1(0x1b9)](_0x5be7f1(0x1d5),{'val':![],'ack':!![]}),_0x524ea4[_0x5be7f1(0x1b9)](_0x5be7f1(0x1c0),{'val':'[]','ack':!![]});}else{if(_0x1fe1db[_0x5be7f1(0x203)]===_0x5be7f1(0x1df)){if(_0x1fe1db['payload'][_0x5be7f1(0x1d3)])try{const _0x181e7a=JSON[_0x5be7f1(0x1e6)](_0x1fe1db[_0x5be7f1(0x1f8)][_0x5be7f1(0x1da)]);if(_0x181e7a['insulation'])_0x524ea4['setStateAsync'](_0x5be7f1(0x1fc),{'val':JSON['stringify'](_0x181e7a[_0x5be7f1(0x1f2)]),'ack':!![]});if(_0x181e7a[_0x5be7f1(0x20f)])_0x524ea4['setStateAsync'](_0x5be7f1(0x1bb),{'val':JSON[_0x5be7f1(0x1cd)](_0x181e7a[_0x5be7f1(0x20f)]),'ack':!![]});}catch(_0x2b385e){}}else{if(_0x1fe1db[_0x5be7f1(0x203)]===_0x5be7f1(0x1c9)){if(_0x1fe1db['payload'][_0x5be7f1(0x1d3)])_0x524ea4[_0x5be7f1(0x1be)][_0x5be7f1(0x1f6)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x1fe1db[_0x5be7f1(0x203)]==='HEALTH_RESULT')_0x524ea4[_0x5be7f1(0x1b9)](_0x5be7f1(0x1c8),{'val':new Date()[_0x5be7f1(0x1d4)](),'ack':!![]}),_0x524ea4[_0x5be7f1(0x1b9)](_0x5be7f1(0x20c),{'val':_0x1fe1db[_0x5be7f1(0x1f8)][_0x5be7f1(0x1dd)],'ack':!![]});else{if(_0x1fe1db['type']===_0x5be7f1(0x1eb))_0x524ea4[_0x5be7f1(0x1b9)](_0x5be7f1(0x1db),{'val':_0x1fe1db[_0x5be7f1(0x1f8)][_0x5be7f1(0x1ca)],'ack':!![]}),_0x524ea4['setStateAsync']('analysis.health.trendValue',{'val':_0x1fe1db[_0x5be7f1(0x1f8)]['change_percent'],'ack':!![]});else{if(_0x1fe1db[_0x5be7f1(0x203)]===_0x5be7f1(0x1b8)){const {speed_trend:_0x111a80}=_0x1fe1db[_0x5be7f1(0x1f8)];if(_0x111a80!==undefined)_0x524ea4['setStateAsync'](_0x5be7f1(0x1f7),{'val':_0x111a80,'ack':!![]});}else{if(_0x1fe1db[_0x5be7f1(0x203)]===_0x5be7f1(0x1c7)){const {forecast:_0x5f200b}=_0x1fe1db[_0x5be7f1(0x1f8)];if(_0x5f200b)_0x524ea4[_0x5be7f1(0x1b9)](_0x5be7f1(0x210),{'val':JSON['stringify'](_0x5f200b),'ack':!![]});}else{if(_0x1fe1db['type']===_0x5be7f1(0x1c1)){const {data:_0x5e098a}=_0x1fe1db[_0x5be7f1(0x1f8)];_0x5e098a&&(_0x524ea4[_0x5be7f1(0x1be)][_0x5be7f1(0x1f6)](_0x5be7f1(0x208)),_0x524ea4[_0x5be7f1(0x1b9)](_0x5be7f1(0x211),{'val':JSON[_0x5be7f1(0x1cd)](_0x5e098a),'ack':!![]}));}else{if(_0x1fe1db[_0x5be7f1(0x203)]===_0x5be7f1(0x1bc))_0x524ea4['log'][_0x5be7f1(0x1c3)]('ðŸ\x20Python\x20confirmed\x20new\x20topology.');else{if(_0x1fe1db[_0x5be7f1(0x203)]===_0x5be7f1(0x1e9)){const {room:_0x198abf,propagation:_0x24d49f}=_0x1fe1db[_0x5be7f1(0x1f8)];let _0x22ce84='Unknown',_0xe690bd=0x0;if(_0x24d49f){const _0x26844d=Object[_0x5be7f1(0x20a)](_0x24d49f);_0x26844d[_0x5be7f1(0x1d9)]>0x0&&(_0x22ce84=_0x26844d[0x0][0x0],_0xe690bd=_0x26844d[0x0][0x1]);}_0x524ea4[_0x5be7f1(0x1b9)](_0x5be7f1(0x204),{'val':_0x22ce84,'ack':!![]}),_0x524ea4[_0x5be7f1(0x1b9)](_0x5be7f1(0x1d1),{'val':_0xe690bd,'ack':!![]}),_0xe690bd>0.4&&_0x524ea4[_0x5be7f1(0x1be)]['debug'](_0x5be7f1(0x1c2)+_0x198abf+'\x20->\x20Likely\x20'+_0x22ce84+'\x20('+(_0xe690bd*0x64)[_0x5be7f1(0x1f1)](0x0)+'%)'),automation['handlePrediction'](_0x524ea4,_0x22ce84,_0xe690bd);}}}}}}}}}}}}}}function startService(_0x26e39f,_0x1265c7){const _0xf65f77=a3_0x2ea43d;let _0x2c25f9='python3';if(fs['existsSync'](_0x1265c7))_0x2c25f9=_0x1265c7;try{const _0x496da4=path[_0xf65f77(0x1b4)](__dirname,'..',_0xf65f77(0x1e0),_0xf65f77(0x207));pythonProcess=spawn(_0x2c25f9,[_0x496da4]),pythonProcess[_0xf65f77(0x1ab)]['on'](_0xf65f77(0x1b1),_0x586851=>{const _0x5060f3=_0xf65f77,_0x1b7746=_0x586851[_0x5060f3(0x1e5)]()[_0x5060f3(0x1dc)]('\x0a');_0x1b7746[_0x5060f3(0x1fd)](_0x2f627a=>{const _0x482888=_0x5060f3,_0x467e87=_0x2f627a[_0x482888(0x1f9)]();if(!_0x467e87)return;if(_0x467e87[_0x482888(0x1cb)]('[LOG]'))_0x26e39f[_0x482888(0x1be)][_0x482888(0x1c3)]('[PYTHON]\x20'+_0x467e87[_0x482888(0x1f0)](0x5)[_0x482888(0x1f9)]());else{if(_0x467e87[_0x482888(0x1cb)](_0x482888(0x1ff)))try{const _0x37a16a=JSON['parse'](_0x467e87['substring'](0x8)[_0x482888(0x1f9)]());handleResult(_0x26e39f,_0x37a16a);}catch(_0x3ed60a){}}});}),pythonProcess['on'](_0xf65f77(0x1ec),_0xf5ae1=>{pythonProcess=null;}),_0x26e39f[_0xf65f77(0x1ae)]=(_0x28060,_0x4e8deb)=>send(_0x26e39f,_0x28060,_0x4e8deb);}catch(_0x1f4bfb){_0x26e39f[_0xf65f77(0x1be)][_0xf65f77(0x20b)](_0xf65f77(0x1b6)+_0x1f4bfb[_0xf65f77(0x1f4)]);}}function stopService(_0x5dd687){const _0x495294=a3_0x2ea43d;if(pythonProcess){try{pythonProcess[_0x495294(0x1ad)]();}catch(_0x1c27b0){}pythonProcess=null;}}module[a3_0x2ea43d(0x1b3)]={'startService':startService,'stopService':stopService,'send':send};