const a4_0x2cac7d=a4_0x10ce;(function(_0x531e0d,_0x4d082c){const _0x1226bc=a4_0x10ce,_0x3f5c8d=_0x531e0d();while(!![]){try{const _0xf130cd=parseInt(_0x1226bc(0xa5))/0x1+-parseInt(_0x1226bc(0xd1))/0x2*(parseInt(_0x1226bc(0x90))/0x3)+-parseInt(_0x1226bc(0xc9))/0x4+-parseInt(_0x1226bc(0xc6))/0x5+parseInt(_0x1226bc(0x92))/0x6*(-parseInt(_0x1226bc(0xc5))/0x7)+parseInt(_0x1226bc(0xcd))/0x8+parseInt(_0x1226bc(0xbc))/0x9;if(_0xf130cd===_0x4d082c)break;else _0x3f5c8d['push'](_0x3f5c8d['shift']());}catch(_0x48eb6b){_0x3f5c8d['push'](_0x3f5c8d['shift']());}}}(a4_0x5d40,0xca28d));function a4_0x5d40(){const _0x3c5a42=['analysis.automation.detectedPatterns','analysis.health.isAnomaly','analysis.alertReason','analysis.security.currentThreshold','stringify','1547773yBtteF','write','analysis.training.status','analysis.security.lastCheck','analysis.health.trendValue','info','search','rule','existsSync','ENERGY_PREDICT_RESULT','[PYTHON]\x20','Regel\x20erkannt:\x20','analysis.isAlert','debug','python3','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','data','analysis.energy.insulationScore','writable','trim','analysis.security.lastScore','success','./automation','6938748dnPeqx','analysis.health.trendDiagnosis','python_service','[RESULT]','Success:\x20','setStateAsync','heating','reason','ðŸ\x20Python\x20confirmed\x20new\x20topology.','119fcDPwL','1596375twikJY','length','HEALTH_RESULT','4572224BfkjIn','threshold','stdin','PONG','8164256DRNkyz','toString','forEach','[LOG]','789294KolGtR','GAIT_RESULT','SECURITY_RESULT','join','details','(((.+)+)+)+$','type','close','\x20->\x20','handlePrediction','analysis.automation.description','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','diagnosis','analysis.automation.patternDetected','analysis.security.topologyMatrix','TOPOLOGY_ACK','ANOMALY','HEALTH_TRAIN_RESULT','./setup','confidence','kill','SIGNAL_RESULT','analysis.health.gaitSpeed','analysis.energy.forecast','ENERGY_TRAIN_RESULT','Unknown','TRAINING_COMPLETE','entries','âš ï¸\x20SECURITY\x20ALARM:\x20','child_process','ðŸ\x20Python\x20Pong','exports','parse','log','analysis.prediction.confidence','startsWith','\x0aGrund:\x20','6DUoikj','sendToPythonWrapper','91626tfqJhs','sendNotification','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','COMFORT_RESULT','TREND_RESULT','ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.','payload','âœ…\x20HEALTH\x20TRAINED.','insulation','error','toISOString','TOPOLOGY_RESULT','substring','toFixed'];a4_0x5d40=function(){return _0x3c5a42;};return a4_0x5d40();}const a4_0x5116c9=(function(){let _0x27c85d=!![];return function(_0x1a6c31,_0xfc5e82){const _0x5de7f1=_0x27c85d?function(){if(_0xfc5e82){const _0x52a4f9=_0xfc5e82['apply'](_0x1a6c31,arguments);return _0xfc5e82=null,_0x52a4f9;}}:function(){};return _0x27c85d=![],_0x5de7f1;};}()),a4_0xeb9ec0=a4_0x5116c9(this,function(){const _0x34ccf6=a4_0x10ce;return a4_0xeb9ec0['toString']()[_0x34ccf6(0xab)](_0x34ccf6(0xd6))['toString']()['constructor'](a4_0xeb9ec0)['search'](_0x34ccf6(0xd6));});a4_0xeb9ec0();'use strict';const {spawn}=require(a4_0x2cac7d(0x88)),path=require('path'),fs=require('fs'),setup=require(a4_0x2cac7d(0x7d)),automation=require(a4_0x2cac7d(0xbb));let pythonProcess=null;function send(_0x181d3e,_0x4c1159,_0x4dbab0={}){const _0x5c4c3a=a4_0x2cac7d;if(!pythonProcess||!pythonProcess[_0x5c4c3a(0xcb)][_0x5c4c3a(0xb7)])return;const _0x46896e=JSON['stringify']({'command':_0x4c1159,..._0x4dbab0});try{pythonProcess[_0x5c4c3a(0xcb)][_0x5c4c3a(0xa6)](_0x46896e+'\x0a');}catch(_0x1f3c26){}}function handleResult(_0xbe9093,_0x4e44e8){const _0x36756f=a4_0x2cac7d;if(_0x4e44e8['type']===_0x36756f(0xcc))_0xbe9093['log']['debug'](_0x36756f(0x89));else{if(_0x4e44e8[_0x36756f(0xd7)]===_0x36756f(0xd3)){const {anomaly_score:_0x5bd4ca,is_anomaly:_0x57becd,threshold:_0x50c5fe,explanation:_0x262dfe}=_0x4e44e8[_0x36756f(0x98)];_0xbe9093['log']['info']('ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20'+_0x5bd4ca[_0x36756f(0x9f)](0x5)+_0x36756f(0xd9)+(_0x57becd?_0x36756f(0x7b):'OK')),_0xbe9093[_0x36756f(0xc1)](_0x36756f(0xb9),{'val':_0x5bd4ca,'ack':!![]}),_0xbe9093[_0x36756f(0xc1)](_0x36756f(0xa8),{'val':new Date()[_0x36756f(0x9c)](),'ack':!![]});if(_0x50c5fe)_0xbe9093[_0x36756f(0xc1)](_0x36756f(0xa3),{'val':_0x50c5fe,'ack':!![]});if(_0x57becd){let _0x5e26a6=_0x36756f(0x76)+_0x5bd4ca[_0x36756f(0x9f)](0x4)+')';if(_0x262dfe&&_0x262dfe!==_0x36756f(0x84))_0x5e26a6+=_0x36756f(0x8f)+_0x262dfe;_0xbe9093[_0x36756f(0xc1)](_0x36756f(0xb1),{'val':!![],'ack':!![]}),_0xbe9093[_0x36756f(0xc1)](_0x36756f(0xa2),{'val':_0x5e26a6,'ack':!![]}),setup[_0x36756f(0x93)](_0xbe9093,_0x36756f(0x87)+_0x5e26a6,![],!![]);}}else{if(_0x4e44e8[_0x36756f(0xd7)]===_0x36756f(0x85)){const _0x11f2fb=_0x4e44e8[_0x36756f(0x98)][_0x36756f(0xd5)]||'',_0x4cde92=_0x4e44e8[_0x36756f(0x98)][_0x36756f(0xca)],_0x25c5eb=_0x4e44e8[_0x36756f(0x98)][_0x36756f(0xba)]?_0x36756f(0xc0)+new Date()['toLocaleTimeString']()+'\x20('+_0x11f2fb+')':'Failed:\x20'+_0x4e44e8[_0x36756f(0x98)][_0x36756f(0xc3)];_0xbe9093[_0x36756f(0xc1)](_0x36756f(0xa7),{'val':_0x25c5eb,'ack':!![]});if(_0x4e44e8[_0x36756f(0x98)][_0x36756f(0xba)]&&_0x4cde92)_0xbe9093[_0x36756f(0xc1)](_0x36756f(0xa3),{'val':_0x4cde92,'ack':!![]});}else{if(_0x4e44e8[_0x36756f(0xd7)]===_0x36756f(0x95)){const {patterns:_0x5381b6}=_0x4e44e8[_0x36756f(0x98)];if(_0x5381b6&&_0x5381b6['length']>0x0){_0xbe9093[_0x36756f(0x8c)][_0x36756f(0xaa)](_0x36756f(0x94)+_0x5381b6['length']+'\x20new\x20patterns.'),_0xbe9093[_0x36756f(0xc1)](_0x36756f(0xa0),{'val':JSON[_0x36756f(0xa4)](_0x5381b6),'ack':!![]});const _0x56a002=_0x5381b6[0x0],_0x552f5b=_0x36756f(0xb0)+_0x56a002[_0x36756f(0xac)]+'\x20('+(_0x56a002[_0x36756f(0x7e)]*0x64)['toFixed'](0x0)+'%)';_0xbe9093[_0x36756f(0xc1)](_0x36756f(0x78),{'val':!![],'ack':!![]}),_0xbe9093[_0x36756f(0xc1)](_0x36756f(0x75),{'val':_0x552f5b,'ack':!![]});}else _0xbe9093[_0x36756f(0x8c)][_0x36756f(0xaa)](_0x36756f(0xb4)),_0xbe9093[_0x36756f(0xc1)](_0x36756f(0x78),{'val':![],'ack':!![]}),_0xbe9093[_0x36756f(0xc1)](_0x36756f(0xa0),{'val':'[]','ack':!![]});}else{if(_0x4e44e8[_0x36756f(0xd7)]===_0x36756f(0x83)){if(_0x4e44e8[_0x36756f(0x98)][_0x36756f(0xba)])try{const _0x292675=JSON[_0x36756f(0x8b)](_0x4e44e8['payload'][_0x36756f(0xd5)]);if(_0x292675[_0x36756f(0x9a)])_0xbe9093[_0x36756f(0xc1)](_0x36756f(0xb6),{'val':JSON['stringify'](_0x292675[_0x36756f(0x9a)]),'ack':!![]});if(_0x292675[_0x36756f(0xc2)])_0xbe9093[_0x36756f(0xc1)]('analysis.energy.heatingScore',{'val':JSON['stringify'](_0x292675['heating']),'ack':!![]});}catch(_0x460807){}}else{if(_0x4e44e8[_0x36756f(0xd7)]===_0x36756f(0x7c)){if(_0x4e44e8['payload'][_0x36756f(0xba)])_0xbe9093[_0x36756f(0x8c)]['info'](_0x36756f(0x99));}else{if(_0x4e44e8[_0x36756f(0xd7)]===_0x36756f(0xc8))_0xbe9093[_0x36756f(0xc1)]('analysis.health.lastCheck',{'val':new Date()['toISOString'](),'ack':!![]}),_0xbe9093[_0x36756f(0xc1)](_0x36756f(0xa1),{'val':_0x4e44e8[_0x36756f(0x98)]['is_anomaly'],'ack':!![]});else{if(_0x4e44e8[_0x36756f(0xd7)]===_0x36756f(0x96))_0xbe9093[_0x36756f(0xc1)](_0x36756f(0xbd),{'val':_0x4e44e8[_0x36756f(0x98)][_0x36756f(0x77)],'ack':!![]}),_0xbe9093['setStateAsync'](_0x36756f(0xa9),{'val':_0x4e44e8[_0x36756f(0x98)]['change_percent'],'ack':!![]});else{if(_0x4e44e8[_0x36756f(0xd7)]===_0x36756f(0xd2)){const {speed_trend:_0x1f9e37}=_0x4e44e8['payload'];if(_0x1f9e37!==undefined)_0xbe9093[_0x36756f(0xc1)](_0x36756f(0x81),{'val':_0x1f9e37,'ack':!![]});}else{if(_0x4e44e8[_0x36756f(0xd7)]===_0x36756f(0xae)){const {forecast:_0x5a0384}=_0x4e44e8[_0x36756f(0x98)];if(_0x5a0384)_0xbe9093['setStateAsync'](_0x36756f(0x82),{'val':JSON[_0x36756f(0xa4)](_0x5a0384),'ack':!![]});}else{if(_0x4e44e8[_0x36756f(0xd7)]===_0x36756f(0x9d)){const {data:_0x1e28c3}=_0x4e44e8[_0x36756f(0x98)];_0x1e28c3&&(_0xbe9093[_0x36756f(0x8c)]['info'](_0x36756f(0x97)),_0xbe9093[_0x36756f(0xc1)](_0x36756f(0x79),{'val':JSON[_0x36756f(0xa4)](_0x1e28c3),'ack':!![]}));}else{if(_0x4e44e8['type']===_0x36756f(0x7a))_0xbe9093[_0x36756f(0x8c)][_0x36756f(0xb2)](_0x36756f(0xc4));else{if(_0x4e44e8[_0x36756f(0xd7)]===_0x36756f(0x80)){const {room:_0x2c25e4,propagation:_0x462296}=_0x4e44e8[_0x36756f(0x98)];let _0x5bc849=_0x36756f(0x84),_0x565655=0x0;if(_0x462296){const _0x559941=Object[_0x36756f(0x86)](_0x462296);_0x559941[_0x36756f(0xc7)]>0x0&&(_0x5bc849=_0x559941[0x0][0x0],_0x565655=_0x559941[0x0][0x1]);}_0xbe9093[_0x36756f(0xc1)]('analysis.prediction.nextRoom',{'val':_0x5bc849,'ack':!![]}),_0xbe9093[_0x36756f(0xc1)](_0x36756f(0x8d),{'val':_0x565655,'ack':!![]}),_0x565655>0.4&&_0xbe9093['log'][_0x36756f(0xb2)]('ðŸ”®\x20Prediction:\x20From\x20'+_0x2c25e4+'\x20->\x20Likely\x20'+_0x5bc849+'\x20('+(_0x565655*0x64)[_0x36756f(0x9f)](0x0)+'%)'),automation[_0x36756f(0x74)](_0xbe9093,_0x5bc849,_0x565655);}}}}}}}}}}}}}}function startService(_0x451f43,_0xaf395d){const _0x47bfcd=a4_0x2cac7d;let _0x51fdb3=_0x47bfcd(0xb3);if(fs[_0x47bfcd(0xad)](_0xaf395d))_0x51fdb3=_0xaf395d;try{const _0x15f013=path[_0x47bfcd(0xd4)](__dirname,'..',_0x47bfcd(0xbe),'service.py');pythonProcess=spawn(_0x51fdb3,[_0x15f013]),pythonProcess['stdout']['on'](_0x47bfcd(0xb5),_0x56f9cc=>{const _0x23d624=_0x47bfcd,_0x5162bf=_0x56f9cc[_0x23d624(0xce)]()['split']('\x0a');_0x5162bf[_0x23d624(0xcf)](_0x19cd95=>{const _0x3cc30e=_0x23d624,_0x303ce7=_0x19cd95['trim']();if(!_0x303ce7)return;if(_0x303ce7[_0x3cc30e(0x8e)](_0x3cc30e(0xd0)))_0x451f43[_0x3cc30e(0x8c)][_0x3cc30e(0xb2)](_0x3cc30e(0xaf)+_0x303ce7['substring'](0x5)[_0x3cc30e(0xb8)]());else{if(_0x303ce7[_0x3cc30e(0x8e)](_0x3cc30e(0xbf)))try{const _0x1f8fc9=JSON[_0x3cc30e(0x8b)](_0x303ce7[_0x3cc30e(0x9e)](0x8)[_0x3cc30e(0xb8)]());handleResult(_0x451f43,_0x1f8fc9);}catch(_0x226bc6){}}});}),pythonProcess['on'](_0x47bfcd(0xd8),_0x1187cd=>{pythonProcess=null;}),_0x451f43[_0x47bfcd(0x91)]=(_0x42d9e3,_0x3092da)=>send(_0x451f43,_0x42d9e3,_0x3092da);}catch(_0x15ee92){_0x451f43[_0x47bfcd(0x8c)][_0x47bfcd(0x9b)]('Error\x20launching\x20Python:\x20'+_0x15ee92['message']);}}function stopService(_0x22d77f){const _0x2dc45b=a4_0x2cac7d;if(pythonProcess){try{pythonProcess[_0x2dc45b(0x7f)]();}catch(_0x4c0c57){}pythonProcess=null;}}function a4_0x10ce(_0x599c85,_0x36436b){const _0x507185=a4_0x5d40();return a4_0x10ce=function(_0xeb9ec0,_0x5116c9){_0xeb9ec0=_0xeb9ec0-0x74;let _0x5d4076=_0x507185[_0xeb9ec0];return _0x5d4076;},a4_0x10ce(_0x599c85,_0x36436b);}module[a4_0x2cac7d(0x8a)]={'startService':startService,'stopService':stopService,'send':send};