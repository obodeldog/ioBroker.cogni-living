const a3_0x151a37=a3_0x4155;(function(_0x2ed552,_0x23ee47){const _0x2ce54b=a3_0x4155,_0x374803=_0x2ed552();while(!![]){try{const _0x3d434c=-parseInt(_0x2ce54b(0xdf))/0x1+parseInt(_0x2ce54b(0xc5))/0x2+parseInt(_0x2ce54b(0xc4))/0x3+-parseInt(_0x2ce54b(0xcc))/0x4+-parseInt(_0x2ce54b(0xe2))/0x5*(-parseInt(_0x2ce54b(0xb7))/0x6)+parseInt(_0x2ce54b(0xdb))/0x7+parseInt(_0x2ce54b(0xb9))/0x8;if(_0x3d434c===_0x23ee47)break;else _0x374803['push'](_0x374803['shift']());}catch(_0x5d45b8){_0x374803['push'](_0x374803['shift']());}}}(a3_0x325a,0x5a18e));const a3_0xe3996f=(function(){let _0x105c5a=!![];return function(_0x15f836,_0x555c96){const _0x33cbe6=_0x105c5a?function(){const _0x57ad73=a3_0x4155;if(_0x555c96){const _0xf5c1ec=_0x555c96[_0x57ad73(0xa8)](_0x15f836,arguments);return _0x555c96=null,_0xf5c1ec;}}:function(){};return _0x105c5a=![],_0x33cbe6;};}()),a3_0x5e5c03=a3_0xe3996f(this,function(){const _0x381a1d=a3_0x4155;return a3_0x5e5c03[_0x381a1d(0xcf)]()['search'](_0x381a1d(0xcb))[_0x381a1d(0xcf)]()[_0x381a1d(0xe8)](a3_0x5e5c03)[_0x381a1d(0xf7)](_0x381a1d(0xcb));});a3_0x5e5c03();'use strict';const {spawn}=require(a3_0x151a37(0xbb)),path=require(a3_0x151a37(0xa7)),fs=require('fs'),setup=require(a3_0x151a37(0xce)),automation=require(a3_0x151a37(0xf9));function a3_0x325a(){const _0x2ef3cd=['ENERGY_PREDICT_RESULT','change_percent','TOPOLOGY_RESULT','ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.','174BbYobm','ðŸ\x20Python\x20Pong','782376xdDLFh','\x20new\x20patterns.','child_process','handlePrediction','analysis.automation.patternDetected','startsWith','reason','error','stringify','GAIT_RESULT','substring','720798qCFOCQ','980690CCNkyB','analysis.training.status','[RESULT]','stdin','analysis.security.lastCheck','rule','(((.+)+)+)+$','2298684NcuFfI','details','./setup','toString','exports','toLocaleTimeString','debug','analysis.health.lastCheck','python3','setStateAsync','insulation','\x0aGrund:\x20','ðŸ”®\x20Prediction:\x20From\x20','TREND_RESULT','analysis.security.currentThreshold','2782927lyAxvc','type','entries','analysis.prediction.confidence','330719kdYLfD','analysis.energy.forecast','analysis.automation.detectedPatterns','8355vJkyqV','Unknown','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','info','\x20->\x20','diagnosis','constructor','Success:\x20','join','SIGNAL_RESULT','analysis.energy.heatingScore','kill','toFixed','message','analysis.health.gaitSpeed','stdout','heating','service.py','analysis.prediction.nextRoom','ANOMALY','is_anomaly','search','âœ…\x20HEALTH\x20TRAINED.','./automation','analysis.automation.description','HEALTH_TRAIN_RESULT','analysis.alertReason','parse','forEach','COMFORT_RESULT','close','success','\x20->\x20Likely\x20','PONG','SECURITY_RESULT','path','apply','payload','trim','âš ï¸\x20SECURITY\x20ALARM:\x20','ENERGY_TRAIN_RESULT','Error\x20launching\x20Python:\x20','python_service','sendNotification','length','log','TRAINING_COMPLETE'];a3_0x325a=function(){return _0x2ef3cd;};return a3_0x325a();}let pythonProcess=null;function send(_0x1138a7,_0x7bee66,_0x72db0f={}){const _0x4f3062=a3_0x151a37;if(!pythonProcess||!pythonProcess[_0x4f3062(0xc8)]['writable'])return;const _0x288c5d=JSON[_0x4f3062(0xc1)]({'command':_0x7bee66,..._0x72db0f});try{pythonProcess['stdin']['write'](_0x288c5d+'\x0a');}catch(_0x1aa1a8){}}function handleResult(_0x8abe4d,_0x3024bf){const _0x1c602b=a3_0x151a37;if(_0x3024bf[_0x1c602b(0xdc)]===_0x1c602b(0xa5))_0x8abe4d[_0x1c602b(0xb1)][_0x1c602b(0xd2)](_0x1c602b(0xb8));else{if(_0x3024bf[_0x1c602b(0xdc)]===_0x1c602b(0xa6)){const {anomaly_score:_0x243e18,is_anomaly:_0x153892,threshold:_0x120900,explanation:_0x3b6b51}=_0x3024bf[_0x1c602b(0xa9)];_0x8abe4d[_0x1c602b(0xb1)][_0x1c602b(0xe5)](_0x1c602b(0xe4)+_0x243e18[_0x1c602b(0xee)](0x5)+_0x1c602b(0xe6)+(_0x153892?_0x1c602b(0xf5):'OK')),_0x8abe4d[_0x1c602b(0xd5)]('analysis.security.lastScore',{'val':_0x243e18,'ack':!![]}),_0x8abe4d['setStateAsync'](_0x1c602b(0xc9),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x120900)_0x8abe4d[_0x1c602b(0xd5)](_0x1c602b(0xda),{'val':_0x120900,'ack':!![]});if(_0x153892){let _0x282836='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x243e18[_0x1c602b(0xee)](0x4)+')';if(_0x3b6b51&&_0x3b6b51!==_0x1c602b(0xe3))_0x282836+=_0x1c602b(0xd7)+_0x3b6b51;_0x8abe4d[_0x1c602b(0xd5)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x8abe4d['setStateAsync'](_0x1c602b(0xfc),{'val':_0x282836,'ack':!![]}),setup[_0x1c602b(0xaf)](_0x8abe4d,_0x1c602b(0xab)+_0x282836,![],!![]);}}else{if(_0x3024bf[_0x1c602b(0xdc)]===_0x1c602b(0xb2)){const _0x4b3fcd=_0x3024bf['payload'][_0x1c602b(0xcd)]||'',_0x5edaed=_0x3024bf[_0x1c602b(0xa9)]['threshold'],_0x1ce92c=_0x3024bf[_0x1c602b(0xa9)][_0x1c602b(0xa3)]?_0x1c602b(0xe9)+new Date()[_0x1c602b(0xd1)]()+'\x20('+_0x4b3fcd+')':'Failed:\x20'+_0x3024bf['payload'][_0x1c602b(0xbf)];_0x8abe4d[_0x1c602b(0xd5)](_0x1c602b(0xc6),{'val':_0x1ce92c,'ack':!![]});if(_0x3024bf['payload'][_0x1c602b(0xa3)]&&_0x5edaed)_0x8abe4d[_0x1c602b(0xd5)]('analysis.security.currentThreshold',{'val':_0x5edaed,'ack':!![]});}else{if(_0x3024bf[_0x1c602b(0xdc)]===_0x1c602b(0xff)){const {patterns:_0x21f55e}=_0x3024bf[_0x1c602b(0xa9)];if(_0x21f55e&&_0x21f55e[_0x1c602b(0xb0)]>0x0){_0x8abe4d['log'][_0x1c602b(0xe5)]('ðŸ›‹ï¸\x20BUTLER:\x20Found\x20'+_0x21f55e[_0x1c602b(0xb0)]+_0x1c602b(0xba)),_0x8abe4d[_0x1c602b(0xd5)]('analysis.automation.detectedPatterns',{'val':JSON[_0x1c602b(0xc1)](_0x21f55e),'ack':!![]});const _0x30bb75=_0x21f55e[0x0],_0x54b3a3='Regel\x20erkannt:\x20'+_0x30bb75[_0x1c602b(0xca)]+'\x20('+(_0x30bb75['confidence']*0x64)['toFixed'](0x0)+'%)';_0x8abe4d[_0x1c602b(0xd5)](_0x1c602b(0xbd),{'val':!![],'ack':!![]}),_0x8abe4d[_0x1c602b(0xd5)](_0x1c602b(0xfa),{'val':_0x54b3a3,'ack':!![]});}else _0x8abe4d[_0x1c602b(0xb1)][_0x1c602b(0xe5)]('ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.'),_0x8abe4d[_0x1c602b(0xd5)](_0x1c602b(0xbd),{'val':![],'ack':!![]}),_0x8abe4d[_0x1c602b(0xd5)](_0x1c602b(0xe1),{'val':'[]','ack':!![]});}else{if(_0x3024bf['type']===_0x1c602b(0xac)){if(_0x3024bf[_0x1c602b(0xa9)]['success'])try{const _0x4d75d9=JSON[_0x1c602b(0xfd)](_0x3024bf[_0x1c602b(0xa9)][_0x1c602b(0xcd)]);if(_0x4d75d9[_0x1c602b(0xd6)])_0x8abe4d['setStateAsync']('analysis.energy.insulationScore',{'val':JSON[_0x1c602b(0xc1)](_0x4d75d9[_0x1c602b(0xd6)]),'ack':!![]});if(_0x4d75d9[_0x1c602b(0xf2)])_0x8abe4d[_0x1c602b(0xd5)](_0x1c602b(0xec),{'val':JSON[_0x1c602b(0xc1)](_0x4d75d9[_0x1c602b(0xf2)]),'ack':!![]});}catch(_0x48cedd){}}else{if(_0x3024bf['type']===_0x1c602b(0xfb)){if(_0x3024bf['payload'][_0x1c602b(0xa3)])_0x8abe4d[_0x1c602b(0xb1)][_0x1c602b(0xe5)](_0x1c602b(0xf8));}else{if(_0x3024bf[_0x1c602b(0xdc)]==='HEALTH_RESULT')_0x8abe4d[_0x1c602b(0xd5)](_0x1c602b(0xd3),{'val':new Date()['toISOString'](),'ack':!![]}),_0x8abe4d[_0x1c602b(0xd5)]('analysis.health.isAnomaly',{'val':_0x3024bf[_0x1c602b(0xa9)][_0x1c602b(0xf6)],'ack':!![]});else{if(_0x3024bf['type']===_0x1c602b(0xd9))_0x8abe4d[_0x1c602b(0xd5)]('analysis.health.trendDiagnosis',{'val':_0x3024bf[_0x1c602b(0xa9)][_0x1c602b(0xe7)],'ack':!![]}),_0x8abe4d[_0x1c602b(0xd5)]('analysis.health.trendValue',{'val':_0x3024bf['payload'][_0x1c602b(0xb4)],'ack':!![]});else{if(_0x3024bf[_0x1c602b(0xdc)]===_0x1c602b(0xc2)){const {speed_trend:_0x1afd4a}=_0x3024bf[_0x1c602b(0xa9)];if(_0x1afd4a!==undefined)_0x8abe4d[_0x1c602b(0xd5)](_0x1c602b(0xf0),{'val':_0x1afd4a,'ack':!![]});}else{if(_0x3024bf[_0x1c602b(0xdc)]===_0x1c602b(0xb3)){const {forecast:_0x14369f}=_0x3024bf[_0x1c602b(0xa9)];if(_0x14369f)_0x8abe4d[_0x1c602b(0xd5)](_0x1c602b(0xe0),{'val':JSON[_0x1c602b(0xc1)](_0x14369f),'ack':!![]});}else{if(_0x3024bf[_0x1c602b(0xdc)]===_0x1c602b(0xb5)){const {data:_0x9cdaa6}=_0x3024bf[_0x1c602b(0xa9)];_0x9cdaa6&&(_0x8abe4d['log']['info'](_0x1c602b(0xb6)),_0x8abe4d[_0x1c602b(0xd5)]('analysis.security.topologyMatrix',{'val':JSON[_0x1c602b(0xc1)](_0x9cdaa6),'ack':!![]}));}else{if(_0x3024bf[_0x1c602b(0xdc)]==='TOPOLOGY_ACK')_0x8abe4d[_0x1c602b(0xb1)][_0x1c602b(0xd2)]('ðŸ\x20Python\x20confirmed\x20new\x20topology.');else{if(_0x3024bf[_0x1c602b(0xdc)]===_0x1c602b(0xeb)){const {room:_0x2289c4,propagation:_0x2a3b3e}=_0x3024bf[_0x1c602b(0xa9)];let _0x73ae09=_0x1c602b(0xe3),_0x5a25da=0x0;if(_0x2a3b3e){const _0x35a498=Object[_0x1c602b(0xdd)](_0x2a3b3e);_0x35a498[_0x1c602b(0xb0)]>0x0&&(_0x73ae09=_0x35a498[0x0][0x0],_0x5a25da=_0x35a498[0x0][0x1]);}_0x8abe4d[_0x1c602b(0xd5)](_0x1c602b(0xf4),{'val':_0x73ae09,'ack':!![]}),_0x8abe4d[_0x1c602b(0xd5)](_0x1c602b(0xde),{'val':_0x5a25da,'ack':!![]}),_0x5a25da>0.4&&_0x8abe4d['log'][_0x1c602b(0xd2)](_0x1c602b(0xd8)+_0x2289c4+_0x1c602b(0xa4)+_0x73ae09+'\x20('+(_0x5a25da*0x64)['toFixed'](0x0)+'%)'),automation[_0x1c602b(0xbc)](_0x8abe4d,_0x73ae09,_0x5a25da);}}}}}}}}}}}}}}function a3_0x4155(_0x52c28b,_0x1ef083){const _0x481a59=a3_0x325a();return a3_0x4155=function(_0x5e5c03,_0xe3996f){_0x5e5c03=_0x5e5c03-0xa2;let _0x325ad7=_0x481a59[_0x5e5c03];return _0x325ad7;},a3_0x4155(_0x52c28b,_0x1ef083);}function startService(_0x54c7a9,_0x452bb2){const _0x37e138=a3_0x151a37;let _0x556a15=_0x37e138(0xd4);if(fs['existsSync'](_0x452bb2))_0x556a15=_0x452bb2;try{const _0x5ec4be=path[_0x37e138(0xea)](__dirname,'..',_0x37e138(0xae),_0x37e138(0xf3));pythonProcess=spawn(_0x556a15,[_0x5ec4be]),pythonProcess[_0x37e138(0xf1)]['on']('data',_0x972cea=>{const _0x119f69=_0x37e138,_0xa4e677=_0x972cea[_0x119f69(0xcf)]()['split']('\x0a');_0xa4e677[_0x119f69(0xfe)](_0x46d0d7=>{const _0x5b36da=_0x119f69,_0x5472ea=_0x46d0d7['trim']();if(!_0x5472ea)return;if(_0x5472ea['startsWith']('[LOG]'))_0x54c7a9['log'][_0x5b36da(0xd2)]('[PYTHON]\x20'+_0x5472ea[_0x5b36da(0xc3)](0x5)[_0x5b36da(0xaa)]());else{if(_0x5472ea[_0x5b36da(0xbe)](_0x5b36da(0xc7)))try{const _0x4a0f6e=JSON[_0x5b36da(0xfd)](_0x5472ea[_0x5b36da(0xc3)](0x8)[_0x5b36da(0xaa)]());handleResult(_0x54c7a9,_0x4a0f6e);}catch(_0x185fed){}}});}),pythonProcess['on'](_0x37e138(0xa2),_0x526615=>{pythonProcess=null;}),_0x54c7a9['sendToPythonWrapper']=(_0x76f7b7,_0x5f06f0)=>send(_0x54c7a9,_0x76f7b7,_0x5f06f0);}catch(_0x23dddf){_0x54c7a9[_0x37e138(0xb1)][_0x37e138(0xc0)](_0x37e138(0xad)+_0x23dddf[_0x37e138(0xef)]);}}function stopService(_0x48c90f){const _0x559f3d=a3_0x151a37;if(pythonProcess){try{pythonProcess[_0x559f3d(0xed)]();}catch(_0x1364b6){}pythonProcess=null;}}module[a3_0x151a37(0xd0)]={'startService':startService,'stopService':stopService,'send':send};