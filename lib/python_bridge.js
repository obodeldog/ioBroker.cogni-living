const a4_0x4c950d=a4_0x45ce;(function(_0x16f07b,_0x272186){const _0x46b865=a4_0x45ce,_0x4704c6=_0x16f07b();while(!![]){try{const _0x2ac9b1=parseInt(_0x46b865(0x1c9))/0x1*(-parseInt(_0x46b865(0x1cd))/0x2)+parseInt(_0x46b865(0x1aa))/0x3+parseInt(_0x46b865(0x18c))/0x4+parseInt(_0x46b865(0x19e))/0x5+parseInt(_0x46b865(0x1ca))/0x6*(-parseInt(_0x46b865(0x18a))/0x7)+-parseInt(_0x46b865(0x1a3))/0x8+-parseInt(_0x46b865(0x1a5))/0x9*(-parseInt(_0x46b865(0x1da))/0xa);if(_0x2ac9b1===_0x272186)break;else _0x4704c6['push'](_0x4704c6['shift']());}catch(_0x39bade){_0x4704c6['push'](_0x4704c6['shift']());}}}(a4_0x137a,0x73fbc));const a4_0x44ef6e=(function(){let _0x3837d4=!![];return function(_0x184ea6,_0x29531a){const _0x417538=_0x3837d4?function(){const _0x5ee3e0=a4_0x45ce;if(_0x29531a){const _0x372c0e=_0x29531a[_0x5ee3e0(0x180)](_0x184ea6,arguments);return _0x29531a=null,_0x372c0e;}}:function(){};return _0x3837d4=![],_0x417538;};}()),a4_0x37a66b=a4_0x44ef6e(this,function(){const _0x36c912=a4_0x45ce;return a4_0x37a66b[_0x36c912(0x1b2)]()[_0x36c912(0x1d0)](_0x36c912(0x181))[_0x36c912(0x1b2)]()[_0x36c912(0x1df)](a4_0x37a66b)[_0x36c912(0x1d0)](_0x36c912(0x181));});a4_0x37a66b();'use strict';const {spawn}=require(a4_0x4c950d(0x1dc)),path=require(a4_0x4c950d(0x1ae)),fs=require('fs'),setup=require(a4_0x4c950d(0x1db)),automation=require(a4_0x4c950d(0x195));function a4_0x45ce(_0x54b19f,_0x5dbe5f){const _0x46ecc3=a4_0x137a();return a4_0x45ce=function(_0x37a66b,_0x44ef6e){_0x37a66b=_0x37a66b-0x17f;let _0x137a2d=_0x46ecc3[_0x37a66b];return _0x137a2d;},a4_0x45ce(_0x54b19f,_0x5dbe5f);}function a4_0x137a(){const _0x3fde53=['SIGNAL_RESULT','analysis.energy.insulationScore','existsSync','PONG','./automation','\x0aGrund:\x20','threshold','setStateAsync','[PYTHON]\x20','ENERGY_TRAIN_RESULT','analysis.security.lastCheck','join','substring','4593310qohBYf','analysis.isAlert','ðŸ\x20Python\x20Pong','analysis.security.currentThreshold','success','6561288ZrJFxD','analysis.prediction.nextRoom','238527DVnasp','analysis.energy.warmupTimes','log','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','length','52017CGEuET','GAIT_RESULT','toLocaleTimeString','HEALTH_TRAIN_RESULT','path','PINN_PREDICT_RESULT','Failed:\x20','entries','toString','data','âš ï¸\x20SECURITY\x20ALARM:\x20','error','Success:\x20','toISOString','stdin','analysis.energy.mpcActive','sendToPythonWrapper','analysis.training.status','debug','analysis.prediction.trackerTopRoom','message','stdout','heating','analysis.health.gaitSpeed','Unknown','[LOG]','âœ…\x20HEALTH\x20TRAINED.','analysis.health.lastCheck','analysis.energy.pinnForecast','toFixed','details','1535JjNill','12498VyXwhr','startsWith','python3','344AHOQah','insulation','writable','search','analysis.energy.forecast','analysis.health.isAnomaly','Error\x20launching\x20Python:\x20','ENERGY_OPTIMIZE_RESULT','is_anomaly','analysis.prediction.trackerState','getState','service.py','trim','30VtiwzL','./setup','child_process','exports','VENTILATION_ALERT','constructor','SECURITY_RESULT','analysis.energy.ventilationAlerts','kill','split','close','TRACKER_RESULT','TRAINING_COMPLETE','analysis.energy.warmupDetails','apply','(((.+)+)+)+$','analysis.security.lastScore','stringify','analysis.prediction.trackerConfidence','val','analysis.alertReason','payload','forEach','write','483mWhfhg','type','2749864LyrfTP','HEALTH_RESULT','keys','analysis.prediction.confidence','ENERGY_PREDICT_RESULT'];a4_0x137a=function(){return _0x3fde53;};return a4_0x137a();}let pythonProcess=null;function send(_0x50f5e1,_0x496146,_0x1fbf28={}){const _0xd0d49=a4_0x4c950d;if(!pythonProcess||!pythonProcess[_0xd0d49(0x1b8)][_0xd0d49(0x1cf)])return;const _0x33cad5=JSON[_0xd0d49(0x183)]({'command':_0x496146,..._0x1fbf28});try{pythonProcess[_0xd0d49(0x1b8)][_0xd0d49(0x189)](_0x33cad5+'\x0a');}catch(_0x5f3592){}}function handleResult(_0x1b6b6a,_0x188803){const _0x250e62=a4_0x4c950d;if(_0x188803[_0x250e62(0x18b)]===_0x250e62(0x194))_0x1b6b6a[_0x250e62(0x1a7)]['debug'](_0x250e62(0x1a0));else{if(_0x188803['type']===_0x250e62(0x1e0)){const {anomaly_score:_0x4f6192,is_anomaly:_0x43f011,threshold:_0x276a58,explanation:_0x501366}=_0x188803[_0x250e62(0x187)];_0x1b6b6a[_0x250e62(0x198)](_0x250e62(0x182),{'val':_0x4f6192,'ack':!![]}),_0x1b6b6a[_0x250e62(0x198)](_0x250e62(0x19b),{'val':new Date()[_0x250e62(0x1b7)](),'ack':!![]});if(_0x276a58)_0x1b6b6a[_0x250e62(0x198)](_0x250e62(0x1a1),{'val':_0x276a58,'ack':!![]});if(_0x43f011){let _0x2aa930=_0x250e62(0x1a8)+_0x4f6192[_0x250e62(0x1c7)](0x4)+')';if(_0x501366&&_0x501366!==_0x250e62(0x1c2))_0x2aa930+=_0x250e62(0x196)+_0x501366;_0x1b6b6a[_0x250e62(0x198)](_0x250e62(0x19f),{'val':!![],'ack':!![]}),_0x1b6b6a['setStateAsync'](_0x250e62(0x186),{'val':_0x2aa930,'ack':!![]}),setup['sendNotification'](_0x1b6b6a,_0x250e62(0x1b4)+_0x2aa930,![],!![]);}}else{if(_0x188803[_0x250e62(0x18b)]===_0x250e62(0x1e6)){const _0x24b408=_0x188803[_0x250e62(0x187)]['details']||'',_0x4497c3=_0x188803[_0x250e62(0x187)][_0x250e62(0x197)],_0x360d4b=_0x188803[_0x250e62(0x187)][_0x250e62(0x1a2)]?_0x250e62(0x1b6)+new Date()[_0x250e62(0x1ac)]()+'\x20('+_0x24b408+')':_0x250e62(0x1b0)+_0x188803[_0x250e62(0x187)]['reason'];_0x1b6b6a[_0x250e62(0x198)](_0x250e62(0x1bb),{'val':_0x360d4b,'ack':!![]});if(_0x188803[_0x250e62(0x187)][_0x250e62(0x1a2)]&&_0x4497c3)_0x1b6b6a[_0x250e62(0x198)](_0x250e62(0x1a1),{'val':_0x4497c3,'ack':!![]});}else{if(_0x188803[_0x250e62(0x18b)]===_0x250e62(0x19a)){if(_0x188803['payload'][_0x250e62(0x1a2)])try{const _0x5b7f4c=JSON['parse'](_0x188803[_0x250e62(0x187)][_0x250e62(0x1c8)]);if(_0x5b7f4c[_0x250e62(0x1ce)])_0x1b6b6a['setStateAsync'](_0x250e62(0x192),{'val':JSON[_0x250e62(0x183)](_0x5b7f4c[_0x250e62(0x1ce)]),'ack':!![]});if(_0x5b7f4c[_0x250e62(0x1c0)])_0x1b6b6a[_0x250e62(0x198)]('analysis.energy.heatingScore',{'val':JSON['stringify'](_0x5b7f4c[_0x250e62(0x1c0)]),'ack':!![]});}catch(_0x5e5012){}}else{if(_0x188803[_0x250e62(0x18b)]===_0x250e62(0x1ad)){if(_0x188803[_0x250e62(0x187)][_0x250e62(0x1a2)])_0x1b6b6a[_0x250e62(0x1a7)]['info'](_0x250e62(0x1c4));}else{if(_0x188803[_0x250e62(0x18b)]===_0x250e62(0x18d))_0x1b6b6a[_0x250e62(0x198)](_0x250e62(0x1c5),{'val':new Date()['toISOString'](),'ack':!![]}),_0x1b6b6a[_0x250e62(0x198)](_0x250e62(0x1d2),{'val':_0x188803[_0x250e62(0x187)][_0x250e62(0x1d5)],'ack':!![]});else{if(_0x188803[_0x250e62(0x18b)]===_0x250e62(0x1ab)){const {speed_trend:_0x3dd73d}=_0x188803[_0x250e62(0x187)];if(_0x3dd73d!==undefined)_0x1b6b6a[_0x250e62(0x198)](_0x250e62(0x1c1),{'val':_0x3dd73d,'ack':!![]});}else{if(_0x188803['type']===_0x250e62(0x190)){const {forecast:_0x22096d}=_0x188803[_0x250e62(0x187)];if(_0x22096d)_0x1b6b6a[_0x250e62(0x198)](_0x250e62(0x1d1),{'val':JSON['stringify'](_0x22096d),'ack':!![]});}else{if(_0x188803[_0x250e62(0x18b)]==='WARMUP_RESULT'){const {times:_0x6f5220,sources:_0x25de1b,details:_0x33bcc0}=_0x188803[_0x250e62(0x187)];if(_0x6f5220)_0x1b6b6a[_0x250e62(0x198)](_0x250e62(0x1a6),{'val':JSON[_0x250e62(0x183)](_0x6f5220),'ack':!![]});if(_0x25de1b)_0x1b6b6a[_0x250e62(0x198)]('analysis.energy.warmupSources',{'val':JSON[_0x250e62(0x183)](_0x25de1b),'ack':!![]});if(_0x33bcc0)_0x1b6b6a[_0x250e62(0x198)](_0x250e62(0x17f),{'val':JSON[_0x250e62(0x183)](_0x33bcc0),'ack':!![]});}else{if(_0x188803['type']==='RL_PENALTY_UPDATE'){const {penalties:_0x2ac7b1}=_0x188803[_0x250e62(0x187)];if(_0x2ac7b1)_0x1b6b6a[_0x250e62(0x198)]('analysis.energy.rlPenalties',{'val':JSON[_0x250e62(0x183)](_0x2ac7b1),'ack':!![]});}else{if(_0x188803[_0x250e62(0x18b)]===_0x250e62(0x1af)){const {forecast:_0x5e5483}=_0x188803[_0x250e62(0x187)];if(_0x5e5483)_0x1b6b6a[_0x250e62(0x198)](_0x250e62(0x1c6),{'val':JSON[_0x250e62(0x183)](_0x5e5483),'ack':!![]});}else{if(_0x188803[_0x250e62(0x18b)]===_0x250e62(0x1de)){const {alerts:_0x4f6be7}=_0x188803[_0x250e62(0x187)];if(_0x4f6be7)_0x1b6b6a[_0x250e62(0x198)](_0x250e62(0x1e1),{'val':JSON[_0x250e62(0x183)](_0x4f6be7),'ack':!![]});}else{if(_0x188803['type']===_0x250e62(0x1d4)){const {proposals:_0x15e927}=_0x188803[_0x250e62(0x187)];_0x1b6b6a[_0x250e62(0x1d7)](_0x250e62(0x1b9),(_0x56c9c4,_0x1f972e)=>{const _0x4e9448=_0x250e62;_0x1f972e&&_0x1f972e[_0x4e9448(0x185)]===!![]&&_0x15e927&&_0x15e927[_0x4e9448(0x1a9)]>0x0&&automation['applyEnergySavings'](_0x1b6b6a,_0x15e927);});}else{if(_0x188803[_0x250e62(0x18b)]===_0x250e62(0x191)){const {room:_0x56b01b,propagation:_0x328711}=_0x188803[_0x250e62(0x187)];let _0x452621=_0x250e62(0x1c2),_0x594951=0x0;if(_0x328711){const _0x1fe77a=Object[_0x250e62(0x1b1)](_0x328711);_0x1fe77a[_0x250e62(0x1a9)]>0x0&&(_0x452621=_0x1fe77a[0x0][0x0],_0x594951=_0x1fe77a[0x0][0x1]);}_0x1b6b6a[_0x250e62(0x198)](_0x250e62(0x1a4),{'val':_0x452621,'ack':!![]}),_0x1b6b6a['setStateAsync'](_0x250e62(0x18f),{'val':_0x594951,'ack':!![]}),automation['handlePrediction'](_0x1b6b6a,_0x452621,_0x594951);}else{if(_0x188803[_0x250e62(0x18b)]===_0x250e62(0x1e5)){const {probabilities:_0x2aae77}=_0x188803[_0x250e62(0x187)];if(_0x2aae77){_0x1b6b6a[_0x250e62(0x198)](_0x250e62(0x1d6),{'val':JSON[_0x250e62(0x183)](_0x2aae77),'ack':!![]});const _0x4ea462=Object[_0x250e62(0x18e)](_0x2aae77);if(_0x4ea462['length']>0x0){const _0x2b107f=_0x4ea462[0x0],_0x8866ca=_0x2aae77[_0x2b107f];_0x1b6b6a[_0x250e62(0x198)](_0x250e62(0x1bd),{'val':_0x2b107f,'ack':!![]}),_0x1b6b6a[_0x250e62(0x198)](_0x250e62(0x184),{'val':_0x8866ca,'ack':!![]});}}}else{if(_0x188803[_0x250e62(0x18b)]==='COMFORT_RESULT'){const {patterns:_0x311a56}=_0x188803['payload'];if(_0x311a56&&_0x311a56['length']>0x0)_0x1b6b6a[_0x250e62(0x198)]('analysis.automation.detectedPatterns',{'val':JSON[_0x250e62(0x183)](_0x311a56),'ack':!![]});}}}}}}}}}}}}}}}}}function startService(_0x1efc79,_0x371b9a){const _0x5ddc26=a4_0x4c950d;let _0x1c4f4f=_0x5ddc26(0x1cc);if(fs[_0x5ddc26(0x193)](_0x371b9a))_0x1c4f4f=_0x371b9a;try{const _0x318669=path[_0x5ddc26(0x19c)](__dirname,'..','python_service',_0x5ddc26(0x1d8));pythonProcess=spawn(_0x1c4f4f,[_0x318669]),pythonProcess[_0x5ddc26(0x1bf)]['on'](_0x5ddc26(0x1b3),_0x44944a=>{const _0x533c5c=_0x5ddc26,_0x336a28=_0x44944a[_0x533c5c(0x1b2)]()[_0x533c5c(0x1e3)]('\x0a');_0x336a28[_0x533c5c(0x188)](_0x3ee809=>{const _0x3ef554=_0x533c5c,_0x3e5718=_0x3ee809[_0x3ef554(0x1d9)]();if(!_0x3e5718)return;if(_0x3e5718[_0x3ef554(0x1cb)](_0x3ef554(0x1c3)))_0x1efc79['log'][_0x3ef554(0x1bc)](_0x3ef554(0x199)+_0x3e5718[_0x3ef554(0x19d)](0x5)['trim']());else{if(_0x3e5718[_0x3ef554(0x1cb)]('[RESULT]'))try{const _0xb79395=JSON['parse'](_0x3e5718[_0x3ef554(0x19d)](0x8)[_0x3ef554(0x1d9)]());handleResult(_0x1efc79,_0xb79395);}catch(_0x2113c1){}}});}),pythonProcess['on'](_0x5ddc26(0x1e4),_0x3903a7=>{pythonProcess=null;}),_0x1efc79[_0x5ddc26(0x1ba)]=(_0x4e316c,_0x614d2e)=>send(_0x1efc79,_0x4e316c,_0x614d2e);}catch(_0x359071){_0x1efc79[_0x5ddc26(0x1a7)][_0x5ddc26(0x1b5)](_0x5ddc26(0x1d3)+_0x359071[_0x5ddc26(0x1be)]);}}function stopService(_0x475b98){const _0x41dd25=a4_0x4c950d;if(pythonProcess){try{pythonProcess[_0x41dd25(0x1e2)]();}catch(_0x337718){}pythonProcess=null;}}module[a4_0x4c950d(0x1dd)]={'startService':startService,'stopService':stopService,'send':send};