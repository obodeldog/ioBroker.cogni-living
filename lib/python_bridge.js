const a4_0x35e8e1=a4_0x51c8;(function(_0xc2d626,_0x29b3db){const _0xde5b94=a4_0x51c8,_0x2aebf7=_0xc2d626();while(!![]){try{const _0x56c903=parseInt(_0xde5b94(0xe5))/0x1+-parseInt(_0xde5b94(0xd7))/0x2*(-parseInt(_0xde5b94(0xe9))/0x3)+parseInt(_0xde5b94(0xa8))/0x4+-parseInt(_0xde5b94(0xbf))/0x5*(-parseInt(_0xde5b94(0xbe))/0x6)+parseInt(_0xde5b94(0xf6))/0x7+parseInt(_0xde5b94(0xb8))/0x8+parseInt(_0xde5b94(0xa3))/0x9*(-parseInt(_0xde5b94(0xba))/0xa);if(_0x56c903===_0x29b3db)break;else _0x2aebf7['push'](_0x2aebf7['shift']());}catch(_0x36db66){_0x2aebf7['push'](_0x2aebf7['shift']());}}}(a4_0x3702,0x98ba1));const a4_0x1b8da1=(function(){let _0x4caa28=!![];return function(_0x4e0b80,_0x3fff20){const _0x12668d=_0x4caa28?function(){if(_0x3fff20){const _0x337b8c=_0x3fff20['apply'](_0x4e0b80,arguments);return _0x3fff20=null,_0x337b8c;}}:function(){};return _0x4caa28=![],_0x12668d;};}()),a4_0x412116=a4_0x1b8da1(this,function(){const _0x5b3bb1=a4_0x51c8;return a4_0x412116[_0x5b3bb1(0xa4)]()[_0x5b3bb1(0xc4)](_0x5b3bb1(0xe7))[_0x5b3bb1(0xa4)]()['constructor'](a4_0x412116)[_0x5b3bb1(0xc4)]('(((.+)+)+)+$');});a4_0x412116();'use strict';function a4_0x3702(){const _0xd8ddac=['UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','forEach','search','threshold','toISOString','ENERGY_PREDICT_RESULT','payload','analysis.isAlert','trim','heating','SECURITY_RESULT','insulation','sendToPythonWrapper','details','parse','entries','success','sendNotification','python_service','analysis.security.lastCheck','keys','130mOloRn','kill','close','âš ï¸\x20SECURITY\x20ALARM:\x20','stdout','write','[PYTHON]\x20','analysis.prediction.confidence','./setup','analysis.energy.forecast','analysis.energy.mpcActive','length','substring','Success:\x20','412897zUGUwc','Unknown','(((.+)+)+)+$','stdin','40461WqDThC','PINN_PREDICT_RESULT','analysis.energy.pinnForecast','info','type','analysis.training.status','analysis.prediction.trackerTopRoom','analysis.automation.detectedPatterns','reason','analysis.security.lastScore','val','handlePrediction','existsSync','7428309jCxkNd','analysis.prediction.trackerConfidence','PONG','debug','3325113UYLDuu','toString','analysis.security.currentThreshold','HEALTH_TRAIN_RESULT','COMFORT_RESULT','2755484wsnlTO','TRACKER_RESULT','setStateAsync','toFixed','log','TRAINING_COMPLETE','\x0aGrund:\x20','startsWith','analysis.alertReason','analysis.energy.heatingScore','is_anomaly','ENERGY_TRAIN_RESULT','python3','split','GAIT_RESULT','analysis.energy.insulationScore','9668568KbAYom','toLocaleTimeString','130fCyLsD','ðŸ\x20Python\x20Pong','âœ…\x20HEALTH\x20TRAINED.','writable','18PGraTX','1967215acjaXH','stringify','Failed:\x20'];a4_0x3702=function(){return _0xd8ddac;};return a4_0x3702();}const {spawn}=require('child_process'),path=require('path'),fs=require('fs'),setup=require(a4_0x35e8e1(0xdf)),automation=require('./automation');let pythonProcess=null;function send(_0x23be33,_0x1363f2,_0xa72602={}){const _0x436c7e=a4_0x35e8e1;if(!pythonProcess||!pythonProcess['stdin'][_0x436c7e(0xbd)])return;const _0x5f06dc=JSON[_0x436c7e(0xc0)]({'command':_0x1363f2,..._0xa72602});try{pythonProcess[_0x436c7e(0xe8)][_0x436c7e(0xdc)](_0x5f06dc+'\x0a');}catch(_0x5ca8eb){}}function handleResult(_0xd7ac5a,_0x16ddf8){const _0x55f5b4=a4_0x35e8e1;if(_0x16ddf8[_0x55f5b4(0xed)]===_0x55f5b4(0xa1))_0xd7ac5a[_0x55f5b4(0xac)][_0x55f5b4(0xa2)](_0x55f5b4(0xbb));else{if(_0x16ddf8[_0x55f5b4(0xed)]===_0x55f5b4(0xcc)){const {anomaly_score:_0x562c5a,is_anomaly:_0x2cc64d,threshold:_0x1dcfa2,explanation:_0x5c9161}=_0x16ddf8[_0x55f5b4(0xc8)];_0xd7ac5a['setStateAsync'](_0x55f5b4(0xf2),{'val':_0x562c5a,'ack':!![]}),_0xd7ac5a['setStateAsync'](_0x55f5b4(0xd5),{'val':new Date()[_0x55f5b4(0xc6)](),'ack':!![]});if(_0x1dcfa2)_0xd7ac5a[_0x55f5b4(0xaa)](_0x55f5b4(0xa5),{'val':_0x1dcfa2,'ack':!![]});if(_0x2cc64d){let _0x355dc2=_0x55f5b4(0xc2)+_0x562c5a[_0x55f5b4(0xab)](0x4)+')';if(_0x5c9161&&_0x5c9161!==_0x55f5b4(0xe6))_0x355dc2+=_0x55f5b4(0xae)+_0x5c9161;_0xd7ac5a[_0x55f5b4(0xaa)](_0x55f5b4(0xc9),{'val':!![],'ack':!![]}),_0xd7ac5a[_0x55f5b4(0xaa)](_0x55f5b4(0xb0),{'val':_0x355dc2,'ack':!![]}),setup[_0x55f5b4(0xd3)](_0xd7ac5a,_0x55f5b4(0xda)+_0x355dc2,![],!![]);}}else{if(_0x16ddf8[_0x55f5b4(0xed)]===_0x55f5b4(0xad)){const _0x177505=_0x16ddf8[_0x55f5b4(0xc8)][_0x55f5b4(0xcf)]||'',_0x4878a2=_0x16ddf8[_0x55f5b4(0xc8)][_0x55f5b4(0xc5)],_0x3dcb8e=_0x16ddf8['payload'][_0x55f5b4(0xd2)]?_0x55f5b4(0xe4)+new Date()[_0x55f5b4(0xb9)]()+'\x20('+_0x177505+')':_0x55f5b4(0xc1)+_0x16ddf8[_0x55f5b4(0xc8)][_0x55f5b4(0xf1)];_0xd7ac5a[_0x55f5b4(0xaa)](_0x55f5b4(0xee),{'val':_0x3dcb8e,'ack':!![]});if(_0x16ddf8[_0x55f5b4(0xc8)][_0x55f5b4(0xd2)]&&_0x4878a2)_0xd7ac5a[_0x55f5b4(0xaa)](_0x55f5b4(0xa5),{'val':_0x4878a2,'ack':!![]});}else{if(_0x16ddf8[_0x55f5b4(0xed)]===_0x55f5b4(0xb3)){if(_0x16ddf8['payload'][_0x55f5b4(0xd2)])try{const _0xc3e46a=JSON[_0x55f5b4(0xd0)](_0x16ddf8[_0x55f5b4(0xc8)]['details']);if(_0xc3e46a[_0x55f5b4(0xcd)])_0xd7ac5a[_0x55f5b4(0xaa)](_0x55f5b4(0xb7),{'val':JSON['stringify'](_0xc3e46a['insulation']),'ack':!![]});if(_0xc3e46a[_0x55f5b4(0xcb)])_0xd7ac5a[_0x55f5b4(0xaa)](_0x55f5b4(0xb1),{'val':JSON['stringify'](_0xc3e46a[_0x55f5b4(0xcb)]),'ack':!![]});}catch(_0x2be038){}}else{if(_0x16ddf8[_0x55f5b4(0xed)]===_0x55f5b4(0xa6)){if(_0x16ddf8[_0x55f5b4(0xc8)][_0x55f5b4(0xd2)])_0xd7ac5a[_0x55f5b4(0xac)][_0x55f5b4(0xec)](_0x55f5b4(0xbc));}else{if(_0x16ddf8[_0x55f5b4(0xed)]==='HEALTH_RESULT')_0xd7ac5a[_0x55f5b4(0xaa)]('analysis.health.lastCheck',{'val':new Date()['toISOString'](),'ack':!![]}),_0xd7ac5a[_0x55f5b4(0xaa)]('analysis.health.isAnomaly',{'val':_0x16ddf8[_0x55f5b4(0xc8)][_0x55f5b4(0xb2)],'ack':!![]});else{if(_0x16ddf8[_0x55f5b4(0xed)]===_0x55f5b4(0xb6)){const {speed_trend:_0x1179c8}=_0x16ddf8[_0x55f5b4(0xc8)];if(_0x1179c8!==undefined)_0xd7ac5a[_0x55f5b4(0xaa)]('analysis.health.gaitSpeed',{'val':_0x1179c8,'ack':!![]});}else{if(_0x16ddf8[_0x55f5b4(0xed)]===_0x55f5b4(0xc7)){const {forecast:_0x4ae358}=_0x16ddf8[_0x55f5b4(0xc8)];if(_0x4ae358)_0xd7ac5a['setStateAsync'](_0x55f5b4(0xe0),{'val':JSON[_0x55f5b4(0xc0)](_0x4ae358),'ack':!![]});}else{if(_0x16ddf8[_0x55f5b4(0xed)]===_0x55f5b4(0xea)){const {forecast:_0x25eed9}=_0x16ddf8[_0x55f5b4(0xc8)];if(_0x25eed9)_0xd7ac5a['setStateAsync'](_0x55f5b4(0xeb),{'val':JSON['stringify'](_0x25eed9),'ack':!![]});}else{if(_0x16ddf8[_0x55f5b4(0xed)]==='ENERGY_OPTIMIZE_RESULT'){const {proposals:_0x28fa18}=_0x16ddf8[_0x55f5b4(0xc8)];_0xd7ac5a['getState'](_0x55f5b4(0xe1),(_0x25d75f,_0x3a5f7f)=>{const _0x35513f=_0x55f5b4;_0x3a5f7f&&_0x3a5f7f[_0x35513f(0xf3)]===!![]&&_0x28fa18&&_0x28fa18['length']>0x0&&automation['applyEnergySavings'](_0xd7ac5a,_0x28fa18);});}else{if(_0x16ddf8['type']==='SIGNAL_RESULT'){const {room:_0x37f4e,propagation:_0x4a19a7}=_0x16ddf8[_0x55f5b4(0xc8)];let _0x1362a4=_0x55f5b4(0xe6),_0x1d716a=0x0;if(_0x4a19a7){const _0x3d4b36=Object[_0x55f5b4(0xd1)](_0x4a19a7);_0x3d4b36[_0x55f5b4(0xe2)]>0x0&&(_0x1362a4=_0x3d4b36[0x0][0x0],_0x1d716a=_0x3d4b36[0x0][0x1]);}_0xd7ac5a[_0x55f5b4(0xaa)]('analysis.prediction.nextRoom',{'val':_0x1362a4,'ack':!![]}),_0xd7ac5a['setStateAsync'](_0x55f5b4(0xde),{'val':_0x1d716a,'ack':!![]}),automation[_0x55f5b4(0xf4)](_0xd7ac5a,_0x1362a4,_0x1d716a);}else{if(_0x16ddf8['type']===_0x55f5b4(0xa9)){const {probabilities:_0x4f3f75}=_0x16ddf8[_0x55f5b4(0xc8)];if(_0x4f3f75){_0xd7ac5a[_0x55f5b4(0xaa)]('analysis.prediction.trackerState',{'val':JSON[_0x55f5b4(0xc0)](_0x4f3f75),'ack':!![]});const _0x458c4a=Object[_0x55f5b4(0xd6)](_0x4f3f75);if(_0x458c4a['length']>0x0){const _0x4c255c=_0x458c4a[0x0],_0x2f0923=_0x4f3f75[_0x4c255c];_0xd7ac5a[_0x55f5b4(0xaa)](_0x55f5b4(0xef),{'val':_0x4c255c,'ack':!![]}),_0xd7ac5a[_0x55f5b4(0xaa)](_0x55f5b4(0xa0),{'val':_0x2f0923,'ack':!![]});}}}else{if(_0x16ddf8[_0x55f5b4(0xed)]===_0x55f5b4(0xa7)){const {patterns:_0x4ef8da}=_0x16ddf8[_0x55f5b4(0xc8)];if(_0x4ef8da&&_0x4ef8da[_0x55f5b4(0xe2)]>0x0)_0xd7ac5a[_0x55f5b4(0xaa)](_0x55f5b4(0xf0),{'val':JSON[_0x55f5b4(0xc0)](_0x4ef8da),'ack':!![]});}}}}}}}}}}}}}}function a4_0x51c8(_0x5bc548,_0x30c19e){const _0x4fba37=a4_0x3702();return a4_0x51c8=function(_0x412116,_0x1b8da1){_0x412116=_0x412116-0xa0;let _0x370205=_0x4fba37[_0x412116];return _0x370205;},a4_0x51c8(_0x5bc548,_0x30c19e);}function startService(_0x3e3991,_0x972e71){const _0x364608=a4_0x35e8e1;let _0x16fdc6=_0x364608(0xb4);if(fs[_0x364608(0xf5)](_0x972e71))_0x16fdc6=_0x972e71;try{const _0x4bdf03=path['join'](__dirname,'..',_0x364608(0xd4),'service.py');pythonProcess=spawn(_0x16fdc6,[_0x4bdf03]),pythonProcess[_0x364608(0xdb)]['on']('data',_0x87d35b=>{const _0x3100ef=_0x364608,_0x20bcfb=_0x87d35b[_0x3100ef(0xa4)]()[_0x3100ef(0xb5)]('\x0a');_0x20bcfb[_0x3100ef(0xc3)](_0x4cf2a2=>{const _0x43bfc0=_0x3100ef,_0x9b1f43=_0x4cf2a2[_0x43bfc0(0xca)]();if(!_0x9b1f43)return;if(_0x9b1f43['startsWith']('[LOG]'))_0x3e3991['log'][_0x43bfc0(0xa2)](_0x43bfc0(0xdd)+_0x9b1f43[_0x43bfc0(0xe3)](0x5)[_0x43bfc0(0xca)]());else{if(_0x9b1f43[_0x43bfc0(0xaf)]('[RESULT]'))try{const _0x22d00a=JSON[_0x43bfc0(0xd0)](_0x9b1f43['substring'](0x8)[_0x43bfc0(0xca)]());handleResult(_0x3e3991,_0x22d00a);}catch(_0x5f2f6a){}}});}),pythonProcess['on'](_0x364608(0xd9),_0x2d4884=>{pythonProcess=null;}),_0x3e3991[_0x364608(0xce)]=(_0x3ee4aa,_0x38823c)=>send(_0x3e3991,_0x3ee4aa,_0x38823c);}catch(_0x210e59){_0x3e3991['log']['error']('Error\x20launching\x20Python:\x20'+_0x210e59['message']);}}function stopService(_0x138f78){const _0x5b4c99=a4_0x35e8e1;if(pythonProcess){try{pythonProcess[_0x5b4c99(0xd8)]();}catch(_0x3dceee){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};