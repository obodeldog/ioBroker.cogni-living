const a4_0xcba530=a4_0x4c15;(function(_0x535f65,_0x1b0e12){const _0x3e0390=a4_0x4c15,_0x272568=_0x535f65();while(!![]){try{const _0x299c6a=parseInt(_0x3e0390(0xe5))/0x1*(parseInt(_0x3e0390(0xf6))/0x2)+parseInt(_0x3e0390(0xf0))/0x3*(-parseInt(_0x3e0390(0x110))/0x4)+-parseInt(_0x3e0390(0xf1))/0x5*(parseInt(_0x3e0390(0x105))/0x6)+-parseInt(_0x3e0390(0xe7))/0x7*(-parseInt(_0x3e0390(0xfc))/0x8)+parseInt(_0x3e0390(0x11f))/0x9+parseInt(_0x3e0390(0xd4))/0xa+-parseInt(_0x3e0390(0xcf))/0xb*(parseInt(_0x3e0390(0x117))/0xc);if(_0x299c6a===_0x1b0e12)break;else _0x272568['push'](_0x272568['shift']());}catch(_0x54cf8d){_0x272568['push'](_0x272568['shift']());}}}(a4_0x48cd,0x722ff));function a4_0x4c15(_0x2f0e2e,_0x3915b8){const _0x4821a3=a4_0x48cd();return a4_0x4c15=function(_0x55e886,_0x4e2a58){_0x55e886=_0x55e886-0xcc;let _0x48cd72=_0x4821a3[_0x55e886];return _0x48cd72;},a4_0x4c15(_0x2f0e2e,_0x3915b8);}const a4_0x4e2a58=(function(){let _0x4c9f22=!![];return function(_0x4d7ee3,_0x145dc8){const _0x4a3bcb=_0x4c9f22?function(){const _0x570f9e=a4_0x4c15;if(_0x145dc8){const _0x48c73a=_0x145dc8[_0x570f9e(0xd2)](_0x4d7ee3,arguments);return _0x145dc8=null,_0x48c73a;}}:function(){};return _0x4c9f22=![],_0x4a3bcb;};}()),a4_0x55e886=a4_0x4e2a58(this,function(){const _0x45165a=a4_0x4c15;return a4_0x55e886['toString']()[_0x45165a(0x118)](_0x45165a(0xea))[_0x45165a(0x11b)]()['constructor'](a4_0x55e886)[_0x45165a(0x118)](_0x45165a(0xea));});function a4_0x48cd(){const _0x91d3b3=['COMFORT_RESULT','49168GmyqPg','ENERGY_PREDICT_RESULT','analysis.energy.insulationScore','(((.+)+)+)+$','analysis.training.status','parse','log','Failed:\x20','trim','175893xYUxqu','25vYPpZE','handlePrediction','âœ…\x20HEALTH\x20TRAINED.','info','applyEnergySavings','6ClmOxp','entries','analysis.isAlert','startsWith','success','getState','824CvOkxX','stringify','error','PONG','debug','type','toLocaleTimeString','python_service','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','633336RrimqH','data','Unknown','val','SIGNAL_RESULT','[PYTHON]\x20','analysis.prediction.nextRoom','length','analysis.health.isAnomaly','child_process','analysis.security.lastCheck','12DqoLyC','analysis.health.lastCheck','kill','analysis.energy.mpcActive','analysis.energy.heatingScore','stdin','analysis.security.currentThreshold','33564doRmkw','search','PINN_PREDICT_RESULT','analysis.health.gaitSpeed','toString','HEALTH_TRAIN_RESULT','insulation','split','1721727dShApj','setStateAsync','heating','ENERGY_OPTIMIZE_RESULT','3113WVHBCh','analysis.energy.forecast','join','apply','details','6194390mZzJYM','service.py','analysis.security.lastScore','python3','\x0aGrund:\x20','substring','toISOString','analysis.alertReason','ENERGY_TRAIN_RESULT','payload','TRAINING_COMPLETE','analysis.prediction.confidence','sendNotification','ðŸ\x20Python\x20Pong','[LOG]','write','threshold','142907ZgZduD'];a4_0x48cd=function(){return _0x91d3b3;};return a4_0x48cd();}a4_0x55e886();'use strict';const {spawn}=require(a4_0xcba530(0x10e)),path=require('path'),fs=require('fs'),setup=require('./setup'),automation=require('./automation');let pythonProcess=null;function send(_0x529f78,_0x415715,_0x3246f0={}){const _0x5a179c=a4_0xcba530;if(!pythonProcess||!pythonProcess[_0x5a179c(0x115)]['writable'])return;const _0x4ee112=JSON[_0x5a179c(0xfd)]({'command':_0x415715,..._0x3246f0});try{pythonProcess[_0x5a179c(0x115)][_0x5a179c(0xe3)](_0x4ee112+'\x0a');}catch(_0x165614){}}function handleResult(_0x42d193,_0x55d1c0){const _0x2e79ba=a4_0xcba530;if(_0x55d1c0['type']===_0x2e79ba(0xff))_0x42d193[_0x2e79ba(0xed)][_0x2e79ba(0x100)](_0x2e79ba(0xe1));else{if(_0x55d1c0[_0x2e79ba(0x101)]==='SECURITY_RESULT'){const {anomaly_score:_0x10a0a3,is_anomaly:_0x3cd400,threshold:_0x2c7b08,explanation:_0x5d79aa}=_0x55d1c0[_0x2e79ba(0xdd)];_0x42d193[_0x2e79ba(0xcc)](_0x2e79ba(0xd6),{'val':_0x10a0a3,'ack':!![]}),_0x42d193[_0x2e79ba(0xcc)](_0x2e79ba(0x10f),{'val':new Date()[_0x2e79ba(0xda)](),'ack':!![]});if(_0x2c7b08)_0x42d193[_0x2e79ba(0xcc)](_0x2e79ba(0x116),{'val':_0x2c7b08,'ack':!![]});if(_0x3cd400){let _0x1c2cf0=_0x2e79ba(0x104)+_0x10a0a3['toFixed'](0x4)+')';if(_0x5d79aa&&_0x5d79aa!==_0x2e79ba(0x107))_0x1c2cf0+=_0x2e79ba(0xd8)+_0x5d79aa;_0x42d193[_0x2e79ba(0xcc)](_0x2e79ba(0xf8),{'val':!![],'ack':!![]}),_0x42d193['setStateAsync'](_0x2e79ba(0xdb),{'val':_0x1c2cf0,'ack':!![]}),setup[_0x2e79ba(0xe0)](_0x42d193,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x1c2cf0,![],!![]);}}else{if(_0x55d1c0['type']===_0x2e79ba(0xde)){const _0x1476fd=_0x55d1c0[_0x2e79ba(0xdd)]['details']||'',_0x36f868=_0x55d1c0[_0x2e79ba(0xdd)][_0x2e79ba(0xe4)],_0x5b9dae=_0x55d1c0[_0x2e79ba(0xdd)][_0x2e79ba(0xfa)]?'Success:\x20'+new Date()[_0x2e79ba(0x102)]()+'\x20('+_0x1476fd+')':_0x2e79ba(0xee)+_0x55d1c0['payload']['reason'];_0x42d193[_0x2e79ba(0xcc)](_0x2e79ba(0xeb),{'val':_0x5b9dae,'ack':!![]});if(_0x55d1c0[_0x2e79ba(0xdd)][_0x2e79ba(0xfa)]&&_0x36f868)_0x42d193[_0x2e79ba(0xcc)]('analysis.security.currentThreshold',{'val':_0x36f868,'ack':!![]});}else{if(_0x55d1c0[_0x2e79ba(0x101)]===_0x2e79ba(0xdc)){if(_0x55d1c0['payload'][_0x2e79ba(0xfa)])try{const _0x58e82c=JSON[_0x2e79ba(0xec)](_0x55d1c0[_0x2e79ba(0xdd)][_0x2e79ba(0xd3)]);if(_0x58e82c[_0x2e79ba(0x11d)])_0x42d193[_0x2e79ba(0xcc)](_0x2e79ba(0xe9),{'val':JSON[_0x2e79ba(0xfd)](_0x58e82c['insulation']),'ack':!![]});if(_0x58e82c['heating'])_0x42d193[_0x2e79ba(0xcc)](_0x2e79ba(0x114),{'val':JSON[_0x2e79ba(0xfd)](_0x58e82c[_0x2e79ba(0xcd)]),'ack':!![]});}catch(_0x485ce8){}}else{if(_0x55d1c0[_0x2e79ba(0x101)]===_0x2e79ba(0x11c)){if(_0x55d1c0[_0x2e79ba(0xdd)][_0x2e79ba(0xfa)])_0x42d193[_0x2e79ba(0xed)][_0x2e79ba(0xf4)](_0x2e79ba(0xf3));}else{if(_0x55d1c0[_0x2e79ba(0x101)]==='HEALTH_RESULT')_0x42d193[_0x2e79ba(0xcc)](_0x2e79ba(0x111),{'val':new Date()[_0x2e79ba(0xda)](),'ack':!![]}),_0x42d193[_0x2e79ba(0xcc)](_0x2e79ba(0x10d),{'val':_0x55d1c0['payload']['is_anomaly'],'ack':!![]});else{if(_0x55d1c0['type']==='GAIT_RESULT'){const {speed_trend:_0x5ea294}=_0x55d1c0[_0x2e79ba(0xdd)];if(_0x5ea294!==undefined)_0x42d193['setStateAsync'](_0x2e79ba(0x11a),{'val':_0x5ea294,'ack':!![]});}else{if(_0x55d1c0[_0x2e79ba(0x101)]===_0x2e79ba(0xe8)){const {forecast:_0x4fcaab}=_0x55d1c0[_0x2e79ba(0xdd)];if(_0x4fcaab)_0x42d193['setStateAsync'](_0x2e79ba(0xd0),{'val':JSON['stringify'](_0x4fcaab),'ack':!![]});}else{if(_0x55d1c0['type']===_0x2e79ba(0x119)){const {forecast:_0x1a9452}=_0x55d1c0[_0x2e79ba(0xdd)];if(_0x1a9452)_0x42d193[_0x2e79ba(0xcc)]('analysis.energy.pinnForecast',{'val':JSON[_0x2e79ba(0xfd)](_0x1a9452),'ack':!![]});}else{if(_0x55d1c0[_0x2e79ba(0x101)]===_0x2e79ba(0xce)){const {proposals:_0x332ecc}=_0x55d1c0[_0x2e79ba(0xdd)];_0x42d193[_0x2e79ba(0xfb)](_0x2e79ba(0x113),(_0x553d85,_0x4517d0)=>{const _0xde008b=_0x2e79ba;_0x4517d0&&_0x4517d0[_0xde008b(0x108)]===!![]&&_0x332ecc&&_0x332ecc[_0xde008b(0x10c)]>0x0&&automation[_0xde008b(0xf5)](_0x42d193,_0x332ecc);});}else{if(_0x55d1c0[_0x2e79ba(0x101)]===_0x2e79ba(0x109)){const {room:_0x257d2d,propagation:_0x16fb01}=_0x55d1c0[_0x2e79ba(0xdd)];let _0x3b9773=_0x2e79ba(0x107),_0x510b87=0x0;if(_0x16fb01){const _0x33c1e0=Object[_0x2e79ba(0xf7)](_0x16fb01);_0x33c1e0[_0x2e79ba(0x10c)]>0x0&&(_0x3b9773=_0x33c1e0[0x0][0x0],_0x510b87=_0x33c1e0[0x0][0x1]);}_0x42d193['setStateAsync'](_0x2e79ba(0x10b),{'val':_0x3b9773,'ack':!![]}),_0x42d193[_0x2e79ba(0xcc)](_0x2e79ba(0xdf),{'val':_0x510b87,'ack':!![]}),automation[_0x2e79ba(0xf2)](_0x42d193,_0x3b9773,_0x510b87);}else{if(_0x55d1c0[_0x2e79ba(0x101)]===_0x2e79ba(0xe6)){const {patterns:_0x396519}=_0x55d1c0[_0x2e79ba(0xdd)];if(_0x396519&&_0x396519[_0x2e79ba(0x10c)]>0x0)_0x42d193[_0x2e79ba(0xcc)]('analysis.automation.detectedPatterns',{'val':JSON[_0x2e79ba(0xfd)](_0x396519),'ack':!![]});}}}}}}}}}}}}}function startService(_0xe11c1b,_0x38dac4){const _0xa8aadd=a4_0xcba530;let _0x514c15=_0xa8aadd(0xd7);if(fs['existsSync'](_0x38dac4))_0x514c15=_0x38dac4;try{const _0x164b51=path[_0xa8aadd(0xd1)](__dirname,'..',_0xa8aadd(0x103),_0xa8aadd(0xd5));pythonProcess=spawn(_0x514c15,[_0x164b51]),pythonProcess['stdout']['on'](_0xa8aadd(0x106),_0x5ebb72=>{const _0x375af9=_0xa8aadd,_0x2cb134=_0x5ebb72[_0x375af9(0x11b)]()[_0x375af9(0x11e)]('\x0a');_0x2cb134['forEach'](_0x5aef29=>{const _0x13d63e=_0x375af9,_0x1ec3bd=_0x5aef29[_0x13d63e(0xef)]();if(!_0x1ec3bd)return;if(_0x1ec3bd['startsWith'](_0x13d63e(0xe2)))_0xe11c1b[_0x13d63e(0xed)]['debug'](_0x13d63e(0x10a)+_0x1ec3bd[_0x13d63e(0xd9)](0x5)[_0x13d63e(0xef)]());else{if(_0x1ec3bd[_0x13d63e(0xf9)]('[RESULT]'))try{const _0x1e8ef3=JSON[_0x13d63e(0xec)](_0x1ec3bd[_0x13d63e(0xd9)](0x8)[_0x13d63e(0xef)]());handleResult(_0xe11c1b,_0x1e8ef3);}catch(_0x20f0aa){}}});}),pythonProcess['on']('close',_0x13c26f=>{pythonProcess=null;}),_0xe11c1b['sendToPythonWrapper']=(_0x2317a9,_0x44a5d9)=>send(_0xe11c1b,_0x2317a9,_0x44a5d9);}catch(_0x509027){_0xe11c1b[_0xa8aadd(0xed)][_0xa8aadd(0xfe)]('Error\x20launching\x20Python:\x20'+_0x509027['message']);}}function stopService(_0x42cf26){const _0x3f6864=a4_0xcba530;if(pythonProcess){try{pythonProcess[_0x3f6864(0x112)]();}catch(_0x508f82){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};