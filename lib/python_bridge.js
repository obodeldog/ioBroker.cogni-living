function a4_0x5bd1(){const _0x1ba58a=['path','analysis.energy.insulationScore','toFixed','toLocaleTimeString','sendNotification','analysis.automation.patternDetected','toString','info','search','[RESULT]','stdin','COMFORT_RESULT','success','ðŸ\x20Python\x20Pong','\x20new\x20patterns.','analysis.security.currentThreshold','analysis.isAlert','startsWith','analysis.health.trendDiagnosis','substring','analysis.security.lastCheck','2066325yFtzVo','insulation','2046009vPZhAx','âš ï¸\x20SECURITY\x20ALARM:\x20','is_anomaly','1934289ZjkcRW','analysis.health.trendValue','âœ…\x20HEALTH\x20TRAINED.','setStateAsync','Error\x20launching\x20Python:\x20','analysis.security.topologyMatrix','change_percent','confidence','4399248dszqma','constructor','parse','56afZrrN','605688GHVTft','message','debug','529194cjppvY','threshold','service.py','heating','Success:\x20','ENERGY_TRAIN_RESULT','PONG','stringify','./automation','analysis.prediction.confidence','length','ðŸ\x20Python\x20confirmed\x20new\x20topology.','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','data','ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.','analysis.prediction.nextRoom','analysis.health.isAnomaly','exports','GAIT_RESULT','analysis.health.gaitSpeed','apply','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','ðŸ”®\x20Prediction:\x20From\x20','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','ENERGY_PREDICT_RESULT','details','payload','\x20->\x20','\x20->\x20Likely\x20','SECURITY_RESULT','type','5SJNlef','HEALTH_TRAIN_RESULT','100PVzJLw','write','SIGNAL_RESULT','ANOMALY','analysis.energy.forecast','2938548dIWVXi','trim','child_process','stdout','[LOG]','TREND_RESULT','join','python_service','reason','(((.+)+)+)+$','handlePrediction','analysis.alertReason','analysis.automation.detectedPatterns','diagnosis','log','TOPOLOGY_RESULT','TOPOLOGY_ACK','analysis.security.lastScore'];a4_0x5bd1=function(){return _0x1ba58a;};return a4_0x5bd1();}const a4_0x377bc3=a4_0x4969;function a4_0x4969(_0x4a6d23,_0x1f44f8){const _0x36cbe3=a4_0x5bd1();return a4_0x4969=function(_0x1d2071,_0x2154e4){_0x1d2071=_0x1d2071-0x101;let _0x5bd116=_0x36cbe3[_0x1d2071];return _0x5bd116;},a4_0x4969(_0x4a6d23,_0x1f44f8);}(function(_0x39aa10,_0x13bb21){const _0x351037=a4_0x4969,_0x57cfd1=_0x39aa10();while(!![]){try{const _0x34acfc=parseInt(_0x351037(0x130))/0x1*(-parseInt(_0x351037(0x111))/0x2)+parseInt(_0x351037(0x160))/0x3+-parseInt(_0x351037(0x10a))/0x4+parseInt(_0x351037(0x15e))/0x5+parseInt(_0x351037(0x137))/0x6+-parseInt(_0x351037(0x10d))/0x7*(parseInt(_0x351037(0x10e))/0x8)+-parseInt(_0x351037(0x102))/0x9*(-parseInt(_0x351037(0x132))/0xa);if(_0x34acfc===_0x13bb21)break;else _0x57cfd1['push'](_0x57cfd1['shift']());}catch(_0x2c29e2){_0x57cfd1['push'](_0x57cfd1['shift']());}}}(a4_0x5bd1,0xac4d7));const a4_0x2154e4=(function(){let _0x28994b=!![];return function(_0x328196,_0x1fd800){const _0xcdcdd2=_0x28994b?function(){const _0x3fc853=a4_0x4969;if(_0x1fd800){const _0x2a0b5e=_0x1fd800[_0x3fc853(0x125)](_0x328196,arguments);return _0x1fd800=null,_0x2a0b5e;}}:function(){};return _0x28994b=![],_0xcdcdd2;};}()),a4_0x1d2071=a4_0x2154e4(this,function(){const _0x383079=a4_0x4969;return a4_0x1d2071[_0x383079(0x14f)]()[_0x383079(0x151)](_0x383079(0x140))[_0x383079(0x14f)]()[_0x383079(0x10b)](a4_0x1d2071)[_0x383079(0x151)](_0x383079(0x140));});a4_0x1d2071();'use strict';const {spawn}=require(a4_0x377bc3(0x139)),path=require(a4_0x377bc3(0x149)),fs=require('fs'),setup=require('./setup'),automation=require(a4_0x377bc3(0x119));let pythonProcess=null;function send(_0x49d3bb,_0x1b4827,_0x400a90={}){const _0x19bf87=a4_0x377bc3;if(!pythonProcess||!pythonProcess['stdin']['writable'])return;const _0x238d25=JSON['stringify']({'command':_0x1b4827,..._0x400a90});try{pythonProcess[_0x19bf87(0x153)][_0x19bf87(0x133)](_0x238d25+'\x0a');}catch(_0x2f916e){}}function handleResult(_0x2a95b2,_0x1c54d5){const _0x464d2e=a4_0x377bc3;if(_0x1c54d5[_0x464d2e(0x12f)]===_0x464d2e(0x117))_0x2a95b2[_0x464d2e(0x145)][_0x464d2e(0x110)](_0x464d2e(0x156));else{if(_0x1c54d5[_0x464d2e(0x12f)]===_0x464d2e(0x12e)){const {anomaly_score:_0x33de1c,is_anomaly:_0x30d081,threshold:_0x3a8360,explanation:_0x469d19}=_0x1c54d5['payload'];_0x2a95b2['log']['info'](_0x464d2e(0x126)+_0x33de1c['toFixed'](0x5)+_0x464d2e(0x12c)+(_0x30d081?_0x464d2e(0x135):'OK')),_0x2a95b2['setStateAsync'](_0x464d2e(0x148),{'val':_0x33de1c,'ack':!![]}),_0x2a95b2[_0x464d2e(0x105)](_0x464d2e(0x15d),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x3a8360)_0x2a95b2['setStateAsync']('analysis.security.currentThreshold',{'val':_0x3a8360,'ack':!![]});if(_0x30d081){let _0x33eb34=_0x464d2e(0x11d)+_0x33de1c[_0x464d2e(0x14b)](0x4)+')';if(_0x469d19&&_0x469d19!=='Unknown')_0x33eb34+='\x0aGrund:\x20'+_0x469d19;_0x2a95b2[_0x464d2e(0x105)](_0x464d2e(0x159),{'val':!![],'ack':!![]}),_0x2a95b2[_0x464d2e(0x105)](_0x464d2e(0x142),{'val':_0x33eb34,'ack':!![]}),setup[_0x464d2e(0x14d)](_0x2a95b2,_0x464d2e(0x161)+_0x33eb34,![],!![]);}}else{if(_0x1c54d5[_0x464d2e(0x12f)]==='TRAINING_COMPLETE'){const _0x3ede3b=_0x1c54d5[_0x464d2e(0x12b)][_0x464d2e(0x12a)]||'',_0x557207=_0x1c54d5[_0x464d2e(0x12b)][_0x464d2e(0x112)],_0x1a3597=_0x1c54d5[_0x464d2e(0x12b)]['success']?_0x464d2e(0x115)+new Date()[_0x464d2e(0x14c)]()+'\x20('+_0x3ede3b+')':'Failed:\x20'+_0x1c54d5['payload'][_0x464d2e(0x13f)];_0x2a95b2['setStateAsync']('analysis.training.status',{'val':_0x1a3597,'ack':!![]});if(_0x1c54d5['payload'][_0x464d2e(0x155)]&&_0x557207)_0x2a95b2[_0x464d2e(0x105)](_0x464d2e(0x158),{'val':_0x557207,'ack':!![]});}else{if(_0x1c54d5['type']===_0x464d2e(0x154)){const {patterns:_0x263e5e}=_0x1c54d5[_0x464d2e(0x12b)];if(_0x263e5e&&_0x263e5e['length']>0x0){_0x2a95b2[_0x464d2e(0x145)][_0x464d2e(0x150)]('ðŸ›‹ï¸\x20BUTLER:\x20Found\x20'+_0x263e5e[_0x464d2e(0x11b)]+_0x464d2e(0x157)),_0x2a95b2['setStateAsync']('analysis.automation.detectedPatterns',{'val':JSON[_0x464d2e(0x118)](_0x263e5e),'ack':!![]});const _0x35ff51=_0x263e5e[0x0],_0x592975='Regel\x20erkannt:\x20'+_0x35ff51['rule']+'\x20('+(_0x35ff51[_0x464d2e(0x109)]*0x64)['toFixed'](0x0)+'%)';_0x2a95b2['setStateAsync'](_0x464d2e(0x14e),{'val':!![],'ack':!![]}),_0x2a95b2[_0x464d2e(0x105)]('analysis.automation.description',{'val':_0x592975,'ack':!![]});}else _0x2a95b2[_0x464d2e(0x145)][_0x464d2e(0x150)](_0x464d2e(0x128)),_0x2a95b2[_0x464d2e(0x105)](_0x464d2e(0x14e),{'val':![],'ack':!![]}),_0x2a95b2[_0x464d2e(0x105)](_0x464d2e(0x143),{'val':'[]','ack':!![]});}else{if(_0x1c54d5['type']===_0x464d2e(0x116)){if(_0x1c54d5[_0x464d2e(0x12b)][_0x464d2e(0x155)])try{const _0x36457d=JSON[_0x464d2e(0x10c)](_0x1c54d5[_0x464d2e(0x12b)][_0x464d2e(0x12a)]);if(_0x36457d[_0x464d2e(0x15f)])_0x2a95b2[_0x464d2e(0x105)](_0x464d2e(0x14a),{'val':JSON['stringify'](_0x36457d[_0x464d2e(0x15f)]),'ack':!![]});if(_0x36457d[_0x464d2e(0x114)])_0x2a95b2['setStateAsync']('analysis.energy.heatingScore',{'val':JSON[_0x464d2e(0x118)](_0x36457d['heating']),'ack':!![]});}catch(_0x18056a){}}else{if(_0x1c54d5[_0x464d2e(0x12f)]===_0x464d2e(0x131)){if(_0x1c54d5[_0x464d2e(0x12b)][_0x464d2e(0x155)])_0x2a95b2['log']['info'](_0x464d2e(0x104));}else{if(_0x1c54d5[_0x464d2e(0x12f)]==='HEALTH_RESULT')_0x2a95b2[_0x464d2e(0x105)]('analysis.health.lastCheck',{'val':new Date()['toISOString'](),'ack':!![]}),_0x2a95b2[_0x464d2e(0x105)](_0x464d2e(0x121),{'val':_0x1c54d5[_0x464d2e(0x12b)][_0x464d2e(0x101)],'ack':!![]});else{if(_0x1c54d5[_0x464d2e(0x12f)]===_0x464d2e(0x13c))_0x2a95b2['setStateAsync'](_0x464d2e(0x15b),{'val':_0x1c54d5[_0x464d2e(0x12b)][_0x464d2e(0x144)],'ack':!![]}),_0x2a95b2[_0x464d2e(0x105)](_0x464d2e(0x103),{'val':_0x1c54d5['payload'][_0x464d2e(0x108)],'ack':!![]});else{if(_0x1c54d5[_0x464d2e(0x12f)]===_0x464d2e(0x123)){const {speed_trend:_0x22db89}=_0x1c54d5['payload'];if(_0x22db89!==undefined)_0x2a95b2[_0x464d2e(0x105)](_0x464d2e(0x124),{'val':_0x22db89,'ack':!![]});}else{if(_0x1c54d5['type']===_0x464d2e(0x129)){const {forecast:_0xbf8548}=_0x1c54d5['payload'];if(_0xbf8548)_0x2a95b2[_0x464d2e(0x105)](_0x464d2e(0x136),{'val':JSON[_0x464d2e(0x118)](_0xbf8548),'ack':!![]});}else{if(_0x1c54d5[_0x464d2e(0x12f)]===_0x464d2e(0x146)){const {data:_0x2512b9}=_0x1c54d5['payload'];_0x2512b9&&(_0x2a95b2[_0x464d2e(0x145)]['info'](_0x464d2e(0x11f)),_0x2a95b2[_0x464d2e(0x105)](_0x464d2e(0x107),{'val':JSON[_0x464d2e(0x118)](_0x2512b9),'ack':!![]}));}else{if(_0x1c54d5[_0x464d2e(0x12f)]===_0x464d2e(0x147))_0x2a95b2['log'][_0x464d2e(0x110)](_0x464d2e(0x11c));else{if(_0x1c54d5[_0x464d2e(0x12f)]===_0x464d2e(0x134)){const {room:_0x428232,propagation:_0x59df84}=_0x1c54d5['payload'];let _0x5f5571='Unknown',_0x59b3ee=0x0;if(_0x59df84){const _0x277659=Object['entries'](_0x59df84);_0x277659['length']>0x0&&(_0x5f5571=_0x277659[0x0][0x0],_0x59b3ee=_0x277659[0x0][0x1]);}_0x2a95b2[_0x464d2e(0x105)](_0x464d2e(0x120),{'val':_0x5f5571,'ack':!![]}),_0x2a95b2['setStateAsync'](_0x464d2e(0x11a),{'val':_0x59b3ee,'ack':!![]}),_0x59b3ee>0.4&&_0x2a95b2[_0x464d2e(0x145)][_0x464d2e(0x110)](_0x464d2e(0x127)+_0x428232+_0x464d2e(0x12d)+_0x5f5571+'\x20('+(_0x59b3ee*0x64)[_0x464d2e(0x14b)](0x0)+'%)'),automation[_0x464d2e(0x141)](_0x2a95b2,_0x5f5571,_0x59b3ee);}}}}}}}}}}}}}}function startService(_0x5dbdec,_0x184643){const _0x2a7404=a4_0x377bc3;let _0x8d0bdc='python3';if(fs['existsSync'](_0x184643))_0x8d0bdc=_0x184643;try{const _0x5d696b=path[_0x2a7404(0x13d)](__dirname,'..',_0x2a7404(0x13e),_0x2a7404(0x113));pythonProcess=spawn(_0x8d0bdc,[_0x5d696b]),pythonProcess[_0x2a7404(0x13a)]['on'](_0x2a7404(0x11e),_0x2f9e87=>{const _0x2ae870=_0x2a7404,_0x2c94eb=_0x2f9e87[_0x2ae870(0x14f)]()['split']('\x0a');_0x2c94eb['forEach'](_0x7cfa64=>{const _0x127d22=_0x2ae870,_0x2d5762=_0x7cfa64[_0x127d22(0x138)]();if(!_0x2d5762)return;if(_0x2d5762[_0x127d22(0x15a)](_0x127d22(0x13b)))_0x5dbdec[_0x127d22(0x145)][_0x127d22(0x110)]('[PYTHON]\x20'+_0x2d5762['substring'](0x5)[_0x127d22(0x138)]());else{if(_0x2d5762[_0x127d22(0x15a)](_0x127d22(0x152)))try{const _0x4c382b=JSON[_0x127d22(0x10c)](_0x2d5762[_0x127d22(0x15c)](0x8)[_0x127d22(0x138)]());handleResult(_0x5dbdec,_0x4c382b);}catch(_0x1b0e3b){}}});}),pythonProcess['on']('close',_0x4919e3=>{pythonProcess=null;}),_0x5dbdec['sendToPythonWrapper']=(_0x2a59e5,_0x5a2612)=>send(_0x5dbdec,_0x2a59e5,_0x5a2612);}catch(_0x4d72e8){_0x5dbdec[_0x2a7404(0x145)]['error'](_0x2a7404(0x106)+_0x4d72e8[_0x2a7404(0x10f)]);}}function stopService(_0x34d087){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x1f23a1){}pythonProcess=null;}}module[a4_0x377bc3(0x122)]={'startService':startService,'stopService':stopService,'send':send};