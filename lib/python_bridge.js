const a3_0x14b49a=a3_0x2e47;(function(_0x45c44f,_0xfe761f){const _0x1b45bd=a3_0x2e47,_0xb54bc7=_0x45c44f();while(!![]){try{const _0x49a656=parseInt(_0x1b45bd(0xa0))/0x1+parseInt(_0x1b45bd(0xe7))/0x2*(parseInt(_0x1b45bd(0xae))/0x3)+-parseInt(_0x1b45bd(0xc5))/0x4*(parseInt(_0x1b45bd(0xec))/0x5)+parseInt(_0x1b45bd(0xbc))/0x6+-parseInt(_0x1b45bd(0xb2))/0x7+parseInt(_0x1b45bd(0xd0))/0x8+-parseInt(_0x1b45bd(0xd6))/0x9;if(_0x49a656===_0xfe761f)break;else _0xb54bc7['push'](_0xb54bc7['shift']());}catch(_0x16e42e){_0xb54bc7['push'](_0xb54bc7['shift']());}}}(a3_0x32f2,0x8724c));const a3_0x210945=(function(){let _0x2b28ee=!![];return function(_0x33ed52,_0x4ba6c0){const _0x1f5af3=_0x2b28ee?function(){if(_0x4ba6c0){const _0x17df11=_0x4ba6c0['apply'](_0x33ed52,arguments);return _0x4ba6c0=null,_0x17df11;}}:function(){};return _0x2b28ee=![],_0x1f5af3;};}()),a3_0x4ac0f6=a3_0x210945(this,function(){const _0x150719=a3_0x2e47;return a3_0x4ac0f6['toString']()[_0x150719(0xcb)](_0x150719(0xb1))[_0x150719(0xd7)]()[_0x150719(0xe8)](a3_0x4ac0f6)[_0x150719(0xcb)](_0x150719(0xb1));});function a3_0x2e47(_0x3e8217,_0x27713d){const _0x8c7475=a3_0x32f2();return a3_0x2e47=function(_0x4ac0f6,_0x210945){_0x4ac0f6=_0x4ac0f6-0x95;let _0x32f296=_0x8c7475[_0x4ac0f6];return _0x32f296;},a3_0x2e47(_0x3e8217,_0x27713d);}a3_0x4ac0f6();'use strict';const {spawn}=require(a3_0x14b49a(0xdf)),path=require(a3_0x14b49a(0xa3)),fs=require('fs'),setup=require(a3_0x14b49a(0xee)),automation=require(a3_0x14b49a(0xcd));let pythonProcess=null;function send(_0x4bf619,_0x4eb64c,_0x333599={}){const _0x161d3d=a3_0x14b49a;if(!pythonProcess||!pythonProcess['stdin'][_0x161d3d(0xc2)])return;const _0x20ca53=JSON[_0x161d3d(0xab)]({'command':_0x4eb64c,..._0x333599});try{pythonProcess[_0x161d3d(0x9b)][_0x161d3d(0x97)](_0x20ca53+'\x0a');}catch(_0xfff497){}}function handleResult(_0x54cc29,_0x10bdd2){const _0x39f6c0=a3_0x14b49a;if(_0x10bdd2[_0x39f6c0(0xb9)]===_0x39f6c0(0xca))_0x54cc29[_0x39f6c0(0xe5)]['debug'](_0x39f6c0(0xac));else{if(_0x10bdd2[_0x39f6c0(0xb9)]===_0x39f6c0(0xc6)){const {anomaly_score:_0x2292ea,is_anomaly:_0x5e0c5f,threshold:_0x5c60a9,explanation:_0x27ab9a}=_0x10bdd2['payload'];_0x54cc29[_0x39f6c0(0xe5)]['info'](_0x39f6c0(0xb4)+_0x2292ea[_0x39f6c0(0xd5)](0x5)+_0x39f6c0(0xdc)+(_0x5e0c5f?_0x39f6c0(0xd2):'OK')),_0x54cc29[_0x39f6c0(0xe2)](_0x39f6c0(0xa9),{'val':_0x2292ea,'ack':!![]}),_0x54cc29[_0x39f6c0(0xe2)]('analysis.security.lastCheck',{'val':new Date()['toISOString'](),'ack':!![]});if(_0x5c60a9)_0x54cc29['setStateAsync']('analysis.security.currentThreshold',{'val':_0x5c60a9,'ack':!![]});if(_0x5e0c5f){let _0x40a733='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x2292ea['toFixed'](0x4)+')';if(_0x27ab9a&&_0x27ab9a!=='Unknown')_0x40a733+=_0x39f6c0(0xcc)+_0x27ab9a;_0x54cc29[_0x39f6c0(0xe2)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x54cc29['setStateAsync']('analysis.alertReason',{'val':_0x40a733,'ack':!![]}),setup['sendNotification'](_0x54cc29,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x40a733,![],!![]);}}else{if(_0x10bdd2[_0x39f6c0(0xb9)]===_0x39f6c0(0xc7)){const _0x4257d6=_0x10bdd2[_0x39f6c0(0xeb)][_0x39f6c0(0xb6)]||'',_0xafda23=_0x10bdd2['payload']['threshold'],_0x57fd1b=_0x10bdd2[_0x39f6c0(0xeb)]['success']?'Success:\x20'+new Date()[_0x39f6c0(0xbf)]()+'\x20('+_0x4257d6+')':_0x39f6c0(0xa6)+_0x10bdd2[_0x39f6c0(0xeb)]['reason'];_0x54cc29[_0x39f6c0(0xe2)]('analysis.training.status',{'val':_0x57fd1b,'ack':!![]});if(_0x10bdd2[_0x39f6c0(0xeb)][_0x39f6c0(0x98)]&&_0xafda23)_0x54cc29[_0x39f6c0(0xe2)](_0x39f6c0(0xe9),{'val':_0xafda23,'ack':!![]});}else{if(_0x10bdd2[_0x39f6c0(0xb9)]==='COMFORT_RESULT'){const {patterns:_0x398308}=_0x10bdd2[_0x39f6c0(0xeb)];if(_0x398308&&_0x398308[_0x39f6c0(0xf1)]>0x0){_0x54cc29[_0x39f6c0(0xe5)][_0x39f6c0(0xb8)](_0x39f6c0(0xef)+_0x398308['length']+_0x39f6c0(0x9c)),_0x54cc29[_0x39f6c0(0xe2)]('analysis.automation.detectedPatterns',{'val':JSON[_0x39f6c0(0xab)](_0x398308),'ack':!![]});const _0x576094=_0x398308[0x0],_0x142777=_0x39f6c0(0xb5)+_0x576094[_0x39f6c0(0xad)]+'\x20('+(_0x576094['confidence']*0x64)[_0x39f6c0(0xd5)](0x0)+'%)';_0x54cc29['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x54cc29['setStateAsync']('analysis.automation.description',{'val':_0x142777,'ack':!![]});}else _0x54cc29['log']['info'](_0x39f6c0(0xe6)),_0x54cc29['setStateAsync']('analysis.automation.patternDetected',{'val':![],'ack':!![]}),_0x54cc29[_0x39f6c0(0xe2)]('analysis.automation.detectedPatterns',{'val':'[]','ack':!![]});}else{if(_0x10bdd2[_0x39f6c0(0xb9)]===_0x39f6c0(0xd8)){if(_0x10bdd2[_0x39f6c0(0xeb)][_0x39f6c0(0x98)])try{const _0x3077dc=JSON[_0x39f6c0(0xd4)](_0x10bdd2['payload'][_0x39f6c0(0xb6)]);if(_0x3077dc[_0x39f6c0(0xb7)])_0x54cc29[_0x39f6c0(0xe2)]('analysis.energy.insulationScore',{'val':JSON[_0x39f6c0(0xab)](_0x3077dc[_0x39f6c0(0xb7)]),'ack':!![]});if(_0x3077dc['heating'])_0x54cc29['setStateAsync'](_0x39f6c0(0xe1),{'val':JSON[_0x39f6c0(0xab)](_0x3077dc[_0x39f6c0(0xb0)]),'ack':!![]});}catch(_0x33281e){}}else{if(_0x10bdd2[_0x39f6c0(0xb9)]===_0x39f6c0(0xed)){if(_0x10bdd2[_0x39f6c0(0xeb)][_0x39f6c0(0x98)])_0x54cc29[_0x39f6c0(0xe5)][_0x39f6c0(0xb8)](_0x39f6c0(0xd1));}else{if(_0x10bdd2[_0x39f6c0(0xb9)]==='HEALTH_RESULT')_0x54cc29[_0x39f6c0(0xe2)](_0x39f6c0(0x96),{'val':new Date()[_0x39f6c0(0xa2)](),'ack':!![]}),_0x54cc29[_0x39f6c0(0xe2)](_0x39f6c0(0xc9),{'val':_0x10bdd2[_0x39f6c0(0xeb)][_0x39f6c0(0xd3)],'ack':!![]});else{if(_0x10bdd2[_0x39f6c0(0xb9)]==='TREND_RESULT')_0x54cc29[_0x39f6c0(0xe2)](_0x39f6c0(0x95),{'val':_0x10bdd2[_0x39f6c0(0xeb)][_0x39f6c0(0xf0)],'ack':!![]}),_0x54cc29[_0x39f6c0(0xe2)](_0x39f6c0(0x9d),{'val':_0x10bdd2[_0x39f6c0(0xeb)][_0x39f6c0(0xaf)],'ack':!![]});else{if(_0x10bdd2['type']===_0x39f6c0(0xdd)){const {speed_trend:_0xa7d437}=_0x10bdd2[_0x39f6c0(0xeb)];if(_0xa7d437!==undefined)_0x54cc29[_0x39f6c0(0xe2)](_0x39f6c0(0xc1),{'val':_0xa7d437,'ack':!![]});}else{if(_0x10bdd2[_0x39f6c0(0xb9)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x44c668}=_0x10bdd2['payload'];if(_0x44c668)_0x54cc29[_0x39f6c0(0xe2)]('analysis.energy.forecast',{'val':JSON[_0x39f6c0(0xab)](_0x44c668),'ack':!![]});}else{if(_0x10bdd2[_0x39f6c0(0xb9)]===_0x39f6c0(0xba)){const {data:_0xb35d06}=_0x10bdd2[_0x39f6c0(0xeb)];_0xb35d06&&(_0x54cc29[_0x39f6c0(0xe5)][_0x39f6c0(0xb8)](_0x39f6c0(0xc3)),_0x54cc29[_0x39f6c0(0xe2)](_0x39f6c0(0xa4),{'val':JSON['stringify'](_0xb35d06),'ack':!![]}));}else{if(_0x10bdd2[_0x39f6c0(0xb9)]===_0x39f6c0(0xa1))_0x54cc29[_0x39f6c0(0xe5)][_0x39f6c0(0xe4)](_0x39f6c0(0xa5));else{if(_0x10bdd2[_0x39f6c0(0xb9)]===_0x39f6c0(0xea)){const {room:_0x9fc727,propagation:_0x5ee877}=_0x10bdd2[_0x39f6c0(0xeb)];let _0x8d917a='Unknown',_0x3a24d4=0x0;if(_0x5ee877){const _0x49973e=Object[_0x39f6c0(0xd9)](_0x5ee877);_0x49973e['length']>0x0&&(_0x8d917a=_0x49973e[0x0][0x0],_0x3a24d4=_0x49973e[0x0][0x1]);}_0x54cc29[_0x39f6c0(0xe2)]('analysis.prediction.nextRoom',{'val':_0x8d917a,'ack':!![]}),_0x54cc29['setStateAsync'](_0x39f6c0(0xbb),{'val':_0x3a24d4,'ack':!![]}),_0x3a24d4>0.4&&_0x54cc29[_0x39f6c0(0xe5)][_0x39f6c0(0xe4)](_0x39f6c0(0xce)+_0x9fc727+'\x20->\x20Likely\x20'+_0x8d917a+'\x20('+(_0x3a24d4*0x64)['toFixed'](0x0)+'%)'),automation[_0x39f6c0(0x99)](_0x54cc29,_0x8d917a,_0x3a24d4);}}}}}}}}}}}}}}function a3_0x32f2(){const _0x8afeb1=['âœ…\x20HEALTH\x20TRAINED.','ANOMALY','is_anomaly','parse','toFixed','3616578pavpGy','toString','ENERGY_TRAIN_RESULT','entries','error','split','\x20->\x20','GAIT_RESULT','trim','child_process','kill','analysis.energy.heatingScore','setStateAsync','[PYTHON]\x20','debug','log','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','82226ySFLhF','constructor','analysis.security.currentThreshold','SIGNAL_RESULT','payload','60WTfPNi','HEALTH_TRAIN_RESULT','./setup','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','diagnosis','length','analysis.health.trendDiagnosis','analysis.health.lastCheck','write','success','handlePrediction','python_service','stdin','\x20new\x20patterns.','analysis.health.trendValue','data','service.py','404599LrnkIu','TOPOLOGY_ACK','toISOString','path','analysis.security.topologyMatrix','ðŸ\x20Python\x20confirmed\x20new\x20topology.','Failed:\x20','substring','Error\x20launching\x20Python:\x20','analysis.security.lastScore','forEach','stringify','ðŸ\x20Python\x20Pong','rule','15Hluvqy','change_percent','heating','(((.+)+)+)+$','4074504XsvoAV','join','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','Regel\x20erkannt:\x20','details','insulation','info','type','TOPOLOGY_RESULT','analysis.prediction.confidence','5244024QzGMrR','close','[RESULT]','toLocaleTimeString','stdout','analysis.health.gaitSpeed','writable','ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.','message','337420rTPCAJ','SECURITY_RESULT','TRAINING_COMPLETE','existsSync','analysis.health.isAnomaly','PONG','search','\x0aGrund:\x20','./automation','ðŸ”®\x20Prediction:\x20From\x20','startsWith','8524432rudGoB'];a3_0x32f2=function(){return _0x8afeb1;};return a3_0x32f2();}function startService(_0x1db4fd,_0x5ac1ca){const _0x22f170=a3_0x14b49a;let _0xef3f78='python3';if(fs[_0x22f170(0xc8)](_0x5ac1ca))_0xef3f78=_0x5ac1ca;try{const _0x46c7f0=path[_0x22f170(0xb3)](__dirname,'..',_0x22f170(0x9a),_0x22f170(0x9f));pythonProcess=spawn(_0xef3f78,[_0x46c7f0]),pythonProcess[_0x22f170(0xc0)]['on'](_0x22f170(0x9e),_0x3b894a=>{const _0xf1da4d=_0x22f170,_0x2ab9b5=_0x3b894a[_0xf1da4d(0xd7)]()[_0xf1da4d(0xdb)]('\x0a');_0x2ab9b5[_0xf1da4d(0xaa)](_0x545216=>{const _0x4bc6f3=_0xf1da4d,_0xa26cd3=_0x545216[_0x4bc6f3(0xde)]();if(!_0xa26cd3)return;if(_0xa26cd3['startsWith']('[LOG]'))_0x1db4fd[_0x4bc6f3(0xe5)][_0x4bc6f3(0xe4)](_0x4bc6f3(0xe3)+_0xa26cd3['substring'](0x5)['trim']());else{if(_0xa26cd3[_0x4bc6f3(0xcf)](_0x4bc6f3(0xbe)))try{const _0x352697=JSON[_0x4bc6f3(0xd4)](_0xa26cd3[_0x4bc6f3(0xa7)](0x8)[_0x4bc6f3(0xde)]());handleResult(_0x1db4fd,_0x352697);}catch(_0x16d13f){}}});}),pythonProcess['on'](_0x22f170(0xbd),_0x37c834=>{pythonProcess=null;}),_0x1db4fd['sendToPythonWrapper']=(_0x37a6a1,_0x302062)=>send(_0x1db4fd,_0x37a6a1,_0x302062);}catch(_0x29c1ae){_0x1db4fd[_0x22f170(0xe5)][_0x22f170(0xda)](_0x22f170(0xa8)+_0x29c1ae[_0x22f170(0xc4)]);}}function stopService(_0x9b307d){const _0x378fc9=a3_0x14b49a;if(pythonProcess){try{pythonProcess[_0x378fc9(0xe0)]();}catch(_0x14086c){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};