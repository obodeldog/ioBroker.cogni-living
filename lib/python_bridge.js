const a4_0x352337=a4_0x4cb2;function a4_0x31d7(){const _0x35c150=['ðŸ\x20Python\x20Pong','âœ…\x20HEALTH\x20TRAINED.','WARMUP_RESULT','python_service','analysis.energy.mpcActive','analysis.security.currentThreshold','ENERGY_PREDICT_RESULT','./automation','parse','analysis.energy.insulationScore','handlePrediction','apply','PONG','service.py','search','analysis.prediction.confidence','existsSync','127430rfssUv','stdout','215446VInrVP','(((.+)+)+)+$','./setup','132KbLNNA','length','analysis.prediction.trackerState','analysis.security.lastScore','analysis.training.status','Success:\x20','271905DwIkza','analysis.automation.detectedPatterns','substring','analysis.health.lastCheck','analysis.energy.heatingScore','ENERGY_OPTIMIZE_RESULT','653415rQdKta','constructor','child_process','toISOString','\x0aGrund:\x20','insulation','keys','stdin','debug','toString','Error\x20launching\x20Python:\x20','analysis.energy.pinnForecast','stringify','heating','analysis.security.lastCheck','[LOG]','HEALTH_TRAIN_RESULT','type','sendNotification','SECURITY_RESULT','Unknown','analysis.prediction.trackerTopRoom','payload','TRAINING_COMPLETE','Failed:\x20','PINN_PREDICT_RESULT','analysis.prediction.trackerConfidence','SIGNAL_RESULT','kill','message','split','path','success','TRACKER_RESULT','details','[RESULT]','setStateAsync','40ZztKqn','close','val','startsWith','info','268758lpUAua','422052APXdfs','analysis.isAlert','HEALTH_RESULT','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','analysis.alertReason','is_anomaly','writable','VENTILATION_ALERT','error','getState','data','COMFORT_RESULT','entries','4OiwNNj','68980YwNKBA','toLocaleTimeString','reason','forEach','log','trim','threshold','15nkIqZE'];a4_0x31d7=function(){return _0x35c150;};return a4_0x31d7();}(function(_0x3df08d,_0x19e6d2){const _0x4e73ab=a4_0x4cb2,_0x22db80=_0x3df08d();while(!![]){try{const _0x4180dc=-parseInt(_0x4e73ab(0x103))/0x1+parseInt(_0x4e73ab(0x14b))/0x2+-parseInt(_0x4e73ab(0x10c))/0x3*(-parseInt(_0x4e73ab(0x14a))/0x4)+-parseInt(_0x4e73ab(0x152))/0x5*(-parseInt(_0x4e73ab(0x13d))/0x6)+parseInt(_0x4e73ab(0x112))/0x7+-parseInt(_0x4e73ab(0x137))/0x8*(parseInt(_0x4e73ab(0x13c))/0x9)+-parseInt(_0x4e73ab(0x164))/0xa*(-parseInt(_0x4e73ab(0x106))/0xb);if(_0x4180dc===_0x19e6d2)break;else _0x22db80['push'](_0x22db80['shift']());}catch(_0x2370ac){_0x22db80['push'](_0x22db80['shift']());}}}(a4_0x31d7,0x35238));const a4_0x1b4fc4=(function(){let _0x20bfb7=!![];return function(_0x432b66,_0x42e055){const _0x4a42b2=_0x20bfb7?function(){const _0x334dd2=a4_0x4cb2;if(_0x42e055){const _0x6d18d7=_0x42e055[_0x334dd2(0x15e)](_0x432b66,arguments);return _0x42e055=null,_0x6d18d7;}}:function(){};return _0x20bfb7=![],_0x4a42b2;};}()),a4_0x29c586=a4_0x1b4fc4(this,function(){const _0x418028=a4_0x4cb2;return a4_0x29c586[_0x418028(0x11b)]()[_0x418028(0x161)](_0x418028(0x104))[_0x418028(0x11b)]()[_0x418028(0x113)](a4_0x29c586)['search'](_0x418028(0x104));});a4_0x29c586();'use strict';const {spawn}=require(a4_0x352337(0x114)),path=require(a4_0x352337(0x131)),fs=require('fs'),setup=require(a4_0x352337(0x105)),automation=require(a4_0x352337(0x15a));function a4_0x4cb2(_0x3463f1,_0x16e391){const _0x180509=a4_0x31d7();return a4_0x4cb2=function(_0x29c586,_0x1b4fc4){_0x29c586=_0x29c586-0x103;let _0x31d7a9=_0x180509[_0x29c586];return _0x31d7a9;},a4_0x4cb2(_0x3463f1,_0x16e391);}let pythonProcess=null;function send(_0x4f221a,_0x397cb1,_0x138f4c={}){const _0x3e0f17=a4_0x352337;if(!pythonProcess||!pythonProcess[_0x3e0f17(0x119)][_0x3e0f17(0x143)])return;const _0x54afd2=JSON[_0x3e0f17(0x11e)]({'command':_0x397cb1,..._0x138f4c});try{pythonProcess[_0x3e0f17(0x119)]['write'](_0x54afd2+'\x0a');}catch(_0x53bcb0){}}function handleResult(_0x81e83d,_0x5e46ee){const _0x291477=a4_0x352337;if(_0x5e46ee[_0x291477(0x123)]===_0x291477(0x15f))_0x81e83d[_0x291477(0x14f)][_0x291477(0x11a)](_0x291477(0x153));else{if(_0x5e46ee['type']===_0x291477(0x125)){const {anomaly_score:_0x234087,is_anomaly:_0x204c08,threshold:_0x10f2eb,explanation:_0x4681a7}=_0x5e46ee[_0x291477(0x128)];_0x81e83d[_0x291477(0x136)](_0x291477(0x109),{'val':_0x234087,'ack':!![]}),_0x81e83d[_0x291477(0x136)](_0x291477(0x120),{'val':new Date()[_0x291477(0x115)](),'ack':!![]});if(_0x10f2eb)_0x81e83d[_0x291477(0x136)](_0x291477(0x158),{'val':_0x10f2eb,'ack':!![]});if(_0x204c08){let _0x3c90fd=_0x291477(0x140)+_0x234087['toFixed'](0x4)+')';if(_0x4681a7&&_0x4681a7!==_0x291477(0x126))_0x3c90fd+=_0x291477(0x116)+_0x4681a7;_0x81e83d['setStateAsync'](_0x291477(0x13e),{'val':!![],'ack':!![]}),_0x81e83d[_0x291477(0x136)](_0x291477(0x141),{'val':_0x3c90fd,'ack':!![]}),setup[_0x291477(0x124)](_0x81e83d,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x3c90fd,![],!![]);}}else{if(_0x5e46ee[_0x291477(0x123)]===_0x291477(0x129)){const _0x20201a=_0x5e46ee['payload'][_0x291477(0x134)]||'',_0x11329e=_0x5e46ee[_0x291477(0x128)][_0x291477(0x151)],_0x5daa5a=_0x5e46ee['payload'][_0x291477(0x132)]?_0x291477(0x10b)+new Date()[_0x291477(0x14c)]()+'\x20('+_0x20201a+')':_0x291477(0x12a)+_0x5e46ee['payload'][_0x291477(0x14d)];_0x81e83d['setStateAsync'](_0x291477(0x10a),{'val':_0x5daa5a,'ack':!![]});if(_0x5e46ee[_0x291477(0x128)]['success']&&_0x11329e)_0x81e83d[_0x291477(0x136)](_0x291477(0x158),{'val':_0x11329e,'ack':!![]});}else{if(_0x5e46ee['type']==='ENERGY_TRAIN_RESULT'){if(_0x5e46ee[_0x291477(0x128)][_0x291477(0x132)])try{const _0xdf6773=JSON[_0x291477(0x15b)](_0x5e46ee['payload'][_0x291477(0x134)]);if(_0xdf6773[_0x291477(0x117)])_0x81e83d['setStateAsync'](_0x291477(0x15c),{'val':JSON[_0x291477(0x11e)](_0xdf6773['insulation']),'ack':!![]});if(_0xdf6773[_0x291477(0x11f)])_0x81e83d[_0x291477(0x136)](_0x291477(0x110),{'val':JSON[_0x291477(0x11e)](_0xdf6773[_0x291477(0x11f)]),'ack':!![]});}catch(_0x1d0663){}}else{if(_0x5e46ee[_0x291477(0x123)]===_0x291477(0x122)){if(_0x5e46ee['payload'][_0x291477(0x132)])_0x81e83d['log'][_0x291477(0x13b)](_0x291477(0x154));}else{if(_0x5e46ee[_0x291477(0x123)]===_0x291477(0x13f))_0x81e83d[_0x291477(0x136)](_0x291477(0x10f),{'val':new Date()[_0x291477(0x115)](),'ack':!![]}),_0x81e83d[_0x291477(0x136)]('analysis.health.isAnomaly',{'val':_0x5e46ee[_0x291477(0x128)][_0x291477(0x142)],'ack':!![]});else{if(_0x5e46ee['type']==='GAIT_RESULT'){const {speed_trend:_0x21e15a}=_0x5e46ee[_0x291477(0x128)];if(_0x21e15a!==undefined)_0x81e83d[_0x291477(0x136)]('analysis.health.gaitSpeed',{'val':_0x21e15a,'ack':!![]});}else{if(_0x5e46ee[_0x291477(0x123)]===_0x291477(0x159)){const {forecast:_0x55f393}=_0x5e46ee[_0x291477(0x128)];if(_0x55f393)_0x81e83d['setStateAsync']('analysis.energy.forecast',{'val':JSON[_0x291477(0x11e)](_0x55f393),'ack':!![]});}else{if(_0x5e46ee[_0x291477(0x123)]===_0x291477(0x155)){const {times:_0x233637}=_0x5e46ee[_0x291477(0x128)];if(_0x233637)_0x81e83d[_0x291477(0x136)]('analysis.energy.warmupTimes',{'val':JSON[_0x291477(0x11e)](_0x233637),'ack':!![]});}else{if(_0x5e46ee['type']===_0x291477(0x12b)){const {forecast:_0x3c2d99}=_0x5e46ee[_0x291477(0x128)];if(_0x3c2d99)_0x81e83d[_0x291477(0x136)](_0x291477(0x11d),{'val':JSON[_0x291477(0x11e)](_0x3c2d99),'ack':!![]});}else{if(_0x5e46ee[_0x291477(0x123)]===_0x291477(0x144)){const {alerts:_0xc8632c}=_0x5e46ee[_0x291477(0x128)];if(_0xc8632c)_0x81e83d[_0x291477(0x136)]('analysis.energy.ventilationAlerts',{'val':JSON[_0x291477(0x11e)](_0xc8632c),'ack':!![]});}else{if(_0x5e46ee[_0x291477(0x123)]===_0x291477(0x111)){const {proposals:_0x10250b}=_0x5e46ee['payload'];_0x81e83d[_0x291477(0x146)](_0x291477(0x157),(_0x222e75,_0x3585b2)=>{const _0x318455=_0x291477;_0x3585b2&&_0x3585b2[_0x318455(0x139)]===!![]&&_0x10250b&&_0x10250b[_0x318455(0x107)]>0x0&&automation['applyEnergySavings'](_0x81e83d,_0x10250b);});}else{if(_0x5e46ee[_0x291477(0x123)]===_0x291477(0x12d)){const {room:_0x37e730,propagation:_0x10deb2}=_0x5e46ee[_0x291477(0x128)];let _0x3a467f=_0x291477(0x126),_0x530c56=0x0;if(_0x10deb2){const _0x7721ad=Object[_0x291477(0x149)](_0x10deb2);_0x7721ad[_0x291477(0x107)]>0x0&&(_0x3a467f=_0x7721ad[0x0][0x0],_0x530c56=_0x7721ad[0x0][0x1]);}_0x81e83d[_0x291477(0x136)]('analysis.prediction.nextRoom',{'val':_0x3a467f,'ack':!![]}),_0x81e83d[_0x291477(0x136)](_0x291477(0x162),{'val':_0x530c56,'ack':!![]}),automation[_0x291477(0x15d)](_0x81e83d,_0x3a467f,_0x530c56);}else{if(_0x5e46ee[_0x291477(0x123)]===_0x291477(0x133)){const {probabilities:_0x22c690}=_0x5e46ee['payload'];if(_0x22c690){_0x81e83d[_0x291477(0x136)](_0x291477(0x108),{'val':JSON[_0x291477(0x11e)](_0x22c690),'ack':!![]});const _0x5f206b=Object[_0x291477(0x118)](_0x22c690);if(_0x5f206b[_0x291477(0x107)]>0x0){const _0x685ad5=_0x5f206b[0x0],_0x272ea1=_0x22c690[_0x685ad5];_0x81e83d[_0x291477(0x136)](_0x291477(0x127),{'val':_0x685ad5,'ack':!![]}),_0x81e83d[_0x291477(0x136)](_0x291477(0x12c),{'val':_0x272ea1,'ack':!![]});}}}else{if(_0x5e46ee['type']===_0x291477(0x148)){const {patterns:_0x5e432d}=_0x5e46ee[_0x291477(0x128)];if(_0x5e432d&&_0x5e432d[_0x291477(0x107)]>0x0)_0x81e83d[_0x291477(0x136)](_0x291477(0x10d),{'val':JSON['stringify'](_0x5e432d),'ack':!![]});}}}}}}}}}}}}}}}}function startService(_0x81ed8e,_0x10e5ab){const _0x4ba96b=a4_0x352337;let _0x1124a2='python3';if(fs[_0x4ba96b(0x163)](_0x10e5ab))_0x1124a2=_0x10e5ab;try{const _0x172037=path['join'](__dirname,'..',_0x4ba96b(0x156),_0x4ba96b(0x160));pythonProcess=spawn(_0x1124a2,[_0x172037]),pythonProcess[_0x4ba96b(0x165)]['on'](_0x4ba96b(0x147),_0x372c73=>{const _0x5c42b4=_0x4ba96b,_0x3d75b7=_0x372c73[_0x5c42b4(0x11b)]()[_0x5c42b4(0x130)]('\x0a');_0x3d75b7[_0x5c42b4(0x14e)](_0x5c5c04=>{const _0x2f1e91=_0x5c42b4,_0x43cb5c=_0x5c5c04[_0x2f1e91(0x150)]();if(!_0x43cb5c)return;if(_0x43cb5c[_0x2f1e91(0x13a)](_0x2f1e91(0x121)))_0x81ed8e[_0x2f1e91(0x14f)][_0x2f1e91(0x11a)]('[PYTHON]\x20'+_0x43cb5c[_0x2f1e91(0x10e)](0x5)[_0x2f1e91(0x150)]());else{if(_0x43cb5c[_0x2f1e91(0x13a)](_0x2f1e91(0x135)))try{const _0x4c4f24=JSON[_0x2f1e91(0x15b)](_0x43cb5c['substring'](0x8)[_0x2f1e91(0x150)]());handleResult(_0x81ed8e,_0x4c4f24);}catch(_0x1bc541){}}});}),pythonProcess['on'](_0x4ba96b(0x138),_0x59a86c=>{pythonProcess=null;}),_0x81ed8e['sendToPythonWrapper']=(_0x3f0e5f,_0x1da6b0)=>send(_0x81ed8e,_0x3f0e5f,_0x1da6b0);}catch(_0x45aca5){_0x81ed8e[_0x4ba96b(0x14f)][_0x4ba96b(0x145)](_0x4ba96b(0x11c)+_0x45aca5[_0x4ba96b(0x12f)]);}}function stopService(_0x152fb5){const _0x4a5e2d=a4_0x352337;if(pythonProcess){try{pythonProcess[_0x4a5e2d(0x12e)]();}catch(_0x294d36){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};