const a4_0x38cbce=a4_0x3b45;(function(_0x1730a9,_0x26c56b){const _0xa453aa=a4_0x3b45,_0x3dccb4=_0x1730a9();while(!![]){try{const _0x195fe4=-parseInt(_0xa453aa(0xc9))/0x1*(parseInt(_0xa453aa(0xc2))/0x2)+parseInt(_0xa453aa(0xea))/0x3+parseInt(_0xa453aa(0xc8))/0x4*(-parseInt(_0xa453aa(0x102))/0x5)+parseInt(_0xa453aa(0xc0))/0x6*(parseInt(_0xa453aa(0xed))/0x7)+-parseInt(_0xa453aa(0xfd))/0x8+parseInt(_0xa453aa(0x113))/0x9+parseInt(_0xa453aa(0xe9))/0xa;if(_0x195fe4===_0x26c56b)break;else _0x3dccb4['push'](_0x3dccb4['shift']());}catch(_0x2b78a5){_0x3dccb4['push'](_0x3dccb4['shift']());}}}(a4_0x5620,0xc371a));const a4_0xfa2b3b=(function(){let _0x4bfc5e=!![];return function(_0x5cfe18,_0x1c2509){const _0x3f8477=_0x4bfc5e?function(){const _0x25532b=a4_0x3b45;if(_0x1c2509){const _0x4a2de2=_0x1c2509[_0x25532b(0x110)](_0x5cfe18,arguments);return _0x1c2509=null,_0x4a2de2;}}:function(){};return _0x4bfc5e=![],_0x3f8477;};}()),a4_0x56e0c7=a4_0xfa2b3b(this,function(){const _0x546192=a4_0x3b45;return a4_0x56e0c7[_0x546192(0x112)]()[_0x546192(0xe2)](_0x546192(0x10d))['toString']()[_0x546192(0xf4)](a4_0x56e0c7)['search'](_0x546192(0x10d));});function a4_0x3b45(_0x3b2e39,_0x4f8a68){const _0x57d25d=a4_0x5620();return a4_0x3b45=function(_0x56e0c7,_0xfa2b3b){_0x56e0c7=_0x56e0c7-0xba;let _0x562080=_0x57d25d[_0x56e0c7];return _0x562080;},a4_0x3b45(_0x3b2e39,_0x4f8a68);}a4_0x56e0c7();'use strict';const {spawn}=require(a4_0x38cbce(0x107)),path=require(a4_0x38cbce(0xc4)),fs=require('fs'),setup=require(a4_0x38cbce(0xd9)),automation=require(a4_0x38cbce(0xc6));let pythonProcess=null;function send(_0x43f9b8,_0x56c1fb,_0x396aef={}){const _0x32801f=a4_0x38cbce;if(!pythonProcess||!pythonProcess[_0x32801f(0x11c)][_0x32801f(0xe7)])return;const _0x124199=JSON[_0x32801f(0xf6)]({'command':_0x56c1fb,..._0x396aef});try{pythonProcess[_0x32801f(0x11c)][_0x32801f(0x10a)](_0x124199+'\x0a');}catch(_0x119aaa){}}function handleResult(_0x5491b5,_0xfa67dd){const _0x3cc49a=a4_0x38cbce;if(_0xfa67dd['type']===_0x3cc49a(0x106))_0x5491b5[_0x3cc49a(0xcc)][_0x3cc49a(0xce)](_0x3cc49a(0xfa));else{if(_0xfa67dd[_0x3cc49a(0xbd)]===_0x3cc49a(0xc7)){const {anomaly_score:_0x4775a2,is_anomaly:_0x1843cc,threshold:_0x5a8df6,explanation:_0x33546c}=_0xfa67dd[_0x3cc49a(0x10f)];_0x5491b5[_0x3cc49a(0xee)]('analysis.security.lastScore',{'val':_0x4775a2,'ack':!![]}),_0x5491b5[_0x3cc49a(0xee)](_0x3cc49a(0xda),{'val':new Date()[_0x3cc49a(0xdd)](),'ack':!![]});if(_0x5a8df6)_0x5491b5[_0x3cc49a(0xee)](_0x3cc49a(0xdb),{'val':_0x5a8df6,'ack':!![]});if(_0x1843cc){let _0x1694cd=_0x3cc49a(0xf1)+_0x4775a2[_0x3cc49a(0x109)](0x4)+')';if(_0x33546c&&_0x33546c!=='Unknown')_0x1694cd+=_0x3cc49a(0xd3)+_0x33546c;_0x5491b5[_0x3cc49a(0xee)](_0x3cc49a(0x11f),{'val':!![],'ack':!![]}),_0x5491b5['setStateAsync'](_0x3cc49a(0xba),{'val':_0x1694cd,'ack':!![]}),setup[_0x3cc49a(0xbe)](_0x5491b5,_0x3cc49a(0xe6)+_0x1694cd,![],!![]);}}else{if(_0xfa67dd[_0x3cc49a(0xbd)]===_0x3cc49a(0x11d)){const _0x19c4b8=_0xfa67dd[_0x3cc49a(0x10f)][_0x3cc49a(0xe1)]||'',_0xc5c5e7=_0xfa67dd['payload'][_0x3cc49a(0xec)],_0x238328=_0xfa67dd[_0x3cc49a(0x10f)][_0x3cc49a(0xf3)]?_0x3cc49a(0xd4)+new Date()[_0x3cc49a(0xd6)]()+'\x20('+_0x19c4b8+')':'Failed:\x20'+_0xfa67dd[_0x3cc49a(0x10f)][_0x3cc49a(0xff)];_0x5491b5[_0x3cc49a(0xee)](_0x3cc49a(0xbc),{'val':_0x238328,'ack':!![]});if(_0xfa67dd['payload'][_0x3cc49a(0xf3)]&&_0xc5c5e7)_0x5491b5[_0x3cc49a(0xee)](_0x3cc49a(0xdb),{'val':_0xc5c5e7,'ack':!![]});}else{if(_0xfa67dd['type']===_0x3cc49a(0x10b)){if(_0xfa67dd[_0x3cc49a(0x10f)][_0x3cc49a(0xf3)])try{const _0x4aa886=JSON[_0x3cc49a(0xf2)](_0xfa67dd[_0x3cc49a(0x10f)][_0x3cc49a(0xe1)]);if(_0x4aa886['insulation'])_0x5491b5[_0x3cc49a(0xee)]('analysis.energy.insulationScore',{'val':JSON[_0x3cc49a(0xf6)](_0x4aa886[_0x3cc49a(0x105)]),'ack':!![]});if(_0x4aa886[_0x3cc49a(0xc3)])_0x5491b5[_0x3cc49a(0xee)](_0x3cc49a(0xd0),{'val':JSON[_0x3cc49a(0xf6)](_0x4aa886[_0x3cc49a(0xc3)]),'ack':!![]});}catch(_0x569371){}}else{if(_0xfa67dd['type']===_0x3cc49a(0xfc)){if(_0xfa67dd['payload'][_0x3cc49a(0xf3)])_0x5491b5[_0x3cc49a(0xcc)][_0x3cc49a(0xe4)](_0x3cc49a(0x100));}else{if(_0xfa67dd['type']===_0x3cc49a(0xc5))_0x5491b5['setStateAsync'](_0x3cc49a(0xca),{'val':new Date()['toISOString'](),'ack':!![]}),_0x5491b5['setStateAsync'](_0x3cc49a(0xe0),{'val':_0xfa67dd[_0x3cc49a(0x10f)][_0x3cc49a(0xd1)],'ack':!![]});else{if(_0xfa67dd[_0x3cc49a(0xbd)]===_0x3cc49a(0xe8)){const {speed_trend:_0x2be621}=_0xfa67dd[_0x3cc49a(0x10f)];if(_0x2be621!==undefined)_0x5491b5[_0x3cc49a(0xee)](_0x3cc49a(0x117),{'val':_0x2be621,'ack':!![]});}else{if(_0xfa67dd['type']===_0x3cc49a(0xd7)){const {forecast:_0x361c55}=_0xfa67dd[_0x3cc49a(0x10f)];if(_0x361c55)_0x5491b5[_0x3cc49a(0xee)](_0x3cc49a(0x10e),{'val':JSON['stringify'](_0x361c55),'ack':!![]});}else{if(_0xfa67dd[_0x3cc49a(0xbd)]===_0x3cc49a(0xfe)){const {times:_0x4be96f,sources:_0xd1f987,details:_0x58f67b}=_0xfa67dd['payload'];if(_0x4be96f)_0x5491b5[_0x3cc49a(0xee)](_0x3cc49a(0x116),{'val':JSON[_0x3cc49a(0xf6)](_0x4be96f),'ack':!![]});if(_0xd1f987)_0x5491b5['setStateAsync'](_0x3cc49a(0xf5),{'val':JSON[_0x3cc49a(0xf6)](_0xd1f987),'ack':!![]});if(_0x58f67b)_0x5491b5[_0x3cc49a(0xee)](_0x3cc49a(0xbb),{'val':JSON[_0x3cc49a(0xf6)](_0x58f67b),'ack':!![]});}else{if(_0xfa67dd[_0x3cc49a(0xbd)]==='RL_PENALTY_UPDATE'){const {penalties:_0x4c3fed}=_0xfa67dd[_0x3cc49a(0x10f)];if(_0x4c3fed)_0x5491b5[_0x3cc49a(0xee)]('analysis.energy.rlPenalties',{'val':JSON['stringify'](_0x4c3fed),'ack':!![]});}else{if(_0xfa67dd[_0x3cc49a(0xbd)]===_0x3cc49a(0xf0)){const {forecast:_0x3a45e}=_0xfa67dd['payload'];if(_0x3a45e)_0x5491b5['setStateAsync'](_0x3cc49a(0x114),{'val':JSON[_0x3cc49a(0xf6)](_0x3a45e),'ack':!![]});}else{if(_0xfa67dd[_0x3cc49a(0xbd)]==='VENTILATION_ALERT'){const {alerts:_0x198599}=_0xfa67dd['payload'];if(_0x198599)_0x5491b5['setStateAsync'](_0x3cc49a(0xf7),{'val':JSON['stringify'](_0x198599),'ack':!![]});}else{if(_0xfa67dd[_0x3cc49a(0xbd)]===_0x3cc49a(0xde)){const {proposals:_0x191679}=_0xfa67dd[_0x3cc49a(0x10f)];_0x5491b5['getState'](_0x3cc49a(0x119),(_0x444d7a,_0x340360)=>{const _0x5f2d64=_0x3cc49a;_0x340360&&_0x340360['val']===!![]&&_0x191679&&_0x191679[_0x5f2d64(0xd2)]>0x0&&automation['applyEnergySavings'](_0x5491b5,_0x191679);});}else{if(_0xfa67dd[_0x3cc49a(0xbd)]===_0x3cc49a(0xcd)){const {room:_0x2829e0,propagation:_0x28716a}=_0xfa67dd[_0x3cc49a(0x10f)];let _0x36af2e=_0x3cc49a(0x11b),_0x1fa0b0=0x0;if(_0x28716a){const _0x3777e3=Object['entries'](_0x28716a);_0x3777e3[_0x3cc49a(0xd2)]>0x0&&(_0x36af2e=_0x3777e3[0x0][0x0],_0x1fa0b0=_0x3777e3[0x0][0x1]);}_0x5491b5[_0x3cc49a(0xee)](_0x3cc49a(0xe5),{'val':_0x36af2e,'ack':!![]}),_0x5491b5[_0x3cc49a(0xee)](_0x3cc49a(0xcb),{'val':_0x1fa0b0,'ack':!![]}),automation[_0x3cc49a(0x11a)](_0x5491b5,_0x36af2e,_0x1fa0b0);}else{if(_0xfa67dd[_0x3cc49a(0xbd)]===_0x3cc49a(0x11e)){const {probabilities:_0xec642e}=_0xfa67dd[_0x3cc49a(0x10f)];if(_0xec642e){_0x5491b5[_0x3cc49a(0xee)](_0x3cc49a(0x118),{'val':JSON['stringify'](_0xec642e),'ack':!![]});const _0x47527c=Object[_0x3cc49a(0xd5)](_0xec642e);if(_0x47527c[_0x3cc49a(0xd2)]>0x0){const _0x1bdb0f=_0x47527c[0x0],_0x543b5d=_0xec642e[_0x1bdb0f];_0x5491b5[_0x3cc49a(0xee)]('analysis.prediction.trackerTopRoom',{'val':_0x1bdb0f,'ack':!![]}),_0x5491b5['setStateAsync'](_0x3cc49a(0xbf),{'val':_0x543b5d,'ack':!![]});}}}else{if(_0xfa67dd[_0x3cc49a(0xbd)]===_0x3cc49a(0xf8)){const {patterns:_0x13837f}=_0xfa67dd[_0x3cc49a(0x10f)];if(_0x13837f&&_0x13837f[_0x3cc49a(0xd2)]>0x0)_0x5491b5[_0x3cc49a(0xee)](_0x3cc49a(0x108),{'val':JSON[_0x3cc49a(0xf6)](_0x13837f),'ack':!![]});}}}}}}}}}}}}}}}}}function startService(_0x7f5f4b,_0x5874e4){const _0x18bdca=a4_0x38cbce;let _0x7b8d1c=_0x18bdca(0x10c);if(fs['existsSync'](_0x5874e4))_0x7b8d1c=_0x5874e4;try{const _0x44d03a=path[_0x18bdca(0xe3)](__dirname,'..',_0x18bdca(0xc1),_0x18bdca(0xeb));pythonProcess=spawn(_0x7b8d1c,[_0x44d03a]),pythonProcess[_0x18bdca(0x103)]['on'](_0x18bdca(0x111),_0x4661d5=>{const _0x259e86=_0x18bdca,_0x101c96=_0x4661d5[_0x259e86(0x112)]()['split']('\x0a');_0x101c96[_0x259e86(0xcf)](_0x53c908=>{const _0x44e706=_0x259e86,_0x428ea8=_0x53c908[_0x44e706(0x104)]();if(!_0x428ea8)return;if(_0x428ea8[_0x44e706(0x101)]('[LOG]'))_0x7f5f4b[_0x44e706(0xcc)]['debug'](_0x44e706(0xf9)+_0x428ea8['substring'](0x5)['trim']());else{if(_0x428ea8[_0x44e706(0x101)](_0x44e706(0xef)))try{const _0x109566=JSON[_0x44e706(0xf2)](_0x428ea8[_0x44e706(0x120)](0x8)[_0x44e706(0x104)]());handleResult(_0x7f5f4b,_0x109566);}catch(_0x23656e){}}});}),pythonProcess['on'](_0x18bdca(0x115),_0x589174=>{pythonProcess=null;}),_0x7f5f4b['sendToPythonWrapper']=(_0x19476a,_0x238e0d)=>send(_0x7f5f4b,_0x19476a,_0x238e0d);}catch(_0x5c7268){_0x7f5f4b['log'][_0x18bdca(0xfb)]('Error\x20launching\x20Python:\x20'+_0x5c7268[_0x18bdca(0xd8)]);}}function stopService(_0x174314){const _0x4d9a9d=a4_0x38cbce;if(pythonProcess){try{pythonProcess[_0x4d9a9d(0xdc)]();}catch(_0x4632cf){}pythonProcess=null;}}function a4_0x5620(){const _0x21d840=['apply','data','toString','2943090ZlfWra','analysis.energy.pinnForecast','close','analysis.energy.warmupTimes','analysis.health.gaitSpeed','analysis.prediction.trackerState','analysis.energy.mpcActive','handlePrediction','Unknown','stdin','TRAINING_COMPLETE','TRACKER_RESULT','analysis.isAlert','substring','analysis.alertReason','analysis.energy.warmupDetails','analysis.training.status','type','sendNotification','analysis.prediction.trackerConfidence','565332pMyPii','python_service','109358voDmDn','heating','path','HEALTH_RESULT','./automation','SECURITY_RESULT','20ZjXOYt','11hqJngQ','analysis.health.lastCheck','analysis.prediction.confidence','log','SIGNAL_RESULT','debug','forEach','analysis.energy.heatingScore','is_anomaly','length','\x0aGrund:\x20','Success:\x20','keys','toLocaleTimeString','ENERGY_PREDICT_RESULT','message','./setup','analysis.security.lastCheck','analysis.security.currentThreshold','kill','toISOString','ENERGY_OPTIMIZE_RESULT','exports','analysis.health.isAnomaly','details','search','join','info','analysis.prediction.nextRoom','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','writable','GAIT_RESULT','3448870bbJOGn','2270598KWJVQv','service.py','threshold','112ToNHzL','setStateAsync','[RESULT]','PINN_PREDICT_RESULT','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','parse','success','constructor','analysis.energy.warmupSources','stringify','analysis.energy.ventilationAlerts','COMFORT_RESULT','[PYTHON]\x20','üêç\x20Python\x20Pong','error','HEALTH_TRAIN_RESULT','8116424vqZWmt','WARMUP_RESULT','reason','‚úÖ\x20HEALTH\x20TRAINED.','startsWith','519755BuPpym','stdout','trim','insulation','PONG','child_process','analysis.automation.detectedPatterns','toFixed','write','ENERGY_TRAIN_RESULT','python3','(((.+)+)+)+$','analysis.energy.forecast','payload'];a4_0x5620=function(){return _0x21d840;};return a4_0x5620();}module[a4_0x38cbce(0xdf)]={'startService':startService,'stopService':stopService,'send':send};