const a4_0x199c4b=a4_0x1156;(function(_0x261f76,_0x16c265){const _0x10a078=a4_0x1156,_0x38e396=_0x261f76();while(!![]){try{const _0x3ed553=parseInt(_0x10a078(0x111))/0x1*(parseInt(_0x10a078(0xf1))/0x2)+-parseInt(_0x10a078(0xff))/0x3*(-parseInt(_0x10a078(0x105))/0x4)+parseInt(_0x10a078(0x145))/0x5+parseInt(_0x10a078(0x116))/0x6*(parseInt(_0x10a078(0x12b))/0x7)+-parseInt(_0x10a078(0x107))/0x8+parseInt(_0x10a078(0x10d))/0x9*(parseInt(_0x10a078(0x13b))/0xa)+parseInt(_0x10a078(0xfa))/0xb*(-parseInt(_0x10a078(0x124))/0xc);if(_0x3ed553===_0x16c265)break;else _0x38e396['push'](_0x38e396['shift']());}catch(_0x523f3a){_0x38e396['push'](_0x38e396['shift']());}}}(a4_0x31c7,0xc5157));const a4_0x2e8489=(function(){let _0x3ce685=!![];return function(_0x597faf,_0x97d7ba){const _0x41365a=_0x3ce685?function(){const _0x395fee=a4_0x1156;if(_0x97d7ba){const _0x186074=_0x97d7ba[_0x395fee(0xf8)](_0x597faf,arguments);return _0x97d7ba=null,_0x186074;}}:function(){};return _0x3ce685=![],_0x41365a;};}()),a4_0x368120=a4_0x2e8489(this,function(){const _0x4e7b49=a4_0x1156;return a4_0x368120['toString']()[_0x4e7b49(0x130)](_0x4e7b49(0x109))[_0x4e7b49(0x11c)]()[_0x4e7b49(0x127)](a4_0x368120)[_0x4e7b49(0x130)](_0x4e7b49(0x109));});a4_0x368120();'use strict';const {spawn}=require('child_process'),path=require(a4_0x199c4b(0x146)),fs=require('fs'),setup=require(a4_0x199c4b(0xed)),automation=require(a4_0x199c4b(0x13e));let pythonProcess=null;function a4_0x31c7(){const _0x1ccc1a=['./automation','getState','type','PONG','kill','analysis.prediction.trackerTopRoom','stringify','5377630MFdrLU','path','Failed:\x20','write','handlePrediction','[LOG]','substring','error','join','info','data','\x0aGrund:\x20','debug','SECURITY_RESULT','analysis.security.lastScore','startsWith','./setup','analysis.security.currentThreshold','GAIT_RESULT','exports','1505618sgoCHh','stdin','analysis.health.gaitSpeed','payload','threshold','applyEnergySavings','stdout','apply','COMFORT_RESULT','99704BiKiQa','analysis.energy.pinnForecast','insulation','reason','analysis.energy.warmupTimes','71019ttnlEE','analysis.health.lastCheck','toFixed','details','HEALTH_TRAIN_RESULT','analysis.energy.warmupDetails','164KNsPOR','analysis.energy.insulationScore','1765232aqpCNF','python3','(((.+)+)+)+$','close','TRACKER_RESULT','is_anomaly','3114PlJzKZ','analysis.energy.mpcActive','analysis.prediction.trackerConfidence','keys','1pmaGNo','analysis.energy.heatingScore','analysis.isAlert','PINN_PREDICT_RESULT','message','378JwTlwq','TRAINING_COMPLETE','split','length','setStateAsync','ENERGY_PREDICT_RESULT','toString','ENERGY_TRAIN_RESULT','python_service','sendNotification','toISOString','HEALTH_RESULT','Unknown','analysis.training.status','3348bCQHNr','[PYTHON]\x20','[RESULT]','constructor','analysis.energy.warmupSources','ENERGY_OPTIMIZE_RESULT','SIGNAL_RESULT','24423VkffOU','parse','success','toLocaleTimeString','existsSync','search','forEach','val','log','RL_PENALTY_UPDATE','writable','analysis.energy.rlPenalties','trim','ðŸ\x20Python\x20Pong','entries','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','15550TYfCNx','âœ…\x20HEALTH\x20TRAINED.','heating'];a4_0x31c7=function(){return _0x1ccc1a;};return a4_0x31c7();}function send(_0x445c75,_0x5d92ea,_0xe48e8c={}){const _0x257427=a4_0x199c4b;if(!pythonProcess||!pythonProcess['stdin'][_0x257427(0x135)])return;const _0x49ed5e=JSON['stringify']({'command':_0x5d92ea,..._0xe48e8c});try{pythonProcess[_0x257427(0xf2)][_0x257427(0x148)](_0x49ed5e+'\x0a');}catch(_0x2d53e7){}}function a4_0x1156(_0xf41d,_0x24378d){const _0x3a3f35=a4_0x31c7();return a4_0x1156=function(_0x368120,_0x2e8489){_0x368120=_0x368120-0xe5;let _0x31c770=_0x3a3f35[_0x368120];return _0x31c770;},a4_0x1156(_0xf41d,_0x24378d);}function handleResult(_0x5d0c79,_0x1effb1){const _0x3ded86=a4_0x199c4b;if(_0x1effb1[_0x3ded86(0x140)]===_0x3ded86(0x141))_0x5d0c79[_0x3ded86(0x133)][_0x3ded86(0xe9)](_0x3ded86(0x138));else{if(_0x1effb1['type']===_0x3ded86(0xea)){const {anomaly_score:_0x3d23a3,is_anomaly:_0x2d3085,threshold:_0x30067f,explanation:_0x3f6c56}=_0x1effb1[_0x3ded86(0xf4)];_0x5d0c79[_0x3ded86(0x11a)](_0x3ded86(0xeb),{'val':_0x3d23a3,'ack':!![]}),_0x5d0c79[_0x3ded86(0x11a)]('analysis.security.lastCheck',{'val':new Date()[_0x3ded86(0x120)](),'ack':!![]});if(_0x30067f)_0x5d0c79[_0x3ded86(0x11a)](_0x3ded86(0xee),{'val':_0x30067f,'ack':!![]});if(_0x2d3085){let _0x295949=_0x3ded86(0x13a)+_0x3d23a3[_0x3ded86(0x101)](0x4)+')';if(_0x3f6c56&&_0x3f6c56!==_0x3ded86(0x122))_0x295949+=_0x3ded86(0xe8)+_0x3f6c56;_0x5d0c79['setStateAsync'](_0x3ded86(0x113),{'val':!![],'ack':!![]}),_0x5d0c79['setStateAsync']('analysis.alertReason',{'val':_0x295949,'ack':!![]}),setup[_0x3ded86(0x11f)](_0x5d0c79,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x295949,![],!![]);}}else{if(_0x1effb1[_0x3ded86(0x140)]===_0x3ded86(0x117)){const _0x30a294=_0x1effb1[_0x3ded86(0xf4)][_0x3ded86(0x102)]||'',_0x544378=_0x1effb1[_0x3ded86(0xf4)][_0x3ded86(0xf5)],_0x48f1bd=_0x1effb1[_0x3ded86(0xf4)][_0x3ded86(0x12d)]?'Success:\x20'+new Date()[_0x3ded86(0x12e)]()+'\x20('+_0x30a294+')':_0x3ded86(0x147)+_0x1effb1['payload'][_0x3ded86(0xfd)];_0x5d0c79[_0x3ded86(0x11a)](_0x3ded86(0x123),{'val':_0x48f1bd,'ack':!![]});if(_0x1effb1['payload'][_0x3ded86(0x12d)]&&_0x544378)_0x5d0c79[_0x3ded86(0x11a)](_0x3ded86(0xee),{'val':_0x544378,'ack':!![]});}else{if(_0x1effb1[_0x3ded86(0x140)]===_0x3ded86(0x11d)){if(_0x1effb1[_0x3ded86(0xf4)][_0x3ded86(0x12d)])try{const _0x27b6f5=JSON['parse'](_0x1effb1[_0x3ded86(0xf4)][_0x3ded86(0x102)]);if(_0x27b6f5[_0x3ded86(0xfc)])_0x5d0c79[_0x3ded86(0x11a)](_0x3ded86(0x106),{'val':JSON['stringify'](_0x27b6f5[_0x3ded86(0xfc)]),'ack':!![]});if(_0x27b6f5[_0x3ded86(0x13d)])_0x5d0c79[_0x3ded86(0x11a)](_0x3ded86(0x112),{'val':JSON[_0x3ded86(0x144)](_0x27b6f5[_0x3ded86(0x13d)]),'ack':!![]});}catch(_0x2769c9){}}else{if(_0x1effb1['type']===_0x3ded86(0x103)){if(_0x1effb1[_0x3ded86(0xf4)]['success'])_0x5d0c79['log'][_0x3ded86(0xe6)](_0x3ded86(0x13c));}else{if(_0x1effb1[_0x3ded86(0x140)]===_0x3ded86(0x121))_0x5d0c79[_0x3ded86(0x11a)](_0x3ded86(0x100),{'val':new Date()[_0x3ded86(0x120)](),'ack':!![]}),_0x5d0c79[_0x3ded86(0x11a)]('analysis.health.isAnomaly',{'val':_0x1effb1[_0x3ded86(0xf4)][_0x3ded86(0x10c)],'ack':!![]});else{if(_0x1effb1[_0x3ded86(0x140)]===_0x3ded86(0xef)){const {speed_trend:_0x117d88}=_0x1effb1[_0x3ded86(0xf4)];if(_0x117d88!==undefined)_0x5d0c79[_0x3ded86(0x11a)](_0x3ded86(0xf3),{'val':_0x117d88,'ack':!![]});}else{if(_0x1effb1[_0x3ded86(0x140)]===_0x3ded86(0x11b)){const {forecast:_0x1e3780}=_0x1effb1[_0x3ded86(0xf4)];if(_0x1e3780)_0x5d0c79['setStateAsync']('analysis.energy.forecast',{'val':JSON[_0x3ded86(0x144)](_0x1e3780),'ack':!![]});}else{if(_0x1effb1['type']==='WARMUP_RESULT'){const {times:_0x2dcbae,sources:_0x212979,details:_0x3e970d}=_0x1effb1['payload'];if(_0x2dcbae)_0x5d0c79[_0x3ded86(0x11a)](_0x3ded86(0xfe),{'val':JSON[_0x3ded86(0x144)](_0x2dcbae),'ack':!![]});if(_0x212979)_0x5d0c79[_0x3ded86(0x11a)](_0x3ded86(0x128),{'val':JSON[_0x3ded86(0x144)](_0x212979),'ack':!![]});if(_0x3e970d)_0x5d0c79[_0x3ded86(0x11a)](_0x3ded86(0x104),{'val':JSON[_0x3ded86(0x144)](_0x3e970d),'ack':!![]});}else{if(_0x1effb1[_0x3ded86(0x140)]===_0x3ded86(0x134)){const {penalties:_0x25c8ca}=_0x1effb1['payload'];if(_0x25c8ca)_0x5d0c79[_0x3ded86(0x11a)](_0x3ded86(0x136),{'val':JSON[_0x3ded86(0x144)](_0x25c8ca),'ack':!![]});}else{if(_0x1effb1[_0x3ded86(0x140)]===_0x3ded86(0x114)){const {forecast:_0x431315}=_0x1effb1['payload'];if(_0x431315)_0x5d0c79[_0x3ded86(0x11a)](_0x3ded86(0xfb),{'val':JSON['stringify'](_0x431315),'ack':!![]});}else{if(_0x1effb1[_0x3ded86(0x140)]==='VENTILATION_ALERT'){const {alerts:_0x2a5b69}=_0x1effb1[_0x3ded86(0xf4)];if(_0x2a5b69)_0x5d0c79[_0x3ded86(0x11a)]('analysis.energy.ventilationAlerts',{'val':JSON[_0x3ded86(0x144)](_0x2a5b69),'ack':!![]});}else{if(_0x1effb1[_0x3ded86(0x140)]===_0x3ded86(0x129)){const {proposals:_0x4e9a73}=_0x1effb1[_0x3ded86(0xf4)];_0x5d0c79[_0x3ded86(0x13f)](_0x3ded86(0x10e),(_0x46c530,_0x19dbe4)=>{const _0x33c27f=_0x3ded86;_0x19dbe4&&_0x19dbe4[_0x33c27f(0x132)]===!![]&&_0x4e9a73&&_0x4e9a73[_0x33c27f(0x119)]>0x0&&automation[_0x33c27f(0xf6)](_0x5d0c79,_0x4e9a73);});}else{if(_0x1effb1[_0x3ded86(0x140)]===_0x3ded86(0x12a)){const {room:_0x473f2a,propagation:_0x13d0ec}=_0x1effb1[_0x3ded86(0xf4)];let _0x4cea52=_0x3ded86(0x122),_0x4b1b00=0x0;if(_0x13d0ec){const _0xe335b3=Object[_0x3ded86(0x139)](_0x13d0ec);_0xe335b3[_0x3ded86(0x119)]>0x0&&(_0x4cea52=_0xe335b3[0x0][0x0],_0x4b1b00=_0xe335b3[0x0][0x1]);}_0x5d0c79[_0x3ded86(0x11a)]('analysis.prediction.nextRoom',{'val':_0x4cea52,'ack':!![]}),_0x5d0c79[_0x3ded86(0x11a)]('analysis.prediction.confidence',{'val':_0x4b1b00,'ack':!![]}),automation[_0x3ded86(0x149)](_0x5d0c79,_0x4cea52,_0x4b1b00);}else{if(_0x1effb1[_0x3ded86(0x140)]===_0x3ded86(0x10b)){const {probabilities:_0x4fd666}=_0x1effb1['payload'];if(_0x4fd666){_0x5d0c79[_0x3ded86(0x11a)]('analysis.prediction.trackerState',{'val':JSON['stringify'](_0x4fd666),'ack':!![]});const _0x4480fe=Object[_0x3ded86(0x110)](_0x4fd666);if(_0x4480fe['length']>0x0){const _0x4fea15=_0x4480fe[0x0],_0x24201d=_0x4fd666[_0x4fea15];_0x5d0c79[_0x3ded86(0x11a)](_0x3ded86(0x143),{'val':_0x4fea15,'ack':!![]}),_0x5d0c79[_0x3ded86(0x11a)](_0x3ded86(0x10f),{'val':_0x24201d,'ack':!![]});}}}else{if(_0x1effb1[_0x3ded86(0x140)]===_0x3ded86(0xf9)){const {patterns:_0x55cde1}=_0x1effb1[_0x3ded86(0xf4)];if(_0x55cde1&&_0x55cde1[_0x3ded86(0x119)]>0x0)_0x5d0c79['setStateAsync']('analysis.automation.detectedPatterns',{'val':JSON['stringify'](_0x55cde1),'ack':!![]});}}}}}}}}}}}}}}}}}function startService(_0x50f069,_0x22995b){const _0x4d1b9a=a4_0x199c4b;let _0x4af2f1=_0x4d1b9a(0x108);if(fs[_0x4d1b9a(0x12f)](_0x22995b))_0x4af2f1=_0x22995b;try{const _0x223351=path[_0x4d1b9a(0xe5)](__dirname,'..',_0x4d1b9a(0x11e),'service.py');pythonProcess=spawn(_0x4af2f1,[_0x223351]),pythonProcess[_0x4d1b9a(0xf7)]['on'](_0x4d1b9a(0xe7),_0x58e9a6=>{const _0x249555=_0x4d1b9a,_0x26f6e5=_0x58e9a6[_0x249555(0x11c)]()[_0x249555(0x118)]('\x0a');_0x26f6e5[_0x249555(0x131)](_0x47a12e=>{const _0x365728=_0x249555,_0x523e04=_0x47a12e[_0x365728(0x137)]();if(!_0x523e04)return;if(_0x523e04[_0x365728(0xec)](_0x365728(0x14a)))_0x50f069['log'][_0x365728(0xe9)](_0x365728(0x125)+_0x523e04[_0x365728(0x14b)](0x5)[_0x365728(0x137)]());else{if(_0x523e04['startsWith'](_0x365728(0x126)))try{const _0x54b4de=JSON[_0x365728(0x12c)](_0x523e04[_0x365728(0x14b)](0x8)[_0x365728(0x137)]());handleResult(_0x50f069,_0x54b4de);}catch(_0x12badd){}}});}),pythonProcess['on'](_0x4d1b9a(0x10a),_0x33e932=>{pythonProcess=null;}),_0x50f069['sendToPythonWrapper']=(_0x366605,_0x26ddca)=>send(_0x50f069,_0x366605,_0x26ddca);}catch(_0x4fb813){_0x50f069[_0x4d1b9a(0x133)][_0x4d1b9a(0x14c)]('Error\x20launching\x20Python:\x20'+_0x4fb813[_0x4d1b9a(0x115)]);}}function stopService(_0x3a057c){const _0x45f60c=a4_0x199c4b;if(pythonProcess){try{pythonProcess[_0x45f60c(0x142)]();}catch(_0x2d10a8){}pythonProcess=null;}}module[a4_0x199c4b(0xf0)]={'startService':startService,'stopService':stopService,'send':send};