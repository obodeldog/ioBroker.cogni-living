const a4_0x1bf704=a4_0x14d6;function a4_0x3f92(){const _0x410b34=['analysis.automation.detectedPatterns','175020NntVld','analysis.prediction.nextRoom','sendToPythonWrapper','length','HEALTH_RESULT','details','analysis.health.gaitSpeed','âš ï¸\x20SECURITY\x20ALARM:\x20','ðŸ\x20Python\x20Pong','setStateAsync','analysis.security.lastScore','service.py','analysis.prediction.trackerTopRoom','2600ISmLLX','is_anomaly','toString','val','python_service','insulation','ENERGY_TRAIN_RESULT','analysis.health.lastCheck','join','analysis.training.status','keys','substring','117HNsmcE','child_process','python3','Success:\x20','analysis.isAlert','COMFORT_RESULT','SECURITY_RESULT','trim','19XRdMVx','Unknown','reason','Error\x20launching\x20Python:\x20','PONG','analysis.energy.insulationScore','search','[LOG]','success','analysis.health.isAnomaly','toLocaleTimeString','info','parse','exports','145356lxYVhM','stringify','[PYTHON]\x20','forEach','payload','14568srMvHz','heating','HEALTH_TRAIN_RESULT','stdout','close','115srjRgC','split','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','analysis.energy.warmupTimes','Failed:\x20','(((.+)+)+)+$','SIGNAL_RESULT','ENERGY_PREDICT_RESULT','existsSync','./setup','error','handlePrediction','analysis.security.lastCheck','toISOString','debug','constructor','kill','5801502omCZue','GAIT_RESULT','path','analysis.prediction.trackerState','73988idVcwc','TRACKER_RESULT','type','1249964MgKvGx','analysis.prediction.confidence','writable','ENERGY_OPTIMIZE_RESULT','5665ZNHJDP','3khoLbO','WARMUP_RESULT','analysis.energy.ventilationAlerts','log','startsWith','write','TRAINING_COMPLETE','10970qHZYWL','sendNotification','message','analysis.security.currentThreshold','data','[RESULT]','analysis.energy.mpcActive','stdin','analysis.energy.heatingScore'];a4_0x3f92=function(){return _0x410b34;};return a4_0x3f92();}(function(_0x50382b,_0x4dddc7){const _0x46736f=a4_0x14d6,_0x1caeb2=_0x50382b();while(!![]){try{const _0x563c23=parseInt(_0x46736f(0x1ff))/0x1*(-parseInt(_0x46736f(0x22c))/0x2)+parseInt(_0x46736f(0x234))/0x3*(-parseInt(_0x46736f(0x22f))/0x4)+-parseInt(_0x46736f(0x217))/0x5*(-parseInt(_0x46736f(0x245))/0x6)+-parseInt(_0x46736f(0x228))/0x7+-parseInt(_0x46736f(0x212))/0x8*(parseInt(_0x46736f(0x1f7))/0x9)+-parseInt(_0x46736f(0x23b))/0xa*(parseInt(_0x46736f(0x233))/0xb)+parseInt(_0x46736f(0x20d))/0xc*(parseInt(_0x46736f(0x1eb))/0xd);if(_0x563c23===_0x4dddc7)break;else _0x1caeb2['push'](_0x1caeb2['shift']());}catch(_0x37119c){_0x1caeb2['push'](_0x1caeb2['shift']());}}}(a4_0x3f92,0xa14ef));const a4_0x1190b2=(function(){let _0x4ec1e0=!![];return function(_0x149d35,_0x132bb4){const _0x590391=_0x4ec1e0?function(){if(_0x132bb4){const _0x447873=_0x132bb4['apply'](_0x149d35,arguments);return _0x132bb4=null,_0x447873;}}:function(){};return _0x4ec1e0=![],_0x590391;};}()),a4_0x100882=a4_0x1190b2(this,function(){const _0x21f59d=a4_0x14d6;return a4_0x100882[_0x21f59d(0x1ed)]()[_0x21f59d(0x205)]('(((.+)+)+)+$')['toString']()[_0x21f59d(0x226)](a4_0x100882)[_0x21f59d(0x205)](_0x21f59d(0x21c));});a4_0x100882();function a4_0x14d6(_0x5e4953,_0x34d32c){const _0x20a8a7=a4_0x3f92();return a4_0x14d6=function(_0x100882,_0x1190b2){_0x100882=_0x100882-0x1e4;let _0x3f92f2=_0x20a8a7[_0x100882];return _0x3f92f2;},a4_0x14d6(_0x5e4953,_0x34d32c);}'use strict';const {spawn}=require(a4_0x1bf704(0x1f8)),path=require(a4_0x1bf704(0x22a)),fs=require('fs'),setup=require(a4_0x1bf704(0x220)),automation=require('./automation');let pythonProcess=null;function send(_0x561b60,_0x4c34ff,_0x409587={}){const _0xc0944c=a4_0x1bf704;if(!pythonProcess||!pythonProcess[_0xc0944c(0x242)][_0xc0944c(0x231)])return;const _0x2fa583=JSON[_0xc0944c(0x20e)]({'command':_0x4c34ff,..._0x409587});try{pythonProcess[_0xc0944c(0x242)][_0xc0944c(0x239)](_0x2fa583+'\x0a');}catch(_0x4c233e){}}function handleResult(_0x33c58c,_0x7cd351){const _0x1ee30f=a4_0x1bf704;if(_0x7cd351[_0x1ee30f(0x22e)]===_0x1ee30f(0x203))_0x33c58c[_0x1ee30f(0x237)][_0x1ee30f(0x225)](_0x1ee30f(0x1e6));else{if(_0x7cd351[_0x1ee30f(0x22e)]===_0x1ee30f(0x1fd)){const {anomaly_score:_0x49d977,is_anomaly:_0x22c0fb,threshold:_0x4a6526,explanation:_0x11975b}=_0x7cd351['payload'];_0x33c58c[_0x1ee30f(0x1e7)](_0x1ee30f(0x1e8),{'val':_0x49d977,'ack':!![]}),_0x33c58c['setStateAsync'](_0x1ee30f(0x223),{'val':new Date()[_0x1ee30f(0x224)](),'ack':!![]});if(_0x4a6526)_0x33c58c[_0x1ee30f(0x1e7)](_0x1ee30f(0x23e),{'val':_0x4a6526,'ack':!![]});if(_0x22c0fb){let _0x3e9d5b=_0x1ee30f(0x219)+_0x49d977['toFixed'](0x4)+')';if(_0x11975b&&_0x11975b!=='Unknown')_0x3e9d5b+='\x0aGrund:\x20'+_0x11975b;_0x33c58c[_0x1ee30f(0x1e7)](_0x1ee30f(0x1fb),{'val':!![],'ack':!![]}),_0x33c58c[_0x1ee30f(0x1e7)]('analysis.alertReason',{'val':_0x3e9d5b,'ack':!![]}),setup[_0x1ee30f(0x23c)](_0x33c58c,_0x1ee30f(0x1e5)+_0x3e9d5b,![],!![]);}}else{if(_0x7cd351[_0x1ee30f(0x22e)]===_0x1ee30f(0x23a)){const _0x3d2f92=_0x7cd351[_0x1ee30f(0x211)][_0x1ee30f(0x24a)]||'',_0x4fa8d3=_0x7cd351['payload']['threshold'],_0x47db03=_0x7cd351[_0x1ee30f(0x211)][_0x1ee30f(0x207)]?_0x1ee30f(0x1fa)+new Date()[_0x1ee30f(0x209)]()+'\x20('+_0x3d2f92+')':_0x1ee30f(0x21b)+_0x7cd351[_0x1ee30f(0x211)][_0x1ee30f(0x201)];_0x33c58c[_0x1ee30f(0x1e7)](_0x1ee30f(0x1f4),{'val':_0x47db03,'ack':!![]});if(_0x7cd351['payload'][_0x1ee30f(0x207)]&&_0x4fa8d3)_0x33c58c['setStateAsync'](_0x1ee30f(0x23e),{'val':_0x4fa8d3,'ack':!![]});}else{if(_0x7cd351[_0x1ee30f(0x22e)]===_0x1ee30f(0x1f1)){if(_0x7cd351[_0x1ee30f(0x211)][_0x1ee30f(0x207)])try{const _0x11e711=JSON[_0x1ee30f(0x20b)](_0x7cd351['payload']['details']);if(_0x11e711['insulation'])_0x33c58c[_0x1ee30f(0x1e7)](_0x1ee30f(0x204),{'val':JSON[_0x1ee30f(0x20e)](_0x11e711[_0x1ee30f(0x1f0)]),'ack':!![]});if(_0x11e711[_0x1ee30f(0x213)])_0x33c58c[_0x1ee30f(0x1e7)](_0x1ee30f(0x243),{'val':JSON[_0x1ee30f(0x20e)](_0x11e711[_0x1ee30f(0x213)]),'ack':!![]});}catch(_0x385f74){}}else{if(_0x7cd351[_0x1ee30f(0x22e)]===_0x1ee30f(0x214)){if(_0x7cd351[_0x1ee30f(0x211)][_0x1ee30f(0x207)])_0x33c58c[_0x1ee30f(0x237)][_0x1ee30f(0x20a)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x7cd351['type']===_0x1ee30f(0x249))_0x33c58c[_0x1ee30f(0x1e7)](_0x1ee30f(0x1f2),{'val':new Date()[_0x1ee30f(0x224)](),'ack':!![]}),_0x33c58c[_0x1ee30f(0x1e7)](_0x1ee30f(0x208),{'val':_0x7cd351['payload'][_0x1ee30f(0x1ec)],'ack':!![]});else{if(_0x7cd351[_0x1ee30f(0x22e)]===_0x1ee30f(0x229)){const {speed_trend:_0x36037d}=_0x7cd351[_0x1ee30f(0x211)];if(_0x36037d!==undefined)_0x33c58c['setStateAsync'](_0x1ee30f(0x1e4),{'val':_0x36037d,'ack':!![]});}else{if(_0x7cd351[_0x1ee30f(0x22e)]===_0x1ee30f(0x21e)){const {forecast:_0x5aea01}=_0x7cd351[_0x1ee30f(0x211)];if(_0x5aea01)_0x33c58c[_0x1ee30f(0x1e7)]('analysis.energy.forecast',{'val':JSON[_0x1ee30f(0x20e)](_0x5aea01),'ack':!![]});}else{if(_0x7cd351[_0x1ee30f(0x22e)]===_0x1ee30f(0x235)){const {times:_0x1cc9a6}=_0x7cd351['payload'];if(_0x1cc9a6)_0x33c58c[_0x1ee30f(0x1e7)](_0x1ee30f(0x21a),{'val':JSON[_0x1ee30f(0x20e)](_0x1cc9a6),'ack':!![]});}else{if(_0x7cd351[_0x1ee30f(0x22e)]==='PINN_PREDICT_RESULT'){const {forecast:_0x43f140}=_0x7cd351[_0x1ee30f(0x211)];if(_0x43f140)_0x33c58c['setStateAsync']('analysis.energy.pinnForecast',{'val':JSON[_0x1ee30f(0x20e)](_0x43f140),'ack':!![]});}else{if(_0x7cd351[_0x1ee30f(0x22e)]==='VENTILATION_ALERT'){const {alerts:_0x5ad4f8}=_0x7cd351[_0x1ee30f(0x211)];if(_0x5ad4f8)_0x33c58c[_0x1ee30f(0x1e7)](_0x1ee30f(0x236),{'val':JSON['stringify'](_0x5ad4f8),'ack':!![]});}else{if(_0x7cd351[_0x1ee30f(0x22e)]===_0x1ee30f(0x232)){const {proposals:_0x34aafb}=_0x7cd351[_0x1ee30f(0x211)];_0x33c58c['getState'](_0x1ee30f(0x241),(_0x57229c,_0x1d7c9a)=>{const _0x2737db=_0x1ee30f;_0x1d7c9a&&_0x1d7c9a[_0x2737db(0x1ee)]===!![]&&_0x34aafb&&_0x34aafb[_0x2737db(0x248)]>0x0&&automation['applyEnergySavings'](_0x33c58c,_0x34aafb);});}else{if(_0x7cd351[_0x1ee30f(0x22e)]===_0x1ee30f(0x21d)){const {room:_0x1386cd,propagation:_0x2286b9}=_0x7cd351[_0x1ee30f(0x211)];let _0x1d311c=_0x1ee30f(0x200),_0x1b8de8=0x0;if(_0x2286b9){const _0x3645b8=Object['entries'](_0x2286b9);_0x3645b8[_0x1ee30f(0x248)]>0x0&&(_0x1d311c=_0x3645b8[0x0][0x0],_0x1b8de8=_0x3645b8[0x0][0x1]);}_0x33c58c[_0x1ee30f(0x1e7)](_0x1ee30f(0x246),{'val':_0x1d311c,'ack':!![]}),_0x33c58c[_0x1ee30f(0x1e7)](_0x1ee30f(0x230),{'val':_0x1b8de8,'ack':!![]}),automation[_0x1ee30f(0x222)](_0x33c58c,_0x1d311c,_0x1b8de8);}else{if(_0x7cd351[_0x1ee30f(0x22e)]===_0x1ee30f(0x22d)){const {probabilities:_0x3683b3}=_0x7cd351[_0x1ee30f(0x211)];if(_0x3683b3){_0x33c58c[_0x1ee30f(0x1e7)](_0x1ee30f(0x22b),{'val':JSON[_0x1ee30f(0x20e)](_0x3683b3),'ack':!![]});const _0x5df9f6=Object[_0x1ee30f(0x1f5)](_0x3683b3);if(_0x5df9f6[_0x1ee30f(0x248)]>0x0){const _0x35ada1=_0x5df9f6[0x0],_0x555cf2=_0x3683b3[_0x35ada1];_0x33c58c[_0x1ee30f(0x1e7)](_0x1ee30f(0x1ea),{'val':_0x35ada1,'ack':!![]}),_0x33c58c[_0x1ee30f(0x1e7)]('analysis.prediction.trackerConfidence',{'val':_0x555cf2,'ack':!![]});}}}else{if(_0x7cd351[_0x1ee30f(0x22e)]===_0x1ee30f(0x1fc)){const {patterns:_0x1522eb}=_0x7cd351[_0x1ee30f(0x211)];if(_0x1522eb&&_0x1522eb[_0x1ee30f(0x248)]>0x0)_0x33c58c[_0x1ee30f(0x1e7)](_0x1ee30f(0x244),{'val':JSON['stringify'](_0x1522eb),'ack':!![]});}}}}}}}}}}}}}}}}function startService(_0x1c595b,_0xffe303){const _0x37883a=a4_0x1bf704;let _0x1950c3=_0x37883a(0x1f9);if(fs[_0x37883a(0x21f)](_0xffe303))_0x1950c3=_0xffe303;try{const _0x5dc872=path[_0x37883a(0x1f3)](__dirname,'..',_0x37883a(0x1ef),_0x37883a(0x1e9));pythonProcess=spawn(_0x1950c3,[_0x5dc872]),pythonProcess[_0x37883a(0x215)]['on'](_0x37883a(0x23f),_0x353929=>{const _0x284164=_0x37883a,_0x21ff41=_0x353929[_0x284164(0x1ed)]()[_0x284164(0x218)]('\x0a');_0x21ff41[_0x284164(0x210)](_0x1b2690=>{const _0x4c95a0=_0x284164,_0x40b5c8=_0x1b2690['trim']();if(!_0x40b5c8)return;if(_0x40b5c8[_0x4c95a0(0x238)](_0x4c95a0(0x206)))_0x1c595b[_0x4c95a0(0x237)][_0x4c95a0(0x225)](_0x4c95a0(0x20f)+_0x40b5c8[_0x4c95a0(0x1f6)](0x5)[_0x4c95a0(0x1fe)]());else{if(_0x40b5c8[_0x4c95a0(0x238)](_0x4c95a0(0x240)))try{const _0x13b021=JSON[_0x4c95a0(0x20b)](_0x40b5c8[_0x4c95a0(0x1f6)](0x8)[_0x4c95a0(0x1fe)]());handleResult(_0x1c595b,_0x13b021);}catch(_0x1bac18){}}});}),pythonProcess['on'](_0x37883a(0x216),_0x290e8d=>{pythonProcess=null;}),_0x1c595b[_0x37883a(0x247)]=(_0x5f3ef9,_0x19ef22)=>send(_0x1c595b,_0x5f3ef9,_0x19ef22);}catch(_0x33a474){_0x1c595b[_0x37883a(0x237)][_0x37883a(0x221)](_0x37883a(0x202)+_0x33a474[_0x37883a(0x23d)]);}}function stopService(_0x2d8f86){const _0x4719bc=a4_0x1bf704;if(pythonProcess){try{pythonProcess[_0x4719bc(0x227)]();}catch(_0x3ea266){}pythonProcess=null;}}module[a4_0x1bf704(0x20c)]={'startService':startService,'stopService':stopService,'send':send};