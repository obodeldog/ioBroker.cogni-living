const a4_0xca14ab=a4_0x2163;(function(_0x3d33cf,_0x196935){const _0x593e41=a4_0x2163,_0x5e044e=_0x3d33cf();while(!![]){try{const _0x7fc629=parseInt(_0x593e41(0x11a))/0x1*(parseInt(_0x593e41(0x144))/0x2)+parseInt(_0x593e41(0x114))/0x3+-parseInt(_0x593e41(0x13c))/0x4*(parseInt(_0x593e41(0x12a))/0x5)+-parseInt(_0x593e41(0xf8))/0x6+parseInt(_0x593e41(0x11f))/0x7*(-parseInt(_0x593e41(0x135))/0x8)+-parseInt(_0x593e41(0x11e))/0x9*(parseInt(_0x593e41(0x13f))/0xa)+parseInt(_0x593e41(0x149))/0xb*(parseInt(_0x593e41(0x137))/0xc);if(_0x7fc629===_0x196935)break;else _0x5e044e['push'](_0x5e044e['shift']());}catch(_0x13cff3){_0x5e044e['push'](_0x5e044e['shift']());}}}(a4_0x38c1,0x417bb));const a4_0x544575=(function(){let _0x586f42=!![];return function(_0x1020ef,_0xa3bcbf){const _0x2c77bc=_0x586f42?function(){if(_0xa3bcbf){const _0x505f0a=_0xa3bcbf['apply'](_0x1020ef,arguments);return _0xa3bcbf=null,_0x505f0a;}}:function(){};return _0x586f42=![],_0x2c77bc;};}()),a4_0x18266c=a4_0x544575(this,function(){const _0x12dd76=a4_0x2163;return a4_0x18266c[_0x12dd76(0x10d)]()[_0x12dd76(0x100)](_0x12dd76(0x12e))[_0x12dd76(0x10d)]()['constructor'](a4_0x18266c)['search'](_0x12dd76(0x12e));});a4_0x18266c();'use strict';const {spawn}=require('child_process'),path=require(a4_0xca14ab(0x14d)),fs=require('fs'),setup=require(a4_0xca14ab(0xfa)),automation=require('./automation');let pythonProcess=null;function a4_0x2163(_0x12ed29,_0x2d4683){const _0x3c9798=a4_0x38c1();return a4_0x2163=function(_0x18266c,_0x544575){_0x18266c=_0x18266c-0xf7;let _0x38c1e5=_0x3c9798[_0x18266c];return _0x38c1e5;},a4_0x2163(_0x12ed29,_0x2d4683);}function a4_0x38c1(){const _0x417919=['setStateAsync','Unknown','success','analysis.training.status','Success:\x20','ENERGY_PREDICT_RESULT','1299612vrqCsj','message','write','analysis.energy.heatingScore','type','analysis.health.gaitSpeed','20XEjnnG','payload','analysis.security.currentThreshold','service.py','216639PozErR','2329551LaYTqz','analysis.health.lastCheck','python3','stringify','applyEnergySavings','log','COMFORT_RESULT','âš ï¸\x20SECURITY\x20ALARM:\x20','[PYTHON]\x20','data','val','5cqjczQ','Error\x20launching\x20Python:\x20','[RESULT]','analysis.alertReason','(((.+)+)+)+$','stdout','close','TRAINING_COMPLETE','PINN_PREDICT_RESULT','SECURITY_RESULT','split','8EosWoJ','toISOString','5568yonKmm','existsSync','threshold','ENERGY_OPTIMIZE_RESULT','forEach','673124wrazuW','trim','analysis.security.lastCheck','70eXaIoC','analysis.isAlert','getState','startsWith','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','49888hkuAwi','heating','stdin','reason','SIGNAL_RESULT','4664vLatHL','sendNotification','analysis.energy.insulationScore','analysis.health.isAnomaly','path','âœ…\x20HEALTH\x20TRAINED.','1146180LXVSBQ','parse','./setup','analysis.prediction.confidence','details','toFixed','analysis.security.lastScore','analysis.automation.detectedPatterns','search','analysis.prediction.nextRoom','substring','insulation','length','join','info','analysis.energy.mpcActive','is_anomaly','exports','debug','kill','GAIT_RESULT','toString'];a4_0x38c1=function(){return _0x417919;};return a4_0x38c1();}function send(_0x481084,_0x573f17,_0x36b719={}){const _0xd958b3=a4_0xca14ab;if(!pythonProcess||!pythonProcess[_0xd958b3(0x146)]['writable'])return;const _0x5325ce=JSON['stringify']({'command':_0x573f17,..._0x36b719});try{pythonProcess[_0xd958b3(0x146)][_0xd958b3(0x116)](_0x5325ce+'\x0a');}catch(_0x593d65){}}function handleResult(_0x548267,_0x5a830f){const _0x258fb5=a4_0xca14ab;if(_0x5a830f[_0x258fb5(0x118)]==='PONG')_0x548267[_0x258fb5(0x124)][_0x258fb5(0x10a)]('ðŸ\x20Python\x20Pong');else{if(_0x5a830f[_0x258fb5(0x118)]===_0x258fb5(0x133)){const {anomaly_score:_0x1e23de,is_anomaly:_0x176c15,threshold:_0x113b77,explanation:_0x1d4e6a}=_0x5a830f[_0x258fb5(0x11b)];_0x548267[_0x258fb5(0x10e)](_0x258fb5(0xfe),{'val':_0x1e23de,'ack':!![]}),_0x548267[_0x258fb5(0x10e)](_0x258fb5(0x13e),{'val':new Date()[_0x258fb5(0x136)](),'ack':!![]});if(_0x113b77)_0x548267['setStateAsync'](_0x258fb5(0x11c),{'val':_0x113b77,'ack':!![]});if(_0x176c15){let _0x2d71eb=_0x258fb5(0x143)+_0x1e23de[_0x258fb5(0xfd)](0x4)+')';if(_0x1d4e6a&&_0x1d4e6a!==_0x258fb5(0x10f))_0x2d71eb+='\x0aGrund:\x20'+_0x1d4e6a;_0x548267[_0x258fb5(0x10e)](_0x258fb5(0x140),{'val':!![],'ack':!![]}),_0x548267['setStateAsync'](_0x258fb5(0x12d),{'val':_0x2d71eb,'ack':!![]}),setup[_0x258fb5(0x14a)](_0x548267,_0x258fb5(0x126)+_0x2d71eb,![],!![]);}}else{if(_0x5a830f[_0x258fb5(0x118)]===_0x258fb5(0x131)){const _0x385fcb=_0x5a830f[_0x258fb5(0x11b)][_0x258fb5(0xfc)]||'',_0x4d0b0f=_0x5a830f[_0x258fb5(0x11b)][_0x258fb5(0x139)],_0x1b2e01=_0x5a830f['payload'][_0x258fb5(0x110)]?_0x258fb5(0x112)+new Date()['toLocaleTimeString']()+'\x20('+_0x385fcb+')':'Failed:\x20'+_0x5a830f[_0x258fb5(0x11b)][_0x258fb5(0x147)];_0x548267[_0x258fb5(0x10e)](_0x258fb5(0x111),{'val':_0x1b2e01,'ack':!![]});if(_0x5a830f['payload'][_0x258fb5(0x110)]&&_0x4d0b0f)_0x548267['setStateAsync'](_0x258fb5(0x11c),{'val':_0x4d0b0f,'ack':!![]});}else{if(_0x5a830f['type']==='ENERGY_TRAIN_RESULT'){if(_0x5a830f[_0x258fb5(0x11b)][_0x258fb5(0x110)])try{const _0x2a3dcd=JSON[_0x258fb5(0xf9)](_0x5a830f[_0x258fb5(0x11b)]['details']);if(_0x2a3dcd[_0x258fb5(0x103)])_0x548267['setStateAsync'](_0x258fb5(0x14b),{'val':JSON[_0x258fb5(0x122)](_0x2a3dcd[_0x258fb5(0x103)]),'ack':!![]});if(_0x2a3dcd[_0x258fb5(0x145)])_0x548267[_0x258fb5(0x10e)](_0x258fb5(0x117),{'val':JSON[_0x258fb5(0x122)](_0x2a3dcd[_0x258fb5(0x145)]),'ack':!![]});}catch(_0x31d052){}}else{if(_0x5a830f[_0x258fb5(0x118)]==='HEALTH_TRAIN_RESULT'){if(_0x5a830f[_0x258fb5(0x11b)][_0x258fb5(0x110)])_0x548267[_0x258fb5(0x124)][_0x258fb5(0x106)](_0x258fb5(0xf7));}else{if(_0x5a830f['type']==='HEALTH_RESULT')_0x548267[_0x258fb5(0x10e)](_0x258fb5(0x120),{'val':new Date()[_0x258fb5(0x136)](),'ack':!![]}),_0x548267[_0x258fb5(0x10e)](_0x258fb5(0x14c),{'val':_0x5a830f[_0x258fb5(0x11b)][_0x258fb5(0x108)],'ack':!![]});else{if(_0x5a830f[_0x258fb5(0x118)]===_0x258fb5(0x10c)){const {speed_trend:_0x9d1566}=_0x5a830f['payload'];if(_0x9d1566!==undefined)_0x548267[_0x258fb5(0x10e)](_0x258fb5(0x119),{'val':_0x9d1566,'ack':!![]});}else{if(_0x5a830f[_0x258fb5(0x118)]===_0x258fb5(0x113)){const {forecast:_0x3f9e77}=_0x5a830f[_0x258fb5(0x11b)];if(_0x3f9e77)_0x548267[_0x258fb5(0x10e)]('analysis.energy.forecast',{'val':JSON[_0x258fb5(0x122)](_0x3f9e77),'ack':!![]});}else{if(_0x5a830f['type']===_0x258fb5(0x132)){const {forecast:_0x857702}=_0x5a830f['payload'];if(_0x857702)_0x548267[_0x258fb5(0x10e)]('analysis.energy.pinnForecast',{'val':JSON['stringify'](_0x857702),'ack':!![]});}else{if(_0x5a830f[_0x258fb5(0x118)]===_0x258fb5(0x13a)){const {proposals:_0x2c8b88}=_0x5a830f[_0x258fb5(0x11b)];_0x548267[_0x258fb5(0x141)](_0x258fb5(0x107),(_0x38de08,_0x56349d)=>{const _0x1ccab3=_0x258fb5;_0x56349d&&_0x56349d[_0x1ccab3(0x129)]===!![]&&_0x2c8b88&&_0x2c8b88['length']>0x0&&automation[_0x1ccab3(0x123)](_0x548267,_0x2c8b88);});}else{if(_0x5a830f[_0x258fb5(0x118)]===_0x258fb5(0x148)){const {room:_0x540cbd,propagation:_0xa1a204}=_0x5a830f[_0x258fb5(0x11b)];let _0x32d079=_0x258fb5(0x10f),_0x26902d=0x0;if(_0xa1a204){const _0x47d471=Object['entries'](_0xa1a204);_0x47d471[_0x258fb5(0x104)]>0x0&&(_0x32d079=_0x47d471[0x0][0x0],_0x26902d=_0x47d471[0x0][0x1]);}_0x548267[_0x258fb5(0x10e)](_0x258fb5(0x101),{'val':_0x32d079,'ack':!![]}),_0x548267['setStateAsync'](_0x258fb5(0xfb),{'val':_0x26902d,'ack':!![]}),automation['handlePrediction'](_0x548267,_0x32d079,_0x26902d);}else{if(_0x5a830f[_0x258fb5(0x118)]===_0x258fb5(0x125)){const {patterns:_0x2bcb6c}=_0x5a830f[_0x258fb5(0x11b)];if(_0x2bcb6c&&_0x2bcb6c[_0x258fb5(0x104)]>0x0)_0x548267['setStateAsync'](_0x258fb5(0xff),{'val':JSON[_0x258fb5(0x122)](_0x2bcb6c),'ack':!![]});}}}}}}}}}}}}}function startService(_0x5870ba,_0x371092){const _0x33256b=a4_0xca14ab;let _0xaae1f8=_0x33256b(0x121);if(fs[_0x33256b(0x138)](_0x371092))_0xaae1f8=_0x371092;try{const _0xf26f9=path[_0x33256b(0x105)](__dirname,'..','python_service',_0x33256b(0x11d));pythonProcess=spawn(_0xaae1f8,[_0xf26f9]),pythonProcess[_0x33256b(0x12f)]['on'](_0x33256b(0x128),_0x2533a4=>{const _0x1e4b2c=_0x33256b,_0x504119=_0x2533a4[_0x1e4b2c(0x10d)]()[_0x1e4b2c(0x134)]('\x0a');_0x504119[_0x1e4b2c(0x13b)](_0x16e065=>{const _0x7e0e7=_0x1e4b2c,_0x383250=_0x16e065[_0x7e0e7(0x13d)]();if(!_0x383250)return;if(_0x383250[_0x7e0e7(0x142)]('[LOG]'))_0x5870ba[_0x7e0e7(0x124)][_0x7e0e7(0x10a)](_0x7e0e7(0x127)+_0x383250[_0x7e0e7(0x102)](0x5)[_0x7e0e7(0x13d)]());else{if(_0x383250['startsWith'](_0x7e0e7(0x12c)))try{const _0x2a0c84=JSON[_0x7e0e7(0xf9)](_0x383250[_0x7e0e7(0x102)](0x8)[_0x7e0e7(0x13d)]());handleResult(_0x5870ba,_0x2a0c84);}catch(_0x4c613d){}}});}),pythonProcess['on'](_0x33256b(0x130),_0x4320fc=>{pythonProcess=null;}),_0x5870ba['sendToPythonWrapper']=(_0x3b3999,_0x284dc2)=>send(_0x5870ba,_0x3b3999,_0x284dc2);}catch(_0x4b2901){_0x5870ba[_0x33256b(0x124)]['error'](_0x33256b(0x12b)+_0x4b2901[_0x33256b(0x115)]);}}function stopService(_0x399176){const _0x2f79a8=a4_0xca14ab;if(pythonProcess){try{pythonProcess[_0x2f79a8(0x10b)]();}catch(_0x50c3c3){}pythonProcess=null;}}module[a4_0xca14ab(0x109)]={'startService':startService,'stopService':stopService,'send':send};