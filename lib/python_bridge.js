const a4_0x500526=a4_0x3676;(function(_0x20a326,_0x26d130){const _0x5a6c9e=a4_0x3676,_0x2400a5=_0x20a326();while(!![]){try{const _0x44c8c0=parseInt(_0x5a6c9e(0x200))/0x1*(parseInt(_0x5a6c9e(0x202))/0x2)+-parseInt(_0x5a6c9e(0x1eb))/0x3*(parseInt(_0x5a6c9e(0x207))/0x4)+-parseInt(_0x5a6c9e(0x1d8))/0x5+-parseInt(_0x5a6c9e(0x1cf))/0x6*(parseInt(_0x5a6c9e(0x204))/0x7)+-parseInt(_0x5a6c9e(0x1f1))/0x8*(-parseInt(_0x5a6c9e(0x219))/0x9)+-parseInt(_0x5a6c9e(0x1fe))/0xa+-parseInt(_0x5a6c9e(0x1f5))/0xb*(-parseInt(_0x5a6c9e(0x1d9))/0xc);if(_0x44c8c0===_0x26d130)break;else _0x2400a5['push'](_0x2400a5['shift']());}catch(_0x4b14dc){_0x2400a5['push'](_0x2400a5['shift']());}}}(a4_0x3c34,0xe0b84));const a4_0x3e0244=(function(){let _0x14818b=!![];return function(_0x367bf5,_0x39ca8f){const _0x28565f=_0x14818b?function(){const _0xbb122a=a4_0x3676;if(_0x39ca8f){const _0x283d2c=_0x39ca8f[_0xbb122a(0x1de)](_0x367bf5,arguments);return _0x39ca8f=null,_0x283d2c;}}:function(){};return _0x14818b=![],_0x28565f;};}()),a4_0x79ac60=a4_0x3e0244(this,function(){const _0x34aa42=a4_0x3676;return a4_0x79ac60['toString']()[_0x34aa42(0x20e)]('(((.+)+)+)+$')[_0x34aa42(0x205)]()['constructor'](a4_0x79ac60)[_0x34aa42(0x20e)]('(((.+)+)+)+$');});function a4_0x3c34(){const _0x3971d7=['SIGNAL_RESULT','stdin','search','analysis.health.gaitSpeed','child_process','COMFORT_RESULT','GAIT_RESULT','exports','sendToPythonWrapper','log','writable','analysis.isAlert','applyEnergySavings','27027BcpYFC','./setup','Success:\x20','analysis.prediction.confidence','analysis.energy.forecast','ENERGY_OPTIMIZE_RESULT','analysis.health.lastCheck','setStateAsync','âš ï¸\x20SECURITY\x20ALARM:\x20','ðŸ\x20Python\x20Pong','ENERGY_TRAIN_RESULT','payload','trim','message','[LOG]','reason','13152krzMBY','parse','close','data','info','forEach','toISOString','PINN_PREDICT_RESULT','insulation','293645PeuyBP','20908068CQNamn','Failed:\x20','ENERGY_PREDICT_RESULT','PONG','substring','apply','\x0aGrund:\x20','analysis.security.lastScore','type','val','analysis.energy.mpcActive','join','[RESULT]','analysis.prediction.nextRoom','existsSync','SECURITY_RESULT','getState','analysis.training.status','156cuHnwU','Unknown','HEALTH_RESULT','analysis.energy.heatingScore','entries','length','2504daQsNv','./automation','details','analysis.energy.insulationScore','11FWWLCT','[PYTHON]\x20','handlePrediction','error','stringify','heating','service.py','debug','threshold','16791730fheEiU','analysis.alertReason','24LKsESS','write','113058vinWCb','sendNotification','973EmpGIh','toString','success','82764zIZeSZ','split','HEALTH_TRAIN_RESULT','analysis.security.currentThreshold','analysis.security.lastCheck'];a4_0x3c34=function(){return _0x3971d7;};return a4_0x3c34();}a4_0x79ac60();'use strict';const {spawn}=require(a4_0x500526(0x210)),path=require('path'),fs=require('fs'),setup=require(a4_0x500526(0x21a)),automation=require(a4_0x500526(0x1f2));let pythonProcess=null;function send(_0x28e3e2,_0x3ccd1b,_0x24f4b7={}){const _0x2f7d53=a4_0x500526;if(!pythonProcess||!pythonProcess[_0x2f7d53(0x20d)][_0x2f7d53(0x216)])return;const _0x35ac9e=JSON[_0x2f7d53(0x1f9)]({'command':_0x3ccd1b,..._0x24f4b7});try{pythonProcess['stdin'][_0x2f7d53(0x201)](_0x35ac9e+'\x0a');}catch(_0x2c40f5){}}function a4_0x3676(_0x4e65ae,_0x3a0e34){const _0x9e532f=a4_0x3c34();return a4_0x3676=function(_0x79ac60,_0x3e0244){_0x79ac60=_0x79ac60-0x1c2;let _0x3c3408=_0x9e532f[_0x79ac60];return _0x3c3408;},a4_0x3676(_0x4e65ae,_0x3a0e34);}function handleResult(_0x2bb083,_0x257c94){const _0x2cab27=a4_0x500526;if(_0x257c94['type']===_0x2cab27(0x1dc))_0x2bb083['log']['debug'](_0x2cab27(0x1c8));else{if(_0x257c94[_0x2cab27(0x1e1)]===_0x2cab27(0x1e8)){const {anomaly_score:_0x23cef3,is_anomaly:_0x4343c3,threshold:_0x2eea54,explanation:_0x3c9ad7}=_0x257c94['payload'];_0x2bb083[_0x2cab27(0x1c6)](_0x2cab27(0x1e0),{'val':_0x23cef3,'ack':!![]}),_0x2bb083[_0x2cab27(0x1c6)](_0x2cab27(0x20b),{'val':new Date()[_0x2cab27(0x1d5)](),'ack':!![]});if(_0x2eea54)_0x2bb083['setStateAsync'](_0x2cab27(0x20a),{'val':_0x2eea54,'ack':!![]});if(_0x4343c3){let _0x144115='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x23cef3['toFixed'](0x4)+')';if(_0x3c9ad7&&_0x3c9ad7!==_0x2cab27(0x1ec))_0x144115+=_0x2cab27(0x1df)+_0x3c9ad7;_0x2bb083[_0x2cab27(0x1c6)](_0x2cab27(0x217),{'val':!![],'ack':!![]}),_0x2bb083['setStateAsync'](_0x2cab27(0x1ff),{'val':_0x144115,'ack':!![]}),setup[_0x2cab27(0x203)](_0x2bb083,_0x2cab27(0x1c7)+_0x144115,![],!![]);}}else{if(_0x257c94[_0x2cab27(0x1e1)]==='TRAINING_COMPLETE'){const _0x20fff3=_0x257c94[_0x2cab27(0x1ca)]['details']||'',_0x4c9d4d=_0x257c94[_0x2cab27(0x1ca)][_0x2cab27(0x1fd)],_0x169f67=_0x257c94['payload'][_0x2cab27(0x206)]?_0x2cab27(0x21b)+new Date()['toLocaleTimeString']()+'\x20('+_0x20fff3+')':_0x2cab27(0x1da)+_0x257c94[_0x2cab27(0x1ca)][_0x2cab27(0x1ce)];_0x2bb083[_0x2cab27(0x1c6)](_0x2cab27(0x1ea),{'val':_0x169f67,'ack':!![]});if(_0x257c94[_0x2cab27(0x1ca)][_0x2cab27(0x206)]&&_0x4c9d4d)_0x2bb083[_0x2cab27(0x1c6)]('analysis.security.currentThreshold',{'val':_0x4c9d4d,'ack':!![]});}else{if(_0x257c94[_0x2cab27(0x1e1)]===_0x2cab27(0x1c9)){if(_0x257c94['payload'][_0x2cab27(0x206)])try{const _0x205b3c=JSON[_0x2cab27(0x1d0)](_0x257c94[_0x2cab27(0x1ca)][_0x2cab27(0x1f3)]);if(_0x205b3c[_0x2cab27(0x1d7)])_0x2bb083[_0x2cab27(0x1c6)](_0x2cab27(0x1f4),{'val':JSON[_0x2cab27(0x1f9)](_0x205b3c[_0x2cab27(0x1d7)]),'ack':!![]});if(_0x205b3c[_0x2cab27(0x1fa)])_0x2bb083['setStateAsync'](_0x2cab27(0x1ee),{'val':JSON['stringify'](_0x205b3c['heating']),'ack':!![]});}catch(_0x21b9cd){}}else{if(_0x257c94[_0x2cab27(0x1e1)]===_0x2cab27(0x209)){if(_0x257c94[_0x2cab27(0x1ca)]['success'])_0x2bb083[_0x2cab27(0x215)][_0x2cab27(0x1d3)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x257c94[_0x2cab27(0x1e1)]===_0x2cab27(0x1ed))_0x2bb083[_0x2cab27(0x1c6)](_0x2cab27(0x1c5),{'val':new Date()[_0x2cab27(0x1d5)](),'ack':!![]}),_0x2bb083[_0x2cab27(0x1c6)]('analysis.health.isAnomaly',{'val':_0x257c94[_0x2cab27(0x1ca)]['is_anomaly'],'ack':!![]});else{if(_0x257c94['type']===_0x2cab27(0x212)){const {speed_trend:_0x8ecd78}=_0x257c94['payload'];if(_0x8ecd78!==undefined)_0x2bb083[_0x2cab27(0x1c6)](_0x2cab27(0x20f),{'val':_0x8ecd78,'ack':!![]});}else{if(_0x257c94[_0x2cab27(0x1e1)]===_0x2cab27(0x1db)){const {forecast:_0xb3aef6}=_0x257c94['payload'];if(_0xb3aef6)_0x2bb083[_0x2cab27(0x1c6)](_0x2cab27(0x1c3),{'val':JSON['stringify'](_0xb3aef6),'ack':!![]});}else{if(_0x257c94[_0x2cab27(0x1e1)]===_0x2cab27(0x1d6)){const {forecast:_0x4f45b5}=_0x257c94[_0x2cab27(0x1ca)];if(_0x4f45b5)_0x2bb083[_0x2cab27(0x1c6)]('analysis.energy.pinnForecast',{'val':JSON[_0x2cab27(0x1f9)](_0x4f45b5),'ack':!![]});}else{if(_0x257c94['type']===_0x2cab27(0x1c4)){const {proposals:_0x3724e7}=_0x257c94[_0x2cab27(0x1ca)];_0x2bb083[_0x2cab27(0x1e9)](_0x2cab27(0x1e3),(_0x296e41,_0x4619a8)=>{const _0x1a5537=_0x2cab27;_0x4619a8&&_0x4619a8[_0x1a5537(0x1e2)]===!![]&&_0x3724e7&&_0x3724e7[_0x1a5537(0x1f0)]>0x0&&automation[_0x1a5537(0x218)](_0x2bb083,_0x3724e7);});}else{if(_0x257c94[_0x2cab27(0x1e1)]===_0x2cab27(0x20c)){const {room:_0x2d8efe,propagation:_0x561f7f}=_0x257c94[_0x2cab27(0x1ca)];let _0x23f459=_0x2cab27(0x1ec),_0x4690ec=0x0;if(_0x561f7f){const _0xb1f38a=Object[_0x2cab27(0x1ef)](_0x561f7f);_0xb1f38a[_0x2cab27(0x1f0)]>0x0&&(_0x23f459=_0xb1f38a[0x0][0x0],_0x4690ec=_0xb1f38a[0x0][0x1]);}_0x2bb083['setStateAsync'](_0x2cab27(0x1e6),{'val':_0x23f459,'ack':!![]}),_0x2bb083[_0x2cab27(0x1c6)](_0x2cab27(0x1c2),{'val':_0x4690ec,'ack':!![]}),automation[_0x2cab27(0x1f7)](_0x2bb083,_0x23f459,_0x4690ec);}else{if(_0x257c94['type']===_0x2cab27(0x211)){const {patterns:_0x2ddb60}=_0x257c94[_0x2cab27(0x1ca)];if(_0x2ddb60&&_0x2ddb60[_0x2cab27(0x1f0)]>0x0)_0x2bb083[_0x2cab27(0x1c6)]('analysis.automation.detectedPatterns',{'val':JSON[_0x2cab27(0x1f9)](_0x2ddb60),'ack':!![]});}}}}}}}}}}}}}function startService(_0xe6d757,_0x13c4e2){const _0x12fd3f=a4_0x500526;let _0x53bfa5='python3';if(fs[_0x12fd3f(0x1e7)](_0x13c4e2))_0x53bfa5=_0x13c4e2;try{const _0xcda5bf=path[_0x12fd3f(0x1e4)](__dirname,'..','python_service',_0x12fd3f(0x1fb));pythonProcess=spawn(_0x53bfa5,[_0xcda5bf]),pythonProcess['stdout']['on'](_0x12fd3f(0x1d2),_0x4d2dfa=>{const _0x589cda=_0x12fd3f,_0x29ed27=_0x4d2dfa[_0x589cda(0x205)]()[_0x589cda(0x208)]('\x0a');_0x29ed27[_0x589cda(0x1d4)](_0x2c68fa=>{const _0x24fc65=_0x589cda,_0x16cb62=_0x2c68fa[_0x24fc65(0x1cb)]();if(!_0x16cb62)return;if(_0x16cb62['startsWith'](_0x24fc65(0x1cd)))_0xe6d757[_0x24fc65(0x215)][_0x24fc65(0x1fc)](_0x24fc65(0x1f6)+_0x16cb62[_0x24fc65(0x1dd)](0x5)[_0x24fc65(0x1cb)]());else{if(_0x16cb62['startsWith'](_0x24fc65(0x1e5)))try{const _0x543d99=JSON[_0x24fc65(0x1d0)](_0x16cb62[_0x24fc65(0x1dd)](0x8)[_0x24fc65(0x1cb)]());handleResult(_0xe6d757,_0x543d99);}catch(_0x2d8598){}}});}),pythonProcess['on'](_0x12fd3f(0x1d1),_0x3d8a05=>{pythonProcess=null;}),_0xe6d757[_0x12fd3f(0x214)]=(_0x56d2e8,_0x1048d5)=>send(_0xe6d757,_0x56d2e8,_0x1048d5);}catch(_0x615364){_0xe6d757[_0x12fd3f(0x215)][_0x12fd3f(0x1f8)]('Error\x20launching\x20Python:\x20'+_0x615364[_0x12fd3f(0x1cc)]);}}function stopService(_0x4b5780){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x24925c){}pythonProcess=null;}}module[a4_0x500526(0x213)]={'startService':startService,'stopService':stopService,'send':send};