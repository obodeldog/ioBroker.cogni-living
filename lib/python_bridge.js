const a4_0x5dfcea=a4_0x12cc;(function(_0x295d9a,_0x2de7b7){const _0x3b6e25=a4_0x12cc,_0x283d51=_0x295d9a();while(!![]){try{const _0x528381=parseInt(_0x3b6e25(0x174))/0x1*(-parseInt(_0x3b6e25(0x198))/0x2)+-parseInt(_0x3b6e25(0x17b))/0x3*(-parseInt(_0x3b6e25(0x18d))/0x4)+parseInt(_0x3b6e25(0x1c8))/0x5*(parseInt(_0x3b6e25(0x1c3))/0x6)+parseInt(_0x3b6e25(0x1ca))/0x7+-parseInt(_0x3b6e25(0x1cb))/0x8*(parseInt(_0x3b6e25(0x1d2))/0x9)+-parseInt(_0x3b6e25(0x1b7))/0xa+-parseInt(_0x3b6e25(0x180))/0xb*(-parseInt(_0x3b6e25(0x194))/0xc);if(_0x528381===_0x2de7b7)break;else _0x283d51['push'](_0x283d51['shift']());}catch(_0x3c84e6){_0x283d51['push'](_0x283d51['shift']());}}}(a4_0x1112,0xa6f5f));function a4_0x1112(){const _0x1a132c=['analysis.isAlert','analysis.security.lastScore','sendToPythonWrapper','heating','analysis.automation.patternDetected','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','search','child_process','492YAaqeJ','analysis.health.isAnomaly','ðŸ\x20Python\x20Pong','\x0aGrund:\x20','Failed:\x20','analysis.health.trendValue','Error\x20launching\x20Python:\x20','864684cIlOnS','sendNotification','analysis.alertReason','ðŸ\x20Python\x20confirmed\x20new\x20topology.','137454WNpypW','reason','debug','constructor','python_service','message','ENERGY_TRAIN_RESULT','PONG','analysis.energy.heatingScore','existsSync','path','payload','log','setStateAsync','change_percent','split','analysis.security.lastCheck','ANOMALY','parse','\x20new\x20patterns.','\x20->\x20','python3','GAIT_RESULT','close','Success:\x20','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','analysis.automation.description','length','TRAINING_COMPLETE','ðŸ”®\x20Prediction:\x20From\x20','service.py','6301000ZLLcSt','stdout','Regel\x20erkannt:\x20','toString','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','toFixed','HEALTH_TRAIN_RESULT','apply','âš ï¸\x20SECURITY\x20ALARM:\x20','threshold','substring','join','6VONjcG','confidence','stdin','\x20->\x20Likely\x20','type','3756085ZPaHHk','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','1093330hmdFEw','8qQiMMS','analysis.automation.detectedPatterns','HEALTH_RESULT','SECURITY_RESULT','startsWith','success','SIGNAL_RESULT','9479286NEZKcx','info','trim','(((.+)+)+)+$','TOPOLOGY_RESULT','ENERGY_PREDICT_RESULT','4CBAIGe','analysis.health.gaitSpeed','details','is_anomaly','error','analysis.security.currentThreshold','toLocaleTimeString','26493AnGBrW','insulation','forEach','write','analysis.prediction.confidence','99KokQmL','stringify','rule','[LOG]','âœ…\x20HEALTH\x20TRAINED.'];a4_0x1112=function(){return _0x1a132c;};return a4_0x1112();}const a4_0x244db4=(function(){let _0x317afd=!![];return function(_0x410ea8,_0x13930c){const _0x2040d1=_0x317afd?function(){const _0x10c0da=a4_0x12cc;if(_0x13930c){const _0x2363a0=_0x13930c[_0x10c0da(0x1be)](_0x410ea8,arguments);return _0x13930c=null,_0x2363a0;}}:function(){};return _0x317afd=![],_0x2040d1;};}()),a4_0x23fae6=a4_0x244db4(this,function(){const _0x297839=a4_0x12cc;return a4_0x23fae6['toString']()['search'](_0x297839(0x171))[_0x297839(0x1ba)]()[_0x297839(0x19b)](a4_0x23fae6)[_0x297839(0x18b)]('(((.+)+)+)+$');});a4_0x23fae6();'use strict';const {spawn}=require(a4_0x5dfcea(0x18c)),path=require(a4_0x5dfcea(0x1a2)),fs=require('fs'),setup=require('./setup'),automation=require('./automation');let pythonProcess=null;function send(_0x6249f7,_0x4d58c8,_0x586da4={}){const _0x4acf90=a4_0x5dfcea;if(!pythonProcess||!pythonProcess[_0x4acf90(0x1c5)]['writable'])return;const _0x371ce2=JSON[_0x4acf90(0x181)]({'command':_0x4d58c8,..._0x586da4});try{pythonProcess[_0x4acf90(0x1c5)][_0x4acf90(0x17e)](_0x371ce2+'\x0a');}catch(_0x374e44){}}function handleResult(_0x3f1849,_0x2f9c59){const _0x69a25b=a4_0x5dfcea;if(_0x2f9c59[_0x69a25b(0x1c7)]===_0x69a25b(0x19f))_0x3f1849[_0x69a25b(0x1a4)][_0x69a25b(0x19a)](_0x69a25b(0x18f));else{if(_0x2f9c59[_0x69a25b(0x1c7)]===_0x69a25b(0x1ce)){const {anomaly_score:_0x5bfd90,is_anomaly:_0x2cf5a1,threshold:_0x5bee5d,explanation:_0x423210}=_0x2f9c59['payload'];_0x3f1849[_0x69a25b(0x1a4)][_0x69a25b(0x1d3)](_0x69a25b(0x18a)+_0x5bfd90[_0x69a25b(0x1bc)](0x5)+_0x69a25b(0x1ac)+(_0x2cf5a1?_0x69a25b(0x1a9):'OK')),_0x3f1849[_0x69a25b(0x1a5)](_0x69a25b(0x186),{'val':_0x5bfd90,'ack':!![]}),_0x3f1849['setStateAsync'](_0x69a25b(0x1a8),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x5bee5d)_0x3f1849[_0x69a25b(0x1a5)]('analysis.security.currentThreshold',{'val':_0x5bee5d,'ack':!![]});if(_0x2cf5a1){let _0x3dc7c7=_0x69a25b(0x1bb)+_0x5bfd90[_0x69a25b(0x1bc)](0x4)+')';if(_0x423210&&_0x423210!=='Unknown')_0x3dc7c7+=_0x69a25b(0x190)+_0x423210;_0x3f1849['setStateAsync'](_0x69a25b(0x185),{'val':!![],'ack':!![]}),_0x3f1849['setStateAsync'](_0x69a25b(0x196),{'val':_0x3dc7c7,'ack':!![]}),setup[_0x69a25b(0x195)](_0x3f1849,_0x69a25b(0x1bf)+_0x3dc7c7,![],!![]);}}else{if(_0x2f9c59[_0x69a25b(0x1c7)]===_0x69a25b(0x1b4)){const _0x5e815b=_0x2f9c59[_0x69a25b(0x1a3)][_0x69a25b(0x176)]||'',_0x5af729=_0x2f9c59[_0x69a25b(0x1a3)][_0x69a25b(0x1c0)],_0x1d89dd=_0x2f9c59[_0x69a25b(0x1a3)][_0x69a25b(0x1d0)]?_0x69a25b(0x1b0)+new Date()[_0x69a25b(0x17a)]()+'\x20('+_0x5e815b+')':_0x69a25b(0x191)+_0x2f9c59[_0x69a25b(0x1a3)][_0x69a25b(0x199)];_0x3f1849[_0x69a25b(0x1a5)]('analysis.training.status',{'val':_0x1d89dd,'ack':!![]});if(_0x2f9c59['payload'][_0x69a25b(0x1d0)]&&_0x5af729)_0x3f1849[_0x69a25b(0x1a5)](_0x69a25b(0x179),{'val':_0x5af729,'ack':!![]});}else{if(_0x2f9c59[_0x69a25b(0x1c7)]==='COMFORT_RESULT'){const {patterns:_0x225182}=_0x2f9c59[_0x69a25b(0x1a3)];if(_0x225182&&_0x225182[_0x69a25b(0x1b3)]>0x0){_0x3f1849[_0x69a25b(0x1a4)][_0x69a25b(0x1d3)](_0x69a25b(0x1b1)+_0x225182[_0x69a25b(0x1b3)]+_0x69a25b(0x1ab)),_0x3f1849['setStateAsync'](_0x69a25b(0x1cc),{'val':JSON['stringify'](_0x225182),'ack':!![]});const _0x484e07=_0x225182[0x0],_0x55e369=_0x69a25b(0x1b9)+_0x484e07[_0x69a25b(0x182)]+'\x20('+(_0x484e07[_0x69a25b(0x1c4)]*0x64)['toFixed'](0x0)+'%)';_0x3f1849[_0x69a25b(0x1a5)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x3f1849[_0x69a25b(0x1a5)](_0x69a25b(0x1b2),{'val':_0x55e369,'ack':!![]});}else _0x3f1849[_0x69a25b(0x1a4)][_0x69a25b(0x1d3)](_0x69a25b(0x1c9)),_0x3f1849['setStateAsync'](_0x69a25b(0x189),{'val':![],'ack':!![]}),_0x3f1849['setStateAsync'](_0x69a25b(0x1cc),{'val':'[]','ack':!![]});}else{if(_0x2f9c59[_0x69a25b(0x1c7)]===_0x69a25b(0x19e)){if(_0x2f9c59[_0x69a25b(0x1a3)][_0x69a25b(0x1d0)])try{const _0x167efd=JSON[_0x69a25b(0x1aa)](_0x2f9c59[_0x69a25b(0x1a3)][_0x69a25b(0x176)]);if(_0x167efd['insulation'])_0x3f1849[_0x69a25b(0x1a5)]('analysis.energy.insulationScore',{'val':JSON['stringify'](_0x167efd[_0x69a25b(0x17c)]),'ack':!![]});if(_0x167efd[_0x69a25b(0x188)])_0x3f1849['setStateAsync'](_0x69a25b(0x1a0),{'val':JSON[_0x69a25b(0x181)](_0x167efd[_0x69a25b(0x188)]),'ack':!![]});}catch(_0x339183){}}else{if(_0x2f9c59['type']===_0x69a25b(0x1bd)){if(_0x2f9c59[_0x69a25b(0x1a3)]['success'])_0x3f1849[_0x69a25b(0x1a4)][_0x69a25b(0x1d3)](_0x69a25b(0x184));}else{if(_0x2f9c59[_0x69a25b(0x1c7)]===_0x69a25b(0x1cd))_0x3f1849[_0x69a25b(0x1a5)]('analysis.health.lastCheck',{'val':new Date()['toISOString'](),'ack':!![]}),_0x3f1849['setStateAsync'](_0x69a25b(0x18e),{'val':_0x2f9c59['payload'][_0x69a25b(0x177)],'ack':!![]});else{if(_0x2f9c59[_0x69a25b(0x1c7)]==='TREND_RESULT')_0x3f1849['setStateAsync']('analysis.health.trendDiagnosis',{'val':_0x2f9c59[_0x69a25b(0x1a3)]['diagnosis'],'ack':!![]}),_0x3f1849[_0x69a25b(0x1a5)](_0x69a25b(0x192),{'val':_0x2f9c59['payload'][_0x69a25b(0x1a6)],'ack':!![]});else{if(_0x2f9c59[_0x69a25b(0x1c7)]===_0x69a25b(0x1ae)){const {speed_trend:_0x229a65}=_0x2f9c59[_0x69a25b(0x1a3)];if(_0x229a65!==undefined)_0x3f1849['setStateAsync'](_0x69a25b(0x175),{'val':_0x229a65,'ack':!![]});}else{if(_0x2f9c59[_0x69a25b(0x1c7)]===_0x69a25b(0x173)){const {forecast:_0x4d6b2f}=_0x2f9c59[_0x69a25b(0x1a3)];if(_0x4d6b2f)_0x3f1849[_0x69a25b(0x1a5)]('analysis.energy.forecast',{'val':JSON[_0x69a25b(0x181)](_0x4d6b2f),'ack':!![]});}else{if(_0x2f9c59[_0x69a25b(0x1c7)]===_0x69a25b(0x172)){const {data:_0x332466}=_0x2f9c59['payload'];_0x332466&&(_0x3f1849['log'][_0x69a25b(0x1d3)]('ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.'),_0x3f1849[_0x69a25b(0x1a5)]('analysis.security.topologyMatrix',{'val':JSON[_0x69a25b(0x181)](_0x332466),'ack':!![]}));}else{if(_0x2f9c59['type']==='TOPOLOGY_ACK')_0x3f1849['log'][_0x69a25b(0x19a)](_0x69a25b(0x197));else{if(_0x2f9c59['type']===_0x69a25b(0x1d1)){const {room:_0x56db8f,propagation:_0x2fdaf6}=_0x2f9c59[_0x69a25b(0x1a3)];let _0x3ead5c='Unknown',_0x44926f=0x0;if(_0x2fdaf6){const _0x48cd20=Object['entries'](_0x2fdaf6);_0x48cd20[_0x69a25b(0x1b3)]>0x0&&(_0x3ead5c=_0x48cd20[0x0][0x0],_0x44926f=_0x48cd20[0x0][0x1]);}_0x3f1849[_0x69a25b(0x1a5)]('analysis.prediction.nextRoom',{'val':_0x3ead5c,'ack':!![]}),_0x3f1849[_0x69a25b(0x1a5)](_0x69a25b(0x17f),{'val':_0x44926f,'ack':!![]}),_0x44926f>0.4&&_0x3f1849[_0x69a25b(0x1a4)][_0x69a25b(0x19a)](_0x69a25b(0x1b5)+_0x56db8f+_0x69a25b(0x1c6)+_0x3ead5c+'\x20('+(_0x44926f*0x64)[_0x69a25b(0x1bc)](0x0)+'%)'),automation['handlePrediction'](_0x3f1849,_0x3ead5c,_0x44926f);}}}}}}}}}}}}}}function startService(_0x1f69a8,_0x5f09fa){const _0x3b8fec=a4_0x5dfcea;let _0x89af85=_0x3b8fec(0x1ad);if(fs[_0x3b8fec(0x1a1)](_0x5f09fa))_0x89af85=_0x5f09fa;try{const _0x1a7173=path[_0x3b8fec(0x1c2)](__dirname,'..',_0x3b8fec(0x19c),_0x3b8fec(0x1b6));pythonProcess=spawn(_0x89af85,[_0x1a7173]),pythonProcess[_0x3b8fec(0x1b8)]['on']('data',_0xe14876=>{const _0x5dbf5c=_0x3b8fec,_0x7ba5b8=_0xe14876[_0x5dbf5c(0x1ba)]()[_0x5dbf5c(0x1a7)]('\x0a');_0x7ba5b8[_0x5dbf5c(0x17d)](_0x5730f5=>{const _0x4ebab1=_0x5dbf5c,_0x5cf118=_0x5730f5['trim']();if(!_0x5cf118)return;if(_0x5cf118[_0x4ebab1(0x1cf)](_0x4ebab1(0x183)))_0x1f69a8[_0x4ebab1(0x1a4)][_0x4ebab1(0x19a)]('[PYTHON]\x20'+_0x5cf118['substring'](0x5)['trim']());else{if(_0x5cf118[_0x4ebab1(0x1cf)]('[RESULT]'))try{const _0x128c2b=JSON[_0x4ebab1(0x1aa)](_0x5cf118[_0x4ebab1(0x1c1)](0x8)[_0x4ebab1(0x170)]());handleResult(_0x1f69a8,_0x128c2b);}catch(_0x508e59){}}});}),pythonProcess['on'](_0x3b8fec(0x1af),_0x249691=>{pythonProcess=null;}),_0x1f69a8[_0x3b8fec(0x187)]=(_0x4fe84d,_0x158aba)=>send(_0x1f69a8,_0x4fe84d,_0x158aba);}catch(_0x4d6d49){_0x1f69a8[_0x3b8fec(0x1a4)][_0x3b8fec(0x178)](_0x3b8fec(0x193)+_0x4d6d49[_0x3b8fec(0x19d)]);}}function stopService(_0x30ee3d){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x3dbc3b){}pythonProcess=null;}}function a4_0x12cc(_0x16669d,_0x27bcee){const _0x47a3dd=a4_0x1112();return a4_0x12cc=function(_0x23fae6,_0x244db4){_0x23fae6=_0x23fae6-0x170;let _0x111264=_0x47a3dd[_0x23fae6];return _0x111264;},a4_0x12cc(_0x16669d,_0x27bcee);}module['exports']={'startService':startService,'stopService':stopService,'send':send};