const a4_0x552a5a=a4_0x42a1;(function(_0x1ec13b,_0x53dd97){const _0x39f3c8=a4_0x42a1,_0x1899e7=_0x1ec13b();while(!![]){try{const _0x2453a1=-parseInt(_0x39f3c8(0x92))/0x1+parseInt(_0x39f3c8(0xb4))/0x2*(-parseInt(_0x39f3c8(0xc4))/0x3)+parseInt(_0x39f3c8(0xc5))/0x4+parseInt(_0x39f3c8(0xd0))/0x5*(parseInt(_0x39f3c8(0xbe))/0x6)+-parseInt(_0x39f3c8(0xc1))/0x7*(parseInt(_0x39f3c8(0xa7))/0x8)+parseInt(_0x39f3c8(0x7c))/0x9+parseInt(_0x39f3c8(0xbc))/0xa*(parseInt(_0x39f3c8(0xb3))/0xb);if(_0x2453a1===_0x53dd97)break;else _0x1899e7['push'](_0x1899e7['shift']());}catch(_0xaf2335){_0x1899e7['push'](_0x1899e7['shift']());}}}(a4_0x5545,0x8cd59));const a4_0xd1be8d=(function(){let _0x17e2ac=!![];return function(_0x15ec73,_0x382422){const _0xec144d=_0x17e2ac?function(){const _0x42420d=a4_0x42a1;if(_0x382422){const _0x5891b8=_0x382422[_0x42420d(0xb8)](_0x15ec73,arguments);return _0x382422=null,_0x5891b8;}}:function(){};return _0x17e2ac=![],_0xec144d;};}()),a4_0x5d87e2=a4_0xd1be8d(this,function(){const _0x478558=a4_0x42a1;return a4_0x5d87e2[_0x478558(0x8e)]()[_0x478558(0x8f)](_0x478558(0x7e))['toString']()[_0x478558(0x95)](a4_0x5d87e2)[_0x478558(0x8f)](_0x478558(0x7e));});a4_0x5d87e2();'use strict';const {spawn}=require(a4_0x552a5a(0x81)),path=require(a4_0x552a5a(0xa9)),fs=require('fs'),setup=require(a4_0x552a5a(0xb6)),automation=require(a4_0x552a5a(0x85));let pythonProcess=null;function send(_0x571b1c,_0x817b25,_0x355598={}){const _0x56ce60=a4_0x552a5a;if(!pythonProcess||!pythonProcess['stdin'][_0x56ce60(0x9c)])return;const _0x1a219f=JSON['stringify']({'command':_0x817b25,..._0x355598});try{pythonProcess['stdin'][_0x56ce60(0xc6)](_0x1a219f+'\x0a');}catch(_0x5cb018){}}function handleResult(_0x370d4b,_0x15f9eb){const _0x440343=a4_0x552a5a;if(_0x15f9eb[_0x440343(0xa2)]===_0x440343(0x76))_0x370d4b[_0x440343(0xcd)][_0x440343(0xb9)](_0x440343(0x75));else{if(_0x15f9eb['type']===_0x440343(0x8c)){const {anomaly_score:_0x55f488,is_anomaly:_0x49a7c2,threshold:_0x1a6519,explanation:_0x1b6266}=_0x15f9eb['payload'];_0x370d4b['log']['info'](_0x440343(0x70)+_0x55f488[_0x440343(0x78)](0x5)+_0x440343(0x87)+(_0x49a7c2?_0x440343(0xba):'OK')),_0x370d4b[_0x440343(0x91)](_0x440343(0x82),{'val':_0x55f488,'ack':!![]}),_0x370d4b[_0x440343(0x91)]('analysis.security.lastCheck',{'val':new Date()[_0x440343(0xd3)](),'ack':!![]});if(_0x1a6519)_0x370d4b[_0x440343(0x91)](_0x440343(0xc0),{'val':_0x1a6519,'ack':!![]});if(_0x49a7c2){let _0x31161b=_0x440343(0x6f)+_0x55f488[_0x440343(0x78)](0x4)+')';if(_0x1b6266&&_0x1b6266!==_0x440343(0xc9))_0x31161b+=_0x440343(0x93)+_0x1b6266;_0x370d4b[_0x440343(0x91)](_0x440343(0x7a),{'val':!![],'ack':!![]}),_0x370d4b[_0x440343(0x91)]('analysis.alertReason',{'val':_0x31161b,'ack':!![]}),setup[_0x440343(0xcc)](_0x370d4b,'‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20'+_0x31161b,![],!![]);}}else{if(_0x15f9eb[_0x440343(0xa2)]===_0x440343(0x8a)){const _0x30ec2b=_0x15f9eb[_0x440343(0xaa)]['details']||'',_0x2919d9=_0x15f9eb[_0x440343(0xaa)][_0x440343(0xa0)],_0x346929=_0x15f9eb[_0x440343(0xaa)]['success']?_0x440343(0x86)+new Date()['toLocaleTimeString']()+'\x20('+_0x30ec2b+')':_0x440343(0xca)+_0x15f9eb[_0x440343(0xaa)][_0x440343(0xc2)];_0x370d4b[_0x440343(0x91)]('analysis.training.status',{'val':_0x346929,'ack':!![]});if(_0x15f9eb[_0x440343(0xaa)]['success']&&_0x2919d9)_0x370d4b[_0x440343(0x91)](_0x440343(0xc0),{'val':_0x2919d9,'ack':!![]});}else{if(_0x15f9eb[_0x440343(0xa2)]===_0x440343(0x7d)){const {patterns:_0x17bb42}=_0x15f9eb[_0x440343(0xaa)];if(_0x17bb42&&_0x17bb42['length']>0x0){_0x370d4b['log'][_0x440343(0x90)](_0x440343(0x88)+_0x17bb42['length']+_0x440343(0x94)),_0x370d4b['setStateAsync'](_0x440343(0x80),{'val':JSON[_0x440343(0x77)](_0x17bb42),'ack':!![]});const _0x2d7d20=_0x17bb42[0x0],_0x4615f4='Regel\x20erkannt:\x20'+_0x2d7d20[_0x440343(0xa1)]+'\x20('+(_0x2d7d20[_0x440343(0x9d)]*0x64)[_0x440343(0x78)](0x0)+'%)';_0x370d4b['setStateAsync'](_0x440343(0x71),{'val':!![],'ack':!![]}),_0x370d4b[_0x440343(0x91)](_0x440343(0x9f),{'val':_0x4615f4,'ack':!![]});}else _0x370d4b[_0x440343(0xcd)][_0x440343(0x90)](_0x440343(0xbd)),_0x370d4b[_0x440343(0x91)](_0x440343(0x71),{'val':![],'ack':!![]}),_0x370d4b[_0x440343(0x91)](_0x440343(0x80),{'val':'[]','ack':!![]});}else{if(_0x15f9eb[_0x440343(0xa2)]===_0x440343(0xc8)){if(_0x15f9eb[_0x440343(0xaa)][_0x440343(0xb5)])try{const _0x43f860=JSON[_0x440343(0xcf)](_0x15f9eb[_0x440343(0xaa)][_0x440343(0xc3)]);if(_0x43f860[_0x440343(0x72)])_0x370d4b[_0x440343(0x91)]('analysis.energy.insulationScore',{'val':JSON[_0x440343(0x77)](_0x43f860[_0x440343(0x72)]),'ack':!![]});if(_0x43f860[_0x440343(0xce)])_0x370d4b[_0x440343(0x91)](_0x440343(0xa4),{'val':JSON[_0x440343(0x77)](_0x43f860['heating']),'ack':!![]});}catch(_0xdda0e){}}else{if(_0x15f9eb['type']===_0x440343(0xc7)){if(_0x15f9eb[_0x440343(0xaa)][_0x440343(0xb5)])_0x370d4b[_0x440343(0xcd)]['info'](_0x440343(0x9e));}else{if(_0x15f9eb[_0x440343(0xa2)]===_0x440343(0xcb))_0x370d4b[_0x440343(0x91)](_0x440343(0xab),{'val':new Date()[_0x440343(0xd3)](),'ack':!![]}),_0x370d4b[_0x440343(0x91)](_0x440343(0xa3),{'val':_0x15f9eb[_0x440343(0xaa)][_0x440343(0x73)],'ack':!![]});else{if(_0x15f9eb[_0x440343(0xa2)]===_0x440343(0xd1))_0x370d4b[_0x440343(0x91)]('analysis.health.trendDiagnosis',{'val':_0x15f9eb[_0x440343(0xaa)][_0x440343(0xb0)],'ack':!![]}),_0x370d4b[_0x440343(0x91)]('analysis.health.trendValue',{'val':_0x15f9eb['payload'][_0x440343(0xd2)],'ack':!![]});else{if(_0x15f9eb['type']==='GAIT_RESULT'){const {speed_trend:_0xd71ec2}=_0x15f9eb[_0x440343(0xaa)];if(_0xd71ec2!==undefined)_0x370d4b['setStateAsync'](_0x440343(0x9a),{'val':_0xd71ec2,'ack':!![]});}else{if(_0x15f9eb[_0x440343(0xa2)]===_0x440343(0x79)){const {forecast:_0x57387c}=_0x15f9eb[_0x440343(0xaa)];if(_0x57387c)_0x370d4b[_0x440343(0x91)](_0x440343(0xad),{'val':JSON['stringify'](_0x57387c),'ack':!![]});}else{if(_0x15f9eb[_0x440343(0xa2)]===_0x440343(0x9b)){const {data:_0x3b2b43}=_0x15f9eb[_0x440343(0xaa)];_0x3b2b43&&(_0x370d4b[_0x440343(0xcd)]['info'](_0x440343(0x96)),_0x370d4b['setStateAsync'](_0x440343(0x7f),{'val':JSON[_0x440343(0x77)](_0x3b2b43),'ack':!![]}));}else{if(_0x15f9eb[_0x440343(0xa2)]===_0x440343(0x7b))_0x370d4b['log'][_0x440343(0xb9)]('üêç\x20Python\x20confirmed\x20new\x20topology.');else{if(_0x15f9eb[_0x440343(0xa2)]===_0x440343(0xb1)){const {room:_0xb5ba8f,propagation:_0x26acff}=_0x15f9eb['payload'];let _0x22626a=_0x440343(0xc9),_0x517fba=0x0;if(_0x26acff){const _0x25bee4=Object[_0x440343(0xaf)](_0x26acff);_0x25bee4['length']>0x0&&(_0x22626a=_0x25bee4[0x0][0x0],_0x517fba=_0x25bee4[0x0][0x1]);}_0x370d4b[_0x440343(0x91)]('analysis.prediction.nextRoom',{'val':_0x22626a,'ack':!![]}),_0x370d4b[_0x440343(0x91)](_0x440343(0xa6),{'val':_0x517fba,'ack':!![]}),_0x517fba>0.4&&_0x370d4b[_0x440343(0xcd)][_0x440343(0xb9)](_0x440343(0xa8)+_0xb5ba8f+_0x440343(0x8d)+_0x22626a+'\x20('+(_0x517fba*0x64)[_0x440343(0x78)](0x0)+'%)'),automation['handlePrediction'](_0x370d4b,_0x22626a,_0x517fba);}}}}}}}}}}}}}}function startService(_0x4b2a26,_0x26e1d6){const _0x526e2a=a4_0x552a5a;let _0x2bbf69=_0x526e2a(0x99);if(fs[_0x526e2a(0x98)](_0x26e1d6))_0x2bbf69=_0x26e1d6;try{const _0x4dc21e=path[_0x526e2a(0xa5)](__dirname,'..',_0x526e2a(0xae),_0x526e2a(0xac));pythonProcess=spawn(_0x2bbf69,[_0x4dc21e]),pythonProcess[_0x526e2a(0x74)]['on']('data',_0x3e8333=>{const _0x5de5c4=_0x526e2a,_0x1806f5=_0x3e8333['toString']()[_0x5de5c4(0xbf)]('\x0a');_0x1806f5['forEach'](_0x52ecc7=>{const _0x2f94b6=_0x5de5c4,_0xf5e952=_0x52ecc7[_0x2f94b6(0x8b)]();if(!_0xf5e952)return;if(_0xf5e952[_0x2f94b6(0x97)]('[LOG]'))_0x4b2a26[_0x2f94b6(0xcd)][_0x2f94b6(0xb9)](_0x2f94b6(0x89)+_0xf5e952[_0x2f94b6(0xbb)](0x5)[_0x2f94b6(0x8b)]());else{if(_0xf5e952[_0x2f94b6(0x97)]('[RESULT]'))try{const _0x516c1f=JSON[_0x2f94b6(0xcf)](_0xf5e952[_0x2f94b6(0xbb)](0x8)[_0x2f94b6(0x8b)]());handleResult(_0x4b2a26,_0x516c1f);}catch(_0x25703b){}}});}),pythonProcess['on']('close',_0x2c86ae=>{pythonProcess=null;}),_0x4b2a26[_0x526e2a(0xb7)]=(_0x392948,_0x127393)=>send(_0x4b2a26,_0x392948,_0x127393);}catch(_0x43af09){_0x4b2a26[_0x526e2a(0xcd)]['error']('Error\x20launching\x20Python:\x20'+_0x43af09[_0x526e2a(0xb2)]);}}function a4_0x42a1(_0x5c34c7,_0x3334df){const _0x4c1a37=a4_0x5545();return a4_0x42a1=function(_0x5d87e2,_0xd1be8d){_0x5d87e2=_0x5d87e2-0x6f;let _0x5545e8=_0x4c1a37[_0x5d87e2];return _0x5545e8;},a4_0x42a1(_0x5c34c7,_0x3334df);}function stopService(_0x2ef163){const _0x540687=a4_0x552a5a;if(pythonProcess){try{pythonProcess[_0x540687(0x83)]();}catch(_0x449c98){}pythonProcess=null;}}module[a4_0x552a5a(0x84)]={'startService':startService,'stopService':stopService,'send':send};function a4_0x5545(){const _0x3b55e4=['ENERGY_TRAIN_RESULT','Unknown','Failed:\x20','HEALTH_RESULT','sendNotification','log','heating','parse','602165aDkPLo','TREND_RESULT','change_percent','toISOString','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','analysis.automation.patternDetected','insulation','is_anomaly','stdout','üêç\x20Python\x20Pong','PONG','stringify','toFixed','ENERGY_PREDICT_RESULT','analysis.isAlert','TOPOLOGY_ACK','6412113lGQARE','COMFORT_RESULT','(((.+)+)+)+$','analysis.security.topologyMatrix','analysis.automation.detectedPatterns','child_process','analysis.security.lastScore','kill','exports','./automation','Success:\x20','\x20->\x20','üõãÔ∏è\x20BUTLER:\x20Found\x20','[PYTHON]\x20','TRAINING_COMPLETE','trim','SECURITY_RESULT','\x20->\x20Likely\x20','toString','search','info','setStateAsync','444130fVQAHx','\x0aGrund:\x20','\x20new\x20patterns.','constructor','üï∏Ô∏è\x20Topology\x20Map\x20updated\x20by\x20Python.','startsWith','existsSync','python3','analysis.health.gaitSpeed','TOPOLOGY_RESULT','writable','confidence','‚úÖ\x20HEALTH\x20TRAINED.','analysis.automation.description','threshold','rule','type','analysis.health.isAnomaly','analysis.energy.heatingScore','join','analysis.prediction.confidence','7383544bJwDAx','üîÆ\x20Prediction:\x20From\x20','path','payload','analysis.health.lastCheck','service.py','analysis.energy.forecast','python_service','entries','diagnosis','SIGNAL_RESULT','message','88WMNgrb','4674Eczsev','success','./setup','sendToPythonWrapper','apply','debug','ANOMALY','substring','1297760aRUyJe','üõãÔ∏è\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','6jEvSaS','split','analysis.security.currentThreshold','7BQUTQv','reason','details','1293LzmVmq','4320316uaYZuv','write','HEALTH_TRAIN_RESULT'];a4_0x5545=function(){return _0x3b55e4;};return a4_0x5545();}