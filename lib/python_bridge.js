const a4_0x90d196=a4_0x3219;(function(_0x3e3e02,_0x37cb80){const _0x2455b6=a4_0x3219,_0x756afa=_0x3e3e02();while(!![]){try{const _0x2028bf=-parseInt(_0x2455b6(0xe3))/0x1*(-parseInt(_0x2455b6(0x113))/0x2)+-parseInt(_0x2455b6(0xe2))/0x3+parseInt(_0x2455b6(0x11f))/0x4+-parseInt(_0x2455b6(0x108))/0x5+-parseInt(_0x2455b6(0x100))/0x6*(-parseInt(_0x2455b6(0xd6))/0x7)+-parseInt(_0x2455b6(0xd2))/0x8*(-parseInt(_0x2455b6(0xf3))/0x9)+parseInt(_0x2455b6(0xf6))/0xa*(-parseInt(_0x2455b6(0x10e))/0xb);if(_0x2028bf===_0x37cb80)break;else _0x756afa['push'](_0x756afa['shift']());}catch(_0x17429b){_0x756afa['push'](_0x756afa['shift']());}}}(a4_0x6006,0x8383a));const a4_0x38b7c1=(function(){let _0x59cec2=!![];return function(_0x20eddc,_0x3863d6){const _0xdc1b46=_0x59cec2?function(){const _0x364853=a4_0x3219;if(_0x3863d6){const _0x8d710a=_0x3863d6[_0x364853(0xdb)](_0x20eddc,arguments);return _0x3863d6=null,_0x8d710a;}}:function(){};return _0x59cec2=![],_0xdc1b46;};}()),a4_0x3f2d1e=a4_0x38b7c1(this,function(){const _0x13ffe1=a4_0x3219;return a4_0x3f2d1e[_0x13ffe1(0xe6)]()[_0x13ffe1(0x117)](_0x13ffe1(0x107))[_0x13ffe1(0xe6)]()[_0x13ffe1(0xf5)](a4_0x3f2d1e)[_0x13ffe1(0x117)](_0x13ffe1(0x107));});a4_0x3f2d1e();'use strict';function a4_0x3219(_0x403e7e,_0x285a25){const _0x4426a1=a4_0x6006();return a4_0x3219=function(_0x3f2d1e,_0x38b7c1){_0x3f2d1e=_0x3f2d1e-0xd1;let _0x6006c0=_0x4426a1[_0x3f2d1e];return _0x6006c0;},a4_0x3219(_0x403e7e,_0x285a25);}function a4_0x6006(){const _0x423084=['length','analysis.energy.warmupSources','18BikeOc','threshold','parse','analysis.automation.detectedPatterns','sendToPythonWrapper','analysis.security.lastScore','reason','(((.+)+)+)+$','4375930MwJVXl','./setup','[PYTHON]\x20','Failed:\x20','toLocaleTimeString','path','11cWrIMu','substring','./automation','Error\x20launching\x20Python:\x20','existsSync','314nlaPcj','analysis.prediction.trackerState','info','log','search','âš ï¸\x20SECURITY\x20ALARM:\x20','writable','success','GAIT_RESULT','analysis.energy.forecast','error','analysis.health.gaitSpeed','1636124BvCgxF','stdout','Unknown','analysis.training.status','PONG','python3','\x0aGrund:\x20','insulation','heating','startsWith','python_service','payload','stringify','analysis.energy.ventilationAlerts','toISOString','analysis.security.lastCheck','data','setStateAsync','exports','4480xlaHqf','analysis.energy.mpcActive','TRACKER_RESULT','analysis.security.currentThreshold','703801EeExyO','analysis.energy.warmupTimes','keys','getState','TRAINING_COMPLETE','apply','forEach','PINN_PREDICT_RESULT','ðŸ\x20Python\x20Pong','debug','VENTILATION_ALERT','[LOG]','390954KMKWSU','4959jrIUaD','toFixed','close','toString','ENERGY_PREDICT_RESULT','join','analysis.energy.insulationScore','analysis.energy.heatingScore','details','ENERGY_OPTIMIZE_RESULT','SECURITY_RESULT','service.py','analysis.health.isAnomaly','trim','analysis.prediction.trackerTopRoom','val','8838phFEPi','applyEnergySavings','constructor','4949570DFvsyS','analysis.prediction.trackerConfidence','type','HEALTH_TRAIN_RESULT','split','stdin','HEALTH_RESULT','ENERGY_TRAIN_RESULT'];a4_0x6006=function(){return _0x423084;};return a4_0x6006();}const {spawn}=require('child_process'),path=require(a4_0x90d196(0x10d)),fs=require('fs'),setup=require(a4_0x90d196(0x109)),automation=require(a4_0x90d196(0x110));let pythonProcess=null;function send(_0x515ca1,_0x336e87,_0x673404={}){const _0x408ed6=a4_0x90d196;if(!pythonProcess||!pythonProcess[_0x408ed6(0xfb)][_0x408ed6(0x119)])return;const _0x5e1b57=JSON[_0x408ed6(0x12b)]({'command':_0x336e87,..._0x673404});try{pythonProcess['stdin']['write'](_0x5e1b57+'\x0a');}catch(_0x5bd623){}}function handleResult(_0x23b2f6,_0x3ea4e5){const _0x13af4f=a4_0x90d196;if(_0x3ea4e5[_0x13af4f(0xf8)]===_0x13af4f(0x123))_0x23b2f6[_0x13af4f(0x116)][_0x13af4f(0xdf)](_0x13af4f(0xde));else{if(_0x3ea4e5['type']===_0x13af4f(0xed)){const {anomaly_score:_0xfadee,is_anomaly:_0xc5dc44,threshold:_0x182493,explanation:_0x31b364}=_0x3ea4e5[_0x13af4f(0x12a)];_0x23b2f6['setStateAsync'](_0x13af4f(0x105),{'val':_0xfadee,'ack':!![]}),_0x23b2f6[_0x13af4f(0x130)](_0x13af4f(0x12e),{'val':new Date()[_0x13af4f(0x12d)](),'ack':!![]});if(_0x182493)_0x23b2f6[_0x13af4f(0x130)](_0x13af4f(0xd5),{'val':_0x182493,'ack':!![]});if(_0xc5dc44){let _0x581041='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0xfadee[_0x13af4f(0xe4)](0x4)+')';if(_0x31b364&&_0x31b364!==_0x13af4f(0x121))_0x581041+=_0x13af4f(0x125)+_0x31b364;_0x23b2f6[_0x13af4f(0x130)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x23b2f6[_0x13af4f(0x130)]('analysis.alertReason',{'val':_0x581041,'ack':!![]}),setup['sendNotification'](_0x23b2f6,_0x13af4f(0x118)+_0x581041,![],!![]);}}else{if(_0x3ea4e5['type']===_0x13af4f(0xda)){const _0x338ae5=_0x3ea4e5[_0x13af4f(0x12a)][_0x13af4f(0xeb)]||'',_0x43ec13=_0x3ea4e5[_0x13af4f(0x12a)][_0x13af4f(0x101)],_0xdf6278=_0x3ea4e5[_0x13af4f(0x12a)][_0x13af4f(0x11a)]?'Success:\x20'+new Date()[_0x13af4f(0x10c)]()+'\x20('+_0x338ae5+')':_0x13af4f(0x10b)+_0x3ea4e5['payload'][_0x13af4f(0x106)];_0x23b2f6['setStateAsync'](_0x13af4f(0x122),{'val':_0xdf6278,'ack':!![]});if(_0x3ea4e5[_0x13af4f(0x12a)][_0x13af4f(0x11a)]&&_0x43ec13)_0x23b2f6[_0x13af4f(0x130)](_0x13af4f(0xd5),{'val':_0x43ec13,'ack':!![]});}else{if(_0x3ea4e5[_0x13af4f(0xf8)]===_0x13af4f(0xfd)){if(_0x3ea4e5[_0x13af4f(0x12a)][_0x13af4f(0x11a)])try{const _0x49904b=JSON[_0x13af4f(0x102)](_0x3ea4e5[_0x13af4f(0x12a)][_0x13af4f(0xeb)]);if(_0x49904b['insulation'])_0x23b2f6[_0x13af4f(0x130)](_0x13af4f(0xe9),{'val':JSON[_0x13af4f(0x12b)](_0x49904b[_0x13af4f(0x126)]),'ack':!![]});if(_0x49904b['heating'])_0x23b2f6[_0x13af4f(0x130)](_0x13af4f(0xea),{'val':JSON['stringify'](_0x49904b[_0x13af4f(0x127)]),'ack':!![]});}catch(_0x3b8063){}}else{if(_0x3ea4e5[_0x13af4f(0xf8)]===_0x13af4f(0xf9)){if(_0x3ea4e5['payload'][_0x13af4f(0x11a)])_0x23b2f6[_0x13af4f(0x116)][_0x13af4f(0x115)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x3ea4e5[_0x13af4f(0xf8)]===_0x13af4f(0xfc))_0x23b2f6[_0x13af4f(0x130)]('analysis.health.lastCheck',{'val':new Date()[_0x13af4f(0x12d)](),'ack':!![]}),_0x23b2f6['setStateAsync'](_0x13af4f(0xef),{'val':_0x3ea4e5['payload']['is_anomaly'],'ack':!![]});else{if(_0x3ea4e5['type']===_0x13af4f(0x11b)){const {speed_trend:_0x19aeb4}=_0x3ea4e5[_0x13af4f(0x12a)];if(_0x19aeb4!==undefined)_0x23b2f6[_0x13af4f(0x130)](_0x13af4f(0x11e),{'val':_0x19aeb4,'ack':!![]});}else{if(_0x3ea4e5[_0x13af4f(0xf8)]===_0x13af4f(0xe7)){const {forecast:_0x1f17c7}=_0x3ea4e5[_0x13af4f(0x12a)];if(_0x1f17c7)_0x23b2f6[_0x13af4f(0x130)](_0x13af4f(0x11c),{'val':JSON[_0x13af4f(0x12b)](_0x1f17c7),'ack':!![]});}else{if(_0x3ea4e5[_0x13af4f(0xf8)]==='WARMUP_RESULT'){const {times:_0xfc836d,sources:_0x1d3e44,details:_0x483918}=_0x3ea4e5['payload'];if(_0xfc836d)_0x23b2f6[_0x13af4f(0x130)](_0x13af4f(0xd7),{'val':JSON[_0x13af4f(0x12b)](_0xfc836d),'ack':!![]});if(_0x1d3e44)_0x23b2f6[_0x13af4f(0x130)](_0x13af4f(0xff),{'val':JSON['stringify'](_0x1d3e44),'ack':!![]});if(_0x483918)_0x23b2f6[_0x13af4f(0x130)]('analysis.energy.warmupDetails',{'val':JSON[_0x13af4f(0x12b)](_0x483918),'ack':!![]});}else{if(_0x3ea4e5[_0x13af4f(0xf8)]===_0x13af4f(0xdd)){const {forecast:_0x34a37f}=_0x3ea4e5['payload'];if(_0x34a37f)_0x23b2f6[_0x13af4f(0x130)]('analysis.energy.pinnForecast',{'val':JSON['stringify'](_0x34a37f),'ack':!![]});}else{if(_0x3ea4e5[_0x13af4f(0xf8)]===_0x13af4f(0xe0)){const {alerts:_0x45bfab}=_0x3ea4e5[_0x13af4f(0x12a)];if(_0x45bfab)_0x23b2f6[_0x13af4f(0x130)](_0x13af4f(0x12c),{'val':JSON[_0x13af4f(0x12b)](_0x45bfab),'ack':!![]});}else{if(_0x3ea4e5[_0x13af4f(0xf8)]===_0x13af4f(0xec)){const {proposals:_0x42bc11}=_0x3ea4e5[_0x13af4f(0x12a)];_0x23b2f6[_0x13af4f(0xd9)](_0x13af4f(0xd3),(_0x38a795,_0x50c3aa)=>{const _0x436e9b=_0x13af4f;_0x50c3aa&&_0x50c3aa[_0x436e9b(0xf2)]===!![]&&_0x42bc11&&_0x42bc11[_0x436e9b(0xfe)]>0x0&&automation[_0x436e9b(0xf4)](_0x23b2f6,_0x42bc11);});}else{if(_0x3ea4e5[_0x13af4f(0xf8)]==='SIGNAL_RESULT'){const {room:_0x553648,propagation:_0x435014}=_0x3ea4e5['payload'];let _0x2d2d7b='Unknown',_0x2cc2bc=0x0;if(_0x435014){const _0x42900f=Object['entries'](_0x435014);_0x42900f[_0x13af4f(0xfe)]>0x0&&(_0x2d2d7b=_0x42900f[0x0][0x0],_0x2cc2bc=_0x42900f[0x0][0x1]);}_0x23b2f6[_0x13af4f(0x130)]('analysis.prediction.nextRoom',{'val':_0x2d2d7b,'ack':!![]}),_0x23b2f6[_0x13af4f(0x130)]('analysis.prediction.confidence',{'val':_0x2cc2bc,'ack':!![]}),automation['handlePrediction'](_0x23b2f6,_0x2d2d7b,_0x2cc2bc);}else{if(_0x3ea4e5[_0x13af4f(0xf8)]===_0x13af4f(0xd4)){const {probabilities:_0x7034}=_0x3ea4e5[_0x13af4f(0x12a)];if(_0x7034){_0x23b2f6['setStateAsync'](_0x13af4f(0x114),{'val':JSON[_0x13af4f(0x12b)](_0x7034),'ack':!![]});const _0x107651=Object[_0x13af4f(0xd8)](_0x7034);if(_0x107651[_0x13af4f(0xfe)]>0x0){const _0xabd52=_0x107651[0x0],_0xbf364e=_0x7034[_0xabd52];_0x23b2f6['setStateAsync'](_0x13af4f(0xf1),{'val':_0xabd52,'ack':!![]}),_0x23b2f6[_0x13af4f(0x130)](_0x13af4f(0xf7),{'val':_0xbf364e,'ack':!![]});}}}else{if(_0x3ea4e5[_0x13af4f(0xf8)]==='COMFORT_RESULT'){const {patterns:_0x3cbfc1}=_0x3ea4e5[_0x13af4f(0x12a)];if(_0x3cbfc1&&_0x3cbfc1['length']>0x0)_0x23b2f6[_0x13af4f(0x130)](_0x13af4f(0x103),{'val':JSON[_0x13af4f(0x12b)](_0x3cbfc1),'ack':!![]});}}}}}}}}}}}}}}}}function startService(_0x4a080a,_0x12b6b0){const _0x4e41a1=a4_0x90d196;let _0x32295d=_0x4e41a1(0x124);if(fs[_0x4e41a1(0x112)](_0x12b6b0))_0x32295d=_0x12b6b0;try{const _0x20b729=path[_0x4e41a1(0xe8)](__dirname,'..',_0x4e41a1(0x129),_0x4e41a1(0xee));pythonProcess=spawn(_0x32295d,[_0x20b729]),pythonProcess[_0x4e41a1(0x120)]['on'](_0x4e41a1(0x12f),_0x56a91b=>{const _0x399b04=_0x4e41a1,_0x2cf6c5=_0x56a91b[_0x399b04(0xe6)]()[_0x399b04(0xfa)]('\x0a');_0x2cf6c5[_0x399b04(0xdc)](_0xed51f2=>{const _0x1c558a=_0x399b04,_0x27805a=_0xed51f2[_0x1c558a(0xf0)]();if(!_0x27805a)return;if(_0x27805a[_0x1c558a(0x128)](_0x1c558a(0xe1)))_0x4a080a[_0x1c558a(0x116)][_0x1c558a(0xdf)](_0x1c558a(0x10a)+_0x27805a[_0x1c558a(0x10f)](0x5)[_0x1c558a(0xf0)]());else{if(_0x27805a[_0x1c558a(0x128)]('[RESULT]'))try{const _0x3df347=JSON['parse'](_0x27805a[_0x1c558a(0x10f)](0x8)['trim']());handleResult(_0x4a080a,_0x3df347);}catch(_0x2b906b){}}});}),pythonProcess['on'](_0x4e41a1(0xe5),_0x5354e3=>{pythonProcess=null;}),_0x4a080a[_0x4e41a1(0x104)]=(_0x381a85,_0x43f543)=>send(_0x4a080a,_0x381a85,_0x43f543);}catch(_0x25e0ce){_0x4a080a[_0x4e41a1(0x116)][_0x4e41a1(0x11d)](_0x4e41a1(0x111)+_0x25e0ce['message']);}}function stopService(_0x49f385){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x2011e5){}pythonProcess=null;}}module[a4_0x90d196(0xd1)]={'startService':startService,'stopService':stopService,'send':send};