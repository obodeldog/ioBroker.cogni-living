const a3_0x448f97=a3_0x6f04;(function(_0x4f9bcb,_0x41b553){const _0x114920=a3_0x6f04,_0x2ce049=_0x4f9bcb();while(!![]){try{const _0x282224=-parseInt(_0x114920(0x18e))/0x1+parseInt(_0x114920(0x1a8))/0x2*(-parseInt(_0x114920(0x161))/0x3)+parseInt(_0x114920(0x19a))/0x4+parseInt(_0x114920(0x19c))/0x5+-parseInt(_0x114920(0x193))/0x6*(-parseInt(_0x114920(0x154))/0x7)+-parseInt(_0x114920(0x1ab))/0x8+parseInt(_0x114920(0x153))/0x9*(parseInt(_0x114920(0x170))/0xa);if(_0x282224===_0x41b553)break;else _0x2ce049['push'](_0x2ce049['shift']());}catch(_0x66149e){_0x2ce049['push'](_0x2ce049['shift']());}}}(a3_0x5752,0x63be0));const a3_0x234533=(function(){let _0x1e777e=!![];return function(_0x5de9e3,_0xcee0cd){const _0x53497c=_0x1e777e?function(){if(_0xcee0cd){const _0x4bba78=_0xcee0cd['apply'](_0x5de9e3,arguments);return _0xcee0cd=null,_0x4bba78;}}:function(){};return _0x1e777e=![],_0x53497c;};}()),a3_0x16195f=a3_0x234533(this,function(){const _0x9ff8b8=a3_0x6f04;return a3_0x16195f[_0x9ff8b8(0x182)]()[_0x9ff8b8(0x1a6)](_0x9ff8b8(0x17e))[_0x9ff8b8(0x182)]()['constructor'](a3_0x16195f)[_0x9ff8b8(0x1a6)](_0x9ff8b8(0x17e));});a3_0x16195f();'use strict';const {spawn}=require(a3_0x448f97(0x155)),path=require(a3_0x448f97(0x1ad)),fs=require('fs'),setup=require(a3_0x448f97(0x185)),automation=require(a3_0x448f97(0x184));let pythonProcess=null;function a3_0x5752(){const _0x36bec9=['analysis.energy.insulationScore','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','1497534LChQzw','TREND_RESULT','\x20->\x20Likely\x20','kill','handlePrediction','analysis.isAlert','success','analysis.health.lastCheck','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','reason','HEALTH_TRAIN_RESULT','ðŸ\x20Python\x20confirmed\x20new\x20topology.','âš ï¸\x20SECURITY\x20ALARM:\x20','debug','toLocaleTimeString','10qEkSxe','analysis.security.lastCheck','existsSync','analysis.security.currentThreshold','insulation','Unknown','trim','heating','python_service','data','ENERGY_TRAIN_RESULT','type','analysis.prediction.confidence','ðŸ\x20Python\x20Pong','(((.+)+)+)+$','ANOMALY','SECURITY_RESULT','payload','toString','close','./automation','./setup','split','length','stdin','message','join','[PYTHON]\x20','COMFORT_RESULT','info','349267FKKUHw','toISOString','write','\x0aGrund:\x20','analysis.automation.detectedPatterns','6GelYSd','analysis.health.trendValue','TRAINING_COMPLETE','\x20new\x20patterns.','analysis.alertReason','details','analysis.prediction.nextRoom','573076uOeqUz','log','2787635azVftr','stringify','confidence','analysis.automation.patternDetected','python3','ENERGY_PREDICT_RESULT','sendToPythonWrapper','threshold','service.py','analysis.security.topologyMatrix','search','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','2xGwIQY','Success:\x20','Error\x20launching\x20Python:\x20','2413376hOexzd','toFixed','path','HEALTH_RESULT','PONG','setStateAsync','Failed:\x20','change_percent','forEach','SIGNAL_RESULT','ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.','diagnosis','4610367UboOBP','2419214XUWYaV','child_process','parse','Regel\x20erkannt:\x20','GAIT_RESULT','analysis.health.isAnomaly','entries','is_anomaly','analysis.health.trendDiagnosis','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','[RESULT]'];a3_0x5752=function(){return _0x36bec9;};return a3_0x5752();}function send(_0x373e75,_0x5e4950,_0x507098={}){const _0x383aec=a3_0x448f97;if(!pythonProcess||!pythonProcess[_0x383aec(0x188)]['writable'])return;const _0x5c6c83=JSON[_0x383aec(0x19d)]({'command':_0x5e4950,..._0x507098});try{pythonProcess[_0x383aec(0x188)][_0x383aec(0x190)](_0x5c6c83+'\x0a');}catch(_0xb63434){}}function handleResult(_0x148a05,_0x795940){const _0x3c6107=a3_0x448f97;if(_0x795940[_0x3c6107(0x17b)]===_0x3c6107(0x1af))_0x148a05['log'][_0x3c6107(0x16e)](_0x3c6107(0x17d));else{if(_0x795940[_0x3c6107(0x17b)]===_0x3c6107(0x180)){const {anomaly_score:_0x4fcdfd,is_anomaly:_0x16873c,threshold:_0x2ce65d,explanation:_0x1a8f38}=_0x795940[_0x3c6107(0x181)];_0x148a05[_0x3c6107(0x19b)][_0x3c6107(0x18d)](_0x3c6107(0x1a7)+_0x4fcdfd[_0x3c6107(0x1ac)](0x5)+'\x20->\x20'+(_0x16873c?_0x3c6107(0x17f):'OK')),_0x148a05['setStateAsync']('analysis.security.lastScore',{'val':_0x4fcdfd,'ack':!![]}),_0x148a05['setStateAsync'](_0x3c6107(0x171),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x2ce65d)_0x148a05[_0x3c6107(0x1b0)](_0x3c6107(0x173),{'val':_0x2ce65d,'ack':!![]});if(_0x16873c){let _0x34e30d=_0x3c6107(0x160)+_0x4fcdfd[_0x3c6107(0x1ac)](0x4)+')';if(_0x1a8f38&&_0x1a8f38!==_0x3c6107(0x175))_0x34e30d+=_0x3c6107(0x191)+_0x1a8f38;_0x148a05[_0x3c6107(0x1b0)](_0x3c6107(0x166),{'val':!![],'ack':!![]}),_0x148a05[_0x3c6107(0x1b0)](_0x3c6107(0x197),{'val':_0x34e30d,'ack':!![]}),setup['sendNotification'](_0x148a05,_0x3c6107(0x16d)+_0x34e30d,![],!![]);}}else{if(_0x795940[_0x3c6107(0x17b)]===_0x3c6107(0x195)){const _0x2ade71=_0x795940['payload'][_0x3c6107(0x198)]||'',_0x4eb239=_0x795940['payload'][_0x3c6107(0x1a3)],_0x441f40=_0x795940['payload'][_0x3c6107(0x167)]?_0x3c6107(0x1a9)+new Date()[_0x3c6107(0x16f)]()+'\x20('+_0x2ade71+')':_0x3c6107(0x1b1)+_0x795940[_0x3c6107(0x181)][_0x3c6107(0x16a)];_0x148a05[_0x3c6107(0x1b0)]('analysis.training.status',{'val':_0x441f40,'ack':!![]});if(_0x795940['payload']['success']&&_0x4eb239)_0x148a05[_0x3c6107(0x1b0)]('analysis.security.currentThreshold',{'val':_0x4eb239,'ack':!![]});}else{if(_0x795940['type']===_0x3c6107(0x18c)){const {patterns:_0x42ec59}=_0x795940['payload'];if(_0x42ec59&&_0x42ec59[_0x3c6107(0x187)]>0x0){_0x148a05['log'][_0x3c6107(0x18d)](_0x3c6107(0x169)+_0x42ec59[_0x3c6107(0x187)]+_0x3c6107(0x196)),_0x148a05[_0x3c6107(0x1b0)](_0x3c6107(0x192),{'val':JSON[_0x3c6107(0x19d)](_0x42ec59),'ack':!![]});const _0x1162ee=_0x42ec59[0x0],_0x54f344=_0x3c6107(0x157)+_0x1162ee['rule']+'\x20('+(_0x1162ee[_0x3c6107(0x19e)]*0x64)['toFixed'](0x0)+'%)';_0x148a05['setStateAsync'](_0x3c6107(0x19f),{'val':!![],'ack':!![]}),_0x148a05[_0x3c6107(0x1b0)]('analysis.automation.description',{'val':_0x54f344,'ack':!![]});}else _0x148a05[_0x3c6107(0x19b)][_0x3c6107(0x18d)](_0x3c6107(0x15d)),_0x148a05[_0x3c6107(0x1b0)](_0x3c6107(0x19f),{'val':![],'ack':!![]}),_0x148a05[_0x3c6107(0x1b0)](_0x3c6107(0x192),{'val':'[]','ack':!![]});}else{if(_0x795940[_0x3c6107(0x17b)]===_0x3c6107(0x17a)){if(_0x795940[_0x3c6107(0x181)][_0x3c6107(0x167)])try{const _0x2db536=JSON[_0x3c6107(0x156)](_0x795940[_0x3c6107(0x181)][_0x3c6107(0x198)]);if(_0x2db536[_0x3c6107(0x174)])_0x148a05['setStateAsync'](_0x3c6107(0x15f),{'val':JSON[_0x3c6107(0x19d)](_0x2db536['insulation']),'ack':!![]});if(_0x2db536[_0x3c6107(0x177)])_0x148a05[_0x3c6107(0x1b0)]('analysis.energy.heatingScore',{'val':JSON[_0x3c6107(0x19d)](_0x2db536['heating']),'ack':!![]});}catch(_0x47d22f){}}else{if(_0x795940['type']===_0x3c6107(0x16b)){if(_0x795940[_0x3c6107(0x181)][_0x3c6107(0x167)])_0x148a05[_0x3c6107(0x19b)][_0x3c6107(0x18d)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x795940[_0x3c6107(0x17b)]===_0x3c6107(0x1ae))_0x148a05[_0x3c6107(0x1b0)](_0x3c6107(0x168),{'val':new Date()[_0x3c6107(0x18f)](),'ack':!![]}),_0x148a05[_0x3c6107(0x1b0)](_0x3c6107(0x159),{'val':_0x795940[_0x3c6107(0x181)][_0x3c6107(0x15b)],'ack':!![]});else{if(_0x795940[_0x3c6107(0x17b)]===_0x3c6107(0x162))_0x148a05[_0x3c6107(0x1b0)](_0x3c6107(0x15c),{'val':_0x795940[_0x3c6107(0x181)][_0x3c6107(0x1b6)],'ack':!![]}),_0x148a05[_0x3c6107(0x1b0)](_0x3c6107(0x194),{'val':_0x795940['payload'][_0x3c6107(0x1b2)],'ack':!![]});else{if(_0x795940[_0x3c6107(0x17b)]===_0x3c6107(0x158)){const {speed_trend:_0x293614}=_0x795940['payload'];if(_0x293614!==undefined)_0x148a05[_0x3c6107(0x1b0)]('analysis.health.gaitSpeed',{'val':_0x293614,'ack':!![]});}else{if(_0x795940[_0x3c6107(0x17b)]===_0x3c6107(0x1a1)){const {forecast:_0x512aee}=_0x795940[_0x3c6107(0x181)];if(_0x512aee)_0x148a05[_0x3c6107(0x1b0)]('analysis.energy.forecast',{'val':JSON[_0x3c6107(0x19d)](_0x512aee),'ack':!![]});}else{if(_0x795940['type']==='TOPOLOGY_RESULT'){const {data:_0xbd267e}=_0x795940[_0x3c6107(0x181)];_0xbd267e&&(_0x148a05[_0x3c6107(0x19b)][_0x3c6107(0x18d)](_0x3c6107(0x1b5)),_0x148a05[_0x3c6107(0x1b0)](_0x3c6107(0x1a5),{'val':JSON[_0x3c6107(0x19d)](_0xbd267e),'ack':!![]}));}else{if(_0x795940[_0x3c6107(0x17b)]==='TOPOLOGY_ACK')_0x148a05['log'][_0x3c6107(0x16e)](_0x3c6107(0x16c));else{if(_0x795940[_0x3c6107(0x17b)]===_0x3c6107(0x1b4)){const {room:_0x29c9a6,propagation:_0x5c9f07}=_0x795940['payload'];let _0x4c4325=_0x3c6107(0x175),_0x1d998e=0x0;if(_0x5c9f07){const _0x8d89f4=Object[_0x3c6107(0x15a)](_0x5c9f07);_0x8d89f4[_0x3c6107(0x187)]>0x0&&(_0x4c4325=_0x8d89f4[0x0][0x0],_0x1d998e=_0x8d89f4[0x0][0x1]);}_0x148a05['setStateAsync'](_0x3c6107(0x199),{'val':_0x4c4325,'ack':!![]}),_0x148a05[_0x3c6107(0x1b0)](_0x3c6107(0x17c),{'val':_0x1d998e,'ack':!![]}),_0x1d998e>0.4&&_0x148a05[_0x3c6107(0x19b)][_0x3c6107(0x16e)]('ðŸ”®\x20Prediction:\x20From\x20'+_0x29c9a6+_0x3c6107(0x163)+_0x4c4325+'\x20('+(_0x1d998e*0x64)[_0x3c6107(0x1ac)](0x0)+'%)'),automation[_0x3c6107(0x165)](_0x148a05,_0x4c4325,_0x1d998e);}}}}}}}}}}}}}}function startService(_0xfaaac0,_0x2aacbd){const _0x1cdf67=a3_0x448f97;let _0x1d967c=_0x1cdf67(0x1a0);if(fs[_0x1cdf67(0x172)](_0x2aacbd))_0x1d967c=_0x2aacbd;try{const _0x3430d8=path[_0x1cdf67(0x18a)](__dirname,'..',_0x1cdf67(0x178),_0x1cdf67(0x1a4));pythonProcess=spawn(_0x1d967c,[_0x3430d8]),pythonProcess['stdout']['on'](_0x1cdf67(0x179),_0x202597=>{const _0x3d3b5e=_0x1cdf67,_0x2576e1=_0x202597[_0x3d3b5e(0x182)]()[_0x3d3b5e(0x186)]('\x0a');_0x2576e1[_0x3d3b5e(0x1b3)](_0x1f9411=>{const _0x1e9bf4=_0x3d3b5e,_0x4adf89=_0x1f9411[_0x1e9bf4(0x176)]();if(!_0x4adf89)return;if(_0x4adf89['startsWith']('[LOG]'))_0xfaaac0['log']['debug'](_0x1e9bf4(0x18b)+_0x4adf89['substring'](0x5)[_0x1e9bf4(0x176)]());else{if(_0x4adf89['startsWith'](_0x1e9bf4(0x15e)))try{const _0x56242d=JSON['parse'](_0x4adf89['substring'](0x8)[_0x1e9bf4(0x176)]());handleResult(_0xfaaac0,_0x56242d);}catch(_0x23503d){}}});}),pythonProcess['on'](_0x1cdf67(0x183),_0x20b423=>{pythonProcess=null;}),_0xfaaac0[_0x1cdf67(0x1a2)]=(_0x53d799,_0x5b44ae)=>send(_0xfaaac0,_0x53d799,_0x5b44ae);}catch(_0x56e68b){_0xfaaac0[_0x1cdf67(0x19b)]['error'](_0x1cdf67(0x1aa)+_0x56e68b[_0x1cdf67(0x189)]);}}function a3_0x6f04(_0x4035c8,_0x146cd2){const _0x3169c4=a3_0x5752();return a3_0x6f04=function(_0x16195f,_0x234533){_0x16195f=_0x16195f-0x153;let _0x5752fb=_0x3169c4[_0x16195f];return _0x5752fb;},a3_0x6f04(_0x4035c8,_0x146cd2);}function stopService(_0x37aa71){const _0x35f4a6=a3_0x448f97;if(pythonProcess){try{pythonProcess[_0x35f4a6(0x164)]();}catch(_0xa1be0b){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};