const a4_0x368eda=a4_0x1aad;(function(_0x2dea03,_0x1859fd){const _0x41b9fd=a4_0x1aad,_0x3bf77f=_0x2dea03();while(!![]){try{const _0x282dde=parseInt(_0x41b9fd(0x113))/0x1*(-parseInt(_0x41b9fd(0x13f))/0x2)+-parseInt(_0x41b9fd(0xfa))/0x3+-parseInt(_0x41b9fd(0xf9))/0x4+parseInt(_0x41b9fd(0x13d))/0x5+-parseInt(_0x41b9fd(0x13b))/0x6*(-parseInt(_0x41b9fd(0x120))/0x7)+-parseInt(_0x41b9fd(0x105))/0x8*(-parseInt(_0x41b9fd(0x14c))/0x9)+parseInt(_0x41b9fd(0x148))/0xa;if(_0x282dde===_0x1859fd)break;else _0x3bf77f['push'](_0x3bf77f['shift']());}catch(_0x5c27bb){_0x3bf77f['push'](_0x3bf77f['shift']());}}}(a4_0x4070,0x716dc));const a4_0x54709d=(function(){let _0x14dc0d=!![];return function(_0x2be8ca,_0x27a81f){const _0xe3ddb8=_0x14dc0d?function(){const _0x1f1d76=a4_0x1aad;if(_0x27a81f){const _0x2cba3e=_0x27a81f[_0x1f1d76(0x121)](_0x2be8ca,arguments);return _0x27a81f=null,_0x2cba3e;}}:function(){};return _0x14dc0d=![],_0xe3ddb8;};}()),a4_0x4391fc=a4_0x54709d(this,function(){const _0x565a53=a4_0x1aad;return a4_0x4391fc[_0x565a53(0x133)]()[_0x565a53(0x106)](_0x565a53(0x119))['toString']()[_0x565a53(0x108)](a4_0x4391fc)[_0x565a53(0x106)]('(((.+)+)+)+$');});a4_0x4391fc();'use strict';const {spawn}=require('child_process'),path=require(a4_0x368eda(0x107)),fs=require('fs'),setup=require(a4_0x368eda(0x134)),automation=require(a4_0x368eda(0x125));function a4_0x1aad(_0x1da42e,_0x3e6be0){const _0x56d5c6=a4_0x4070();return a4_0x1aad=function(_0x4391fc,_0x54709d){_0x4391fc=_0x4391fc-0xef;let _0x407045=_0x56d5c6[_0x4391fc];return _0x407045;},a4_0x1aad(_0x1da42e,_0x3e6be0);}let pythonProcess=null;function send(_0x431ef6,_0x3ed735,_0x2ee810={}){const _0x5bfc4f=a4_0x368eda;if(!pythonProcess||!pythonProcess[_0x5bfc4f(0x114)][_0x5bfc4f(0x12e)])return;const _0xc98915=JSON[_0x5bfc4f(0x103)]({'command':_0x3ed735,..._0x2ee810});try{pythonProcess[_0x5bfc4f(0x114)][_0x5bfc4f(0x14e)](_0xc98915+'\x0a');}catch(_0x3dfb9c){}}function handleResult(_0x4525e8,_0x3cc56a){const _0x462108=a4_0x368eda;if(_0x3cc56a[_0x462108(0x122)]===_0x462108(0x132))_0x4525e8[_0x462108(0x11a)][_0x462108(0x14a)]('üêç\x20Python\x20Pong');else{if(_0x3cc56a[_0x462108(0x122)]===_0x462108(0xff)){const {anomaly_score:_0x219bdc,is_anomaly:_0x26736c,threshold:_0x6fe5c6,explanation:_0x174d26}=_0x3cc56a[_0x462108(0x138)];_0x4525e8[_0x462108(0x123)](_0x462108(0x12b),{'val':_0x219bdc,'ack':!![]}),_0x4525e8['setStateAsync'](_0x462108(0x147),{'val':new Date()[_0x462108(0x117)](),'ack':!![]});if(_0x6fe5c6)_0x4525e8[_0x462108(0x123)](_0x462108(0xfb),{'val':_0x6fe5c6,'ack':!![]});if(_0x26736c){let _0x51d7c2='Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x219bdc[_0x462108(0x104)](0x4)+')';if(_0x174d26&&_0x174d26!==_0x462108(0x115))_0x51d7c2+='\x0aGrund:\x20'+_0x174d26;_0x4525e8[_0x462108(0x123)](_0x462108(0x12c),{'val':!![],'ack':!![]}),_0x4525e8[_0x462108(0x123)](_0x462108(0xfe),{'val':_0x51d7c2,'ack':!![]}),setup[_0x462108(0x10e)](_0x4525e8,_0x462108(0x109)+_0x51d7c2,![],!![]);}}else{if(_0x3cc56a[_0x462108(0x122)]==='TRAINING_COMPLETE'){const _0x53e5a0=_0x3cc56a[_0x462108(0x138)][_0x462108(0x140)]||'',_0x6c43e7=_0x3cc56a[_0x462108(0x138)][_0x462108(0x150)],_0x68439b=_0x3cc56a['payload']['success']?_0x462108(0xf4)+new Date()['toLocaleTimeString']()+'\x20('+_0x53e5a0+')':_0x462108(0x143)+_0x3cc56a[_0x462108(0x138)]['reason'];_0x4525e8[_0x462108(0x123)](_0x462108(0x142),{'val':_0x68439b,'ack':!![]});if(_0x3cc56a['payload'][_0x462108(0x124)]&&_0x6c43e7)_0x4525e8[_0x462108(0x123)](_0x462108(0xfb),{'val':_0x6c43e7,'ack':!![]});}else{if(_0x3cc56a['type']===_0x462108(0x149)){if(_0x3cc56a['payload'][_0x462108(0x124)])try{const _0x277fed=JSON[_0x462108(0x141)](_0x3cc56a[_0x462108(0x138)][_0x462108(0x140)]);if(_0x277fed[_0x462108(0x111)])_0x4525e8['setStateAsync'](_0x462108(0x11b),{'val':JSON['stringify'](_0x277fed[_0x462108(0x111)]),'ack':!![]});if(_0x277fed[_0x462108(0x14f)])_0x4525e8[_0x462108(0x123)](_0x462108(0x10f),{'val':JSON[_0x462108(0x103)](_0x277fed[_0x462108(0x14f)]),'ack':!![]});}catch(_0x3784fc){}}else{if(_0x3cc56a[_0x462108(0x122)]===_0x462108(0xf8)){if(_0x3cc56a[_0x462108(0x138)][_0x462108(0x124)])_0x4525e8[_0x462108(0x11a)]['info'](_0x462108(0x136));}else{if(_0x3cc56a[_0x462108(0x122)]===_0x462108(0x144))_0x4525e8['setStateAsync'](_0x462108(0x10d),{'val':new Date()['toISOString'](),'ack':!![]}),_0x4525e8[_0x462108(0x123)](_0x462108(0x131),{'val':_0x3cc56a[_0x462108(0x138)][_0x462108(0x102)],'ack':!![]});else{if(_0x3cc56a[_0x462108(0x122)]===_0x462108(0x14d)){const {speed_trend:_0xb7f586}=_0x3cc56a[_0x462108(0x138)];if(_0xb7f586!==undefined)_0x4525e8[_0x462108(0x123)](_0x462108(0x11e),{'val':_0xb7f586,'ack':!![]});}else{if(_0x3cc56a[_0x462108(0x122)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x424379}=_0x3cc56a['payload'];if(_0x424379)_0x4525e8['setStateAsync'](_0x462108(0x116),{'val':JSON[_0x462108(0x103)](_0x424379),'ack':!![]});}else{if(_0x3cc56a[_0x462108(0x122)]===_0x462108(0xf6)){const {times:_0x3b7f25,sources:_0x5c6f6d,details:_0x547ea8}=_0x3cc56a[_0x462108(0x138)];if(_0x3b7f25)_0x4525e8['setStateAsync'](_0x462108(0xf7),{'val':JSON['stringify'](_0x3b7f25),'ack':!![]});if(_0x5c6f6d)_0x4525e8[_0x462108(0x123)](_0x462108(0x11c),{'val':JSON['stringify'](_0x5c6f6d),'ack':!![]});if(_0x547ea8)_0x4525e8[_0x462108(0x123)](_0x462108(0x151),{'val':JSON['stringify'](_0x547ea8),'ack':!![]});}else{if(_0x3cc56a[_0x462108(0x122)]===_0x462108(0x13c)){const {penalties:_0x2395e6}=_0x3cc56a['payload'];if(_0x2395e6)_0x4525e8[_0x462108(0x123)](_0x462108(0x110),{'val':JSON['stringify'](_0x2395e6),'ack':!![]});}else{if(_0x3cc56a[_0x462108(0x122)]===_0x462108(0x14b)){const {forecast:_0x4afa5f}=_0x3cc56a[_0x462108(0x138)];if(_0x4afa5f)_0x4525e8[_0x462108(0x123)](_0x462108(0xf0),{'val':JSON[_0x462108(0x103)](_0x4afa5f),'ack':!![]});}else{if(_0x3cc56a['type']===_0x462108(0x11f)){const {alerts:_0x4b451d}=_0x3cc56a[_0x462108(0x138)];if(_0x4b451d)_0x4525e8[_0x462108(0x123)](_0x462108(0xef),{'val':JSON[_0x462108(0x103)](_0x4b451d),'ack':!![]});}else{if(_0x3cc56a['type']==='ENERGY_OPTIMIZE_RESULT'){const {proposals:_0x176068}=_0x3cc56a['payload'];_0x4525e8['getState']('analysis.energy.mpcActive',(_0x263e48,_0x3c1e03)=>{const _0x45597d=_0x462108;_0x3c1e03&&_0x3c1e03['val']===!![]&&_0x176068&&_0x176068[_0x45597d(0x128)]>0x0&&automation[_0x45597d(0xf5)](_0x4525e8,_0x176068);});}else{if(_0x3cc56a[_0x462108(0x122)]===_0x462108(0x11d)){const {room:_0x6bfbbc,propagation:_0x54e959}=_0x3cc56a[_0x462108(0x138)];let _0x59514e=_0x462108(0x115),_0x34e1e3=0x0;if(_0x54e959){const _0x4f562c=Object['entries'](_0x54e959);_0x4f562c['length']>0x0&&(_0x59514e=_0x4f562c[0x0][0x0],_0x34e1e3=_0x4f562c[0x0][0x1]);}_0x4525e8[_0x462108(0x123)](_0x462108(0x12a),{'val':_0x59514e,'ack':!![]}),_0x4525e8['setStateAsync'](_0x462108(0xfd),{'val':_0x34e1e3,'ack':!![]}),automation[_0x462108(0x130)](_0x4525e8,_0x59514e,_0x34e1e3);}else{if(_0x3cc56a[_0x462108(0x122)]==='TRACKER_RESULT'){const {probabilities:_0x5ffac7}=_0x3cc56a[_0x462108(0x138)];if(_0x5ffac7){_0x4525e8[_0x462108(0x123)](_0x462108(0xf2),{'val':JSON[_0x462108(0x103)](_0x5ffac7),'ack':!![]});const _0x4f320f=Object[_0x462108(0x135)](_0x5ffac7);if(_0x4f320f[_0x462108(0x128)]>0x0){const _0x405b73=_0x4f320f[0x0],_0x520f6c=_0x5ffac7[_0x405b73];_0x4525e8[_0x462108(0x123)](_0x462108(0x10c),{'val':_0x405b73,'ack':!![]}),_0x4525e8[_0x462108(0x123)](_0x462108(0x12f),{'val':_0x520f6c,'ack':!![]});}}}else{if(_0x3cc56a['type']===_0x462108(0xf3)){const {patterns:_0x7cf04b}=_0x3cc56a[_0x462108(0x138)];if(_0x7cf04b&&_0x7cf04b[_0x462108(0x128)]>0x0)_0x4525e8[_0x462108(0x123)](_0x462108(0x146),{'val':JSON[_0x462108(0x103)](_0x7cf04b),'ack':!![]});}}}}}}}}}}}}}}}}}function startService(_0x367080,_0x19bb12){const _0x1597bc=a4_0x368eda;let _0x4e7aa8='python3';if(fs[_0x1597bc(0x10a)](_0x19bb12))_0x4e7aa8=_0x19bb12;try{const _0x281143=path[_0x1597bc(0x13a)](__dirname,'..','python_service','service.py');pythonProcess=spawn(_0x4e7aa8,[_0x281143]),pythonProcess[_0x1597bc(0x137)]['on'](_0x1597bc(0x145),_0x1a1540=>{const _0x40c28a=_0x1597bc,_0x4e4e80=_0x1a1540[_0x40c28a(0x133)]()[_0x40c28a(0x10b)]('\x0a');_0x4e4e80[_0x40c28a(0x12d)](_0x22c26a=>{const _0x3989e9=_0x40c28a,_0x7ff0ec=_0x22c26a[_0x3989e9(0x101)]();if(!_0x7ff0ec)return;if(_0x7ff0ec[_0x3989e9(0x13e)](_0x3989e9(0x127)))_0x367080[_0x3989e9(0x11a)]['debug'](_0x3989e9(0x118)+_0x7ff0ec['substring'](0x5)['trim']());else{if(_0x7ff0ec[_0x3989e9(0x13e)](_0x3989e9(0x100)))try{const _0x5d18b8=JSON[_0x3989e9(0x141)](_0x7ff0ec['substring'](0x8)[_0x3989e9(0x101)]());handleResult(_0x367080,_0x5d18b8);}catch(_0x7a1665){}}});}),pythonProcess['on'](_0x1597bc(0x129),_0x59fe1e=>{pythonProcess=null;}),_0x367080[_0x1597bc(0xf1)]=(_0x50d260,_0x1cb2d2)=>send(_0x367080,_0x50d260,_0x1cb2d2);}catch(_0x5a5a45){_0x367080[_0x1597bc(0x11a)]['error'](_0x1597bc(0x126)+_0x5a5a45[_0x1597bc(0xfc)]);}}function stopService(_0x1a3f13){const _0x13ad1f=a4_0x368eda;if(pythonProcess){try{pythonProcess[_0x13ad1f(0x139)]();}catch(_0x55c312){}pythonProcess=null;}}function a4_0x4070(){const _0x3ef3d8=['close','analysis.prediction.nextRoom','analysis.security.lastScore','analysis.isAlert','forEach','writable','analysis.prediction.trackerConfidence','handlePrediction','analysis.health.isAnomaly','PONG','toString','./setup','keys','‚úÖ\x20HEALTH\x20TRAINED.','stdout','payload','kill','join','2191314bFJUKU','RL_PENALTY_UPDATE','3763730RpDXIm','startsWith','352324FOxoMh','details','parse','analysis.training.status','Failed:\x20','HEALTH_RESULT','data','analysis.automation.detectedPatterns','analysis.security.lastCheck','17705670VbAqBt','ENERGY_TRAIN_RESULT','debug','PINN_PREDICT_RESULT','1331181OyTAhq','GAIT_RESULT','write','heating','threshold','analysis.energy.warmupDetails','analysis.energy.ventilationAlerts','analysis.energy.pinnForecast','sendToPythonWrapper','analysis.prediction.trackerState','COMFORT_RESULT','Success:\x20','applyEnergySavings','WARMUP_RESULT','analysis.energy.warmupTimes','HEALTH_TRAIN_RESULT','3654652jlGkcz','2332092IbiTKW','analysis.security.currentThreshold','message','analysis.prediction.confidence','analysis.alertReason','SECURITY_RESULT','[RESULT]','trim','is_anomaly','stringify','toFixed','8ktlIiI','search','path','constructor','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','existsSync','split','analysis.prediction.trackerTopRoom','analysis.health.lastCheck','sendNotification','analysis.energy.heatingScore','analysis.energy.rlPenalties','insulation','exports','5VJPyhh','stdin','Unknown','analysis.energy.forecast','toISOString','[PYTHON]\x20','(((.+)+)+)+$','log','analysis.energy.insulationScore','analysis.energy.warmupSources','SIGNAL_RESULT','analysis.health.gaitSpeed','VENTILATION_ALERT','7fThkAy','apply','type','setStateAsync','success','./automation','Error\x20launching\x20Python:\x20','[LOG]','length'];a4_0x4070=function(){return _0x3ef3d8;};return a4_0x4070();}module[a4_0x368eda(0x112)]={'startService':startService,'stopService':stopService,'send':send};