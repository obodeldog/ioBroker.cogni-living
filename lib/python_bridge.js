function a4_0x23b4(){const _0x3b45a9=['analysis.health.gaitSensors','threshold','stdin','insulation','analysis.isAlert','analysis.energy.mpcActive','GAIT_RESULT','.\x20Please\x20create\x20this\x20file!','existsSync','toString','service.py','toLocaleDateString','235xmIFSd','python_service','join','close','warn','SECURITY_RESULT','analysis.energy.forecast','184rgdrcT','\x0aGrund:\x20','python3','Unknown','TRAINING_COMPLETE','ENERGY_TRAIN_RESULT','analysis.health.gaitSpeed','2-digit','SIGNAL_RESULT','[PYTHON\x20ERR]\x20','substring','writable','log','sendToPythonWrapper','ENERGY_PREDICT_RESULT','ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20','10278pRjmKX','Error\x20launching\x20Python:\x20','244405mikUJM','COMFORT_RESULT','exports','[PYTHON]\x20','521340YIyWTz','debug','handlePrediction','6VmvlLV','error','analysis.health.lastCheck','PINN_PREDICT_RESULT','341369iZCHlG','keys','split','stdout','analysis.energy.warmupSources','analysis.energy.rlPenalties','analysis.training.status','analysis.alertReason','type','setStateAsync','analysis.prediction.confidence','WARMUP_RESULT','(((.+)+)+)+$','RL_PENALTY_UPDATE','search','payload','analysis.automation.detectedPatterns','startsWith','de-DE','analysis.security.currentThreshold','is_anomaly','analysis.energy.warmupDetails','short','val','analysis.energy.ventilationAlerts','10390ZiFAbS','toISOString','ðŸ“ˆ\x20Health\x20Trend:\x20','âš ï¸\x20SECURITY\x20ALARM:\x20','879116NMqRAb','length','26968SXxLsu','details','isArray','heating','analysis.energy.pinnForecast','PONG','toLocaleTimeString','sendNotification','trim','kill','15961aADFVq','success','constructor','analysis.prediction.trackerState','analysis.health.isAnomaly','data','parse','stringify','toFixed','child_process','./setup','HEALTH_TREND_RESULT','analysis.health.activityTrend','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20','TRACKER_RESULT','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','info'];a4_0x23b4=function(){return _0x3b45a9;};return a4_0x23b4();}const a4_0xbfb2bb=a4_0xde6b;(function(_0x1033af,_0xe7ed53){const _0x30383b=a4_0xde6b,_0x35c07a=_0x1033af();while(!![]){try{const _0xae854c=-parseInt(_0x30383b(0x117))/0x1+-parseInt(_0x30383b(0xd5))/0x2+-parseInt(_0x30383b(0xb1))/0x3+-parseInt(_0x30383b(0xd7))/0x4*(parseInt(_0x30383b(0xfe))/0x5)+-parseInt(_0x30383b(0xb4))/0x6*(parseInt(_0x30383b(0xb8))/0x7)+parseInt(_0x30383b(0x105))/0x8*(-parseInt(_0x30383b(0x115))/0x9)+parseInt(_0x30383b(0xd1))/0xa*(parseInt(_0x30383b(0xe1))/0xb);if(_0xae854c===_0xe7ed53)break;else _0x35c07a['push'](_0x35c07a['shift']());}catch(_0x351397){_0x35c07a['push'](_0x35c07a['shift']());}}}(a4_0x23b4,0x3ef93));const a4_0x2c77df=(function(){let _0x15adf5=!![];return function(_0x5194ff,_0xaa2d04){const _0x265a52=_0x15adf5?function(){if(_0xaa2d04){const _0x1e135c=_0xaa2d04['apply'](_0x5194ff,arguments);return _0xaa2d04=null,_0x1e135c;}}:function(){};return _0x15adf5=![],_0x265a52;};}()),a4_0x5570ba=a4_0x2c77df(this,function(){const _0x2c7f90=a4_0xde6b;return a4_0x5570ba[_0x2c7f90(0xfb)]()[_0x2c7f90(0xc6)](_0x2c7f90(0xc4))[_0x2c7f90(0xfb)]()[_0x2c7f90(0xe3)](a4_0x5570ba)[_0x2c7f90(0xc6)]('(((.+)+)+)+$');});a4_0x5570ba();'use strict';const {spawn}=require(a4_0xbfb2bb(0xea)),path=require('path'),fs=require('fs'),setup=require(a4_0xbfb2bb(0xeb)),automation=require('./automation');let pythonProcess=null;function send(_0x3f5319,_0x1e158b,_0x3b4a89={}){const _0x120f73=a4_0xbfb2bb;if(!pythonProcess||!pythonProcess[_0x120f73(0xf4)][_0x120f73(0x110)])return;const _0x19801f=JSON['stringify']({'command':_0x1e158b,..._0x3b4a89});try{pythonProcess[_0x120f73(0xf4)]['write'](_0x19801f+'\x0a');}catch(_0x48d6fd){}}function handleResult(_0x39b551,_0x1f7272){const _0x4aae0b=a4_0xbfb2bb;if(_0x1f7272[_0x4aae0b(0xc0)]===_0x4aae0b(0xdc))_0x39b551[_0x4aae0b(0x111)][_0x4aae0b(0xb2)]('ðŸ\x20Python\x20Pong');else{if(_0x1f7272[_0x4aae0b(0xc0)]===_0x4aae0b(0x103)){const {anomaly_score:_0x7439a9,is_anomaly:_0x3bee71,threshold:_0x50eb77,explanation:_0xcb8bae}=_0x1f7272[_0x4aae0b(0xc7)];_0x39b551[_0x4aae0b(0xc1)]('analysis.security.lastScore',{'val':_0x7439a9,'ack':!![]}),_0x39b551['setStateAsync']('analysis.security.lastCheck',{'val':new Date()[_0x4aae0b(0xd2)](),'ack':!![]});if(_0x50eb77)_0x39b551[_0x4aae0b(0xc1)](_0x4aae0b(0xcb),{'val':_0x50eb77,'ack':!![]});if(_0x3bee71){let _0x472c01=_0x4aae0b(0xf0)+_0x7439a9[_0x4aae0b(0xe9)](0x4)+')';if(_0xcb8bae&&_0xcb8bae!=='Unknown')_0x472c01+=_0x4aae0b(0x106)+_0xcb8bae;_0x39b551[_0x4aae0b(0xc1)](_0x4aae0b(0xf6),{'val':!![],'ack':!![]}),_0x39b551['setStateAsync'](_0x4aae0b(0xbf),{'val':_0x472c01,'ack':!![]}),setup[_0x4aae0b(0xde)](_0x39b551,_0x4aae0b(0xd4)+_0x472c01,![],!![]);}}else{if(_0x1f7272[_0x4aae0b(0xc0)]===_0x4aae0b(0x109)){const _0x1c1e6d=_0x1f7272[_0x4aae0b(0xc7)]['details']||'',_0x2a8a8c=_0x1f7272['payload'][_0x4aae0b(0xf3)],_0x13fe70=_0x1f7272[_0x4aae0b(0xc7)][_0x4aae0b(0xe2)]?'Success:\x20'+new Date()[_0x4aae0b(0xdd)]()+'\x20('+_0x1c1e6d+')':'Failed:\x20'+_0x1f7272['payload']['reason'];_0x39b551[_0x4aae0b(0xc1)](_0x4aae0b(0xbe),{'val':_0x13fe70,'ack':!![]});if(_0x1f7272[_0x4aae0b(0xc7)]['success']&&_0x2a8a8c)_0x39b551['setStateAsync'](_0x4aae0b(0xcb),{'val':_0x2a8a8c,'ack':!![]});}else{if(_0x1f7272[_0x4aae0b(0xc0)]===_0x4aae0b(0x10a)){if(_0x1f7272[_0x4aae0b(0xc7)][_0x4aae0b(0xe2)])try{const _0x1ddca9=JSON[_0x4aae0b(0xe7)](_0x1f7272[_0x4aae0b(0xc7)][_0x4aae0b(0xd8)]);if(_0x1ddca9[_0x4aae0b(0xf5)])_0x39b551['setStateAsync']('analysis.energy.insulationScore',{'val':JSON[_0x4aae0b(0xe8)](_0x1ddca9[_0x4aae0b(0xf5)]),'ack':!![]});if(_0x1ddca9[_0x4aae0b(0xda)])_0x39b551[_0x4aae0b(0xc1)]('analysis.energy.heatingScore',{'val':JSON[_0x4aae0b(0xe8)](_0x1ddca9[_0x4aae0b(0xda)]),'ack':!![]});}catch(_0x258df2){}}else{if(_0x1f7272[_0x4aae0b(0xc0)]==='HEALTH_TRAIN_RESULT'){if(_0x1f7272[_0x4aae0b(0xc7)][_0x4aae0b(0xe2)]){_0x39b551['log']['info']('âœ…\x20HEALTH\x20TRAINED.');const _0x2bef4c=new Date(),_0x510333=_0x2bef4c[_0x4aae0b(0xfd)](_0x4aae0b(0xca),{'day':_0x4aae0b(0x10c),'month':_0x4aae0b(0xce),'hour':_0x4aae0b(0x10c),'minute':'2-digit'});_0x39b551[_0x4aae0b(0xc1)](_0x4aae0b(0xb6),{'val':_0x510333,'ack':!![]});}}else{if(_0x1f7272[_0x4aae0b(0xc0)]==='HEALTH_RESULT'){const _0x4b0188=new Date(),_0x4743cf=_0x4b0188['toLocaleDateString']('de-DE',{'day':_0x4aae0b(0x10c),'month':_0x4aae0b(0xce),'hour':_0x4aae0b(0x10c),'minute':_0x4aae0b(0x10c)});_0x39b551[_0x4aae0b(0xc1)]('analysis.health.lastCheck',{'val':_0x4743cf,'ack':!![]}),_0x39b551['setStateAsync'](_0x4aae0b(0xe5),{'val':_0x1f7272[_0x4aae0b(0xc7)][_0x4aae0b(0xcc)],'ack':!![]});}else{if(_0x1f7272[_0x4aae0b(0xc0)]===_0x4aae0b(0xec)){const {trend_percent:_0xb5d5d8,details:_0x244bfc}=_0x1f7272[_0x4aae0b(0xc7)],_0x5f38a1=new Date(),_0x3d8de8=_0x5f38a1[_0x4aae0b(0xfd)](_0x4aae0b(0xca),{'day':_0x4aae0b(0x10c),'month':'short','hour':_0x4aae0b(0x10c),'minute':_0x4aae0b(0x10c)});_0x39b551[_0x4aae0b(0xc1)](_0x4aae0b(0xb6),{'val':_0x3d8de8,'ack':!![]}),_0x39b551['setStateAsync'](_0x4aae0b(0xed),{'val':_0xb5d5d8,'ack':!![]}),_0x39b551[_0x4aae0b(0x111)][_0x4aae0b(0xf1)](_0x4aae0b(0xd3)+_0x244bfc);}else{if(_0x1f7272['type']===_0x4aae0b(0xf8)){const {speed_trend:_0x55bcbb,sensors:_0x4be180,proof:_0x45a5d5}=_0x1f7272[_0x4aae0b(0xc7)];if(_0x55bcbb!==undefined)_0x39b551[_0x4aae0b(0xc1)](_0x4aae0b(0x10b),{'val':_0x55bcbb,'ack':!![]});if(_0x4be180&&Array[_0x4aae0b(0xd9)](_0x4be180))_0x39b551[_0x4aae0b(0xc1)](_0x4aae0b(0xf2),{'val':_0x4be180[_0x4aae0b(0x100)](',\x20'),'ack':!![]});if(_0x45a5d5)_0x39b551[_0x4aae0b(0xc1)]('analysis.health.gaitDebug',{'val':_0x45a5d5,'ack':!![]});}else{if(_0x1f7272[_0x4aae0b(0xc0)]===_0x4aae0b(0x113)){const {forecast:_0x39315e}=_0x1f7272[_0x4aae0b(0xc7)];if(_0x39315e)_0x39b551[_0x4aae0b(0xc1)](_0x4aae0b(0x104),{'val':JSON[_0x4aae0b(0xe8)](_0x39315e),'ack':!![]});}else{if(_0x1f7272[_0x4aae0b(0xc0)]===_0x4aae0b(0xc3)){const {times:_0x1364b2,sources:_0x45e3d1,details:_0x4604a7}=_0x1f7272['payload'];if(_0x1364b2)_0x39b551['setStateAsync']('analysis.energy.warmupTimes',{'val':JSON[_0x4aae0b(0xe8)](_0x1364b2),'ack':!![]});if(_0x45e3d1)_0x39b551[_0x4aae0b(0xc1)](_0x4aae0b(0xbc),{'val':JSON['stringify'](_0x45e3d1),'ack':!![]});if(_0x4604a7)_0x39b551[_0x4aae0b(0xc1)](_0x4aae0b(0xcd),{'val':JSON[_0x4aae0b(0xe8)](_0x4604a7),'ack':!![]});}else{if(_0x1f7272[_0x4aae0b(0xc0)]===_0x4aae0b(0xc5)){const {penalties:_0x5d7dd0}=_0x1f7272['payload'];if(_0x5d7dd0)_0x39b551[_0x4aae0b(0xc1)](_0x4aae0b(0xbd),{'val':JSON['stringify'](_0x5d7dd0),'ack':!![]});}else{if(_0x1f7272[_0x4aae0b(0xc0)]===_0x4aae0b(0xb7)){const {forecast:_0x401181}=_0x1f7272['payload'];if(_0x401181)_0x39b551[_0x4aae0b(0xc1)](_0x4aae0b(0xdb),{'val':JSON[_0x4aae0b(0xe8)](_0x401181),'ack':!![]});}else{if(_0x1f7272[_0x4aae0b(0xc0)]==='VENTILATION_ALERT'){const {alerts:_0x22ea11}=_0x1f7272[_0x4aae0b(0xc7)];if(_0x22ea11)_0x39b551['setStateAsync'](_0x4aae0b(0xd0),{'val':JSON[_0x4aae0b(0xe8)](_0x22ea11),'ack':!![]});}else{if(_0x1f7272[_0x4aae0b(0xc0)]==='ENERGY_OPTIMIZE_RESULT'){const {proposals:_0x23bbdb}=_0x1f7272[_0x4aae0b(0xc7)];_0x39b551['getState'](_0x4aae0b(0xf7),(_0x222209,_0x5aff2d)=>{const _0x5b5a78=_0x4aae0b;_0x5aff2d&&_0x5aff2d[_0x5b5a78(0xcf)]===!![]&&_0x23bbdb&&_0x23bbdb['length']>0x0&&automation['applyEnergySavings'](_0x39b551,_0x23bbdb);});}else{if(_0x1f7272['type']===_0x4aae0b(0x10d)){const {room:_0x2adc55,propagation:_0x56d1a1}=_0x1f7272[_0x4aae0b(0xc7)];let _0x22203c=_0x4aae0b(0x108),_0x3b1ca1=0x0;if(_0x56d1a1){const _0x32b179=Object['entries'](_0x56d1a1);_0x32b179[_0x4aae0b(0xd6)]>0x0&&(_0x22203c=_0x32b179[0x0][0x0],_0x3b1ca1=_0x32b179[0x0][0x1]);}_0x39b551[_0x4aae0b(0xc1)]('analysis.prediction.nextRoom',{'val':_0x22203c,'ack':!![]}),_0x39b551[_0x4aae0b(0xc1)](_0x4aae0b(0xc2),{'val':_0x3b1ca1,'ack':!![]}),automation[_0x4aae0b(0xb3)](_0x39b551,_0x22203c,_0x3b1ca1);}else{if(_0x1f7272[_0x4aae0b(0xc0)]===_0x4aae0b(0xef)){const {probabilities:_0x3933fe}=_0x1f7272[_0x4aae0b(0xc7)];if(_0x3933fe){_0x39b551[_0x4aae0b(0xc1)](_0x4aae0b(0xe4),{'val':JSON[_0x4aae0b(0xe8)](_0x3933fe),'ack':!![]});const _0x31b372=Object[_0x4aae0b(0xb9)](_0x3933fe);if(_0x31b372[_0x4aae0b(0xd6)]>0x0){const _0x2b39b5=_0x31b372[0x0],_0xf245f8=_0x3933fe[_0x2b39b5];_0x39b551['setStateAsync']('analysis.prediction.trackerTopRoom',{'val':_0x2b39b5,'ack':!![]}),_0x39b551[_0x4aae0b(0xc1)]('analysis.prediction.trackerConfidence',{'val':_0xf245f8,'ack':!![]});}}}else{if(_0x1f7272[_0x4aae0b(0xc0)]===_0x4aae0b(0x118)){const {patterns:_0x3856c1}=_0x1f7272[_0x4aae0b(0xc7)];if(_0x3856c1&&_0x3856c1['length']>0x0)_0x39b551[_0x4aae0b(0xc1)](_0x4aae0b(0xc8),{'val':JSON[_0x4aae0b(0xe8)](_0x3856c1),'ack':!![]});}}}}}}}}}}}}}}}}}}function a4_0xde6b(_0x57ddec,_0x53b539){const _0x540cb2=a4_0x23b4();return a4_0xde6b=function(_0x5570ba,_0x2c77df){_0x5570ba=_0x5570ba-0xb0;let _0x23b425=_0x540cb2[_0x5570ba];return _0x23b425;},a4_0xde6b(_0x57ddec,_0x53b539);}function startService(_0x328aca,_0xaeafb7){const _0x1cf76b=a4_0xbfb2bb;let _0x22bdb0=_0x1cf76b(0x107);if(fs[_0x1cf76b(0xfa)](_0xaeafb7))_0x22bdb0=_0xaeafb7;const _0x5418d2=path[_0x1cf76b(0x100)](__dirname,'..',_0x1cf76b(0xfc)),_0x4f1011=path[_0x1cf76b(0x100)](__dirname,'..',_0x1cf76b(0xff),'service.py');let _0x5c8788='';if(fs['existsSync'](_0x5418d2))_0x5c8788=_0x5418d2;else{if(fs[_0x1cf76b(0xfa)](_0x4f1011))_0x5c8788=_0x4f1011;else{_0x328aca[_0x1cf76b(0x111)][_0x1cf76b(0xb5)](_0x1cf76b(0xee)+_0x5418d2+'\x20AND\x20'+_0x4f1011+_0x1cf76b(0xf9));return;}}try{_0x328aca[_0x1cf76b(0x111)][_0x1cf76b(0xf1)](_0x1cf76b(0x114)+_0x22bdb0+'\x20'+_0x5c8788),pythonProcess=spawn(_0x22bdb0,[_0x5c8788]),pythonProcess[_0x1cf76b(0xbb)]['on'](_0x1cf76b(0xe6),_0x178f77=>{const _0x250182=_0x1cf76b,_0x123155=_0x178f77[_0x250182(0xfb)]()[_0x250182(0xba)]('\x0a');_0x123155['forEach'](_0x331126=>{const _0x3def24=_0x250182,_0x179087=_0x331126[_0x3def24(0xdf)]();if(!_0x179087)return;if(_0x179087[_0x3def24(0xc9)]('[LOG]'))_0x328aca[_0x3def24(0x111)]['debug'](_0x3def24(0xb0)+_0x179087[_0x3def24(0x10f)](0x5)[_0x3def24(0xdf)]());else{if(_0x179087[_0x3def24(0xc9)]('[RESULT]'))try{const _0x416e61=JSON[_0x3def24(0xe7)](_0x179087[_0x3def24(0x10f)](0x8)[_0x3def24(0xdf)]());handleResult(_0x328aca,_0x416e61);}catch(_0xcc770e){}}});}),pythonProcess['stderr']['on'](_0x1cf76b(0xe6),_0x1c50c3=>{const _0x1032ed=_0x1cf76b;_0x328aca[_0x1032ed(0x111)][_0x1032ed(0xb5)](_0x1032ed(0x10e)+_0x1c50c3['toString']()[_0x1032ed(0xdf)]());}),pythonProcess['on'](_0x1cf76b(0x101),_0x239354=>{const _0x20b9a1=_0x1cf76b;_0x328aca[_0x20b9a1(0x111)][_0x20b9a1(0x102)]('Python\x20process\x20exited\x20with\x20code\x20'+_0x239354),pythonProcess=null;}),_0x328aca[_0x1cf76b(0x112)]=(_0x41c28f,_0x430f95)=>send(_0x328aca,_0x41c28f,_0x430f95);}catch(_0x46a4ed){_0x328aca[_0x1cf76b(0x111)][_0x1cf76b(0xb5)](_0x1cf76b(0x116)+_0x46a4ed['message']);}}function stopService(_0x135e05){const _0x5cfc50=a4_0xbfb2bb;if(pythonProcess){try{pythonProcess[_0x5cfc50(0xe0)]();}catch(_0x4e29d6){}pythonProcess=null;}}module[a4_0xbfb2bb(0x119)]={'startService':startService,'stopService':stopService,'send':send};