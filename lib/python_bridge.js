const a3_0x468b49=a3_0x26d2;(function(_0x6f7640,_0x1b2391){const _0x37b6fc=a3_0x26d2,_0xda431b=_0x6f7640();while(!![]){try{const _0x257bbc=-parseInt(_0x37b6fc(0x19f))/0x1+-parseInt(_0x37b6fc(0x194))/0x2*(parseInt(_0x37b6fc(0x1af))/0x3)+-parseInt(_0x37b6fc(0x1cd))/0x4+-parseInt(_0x37b6fc(0x1b9))/0x5+parseInt(_0x37b6fc(0x1e5))/0x6+parseInt(_0x37b6fc(0x1bf))/0x7+parseInt(_0x37b6fc(0x1cf))/0x8*(parseInt(_0x37b6fc(0x1a3))/0x9);if(_0x257bbc===_0x1b2391)break;else _0xda431b['push'](_0xda431b['shift']());}catch(_0x2dc062){_0xda431b['push'](_0xda431b['shift']());}}}(a3_0x2932,0xf16c0));const a3_0x43f1bd=(function(){let _0x26b692=!![];return function(_0x508dc1,_0x2dd82a){const _0x3b5e62=_0x26b692?function(){if(_0x2dd82a){const _0x1189ac=_0x2dd82a['apply'](_0x508dc1,arguments);return _0x2dd82a=null,_0x1189ac;}}:function(){};return _0x26b692=![],_0x3b5e62;};}()),a3_0x141390=a3_0x43f1bd(this,function(){const _0x13f605=a3_0x26d2;return a3_0x141390[_0x13f605(0x1a4)]()['search'](_0x13f605(0x1c2))['toString']()[_0x13f605(0x1eb)](a3_0x141390)[_0x13f605(0x1ab)](_0x13f605(0x1c2));});a3_0x141390();function a3_0x2932(){const _0x3ff0ac=['390tsozSW','âš ï¸\x20SECURITY\x20ALARM:\x20','analysis.security.lastCheck','analysis.automation.description','ENERGY_PREDICT_RESULT','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','analysis.energy.insulationScore','log','trim','handlePrediction','5354850XfitbQ','Failed:\x20','debug','\x20new\x20patterns.','./setup','analysis.energy.forecast','12087243ktgjdH','kill','toFixed','(((.+)+)+)+$','payload','threshold','analysis.prediction.nextRoom','sendToPythonWrapper','diagnosis','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','analysis.health.trendValue','heating','analysis.training.status','TOPOLOGY_RESULT','1390012ElaLOq','analysis.automation.detectedPatterns','14528uOlDvM','Unknown','write','entries','split','analysis.prediction.confidence','toISOString','ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.','reason','\x20->\x20','ENERGY_TRAIN_RESULT','analysis.health.gaitSpeed','success','python_service','Error\x20launching\x20Python:\x20','GAIT_RESULT','length','substring','Success:\x20','analysis.health.trendDiagnosis','service.py','stdin','2719626vcpAhb','message','ðŸ\x20Python\x20confirmed\x20new\x20topology.','setStateAsync','SECURITY_RESULT','[PYTHON]\x20','constructor','sendNotification','TOPOLOGY_ACK','type','is_anomaly','analysis.energy.heatingScore','analysis.alertReason','\x0aGrund:\x20','PONG','analysis.security.currentThreshold','existsSync','6316ORUiNd','analysis.health.lastCheck','âœ…\x20HEALTH\x20TRAINED.','startsWith','Regel\x20erkannt:\x20','insulation','details','confidence','child_process','rule','writable','1681175mOycJg','./automation','HEALTH_TRAIN_RESULT','[LOG]','11493AuWgiA','toString','stringify','analysis.security.topologyMatrix','analysis.health.isAnomaly','\x20->\x20Likely\x20','analysis.automation.patternDetected','path','search','parse','info','error'];a3_0x2932=function(){return _0x3ff0ac;};return a3_0x2932();}'use strict';const {spawn}=require(a3_0x468b49(0x19c)),path=require(a3_0x468b49(0x1aa)),fs=require('fs'),setup=require(a3_0x468b49(0x1bd)),automation=require(a3_0x468b49(0x1a0));let pythonProcess=null;function send(_0x59477c,_0x52374c,_0x3a716f={}){const _0x126d7d=a3_0x468b49;if(!pythonProcess||!pythonProcess[_0x126d7d(0x1e4)][_0x126d7d(0x19e)])return;const _0x570f97=JSON[_0x126d7d(0x1a5)]({'command':_0x52374c,..._0x3a716f});try{pythonProcess[_0x126d7d(0x1e4)][_0x126d7d(0x1d1)](_0x570f97+'\x0a');}catch(_0x2068ee){}}function handleResult(_0x469577,_0xaa8146){const _0x1bbee9=a3_0x468b49;if(_0xaa8146[_0x1bbee9(0x1ee)]===_0x1bbee9(0x1f3))_0x469577[_0x1bbee9(0x1b6)][_0x1bbee9(0x1bb)]('ðŸ\x20Python\x20Pong');else{if(_0xaa8146[_0x1bbee9(0x1ee)]===_0x1bbee9(0x1e9)){const {anomaly_score:_0x28a0dc,is_anomaly:_0x12b707,threshold:_0x214644,explanation:_0x3b4d5d}=_0xaa8146[_0x1bbee9(0x1c3)];_0x469577[_0x1bbee9(0x1b6)][_0x1bbee9(0x1ad)](_0x1bbee9(0x1c8)+_0x28a0dc['toFixed'](0x5)+_0x1bbee9(0x1d8)+(_0x12b707?'ANOMALY':'OK')),_0x469577[_0x1bbee9(0x1e8)]('analysis.security.lastScore',{'val':_0x28a0dc,'ack':!![]}),_0x469577['setStateAsync'](_0x1bbee9(0x1b1),{'val':new Date()[_0x1bbee9(0x1d5)](),'ack':!![]});if(_0x214644)_0x469577['setStateAsync']('analysis.security.currentThreshold',{'val':_0x214644,'ack':!![]});if(_0x12b707){let _0x1ca83e='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x28a0dc[_0x1bbee9(0x1c1)](0x4)+')';if(_0x3b4d5d&&_0x3b4d5d!=='Unknown')_0x1ca83e+=_0x1bbee9(0x1f2)+_0x3b4d5d;_0x469577['setStateAsync']('analysis.isAlert',{'val':!![],'ack':!![]}),_0x469577[_0x1bbee9(0x1e8)](_0x1bbee9(0x1f1),{'val':_0x1ca83e,'ack':!![]}),setup[_0x1bbee9(0x1ec)](_0x469577,_0x1bbee9(0x1b0)+_0x1ca83e,![],!![]);}}else{if(_0xaa8146[_0x1bbee9(0x1ee)]==='TRAINING_COMPLETE'){const _0x1e0ce8=_0xaa8146[_0x1bbee9(0x1c3)][_0x1bbee9(0x19a)]||'',_0xbef118=_0xaa8146[_0x1bbee9(0x1c3)][_0x1bbee9(0x1c4)],_0x459535=_0xaa8146[_0x1bbee9(0x1c3)][_0x1bbee9(0x1db)]?_0x1bbee9(0x1e1)+new Date()['toLocaleTimeString']()+'\x20('+_0x1e0ce8+')':_0x1bbee9(0x1ba)+_0xaa8146[_0x1bbee9(0x1c3)][_0x1bbee9(0x1d7)];_0x469577['setStateAsync'](_0x1bbee9(0x1cb),{'val':_0x459535,'ack':!![]});if(_0xaa8146[_0x1bbee9(0x1c3)][_0x1bbee9(0x1db)]&&_0xbef118)_0x469577[_0x1bbee9(0x1e8)](_0x1bbee9(0x192),{'val':_0xbef118,'ack':!![]});}else{if(_0xaa8146[_0x1bbee9(0x1ee)]==='COMFORT_RESULT'){const {patterns:_0x575c18}=_0xaa8146['payload'];if(_0x575c18&&_0x575c18[_0x1bbee9(0x1df)]>0x0){_0x469577[_0x1bbee9(0x1b6)]['info'](_0x1bbee9(0x1b4)+_0x575c18['length']+_0x1bbee9(0x1bc)),_0x469577[_0x1bbee9(0x1e8)](_0x1bbee9(0x1ce),{'val':JSON[_0x1bbee9(0x1a5)](_0x575c18),'ack':!![]});const _0x1c87d1=_0x575c18[0x0],_0x49b8e6=_0x1bbee9(0x198)+_0x1c87d1[_0x1bbee9(0x19d)]+'\x20('+(_0x1c87d1[_0x1bbee9(0x19b)]*0x64)[_0x1bbee9(0x1c1)](0x0)+'%)';_0x469577['setStateAsync'](_0x1bbee9(0x1a9),{'val':!![],'ack':!![]}),_0x469577['setStateAsync'](_0x1bbee9(0x1b2),{'val':_0x49b8e6,'ack':!![]});}else _0x469577[_0x1bbee9(0x1b6)]['info']('ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.'),_0x469577[_0x1bbee9(0x1e8)](_0x1bbee9(0x1a9),{'val':![],'ack':!![]}),_0x469577[_0x1bbee9(0x1e8)](_0x1bbee9(0x1ce),{'val':'[]','ack':!![]});}else{if(_0xaa8146['type']===_0x1bbee9(0x1d9)){if(_0xaa8146['payload'][_0x1bbee9(0x1db)])try{const _0x43d509=JSON[_0x1bbee9(0x1ac)](_0xaa8146[_0x1bbee9(0x1c3)][_0x1bbee9(0x19a)]);if(_0x43d509[_0x1bbee9(0x199)])_0x469577['setStateAsync'](_0x1bbee9(0x1b5),{'val':JSON['stringify'](_0x43d509[_0x1bbee9(0x199)]),'ack':!![]});if(_0x43d509[_0x1bbee9(0x1ca)])_0x469577[_0x1bbee9(0x1e8)](_0x1bbee9(0x1f0),{'val':JSON[_0x1bbee9(0x1a5)](_0x43d509['heating']),'ack':!![]});}catch(_0x19ee61){}}else{if(_0xaa8146[_0x1bbee9(0x1ee)]===_0x1bbee9(0x1a1)){if(_0xaa8146[_0x1bbee9(0x1c3)][_0x1bbee9(0x1db)])_0x469577[_0x1bbee9(0x1b6)][_0x1bbee9(0x1ad)](_0x1bbee9(0x196));}else{if(_0xaa8146['type']==='HEALTH_RESULT')_0x469577[_0x1bbee9(0x1e8)](_0x1bbee9(0x195),{'val':new Date()[_0x1bbee9(0x1d5)](),'ack':!![]}),_0x469577['setStateAsync'](_0x1bbee9(0x1a7),{'val':_0xaa8146[_0x1bbee9(0x1c3)][_0x1bbee9(0x1ef)],'ack':!![]});else{if(_0xaa8146['type']==='TREND_RESULT')_0x469577['setStateAsync'](_0x1bbee9(0x1e2),{'val':_0xaa8146[_0x1bbee9(0x1c3)][_0x1bbee9(0x1c7)],'ack':!![]}),_0x469577['setStateAsync'](_0x1bbee9(0x1c9),{'val':_0xaa8146['payload']['change_percent'],'ack':!![]});else{if(_0xaa8146[_0x1bbee9(0x1ee)]===_0x1bbee9(0x1de)){const {speed_trend:_0x34aac7}=_0xaa8146['payload'];if(_0x34aac7!==undefined)_0x469577[_0x1bbee9(0x1e8)](_0x1bbee9(0x1da),{'val':_0x34aac7,'ack':!![]});}else{if(_0xaa8146[_0x1bbee9(0x1ee)]===_0x1bbee9(0x1b3)){const {forecast:_0x43368f}=_0xaa8146['payload'];if(_0x43368f)_0x469577[_0x1bbee9(0x1e8)](_0x1bbee9(0x1be),{'val':JSON[_0x1bbee9(0x1a5)](_0x43368f),'ack':!![]});}else{if(_0xaa8146[_0x1bbee9(0x1ee)]===_0x1bbee9(0x1cc)){const {data:_0x308a76}=_0xaa8146[_0x1bbee9(0x1c3)];_0x308a76&&(_0x469577[_0x1bbee9(0x1b6)][_0x1bbee9(0x1ad)](_0x1bbee9(0x1d6)),_0x469577['setStateAsync'](_0x1bbee9(0x1a6),{'val':JSON['stringify'](_0x308a76),'ack':!![]}));}else{if(_0xaa8146[_0x1bbee9(0x1ee)]===_0x1bbee9(0x1ed))_0x469577[_0x1bbee9(0x1b6)][_0x1bbee9(0x1bb)](_0x1bbee9(0x1e7));else{if(_0xaa8146['type']==='SIGNAL_RESULT'){const {room:_0xdea399,propagation:_0x37faf5}=_0xaa8146['payload'];let _0x5359ee=_0x1bbee9(0x1d0),_0x315129=0x0;if(_0x37faf5){const _0x1ab19=Object[_0x1bbee9(0x1d2)](_0x37faf5);_0x1ab19[_0x1bbee9(0x1df)]>0x0&&(_0x5359ee=_0x1ab19[0x0][0x0],_0x315129=_0x1ab19[0x0][0x1]);}_0x469577[_0x1bbee9(0x1e8)](_0x1bbee9(0x1c5),{'val':_0x5359ee,'ack':!![]}),_0x469577['setStateAsync'](_0x1bbee9(0x1d4),{'val':_0x315129,'ack':!![]}),_0x315129>0.4&&_0x469577[_0x1bbee9(0x1b6)][_0x1bbee9(0x1bb)]('ðŸ”®\x20Prediction:\x20From\x20'+_0xdea399+_0x1bbee9(0x1a8)+_0x5359ee+'\x20('+(_0x315129*0x64)[_0x1bbee9(0x1c1)](0x0)+'%)'),automation[_0x1bbee9(0x1b8)](_0x469577,_0x5359ee,_0x315129);}}}}}}}}}}}}}}function a3_0x26d2(_0x2edee9,_0x2ef646){const _0x423d25=a3_0x2932();return a3_0x26d2=function(_0x141390,_0x43f1bd){_0x141390=_0x141390-0x192;let _0x293213=_0x423d25[_0x141390];return _0x293213;},a3_0x26d2(_0x2edee9,_0x2ef646);}function startService(_0x3a6f1e,_0x4f9486){const _0xdf8839=a3_0x468b49;let _0x257097='python3';if(fs[_0xdf8839(0x193)](_0x4f9486))_0x257097=_0x4f9486;try{const _0x453308=path['join'](__dirname,'..',_0xdf8839(0x1dc),_0xdf8839(0x1e3));pythonProcess=spawn(_0x257097,[_0x453308]),pythonProcess['stdout']['on']('data',_0x29e591=>{const _0x783ad=_0xdf8839,_0x49237c=_0x29e591[_0x783ad(0x1a4)]()[_0x783ad(0x1d3)]('\x0a');_0x49237c['forEach'](_0x444a6d=>{const _0x19217d=_0x783ad,_0x42f8c6=_0x444a6d[_0x19217d(0x1b7)]();if(!_0x42f8c6)return;if(_0x42f8c6[_0x19217d(0x197)](_0x19217d(0x1a2)))_0x3a6f1e[_0x19217d(0x1b6)][_0x19217d(0x1bb)](_0x19217d(0x1ea)+_0x42f8c6['substring'](0x5)['trim']());else{if(_0x42f8c6[_0x19217d(0x197)]('[RESULT]'))try{const _0x2ba668=JSON[_0x19217d(0x1ac)](_0x42f8c6[_0x19217d(0x1e0)](0x8)['trim']());handleResult(_0x3a6f1e,_0x2ba668);}catch(_0x44ed57){}}});}),pythonProcess['on']('close',_0x12efe9=>{pythonProcess=null;}),_0x3a6f1e[_0xdf8839(0x1c6)]=(_0x36719f,_0x338c6f)=>send(_0x3a6f1e,_0x36719f,_0x338c6f);}catch(_0x112cc4){_0x3a6f1e[_0xdf8839(0x1b6)][_0xdf8839(0x1ae)](_0xdf8839(0x1dd)+_0x112cc4[_0xdf8839(0x1e6)]);}}function stopService(_0x2094c5){const _0x2ab60d=a3_0x468b49;if(pythonProcess){try{pythonProcess[_0x2ab60d(0x1c0)]();}catch(_0x4a478c){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};