const a3_0x4c4204=a3_0x468f;(function(_0x5477ba,_0x46b4b0){const _0x3ea40f=a3_0x468f,_0x58601d=_0x5477ba();while(!![]){try{const _0x472103=-parseInt(_0x3ea40f(0x18b))/0x1+-parseInt(_0x3ea40f(0x1a4))/0x2*(-parseInt(_0x3ea40f(0x1b4))/0x3)+parseInt(_0x3ea40f(0x173))/0x4+parseInt(_0x3ea40f(0x185))/0x5*(parseInt(_0x3ea40f(0x16e))/0x6)+-parseInt(_0x3ea40f(0x195))/0x7+parseInt(_0x3ea40f(0x178))/0x8*(-parseInt(_0x3ea40f(0x192))/0x9)+parseInt(_0x3ea40f(0x16f))/0xa;if(_0x472103===_0x46b4b0)break;else _0x58601d['push'](_0x58601d['shift']());}catch(_0x5d7382){_0x58601d['push'](_0x58601d['shift']());}}}(a3_0xda44,0xc3f41));const a3_0xe6a933=(function(){let _0x3064d7=!![];return function(_0xb3c53b,_0x1bc6a8){const _0xf7eff1=_0x3064d7?function(){const _0x102a1c=a3_0x468f;if(_0x1bc6a8){const _0x45bdd4=_0x1bc6a8[_0x102a1c(0x18a)](_0xb3c53b,arguments);return _0x1bc6a8=null,_0x45bdd4;}}:function(){};return _0x3064d7=![],_0xf7eff1;};}()),a3_0x2d4dde=a3_0xe6a933(this,function(){const _0x1169fc=a3_0x468f;return a3_0x2d4dde[_0x1169fc(0x1c3)]()[_0x1169fc(0x166)](_0x1169fc(0x182))['toString']()[_0x1169fc(0x187)](a3_0x2d4dde)['search'](_0x1169fc(0x182));});a3_0x2d4dde();'use strict';const {spawn}=require(a3_0x4c4204(0x16b)),path=require('path'),fs=require('fs'),setup=require(a3_0x4c4204(0x1ac)),automation=require(a3_0x4c4204(0x1aa));let pythonProcess=null;function send(_0x29e418,_0x30d4a0,_0x1238e9={}){const _0x36269e=a3_0x4c4204;if(!pythonProcess||!pythonProcess[_0x36269e(0x1b0)][_0x36269e(0x17d)])return;const _0x4318cf=JSON['stringify']({'command':_0x30d4a0,..._0x1238e9});try{pythonProcess[_0x36269e(0x1b0)][_0x36269e(0x1c7)](_0x4318cf+'\x0a');}catch(_0x380437){}}function handleResult(_0x27f382,_0x2c8712){const _0x32fe7d=a3_0x4c4204;if(_0x2c8712[_0x32fe7d(0x19d)]==='PONG')_0x27f382[_0x32fe7d(0x19e)][_0x32fe7d(0x1a2)](_0x32fe7d(0x17b));else{if(_0x2c8712[_0x32fe7d(0x19d)]===_0x32fe7d(0x1a7)){const {anomaly_score:_0x4ab397,is_anomaly:_0x4703f0,threshold:_0x417759,explanation:_0x379ab2}=_0x2c8712[_0x32fe7d(0x1ad)];_0x27f382[_0x32fe7d(0x19e)][_0x32fe7d(0x1c6)]('üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20'+_0x4ab397[_0x32fe7d(0x16a)](0x5)+_0x32fe7d(0x170)+(_0x4703f0?'ANOMALY':'OK')),_0x27f382['setStateAsync'](_0x32fe7d(0x184),{'val':_0x4ab397,'ack':!![]}),_0x27f382[_0x32fe7d(0x191)](_0x32fe7d(0x174),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x417759)_0x27f382[_0x32fe7d(0x191)](_0x32fe7d(0x196),{'val':_0x417759,'ack':!![]});if(_0x4703f0){let _0x4018e5=_0x32fe7d(0x190)+_0x4ab397[_0x32fe7d(0x16a)](0x4)+')';if(_0x379ab2&&_0x379ab2!==_0x32fe7d(0x189))_0x4018e5+=_0x32fe7d(0x1b5)+_0x379ab2;_0x27f382[_0x32fe7d(0x191)](_0x32fe7d(0x1b3),{'val':!![],'ack':!![]}),_0x27f382[_0x32fe7d(0x191)](_0x32fe7d(0x1a3),{'val':_0x4018e5,'ack':!![]}),setup[_0x32fe7d(0x19c)](_0x27f382,'‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20'+_0x4018e5,![],!![]);}}else{if(_0x2c8712[_0x32fe7d(0x19d)]===_0x32fe7d(0x1b2)){const _0x1a647c=_0x2c8712[_0x32fe7d(0x1ad)][_0x32fe7d(0x19f)]||'',_0x4f6a89=_0x2c8712[_0x32fe7d(0x1ad)][_0x32fe7d(0x1c5)],_0x355b4f=_0x2c8712[_0x32fe7d(0x1ad)][_0x32fe7d(0x193)]?_0x32fe7d(0x1bd)+new Date()[_0x32fe7d(0x17a)]()+'\x20('+_0x1a647c+')':_0x32fe7d(0x18c)+_0x2c8712['payload'][_0x32fe7d(0x197)];_0x27f382[_0x32fe7d(0x191)](_0x32fe7d(0x1a8),{'val':_0x355b4f,'ack':!![]});if(_0x2c8712[_0x32fe7d(0x1ad)][_0x32fe7d(0x193)]&&_0x4f6a89)_0x27f382[_0x32fe7d(0x191)](_0x32fe7d(0x196),{'val':_0x4f6a89,'ack':!![]});}else{if(_0x2c8712[_0x32fe7d(0x19d)]==='COMFORT_RESULT'){const {patterns:_0x35202c}=_0x2c8712[_0x32fe7d(0x1ad)];if(_0x35202c&&_0x35202c[_0x32fe7d(0x18f)]>0x0){_0x27f382['log'][_0x32fe7d(0x1c6)]('üõãÔ∏è\x20BUTLER:\x20Found\x20'+_0x35202c[_0x32fe7d(0x18f)]+_0x32fe7d(0x167)),_0x27f382['setStateAsync'](_0x32fe7d(0x1b8),{'val':JSON['stringify'](_0x35202c),'ack':!![]});const _0x1483c6=_0x35202c[0x0],_0x45c32e=_0x32fe7d(0x177)+_0x1483c6[_0x32fe7d(0x164)]+'\x20('+(_0x1483c6[_0x32fe7d(0x1ab)]*0x64)[_0x32fe7d(0x16a)](0x0)+'%)';_0x27f382[_0x32fe7d(0x191)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x27f382[_0x32fe7d(0x191)](_0x32fe7d(0x181),{'val':_0x45c32e,'ack':!![]});}else _0x27f382[_0x32fe7d(0x19e)][_0x32fe7d(0x1c6)](_0x32fe7d(0x194)),_0x27f382[_0x32fe7d(0x191)](_0x32fe7d(0x179),{'val':![],'ack':!![]}),_0x27f382[_0x32fe7d(0x191)](_0x32fe7d(0x1b8),{'val':'[]','ack':!![]});}else{if(_0x2c8712['type']===_0x32fe7d(0x1c4)){if(_0x2c8712[_0x32fe7d(0x1ad)][_0x32fe7d(0x193)])try{const _0x17102a=JSON[_0x32fe7d(0x16d)](_0x2c8712['payload'][_0x32fe7d(0x19f)]);if(_0x17102a['insulation'])_0x27f382[_0x32fe7d(0x191)](_0x32fe7d(0x18d),{'val':JSON[_0x32fe7d(0x1ba)](_0x17102a['insulation']),'ack':!![]});if(_0x17102a[_0x32fe7d(0x1a6)])_0x27f382['setStateAsync'](_0x32fe7d(0x1b6),{'val':JSON[_0x32fe7d(0x1ba)](_0x17102a[_0x32fe7d(0x1a6)]),'ack':!![]});}catch(_0xa6f8ed){}}else{if(_0x2c8712['type']==='HEALTH_TRAIN_RESULT'){if(_0x2c8712[_0x32fe7d(0x1ad)][_0x32fe7d(0x193)])_0x27f382[_0x32fe7d(0x19e)][_0x32fe7d(0x1c6)](_0x32fe7d(0x1be));}else{if(_0x2c8712['type']===_0x32fe7d(0x1a9))_0x27f382['setStateAsync'](_0x32fe7d(0x1a1),{'val':new Date()[_0x32fe7d(0x1b7)](),'ack':!![]}),_0x27f382[_0x32fe7d(0x191)](_0x32fe7d(0x17c),{'val':_0x2c8712[_0x32fe7d(0x1ad)][_0x32fe7d(0x172)],'ack':!![]});else{if(_0x2c8712['type']==='TREND_RESULT')_0x27f382[_0x32fe7d(0x191)]('analysis.health.trendDiagnosis',{'val':_0x2c8712[_0x32fe7d(0x1ad)][_0x32fe7d(0x199)],'ack':!![]}),_0x27f382[_0x32fe7d(0x191)](_0x32fe7d(0x1bf),{'val':_0x2c8712[_0x32fe7d(0x1ad)]['change_percent'],'ack':!![]});else{if(_0x2c8712['type']===_0x32fe7d(0x163)){const {speed_trend:_0x2f4403}=_0x2c8712[_0x32fe7d(0x1ad)];if(_0x2f4403!==undefined)_0x27f382[_0x32fe7d(0x191)](_0x32fe7d(0x169),{'val':_0x2f4403,'ack':!![]});}else{if(_0x2c8712['type']===_0x32fe7d(0x186)){const {forecast:_0x46a1f8}=_0x2c8712[_0x32fe7d(0x1ad)];if(_0x46a1f8)_0x27f382[_0x32fe7d(0x191)](_0x32fe7d(0x1c0),{'val':JSON[_0x32fe7d(0x1ba)](_0x46a1f8),'ack':!![]});}else{if(_0x2c8712[_0x32fe7d(0x19d)]===_0x32fe7d(0x19b)){const {data:_0x47f223}=_0x2c8712[_0x32fe7d(0x1ad)];_0x47f223&&(_0x27f382[_0x32fe7d(0x19e)]['info'](_0x32fe7d(0x1c1)),_0x27f382[_0x32fe7d(0x191)](_0x32fe7d(0x176),{'val':JSON[_0x32fe7d(0x1ba)](_0x47f223),'ack':!![]}));}else{if(_0x2c8712['type']==='TOPOLOGY_ACK')_0x27f382[_0x32fe7d(0x19e)][_0x32fe7d(0x1a2)](_0x32fe7d(0x18e));else{if(_0x2c8712['type']==='SIGNAL_RESULT'){const {room:_0x3be520,propagation:_0x3bbe8f}=_0x2c8712[_0x32fe7d(0x1ad)];let _0x309374=_0x32fe7d(0x189),_0x1dd197=0x0;if(_0x3bbe8f){const _0x1126df=Object['entries'](_0x3bbe8f);_0x1126df[_0x32fe7d(0x18f)]>0x0&&(_0x309374=_0x1126df[0x0][0x0],_0x1dd197=_0x1126df[0x0][0x1]);}_0x27f382['setStateAsync']('analysis.prediction.nextRoom',{'val':_0x309374,'ack':!![]}),_0x27f382[_0x32fe7d(0x191)](_0x32fe7d(0x1bb),{'val':_0x1dd197,'ack':!![]}),_0x1dd197>0.4&&_0x27f382[_0x32fe7d(0x19e)][_0x32fe7d(0x1a2)](_0x32fe7d(0x1ae)+_0x3be520+_0x32fe7d(0x16c)+_0x309374+'\x20('+(_0x1dd197*0x64)[_0x32fe7d(0x16a)](0x0)+'%)'),automation['handlePrediction'](_0x27f382,_0x309374,_0x1dd197);}}}}}}}}}}}}}}function startService(_0x1c4bde,_0x541d35){const _0x1da7a7=a3_0x4c4204;let _0x352505=_0x1da7a7(0x17e);if(fs[_0x1da7a7(0x1a0)](_0x541d35))_0x352505=_0x541d35;try{const _0x558fc5=path[_0x1da7a7(0x175)](__dirname,'..',_0x1da7a7(0x168),_0x1da7a7(0x180));pythonProcess=spawn(_0x352505,[_0x558fc5]),pythonProcess[_0x1da7a7(0x183)]['on']('data',_0x13068a=>{const _0x27c4f9=_0x1da7a7,_0x471190=_0x13068a[_0x27c4f9(0x1c3)]()[_0x27c4f9(0x1b1)]('\x0a');_0x471190[_0x27c4f9(0x1af)](_0x4403c3=>{const _0x10e63e=_0x27c4f9,_0x1953c2=_0x4403c3[_0x10e63e(0x188)]();if(!_0x1953c2)return;if(_0x1953c2[_0x10e63e(0x198)]('[LOG]'))_0x1c4bde['log'][_0x10e63e(0x1a2)](_0x10e63e(0x1bc)+_0x1953c2[_0x10e63e(0x1c2)](0x5)[_0x10e63e(0x188)]());else{if(_0x1953c2[_0x10e63e(0x198)](_0x10e63e(0x19a)))try{const _0x452f6b=JSON[_0x10e63e(0x16d)](_0x1953c2[_0x10e63e(0x1c2)](0x8)['trim']());handleResult(_0x1c4bde,_0x452f6b);}catch(_0x5289cc){}}});}),pythonProcess['on']('close',_0x17d7a4=>{pythonProcess=null;}),_0x1c4bde[_0x1da7a7(0x165)]=(_0x5e7721,_0x3dc1ec)=>send(_0x1c4bde,_0x5e7721,_0x3dc1ec);}catch(_0x2f13b4){_0x1c4bde[_0x1da7a7(0x19e)][_0x1da7a7(0x17f)]('Error\x20launching\x20Python:\x20'+_0x2f13b4[_0x1da7a7(0x171)]);}}function a3_0x468f(_0x200439,_0x3dd925){const _0x1d0c57=a3_0xda44();return a3_0x468f=function(_0x2d4dde,_0xe6a933){_0x2d4dde=_0x2d4dde-0x163;let _0xda44c8=_0x1d0c57[_0x2d4dde];return _0xda44c8;},a3_0x468f(_0x200439,_0x3dd925);}function stopService(_0x35afdb){const _0x4aa454=a3_0x4c4204;if(pythonProcess){try{pythonProcess[_0x4aa454(0x1b9)]();}catch(_0x56fdbf){}pythonProcess=null;}}function a3_0xda44(){const _0x5f7a58=['[PYTHON]\x20','Success:\x20','‚úÖ\x20HEALTH\x20TRAINED.','analysis.health.trendValue','analysis.energy.forecast','üï∏Ô∏è\x20Topology\x20Map\x20updated\x20by\x20Python.','substring','toString','ENERGY_TRAIN_RESULT','threshold','info','write','GAIT_RESULT','rule','sendToPythonWrapper','search','\x20new\x20patterns.','python_service','analysis.health.gaitSpeed','toFixed','child_process','\x20->\x20Likely\x20','parse','6bJihlo','4735560UlrHjX','\x20->\x20','message','is_anomaly','4379892cVZIro','analysis.security.lastCheck','join','analysis.security.topologyMatrix','Regel\x20erkannt:\x20','24FoghVx','analysis.automation.patternDetected','toLocaleTimeString','üêç\x20Python\x20Pong','analysis.health.isAnomaly','writable','python3','error','service.py','analysis.automation.description','(((.+)+)+)+$','stdout','analysis.security.lastScore','5321705wCKshk','ENERGY_PREDICT_RESULT','constructor','trim','Unknown','apply','948120EiASZW','Failed:\x20','analysis.energy.insulationScore','üêç\x20Python\x20confirmed\x20new\x20topology.','length','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','setStateAsync','2539134JnsrfT','success','üõãÔ∏è\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','1926232PbbWKO','analysis.security.currentThreshold','reason','startsWith','diagnosis','[RESULT]','TOPOLOGY_RESULT','sendNotification','type','log','details','existsSync','analysis.health.lastCheck','debug','analysis.alertReason','478858bZIzgO','exports','heating','SECURITY_RESULT','analysis.training.status','HEALTH_RESULT','./automation','confidence','./setup','payload','üîÆ\x20Prediction:\x20From\x20','forEach','stdin','split','TRAINING_COMPLETE','analysis.isAlert','3EdQCko','\x0aGrund:\x20','analysis.energy.heatingScore','toISOString','analysis.automation.detectedPatterns','kill','stringify','analysis.prediction.confidence'];a3_0xda44=function(){return _0x5f7a58;};return a3_0xda44();}module[a3_0x4c4204(0x1a5)]={'startService':startService,'stopService':stopService,'send':send};