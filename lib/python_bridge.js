const a3_0xeb11bb=a3_0x3cbc;(function(_0x5b9d03,_0x1b6c9b){const _0x4e7add=a3_0x3cbc,_0x40e820=_0x5b9d03();while(!![]){try{const _0x57c5d5=parseInt(_0x4e7add(0x10a))/0x1+parseInt(_0x4e7add(0x122))/0x2+-parseInt(_0x4e7add(0xf7))/0x3+parseInt(_0x4e7add(0x12f))/0x4+-parseInt(_0x4e7add(0xed))/0x5*(parseInt(_0x4e7add(0x111))/0x6)+-parseInt(_0x4e7add(0x11b))/0x7*(parseInt(_0x4e7add(0x148))/0x8)+parseInt(_0x4e7add(0x143))/0x9*(parseInt(_0x4e7add(0x10f))/0xa);if(_0x57c5d5===_0x1b6c9b)break;else _0x40e820['push'](_0x40e820['shift']());}catch(_0x56e409){_0x40e820['push'](_0x40e820['shift']());}}}(a3_0x3506,0x7b1a1));function a3_0x3cbc(_0x33bfac,_0x643534){const _0x38af8e=a3_0x3506();return a3_0x3cbc=function(_0x361a86,_0x430a66){_0x361a86=_0x361a86-0xeb;let _0x350619=_0x38af8e[_0x361a86];return _0x350619;},a3_0x3cbc(_0x33bfac,_0x643534);}const a3_0x430a66=(function(){let _0x2045de=!![];return function(_0x3f4c71,_0x13031d){const _0x42c2fd=_0x2045de?function(){const _0x237119=a3_0x3cbc;if(_0x13031d){const _0x1b1055=_0x13031d[_0x237119(0x109)](_0x3f4c71,arguments);return _0x13031d=null,_0x1b1055;}}:function(){};return _0x2045de=![],_0x42c2fd;};}()),a3_0x361a86=a3_0x430a66(this,function(){const _0x680da=a3_0x3cbc;return a3_0x361a86[_0x680da(0x13f)]()[_0x680da(0x127)](_0x680da(0xf5))[_0x680da(0x13f)]()[_0x680da(0x12c)](a3_0x361a86)[_0x680da(0x127)](_0x680da(0xf5));});function a3_0x3506(){const _0xdca177=['toLocaleTimeString','SIGNAL_RESULT','rule','\x0aGrund:\x20','ANOMALY','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','sendNotification','setStateAsync','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','debug','TOPOLOGY_RESULT','log','[PYTHON]\x20','toString','./setup','analysis.automation.description','./automation','79929XsHbfn','analysis.automation.patternDetected','stringify','join','TRAINING_COMPLETE','6328PtQTrD','analysis.security.topologyMatrix','length','service.py','close','entries','ðŸ\x20Python\x20Pong','205rrBHxm','toFixed','stdin','analysis.health.trendDiagnosis','toISOString','details','writable','trim','(((.+)+)+)+$','child_process','760092ZmPwXb','analysis.automation.detectedPatterns','heating','HEALTH_RESULT','success','exports','python_service','Unknown','analysis.energy.forecast','forEach','existsSync','TREND_RESULT','analysis.health.trendValue','[LOG]','[RESULT]','analysis.energy.heatingScore','COMFORT_RESULT','is_anomaly','apply','116740YQVQDG','reason','ðŸ\x20Python\x20confirmed\x20new\x20topology.','PONG','sendToPythonWrapper','1070EIDBqt','analysis.prediction.confidence','147066ZCHCcY','diagnosis','analysis.alertReason','GAIT_RESULT','ðŸ”®\x20Prediction:\x20From\x20','analysis.isAlert','analysis.security.lastScore','split','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','substring','3409ohIFlE','data','info','parse','insulation','SECURITY_RESULT','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','1076454XceZAP','python3','analysis.health.isAnomaly','Error\x20launching\x20Python:\x20','type','search','\x20->\x20','analysis.security.currentThreshold','TOPOLOGY_ACK','\x20->\x20Likely\x20','constructor','payload','confidence','2170092tCHfga','stdout','analysis.prediction.nextRoom'];a3_0x3506=function(){return _0xdca177;};return a3_0x3506();}a3_0x361a86();'use strict';const {spawn}=require(a3_0xeb11bb(0xf6)),path=require('path'),fs=require('fs'),setup=require(a3_0xeb11bb(0x140)),automation=require(a3_0xeb11bb(0x142));let pythonProcess=null;function send(_0x4eeca3,_0x345663,_0x3594fa={}){const _0x540625=a3_0xeb11bb;if(!pythonProcess||!pythonProcess[_0x540625(0xef)][_0x540625(0xf3)])return;const _0x4fb757=JSON[_0x540625(0x145)]({'command':_0x345663,..._0x3594fa});try{pythonProcess[_0x540625(0xef)]['write'](_0x4fb757+'\x0a');}catch(_0x3e124f){}}function handleResult(_0xd5b621,_0x4805d2){const _0x1f8357=a3_0xeb11bb;if(_0x4805d2[_0x1f8357(0x126)]===_0x1f8357(0x10d))_0xd5b621[_0x1f8357(0x13d)][_0x1f8357(0x13b)](_0x1f8357(0xec));else{if(_0x4805d2[_0x1f8357(0x126)]===_0x1f8357(0x120)){const {anomaly_score:_0x61f74c,is_anomaly:_0x5161e8,threshold:_0x3268eb,explanation:_0x2ea391}=_0x4805d2['payload'];_0xd5b621[_0x1f8357(0x13d)][_0x1f8357(0x11d)](_0x1f8357(0x119)+_0x61f74c[_0x1f8357(0xee)](0x5)+_0x1f8357(0x128)+(_0x5161e8?_0x1f8357(0x136):'OK')),_0xd5b621['setStateAsync'](_0x1f8357(0x117),{'val':_0x61f74c,'ack':!![]}),_0xd5b621[_0x1f8357(0x139)]('analysis.security.lastCheck',{'val':new Date()[_0x1f8357(0xf1)](),'ack':!![]});if(_0x3268eb)_0xd5b621[_0x1f8357(0x139)]('analysis.security.currentThreshold',{'val':_0x3268eb,'ack':!![]});if(_0x5161e8){let _0x37214d=_0x1f8357(0x121)+_0x61f74c[_0x1f8357(0xee)](0x4)+')';if(_0x2ea391&&_0x2ea391!==_0x1f8357(0xfe))_0x37214d+=_0x1f8357(0x135)+_0x2ea391;_0xd5b621[_0x1f8357(0x139)](_0x1f8357(0x116),{'val':!![],'ack':!![]}),_0xd5b621[_0x1f8357(0x139)](_0x1f8357(0x113),{'val':_0x37214d,'ack':!![]}),setup[_0x1f8357(0x138)](_0xd5b621,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x37214d,![],!![]);}}else{if(_0x4805d2[_0x1f8357(0x126)]===_0x1f8357(0x147)){const _0xdc9a65=_0x4805d2[_0x1f8357(0x12d)]['details']||'',_0x3186b0=_0x4805d2['payload']['threshold'],_0x2af8d2=_0x4805d2[_0x1f8357(0x12d)][_0x1f8357(0xfb)]?'Success:\x20'+new Date()[_0x1f8357(0x132)]()+'\x20('+_0xdc9a65+')':'Failed:\x20'+_0x4805d2[_0x1f8357(0x12d)][_0x1f8357(0x10b)];_0xd5b621['setStateAsync']('analysis.training.status',{'val':_0x2af8d2,'ack':!![]});if(_0x4805d2['payload'][_0x1f8357(0xfb)]&&_0x3186b0)_0xd5b621[_0x1f8357(0x139)](_0x1f8357(0x129),{'val':_0x3186b0,'ack':!![]});}else{if(_0x4805d2[_0x1f8357(0x126)]===_0x1f8357(0x107)){const {patterns:_0x19c13f}=_0x4805d2[_0x1f8357(0x12d)];if(_0x19c13f&&_0x19c13f[_0x1f8357(0x14a)]>0x0){_0xd5b621['log'][_0x1f8357(0x11d)](_0x1f8357(0x13a)+_0x19c13f[_0x1f8357(0x14a)]+'\x20new\x20patterns.'),_0xd5b621[_0x1f8357(0x139)](_0x1f8357(0xf8),{'val':JSON[_0x1f8357(0x145)](_0x19c13f),'ack':!![]});const _0x43b98b=_0x19c13f[0x0],_0x306499='Regel\x20erkannt:\x20'+_0x43b98b[_0x1f8357(0x134)]+'\x20('+(_0x43b98b[_0x1f8357(0x12e)]*0x64)['toFixed'](0x0)+'%)';_0xd5b621[_0x1f8357(0x139)](_0x1f8357(0x144),{'val':!![],'ack':!![]}),_0xd5b621[_0x1f8357(0x139)](_0x1f8357(0x141),{'val':_0x306499,'ack':!![]});}else _0xd5b621[_0x1f8357(0x13d)][_0x1f8357(0x11d)](_0x1f8357(0x137)),_0xd5b621['setStateAsync'](_0x1f8357(0x144),{'val':![],'ack':!![]}),_0xd5b621[_0x1f8357(0x139)]('analysis.automation.detectedPatterns',{'val':'[]','ack':!![]});}else{if(_0x4805d2[_0x1f8357(0x126)]==='ENERGY_TRAIN_RESULT'){if(_0x4805d2[_0x1f8357(0x12d)][_0x1f8357(0xfb)])try{const _0x470f5d=JSON[_0x1f8357(0x11e)](_0x4805d2[_0x1f8357(0x12d)][_0x1f8357(0xf2)]);if(_0x470f5d[_0x1f8357(0x11f)])_0xd5b621[_0x1f8357(0x139)]('analysis.energy.insulationScore',{'val':JSON[_0x1f8357(0x145)](_0x470f5d[_0x1f8357(0x11f)]),'ack':!![]});if(_0x470f5d[_0x1f8357(0xf9)])_0xd5b621[_0x1f8357(0x139)](_0x1f8357(0x106),{'val':JSON[_0x1f8357(0x145)](_0x470f5d[_0x1f8357(0xf9)]),'ack':!![]});}catch(_0x50ccdd){}}else{if(_0x4805d2[_0x1f8357(0x126)]==='HEALTH_TRAIN_RESULT'){if(_0x4805d2[_0x1f8357(0x12d)][_0x1f8357(0xfb)])_0xd5b621[_0x1f8357(0x13d)][_0x1f8357(0x11d)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x4805d2[_0x1f8357(0x126)]===_0x1f8357(0xfa))_0xd5b621[_0x1f8357(0x139)]('analysis.health.lastCheck',{'val':new Date()[_0x1f8357(0xf1)](),'ack':!![]}),_0xd5b621['setStateAsync'](_0x1f8357(0x124),{'val':_0x4805d2['payload'][_0x1f8357(0x108)],'ack':!![]});else{if(_0x4805d2[_0x1f8357(0x126)]===_0x1f8357(0x102))_0xd5b621[_0x1f8357(0x139)](_0x1f8357(0xf0),{'val':_0x4805d2[_0x1f8357(0x12d)][_0x1f8357(0x112)],'ack':!![]}),_0xd5b621[_0x1f8357(0x139)](_0x1f8357(0x103),{'val':_0x4805d2['payload']['change_percent'],'ack':!![]});else{if(_0x4805d2[_0x1f8357(0x126)]===_0x1f8357(0x114)){const {speed_trend:_0xadf116}=_0x4805d2[_0x1f8357(0x12d)];if(_0xadf116!==undefined)_0xd5b621[_0x1f8357(0x139)]('analysis.health.gaitSpeed',{'val':_0xadf116,'ack':!![]});}else{if(_0x4805d2[_0x1f8357(0x126)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x5f4478}=_0x4805d2[_0x1f8357(0x12d)];if(_0x5f4478)_0xd5b621['setStateAsync'](_0x1f8357(0xff),{'val':JSON[_0x1f8357(0x145)](_0x5f4478),'ack':!![]});}else{if(_0x4805d2[_0x1f8357(0x126)]===_0x1f8357(0x13c)){const {data:_0x532eb6}=_0x4805d2[_0x1f8357(0x12d)];_0x532eb6&&(_0xd5b621[_0x1f8357(0x13d)][_0x1f8357(0x11d)]('ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.'),_0xd5b621[_0x1f8357(0x139)](_0x1f8357(0x149),{'val':JSON[_0x1f8357(0x145)](_0x532eb6),'ack':!![]}));}else{if(_0x4805d2[_0x1f8357(0x126)]===_0x1f8357(0x12a))_0xd5b621[_0x1f8357(0x13d)]['debug'](_0x1f8357(0x10c));else{if(_0x4805d2[_0x1f8357(0x126)]===_0x1f8357(0x133)){const {room:_0x2f3010,propagation:_0x13c39e}=_0x4805d2[_0x1f8357(0x12d)];let _0x4b839c=_0x1f8357(0xfe),_0x33d673=0x0;if(_0x13c39e){const _0x10e932=Object[_0x1f8357(0xeb)](_0x13c39e);_0x10e932[_0x1f8357(0x14a)]>0x0&&(_0x4b839c=_0x10e932[0x0][0x0],_0x33d673=_0x10e932[0x0][0x1]);}_0xd5b621[_0x1f8357(0x139)](_0x1f8357(0x131),{'val':_0x4b839c,'ack':!![]}),_0xd5b621[_0x1f8357(0x139)](_0x1f8357(0x110),{'val':_0x33d673,'ack':!![]}),_0x33d673>0.4&&_0xd5b621[_0x1f8357(0x13d)][_0x1f8357(0x13b)](_0x1f8357(0x115)+_0x2f3010+_0x1f8357(0x12b)+_0x4b839c+'\x20('+(_0x33d673*0x64)[_0x1f8357(0xee)](0x0)+'%)'),automation['handlePrediction'](_0xd5b621,_0x4b839c,_0x33d673);}}}}}}}}}}}}}}function startService(_0x284a8b,_0xf762ea){const _0x20a58e=a3_0xeb11bb;let _0xc2a337=_0x20a58e(0x123);if(fs[_0x20a58e(0x101)](_0xf762ea))_0xc2a337=_0xf762ea;try{const _0x39c9c0=path[_0x20a58e(0x146)](__dirname,'..',_0x20a58e(0xfd),_0x20a58e(0x14b));pythonProcess=spawn(_0xc2a337,[_0x39c9c0]),pythonProcess[_0x20a58e(0x130)]['on'](_0x20a58e(0x11c),_0x37dd76=>{const _0x413366=_0x20a58e,_0x55dba0=_0x37dd76[_0x413366(0x13f)]()[_0x413366(0x118)]('\x0a');_0x55dba0[_0x413366(0x100)](_0x509e93=>{const _0x557243=_0x413366,_0x333d0b=_0x509e93[_0x557243(0xf4)]();if(!_0x333d0b)return;if(_0x333d0b['startsWith'](_0x557243(0x104)))_0x284a8b[_0x557243(0x13d)][_0x557243(0x13b)](_0x557243(0x13e)+_0x333d0b[_0x557243(0x11a)](0x5)['trim']());else{if(_0x333d0b['startsWith'](_0x557243(0x105)))try{const _0x5b216b=JSON[_0x557243(0x11e)](_0x333d0b[_0x557243(0x11a)](0x8)[_0x557243(0xf4)]());handleResult(_0x284a8b,_0x5b216b);}catch(_0x52be0b){}}});}),pythonProcess['on'](_0x20a58e(0x14c),_0x4333dc=>{pythonProcess=null;}),_0x284a8b[_0x20a58e(0x10e)]=(_0x20d7c8,_0x2f9f58)=>send(_0x284a8b,_0x20d7c8,_0x2f9f58);}catch(_0x8e106c){_0x284a8b['log']['error'](_0x20a58e(0x125)+_0x8e106c['message']);}}function stopService(_0x2a3abf){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x3c72d0){}pythonProcess=null;}}module[a3_0xeb11bb(0xfc)]={'startService':startService,'stopService':stopService,'send':send};