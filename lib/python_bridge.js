const a4_0x361352=a4_0x3552;(function(_0x2068d0,_0x1dc209){const _0x12c3e2=a4_0x3552,_0x4d664a=_0x2068d0();while(!![]){try{const _0x5b821f=-parseInt(_0x12c3e2(0x1bf))/0x1*(parseInt(_0x12c3e2(0x1cf))/0x2)+-parseInt(_0x12c3e2(0x19c))/0x3*(parseInt(_0x12c3e2(0x1a6))/0x4)+-parseInt(_0x12c3e2(0x1b4))/0x5*(parseInt(_0x12c3e2(0x1a2))/0x6)+parseInt(_0x12c3e2(0x1a8))/0x7+parseInt(_0x12c3e2(0x183))/0x8+-parseInt(_0x12c3e2(0x1ba))/0x9+parseInt(_0x12c3e2(0x191))/0xa*(parseInt(_0x12c3e2(0x178))/0xb);if(_0x5b821f===_0x1dc209)break;else _0x4d664a['push'](_0x4d664a['shift']());}catch(_0x58be5b){_0x4d664a['push'](_0x4d664a['shift']());}}}(a4_0x1bb5,0x3f305));const a4_0x3e60cb=(function(){let _0x3cc885=!![];return function(_0xce5e4e,_0x1458ca){const _0x7b29ab=_0x3cc885?function(){const _0x4b23fb=a4_0x3552;if(_0x1458ca){const _0x2a9a62=_0x1458ca[_0x4b23fb(0x1ae)](_0xce5e4e,arguments);return _0x1458ca=null,_0x2a9a62;}}:function(){};return _0x3cc885=![],_0x7b29ab;};}()),a4_0x275aea=a4_0x3e60cb(this,function(){const _0x16a3c6=a4_0x3552;return a4_0x275aea[_0x16a3c6(0x182)]()[_0x16a3c6(0x1a0)](_0x16a3c6(0x19e))[_0x16a3c6(0x182)]()['constructor'](a4_0x275aea)[_0x16a3c6(0x1a0)]('(((.+)+)+)+$');});function a4_0x3552(_0x3e2335,_0x5a1286){const _0x569cdb=a4_0x1bb5();return a4_0x3552=function(_0x275aea,_0x3e60cb){_0x275aea=_0x275aea-0x177;let _0x1bb5b9=_0x569cdb[_0x275aea];return _0x1bb5b9;},a4_0x3552(_0x3e2335,_0x5a1286);}a4_0x275aea();'use strict';const {spawn}=require('child_process'),path=require(a4_0x361352(0x1b8)),fs=require('fs'),setup=require(a4_0x361352(0x1c9)),automation=require(a4_0x361352(0x1ab));let pythonProcess=null;function send(_0x2a860c,_0x35307f,_0x47afda={}){const _0x4f0c0d=a4_0x361352;if(!pythonProcess||!pythonProcess[_0x4f0c0d(0x1a4)][_0x4f0c0d(0x1b9)])return;const _0x563f3c=JSON[_0x4f0c0d(0x189)]({'command':_0x35307f,..._0x47afda});try{pythonProcess[_0x4f0c0d(0x1a4)][_0x4f0c0d(0x186)](_0x563f3c+'\x0a');}catch(_0xcb5842){}}function handleResult(_0x39e556,_0x523a9b){const _0x18788f=a4_0x361352;if(_0x523a9b[_0x18788f(0x1a7)]===_0x18788f(0x17f))_0x39e556[_0x18788f(0x1b1)][_0x18788f(0x185)]('ðŸ\x20Python\x20Pong');else{if(_0x523a9b[_0x18788f(0x1a7)]===_0x18788f(0x18f)){const {anomaly_score:_0x4a5e0c,is_anomaly:_0x13496f,threshold:_0x2a1e65,explanation:_0x19662b}=_0x523a9b[_0x18788f(0x1c2)];_0x39e556[_0x18788f(0x1a3)](_0x18788f(0x1ac),{'val':_0x4a5e0c,'ack':!![]}),_0x39e556[_0x18788f(0x1a3)](_0x18788f(0x1c8),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x2a1e65)_0x39e556[_0x18788f(0x1a3)](_0x18788f(0x188),{'val':_0x2a1e65,'ack':!![]});if(_0x13496f){let _0x2103ab=_0x18788f(0x19a)+_0x4a5e0c[_0x18788f(0x1cc)](0x4)+')';if(_0x19662b&&_0x19662b!==_0x18788f(0x199))_0x2103ab+='\x0aGrund:\x20'+_0x19662b;_0x39e556[_0x18788f(0x1a3)](_0x18788f(0x197),{'val':!![],'ack':!![]}),_0x39e556[_0x18788f(0x1a3)]('analysis.alertReason',{'val':_0x2103ab,'ack':!![]}),setup[_0x18788f(0x196)](_0x39e556,_0x18788f(0x1d0)+_0x2103ab,![],!![]);}}else{if(_0x523a9b['type']==='TRAINING_COMPLETE'){const _0x3ac02f=_0x523a9b[_0x18788f(0x1c2)]['details']||'',_0x4bc862=_0x523a9b[_0x18788f(0x1c2)]['threshold'],_0x5a2f41=_0x523a9b['payload']['success']?_0x18788f(0x1bb)+new Date()[_0x18788f(0x1ce)]()+'\x20('+_0x3ac02f+')':_0x18788f(0x194)+_0x523a9b[_0x18788f(0x1c2)]['reason'];_0x39e556[_0x18788f(0x1a3)](_0x18788f(0x1c0),{'val':_0x5a2f41,'ack':!![]});if(_0x523a9b[_0x18788f(0x1c2)][_0x18788f(0x1b3)]&&_0x4bc862)_0x39e556[_0x18788f(0x1a3)](_0x18788f(0x188),{'val':_0x4bc862,'ack':!![]});}else{if(_0x523a9b[_0x18788f(0x1a7)]===_0x18788f(0x1b5)){if(_0x523a9b[_0x18788f(0x1c2)]['success'])try{const _0x502a69=JSON[_0x18788f(0x1c6)](_0x523a9b[_0x18788f(0x1c2)][_0x18788f(0x184)]);if(_0x502a69[_0x18788f(0x190)])_0x39e556[_0x18788f(0x1a3)](_0x18788f(0x187),{'val':JSON[_0x18788f(0x189)](_0x502a69['insulation']),'ack':!![]});if(_0x502a69[_0x18788f(0x1bc)])_0x39e556[_0x18788f(0x1a3)](_0x18788f(0x19f),{'val':JSON[_0x18788f(0x189)](_0x502a69['heating']),'ack':!![]});}catch(_0x578e3d){}}else{if(_0x523a9b['type']===_0x18788f(0x17c)){if(_0x523a9b[_0x18788f(0x1c2)][_0x18788f(0x1b3)])_0x39e556['log'][_0x18788f(0x17a)](_0x18788f(0x177));}else{if(_0x523a9b[_0x18788f(0x1a7)]===_0x18788f(0x1c7))_0x39e556[_0x18788f(0x1a3)](_0x18788f(0x1b0),{'val':new Date()[_0x18788f(0x1b7)](),'ack':!![]}),_0x39e556['setStateAsync'](_0x18788f(0x1b6),{'val':_0x523a9b[_0x18788f(0x1c2)][_0x18788f(0x1b2)],'ack':!![]});else{if(_0x523a9b[_0x18788f(0x1a7)]===_0x18788f(0x18b)){const {speed_trend:_0x591740}=_0x523a9b[_0x18788f(0x1c2)];if(_0x591740!==undefined)_0x39e556[_0x18788f(0x1a3)](_0x18788f(0x1cb),{'val':_0x591740,'ack':!![]});}else{if(_0x523a9b['type']===_0x18788f(0x179)){const {forecast:_0x460bb0}=_0x523a9b[_0x18788f(0x1c2)];if(_0x460bb0)_0x39e556[_0x18788f(0x1a3)](_0x18788f(0x193),{'val':JSON[_0x18788f(0x189)](_0x460bb0),'ack':!![]});}else{if(_0x523a9b[_0x18788f(0x1a7)]==='PINN_PREDICT_RESULT'){const {forecast:_0x4775f6}=_0x523a9b[_0x18788f(0x1c2)];if(_0x4775f6)_0x39e556[_0x18788f(0x1a3)](_0x18788f(0x1c4),{'val':JSON[_0x18788f(0x189)](_0x4775f6),'ack':!![]});}else{if(_0x523a9b['type']===_0x18788f(0x1bd)){const {proposals:_0x32c3fb}=_0x523a9b[_0x18788f(0x1c2)];_0x39e556['getState'](_0x18788f(0x17e),(_0x37d5f0,_0x1d743f)=>{const _0x11da95=_0x18788f;_0x1d743f&&_0x1d743f[_0x11da95(0x1a1)]===!![]&&_0x32c3fb&&_0x32c3fb[_0x11da95(0x1cd)]>0x0&&automation[_0x11da95(0x19b)](_0x39e556,_0x32c3fb);});}else{if(_0x523a9b[_0x18788f(0x1a7)]===_0x18788f(0x19d)){const {room:_0x3ffa84,propagation:_0xc8e9de}=_0x523a9b['payload'];let _0x119f21=_0x18788f(0x199),_0x3a8d66=0x0;if(_0xc8e9de){const _0x59ccbc=Object[_0x18788f(0x195)](_0xc8e9de);_0x59ccbc[_0x18788f(0x1cd)]>0x0&&(_0x119f21=_0x59ccbc[0x0][0x0],_0x3a8d66=_0x59ccbc[0x0][0x1]);}_0x39e556['setStateAsync'](_0x18788f(0x1a9),{'val':_0x119f21,'ack':!![]}),_0x39e556[_0x18788f(0x1a3)](_0x18788f(0x17d),{'val':_0x3a8d66,'ack':!![]}),automation[_0x18788f(0x198)](_0x39e556,_0x119f21,_0x3a8d66);}else{if(_0x523a9b[_0x18788f(0x1a7)]===_0x18788f(0x1a5)){const {patterns:_0x317b57}=_0x523a9b[_0x18788f(0x1c2)];if(_0x317b57&&_0x317b57[_0x18788f(0x1cd)]>0x0)_0x39e556[_0x18788f(0x1a3)](_0x18788f(0x18e),{'val':JSON['stringify'](_0x317b57),'ack':!![]});}}}}}}}}}}}}}function a4_0x1bb5(){const _0x22c62d=['analysis.automation.detectedPatterns','SECURITY_RESULT','insulation','4080ePTKCt','python_service','analysis.energy.forecast','Failed:\x20','entries','sendNotification','analysis.isAlert','handlePrediction','Unknown','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','applyEnergySavings','3813wTIASg','SIGNAL_RESULT','(((.+)+)+)+$','analysis.energy.heatingScore','search','val','2722242qnjfjC','setStateAsync','stdin','COMFORT_RESULT','1412AqnOGJ','type','518672PakWlY','analysis.prediction.nextRoom','exports','./automation','analysis.security.lastScore','message','apply','substring','analysis.health.lastCheck','log','is_anomaly','success','5QHLPGQ','ENERGY_TRAIN_RESULT','analysis.health.isAnomaly','toISOString','path','writable','4303674cxOsdG','Success:\x20','heating','ENERGY_OPTIMIZE_RESULT','kill','13202JCxhdW','analysis.training.status','forEach','payload','sendToPythonWrapper','analysis.energy.pinnForecast','stdout','parse','HEALTH_RESULT','analysis.security.lastCheck','./setup','trim','analysis.health.gaitSpeed','toFixed','length','toLocaleTimeString','22ElhGgd','âš ï¸\x20SECURITY\x20ALARM:\x20','error','âœ…\x20HEALTH\x20TRAINED.','45727UZMvOg','ENERGY_PREDICT_RESULT','info','join','HEALTH_TRAIN_RESULT','analysis.prediction.confidence','analysis.energy.mpcActive','PONG','[LOG]','existsSync','toString','115576gbSDKd','details','debug','write','analysis.energy.insulationScore','analysis.security.currentThreshold','stringify','[RESULT]','GAIT_RESULT','service.py','startsWith'];a4_0x1bb5=function(){return _0x22c62d;};return a4_0x1bb5();}function startService(_0x2f4b53,_0x147f47){const _0x593755=a4_0x361352;let _0x5dcee3='python3';if(fs[_0x593755(0x181)](_0x147f47))_0x5dcee3=_0x147f47;try{const _0x3fd140=path[_0x593755(0x17b)](__dirname,'..',_0x593755(0x192),_0x593755(0x18c));pythonProcess=spawn(_0x5dcee3,[_0x3fd140]),pythonProcess[_0x593755(0x1c5)]['on']('data',_0x3a03f8=>{const _0xa43295=_0x593755,_0x11e179=_0x3a03f8['toString']()['split']('\x0a');_0x11e179[_0xa43295(0x1c1)](_0x141871=>{const _0x53fc5e=_0xa43295,_0x253244=_0x141871[_0x53fc5e(0x1ca)]();if(!_0x253244)return;if(_0x253244[_0x53fc5e(0x18d)](_0x53fc5e(0x180)))_0x2f4b53[_0x53fc5e(0x1b1)][_0x53fc5e(0x185)]('[PYTHON]\x20'+_0x253244[_0x53fc5e(0x1af)](0x5)[_0x53fc5e(0x1ca)]());else{if(_0x253244[_0x53fc5e(0x18d)](_0x53fc5e(0x18a)))try{const _0x4a9277=JSON['parse'](_0x253244[_0x53fc5e(0x1af)](0x8)[_0x53fc5e(0x1ca)]());handleResult(_0x2f4b53,_0x4a9277);}catch(_0x365d14){}}});}),pythonProcess['on']('close',_0x38d530=>{pythonProcess=null;}),_0x2f4b53[_0x593755(0x1c3)]=(_0x42b7ec,_0x17e01b)=>send(_0x2f4b53,_0x42b7ec,_0x17e01b);}catch(_0x5e7937){_0x2f4b53['log'][_0x593755(0x1d1)]('Error\x20launching\x20Python:\x20'+_0x5e7937[_0x593755(0x1ad)]);}}function stopService(_0x3f57c2){const _0xd3c41=a4_0x361352;if(pythonProcess){try{pythonProcess[_0xd3c41(0x1be)]();}catch(_0x79ff21){}pythonProcess=null;}}module[a4_0x361352(0x1aa)]={'startService':startService,'stopService':stopService,'send':send};