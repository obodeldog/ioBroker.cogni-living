const a4_0x54346d=a4_0x57c5;(function(_0xeb6e30,_0x13e98d){const _0x17c604=a4_0x57c5,_0x31610e=_0xeb6e30();while(!![]){try{const _0x102bde=parseInt(_0x17c604(0x1bd))/0x1*(-parseInt(_0x17c604(0x1b7))/0x2)+-parseInt(_0x17c604(0x211))/0x3+-parseInt(_0x17c604(0x1f8))/0x4+-parseInt(_0x17c604(0x1f5))/0x5+-parseInt(_0x17c604(0x209))/0x6*(parseInt(_0x17c604(0x1cc))/0x7)+-parseInt(_0x17c604(0x1ba))/0x8*(-parseInt(_0x17c604(0x1c3))/0x9)+-parseInt(_0x17c604(0x202))/0xa*(-parseInt(_0x17c604(0x1e7))/0xb);if(_0x102bde===_0x13e98d)break;else _0x31610e['push'](_0x31610e['shift']());}catch(_0xe9e744){_0x31610e['push'](_0x31610e['shift']());}}}(a4_0x22e1,0x89829));const a4_0x57478a=(function(){let _0x43807d=!![];return function(_0x12f91c,_0x577c9b){const _0x3c37de=_0x43807d?function(){const _0x372fe8=a4_0x57c5;if(_0x577c9b){const _0x354c76=_0x577c9b[_0x372fe8(0x1e1)](_0x12f91c,arguments);return _0x577c9b=null,_0x354c76;}}:function(){};return _0x43807d=![],_0x3c37de;};}()),a4_0x449822=a4_0x57478a(this,function(){const _0x16a673=a4_0x57c5;return a4_0x449822[_0x16a673(0x20a)]()['search'](_0x16a673(0x201))[_0x16a673(0x20a)]()[_0x16a673(0x1b5)](a4_0x449822)[_0x16a673(0x203)]('(((.+)+)+)+$');});a4_0x449822();'use strict';const {spawn}=require('child_process'),path=require(a4_0x54346d(0x1da)),fs=require('fs'),setup=require(a4_0x54346d(0x207)),automation=require('./automation');function a4_0x57c5(_0x58ab58,_0x4391ba){const _0x2e59d1=a4_0x22e1();return a4_0x57c5=function(_0x449822,_0x57478a){_0x449822=_0x449822-0x1b4;let _0x22e1b2=_0x2e59d1[_0x449822];return _0x22e1b2;},a4_0x57c5(_0x58ab58,_0x4391ba);}let pythonProcess=null;function a4_0x22e1(){const _0x4e8019=['âœ…\x20HEALTH\x20TRAINED.','9kEFKVx','analysis.isAlert','service.py','TRACKER_RESULT','python_service','Unknown','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','success','substring','6356KGwneq','python3','insulation','WARMUP_RESULT','details','Failed:\x20','analysis.automation.detectedPatterns','message','applyEnergySavings','threshold','error','handlePrediction','log','payload','path','startsWith','ENERGY_PREDICT_RESULT','analysis.energy.warmupSources','TRAINING_COMPLETE','analysis.energy.forecast','analysis.energy.warmupDetails','apply','analysis.security.currentThreshold','ENERGY_TRAIN_RESULT','HEALTH_TRAIN_RESULT','setStateAsync','stringify','993454Ijucoa','join','toFixed','ENERGY_OPTIMIZE_RESULT','writable','[RESULT]','HEALTH_RESULT','âš ï¸\x20SECURITY\x20ALARM:\x20','length','entries','analysis.prediction.nextRoom','analysis.health.lastCheck','PONG','sendNotification','565265BjiVtw','analysis.training.status','analysis.energy.heatingScore','26104HlTtek','analysis.prediction.trackerConfidence','info','heating','trim','existsSync','analysis.energy.ventilationAlerts','analysis.prediction.trackerTopRoom','data','(((.+)+)+)+$','160pZBioL','search','analysis.security.lastCheck','reason','GAIT_RESULT','./setup','split','5436ChEagk','toString','stdin','parse','forEach','Success:\x20','VENTILATION_ALERT','analysis.energy.insulationScore','1833471gsnWpr','toISOString','Error\x20launching\x20Python:\x20','kill','ðŸ\x20Python\x20Pong','analysis.prediction.confidence','constructor','debug','2OCHoEo','SECURITY_RESULT','is_anomaly','6626136nieLmC','analysis.energy.warmupTimes','analysis.health.isAnomaly','156666rCUTgt','type','write','[PYTHON]\x20','val'];a4_0x22e1=function(){return _0x4e8019;};return a4_0x22e1();}function send(_0x192711,_0x55661e,_0x2fcfcc={}){const _0x11e96b=a4_0x54346d;if(!pythonProcess||!pythonProcess[_0x11e96b(0x20b)][_0x11e96b(0x1eb)])return;const _0x5b2373=JSON[_0x11e96b(0x1e6)]({'command':_0x55661e,..._0x2fcfcc});try{pythonProcess['stdin'][_0x11e96b(0x1bf)](_0x5b2373+'\x0a');}catch(_0x371e3c){}}function handleResult(_0x3806c2,_0x451c1d){const _0x391f41=a4_0x54346d;if(_0x451c1d[_0x391f41(0x1be)]===_0x391f41(0x1f3))_0x3806c2[_0x391f41(0x1d8)][_0x391f41(0x1b6)](_0x391f41(0x215));else{if(_0x451c1d['type']===_0x391f41(0x1b8)){const {anomaly_score:_0x4b2c26,is_anomaly:_0x26eab3,threshold:_0x1db5d2,explanation:_0xb5ff0}=_0x451c1d[_0x391f41(0x1d9)];_0x3806c2['setStateAsync']('analysis.security.lastScore',{'val':_0x4b2c26,'ack':!![]}),_0x3806c2[_0x391f41(0x1e5)](_0x391f41(0x204),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x1db5d2)_0x3806c2['setStateAsync'](_0x391f41(0x1e2),{'val':_0x1db5d2,'ack':!![]});if(_0x26eab3){let _0x594463=_0x391f41(0x1c9)+_0x4b2c26[_0x391f41(0x1e9)](0x4)+')';if(_0xb5ff0&&_0xb5ff0!==_0x391f41(0x1c8))_0x594463+='\x0aGrund:\x20'+_0xb5ff0;_0x3806c2[_0x391f41(0x1e5)](_0x391f41(0x1c4),{'val':!![],'ack':!![]}),_0x3806c2[_0x391f41(0x1e5)]('analysis.alertReason',{'val':_0x594463,'ack':!![]}),setup[_0x391f41(0x1f4)](_0x3806c2,_0x391f41(0x1ee)+_0x594463,![],!![]);}}else{if(_0x451c1d['type']===_0x391f41(0x1de)){const _0xe7df17=_0x451c1d[_0x391f41(0x1d9)][_0x391f41(0x1d0)]||'',_0x50e28b=_0x451c1d[_0x391f41(0x1d9)][_0x391f41(0x1d5)],_0x2fe04a=_0x451c1d['payload'][_0x391f41(0x1ca)]?_0x391f41(0x20e)+new Date()['toLocaleTimeString']()+'\x20('+_0xe7df17+')':_0x391f41(0x1d1)+_0x451c1d[_0x391f41(0x1d9)][_0x391f41(0x205)];_0x3806c2[_0x391f41(0x1e5)](_0x391f41(0x1f6),{'val':_0x2fe04a,'ack':!![]});if(_0x451c1d['payload'][_0x391f41(0x1ca)]&&_0x50e28b)_0x3806c2[_0x391f41(0x1e5)](_0x391f41(0x1e2),{'val':_0x50e28b,'ack':!![]});}else{if(_0x451c1d[_0x391f41(0x1be)]===_0x391f41(0x1e3)){if(_0x451c1d[_0x391f41(0x1d9)]['success'])try{const _0x29abdc=JSON[_0x391f41(0x20c)](_0x451c1d[_0x391f41(0x1d9)][_0x391f41(0x1d0)]);if(_0x29abdc[_0x391f41(0x1ce)])_0x3806c2[_0x391f41(0x1e5)](_0x391f41(0x210),{'val':JSON[_0x391f41(0x1e6)](_0x29abdc[_0x391f41(0x1ce)]),'ack':!![]});if(_0x29abdc[_0x391f41(0x1fb)])_0x3806c2[_0x391f41(0x1e5)](_0x391f41(0x1f7),{'val':JSON[_0x391f41(0x1e6)](_0x29abdc[_0x391f41(0x1fb)]),'ack':!![]});}catch(_0x22e2ee){}}else{if(_0x451c1d['type']===_0x391f41(0x1e4)){if(_0x451c1d[_0x391f41(0x1d9)][_0x391f41(0x1ca)])_0x3806c2[_0x391f41(0x1d8)][_0x391f41(0x1fa)](_0x391f41(0x1c2));}else{if(_0x451c1d[_0x391f41(0x1be)]===_0x391f41(0x1ed))_0x3806c2[_0x391f41(0x1e5)](_0x391f41(0x1f2),{'val':new Date()[_0x391f41(0x212)](),'ack':!![]}),_0x3806c2[_0x391f41(0x1e5)](_0x391f41(0x1bc),{'val':_0x451c1d[_0x391f41(0x1d9)][_0x391f41(0x1b9)],'ack':!![]});else{if(_0x451c1d[_0x391f41(0x1be)]===_0x391f41(0x206)){const {speed_trend:_0x140bee}=_0x451c1d['payload'];if(_0x140bee!==undefined)_0x3806c2[_0x391f41(0x1e5)]('analysis.health.gaitSpeed',{'val':_0x140bee,'ack':!![]});}else{if(_0x451c1d[_0x391f41(0x1be)]===_0x391f41(0x1dc)){const {forecast:_0xf29858}=_0x451c1d[_0x391f41(0x1d9)];if(_0xf29858)_0x3806c2[_0x391f41(0x1e5)](_0x391f41(0x1df),{'val':JSON[_0x391f41(0x1e6)](_0xf29858),'ack':!![]});}else{if(_0x451c1d['type']===_0x391f41(0x1cf)){const {times:_0x5c93eb,sources:_0x1f00ad,details:_0xa77eba}=_0x451c1d[_0x391f41(0x1d9)];if(_0x5c93eb)_0x3806c2[_0x391f41(0x1e5)](_0x391f41(0x1bb),{'val':JSON[_0x391f41(0x1e6)](_0x5c93eb),'ack':!![]});if(_0x1f00ad)_0x3806c2['setStateAsync'](_0x391f41(0x1dd),{'val':JSON[_0x391f41(0x1e6)](_0x1f00ad),'ack':!![]});if(_0xa77eba)_0x3806c2['setStateAsync'](_0x391f41(0x1e0),{'val':JSON[_0x391f41(0x1e6)](_0xa77eba),'ack':!![]});}else{if(_0x451c1d[_0x391f41(0x1be)]==='PINN_PREDICT_RESULT'){const {forecast:_0x110f44}=_0x451c1d[_0x391f41(0x1d9)];if(_0x110f44)_0x3806c2[_0x391f41(0x1e5)]('analysis.energy.pinnForecast',{'val':JSON['stringify'](_0x110f44),'ack':!![]});}else{if(_0x451c1d[_0x391f41(0x1be)]===_0x391f41(0x20f)){const {alerts:_0x3b144f}=_0x451c1d[_0x391f41(0x1d9)];if(_0x3b144f)_0x3806c2[_0x391f41(0x1e5)](_0x391f41(0x1fe),{'val':JSON[_0x391f41(0x1e6)](_0x3b144f),'ack':!![]});}else{if(_0x451c1d[_0x391f41(0x1be)]===_0x391f41(0x1ea)){const {proposals:_0x4b0b53}=_0x451c1d['payload'];_0x3806c2['getState']('analysis.energy.mpcActive',(_0x357079,_0x52f1d9)=>{const _0x2ffd42=_0x391f41;_0x52f1d9&&_0x52f1d9[_0x2ffd42(0x1c1)]===!![]&&_0x4b0b53&&_0x4b0b53[_0x2ffd42(0x1ef)]>0x0&&automation[_0x2ffd42(0x1d4)](_0x3806c2,_0x4b0b53);});}else{if(_0x451c1d[_0x391f41(0x1be)]==='SIGNAL_RESULT'){const {room:_0x362ac4,propagation:_0x46dd0c}=_0x451c1d[_0x391f41(0x1d9)];let _0x495b5d=_0x391f41(0x1c8),_0x3b39eb=0x0;if(_0x46dd0c){const _0x502ff1=Object[_0x391f41(0x1f0)](_0x46dd0c);_0x502ff1[_0x391f41(0x1ef)]>0x0&&(_0x495b5d=_0x502ff1[0x0][0x0],_0x3b39eb=_0x502ff1[0x0][0x1]);}_0x3806c2[_0x391f41(0x1e5)](_0x391f41(0x1f1),{'val':_0x495b5d,'ack':!![]}),_0x3806c2[_0x391f41(0x1e5)](_0x391f41(0x1b4),{'val':_0x3b39eb,'ack':!![]}),automation[_0x391f41(0x1d7)](_0x3806c2,_0x495b5d,_0x3b39eb);}else{if(_0x451c1d[_0x391f41(0x1be)]===_0x391f41(0x1c6)){const {probabilities:_0x4b7e56}=_0x451c1d['payload'];if(_0x4b7e56){_0x3806c2[_0x391f41(0x1e5)]('analysis.prediction.trackerState',{'val':JSON['stringify'](_0x4b7e56),'ack':!![]});const _0xf74a9d=Object['keys'](_0x4b7e56);if(_0xf74a9d[_0x391f41(0x1ef)]>0x0){const _0x90843c=_0xf74a9d[0x0],_0x320b5f=_0x4b7e56[_0x90843c];_0x3806c2['setStateAsync'](_0x391f41(0x1ff),{'val':_0x90843c,'ack':!![]}),_0x3806c2[_0x391f41(0x1e5)](_0x391f41(0x1f9),{'val':_0x320b5f,'ack':!![]});}}}else{if(_0x451c1d[_0x391f41(0x1be)]==='COMFORT_RESULT'){const {patterns:_0xe1eb39}=_0x451c1d[_0x391f41(0x1d9)];if(_0xe1eb39&&_0xe1eb39[_0x391f41(0x1ef)]>0x0)_0x3806c2[_0x391f41(0x1e5)](_0x391f41(0x1d2),{'val':JSON[_0x391f41(0x1e6)](_0xe1eb39),'ack':!![]});}}}}}}}}}}}}}}}}function startService(_0x1a4221,_0x3d8f2b){const _0x5a3780=a4_0x54346d;let _0x294239=_0x5a3780(0x1cd);if(fs[_0x5a3780(0x1fd)](_0x3d8f2b))_0x294239=_0x3d8f2b;try{const _0x55033b=path[_0x5a3780(0x1e8)](__dirname,'..',_0x5a3780(0x1c7),_0x5a3780(0x1c5));pythonProcess=spawn(_0x294239,[_0x55033b]),pythonProcess['stdout']['on'](_0x5a3780(0x200),_0x561a5d=>{const _0xf9c8a0=_0x5a3780,_0x253667=_0x561a5d['toString']()[_0xf9c8a0(0x208)]('\x0a');_0x253667[_0xf9c8a0(0x20d)](_0x5b6514=>{const _0x57d0cd=_0xf9c8a0,_0x5495dd=_0x5b6514['trim']();if(!_0x5495dd)return;if(_0x5495dd[_0x57d0cd(0x1db)]('[LOG]'))_0x1a4221[_0x57d0cd(0x1d8)]['debug'](_0x57d0cd(0x1c0)+_0x5495dd[_0x57d0cd(0x1cb)](0x5)[_0x57d0cd(0x1fc)]());else{if(_0x5495dd[_0x57d0cd(0x1db)](_0x57d0cd(0x1ec)))try{const _0x222dd7=JSON[_0x57d0cd(0x20c)](_0x5495dd['substring'](0x8)[_0x57d0cd(0x1fc)]());handleResult(_0x1a4221,_0x222dd7);}catch(_0x760ba5){}}});}),pythonProcess['on']('close',_0x73fa71=>{pythonProcess=null;}),_0x1a4221['sendToPythonWrapper']=(_0xb56159,_0xdb4c4)=>send(_0x1a4221,_0xb56159,_0xdb4c4);}catch(_0x2c0e90){_0x1a4221[_0x5a3780(0x1d8)][_0x5a3780(0x1d6)](_0x5a3780(0x213)+_0x2c0e90[_0x5a3780(0x1d3)]);}}function stopService(_0x6cc475){const _0x2f31fd=a4_0x54346d;if(pythonProcess){try{pythonProcess[_0x2f31fd(0x214)]();}catch(_0x1d898c){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};