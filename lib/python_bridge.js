const a4_0x4a6be4=a4_0x5a5a;(function(_0x194a5c,_0x418257){const _0x4db3c8=a4_0x5a5a,_0x228cf5=_0x194a5c();while(!![]){try{const _0x1ef2e0=parseInt(_0x4db3c8(0x1f2))/0x1*(-parseInt(_0x4db3c8(0x1ae))/0x2)+parseInt(_0x4db3c8(0x1b4))/0x3*(parseInt(_0x4db3c8(0x1c6))/0x4)+parseInt(_0x4db3c8(0x1fb))/0x5*(parseInt(_0x4db3c8(0x1fa))/0x6)+parseInt(_0x4db3c8(0x204))/0x7*(parseInt(_0x4db3c8(0x1c0))/0x8)+parseInt(_0x4db3c8(0x1e6))/0x9*(parseInt(_0x4db3c8(0x1ec))/0xa)+parseInt(_0x4db3c8(0x1f9))/0xb+-parseInt(_0x4db3c8(0x1a7))/0xc*(parseInt(_0x4db3c8(0x1f6))/0xd);if(_0x1ef2e0===_0x418257)break;else _0x228cf5['push'](_0x228cf5['shift']());}catch(_0x53221b){_0x228cf5['push'](_0x228cf5['shift']());}}}(a4_0xf93b,0xf287e));const a4_0x1b5e4b=(function(){let _0x4c17b2=!![];return function(_0x58a901,_0xa2ea61){const _0x53b880=_0x4c17b2?function(){if(_0xa2ea61){const _0x47c07d=_0xa2ea61['apply'](_0x58a901,arguments);return _0xa2ea61=null,_0x47c07d;}}:function(){};return _0x4c17b2=![],_0x53b880;};}()),a4_0x162f1b=a4_0x1b5e4b(this,function(){const _0x5cd29d=a4_0x5a5a;return a4_0x162f1b[_0x5cd29d(0x1ce)]()[_0x5cd29d(0x1e5)]('(((.+)+)+)+$')[_0x5cd29d(0x1ce)]()['constructor'](a4_0x162f1b)[_0x5cd29d(0x1e5)](_0x5cd29d(0x1ee));});a4_0x162f1b();'use strict';const {spawn}=require(a4_0x4a6be4(0x1cd)),path=require(a4_0x4a6be4(0x1b1)),fs=require('fs'),setup=require(a4_0x4a6be4(0x1bf)),automation=require(a4_0x4a6be4(0x1e8));let pythonProcess=null;function send(_0x3b1137,_0xa52eba,_0xf57c83={}){const _0x43228e=a4_0x4a6be4;if(!pythonProcess||!pythonProcess[_0x43228e(0x1af)]['writable'])return;const _0x5ea0bd=JSON[_0x43228e(0x1f7)]({'command':_0xa52eba,..._0xf57c83});try{pythonProcess[_0x43228e(0x1af)][_0x43228e(0x1de)](_0x5ea0bd+'\x0a');}catch(_0x563c39){}}function handleResult(_0x31e838,_0xd88d5c){const _0x476f93=a4_0x4a6be4;if(_0xd88d5c['type']===_0x476f93(0x1a3))_0x31e838[_0x476f93(0x1c9)]['debug'](_0x476f93(0x1db));else{if(_0xd88d5c['type']===_0x476f93(0x1cc)){const {anomaly_score:_0x59a5f8,is_anomaly:_0x478a1a,threshold:_0x2e63be,explanation:_0x2fae10}=_0xd88d5c['payload'];_0x31e838['setStateAsync'](_0x476f93(0x1cb),{'val':_0x59a5f8,'ack':!![]}),_0x31e838[_0x476f93(0x1f1)](_0x476f93(0x1d7),{'val':new Date()[_0x476f93(0x1c5)](),'ack':!![]});if(_0x2e63be)_0x31e838['setStateAsync'](_0x476f93(0x1a1),{'val':_0x2e63be,'ack':!![]});if(_0x478a1a){let _0x4eb3b2='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x59a5f8['toFixed'](0x4)+')';if(_0x2fae10&&_0x2fae10!==_0x476f93(0x1e2))_0x4eb3b2+=_0x476f93(0x1fc)+_0x2fae10;_0x31e838['setStateAsync'](_0x476f93(0x1d1),{'val':!![],'ack':!![]}),_0x31e838[_0x476f93(0x1f1)](_0x476f93(0x1c2),{'val':_0x4eb3b2,'ack':!![]}),setup[_0x476f93(0x1c3)](_0x31e838,_0x476f93(0x1b3)+_0x4eb3b2,![],!![]);}}else{if(_0xd88d5c[_0x476f93(0x1e7)]==='TRAINING_COMPLETE'){const _0x3dfab=_0xd88d5c[_0x476f93(0x1bb)][_0x476f93(0x1ad)]||'',_0x2885af=_0xd88d5c[_0x476f93(0x1bb)][_0x476f93(0x201)],_0x3bd0fe=_0xd88d5c[_0x476f93(0x1bb)][_0x476f93(0x1fd)]?_0x476f93(0x203)+new Date()[_0x476f93(0x1aa)]()+'\x20('+_0x3dfab+')':_0x476f93(0x1f8)+_0xd88d5c['payload'][_0x476f93(0x1ab)];_0x31e838[_0x476f93(0x1f1)]('analysis.training.status',{'val':_0x3bd0fe,'ack':!![]});if(_0xd88d5c[_0x476f93(0x1bb)]['success']&&_0x2885af)_0x31e838['setStateAsync']('analysis.security.currentThreshold',{'val':_0x2885af,'ack':!![]});}else{if(_0xd88d5c['type']==='ENERGY_TRAIN_RESULT'){if(_0xd88d5c[_0x476f93(0x1bb)][_0x476f93(0x1fd)])try{const _0x1956c9=JSON['parse'](_0xd88d5c[_0x476f93(0x1bb)][_0x476f93(0x1ad)]);if(_0x1956c9[_0x476f93(0x1ed)])_0x31e838[_0x476f93(0x1f1)](_0x476f93(0x1dd),{'val':JSON[_0x476f93(0x1f7)](_0x1956c9[_0x476f93(0x1ed)]),'ack':!![]});if(_0x1956c9[_0x476f93(0x1be)])_0x31e838[_0x476f93(0x1f1)](_0x476f93(0x1a6),{'val':JSON[_0x476f93(0x1f7)](_0x1956c9['heating']),'ack':!![]});}catch(_0x58112b){}}else{if(_0xd88d5c[_0x476f93(0x1e7)]===_0x476f93(0x1d3)){if(_0xd88d5c[_0x476f93(0x1bb)][_0x476f93(0x1fd)])_0x31e838[_0x476f93(0x1c9)][_0x476f93(0x1f0)](_0x476f93(0x1e9));}else{if(_0xd88d5c[_0x476f93(0x1e7)]===_0x476f93(0x1c1))_0x31e838[_0x476f93(0x1f1)]('analysis.health.lastCheck',{'val':new Date()['toISOString'](),'ack':!![]}),_0x31e838['setStateAsync'](_0x476f93(0x1e4),{'val':_0xd88d5c[_0x476f93(0x1bb)][_0x476f93(0x1ff)],'ack':!![]});else{if(_0xd88d5c[_0x476f93(0x1e7)]===_0x476f93(0x1bc)){const {speed_trend:_0x16a092}=_0xd88d5c['payload'];if(_0x16a092!==undefined)_0x31e838[_0x476f93(0x1f1)](_0x476f93(0x1dc),{'val':_0x16a092,'ack':!![]});}else{if(_0xd88d5c[_0x476f93(0x1e7)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x28af9c}=_0xd88d5c[_0x476f93(0x1bb)];if(_0x28af9c)_0x31e838['setStateAsync'](_0x476f93(0x1a2),{'val':JSON[_0x476f93(0x1f7)](_0x28af9c),'ack':!![]});}else{if(_0xd88d5c['type']===_0x476f93(0x1b0)){const {times:_0x25548f,sources:_0x531f6c,details:_0x447af0}=_0xd88d5c[_0x476f93(0x1bb)];if(_0x25548f)_0x31e838[_0x476f93(0x1f1)](_0x476f93(0x1c8),{'val':JSON[_0x476f93(0x1f7)](_0x25548f),'ack':!![]});if(_0x531f6c)_0x31e838['setStateAsync'](_0x476f93(0x1d6),{'val':JSON[_0x476f93(0x1f7)](_0x531f6c),'ack':!![]});if(_0x447af0)_0x31e838['setStateAsync'](_0x476f93(0x1f3),{'val':JSON['stringify'](_0x447af0),'ack':!![]});}else{if(_0xd88d5c[_0x476f93(0x1e7)]===_0x476f93(0x1b9)){const {penalties:_0x39b191}=_0xd88d5c['payload'];if(_0x39b191)_0x31e838[_0x476f93(0x1f1)](_0x476f93(0x1bd),{'val':JSON[_0x476f93(0x1f7)](_0x39b191),'ack':!![]});}else{if(_0xd88d5c[_0x476f93(0x1e7)]===_0x476f93(0x1b8)){const {forecast:_0x540037}=_0xd88d5c[_0x476f93(0x1bb)];if(_0x540037)_0x31e838[_0x476f93(0x1f1)](_0x476f93(0x1da),{'val':JSON[_0x476f93(0x1f7)](_0x540037),'ack':!![]});}else{if(_0xd88d5c[_0x476f93(0x1e7)]===_0x476f93(0x1ef)){const {alerts:_0x543bc6}=_0xd88d5c[_0x476f93(0x1bb)];if(_0x543bc6)_0x31e838['setStateAsync']('analysis.energy.ventilationAlerts',{'val':JSON['stringify'](_0x543bc6),'ack':!![]});}else{if(_0xd88d5c[_0x476f93(0x1e7)]==='ENERGY_OPTIMIZE_RESULT'){const {proposals:_0x52923b}=_0xd88d5c[_0x476f93(0x1bb)];_0x31e838[_0x476f93(0x1f5)](_0x476f93(0x1b6),(_0x4dce65,_0x409a25)=>{const _0x545d0d=_0x476f93;_0x409a25&&_0x409a25[_0x545d0d(0x1ca)]===!![]&&_0x52923b&&_0x52923b[_0x545d0d(0x1cf)]>0x0&&automation[_0x545d0d(0x200)](_0x31e838,_0x52923b);});}else{if(_0xd88d5c['type']===_0x476f93(0x1c7)){const {room:_0x3e9ef7,propagation:_0x1d320a}=_0xd88d5c['payload'];let _0x3cbd73=_0x476f93(0x1e2),_0x514c45=0x0;if(_0x1d320a){const _0x238b29=Object['entries'](_0x1d320a);_0x238b29[_0x476f93(0x1cf)]>0x0&&(_0x3cbd73=_0x238b29[0x0][0x0],_0x514c45=_0x238b29[0x0][0x1]);}_0x31e838[_0x476f93(0x1f1)](_0x476f93(0x1e3),{'val':_0x3cbd73,'ack':!![]}),_0x31e838[_0x476f93(0x1f1)](_0x476f93(0x206),{'val':_0x514c45,'ack':!![]}),automation[_0x476f93(0x1b2)](_0x31e838,_0x3cbd73,_0x514c45);}else{if(_0xd88d5c[_0x476f93(0x1e7)]==='TRACKER_RESULT'){const {probabilities:_0x5cb8e6}=_0xd88d5c[_0x476f93(0x1bb)];if(_0x5cb8e6){_0x31e838[_0x476f93(0x1f1)]('analysis.prediction.trackerState',{'val':JSON[_0x476f93(0x1f7)](_0x5cb8e6),'ack':!![]});const _0x339b56=Object['keys'](_0x5cb8e6);if(_0x339b56[_0x476f93(0x1cf)]>0x0){const _0x5dd0c4=_0x339b56[0x0],_0x1bd71b=_0x5cb8e6[_0x5dd0c4];_0x31e838[_0x476f93(0x1f1)](_0x476f93(0x1eb),{'val':_0x5dd0c4,'ack':!![]}),_0x31e838[_0x476f93(0x1f1)](_0x476f93(0x1f4),{'val':_0x1bd71b,'ack':!![]});}}}else{if(_0xd88d5c[_0x476f93(0x1e7)]===_0x476f93(0x1d8)){const {patterns:_0x24d7f4}=_0xd88d5c['payload'];if(_0x24d7f4&&_0x24d7f4[_0x476f93(0x1cf)]>0x0)_0x31e838[_0x476f93(0x1f1)](_0x476f93(0x1d4),{'val':JSON[_0x476f93(0x1f7)](_0x24d7f4),'ack':!![]});}}}}}}}}}}}}}}}}}function a4_0xf93b(){const _0x38de13=['analysis.prediction.trackerTopRoom','270Nzcleb','insulation','(((.+)+)+)+$','VENTILATION_ALERT','info','setStateAsync','4483HITWvB','analysis.energy.warmupDetails','analysis.prediction.trackerConfidence','getState','130RNjUmP','stringify','Failed:\x20','8556207fQFEYC','312KoZnlo','154355FcaHpQ','\x0aGrund:\x20','success','Error\x20launching\x20Python:\x20','is_anomaly','applyEnergySavings','threshold','startsWith','Success:\x20','12453wqeyUY','[PYTHON]\x20','analysis.prediction.confidence','analysis.security.currentThreshold','analysis.energy.forecast','PONG','split','join','analysis.energy.heatingScore','3972156KIwyjh','existsSync','forEach','toLocaleTimeString','reason','substring','details','340zihLmP','stdin','WARMUP_RESULT','path','handlePrediction','âš ï¸\x20SECURITY\x20ALARM:\x20','376797AxFkcT','message','analysis.energy.mpcActive','service.py','PINN_PREDICT_RESULT','RL_PENALTY_UPDATE','kill','payload','GAIT_RESULT','analysis.energy.rlPenalties','heating','./setup','5560dktKBC','HEALTH_RESULT','analysis.alertReason','sendNotification','stdout','toISOString','28bJVQXj','SIGNAL_RESULT','analysis.energy.warmupTimes','log','val','analysis.security.lastScore','SECURITY_RESULT','child_process','toString','length','[LOG]','analysis.isAlert','sendToPythonWrapper','HEALTH_TRAIN_RESULT','analysis.automation.detectedPatterns','exports','analysis.energy.warmupSources','analysis.security.lastCheck','COMFORT_RESULT','debug','analysis.energy.pinnForecast','ðŸ\x20Python\x20Pong','analysis.health.gaitSpeed','analysis.energy.insulationScore','write','[RESULT]','python3','close','Unknown','analysis.prediction.nextRoom','analysis.health.isAnomaly','search','188973xjJYCc','type','./automation','âœ…\x20HEALTH\x20TRAINED.','trim'];a4_0xf93b=function(){return _0x38de13;};return a4_0xf93b();}function a4_0x5a5a(_0x4ff768,_0x4b1e6f){const _0x78fd07=a4_0xf93b();return a4_0x5a5a=function(_0x162f1b,_0x1b5e4b){_0x162f1b=_0x162f1b-0x1a1;let _0xf93be3=_0x78fd07[_0x162f1b];return _0xf93be3;},a4_0x5a5a(_0x4ff768,_0x4b1e6f);}function startService(_0x10b954,_0x1ed632){const _0x586cc9=a4_0x4a6be4;let _0x55e119=_0x586cc9(0x1e0);if(fs[_0x586cc9(0x1a8)](_0x1ed632))_0x55e119=_0x1ed632;try{const _0x322bd5=path[_0x586cc9(0x1a5)](__dirname,'..','python_service',_0x586cc9(0x1b7));pythonProcess=spawn(_0x55e119,[_0x322bd5]),pythonProcess[_0x586cc9(0x1c4)]['on']('data',_0x55e053=>{const _0x25cccf=_0x586cc9,_0x430c53=_0x55e053[_0x25cccf(0x1ce)]()[_0x25cccf(0x1a4)]('\x0a');_0x430c53[_0x25cccf(0x1a9)](_0x46bfa4=>{const _0x244590=_0x25cccf,_0x54a5e4=_0x46bfa4['trim']();if(!_0x54a5e4)return;if(_0x54a5e4[_0x244590(0x202)](_0x244590(0x1d0)))_0x10b954[_0x244590(0x1c9)][_0x244590(0x1d9)](_0x244590(0x205)+_0x54a5e4['substring'](0x5)[_0x244590(0x1ea)]());else{if(_0x54a5e4[_0x244590(0x202)](_0x244590(0x1df)))try{const _0x2c25c3=JSON['parse'](_0x54a5e4[_0x244590(0x1ac)](0x8)['trim']());handleResult(_0x10b954,_0x2c25c3);}catch(_0x2d042e){}}});}),pythonProcess['on'](_0x586cc9(0x1e1),_0x2ab80d=>{pythonProcess=null;}),_0x10b954[_0x586cc9(0x1d2)]=(_0x22d2ca,_0x235ea3)=>send(_0x10b954,_0x22d2ca,_0x235ea3);}catch(_0x190718){_0x10b954[_0x586cc9(0x1c9)]['error'](_0x586cc9(0x1fe)+_0x190718[_0x586cc9(0x1b5)]);}}function stopService(_0x485049){const _0x25b632=a4_0x4a6be4;if(pythonProcess){try{pythonProcess[_0x25b632(0x1ba)]();}catch(_0x4b033e){}pythonProcess=null;}}module[a4_0x4a6be4(0x1d5)]={'startService':startService,'stopService':stopService,'send':send};