const a4_0x281ca8=a4_0x5bf7;function a4_0x5bf7(_0x125605,_0x43c267){const _0x1f52a4=a4_0x4a7d();return a4_0x5bf7=function(_0x2eaf47,_0x24f6fd){_0x2eaf47=_0x2eaf47-0x17e;let _0x4a7d5f=_0x1f52a4[_0x2eaf47];return _0x4a7d5f;},a4_0x5bf7(_0x125605,_0x43c267);}(function(_0x4ec367,_0x103ee3){const _0x432981=a4_0x5bf7,_0x2a6645=_0x4ec367();while(!![]){try{const _0x2d7b1a=-parseInt(_0x432981(0x1cc))/0x1+parseInt(_0x432981(0x1b3))/0x2*(-parseInt(_0x432981(0x1db))/0x3)+-parseInt(_0x432981(0x1b0))/0x4+parseInt(_0x432981(0x186))/0x5+parseInt(_0x432981(0x1ba))/0x6+-parseInt(_0x432981(0x18b))/0x7+parseInt(_0x432981(0x193))/0x8*(parseInt(_0x432981(0x1c0))/0x9);if(_0x2d7b1a===_0x103ee3)break;else _0x2a6645['push'](_0x2a6645['shift']());}catch(_0xa46963){_0x2a6645['push'](_0x2a6645['shift']());}}}(a4_0x4a7d,0x209b8));const a4_0x24f6fd=(function(){let _0xd21e41=!![];return function(_0x5441b5,_0x1db3c7){const _0x36e387=_0xd21e41?function(){const _0x16bc5c=a4_0x5bf7;if(_0x1db3c7){const _0x245b26=_0x1db3c7[_0x16bc5c(0x1d9)](_0x5441b5,arguments);return _0x1db3c7=null,_0x245b26;}}:function(){};return _0xd21e41=![],_0x36e387;};}()),a4_0x2eaf47=a4_0x24f6fd(this,function(){const _0x5d5c0c=a4_0x5bf7;return a4_0x2eaf47[_0x5d5c0c(0x1ea)]()[_0x5d5c0c(0x1b7)](_0x5d5c0c(0x1cd))[_0x5d5c0c(0x1ea)]()[_0x5d5c0c(0x19c)](a4_0x2eaf47)[_0x5d5c0c(0x1b7)](_0x5d5c0c(0x1cd));});a4_0x2eaf47();'use strict';const {spawn}=require('child_process'),path=require(a4_0x281ca8(0x1d0)),fs=require('fs'),setup=require(a4_0x281ca8(0x1a7)),automation=require('./automation');function a4_0x4a7d(){const _0x2c4fd3=['substring','analysis.energy.mpcActive','payload','937820ustrfb','data','heating','error','analysis.prediction.trackerState','1323140LInTmw','toLocaleDateString','âœ…\x20HEALTH\x20TRAINED.','python3','analysis.energy.pinnForecast','Python\x20process\x20exited\x20with\x20code\x20','ENERGY_OPTIMIZE_RESULT','PONG','3347336EPPrAt','[RESULT]','success','debug','COMFORT_RESULT','âš ï¸\x20SECURITY\x20ALARM:\x20','HEALTH_TREND_RESULT','is_anomaly','reason','constructor','trim','parse','short','toISOString','startsWith','kill','Error\x20launching\x20Python:\x20','ðŸ“ˆ\x20Health\x20Trend:\x20','join','setStateAsync','./setup','sendNotification','analysis.prediction.trackerConfidence','stdout','sendToPythonWrapper','[LOG]','GAIT_RESULT','de-DE','[PYTHON\x20ERR]\x20','402284adlqRl','val','analysis.security.lastScore','358AiIwCN','analysis.alertReason','SIGNAL_RESULT','service.py','search','analysis.energy.heatingScore','type','788922LSuQel','handlePrediction','length','analysis.energy.warmupTimes','RL_PENALTY_UPDATE','2-digit','9ahlAdz','warn','ðŸ\x20Python\x20Pong','log','info','getState','analysis.energy.insulationScore','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','analysis.energy.warmupSources','analysis.health.gaitDebug','Failed:\x20','analysis.isAlert','102023WurPse','(((.+)+)+)+$','[PYTHON]\x20','writable','path','write','analysis.prediction.nextRoom','analysis.energy.forecast','stdin','Unknown','ENERGY_TRAIN_RESULT','insulation','applyEnergySavings','apply','toLocaleTimeString','3558GSoyhg','threshold','keys','stringify','message','exports','analysis.health.activityTrend','isArray','analysis.security.lastCheck','ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20','analysis.automation.detectedPatterns','analysis.security.currentThreshold','close','split','analysis.health.isAnomaly','toString','entries','analysis.prediction.confidence','analysis.health.lastCheck','VENTILATION_ALERT','details','existsSync'];a4_0x4a7d=function(){return _0x2c4fd3;};return a4_0x4a7d();}let pythonProcess=null;function send(_0x503e12,_0xfa8d51,_0x5b0b3b={}){const _0x3d29ab=a4_0x281ca8;if(!pythonProcess||!pythonProcess[_0x3d29ab(0x1d4)][_0x3d29ab(0x1cf)])return;const _0x1e19b3=JSON[_0x3d29ab(0x1de)]({'command':_0xfa8d51,..._0x5b0b3b});try{pythonProcess[_0x3d29ab(0x1d4)][_0x3d29ab(0x1d1)](_0x1e19b3+'\x0a');}catch(_0x3924a3){}}function handleResult(_0x24c5a1,_0x5ca11f){const _0x64a12f=a4_0x281ca8;if(_0x5ca11f[_0x64a12f(0x1b9)]===_0x64a12f(0x192))_0x24c5a1[_0x64a12f(0x1c3)][_0x64a12f(0x196)](_0x64a12f(0x1c2));else{if(_0x5ca11f[_0x64a12f(0x1b9)]==='SECURITY_RESULT'){const {anomaly_score:_0xd7790,is_anomaly:_0x531e21,threshold:_0x4a916a,explanation:_0xc9eb65}=_0x5ca11f[_0x64a12f(0x185)];_0x24c5a1[_0x64a12f(0x1a6)](_0x64a12f(0x1b2),{'val':_0xd7790,'ack':!![]}),_0x24c5a1['setStateAsync'](_0x64a12f(0x1e3),{'val':new Date()[_0x64a12f(0x1a0)](),'ack':!![]});if(_0x4a916a)_0x24c5a1[_0x64a12f(0x1a6)](_0x64a12f(0x1e6),{'val':_0x4a916a,'ack':!![]});if(_0x531e21){let _0x52cacb=_0x64a12f(0x1c7)+_0xd7790['toFixed'](0x4)+')';if(_0xc9eb65&&_0xc9eb65!==_0x64a12f(0x1d5))_0x52cacb+='\x0aGrund:\x20'+_0xc9eb65;_0x24c5a1[_0x64a12f(0x1a6)](_0x64a12f(0x1cb),{'val':!![],'ack':!![]}),_0x24c5a1[_0x64a12f(0x1a6)](_0x64a12f(0x1b4),{'val':_0x52cacb,'ack':!![]}),setup[_0x64a12f(0x1a8)](_0x24c5a1,_0x64a12f(0x198)+_0x52cacb,![],!![]);}}else{if(_0x5ca11f[_0x64a12f(0x1b9)]==='TRAINING_COMPLETE'){const _0x340469=_0x5ca11f[_0x64a12f(0x185)][_0x64a12f(0x181)]||'',_0x3328be=_0x5ca11f[_0x64a12f(0x185)][_0x64a12f(0x1dc)],_0x5efd63=_0x5ca11f[_0x64a12f(0x185)]['success']?'Success:\x20'+new Date()[_0x64a12f(0x1da)]()+'\x20('+_0x340469+')':_0x64a12f(0x1ca)+_0x5ca11f[_0x64a12f(0x185)][_0x64a12f(0x19b)];_0x24c5a1[_0x64a12f(0x1a6)]('analysis.training.status',{'val':_0x5efd63,'ack':!![]});if(_0x5ca11f[_0x64a12f(0x185)][_0x64a12f(0x195)]&&_0x3328be)_0x24c5a1[_0x64a12f(0x1a6)]('analysis.security.currentThreshold',{'val':_0x3328be,'ack':!![]});}else{if(_0x5ca11f[_0x64a12f(0x1b9)]===_0x64a12f(0x1d6)){if(_0x5ca11f['payload'][_0x64a12f(0x195)])try{const _0x49da86=JSON[_0x64a12f(0x19e)](_0x5ca11f['payload']['details']);if(_0x49da86[_0x64a12f(0x1d7)])_0x24c5a1['setStateAsync'](_0x64a12f(0x1c6),{'val':JSON[_0x64a12f(0x1de)](_0x49da86['insulation']),'ack':!![]});if(_0x49da86[_0x64a12f(0x188)])_0x24c5a1[_0x64a12f(0x1a6)](_0x64a12f(0x1b8),{'val':JSON['stringify'](_0x49da86[_0x64a12f(0x188)]),'ack':!![]});}catch(_0x16cfef){}}else{if(_0x5ca11f[_0x64a12f(0x1b9)]==='HEALTH_TRAIN_RESULT'){if(_0x5ca11f[_0x64a12f(0x185)]['success']){_0x24c5a1[_0x64a12f(0x1c3)][_0x64a12f(0x1c4)](_0x64a12f(0x18d));const _0x4e414f=new Date(),_0x19aae7=_0x4e414f[_0x64a12f(0x18c)]('de-DE',{'day':_0x64a12f(0x1bf),'month':_0x64a12f(0x19f),'hour':_0x64a12f(0x1bf),'minute':'2-digit'});_0x24c5a1['setStateAsync'](_0x64a12f(0x17f),{'val':_0x19aae7,'ack':!![]});}}else{if(_0x5ca11f[_0x64a12f(0x1b9)]==='HEALTH_RESULT'){const _0x9ce5da=new Date(),_0x4c3e4e=_0x9ce5da[_0x64a12f(0x18c)](_0x64a12f(0x1ae),{'day':_0x64a12f(0x1bf),'month':'short','hour':_0x64a12f(0x1bf),'minute':_0x64a12f(0x1bf)});_0x24c5a1[_0x64a12f(0x1a6)]('analysis.health.lastCheck',{'val':_0x4c3e4e,'ack':!![]}),_0x24c5a1['setStateAsync'](_0x64a12f(0x1e9),{'val':_0x5ca11f['payload'][_0x64a12f(0x19a)],'ack':!![]});}else{if(_0x5ca11f['type']===_0x64a12f(0x199)){const {trend_percent:_0x5da83b,details:_0x40eb22}=_0x5ca11f[_0x64a12f(0x185)],_0x26c417=new Date(),_0x13385c=_0x26c417['toLocaleDateString'](_0x64a12f(0x1ae),{'day':'2-digit','month':'short','hour':_0x64a12f(0x1bf),'minute':_0x64a12f(0x1bf)});_0x24c5a1[_0x64a12f(0x1a6)](_0x64a12f(0x17f),{'val':_0x13385c,'ack':!![]}),_0x24c5a1[_0x64a12f(0x1a6)](_0x64a12f(0x1e1),{'val':_0x5da83b,'ack':!![]}),_0x24c5a1[_0x64a12f(0x1c3)][_0x64a12f(0x1c4)](_0x64a12f(0x1a4)+_0x40eb22);}else{if(_0x5ca11f[_0x64a12f(0x1b9)]===_0x64a12f(0x1ad)){const {speed_trend:_0x5e4314,sensors:_0x5c3eb3,proof:_0x1665f2}=_0x5ca11f[_0x64a12f(0x185)];if(_0x5e4314!==undefined)_0x24c5a1['setStateAsync']('analysis.health.gaitSpeed',{'val':_0x5e4314,'ack':!![]});if(_0x5c3eb3&&Array[_0x64a12f(0x1e2)](_0x5c3eb3))_0x24c5a1[_0x64a12f(0x1a6)]('analysis.health.gaitSensors',{'val':_0x5c3eb3[_0x64a12f(0x1a5)](',\x20'),'ack':!![]});if(_0x1665f2)_0x24c5a1[_0x64a12f(0x1a6)](_0x64a12f(0x1c9),{'val':_0x1665f2,'ack':!![]});}else{if(_0x5ca11f['type']==='ENERGY_PREDICT_RESULT'){const {forecast:_0x57ef5d}=_0x5ca11f[_0x64a12f(0x185)];if(_0x57ef5d)_0x24c5a1[_0x64a12f(0x1a6)](_0x64a12f(0x1d3),{'val':JSON['stringify'](_0x57ef5d),'ack':!![]});}else{if(_0x5ca11f[_0x64a12f(0x1b9)]==='WARMUP_RESULT'){const {times:_0x36d950,sources:_0x234e48,details:_0x589a6d}=_0x5ca11f[_0x64a12f(0x185)];if(_0x36d950)_0x24c5a1['setStateAsync'](_0x64a12f(0x1bd),{'val':JSON[_0x64a12f(0x1de)](_0x36d950),'ack':!![]});if(_0x234e48)_0x24c5a1[_0x64a12f(0x1a6)](_0x64a12f(0x1c8),{'val':JSON[_0x64a12f(0x1de)](_0x234e48),'ack':!![]});if(_0x589a6d)_0x24c5a1['setStateAsync']('analysis.energy.warmupDetails',{'val':JSON['stringify'](_0x589a6d),'ack':!![]});}else{if(_0x5ca11f[_0x64a12f(0x1b9)]===_0x64a12f(0x1be)){const {penalties:_0x472257}=_0x5ca11f[_0x64a12f(0x185)];if(_0x472257)_0x24c5a1[_0x64a12f(0x1a6)]('analysis.energy.rlPenalties',{'val':JSON[_0x64a12f(0x1de)](_0x472257),'ack':!![]});}else{if(_0x5ca11f['type']==='PINN_PREDICT_RESULT'){const {forecast:_0x5913ae}=_0x5ca11f[_0x64a12f(0x185)];if(_0x5913ae)_0x24c5a1[_0x64a12f(0x1a6)](_0x64a12f(0x18f),{'val':JSON[_0x64a12f(0x1de)](_0x5913ae),'ack':!![]});}else{if(_0x5ca11f[_0x64a12f(0x1b9)]===_0x64a12f(0x180)){const {alerts:_0x3caf08}=_0x5ca11f[_0x64a12f(0x185)];if(_0x3caf08)_0x24c5a1[_0x64a12f(0x1a6)]('analysis.energy.ventilationAlerts',{'val':JSON[_0x64a12f(0x1de)](_0x3caf08),'ack':!![]});}else{if(_0x5ca11f[_0x64a12f(0x1b9)]===_0x64a12f(0x191)){const {proposals:_0x3eeec3}=_0x5ca11f['payload'];_0x24c5a1[_0x64a12f(0x1c5)](_0x64a12f(0x184),(_0x5e6ca4,_0x25e196)=>{const _0x15f5d1=_0x64a12f;_0x25e196&&_0x25e196[_0x15f5d1(0x1b1)]===!![]&&_0x3eeec3&&_0x3eeec3['length']>0x0&&automation[_0x15f5d1(0x1d8)](_0x24c5a1,_0x3eeec3);});}else{if(_0x5ca11f['type']===_0x64a12f(0x1b5)){const {room:_0x540f34,propagation:_0x5996c0}=_0x5ca11f[_0x64a12f(0x185)];let _0x3ad076='Unknown',_0x39f627=0x0;if(_0x5996c0){const _0x49d319=Object[_0x64a12f(0x1eb)](_0x5996c0);_0x49d319[_0x64a12f(0x1bc)]>0x0&&(_0x3ad076=_0x49d319[0x0][0x0],_0x39f627=_0x49d319[0x0][0x1]);}_0x24c5a1[_0x64a12f(0x1a6)](_0x64a12f(0x1d2),{'val':_0x3ad076,'ack':!![]}),_0x24c5a1['setStateAsync'](_0x64a12f(0x17e),{'val':_0x39f627,'ack':!![]}),automation[_0x64a12f(0x1bb)](_0x24c5a1,_0x3ad076,_0x39f627);}else{if(_0x5ca11f[_0x64a12f(0x1b9)]==='TRACKER_RESULT'){const {probabilities:_0x16db8e}=_0x5ca11f[_0x64a12f(0x185)];if(_0x16db8e){_0x24c5a1[_0x64a12f(0x1a6)](_0x64a12f(0x18a),{'val':JSON[_0x64a12f(0x1de)](_0x16db8e),'ack':!![]});const _0x178a48=Object[_0x64a12f(0x1dd)](_0x16db8e);if(_0x178a48[_0x64a12f(0x1bc)]>0x0){const _0x4e836b=_0x178a48[0x0],_0x89ac7d=_0x16db8e[_0x4e836b];_0x24c5a1['setStateAsync']('analysis.prediction.trackerTopRoom',{'val':_0x4e836b,'ack':!![]}),_0x24c5a1['setStateAsync'](_0x64a12f(0x1a9),{'val':_0x89ac7d,'ack':!![]});}}}else{if(_0x5ca11f[_0x64a12f(0x1b9)]===_0x64a12f(0x197)){const {patterns:_0xddd7d7}=_0x5ca11f[_0x64a12f(0x185)];if(_0xddd7d7&&_0xddd7d7[_0x64a12f(0x1bc)]>0x0)_0x24c5a1[_0x64a12f(0x1a6)](_0x64a12f(0x1e5),{'val':JSON[_0x64a12f(0x1de)](_0xddd7d7),'ack':!![]});}}}}}}}}}}}}}}}}}}function startService(_0x1b9bb3,_0xc92ae7){const _0x4efc65=a4_0x281ca8;let _0xc48c9e=_0x4efc65(0x18e);if(fs[_0x4efc65(0x182)](_0xc92ae7))_0xc48c9e=_0xc92ae7;const _0x3dbd9f=path[_0x4efc65(0x1a5)](__dirname,'..','service.py'),_0x24c151=path[_0x4efc65(0x1a5)](__dirname,'..','python_service',_0x4efc65(0x1b6));let _0x51e60d='';if(fs['existsSync'](_0x3dbd9f))_0x51e60d=_0x3dbd9f;else{if(fs[_0x4efc65(0x182)](_0x24c151))_0x51e60d=_0x24c151;else{_0x1b9bb3['log']['error']('âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20'+_0x3dbd9f+'\x20AND\x20'+_0x24c151+'.\x20Please\x20create\x20this\x20file!');return;}}try{_0x1b9bb3[_0x4efc65(0x1c3)]['info'](_0x4efc65(0x1e4)+_0xc48c9e+'\x20'+_0x51e60d),pythonProcess=spawn(_0xc48c9e,[_0x51e60d]),pythonProcess[_0x4efc65(0x1aa)]['on']('data',_0x35ca02=>{const _0x1e9edd=_0x4efc65,_0x37ee5a=_0x35ca02[_0x1e9edd(0x1ea)]()[_0x1e9edd(0x1e8)]('\x0a');_0x37ee5a['forEach'](_0x5710d1=>{const _0x5e566a=_0x1e9edd,_0x33043f=_0x5710d1[_0x5e566a(0x19d)]();if(!_0x33043f)return;if(_0x33043f[_0x5e566a(0x1a1)](_0x5e566a(0x1ac)))_0x1b9bb3[_0x5e566a(0x1c3)][_0x5e566a(0x196)](_0x5e566a(0x1ce)+_0x33043f['substring'](0x5)['trim']());else{if(_0x33043f['startsWith'](_0x5e566a(0x194)))try{const _0x4a4d40=JSON['parse'](_0x33043f[_0x5e566a(0x183)](0x8)[_0x5e566a(0x19d)]());handleResult(_0x1b9bb3,_0x4a4d40);}catch(_0x3e65cb){}}});}),pythonProcess['stderr']['on'](_0x4efc65(0x187),_0x1f8e8d=>{const _0x379e4=_0x4efc65;_0x1b9bb3['log']['error'](_0x379e4(0x1af)+_0x1f8e8d[_0x379e4(0x1ea)]()[_0x379e4(0x19d)]());}),pythonProcess['on'](_0x4efc65(0x1e7),_0x44caa7=>{const _0x1692bd=_0x4efc65;_0x1b9bb3['log'][_0x1692bd(0x1c1)](_0x1692bd(0x190)+_0x44caa7),pythonProcess=null;}),_0x1b9bb3[_0x4efc65(0x1ab)]=(_0x5ed78d,_0x4269ea)=>send(_0x1b9bb3,_0x5ed78d,_0x4269ea);}catch(_0x44070d){_0x1b9bb3[_0x4efc65(0x1c3)][_0x4efc65(0x189)](_0x4efc65(0x1a3)+_0x44070d[_0x4efc65(0x1df)]);}}function stopService(_0x6e8b5b){const _0x4641b7=a4_0x281ca8;if(pythonProcess){try{pythonProcess[_0x4641b7(0x1a2)]();}catch(_0x5e51a6){}pythonProcess=null;}}module[a4_0x281ca8(0x1e0)]={'startService':startService,'stopService':stopService,'send':send};