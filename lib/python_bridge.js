const a4_0x5a8620=a4_0x517e;(function(_0x47cb01,_0x4045dc){const _0x4c77ec=a4_0x517e,_0x3b9cd8=_0x47cb01();while(!![]){try{const _0x3bb99e=-parseInt(_0x4c77ec(0x127))/0x1+parseInt(_0x4c77ec(0x12d))/0x2*(-parseInt(_0x4c77ec(0x131))/0x3)+-parseInt(_0x4c77ec(0x134))/0x4*(-parseInt(_0x4c77ec(0x129))/0x5)+parseInt(_0x4c77ec(0x12a))/0x6*(-parseInt(_0x4c77ec(0x10f))/0x7)+parseInt(_0x4c77ec(0x10c))/0x8*(parseInt(_0x4c77ec(0x12b))/0x9)+-parseInt(_0x4c77ec(0xed))/0xa*(-parseInt(_0x4c77ec(0x13e))/0xb)+-parseInt(_0x4c77ec(0xfa))/0xc;if(_0x3bb99e===_0x4045dc)break;else _0x3b9cd8['push'](_0x3b9cd8['shift']());}catch(_0x5287c5){_0x3b9cd8['push'](_0x3b9cd8['shift']());}}}(a4_0x4a8a,0xa49a7));const a4_0x1f252e=(function(){let _0x2ccecb=!![];return function(_0x4f6624,_0x2888a0){const _0x2edb2f=_0x2ccecb?function(){const _0x185ba4=a4_0x517e;if(_0x2888a0){const _0x195774=_0x2888a0[_0x185ba4(0xf0)](_0x4f6624,arguments);return _0x2888a0=null,_0x195774;}}:function(){};return _0x2ccecb=![],_0x2edb2f;};}()),a4_0x187b41=a4_0x1f252e(this,function(){const _0x26513b=a4_0x517e;return a4_0x187b41[_0x26513b(0xf4)]()[_0x26513b(0x105)](_0x26513b(0x139))[_0x26513b(0xf4)]()[_0x26513b(0x11a)](a4_0x187b41)[_0x26513b(0x105)](_0x26513b(0x139));});a4_0x187b41();'use strict';const {spawn}=require(a4_0x5a8620(0x102)),path=require(a4_0x5a8620(0xe5)),fs=require('fs'),setup=require(a4_0x5a8620(0xe6)),automation=require(a4_0x5a8620(0xf1));let pythonProcess=null;function send(_0xfb4561,_0x479c30,_0xca6671={}){const _0x228afe=a4_0x5a8620;if(!pythonProcess||!pythonProcess[_0x228afe(0xf7)][_0x228afe(0x100)])return;const _0x2e62b6=JSON[_0x228afe(0x132)]({'command':_0x479c30,..._0xca6671});try{pythonProcess['stdin'][_0x228afe(0x137)](_0x2e62b6+'\x0a');}catch(_0x26011f){}}function a4_0x4a8a(){const _0x3af505=['analysis.energy.warmupTimes','[RESULT]','python_service','reason','setStateAsync','analysis.security.lastScore','insulation','path','./setup','python3','length','join','analysis.energy.forecast','analysis.prediction.trackerTopRoom','PINN_PREDICT_RESULT','20JozhCi','toISOString','Unknown','apply','./automation','analysis.prediction.trackerState','COMFORT_RESULT','toString','HEALTH_TRAIN_RESULT','keys','stdin','parse','Failed:\x20','6819552SXJGLQ','\x0aGrund:\x20','WARMUP_RESULT','ENERGY_TRAIN_RESULT','analysis.isAlert','forEach','writable','[LOG]','child_process','Success:\x20','is_anomaly','search','Error\x20launching\x20Python:\x20','HEALTH_RESULT','entries','SECURITY_RESULT','payload','analysis.security.currentThreshold','5864hJAtXr','info','substring','204715SoXKTa','analysis.prediction.trackerConfidence','toLocaleTimeString','ENERGY_OPTIMIZE_RESULT','details','analysis.prediction.confidence','toFixed','message','analysis.security.lastCheck','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','analysis.automation.detectedPatterns','constructor','âœ…\x20HEALTH\x20TRAINED.','error','val','analysis.energy.mpcActive','analysis.training.status','analysis.health.isAnomaly','startsWith','stdout','analysis.energy.ventilationAlerts','analysis.prediction.nextRoom','analysis.health.gaitSpeed','trim','325885fjQcsm','exports','15XjXOSZ','6AuLvAH','7785ofCusg','âš ï¸\x20SECURITY\x20ALARM:\x20','238512kJcVYP','ðŸ\x20Python\x20Pong','close','existsSync','9jSEJYh','stringify','threshold','87496CjyEOI','VENTILATION_ALERT','sendToPythonWrapper','write','TRAINING_COMPLETE','(((.+)+)+)+$','debug','success','service.py','applyEnergySavings','6906581hgzxLn','analysis.alertReason','type','analysis.energy.heatingScore','log','GAIT_RESULT'];a4_0x4a8a=function(){return _0x3af505;};return a4_0x4a8a();}function handleResult(_0x15884a,_0x26ce52){const _0x598df2=a4_0x5a8620;if(_0x26ce52[_0x598df2(0xda)]==='PONG')_0x15884a['log'][_0x598df2(0x13a)](_0x598df2(0x12e));else{if(_0x26ce52[_0x598df2(0xda)]===_0x598df2(0x109)){const {anomaly_score:_0x13eb94,is_anomaly:_0x104988,threshold:_0x1a96af,explanation:_0x34ecb3}=_0x26ce52[_0x598df2(0x10a)];_0x15884a[_0x598df2(0xe2)](_0x598df2(0xe3),{'val':_0x13eb94,'ack':!![]}),_0x15884a[_0x598df2(0xe2)](_0x598df2(0x117),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x1a96af)_0x15884a[_0x598df2(0xe2)](_0x598df2(0x10b),{'val':_0x1a96af,'ack':!![]});if(_0x104988){let _0x1e283f=_0x598df2(0x118)+_0x13eb94[_0x598df2(0x115)](0x4)+')';if(_0x34ecb3&&_0x34ecb3!==_0x598df2(0xef))_0x1e283f+=_0x598df2(0xfb)+_0x34ecb3;_0x15884a[_0x598df2(0xe2)](_0x598df2(0xfe),{'val':!![],'ack':!![]}),_0x15884a[_0x598df2(0xe2)](_0x598df2(0x13f),{'val':_0x1e283f,'ack':!![]}),setup['sendNotification'](_0x15884a,_0x598df2(0x12c)+_0x1e283f,![],!![]);}}else{if(_0x26ce52[_0x598df2(0xda)]===_0x598df2(0x138)){const _0x4978a3=_0x26ce52[_0x598df2(0x10a)]['details']||'',_0x54e1f8=_0x26ce52[_0x598df2(0x10a)][_0x598df2(0x133)],_0x4fc84d=_0x26ce52[_0x598df2(0x10a)][_0x598df2(0x13b)]?_0x598df2(0x103)+new Date()[_0x598df2(0x111)]()+'\x20('+_0x4978a3+')':_0x598df2(0xf9)+_0x26ce52['payload'][_0x598df2(0xe1)];_0x15884a['setStateAsync'](_0x598df2(0x11f),{'val':_0x4fc84d,'ack':!![]});if(_0x26ce52[_0x598df2(0x10a)]['success']&&_0x54e1f8)_0x15884a[_0x598df2(0xe2)](_0x598df2(0x10b),{'val':_0x54e1f8,'ack':!![]});}else{if(_0x26ce52[_0x598df2(0xda)]===_0x598df2(0xfd)){if(_0x26ce52[_0x598df2(0x10a)][_0x598df2(0x13b)])try{const _0x36b462=JSON[_0x598df2(0xf8)](_0x26ce52[_0x598df2(0x10a)][_0x598df2(0x113)]);if(_0x36b462['insulation'])_0x15884a[_0x598df2(0xe2)]('analysis.energy.insulationScore',{'val':JSON[_0x598df2(0x132)](_0x36b462[_0x598df2(0xe4)]),'ack':!![]});if(_0x36b462['heating'])_0x15884a['setStateAsync'](_0x598df2(0xdb),{'val':JSON['stringify'](_0x36b462['heating']),'ack':!![]});}catch(_0x5fed6c){}}else{if(_0x26ce52['type']===_0x598df2(0xf5)){if(_0x26ce52[_0x598df2(0x10a)][_0x598df2(0x13b)])_0x15884a[_0x598df2(0xdc)][_0x598df2(0x10d)](_0x598df2(0x11b));}else{if(_0x26ce52['type']===_0x598df2(0x107))_0x15884a[_0x598df2(0xe2)]('analysis.health.lastCheck',{'val':new Date()[_0x598df2(0xee)](),'ack':!![]}),_0x15884a[_0x598df2(0xe2)](_0x598df2(0x120),{'val':_0x26ce52[_0x598df2(0x10a)][_0x598df2(0x104)],'ack':!![]});else{if(_0x26ce52[_0x598df2(0xda)]===_0x598df2(0xdd)){const {speed_trend:_0x384110}=_0x26ce52['payload'];if(_0x384110!==undefined)_0x15884a['setStateAsync'](_0x598df2(0x125),{'val':_0x384110,'ack':!![]});}else{if(_0x26ce52[_0x598df2(0xda)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x48140c}=_0x26ce52[_0x598df2(0x10a)];if(_0x48140c)_0x15884a['setStateAsync'](_0x598df2(0xea),{'val':JSON[_0x598df2(0x132)](_0x48140c),'ack':!![]});}else{if(_0x26ce52[_0x598df2(0xda)]===_0x598df2(0xfc)){const {times:_0x4e6fba}=_0x26ce52[_0x598df2(0x10a)];if(_0x4e6fba)_0x15884a[_0x598df2(0xe2)](_0x598df2(0xde),{'val':JSON[_0x598df2(0x132)](_0x4e6fba),'ack':!![]});}else{if(_0x26ce52[_0x598df2(0xda)]===_0x598df2(0xec)){const {forecast:_0x46119a}=_0x26ce52[_0x598df2(0x10a)];if(_0x46119a)_0x15884a['setStateAsync']('analysis.energy.pinnForecast',{'val':JSON[_0x598df2(0x132)](_0x46119a),'ack':!![]});}else{if(_0x26ce52[_0x598df2(0xda)]===_0x598df2(0x135)){const {alerts:_0x21423d}=_0x26ce52[_0x598df2(0x10a)];if(_0x21423d)_0x15884a[_0x598df2(0xe2)](_0x598df2(0x123),{'val':JSON[_0x598df2(0x132)](_0x21423d),'ack':!![]});}else{if(_0x26ce52[_0x598df2(0xda)]===_0x598df2(0x112)){const {proposals:_0x26a77f}=_0x26ce52[_0x598df2(0x10a)];_0x15884a['getState'](_0x598df2(0x11e),(_0x560ae3,_0x4f5d63)=>{const _0x5b43d1=_0x598df2;_0x4f5d63&&_0x4f5d63[_0x5b43d1(0x11d)]===!![]&&_0x26a77f&&_0x26a77f[_0x5b43d1(0xe8)]>0x0&&automation[_0x5b43d1(0x13d)](_0x15884a,_0x26a77f);});}else{if(_0x26ce52[_0x598df2(0xda)]==='SIGNAL_RESULT'){const {room:_0x10a546,propagation:_0x5e93cb}=_0x26ce52[_0x598df2(0x10a)];let _0x66d817='Unknown',_0x4ddd27=0x0;if(_0x5e93cb){const _0x5776c4=Object[_0x598df2(0x108)](_0x5e93cb);_0x5776c4[_0x598df2(0xe8)]>0x0&&(_0x66d817=_0x5776c4[0x0][0x0],_0x4ddd27=_0x5776c4[0x0][0x1]);}_0x15884a[_0x598df2(0xe2)](_0x598df2(0x124),{'val':_0x66d817,'ack':!![]}),_0x15884a['setStateAsync'](_0x598df2(0x114),{'val':_0x4ddd27,'ack':!![]}),automation['handlePrediction'](_0x15884a,_0x66d817,_0x4ddd27);}else{if(_0x26ce52[_0x598df2(0xda)]==='TRACKER_RESULT'){const {probabilities:_0x37ab65}=_0x26ce52[_0x598df2(0x10a)];if(_0x37ab65){_0x15884a[_0x598df2(0xe2)](_0x598df2(0xf2),{'val':JSON[_0x598df2(0x132)](_0x37ab65),'ack':!![]});const _0x38449a=Object[_0x598df2(0xf6)](_0x37ab65);if(_0x38449a[_0x598df2(0xe8)]>0x0){const _0x1ff18e=_0x38449a[0x0],_0x413071=_0x37ab65[_0x1ff18e];_0x15884a[_0x598df2(0xe2)](_0x598df2(0xeb),{'val':_0x1ff18e,'ack':!![]}),_0x15884a[_0x598df2(0xe2)](_0x598df2(0x110),{'val':_0x413071,'ack':!![]});}}}else{if(_0x26ce52[_0x598df2(0xda)]===_0x598df2(0xf3)){const {patterns:_0x588a2e}=_0x26ce52[_0x598df2(0x10a)];if(_0x588a2e&&_0x588a2e[_0x598df2(0xe8)]>0x0)_0x15884a[_0x598df2(0xe2)](_0x598df2(0x119),{'val':JSON[_0x598df2(0x132)](_0x588a2e),'ack':!![]});}}}}}}}}}}}}}}}}function startService(_0x535250,_0x23e319){const _0x2bf3a9=a4_0x5a8620;let _0xa4d778=_0x2bf3a9(0xe7);if(fs[_0x2bf3a9(0x130)](_0x23e319))_0xa4d778=_0x23e319;try{const _0x5f9eae=path[_0x2bf3a9(0xe9)](__dirname,'..',_0x2bf3a9(0xe0),_0x2bf3a9(0x13c));pythonProcess=spawn(_0xa4d778,[_0x5f9eae]),pythonProcess[_0x2bf3a9(0x122)]['on']('data',_0x53db17=>{const _0x51470f=_0x2bf3a9,_0x226582=_0x53db17[_0x51470f(0xf4)]()['split']('\x0a');_0x226582[_0x51470f(0xff)](_0x210fbb=>{const _0x409393=_0x51470f,_0x3c31ee=_0x210fbb[_0x409393(0x126)]();if(!_0x3c31ee)return;if(_0x3c31ee[_0x409393(0x121)](_0x409393(0x101)))_0x535250[_0x409393(0xdc)][_0x409393(0x13a)]('[PYTHON]\x20'+_0x3c31ee[_0x409393(0x10e)](0x5)[_0x409393(0x126)]());else{if(_0x3c31ee[_0x409393(0x121)](_0x409393(0xdf)))try{const _0x1c46c5=JSON['parse'](_0x3c31ee['substring'](0x8)[_0x409393(0x126)]());handleResult(_0x535250,_0x1c46c5);}catch(_0x4079e8){}}});}),pythonProcess['on'](_0x2bf3a9(0x12f),_0x16a2d3=>{pythonProcess=null;}),_0x535250[_0x2bf3a9(0x136)]=(_0x93da88,_0x5e3ab1)=>send(_0x535250,_0x93da88,_0x5e3ab1);}catch(_0x1a8573){_0x535250[_0x2bf3a9(0xdc)][_0x2bf3a9(0x11c)](_0x2bf3a9(0x106)+_0x1a8573[_0x2bf3a9(0x116)]);}}function a4_0x517e(_0x3fe3bf,_0x171495){const _0x546619=a4_0x4a8a();return a4_0x517e=function(_0x187b41,_0x1f252e){_0x187b41=_0x187b41-0xda;let _0x4a8a4c=_0x546619[_0x187b41];return _0x4a8a4c;},a4_0x517e(_0x3fe3bf,_0x171495);}function stopService(_0x1e0981){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x575f79){}pythonProcess=null;}}module[a4_0x5a8620(0x128)]={'startService':startService,'stopService':stopService,'send':send};