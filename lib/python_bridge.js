function a4_0x3e8f(){const _0x43a95c=['threshold','75019qzrRYx','entries','payload','data','path','reason','log','[LOG]','search','toFixed','42YSiCqj','âš ï¸\x20SECURITY\x20ALARM:\x20','ENERGY_OPTIMIZE_RESULT','python_service','./setup','analysis.health.isAnomaly','analysis.health.lastCheck','existsSync','toLocaleTimeString','details','stringify','stdin','analysis.energy.heatingScore','[PYTHON]\x20','writable','type','48ZbBLjw','close','message','analysis.health.gaitSpeed','GAIT_RESULT','analysis.energy.pinnForecast','TRAINING_COMPLETE','setStateAsync','analysis.prediction.confidence','653628lCDpOT','COMFORT_RESULT','Error\x20launching\x20Python:\x20','analysis.energy.insulationScore','91STLsJq','parse','Success:\x20','994176TBUPgL','insulation','join','\x0aGrund:\x20','âœ…\x20HEALTH\x20TRAINED.','ENERGY_PREDICT_RESULT','sendNotification','heating','apply','analysis.training.status','HEALTH_RESULT','info','substring','handlePrediction','11ypEKkh','852590pTstcJ','constructor','toString','toISOString','write','analysis.security.currentThreshold','sendToPythonWrapper','split','SIGNAL_RESULT','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','is_anomaly','PONG','10yyLMPz','debug','trim','400382UbQBPM','analysis.energy.mpcActive','analysis.isAlert','9504080XLBAEy','analysis.alertReason','analysis.automation.detectedPatterns','ðŸ\x20Python\x20Pong','SECURITY_RESULT','1448844VRpMjC','startsWith','Unknown','analysis.energy.forecast','length','analysis.security.lastScore','success','forEach','val','3jqLdAy','HEALTH_TRAIN_RESULT','service.py','stdout'];a4_0x3e8f=function(){return _0x43a95c;};return a4_0x3e8f();}const a4_0x4f4f1a=a4_0x3be6;(function(_0x5a86c1,_0x5b20df){const _0x18b7a8=a4_0x3be6,_0x4e5892=_0x5a86c1();while(!![]){try{const _0x144392=-parseInt(_0x18b7a8(0x1f0))/0x1+-parseInt(_0x18b7a8(0x23f))/0x2*(parseInt(_0x18b7a8(0x201))/0x3)+-parseInt(_0x18b7a8(0x1f8))/0x4*(-parseInt(_0x18b7a8(0x1ed))/0x5)+parseInt(_0x18b7a8(0x210))/0x6*(-parseInt(_0x18b7a8(0x206))/0x7)+-parseInt(_0x18b7a8(0x220))/0x8*(parseInt(_0x18b7a8(0x230))/0x9)+parseInt(_0x18b7a8(0x1f3))/0xa*(parseInt(_0x18b7a8(0x23e))/0xb)+-parseInt(_0x18b7a8(0x229))/0xc*(-parseInt(_0x18b7a8(0x22d))/0xd);if(_0x144392===_0x5b20df)break;else _0x4e5892['push'](_0x4e5892['shift']());}catch(_0x381d86){_0x4e5892['push'](_0x4e5892['shift']());}}}(a4_0x3e8f,0x78071));const a4_0x145a28=(function(){let _0x24d629=!![];return function(_0x583442,_0x5850db){const _0x39d1fd=_0x24d629?function(){const _0x430057=a4_0x3be6;if(_0x5850db){const _0x563616=_0x5850db[_0x430057(0x238)](_0x583442,arguments);return _0x5850db=null,_0x563616;}}:function(){};return _0x24d629=![],_0x39d1fd;};}()),a4_0x1b02ae=a4_0x145a28(this,function(){const _0x502dc6=a4_0x3be6;return a4_0x1b02ae['toString']()[_0x502dc6(0x20e)]('(((.+)+)+)+$')[_0x502dc6(0x241)]()[_0x502dc6(0x240)](a4_0x1b02ae)['search']('(((.+)+)+)+$');});a4_0x1b02ae();'use strict';const {spawn}=require('child_process'),path=require(a4_0x4f4f1a(0x20a)),fs=require('fs'),setup=require(a4_0x4f4f1a(0x214)),automation=require('./automation');let pythonProcess=null;function send(_0x5d46f8,_0x243090,_0x553442={}){const _0xd30ec8=a4_0x4f4f1a;if(!pythonProcess||!pythonProcess[_0xd30ec8(0x21b)][_0xd30ec8(0x21e)])return;const _0x29115f=JSON['stringify']({'command':_0x243090,..._0x553442});try{pythonProcess[_0xd30ec8(0x21b)][_0xd30ec8(0x243)](_0x29115f+'\x0a');}catch(_0x525a66){}}function a4_0x3be6(_0x42301b,_0x1bcfb2){const _0x26271d=a4_0x3e8f();return a4_0x3be6=function(_0x1b02ae,_0x145a28){_0x1b02ae=_0x1b02ae-0x1ec;let _0x3e8f82=_0x26271d[_0x1b02ae];return _0x3e8f82;},a4_0x3be6(_0x42301b,_0x1bcfb2);}function handleResult(_0x36a4dd,_0x180ad3){const _0x573190=a4_0x4f4f1a;if(_0x180ad3['type']===_0x573190(0x1ec))_0x36a4dd[_0x573190(0x20c)][_0x573190(0x1ee)](_0x573190(0x1f6));else{if(_0x180ad3['type']===_0x573190(0x1f7)){const {anomaly_score:_0x69d2c1,is_anomaly:_0x255a52,threshold:_0x5e3aaa,explanation:_0x4066f4}=_0x180ad3[_0x573190(0x208)];_0x36a4dd[_0x573190(0x227)](_0x573190(0x1fd),{'val':_0x69d2c1,'ack':!![]}),_0x36a4dd[_0x573190(0x227)]('analysis.security.lastCheck',{'val':new Date()[_0x573190(0x242)](),'ack':!![]});if(_0x5e3aaa)_0x36a4dd[_0x573190(0x227)](_0x573190(0x244),{'val':_0x5e3aaa,'ack':!![]});if(_0x255a52){let _0x13e41d=_0x573190(0x248)+_0x69d2c1[_0x573190(0x20f)](0x4)+')';if(_0x4066f4&&_0x4066f4!=='Unknown')_0x13e41d+=_0x573190(0x233)+_0x4066f4;_0x36a4dd[_0x573190(0x227)](_0x573190(0x1f2),{'val':!![],'ack':!![]}),_0x36a4dd[_0x573190(0x227)](_0x573190(0x1f4),{'val':_0x13e41d,'ack':!![]}),setup[_0x573190(0x236)](_0x36a4dd,_0x573190(0x211)+_0x13e41d,![],!![]);}}else{if(_0x180ad3[_0x573190(0x21f)]===_0x573190(0x226)){const _0xece8b1=_0x180ad3[_0x573190(0x208)][_0x573190(0x219)]||'',_0x310ba6=_0x180ad3[_0x573190(0x208)][_0x573190(0x205)],_0x17c283=_0x180ad3['payload'][_0x573190(0x1fe)]?_0x573190(0x22f)+new Date()[_0x573190(0x218)]()+'\x20('+_0xece8b1+')':'Failed:\x20'+_0x180ad3['payload'][_0x573190(0x20b)];_0x36a4dd['setStateAsync'](_0x573190(0x239),{'val':_0x17c283,'ack':!![]});if(_0x180ad3['payload']['success']&&_0x310ba6)_0x36a4dd[_0x573190(0x227)](_0x573190(0x244),{'val':_0x310ba6,'ack':!![]});}else{if(_0x180ad3['type']==='ENERGY_TRAIN_RESULT'){if(_0x180ad3[_0x573190(0x208)][_0x573190(0x1fe)])try{const _0x54c8b7=JSON[_0x573190(0x22e)](_0x180ad3[_0x573190(0x208)][_0x573190(0x219)]);if(_0x54c8b7[_0x573190(0x231)])_0x36a4dd[_0x573190(0x227)](_0x573190(0x22c),{'val':JSON['stringify'](_0x54c8b7['insulation']),'ack':!![]});if(_0x54c8b7[_0x573190(0x237)])_0x36a4dd[_0x573190(0x227)](_0x573190(0x21c),{'val':JSON[_0x573190(0x21a)](_0x54c8b7[_0x573190(0x237)]),'ack':!![]});}catch(_0x2caa3b){}}else{if(_0x180ad3['type']===_0x573190(0x202)){if(_0x180ad3[_0x573190(0x208)][_0x573190(0x1fe)])_0x36a4dd[_0x573190(0x20c)][_0x573190(0x23b)](_0x573190(0x234));}else{if(_0x180ad3['type']===_0x573190(0x23a))_0x36a4dd[_0x573190(0x227)](_0x573190(0x216),{'val':new Date()[_0x573190(0x242)](),'ack':!![]}),_0x36a4dd[_0x573190(0x227)](_0x573190(0x215),{'val':_0x180ad3['payload'][_0x573190(0x249)],'ack':!![]});else{if(_0x180ad3[_0x573190(0x21f)]===_0x573190(0x224)){const {speed_trend:_0x35ccc5}=_0x180ad3[_0x573190(0x208)];if(_0x35ccc5!==undefined)_0x36a4dd[_0x573190(0x227)](_0x573190(0x223),{'val':_0x35ccc5,'ack':!![]});}else{if(_0x180ad3[_0x573190(0x21f)]===_0x573190(0x235)){const {forecast:_0x290f3b}=_0x180ad3['payload'];if(_0x290f3b)_0x36a4dd[_0x573190(0x227)](_0x573190(0x1fb),{'val':JSON['stringify'](_0x290f3b),'ack':!![]});}else{if(_0x180ad3[_0x573190(0x21f)]==='PINN_PREDICT_RESULT'){const {forecast:_0x49de42}=_0x180ad3[_0x573190(0x208)];if(_0x49de42)_0x36a4dd[_0x573190(0x227)](_0x573190(0x225),{'val':JSON[_0x573190(0x21a)](_0x49de42),'ack':!![]});}else{if(_0x180ad3[_0x573190(0x21f)]===_0x573190(0x212)){const {proposals:_0x2db120}=_0x180ad3['payload'];_0x36a4dd['getState'](_0x573190(0x1f1),(_0x2a16c9,_0xa12d30)=>{const _0x45ae77=_0x573190;_0xa12d30&&_0xa12d30[_0x45ae77(0x200)]===!![]&&_0x2db120&&_0x2db120[_0x45ae77(0x1fc)]>0x0&&automation['applyEnergySavings'](_0x36a4dd,_0x2db120);});}else{if(_0x180ad3[_0x573190(0x21f)]===_0x573190(0x247)){const {room:_0x378c0a,propagation:_0x41b950}=_0x180ad3['payload'];let _0x47e3cb=_0x573190(0x1fa),_0x489002=0x0;if(_0x41b950){const _0x2aeb48=Object[_0x573190(0x207)](_0x41b950);_0x2aeb48[_0x573190(0x1fc)]>0x0&&(_0x47e3cb=_0x2aeb48[0x0][0x0],_0x489002=_0x2aeb48[0x0][0x1]);}_0x36a4dd[_0x573190(0x227)]('analysis.prediction.nextRoom',{'val':_0x47e3cb,'ack':!![]}),_0x36a4dd['setStateAsync'](_0x573190(0x228),{'val':_0x489002,'ack':!![]}),automation[_0x573190(0x23d)](_0x36a4dd,_0x47e3cb,_0x489002);}else{if(_0x180ad3['type']===_0x573190(0x22a)){const {patterns:_0x27f032}=_0x180ad3[_0x573190(0x208)];if(_0x27f032&&_0x27f032[_0x573190(0x1fc)]>0x0)_0x36a4dd['setStateAsync'](_0x573190(0x1f5),{'val':JSON[_0x573190(0x21a)](_0x27f032),'ack':!![]});}}}}}}}}}}}}}function startService(_0x48f9d9,_0x5d922e){const _0x29d9d7=a4_0x4f4f1a;let _0xe11e32='python3';if(fs[_0x29d9d7(0x217)](_0x5d922e))_0xe11e32=_0x5d922e;try{const _0x2072a4=path[_0x29d9d7(0x232)](__dirname,'..',_0x29d9d7(0x213),_0x29d9d7(0x203));pythonProcess=spawn(_0xe11e32,[_0x2072a4]),pythonProcess[_0x29d9d7(0x204)]['on'](_0x29d9d7(0x209),_0x41a7c5=>{const _0x362809=_0x29d9d7,_0x97899a=_0x41a7c5[_0x362809(0x241)]()[_0x362809(0x246)]('\x0a');_0x97899a[_0x362809(0x1ff)](_0xe84c6a=>{const _0x3a529b=_0x362809,_0x2a6646=_0xe84c6a[_0x3a529b(0x1ef)]();if(!_0x2a6646)return;if(_0x2a6646['startsWith'](_0x3a529b(0x20d)))_0x48f9d9['log'][_0x3a529b(0x1ee)](_0x3a529b(0x21d)+_0x2a6646[_0x3a529b(0x23c)](0x5)[_0x3a529b(0x1ef)]());else{if(_0x2a6646[_0x3a529b(0x1f9)]('[RESULT]'))try{const _0x4b4559=JSON['parse'](_0x2a6646[_0x3a529b(0x23c)](0x8)[_0x3a529b(0x1ef)]());handleResult(_0x48f9d9,_0x4b4559);}catch(_0x4ebafb){}}});}),pythonProcess['on'](_0x29d9d7(0x221),_0x568ea8=>{pythonProcess=null;}),_0x48f9d9[_0x29d9d7(0x245)]=(_0x5bb1fe,_0x29eeb8)=>send(_0x48f9d9,_0x5bb1fe,_0x29eeb8);}catch(_0x85e73){_0x48f9d9[_0x29d9d7(0x20c)]['error'](_0x29d9d7(0x22b)+_0x85e73[_0x29d9d7(0x222)]);}}function stopService(_0x22de35){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x5c3a29){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};