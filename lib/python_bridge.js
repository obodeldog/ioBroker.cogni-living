const a4_0x11d89e=a4_0x2a7d;function a4_0x2a7d(_0x1559d0,_0x5915cc){const _0x44f115=a4_0x1ce1();return a4_0x2a7d=function(_0x582892,_0x2f8ff8){_0x582892=_0x582892-0x120;let _0x1ce1d9=_0x44f115[_0x582892];return _0x1ce1d9;},a4_0x2a7d(_0x1559d0,_0x5915cc);}(function(_0x152a9b,_0x342352){const _0xdf4a14=a4_0x2a7d,_0x44e264=_0x152a9b();while(!![]){try{const _0x25be71=parseInt(_0xdf4a14(0x133))/0x1*(-parseInt(_0xdf4a14(0x144))/0x2)+parseInt(_0xdf4a14(0x16c))/0x3+parseInt(_0xdf4a14(0x162))/0x4+-parseInt(_0xdf4a14(0x120))/0x5*(parseInt(_0xdf4a14(0x178))/0x6)+parseInt(_0xdf4a14(0x177))/0x7+-parseInt(_0xdf4a14(0x175))/0x8*(-parseInt(_0xdf4a14(0x159))/0x9)+-parseInt(_0xdf4a14(0x160))/0xa*(parseInt(_0xdf4a14(0x155))/0xb);if(_0x25be71===_0x342352)break;else _0x44e264['push'](_0x44e264['shift']());}catch(_0x40da1a){_0x44e264['push'](_0x44e264['shift']());}}}(a4_0x1ce1,0x33863));const a4_0x2f8ff8=(function(){let _0x57d120=!![];return function(_0x5bdd7a,_0x219593){const _0x23bb4b=_0x57d120?function(){const _0x1b9169=a4_0x2a7d;if(_0x219593){const _0x439a43=_0x219593[_0x1b9169(0x13d)](_0x5bdd7a,arguments);return _0x219593=null,_0x439a43;}}:function(){};return _0x57d120=![],_0x23bb4b;};}()),a4_0x582892=a4_0x2f8ff8(this,function(){const _0xf40322=a4_0x2a7d;return a4_0x582892[_0xf40322(0x153)]()[_0xf40322(0x18e)](_0xf40322(0x128))['toString']()[_0xf40322(0x18d)](a4_0x582892)[_0xf40322(0x18e)](_0xf40322(0x128));});a4_0x582892();'use strict';const {spawn}=require(a4_0x11d89e(0x163)),path=require(a4_0x11d89e(0x168)),fs=require('fs'),setup=require(a4_0x11d89e(0x147)),automation=require('./automation');let pythonProcess=null;function a4_0x1ce1(){const _0x4a982c=['ENERGY_PREDICT_RESULT','constructor','search','ENERGY_TRAIN_RESULT','forEach','âœ…\x20HEALTH\x20TRAINED.','exports','[RESULT]','5FtXijj','threshold','heating','RL_PENALTY_UPDATE','setStateAsync','ENERGY_OPTIMIZE_RESULT','analysis.energy.ventilationAlerts','write','(((.+)+)+)+$','warn','HEALTH_TRAIN_RESULT','val','analysis.energy.insulationScore','[LOG]','length','COMFORT_RESULT','.\x20Please\x20create\x20this\x20file!','analysis.security.lastScore','stdout','50723xOdlBQ','analysis.prediction.confidence','Unknown','success','ðŸ“ˆ\x20Health\x20Trend:\x20','stdin','analysis.health.gaitSpeed','analysis.energy.rlPenalties','VENTILATION_ALERT','analysis.health.lastCheck','apply','close','debug','getState','writable','analysis.security.currentThreshold','python3','2xeMLbc','analysis.prediction.trackerState','[PYTHON]\x20','./setup','HEALTH_RESULT','applyEnergySavings','2-digit','âš ï¸\x20SECURITY\x20ALARM:\x20','join','startsWith','log','analysis.prediction.nextRoom','TRAINING_COMPLETE','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20','[PYTHON\x20ERR]\x20','toString','HEALTH_TREND_RESULT','11oSgDAp','Success:\x20','short','message','266319bzVeXg','toISOString','insulation','analysis.energy.forecast','parse','sendToPythonWrapper','data','3841090KYgUbL','\x20AND\x20','1341064GERTkF','child_process','service.py','ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20','details','analysis.health.isAnomaly','path','Python\x20process\x20exited\x20with\x20code\x20','trim','existsSync','1002987aDlKur','entries','SECURITY_RESULT','python_service','analysis.energy.warmupSources','\x0aGrund:\x20','stringify','de-DE','analysis.prediction.trackerConfidence','40aQxRSU','toFixed','1046402ZIhuqI','1926966MaUmVm','toLocaleTimeString','analysis.isAlert','analysis.health.gaitDebug','split','SIGNAL_RESULT','analysis.energy.warmupTimes','type','ðŸ\x20Python\x20Pong','analysis.energy.heatingScore','error','payload','analysis.energy.mpcActive','toLocaleDateString','analysis.health.activityTrend','substring','analysis.prediction.trackerTopRoom','is_anomaly','reason','info'];a4_0x1ce1=function(){return _0x4a982c;};return a4_0x1ce1();}function send(_0x3b302d,_0x1eec71,_0x521757={}){const _0x11e1b8=a4_0x11d89e;if(!pythonProcess||!pythonProcess['stdin'][_0x11e1b8(0x141)])return;const _0x32f33d=JSON[_0x11e1b8(0x172)]({'command':_0x1eec71,..._0x521757});try{pythonProcess[_0x11e1b8(0x138)][_0x11e1b8(0x127)](_0x32f33d+'\x0a');}catch(_0x989f03){}}function handleResult(_0x4ba944,_0x42e538){const _0xb897dc=a4_0x11d89e;if(_0x42e538['type']==='PONG')_0x4ba944[_0xb897dc(0x14e)][_0xb897dc(0x13f)](_0xb897dc(0x180));else{if(_0x42e538['type']===_0xb897dc(0x16e)){const {anomaly_score:_0x42b984,is_anomaly:_0x4d41c2,threshold:_0x4ca820,explanation:_0x453c03}=_0x42e538[_0xb897dc(0x183)];_0x4ba944[_0xb897dc(0x124)](_0xb897dc(0x131),{'val':_0x42b984,'ack':!![]}),_0x4ba944[_0xb897dc(0x124)]('analysis.security.lastCheck',{'val':new Date()[_0xb897dc(0x15a)](),'ack':!![]});if(_0x4ca820)_0x4ba944[_0xb897dc(0x124)](_0xb897dc(0x142),{'val':_0x4ca820,'ack':!![]});if(_0x4d41c2){let _0x48f90f='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x42b984[_0xb897dc(0x176)](0x4)+')';if(_0x453c03&&_0x453c03!==_0xb897dc(0x135))_0x48f90f+=_0xb897dc(0x171)+_0x453c03;_0x4ba944['setStateAsync'](_0xb897dc(0x17a),{'val':!![],'ack':!![]}),_0x4ba944[_0xb897dc(0x124)]('analysis.alertReason',{'val':_0x48f90f,'ack':!![]}),setup['sendNotification'](_0x4ba944,_0xb897dc(0x14b)+_0x48f90f,![],!![]);}}else{if(_0x42e538['type']===_0xb897dc(0x150)){const _0x214904=_0x42e538[_0xb897dc(0x183)][_0xb897dc(0x166)]||'',_0x21277a=_0x42e538[_0xb897dc(0x183)][_0xb897dc(0x121)],_0x3e766b=_0x42e538['payload']['success']?_0xb897dc(0x156)+new Date()[_0xb897dc(0x179)]()+'\x20('+_0x214904+')':'Failed:\x20'+_0x42e538[_0xb897dc(0x183)][_0xb897dc(0x18a)];_0x4ba944[_0xb897dc(0x124)]('analysis.training.status',{'val':_0x3e766b,'ack':!![]});if(_0x42e538[_0xb897dc(0x183)][_0xb897dc(0x136)]&&_0x21277a)_0x4ba944['setStateAsync'](_0xb897dc(0x142),{'val':_0x21277a,'ack':!![]});}else{if(_0x42e538['type']===_0xb897dc(0x18f)){if(_0x42e538[_0xb897dc(0x183)][_0xb897dc(0x136)])try{const _0x501341=JSON[_0xb897dc(0x15d)](_0x42e538[_0xb897dc(0x183)][_0xb897dc(0x166)]);if(_0x501341['insulation'])_0x4ba944[_0xb897dc(0x124)](_0xb897dc(0x12c),{'val':JSON[_0xb897dc(0x172)](_0x501341[_0xb897dc(0x15b)]),'ack':!![]});if(_0x501341[_0xb897dc(0x122)])_0x4ba944[_0xb897dc(0x124)](_0xb897dc(0x181),{'val':JSON['stringify'](_0x501341[_0xb897dc(0x122)]),'ack':!![]});}catch(_0x2a7904){}}else{if(_0x42e538[_0xb897dc(0x17f)]===_0xb897dc(0x12a)){if(_0x42e538[_0xb897dc(0x183)][_0xb897dc(0x136)]){_0x4ba944[_0xb897dc(0x14e)][_0xb897dc(0x18b)](_0xb897dc(0x191));const _0x357d76=new Date(),_0x5b3380=_0x357d76['toLocaleDateString'](_0xb897dc(0x173),{'day':_0xb897dc(0x14a),'month':_0xb897dc(0x157),'hour':'2-digit','minute':'2-digit'});_0x4ba944[_0xb897dc(0x124)]('analysis.health.lastCheck',{'val':_0x5b3380,'ack':!![]});}}else{if(_0x42e538[_0xb897dc(0x17f)]===_0xb897dc(0x148)){const _0x295f77=new Date(),_0x27b417=_0x295f77[_0xb897dc(0x185)](_0xb897dc(0x173),{'day':'2-digit','month':_0xb897dc(0x157),'hour':_0xb897dc(0x14a),'minute':_0xb897dc(0x14a)});_0x4ba944[_0xb897dc(0x124)](_0xb897dc(0x13c),{'val':_0x27b417,'ack':!![]}),_0x4ba944[_0xb897dc(0x124)](_0xb897dc(0x167),{'val':_0x42e538['payload'][_0xb897dc(0x189)],'ack':!![]});}else{if(_0x42e538['type']===_0xb897dc(0x154)){const {trend_percent:_0x5a24be,details:_0x13ae02}=_0x42e538[_0xb897dc(0x183)],_0x3d74a3=new Date(),_0x320142=_0x3d74a3[_0xb897dc(0x185)](_0xb897dc(0x173),{'day':_0xb897dc(0x14a),'month':'short','hour':_0xb897dc(0x14a),'minute':_0xb897dc(0x14a)});_0x4ba944['setStateAsync']('analysis.health.lastCheck',{'val':_0x320142,'ack':!![]}),_0x4ba944[_0xb897dc(0x124)](_0xb897dc(0x186),{'val':_0x5a24be,'ack':!![]}),_0x4ba944[_0xb897dc(0x14e)]['info'](_0xb897dc(0x137)+_0x13ae02);}else{if(_0x42e538[_0xb897dc(0x17f)]==='GAIT_RESULT'){const {speed_trend:_0xf21d8a,sensors:_0x5c9ec2,proof:_0x20b5f0}=_0x42e538['payload'];if(_0xf21d8a!==undefined)_0x4ba944[_0xb897dc(0x124)](_0xb897dc(0x139),{'val':_0xf21d8a,'ack':!![]});if(_0x5c9ec2&&Array['isArray'](_0x5c9ec2))_0x4ba944[_0xb897dc(0x124)]('analysis.health.gaitSensors',{'val':_0x5c9ec2['join'](',\x20'),'ack':!![]});if(_0x20b5f0)_0x4ba944[_0xb897dc(0x124)](_0xb897dc(0x17b),{'val':_0x20b5f0,'ack':!![]});}else{if(_0x42e538[_0xb897dc(0x17f)]===_0xb897dc(0x18c)){const {forecast:_0x33fc2c}=_0x42e538[_0xb897dc(0x183)];if(_0x33fc2c)_0x4ba944[_0xb897dc(0x124)](_0xb897dc(0x15c),{'val':JSON[_0xb897dc(0x172)](_0x33fc2c),'ack':!![]});}else{if(_0x42e538[_0xb897dc(0x17f)]==='WARMUP_RESULT'){const {times:_0x1ac8fd,sources:_0x5d019d,details:_0x1a7019}=_0x42e538[_0xb897dc(0x183)];if(_0x1ac8fd)_0x4ba944['setStateAsync'](_0xb897dc(0x17e),{'val':JSON[_0xb897dc(0x172)](_0x1ac8fd),'ack':!![]});if(_0x5d019d)_0x4ba944[_0xb897dc(0x124)](_0xb897dc(0x170),{'val':JSON[_0xb897dc(0x172)](_0x5d019d),'ack':!![]});if(_0x1a7019)_0x4ba944[_0xb897dc(0x124)]('analysis.energy.warmupDetails',{'val':JSON[_0xb897dc(0x172)](_0x1a7019),'ack':!![]});}else{if(_0x42e538['type']===_0xb897dc(0x123)){const {penalties:_0x54af5c}=_0x42e538[_0xb897dc(0x183)];if(_0x54af5c)_0x4ba944[_0xb897dc(0x124)](_0xb897dc(0x13a),{'val':JSON['stringify'](_0x54af5c),'ack':!![]});}else{if(_0x42e538[_0xb897dc(0x17f)]==='PINN_PREDICT_RESULT'){const {forecast:_0x53969c}=_0x42e538[_0xb897dc(0x183)];if(_0x53969c)_0x4ba944[_0xb897dc(0x124)]('analysis.energy.pinnForecast',{'val':JSON[_0xb897dc(0x172)](_0x53969c),'ack':!![]});}else{if(_0x42e538[_0xb897dc(0x17f)]===_0xb897dc(0x13b)){const {alerts:_0xce1462}=_0x42e538[_0xb897dc(0x183)];if(_0xce1462)_0x4ba944['setStateAsync'](_0xb897dc(0x126),{'val':JSON['stringify'](_0xce1462),'ack':!![]});}else{if(_0x42e538['type']===_0xb897dc(0x125)){const {proposals:_0x4f0a63}=_0x42e538[_0xb897dc(0x183)];_0x4ba944[_0xb897dc(0x140)](_0xb897dc(0x184),(_0xfadd2e,_0x45bd95)=>{const _0x2cbbc8=_0xb897dc;_0x45bd95&&_0x45bd95[_0x2cbbc8(0x12b)]===!![]&&_0x4f0a63&&_0x4f0a63[_0x2cbbc8(0x12e)]>0x0&&automation[_0x2cbbc8(0x149)](_0x4ba944,_0x4f0a63);});}else{if(_0x42e538[_0xb897dc(0x17f)]===_0xb897dc(0x17d)){const {room:_0x5144ef,propagation:_0x8bf2b3}=_0x42e538[_0xb897dc(0x183)];let _0x513da3=_0xb897dc(0x135),_0x4aede1=0x0;if(_0x8bf2b3){const _0x11ea6e=Object[_0xb897dc(0x16d)](_0x8bf2b3);_0x11ea6e[_0xb897dc(0x12e)]>0x0&&(_0x513da3=_0x11ea6e[0x0][0x0],_0x4aede1=_0x11ea6e[0x0][0x1]);}_0x4ba944[_0xb897dc(0x124)](_0xb897dc(0x14f),{'val':_0x513da3,'ack':!![]}),_0x4ba944[_0xb897dc(0x124)](_0xb897dc(0x134),{'val':_0x4aede1,'ack':!![]}),automation['handlePrediction'](_0x4ba944,_0x513da3,_0x4aede1);}else{if(_0x42e538['type']==='TRACKER_RESULT'){const {probabilities:_0x40b2c6}=_0x42e538[_0xb897dc(0x183)];if(_0x40b2c6){_0x4ba944['setStateAsync'](_0xb897dc(0x145),{'val':JSON[_0xb897dc(0x172)](_0x40b2c6),'ack':!![]});const _0x286c4f=Object['keys'](_0x40b2c6);if(_0x286c4f[_0xb897dc(0x12e)]>0x0){const _0x114562=_0x286c4f[0x0],_0x4c5db=_0x40b2c6[_0x114562];_0x4ba944[_0xb897dc(0x124)](_0xb897dc(0x188),{'val':_0x114562,'ack':!![]}),_0x4ba944[_0xb897dc(0x124)](_0xb897dc(0x174),{'val':_0x4c5db,'ack':!![]});}}}else{if(_0x42e538[_0xb897dc(0x17f)]===_0xb897dc(0x12f)){const {patterns:_0x5d6efa}=_0x42e538[_0xb897dc(0x183)];if(_0x5d6efa&&_0x5d6efa[_0xb897dc(0x12e)]>0x0)_0x4ba944[_0xb897dc(0x124)]('analysis.automation.detectedPatterns',{'val':JSON['stringify'](_0x5d6efa),'ack':!![]});}}}}}}}}}}}}}}}}}}function startService(_0xc2e5b5,_0x2bdefa){const _0x33a2d9=a4_0x11d89e;let _0x2ad7f4=_0x33a2d9(0x143);if(fs[_0x33a2d9(0x16b)](_0x2bdefa))_0x2ad7f4=_0x2bdefa;const _0xcdc497=path[_0x33a2d9(0x14c)](__dirname,'..',_0x33a2d9(0x164)),_0x51cabe=path[_0x33a2d9(0x14c)](__dirname,'..',_0x33a2d9(0x16f),_0x33a2d9(0x164));let _0x52be0f='';if(fs[_0x33a2d9(0x16b)](_0xcdc497))_0x52be0f=_0xcdc497;else{if(fs['existsSync'](_0x51cabe))_0x52be0f=_0x51cabe;else{_0xc2e5b5['log'][_0x33a2d9(0x182)](_0x33a2d9(0x151)+_0xcdc497+_0x33a2d9(0x161)+_0x51cabe+_0x33a2d9(0x130));return;}}try{_0xc2e5b5[_0x33a2d9(0x14e)]['info'](_0x33a2d9(0x165)+_0x2ad7f4+'\x20'+_0x52be0f),pythonProcess=spawn(_0x2ad7f4,[_0x52be0f]),pythonProcess[_0x33a2d9(0x132)]['on'](_0x33a2d9(0x15f),_0x4820de=>{const _0x465ec2=_0x33a2d9,_0x348a2e=_0x4820de[_0x465ec2(0x153)]()[_0x465ec2(0x17c)]('\x0a');_0x348a2e[_0x465ec2(0x190)](_0x19d1e8=>{const _0x2a2cab=_0x465ec2,_0xa42bb9=_0x19d1e8[_0x2a2cab(0x16a)]();if(!_0xa42bb9)return;if(_0xa42bb9[_0x2a2cab(0x14d)](_0x2a2cab(0x12d)))_0xc2e5b5[_0x2a2cab(0x14e)][_0x2a2cab(0x13f)](_0x2a2cab(0x146)+_0xa42bb9[_0x2a2cab(0x187)](0x5)[_0x2a2cab(0x16a)]());else{if(_0xa42bb9[_0x2a2cab(0x14d)](_0x2a2cab(0x193)))try{const _0x595a9b=JSON[_0x2a2cab(0x15d)](_0xa42bb9[_0x2a2cab(0x187)](0x8)[_0x2a2cab(0x16a)]());handleResult(_0xc2e5b5,_0x595a9b);}catch(_0x50c448){}}});}),pythonProcess['stderr']['on'](_0x33a2d9(0x15f),_0x4c5509=>{const _0x1dc690=_0x33a2d9;_0xc2e5b5[_0x1dc690(0x14e)][_0x1dc690(0x182)](_0x1dc690(0x152)+_0x4c5509['toString']()[_0x1dc690(0x16a)]());}),pythonProcess['on'](_0x33a2d9(0x13e),_0x1b35ae=>{const _0x1d26d3=_0x33a2d9;_0xc2e5b5[_0x1d26d3(0x14e)][_0x1d26d3(0x129)](_0x1d26d3(0x169)+_0x1b35ae),pythonProcess=null;}),_0xc2e5b5[_0x33a2d9(0x15e)]=(_0x7d6823,_0x4fc515)=>send(_0xc2e5b5,_0x7d6823,_0x4fc515);}catch(_0x119479){_0xc2e5b5[_0x33a2d9(0x14e)][_0x33a2d9(0x182)]('Error\x20launching\x20Python:\x20'+_0x119479[_0x33a2d9(0x158)]);}}function stopService(_0xa72f44){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x2d6d3e){}pythonProcess=null;}}module[a4_0x11d89e(0x192)]={'startService':startService,'stopService':stopService,'send':send};