const a4_0x9be684=a4_0x3e3d;(function(_0x302587,_0x53755e){const _0x5be46a=a4_0x3e3d,_0x306b02=_0x302587();while(!![]){try{const _0x551e90=-parseInt(_0x5be46a(0x1f8))/0x1+parseInt(_0x5be46a(0x1c9))/0x2*(-parseInt(_0x5be46a(0x1ed))/0x3)+-parseInt(_0x5be46a(0x1e7))/0x4+-parseInt(_0x5be46a(0x223))/0x5+parseInt(_0x5be46a(0x1f6))/0x6*(-parseInt(_0x5be46a(0x22d))/0x7)+-parseInt(_0x5be46a(0x22c))/0x8*(parseInt(_0x5be46a(0x210))/0x9)+parseInt(_0x5be46a(0x20c))/0xa;if(_0x551e90===_0x53755e)break;else _0x306b02['push'](_0x306b02['shift']());}catch(_0x5eed22){_0x306b02['push'](_0x306b02['shift']());}}}(a4_0x1943,0x54f18));const a4_0x3119bd=(function(){let _0xb22211=!![];return function(_0x2f6013,_0x1d98fc){const _0x4656ad=_0xb22211?function(){const _0x5ae209=a4_0x3e3d;if(_0x1d98fc){const _0x100bc5=_0x1d98fc[_0x5ae209(0x1cb)](_0x2f6013,arguments);return _0x1d98fc=null,_0x100bc5;}}:function(){};return _0xb22211=![],_0x4656ad;};}()),a4_0xf21527=a4_0x3119bd(this,function(){const _0x38799e=a4_0x3e3d;return a4_0xf21527[_0x38799e(0x228)]()[_0x38799e(0x1cf)](_0x38799e(0x225))[_0x38799e(0x228)]()['constructor'](a4_0xf21527)['search']('(((.+)+)+)+$');});a4_0xf21527();'use strict';const {spawn}=require(a4_0x9be684(0x1ff)),path=require(a4_0x9be684(0x1f1)),fs=require('fs'),setup=require(a4_0x9be684(0x1fe)),automation=require(a4_0x9be684(0x1e4));let pythonProcess=null;function send(_0x3ffd9e,_0x55bc2e,_0x2a71b={}){const _0x229246=a4_0x9be684;if(!pythonProcess||!pythonProcess[_0x229246(0x208)]['writable'])return;const _0x53d3fc=JSON['stringify']({'command':_0x55bc2e,..._0x2a71b});try{pythonProcess[_0x229246(0x208)][_0x229246(0x207)](_0x53d3fc+'\x0a');}catch(_0x2dd43e){}}function handleResult(_0x478fc4,_0x50d6e4){const _0x1229e2=a4_0x9be684;if(_0x50d6e4[_0x1229e2(0x1d9)]===_0x1229e2(0x22e))_0x478fc4[_0x1229e2(0x1e0)][_0x1229e2(0x1ec)](_0x1229e2(0x21b));else{if(_0x50d6e4[_0x1229e2(0x1d9)]===_0x1229e2(0x203)){const {anomaly_score:_0x10b29c,is_anomaly:_0x560e82,threshold:_0x7c1175,explanation:_0x3a9bb0}=_0x50d6e4[_0x1229e2(0x211)];_0x478fc4[_0x1229e2(0x1e0)][_0x1229e2(0x1f2)](_0x1229e2(0x1d7)+_0x10b29c[_0x1229e2(0x1d0)](0x5)+_0x1229e2(0x205)+(_0x560e82?_0x1229e2(0x209):'OK')),_0x478fc4['setStateAsync'](_0x1229e2(0x1dd),{'val':_0x10b29c,'ack':!![]}),_0x478fc4[_0x1229e2(0x1ee)](_0x1229e2(0x21e),{'val':new Date()[_0x1229e2(0x1fa)](),'ack':!![]});if(_0x7c1175)_0x478fc4['setStateAsync'](_0x1229e2(0x200),{'val':_0x7c1175,'ack':!![]});if(_0x560e82){let _0x510b48=_0x1229e2(0x213)+_0x10b29c[_0x1229e2(0x1d0)](0x4)+')';if(_0x3a9bb0&&_0x3a9bb0!=='Unknown')_0x510b48+=_0x1229e2(0x1da)+_0x3a9bb0;_0x478fc4[_0x1229e2(0x1ee)](_0x1229e2(0x1c7),{'val':!![],'ack':!![]}),_0x478fc4[_0x1229e2(0x1ee)](_0x1229e2(0x1f7),{'val':_0x510b48,'ack':!![]}),setup[_0x1229e2(0x1f3)](_0x478fc4,_0x1229e2(0x20d)+_0x510b48,![],!![]);}}else{if(_0x50d6e4[_0x1229e2(0x1d9)]===_0x1229e2(0x232)){const _0x49309e=_0x50d6e4['payload'][_0x1229e2(0x229)]||'',_0x1f6517=_0x50d6e4[_0x1229e2(0x211)][_0x1229e2(0x201)],_0x481cc7=_0x50d6e4[_0x1229e2(0x211)]['success']?_0x1229e2(0x230)+new Date()[_0x1229e2(0x227)]()+'\x20('+_0x49309e+')':_0x1229e2(0x1e1)+_0x50d6e4[_0x1229e2(0x211)][_0x1229e2(0x231)];_0x478fc4[_0x1229e2(0x1ee)]('analysis.training.status',{'val':_0x481cc7,'ack':!![]});if(_0x50d6e4[_0x1229e2(0x211)][_0x1229e2(0x217)]&&_0x1f6517)_0x478fc4['setStateAsync'](_0x1229e2(0x200),{'val':_0x1f6517,'ack':!![]});}else{if(_0x50d6e4[_0x1229e2(0x1d9)]===_0x1229e2(0x21d)){const {patterns:_0x32db36}=_0x50d6e4[_0x1229e2(0x211)];if(_0x32db36&&_0x32db36[_0x1229e2(0x20b)]>0x0){_0x478fc4[_0x1229e2(0x1e0)]['info'](_0x1229e2(0x1eb)+_0x32db36['length']+_0x1229e2(0x1d8)),_0x478fc4['setStateAsync'](_0x1229e2(0x1d4),{'val':JSON['stringify'](_0x32db36),'ack':!![]});const _0x5c5200=_0x32db36[0x0],_0x3c6553=_0x1229e2(0x1e3)+_0x5c5200['rule']+'\x20('+(_0x5c5200[_0x1229e2(0x212)]*0x64)[_0x1229e2(0x1d0)](0x0)+'%)';_0x478fc4['setStateAsync'](_0x1229e2(0x226),{'val':!![],'ack':!![]}),_0x478fc4[_0x1229e2(0x1ee)](_0x1229e2(0x1c8),{'val':_0x3c6553,'ack':!![]});}else _0x478fc4[_0x1229e2(0x1e0)][_0x1229e2(0x1f2)](_0x1229e2(0x219)),_0x478fc4[_0x1229e2(0x1ee)](_0x1229e2(0x226),{'val':![],'ack':!![]}),_0x478fc4[_0x1229e2(0x1ee)](_0x1229e2(0x1d4),{'val':'[]','ack':!![]});}else{if(_0x50d6e4[_0x1229e2(0x1d9)]===_0x1229e2(0x1dc)){if(_0x50d6e4[_0x1229e2(0x211)]['success'])try{const _0x52eab7=JSON[_0x1229e2(0x1fc)](_0x50d6e4[_0x1229e2(0x211)][_0x1229e2(0x229)]);if(_0x52eab7[_0x1229e2(0x214)])_0x478fc4[_0x1229e2(0x1ee)](_0x1229e2(0x1e6),{'val':JSON[_0x1229e2(0x22f)](_0x52eab7['insulation']),'ack':!![]});if(_0x52eab7['heating'])_0x478fc4['setStateAsync'](_0x1229e2(0x1fd),{'val':JSON[_0x1229e2(0x22f)](_0x52eab7[_0x1229e2(0x1ef)]),'ack':!![]});}catch(_0x5c4625){}}else{if(_0x50d6e4[_0x1229e2(0x1d9)]===_0x1229e2(0x1e2)){if(_0x50d6e4[_0x1229e2(0x211)][_0x1229e2(0x217)])_0x478fc4[_0x1229e2(0x1e0)][_0x1229e2(0x1f2)]('‚úÖ\x20HEALTH\x20TRAINED.');}else{if(_0x50d6e4[_0x1229e2(0x1d9)]===_0x1229e2(0x202))_0x478fc4[_0x1229e2(0x1ee)]('analysis.health.lastCheck',{'val':new Date()[_0x1229e2(0x1fa)](),'ack':!![]}),_0x478fc4[_0x1229e2(0x1ee)](_0x1229e2(0x204),{'val':_0x50d6e4['payload'][_0x1229e2(0x1ca)],'ack':!![]});else{if(_0x50d6e4[_0x1229e2(0x1d9)]===_0x1229e2(0x20e))_0x478fc4['setStateAsync'](_0x1229e2(0x1d3),{'val':_0x50d6e4['payload'][_0x1229e2(0x1ea)],'ack':!![]}),_0x478fc4[_0x1229e2(0x1ee)](_0x1229e2(0x1ce),{'val':_0x50d6e4[_0x1229e2(0x211)]['change_percent'],'ack':!![]});else{if(_0x50d6e4[_0x1229e2(0x1d9)]===_0x1229e2(0x220)){const {speed_trend:_0x5b0c91}=_0x50d6e4['payload'];if(_0x5b0c91!==undefined)_0x478fc4[_0x1229e2(0x1ee)](_0x1229e2(0x1de),{'val':_0x5b0c91,'ack':!![]});}else{if(_0x50d6e4['type']===_0x1229e2(0x222)){const {forecast:_0x3c6c73}=_0x50d6e4[_0x1229e2(0x211)];if(_0x3c6c73)_0x478fc4[_0x1229e2(0x1ee)](_0x1229e2(0x1f0),{'val':JSON[_0x1229e2(0x22f)](_0x3c6c73),'ack':!![]});}else{if(_0x50d6e4[_0x1229e2(0x1d9)]===_0x1229e2(0x1d1)){const {data:_0x152e29}=_0x50d6e4['payload'];_0x152e29&&(_0x478fc4[_0x1229e2(0x1e0)][_0x1229e2(0x1f2)](_0x1229e2(0x21f)),_0x478fc4['setStateAsync'](_0x1229e2(0x22a),{'val':JSON[_0x1229e2(0x22f)](_0x152e29),'ack':!![]}));}else{if(_0x50d6e4['type']===_0x1229e2(0x224))_0x478fc4[_0x1229e2(0x1e0)]['debug'](_0x1229e2(0x221));else{if(_0x50d6e4[_0x1229e2(0x1d9)]===_0x1229e2(0x216)){const {room:_0x14a2fe,propagation:_0x4ee87c}=_0x50d6e4[_0x1229e2(0x211)];let _0x2d42a4=_0x1229e2(0x1e5),_0x5175a3=0x0;if(_0x4ee87c){const _0xbf056a=Object[_0x1229e2(0x1db)](_0x4ee87c);_0xbf056a['length']>0x0&&(_0x2d42a4=_0xbf056a[0x0][0x0],_0x5175a3=_0xbf056a[0x0][0x1]);}_0x478fc4[_0x1229e2(0x1ee)](_0x1229e2(0x1cc),{'val':_0x2d42a4,'ack':!![]}),_0x478fc4[_0x1229e2(0x1ee)](_0x1229e2(0x1e8),{'val':_0x5175a3,'ack':!![]}),_0x5175a3>0.4&&_0x478fc4[_0x1229e2(0x1e0)][_0x1229e2(0x1ec)](_0x1229e2(0x218)+_0x14a2fe+_0x1229e2(0x1d2)+_0x2d42a4+'\x20('+(_0x5175a3*0x64)[_0x1229e2(0x1d0)](0x0)+'%)'),automation['handlePrediction'](_0x478fc4,_0x2d42a4,_0x5175a3);}}}}}}}}}}}}}}function startService(_0x3e92e1,_0x404cb7){const _0x16c546=a4_0x9be684;let _0xf570d4=_0x16c546(0x20a);if(fs['existsSync'](_0x404cb7))_0xf570d4=_0x404cb7;try{const _0x54dea6=path['join'](__dirname,'..',_0x16c546(0x1cd),_0x16c546(0x1d6));pythonProcess=spawn(_0xf570d4,[_0x54dea6]),pythonProcess[_0x16c546(0x21a)]['on'](_0x16c546(0x1d5),_0x3eedb4=>{const _0x3439a1=_0x16c546,_0x203822=_0x3eedb4[_0x3439a1(0x228)]()['split']('\x0a');_0x203822[_0x3439a1(0x1f5)](_0x30c9fe=>{const _0x1eeef3=_0x3439a1,_0x2d7a10=_0x30c9fe[_0x1eeef3(0x1f9)]();if(!_0x2d7a10)return;if(_0x2d7a10[_0x1eeef3(0x20f)](_0x1eeef3(0x22b)))_0x3e92e1['log'][_0x1eeef3(0x1ec)](_0x1eeef3(0x1c6)+_0x2d7a10[_0x1eeef3(0x215)](0x5)['trim']());else{if(_0x2d7a10[_0x1eeef3(0x20f)](_0x1eeef3(0x1df)))try{const _0x105910=JSON['parse'](_0x2d7a10[_0x1eeef3(0x215)](0x8)[_0x1eeef3(0x1f9)]());handleResult(_0x3e92e1,_0x105910);}catch(_0x35ebc8){}}});}),pythonProcess['on'](_0x16c546(0x206),_0x19e98b=>{pythonProcess=null;}),_0x3e92e1[_0x16c546(0x1fb)]=(_0x48b508,_0x29ff52)=>send(_0x3e92e1,_0x48b508,_0x29ff52);}catch(_0x29a59e){_0x3e92e1[_0x16c546(0x1e0)]['error'](_0x16c546(0x1e9)+_0x29a59e['message']);}}function stopService(_0x46228a){const _0x376127=a4_0x9be684;if(pythonProcess){try{pythonProcess[_0x376127(0x21c)]();}catch(_0x2ee980){}pythonProcess=null;}}function a4_0x3e3d(_0x2cef62,_0x258067){const _0x523d0a=a4_0x1943();return a4_0x3e3d=function(_0xf21527,_0x3119bd){_0xf21527=_0xf21527-0x1c6;let _0x1943ae=_0x523d0a[_0xf21527];return _0x1943ae;},a4_0x3e3d(_0x2cef62,_0x258067);}module[a4_0x9be684(0x1f4)]={'startService':startService,'stopService':stopService,'send':send};function a4_0x1943(){const _0x5b4ef2=['payload','confidence','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','insulation','substring','SIGNAL_RESULT','success','üîÆ\x20Prediction:\x20From\x20','üõãÔ∏è\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','stdout','üêç\x20Python\x20Pong','kill','COMFORT_RESULT','analysis.security.lastCheck','üï∏Ô∏è\x20Topology\x20Map\x20updated\x20by\x20Python.','GAIT_RESULT','üêç\x20Python\x20confirmed\x20new\x20topology.','ENERGY_PREDICT_RESULT','1794975aEgjmB','TOPOLOGY_ACK','(((.+)+)+)+$','analysis.automation.patternDetected','toLocaleTimeString','toString','details','analysis.security.topologyMatrix','[LOG]','49704RaTChB','4613hSELOJ','PONG','stringify','Success:\x20','reason','TRAINING_COMPLETE','[PYTHON]\x20','analysis.isAlert','analysis.automation.description','2hfwgPh','is_anomaly','apply','analysis.prediction.nextRoom','python_service','analysis.health.trendValue','search','toFixed','TOPOLOGY_RESULT','\x20->\x20Likely\x20','analysis.health.trendDiagnosis','analysis.automation.detectedPatterns','data','service.py','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','\x20new\x20patterns.','type','\x0aGrund:\x20','entries','ENERGY_TRAIN_RESULT','analysis.security.lastScore','analysis.health.gaitSpeed','[RESULT]','log','Failed:\x20','HEALTH_TRAIN_RESULT','Regel\x20erkannt:\x20','./automation','Unknown','analysis.energy.insulationScore','1676668PYlbbs','analysis.prediction.confidence','Error\x20launching\x20Python:\x20','diagnosis','üõãÔ∏è\x20BUTLER:\x20Found\x20','debug','1368243xVNwYC','setStateAsync','heating','analysis.energy.forecast','path','info','sendNotification','exports','forEach','924YGrEXz','analysis.alertReason','490389yvuOkB','trim','toISOString','sendToPythonWrapper','parse','analysis.energy.heatingScore','./setup','child_process','analysis.security.currentThreshold','threshold','HEALTH_RESULT','SECURITY_RESULT','analysis.health.isAnomaly','\x20->\x20','close','write','stdin','ANOMALY','python3','length','25281870zfWTjw','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','TREND_RESULT','startsWith','513ncyHeC'];a4_0x1943=function(){return _0x5b4ef2;};return a4_0x1943();}