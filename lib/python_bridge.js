const a4_0x2126fe=a4_0x51d8;(function(_0x5457d5,_0x2fc88b){const _0x3f8886=a4_0x51d8,_0x51cf8f=_0x5457d5();while(!![]){try{const _0x39cadd=-parseInt(_0x3f8886(0x1a3))/0x1+parseInt(_0x3f8886(0x1ed))/0x2+parseInt(_0x3f8886(0x1bd))/0x3*(parseInt(_0x3f8886(0x1b0))/0x4)+parseInt(_0x3f8886(0x1ec))/0x5*(-parseInt(_0x3f8886(0x1cd))/0x6)+parseInt(_0x3f8886(0x1ea))/0x7*(parseInt(_0x3f8886(0x1dc))/0x8)+parseInt(_0x3f8886(0x1cb))/0x9+-parseInt(_0x3f8886(0x1ac))/0xa;if(_0x39cadd===_0x2fc88b)break;else _0x51cf8f['push'](_0x51cf8f['shift']());}catch(_0x10db2d){_0x51cf8f['push'](_0x51cf8f['shift']());}}}(a4_0x149d,0x88065));const a4_0x5ba87b=(function(){let _0x1e4f79=!![];return function(_0x2fcb53,_0x3cdd3d){const _0xcaf8bb=_0x1e4f79?function(){const _0x312e95=a4_0x51d8;if(_0x3cdd3d){const _0x4c8452=_0x3cdd3d[_0x312e95(0x1d3)](_0x2fcb53,arguments);return _0x3cdd3d=null,_0x4c8452;}}:function(){};return _0x1e4f79=![],_0xcaf8bb;};}()),a4_0x4dc720=a4_0x5ba87b(this,function(){const _0x30b500=a4_0x51d8;return a4_0x4dc720['toString']()[_0x30b500(0x1be)](_0x30b500(0x1c6))[_0x30b500(0x1dd)]()[_0x30b500(0x1d1)](a4_0x4dc720)['search'](_0x30b500(0x1c6));});a4_0x4dc720();function a4_0x51d8(_0x1f6def,_0x3b97d8){const _0x49dbf4=a4_0x149d();return a4_0x51d8=function(_0x4dc720,_0x5ba87b){_0x4dc720=_0x4dc720-0x1a3;let _0x149d2f=_0x49dbf4[_0x4dc720];return _0x149d2f;},a4_0x51d8(_0x1f6def,_0x3b97d8);}'use strict';const {spawn}=require('child_process'),path=require(a4_0x2126fe(0x1ee)),fs=require('fs'),setup=require('./setup'),automation=require('./automation');let pythonProcess=null;function send(_0x3f5517,_0x122be2,_0x52ecaf={}){const _0x37a14b=a4_0x2126fe;if(!pythonProcess||!pythonProcess[_0x37a14b(0x1fa)][_0x37a14b(0x1c5)])return;const _0x5c8fe3=JSON[_0x37a14b(0x1e3)]({'command':_0x122be2,..._0x52ecaf});try{pythonProcess['stdin'][_0x37a14b(0x1d2)](_0x5c8fe3+'\x0a');}catch(_0x13354c){}}function handleResult(_0x26148e,_0xd4bbda){const _0x3bb18a=a4_0x2126fe;if(_0xd4bbda[_0x3bb18a(0x1da)]===_0x3bb18a(0x1b4))_0x26148e[_0x3bb18a(0x1bf)][_0x3bb18a(0x1d5)](_0x3bb18a(0x1af));else{if(_0xd4bbda[_0x3bb18a(0x1da)]===_0x3bb18a(0x1ef)){const {anomaly_score:_0x1dd380,is_anomaly:_0x8b1d70,threshold:_0x7ce24f,explanation:_0x561c1f}=_0xd4bbda[_0x3bb18a(0x1f0)];_0x26148e['setStateAsync'](_0x3bb18a(0x1e9),{'val':_0x1dd380,'ack':!![]}),_0x26148e[_0x3bb18a(0x1c7)]('analysis.security.lastCheck',{'val':new Date()[_0x3bb18a(0x1c8)](),'ack':!![]});if(_0x7ce24f)_0x26148e[_0x3bb18a(0x1c7)]('analysis.security.currentThreshold',{'val':_0x7ce24f,'ack':!![]});if(_0x8b1d70){let _0x580c5a=_0x3bb18a(0x1b6)+_0x1dd380[_0x3bb18a(0x1e7)](0x4)+')';if(_0x561c1f&&_0x561c1f!=='Unknown')_0x580c5a+=_0x3bb18a(0x1f5)+_0x561c1f;_0x26148e[_0x3bb18a(0x1c7)](_0x3bb18a(0x1f3),{'val':!![],'ack':!![]}),_0x26148e[_0x3bb18a(0x1c7)](_0x3bb18a(0x1ca),{'val':_0x580c5a,'ack':!![]}),setup[_0x3bb18a(0x1e1)](_0x26148e,_0x3bb18a(0x1e2)+_0x580c5a,![],!![]);}}else{if(_0xd4bbda[_0x3bb18a(0x1da)]===_0x3bb18a(0x1aa)){const _0x3e1e4b=_0xd4bbda[_0x3bb18a(0x1f0)]['details']||'',_0x493821=_0xd4bbda['payload'][_0x3bb18a(0x1df)],_0x1e2cd3=_0xd4bbda[_0x3bb18a(0x1f0)][_0x3bb18a(0x1d6)]?'Success:\x20'+new Date()[_0x3bb18a(0x1ab)]()+'\x20('+_0x3e1e4b+')':_0x3bb18a(0x1ae)+_0xd4bbda['payload'][_0x3bb18a(0x1f2)];_0x26148e[_0x3bb18a(0x1c7)](_0x3bb18a(0x1b9),{'val':_0x1e2cd3,'ack':!![]});if(_0xd4bbda[_0x3bb18a(0x1f0)][_0x3bb18a(0x1d6)]&&_0x493821)_0x26148e[_0x3bb18a(0x1c7)](_0x3bb18a(0x1ba),{'val':_0x493821,'ack':!![]});}else{if(_0xd4bbda['type']===_0x3bb18a(0x1b8)){if(_0xd4bbda[_0x3bb18a(0x1f0)][_0x3bb18a(0x1d6)])try{const _0x23f368=JSON[_0x3bb18a(0x1b7)](_0xd4bbda[_0x3bb18a(0x1f0)][_0x3bb18a(0x1f4)]);if(_0x23f368[_0x3bb18a(0x1d8)])_0x26148e[_0x3bb18a(0x1c7)]('analysis.energy.insulationScore',{'val':JSON[_0x3bb18a(0x1e3)](_0x23f368[_0x3bb18a(0x1d8)]),'ack':!![]});if(_0x23f368['heating'])_0x26148e[_0x3bb18a(0x1c7)]('analysis.energy.heatingScore',{'val':JSON['stringify'](_0x23f368[_0x3bb18a(0x1a8)]),'ack':!![]});}catch(_0x953888){}}else{if(_0xd4bbda['type']==='HEALTH_TRAIN_RESULT'){if(_0xd4bbda[_0x3bb18a(0x1f0)][_0x3bb18a(0x1d6)])_0x26148e[_0x3bb18a(0x1bf)]['info'](_0x3bb18a(0x1ce));}else{if(_0xd4bbda[_0x3bb18a(0x1da)]===_0x3bb18a(0x1bc))_0x26148e[_0x3bb18a(0x1c7)]('analysis.health.lastCheck',{'val':new Date()['toISOString'](),'ack':!![]}),_0x26148e[_0x3bb18a(0x1c7)](_0x3bb18a(0x1d7),{'val':_0xd4bbda[_0x3bb18a(0x1f0)]['is_anomaly'],'ack':!![]});else{if(_0xd4bbda[_0x3bb18a(0x1da)]===_0x3bb18a(0x1f7)){const {speed_trend:_0x281f8a}=_0xd4bbda[_0x3bb18a(0x1f0)];if(_0x281f8a!==undefined)_0x26148e[_0x3bb18a(0x1c7)]('analysis.health.gaitSpeed',{'val':_0x281f8a,'ack':!![]});}else{if(_0xd4bbda[_0x3bb18a(0x1da)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x3f623f}=_0xd4bbda[_0x3bb18a(0x1f0)];if(_0x3f623f)_0x26148e[_0x3bb18a(0x1c7)](_0x3bb18a(0x1a9),{'val':JSON[_0x3bb18a(0x1e3)](_0x3f623f),'ack':!![]});}else{if(_0xd4bbda[_0x3bb18a(0x1da)]===_0x3bb18a(0x1a5)){const {times:_0x4719fc}=_0xd4bbda[_0x3bb18a(0x1f0)];if(_0x4719fc)_0x26148e[_0x3bb18a(0x1c7)](_0x3bb18a(0x1e6),{'val':JSON[_0x3bb18a(0x1e3)](_0x4719fc),'ack':!![]});}else{if(_0xd4bbda[_0x3bb18a(0x1da)]===_0x3bb18a(0x1f9)){const {forecast:_0x2fd4b1}=_0xd4bbda[_0x3bb18a(0x1f0)];if(_0x2fd4b1)_0x26148e[_0x3bb18a(0x1c7)](_0x3bb18a(0x1bb),{'val':JSON[_0x3bb18a(0x1e3)](_0x2fd4b1),'ack':!![]});}else{if(_0xd4bbda[_0x3bb18a(0x1da)]==='VENTILATION_ALERT'){const {alerts:_0xe70a1b}=_0xd4bbda[_0x3bb18a(0x1f0)];if(_0xe70a1b)_0x26148e['setStateAsync']('analysis.energy.ventilationAlerts',{'val':JSON[_0x3bb18a(0x1e3)](_0xe70a1b),'ack':!![]});}else{if(_0xd4bbda[_0x3bb18a(0x1da)]==='ENERGY_OPTIMIZE_RESULT'){const {proposals:_0xa1e7b4}=_0xd4bbda[_0x3bb18a(0x1f0)];_0x26148e[_0x3bb18a(0x1c2)]('analysis.energy.mpcActive',(_0x2cd795,_0x22f3b9)=>{const _0x39d4e0=_0x3bb18a;_0x22f3b9&&_0x22f3b9['val']===!![]&&_0xa1e7b4&&_0xa1e7b4[_0x39d4e0(0x1db)]>0x0&&automation[_0x39d4e0(0x1d4)](_0x26148e,_0xa1e7b4);});}else{if(_0xd4bbda[_0x3bb18a(0x1da)]==='SIGNAL_RESULT'){const {room:_0x4637da,propagation:_0xe8fdc6}=_0xd4bbda[_0x3bb18a(0x1f0)];let _0x1d9bce=_0x3bb18a(0x1c9),_0x216c6c=0x0;if(_0xe8fdc6){const _0x14842c=Object[_0x3bb18a(0x1cf)](_0xe8fdc6);_0x14842c[_0x3bb18a(0x1db)]>0x0&&(_0x1d9bce=_0x14842c[0x0][0x0],_0x216c6c=_0x14842c[0x0][0x1]);}_0x26148e[_0x3bb18a(0x1c7)](_0x3bb18a(0x1e8),{'val':_0x1d9bce,'ack':!![]}),_0x26148e['setStateAsync'](_0x3bb18a(0x1f8),{'val':_0x216c6c,'ack':!![]}),automation[_0x3bb18a(0x1a4)](_0x26148e,_0x1d9bce,_0x216c6c);}else{if(_0xd4bbda[_0x3bb18a(0x1da)]===_0x3bb18a(0x1f6)){const {probabilities:_0x68df0c}=_0xd4bbda[_0x3bb18a(0x1f0)];if(_0x68df0c){_0x26148e['setStateAsync'](_0x3bb18a(0x1de),{'val':JSON[_0x3bb18a(0x1e3)](_0x68df0c),'ack':!![]});const _0x5bad17=Object[_0x3bb18a(0x1b5)](_0x68df0c);if(_0x5bad17['length']>0x0){const _0xb31357=_0x5bad17[0x0],_0x3f7073=_0x68df0c[_0xb31357];_0x26148e[_0x3bb18a(0x1c7)](_0x3bb18a(0x1d0),{'val':_0xb31357,'ack':!![]}),_0x26148e['setStateAsync'](_0x3bb18a(0x1cc),{'val':_0x3f7073,'ack':!![]});}}}else{if(_0xd4bbda[_0x3bb18a(0x1da)]===_0x3bb18a(0x1a7)){const {patterns:_0x2b459e}=_0xd4bbda[_0x3bb18a(0x1f0)];if(_0x2b459e&&_0x2b459e[_0x3bb18a(0x1db)]>0x0)_0x26148e['setStateAsync']('analysis.automation.detectedPatterns',{'val':JSON['stringify'](_0x2b459e),'ack':!![]});}}}}}}}}}}}}}}}}function a4_0x149d(){const _0xefdf5c=['toFixed','analysis.prediction.nextRoom','analysis.security.lastScore','168JBNwjb','[PYTHON]\x20','2155uPjaJX','937406InKQEx','path','SECURITY_RESULT','payload','sendToPythonWrapper','reason','analysis.isAlert','details','\x0aGrund:\x20','TRACKER_RESULT','GAIT_RESULT','analysis.prediction.confidence','PINN_PREDICT_RESULT','stdin','exports','1000029TmosoN','handlePrediction','WARMUP_RESULT','existsSync','COMFORT_RESULT','heating','analysis.energy.forecast','TRAINING_COMPLETE','toLocaleTimeString','7040910znuari','python3','Failed:\x20','ðŸ\x20Python\x20Pong','416tYKpjN','python_service','split','forEach','PONG','keys','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','parse','ENERGY_TRAIN_RESULT','analysis.training.status','analysis.security.currentThreshold','analysis.energy.pinnForecast','HEALTH_RESULT','19671kOOCFA','search','log','[RESULT]','[LOG]','getState','kill','trim','writable','(((.+)+)+)+$','setStateAsync','toISOString','Unknown','analysis.alertReason','5238477lqVIvZ','analysis.prediction.trackerConfidence','2406hMkxLg','âœ…\x20HEALTH\x20TRAINED.','entries','analysis.prediction.trackerTopRoom','constructor','write','apply','applyEnergySavings','debug','success','analysis.health.isAnomaly','insulation','join','type','length','233808thiySS','toString','analysis.prediction.trackerState','threshold','Error\x20launching\x20Python:\x20','sendNotification','âš ï¸\x20SECURITY\x20ALARM:\x20','stringify','substring','startsWith','analysis.energy.warmupTimes'];a4_0x149d=function(){return _0xefdf5c;};return a4_0x149d();}function startService(_0x3ff00c,_0x60b8ed){const _0x1b8803=a4_0x2126fe;let _0x363aaf=_0x1b8803(0x1ad);if(fs[_0x1b8803(0x1a6)](_0x60b8ed))_0x363aaf=_0x60b8ed;try{const _0x483f34=path[_0x1b8803(0x1d9)](__dirname,'..',_0x1b8803(0x1b1),'service.py');pythonProcess=spawn(_0x363aaf,[_0x483f34]),pythonProcess['stdout']['on']('data',_0xee7dad=>{const _0x4efd29=_0x1b8803,_0x28d764=_0xee7dad[_0x4efd29(0x1dd)]()[_0x4efd29(0x1b2)]('\x0a');_0x28d764[_0x4efd29(0x1b3)](_0x2b20ae=>{const _0x5ab7aa=_0x4efd29,_0x5d47e6=_0x2b20ae[_0x5ab7aa(0x1c4)]();if(!_0x5d47e6)return;if(_0x5d47e6[_0x5ab7aa(0x1e5)](_0x5ab7aa(0x1c1)))_0x3ff00c[_0x5ab7aa(0x1bf)][_0x5ab7aa(0x1d5)](_0x5ab7aa(0x1eb)+_0x5d47e6[_0x5ab7aa(0x1e4)](0x5)[_0x5ab7aa(0x1c4)]());else{if(_0x5d47e6[_0x5ab7aa(0x1e5)](_0x5ab7aa(0x1c0)))try{const _0x14d9d5=JSON[_0x5ab7aa(0x1b7)](_0x5d47e6['substring'](0x8)['trim']());handleResult(_0x3ff00c,_0x14d9d5);}catch(_0x1b942f){}}});}),pythonProcess['on']('close',_0x2bfaa2=>{pythonProcess=null;}),_0x3ff00c[_0x1b8803(0x1f1)]=(_0x51dc69,_0xf9d653)=>send(_0x3ff00c,_0x51dc69,_0xf9d653);}catch(_0x5bff46){_0x3ff00c[_0x1b8803(0x1bf)]['error'](_0x1b8803(0x1e0)+_0x5bff46['message']);}}function stopService(_0x37aca8){const _0x4555e0=a4_0x2126fe;if(pythonProcess){try{pythonProcess[_0x4555e0(0x1c3)]();}catch(_0x714687){}pythonProcess=null;}}module[a4_0x2126fe(0x1fb)]={'startService':startService,'stopService':stopService,'send':send};