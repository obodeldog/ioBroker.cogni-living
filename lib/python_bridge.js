const a4_0x1a8920=a4_0x7fae;(function(_0x933a43,_0x89c4b3){const _0x5621a6=a4_0x7fae,_0x4b6459=_0x933a43();while(!![]){try{const _0x36735e=parseInt(_0x5621a6(0x204))/0x1*(-parseInt(_0x5621a6(0x1f6))/0x2)+parseInt(_0x5621a6(0x1bb))/0x3+-parseInt(_0x5621a6(0x1ad))/0x4*(parseInt(_0x5621a6(0x1f7))/0x5)+-parseInt(_0x5621a6(0x1ab))/0x6+parseInt(_0x5621a6(0x1fc))/0x7*(parseInt(_0x5621a6(0x1a9))/0x8)+parseInt(_0x5621a6(0x1cf))/0x9*(parseInt(_0x5621a6(0x1eb))/0xa)+parseInt(_0x5621a6(0x1bc))/0xb;if(_0x36735e===_0x89c4b3)break;else _0x4b6459['push'](_0x4b6459['shift']());}catch(_0x142646){_0x4b6459['push'](_0x4b6459['shift']());}}}(a4_0x1232,0xb70c6));const a4_0x1f23b2=(function(){let _0x1a6ce9=!![];return function(_0x338a2e,_0x2d285b){const _0x1381e5=_0x1a6ce9?function(){const _0x501a9e=a4_0x7fae;if(_0x2d285b){const _0x1b2b7a=_0x2d285b[_0x501a9e(0x1dd)](_0x338a2e,arguments);return _0x2d285b=null,_0x1b2b7a;}}:function(){};return _0x1a6ce9=![],_0x1381e5;};}()),a4_0x25a0f5=a4_0x1f23b2(this,function(){const _0x29734e=a4_0x7fae;return a4_0x25a0f5[_0x29734e(0x1f2)]()[_0x29734e(0x1c3)](_0x29734e(0x1ce))['toString']()[_0x29734e(0x1e9)](a4_0x25a0f5)['search'](_0x29734e(0x1ce));});a4_0x25a0f5();function a4_0x1232(){const _0x1aee1e=['close','HEALTH_RESULT','ðŸ\x20Python\x20confirmed\x20new\x20topology.','\x20->\x20','data','log','analysis.security.lastScore','ðŸ”®\x20Prediction:\x20From\x20','existsSync','toLocaleTimeString','write','kill','apply','parse','analysis.health.trendValue','SIGNAL_RESULT','ðŸ\x20Python\x20Pong','TRAINING_COMPLETE','analysis.health.trendDiagnosis','âœ…\x20HEALTH\x20TRAINED.','analysis.health.gaitSpeed','details','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','confidence','constructor','debug','779290wwYRqK','analysis.automation.detectedPatterns','setStateAsync','info','message','toISOString','diagnosis','toString','insulation','Error\x20launching\x20Python:\x20','TOPOLOGY_RESULT','1041262RkdLUw','2185835BUVzMu','ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.','startsWith','./setup','analysis.automation.patternDetected','1082277lMUpml','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','sendToPythonWrapper','analysis.health.lastCheck','writable','analysis.security.currentThreshold','threshold','ANOMALY','1AiJSst','analysis.isAlert','path','toFixed','[RESULT]','is_anomaly','service.py','type','40WENMbB','Unknown','7994796cVqVsf','analysis.prediction.confidence','4uAkHsu','split','[LOG]','Success:\x20','payload','analysis.security.topologyMatrix','TREND_RESULT','\x20new\x20patterns.','ENERGY_PREDICT_RESULT','forEach','handlePrediction','analysis.alertReason','change_percent','child_process','4137480cbeAyi','1193775XnRkiU','length','exports','analysis.health.isAnomaly','rule','stringify','stdout','search','python_service','python3','PONG','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','Failed:\x20','success','stdin','trim','COMFORT_RESULT','\x20->\x20Likely\x20','(((.+)+)+)+$','90nhkMXH','heating'];a4_0x1232=function(){return _0x1aee1e;};return a4_0x1232();}function a4_0x7fae(_0x2f8dae,_0x5108fd){const _0xc4f222=a4_0x1232();return a4_0x7fae=function(_0x25a0f5,_0x1f23b2){_0x25a0f5=_0x25a0f5-0x1a8;let _0x123215=_0xc4f222[_0x25a0f5];return _0x123215;},a4_0x7fae(_0x2f8dae,_0x5108fd);}'use strict';const {spawn}=require(a4_0x1a8920(0x1ba)),path=require(a4_0x1a8920(0x206)),fs=require('fs'),setup=require(a4_0x1a8920(0x1fa)),automation=require('./automation');let pythonProcess=null;function send(_0x4db04a,_0x39c518,_0x370ab2={}){const _0x50e5be=a4_0x1a8920;if(!pythonProcess||!pythonProcess[_0x50e5be(0x1ca)][_0x50e5be(0x200)])return;const _0x3e5327=JSON['stringify']({'command':_0x39c518,..._0x370ab2});try{pythonProcess[_0x50e5be(0x1ca)][_0x50e5be(0x1db)](_0x3e5327+'\x0a');}catch(_0x30d07e){}}function handleResult(_0x43e9fd,_0x50bf34){const _0x4e6ca7=a4_0x1a8920;if(_0x50bf34[_0x4e6ca7(0x1a8)]===_0x4e6ca7(0x1c6))_0x43e9fd[_0x4e6ca7(0x1d6)]['debug'](_0x4e6ca7(0x1e1));else{if(_0x50bf34[_0x4e6ca7(0x1a8)]==='SECURITY_RESULT'){const {anomaly_score:_0x3bc172,is_anomaly:_0x14697d,threshold:_0x322874,explanation:_0x23e91d}=_0x50bf34[_0x4e6ca7(0x1b1)];_0x43e9fd[_0x4e6ca7(0x1d6)][_0x4e6ca7(0x1ee)](_0x4e6ca7(0x1fd)+_0x3bc172[_0x4e6ca7(0x207)](0x5)+_0x4e6ca7(0x1d4)+(_0x14697d?_0x4e6ca7(0x203):'OK')),_0x43e9fd[_0x4e6ca7(0x1ed)](_0x4e6ca7(0x1d7),{'val':_0x3bc172,'ack':!![]}),_0x43e9fd[_0x4e6ca7(0x1ed)]('analysis.security.lastCheck',{'val':new Date()[_0x4e6ca7(0x1f0)](),'ack':!![]});if(_0x322874)_0x43e9fd[_0x4e6ca7(0x1ed)]('analysis.security.currentThreshold',{'val':_0x322874,'ack':!![]});if(_0x14697d){let _0x4bfd83=_0x4e6ca7(0x1c7)+_0x3bc172['toFixed'](0x4)+')';if(_0x23e91d&&_0x23e91d!==_0x4e6ca7(0x1aa))_0x4bfd83+='\x0aGrund:\x20'+_0x23e91d;_0x43e9fd[_0x4e6ca7(0x1ed)](_0x4e6ca7(0x205),{'val':!![],'ack':!![]}),_0x43e9fd[_0x4e6ca7(0x1ed)](_0x4e6ca7(0x1b8),{'val':_0x4bfd83,'ack':!![]}),setup['sendNotification'](_0x43e9fd,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x4bfd83,![],!![]);}}else{if(_0x50bf34[_0x4e6ca7(0x1a8)]===_0x4e6ca7(0x1e2)){const _0x5ad852=_0x50bf34[_0x4e6ca7(0x1b1)]['details']||'',_0x3ab887=_0x50bf34[_0x4e6ca7(0x1b1)][_0x4e6ca7(0x202)],_0x4949c5=_0x50bf34[_0x4e6ca7(0x1b1)][_0x4e6ca7(0x1c9)]?_0x4e6ca7(0x1b0)+new Date()[_0x4e6ca7(0x1da)]()+'\x20('+_0x5ad852+')':_0x4e6ca7(0x1c8)+_0x50bf34[_0x4e6ca7(0x1b1)]['reason'];_0x43e9fd['setStateAsync']('analysis.training.status',{'val':_0x4949c5,'ack':!![]});if(_0x50bf34[_0x4e6ca7(0x1b1)][_0x4e6ca7(0x1c9)]&&_0x3ab887)_0x43e9fd[_0x4e6ca7(0x1ed)](_0x4e6ca7(0x201),{'val':_0x3ab887,'ack':!![]});}else{if(_0x50bf34[_0x4e6ca7(0x1a8)]===_0x4e6ca7(0x1cc)){const {patterns:_0x4e77da}=_0x50bf34[_0x4e6ca7(0x1b1)];if(_0x4e77da&&_0x4e77da[_0x4e6ca7(0x1bd)]>0x0){_0x43e9fd[_0x4e6ca7(0x1d6)][_0x4e6ca7(0x1ee)]('ðŸ›‹ï¸\x20BUTLER:\x20Found\x20'+_0x4e77da[_0x4e6ca7(0x1bd)]+_0x4e6ca7(0x1b4)),_0x43e9fd[_0x4e6ca7(0x1ed)](_0x4e6ca7(0x1ec),{'val':JSON['stringify'](_0x4e77da),'ack':!![]});const _0x5a9d47=_0x4e77da[0x0],_0x5a2ebb='Regel\x20erkannt:\x20'+_0x5a9d47[_0x4e6ca7(0x1c0)]+'\x20('+(_0x5a9d47[_0x4e6ca7(0x1e8)]*0x64)[_0x4e6ca7(0x207)](0x0)+'%)';_0x43e9fd[_0x4e6ca7(0x1ed)](_0x4e6ca7(0x1fb),{'val':!![],'ack':!![]}),_0x43e9fd[_0x4e6ca7(0x1ed)]('analysis.automation.description',{'val':_0x5a2ebb,'ack':!![]});}else _0x43e9fd[_0x4e6ca7(0x1d6)][_0x4e6ca7(0x1ee)](_0x4e6ca7(0x1e7)),_0x43e9fd[_0x4e6ca7(0x1ed)](_0x4e6ca7(0x1fb),{'val':![],'ack':!![]}),_0x43e9fd[_0x4e6ca7(0x1ed)]('analysis.automation.detectedPatterns',{'val':'[]','ack':!![]});}else{if(_0x50bf34[_0x4e6ca7(0x1a8)]==='ENERGY_TRAIN_RESULT'){if(_0x50bf34[_0x4e6ca7(0x1b1)][_0x4e6ca7(0x1c9)])try{const _0x3c849a=JSON['parse'](_0x50bf34[_0x4e6ca7(0x1b1)][_0x4e6ca7(0x1e6)]);if(_0x3c849a[_0x4e6ca7(0x1f3)])_0x43e9fd[_0x4e6ca7(0x1ed)]('analysis.energy.insulationScore',{'val':JSON[_0x4e6ca7(0x1c1)](_0x3c849a[_0x4e6ca7(0x1f3)]),'ack':!![]});if(_0x3c849a[_0x4e6ca7(0x1d0)])_0x43e9fd[_0x4e6ca7(0x1ed)]('analysis.energy.heatingScore',{'val':JSON[_0x4e6ca7(0x1c1)](_0x3c849a[_0x4e6ca7(0x1d0)]),'ack':!![]});}catch(_0x5ea9a2){}}else{if(_0x50bf34['type']==='HEALTH_TRAIN_RESULT'){if(_0x50bf34['payload'][_0x4e6ca7(0x1c9)])_0x43e9fd[_0x4e6ca7(0x1d6)][_0x4e6ca7(0x1ee)](_0x4e6ca7(0x1e4));}else{if(_0x50bf34[_0x4e6ca7(0x1a8)]===_0x4e6ca7(0x1d2))_0x43e9fd[_0x4e6ca7(0x1ed)](_0x4e6ca7(0x1ff),{'val':new Date()[_0x4e6ca7(0x1f0)](),'ack':!![]}),_0x43e9fd[_0x4e6ca7(0x1ed)](_0x4e6ca7(0x1bf),{'val':_0x50bf34[_0x4e6ca7(0x1b1)][_0x4e6ca7(0x209)],'ack':!![]});else{if(_0x50bf34[_0x4e6ca7(0x1a8)]===_0x4e6ca7(0x1b3))_0x43e9fd['setStateAsync'](_0x4e6ca7(0x1e3),{'val':_0x50bf34['payload'][_0x4e6ca7(0x1f1)],'ack':!![]}),_0x43e9fd[_0x4e6ca7(0x1ed)](_0x4e6ca7(0x1df),{'val':_0x50bf34[_0x4e6ca7(0x1b1)][_0x4e6ca7(0x1b9)],'ack':!![]});else{if(_0x50bf34[_0x4e6ca7(0x1a8)]==='GAIT_RESULT'){const {speed_trend:_0x1fe70d}=_0x50bf34['payload'];if(_0x1fe70d!==undefined)_0x43e9fd['setStateAsync'](_0x4e6ca7(0x1e5),{'val':_0x1fe70d,'ack':!![]});}else{if(_0x50bf34[_0x4e6ca7(0x1a8)]===_0x4e6ca7(0x1b5)){const {forecast:_0x33b80f}=_0x50bf34['payload'];if(_0x33b80f)_0x43e9fd[_0x4e6ca7(0x1ed)]('analysis.energy.forecast',{'val':JSON['stringify'](_0x33b80f),'ack':!![]});}else{if(_0x50bf34[_0x4e6ca7(0x1a8)]===_0x4e6ca7(0x1f5)){const {data:_0x2d5d55}=_0x50bf34[_0x4e6ca7(0x1b1)];_0x2d5d55&&(_0x43e9fd['log']['info'](_0x4e6ca7(0x1f8)),_0x43e9fd[_0x4e6ca7(0x1ed)](_0x4e6ca7(0x1b2),{'val':JSON[_0x4e6ca7(0x1c1)](_0x2d5d55),'ack':!![]}));}else{if(_0x50bf34[_0x4e6ca7(0x1a8)]==='TOPOLOGY_ACK')_0x43e9fd[_0x4e6ca7(0x1d6)][_0x4e6ca7(0x1ea)](_0x4e6ca7(0x1d3));else{if(_0x50bf34[_0x4e6ca7(0x1a8)]===_0x4e6ca7(0x1e0)){const {room:_0x4c9e12,propagation:_0x5ac24e}=_0x50bf34[_0x4e6ca7(0x1b1)];let _0x27e90c=_0x4e6ca7(0x1aa),_0x155b1f=0x0;if(_0x5ac24e){const _0x25b2c7=Object['entries'](_0x5ac24e);_0x25b2c7['length']>0x0&&(_0x27e90c=_0x25b2c7[0x0][0x0],_0x155b1f=_0x25b2c7[0x0][0x1]);}_0x43e9fd['setStateAsync']('analysis.prediction.nextRoom',{'val':_0x27e90c,'ack':!![]}),_0x43e9fd[_0x4e6ca7(0x1ed)](_0x4e6ca7(0x1ac),{'val':_0x155b1f,'ack':!![]}),_0x155b1f>0.4&&_0x43e9fd['log'][_0x4e6ca7(0x1ea)](_0x4e6ca7(0x1d8)+_0x4c9e12+_0x4e6ca7(0x1cd)+_0x27e90c+'\x20('+(_0x155b1f*0x64)[_0x4e6ca7(0x207)](0x0)+'%)'),automation[_0x4e6ca7(0x1b7)](_0x43e9fd,_0x27e90c,_0x155b1f);}}}}}}}}}}}}}}function startService(_0x54d53f,_0x196dc7){const _0x5569c8=a4_0x1a8920;let _0x311c07=_0x5569c8(0x1c5);if(fs[_0x5569c8(0x1d9)](_0x196dc7))_0x311c07=_0x196dc7;try{const _0x1720ce=path['join'](__dirname,'..',_0x5569c8(0x1c4),_0x5569c8(0x20a));pythonProcess=spawn(_0x311c07,[_0x1720ce]),pythonProcess[_0x5569c8(0x1c2)]['on'](_0x5569c8(0x1d5),_0x2f91bf=>{const _0x1cfad3=_0x5569c8,_0x4061f8=_0x2f91bf[_0x1cfad3(0x1f2)]()[_0x1cfad3(0x1ae)]('\x0a');_0x4061f8[_0x1cfad3(0x1b6)](_0x26e574=>{const _0xf756c2=_0x1cfad3,_0x500f4d=_0x26e574[_0xf756c2(0x1cb)]();if(!_0x500f4d)return;if(_0x500f4d[_0xf756c2(0x1f9)](_0xf756c2(0x1af)))_0x54d53f[_0xf756c2(0x1d6)]['debug']('[PYTHON]\x20'+_0x500f4d['substring'](0x5)[_0xf756c2(0x1cb)]());else{if(_0x500f4d[_0xf756c2(0x1f9)](_0xf756c2(0x208)))try{const _0x58e384=JSON[_0xf756c2(0x1de)](_0x500f4d['substring'](0x8)[_0xf756c2(0x1cb)]());handleResult(_0x54d53f,_0x58e384);}catch(_0x9b829b){}}});}),pythonProcess['on'](_0x5569c8(0x1d1),_0x3c67eb=>{pythonProcess=null;}),_0x54d53f[_0x5569c8(0x1fe)]=(_0xe181d2,_0x36cd23)=>send(_0x54d53f,_0xe181d2,_0x36cd23);}catch(_0x3625df){_0x54d53f[_0x5569c8(0x1d6)]['error'](_0x5569c8(0x1f4)+_0x3625df[_0x5569c8(0x1ef)]);}}function stopService(_0x5d2fff){const _0xb4b7b1=a4_0x1a8920;if(pythonProcess){try{pythonProcess[_0xb4b7b1(0x1dc)]();}catch(_0xb5716f){}pythonProcess=null;}}module[a4_0x1a8920(0x1be)]={'startService':startService,'stopService':stopService,'send':send};