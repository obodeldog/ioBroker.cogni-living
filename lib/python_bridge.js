const a4_0x2021b6=a4_0x3f83;(function(_0x49a0ed,_0x28b29e){const _0x1e3c9e=a4_0x3f83,_0x28d629=_0x49a0ed();while(!![]){try{const _0x44573b=-parseInt(_0x1e3c9e(0xb8))/0x1*(-parseInt(_0x1e3c9e(0xd4))/0x2)+parseInt(_0x1e3c9e(0xc1))/0x3*(-parseInt(_0x1e3c9e(0xbf))/0x4)+-parseInt(_0x1e3c9e(0xad))/0x5+parseInt(_0x1e3c9e(0x9b))/0x6+-parseInt(_0x1e3c9e(0xb0))/0x7+-parseInt(_0x1e3c9e(0xbc))/0x8+parseInt(_0x1e3c9e(0xdc))/0x9*(parseInt(_0x1e3c9e(0x93))/0xa);if(_0x44573b===_0x28b29e)break;else _0x28d629['push'](_0x28d629['shift']());}catch(_0x287943){_0x28d629['push'](_0x28d629['shift']());}}}(a4_0x3a4c,0x3a021));const a4_0x47d208=(function(){let _0x5e46d5=!![];return function(_0x12004d,_0x4c74a7){const _0x44d16f=_0x5e46d5?function(){if(_0x4c74a7){const _0x130d7c=_0x4c74a7['apply'](_0x12004d,arguments);return _0x4c74a7=null,_0x130d7c;}}:function(){};return _0x5e46d5=![],_0x44d16f;};}()),a4_0x28f265=a4_0x47d208(this,function(){const _0x561263=a4_0x3f83;return a4_0x28f265[_0x561263(0xba)]()['search'](_0x561263(0xaa))['toString']()[_0x561263(0xa0)](a4_0x28f265)['search']('(((.+)+)+)+$');});function a4_0x3a4c(){const _0x52f67e=['info','insulation','analysis.training.status','heating','TRAINING_COMPLETE','handlePrediction','Unknown','2764728oXrGAZ','length','python3','PONG','./setup','constructor','threshold','analysis.health.lastCheck','split','toISOString','HEALTH_TRAIN_RESULT','join','âš ï¸\x20SECURITY\x20ALARM:\x20','analysis.energy.insulationScore','toFixed','(((.+)+)+)+$','sendNotification','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','1620330tWUXUQ','HEALTH_RESULT','\x0aGrund:\x20','2107847PevpfE','analysis.alertReason','ENERGY_OPTIMIZE_RESULT','writable','getState','data','ðŸ\x20Python\x20Pong','PINN_PREDICT_RESULT','23EJtEPl','details','toString','ENERGY_TRAIN_RESULT','2422376yYxyNN','analysis.security.lastCheck','val','4riWcLe','analysis.energy.forecast','825492iTEqZl','payload','startsWith','stdin','path','sendToPythonWrapper','analysis.security.currentThreshold','substring','ENERGY_PREDICT_RESULT','type','analysis.energy.mpcActive','debug','toLocaleTimeString','./automation','setStateAsync','analysis.prediction.confidence','analysis.energy.pinnForecast','analysis.energy.heatingScore','success','3108TvDrDG','[RESULT]','[PYTHON]\x20','Error\x20launching\x20Python:\x20','stringify','applyEnergySavings','trim','kill','139311kdsnUm','parse','log','analysis.health.gaitSpeed','SIGNAL_RESULT','analysis.isAlert','analysis.automation.detectedPatterns','is_anomaly','610qWdPSh'];a4_0x3a4c=function(){return _0x52f67e;};return a4_0x3a4c();}a4_0x28f265();'use strict';const {spawn}=require('child_process'),path=require(a4_0x2021b6(0xc5)),fs=require('fs'),setup=require(a4_0x2021b6(0x9f)),automation=require(a4_0x2021b6(0xce));let pythonProcess=null;function a4_0x3f83(_0x3d9898,_0x921f6d){const _0x20b376=a4_0x3a4c();return a4_0x3f83=function(_0x28f265,_0x47d208){_0x28f265=_0x28f265-0x91;let _0x3a4c5f=_0x20b376[_0x28f265];return _0x3a4c5f;},a4_0x3f83(_0x3d9898,_0x921f6d);}function send(_0x55f18a,_0x3e0610,_0x479491={}){const _0x4aa3fa=a4_0x2021b6;if(!pythonProcess||!pythonProcess[_0x4aa3fa(0xc4)][_0x4aa3fa(0xb3)])return;const _0x51ec1d=JSON[_0x4aa3fa(0xd8)]({'command':_0x3e0610,..._0x479491});try{pythonProcess[_0x4aa3fa(0xc4)]['write'](_0x51ec1d+'\x0a');}catch(_0x2030d0){}}function handleResult(_0x2dc56d,_0x6eaa99){const _0xd2959a=a4_0x2021b6;if(_0x6eaa99[_0xd2959a(0xca)]===_0xd2959a(0x9e))_0x2dc56d[_0xd2959a(0xde)][_0xd2959a(0xcc)](_0xd2959a(0xb6));else{if(_0x6eaa99[_0xd2959a(0xca)]==='SECURITY_RESULT'){const {anomaly_score:_0x16b779,is_anomaly:_0x424380,threshold:_0x55032e,explanation:_0x4f3b3a}=_0x6eaa99[_0xd2959a(0xc2)];_0x2dc56d[_0xd2959a(0xcf)]('analysis.security.lastScore',{'val':_0x16b779,'ack':!![]}),_0x2dc56d[_0xd2959a(0xcf)](_0xd2959a(0xbd),{'val':new Date()[_0xd2959a(0xa4)](),'ack':!![]});if(_0x55032e)_0x2dc56d[_0xd2959a(0xcf)](_0xd2959a(0xc7),{'val':_0x55032e,'ack':!![]});if(_0x424380){let _0x1bd34f=_0xd2959a(0xac)+_0x16b779[_0xd2959a(0xa9)](0x4)+')';if(_0x4f3b3a&&_0x4f3b3a!==_0xd2959a(0x9a))_0x1bd34f+=_0xd2959a(0xaf)+_0x4f3b3a;_0x2dc56d[_0xd2959a(0xcf)](_0xd2959a(0xe1),{'val':!![],'ack':!![]}),_0x2dc56d[_0xd2959a(0xcf)](_0xd2959a(0xb1),{'val':_0x1bd34f,'ack':!![]}),setup[_0xd2959a(0xab)](_0x2dc56d,_0xd2959a(0xa7)+_0x1bd34f,![],!![]);}}else{if(_0x6eaa99['type']===_0xd2959a(0x98)){const _0x999ee6=_0x6eaa99['payload'][_0xd2959a(0xb9)]||'',_0xf52cfc=_0x6eaa99[_0xd2959a(0xc2)][_0xd2959a(0xa1)],_0x513410=_0x6eaa99['payload']['success']?'Success:\x20'+new Date()[_0xd2959a(0xcd)]()+'\x20('+_0x999ee6+')':'Failed:\x20'+_0x6eaa99['payload']['reason'];_0x2dc56d[_0xd2959a(0xcf)](_0xd2959a(0x96),{'val':_0x513410,'ack':!![]});if(_0x6eaa99['payload'][_0xd2959a(0xd3)]&&_0xf52cfc)_0x2dc56d[_0xd2959a(0xcf)](_0xd2959a(0xc7),{'val':_0xf52cfc,'ack':!![]});}else{if(_0x6eaa99['type']===_0xd2959a(0xbb)){if(_0x6eaa99[_0xd2959a(0xc2)]['success'])try{const _0x5f0c9c=JSON[_0xd2959a(0xdd)](_0x6eaa99[_0xd2959a(0xc2)][_0xd2959a(0xb9)]);if(_0x5f0c9c[_0xd2959a(0x95)])_0x2dc56d[_0xd2959a(0xcf)](_0xd2959a(0xa8),{'val':JSON['stringify'](_0x5f0c9c[_0xd2959a(0x95)]),'ack':!![]});if(_0x5f0c9c[_0xd2959a(0x97)])_0x2dc56d['setStateAsync'](_0xd2959a(0xd2),{'val':JSON['stringify'](_0x5f0c9c[_0xd2959a(0x97)]),'ack':!![]});}catch(_0x1be58f){}}else{if(_0x6eaa99[_0xd2959a(0xca)]===_0xd2959a(0xa5)){if(_0x6eaa99[_0xd2959a(0xc2)][_0xd2959a(0xd3)])_0x2dc56d[_0xd2959a(0xde)][_0xd2959a(0x94)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x6eaa99['type']===_0xd2959a(0xae))_0x2dc56d['setStateAsync'](_0xd2959a(0xa2),{'val':new Date()[_0xd2959a(0xa4)](),'ack':!![]}),_0x2dc56d[_0xd2959a(0xcf)]('analysis.health.isAnomaly',{'val':_0x6eaa99[_0xd2959a(0xc2)][_0xd2959a(0x92)],'ack':!![]});else{if(_0x6eaa99[_0xd2959a(0xca)]==='GAIT_RESULT'){const {speed_trend:_0x4f0bc6}=_0x6eaa99['payload'];if(_0x4f0bc6!==undefined)_0x2dc56d[_0xd2959a(0xcf)](_0xd2959a(0xdf),{'val':_0x4f0bc6,'ack':!![]});}else{if(_0x6eaa99[_0xd2959a(0xca)]===_0xd2959a(0xc9)){const {forecast:_0x60649a}=_0x6eaa99[_0xd2959a(0xc2)];if(_0x60649a)_0x2dc56d[_0xd2959a(0xcf)](_0xd2959a(0xc0),{'val':JSON[_0xd2959a(0xd8)](_0x60649a),'ack':!![]});}else{if(_0x6eaa99['type']===_0xd2959a(0xb7)){const {forecast:_0x39867e}=_0x6eaa99[_0xd2959a(0xc2)];if(_0x39867e)_0x2dc56d['setStateAsync'](_0xd2959a(0xd1),{'val':JSON[_0xd2959a(0xd8)](_0x39867e),'ack':!![]});}else{if(_0x6eaa99[_0xd2959a(0xca)]===_0xd2959a(0xb2)){const {proposals:_0x21c790}=_0x6eaa99[_0xd2959a(0xc2)];_0x2dc56d[_0xd2959a(0xb4)](_0xd2959a(0xcb),(_0x59c68f,_0x6c9816)=>{const _0x4c299c=_0xd2959a;_0x6c9816&&_0x6c9816[_0x4c299c(0xbe)]===!![]&&_0x21c790&&_0x21c790[_0x4c299c(0x9c)]>0x0&&automation[_0x4c299c(0xd9)](_0x2dc56d,_0x21c790);});}else{if(_0x6eaa99['type']===_0xd2959a(0xe0)){const {room:_0x38226a,propagation:_0x22aade}=_0x6eaa99[_0xd2959a(0xc2)];let _0x2655be=_0xd2959a(0x9a),_0xf518ff=0x0;if(_0x22aade){const _0x138263=Object['entries'](_0x22aade);_0x138263[_0xd2959a(0x9c)]>0x0&&(_0x2655be=_0x138263[0x0][0x0],_0xf518ff=_0x138263[0x0][0x1]);}_0x2dc56d[_0xd2959a(0xcf)]('analysis.prediction.nextRoom',{'val':_0x2655be,'ack':!![]}),_0x2dc56d[_0xd2959a(0xcf)](_0xd2959a(0xd0),{'val':_0xf518ff,'ack':!![]}),automation[_0xd2959a(0x99)](_0x2dc56d,_0x2655be,_0xf518ff);}else{if(_0x6eaa99[_0xd2959a(0xca)]==='COMFORT_RESULT'){const {patterns:_0x4cc18b}=_0x6eaa99['payload'];if(_0x4cc18b&&_0x4cc18b[_0xd2959a(0x9c)]>0x0)_0x2dc56d[_0xd2959a(0xcf)](_0xd2959a(0x91),{'val':JSON[_0xd2959a(0xd8)](_0x4cc18b),'ack':!![]});}}}}}}}}}}}}}function startService(_0x7caa5,_0x438764){const _0x2afeaf=a4_0x2021b6;let _0x497ad3=_0x2afeaf(0x9d);if(fs['existsSync'](_0x438764))_0x497ad3=_0x438764;try{const _0x2a333a=path[_0x2afeaf(0xa6)](__dirname,'..','python_service','service.py');pythonProcess=spawn(_0x497ad3,[_0x2a333a]),pythonProcess['stdout']['on'](_0x2afeaf(0xb5),_0x3cf231=>{const _0x51b3e1=_0x2afeaf,_0xeda92d=_0x3cf231['toString']()[_0x51b3e1(0xa3)]('\x0a');_0xeda92d['forEach'](_0x1aaeef=>{const _0x4a5144=_0x51b3e1,_0x226e82=_0x1aaeef['trim']();if(!_0x226e82)return;if(_0x226e82[_0x4a5144(0xc3)]('[LOG]'))_0x7caa5[_0x4a5144(0xde)][_0x4a5144(0xcc)](_0x4a5144(0xd6)+_0x226e82[_0x4a5144(0xc8)](0x5)['trim']());else{if(_0x226e82['startsWith'](_0x4a5144(0xd5)))try{const _0x58a555=JSON['parse'](_0x226e82[_0x4a5144(0xc8)](0x8)[_0x4a5144(0xda)]());handleResult(_0x7caa5,_0x58a555);}catch(_0x4ad458){}}});}),pythonProcess['on']('close',_0x5c5aee=>{pythonProcess=null;}),_0x7caa5[_0x2afeaf(0xc6)]=(_0x101f6b,_0x14feca)=>send(_0x7caa5,_0x101f6b,_0x14feca);}catch(_0x219285){_0x7caa5[_0x2afeaf(0xde)]['error'](_0x2afeaf(0xd7)+_0x219285['message']);}}function stopService(_0x5491ba){const _0x2c78e8=a4_0x2021b6;if(pythonProcess){try{pythonProcess[_0x2c78e8(0xdb)]();}catch(_0x153285){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};