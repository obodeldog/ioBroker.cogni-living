const a4_0x1c03dd=a4_0x30d3;(function(_0x1e993b,_0x4f4580){const _0x4de5e1=a4_0x30d3,_0x937712=_0x1e993b();while(!![]){try{const _0x4844a1=-parseInt(_0x4de5e1(0x205))/0x1*(-parseInt(_0x4de5e1(0x235))/0x2)+-parseInt(_0x4de5e1(0x1e4))/0x3+-parseInt(_0x4de5e1(0x21a))/0x4*(-parseInt(_0x4de5e1(0x23d))/0x5)+parseInt(_0x4de5e1(0x1f1))/0x6*(parseInt(_0x4de5e1(0x203))/0x7)+-parseInt(_0x4de5e1(0x227))/0x8*(-parseInt(_0x4de5e1(0x1fc))/0x9)+parseInt(_0x4de5e1(0x23e))/0xa*(-parseInt(_0x4de5e1(0x1f2))/0xb)+-parseInt(_0x4de5e1(0x208))/0xc;if(_0x4844a1===_0x4f4580)break;else _0x937712['push'](_0x937712['shift']());}catch(_0x3cd048){_0x937712['push'](_0x937712['shift']());}}}(a4_0x488d,0x28a1f));const a4_0x151afb=(function(){let _0x38c408=!![];return function(_0x493b5b,_0x3ca6a4){const _0x34ba53=_0x38c408?function(){const _0x3fd02f=a4_0x30d3;if(_0x3ca6a4){const _0x54e1f6=_0x3ca6a4[_0x3fd02f(0x1ff)](_0x493b5b,arguments);return _0x3ca6a4=null,_0x54e1f6;}}:function(){};return _0x38c408=![],_0x34ba53;};}()),a4_0x1559e1=a4_0x151afb(this,function(){const _0x468ce7=a4_0x30d3;return a4_0x1559e1[_0x468ce7(0x228)]()[_0x468ce7(0x1d9)]('(((.+)+)+)+$')[_0x468ce7(0x228)]()[_0x468ce7(0x1ec)](a4_0x1559e1)['search']('(((.+)+)+)+$');});a4_0x1559e1();'use strict';const {spawn}=require(a4_0x1c03dd(0x1f4)),path=require(a4_0x1c03dd(0x234)),fs=require('fs'),setup=require(a4_0x1c03dd(0x1ea)),automation=require(a4_0x1c03dd(0x237));function a4_0x30d3(_0x55fccf,_0x5f2d6f){const _0x2f1eb0=a4_0x488d();return a4_0x30d3=function(_0x1559e1,_0x151afb){_0x1559e1=_0x1559e1-0x1d8;let _0x488df5=_0x2f1eb0[_0x1559e1];return _0x488df5;},a4_0x30d3(_0x55fccf,_0x5f2d6f);}let pythonProcess=null;function send(_0x2c3908,_0x204708,_0x527b0d={}){const _0x4c19b6=a4_0x1c03dd;if(!pythonProcess||!pythonProcess[_0x4c19b6(0x1dd)]['writable'])return;const _0x431ef5=JSON['stringify']({'command':_0x204708,..._0x527b0d});try{pythonProcess['stdin'][_0x4c19b6(0x232)](_0x431ef5+'\x0a');}catch(_0x264953){}}function handleResult(_0x4f0f47,_0x3e4f79){const _0x46ce1c=a4_0x1c03dd;if(_0x3e4f79[_0x46ce1c(0x224)]===_0x46ce1c(0x238))_0x4f0f47[_0x46ce1c(0x216)][_0x46ce1c(0x1db)](_0x46ce1c(0x1ed));else{if(_0x3e4f79['type']===_0x46ce1c(0x225)){const {anomaly_score:_0x47924e,is_anomaly:_0x40fb55,threshold:_0x5d0d88,explanation:_0x182e6e}=_0x3e4f79[_0x46ce1c(0x214)];_0x4f0f47['log'][_0x46ce1c(0x1f9)](_0x46ce1c(0x1e0)+_0x47924e[_0x46ce1c(0x219)](0x5)+_0x46ce1c(0x1df)+(_0x40fb55?_0x46ce1c(0x241):'OK')),_0x4f0f47[_0x46ce1c(0x204)](_0x46ce1c(0x239),{'val':_0x47924e,'ack':!![]}),_0x4f0f47[_0x46ce1c(0x204)](_0x46ce1c(0x207),{'val':new Date()[_0x46ce1c(0x201)](),'ack':!![]});if(_0x5d0d88)_0x4f0f47[_0x46ce1c(0x204)]('analysis.security.currentThreshold',{'val':_0x5d0d88,'ack':!![]});if(_0x40fb55){let _0x3a0e3d=_0x46ce1c(0x1f3)+_0x47924e[_0x46ce1c(0x219)](0x4)+')';if(_0x182e6e&&_0x182e6e!==_0x46ce1c(0x1de))_0x3a0e3d+=_0x46ce1c(0x212)+_0x182e6e;_0x4f0f47[_0x46ce1c(0x204)](_0x46ce1c(0x23a),{'val':!![],'ack':!![]}),_0x4f0f47['setStateAsync'](_0x46ce1c(0x1f6),{'val':_0x3a0e3d,'ack':!![]}),setup[_0x46ce1c(0x217)](_0x4f0f47,_0x46ce1c(0x1da)+_0x3a0e3d,![],!![]);}}else{if(_0x3e4f79[_0x46ce1c(0x224)]==='TRAINING_COMPLETE'){const _0x506d2a=_0x3e4f79[_0x46ce1c(0x214)][_0x46ce1c(0x20b)]||'',_0x225f25=_0x3e4f79['payload'][_0x46ce1c(0x20c)],_0x371fd7=_0x3e4f79[_0x46ce1c(0x214)]['success']?_0x46ce1c(0x209)+new Date()['toLocaleTimeString']()+'\x20('+_0x506d2a+')':_0x46ce1c(0x20d)+_0x3e4f79['payload'][_0x46ce1c(0x218)];_0x4f0f47[_0x46ce1c(0x204)](_0x46ce1c(0x23c),{'val':_0x371fd7,'ack':!![]});if(_0x3e4f79[_0x46ce1c(0x214)][_0x46ce1c(0x1f0)]&&_0x225f25)_0x4f0f47['setStateAsync'](_0x46ce1c(0x21d),{'val':_0x225f25,'ack':!![]});}else{if(_0x3e4f79[_0x46ce1c(0x224)]===_0x46ce1c(0x223)){const {patterns:_0x191287}=_0x3e4f79[_0x46ce1c(0x214)];if(_0x191287&&_0x191287[_0x46ce1c(0x20e)]>0x0){_0x4f0f47[_0x46ce1c(0x216)][_0x46ce1c(0x1f9)](_0x46ce1c(0x1fe)+_0x191287[_0x46ce1c(0x20e)]+_0x46ce1c(0x230)),_0x4f0f47[_0x46ce1c(0x204)](_0x46ce1c(0x22a),{'val':JSON[_0x46ce1c(0x1e7)](_0x191287),'ack':!![]});const _0x9dfac1=_0x191287[0x0],_0x1a4887=_0x46ce1c(0x242)+_0x9dfac1[_0x46ce1c(0x1e2)]+'\x20('+(_0x9dfac1[_0x46ce1c(0x22b)]*0x64)[_0x46ce1c(0x219)](0x0)+'%)';_0x4f0f47[_0x46ce1c(0x204)](_0x46ce1c(0x244),{'val':!![],'ack':!![]}),_0x4f0f47[_0x46ce1c(0x204)](_0x46ce1c(0x231),{'val':_0x1a4887,'ack':!![]});}else _0x4f0f47[_0x46ce1c(0x216)][_0x46ce1c(0x1f9)](_0x46ce1c(0x220)),_0x4f0f47[_0x46ce1c(0x204)](_0x46ce1c(0x244),{'val':![],'ack':!![]}),_0x4f0f47['setStateAsync']('analysis.automation.detectedPatterns',{'val':'[]','ack':!![]});}else{if(_0x3e4f79[_0x46ce1c(0x224)]==='ENERGY_TRAIN_RESULT'){if(_0x3e4f79['payload'][_0x46ce1c(0x1f0)])try{const _0x35f682=JSON[_0x46ce1c(0x1ee)](_0x3e4f79[_0x46ce1c(0x214)][_0x46ce1c(0x20b)]);if(_0x35f682['insulation'])_0x4f0f47[_0x46ce1c(0x204)](_0x46ce1c(0x1eb),{'val':JSON[_0x46ce1c(0x1e7)](_0x35f682[_0x46ce1c(0x20a)]),'ack':!![]});if(_0x35f682[_0x46ce1c(0x22f)])_0x4f0f47[_0x46ce1c(0x204)](_0x46ce1c(0x213),{'val':JSON['stringify'](_0x35f682['heating']),'ack':!![]});}catch(_0xf162c2){}}else{if(_0x3e4f79[_0x46ce1c(0x224)]===_0x46ce1c(0x1f8)){if(_0x3e4f79['payload'][_0x46ce1c(0x1f0)])_0x4f0f47['log'][_0x46ce1c(0x1f9)](_0x46ce1c(0x1d8));}else{if(_0x3e4f79[_0x46ce1c(0x224)]===_0x46ce1c(0x1fb))_0x4f0f47['setStateAsync'](_0x46ce1c(0x20f),{'val':new Date()['toISOString'](),'ack':!![]}),_0x4f0f47[_0x46ce1c(0x204)](_0x46ce1c(0x1dc),{'val':_0x3e4f79[_0x46ce1c(0x214)][_0x46ce1c(0x245)],'ack':!![]});else{if(_0x3e4f79[_0x46ce1c(0x224)]===_0x46ce1c(0x1e9))_0x4f0f47[_0x46ce1c(0x204)](_0x46ce1c(0x1fd),{'val':_0x3e4f79['payload'][_0x46ce1c(0x23b)],'ack':!![]}),_0x4f0f47['setStateAsync'](_0x46ce1c(0x229),{'val':_0x3e4f79['payload'][_0x46ce1c(0x1ef)],'ack':!![]});else{if(_0x3e4f79['type']==='GAIT_RESULT'){const {speed_trend:_0x3c5077}=_0x3e4f79[_0x46ce1c(0x214)];if(_0x3c5077!==undefined)_0x4f0f47['setStateAsync'](_0x46ce1c(0x221),{'val':_0x3c5077,'ack':!![]});}else{if(_0x3e4f79[_0x46ce1c(0x224)]===_0x46ce1c(0x1e6)){const {forecast:_0x54b6c6}=_0x3e4f79[_0x46ce1c(0x214)];if(_0x54b6c6)_0x4f0f47[_0x46ce1c(0x204)]('analysis.energy.forecast',{'val':JSON[_0x46ce1c(0x1e7)](_0x54b6c6),'ack':!![]});}else{if(_0x3e4f79['type']===_0x46ce1c(0x22c)){const {data:_0xbc8f0e}=_0x3e4f79[_0x46ce1c(0x214)];_0xbc8f0e&&(_0x4f0f47[_0x46ce1c(0x216)][_0x46ce1c(0x1f9)](_0x46ce1c(0x222)),_0x4f0f47[_0x46ce1c(0x204)](_0x46ce1c(0x21b),{'val':JSON[_0x46ce1c(0x1e7)](_0xbc8f0e),'ack':!![]}));}else{if(_0x3e4f79[_0x46ce1c(0x224)]===_0x46ce1c(0x1e8))_0x4f0f47[_0x46ce1c(0x216)]['debug'](_0x46ce1c(0x211));else{if(_0x3e4f79[_0x46ce1c(0x224)]==='SIGNAL_RESULT'){const {room:_0x399d08,propagation:_0x127396}=_0x3e4f79['payload'];let _0x52650f=_0x46ce1c(0x1de),_0x127800=0x0;if(_0x127396){const _0x3865b9=Object['entries'](_0x127396);_0x3865b9['length']>0x0&&(_0x52650f=_0x3865b9[0x0][0x0],_0x127800=_0x3865b9[0x0][0x1]);}_0x4f0f47[_0x46ce1c(0x204)](_0x46ce1c(0x1e3),{'val':_0x52650f,'ack':!![]}),_0x4f0f47[_0x46ce1c(0x204)](_0x46ce1c(0x23f),{'val':_0x127800,'ack':!![]}),_0x127800>0.4&&_0x4f0f47['log']['debug']('ðŸ”®\x20Prediction:\x20From\x20'+_0x399d08+_0x46ce1c(0x1e5)+_0x52650f+'\x20('+(_0x127800*0x64)[_0x46ce1c(0x219)](0x0)+'%)'),automation['handlePrediction'](_0x4f0f47,_0x52650f,_0x127800);}}}}}}}}}}}}}}function startService(_0x38e092,_0x2fd62e){const _0x4359b5=a4_0x1c03dd;let _0x1e2cda=_0x4359b5(0x21e);if(fs[_0x4359b5(0x1fa)](_0x2fd62e))_0x1e2cda=_0x2fd62e;try{const _0x4042e9=path['join'](__dirname,'..',_0x4359b5(0x21f),'service.py');pythonProcess=spawn(_0x1e2cda,[_0x4042e9]),pythonProcess[_0x4359b5(0x200)]['on'](_0x4359b5(0x215),_0xcc75ae=>{const _0x369eb9=_0x4359b5,_0x4edba1=_0xcc75ae[_0x369eb9(0x228)]()[_0x369eb9(0x226)]('\x0a');_0x4edba1[_0x369eb9(0x22d)](_0x522e1f=>{const _0x38abd5=_0x369eb9,_0x43816a=_0x522e1f[_0x38abd5(0x1e1)]();if(!_0x43816a)return;if(_0x43816a[_0x38abd5(0x233)](_0x38abd5(0x236)))_0x38e092[_0x38abd5(0x216)][_0x38abd5(0x1db)](_0x38abd5(0x21c)+_0x43816a[_0x38abd5(0x240)](0x5)[_0x38abd5(0x1e1)]());else{if(_0x43816a['startsWith'](_0x38abd5(0x202)))try{const _0x177e5d=JSON['parse'](_0x43816a['substring'](0x8)[_0x38abd5(0x1e1)]());handleResult(_0x38e092,_0x177e5d);}catch(_0x2639f3){}}});}),pythonProcess['on'](_0x4359b5(0x243),_0x2628c5=>{pythonProcess=null;}),_0x38e092['sendToPythonWrapper']=(_0x9d1045,_0x4ef598)=>send(_0x38e092,_0x9d1045,_0x4ef598);}catch(_0x2160c0){_0x38e092[_0x4359b5(0x216)][_0x4359b5(0x1f5)](_0x4359b5(0x1f7)+_0x2160c0[_0x4359b5(0x22e)]);}}function stopService(_0x14afff){const _0x398725=a4_0x1c03dd;if(pythonProcess){try{pythonProcess[_0x398725(0x210)]();}catch(_0x5fea3d){}pythonProcess=null;}}module[a4_0x1c03dd(0x206)]={'startService':startService,'stopService':stopService,'send':send};function a4_0x488d(){const _0x3aade3=['analysis.energy.insulationScore','constructor','ðŸ\x20Python\x20Pong','parse','change_percent','success','993318XREpSQ','11nfVeeY','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','child_process','error','analysis.alertReason','Error\x20launching\x20Python:\x20','HEALTH_TRAIN_RESULT','info','existsSync','HEALTH_RESULT','308547GTkEDa','analysis.health.trendDiagnosis','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','apply','stdout','toISOString','[RESULT]','7nsVauo','setStateAsync','165rJjtcq','exports','analysis.security.lastCheck','4700736Abjfjy','Success:\x20','insulation','details','threshold','Failed:\x20','length','analysis.health.lastCheck','kill','ðŸ\x20Python\x20confirmed\x20new\x20topology.','\x0aGrund:\x20','analysis.energy.heatingScore','payload','data','log','sendNotification','reason','toFixed','96808lzkYfG','analysis.security.topologyMatrix','[PYTHON]\x20','analysis.security.currentThreshold','python3','python_service','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','analysis.health.gaitSpeed','ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.','COMFORT_RESULT','type','SECURITY_RESULT','split','64FShEXU','toString','analysis.health.trendValue','analysis.automation.detectedPatterns','confidence','TOPOLOGY_RESULT','forEach','message','heating','\x20new\x20patterns.','analysis.automation.description','write','startsWith','path','1582JvYcof','[LOG]','./automation','PONG','analysis.security.lastScore','analysis.isAlert','diagnosis','analysis.training.status','20QRTEnr','787860vIbuZc','analysis.prediction.confidence','substring','ANOMALY','Regel\x20erkannt:\x20','close','analysis.automation.patternDetected','is_anomaly','âœ…\x20HEALTH\x20TRAINED.','search','âš ï¸\x20SECURITY\x20ALARM:\x20','debug','analysis.health.isAnomaly','stdin','Unknown','\x20->\x20','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','trim','rule','analysis.prediction.nextRoom','90585RHTWGN','\x20->\x20Likely\x20','ENERGY_PREDICT_RESULT','stringify','TOPOLOGY_ACK','TREND_RESULT','./setup'];a4_0x488d=function(){return _0x3aade3;};return a4_0x488d();}