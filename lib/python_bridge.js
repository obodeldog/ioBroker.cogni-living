const a4_0x3a61bf=a4_0x19bf;(function(_0x251be5,_0x3b7ed9){const _0x38a7d8=a4_0x19bf,_0x1365cb=_0x251be5();while(!![]){try{const _0x541527=parseInt(_0x38a7d8(0x1cb))/0x1+parseInt(_0x38a7d8(0x1b1))/0x2+parseInt(_0x38a7d8(0x1b8))/0x3*(-parseInt(_0x38a7d8(0x1c2))/0x4)+-parseInt(_0x38a7d8(0x183))/0x5*(parseInt(_0x38a7d8(0x1c3))/0x6)+-parseInt(_0x38a7d8(0x1a8))/0x7*(parseInt(_0x38a7d8(0x1b4))/0x8)+parseInt(_0x38a7d8(0x19d))/0x9*(-parseInt(_0x38a7d8(0x196))/0xa)+parseInt(_0x38a7d8(0x1c7))/0xb*(parseInt(_0x38a7d8(0x18e))/0xc);if(_0x541527===_0x3b7ed9)break;else _0x1365cb['push'](_0x1365cb['shift']());}catch(_0xd63500){_0x1365cb['push'](_0x1365cb['shift']());}}}(a4_0x473b,0xd85e7));const a4_0x544ece=(function(){let _0x319238=!![];return function(_0x7cedc6,_0x56b939){const _0x151561=_0x319238?function(){const _0x3f7e8f=a4_0x19bf;if(_0x56b939){const _0x419e73=_0x56b939[_0x3f7e8f(0x1c9)](_0x7cedc6,arguments);return _0x56b939=null,_0x419e73;}}:function(){};return _0x319238=![],_0x151561;};}()),a4_0x531d38=a4_0x544ece(this,function(){const _0x56b8c8=a4_0x19bf;return a4_0x531d38[_0x56b8c8(0x180)]()[_0x56b8c8(0x189)]('(((.+)+)+)+$')[_0x56b8c8(0x180)]()[_0x56b8c8(0x1ae)](a4_0x531d38)[_0x56b8c8(0x189)]('(((.+)+)+)+$');});a4_0x531d38();'use strict';function a4_0x473b(){const _0x26cf80=['analysis.energy.mpcActive','close','analysis.alertReason','Failed:\x20','HEALTH_RESULT','stdin','1791BtYibN','./setup','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','TRAINING_COMPLETE','âœ…\x20HEALTH\x20TRAINED.','analysis.security.lastScore','python_service','trim','substring','analysis.energy.heatingScore','toISOString','56IgEPMA','child_process','âš ï¸\x20SECURITY\x20ALARM:\x20','analysis.energy.insulationScore','payload','path','constructor','toFixed','insulation','923214BpVQNt','message','HEALTH_TRAIN_RESULT','967432fFGojZ','parse','analysis.security.currentThreshold','[RESULT]','27DSFYeU','data','info','reason','heating','handlePrediction','\x0aGrund:\x20','ENERGY_OPTIMIZE_RESULT','success','sendToPythonWrapper','612236Lbeecl','6kAckqd','ENERGY_PREDICT_RESULT','startsWith','length','143ZxFesx','writable','apply','Unknown','516986UtQuLw','toLocaleTimeString','stdout','analysis.energy.forecast','stringify','log','COMFORT_RESULT','error','PONG','analysis.prediction.confidence','debug','applyEnergySavings','threshold','analysis.training.status','toString','analysis.health.gaitSpeed','details','2596625bERuGI','setStateAsync','analysis.prediction.nextRoom','analysis.health.isAnomaly','entries','service.py','search','ENERGY_TRAIN_RESULT','type','Success:\x20','[PYTHON]\x20','3594924PbiPmF','./automation','forEach','join','analysis.security.lastCheck','kill','SECURITY_RESULT','python3','56410PlfxQj'];a4_0x473b=function(){return _0x26cf80;};return a4_0x473b();}const {spawn}=require(a4_0x3a61bf(0x1a9)),path=require(a4_0x3a61bf(0x1ad)),fs=require('fs'),setup=require(a4_0x3a61bf(0x19e)),automation=require(a4_0x3a61bf(0x18f));let pythonProcess=null;function send(_0x5351af,_0x4f3a7a,_0x21ac81={}){const _0x5f4c7b=a4_0x3a61bf;if(!pythonProcess||!pythonProcess['stdin'][_0x5f4c7b(0x1c8)])return;const _0x5054c7=JSON[_0x5f4c7b(0x1cf)]({'command':_0x4f3a7a,..._0x21ac81});try{pythonProcess[_0x5f4c7b(0x19c)]['write'](_0x5054c7+'\x0a');}catch(_0x2de5d2){}}function handleResult(_0x27c494,_0x37c52d){const _0x57cfd5=a4_0x3a61bf;if(_0x37c52d[_0x57cfd5(0x18b)]===_0x57cfd5(0x1d3))_0x27c494[_0x57cfd5(0x1d0)][_0x57cfd5(0x17c)]('ðŸ\x20Python\x20Pong');else{if(_0x37c52d[_0x57cfd5(0x18b)]===_0x57cfd5(0x194)){const {anomaly_score:_0x318815,is_anomaly:_0x464257,threshold:_0x27ce53,explanation:_0x432636}=_0x37c52d[_0x57cfd5(0x1ac)];_0x27c494[_0x57cfd5(0x184)](_0x57cfd5(0x1a2),{'val':_0x318815,'ack':!![]}),_0x27c494[_0x57cfd5(0x184)](_0x57cfd5(0x192),{'val':new Date()[_0x57cfd5(0x1a7)](),'ack':!![]});if(_0x27ce53)_0x27c494[_0x57cfd5(0x184)](_0x57cfd5(0x1b6),{'val':_0x27ce53,'ack':!![]});if(_0x464257){let _0x241596=_0x57cfd5(0x19f)+_0x318815[_0x57cfd5(0x1af)](0x4)+')';if(_0x432636&&_0x432636!==_0x57cfd5(0x1ca))_0x241596+=_0x57cfd5(0x1be)+_0x432636;_0x27c494['setStateAsync']('analysis.isAlert',{'val':!![],'ack':!![]}),_0x27c494[_0x57cfd5(0x184)](_0x57cfd5(0x199),{'val':_0x241596,'ack':!![]}),setup['sendNotification'](_0x27c494,_0x57cfd5(0x1aa)+_0x241596,![],!![]);}}else{if(_0x37c52d[_0x57cfd5(0x18b)]===_0x57cfd5(0x1a0)){const _0x78f932=_0x37c52d['payload']['details']||'',_0x7de006=_0x37c52d[_0x57cfd5(0x1ac)][_0x57cfd5(0x17e)],_0x3bc1a2=_0x37c52d[_0x57cfd5(0x1ac)]['success']?_0x57cfd5(0x18c)+new Date()[_0x57cfd5(0x1cc)]()+'\x20('+_0x78f932+')':_0x57cfd5(0x19a)+_0x37c52d[_0x57cfd5(0x1ac)][_0x57cfd5(0x1bb)];_0x27c494[_0x57cfd5(0x184)](_0x57cfd5(0x17f),{'val':_0x3bc1a2,'ack':!![]});if(_0x37c52d[_0x57cfd5(0x1ac)][_0x57cfd5(0x1c0)]&&_0x7de006)_0x27c494[_0x57cfd5(0x184)](_0x57cfd5(0x1b6),{'val':_0x7de006,'ack':!![]});}else{if(_0x37c52d[_0x57cfd5(0x18b)]===_0x57cfd5(0x18a)){if(_0x37c52d[_0x57cfd5(0x1ac)][_0x57cfd5(0x1c0)])try{const _0x5aa037=JSON['parse'](_0x37c52d[_0x57cfd5(0x1ac)][_0x57cfd5(0x182)]);if(_0x5aa037[_0x57cfd5(0x1b0)])_0x27c494[_0x57cfd5(0x184)](_0x57cfd5(0x1ab),{'val':JSON[_0x57cfd5(0x1cf)](_0x5aa037['insulation']),'ack':!![]});if(_0x5aa037['heating'])_0x27c494[_0x57cfd5(0x184)](_0x57cfd5(0x1a6),{'val':JSON[_0x57cfd5(0x1cf)](_0x5aa037[_0x57cfd5(0x1bc)]),'ack':!![]});}catch(_0x58fc5f){}}else{if(_0x37c52d[_0x57cfd5(0x18b)]===_0x57cfd5(0x1b3)){if(_0x37c52d[_0x57cfd5(0x1ac)][_0x57cfd5(0x1c0)])_0x27c494[_0x57cfd5(0x1d0)][_0x57cfd5(0x1ba)](_0x57cfd5(0x1a1));}else{if(_0x37c52d[_0x57cfd5(0x18b)]===_0x57cfd5(0x19b))_0x27c494[_0x57cfd5(0x184)]('analysis.health.lastCheck',{'val':new Date()[_0x57cfd5(0x1a7)](),'ack':!![]}),_0x27c494[_0x57cfd5(0x184)](_0x57cfd5(0x186),{'val':_0x37c52d[_0x57cfd5(0x1ac)]['is_anomaly'],'ack':!![]});else{if(_0x37c52d[_0x57cfd5(0x18b)]==='GAIT_RESULT'){const {speed_trend:_0x379c65}=_0x37c52d[_0x57cfd5(0x1ac)];if(_0x379c65!==undefined)_0x27c494[_0x57cfd5(0x184)](_0x57cfd5(0x181),{'val':_0x379c65,'ack':!![]});}else{if(_0x37c52d[_0x57cfd5(0x18b)]===_0x57cfd5(0x1c4)){const {forecast:_0x21b72e}=_0x37c52d[_0x57cfd5(0x1ac)];if(_0x21b72e)_0x27c494[_0x57cfd5(0x184)](_0x57cfd5(0x1ce),{'val':JSON[_0x57cfd5(0x1cf)](_0x21b72e),'ack':!![]});}else{if(_0x37c52d['type']===_0x57cfd5(0x1bf)){const {proposals:_0x34c41d}=_0x37c52d[_0x57cfd5(0x1ac)];_0x27c494['getState'](_0x57cfd5(0x197),(_0x5a4a08,_0x3f9175)=>{const _0x5d45bc=_0x57cfd5;_0x3f9175&&_0x3f9175['val']===!![]&&_0x34c41d&&_0x34c41d['length']>0x0&&automation[_0x5d45bc(0x17d)](_0x27c494,_0x34c41d);});}else{if(_0x37c52d['type']==='SIGNAL_RESULT'){const {room:_0x5b05c4,propagation:_0x37c5a3}=_0x37c52d[_0x57cfd5(0x1ac)];let _0x3faaaa='Unknown',_0x817d62=0x0;if(_0x37c5a3){const _0x19721c=Object[_0x57cfd5(0x187)](_0x37c5a3);_0x19721c[_0x57cfd5(0x1c6)]>0x0&&(_0x3faaaa=_0x19721c[0x0][0x0],_0x817d62=_0x19721c[0x0][0x1]);}_0x27c494[_0x57cfd5(0x184)](_0x57cfd5(0x185),{'val':_0x3faaaa,'ack':!![]}),_0x27c494[_0x57cfd5(0x184)](_0x57cfd5(0x1d4),{'val':_0x817d62,'ack':!![]}),automation[_0x57cfd5(0x1bd)](_0x27c494,_0x3faaaa,_0x817d62);}else{if(_0x37c52d[_0x57cfd5(0x18b)]===_0x57cfd5(0x1d1)){const {patterns:_0x431271}=_0x37c52d['payload'];if(_0x431271&&_0x431271[_0x57cfd5(0x1c6)]>0x0)_0x27c494['setStateAsync']('analysis.automation.detectedPatterns',{'val':JSON[_0x57cfd5(0x1cf)](_0x431271),'ack':!![]});}}}}}}}}}}}}function a4_0x19bf(_0x159574,_0x5a5abd){const _0x1daeca=a4_0x473b();return a4_0x19bf=function(_0x531d38,_0x544ece){_0x531d38=_0x531d38-0x17c;let _0x473bb1=_0x1daeca[_0x531d38];return _0x473bb1;},a4_0x19bf(_0x159574,_0x5a5abd);}function startService(_0x1bc02d,_0x6b6c8c){const _0x1bd3e2=a4_0x3a61bf;let _0x3c054b=_0x1bd3e2(0x195);if(fs['existsSync'](_0x6b6c8c))_0x3c054b=_0x6b6c8c;try{const _0x263a3f=path[_0x1bd3e2(0x191)](__dirname,'..',_0x1bd3e2(0x1a3),_0x1bd3e2(0x188));pythonProcess=spawn(_0x3c054b,[_0x263a3f]),pythonProcess[_0x1bd3e2(0x1cd)]['on'](_0x1bd3e2(0x1b9),_0x303024=>{const _0x2711a3=_0x1bd3e2,_0x110ebe=_0x303024[_0x2711a3(0x180)]()['split']('\x0a');_0x110ebe[_0x2711a3(0x190)](_0x4951dc=>{const _0x1fb586=_0x2711a3,_0x1af0e3=_0x4951dc[_0x1fb586(0x1a4)]();if(!_0x1af0e3)return;if(_0x1af0e3[_0x1fb586(0x1c5)]('[LOG]'))_0x1bc02d[_0x1fb586(0x1d0)][_0x1fb586(0x17c)](_0x1fb586(0x18d)+_0x1af0e3[_0x1fb586(0x1a5)](0x5)[_0x1fb586(0x1a4)]());else{if(_0x1af0e3[_0x1fb586(0x1c5)](_0x1fb586(0x1b7)))try{const _0x13d913=JSON[_0x1fb586(0x1b5)](_0x1af0e3[_0x1fb586(0x1a5)](0x8)[_0x1fb586(0x1a4)]());handleResult(_0x1bc02d,_0x13d913);}catch(_0x48793d){}}});}),pythonProcess['on'](_0x1bd3e2(0x198),_0x3a913f=>{pythonProcess=null;}),_0x1bc02d[_0x1bd3e2(0x1c1)]=(_0x1864dd,_0x2c5bdf)=>send(_0x1bc02d,_0x1864dd,_0x2c5bdf);}catch(_0xc33926){_0x1bc02d['log'][_0x1bd3e2(0x1d2)]('Error\x20launching\x20Python:\x20'+_0xc33926[_0x1bd3e2(0x1b2)]);}}function stopService(_0x1a067a){const _0x16be8a=a4_0x3a61bf;if(pythonProcess){try{pythonProcess[_0x16be8a(0x193)]();}catch(_0x26c00b){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};