const a4_0x345fe3=a4_0x1e04;(function(_0x3310f0,_0x1976fd){const _0x30f70b=a4_0x1e04,_0x2f8ad3=_0x3310f0();while(!![]){try{const _0x13b00a=parseInt(_0x30f70b(0x8e))/0x1+-parseInt(_0x30f70b(0xb8))/0x2*(parseInt(_0x30f70b(0xa1))/0x3)+parseInt(_0x30f70b(0x96))/0x4*(parseInt(_0x30f70b(0xa9))/0x5)+parseInt(_0x30f70b(0x92))/0x6*(parseInt(_0x30f70b(0x71))/0x7)+parseInt(_0x30f70b(0xc0))/0x8+parseInt(_0x30f70b(0x94))/0x9*(-parseInt(_0x30f70b(0x8a))/0xa)+-parseInt(_0x30f70b(0x86))/0xb;if(_0x13b00a===_0x1976fd)break;else _0x2f8ad3['push'](_0x2f8ad3['shift']());}catch(_0x27857e){_0x2f8ad3['push'](_0x2f8ad3['shift']());}}}(a4_0xeadd,0x90d7d));const a4_0x31965d=(function(){let _0x3a0655=!![];return function(_0xa46e02,_0x5be65a){const _0x13a794=_0x3a0655?function(){const _0xd3870b=a4_0x1e04;if(_0x5be65a){const _0x2f8eb2=_0x5be65a[_0xd3870b(0xba)](_0xa46e02,arguments);return _0x5be65a=null,_0x2f8eb2;}}:function(){};return _0x3a0655=![],_0x13a794;};}()),a4_0x1e9a5f=a4_0x31965d(this,function(){const _0x3e5fa9=a4_0x1e04;return a4_0x1e9a5f[_0x3e5fa9(0xa4)]()['search'](_0x3e5fa9(0x67))[_0x3e5fa9(0xa4)]()[_0x3e5fa9(0xbd)](a4_0x1e9a5f)[_0x3e5fa9(0x8f)](_0x3e5fa9(0x67));});a4_0x1e9a5f();'use strict';const {spawn}=require(a4_0x345fe3(0x6c)),path=require(a4_0x345fe3(0x98)),fs=require('fs'),setup=require(a4_0x345fe3(0xb9)),automation=require('./automation');let pythonProcess=null;function send(_0x1dad66,_0x4c5a32,_0x41fee0={}){const _0x3b02ff=a4_0x345fe3;if(!pythonProcess||!pythonProcess[_0x3b02ff(0xaf)][_0x3b02ff(0x75)])return;const _0x7b478f=JSON[_0x3b02ff(0x7f)]({'command':_0x4c5a32,..._0x41fee0});try{pythonProcess[_0x3b02ff(0xaf)][_0x3b02ff(0x73)](_0x7b478f+'\x0a');}catch(_0x2bedc9){}}function handleResult(_0x2a6f20,_0x5074a7){const _0x184566=a4_0x345fe3;if(_0x5074a7[_0x184566(0xa6)]===_0x184566(0x9d))_0x2a6f20[_0x184566(0x87)]['debug'](_0x184566(0x9b));else{if(_0x5074a7[_0x184566(0xa6)]===_0x184566(0xc2)){const {anomaly_score:_0x3d3156,is_anomaly:_0x512706,threshold:_0x346866,explanation:_0x3da696}=_0x5074a7[_0x184566(0x97)];_0x2a6f20['setStateAsync'](_0x184566(0xa5),{'val':_0x3d3156,'ack':!![]}),_0x2a6f20[_0x184566(0x7b)](_0x184566(0xbc),{'val':new Date()[_0x184566(0xb1)](),'ack':!![]});if(_0x346866)_0x2a6f20[_0x184566(0x7b)](_0x184566(0xac),{'val':_0x346866,'ack':!![]});if(_0x512706){let _0x47598f=_0x184566(0xa3)+_0x3d3156[_0x184566(0xa7)](0x4)+')';if(_0x3da696&&_0x3da696!==_0x184566(0xb5))_0x47598f+=_0x184566(0x83)+_0x3da696;_0x2a6f20[_0x184566(0x7b)](_0x184566(0x6d),{'val':!![],'ack':!![]}),_0x2a6f20[_0x184566(0x7b)](_0x184566(0x74),{'val':_0x47598f,'ack':!![]}),setup[_0x184566(0x9f)](_0x2a6f20,_0x184566(0x79)+_0x47598f,![],!![]);}}else{if(_0x5074a7['type']===_0x184566(0xb3)){const _0x28fbd3=_0x5074a7[_0x184566(0x97)]['details']||'',_0x4ce7ae=_0x5074a7['payload']['threshold'],_0x1ca071=_0x5074a7[_0x184566(0x97)][_0x184566(0x68)]?_0x184566(0x9a)+new Date()[_0x184566(0x81)]()+'\x20('+_0x28fbd3+')':_0x184566(0x8c)+_0x5074a7[_0x184566(0x97)][_0x184566(0xb2)];_0x2a6f20[_0x184566(0x7b)](_0x184566(0x7a),{'val':_0x1ca071,'ack':!![]});if(_0x5074a7[_0x184566(0x97)][_0x184566(0x68)]&&_0x4ce7ae)_0x2a6f20[_0x184566(0x7b)]('analysis.security.currentThreshold',{'val':_0x4ce7ae,'ack':!![]});}else{if(_0x5074a7[_0x184566(0xa6)]===_0x184566(0x89)){if(_0x5074a7[_0x184566(0x97)][_0x184566(0x68)])try{const _0x4d3b1a=JSON['parse'](_0x5074a7[_0x184566(0x97)][_0x184566(0x88)]);if(_0x4d3b1a[_0x184566(0x72)])_0x2a6f20[_0x184566(0x7b)](_0x184566(0xb4),{'val':JSON[_0x184566(0x7f)](_0x4d3b1a[_0x184566(0x72)]),'ack':!![]});if(_0x4d3b1a[_0x184566(0xa0)])_0x2a6f20[_0x184566(0x7b)]('analysis.energy.heatingScore',{'val':JSON['stringify'](_0x4d3b1a['heating']),'ack':!![]});}catch(_0x9b766){}}else{if(_0x5074a7['type']===_0x184566(0xbe)){if(_0x5074a7[_0x184566(0x97)][_0x184566(0x68)])_0x2a6f20[_0x184566(0x87)]['info'](_0x184566(0xad));}else{if(_0x5074a7[_0x184566(0xa6)]===_0x184566(0x95))_0x2a6f20[_0x184566(0x7b)]('analysis.health.lastCheck',{'val':new Date()['toISOString'](),'ack':!![]}),_0x2a6f20[_0x184566(0x7b)](_0x184566(0x78),{'val':_0x5074a7[_0x184566(0x97)][_0x184566(0x7c)],'ack':!![]});else{if(_0x5074a7[_0x184566(0xa6)]==='GAIT_RESULT'){const {speed_trend:_0x18c3ca}=_0x5074a7[_0x184566(0x97)];if(_0x18c3ca!==undefined)_0x2a6f20['setStateAsync'](_0x184566(0x7e),{'val':_0x18c3ca,'ack':!![]});}else{if(_0x5074a7['type']==='ENERGY_PREDICT_RESULT'){const {forecast:_0x5c2525}=_0x5074a7['payload'];if(_0x5c2525)_0x2a6f20[_0x184566(0x7b)](_0x184566(0x82),{'val':JSON['stringify'](_0x5c2525),'ack':!![]});}else{if(_0x5074a7[_0x184566(0xa6)]===_0x184566(0x76)){const {forecast:_0x92e4ae}=_0x5074a7[_0x184566(0x97)];if(_0x92e4ae)_0x2a6f20['setStateAsync'](_0x184566(0xa8),{'val':JSON[_0x184566(0x7f)](_0x92e4ae),'ack':!![]});}else{if(_0x5074a7[_0x184566(0xa6)]===_0x184566(0xaa)){const {proposals:_0x206656}=_0x5074a7['payload'];_0x2a6f20[_0x184566(0xc1)]('analysis.energy.mpcActive',(_0x24960e,_0x8a60bf)=>{const _0x42c053=_0x184566;_0x8a60bf&&_0x8a60bf['val']===!![]&&_0x206656&&_0x206656['length']>0x0&&automation[_0x42c053(0xb6)](_0x2a6f20,_0x206656);});}else{if(_0x5074a7[_0x184566(0xa6)]==='SIGNAL_RESULT'){const {room:_0x51af58,propagation:_0x477bf5}=_0x5074a7['payload'];let _0x3de6a5=_0x184566(0xb5),_0x39533d=0x0;if(_0x477bf5){const _0x441bae=Object['entries'](_0x477bf5);_0x441bae[_0x184566(0x85)]>0x0&&(_0x3de6a5=_0x441bae[0x0][0x0],_0x39533d=_0x441bae[0x0][0x1]);}_0x2a6f20[_0x184566(0x7b)]('analysis.prediction.nextRoom',{'val':_0x3de6a5,'ack':!![]}),_0x2a6f20['setStateAsync'](_0x184566(0x8d),{'val':_0x39533d,'ack':!![]}),automation[_0x184566(0x6b)](_0x2a6f20,_0x3de6a5,_0x39533d);}else{if(_0x5074a7[_0x184566(0xa6)]===_0x184566(0x84)){const {patterns:_0x11081d}=_0x5074a7[_0x184566(0x97)];if(_0x11081d&&_0x11081d['length']>0x0)_0x2a6f20[_0x184566(0x7b)](_0x184566(0xb0),{'val':JSON[_0x184566(0x7f)](_0x11081d),'ack':!![]});}}}}}}}}}}}}}function a4_0x1e04(_0x176720,_0x5e505a){const _0x50085d=a4_0xeadd();return a4_0x1e04=function(_0x1e9a5f,_0x31965d){_0x1e9a5f=_0x1e9a5f-0x66;let _0xeadd7b=_0x50085d[_0x1e9a5f];return _0xeadd7b;},a4_0x1e04(_0x176720,_0x5e505a);}function startService(_0x3aeec4,_0x50e1d2){const _0x521e5e=a4_0x345fe3;let _0x367d20=_0x521e5e(0x6f);if(fs[_0x521e5e(0x91)](_0x50e1d2))_0x367d20=_0x50e1d2;try{const _0x5782bc=path[_0x521e5e(0x69)](__dirname,'..',_0x521e5e(0xab),_0x521e5e(0xa2));pythonProcess=spawn(_0x367d20,[_0x5782bc]),pythonProcess[_0x521e5e(0x80)]['on'](_0x521e5e(0xbf),_0xe6fd74=>{const _0x347b7b=_0x521e5e,_0x371ae9=_0xe6fd74['toString']()[_0x347b7b(0xb7)]('\x0a');_0x371ae9[_0x347b7b(0x93)](_0x37ef42=>{const _0x21df5a=_0x347b7b,_0x5bca1a=_0x37ef42['trim']();if(!_0x5bca1a)return;if(_0x5bca1a[_0x21df5a(0x8b)](_0x21df5a(0x9c)))_0x3aeec4['log'][_0x21df5a(0x90)](_0x21df5a(0x99)+_0x5bca1a[_0x21df5a(0xbb)](0x5)[_0x21df5a(0x6a)]());else{if(_0x5bca1a[_0x21df5a(0x8b)](_0x21df5a(0x9e)))try{const _0x481da5=JSON[_0x21df5a(0x6e)](_0x5bca1a[_0x21df5a(0xbb)](0x8)['trim']());handleResult(_0x3aeec4,_0x481da5);}catch(_0x3a9ed5){}}});}),pythonProcess['on'](_0x521e5e(0xae),_0x3c6b17=>{pythonProcess=null;}),_0x3aeec4['sendToPythonWrapper']=(_0x44d8f4,_0x50bc64)=>send(_0x3aeec4,_0x44d8f4,_0x50bc64);}catch(_0x37041c){_0x3aeec4['log'][_0x521e5e(0x77)](_0x521e5e(0x66)+_0x37041c[_0x521e5e(0x7d)]);}}function stopService(_0x1edc43){const _0xaff9c8=a4_0x345fe3;if(pythonProcess){try{pythonProcess[_0xaff9c8(0x70)]();}catch(_0x5e812b){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};function a4_0xeadd(){const _0x19f759=['toString','analysis.security.lastScore','type','toFixed','analysis.energy.pinnForecast','15GwcDbV','ENERGY_OPTIMIZE_RESULT','python_service','analysis.security.currentThreshold','‚úÖ\x20HEALTH\x20TRAINED.','close','stdin','analysis.automation.detectedPatterns','toISOString','reason','TRAINING_COMPLETE','analysis.energy.insulationScore','Unknown','applyEnergySavings','split','472034DmxUMq','./setup','apply','substring','analysis.security.lastCheck','constructor','HEALTH_TRAIN_RESULT','data','5763080fgRlDm','getState','SECURITY_RESULT','Error\x20launching\x20Python:\x20','(((.+)+)+)+$','success','join','trim','handlePrediction','child_process','analysis.isAlert','parse','python3','kill','7lrknzJ','insulation','write','analysis.alertReason','writable','PINN_PREDICT_RESULT','error','analysis.health.isAnomaly','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','analysis.training.status','setStateAsync','is_anomaly','message','analysis.health.gaitSpeed','stringify','stdout','toLocaleTimeString','analysis.energy.forecast','\x0aGrund:\x20','COMFORT_RESULT','length','16625686ahKBMV','log','details','ENERGY_TRAIN_RESULT','300mwaJxS','startsWith','Failed:\x20','analysis.prediction.confidence','934496mirPMn','search','debug','existsSync','6080586FMnNCj','forEach','276876jQJXXz','HEALTH_RESULT','1108460dTfbRT','payload','path','[PYTHON]\x20','Success:\x20','üêç\x20Python\x20Pong','[LOG]','PONG','[RESULT]','sendNotification','heating','6aJNIVS','service.py','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20'];a4_0xeadd=function(){return _0x19f759;};return a4_0xeadd();}