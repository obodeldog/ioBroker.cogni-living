function a4_0xf871(){const _0x17d75e=['data','18ZxySwV','analysis.energy.heatingScore','parse','payload','9236916pyfwMo','trim','analysis.security.lastCheck','SIGNAL_RESULT','TRAINING_COMPLETE','entries','stringify','Unknown','Error\x20launching\x20Python:\x20','Success:\x20','split','44DJBtSv','details','message','error','\x0aGrund:\x20','ENERGY_PREDICT_RESULT','analysis.security.currentThreshold','[RESULT]','analysis.energy.pinnForecast','analysis.prediction.nextRoom','insulation','handlePrediction','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','532341cxROiE','analysis.prediction.trackerTopRoom','threshold','1113682qkWJDS','kill','success','GAIT_RESULT','startsWith','constructor','8QNyMZy','analysis.isAlert','116AsbMFo','val','analysis.health.gaitSpeed','HEALTH_RESULT','is_anomaly','analysis.health.lastCheck','âœ…\x20HEALTH\x20TRAINED.','debug','heating','1478080mYwusk','substring','forEach','close','[PYTHON]\x20','analysis.prediction.confidence','type','toString','TRACKER_RESULT','toISOString','python_service','[LOG]','429185kKAiTS','child_process','analysis.training.status','(((.+)+)+)+$','toLocaleTimeString','reason','1vQFmao','analysis.automation.detectedPatterns','join','log','ENERGY_TRAIN_RESULT','length','applyEnergySavings','search','path','678104dYeajL','ðŸ\x20Python\x20Pong','sendToPythonWrapper','analysis.energy.forecast','analysis.prediction.trackerConfidence','toFixed','analysis.prediction.trackerState','SECURITY_RESULT','setStateAsync','âš ï¸\x20SECURITY\x20ALARM:\x20','./setup','12483JgNjNB','write'];a4_0xf871=function(){return _0x17d75e;};return a4_0xf871();}const a4_0x78230=a4_0x125b;(function(_0x34b791,_0xb5f1d8){const _0x31eff7=a4_0x125b,_0x1bda5c=_0x34b791();while(!![]){try{const _0x34e9df=parseInt(_0x31eff7(0x1b1))/0x1*(parseInt(_0x31eff7(0x18e))/0x2)+-parseInt(_0x31eff7(0x1c5))/0x3*(parseInt(_0x31eff7(0x196))/0x4)+-parseInt(_0x31eff7(0x1ab))/0x5*(parseInt(_0x31eff7(0x1c8))/0x6)+-parseInt(_0x31eff7(0x1ba))/0x7+-parseInt(_0x31eff7(0x194))/0x8*(-parseInt(_0x31eff7(0x18b))/0x9)+-parseInt(_0x31eff7(0x19f))/0xa*(parseInt(_0x31eff7(0x1d7))/0xb)+parseInt(_0x31eff7(0x1cc))/0xc;if(_0x34e9df===_0xb5f1d8)break;else _0x1bda5c['push'](_0x1bda5c['shift']());}catch(_0x15de97){_0x1bda5c['push'](_0x1bda5c['shift']());}}}(a4_0xf871,0x4dfd9));const a4_0x536572=(function(){let _0x539dcc=!![];return function(_0x2cc7a1,_0x2f5aa3){const _0x36d54a=_0x539dcc?function(){if(_0x2f5aa3){const _0x3273f4=_0x2f5aa3['apply'](_0x2cc7a1,arguments);return _0x2f5aa3=null,_0x3273f4;}}:function(){};return _0x539dcc=![],_0x36d54a;};}()),a4_0x72c446=a4_0x536572(this,function(){const _0x40a1fc=a4_0x125b;return a4_0x72c446[_0x40a1fc(0x1a6)]()[_0x40a1fc(0x1b8)](_0x40a1fc(0x1ae))[_0x40a1fc(0x1a6)]()[_0x40a1fc(0x193)](a4_0x72c446)[_0x40a1fc(0x1b8)](_0x40a1fc(0x1ae));});function a4_0x125b(_0x18fba0,_0x2d1be7){const _0x639f40=a4_0xf871();return a4_0x125b=function(_0x72c446,_0x536572){_0x72c446=_0x72c446-0x189;let _0xf8713e=_0x639f40[_0x72c446];return _0xf8713e;},a4_0x125b(_0x18fba0,_0x2d1be7);}a4_0x72c446();'use strict';const {spawn}=require(a4_0x78230(0x1ac)),path=require(a4_0x78230(0x1b9)),fs=require('fs'),setup=require(a4_0x78230(0x1c4)),automation=require('./automation');let pythonProcess=null;function send(_0x4d118d,_0x3f09f2,_0x94876={}){const _0x1b9a10=a4_0x78230;if(!pythonProcess||!pythonProcess['stdin']['writable'])return;const _0x41ba0f=JSON[_0x1b9a10(0x1d2)]({'command':_0x3f09f2,..._0x94876});try{pythonProcess['stdin'][_0x1b9a10(0x1c6)](_0x41ba0f+'\x0a');}catch(_0x4dd8fe){}}function handleResult(_0x1a8d17,_0x38c66b){const _0x401cac=a4_0x78230;if(_0x38c66b['type']==='PONG')_0x1a8d17[_0x401cac(0x1b4)][_0x401cac(0x19d)](_0x401cac(0x1bb));else{if(_0x38c66b[_0x401cac(0x1a5)]===_0x401cac(0x1c1)){const {anomaly_score:_0x146fbf,is_anomaly:_0x4c4892,threshold:_0x1e0f0f,explanation:_0x1f8f4a}=_0x38c66b[_0x401cac(0x1cb)];_0x1a8d17[_0x401cac(0x1c2)]('analysis.security.lastScore',{'val':_0x146fbf,'ack':!![]}),_0x1a8d17[_0x401cac(0x1c2)](_0x401cac(0x1ce),{'val':new Date()[_0x401cac(0x1a8)](),'ack':!![]});if(_0x1e0f0f)_0x1a8d17[_0x401cac(0x1c2)](_0x401cac(0x1dd),{'val':_0x1e0f0f,'ack':!![]});if(_0x4c4892){let _0x181a49=_0x401cac(0x18a)+_0x146fbf[_0x401cac(0x1bf)](0x4)+')';if(_0x1f8f4a&&_0x1f8f4a!==_0x401cac(0x1d3))_0x181a49+=_0x401cac(0x1db)+_0x1f8f4a;_0x1a8d17[_0x401cac(0x1c2)](_0x401cac(0x195),{'val':!![],'ack':!![]}),_0x1a8d17[_0x401cac(0x1c2)]('analysis.alertReason',{'val':_0x181a49,'ack':!![]}),setup['sendNotification'](_0x1a8d17,_0x401cac(0x1c3)+_0x181a49,![],!![]);}}else{if(_0x38c66b[_0x401cac(0x1a5)]===_0x401cac(0x1d0)){const _0x191b2c=_0x38c66b['payload'][_0x401cac(0x1d8)]||'',_0x3e4acf=_0x38c66b[_0x401cac(0x1cb)][_0x401cac(0x18d)],_0x1b6f5d=_0x38c66b[_0x401cac(0x1cb)][_0x401cac(0x190)]?_0x401cac(0x1d5)+new Date()[_0x401cac(0x1af)]()+'\x20('+_0x191b2c+')':'Failed:\x20'+_0x38c66b[_0x401cac(0x1cb)][_0x401cac(0x1b0)];_0x1a8d17[_0x401cac(0x1c2)](_0x401cac(0x1ad),{'val':_0x1b6f5d,'ack':!![]});if(_0x38c66b['payload'][_0x401cac(0x190)]&&_0x3e4acf)_0x1a8d17[_0x401cac(0x1c2)]('analysis.security.currentThreshold',{'val':_0x3e4acf,'ack':!![]});}else{if(_0x38c66b[_0x401cac(0x1a5)]===_0x401cac(0x1b5)){if(_0x38c66b[_0x401cac(0x1cb)][_0x401cac(0x190)])try{const _0x2a960f=JSON[_0x401cac(0x1ca)](_0x38c66b[_0x401cac(0x1cb)]['details']);if(_0x2a960f[_0x401cac(0x1e1)])_0x1a8d17[_0x401cac(0x1c2)]('analysis.energy.insulationScore',{'val':JSON[_0x401cac(0x1d2)](_0x2a960f[_0x401cac(0x1e1)]),'ack':!![]});if(_0x2a960f['heating'])_0x1a8d17[_0x401cac(0x1c2)](_0x401cac(0x1c9),{'val':JSON[_0x401cac(0x1d2)](_0x2a960f[_0x401cac(0x19e)]),'ack':!![]});}catch(_0x4ea4a3){}}else{if(_0x38c66b['type']==='HEALTH_TRAIN_RESULT'){if(_0x38c66b[_0x401cac(0x1cb)][_0x401cac(0x190)])_0x1a8d17[_0x401cac(0x1b4)]['info'](_0x401cac(0x19c));}else{if(_0x38c66b['type']===_0x401cac(0x199))_0x1a8d17['setStateAsync'](_0x401cac(0x19b),{'val':new Date()['toISOString'](),'ack':!![]}),_0x1a8d17[_0x401cac(0x1c2)]('analysis.health.isAnomaly',{'val':_0x38c66b[_0x401cac(0x1cb)][_0x401cac(0x19a)],'ack':!![]});else{if(_0x38c66b[_0x401cac(0x1a5)]===_0x401cac(0x191)){const {speed_trend:_0x5c1ca5}=_0x38c66b['payload'];if(_0x5c1ca5!==undefined)_0x1a8d17[_0x401cac(0x1c2)](_0x401cac(0x198),{'val':_0x5c1ca5,'ack':!![]});}else{if(_0x38c66b[_0x401cac(0x1a5)]===_0x401cac(0x1dc)){const {forecast:_0x5490f5}=_0x38c66b[_0x401cac(0x1cb)];if(_0x5490f5)_0x1a8d17[_0x401cac(0x1c2)](_0x401cac(0x1bd),{'val':JSON['stringify'](_0x5490f5),'ack':!![]});}else{if(_0x38c66b[_0x401cac(0x1a5)]==='PINN_PREDICT_RESULT'){const {forecast:_0x6edf97}=_0x38c66b['payload'];if(_0x6edf97)_0x1a8d17[_0x401cac(0x1c2)](_0x401cac(0x1df),{'val':JSON[_0x401cac(0x1d2)](_0x6edf97),'ack':!![]});}else{if(_0x38c66b[_0x401cac(0x1a5)]==='ENERGY_OPTIMIZE_RESULT'){const {proposals:_0x557ba6}=_0x38c66b[_0x401cac(0x1cb)];_0x1a8d17['getState']('analysis.energy.mpcActive',(_0x5c3e48,_0x5dc5fe)=>{const _0x1485eb=_0x401cac;_0x5dc5fe&&_0x5dc5fe[_0x1485eb(0x197)]===!![]&&_0x557ba6&&_0x557ba6['length']>0x0&&automation[_0x1485eb(0x1b7)](_0x1a8d17,_0x557ba6);});}else{if(_0x38c66b[_0x401cac(0x1a5)]===_0x401cac(0x1cf)){const {room:_0x3629d4,propagation:_0x4242b4}=_0x38c66b['payload'];let _0x478f1f='Unknown',_0x98f340=0x0;if(_0x4242b4){const _0x152a01=Object[_0x401cac(0x1d1)](_0x4242b4);_0x152a01[_0x401cac(0x1b6)]>0x0&&(_0x478f1f=_0x152a01[0x0][0x0],_0x98f340=_0x152a01[0x0][0x1]);}_0x1a8d17[_0x401cac(0x1c2)](_0x401cac(0x1e0),{'val':_0x478f1f,'ack':!![]}),_0x1a8d17[_0x401cac(0x1c2)](_0x401cac(0x1a4),{'val':_0x98f340,'ack':!![]}),automation[_0x401cac(0x189)](_0x1a8d17,_0x478f1f,_0x98f340);}else{if(_0x38c66b['type']===_0x401cac(0x1a7)){const {probabilities:_0x1cfc63}=_0x38c66b['payload'];if(_0x1cfc63){_0x1a8d17[_0x401cac(0x1c2)](_0x401cac(0x1c0),{'val':JSON[_0x401cac(0x1d2)](_0x1cfc63),'ack':!![]});const _0xec5f1c=Object['keys'](_0x1cfc63);if(_0xec5f1c[_0x401cac(0x1b6)]>0x0){const _0x5abd4d=_0xec5f1c[0x0],_0xf0a8bd=_0x1cfc63[_0x5abd4d];_0x1a8d17['setStateAsync'](_0x401cac(0x18c),{'val':_0x5abd4d,'ack':!![]}),_0x1a8d17[_0x401cac(0x1c2)](_0x401cac(0x1be),{'val':_0xf0a8bd,'ack':!![]});}}}else{if(_0x38c66b[_0x401cac(0x1a5)]==='COMFORT_RESULT'){const {patterns:_0x569f85}=_0x38c66b['payload'];if(_0x569f85&&_0x569f85['length']>0x0)_0x1a8d17[_0x401cac(0x1c2)](_0x401cac(0x1b2),{'val':JSON[_0x401cac(0x1d2)](_0x569f85),'ack':!![]});}}}}}}}}}}}}}}function startService(_0x35c2c3,_0x3de44d){const _0x5671bd=a4_0x78230;let _0x210c1c='python3';if(fs['existsSync'](_0x3de44d))_0x210c1c=_0x3de44d;try{const _0x286465=path[_0x5671bd(0x1b3)](__dirname,'..',_0x5671bd(0x1a9),'service.py');pythonProcess=spawn(_0x210c1c,[_0x286465]),pythonProcess['stdout']['on'](_0x5671bd(0x1c7),_0x96620d=>{const _0x226828=_0x5671bd,_0x599058=_0x96620d[_0x226828(0x1a6)]()[_0x226828(0x1d6)]('\x0a');_0x599058[_0x226828(0x1a1)](_0x2c27bb=>{const _0x5a1315=_0x226828,_0x5c66c6=_0x2c27bb[_0x5a1315(0x1cd)]();if(!_0x5c66c6)return;if(_0x5c66c6[_0x5a1315(0x192)](_0x5a1315(0x1aa)))_0x35c2c3['log']['debug'](_0x5a1315(0x1a3)+_0x5c66c6[_0x5a1315(0x1a0)](0x5)['trim']());else{if(_0x5c66c6[_0x5a1315(0x192)](_0x5a1315(0x1de)))try{const _0x644ca8=JSON[_0x5a1315(0x1ca)](_0x5c66c6['substring'](0x8)[_0x5a1315(0x1cd)]());handleResult(_0x35c2c3,_0x644ca8);}catch(_0x39310a){}}});}),pythonProcess['on'](_0x5671bd(0x1a2),_0x1d0870=>{pythonProcess=null;}),_0x35c2c3[_0x5671bd(0x1bc)]=(_0x37398b,_0x4b566b)=>send(_0x35c2c3,_0x37398b,_0x4b566b);}catch(_0x383c3e){_0x35c2c3[_0x5671bd(0x1b4)][_0x5671bd(0x1da)](_0x5671bd(0x1d4)+_0x383c3e[_0x5671bd(0x1d9)]);}}function stopService(_0x18ff1a){const _0x568f41=a4_0x78230;if(pythonProcess){try{pythonProcess[_0x568f41(0x18f)]();}catch(_0x125231){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};