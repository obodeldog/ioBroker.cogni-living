const a4_0x5a2c8a=a4_0x3d9d;(function(_0x54f1a0,_0x434292){const _0x1826c1=a4_0x3d9d,_0x23a750=_0x54f1a0();while(!![]){try{const _0x477ca9=-parseInt(_0x1826c1(0x198))/0x1*(-parseInt(_0x1826c1(0x20e))/0x2)+-parseInt(_0x1826c1(0x1a5))/0x3*(parseInt(_0x1826c1(0x1c4))/0x4)+-parseInt(_0x1826c1(0x1d1))/0x5*(parseInt(_0x1826c1(0x19f))/0x6)+parseInt(_0x1826c1(0x1ff))/0x7*(parseInt(_0x1826c1(0x1ec))/0x8)+parseInt(_0x1826c1(0x1ab))/0x9*(parseInt(_0x1826c1(0x1ba))/0xa)+-parseInt(_0x1826c1(0x1b0))/0xb*(-parseInt(_0x1826c1(0x19d))/0xc)+-parseInt(_0x1826c1(0x217))/0xd*(parseInt(_0x1826c1(0x1b5))/0xe);if(_0x477ca9===_0x434292)break;else _0x23a750['push'](_0x23a750['shift']());}catch(_0x43cfe5){_0x23a750['push'](_0x23a750['shift']());}}}(a4_0x508d,0xcd36b));const a4_0x2c32e8=(function(){let _0x3d2fea=!![];return function(_0x4dda1c,_0x514ecd){const _0x403c29=_0x3d2fea?function(){if(_0x514ecd){const _0xd3623=_0x514ecd['apply'](_0x4dda1c,arguments);return _0x514ecd=null,_0xd3623;}}:function(){};return _0x3d2fea=![],_0x403c29;};}()),a4_0x5b63e2=a4_0x2c32e8(this,function(){const _0xf4e776=a4_0x3d9d;return a4_0x5b63e2[_0xf4e776(0x1f1)]()['search'](_0xf4e776(0x211))[_0xf4e776(0x1f1)]()[_0xf4e776(0x207)](a4_0x5b63e2)[_0xf4e776(0x1eb)](_0xf4e776(0x211));});a4_0x5b63e2();'use strict';const {spawn}=require(a4_0x5a2c8a(0x1b9)),path=require(a4_0x5a2c8a(0x1bb)),fs=require('fs'),setup=require(a4_0x5a2c8a(0x1c8)),automation=require('./automation');let pythonProcess=null;function send(_0x272dba,_0x177527,_0x104a66={}){const _0x30febd=a4_0x5a2c8a;if(!pythonProcess||!pythonProcess[_0x30febd(0x21d)][_0x30febd(0x1db)])return;_0x104a66[_0x30febd(0x19a)]&&typeof _0x104a66[_0x30febd(0x19a)]===_0x30febd(0x1c5)&&(_0x104a66[_0x30febd(0x19a)]=setup[_0x30febd(0x1bc)](_0x104a66[_0x30febd(0x19a)]));if((_0x177527==='TRAIN_TOPOLOGY'||_0x177527===_0x30febd(0x1b1))&&_0x104a66[_0x30febd(0x1b2)]){if(Array[_0x30febd(0x1a1)](_0x104a66['sequences']))try{_0x104a66['sequences']=_0x104a66['sequences'][_0x30febd(0x209)](_0x28d3dc=>{const _0x32dc6b=_0x30febd;if(Array[_0x32dc6b(0x1a1)](_0x28d3dc))return _0x28d3dc['map'](_0x17c6e1=>setup[_0x32dc6b(0x1bc)](_0x17c6e1));return _0x28d3dc;});}catch(_0xab9a5c){_0x272dba['log'][_0x30febd(0x1af)](_0x30febd(0x213)+_0xab9a5c[_0x30febd(0x199)]+_0x30febd(0x1c3));}else _0x272dba['log'][_0x30febd(0x1af)](_0x30febd(0x1d0)+typeof _0x104a66[_0x30febd(0x1b2)]),_0x104a66[_0x30febd(0x1b2)]=[];}if(_0x104a66['current_temps']&&typeof _0x104a66[_0x30febd(0x1dc)]===_0x30febd(0x1f8)){const _0x44be16={};for(const [_0x173c9f,_0x2d9151]of Object[_0x30febd(0x201)](_0x104a66[_0x30febd(0x1dc)]))_0x44be16[setup[_0x30febd(0x1bc)](_0x173c9f)]=_0x2d9151;_0x104a66[_0x30febd(0x1dc)]=_0x44be16;}if(_0x104a66[_0x30febd(0x196)]&&typeof _0x104a66[_0x30febd(0x196)]===_0x30febd(0x1f8)){const _0x19e3ae={};for(const [_0x16f021,_0x4f4ab8]of Object[_0x30febd(0x201)](_0x104a66[_0x30febd(0x196)]))_0x19e3ae[setup[_0x30febd(0x1bc)](_0x16f021)]=_0x4f4ab8;_0x104a66['targets']=_0x19e3ae;}const _0x5b0418=JSON[_0x30febd(0x1d7)]({'command':_0x177527,..._0x104a66});try{pythonProcess[_0x30febd(0x21d)][_0x30febd(0x21b)](_0x5b0418+'\x0a');}catch(_0x5681a0){}}function a4_0x508d(){const _0x3fe597=['data','analysis.energy.heatingScore','Python\x20process\x20exited\x20with\x20code\x20','2-digit','ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20','constructor','python_service','map','join','Unknown','sendNotification','ðŸ“ˆ\x20Health\x20Trend:\x20','2SKqHUo','ENERGY_TRAIN_RESULT','details','(((.+)+)+)+$','analysis.health.gaitSpeed','âš ï¸\x20Gateway\x20Normalization\x20Failed:\x20','Graph\x20Updated\x20(','insulation','startsWith','24095526SxWiEe','type','analysis.prediction.confidence','toFixed','write','analysis.energy.mpcActive','stdin','service.py','log','VENTILATION_ALERT','payload','targets','analysis.health.gaitSensors','913124VZtrzy','message','room','analysis.health.lastCheck','analysis.health.gaitDebug','13457028kjxEFH','analysis.energy.rlPenalties','433458Cbehmv','analysis.training.status','isArray','getState','close','GRAPH_TRAINED','3xiJOjc','analysis.alertReason','toISOString','setStateAsync','analysis.energy.warmupDetails','toLocaleTimeString','36045NUrDhi','analysis.health.isAnomaly','HEALTH_TREND_RESULT','analysis.energy.warmupTimes','warn','11FRapdv','TRAIN_SECURITY','sequences','parse','short','14pNveDN','toLocaleDateString','TRAINING_COMPLETE','analysis.security.lastScore','child_process','3410XvEmFs','path','normalizeRoomId','analysis.prediction.trackerState','[PYTHON]\x20','[PYTHON\x20ERR]\x20','analysis.prediction.nextRoom','ENERGY_PREDICT_RESULT','split','.\x20Sending\x20raw\x20data.','3859708AXDZeL','string','python3','\x0aGrund:\x20','./setup','analysis.energy.warmupSources','threshold','âš ï¸\x20SECURITY\x20ALARM:\x20','exports','length','[LOG]','val','âš ï¸\x20Training\x20data\x20is\x20NOT\x20an\x20array!\x20Type:\x20','35fbNudt','RL_PENALTY_UPDATE','de-DE','analysis.security.currentThreshold','applyEnergySavings','handlePrediction','stringify','error','kill','COMFORT_RESULT','writable','current_temps','sendToPythonWrapper','stdout','analysis.prediction.trackerTopRoom','success','heating','ðŸ\x20Python\x20Pong','TRACKER_RESULT','analysis.energy.insulationScore','stderr','PINN_PREDICT_RESULT','substring','[RESULT]','.\x20Please\x20create\x20this\x20file!','analysis.health.activityTrend','search','20872atIWyV','SECURITY_RESULT','Success:\x20','rooms','Error\x20launching\x20Python:\x20','toString','WARMUP_RESULT','analysis.energy.pinnForecast','analysis.security.lastCheck','trim','debug','info','object','HEALTH_TRAIN_RESULT','analysis.energy.ventilationAlerts','analysis.energy.forecast','is_anomaly','ENERGY_OPTIMIZE_RESULT','existsSync','2051UoCPrC','âœ…\x20HEALTH\x20TRAINED.','entries'];a4_0x508d=function(){return _0x3fe597;};return a4_0x508d();}function a4_0x3d9d(_0x59a9ca,_0x1b56a4){const _0x5291c8=a4_0x508d();return a4_0x3d9d=function(_0x5b63e2,_0x2c32e8){_0x5b63e2=_0x5b63e2-0x196;let _0x508d87=_0x5291c8[_0x5b63e2];return _0x508d87;},a4_0x3d9d(_0x59a9ca,_0x1b56a4);}function handleResult(_0x2cc119,_0x4ea884){const _0x561274=a4_0x5a2c8a;if(_0x4ea884[_0x561274(0x218)]==='PONG')_0x2cc119[_0x561274(0x21f)][_0x561274(0x1f6)](_0x561274(0x1e2));else{if(_0x4ea884[_0x561274(0x218)]===_0x561274(0x1ed)){const {anomaly_score:_0x260f00,is_anomaly:_0xffa93a,threshold:_0x2260f7,explanation:_0x21f4ef}=_0x4ea884[_0x561274(0x221)];_0x2cc119[_0x561274(0x1a8)](_0x561274(0x1b8),{'val':_0x260f00,'ack':!![]}),_0x2cc119[_0x561274(0x1a8)](_0x561274(0x1f4),{'val':new Date()[_0x561274(0x1a7)](),'ack':!![]});if(_0x2260f7)_0x2cc119[_0x561274(0x1a8)]('analysis.security.currentThreshold',{'val':_0x2260f7,'ack':!![]});if(_0xffa93a){let _0x21b7cb='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x260f00[_0x561274(0x21a)](0x4)+')';if(_0x21f4ef&&_0x21f4ef!==_0x561274(0x20b))_0x21b7cb+=_0x561274(0x1c7)+_0x21f4ef;_0x2cc119[_0x561274(0x1a8)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x2cc119[_0x561274(0x1a8)](_0x561274(0x1a6),{'val':_0x21b7cb,'ack':!![]}),setup[_0x561274(0x20c)](_0x2cc119,_0x561274(0x1cb)+_0x21b7cb,![],!![]);}}else{if(_0x4ea884[_0x561274(0x218)]===_0x561274(0x1b7)){const _0xd6b700=_0x4ea884[_0x561274(0x221)][_0x561274(0x210)]||'',_0x58d538=_0x4ea884[_0x561274(0x221)][_0x561274(0x1ca)],_0x2d4e53=_0x4ea884['payload'][_0x561274(0x1e0)]?_0x561274(0x1ee)+new Date()[_0x561274(0x1aa)]()+'\x20('+_0xd6b700+')':'Failed:\x20'+_0x4ea884[_0x561274(0x221)]['reason'];_0x2cc119[_0x561274(0x1a8)](_0x561274(0x1a0),{'val':_0x2d4e53,'ack':!![]});if(_0x4ea884[_0x561274(0x221)][_0x561274(0x1e0)]&&_0x58d538)_0x2cc119[_0x561274(0x1a8)](_0x561274(0x1d4),{'val':_0x58d538,'ack':!![]});}else{if(_0x4ea884[_0x561274(0x218)]===_0x561274(0x1a4)){const _0xc8e56b=_0x561274(0x214)+_0x4ea884[_0x561274(0x221)][_0x561274(0x1ef)][_0x561274(0x1cd)]+'\x20Rooms)';_0x2cc119[_0x561274(0x1a8)](_0x561274(0x1a0),{'val':_0xc8e56b,'ack':!![]});}else{if(_0x4ea884[_0x561274(0x218)]===_0x561274(0x20f)){if(_0x4ea884[_0x561274(0x221)][_0x561274(0x1e0)])try{const _0x48edbe=JSON[_0x561274(0x1b3)](_0x4ea884[_0x561274(0x221)]['details']);if(_0x48edbe[_0x561274(0x215)])_0x2cc119[_0x561274(0x1a8)](_0x561274(0x1e4),{'val':JSON[_0x561274(0x1d7)](_0x48edbe[_0x561274(0x215)]),'ack':!![]});if(_0x48edbe['heating'])_0x2cc119[_0x561274(0x1a8)](_0x561274(0x203),{'val':JSON[_0x561274(0x1d7)](_0x48edbe[_0x561274(0x1e1)]),'ack':!![]});}catch(_0x4cd99a){}}else{if(_0x4ea884[_0x561274(0x218)]===_0x561274(0x1f9)){if(_0x4ea884[_0x561274(0x221)][_0x561274(0x1e0)]){_0x2cc119[_0x561274(0x21f)][_0x561274(0x1f7)](_0x561274(0x200));const _0x40a77f=new Date(),_0x5287b2=_0x40a77f[_0x561274(0x1b6)](_0x561274(0x1d3),{'day':_0x561274(0x205),'month':_0x561274(0x1b4),'hour':_0x561274(0x205),'minute':_0x561274(0x205)});_0x2cc119['setStateAsync']('analysis.health.lastCheck',{'val':_0x5287b2,'ack':!![]});}}else{if(_0x4ea884[_0x561274(0x218)]==='HEALTH_RESULT'){const _0x22d269=new Date(),_0x529ae7=_0x22d269['toLocaleDateString']('de-DE',{'day':_0x561274(0x205),'month':'short','hour':_0x561274(0x205),'minute':'2-digit'});_0x2cc119[_0x561274(0x1a8)]('analysis.health.lastCheck',{'val':_0x529ae7,'ack':!![]}),_0x2cc119[_0x561274(0x1a8)](_0x561274(0x1ac),{'val':_0x4ea884[_0x561274(0x221)][_0x561274(0x1fc)],'ack':!![]});}else{if(_0x4ea884['type']===_0x561274(0x1ad)){const {trend_percent:_0xecab82,details:_0x1ad088}=_0x4ea884[_0x561274(0x221)],_0x368f5f=new Date(),_0x1b8f3d=_0x368f5f['toLocaleDateString'](_0x561274(0x1d3),{'day':_0x561274(0x205),'month':_0x561274(0x1b4),'hour':_0x561274(0x205),'minute':_0x561274(0x205)});_0x2cc119[_0x561274(0x1a8)](_0x561274(0x19b),{'val':_0x1b8f3d,'ack':!![]}),_0x2cc119['setStateAsync'](_0x561274(0x1ea),{'val':_0xecab82,'ack':!![]}),_0x2cc119[_0x561274(0x21f)]['info'](_0x561274(0x20d)+_0x1ad088);}else{if(_0x4ea884['type']==='GAIT_RESULT'){const {speed_trend:_0x5288e4,sensors:_0x4722b4,proof:_0x56ee19}=_0x4ea884[_0x561274(0x221)];if(_0x5288e4!==undefined)_0x2cc119[_0x561274(0x1a8)](_0x561274(0x212),{'val':_0x5288e4,'ack':!![]});if(_0x4722b4&&Array[_0x561274(0x1a1)](_0x4722b4))_0x2cc119[_0x561274(0x1a8)](_0x561274(0x197),{'val':_0x4722b4[_0x561274(0x20a)](',\x20'),'ack':!![]});if(_0x56ee19)_0x2cc119['setStateAsync'](_0x561274(0x19c),{'val':_0x56ee19,'ack':!![]});}else{if(_0x4ea884[_0x561274(0x218)]===_0x561274(0x1c1)){const {forecast:_0x27a84c}=_0x4ea884[_0x561274(0x221)];if(_0x27a84c)_0x2cc119[_0x561274(0x1a8)](_0x561274(0x1fb),{'val':JSON[_0x561274(0x1d7)](_0x27a84c),'ack':!![]});}else{if(_0x4ea884[_0x561274(0x218)]===_0x561274(0x1f2)){const {times:_0x4fc9ec,sources:_0x50aa36,details:_0x362571}=_0x4ea884[_0x561274(0x221)];if(_0x4fc9ec)_0x2cc119[_0x561274(0x1a8)](_0x561274(0x1ae),{'val':JSON[_0x561274(0x1d7)](_0x4fc9ec),'ack':!![]});if(_0x50aa36)_0x2cc119[_0x561274(0x1a8)](_0x561274(0x1c9),{'val':JSON['stringify'](_0x50aa36),'ack':!![]});if(_0x362571)_0x2cc119[_0x561274(0x1a8)](_0x561274(0x1a9),{'val':JSON[_0x561274(0x1d7)](_0x362571),'ack':!![]});}else{if(_0x4ea884[_0x561274(0x218)]===_0x561274(0x1d2)){const {penalties:_0xd3a189}=_0x4ea884[_0x561274(0x221)];if(_0xd3a189)_0x2cc119[_0x561274(0x1a8)](_0x561274(0x19e),{'val':JSON[_0x561274(0x1d7)](_0xd3a189),'ack':!![]});}else{if(_0x4ea884[_0x561274(0x218)]===_0x561274(0x1e6)){const {forecast:_0x41fb5a}=_0x4ea884[_0x561274(0x221)];if(_0x41fb5a)_0x2cc119[_0x561274(0x1a8)](_0x561274(0x1f3),{'val':JSON[_0x561274(0x1d7)](_0x41fb5a),'ack':!![]});}else{if(_0x4ea884['type']===_0x561274(0x220)){const {alerts:_0x16b026}=_0x4ea884[_0x561274(0x221)];if(_0x16b026)_0x2cc119[_0x561274(0x1a8)](_0x561274(0x1fa),{'val':JSON['stringify'](_0x16b026),'ack':!![]});}else{if(_0x4ea884[_0x561274(0x218)]===_0x561274(0x1fd)){const {proposals:_0x1b956e}=_0x4ea884[_0x561274(0x221)];_0x2cc119[_0x561274(0x1a2)](_0x561274(0x21c),(_0x2a6f64,_0x56dabd)=>{const _0x3ba509=_0x561274;_0x56dabd&&_0x56dabd[_0x3ba509(0x1cf)]===!![]&&_0x1b956e&&_0x1b956e[_0x3ba509(0x1cd)]>0x0&&automation[_0x3ba509(0x1d5)](_0x2cc119,_0x1b956e);});}else{if(_0x4ea884[_0x561274(0x218)]==='SIGNAL_RESULT'){const {room:_0x226210,propagation:_0x2e370c}=_0x4ea884[_0x561274(0x221)];let _0x5dff5a=_0x561274(0x20b),_0xc0482a=0x0;if(_0x2e370c){const _0x2e4125=Object[_0x561274(0x201)](_0x2e370c);_0x2e4125[_0x561274(0x1cd)]>0x0&&(_0x5dff5a=_0x2e4125[0x0][0x0],_0xc0482a=_0x2e4125[0x0][0x1]);}_0x2cc119[_0x561274(0x1a8)](_0x561274(0x1c0),{'val':_0x5dff5a,'ack':!![]}),_0x2cc119[_0x561274(0x1a8)](_0x561274(0x219),{'val':_0xc0482a,'ack':!![]}),automation[_0x561274(0x1d6)](_0x2cc119,_0x5dff5a,_0xc0482a);}else{if(_0x4ea884[_0x561274(0x218)]===_0x561274(0x1e3)){const {probabilities:_0x22ca75}=_0x4ea884[_0x561274(0x221)];if(_0x22ca75){_0x2cc119[_0x561274(0x1a8)](_0x561274(0x1bd),{'val':JSON[_0x561274(0x1d7)](_0x22ca75),'ack':!![]});const _0x4d01cd=Object['keys'](_0x22ca75);if(_0x4d01cd[_0x561274(0x1cd)]>0x0){const _0x21584c=_0x4d01cd[0x0],_0x175cfb=_0x22ca75[_0x21584c];_0x2cc119[_0x561274(0x1a8)](_0x561274(0x1df),{'val':_0x21584c,'ack':!![]}),_0x2cc119[_0x561274(0x1a8)]('analysis.prediction.trackerConfidence',{'val':_0x175cfb,'ack':!![]});}}}else{if(_0x4ea884['type']===_0x561274(0x1da)){const {patterns:_0x1a9083}=_0x4ea884[_0x561274(0x221)];if(_0x1a9083&&_0x1a9083[_0x561274(0x1cd)]>0x0)_0x2cc119[_0x561274(0x1a8)]('analysis.automation.detectedPatterns',{'val':JSON[_0x561274(0x1d7)](_0x1a9083),'ack':!![]});}}}}}}}}}}}}}}}}}}}function startService(_0x22b959,_0x309a4d){const _0x39db2e=a4_0x5a2c8a;let _0x42ac74=_0x39db2e(0x1c6);if(fs[_0x39db2e(0x1fe)](_0x309a4d))_0x42ac74=_0x309a4d;const _0x47ac1d=path['join'](__dirname,'..',_0x39db2e(0x21e)),_0x2725b1=path[_0x39db2e(0x20a)](__dirname,'..',_0x39db2e(0x208),'service.py');let _0x262fba='';if(fs[_0x39db2e(0x1fe)](_0x47ac1d))_0x262fba=_0x47ac1d;else{if(fs[_0x39db2e(0x1fe)](_0x2725b1))_0x262fba=_0x2725b1;else{_0x22b959[_0x39db2e(0x21f)][_0x39db2e(0x1d8)]('âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20'+_0x47ac1d+'\x20AND\x20'+_0x2725b1+_0x39db2e(0x1e9));return;}}try{_0x22b959[_0x39db2e(0x21f)][_0x39db2e(0x1f7)](_0x39db2e(0x206)+_0x42ac74+'\x20'+_0x262fba),pythonProcess=spawn(_0x42ac74,[_0x262fba]),pythonProcess[_0x39db2e(0x1de)]['on'](_0x39db2e(0x202),_0x13ccc7=>{const _0x22f5ed=_0x39db2e,_0x1e6eb0=_0x13ccc7[_0x22f5ed(0x1f1)]()[_0x22f5ed(0x1c2)]('\x0a');_0x1e6eb0['forEach'](_0x169551=>{const _0x312e7f=_0x22f5ed,_0x4b3238=_0x169551[_0x312e7f(0x1f5)]();if(!_0x4b3238)return;if(_0x4b3238[_0x312e7f(0x216)](_0x312e7f(0x1ce)))_0x22b959[_0x312e7f(0x21f)][_0x312e7f(0x1f6)](_0x312e7f(0x1be)+_0x4b3238[_0x312e7f(0x1e7)](0x5)[_0x312e7f(0x1f5)]());else{if(_0x4b3238[_0x312e7f(0x216)](_0x312e7f(0x1e8)))try{const _0x4d0812=JSON['parse'](_0x4b3238[_0x312e7f(0x1e7)](0x8)[_0x312e7f(0x1f5)]());handleResult(_0x22b959,_0x4d0812);}catch(_0x4febd7){}}});}),pythonProcess[_0x39db2e(0x1e5)]['on'](_0x39db2e(0x202),_0x38a4e6=>{const _0x3d30f3=_0x39db2e;_0x22b959[_0x3d30f3(0x21f)]['error'](_0x3d30f3(0x1bf)+_0x38a4e6[_0x3d30f3(0x1f1)]()[_0x3d30f3(0x1f5)]());}),pythonProcess['on'](_0x39db2e(0x1a3),_0x467b66=>{const _0x408555=_0x39db2e;_0x22b959[_0x408555(0x21f)][_0x408555(0x1af)](_0x408555(0x204)+_0x467b66),pythonProcess=null;}),_0x22b959[_0x39db2e(0x1dd)]=(_0xff93b6,_0x1e35c9)=>send(_0x22b959,_0xff93b6,_0x1e35c9);}catch(_0x2fc3a0){_0x22b959[_0x39db2e(0x21f)][_0x39db2e(0x1d8)](_0x39db2e(0x1f0)+_0x2fc3a0[_0x39db2e(0x199)]);}}function stopService(_0x1122c7){const _0x361430=a4_0x5a2c8a;if(pythonProcess){try{pythonProcess[_0x361430(0x1d9)]();}catch(_0x2fbe84){}pythonProcess=null;}}module[a4_0x5a2c8a(0x1cc)]={'startService':startService,'stopService':stopService,'send':send};