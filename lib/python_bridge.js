const a4_0x48e02f=a4_0x5b67;(function(_0x4083a7,_0x196a69){const _0xb9f06a=a4_0x5b67,_0x19a3e9=_0x4083a7();while(!![]){try{const _0x1fcb11=-parseInt(_0xb9f06a(0xfd))/0x1*(parseInt(_0xb9f06a(0xe0))/0x2)+parseInt(_0xb9f06a(0xe8))/0x3+-parseInt(_0xb9f06a(0xdd))/0x4*(-parseInt(_0xb9f06a(0x11d))/0x5)+-parseInt(_0xb9f06a(0xc9))/0x6*(parseInt(_0xb9f06a(0xe3))/0x7)+parseInt(_0xb9f06a(0x100))/0x8*(parseInt(_0xb9f06a(0xf9))/0x9)+-parseInt(_0xb9f06a(0x111))/0xa*(-parseInt(_0xb9f06a(0x122))/0xb)+-parseInt(_0xb9f06a(0xf0))/0xc;if(_0x1fcb11===_0x196a69)break;else _0x19a3e9['push'](_0x19a3e9['shift']());}catch(_0x12847e){_0x19a3e9['push'](_0x19a3e9['shift']());}}}(a4_0x323c,0xc549e));const a4_0x1b2893=(function(){let _0x5ca2af=!![];return function(_0x15e052,_0x36c223){const _0x10b361=_0x5ca2af?function(){const _0x4289c0=a4_0x5b67;if(_0x36c223){const _0x21a58e=_0x36c223[_0x4289c0(0xe4)](_0x15e052,arguments);return _0x36c223=null,_0x21a58e;}}:function(){};return _0x5ca2af=![],_0x10b361;};}()),a4_0x3e8fae=a4_0x1b2893(this,function(){const _0x1a829d=a4_0x5b67;return a4_0x3e8fae[_0x1a829d(0xef)]()['search'](_0x1a829d(0xf8))[_0x1a829d(0xef)]()[_0x1a829d(0xc6)](a4_0x3e8fae)[_0x1a829d(0xff)](_0x1a829d(0xf8));});a4_0x3e8fae();function a4_0x5b67(_0x5f5c56,_0x5b527e){const _0x5568a2=a4_0x323c();return a4_0x5b67=function(_0x3e8fae,_0x1b2893){_0x3e8fae=_0x3e8fae-0xc6;let _0x323ca6=_0x5568a2[_0x3e8fae];return _0x323ca6;},a4_0x5b67(_0x5f5c56,_0x5b527e);}'use strict';const {spawn}=require('child_process'),path=require('path'),fs=require('fs'),setup=require(a4_0x48e02f(0xcc)),automation=require(a4_0x48e02f(0xf6));let pythonProcess=null;function send(_0x2a2277,_0x5884be,_0x2ac3a5={}){const _0x5c852c=a4_0x48e02f;if(!pythonProcess||!pythonProcess['stdin']['writable'])return;const _0x296bab=JSON[_0x5c852c(0x115)]({'command':_0x5884be,..._0x2ac3a5});try{pythonProcess[_0x5c852c(0xd9)][_0x5c852c(0xe6)](_0x296bab+'\x0a');}catch(_0x291485){}}function handleResult(_0x4fcc3e,_0x5d0d94){const _0x536c84=a4_0x48e02f;if(_0x5d0d94[_0x536c84(0xcf)]===_0x536c84(0x120))_0x4fcc3e[_0x536c84(0xf4)]['debug'](_0x536c84(0xf7));else{if(_0x5d0d94[_0x536c84(0xcf)]===_0x536c84(0x102)){const {anomaly_score:_0x2b9bc3,is_anomaly:_0x5aeba1,threshold:_0x51a5d6,explanation:_0x116ebf}=_0x5d0d94[_0x536c84(0xd8)];_0x4fcc3e[_0x536c84(0xf4)][_0x536c84(0xfb)]('üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20'+_0x2b9bc3[_0x536c84(0x109)](0x5)+'\x20->\x20'+(_0x5aeba1?_0x536c84(0xca):'OK')),_0x4fcc3e[_0x536c84(0x114)](_0x536c84(0xdb),{'val':_0x2b9bc3,'ack':!![]}),_0x4fcc3e[_0x536c84(0x114)](_0x536c84(0x11f),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x51a5d6)_0x4fcc3e[_0x536c84(0x114)](_0x536c84(0xd6),{'val':_0x51a5d6,'ack':!![]});if(_0x5aeba1){let _0x2de55d=_0x536c84(0xd2)+_0x2b9bc3['toFixed'](0x4)+')';if(_0x116ebf&&_0x116ebf!==_0x536c84(0x123))_0x2de55d+='\x0aGrund:\x20'+_0x116ebf;_0x4fcc3e[_0x536c84(0x114)](_0x536c84(0x11c),{'val':!![],'ack':!![]}),_0x4fcc3e[_0x536c84(0x114)](_0x536c84(0x124),{'val':_0x2de55d,'ack':!![]}),setup['sendNotification'](_0x4fcc3e,'‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20'+_0x2de55d,![],!![]);}}else{if(_0x5d0d94[_0x536c84(0xcf)]===_0x536c84(0xc8)){const _0x47338a=_0x5d0d94[_0x536c84(0xd8)][_0x536c84(0x10e)]||'',_0x5cdedb=_0x5d0d94['payload'][_0x536c84(0x105)],_0x16cea1=_0x5d0d94[_0x536c84(0xd8)][_0x536c84(0xf2)]?_0x536c84(0x101)+new Date()['toLocaleTimeString']()+'\x20('+_0x47338a+')':_0x536c84(0xd1)+_0x5d0d94[_0x536c84(0xd8)]['reason'];_0x4fcc3e[_0x536c84(0x114)](_0x536c84(0x112),{'val':_0x16cea1,'ack':!![]});if(_0x5d0d94[_0x536c84(0xd8)]['success']&&_0x5cdedb)_0x4fcc3e[_0x536c84(0x114)](_0x536c84(0xd6),{'val':_0x5cdedb,'ack':!![]});}else{if(_0x5d0d94[_0x536c84(0xcf)]==='COMFORT_RESULT'){const {patterns:_0x1254ae}=_0x5d0d94[_0x536c84(0xd8)];if(_0x1254ae&&_0x1254ae[_0x536c84(0xd3)]>0x0){_0x4fcc3e[_0x536c84(0xf4)]['info'](_0x536c84(0xe9)+_0x1254ae['length']+_0x536c84(0x108)),_0x4fcc3e[_0x536c84(0x114)](_0x536c84(0x10b),{'val':JSON[_0x536c84(0x115)](_0x1254ae),'ack':!![]});const _0x100b19=_0x1254ae[0x0],_0x3c67c0='Regel\x20erkannt:\x20'+_0x100b19[_0x536c84(0xfe)]+'\x20('+(_0x100b19['confidence']*0x64)[_0x536c84(0x109)](0x0)+'%)';_0x4fcc3e[_0x536c84(0x114)](_0x536c84(0x119),{'val':!![],'ack':!![]}),_0x4fcc3e[_0x536c84(0x114)]('analysis.automation.description',{'val':_0x3c67c0,'ack':!![]});}else _0x4fcc3e[_0x536c84(0xf4)]['info'](_0x536c84(0x11e)),_0x4fcc3e[_0x536c84(0x114)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),_0x4fcc3e['setStateAsync'](_0x536c84(0x10b),{'val':'[]','ack':!![]});}else{if(_0x5d0d94[_0x536c84(0xcf)]===_0x536c84(0xdc)){if(_0x5d0d94[_0x536c84(0xd8)]['success'])try{const _0x2149b8=JSON[_0x536c84(0xd5)](_0x5d0d94[_0x536c84(0xd8)][_0x536c84(0x10e)]);if(_0x2149b8[_0x536c84(0xd0)])_0x4fcc3e[_0x536c84(0x114)](_0x536c84(0xc7),{'val':JSON[_0x536c84(0x115)](_0x2149b8[_0x536c84(0xd0)]),'ack':!![]});if(_0x2149b8[_0x536c84(0x10d)])_0x4fcc3e[_0x536c84(0x114)](_0x536c84(0xec),{'val':JSON[_0x536c84(0x115)](_0x2149b8['heating']),'ack':!![]});}catch(_0x50e566){}}else{if(_0x5d0d94[_0x536c84(0xcf)]==='HEALTH_TRAIN_RESULT'){if(_0x5d0d94[_0x536c84(0xd8)]['success'])_0x4fcc3e[_0x536c84(0xf4)][_0x536c84(0xfb)]('‚úÖ\x20HEALTH\x20TRAINED.');}else{if(_0x5d0d94[_0x536c84(0xcf)]===_0x536c84(0xd4))_0x4fcc3e[_0x536c84(0x114)](_0x536c84(0x107),{'val':new Date()[_0x536c84(0x117)](),'ack':!![]}),_0x4fcc3e[_0x536c84(0x114)](_0x536c84(0xed),{'val':_0x5d0d94['payload'][_0x536c84(0xe5)],'ack':!![]});else{if(_0x5d0d94['type']===_0x536c84(0x118))_0x4fcc3e[_0x536c84(0x114)](_0x536c84(0x11b),{'val':_0x5d0d94['payload'][_0x536c84(0xdf)],'ack':!![]}),_0x4fcc3e[_0x536c84(0x114)](_0x536c84(0x113),{'val':_0x5d0d94[_0x536c84(0xd8)][_0x536c84(0xda)],'ack':!![]});else{if(_0x5d0d94[_0x536c84(0xcf)]===_0x536c84(0xee)){const {speed_trend:_0x2eafe0}=_0x5d0d94[_0x536c84(0xd8)];if(_0x2eafe0!==undefined)_0x4fcc3e[_0x536c84(0x114)](_0x536c84(0xfc),{'val':_0x2eafe0,'ack':!![]});}else{if(_0x5d0d94[_0x536c84(0xcf)]===_0x536c84(0xf5)){const {forecast:_0xdec3a}=_0x5d0d94[_0x536c84(0xd8)];if(_0xdec3a)_0x4fcc3e[_0x536c84(0x114)](_0x536c84(0x10a),{'val':JSON[_0x536c84(0x115)](_0xdec3a),'ack':!![]});}else{if(_0x5d0d94[_0x536c84(0xcf)]===_0x536c84(0xeb)){const {data:_0x371935}=_0x5d0d94[_0x536c84(0xd8)];_0x371935&&(_0x4fcc3e['log'][_0x536c84(0xfb)](_0x536c84(0x116)),_0x4fcc3e[_0x536c84(0x114)](_0x536c84(0xf3),{'val':JSON[_0x536c84(0x115)](_0x371935),'ack':!![]}));}else{if(_0x5d0d94[_0x536c84(0xcf)]===_0x536c84(0xf1))_0x4fcc3e[_0x536c84(0xf4)][_0x536c84(0x110)](_0x536c84(0xfa));else{if(_0x5d0d94[_0x536c84(0xcf)]==='SIGNAL_RESULT'){const {room:_0x50cfaf,propagation:_0x11ce94}=_0x5d0d94[_0x536c84(0xd8)];let _0x51c119=_0x536c84(0x123),_0x33771a=0x0;if(_0x11ce94){const _0x331916=Object['entries'](_0x11ce94);_0x331916[_0x536c84(0xd3)]>0x0&&(_0x51c119=_0x331916[0x0][0x0],_0x33771a=_0x331916[0x0][0x1]);}_0x4fcc3e['setStateAsync'](_0x536c84(0xe2),{'val':_0x51c119,'ack':!![]}),_0x4fcc3e[_0x536c84(0x114)]('analysis.prediction.confidence',{'val':_0x33771a,'ack':!![]}),_0x33771a>0.4&&_0x4fcc3e[_0x536c84(0xf4)][_0x536c84(0x110)](_0x536c84(0xea)+_0x50cfaf+'\x20->\x20Likely\x20'+_0x51c119+'\x20('+(_0x33771a*0x64)[_0x536c84(0x109)](0x0)+'%)'),automation[_0x536c84(0x10c)](_0x4fcc3e,_0x51c119,_0x33771a);}}}}}}}}}}}}}}function startService(_0x28d78a,_0x426dde){const _0x2ef874=a4_0x48e02f;let _0x421ca6=_0x2ef874(0x104);if(fs['existsSync'](_0x426dde))_0x421ca6=_0x426dde;try{const _0x456bca=path['join'](__dirname,'..','python_service',_0x2ef874(0xd7));pythonProcess=spawn(_0x421ca6,[_0x456bca]),pythonProcess['stdout']['on'](_0x2ef874(0x11a),_0x333cff=>{const _0x42dbea=_0x2ef874,_0x39a82b=_0x333cff[_0x42dbea(0xef)]()[_0x42dbea(0x106)]('\x0a');_0x39a82b['forEach'](_0x2cf66d=>{const _0x1ef9cc=_0x42dbea,_0x5ecbbd=_0x2cf66d[_0x1ef9cc(0xcb)]();if(!_0x5ecbbd)return;if(_0x5ecbbd[_0x1ef9cc(0xe1)]('[LOG]'))_0x28d78a[_0x1ef9cc(0xf4)][_0x1ef9cc(0x110)](_0x1ef9cc(0xde)+_0x5ecbbd['substring'](0x5)[_0x1ef9cc(0xcb)]());else{if(_0x5ecbbd['startsWith'](_0x1ef9cc(0x121)))try{const _0x3058d3=JSON[_0x1ef9cc(0xd5)](_0x5ecbbd['substring'](0x8)['trim']());handleResult(_0x28d78a,_0x3058d3);}catch(_0x3d0d0c){}}});}),pythonProcess['on']('close',_0x4fa6be=>{pythonProcess=null;}),_0x28d78a[_0x2ef874(0x10f)]=(_0x44948f,_0x476ac7)=>send(_0x28d78a,_0x44948f,_0x476ac7);}catch(_0x3a1505){_0x28d78a[_0x2ef874(0xf4)][_0x2ef874(0xcd)](_0x2ef874(0xce)+_0x3a1505[_0x2ef874(0xe7)]);}}function a4_0x323c(){const _0x31b1ff=['analysis.security.lastScore','ENERGY_TRAIN_RESULT','48yQwoLH','[PYTHON]\x20','diagnosis','2reJsqq','startsWith','analysis.prediction.nextRoom','5454113lZUxxo','apply','is_anomaly','write','message','3077502YhyMPK','üõãÔ∏è\x20BUTLER:\x20Found\x20','üîÆ\x20Prediction:\x20From\x20','TOPOLOGY_RESULT','analysis.energy.heatingScore','analysis.health.isAnomaly','GAIT_RESULT','toString','5702832InQXnk','TOPOLOGY_ACK','success','analysis.security.topologyMatrix','log','ENERGY_PREDICT_RESULT','./automation','üêç\x20Python\x20Pong','(((.+)+)+)+$','638901dMjgcf','üêç\x20Python\x20confirmed\x20new\x20topology.','info','analysis.health.gaitSpeed','1137231qzySJG','rule','search','72cXAGKm','Success:\x20','SECURITY_RESULT','exports','python3','threshold','split','analysis.health.lastCheck','\x20new\x20patterns.','toFixed','analysis.energy.forecast','analysis.automation.detectedPatterns','handlePrediction','heating','details','sendToPythonWrapper','debug','1772590uSnjOa','analysis.training.status','analysis.health.trendValue','setStateAsync','stringify','üï∏Ô∏è\x20Topology\x20Map\x20updated\x20by\x20Python.','toISOString','TREND_RESULT','analysis.automation.patternDetected','data','analysis.health.trendDiagnosis','analysis.isAlert','668795yGrQuT','üõãÔ∏è\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','analysis.security.lastCheck','PONG','[RESULT]','44fAnIFI','Unknown','analysis.alertReason','constructor','analysis.energy.insulationScore','TRAINING_COMPLETE','12WfPuOb','ANOMALY','trim','./setup','error','Error\x20launching\x20Python:\x20','type','insulation','Failed:\x20','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','length','HEALTH_RESULT','parse','analysis.security.currentThreshold','service.py','payload','stdin','change_percent'];a4_0x323c=function(){return _0x31b1ff;};return a4_0x323c();}function stopService(_0xb9bcb3){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x2a9cc8){}pythonProcess=null;}}module[a4_0x48e02f(0x103)]={'startService':startService,'stopService':stopService,'send':send};