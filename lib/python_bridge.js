const a4_0x9c9c38=a4_0x48f0;(function(_0x4e791f,_0x564d89){const _0x15b328=a4_0x48f0,_0xe17fe0=_0x4e791f();while(!![]){try{const _0x18b0dd=-parseInt(_0x15b328(0x1f4))/0x1*(parseInt(_0x15b328(0x21c))/0x2)+-parseInt(_0x15b328(0x200))/0x3*(-parseInt(_0x15b328(0x231))/0x4)+-parseInt(_0x15b328(0x230))/0x5*(-parseInt(_0x15b328(0x1f1))/0x6)+-parseInt(_0x15b328(0x214))/0x7+-parseInt(_0x15b328(0x22e))/0x8+parseInt(_0x15b328(0x20e))/0x9+parseInt(_0x15b328(0x207))/0xa*(parseInt(_0x15b328(0x1ed))/0xb);if(_0x18b0dd===_0x564d89)break;else _0xe17fe0['push'](_0xe17fe0['shift']());}catch(_0x525db9){_0xe17fe0['push'](_0xe17fe0['shift']());}}}(a4_0x2c1d,0x38f63));const a4_0x577969=(function(){let _0x18c0a1=!![];return function(_0x2c8a02,_0x227afa){const _0x3bbcf9=_0x18c0a1?function(){const _0x543685=a4_0x48f0;if(_0x227afa){const _0x532a98=_0x227afa[_0x543685(0x201)](_0x2c8a02,arguments);return _0x227afa=null,_0x532a98;}}:function(){};return _0x18c0a1=![],_0x3bbcf9;};}()),a4_0x50a663=a4_0x577969(this,function(){const _0x5a77d8=a4_0x48f0;return a4_0x50a663[_0x5a77d8(0x1ff)]()[_0x5a77d8(0x1fa)]('(((.+)+)+)+$')[_0x5a77d8(0x1ff)]()[_0x5a77d8(0x1e8)](a4_0x50a663)[_0x5a77d8(0x1fa)](_0x5a77d8(0x227));});a4_0x50a663();'use strict';const {spawn}=require(a4_0x9c9c38(0x1e1)),path=require(a4_0x9c9c38(0x1f9)),fs=require('fs'),setup=require(a4_0x9c9c38(0x21a)),automation=require(a4_0x9c9c38(0x22a));function a4_0x2c1d(){const _0x1ebd9a=['analysis.health.isAnomaly','103112LuHSkH','âœ…\x20HEALTH\x20TRAINED.','analysis.isAlert','Unknown','service.py','analysis.energy.heatingScore','analysis.security.currentThreshold','analysis.security.lastScore','success','stdout','stringify','(((.+)+)+)+$','error','close','./automation','val','analysis.prediction.nextRoom','ENERGY_OPTIMIZE_RESULT','2555048ETrxpP','analysis.energy.warmupSources','23110SSWKOl','4bsTOGV','analysis.energy.rlPenalties','writable','Success:\x20','analysis.prediction.trackerConfidence','analysis.prediction.trackerTopRoom','SECURITY_RESULT','debug','GAIT_RESULT','[PYTHON]\x20','data','keys','python3','child_process','\x0aGrund:\x20','âš ï¸\x20SECURITY\x20ALARM:\x20','length','PONG','RL_PENALTY_UPDATE','log','constructor','analysis.energy.insulationScore','insulation','toISOString','SIGNAL_RESULT','130229FPDcme','split','startsWith','toLocaleTimeString','378YIIftB','PINN_PREDICT_RESULT','info','3eTYexj','parse','stdin','details','analysis.prediction.confidence','path','search','trim','exports','analysis.training.status','analysis.energy.warmupTimes','toString','619797unntsw','apply','analysis.energy.forecast','analysis.health.gaitSpeed','analysis.health.lastCheck','sendToPythonWrapper','Failed:\x20','490tLokxl','payload','ENERGY_TRAIN_RESULT','heating','TRAINING_COMPLETE','analysis.automation.detectedPatterns','getState','234882dbJygp','setStateAsync','substring','type','handlePrediction','ENERGY_PREDICT_RESULT','2776410vDlEGX','threshold','reason','analysis.prediction.trackerState','[RESULT]','analysis.energy.warmupDetails','./setup'];a4_0x2c1d=function(){return _0x1ebd9a;};return a4_0x2c1d();}let pythonProcess=null;function send(_0x41f1d9,_0xc40283,_0x39af74={}){const _0x481537=a4_0x9c9c38;if(!pythonProcess||!pythonProcess[_0x481537(0x1f6)][_0x481537(0x233)])return;const _0x5dcb5a=JSON[_0x481537(0x226)]({'command':_0xc40283,..._0x39af74});try{pythonProcess['stdin']['write'](_0x5dcb5a+'\x0a');}catch(_0x317c00){}}function handleResult(_0x14d762,_0x4e2b2b){const _0x2819de=a4_0x9c9c38;if(_0x4e2b2b[_0x2819de(0x211)]===_0x2819de(0x1e5))_0x14d762['log'][_0x2819de(0x238)]('ðŸ\x20Python\x20Pong');else{if(_0x4e2b2b[_0x2819de(0x211)]===_0x2819de(0x237)){const {anomaly_score:_0x3403db,is_anomaly:_0x515a22,threshold:_0x500ee4,explanation:_0x2876ea}=_0x4e2b2b[_0x2819de(0x208)];_0x14d762['setStateAsync'](_0x2819de(0x223),{'val':_0x3403db,'ack':!![]}),_0x14d762[_0x2819de(0x20f)]('analysis.security.lastCheck',{'val':new Date()[_0x2819de(0x1eb)](),'ack':!![]});if(_0x500ee4)_0x14d762['setStateAsync'](_0x2819de(0x222),{'val':_0x500ee4,'ack':!![]});if(_0x515a22){let _0x14ad47='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x3403db['toFixed'](0x4)+')';if(_0x2876ea&&_0x2876ea!==_0x2819de(0x21f))_0x14ad47+=_0x2819de(0x1e2)+_0x2876ea;_0x14d762[_0x2819de(0x20f)](_0x2819de(0x21e),{'val':!![],'ack':!![]}),_0x14d762[_0x2819de(0x20f)]('analysis.alertReason',{'val':_0x14ad47,'ack':!![]}),setup['sendNotification'](_0x14d762,_0x2819de(0x1e3)+_0x14ad47,![],!![]);}}else{if(_0x4e2b2b[_0x2819de(0x211)]===_0x2819de(0x20b)){const _0x386edb=_0x4e2b2b['payload'][_0x2819de(0x1f7)]||'',_0x13945d=_0x4e2b2b[_0x2819de(0x208)][_0x2819de(0x215)],_0x379733=_0x4e2b2b[_0x2819de(0x208)][_0x2819de(0x224)]?_0x2819de(0x234)+new Date()[_0x2819de(0x1f0)]()+'\x20('+_0x386edb+')':_0x2819de(0x206)+_0x4e2b2b[_0x2819de(0x208)][_0x2819de(0x216)];_0x14d762[_0x2819de(0x20f)](_0x2819de(0x1fd),{'val':_0x379733,'ack':!![]});if(_0x4e2b2b[_0x2819de(0x208)][_0x2819de(0x224)]&&_0x13945d)_0x14d762[_0x2819de(0x20f)](_0x2819de(0x222),{'val':_0x13945d,'ack':!![]});}else{if(_0x4e2b2b[_0x2819de(0x211)]===_0x2819de(0x209)){if(_0x4e2b2b[_0x2819de(0x208)][_0x2819de(0x224)])try{const _0x4d5b94=JSON[_0x2819de(0x1f5)](_0x4e2b2b[_0x2819de(0x208)]['details']);if(_0x4d5b94[_0x2819de(0x1ea)])_0x14d762[_0x2819de(0x20f)](_0x2819de(0x1e9),{'val':JSON[_0x2819de(0x226)](_0x4d5b94[_0x2819de(0x1ea)]),'ack':!![]});if(_0x4d5b94[_0x2819de(0x20a)])_0x14d762['setStateAsync'](_0x2819de(0x221),{'val':JSON[_0x2819de(0x226)](_0x4d5b94[_0x2819de(0x20a)]),'ack':!![]});}catch(_0x252e40){}}else{if(_0x4e2b2b[_0x2819de(0x211)]==='HEALTH_TRAIN_RESULT'){if(_0x4e2b2b[_0x2819de(0x208)]['success'])_0x14d762[_0x2819de(0x1e7)][_0x2819de(0x1f3)](_0x2819de(0x21d));}else{if(_0x4e2b2b[_0x2819de(0x211)]==='HEALTH_RESULT')_0x14d762[_0x2819de(0x20f)](_0x2819de(0x204),{'val':new Date()[_0x2819de(0x1eb)](),'ack':!![]}),_0x14d762[_0x2819de(0x20f)](_0x2819de(0x21b),{'val':_0x4e2b2b[_0x2819de(0x208)]['is_anomaly'],'ack':!![]});else{if(_0x4e2b2b[_0x2819de(0x211)]===_0x2819de(0x239)){const {speed_trend:_0x4a992c}=_0x4e2b2b[_0x2819de(0x208)];if(_0x4a992c!==undefined)_0x14d762[_0x2819de(0x20f)](_0x2819de(0x203),{'val':_0x4a992c,'ack':!![]});}else{if(_0x4e2b2b[_0x2819de(0x211)]===_0x2819de(0x213)){const {forecast:_0x32d9c6}=_0x4e2b2b['payload'];if(_0x32d9c6)_0x14d762[_0x2819de(0x20f)](_0x2819de(0x202),{'val':JSON[_0x2819de(0x226)](_0x32d9c6),'ack':!![]});}else{if(_0x4e2b2b[_0x2819de(0x211)]==='WARMUP_RESULT'){const {times:_0x54f153,sources:_0xab93dc,details:_0x550684}=_0x4e2b2b['payload'];if(_0x54f153)_0x14d762[_0x2819de(0x20f)](_0x2819de(0x1fe),{'val':JSON[_0x2819de(0x226)](_0x54f153),'ack':!![]});if(_0xab93dc)_0x14d762['setStateAsync'](_0x2819de(0x22f),{'val':JSON[_0x2819de(0x226)](_0xab93dc),'ack':!![]});if(_0x550684)_0x14d762[_0x2819de(0x20f)](_0x2819de(0x219),{'val':JSON['stringify'](_0x550684),'ack':!![]});}else{if(_0x4e2b2b[_0x2819de(0x211)]===_0x2819de(0x1e6)){const {penalties:_0x5bc0a7}=_0x4e2b2b[_0x2819de(0x208)];if(_0x5bc0a7)_0x14d762[_0x2819de(0x20f)](_0x2819de(0x232),{'val':JSON[_0x2819de(0x226)](_0x5bc0a7),'ack':!![]});}else{if(_0x4e2b2b[_0x2819de(0x211)]===_0x2819de(0x1f2)){const {forecast:_0x5d8533}=_0x4e2b2b[_0x2819de(0x208)];if(_0x5d8533)_0x14d762['setStateAsync']('analysis.energy.pinnForecast',{'val':JSON[_0x2819de(0x226)](_0x5d8533),'ack':!![]});}else{if(_0x4e2b2b[_0x2819de(0x211)]==='VENTILATION_ALERT'){const {alerts:_0x3ed0f2}=_0x4e2b2b['payload'];if(_0x3ed0f2)_0x14d762[_0x2819de(0x20f)]('analysis.energy.ventilationAlerts',{'val':JSON[_0x2819de(0x226)](_0x3ed0f2),'ack':!![]});}else{if(_0x4e2b2b[_0x2819de(0x211)]===_0x2819de(0x22d)){const {proposals:_0x1373a7}=_0x4e2b2b['payload'];_0x14d762[_0x2819de(0x20d)]('analysis.energy.mpcActive',(_0x2f33d2,_0xc2e666)=>{const _0x491ec0=_0x2819de;_0xc2e666&&_0xc2e666[_0x491ec0(0x22b)]===!![]&&_0x1373a7&&_0x1373a7[_0x491ec0(0x1e4)]>0x0&&automation['applyEnergySavings'](_0x14d762,_0x1373a7);});}else{if(_0x4e2b2b['type']===_0x2819de(0x1ec)){const {room:_0x57181b,propagation:_0x5dbddc}=_0x4e2b2b[_0x2819de(0x208)];let _0x2eabb2=_0x2819de(0x21f),_0x453b1b=0x0;if(_0x5dbddc){const _0x199f10=Object['entries'](_0x5dbddc);_0x199f10[_0x2819de(0x1e4)]>0x0&&(_0x2eabb2=_0x199f10[0x0][0x0],_0x453b1b=_0x199f10[0x0][0x1]);}_0x14d762['setStateAsync'](_0x2819de(0x22c),{'val':_0x2eabb2,'ack':!![]}),_0x14d762[_0x2819de(0x20f)](_0x2819de(0x1f8),{'val':_0x453b1b,'ack':!![]}),automation[_0x2819de(0x212)](_0x14d762,_0x2eabb2,_0x453b1b);}else{if(_0x4e2b2b[_0x2819de(0x211)]==='TRACKER_RESULT'){const {probabilities:_0x17cb2b}=_0x4e2b2b[_0x2819de(0x208)];if(_0x17cb2b){_0x14d762['setStateAsync'](_0x2819de(0x217),{'val':JSON[_0x2819de(0x226)](_0x17cb2b),'ack':!![]});const _0x2a935b=Object[_0x2819de(0x23c)](_0x17cb2b);if(_0x2a935b[_0x2819de(0x1e4)]>0x0){const _0x224d84=_0x2a935b[0x0],_0x45b8ad=_0x17cb2b[_0x224d84];_0x14d762[_0x2819de(0x20f)](_0x2819de(0x236),{'val':_0x224d84,'ack':!![]}),_0x14d762['setStateAsync'](_0x2819de(0x235),{'val':_0x45b8ad,'ack':!![]});}}}else{if(_0x4e2b2b[_0x2819de(0x211)]==='COMFORT_RESULT'){const {patterns:_0x3272cb}=_0x4e2b2b[_0x2819de(0x208)];if(_0x3272cb&&_0x3272cb['length']>0x0)_0x14d762[_0x2819de(0x20f)](_0x2819de(0x20c),{'val':JSON['stringify'](_0x3272cb),'ack':!![]});}}}}}}}}}}}}}}}}}function startService(_0x331315,_0x25e194){const _0x5e2b7f=a4_0x9c9c38;let _0x5dd6de=_0x5e2b7f(0x23d);if(fs['existsSync'](_0x25e194))_0x5dd6de=_0x25e194;try{const _0x358f72=path['join'](__dirname,'..','python_service',_0x5e2b7f(0x220));pythonProcess=spawn(_0x5dd6de,[_0x358f72]),pythonProcess[_0x5e2b7f(0x225)]['on'](_0x5e2b7f(0x23b),_0x355dc9=>{const _0x35db39=_0x5e2b7f,_0x282485=_0x355dc9['toString']()[_0x35db39(0x1ee)]('\x0a');_0x282485['forEach'](_0x2f20b0=>{const _0x3e1174=_0x35db39,_0xc04255=_0x2f20b0['trim']();if(!_0xc04255)return;if(_0xc04255[_0x3e1174(0x1ef)]('[LOG]'))_0x331315[_0x3e1174(0x1e7)][_0x3e1174(0x238)](_0x3e1174(0x23a)+_0xc04255[_0x3e1174(0x210)](0x5)['trim']());else{if(_0xc04255[_0x3e1174(0x1ef)](_0x3e1174(0x218)))try{const _0x4e6f27=JSON[_0x3e1174(0x1f5)](_0xc04255['substring'](0x8)[_0x3e1174(0x1fb)]());handleResult(_0x331315,_0x4e6f27);}catch(_0x2c66bb){}}});}),pythonProcess['on'](_0x5e2b7f(0x229),_0x7516e=>{pythonProcess=null;}),_0x331315[_0x5e2b7f(0x205)]=(_0x9a03df,_0x5eda19)=>send(_0x331315,_0x9a03df,_0x5eda19);}catch(_0x2f09fc){_0x331315[_0x5e2b7f(0x1e7)][_0x5e2b7f(0x228)]('Error\x20launching\x20Python:\x20'+_0x2f09fc['message']);}}function stopService(_0x3d105a){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x527d8e){}pythonProcess=null;}}function a4_0x48f0(_0x5dbec4,_0x175b67){const _0x5db55e=a4_0x2c1d();return a4_0x48f0=function(_0x50a663,_0x577969){_0x50a663=_0x50a663-0x1e1;let _0x2c1d57=_0x5db55e[_0x50a663];return _0x2c1d57;},a4_0x48f0(_0x5dbec4,_0x175b67);}module[a4_0x9c9c38(0x1fc)]={'startService':startService,'stopService':stopService,'send':send};