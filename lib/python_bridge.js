const a4_0x5d443b=a4_0x10ca;(function(_0x2733fc,_0x1f4ccf){const _0x375a3e=a4_0x10ca,_0x1f1fac=_0x2733fc();while(!![]){try{const _0x30f963=parseInt(_0x375a3e(0x1d0))/0x1*(-parseInt(_0x375a3e(0x1af))/0x2)+parseInt(_0x375a3e(0x198))/0x3+parseInt(_0x375a3e(0x1ac))/0x4*(-parseInt(_0x375a3e(0x1db))/0x5)+parseInt(_0x375a3e(0x1cc))/0x6*(-parseInt(_0x375a3e(0x1b0))/0x7)+parseInt(_0x375a3e(0x1c4))/0x8*(parseInt(_0x375a3e(0x1de))/0x9)+parseInt(_0x375a3e(0x1d6))/0xa*(parseInt(_0x375a3e(0x1c6))/0xb)+parseInt(_0x375a3e(0x1a1))/0xc;if(_0x30f963===_0x1f4ccf)break;else _0x1f1fac['push'](_0x1f1fac['shift']());}catch(_0x8f1dbf){_0x1f1fac['push'](_0x1f1fac['shift']());}}}(a4_0x5ab3,0xb8533));const a4_0x27dd65=(function(){let _0x1810ae=!![];return function(_0x232b1a,_0x2f0cf7){const _0x3d1190=_0x1810ae?function(){const _0x1c3111=a4_0x10ca;if(_0x2f0cf7){const _0x40767c=_0x2f0cf7[_0x1c3111(0x1a0)](_0x232b1a,arguments);return _0x2f0cf7=null,_0x40767c;}}:function(){};return _0x1810ae=![],_0x3d1190;};}()),a4_0x332ae1=a4_0x27dd65(this,function(){const _0x159bf4=a4_0x10ca;return a4_0x332ae1['toString']()[_0x159bf4(0x1c7)]('(((.+)+)+)+$')[_0x159bf4(0x1c5)]()[_0x159bf4(0x1e6)](a4_0x332ae1)['search'](_0x159bf4(0x199));});function a4_0x5ab3(){const _0x586564=['7516443EFZgTb','search','log','applyEnergySavings','data','setStateAsync','3984PdqZer','TRAINING_COMPLETE','analysis.energy.heatingScore','analysis.energy.warmupSources','2ADgaPY','VENTILATION_ALERT','payload','[PYTHON]\x20','HEALTH_TRAIN_RESULT','analysis.energy.warmupDetails','10dtVssM','ðŸ\x20Python\x20Pong','reason','TRACKER_RESULT','analysis.energy.warmupTimes','5GHBkqV','analysis.alertReason','join','2455866xWvJBb','existsSync','ENERGY_PREDICT_RESULT','insulation','analysis.security.currentThreshold','âœ…\x20HEALTH\x20TRAINED.','SECURITY_RESULT','child_process','constructor','split','PONG','sendNotification','analysis.security.lastScore','getState','[LOG]','./setup','info','error','entries','GAIT_RESULT','write','substring','PINN_PREDICT_RESULT','analysis.prediction.confidence','close','type','analysis.health.gaitSpeed','4094166RXKbup','(((.+)+)+)+$','exports','path','python3','val','analysis.energy.insulationScore','WARMUP_RESULT','apply','9491580aUiqIy','kill','ENERGY_TRAIN_RESULT','forEach','sendToPythonWrapper','analysis.energy.forecast','toISOString','analysis.energy.ventilationAlerts','COMFORT_RESULT','parse','analysis.training.status','1968308bfcrwT','./automation','length','1196758pLwTov','12796uMQEph','service.py','analysis.health.isAnomaly','analysis.prediction.trackerTopRoom','analysis.energy.pinnForecast','stdin','keys','message','success','stringify','analysis.automation.detectedPatterns','startsWith','analysis.isAlert','analysis.security.lastCheck','details','stdout','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','trim','\x0aGrund:\x20','analysis.energy.mpcActive','24bwYZbP','toString'];a4_0x5ab3=function(){return _0x586564;};return a4_0x5ab3();}a4_0x332ae1();'use strict';const {spawn}=require(a4_0x5d443b(0x1e5)),path=require(a4_0x5d443b(0x19b)),fs=require('fs'),setup=require(a4_0x5d443b(0x1ed)),automation=require(a4_0x5d443b(0x1ad));let pythonProcess=null;function send(_0x471453,_0x289f8b,_0x53c177={}){const _0x2170cc=a4_0x5d443b;if(!pythonProcess||!pythonProcess[_0x2170cc(0x1b5)]['writable'])return;const _0x151bf3=JSON[_0x2170cc(0x1b9)]({'command':_0x289f8b,..._0x53c177});try{pythonProcess[_0x2170cc(0x1b5)][_0x2170cc(0x1f2)](_0x151bf3+'\x0a');}catch(_0x32382c){}}function handleResult(_0x4b3702,_0x1b9b72){const _0x32e44f=a4_0x5d443b;if(_0x1b9b72[_0x32e44f(0x196)]===_0x32e44f(0x1e8))_0x4b3702[_0x32e44f(0x1c8)]['debug'](_0x32e44f(0x1d7));else{if(_0x1b9b72['type']===_0x32e44f(0x1e4)){const {anomaly_score:_0x335aba,is_anomaly:_0x6b80d9,threshold:_0x5cf109,explanation:_0x3c1f74}=_0x1b9b72[_0x32e44f(0x1d2)];_0x4b3702[_0x32e44f(0x1cb)](_0x32e44f(0x1ea),{'val':_0x335aba,'ack':!![]}),_0x4b3702[_0x32e44f(0x1cb)](_0x32e44f(0x1bd),{'val':new Date()[_0x32e44f(0x1a7)](),'ack':!![]});if(_0x5cf109)_0x4b3702[_0x32e44f(0x1cb)](_0x32e44f(0x1e2),{'val':_0x5cf109,'ack':!![]});if(_0x6b80d9){let _0x4c6dfc=_0x32e44f(0x1c0)+_0x335aba['toFixed'](0x4)+')';if(_0x3c1f74&&_0x3c1f74!=='Unknown')_0x4c6dfc+=_0x32e44f(0x1c2)+_0x3c1f74;_0x4b3702[_0x32e44f(0x1cb)](_0x32e44f(0x1bc),{'val':!![],'ack':!![]}),_0x4b3702[_0x32e44f(0x1cb)](_0x32e44f(0x1dc),{'val':_0x4c6dfc,'ack':!![]}),setup[_0x32e44f(0x1e9)](_0x4b3702,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x4c6dfc,![],!![]);}}else{if(_0x1b9b72['type']===_0x32e44f(0x1cd)){const _0x1ca0c9=_0x1b9b72[_0x32e44f(0x1d2)][_0x32e44f(0x1be)]||'',_0x12f443=_0x1b9b72['payload']['threshold'],_0x5a6199=_0x1b9b72['payload'][_0x32e44f(0x1b8)]?'Success:\x20'+new Date()['toLocaleTimeString']()+'\x20('+_0x1ca0c9+')':'Failed:\x20'+_0x1b9b72[_0x32e44f(0x1d2)][_0x32e44f(0x1d8)];_0x4b3702[_0x32e44f(0x1cb)](_0x32e44f(0x1ab),{'val':_0x5a6199,'ack':!![]});if(_0x1b9b72[_0x32e44f(0x1d2)]['success']&&_0x12f443)_0x4b3702['setStateAsync'](_0x32e44f(0x1e2),{'val':_0x12f443,'ack':!![]});}else{if(_0x1b9b72['type']===_0x32e44f(0x1a3)){if(_0x1b9b72[_0x32e44f(0x1d2)][_0x32e44f(0x1b8)])try{const _0x4c608c=JSON[_0x32e44f(0x1aa)](_0x1b9b72[_0x32e44f(0x1d2)]['details']);if(_0x4c608c[_0x32e44f(0x1e1)])_0x4b3702['setStateAsync'](_0x32e44f(0x19e),{'val':JSON[_0x32e44f(0x1b9)](_0x4c608c[_0x32e44f(0x1e1)]),'ack':!![]});if(_0x4c608c['heating'])_0x4b3702['setStateAsync'](_0x32e44f(0x1ce),{'val':JSON[_0x32e44f(0x1b9)](_0x4c608c['heating']),'ack':!![]});}catch(_0x1fee13){}}else{if(_0x1b9b72[_0x32e44f(0x196)]===_0x32e44f(0x1d4)){if(_0x1b9b72['payload'][_0x32e44f(0x1b8)])_0x4b3702[_0x32e44f(0x1c8)][_0x32e44f(0x1ee)](_0x32e44f(0x1e3));}else{if(_0x1b9b72['type']==='HEALTH_RESULT')_0x4b3702[_0x32e44f(0x1cb)]('analysis.health.lastCheck',{'val':new Date()[_0x32e44f(0x1a7)](),'ack':!![]}),_0x4b3702[_0x32e44f(0x1cb)](_0x32e44f(0x1b2),{'val':_0x1b9b72[_0x32e44f(0x1d2)]['is_anomaly'],'ack':!![]});else{if(_0x1b9b72['type']===_0x32e44f(0x1f1)){const {speed_trend:_0x37cf42}=_0x1b9b72[_0x32e44f(0x1d2)];if(_0x37cf42!==undefined)_0x4b3702['setStateAsync'](_0x32e44f(0x197),{'val':_0x37cf42,'ack':!![]});}else{if(_0x1b9b72['type']===_0x32e44f(0x1e0)){const {forecast:_0x28206d}=_0x1b9b72[_0x32e44f(0x1d2)];if(_0x28206d)_0x4b3702['setStateAsync'](_0x32e44f(0x1a6),{'val':JSON['stringify'](_0x28206d),'ack':!![]});}else{if(_0x1b9b72[_0x32e44f(0x196)]===_0x32e44f(0x19f)){const {times:_0x4d445a,sources:_0x4307ee,details:_0x5dec76}=_0x1b9b72[_0x32e44f(0x1d2)];if(_0x4d445a)_0x4b3702[_0x32e44f(0x1cb)](_0x32e44f(0x1da),{'val':JSON[_0x32e44f(0x1b9)](_0x4d445a),'ack':!![]});if(_0x4307ee)_0x4b3702[_0x32e44f(0x1cb)](_0x32e44f(0x1cf),{'val':JSON[_0x32e44f(0x1b9)](_0x4307ee),'ack':!![]});if(_0x5dec76)_0x4b3702[_0x32e44f(0x1cb)](_0x32e44f(0x1d5),{'val':JSON[_0x32e44f(0x1b9)](_0x5dec76),'ack':!![]});}else{if(_0x1b9b72['type']===_0x32e44f(0x1f4)){const {forecast:_0x573787}=_0x1b9b72[_0x32e44f(0x1d2)];if(_0x573787)_0x4b3702[_0x32e44f(0x1cb)](_0x32e44f(0x1b4),{'val':JSON[_0x32e44f(0x1b9)](_0x573787),'ack':!![]});}else{if(_0x1b9b72[_0x32e44f(0x196)]===_0x32e44f(0x1d1)){const {alerts:_0x4d8ae5}=_0x1b9b72[_0x32e44f(0x1d2)];if(_0x4d8ae5)_0x4b3702[_0x32e44f(0x1cb)](_0x32e44f(0x1a8),{'val':JSON['stringify'](_0x4d8ae5),'ack':!![]});}else{if(_0x1b9b72[_0x32e44f(0x196)]==='ENERGY_OPTIMIZE_RESULT'){const {proposals:_0xf7c5b8}=_0x1b9b72[_0x32e44f(0x1d2)];_0x4b3702[_0x32e44f(0x1eb)](_0x32e44f(0x1c3),(_0xecfd53,_0x2b890f)=>{const _0x3180b2=_0x32e44f;_0x2b890f&&_0x2b890f[_0x3180b2(0x19d)]===!![]&&_0xf7c5b8&&_0xf7c5b8['length']>0x0&&automation[_0x3180b2(0x1c9)](_0x4b3702,_0xf7c5b8);});}else{if(_0x1b9b72[_0x32e44f(0x196)]==='SIGNAL_RESULT'){const {room:_0x169fda,propagation:_0xaba0cf}=_0x1b9b72[_0x32e44f(0x1d2)];let _0x6773a2='Unknown',_0x4ae04d=0x0;if(_0xaba0cf){const _0x19fc32=Object[_0x32e44f(0x1f0)](_0xaba0cf);_0x19fc32[_0x32e44f(0x1ae)]>0x0&&(_0x6773a2=_0x19fc32[0x0][0x0],_0x4ae04d=_0x19fc32[0x0][0x1]);}_0x4b3702['setStateAsync']('analysis.prediction.nextRoom',{'val':_0x6773a2,'ack':!![]}),_0x4b3702['setStateAsync'](_0x32e44f(0x1f5),{'val':_0x4ae04d,'ack':!![]}),automation['handlePrediction'](_0x4b3702,_0x6773a2,_0x4ae04d);}else{if(_0x1b9b72[_0x32e44f(0x196)]===_0x32e44f(0x1d9)){const {probabilities:_0x419bb4}=_0x1b9b72['payload'];if(_0x419bb4){_0x4b3702[_0x32e44f(0x1cb)]('analysis.prediction.trackerState',{'val':JSON[_0x32e44f(0x1b9)](_0x419bb4),'ack':!![]});const _0x3d7340=Object[_0x32e44f(0x1b6)](_0x419bb4);if(_0x3d7340[_0x32e44f(0x1ae)]>0x0){const _0x13da38=_0x3d7340[0x0],_0x3ff96c=_0x419bb4[_0x13da38];_0x4b3702[_0x32e44f(0x1cb)](_0x32e44f(0x1b3),{'val':_0x13da38,'ack':!![]}),_0x4b3702[_0x32e44f(0x1cb)]('analysis.prediction.trackerConfidence',{'val':_0x3ff96c,'ack':!![]});}}}else{if(_0x1b9b72['type']===_0x32e44f(0x1a9)){const {patterns:_0x606d1d}=_0x1b9b72['payload'];if(_0x606d1d&&_0x606d1d[_0x32e44f(0x1ae)]>0x0)_0x4b3702[_0x32e44f(0x1cb)](_0x32e44f(0x1ba),{'val':JSON[_0x32e44f(0x1b9)](_0x606d1d),'ack':!![]});}}}}}}}}}}}}}}}}function startService(_0x575bda,_0x5a9f46){const _0x8cbcd8=a4_0x5d443b;let _0x4eb985=_0x8cbcd8(0x19c);if(fs[_0x8cbcd8(0x1df)](_0x5a9f46))_0x4eb985=_0x5a9f46;try{const _0x5c26e7=path[_0x8cbcd8(0x1dd)](__dirname,'..','python_service',_0x8cbcd8(0x1b1));pythonProcess=spawn(_0x4eb985,[_0x5c26e7]),pythonProcess[_0x8cbcd8(0x1bf)]['on'](_0x8cbcd8(0x1ca),_0x520ca9=>{const _0x136b7a=_0x8cbcd8,_0x955bd9=_0x520ca9[_0x136b7a(0x1c5)]()[_0x136b7a(0x1e7)]('\x0a');_0x955bd9[_0x136b7a(0x1a4)](_0x4292d6=>{const _0x37ee02=_0x136b7a,_0x524ef7=_0x4292d6[_0x37ee02(0x1c1)]();if(!_0x524ef7)return;if(_0x524ef7[_0x37ee02(0x1bb)](_0x37ee02(0x1ec)))_0x575bda[_0x37ee02(0x1c8)]['debug'](_0x37ee02(0x1d3)+_0x524ef7[_0x37ee02(0x1f3)](0x5)[_0x37ee02(0x1c1)]());else{if(_0x524ef7[_0x37ee02(0x1bb)]('[RESULT]'))try{const _0x57d340=JSON[_0x37ee02(0x1aa)](_0x524ef7[_0x37ee02(0x1f3)](0x8)[_0x37ee02(0x1c1)]());handleResult(_0x575bda,_0x57d340);}catch(_0x17b821){}}});}),pythonProcess['on'](_0x8cbcd8(0x195),_0x203fd5=>{pythonProcess=null;}),_0x575bda[_0x8cbcd8(0x1a5)]=(_0x14a332,_0x28b66f)=>send(_0x575bda,_0x14a332,_0x28b66f);}catch(_0x3b50db){_0x575bda['log'][_0x8cbcd8(0x1ef)]('Error\x20launching\x20Python:\x20'+_0x3b50db[_0x8cbcd8(0x1b7)]);}}function a4_0x10ca(_0x56d16e,_0x233c10){const _0x2d6555=a4_0x5ab3();return a4_0x10ca=function(_0x332ae1,_0x27dd65){_0x332ae1=_0x332ae1-0x195;let _0x5ab31b=_0x2d6555[_0x332ae1];return _0x5ab31b;},a4_0x10ca(_0x56d16e,_0x233c10);}function stopService(_0x1050f6){const _0x229eb5=a4_0x5d443b;if(pythonProcess){try{pythonProcess[_0x229eb5(0x1a2)]();}catch(_0x31b204){}pythonProcess=null;}}module[a4_0x5d443b(0x19a)]={'startService':startService,'stopService':stopService,'send':send};