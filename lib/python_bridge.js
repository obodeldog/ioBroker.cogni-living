const a4_0x7aec08=a4_0xad9a;(function(_0x26056e,_0x3e30e6){const _0x3b0ee6=a4_0xad9a,_0x48bbc8=_0x26056e();while(!![]){try{const _0x1633ac=-parseInt(_0x3b0ee6(0xe0))/0x1+parseInt(_0x3b0ee6(0xe6))/0x2+-parseInt(_0x3b0ee6(0xf9))/0x3+parseInt(_0x3b0ee6(0xd4))/0x4+-parseInt(_0x3b0ee6(0xb0))/0x5*(parseInt(_0x3b0ee6(0xcb))/0x6)+parseInt(_0x3b0ee6(0xbb))/0x7*(-parseInt(_0x3b0ee6(0xb5))/0x8)+parseInt(_0x3b0ee6(0xd5))/0x9;if(_0x1633ac===_0x3e30e6)break;else _0x48bbc8['push'](_0x48bbc8['shift']());}catch(_0x5ecf80){_0x48bbc8['push'](_0x48bbc8['shift']());}}}(a4_0x49c3,0x2848a));function a4_0x49c3(){const _0x2cc7c2=['[LOG]','[RESULT]','keys','applyEnergySavings','writable','details','analysis.energy.warmupDetails','write','success','path','27694ihfEYz','COMFORT_RESULT','ENERGY_PREDICT_RESULT','sendToPythonWrapper','analysis.prediction.trackerState','GAIT_RESULT','22914GXvjnk','SECURITY_RESULT','setStateAsync','kill','stdout','startsWith','analysis.health.lastCheck','join','VENTILATION_ALERT','type','TRAINING_COMPLETE','./automation','handlePrediction','substring','child_process','val','debug','service.py','(((.+)+)+)+$','826389GPCwqQ','analysis.energy.warmupSources','Error\x20launching\x20Python:\x20','Unknown','parse','is_anomaly','trim','analysis.health.gaitSpeed','./setup','analysis.health.isAnomaly','data','TRACKER_RESULT','entries','message','toString','python_service','reason','insulation','analysis.energy.warmupTimes','10ZRtfaM','analysis.prediction.trackerTopRoom','\x0aGrund:\x20','length','analysis.security.currentThreshold','49784duegVR','analysis.prediction.trackerConfidence','toLocaleTimeString','apply','analysis.security.lastCheck','Success:\x20','28beIJYe','PONG','stdin','heating','analysis.alertReason','info','analysis.automation.detectedPatterns','analysis.energy.rlPenalties','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','search','log','payload','PINN_PREDICT_RESULT','WARMUP_RESULT','analysis.energy.heatingScore','analysis.energy.insulationScore','141558XlJCNS','analysis.energy.mpcActive','toISOString','close','error','HEALTH_TRAIN_RESULT','exports','stringify','getState','799916QnzUqq','2959209QuLKKf'];a4_0x49c3=function(){return _0x2cc7c2;};return a4_0x49c3();}const a4_0x56c639=(function(){let _0x1a5f03=!![];return function(_0x2cb18d,_0x35853c){const _0x1dbcc4=_0x1a5f03?function(){const _0xc41749=a4_0xad9a;if(_0x35853c){const _0x325f2a=_0x35853c[_0xc41749(0xb8)](_0x2cb18d,arguments);return _0x35853c=null,_0x325f2a;}}:function(){};return _0x1a5f03=![],_0x1dbcc4;};}()),a4_0x32c101=a4_0x56c639(this,function(){const _0x1fa10d=a4_0xad9a;return a4_0x32c101[_0x1fa10d(0x107)]()[_0x1fa10d(0xc4)](_0x1fa10d(0xf8))[_0x1fa10d(0x107)]()['constructor'](a4_0x32c101)[_0x1fa10d(0xc4)]('(((.+)+)+)+$');});a4_0x32c101();'use strict';const {spawn}=require(a4_0x7aec08(0xf4)),path=require(a4_0x7aec08(0xdf)),fs=require('fs'),setup=require(a4_0x7aec08(0x101)),automation=require(a4_0x7aec08(0xf1));let pythonProcess=null;function send(_0x1003f2,_0x4e30cf,_0x2eeea4={}){const _0x327a78=a4_0x7aec08;if(!pythonProcess||!pythonProcess[_0x327a78(0xbd)][_0x327a78(0xda)])return;const _0x31e1dd=JSON[_0x327a78(0xd2)]({'command':_0x4e30cf,..._0x2eeea4});try{pythonProcess[_0x327a78(0xbd)][_0x327a78(0xdd)](_0x31e1dd+'\x0a');}catch(_0x1194de){}}function a4_0xad9a(_0x378c27,_0x5c4c5c){const _0x1ce91c=a4_0x49c3();return a4_0xad9a=function(_0x32c101,_0x56c639){_0x32c101=_0x32c101-0xaf;let _0x49c382=_0x1ce91c[_0x32c101];return _0x49c382;},a4_0xad9a(_0x378c27,_0x5c4c5c);}function handleResult(_0x4cc6cc,_0x2be9ad){const _0x2832b5=a4_0x7aec08;if(_0x2be9ad['type']===_0x2832b5(0xbc))_0x4cc6cc['log'][_0x2832b5(0xf6)]('ðŸ\x20Python\x20Pong');else{if(_0x2be9ad[_0x2832b5(0xef)]===_0x2832b5(0xe7)){const {anomaly_score:_0x36d597,is_anomaly:_0x16b0de,threshold:_0x4acc97,explanation:_0xe6f85e}=_0x2be9ad[_0x2832b5(0xc6)];_0x4cc6cc[_0x2832b5(0xe8)]('analysis.security.lastScore',{'val':_0x36d597,'ack':!![]}),_0x4cc6cc['setStateAsync'](_0x2832b5(0xb9),{'val':new Date()[_0x2832b5(0xcd)](),'ack':!![]});if(_0x4acc97)_0x4cc6cc['setStateAsync'](_0x2832b5(0xb4),{'val':_0x4acc97,'ack':!![]});if(_0x16b0de){let _0x1b3853=_0x2832b5(0xc3)+_0x36d597['toFixed'](0x4)+')';if(_0xe6f85e&&_0xe6f85e!==_0x2832b5(0xfc))_0x1b3853+=_0x2832b5(0xb2)+_0xe6f85e;_0x4cc6cc[_0x2832b5(0xe8)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x4cc6cc[_0x2832b5(0xe8)](_0x2832b5(0xbf),{'val':_0x1b3853,'ack':!![]}),setup['sendNotification'](_0x4cc6cc,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x1b3853,![],!![]);}}else{if(_0x2be9ad[_0x2832b5(0xef)]===_0x2832b5(0xf0)){const _0x4db0f0=_0x2be9ad[_0x2832b5(0xc6)][_0x2832b5(0xdb)]||'',_0x378c44=_0x2be9ad[_0x2832b5(0xc6)]['threshold'],_0x5f454c=_0x2be9ad['payload'][_0x2832b5(0xde)]?_0x2832b5(0xba)+new Date()[_0x2832b5(0xb7)]()+'\x20('+_0x4db0f0+')':'Failed:\x20'+_0x2be9ad['payload'][_0x2832b5(0x109)];_0x4cc6cc[_0x2832b5(0xe8)]('analysis.training.status',{'val':_0x5f454c,'ack':!![]});if(_0x2be9ad[_0x2832b5(0xc6)][_0x2832b5(0xde)]&&_0x378c44)_0x4cc6cc[_0x2832b5(0xe8)]('analysis.security.currentThreshold',{'val':_0x378c44,'ack':!![]});}else{if(_0x2be9ad['type']==='ENERGY_TRAIN_RESULT'){if(_0x2be9ad[_0x2832b5(0xc6)]['success'])try{const _0x4262a6=JSON['parse'](_0x2be9ad['payload']['details']);if(_0x4262a6[_0x2832b5(0x10a)])_0x4cc6cc[_0x2832b5(0xe8)](_0x2832b5(0xca),{'val':JSON[_0x2832b5(0xd2)](_0x4262a6['insulation']),'ack':!![]});if(_0x4262a6[_0x2832b5(0xbe)])_0x4cc6cc['setStateAsync'](_0x2832b5(0xc9),{'val':JSON[_0x2832b5(0xd2)](_0x4262a6[_0x2832b5(0xbe)]),'ack':!![]});}catch(_0x1bdd51){}}else{if(_0x2be9ad[_0x2832b5(0xef)]===_0x2832b5(0xd0)){if(_0x2be9ad['payload']['success'])_0x4cc6cc['log'][_0x2832b5(0xc0)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x2be9ad[_0x2832b5(0xef)]==='HEALTH_RESULT')_0x4cc6cc[_0x2832b5(0xe8)](_0x2832b5(0xec),{'val':new Date()['toISOString'](),'ack':!![]}),_0x4cc6cc[_0x2832b5(0xe8)](_0x2832b5(0x102),{'val':_0x2be9ad['payload'][_0x2832b5(0xfe)],'ack':!![]});else{if(_0x2be9ad[_0x2832b5(0xef)]===_0x2832b5(0xe5)){const {speed_trend:_0x43d1a0}=_0x2be9ad[_0x2832b5(0xc6)];if(_0x43d1a0!==undefined)_0x4cc6cc[_0x2832b5(0xe8)](_0x2832b5(0x100),{'val':_0x43d1a0,'ack':!![]});}else{if(_0x2be9ad['type']===_0x2832b5(0xe2)){const {forecast:_0x4e7f05}=_0x2be9ad[_0x2832b5(0xc6)];if(_0x4e7f05)_0x4cc6cc[_0x2832b5(0xe8)]('analysis.energy.forecast',{'val':JSON[_0x2832b5(0xd2)](_0x4e7f05),'ack':!![]});}else{if(_0x2be9ad[_0x2832b5(0xef)]===_0x2832b5(0xc8)){const {times:_0x2d4482,sources:_0x57f9c2,details:_0x5727b6}=_0x2be9ad[_0x2832b5(0xc6)];if(_0x2d4482)_0x4cc6cc[_0x2832b5(0xe8)](_0x2832b5(0xaf),{'val':JSON['stringify'](_0x2d4482),'ack':!![]});if(_0x57f9c2)_0x4cc6cc[_0x2832b5(0xe8)](_0x2832b5(0xfa),{'val':JSON[_0x2832b5(0xd2)](_0x57f9c2),'ack':!![]});if(_0x5727b6)_0x4cc6cc['setStateAsync'](_0x2832b5(0xdc),{'val':JSON[_0x2832b5(0xd2)](_0x5727b6),'ack':!![]});}else{if(_0x2be9ad[_0x2832b5(0xef)]==='RL_PENALTY_UPDATE'){const {penalties:_0x430e0a}=_0x2be9ad[_0x2832b5(0xc6)];if(_0x430e0a)_0x4cc6cc['setStateAsync'](_0x2832b5(0xc2),{'val':JSON[_0x2832b5(0xd2)](_0x430e0a),'ack':!![]});}else{if(_0x2be9ad[_0x2832b5(0xef)]===_0x2832b5(0xc7)){const {forecast:_0x551ef}=_0x2be9ad['payload'];if(_0x551ef)_0x4cc6cc[_0x2832b5(0xe8)]('analysis.energy.pinnForecast',{'val':JSON[_0x2832b5(0xd2)](_0x551ef),'ack':!![]});}else{if(_0x2be9ad[_0x2832b5(0xef)]===_0x2832b5(0xee)){const {alerts:_0x3d4aee}=_0x2be9ad['payload'];if(_0x3d4aee)_0x4cc6cc['setStateAsync']('analysis.energy.ventilationAlerts',{'val':JSON[_0x2832b5(0xd2)](_0x3d4aee),'ack':!![]});}else{if(_0x2be9ad['type']==='ENERGY_OPTIMIZE_RESULT'){const {proposals:_0x387c18}=_0x2be9ad[_0x2832b5(0xc6)];_0x4cc6cc[_0x2832b5(0xd3)](_0x2832b5(0xcc),(_0x117a20,_0x2d87e2)=>{const _0x2c6642=_0x2832b5;_0x2d87e2&&_0x2d87e2[_0x2c6642(0xf5)]===!![]&&_0x387c18&&_0x387c18[_0x2c6642(0xb3)]>0x0&&automation[_0x2c6642(0xd9)](_0x4cc6cc,_0x387c18);});}else{if(_0x2be9ad[_0x2832b5(0xef)]==='SIGNAL_RESULT'){const {room:_0x5d2b31,propagation:_0x35da18}=_0x2be9ad[_0x2832b5(0xc6)];let _0x16f113='Unknown',_0xbb2ba6=0x0;if(_0x35da18){const _0x280d12=Object[_0x2832b5(0x105)](_0x35da18);_0x280d12[_0x2832b5(0xb3)]>0x0&&(_0x16f113=_0x280d12[0x0][0x0],_0xbb2ba6=_0x280d12[0x0][0x1]);}_0x4cc6cc[_0x2832b5(0xe8)]('analysis.prediction.nextRoom',{'val':_0x16f113,'ack':!![]}),_0x4cc6cc[_0x2832b5(0xe8)]('analysis.prediction.confidence',{'val':_0xbb2ba6,'ack':!![]}),automation[_0x2832b5(0xf2)](_0x4cc6cc,_0x16f113,_0xbb2ba6);}else{if(_0x2be9ad[_0x2832b5(0xef)]===_0x2832b5(0x104)){const {probabilities:_0x26214c}=_0x2be9ad['payload'];if(_0x26214c){_0x4cc6cc[_0x2832b5(0xe8)](_0x2832b5(0xe4),{'val':JSON[_0x2832b5(0xd2)](_0x26214c),'ack':!![]});const _0x142581=Object[_0x2832b5(0xd8)](_0x26214c);if(_0x142581[_0x2832b5(0xb3)]>0x0){const _0xbe0739=_0x142581[0x0],_0x6bfbe7=_0x26214c[_0xbe0739];_0x4cc6cc[_0x2832b5(0xe8)](_0x2832b5(0xb1),{'val':_0xbe0739,'ack':!![]}),_0x4cc6cc['setStateAsync'](_0x2832b5(0xb6),{'val':_0x6bfbe7,'ack':!![]});}}}else{if(_0x2be9ad[_0x2832b5(0xef)]===_0x2832b5(0xe1)){const {patterns:_0x24fb15}=_0x2be9ad[_0x2832b5(0xc6)];if(_0x24fb15&&_0x24fb15[_0x2832b5(0xb3)]>0x0)_0x4cc6cc['setStateAsync'](_0x2832b5(0xc1),{'val':JSON[_0x2832b5(0xd2)](_0x24fb15),'ack':!![]});}}}}}}}}}}}}}}}}}function startService(_0x115051,_0x562b22){const _0x32e05e=a4_0x7aec08;let _0x5d20eb='python3';if(fs['existsSync'](_0x562b22))_0x5d20eb=_0x562b22;try{const _0x179f3a=path[_0x32e05e(0xed)](__dirname,'..',_0x32e05e(0x108),_0x32e05e(0xf7));pythonProcess=spawn(_0x5d20eb,[_0x179f3a]),pythonProcess[_0x32e05e(0xea)]['on'](_0x32e05e(0x103),_0x161e81=>{const _0x2ebea9=_0x161e81['toString']()['split']('\x0a');_0x2ebea9['forEach'](_0xfe60e7=>{const _0x223838=a4_0xad9a,_0x35b3a0=_0xfe60e7['trim']();if(!_0x35b3a0)return;if(_0x35b3a0[_0x223838(0xeb)](_0x223838(0xd6)))_0x115051['log'][_0x223838(0xf6)]('[PYTHON]\x20'+_0x35b3a0[_0x223838(0xf3)](0x5)[_0x223838(0xff)]());else{if(_0x35b3a0[_0x223838(0xeb)](_0x223838(0xd7)))try{const _0x44093e=JSON[_0x223838(0xfd)](_0x35b3a0[_0x223838(0xf3)](0x8)['trim']());handleResult(_0x115051,_0x44093e);}catch(_0xd7ee53){}}});}),pythonProcess['on'](_0x32e05e(0xce),_0x8e2179=>{pythonProcess=null;}),_0x115051[_0x32e05e(0xe3)]=(_0x3dce27,_0x2a5a4c)=>send(_0x115051,_0x3dce27,_0x2a5a4c);}catch(_0x50e075){_0x115051[_0x32e05e(0xc5)][_0x32e05e(0xcf)](_0x32e05e(0xfb)+_0x50e075[_0x32e05e(0x106)]);}}function stopService(_0x4cc385){const _0x547baf=a4_0x7aec08;if(pythonProcess){try{pythonProcess[_0x547baf(0xe9)]();}catch(_0x2b09a0){}pythonProcess=null;}}module[a4_0x7aec08(0xd1)]={'startService':startService,'stopService':stopService,'send':send};