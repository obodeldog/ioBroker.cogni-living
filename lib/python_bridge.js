const a4_0x2589c3=a4_0x5e80;(function(_0x2ce29d,_0x5dcd3c){const _0x3c58a1=a4_0x5e80,_0x6643fa=_0x2ce29d();while(!![]){try{const _0x4bfb9b=parseInt(_0x3c58a1(0x145))/0x1+-parseInt(_0x3c58a1(0x167))/0x2*(parseInt(_0x3c58a1(0x13b))/0x3)+parseInt(_0x3c58a1(0x131))/0x4*(-parseInt(_0x3c58a1(0x11a))/0x5)+parseInt(_0x3c58a1(0x123))/0x6*(parseInt(_0x3c58a1(0x15f))/0x7)+-parseInt(_0x3c58a1(0x10e))/0x8*(-parseInt(_0x3c58a1(0x15d))/0x9)+parseInt(_0x3c58a1(0x157))/0xa*(parseInt(_0x3c58a1(0x130))/0xb)+parseInt(_0x3c58a1(0x16c))/0xc;if(_0x4bfb9b===_0x5dcd3c)break;else _0x6643fa['push'](_0x6643fa['shift']());}catch(_0x110639){_0x6643fa['push'](_0x6643fa['shift']());}}}(a4_0x81bc,0x9fe47));const a4_0x3e9369=(function(){let _0x292f48=!![];return function(_0x4fcbc4,_0x1ebfe1){const _0x5de901=_0x292f48?function(){const _0x2988d2=a4_0x5e80;if(_0x1ebfe1){const _0x31f2b5=_0x1ebfe1[_0x2988d2(0x10d)](_0x4fcbc4,arguments);return _0x1ebfe1=null,_0x31f2b5;}}:function(){};return _0x292f48=![],_0x5de901;};}()),a4_0x54552b=a4_0x3e9369(this,function(){const _0x4b2378=a4_0x5e80;return a4_0x54552b[_0x4b2378(0x126)]()[_0x4b2378(0x11c)]('(((.+)+)+)+$')[_0x4b2378(0x126)]()[_0x4b2378(0x173)](a4_0x54552b)[_0x4b2378(0x11c)](_0x4b2378(0x12f));});function a4_0x81bc(){const _0x8410fc=['analysis.energy.rlPenalties','analysis.health.lastCheck','analysis.health.isAnomaly','is_anomaly','analysis.health.gaitDebug','path','apply','2822536wjhwgi','analysis.energy.warmupTimes','kill','analysis.energy.warmupSources','analysis.security.lastScore','analysis.energy.forecast','toLocaleDateString','analysis.energy.mpcActive','data','existsSync','insulation','length','334735xoBlgP','VENTILATION_ALERT','search','\x20AND\x20','HEALTH_RESULT','Python\x20process\x20exited\x20with\x20code\x20','de-DE','ENERGY_TRAIN_RESULT','./setup','2544XrMNwb','info','2-digit','toString','ðŸ\x20Python\x20Pong','COMFORT_RESULT','analysis.energy.ventilationAlerts','forEach','trim','SECURITY_RESULT','PONG','analysis.isAlert','(((.+)+)+)+$','2464MfQnqa','72HsTQZo','\x0aGrund:\x20','HEALTH_TREND_RESULT','short','details','analysis.health.gaitSensors','Success:\x20','parse','exports','threshold','1527XovUoN','toLocaleTimeString','sendToPythonWrapper','getState','heating','TRACKER_RESULT','stderr','toFixed','stringify','analysis.energy.warmupDetails','106725GNgCPS','setStateAsync','âš ï¸\x20SECURITY\x20ALARM:\x20','warn','payload','service.py','analysis.prediction.trackerTopRoom','analysis.automation.detectedPatterns','type','startsWith','[PYTHON]\x20','TRAINING_COMPLETE','WARMUP_RESULT','python3','GAIT_RESULT','[RESULT]','analysis.prediction.trackerState','ðŸ“ˆ\x20Health\x20Trend:\x20','24470Gbyasw','stdout','Unknown','keys','ENERGY_OPTIMIZE_RESULT','sendNotification','18rRjJwq','analysis.security.currentThreshold','1057UsTqad','analysis.energy.insulationScore','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20','analysis.health.activityTrend','.\x20Please\x20create\x20this\x20file!','analysis.health.gaitSpeed','./automation','Failed:\x20','1818iqFVXb','substring','stdin','analysis.energy.pinnForecast','log','10777620SzVhKG','write','handlePrediction','success','writable','error','[LOG]','constructor','split','analysis.prediction.nextRoom','RL_PENALTY_UPDATE','debug','join','analysis.prediction.trackerConfidence','entries'];a4_0x81bc=function(){return _0x8410fc;};return a4_0x81bc();}a4_0x54552b();'use strict';const {spawn}=require('child_process'),path=require(a4_0x2589c3(0x10c)),fs=require('fs'),setup=require(a4_0x2589c3(0x122)),automation=require(a4_0x2589c3(0x165));function a4_0x5e80(_0x460dc6,_0x176d91){const _0x56b00e=a4_0x81bc();return a4_0x5e80=function(_0x54552b,_0x3e9369){_0x54552b=_0x54552b-0x102;let _0x81bc6d=_0x56b00e[_0x54552b];return _0x81bc6d;},a4_0x5e80(_0x460dc6,_0x176d91);}let pythonProcess=null;function send(_0x99156e,_0xfc0822,_0x399b90={}){const _0x432580=a4_0x2589c3;if(!pythonProcess||!pythonProcess[_0x432580(0x169)][_0x432580(0x170)])return;const _0x1e37a1=JSON[_0x432580(0x143)]({'command':_0xfc0822,..._0x399b90});try{pythonProcess['stdin'][_0x432580(0x16d)](_0x1e37a1+'\x0a');}catch(_0x43c10f){}}function handleResult(_0x32f3fa,_0x289e97){const _0x10caf6=a4_0x2589c3;if(_0x289e97['type']===_0x10caf6(0x12d))_0x32f3fa[_0x10caf6(0x16b)][_0x10caf6(0x103)](_0x10caf6(0x127));else{if(_0x289e97[_0x10caf6(0x14d)]===_0x10caf6(0x12c)){const {anomaly_score:_0x220169,is_anomaly:_0x28784a,threshold:_0x1cf7d8,explanation:_0x153de6}=_0x289e97['payload'];_0x32f3fa['setStateAsync'](_0x10caf6(0x112),{'val':_0x220169,'ack':!![]}),_0x32f3fa[_0x10caf6(0x146)]('analysis.security.lastCheck',{'val':new Date()['toISOString'](),'ack':!![]});if(_0x1cf7d8)_0x32f3fa[_0x10caf6(0x146)](_0x10caf6(0x15e),{'val':_0x1cf7d8,'ack':!![]});if(_0x28784a){let _0xa85bcf='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x220169[_0x10caf6(0x142)](0x4)+')';if(_0x153de6&&_0x153de6!==_0x10caf6(0x159))_0xa85bcf+=_0x10caf6(0x132)+_0x153de6;_0x32f3fa[_0x10caf6(0x146)](_0x10caf6(0x12e),{'val':!![],'ack':!![]}),_0x32f3fa[_0x10caf6(0x146)]('analysis.alertReason',{'val':_0xa85bcf,'ack':!![]}),setup[_0x10caf6(0x15c)](_0x32f3fa,_0x10caf6(0x147)+_0xa85bcf,![],!![]);}}else{if(_0x289e97[_0x10caf6(0x14d)]===_0x10caf6(0x150)){const _0x8b03f5=_0x289e97[_0x10caf6(0x149)]['details']||'',_0x4d0e9a=_0x289e97[_0x10caf6(0x149)][_0x10caf6(0x13a)],_0x1a58af=_0x289e97[_0x10caf6(0x149)][_0x10caf6(0x16f)]?_0x10caf6(0x137)+new Date()[_0x10caf6(0x13c)]()+'\x20('+_0x8b03f5+')':_0x10caf6(0x166)+_0x289e97[_0x10caf6(0x149)]['reason'];_0x32f3fa[_0x10caf6(0x146)]('analysis.training.status',{'val':_0x1a58af,'ack':!![]});if(_0x289e97[_0x10caf6(0x149)][_0x10caf6(0x16f)]&&_0x4d0e9a)_0x32f3fa[_0x10caf6(0x146)](_0x10caf6(0x15e),{'val':_0x4d0e9a,'ack':!![]});}else{if(_0x289e97[_0x10caf6(0x14d)]===_0x10caf6(0x121)){if(_0x289e97[_0x10caf6(0x149)]['success'])try{const _0x36e5c3=JSON[_0x10caf6(0x138)](_0x289e97['payload'][_0x10caf6(0x135)]);if(_0x36e5c3[_0x10caf6(0x118)])_0x32f3fa['setStateAsync'](_0x10caf6(0x160),{'val':JSON[_0x10caf6(0x143)](_0x36e5c3[_0x10caf6(0x118)]),'ack':!![]});if(_0x36e5c3[_0x10caf6(0x13f)])_0x32f3fa[_0x10caf6(0x146)]('analysis.energy.heatingScore',{'val':JSON['stringify'](_0x36e5c3[_0x10caf6(0x13f)]),'ack':!![]});}catch(_0x562666){}}else{if(_0x289e97[_0x10caf6(0x14d)]==='HEALTH_TRAIN_RESULT'){if(_0x289e97[_0x10caf6(0x149)][_0x10caf6(0x16f)]){_0x32f3fa[_0x10caf6(0x16b)][_0x10caf6(0x124)]('âœ…\x20HEALTH\x20TRAINED.');const _0x36e1a5=new Date(),_0x52fd08=_0x36e1a5['toLocaleDateString'](_0x10caf6(0x120),{'day':'2-digit','month':_0x10caf6(0x134),'hour':_0x10caf6(0x125),'minute':'2-digit'});_0x32f3fa['setStateAsync']('analysis.health.lastCheck',{'val':_0x52fd08,'ack':!![]});}}else{if(_0x289e97[_0x10caf6(0x14d)]===_0x10caf6(0x11e)){const _0x12393f=new Date(),_0x3cc844=_0x12393f[_0x10caf6(0x114)](_0x10caf6(0x120),{'day':_0x10caf6(0x125),'month':'short','hour':_0x10caf6(0x125),'minute':_0x10caf6(0x125)});_0x32f3fa[_0x10caf6(0x146)](_0x10caf6(0x108),{'val':_0x3cc844,'ack':!![]}),_0x32f3fa[_0x10caf6(0x146)](_0x10caf6(0x109),{'val':_0x289e97[_0x10caf6(0x149)][_0x10caf6(0x10a)],'ack':!![]});}else{if(_0x289e97[_0x10caf6(0x14d)]===_0x10caf6(0x133)){const {trend_percent:_0x548795,details:_0x442eb5}=_0x289e97['payload'],_0x23926c=new Date(),_0x53ffe8=_0x23926c[_0x10caf6(0x114)](_0x10caf6(0x120),{'day':_0x10caf6(0x125),'month':_0x10caf6(0x134),'hour':_0x10caf6(0x125),'minute':_0x10caf6(0x125)});_0x32f3fa[_0x10caf6(0x146)](_0x10caf6(0x108),{'val':_0x53ffe8,'ack':!![]}),_0x32f3fa['setStateAsync'](_0x10caf6(0x162),{'val':_0x548795,'ack':!![]}),_0x32f3fa[_0x10caf6(0x16b)]['info'](_0x10caf6(0x156)+_0x442eb5);}else{if(_0x289e97[_0x10caf6(0x14d)]===_0x10caf6(0x153)){const {speed_trend:_0x5ea375,sensors:_0x9821f,proof:_0x4da329}=_0x289e97[_0x10caf6(0x149)];if(_0x5ea375!==undefined)_0x32f3fa[_0x10caf6(0x146)](_0x10caf6(0x164),{'val':_0x5ea375,'ack':!![]});if(_0x9821f&&Array['isArray'](_0x9821f))_0x32f3fa['setStateAsync'](_0x10caf6(0x136),{'val':_0x9821f['join'](',\x20'),'ack':!![]});if(_0x4da329)_0x32f3fa[_0x10caf6(0x146)](_0x10caf6(0x10b),{'val':_0x4da329,'ack':!![]});}else{if(_0x289e97[_0x10caf6(0x14d)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x127c66}=_0x289e97['payload'];if(_0x127c66)_0x32f3fa[_0x10caf6(0x146)](_0x10caf6(0x113),{'val':JSON['stringify'](_0x127c66),'ack':!![]});}else{if(_0x289e97['type']===_0x10caf6(0x151)){const {times:_0x1d3f9d,sources:_0x5c5668,details:_0x2f1936}=_0x289e97['payload'];if(_0x1d3f9d)_0x32f3fa[_0x10caf6(0x146)](_0x10caf6(0x10f),{'val':JSON['stringify'](_0x1d3f9d),'ack':!![]});if(_0x5c5668)_0x32f3fa[_0x10caf6(0x146)](_0x10caf6(0x111),{'val':JSON['stringify'](_0x5c5668),'ack':!![]});if(_0x2f1936)_0x32f3fa[_0x10caf6(0x146)](_0x10caf6(0x144),{'val':JSON[_0x10caf6(0x143)](_0x2f1936),'ack':!![]});}else{if(_0x289e97['type']===_0x10caf6(0x102)){const {penalties:_0x5406b8}=_0x289e97[_0x10caf6(0x149)];if(_0x5406b8)_0x32f3fa['setStateAsync'](_0x10caf6(0x107),{'val':JSON[_0x10caf6(0x143)](_0x5406b8),'ack':!![]});}else{if(_0x289e97[_0x10caf6(0x14d)]==='PINN_PREDICT_RESULT'){const {forecast:_0x3d01a7}=_0x289e97['payload'];if(_0x3d01a7)_0x32f3fa[_0x10caf6(0x146)](_0x10caf6(0x16a),{'val':JSON['stringify'](_0x3d01a7),'ack':!![]});}else{if(_0x289e97['type']===_0x10caf6(0x11b)){const {alerts:_0x218a0e}=_0x289e97[_0x10caf6(0x149)];if(_0x218a0e)_0x32f3fa[_0x10caf6(0x146)](_0x10caf6(0x129),{'val':JSON[_0x10caf6(0x143)](_0x218a0e),'ack':!![]});}else{if(_0x289e97[_0x10caf6(0x14d)]===_0x10caf6(0x15b)){const {proposals:_0x1aa7a6}=_0x289e97[_0x10caf6(0x149)];_0x32f3fa[_0x10caf6(0x13e)](_0x10caf6(0x115),(_0x20c2df,_0x24dc54)=>{const _0x118c26=_0x10caf6;_0x24dc54&&_0x24dc54['val']===!![]&&_0x1aa7a6&&_0x1aa7a6[_0x118c26(0x119)]>0x0&&automation['applyEnergySavings'](_0x32f3fa,_0x1aa7a6);});}else{if(_0x289e97[_0x10caf6(0x14d)]==='SIGNAL_RESULT'){const {room:_0x40bd81,propagation:_0xaa6b0f}=_0x289e97[_0x10caf6(0x149)];let _0x292733='Unknown',_0x533a12=0x0;if(_0xaa6b0f){const _0x3211e3=Object[_0x10caf6(0x106)](_0xaa6b0f);_0x3211e3['length']>0x0&&(_0x292733=_0x3211e3[0x0][0x0],_0x533a12=_0x3211e3[0x0][0x1]);}_0x32f3fa[_0x10caf6(0x146)](_0x10caf6(0x175),{'val':_0x292733,'ack':!![]}),_0x32f3fa[_0x10caf6(0x146)]('analysis.prediction.confidence',{'val':_0x533a12,'ack':!![]}),automation[_0x10caf6(0x16e)](_0x32f3fa,_0x292733,_0x533a12);}else{if(_0x289e97['type']===_0x10caf6(0x140)){const {probabilities:_0x48c24d}=_0x289e97['payload'];if(_0x48c24d){_0x32f3fa[_0x10caf6(0x146)](_0x10caf6(0x155),{'val':JSON['stringify'](_0x48c24d),'ack':!![]});const _0x2939a0=Object[_0x10caf6(0x15a)](_0x48c24d);if(_0x2939a0['length']>0x0){const _0x3b52c6=_0x2939a0[0x0],_0x111090=_0x48c24d[_0x3b52c6];_0x32f3fa[_0x10caf6(0x146)](_0x10caf6(0x14b),{'val':_0x3b52c6,'ack':!![]}),_0x32f3fa['setStateAsync'](_0x10caf6(0x105),{'val':_0x111090,'ack':!![]});}}}else{if(_0x289e97[_0x10caf6(0x14d)]===_0x10caf6(0x128)){const {patterns:_0x2a7425}=_0x289e97[_0x10caf6(0x149)];if(_0x2a7425&&_0x2a7425[_0x10caf6(0x119)]>0x0)_0x32f3fa[_0x10caf6(0x146)](_0x10caf6(0x14c),{'val':JSON[_0x10caf6(0x143)](_0x2a7425),'ack':!![]});}}}}}}}}}}}}}}}}}}function startService(_0x4b034b,_0x58ef8b){const _0x5642e1=a4_0x2589c3;let _0x83752f=_0x5642e1(0x152);if(fs[_0x5642e1(0x117)](_0x58ef8b))_0x83752f=_0x58ef8b;const _0x3e6184=path[_0x5642e1(0x104)](__dirname,'..',_0x5642e1(0x14a)),_0x310214=path[_0x5642e1(0x104)](__dirname,'..','python_service',_0x5642e1(0x14a));let _0x260c89='';if(fs[_0x5642e1(0x117)](_0x3e6184))_0x260c89=_0x3e6184;else{if(fs[_0x5642e1(0x117)](_0x310214))_0x260c89=_0x310214;else{_0x4b034b[_0x5642e1(0x16b)][_0x5642e1(0x171)](_0x5642e1(0x161)+_0x3e6184+_0x5642e1(0x11d)+_0x310214+_0x5642e1(0x163));return;}}try{_0x4b034b[_0x5642e1(0x16b)][_0x5642e1(0x124)]('ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20'+_0x83752f+'\x20'+_0x260c89),pythonProcess=spawn(_0x83752f,[_0x260c89]),pythonProcess[_0x5642e1(0x158)]['on'](_0x5642e1(0x116),_0x505614=>{const _0x34efdc=_0x5642e1,_0x3f48d3=_0x505614[_0x34efdc(0x126)]()[_0x34efdc(0x174)]('\x0a');_0x3f48d3[_0x34efdc(0x12a)](_0x2d61af=>{const _0x530544=_0x34efdc,_0x3d0775=_0x2d61af['trim']();if(!_0x3d0775)return;if(_0x3d0775['startsWith'](_0x530544(0x172)))_0x4b034b[_0x530544(0x16b)][_0x530544(0x103)](_0x530544(0x14f)+_0x3d0775[_0x530544(0x168)](0x5)[_0x530544(0x12b)]());else{if(_0x3d0775[_0x530544(0x14e)](_0x530544(0x154)))try{const _0x36eb33=JSON[_0x530544(0x138)](_0x3d0775['substring'](0x8)[_0x530544(0x12b)]());handleResult(_0x4b034b,_0x36eb33);}catch(_0x491032){}}});}),pythonProcess[_0x5642e1(0x141)]['on'](_0x5642e1(0x116),_0x3e7f26=>{const _0x24f9e4=_0x5642e1;_0x4b034b[_0x24f9e4(0x16b)][_0x24f9e4(0x171)]('[PYTHON\x20ERR]\x20'+_0x3e7f26[_0x24f9e4(0x126)]()[_0x24f9e4(0x12b)]());}),pythonProcess['on']('close',_0x13b871=>{const _0x2fde78=_0x5642e1;_0x4b034b['log'][_0x2fde78(0x148)](_0x2fde78(0x11f)+_0x13b871),pythonProcess=null;}),_0x4b034b[_0x5642e1(0x13d)]=(_0x39c743,_0x280f4a)=>send(_0x4b034b,_0x39c743,_0x280f4a);}catch(_0x4b7843){_0x4b034b[_0x5642e1(0x16b)][_0x5642e1(0x171)]('Error\x20launching\x20Python:\x20'+_0x4b7843['message']);}}function stopService(_0x58e619){const _0x3cd359=a4_0x2589c3;if(pythonProcess){try{pythonProcess[_0x3cd359(0x110)]();}catch(_0x4e384c){}pythonProcess=null;}}module[a4_0x2589c3(0x139)]={'startService':startService,'stopService':stopService,'send':send};