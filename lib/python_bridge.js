const a4_0x74acd3=a4_0x1562;(function(_0x3a7875,_0x227614){const _0x1345ec=a4_0x1562,_0xc8421d=_0x3a7875();while(!![]){try{const _0x2bcd15=parseInt(_0x1345ec(0xeb))/0x1+-parseInt(_0x1345ec(0x104))/0x2+parseInt(_0x1345ec(0xef))/0x3+-parseInt(_0x1345ec(0x122))/0x4+-parseInt(_0x1345ec(0x126))/0x5+-parseInt(_0x1345ec(0xe6))/0x6+parseInt(_0x1345ec(0x128))/0x7;if(_0x2bcd15===_0x227614)break;else _0xc8421d['push'](_0xc8421d['shift']());}catch(_0x4ed943){_0xc8421d['push'](_0xc8421d['shift']());}}}(a4_0x2555,0x6c057));const a4_0x4db026=(function(){let _0x51f6fa=!![];return function(_0x6de681,_0x5644a2){const _0x4f9fe8=_0x51f6fa?function(){const _0x59b594=a4_0x1562;if(_0x5644a2){const _0x1b4514=_0x5644a2[_0x59b594(0xe3)](_0x6de681,arguments);return _0x5644a2=null,_0x1b4514;}}:function(){};return _0x51f6fa=![],_0x4f9fe8;};}()),a4_0x43c7af=a4_0x4db026(this,function(){const _0x123ce4=a4_0x1562;return a4_0x43c7af[_0x123ce4(0xed)]()[_0x123ce4(0x107)](_0x123ce4(0x115))[_0x123ce4(0xed)]()['constructor'](a4_0x43c7af)[_0x123ce4(0x107)](_0x123ce4(0x115));});function a4_0x1562(_0x4700a4,_0x34c01c){const _0x3d480b=a4_0x2555();return a4_0x1562=function(_0x43c7af,_0x4db026){_0x43c7af=_0x43c7af-0xce;let _0x255521=_0x3d480b[_0x43c7af];return _0x255521;},a4_0x1562(_0x4700a4,_0x34c01c);}a4_0x43c7af();'use strict';const {spawn}=require(a4_0x74acd3(0x102)),path=require(a4_0x74acd3(0x118)),fs=require('fs'),setup=require(a4_0x74acd3(0xd0)),automation=require(a4_0x74acd3(0xf1));let pythonProcess=null;function a4_0x2555(){const _0x3594af=['1665352KNnRSE','[RESULT]','entries','error','2427630veriQu','\x0aGrund:\x20','18383435WgxLmp','message','analysis.health.isAnomaly','reason','handlePrediction','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','existsSync','./setup','info','analysis.energy.mpcActive','SIGNAL_RESULT','length','trim','analysis.security.lastCheck','success','analysis.prediction.trackerConfidence','Failed:\x20','join','RL_PENALTY_UPDATE','analysis.energy.warmupTimes','substring','details','type','debug','analysis.prediction.confidence','threshold','apply','close','kill','5217846NywBXl','analysis.alertReason','analysis.security.currentThreshold','python_service','PINN_PREDICT_RESULT','221792mBGvlB','stdin','toString','toLocaleTimeString','324537LdUFQD','ðŸ\x20Python\x20Pong','./automation','analysis.energy.rlPenalties','ENERGY_PREDICT_RESULT','python3','WARMUP_RESULT','log','toISOString','write','insulation','Unknown','toFixed','is_anomaly','analysis.training.status','analysis.energy.pinnForecast','ENERGY_TRAIN_RESULT','analysis.prediction.nextRoom','stdout','child_process','payload','1484432UphlWL','analysis.energy.heatingScore','startsWith','search','analysis.energy.forecast','GAIT_RESULT','HEALTH_TRAIN_RESULT','analysis.energy.insulationScore','analysis.prediction.trackerTopRoom','sendNotification','service.py','split','HEALTH_RESULT','forEach','analysis.health.gaitSpeed','setStateAsync','VENTILATION_ALERT','(((.+)+)+)+$','val','writable','path','ENERGY_OPTIMIZE_RESULT','stringify','analysis.health.lastCheck','analysis.security.lastScore','data','heating','keys','parse','Error\x20launching\x20Python:\x20'];a4_0x2555=function(){return _0x3594af;};return a4_0x2555();}function send(_0x1e3b72,_0x1185c5,_0x41bf17={}){const _0x460d19=a4_0x74acd3;if(!pythonProcess||!pythonProcess[_0x460d19(0xec)][_0x460d19(0x117)])return;const _0x869f00=JSON[_0x460d19(0x11a)]({'command':_0x1185c5,..._0x41bf17});try{pythonProcess[_0x460d19(0xec)][_0x460d19(0xf8)](_0x869f00+'\x0a');}catch(_0x3d66b9){}}function handleResult(_0x41d61c,_0x1186cd){const _0x33ddf4=a4_0x74acd3;if(_0x1186cd[_0x33ddf4(0xdf)]==='PONG')_0x41d61c[_0x33ddf4(0xf6)][_0x33ddf4(0xe0)](_0x33ddf4(0xf0));else{if(_0x1186cd[_0x33ddf4(0xdf)]==='SECURITY_RESULT'){const {anomaly_score:_0x129664,is_anomaly:_0x1f1e6c,threshold:_0x5c971c,explanation:_0x4f1238}=_0x1186cd['payload'];_0x41d61c[_0x33ddf4(0x113)](_0x33ddf4(0x11c),{'val':_0x129664,'ack':!![]}),_0x41d61c[_0x33ddf4(0x113)](_0x33ddf4(0xd6),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x5c971c)_0x41d61c[_0x33ddf4(0x113)]('analysis.security.currentThreshold',{'val':_0x5c971c,'ack':!![]});if(_0x1f1e6c){let _0x4c6234=_0x33ddf4(0xce)+_0x129664[_0x33ddf4(0xfb)](0x4)+')';if(_0x4f1238&&_0x4f1238!==_0x33ddf4(0xfa))_0x4c6234+=_0x33ddf4(0x127)+_0x4f1238;_0x41d61c[_0x33ddf4(0x113)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x41d61c[_0x33ddf4(0x113)](_0x33ddf4(0xe7),{'val':_0x4c6234,'ack':!![]}),setup[_0x33ddf4(0x10d)](_0x41d61c,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x4c6234,![],!![]);}}else{if(_0x1186cd[_0x33ddf4(0xdf)]==='TRAINING_COMPLETE'){const _0x28d8ab=_0x1186cd[_0x33ddf4(0x103)][_0x33ddf4(0xde)]||'',_0x3eb3f3=_0x1186cd[_0x33ddf4(0x103)][_0x33ddf4(0xe2)],_0x3b996f=_0x1186cd['payload'][_0x33ddf4(0xd7)]?'Success:\x20'+new Date()[_0x33ddf4(0xee)]()+'\x20('+_0x28d8ab+')':_0x33ddf4(0xd9)+_0x1186cd['payload'][_0x33ddf4(0x12b)];_0x41d61c[_0x33ddf4(0x113)](_0x33ddf4(0xfd),{'val':_0x3b996f,'ack':!![]});if(_0x1186cd[_0x33ddf4(0x103)][_0x33ddf4(0xd7)]&&_0x3eb3f3)_0x41d61c[_0x33ddf4(0x113)](_0x33ddf4(0xe8),{'val':_0x3eb3f3,'ack':!![]});}else{if(_0x1186cd[_0x33ddf4(0xdf)]===_0x33ddf4(0xff)){if(_0x1186cd[_0x33ddf4(0x103)][_0x33ddf4(0xd7)])try{const _0x1fa3cf=JSON[_0x33ddf4(0x120)](_0x1186cd[_0x33ddf4(0x103)][_0x33ddf4(0xde)]);if(_0x1fa3cf[_0x33ddf4(0xf9)])_0x41d61c[_0x33ddf4(0x113)](_0x33ddf4(0x10b),{'val':JSON[_0x33ddf4(0x11a)](_0x1fa3cf['insulation']),'ack':!![]});if(_0x1fa3cf[_0x33ddf4(0x11e)])_0x41d61c[_0x33ddf4(0x113)](_0x33ddf4(0x105),{'val':JSON[_0x33ddf4(0x11a)](_0x1fa3cf[_0x33ddf4(0x11e)]),'ack':!![]});}catch(_0x2821d5){}}else{if(_0x1186cd['type']===_0x33ddf4(0x10a)){if(_0x1186cd[_0x33ddf4(0x103)]['success'])_0x41d61c[_0x33ddf4(0xf6)][_0x33ddf4(0xd1)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x1186cd[_0x33ddf4(0xdf)]===_0x33ddf4(0x110))_0x41d61c[_0x33ddf4(0x113)](_0x33ddf4(0x11b),{'val':new Date()[_0x33ddf4(0xf7)](),'ack':!![]}),_0x41d61c[_0x33ddf4(0x113)](_0x33ddf4(0x12a),{'val':_0x1186cd[_0x33ddf4(0x103)][_0x33ddf4(0xfc)],'ack':!![]});else{if(_0x1186cd[_0x33ddf4(0xdf)]===_0x33ddf4(0x109)){const {speed_trend:_0x203457}=_0x1186cd[_0x33ddf4(0x103)];if(_0x203457!==undefined)_0x41d61c[_0x33ddf4(0x113)](_0x33ddf4(0x112),{'val':_0x203457,'ack':!![]});}else{if(_0x1186cd[_0x33ddf4(0xdf)]===_0x33ddf4(0xf3)){const {forecast:_0x3f672b}=_0x1186cd['payload'];if(_0x3f672b)_0x41d61c['setStateAsync'](_0x33ddf4(0x108),{'val':JSON[_0x33ddf4(0x11a)](_0x3f672b),'ack':!![]});}else{if(_0x1186cd['type']===_0x33ddf4(0xf5)){const {times:_0x2f6867,sources:_0x64c89d,details:_0x1bf3e2}=_0x1186cd[_0x33ddf4(0x103)];if(_0x2f6867)_0x41d61c[_0x33ddf4(0x113)](_0x33ddf4(0xdc),{'val':JSON[_0x33ddf4(0x11a)](_0x2f6867),'ack':!![]});if(_0x64c89d)_0x41d61c[_0x33ddf4(0x113)]('analysis.energy.warmupSources',{'val':JSON[_0x33ddf4(0x11a)](_0x64c89d),'ack':!![]});if(_0x1bf3e2)_0x41d61c[_0x33ddf4(0x113)]('analysis.energy.warmupDetails',{'val':JSON['stringify'](_0x1bf3e2),'ack':!![]});}else{if(_0x1186cd['type']===_0x33ddf4(0xdb)){const {penalties:_0x729502}=_0x1186cd[_0x33ddf4(0x103)];if(_0x729502)_0x41d61c[_0x33ddf4(0x113)](_0x33ddf4(0xf2),{'val':JSON[_0x33ddf4(0x11a)](_0x729502),'ack':!![]});}else{if(_0x1186cd[_0x33ddf4(0xdf)]===_0x33ddf4(0xea)){const {forecast:_0x242ccf}=_0x1186cd[_0x33ddf4(0x103)];if(_0x242ccf)_0x41d61c[_0x33ddf4(0x113)](_0x33ddf4(0xfe),{'val':JSON[_0x33ddf4(0x11a)](_0x242ccf),'ack':!![]});}else{if(_0x1186cd[_0x33ddf4(0xdf)]===_0x33ddf4(0x114)){const {alerts:_0x4e7345}=_0x1186cd['payload'];if(_0x4e7345)_0x41d61c[_0x33ddf4(0x113)]('analysis.energy.ventilationAlerts',{'val':JSON['stringify'](_0x4e7345),'ack':!![]});}else{if(_0x1186cd[_0x33ddf4(0xdf)]===_0x33ddf4(0x119)){const {proposals:_0x364f74}=_0x1186cd[_0x33ddf4(0x103)];_0x41d61c['getState'](_0x33ddf4(0xd2),(_0x3c92f0,_0x280e50)=>{const _0x3a505c=_0x33ddf4;_0x280e50&&_0x280e50[_0x3a505c(0x116)]===!![]&&_0x364f74&&_0x364f74[_0x3a505c(0xd4)]>0x0&&automation['applyEnergySavings'](_0x41d61c,_0x364f74);});}else{if(_0x1186cd[_0x33ddf4(0xdf)]===_0x33ddf4(0xd3)){const {room:_0x26cd32,propagation:_0x14574c}=_0x1186cd[_0x33ddf4(0x103)];let _0x42f964='Unknown',_0x487f50=0x0;if(_0x14574c){const _0x1c9653=Object[_0x33ddf4(0x124)](_0x14574c);_0x1c9653[_0x33ddf4(0xd4)]>0x0&&(_0x42f964=_0x1c9653[0x0][0x0],_0x487f50=_0x1c9653[0x0][0x1]);}_0x41d61c[_0x33ddf4(0x113)](_0x33ddf4(0x100),{'val':_0x42f964,'ack':!![]}),_0x41d61c[_0x33ddf4(0x113)](_0x33ddf4(0xe1),{'val':_0x487f50,'ack':!![]}),automation[_0x33ddf4(0x12c)](_0x41d61c,_0x42f964,_0x487f50);}else{if(_0x1186cd['type']==='TRACKER_RESULT'){const {probabilities:_0x418535}=_0x1186cd['payload'];if(_0x418535){_0x41d61c[_0x33ddf4(0x113)]('analysis.prediction.trackerState',{'val':JSON[_0x33ddf4(0x11a)](_0x418535),'ack':!![]});const _0xd06ac9=Object[_0x33ddf4(0x11f)](_0x418535);if(_0xd06ac9[_0x33ddf4(0xd4)]>0x0){const _0x1af0d4=_0xd06ac9[0x0],_0x53b351=_0x418535[_0x1af0d4];_0x41d61c[_0x33ddf4(0x113)](_0x33ddf4(0x10c),{'val':_0x1af0d4,'ack':!![]}),_0x41d61c[_0x33ddf4(0x113)](_0x33ddf4(0xd8),{'val':_0x53b351,'ack':!![]});}}}else{if(_0x1186cd['type']==='COMFORT_RESULT'){const {patterns:_0x588849}=_0x1186cd[_0x33ddf4(0x103)];if(_0x588849&&_0x588849[_0x33ddf4(0xd4)]>0x0)_0x41d61c[_0x33ddf4(0x113)]('analysis.automation.detectedPatterns',{'val':JSON[_0x33ddf4(0x11a)](_0x588849),'ack':!![]});}}}}}}}}}}}}}}}}}function startService(_0x20b8bb,_0x24b84d){const _0x559244=a4_0x74acd3;let _0x2f08b6=_0x559244(0xf4);if(fs[_0x559244(0xcf)](_0x24b84d))_0x2f08b6=_0x24b84d;try{const _0x22994d=path[_0x559244(0xda)](__dirname,'..',_0x559244(0xe9),_0x559244(0x10e));pythonProcess=spawn(_0x2f08b6,[_0x22994d]),pythonProcess[_0x559244(0x101)]['on'](_0x559244(0x11d),_0x477b01=>{const _0x4c4f7a=_0x559244,_0x11d37d=_0x477b01[_0x4c4f7a(0xed)]()[_0x4c4f7a(0x10f)]('\x0a');_0x11d37d[_0x4c4f7a(0x111)](_0x585132=>{const _0x185393=_0x4c4f7a,_0x2d783e=_0x585132['trim']();if(!_0x2d783e)return;if(_0x2d783e[_0x185393(0x106)]('[LOG]'))_0x20b8bb[_0x185393(0xf6)][_0x185393(0xe0)]('[PYTHON]\x20'+_0x2d783e[_0x185393(0xdd)](0x5)[_0x185393(0xd5)]());else{if(_0x2d783e[_0x185393(0x106)](_0x185393(0x123)))try{const _0x560558=JSON['parse'](_0x2d783e[_0x185393(0xdd)](0x8)[_0x185393(0xd5)]());handleResult(_0x20b8bb,_0x560558);}catch(_0x34eca1){}}});}),pythonProcess['on'](_0x559244(0xe4),_0x1b0670=>{pythonProcess=null;}),_0x20b8bb['sendToPythonWrapper']=(_0x38394b,_0x2c9545)=>send(_0x20b8bb,_0x38394b,_0x2c9545);}catch(_0x395daf){_0x20b8bb[_0x559244(0xf6)][_0x559244(0x125)](_0x559244(0x121)+_0x395daf[_0x559244(0x129)]);}}function stopService(_0x13849b){const _0x38fac1=a4_0x74acd3;if(pythonProcess){try{pythonProcess[_0x38fac1(0xe5)]();}catch(_0x668a8d){}pythonProcess=null;}}module['exports']={'startService':startService,'stopService':stopService,'send':send};