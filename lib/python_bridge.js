const a4_0x20951b=a4_0x32df;(function(_0x99eb57,_0x2a19cd){const _0x54cb05=a4_0x32df,_0x528373=_0x99eb57();while(!![]){try{const _0x364c41=-parseInt(_0x54cb05(0x124))/0x1+-parseInt(_0x54cb05(0x128))/0x2*(parseInt(_0x54cb05(0x167))/0x3)+-parseInt(_0x54cb05(0x166))/0x4+parseInt(_0x54cb05(0x116))/0x5*(parseInt(_0x54cb05(0x11a))/0x6)+parseInt(_0x54cb05(0x13a))/0x7+-parseInt(_0x54cb05(0x114))/0x8+parseInt(_0x54cb05(0x130))/0x9*(parseInt(_0x54cb05(0x143))/0xa);if(_0x364c41===_0x2a19cd)break;else _0x528373['push'](_0x528373['shift']());}catch(_0x161eab){_0x528373['push'](_0x528373['shift']());}}}(a4_0x4efd,0x8c2ca));function a4_0x4efd(){const _0x50809d=['success','[PYTHON]\x20','analysis.energy.heatingScore','analysis.security.lastCheck','78940Qoexor','python3','toLocaleTimeString','analysis.energy.forecast','sendToPythonWrapper','data','analysis.energy.warmupTimes','Unknown','[LOG]','parse','./automation','ENERGY_OPTIMIZE_RESULT','message','analysis.security.currentThreshold','âœ…\x20HEALTH\x20TRAINED.','analysis.prediction.confidence','analysis.prediction.trackerState','reason','analysis.energy.warmupDetails','is_anomaly','ðŸ\x20Python\x20Pong','type','stdin','keys','./setup','analysis.energy.rlPenalties','PONG','analysis.health.lastCheck','GAIT_RESULT','forEach','Failed:\x20','COMFORT_RESULT','heating','debug','val','3036752ytjTuD','233826kQWgvg','toFixed','kill','writable','stringify','service.py','join','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','HEALTH_RESULT','insulation','getState','\x0aGrund:\x20','TRACKER_RESULT','toString','(((.+)+)+)+$','length','8032224DlEGIY','analysis.prediction.nextRoom','902555tBHUud','payload','analysis.automation.detectedPatterns','TRAINING_COMPLETE','18FeoqKr','error','constructor','analysis.energy.pinnForecast','trim','âš ï¸\x20SECURITY\x20ALARM:\x20','log','substring','info','existsSync','1125473oVcjzE','startsWith','analysis.energy.mpcActive','HEALTH_TRAIN_RESULT','18TePwbR','exports','SIGNAL_RESULT','analysis.energy.insulationScore','VENTILATION_ALERT','search','python_service','write','3546gQltBu','toISOString','setStateAsync','split','applyEnergySavings','[RESULT]','handlePrediction','entries','close','stdout','3587864LzeeBg','analysis.prediction.trackerTopRoom','apply','ENERGY_PREDICT_RESULT','path'];a4_0x4efd=function(){return _0x50809d;};return a4_0x4efd();}const a4_0x5ed2c=(function(){let _0x292410=!![];return function(_0x378f5a,_0x268385){const _0x4b7abd=_0x292410?function(){const _0x1844c7=a4_0x32df;if(_0x268385){const _0x339cca=_0x268385[_0x1844c7(0x13c)](_0x378f5a,arguments);return _0x268385=null,_0x339cca;}}:function(){};return _0x292410=![],_0x4b7abd;};}()),a4_0x858fb=a4_0x5ed2c(this,function(){const _0x3e634b=a4_0x32df;return a4_0x858fb[_0x3e634b(0x174)]()['search'](_0x3e634b(0x175))[_0x3e634b(0x174)]()[_0x3e634b(0x11c)](a4_0x858fb)[_0x3e634b(0x12d)](_0x3e634b(0x175));});a4_0x858fb();'use strict';const {spawn}=require('child_process'),path=require(a4_0x20951b(0x13e)),fs=require('fs'),setup=require(a4_0x20951b(0x15b)),automation=require(a4_0x20951b(0x14d));let pythonProcess=null;function send(_0x3b41c7,_0x54fb33,_0x3eec98={}){const _0x49d051=a4_0x20951b;if(!pythonProcess||!pythonProcess[_0x49d051(0x159)][_0x49d051(0x16a)])return;const _0x5209fc=JSON[_0x49d051(0x16b)]({'command':_0x54fb33,..._0x3eec98});try{pythonProcess[_0x49d051(0x159)][_0x49d051(0x12f)](_0x5209fc+'\x0a');}catch(_0x4a1c13){}}function handleResult(_0x3c48c9,_0x418757){const _0xbd1727=a4_0x20951b;if(_0x418757[_0xbd1727(0x158)]===_0xbd1727(0x15d))_0x3c48c9[_0xbd1727(0x120)][_0xbd1727(0x164)](_0xbd1727(0x157));else{if(_0x418757[_0xbd1727(0x158)]==='SECURITY_RESULT'){const {anomaly_score:_0x34ceac,is_anomaly:_0x349efc,threshold:_0x8a679a,explanation:_0x2fc879}=_0x418757['payload'];_0x3c48c9['setStateAsync']('analysis.security.lastScore',{'val':_0x34ceac,'ack':!![]}),_0x3c48c9[_0xbd1727(0x132)](_0xbd1727(0x142),{'val':new Date()[_0xbd1727(0x131)](),'ack':!![]});if(_0x8a679a)_0x3c48c9[_0xbd1727(0x132)](_0xbd1727(0x150),{'val':_0x8a679a,'ack':!![]});if(_0x349efc){let _0x348bcc=_0xbd1727(0x16e)+_0x34ceac[_0xbd1727(0x168)](0x4)+')';if(_0x2fc879&&_0x2fc879!=='Unknown')_0x348bcc+=_0xbd1727(0x172)+_0x2fc879;_0x3c48c9[_0xbd1727(0x132)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x3c48c9[_0xbd1727(0x132)]('analysis.alertReason',{'val':_0x348bcc,'ack':!![]}),setup['sendNotification'](_0x3c48c9,_0xbd1727(0x11f)+_0x348bcc,![],!![]);}}else{if(_0x418757[_0xbd1727(0x158)]===_0xbd1727(0x119)){const _0x158aaf=_0x418757[_0xbd1727(0x117)]['details']||'',_0x515670=_0x418757[_0xbd1727(0x117)]['threshold'],_0x5823e8=_0x418757[_0xbd1727(0x117)][_0xbd1727(0x13f)]?'Success:\x20'+new Date()[_0xbd1727(0x145)]()+'\x20('+_0x158aaf+')':_0xbd1727(0x161)+_0x418757[_0xbd1727(0x117)][_0xbd1727(0x154)];_0x3c48c9[_0xbd1727(0x132)]('analysis.training.status',{'val':_0x5823e8,'ack':!![]});if(_0x418757['payload'][_0xbd1727(0x13f)]&&_0x515670)_0x3c48c9[_0xbd1727(0x132)](_0xbd1727(0x150),{'val':_0x515670,'ack':!![]});}else{if(_0x418757[_0xbd1727(0x158)]==='ENERGY_TRAIN_RESULT'){if(_0x418757[_0xbd1727(0x117)][_0xbd1727(0x13f)])try{const _0x110463=JSON[_0xbd1727(0x14c)](_0x418757['payload']['details']);if(_0x110463[_0xbd1727(0x170)])_0x3c48c9[_0xbd1727(0x132)](_0xbd1727(0x12b),{'val':JSON[_0xbd1727(0x16b)](_0x110463[_0xbd1727(0x170)]),'ack':!![]});if(_0x110463[_0xbd1727(0x163)])_0x3c48c9[_0xbd1727(0x132)](_0xbd1727(0x141),{'val':JSON[_0xbd1727(0x16b)](_0x110463[_0xbd1727(0x163)]),'ack':!![]});}catch(_0x1f35ef){}}else{if(_0x418757[_0xbd1727(0x158)]===_0xbd1727(0x127)){if(_0x418757['payload'][_0xbd1727(0x13f)])_0x3c48c9['log'][_0xbd1727(0x122)](_0xbd1727(0x151));}else{if(_0x418757[_0xbd1727(0x158)]===_0xbd1727(0x16f))_0x3c48c9[_0xbd1727(0x132)](_0xbd1727(0x15e),{'val':new Date()[_0xbd1727(0x131)](),'ack':!![]}),_0x3c48c9[_0xbd1727(0x132)]('analysis.health.isAnomaly',{'val':_0x418757['payload'][_0xbd1727(0x156)],'ack':!![]});else{if(_0x418757[_0xbd1727(0x158)]===_0xbd1727(0x15f)){const {speed_trend:_0x35bc32}=_0x418757[_0xbd1727(0x117)];if(_0x35bc32!==undefined)_0x3c48c9[_0xbd1727(0x132)]('analysis.health.gaitSpeed',{'val':_0x35bc32,'ack':!![]});}else{if(_0x418757[_0xbd1727(0x158)]===_0xbd1727(0x13d)){const {forecast:_0x20d424}=_0x418757[_0xbd1727(0x117)];if(_0x20d424)_0x3c48c9[_0xbd1727(0x132)](_0xbd1727(0x146),{'val':JSON[_0xbd1727(0x16b)](_0x20d424),'ack':!![]});}else{if(_0x418757[_0xbd1727(0x158)]==='WARMUP_RESULT'){const {times:_0x491cc3,sources:_0x4e8dbd,details:_0x4cdbcb}=_0x418757['payload'];if(_0x491cc3)_0x3c48c9[_0xbd1727(0x132)](_0xbd1727(0x149),{'val':JSON['stringify'](_0x491cc3),'ack':!![]});if(_0x4e8dbd)_0x3c48c9['setStateAsync']('analysis.energy.warmupSources',{'val':JSON[_0xbd1727(0x16b)](_0x4e8dbd),'ack':!![]});if(_0x4cdbcb)_0x3c48c9[_0xbd1727(0x132)](_0xbd1727(0x155),{'val':JSON[_0xbd1727(0x16b)](_0x4cdbcb),'ack':!![]});}else{if(_0x418757['type']==='RL_PENALTY_UPDATE'){const {penalties:_0x5989fe}=_0x418757[_0xbd1727(0x117)];if(_0x5989fe)_0x3c48c9[_0xbd1727(0x132)](_0xbd1727(0x15c),{'val':JSON[_0xbd1727(0x16b)](_0x5989fe),'ack':!![]});}else{if(_0x418757['type']==='PINN_PREDICT_RESULT'){const {forecast:_0x236235}=_0x418757[_0xbd1727(0x117)];if(_0x236235)_0x3c48c9[_0xbd1727(0x132)](_0xbd1727(0x11d),{'val':JSON['stringify'](_0x236235),'ack':!![]});}else{if(_0x418757[_0xbd1727(0x158)]===_0xbd1727(0x12c)){const {alerts:_0x561a2e}=_0x418757[_0xbd1727(0x117)];if(_0x561a2e)_0x3c48c9['setStateAsync']('analysis.energy.ventilationAlerts',{'val':JSON[_0xbd1727(0x16b)](_0x561a2e),'ack':!![]});}else{if(_0x418757[_0xbd1727(0x158)]===_0xbd1727(0x14e)){const {proposals:_0xf174a}=_0x418757[_0xbd1727(0x117)];_0x3c48c9[_0xbd1727(0x171)](_0xbd1727(0x126),(_0x1a38bf,_0x531b6e)=>{const _0x5d4aee=_0xbd1727;_0x531b6e&&_0x531b6e[_0x5d4aee(0x165)]===!![]&&_0xf174a&&_0xf174a[_0x5d4aee(0x113)]>0x0&&automation[_0x5d4aee(0x134)](_0x3c48c9,_0xf174a);});}else{if(_0x418757['type']===_0xbd1727(0x12a)){const {room:_0x46d27f,propagation:_0x234a23}=_0x418757[_0xbd1727(0x117)];let _0x45b7ca=_0xbd1727(0x14a),_0xf0ed36=0x0;if(_0x234a23){const _0x3a04ec=Object[_0xbd1727(0x137)](_0x234a23);_0x3a04ec['length']>0x0&&(_0x45b7ca=_0x3a04ec[0x0][0x0],_0xf0ed36=_0x3a04ec[0x0][0x1]);}_0x3c48c9[_0xbd1727(0x132)](_0xbd1727(0x115),{'val':_0x45b7ca,'ack':!![]}),_0x3c48c9[_0xbd1727(0x132)](_0xbd1727(0x152),{'val':_0xf0ed36,'ack':!![]}),automation[_0xbd1727(0x136)](_0x3c48c9,_0x45b7ca,_0xf0ed36);}else{if(_0x418757['type']===_0xbd1727(0x173)){const {probabilities:_0x1bae02}=_0x418757[_0xbd1727(0x117)];if(_0x1bae02){_0x3c48c9[_0xbd1727(0x132)](_0xbd1727(0x153),{'val':JSON[_0xbd1727(0x16b)](_0x1bae02),'ack':!![]});const _0x4e09fe=Object[_0xbd1727(0x15a)](_0x1bae02);if(_0x4e09fe[_0xbd1727(0x113)]>0x0){const _0x27d34f=_0x4e09fe[0x0],_0x3d3ca3=_0x1bae02[_0x27d34f];_0x3c48c9['setStateAsync'](_0xbd1727(0x13b),{'val':_0x27d34f,'ack':!![]}),_0x3c48c9[_0xbd1727(0x132)]('analysis.prediction.trackerConfidence',{'val':_0x3d3ca3,'ack':!![]});}}}else{if(_0x418757['type']===_0xbd1727(0x162)){const {patterns:_0x492e10}=_0x418757['payload'];if(_0x492e10&&_0x492e10[_0xbd1727(0x113)]>0x0)_0x3c48c9['setStateAsync'](_0xbd1727(0x118),{'val':JSON['stringify'](_0x492e10),'ack':!![]});}}}}}}}}}}}}}}}}}function startService(_0x48fe5a,_0x2be70c){const _0x55cf81=a4_0x20951b;let _0x5e24f5=_0x55cf81(0x144);if(fs[_0x55cf81(0x123)](_0x2be70c))_0x5e24f5=_0x2be70c;try{const _0x2b548b=path[_0x55cf81(0x16d)](__dirname,'..',_0x55cf81(0x12e),_0x55cf81(0x16c));pythonProcess=spawn(_0x5e24f5,[_0x2b548b]),pythonProcess[_0x55cf81(0x139)]['on'](_0x55cf81(0x148),_0x3ac8ef=>{const _0x29bcb9=_0x55cf81,_0x5e894b=_0x3ac8ef[_0x29bcb9(0x174)]()[_0x29bcb9(0x133)]('\x0a');_0x5e894b[_0x29bcb9(0x160)](_0x6a469f=>{const _0x3a8db2=_0x29bcb9,_0x265cd1=_0x6a469f[_0x3a8db2(0x11e)]();if(!_0x265cd1)return;if(_0x265cd1['startsWith'](_0x3a8db2(0x14b)))_0x48fe5a[_0x3a8db2(0x120)][_0x3a8db2(0x164)](_0x3a8db2(0x140)+_0x265cd1[_0x3a8db2(0x121)](0x5)[_0x3a8db2(0x11e)]());else{if(_0x265cd1[_0x3a8db2(0x125)](_0x3a8db2(0x135)))try{const _0x5ae636=JSON[_0x3a8db2(0x14c)](_0x265cd1['substring'](0x8)['trim']());handleResult(_0x48fe5a,_0x5ae636);}catch(_0x5d0d15){}}});}),pythonProcess['on'](_0x55cf81(0x138),_0x1dcf92=>{pythonProcess=null;}),_0x48fe5a[_0x55cf81(0x147)]=(_0x34a278,_0x2a1ee0)=>send(_0x48fe5a,_0x34a278,_0x2a1ee0);}catch(_0x19fc03){_0x48fe5a[_0x55cf81(0x120)][_0x55cf81(0x11b)]('Error\x20launching\x20Python:\x20'+_0x19fc03[_0x55cf81(0x14f)]);}}function stopService(_0x341afa){const _0x1ac716=a4_0x20951b;if(pythonProcess){try{pythonProcess[_0x1ac716(0x169)]();}catch(_0x1c4094){}pythonProcess=null;}}function a4_0x32df(_0x36ac3d,_0x1524f7){const _0x3ac9f1=a4_0x4efd();return a4_0x32df=function(_0x858fb,_0x5ed2c){_0x858fb=_0x858fb-0x113;let _0x4efd81=_0x3ac9f1[_0x858fb];return _0x4efd81;},a4_0x32df(_0x36ac3d,_0x1524f7);}module[a4_0x20951b(0x129)]={'startService':startService,'stopService':stopService,'send':send};