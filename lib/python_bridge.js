const a4_0x4a2f6a=a4_0x4cc4;function a4_0x4cc4(_0x2de385,_0x2612f3){const _0x104c75=a4_0x50b0();return a4_0x4cc4=function(_0x5f1bd6,_0x1770be){_0x5f1bd6=_0x5f1bd6-0x7d;let _0x50b001=_0x104c75[_0x5f1bd6];return _0x50b001;},a4_0x4cc4(_0x2de385,_0x2612f3);}(function(_0x940c9e,_0x2da658){const _0x17481d=a4_0x4cc4,_0x146fed=_0x940c9e();while(!![]){try{const _0x235750=-parseInt(_0x17481d(0x9e))/0x1*(parseInt(_0x17481d(0xd6))/0x2)+-parseInt(_0x17481d(0x90))/0x3*(parseInt(_0x17481d(0xd3))/0x4)+parseInt(_0x17481d(0xcf))/0x5*(-parseInt(_0x17481d(0xc4))/0x6)+parseInt(_0x17481d(0xe0))/0x7*(-parseInt(_0x17481d(0x8d))/0x8)+parseInt(_0x17481d(0xb3))/0x9+-parseInt(_0x17481d(0x7d))/0xa+parseInt(_0x17481d(0xec))/0xb;if(_0x235750===_0x2da658)break;else _0x146fed['push'](_0x146fed['shift']());}catch(_0x1e6553){_0x146fed['push'](_0x146fed['shift']());}}}(a4_0x50b0,0x86ffa));const a4_0x1770be=(function(){let _0x1cc4c6=!![];return function(_0x2c4c39,_0x5d4bf2){const _0x256099=_0x1cc4c6?function(){const _0x4de330=a4_0x4cc4;if(_0x5d4bf2){const _0xb0983=_0x5d4bf2[_0x4de330(0xb6)](_0x2c4c39,arguments);return _0x5d4bf2=null,_0xb0983;}}:function(){};return _0x1cc4c6=![],_0x256099;};}()),a4_0x5f1bd6=a4_0x1770be(this,function(){const _0x5528b9=a4_0x4cc4;return a4_0x5f1bd6[_0x5528b9(0x96)]()['search'](_0x5528b9(0x92))['toString']()['constructor'](a4_0x5f1bd6)['search'](_0x5528b9(0x92));});a4_0x5f1bd6();function a4_0x50b0(){const _0x29be1e=['payload','log','analysis.prediction.nextRoom','Success:\x20','kill','applyEnergySavings','sendNotification','586330IECGBe','analysis.training.status','Error\x20launching\x20Python:\x20','close','25004AFFYNK','de-DE','info','4SUnVRR','analysis.health.gaitSpeed','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20','SIGNAL_RESULT','analysis.isAlert','./setup','getState','exports','[LOG]','warn','7DjuGxl','threshold','stderr','[PYTHON\x20ERR]\x20','analysis.health.lastCheck','is_anomaly','analysis.energy.insulationScore','existsSync','analysis.energy.heatingScore','analysis.energy.ventilationAlerts','âš ï¸\x20SECURITY\x20ALARM:\x20','\x0aGrund:\x20','35992935dyUKBt','7061890QmvgmK','length','analysis.prediction.trackerConfidence','PINN_PREDICT_RESULT','stdout','python_service','analysis.prediction.confidence','substring','sendToPythonWrapper','ðŸ\x20Python\x20Pong','short','analysis.energy.mpcActive','HEALTH_TREND_RESULT','toLocaleDateString','heating','analysis.energy.warmupTimes','4470688lJUdYq','toFixed','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','201WOAHnW','analysis.energy.warmupSources','(((.+)+)+)+$','analysis.security.lastCheck','stringify','\x20AND\x20','toString','details','2-digit','analysis.security.currentThreshold','analysis.energy.rlPenalties','startsWith','parse','Failed:\x20','329167oHEeaL','COMFORT_RESULT','service.py','keys','analysis.security.lastScore','analysis.prediction.trackerState','join','[PYTHON]\x20','SECURITY_RESULT','RL_PENALTY_UPDATE','path','success','toLocaleTimeString','.\x20Please\x20create\x20this\x20file!','debug','data','analysis.energy.forecast','analysis.automation.detectedPatterns','handlePrediction','VENTILATION_ALERT','entries','3995163drCtMG','reason','ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20','apply','Unknown','message','analysis.prediction.trackerTopRoom','[RESULT]','stdin','trim','insulation','HEALTH_RESULT','âœ…\x20HEALTH\x20TRAINED.','setStateAsync','error','ENERGY_OPTIMIZE_RESULT','HEALTH_TRAIN_RESULT','42ehBkyl','ðŸ“ˆ\x20Health\x20Trend:\x20','forEach','type'];a4_0x50b0=function(){return _0x29be1e;};return a4_0x50b0();}'use strict';const {spawn}=require('child_process'),path=require(a4_0x4a2f6a(0xa8)),fs=require('fs'),setup=require(a4_0x4a2f6a(0xdb)),automation=require('./automation');let pythonProcess=null;function send(_0x55996d,_0x5b0bf2,_0x307013={}){const _0x2a5302=a4_0x4a2f6a;if(!pythonProcess||!pythonProcess['stdin']['writable'])return;const _0x35d2d9=JSON[_0x2a5302(0x94)]({'command':_0x5b0bf2,..._0x307013});try{pythonProcess[_0x2a5302(0xbb)]['write'](_0x35d2d9+'\x0a');}catch(_0x332ae6){}}function handleResult(_0x4e3d95,_0x4899d7){const _0x390857=a4_0x4a2f6a;if(_0x4899d7[_0x390857(0xc7)]==='PONG')_0x4e3d95[_0x390857(0xc9)][_0x390857(0xac)](_0x390857(0x86));else{if(_0x4899d7[_0x390857(0xc7)]===_0x390857(0xa6)){const {anomaly_score:_0x36679c,is_anomaly:_0x229d13,threshold:_0x1b36c3,explanation:_0x11a91a}=_0x4899d7['payload'];_0x4e3d95['setStateAsync'](_0x390857(0xa2),{'val':_0x36679c,'ack':!![]}),_0x4e3d95['setStateAsync'](_0x390857(0x93),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x1b36c3)_0x4e3d95[_0x390857(0xc0)](_0x390857(0x99),{'val':_0x1b36c3,'ack':!![]});if(_0x229d13){let _0x153457=_0x390857(0x8f)+_0x36679c[_0x390857(0x8e)](0x4)+')';if(_0x11a91a&&_0x11a91a!==_0x390857(0xb7))_0x153457+=_0x390857(0xeb)+_0x11a91a;_0x4e3d95[_0x390857(0xc0)](_0x390857(0xda),{'val':!![],'ack':!![]}),_0x4e3d95[_0x390857(0xc0)]('analysis.alertReason',{'val':_0x153457,'ack':!![]}),setup[_0x390857(0xce)](_0x4e3d95,_0x390857(0xea)+_0x153457,![],!![]);}}else{if(_0x4899d7[_0x390857(0xc7)]==='TRAINING_COMPLETE'){const _0x424926=_0x4899d7[_0x390857(0xc8)][_0x390857(0x97)]||'',_0x16b82c=_0x4899d7[_0x390857(0xc8)][_0x390857(0xe1)],_0xe77353=_0x4899d7[_0x390857(0xc8)][_0x390857(0xa9)]?_0x390857(0xcb)+new Date()[_0x390857(0xaa)]()+'\x20('+_0x424926+')':_0x390857(0x9d)+_0x4899d7[_0x390857(0xc8)][_0x390857(0xb4)];_0x4e3d95[_0x390857(0xc0)](_0x390857(0xd0),{'val':_0xe77353,'ack':!![]});if(_0x4899d7[_0x390857(0xc8)][_0x390857(0xa9)]&&_0x16b82c)_0x4e3d95[_0x390857(0xc0)](_0x390857(0x99),{'val':_0x16b82c,'ack':!![]});}else{if(_0x4899d7['type']==='ENERGY_TRAIN_RESULT'){if(_0x4899d7[_0x390857(0xc8)]['success'])try{const _0x579cf9=JSON[_0x390857(0x9c)](_0x4899d7[_0x390857(0xc8)]['details']);if(_0x579cf9[_0x390857(0xbd)])_0x4e3d95[_0x390857(0xc0)](_0x390857(0xe6),{'val':JSON[_0x390857(0x94)](_0x579cf9[_0x390857(0xbd)]),'ack':!![]});if(_0x579cf9['heating'])_0x4e3d95[_0x390857(0xc0)](_0x390857(0xe8),{'val':JSON['stringify'](_0x579cf9[_0x390857(0x8b)]),'ack':!![]});}catch(_0x5b495f){}}else{if(_0x4899d7[_0x390857(0xc7)]===_0x390857(0xc3)){if(_0x4899d7['payload'][_0x390857(0xa9)]){_0x4e3d95[_0x390857(0xc9)]['info'](_0x390857(0xbf));const _0x380495=new Date(),_0x2d99eb=_0x380495[_0x390857(0x8a)]('de-DE',{'day':_0x390857(0x98),'month':_0x390857(0x87),'hour':_0x390857(0x98),'minute':_0x390857(0x98)});_0x4e3d95[_0x390857(0xc0)](_0x390857(0xe4),{'val':_0x2d99eb,'ack':!![]});}}else{if(_0x4899d7[_0x390857(0xc7)]===_0x390857(0xbe)){const _0xf7b417=new Date(),_0x3a3372=_0xf7b417['toLocaleDateString'](_0x390857(0xd4),{'day':_0x390857(0x98),'month':'short','hour':_0x390857(0x98),'minute':_0x390857(0x98)});_0x4e3d95['setStateAsync'](_0x390857(0xe4),{'val':_0x3a3372,'ack':!![]}),_0x4e3d95['setStateAsync']('analysis.health.isAnomaly',{'val':_0x4899d7['payload'][_0x390857(0xe5)],'ack':!![]});}else{if(_0x4899d7[_0x390857(0xc7)]===_0x390857(0x89)){const {trend_percent:_0x5e8c5d,details:_0x4798d2}=_0x4899d7[_0x390857(0xc8)],_0x1dea60=new Date(),_0x34a88=_0x1dea60[_0x390857(0x8a)](_0x390857(0xd4),{'day':'2-digit','month':_0x390857(0x87),'hour':_0x390857(0x98),'minute':_0x390857(0x98)});_0x4e3d95['setStateAsync'](_0x390857(0xe4),{'val':_0x34a88,'ack':!![]}),_0x4e3d95[_0x390857(0xc0)]('analysis.health.activityTrend',{'val':_0x5e8c5d,'ack':!![]}),_0x4e3d95[_0x390857(0xc9)][_0x390857(0xd5)](_0x390857(0xc5)+_0x4798d2);}else{if(_0x4899d7[_0x390857(0xc7)]==='GAIT_RESULT'){const {speed_trend:_0x28c386}=_0x4899d7[_0x390857(0xc8)];if(_0x28c386!==undefined)_0x4e3d95[_0x390857(0xc0)](_0x390857(0xd7),{'val':_0x28c386,'ack':!![]});}else{if(_0x4899d7['type']==='ENERGY_PREDICT_RESULT'){const {forecast:_0x10f0d2}=_0x4899d7['payload'];if(_0x10f0d2)_0x4e3d95[_0x390857(0xc0)](_0x390857(0xae),{'val':JSON[_0x390857(0x94)](_0x10f0d2),'ack':!![]});}else{if(_0x4899d7['type']==='WARMUP_RESULT'){const {times:_0x24b3cc,sources:_0x5c908a,details:_0x2514c7}=_0x4899d7['payload'];if(_0x24b3cc)_0x4e3d95[_0x390857(0xc0)](_0x390857(0x8c),{'val':JSON['stringify'](_0x24b3cc),'ack':!![]});if(_0x5c908a)_0x4e3d95[_0x390857(0xc0)](_0x390857(0x91),{'val':JSON[_0x390857(0x94)](_0x5c908a),'ack':!![]});if(_0x2514c7)_0x4e3d95[_0x390857(0xc0)]('analysis.energy.warmupDetails',{'val':JSON[_0x390857(0x94)](_0x2514c7),'ack':!![]});}else{if(_0x4899d7[_0x390857(0xc7)]===_0x390857(0xa7)){const {penalties:_0x33627e}=_0x4899d7[_0x390857(0xc8)];if(_0x33627e)_0x4e3d95[_0x390857(0xc0)](_0x390857(0x9a),{'val':JSON[_0x390857(0x94)](_0x33627e),'ack':!![]});}else{if(_0x4899d7[_0x390857(0xc7)]===_0x390857(0x80)){const {forecast:_0x39885e}=_0x4899d7[_0x390857(0xc8)];if(_0x39885e)_0x4e3d95['setStateAsync']('analysis.energy.pinnForecast',{'val':JSON[_0x390857(0x94)](_0x39885e),'ack':!![]});}else{if(_0x4899d7[_0x390857(0xc7)]===_0x390857(0xb1)){const {alerts:_0x199957}=_0x4899d7[_0x390857(0xc8)];if(_0x199957)_0x4e3d95[_0x390857(0xc0)](_0x390857(0xe9),{'val':JSON[_0x390857(0x94)](_0x199957),'ack':!![]});}else{if(_0x4899d7['type']===_0x390857(0xc2)){const {proposals:_0x1dccfa}=_0x4899d7[_0x390857(0xc8)];_0x4e3d95[_0x390857(0xdc)](_0x390857(0x88),(_0x2ef670,_0x260355)=>{const _0x52ba65=_0x390857;_0x260355&&_0x260355['val']===!![]&&_0x1dccfa&&_0x1dccfa[_0x52ba65(0x7e)]>0x0&&automation[_0x52ba65(0xcd)](_0x4e3d95,_0x1dccfa);});}else{if(_0x4899d7[_0x390857(0xc7)]===_0x390857(0xd9)){const {room:_0x186da2,propagation:_0x309092}=_0x4899d7[_0x390857(0xc8)];let _0x5d53ae=_0x390857(0xb7),_0x125662=0x0;if(_0x309092){const _0x471ed6=Object[_0x390857(0xb2)](_0x309092);_0x471ed6[_0x390857(0x7e)]>0x0&&(_0x5d53ae=_0x471ed6[0x0][0x0],_0x125662=_0x471ed6[0x0][0x1]);}_0x4e3d95[_0x390857(0xc0)](_0x390857(0xca),{'val':_0x5d53ae,'ack':!![]}),_0x4e3d95[_0x390857(0xc0)](_0x390857(0x83),{'val':_0x125662,'ack':!![]}),automation[_0x390857(0xb0)](_0x4e3d95,_0x5d53ae,_0x125662);}else{if(_0x4899d7['type']==='TRACKER_RESULT'){const {probabilities:_0x3cbaa4}=_0x4899d7['payload'];if(_0x3cbaa4){_0x4e3d95[_0x390857(0xc0)](_0x390857(0xa3),{'val':JSON['stringify'](_0x3cbaa4),'ack':!![]});const _0x181e7f=Object[_0x390857(0xa1)](_0x3cbaa4);if(_0x181e7f[_0x390857(0x7e)]>0x0){const _0x10475b=_0x181e7f[0x0],_0xf845d0=_0x3cbaa4[_0x10475b];_0x4e3d95[_0x390857(0xc0)](_0x390857(0xb9),{'val':_0x10475b,'ack':!![]}),_0x4e3d95[_0x390857(0xc0)](_0x390857(0x7f),{'val':_0xf845d0,'ack':!![]});}}}else{if(_0x4899d7[_0x390857(0xc7)]===_0x390857(0x9f)){const {patterns:_0x264d15}=_0x4899d7[_0x390857(0xc8)];if(_0x264d15&&_0x264d15['length']>0x0)_0x4e3d95[_0x390857(0xc0)](_0x390857(0xaf),{'val':JSON[_0x390857(0x94)](_0x264d15),'ack':!![]});}}}}}}}}}}}}}}}}}}function startService(_0x26817c,_0x4bc8d7){const _0x8c7dd2=a4_0x4a2f6a;let _0x455e55='python3';if(fs[_0x8c7dd2(0xe7)](_0x4bc8d7))_0x455e55=_0x4bc8d7;const _0x4134ee=path[_0x8c7dd2(0xa4)](__dirname,'..','service.py'),_0x47b461=path['join'](__dirname,'..',_0x8c7dd2(0x82),_0x8c7dd2(0xa0));let _0x7dad4='';if(fs[_0x8c7dd2(0xe7)](_0x4134ee))_0x7dad4=_0x4134ee;else{if(fs['existsSync'](_0x47b461))_0x7dad4=_0x47b461;else{_0x26817c['log'][_0x8c7dd2(0xc1)](_0x8c7dd2(0xd8)+_0x4134ee+_0x8c7dd2(0x95)+_0x47b461+_0x8c7dd2(0xab));return;}}try{_0x26817c[_0x8c7dd2(0xc9)]['info'](_0x8c7dd2(0xb5)+_0x455e55+'\x20'+_0x7dad4),pythonProcess=spawn(_0x455e55,[_0x7dad4]),pythonProcess[_0x8c7dd2(0x81)]['on']('data',_0x44dac0=>{const _0x3697de=_0x8c7dd2,_0x49e0a8=_0x44dac0[_0x3697de(0x96)]()['split']('\x0a');_0x49e0a8[_0x3697de(0xc6)](_0x2597d4=>{const _0x44d609=_0x3697de,_0x19595b=_0x2597d4['trim']();if(!_0x19595b)return;if(_0x19595b['startsWith'](_0x44d609(0xde)))_0x26817c['log'][_0x44d609(0xac)](_0x44d609(0xa5)+_0x19595b[_0x44d609(0x84)](0x5)['trim']());else{if(_0x19595b[_0x44d609(0x9b)](_0x44d609(0xba)))try{const _0x4cc222=JSON['parse'](_0x19595b['substring'](0x8)[_0x44d609(0xbc)]());handleResult(_0x26817c,_0x4cc222);}catch(_0x295d36){}}});}),pythonProcess[_0x8c7dd2(0xe2)]['on'](_0x8c7dd2(0xad),_0x3f665b=>{const _0x45ad87=_0x8c7dd2;_0x26817c[_0x45ad87(0xc9)][_0x45ad87(0xc1)](_0x45ad87(0xe3)+_0x3f665b[_0x45ad87(0x96)]()['trim']());}),pythonProcess['on'](_0x8c7dd2(0xd2),_0x457e9f=>{const _0x4b60b0=_0x8c7dd2;_0x26817c[_0x4b60b0(0xc9)][_0x4b60b0(0xdf)]('Python\x20process\x20exited\x20with\x20code\x20'+_0x457e9f),pythonProcess=null;}),_0x26817c[_0x8c7dd2(0x85)]=(_0x27f6f6,_0x409d91)=>send(_0x26817c,_0x27f6f6,_0x409d91);}catch(_0x5446f7){_0x26817c['log'][_0x8c7dd2(0xc1)](_0x8c7dd2(0xd1)+_0x5446f7[_0x8c7dd2(0xb8)]);}}function stopService(_0x49e4b0){const _0x4e53f0=a4_0x4a2f6a;if(pythonProcess){try{pythonProcess[_0x4e53f0(0xcc)]();}catch(_0x12773e){}pythonProcess=null;}}module[a4_0x4a2f6a(0xdd)]={'startService':startService,'stopService':stopService,'send':send};