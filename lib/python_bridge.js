const a4_0xdd913e=a4_0x4b28;(function(_0x5e324d,_0x77e408){const _0x2ad769=a4_0x4b28,_0x29e75f=_0x5e324d();while(!![]){try{const _0x1ddbc9=parseInt(_0x2ad769(0xf6))/0x1+-parseInt(_0x2ad769(0x132))/0x2*(-parseInt(_0x2ad769(0x126))/0x3)+-parseInt(_0x2ad769(0x105))/0x4+parseInt(_0x2ad769(0x10a))/0x5*(parseInt(_0x2ad769(0xde))/0x6)+-parseInt(_0x2ad769(0x125))/0x7*(parseInt(_0x2ad769(0xf4))/0x8)+parseInt(_0x2ad769(0x12b))/0x9+-parseInt(_0x2ad769(0x136))/0xa*(parseInt(_0x2ad769(0xf7))/0xb);if(_0x1ddbc9===_0x77e408)break;else _0x29e75f['push'](_0x29e75f['shift']());}catch(_0x223384){_0x29e75f['push'](_0x29e75f['shift']());}}}(a4_0x5946,0x70431));const a4_0x25b547=(function(){let _0x52e178=!![];return function(_0x4f1067,_0xbc8a99){const _0x2b893d=_0x52e178?function(){const _0x582952=a4_0x4b28;if(_0xbc8a99){const _0x6629ae=_0xbc8a99[_0x582952(0x104)](_0x4f1067,arguments);return _0xbc8a99=null,_0x6629ae;}}:function(){};return _0x52e178=![],_0x2b893d;};}()),a4_0x594696=a4_0x25b547(this,function(){const _0x46684d=a4_0x4b28;return a4_0x594696['toString']()[_0x46684d(0x106)](_0x46684d(0x133))[_0x46684d(0x117)]()[_0x46684d(0x12a)](a4_0x594696)[_0x46684d(0x106)](_0x46684d(0x133));});a4_0x594696();function a4_0x5946(){const _0x272857=['analysis.security.currentThreshold','âœ…\x20HEALTH\x20TRAINED.','substring','success','analysis.security.lastScore','2eXgKIG','(((.+)+)+)+$','startsWith','analysis.energy.heatingScore','20fdGghX','applyEnergySavings','heating','service.py','error','analysis.prediction.trackerState','payload','6QIArbo','analysis.energy.insulationScore','keys','handlePrediction','threshold','analysis.energy.warmupTimes','ðŸ\x20Python\x20Pong','COMFORT_RESULT','TRAINING_COMPLETE','Error\x20launching\x20Python:\x20','log','message','debug','ENERGY_OPTIMIZE_RESULT','analysis.energy.ventilationAlerts','reason','[RESULT]','python_service','TRACKER_RESULT','SECURITY_RESULT','details','insulation','25496HOUIGd','sendToPythonWrapper','489957DseKlY','1757338erOkNX','Failed:\x20','ENERGY_TRAIN_RESULT','is_anomaly','analysis.prediction.nextRoom','parse','analysis.energy.pinnForecast','stringify','analysis.prediction.confidence','WARMUP_RESULT','analysis.health.gaitSpeed','analysis.health.lastCheck','type','apply','792064UbpERS','search','HEALTH_TRAIN_RESULT','toISOString','Success:\x20','3042015HGtbkl','exports','python3','SIGNAL_RESULT','analysis.automation.detectedPatterns','analysis.prediction.trackerConfidence','getState','[PYTHON]\x20','child_process','analysis.security.lastCheck','analysis.energy.mpcActive','existsSync','PONG','toString','toLocaleTimeString','HEALTH_RESULT','\x0aGrund:\x20','stdout','trim','length','analysis.health.isAnomaly','kill','analysis.training.status','forEach','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','setStateAsync','toFixed','826hmfbtg','80451iTSwVg','split','data','close','constructor','2054214QiCSad','stdin'];a4_0x5946=function(){return _0x272857;};return a4_0x5946();}'use strict';const {spawn}=require(a4_0xdd913e(0x112)),path=require('path'),fs=require('fs'),setup=require('./setup'),automation=require('./automation');function a4_0x4b28(_0x5b483f,_0x305ad5){const _0xd33a97=a4_0x5946();return a4_0x4b28=function(_0x594696,_0x25b547){_0x594696=_0x594696-0xdb;let _0x5946f9=_0xd33a97[_0x594696];return _0x5946f9;},a4_0x4b28(_0x5b483f,_0x305ad5);}let pythonProcess=null;function send(_0x41ef3f,_0x235bcc,_0x1f5638={}){const _0x2ae175=a4_0xdd913e;if(!pythonProcess||!pythonProcess[_0x2ae175(0x12c)]['writable'])return;const _0x29b901=JSON[_0x2ae175(0xfe)]({'command':_0x235bcc,..._0x1f5638});try{pythonProcess['stdin']['write'](_0x29b901+'\x0a');}catch(_0x583468){}}function handleResult(_0x223086,_0x1bfe87){const _0x3196e7=a4_0xdd913e;if(_0x1bfe87[_0x3196e7(0x103)]===_0x3196e7(0x116))_0x223086[_0x3196e7(0xe8)][_0x3196e7(0xea)](_0x3196e7(0xe4));else{if(_0x1bfe87[_0x3196e7(0x103)]===_0x3196e7(0xf1)){const {anomaly_score:_0x5c3824,is_anomaly:_0x251caf,threshold:_0x4525c4,explanation:_0x4e90c5}=_0x1bfe87[_0x3196e7(0xdd)];_0x223086[_0x3196e7(0x123)](_0x3196e7(0x131),{'val':_0x5c3824,'ack':!![]}),_0x223086[_0x3196e7(0x123)](_0x3196e7(0x113),{'val':new Date()[_0x3196e7(0x108)](),'ack':!![]});if(_0x4525c4)_0x223086[_0x3196e7(0x123)](_0x3196e7(0x12d),{'val':_0x4525c4,'ack':!![]});if(_0x251caf){let _0x328160=_0x3196e7(0x122)+_0x5c3824[_0x3196e7(0x124)](0x4)+')';if(_0x4e90c5&&_0x4e90c5!=='Unknown')_0x328160+=_0x3196e7(0x11a)+_0x4e90c5;_0x223086['setStateAsync']('analysis.isAlert',{'val':!![],'ack':!![]}),_0x223086[_0x3196e7(0x123)]('analysis.alertReason',{'val':_0x328160,'ack':!![]}),setup['sendNotification'](_0x223086,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x328160,![],!![]);}}else{if(_0x1bfe87[_0x3196e7(0x103)]===_0x3196e7(0xe6)){const _0x301c2a=_0x1bfe87[_0x3196e7(0xdd)]['details']||'',_0x10d9f8=_0x1bfe87[_0x3196e7(0xdd)][_0x3196e7(0xe2)],_0x569d1f=_0x1bfe87[_0x3196e7(0xdd)][_0x3196e7(0x130)]?_0x3196e7(0x109)+new Date()[_0x3196e7(0x118)]()+'\x20('+_0x301c2a+')':_0x3196e7(0xf8)+_0x1bfe87[_0x3196e7(0xdd)][_0x3196e7(0xed)];_0x223086[_0x3196e7(0x123)](_0x3196e7(0x120),{'val':_0x569d1f,'ack':!![]});if(_0x1bfe87[_0x3196e7(0xdd)]['success']&&_0x10d9f8)_0x223086[_0x3196e7(0x123)]('analysis.security.currentThreshold',{'val':_0x10d9f8,'ack':!![]});}else{if(_0x1bfe87[_0x3196e7(0x103)]===_0x3196e7(0xf9)){if(_0x1bfe87[_0x3196e7(0xdd)][_0x3196e7(0x130)])try{const _0x32656f=JSON[_0x3196e7(0xfc)](_0x1bfe87['payload'][_0x3196e7(0xf2)]);if(_0x32656f[_0x3196e7(0xf3)])_0x223086[_0x3196e7(0x123)](_0x3196e7(0xdf),{'val':JSON[_0x3196e7(0xfe)](_0x32656f[_0x3196e7(0xf3)]),'ack':!![]});if(_0x32656f[_0x3196e7(0x138)])_0x223086[_0x3196e7(0x123)](_0x3196e7(0x135),{'val':JSON[_0x3196e7(0xfe)](_0x32656f[_0x3196e7(0x138)]),'ack':!![]});}catch(_0x4f024f){}}else{if(_0x1bfe87[_0x3196e7(0x103)]===_0x3196e7(0x107)){if(_0x1bfe87[_0x3196e7(0xdd)][_0x3196e7(0x130)])_0x223086[_0x3196e7(0xe8)]['info'](_0x3196e7(0x12e));}else{if(_0x1bfe87[_0x3196e7(0x103)]===_0x3196e7(0x119))_0x223086[_0x3196e7(0x123)](_0x3196e7(0x102),{'val':new Date()['toISOString'](),'ack':!![]}),_0x223086[_0x3196e7(0x123)](_0x3196e7(0x11e),{'val':_0x1bfe87[_0x3196e7(0xdd)][_0x3196e7(0xfa)],'ack':!![]});else{if(_0x1bfe87[_0x3196e7(0x103)]==='GAIT_RESULT'){const {speed_trend:_0x1360de}=_0x1bfe87[_0x3196e7(0xdd)];if(_0x1360de!==undefined)_0x223086[_0x3196e7(0x123)](_0x3196e7(0x101),{'val':_0x1360de,'ack':!![]});}else{if(_0x1bfe87[_0x3196e7(0x103)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x42c86b}=_0x1bfe87[_0x3196e7(0xdd)];if(_0x42c86b)_0x223086[_0x3196e7(0x123)]('analysis.energy.forecast',{'val':JSON[_0x3196e7(0xfe)](_0x42c86b),'ack':!![]});}else{if(_0x1bfe87[_0x3196e7(0x103)]===_0x3196e7(0x100)){const {times:_0x48a47d}=_0x1bfe87[_0x3196e7(0xdd)];if(_0x48a47d)_0x223086[_0x3196e7(0x123)](_0x3196e7(0xe3),{'val':JSON[_0x3196e7(0xfe)](_0x48a47d),'ack':!![]});}else{if(_0x1bfe87[_0x3196e7(0x103)]==='PINN_PREDICT_RESULT'){const {forecast:_0x2ce9b5}=_0x1bfe87[_0x3196e7(0xdd)];if(_0x2ce9b5)_0x223086['setStateAsync'](_0x3196e7(0xfd),{'val':JSON[_0x3196e7(0xfe)](_0x2ce9b5),'ack':!![]});}else{if(_0x1bfe87['type']==='VENTILATION_ALERT'){const {alerts:_0xfcfb7b}=_0x1bfe87[_0x3196e7(0xdd)];if(_0xfcfb7b)_0x223086[_0x3196e7(0x123)](_0x3196e7(0xec),{'val':JSON['stringify'](_0xfcfb7b),'ack':!![]});}else{if(_0x1bfe87['type']===_0x3196e7(0xeb)){const {proposals:_0x1220a8}=_0x1bfe87[_0x3196e7(0xdd)];_0x223086[_0x3196e7(0x110)](_0x3196e7(0x114),(_0x2c068e,_0x4e9a94)=>{const _0x635f2=_0x3196e7;_0x4e9a94&&_0x4e9a94['val']===!![]&&_0x1220a8&&_0x1220a8[_0x635f2(0x11d)]>0x0&&automation[_0x635f2(0x137)](_0x223086,_0x1220a8);});}else{if(_0x1bfe87[_0x3196e7(0x103)]===_0x3196e7(0x10d)){const {room:_0x2078e3,propagation:_0x3805e6}=_0x1bfe87['payload'];let _0x5512be='Unknown',_0x6fb76e=0x0;if(_0x3805e6){const _0x171426=Object['entries'](_0x3805e6);_0x171426[_0x3196e7(0x11d)]>0x0&&(_0x5512be=_0x171426[0x0][0x0],_0x6fb76e=_0x171426[0x0][0x1]);}_0x223086[_0x3196e7(0x123)](_0x3196e7(0xfb),{'val':_0x5512be,'ack':!![]}),_0x223086[_0x3196e7(0x123)](_0x3196e7(0xff),{'val':_0x6fb76e,'ack':!![]}),automation[_0x3196e7(0xe1)](_0x223086,_0x5512be,_0x6fb76e);}else{if(_0x1bfe87[_0x3196e7(0x103)]===_0x3196e7(0xf0)){const {probabilities:_0x57cbfd}=_0x1bfe87[_0x3196e7(0xdd)];if(_0x57cbfd){_0x223086['setStateAsync'](_0x3196e7(0xdc),{'val':JSON['stringify'](_0x57cbfd),'ack':!![]});const _0xc6266=Object[_0x3196e7(0xe0)](_0x57cbfd);if(_0xc6266[_0x3196e7(0x11d)]>0x0){const _0x5d2288=_0xc6266[0x0],_0x1185e2=_0x57cbfd[_0x5d2288];_0x223086['setStateAsync']('analysis.prediction.trackerTopRoom',{'val':_0x5d2288,'ack':!![]}),_0x223086[_0x3196e7(0x123)](_0x3196e7(0x10f),{'val':_0x1185e2,'ack':!![]});}}}else{if(_0x1bfe87[_0x3196e7(0x103)]===_0x3196e7(0xe5)){const {patterns:_0x3168bc}=_0x1bfe87[_0x3196e7(0xdd)];if(_0x3168bc&&_0x3168bc['length']>0x0)_0x223086[_0x3196e7(0x123)](_0x3196e7(0x10e),{'val':JSON[_0x3196e7(0xfe)](_0x3168bc),'ack':!![]});}}}}}}}}}}}}}}}}function startService(_0x45bf83,_0x2cb256){const _0x244303=a4_0xdd913e;let _0x25e4df=_0x244303(0x10c);if(fs[_0x244303(0x115)](_0x2cb256))_0x25e4df=_0x2cb256;try{const _0x5b2ae2=path['join'](__dirname,'..',_0x244303(0xef),_0x244303(0x139));pythonProcess=spawn(_0x25e4df,[_0x5b2ae2]),pythonProcess[_0x244303(0x11b)]['on'](_0x244303(0x128),_0x45bf52=>{const _0x1ad918=_0x244303,_0x23b901=_0x45bf52[_0x1ad918(0x117)]()[_0x1ad918(0x127)]('\x0a');_0x23b901[_0x1ad918(0x121)](_0x23ece9=>{const _0x4d828f=_0x1ad918,_0x4a9150=_0x23ece9['trim']();if(!_0x4a9150)return;if(_0x4a9150[_0x4d828f(0x134)]('[LOG]'))_0x45bf83['log'][_0x4d828f(0xea)](_0x4d828f(0x111)+_0x4a9150['substring'](0x5)[_0x4d828f(0x11c)]());else{if(_0x4a9150[_0x4d828f(0x134)](_0x4d828f(0xee)))try{const _0x55fdc1=JSON[_0x4d828f(0xfc)](_0x4a9150[_0x4d828f(0x12f)](0x8)[_0x4d828f(0x11c)]());handleResult(_0x45bf83,_0x55fdc1);}catch(_0x12d18d){}}});}),pythonProcess['on'](_0x244303(0x129),_0x54af71=>{pythonProcess=null;}),_0x45bf83[_0x244303(0xf5)]=(_0x4bdba0,_0xb3c1b9)=>send(_0x45bf83,_0x4bdba0,_0xb3c1b9);}catch(_0xeab44d){_0x45bf83[_0x244303(0xe8)][_0x244303(0xdb)](_0x244303(0xe7)+_0xeab44d[_0x244303(0xe9)]);}}function stopService(_0x4f8d88){const _0x595b0e=a4_0xdd913e;if(pythonProcess){try{pythonProcess[_0x595b0e(0x11f)]();}catch(_0x752e02){}pythonProcess=null;}}module[a4_0xdd913e(0x10b)]={'startService':startService,'stopService':stopService,'send':send};