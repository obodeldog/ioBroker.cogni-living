const a4_0x8856f4=a4_0x14ca;(function(_0x258a2f,_0x832259){const _0xd3fb2f=a4_0x14ca,_0x17d998=_0x258a2f();while(!![]){try{const _0x40b31e=-parseInt(_0xd3fb2f(0x1ef))/0x1*(-parseInt(_0xd3fb2f(0x1fb))/0x2)+-parseInt(_0xd3fb2f(0x1c6))/0x3+parseInt(_0xd3fb2f(0x1e1))/0x4+-parseInt(_0xd3fb2f(0x1c4))/0x5*(parseInt(_0xd3fb2f(0x1f0))/0x6)+-parseInt(_0xd3fb2f(0x1fd))/0x7*(-parseInt(_0xd3fb2f(0x1c2))/0x8)+-parseInt(_0xd3fb2f(0x1b1))/0x9+parseInt(_0xd3fb2f(0x1f3))/0xa;if(_0x40b31e===_0x832259)break;else _0x17d998['push'](_0x17d998['shift']());}catch(_0xd53941){_0x17d998['push'](_0x17d998['shift']());}}}(a4_0x48c2,0x67b68));const a4_0xea1635=(function(){let _0xc1ec35=!![];return function(_0x585ae8,_0x673042){const _0x8eeca5=_0xc1ec35?function(){if(_0x673042){const _0x429e3c=_0x673042['apply'](_0x585ae8,arguments);return _0x673042=null,_0x429e3c;}}:function(){};return _0xc1ec35=![],_0x8eeca5;};}()),a4_0x53fc01=a4_0xea1635(this,function(){const _0x269d4f=a4_0x14ca;return a4_0x53fc01[_0x269d4f(0x1eb)]()[_0x269d4f(0x1b5)]('(((.+)+)+)+$')[_0x269d4f(0x1eb)]()[_0x269d4f(0x1d1)](a4_0x53fc01)[_0x269d4f(0x1b5)](_0x269d4f(0x1d4));});a4_0x53fc01();function a4_0x48c2(){const _0xa55f40=['forEach','stringify','6BgNpQd','[RESULT]','1204tmXdOi','val','toISOString','ðŸ\x20Python\x20Pong','ENERGY_PREDICT_RESULT','length','threshold','handlePrediction','âœ…\x20HEALTH\x20TRAINED.','entries','info','TRAINING_COMPLETE','close','2166480WLzWdf','payload','sendToPythonWrapper','Failed:\x20','search','analysis.security.currentThreshold','analysis.automation.detectedPatterns','COMFORT_RESULT','GAIT_RESULT','heating','analysis.energy.pinnForecast','startsWith','SECURITY_RESULT','PINN_PREDICT_RESULT','./setup','log','python3','21176xZRfVs','debug','283025zfgImw','service.py','2214927nPFhGh','stdin','error','trim','kill','details','python_service','analysis.energy.heatingScore','reason','substring','PONG','constructor','analysis.alertReason','analysis.prediction.confidence','(((.+)+)+)+$','exports','success','WARMUP_RESULT','analysis.isAlert','analysis.prediction.trackerConfidence','toFixed','join','setStateAsync','keys','toLocaleTimeString','analysis.energy.forecast','TRACKER_RESULT','2286156cgUnah','getState','./automation','âš ï¸\x20SECURITY\x20ALARM:\x20','analysis.training.status','stdout','type','\x0aGrund:\x20','analysis.energy.ventilationAlerts','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','toString','analysis.energy.rlPenalties','insulation','parse','93713uIFdzp','12ITACse','analysis.energy.warmupTimes','write','2090850tkrgpM','existsSync','analysis.energy.insulationScore','analysis.health.isAnomaly','analysis.energy.mpcActive','child_process'];a4_0x48c2=function(){return _0xa55f40;};return a4_0x48c2();}'use strict';const {spawn}=require(a4_0x8856f4(0x1f8)),path=require('path'),fs=require('fs'),setup=require(a4_0x8856f4(0x1bf)),automation=require(a4_0x8856f4(0x1e3));let pythonProcess=null;function send(_0x29752f,_0x2cee5e,_0x12f0c9={}){const _0x170bda=a4_0x8856f4;if(!pythonProcess||!pythonProcess[_0x170bda(0x1c7)]['writable'])return;const _0x543920=JSON[_0x170bda(0x1fa)]({'command':_0x2cee5e,..._0x12f0c9});try{pythonProcess[_0x170bda(0x1c7)][_0x170bda(0x1f2)](_0x543920+'\x0a');}catch(_0x2021fa){}}function handleResult(_0x4a567e,_0x5b20d5){const _0x5b5040=a4_0x8856f4;if(_0x5b20d5['type']===_0x5b5040(0x1d0))_0x4a567e[_0x5b5040(0x1c0)][_0x5b5040(0x1c3)](_0x5b5040(0x1a7));else{if(_0x5b20d5[_0x5b5040(0x1e7)]===_0x5b5040(0x1bd)){const {anomaly_score:_0x4f2555,is_anomaly:_0x1c4422,threshold:_0x2488e1,explanation:_0x11c1b4}=_0x5b20d5['payload'];_0x4a567e['setStateAsync']('analysis.security.lastScore',{'val':_0x4f2555,'ack':!![]}),_0x4a567e[_0x5b5040(0x1dc)]('analysis.security.lastCheck',{'val':new Date()[_0x5b5040(0x1a6)](),'ack':!![]});if(_0x2488e1)_0x4a567e[_0x5b5040(0x1dc)](_0x5b5040(0x1b6),{'val':_0x2488e1,'ack':!![]});if(_0x1c4422){let _0x43114d=_0x5b5040(0x1ea)+_0x4f2555[_0x5b5040(0x1da)](0x4)+')';if(_0x11c1b4&&_0x11c1b4!=='Unknown')_0x43114d+=_0x5b5040(0x1e8)+_0x11c1b4;_0x4a567e['setStateAsync'](_0x5b5040(0x1d8),{'val':!![],'ack':!![]}),_0x4a567e['setStateAsync'](_0x5b5040(0x1d2),{'val':_0x43114d,'ack':!![]}),setup['sendNotification'](_0x4a567e,_0x5b5040(0x1e4)+_0x43114d,![],!![]);}}else{if(_0x5b20d5[_0x5b5040(0x1e7)]===_0x5b5040(0x1af)){const _0x143ab2=_0x5b20d5['payload'][_0x5b5040(0x1cb)]||'',_0x461e85=_0x5b20d5[_0x5b5040(0x1b2)][_0x5b5040(0x1aa)],_0x42991e=_0x5b20d5[_0x5b5040(0x1b2)][_0x5b5040(0x1d6)]?'Success:\x20'+new Date()[_0x5b5040(0x1de)]()+'\x20('+_0x143ab2+')':_0x5b5040(0x1b4)+_0x5b20d5[_0x5b5040(0x1b2)][_0x5b5040(0x1ce)];_0x4a567e[_0x5b5040(0x1dc)](_0x5b5040(0x1e5),{'val':_0x42991e,'ack':!![]});if(_0x5b20d5[_0x5b5040(0x1b2)][_0x5b5040(0x1d6)]&&_0x461e85)_0x4a567e[_0x5b5040(0x1dc)](_0x5b5040(0x1b6),{'val':_0x461e85,'ack':!![]});}else{if(_0x5b20d5['type']==='ENERGY_TRAIN_RESULT'){if(_0x5b20d5[_0x5b5040(0x1b2)][_0x5b5040(0x1d6)])try{const _0x2cb734=JSON[_0x5b5040(0x1ee)](_0x5b20d5[_0x5b5040(0x1b2)]['details']);if(_0x2cb734['insulation'])_0x4a567e[_0x5b5040(0x1dc)](_0x5b5040(0x1f5),{'val':JSON[_0x5b5040(0x1fa)](_0x2cb734[_0x5b5040(0x1ed)]),'ack':!![]});if(_0x2cb734[_0x5b5040(0x1ba)])_0x4a567e[_0x5b5040(0x1dc)](_0x5b5040(0x1cd),{'val':JSON[_0x5b5040(0x1fa)](_0x2cb734[_0x5b5040(0x1ba)]),'ack':!![]});}catch(_0x47a113){}}else{if(_0x5b20d5[_0x5b5040(0x1e7)]==='HEALTH_TRAIN_RESULT'){if(_0x5b20d5[_0x5b5040(0x1b2)][_0x5b5040(0x1d6)])_0x4a567e[_0x5b5040(0x1c0)][_0x5b5040(0x1ae)](_0x5b5040(0x1ac));}else{if(_0x5b20d5[_0x5b5040(0x1e7)]==='HEALTH_RESULT')_0x4a567e['setStateAsync']('analysis.health.lastCheck',{'val':new Date()[_0x5b5040(0x1a6)](),'ack':!![]}),_0x4a567e[_0x5b5040(0x1dc)](_0x5b5040(0x1f6),{'val':_0x5b20d5[_0x5b5040(0x1b2)]['is_anomaly'],'ack':!![]});else{if(_0x5b20d5['type']===_0x5b5040(0x1b9)){const {speed_trend:_0xef4fa5}=_0x5b20d5['payload'];if(_0xef4fa5!==undefined)_0x4a567e[_0x5b5040(0x1dc)]('analysis.health.gaitSpeed',{'val':_0xef4fa5,'ack':!![]});}else{if(_0x5b20d5[_0x5b5040(0x1e7)]===_0x5b5040(0x1a8)){const {forecast:_0x5383fe}=_0x5b20d5['payload'];if(_0x5383fe)_0x4a567e[_0x5b5040(0x1dc)](_0x5b5040(0x1df),{'val':JSON[_0x5b5040(0x1fa)](_0x5383fe),'ack':!![]});}else{if(_0x5b20d5[_0x5b5040(0x1e7)]===_0x5b5040(0x1d7)){const {times:_0x198be5,sources:_0x5bbd46,details:_0x36722a}=_0x5b20d5[_0x5b5040(0x1b2)];if(_0x198be5)_0x4a567e[_0x5b5040(0x1dc)](_0x5b5040(0x1f1),{'val':JSON[_0x5b5040(0x1fa)](_0x198be5),'ack':!![]});if(_0x5bbd46)_0x4a567e['setStateAsync']('analysis.energy.warmupSources',{'val':JSON['stringify'](_0x5bbd46),'ack':!![]});if(_0x36722a)_0x4a567e['setStateAsync']('analysis.energy.warmupDetails',{'val':JSON[_0x5b5040(0x1fa)](_0x36722a),'ack':!![]});}else{if(_0x5b20d5[_0x5b5040(0x1e7)]==='RL_PENALTY_UPDATE'){const {penalties:_0x45113e}=_0x5b20d5['payload'];if(_0x45113e)_0x4a567e[_0x5b5040(0x1dc)](_0x5b5040(0x1ec),{'val':JSON[_0x5b5040(0x1fa)](_0x45113e),'ack':!![]});}else{if(_0x5b20d5[_0x5b5040(0x1e7)]===_0x5b5040(0x1be)){const {forecast:_0x4aa37c}=_0x5b20d5[_0x5b5040(0x1b2)];if(_0x4aa37c)_0x4a567e[_0x5b5040(0x1dc)](_0x5b5040(0x1bb),{'val':JSON[_0x5b5040(0x1fa)](_0x4aa37c),'ack':!![]});}else{if(_0x5b20d5[_0x5b5040(0x1e7)]==='VENTILATION_ALERT'){const {alerts:_0x43971a}=_0x5b20d5[_0x5b5040(0x1b2)];if(_0x43971a)_0x4a567e[_0x5b5040(0x1dc)](_0x5b5040(0x1e9),{'val':JSON[_0x5b5040(0x1fa)](_0x43971a),'ack':!![]});}else{if(_0x5b20d5[_0x5b5040(0x1e7)]==='ENERGY_OPTIMIZE_RESULT'){const {proposals:_0x313b74}=_0x5b20d5['payload'];_0x4a567e[_0x5b5040(0x1e2)](_0x5b5040(0x1f7),(_0x4d0cc5,_0x35c9b0)=>{const _0x339ee4=_0x5b5040;_0x35c9b0&&_0x35c9b0[_0x339ee4(0x1a5)]===!![]&&_0x313b74&&_0x313b74[_0x339ee4(0x1a9)]>0x0&&automation['applyEnergySavings'](_0x4a567e,_0x313b74);});}else{if(_0x5b20d5[_0x5b5040(0x1e7)]==='SIGNAL_RESULT'){const {room:_0x2720b3,propagation:_0x3d7d3a}=_0x5b20d5[_0x5b5040(0x1b2)];let _0x5bbbac='Unknown',_0x5c1cb8=0x0;if(_0x3d7d3a){const _0x50d906=Object[_0x5b5040(0x1ad)](_0x3d7d3a);_0x50d906['length']>0x0&&(_0x5bbbac=_0x50d906[0x0][0x0],_0x5c1cb8=_0x50d906[0x0][0x1]);}_0x4a567e[_0x5b5040(0x1dc)]('analysis.prediction.nextRoom',{'val':_0x5bbbac,'ack':!![]}),_0x4a567e[_0x5b5040(0x1dc)](_0x5b5040(0x1d3),{'val':_0x5c1cb8,'ack':!![]}),automation[_0x5b5040(0x1ab)](_0x4a567e,_0x5bbbac,_0x5c1cb8);}else{if(_0x5b20d5[_0x5b5040(0x1e7)]===_0x5b5040(0x1e0)){const {probabilities:_0x89538c}=_0x5b20d5['payload'];if(_0x89538c){_0x4a567e['setStateAsync']('analysis.prediction.trackerState',{'val':JSON[_0x5b5040(0x1fa)](_0x89538c),'ack':!![]});const _0x304a1c=Object[_0x5b5040(0x1dd)](_0x89538c);if(_0x304a1c['length']>0x0){const _0x39a1d4=_0x304a1c[0x0],_0x29f32f=_0x89538c[_0x39a1d4];_0x4a567e[_0x5b5040(0x1dc)]('analysis.prediction.trackerTopRoom',{'val':_0x39a1d4,'ack':!![]}),_0x4a567e[_0x5b5040(0x1dc)](_0x5b5040(0x1d9),{'val':_0x29f32f,'ack':!![]});}}}else{if(_0x5b20d5[_0x5b5040(0x1e7)]===_0x5b5040(0x1b8)){const {patterns:_0x152e4f}=_0x5b20d5['payload'];if(_0x152e4f&&_0x152e4f[_0x5b5040(0x1a9)]>0x0)_0x4a567e[_0x5b5040(0x1dc)](_0x5b5040(0x1b7),{'val':JSON[_0x5b5040(0x1fa)](_0x152e4f),'ack':!![]});}}}}}}}}}}}}}}}}}function startService(_0x130020,_0xf41932){const _0x187109=a4_0x8856f4;let _0x51889b=_0x187109(0x1c1);if(fs[_0x187109(0x1f4)](_0xf41932))_0x51889b=_0xf41932;try{const _0x232d02=path[_0x187109(0x1db)](__dirname,'..',_0x187109(0x1cc),_0x187109(0x1c5));pythonProcess=spawn(_0x51889b,[_0x232d02]),pythonProcess[_0x187109(0x1e6)]['on']('data',_0x59b3f6=>{const _0x1f055b=_0x187109,_0x5be09e=_0x59b3f6[_0x1f055b(0x1eb)]()['split']('\x0a');_0x5be09e[_0x1f055b(0x1f9)](_0x5e7aa9=>{const _0x52a0fb=_0x1f055b,_0x42f14e=_0x5e7aa9[_0x52a0fb(0x1c9)]();if(!_0x42f14e)return;if(_0x42f14e[_0x52a0fb(0x1bc)]('[LOG]'))_0x130020['log']['debug']('[PYTHON]\x20'+_0x42f14e[_0x52a0fb(0x1cf)](0x5)['trim']());else{if(_0x42f14e[_0x52a0fb(0x1bc)](_0x52a0fb(0x1fc)))try{const _0x4485bf=JSON[_0x52a0fb(0x1ee)](_0x42f14e[_0x52a0fb(0x1cf)](0x8)[_0x52a0fb(0x1c9)]());handleResult(_0x130020,_0x4485bf);}catch(_0x5bc35c){}}});}),pythonProcess['on'](_0x187109(0x1b0),_0x1bcd18=>{pythonProcess=null;}),_0x130020[_0x187109(0x1b3)]=(_0x3869bb,_0x54a968)=>send(_0x130020,_0x3869bb,_0x54a968);}catch(_0x255a3c){_0x130020[_0x187109(0x1c0)][_0x187109(0x1c8)]('Error\x20launching\x20Python:\x20'+_0x255a3c['message']);}}function stopService(_0x250336){const _0x15c97c=a4_0x8856f4;if(pythonProcess){try{pythonProcess[_0x15c97c(0x1ca)]();}catch(_0x302c25){}pythonProcess=null;}}function a4_0x14ca(_0x25600f,_0xb03d32){const _0x33357d=a4_0x48c2();return a4_0x14ca=function(_0x53fc01,_0xea1635){_0x53fc01=_0x53fc01-0x1a5;let _0x48c2ee=_0x33357d[_0x53fc01];return _0x48c2ee;},a4_0x14ca(_0x25600f,_0xb03d32);}module[a4_0x8856f4(0x1d5)]={'startService':startService,'stopService':stopService,'send':send};