const a4_0x5784ee=a4_0x4e73;(function(_0x4f5964,_0x5d61a0){const _0x5a5881=a4_0x4e73,_0x59d17c=_0x4f5964();while(!![]){try{const _0x1f155d=parseInt(_0x5a5881(0xda))/0x1*(parseInt(_0x5a5881(0x138))/0x2)+-parseInt(_0x5a5881(0x118))/0x3*(-parseInt(_0x5a5881(0xe9))/0x4)+-parseInt(_0x5a5881(0x12f))/0x5*(parseInt(_0x5a5881(0xe7))/0x6)+parseInt(_0x5a5881(0x126))/0x7*(-parseInt(_0x5a5881(0x10e))/0x8)+-parseInt(_0x5a5881(0xfe))/0x9*(parseInt(_0x5a5881(0xd5))/0xa)+-parseInt(_0x5a5881(0x106))/0xb+parseInt(_0x5a5881(0xf1))/0xc*(parseInt(_0x5a5881(0x124))/0xd);if(_0x1f155d===_0x5d61a0)break;else _0x59d17c['push'](_0x59d17c['shift']());}catch(_0x7f281d){_0x59d17c['push'](_0x59d17c['shift']());}}}(a4_0x2b38,0x6cdc4));const a4_0x2bc9e4=(function(){let _0x714e26=!![];return function(_0x3754fd,_0x20b51f){const _0x5917f0=_0x714e26?function(){const _0x5d6c32=a4_0x4e73;if(_0x20b51f){const _0x1f5734=_0x20b51f[_0x5d6c32(0xeb)](_0x3754fd,arguments);return _0x20b51f=null,_0x1f5734;}}:function(){};return _0x714e26=![],_0x5917f0;};}()),a4_0x4d934d=a4_0x2bc9e4(this,function(){const _0x2762ea=a4_0x4e73;return a4_0x4d934d[_0x2762ea(0x132)]()[_0x2762ea(0x105)]('(((.+)+)+)+$')[_0x2762ea(0x132)]()[_0x2762ea(0xdd)](a4_0x4d934d)[_0x2762ea(0x105)](_0x2762ea(0x103));});function a4_0x2b38(){const _0x59d77c=['analysis.health.activityTrend','Failed:\x20','2-digit','analysis.prediction.trackerConfidence','analysis.security.lastScore','HEALTH_TRAIN_RESULT','forEach','ðŸ\x20Python\x20Pong','3585ulFSXN','COMFORT_RESULT','payload','toString','analysis.prediction.trackerState','HEALTH_TREND_RESULT','HEALTH_RESULT','ðŸ“ˆ\x20Health\x20Trend:\x20','getState','2806LwTybV','applyEnergySavings','analysis.energy.ventilationAlerts','./automation','analysis.alertReason','length','ENERGY_OPTIMIZE_RESULT','de-DE','entries','âœ…\x20HEALTH\x20TRAINED.','1106260DViHSU','analysis.energy.warmupDetails','sendToPythonWrapper','analysis.energy.rlPenalties','threshold','169MXaMBf','analysis.health.lastCheck','python3','constructor','startsWith','stringify','VENTILATION_ALERT','sendNotification','analysis.prediction.confidence','analysis.training.status','stdin','setStateAsync','debug','2874bZxiNt','warn','622572vuXtzH','âš ï¸\x20SECURITY\x20ALARM:\x20','apply','TRAINING_COMPLETE','analysis.energy.forecast','Success:\x20','close','join','21046848ZsMuGT','existsSync','analysis.energy.warmupSources','analysis.isAlert','log','write','analysis.energy.pinnForecast','TRACKER_RESULT','info','child_process','SECURITY_RESULT','toFixed','analysis.health.gaitSensors','72FdiIRy','[LOG]','analysis.prediction.nextRoom','exports','details','(((.+)+)+)+$','\x20AND\x20','search','5056700XSPtws','[PYTHON]\x20','short','data','kill','trim','WARMUP_RESULT','heating','8akyJEx','GAIT_RESULT','Unknown','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20','success','\x0aGrund:\x20','toLocaleDateString','ENERGY_TRAIN_RESULT','reason','analysis.automation.detectedPatterns','3wqGigS','val','error','toISOString','is_anomaly','RL_PENALTY_UPDATE','type','Python\x20process\x20exited\x20with\x20code\x20','substring','insulation','SIGNAL_RESULT','analysis.energy.warmupTimes','13yIOjcr','Error\x20launching\x20Python:\x20','88277hKzhmy'];a4_0x2b38=function(){return _0x59d77c;};return a4_0x2b38();}a4_0x4d934d();'use strict';const {spawn}=require(a4_0x5784ee(0xfa)),path=require('path'),fs=require('fs'),setup=require('./setup'),automation=require(a4_0x5784ee(0x13b));let pythonProcess=null;function send(_0x4e849a,_0x1f0152,_0x404d25={}){const _0x1b1bc6=a4_0x5784ee;if(!pythonProcess||!pythonProcess[_0x1b1bc6(0xe4)]['writable'])return;const _0x4f5e07=JSON[_0x1b1bc6(0xdf)]({'command':_0x1f0152,..._0x404d25});try{pythonProcess[_0x1b1bc6(0xe4)][_0x1b1bc6(0xf6)](_0x4f5e07+'\x0a');}catch(_0x56a401){}}function handleResult(_0x5dea97,_0x487121){const _0x337b5d=a4_0x5784ee;if(_0x487121[_0x337b5d(0x11e)]==='PONG')_0x5dea97['log']['debug'](_0x337b5d(0x12e));else{if(_0x487121[_0x337b5d(0x11e)]===_0x337b5d(0xfb)){const {anomaly_score:_0x18a8a3,is_anomaly:_0x26006a,threshold:_0x3a9926,explanation:_0x3206c5}=_0x487121[_0x337b5d(0x131)];_0x5dea97['setStateAsync'](_0x337b5d(0x12b),{'val':_0x18a8a3,'ack':!![]}),_0x5dea97['setStateAsync']('analysis.security.lastCheck',{'val':new Date()[_0x337b5d(0x11b)](),'ack':!![]});if(_0x3a9926)_0x5dea97['setStateAsync']('analysis.security.currentThreshold',{'val':_0x3a9926,'ack':!![]});if(_0x26006a){let _0x1fdafa='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x18a8a3[_0x337b5d(0xfc)](0x4)+')';if(_0x3206c5&&_0x3206c5!=='Unknown')_0x1fdafa+=_0x337b5d(0x113)+_0x3206c5;_0x5dea97[_0x337b5d(0xe5)](_0x337b5d(0xf4),{'val':!![],'ack':!![]}),_0x5dea97['setStateAsync'](_0x337b5d(0x13c),{'val':_0x1fdafa,'ack':!![]}),setup[_0x337b5d(0xe1)](_0x5dea97,_0x337b5d(0xea)+_0x1fdafa,![],!![]);}}else{if(_0x487121[_0x337b5d(0x11e)]===_0x337b5d(0xec)){const _0x31b83e=_0x487121[_0x337b5d(0x131)][_0x337b5d(0x102)]||'',_0x217f34=_0x487121[_0x337b5d(0x131)][_0x337b5d(0xd9)],_0x100710=_0x487121['payload'][_0x337b5d(0x112)]?_0x337b5d(0xee)+new Date()['toLocaleTimeString']()+'\x20('+_0x31b83e+')':_0x337b5d(0x128)+_0x487121[_0x337b5d(0x131)][_0x337b5d(0x116)];_0x5dea97['setStateAsync'](_0x337b5d(0xe3),{'val':_0x100710,'ack':!![]});if(_0x487121[_0x337b5d(0x131)][_0x337b5d(0x112)]&&_0x217f34)_0x5dea97[_0x337b5d(0xe5)]('analysis.security.currentThreshold',{'val':_0x217f34,'ack':!![]});}else{if(_0x487121[_0x337b5d(0x11e)]===_0x337b5d(0x115)){if(_0x487121[_0x337b5d(0x131)]['success'])try{const _0x5095ca=JSON['parse'](_0x487121[_0x337b5d(0x131)]['details']);if(_0x5095ca[_0x337b5d(0x121)])_0x5dea97[_0x337b5d(0xe5)]('analysis.energy.insulationScore',{'val':JSON[_0x337b5d(0xdf)](_0x5095ca[_0x337b5d(0x121)]),'ack':!![]});if(_0x5095ca[_0x337b5d(0x10d)])_0x5dea97[_0x337b5d(0xe5)]('analysis.energy.heatingScore',{'val':JSON[_0x337b5d(0xdf)](_0x5095ca[_0x337b5d(0x10d)]),'ack':!![]});}catch(_0x348102){}}else{if(_0x487121[_0x337b5d(0x11e)]===_0x337b5d(0x12c)){if(_0x487121[_0x337b5d(0x131)][_0x337b5d(0x112)]){_0x5dea97[_0x337b5d(0xf5)][_0x337b5d(0xf9)](_0x337b5d(0xd4));const _0x41b325=new Date(),_0xb48e13=_0x41b325[_0x337b5d(0x114)](_0x337b5d(0xd2),{'day':_0x337b5d(0x129),'month':'short','hour':_0x337b5d(0x129),'minute':_0x337b5d(0x129)});_0x5dea97[_0x337b5d(0xe5)](_0x337b5d(0xdb),{'val':_0xb48e13,'ack':!![]});}}else{if(_0x487121['type']===_0x337b5d(0x135)){const _0x45bc0d=new Date(),_0x2c7438=_0x45bc0d[_0x337b5d(0x114)](_0x337b5d(0xd2),{'day':_0x337b5d(0x129),'month':_0x337b5d(0x108),'hour':'2-digit','minute':'2-digit'});_0x5dea97[_0x337b5d(0xe5)](_0x337b5d(0xdb),{'val':_0x2c7438,'ack':!![]}),_0x5dea97['setStateAsync']('analysis.health.isAnomaly',{'val':_0x487121[_0x337b5d(0x131)][_0x337b5d(0x11c)],'ack':!![]});}else{if(_0x487121[_0x337b5d(0x11e)]===_0x337b5d(0x134)){const {trend_percent:_0x3f1332,details:_0x4f946f}=_0x487121[_0x337b5d(0x131)],_0x2b661d=new Date(),_0x2bdcf6=_0x2b661d['toLocaleDateString'](_0x337b5d(0xd2),{'day':'2-digit','month':_0x337b5d(0x108),'hour':'2-digit','minute':_0x337b5d(0x129)});_0x5dea97[_0x337b5d(0xe5)]('analysis.health.lastCheck',{'val':_0x2bdcf6,'ack':!![]}),_0x5dea97[_0x337b5d(0xe5)](_0x337b5d(0x127),{'val':_0x3f1332,'ack':!![]}),_0x5dea97[_0x337b5d(0xf5)]['info'](_0x337b5d(0x136)+_0x4f946f);}else{if(_0x487121[_0x337b5d(0x11e)]===_0x337b5d(0x10f)){const {speed_trend:_0x45c190,sensors:_0x3767e0,proof:_0x509caf}=_0x487121[_0x337b5d(0x131)];if(_0x45c190!==undefined)_0x5dea97['setStateAsync']('analysis.health.gaitSpeed',{'val':_0x45c190,'ack':!![]});if(_0x3767e0&&Array['isArray'](_0x3767e0))_0x5dea97['setStateAsync'](_0x337b5d(0xfd),{'val':_0x3767e0[_0x337b5d(0xf0)](',\x20'),'ack':!![]});if(_0x509caf)_0x5dea97['setStateAsync']('analysis.health.gaitDebug',{'val':_0x509caf,'ack':!![]});}else{if(_0x487121['type']==='ENERGY_PREDICT_RESULT'){const {forecast:_0x4ed767}=_0x487121[_0x337b5d(0x131)];if(_0x4ed767)_0x5dea97['setStateAsync'](_0x337b5d(0xed),{'val':JSON[_0x337b5d(0xdf)](_0x4ed767),'ack':!![]});}else{if(_0x487121[_0x337b5d(0x11e)]===_0x337b5d(0x10c)){const {times:_0x280540,sources:_0x3aa765,details:_0x25349}=_0x487121['payload'];if(_0x280540)_0x5dea97[_0x337b5d(0xe5)](_0x337b5d(0x123),{'val':JSON[_0x337b5d(0xdf)](_0x280540),'ack':!![]});if(_0x3aa765)_0x5dea97[_0x337b5d(0xe5)](_0x337b5d(0xf3),{'val':JSON[_0x337b5d(0xdf)](_0x3aa765),'ack':!![]});if(_0x25349)_0x5dea97[_0x337b5d(0xe5)](_0x337b5d(0xd6),{'val':JSON[_0x337b5d(0xdf)](_0x25349),'ack':!![]});}else{if(_0x487121[_0x337b5d(0x11e)]===_0x337b5d(0x11d)){const {penalties:_0x2c9970}=_0x487121['payload'];if(_0x2c9970)_0x5dea97['setStateAsync'](_0x337b5d(0xd8),{'val':JSON[_0x337b5d(0xdf)](_0x2c9970),'ack':!![]});}else{if(_0x487121[_0x337b5d(0x11e)]==='PINN_PREDICT_RESULT'){const {forecast:_0x4afe38}=_0x487121[_0x337b5d(0x131)];if(_0x4afe38)_0x5dea97[_0x337b5d(0xe5)](_0x337b5d(0xf7),{'val':JSON[_0x337b5d(0xdf)](_0x4afe38),'ack':!![]});}else{if(_0x487121['type']===_0x337b5d(0xe0)){const {alerts:_0xa9e7b0}=_0x487121[_0x337b5d(0x131)];if(_0xa9e7b0)_0x5dea97[_0x337b5d(0xe5)](_0x337b5d(0x13a),{'val':JSON[_0x337b5d(0xdf)](_0xa9e7b0),'ack':!![]});}else{if(_0x487121[_0x337b5d(0x11e)]===_0x337b5d(0xd1)){const {proposals:_0x2f15f9}=_0x487121[_0x337b5d(0x131)];_0x5dea97[_0x337b5d(0x137)]('analysis.energy.mpcActive',(_0x17c143,_0x5049df)=>{const _0x371b88=_0x337b5d;_0x5049df&&_0x5049df[_0x371b88(0x119)]===!![]&&_0x2f15f9&&_0x2f15f9['length']>0x0&&automation[_0x371b88(0x139)](_0x5dea97,_0x2f15f9);});}else{if(_0x487121[_0x337b5d(0x11e)]===_0x337b5d(0x122)){const {room:_0x25aaa0,propagation:_0x4ca181}=_0x487121[_0x337b5d(0x131)];let _0x548bd3=_0x337b5d(0x110),_0x446cfa=0x0;if(_0x4ca181){const _0x145e94=Object[_0x337b5d(0xd3)](_0x4ca181);_0x145e94[_0x337b5d(0xd0)]>0x0&&(_0x548bd3=_0x145e94[0x0][0x0],_0x446cfa=_0x145e94[0x0][0x1]);}_0x5dea97[_0x337b5d(0xe5)](_0x337b5d(0x100),{'val':_0x548bd3,'ack':!![]}),_0x5dea97[_0x337b5d(0xe5)](_0x337b5d(0xe2),{'val':_0x446cfa,'ack':!![]}),automation['handlePrediction'](_0x5dea97,_0x548bd3,_0x446cfa);}else{if(_0x487121['type']===_0x337b5d(0xf8)){const {probabilities:_0x7989fc}=_0x487121[_0x337b5d(0x131)];if(_0x7989fc){_0x5dea97[_0x337b5d(0xe5)](_0x337b5d(0x133),{'val':JSON[_0x337b5d(0xdf)](_0x7989fc),'ack':!![]});const _0x35c4e1=Object['keys'](_0x7989fc);if(_0x35c4e1[_0x337b5d(0xd0)]>0x0){const _0x33bc1b=_0x35c4e1[0x0],_0x5abfe3=_0x7989fc[_0x33bc1b];_0x5dea97[_0x337b5d(0xe5)]('analysis.prediction.trackerTopRoom',{'val':_0x33bc1b,'ack':!![]}),_0x5dea97[_0x337b5d(0xe5)](_0x337b5d(0x12a),{'val':_0x5abfe3,'ack':!![]});}}}else{if(_0x487121['type']===_0x337b5d(0x130)){const {patterns:_0x4e3bb1}=_0x487121[_0x337b5d(0x131)];if(_0x4e3bb1&&_0x4e3bb1[_0x337b5d(0xd0)]>0x0)_0x5dea97[_0x337b5d(0xe5)](_0x337b5d(0x117),{'val':JSON[_0x337b5d(0xdf)](_0x4e3bb1),'ack':!![]});}}}}}}}}}}}}}}}}}}function startService(_0x302020,_0x4122ca){const _0x3baed4=a4_0x5784ee;let _0x4e420f=_0x3baed4(0xdc);if(fs[_0x3baed4(0xf2)](_0x4122ca))_0x4e420f=_0x4122ca;const _0x366b87=path[_0x3baed4(0xf0)](__dirname,'..','service.py'),_0x29db09=path[_0x3baed4(0xf0)](__dirname,'..','python_service','service.py');let _0x358dd5='';if(fs['existsSync'](_0x366b87))_0x358dd5=_0x366b87;else{if(fs['existsSync'](_0x29db09))_0x358dd5=_0x29db09;else{_0x302020['log'][_0x3baed4(0x11a)](_0x3baed4(0x111)+_0x366b87+_0x3baed4(0x104)+_0x29db09+'.\x20Please\x20create\x20this\x20file!');return;}}try{_0x302020[_0x3baed4(0xf5)][_0x3baed4(0xf9)]('ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20'+_0x4e420f+'\x20'+_0x358dd5),pythonProcess=spawn(_0x4e420f,[_0x358dd5]),pythonProcess['stdout']['on'](_0x3baed4(0x109),_0x2df332=>{const _0x3377e8=_0x3baed4,_0xc474a7=_0x2df332['toString']()['split']('\x0a');_0xc474a7[_0x3377e8(0x12d)](_0x421483=>{const _0x34eb6e=_0x3377e8,_0x526d93=_0x421483['trim']();if(!_0x526d93)return;if(_0x526d93[_0x34eb6e(0xde)](_0x34eb6e(0xff)))_0x302020[_0x34eb6e(0xf5)][_0x34eb6e(0xe6)](_0x34eb6e(0x107)+_0x526d93['substring'](0x5)[_0x34eb6e(0x10b)]());else{if(_0x526d93[_0x34eb6e(0xde)]('[RESULT]'))try{const _0x1619f1=JSON['parse'](_0x526d93[_0x34eb6e(0x120)](0x8)[_0x34eb6e(0x10b)]());handleResult(_0x302020,_0x1619f1);}catch(_0x2973ad){}}});}),pythonProcess['stderr']['on'](_0x3baed4(0x109),_0x55bee9=>{const _0x1dd6f7=_0x3baed4;_0x302020['log'][_0x1dd6f7(0x11a)]('[PYTHON\x20ERR]\x20'+_0x55bee9['toString']()[_0x1dd6f7(0x10b)]());}),pythonProcess['on'](_0x3baed4(0xef),_0x5c3997=>{const _0x222320=_0x3baed4;_0x302020[_0x222320(0xf5)][_0x222320(0xe8)](_0x222320(0x11f)+_0x5c3997),pythonProcess=null;}),_0x302020[_0x3baed4(0xd7)]=(_0x4ae14b,_0x52a2d8)=>send(_0x302020,_0x4ae14b,_0x52a2d8);}catch(_0x20cba4){_0x302020[_0x3baed4(0xf5)][_0x3baed4(0x11a)](_0x3baed4(0x125)+_0x20cba4['message']);}}function stopService(_0x470b3c){const _0xec6d0e=a4_0x5784ee;if(pythonProcess){try{pythonProcess[_0xec6d0e(0x10a)]();}catch(_0xa3955d){}pythonProcess=null;}}function a4_0x4e73(_0x5d89d6,_0x521c0d){const _0x276a07=a4_0x2b38();return a4_0x4e73=function(_0x4d934d,_0x2bc9e4){_0x4d934d=_0x4d934d-0xd0;let _0x2b38e7=_0x276a07[_0x4d934d];return _0x2b38e7;},a4_0x4e73(_0x5d89d6,_0x521c0d);}module[a4_0x5784ee(0x101)]={'startService':startService,'stopService':stopService,'send':send};