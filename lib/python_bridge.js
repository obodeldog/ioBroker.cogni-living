const a4_0x50e764=a4_0x59c1;function a4_0x3075(){const _0x288467=['4corVCn','writable','toLocaleDateString','insulation','HEALTH_RESULT','analysis.automation.detectedPatterns','analysis.energy.pinnForecast','warn','details','data','stdin','SIGNAL_RESULT','threshold','split','getState','GAIT_RESULT','analysis.health.lastCheck','analysis.prediction.confidence','stdout','constructor','(((.+)+)+)+$','exports','child_process','analysis.energy.mpcActive','78839SZVOFx','ENERGY_OPTIMIZE_RESULT','reason','VENTILATION_ALERT','de-DE','python_service','PONG','ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20','\x20AND\x20','python3','Failed:\x20','.\x20Please\x20create\x20this\x20file!','heating','existsSync','success','analysis.isAlert','message','debug','close','length','5814928gNhCAV','stringify','trim','analysis.health.gaitSpeed','analysis.energy.warmupDetails','2-digit','isArray','./automation','analysis.energy.insulationScore','ENERGY_PREDICT_RESULT','ðŸ\x20Python\x20Pong','stderr','7751667dwJKrC','Success:\x20','analysis.energy.warmupSources','SECURITY_RESULT','117360ArqLqX','WARMUP_RESULT','analysis.health.isAnomaly','service.py','2962896boTRMB','5FHsaXA','analysis.training.status','analysis.health.gaitDebug','[LOG]','analysis.energy.rlPenalties','forEach','ðŸ“ˆ\x20Health\x20Trend:\x20','[RESULT]','type','Unknown','analysis.energy.warmupTimes','toLocaleTimeString','analysis.security.lastCheck','HEALTH_TREND_RESULT','1034889sNEJGT','analysis.energy.forecast','./setup','âœ…\x20HEALTH\x20TRAINED.','setStateAsync','analysis.security.currentThreshold','payload','TRAINING_COMPLETE','12270483sawsHs','PINN_PREDICT_RESULT','is_anomaly','entries','write','Error\x20launching\x20Python:\x20','toString','[PYTHON]\x20','substring','path','analysis.prediction.trackerState','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20','Python\x20process\x20exited\x20with\x20code\x20','search','[PYTHON\x20ERR]\x20','short','toFixed','parse','analysis.prediction.nextRoom','info','error','startsWith','HEALTH_TRAIN_RESULT','log','\x0aGrund:\x20','analysis.health.gaitSensors'];a4_0x3075=function(){return _0x288467;};return a4_0x3075();}(function(_0x370f1a,_0xa1af30){const _0x1108f3=a4_0x59c1,_0x84ae72=_0x370f1a();while(!![]){try{const _0x4f7e2a=-parseInt(_0x1108f3(0xd3))/0x1+-parseInt(_0x1108f3(0xbb))/0x2*(-parseInt(_0x1108f3(0x99))/0x3)+parseInt(_0x1108f3(0x86))/0x4+-parseInt(_0x1108f3(0x8b))/0x5*(parseInt(_0x1108f3(0x8a))/0x6)+parseInt(_0x1108f3(0xf3))/0x7+parseInt(_0x1108f3(0xe7))/0x8+-parseInt(_0x1108f3(0xa1))/0x9;if(_0x4f7e2a===_0xa1af30)break;else _0x84ae72['push'](_0x84ae72['shift']());}catch(_0x9c71e0){_0x84ae72['push'](_0x84ae72['shift']());}}}(a4_0x3075,0x96bff));const a4_0x1e3338=(function(){let _0x2a0b87=!![];return function(_0x408d93,_0x1b979e){const _0x197843=_0x2a0b87?function(){if(_0x1b979e){const _0x2bcb0c=_0x1b979e['apply'](_0x408d93,arguments);return _0x1b979e=null,_0x2bcb0c;}}:function(){};return _0x2a0b87=![],_0x197843;};}()),a4_0x1b6689=a4_0x1e3338(this,function(){const _0xbf1423=a4_0x59c1;return a4_0x1b6689['toString']()[_0xbf1423(0xae)](_0xbf1423(0xcf))[_0xbf1423(0xa7)]()[_0xbf1423(0xce)](a4_0x1b6689)['search']('(((.+)+)+)+$');});a4_0x1b6689();'use strict';const {spawn}=require(a4_0x50e764(0xd1)),path=require(a4_0x50e764(0xaa)),fs=require('fs'),setup=require(a4_0x50e764(0x9b)),automation=require(a4_0x50e764(0xee));let pythonProcess=null;function send(_0x533370,_0x30164a,_0x3641b9={}){const _0x529487=a4_0x50e764;if(!pythonProcess||!pythonProcess[_0x529487(0xc5)][_0x529487(0xbc)])return;const _0x2f32e3=JSON[_0x529487(0xe8)]({'command':_0x30164a,..._0x3641b9});try{pythonProcess['stdin'][_0x529487(0xa5)](_0x2f32e3+'\x0a');}catch(_0x3e835d){}}function handleResult(_0x191f9a,_0x507dd3){const _0x3c7cc4=a4_0x50e764;if(_0x507dd3[_0x3c7cc4(0x93)]===_0x3c7cc4(0xd9))_0x191f9a['log']['debug'](_0x3c7cc4(0xf1));else{if(_0x507dd3[_0x3c7cc4(0x93)]===_0x3c7cc4(0x85)){const {anomaly_score:_0x4de29f,is_anomaly:_0x316e40,threshold:_0x65feb0,explanation:_0x258c0d}=_0x507dd3['payload'];_0x191f9a[_0x3c7cc4(0x9d)]('analysis.security.lastScore',{'val':_0x4de29f,'ack':!![]}),_0x191f9a['setStateAsync'](_0x3c7cc4(0x97),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x65feb0)_0x191f9a['setStateAsync'](_0x3c7cc4(0x9e),{'val':_0x65feb0,'ack':!![]});if(_0x316e40){let _0x22a644='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x4de29f[_0x3c7cc4(0xb1)](0x4)+')';if(_0x258c0d&&_0x258c0d!==_0x3c7cc4(0x94))_0x22a644+=_0x3c7cc4(0xb9)+_0x258c0d;_0x191f9a['setStateAsync'](_0x3c7cc4(0xe2),{'val':!![],'ack':!![]}),_0x191f9a['setStateAsync']('analysis.alertReason',{'val':_0x22a644,'ack':!![]}),setup['sendNotification'](_0x191f9a,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x22a644,![],!![]);}}else{if(_0x507dd3['type']===_0x3c7cc4(0xa0)){const _0x454f70=_0x507dd3[_0x3c7cc4(0x9f)][_0x3c7cc4(0xc3)]||'',_0x11fc90=_0x507dd3['payload'][_0x3c7cc4(0xc7)],_0x4d8b4e=_0x507dd3[_0x3c7cc4(0x9f)][_0x3c7cc4(0xe1)]?_0x3c7cc4(0xf4)+new Date()[_0x3c7cc4(0x96)]()+'\x20('+_0x454f70+')':_0x3c7cc4(0xdd)+_0x507dd3[_0x3c7cc4(0x9f)][_0x3c7cc4(0xd5)];_0x191f9a[_0x3c7cc4(0x9d)](_0x3c7cc4(0x8c),{'val':_0x4d8b4e,'ack':!![]});if(_0x507dd3['payload'][_0x3c7cc4(0xe1)]&&_0x11fc90)_0x191f9a[_0x3c7cc4(0x9d)]('analysis.security.currentThreshold',{'val':_0x11fc90,'ack':!![]});}else{if(_0x507dd3['type']==='ENERGY_TRAIN_RESULT'){if(_0x507dd3[_0x3c7cc4(0x9f)][_0x3c7cc4(0xe1)])try{const _0x5da2cf=JSON[_0x3c7cc4(0xb2)](_0x507dd3[_0x3c7cc4(0x9f)][_0x3c7cc4(0xc3)]);if(_0x5da2cf['insulation'])_0x191f9a[_0x3c7cc4(0x9d)](_0x3c7cc4(0xef),{'val':JSON[_0x3c7cc4(0xe8)](_0x5da2cf[_0x3c7cc4(0xbe)]),'ack':!![]});if(_0x5da2cf[_0x3c7cc4(0xdf)])_0x191f9a[_0x3c7cc4(0x9d)]('analysis.energy.heatingScore',{'val':JSON[_0x3c7cc4(0xe8)](_0x5da2cf[_0x3c7cc4(0xdf)]),'ack':!![]});}catch(_0x1377a8){}}else{if(_0x507dd3[_0x3c7cc4(0x93)]===_0x3c7cc4(0xb7)){if(_0x507dd3[_0x3c7cc4(0x9f)][_0x3c7cc4(0xe1)]){_0x191f9a[_0x3c7cc4(0xb8)][_0x3c7cc4(0xb4)](_0x3c7cc4(0x9c));const _0x38c796=new Date(),_0x43557c=_0x38c796['toLocaleDateString']('de-DE',{'day':_0x3c7cc4(0xec),'month':_0x3c7cc4(0xb0),'hour':'2-digit','minute':_0x3c7cc4(0xec)});_0x191f9a[_0x3c7cc4(0x9d)]('analysis.health.lastCheck',{'val':_0x43557c,'ack':!![]});}}else{if(_0x507dd3[_0x3c7cc4(0x93)]===_0x3c7cc4(0xbf)){const _0x1d88cd=new Date(),_0x469e51=_0x1d88cd[_0x3c7cc4(0xbd)](_0x3c7cc4(0xd7),{'day':'2-digit','month':_0x3c7cc4(0xb0),'hour':_0x3c7cc4(0xec),'minute':'2-digit'});_0x191f9a[_0x3c7cc4(0x9d)](_0x3c7cc4(0xcb),{'val':_0x469e51,'ack':!![]}),_0x191f9a[_0x3c7cc4(0x9d)](_0x3c7cc4(0x88),{'val':_0x507dd3[_0x3c7cc4(0x9f)][_0x3c7cc4(0xa3)],'ack':!![]});}else{if(_0x507dd3[_0x3c7cc4(0x93)]===_0x3c7cc4(0x98)){const {trend_percent:_0x47159b,details:_0x47ca6a}=_0x507dd3[_0x3c7cc4(0x9f)],_0xf39f2e=new Date(),_0x24421b=_0xf39f2e[_0x3c7cc4(0xbd)](_0x3c7cc4(0xd7),{'day':_0x3c7cc4(0xec),'month':_0x3c7cc4(0xb0),'hour':_0x3c7cc4(0xec),'minute':_0x3c7cc4(0xec)});_0x191f9a['setStateAsync']('analysis.health.lastCheck',{'val':_0x24421b,'ack':!![]}),_0x191f9a['setStateAsync']('analysis.health.activityTrend',{'val':_0x47159b,'ack':!![]}),_0x191f9a[_0x3c7cc4(0xb8)][_0x3c7cc4(0xb4)](_0x3c7cc4(0x91)+_0x47ca6a);}else{if(_0x507dd3['type']===_0x3c7cc4(0xca)){const {speed_trend:_0x23e7d5,sensors:_0x5e4ee4,proof:_0x5c88ed}=_0x507dd3['payload'];if(_0x23e7d5!==undefined)_0x191f9a[_0x3c7cc4(0x9d)](_0x3c7cc4(0xea),{'val':_0x23e7d5,'ack':!![]});if(_0x5e4ee4&&Array[_0x3c7cc4(0xed)](_0x5e4ee4))_0x191f9a[_0x3c7cc4(0x9d)](_0x3c7cc4(0xba),{'val':_0x5e4ee4['join'](',\x20'),'ack':!![]});if(_0x5c88ed)_0x191f9a[_0x3c7cc4(0x9d)](_0x3c7cc4(0x8d),{'val':_0x5c88ed,'ack':!![]});}else{if(_0x507dd3[_0x3c7cc4(0x93)]===_0x3c7cc4(0xf0)){const {forecast:_0x308a47}=_0x507dd3[_0x3c7cc4(0x9f)];if(_0x308a47)_0x191f9a[_0x3c7cc4(0x9d)](_0x3c7cc4(0x9a),{'val':JSON[_0x3c7cc4(0xe8)](_0x308a47),'ack':!![]});}else{if(_0x507dd3['type']===_0x3c7cc4(0x87)){const {times:_0x55322d,sources:_0x51c2af,details:_0x591ba9}=_0x507dd3[_0x3c7cc4(0x9f)];if(_0x55322d)_0x191f9a[_0x3c7cc4(0x9d)](_0x3c7cc4(0x95),{'val':JSON['stringify'](_0x55322d),'ack':!![]});if(_0x51c2af)_0x191f9a[_0x3c7cc4(0x9d)](_0x3c7cc4(0x84),{'val':JSON[_0x3c7cc4(0xe8)](_0x51c2af),'ack':!![]});if(_0x591ba9)_0x191f9a[_0x3c7cc4(0x9d)](_0x3c7cc4(0xeb),{'val':JSON[_0x3c7cc4(0xe8)](_0x591ba9),'ack':!![]});}else{if(_0x507dd3['type']==='RL_PENALTY_UPDATE'){const {penalties:_0x292441}=_0x507dd3[_0x3c7cc4(0x9f)];if(_0x292441)_0x191f9a[_0x3c7cc4(0x9d)](_0x3c7cc4(0x8f),{'val':JSON[_0x3c7cc4(0xe8)](_0x292441),'ack':!![]});}else{if(_0x507dd3[_0x3c7cc4(0x93)]===_0x3c7cc4(0xa2)){const {forecast:_0x455814}=_0x507dd3[_0x3c7cc4(0x9f)];if(_0x455814)_0x191f9a[_0x3c7cc4(0x9d)](_0x3c7cc4(0xc1),{'val':JSON[_0x3c7cc4(0xe8)](_0x455814),'ack':!![]});}else{if(_0x507dd3[_0x3c7cc4(0x93)]===_0x3c7cc4(0xd6)){const {alerts:_0x39699f}=_0x507dd3['payload'];if(_0x39699f)_0x191f9a[_0x3c7cc4(0x9d)]('analysis.energy.ventilationAlerts',{'val':JSON[_0x3c7cc4(0xe8)](_0x39699f),'ack':!![]});}else{if(_0x507dd3[_0x3c7cc4(0x93)]===_0x3c7cc4(0xd4)){const {proposals:_0x2d3c4e}=_0x507dd3[_0x3c7cc4(0x9f)];_0x191f9a[_0x3c7cc4(0xc9)](_0x3c7cc4(0xd2),(_0x1b9fbc,_0x11ef7d)=>{const _0x481462=_0x3c7cc4;_0x11ef7d&&_0x11ef7d['val']===!![]&&_0x2d3c4e&&_0x2d3c4e[_0x481462(0xe6)]>0x0&&automation['applyEnergySavings'](_0x191f9a,_0x2d3c4e);});}else{if(_0x507dd3['type']===_0x3c7cc4(0xc6)){const {room:_0x3391ba,propagation:_0x351014}=_0x507dd3[_0x3c7cc4(0x9f)];let _0x168c0d=_0x3c7cc4(0x94),_0x3adc63=0x0;if(_0x351014){const _0x6a0910=Object[_0x3c7cc4(0xa4)](_0x351014);_0x6a0910[_0x3c7cc4(0xe6)]>0x0&&(_0x168c0d=_0x6a0910[0x0][0x0],_0x3adc63=_0x6a0910[0x0][0x1]);}_0x191f9a[_0x3c7cc4(0x9d)](_0x3c7cc4(0xb3),{'val':_0x168c0d,'ack':!![]}),_0x191f9a[_0x3c7cc4(0x9d)](_0x3c7cc4(0xcc),{'val':_0x3adc63,'ack':!![]}),automation['handlePrediction'](_0x191f9a,_0x168c0d,_0x3adc63);}else{if(_0x507dd3[_0x3c7cc4(0x93)]==='TRACKER_RESULT'){const {probabilities:_0x186405}=_0x507dd3[_0x3c7cc4(0x9f)];if(_0x186405){_0x191f9a[_0x3c7cc4(0x9d)](_0x3c7cc4(0xab),{'val':JSON[_0x3c7cc4(0xe8)](_0x186405),'ack':!![]});const _0x4bf0fb=Object['keys'](_0x186405);if(_0x4bf0fb[_0x3c7cc4(0xe6)]>0x0){const _0x48ace7=_0x4bf0fb[0x0],_0x1fcbbc=_0x186405[_0x48ace7];_0x191f9a[_0x3c7cc4(0x9d)]('analysis.prediction.trackerTopRoom',{'val':_0x48ace7,'ack':!![]}),_0x191f9a[_0x3c7cc4(0x9d)]('analysis.prediction.trackerConfidence',{'val':_0x1fcbbc,'ack':!![]});}}}else{if(_0x507dd3[_0x3c7cc4(0x93)]==='COMFORT_RESULT'){const {patterns:_0x2a080b}=_0x507dd3[_0x3c7cc4(0x9f)];if(_0x2a080b&&_0x2a080b['length']>0x0)_0x191f9a[_0x3c7cc4(0x9d)](_0x3c7cc4(0xc0),{'val':JSON['stringify'](_0x2a080b),'ack':!![]});}}}}}}}}}}}}}}}}}}function startService(_0x211513,_0x4a9cae){const _0x2aea09=a4_0x50e764;let _0x48383b=_0x2aea09(0xdc);if(fs['existsSync'](_0x4a9cae))_0x48383b=_0x4a9cae;const _0x10d5e0=path['join'](__dirname,'..','service.py'),_0x543d3c=path['join'](__dirname,'..',_0x2aea09(0xd8),_0x2aea09(0x89));let _0x1f8d2b='';if(fs['existsSync'](_0x10d5e0))_0x1f8d2b=_0x10d5e0;else{if(fs[_0x2aea09(0xe0)](_0x543d3c))_0x1f8d2b=_0x543d3c;else{_0x211513[_0x2aea09(0xb8)][_0x2aea09(0xb5)](_0x2aea09(0xac)+_0x10d5e0+_0x2aea09(0xdb)+_0x543d3c+_0x2aea09(0xde));return;}}try{_0x211513[_0x2aea09(0xb8)][_0x2aea09(0xb4)](_0x2aea09(0xda)+_0x48383b+'\x20'+_0x1f8d2b),pythonProcess=spawn(_0x48383b,[_0x1f8d2b]),pythonProcess[_0x2aea09(0xcd)]['on'](_0x2aea09(0xc4),_0x1fdcf0=>{const _0x4dfd72=_0x2aea09,_0xf04a80=_0x1fdcf0[_0x4dfd72(0xa7)]()[_0x4dfd72(0xc8)]('\x0a');_0xf04a80[_0x4dfd72(0x90)](_0x4f5afd=>{const _0x12446d=_0x4dfd72,_0x539f75=_0x4f5afd[_0x12446d(0xe9)]();if(!_0x539f75)return;if(_0x539f75['startsWith'](_0x12446d(0x8e)))_0x211513[_0x12446d(0xb8)][_0x12446d(0xe4)](_0x12446d(0xa8)+_0x539f75[_0x12446d(0xa9)](0x5)[_0x12446d(0xe9)]());else{if(_0x539f75[_0x12446d(0xb6)](_0x12446d(0x92)))try{const _0x39800c=JSON['parse'](_0x539f75[_0x12446d(0xa9)](0x8)[_0x12446d(0xe9)]());handleResult(_0x211513,_0x39800c);}catch(_0x135fcf){}}});}),pythonProcess[_0x2aea09(0xf2)]['on']('data',_0x1d4412=>{const _0x50638c=_0x2aea09;_0x211513[_0x50638c(0xb8)][_0x50638c(0xb5)](_0x50638c(0xaf)+_0x1d4412[_0x50638c(0xa7)]()['trim']());}),pythonProcess['on'](_0x2aea09(0xe5),_0xc5dd28=>{const _0x4fcd11=_0x2aea09;_0x211513['log'][_0x4fcd11(0xc2)](_0x4fcd11(0xad)+_0xc5dd28),pythonProcess=null;}),_0x211513['sendToPythonWrapper']=(_0x550d07,_0x5951d6)=>send(_0x211513,_0x550d07,_0x5951d6);}catch(_0x5669fc){_0x211513[_0x2aea09(0xb8)][_0x2aea09(0xb5)](_0x2aea09(0xa6)+_0x5669fc[_0x2aea09(0xe3)]);}}function a4_0x59c1(_0x2296ee,_0x8ea1bd){const _0x58993b=a4_0x3075();return a4_0x59c1=function(_0x1b6689,_0x1e3338){_0x1b6689=_0x1b6689-0x84;let _0x307508=_0x58993b[_0x1b6689];return _0x307508;},a4_0x59c1(_0x2296ee,_0x8ea1bd);}function stopService(_0x262a6b){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x2748c5){}pythonProcess=null;}}module[a4_0x50e764(0xd0)]={'startService':startService,'stopService':stopService,'send':send};