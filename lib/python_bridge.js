const a4_0x194485=a4_0x24e0;(function(_0x1b0f95,_0xdb8f74){const _0x32bacd=a4_0x24e0,_0x4ece81=_0x1b0f95();while(!![]){try{const _0x157076=parseInt(_0x32bacd(0x1df))/0x1*(-parseInt(_0x32bacd(0x1b8))/0x2)+parseInt(_0x32bacd(0x1e0))/0x3+parseInt(_0x32bacd(0x1e5))/0x4+-parseInt(_0x32bacd(0x1dd))/0x5*(-parseInt(_0x32bacd(0x1b7))/0x6)+parseInt(_0x32bacd(0x1f1))/0x7*(parseInt(_0x32bacd(0x1a7))/0x8)+parseInt(_0x32bacd(0x209))/0x9+-parseInt(_0x32bacd(0x1ed))/0xa;if(_0x157076===_0xdb8f74)break;else _0x4ece81['push'](_0x4ece81['shift']());}catch(_0x475b69){_0x4ece81['push'](_0x4ece81['shift']());}}}(a4_0x50c5,0xeb954));const a4_0x20b3da=(function(){let _0x33a482=!![];return function(_0xbd3a35,_0xd6f38){const _0xcc9284=_0x33a482?function(){const _0x4eaf02=a4_0x24e0;if(_0xd6f38){const _0x41ce14=_0xd6f38[_0x4eaf02(0x1ab)](_0xbd3a35,arguments);return _0xd6f38=null,_0x41ce14;}}:function(){};return _0x33a482=![],_0xcc9284;};}()),a4_0x19882a=a4_0x20b3da(this,function(){const _0x4d654e=a4_0x24e0;return a4_0x19882a[_0x4d654e(0x203)]()[_0x4d654e(0x1c0)](_0x4d654e(0x1d4))[_0x4d654e(0x203)]()[_0x4d654e(0x1e1)](a4_0x19882a)[_0x4d654e(0x1c0)]('(((.+)+)+)+$');});a4_0x19882a();function a4_0x50c5(){const _0x5773ef=['existsSync','debug','HEALTH_TRAIN_RESULT','analysis.energy.forecast','analysis.automation.detectedPatterns','trim','Unknown','analysis.energy.heatingScore','analysis.security.currentThreshold','python_service','insulation','analysis.energy.insulationScore','toString','analysis.training.status','SIGNAL_RESULT','analysis.health.activityTrend','handlePrediction','\x0aGrund:\x20','14107122scbLeX','sendToPythonWrapper','analysis.energy.rlPenalties','analysis.security.lastCheck','HEALTH_TREND_RESULT','setStateAsync','startsWith','TRACKER_RESULT','analysis.energy.warmupDetails','length','Error\x20launching\x20Python:\x20','writable','stdin','heating','.\x20Please\x20create\x20this\x20file!','substring','./automation','248eIeXVn','getState','info','SECURITY_RESULT','apply','python3','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','analysis.health.gaitSensors','âœ…\x20HEALTH\x20TRAINED.','reason','warn','Success:\x20','analysis.prediction.trackerConfidence','message','payload','parse','24XHZvnF','81842AVNzrf','analysis.energy.mpcActive','analysis.energy.pinnForecast','PONG','2-digit','ENERGY_OPTIMIZE_RESULT','toLocaleDateString','Failed:\x20','search','split','TRAINING_COMPLETE','analysis.security.lastScore','[PYTHON\x20ERR]\x20','[LOG]','COMFORT_RESULT','join','exports','entries','details','analysis.energy.warmupSources','analysis.health.gaitDebug','error','analysis.isAlert','analysis.alertReason','de-DE','data','HEALTH_RESULT','stdout','(((.+)+)+)+$','ðŸ“ˆ\x20Health\x20Trend:\x20','forEach','analysis.health.gaitSpeed','stringify','analysis.prediction.nextRoom','applyEnergySavings','ENERGY_PREDICT_RESULT','Python\x20process\x20exited\x20with\x20code\x20','891115hHLcIG','analysis.prediction.confidence','47BAzFjE','5706453PDIses','constructor','analysis.health.isAnomaly','[RESULT]','analysis.prediction.trackerTopRoom','7629656SZqOmV','ðŸ\x20Python\x20Pong','is_anomaly','short','analysis.health.lastCheck','type','analysis.energy.warmupTimes','analysis.energy.ventilationAlerts','42559590ynxWOw','toISOString','toLocaleTimeString','isArray','238063eNOSZQ','log','\x20AND\x20','âŒ\x20CRITICAL:\x20\x27service.py\x27\x20not\x20found!\x20Checked:\x20','success','PINN_PREDICT_RESULT'];a4_0x50c5=function(){return _0x5773ef;};return a4_0x50c5();}'use strict';const {spawn}=require('child_process'),path=require('path'),fs=require('fs'),setup=require('./setup'),automation=require(a4_0x194485(0x1a6));let pythonProcess=null;function send(_0x9688f1,_0x4c3626,_0x4af0cb={}){const _0x42ce3e=a4_0x194485;if(!pythonProcess||!pythonProcess[_0x42ce3e(0x1a2)][_0x42ce3e(0x1a1)])return;const _0x26f8f6=JSON[_0x42ce3e(0x1d8)]({'command':_0x4c3626,..._0x4af0cb});try{pythonProcess['stdin']['write'](_0x26f8f6+'\x0a');}catch(_0x30b46d){}}function handleResult(_0x139fb4,_0x718414){const _0x584aab=a4_0x194485;if(_0x718414[_0x584aab(0x1ea)]===_0x584aab(0x1bb))_0x139fb4['log'][_0x584aab(0x1f8)](_0x584aab(0x1e6));else{if(_0x718414['type']===_0x584aab(0x1aa)){const {anomaly_score:_0x275ee9,is_anomaly:_0x188311,threshold:_0x64990,explanation:_0x1a9b86}=_0x718414['payload'];_0x139fb4[_0x584aab(0x20e)](_0x584aab(0x1c3),{'val':_0x275ee9,'ack':!![]}),_0x139fb4['setStateAsync'](_0x584aab(0x20c),{'val':new Date()[_0x584aab(0x1ee)](),'ack':!![]});if(_0x64990)_0x139fb4['setStateAsync'](_0x584aab(0x1ff),{'val':_0x64990,'ack':!![]});if(_0x188311){let _0x435b43=_0x584aab(0x1ad)+_0x275ee9['toFixed'](0x4)+')';if(_0x1a9b86&&_0x1a9b86!=='Unknown')_0x435b43+=_0x584aab(0x208)+_0x1a9b86;_0x139fb4['setStateAsync'](_0x584aab(0x1ce),{'val':!![],'ack':!![]}),_0x139fb4[_0x584aab(0x20e)](_0x584aab(0x1cf),{'val':_0x435b43,'ack':!![]}),setup['sendNotification'](_0x139fb4,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x435b43,![],!![]);}}else{if(_0x718414['type']===_0x584aab(0x1c2)){const _0x27c857=_0x718414[_0x584aab(0x1b5)]['details']||'',_0x3385df=_0x718414[_0x584aab(0x1b5)]['threshold'],_0x293af1=_0x718414[_0x584aab(0x1b5)][_0x584aab(0x1f5)]?_0x584aab(0x1b2)+new Date()[_0x584aab(0x1ef)]()+'\x20('+_0x27c857+')':_0x584aab(0x1bf)+_0x718414['payload'][_0x584aab(0x1b0)];_0x139fb4[_0x584aab(0x20e)](_0x584aab(0x204),{'val':_0x293af1,'ack':!![]});if(_0x718414['payload']['success']&&_0x3385df)_0x139fb4[_0x584aab(0x20e)](_0x584aab(0x1ff),{'val':_0x3385df,'ack':!![]});}else{if(_0x718414['type']==='ENERGY_TRAIN_RESULT'){if(_0x718414[_0x584aab(0x1b5)][_0x584aab(0x1f5)])try{const _0x4bf935=JSON[_0x584aab(0x1b6)](_0x718414['payload'][_0x584aab(0x1ca)]);if(_0x4bf935[_0x584aab(0x201)])_0x139fb4[_0x584aab(0x20e)](_0x584aab(0x202),{'val':JSON[_0x584aab(0x1d8)](_0x4bf935['insulation']),'ack':!![]});if(_0x4bf935[_0x584aab(0x1a3)])_0x139fb4['setStateAsync'](_0x584aab(0x1fe),{'val':JSON[_0x584aab(0x1d8)](_0x4bf935[_0x584aab(0x1a3)]),'ack':!![]});}catch(_0x12b3d2){}}else{if(_0x718414[_0x584aab(0x1ea)]===_0x584aab(0x1f9)){if(_0x718414[_0x584aab(0x1b5)]['success']){_0x139fb4['log'][_0x584aab(0x1a9)](_0x584aab(0x1af));const _0x3bb284=new Date(),_0x303768=_0x3bb284[_0x584aab(0x1be)](_0x584aab(0x1d0),{'day':'2-digit','month':_0x584aab(0x1e8),'hour':_0x584aab(0x1bc),'minute':_0x584aab(0x1bc)});_0x139fb4['setStateAsync'](_0x584aab(0x1e9),{'val':_0x303768,'ack':!![]});}}else{if(_0x718414[_0x584aab(0x1ea)]===_0x584aab(0x1d2)){const _0x3f0e26=new Date(),_0x3c58c5=_0x3f0e26[_0x584aab(0x1be)](_0x584aab(0x1d0),{'day':_0x584aab(0x1bc),'month':_0x584aab(0x1e8),'hour':_0x584aab(0x1bc),'minute':_0x584aab(0x1bc)});_0x139fb4[_0x584aab(0x20e)](_0x584aab(0x1e9),{'val':_0x3c58c5,'ack':!![]}),_0x139fb4[_0x584aab(0x20e)](_0x584aab(0x1e2),{'val':_0x718414['payload'][_0x584aab(0x1e7)],'ack':!![]});}else{if(_0x718414['type']===_0x584aab(0x20d)){const {trend_percent:_0x599e55,details:_0x1a86dc}=_0x718414[_0x584aab(0x1b5)],_0x46675f=new Date(),_0x4e43e9=_0x46675f[_0x584aab(0x1be)](_0x584aab(0x1d0),{'day':_0x584aab(0x1bc),'month':'short','hour':_0x584aab(0x1bc),'minute':_0x584aab(0x1bc)});_0x139fb4[_0x584aab(0x20e)](_0x584aab(0x1e9),{'val':_0x4e43e9,'ack':!![]}),_0x139fb4[_0x584aab(0x20e)](_0x584aab(0x206),{'val':_0x599e55,'ack':!![]}),_0x139fb4[_0x584aab(0x1f2)][_0x584aab(0x1a9)](_0x584aab(0x1d5)+_0x1a86dc);}else{if(_0x718414[_0x584aab(0x1ea)]==='GAIT_RESULT'){const {speed_trend:_0x1ad8b6,sensors:_0x625281,proof:_0x2044a1}=_0x718414[_0x584aab(0x1b5)];if(_0x1ad8b6!==undefined)_0x139fb4[_0x584aab(0x20e)](_0x584aab(0x1d7),{'val':_0x1ad8b6,'ack':!![]});if(_0x625281&&Array[_0x584aab(0x1f0)](_0x625281))_0x139fb4[_0x584aab(0x20e)](_0x584aab(0x1ae),{'val':_0x625281[_0x584aab(0x1c7)](',\x20'),'ack':!![]});if(_0x2044a1)_0x139fb4[_0x584aab(0x20e)](_0x584aab(0x1cc),{'val':_0x2044a1,'ack':!![]});}else{if(_0x718414[_0x584aab(0x1ea)]===_0x584aab(0x1db)){const {forecast:_0x59758a}=_0x718414[_0x584aab(0x1b5)];if(_0x59758a)_0x139fb4[_0x584aab(0x20e)](_0x584aab(0x1fa),{'val':JSON['stringify'](_0x59758a),'ack':!![]});}else{if(_0x718414[_0x584aab(0x1ea)]==='WARMUP_RESULT'){const {times:_0x4c67a9,sources:_0x539284,details:_0x3d1885}=_0x718414[_0x584aab(0x1b5)];if(_0x4c67a9)_0x139fb4['setStateAsync'](_0x584aab(0x1eb),{'val':JSON[_0x584aab(0x1d8)](_0x4c67a9),'ack':!![]});if(_0x539284)_0x139fb4['setStateAsync'](_0x584aab(0x1cb),{'val':JSON[_0x584aab(0x1d8)](_0x539284),'ack':!![]});if(_0x3d1885)_0x139fb4[_0x584aab(0x20e)](_0x584aab(0x211),{'val':JSON['stringify'](_0x3d1885),'ack':!![]});}else{if(_0x718414['type']==='RL_PENALTY_UPDATE'){const {penalties:_0x359430}=_0x718414[_0x584aab(0x1b5)];if(_0x359430)_0x139fb4['setStateAsync'](_0x584aab(0x20b),{'val':JSON[_0x584aab(0x1d8)](_0x359430),'ack':!![]});}else{if(_0x718414[_0x584aab(0x1ea)]===_0x584aab(0x1f6)){const {forecast:_0x5da1a3}=_0x718414[_0x584aab(0x1b5)];if(_0x5da1a3)_0x139fb4[_0x584aab(0x20e)](_0x584aab(0x1ba),{'val':JSON[_0x584aab(0x1d8)](_0x5da1a3),'ack':!![]});}else{if(_0x718414[_0x584aab(0x1ea)]==='VENTILATION_ALERT'){const {alerts:_0x413e3a}=_0x718414['payload'];if(_0x413e3a)_0x139fb4['setStateAsync'](_0x584aab(0x1ec),{'val':JSON[_0x584aab(0x1d8)](_0x413e3a),'ack':!![]});}else{if(_0x718414[_0x584aab(0x1ea)]===_0x584aab(0x1bd)){const {proposals:_0x5d23eb}=_0x718414[_0x584aab(0x1b5)];_0x139fb4[_0x584aab(0x1a8)](_0x584aab(0x1b9),(_0x1e6ab1,_0x25ba99)=>{const _0x302e71=_0x584aab;_0x25ba99&&_0x25ba99['val']===!![]&&_0x5d23eb&&_0x5d23eb[_0x302e71(0x212)]>0x0&&automation[_0x302e71(0x1da)](_0x139fb4,_0x5d23eb);});}else{if(_0x718414[_0x584aab(0x1ea)]===_0x584aab(0x205)){const {room:_0x54ad83,propagation:_0x5e88c2}=_0x718414[_0x584aab(0x1b5)];let _0x546c0c=_0x584aab(0x1fd),_0x33aeaa=0x0;if(_0x5e88c2){const _0x4307e4=Object[_0x584aab(0x1c9)](_0x5e88c2);_0x4307e4[_0x584aab(0x212)]>0x0&&(_0x546c0c=_0x4307e4[0x0][0x0],_0x33aeaa=_0x4307e4[0x0][0x1]);}_0x139fb4[_0x584aab(0x20e)](_0x584aab(0x1d9),{'val':_0x546c0c,'ack':!![]}),_0x139fb4[_0x584aab(0x20e)](_0x584aab(0x1de),{'val':_0x33aeaa,'ack':!![]}),automation[_0x584aab(0x207)](_0x139fb4,_0x546c0c,_0x33aeaa);}else{if(_0x718414[_0x584aab(0x1ea)]===_0x584aab(0x210)){const {probabilities:_0x2f0bde}=_0x718414[_0x584aab(0x1b5)];if(_0x2f0bde){_0x139fb4[_0x584aab(0x20e)]('analysis.prediction.trackerState',{'val':JSON['stringify'](_0x2f0bde),'ack':!![]});const _0x3f2d20=Object['keys'](_0x2f0bde);if(_0x3f2d20['length']>0x0){const _0x4bcd58=_0x3f2d20[0x0],_0x4cffa0=_0x2f0bde[_0x4bcd58];_0x139fb4[_0x584aab(0x20e)](_0x584aab(0x1e4),{'val':_0x4bcd58,'ack':!![]}),_0x139fb4['setStateAsync'](_0x584aab(0x1b3),{'val':_0x4cffa0,'ack':!![]});}}}else{if(_0x718414[_0x584aab(0x1ea)]===_0x584aab(0x1c6)){const {patterns:_0x9acab6}=_0x718414[_0x584aab(0x1b5)];if(_0x9acab6&&_0x9acab6[_0x584aab(0x212)]>0x0)_0x139fb4[_0x584aab(0x20e)](_0x584aab(0x1fb),{'val':JSON[_0x584aab(0x1d8)](_0x9acab6),'ack':!![]});}}}}}}}}}}}}}}}}}}function a4_0x24e0(_0x3e198a,_0x2ccb5c){const _0x5164e5=a4_0x50c5();return a4_0x24e0=function(_0x19882a,_0x20b3da){_0x19882a=_0x19882a-0x1a0;let _0x50c52f=_0x5164e5[_0x19882a];return _0x50c52f;},a4_0x24e0(_0x3e198a,_0x2ccb5c);}function startService(_0x45aa31,_0x3deb99){const _0x9db80d=a4_0x194485;let _0x216731=_0x9db80d(0x1ac);if(fs[_0x9db80d(0x1f7)](_0x3deb99))_0x216731=_0x3deb99;const _0x5bf0ec=path['join'](__dirname,'..','service.py'),_0xff4bde=path['join'](__dirname,'..',_0x9db80d(0x200),'service.py');let _0x126668='';if(fs[_0x9db80d(0x1f7)](_0x5bf0ec))_0x126668=_0x5bf0ec;else{if(fs[_0x9db80d(0x1f7)](_0xff4bde))_0x126668=_0xff4bde;else{_0x45aa31['log'][_0x9db80d(0x1cd)](_0x9db80d(0x1f4)+_0x5bf0ec+_0x9db80d(0x1f3)+_0xff4bde+_0x9db80d(0x1a4));return;}}try{_0x45aa31['log'][_0x9db80d(0x1a9)]('ðŸš€\x20Starting\x20Python\x20Bridge\x20using:\x20'+_0x216731+'\x20'+_0x126668),pythonProcess=spawn(_0x216731,[_0x126668]),pythonProcess[_0x9db80d(0x1d3)]['on'](_0x9db80d(0x1d1),_0x367bf6=>{const _0x2e1f5c=_0x9db80d,_0x5db265=_0x367bf6[_0x2e1f5c(0x203)]()[_0x2e1f5c(0x1c1)]('\x0a');_0x5db265[_0x2e1f5c(0x1d6)](_0x22bd02=>{const _0x10f870=_0x2e1f5c,_0x2811bc=_0x22bd02['trim']();if(!_0x2811bc)return;if(_0x2811bc[_0x10f870(0x20f)](_0x10f870(0x1c5)))_0x45aa31[_0x10f870(0x1f2)]['debug']('[PYTHON]\x20'+_0x2811bc[_0x10f870(0x1a5)](0x5)['trim']());else{if(_0x2811bc['startsWith'](_0x10f870(0x1e3)))try{const _0x2c35d4=JSON[_0x10f870(0x1b6)](_0x2811bc['substring'](0x8)[_0x10f870(0x1fc)]());handleResult(_0x45aa31,_0x2c35d4);}catch(_0x1c5824){}}});}),pythonProcess['stderr']['on']('data',_0xe2a767=>{const _0x40c160=_0x9db80d;_0x45aa31[_0x40c160(0x1f2)][_0x40c160(0x1cd)](_0x40c160(0x1c4)+_0xe2a767[_0x40c160(0x203)]()['trim']());}),pythonProcess['on']('close',_0x42e583=>{const _0x26711=_0x9db80d;_0x45aa31[_0x26711(0x1f2)][_0x26711(0x1b1)](_0x26711(0x1dc)+_0x42e583),pythonProcess=null;}),_0x45aa31[_0x9db80d(0x20a)]=(_0x1036d9,_0x2efe76)=>send(_0x45aa31,_0x1036d9,_0x2efe76);}catch(_0x512528){_0x45aa31[_0x9db80d(0x1f2)][_0x9db80d(0x1cd)](_0x9db80d(0x1a0)+_0x512528[_0x9db80d(0x1b4)]);}}function stopService(_0x2fddcc){if(pythonProcess){try{pythonProcess['kill']();}catch(_0x4453e4){}pythonProcess=null;}}module[a4_0x194485(0x1c8)]={'startService':startService,'stopService':stopService,'send':send};