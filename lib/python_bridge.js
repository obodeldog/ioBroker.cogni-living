const a4_0x3dcf81=a4_0x1070;(function(_0x415dd5,_0x2dab02){const _0x42fe99=a4_0x1070,_0x5c6c15=_0x415dd5();while(!![]){try{const _0x265653=-parseInt(_0x42fe99(0x144))/0x1+parseInt(_0x42fe99(0xe0))/0x2*(-parseInt(_0x42fe99(0x128))/0x3)+parseInt(_0x42fe99(0xf3))/0x4+-parseInt(_0x42fe99(0xf8))/0x5*(parseInt(_0x42fe99(0xe8))/0x6)+-parseInt(_0x42fe99(0xdd))/0x7*(-parseInt(_0x42fe99(0x114))/0x8)+parseInt(_0x42fe99(0x13c))/0x9+-parseInt(_0x42fe99(0x134))/0xa;if(_0x265653===_0x2dab02)break;else _0x5c6c15['push'](_0x5c6c15['shift']());}catch(_0x3ea34e){_0x5c6c15['push'](_0x5c6c15['shift']());}}}(a4_0x3a2c,0x2e032));const a4_0x622f=(function(){let _0x4dbf20=!![];return function(_0x2c6f7e,_0x1f8066){const _0x31d904=_0x4dbf20?function(){const _0x26ff1b=a4_0x1070;if(_0x1f8066){const _0x3d3888=_0x1f8066[_0x26ff1b(0x12f)](_0x2c6f7e,arguments);return _0x1f8066=null,_0x3d3888;}}:function(){};return _0x4dbf20=![],_0x31d904;};}()),a4_0x4e3910=a4_0x622f(this,function(){const _0x51364c=a4_0x1070;return a4_0x4e3910['toString']()['search'](_0x51364c(0x11b))[_0x51364c(0x101)]()[_0x51364c(0xe1)](a4_0x4e3910)[_0x51364c(0x11d)](_0x51364c(0x11b));});a4_0x4e3910();'use strict';const {spawn}=require(a4_0x3dcf81(0xff)),path=require(a4_0x3dcf81(0x108)),fs=require('fs'),setup=require(a4_0x3dcf81(0x103)),automation=require(a4_0x3dcf81(0x10f));let pythonProcess=null;function send(_0x2fb388,_0x653a83,_0x46fe07={}){const _0x4b3ff4=a4_0x3dcf81;if(!pythonProcess||!pythonProcess['stdin']['writable'])return;const _0x50e372=JSON[_0x4b3ff4(0xf4)]({'command':_0x653a83,..._0x46fe07});try{pythonProcess[_0x4b3ff4(0xf0)][_0x4b3ff4(0xe6)](_0x50e372+'\x0a');}catch(_0xa83844){}}function a4_0x1070(_0x39340f,_0x224629){const _0x5ca5f3=a4_0x3a2c();return a4_0x1070=function(_0x4e3910,_0x622f){_0x4e3910=_0x4e3910-0xdb;let _0x3a2c36=_0x5ca5f3[_0x4e3910];return _0x3a2c36;},a4_0x1070(_0x39340f,_0x224629);}function handleResult(_0x20622c,_0x77826c){const _0x57c180=a4_0x3dcf81;if(_0x77826c['type']===_0x57c180(0x107))_0x20622c[_0x57c180(0xfe)][_0x57c180(0x123)](_0x57c180(0x102));else{if(_0x77826c['type']===_0x57c180(0x12a)){const {anomaly_score:_0x57a633,is_anomaly:_0x14ade3,threshold:_0x2749c9,explanation:_0x29f2f3}=_0x77826c[_0x57c180(0x136)];_0x20622c[_0x57c180(0xfe)][_0x57c180(0xe3)](_0x57c180(0x120)+_0x57a633[_0x57c180(0x139)](0x5)+_0x57c180(0x13b)+(_0x14ade3?_0x57c180(0x10a):'OK')),_0x20622c[_0x57c180(0x135)]('analysis.security.lastScore',{'val':_0x57a633,'ack':!![]}),_0x20622c['setStateAsync'](_0x57c180(0x13f),{'val':new Date()[_0x57c180(0x13d)](),'ack':!![]});if(_0x2749c9)_0x20622c[_0x57c180(0x135)](_0x57c180(0x138),{'val':_0x2749c9,'ack':!![]});if(_0x14ade3){let _0x29c537=_0x57c180(0x12b)+_0x57a633[_0x57c180(0x139)](0x4)+')';if(_0x29f2f3&&_0x29f2f3!==_0x57c180(0x131))_0x29c537+=_0x57c180(0x119)+_0x29f2f3;_0x20622c[_0x57c180(0x135)](_0x57c180(0xe7),{'val':!![],'ack':!![]}),_0x20622c[_0x57c180(0x135)](_0x57c180(0x13a),{'val':_0x29c537,'ack':!![]}),setup['sendNotification'](_0x20622c,_0x57c180(0xec)+_0x29c537,![],!![]);}}else{if(_0x77826c[_0x57c180(0xdf)]===_0x57c180(0x118)){const _0x1e8f8c=_0x77826c[_0x57c180(0x136)]['details']||'',_0x3b9ecb=_0x77826c['payload'][_0x57c180(0x121)],_0x194101=_0x77826c['payload'][_0x57c180(0x113)]?_0x57c180(0x122)+new Date()[_0x57c180(0xe5)]()+'\x20('+_0x1e8f8c+')':_0x57c180(0xf6)+_0x77826c[_0x57c180(0x136)][_0x57c180(0xeb)];_0x20622c[_0x57c180(0x135)]('analysis.training.status',{'val':_0x194101,'ack':!![]});if(_0x77826c[_0x57c180(0x136)][_0x57c180(0x113)]&&_0x3b9ecb)_0x20622c[_0x57c180(0x135)](_0x57c180(0x138),{'val':_0x3b9ecb,'ack':!![]});}else{if(_0x77826c['type']==='COMFORT_RESULT'){const {patterns:_0x40e8d6}=_0x77826c[_0x57c180(0x136)];if(_0x40e8d6&&_0x40e8d6[_0x57c180(0x115)]>0x0){_0x20622c[_0x57c180(0xfe)]['info'](_0x57c180(0x106)+_0x40e8d6['length']+_0x57c180(0x100)),_0x20622c[_0x57c180(0x135)]('analysis.automation.detectedPatterns',{'val':JSON[_0x57c180(0xf4)](_0x40e8d6),'ack':!![]});const _0x1e7ab1=_0x40e8d6[0x0],_0x56b60b='Regel\x20erkannt:\x20'+_0x1e7ab1[_0x57c180(0xdc)]+'\x20('+(_0x1e7ab1[_0x57c180(0x12c)]*0x64)['toFixed'](0x0)+'%)';_0x20622c[_0x57c180(0x135)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x20622c[_0x57c180(0x135)](_0x57c180(0x142),{'val':_0x56b60b,'ack':!![]});}else _0x20622c[_0x57c180(0xfe)][_0x57c180(0xe3)](_0x57c180(0x140)),_0x20622c[_0x57c180(0x135)](_0x57c180(0xef),{'val':![],'ack':!![]}),_0x20622c[_0x57c180(0x135)](_0x57c180(0x145),{'val':'[]','ack':!![]});}else{if(_0x77826c['type']===_0x57c180(0x105)){if(_0x77826c[_0x57c180(0x136)]['success'])try{const _0xcadff6=JSON['parse'](_0x77826c[_0x57c180(0x136)]['details']);if(_0xcadff6['insulation'])_0x20622c[_0x57c180(0x135)]('analysis.energy.insulationScore',{'val':JSON[_0x57c180(0xf4)](_0xcadff6[_0x57c180(0xfa)]),'ack':!![]});if(_0xcadff6[_0x57c180(0x12e)])_0x20622c['setStateAsync'](_0x57c180(0x125),{'val':JSON[_0x57c180(0xf4)](_0xcadff6['heating']),'ack':!![]});}catch(_0x1926a8){}}else{if(_0x77826c[_0x57c180(0xdf)]===_0x57c180(0x13e)){if(_0x77826c[_0x57c180(0x136)][_0x57c180(0x113)])_0x20622c[_0x57c180(0xfe)]['info'](_0x57c180(0x133));}else{if(_0x77826c[_0x57c180(0xdf)]==='HEALTH_RESULT')_0x20622c[_0x57c180(0x135)]('analysis.health.lastCheck',{'val':new Date()[_0x57c180(0x13d)](),'ack':!![]}),_0x20622c[_0x57c180(0x135)](_0x57c180(0x11a),{'val':_0x77826c[_0x57c180(0x136)]['is_anomaly'],'ack':!![]});else{if(_0x77826c[_0x57c180(0xdf)]===_0x57c180(0x10d))_0x20622c[_0x57c180(0x135)](_0x57c180(0x104),{'val':_0x77826c['payload'][_0x57c180(0x143)],'ack':!![]}),_0x20622c[_0x57c180(0x135)](_0x57c180(0xe4),{'val':_0x77826c[_0x57c180(0x136)]['change_percent'],'ack':!![]});else{if(_0x77826c[_0x57c180(0xdf)]===_0x57c180(0x11c)){const {speed_trend:_0x3fe463}=_0x77826c[_0x57c180(0x136)];if(_0x3fe463!==undefined)_0x20622c[_0x57c180(0x135)](_0x57c180(0xe2),{'val':_0x3fe463,'ack':!![]});}else{if(_0x77826c[_0x57c180(0xdf)]===_0x57c180(0x130)){const {forecast:_0x46d046}=_0x77826c['payload'];if(_0x46d046)_0x20622c[_0x57c180(0x135)](_0x57c180(0x12d),{'val':JSON[_0x57c180(0xf4)](_0x46d046),'ack':!![]});}else{if(_0x77826c['type']===_0x57c180(0xfd)){const {data:_0x285b11}=_0x77826c[_0x57c180(0x136)];_0x285b11&&(_0x20622c['log'][_0x57c180(0xe3)](_0x57c180(0xee)),_0x20622c[_0x57c180(0x135)](_0x57c180(0xe9),{'val':JSON[_0x57c180(0xf4)](_0x285b11),'ack':!![]}));}else{if(_0x77826c[_0x57c180(0xdf)]===_0x57c180(0xfb))_0x20622c['log']['debug'](_0x57c180(0x112));else{if(_0x77826c[_0x57c180(0xdf)]===_0x57c180(0xde)){const {room:_0x1e7bb3,propagation:_0x535ba8}=_0x77826c['payload'];let _0x19d24e=_0x57c180(0x131),_0x562b01=0x0;if(_0x535ba8){const _0x3745f6=Object[_0x57c180(0x117)](_0x535ba8);_0x3745f6[_0x57c180(0x115)]>0x0&&(_0x19d24e=_0x3745f6[0x0][0x0],_0x562b01=_0x3745f6[0x0][0x1]);}_0x20622c[_0x57c180(0x135)]('analysis.prediction.nextRoom',{'val':_0x19d24e,'ack':!![]}),_0x20622c[_0x57c180(0x135)](_0x57c180(0xf2),{'val':_0x562b01,'ack':!![]}),_0x562b01>0.4&&_0x20622c[_0x57c180(0xfe)][_0x57c180(0x123)](_0x57c180(0x141)+_0x1e7bb3+_0x57c180(0x10e)+_0x19d24e+'\x20('+(_0x562b01*0x64)[_0x57c180(0x139)](0x0)+'%)'),automation[_0x57c180(0x109)](_0x20622c,_0x19d24e,_0x562b01);}}}}}}}}}}}}}}function startService(_0x12e131,_0x2547df){const _0x5ed6f4=a4_0x3dcf81;let _0x265564=_0x5ed6f4(0x11f);if(fs[_0x5ed6f4(0x126)](_0x2547df))_0x265564=_0x2547df;try{const _0x25903a=path[_0x5ed6f4(0x10c)](__dirname,'..',_0x5ed6f4(0x110),_0x5ed6f4(0x124));pythonProcess=spawn(_0x265564,[_0x25903a]),pythonProcess[_0x5ed6f4(0xdb)]['on'](_0x5ed6f4(0x137),_0x6cb1e2=>{const _0x412246=_0x5ed6f4,_0x5ab70c=_0x6cb1e2[_0x412246(0x101)]()[_0x412246(0xf9)]('\x0a');_0x5ab70c[_0x412246(0x127)](_0x45d5f4=>{const _0x3a662f=_0x412246,_0x39832c=_0x45d5f4['trim']();if(!_0x39832c)return;if(_0x39832c['startsWith'](_0x3a662f(0x10b)))_0x12e131[_0x3a662f(0xfe)][_0x3a662f(0x123)]('[PYTHON]\x20'+_0x39832c[_0x3a662f(0xed)](0x5)[_0x3a662f(0xf1)]());else{if(_0x39832c[_0x3a662f(0x11e)](_0x3a662f(0x116)))try{const _0x45c9ba=JSON[_0x3a662f(0xf7)](_0x39832c[_0x3a662f(0xed)](0x8)[_0x3a662f(0xf1)]());handleResult(_0x12e131,_0x45c9ba);}catch(_0x5b9a95){}}});}),pythonProcess['on'](_0x5ed6f4(0xea),_0x2a1bf5=>{pythonProcess=null;}),_0x12e131[_0x5ed6f4(0x111)]=(_0x8d02d3,_0x2795d4)=>send(_0x12e131,_0x8d02d3,_0x2795d4);}catch(_0xd80488){_0x12e131[_0x5ed6f4(0xfe)]['error'](_0x5ed6f4(0x132)+_0xd80488[_0x5ed6f4(0xfc)]);}}function a4_0x3a2c(){const _0x30385a=['TOPOLOGY_RESULT','log','child_process','\x20new\x20patterns.','toString','üêç\x20Python\x20Pong','./setup','analysis.health.trendDiagnosis','ENERGY_TRAIN_RESULT','üõãÔ∏è\x20BUTLER:\x20Found\x20','PONG','path','handlePrediction','ANOMALY','[LOG]','join','TREND_RESULT','\x20->\x20Likely\x20','./automation','python_service','sendToPythonWrapper','üêç\x20Python\x20confirmed\x20new\x20topology.','success','8idEzLI','length','[RESULT]','entries','TRAINING_COMPLETE','\x0aGrund:\x20','analysis.health.isAnomaly','(((.+)+)+)+$','GAIT_RESULT','search','startsWith','python3','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','threshold','Success:\x20','debug','service.py','analysis.energy.heatingScore','existsSync','forEach','5016DCVBjK','kill','SECURITY_RESULT','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','confidence','analysis.energy.forecast','heating','apply','ENERGY_PREDICT_RESULT','Unknown','Error\x20launching\x20Python:\x20','‚úÖ\x20HEALTH\x20TRAINED.','2723520oQTAKx','setStateAsync','payload','data','analysis.security.currentThreshold','toFixed','analysis.alertReason','\x20->\x20','2668824VdbMrY','toISOString','HEALTH_TRAIN_RESULT','analysis.security.lastCheck','üõãÔ∏è\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','üîÆ\x20Prediction:\x20From\x20','analysis.automation.description','diagnosis','15535zUKvZb','analysis.automation.detectedPatterns','stdout','rule','2485189GnSblm','SIGNAL_RESULT','type','286yFZZEO','constructor','analysis.health.gaitSpeed','info','analysis.health.trendValue','toLocaleTimeString','write','analysis.isAlert','1260yjpdWZ','analysis.security.topologyMatrix','close','reason','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','substring','üï∏Ô∏è\x20Topology\x20Map\x20updated\x20by\x20Python.','analysis.automation.patternDetected','stdin','trim','analysis.prediction.confidence','970384zPucsv','stringify','exports','Failed:\x20','parse','4255hnWOmB','split','insulation','TOPOLOGY_ACK','message'];a4_0x3a2c=function(){return _0x30385a;};return a4_0x3a2c();}function stopService(_0x827ed){const _0x5994ff=a4_0x3dcf81;if(pythonProcess){try{pythonProcess[_0x5994ff(0x129)]();}catch(_0x8f2f73){}pythonProcess=null;}}module[a4_0x3dcf81(0xf5)]={'startService':startService,'stopService':stopService,'send':send};