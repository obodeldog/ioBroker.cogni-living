const a3_0x717703=a3_0x372b;(function(_0x419e58,_0x4cdd81){const _0x32a0a2=a3_0x372b,_0x5aaf14=_0x419e58();while(!![]){try{const _0x3c08d8=parseInt(_0x32a0a2(0x15f))/0x1+-parseInt(_0x32a0a2(0x164))/0x2*(-parseInt(_0x32a0a2(0x153))/0x3)+-parseInt(_0x32a0a2(0x157))/0x4+parseInt(_0x32a0a2(0x168))/0x5*(parseInt(_0x32a0a2(0x16e))/0x6)+parseInt(_0x32a0a2(0x167))/0x7*(parseInt(_0x32a0a2(0x17e))/0x8)+-parseInt(_0x32a0a2(0x15a))/0x9+-parseInt(_0x32a0a2(0x15e))/0xa;if(_0x3c08d8===_0x4cdd81)break;else _0x5aaf14['push'](_0x5aaf14['shift']());}catch(_0x536dc0){_0x5aaf14['push'](_0x5aaf14['shift']());}}}(a3_0x135c,0xa1fa9));const a3_0x33b6cb=(function(){let _0x4362eb=!![];return function(_0x26116a,_0x8100a5){const _0x16ddf7=_0x4362eb?function(){const _0x35a316=a3_0x372b;if(_0x8100a5){const _0x58d5a6=_0x8100a5[_0x35a316(0x154)](_0x26116a,arguments);return _0x8100a5=null,_0x58d5a6;}}:function(){};return _0x4362eb=![],_0x16ddf7;};}()),a3_0x95501a=a3_0x33b6cb(this,function(){const _0x3371a0=a3_0x372b;return a3_0x95501a['toString']()[_0x3371a0(0x16d)]('(((.+)+)+)+$')['toString']()[_0x3371a0(0x15c)](a3_0x95501a)[_0x3371a0(0x16d)](_0x3371a0(0x16f));});a3_0x95501a();'use strict';function a3_0x135c(){const _0xe3e62f=['pip.exe','python.exe','path','error','üõë\x20PERMISSION\x20ERROR:\x20Der\x20Adapter\x20darf\x20das\x20VENV\x20nicht\x20anlegen.','kill','27128kQsQLl','rmSync','pythonProcess','platform','.venv','join','Permission\x20denied','Scripts','.\x20(Is\x20\x27python3-venv\x27\x20installed?)','existsSync','‚ö†Ô∏è\x20Python\x20VENV\x20or\x20PIP\x20missing.\x20Installing...','‚úÖ\x20INSTALL\x20SUCCESS.','3cdqKum','apply','info','‚ùå\x20INSTALL\x20FAILED:\x20','600000uPfqfc','log','üêç\x20Checking\x20Python\x20environment...','449793DPzTad','pip','constructor','Delete\x20failed:\x20','16155350ItsHLU','216654onUokO','\x22\x20-c\x20\x22import\x20torch;\x20print(\x27libs_ok\x27)\x22','\x22\x20install\x20-r\x20\x22','‚ö†Ô∏è\x20Fast-Boot\x20failed.\x20Triggering\x20Self-Healing...','win32','779302QXHOyL','python3\x20-m\x20venv\x20\x22','python_service','2044HIxmbd','441250Yatxwp','Installing\x20pip\x20packages...\x20(Caching\x20enabled)','‚ùå\x20VENV\x20CREATION\x20FAILED:\x20','warn','message','search','60ocZAuj','(((.+)+)+)+$','child_process','üëâ\x20L√ñSUNG\x20(SSH):\x20sudo\x20chown\x20-R\x20iobroker:iobroker\x20','requirements.txt','EACCES','dependencyInstallInProgress','includes','‚úÖ\x20Fast-Boot:\x20Environment\x20healthy.','bin'];a3_0x135c=function(){return _0xe3e62f;};return a3_0x135c();}const {exec,execSync}=require(a3_0x717703(0x170)),path=require(a3_0x717703(0x17a)),fs=require('fs'),IS_WIN=process[a3_0x717703(0x14a)]===a3_0x717703(0x163),ADAPTER_DIR=path['join'](__dirname,'..'),PERSISTENT_DIR=path[a3_0x717703(0x14c)](ADAPTER_DIR,a3_0x717703(0x14b)),VENV_PATH=PERSISTENT_DIR,PYTHON_EXE=IS_WIN?path[a3_0x717703(0x14c)](VENV_PATH,a3_0x717703(0x14e),a3_0x717703(0x179)):path[a3_0x717703(0x14c)](VENV_PATH,a3_0x717703(0x177),'python'),PIP_EXE=IS_WIN?path['join'](VENV_PATH,'Scripts',a3_0x717703(0x178)):path[a3_0x717703(0x14c)](VENV_PATH,a3_0x717703(0x177),a3_0x717703(0x15b));function stopPythonService(_0x56d0b1){const _0x168027=a3_0x717703;if(_0x56d0b1['pythonProcess']){try{_0x56d0b1[_0x168027(0x149)][_0x168027(0x17d)]();}catch(_0xb1f74c){}_0x56d0b1[_0x168027(0x149)]=null;}}function installRequirementsInVenv(_0x55fe60,_0x2900a9,_0x29f7d5){const _0x288c1b=a3_0x717703;_0x55fe60['log'][_0x288c1b(0x155)](_0x288c1b(0x169));const _0x442eed='\x22'+PIP_EXE+_0x288c1b(0x161)+_0x2900a9+'\x22';exec(_0x442eed,{'timeout':0x1b7740},(_0x37bc73,_0x4ad451,_0x33d628)=>{const _0x273f77=_0x288c1b;_0x55fe60['dependencyInstallInProgress']=![];if(_0x37bc73){_0x55fe60[_0x273f77(0x158)]['error'](_0x273f77(0x156)+(_0x33d628||_0x37bc73[_0x273f77(0x16c)]));try{fs[_0x273f77(0x17f)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0xd1a60b){}}else _0x55fe60[_0x273f77(0x158)][_0x273f77(0x155)](_0x273f77(0x152)),_0x29f7d5&&_0x29f7d5();});}function a3_0x372b(_0x23df5f,_0x16d91f){const _0x3d8cc4=a3_0x135c();return a3_0x372b=function(_0x95501a,_0x33b6cb){_0x95501a=_0x95501a-0x149;let _0x135c9a=_0x3d8cc4[_0x95501a];return _0x135c9a;},a3_0x372b(_0x23df5f,_0x16d91f);}function installPythonDependencies(_0x51415c,_0x211eb9){const _0x35ba36=a3_0x717703;if(_0x51415c[_0x35ba36(0x174)])return;_0x51415c['dependencyInstallInProgress']=!![];const _0x35c22b=path[_0x35ba36(0x14c)](ADAPTER_DIR,_0x35ba36(0x166),_0x35ba36(0x172));stopPythonService(_0x51415c);if(fs[_0x35ba36(0x150)](VENV_PATH)&&!fs[_0x35ba36(0x150)](PIP_EXE)){_0x51415c[_0x35ba36(0x158)]['warn']('‚ôªÔ∏è\x20Found\x20broken\x20VENV\x20(no\x20pip).\x20Deleting\x20and\x20recreating...');try{fs[_0x35ba36(0x17f)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x5cb389){_0x51415c['log'][_0x35ba36(0x17b)](_0x35ba36(0x15d)+_0x5cb389[_0x35ba36(0x16c)]);}}if(!fs[_0x35ba36(0x150)](VENV_PATH))try{_0x51415c['log']['info']('Creating\x20new\x20VENV...'),execSync(_0x35ba36(0x165)+VENV_PATH+'\x22');}catch(_0x4effd6){_0x51415c[_0x35ba36(0x174)]=![];_0x4effd6[_0x35ba36(0x16c)]['includes'](_0x35ba36(0x173))||_0x4effd6['message'][_0x35ba36(0x175)](_0x35ba36(0x14d))?(_0x51415c[_0x35ba36(0x158)]['error'](_0x35ba36(0x17c)),_0x51415c['log'][_0x35ba36(0x17b)](_0x35ba36(0x171)+ADAPTER_DIR)):_0x51415c['log']['error'](_0x35ba36(0x16a)+_0x4effd6[_0x35ba36(0x16c)]+_0x35ba36(0x14f));return;}installRequirementsInVenv(_0x51415c,_0x35c22b,_0x211eb9);}function checkAndInstall(_0x294597,_0x40ba66){const _0x2add97=a3_0x717703;if(fs[_0x2add97(0x150)](PYTHON_EXE)&&fs[_0x2add97(0x150)](PIP_EXE))try{return _0x294597[_0x2add97(0x158)][_0x2add97(0x155)](_0x2add97(0x159)),execSync('\x22'+PYTHON_EXE+_0x2add97(0x160),{'timeout':0x3a98}),_0x294597['log']['info'](_0x2add97(0x176)),_0x40ba66&&_0x40ba66(),!![];}catch(_0x2cf36d){_0x294597[_0x2add97(0x158)]['warn'](_0x2add97(0x162));}else _0x294597[_0x2add97(0x158)][_0x2add97(0x16b)](_0x2add97(0x151));return installPythonDependencies(_0x294597,_0x40ba66),![];}module['exports']={'checkAndInstall':checkAndInstall,'PYTHON_EXE':PYTHON_EXE};