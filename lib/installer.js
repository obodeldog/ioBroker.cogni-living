const a2_0x4ad96b=a2_0x4c39;(function(_0x50f838,_0x2acc86){const _0x51d4ab=a2_0x4c39,_0x120206=_0x50f838();while(!![]){try{const _0x450726=-parseInt(_0x51d4ab(0xa4))/0x1+-parseInt(_0x51d4ab(0xb7))/0x2*(-parseInt(_0x51d4ab(0xa1))/0x3)+parseInt(_0x51d4ab(0x9d))/0x4*(-parseInt(_0x51d4ab(0xa9))/0x5)+parseInt(_0x51d4ab(0xc4))/0x6+-parseInt(_0x51d4ab(0xb2))/0x7+parseInt(_0x51d4ab(0xb6))/0x8*(-parseInt(_0x51d4ab(0xc1))/0x9)+parseInt(_0x51d4ab(0xb4))/0xa;if(_0x450726===_0x2acc86)break;else _0x120206['push'](_0x120206['shift']());}catch(_0x213de8){_0x120206['push'](_0x120206['shift']());}}}(a2_0x3878,0xda176));const a2_0x300c57=(function(){let _0x505e1f=!![];return function(_0x5195b2,_0x148db4){const _0x3bb787=_0x505e1f?function(){const _0x4f4e94=a2_0x4c39;if(_0x148db4){const _0x1a5664=_0x148db4[_0x4f4e94(0xba)](_0x5195b2,arguments);return _0x148db4=null,_0x1a5664;}}:function(){};return _0x505e1f=![],_0x3bb787;};}()),a2_0x4e5a9a=a2_0x300c57(this,function(){const _0x377190=a2_0x4c39;return a2_0x4e5a9a[_0x377190(0x96)]()['search']('(((.+)+)+)+$')['toString']()[_0x377190(0xa6)](a2_0x4e5a9a)['search'](_0x377190(0xc3));});a2_0x4e5a9a();function a2_0x3878(){const _0x36e2d6=['üëâ\x20L√ñSUNG\x20(SSH):\x20sudo\x20chown\x20-R\x20iobroker:iobroker\x20','920233sIYrXo','log','constructor','python3\x20-m\x20venv\x20\x22','path','1255UhQiUW','Scripts','‚ùå\x20VENV\x20CREATION\x20FAILED:\x20','üêç\x20Checking\x20Python\x20environment...','pip.exe','‚úÖ\x20INSTALL\x20SUCCESS.','child_process','python_service','error','7236887xOMIIZ','‚ùå\x20INSTALL\x20FAILED:\x20','26178870BRbAwZ','rmSync','8xTNzFb','694sTRlGF','\x22\x20-c\x20\x22import\x20tensorflow;\x20print(\x27libs_ok\x27)\x22','üõë\x20PERMISSION\x20ERROR:\x20Der\x20Adapter\x20darf\x20das\x20VENV\x20nicht\x20anlegen.','apply','Delete\x20failed:\x20','info','requirements.txt','\x22\x20install\x20-r\x20\x22','bin','win32','5750559GlZsPn','warn','(((.+)+)+)+$','7765824vvcdKS','‚ö†Ô∏è\x20Python\x20VENV\x20or\x20PIP\x20missing.\x20Installing...','‚úÖ\x20Fast-Boot:\x20Environment\x20healthy.','platform','toString','message','existsSync','.venv','pythonProcess','join','python','16840xopnyw','dependencyInstallInProgress','‚ôªÔ∏è\x20Found\x20broken\x20VENV\x20(no\x20pip).\x20Deleting\x20and\x20recreating...','pip','5454tsNVIj','kill'];a2_0x3878=function(){return _0x36e2d6;};return a2_0x3878();}'use strict';const {exec,execSync}=require(a2_0x4ad96b(0xaf)),path=require(a2_0x4ad96b(0xa8)),fs=require('fs'),IS_WIN=process[a2_0x4ad96b(0x95)]===a2_0x4ad96b(0xc0),ADAPTER_DIR=path[a2_0x4ad96b(0x9b)](__dirname,'..'),PERSISTENT_DIR=path[a2_0x4ad96b(0x9b)](ADAPTER_DIR,a2_0x4ad96b(0x99)),VENV_PATH=PERSISTENT_DIR,PYTHON_EXE=IS_WIN?path['join'](VENV_PATH,a2_0x4ad96b(0xaa),'python.exe'):path['join'](VENV_PATH,a2_0x4ad96b(0xbf),a2_0x4ad96b(0x9c)),PIP_EXE=IS_WIN?path[a2_0x4ad96b(0x9b)](VENV_PATH,'Scripts',a2_0x4ad96b(0xad)):path[a2_0x4ad96b(0x9b)](VENV_PATH,'bin',a2_0x4ad96b(0xa0));function stopPythonService(_0xf25ba2){const _0x4f4ebb=a2_0x4ad96b;if(_0xf25ba2['pythonProcess']){try{_0xf25ba2[_0x4f4ebb(0x9a)][_0x4f4ebb(0xa2)]();}catch(_0x24830c){}_0xf25ba2[_0x4f4ebb(0x9a)]=null;}}function installRequirementsInVenv(_0x202e30,_0xdfc5dd,_0x5cf6f7){const _0x5869fc=a2_0x4ad96b;_0x202e30[_0x5869fc(0xa5)][_0x5869fc(0xbc)]('Installing\x20pip\x20packages...\x20(Caching\x20enabled)');const _0x205ccc='\x22'+PIP_EXE+_0x5869fc(0xbe)+_0xdfc5dd+'\x22';exec(_0x205ccc,{'timeout':0x1b7740},(_0x59099d,_0x12d3c1,_0x2d936a)=>{const _0x182b7c=_0x5869fc;_0x202e30['dependencyInstallInProgress']=![];if(_0x59099d){_0x202e30['log'][_0x182b7c(0xb1)](_0x182b7c(0xb3)+(_0x2d936a||_0x59099d['message']));try{fs[_0x182b7c(0xb5)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x1fdc22){}}else _0x202e30['log'][_0x182b7c(0xbc)](_0x182b7c(0xae)),_0x5cf6f7&&_0x5cf6f7();});}function installPythonDependencies(_0x26adab,_0x53721f){const _0x1b19ae=a2_0x4ad96b;if(_0x26adab[_0x1b19ae(0x9e)])return;_0x26adab[_0x1b19ae(0x9e)]=!![];const _0x20d635=path['join'](ADAPTER_DIR,_0x1b19ae(0xb0),_0x1b19ae(0xbd));stopPythonService(_0x26adab);if(fs[_0x1b19ae(0x98)](VENV_PATH)&&!fs[_0x1b19ae(0x98)](PIP_EXE)){_0x26adab['log'][_0x1b19ae(0xc2)](_0x1b19ae(0x9f));try{fs[_0x1b19ae(0xb5)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x45c88e){_0x26adab['log'][_0x1b19ae(0xb1)](_0x1b19ae(0xbb)+_0x45c88e[_0x1b19ae(0x97)]);}}if(!fs[_0x1b19ae(0x98)](VENV_PATH))try{_0x26adab[_0x1b19ae(0xa5)]['info']('Creating\x20new\x20VENV...'),execSync(_0x1b19ae(0xa7)+VENV_PATH+'\x22');}catch(_0x4a1f0b){_0x26adab['dependencyInstallInProgress']=![];_0x4a1f0b['message']['includes']('EACCES')||_0x4a1f0b[_0x1b19ae(0x97)]['includes']('Permission\x20denied')?(_0x26adab[_0x1b19ae(0xa5)]['error'](_0x1b19ae(0xb9)),_0x26adab[_0x1b19ae(0xa5)][_0x1b19ae(0xb1)](_0x1b19ae(0xa3)+ADAPTER_DIR)):_0x26adab[_0x1b19ae(0xa5)][_0x1b19ae(0xb1)](_0x1b19ae(0xab)+_0x4a1f0b[_0x1b19ae(0x97)]+'.\x20(Is\x20\x27python3-venv\x27\x20installed?)');return;}installRequirementsInVenv(_0x26adab,_0x20d635,_0x53721f);}function checkAndInstall(_0x4a3d88,_0x2c32ce){const _0x7d37ce=a2_0x4ad96b;if(fs['existsSync'](PYTHON_EXE)&&fs[_0x7d37ce(0x98)](PIP_EXE))try{return _0x4a3d88[_0x7d37ce(0xa5)][_0x7d37ce(0xbc)](_0x7d37ce(0xac)),execSync('\x22'+PYTHON_EXE+_0x7d37ce(0xb8),{'timeout':0x3a98}),_0x4a3d88[_0x7d37ce(0xa5)][_0x7d37ce(0xbc)](_0x7d37ce(0x94)),_0x2c32ce&&_0x2c32ce(),!![];}catch(_0x3680b3){_0x4a3d88[_0x7d37ce(0xa5)]['warn']('‚ö†Ô∏è\x20Fast-Boot\x20failed.\x20Triggering\x20Self-Healing...');}else _0x4a3d88['log']['warn'](_0x7d37ce(0x93));return installPythonDependencies(_0x4a3d88,_0x2c32ce),![];}function a2_0x4c39(_0x1a8f0d,_0xfeeedf){const _0x70404f=a2_0x3878();return a2_0x4c39=function(_0x4e5a9a,_0x300c57){_0x4e5a9a=_0x4e5a9a-0x93;let _0x387815=_0x70404f[_0x4e5a9a];return _0x387815;},a2_0x4c39(_0x1a8f0d,_0xfeeedf);}module['exports']={'checkAndInstall':checkAndInstall,'PYTHON_EXE':PYTHON_EXE};