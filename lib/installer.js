const a3_0x655d0e=a3_0x5075;(function(_0x3f24f8,_0x19f5a0){const _0x5b7421=a3_0x5075,_0x7b15fa=_0x3f24f8();while(!![]){try{const _0x234aa3=-parseInt(_0x5b7421(0x132))/0x1*(-parseInt(_0x5b7421(0x11c))/0x2)+parseInt(_0x5b7421(0x109))/0x3*(-parseInt(_0x5b7421(0x108))/0x4)+-parseInt(_0x5b7421(0x12f))/0x5+-parseInt(_0x5b7421(0x12c))/0x6+parseInt(_0x5b7421(0x10f))/0x7*(-parseInt(_0x5b7421(0x117))/0x8)+-parseInt(_0x5b7421(0x122))/0x9*(parseInt(_0x5b7421(0x107))/0xa)+parseInt(_0x5b7421(0x123))/0xb;if(_0x234aa3===_0x19f5a0)break;else _0x7b15fa['push'](_0x7b15fa['shift']());}catch(_0x3d06b3){_0x7b15fa['push'](_0x7b15fa['shift']());}}}(a3_0x2ac1,0x21de9));const a3_0x824c17=(function(){let _0x3f397c=!![];return function(_0x1f5055,_0x1ab7a6){const _0x43909b=_0x3f397c?function(){const _0x73d274=a3_0x5075;if(_0x1ab7a6){const _0x45770a=_0x1ab7a6[_0x73d274(0x12b)](_0x1f5055,arguments);return _0x1ab7a6=null,_0x45770a;}}:function(){};return _0x3f397c=![],_0x43909b;};}()),a3_0x46a8aa=a3_0x824c17(this,function(){const _0x50eb73=a3_0x5075;return a3_0x46a8aa['toString']()[_0x50eb73(0x10d)](_0x50eb73(0x12e))['toString']()[_0x50eb73(0x136)](a3_0x46a8aa)[_0x50eb73(0x10d)]('(((.+)+)+)+$');});a3_0x46a8aa();'use strict';const {exec,execSync}=require('child_process'),path=require(a3_0x655d0e(0x10b)),fs=require('fs'),IS_WIN=process['platform']===a3_0x655d0e(0x135),ADAPTER_DIR=path[a3_0x655d0e(0x116)](__dirname,'..'),PERSISTENT_DIR=path[a3_0x655d0e(0x116)](ADAPTER_DIR,a3_0x655d0e(0x110)),VENV_PATH=PERSISTENT_DIR,PYTHON_EXE=IS_WIN?path[a3_0x655d0e(0x116)](VENV_PATH,a3_0x655d0e(0x11f),'python.exe'):path['join'](VENV_PATH,a3_0x655d0e(0x124),a3_0x655d0e(0x131)),PIP_EXE=IS_WIN?path[a3_0x655d0e(0x116)](VENV_PATH,'Scripts',a3_0x655d0e(0x10c)):path[a3_0x655d0e(0x116)](VENV_PATH,a3_0x655d0e(0x124),a3_0x655d0e(0x129));function stopPythonService(_0x6d7e5b){const _0x9986a0=a3_0x655d0e;if(_0x6d7e5b[_0x9986a0(0x121)]){try{_0x6d7e5b[_0x9986a0(0x121)]['kill']();}catch(_0x3affe7){}_0x6d7e5b[_0x9986a0(0x121)]=null;}}function installRequirementsInVenv(_0x5d926b,_0x261f83,_0x53de9f){const _0x498584=a3_0x655d0e;_0x5d926b[_0x498584(0x133)][_0x498584(0x130)](_0x498584(0x11b));const _0x5ed03e='\x22'+PIP_EXE+_0x498584(0x115)+_0x261f83+'\x22';exec(_0x5ed03e,{'timeout':0x1b7740},(_0xc850f0,_0x57effb,_0x4ffa79)=>{const _0x2c09a5=_0x498584;_0x5d926b[_0x2c09a5(0x12a)]=![];if(_0xc850f0){_0x5d926b['log'][_0x2c09a5(0x128)](_0x2c09a5(0x114)+(_0x4ffa79||_0xc850f0[_0x2c09a5(0x119)]));try{fs[_0x2c09a5(0x10a)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x4cb516){}}else _0x5d926b[_0x2c09a5(0x133)][_0x2c09a5(0x130)]('‚úÖ\x20INSTALL\x20SUCCESS.'),_0x53de9f&&_0x53de9f();});}function installPythonDependencies(_0x108696,_0x43223d){const _0x4c680e=a3_0x655d0e;if(_0x108696[_0x4c680e(0x12a)])return;_0x108696[_0x4c680e(0x12a)]=!![];const _0x4df1d5=path['join'](ADAPTER_DIR,_0x4c680e(0x11a),'requirements.txt');stopPythonService(_0x108696);if(fs[_0x4c680e(0x118)](VENV_PATH)&&!fs['existsSync'](PIP_EXE)){_0x108696[_0x4c680e(0x133)][_0x4c680e(0x120)]('‚ôªÔ∏è\x20Found\x20broken\x20VENV\x20(no\x20pip).\x20Deleting\x20and\x20recreating...');try{fs[_0x4c680e(0x10a)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x9a59bf){_0x108696['log'][_0x4c680e(0x128)]('Delete\x20failed:\x20'+_0x9a59bf['message']);}}if(!fs[_0x4c680e(0x118)](VENV_PATH))try{_0x108696['log'][_0x4c680e(0x130)](_0x4c680e(0x111)),execSync(_0x4c680e(0x113)+VENV_PATH+'\x22');}catch(_0x40c1a3){_0x108696[_0x4c680e(0x12a)]=![];_0x40c1a3[_0x4c680e(0x119)]['includes']('EACCES')||_0x40c1a3[_0x4c680e(0x119)][_0x4c680e(0x134)](_0x4c680e(0x112))?(_0x108696[_0x4c680e(0x133)]['error'](_0x4c680e(0x127)),_0x108696[_0x4c680e(0x133)][_0x4c680e(0x128)](_0x4c680e(0x11d)+ADAPTER_DIR)):_0x108696[_0x4c680e(0x133)][_0x4c680e(0x128)](_0x4c680e(0x125)+_0x40c1a3['message']+_0x4c680e(0x10e));return;}installRequirementsInVenv(_0x108696,_0x4df1d5,_0x43223d);}function checkAndInstall(_0x4214b4,_0x4d9612){const _0x1028c3=a3_0x655d0e;if(fs[_0x1028c3(0x118)](PYTHON_EXE)&&fs[_0x1028c3(0x118)](PIP_EXE))try{return _0x4214b4[_0x1028c3(0x133)][_0x1028c3(0x130)](_0x1028c3(0x126)),execSync('\x22'+PYTHON_EXE+_0x1028c3(0x11e),{'timeout':0x3a98}),_0x4214b4['log'][_0x1028c3(0x130)]('‚úÖ\x20Fast-Boot:\x20Environment\x20healthy.'),_0x4d9612&&_0x4d9612(),!![];}catch(_0x18dedb){_0x4214b4[_0x1028c3(0x133)]['warn']('‚ö†Ô∏è\x20Fast-Boot\x20failed.\x20Triggering\x20Self-Healing...');}else _0x4214b4[_0x1028c3(0x133)][_0x1028c3(0x120)](_0x1028c3(0x12d));return installPythonDependencies(_0x4214b4,_0x4d9612),![];}function a3_0x5075(_0x367c87,_0x11fc41){const _0x47ff33=a3_0x2ac1();return a3_0x5075=function(_0x46a8aa,_0x824c17){_0x46a8aa=_0x46a8aa-0x107;let _0x2ac170=_0x47ff33[_0x46a8aa];return _0x2ac170;},a3_0x5075(_0x367c87,_0x11fc41);}function a3_0x2ac1(){const _0x8ceef5=['‚ùå\x20INSTALL\x20FAILED:\x20','\x22\x20install\x20-r\x20\x22','join','2672FSXzbB','existsSync','message','python_service','Installing\x20pip\x20packages...\x20(Caching\x20enabled)','516174ZrGyOU','üëâ\x20L√ñSUNG\x20(SSH):\x20sudo\x20chown\x20-R\x20iobroker:iobroker\x20','\x22\x20-c\x20\x22import\x20tensorflow;\x20print(\x27libs_ok\x27)\x22','Scripts','warn','pythonProcess','493929MPPNkq','4127915ZquxKZ','bin','‚ùå\x20VENV\x20CREATION\x20FAILED:\x20','üêç\x20Checking\x20Python\x20environment...','üõë\x20PERMISSION\x20ERROR:\x20Der\x20Adapter\x20darf\x20das\x20VENV\x20nicht\x20anlegen.','error','pip','dependencyInstallInProgress','apply','1576278GqoMby','‚ö†Ô∏è\x20Python\x20VENV\x20or\x20PIP\x20missing.\x20Installing...','(((.+)+)+)+$','61950xGIzyt','info','python','1GByAIG','log','includes','win32','constructor','20MxhMWz','237296vSrZSW','3aUsBWI','rmSync','path','pip.exe','search','.\x20(Is\x20\x27python3-venv\x27\x20installed?)','1057UnprNd','.venv','Creating\x20new\x20VENV...','Permission\x20denied','python3\x20-m\x20venv\x20\x22'];a3_0x2ac1=function(){return _0x8ceef5;};return a3_0x2ac1();}module['exports']={'checkAndInstall':checkAndInstall,'PYTHON_EXE':PYTHON_EXE};