const a3_0x272bea=a3_0x3a68;function a3_0x3a68(_0x4e9832,_0x3330cd){const _0x110c7b=a3_0x37e1();return a3_0x3a68=function(_0x1fee16,_0x3dbc23){_0x1fee16=_0x1fee16-0xf5;let _0x37e161=_0x110c7b[_0x1fee16];return _0x37e161;},a3_0x3a68(_0x4e9832,_0x3330cd);}(function(_0xac2a9c,_0x3f3a3c){const _0x3ee71b=a3_0x3a68,_0x11e509=_0xac2a9c();while(!![]){try{const _0x2cebf3=-parseInt(_0x3ee71b(0x103))/0x1+-parseInt(_0x3ee71b(0x102))/0x2+-parseInt(_0x3ee71b(0xfb))/0x3+-parseInt(_0x3ee71b(0x100))/0x4+parseInt(_0x3ee71b(0x115))/0x5+parseInt(_0x3ee71b(0xf9))/0x6*(parseInt(_0x3ee71b(0x114))/0x7)+parseInt(_0x3ee71b(0x116))/0x8;if(_0x2cebf3===_0x3f3a3c)break;else _0x11e509['push'](_0x11e509['shift']());}catch(_0x5693da){_0x11e509['push'](_0x11e509['shift']());}}}(a3_0x37e1,0xa9653));const a3_0x3dbc23=(function(){let _0x44ea8f=!![];return function(_0x1e2ef1,_0x2c031f){const _0x38fb96=_0x44ea8f?function(){const _0x46b917=a3_0x3a68;if(_0x2c031f){const _0x32d98b=_0x2c031f[_0x46b917(0x107)](_0x1e2ef1,arguments);return _0x2c031f=null,_0x32d98b;}}:function(){};return _0x44ea8f=![],_0x38fb96;};}()),a3_0x1fee16=a3_0x3dbc23(this,function(){const _0x11d5b8=a3_0x3a68;return a3_0x1fee16[_0x11d5b8(0x10a)]()['search'](_0x11d5b8(0x113))[_0x11d5b8(0x10a)]()[_0x11d5b8(0x106)](a3_0x1fee16)[_0x11d5b8(0xfe)](_0x11d5b8(0x113));});a3_0x1fee16();'use strict';const {exec,execSync}=require(a3_0x272bea(0x118)),path=require(a3_0x272bea(0x11a)),fs=require('fs'),IS_WIN=process[a3_0x272bea(0x10b)]===a3_0x272bea(0x10e),ADAPTER_DIR=path['join'](__dirname,'..'),PERSISTENT_DIR=path['join'](ADAPTER_DIR,a3_0x272bea(0x123)),VENV_PATH=PERSISTENT_DIR,PYTHON_EXE=IS_WIN?path[a3_0x272bea(0x109)](VENV_PATH,'Scripts',a3_0x272bea(0x10c)):path[a3_0x272bea(0x109)](VENV_PATH,a3_0x272bea(0x112),a3_0x272bea(0xfa)),PIP_EXE=IS_WIN?path[a3_0x272bea(0x109)](VENV_PATH,a3_0x272bea(0x117),a3_0x272bea(0x11b)):path['join'](VENV_PATH,'bin',a3_0x272bea(0x126));function a3_0x37e1(){const _0x3a80c2=['existsSync','1853350WCbJwf','583487RqQDrZ','message','‚úÖ\x20INSTALL\x20SUCCESS.','constructor','apply','info','join','toString','platform','python.exe','error','win32','rmSync','warn','log','bin','(((.+)+)+)+$','6898668lEFwmF','2383555dHinUy','20162832IBmZZG','Scripts','child_process','\x22\x20-c\x20\x22import\x20tensorflow;\x20print(\x27libs_ok\x27)\x22','path','pip.exe','‚ùå\x20VENV\x20CREATION\x20FAILED:\x20','üõë\x20PERMISSION\x20ERROR:\x20Der\x20Adapter\x20darf\x20das\x20VENV\x20nicht\x20anlegen.','python3\x20-m\x20venv\x20\x22','includes','Installing\x20pip\x20packages...\x20(Caching\x20enabled)','Creating\x20new\x20VENV...','EACCES','.venv','‚ùå\x20INSTALL\x20FAILED:\x20','Permission\x20denied','pip','.\x20(Is\x20\x27python3-venv\x27\x20installed?)','‚úÖ\x20Fast-Boot:\x20Environment\x20healthy.','‚ôªÔ∏è\x20Found\x20broken\x20VENV\x20(no\x20pip).\x20Deleting\x20and\x20recreating...','‚ö†Ô∏è\x20Python\x20VENV\x20or\x20PIP\x20missing.\x20Installing...','dependencyInstallInProgress','\x22\x20install\x20-r\x20\x22','6SulfHn','python','3550494CADhGG','‚ö†Ô∏è\x20Fast-Boot\x20failed.\x20Triggering\x20Self-Healing...','pythonProcess','search','kill','2380344KgyKjM'];a3_0x37e1=function(){return _0x3a80c2;};return a3_0x37e1();}function stopPythonService(_0x16d44c){const _0x9e2eb7=a3_0x272bea;if(_0x16d44c['pythonProcess']){try{_0x16d44c[_0x9e2eb7(0xfd)][_0x9e2eb7(0xff)]();}catch(_0x3eb02c){}_0x16d44c[_0x9e2eb7(0xfd)]=null;}}function installRequirementsInVenv(_0x404c77,_0x66562c,_0x1537bd){const _0x4f6250=a3_0x272bea;_0x404c77[_0x4f6250(0x111)]['info'](_0x4f6250(0x120));const _0x8674f4='\x22'+PIP_EXE+_0x4f6250(0xf8)+_0x66562c+'\x22';exec(_0x8674f4,{'timeout':0x1b7740},(_0x4e495e,_0x292102,_0x4a19bc)=>{const _0x158708=_0x4f6250;_0x404c77['dependencyInstallInProgress']=![];if(_0x4e495e){_0x404c77[_0x158708(0x111)][_0x158708(0x10d)](_0x158708(0x124)+(_0x4a19bc||_0x4e495e[_0x158708(0x104)]));try{fs['rmSync'](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x464e58){}}else _0x404c77['log'][_0x158708(0x108)](_0x158708(0x105)),_0x1537bd&&_0x1537bd();});}function installPythonDependencies(_0x114562,_0x4c23f8){const _0x55acc1=a3_0x272bea;if(_0x114562[_0x55acc1(0xf7)])return;_0x114562[_0x55acc1(0xf7)]=!![];const _0x320414=path[_0x55acc1(0x109)](ADAPTER_DIR,'python_service','requirements.txt');stopPythonService(_0x114562);if(fs[_0x55acc1(0x101)](VENV_PATH)&&!fs[_0x55acc1(0x101)](PIP_EXE)){_0x114562[_0x55acc1(0x111)][_0x55acc1(0x110)](_0x55acc1(0xf5));try{fs[_0x55acc1(0x10f)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x266e83){_0x114562[_0x55acc1(0x111)][_0x55acc1(0x10d)]('Delete\x20failed:\x20'+_0x266e83[_0x55acc1(0x104)]);}}if(!fs[_0x55acc1(0x101)](VENV_PATH))try{_0x114562[_0x55acc1(0x111)][_0x55acc1(0x108)](_0x55acc1(0x121)),execSync(_0x55acc1(0x11e)+VENV_PATH+'\x22');}catch(_0x1e05a7){_0x114562[_0x55acc1(0xf7)]=![];_0x1e05a7[_0x55acc1(0x104)]['includes'](_0x55acc1(0x122))||_0x1e05a7[_0x55acc1(0x104)][_0x55acc1(0x11f)](_0x55acc1(0x125))?(_0x114562[_0x55acc1(0x111)][_0x55acc1(0x10d)](_0x55acc1(0x11d)),_0x114562[_0x55acc1(0x111)]['error']('üëâ\x20L√ñSUNG\x20(SSH):\x20sudo\x20chown\x20-R\x20iobroker:iobroker\x20'+ADAPTER_DIR)):_0x114562[_0x55acc1(0x111)][_0x55acc1(0x10d)](_0x55acc1(0x11c)+_0x1e05a7['message']+_0x55acc1(0x127));return;}installRequirementsInVenv(_0x114562,_0x320414,_0x4c23f8);}function checkAndInstall(_0x200128,_0x1b93f8){const _0x18f965=a3_0x272bea;if(fs[_0x18f965(0x101)](PYTHON_EXE)&&fs[_0x18f965(0x101)](PIP_EXE))try{return _0x200128['log']['info']('üêç\x20Checking\x20Python\x20environment...'),execSync('\x22'+PYTHON_EXE+_0x18f965(0x119),{'timeout':0x3a98}),_0x200128[_0x18f965(0x111)]['info'](_0x18f965(0x128)),_0x1b93f8&&_0x1b93f8(),!![];}catch(_0x226b00){_0x200128[_0x18f965(0x111)]['warn'](_0x18f965(0xfc));}else _0x200128[_0x18f965(0x111)][_0x18f965(0x110)](_0x18f965(0xf6));return installPythonDependencies(_0x200128,_0x1b93f8),![];}module['exports']={'checkAndInstall':checkAndInstall,'PYTHON_EXE':PYTHON_EXE};