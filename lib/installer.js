const a3_0x5361ee=a3_0x4aa9;(function(_0x1c0d1e,_0x4f0591){const _0x1cb7f7=a3_0x4aa9,_0x58f3c9=_0x1c0d1e();while(!![]){try{const _0x51c74f=-parseInt(_0x1cb7f7(0x140))/0x1+-parseInt(_0x1cb7f7(0x137))/0x2*(parseInt(_0x1cb7f7(0x122))/0x3)+parseInt(_0x1cb7f7(0x12f))/0x4*(-parseInt(_0x1cb7f7(0x121))/0x5)+parseInt(_0x1cb7f7(0x144))/0x6+-parseInt(_0x1cb7f7(0x134))/0x7+parseInt(_0x1cb7f7(0x120))/0x8*(parseInt(_0x1cb7f7(0x13d))/0x9)+parseInt(_0x1cb7f7(0x135))/0xa;if(_0x51c74f===_0x4f0591)break;else _0x58f3c9['push'](_0x58f3c9['shift']());}catch(_0x23cd8a){_0x58f3c9['push'](_0x58f3c9['shift']());}}}(a3_0x474a,0x57aec));function a3_0x474a(){const _0x4ff320=['üõë\x20PERMISSION\x20ERROR:\x20Der\x20Adapter\x20darf\x20das\x20VENV\x20nicht\x20anlegen.','Installing\x20pip\x20packages...\x20(Caching\x20enabled)','Permission\x20denied','Delete\x20failed:\x20','üêç\x20Checking\x20Python\x20environment...','‚ö†Ô∏è\x20Python\x20VENV\x20or\x20PIP\x20missing.\x20Installing...','(((.+)+)+)+$','328BOIfsh','355LXKHpo','282123mwTrEp','‚úÖ\x20INSTALL\x20SUCCESS.','constructor','python3\x20-m\x20venv\x20\x22','win32','warn','toString','existsSync','includes','dependencyInstallInProgress','Scripts','‚ö†Ô∏è\x20Fast-Boot\x20failed.\x20Triggering\x20Self-Healing...','info','22972gVIcdB','.\x20(Is\x20\x27python3-venv\x27\x20installed?)','.venv','apply','child_process','2312702veXzyW','9278760wVosqh','Creating\x20new\x20VENV...','2zCdLyR','python.exe','platform','pip','message','log','28143Kaeqeg','rmSync','join','481465eUOqSz','python','pythonProcess','path','3700260tyGwtC','error','bin','‚ùå\x20INSTALL\x20FAILED:\x20','‚ôªÔ∏è\x20Found\x20broken\x20VENV\x20(no\x20pip).\x20Deleting\x20and\x20recreating...','\x22\x20install\x20-r\x20\x22','kill'];a3_0x474a=function(){return _0x4ff320;};return a3_0x474a();}const a3_0x36b139=(function(){let _0x7d14c5=!![];return function(_0x3851c6,_0x1bd8ed){const _0x301a17=_0x7d14c5?function(){const _0x124f51=a3_0x4aa9;if(_0x1bd8ed){const _0x318e50=_0x1bd8ed[_0x124f51(0x132)](_0x3851c6,arguments);return _0x1bd8ed=null,_0x318e50;}}:function(){};return _0x7d14c5=![],_0x301a17;};}()),a3_0x1bd4fb=a3_0x36b139(this,function(){const _0x406a73=a3_0x4aa9;return a3_0x1bd4fb[_0x406a73(0x128)]()['search']('(((.+)+)+)+$')['toString']()[_0x406a73(0x124)](a3_0x1bd4fb)['search'](_0x406a73(0x11f));});a3_0x1bd4fb();'use strict';const {exec,execSync}=require(a3_0x5361ee(0x133)),path=require(a3_0x5361ee(0x143)),fs=require('fs'),IS_WIN=process[a3_0x5361ee(0x139)]===a3_0x5361ee(0x126),ADAPTER_DIR=path[a3_0x5361ee(0x13f)](__dirname,'..'),PERSISTENT_DIR=path[a3_0x5361ee(0x13f)](ADAPTER_DIR,a3_0x5361ee(0x131)),VENV_PATH=PERSISTENT_DIR,PYTHON_EXE=IS_WIN?path[a3_0x5361ee(0x13f)](VENV_PATH,a3_0x5361ee(0x12c),a3_0x5361ee(0x138)):path['join'](VENV_PATH,'bin',a3_0x5361ee(0x141)),PIP_EXE=IS_WIN?path[a3_0x5361ee(0x13f)](VENV_PATH,a3_0x5361ee(0x12c),'pip.exe'):path[a3_0x5361ee(0x13f)](VENV_PATH,a3_0x5361ee(0x146),a3_0x5361ee(0x13a));function stopPythonService(_0x24eaf0){const _0x56f9b4=a3_0x5361ee;if(_0x24eaf0[_0x56f9b4(0x142)]){try{_0x24eaf0[_0x56f9b4(0x142)][_0x56f9b4(0x118)]();}catch(_0x3e7fb3){}_0x24eaf0[_0x56f9b4(0x142)]=null;}}function installRequirementsInVenv(_0x22606b,_0x2a8218,_0x353d22){const _0x1ac581=a3_0x5361ee;_0x22606b['log'][_0x1ac581(0x12e)](_0x1ac581(0x11a));const _0x4f20a9='\x22'+PIP_EXE+_0x1ac581(0x117)+_0x2a8218+'\x22';exec(_0x4f20a9,{'timeout':0x1b7740},(_0x524e8a,_0x331503,_0x24b1a8)=>{const _0x4b708e=_0x1ac581;_0x22606b[_0x4b708e(0x12b)]=![];if(_0x524e8a){_0x22606b[_0x4b708e(0x13c)][_0x4b708e(0x145)](_0x4b708e(0x147)+(_0x24b1a8||_0x524e8a['message']));try{fs[_0x4b708e(0x13e)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x141d73){}}else _0x22606b[_0x4b708e(0x13c)][_0x4b708e(0x12e)](_0x4b708e(0x123)),_0x353d22&&_0x353d22();});}function installPythonDependencies(_0x470128,_0x512ad6){const _0x6151c9=a3_0x5361ee;if(_0x470128[_0x6151c9(0x12b)])return;_0x470128[_0x6151c9(0x12b)]=!![];const _0x1d011d=path[_0x6151c9(0x13f)](ADAPTER_DIR,'python_service','requirements.txt');stopPythonService(_0x470128);if(fs['existsSync'](VENV_PATH)&&!fs[_0x6151c9(0x129)](PIP_EXE)){_0x470128[_0x6151c9(0x13c)][_0x6151c9(0x127)](_0x6151c9(0x148));try{fs[_0x6151c9(0x13e)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x18a13c){_0x470128[_0x6151c9(0x13c)][_0x6151c9(0x145)](_0x6151c9(0x11c)+_0x18a13c[_0x6151c9(0x13b)]);}}if(!fs[_0x6151c9(0x129)](VENV_PATH))try{_0x470128[_0x6151c9(0x13c)][_0x6151c9(0x12e)](_0x6151c9(0x136)),execSync(_0x6151c9(0x125)+VENV_PATH+'\x22');}catch(_0x19bad6){_0x470128[_0x6151c9(0x12b)]=![];_0x19bad6['message'][_0x6151c9(0x12a)]('EACCES')||_0x19bad6[_0x6151c9(0x13b)]['includes'](_0x6151c9(0x11b))?(_0x470128[_0x6151c9(0x13c)][_0x6151c9(0x145)](_0x6151c9(0x119)),_0x470128[_0x6151c9(0x13c)][_0x6151c9(0x145)]('üëâ\x20L√ñSUNG\x20(SSH):\x20sudo\x20chown\x20-R\x20iobroker:iobroker\x20'+ADAPTER_DIR)):_0x470128[_0x6151c9(0x13c)][_0x6151c9(0x145)]('‚ùå\x20VENV\x20CREATION\x20FAILED:\x20'+_0x19bad6[_0x6151c9(0x13b)]+_0x6151c9(0x130));return;}installRequirementsInVenv(_0x470128,_0x1d011d,_0x512ad6);}function checkAndInstall(_0x378fb9,_0x4ed68e){const _0x4f6ce3=a3_0x5361ee;if(fs[_0x4f6ce3(0x129)](PYTHON_EXE)&&fs[_0x4f6ce3(0x129)](PIP_EXE))try{return _0x378fb9[_0x4f6ce3(0x13c)][_0x4f6ce3(0x12e)](_0x4f6ce3(0x11d)),execSync('\x22'+PYTHON_EXE+'\x22\x20-c\x20\x22import\x20torch;\x20print(\x27libs_ok\x27)\x22',{'timeout':0x3a98}),_0x378fb9[_0x4f6ce3(0x13c)][_0x4f6ce3(0x12e)]('‚úÖ\x20Fast-Boot:\x20Environment\x20healthy.'),_0x4ed68e&&_0x4ed68e(),!![];}catch(_0x47495d){_0x378fb9[_0x4f6ce3(0x13c)]['warn'](_0x4f6ce3(0x12d));}else _0x378fb9['log'][_0x4f6ce3(0x127)](_0x4f6ce3(0x11e));return installPythonDependencies(_0x378fb9,_0x4ed68e),![];}function a3_0x4aa9(_0x327e50,_0x1a309a){const _0x1e506e=a3_0x474a();return a3_0x4aa9=function(_0x1bd4fb,_0x36b139){_0x1bd4fb=_0x1bd4fb-0x117;let _0x474a16=_0x1e506e[_0x1bd4fb];return _0x474a16;},a3_0x4aa9(_0x327e50,_0x1a309a);}module['exports']={'checkAndInstall':checkAndInstall,'PYTHON_EXE':PYTHON_EXE};