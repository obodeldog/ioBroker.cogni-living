const a3_0x321947=a3_0x2f9d;function a3_0x3d10(){const _0x4a760d=['11266206OvzIGz','â™»ï¸\x20Found\x20broken\x20VENV\x20(no\x20pip).\x20Deleting\x20and\x20recreating...','20391YwjKZM','797645JYDXrr','error','info','âš ï¸\x20Python\x20VENV\x20or\x20PIP\x20missing.\x20Installing...','âŒ\x20INSTALL\x20FAILED:\x20','python_service','search','toString','join','child_process','kill','python','pythonProcess','platform','EACCES','666520uFTcCr','ðŸ›‘\x20PERMISSION\x20ERROR:\x20Der\x20Adapter\x20darf\x20das\x20VENV\x20nicht\x20anlegen.','dependencyInstallInProgress','âš ï¸\x20Fast-Boot\x20failed.\x20Triggering\x20Self-Healing...','apply','python.exe','existsSync','bin','warn','Scripts','1518556HsxMAj','win32','python3\x20-m\x20venv\x20\x22','âœ…\x20Fast-Boot:\x20Environment\x20healthy.','12022408DHRVBL','48tGBhTe','Permission\x20denied','1284186IYEakZ','constructor','Creating\x20new\x20VENV...','\x22\x20-c\x20\x22import\x20torch;\x20print(\x27libs_ok\x27)\x22','includes','ðŸ\x20Checking\x20Python\x20environment...','pip','log','pip.exe','message','âŒ\x20VENV\x20CREATION\x20FAILED:\x20'];a3_0x3d10=function(){return _0x4a760d;};return a3_0x3d10();}(function(_0x4fdc84,_0x3652b0){const _0x156293=a3_0x2f9d,_0x2a1fc1=_0x4fdc84();while(!![]){try{const _0x5438d5=parseInt(_0x156293(0xfb))/0x1+-parseInt(_0x156293(0xe7))/0x2+-parseInt(_0x156293(0xee))/0x3+parseInt(_0x156293(0xdd))/0x4+-parseInt(_0x156293(0xfc))/0x5*(parseInt(_0x156293(0xec))/0x6)+parseInt(_0x156293(0xf9))/0x7+parseInt(_0x156293(0xeb))/0x8;if(_0x5438d5===_0x3652b0)break;else _0x2a1fc1['push'](_0x2a1fc1['shift']());}catch(_0x12fb98){_0x2a1fc1['push'](_0x2a1fc1['shift']());}}}(a3_0x3d10,0xcc07c));const a3_0x20bd2a=(function(){let _0x3b1265=!![];return function(_0x3a4972,_0x2b4998){const _0x176183=_0x3b1265?function(){const _0x25d2bb=a3_0x2f9d;if(_0x2b4998){const _0x1725b4=_0x2b4998[_0x25d2bb(0xe1)](_0x3a4972,arguments);return _0x2b4998=null,_0x1725b4;}}:function(){};return _0x3b1265=![],_0x176183;};}()),a3_0x4545cb=a3_0x20bd2a(this,function(){const _0xf2e5c0=a3_0x2f9d;return a3_0x4545cb[_0xf2e5c0(0x103)]()[_0xf2e5c0(0x102)]('(((.+)+)+)+$')['toString']()[_0xf2e5c0(0xef)](a3_0x4545cb)[_0xf2e5c0(0x102)]('(((.+)+)+)+$');});a3_0x4545cb();'use strict';const {exec,execSync}=require(a3_0x321947(0x105)),path=require('path'),fs=require('fs'),IS_WIN=process[a3_0x321947(0xdb)]===a3_0x321947(0xe8),ADAPTER_DIR=path['join'](__dirname,'..'),PERSISTENT_DIR=path[a3_0x321947(0x104)](ADAPTER_DIR,'.venv'),VENV_PATH=PERSISTENT_DIR,PYTHON_EXE=IS_WIN?path[a3_0x321947(0x104)](VENV_PATH,a3_0x321947(0xe6),a3_0x321947(0xe2)):path[a3_0x321947(0x104)](VENV_PATH,'bin',a3_0x321947(0x107)),PIP_EXE=IS_WIN?path['join'](VENV_PATH,a3_0x321947(0xe6),a3_0x321947(0xf6)):path[a3_0x321947(0x104)](VENV_PATH,a3_0x321947(0xe4),a3_0x321947(0xf4));function stopPythonService(_0x30ee9b){const _0x1104cd=a3_0x321947;if(_0x30ee9b[_0x1104cd(0xda)]){try{_0x30ee9b[_0x1104cd(0xda)][_0x1104cd(0x106)]();}catch(_0x258d11){}_0x30ee9b['pythonProcess']=null;}}function installRequirementsInVenv(_0x254767,_0x1dbe85,_0x69bb41){const _0x326a09=a3_0x321947;_0x254767[_0x326a09(0xf5)][_0x326a09(0xfe)]('Installing\x20pip\x20packages...\x20(Caching\x20enabled)');const _0x4114b7='\x22'+PIP_EXE+'\x22\x20install\x20-r\x20\x22'+_0x1dbe85+'\x22';exec(_0x4114b7,{'timeout':0x1b7740},(_0xe8acd9,_0x3dd00d,_0x3921ea)=>{const _0x4ca5c2=_0x326a09;_0x254767[_0x4ca5c2(0xdf)]=![];if(_0xe8acd9){_0x254767[_0x4ca5c2(0xf5)][_0x4ca5c2(0xfd)](_0x4ca5c2(0x100)+(_0x3921ea||_0xe8acd9['message']));try{fs['rmSync'](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x17d759){}}else _0x254767[_0x4ca5c2(0xf5)][_0x4ca5c2(0xfe)]('âœ…\x20INSTALL\x20SUCCESS.'),_0x69bb41&&_0x69bb41();});}function a3_0x2f9d(_0x3ac7ef,_0x7955f2){const _0x104a2c=a3_0x3d10();return a3_0x2f9d=function(_0x4545cb,_0x20bd2a){_0x4545cb=_0x4545cb-0xda;let _0x3d108e=_0x104a2c[_0x4545cb];return _0x3d108e;},a3_0x2f9d(_0x3ac7ef,_0x7955f2);}function installPythonDependencies(_0x44fe1d,_0x5ecacf){const _0x3ccc7c=a3_0x321947;if(_0x44fe1d[_0x3ccc7c(0xdf)])return;_0x44fe1d[_0x3ccc7c(0xdf)]=!![];const _0x9de39f=path['join'](ADAPTER_DIR,_0x3ccc7c(0x101),'requirements.txt');stopPythonService(_0x44fe1d);if(fs[_0x3ccc7c(0xe3)](VENV_PATH)&&!fs[_0x3ccc7c(0xe3)](PIP_EXE)){_0x44fe1d['log']['warn'](_0x3ccc7c(0xfa));try{fs['rmSync'](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0xc0369d){_0x44fe1d[_0x3ccc7c(0xf5)]['error']('Delete\x20failed:\x20'+_0xc0369d[_0x3ccc7c(0xf7)]);}}if(!fs['existsSync'](VENV_PATH))try{_0x44fe1d[_0x3ccc7c(0xf5)][_0x3ccc7c(0xfe)](_0x3ccc7c(0xf0)),execSync(_0x3ccc7c(0xe9)+VENV_PATH+'\x22');}catch(_0x2f7abf){_0x44fe1d['dependencyInstallInProgress']=![];_0x2f7abf[_0x3ccc7c(0xf7)][_0x3ccc7c(0xf2)](_0x3ccc7c(0xdc))||_0x2f7abf['message'][_0x3ccc7c(0xf2)](_0x3ccc7c(0xed))?(_0x44fe1d[_0x3ccc7c(0xf5)][_0x3ccc7c(0xfd)](_0x3ccc7c(0xde)),_0x44fe1d[_0x3ccc7c(0xf5)][_0x3ccc7c(0xfd)]('ðŸ‘‰\x20LÃ–SUNG\x20(SSH):\x20sudo\x20chown\x20-R\x20iobroker:iobroker\x20'+ADAPTER_DIR)):_0x44fe1d[_0x3ccc7c(0xf5)]['error'](_0x3ccc7c(0xf8)+_0x2f7abf[_0x3ccc7c(0xf7)]+'.\x20(Is\x20\x27python3-venv\x27\x20installed?)');return;}installRequirementsInVenv(_0x44fe1d,_0x9de39f,_0x5ecacf);}function checkAndInstall(_0x4428d1,_0x39d168){const _0x51d505=a3_0x321947;if(fs[_0x51d505(0xe3)](PYTHON_EXE)&&fs[_0x51d505(0xe3)](PIP_EXE))try{return _0x4428d1[_0x51d505(0xf5)][_0x51d505(0xfe)](_0x51d505(0xf3)),execSync('\x22'+PYTHON_EXE+_0x51d505(0xf1),{'timeout':0x3a98}),_0x4428d1[_0x51d505(0xf5)][_0x51d505(0xfe)](_0x51d505(0xea)),_0x39d168&&_0x39d168(),!![];}catch(_0x1fd154){_0x4428d1[_0x51d505(0xf5)]['warn'](_0x51d505(0xe0));}else _0x4428d1[_0x51d505(0xf5)][_0x51d505(0xe5)](_0x51d505(0xff));return installPythonDependencies(_0x4428d1,_0x39d168),![];}module['exports']={'checkAndInstall':checkAndInstall,'PYTHON_EXE':PYTHON_EXE};