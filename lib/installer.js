const a3_0x418f5a=a3_0x302a;(function(_0x36e58e,_0x27928b){const _0x1dbe9=a3_0x302a,_0x269d87=_0x36e58e();while(!![]){try{const _0x4383ee=-parseInt(_0x1dbe9(0x15f))/0x1+parseInt(_0x1dbe9(0x173))/0x2+-parseInt(_0x1dbe9(0x153))/0x3*(-parseInt(_0x1dbe9(0x177))/0x4)+-parseInt(_0x1dbe9(0x160))/0x5+parseInt(_0x1dbe9(0x149))/0x6*(parseInt(_0x1dbe9(0x152))/0x7)+-parseInt(_0x1dbe9(0x178))/0x8*(-parseInt(_0x1dbe9(0x172))/0x9)+-parseInt(_0x1dbe9(0x164))/0xa;if(_0x4383ee===_0x27928b)break;else _0x269d87['push'](_0x269d87['shift']());}catch(_0x6ab497){_0x269d87['push'](_0x269d87['shift']());}}}(a3_0x5cbf,0xde3ba));const a3_0x537ed2=(function(){let _0x33f3e1=!![];return function(_0x32bee4,_0x4dc99b){const _0x56b3ae=_0x33f3e1?function(){const _0x266292=a3_0x302a;if(_0x4dc99b){const _0xb8ba4d=_0x4dc99b[_0x266292(0x155)](_0x32bee4,arguments);return _0x4dc99b=null,_0xb8ba4d;}}:function(){};return _0x33f3e1=![],_0x56b3ae;};}()),a3_0x1078f1=a3_0x537ed2(this,function(){const _0xe5a1b3=a3_0x302a;return a3_0x1078f1['toString']()[_0xe5a1b3(0x158)]('(((.+)+)+)+$')[_0xe5a1b3(0x165)]()[_0xe5a1b3(0x14c)](a3_0x1078f1)['search'](_0xe5a1b3(0x150));});a3_0x1078f1();'use strict';function a3_0x302a(_0x4508c9,_0xbf1147){const _0x2aee8c=a3_0x5cbf();return a3_0x302a=function(_0x1078f1,_0x537ed2){_0x1078f1=_0x1078f1-0x149;let _0x5cbfb3=_0x2aee8c[_0x1078f1];return _0x5cbfb3;},a3_0x302a(_0x4508c9,_0xbf1147);}const {exec,execSync}=require(a3_0x418f5a(0x15d)),path=require(a3_0x418f5a(0x159)),fs=require('fs'),IS_WIN=process[a3_0x418f5a(0x179)]===a3_0x418f5a(0x157),ADAPTER_DIR=path[a3_0x418f5a(0x171)](__dirname,'..'),PERSISTENT_DIR=path[a3_0x418f5a(0x171)](ADAPTER_DIR,'.venv'),VENV_PATH=PERSISTENT_DIR,PYTHON_EXE=IS_WIN?path[a3_0x418f5a(0x171)](VENV_PATH,a3_0x418f5a(0x14a),a3_0x418f5a(0x162)):path[a3_0x418f5a(0x171)](VENV_PATH,a3_0x418f5a(0x168),a3_0x418f5a(0x170)),PIP_EXE=IS_WIN?path['join'](VENV_PATH,'Scripts',a3_0x418f5a(0x16d)):path[a3_0x418f5a(0x171)](VENV_PATH,a3_0x418f5a(0x168),a3_0x418f5a(0x14d));function stopPythonService(_0x3fab2b){const _0x4d450e=a3_0x418f5a;if(_0x3fab2b[_0x4d450e(0x176)]){try{_0x3fab2b['pythonProcess']['kill']();}catch(_0x5ee62b){}_0x3fab2b[_0x4d450e(0x176)]=null;}}function installRequirementsInVenv(_0x4fc84e,_0x36f1e3,_0x44e90e){const _0x1e8da9=a3_0x418f5a;_0x4fc84e[_0x1e8da9(0x166)][_0x1e8da9(0x14b)](_0x1e8da9(0x17a));const _0x5b617d='\x22'+PIP_EXE+_0x1e8da9(0x16c)+_0x36f1e3+'\x22';exec(_0x5b617d,{'timeout':0x1b7740},(_0x487a9c,_0x1b3ddc,_0x230669)=>{const _0x404b50=_0x1e8da9;_0x4fc84e['dependencyInstallInProgress']=![];if(_0x487a9c){_0x4fc84e[_0x404b50(0x166)]['error'](_0x404b50(0x175)+(_0x230669||_0x487a9c[_0x404b50(0x161)]));try{fs[_0x404b50(0x163)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x41ef1f){}}else _0x4fc84e[_0x404b50(0x166)][_0x404b50(0x14b)]('‚úÖ\x20INSTALL\x20SUCCESS.'),_0x44e90e&&_0x44e90e();});}function installPythonDependencies(_0x5634f9,_0x45acff){const _0x8a4641=a3_0x418f5a;if(_0x5634f9[_0x8a4641(0x17c)])return;_0x5634f9[_0x8a4641(0x17c)]=!![];const _0x14ac72=path[_0x8a4641(0x171)](ADAPTER_DIR,'python_service',_0x8a4641(0x16a));stopPythonService(_0x5634f9);if(fs[_0x8a4641(0x16b)](VENV_PATH)&&!fs[_0x8a4641(0x16b)](PIP_EXE)){_0x5634f9[_0x8a4641(0x166)]['warn'](_0x8a4641(0x16f));try{fs[_0x8a4641(0x163)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x2ef2e5){_0x5634f9['log']['error'](_0x8a4641(0x15a)+_0x2ef2e5[_0x8a4641(0x161)]);}}if(!fs['existsSync'](VENV_PATH))try{_0x5634f9[_0x8a4641(0x166)]['info'](_0x8a4641(0x156)),execSync(_0x8a4641(0x14f)+VENV_PATH+'\x22');}catch(_0x41aff6){_0x5634f9['dependencyInstallInProgress']=![];_0x41aff6[_0x8a4641(0x161)][_0x8a4641(0x15b)]('EACCES')||_0x41aff6[_0x8a4641(0x161)]['includes']('Permission\x20denied')?(_0x5634f9[_0x8a4641(0x166)][_0x8a4641(0x17b)]('üõë\x20PERMISSION\x20ERROR:\x20Der\x20Adapter\x20darf\x20das\x20VENV\x20nicht\x20anlegen.'),_0x5634f9[_0x8a4641(0x166)][_0x8a4641(0x17b)](_0x8a4641(0x15c)+ADAPTER_DIR)):_0x5634f9['log'][_0x8a4641(0x17b)](_0x8a4641(0x167)+_0x41aff6[_0x8a4641(0x161)]+_0x8a4641(0x14e));return;}installRequirementsInVenv(_0x5634f9,_0x14ac72,_0x45acff);}function checkAndInstall(_0x2f279b,_0x464a46){const _0x194ba1=a3_0x418f5a;if(fs[_0x194ba1(0x16b)](PYTHON_EXE)&&fs[_0x194ba1(0x16b)](PIP_EXE))try{return _0x2f279b[_0x194ba1(0x166)][_0x194ba1(0x14b)](_0x194ba1(0x174)),execSync('\x22'+PYTHON_EXE+_0x194ba1(0x151),{'timeout':0x3a98}),_0x2f279b['log']['info'](_0x194ba1(0x169)),_0x464a46&&_0x464a46(),!![];}catch(_0x1b30e0){_0x2f279b[_0x194ba1(0x166)]['warn'](_0x194ba1(0x16e));}else _0x2f279b[_0x194ba1(0x166)][_0x194ba1(0x15e)](_0x194ba1(0x154));return installPythonDependencies(_0x2f279b,_0x464a46),![];}function a3_0x5cbf(){const _0x4eaa9f=['search','path','Delete\x20failed:\x20','includes','üëâ\x20L√ñSUNG\x20(SSH):\x20sudo\x20chown\x20-R\x20iobroker:iobroker\x20','child_process','warn','52975poSMgY','8297850FgRgwT','message','python.exe','rmSync','2727100fEYPKG','toString','log','‚ùå\x20VENV\x20CREATION\x20FAILED:\x20','bin','‚úÖ\x20Fast-Boot:\x20Environment\x20healthy.','requirements.txt','existsSync','\x22\x20install\x20-r\x20\x22','pip.exe','‚ö†Ô∏è\x20Fast-Boot\x20failed.\x20Triggering\x20Self-Healing...','‚ôªÔ∏è\x20Found\x20broken\x20VENV\x20(no\x20pip).\x20Deleting\x20and\x20recreating...','python','join','9XKQKpR','299628UAOJoE','üêç\x20Checking\x20Python\x20environment...','‚ùå\x20INSTALL\x20FAILED:\x20','pythonProcess','6246204gMNXjt','7465944lsyAro','platform','Installing\x20pip\x20packages...\x20(Caching\x20enabled)','error','dependencyInstallInProgress','115806cFSVRp','Scripts','info','constructor','pip','.\x20(Is\x20\x27python3-venv\x27\x20installed?)','python3\x20-m\x20venv\x20\x22','(((.+)+)+)+$','\x22\x20-c\x20\x22import\x20torch;\x20print(\x27libs_ok\x27)\x22','91qKCozp','3CUTuwx','‚ö†Ô∏è\x20Python\x20VENV\x20or\x20PIP\x20missing.\x20Installing...','apply','Creating\x20new\x20VENV...','win32'];a3_0x5cbf=function(){return _0x4eaa9f;};return a3_0x5cbf();}module['exports']={'checkAndInstall':checkAndInstall,'PYTHON_EXE':PYTHON_EXE};