const a3_0x46db56=a3_0xb7e8;(function(_0x28c696,_0x219a2e){const _0x55b308=a3_0xb7e8,_0x4731bc=_0x28c696();while(!![]){try{const _0x53b298=parseInt(_0x55b308(0x17a))/0x1+-parseInt(_0x55b308(0x1a3))/0x2*(-parseInt(_0x55b308(0x186))/0x3)+-parseInt(_0x55b308(0x199))/0x4*(parseInt(_0x55b308(0x17e))/0x5)+-parseInt(_0x55b308(0x180))/0x6+parseInt(_0x55b308(0x18c))/0x7+parseInt(_0x55b308(0x196))/0x8*(parseInt(_0x55b308(0x17f))/0x9)+-parseInt(_0x55b308(0x181))/0xa;if(_0x53b298===_0x219a2e)break;else _0x4731bc['push'](_0x4731bc['shift']());}catch(_0x1cecf8){_0x4731bc['push'](_0x4731bc['shift']());}}}(a3_0xcece,0xe85e4));const a3_0x3b5303=(function(){let _0x30486c=!![];return function(_0x3a86b0,_0x3716d6){const _0x55d704=_0x30486c?function(){const _0x3fff6a=a3_0xb7e8;if(_0x3716d6){const _0x94aa85=_0x3716d6[_0x3fff6a(0x18a)](_0x3a86b0,arguments);return _0x3716d6=null,_0x94aa85;}}:function(){};return _0x30486c=![],_0x55d704;};}()),a3_0x3926e8=a3_0x3b5303(this,function(){const _0x5b7aac=a3_0xb7e8;return a3_0x3926e8[_0x5b7aac(0x176)]()[_0x5b7aac(0x179)](_0x5b7aac(0x171))[_0x5b7aac(0x176)]()[_0x5b7aac(0x178)](a3_0x3926e8)[_0x5b7aac(0x179)](_0x5b7aac(0x171));});a3_0x3926e8();'use strict';const {exec,execSync}=require(a3_0x46db56(0x191)),path=require(a3_0x46db56(0x17c)),fs=require('fs'),IS_WIN=process[a3_0x46db56(0x194)]===a3_0x46db56(0x17b),ADAPTER_DIR=path[a3_0x46db56(0x184)](__dirname,'..'),PERSISTENT_DIR=path['join'](ADAPTER_DIR,a3_0x46db56(0x18e)),VENV_PATH=PERSISTENT_DIR,PYTHON_EXE=IS_WIN?path[a3_0x46db56(0x184)](VENV_PATH,a3_0x46db56(0x19c),'python.exe'):path[a3_0x46db56(0x184)](VENV_PATH,'bin',a3_0x46db56(0x1a0)),PIP_EXE=IS_WIN?path['join'](VENV_PATH,a3_0x46db56(0x19c),a3_0x46db56(0x19a)):path[a3_0x46db56(0x184)](VENV_PATH,a3_0x46db56(0x18d),a3_0x46db56(0x190));function stopPythonService(_0x474f53){const _0x2e491c=a3_0x46db56;if(_0x474f53['pythonProcess']){try{_0x474f53[_0x2e491c(0x177)][_0x2e491c(0x188)]();}catch(_0x55f2d0){}_0x474f53[_0x2e491c(0x177)]=null;}}function installRequirementsInVenv(_0x20d428,_0x475db4,_0xde129b){const _0x2deef7=a3_0x46db56;_0x20d428[_0x2deef7(0x182)]['info'](_0x2deef7(0x1a1));const _0x2a2f1d='\x22'+PIP_EXE+_0x2deef7(0x175)+_0x475db4+'\x22';exec(_0x2a2f1d,{'timeout':0x1b7740},(_0x41ade1,_0x59a9f2,_0x119d88)=>{const _0x5a168e=_0x2deef7;_0x20d428[_0x5a168e(0x174)]=![];if(_0x41ade1){_0x20d428[_0x5a168e(0x182)][_0x5a168e(0x16f)](_0x5a168e(0x18f)+(_0x119d88||_0x41ade1[_0x5a168e(0x183)]));try{fs['rmSync'](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x3ecbf8){}}else _0x20d428[_0x5a168e(0x182)][_0x5a168e(0x19b)](_0x5a168e(0x198)),_0xde129b&&_0xde129b();});}function installPythonDependencies(_0x425d64,_0x21924e){const _0x235187=a3_0x46db56;if(_0x425d64[_0x235187(0x174)])return;_0x425d64[_0x235187(0x174)]=!![];const _0x5c91ca=path[_0x235187(0x184)](ADAPTER_DIR,_0x235187(0x185),'requirements.txt');stopPythonService(_0x425d64);if(fs[_0x235187(0x19d)](VENV_PATH)&&!fs['existsSync'](PIP_EXE)){_0x425d64[_0x235187(0x182)][_0x235187(0x1a2)](_0x235187(0x195));try{fs['rmSync'](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x134b9e){_0x425d64['log']['error'](_0x235187(0x18b)+_0x134b9e['message']);}}if(!fs[_0x235187(0x19d)](VENV_PATH))try{_0x425d64['log'][_0x235187(0x19b)](_0x235187(0x192)),execSync(_0x235187(0x172)+VENV_PATH+'\x22');}catch(_0x3d19c2){_0x425d64[_0x235187(0x174)]=![];_0x3d19c2['message'][_0x235187(0x197)]('EACCES')||_0x3d19c2[_0x235187(0x183)]['includes'](_0x235187(0x170))?(_0x425d64['log'][_0x235187(0x16f)](_0x235187(0x173)),_0x425d64[_0x235187(0x182)][_0x235187(0x16f)](_0x235187(0x189)+ADAPTER_DIR)):_0x425d64[_0x235187(0x182)][_0x235187(0x16f)](_0x235187(0x17d)+_0x3d19c2[_0x235187(0x183)]+'.\x20(Is\x20\x27python3-venv\x27\x20installed?)');return;}installRequirementsInVenv(_0x425d64,_0x5c91ca,_0x21924e);}function a3_0xb7e8(_0xebf253,_0x16188f){const _0x41754a=a3_0xcece();return a3_0xb7e8=function(_0x3926e8,_0x3b5303){_0x3926e8=_0x3926e8-0x16f;let _0xceceb3=_0x41754a[_0x3926e8];return _0xceceb3;},a3_0xb7e8(_0xebf253,_0x16188f);}function checkAndInstall(_0x409b67,_0x44d51b){const _0x24cb6e=a3_0x46db56;if(fs[_0x24cb6e(0x19d)](PYTHON_EXE)&&fs[_0x24cb6e(0x19d)](PIP_EXE))try{return _0x409b67[_0x24cb6e(0x182)][_0x24cb6e(0x19b)](_0x24cb6e(0x187)),execSync('\x22'+PYTHON_EXE+'\x22\x20-c\x20\x22import\x20torch;\x20print(\x27libs_ok\x27)\x22',{'timeout':0x3a98}),_0x409b67[_0x24cb6e(0x182)][_0x24cb6e(0x19b)](_0x24cb6e(0x193)),_0x44d51b&&_0x44d51b(),!![];}catch(_0x25b15e){_0x409b67[_0x24cb6e(0x182)][_0x24cb6e(0x1a2)](_0x24cb6e(0x19e));}else _0x409b67[_0x24cb6e(0x182)][_0x24cb6e(0x1a2)](_0x24cb6e(0x19f));return installPythonDependencies(_0x409b67,_0x44d51b),![];}function a3_0xcece(){const _0x5b8140=['‚ö†Ô∏è\x20Fast-Boot\x20failed.\x20Triggering\x20Self-Healing...','‚ö†Ô∏è\x20Python\x20VENV\x20or\x20PIP\x20missing.\x20Installing...','python','Installing\x20pip\x20packages...\x20(Caching\x20enabled)','warn','88418mXYOgN','error','Permission\x20denied','(((.+)+)+)+$','python3\x20-m\x20venv\x20\x22','üõë\x20PERMISSION\x20ERROR:\x20Der\x20Adapter\x20darf\x20das\x20VENV\x20nicht\x20anlegen.','dependencyInstallInProgress','\x22\x20install\x20-r\x20\x22','toString','pythonProcess','constructor','search','1549835sUorLb','win32','path','‚ùå\x20VENV\x20CREATION\x20FAILED:\x20','13780NKgAiT','6876ZfQYca','3300840LBBuwA','20057040hlXwjT','log','message','join','python_service','18sqvTLD','üêç\x20Checking\x20Python\x20environment...','kill','üëâ\x20L√ñSUNG\x20(SSH):\x20sudo\x20chown\x20-R\x20iobroker:iobroker\x20','apply','Delete\x20failed:\x20','8106497KsQKKe','bin','.venv','‚ùå\x20INSTALL\x20FAILED:\x20','pip','child_process','Creating\x20new\x20VENV...','‚úÖ\x20Fast-Boot:\x20Environment\x20healthy.','platform','‚ôªÔ∏è\x20Found\x20broken\x20VENV\x20(no\x20pip).\x20Deleting\x20and\x20recreating...','18352zhGPxD','includes','‚úÖ\x20INSTALL\x20SUCCESS.','1768aDbNcC','pip.exe','info','Scripts','existsSync'];a3_0xcece=function(){return _0x5b8140;};return a3_0xcece();}module['exports']={'checkAndInstall':checkAndInstall,'PYTHON_EXE':PYTHON_EXE};