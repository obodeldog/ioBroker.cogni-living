const a3_0x12c209=a3_0x1443;(function(_0x53e451,_0x20dbfc){const _0x50e214=a3_0x1443,_0x520cb6=_0x53e451();while(!![]){try{const _0x56ab57=-parseInt(_0x50e214(0x215))/0x1*(-parseInt(_0x50e214(0x1e9))/0x2)+-parseInt(_0x50e214(0x1eb))/0x3*(-parseInt(_0x50e214(0x201))/0x4)+-parseInt(_0x50e214(0x212))/0x5*(-parseInt(_0x50e214(0x1e6))/0x6)+-parseInt(_0x50e214(0x216))/0x7*(-parseInt(_0x50e214(0x1f7))/0x8)+-parseInt(_0x50e214(0x20b))/0x9*(-parseInt(_0x50e214(0x1ef))/0xa)+-parseInt(_0x50e214(0x20f))/0xb+-parseInt(_0x50e214(0x211))/0xc;if(_0x56ab57===_0x20dbfc)break;else _0x520cb6['push'](_0x520cb6['shift']());}catch(_0x2310a6){_0x520cb6['push'](_0x520cb6['shift']());}}}(a3_0x1376,0x7bcf4));const a3_0x2a7491=(function(){let _0x57f25a=!![];return function(_0x2d29e5,_0x5e0dec){const _0x11abcc=_0x57f25a?function(){const _0x15b585=a3_0x1443;if(_0x5e0dec){const _0x399dc9=_0x5e0dec[_0x15b585(0x1ee)](_0x2d29e5,arguments);return _0x5e0dec=null,_0x399dc9;}}:function(){};return _0x57f25a=![],_0x11abcc;};}()),a3_0x3166e7=a3_0x2a7491(this,function(){const _0x4dea50=a3_0x1443;return a3_0x3166e7[_0x4dea50(0x203)]()[_0x4dea50(0x1f9)](_0x4dea50(0x1f3))[_0x4dea50(0x203)]()[_0x4dea50(0x1f6)](a3_0x3166e7)[_0x4dea50(0x1f9)](_0x4dea50(0x1f3));});a3_0x3166e7();'use strict';const {exec,execSync}=require(a3_0x12c209(0x205)),path=require('path'),fs=require('fs'),IS_WIN=process[a3_0x12c209(0x1ec)]==='win32',ADAPTER_DIR=path[a3_0x12c209(0x1e8)](__dirname,'..'),PERSISTENT_DIR=path[a3_0x12c209(0x1e8)](ADAPTER_DIR,a3_0x12c209(0x20e)),VENV_PATH=PERSISTENT_DIR,PYTHON_EXE=IS_WIN?path[a3_0x12c209(0x1e8)](VENV_PATH,a3_0x12c209(0x1fe),'python.exe'):path[a3_0x12c209(0x1e8)](VENV_PATH,a3_0x12c209(0x207),a3_0x12c209(0x1f1)),PIP_EXE=IS_WIN?path[a3_0x12c209(0x1e8)](VENV_PATH,'Scripts',a3_0x12c209(0x1ea)):path['join'](VENV_PATH,a3_0x12c209(0x207),'pip');function stopPythonService(_0x3ccd9c){const _0x236e67=a3_0x12c209;if(_0x3ccd9c[_0x236e67(0x206)]){try{_0x3ccd9c[_0x236e67(0x206)][_0x236e67(0x202)]();}catch(_0x2dfe15){}_0x3ccd9c[_0x236e67(0x206)]=null;}}function a3_0x1376(){const _0x1581e6=['message','child_process','pythonProcess','bin','python_service','includes','üõë\x20PERMISSION\x20ERROR:\x20Der\x20Adapter\x20darf\x20das\x20VENV\x20nicht\x20anlegen.','47682oXjAKg','‚ö†Ô∏è\x20Fast-Boot\x20failed.\x20Triggering\x20Self-Healing...','log','.venv','5165083GRSAoG','‚ùå\x20INSTALL\x20FAILED:\x20','11244756DCMSFO','164965UlYvQQ','üëâ\x20L√ñSUNG\x20(SSH):\x20sudo\x20chown\x20-R\x20iobroker:iobroker\x20','‚úÖ\x20INSTALL\x20SUCCESS.','2NNhJAM','1480493FmabnV','Delete\x20failed:\x20','.\x20(Is\x20\x27python3-venv\x27\x20installed?)','‚ö†Ô∏è\x20Python\x20VENV\x20or\x20PIP\x20missing.\x20Installing...','12unsrOH','existsSync','join','928514EZuMTT','pip.exe','15bEeHYu','platform','‚úÖ\x20Fast-Boot:\x20Environment\x20healthy.','apply','1220dnvfNa','Permission\x20denied','python','info','(((.+)+)+)+$','rmSync','EACCES','constructor','8fFTPCr','error','search','warn','dependencyInstallInProgress','\x22\x20install\x20-r\x20\x22','python3\x20-m\x20venv\x20\x22','Scripts','Creating\x20new\x20VENV...','üêç\x20Checking\x20Python\x20environment...','49108RwTojZ','kill','toString'];a3_0x1376=function(){return _0x1581e6;};return a3_0x1376();}function installRequirementsInVenv(_0x2582b3,_0x4e9f54,_0x29e35a){const _0x34954d=a3_0x12c209;_0x2582b3['log']['info']('Installing\x20pip\x20packages...\x20(Caching\x20enabled)');const _0x28badd='\x22'+PIP_EXE+_0x34954d(0x1fc)+_0x4e9f54+'\x22';exec(_0x28badd,{'timeout':0x1b7740},(_0x8fdbdf,_0x52b943,_0x262953)=>{const _0x40925c=_0x34954d;_0x2582b3[_0x40925c(0x1fb)]=![];if(_0x8fdbdf){_0x2582b3['log']['error'](_0x40925c(0x210)+(_0x262953||_0x8fdbdf[_0x40925c(0x204)]));try{fs['rmSync'](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x156297){}}else _0x2582b3[_0x40925c(0x20d)][_0x40925c(0x1f2)](_0x40925c(0x214)),_0x29e35a&&_0x29e35a();});}function installPythonDependencies(_0x43309b,_0x364d0b){const _0x2a0add=a3_0x12c209;if(_0x43309b[_0x2a0add(0x1fb)])return;_0x43309b['dependencyInstallInProgress']=!![];const _0x36ec92=path['join'](ADAPTER_DIR,_0x2a0add(0x208),'requirements.txt');stopPythonService(_0x43309b);if(fs[_0x2a0add(0x1e7)](VENV_PATH)&&!fs[_0x2a0add(0x1e7)](PIP_EXE)){_0x43309b[_0x2a0add(0x20d)][_0x2a0add(0x1fa)]('‚ôªÔ∏è\x20Found\x20broken\x20VENV\x20(no\x20pip).\x20Deleting\x20and\x20recreating...');try{fs[_0x2a0add(0x1f4)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x100c64){_0x43309b[_0x2a0add(0x20d)]['error'](_0x2a0add(0x217)+_0x100c64[_0x2a0add(0x204)]);}}if(!fs[_0x2a0add(0x1e7)](VENV_PATH))try{_0x43309b[_0x2a0add(0x20d)][_0x2a0add(0x1f2)](_0x2a0add(0x1ff)),execSync(_0x2a0add(0x1fd)+VENV_PATH+'\x22');}catch(_0x348683){_0x43309b[_0x2a0add(0x1fb)]=![];_0x348683[_0x2a0add(0x204)][_0x2a0add(0x209)](_0x2a0add(0x1f5))||_0x348683[_0x2a0add(0x204)][_0x2a0add(0x209)](_0x2a0add(0x1f0))?(_0x43309b[_0x2a0add(0x20d)]['error'](_0x2a0add(0x20a)),_0x43309b[_0x2a0add(0x20d)][_0x2a0add(0x1f8)](_0x2a0add(0x213)+ADAPTER_DIR)):_0x43309b[_0x2a0add(0x20d)]['error']('‚ùå\x20VENV\x20CREATION\x20FAILED:\x20'+_0x348683[_0x2a0add(0x204)]+_0x2a0add(0x218));return;}installRequirementsInVenv(_0x43309b,_0x36ec92,_0x364d0b);}function checkAndInstall(_0x1cbe4a,_0x5cbe7f){const _0x29fab5=a3_0x12c209;if(fs[_0x29fab5(0x1e7)](PYTHON_EXE)&&fs[_0x29fab5(0x1e7)](PIP_EXE))try{return _0x1cbe4a[_0x29fab5(0x20d)][_0x29fab5(0x1f2)](_0x29fab5(0x200)),execSync('\x22'+PYTHON_EXE+'\x22\x20-c\x20\x22import\x20torch;\x20print(\x27libs_ok\x27)\x22',{'timeout':0x3a98}),_0x1cbe4a[_0x29fab5(0x20d)]['info'](_0x29fab5(0x1ed)),_0x5cbe7f&&_0x5cbe7f(),!![];}catch(_0x558bc1){_0x1cbe4a[_0x29fab5(0x20d)][_0x29fab5(0x1fa)](_0x29fab5(0x20c));}else _0x1cbe4a[_0x29fab5(0x20d)][_0x29fab5(0x1fa)](_0x29fab5(0x1e5));return installPythonDependencies(_0x1cbe4a,_0x5cbe7f),![];}function a3_0x1443(_0x24e936,_0x40f4aa){const _0x2bbbb3=a3_0x1376();return a3_0x1443=function(_0x3166e7,_0x2a7491){_0x3166e7=_0x3166e7-0x1e5;let _0x1376a3=_0x2bbbb3[_0x3166e7];return _0x1376a3;},a3_0x1443(_0x24e936,_0x40f4aa);}module['exports']={'checkAndInstall':checkAndInstall,'PYTHON_EXE':PYTHON_EXE};