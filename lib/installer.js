const a3_0xd71ba3=a3_0x3f3b;function a3_0x3f3b(_0x2fe973,_0x480571){const _0x59cd7a=a3_0x3ffa();return a3_0x3f3b=function(_0x2a28f9,_0x36a306){_0x2a28f9=_0x2a28f9-0x8a;let _0x3ffab6=_0x59cd7a[_0x2a28f9];return _0x3ffab6;},a3_0x3f3b(_0x2fe973,_0x480571);}(function(_0x381bb1,_0x5a10a7){const _0x7a537b=a3_0x3f3b,_0x44ea3e=_0x381bb1();while(!![]){try{const _0x2e7d01=parseInt(_0x7a537b(0xa9))/0x1*(-parseInt(_0x7a537b(0x9e))/0x2)+parseInt(_0x7a537b(0xa7))/0x3+-parseInt(_0x7a537b(0x92))/0x4+-parseInt(_0x7a537b(0xbb))/0x5+-parseInt(_0x7a537b(0xbd))/0x6+parseInt(_0x7a537b(0x98))/0x7+-parseInt(_0x7a537b(0xa2))/0x8*(-parseInt(_0x7a537b(0xb2))/0x9);if(_0x2e7d01===_0x5a10a7)break;else _0x44ea3e['push'](_0x44ea3e['shift']());}catch(_0x17b874){_0x44ea3e['push'](_0x44ea3e['shift']());}}}(a3_0x3ffa,0x7da62));const a3_0x36a306=(function(){let _0x4e90a0=!![];return function(_0xe327e,_0x36e9ae){const _0x24d4ea=_0x4e90a0?function(){const _0xa12c1e=a3_0x3f3b;if(_0x36e9ae){const _0x42678c=_0x36e9ae[_0xa12c1e(0xb3)](_0xe327e,arguments);return _0x36e9ae=null,_0x42678c;}}:function(){};return _0x4e90a0=![],_0x24d4ea;};}()),a3_0x2a28f9=a3_0x36a306(this,function(){const _0x3b0f20=a3_0x3f3b;return a3_0x2a28f9[_0x3b0f20(0xb7)]()['search'](_0x3b0f20(0xb1))['toString']()[_0x3b0f20(0x9a)](a3_0x2a28f9)[_0x3b0f20(0xbe)]('(((.+)+)+)+$');});a3_0x2a28f9();'use strict';const {exec,execSync}=require(a3_0xd71ba3(0x8a)),path=require(a3_0xd71ba3(0x96)),fs=require('fs'),IS_WIN=process[a3_0xd71ba3(0x9c)]===a3_0xd71ba3(0x94),ADAPTER_DIR=path[a3_0xd71ba3(0x90)](__dirname,'..'),PERSISTENT_DIR=path[a3_0xd71ba3(0x90)](ADAPTER_DIR,a3_0xd71ba3(0xba)),VENV_PATH=PERSISTENT_DIR,PYTHON_EXE=IS_WIN?path[a3_0xd71ba3(0x90)](VENV_PATH,a3_0xd71ba3(0xb6),'python.exe'):path[a3_0xd71ba3(0x90)](VENV_PATH,a3_0xd71ba3(0x97),a3_0xd71ba3(0xac)),PIP_EXE=IS_WIN?path[a3_0xd71ba3(0x90)](VENV_PATH,a3_0xd71ba3(0xb6),a3_0xd71ba3(0xa1)):path[a3_0xd71ba3(0x90)](VENV_PATH,a3_0xd71ba3(0x97),a3_0xd71ba3(0xbc));function stopPythonService(_0x2749e8){const _0x35fc54=a3_0xd71ba3;if(_0x2749e8['pythonProcess']){try{_0x2749e8['pythonProcess'][_0x35fc54(0x8c)]();}catch(_0xa5af33){}_0x2749e8[_0x35fc54(0xa4)]=null;}}function installRequirementsInVenv(_0x47a5d5,_0x57b16e,_0x453021){const _0x27ed57=a3_0xd71ba3;_0x47a5d5[_0x27ed57(0x9b)][_0x27ed57(0xa0)](_0x27ed57(0xb5));const _0x1a5c10='\x22'+PIP_EXE+_0x27ed57(0xb0)+_0x57b16e+'\x22';exec(_0x1a5c10,{'timeout':0x1b7740},(_0xdcb535,_0x25a18f,_0x2d7b3f)=>{const _0x1f382d=_0x27ed57;_0x47a5d5['dependencyInstallInProgress']=![];if(_0xdcb535){_0x47a5d5[_0x1f382d(0x9b)][_0x1f382d(0xa8)](_0x1f382d(0xb4)+(_0x2d7b3f||_0xdcb535['message']));try{fs[_0x1f382d(0xaa)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x2a4b2b){}}else _0x47a5d5[_0x1f382d(0x9b)]['info'](_0x1f382d(0x93)),_0x453021&&_0x453021();});}function installPythonDependencies(_0x4d71af,_0x3b5791){const _0x3ae708=a3_0xd71ba3;if(_0x4d71af['dependencyInstallInProgress'])return;_0x4d71af['dependencyInstallInProgress']=!![];const _0x454439=path[_0x3ae708(0x90)](ADAPTER_DIR,'python_service',_0x3ae708(0xa5));stopPythonService(_0x4d71af);if(fs[_0x3ae708(0xab)](VENV_PATH)&&!fs['existsSync'](PIP_EXE)){_0x4d71af[_0x3ae708(0x9b)][_0x3ae708(0x8e)](_0x3ae708(0x91));try{fs[_0x3ae708(0xaa)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x1f7e2a){_0x4d71af['log'][_0x3ae708(0xa8)]('Delete\x20failed:\x20'+_0x1f7e2a['message']);}}if(!fs[_0x3ae708(0xab)](VENV_PATH))try{_0x4d71af['log'][_0x3ae708(0xa0)](_0x3ae708(0x8f)),execSync(_0x3ae708(0x9f)+VENV_PATH+'\x22');}catch(_0x38ea98){_0x4d71af[_0x3ae708(0xb8)]=![];_0x38ea98[_0x3ae708(0x9d)][_0x3ae708(0xad)](_0x3ae708(0x99))||_0x38ea98[_0x3ae708(0x9d)][_0x3ae708(0xad)](_0x3ae708(0xb9))?(_0x4d71af[_0x3ae708(0x9b)][_0x3ae708(0xa8)](_0x3ae708(0x8b)),_0x4d71af[_0x3ae708(0x9b)][_0x3ae708(0xa8)]('üëâ\x20L√ñSUNG\x20(SSH):\x20sudo\x20chown\x20-R\x20iobroker:iobroker\x20'+ADAPTER_DIR)):_0x4d71af[_0x3ae708(0x9b)][_0x3ae708(0xa8)](_0x3ae708(0xa3)+_0x38ea98[_0x3ae708(0x9d)]+_0x3ae708(0xaf));return;}installRequirementsInVenv(_0x4d71af,_0x454439,_0x3b5791);}function checkAndInstall(_0x1838a3,_0x1c2e72){const _0x37645c=a3_0xd71ba3;if(fs['existsSync'](PYTHON_EXE)&&fs[_0x37645c(0xab)](PIP_EXE))try{return _0x1838a3[_0x37645c(0x9b)]['info']('üêç\x20Checking\x20Python\x20environment...'),execSync('\x22'+PYTHON_EXE+_0x37645c(0xae),{'timeout':0x3a98}),_0x1838a3[_0x37645c(0x9b)][_0x37645c(0xa0)](_0x37645c(0xa6)),_0x1c2e72&&_0x1c2e72(),!![];}catch(_0x3fd8a6){_0x1838a3[_0x37645c(0x9b)][_0x37645c(0x8e)](_0x37645c(0x8d));}else _0x1838a3['log'][_0x37645c(0x8e)](_0x37645c(0x95));return installPythonDependencies(_0x1838a3,_0x1c2e72),![];}function a3_0x3ffa(){const _0xab5769=['‚ùå\x20VENV\x20CREATION\x20FAILED:\x20','pythonProcess','requirements.txt','‚úÖ\x20Fast-Boot:\x20Environment\x20healthy.','1680264wDhDvc','error','51747iGfTID','rmSync','existsSync','python','includes','\x22\x20-c\x20\x22import\x20torch;\x20print(\x27libs_ok\x27)\x22','.\x20(Is\x20\x27python3-venv\x27\x20installed?)','\x22\x20install\x20-r\x20\x22','(((.+)+)+)+$','15948ujLpzL','apply','‚ùå\x20INSTALL\x20FAILED:\x20','Installing\x20pip\x20packages...\x20(Caching\x20enabled)','Scripts','toString','dependencyInstallInProgress','Permission\x20denied','.venv','3013815OsLilV','pip','2175084pXpQxK','search','child_process','üõë\x20PERMISSION\x20ERROR:\x20Der\x20Adapter\x20darf\x20das\x20VENV\x20nicht\x20anlegen.','kill','‚ö†Ô∏è\x20Fast-Boot\x20failed.\x20Triggering\x20Self-Healing...','warn','Creating\x20new\x20VENV...','join','‚ôªÔ∏è\x20Found\x20broken\x20VENV\x20(no\x20pip).\x20Deleting\x20and\x20recreating...','1787088DnaWlm','‚úÖ\x20INSTALL\x20SUCCESS.','win32','‚ö†Ô∏è\x20Python\x20VENV\x20or\x20PIP\x20missing.\x20Installing...','path','bin','7200165lIGNvC','EACCES','constructor','log','platform','message','32xPERtr','python3\x20-m\x20venv\x20\x22','info','pip.exe','5264PCbVZW'];a3_0x3ffa=function(){return _0xab5769;};return a3_0x3ffa();}module['exports']={'checkAndInstall':checkAndInstall,'PYTHON_EXE':PYTHON_EXE};