const a3_0x43b658=a3_0x5c04;(function(_0x3b37b9,_0x3591b9){const _0x181d37=a3_0x5c04,_0xf04066=_0x3b37b9();while(!![]){try{const _0x4d2e98=-parseInt(_0x181d37(0x173))/0x1*(parseInt(_0x181d37(0x199))/0x2)+parseInt(_0x181d37(0x190))/0x3*(-parseInt(_0x181d37(0x18c))/0x4)+-parseInt(_0x181d37(0x197))/0x5*(parseInt(_0x181d37(0x19e))/0x6)+parseInt(_0x181d37(0x171))/0x7+parseInt(_0x181d37(0x180))/0x8+parseInt(_0x181d37(0x182))/0x9*(-parseInt(_0x181d37(0x17e))/0xa)+parseInt(_0x181d37(0x17d))/0xb;if(_0x4d2e98===_0x3591b9)break;else _0xf04066['push'](_0xf04066['shift']());}catch(_0x18da0c){_0xf04066['push'](_0xf04066['shift']());}}}(a3_0x1dc4,0x41827));const a3_0x17c9d2=(function(){let _0x37a2a0=!![];return function(_0x41129,_0x38e4c8){const _0x344e9d=_0x37a2a0?function(){const _0x30b0c6=a3_0x5c04;if(_0x38e4c8){const _0x2086df=_0x38e4c8[_0x30b0c6(0x174)](_0x41129,arguments);return _0x38e4c8=null,_0x2086df;}}:function(){};return _0x37a2a0=![],_0x344e9d;};}()),a3_0x29b981=a3_0x17c9d2(this,function(){const _0x5393d0=a3_0x5c04;return a3_0x29b981['toString']()[_0x5393d0(0x170)]('(((.+)+)+)+$')[_0x5393d0(0x193)]()['constructor'](a3_0x29b981)[_0x5393d0(0x170)](_0x5393d0(0x19b));});a3_0x29b981();'use strict';function a3_0x1dc4(){const _0x3ddd74=['Creating\x20new\x20VENV...','message','9IqSDeA','log','pip.exe','toString','.venv','â™»ï¸\x20Found\x20broken\x20VENV\x20(no\x20pip).\x20Deleting\x20and\x20recreating...','ðŸ\x20Checking\x20Python\x20environment...','1690TXExHj','Installing\x20pip\x20packages...\x20(Caching\x20enabled)','14Zxasoq','ðŸ‘‰\x20LÃ–SUNG\x20(SSH):\x20sudo\x20chown\x20-R\x20iobroker:iobroker\x20','(((.+)+)+)+$','âš ï¸\x20Python\x20VENV\x20or\x20PIP\x20missing.\x20Installing...','python3\x20-m\x20venv\x20\x22','8862AemsrW','info','âš ï¸\x20Fast-Boot\x20failed.\x20Triggering\x20Self-Healing...','bin','Permission\x20denied','pythonProcess','search','3409161Ntqozg','python_service','20324ciMjuH','apply','âœ…\x20Fast-Boot:\x20Environment\x20healthy.','\x22\x20-c\x20\x22import\x20torch;\x20print(\x27libs_ok\x27)\x22','join','dependencyInstallInProgress','error','python.exe','\x22\x20install\x20-r\x20\x22','requirements.txt','10254816zbUnyJ','263980OrTaFJ','kill','3063592xLPMjt','EACCES','135oYaWYX','Scripts','includes','win32','ðŸ›‘\x20PERMISSION\x20ERROR:\x20Der\x20Adapter\x20darf\x20das\x20VENV\x20nicht\x20anlegen.','âŒ\x20VENV\x20CREATION\x20FAILED:\x20','warn','path','âŒ\x20INSTALL\x20FAILED:\x20','.\x20(Is\x20\x27python3-venv\x27\x20installed?)','661916wfXfuH','existsSync'];a3_0x1dc4=function(){return _0x3ddd74;};return a3_0x1dc4();}const {exec,execSync}=require('child_process'),path=require(a3_0x43b658(0x189)),fs=require('fs'),IS_WIN=process['platform']===a3_0x43b658(0x185),ADAPTER_DIR=path['join'](__dirname,'..'),PERSISTENT_DIR=path['join'](ADAPTER_DIR,a3_0x43b658(0x194)),VENV_PATH=PERSISTENT_DIR,PYTHON_EXE=IS_WIN?path[a3_0x43b658(0x177)](VENV_PATH,a3_0x43b658(0x183),a3_0x43b658(0x17a)):path['join'](VENV_PATH,a3_0x43b658(0x16d),'python'),PIP_EXE=IS_WIN?path[a3_0x43b658(0x177)](VENV_PATH,a3_0x43b658(0x183),a3_0x43b658(0x192)):path[a3_0x43b658(0x177)](VENV_PATH,a3_0x43b658(0x16d),'pip');function stopPythonService(_0x6bd33a){const _0x3a332c=a3_0x43b658;if(_0x6bd33a['pythonProcess']){try{_0x6bd33a[_0x3a332c(0x16f)][_0x3a332c(0x17f)]();}catch(_0x157157){}_0x6bd33a[_0x3a332c(0x16f)]=null;}}function installRequirementsInVenv(_0x1ca010,_0xf59539,_0x3d5f9c){const _0x397e4f=a3_0x43b658;_0x1ca010[_0x397e4f(0x191)]['info'](_0x397e4f(0x198));const _0x3b740d='\x22'+PIP_EXE+_0x397e4f(0x17b)+_0xf59539+'\x22';exec(_0x3b740d,{'timeout':0x1b7740},(_0x460026,_0x21e2a1,_0x300337)=>{const _0x3f65a0=_0x397e4f;_0x1ca010[_0x3f65a0(0x178)]=![];if(_0x460026){_0x1ca010[_0x3f65a0(0x191)]['error'](_0x3f65a0(0x18a)+(_0x300337||_0x460026[_0x3f65a0(0x18f)]));try{fs['rmSync'](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x20fe50){}}else _0x1ca010[_0x3f65a0(0x191)]['info']('âœ…\x20INSTALL\x20SUCCESS.'),_0x3d5f9c&&_0x3d5f9c();});}function a3_0x5c04(_0x47ed17,_0x30a6c4){const _0x2e5080=a3_0x1dc4();return a3_0x5c04=function(_0x29b981,_0x17c9d2){_0x29b981=_0x29b981-0x16b;let _0x1dc4fd=_0x2e5080[_0x29b981];return _0x1dc4fd;},a3_0x5c04(_0x47ed17,_0x30a6c4);}function installPythonDependencies(_0x394df0,_0x86561e){const _0x344906=a3_0x43b658;if(_0x394df0[_0x344906(0x178)])return;_0x394df0['dependencyInstallInProgress']=!![];const _0x320374=path[_0x344906(0x177)](ADAPTER_DIR,_0x344906(0x172),_0x344906(0x17c));stopPythonService(_0x394df0);if(fs[_0x344906(0x18d)](VENV_PATH)&&!fs[_0x344906(0x18d)](PIP_EXE)){_0x394df0[_0x344906(0x191)][_0x344906(0x188)](_0x344906(0x195));try{fs['rmSync'](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x252f76){_0x394df0[_0x344906(0x191)][_0x344906(0x179)]('Delete\x20failed:\x20'+_0x252f76[_0x344906(0x18f)]);}}if(!fs[_0x344906(0x18d)](VENV_PATH))try{_0x394df0['log'][_0x344906(0x16b)](_0x344906(0x18e)),execSync(_0x344906(0x19d)+VENV_PATH+'\x22');}catch(_0x5eed10){_0x394df0[_0x344906(0x178)]=![];_0x5eed10[_0x344906(0x18f)]['includes'](_0x344906(0x181))||_0x5eed10[_0x344906(0x18f)][_0x344906(0x184)](_0x344906(0x16e))?(_0x394df0[_0x344906(0x191)][_0x344906(0x179)](_0x344906(0x186)),_0x394df0[_0x344906(0x191)][_0x344906(0x179)](_0x344906(0x19a)+ADAPTER_DIR)):_0x394df0[_0x344906(0x191)]['error'](_0x344906(0x187)+_0x5eed10[_0x344906(0x18f)]+_0x344906(0x18b));return;}installRequirementsInVenv(_0x394df0,_0x320374,_0x86561e);}function checkAndInstall(_0x4f3fdb,_0x3ad42b){const _0x5b5b83=a3_0x43b658;if(fs['existsSync'](PYTHON_EXE)&&fs[_0x5b5b83(0x18d)](PIP_EXE))try{return _0x4f3fdb['log'][_0x5b5b83(0x16b)](_0x5b5b83(0x196)),execSync('\x22'+PYTHON_EXE+_0x5b5b83(0x176),{'timeout':0x3a98}),_0x4f3fdb[_0x5b5b83(0x191)][_0x5b5b83(0x16b)](_0x5b5b83(0x175)),_0x3ad42b&&_0x3ad42b(),!![];}catch(_0x28c836){_0x4f3fdb['log'][_0x5b5b83(0x188)](_0x5b5b83(0x16c));}else _0x4f3fdb[_0x5b5b83(0x191)][_0x5b5b83(0x188)](_0x5b5b83(0x19c));return installPythonDependencies(_0x4f3fdb,_0x3ad42b),![];}module['exports']={'checkAndInstall':checkAndInstall,'PYTHON_EXE':PYTHON_EXE};