const a9_0x49b366=a9_0x2a11;(function(_0xc59f68,_0x1f933d){const _0x401a49=a9_0x2a11,_0x1b0795=_0xc59f68();while(!![]){try{const _0x503039=-parseInt(_0x401a49(0x161))/0x1*(-parseInt(_0x401a49(0x156))/0x2)+-parseInt(_0x401a49(0x169))/0x3+parseInt(_0x401a49(0x13d))/0x4*(parseInt(_0x401a49(0x159))/0x5)+parseInt(_0x401a49(0x13f))/0x6+parseInt(_0x401a49(0x143))/0x7+-parseInt(_0x401a49(0x152))/0x8*(parseInt(_0x401a49(0x15a))/0x9)+parseInt(_0x401a49(0x14b))/0xa*(-parseInt(_0x401a49(0x14d))/0xb);if(_0x503039===_0x1f933d)break;else _0x1b0795['push'](_0x1b0795['shift']());}catch(_0x328902){_0x1b0795['push'](_0x1b0795['shift']());}}}(a9_0x5da5,0x9c3c0));const a9_0x48de01=(function(){let _0x4b4c6b=!![];return function(_0x3237c5,_0x3f4fdc){const _0x32563b=_0x4b4c6b?function(){const _0xaefa37=a9_0x2a11;if(_0x3f4fdc){const _0x204e92=_0x3f4fdc[_0xaefa37(0x14f)](_0x3237c5,arguments);return _0x3f4fdc=null,_0x204e92;}}:function(){};return _0x4b4c6b=![],_0x32563b;};}()),a9_0x25b6fc=a9_0x48de01(this,function(){const _0x2564ea=a9_0x2a11;return a9_0x25b6fc[_0x2564ea(0x160)]()[_0x2564ea(0x145)](_0x2564ea(0x15e))[_0x2564ea(0x160)]()[_0x2564ea(0x148)](a9_0x25b6fc)[_0x2564ea(0x145)](_0x2564ea(0x15e));});a9_0x25b6fc();'use strict';function a9_0x2a11(_0x198079,_0x374434){const _0x32429d=a9_0x5da5();return a9_0x2a11=function(_0x25b6fc,_0x48de01){_0x25b6fc=_0x25b6fc-0x13d;let _0x5da575=_0x32429d[_0x25b6fc];return _0x5da575;},a9_0x2a11(_0x198079,_0x374434);}function a9_0x5da5(){const _0x1ffe60=['57904ofkmCN','trim','includes','analysis.topology.structure','3456HLKygn','push','./setup','45250pcPQwl','612kXmzbu','log','getStateAsync','matrix','(((.+)+)+)+$','motion','toString','72afeKJe','type','rooms','forEach','length','location','config','add','1549512GueOLA','now','376SiPAuL','from','6448092ZrLtvx','sendToPythonWrapper','val','indexOf','4729004olQiLH','SET_TOPOLOGY','search','ðŸ•¸ï¸\x20Updating\x20Graph\x20Topology...','sort','constructor','ðŸ•¸ï¸\x20Topology\x20unchanged.','debug','170yzKYyI','monitored','696718JxboiO','ðŸ•¸ï¸\x20Topology\x20Graph\x20updated:\x20','apply','stringify','ðŸ•¸ï¸\x20No\x20rooms\x20found\x20via\x20devices.\x20Topology\x20skipped.'];a9_0x5da5=function(){return _0x1ffe60;};return a9_0x5da5();}const setup=require(a9_0x49b366(0x158));async function updateTopology(_0x5a09ad){const _0x1d44b5=a9_0x49b366;_0x5a09ad['log'][_0x1d44b5(0x14a)](_0x1d44b5(0x146));const _0x4b80a1=_0x5a09ad[_0x1d44b5(0x167)]['devices']||[],_0x4cd49a=new Set(),_0x186db2=new Set();_0x4b80a1[_0x1d44b5(0x164)](_0x11c3bd=>{const _0x37de18=_0x1d44b5;if(_0x11c3bd[_0x37de18(0x166)]&&_0x11c3bd[_0x37de18(0x166)][_0x37de18(0x153)]()!==''){const _0x5220ff=_0x11c3bd[_0x37de18(0x166)][_0x37de18(0x153)]();_0x4cd49a[_0x37de18(0x168)](_0x5220ff),(_0x11c3bd['type']===_0x37de18(0x15f)||_0x11c3bd[_0x37de18(0x162)]&&_0x11c3bd[_0x37de18(0x162)]['toLowerCase']()[_0x37de18(0x154)]('bewegung'))&&_0x186db2[_0x37de18(0x168)](_0x5220ff);}});const _0x132f96=Array[_0x1d44b5(0x13e)](_0x4cd49a)[_0x1d44b5(0x147)](),_0x10fbad=Array[_0x1d44b5(0x13e)](_0x186db2)[_0x1d44b5(0x147)]();if(_0x132f96[_0x1d44b5(0x165)]===0x0){_0x5a09ad[_0x1d44b5(0x15b)][_0x1d44b5(0x14a)](_0x1d44b5(0x151));return;}let _0x4fc512={'rooms':[],'matrix':[]};try{const _0x16ee72=await _0x5a09ad[_0x1d44b5(0x15c)](_0x1d44b5(0x155));_0x16ee72&&_0x16ee72[_0x1d44b5(0x141)]&&(_0x4fc512=JSON['parse'](_0x16ee72[_0x1d44b5(0x141)]));}catch(_0x65ec34){}const _0x3a7034=[],_0x3708a8=_0x132f96[_0x1d44b5(0x165)];for(let _0x43b564=0x0;_0x43b564<_0x3708a8;_0x43b564++){const _0x47fcce=[];for(let _0x5a4f8d=0x0;_0x5a4f8d<_0x3708a8;_0x5a4f8d++){let _0x5d1e54=_0x43b564===_0x5a4f8d?0x1:0x0;const _0x5654f8=_0x132f96[_0x43b564],_0x1b90cf=_0x132f96[_0x5a4f8d],_0x5955b1=_0x4fc512[_0x1d44b5(0x163)]?_0x4fc512[_0x1d44b5(0x163)]['indexOf'](_0x5654f8):-0x1,_0x1d9cbe=_0x4fc512[_0x1d44b5(0x163)]?_0x4fc512['rooms'][_0x1d44b5(0x142)](_0x1b90cf):-0x1;_0x5955b1!==-0x1&&_0x1d9cbe!==-0x1&&_0x4fc512[_0x1d44b5(0x15d)][_0x5955b1]&&_0x4fc512[_0x1d44b5(0x15d)][_0x5955b1][_0x1d9cbe]!==undefined&&(_0x5d1e54=_0x4fc512[_0x1d44b5(0x15d)][_0x5955b1][_0x1d9cbe]),_0x47fcce[_0x1d44b5(0x157)](_0x5d1e54);}_0x3a7034[_0x1d44b5(0x157)](_0x47fcce);}const _0x574233={'updated':Date[_0x1d44b5(0x16a)](),'nodeCount':_0x3708a8,'rooms':_0x132f96,'matrix':_0x3a7034,'monitored':_0x10fbad};JSON[_0x1d44b5(0x150)](_0x574233[_0x1d44b5(0x163)])!==JSON['stringify'](_0x4fc512[_0x1d44b5(0x163)])||JSON[_0x1d44b5(0x150)](_0x574233['matrix'])!==JSON[_0x1d44b5(0x150)](_0x4fc512[_0x1d44b5(0x15d)])||JSON[_0x1d44b5(0x150)](_0x574233['monitored'])!==JSON[_0x1d44b5(0x150)](_0x4fc512[_0x1d44b5(0x14c)]||[])?(await _0x5a09ad['setStateAsync']('analysis.topology.structure',{'val':JSON[_0x1d44b5(0x150)](_0x574233),'ack':!![]}),_0x5a09ad['log']['info'](_0x1d44b5(0x14e)+_0x3708a8+'\x20Nodes\x20(Display\x20Names\x20restored).'),_0x5a09ad['sendToPythonWrapper']&&_0x5a09ad[_0x1d44b5(0x140)](_0x1d44b5(0x144),_0x574233)):_0x5a09ad['log'][_0x1d44b5(0x14a)](_0x1d44b5(0x149));}module['exports']={'updateTopology':updateTopology};