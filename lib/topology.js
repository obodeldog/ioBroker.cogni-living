const a9_0x54a256=a9_0x4e52;function a9_0x3645(){const _0x348021=['trim','toLowerCase','1193536BngZqQ','indexOf','val','2748axqLqG','15512KOJmXT','add','analysis.topology.structure','39321liubSW','type','5sInaxW','ðŸ•¸ï¸\x20Topology\x20unchanged.','5266dZamxW','99341QYBHjI','now','getStateAsync','ðŸ•¸ï¸\x20Updating\x20Graph\x20Topology...','stringify','589XbBqCt','3594ZVZsKI','constructor','\x20Nodes\x20(Display\x20Names\x20restored).','toString','rooms','2150UEaAje','sort','./setup','push','sendToPythonWrapper','4193428ZTiDpH','SET_TOPOLOGY','log','monitored','2400480TrKOwx','ðŸ•¸ï¸\x20Topology\x20Graph\x20updated:\x20','bewegung','length','location','devices','debug','from','matrix','search','(((.+)+)+)+$','forEach','ðŸ•¸ï¸\x20No\x20rooms\x20found\x20via\x20devices.\x20Topology\x20skipped.','apply'];a9_0x3645=function(){return _0x348021;};return a9_0x3645();}(function(_0x1740f5,_0x3836ea){const _0x4c719a=a9_0x4e52,_0x33f10a=_0x1740f5();while(!![]){try{const _0x4f4773=parseInt(_0x4c719a(0xac))/0x1*(-parseInt(_0x4c719a(0xa6))/0x2)+-parseInt(_0x4c719a(0x8b))/0x3+-parseInt(_0x4c719a(0x87))/0x4*(parseInt(_0x4c719a(0xa4))/0x5)+-parseInt(_0x4c719a(0xad))/0x6*(-parseInt(_0x4c719a(0x9f))/0x7)+-parseInt(_0x4c719a(0x9b))/0x8+parseInt(_0x4c719a(0xa2))/0x9*(parseInt(_0x4c719a(0x82))/0xa)+parseInt(_0x4c719a(0xa7))/0xb*(parseInt(_0x4c719a(0x9e))/0xc);if(_0x4f4773===_0x3836ea)break;else _0x33f10a['push'](_0x33f10a['shift']());}catch(_0x7ca88a){_0x33f10a['push'](_0x33f10a['shift']());}}}(a9_0x3645,0xbff60));const a9_0x4d26b4=(function(){let _0x1c38cc=!![];return function(_0x332206,_0x389657){const _0xc225a0=_0x1c38cc?function(){const _0x978dbf=a9_0x4e52;if(_0x389657){const _0x47e753=_0x389657[_0x978dbf(0x98)](_0x332206,arguments);return _0x389657=null,_0x47e753;}}:function(){};return _0x1c38cc=![],_0xc225a0;};}()),a9_0x59a113=a9_0x4d26b4(this,function(){const _0x355c4f=a9_0x4e52;return a9_0x59a113[_0x355c4f(0xb0)]()[_0x355c4f(0x94)](_0x355c4f(0x95))[_0x355c4f(0xb0)]()[_0x355c4f(0xae)](a9_0x59a113)['search'](_0x355c4f(0x95));});a9_0x59a113();'use strict';const setup=require(a9_0x54a256(0x84));async function updateTopology(_0x5f0c6d){const _0x106439=a9_0x54a256;_0x5f0c6d[_0x106439(0x89)]['debug'](_0x106439(0xaa));const _0x244ba1=_0x5f0c6d['config'][_0x106439(0x90)]||[],_0x3986f5=new Set(),_0x241a4d=new Set();_0x244ba1[_0x106439(0x96)](_0x82227f=>{const _0x33b479=_0x106439;if(_0x82227f[_0x33b479(0x8f)]&&_0x82227f[_0x33b479(0x8f)][_0x33b479(0x99)]()!==''){const _0x50ce05=_0x82227f['location'][_0x33b479(0x99)]();_0x3986f5[_0x33b479(0xa0)](_0x50ce05),(_0x82227f[_0x33b479(0xa3)]==='motion'||_0x82227f[_0x33b479(0xa3)]&&_0x82227f[_0x33b479(0xa3)][_0x33b479(0x9a)]()['includes'](_0x33b479(0x8d)))&&_0x241a4d[_0x33b479(0xa0)](_0x50ce05);}});const _0x255394=Array[_0x106439(0x92)](_0x3986f5)[_0x106439(0x83)](),_0x562be9=Array['from'](_0x241a4d)[_0x106439(0x83)]();if(_0x255394[_0x106439(0x8e)]===0x0){_0x5f0c6d['log'][_0x106439(0x91)](_0x106439(0x97));return;}let _0x74428b={'rooms':[],'matrix':[]};try{const _0x30393d=await _0x5f0c6d[_0x106439(0xa9)](_0x106439(0xa1));_0x30393d&&_0x30393d[_0x106439(0x9d)]&&(_0x74428b=JSON['parse'](_0x30393d['val']));}catch(_0x4b5391){}const _0x10db4f=[],_0x4747e5=_0x255394[_0x106439(0x8e)];for(let _0x4272ef=0x0;_0x4272ef<_0x4747e5;_0x4272ef++){const _0x3046db=[];for(let _0x58362a=0x0;_0x58362a<_0x4747e5;_0x58362a++){let _0x30f208=_0x4272ef===_0x58362a?0x1:0x0;const _0x6c9a85=_0x255394[_0x4272ef],_0xa712e0=_0x255394[_0x58362a],_0x4125a0=_0x74428b[_0x106439(0xb1)]?_0x74428b[_0x106439(0xb1)][_0x106439(0x9c)](_0x6c9a85):-0x1,_0x50e780=_0x74428b[_0x106439(0xb1)]?_0x74428b[_0x106439(0xb1)][_0x106439(0x9c)](_0xa712e0):-0x1;_0x4125a0!==-0x1&&_0x50e780!==-0x1&&_0x74428b[_0x106439(0x93)][_0x4125a0]&&_0x74428b[_0x106439(0x93)][_0x4125a0][_0x50e780]!==undefined&&(_0x30f208=_0x74428b['matrix'][_0x4125a0][_0x50e780]),_0x3046db['push'](_0x30f208);}_0x10db4f[_0x106439(0x85)](_0x3046db);}const _0x3fd9c4={'updated':Date[_0x106439(0xa8)](),'nodeCount':_0x4747e5,'rooms':_0x255394,'matrix':_0x10db4f,'monitored':_0x562be9};JSON[_0x106439(0xab)](_0x3fd9c4[_0x106439(0xb1)])!==JSON[_0x106439(0xab)](_0x74428b[_0x106439(0xb1)])||JSON[_0x106439(0xab)](_0x3fd9c4['matrix'])!==JSON['stringify'](_0x74428b[_0x106439(0x93)])||JSON[_0x106439(0xab)](_0x3fd9c4[_0x106439(0x8a)])!==JSON['stringify'](_0x74428b['monitored']||[])?(await _0x5f0c6d['setStateAsync']('analysis.topology.structure',{'val':JSON['stringify'](_0x3fd9c4),'ack':!![]}),_0x5f0c6d[_0x106439(0x89)]['info'](_0x106439(0x8c)+_0x4747e5+_0x106439(0xaf)),_0x5f0c6d[_0x106439(0x86)]&&_0x5f0c6d['sendToPythonWrapper'](_0x106439(0x88),_0x3fd9c4)):_0x5f0c6d[_0x106439(0x89)][_0x106439(0x91)](_0x106439(0xa5));}function a9_0x4e52(_0x2ce2ff,_0x29ce1e){const _0x4ee585=a9_0x3645();return a9_0x4e52=function(_0x59a113,_0x4d26b4){_0x59a113=_0x59a113-0x82;let _0x364597=_0x4ee585[_0x59a113];return _0x364597;},a9_0x4e52(_0x2ce2ff,_0x29ce1e);}module['exports']={'updateTopology':updateTopology};