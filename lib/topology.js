const a9_0x45a317=a9_0x3eaf;(function(_0x118f47,_0x5a82fa){const _0x70f1a3=a9_0x3eaf,_0x381803=_0x118f47();while(!![]){try{const _0x363f2d=parseInt(_0x70f1a3(0x1d3))/0x1+parseInt(_0x70f1a3(0x1d6))/0x2+-parseInt(_0x70f1a3(0x1d8))/0x3*(parseInt(_0x70f1a3(0x1bf))/0x4)+-parseInt(_0x70f1a3(0x1af))/0x5*(parseInt(_0x70f1a3(0x1c3))/0x6)+parseInt(_0x70f1a3(0x1b5))/0x7+parseInt(_0x70f1a3(0x1ad))/0x8+parseInt(_0x70f1a3(0x1cc))/0x9*(-parseInt(_0x70f1a3(0x1cf))/0xa);if(_0x363f2d===_0x5a82fa)break;else _0x381803['push'](_0x381803['shift']());}catch(_0x5a341b){_0x381803['push'](_0x381803['shift']());}}}(a9_0x1fc9,0xe4bf5));const a9_0xa8ac70=(function(){let _0x365937=!![];return function(_0x5c2e66,_0x5132cf){const _0x33e690=_0x365937?function(){const _0x2a79c4=a9_0x3eaf;if(_0x5132cf){const _0x36c746=_0x5132cf[_0x2a79c4(0x1bb)](_0x5c2e66,arguments);return _0x5132cf=null,_0x36c746;}}:function(){};return _0x365937=![],_0x33e690;};}()),a9_0x37e34a=a9_0xa8ac70(this,function(){const _0x4d5325=a9_0x3eaf;return a9_0x37e34a[_0x4d5325(0x1bc)]()['search']('(((.+)+)+)+$')[_0x4d5325(0x1bc)]()[_0x4d5325(0x1c2)](a9_0x37e34a)[_0x4d5325(0x1c8)](_0x4d5325(0x1b2));});a9_0x37e34a();function a9_0x3eaf(_0x5e88,_0x3d0a75){const _0x1f1a4f=a9_0x1fc9();return a9_0x3eaf=function(_0x37e34a,_0xa8ac70){_0x37e34a=_0x37e34a-0x1ad;let _0x1fc92b=_0x1f1a4f[_0x37e34a];return _0x1fc92b;},a9_0x3eaf(_0x5e88,_0x3d0a75);}'use strict';const setup=require('./setup');async function updateTopology(_0x3a7d53){const _0x34e5f4=a9_0x3eaf;_0x3a7d53['log']['debug'](_0x34e5f4(0x1b6));const _0x40fab6=_0x3a7d53['config'][_0x34e5f4(0x1b4)]||[],_0x1c63fb=new Set(),_0x11d29f=new Set();_0x40fab6['forEach'](_0x16d77a=>{const _0x4d067d=_0x34e5f4;if(_0x16d77a['location']&&_0x16d77a[_0x4d067d(0x1b8)][_0x4d067d(0x1cd)]()!==''){const _0x1de99f=_0x16d77a['location'][_0x4d067d(0x1cd)]();_0x1c63fb[_0x4d067d(0x1be)](_0x1de99f),(_0x16d77a['type']===_0x4d067d(0x1d2)||_0x16d77a['type']&&_0x16d77a[_0x4d067d(0x1b9)][_0x4d067d(0x1d4)]()['includes']('bewegung'))&&_0x11d29f[_0x4d067d(0x1be)](_0x1de99f);}});const _0x5c070d=Array[_0x34e5f4(0x1c5)](_0x1c63fb)[_0x34e5f4(0x1c0)](),_0x401121=Array[_0x34e5f4(0x1c5)](_0x11d29f)[_0x34e5f4(0x1c0)]();if(_0x5c070d[_0x34e5f4(0x1b0)]===0x0){_0x3a7d53['log'][_0x34e5f4(0x1b1)](_0x34e5f4(0x1c7));return;}let _0x305112={'rooms':[],'matrix':[]};try{const _0x2a529c=await _0x3a7d53['getStateAsync'](_0x34e5f4(0x1cb));_0x2a529c&&_0x2a529c[_0x34e5f4(0x1c6)]&&(_0x305112=JSON['parse'](_0x2a529c[_0x34e5f4(0x1c6)]));}catch(_0x48e3a9){}const _0xcc7754=[],_0x36adf1=_0x5c070d['length'];for(let _0x2ac1ec=0x0;_0x2ac1ec<_0x36adf1;_0x2ac1ec++){const _0x369df8=[];for(let _0x18fd5e=0x0;_0x18fd5e<_0x36adf1;_0x18fd5e++){let _0x2fab42=_0x2ac1ec===_0x18fd5e?0x1:0x0;const _0xe58e04=_0x5c070d[_0x2ac1ec],_0x29a347=_0x5c070d[_0x18fd5e],_0x162e82=_0x305112['rooms']?_0x305112[_0x34e5f4(0x1ae)][_0x34e5f4(0x1d0)](_0xe58e04):-0x1,_0x2970d6=_0x305112[_0x34e5f4(0x1ae)]?_0x305112[_0x34e5f4(0x1ae)][_0x34e5f4(0x1d0)](_0x29a347):-0x1;_0x162e82!==-0x1&&_0x2970d6!==-0x1&&_0x305112[_0x34e5f4(0x1b7)][_0x162e82]&&_0x305112[_0x34e5f4(0x1b7)][_0x162e82][_0x2970d6]!==undefined&&(_0x2fab42=_0x305112['matrix'][_0x162e82][_0x2970d6]),_0x369df8['push'](_0x2fab42);}_0xcc7754[_0x34e5f4(0x1ba)](_0x369df8);}const _0x2fef17={'updated':Date['now'](),'nodeCount':_0x36adf1,'rooms':_0x5c070d,'matrix':_0xcc7754,'monitored':_0x401121};JSON[_0x34e5f4(0x1d7)](_0x2fef17[_0x34e5f4(0x1ae)])!==JSON[_0x34e5f4(0x1d7)](_0x305112[_0x34e5f4(0x1ae)])||JSON[_0x34e5f4(0x1d7)](_0x2fef17['matrix'])!==JSON[_0x34e5f4(0x1d7)](_0x305112['matrix'])||JSON[_0x34e5f4(0x1d7)](_0x2fef17['monitored'])!==JSON[_0x34e5f4(0x1d7)](_0x305112[_0x34e5f4(0x1ca)]||[])?(await _0x3a7d53['setStateAsync'](_0x34e5f4(0x1cb),{'val':JSON[_0x34e5f4(0x1d7)](_0x2fef17),'ack':!![]}),_0x3a7d53[_0x34e5f4(0x1c9)][_0x34e5f4(0x1d1)](_0x34e5f4(0x1b3)+_0x36adf1+_0x34e5f4(0x1d5)),_0x3a7d53[_0x34e5f4(0x1bd)]&&_0x3a7d53[_0x34e5f4(0x1bd)](_0x34e5f4(0x1ce),_0x2fef17)):_0x3a7d53[_0x34e5f4(0x1c9)]['debug'](_0x34e5f4(0x1c4));}function a9_0x1fc9(){const _0x278b9f=['SET_TOPOLOGY','10ZOmash','indexOf','info','motion','1506469wjJsZB','toLowerCase','\x20Nodes\x20(Display\x20Names\x20restored).','23430DpFMaW','stringify','21669SVvNdL','1401736iaOsGk','rooms','30490IybzBX','length','debug','(((.+)+)+)+$','ðŸ•¸ï¸\x20Topology\x20Graph\x20updated:\x20','devices','12869129AQGMGQ','ðŸ•¸ï¸\x20Updating\x20Graph\x20Topology...','matrix','location','type','push','apply','toString','sendToPythonWrapper','add','232daXoxe','sort','exports','constructor','1182UlcESa','ðŸ•¸ï¸\x20Topology\x20unchanged.','from','val','ðŸ•¸ï¸\x20No\x20rooms\x20found\x20via\x20devices.\x20Topology\x20skipped.','search','log','monitored','analysis.topology.structure','8771931psfPua','trim'];a9_0x1fc9=function(){return _0x278b9f;};return a9_0x1fc9();}module[a9_0x45a317(0x1c1)]={'updateTopology':updateTopology};