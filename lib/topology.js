const a9_0x372cf0=a9_0x561a;function a9_0x561a(_0x5c243d,_0x4fe3fc){const _0x29e3b4=a9_0x42b6();return a9_0x561a=function(_0x358ba0,_0x3b03bd){_0x358ba0=_0x358ba0-0x108;let _0x42b662=_0x29e3b4[_0x358ba0];return _0x42b662;},a9_0x561a(_0x5c243d,_0x4fe3fc);}function a9_0x42b6(){const _0x44e880=['config','monitored','10NzoeMq','info','ðŸ•¸ï¸\x20Updating\x20Graph\x20Topology...','SET_TOPOLOGY','ðŸ•¸ï¸\x20No\x20rooms\x20found\x20via\x20devices.\x20Topology\x20skipped.','includes','location','78448GKUbsx','670VizCJB','debug','sort','constructor','length','45dyfkIb','toLowerCase','matrix','analysis.topology.structure','47252ZngLdY','159780lQRmeR','push','devices','737618pEImua','sendToPythonWrapper','stringify','6246jInSIo','1118862ZNjykY','trim','forEach','normalizeRoomId','search','indexOf','\x20Nodes,\x20','rooms','apply','now','motion','add','log','exports','315872nNSusJ','ðŸ•¸ï¸\x20Topology\x20unchanged.','bewegung','\x20Monitored\x20Rooms\x20(Normalized).','val'];a9_0x42b6=function(){return _0x44e880;};return a9_0x42b6();}(function(_0x2e8c49,_0xe5137f){const _0x4762d1=a9_0x561a,_0x1a15f9=_0x2e8c49();while(!![]){try{const _0x3f41d5=parseInt(_0x4762d1(0x12d))/0x1+parseInt(_0x4762d1(0x10a))/0x2+-parseInt(_0x4762d1(0x133))/0x3*(parseInt(_0x4762d1(0x109))/0x4)+parseInt(_0x4762d1(0x12e))/0x5*(parseInt(_0x4762d1(0x110))/0x6)+-parseInt(_0x4762d1(0x10d))/0x7+parseInt(_0x4762d1(0x11f))/0x8+parseInt(_0x4762d1(0x111))/0x9*(parseInt(_0x4762d1(0x126))/0xa);if(_0x3f41d5===_0xe5137f)break;else _0x1a15f9['push'](_0x1a15f9['shift']());}catch(_0x110d13){_0x1a15f9['push'](_0x1a15f9['shift']());}}}(a9_0x42b6,0x2bb79));const a9_0x3b03bd=(function(){let _0x3a4623=!![];return function(_0x383b36,_0xdf5a62){const _0x1d5224=_0x3a4623?function(){const _0x5107a0=a9_0x561a;if(_0xdf5a62){const _0x55c07e=_0xdf5a62[_0x5107a0(0x119)](_0x383b36,arguments);return _0xdf5a62=null,_0x55c07e;}}:function(){};return _0x3a4623=![],_0x1d5224;};}()),a9_0x358ba0=a9_0x3b03bd(this,function(){const _0x308d5c=a9_0x561a;return a9_0x358ba0['toString']()[_0x308d5c(0x115)]('(((.+)+)+)+$')['toString']()[_0x308d5c(0x131)](a9_0x358ba0)[_0x308d5c(0x115)]('(((.+)+)+)+$');});a9_0x358ba0();'use strict';const setup=require('./setup');async function updateTopology(_0x23cd79){const _0x4907e9=a9_0x561a;_0x23cd79[_0x4907e9(0x11d)]['debug'](_0x4907e9(0x128));const _0x221818=_0x23cd79[_0x4907e9(0x124)][_0x4907e9(0x10c)]||[],_0x3dfcc7=new Set(),_0x4c9521=new Set();_0x221818[_0x4907e9(0x113)](_0x130d8a=>{const _0x41b96d=_0x4907e9;if(_0x130d8a[_0x41b96d(0x12c)]&&_0x130d8a[_0x41b96d(0x12c)][_0x41b96d(0x112)]()!==''){const _0x14799e=setup[_0x41b96d(0x114)](_0x130d8a[_0x41b96d(0x12c)][_0x41b96d(0x112)]());_0x3dfcc7[_0x41b96d(0x11c)](_0x14799e),(_0x130d8a['type']===_0x41b96d(0x11b)||_0x130d8a['type']&&_0x130d8a['type'][_0x41b96d(0x134)]()[_0x41b96d(0x12b)](_0x41b96d(0x121)))&&_0x4c9521[_0x41b96d(0x11c)](_0x14799e);}});const _0x5e0cfe=Array['from'](_0x3dfcc7)['sort'](),_0x374db5=Array['from'](_0x4c9521)[_0x4907e9(0x130)]();if(_0x5e0cfe[_0x4907e9(0x132)]===0x0){_0x23cd79[_0x4907e9(0x11d)][_0x4907e9(0x12f)](_0x4907e9(0x12a));return;}let _0x4241ec={'rooms':[],'matrix':[]};try{const _0x49ea67=await _0x23cd79['getStateAsync'](_0x4907e9(0x108));_0x49ea67&&_0x49ea67[_0x4907e9(0x123)]&&(_0x4241ec=JSON['parse'](_0x49ea67[_0x4907e9(0x123)]));}catch(_0x2c7829){}const _0x38366c=[],_0x382e90=_0x5e0cfe[_0x4907e9(0x132)];for(let _0x4493a8=0x0;_0x4493a8<_0x382e90;_0x4493a8++){const _0xb35aba=[];for(let _0x344148=0x0;_0x344148<_0x382e90;_0x344148++){let _0x534d1b=_0x4493a8===_0x344148?0x1:0x0;const _0x5e4c94=_0x5e0cfe[_0x4493a8],_0x33eff7=_0x5e0cfe[_0x344148],_0x29bb56=_0x4241ec['rooms']?_0x4241ec[_0x4907e9(0x118)][_0x4907e9(0x116)](_0x5e4c94):-0x1,_0x4ab925=_0x4241ec[_0x4907e9(0x118)]?_0x4241ec[_0x4907e9(0x118)][_0x4907e9(0x116)](_0x33eff7):-0x1;_0x29bb56!==-0x1&&_0x4ab925!==-0x1&&_0x4241ec[_0x4907e9(0x135)][_0x29bb56]&&_0x4241ec[_0x4907e9(0x135)][_0x29bb56][_0x4ab925]!==undefined&&(_0x534d1b=_0x4241ec['matrix'][_0x29bb56][_0x4ab925]),_0xb35aba[_0x4907e9(0x10b)](_0x534d1b);}_0x38366c[_0x4907e9(0x10b)](_0xb35aba);}const _0x11c902={'updated':Date[_0x4907e9(0x11a)](),'nodeCount':_0x382e90,'rooms':_0x5e0cfe,'matrix':_0x38366c,'monitored':_0x374db5};JSON[_0x4907e9(0x10f)](_0x11c902['rooms'])!==JSON[_0x4907e9(0x10f)](_0x4241ec[_0x4907e9(0x118)])||JSON[_0x4907e9(0x10f)](_0x11c902[_0x4907e9(0x135)])!==JSON[_0x4907e9(0x10f)](_0x4241ec[_0x4907e9(0x135)])||JSON[_0x4907e9(0x10f)](_0x11c902['monitored'])!==JSON[_0x4907e9(0x10f)](_0x4241ec[_0x4907e9(0x125)]||[])?(await _0x23cd79['setStateAsync']('analysis.topology.structure',{'val':JSON[_0x4907e9(0x10f)](_0x11c902),'ack':!![]}),_0x23cd79[_0x4907e9(0x11d)][_0x4907e9(0x127)]('ðŸ•¸ï¸\x20Topology\x20Graph\x20updated:\x20'+_0x382e90+_0x4907e9(0x117)+_0x374db5[_0x4907e9(0x132)]+_0x4907e9(0x122)),_0x23cd79[_0x4907e9(0x10e)]&&_0x23cd79[_0x4907e9(0x10e)](_0x4907e9(0x129),_0x11c902)):_0x23cd79[_0x4907e9(0x11d)][_0x4907e9(0x12f)](_0x4907e9(0x120));}module[a9_0x372cf0(0x11e)]={'updateTopology':updateTopology};