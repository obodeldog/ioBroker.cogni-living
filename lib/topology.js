const a9_0x18e89a=a9_0x35e0;function a9_0x491e(){const _0x3597b3=['üï∏Ô∏è\x20Topology\x20Graph\x20updated:\x20','toString','1437310cMTTWd','toLowerCase','15507KGeKqq','131445OsvzjC','from','info','motion','2181792tUXAGE','./setup','val','trim','parse','push','length','sort','37498520iixImy','6OTkKTA','now','2616gmYRkx','analysis.topology.structure','debug','rooms','forEach','üï∏Ô∏è\x20Updating\x20Graph\x20Topology...','sendToPythonWrapper','indexOf','log','type','add','constructor','SET_TOPOLOGY','location','(((.+)+)+)+$','4564140rJzWUp','1WZhjyv','bewegung','stringify','setStateAsync','apply','3102608xyHlEN','monitored','search','matrix'];a9_0x491e=function(){return _0x3597b3;};return a9_0x491e();}(function(_0x329b7e,_0x542661){const _0x27faff=a9_0x35e0,_0xeb5fdb=_0x329b7e();while(!![]){try{const _0x285818=parseInt(_0x27faff(0x1f6))/0x1*(-parseInt(_0x27faff(0x208))/0x2)+-parseInt(_0x27faff(0x204))/0x3+-parseInt(_0x27faff(0x1fb))/0x4+-parseInt(_0x27faff(0x1f5))/0x5+-parseInt(_0x27faff(0x1e4))/0x6*(-parseInt(_0x27faff(0x201))/0x7)+-parseInt(_0x27faff(0x1e6))/0x8*(parseInt(_0x27faff(0x203))/0x9)+parseInt(_0x27faff(0x1e3))/0xa;if(_0x285818===_0x542661)break;else _0xeb5fdb['push'](_0xeb5fdb['shift']());}catch(_0x5aa1f8){_0xeb5fdb['push'](_0xeb5fdb['shift']());}}}(a9_0x491e,0x8acfa));const a9_0x51730d=(function(){let _0x200a24=!![];return function(_0x231f17,_0x47b8d9){const _0x30d3cd=_0x200a24?function(){const _0x2b0ff7=a9_0x35e0;if(_0x47b8d9){const _0x1999a6=_0x47b8d9[_0x2b0ff7(0x1fa)](_0x231f17,arguments);return _0x47b8d9=null,_0x1999a6;}}:function(){};return _0x200a24=![],_0x30d3cd;};}()),a9_0xa324cb=a9_0x51730d(this,function(){const _0x5d86c2=a9_0x35e0;return a9_0xa324cb[_0x5d86c2(0x200)]()['search'](_0x5d86c2(0x1f4))[_0x5d86c2(0x200)]()[_0x5d86c2(0x1f1)](a9_0xa324cb)[_0x5d86c2(0x1fd)](_0x5d86c2(0x1f4));});a9_0xa324cb();'use strict';const setup=require(a9_0x18e89a(0x209));function a9_0x35e0(_0x24d12f,_0xce13f9){const _0x3c5596=a9_0x491e();return a9_0x35e0=function(_0xa324cb,_0x51730d){_0xa324cb=_0xa324cb-0x1de;let _0x491eeb=_0x3c5596[_0xa324cb];return _0x491eeb;},a9_0x35e0(_0x24d12f,_0xce13f9);}async function updateTopology(_0x5112aa){const _0x4fbaec=a9_0x18e89a;_0x5112aa['log'][_0x4fbaec(0x1e8)](_0x4fbaec(0x1eb));const _0xe95d87=_0x5112aa['config']['devices']||[],_0x2da90a=new Set(),_0x43dfed=new Set();_0xe95d87[_0x4fbaec(0x1ea)](_0x3fdc03=>{const _0xf93548=_0x4fbaec;if(_0x3fdc03['location']&&_0x3fdc03[_0xf93548(0x1f3)][_0xf93548(0x1de)]()!==''){const _0x835943=_0x3fdc03[_0xf93548(0x1f3)][_0xf93548(0x1de)]();_0x2da90a[_0xf93548(0x1f0)](_0x835943),(_0x3fdc03['type']===_0xf93548(0x207)||_0x3fdc03[_0xf93548(0x1ef)]&&_0x3fdc03[_0xf93548(0x1ef)][_0xf93548(0x202)]()['includes'](_0xf93548(0x1f7)))&&_0x43dfed[_0xf93548(0x1f0)](_0x835943);}});const _0x369806=Array[_0x4fbaec(0x205)](_0x2da90a)['sort'](),_0x74c003=Array[_0x4fbaec(0x205)](_0x43dfed)[_0x4fbaec(0x1e2)]();if(_0x369806[_0x4fbaec(0x1e1)]===0x0){_0x5112aa[_0x4fbaec(0x1ee)][_0x4fbaec(0x1e8)]('üï∏Ô∏è\x20No\x20rooms\x20found\x20via\x20devices.\x20Topology\x20skipped.');return;}let _0x6fa295={'rooms':[],'matrix':[]};try{const _0x29a649=await _0x5112aa['getStateAsync'](_0x4fbaec(0x1e7));_0x29a649&&_0x29a649[_0x4fbaec(0x20a)]&&(_0x6fa295=JSON[_0x4fbaec(0x1df)](_0x29a649['val']));}catch(_0x48ab51){}const _0x48eda0=[],_0xfe98f6=_0x369806[_0x4fbaec(0x1e1)];for(let _0x1fd936=0x0;_0x1fd936<_0xfe98f6;_0x1fd936++){const _0x53be03=[];for(let _0x201088=0x0;_0x201088<_0xfe98f6;_0x201088++){let _0xb01aef=_0x1fd936===_0x201088?0x1:0x0;const _0x494919=_0x369806[_0x1fd936],_0x1558a3=_0x369806[_0x201088],_0x14a541=_0x6fa295[_0x4fbaec(0x1e9)]?_0x6fa295[_0x4fbaec(0x1e9)]['indexOf'](_0x494919):-0x1,_0x3e21fb=_0x6fa295['rooms']?_0x6fa295['rooms'][_0x4fbaec(0x1ed)](_0x1558a3):-0x1;_0x14a541!==-0x1&&_0x3e21fb!==-0x1&&_0x6fa295[_0x4fbaec(0x1fe)][_0x14a541]&&_0x6fa295[_0x4fbaec(0x1fe)][_0x14a541][_0x3e21fb]!==undefined&&(_0xb01aef=_0x6fa295[_0x4fbaec(0x1fe)][_0x14a541][_0x3e21fb]),_0x53be03[_0x4fbaec(0x1e0)](_0xb01aef);}_0x48eda0[_0x4fbaec(0x1e0)](_0x53be03);}const _0x2395e9={'updated':Date[_0x4fbaec(0x1e5)](),'nodeCount':_0xfe98f6,'rooms':_0x369806,'matrix':_0x48eda0,'monitored':_0x74c003};JSON[_0x4fbaec(0x1f8)](_0x2395e9[_0x4fbaec(0x1e9)])!==JSON['stringify'](_0x6fa295[_0x4fbaec(0x1e9)])||JSON[_0x4fbaec(0x1f8)](_0x2395e9[_0x4fbaec(0x1fe)])!==JSON[_0x4fbaec(0x1f8)](_0x6fa295[_0x4fbaec(0x1fe)])||JSON[_0x4fbaec(0x1f8)](_0x2395e9[_0x4fbaec(0x1fc)])!==JSON[_0x4fbaec(0x1f8)](_0x6fa295['monitored']||[])?(await _0x5112aa[_0x4fbaec(0x1f9)](_0x4fbaec(0x1e7),{'val':JSON[_0x4fbaec(0x1f8)](_0x2395e9),'ack':!![]}),_0x5112aa[_0x4fbaec(0x1ee)][_0x4fbaec(0x206)](_0x4fbaec(0x1ff)+_0xfe98f6+'\x20Nodes\x20(Display\x20Names\x20restored).'),_0x5112aa[_0x4fbaec(0x1ec)]&&_0x5112aa['sendToPythonWrapper'](_0x4fbaec(0x1f2),_0x2395e9)):_0x5112aa[_0x4fbaec(0x1ee)]['debug']('üï∏Ô∏è\x20Topology\x20unchanged.');}module['exports']={'updateTopology':updateTopology};