function a9_0xc951(){const _0x125dfa=['search','forEach','1280584fvyKkp','SET_TOPOLOGY','location','type','indexOf','1064WBcWPo','analysis.topology.structure','stringify','üï∏Ô∏è\x20Updating\x20Graph\x20Topology...','parse','60voQZEM','includes','add','13935mlvAgg','(((.+)+)+)+$','val','sort','18514953NpdfCk','length','üï∏Ô∏è\x20Topology\x20Graph\x20updated:\x20','info','trim','getStateAsync','üï∏Ô∏è\x20Topology\x20unchanged.','56714EgNNBE','10ukygOK','apply','debug','matrix','from','rooms','821222WEudRw','\x20Nodes\x20(Display\x20Names\x20restored).','constructor','monitored','log','sendToPythonWrapper','7614448SkxfLi','toLowerCase','toString','51273puscRY','push','now'];a9_0xc951=function(){return _0x125dfa;};return a9_0xc951();}(function(_0x5a89df,_0x22dad4){const _0x47a7d0=a9_0x436a,_0x1e8f8d=_0x5a89df();while(!![]){try{const _0x556145=-parseInt(_0x47a7d0(0x1f9))/0x1+-parseInt(_0x47a7d0(0x207))/0x2+parseInt(_0x47a7d0(0x202))/0x3+parseInt(_0x47a7d0(0x20c))/0x4*(-parseInt(_0x47a7d0(0x214))/0x5)+-parseInt(_0x47a7d0(0x211))/0x6*(parseInt(_0x47a7d0(0x1f2))/0x7)+parseInt(_0x47a7d0(0x1ff))/0x8+parseInt(_0x47a7d0(0x1eb))/0x9*(parseInt(_0x47a7d0(0x1f3))/0xa);if(_0x556145===_0x22dad4)break;else _0x1e8f8d['push'](_0x1e8f8d['shift']());}catch(_0x5257dd){_0x1e8f8d['push'](_0x1e8f8d['shift']());}}}(a9_0xc951,0xb535e));function a9_0x436a(_0x47cbc1,_0x212344){const _0x26baa1=a9_0xc951();return a9_0x436a=function(_0x43b478,_0x1c796e){_0x43b478=_0x43b478-0x1e8;let _0xc95113=_0x26baa1[_0x43b478];return _0xc95113;},a9_0x436a(_0x47cbc1,_0x212344);}const a9_0x1c796e=(function(){let _0x14b7a0=!![];return function(_0x1a510f,_0x808dca){const _0x1a56c6=_0x14b7a0?function(){const _0x2d5bed=a9_0x436a;if(_0x808dca){const _0x4a77de=_0x808dca[_0x2d5bed(0x1f4)](_0x1a510f,arguments);return _0x808dca=null,_0x4a77de;}}:function(){};return _0x14b7a0=![],_0x1a56c6;};}()),a9_0x43b478=a9_0x1c796e(this,function(){const _0x170f2f=a9_0x436a;return a9_0x43b478[_0x170f2f(0x201)]()[_0x170f2f(0x205)]('(((.+)+)+)+$')[_0x170f2f(0x201)]()[_0x170f2f(0x1fb)](a9_0x43b478)[_0x170f2f(0x205)](_0x170f2f(0x1e8));});a9_0x43b478();'use strict';const setup=require('./setup');async function updateTopology(_0x5b34ca){const _0x43b77d=a9_0x436a;_0x5b34ca[_0x43b77d(0x1fd)]['debug'](_0x43b77d(0x20f));const _0x18a69b=_0x5b34ca['config']['devices']||[],_0x134aae=new Set(),_0x4755e6=new Set();_0x18a69b[_0x43b77d(0x206)](_0x35e87f=>{const _0x22718e=_0x43b77d;if(_0x35e87f[_0x22718e(0x209)]&&_0x35e87f[_0x22718e(0x209)][_0x22718e(0x1ef)]()!==''){const _0x404944=_0x35e87f['location'][_0x22718e(0x1ef)]();_0x134aae['add'](_0x404944),(_0x35e87f[_0x22718e(0x20a)]==='motion'||_0x35e87f[_0x22718e(0x20a)]&&_0x35e87f[_0x22718e(0x20a)][_0x22718e(0x200)]()[_0x22718e(0x212)]('bewegung'))&&_0x4755e6[_0x22718e(0x213)](_0x404944);}});const _0x45f74e=Array['from'](_0x134aae)[_0x43b77d(0x1ea)](),_0x573c89=Array[_0x43b77d(0x1f7)](_0x4755e6)[_0x43b77d(0x1ea)]();if(_0x45f74e[_0x43b77d(0x1ec)]===0x0){_0x5b34ca[_0x43b77d(0x1fd)][_0x43b77d(0x1f5)]('üï∏Ô∏è\x20No\x20rooms\x20found\x20via\x20devices.\x20Topology\x20skipped.');return;}let _0x1e6df7={'rooms':[],'matrix':[]};try{const _0x368bcc=await _0x5b34ca[_0x43b77d(0x1f0)](_0x43b77d(0x20d));_0x368bcc&&_0x368bcc['val']&&(_0x1e6df7=JSON[_0x43b77d(0x210)](_0x368bcc[_0x43b77d(0x1e9)]));}catch(_0x4b3f15){}const _0x17c67d=[],_0x2454b4=_0x45f74e[_0x43b77d(0x1ec)];for(let _0x3ca26a=0x0;_0x3ca26a<_0x2454b4;_0x3ca26a++){const _0x66ccfe=[];for(let _0xa089f5=0x0;_0xa089f5<_0x2454b4;_0xa089f5++){let _0x3242bd=_0x3ca26a===_0xa089f5?0x1:0x0;const _0xa7fa72=_0x45f74e[_0x3ca26a],_0x2ec66c=_0x45f74e[_0xa089f5],_0x54ad0b=_0x1e6df7['rooms']?_0x1e6df7[_0x43b77d(0x1f8)]['indexOf'](_0xa7fa72):-0x1,_0x8caddf=_0x1e6df7[_0x43b77d(0x1f8)]?_0x1e6df7[_0x43b77d(0x1f8)][_0x43b77d(0x20b)](_0x2ec66c):-0x1;_0x54ad0b!==-0x1&&_0x8caddf!==-0x1&&_0x1e6df7['matrix'][_0x54ad0b]&&_0x1e6df7[_0x43b77d(0x1f6)][_0x54ad0b][_0x8caddf]!==undefined&&(_0x3242bd=_0x1e6df7[_0x43b77d(0x1f6)][_0x54ad0b][_0x8caddf]),_0x66ccfe[_0x43b77d(0x203)](_0x3242bd);}_0x17c67d[_0x43b77d(0x203)](_0x66ccfe);}const _0x10090d={'updated':Date[_0x43b77d(0x204)](),'nodeCount':_0x2454b4,'rooms':_0x45f74e,'matrix':_0x17c67d,'monitored':_0x573c89};JSON[_0x43b77d(0x20e)](_0x10090d[_0x43b77d(0x1f8)])!==JSON[_0x43b77d(0x20e)](_0x1e6df7['rooms'])||JSON[_0x43b77d(0x20e)](_0x10090d['matrix'])!==JSON[_0x43b77d(0x20e)](_0x1e6df7['matrix'])||JSON[_0x43b77d(0x20e)](_0x10090d[_0x43b77d(0x1fc)])!==JSON[_0x43b77d(0x20e)](_0x1e6df7['monitored']||[])?(await _0x5b34ca['setStateAsync'](_0x43b77d(0x20d),{'val':JSON[_0x43b77d(0x20e)](_0x10090d),'ack':!![]}),_0x5b34ca[_0x43b77d(0x1fd)][_0x43b77d(0x1ee)](_0x43b77d(0x1ed)+_0x2454b4+_0x43b77d(0x1fa)),_0x5b34ca[_0x43b77d(0x1fe)]&&_0x5b34ca['sendToPythonWrapper'](_0x43b77d(0x208),_0x10090d)):_0x5b34ca['log'][_0x43b77d(0x1f5)](_0x43b77d(0x1f1));}module['exports']={'updateTopology':updateTopology};