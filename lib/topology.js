const a9_0x45bcb5=a9_0x58a2;(function(_0x528848,_0x34952e){const _0xfde68c=a9_0x58a2,_0x36564b=_0x528848();while(!![]){try{const _0x45a919=parseInt(_0xfde68c(0x208))/0x1*(parseInt(_0xfde68c(0x20d))/0x2)+parseInt(_0xfde68c(0x1e7))/0x3*(parseInt(_0xfde68c(0x201))/0x4)+parseInt(_0xfde68c(0x20f))/0x5+parseInt(_0xfde68c(0x1f5))/0x6*(parseInt(_0xfde68c(0x210))/0x7)+parseInt(_0xfde68c(0x1f1))/0x8*(-parseInt(_0xfde68c(0x1ec))/0x9)+-parseInt(_0xfde68c(0x216))/0xa*(-parseInt(_0xfde68c(0x206))/0xb)+-parseInt(_0xfde68c(0x1fa))/0xc*(parseInt(_0xfde68c(0x1ea))/0xd);if(_0x45a919===_0x34952e)break;else _0x36564b['push'](_0x36564b['shift']());}catch(_0x1ba1ad){_0x36564b['push'](_0x36564b['shift']());}}}(a9_0x7c01,0x7e72e));function a9_0x58a2(_0x1a8592,_0xa65923){const _0x31182b=a9_0x7c01();return a9_0x58a2=function(_0x568e39,_0x24a403){_0x568e39=_0x568e39-0x1e7;let _0x7c01f=_0x31182b[_0x568e39];return _0x7c01f;},a9_0x58a2(_0x1a8592,_0xa65923);}const a9_0x24a403=(function(){let _0x3fa3a9=!![];return function(_0x1435a8,_0x49ec4a){const _0x559da3=_0x3fa3a9?function(){const _0x59becb=a9_0x58a2;if(_0x49ec4a){const _0x569d0d=_0x49ec4a[_0x59becb(0x209)](_0x1435a8,arguments);return _0x49ec4a=null,_0x569d0d;}}:function(){};return _0x3fa3a9=![],_0x559da3;};}()),a9_0x568e39=a9_0x24a403(this,function(){const _0x22c44b=a9_0x58a2;return a9_0x568e39[_0x22c44b(0x1ed)]()['search'](_0x22c44b(0x1f9))[_0x22c44b(0x1ed)]()[_0x22c44b(0x207)](a9_0x568e39)[_0x22c44b(0x1e9)](_0x22c44b(0x1f9));});a9_0x568e39();'use strict';function a9_0x7c01(){const _0x40bf3c=['matrix','SET_TOPOLOGY','push','\x20Nodes\x20(Display\x20Names\x20restored).','length','10055660YJPUdD','16494oteIPf','stringify','search','13JWNSiz','exports','738HqYHvV','toString','sort','config','add','80792xNmoBv','parse','üï∏Ô∏è\x20Topology\x20unchanged.','from','4356636mtGiOs','sendToPythonWrapper','location','devices','(((.+)+)+)+$','20290764EyfsEk','includes','info','üï∏Ô∏è\x20Topology\x20Graph\x20updated:\x20','rooms','bewegung','type','36NQBJkx','monitored','setStateAsync','trim','indexOf','11NZRdRn','constructor','138863RSyaqu','apply','toLowerCase','log','debug','14aqZCky','val','1418770ETwLCg','7DJPLxr'];a9_0x7c01=function(){return _0x40bf3c;};return a9_0x7c01();}const setup=require('./setup');async function updateTopology(_0x1184d4){const _0x55f7f1=a9_0x58a2;_0x1184d4['log'][_0x55f7f1(0x20c)]('üï∏Ô∏è\x20Updating\x20Graph\x20Topology...');const _0x2be58c=_0x1184d4[_0x55f7f1(0x1ef)][_0x55f7f1(0x1f8)]||[],_0x7c3f27=new Set(),_0x4d8e19=new Set();_0x2be58c['forEach'](_0x2d2df1=>{const _0x444e63=_0x55f7f1;if(_0x2d2df1['location']&&_0x2d2df1['location'][_0x444e63(0x204)]()!==''){const _0x4d6eaf=_0x2d2df1[_0x444e63(0x1f7)][_0x444e63(0x204)]();_0x7c3f27[_0x444e63(0x1f0)](_0x4d6eaf),(_0x2d2df1[_0x444e63(0x200)]==='motion'||_0x2d2df1[_0x444e63(0x200)]&&_0x2d2df1['type'][_0x444e63(0x20a)]()[_0x444e63(0x1fb)](_0x444e63(0x1ff)))&&_0x4d8e19[_0x444e63(0x1f0)](_0x4d6eaf);}});const _0x193b31=Array['from'](_0x7c3f27)['sort'](),_0x4f545c=Array[_0x55f7f1(0x1f4)](_0x4d8e19)[_0x55f7f1(0x1ee)]();if(_0x193b31[_0x55f7f1(0x215)]===0x0){_0x1184d4[_0x55f7f1(0x20b)][_0x55f7f1(0x20c)]('üï∏Ô∏è\x20No\x20rooms\x20found\x20via\x20devices.\x20Topology\x20skipped.');return;}let _0x53ae6b={'rooms':[],'matrix':[]};try{const _0xc8617c=await _0x1184d4['getStateAsync']('analysis.topology.structure');_0xc8617c&&_0xc8617c['val']&&(_0x53ae6b=JSON[_0x55f7f1(0x1f2)](_0xc8617c[_0x55f7f1(0x20e)]));}catch(_0x582318){}const _0x30f71d=[],_0x19f00e=_0x193b31[_0x55f7f1(0x215)];for(let _0x3c09e0=0x0;_0x3c09e0<_0x19f00e;_0x3c09e0++){const _0x43d75e=[];for(let _0x50bb78=0x0;_0x50bb78<_0x19f00e;_0x50bb78++){let _0x338c90=_0x3c09e0===_0x50bb78?0x1:0x0;const _0x3ef260=_0x193b31[_0x3c09e0],_0x524fe6=_0x193b31[_0x50bb78],_0x4be434=_0x53ae6b['rooms']?_0x53ae6b[_0x55f7f1(0x1fe)][_0x55f7f1(0x205)](_0x3ef260):-0x1,_0x4ff17a=_0x53ae6b[_0x55f7f1(0x1fe)]?_0x53ae6b[_0x55f7f1(0x1fe)][_0x55f7f1(0x205)](_0x524fe6):-0x1;_0x4be434!==-0x1&&_0x4ff17a!==-0x1&&_0x53ae6b['matrix'][_0x4be434]&&_0x53ae6b[_0x55f7f1(0x211)][_0x4be434][_0x4ff17a]!==undefined&&(_0x338c90=_0x53ae6b[_0x55f7f1(0x211)][_0x4be434][_0x4ff17a]),_0x43d75e[_0x55f7f1(0x213)](_0x338c90);}_0x30f71d[_0x55f7f1(0x213)](_0x43d75e);}const _0x18c227={'updated':Date['now'](),'nodeCount':_0x19f00e,'rooms':_0x193b31,'matrix':_0x30f71d,'monitored':_0x4f545c};JSON[_0x55f7f1(0x1e8)](_0x18c227[_0x55f7f1(0x1fe)])!==JSON[_0x55f7f1(0x1e8)](_0x53ae6b[_0x55f7f1(0x1fe)])||JSON[_0x55f7f1(0x1e8)](_0x18c227[_0x55f7f1(0x211)])!==JSON['stringify'](_0x53ae6b[_0x55f7f1(0x211)])||JSON[_0x55f7f1(0x1e8)](_0x18c227[_0x55f7f1(0x202)])!==JSON[_0x55f7f1(0x1e8)](_0x53ae6b['monitored']||[])?(await _0x1184d4[_0x55f7f1(0x203)]('analysis.topology.structure',{'val':JSON['stringify'](_0x18c227),'ack':!![]}),_0x1184d4[_0x55f7f1(0x20b)][_0x55f7f1(0x1fc)](_0x55f7f1(0x1fd)+_0x19f00e+_0x55f7f1(0x214)),_0x1184d4[_0x55f7f1(0x1f6)]&&_0x1184d4[_0x55f7f1(0x1f6)](_0x55f7f1(0x212),_0x18c227)):_0x1184d4['log'][_0x55f7f1(0x20c)](_0x55f7f1(0x1f3));}module[a9_0x45bcb5(0x1eb)]={'updateTopology':updateTopology};