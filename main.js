const a0_0x1cb34e=a0_0x58bc;(function(_0x34b11e,_0x4bd41a){const _0x3a5f2f=a0_0x58bc,_0x22cfa7=_0x34b11e();while(!![]){try{const _0x26a177=parseInt(_0x3a5f2f(0x2d9))/0x1+parseInt(_0x3a5f2f(0x2b6))/0x2*(-parseInt(_0x3a5f2f(0x272))/0x3)+-parseInt(_0x3a5f2f(0x2a1))/0x4*(parseInt(_0x3a5f2f(0x1d2))/0x5)+-parseInt(_0x3a5f2f(0x22a))/0x6*(-parseInt(_0x3a5f2f(0x205))/0x7)+parseInt(_0x3a5f2f(0x2fd))/0x8*(parseInt(_0x3a5f2f(0x2da))/0x9)+-parseInt(_0x3a5f2f(0x2f1))/0xa*(parseInt(_0x3a5f2f(0x2b1))/0xb)+parseInt(_0x3a5f2f(0x279))/0xc;if(_0x26a177===_0x4bd41a)break;else _0x22cfa7['push'](_0x22cfa7['shift']());}catch(_0x4c7368){_0x22cfa7['push'](_0x22cfa7['shift']());}}}(a0_0x12b4,0x9666c));function a0_0x58bc(_0x579a4a,_0x2a723d){const _0x522cea=a0_0x12b4();return a0_0x58bc=function(_0x388a7d,_0x38eea2){_0x388a7d=_0x388a7d-0x1b2;let _0x12b434=_0x522cea[_0x388a7d];return _0x12b434;},a0_0x58bc(_0x579a4a,_0x2a723d);}const a0_0x38eea2=(function(){let _0x357a45=!![];return function(_0x4d56db,_0x4e4308){const _0xc69c0c=_0x357a45?function(){const _0x959e9d=a0_0x58bc;if(_0x4e4308){const _0x522e51=_0x4e4308[_0x959e9d(0x243)](_0x4d56db,arguments);return _0x4e4308=null,_0x522e51;}}:function(){};return _0x357a45=![],_0xc69c0c;};}()),a0_0x388a7d=a0_0x38eea2(this,function(){const _0x1137e1=a0_0x58bc;return a0_0x388a7d['toString']()[_0x1137e1(0x1c1)](_0x1137e1(0x22b))[_0x1137e1(0x1be)]()[_0x1137e1(0x1cc)](a0_0x388a7d)[_0x1137e1(0x1c1)](_0x1137e1(0x22b));});a0_0x388a7d();'use strict';const utils=require(a0_0x1cb34e(0x1ea)),{GoogleGenerativeAI}=require('@google/generative-ai'),installer=require('./lib/installer'),scanner=require(a0_0x1cb34e(0x299)),schedulers=require(a0_0x1cb34e(0x275)),topology=require('./lib/topology'),setup=require(a0_0x1cb34e(0x2a7)),recorder=require(a0_0x1cb34e(0x1c9)),pythonBridge=require('./lib/python_bridge'),aiAgent=require('./lib/ai_agent'),deadMan=require(a0_0x1cb34e(0x1e6)),automation=require(a0_0x1cb34e(0x2d7)),GEMINI_MODEL=a0_0x1cb34e(0x207),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x1cb34e(0x1f3)]{constructor(_0x31912e){const _0xce686a=a0_0x1cb34e;super({..._0x31912e,'name':'cogni-living'}),this[_0xce686a(0x215)]=[],this[_0xce686a(0x1d1)]=[],this['rawEventLog']=[],this['dailyDigests']=[],this[_0xce686a(0x1b8)]={},this[_0xce686a(0x2b7)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this['exitTimer']=null,this[_0xce686a(0x30b)]=null,this[_0xce686a(0x22c)]=![],this[_0xce686a(0x1d4)]=null,this['geminiModel']=null,this[_0xce686a(0x2e6)]=setup[_0xce686a(0x2f9)][_0xce686a(0x1ee)],this['isProVersion']=![],this[_0xce686a(0x1c6)]=![],this[_0xce686a(0x2ae)]=null,this[_0xce686a(0x2f3)]=null,this[_0xce686a(0x1f5)]=null,this[_0xce686a(0x1b7)]=null,this[_0xce686a(0x1d0)]=null,this[_0xce686a(0x2d0)]=null,this[_0xce686a(0x20b)]=null,this['dependencyInstallInProgress']=![],this[_0xce686a(0x226)]=Date['now'](),this[_0xce686a(0x2fa)]=null,this['bootTime']=Date[_0xce686a(0x229)](),this[_0xce686a(0x290)]=![],this[_0xce686a(0x286)]=[],this['on'](_0xce686a(0x1b5),this[_0xce686a(0x2f2)][_0xce686a(0x1cd)](this)),this['on'](_0xce686a(0x271),this['onStateChange'][_0xce686a(0x1cd)](this)),this['on'](_0xce686a(0x2a2),this[_0xce686a(0x1c7)][_0xce686a(0x1cd)](this)),this['on'](_0xce686a(0x292),this[_0xce686a(0x1b9)]['bind'](this));}async[a0_0x1cb34e(0x2f2)](){const _0x4d3e82=a0_0x1cb34e;this[_0x4d3e82(0x28f)][_0x4d3e82(0x2c5)](_0x4d3e82(0x1e0)+this[_0x4d3e82(0x2fc)]+_0x4d3e82(0x2f4));if(!installer['checkAndInstall'](this,()=>this[_0x4d3e82(0x24c)]()))return;}async[a0_0x1cb34e(0x24c)](){const _0xfdab02=a0_0x1cb34e;await setup[_0xfdab02(0x2a0)](this);try{this[_0xfdab02(0x1c4)]=await setup[_0xfdab02(0x1d3)](this['config'][_0xfdab02(0x25b)]);}catch(_0x16fbf8){}if(!this['config']['inactivityThresholdHours']||this[_0xfdab02(0x308)][_0xfdab02(0x23b)]<0.1)this[_0xfdab02(0x308)][_0xfdab02(0x23b)]=0xc;await setup[_0xfdab02(0x227)](this),await setup[_0xfdab02(0x2a5)](this);try{const _0x236606=await this[_0xfdab02(0x244)]('analysis.energy.warmupTimes'),_0x33f256=await this['getStateAsync'](_0xfdab02(0x2e7));_0x236606&&_0x236606['val']&&_0x33f256&&_0x33f256['val']&&(Date[_0xfdab02(0x229)]()-_0x236606['ts']<0x4*0xe10*0x3e8&&(this['memoryCache']={'times':JSON[_0xfdab02(0x255)](_0x236606['val']),'sources':JSON[_0xfdab02(0x255)](_0x33f256['val'])},this[_0xfdab02(0x28f)][_0xfdab02(0x2c5)]('ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20'+Object[_0xfdab02(0x21f)](this[_0xfdab02(0x2fa)][_0xfdab02(0x214)])['length']+_0xfdab02(0x1bb))));}catch(_0x5e86b7){this[_0xfdab02(0x28f)][_0xfdab02(0x273)](_0xfdab02(0x2e1)+_0x5e86b7['message']);}if(this[_0xfdab02(0x308)][_0xfdab02(0x28b)])try{this[_0xfdab02(0x1d4)]=new GoogleGenerativeAI(this[_0xfdab02(0x308)][_0xfdab02(0x28b)]),this[_0xfdab02(0x29a)]=this[_0xfdab02(0x1d4)][_0xfdab02(0x27d)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0xfdab02(0x298)}}),this[_0xfdab02(0x28f)]['info']('Gemini\x20AI\x20initialized.');}catch(_0x1f5a7f){this[_0xfdab02(0x28f)][_0xfdab02(0x2d8)]('Gemini\x20Init\x20Error:\x20'+_0x1f5a7f[_0xfdab02(0x292)]);}await setup[_0xfdab02(0x2de)](this),await this[_0xfdab02(0x1db)](),await this[_0xfdab02(0x210)](_0xfdab02(0x2ad),{'type':'state','common':{'name':_0xfdab02(0x22d),'type':_0xfdab02(0x2ee),'role':_0xfdab02(0x220),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0xfdab02(0x217),{'type':_0xfdab02(0x28a),'common':{'name':_0xfdab02(0x29c),'type':_0xfdab02(0x2ee),'role':_0xfdab02(0x220),'read':!![],'write':![]},'native':{}}),await this[_0xfdab02(0x210)](_0xfdab02(0x1fb),{'type':'state','common':{'name':_0xfdab02(0x2b9),'type':_0xfdab02(0x2ee),'role':_0xfdab02(0x220),'read':!![],'write':![]},'native':{}}),await this[_0xfdab02(0x210)]('analysis.energy.warmupTargets',{'type':_0xfdab02(0x28a),'common':{'name':'Warm-Up\x20Target\x20Temps\x20(JSON)','type':'string','role':'json','read':!![],'write':!![],'def':'{\x22default\x22:\x2021}'},'native':{}}),await this[_0xfdab02(0x210)](_0xfdab02(0x1f9),{'type':_0xfdab02(0x28a),'common':{'name':_0xfdab02(0x23e),'type':'string','role':'json','read':!![],'write':![],'def':'{}'},'native':{}}),await this['setObjectNotExistsAsync'](_0xfdab02(0x247),{'type':_0xfdab02(0x28a),'common':{'name':'General\x20Activity\x20Trend\x20(%)','type':'number','role':_0xfdab02(0x27b),'unit':'%','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0xfdab02(0x2ac),{'type':'state','common':{'name':_0xfdab02(0x285),'type':_0xfdab02(0x2ee),'role':_0xfdab02(0x231),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.energy.activeEnforcements',{'type':'state','common':{'name':_0xfdab02(0x29d),'type':_0xfdab02(0x2ee),'role':_0xfdab02(0x220),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0xfdab02(0x210)](_0xfdab02(0x26d),{'type':_0xfdab02(0x28a),'common':{'name':_0xfdab02(0x2a8),'type':'string','role':_0xfdab02(0x220),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0xfdab02(0x288),{'type':_0xfdab02(0x28a),'common':{'name':_0xfdab02(0x2e2),'type':_0xfdab02(0x2ee),'role':'text','read':!![],'write':![]},'native':{}});try{const _0xbbdb41=await this['getStateAsync'](_0xfdab02(0x242));if(_0xbbdb41&&_0xbbdb41['val'])this[_0xfdab02(0x224)]=JSON[_0xfdab02(0x255)](_0xbbdb41[_0xfdab02(0x2b2)]);}catch(_0x5d2275){this[_0xfdab02(0x224)]=[];}try{const _0x34d813=await this[_0xfdab02(0x244)](_0xfdab02(0x264));if(_0x34d813&&_0x34d813[_0xfdab02(0x2b2)])this['dailyDigests']=JSON[_0xfdab02(0x255)](_0x34d813['val']);}catch(_0x53662a){this[_0xfdab02(0x2b5)]=[];}const _0x18f805=this['dailyDigests']['length']>=(this[_0xfdab02(0x308)][_0xfdab02(0x2e0)]||0x7)?_0xfdab02(0x239)+this[_0xfdab02(0x2b5)][_0xfdab02(0x277)]+_0xfdab02(0x237):_0xfdab02(0x29b)+this[_0xfdab02(0x2b5)][_0xfdab02(0x277)]+'/'+(this[_0xfdab02(0x308)][_0xfdab02(0x2e0)]||0x7)+')';await this[_0xfdab02(0x25f)]('LTM.baselineStatus',{'val':_0x18f805,'ack':!![]}),this[_0xfdab02(0x21b)]('analysis.trigger'),this[_0xfdab02(0x21b)]('LTM.triggerDailyDigest'),this[_0xfdab02(0x21b)](_0xfdab02(0x29f)),this[_0xfdab02(0x21b)]('analysis.triggerBriefing'),this[_0xfdab02(0x21b)]('analysis.automation.triggerAction'),this['subscribeStates'](_0xfdab02(0x1f0)),this[_0xfdab02(0x21b)](_0xfdab02(0x297)),this[_0xfdab02(0x21b)](_0xfdab02(0x1b2)),this['subscribeStates']('analysis.training.triggerEnergy'),this['subscribeStates'](_0xfdab02(0x259)),this['subscribeStates'](_0xfdab02(0x2c7)),this[_0xfdab02(0x21b)](_0xfdab02(0x204)),this['subscribeStates'](_0xfdab02(0x2e7));this[_0xfdab02(0x308)][_0xfdab02(0x20e)]&&this[_0xfdab02(0x308)][_0xfdab02(0x26b)]&&(this[_0xfdab02(0x28f)][_0xfdab02(0x2c5)](_0xfdab02(0x2eb)+this[_0xfdab02(0x308)][_0xfdab02(0x26b)]),this[_0xfdab02(0x1c0)](this['config'][_0xfdab02(0x26b)]));const _0x5bd0a4=this[_0xfdab02(0x308)][_0xfdab02(0x211)];if(_0x5bd0a4)for(const _0x4b8f4f of _0x5bd0a4){await this['subscribeForeignStatesAsync'](_0x4b8f4f['id']);}const _0x352a40=this[_0xfdab02(0x308)][_0xfdab02(0x2d4)];if(_0x352a40)for(const _0x1ba3f3 of _0x352a40){await this[_0xfdab02(0x221)](_0x1ba3f3);}if(this['config'][_0xfdab02(0x29e)]&&this[_0xfdab02(0x308)][_0xfdab02(0x1bd)])await this[_0xfdab02(0x221)](this[_0xfdab02(0x308)][_0xfdab02(0x1bd)]+_0xfdab02(0x307));setTimeout(()=>this[_0xfdab02(0x1ed)](),0x1388);if(this[_0xfdab02(0x2ae)])clearInterval(this['analysisTimer']);const _0x18b930=this['config'][_0xfdab02(0x28d)]||0xf;_0x18b930>0x0&&(this[_0xfdab02(0x2ae)]=setInterval(()=>{const _0x187ce3=_0xfdab02;this[_0x187ce3(0x22f)](),automation[_0x187ce3(0x278)](this),automation[_0x187ce3(0x2f5)](this);},_0x18b930*0x3c*0x3e8));setTimeout(()=>{const _0x41282f=_0xfdab02;automation[_0x41282f(0x278)](this),automation[_0x41282f(0x2f5)](this);},0x2710);this['config'][_0xfdab02(0x2c9)]!==![]&&(this[_0xfdab02(0x2d0)]=setInterval(()=>{const _0x8dc288=_0xfdab02;if(this[_0x8dc288(0x1c4)]){const _0x3b4e18=Date['now'](),_0x4db8d8=this[_0x8dc288(0x226)]||_0x3b4e18,_0x5c2490=(_0x3b4e18-_0x4db8d8)/0x3e8;_0x5c2490>0x2&&(this[_0x8dc288(0x226)]=_0x3b4e18,pythonBridge[_0x8dc288(0x2a4)](this,_0x8dc288(0x2cc),{'room':null,'dt':_0x5c2490}));}},0xbb8));if(this[_0xfdab02(0x20b)])clearInterval(this[_0xfdab02(0x20b)]);this[_0xfdab02(0x20b)]=setInterval(()=>{const _0x105144=_0xfdab02;this[_0x105144(0x1c4)]&&(this[_0x105144(0x28f)][_0x105144(0x2c5)](_0x105144(0x2d6)),this[_0x105144(0x202)]());},0x4*0x3c*0x3c*0x3e8),schedulers[_0xfdab02(0x27e)](this,()=>aiAgent['createDailyDigest'](this,pythonBridge)),schedulers[_0xfdab02(0x1f4)](this),schedulers['setupDriftAnalysisScheduler'](this,()=>aiAgent[_0xfdab02(0x222)](this)),schedulers[_0xfdab02(0x2e8)](this,()=>aiAgent['sendMorningBriefing'](this)),pythonBridge[_0xfdab02(0x2a6)](this,installer[_0xfdab02(0x1d7)]),setTimeout(async()=>{const _0x44b7ff=_0xfdab02;await topology['updateTopology'](this);try{const _0x509d19=await this[_0x44b7ff(0x244)](_0x44b7ff(0x2d3));if(_0x509d19&&_0x509d19[_0x44b7ff(0x2b2)])pythonBridge[_0x44b7ff(0x2a4)](this,_0x44b7ff(0x258),JSON[_0x44b7ff(0x255)](_0x509d19['val']));}catch(_0x14789d){}this[_0x44b7ff(0x202)](),this[_0x44b7ff(0x2ed)](),this[_0x44b7ff(0x1de)](),this[_0x44b7ff(0x257)]();},0x1388);}[a0_0x1cb34e(0x1c7)](_0x1b87fb){const _0x18caaa=a0_0x1cb34e;if(this[_0x18caaa(0x2ae)])clearInterval(this['analysisTimer']);if(this[_0x18caaa(0x1b7)])clearInterval(this['driftAnalysisTimer']);if(this[_0x18caaa(0x2d0)])clearInterval(this[_0x18caaa(0x2d0)]);if(this[_0x18caaa(0x20b)])clearInterval(this[_0x18caaa(0x20b)]);if(this[_0x18caaa(0x2f3)])this[_0x18caaa(0x2f3)][_0x18caaa(0x218)]();if(this[_0x18caaa(0x1f5)])this[_0x18caaa(0x1f5)]['cancel']();if(this[_0x18caaa(0x1d0)])this[_0x18caaa(0x1d0)][_0x18caaa(0x218)]();recorder[_0x18caaa(0x2d2)](this),pythonBridge['stopService'](this),_0x1b87fb();}async[a0_0x1cb34e(0x254)](_0x8ea610,_0x3a6d1b){const _0x11d3f7=a0_0x1cb34e;if(!_0x3a6d1b||this[_0x11d3f7(0x2be)])return;if(_0x8ea610[_0x11d3f7(0x294)]('telegram')&&_0x8ea610['endsWith']('communicate.request')&&_0x3a6d1b[_0x11d3f7(0x2b2)])return;if(this['config'][_0x11d3f7(0x20e)]&&_0x8ea610===this[_0x11d3f7(0x308)][_0x11d3f7(0x26b)]){this['handleInfrasound'](_0x3a6d1b[_0x11d3f7(0x2b2)]);return;}if(_0x8ea610===this['namespace']+_0x11d3f7(0x241)){if(_0x3a6d1b[_0x11d3f7(0x2b2)]&&Object[_0x11d3f7(0x1e5)](setup[_0x11d3f7(0x2f9)])['includes'](_0x3a6d1b[_0x11d3f7(0x2b2)])){this['currentSystemMode']=_0x3a6d1b['val'];if(_0x3a6d1b[_0x11d3f7(0x2b2)]===setup[_0x11d3f7(0x2f9)][_0x11d3f7(0x25e)])await recorder[_0x11d3f7(0x208)](this,![]);else await recorder[_0x11d3f7(0x208)](this,!![]);if(this[_0x11d3f7(0x1c4)]){let _0x32f2f7=![],_0x12e784=0x0,_0x15c870=_0x11d3f7(0x266);if(this[_0x11d3f7(0x2e6)]===_0x11d3f7(0x28e))_0x32f2f7=!![],_0x12e784=0x168,_0x15c870=_0x11d3f7(0x2f7);else this['currentSystemMode']===_0x11d3f7(0x2c0)&&(_0x32f2f7=!![],_0x12e784=0x5a0,_0x15c870=_0x11d3f7(0x2d5));pythonBridge[_0x11d3f7(0x2a4)](this,_0x11d3f7(0x27a),{'active':_0x32f2f7,'duration':_0x12e784,'label':_0x15c870}),await this[_0x11d3f7(0x25f)](_0x11d3f7(0x300),{'val':JSON[_0x11d3f7(0x240)]({'active':_0x32f2f7,'label':_0x15c870,'timestamp':Date['now']()}),'ack':!![]});}}if(!_0x3a6d1b[_0x11d3f7(0x2af)])this['setState'](_0x8ea610,{'val':this['currentSystemMode'],'ack':!![]});return;}_0x8ea610[_0x11d3f7(0x2e9)](_0x11d3f7(0x2e7))&&_0x3a6d1b['ack']&&this[_0x11d3f7(0x2b4)](_0x3a6d1b[_0x11d3f7(0x2b2)]);if(!_0x3a6d1b[_0x11d3f7(0x2af)]){if(_0x8ea610[_0x11d3f7(0x294)](_0x11d3f7(0x23c))&&_0x3a6d1b['val']){this[_0x11d3f7(0x2ab)](_0x8ea610,{'val':![],'ack':!![]}),aiAgent[_0x11d3f7(0x268)](this);return;}if(_0x8ea610[_0x11d3f7(0x294)](_0x11d3f7(0x261))&&_0x3a6d1b[_0x11d3f7(0x2b2)]){this[_0x11d3f7(0x2ab)](_0x8ea610,{'val':![],'ack':!![]});if(this[_0x11d3f7(0x1c4)])aiAgent[_0x11d3f7(0x2d1)](this,pythonBridge);return;}if(_0x8ea610[_0x11d3f7(0x294)](_0x11d3f7(0x203))&&_0x3a6d1b[_0x11d3f7(0x2b2)]){this[_0x11d3f7(0x2ab)](_0x8ea610,{'val':![],'ack':!![]}),aiAgent[_0x11d3f7(0x276)](this);return;}if(_0x8ea610[_0x11d3f7(0x294)](_0x11d3f7(0x1e8))&&_0x3a6d1b[_0x11d3f7(0x2b2)]){this['setState'](_0x8ea610,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this);return;}if(_0x8ea610[_0x11d3f7(0x294)](_0x11d3f7(0x297))&&_0x3a6d1b[_0x11d3f7(0x2b2)]){this[_0x11d3f7(0x2ab)](_0x8ea610,{'val':![],'ack':!![]});if(this[_0x11d3f7(0x1c4)])try{const _0x35b3e3=await this['getStateAsync'](_0x11d3f7(0x253));if(_0x35b3e3&&_0x35b3e3[_0x11d3f7(0x2b2)]){const _0x119e2f=JSON[_0x11d3f7(0x255)](_0x35b3e3[_0x11d3f7(0x2b2)]);this[_0x11d3f7(0x25f)](_0x11d3f7(0x2ec),{'val':_0x11d3f7(0x1fe),'ack':!![]}),pythonBridge[_0x11d3f7(0x2a4)](this,_0x11d3f7(0x2a9),{'sequences':_0x119e2f});}}catch(_0x2094c7){}return;}if(_0x8ea610['includes']('analysis.training.triggerHealth')&&_0x3a6d1b[_0x11d3f7(0x2b2)]){this['setState'](_0x8ea610,{'val':![],'ack':!![]});if(this[_0x11d3f7(0x1c4)])try{const _0x24863a=await this['getStateAsync'](_0x11d3f7(0x264));if(_0x24863a&&_0x24863a[_0x11d3f7(0x2b2)])pythonBridge[_0x11d3f7(0x2a4)](this,_0x11d3f7(0x289),{'digests':JSON['parse'](_0x24863a[_0x11d3f7(0x2b2)])});}catch(_0x13f32e){}return;}if(_0x8ea610[_0x11d3f7(0x294)]('analysis.training.triggerEnergy')&&_0x3a6d1b['val']){this[_0x11d3f7(0x2ab)](_0x8ea610,{'val':![],'ack':!![]});if(this[_0x11d3f7(0x1c4)])try{const _0x2d7198=await this[_0x11d3f7(0x244)](_0x11d3f7(0x1c3));if(_0x2d7198&&_0x2d7198[_0x11d3f7(0x2b2)])pythonBridge[_0x11d3f7(0x2a4)](this,_0x11d3f7(0x2df),{'points':JSON[_0x11d3f7(0x255)](_0x2d7198[_0x11d3f7(0x2b2)])});}catch(_0x4c9650){}return;}if(_0x8ea610[_0x11d3f7(0x294)](_0x11d3f7(0x259))&&_0x3a6d1b['val']){this[_0x11d3f7(0x2ab)](_0x8ea610,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x575644=await this[_0x11d3f7(0x244)](_0x11d3f7(0x242));if(_0x575644&&_0x575644['val']){const _0x417f0f={};this[_0x11d3f7(0x308)]['devices']&&Array[_0x11d3f7(0x232)](this['config']['devices'])&&this[_0x11d3f7(0x308)][_0x11d3f7(0x211)]['forEach'](_0x194094=>{const _0x37bd92=_0x11d3f7;if(_0x194094['id']&&_0x194094[_0x37bd92(0x1fa)])_0x417f0f[_0x194094['id']]=_0x194094[_0x37bd92(0x1fa)];}),this['log'][_0x11d3f7(0x2c5)]('ðŸ¤–\x20Butler\x20Training\x20started.\x20Injecting\x20knowledge\x20about\x20'+Object[_0x11d3f7(0x21f)](_0x417f0f)[_0x11d3f7(0x277)]+_0x11d3f7(0x209)),pythonBridge[_0x11d3f7(0x2a4)](this,_0x11d3f7(0x2f8),{'events':JSON[_0x11d3f7(0x255)](_0x575644[_0x11d3f7(0x2b2)]),'deviceMap':_0x417f0f});}}catch(_0x18fddd){this[_0x11d3f7(0x28f)][_0x11d3f7(0x2d8)](_0x11d3f7(0x2ba)+_0x18fddd['message']);}return;}if(_0x8ea610[_0x11d3f7(0x294)](_0x11d3f7(0x2c7))&&_0x3a6d1b[_0x11d3f7(0x2b2)]){this[_0x11d3f7(0x2ab)](_0x8ea610,{'val':![],'ack':!![]}),topology[_0x11d3f7(0x267)](this);if(this[_0x11d3f7(0x1c4)])try{const _0x531363=await this['getStateAsync'](_0x11d3f7(0x253));if(_0x531363&&_0x531363[_0x11d3f7(0x2b2)]){const _0x391594=JSON[_0x11d3f7(0x255)](_0x531363['val']);this['log']['info'](_0x11d3f7(0x20c)+_0x391594['length']+_0x11d3f7(0x1da)),pythonBridge['send'](this,_0x11d3f7(0x2bd),{'sequences':_0x391594});}else this[_0x11d3f7(0x28f)][_0x11d3f7(0x273)](_0x11d3f7(0x2fb));}catch(_0x4cd5b2){this[_0x11d3f7(0x28f)][_0x11d3f7(0x2d8)](_0x11d3f7(0x2ea)+_0x4cd5b2[_0x11d3f7(0x292)]);}return;}}if(this['config'][_0x11d3f7(0x2d4)]&&this[_0x11d3f7(0x308)][_0x11d3f7(0x2d4)][_0x11d3f7(0x294)](_0x8ea610)){await this[_0x11d3f7(0x1ed)]();return;}const _0x647589=(this[_0x11d3f7(0x308)][_0x11d3f7(0x211)]||[])[_0x11d3f7(0x1d5)](_0x5c9915=>_0x5c9915['id']===_0x8ea610);if(_0x647589){const _0x223747=await recorder['processSensorEvent'](this,_0x8ea610,_0x3a6d1b,_0x647589);_0x223747&&_0x223747[_0x11d3f7(0x1fa)]===_0x11d3f7(0x1dd)&&_0x223747[_0x11d3f7(0x260)]&&this[_0x11d3f7(0x1c4)]&&deadMan[_0x11d3f7(0x302)](this,_0x223747['location']),_0x3a6d1b['val']&&(_0x3a6d1b['val']===!![]||_0x3a6d1b[_0x11d3f7(0x2b2)]===0x1||String(_0x3a6d1b['val'])['toLowerCase']()===_0x11d3f7(0x295))&&(_0x647589[_0x11d3f7(0x1fa)]&&(_0x647589[_0x11d3f7(0x1fa)][_0x11d3f7(0x294)](_0x11d3f7(0x245))||_0x647589[_0x11d3f7(0x1fa)][_0x11d3f7(0x294)](_0x11d3f7(0x1cf))||_0x647589[_0x11d3f7(0x1fa)]['includes'](_0x11d3f7(0x2c1)))&&this['analyzeWindowOpening'](_0x647589)),(_0x647589[_0x11d3f7(0x1fa)]===_0x11d3f7(0x252)||_0x647589[_0x11d3f7(0x1fa)]==='thermostat')&&automation[_0x11d3f7(0x269)](this);}}async[a0_0x1cb34e(0x2b4)](_0x401afc){const _0x381064=a0_0x1cb34e;if(!this[_0x381064(0x2fa)]||Date[_0x381064(0x229)]()-this[_0x381064(0x306)]>0x493e0)return;if(!this['memoryCache'][_0x381064(0x2f0)]||!this[_0x381064(0x2fa)][_0x381064(0x214)])return;try{const _0xd918a6=JSON['parse'](_0x401afc),_0x53f6e8=this[_0x381064(0x2fa)][_0x381064(0x2f0)];let _0x505863=![];for(const _0x2cf39b in _0x53f6e8){if(_0x53f6e8[_0x2cf39b][_0x381064(0x294)]('AI')&&_0xd918a6[_0x2cf39b]&&!_0xd918a6[_0x2cf39b]['includes']('AI')){_0x505863=!![];break;}}_0x505863&&(this[_0x381064(0x28f)]['info']('ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).'),await this['setStateAsync'](_0x381064(0x1fb),{'val':JSON['stringify'](this[_0x381064(0x2fa)][_0x381064(0x214)]),'ack':!![]}),await this[_0x381064(0x25f)](_0x381064(0x2e7),{'val':JSON[_0x381064(0x240)](this[_0x381064(0x2fa)][_0x381064(0x2f0)]),'ack':!![]}));}catch(_0x5dad14){}}async[a0_0x1cb34e(0x1b9)](_0x8170a4){const _0x209185=a0_0x1cb34e;if(typeof _0x8170a4==='object'&&_0x8170a4['message']){if(_0x8170a4['command']===_0x209185(0x304))try{const _0x165a8c=await automation[_0x209185(0x200)](this);this[_0x209185(0x2ef)](_0x8170a4[_0x209185(0x248)],_0x8170a4['command'],{'success':!![],'results':_0x165a8c},_0x8170a4[_0x209185(0x2ce)]);}catch(_0x2a04fe){this['sendTo'](_0x8170a4['from'],_0x8170a4['command'],{'success':![],'error':_0x2a04fe[_0x209185(0x292)]},_0x8170a4[_0x209185(0x2ce)]);}else{if(_0x8170a4[_0x209185(0x1e4)]===_0x209185(0x246))try{const {current_temps:_0x1ffcbe,t_out:_0x3c4850,targets:_0x570aa9,t_forecast:_0x2ccb09}=_0x8170a4[_0x209185(0x292)],_0x576135=[];let _0x105564={};try{const _0x49e226=await this['getStateAsync'](_0x209185(0x2bb));if(_0x49e226&&_0x49e226['val']){const _0x38e1ef=JSON[_0x209185(0x255)](_0x49e226[_0x209185(0x2b2)]);_0x105564=_0x38e1ef[_0x209185(0x1e3)]||_0x38e1ef;}}catch(_0x5e1bad){}const _0x331ac3=_0x2ccb09!==undefined&&_0x2ccb09!==null?(_0x3c4850+_0x2ccb09)/0x2:_0x3c4850;for(const [_0x507488,_0x2c861e]of Object['entries'](_0x1ffcbe)){const _0x373ae5=_0x570aa9[_0x507488]||0x15;if(_0x2c861e<=_0x373ae5)continue;let _0x20d9ff=_0x105564[_0x507488]||-0.5;if(_0x20d9ff>=0x0)_0x20d9ff=-0.5;const _0x33bfdc=Math['abs'](_0x20d9ff),_0x4b08d8=_0x2c861e-_0x373ae5;let _0x1e0657=Math[_0x209185(0x1c2)](_0x4b08d8/_0x33bfdc*0x3c);const _0x5d8e92=_0x2c861e-_0x3c4850,_0x13ba3e=_0x2c861e-_0x331ac3;if(_0x13ba3e!==0x0&&_0x5d8e92!==0x0){const _0x2a23bd=_0x5d8e92/_0x13ba3e;_0x1e0657=Math[_0x209185(0x1c2)](_0x1e0657*_0x2a23bd);}if(_0x1e0657>0xf){if(_0x1e0657>0xf0)_0x1e0657=0xf0;_0x576135[_0x209185(0x21e)]({'room':_0x507488,'minutes_safe':_0x1e0657,'target':_0x373ae5,'current':_0x2c861e,'savings_msg':_0x209185(0x1b3)+_0x1e0657+_0x209185(0x228)});}}_0x576135[_0x209185(0x25d)]((_0x275d1c,_0x5f1c59)=>_0x5f1c59[_0x209185(0x236)]-_0x275d1c['minutes_safe']),this[_0x209185(0x2ef)](_0x8170a4[_0x209185(0x248)],_0x8170a4[_0x209185(0x1e4)],{'success':!![],'proposals':_0x576135},_0x8170a4[_0x209185(0x2ce)]);}catch(_0x1911da){this['sendTo'](_0x8170a4[_0x209185(0x248)],_0x8170a4[_0x209185(0x1e4)],{'success':![],'error':_0x1911da[_0x209185(0x292)]},_0x8170a4['callback']);}else{if(_0x8170a4[_0x209185(0x1e4)]==='refreshCalendar')try{await automation[_0x209185(0x274)](this),this[_0x209185(0x2ef)](_0x8170a4['from'],_0x8170a4['command'],{'success':!![]},_0x8170a4[_0x209185(0x2ce)]);}catch(_0x2f4bd2){this[_0x209185(0x2ef)](_0x8170a4['from'],_0x8170a4[_0x209185(0x1e4)],{'success':![],'error':_0x2f4bd2[_0x209185(0x292)]},_0x8170a4[_0x209185(0x2ce)]);}else{if(_0x8170a4['command']===_0x209185(0x20f))try{const _0x3920ce=_0x8170a4[_0x209185(0x292)][_0x209185(0x21d)],_0x1114bf=_0x209185(0x1f9),_0x437a23=await this[_0x209185(0x244)](_0x1114bf);let _0x55f929={};if(_0x437a23&&_0x437a23[_0x209185(0x2b2)])try{_0x55f929=JSON[_0x209185(0x255)](_0x437a23['val']);}catch(_0x1b46a5){}_0x3920ce&&_0x55f929[_0x3920ce]?(delete _0x55f929[_0x3920ce],await this[_0x209185(0x25f)](_0x1114bf,{'val':JSON[_0x209185(0x240)](_0x55f929),'ack':!![]}),this[_0x209185(0x28f)][_0x209185(0x2c5)](_0x209185(0x305)+_0x3920ce+_0x209185(0x26f)),this[_0x209185(0x2ef)](_0x8170a4[_0x209185(0x248)],_0x8170a4[_0x209185(0x1e4)],{'success':!![]},_0x8170a4[_0x209185(0x2ce)])):this['sendTo'](_0x8170a4[_0x209185(0x248)],_0x8170a4[_0x209185(0x1e4)],{'success':![],'error':'Key\x20not\x20found\x20or\x20not\x20provided'},_0x8170a4[_0x209185(0x2ce)]);}catch(_0x3a5560){this['sendTo'](_0x8170a4['from'],_0x8170a4[_0x209185(0x1e4)],{'success':![],'error':_0x3a5560[_0x209185(0x292)]},_0x8170a4['callback']);}else{if(_0x8170a4[_0x209185(0x1e4)]===_0x209185(0x26c))await this['setStateAsync'](_0x209185(0x24a),{'val':![],'ack':!![]}),await this[_0x209185(0x25f)](_0x209185(0x21a),{'val':'','ack':!![]}),await this[_0x209185(0x25f)](_0x209185(0x2e5),{'val':'','ack':!![]}),this[_0x209185(0x2ef)](_0x8170a4[_0x209185(0x248)],_0x8170a4[_0x209185(0x1e4)],{'success':!![]},_0x8170a4['callback']);else{if(_0x8170a4['command']===_0x209185(0x281)){const {targetId:_0x9ca7f9,targetValue:_0x62c8f9}=_0x8170a4[_0x209185(0x292)];await this[_0x209185(0x25f)](_0x209185(0x24a),{'val':!![],'ack':!![]}),await this[_0x209185(0x25f)]('analysis.automation.description',{'val':_0x209185(0x2bf),'ack':!![]}),await this[_0x209185(0x25f)]('analysis.automation.targetId',{'val':_0x9ca7f9,'ack':!![]}),await this[_0x209185(0x25f)](_0x209185(0x1cb),{'val':String(_0x62c8f9),'ack':!![]}),this[_0x209185(0x2ef)](_0x8170a4[_0x209185(0x248)],_0x8170a4[_0x209185(0x1e4)],{'success':!![]},_0x8170a4[_0x209185(0x2ce)]);}else{if(_0x8170a4[_0x209185(0x1e4)]===_0x209185(0x1bf))try{const _0x14fd4a=_0x8170a4[_0x209185(0x292)][_0x209185(0x2cf)];if(!_0x14fd4a)throw new Error(_0x209185(0x1eb));const _0x182e92=new GoogleGenerativeAI(_0x14fd4a),_0x337b1e=_0x182e92[_0x209185(0x27d)]({'model':GEMINI_MODEL}),_0x12004e=await _0x337b1e[_0x209185(0x28c)](_0x209185(0x30a)),_0x5a4bfc=await _0x12004e['response'];if(_0x5a4bfc[_0x209185(0x231)]())this['sendTo'](_0x8170a4['from'],_0x8170a4[_0x209185(0x1e4)],{'success':!![],'message':_0x209185(0x1ca)},_0x8170a4[_0x209185(0x2ce)]);else throw new Error(_0x209185(0x238));}catch(_0x2ec230){this[_0x209185(0x2ef)](_0x8170a4[_0x209185(0x248)],_0x8170a4[_0x209185(0x1e4)],{'success':![],'message':_0x2ec230[_0x209185(0x292)]},_0x8170a4[_0x209185(0x2ce)]);}else{if(_0x8170a4[_0x209185(0x1e4)]===_0x209185(0x283))try{const _0x4dfef2=await scanner['scanForDevices'](this,_0x8170a4[_0x209185(0x292)]||{});this[_0x209185(0x2ef)](_0x8170a4[_0x209185(0x248)],_0x8170a4[_0x209185(0x1e4)],{'success':!![],'devices':_0x4dfef2},_0x8170a4[_0x209185(0x2ce)]);}catch(_0x3bd547){this[_0x209185(0x2ef)](_0x8170a4[_0x209185(0x248)],_0x8170a4[_0x209185(0x1e4)],{'success':![],'error':_0x3bd547[_0x209185(0x292)]},_0x8170a4['callback']);}else{if(_0x8170a4[_0x209185(0x1e4)]===_0x209185(0x230))try{const {matrix:_0x4ee2a1}=_0x8170a4[_0x209185(0x292)],_0x131149=await this[_0x209185(0x244)](_0x209185(0x2d3));if(_0x131149&&_0x131149[_0x209185(0x2b2)]){const _0x5a9291=JSON['parse'](_0x131149[_0x209185(0x2b2)]);_0x5a9291[_0x209185(0x23d)]=_0x4ee2a1,_0x5a9291[_0x209185(0x303)]=Date[_0x209185(0x229)](),await this['setStateAsync'](_0x209185(0x2d3),{'val':JSON['stringify'](_0x5a9291),'ack':!![]}),pythonBridge[_0x209185(0x2a4)](this,_0x209185(0x258),_0x5a9291);}this[_0x209185(0x2ef)](_0x8170a4['from'],_0x8170a4[_0x209185(0x1e4)],{'success':!![]},_0x8170a4['callback']);}catch(_0x8d9e42){this[_0x209185(0x28f)][_0x209185(0x2d8)](_0x8d9e42);}else{if(_0x8170a4[_0x209185(0x1e4)]===_0x209185(0x2db))this['sendTo'](_0x8170a4[_0x209185(0x248)],_0x8170a4['command'],{'success':!![],'dailyDigests':this[_0x209185(0x2b5)]||[],'analysisHistory':this[_0x209185(0x1d1)]||[]},_0x8170a4[_0x209185(0x2ce)]);else{if(_0x8170a4['command']===_0x209185(0x1b6)){const _0x3f691e=this['dailyDigests']['length'],_0x4136f3=new Array(0x18)[_0x209185(0x2c3)](0x0),_0x6ce5a2=new Date()[_0x209185(0x249)](0x0,0x0,0x0,0x0);this[_0x209185(0x215)]&&this['eventHistory'][_0x209185(0x1ff)](_0x497e63=>{const _0x244e25=_0x209185;if(_0x497e63[_0x244e25(0x206)]>=_0x6ce5a2){const _0x3183d5=new Date(_0x497e63[_0x244e25(0x206)])[_0x244e25(0x1f1)]();if(_0x3183d5>=0x0&&_0x3183d5<0x18)_0x4136f3[_0x3183d5]++;}});let _0x2ad358=![],_0x182528='',_0x2bf0cd='',_0x56cb95='';try{const _0x271599=await this[_0x209185(0x244)](_0x209185(0x24a));if(_0x271599&&_0x271599[_0x209185(0x2b2)]){_0x2ad358=!![];const _0x5e5992=await this[_0x209185(0x244)](_0x209185(0x21a));_0x182528=_0x5e5992?_0x5e5992['val']:'';const _0x3d191b=await this['getStateAsync'](_0x209185(0x2e5));_0x2bf0cd=_0x3d191b?_0x3d191b[_0x209185(0x2b2)]:'';const _0x237d7=await this[_0x209185(0x244)]('analysis.automation.targetValue');_0x56cb95=_0x237d7?_0x237d7[_0x209185(0x2b2)]:'';}}catch(_0x5c15ff){}const _0x463836=await this[_0x209185(0x1d6)](),_0x3eeb3a=(this[_0x209185(0x308)][_0x209185(0x211)]||[])[_0x209185(0x1bc)](_0x3e87a5=>_0x3e87a5['isSolar']),_0x2d1406=_0x463836&&_0x3eeb3a;let _0x56bf6c='';try{const _0x494e0c=await this[_0x209185(0x244)](_0x209185(0x1d9));if(_0x494e0c&&_0x494e0c[_0x209185(0x2b2)])_0x56bf6c=_0x494e0c[_0x209185(0x2b2)];}catch(_0x2fe02e){}this[_0x209185(0x2ef)](_0x8170a4[_0x209185(0x248)],_0x8170a4[_0x209185(0x1e4)],{'success':!![],'eventHistory':this[_0x209185(0x215)][_0x209185(0x219)](0x0,0xf),'stats':{'digestCount':_0x3f691e,'isPresent':this['isPresent'],'hourlyActivity':_0x4136f3,'solarActive':_0x2d1406,'presenceWho':_0x56bf6c},'automation':{'detected':_0x2ad358,'description':_0x182528,'targetId':_0x2bf0cd,'targetValue':_0x56cb95}},_0x8170a4[_0x209185(0x2ce)]);}else{if(_0x8170a4['command']==='getEnums'){const _0x58a2d5=await this[_0x209185(0x2cd)](_0x209185(0x26e),_0x209185(0x234)),_0x11b4ef=[];if(_0x58a2d5)for(const _0x30e222 in _0x58a2d5){const _0x5b6f12=_0x58a2d5[_0x30e222],_0x5b99b6=(_0x5b6f12[_0x209185(0x223)]&&typeof _0x5b6f12[_0x209185(0x223)]['name']===_0x209185(0x20d)?_0x5b6f12[_0x209185(0x223)][_0x209185(0x309)]['de']:_0x5b6f12[_0x209185(0x223)][_0x209185(0x309)])||_0x5b6f12['common'][_0x209185(0x309)];_0x11b4ef['push']({'id':_0x30e222,'name':_0x5b99b6});}const _0x1c47d0=await this[_0x209185(0x2cd)](_0x209185(0x1f2),_0x209185(0x234)),_0x2e53f7=[];if(_0x1c47d0)for(const _0x5f0c1f in _0x1c47d0){const _0x240bcd=_0x1c47d0[_0x5f0c1f],_0x214ba1=(_0x240bcd[_0x209185(0x223)]&&typeof _0x240bcd[_0x209185(0x223)][_0x209185(0x309)]===_0x209185(0x20d)?_0x240bcd['common'][_0x209185(0x309)]['de']:_0x240bcd[_0x209185(0x223)][_0x209185(0x309)])||_0x5f0c1f[_0x209185(0x213)]('.')[_0x209185(0x21c)]();_0x2e53f7[_0x209185(0x21e)](_0x214ba1);}this['sendTo'](_0x8170a4['from'],_0x8170a4[_0x209185(0x1e4)],{'success':!![],'enums':_0x11b4ef,'rooms':_0x2e53f7},_0x8170a4[_0x209185(0x2ce)]);}else{if(_0x8170a4['command']==='testContext')try{let _0x5033f5=_0x209185(0x270),_0x20d419=_0x209185(0x2bc);if(this[_0x209185(0x308)][_0x209185(0x22e)]){const _0x5dfb8c=await recorder[_0x209185(0x2a3)](this);_0x5033f5=_0x5dfb8c!==null?_0x5dfb8c+'Â°C':_0x209185(0x301);}if(this[_0x209185(0x308)][_0x209185(0x2ff)]){const _0x2be377=await this[_0x209185(0x1d8)]('system.adapter.'+this[_0x209185(0x308)][_0x209185(0x2ff)]);_0x20d419=_0x2be377?_0x209185(0x293):_0x209185(0x1ef);}this[_0x209185(0x2ef)](_0x8170a4['from'],_0x8170a4[_0x209185(0x1e4)],{'success':!![],'weather':_0x5033f5,'calendar':_0x20d419},_0x8170a4['callback']);}catch(_0x1634f5){this[_0x209185(0x2ef)](_0x8170a4[_0x209185(0x248)],_0x8170a4['command'],{'success':![],'error':_0x1634f5[_0x209185(0x292)]},_0x8170a4['callback']);}else{if(_0x8170a4[_0x209185(0x1e4)]===_0x209185(0x1b4))try{const _0x411e00=_0x8170a4[_0x209185(0x292)]['instance'],_0x258de6=await this[_0x209185(0x20a)](_0x411e00+'.data.table');let _0x4d666e=[];if(_0x258de6&&_0x258de6[_0x209185(0x2b2)]){const _0x3558c2=JSON[_0x209185(0x255)](_0x258de6[_0x209185(0x2b2)]),_0x1a5329=new Set();Array['isArray'](_0x3558c2)&&_0x3558c2[_0x209185(0x1ff)](_0x2dbf6c=>{const _0x5c15c1=_0x209185;if(_0x2dbf6c[_0x5c15c1(0x1ce)])_0x1a5329[_0x5c15c1(0x2f6)](_0x2dbf6c[_0x5c15c1(0x1ce)]);else{if(_0x2dbf6c[_0x5c15c1(0x296)])_0x1a5329[_0x5c15c1(0x2f6)](_0x2dbf6c[_0x5c15c1(0x296)]);}}),_0x4d666e=Array[_0x209185(0x248)](_0x1a5329)[_0x209185(0x25d)]();}if(_0x4d666e[_0x209185(0x277)]===0x0)_0x4d666e=['Standard'];this[_0x209185(0x2ef)](_0x8170a4['from'],_0x8170a4[_0x209185(0x1e4)],{'success':!![],'names':_0x4d666e},_0x8170a4[_0x209185(0x2ce)]);}catch(_0x3addfc){this[_0x209185(0x2ef)](_0x8170a4['from'],_0x8170a4[_0x209185(0x1e4)],{'success':![],'error':_0x3addfc['message']},_0x8170a4['callback']);}else{if(_0x8170a4[_0x209185(0x1e4)]==='testNotification')try{await setup[_0x209185(0x2b0)](this,_0x209185(0x216),![],![]),this[_0x209185(0x2ef)](_0x8170a4['from'],_0x8170a4[_0x209185(0x1e4)],{'success':!![],'message':_0x209185(0x2cb)},_0x8170a4[_0x209185(0x2ce)]);}catch(_0x445c2b){this[_0x209185(0x28f)][_0x209185(0x2d8)](_0x209185(0x1e7)+_0x445c2b[_0x209185(0x292)]),this[_0x209185(0x2ef)](_0x8170a4[_0x209185(0x248)],_0x8170a4[_0x209185(0x1e4)],{'success':![],'message':'Fehler:\x20'+_0x445c2b[_0x209185(0x292)]},_0x8170a4['callback']);}}}}}}}}}}}}}}}}}async[a0_0x1cb34e(0x1db)](){const _0x104d66=a0_0x1cb34e;try{const _0x48c3e3=await this[_0x104d66(0x244)](setup['SYSTEM_DP_MODE']);_0x48c3e3&&_0x48c3e3[_0x104d66(0x2b2)]&&Object[_0x104d66(0x1e5)](setup[_0x104d66(0x2f9)])[_0x104d66(0x294)](_0x48c3e3['val'])?this[_0x104d66(0x2e6)]=_0x48c3e3['val']:(this['currentSystemMode']=setup[_0x104d66(0x2f9)][_0x104d66(0x1ee)],await this[_0x104d66(0x25f)](setup[_0x104d66(0x1c8)],{'val':setup[_0x104d66(0x2f9)][_0x104d66(0x1ee)],'ack':!![]}));}catch(_0x378630){this[_0x104d66(0x2e6)]=setup[_0x104d66(0x2f9)][_0x104d66(0x1ee)];}}async[a0_0x1cb34e(0x1ed)](){const _0x10473=a0_0x1cb34e;try{const _0x46228b=this['config'][_0x10473(0x2d4)]||[];let _0xc23793=![];const _0x57c8b3=[];for(const _0x4ed43e of _0x46228b){try{const _0x2638c1=await this[_0x10473(0x20a)](_0x4ed43e);_0x2638c1&&(_0x2638c1['val']===!![]||_0x2638c1[_0x10473(0x2b2)]===_0x10473(0x1e2)||_0x2638c1[_0x10473(0x2b2)]===0x1)&&(_0xc23793=!![],_0x57c8b3[_0x10473(0x21e)](_0x4ed43e));}catch(_0x438423){}}return await this[_0x10473(0x25f)](_0x10473(0x1d9),{'val':_0x57c8b3[_0x10473(0x282)](',\x20'),'ack':!![]}),_0xc23793&&(this[_0x10473(0x235)]&&(this['log']['info'](_0x10473(0x263)),recorder[_0x10473(0x2d2)](this)),!this['isPresent']&&this[_0x10473(0x2e6)]===setup['SYSTEM_MODES']['NORMAL']&&await recorder[_0x10473(0x208)](this,!![])),_0xc23793;}catch(_0x491eba){return![];}}async['runAutopilot'](){const _0x293e2e=a0_0x1cb34e;this[_0x293e2e(0x28f)][_0x293e2e(0x24e)](_0x293e2e(0x291)),await aiAgent[_0x293e2e(0x268)](this),this[_0x293e2e(0x257)](),this[_0x293e2e(0x2ed)](),this['triggerEnergyPrediction']();}async[a0_0x1cb34e(0x1d6)](){const _0x4fade5=a0_0x1cb34e,_0x2a3f2a=[_0x4fade5(0x280),_0x4fade5(0x23a),_0x4fade5(0x262)],_0x11531f=[_0x4fade5(0x25c),_0x4fade5(0x2e4),'NextHours.Location_1.Day_1.current.symbol_desc'];for(const _0x2cbb27 of _0x2a3f2a){for(const _0x5e9144 of _0x11531f){try{const _0x1928b4=_0x2cbb27+'.'+_0x5e9144,_0x2c32bb=await this[_0x4fade5(0x20a)](_0x1928b4);if(_0x2c32bb&&_0x2c32bb[_0x4fade5(0x2b2)]){const _0x244e7f=String(_0x2c32bb[_0x4fade5(0x2b2)])[_0x4fade5(0x1ba)]();if(_0x244e7f[_0x4fade5(0x294)](_0x4fade5(0x2e3))||_0x244e7f[_0x4fade5(0x294)](_0x4fade5(0x1f6))||_0x244e7f[_0x4fade5(0x294)](_0x4fade5(0x24b))||_0x244e7f[_0x4fade5(0x294)](_0x4fade5(0x1c5))||_0x244e7f[_0x4fade5(0x294)](_0x4fade5(0x25a)))return!![];}}catch(_0x3b1df1){}}}return![];}[a0_0x1cb34e(0x2ed)](){const _0x23d493=a0_0x1cb34e;if(!this[_0x23d493(0x1c4)])return;try{this[_0x23d493(0x2aa)]('LTM.trainingData.sequences',(_0x24e040,_0x33bc6e)=>{const _0x6486fd=_0x23d493;_0x33bc6e&&_0x33bc6e['val']&&pythonBridge['send'](this,_0x6486fd(0x2b8),{'sequences':JSON[_0x6486fd(0x255)](_0x33bc6e[_0x6486fd(0x2b2)])});});}catch(_0x4e8947){}}async['triggerEnergyPrediction'](){const _0x3492ae=a0_0x1cb34e;if(!this[_0x3492ae(0x1c4)])return;try{const _0x47dea7=await recorder[_0x3492ae(0x2a3)](this);if(_0x47dea7===null)return;const _0x22b3fc={},_0x543c01={},_0x34606f=this[_0x3492ae(0x308)]['devices']||[];for(const _0x137bf9 of _0x34606f){if(_0x137bf9[_0x3492ae(0x1fa)]===_0x3492ae(0x252)&&_0x137bf9[_0x3492ae(0x260)]){const _0x3f4723=this[_0x3492ae(0x1b8)][_0x137bf9['id']];if(_0x3f4723!==undefined)_0x22b3fc[_0x137bf9[_0x3492ae(0x260)]]=_0x3f4723;if(_0x137bf9[_0x3492ae(0x1e9)])_0x543c01[_0x137bf9[_0x3492ae(0x260)]]=!![];}}const _0x3e039c=await this[_0x3492ae(0x1d6)]();let _0x939588={};try{const _0x89ceb2=await this['getStateAsync']('analysis.energy.warmupTargets');if(_0x89ceb2&&_0x89ceb2[_0x3492ae(0x2b2)])_0x939588=JSON[_0x3492ae(0x255)](_0x89ceb2[_0x3492ae(0x2b2)]);}catch(_0x59d4c6){}Object['keys'](_0x22b3fc)[_0x3492ae(0x277)]>0x0&&(pythonBridge[_0x3492ae(0x2a4)](this,'PREDICT_ENERGY',{'current_temps':_0x22b3fc,'t_out':_0x47dea7,'is_sunny':_0x3e039c,'solar_flags':_0x543c01,'warmup_targets':_0x939588}),pythonBridge[_0x3492ae(0x2a4)](this,_0x3492ae(0x1ec),{'current_temps':_0x22b3fc,'t_out':_0x47dea7,'targets':{}}));}catch(_0x3733f3){}}[a0_0x1cb34e(0x257)](){const _0x2a4cd3=a0_0x1cb34e;if(!this[_0x2a4cd3(0x224)]||this[_0x2a4cd3(0x224)]['length']===0x0)return;const _0xcce5d5=new Array(0x60)[_0x2a4cd3(0x2c3)](0x0),_0x57a13a=new Date()[_0x2a4cd3(0x249)](0x0,0x0,0x0,0x0);this[_0x2a4cd3(0x224)][_0x2a4cd3(0x1ff)](_0x129a40=>{const _0x2faee5=_0x2a4cd3,_0x274cb1=new Date(_0x129a40[_0x2faee5(0x206)]);if(_0x274cb1['getTime']()>=_0x57a13a){const _0x4c4359=_0x274cb1['getHours'](),_0x44f5cb=_0x274cb1[_0x2faee5(0x233)](),_0x269282=_0x4c4359*0x4+Math['floor'](_0x44f5cb/0xf);if(_0x269282>=0x0&&_0x269282<0x60)_0xcce5d5[_0x269282]++;}}),this[_0x2a4cd3(0x25f)](_0x2a4cd3(0x2c8),{'val':JSON[_0x2a4cd3(0x240)](_0xcce5d5),'ack':!![]});}[a0_0x1cb34e(0x202)](){const _0x332b9f=a0_0x1cb34e;if(!this[_0x332b9f(0x2b5)]||this['dailyDigests'][_0x332b9f(0x277)]<0x2)return;const _0x43ead8=this['dailyDigests'][_0x332b9f(0x2dc)](_0x2e19e9=>{const _0x201380=_0x332b9f,_0x20ab28=(_0x2e19e9[_0x201380(0x1e1)]||'')[_0x201380(0x1ba)]();return ACTIVITY_LEVEL_MAP[_0x20ab28]||0x32;});pythonBridge[_0x332b9f(0x2a4)](this,_0x332b9f(0x1dc),{'values':_0x43ead8,'tag':_0x332b9f(0x2c2)});}async['handleInfrasound'](_0x28e973){const _0x3260c2=a0_0x1cb34e;if(_0x28e973==null||typeof _0x28e973!==_0x3260c2(0x1f8))return;const _0x3769b1=Date['now']();this['pressureBuffer'][_0x3260c2(0x21e)]({'ts':_0x3769b1,'val':_0x28e973}),this[_0x3260c2(0x286)]=this[_0x3260c2(0x286)][_0x3260c2(0x287)](_0x20f8d5=>_0x3769b1-_0x20f8d5['ts']<0x1388);if(this['infrasoundLocked'])return;if(this['config'][_0x3260c2(0x24d)]){const _0x3a75ab=await this[_0x3260c2(0x20a)](this[_0x3260c2(0x308)][_0x3260c2(0x24d)]);if(_0x3a75ab&&!_0x3a75ab[_0x3260c2(0x2b2)])return;}const _0x25f1e4=this[_0x3260c2(0x308)]['infrasoundThreshold']||0.04;if(Math['abs'](_0x28e973)>=_0x25f1e4){this['log'][_0x3260c2(0x273)]('[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20'+_0x28e973+_0x3260c2(0x1fd)+_0x25f1e4+')'),await this[_0x3260c2(0x25f)](_0x3260c2(0x2b3),{'val':!![],'ack':!![]});const _0x1eea2e=this[_0x3260c2(0x27f)];_0x1eea2e?(this[_0x3260c2(0x28f)][_0x3260c2(0x2c5)]('[Infrasound]\x20ðŸŸ¡\x20Debug-Mode:\x20Alarm\x20detected\x20but\x20suppressed\x20because\x20presence=true.'),this[_0x3260c2(0x284)](_0x28e973,_0x3260c2(0x251))):(this[_0x3260c2(0x284)](_0x28e973,_0x3260c2(0x26a)),this[_0x3260c2(0x2b0)]('ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20'+_0x28e973+_0x3260c2(0x256))),this[_0x3260c2(0x290)]=!![],setTimeout(()=>{const _0x56b606=_0x3260c2;this[_0x56b606(0x290)]=![];},0x2710);}}async['triggerInfrasoundCorrelation'](_0x1bf8ef,_0x3e82e2='ALARM'){const _0x17bba3=a0_0x1cb34e,_0x26d322=Date[_0x17bba3(0x229)](),_0x290dde=this[_0x17bba3(0x308)][_0x17bba3(0x211)]||[];setTimeout(async()=>{const _0x57bfa5=_0x17bba3;let _0x469495=null,_0x4f4d61=_0x57bfa5(0x2ca);const _0x557bb0=_0x290dde[_0x57bfa5(0x287)](_0x10ef41=>_0x10ef41['type']&&(_0x10ef41[_0x57bfa5(0x1fa)][_0x57bfa5(0x294)](_0x57bfa5(0x245))||_0x10ef41['type'][_0x57bfa5(0x294)](_0x57bfa5(0x1cf))||_0x10ef41[_0x57bfa5(0x1fa)]['includes']('magnet')||_0x10ef41[_0x57bfa5(0x1fa)][_0x57bfa5(0x294)](_0x57bfa5(0x265)))||_0x10ef41[_0x57bfa5(0x2c6)]&&(_0x10ef41[_0x57bfa5(0x2c6)][_0x57bfa5(0x294)](_0x57bfa5(0x1f7))||_0x10ef41[_0x57bfa5(0x2c6)]['includes'](_0x57bfa5(0x1fc))));for(const _0x14ca79 of _0x557bb0){try{const _0x4ca000=await this[_0x57bfa5(0x20a)](_0x14ca79['id']);if(_0x4ca000){if(_0x4ca000['ts']>=_0x26d322-0x7d0){_0x469495=_0x14ca79[_0x57bfa5(0x309)]||_0x14ca79['id'],_0x4f4d61=_0x57bfa5(0x250)+_0x469495;break;}}}catch(_0x40faaf){}}const _0xcf61ae={'timestamp':_0x26d322,'pressure':_0x1bf8ef,'isMatch':!!_0x469495,'explanation':_0x4f4d61,'type':_0x3e82e2};await this[_0x57bfa5(0x24f)](_0xcf61ae),this[_0x57bfa5(0x28f)][_0x57bfa5(0x2c5)](_0x57bfa5(0x212)+(!!_0x469495?'MATCH\x20(False\x20Positive)':'ANOMALY\x20(Real\x20Threat?)'));},0x1388);}async[a0_0x1cb34e(0x201)](_0x354938){const _0xe34e38=a0_0x1cb34e,_0x4c0d68=Date[_0xe34e38(0x229)](),_0x32dcd5=_0x354938[_0xe34e38(0x309)]||_0x354938['id'][_0xe34e38(0x213)]('.')[_0xe34e38(0x21c)]();let _0x503d24=0x0;setTimeout(async()=>{const _0x5b3a19=_0xe34e38;this[_0x5b3a19(0x286)]['forEach'](_0x2a1318=>{const _0xb60e70=_0x5b3a19;_0x2a1318['ts']>=_0x4c0d68-0xfa0&&_0x2a1318['ts']<=_0x4c0d68+0x3e8&&(Math[_0xb60e70(0x23f)](_0x2a1318['val'])>Math[_0xb60e70(0x23f)](_0x503d24)&&(_0x503d24=_0x2a1318[_0xb60e70(0x2b2)]));});const _0x340446=this[_0x5b3a19(0x308)]['infrasoundThreshold']||0.04,_0x50c01d=Math['abs'](_0x503d24)>=_0x340446,_0x4fd686={'timestamp':_0x4c0d68,'pressure':_0x503d24,'isMatch':_0x50c01d,'explanation':'Fenster\x20geÃ¶ffnet:\x20'+_0x32dcd5,'type':'CALIB'};await this[_0x5b3a19(0x24f)](_0x4fd686),this[_0x5b3a19(0x28f)][_0x5b3a19(0x24e)]('[Calibration]\x20Window\x20'+_0x32dcd5+'\x20opened.\x20Peak\x20Pressure:\x20'+_0x503d24[_0x5b3a19(0x2fe)](0x4)+'\x20hPa\x20(Threshold:\x20'+_0x340446+')');},0x1f4);}async[a0_0x1cb34e(0x24f)](_0x77a513){const _0x58459b=a0_0x1cb34e;try{const _0x31f991=await this[_0x58459b(0x244)]('analysis.security.infrasoundLog');let _0x548950=[];if(_0x31f991&&_0x31f991[_0x58459b(0x2b2)])_0x548950=JSON[_0x58459b(0x255)](_0x31f991['val']);_0x548950[_0x58459b(0x1df)](_0x77a513);if(_0x548950[_0x58459b(0x277)]>0x14)_0x548950=_0x548950[_0x58459b(0x219)](0x0,0x14);await this[_0x58459b(0x25f)](_0x58459b(0x26d),{'val':JSON['stringify'](_0x548950),'ack':!![]});}catch(_0x459f45){this['log'][_0x58459b(0x2d8)](_0x58459b(0x2dd)+_0x459f45[_0x58459b(0x292)]);}}['sendNotification'](_0x562457){const _0x5b1918=a0_0x1cb34e;this[_0x5b1918(0x308)][_0x5b1918(0x2c4)]&&this[_0x5b1918(0x308)]['notifyPushoverInstance']&&this[_0x5b1918(0x2ef)](this[_0x5b1918(0x308)]['notifyPushoverInstance'],'send',{'message':_0x562457,'title':_0x5b1918(0x225),'priority':0x1}),this[_0x5b1918(0x308)]['notifyTelegramEnabled']&&this[_0x5b1918(0x308)]['notifyTelegramInstance']&&this[_0x5b1918(0x2ef)](this[_0x5b1918(0x308)][_0x5b1918(0x1bd)],_0x5b1918(0x2a4),{'text':_0x562457});}}function a0_0x12b4(){const _0x312c0f=['getGenerativeModel','setupLtmScheduler','isPresent','weatherunderground.0','simulateButler','join','scanDevices','triggerInfrasoundCorrelation','Sensors\x20used\x20for\x20Gait\x20Analysis','pressureBuffer','filter','analysis.health.gaitDebug','TRAIN_HEALTH','state','geminiApiKey','generateContent','analysisInterval','party','log','infrasoundLocked','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','message','Verbunden','includes','open','calendarName','analysis.training.triggerSecurity','application/json','./lib/scanner','geminiModel','Lernphase\x20(','Active\x20Ventilation\x20Alerts','Active\x20Calendar\x20Enforcements\x20(Locks)','notifyTelegramEnabled','system.mode','initZombies','4TnQMZF','unload','getOutsideTemperatureNumeric','send','initSystemConfig','startService','./lib/setup','Forensic\x20Infrasound\x20Log','TRAIN_SECURITY','getState','setState','analysis.health.gaitSensors','analysis.energy.pinnForecast','analysisTimer','ack','sendNotification','12144935XyVSxw','val','security.alarm_triggered','protectAiMemory','dailyDigests','124234ewZgJZ','systemConfig','ANALYZE_GAIT','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','Comfort\x20Train\x20Error:\x20','analysis.energy.insulationScore','Kein\x20Kalender-Adapter','TRAIN_TOPOLOGY','dependencyInstallInProgress','Simulation\x20durch\x20Admin\x20(Test)','guest','magnet','Activity-Level','fill','notifyPushoverEnabled','info','role','analysis.training.triggerTopology','analysis.health.todayVector','trackerEnabled','Keine\x20Sensor-AktivitÃ¤t','Gesendet','TRACK_EVENT','getForeignObjectsAsync','callback','apiKey','trackerHeartbeat','createDailyDigest','abortExitTimer','analysis.topology.structure','presenceDevices','Guest\x20Mode','â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...','./lib/automation','error','1215084TKBihD','45432rHurqG','getLtmData','map','[Forensics]\x20Save\x20failed:\x20','createAllObjects','TRAIN_ENERGY','minDaysForBaseline','Memory\x20Hydration\x20Failed:\x20','Gait\x20Speed\x20Calculation\x20Proof','sonn','Current.WeatherText','analysis.automation.targetId','currentSystemMode','analysis.energy.warmupSources','setupBriefingScheduler','endsWith','Graph-Brain\x20Train\x20Error:\x20','[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20','analysis.training.status','triggerGaitAnalysis','string','sendTo','sources','10OJIEiI','onReady','ltmJob',')\x20-\x20Phase\x20D\x20(Comfort\x20Refinement)','monitorEnforcements','add','Party\x20Mode','TRAIN_COMFORT','SYSTEM_MODES','memoryCache','âš ï¸\x20Graph-Brain:\x20No\x20training\x20sequences\x20found\x20in\x20LTM.','version','664IjBeJY','toFixed','calendarInstance','analysis.security.learningStatus','Daten\x20nicht\x20verfÃ¼gbar','updateLocation','updated','checkThermostats','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','bootTime','.communicate.request','config','name','Test','exitGraceTimer','analysis.training.triggerHealth','Heizung\x20kann\x20','getCalendarNames','ready','getOverviewData','driftAnalysisTimer','sensorLastValues','onMessage','toLowerCase','\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).','some','notifyTelegramInstance','toString','testApiKey','subscribeForeignStates','search','floor','LTM.trainingData.thermodynamics','isProVersion','clear','lastAlertState','onUnload','SYSTEM_DP_MODE','./lib/recorder','Verbindung\x20erfolgreich!','analysis.automation.targetValue','constructor','bind','_calName','door','briefingJob','analysisHistory','4023245QijYrB','checkLicense','genAI','find','checkSolarCondition','PYTHON_EXE','getForeignObjectAsync','system.presenceWho','\x20sequences...','loadSystemMode','ANALYZE_TREND','motion','triggerEnergyPrediction','unshift','cogni-living\x20adapter\x20starting\x20(v','activityLevel','online','scores','command','values','./lib/dead_man','Notification\x20Test\x20Failed:\x20','automation.triggerAction','isSolar','@iobroker/adapter-core','Kein\x20API\x20Key\x20Ã¼bergeben','OPTIMIZE_ENERGY','checkWifiPresence','NORMAL','Instanz\x20nicht\x20gefunden','analysis.automation.autoApply','getHours','enum.rooms.*','Adapter','setupModeResetScheduler','modeResetJob','sunny','sensor.window','number','analysis.energy.rlPenalties','type','analysis.energy.warmupTimes','sensor.door','\x20hPa\x20(Limit:\x20','Sec-Training\x20started...','forEach','scanThermostats','analyzeWindowOpening','runPythonHealthCheck','triggerBriefing','analysis.energy.mpcActive','7wekoOa','timestamp','models/gemini-flash-latest','setPresence','\x20devices.','getForeignStateAsync','healthTrendInterval','ðŸ§ \x20Graph-Brain:\x20Training\x20Behaviour\x20Matrix\x20based\x20on\x20','object','infrasoundEnabled','resetRLPenalty','setObjectNotExistsAsync','devices','[Forensics]\x20Infrasound\x20Event\x20correlated:\x20','split','times','eventHistory','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','analysis.energy.ventilationAlerts','cancel','slice','analysis.automation.description','subscribeStates','pop','key','push','keys','json','subscribeForeignStatesAsync','runBaselineDriftAnalysis','common','rawEventLog','Nuukanni\x20Security','lastTrackerEventTime','initHistory','\x20min\x20ausbleiben.','now','1825464pMoSXW','(((.+)+)+)+$','isGracePeriodActive','PINN\x20AI\x20Forecast','useWeather','runAutopilot','updateTopologyMatrix','text','isArray','getMinutes','enum','exitTimer','minutes_safe','\x20Tage)','Keine\x20Antwort\x20von\x20Gemini','Aktiv\x20(','accuweather.0','inactivityThresholdHours','analysis.trigger','matrix','Reinforcement\x20Learning\x20Penalties','abs','stringify','.system.mode','LTM.rawEventLog','apply','getStateAsync','window','simulateEnergyMPC','analysis.health.activityTrend','from','setHours','analysis.automation.patternDetected','klar','startSystem','infrasoundArmingId','debug','appendToLog','ErklÃ¤rt\x20durch:\x20','INTERNAL','temperature','LTM.trainingData.sequences','onStateChange','parse','\x20hPa.\x20Einbruch\x20wahrscheinlich.','updateHealthVector','SET_TOPOLOGY','analysis.training.triggerComfort','heiter','licenseKey','forecast.current.weather','sort','VACATION','setStateAsync','location','triggerDailyDigest','daswetter.0','WiFi\x20Presence\x20detected.','LTM.dailyDigests','reed','manual','updateTopology','runGeminiAnalysis','cleanupGhostInterventions','ALARM','infrasoundSensorId','dismissAutomation','analysis.security.infrasoundLog','enum.functions.*','\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.','Kein\x20Wetter-Adapter','stateChange','51aNrEZz','warn','updateSchedulePreview','./lib/scheduler','sendMorningBriefing','length','checkCalendarTriggers','19709460YXQTUN','SET_LEARNING_MODE','value','main'];a0_0x12b4=function(){return _0x312c0f;};return a0_0x12b4();}if(require[a0_0x1cb34e(0x27c)]!==module)module['exports']=_0x40c6bd=>new CogniLiving(_0x40c6bd);else new CogniLiving();