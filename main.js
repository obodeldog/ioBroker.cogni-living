const a0_0xe96819=a0_0x5a98;(function(_0x42fcca,_0x5b4476){const _0x41fc1a=a0_0x5a98,_0x59cdcc=_0x42fcca();while(!![]){try{const _0x4d973a=-parseInt(_0x41fc1a(0x1bc))/0x1+-parseInt(_0x41fc1a(0x105))/0x2*(-parseInt(_0x41fc1a(0x190))/0x3)+-parseInt(_0x41fc1a(0x10d))/0x4+parseInt(_0x41fc1a(0x109))/0x5*(-parseInt(_0x41fc1a(0xbf))/0x6)+parseInt(_0x41fc1a(0xf9))/0x7+parseInt(_0x41fc1a(0x1d5))/0x8+-parseInt(_0x41fc1a(0x1b4))/0x9*(parseInt(_0x41fc1a(0x12c))/0xa);if(_0x4d973a===_0x5b4476)break;else _0x59cdcc['push'](_0x59cdcc['shift']());}catch(_0x501b78){_0x59cdcc['push'](_0x59cdcc['shift']());}}}(a0_0x18a7,0x9954e));const a0_0x42b96e=(function(){let _0x225eb3=!![];return function(_0x46949c,_0x2725fe){const _0x15ef49=_0x225eb3?function(){const _0x7011a5=a0_0x5a98;if(_0x2725fe){const _0x2a4665=_0x2725fe[_0x7011a5(0xfb)](_0x46949c,arguments);return _0x2725fe=null,_0x2a4665;}}:function(){};return _0x225eb3=![],_0x15ef49;};}()),a0_0x558efb=a0_0x42b96e(this,function(){const _0x39e9ce=a0_0x5a98;return a0_0x558efb[_0x39e9ce(0x183)]()['search']('(((.+)+)+)+$')['toString']()['constructor'](a0_0x558efb)[_0x39e9ce(0x196)](_0x39e9ce(0xe3));});a0_0x558efb();'use strict';const utils=require(a0_0xe96819(0x163)),{GoogleGenerativeAI}=require(a0_0xe96819(0xa6)),schedule=require(a0_0xe96819(0x1a6)),{spawn,exec,execSync}=require('child_process'),path=require(a0_0xe96819(0x213)),fs=require('fs'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0xe96819(0xfd),LTM_SCHEDULE=a0_0xe96819(0xae),MODE_RESET_SCHEDULE='0\x204\x20*\x20*\x20*',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0xe96819(0x1ea),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0xe96819(0x95),LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS=a0_0xe96819(0x1d9),LTM_DP_DRIFT_CHANNEL=a0_0xe96819(0xf0),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS=a0_0xe96819(0xd3),LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE=a0_0xe96819(0xb7),SYSTEM_MODES={'NORMAL':a0_0xe96819(0x9f),'VACATION':a0_0xe96819(0x178),'PARTY':a0_0xe96819(0x187),'GUEST':a0_0xe96819(0x201)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0xe96819(0x211)],SYSTEM_MODES[a0_0xe96819(0x21f)]],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0xe96819(0x101),'family':a0_0xe96819(0x1cd),'single_comfort':a0_0xe96819(0x1e6),'security':a0_0xe96819(0x19b)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0},IS_WIN=process[a0_0xe96819(0x221)]===a0_0xe96819(0x21e),PERSISTENT_DIR=path[a0_0xe96819(0x199)](__dirname,a0_0xe96819(0x1dc)),VENV_PATH=PERSISTENT_DIR,PYTHON_EXE=IS_WIN?path[a0_0xe96819(0x199)](VENV_PATH,a0_0xe96819(0x15b),a0_0xe96819(0xc9)):path[a0_0xe96819(0x199)](VENV_PATH,a0_0xe96819(0xf5),a0_0xe96819(0xaa)),PIP_EXE=IS_WIN?path[a0_0xe96819(0x199)](VENV_PATH,'Scripts',a0_0xe96819(0x1d4)):path[a0_0xe96819(0x199)](VENV_PATH,a0_0xe96819(0xf5),'pip');let activeSequence=[],sequenceTimer=null;async function initZombies(_0x36a4cb){const _0x162c5f=a0_0xe96819;try{const _0x4d0676=[_0x162c5f(0x1b3),'events.history_debug_00'];for(const _0x20dc64 of _0x4d0676){try{const _0x44e7f=await _0x36a4cb[_0x162c5f(0x179)](_0x20dc64);if(_0x44e7f)await _0x36a4cb['delObjectAsync'](_0x20dc64);}catch(_0x3ceb81){}}}catch(_0x126c20){}}async function checkLicense(_0x3d75ca){return!![];}async function initHistory(_0x5c94a4){const _0x3a8e8e=a0_0xe96819;try{const _0x17de8a=await _0x5c94a4[_0x3a8e8e(0x9a)](_0x3a8e8e(0xc0));_0x17de8a&&_0x17de8a[_0x3a8e8e(0xc6)]&&(_0x5c94a4[_0x3a8e8e(0xb6)]=JSON['parse'](_0x17de8a[_0x3a8e8e(0xc6)][_0x3a8e8e(0x183)]()));}catch(_0x270a4e){_0x5c94a4[_0x3a8e8e(0xb6)]=[];}try{const _0x7f07fc=await _0x5c94a4[_0x3a8e8e(0x9a)](_0x3a8e8e(0x191));if(_0x7f07fc&&_0x7f07fc[_0x3a8e8e(0xc6)])_0x5c94a4[_0x3a8e8e(0x17a)]=JSON['parse'](_0x7f07fc['val'][_0x3a8e8e(0x183)]());}catch(_0x1ece88){_0x5c94a4[_0x3a8e8e(0x17a)]=[];}if(_0x5c94a4[_0x3a8e8e(0xb6)]&&_0x5c94a4[_0x3a8e8e(0xb6)][_0x3a8e8e(0x1dd)]>0x0){_0x5c94a4[_0x3a8e8e(0x8e)][_0x3a8e8e(0x87)](_0x3a8e8e(0x17d));for(let _0x41610b=_0x5c94a4['eventHistory'][_0x3a8e8e(0x1dd)]-0x1;_0x41610b>=0x0;_0x41610b--){const _0x1ccbb3=_0x5c94a4[_0x3a8e8e(0xb6)][_0x41610b];if(_0x1ccbb3&&_0x1ccbb3['id']!==undefined&&_0x1ccbb3['value']!==undefined)_0x5c94a4[_0x3a8e8e(0x21d)][_0x1ccbb3['id']]=_0x1ccbb3[_0x3a8e8e(0x1ca)];}}}async function initSystemConfig(_0x256bf5){const _0x1d5ae4=a0_0xe96819;try{const _0x48076e=await _0x256bf5[_0x1d5ae4(0x18e)](_0x1d5ae4(0x18f));if(_0x48076e&&_0x48076e['common'])_0x256bf5['systemConfig']={'latitude':_0x48076e[_0x1d5ae4(0x112)][_0x1d5ae4(0x226)]||0x0,'longitude':_0x48076e[_0x1d5ae4(0x112)][_0x1d5ae4(0x113)]||0x0,'city':_0x48076e[_0x1d5ae4(0x112)][_0x1d5ae4(0xde)]||''};}catch(_0x568001){}}function stopPythonService(_0x2b6e87){const _0x490d83=a0_0xe96819;if(_0x2b6e87[_0x490d83(0xd6)]){try{_0x2b6e87[_0x490d83(0xd6)][_0x490d83(0x1f6)]();}catch(_0x1870ed){}_0x2b6e87[_0x490d83(0xd6)]=null;}}function sendToPython(_0x5d82a3,_0x2ec878,_0x47cc27={}){const _0xff19db=a0_0xe96819;if(!_0x5d82a3[_0xff19db(0xd6)]||!_0x5d82a3['pythonProcess'][_0xff19db(0x19a)][_0xff19db(0xe9)])return;const _0x3beda0=JSON[_0xff19db(0xf2)]({'command':_0x2ec878,..._0x47cc27});try{_0x5d82a3[_0xff19db(0xd6)]['stdin'][_0xff19db(0xd0)](_0x3beda0+'\x0a');}catch(_0x34e63b){}}function runPythonHealthCheck(_0x170bb5){const _0x2c80aa=a0_0xe96819;if(!_0x170bb5['dailyDigests']||_0x170bb5[_0x2c80aa(0xf1)][_0x2c80aa(0x1dd)]<0x2)return;const _0x36e5b2=_0x170bb5[_0x2c80aa(0xf1)]['map'](_0x4c285d=>{const _0x425ced=_0x2c80aa,_0x211648=(_0x4c285d['activityLevel']||'')[_0x425ced(0xa8)]();return ACTIVITY_LEVEL_MAP[_0x211648]||0x32;});sendToPython(_0x170bb5,_0x2c80aa(0x13d),{'values':_0x36e5b2,'tag':_0x2c80aa(0xab)});}function handlePythonResult(_0x2a1f46,_0x3e483e){const _0x240e46=a0_0xe96819;if(_0x3e483e[_0x240e46(0x89)]===_0x240e46(0x1c1))_0x2a1f46['log'][_0x240e46(0x1c5)](_0x240e46(0x7e));else{if(_0x3e483e[_0x240e46(0x89)]===_0x240e46(0x158)){const {anomaly_score:_0x57480f,is_anomaly:_0x5e3f5f,threshold:_0x5bec05,explanation:_0xe0d3f8}=_0x3e483e[_0x240e46(0x166)];_0x2a1f46[_0x240e46(0x8e)]['info'](_0x240e46(0x15c)+_0x57480f[_0x240e46(0x152)](0x5)+_0x240e46(0x146)+(_0x5e3f5f?_0x240e46(0x210):'OK')),_0x2a1f46['setStateAsync'](_0x240e46(0x173),{'val':_0x57480f,'ack':!![]}),_0x2a1f46['setStateAsync']('analysis.security.lastCheck',{'val':new Date()[_0x240e46(0x115)](),'ack':!![]});if(_0x5bec05)_0x2a1f46['setStateAsync'](_0x240e46(0x99),{'val':_0x5bec05,'ack':!![]});if(_0x5e3f5f){let _0x21286d=_0x240e46(0x16e)+_0x57480f[_0x240e46(0x152)](0x4)+')';if(_0xe0d3f8&&_0xe0d3f8!=='Unknown')_0x21286d+=_0x240e46(0x1e3)+_0xe0d3f8;_0x2a1f46['setStateAsync'](_0x240e46(0x216),{'val':!![],'ack':!![]}),_0x2a1f46[_0x240e46(0x1c3)](_0x240e46(0xb3),{'val':_0x21286d,'ack':!![]}),sendNotification(_0x2a1f46,'‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20'+_0x21286d,![],!![]);}}else{if(_0x3e483e[_0x240e46(0x89)]===_0x240e46(0x227)){const _0x145530=_0x3e483e[_0x240e46(0x166)][_0x240e46(0xe2)]||'',_0x4e55b7=_0x3e483e['payload'][_0x240e46(0xb1)],_0x3ac011=_0x3e483e[_0x240e46(0x166)][_0x240e46(0x10f)]?_0x240e46(0x217)+new Date()[_0x240e46(0x10a)]()+'\x20('+_0x145530+')':_0x240e46(0x1c8)+_0x3e483e['payload'][_0x240e46(0x9c)];_0x2a1f46[_0x240e46(0x1c3)]('analysis.training.status',{'val':_0x3ac011,'ack':!![]});if(_0x3e483e[_0x240e46(0x166)][_0x240e46(0x10f)]&&_0x4e55b7)_0x2a1f46[_0x240e46(0x1c3)](_0x240e46(0x99),{'val':_0x4e55b7,'ack':!![]});}else{if(_0x3e483e[_0x240e46(0x89)]==='COMFORT_RESULT'){const {patterns:_0x3c66a6}=_0x3e483e[_0x240e46(0x166)];if(_0x3c66a6&&_0x3c66a6[_0x240e46(0x1dd)]>0x0){_0x2a1f46[_0x240e46(0x8e)][_0x240e46(0x87)](_0x240e46(0x7f)+_0x3c66a6[_0x240e46(0x1dd)]+_0x240e46(0xc3)),_0x2a1f46[_0x240e46(0x1c3)](_0x240e46(0x147),{'val':JSON['stringify'](_0x3c66a6),'ack':!![]});const _0x486400=_0x3c66a6[0x0],_0x66f403=_0x240e46(0x215)+_0x486400['rule']+'\x20('+(_0x486400['confidence']*0x64)[_0x240e46(0x152)](0x0)+'%)';_0x2a1f46[_0x240e46(0x1c3)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x2a1f46[_0x240e46(0x1c3)](_0x240e46(0x122),{'val':_0x66f403,'ack':!![]});}else _0x2a1f46[_0x240e46(0x8e)][_0x240e46(0x87)](_0x240e46(0xed)),_0x2a1f46['setStateAsync']('analysis.automation.patternDetected',{'val':![],'ack':!![]}),_0x2a1f46['setStateAsync'](_0x240e46(0x147),{'val':'[]','ack':!![]});}else{if(_0x3e483e[_0x240e46(0x89)]==='ENERGY_TRAIN_RESULT'){if(_0x3e483e[_0x240e46(0x166)][_0x240e46(0x10f)])try{const _0x353837=JSON[_0x240e46(0x200)](_0x3e483e['payload'][_0x240e46(0xe2)]);if(_0x353837[_0x240e46(0x20f)])_0x2a1f46[_0x240e46(0x1c3)]('analysis.energy.insulationScore',{'val':JSON[_0x240e46(0xf2)](_0x353837[_0x240e46(0x20f)]),'ack':!![]});if(_0x353837['heating'])_0x2a1f46['setStateAsync']('analysis.energy.heatingScore',{'val':JSON['stringify'](_0x353837[_0x240e46(0x12b)]),'ack':!![]});}catch(_0x460a26){}}else{if(_0x3e483e[_0x240e46(0x89)]===_0x240e46(0x1fb)){if(_0x3e483e['payload'][_0x240e46(0x10f)])_0x2a1f46['log'][_0x240e46(0x87)]('‚úÖ\x20HEALTH\x20TRAINED.');}else{if(_0x3e483e['type']===_0x240e46(0x18a))_0x2a1f46[_0x240e46(0x1c3)](_0x240e46(0x97),{'val':new Date()[_0x240e46(0x115)](),'ack':!![]}),_0x2a1f46[_0x240e46(0x1c3)](_0x240e46(0xc5),{'val':_0x3e483e[_0x240e46(0x166)][_0x240e46(0xd4)],'ack':!![]});else{if(_0x3e483e[_0x240e46(0x89)]==='TREND_RESULT')_0x2a1f46[_0x240e46(0x1c3)](_0x240e46(0x1c6),{'val':_0x3e483e[_0x240e46(0x166)][_0x240e46(0xc2)],'ack':!![]}),_0x2a1f46['setStateAsync'](_0x240e46(0x8f),{'val':_0x3e483e[_0x240e46(0x166)][_0x240e46(0x1b7)],'ack':!![]});else{if(_0x3e483e[_0x240e46(0x89)]===_0x240e46(0x232)){const {speed_trend:_0x500c3c}=_0x3e483e[_0x240e46(0x166)];if(_0x500c3c!==undefined)_0x2a1f46['setStateAsync'](_0x240e46(0xd5),{'val':_0x500c3c,'ack':!![]});}else{if(_0x3e483e['type']==='ENERGY_PREDICT_RESULT'){const {forecast:_0x4c2499}=_0x3e483e[_0x240e46(0x166)];if(_0x4c2499)_0x2a1f46[_0x240e46(0x1c3)](_0x240e46(0x10b),{'val':JSON[_0x240e46(0xf2)](_0x4c2499),'ack':!![]});}else{if(_0x3e483e[_0x240e46(0x89)]===_0x240e46(0x175)){const {data:_0x23ff9c}=_0x3e483e[_0x240e46(0x166)];_0x23ff9c&&(_0x2a1f46[_0x240e46(0x8e)][_0x240e46(0x87)](_0x240e46(0xd2)),_0x2a1f46[_0x240e46(0x1c3)](_0x240e46(0x11d),{'val':JSON[_0x240e46(0xf2)](_0x23ff9c),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x44d07a){const _0x1e4513=a0_0xe96819;let _0x47543b=_0x1e4513(0x15a);if(fs['existsSync'](PYTHON_EXE))_0x47543b=PYTHON_EXE;try{const _0x3f8d19=path[_0x1e4513(0x199)](__dirname,'python_service',_0x1e4513(0x9e));_0x44d07a[_0x1e4513(0xd6)]=spawn(_0x47543b,[_0x3f8d19]),_0x44d07a[_0x1e4513(0xd6)][_0x1e4513(0x100)]['on']('data',_0x16ae84=>{const _0x1dbce3=_0x1e4513,_0x368460=_0x16ae84[_0x1dbce3(0x183)]()[_0x1dbce3(0xa9)]('\x0a');_0x368460[_0x1dbce3(0xe8)](_0x5c8923=>{const _0x1f2f1f=_0x1dbce3,_0x28cb43=_0x5c8923['trim']();if(!_0x28cb43)return;if(_0x28cb43['startsWith'](_0x1f2f1f(0x205)))_0x44d07a[_0x1f2f1f(0x8e)][_0x1f2f1f(0x1c5)](_0x1f2f1f(0x186)+_0x28cb43[_0x1f2f1f(0x1a0)](0x5)[_0x1f2f1f(0x1fa)]());else{if(_0x28cb43[_0x1f2f1f(0x126)]('[RESULT]'))try{const _0x249730=JSON[_0x1f2f1f(0x200)](_0x28cb43[_0x1f2f1f(0x1a0)](0x8)['trim']());handlePythonResult(_0x44d07a,_0x249730);}catch(_0x3c3b9c){}}});}),_0x44d07a[_0x1e4513(0xd6)]['on'](_0x1e4513(0x177),_0x3f22a7=>{const _0x1939fe=_0x1e4513;_0x44d07a[_0x1939fe(0xd6)]=null;});}catch(_0xc7d591){_0x44d07a['log'][_0x1e4513(0x12f)](_0x1e4513(0xe4)+_0xc7d591[_0x1e4513(0x1d2)]);}}function setupLtmScheduler(_0x140621){const _0x177490=a0_0xe96819;try{if(_0x140621[_0x177490(0x1bd)])_0x140621[_0x177490(0x1bd)][_0x177490(0x9b)]();if(!_0x140621[_0x177490(0x12d)])return;_0x140621[_0x177490(0x1bd)]=schedule[_0x177490(0xcc)](LTM_SCHEDULE,()=>createDailyDigest(_0x140621));}catch(_0x328838){_0x140621[_0x177490(0x8e)]['error'](_0x177490(0x151)+_0x328838['message']);}}function setupModeResetScheduler(_0xe16834){const _0x3fe31f=a0_0xe96819;try{if(_0xe16834['modeResetJob'])_0xe16834['modeResetJob'][_0x3fe31f(0x9b)]();_0xe16834[_0x3fe31f(0x18d)]=schedule[_0x3fe31f(0xcc)](MODE_RESET_SCHEDULE,async()=>{const _0x148fc4=_0x3fe31f;await loadSystemMode(_0xe16834),AUTO_RESET_MODES[_0x148fc4(0xbd)](_0xe16834[_0x148fc4(0xb0)])&&await _0xe16834['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':![]});});}catch(_0x41975a){_0xe16834['log'][_0x3fe31f(0x12f)]('Reset\x20Sched\x20Error:\x20'+_0x41975a['message']);}}function setupDriftAnalysisScheduler(_0x44c27c){const _0x399b57=a0_0xe96819;try{if(_0x44c27c[_0x399b57(0x1bf)])clearInterval(_0x44c27c[_0x399b57(0x1bf)]);if(!_0x44c27c[_0x399b57(0x12d)])return;_0x44c27c[_0x399b57(0x1bf)]=setInterval(()=>runBaselineDriftAnalysis(_0x44c27c),(_0x44c27c[_0x399b57(0x176)]['ltmDriftCheckIntervalHours']||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x44c27c),0x1388);}catch(_0x2f052c){_0x44c27c[_0x399b57(0x8e)]['error']('Drift\x20Sched\x20Error:\x20'+_0x2f052c['message']);}}function setupBriefingScheduler(_0x5226a9){const _0xf393f7=a0_0xe96819;try{if(_0x5226a9['briefingJob'])_0x5226a9[_0xf393f7(0x1a7)]['cancel']();if(!_0x5226a9['config'][_0xf393f7(0xce)])return;const _0x87e323=(_0x5226a9[_0xf393f7(0x176)]['briefingTime']||'08:00')[_0xf393f7(0xa9)](':'),_0x50a417=parseInt(_0x87e323[0x0])||0x8,_0x36b164=parseInt(_0x87e323[0x1])||0x0,_0x23b67d=_0x36b164+'\x20'+_0x50a417+_0xf393f7(0xad);_0x5226a9['briefingJob']=schedule['scheduleJob'](_0x23b67d,()=>{sendMorningBriefing(_0x5226a9);});}catch(_0x455fae){_0x5226a9[_0xf393f7(0x8e)][_0xf393f7(0x12f)](_0xf393f7(0x209)+_0x455fae[_0xf393f7(0x1d2)]);}}function a0_0x18a7(){const _0x22a8d8=['threshold','temperature','analysis.alertReason','lights','text.alarm','eventHistory','system.mode','getEnums','‚ùå\x20VENV\x20CREATION\x20FAILED:\x20','generateContent','Train\x20Comfort','klima','includes','Sequences','36UfEJyL','events.history','ltmLtbWindowDays','diagnosis','\x20new\x20patterns.','Who\x20is\x20present?','analysis.health.isAnomaly','val','doors','exports','python.exe','VACATION','values','scheduleJob','door','briefingEnabled','Energy\x20Intelligence','write','Briefing\x20Error:\x20','üï∏Ô∏è\x20Topology\x20Map\x20updated.','LTM.driftAnalysis.driftDetails','is_anomaly','analysis.health.gaitSpeed','pythonProcess','‚ùå\x20INSTALL\x20FAILED:\x20','find','loc','.\x20(Is\x20\x27python3-venv\x27\x20installed?\x20\x27sudo\x20apt\x20install\x20python3-venv\x27)','Activity\x20Summary','enum.rooms.*','logDuplicates','city','inactivityThresholdHours','rating','json','details','(((.+)+)+)+$','Error\x20launching\x20Python:\x20','Insulation\x20Score','submitFeedback','Creating\x20new\x20VENV...','forEach','writable','‚ö†Ô∏è\x20Python\x20VENV\x20or\x20PIP\x20missing.\x20Installing...','now','weatherInstance','üõãÔ∏è\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','üß™\x20Simulating\x20Butler\x20Proposal:\x20','üõãÔ∏è\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','LTM.driftAnalysis','dailyDigests','stringify','.forecast.current.state','motion','bin','isGracePeriodActive','analysis.security.lastCheck','automation.triggerAction','7683242LGeEmQ','Last\x20raw\x20event','apply','setState','models/gemini-flash-latest','\x22\x20install\x20-r\x20\x22','openweathermap','stdout','PRIORIT√ÑT:\x20Gesundheit/AAL.','shift','getForeignStateAsync','Alert\x20Reason','37812nOIuZS','getGenerativeModel','sendTo','contact','645640lfLqdQ','toLocaleTimeString','analysis.energy.forecast','analysis.energy','675484ghBWjX','Today\x20Vector\x20(15m)','success','üöÄ\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','system.isPresent','common','longitude','TRAIN_HEALTH','toISOString','t√ºr','system.presenceWho','Gait\x20Speed\x20Trend','state','subscribeForeignStatesAsync','telegram','Success','analysis.security.topologyMatrix','\x20=\x20','events.history_debug_00','map','filter','analysis.automation.description','system','round','geminiModel','startsWith','indicator','analysis.training.triggerSecurity','getLtmData','analysis.automation.targetValue','heating','1000220JnevIJ','isProVersion','dimmer','error','has','Description','python3\x20-m\x20venv\x20\x22','bind','analysis.health.todayVector','Delete\x20failed:\x20','window','EACCES','Skipped\x20(No\x20AI\x20or\x20Data)','KI-Modell\x20nicht\x20initialisiert','Last\x20Check','bewegung','getOverviewData','ANALYZE_TREND','setObjectNotExistsAsync','analysis.training.status','Detected\x20Patterns','getCalendarNames','minDaysForBaseline','analysis.energy.insulationScore','üß†\x20Triggering\x20Security\x20Training...','namespace','\x20->\x20','analysis.automation.detectedPatterns','SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20','Trend','cogni-living','analysis.automation.targetId','onMessage','text','Pattern\x20Detected','triggerBriefing','level.dimmer','LTM\x20Sched\x20Error:\x20','toFixed','System\x20Mode','object','Alert\x20Status','WiFi\x20Presence\x20detected.','presence','SECURITY_RESULT','unload','python3','Scripts','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','cogni-living\x20adapter\x20starting\x20(v','targetId','testApiKey','response','\x20Tage)','existsSync','@iobroker/adapter-core','‚úÖ\x20Fast-Boot:\x20Environment\x20healthy.\x20Skipping\x20installation.','analysis.security','payload','licht','pr√§senz','version','rmSync','analysis.automation.triggerAction','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','System','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','Event\x20History','.Current.WeatherText','TRAIN_ENERGY','subscribeStates','analysis.security.lastScore','members','TOPOLOGY_RESULT','config','close','vacation','getObjectAsync','analysisHistory','exitTimer','Health\x20Analysis','Restoring\x20sensor\x20cache...','.Current.Temperature','accuweather','isPresent','Security\x20Monitor','Thermodynamics','toString','Topology\x20Matrix','channel','[PYTHON]\x20','party','timestamp','Anomaly\x20Score','HEALTH_RESULT','onReady','requirements.txt','modeResetJob','getForeignObjectAsync','system.config','33lMHkWc','analysis.analysisHistory','.forecast.current.temp','unshift','Kein\x20API\x20Key!','command','search','N/A','LTM.trainingData.thermodynamics','join','stdin','PRIORIT√ÑT:\x20Sicherheit.','enum','boolean','useWeather','stateChange','substring','genAI','indicator.alarm','warn','TRAIN_SECURITY','useCalendar','node-schedule','briefingJob','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','üëâ\x20L√ñSUNG\x20(SSH):\x20sudo\x20chown\x20-R\x20iobroker:iobroker\x20','pop','autoApply','getHours','getFullYear','analysis.training.triggerTopology',')\x20-\x20SAFE\x20BOOT','keys','Temperature\x20Forecast','from','analysis.history_debug_00','36QxmDYa','analysis.training','Could\x20not\x20load\x20rooms:\x20','change_percent','geminiApiKey','slice','triggerDailyDigest','number','14471IgDQzk','ltmJob','Target\x20Value','driftAnalysisTimer','callback','PONG','temperatur','setStateAsync','analysis.training.triggerEnergy','debug','analysis.health.trendDiagnosis','onUnload','Failed:\x20','python_service','value','string','Digest','Fokus\x20auf\x20Familienroutinen.','Err:\x20','ü§ñ\x20Autopilot:\x20Running\x20periodic\x20analysis...','main','PREDICT_ENERGY','message','online','pip.exe','5445376PeYHNO','dismissAutomation','dependencyInstallInProgress','getDate','LTM.baselineStatus','analysis.automation.patternDetected','communicate.request','.venv','length','lastAlertState','Started...','add','summary','\x0aSTB:\x20','\x0aGrund:\x20','detected','scanDevices','Fokus\x20auf\x20Komfort.','apiKey','Heating\x20Score','Installing\x20pip\x20packages...\x20(Caching\x20enabled)','LTM.rawEventLog','devices','ANALYZE_HEALTH','NORMAL','lampe','replace','simulateButler','.forecast.current.temperature','LTM','üåÖ\x20Morning\x20Briefing:\x0a','baselineDrift','name','kill','analysis.health','üîç\x20Scan\x20finished.\x20Found\x20','ANALYZE_SEQUENCE','trim','HEALTH_TRAIN_RESULT','occupancy','üîç\x20Scanning\x20for\x20devices\x20(Aggressive\x20Parent\x20Lookup)...','extendObjectAsync','Train\x20Health','parse','guest','Keine\x20Wetterdaten\x20verf√ºgbar.','ack','AI\x20Training','[LOG]','schalter','analysis.trigger','enum.functions.*','Briefing\x20Sched\x20Error:\x20','selectedFunctionIds','üï∏Ô∏è\x20Building\x20Topology\x20Matrix...','systemUUID','Anomaly\x20Detected','No\x20instance','insulation','ANOMALY','PARTY','[RECORDER]\x20Error:\x20','path','date','Regel\x20erkannt:\x20','analysis.isAlert','Success:\x20','push','User\x20dismissed\x20automation\x20proposal.','button','analysis.automation.autoApply','setHours','sensorLastValues','win32','GUEST','Permission\x20denied','platform','Gemini\x20AI\x20initialized.','\x22\x20-c\x20\x22import\x20tensorflow;\x20print(\x27libs_ok\x27)\x22','daswetter','fill','latitude','TRAINING_COMPLETE','undefined','exitGraceTimer','floor','status','switch','analysisTimer','analysis.training.triggerComfort','notifyTelegramEnabled','activityLevel','getMonth','GAIT_RESULT','analysis.training.triggerHealth','heizung','outdoorSensorId','splice','weatherunderground','isExit','Unknown','üêç\x20Python\x20Pong','üõãÔ∏è\x20BUTLER:\x20Found\x20','Kalender\x20deaktiviert.','analysis.triggerBriefing','Trigger\x20Analysis','Daily\x20Digests','presenceDevices','getTime','analysisInterval','info','Train\x20Security','type','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','N/A\x20(Learning)','setForeignStateAsync','Sec-Training\x20started...','log','analysis.health.trendValue','Gemini\x20Init\x20Error:\x20','getForeignObjectsAsync','notifyTelegramInstance','fenster','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','LTM.processingStatus','rawEventLog','analysis.health.lastCheck','getMinutes','analysis.security.currentThreshold','getStateAsync','cancel','reason','Kein\x20API\x20Key.','service.py','normal','Build\x20Topology','LTM.trainingData.sequences','Enum','Training\x20Status','light','systemConfig','@google/generative-ai','location','toLowerCase','split','python','Activity-Level','Wetterdaten\x20deaktiviert.','\x20*\x20*\x20*','0\x203\x20*\x20*\x20*','application/json','currentSystemMode'];a0_0x18a7=function(){return _0x22a8d8;};return a0_0x18a7();}async function runBaselineDriftAnalysis(_0xe31111){const _0x78b7e=a0_0xe96819;if(!_0xe31111['isProVersion']||!_0xe31111[_0x78b7e(0x125)])return;const _0x11ce87=_0xe31111[_0x78b7e(0x176)]['ltmStbWindowDays']||0xe;if(_0xe31111[_0x78b7e(0xf1)][_0x78b7e(0x1dd)]<_0x11ce87+0x7){await _0xe31111['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x78b7e(0x8b),'ack':!![]});return;}const _0x17d7ee=_0xe31111[_0x78b7e(0xf1)]['slice'](-_0x11ce87),_0x510fa0=_0xe31111['dailyDigests'][_0x78b7e(0x1b9)](0x0,_0xe31111[_0x78b7e(0xf1)][_0x78b7e(0x1dd)]-_0x11ce87),_0x2d8799=_0x78b7e(0x16c)+JSON[_0x78b7e(0xf2)](_0x510fa0)+_0x78b7e(0x1e2)+JSON[_0x78b7e(0xf2)](_0x17d7ee);try{const _0x1b8087=await _0xe31111[_0x78b7e(0x125)]['generateContent'](_0x2d8799),_0x50df52=JSON[_0x78b7e(0x200)](_0x1b8087['response'][_0x78b7e(0x14d)]()['replace'](/```json|```/g,'')[_0x78b7e(0x1fa)]());_0x50df52[_0x78b7e(0x1f4)]&&(await _0xe31111[_0x78b7e(0x1c3)](LTM_DP_DRIFT_STATUS,{'val':_0x50df52[_0x78b7e(0x1f4)],'ack':!![]}),await _0xe31111[_0x78b7e(0x1c3)](LTM_DP_DRIFT_DETAILS,{'val':_0x50df52['driftDetails'],'ack':!![]}),await _0xe31111[_0x78b7e(0x1c3)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0x1a0768){}}async function createDailyDigest(_0x82861d){const _0x5935ef=a0_0xe96819;if(!_0x82861d[_0x5935ef(0x12d)])return;await _0x82861d[_0x5935ef(0x1c3)](LTM_DP_STATUS,{'val':_0x5935ef(0x1df),'ack':!![]});if(!_0x82861d[_0x5935ef(0x125)]||_0x82861d[_0x5935ef(0x96)][_0x5935ef(0x1dd)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x82861d['setStateAsync'](LTM_DP_STATUS,{'val':_0x5935ef(0x138),'ack':!![]});return;}const _0xc83075=JSON['parse'](JSON[_0x5935ef(0xf2)](_0x82861d[_0x5935ef(0x96)])),_0x396d21=_0xc83075['length'],_0x3e4d07=_0x5935ef(0x94)+JSON[_0x5935ef(0xf2)](_0xc83075);try{const _0x7ca9a0=await _0x82861d[_0x5935ef(0x125)][_0x5935ef(0xba)](_0x3e4d07),_0xbfdce0=JSON[_0x5935ef(0x200)](_0x7ca9a0[_0x5935ef(0x160)][_0x5935ef(0x14d)]()[_0x5935ef(0x1ef)](/```json|```/g,'')['trim']()),_0x5979b4={'timestamp':new Date()['toISOString'](),'eventCount':_0x396d21,'summary':_0xbfdce0[_0x5935ef(0x1e1)]||_0x5935ef(0x1cc),'activityLevel':_0xbfdce0[_0x5935ef(0x230)]||'normal','systemMode':_0x82861d[_0x5935ef(0xb0)]};_0x82861d['dailyDigests'][_0x5935ef(0x218)](_0x5979b4),await saveDailyDigests(_0x82861d),_0x82861d['rawEventLog']=[],await saveRawEventLog(_0x82861d),await _0x82861d[_0x5935ef(0x1c3)](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x82861d[_0x5935ef(0x12d)])sendToPython(_0x82861d,'ANALYZE_HEALTH',{'digest':_0x5979b4});}catch(_0x3a264e){_0x82861d[_0x5935ef(0x8e)][_0x5935ef(0x12f)](_0x3a264e[_0x5935ef(0x1d2)]);}}async function runAutopilot(_0x4b860f){const _0x5563ac=a0_0xe96819;_0x4b860f[_0x5563ac(0x8e)][_0x5563ac(0x1c5)](_0x5563ac(0x1cf)),await runGeminiAnalysis(_0x4b860f),updateHealthVector(_0x4b860f),triggerGaitAnalysis(_0x4b860f),triggerEnergyPrediction(_0x4b860f);}async function triggerGaitAnalysis(_0x59a179){const _0x4198a1=a0_0xe96819;if(!_0x59a179[_0x4198a1(0x12d)])return;try{const _0x52b095=await _0x59a179[_0x4198a1(0x9a)](_0x4198a1(0xa1));_0x52b095&&_0x52b095['val']&&sendToPython(_0x59a179,'ANALYZE_GAIT',{'sequences':JSON['parse'](_0x52b095['val'])});}catch(_0x2d696b){}}async function triggerEnergyPrediction(_0x120680){const _0x923b95=a0_0xe96819;if(!_0x120680['isProVersion'])return;try{const _0x529b3e=await getOutsideTemperatureNumeric(_0x120680);if(_0x529b3e===null)return;const _0x3582bf={},_0x37f305=_0x120680[_0x923b95(0x176)][_0x923b95(0x1eb)]||[];for(const _0x3ff78e of _0x37f305){if(_0x3ff78e['type']===_0x923b95(0xb2)&&_0x3ff78e[_0x923b95(0xa7)]){const _0x5269e3=_0x120680['sensorLastValues'][_0x3ff78e['id']];if(_0x5269e3!==undefined)_0x3582bf[_0x3ff78e[_0x923b95(0xa7)]]=_0x5269e3;}}Object[_0x923b95(0x1b0)](_0x3582bf)['length']>0x0&&sendToPython(_0x120680,_0x923b95(0x1d1),{'current_temps':_0x3582bf,'t_out':_0x529b3e});}catch(_0x29e37b){}}function updateHealthVector(_0x1c057e){const _0x10206a=a0_0xe96819;if(!_0x1c057e['rawEventLog']||_0x1c057e['rawEventLog'][_0x10206a(0x1dd)]===0x0)return;const _0x486e60=new Array(0x60)[_0x10206a(0x225)](0x0),_0x2611d7=new Date()[_0x10206a(0x21c)](0x0,0x0,0x0,0x0);_0x1c057e[_0x10206a(0x96)]['forEach'](_0x9d5d6=>{const _0x4d2d72=_0x10206a,_0x12648d=new Date(_0x9d5d6[_0x4d2d72(0x188)]);if(_0x12648d[_0x4d2d72(0x85)]()>=_0x2611d7){const _0x101395=_0x12648d[_0x4d2d72(0x1ac)](),_0x73da7d=_0x12648d[_0x4d2d72(0x98)](),_0x5b8e38=_0x101395*0x4+Math[_0x4d2d72(0x22a)](_0x73da7d/0xf);if(_0x5b8e38>=0x0&&_0x5b8e38<0x60)_0x486e60[_0x5b8e38]++;}}),_0x1c057e[_0x10206a(0x1c3)]('analysis.health.todayVector',{'val':JSON['stringify'](_0x486e60),'ack':!![]});}async function scanForDevices(_0x2ab073,_0x1d067e){const _0x2d566f=a0_0xe96819;_0x2ab073['log'][_0x2d566f(0x87)](_0x2d566f(0x1fd));const _0x3bd5fd=[],_0x3f7de2=await _0x2ab073[_0x2d566f(0x91)]('*'),_0x59e5ef={};try{const _0x2a0727=await _0x2ab073['getForeignObjectsAsync'](_0x2d566f(0xdc),_0x2d566f(0x19c));for(const _0x395f50 in _0x2a0727){const _0x36e3b7=_0x2a0727[_0x395f50],_0xbe8b2e=(_0x36e3b7[_0x2d566f(0x112)]&&typeof _0x36e3b7['common'][_0x2d566f(0x1f5)]===_0x2d566f(0x154)?_0x36e3b7[_0x2d566f(0x112)][_0x2d566f(0x1f5)]['de']:_0x36e3b7[_0x2d566f(0x112)][_0x2d566f(0x1f5)])||_0x36e3b7['common'][_0x2d566f(0x1f5)];if(_0x36e3b7['common']&&_0x36e3b7[_0x2d566f(0x112)][_0x2d566f(0x174)])for(const _0x877ae3 of _0x36e3b7['common'][_0x2d566f(0x174)]){_0x59e5ef[_0x877ae3]=_0xbe8b2e;}}}catch(_0x154e71){_0x2ab073['log'][_0x2d566f(0x1a3)](_0x2d566f(0x1b6)+_0x154e71[_0x2d566f(0x1d2)]);}let _0x144f16=null,_0x40c292={};if(_0x1d067e[_0x2d566f(0x20a)]&&_0x1d067e[_0x2d566f(0x20a)]['length']>0x0){_0x144f16=new Set();for(const _0x5141ff of _0x1d067e[_0x2d566f(0x20a)]){const _0x15c7d5=await _0x2ab073[_0x2d566f(0x18e)](_0x5141ff);if(_0x15c7d5&&_0x15c7d5[_0x2d566f(0x112)]&&_0x15c7d5[_0x2d566f(0x112)][_0x2d566f(0x174)]){let _0x11fb47=null;const _0x1c29f2=_0x5141ff[_0x2d566f(0xa8)]();if(_0x1c29f2[_0x2d566f(0xbd)](_0x2d566f(0xa4))||_0x1c29f2['includes'](_0x2d566f(0x167)))_0x11fb47=_0x2d566f(0xa4);else{if(_0x1c29f2[_0x2d566f(0xbd)](_0x2d566f(0x12b))||_0x1c29f2[_0x2d566f(0xbd)](_0x2d566f(0x234)))_0x11fb47='temperature';else{if(_0x1c29f2[_0x2d566f(0xbd)](_0x2d566f(0x136))||_0x1c29f2[_0x2d566f(0xbd)](_0x2d566f(0x93)))_0x11fb47=_0x2d566f(0xcd);}}for(const _0x439a57 of _0x15c7d5[_0x2d566f(0x112)][_0x2d566f(0x174)]){_0x144f16[_0x2d566f(0x1e0)](_0x439a57);if(_0x11fb47)_0x40c292[_0x439a57]=_0x11fb47;}}}}for(const _0x48642d in _0x3f7de2){const _0x1e0819=_0x3f7de2[_0x48642d];if(_0x1e0819&&_0x1e0819[_0x2d566f(0x112)]&&_0x1e0819[_0x2d566f(0x89)]===_0x2d566f(0x119)){let _0x3cc275=![],_0x62523f=null;if(_0x144f16){if(_0x144f16[_0x2d566f(0x130)](_0x48642d))_0x3cc275=!![];else{const _0x504f6b=_0x48642d['split']('.'),_0x46e152=_0x504f6b[_0x2d566f(0x1b9)](0x0,-0x1)[_0x2d566f(0x199)]('.'),_0x83a645=_0x504f6b[_0x2d566f(0x1b9)](0x0,-0x2)['join']('.');if(_0x144f16[_0x2d566f(0x130)](_0x46e152)){_0x3cc275=!![];if(_0x40c292[_0x46e152])_0x62523f=_0x40c292[_0x46e152];}else{if(_0x144f16['has'](_0x83a645)){_0x3cc275=!![];if(_0x40c292[_0x83a645])_0x62523f=_0x40c292[_0x83a645];}}}}if(_0x62523f)_0x40c292[_0x48642d]=_0x62523f;const _0x3f9277=(_0x1e0819[_0x2d566f(0x112)][_0x2d566f(0x1f5)]&&typeof _0x1e0819[_0x2d566f(0x112)][_0x2d566f(0x1f5)]==='object'?_0x1e0819[_0x2d566f(0x112)][_0x2d566f(0x1f5)]['de']:_0x1e0819['common'][_0x2d566f(0x1f5)])||'',_0x106081=(_0x1e0819[_0x2d566f(0x112)]['role']||'')['toLowerCase'](),_0x2271cb=_0x3f9277[_0x2d566f(0xa8)]();if(!_0x62523f){if(_0x1d067e[_0x2d566f(0xf4)]&&(_0x106081[_0x2d566f(0xbd)](_0x2d566f(0xf4))||_0x2271cb[_0x2d566f(0xbd)](_0x2d566f(0x13b))||_0x106081['includes']('presence')))_0x62523f=_0x2d566f(0xf4);else{if(_0x1d067e[_0x2d566f(0xc7)]&&(_0x106081[_0x2d566f(0xbd)](_0x2d566f(0xcd))||_0x106081[_0x2d566f(0xbd)](_0x2d566f(0x136))||_0x2271cb['includes'](_0x2d566f(0x116))||_0x2271cb[_0x2d566f(0xbd)]('fenster')||_0x106081[_0x2d566f(0xbd)](_0x2d566f(0x108))))_0x62523f=_0x2d566f(0xcd);else{if(_0x1d067e[_0x2d566f(0xb4)]&&(_0x106081[_0x2d566f(0xbd)](_0x2d566f(0xa4))||_0x106081['includes'](_0x2d566f(0x22c))||_0x2271cb[_0x2d566f(0xbd)]('licht')||_0x106081['includes'](_0x2d566f(0x150))))_0x62523f='light';else{if(_0x1d067e[_0x2d566f(0xb2)]&&(_0x106081[_0x2d566f(0xbd)](_0x2d566f(0xb2))||_0x2271cb[_0x2d566f(0xbd)](_0x2d566f(0x1c2))||_0x106081[_0x2d566f(0xbd)]('thermostat')))_0x62523f=_0x2d566f(0xb2);}}}}if((_0x3cc275||_0x62523f)&&_0x62523f){let _0x50b440=_0x3f9277||_0x48642d;const _0x1f5d99=_0x48642d[_0x2d566f(0xa9)]('.');let _0x3bbe55=![];const _0x4463df=_0x1f5d99[_0x2d566f(0x1b9)](0x0,-0x1)['join']('.'),_0x42d2c9=_0x3f7de2[_0x4463df];if(_0x42d2c9&&_0x42d2c9[_0x2d566f(0x112)]&&_0x42d2c9['common']['name']){let _0x43fff7=(typeof _0x42d2c9[_0x2d566f(0x112)][_0x2d566f(0x1f5)]===_0x2d566f(0x154)?_0x42d2c9[_0x2d566f(0x112)][_0x2d566f(0x1f5)]['de']:_0x42d2c9[_0x2d566f(0x112)]['name'])||'';_0x43fff7&&_0x43fff7!=='undefined'&&(!_0x43fff7[_0x2d566f(0xa8)]()[_0x2d566f(0xbd)](_0x2d566f(0x185))&&_0x43fff7!==_0x4463df[_0x2d566f(0xa9)]('.')[_0x2d566f(0x1aa)]()&&(_0x50b440=_0x43fff7+'\x20('+(_0x3f9277||_0x48642d['split']('.')['pop']())+')',_0x3bbe55=!![]));}if(!_0x3bbe55){const _0x3cfb07=_0x1f5d99[_0x2d566f(0x1b9)](0x0,-0x2)[_0x2d566f(0x199)]('.'),_0x1d7c34=_0x3f7de2[_0x3cfb07];if(_0x1d7c34&&_0x1d7c34['common']&&_0x1d7c34[_0x2d566f(0x112)][_0x2d566f(0x1f5)]){let _0x559778=(typeof _0x1d7c34['common']['name']===_0x2d566f(0x154)?_0x1d7c34[_0x2d566f(0x112)][_0x2d566f(0x1f5)]['de']:_0x1d7c34[_0x2d566f(0x112)][_0x2d566f(0x1f5)])||'';_0x559778&&_0x559778!==_0x2d566f(0x228)&&(_0x50b440=_0x559778+'\x20('+(_0x3f9277||_0x48642d[_0x2d566f(0xa9)]('.')[_0x2d566f(0x1aa)]())+')');}}let _0x3d736c=_0x59e5ef[_0x48642d];if(!_0x3d736c){const _0x3054f2=_0x48642d['split']('.')['slice'](0x0,-0x1)[_0x2d566f(0x199)]('.');_0x3d736c=_0x59e5ef[_0x3054f2];}if(!_0x3d736c){const _0x522715=_0x48642d['split']('.')[_0x2d566f(0x1b9)](0x0,-0x2)[_0x2d566f(0x199)]('.');_0x3d736c=_0x59e5ef[_0x522715];}if(!_0x3d736c){if(_0x1f5d99[_0x2d566f(0x1dd)]>0x2)_0x3d736c=_0x1f5d99[0x2];}const _0x42e40d=_0x3cc275?0x5a:0x32,_0xeee75e=_0x3cc275?_0x2d566f(0xa2):'Heuristic';_0x3bd5fd[_0x2d566f(0x218)]({'id':_0x48642d,'name':_0x50b440,'type':_0x62523f,'location':_0x3d736c||'','_score':_0x42e40d,'_source':_0xeee75e});}}}return _0x2ab073[_0x2d566f(0x8e)][_0x2d566f(0x87)](_0x2d566f(0x1f8)+_0x3bd5fd[_0x2d566f(0x1dd)]+'\x20candidates.'),_0x3bd5fd;}async function getWeatherContext(_0x161457){const _0x27feba=a0_0xe96819;if(!_0x161457[_0x27feba(0x176)][_0x27feba(0x19e)]||!_0x161457[_0x27feba(0x176)][_0x27feba(0xec)])return _0x27feba(0xac);try{const _0x14cfb6=_0x161457['config']['weatherInstance'];let _0x4444aa=await _0x161457[_0x27feba(0x103)](_0x14cfb6+_0x27feba(0x17e));if(!_0x4444aa)_0x4444aa=await _0x161457['getForeignStateAsync'](_0x14cfb6+_0x27feba(0x1f1));let _0x51584d=await _0x161457[_0x27feba(0x103)](_0x14cfb6+_0x27feba(0x170));if(!_0x51584d)_0x51584d=await _0x161457[_0x27feba(0x103)](_0x14cfb6+_0x27feba(0xf3));if(_0x4444aa&&_0x51584d)return _0x4444aa['val']+'¬∞C,\x20'+_0x51584d[_0x27feba(0xc6)];}catch(_0x400313){}return _0x27feba(0x202);}async function getCalendarContext(_0x31ffb2){const _0x5bde9d=a0_0xe96819;if(!_0x31ffb2[_0x5bde9d(0x176)][_0x5bde9d(0x1a5)]||!_0x31ffb2[_0x5bde9d(0x176)]['calendarInstance'])return _0x5bde9d(0x80);return'Keine\x20Termine.';}async function getCalendarNames(_0x120ce4,_0x3db032){return[];}async function saveFeedback(_0x1a2f5e,_0xb6efd0){const _0x5c5df7=a0_0xe96819;_0x1a2f5e[_0x5c5df7(0x8e)][_0x5c5df7(0x87)]('üìù\x20Feedback\x20received:\x20'+_0xb6efd0[_0x5c5df7(0xe0)]);}async function sendMorningBriefing(_0x453f3e){const _0x5bea57=a0_0xe96819;if(!_0x453f3e[_0x5bea57(0x125)])return;try{const _0x5221b4=_0x5bea57(0x8a),_0x21417d=await _0x453f3e['geminiModel'][_0x5bea57(0xba)](_0x5221b4),_0x3c9aa1=_0x21417d[_0x5bea57(0x160)][_0x5bea57(0x14d)]();sendNotification(_0x453f3e,_0x5bea57(0x1f3)+_0x3c9aa1);}catch(_0x472bd3){_0x453f3e[_0x5bea57(0x8e)]['error'](_0x5bea57(0xd1)+_0x472bd3[_0x5bea57(0x1d2)]);}}async function initZombies(_0x1f37a4){const _0x307b65=a0_0xe96819;try{const _0x4035ef=[_0x307b65(0x1b3),_0x307b65(0x11f)];for(const _0x59cafe of _0x4035ef){try{const _0x3f19a1=await _0x1f37a4[_0x307b65(0x179)](_0x59cafe);if(_0x3f19a1)await _0x1f37a4['delObjectAsync'](_0x59cafe);}catch(_0x4c2c3b){}}}catch(_0x3685de){}}async function checkLicense(_0x1d46a0){return!![];}async function initHistory(_0x3b3b35){const _0x383722=a0_0xe96819;try{const _0x32d0e7=await _0x3b3b35[_0x383722(0x9a)](_0x383722(0xc0));_0x32d0e7&&_0x32d0e7[_0x383722(0xc6)]&&(_0x3b3b35['eventHistory']=JSON[_0x383722(0x200)](_0x32d0e7[_0x383722(0xc6)][_0x383722(0x183)]()));}catch(_0x273cb0){_0x3b3b35[_0x383722(0xb6)]=[];}try{const _0xedec65=await _0x3b3b35[_0x383722(0x9a)](_0x383722(0x191));if(_0xedec65&&_0xedec65['val'])_0x3b3b35[_0x383722(0x17a)]=JSON['parse'](_0xedec65[_0x383722(0xc6)][_0x383722(0x183)]());}catch(_0x4bc442){_0x3b3b35[_0x383722(0x17a)]=[];}if(_0x3b3b35[_0x383722(0xb6)]&&_0x3b3b35['eventHistory']['length']>0x0){_0x3b3b35['log'][_0x383722(0x87)](_0x383722(0x17d));for(let _0x46833a=_0x3b3b35[_0x383722(0xb6)]['length']-0x1;_0x46833a>=0x0;_0x46833a--){const _0x46593a=_0x3b3b35['eventHistory'][_0x46833a];if(_0x46593a&&_0x46593a['id']!==undefined&&_0x46593a[_0x383722(0x1ca)]!==undefined)_0x3b3b35[_0x383722(0x21d)][_0x46593a['id']]=_0x46593a[_0x383722(0x1ca)];}}}async function initSystemConfig(_0x3d38ad){const _0x298d67=a0_0xe96819;try{const _0x685823=await _0x3d38ad[_0x298d67(0x18e)]('system.config');if(_0x685823&&_0x685823[_0x298d67(0x112)])_0x3d38ad[_0x298d67(0xa5)]={'latitude':_0x685823[_0x298d67(0x112)]['latitude']||0x0,'longitude':_0x685823[_0x298d67(0x112)]['longitude']||0x0,'city':_0x685823[_0x298d67(0x112)][_0x298d67(0xde)]||''};}catch(_0x3f4f50){}}async function createAllObjects(_0x40f900){const _0x50b340=a0_0xe96819;await _0x40f900[_0x50b340(0x1fe)](_0x50b340(0x123),{'type':_0x50b340(0x185),'common':{'name':_0x50b340(0x16d)},'native':{}}),await _0x40f900[_0x50b340(0x1fe)](SYSTEM_DP_MODE,{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0x153),'type':'string','role':'state','read':!![],'write':!![],'def':SYSTEM_MODES[_0x50b340(0x1ed)]},'native':{}}),await _0x40f900[_0x50b340(0x13e)]('system.presenceWho',{'type':'state','common':{'name':_0x50b340(0xc4),'type':_0x50b340(0x1cb),'role':_0x50b340(0x14d),'read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)]('events.lastEvent',{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0xfa),'type':_0x50b340(0x1cb),'role':_0x50b340(0xe1),'read':!![],'write':![]},'native':{}}),await _0x40f900['setObjectNotExistsAsync'](_0x50b340(0xc0),{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0x16f),'type':'string','role':_0x50b340(0xe1),'read':!![],'write':![]},'native':{}}),await _0x40f900['extendObjectAsync'](_0x50b340(0x1b5),{'type':_0x50b340(0x185),'common':{'name':_0x50b340(0x204)},'native':{}}),await _0x40f900[_0x50b340(0x13e)](_0x50b340(0x128),{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0x88),'type':_0x50b340(0x19d),'role':_0x50b340(0x21a),'read':!![],'write':!![]},'native':{}}),await _0x40f900['setObjectNotExistsAsync'](_0x50b340(0x233),{'type':'state','common':{'name':_0x50b340(0x1ff),'type':'boolean','role':_0x50b340(0x21a),'read':!![],'write':!![]},'native':{}}),await _0x40f900['setObjectNotExistsAsync'](_0x50b340(0x1c4),{'type':'state','common':{'name':'Train\x20Energy','type':'boolean','role':_0x50b340(0x21a),'read':!![],'write':!![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)](_0x50b340(0x22e),{'type':'state','common':{'name':_0x50b340(0xbb),'type':_0x50b340(0x19d),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)](_0x50b340(0x1ae),{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0xa0),'type':_0x50b340(0x19d),'role':_0x50b340(0x21a),'read':!![],'write':!![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)]('analysis.training.status',{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0xa3),'type':'string','role':_0x50b340(0x14d),'read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x1fe)](_0x50b340(0x165),{'type':_0x50b340(0x185),'common':{'name':_0x50b340(0x181)},'native':{}}),await _0x40f900[_0x50b340(0x13e)](_0x50b340(0x173),{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0x189),'type':_0x50b340(0x1bb),'role':'value','read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)](_0x50b340(0x99),{'type':'state','common':{'name':'Current\x20Threshold','type':_0x50b340(0x1bb),'role':_0x50b340(0x1ca),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x40f900[_0x50b340(0x13e)](_0x50b340(0xf7),{'type':'state','common':{'name':_0x50b340(0x13a),'type':_0x50b340(0x1cb),'role':'date','read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)](_0x50b340(0x11d),{'type':'state','common':{'name':_0x50b340(0x184),'type':_0x50b340(0x1cb),'role':_0x50b340(0xe1),'read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x1fe)](_0x50b340(0x1f7),{'type':_0x50b340(0x185),'common':{'name':_0x50b340(0x17c)},'native':{}}),await _0x40f900['setObjectNotExistsAsync'](_0x50b340(0x97),{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0x13a),'type':_0x50b340(0x1cb),'role':_0x50b340(0x214),'read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)]('analysis.health.isAnomaly',{'type':'state','common':{'name':_0x50b340(0x20d),'type':_0x50b340(0x19d),'role':_0x50b340(0x127),'read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)](_0x50b340(0x1c6),{'type':'state','common':{'name':_0x50b340(0x149),'type':'string','role':_0x50b340(0x14d),'read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)](_0x50b340(0x8f),{'type':_0x50b340(0x119),'common':{'name':'Trend\x20Value','type':_0x50b340(0x1bb),'role':'value','read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)](_0x50b340(0x134),{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0x10e),'type':_0x50b340(0x1cb),'role':_0x50b340(0xe1),'read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)]('analysis.health.gaitSpeed',{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0x118),'type':_0x50b340(0x1bb),'role':_0x50b340(0x1ca),'read':!![],'write':![]},'native':{}}),await _0x40f900['extendObjectAsync'](_0x50b340(0x10c),{'type':_0x50b340(0x185),'common':{'name':_0x50b340(0xcf)},'native':{}}),await _0x40f900['setObjectNotExistsAsync'](_0x50b340(0x143),{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0xe5),'type':_0x50b340(0x1cb),'role':_0x50b340(0x14d),'read':!![],'write':![]},'native':{}}),await _0x40f900['setObjectNotExistsAsync']('analysis.energy.heatingScore',{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0x1e8),'type':_0x50b340(0x1cb),'role':_0x50b340(0x14d),'read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)](_0x50b340(0x10b),{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0x1b1),'type':_0x50b340(0x1cb),'role':_0x50b340(0xe1),'read':!![],'write':![]},'native':{}}),await _0x40f900['extendObjectAsync']('LTM',{'type':_0x50b340(0x185),'common':{'name':_0x50b340(0x1f2)},'native':{}}),await _0x40f900['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':_0x50b340(0x119),'common':{'name':'Raw\x20Log','type':_0x50b340(0x1cb),'role':_0x50b340(0xe1),'read':!![],'write':![]},'native':{}}),await _0x40f900['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0x83),'type':_0x50b340(0x1cb),'role':_0x50b340(0xe1),'read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)]('LTM.trainingData.sequences',{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0xbe),'type':'string','role':_0x50b340(0xe1),'read':!![],'write':![]},'native':{}}),await _0x40f900['setObjectNotExistsAsync'](_0x50b340(0x198),{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0x182),'type':'string','role':_0x50b340(0xe1),'read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)](_0x50b340(0x207),{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0x82),'type':'boolean','role':_0x50b340(0x21a),'read':!![],'write':!![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)](_0x50b340(0x81),{'type':_0x50b340(0x119),'common':{'name':'Trigger\x20Briefing','type':_0x50b340(0x19d),'role':_0x50b340(0x21a),'read':!![],'write':!![]},'native':{}}),await _0x40f900['setObjectNotExistsAsync']('analysis.isAlert',{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0x155),'type':_0x50b340(0x19d),'role':_0x50b340(0x1a2),'read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)]('analysis.alertReason',{'type':'state','common':{'name':_0x50b340(0x104),'type':'string','role':_0x50b340(0xb5),'read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)]('analysis.activitySummary',{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0xdb),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)](_0x50b340(0x1da),{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0x14e),'type':'boolean','role':'indicator','read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)]('analysis.automation.description',{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0x131),'type':_0x50b340(0x1cb),'role':_0x50b340(0x14d),'read':!![],'write':![]},'native':{}}),await _0x40f900['setObjectNotExistsAsync']('analysis.automation.detectedPatterns',{'type':_0x50b340(0x119),'common':{'name':_0x50b340(0x140),'type':_0x50b340(0x1cb),'role':_0x50b340(0xe1),'read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)](_0x50b340(0x14b),{'type':_0x50b340(0x119),'common':{'name':'Target\x20ID','type':_0x50b340(0x1cb),'role':'text','read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)](_0x50b340(0x12a),{'type':'state','common':{'name':_0x50b340(0x1be),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)](_0x50b340(0x21b),{'type':'state','common':{'name':'Auto\x20Apply','type':_0x50b340(0x19d),'role':_0x50b340(0x22c),'read':!![],'write':!![]},'native':{}}),await _0x40f900[_0x50b340(0x13e)](_0x50b340(0x16b),{'type':_0x50b340(0x119),'common':{'name':'Trigger\x20Action','type':_0x50b340(0x19d),'role':_0x50b340(0x21a),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x3da9b1){const _0x2e351d=a0_0xe96819;try{const _0x22d54a=await _0x3da9b1[_0x2e351d(0x9a)](SYSTEM_DP_MODE);_0x22d54a&&_0x22d54a[_0x2e351d(0xc6)]&&Object['values'](SYSTEM_MODES)['includes'](_0x22d54a[_0x2e351d(0xc6)])?_0x3da9b1['currentSystemMode']=_0x22d54a[_0x2e351d(0xc6)]:(_0x3da9b1['currentSystemMode']=SYSTEM_MODES[_0x2e351d(0x1ed)],await _0x3da9b1[_0x2e351d(0x1c3)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x2e351d(0x1ed)],'ack':!![]}));}catch(_0x54f60b){_0x3da9b1[_0x2e351d(0xb0)]=SYSTEM_MODES[_0x2e351d(0x1ed)];}}async function loadRawEventLog(_0x162075){const _0x1dcf0e=a0_0xe96819;try{const _0x37e79d=await _0x162075[_0x1dcf0e(0x9a)](LTM_DP_RAW_LOG);if(_0x37e79d&&_0x37e79d[_0x1dcf0e(0xc6)])_0x162075[_0x1dcf0e(0x96)]=JSON[_0x1dcf0e(0x200)](_0x37e79d['val']);}catch(_0x127c5f){_0x162075[_0x1dcf0e(0x96)]=[];}}async function saveRawEventLog(_0xc1157b){const _0x440ee7=a0_0xe96819;if(_0xc1157b[_0x440ee7(0x96)]['length']>RAW_LOG_MAX_SIZE)_0xc1157b[_0x440ee7(0x96)][_0x440ee7(0x236)](0x0,_0xc1157b[_0x440ee7(0x96)][_0x440ee7(0x1dd)]-RAW_LOG_MAX_SIZE);await _0xc1157b[_0x440ee7(0x1c3)](LTM_DP_RAW_LOG,{'val':JSON[_0x440ee7(0xf2)](_0xc1157b[_0x440ee7(0x96)]),'ack':!![]});}async function loadDailyDigests(_0x2cb5fd){const _0x3f0912=a0_0xe96819;try{const _0x33bd39=await _0x2cb5fd[_0x3f0912(0x9a)](LTM_DP_DAILY_DIGESTS);if(_0x33bd39&&_0x33bd39[_0x3f0912(0xc6)])_0x2cb5fd['dailyDigests']=JSON[_0x3f0912(0x200)](_0x33bd39[_0x3f0912(0xc6)]);}catch(_0x100deb){_0x2cb5fd[_0x3f0912(0xf1)]=[];}await updateBaselineStatus(_0x2cb5fd);}async function saveDailyDigests(_0x128a6a,_0x5f2f0c=!![]){const _0x4fe48a=a0_0xe96819,_0x5b9042=_0x128a6a[_0x4fe48a(0x176)]['ltmLtbWindowDays']||0x3c;_0x128a6a['dailyDigests'][_0x4fe48a(0x1dd)]>_0x5b9042&&_0x128a6a[_0x4fe48a(0xf1)]['splice'](0x0,_0x128a6a[_0x4fe48a(0xf1)][_0x4fe48a(0x1dd)]-_0x5b9042);await _0x128a6a['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x4fe48a(0xf2)](_0x128a6a[_0x4fe48a(0xf1)]),'ack':!![]});if(_0x5f2f0c)await updateBaselineStatus(_0x128a6a);}async function updateAnalysisHistory(_0xd7c8cd,_0x354bda){const _0x3af162=a0_0xe96819;_0xd7c8cd['analysisHistory'][_0x3af162(0x193)](_0x354bda);if(_0xd7c8cd[_0x3af162(0x17a)][_0x3af162(0x1dd)]>HISTORY_MAX_SIZE)_0xd7c8cd['analysisHistory'][_0x3af162(0x1aa)]();await _0xd7c8cd[_0x3af162(0x1c3)](_0x3af162(0x191),{'val':JSON[_0x3af162(0xf2)](_0xd7c8cd['analysisHistory']),'ack':!![]});}async function updateBaselineStatus(_0x5c0bcc){const _0x50cc07=a0_0xe96819;if(!_0x5c0bcc['isProVersion']){await _0x5c0bcc[_0x50cc07(0x1c3)](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0x410a3b=_0x5c0bcc[_0x50cc07(0xf1)][_0x50cc07(0x1dd)]>=(_0x5c0bcc[_0x50cc07(0x176)]['minDaysForBaseline']||0x7)?'Aktiv\x20('+_0x5c0bcc['dailyDigests'][_0x50cc07(0x1dd)]+_0x50cc07(0x161):'Lernphase\x20('+_0x5c0bcc[_0x50cc07(0xf1)][_0x50cc07(0x1dd)]+'/'+(_0x5c0bcc['config'][_0x50cc07(0x142)]||0x7)+')';await _0x5c0bcc[_0x50cc07(0x1c3)](LTM_DP_BASELINE_STATUS,{'val':_0x410a3b,'ack':!![]});}async function initSensorSubscriptions(_0x15368f){const _0x3e83d3=a0_0xe96819,_0x253593=_0x15368f[_0x3e83d3(0x176)][_0x3e83d3(0x1eb)];if(_0x253593)for(const _0x33a72d of _0x253593){await _0x15368f[_0x3e83d3(0x11a)](_0x33a72d['id']);}}async function initPresenceSubscriptions(_0x8a978e){const _0x385354=a0_0xe96819,_0x470e9b=_0x8a978e[_0x385354(0x176)][_0x385354(0x84)];if(_0x470e9b)for(const _0x58ffbc of _0x470e9b){await _0x8a978e[_0x385354(0x11a)](_0x58ffbc);}}function a0_0x5a98(_0x24c1df,_0x1a42c3){const _0x4cb28a=a0_0x18a7();return a0_0x5a98=function(_0x558efb,_0x42b96e){_0x558efb=_0x558efb-0x7d;let _0x18a756=_0x4cb28a[_0x558efb];return _0x18a756;},a0_0x5a98(_0x24c1df,_0x1a42c3);}async function setupTelegramListener(_0x48ba78){const _0x301d4a=a0_0xe96819,_0x4cd3c0=_0x48ba78[_0x301d4a(0x176)][_0x301d4a(0x92)];if(_0x48ba78[_0x301d4a(0x176)][_0x301d4a(0x22f)]&&_0x4cd3c0)await _0x48ba78[_0x301d4a(0x11a)](_0x4cd3c0+'.communicate.request');}async function checkWifiPresence(_0x44ad24){const _0x2b60a3=a0_0xe96819;try{const _0x14670e=_0x44ad24[_0x2b60a3(0x176)]['presenceDevices']||[];let _0x7a6d88=![];const _0x537905=[];for(const _0x5deb68 of _0x14670e){try{const _0x8de460=await _0x44ad24[_0x2b60a3(0x103)](_0x5deb68);_0x8de460&&(_0x8de460['val']===!![]||_0x8de460[_0x2b60a3(0xc6)]===_0x2b60a3(0x1d3)||_0x8de460[_0x2b60a3(0xc6)]===0x1)&&(_0x7a6d88=!![],_0x537905[_0x2b60a3(0x218)](_0x5deb68));}catch(_0x777cf1){}}return await _0x44ad24['setStateAsync'](_0x2b60a3(0x117),{'val':_0x537905[_0x2b60a3(0x199)](',\x20'),'ack':!![]}),_0x7a6d88&&(_0x44ad24['exitTimer']&&(_0x44ad24[_0x2b60a3(0x8e)][_0x2b60a3(0x87)](_0x2b60a3(0x156)),abortExitTimer(_0x44ad24)),!_0x44ad24[_0x2b60a3(0x180)]&&_0x44ad24[_0x2b60a3(0xb0)]===SYSTEM_MODES[_0x2b60a3(0x1ed)]&&await setPresence(_0x44ad24,!![])),_0x7a6d88;}catch(_0x4afe93){return![];}}function startExitTimer(_0x44f2a8){const _0x1c17dd=a0_0xe96819;abortExitTimer(_0x44f2a8),_0x44f2a8[_0x1c17dd(0xf6)]=!![],_0x44f2a8[_0x1c17dd(0x229)]=setTimeout(()=>{const _0x3f1f1b=_0x1c17dd;_0x44f2a8[_0x3f1f1b(0xf6)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x44f2a8[_0x1c17dd(0x17b)]=setTimeout(()=>{const _0x2a7d36=_0x1c17dd;setPresence(_0x44f2a8,![]),_0x44f2a8[_0x2a7d36(0x17b)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x3b3541){const _0x39b7cc=a0_0xe96819;if(_0x3b3541['exitTimer'])clearTimeout(_0x3b3541['exitTimer']);if(_0x3b3541[_0x39b7cc(0x229)])clearTimeout(_0x3b3541[_0x39b7cc(0x229)]);_0x3b3541[_0x39b7cc(0x17b)]=null,_0x3b3541[_0x39b7cc(0x229)]=null,_0x3b3541[_0x39b7cc(0xf6)]=![];}async function setPresence(_0x3e4284,_0x30f13f){const _0x2531a5=a0_0xe96819;if(_0x3e4284[_0x2531a5(0x180)]===_0x30f13f)return;_0x3e4284[_0x2531a5(0x180)]=_0x30f13f,await _0x3e4284[_0x2531a5(0x1c3)](_0x2531a5(0x111),{'val':_0x30f13f,'ack':!![]});}async function executeAutomationAction(_0x3a4dd0){const _0x92855b=a0_0xe96819;try{const _0x1e31c0=await _0x3a4dd0[_0x92855b(0x9a)]('analysis.automation.targetId'),_0x2f7231=await _0x3a4dd0[_0x92855b(0x9a)](_0x92855b(0x12a));if(_0x1e31c0&&_0x1e31c0['val']&&_0x2f7231){const _0x3c9902=_0x1e31c0[_0x92855b(0xc6)];let _0x97601e=_0x2f7231[_0x92855b(0xc6)];try{_0x97601e=JSON[_0x92855b(0x200)](_0x97601e);}catch(_0x15d2f2){}_0x3a4dd0[_0x92855b(0x8e)][_0x92855b(0x87)]('ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x3c9902+_0x92855b(0x11e)+_0x97601e),await _0x3a4dd0[_0x92855b(0x8c)](_0x3c9902,_0x97601e);}else _0x3a4dd0[_0x92855b(0x8e)][_0x92855b(0x1a3)](_0x92855b(0x1a8));}catch(_0x2d5cbb){_0x3a4dd0[_0x92855b(0x8e)]['error']('BUTLER\x20Execution\x20Error:\x20'+_0x2d5cbb[_0x92855b(0x1d2)]);}}async function processSensorEvent(_0x2e1903,_0x14d04b,_0x1d5722,_0x1653bd){const _0x4a13d9=a0_0xe96819;if(!_0x1653bd)return;const _0x2b428e=_0x1d5722[_0x4a13d9(0xc6)],_0x33e097=Date[_0x4a13d9(0xeb)](),_0x157624=_0x2e1903[_0x4a13d9(0x21d)][_0x14d04b];_0x2e1903[_0x4a13d9(0x21d)][_0x14d04b]=_0x2b428e;if(!_0x1653bd[_0x4a13d9(0xdd)]&&_0x157624!=undefined&&_0x157624==_0x2b428e)return;const _0x3052f9=(_0x1653bd['type']||'')[_0x4a13d9(0xa8)](),_0x36023a=_0x3052f9['includes'](_0x4a13d9(0xb2))||_0x3052f9['includes'](_0x4a13d9(0x1c2))||_0x3052f9[_0x4a13d9(0xbd)](_0x4a13d9(0xbc))||_0x3052f9[_0x4a13d9(0xbd)](_0x4a13d9(0x234));_0x2e1903['isProVersion']&&_0x36023a&&recordThermodynamics(_0x2e1903,_0x14d04b,_0x2b428e,_0x1653bd['location']);const _0x16359e={'timestamp':_0x33e097,'id':_0x14d04b,'name':_0x1653bd[_0x4a13d9(0x1f5)],'type':_0x1653bd['type'],'location':_0x1653bd[_0x4a13d9(0xa7)],'value':_0x2b428e};_0x2e1903[_0x4a13d9(0xb6)][_0x4a13d9(0x193)](_0x16359e);if(_0x2e1903[_0x4a13d9(0xb6)]['length']>HISTORY_MAX_SIZE)_0x2e1903[_0x4a13d9(0xb6)][_0x4a13d9(0x1aa)]();await _0x2e1903[_0x4a13d9(0x1c3)]('events.lastEvent',{'val':JSON['stringify'](_0x16359e),'ack':!![]}),await _0x2e1903['setStateAsync']('events.history',{'val':JSON['stringify'](_0x2e1903[_0x4a13d9(0xb6)]),'ack':!![]});_0x2e1903[_0x4a13d9(0x12d)]&&(_0x2e1903[_0x4a13d9(0x96)][_0x4a13d9(0x218)](_0x16359e),await saveRawEventLog(_0x2e1903),recordSequence(_0x2e1903,_0x16359e));if(_0x1653bd[_0x4a13d9(0x238)]&&_0x2b428e===!![]){if(_0x2e1903['isPresent']&&!_0x2e1903[_0x4a13d9(0xf6)])startExitTimer(_0x2e1903);else{if(!_0x2e1903[_0x4a13d9(0x180)])setPresence(_0x2e1903,!![]);}}else{if(_0x1653bd['type']==='motion'&&_0x2b428e===!![]){if(_0x2e1903[_0x4a13d9(0x17b)])abortExitTimer(_0x2e1903);if(!_0x2e1903[_0x4a13d9(0x180)]&&_0x2e1903[_0x4a13d9(0xb0)]===SYSTEM_MODES['NORMAL'])setPresence(_0x2e1903,!![]);}}}async function recordThermodynamics(_0x22061c,_0x4f38cd,_0x52955e,_0x45f019){const _0x258649=a0_0xe96819,_0x3c1383=await getOutsideTemperatureNumeric(_0x22061c),_0x3d817c=await _0x22061c[_0x258649(0x9a)](_0x258649(0x198));let _0x3c7d70=[];if(_0x3d817c&&_0x3d817c['val'])try{_0x3c7d70=JSON[_0x258649(0x200)](_0x3d817c[_0x258649(0xc6)]);}catch(_0x2785ae){}_0x3c7d70['push']({'ts':Date['now'](),'room':_0x45f019||'Unknown','t_in':_0x52955e,'t_out':_0x3c1383});if(_0x3c7d70[_0x258649(0x1dd)]>THERMO_LOG_SIZE)_0x3c7d70[_0x258649(0x102)]();await _0x22061c['setStateAsync']('LTM.trainingData.thermodynamics',{'val':JSON[_0x258649(0xf2)](_0x3c7d70),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x2e1d37){const _0x395a7d=a0_0xe96819;if(_0x2e1d37[_0x395a7d(0x176)][_0x395a7d(0x235)])try{const _0xf0085c=await _0x2e1d37[_0x395a7d(0x103)](_0x2e1d37['config'][_0x395a7d(0x235)]);if(_0xf0085c&&_0xf0085c[_0x395a7d(0xc6)]!==undefined&&_0xf0085c[_0x395a7d(0xc6)]!==null)return parseFloat(_0xf0085c[_0x395a7d(0xc6)]);}catch(_0x421a8c){}const _0x497c0e=_0x2e1d37[_0x395a7d(0x176)][_0x395a7d(0xec)];if(!_0x2e1d37[_0x395a7d(0x176)][_0x395a7d(0x19e)]||!_0x497c0e)return null;try{let _0x385b20='';if(_0x497c0e[_0x395a7d(0xbd)](_0x395a7d(0x17f)))_0x385b20=_0x497c0e+_0x395a7d(0x17e);else{if(_0x497c0e[_0x395a7d(0xbd)](_0x395a7d(0x224)))_0x385b20=_0x497c0e+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x497c0e['includes'](_0x395a7d(0xff)))_0x385b20=_0x497c0e+_0x395a7d(0x1f1);else{if(_0x497c0e[_0x395a7d(0xbd)](_0x395a7d(0x237)))_0x385b20=_0x497c0e+_0x395a7d(0x192);}}}if(_0x385b20){const _0xeb8f51=await _0x2e1d37['getForeignStateAsync'](_0x385b20);if(_0xeb8f51&&_0xeb8f51[_0x395a7d(0xc6)]!==undefined&&_0xeb8f51['val']!==null)return parseFloat(_0xeb8f51['val']);}}catch(_0x588fc9){}return null;}async function recordSequence(_0x430545,_0x24ffda){const _0x51c338=a0_0xe96819,_0x562f38=(_0x24ffda['type']||'')[_0x51c338(0xa8)](),_0x347510=['motion',_0x51c338(0x13b),_0x51c338(0x168),_0x51c338(0x157),_0x51c338(0x1fc),'door','t√ºr',_0x51c338(0x136),_0x51c338(0x93),_0x51c338(0x108),'kontakt',_0x51c338(0xa4),_0x51c338(0x167),'switch',_0x51c338(0x206),_0x51c338(0x12e),_0x51c338(0x1ee)];if(!_0x347510['some'](_0x1b21cb=>_0x562f38[_0x51c338(0xbd)](_0x1b21cb)))return;if(!_0x24ffda[_0x51c338(0x1ca)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence['push']({'loc':_0x24ffda[_0x51c338(0xa7)]||_0x51c338(0x7d),'id':_0x24ffda['id'],'ts':Date[_0x51c338(0xeb)]()}),sequenceTimer=setTimeout(async()=>{const _0x431abd=_0x51c338;if(activeSequence[_0x431abd(0x1dd)]>0x1)await saveCompletedSequence(_0x430545);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0xb6933d){const _0x4321da=a0_0xe96819;try{const _0x13faaf=await _0xb6933d[_0x4321da(0x9a)]('LTM.trainingData.sequences');let _0x12d63a=[];if(_0x13faaf&&_0x13faaf[_0x4321da(0xc6)])try{_0x12d63a=JSON[_0x4321da(0x200)](_0x13faaf[_0x4321da(0xc6)]);}catch(_0x232a88){}const _0x5966ee=activeSequence[0x0]['ts'],_0x4d708d=activeSequence[_0x4321da(0x120)](_0x101aaf=>({'loc':_0x101aaf[_0x4321da(0xd9)],'t_delta':Math[_0x4321da(0x124)]((_0x101aaf['ts']-_0x5966ee)/0x3e8)})),_0x30d0a3={'timestamp':new Date(_0x5966ee)[_0x4321da(0x115)](),'steps':_0x4d708d,'duration':Math['round']((activeSequence[activeSequence['length']-0x1]['ts']-_0x5966ee)/0x3e8),'daytime':new Date(_0x5966ee)['getHours']()};_0x12d63a['push'](_0x30d0a3);if(_0x12d63a[_0x4321da(0x1dd)]>MAX_TRAINING_SET_SIZE)_0x12d63a[_0x4321da(0x102)]();await _0xb6933d[_0x4321da(0x1c3)](_0x4321da(0xa1),{'val':JSON[_0x4321da(0xf2)](_0x12d63a),'ack':!![]}),runSecurityCheck(_0xb6933d,_0x30d0a3);}catch(_0x2da840){_0xb6933d[_0x4321da(0x8e)]['error'](_0x4321da(0x212)+_0x2da840['message']);}}function runSecurityCheck(_0x13d413,_0x26f95a){const _0x1d5c26=a0_0xe96819;if(!_0x13d413[_0x1d5c26(0x12d)])return;sendToPython(_0x13d413,_0x1d5c26(0x1f9),{'sequence':_0x26f95a});}async function createDailyDigest(_0x4c47ce){const _0x24ee95=a0_0xe96819;if(!_0x4c47ce[_0x24ee95(0x12d)])return;await _0x4c47ce[_0x24ee95(0x1c3)](LTM_DP_STATUS,{'val':_0x24ee95(0x1df),'ack':!![]});if(!_0x4c47ce[_0x24ee95(0x125)]||_0x4c47ce['rawEventLog']['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4c47ce[_0x24ee95(0x1c3)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x305814=JSON[_0x24ee95(0x200)](JSON[_0x24ee95(0xf2)](_0x4c47ce[_0x24ee95(0x96)])),_0x3486a2=_0x305814['length'],_0x1d0af8='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x24ee95(0xf2)](_0x305814);try{const _0x4b4b1f=await _0x4c47ce[_0x24ee95(0x125)][_0x24ee95(0xba)](_0x1d0af8),_0x2845c2=JSON[_0x24ee95(0x200)](_0x4b4b1f[_0x24ee95(0x160)][_0x24ee95(0x14d)]()[_0x24ee95(0x1ef)](/```json|```/g,'')[_0x24ee95(0x1fa)]()),_0x17a294={'timestamp':new Date()[_0x24ee95(0x115)](),'eventCount':_0x3486a2,'summary':_0x2845c2[_0x24ee95(0x1e1)]||_0x24ee95(0x1cc),'activityLevel':_0x2845c2[_0x24ee95(0x230)]||'normal','systemMode':_0x4c47ce[_0x24ee95(0xb0)]};_0x4c47ce[_0x24ee95(0xf1)][_0x24ee95(0x218)](_0x17a294),await saveDailyDigests(_0x4c47ce),_0x4c47ce[_0x24ee95(0x96)]=[],await saveRawEventLog(_0x4c47ce),await _0x4c47ce[_0x24ee95(0x1c3)](LTM_DP_STATUS,{'val':_0x24ee95(0x11c),'ack':!![]});if(_0x4c47ce[_0x24ee95(0x12d)])sendToPython(_0x4c47ce,_0x24ee95(0x1ec),{'digest':_0x17a294});}catch(_0xb955f7){_0x4c47ce[_0x24ee95(0x8e)][_0x24ee95(0x12f)](_0xb955f7[_0x24ee95(0x1d2)]);}}async function startSystem(_0x15019d){const _0x191dc4=a0_0xe96819;_0x15019d[_0x191dc4(0x8e)][_0x191dc4(0x87)](_0x191dc4(0x110)),await initZombies(_0x15019d);try{_0x15019d[_0x191dc4(0x12d)]=await checkLicense(_0x15019d['config']['licenseKey']);}catch(_0x2482ef){}if(!_0x15019d[_0x191dc4(0x176)][_0x191dc4(0xdf)]||_0x15019d[_0x191dc4(0x176)][_0x191dc4(0xdf)]<0.1)_0x15019d[_0x191dc4(0x176)][_0x191dc4(0xdf)]=0xc;await initHistory(_0x15019d),await initSystemConfig(_0x15019d);if(_0x15019d[_0x191dc4(0x176)][_0x191dc4(0x1b8)])try{_0x15019d[_0x191dc4(0x1a1)]=new GoogleGenerativeAI(_0x15019d['config'][_0x191dc4(0x1b8)]),_0x15019d[_0x191dc4(0x125)]=_0x15019d['genAI'][_0x191dc4(0x106)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x191dc4(0xaf)}}),_0x15019d[_0x191dc4(0x8e)][_0x191dc4(0x87)](_0x191dc4(0x222));}catch(_0xe1420b){_0x15019d[_0x191dc4(0x8e)][_0x191dc4(0x12f)](_0x191dc4(0x90)+_0xe1420b[_0x191dc4(0x1d2)]);}await createAllObjects(_0x15019d),await loadSystemMode(_0x15019d),await loadRawEventLog(_0x15019d),await loadDailyDigests(_0x15019d),_0x15019d[_0x191dc4(0x172)](_0x191dc4(0x207)),_0x15019d[_0x191dc4(0x172)](LTM_DP_TRIGGER_DIGEST),_0x15019d[_0x191dc4(0x172)]('system.mode'),_0x15019d[_0x191dc4(0x172)](_0x191dc4(0x81)),_0x15019d[_0x191dc4(0x172)](_0x191dc4(0x16b)),_0x15019d[_0x191dc4(0x172)](_0x191dc4(0x21b)),_0x15019d[_0x191dc4(0x172)](_0x191dc4(0x128)),_0x15019d[_0x191dc4(0x172)](_0x191dc4(0x233)),_0x15019d['subscribeStates'](_0x191dc4(0x1c4)),_0x15019d['subscribeStates'](_0x191dc4(0x22e)),_0x15019d[_0x191dc4(0x172)]('analysis.training.triggerTopology'),await initSensorSubscriptions(_0x15019d),await initPresenceSubscriptions(_0x15019d),await setupTelegramListener(_0x15019d),setTimeout(()=>checkWifiPresence(_0x15019d),0x1388);if(_0x15019d['analysisTimer'])clearInterval(_0x15019d['analysisTimer']);const _0x4c8a53=_0x15019d['config'][_0x191dc4(0x86)]||0xf;_0x4c8a53>0x0&&(_0x15019d[_0x191dc4(0x22d)]=setInterval(()=>{runAutopilot(_0x15019d);},_0x4c8a53*0x3c*0x3e8)),setupLtmScheduler(_0x15019d),setupModeResetScheduler(_0x15019d),setupDriftAnalysisScheduler(_0x15019d),setupBriefingScheduler(_0x15019d),startPythonService(_0x15019d),setTimeout(()=>{const _0x5a1aaf=_0x191dc4;_0x15019d[_0x5a1aaf(0xd6)]&&(runPythonHealthCheck(_0x15019d),triggerGaitAnalysis(_0x15019d),triggerEnergyPrediction(_0x15019d)),updateHealthVector(_0x15019d);},0x1388);}function installRequirementsInVenv(_0x4e9c9c,_0xc48201){const _0x357915=a0_0xe96819;_0x4e9c9c[_0x357915(0x8e)][_0x357915(0x87)](_0x357915(0x1e9));const _0x5172cb='\x22'+PIP_EXE+_0x357915(0xfe)+_0xc48201+'\x22';exec(_0x5172cb,{'timeout':0x1b7740},(_0x203f17,_0x4f8f8f,_0xa5c5b6)=>{const _0x56784b=_0x357915;_0x4e9c9c[_0x56784b(0x1d7)]=![];if(_0x203f17){_0x4e9c9c[_0x56784b(0x8e)][_0x56784b(0x12f)](_0x56784b(0xd7)+(_0xa5c5b6||_0x203f17[_0x56784b(0x1d2)]));try{fs[_0x56784b(0x16a)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x3d522d){}}else _0x4e9c9c[_0x56784b(0x8e)][_0x56784b(0x87)]('‚úÖ\x20INSTALL\x20SUCCESS.'),startSystem(_0x4e9c9c);});}function installPythonDependencies(_0x5ecf03){const _0x5c92df=a0_0xe96819;if(_0x5ecf03['dependencyInstallInProgress'])return;_0x5ecf03[_0x5c92df(0x1d7)]=!![];const _0x17c2ef=path[_0x5c92df(0x199)](__dirname,_0x5c92df(0x1c9),_0x5c92df(0x18c));stopPythonService(_0x5ecf03);if(fs[_0x5c92df(0x162)](VENV_PATH)&&!fs[_0x5c92df(0x162)](PIP_EXE)){_0x5ecf03['log'][_0x5c92df(0x1a3)]('‚ôªÔ∏è\x20Found\x20broken\x20VENV\x20(no\x20pip).\x20Deleting\x20and\x20recreating...');try{fs[_0x5c92df(0x16a)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x250c72){_0x5ecf03[_0x5c92df(0x8e)][_0x5c92df(0x12f)](_0x5c92df(0x135)+_0x250c72[_0x5c92df(0x1d2)]);}}if(!fs['existsSync'](VENV_PATH))try{_0x5ecf03[_0x5c92df(0x8e)][_0x5c92df(0x87)](_0x5c92df(0xe7)),execSync(_0x5c92df(0x132)+VENV_PATH+'\x22');}catch(_0x41f46d){_0x5ecf03['dependencyInstallInProgress']=![];_0x41f46d[_0x5c92df(0x1d2)][_0x5c92df(0xbd)](_0x5c92df(0x137))||_0x41f46d[_0x5c92df(0x1d2)][_0x5c92df(0xbd)](_0x5c92df(0x220))?(_0x5ecf03[_0x5c92df(0x8e)][_0x5c92df(0x12f)]('üõë\x20PERMISSION\x20ERROR:\x20Der\x20Adapter\x20darf\x20das\x20VENV\x20nicht\x20anlegen.'),_0x5ecf03['log']['error'](_0x5c92df(0x1a9)+path[_0x5c92df(0x199)](__dirname))):_0x5ecf03['log'][_0x5c92df(0x12f)](_0x5c92df(0xb9)+_0x41f46d['message']+_0x5c92df(0xda));return;}installRequirementsInVenv(_0x5ecf03,_0x17c2ef);}function checkAndInstall(_0x331e70){const _0x58877e=a0_0xe96819;if(fs[_0x58877e(0x162)](PYTHON_EXE)&&fs[_0x58877e(0x162)](PIP_EXE))try{return _0x331e70[_0x58877e(0x8e)]['info']('üêç\x20Checking\x20Python\x20environment...'),execSync('\x22'+PYTHON_EXE+_0x58877e(0x223),{'timeout':0x3a98}),_0x331e70[_0x58877e(0x8e)][_0x58877e(0x87)](_0x58877e(0x164)),!![];}catch(_0x54cf2a){_0x331e70[_0x58877e(0x8e)][_0x58877e(0x1a3)]('‚ö†Ô∏è\x20Fast-Boot\x20failed.\x20Triggering\x20Self-Healing...');}else _0x331e70[_0x58877e(0x8e)][_0x58877e(0x1a3)](_0x58877e(0xea));return installPythonDependencies(_0x331e70),![];}class CogniLiving extends utils['Adapter']{constructor(_0x1510c2){const _0x5cf2ea=a0_0xe96819;super({..._0x1510c2,'name':_0x5cf2ea(0x14a)}),this['eventHistory']=[],this['analysisHistory']=[],this[_0x5cf2ea(0x96)]=[],this[_0x5cf2ea(0xf1)]=[],this['sensorLastValues']={},this[_0x5cf2ea(0xa5)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x5cf2ea(0x180)]=!![],this[_0x5cf2ea(0x17b)]=null,this['exitGraceTimer']=null,this[_0x5cf2ea(0xf6)]=![],this['genAI']=null,this[_0x5cf2ea(0x125)]=null,this[_0x5cf2ea(0xb0)]=SYSTEM_MODES[_0x5cf2ea(0x1ed)],this['isProVersion']=![],this[_0x5cf2ea(0x1de)]=![],this[_0x5cf2ea(0x20c)]='unknown',this[_0x5cf2ea(0x22d)]=null,this['ltmJob']=null,this[_0x5cf2ea(0x18d)]=null,this[_0x5cf2ea(0x1bf)]=null,this[_0x5cf2ea(0x1a7)]=null,this['pythonProcess']=null,this[_0x5cf2ea(0x1d7)]=![],this['on']('ready',this['onReady'][_0x5cf2ea(0x133)](this)),this['on'](_0x5cf2ea(0x19f),this['onStateChange'][_0x5cf2ea(0x133)](this)),this['on'](_0x5cf2ea(0x159),this[_0x5cf2ea(0x1c7)][_0x5cf2ea(0x133)](this)),this['on'](_0x5cf2ea(0x1d2),this[_0x5cf2ea(0x14c)][_0x5cf2ea(0x133)](this));}async[a0_0xe96819(0x18b)](){const _0x1065c4=a0_0xe96819;this[_0x1065c4(0x8e)]['info'](_0x1065c4(0x15d)+this[_0x1065c4(0x169)]+_0x1065c4(0x1af));if(!checkAndInstall(this))return;await startSystem(this);}[a0_0xe96819(0x1c7)](_0x1b94f0){const _0x3e98d5=a0_0xe96819;if(this[_0x3e98d5(0x22d)])clearInterval(this[_0x3e98d5(0x22d)]);if(this['driftAnalysisTimer'])clearInterval(this[_0x3e98d5(0x1bf)]);if(this[_0x3e98d5(0x1bd)])this[_0x3e98d5(0x1bd)][_0x3e98d5(0x9b)]();if(this['modeResetJob'])this[_0x3e98d5(0x18d)][_0x3e98d5(0x9b)]();if(this[_0x3e98d5(0x1a7)])this[_0x3e98d5(0x1a7)][_0x3e98d5(0x9b)]();if(this['exitTimer'])clearTimeout(this[_0x3e98d5(0x17b)]);if(this[_0x3e98d5(0x229)])clearTimeout(this[_0x3e98d5(0x229)]);stopPythonService(this),_0x1b94f0();}async['onStateChange'](_0x7df350,_0x40c9f7){const _0x3f0de1=a0_0xe96819;if(!_0x40c9f7||this['dependencyInstallInProgress'])return;if(_0x7df350['includes'](_0x3f0de1(0x11b))&&_0x7df350['endsWith'](_0x3f0de1(0x1db))&&_0x40c9f7[_0x3f0de1(0xc6)]){await handleTelegramResponse(this,_0x40c9f7['val']);return;}if(_0x7df350===this[_0x3f0de1(0x145)]+'.'+SYSTEM_DP_MODE){if(_0x40c9f7[_0x3f0de1(0xc6)]&&Object[_0x3f0de1(0xcb)](SYSTEM_MODES)[_0x3f0de1(0xbd)](_0x40c9f7[_0x3f0de1(0xc6)])){this['currentSystemMode']=_0x40c9f7['val'];if(_0x40c9f7[_0x3f0de1(0xc6)]===SYSTEM_MODES[_0x3f0de1(0xca)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x40c9f7['ack'])this[_0x3f0de1(0xfc)](_0x7df350,{'val':this[_0x3f0de1(0xb0)],'ack':!![]});return;}if(!_0x40c9f7[_0x3f0de1(0x203)]){_0x7df350[_0x3f0de1(0xbd)](_0x3f0de1(0x207))&&_0x40c9f7[_0x3f0de1(0xc6)]&&(this[_0x3f0de1(0xfc)](_0x7df350,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x7df350['includes'](_0x3f0de1(0x1ba))&&_0x40c9f7[_0x3f0de1(0xc6)]){this['setState'](_0x7df350,{'val':![],'ack':!![]});if(this[_0x3f0de1(0x12d)])createDailyDigest(this);}_0x7df350[_0x3f0de1(0xbd)](_0x3f0de1(0x14f))&&_0x40c9f7[_0x3f0de1(0xc6)]&&(this[_0x3f0de1(0xfc)](_0x7df350,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x7df350[_0x3f0de1(0xbd)](_0x3f0de1(0xf8))&&_0x40c9f7[_0x3f0de1(0xc6)]&&(this[_0x3f0de1(0xfc)](_0x7df350,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x7df350[_0x3f0de1(0xbd)](_0x3f0de1(0x128))&&_0x40c9f7[_0x3f0de1(0xc6)]){this[_0x3f0de1(0xfc)](_0x7df350,{'val':![],'ack':!![]});if(this[_0x3f0de1(0x12d)])try{const _0x4adb7c=await this['getStateAsync'](_0x3f0de1(0xa1));if(_0x4adb7c&&_0x4adb7c[_0x3f0de1(0xc6)]){const _0x443f37=JSON['parse'](_0x4adb7c[_0x3f0de1(0xc6)]);this[_0x3f0de1(0x8e)][_0x3f0de1(0x87)](_0x3f0de1(0x144)),this[_0x3f0de1(0x1c3)](_0x3f0de1(0x13f),{'val':_0x3f0de1(0x8d),'ack':!![]}),sendToPython(this,_0x3f0de1(0x1a4),{'sequences':_0x443f37});}}catch(_0x273769){this['log'][_0x3f0de1(0x12f)]('Training\x20Error:\x20'+_0x273769[_0x3f0de1(0x1d2)]);}}if(_0x7df350[_0x3f0de1(0xbd)](_0x3f0de1(0x233))&&_0x40c9f7[_0x3f0de1(0xc6)]){this[_0x3f0de1(0xfc)](_0x7df350,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x10775e=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x10775e&&_0x10775e[_0x3f0de1(0xc6)])sendToPython(this,_0x3f0de1(0x114),{'digests':JSON[_0x3f0de1(0x200)](_0x10775e[_0x3f0de1(0xc6)])});}catch(_0x299e49){}}if(_0x7df350[_0x3f0de1(0xbd)](_0x3f0de1(0x1c4))&&_0x40c9f7[_0x3f0de1(0xc6)]){this[_0x3f0de1(0xfc)](_0x7df350,{'val':![],'ack':!![]});if(this[_0x3f0de1(0x12d)])try{const _0xabf384=await this[_0x3f0de1(0x9a)](_0x3f0de1(0x198));if(_0xabf384&&_0xabf384[_0x3f0de1(0xc6)])sendToPython(this,_0x3f0de1(0x171),{'points':JSON['parse'](_0xabf384[_0x3f0de1(0xc6)])});}catch(_0x392622){}}if(_0x7df350[_0x3f0de1(0xbd)]('analysis.training.triggerComfort')&&_0x40c9f7['val']){this[_0x3f0de1(0xfc)](_0x7df350,{'val':![],'ack':!![]});if(this[_0x3f0de1(0x12d)])try{const _0x1b10d6=await this[_0x3f0de1(0x9a)](LTM_DP_RAW_LOG);_0x1b10d6&&_0x1b10d6[_0x3f0de1(0xc6)]&&(this[_0x3f0de1(0x8e)][_0x3f0de1(0x87)](_0x3f0de1(0xef)),sendToPython(this,'TRAIN_COMFORT',{'events':JSON['parse'](_0x1b10d6[_0x3f0de1(0xc6)])}));}catch(_0xfcb9c2){}}if(_0x7df350['includes']('analysis.training.triggerTopology')&&_0x40c9f7[_0x3f0de1(0xc6)]){this[_0x3f0de1(0xfc)](_0x7df350,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x152d3b=await this[_0x3f0de1(0x9a)](_0x3f0de1(0xa1));if(_0x152d3b&&_0x152d3b[_0x3f0de1(0xc6)]){const _0x1d70fb=JSON[_0x3f0de1(0x200)](_0x152d3b['val']);this[_0x3f0de1(0x8e)][_0x3f0de1(0x87)](_0x3f0de1(0x20b)),sendToPython(this,'BUILD_TOPOLOGY',{'sequences':_0x1d70fb});}}catch(_0x25f41c){this[_0x3f0de1(0x8e)][_0x3f0de1(0x12f)]('Topology\x20Error:\x20'+_0x25f41c[_0x3f0de1(0x1d2)]);}}return;}if(this[_0x3f0de1(0x176)]['presenceDevices']&&this['config'][_0x3f0de1(0x84)]['includes'](_0x7df350)){await checkWifiPresence(this);return;}const _0x4481ba=(this[_0x3f0de1(0x176)]['devices']||[])[_0x3f0de1(0xd8)](_0x512b04=>_0x512b04['id']===_0x7df350);if(_0x4481ba)processSensorEvent(this,_0x7df350,_0x40c9f7,_0x4481ba);}async[a0_0xe96819(0x14c)](_0x4644de){const _0x440a31=a0_0xe96819;if(typeof _0x4644de==='object'&&_0x4644de[_0x440a31(0x1d2)]){if(_0x4644de[_0x440a31(0x195)]===_0x440a31(0x15f)){const _0x3e4de3=_0x4644de[_0x440a31(0x1d2)][_0x440a31(0x1e7)]||this['config'][_0x440a31(0x1b8)];if(!_0x3e4de3)return this[_0x440a31(0x107)](_0x4644de[_0x440a31(0x1b2)],_0x4644de['command'],{'success':![],'message':_0x440a31(0x9d)},_0x4644de['callback']);try{const _0x12eec8=new GoogleGenerativeAI(_0x3e4de3),_0x2eefa6=_0x12eec8[_0x440a31(0x106)]({'model':GEMINI_MODEL}),_0x31cd30=await _0x2eefa6[_0x440a31(0xba)]('Hi');this[_0x440a31(0x107)](_0x4644de[_0x440a31(0x1b2)],_0x4644de[_0x440a31(0x195)],{'success':!![],'message':'OK:\x20'+_0x31cd30[_0x440a31(0x160)][_0x440a31(0x14d)]()},_0x4644de['callback']);}catch(_0xab031){this[_0x440a31(0x107)](_0x4644de[_0x440a31(0x1b2)],_0x4644de[_0x440a31(0x195)],{'success':![],'message':_0x440a31(0x1ce)+_0xab031[_0x440a31(0x1d2)]},_0x4644de['callback']);}}else{if(_0x4644de[_0x440a31(0x195)]==='testContext'){const _0x48b8ed=await getWeatherContext(this),_0x559fad=await getCalendarContext(this);this[_0x440a31(0x107)](_0x4644de[_0x440a31(0x1b2)],_0x4644de[_0x440a31(0x195)],{'success':!![],'weather':_0x48b8ed,'calendar':_0x559fad},_0x4644de[_0x440a31(0x1c0)]);}else{if(_0x4644de['command']===_0x440a31(0x129)){if(!this[_0x440a31(0x12d)])return this[_0x440a31(0x107)](_0x4644de[_0x440a31(0x1b2)],_0x4644de[_0x440a31(0x195)],{'success':![],'isPro':![]},_0x4644de['callback']);let _0x531eb5={'status':_0x440a31(0x197)};try{const _0x749344=await this[_0x440a31(0x9a)](LTM_DP_DRIFT_STATUS);_0x531eb5[_0x440a31(0x22b)]=_0x749344?_0x749344[_0x440a31(0xc6)]:_0x440a31(0x197);}catch(_0x471f30){}this['sendTo'](_0x4644de[_0x440a31(0x1b2)],_0x4644de[_0x440a31(0x195)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x440a31(0xf1)],'driftAnalysis':_0x531eb5,'analysisHistory':this['analysisHistory']},_0x4644de[_0x440a31(0x1c0)]);}else{if(_0x4644de[_0x440a31(0x195)]===_0x440a31(0x13c)){const _0x5bccf4=this['dailyDigests'][_0x440a31(0x1dd)],_0x25f600=new Date(),_0x49e0cb=new Date(_0x25f600[_0x440a31(0x1ad)](),_0x25f600[_0x440a31(0x231)](),_0x25f600[_0x440a31(0x1d8)]())['getTime'](),_0x27a4a8=this[_0x440a31(0x96)][_0x440a31(0x121)](_0x5f3725=>new Date(_0x5f3725[_0x440a31(0x188)])['getTime']()>_0x49e0cb)[_0x440a31(0x1dd)],_0x46ff48=new Array(0x18)[_0x440a31(0x225)](0x0);this[_0x440a31(0x96)][_0x440a31(0xe8)](_0x4c865b=>{const _0x3f09e1=new Date(_0x4c865b['timestamp']);if(_0x3f09e1['getTime']()>_0x49e0cb)_0x46ff48[_0x3f09e1['getHours']()]++;});let _0x338fa5={'status':'N/A'};try{const _0x331cb0=await this[_0x440a31(0x9a)](LTM_DP_DRIFT_STATUS);_0x338fa5['status']=_0x331cb0?_0x331cb0[_0x440a31(0xc6)]:'N/A';}catch(_0x9635e7){}let _0x5efeb8='';try{const _0x5d13c0=await this[_0x440a31(0x9a)](_0x440a31(0x117));_0x5efeb8=_0x5d13c0?_0x5d13c0[_0x440a31(0xc6)]:'';}catch(_0xd6d784){}let _0x2038e8=null;!this[_0x440a31(0x125)]&&(_0x2038e8=this[_0x440a31(0x176)][_0x440a31(0x1b8)]?_0x440a31(0x139):_0x440a31(0x194));let _0x4527f8={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x88e240=await this[_0x440a31(0x9a)](_0x440a31(0x1da));if(_0x88e240&&_0x88e240[_0x440a31(0xc6)]){_0x4527f8[_0x440a31(0x1e4)]=!![];const _0x524c2e=await this[_0x440a31(0x9a)]('analysis.automation.description');_0x4527f8['description']=_0x524c2e?_0x524c2e[_0x440a31(0xc6)]:'';const _0x295d6b=await this[_0x440a31(0x9a)]('analysis.automation.targetId');_0x4527f8[_0x440a31(0x15e)]=_0x295d6b?_0x295d6b[_0x440a31(0xc6)]:'';const _0x6c3cf3=await this[_0x440a31(0x9a)](_0x440a31(0x12a));_0x4527f8['targetValue']=_0x6c3cf3?_0x6c3cf3[_0x440a31(0xc6)]:'';}const _0x2a3462=await this[_0x440a31(0x9a)]('analysis.automation.autoApply');_0x4527f8[_0x440a31(0x1ab)]=_0x2a3462?!!_0x2a3462[_0x440a31(0xc6)]:![];}catch(_0xa0251f){}this[_0x440a31(0x107)](_0x4644de[_0x440a31(0x1b2)],_0x4644de[_0x440a31(0x195)],{'success':!![],'eventHistory':this[_0x440a31(0xb6)][_0x440a31(0x1b9)](0x0,0xf),'stats':{'digestCount':_0x5bccf4,'eventCountToday':_0x27a4a8,'hourlyActivity':_0x46ff48,'driftStatus':_0x338fa5[_0x440a31(0x22b)],'isPresent':this[_0x440a31(0x180)],'presenceWho':_0x5efeb8,'minDays':this['config']['minDaysForBaseline']||0x7,'stbDays':this[_0x440a31(0x176)]['ltmStbWindowDays']||0xe,'ltbDays':this[_0x440a31(0x176)][_0x440a31(0xc1)]||0x3c,'systemError':_0x2038e8},'automation':_0x4527f8},_0x4644de[_0x440a31(0x1c0)]);}else{if(_0x4644de[_0x440a31(0x195)]===_0x440a31(0x1e5))try{const _0x35e519=await scanForDevices(this,_0x4644de[_0x440a31(0x1d2)]||{});this[_0x440a31(0x107)](_0x4644de[_0x440a31(0x1b2)],_0x4644de[_0x440a31(0x195)],{'success':!![],'devices':_0x35e519},_0x4644de[_0x440a31(0x1c0)]);}catch(_0x14aa5d){this[_0x440a31(0x107)](_0x4644de['from'],_0x4644de[_0x440a31(0x195)],{'success':![],'error':_0x14aa5d[_0x440a31(0x1d2)]},_0x4644de[_0x440a31(0x1c0)]);}else{if(_0x4644de['command']===_0x440a31(0xb8)){const _0x2a9041=await this[_0x440a31(0x91)](_0x440a31(0x208),_0x440a31(0x19c)),_0xc1752e=[];if(_0x2a9041)for(const _0x5f2eb5 in _0x2a9041){const _0x1b098c=_0x2a9041[_0x5f2eb5],_0x3fb318=(_0x1b098c[_0x440a31(0x112)]&&typeof _0x1b098c[_0x440a31(0x112)]['name']===_0x440a31(0x154)?_0x1b098c[_0x440a31(0x112)][_0x440a31(0x1f5)]['de']:_0x1b098c[_0x440a31(0x112)][_0x440a31(0x1f5)])||_0x1b098c[_0x440a31(0x112)][_0x440a31(0x1f5)];_0xc1752e[_0x440a31(0x218)]({'id':_0x5f2eb5,'name':_0x3fb318});}const _0xee9d56=await this[_0x440a31(0x91)](_0x440a31(0xdc),_0x440a31(0x19c)),_0xd8a3bd=[];if(_0xee9d56)for(const _0x1a93e8 in _0xee9d56){const _0x2ba596=_0xee9d56[_0x1a93e8],_0x25fc98=(_0x2ba596['common']&&typeof _0x2ba596[_0x440a31(0x112)][_0x440a31(0x1f5)]===_0x440a31(0x154)?_0x2ba596[_0x440a31(0x112)][_0x440a31(0x1f5)]['de']:_0x2ba596[_0x440a31(0x112)][_0x440a31(0x1f5)])||_0x1a93e8[_0x440a31(0xa9)]('.')['pop']();_0xd8a3bd[_0x440a31(0x218)](_0x25fc98);}this[_0x440a31(0x107)](_0x4644de[_0x440a31(0x1b2)],_0x4644de[_0x440a31(0x195)],{'success':!![],'enums':_0xc1752e,'rooms':_0xd8a3bd},_0x4644de[_0x440a31(0x1c0)]);}else{if(_0x4644de[_0x440a31(0x195)]===_0x440a31(0x141)){const _0x152d4c=_0x4644de[_0x440a31(0x1d2)]['instance'];if(!_0x152d4c)return this['sendTo'](_0x4644de[_0x440a31(0x1b2)],_0x4644de[_0x440a31(0x195)],{'success':![],'error':_0x440a31(0x20e)},_0x4644de[_0x440a31(0x1c0)]);const _0x221985=await getCalendarNames(this,_0x152d4c);this['sendTo'](_0x4644de[_0x440a31(0x1b2)],_0x4644de[_0x440a31(0x195)],{'success':!![],'names':_0x221985},_0x4644de[_0x440a31(0x1c0)]);}else{if(_0x4644de[_0x440a31(0x195)]===_0x440a31(0x1f0)){const {targetId:_0x1174cc,targetValue:_0x518b48}=_0x4644de['message'];this[_0x440a31(0x8e)][_0x440a31(0x87)](_0x440a31(0xee)+_0x1174cc+_0x440a31(0x11e)+_0x518b48),await this[_0x440a31(0x1c3)](_0x440a31(0x1da),{'val':!![],'ack':!![]}),await this[_0x440a31(0x1c3)](_0x440a31(0x122),{'val':_0x440a31(0x148)+_0x1174cc,'ack':!![]}),await this['setStateAsync']('analysis.automation.targetId',{'val':_0x1174cc,'ack':!![]}),await this[_0x440a31(0x1c3)]('analysis.automation.targetValue',{'val':_0x518b48,'ack':!![]}),this['sendTo'](_0x4644de['from'],_0x4644de[_0x440a31(0x195)],{'success':!![]},_0x4644de[_0x440a31(0x1c0)]);}else{if(_0x4644de[_0x440a31(0x195)]===_0x440a31(0xe6)){const {historyId:_0x3bb291,rating:_0x264ac8,comment:_0x45ff6f,alertReason:_0x1f03cf}=_0x4644de[_0x440a31(0x1d2)];_0x3bb291&&_0x264ac8?(await saveFeedback(this,{'timestamp':Date['now'](),'historyId':_0x3bb291,'rating':_0x264ac8,'comment':_0x45ff6f,'alertReason':_0x1f03cf}),this[_0x440a31(0x107)](_0x4644de[_0x440a31(0x1b2)],_0x4644de[_0x440a31(0x195)],{'success':!![]},_0x4644de[_0x440a31(0x1c0)])):this[_0x440a31(0x107)](_0x4644de[_0x440a31(0x1b2)],_0x4644de[_0x440a31(0x195)],{'success':![],'error':'Missing\x20data'},_0x4644de[_0x440a31(0x1c0)]);}else _0x4644de[_0x440a31(0x195)]===_0x440a31(0x1d6)&&(this['log'][_0x440a31(0x87)](_0x440a31(0x219)),await this['setStateAsync'](_0x440a31(0x1da),{'val':![],'ack':!![]}),await this[_0x440a31(0x1c3)]('analysis.automation.description',{'val':'','ack':!![]}),this[_0x440a31(0x107)](_0x4644de['from'],_0x4644de[_0x440a31(0x195)],{'success':!![]},_0x4644de[_0x440a31(0x1c0)]));}}}}}}}}}}}if(require[a0_0xe96819(0x1d0)]!==module)module[a0_0xe96819(0xc8)]=_0x3d87b2=>new CogniLiving(_0x3d87b2);else new CogniLiving();