const a0_0x43fc4e=a0_0x35a6;(function(_0x3e46d1,_0x40dc86){const _0x532b1b=a0_0x35a6,_0x57c5e3=_0x3e46d1();while(!![]){try{const _0x5d2745=-parseInt(_0x532b1b(0x19e))/0x1*(parseInt(_0x532b1b(0x163))/0x2)+parseInt(_0x532b1b(0x174))/0x3+parseInt(_0x532b1b(0x1b0))/0x4+parseInt(_0x532b1b(0x192))/0x5+-parseInt(_0x532b1b(0x188))/0x6*(parseInt(_0x532b1b(0x19f))/0x7)+-parseInt(_0x532b1b(0x126))/0x8*(-parseInt(_0x532b1b(0xff))/0x9)+parseInt(_0x532b1b(0x190))/0xa*(-parseInt(_0x532b1b(0x136))/0xb);if(_0x5d2745===_0x40dc86)break;else _0x57c5e3['push'](_0x57c5e3['shift']());}catch(_0x2ee476){_0x57c5e3['push'](_0x57c5e3['shift']());}}}(a0_0x2be1,0xe03e3));function a0_0x2be1(){const _0x52e664=['inactivityThresholdHours','\x20Tage)','config','Aktiv\x20(','executeAutomationAction','object','setPresence','setupModeResetScheduler','isProVersion','2055447IfaPxW','systemConfig','sendTo','ltmJob','analysis.training.triggerComfort','./lib/installer','getGenerativeModel','updateTopology','constructor','cancel','lastAlertState','TRAIN_HEALTH','runBaselineDriftAnalysis','analysis.topology.structure','analysis.training.triggerTopology','slice','NORMAL','geminiApiKey','forEach','cogni-living\x20adapter\x20starting\x20(v','12thTchA','matrix','location','send','sensorLastValues','minDaysForBaseline','getStateAsync','length','428870mcIqFH','analysis.training.triggerEnergy','9174900GGmHIY','createAllObjects','activityLevel','startSystem','application/json','(((.+)+)+)+$','createDailyDigest','geminiModel','ack','SYSTEM_DP_MODE','includes','setupLtmScheduler','383CjWYOH','1887011GyLjXK','testApiKey','error','./lib/topology','TRAIN_SECURITY','Gemini\x20AI\x20initialized.','enum.functions.*','ðŸ•¸ï¸\x20Manually\x20triggering\x20Topology\x20Update...','pop','info','licenseKey','./lib/scheduler','modeResetJob','main','LTM.dailyDigests','LTM.rawEventLog','subscribeStates','7318060sbMjUd','updateHealthVector','SYSTEM_MODES','map','getForeignObjectsAsync','LTM.triggerDailyDigest','isPresent','parse','Activity-Level','notifyTelegramInstance','name','@google/generative-ai','triggerGaitAnalysis','version','SET_TOPOLOGY','keys','Topology\x20Update\x20Error:\x20','12319083ypTYBd','onMessage','unload','ðŸ§ \x20Triggering\x20Security\x20Training...','subscribeForeignStatesAsync','analysis.health.todayVector','analysisInterval','Lernphase\x20(','val','toString','callback','timestamp','now','LTM.trainingData.sequences','dailyDigests','rawEventLog','WiFi\x20Presence\x20detected.','getMinutes','floor','enum','apply','abortExitTimer','Adapter','runAutopilot','telegram','checkWifiPresence','analysis.trigger','find','stateChange','bind','dependencyInstallInProgress','message','genAI','ANALYZE_GAIT','triggerBriefing','driftAnalysisTimer','stringify','communicate.request','getOverviewData','8yvlEJW','onReady','toLowerCase','Gemini\x20Init\x20Error:\x20','PYTHON_EXE','currentSystemMode',')\x20-\x20Phase\x20C\x20(Stabilization)','automation.triggerAction','analysis.automation.autoApply','runGeminiAnalysis','updated','split','fill','checkAndInstall','Training\x20Error:\x20','LTM.baselineStatus','1045vSMSFK','analysis.automation.triggerAction','push','models/gemini-flash-latest','system.presenceWho','analysis.training.status','ðŸ•¸ï¸\x20Topology\x20Graph\x20manually\x20updated\x20by\x20user.','common','system.mode','setStateAsync','scanDevices','TRAIN_COMFORT','onUnload','getOutsideTemperatureNumeric','analysis.training.triggerHealth','./lib/scanner','@iobroker/adapter-core','./lib/recorder','briefingJob','ANALYZE_TREND','stopService','getHours','exitTimer','command','setState','notifyTelegramEnabled','analysisHistory','analysisTimer','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','onStateChange','updateTopologyMatrix','enum.rooms.*','devices','LTM.trainingData.thermodynamics','triggerEnergyPrediction','search','setHours','.communicate.request','PREDICT_ENERGY','loadSystemMode','./lib/ai_agent','runPythonHealthCheck','Sec-Training\x20started...','VACATION','log','974TOIjgD','presenceDevices','eventHistory','from','sendMorningBriefing','checkLicense','exports','type'];a0_0x2be1=function(){return _0x52e664;};return a0_0x2be1();}const a0_0x81827b=(function(){let _0x1b7301=!![];return function(_0x5a0533,_0xeeaacb){const _0x194ddc=_0x1b7301?function(){const _0x385ad5=a0_0x35a6;if(_0xeeaacb){const _0x2fa36e=_0xeeaacb[_0x385ad5(0x113)](_0x5a0533,arguments);return _0xeeaacb=null,_0x2fa36e;}}:function(){};return _0x1b7301=![],_0x194ddc;};}()),a0_0x5d7543=a0_0x81827b(this,function(){const _0x362f3c=a0_0x35a6;return a0_0x5d7543[_0x362f3c(0x108)]()[_0x362f3c(0x159)](_0x362f3c(0x197))[_0x362f3c(0x108)]()[_0x362f3c(0x17c)](a0_0x5d7543)[_0x362f3c(0x159)]('(((.+)+)+)+$');});a0_0x5d7543();'use strict';function a0_0x35a6(_0xdf5958,_0x4d5157){const _0x34d1a3=a0_0x2be1();return a0_0x35a6=function(_0x5d7543,_0x81827b){_0x5d7543=_0x5d7543-0xfb;let _0x2be1a0=_0x34d1a3[_0x5d7543];return _0x2be1a0;},a0_0x35a6(_0xdf5958,_0x4d5157);}const utils=require(a0_0x43fc4e(0x146)),{GoogleGenerativeAI}=require(a0_0x43fc4e(0x1bb)),installer=require(a0_0x43fc4e(0x179)),scanner=require(a0_0x43fc4e(0x145)),schedulers=require(a0_0x43fc4e(0x1aa)),topology=require(a0_0x43fc4e(0x1a2)),setup=require('./lib/setup'),recorder=require(a0_0x43fc4e(0x147)),pythonBridge=require('./lib/python_bridge'),aiAgent=require(a0_0x43fc4e(0x15e)),GEMINI_MODEL=a0_0x43fc4e(0x139),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x43fc4e(0x115)]{constructor(_0x1bec32){const _0x47276a=a0_0x43fc4e;super({..._0x1bec32,'name':'cogni-living'}),this[_0x47276a(0x165)]=[],this[_0x47276a(0x150)]=[],this['rawEventLog']=[],this[_0x47276a(0x10d)]=[],this[_0x47276a(0x18c)]={},this[_0x47276a(0x175)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x47276a(0x1b6)]=!![],this[_0x47276a(0x14c)]=null,this['exitGraceTimer']=null,this['isGracePeriodActive']=![],this[_0x47276a(0x11f)]=null,this[_0x47276a(0x199)]=null,this[_0x47276a(0x12b)]=setup[_0x47276a(0x1b2)][_0x47276a(0x184)],this[_0x47276a(0x173)]=![],this[_0x47276a(0x17e)]=![],this[_0x47276a(0x151)]=null,this[_0x47276a(0x177)]=null,this[_0x47276a(0x1ab)]=null,this['driftAnalysisTimer']=null,this[_0x47276a(0x148)]=null,this[_0x47276a(0x11d)]=![],this['on']('ready',this[_0x47276a(0x127)][_0x47276a(0x11c)](this)),this['on'](_0x47276a(0x11b),this[_0x47276a(0x153)][_0x47276a(0x11c)](this)),this['on'](_0x47276a(0x101),this['onUnload'][_0x47276a(0x11c)](this)),this['on'](_0x47276a(0x11e),this[_0x47276a(0x100)][_0x47276a(0x11c)](this));}async['onReady'](){const _0x285bc6=a0_0x43fc4e;this[_0x285bc6(0x162)][_0x285bc6(0x1a8)](_0x285bc6(0x187)+this[_0x285bc6(0xfb)]+_0x285bc6(0x12c));if(!installer[_0x285bc6(0x133)](this,()=>this['startSystem']()))return;}async[a0_0x43fc4e(0x195)](){const _0x2a174f=a0_0x43fc4e;await setup['initZombies'](this);try{this[_0x2a174f(0x173)]=await setup[_0x2a174f(0x168)](this[_0x2a174f(0x16d)][_0x2a174f(0x1a9)]);}catch(_0x342175){}if(!this[_0x2a174f(0x16d)][_0x2a174f(0x16b)]||this['config']['inactivityThresholdHours']<0.1)this[_0x2a174f(0x16d)][_0x2a174f(0x16b)]=0xc;await setup['initHistory'](this),await setup['initSystemConfig'](this);if(this['config'][_0x2a174f(0x185)])try{this[_0x2a174f(0x11f)]=new GoogleGenerativeAI(this[_0x2a174f(0x16d)][_0x2a174f(0x185)]),this[_0x2a174f(0x199)]=this[_0x2a174f(0x11f)][_0x2a174f(0x17a)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x2a174f(0x196)}}),this[_0x2a174f(0x162)][_0x2a174f(0x1a8)](_0x2a174f(0x1a4));}catch(_0x14d4e4){this['log']['error'](_0x2a174f(0x129)+_0x14d4e4['message']);}await setup[_0x2a174f(0x193)](this),await this[_0x2a174f(0x15d)]();try{const _0x20a4cc=await this[_0x2a174f(0x18e)](_0x2a174f(0x1ae));if(_0x20a4cc&&_0x20a4cc[_0x2a174f(0x107)])this[_0x2a174f(0x10e)]=JSON[_0x2a174f(0x1b7)](_0x20a4cc[_0x2a174f(0x107)]);}catch(_0xefe1e1){this[_0x2a174f(0x10e)]=[];}try{const _0x328f40=await this[_0x2a174f(0x18e)](_0x2a174f(0x1ad));if(_0x328f40&&_0x328f40['val'])this[_0x2a174f(0x10d)]=JSON['parse'](_0x328f40['val']);}catch(_0x199388){this['dailyDigests']=[];}const _0x3586fd=this[_0x2a174f(0x10d)][_0x2a174f(0x18f)]>=(this[_0x2a174f(0x16d)][_0x2a174f(0x18d)]||0x7)?_0x2a174f(0x16e)+this[_0x2a174f(0x10d)]['length']+_0x2a174f(0x16c):_0x2a174f(0x106)+this[_0x2a174f(0x10d)][_0x2a174f(0x18f)]+'/'+(this[_0x2a174f(0x16d)]['minDaysForBaseline']||0x7)+')';await this[_0x2a174f(0x13f)](_0x2a174f(0x135),{'val':_0x3586fd,'ack':!![]}),this[_0x2a174f(0x1af)](_0x2a174f(0x119)),this[_0x2a174f(0x1af)](_0x2a174f(0x1b5)),this[_0x2a174f(0x1af)](_0x2a174f(0x13e)),this[_0x2a174f(0x1af)]('analysis.triggerBriefing'),this[_0x2a174f(0x1af)](_0x2a174f(0x137)),this[_0x2a174f(0x1af)](_0x2a174f(0x12e)),this[_0x2a174f(0x1af)]('analysis.training.triggerSecurity'),this[_0x2a174f(0x1af)](_0x2a174f(0x144)),this[_0x2a174f(0x1af)](_0x2a174f(0x191)),this[_0x2a174f(0x1af)]('analysis.training.triggerComfort'),this['subscribeStates'](_0x2a174f(0x182));const _0x3538c1=this['config'][_0x2a174f(0x156)];if(_0x3538c1)for(const _0x26e975 of _0x3538c1){await this['subscribeForeignStatesAsync'](_0x26e975['id']);}const _0x4db227=this[_0x2a174f(0x16d)][_0x2a174f(0x164)];if(_0x4db227)for(const _0x3eec82 of _0x4db227){await this[_0x2a174f(0x103)](_0x3eec82);}if(this[_0x2a174f(0x16d)][_0x2a174f(0x14f)]&&this[_0x2a174f(0x16d)][_0x2a174f(0x1b9)])await this[_0x2a174f(0x103)](this['config'][_0x2a174f(0x1b9)]+_0x2a174f(0x15b));setTimeout(()=>this[_0x2a174f(0x118)](),0x1388);if(this['analysisTimer'])clearInterval(this[_0x2a174f(0x151)]);const _0x1a3c5c=this[_0x2a174f(0x16d)][_0x2a174f(0x105)]||0xf;_0x1a3c5c>0x0&&(this[_0x2a174f(0x151)]=setInterval(()=>{const _0x455da3=_0x2a174f;this[_0x455da3(0x116)]();},_0x1a3c5c*0x3c*0x3e8)),schedulers[_0x2a174f(0x19d)](this,()=>aiAgent[_0x2a174f(0x198)](this,pythonBridge)),schedulers[_0x2a174f(0x172)](this),schedulers['setupDriftAnalysisScheduler'](this,()=>aiAgent[_0x2a174f(0x180)](this)),schedulers['setupBriefingScheduler'](this,()=>aiAgent['sendMorningBriefing'](this)),pythonBridge['startService'](this,installer[_0x2a174f(0x12a)]),setTimeout(async()=>{const _0x2a93a7=_0x2a174f;await topology[_0x2a93a7(0x17b)](this);try{const _0x57b584=await this[_0x2a93a7(0x18e)](_0x2a93a7(0x181));if(_0x57b584&&_0x57b584['val'])pythonBridge['send'](this,_0x2a93a7(0xfc),JSON[_0x2a93a7(0x1b7)](_0x57b584[_0x2a93a7(0x107)]));}catch(_0x278aba){}this[_0x2a93a7(0x15f)](),this[_0x2a93a7(0x1bc)](),this[_0x2a93a7(0x158)](),this[_0x2a93a7(0x1b1)]();},0x1388);}[a0_0x43fc4e(0x142)](_0x3d8c41){const _0x22edc6=a0_0x43fc4e;if(this[_0x22edc6(0x151)])clearInterval(this[_0x22edc6(0x151)]);if(this[_0x22edc6(0x122)])clearInterval(this[_0x22edc6(0x122)]);if(this[_0x22edc6(0x177)])this[_0x22edc6(0x177)]['cancel']();if(this[_0x22edc6(0x1ab)])this[_0x22edc6(0x1ab)][_0x22edc6(0x17d)]();if(this['briefingJob'])this[_0x22edc6(0x148)][_0x22edc6(0x17d)]();recorder[_0x22edc6(0x114)](this),pythonBridge[_0x22edc6(0x14a)](this),_0x3d8c41();}async[a0_0x43fc4e(0x153)](_0xb4c844,_0x75424d){const _0x2b9e45=a0_0x43fc4e;if(!_0x75424d||this[_0x2b9e45(0x11d)])return;if(_0xb4c844[_0x2b9e45(0x19c)](_0x2b9e45(0x117))&&_0xb4c844['endsWith'](_0x2b9e45(0x124))&&_0x75424d[_0x2b9e45(0x107)])return;if(_0xb4c844===this['namespace']+'.system.mode'){if(_0x75424d['val']&&Object['values'](setup[_0x2b9e45(0x1b2)])[_0x2b9e45(0x19c)](_0x75424d['val'])){this[_0x2b9e45(0x12b)]=_0x75424d[_0x2b9e45(0x107)];if(_0x75424d[_0x2b9e45(0x107)]===setup[_0x2b9e45(0x1b2)][_0x2b9e45(0x161)])await recorder[_0x2b9e45(0x171)](this,![]);else await recorder[_0x2b9e45(0x171)](this,!![]);}if(!_0x75424d['ack'])this[_0x2b9e45(0x14e)](_0xb4c844,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x75424d[_0x2b9e45(0x19a)]){_0xb4c844[_0x2b9e45(0x19c)](_0x2b9e45(0x119))&&_0x75424d['val']&&(this[_0x2b9e45(0x14e)](_0xb4c844,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this));if(_0xb4c844[_0x2b9e45(0x19c)]('triggerDailyDigest')&&_0x75424d[_0x2b9e45(0x107)]){this[_0x2b9e45(0x14e)](_0xb4c844,{'val':![],'ack':!![]});if(this[_0x2b9e45(0x173)])aiAgent['createDailyDigest'](this,pythonBridge);}_0xb4c844[_0x2b9e45(0x19c)](_0x2b9e45(0x121))&&_0x75424d[_0x2b9e45(0x107)]&&(this[_0x2b9e45(0x14e)](_0xb4c844,{'val':![],'ack':!![]}),aiAgent[_0x2b9e45(0x167)](this));_0xb4c844[_0x2b9e45(0x19c)](_0x2b9e45(0x12d))&&_0x75424d[_0x2b9e45(0x107)]&&(this['setState'](_0xb4c844,{'val':![],'ack':!![]}),aiAgent[_0x2b9e45(0x16f)](this));if(_0xb4c844['includes']('analysis.training.triggerSecurity')&&_0x75424d[_0x2b9e45(0x107)]){this[_0x2b9e45(0x14e)](_0xb4c844,{'val':![],'ack':!![]});if(this[_0x2b9e45(0x173)])try{const _0x46a813=await this[_0x2b9e45(0x18e)](_0x2b9e45(0x10c));if(_0x46a813&&_0x46a813['val']){const _0x1e8cc5=JSON[_0x2b9e45(0x1b7)](_0x46a813[_0x2b9e45(0x107)]);this[_0x2b9e45(0x162)][_0x2b9e45(0x1a8)](_0x2b9e45(0x102)),this['setStateAsync'](_0x2b9e45(0x13b),{'val':_0x2b9e45(0x160),'ack':!![]}),pythonBridge['send'](this,_0x2b9e45(0x1a3),{'sequences':_0x1e8cc5});}}catch(_0x4e3cd3){this[_0x2b9e45(0x162)][_0x2b9e45(0x1a1)](_0x2b9e45(0x134)+_0x4e3cd3['message']);}}if(_0xb4c844[_0x2b9e45(0x19c)]('analysis.training.triggerHealth')&&_0x75424d['val']){this[_0x2b9e45(0x14e)](_0xb4c844,{'val':![],'ack':!![]});if(this[_0x2b9e45(0x173)])try{const _0x4d763c=await this['getStateAsync'](_0x2b9e45(0x1ad));if(_0x4d763c&&_0x4d763c[_0x2b9e45(0x107)])pythonBridge[_0x2b9e45(0x18b)](this,_0x2b9e45(0x17f),{'digests':JSON[_0x2b9e45(0x1b7)](_0x4d763c['val'])});}catch(_0x457229){}}if(_0xb4c844[_0x2b9e45(0x19c)]('analysis.training.triggerEnergy')&&_0x75424d[_0x2b9e45(0x107)]){this['setState'](_0xb4c844,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0xfb8c83=await this[_0x2b9e45(0x18e)](_0x2b9e45(0x157));if(_0xfb8c83&&_0xfb8c83[_0x2b9e45(0x107)])pythonBridge[_0x2b9e45(0x18b)](this,'TRAIN_ENERGY',{'points':JSON['parse'](_0xfb8c83[_0x2b9e45(0x107)])});}catch(_0x213a4d){}}if(_0xb4c844[_0x2b9e45(0x19c)](_0x2b9e45(0x178))&&_0x75424d[_0x2b9e45(0x107)]){this[_0x2b9e45(0x14e)](_0xb4c844,{'val':![],'ack':!![]});if(this[_0x2b9e45(0x173)])try{const _0x41a438=await this['getStateAsync'](_0x2b9e45(0x1ae));_0x41a438&&_0x41a438[_0x2b9e45(0x107)]&&(this[_0x2b9e45(0x162)][_0x2b9e45(0x1a8)]('ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...'),pythonBridge['send'](this,_0x2b9e45(0x141),{'events':JSON['parse'](_0x41a438['val'])}));}catch(_0x5e2683){}}_0xb4c844[_0x2b9e45(0x19c)](_0x2b9e45(0x182))&&_0x75424d[_0x2b9e45(0x107)]&&(this[_0x2b9e45(0x14e)](_0xb4c844,{'val':![],'ack':!![]}),this['log'][_0x2b9e45(0x1a8)](_0x2b9e45(0x1a6)),topology[_0x2b9e45(0x17b)](this));return;}if(this[_0x2b9e45(0x16d)][_0x2b9e45(0x164)]&&this[_0x2b9e45(0x16d)]['presenceDevices'][_0x2b9e45(0x19c)](_0xb4c844)){await this[_0x2b9e45(0x118)]();return;}const _0x338003=(this['config'][_0x2b9e45(0x156)]||[])[_0x2b9e45(0x11a)](_0x34ef77=>_0x34ef77['id']===_0xb4c844);if(_0x338003)recorder['processSensorEvent'](this,_0xb4c844,_0x75424d,_0x338003);}async[a0_0x43fc4e(0x100)](_0x436eea){const _0x5ec79c=a0_0x43fc4e;if(typeof _0x436eea==='object'&&_0x436eea['message']){if(_0x436eea[_0x5ec79c(0x14d)]===_0x5ec79c(0x1a0)){}else{if(_0x436eea[_0x5ec79c(0x14d)]===_0x5ec79c(0x140))try{const _0x2dcef7=await scanner['scanForDevices'](this,_0x436eea[_0x5ec79c(0x11e)]||{});this['sendTo'](_0x436eea[_0x5ec79c(0x166)],_0x436eea[_0x5ec79c(0x14d)],{'success':!![],'devices':_0x2dcef7},_0x436eea[_0x5ec79c(0x109)]);}catch(_0x2124ea){this[_0x5ec79c(0x176)](_0x436eea['from'],_0x436eea[_0x5ec79c(0x14d)],{'success':![],'error':_0x2124ea[_0x5ec79c(0x11e)]},_0x436eea[_0x5ec79c(0x109)]);}else{if(_0x436eea[_0x5ec79c(0x14d)]===_0x5ec79c(0x154)){const {matrix:_0x1884ca}=_0x436eea['message'];try{const _0x433fcd=await this[_0x5ec79c(0x18e)](_0x5ec79c(0x181));if(_0x433fcd&&_0x433fcd[_0x5ec79c(0x107)]){const _0x3204d6=JSON[_0x5ec79c(0x1b7)](_0x433fcd[_0x5ec79c(0x107)]);_0x3204d6[_0x5ec79c(0x189)]=_0x1884ca,_0x3204d6[_0x5ec79c(0x130)]=Date[_0x5ec79c(0x10b)](),await this[_0x5ec79c(0x13f)](_0x5ec79c(0x181),{'val':JSON['stringify'](_0x3204d6),'ack':!![]}),this[_0x5ec79c(0x162)][_0x5ec79c(0x1a8)](_0x5ec79c(0x13c)),pythonBridge[_0x5ec79c(0x18b)](this,_0x5ec79c(0xfc),_0x3204d6);}this[_0x5ec79c(0x176)](_0x436eea[_0x5ec79c(0x166)],_0x436eea[_0x5ec79c(0x14d)],{'success':!![]},_0x436eea[_0x5ec79c(0x109)]);}catch(_0x3be176){this[_0x5ec79c(0x162)]['error'](_0x5ec79c(0xfe)+_0x3be176['message']);}}else{if(_0x436eea['command']==='getLtmData')this['sendTo'](_0x436eea[_0x5ec79c(0x166)],_0x436eea[_0x5ec79c(0x14d)],{'success':!![],'dailyDigests':this[_0x5ec79c(0x10d)]||[],'analysisHistory':this['analysisHistory']||[]},_0x436eea[_0x5ec79c(0x109)]);else{if(_0x436eea[_0x5ec79c(0x14d)]===_0x5ec79c(0x125)){const _0x5ae0b4=this[_0x5ec79c(0x10d)][_0x5ec79c(0x18f)],_0x623226=new Array(0x18)[_0x5ec79c(0x132)](0x0),_0x10a128=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x5ec79c(0x165)]&&this[_0x5ec79c(0x165)]['forEach'](_0x1c7459=>{const _0xc31a0d=_0x5ec79c;if(_0x1c7459['timestamp']>=_0x10a128){const _0x372591=new Date(_0x1c7459[_0xc31a0d(0x10a)])[_0xc31a0d(0x14b)]();if(_0x372591>=0x0&&_0x372591<0x18)_0x623226[_0x372591]++;}}),this['sendTo'](_0x436eea[_0x5ec79c(0x166)],_0x436eea['command'],{'success':!![],'eventHistory':this[_0x5ec79c(0x165)][_0x5ec79c(0x183)](0x0,0xf),'stats':{'digestCount':_0x5ae0b4,'isPresent':this[_0x5ec79c(0x1b6)],'hourlyActivity':_0x623226},'automation':{'detected':![]}},_0x436eea['callback']);}else{if(_0x436eea[_0x5ec79c(0x14d)]==='getEnums'){const _0x20bf8c=await this[_0x5ec79c(0x1b4)](_0x5ec79c(0x1a5),'enum'),_0x4898cf=[];if(_0x20bf8c)for(const _0x1c0529 in _0x20bf8c){const _0x3eb21a=_0x20bf8c[_0x1c0529],_0x445a43=(_0x3eb21a[_0x5ec79c(0x13d)]&&typeof _0x3eb21a[_0x5ec79c(0x13d)][_0x5ec79c(0x1ba)]===_0x5ec79c(0x170)?_0x3eb21a[_0x5ec79c(0x13d)][_0x5ec79c(0x1ba)]['de']:_0x3eb21a['common']['name'])||_0x3eb21a[_0x5ec79c(0x13d)]['name'];_0x4898cf['push']({'id':_0x1c0529,'name':_0x445a43});}const _0x13a2d8=await this['getForeignObjectsAsync'](_0x5ec79c(0x155),_0x5ec79c(0x112)),_0x441742=[];if(_0x13a2d8)for(const _0x25a07f in _0x13a2d8){const _0x2a6d65=_0x13a2d8[_0x25a07f],_0x50160f=(_0x2a6d65[_0x5ec79c(0x13d)]&&typeof _0x2a6d65[_0x5ec79c(0x13d)]['name']===_0x5ec79c(0x170)?_0x2a6d65[_0x5ec79c(0x13d)][_0x5ec79c(0x1ba)]['de']:_0x2a6d65['common'][_0x5ec79c(0x1ba)])||_0x25a07f[_0x5ec79c(0x131)]('.')[_0x5ec79c(0x1a7)]();_0x441742[_0x5ec79c(0x138)](_0x50160f);}this['sendTo'](_0x436eea['from'],_0x436eea[_0x5ec79c(0x14d)],{'success':!![],'enums':_0x4898cf,'rooms':_0x441742},_0x436eea[_0x5ec79c(0x109)]);}}}}}}}}async[a0_0x43fc4e(0x15d)](){const _0x34ac96=a0_0x43fc4e;try{const _0x2c7299=await this[_0x34ac96(0x18e)](setup[_0x34ac96(0x19b)]);_0x2c7299&&_0x2c7299[_0x34ac96(0x107)]&&Object['values'](setup[_0x34ac96(0x1b2)])[_0x34ac96(0x19c)](_0x2c7299[_0x34ac96(0x107)])?this[_0x34ac96(0x12b)]=_0x2c7299['val']:(this[_0x34ac96(0x12b)]=setup['SYSTEM_MODES'][_0x34ac96(0x184)],await this['setStateAsync'](setup[_0x34ac96(0x19b)],{'val':setup[_0x34ac96(0x1b2)][_0x34ac96(0x184)],'ack':!![]}));}catch(_0x3ffaae){this[_0x34ac96(0x12b)]=setup[_0x34ac96(0x1b2)][_0x34ac96(0x184)];}}async[a0_0x43fc4e(0x118)](){const _0x152cbb=a0_0x43fc4e;try{const _0x3aa521=this['config'][_0x152cbb(0x164)]||[];let _0x89b45e=![];const _0x3182f7=[];for(const _0xfc5bd3 of _0x3aa521){try{const _0x5cb65c=await this['getForeignStateAsync'](_0xfc5bd3);_0x5cb65c&&(_0x5cb65c[_0x152cbb(0x107)]===!![]||_0x5cb65c[_0x152cbb(0x107)]==='online'||_0x5cb65c['val']===0x1)&&(_0x89b45e=!![],_0x3182f7[_0x152cbb(0x138)](_0xfc5bd3));}catch(_0x544ed8){}}return await this[_0x152cbb(0x13f)](_0x152cbb(0x13a),{'val':_0x3182f7['join'](',\x20'),'ack':!![]}),_0x89b45e&&(this['exitTimer']&&(this[_0x152cbb(0x162)][_0x152cbb(0x1a8)](_0x152cbb(0x10f)),recorder['abortExitTimer'](this)),!this[_0x152cbb(0x1b6)]&&this[_0x152cbb(0x12b)]===setup[_0x152cbb(0x1b2)][_0x152cbb(0x184)]&&await recorder[_0x152cbb(0x171)](this,!![])),_0x89b45e;}catch(_0x24a901){return![];}}async[a0_0x43fc4e(0x116)](){const _0x532d68=a0_0x43fc4e;this[_0x532d68(0x162)]['debug'](_0x532d68(0x152)),await aiAgent[_0x532d68(0x12f)](this),this['updateHealthVector'](),this[_0x532d68(0x1bc)](),this[_0x532d68(0x158)]();}['triggerGaitAnalysis'](){const _0x164a87=a0_0x43fc4e;if(!this[_0x164a87(0x173)])return;try{this['getState']('LTM.trainingData.sequences',(_0x4bd712,_0x246c4a)=>{const _0x38a430=_0x164a87;_0x246c4a&&_0x246c4a[_0x38a430(0x107)]&&pythonBridge[_0x38a430(0x18b)](this,_0x38a430(0x120),{'sequences':JSON[_0x38a430(0x1b7)](_0x246c4a[_0x38a430(0x107)])});});}catch(_0x14f355){}}async[a0_0x43fc4e(0x158)](){const _0x327f74=a0_0x43fc4e;if(!this['isProVersion'])return;try{const _0x220b21=await recorder[_0x327f74(0x143)](this);if(_0x220b21===null)return;const _0x1e31bf={},_0x1b156f=this['config'][_0x327f74(0x156)]||[];for(const _0x246a16 of _0x1b156f){if(_0x246a16[_0x327f74(0x16a)]==='temperature'&&_0x246a16[_0x327f74(0x18a)]){const _0x50c3fa=this[_0x327f74(0x18c)][_0x246a16['id']];if(_0x50c3fa!==undefined)_0x1e31bf[_0x246a16[_0x327f74(0x18a)]]=_0x50c3fa;}}Object[_0x327f74(0xfd)](_0x1e31bf)[_0x327f74(0x18f)]>0x0&&pythonBridge[_0x327f74(0x18b)](this,_0x327f74(0x15c),{'current_temps':_0x1e31bf,'t_out':_0x220b21});}catch(_0x28136e){}}['updateHealthVector'](){const _0x3edf8e=a0_0x43fc4e;if(!this[_0x3edf8e(0x10e)]||this[_0x3edf8e(0x10e)][_0x3edf8e(0x18f)]===0x0)return;const _0x50f2bc=new Array(0x60)[_0x3edf8e(0x132)](0x0),_0x2746d8=new Date()[_0x3edf8e(0x15a)](0x0,0x0,0x0,0x0);this['rawEventLog'][_0x3edf8e(0x186)](_0x35996f=>{const _0x430a19=_0x3edf8e,_0xbc537a=new Date(_0x35996f['timestamp']);if(_0xbc537a['getTime']()>=_0x2746d8){const _0x273551=_0xbc537a[_0x430a19(0x14b)](),_0x4fce18=_0xbc537a[_0x430a19(0x110)](),_0x34e2b6=_0x273551*0x4+Math[_0x430a19(0x111)](_0x4fce18/0xf);if(_0x34e2b6>=0x0&&_0x34e2b6<0x60)_0x50f2bc[_0x34e2b6]++;}}),this['setStateAsync'](_0x3edf8e(0x104),{'val':JSON[_0x3edf8e(0x123)](_0x50f2bc),'ack':!![]});}[a0_0x43fc4e(0x15f)](){const _0x25d02a=a0_0x43fc4e;if(!this[_0x25d02a(0x10d)]||this['dailyDigests'][_0x25d02a(0x18f)]<0x2)return;const _0x53a8ea=this['dailyDigests'][_0x25d02a(0x1b3)](_0x32c89a=>{const _0x100ac7=_0x25d02a,_0x2ee82d=(_0x32c89a[_0x100ac7(0x194)]||'')[_0x100ac7(0x128)]();return ACTIVITY_LEVEL_MAP[_0x2ee82d]||0x32;});pythonBridge[_0x25d02a(0x18b)](this,_0x25d02a(0x149),{'values':_0x53a8ea,'tag':_0x25d02a(0x1b8)});}}if(require[a0_0x43fc4e(0x1ac)]!==module)module[a0_0x43fc4e(0x169)]=_0x2998a5=>new CogniLiving(_0x2998a5);else new CogniLiving();