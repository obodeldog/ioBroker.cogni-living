const a0_0x45ca63=a0_0x1ff8;(function(_0x2c0d77,_0x318bc3){const _0x593e68=a0_0x1ff8,_0xeddac3=_0x2c0d77();while(!![]){try{const _0x50d7df=parseInt(_0x593e68(0x330))/0x1+-parseInt(_0x593e68(0x22b))/0x2+parseInt(_0x593e68(0x283))/0x3+parseInt(_0x593e68(0x33d))/0x4*(parseInt(_0x593e68(0x209))/0x5)+-parseInt(_0x593e68(0x2e7))/0x6*(-parseInt(_0x593e68(0x1cf))/0x7)+-parseInt(_0x593e68(0x2b8))/0x8+parseInt(_0x593e68(0x288))/0x9*(-parseInt(_0x593e68(0x357))/0xa);if(_0x50d7df===_0x318bc3)break;else _0xeddac3['push'](_0xeddac3['shift']());}catch(_0x466158){_0xeddac3['push'](_0xeddac3['shift']());}}}(a0_0x3315,0x5ee52));const a0_0x63df29=(function(){let _0x12f12b=!![];return function(_0x4f146a,_0x280eae){const _0x480541=_0x12f12b?function(){if(_0x280eae){const _0x2d92c8=_0x280eae['apply'](_0x4f146a,arguments);return _0x280eae=null,_0x2d92c8;}}:function(){};return _0x12f12b=![],_0x480541;};}()),a0_0xa978df=a0_0x63df29(this,function(){const _0x1833da=a0_0x1ff8;return a0_0xa978df[_0x1833da(0x2ce)]()['search'](_0x1833da(0x2d5))['toString']()[_0x1833da(0x2f9)](a0_0xa978df)[_0x1833da(0x314)](_0x1833da(0x2d5));});a0_0xa978df();'use strict';const utils=require(a0_0x45ca63(0x2b2)),{GoogleGenerativeAI}=require(a0_0x45ca63(0x22e)),{spawn}=require(a0_0x45ca63(0x344)),path=require('path'),fs=require('fs'),installer=require(a0_0x45ca63(0x261)),scanner=require(a0_0x45ca63(0x2ed)),schedulers=require(a0_0x45ca63(0x2da)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x45ca63(0x30e),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x45ca63(0x293),LTM_DP_DAILY_DIGESTS=a0_0x45ca63(0x24f),LTM_DP_STATUS=a0_0x45ca63(0x205),LTM_DP_TRIGGER_DIGEST=a0_0x45ca63(0x250),LTM_DP_BASELINE_STATUS=a0_0x45ca63(0x222),LTM_DP_DRIFT_CHANNEL=a0_0x45ca63(0x296),LTM_DP_DRIFT_STATUS=a0_0x45ca63(0x368),LTM_DP_DRIFT_DETAILS=a0_0x45ca63(0x333),LTM_DP_DRIFT_LAST_CHECK=a0_0x45ca63(0x270),SYSTEM_DP_MODE=a0_0x45ca63(0x227),SYSTEM_MODES={'NORMAL':a0_0x45ca63(0x2c1),'VACATION':a0_0x45ca63(0x2b6),'PARTY':a0_0x45ca63(0x28d),'GUEST':a0_0x45ca63(0x271)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x45ca63(0x251)],SYSTEM_MODES[a0_0x45ca63(0x337)]],PERSONA_MAPPING={'generic':a0_0x45ca63(0x1f2),'senior_aal':a0_0x45ca63(0x313),'family':a0_0x45ca63(0x2cc),'single_comfort':a0_0x45ca63(0x347),'security':a0_0x45ca63(0x2ae)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x352972){const _0x1a8bd0=a0_0x45ca63;try{const _0x19ceac=['analysis.history_debug_00',_0x1a8bd0(0x1ee)];for(const _0x29e082 of _0x19ceac){try{const _0x37ce7d=await _0x352972[_0x1a8bd0(0x229)](_0x29e082);if(_0x37ce7d)await _0x352972['delObjectAsync'](_0x29e082);}catch(_0x5b6d52){}}}catch(_0x15d1b3){}}async function checkLicense(_0x426fa8){return!![];}async function initHistory(_0x5ee6dc){const _0xe39433=a0_0x45ca63;try{const _0x49aa61=await _0x5ee6dc['getStateAsync'](_0xe39433(0x1e4));_0x49aa61&&_0x49aa61[_0xe39433(0x345)]&&(_0x5ee6dc[_0xe39433(0x1fc)]=JSON[_0xe39433(0x249)](_0x49aa61[_0xe39433(0x345)]['toString']()));}catch(_0x13eb19){_0x5ee6dc['eventHistory']=[];}try{const _0x18725b=await _0x5ee6dc[_0xe39433(0x1d5)](_0xe39433(0x34f));if(_0x18725b&&_0x18725b['val'])_0x5ee6dc['analysisHistory']=JSON['parse'](_0x18725b[_0xe39433(0x345)][_0xe39433(0x2ce)]());}catch(_0xeff657){_0x5ee6dc[_0xe39433(0x203)]=[];}if(_0x5ee6dc[_0xe39433(0x1fc)]&&_0x5ee6dc[_0xe39433(0x1fc)][_0xe39433(0x323)]>0x0){_0x5ee6dc['log'][_0xe39433(0x352)](_0xe39433(0x25e));for(let _0x113ca4=_0x5ee6dc['eventHistory'][_0xe39433(0x323)]-0x1;_0x113ca4>=0x0;_0x113ca4--){const _0x42c307=_0x5ee6dc[_0xe39433(0x1fc)][_0x113ca4];if(_0x42c307&&_0x42c307['id']!==undefined&&_0x42c307[_0xe39433(0x2d0)]!==undefined)_0x5ee6dc[_0xe39433(0x274)][_0x42c307['id']]=_0x42c307[_0xe39433(0x2d0)];}}}async function initSystemConfig(_0x4ea373){const _0x232a06=a0_0x45ca63;try{const _0x12f3e5=await _0x4ea373[_0x232a06(0x25b)](_0x232a06(0x35f));if(_0x12f3e5&&_0x12f3e5['common'])_0x4ea373[_0x232a06(0x21b)]={'latitude':_0x12f3e5[_0x232a06(0x260)]['latitude']||0x0,'longitude':_0x12f3e5[_0x232a06(0x260)][_0x232a06(0x2aa)]||0x0,'city':_0x12f3e5['common'][_0x232a06(0x23d)]||''};}catch(_0x4101b7){}}async function createAllObjects(_0x182680){const _0x4a2355=a0_0x45ca63;await _0x182680[_0x4a2355(0x2ad)](_0x4a2355(0x28b),{'type':_0x4a2355(0x363),'common':{'name':_0x4a2355(0x2e3)},'native':{}}),await _0x182680['extendObjectAsync'](SYSTEM_DP_MODE,{'type':'state','common':{'name':_0x4a2355(0x321),'type':_0x4a2355(0x279),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL']},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x1e3),{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x343),'type':'string','role':_0x4a2355(0x364),'read':!![],'write':![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x2d2),{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x2a9),'type':_0x4a2355(0x279),'role':_0x4a2355(0x2f6),'read':!![],'write':![]},'native':{}}),await _0x182680['setObjectNotExistsAsync']('events.history',{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x30b),'type':_0x4a2355(0x279),'role':_0x4a2355(0x2f6),'read':!![],'write':![]},'native':{}}),await _0x182680['extendObjectAsync'](_0x4a2355(0x1cd),{'type':_0x4a2355(0x363),'common':{'name':_0x4a2355(0x243)},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x282),{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x2c2),'type':_0x4a2355(0x216),'role':_0x4a2355(0x26c),'read':!![],'write':!![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x231),{'type':'state','common':{'name':'Train\x20Health','type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)]('analysis.training.triggerEnergy',{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x210),'type':_0x4a2355(0x216),'role':_0x4a2355(0x26c),'read':!![],'write':!![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x2fa),{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x291),'type':_0x4a2355(0x216),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x35b),{'type':'state','common':{'name':_0x4a2355(0x32a),'type':'boolean','role':_0x4a2355(0x26c),'read':!![],'write':!![]},'native':{}}),await _0x182680['setObjectNotExistsAsync'](_0x4a2355(0x1f1),{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x31a),'type':_0x4a2355(0x279),'role':_0x4a2355(0x364),'read':!![],'write':![]},'native':{}}),await _0x182680[_0x4a2355(0x2ad)](_0x4a2355(0x31e),{'type':_0x4a2355(0x363),'common':{'name':_0x4a2355(0x2ba)},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x2cb),{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x348),'type':_0x4a2355(0x32b),'role':_0x4a2355(0x2d0),'read':!![],'write':![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x1d9),{'type':'state','common':{'name':'Current\x20Threshold','type':_0x4a2355(0x32b),'role':_0x4a2355(0x2d0),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x182680['setObjectNotExistsAsync']('analysis.security.lastCheck',{'type':'state','common':{'name':'Last\x20Check','type':_0x4a2355(0x279),'role':_0x4a2355(0x354),'read':!![],'write':![]},'native':{}}),await _0x182680['setObjectNotExistsAsync'](_0x4a2355(0x2a6),{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x26e),'type':_0x4a2355(0x279),'role':_0x4a2355(0x2f6),'read':!![],'write':![]},'native':{}}),await _0x182680[_0x4a2355(0x2ad)]('analysis.health',{'type':_0x4a2355(0x363),'common':{'name':_0x4a2355(0x221)},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x253),{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x1e5),'type':_0x4a2355(0x279),'role':'date','read':!![],'write':![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x1fb),{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x286),'type':'boolean','role':_0x4a2355(0x353),'read':!![],'write':![]},'native':{}}),await _0x182680['setObjectNotExistsAsync'](_0x4a2355(0x2be),{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x34c),'type':_0x4a2355(0x279),'role':_0x4a2355(0x364),'read':!![],'write':![]},'native':{}}),await _0x182680['setObjectNotExistsAsync'](_0x4a2355(0x233),{'type':'state','common':{'name':_0x4a2355(0x30f),'type':'number','role':_0x4a2355(0x2d0),'read':!![],'write':![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x27b),{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x25c),'type':_0x4a2355(0x279),'role':_0x4a2355(0x2f6),'read':!![],'write':![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)]('analysis.health.gaitSpeed',{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x1f7),'type':_0x4a2355(0x32b),'role':_0x4a2355(0x2d0),'read':!![],'write':![]},'native':{}}),await _0x182680[_0x4a2355(0x2ad)](_0x4a2355(0x2f0),{'type':_0x4a2355(0x363),'common':{'name':_0x4a2355(0x2bd)},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x232),{'type':'state','common':{'name':_0x4a2355(0x244),'type':_0x4a2355(0x279),'role':'text','read':!![],'write':![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x341),{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x292),'type':_0x4a2355(0x279),'role':_0x4a2355(0x364),'read':!![],'write':![]},'native':{}}),await _0x182680['setObjectNotExistsAsync']('analysis.energy.forecast',{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x228),'type':'string','role':_0x4a2355(0x2f6),'read':!![],'write':![]},'native':{}}),await _0x182680[_0x4a2355(0x2ad)](_0x4a2355(0x328),{'type':_0x4a2355(0x363),'common':{'name':_0x4a2355(0x328)},'native':{}}),await _0x182680[_0x4a2355(0x2ad)](LTM_DP_RAW_LOG,{'type':_0x4a2355(0x1d8),'common':{'name':'Raw\x20Log','type':'string','role':_0x4a2355(0x2f6),'read':!![],'write':![]},'native':{}}),await _0x182680[_0x4a2355(0x2ad)](LTM_DP_DAILY_DIGESTS,{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x255),'type':_0x4a2355(0x279),'role':_0x4a2355(0x2f6),'read':!![],'write':![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x325),{'type':'state','common':{'name':_0x4a2355(0x2e5),'type':'string','role':_0x4a2355(0x2f6),'read':!![],'write':![]},'native':{}}),await _0x182680['setObjectNotExistsAsync'](_0x4a2355(0x31d),{'type':_0x4a2355(0x1d8),'common':{'name':'Thermodynamics','type':_0x4a2355(0x279),'role':_0x4a2355(0x2f6),'read':!![],'write':![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x234),{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x31b),'type':_0x4a2355(0x216),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x1d1),{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x223),'type':_0x4a2355(0x216),'role':_0x4a2355(0x26c),'read':!![],'write':!![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x327),{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x2bc),'type':_0x4a2355(0x216),'role':_0x4a2355(0x31c),'read':!![],'write':![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x35a),{'type':'state','common':{'name':_0x4a2355(0x2d7),'type':_0x4a2355(0x279),'role':_0x4a2355(0x1d2),'read':!![],'write':![]},'native':{}}),await _0x182680['setObjectNotExistsAsync']('analysis.activitySummary',{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x2dc),'type':_0x4a2355(0x279),'role':_0x4a2355(0x364),'read':!![],'write':![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x302),{'type':'state','common':{'name':_0x4a2355(0x1f0),'type':_0x4a2355(0x216),'role':_0x4a2355(0x353),'read':!![],'write':![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x1da),{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x309),'type':_0x4a2355(0x279),'role':_0x4a2355(0x364),'read':!![],'write':![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)]('analysis.automation.detectedPatterns',{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x29f),'type':_0x4a2355(0x279),'role':'json','read':!![],'write':![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x1ca),{'type':'state','common':{'name':_0x4a2355(0x24d),'type':_0x4a2355(0x279),'role':'text','read':!![],'write':![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)]('analysis.automation.targetValue',{'type':_0x4a2355(0x1d8),'common':{'name':_0x4a2355(0x2e2),'type':_0x4a2355(0x279),'role':_0x4a2355(0x364),'read':!![],'write':![]},'native':{}}),await _0x182680['setObjectNotExistsAsync'](_0x4a2355(0x2d6),{'type':_0x4a2355(0x1d8),'common':{'name':'Auto\x20Apply','type':'boolean','role':_0x4a2355(0x369),'read':!![],'write':!![]},'native':{}}),await _0x182680[_0x4a2355(0x1fe)](_0x4a2355(0x1e6),{'type':'state','common':{'name':_0x4a2355(0x28e),'type':_0x4a2355(0x216),'role':_0x4a2355(0x26c),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x13fc3b){const _0x243196=a0_0x45ca63;try{const _0x4e924c=await _0x13fc3b['getStateAsync'](SYSTEM_DP_MODE);_0x4e924c&&_0x4e924c['val']&&Object['values'](SYSTEM_MODES)['includes'](_0x4e924c['val'])?_0x13fc3b[_0x243196(0x2df)]=_0x4e924c[_0x243196(0x345)]:(_0x13fc3b[_0x243196(0x2df)]=SYSTEM_MODES[_0x243196(0x2c3)],await _0x13fc3b['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x243196(0x2c3)],'ack':!![]}));}catch(_0x375f9b){_0x13fc3b[_0x243196(0x2df)]=SYSTEM_MODES[_0x243196(0x2c3)];}}async function loadRawEventLog(_0xa61801){const _0x4bb82a=a0_0x45ca63;try{const _0x42a562=await _0xa61801[_0x4bb82a(0x1d5)](LTM_DP_RAW_LOG);if(_0x42a562&&_0x42a562[_0x4bb82a(0x345)])_0xa61801['rawEventLog']=JSON[_0x4bb82a(0x249)](_0x42a562[_0x4bb82a(0x345)]);}catch(_0x4e53b4){_0xa61801[_0x4bb82a(0x1e9)]=[];}}async function saveRawEventLog(_0x4f50c3){const _0xb3083a=a0_0x45ca63;if(_0x4f50c3['rawEventLog'][_0xb3083a(0x323)]>RAW_LOG_MAX_SIZE)_0x4f50c3[_0xb3083a(0x1e9)][_0xb3083a(0x1db)](0x0,_0x4f50c3['rawEventLog'][_0xb3083a(0x323)]-RAW_LOG_MAX_SIZE);await _0x4f50c3['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0xb3083a(0x315)](_0x4f50c3[_0xb3083a(0x1e9)]),'ack':!![]});}async function loadDailyDigests(_0x4a4908){const _0x219514=a0_0x45ca63;try{const _0x3d82a7=await _0x4a4908['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x3d82a7&&_0x3d82a7[_0x219514(0x345)])_0x4a4908[_0x219514(0x21a)]=JSON[_0x219514(0x249)](_0x3d82a7['val']);}catch(_0x444cd6){_0x4a4908[_0x219514(0x21a)]=[];}await updateBaselineStatus(_0x4a4908);}async function saveDailyDigests(_0x5ecceb,_0x3a5a2=!![]){const _0x54908e=a0_0x45ca63,_0x252df7=_0x5ecceb[_0x54908e(0x277)][_0x54908e(0x23a)]||0x3c;_0x5ecceb[_0x54908e(0x21a)][_0x54908e(0x323)]>_0x252df7&&_0x5ecceb[_0x54908e(0x21a)][_0x54908e(0x1db)](0x0,_0x5ecceb['dailyDigests'][_0x54908e(0x323)]-_0x252df7);await _0x5ecceb[_0x54908e(0x213)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x54908e(0x315)](_0x5ecceb[_0x54908e(0x21a)]),'ack':!![]});if(_0x3a5a2)await updateBaselineStatus(_0x5ecceb);}async function updateAnalysisHistory(_0x10377e,_0x30b39a){const _0x2b3c33=a0_0x45ca63;_0x10377e[_0x2b3c33(0x203)][_0x2b3c33(0x1ce)](_0x30b39a);if(_0x10377e[_0x2b3c33(0x203)]['length']>HISTORY_MAX_SIZE)_0x10377e[_0x2b3c33(0x203)][_0x2b3c33(0x254)]();await _0x10377e[_0x2b3c33(0x213)](_0x2b3c33(0x34f),{'val':JSON[_0x2b3c33(0x315)](_0x10377e[_0x2b3c33(0x203)]),'ack':!![]});}async function updateBaselineStatus(_0x2ab2b7){const _0x3cae2f=a0_0x45ca63;if(!_0x2ab2b7[_0x3cae2f(0x340)]){await _0x2ab2b7[_0x3cae2f(0x213)](LTM_DP_BASELINE_STATUS,{'val':_0x3cae2f(0x22a),'ack':!![]});return;}const _0x5ad74f=_0x2ab2b7['dailyDigests'][_0x3cae2f(0x323)]>=(_0x2ab2b7[_0x3cae2f(0x277)][_0x3cae2f(0x242)]||0x7)?_0x3cae2f(0x27c)+_0x2ab2b7[_0x3cae2f(0x21a)][_0x3cae2f(0x323)]+_0x3cae2f(0x2d9):_0x3cae2f(0x32f)+_0x2ab2b7[_0x3cae2f(0x21a)][_0x3cae2f(0x323)]+'/'+(_0x2ab2b7[_0x3cae2f(0x277)][_0x3cae2f(0x242)]||0x7)+')';await _0x2ab2b7[_0x3cae2f(0x213)](LTM_DP_BASELINE_STATUS,{'val':_0x5ad74f,'ack':!![]});}async function initSensorSubscriptions(_0x5e03b5){const _0x2c36a5=a0_0x45ca63,_0x465539=_0x5e03b5[_0x2c36a5(0x277)][_0x2c36a5(0x301)];if(_0x465539)for(const _0x725b28 of _0x465539){await _0x5e03b5[_0x2c36a5(0x21e)](_0x725b28['id']);}}async function initPresenceSubscriptions(_0x32ef7e){const _0x52ab7c=a0_0x45ca63,_0x436342=_0x32ef7e['config'][_0x52ab7c(0x2ec)];if(_0x436342)for(const _0x6c75a0 of _0x436342){await _0x32ef7e[_0x52ab7c(0x21e)](_0x6c75a0);}}async function setupTelegramListener(_0x3692d4){const _0x14a31d=a0_0x45ca63,_0x17642e=_0x3692d4[_0x14a31d(0x277)][_0x14a31d(0x217)];if(_0x3692d4['config'][_0x14a31d(0x226)]&&_0x17642e)await _0x3692d4['subscribeForeignStatesAsync'](_0x17642e+_0x14a31d(0x21c));}async function checkWifiPresence(_0x2fe03f){const _0x251ee2=a0_0x45ca63;try{const _0x30043e=_0x2fe03f[_0x251ee2(0x277)][_0x251ee2(0x2ec)]||[];let _0x43d8b0=![];const _0x28e8e9=[];for(const _0x4f836e of _0x30043e){try{const _0x16c52b=await _0x2fe03f[_0x251ee2(0x359)](_0x4f836e);_0x16c52b&&(_0x16c52b[_0x251ee2(0x345)]===!![]||_0x16c52b[_0x251ee2(0x345)]==='online'||_0x16c52b[_0x251ee2(0x345)]===0x1)&&(_0x43d8b0=!![],_0x28e8e9[_0x251ee2(0x319)](_0x4f836e));}catch(_0x15d5ee){}}return await _0x2fe03f[_0x251ee2(0x213)](_0x251ee2(0x1e3),{'val':_0x28e8e9['join'](',\x20'),'ack':!![]}),_0x43d8b0&&(_0x2fe03f['exitTimer']&&(_0x2fe03f[_0x251ee2(0x20a)][_0x251ee2(0x352)](_0x251ee2(0x206)),abortExitTimer(_0x2fe03f)),!_0x2fe03f[_0x251ee2(0x248)]&&_0x2fe03f['currentSystemMode']===SYSTEM_MODES[_0x251ee2(0x2c3)]&&await setPresence(_0x2fe03f,!![])),_0x43d8b0;}catch(_0x321d29){return![];}}function startExitTimer(_0x50e1c1){const _0x112373=a0_0x45ca63;abortExitTimer(_0x50e1c1),_0x50e1c1['isGracePeriodActive']=!![],_0x50e1c1[_0x112373(0x351)]=setTimeout(()=>{const _0x4218fd=_0x112373;_0x50e1c1[_0x4218fd(0x33e)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x50e1c1[_0x112373(0x1c7)]=setTimeout(()=>{const _0x1a38dd=_0x112373;setPresence(_0x50e1c1,![]),_0x50e1c1[_0x1a38dd(0x1c7)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x329cba){const _0x3b4514=a0_0x45ca63;if(_0x329cba[_0x3b4514(0x1c7)])clearTimeout(_0x329cba[_0x3b4514(0x1c7)]);if(_0x329cba[_0x3b4514(0x351)])clearTimeout(_0x329cba['exitGraceTimer']);_0x329cba[_0x3b4514(0x1c7)]=null,_0x329cba[_0x3b4514(0x351)]=null,_0x329cba[_0x3b4514(0x33e)]=![];}async function setPresence(_0xd80bd2,_0x5bdad8){const _0x5bbcbe=a0_0x45ca63;if(_0xd80bd2[_0x5bbcbe(0x248)]===_0x5bdad8)return;_0xd80bd2[_0x5bbcbe(0x248)]=_0x5bdad8,await _0xd80bd2['setStateAsync'](_0x5bbcbe(0x230),{'val':_0x5bdad8,'ack':!![]});}async function executeAutomationAction(_0x2fbd72){const _0x4c4d84=a0_0x45ca63;try{const _0xfc025a=await _0x2fbd72[_0x4c4d84(0x1d5)](_0x4c4d84(0x1ca)),_0x1a34fc=await _0x2fbd72['getStateAsync'](_0x4c4d84(0x2b4));if(_0xfc025a&&_0xfc025a[_0x4c4d84(0x345)]&&_0x1a34fc){const _0xe725e9=_0xfc025a['val'];let _0x223ae8=_0x1a34fc[_0x4c4d84(0x345)];try{_0x223ae8=JSON['parse'](_0x223ae8);}catch(_0x4be00e){}_0x2fbd72[_0x4c4d84(0x20a)]['info'](_0x4c4d84(0x219)+_0xe725e9+'\x20=\x20'+_0x223ae8),await _0x2fbd72[_0x4c4d84(0x2af)](_0xe725e9,_0x223ae8);}else _0x2fbd72[_0x4c4d84(0x20a)]['warn']('ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x4186ee){_0x2fbd72[_0x4c4d84(0x20a)][_0x4c4d84(0x2e4)](_0x4c4d84(0x1ec)+_0x4186ee[_0x4c4d84(0x33c)]);}}async function processSensorEvent(_0x1a2357,_0x531951,_0x3cb9fa,_0x1ace84){const _0x469398=a0_0x45ca63;if(!_0x1ace84)return;const _0x3ae31c=_0x3cb9fa[_0x469398(0x345)],_0x4f5bb2=Date[_0x469398(0x290)](),_0x5bec11=_0x1a2357[_0x469398(0x274)][_0x531951];_0x1a2357['sensorLastValues'][_0x531951]=_0x3ae31c;if(!_0x1ace84[_0x469398(0x276)]&&_0x5bec11!=undefined&&_0x5bec11==_0x3ae31c)return;const _0x313846=(_0x1ace84[_0x469398(0x20c)]||'')[_0x469398(0x1f9)](),_0x3e4370=_0x313846['includes']('temperature')||_0x313846[_0x469398(0x20e)]('temperatur')||_0x313846[_0x469398(0x20e)](_0x469398(0x22d))||_0x313846[_0x469398(0x20e)](_0x469398(0x33f));_0x1a2357[_0x469398(0x340)]&&_0x3e4370&&recordThermodynamics(_0x1a2357,_0x531951,_0x3ae31c,_0x1ace84[_0x469398(0x1ea)]);const _0x74a09={'timestamp':_0x4f5bb2,'id':_0x531951,'name':_0x1ace84[_0x469398(0x2fb)],'type':_0x1ace84[_0x469398(0x20c)],'location':_0x1ace84[_0x469398(0x1ea)],'value':_0x3ae31c};_0x1a2357[_0x469398(0x1fc)][_0x469398(0x1ce)](_0x74a09);if(_0x1a2357[_0x469398(0x1fc)][_0x469398(0x323)]>HISTORY_MAX_SIZE)_0x1a2357[_0x469398(0x1fc)][_0x469398(0x254)]();await _0x1a2357[_0x469398(0x213)](_0x469398(0x2d2),{'val':JSON['stringify'](_0x74a09),'ack':!![]}),await _0x1a2357[_0x469398(0x213)](_0x469398(0x1e4),{'val':JSON[_0x469398(0x315)](_0x1a2357[_0x469398(0x1fc)]),'ack':!![]});_0x1a2357[_0x469398(0x340)]&&(_0x1a2357[_0x469398(0x1e9)][_0x469398(0x319)](_0x74a09),await saveRawEventLog(_0x1a2357),recordSequence(_0x1a2357,_0x74a09));if(_0x1ace84['isExit']&&_0x3ae31c===!![]){if(_0x1a2357[_0x469398(0x248)]&&!_0x1a2357['isGracePeriodActive'])startExitTimer(_0x1a2357);else{if(!_0x1a2357[_0x469398(0x248)])setPresence(_0x1a2357,!![]);}}else{if(_0x1ace84[_0x469398(0x20c)]==='motion'&&_0x3ae31c===!![]){if(_0x1a2357['exitTimer'])abortExitTimer(_0x1a2357);if(!_0x1a2357['isPresent']&&_0x1a2357[_0x469398(0x2df)]===SYSTEM_MODES[_0x469398(0x2c3)])setPresence(_0x1a2357,!![]);}}}async function recordThermodynamics(_0x559b35,_0x50ffac,_0x1c542a,_0x54dba8){const _0x30ba10=a0_0x45ca63,_0x2cf5c4=await getOutsideTemperatureNumeric(_0x559b35),_0x1da030=await _0x559b35[_0x30ba10(0x1d5)]('LTM.trainingData.thermodynamics');let _0x5caf11=[];if(_0x1da030&&_0x1da030[_0x30ba10(0x345)])try{_0x5caf11=JSON['parse'](_0x1da030[_0x30ba10(0x345)]);}catch(_0x4b425c){}_0x5caf11[_0x30ba10(0x319)]({'ts':Date[_0x30ba10(0x290)](),'room':_0x54dba8||'Unknown','t_in':_0x1c542a,'t_out':_0x2cf5c4});if(_0x5caf11['length']>THERMO_LOG_SIZE)_0x5caf11['shift']();await _0x559b35[_0x30ba10(0x213)]('LTM.trainingData.thermodynamics',{'val':JSON['stringify'](_0x5caf11),'ack':!![]});}function a0_0x3315(){const _0x426fb9=['analysisHistory','.forecast.current.temperature','LTM.processingStatus','WiFi\x20Presence\x20detected.','openweathermap','diagnosis','45TyNOnH','log','setupBriefingScheduler','type','unload','includes','Unbekannt','Train\x20Energy','ltmJob','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','setStateAsync','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','setupLtmScheduler','boolean','notifyTelegramInstance','kontakt','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','dailyDigests','systemConfig','.communicate.request','modeResetJob','subscribeForeignStatesAsync','Briefing\x20Error:\x20','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','Health\x20Analysis','LTM.baselineStatus','Trigger\x20Briefing','cogni-living\x20adapter\x20starting\x20(v','.Current.Temperature','notifyTelegramEnabled','system.mode','Temperature\x20Forecast','getObjectAsync','Deaktiviert\x20(Pro-Feature)','858462AWzRkQ','analysis.activitySummary','klima','@google/generative-ai','Gemini\x20Error:\x20','system.isPresent','analysis.training.triggerHealth','analysis.energy.insulationScore','analysis.health.trendValue','analysis.trigger','apiKey','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','python_service','version','onReady','ltmLtbWindowDays','cancel','getHours','city','lastAlertState','Kein\x20API\x20Key!','heating','Training\x20Error:\x20','minDaysForBaseline','AI\x20Training','Insulation\x20Score','service.py','PYTHON_EXE','useWeather','isPresent','parse','onMessage','Started...','Keine\x20Wetterdaten\x20verfÃ¼gbar.','Target\x20ID','ðŸ\x20Python\x20Pong','LTM.dailyDigests','LTM.triggerDailyDigest','PARTY','write','analysis.health.lastCheck','pop','Daily\x20Digests','stateChange','driftDetails','ltmStbWindowDays','response','reason','getForeignObjectAsync','Today\x20Vector\x20(15m)','detected','Restoring\x20sensor\x20cache...','PONG','common','./lib/installer','is_anomaly','HEALTH_TRAIN_RESULT','geminiApiKey','shift','isEmergency','Keine\x20Details.','Error\x20launching\x20Python:\x20','triggerBriefing','Kein\x20API\x20Key.','setupDriftAnalysisScheduler','button','getTime','Topology\x20Matrix','[RESULT]','LTM.driftAnalysis.lastCheck','guest','namespace','OK:\x20','sensorLastValues','accuweather','logDuplicates','config','command','string','Success','analysis.health.todayVector','Aktiv\x20(','livingContext','.Current.WeatherText','Digest','Err:\x20','inactivityThresholdHours','analysis.training.triggerSecurity','92355YnPHpZ','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','dependencyInstallInProgress','Anomaly\x20Detected','door','27aZsDvH','ENERGY_TRAIN_RESULT','generateContent','system','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','party','Trigger\x20Action','timestamp','now','Train\x20Comfort','Heating\x20Score','LTM.rawEventLog','âœ…\x20HEALTH\x20TRAINED.','fenster','LTM.driftAnalysis','.\x20EVENTS:\x20','light','scanForDevices','from','analysis.training.triggerEnergy','Sec-Training\x20started...','endsWith','slice','Detected\x20Patterns','confidence','geminiModel','activityLevel','SECURITY_RESULT','GAIT_RESULT','sendTo','analysis.security.topologyMatrix','testContext','getForeignObjectsAsync','Last\x20raw\x20event','longitude','cogni-living','object','extendObjectAsync','PRIORITÃ„T:\x20Sicherheit.','setForeignStateAsync','startsWith','window','@iobroker/adapter-core','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','analysis.automation.targetValue','genAI','vacation','N/A\x20(Learning)','3888408LsEBpJ','Skipped\x20(No\x20AI\x20or\x20Data)','Security\x20Monitor','ANALYZE_SEQUENCE','Alert\x20Status','Energy\x20Intelligence','analysis.health.trendDiagnosis','application/json','temperature','normal','Train\x20Security','NORMAL','ack','PREDICT_ENERGY','ðŸ“\x20Feedback\x20received:\x20','N/A','baselineDrift','keys','TRAIN_SECURITY','analysis.security.lastScore','Fokus\x20auf\x20Familienroutinen.','prÃ¤senz','toString','presence','value','analysis.health.gaitSpeed','events.lastEvent','.forecast.current.temp','checkAndInstall','(((.+)+)+)+$','analysis.automation.autoApply','Alert\x20Reason','driftAnalysisTimer','\x20Tage)','./lib/scheduler','licenseKey','Activity\x20Summary','enum','exports','currentSystemMode','[PYTHON]\x20','\x20new\x20patterns.','Target\x20Value','System','error','Sequences','\x20->\x20','186234rqoGQY','getFullYear','debug','python3','ANALYZE_HEALTH','presenceDevices','./lib/scanner','join','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','analysis.energy','Gemini\x20Init\x20Error:\x20','summary','weatherInstance','User\x20dismissed\x20automation\x20proposal.','getDate','json','getGenerativeModel','Wetterdaten\x20deaktiviert.','constructor','analysis.training.triggerComfort','name','[LOG]','onStateChange','simulateButler','bewegung','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','devices','analysis.automation.patternDetected','generic','Keine\x20Termine.','automationProposal','Kalender\x20deaktiviert.','threshold','find','Description','getCalendarNames','Event\x20History','bind','forEach','models/gemini-flash-latest','Trend\x20Value','contact','onUnload','getLtmData','PRIORITÃ„T:\x20Gesundheit/AAL.','search','stringify','isAlert','setState','instance','push','Training\x20Status','Trigger\x20Analysis','indicator.alarm','LTM.trainingData.thermodynamics','analysis.security','outdoorSensorId','TRAINING_COMPLETE','System\x20Mode','Failed:\x20','length','VACATION','LTM.trainingData.sequences','subscribeStates','analysis.isAlert','LTM','round','Build\x20Topology','number','toISOString','automation.triggerAction','getMinutes','Lernphase\x20(','646591dpqFxB','status','analysisTimer','LTM.driftAnalysis.driftDetails','split','âš ï¸\x20SECURITY\x20ALARM:\x20','success','GUEST','ENERGY_PREDICT_RESULT','.\x20EMERGENCY:\x20','getEnums','callback','message','329492dzpcjT','isGracePeriodActive','heizung','isProVersion','analysis.energy.heatingScore','ðŸ§ \x20Triggering\x20Security\x20Training...','Who\x20is\x20present?','child_process','val','targetId','Fokus\x20auf\x20Komfort.','Anomaly\x20Score','\x0aSTB:\x20','filter','close','Trend','useCalendar','briefingJob','analysis.analysisHistory','analysis.lastResult','exitGraceTimer','info','indicator','date','change_percent','stdin','2037950wbIVcx','tÃ¼r','getForeignStateAsync','analysis.alertReason','analysis.training.triggerTopology','some','HEALTH_RESULT','.\x20SYSTEM_MODE:\x20','system.config','occupancy','ANOMALY','.forecast.current.state','channel','text','autoApply','targetValue','alertReason','LTM.driftAnalysis.baselineDrift','switch','Missing\x20data','lampe','getOverviewData','exitTimer','toFixed','payload','analysis.automation.targetId','Regel\x20erkannt:\x20','Â°C,\x20','analysis.training','unshift','112pybhrP','enum.rooms.*','analysis.triggerBriefing','text.alarm','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','replace','getStateAsync','pythonProcess','licht','state','analysis.security.currentThreshold','analysis.automation.description','splice',')\x20-\x20SAFE\x20BOOT','Unknown','description','analysis.automation.detectedPatterns','Adapter','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','schalter','system.presenceWho','events.history','Last\x20Check','analysis.automation.triggerAction','.\x20KONTEXT:\x20','ANALYZE_GAIT','rawEventLog','location','triggerDailyDigest','BUTLER\x20Execution\x20Error:\x20','KI-Modell\x20nicht\x20initialisiert','events.history_debug_00','trim','Pattern\x20Detected','analysis.training.status','Analysiere\x20ausgewogen.','unknown','insulation','daswetter','testApiKey','Gait\x20Speed\x20Trend','setupModeResetScheduler','toLowerCase','substring','analysis.health.isAnomaly','eventHistory','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','setObjectNotExistsAsync','setHours','\x20=\x20','rule','telegram'];a0_0x3315=function(){return _0x426fb9;};return a0_0x3315();}async function getOutsideTemperatureNumeric(_0x18d34c){const _0x56d83e=a0_0x45ca63;if(_0x18d34c[_0x56d83e(0x277)][_0x56d83e(0x31f)])try{const _0x24efde=await _0x18d34c['getForeignStateAsync'](_0x18d34c['config'][_0x56d83e(0x31f)]);if(_0x24efde&&_0x24efde[_0x56d83e(0x345)]!==undefined&&_0x24efde[_0x56d83e(0x345)]!==null)return parseFloat(_0x24efde['val']);}catch(_0x58feb5){}const _0x481f9c=_0x18d34c[_0x56d83e(0x277)][_0x56d83e(0x2f3)];if(!_0x18d34c['config']['useWeather']||!_0x481f9c)return null;try{let _0x17c39a='';if(_0x481f9c['includes'](_0x56d83e(0x275)))_0x17c39a=_0x481f9c+'.Current.Temperature';else{if(_0x481f9c[_0x56d83e(0x20e)](_0x56d83e(0x1f5)))_0x17c39a=_0x481f9c+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x481f9c[_0x56d83e(0x20e)](_0x56d83e(0x207)))_0x17c39a=_0x481f9c+_0x56d83e(0x204);else{if(_0x481f9c[_0x56d83e(0x20e)]('weatherunderground'))_0x17c39a=_0x481f9c+_0x56d83e(0x2d3);}}}if(_0x17c39a){const _0x311f47=await _0x18d34c[_0x56d83e(0x359)](_0x17c39a);if(_0x311f47&&_0x311f47[_0x56d83e(0x345)]!==undefined&&_0x311f47[_0x56d83e(0x345)]!==null)return parseFloat(_0x311f47['val']);}}catch(_0x1f7d7c){}return null;}async function recordSequence(_0xf63ade,_0x1b53e9){const _0x2a1c25=a0_0x45ca63,_0x8c160=(_0x1b53e9[_0x2a1c25(0x20c)]||'')[_0x2a1c25(0x1f9)](),_0x1fa88c=['motion',_0x2a1c25(0x2ff),_0x2a1c25(0x2cd),_0x2a1c25(0x2cf),_0x2a1c25(0x360),_0x2a1c25(0x287),_0x2a1c25(0x358),_0x2a1c25(0x2b1),_0x2a1c25(0x295),_0x2a1c25(0x310),_0x2a1c25(0x218),_0x2a1c25(0x298),_0x2a1c25(0x1d7),_0x2a1c25(0x369),_0x2a1c25(0x1e2),'dimmer',_0x2a1c25(0x1c5)];if(!_0x1fa88c[_0x2a1c25(0x35c)](_0x1e49a3=>_0x8c160['includes'](_0x1e49a3)))return;if(!_0x1b53e9['value'])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence['push']({'loc':_0x1b53e9[_0x2a1c25(0x1ea)]||_0x2a1c25(0x1dd),'id':_0x1b53e9['id'],'ts':Date[_0x2a1c25(0x290)]()}),sequenceTimer=setTimeout(async()=>{const _0x19e642=_0x2a1c25;if(activeSequence[_0x19e642(0x323)]>0x1)await saveCompletedSequence(_0xf63ade);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x31686b){const _0x1478d5=a0_0x45ca63;try{const _0x2a9109=await _0x31686b[_0x1478d5(0x1d5)]('LTM.trainingData.sequences');let _0x47a00d=[];if(_0x2a9109&&_0x2a9109[_0x1478d5(0x345)])try{_0x47a00d=JSON[_0x1478d5(0x249)](_0x2a9109[_0x1478d5(0x345)]);}catch(_0xe2c3e6){}const _0x47c5fb=activeSequence[0x0]['ts'],_0x5b66e8=activeSequence['map'](_0x5e707d=>({'loc':_0x5e707d['loc'],'t_delta':Math[_0x1478d5(0x329)]((_0x5e707d['ts']-_0x47c5fb)/0x3e8)})),_0x405fde={'timestamp':new Date(_0x47c5fb)[_0x1478d5(0x32c)](),'steps':_0x5b66e8,'duration':Math[_0x1478d5(0x329)]((activeSequence[activeSequence[_0x1478d5(0x323)]-0x1]['ts']-_0x47c5fb)/0x3e8),'daytime':new Date(_0x47c5fb)[_0x1478d5(0x23c)]()};_0x47a00d[_0x1478d5(0x319)](_0x405fde);if(_0x47a00d[_0x1478d5(0x323)]>MAX_TRAINING_SET_SIZE)_0x47a00d[_0x1478d5(0x265)]();await _0x31686b[_0x1478d5(0x213)]('LTM.trainingData.sequences',{'val':JSON['stringify'](_0x47a00d),'ack':!![]}),runSecurityCheck(_0x31686b,_0x405fde);}catch(_0x354840){_0x31686b[_0x1478d5(0x20a)][_0x1478d5(0x2e4)]('[RECORDER]\x20Error:\x20'+_0x354840[_0x1478d5(0x33c)]);}}function runSecurityCheck(_0x261633,_0x4da4a7){const _0x28cc7b=a0_0x45ca63;if(!_0x261633['isProVersion'])return;sendToPython(_0x261633,_0x28cc7b(0x2bb),{'sequence':_0x4da4a7});}async function createDailyDigest(_0x25668a){const _0x57e598=a0_0x45ca63;if(!_0x25668a[_0x57e598(0x340)])return;await _0x25668a[_0x57e598(0x213)](LTM_DP_STATUS,{'val':_0x57e598(0x24b),'ack':!![]});if(!_0x25668a[_0x57e598(0x2a1)]||_0x25668a[_0x57e598(0x1e9)][_0x57e598(0x323)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x25668a['setStateAsync'](LTM_DP_STATUS,{'val':_0x57e598(0x2b9),'ack':!![]});return;}const _0x1e726d=JSON[_0x57e598(0x249)](JSON[_0x57e598(0x315)](_0x25668a[_0x57e598(0x1e9)])),_0x36049a=_0x1e726d[_0x57e598(0x323)],_0x4c634b=_0x57e598(0x300)+JSON[_0x57e598(0x315)](_0x1e726d);try{const _0x333dc6=await _0x25668a['geminiModel'][_0x57e598(0x28a)](_0x4c634b),_0xc7073d=JSON[_0x57e598(0x249)](_0x333dc6['response'][_0x57e598(0x364)]()[_0x57e598(0x1d4)](/```json|```/g,'')[_0x57e598(0x1ef)]()),_0x3c3d62={'timestamp':new Date()[_0x57e598(0x32c)](),'eventCount':_0x36049a,'summary':_0xc7073d['summary']||_0x57e598(0x27f),'activityLevel':_0xc7073d[_0x57e598(0x2a2)]||_0x57e598(0x2c1),'systemMode':_0x25668a[_0x57e598(0x2df)]};_0x25668a[_0x57e598(0x21a)][_0x57e598(0x319)](_0x3c3d62),await saveDailyDigests(_0x25668a),_0x25668a[_0x57e598(0x1e9)]=[],await saveRawEventLog(_0x25668a),await _0x25668a['setStateAsync'](LTM_DP_STATUS,{'val':_0x57e598(0x27a),'ack':!![]});if(_0x25668a[_0x57e598(0x340)])sendToPython(_0x25668a,_0x57e598(0x2eb),{'digest':_0x3c3d62});}catch(_0x42778c){_0x25668a[_0x57e598(0x20a)]['error'](_0x42778c[_0x57e598(0x33c)]);}}async function runBaselineDriftAnalysis(_0x238483){const _0x5b9393=a0_0x45ca63;if(!_0x238483[_0x5b9393(0x340)]||!_0x238483[_0x5b9393(0x2a1)])return;const _0x4aa63b=_0x238483[_0x5b9393(0x277)][_0x5b9393(0x258)]||0xe;if(_0x238483[_0x5b9393(0x21a)][_0x5b9393(0x323)]<_0x4aa63b+0x7){await _0x238483['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x5b9393(0x2b7),'ack':!![]});return;}const _0x27a22e=_0x238483[_0x5b9393(0x21a)][_0x5b9393(0x29e)](-_0x4aa63b),_0x410e54=_0x238483[_0x5b9393(0x21a)][_0x5b9393(0x29e)](0x0,_0x238483[_0x5b9393(0x21a)][_0x5b9393(0x323)]-_0x4aa63b),_0x572cce='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x5b9393(0x315)](_0x410e54)+_0x5b9393(0x349)+JSON[_0x5b9393(0x315)](_0x27a22e);try{const _0x3b0186=await _0x238483[_0x5b9393(0x2a1)][_0x5b9393(0x28a)](_0x572cce),_0xceddf=JSON[_0x5b9393(0x249)](_0x3b0186['response']['text']()['replace'](/```json|```/g,'')[_0x5b9393(0x1ef)]());_0xceddf['baselineDrift']&&(await _0x238483[_0x5b9393(0x213)](LTM_DP_DRIFT_STATUS,{'val':_0xceddf[_0x5b9393(0x2c8)],'ack':!![]}),await _0x238483[_0x5b9393(0x213)](LTM_DP_DRIFT_DETAILS,{'val':_0xceddf[_0x5b9393(0x257)],'ack':!![]}),await _0x238483[_0x5b9393(0x213)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x5b9393(0x290)](),'ack':!![]}));}catch(_0x27f291){}}async function sendMorningBriefing(_0xd7e38b){const _0x53deef=a0_0x45ca63;if(!_0xd7e38b[_0x53deef(0x2a1)])return;try{const _0x4088a9='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x1f94c9=await _0xd7e38b[_0x53deef(0x2a1)][_0x53deef(0x28a)](_0x4088a9),_0x687b65=_0x1f94c9['response'][_0x53deef(0x364)]();sendNotification(_0xd7e38b,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x687b65);}catch(_0x53c31c){_0xd7e38b[_0x53deef(0x20a)][_0x53deef(0x2e4)](_0x53deef(0x21f)+_0x53c31c[_0x53deef(0x33c)]);}}function stopPythonService(_0x472842){const _0x4243fc=a0_0x45ca63;if(_0x472842[_0x4243fc(0x1d6)]){try{_0x472842[_0x4243fc(0x1d6)]['kill']();}catch(_0x39c7ea){}_0x472842['pythonProcess']=null;}}function sendToPython(_0x1cf9f7,_0x30f382,_0x4c3a0e={}){const _0x29f771=a0_0x45ca63;if(!_0x1cf9f7[_0x29f771(0x1d6)]||!_0x1cf9f7[_0x29f771(0x1d6)][_0x29f771(0x356)]['writable'])return;const _0x3d8399=JSON[_0x29f771(0x315)]({'command':_0x30f382,..._0x4c3a0e});try{_0x1cf9f7[_0x29f771(0x1d6)][_0x29f771(0x356)][_0x29f771(0x252)](_0x3d8399+'\x0a');}catch(_0x366edb){}}function runPythonHealthCheck(_0x1fb335){const _0x1c2d87=a0_0x45ca63;if(!_0x1fb335[_0x1c2d87(0x21a)]||_0x1fb335[_0x1c2d87(0x21a)][_0x1c2d87(0x323)]<0x2)return;const _0xa81c5=_0x1fb335['dailyDigests']['map'](_0x21a219=>{const _0x165d56=_0x1c2d87,_0x6087b1=(_0x21a219[_0x165d56(0x2a2)]||'')[_0x165d56(0x1f9)]();return ACTIVITY_LEVEL_MAP[_0x6087b1]||0x32;});sendToPython(_0x1fb335,'ANALYZE_TREND',{'values':_0xa81c5,'tag':'Activity-Level'});}function handlePythonResult(_0x38785a,_0x22fcb7){const _0x1a33f9=a0_0x45ca63;if(_0x22fcb7[_0x1a33f9(0x20c)]===_0x1a33f9(0x25f))_0x38785a[_0x1a33f9(0x20a)]['debug'](_0x1a33f9(0x24e));else{if(_0x22fcb7['type']===_0x1a33f9(0x2a3)){const {anomaly_score:_0xea8def,is_anomaly:_0x2a4bc6,threshold:_0x424aa7,explanation:_0x1b642e}=_0x22fcb7['payload'];_0x38785a[_0x1a33f9(0x20a)][_0x1a33f9(0x352)](_0x1a33f9(0x2ef)+_0xea8def['toFixed'](0x5)+_0x1a33f9(0x2e6)+(_0x2a4bc6?_0x1a33f9(0x361):'OK')),_0x38785a['setStateAsync'](_0x1a33f9(0x2cb),{'val':_0xea8def,'ack':!![]}),_0x38785a['setStateAsync']('analysis.security.lastCheck',{'val':new Date()['toISOString'](),'ack':!![]});if(_0x424aa7)_0x38785a[_0x1a33f9(0x213)](_0x1a33f9(0x1d9),{'val':_0x424aa7,'ack':!![]});if(_0x2a4bc6){let _0x5419d2=_0x1a33f9(0x214)+_0xea8def['toFixed'](0x4)+')';if(_0x1b642e&&_0x1b642e!==_0x1a33f9(0x1dd))_0x5419d2+='\x0aGrund:\x20'+_0x1b642e;_0x38785a['setStateAsync'](_0x1a33f9(0x327),{'val':!![],'ack':!![]}),_0x38785a['setStateAsync'](_0x1a33f9(0x35a),{'val':_0x5419d2,'ack':!![]}),sendNotification(_0x38785a,_0x1a33f9(0x335)+_0x5419d2,![],!![]);}}else{if(_0x22fcb7[_0x1a33f9(0x20c)]===_0x1a33f9(0x320)){const _0x47620d=_0x22fcb7['payload']['details']||'',_0x2e4688=_0x22fcb7[_0x1a33f9(0x1c9)][_0x1a33f9(0x307)],_0x1c183a=_0x22fcb7[_0x1a33f9(0x1c9)][_0x1a33f9(0x336)]?'Success:\x20'+new Date()['toLocaleTimeString']()+'\x20('+_0x47620d+')':_0x1a33f9(0x322)+_0x22fcb7[_0x1a33f9(0x1c9)][_0x1a33f9(0x25a)];_0x38785a[_0x1a33f9(0x213)]('analysis.training.status',{'val':_0x1c183a,'ack':!![]});if(_0x22fcb7[_0x1a33f9(0x1c9)][_0x1a33f9(0x336)]&&_0x2e4688)_0x38785a[_0x1a33f9(0x213)](_0x1a33f9(0x1d9),{'val':_0x2e4688,'ack':!![]});}else{if(_0x22fcb7[_0x1a33f9(0x20c)]==='COMFORT_RESULT'){const {patterns:_0x49f86d}=_0x22fcb7[_0x1a33f9(0x1c9)];if(_0x49f86d&&_0x49f86d[_0x1a33f9(0x323)]>0x0){_0x38785a[_0x1a33f9(0x20a)][_0x1a33f9(0x352)](_0x1a33f9(0x284)+_0x49f86d[_0x1a33f9(0x323)]+_0x1a33f9(0x2e1)),_0x38785a[_0x1a33f9(0x213)]('analysis.automation.detectedPatterns',{'val':JSON[_0x1a33f9(0x315)](_0x49f86d),'ack':!![]});const _0x52a1ad=_0x49f86d[0x0],_0x2e7bba=_0x1a33f9(0x1cb)+_0x52a1ad[_0x1a33f9(0x201)]+'\x20('+(_0x52a1ad[_0x1a33f9(0x2a0)]*0x64)[_0x1a33f9(0x1c8)](0x0)+'%)';_0x38785a['setStateAsync'](_0x1a33f9(0x302),{'val':!![],'ack':!![]}),_0x38785a[_0x1a33f9(0x213)](_0x1a33f9(0x1da),{'val':_0x2e7bba,'ack':!![]});}else _0x38785a['log'][_0x1a33f9(0x352)](_0x1a33f9(0x1d3)),_0x38785a[_0x1a33f9(0x213)](_0x1a33f9(0x302),{'val':![],'ack':!![]}),_0x38785a[_0x1a33f9(0x213)](_0x1a33f9(0x1df),{'val':'[]','ack':!![]});}else{if(_0x22fcb7['type']===_0x1a33f9(0x289)){if(_0x22fcb7['payload'][_0x1a33f9(0x336)])try{const _0x19a59b=JSON['parse'](_0x22fcb7[_0x1a33f9(0x1c9)]['details']);if(_0x19a59b['insulation'])_0x38785a[_0x1a33f9(0x213)](_0x1a33f9(0x232),{'val':JSON[_0x1a33f9(0x315)](_0x19a59b[_0x1a33f9(0x1f4)]),'ack':!![]});if(_0x19a59b[_0x1a33f9(0x240)])_0x38785a['setStateAsync'](_0x1a33f9(0x341),{'val':JSON[_0x1a33f9(0x315)](_0x19a59b[_0x1a33f9(0x240)]),'ack':!![]});}catch(_0x5ded37){}}else{if(_0x22fcb7['type']===_0x1a33f9(0x263)){if(_0x22fcb7[_0x1a33f9(0x1c9)][_0x1a33f9(0x336)])_0x38785a[_0x1a33f9(0x20a)][_0x1a33f9(0x352)](_0x1a33f9(0x294));}else{if(_0x22fcb7[_0x1a33f9(0x20c)]===_0x1a33f9(0x35d))_0x38785a['setStateAsync'](_0x1a33f9(0x253),{'val':new Date()[_0x1a33f9(0x32c)](),'ack':!![]}),_0x38785a[_0x1a33f9(0x213)](_0x1a33f9(0x1fb),{'val':_0x22fcb7[_0x1a33f9(0x1c9)][_0x1a33f9(0x262)],'ack':!![]});else{if(_0x22fcb7[_0x1a33f9(0x20c)]==='TREND_RESULT')_0x38785a['setStateAsync'](_0x1a33f9(0x2be),{'val':_0x22fcb7[_0x1a33f9(0x1c9)][_0x1a33f9(0x208)],'ack':!![]}),_0x38785a[_0x1a33f9(0x213)](_0x1a33f9(0x233),{'val':_0x22fcb7[_0x1a33f9(0x1c9)][_0x1a33f9(0x355)],'ack':!![]});else{if(_0x22fcb7[_0x1a33f9(0x20c)]===_0x1a33f9(0x2a4)){const {speed_trend:_0x573c78}=_0x22fcb7[_0x1a33f9(0x1c9)];if(_0x573c78!==undefined)_0x38785a[_0x1a33f9(0x213)](_0x1a33f9(0x2d1),{'val':_0x573c78,'ack':!![]});}else{if(_0x22fcb7[_0x1a33f9(0x20c)]===_0x1a33f9(0x338)){const {forecast:_0x220b6a}=_0x22fcb7[_0x1a33f9(0x1c9)];if(_0x220b6a)_0x38785a['setStateAsync']('analysis.energy.forecast',{'val':JSON[_0x1a33f9(0x315)](_0x220b6a),'ack':!![]});}else{if(_0x22fcb7[_0x1a33f9(0x20c)]==='TOPOLOGY_RESULT'){const {data:_0xa04175}=_0x22fcb7[_0x1a33f9(0x1c9)];_0xa04175&&(_0x38785a[_0x1a33f9(0x20a)][_0x1a33f9(0x352)](_0x1a33f9(0x212)),_0x38785a[_0x1a33f9(0x213)](_0x1a33f9(0x2a6),{'val':JSON[_0x1a33f9(0x315)](_0xa04175),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x4be540){const _0x582985=a0_0x45ca63;let _0x49ea2c=_0x582985(0x2ea);if(fs['existsSync'](installer[_0x582985(0x246)]))_0x49ea2c=installer[_0x582985(0x246)];try{const _0x4ac88e=path[_0x582985(0x2ee)](__dirname,_0x582985(0x237),_0x582985(0x245));_0x4be540[_0x582985(0x1d6)]=spawn(_0x49ea2c,[_0x4ac88e]),_0x4be540[_0x582985(0x1d6)]['stdout']['on']('data',_0x5caf83=>{const _0x2c27f9=_0x582985,_0x3642dc=_0x5caf83[_0x2c27f9(0x2ce)]()['split']('\x0a');_0x3642dc[_0x2c27f9(0x30d)](_0x1f48cd=>{const _0x341282=_0x2c27f9,_0x389926=_0x1f48cd['trim']();if(!_0x389926)return;if(_0x389926[_0x341282(0x2b0)](_0x341282(0x2fc)))_0x4be540[_0x341282(0x20a)][_0x341282(0x2e9)](_0x341282(0x2e0)+_0x389926[_0x341282(0x1fa)](0x5)[_0x341282(0x1ef)]());else{if(_0x389926[_0x341282(0x2b0)](_0x341282(0x26f)))try{const _0x567fed=JSON[_0x341282(0x249)](_0x389926[_0x341282(0x1fa)](0x8)[_0x341282(0x1ef)]());handlePythonResult(_0x4be540,_0x567fed);}catch(_0x3d43cb){}}});}),_0x4be540['pythonProcess']['on'](_0x582985(0x34b),_0x3e4ce1=>{const _0x2a5522=_0x582985;_0x4be540[_0x2a5522(0x1d6)]=null;});}catch(_0x712e5e){_0x4be540[_0x582985(0x20a)][_0x582985(0x2e4)](_0x582985(0x268)+_0x712e5e['message']);}}async function runAutopilot(_0x52754b){const _0x582f4e=a0_0x45ca63;_0x52754b[_0x582f4e(0x20a)][_0x582f4e(0x2e9)](_0x582f4e(0x1fd)),await runGeminiAnalysis(_0x52754b),updateHealthVector(_0x52754b),triggerGaitAnalysis(_0x52754b),triggerEnergyPrediction(_0x52754b);}function a0_0x1ff8(_0x5968fd,_0x5b1fc8){const _0x456814=a0_0x3315();return a0_0x1ff8=function(_0xa978df,_0x63df29){_0xa978df=_0xa978df-0x1c4;let _0x3315e4=_0x456814[_0xa978df];return _0x3315e4;},a0_0x1ff8(_0x5968fd,_0x5b1fc8);}async function triggerGaitAnalysis(_0x2295a4){const _0x4627d3=a0_0x45ca63;if(!_0x2295a4[_0x4627d3(0x340)])return;try{const _0x19ccc5=await _0x2295a4[_0x4627d3(0x1d5)](_0x4627d3(0x325));_0x19ccc5&&_0x19ccc5[_0x4627d3(0x345)]&&sendToPython(_0x2295a4,_0x4627d3(0x1e8),{'sequences':JSON[_0x4627d3(0x249)](_0x19ccc5[_0x4627d3(0x345)])});}catch(_0x119806){}}async function triggerEnergyPrediction(_0xabaa3d){const _0x12f57f=a0_0x45ca63;if(!_0xabaa3d[_0x12f57f(0x340)])return;try{const _0x1e193e=await getOutsideTemperatureNumeric(_0xabaa3d);if(_0x1e193e===null)return;const _0x98fb0c={},_0x3bf834=_0xabaa3d['config'][_0x12f57f(0x301)]||[];for(const _0x4bc7eb of _0x3bf834){if(_0x4bc7eb[_0x12f57f(0x20c)]===_0x12f57f(0x2c0)&&_0x4bc7eb[_0x12f57f(0x1ea)]){const _0x1d0b02=_0xabaa3d['sensorLastValues'][_0x4bc7eb['id']];if(_0x1d0b02!==undefined)_0x98fb0c[_0x4bc7eb[_0x12f57f(0x1ea)]]=_0x1d0b02;}}Object[_0x12f57f(0x2c9)](_0x98fb0c)[_0x12f57f(0x323)]>0x0&&sendToPython(_0xabaa3d,_0x12f57f(0x2c5),{'current_temps':_0x98fb0c,'t_out':_0x1e193e});}catch(_0x340ba5){}}function updateHealthVector(_0x311331){const _0x2cad72=a0_0x45ca63;if(!_0x311331[_0x2cad72(0x1e9)]||_0x311331['rawEventLog'][_0x2cad72(0x323)]===0x0)return;const _0xdae4d7=new Array(0x60)['fill'](0x0),_0x42b5cd=new Date()[_0x2cad72(0x1ff)](0x0,0x0,0x0,0x0);_0x311331['rawEventLog'][_0x2cad72(0x30d)](_0x49b50c=>{const _0x13f2d3=_0x2cad72,_0x5219bf=new Date(_0x49b50c[_0x13f2d3(0x28f)]);if(_0x5219bf[_0x13f2d3(0x26d)]()>=_0x42b5cd){const _0x50fd73=_0x5219bf['getHours'](),_0x232a6f=_0x5219bf[_0x13f2d3(0x32e)](),_0x127309=_0x50fd73*0x4+Math['floor'](_0x232a6f/0xf);if(_0x127309>=0x0&&_0x127309<0x60)_0xdae4d7[_0x127309]++;}}),_0x311331[_0x2cad72(0x213)](_0x2cad72(0x27b),{'val':JSON[_0x2cad72(0x315)](_0xdae4d7),'ack':!![]});}async function getWeatherContext(_0x53d75e){const _0x5562b5=a0_0x45ca63;if(!_0x53d75e[_0x5562b5(0x277)][_0x5562b5(0x247)]||!_0x53d75e[_0x5562b5(0x277)][_0x5562b5(0x2f3)])return _0x5562b5(0x2f8);try{const _0x106e96=_0x53d75e[_0x5562b5(0x277)][_0x5562b5(0x2f3)];let _0x81b47b=await _0x53d75e[_0x5562b5(0x359)](_0x106e96+_0x5562b5(0x225));if(!_0x81b47b)_0x81b47b=await _0x53d75e[_0x5562b5(0x359)](_0x106e96+_0x5562b5(0x204));let _0x123606=await _0x53d75e['getForeignStateAsync'](_0x106e96+_0x5562b5(0x27e));if(!_0x123606)_0x123606=await _0x53d75e[_0x5562b5(0x359)](_0x106e96+_0x5562b5(0x362));if(_0x81b47b&&_0x123606)return _0x81b47b[_0x5562b5(0x345)]+_0x5562b5(0x1cc)+_0x123606[_0x5562b5(0x345)];}catch(_0x4f9590){}return _0x5562b5(0x24c);}async function getCalendarContext(_0x39d5db){const _0x1774d3=a0_0x45ca63;if(!_0x39d5db[_0x1774d3(0x277)][_0x1774d3(0x34d)]||!_0x39d5db[_0x1774d3(0x277)]['calendarInstance'])return _0x1774d3(0x306);return _0x1774d3(0x304);}async function getCalendarNames(_0x3cc8f9,_0x157a15){return[];}async function saveFeedback(_0x4b4c0a,_0x46f5be){const _0x42d1c0=a0_0x45ca63;_0x4b4c0a[_0x42d1c0(0x20a)][_0x42d1c0(0x352)](_0x42d1c0(0x2c6)+_0x46f5be['rating']);}async function runGeminiAnalysis(_0x2d6c3f,_0x7a0f1f=''){const _0x18681f=a0_0x45ca63;if(!_0x2d6c3f[_0x18681f(0x2a1)])return;if(_0x2d6c3f[_0x18681f(0x1fc)][_0x18681f(0x323)]===0x0)return;const _0x1243c7=_0x2d6c3f[_0x18681f(0x1fc)][_0x18681f(0x29e)](0x0,0xf),_0x421328=await getWeatherContext(_0x2d6c3f),_0x38fc0b=_0x2d6c3f[_0x18681f(0x2df)],_0x32a052=PERSONA_MAPPING[_0x2d6c3f[_0x18681f(0x277)]['aiPersona']||_0x18681f(0x303)],_0x2154bb=_0x2d6c3f['config'][_0x18681f(0x27d)]||_0x18681f(0x267);let _0x1bf66a=_0x18681f(0x20f);try{const _0x2a4f3d=await _0x2d6c3f['getStateAsync'](_0x18681f(0x1e3));if(_0x2a4f3d&&_0x2a4f3d[_0x18681f(0x345)])_0x1bf66a=_0x2a4f3d[_0x18681f(0x345)];}catch(_0x52ab28){}let _0x4ed730=![];try{const _0x266e43=await _0x2d6c3f['getStateAsync'](_0x18681f(0x2d6));if(_0x266e43&&_0x266e43[_0x18681f(0x345)])_0x4ed730=!![];}catch(_0xea8ab0){}const _0x3faee1=_0x18681f(0x2b3)+_0x32a052+_0x18681f(0x1e7)+_0x2154bb+_0x18681f(0x35e)+_0x38fc0b+'.\x20WETTER:\x20'+_0x421328+'.\x20ANWESEND:\x20'+_0x1bf66a+_0x18681f(0x297)+JSON['stringify'](_0x1243c7)+_0x18681f(0x339)+_0x7a0f1f+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0x53b4a1=await _0x2d6c3f[_0x18681f(0x2a1)][_0x18681f(0x28a)](_0x3faee1),_0x35d66e=JSON[_0x18681f(0x249)](_0x53b4a1['response'][_0x18681f(0x364)]()[_0x18681f(0x1d4)](/```json|```/g,'')[_0x18681f(0x1ef)]());await _0x2d6c3f[_0x18681f(0x213)](_0x18681f(0x350),{'val':JSON['stringify'](_0x35d66e),'ack':!![]});if(_0x35d66e[_0x18681f(0x2f2)])await _0x2d6c3f[_0x18681f(0x213)](_0x18681f(0x22c),{'val':_0x35d66e[_0x18681f(0x2f2)],'ack':!![]});const _0x559be4={'timestamp':Date[_0x18681f(0x290)](),'id':Date[_0x18681f(0x290)]()['toString'](),'analysis':{'activity':{'summary':_0x35d66e[_0x18681f(0x2f2)],'isAlert':_0x35d66e[_0x18681f(0x316)],'alertReason':_0x35d66e['alertReason']},'comfort':{'automationProposal':_0x35d66e[_0x18681f(0x305)]}}};await updateAnalysisHistory(_0x2d6c3f,_0x559be4);const _0x78f80=_0x35d66e[_0x18681f(0x316)]||![];_0x78f80!==_0x2d6c3f[_0x18681f(0x23e)]&&(await _0x2d6c3f[_0x18681f(0x213)](_0x18681f(0x327),{'val':_0x78f80,'ack':!![]}),_0x2d6c3f['lastAlertState']=_0x78f80,_0x78f80&&(await _0x2d6c3f[_0x18681f(0x213)](_0x18681f(0x35a),{'val':_0x35d66e['alertReason'],'ack':!![]}),sendNotification(_0x2d6c3f,'âš ï¸\x20ALARM:\x20'+_0x35d66e[_0x18681f(0x367)],![],_0x35d66e[_0x18681f(0x266)])));if(_0x35d66e['automationProposal']&&_0x35d66e[_0x18681f(0x305)][_0x18681f(0x25d)]){await _0x2d6c3f['setStateAsync'](_0x18681f(0x302),{'val':!![],'ack':!![]}),await _0x2d6c3f['setStateAsync'](_0x18681f(0x1da),{'val':_0x35d66e['automationProposal']['description'],'ack':!![]}),await _0x2d6c3f[_0x18681f(0x213)](_0x18681f(0x1ca),{'val':_0x35d66e[_0x18681f(0x305)][_0x18681f(0x346)],'ack':!![]}),await _0x2d6c3f[_0x18681f(0x213)](_0x18681f(0x2b4),{'val':JSON[_0x18681f(0x315)](_0x35d66e['automationProposal']['targetValue']),'ack':!![]});if(_0x4ed730)executeAutomationAction(_0x2d6c3f);}}catch(_0x5eaf2a){_0x2d6c3f['log'][_0x18681f(0x2e4)](_0x18681f(0x22f)+_0x5eaf2a[_0x18681f(0x33c)]);}}async function startSystem(_0x34b3c2){const _0x1affcf=a0_0x45ca63;_0x34b3c2[_0x1affcf(0x20a)][_0x1affcf(0x352)]('ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...'),await initZombies(_0x34b3c2);try{_0x34b3c2[_0x1affcf(0x340)]=await checkLicense(_0x34b3c2['config'][_0x1affcf(0x2db)]);}catch(_0x4581b5){}if(!_0x34b3c2[_0x1affcf(0x277)][_0x1affcf(0x281)]||_0x34b3c2[_0x1affcf(0x277)][_0x1affcf(0x281)]<0.1)_0x34b3c2[_0x1affcf(0x277)][_0x1affcf(0x281)]=0xc;await initHistory(_0x34b3c2),await initSystemConfig(_0x34b3c2);if(_0x34b3c2[_0x1affcf(0x277)][_0x1affcf(0x264)])try{_0x34b3c2[_0x1affcf(0x2b5)]=new GoogleGenerativeAI(_0x34b3c2['config'][_0x1affcf(0x264)]),_0x34b3c2[_0x1affcf(0x2a1)]=_0x34b3c2['genAI'][_0x1affcf(0x2f7)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x1affcf(0x2bf)}}),_0x34b3c2[_0x1affcf(0x20a)][_0x1affcf(0x352)]('Gemini\x20AI\x20initialized.');}catch(_0x2cef1b){_0x34b3c2[_0x1affcf(0x20a)]['error'](_0x1affcf(0x2f1)+_0x2cef1b[_0x1affcf(0x33c)]);}await createAllObjects(_0x34b3c2),await loadSystemMode(_0x34b3c2),await loadRawEventLog(_0x34b3c2),await loadDailyDigests(_0x34b3c2),_0x34b3c2[_0x1affcf(0x326)](_0x1affcf(0x234)),_0x34b3c2[_0x1affcf(0x326)](LTM_DP_TRIGGER_DIGEST),_0x34b3c2[_0x1affcf(0x326)]('system.mode'),_0x34b3c2['subscribeStates'](_0x1affcf(0x1d1)),_0x34b3c2['subscribeStates']('analysis.automation.triggerAction'),_0x34b3c2[_0x1affcf(0x326)](_0x1affcf(0x2d6)),_0x34b3c2[_0x1affcf(0x326)](_0x1affcf(0x282)),_0x34b3c2['subscribeStates'](_0x1affcf(0x231)),_0x34b3c2[_0x1affcf(0x326)](_0x1affcf(0x29b)),_0x34b3c2[_0x1affcf(0x326)](_0x1affcf(0x2fa)),_0x34b3c2[_0x1affcf(0x326)](_0x1affcf(0x35b)),await initSensorSubscriptions(_0x34b3c2),await initPresenceSubscriptions(_0x34b3c2),await setupTelegramListener(_0x34b3c2),setTimeout(()=>checkWifiPresence(_0x34b3c2),0x1388);if(_0x34b3c2['analysisTimer'])clearInterval(_0x34b3c2[_0x1affcf(0x332)]);const _0x50b8fd=_0x34b3c2[_0x1affcf(0x277)]['analysisInterval']||0xf;_0x50b8fd>0x0&&(_0x34b3c2[_0x1affcf(0x332)]=setInterval(()=>{runAutopilot(_0x34b3c2);},_0x50b8fd*0x3c*0x3e8)),schedulers[_0x1affcf(0x215)](_0x34b3c2,()=>createDailyDigest(_0x34b3c2)),schedulers[_0x1affcf(0x1f8)](_0x34b3c2),schedulers[_0x1affcf(0x26b)](_0x34b3c2,()=>runBaselineDriftAnalysis(_0x34b3c2)),schedulers[_0x1affcf(0x20b)](_0x34b3c2,()=>sendMorningBriefing(_0x34b3c2)),startPythonService(_0x34b3c2),setTimeout(()=>{const _0x17eadc=_0x1affcf;_0x34b3c2[_0x17eadc(0x1d6)]&&(runPythonHealthCheck(_0x34b3c2),triggerGaitAnalysis(_0x34b3c2),triggerEnergyPrediction(_0x34b3c2)),updateHealthVector(_0x34b3c2);},0x1388);}class CogniLiving extends utils[a0_0x45ca63(0x1e0)]{constructor(_0x116cfb){const _0x43a0a5=a0_0x45ca63;super({..._0x116cfb,'name':_0x43a0a5(0x2ab)}),this['eventHistory']=[],this[_0x43a0a5(0x203)]=[],this['rawEventLog']=[],this[_0x43a0a5(0x21a)]=[],this[_0x43a0a5(0x274)]={},this[_0x43a0a5(0x21b)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x43a0a5(0x248)]=!![],this[_0x43a0a5(0x1c7)]=null,this['exitGraceTimer']=null,this['isGracePeriodActive']=![],this[_0x43a0a5(0x2b5)]=null,this[_0x43a0a5(0x2a1)]=null,this[_0x43a0a5(0x2df)]=SYSTEM_MODES[_0x43a0a5(0x2c3)],this['isProVersion']=![],this[_0x43a0a5(0x23e)]=![],this['systemUUID']=_0x43a0a5(0x1f3),this[_0x43a0a5(0x332)]=null,this[_0x43a0a5(0x211)]=null,this[_0x43a0a5(0x21d)]=null,this[_0x43a0a5(0x2d8)]=null,this['briefingJob']=null,this[_0x43a0a5(0x1d6)]=null,this[_0x43a0a5(0x285)]=![],this['on']('ready',this[_0x43a0a5(0x239)][_0x43a0a5(0x30c)](this)),this['on'](_0x43a0a5(0x256),this[_0x43a0a5(0x2fd)][_0x43a0a5(0x30c)](this)),this['on'](_0x43a0a5(0x20d),this[_0x43a0a5(0x311)][_0x43a0a5(0x30c)](this)),this['on'](_0x43a0a5(0x33c),this[_0x43a0a5(0x24a)][_0x43a0a5(0x30c)](this));}async[a0_0x45ca63(0x239)](){const _0x46aec5=a0_0x45ca63;this[_0x46aec5(0x20a)]['info'](_0x46aec5(0x224)+this[_0x46aec5(0x238)]+_0x46aec5(0x1dc));if(!installer[_0x46aec5(0x2d4)](this,()=>startSystem(this)))return;}['onUnload'](_0x53a7ba){const _0x5e64c2=a0_0x45ca63;if(this['analysisTimer'])clearInterval(this['analysisTimer']);if(this[_0x5e64c2(0x2d8)])clearInterval(this['driftAnalysisTimer']);if(this[_0x5e64c2(0x211)])this[_0x5e64c2(0x211)]['cancel']();if(this[_0x5e64c2(0x21d)])this['modeResetJob'][_0x5e64c2(0x23b)]();if(this[_0x5e64c2(0x34e)])this[_0x5e64c2(0x34e)][_0x5e64c2(0x23b)]();if(this[_0x5e64c2(0x1c7)])clearTimeout(this[_0x5e64c2(0x1c7)]);if(this['exitGraceTimer'])clearTimeout(this['exitGraceTimer']);stopPythonService(this),_0x53a7ba();}async[a0_0x45ca63(0x2fd)](_0x5e296d,_0x564906){const _0x211fca=a0_0x45ca63;if(!_0x564906||this['dependencyInstallInProgress'])return;if(_0x5e296d[_0x211fca(0x20e)](_0x211fca(0x202))&&_0x5e296d[_0x211fca(0x29d)]('communicate.request')&&_0x564906[_0x211fca(0x345)]){await handleTelegramResponse(this,_0x564906[_0x211fca(0x345)]);return;}if(_0x5e296d===this[_0x211fca(0x272)]+'.'+SYSTEM_DP_MODE){if(_0x564906[_0x211fca(0x345)]&&Object['values'](SYSTEM_MODES)['includes'](_0x564906[_0x211fca(0x345)])){this[_0x211fca(0x2df)]=_0x564906[_0x211fca(0x345)];if(_0x564906[_0x211fca(0x345)]===SYSTEM_MODES[_0x211fca(0x324)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x564906[_0x211fca(0x2c4)])this[_0x211fca(0x317)](_0x5e296d,{'val':this[_0x211fca(0x2df)],'ack':!![]});return;}if(!_0x564906[_0x211fca(0x2c4)]){_0x5e296d['includes'](_0x211fca(0x234))&&_0x564906['val']&&(this[_0x211fca(0x317)](_0x5e296d,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x5e296d[_0x211fca(0x20e)](_0x211fca(0x1eb))&&_0x564906[_0x211fca(0x345)]){this[_0x211fca(0x317)](_0x5e296d,{'val':![],'ack':!![]});if(this[_0x211fca(0x340)])createDailyDigest(this);}_0x5e296d[_0x211fca(0x20e)](_0x211fca(0x269))&&_0x564906[_0x211fca(0x345)]&&(this[_0x211fca(0x317)](_0x5e296d,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x5e296d[_0x211fca(0x20e)](_0x211fca(0x32d))&&_0x564906[_0x211fca(0x345)]&&(this[_0x211fca(0x317)](_0x5e296d,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x5e296d[_0x211fca(0x20e)](_0x211fca(0x282))&&_0x564906['val']){this[_0x211fca(0x317)](_0x5e296d,{'val':![],'ack':!![]});if(this[_0x211fca(0x340)])try{const _0x354f1a=await this[_0x211fca(0x1d5)]('LTM.trainingData.sequences');if(_0x354f1a&&_0x354f1a[_0x211fca(0x345)]){const _0x345720=JSON['parse'](_0x354f1a[_0x211fca(0x345)]);this[_0x211fca(0x20a)][_0x211fca(0x352)](_0x211fca(0x342)),this[_0x211fca(0x213)](_0x211fca(0x1f1),{'val':_0x211fca(0x29c),'ack':!![]}),sendToPython(this,_0x211fca(0x2ca),{'sequences':_0x345720});}}catch(_0x1746f8){this['log']['error'](_0x211fca(0x241)+_0x1746f8[_0x211fca(0x33c)]);}}if(_0x5e296d[_0x211fca(0x20e)](_0x211fca(0x231))&&_0x564906[_0x211fca(0x345)]){this[_0x211fca(0x317)](_0x5e296d,{'val':![],'ack':!![]});if(this[_0x211fca(0x340)])try{const _0xe686aa=await this[_0x211fca(0x1d5)](LTM_DP_DAILY_DIGESTS);if(_0xe686aa&&_0xe686aa['val'])sendToPython(this,'TRAIN_HEALTH',{'digests':JSON[_0x211fca(0x249)](_0xe686aa[_0x211fca(0x345)])});}catch(_0x57f237){}}if(_0x5e296d[_0x211fca(0x20e)]('analysis.training.triggerEnergy')&&_0x564906[_0x211fca(0x345)]){this['setState'](_0x5e296d,{'val':![],'ack':!![]});if(this[_0x211fca(0x340)])try{const _0x2a0f8d=await this[_0x211fca(0x1d5)](_0x211fca(0x31d));if(_0x2a0f8d&&_0x2a0f8d[_0x211fca(0x345)])sendToPython(this,'TRAIN_ENERGY',{'points':JSON[_0x211fca(0x249)](_0x2a0f8d[_0x211fca(0x345)])});}catch(_0x358e51){}}if(_0x5e296d[_0x211fca(0x20e)]('analysis.training.triggerComfort')&&_0x564906[_0x211fca(0x345)]){this[_0x211fca(0x317)](_0x5e296d,{'val':![],'ack':!![]});if(this[_0x211fca(0x340)])try{const _0x36be16=await this[_0x211fca(0x1d5)](LTM_DP_RAW_LOG);_0x36be16&&_0x36be16[_0x211fca(0x345)]&&(this[_0x211fca(0x20a)][_0x211fca(0x352)](_0x211fca(0x1e1)),sendToPython(this,'TRAIN_COMFORT',{'events':JSON[_0x211fca(0x249)](_0x36be16[_0x211fca(0x345)])}));}catch(_0x55028f){}}if(_0x5e296d[_0x211fca(0x20e)]('analysis.training.triggerTopology')&&_0x564906[_0x211fca(0x345)]){this['setState'](_0x5e296d,{'val':![],'ack':!![]});if(this[_0x211fca(0x340)])try{const _0x5d20fb=await this[_0x211fca(0x1d5)](_0x211fca(0x325));if(_0x5d20fb&&_0x5d20fb['val']){const _0x495284=JSON[_0x211fca(0x249)](_0x5d20fb[_0x211fca(0x345)]);this[_0x211fca(0x20a)][_0x211fca(0x352)](_0x211fca(0x220)),sendToPython(this,'BUILD_TOPOLOGY',{'sequences':_0x495284});}}catch(_0x3f9962){this[_0x211fca(0x20a)][_0x211fca(0x2e4)]('Topology\x20Error:\x20'+_0x3f9962[_0x211fca(0x33c)]);}}return;}if(this[_0x211fca(0x277)][_0x211fca(0x2ec)]&&this[_0x211fca(0x277)][_0x211fca(0x2ec)][_0x211fca(0x20e)](_0x5e296d)){await checkWifiPresence(this);return;}const _0x24b30d=(this[_0x211fca(0x277)][_0x211fca(0x301)]||[])[_0x211fca(0x308)](_0x13d209=>_0x13d209['id']===_0x5e296d);if(_0x24b30d)processSensorEvent(this,_0x5e296d,_0x564906,_0x24b30d);}async[a0_0x45ca63(0x24a)](_0x26a6d6){const _0x2af1a3=a0_0x45ca63;if(typeof _0x26a6d6===_0x2af1a3(0x2ac)&&_0x26a6d6[_0x2af1a3(0x33c)]){if(_0x26a6d6[_0x2af1a3(0x278)]===_0x2af1a3(0x1f6)){const _0x2c120d=_0x26a6d6['message'][_0x2af1a3(0x235)]||this[_0x2af1a3(0x277)][_0x2af1a3(0x264)];if(!_0x2c120d)return this['sendTo'](_0x26a6d6['from'],_0x26a6d6['command'],{'success':![],'message':_0x2af1a3(0x26a)},_0x26a6d6['callback']);try{const _0x33a1b1=new GoogleGenerativeAI(_0x2c120d),_0x113ba8=_0x33a1b1[_0x2af1a3(0x2f7)]({'model':GEMINI_MODEL}),_0x34d838=await _0x113ba8[_0x2af1a3(0x28a)]('Hi');this[_0x2af1a3(0x2a5)](_0x26a6d6[_0x2af1a3(0x29a)],_0x26a6d6[_0x2af1a3(0x278)],{'success':!![],'message':_0x2af1a3(0x273)+_0x34d838[_0x2af1a3(0x259)][_0x2af1a3(0x364)]()},_0x26a6d6['callback']);}catch(_0x525434){this['sendTo'](_0x26a6d6['from'],_0x26a6d6['command'],{'success':![],'message':_0x2af1a3(0x280)+_0x525434['message']},_0x26a6d6[_0x2af1a3(0x33b)]);}}else{if(_0x26a6d6[_0x2af1a3(0x278)]===_0x2af1a3(0x2a7)){const _0x5458df=await getWeatherContext(this),_0x752ee0=await getCalendarContext(this);this['sendTo'](_0x26a6d6[_0x2af1a3(0x29a)],_0x26a6d6[_0x2af1a3(0x278)],{'success':!![],'weather':_0x5458df,'calendar':_0x752ee0},_0x26a6d6[_0x2af1a3(0x33b)]);}else{if(_0x26a6d6[_0x2af1a3(0x278)]===_0x2af1a3(0x312)){if(!this[_0x2af1a3(0x340)])return this[_0x2af1a3(0x2a5)](_0x26a6d6[_0x2af1a3(0x29a)],_0x26a6d6[_0x2af1a3(0x278)],{'success':![],'isPro':![]},_0x26a6d6['callback']);let _0x44bf43={'status':_0x2af1a3(0x2c7)};try{const _0xb2a214=await this[_0x2af1a3(0x1d5)](LTM_DP_DRIFT_STATUS);_0x44bf43[_0x2af1a3(0x331)]=_0xb2a214?_0xb2a214[_0x2af1a3(0x345)]:_0x2af1a3(0x2c7);}catch(_0x4829ec){}this[_0x2af1a3(0x2a5)](_0x26a6d6[_0x2af1a3(0x29a)],_0x26a6d6[_0x2af1a3(0x278)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x2af1a3(0x21a)],'driftAnalysis':_0x44bf43,'analysisHistory':this[_0x2af1a3(0x203)]},_0x26a6d6['callback']);}else{if(_0x26a6d6[_0x2af1a3(0x278)]===_0x2af1a3(0x1c6)){const _0x37df81=this['dailyDigests'][_0x2af1a3(0x323)],_0x3536bf=new Date(),_0xf2033a=new Date(_0x3536bf[_0x2af1a3(0x2e8)](),_0x3536bf['getMonth'](),_0x3536bf[_0x2af1a3(0x2f5)]())[_0x2af1a3(0x26d)](),_0x341553=this[_0x2af1a3(0x1e9)][_0x2af1a3(0x34a)](_0x13877d=>new Date(_0x13877d[_0x2af1a3(0x28f)])[_0x2af1a3(0x26d)]()>_0xf2033a)[_0x2af1a3(0x323)],_0x28a86a=new Array(0x18)['fill'](0x0);this[_0x2af1a3(0x1e9)][_0x2af1a3(0x30d)](_0x584c34=>{const _0x2e4ec3=_0x2af1a3,_0xd09cba=new Date(_0x584c34[_0x2e4ec3(0x28f)]);if(_0xd09cba[_0x2e4ec3(0x26d)]()>_0xf2033a)_0x28a86a[_0xd09cba['getHours']()]++;});let _0x2cec4f={'status':_0x2af1a3(0x2c7)};try{const _0x449d90=await this[_0x2af1a3(0x1d5)](LTM_DP_DRIFT_STATUS);_0x2cec4f[_0x2af1a3(0x331)]=_0x449d90?_0x449d90['val']:'N/A';}catch(_0x4f77dd){}let _0x1f3ce4='';try{const _0x322cf2=await this[_0x2af1a3(0x1d5)](_0x2af1a3(0x1e3));_0x1f3ce4=_0x322cf2?_0x322cf2[_0x2af1a3(0x345)]:'';}catch(_0xf40496){}let _0x3d40c1=null;!this['geminiModel']&&(_0x3d40c1=this[_0x2af1a3(0x277)][_0x2af1a3(0x264)]?_0x2af1a3(0x1ed):_0x2af1a3(0x23f));let _0x273542={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x4607e3=await this['getStateAsync'](_0x2af1a3(0x302));if(_0x4607e3&&_0x4607e3[_0x2af1a3(0x345)]){_0x273542[_0x2af1a3(0x25d)]=!![];const _0x25f350=await this['getStateAsync'](_0x2af1a3(0x1da));_0x273542[_0x2af1a3(0x1de)]=_0x25f350?_0x25f350[_0x2af1a3(0x345)]:'';const _0x860c5c=await this['getStateAsync']('analysis.automation.targetId');_0x273542['targetId']=_0x860c5c?_0x860c5c[_0x2af1a3(0x345)]:'';const _0x104b2d=await this[_0x2af1a3(0x1d5)](_0x2af1a3(0x2b4));_0x273542[_0x2af1a3(0x366)]=_0x104b2d?_0x104b2d[_0x2af1a3(0x345)]:'';}const _0x10dfd2=await this[_0x2af1a3(0x1d5)](_0x2af1a3(0x2d6));_0x273542[_0x2af1a3(0x365)]=_0x10dfd2?!!_0x10dfd2[_0x2af1a3(0x345)]:![];}catch(_0x77feff){}this['sendTo'](_0x26a6d6[_0x2af1a3(0x29a)],_0x26a6d6['command'],{'success':!![],'eventHistory':this[_0x2af1a3(0x1fc)][_0x2af1a3(0x29e)](0x0,0xf),'stats':{'digestCount':_0x37df81,'eventCountToday':_0x341553,'hourlyActivity':_0x28a86a,'driftStatus':_0x2cec4f['status'],'isPresent':this[_0x2af1a3(0x248)],'presenceWho':_0x1f3ce4,'minDays':this[_0x2af1a3(0x277)]['minDaysForBaseline']||0x7,'stbDays':this['config'][_0x2af1a3(0x258)]||0xe,'ltbDays':this[_0x2af1a3(0x277)][_0x2af1a3(0x23a)]||0x3c,'systemError':_0x3d40c1},'automation':_0x273542},_0x26a6d6[_0x2af1a3(0x33b)]);}else{if(_0x26a6d6[_0x2af1a3(0x278)]==='scanDevices')try{const _0x1bf4ec=await scanner[_0x2af1a3(0x299)](this,_0x26a6d6[_0x2af1a3(0x33c)]||{});this[_0x2af1a3(0x2a5)](_0x26a6d6[_0x2af1a3(0x29a)],_0x26a6d6[_0x2af1a3(0x278)],{'success':!![],'devices':_0x1bf4ec},_0x26a6d6[_0x2af1a3(0x33b)]);}catch(_0xf8d46){this[_0x2af1a3(0x2a5)](_0x26a6d6[_0x2af1a3(0x29a)],_0x26a6d6[_0x2af1a3(0x278)],{'success':![],'error':_0xf8d46[_0x2af1a3(0x33c)]},_0x26a6d6[_0x2af1a3(0x33b)]);}else{if(_0x26a6d6['command']===_0x2af1a3(0x33a)){const _0x10c8db=await this[_0x2af1a3(0x2a8)]('enum.functions.*',_0x2af1a3(0x2dd)),_0x4c6b5e=[];if(_0x10c8db)for(const _0x5390fd in _0x10c8db){const _0x45019e=_0x10c8db[_0x5390fd],_0x29fd49=(_0x45019e[_0x2af1a3(0x260)]&&typeof _0x45019e[_0x2af1a3(0x260)][_0x2af1a3(0x2fb)]===_0x2af1a3(0x2ac)?_0x45019e['common'][_0x2af1a3(0x2fb)]['de']:_0x45019e['common'][_0x2af1a3(0x2fb)])||_0x45019e['common'][_0x2af1a3(0x2fb)];_0x4c6b5e[_0x2af1a3(0x319)]({'id':_0x5390fd,'name':_0x29fd49});}const _0x4b7194=await this[_0x2af1a3(0x2a8)](_0x2af1a3(0x1d0),_0x2af1a3(0x2dd)),_0x1ae3fa=[];if(_0x4b7194)for(const _0x3edb43 in _0x4b7194){const _0xf8c385=_0x4b7194[_0x3edb43],_0x32f19e=(_0xf8c385[_0x2af1a3(0x260)]&&typeof _0xf8c385[_0x2af1a3(0x260)][_0x2af1a3(0x2fb)]===_0x2af1a3(0x2ac)?_0xf8c385[_0x2af1a3(0x260)][_0x2af1a3(0x2fb)]['de']:_0xf8c385[_0x2af1a3(0x260)]['name'])||_0x3edb43[_0x2af1a3(0x334)]('.')[_0x2af1a3(0x254)]();_0x1ae3fa[_0x2af1a3(0x319)](_0x32f19e);}this['sendTo'](_0x26a6d6[_0x2af1a3(0x29a)],_0x26a6d6['command'],{'success':!![],'enums':_0x4c6b5e,'rooms':_0x1ae3fa},_0x26a6d6[_0x2af1a3(0x33b)]);}else{if(_0x26a6d6[_0x2af1a3(0x278)]===_0x2af1a3(0x30a)){const _0x11b569=_0x26a6d6[_0x2af1a3(0x33c)][_0x2af1a3(0x318)];if(!_0x11b569)return this[_0x2af1a3(0x2a5)](_0x26a6d6[_0x2af1a3(0x29a)],_0x26a6d6[_0x2af1a3(0x278)],{'success':![],'error':'No\x20instance'},_0x26a6d6[_0x2af1a3(0x33b)]);const _0x4bfb93=await getCalendarNames(this,_0x11b569);this[_0x2af1a3(0x2a5)](_0x26a6d6['from'],_0x26a6d6[_0x2af1a3(0x278)],{'success':!![],'names':_0x4bfb93},_0x26a6d6[_0x2af1a3(0x33b)]);}else{if(_0x26a6d6[_0x2af1a3(0x278)]===_0x2af1a3(0x2fe)){const {targetId:_0xcebcd1,targetValue:_0x2403d1}=_0x26a6d6['message'];this[_0x2af1a3(0x20a)]['info'](_0x2af1a3(0x236)+_0xcebcd1+_0x2af1a3(0x200)+_0x2403d1),await this[_0x2af1a3(0x213)](_0x2af1a3(0x302),{'val':!![],'ack':!![]}),await this[_0x2af1a3(0x213)]('analysis.automation.description',{'val':_0x2af1a3(0x28c)+_0xcebcd1,'ack':!![]}),await this[_0x2af1a3(0x213)]('analysis.automation.targetId',{'val':_0xcebcd1,'ack':!![]}),await this[_0x2af1a3(0x213)](_0x2af1a3(0x2b4),{'val':_0x2403d1,'ack':!![]}),this[_0x2af1a3(0x2a5)](_0x26a6d6['from'],_0x26a6d6[_0x2af1a3(0x278)],{'success':!![]},_0x26a6d6[_0x2af1a3(0x33b)]);}else{if(_0x26a6d6[_0x2af1a3(0x278)]==='submitFeedback'){const {historyId:_0x38b217,rating:_0x3a31ed,comment:_0x59c5b2,alertReason:_0x44d46d}=_0x26a6d6[_0x2af1a3(0x33c)];_0x38b217&&_0x3a31ed?(await saveFeedback(this,{'timestamp':Date[_0x2af1a3(0x290)](),'historyId':_0x38b217,'rating':_0x3a31ed,'comment':_0x59c5b2,'alertReason':_0x44d46d}),this['sendTo'](_0x26a6d6[_0x2af1a3(0x29a)],_0x26a6d6[_0x2af1a3(0x278)],{'success':!![]},_0x26a6d6[_0x2af1a3(0x33b)])):this[_0x2af1a3(0x2a5)](_0x26a6d6['from'],_0x26a6d6[_0x2af1a3(0x278)],{'success':![],'error':_0x2af1a3(0x1c4)},_0x26a6d6[_0x2af1a3(0x33b)]);}else _0x26a6d6[_0x2af1a3(0x278)]==='dismissAutomation'&&(this[_0x2af1a3(0x20a)][_0x2af1a3(0x352)](_0x2af1a3(0x2f4)),await this[_0x2af1a3(0x213)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),await this['setStateAsync'](_0x2af1a3(0x1da),{'val':'','ack':!![]}),this[_0x2af1a3(0x2a5)](_0x26a6d6[_0x2af1a3(0x29a)],_0x26a6d6['command'],{'success':!![]},_0x26a6d6[_0x2af1a3(0x33b)]));}}}}}}}}}}}if(require['main']!==module)module[a0_0x45ca63(0x2de)]=_0x1e6af6=>new CogniLiving(_0x1e6af6);else new CogniLiving();