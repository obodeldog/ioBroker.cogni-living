const a0_0xe79581=a0_0x3a73;(function(_0x406d56,_0x5be90b){const _0xc615d=a0_0x3a73,_0x3d09fa=_0x406d56();while(!![]){try{const _0x30393a=parseInt(_0xc615d(0x2d2))/0x1+parseInt(_0xc615d(0x216))/0x2+parseInt(_0xc615d(0x26c))/0x3+parseInt(_0xc615d(0x218))/0x4+parseInt(_0xc615d(0x2c0))/0x5*(-parseInt(_0xc615d(0x2cc))/0x6)+-parseInt(_0xc615d(0x290))/0x7*(parseInt(_0xc615d(0x275))/0x8)+-parseInt(_0xc615d(0x274))/0x9*(parseInt(_0xc615d(0x25f))/0xa);if(_0x30393a===_0x5be90b)break;else _0x3d09fa['push'](_0x3d09fa['shift']());}catch(_0x355d12){_0x3d09fa['push'](_0x3d09fa['shift']());}}}(a0_0x42cd,0xb97cc));const a0_0x40010b=(function(){let _0x164d42=!![];return function(_0x540f35,_0x31e08e){const _0x5b6125=_0x164d42?function(){const _0x568891=a0_0x3a73;if(_0x31e08e){const _0x1a6539=_0x31e08e[_0x568891(0x251)](_0x540f35,arguments);return _0x31e08e=null,_0x1a6539;}}:function(){};return _0x164d42=![],_0x5b6125;};}()),a0_0x456913=a0_0x40010b(this,function(){const _0x33e710=a0_0x3a73;return a0_0x456913[_0x33e710(0x317)]()[_0x33e710(0x320)](_0x33e710(0x325))[_0x33e710(0x317)]()[_0x33e710(0x2f0)](a0_0x456913)[_0x33e710(0x320)](_0x33e710(0x325));});a0_0x456913();'use strict';const utils=require(a0_0xe79581(0x233)),{GoogleGenerativeAI}=require(a0_0xe79581(0x2f8)),installer=require(a0_0xe79581(0x2b4)),scanner=require('./lib/scanner'),schedulers=require('./lib/scheduler'),topology=require(a0_0xe79581(0x241)),setup=require(a0_0xe79581(0x2d0)),recorder=require('./lib/recorder'),pythonBridge=require('./lib/python_bridge'),aiAgent=require('./lib/ai_agent'),deadMan=require(a0_0xe79581(0x276)),automation=require(a0_0xe79581(0x30f)),GEMINI_MODEL=a0_0xe79581(0x313),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x3a73(_0x473f3c,_0x73cb1d){const _0x490260=a0_0x42cd();return a0_0x3a73=function(_0x456913,_0x40010b){_0x456913=_0x456913-0x1d9;let _0x42cd19=_0x490260[_0x456913];return _0x42cd19;},a0_0x3a73(_0x473f3c,_0x73cb1d);}function a0_0x42cd(){const _0x2b42cd=['MATCH\x20(False\x20Positive)','some','weatherunderground.0','setupDriftAnalysisScheduler','loadSystemMode','magnet','forEach','testApiKey','analysis.training.triggerSecurity','main','resetRLPenalty','âš ï¸\x20Graph-Brain:\x20No\x20training\x20sequences\x20found\x20in\x20LTM.','7XnGajm','telegram','version','Keine\x20Antwort\x20von\x20Gemini','createAllObjects','setPresence','analysis.energy.insulationScore','text','getGenerativeModel','string','Instanz\x20nicht\x20gefunden','â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...','length','stopService','sendTo','lastAlertState','Lernphase\x20(','genAI','command','slice','scanForDevices','role','setupBriefingScheduler','triggerGaitAnalysis','TRACK_EVENT','system.presenceWho','healthTrendInterval','Graph-Brain\x20Train\x20Error:\x20','TRAIN_HEALTH','executeAutomationAction','ack','ErklÃ¤rt\x20durch:\x20','analysis.automation.targetValue','triggerBriefing','_calName','config','./lib/installer','parse','setObjectNotExistsAsync','initHistory','security.alarm_triggered','enum.functions.*','General\x20Activity\x20Trend\x20(%)','Test','SET_TOPOLOGY','Activity-Level','notifyTelegramInstance','VACATION','145vEuush','cancel','split','briefingJob','bootTime','abs','updateLocation','json','toFixed','TRAIN_COMFORT','analysis.training.status','find','205236JWlWSS','checkAndInstall','send','NORMAL','./lib/setup','[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20','1451035KYLXGY','generateContent','sensor.window','notifyPushoverEnabled','pressureBuffer','heiter','runAutopilot','analysis.topology.structure','Gemini\x20Init\x20Error:\x20','analysis.training.triggerHealth','location','updated','ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).','onReady','modeResetJob','LTM.baselineStatus','checkCalendarTriggers','SYSTEM_DP_MODE','trackerEnabled','map','memoryCache','Heizung\x20kann\x20','setupLtmScheduler','message','getForeignObjectsAsync','application/json','Notification\x20Test\x20Failed:\x20','type','analysis.health.gaitSensors','sort','constructor','\x20opened.\x20Peak\x20Pressure:\x20','LTM.triggerDailyDigest','initSystemConfig','[Calibration]\x20Window\x20','triggerInfrasoundCorrelation','Adapter','analysis.energy.mpcActive','@google/generative-ai','Fenster\x20geÃ¶ffnet:\x20','Forensic\x20Infrasound\x20Log','window','filter','setHours','getLtmData','triggerDailyDigest','instance','klar','subscribeForeignStates','setStateAsync','Gemini\x20AI\x20initialized.','key','getOutsideTemperatureNumeric','activityLevel','val','analyzeWindowOpening','licenseKey','getHours','enum','Reinforcement\x20Learning\x20Penalties','error','./lib/automation','LTM.trainingData.sequences','monitorEnforcements','object','models/gemini-flash-latest','getTime','entries','daswetter.0','toString','updateTopology','notifyTelegramEnabled','common','appendToLog','Kein\x20Wetter-Adapter','\x20hPa\x20(Limit:\x20','bind','sendNotification','search','analysisHistory','number','ready','useWeather','(((.+)+)+)+$','[Infrasound]\x20ðŸŸ¡\x20Debug-Mode:\x20Alarm\x20detected\x20but\x20suppressed\x20because\x20presence=true.','sensorLastValues','createDailyDigest','Warm-Up\x20Target\x20Temps\x20(JSON)','sendMorningBriefing','ANOMALY\x20(Real\x20Threat?)','simulateButler','analysis.trigger','analysis.energy.warmupSources','debug','analysis.energy.ventilationAlerts','rawEventLog','onUnload','Sensors\x20used\x20for\x20Gait\x20Analysis','from','getEnums','analysis.automation.triggerAction','onMessage','Guest\x20Mode','presenceDevices','Gait\x20Speed\x20Calculation\x20Proof','\x20hPa.\x20Einbruch\x20wahrscheinlich.','now','abortExitTimer','analysis.security.learningStatus','join','analysis.training.triggerTopology','ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20','minDaysForBaseline','calendarInstance','exports','temperature','inactivityThresholdHours','log','analysis.automation.autoApply','dependencyInstallInProgress','Aktiv\x20(','timestamp','triggerEnergyPrediction','fill','checkLicense','Verbunden','updateHealthVector','push','enum.rooms.*','analysis.energy.rlPenalties','getForeignObjectAsync','toLowerCase','runPythonHealthCheck','Fehler:\x20','handleInfrasound','analysis.security.infrasoundLog','TRAIN_ENERGY','{\x22default\x22:\x2021}','subscribeStates','testContext','getStateAsync','\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).','stringify','infrasoundThreshold','system.mode','analysis.training.triggerComfort','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','warn','Simulation\x20durch\x20Admin\x20(Test)','infrasoundSensorId','getCalendarNames','2596086sQZXHc','startSystem','2877320ecwdgL','scanThermostats','driftAnalysisTimer','automation.triggerAction','Nuukanni\x20Security','keys','analysis.energy.warmupTimes','analysis.automation.patternDetected','includes','getMinutes','protectAiMemory','getOverviewData','getState','LTM.rawEventLog','.system.mode','endsWith','notifyPushoverInstance','infrasoundEnabled','simulateEnergyMPC','LTM.dailyDigests','analysis.automation.description','exitTimer','lastTrackerEventTime','setupModeResetScheduler','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','online','INTERNAL','@iobroker/adapter-core','Kein\x20Kalender-Adapter','getForeignStateAsync','ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20','eventHistory','matrix',')\x20-\x20Phase\x20D\x20(Forensic\x20Calibration)','Current.WeatherText','currentSystemMode','exitGraceTimer','trackerHeartbeat','checkSolarCondition','\x20Tage)','TRAIN_SECURITY','./lib/topology','info','analysis.training.triggerEnergy','isSolar','values','namespace','ANALYZE_GAIT','analysisTimer','TRAIN_TOPOLOGY','times','checkWifiPresence','Key\x20not\x20found\x20or\x20not\x20provided','calendarName','devices','geminiApiKey','dailyDigests','apply','name','sensor.door','isProVersion','isPresent','clear','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','sonn','analysis.energy.pinnForecast','open','minutes_safe','OPTIMIZE_ENERGY','isGracePeriodActive','.communicate.request','10IWEqrr','unshift','SET_LEARNING_MODE','CALIB','ltmJob','analysis.automation.targetId','ALARM','Verbindung\x20erfolgreich!','cleanupGhostInterventions','analysisInterval','dismissAutomation','runGeminiAnalysis','ðŸ§ \x20Graph-Brain:\x20Training\x20Behaviour\x20Matrix\x20based\x20on\x20','605982ILcXMl','subscribeForeignStatesAsync','floor','pop','Kein\x20API\x20Key\x20Ã¼bergeben','PREDICT_ENERGY','callback','thermostat','5860989TuvgAO','10139608QHbeqD','./lib/dead_man','systemConfig','SYSTEM_MODES','runBaselineDriftAnalysis','onStateChange','sunny','sources','system.adapter.','door','state','infrasoundLocked','response','setState','infrasoundArmingId'];a0_0x42cd=function(){return _0x2b42cd;};return a0_0x42cd();}class CogniLiving extends utils[a0_0xe79581(0x2f6)]{constructor(_0x351802){const _0x24f70d=a0_0xe79581;super({..._0x351802,'name':'cogni-living'}),this[_0x24f70d(0x237)]=[],this[_0x24f70d(0x321)]=[],this['rawEventLog']=[],this[_0x24f70d(0x250)]=[],this[_0x24f70d(0x327)]={},this[_0x24f70d(0x277)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x24f70d(0x22d)]=null,this[_0x24f70d(0x23c)]=null,this[_0x24f70d(0x25d)]=![],this[_0x24f70d(0x2a1)]=null,this['geminiModel']=null,this[_0x24f70d(0x23b)]=setup[_0x24f70d(0x278)]['NORMAL'],this[_0x24f70d(0x254)]=![],this[_0x24f70d(0x29f)]=![],this[_0x24f70d(0x248)]=null,this['ltmJob']=null,this[_0x24f70d(0x2e0)]=null,this['driftAnalysisTimer']=null,this[_0x24f70d(0x2c3)]=null,this[_0x24f70d(0x23d)]=null,this[_0x24f70d(0x2aa)]=null,this[_0x24f70d(0x1f6)]=![],this[_0x24f70d(0x22e)]=Date['now'](),this['memoryCache']=null,this[_0x24f70d(0x2c4)]=Date['now'](),this['infrasoundLocked']=![],this[_0x24f70d(0x2d6)]=[],this['on'](_0x24f70d(0x323),this[_0x24f70d(0x2df)][_0x24f70d(0x31e)](this)),this['on']('stateChange',this['onStateChange'][_0x24f70d(0x31e)](this)),this['on']('unload',this['onUnload'][_0x24f70d(0x31e)](this)),this['on'](_0x24f70d(0x2e9),this[_0x24f70d(0x1e4)][_0x24f70d(0x31e)](this));}async[a0_0xe79581(0x2df)](){const _0x327bca=a0_0xe79581;this['log'][_0x327bca(0x242)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x327bca(0x292)]+_0x327bca(0x239));if(!installer[_0x327bca(0x2cd)](this,()=>this['startSystem']()))return;}async[a0_0xe79581(0x217)](){const _0x1f229f=a0_0xe79581;await setup['initZombies'](this);try{this[_0x1f229f(0x254)]=await setup[_0x1f229f(0x1fb)](this[_0x1f229f(0x2b3)][_0x1f229f(0x30a)]);}catch(_0x35513c){}if(!this['config']['inactivityThresholdHours']||this['config'][_0x1f229f(0x1f3)]<0.1)this[_0x1f229f(0x2b3)][_0x1f229f(0x1f3)]=0xc;await setup[_0x1f229f(0x2b7)](this),await setup[_0x1f229f(0x2f3)](this);try{const _0x3e983c=await this[_0x1f229f(0x20b)](_0x1f229f(0x21e)),_0x7f67d1=await this[_0x1f229f(0x20b)](_0x1f229f(0x1db));_0x3e983c&&_0x3e983c[_0x1f229f(0x308)]&&_0x7f67d1&&_0x7f67d1[_0x1f229f(0x308)]&&(Date[_0x1f229f(0x1e9)]()-_0x3e983c['ts']<0x4*0xe10*0x3e8&&(this['memoryCache']={'times':JSON['parse'](_0x3e983c[_0x1f229f(0x308)]),'sources':JSON[_0x1f229f(0x2b5)](_0x7f67d1['val'])},this[_0x1f229f(0x1f4)][_0x1f229f(0x242)](_0x1f229f(0x236)+Object[_0x1f229f(0x21d)](this[_0x1f229f(0x2e6)][_0x1f229f(0x24a)])[_0x1f229f(0x29c)]+_0x1f229f(0x20c))));}catch(_0x3d9667){this[_0x1f229f(0x1f4)][_0x1f229f(0x212)]('Memory\x20Hydration\x20Failed:\x20'+_0x3d9667[_0x1f229f(0x2e9)]);}if(this[_0x1f229f(0x2b3)][_0x1f229f(0x24f)])try{this[_0x1f229f(0x2a1)]=new GoogleGenerativeAI(this[_0x1f229f(0x2b3)][_0x1f229f(0x24f)]),this['geminiModel']=this[_0x1f229f(0x2a1)][_0x1f229f(0x298)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x1f229f(0x2eb)}}),this[_0x1f229f(0x1f4)][_0x1f229f(0x242)](_0x1f229f(0x304));}catch(_0x18d2b3){this[_0x1f229f(0x1f4)][_0x1f229f(0x30e)](_0x1f229f(0x2da)+_0x18d2b3['message']);}await setup[_0x1f229f(0x294)](this),await this[_0x1f229f(0x288)](),await this[_0x1f229f(0x2b6)](_0x1f229f(0x259),{'type':_0x1f229f(0x27f),'common':{'name':'PINN\x20AI\x20Forecast','type':_0x1f229f(0x299),'role':_0x1f229f(0x2c7),'read':!![],'write':![]},'native':{}}),await this[_0x1f229f(0x2b6)](_0x1f229f(0x1dd),{'type':'state','common':{'name':'Active\x20Ventilation\x20Alerts','type':_0x1f229f(0x299),'role':_0x1f229f(0x2c7),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x1f229f(0x21e),{'type':_0x1f229f(0x27f),'common':{'name':_0x1f229f(0x257),'type':_0x1f229f(0x299),'role':_0x1f229f(0x2c7),'read':!![],'write':![]},'native':{}}),await this[_0x1f229f(0x2b6)]('analysis.energy.warmupTargets',{'type':_0x1f229f(0x27f),'common':{'name':_0x1f229f(0x329),'type':'string','role':_0x1f229f(0x2c7),'read':!![],'write':!![],'def':_0x1f229f(0x208)},'native':{}}),await this[_0x1f229f(0x2b6)](_0x1f229f(0x200),{'type':_0x1f229f(0x27f),'common':{'name':_0x1f229f(0x30d),'type':_0x1f229f(0x299),'role':_0x1f229f(0x2c7),'read':!![],'write':![],'def':'{}'},'native':{}}),await this[_0x1f229f(0x2b6)]('analysis.health.activityTrend',{'type':_0x1f229f(0x27f),'common':{'name':_0x1f229f(0x2ba),'type':'number','role':'value','unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x1f229f(0x2b6)](_0x1f229f(0x2ee),{'type':_0x1f229f(0x27f),'common':{'name':_0x1f229f(0x1e0),'type':_0x1f229f(0x299),'role':_0x1f229f(0x297),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.energy.activeEnforcements',{'type':_0x1f229f(0x27f),'common':{'name':'Active\x20Calendar\x20Enforcements\x20(Locks)','type':_0x1f229f(0x299),'role':_0x1f229f(0x2c7),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x1f229f(0x2b6)](_0x1f229f(0x206),{'type':_0x1f229f(0x27f),'common':{'name':_0x1f229f(0x2fa),'type':_0x1f229f(0x299),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.gaitDebug',{'type':_0x1f229f(0x27f),'common':{'name':_0x1f229f(0x1e7),'type':_0x1f229f(0x299),'role':_0x1f229f(0x297),'read':!![],'write':![]},'native':{}});try{const _0x340f12=await this[_0x1f229f(0x20b)](_0x1f229f(0x225));if(_0x340f12&&_0x340f12[_0x1f229f(0x308)])this[_0x1f229f(0x1de)]=JSON[_0x1f229f(0x2b5)](_0x340f12['val']);}catch(_0x271131){this['rawEventLog']=[];}try{const _0x129128=await this['getStateAsync']('LTM.dailyDigests');if(_0x129128&&_0x129128[_0x1f229f(0x308)])this['dailyDigests']=JSON[_0x1f229f(0x2b5)](_0x129128[_0x1f229f(0x308)]);}catch(_0x2426c8){this[_0x1f229f(0x250)]=[];}const _0x57ed6d=this[_0x1f229f(0x250)][_0x1f229f(0x29c)]>=(this[_0x1f229f(0x2b3)][_0x1f229f(0x1ef)]||0x7)?_0x1f229f(0x1f7)+this[_0x1f229f(0x250)][_0x1f229f(0x29c)]+_0x1f229f(0x23f):_0x1f229f(0x2a0)+this['dailyDigests'][_0x1f229f(0x29c)]+'/'+(this[_0x1f229f(0x2b3)][_0x1f229f(0x1ef)]||0x7)+')';await this['setStateAsync'](_0x1f229f(0x2e1),{'val':_0x57ed6d,'ack':!![]}),this['subscribeStates'](_0x1f229f(0x1da)),this[_0x1f229f(0x209)](_0x1f229f(0x2f2)),this[_0x1f229f(0x209)](_0x1f229f(0x20f)),this[_0x1f229f(0x209)]('analysis.triggerBriefing'),this[_0x1f229f(0x209)](_0x1f229f(0x1e3)),this[_0x1f229f(0x209)](_0x1f229f(0x1f5)),this['subscribeStates'](_0x1f229f(0x28c)),this[_0x1f229f(0x209)](_0x1f229f(0x2db)),this[_0x1f229f(0x209)](_0x1f229f(0x243)),this[_0x1f229f(0x209)](_0x1f229f(0x210)),this[_0x1f229f(0x209)](_0x1f229f(0x1ed)),this[_0x1f229f(0x209)](_0x1f229f(0x2f7)),this['subscribeStates']('analysis.energy.warmupSources');this[_0x1f229f(0x2b3)][_0x1f229f(0x229)]&&this[_0x1f229f(0x2b3)]['infrasoundSensorId']&&(this['log'][_0x1f229f(0x242)](_0x1f229f(0x2d1)+this['config'][_0x1f229f(0x214)]),this[_0x1f229f(0x302)](this['config'][_0x1f229f(0x214)]));const _0x3bcc82=this[_0x1f229f(0x2b3)][_0x1f229f(0x24e)];if(_0x3bcc82)for(const _0xcd684e of _0x3bcc82){await this[_0x1f229f(0x26d)](_0xcd684e['id']);}const _0x4dc7be=this[_0x1f229f(0x2b3)][_0x1f229f(0x1e6)];if(_0x4dc7be)for(const _0x37936b of _0x4dc7be){await this[_0x1f229f(0x26d)](_0x37936b);}if(this[_0x1f229f(0x2b3)][_0x1f229f(0x319)]&&this[_0x1f229f(0x2b3)][_0x1f229f(0x2be)])await this[_0x1f229f(0x26d)](this[_0x1f229f(0x2b3)][_0x1f229f(0x2be)]+_0x1f229f(0x25e));setTimeout(()=>this[_0x1f229f(0x24b)](),0x1388);if(this['analysisTimer'])clearInterval(this[_0x1f229f(0x248)]);const _0x15d6f7=this['config'][_0x1f229f(0x268)]||0xf;_0x15d6f7>0x0&&(this[_0x1f229f(0x248)]=setInterval(()=>{const _0x2fa14f=_0x1f229f;this[_0x2fa14f(0x2d8)](),automation[_0x2fa14f(0x2e2)](this),automation[_0x2fa14f(0x311)](this);},_0x15d6f7*0x3c*0x3e8));setTimeout(()=>{const _0x4f0b00=_0x1f229f;automation[_0x4f0b00(0x2e2)](this),automation[_0x4f0b00(0x311)](this);},0x2710);this['config'][_0x1f229f(0x2e4)]!==![]&&(this[_0x1f229f(0x23d)]=setInterval(()=>{const _0x7a767c=_0x1f229f;if(this['isProVersion']){const _0xb2943d=Date['now'](),_0x2427b6=this[_0x7a767c(0x22e)]||_0xb2943d,_0x3b7e0e=(_0xb2943d-_0x2427b6)/0x3e8;_0x3b7e0e>0x2&&(this[_0x7a767c(0x22e)]=_0xb2943d,pythonBridge[_0x7a767c(0x2ce)](this,_0x7a767c(0x2a8),{'room':null,'dt':_0x3b7e0e}));}},0xbb8));if(this[_0x1f229f(0x2aa)])clearInterval(this[_0x1f229f(0x2aa)]);this[_0x1f229f(0x2aa)]=setInterval(()=>{const _0x5bded1=_0x1f229f;this[_0x5bded1(0x254)]&&(this[_0x5bded1(0x1f4)][_0x5bded1(0x242)](_0x5bded1(0x29b)),this['runPythonHealthCheck']());},0x4*0x3c*0x3c*0x3e8),schedulers[_0x1f229f(0x2e8)](this,()=>aiAgent[_0x1f229f(0x328)](this,pythonBridge)),schedulers[_0x1f229f(0x22f)](this),schedulers[_0x1f229f(0x287)](this,()=>aiAgent[_0x1f229f(0x279)](this)),schedulers[_0x1f229f(0x2a6)](this,()=>aiAgent['sendMorningBriefing'](this)),pythonBridge['startService'](this,installer['PYTHON_EXE']),setTimeout(async()=>{const _0x303303=_0x1f229f;await topology[_0x303303(0x318)](this);try{const _0x252af9=await this['getStateAsync'](_0x303303(0x2d9));if(_0x252af9&&_0x252af9[_0x303303(0x308)])pythonBridge[_0x303303(0x2ce)](this,'SET_TOPOLOGY',JSON[_0x303303(0x2b5)](_0x252af9[_0x303303(0x308)]));}catch(_0x115392){}this[_0x303303(0x203)](),this[_0x303303(0x2a7)](),this['triggerEnergyPrediction'](),this[_0x303303(0x1fd)]();},0x1388);}[a0_0xe79581(0x1df)](_0x3bb8d5){const _0xa921b4=a0_0xe79581;if(this[_0xa921b4(0x248)])clearInterval(this[_0xa921b4(0x248)]);if(this[_0xa921b4(0x21a)])clearInterval(this[_0xa921b4(0x21a)]);if(this[_0xa921b4(0x23d)])clearInterval(this['trackerHeartbeat']);if(this[_0xa921b4(0x2aa)])clearInterval(this[_0xa921b4(0x2aa)]);if(this['ltmJob'])this[_0xa921b4(0x263)]['cancel']();if(this[_0xa921b4(0x2e0)])this[_0xa921b4(0x2e0)][_0xa921b4(0x2c1)]();if(this[_0xa921b4(0x2c3)])this[_0xa921b4(0x2c3)]['cancel']();recorder[_0xa921b4(0x1ea)](this),pythonBridge[_0xa921b4(0x29d)](this),_0x3bb8d5();}async[a0_0xe79581(0x27a)](_0x2e410b,_0x45bcfc){const _0x3971e0=a0_0xe79581;if(!_0x45bcfc||this['dependencyInstallInProgress'])return;if(_0x2e410b[_0x3971e0(0x220)](_0x3971e0(0x291))&&_0x2e410b[_0x3971e0(0x227)]('communicate.request')&&_0x45bcfc[_0x3971e0(0x308)])return;if(this['config']['infrasoundEnabled']&&_0x2e410b===this['config'][_0x3971e0(0x214)]){this['handleInfrasound'](_0x45bcfc[_0x3971e0(0x308)]);return;}if(_0x2e410b===this[_0x3971e0(0x246)]+_0x3971e0(0x226)){if(_0x45bcfc[_0x3971e0(0x308)]&&Object[_0x3971e0(0x245)](setup[_0x3971e0(0x278)])[_0x3971e0(0x220)](_0x45bcfc['val'])){this[_0x3971e0(0x23b)]=_0x45bcfc[_0x3971e0(0x308)];if(_0x45bcfc['val']===setup[_0x3971e0(0x278)][_0x3971e0(0x2bf)])await recorder[_0x3971e0(0x295)](this,![]);else await recorder[_0x3971e0(0x295)](this,!![]);if(this[_0x3971e0(0x254)]){let _0xcd6333=![],_0x102145=0x0,_0x40d338='manual';if(this[_0x3971e0(0x23b)]==='party')_0xcd6333=!![],_0x102145=0x168,_0x40d338='Party\x20Mode';else this[_0x3971e0(0x23b)]==='guest'&&(_0xcd6333=!![],_0x102145=0x5a0,_0x40d338=_0x3971e0(0x1e5));pythonBridge['send'](this,_0x3971e0(0x261),{'active':_0xcd6333,'duration':_0x102145,'label':_0x40d338}),await this[_0x3971e0(0x303)](_0x3971e0(0x1eb),{'val':JSON[_0x3971e0(0x20d)]({'active':_0xcd6333,'label':_0x40d338,'timestamp':Date[_0x3971e0(0x1e9)]()}),'ack':!![]});}}if(!_0x45bcfc['ack'])this[_0x3971e0(0x282)](_0x2e410b,{'val':this[_0x3971e0(0x23b)],'ack':!![]});return;}_0x2e410b[_0x3971e0(0x227)](_0x3971e0(0x1db))&&_0x45bcfc[_0x3971e0(0x2ae)]&&this[_0x3971e0(0x222)](_0x45bcfc[_0x3971e0(0x308)]);if(!_0x45bcfc[_0x3971e0(0x2ae)]){if(_0x2e410b[_0x3971e0(0x220)]('analysis.trigger')&&_0x45bcfc['val']){this[_0x3971e0(0x282)](_0x2e410b,{'val':![],'ack':!![]}),aiAgent[_0x3971e0(0x26a)](this);return;}if(_0x2e410b[_0x3971e0(0x220)](_0x3971e0(0x2ff))&&_0x45bcfc['val']){this[_0x3971e0(0x282)](_0x2e410b,{'val':![],'ack':!![]});if(this[_0x3971e0(0x254)])aiAgent[_0x3971e0(0x328)](this,pythonBridge);return;}if(_0x2e410b[_0x3971e0(0x220)](_0x3971e0(0x2b1))&&_0x45bcfc['val']){this[_0x3971e0(0x282)](_0x2e410b,{'val':![],'ack':!![]}),aiAgent[_0x3971e0(0x32a)](this);return;}if(_0x2e410b[_0x3971e0(0x220)](_0x3971e0(0x21b))&&_0x45bcfc[_0x3971e0(0x308)]){this['setState'](_0x2e410b,{'val':![],'ack':!![]}),aiAgent[_0x3971e0(0x2ad)](this);return;}if(_0x2e410b[_0x3971e0(0x220)]('analysis.training.triggerSecurity')&&_0x45bcfc[_0x3971e0(0x308)]){this[_0x3971e0(0x282)](_0x2e410b,{'val':![],'ack':!![]});if(this[_0x3971e0(0x254)])try{const _0x407f8b=await this[_0x3971e0(0x20b)](_0x3971e0(0x310));if(_0x407f8b&&_0x407f8b[_0x3971e0(0x308)]){const _0x2eaf83=JSON['parse'](_0x407f8b[_0x3971e0(0x308)]);this['setStateAsync'](_0x3971e0(0x2ca),{'val':'Sec-Training\x20started...','ack':!![]}),pythonBridge['send'](this,_0x3971e0(0x240),{'sequences':_0x2eaf83});}}catch(_0x5d58fd){}return;}if(_0x2e410b[_0x3971e0(0x220)](_0x3971e0(0x2db))&&_0x45bcfc[_0x3971e0(0x308)]){this['setState'](_0x2e410b,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x2e2105=await this[_0x3971e0(0x20b)](_0x3971e0(0x22b));if(_0x2e2105&&_0x2e2105[_0x3971e0(0x308)])pythonBridge[_0x3971e0(0x2ce)](this,_0x3971e0(0x2ac),{'digests':JSON[_0x3971e0(0x2b5)](_0x2e2105[_0x3971e0(0x308)])});}catch(_0x37d370){}return;}if(_0x2e410b['includes']('analysis.training.triggerEnergy')&&_0x45bcfc['val']){this[_0x3971e0(0x282)](_0x2e410b,{'val':![],'ack':!![]});if(this[_0x3971e0(0x254)])try{const _0x15ed7f=await this[_0x3971e0(0x20b)]('LTM.trainingData.thermodynamics');if(_0x15ed7f&&_0x15ed7f[_0x3971e0(0x308)])pythonBridge['send'](this,_0x3971e0(0x207),{'points':JSON['parse'](_0x15ed7f[_0x3971e0(0x308)])});}catch(_0x32dc1d){}return;}if(_0x2e410b[_0x3971e0(0x220)]('analysis.training.triggerComfort')&&_0x45bcfc['val']){this['setState'](_0x2e410b,{'val':![],'ack':!![]});if(this[_0x3971e0(0x254)])try{const _0x510f05=await this['getStateAsync'](_0x3971e0(0x225));if(_0x510f05&&_0x510f05['val'])pythonBridge[_0x3971e0(0x2ce)](this,_0x3971e0(0x2c9),{'events':JSON[_0x3971e0(0x2b5)](_0x510f05[_0x3971e0(0x308)])});}catch(_0x2e6282){}return;}if(_0x2e410b[_0x3971e0(0x220)](_0x3971e0(0x1ed))&&_0x45bcfc[_0x3971e0(0x308)]){this[_0x3971e0(0x282)](_0x2e410b,{'val':![],'ack':!![]}),topology[_0x3971e0(0x318)](this);if(this[_0x3971e0(0x254)])try{const _0x1d00a3=await this[_0x3971e0(0x20b)](_0x3971e0(0x310));if(_0x1d00a3&&_0x1d00a3[_0x3971e0(0x308)]){const _0x454619=JSON['parse'](_0x1d00a3[_0x3971e0(0x308)]);this[_0x3971e0(0x1f4)]['info'](_0x3971e0(0x26b)+_0x454619['length']+'\x20sequences...'),pythonBridge[_0x3971e0(0x2ce)](this,_0x3971e0(0x249),{'sequences':_0x454619});}else this['log'][_0x3971e0(0x212)](_0x3971e0(0x28f));}catch(_0x5c963f){this['log'][_0x3971e0(0x30e)](_0x3971e0(0x2ab)+_0x5c963f['message']);}return;}}if(this[_0x3971e0(0x2b3)][_0x3971e0(0x1e6)]&&this[_0x3971e0(0x2b3)][_0x3971e0(0x1e6)][_0x3971e0(0x220)](_0x2e410b)){await this[_0x3971e0(0x24b)]();return;}const _0x14508b=(this[_0x3971e0(0x2b3)][_0x3971e0(0x24e)]||[])[_0x3971e0(0x2cb)](_0x1373c7=>_0x1373c7['id']===_0x2e410b);if(_0x14508b){const _0x55b473=await recorder['processSensorEvent'](this,_0x2e410b,_0x45bcfc,_0x14508b);_0x55b473&&_0x55b473[_0x3971e0(0x2ed)]==='motion'&&_0x55b473['location']&&this[_0x3971e0(0x254)]&&deadMan[_0x3971e0(0x2c6)](this,_0x55b473[_0x3971e0(0x2dc)]),_0x45bcfc[_0x3971e0(0x308)]&&(_0x45bcfc['val']===!![]||_0x45bcfc[_0x3971e0(0x308)]===0x1||String(_0x45bcfc[_0x3971e0(0x308)])[_0x3971e0(0x202)]()===_0x3971e0(0x25a))&&(_0x14508b['type']&&(_0x14508b[_0x3971e0(0x2ed)]['includes'](_0x3971e0(0x2fb))||_0x14508b[_0x3971e0(0x2ed)][_0x3971e0(0x220)](_0x3971e0(0x27e))||_0x14508b[_0x3971e0(0x2ed)][_0x3971e0(0x220)](_0x3971e0(0x289)))&&this['analyzeWindowOpening'](_0x14508b)),(_0x14508b[_0x3971e0(0x2ed)]===_0x3971e0(0x1f2)||_0x14508b[_0x3971e0(0x2ed)]===_0x3971e0(0x273))&&automation[_0x3971e0(0x267)](this);}}async['protectAiMemory'](_0x23bd3f){const _0x2ed36c=a0_0xe79581;if(!this[_0x2ed36c(0x2e6)]||Date[_0x2ed36c(0x1e9)]()-this['bootTime']>0x493e0)return;if(!this[_0x2ed36c(0x2e6)]['sources']||!this[_0x2ed36c(0x2e6)][_0x2ed36c(0x24a)])return;try{const _0x4cdc2c=JSON[_0x2ed36c(0x2b5)](_0x23bd3f),_0x9826e9=this['memoryCache'][_0x2ed36c(0x27c)];let _0x47ca7c=![];for(const _0x1cf201 in _0x9826e9){if(_0x9826e9[_0x1cf201]['includes']('AI')&&_0x4cdc2c[_0x1cf201]&&!_0x4cdc2c[_0x1cf201][_0x2ed36c(0x220)]('AI')){_0x47ca7c=!![];break;}}_0x47ca7c&&(this[_0x2ed36c(0x1f4)][_0x2ed36c(0x242)](_0x2ed36c(0x2de)),await this[_0x2ed36c(0x303)](_0x2ed36c(0x21e),{'val':JSON[_0x2ed36c(0x20d)](this[_0x2ed36c(0x2e6)][_0x2ed36c(0x24a)]),'ack':!![]}),await this['setStateAsync'](_0x2ed36c(0x1db),{'val':JSON[_0x2ed36c(0x20d)](this[_0x2ed36c(0x2e6)]['sources']),'ack':!![]}));}catch(_0x2e3ce2){}}async[a0_0xe79581(0x1e4)](_0x1f2f05){const _0x8e7d25=a0_0xe79581;if(typeof _0x1f2f05==='object'&&_0x1f2f05[_0x8e7d25(0x2e9)]){if(_0x1f2f05[_0x8e7d25(0x2a2)]==='checkThermostats')try{const _0x19cfca=await automation[_0x8e7d25(0x219)](this);this[_0x8e7d25(0x29e)](_0x1f2f05['from'],_0x1f2f05[_0x8e7d25(0x2a2)],{'success':!![],'results':_0x19cfca},_0x1f2f05['callback']);}catch(_0x37f455){this['sendTo'](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05[_0x8e7d25(0x2a2)],{'success':![],'error':_0x37f455['message']},_0x1f2f05[_0x8e7d25(0x272)]);}else{if(_0x1f2f05[_0x8e7d25(0x2a2)]===_0x8e7d25(0x22a))try{const {current_temps:_0x59e7df,t_out:_0x33a1cb,targets:_0x16aab5,t_forecast:_0x18b6bf}=_0x1f2f05[_0x8e7d25(0x2e9)],_0x3b8f23=[];let _0x1beca9={};try{const _0x361cd5=await this[_0x8e7d25(0x20b)](_0x8e7d25(0x296));if(_0x361cd5&&_0x361cd5['val']){const _0x2c200e=JSON[_0x8e7d25(0x2b5)](_0x361cd5[_0x8e7d25(0x308)]);_0x1beca9=_0x2c200e['scores']||_0x2c200e;}}catch(_0x10446a){}const _0x34e621=_0x18b6bf!==undefined&&_0x18b6bf!==null?(_0x33a1cb+_0x18b6bf)/0x2:_0x33a1cb;for(const [_0x1cad27,_0x5bbcf7]of Object[_0x8e7d25(0x315)](_0x59e7df)){const _0x27ab25=_0x16aab5[_0x1cad27]||0x15;if(_0x5bbcf7<=_0x27ab25)continue;let _0x375682=_0x1beca9[_0x1cad27]||-0.5;if(_0x375682>=0x0)_0x375682=-0.5;const _0x3e20a2=Math[_0x8e7d25(0x2c5)](_0x375682),_0x3f4584=_0x5bbcf7-_0x27ab25;let _0x44bb42=Math[_0x8e7d25(0x26e)](_0x3f4584/_0x3e20a2*0x3c);const _0x5d7387=_0x5bbcf7-_0x33a1cb,_0x91cdb1=_0x5bbcf7-_0x34e621;if(_0x91cdb1!==0x0&&_0x5d7387!==0x0){const _0x10254a=_0x5d7387/_0x91cdb1;_0x44bb42=Math[_0x8e7d25(0x26e)](_0x44bb42*_0x10254a);}if(_0x44bb42>0xf){if(_0x44bb42>0xf0)_0x44bb42=0xf0;_0x3b8f23[_0x8e7d25(0x1fe)]({'room':_0x1cad27,'minutes_safe':_0x44bb42,'target':_0x27ab25,'current':_0x5bbcf7,'savings_msg':_0x8e7d25(0x2e7)+_0x44bb42+'\x20min\x20ausbleiben.'});}}_0x3b8f23[_0x8e7d25(0x2ef)]((_0x514dba,_0x4c9169)=>_0x4c9169[_0x8e7d25(0x25b)]-_0x514dba[_0x8e7d25(0x25b)]),this[_0x8e7d25(0x29e)](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05[_0x8e7d25(0x2a2)],{'success':!![],'proposals':_0x3b8f23},_0x1f2f05[_0x8e7d25(0x272)]);}catch(_0x39d76a){this[_0x8e7d25(0x29e)](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05[_0x8e7d25(0x2a2)],{'success':![],'error':_0x39d76a[_0x8e7d25(0x2e9)]},_0x1f2f05[_0x8e7d25(0x272)]);}else{if(_0x1f2f05[_0x8e7d25(0x2a2)]===_0x8e7d25(0x28e))try{const _0x471bd0=_0x1f2f05[_0x8e7d25(0x2e9)][_0x8e7d25(0x305)],_0x5e103d='analysis.energy.rlPenalties',_0x40c6b6=await this[_0x8e7d25(0x20b)](_0x5e103d);let _0xdc7960={};if(_0x40c6b6&&_0x40c6b6[_0x8e7d25(0x308)])try{_0xdc7960=JSON['parse'](_0x40c6b6[_0x8e7d25(0x308)]);}catch(_0x57dcee){}_0x471bd0&&_0xdc7960[_0x471bd0]?(delete _0xdc7960[_0x471bd0],await this['setStateAsync'](_0x5e103d,{'val':JSON['stringify'](_0xdc7960),'ack':!![]}),this[_0x8e7d25(0x1f4)][_0x8e7d25(0x242)](_0x8e7d25(0x230)+_0x471bd0+'\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.'),this['sendTo'](_0x1f2f05['from'],_0x1f2f05['command'],{'success':!![]},_0x1f2f05[_0x8e7d25(0x272)])):this[_0x8e7d25(0x29e)](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05[_0x8e7d25(0x2a2)],{'success':![],'error':_0x8e7d25(0x24c)},_0x1f2f05[_0x8e7d25(0x272)]);}catch(_0x1302c7){this[_0x8e7d25(0x29e)](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05[_0x8e7d25(0x2a2)],{'success':![],'error':_0x1302c7['message']},_0x1f2f05[_0x8e7d25(0x272)]);}else{if(_0x1f2f05[_0x8e7d25(0x2a2)]===_0x8e7d25(0x269))await this['setStateAsync'](_0x8e7d25(0x21f),{'val':![],'ack':!![]}),await this[_0x8e7d25(0x303)](_0x8e7d25(0x22c),{'val':'','ack':!![]}),await this[_0x8e7d25(0x303)](_0x8e7d25(0x264),{'val':'','ack':!![]}),this[_0x8e7d25(0x29e)](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05[_0x8e7d25(0x2a2)],{'success':!![]},_0x1f2f05[_0x8e7d25(0x272)]);else{if(_0x1f2f05[_0x8e7d25(0x2a2)]===_0x8e7d25(0x1d9)){const {targetId:_0x44efc4,targetValue:_0x29c717}=_0x1f2f05[_0x8e7d25(0x2e9)];await this[_0x8e7d25(0x303)](_0x8e7d25(0x21f),{'val':!![],'ack':!![]}),await this['setStateAsync'](_0x8e7d25(0x22c),{'val':_0x8e7d25(0x213),'ack':!![]}),await this[_0x8e7d25(0x303)](_0x8e7d25(0x264),{'val':_0x44efc4,'ack':!![]}),await this['setStateAsync'](_0x8e7d25(0x2b0),{'val':String(_0x29c717),'ack':!![]}),this[_0x8e7d25(0x29e)](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05[_0x8e7d25(0x2a2)],{'success':!![]},_0x1f2f05[_0x8e7d25(0x272)]);}else{if(_0x1f2f05[_0x8e7d25(0x2a2)]===_0x8e7d25(0x28b))try{const _0x569033=_0x1f2f05[_0x8e7d25(0x2e9)]['apiKey'];if(!_0x569033)throw new Error(_0x8e7d25(0x270));const _0x5c656f=new GoogleGenerativeAI(_0x569033),_0x536507=_0x5c656f[_0x8e7d25(0x298)]({'model':GEMINI_MODEL}),_0xefe847=await _0x536507[_0x8e7d25(0x2d3)](_0x8e7d25(0x2bb)),_0x3a8855=await _0xefe847[_0x8e7d25(0x281)];if(_0x3a8855['text']())this['sendTo'](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05[_0x8e7d25(0x2a2)],{'success':!![],'message':_0x8e7d25(0x266)},_0x1f2f05[_0x8e7d25(0x272)]);else throw new Error(_0x8e7d25(0x293));}catch(_0x4025b8){this[_0x8e7d25(0x29e)](_0x1f2f05['from'],_0x1f2f05[_0x8e7d25(0x2a2)],{'success':![],'message':_0x4025b8[_0x8e7d25(0x2e9)]},_0x1f2f05['callback']);}else{if(_0x1f2f05['command']==='scanDevices')try{const _0x4c61f0=await scanner[_0x8e7d25(0x2a4)](this,_0x1f2f05[_0x8e7d25(0x2e9)]||{});this[_0x8e7d25(0x29e)](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05[_0x8e7d25(0x2a2)],{'success':!![],'devices':_0x4c61f0},_0x1f2f05[_0x8e7d25(0x272)]);}catch(_0xa0a89a){this[_0x8e7d25(0x29e)](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05[_0x8e7d25(0x2a2)],{'success':![],'error':_0xa0a89a[_0x8e7d25(0x2e9)]},_0x1f2f05[_0x8e7d25(0x272)]);}else{if(_0x1f2f05[_0x8e7d25(0x2a2)]==='updateTopologyMatrix')try{const {matrix:_0x40bf48}=_0x1f2f05[_0x8e7d25(0x2e9)],_0x231f9b=await this[_0x8e7d25(0x20b)](_0x8e7d25(0x2d9));if(_0x231f9b&&_0x231f9b['val']){const _0x4a1ba7=JSON[_0x8e7d25(0x2b5)](_0x231f9b[_0x8e7d25(0x308)]);_0x4a1ba7[_0x8e7d25(0x238)]=_0x40bf48,_0x4a1ba7[_0x8e7d25(0x2dd)]=Date['now'](),await this[_0x8e7d25(0x303)]('analysis.topology.structure',{'val':JSON[_0x8e7d25(0x20d)](_0x4a1ba7),'ack':!![]}),pythonBridge['send'](this,_0x8e7d25(0x2bc),_0x4a1ba7);}this[_0x8e7d25(0x29e)](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05['command'],{'success':!![]},_0x1f2f05['callback']);}catch(_0x27dcf6){this[_0x8e7d25(0x1f4)]['error'](_0x27dcf6);}else{if(_0x1f2f05[_0x8e7d25(0x2a2)]===_0x8e7d25(0x2fe))this[_0x8e7d25(0x29e)](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05[_0x8e7d25(0x2a2)],{'success':!![],'dailyDigests':this[_0x8e7d25(0x250)]||[],'analysisHistory':this[_0x8e7d25(0x321)]||[]},_0x1f2f05[_0x8e7d25(0x272)]);else{if(_0x1f2f05[_0x8e7d25(0x2a2)]===_0x8e7d25(0x223)){const _0x3da7e4=this['dailyDigests']['length'],_0x3cf320=new Array(0x18)[_0x8e7d25(0x1fa)](0x0),_0x206241=new Date()[_0x8e7d25(0x2fd)](0x0,0x0,0x0,0x0);this[_0x8e7d25(0x237)]&&this[_0x8e7d25(0x237)][_0x8e7d25(0x28a)](_0x15d995=>{const _0x5bd7bd=_0x8e7d25;if(_0x15d995[_0x5bd7bd(0x1f8)]>=_0x206241){const _0x5cde33=new Date(_0x15d995[_0x5bd7bd(0x1f8)])[_0x5bd7bd(0x30b)]();if(_0x5cde33>=0x0&&_0x5cde33<0x18)_0x3cf320[_0x5cde33]++;}});let _0x44602d=![],_0x3e4a71='',_0x9c838e='',_0x23c573='';try{const _0x54b620=await this[_0x8e7d25(0x20b)](_0x8e7d25(0x21f));if(_0x54b620&&_0x54b620[_0x8e7d25(0x308)]){_0x44602d=!![];const _0x3356c5=await this[_0x8e7d25(0x20b)](_0x8e7d25(0x22c));_0x3e4a71=_0x3356c5?_0x3356c5[_0x8e7d25(0x308)]:'';const _0xda9c9f=await this[_0x8e7d25(0x20b)]('analysis.automation.targetId');_0x9c838e=_0xda9c9f?_0xda9c9f[_0x8e7d25(0x308)]:'';const _0x9fe89b=await this[_0x8e7d25(0x20b)](_0x8e7d25(0x2b0));_0x23c573=_0x9fe89b?_0x9fe89b[_0x8e7d25(0x308)]:'';}}catch(_0x28dc1b){}const _0x2f347c=await this[_0x8e7d25(0x23e)](),_0x5efe4e=(this['config'][_0x8e7d25(0x24e)]||[])[_0x8e7d25(0x285)](_0x31f587=>_0x31f587[_0x8e7d25(0x244)]),_0x291316=_0x2f347c&&_0x5efe4e;let _0x149388='';try{const _0x2fcdbf=await this[_0x8e7d25(0x20b)](_0x8e7d25(0x2a9));if(_0x2fcdbf&&_0x2fcdbf[_0x8e7d25(0x308)])_0x149388=_0x2fcdbf[_0x8e7d25(0x308)];}catch(_0x939fc4){}this[_0x8e7d25(0x29e)](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05['command'],{'success':!![],'eventHistory':this['eventHistory'][_0x8e7d25(0x2a3)](0x0,0xf),'stats':{'digestCount':_0x3da7e4,'isPresent':this[_0x8e7d25(0x255)],'hourlyActivity':_0x3cf320,'solarActive':_0x291316,'presenceWho':_0x149388},'automation':{'detected':_0x44602d,'description':_0x3e4a71,'targetId':_0x9c838e,'targetValue':_0x23c573}},_0x1f2f05[_0x8e7d25(0x272)]);}else{if(_0x1f2f05[_0x8e7d25(0x2a2)]===_0x8e7d25(0x1e2)){const _0x5c6713=await this['getForeignObjectsAsync'](_0x8e7d25(0x2b9),_0x8e7d25(0x30c)),_0x9d2870=[];if(_0x5c6713)for(const _0x27ae82 in _0x5c6713){const _0x12daec=_0x5c6713[_0x27ae82],_0x30d3fd=(_0x12daec['common']&&typeof _0x12daec['common'][_0x8e7d25(0x252)]===_0x8e7d25(0x312)?_0x12daec[_0x8e7d25(0x31a)][_0x8e7d25(0x252)]['de']:_0x12daec[_0x8e7d25(0x31a)][_0x8e7d25(0x252)])||_0x12daec[_0x8e7d25(0x31a)][_0x8e7d25(0x252)];_0x9d2870[_0x8e7d25(0x1fe)]({'id':_0x27ae82,'name':_0x30d3fd});}const _0xbd708f=await this[_0x8e7d25(0x2ea)](_0x8e7d25(0x1ff),'enum'),_0x5da9f2=[];if(_0xbd708f)for(const _0x4a5d74 in _0xbd708f){const _0x374751=_0xbd708f[_0x4a5d74],_0x48273a=(_0x374751[_0x8e7d25(0x31a)]&&typeof _0x374751[_0x8e7d25(0x31a)][_0x8e7d25(0x252)]===_0x8e7d25(0x312)?_0x374751[_0x8e7d25(0x31a)][_0x8e7d25(0x252)]['de']:_0x374751[_0x8e7d25(0x31a)][_0x8e7d25(0x252)])||_0x4a5d74[_0x8e7d25(0x2c2)]('.')['pop']();_0x5da9f2[_0x8e7d25(0x1fe)](_0x48273a);}this[_0x8e7d25(0x29e)](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05[_0x8e7d25(0x2a2)],{'success':!![],'enums':_0x9d2870,'rooms':_0x5da9f2},_0x1f2f05[_0x8e7d25(0x272)]);}else{if(_0x1f2f05[_0x8e7d25(0x2a2)]===_0x8e7d25(0x20a))try{let _0x41ed02=_0x8e7d25(0x31c),_0x2d3c0c=_0x8e7d25(0x234);if(this['config'][_0x8e7d25(0x324)]){const _0x464b2c=await recorder[_0x8e7d25(0x306)](this);_0x41ed02=_0x464b2c!==null?_0x464b2c+'Â°C':'Daten\x20nicht\x20verfÃ¼gbar';}if(this['config']['calendarInstance']){const _0x3ebeac=await this[_0x8e7d25(0x201)](_0x8e7d25(0x27d)+this[_0x8e7d25(0x2b3)][_0x8e7d25(0x1f0)]);_0x2d3c0c=_0x3ebeac?_0x8e7d25(0x1fc):_0x8e7d25(0x29a);}this[_0x8e7d25(0x29e)](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05[_0x8e7d25(0x2a2)],{'success':!![],'weather':_0x41ed02,'calendar':_0x2d3c0c},_0x1f2f05[_0x8e7d25(0x272)]);}catch(_0x525fe3){this[_0x8e7d25(0x29e)](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05['command'],{'success':![],'error':_0x525fe3[_0x8e7d25(0x2e9)]},_0x1f2f05[_0x8e7d25(0x272)]);}else{if(_0x1f2f05[_0x8e7d25(0x2a2)]===_0x8e7d25(0x215))try{const _0xa77d57=_0x1f2f05[_0x8e7d25(0x2e9)][_0x8e7d25(0x300)],_0x2fc01c=await this[_0x8e7d25(0x235)](_0xa77d57+'.data.table');let _0x37c4d6=[];if(_0x2fc01c&&_0x2fc01c[_0x8e7d25(0x308)]){const _0x16ea7b=JSON[_0x8e7d25(0x2b5)](_0x2fc01c['val']),_0x4231ba=new Set();Array['isArray'](_0x16ea7b)&&_0x16ea7b[_0x8e7d25(0x28a)](_0x2801ac=>{const _0x3a9f05=_0x8e7d25;if(_0x2801ac['_calName'])_0x4231ba['add'](_0x2801ac[_0x3a9f05(0x2b2)]);else{if(_0x2801ac['calendarName'])_0x4231ba['add'](_0x2801ac[_0x3a9f05(0x24d)]);}}),_0x37c4d6=Array['from'](_0x4231ba)[_0x8e7d25(0x2ef)]();}if(_0x37c4d6['length']===0x0)_0x37c4d6=['Standard'];this[_0x8e7d25(0x29e)](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05[_0x8e7d25(0x2a2)],{'success':!![],'names':_0x37c4d6},_0x1f2f05[_0x8e7d25(0x272)]);}catch(_0x57b03c){this[_0x8e7d25(0x29e)](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05[_0x8e7d25(0x2a2)],{'success':![],'error':_0x57b03c['message']},_0x1f2f05[_0x8e7d25(0x272)]);}else{if(_0x1f2f05[_0x8e7d25(0x2a2)]==='testNotification')try{await setup[_0x8e7d25(0x31f)](this,'ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.',![],![]),this[_0x8e7d25(0x29e)](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05[_0x8e7d25(0x2a2)],{'success':!![],'message':'Gesendet'},_0x1f2f05['callback']);}catch(_0x102c07){this[_0x8e7d25(0x1f4)][_0x8e7d25(0x30e)](_0x8e7d25(0x2ec)+_0x102c07[_0x8e7d25(0x2e9)]),this[_0x8e7d25(0x29e)](_0x1f2f05[_0x8e7d25(0x1e1)],_0x1f2f05[_0x8e7d25(0x2a2)],{'success':![],'message':_0x8e7d25(0x204)+_0x102c07[_0x8e7d25(0x2e9)]},_0x1f2f05[_0x8e7d25(0x272)]);}}}}}}}}}}}}}}}}async[a0_0xe79581(0x288)](){const _0x5cd5cb=a0_0xe79581;try{const _0x1463e3=await this['getStateAsync'](setup[_0x5cd5cb(0x2e3)]);_0x1463e3&&_0x1463e3[_0x5cd5cb(0x308)]&&Object[_0x5cd5cb(0x245)](setup[_0x5cd5cb(0x278)])[_0x5cd5cb(0x220)](_0x1463e3[_0x5cd5cb(0x308)])?this[_0x5cd5cb(0x23b)]=_0x1463e3[_0x5cd5cb(0x308)]:(this[_0x5cd5cb(0x23b)]=setup[_0x5cd5cb(0x278)][_0x5cd5cb(0x2cf)],await this[_0x5cd5cb(0x303)](setup[_0x5cd5cb(0x2e3)],{'val':setup[_0x5cd5cb(0x278)]['NORMAL'],'ack':!![]}));}catch(_0x27c782){this[_0x5cd5cb(0x23b)]=setup[_0x5cd5cb(0x278)][_0x5cd5cb(0x2cf)];}}async['checkWifiPresence'](){const _0x27f482=a0_0xe79581;try{const _0x62e5d2=this['config'][_0x27f482(0x1e6)]||[];let _0x2beffb=![];const _0x198b07=[];for(const _0x249662 of _0x62e5d2){try{const _0x40249d=await this[_0x27f482(0x235)](_0x249662);_0x40249d&&(_0x40249d['val']===!![]||_0x40249d[_0x27f482(0x308)]===_0x27f482(0x231)||_0x40249d['val']===0x1)&&(_0x2beffb=!![],_0x198b07['push'](_0x249662));}catch(_0x54dbc8){}}return await this[_0x27f482(0x303)](_0x27f482(0x2a9),{'val':_0x198b07[_0x27f482(0x1ec)](',\x20'),'ack':!![]}),_0x2beffb&&(this['exitTimer']&&(this[_0x27f482(0x1f4)][_0x27f482(0x242)]('WiFi\x20Presence\x20detected.'),recorder[_0x27f482(0x1ea)](this)),!this[_0x27f482(0x255)]&&this[_0x27f482(0x23b)]===setup[_0x27f482(0x278)][_0x27f482(0x2cf)]&&await recorder[_0x27f482(0x295)](this,!![])),_0x2beffb;}catch(_0x1dab00){return![];}}async[a0_0xe79581(0x2d8)](){const _0x4b0e00=a0_0xe79581;this['log'][_0x4b0e00(0x1dc)](_0x4b0e00(0x211)),await aiAgent[_0x4b0e00(0x26a)](this),this[_0x4b0e00(0x1fd)](),this[_0x4b0e00(0x2a7)](),this[_0x4b0e00(0x1f9)]();}async[a0_0xe79581(0x23e)](){const _0x2d0762=a0_0xe79581,_0x4852a9=[_0x2d0762(0x286),'accuweather.0',_0x2d0762(0x316)],_0x2429ae=['forecast.current.weather',_0x2d0762(0x23a),'NextHours.Location_1.Day_1.current.symbol_desc'];for(const _0x1c18ab of _0x4852a9){for(const _0x180b6d of _0x2429ae){try{const _0x220f30=_0x1c18ab+'.'+_0x180b6d,_0x2be36a=await this[_0x2d0762(0x235)](_0x220f30);if(_0x2be36a&&_0x2be36a[_0x2d0762(0x308)]){const _0x41878d=String(_0x2be36a[_0x2d0762(0x308)])['toLowerCase']();if(_0x41878d[_0x2d0762(0x220)](_0x2d0762(0x258))||_0x41878d[_0x2d0762(0x220)](_0x2d0762(0x27b))||_0x41878d[_0x2d0762(0x220)](_0x2d0762(0x301))||_0x41878d[_0x2d0762(0x220)](_0x2d0762(0x256))||_0x41878d[_0x2d0762(0x220)](_0x2d0762(0x2d7)))return!![];}}catch(_0x15b73a){}}}return![];}[a0_0xe79581(0x2a7)](){const _0x14cb6a=a0_0xe79581;if(!this['isProVersion'])return;try{this[_0x14cb6a(0x224)](_0x14cb6a(0x310),(_0x187813,_0x19f1a0)=>{const _0x4b20e3=_0x14cb6a;_0x19f1a0&&_0x19f1a0[_0x4b20e3(0x308)]&&pythonBridge[_0x4b20e3(0x2ce)](this,_0x4b20e3(0x247),{'sequences':JSON['parse'](_0x19f1a0['val'])});});}catch(_0x398a94){}}async['triggerEnergyPrediction'](){const _0x3fe84d=a0_0xe79581;if(!this['isProVersion'])return;try{const _0x5cc767=await recorder[_0x3fe84d(0x306)](this);if(_0x5cc767===null)return;const _0x1f183f={},_0x3542b8={},_0xbc6360=this[_0x3fe84d(0x2b3)][_0x3fe84d(0x24e)]||[];for(const _0x3f56a9 of _0xbc6360){if(_0x3f56a9[_0x3fe84d(0x2ed)]==='temperature'&&_0x3f56a9[_0x3fe84d(0x2dc)]){const _0x497d0e=this[_0x3fe84d(0x327)][_0x3f56a9['id']];if(_0x497d0e!==undefined)_0x1f183f[_0x3f56a9[_0x3fe84d(0x2dc)]]=_0x497d0e;if(_0x3f56a9['isSolar'])_0x3542b8[_0x3f56a9[_0x3fe84d(0x2dc)]]=!![];}}const _0x26cec1=await this[_0x3fe84d(0x23e)]();let _0x620da6={};try{const _0x2d4534=await this[_0x3fe84d(0x20b)]('analysis.energy.warmupTargets');if(_0x2d4534&&_0x2d4534[_0x3fe84d(0x308)])_0x620da6=JSON[_0x3fe84d(0x2b5)](_0x2d4534[_0x3fe84d(0x308)]);}catch(_0x46d4b1){}Object[_0x3fe84d(0x21d)](_0x1f183f)[_0x3fe84d(0x29c)]>0x0&&(pythonBridge[_0x3fe84d(0x2ce)](this,_0x3fe84d(0x271),{'current_temps':_0x1f183f,'t_out':_0x5cc767,'is_sunny':_0x26cec1,'solar_flags':_0x3542b8,'warmup_targets':_0x620da6}),pythonBridge['send'](this,_0x3fe84d(0x25c),{'current_temps':_0x1f183f,'t_out':_0x5cc767,'targets':{}}));}catch(_0x41ce65){}}['updateHealthVector'](){const _0x2a8598=a0_0xe79581;if(!this[_0x2a8598(0x1de)]||this['rawEventLog'][_0x2a8598(0x29c)]===0x0)return;const _0x281e8a=new Array(0x60)[_0x2a8598(0x1fa)](0x0),_0x4786f0=new Date()[_0x2a8598(0x2fd)](0x0,0x0,0x0,0x0);this[_0x2a8598(0x1de)]['forEach'](_0x16d607=>{const _0x4b5848=_0x2a8598,_0x5794f3=new Date(_0x16d607[_0x4b5848(0x1f8)]);if(_0x5794f3[_0x4b5848(0x314)]()>=_0x4786f0){const _0x2750af=_0x5794f3[_0x4b5848(0x30b)](),_0x1b0a7a=_0x5794f3[_0x4b5848(0x221)](),_0x5c9da9=_0x2750af*0x4+Math['floor'](_0x1b0a7a/0xf);if(_0x5c9da9>=0x0&&_0x5c9da9<0x60)_0x281e8a[_0x5c9da9]++;}}),this[_0x2a8598(0x303)]('analysis.health.todayVector',{'val':JSON['stringify'](_0x281e8a),'ack':!![]});}[a0_0xe79581(0x203)](){const _0x3a6e65=a0_0xe79581;if(!this[_0x3a6e65(0x250)]||this[_0x3a6e65(0x250)]['length']<0x2)return;const _0x5506e7=this[_0x3a6e65(0x250)][_0x3a6e65(0x2e5)](_0x744d2=>{const _0x5617f1=_0x3a6e65,_0xc05790=(_0x744d2[_0x5617f1(0x307)]||'')[_0x5617f1(0x202)]();return ACTIVITY_LEVEL_MAP[_0xc05790]||0x32;});pythonBridge[_0x3a6e65(0x2ce)](this,'ANALYZE_TREND',{'values':_0x5506e7,'tag':_0x3a6e65(0x2bd)});}async[a0_0xe79581(0x205)](_0x433aa8){const _0x57eedc=a0_0xe79581;if(_0x433aa8==null||typeof _0x433aa8!==_0x57eedc(0x322))return;const _0xc2264b=Date[_0x57eedc(0x1e9)]();this[_0x57eedc(0x2d6)][_0x57eedc(0x1fe)]({'ts':_0xc2264b,'val':_0x433aa8}),this[_0x57eedc(0x2d6)]=this[_0x57eedc(0x2d6)][_0x57eedc(0x2fc)](_0x337869=>_0xc2264b-_0x337869['ts']<0x1388);if(this[_0x57eedc(0x280)])return;if(this[_0x57eedc(0x2b3)][_0x57eedc(0x283)]){const _0x441384=await this[_0x57eedc(0x235)](this[_0x57eedc(0x2b3)]['infrasoundArmingId']);if(_0x441384&&!_0x441384['val'])return;}const _0x105d16=this[_0x57eedc(0x2b3)][_0x57eedc(0x20e)]||0.04;if(Math[_0x57eedc(0x2c5)](_0x433aa8)>=_0x105d16){this['log'][_0x57eedc(0x212)]('[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20'+_0x433aa8+_0x57eedc(0x31d)+_0x105d16+')'),await this['setStateAsync'](_0x57eedc(0x2b8),{'val':!![],'ack':!![]});const _0x343cbf=this[_0x57eedc(0x255)];_0x343cbf?(this[_0x57eedc(0x1f4)][_0x57eedc(0x242)](_0x57eedc(0x326)),this[_0x57eedc(0x2f5)](_0x433aa8,_0x57eedc(0x232))):(this['triggerInfrasoundCorrelation'](_0x433aa8,_0x57eedc(0x265)),this[_0x57eedc(0x31f)](_0x57eedc(0x1ee)+_0x433aa8+_0x57eedc(0x1e8))),this[_0x57eedc(0x280)]=!![],setTimeout(()=>{const _0x12ffc4=_0x57eedc;this[_0x12ffc4(0x280)]=![];},0x2710);}}async[a0_0xe79581(0x2f5)](_0x73fdd8,_0x4d22f7='ALARM'){const _0x24f2e9=a0_0xe79581,_0x3dd38c=Date[_0x24f2e9(0x1e9)](),_0x136fdd=this[_0x24f2e9(0x2b3)][_0x24f2e9(0x24e)]||[];setTimeout(async()=>{const _0x1b5411=_0x24f2e9;let _0x2c8dcd=null,_0x4fce8f='Keine\x20Sensor-AktivitÃ¤t';const _0x5c9177=[],_0x303a0a=_0x136fdd[_0x1b5411(0x2fc)](_0x3b3a69=>_0x3b3a69[_0x1b5411(0x2ed)]&&(_0x3b3a69[_0x1b5411(0x2ed)][_0x1b5411(0x220)](_0x1b5411(0x2fb))||_0x3b3a69[_0x1b5411(0x2ed)]['includes'](_0x1b5411(0x27e))||_0x3b3a69[_0x1b5411(0x2ed)][_0x1b5411(0x220)](_0x1b5411(0x289))||_0x3b3a69[_0x1b5411(0x2ed)][_0x1b5411(0x220)]('reed'))||_0x3b3a69[_0x1b5411(0x2a5)]&&(_0x3b3a69[_0x1b5411(0x2a5)][_0x1b5411(0x220)](_0x1b5411(0x2d4))||_0x3b3a69[_0x1b5411(0x2a5)][_0x1b5411(0x220)](_0x1b5411(0x253))));for(const _0x35c486 of _0x303a0a){try{const _0x2cec82=await this[_0x1b5411(0x235)](_0x35c486['id']);if(_0x2cec82){if(_0x2cec82['ts']>=_0x3dd38c-0x7d0){_0x2c8dcd=_0x35c486[_0x1b5411(0x252)]||_0x35c486['id'],_0x4fce8f=_0x1b5411(0x2af)+_0x2c8dcd;break;}}}catch(_0x23b612){}}const _0xedb7d6={'timestamp':_0x3dd38c,'pressure':_0x73fdd8,'isMatch':!!_0x2c8dcd,'explanation':_0x4fce8f,'type':_0x4d22f7};await this[_0x1b5411(0x31b)](_0xedb7d6),this[_0x1b5411(0x1f4)][_0x1b5411(0x242)]('[Forensics]\x20Infrasound\x20Event\x20correlated:\x20'+(!!_0x2c8dcd?_0x1b5411(0x284):_0x1b5411(0x32b)));},0x1388);}async[a0_0xe79581(0x309)](_0x2f3643){const _0x257888=a0_0xe79581,_0x1a9fb7=Date[_0x257888(0x1e9)](),_0x1282db=_0x2f3643['name']||_0x2f3643['id'][_0x257888(0x2c2)]('.')[_0x257888(0x26f)]();let _0x8e4521=0x0;setTimeout(async()=>{const _0x2269d3=_0x257888;this['pressureBuffer']['forEach'](_0x523acf=>{const _0x2fdc42=a0_0x3a73;_0x523acf['ts']>=_0x1a9fb7-0xfa0&&_0x523acf['ts']<=_0x1a9fb7+0x3e8&&(Math['abs'](_0x523acf[_0x2fdc42(0x308)])>Math[_0x2fdc42(0x2c5)](_0x8e4521)&&(_0x8e4521=_0x523acf[_0x2fdc42(0x308)]));});const _0x3bbb33=this['config'][_0x2269d3(0x20e)]||0.04,_0x2e7469=Math[_0x2269d3(0x2c5)](_0x8e4521)>=_0x3bbb33,_0x43957e={'timestamp':_0x1a9fb7,'pressure':_0x8e4521,'isMatch':_0x2e7469,'explanation':_0x2269d3(0x2f9)+_0x1282db,'type':_0x2269d3(0x262)};await this['appendToLog'](_0x43957e),this[_0x2269d3(0x1f4)]['debug'](_0x2269d3(0x2f4)+_0x1282db+_0x2269d3(0x2f1)+_0x8e4521[_0x2269d3(0x2c8)](0x4)+'\x20hPa\x20(Threshold:\x20'+_0x3bbb33+')');},0x1f4);}async[a0_0xe79581(0x31b)](_0x165a43){const _0x116b59=a0_0xe79581;try{const _0x1f39d0=await this[_0x116b59(0x20b)]('analysis.security.infrasoundLog');let _0x54239c=[];if(_0x1f39d0&&_0x1f39d0[_0x116b59(0x308)])_0x54239c=JSON[_0x116b59(0x2b5)](_0x1f39d0[_0x116b59(0x308)]);_0x54239c[_0x116b59(0x260)](_0x165a43);if(_0x54239c[_0x116b59(0x29c)]>0x14)_0x54239c=_0x54239c[_0x116b59(0x2a3)](0x0,0x14);await this[_0x116b59(0x303)]('analysis.security.infrasoundLog',{'val':JSON[_0x116b59(0x20d)](_0x54239c),'ack':!![]});}catch(_0x44a20f){this[_0x116b59(0x1f4)][_0x116b59(0x30e)]('[Forensics]\x20Save\x20failed:\x20'+_0x44a20f[_0x116b59(0x2e9)]);}}[a0_0xe79581(0x31f)](_0x3f5c92){const _0x1217bc=a0_0xe79581;this[_0x1217bc(0x2b3)][_0x1217bc(0x2d5)]&&this[_0x1217bc(0x2b3)]['notifyPushoverInstance']&&this['sendTo'](this[_0x1217bc(0x2b3)][_0x1217bc(0x228)],_0x1217bc(0x2ce),{'message':_0x3f5c92,'title':_0x1217bc(0x21c),'priority':0x1}),this[_0x1217bc(0x2b3)][_0x1217bc(0x319)]&&this[_0x1217bc(0x2b3)][_0x1217bc(0x2be)]&&this[_0x1217bc(0x29e)](this['config'][_0x1217bc(0x2be)],_0x1217bc(0x2ce),{'text':_0x3f5c92});}}if(require[a0_0xe79581(0x28d)]!==module)module[a0_0xe79581(0x1f1)]=_0x5d4b58=>new CogniLiving(_0x5d4b58);else new CogniLiving();