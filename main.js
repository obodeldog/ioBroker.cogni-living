const a0_0x4a9de5=a0_0x4b7c;(function(_0x45b91c,_0x289a2e){const _0x5d03f4=a0_0x4b7c,_0x4b511b=_0x45b91c();while(!![]){try{const _0x280c82=parseInt(_0x5d03f4(0x1af))/0x1*(parseInt(_0x5d03f4(0x196))/0x2)+-parseInt(_0x5d03f4(0x19f))/0x3+parseInt(_0x5d03f4(0x1a5))/0x4+-parseInt(_0x5d03f4(0xfa))/0x5*(-parseInt(_0x5d03f4(0x1e4))/0x6)+-parseInt(_0x5d03f4(0x271))/0x7+parseInt(_0x5d03f4(0x252))/0x8*(-parseInt(_0x5d03f4(0x19a))/0x9)+-parseInt(_0x5d03f4(0x113))/0xa*(-parseInt(_0x5d03f4(0x218))/0xb);if(_0x280c82===_0x289a2e)break;else _0x4b511b['push'](_0x4b511b['shift']());}catch(_0x215fc5){_0x4b511b['push'](_0x4b511b['shift']());}}}(a0_0x30fa,0xe9df3));const a0_0x540678=(function(){let _0x5e181d=!![];return function(_0x24231b,_0x55ed13){const _0x42738c=_0x5e181d?function(){const _0x5b3d38=a0_0x4b7c;if(_0x55ed13){const _0x41bcf2=_0x55ed13[_0x5b3d38(0x136)](_0x24231b,arguments);return _0x55ed13=null,_0x41bcf2;}}:function(){};return _0x5e181d=![],_0x42738c;};}()),a0_0x46fb89=a0_0x540678(this,function(){const _0x4a81c6=a0_0x4b7c;return a0_0x46fb89['toString']()[_0x4a81c6(0x1bf)](_0x4a81c6(0xf8))[_0x4a81c6(0x1d1)]()[_0x4a81c6(0x14a)](a0_0x46fb89)[_0x4a81c6(0x1bf)](_0x4a81c6(0xf8));});function a0_0x30fa(){const _0x3f9501=['Drift\x20Status','Comfort\x20Summary','6JnlZLx','automationProposal','lastAlertState','setupDriftAnalysisScheduler','cogni-living','@iobroker/adapter-core','loadSystemMode','.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','values','comment','bind','Last\x20raw\x20event','lampe','Success','1.\x20ANALYSE:\x20Bewerte\x20Sensor-Events.\x20deviation=\x27N/A\x27.','checkLicense','\x20was\x20FALSE.\x20Reason:\x20','Baseline\x20Status','selectedFunctionIds','callback','update','string','Deaktiviert\x20(Pro-Feature)','[Test]\x20Notification','driftAnalysisTimer','aiPersona','openweathermap.','wetter','text.alarm','resetAnalysisStates','fenster','occupancy','message','getForeignObjectAsync','city','genAI','Drift\x20Analysis','.level','material.','endsWith','trim','party','.bri','_score','checkSystemObjects','PRIORIT√ÑT:\x20Gesundheit\x20und\x20Sicherheit\x20f√ºr\x20Senioren\x20(AAL).\x20Erkenne\x20Inaktivit√§t,\x20potenzielle\x20St√ºrze\x20(indirekt),\x20ungew√∂hnliche\x20n√§chtliche\x20Aktivit√§t.\x20Komfort\x20ist\x20sekund√§r.','lights','type','PARTY','System\x20Status\x20&\x20Control','Feedback\x20Log','PRO-','37433AAoGSr','wohn','updateBaselineStatus','analysis.analysisHistory','Wohnzimmer','LTM','detectionState','includes','STANDORT:\x20Lat\x20','pop','getEnums','Party','livingContext','INSTALL_TEST','split','archetype','systemConfig','send','role','native','[TEST]\x20','\x20min).','üìç\x20Standort\x20geladen:\x20','getForeignObjectsAsync','modeResetJob','slice','runGeminiAnalysis','\x0a\x0aUSER\x20FEEDBACK\x20/\x20LERN-CONTEXT\x20(Vermeide\x20diese\x20Fehler):\x0a','value.humidity','LOW_BAT','analysis.comfortSuggestion','normal','last_seen','system.','val','manufacturer','analysis.deviationFromBaseline','N/A','Licht','notifyEmailInstance','common','events.lastEvent','models/gemini-flash-latest','getForeignStateAsync','vacation','notifyEmailRecipient','Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','text','notifyPushoverInstance','fire','k√ºche','Daily\x20Digests','sensor.motion','.on','scanDevices','name','\x20Tage)','eventHistory','8544weoPeY','bad','info','licenseKey','ltmLtbWindowDays','testNotification','Trigger\x20Digest','ON_TIME','Badezimmer','Bewegung','createAllObjects','VIRTUAL_CHANNEL','alertReason','dailyDigests','analysisTimer','extendObjectAsync','flot.','axios','\x20f√ºr\x20Event\x20','state','saveDailyDigests','LTM.dailyDigests','cancel','geminiApiKey','Raw\x20Log','stringify','analysis.feedbackHistory','signal','presence','link_quality','setStateAsync','10188801vPAXYy','runBaselineDriftAnalysis','Drift\x20Details','ready','yr.','UNREACH','1.\x20ANALYSE\x20&\x20DEVIATION:\x20Vergleiche\x20Events\x20mit\x20STB.\x20deviation=\x27none|slight|significant|critical\x27.','wind','Deviation','uuid','analysis.activitySummary','leuchte','scanForDevices',',\x20Lon\x20','STB\x20(Recent\x20History):\x20','some','NORMAL','system.mode','weather','isProVersion','\x0a\x0aA\x20(STB):\x0a','getGenerativeModel','longitude','notifyPushoverRecipient','CONNECTION','checkLtmDriftObjects','setupLtmScheduler','Analysis\x20Error:\x20','now','find','json','createDailyDigest','rating','subscribeStates','system.config','hue','status','COMBINED_PARAMETER','last\x20action','Gemini\x20Init\x20Error:\x20','activity','Adapter','Starting\x20Smart\x20Scan\x20with\x20filters:\x20','FAULT','(((.+)+)+)+$','üö®\x20Alarm:\x20','7078875gzvzaA','getLtmData','Last\x20Result','toUpperCase','submitFeedback','Starting\x20Autopilot\x20(','process','Temperatur','Comfort\x20Suggestion','colormode','griff','timestamp','isAlert','N/A\x20(No\x20Activity)','from','sensorLastValues','Gemini\x20AI\x20initialized.','ltmJob','Feedback\x20gespeichert:\x20','error','0\x203\x20*\x20*\x20*','analysis.trigger','onStateChange','sendNotification','uniqueid','2310SzWJOt','notifySignalInstance','DUTY_CYCLE','history.','getSystemUUID','Gemini\x20API\x20Key\x20missing.\x20AI\x20features\x20disabled.','version','Unbekannt','AI\x20Alert\x20Status','currentSystemMode','accuweather.','loadDailyDigests','pr√§senz','diele','triggerDailyDigest','indicator','Normal','minDaysForBaseline','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.\x20Erwarte\x20hohe\x20Aktivit√§tsniveaus.','testApiKey','ALARM','command','historyId','Activity\x20Summary','temperatur','description','Last\x20Check','generateContent','ltmStbWindowDays','members','patternDetected','No\x20Key','temperature','onUnload','sendToAsync','apply','connection','details','subscribeForeignStatesAsync','Trigger\x20Analysis','DIRECTION','Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung\x20f√ºr\x20einen\x20einzelnen\x20Bewohner.\x20Aktivit√§tsmuster\x20sind\x20flexibel.','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20AUTOMATION:\x20patternDetected=true/false.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20EVENTS:\x20','substring','Sending\x20notification:\x20\x22','notifyWhatsappRecipient','daswetter.','vis.','notifySignalRecipient','notifyPushoverEnabled','saveRawEventLog','2-digit','LTM.baselineStatus','analysis.lastResult','max','constructor','response','unload','Fenster/T√ºr','productname','write','PROCESS','enum.rooms.*','.state','Lernphase\x20(','button','analysis.isAlert','LTM.processingStatus','getStateAsync','Subscribing\x20to\x20','No\x20comment','Aktiv\x20(','history','notifyTelegramEnabled','-\x20User\x20Feedback:\x20Alarm\x20\x22','onMessage','RSSI','de-DE','doors','toLocaleTimeString','systemUUID','startsWith','sendTo','Schalter/Licht','baselineDrift','value.temperature','notifyTelegramRecipient','analysisHistory','ü§ñ\x20AI\x20Prompt\x20Context\x20-\x20Time:\x20','saveFeedback','toLowerCase','rauch','\x22\x20at\x20','loadRawEventLog','main','schlaf','latitude','lastCheck','devices','driftDetails','info.','apiKey','updateAnalysisHistory','replace','join','N/A\x20(Learning)','\x0a\x20\x20\x20\x20\x20\x20\x20\x20MODUS:\x20','min','rawEventLog','deviationFromBaseline','feedbackHistory','Alert\x20Reason','ack','@google/generative-ai','unknown','Processing\x20Status','activityLevel','Alert','date','splice','LTM.triggerDailyDigest','notifyWhatsappEnabled','t√ºr','long','sensor.window','uuid-error','log','precip','false_positive','setupModeResetScheduler','length','122Rwczdm','OPERATING_VOLTAGE','summary','Gast','1611lEQNED','modelid','TEST-PRO-KEY','notifyTelegramInstance','config','2263227CSfSWr','toISOString','LTM.driftAnalysis.lastCheck','analysis.alertReason','alert','Urlaub','601560UVcxHm','channel','namespace','pressure','reverse','number','scriptEnabled','Error:\x20','System\x20Mode','forecast','16505JBBYbB','Running\x20in\x20FREE\x20mode\x20(LTM\x20&\x20Automation\x20disabled).','push','system.meta.uuid','mode','Schlafzimmer','GUEST','notifyEmailEnabled','weatherunderground.','test','motion','checkLtmObjects','geminiModel','warn','scheduleJob','analysisInterval','search','mac\x20address','ROLLE:\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20KONTEXT:\x20','unshift','\x20events','analysis.automation.description','Rauchmelder','shutter_contact','Description','PRIORIT√ÑT:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungew√∂hnliche\x20Anwesenheit\x20bei\x20Abwesenheit\x20der\x20Bewohner\x20oder\x20Fehlfunktionen,\x20die\x20auf\x20ein\x20Sicherheitsrisiko\x20hindeuten.','setState','Pro\x20Feature','enum.functions.*','boolean','rain','javascript.0.script','ROLLE:\x20Data\x20Scientist.\x20VERGLEICHE:\x20Dataset\x20A\x20(Recent)\x20vs\x20B\x20(Established).\x20ZIEL:\x20Erkenne\x20Drift.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aB\x20(LTB):\x0a','indicator.alarm','toString','LTM.driftAnalysis','battery','application/json','analysis.automation.patternDetected','stateChange','Pattern\x20Detected','parse','analysis.automation.suggestedAction','object','Skipped\x20(No\x20AI\x20or\x20Data)','STICKY_UNREACH',',\x20Location:\x20',').\x20Nutze\x20dies\x20f√ºr\x20Sonnenstand/Lichtverh√§ltnisse.','setObjectNotExistsAsync','VACATION','.brightness'];a0_0x30fa=function(){return _0x3f9501;};return a0_0x30fa();}a0_0x46fb89();'use strict';function a0_0x4b7c(_0xdd21f,_0x13b429){const _0x415d22=a0_0x30fa();return a0_0x4b7c=function(_0x46fb89,_0x540678){_0x46fb89=_0x46fb89-0xe6;let _0x30fa82=_0x415d22[_0x46fb89];return _0x30fa82;},a0_0x4b7c(_0xdd21f,_0x13b429);}const utils=require(a0_0x4a9de5(0x1e9)),{GoogleGenerativeAI}=require(a0_0x4a9de5(0x184)),schedule=require('node-schedule'),axios=require(a0_0x4a9de5(0x263)),HISTORY_MAX_SIZE=0x32,FEEDBACK_MAX_SIZE=0x14,GEMINI_MODEL=a0_0x4a9de5(0x242),ANALYSIS_HISTORY_MAX_SIZE=0x64,RAW_LOG_MAX_SIZE=0x5dc,DAILY_DIGEST_MAX_SIZE_LIMIT=0xb4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,LTM_SCHEDULE=a0_0x4a9de5(0x10e),LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0x4a9de5(0x267),LTM_DP_STATUS=a0_0x4a9de5(0x156),LTM_DP_TRIGGER_DIGEST=a0_0x4a9de5(0x18b),LTM_DP_BASELINE_STATUS=a0_0x4a9de5(0x147),LTM_DP_DRIFT_CHANNEL=a0_0x4a9de5(0x1d2),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x4a9de5(0x1a1),SYSTEM_DP_MODE=a0_0x4a9de5(0x282),MODE_RESET_SCHEDULE='0\x204\x20*\x20*\x20*',SYSTEM_MODES={'NORMAL':a0_0x4a9de5(0x237),'VACATION':a0_0x4a9de5(0x244),'PARTY':a0_0x4a9de5(0x20d),'GUEST':'guest'},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x4a9de5(0x214)],SYSTEM_MODES[a0_0x4a9de5(0x1b5)]],PERSONA_MAPPING={'generic':a0_0x4a9de5(0x246),'senior_aal':a0_0x4a9de5(0x211),'family':a0_0x4a9de5(0x125),'single_comfort':a0_0x4a9de5(0x13c),'security':a0_0x4a9de5(0x1c8)};class CogniLiving extends utils[a0_0x4a9de5(0xf5)]{constructor(_0x301228){const _0x31bcd6=a0_0x4a9de5;super({..._0x301228,'name':_0x31bcd6(0x1e8)}),this['eventHistory']=[],this[_0x31bcd6(0x16a)]=[],this['feedbackHistory']=[],this['rawEventLog']=[],this[_0x31bcd6(0x25f)]=[],this['sensorLastValues']={},this[_0x31bcd6(0x228)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x31bcd6(0x207)]=null,this[_0x31bcd6(0x1bb)]=null,this['currentSystemMode']=SYSTEM_MODES[_0x31bcd6(0x281)],this[_0x31bcd6(0x284)]=![],this['lastAlertState']=![],this[_0x31bcd6(0x163)]=_0x31bcd6(0x185),this[_0x31bcd6(0x260)]=null,this[_0x31bcd6(0x10b)]=null,this[_0x31bcd6(0x230)]=null,this[_0x31bcd6(0x1fc)]=null,this['on'](_0x31bcd6(0x274),this['onReady'][_0x31bcd6(0x1ee)](this)),this['on'](_0x31bcd6(0x1d6),this[_0x31bcd6(0x110)][_0x31bcd6(0x1ee)](this)),this['on'](_0x31bcd6(0x14c),this[_0x31bcd6(0x134)][_0x31bcd6(0x1ee)](this)),this['on'](_0x31bcd6(0x204),this[_0x31bcd6(0x15e)]['bind'](this));}async['onReady'](){const _0x2a31b8=a0_0x4a9de5,_0x298709=this['version']||_0x2a31b8(0x185);this[_0x2a31b8(0x191)][_0x2a31b8(0x254)]('cogni-living\x20adapter\x20starting\x20(v'+_0x298709+')'),this[_0x2a31b8(0x19e)][_0x2a31b8(0x255)]=this[_0x2a31b8(0x19e)]['licenseKey']||'',this[_0x2a31b8(0x284)]=await this[_0x2a31b8(0x1f3)](this[_0x2a31b8(0x19e)][_0x2a31b8(0x255)]);this['isProVersion']?this['log'][_0x2a31b8(0x254)]('‚úÖ\x20License\x20check\x20successful:\x20PRO\x20features\x20enabled.'):this[_0x2a31b8(0x191)][_0x2a31b8(0x254)](_0x2a31b8(0x1b0));if(!this[_0x2a31b8(0x19e)][_0x2a31b8(0x124)]||this['config']['minDaysForBaseline']<0x1)this[_0x2a31b8(0x19e)][_0x2a31b8(0x124)]=0x7;if(!this[_0x2a31b8(0x19e)][_0x2a31b8(0x12f)]||this['config'][_0x2a31b8(0x12f)]<0x1)this[_0x2a31b8(0x19e)]['ltmStbWindowDays']=0xe;if(!this[_0x2a31b8(0x19e)][_0x2a31b8(0x256)]||this[_0x2a31b8(0x19e)][_0x2a31b8(0x256)]<0x1e)this[_0x2a31b8(0x19e)]['ltmLtbWindowDays']=0x3c;this['config']['ltmLtbWindowDays']=Math[_0x2a31b8(0x17e)](Math[_0x2a31b8(0x149)](this['config'][_0x2a31b8(0x256)],this[_0x2a31b8(0x19e)][_0x2a31b8(0x12f)]+0xe),DAILY_DIGEST_MAX_SIZE_LIMIT);try{const _0x10e2ca=await this[_0x2a31b8(0x205)](_0x2a31b8(0xee));_0x10e2ca&&_0x10e2ca['common']&&(this['systemConfig']['latitude']=_0x10e2ca[_0x2a31b8(0x240)][_0x2a31b8(0x173)]||0x0,this[_0x2a31b8(0x228)][_0x2a31b8(0x287)]=_0x10e2ca[_0x2a31b8(0x240)]['longitude']||0x0,this[_0x2a31b8(0x228)][_0x2a31b8(0x206)]=_0x10e2ca[_0x2a31b8(0x240)][_0x2a31b8(0x206)]||'',this['log']['info'](_0x2a31b8(0x22e)+(this[_0x2a31b8(0x228)][_0x2a31b8(0x206)]||'Unbekannt')+'\x20('+this[_0x2a31b8(0x228)][_0x2a31b8(0x173)]+',\x20'+this[_0x2a31b8(0x228)][_0x2a31b8(0x287)]+')'));}catch(_0xb770a8){this[_0x2a31b8(0x191)][_0x2a31b8(0x1bc)]('Konnte\x20System-Standort\x20nicht\x20laden.');}if(this[_0x2a31b8(0x19e)][_0x2a31b8(0x269)])try{this[_0x2a31b8(0x207)]=new GoogleGenerativeAI(this[_0x2a31b8(0x19e)]['geminiApiKey']),this['geminiModel']=this['genAI'][_0x2a31b8(0x286)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x2a31b8(0x1d4)}}),this['log']['info'](_0x2a31b8(0x10a));}catch(_0x41c0b2){this[_0x2a31b8(0x191)][_0x2a31b8(0x10d)](_0x2a31b8(0xf3)+_0x41c0b2['message']);}else this[_0x2a31b8(0x191)][_0x2a31b8(0x1bc)](_0x2a31b8(0x118));await this[_0x2a31b8(0x25c)](),await this[_0x2a31b8(0x1ea)]();const _0x4b24ca=await this[_0x2a31b8(0x157)](_0x2a31b8(0x155));this[_0x2a31b8(0x1e6)]=_0x4b24ca?!!_0x4b24ca[_0x2a31b8(0x23a)]:![];try{const _0x2568ef=await this[_0x2a31b8(0x157)](_0x2a31b8(0x21b));if(_0x2568ef&&_0x2568ef[_0x2a31b8(0x23a)])this[_0x2a31b8(0x16a)]=JSON[_0x2a31b8(0x1d8)](_0x2568ef['val'][_0x2a31b8(0x1d1)]());}catch(_0x1f7fa6){this[_0x2a31b8(0x16a)]=[];}try{const _0x1a3aca=await this[_0x2a31b8(0x157)](_0x2a31b8(0x26c));if(_0x1a3aca&&_0x1a3aca['val'])this['feedbackHistory']=JSON[_0x2a31b8(0x1d8)](_0x1a3aca[_0x2a31b8(0x23a)]['toString']());}catch(_0x5d97c8){this[_0x2a31b8(0x181)]=[];}await this[_0x2a31b8(0x170)](),await this[_0x2a31b8(0x11e)](),this['subscribeStates'](_0x2a31b8(0x10f)),this['subscribeStates'](LTM_DP_TRIGGER_DIGEST),this[_0x2a31b8(0xed)](SYSTEM_DP_MODE);const _0x132156=this['config'][_0x2a31b8(0x175)];if(_0x132156&&_0x132156[_0x2a31b8(0x195)]>0x0){this[_0x2a31b8(0x191)][_0x2a31b8(0x254)](_0x2a31b8(0x158)+_0x132156['length']+'\x20sensors...');for(const _0x385464 of _0x132156){if(_0x385464['id']){await this[_0x2a31b8(0x139)](_0x385464['id']);try{const _0x5dec6d=await this[_0x2a31b8(0x243)](_0x385464['id']);if(_0x5dec6d)this['sensorLastValues'][_0x385464['id']]=_0x5dec6d['val'];}catch(_0x100c0a){}}}}if(this[_0x2a31b8(0x260)])clearInterval(this[_0x2a31b8(0x260)]);const _0x4b5cc4=this['config'][_0x2a31b8(0x1be)]||0xf;_0x4b5cc4>0x0&&(this[_0x2a31b8(0x191)][_0x2a31b8(0x254)](_0x2a31b8(0xff)+_0x4b5cc4+_0x2a31b8(0x22d)),this[_0x2a31b8(0x260)]=setInterval(()=>this['runAutopilot'](),_0x4b5cc4*0x3c*0x3e8)),this[_0x2a31b8(0xe6)](),this[_0x2a31b8(0x194)](),this[_0x2a31b8(0x1e7)]();}async['scanForDevices'](_0x1c40ba={}){const _0x49ba0f=a0_0x4a9de5;this[_0x49ba0f(0x191)]['info'](_0x49ba0f(0xf6)+JSON['stringify'](_0x1c40ba));const _0x2af0d0=[],_0xcf53ee=_0x1c40ba[_0x49ba0f(0x1b9)]!==![],_0x34f1c4=_0x1c40ba[_0x49ba0f(0x161)]!==![],_0x3cac81=_0x1c40ba[_0x49ba0f(0x212)]!==![],_0x16399a=_0x1c40ba[_0x49ba0f(0x133)]===!![],_0x59f498=_0x1c40ba[_0x49ba0f(0x283)]===!![],_0x508227=_0x1c40ba[_0x49ba0f(0x1f6)]||[],_0x1bafb6=await this['getForeignObjectsAsync'](_0x49ba0f(0x151),'enum'),_0x430f33=await this[_0x49ba0f(0x22f)](_0x49ba0f(0x1cb),'enum'),_0x2b6b81={},_0x150f8a={},_0x24065d={},_0x234719=(_0x203705,_0x1e1902,_0x401edb=![])=>{const _0x1aacad=_0x49ba0f;if(!_0x203705)return;for(const _0x426c41 in _0x203705){const _0x27222f=_0x203705[_0x426c41];if(_0x27222f&&_0x27222f[_0x1aacad(0x240)]&&_0x27222f[_0x1aacad(0x240)][_0x1aacad(0x130)]){const _0x5d4e39=(typeof _0x27222f['common']['name']===_0x1aacad(0x1da)?_0x27222f[_0x1aacad(0x240)][_0x1aacad(0x24f)]['de']:_0x27222f[_0x1aacad(0x240)][_0x1aacad(0x24f)])||_0x27222f['common']['name'];if(_0x401edb)_0x24065d[_0x426c41]=_0x5d4e39;for(const _0x2dbef9 of _0x27222f[_0x1aacad(0x240)]['members']){if(_0x401edb){if(!_0x1e1902[_0x2dbef9])_0x1e1902[_0x2dbef9]=[];_0x1e1902[_0x2dbef9][_0x1aacad(0x1b1)](_0x426c41);}else _0x1e1902[_0x2dbef9]=_0x5d4e39;}}}};_0x234719(_0x1bafb6,_0x2b6b81),_0x234719(_0x430f33,_0x150f8a,!![]);const _0x1ff993=await this['getForeignObjectsAsync']('*','state'),_0x32b806=[_0x49ba0f(0x276),'LOWBAT',_0x49ba0f(0x235),_0x49ba0f(0x15f),'ERROR',_0x49ba0f(0xf7),'SABOTAGE',_0x49ba0f(0x127),'CONFIG_PENDING','DUTYCYCLE',_0x49ba0f(0x115),'WORKING',_0x49ba0f(0x13b),_0x49ba0f(0x1dc),_0x49ba0f(0x197),_0x49ba0f(0x25d),_0x49ba0f(0x225),_0x49ba0f(0xf1),'WEEK_PROGRAM',_0x49ba0f(0x259),'SECTION','ERROR_CODE',_0x49ba0f(0x150),'AES_KEY',_0x49ba0f(0x289),'reachable',_0x49ba0f(0x26f),_0x49ba0f(0x1d3),_0x49ba0f(0x1f8),'firmware',_0x49ba0f(0x119),_0x49ba0f(0x137),_0x49ba0f(0x254),_0x49ba0f(0x26d),_0x49ba0f(0x238),_0x49ba0f(0xf2),_0x49ba0f(0x227),_0x49ba0f(0x1a3),_0x49ba0f(0x1b3),_0x49ba0f(0x103),'effect','xy','ct',_0x49ba0f(0xef),'sat',_0x49ba0f(0x14e),_0x49ba0f(0x23b),_0x49ba0f(0x19b),_0x49ba0f(0x112),_0x49ba0f(0x128),_0x49ba0f(0x1c0),_0x49ba0f(0x12c),'capabilities',_0x49ba0f(0x100),_0x49ba0f(0x1ab),'scriptProblem',_0x49ba0f(0x1ce),_0x49ba0f(0x21e),_0x49ba0f(0x198),'icon',_0x49ba0f(0x15b),_0x49ba0f(0x1ae),_0x49ba0f(0x254),_0x49ba0f(0xea)];if(!_0x59f498)_0x32b806[_0x49ba0f(0x1b1)](_0x49ba0f(0x1ff),'weather',_0x49ba0f(0x278),_0x49ba0f(0x1a8),'uv',_0x49ba0f(0x1cd),_0x49ba0f(0x192));const _0x25ee78=[_0x49ba0f(0x239),'admin.',_0x49ba0f(0x177),_0x49ba0f(0x142),_0x49ba0f(0x116),_0x49ba0f(0x20a),'icons-mfd.',_0x49ba0f(0x262)];if(!_0x59f498)_0x25ee78[_0x49ba0f(0x1b1)](_0x49ba0f(0x141),_0x49ba0f(0x1b7),_0x49ba0f(0x11d),_0x49ba0f(0x275),_0x49ba0f(0x1fe));const _0x2ede55=(_0x5f4c05,_0x2baa77,_0x53f368=![])=>{const _0x496e3a=_0x49ba0f,_0x5c9e8f=_0x5f4c05[_0x496e3a(0x226)]('.');if(_0x2baa77[_0x5f4c05])return _0x2baa77[_0x5f4c05];if(_0x5c9e8f['length']>0x2&&_0x2baa77[_0x5c9e8f[_0x496e3a(0x231)](0x0,-0x1)['join']('.')])return _0x2baa77[_0x5c9e8f[_0x496e3a(0x231)](0x0,-0x1)[_0x496e3a(0x17b)]('.')];if(_0x5c9e8f['length']>0x3&&_0x2baa77[_0x5c9e8f['slice'](0x0,-0x2)[_0x496e3a(0x17b)]('.')])return _0x2baa77[_0x5c9e8f[_0x496e3a(0x231)](0x0,-0x2)['join']('.')];return _0x53f368?[]:null;};for(const _0x3322b2 in _0x1ff993){const _0x1d7337=_0x1ff993[_0x3322b2];if(!_0x1d7337||!_0x1d7337[_0x49ba0f(0x240)])continue;if(_0x25ee78[_0x49ba0f(0x280)](_0x3bc952=>_0x3322b2[_0x49ba0f(0x164)](_0x3bc952)))continue;const _0x202764=_0x1d7337[_0x49ba0f(0x240)][_0x49ba0f(0x22a)]||'',_0x382663=(_0x1d7337[_0x49ba0f(0x240)][_0x49ba0f(0x24f)]&&typeof _0x1d7337[_0x49ba0f(0x240)][_0x49ba0f(0x24f)]==='object'?_0x1d7337['common']['name']['de']:_0x1d7337[_0x49ba0f(0x240)]['name'])||'',_0x1db8e6=_0x3322b2[_0x49ba0f(0xfd)](),_0x3eb217=_0x382663?_0x382663[_0x49ba0f(0x16d)]():'',_0x2f8c93=_0x3322b2[_0x49ba0f(0x16d)](),_0x443e20=_0x2ede55(_0x3322b2,_0x2b6b81),_0x12be80=_0x2ede55(_0x3322b2,_0x150f8a,!![]);let _0x371429=null,_0x370061=![];if(_0x12be80&&_0x12be80[_0x49ba0f(0x195)]>0x0){const _0x256e82=_0x12be80[_0x49ba0f(0xe9)](_0x3336c7=>_0x508227[_0x49ba0f(0x21f)](_0x3336c7));if(_0x256e82){_0x370061=!![];const _0x53d851=_0x24065d[_0x256e82];if(_0x2f8c93[_0x49ba0f(0x21f)](_0x49ba0f(0x26e))||_0x2f8c93[_0x49ba0f(0x21f)](_0x49ba0f(0x1b9)))_0x371429=_0x49ba0f(0x25b);else{if(_0x2f8c93[_0x49ba0f(0x21f)]('smoke')||_0x2f8c93[_0x49ba0f(0x21f)](_0x49ba0f(0x249))||_0x3eb217[_0x49ba0f(0x21f)](_0x49ba0f(0x16e)))_0x371429=_0x49ba0f(0x1c5);else{if(_0x2f8c93[_0x49ba0f(0x21f)]('state')||_0x2f8c93[_0x49ba0f(0x21f)]('level')||_0x2f8c93['includes']('on'))_0x371429=_0x49ba0f(0x166);else _0x371429=_0x53d851;}}}}if(!_0x370061&&!_0x59f498){if(_0x32b806[_0x49ba0f(0x280)](_0x154728=>_0x3eb217['includes'](_0x154728)||_0x1db8e6[_0x49ba0f(0x21f)](_0x154728)))continue;}if(!_0x371429&&_0xcf53ee){const _0x16a08f=_0x202764[_0x49ba0f(0x21f)](_0x49ba0f(0x24c))||_0x202764[_0x49ba0f(0x21f)](_0x49ba0f(0x203)),_0x223d82=_0x3eb217[_0x49ba0f(0x21f)]('bewegung')||_0x3eb217[_0x49ba0f(0x21f)](_0x49ba0f(0x11f));if(_0x16a08f||_0x223d82)_0x371429=_0x49ba0f(0x25b);}if(!_0x371429&&_0x34f1c4){const _0x351aaa=_0x2f8c93[_0x49ba0f(0x21f)](_0x49ba0f(0x1c6))&&_0x2f8c93[_0x49ba0f(0x20b)](_0x49ba0f(0x152));(_0x351aaa||_0x202764['includes']('sensor.door')||_0x202764[_0x49ba0f(0x21f)](_0x49ba0f(0x18f))||(_0x3eb217[_0x49ba0f(0x21f)](_0x49ba0f(0x202))||_0x3eb217['includes'](_0x49ba0f(0x18d)))&&!_0x3eb217[_0x49ba0f(0x21f)]('temp')&&!_0x3eb217[_0x49ba0f(0x21f)](_0x49ba0f(0x104))&&(_0x1d7337[_0x49ba0f(0x240)]['type']===_0x49ba0f(0x1cc)||_0x1d7337[_0x49ba0f(0x240)][_0x49ba0f(0x213)]==='number'))&&(_0x371429=_0x49ba0f(0x14d));}if(!_0x371429&&_0x3cac81){const _0x398ec=_0x202764[_0x49ba0f(0x21f)]('switch.light')||_0x202764[_0x49ba0f(0x21f)]('level.dimmer'),_0x3c6be1=_0x3eb217['includes']('licht')||_0x3eb217[_0x49ba0f(0x21f)](_0x49ba0f(0x1f0))||_0x3eb217[_0x49ba0f(0x21f)](_0x49ba0f(0x27c)),_0x4f2775=_0x2f8c93[_0x49ba0f(0x20b)]('.state')||_0x2f8c93['endsWith'](_0x49ba0f(0x24d))||_0x2f8c93[_0x49ba0f(0x20b)](_0x49ba0f(0x209))||_0x2f8c93['endsWith'](_0x49ba0f(0x20e))||_0x2f8c93[_0x49ba0f(0x20b)](_0x49ba0f(0x1e1));(_0x398ec||_0x3c6be1)&&_0x4f2775&&_0x1d7337[_0x49ba0f(0x240)][_0x49ba0f(0x14f)]&&(_0x371429=_0x49ba0f(0x23e));}!_0x371429&&_0x16399a&&((_0x202764[_0x49ba0f(0x21f)](_0x49ba0f(0x168))||_0x202764['includes'](_0x49ba0f(0x234))||_0x3eb217[_0x49ba0f(0x21f)](_0x49ba0f(0x12b)))&&(_0x371429=_0x49ba0f(0x101)));if(_0x371429){let _0x2fd3d2=_0x443e20||'';if(!_0x2fd3d2){if(_0x3eb217['includes'](_0x49ba0f(0x253)))_0x2fd3d2=_0x49ba0f(0x25a);else{if(_0x3eb217[_0x49ba0f(0x21f)](_0x49ba0f(0x24a)))_0x2fd3d2='K√ºche';else{if(_0x3eb217[_0x49ba0f(0x21f)](_0x49ba0f(0x219)))_0x2fd3d2=_0x49ba0f(0x21c);else{if(_0x3eb217[_0x49ba0f(0x21f)](_0x49ba0f(0x172)))_0x2fd3d2=_0x49ba0f(0x1b4);else{if(_0x3eb217[_0x49ba0f(0x21f)]('flur')||_0x3eb217[_0x49ba0f(0x21f)](_0x49ba0f(0x120)))_0x2fd3d2='Flur';else{if(_0x3eb217['includes']('garten'))_0x2fd3d2='Garten';}}}}}}let _0x897a5=0x0;if(_0x370061)_0x897a5+=0x1e;else{if(_0x443e20)_0x897a5+=0x14;else{if(_0x2fd3d2)_0x897a5+=0xa;}}_0x2af0d0[_0x49ba0f(0x1b1)]({'id':_0x3322b2,'name':_0x382663||_0x3322b2,'type':_0x371429,'location':_0x2fd3d2,'logDuplicates':_0x371429===_0x49ba0f(0x25b),'_score':_0x897a5});}}return _0x2af0d0['sort']((_0x2778b6,_0x19df2a)=>_0x19df2a['_score']-_0x2778b6[_0x49ba0f(0x20f)]),_0x2af0d0;}async['getSystemUUID'](){const _0x2d4b10=a0_0x4a9de5;try{const _0x1e133a=await this['getForeignObjectAsync'](_0x2d4b10(0x1b2));if(_0x1e133a&&_0x1e133a[_0x2d4b10(0x22b)]&&_0x1e133a['native'][_0x2d4b10(0x27a)])return _0x1e133a['native'][_0x2d4b10(0x27a)];return'uuid-not-found';}catch(_0x381ea9){return _0x2d4b10(0x190);}}async[a0_0x4a9de5(0x1f3)](_0x3cc67d){const _0x3b7f6e=a0_0x4a9de5;if(!_0x3cc67d)return![];this['systemUUID']=await this[_0x3b7f6e(0x117)](),this[_0x3b7f6e(0x191)]['info']('Lizenzpr√ºfung\x20gestartet\x20f√ºr\x20System-UUID:\x20'+this['systemUUID']);if(_0x3cc67d===_0x3b7f6e(0x19c))return this[_0x3b7f6e(0x191)][_0x3b7f6e(0x254)]('‚ö†Ô∏è\x20DEV-MODE:\x20Lokaler\x20Test-Schl√ºssel\x20erkannt.\x20Pro-Features\x20aktiviert.'),!![];if(_0x3cc67d[_0x3b7f6e(0x164)](_0x3b7f6e(0x217)))return this[_0x3b7f6e(0x191)][_0x3b7f6e(0x254)]('‚úÖ\x20Server\x20(simuliert):\x20Lizenz\x20g√ºltig.'),!![];return![];}async[a0_0x4a9de5(0x25c)](){const _0x206b9d=a0_0x4a9de5;await this[_0x206b9d(0x210)](),await this[_0x206b9d(0x1df)](_0x206b9d(0x241),{'type':'state','common':{'name':_0x206b9d(0x1ef),'type':_0x206b9d(0x1f9),'role':_0x206b9d(0xea),'read':!![],'write':![]},'native':{}}),await this[_0x206b9d(0x1df)]('events.history',{'type':'state','common':{'name':'Event\x20History','type':'string','role':'json','read':!![],'write':![]},'native':{}}),await this[_0x206b9d(0x1df)](_0x206b9d(0x10f),{'type':_0x206b9d(0x265),'common':{'name':_0x206b9d(0x13a),'type':_0x206b9d(0x1cc),'role':_0x206b9d(0x154),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x206b9d(0x1df)](_0x206b9d(0x148),{'type':'state','common':{'name':_0x206b9d(0xfc),'type':_0x206b9d(0x1f9),'role':_0x206b9d(0xea),'read':!![],'write':![]},'native':{}}),await this[_0x206b9d(0x1df)](_0x206b9d(0x155),{'type':_0x206b9d(0x265),'common':{'name':_0x206b9d(0x11b),'type':_0x206b9d(0x1cc),'role':_0x206b9d(0x1d0),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x206b9d(0x1df)](_0x206b9d(0x1a2),{'type':_0x206b9d(0x265),'common':{'name':_0x206b9d(0x182),'type':_0x206b9d(0x1f9),'role':_0x206b9d(0x200),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.activitySummary',{'type':'state','common':{'name':_0x206b9d(0x12a),'type':_0x206b9d(0x1f9),'role':_0x206b9d(0x247),'read':!![],'write':![]},'native':{}}),await this[_0x206b9d(0x1df)](_0x206b9d(0x23c),{'type':_0x206b9d(0x265),'common':{'name':_0x206b9d(0x279),'type':_0x206b9d(0x1f9),'role':'state','read':!![],'write':![],'def':_0x206b9d(0x23d)},'native':{}}),await this[_0x206b9d(0x1df)]('analysis.comfortSummary',{'type':_0x206b9d(0x265),'common':{'name':_0x206b9d(0x1e3),'type':'string','role':_0x206b9d(0x247),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x206b9d(0x236),{'type':_0x206b9d(0x265),'common':{'name':_0x206b9d(0x102),'type':'string','role':_0x206b9d(0x247),'read':!![],'write':![]},'native':{}}),await this[_0x206b9d(0x261)]('analysis.automation',{'type':_0x206b9d(0x1a6),'common':{'name':'Automation\x20Proposals'},'native':{}}),await this[_0x206b9d(0x1df)](_0x206b9d(0x1d5),{'type':_0x206b9d(0x265),'common':{'name':_0x206b9d(0x1d7),'type':_0x206b9d(0x1cc),'role':_0x206b9d(0x122),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x206b9d(0x1df)](_0x206b9d(0x1c4),{'type':_0x206b9d(0x265),'common':{'name':_0x206b9d(0x1c7),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x206b9d(0x1d9),{'type':_0x206b9d(0x265),'common':{'name':'Action','type':_0x206b9d(0x1f9),'role':_0x206b9d(0x247),'read':!![],'write':![]},'native':{}}),await this[_0x206b9d(0x1df)](_0x206b9d(0x21b),{'type':_0x206b9d(0x265),'common':{'name':'Logbook','type':_0x206b9d(0x1f9),'role':_0x206b9d(0xea),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x206b9d(0x1df)]('analysis.feedbackHistory',{'type':_0x206b9d(0x265),'common':{'name':_0x206b9d(0x216),'type':_0x206b9d(0x1f9),'role':_0x206b9d(0xea),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x206b9d(0x1ba)](),await this['checkLtmDriftObjects']();}[a0_0x4a9de5(0x110)](_0x1f2f20,_0x585951){const _0x3c0622=a0_0x4a9de5;if(!_0x585951)return;if(_0x1f2f20===this[_0x3c0622(0x1a7)]+'.'+SYSTEM_DP_MODE){_0x585951[_0x3c0622(0x23a)]&&Object[_0x3c0622(0x1ec)](SYSTEM_MODES)[_0x3c0622(0x21f)](_0x585951[_0x3c0622(0x23a)])&&(this[_0x3c0622(0x11c)]=_0x585951['val']);if(!_0x585951[_0x3c0622(0x183)])this[_0x3c0622(0x1c9)](_0x1f2f20,{'val':this[_0x3c0622(0x11c)],'ack':!![]});return;}if(!_0x585951[_0x3c0622(0x183)]){_0x1f2f20[_0x3c0622(0x21f)](_0x3c0622(0x10f))&&_0x585951[_0x3c0622(0x23a)]&&(this[_0x3c0622(0x1c9)](_0x1f2f20,{'val':![],'ack':!![]}),this[_0x3c0622(0x232)]());if(_0x1f2f20[_0x3c0622(0x21f)](_0x3c0622(0x121))&&_0x585951[_0x3c0622(0x23a)]){this[_0x3c0622(0x1c9)](_0x1f2f20,{'val':![],'ack':!![]});if(this['isProVersion'])this[_0x3c0622(0xeb)]();}return;}const _0xee401e=(this[_0x3c0622(0x19e)][_0x3c0622(0x175)]||[])[_0x3c0622(0xe9)](_0x41bb16=>_0x41bb16['id']===_0x1f2f20);if(_0xee401e)this['processSensorEvent'](_0x1f2f20,_0x585951,_0xee401e);}async['processSensorEvent'](_0x542971,_0x25f683,_0x20546c){const _0x4372e9=a0_0x4a9de5;if(!_0x20546c['logDuplicates']&&this['sensorLastValues'][_0x542971]===_0x25f683['val'])return;this[_0x4372e9(0x109)][_0x542971]=_0x25f683['val'];const _0x28213b={'timestamp':_0x25f683['ts'],'id':_0x542971,'name':_0x20546c[_0x4372e9(0x24f)],'value':_0x25f683[_0x4372e9(0x23a)],'location':_0x20546c['location'],'type':_0x20546c[_0x4372e9(0x213)]};this[_0x4372e9(0x251)][_0x4372e9(0x1c2)](_0x28213b);if(this[_0x4372e9(0x251)][_0x4372e9(0x195)]>HISTORY_MAX_SIZE)this[_0x4372e9(0x251)][_0x4372e9(0x221)]();await this['setStateAsync'](_0x4372e9(0x241),{'val':JSON['stringify'](_0x28213b),'ack':!![]}),this[_0x4372e9(0x17f)][_0x4372e9(0x1b1)]({'timestamp':new Date(_0x25f683['ts'])[_0x4372e9(0x1a0)](),'sensorName':_0x20546c[_0x4372e9(0x24f)],'location':_0x20546c['location'],'value':_0x25f683[_0x4372e9(0x23a)]}),await this[_0x4372e9(0x145)]();}['runAutopilot'](){const _0x107e51=a0_0x4a9de5;if(this['eventHistory'][_0x107e51(0x195)]===0x0){this['setState'](_0x107e51(0x155),{'val':![],'ack':!![]}),this['resetAnalysisStates']();return;}const _0x1c0970=Date[_0x107e51(0xe8)]();if(_0x1c0970-this['eventHistory'][0x0][_0x107e51(0x105)]>(this[_0x107e51(0x19e)][_0x107e51(0x1be)]||0xf)*0x3c*0x3e8){this[_0x107e51(0x1c9)](_0x107e51(0x155),{'val':![],'ack':!![]}),this[_0x107e51(0x201)]();return;}this['runGeminiAnalysis']()['catch'](_0x60d65b=>this[_0x107e51(0x191)][_0x107e51(0x10d)](_0x60d65b));}async[a0_0x4a9de5(0x232)](){const _0x5cb742=a0_0x4a9de5;if(!this[_0x5cb742(0x1bb)]||this['eventHistory'][_0x5cb742(0x195)]===0x0)return;const _0x4ce162=PERSONA_MAPPING[this[_0x5cb742(0x19e)][_0x5cb742(0x1fd)]||'generic'],_0x1bff74=this[_0x5cb742(0x19e)]['livingContext']||'',_0x1f82f8=this[_0x5cb742(0x11c)],_0x2e6c3f=new Date(),_0x407247=_0x2e6c3f['toLocaleString'](_0x5cb742(0x160),{'weekday':_0x5cb742(0x18e),'hour':'2-digit','minute':_0x5cb742(0x146)}),_0x4c5665=this[_0x5cb742(0x228)],_0x317702=_0x5cb742(0x220)+_0x4c5665[_0x5cb742(0x173)]+_0x5cb742(0x27e)+_0x4c5665[_0x5cb742(0x287)]+'\x20('+(_0x4c5665[_0x5cb742(0x206)]||_0x5cb742(0x11a))+_0x5cb742(0x1de);this[_0x5cb742(0x191)]['debug'](_0x5cb742(0x16b)+_0x407247+_0x5cb742(0x1dd)+_0x4c5665['city']);let _0x4f2a59='Baseline:\x20Inactive.',_0x272e7e=_0x5cb742(0x1f2);if(this['isProVersion']&&this[_0x5cb742(0x25f)][_0x5cb742(0x195)]>=(this['config'][_0x5cb742(0x124)]||0x7)&&_0x1f82f8===SYSTEM_MODES[_0x5cb742(0x281)]){const _0xf178f=this['dailyDigests'][_0x5cb742(0x231)](-(this['config'][_0x5cb742(0x12f)]||0xe))[_0x5cb742(0x1a9)]();_0x4f2a59=_0x5cb742(0x27f)+JSON[_0x5cb742(0x26b)](_0xf178f),_0x272e7e=_0x5cb742(0x277);}let _0xaaac3a='';if(this[_0x5cb742(0x181)][_0x5cb742(0x195)]>0x0){const _0x40df98=this[_0x5cb742(0x181)]['filter'](_0x427d82=>_0x427d82['rating']===_0x5cb742(0x193)||_0x427d82['rating']==='needs_improvement')['slice'](0x0,0x3)['map'](_0x2dff72=>_0x5cb742(0x15d)+_0x2dff72[_0x5cb742(0x25e)]+_0x5cb742(0x16f)+new Date(_0x2dff72[_0x5cb742(0x105)])[_0x5cb742(0x162)]()+_0x5cb742(0x1f4)+(_0x2dff72[_0x5cb742(0x1ed)]||_0x5cb742(0x159))+'.')[_0x5cb742(0x17b)]('\x0a');_0x40df98&&(_0xaaac3a=_0x5cb742(0x233)+_0x40df98+'\x0a');}const _0x5c2b38='ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AKTUELLE\x20ZEIT:\x20'+_0x407247+'.\x20'+_0x317702+_0x5cb742(0x17d)+_0x1f82f8+'.\x20KONTEXT:\x20'+_0x1bff74+'.\x20PERSONA:\x20'+_0x4ce162+'.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x4f2a59+'\x20'+_0xaaac3a+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20'+_0x272e7e+_0x5cb742(0x13d)+JSON['stringify'](this['eventHistory'])+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SCHEMA:\x20{\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x22comfort\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22suggestion\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22suggestedAction\x22:\x20\x22string\x22\x20}\x20}\x20}';try{const _0x52f7c4=await this[_0x5cb742(0x1bb)]['generateContent'](_0x5c2b38),_0x8938c8=JSON['parse'](_0x52f7c4[_0x5cb742(0x14b)][_0x5cb742(0x247)]()[_0x5cb742(0x17a)](/```json|```/g,'')['trim']());await this['setStateAsync'](_0x5cb742(0x148),{'val':JSON[_0x5cb742(0x26b)](_0x8938c8),'ack':!![]}),await this[_0x5cb742(0x270)](_0x5cb742(0x27b),{'val':_0x8938c8[_0x5cb742(0xf4)]['summary']||_0x5cb742(0x23d),'ack':!![]}),await this[_0x5cb742(0x270)]('analysis.deviationFromBaseline',{'val':_0x8938c8[_0x5cb742(0xf4)][_0x5cb742(0x180)]||_0x5cb742(0x23d),'ack':!![]}),await this['setStateAsync'](_0x5cb742(0x1a2),{'val':_0x8938c8['activity']['alertReason']||'','ack':!![]});const _0x57aaf2=_0x8938c8['comfort'][_0x5cb742(0x1e5)],_0x284a52=this[_0x5cb742(0x284)]?_0x57aaf2[_0x5cb742(0x131)]:![];await this['setStateAsync'](_0x5cb742(0x1d5),{'val':_0x284a52,'ack':!![]}),await this[_0x5cb742(0x270)](_0x5cb742(0x1c4),{'val':_0x284a52?_0x57aaf2[_0x5cb742(0x12c)]:this[_0x5cb742(0x284)]?'':_0x5cb742(0x1ca),'ack':!![]});if(_0x8938c8['activity'][_0x5cb742(0x106)]){await this[_0x5cb742(0x270)]('analysis.isAlert',{'val':!![],'ack':!![]});if(!this[_0x5cb742(0x1e6)])this[_0x5cb742(0x111)](_0x5cb742(0xf9)+_0x8938c8[_0x5cb742(0xf4)][_0x5cb742(0x25e)]);}else await this[_0x5cb742(0x270)](_0x5cb742(0x155),{'val':![],'ack':!![]});this['lastAlertState']=_0x8938c8[_0x5cb742(0xf4)][_0x5cb742(0x106)];const _0x22040a={'timestamp':Date['now'](),'id':Date['now']()['toString'](),'analysis':_0x8938c8,'systemMode':_0x1f82f8,'isPro':this['isProVersion']};this[_0x5cb742(0x179)](_0x22040a);}catch(_0x19130c){this[_0x5cb742(0x191)][_0x5cb742(0x10d)](_0x5cb742(0xe7)+_0x19130c[_0x5cb742(0x204)]);}}async['createDailyDigest'](){const _0xbc2b70=a0_0x4a9de5;if(!this[_0xbc2b70(0x284)])return;await this[_0xbc2b70(0x270)](LTM_DP_STATUS,{'val':'Started\x20at\x20'+new Date()['toLocaleString'](),'ack':!![]});if(!this[_0xbc2b70(0x1bb)]||this['rawEventLog'][_0xbc2b70(0x195)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await this[_0xbc2b70(0x270)](LTM_DP_STATUS,{'val':_0xbc2b70(0x1db),'ack':!![]});return;}const _0x183023=JSON[_0xbc2b70(0x1d8)](JSON[_0xbc2b70(0x26b)](this['rawEventLog'])),_0x7d906c=(this[_0xbc2b70(0x19e)][_0xbc2b70(0x224)]||'')[_0xbc2b70(0x13e)](0x0,0x3e8),_0x3f2fcf=_0xbc2b70(0x1c1)+_0x7d906c+_0xbc2b70(0x1eb)+JSON['stringify'](_0x183023);try{const _0x55d52b=await this['geminiModel']['generateContent'](_0x3f2fcf),_0x427bc4=JSON[_0xbc2b70(0x1d8)](_0x55d52b[_0xbc2b70(0x14b)][_0xbc2b70(0x247)]()[_0xbc2b70(0x17a)](/```json|```/g,'')['trim']());_0x427bc4[_0xbc2b70(0x198)]&&(this[_0xbc2b70(0x25f)][_0xbc2b70(0x1b1)]({'timestamp':new Date()[_0xbc2b70(0x1a0)](),'eventCount':_0x183023[_0xbc2b70(0x195)],'summary':_0x427bc4[_0xbc2b70(0x198)],'activityLevel':_0x427bc4[_0xbc2b70(0x187)],'systemMode':this[_0xbc2b70(0x11c)]}),await this['saveDailyDigests'](),this['rawEventLog']=[],await this[_0xbc2b70(0x145)](),await this['setStateAsync'](LTM_DP_STATUS,{'val':'Success:\x20Compressed\x20'+_0x183023['length']+_0xbc2b70(0x1c3),'ack':!![]}));}catch(_0x1ab4da){await this[_0xbc2b70(0x270)](LTM_DP_STATUS,{'val':_0xbc2b70(0x1ac)+_0x1ab4da[_0xbc2b70(0x204)],'ack':!![]});}}async['runBaselineDriftAnalysis'](){const _0x558547=a0_0x4a9de5;if(!this[_0x558547(0x284)]||!this['geminiModel'])return;const _0x41b4b6=this['config'][_0x558547(0x12f)]||0xe;if(this[_0x558547(0x25f)]['length']<_0x41b4b6+(this['config'][_0x558547(0x124)]||0x7)){await this[_0x558547(0x270)](LTM_DP_DRIFT_STATUS,{'val':_0x558547(0x17c),'ack':!![]});return;}const _0x33720f=this[_0x558547(0x25f)][_0x558547(0x231)](-_0x41b4b6),_0x247bbe=this[_0x558547(0x25f)][_0x558547(0x231)](0x0,this[_0x558547(0x25f)][_0x558547(0x195)]-_0x41b4b6),_0x1e01ad=_0x558547(0x1cf)+JSON[_0x558547(0x26b)](_0x247bbe)+_0x558547(0x285)+JSON[_0x558547(0x26b)](_0x33720f);try{const _0x445724=await this[_0x558547(0x1bb)][_0x558547(0x12e)](_0x1e01ad),_0x3b2ead=JSON['parse'](_0x445724[_0x558547(0x14b)][_0x558547(0x247)]()[_0x558547(0x17a)](/```json|```/g,'')[_0x558547(0x20c)]());_0x3b2ead['baselineDrift']&&(await this[_0x558547(0x270)](LTM_DP_DRIFT_STATUS,{'val':_0x3b2ead[_0x558547(0x167)],'ack':!![]}),await this[_0x558547(0x270)](LTM_DP_DRIFT_DETAILS,{'val':_0x3b2ead[_0x558547(0x176)],'ack':!![]}),await this[_0x558547(0x270)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x558547(0xe8)](),'ack':!![]}));}catch(_0x30fb76){}}async[a0_0x4a9de5(0x210)](){const _0x16f84a=a0_0x4a9de5;await this[_0x16f84a(0x261)]('system',{'type':_0x16f84a(0x1a6),'common':{'name':_0x16f84a(0x215)},'native':{}}),await this[_0x16f84a(0x261)](SYSTEM_DP_MODE,{'type':_0x16f84a(0x265),'common':{'name':_0x16f84a(0x1ad),'type':_0x16f84a(0x1f9),'role':_0x16f84a(0x265),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x16f84a(0x281)],'states':{[SYSTEM_MODES['NORMAL']]:_0x16f84a(0x123),[SYSTEM_MODES[_0x16f84a(0x1e0)]]:_0x16f84a(0x1a4),[SYSTEM_MODES[_0x16f84a(0x214)]]:_0x16f84a(0x223),[SYSTEM_MODES[_0x16f84a(0x1b5)]]:_0x16f84a(0x199)}},'native':{}});}async[a0_0x4a9de5(0x1ea)](){const _0x4f716d=a0_0x4a9de5;try{const _0x302fa6=await this['getStateAsync'](SYSTEM_DP_MODE);_0x302fa6&&_0x302fa6[_0x4f716d(0x23a)]&&Object[_0x4f716d(0x1ec)](SYSTEM_MODES)['includes'](_0x302fa6['val'])?this['currentSystemMode']=_0x302fa6[_0x4f716d(0x23a)]:(this[_0x4f716d(0x11c)]=SYSTEM_MODES[_0x4f716d(0x281)],await this[_0x4f716d(0x270)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x4f716d(0x281)],'ack':!![]}));}catch(_0x139adb){this[_0x4f716d(0x11c)]=SYSTEM_MODES[_0x4f716d(0x281)];}}[a0_0x4a9de5(0x194)](){const _0x5336d9=a0_0x4a9de5;if(this[_0x5336d9(0x230)])this['modeResetJob']['cancel']();this['modeResetJob']=schedule[_0x5336d9(0x1bd)](MODE_RESET_SCHEDULE,async()=>{const _0x47b817=_0x5336d9;await this['loadSystemMode'](),AUTO_RESET_MODES[_0x47b817(0x21f)](this[_0x47b817(0x11c)])&&await this[_0x47b817(0x270)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x47b817(0x281)],'ack':![]});});}async[a0_0x4a9de5(0x21a)](){const _0xb0bee3=a0_0x4a9de5;if(!this['isProVersion']){await this[_0xb0bee3(0x270)](LTM_DP_BASELINE_STATUS,{'val':_0xb0bee3(0x1fa),'ack':!![]});return;}const _0x945ba6=this[_0xb0bee3(0x25f)][_0xb0bee3(0x195)]>=(this[_0xb0bee3(0x19e)][_0xb0bee3(0x124)]||0x7)?_0xb0bee3(0x15a)+this[_0xb0bee3(0x25f)][_0xb0bee3(0x195)]+_0xb0bee3(0x250):_0xb0bee3(0x153)+this[_0xb0bee3(0x25f)][_0xb0bee3(0x195)]+'/'+(this[_0xb0bee3(0x19e)][_0xb0bee3(0x124)]||0x7)+')';await this['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x945ba6,'ack':!![]});}async[a0_0x4a9de5(0x1ba)](){const _0x4c1eb7=a0_0x4a9de5;await this[_0x4c1eb7(0x261)](_0x4c1eb7(0x21d),{'type':'channel','common':{'name':'LTM'},'native':{}}),await this[_0x4c1eb7(0x261)](LTM_DP_RAW_LOG,{'type':_0x4c1eb7(0x265),'common':{'name':_0x4c1eb7(0x26a),'type':'string','role':_0x4c1eb7(0xea),'read':!![],'write':![]},'native':{}}),await this[_0x4c1eb7(0x261)](LTM_DP_DAILY_DIGESTS,{'type':_0x4c1eb7(0x265),'common':{'name':_0x4c1eb7(0x24b),'type':_0x4c1eb7(0x1f9),'role':'json','read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_STATUS,{'type':_0x4c1eb7(0x265),'common':{'name':_0x4c1eb7(0x186),'type':_0x4c1eb7(0x1f9),'role':_0x4c1eb7(0x247),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_TRIGGER_DIGEST,{'type':_0x4c1eb7(0x265),'common':{'name':_0x4c1eb7(0x258),'type':_0x4c1eb7(0x1cc),'role':_0x4c1eb7(0x154),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x4c1eb7(0x261)](LTM_DP_BASELINE_STATUS,{'type':_0x4c1eb7(0x265),'common':{'name':_0x4c1eb7(0x1f5),'type':'string','role':_0x4c1eb7(0x247),'read':!![],'write':![]},'native':{}});}async[a0_0x4a9de5(0x28a)](){const _0x4c4e3e=a0_0x4a9de5;await this[_0x4c4e3e(0x261)](LTM_DP_DRIFT_CHANNEL,{'type':_0x4c4e3e(0x1a6),'common':{'name':_0x4c4e3e(0x208)},'native':{}}),await this[_0x4c4e3e(0x261)](LTM_DP_DRIFT_STATUS,{'type':'state','common':{'name':_0x4c4e3e(0x1e2),'type':'string','role':_0x4c4e3e(0x265),'read':!![],'write':![],'def':_0x4c4e3e(0x23d)},'native':{}}),await this['extendObjectAsync'](LTM_DP_DRIFT_DETAILS,{'type':'state','common':{'name':_0x4c4e3e(0x273),'type':_0x4c4e3e(0x1f9),'role':_0x4c4e3e(0x247),'read':!![],'write':![]},'native':{}}),await this[_0x4c4e3e(0x261)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x4c4e3e(0x265),'common':{'name':_0x4c4e3e(0x12d),'type':_0x4c4e3e(0x1aa),'role':_0x4c4e3e(0x189),'read':!![],'write':![]},'native':{}});}async[a0_0x4a9de5(0x170)](){const _0x1bb369=a0_0x4a9de5;try{const _0x3ef563=await this[_0x1bb369(0x157)](LTM_DP_RAW_LOG);if(_0x3ef563&&_0x3ef563[_0x1bb369(0x23a)])this['rawEventLog']=JSON[_0x1bb369(0x1d8)](_0x3ef563['val']);}catch(_0x4627a4){this[_0x1bb369(0x17f)]=[];}}async['saveRawEventLog'](){const _0x42b959=a0_0x4a9de5;this[_0x42b959(0x17f)][_0x42b959(0x195)]>RAW_LOG_MAX_SIZE&&this[_0x42b959(0x17f)][_0x42b959(0x18a)](0x0,this['rawEventLog']['length']-RAW_LOG_MAX_SIZE),await this[_0x42b959(0x270)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](this[_0x42b959(0x17f)]),'ack':!![]});}async['loadDailyDigests'](){const _0x147596=a0_0x4a9de5;try{const _0x3b4ca3=await this[_0x147596(0x157)](LTM_DP_DAILY_DIGESTS);if(_0x3b4ca3&&_0x3b4ca3[_0x147596(0x23a)])this[_0x147596(0x25f)]=JSON[_0x147596(0x1d8)](_0x3b4ca3[_0x147596(0x23a)]);}catch(_0x1e558f){this[_0x147596(0x25f)]=[];}await this[_0x147596(0x21a)]();}async[a0_0x4a9de5(0x266)](_0x3f25d3=!![]){const _0xda0c5f=a0_0x4a9de5,_0x550413=this[_0xda0c5f(0x19e)][_0xda0c5f(0x256)]||0x3c;this[_0xda0c5f(0x25f)][_0xda0c5f(0x195)]>_0x550413&&this[_0xda0c5f(0x25f)][_0xda0c5f(0x18a)](0x0,this[_0xda0c5f(0x25f)]['length']-_0x550413);await this['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0xda0c5f(0x26b)](this[_0xda0c5f(0x25f)]),'ack':!![]});if(_0x3f25d3)await this[_0xda0c5f(0x21a)]();}[a0_0x4a9de5(0xe6)](){const _0x3f09a2=a0_0x4a9de5;if(this[_0x3f09a2(0x10b)])this[_0x3f09a2(0x10b)][_0x3f09a2(0x268)]();if(!this[_0x3f09a2(0x284)]){this[_0x3f09a2(0x270)](LTM_DP_STATUS,{'val':_0x3f09a2(0x1fa),'ack':!![]});return;}this[_0x3f09a2(0x10b)]=schedule[_0x3f09a2(0x1bd)](LTM_SCHEDULE,()=>this['createDailyDigest']());}[a0_0x4a9de5(0x1e7)](){const _0x4747a0=a0_0x4a9de5;if(this['driftAnalysisTimer'])clearInterval(this[_0x4747a0(0x1fc)]);if(!this['isProVersion'])return;this[_0x4747a0(0x1fc)]=setInterval(()=>this[_0x4747a0(0x272)](),(this[_0x4747a0(0x19e)]['ltmDriftCheckIntervalHours']||0x18)*0x36ee80),setTimeout(()=>this[_0x4747a0(0x272)](),0x1388);}async['resetAnalysisStates'](){const _0x1fe109=a0_0x4a9de5;await this['setStateAsync'](_0x1fe109(0x27b),{'val':'No\x20recent\x20activity.','ack':!![]}),await this[_0x1fe109(0x270)](_0x1fe109(0x23c),{'val':this['isProVersion']?_0x1fe109(0x107):'N/A\x20(Pro\x20Feature)','ack':!![]}),await this[_0x1fe109(0x270)](_0x1fe109(0x155),{'val':![],'ack':!![]}),this['lastAlertState']=![];}async[a0_0x4a9de5(0x179)](_0xcd8d77){const _0x189e43=a0_0x4a9de5;this[_0x189e43(0x16a)]['unshift'](_0xcd8d77);if(this[_0x189e43(0x16a)][_0x189e43(0x195)]>ANALYSIS_HISTORY_MAX_SIZE)this[_0x189e43(0x16a)][_0x189e43(0x221)]();await this[_0x189e43(0x270)](_0x189e43(0x21b),{'val':JSON[_0x189e43(0x26b)](this[_0x189e43(0x16a)]),'ack':!![]});}async['sendNotification'](_0x4fa97f,_0x44f71f=![]){const _0x2335ec=a0_0x4a9de5;this[_0x2335ec(0x191)][_0x2335ec(0x254)]((_0x44f71f?_0x2335ec(0x22c):'')+_0x2335ec(0x13f)+_0x4fa97f+'\x22');const _0x54eca5=this[_0x2335ec(0x19e)];let _0x3651e1=0x0;return _0x54eca5[_0x2335ec(0x15c)]&&_0x54eca5[_0x2335ec(0x19d)]&&(await this[_0x2335ec(0x135)](_0x54eca5['notifyTelegramInstance'],_0x2335ec(0x229),{'text':_0x4fa97f,'user':_0x54eca5[_0x2335ec(0x169)]}),_0x3651e1++),_0x54eca5[_0x2335ec(0x144)]&&_0x54eca5[_0x2335ec(0x248)]&&(await this[_0x2335ec(0x135)](_0x54eca5[_0x2335ec(0x248)],_0x2335ec(0x229),{'message':_0x4fa97f,'title':_0x2335ec(0x188),'priority':0x1,'device':_0x54eca5[_0x2335ec(0x288)]}),_0x3651e1++),_0x54eca5[_0x2335ec(0x1b6)]&&_0x54eca5['notifyEmailInstance']&&(await this[_0x2335ec(0x135)](_0x54eca5[_0x2335ec(0x23f)],_0x2335ec(0x229),{'text':_0x4fa97f,'to':_0x54eca5[_0x2335ec(0x245)]}),_0x3651e1++),_0x54eca5[_0x2335ec(0x18c)]&&_0x54eca5['notifyWhatsappInstance']&&(await this['sendToAsync'](_0x54eca5['notifyWhatsappInstance'],'send',{'text':_0x4fa97f,'phone':_0x54eca5[_0x2335ec(0x140)]}),_0x3651e1++),_0x54eca5['notifySignalEnabled']&&_0x54eca5[_0x2335ec(0x114)]&&(await this[_0x2335ec(0x135)](_0x54eca5[_0x2335ec(0x114)],'send',{'text':_0x4fa97f,'phone':_0x54eca5[_0x2335ec(0x143)]}),_0x3651e1++),_0x3651e1;}async[a0_0x4a9de5(0x16c)](_0x120265){const _0x20cac4=a0_0x4a9de5;this['feedbackHistory'][_0x20cac4(0x1c2)](_0x120265);if(this['feedbackHistory'][_0x20cac4(0x195)]>FEEDBACK_MAX_SIZE)this[_0x20cac4(0x181)][_0x20cac4(0x221)]();await this['setStateAsync'](_0x20cac4(0x26c),{'val':JSON[_0x20cac4(0x26b)](this[_0x20cac4(0x181)]),'ack':!![]}),this['log'][_0x20cac4(0x254)](_0x20cac4(0x10c)+_0x120265[_0x20cac4(0xec)]+_0x20cac4(0x264)+_0x120265[_0x20cac4(0x129)]);}['onUnload'](_0x432275){const _0x11216a=a0_0x4a9de5;if(this[_0x11216a(0x260)])clearInterval(this['analysisTimer']);if(this[_0x11216a(0x1fc)])clearInterval(this[_0x11216a(0x1fc)]);if(this[_0x11216a(0x10b)])this[_0x11216a(0x10b)]['cancel']();if(this[_0x11216a(0x230)])this['modeResetJob']['cancel']();_0x432275();}async[a0_0x4a9de5(0x15e)](_0x159a23){const _0x1f9166=a0_0x4a9de5;if(typeof _0x159a23===_0x1f9166(0x1da)&&_0x159a23[_0x1f9166(0x204)]){if(_0x159a23[_0x1f9166(0x128)]===_0x1f9166(0x126)){if(!_0x159a23[_0x1f9166(0x204)][_0x1f9166(0x178)])return this['sendTo'](_0x159a23['from'],_0x159a23[_0x1f9166(0x128)],{'success':![],'message':_0x1f9166(0x132)},_0x159a23[_0x1f9166(0x1f7)]);try{const _0x327b95=new GoogleGenerativeAI(_0x159a23['message']['apiKey'])[_0x1f9166(0x286)]({'model':_0x1f9166(0x242)});await _0x327b95[_0x1f9166(0x12e)](_0x1f9166(0x1b8)),this[_0x1f9166(0x165)](_0x159a23['from'],_0x159a23[_0x1f9166(0x128)],{'success':!![],'message':_0x1f9166(0x1f1)},_0x159a23[_0x1f9166(0x1f7)]);}catch(_0x323a95){this[_0x1f9166(0x165)](_0x159a23['from'],_0x159a23[_0x1f9166(0x128)],{'success':![],'message':_0x323a95[_0x1f9166(0x204)]},_0x159a23[_0x1f9166(0x1f7)]);}}else{if(_0x159a23[_0x1f9166(0x128)]===_0x1f9166(0x257)){const _0x6ad3af=await this[_0x1f9166(0x111)](_0x1f9166(0x1fb),!![]);this[_0x1f9166(0x165)](_0x159a23[_0x1f9166(0x108)],_0x159a23[_0x1f9166(0x128)],{'success':_0x6ad3af>0x0,'message':_0x6ad3af+'\x20sent'},_0x159a23['callback']);}else{if(_0x159a23['command']===_0x1f9166(0xfb)){if(!this[_0x1f9166(0x284)])return this[_0x1f9166(0x165)](_0x159a23[_0x1f9166(0x108)],_0x159a23['command'],{'success':![],'isPro':![]},_0x159a23[_0x1f9166(0x1f7)]);let _0x59a402={'status':_0x1f9166(0x23d),'details':'','lastCheck':0x0};try{_0x59a402[_0x1f9166(0xf0)]=(await this[_0x1f9166(0x157)](LTM_DP_DRIFT_STATUS))[_0x1f9166(0x23a)],_0x59a402[_0x1f9166(0x138)]=(await this['getStateAsync'](LTM_DP_DRIFT_DETAILS))[_0x1f9166(0x23a)],_0x59a402[_0x1f9166(0x174)]=(await this[_0x1f9166(0x157)](LTM_DP_DRIFT_LAST_CHECK))[_0x1f9166(0x23a)];}catch(_0x1f88d1){}this['sendTo'](_0x159a23[_0x1f9166(0x108)],_0x159a23[_0x1f9166(0x128)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x59a402,'analysisHistory':this[_0x1f9166(0x16a)]},_0x159a23[_0x1f9166(0x1f7)]);}else{if(_0x159a23[_0x1f9166(0x128)]===_0x1f9166(0x222)){const _0x52c14e=await this[_0x1f9166(0x22f)](_0x1f9166(0x1cb),'enum'),_0x4c1e53=[];if(_0x52c14e)for(const _0x46c381 in _0x52c14e){const _0x276a32=_0x52c14e[_0x46c381],_0x4a0ef8=(_0x276a32[_0x1f9166(0x240)]&&typeof _0x276a32[_0x1f9166(0x240)][_0x1f9166(0x24f)]===_0x1f9166(0x1da)?_0x276a32[_0x1f9166(0x240)][_0x1f9166(0x24f)]['de']:_0x276a32[_0x1f9166(0x240)][_0x1f9166(0x24f)])||_0x276a32[_0x1f9166(0x240)][_0x1f9166(0x24f)];_0x4c1e53[_0x1f9166(0x1b1)]({'id':_0x46c381,'name':_0x4a0ef8});}this[_0x1f9166(0x165)](_0x159a23[_0x1f9166(0x108)],_0x159a23[_0x1f9166(0x128)],{'success':!![],'enums':_0x4c1e53},_0x159a23[_0x1f9166(0x1f7)]);}else{if(_0x159a23['command']===_0x1f9166(0x24e)){this[_0x1f9166(0x191)][_0x1f9166(0x254)]('Received\x20scanDevices\x20request\x20from\x20Admin\x20UI.');const _0x348fb8=_0x159a23[_0x1f9166(0x204)]||{};try{const _0x5d7195=await this[_0x1f9166(0x27d)](_0x348fb8);this[_0x1f9166(0x165)](_0x159a23['from'],_0x159a23[_0x1f9166(0x128)],{'success':!![],'devices':_0x5d7195},_0x159a23[_0x1f9166(0x1f7)]);}catch(_0x43921f){this[_0x1f9166(0x165)](_0x159a23[_0x1f9166(0x108)],_0x159a23['command'],{'success':![],'error':_0x43921f[_0x1f9166(0x204)]},_0x159a23['callback']);}}else{if(_0x159a23[_0x1f9166(0x128)]===_0x1f9166(0xfe)){const {historyId:_0x2a3f29,rating:_0x382f91,comment:_0x5f05b6,alertReason:_0x2a77d5}=_0x159a23[_0x1f9166(0x204)];_0x2a3f29&&_0x382f91?(await this[_0x1f9166(0x16c)]({'timestamp':Date[_0x1f9166(0xe8)](),'historyId':_0x2a3f29,'rating':_0x382f91,'comment':_0x5f05b6,'alertReason':_0x2a77d5}),this['sendTo'](_0x159a23[_0x1f9166(0x108)],_0x159a23['command'],{'success':!![]},_0x159a23[_0x1f9166(0x1f7)])):this[_0x1f9166(0x165)](_0x159a23[_0x1f9166(0x108)],_0x159a23[_0x1f9166(0x128)],{'success':![],'error':'Missing\x20data'},_0x159a23[_0x1f9166(0x1f7)]);}}}}}}}}}if(require[a0_0x4a9de5(0x171)]!==module)module['exports']=_0x52ad80=>new CogniLiving(_0x52ad80);else new CogniLiving();