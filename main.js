const a0_0x1f8046=a0_0x4996;(function(_0x21bff1,_0x5f42e4){const _0x4e729d=a0_0x4996,_0x12a66f=_0x21bff1();while(!![]){try{const _0x43c4a5=parseInt(_0x4e729d(0x1da))/0x1+parseInt(_0x4e729d(0x382))/0x2+-parseInt(_0x4e729d(0x34b))/0x3+-parseInt(_0x4e729d(0x3b5))/0x4+parseInt(_0x4e729d(0x37d))/0x5*(-parseInt(_0x4e729d(0x1f4))/0x6)+parseInt(_0x4e729d(0x25c))/0x7+parseInt(_0x4e729d(0x20e))/0x8*(parseInt(_0x4e729d(0x317))/0x9);if(_0x43c4a5===_0x5f42e4)break;else _0x12a66f['push'](_0x12a66f['shift']());}catch(_0x455e97){_0x12a66f['push'](_0x12a66f['shift']());}}}(a0_0x565f,0x7f6ef));const a0_0x3044e5=(function(){let _0x5e5e1f=!![];return function(_0x3a4283,_0x1ae689){const _0xb48985=_0x5e5e1f?function(){if(_0x1ae689){const _0xb2a86=_0x1ae689['apply'](_0x3a4283,arguments);return _0x1ae689=null,_0xb2a86;}}:function(){};return _0x5e5e1f=![],_0xb48985;};}()),a0_0x4c82b8=a0_0x3044e5(this,function(){const _0xfc0770=a0_0x4996;return a0_0x4c82b8[_0xfc0770(0x1cb)]()['search']('(((.+)+)+)+$')['toString']()['constructor'](a0_0x4c82b8)[_0xfc0770(0x229)](_0xfc0770(0x284));});a0_0x4c82b8();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require('@google/generative-ai'),schedule=require('node-schedule'),{spawn,exec}=require(a0_0x1f8046(0x2ff)),path=require(a0_0x1f8046(0x302)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',LTM_SCHEDULE=a0_0x1f8046(0x217),MODE_RESET_SCHEDULE=a0_0x1f8046(0x38e),ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,LTM_DP_RAW_LOG=a0_0x1f8046(0x279),LTM_DP_DAILY_DIGESTS=a0_0x1f8046(0x247),LTM_DP_STATUS=a0_0x1f8046(0x2d7),LTM_DP_TRIGGER_DIGEST=a0_0x1f8046(0x26e),LTM_DP_BASELINE_STATUS=a0_0x1f8046(0x261),LTM_DP_DRIFT_CHANNEL=a0_0x1f8046(0x260),LTM_DP_DRIFT_STATUS=a0_0x1f8046(0x398),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x1f8046(0x248),SYSTEM_DP_MODE=a0_0x1f8046(0x28e),HARD_IGNORE_TERMS=['scriptProblem',a0_0x1f8046(0x2a3),a0_0x1f8046(0x2e9),'unreach',a0_0x1f8046(0x1e1),a0_0x1f8046(0x332),a0_0x1f8046(0x311),a0_0x1f8046(0x2cc),'error','fault',a0_0x1f8046(0x2a9),'direction',a0_0x1f8046(0x269),a0_0x1f8046(0x2c0),a0_0x1f8046(0x399),a0_0x1f8046(0x300),'reachable','link_quality'],BAD_NAMES=[a0_0x1f8046(0x289),a0_0x1f8046(0x293),a0_0x1f8046(0x213),a0_0x1f8046(0x2dc),a0_0x1f8046(0x1d0),a0_0x1f8046(0x2f4),'on',a0_0x1f8046(0x3b4),'switch','position',a0_0x1f8046(0x343),a0_0x1f8046(0x214),'cover',a0_0x1f8046(0x2b3),a0_0x1f8046(0x2ed),a0_0x1f8046(0x301),a0_0x1f8046(0x2ba),a0_0x1f8046(0x297),a0_0x1f8046(0x310),a0_0x1f8046(0x320),a0_0x1f8046(0x2a4),a0_0x1f8046(0x236),a0_0x1f8046(0x23e),a0_0x1f8046(0x2e5),a0_0x1f8046(0x337)],ADAPTER_BLACKLIST=['system.',a0_0x1f8046(0x243),a0_0x1f8046(0x296),a0_0x1f8046(0x1f3),a0_0x1f8046(0x312),a0_0x1f8046(0x22e),'icons-mfd.',a0_0x1f8046(0x3b1),a0_0x1f8046(0x209),'javascript.',a0_0x1f8046(0x245)],SYSTEM_MODES={'NORMAL':a0_0x1f8046(0x1c9),'VACATION':a0_0x1f8046(0x33a),'PARTY':a0_0x1f8046(0x26a),'GUEST':a0_0x1f8046(0x364)},AUTO_RESET_MODES=[SYSTEM_MODES['PARTY'],SYSTEM_MODES[a0_0x1f8046(0x388)]],PERSONA_MAPPING={'generic':a0_0x1f8046(0x30e),'senior_aal':'PRIORIT√ÑT:\x20Gesundheit/AAL.','family':a0_0x1f8046(0x1e3),'single_comfort':a0_0x1f8046(0x2dd),'security':a0_0x1f8046(0x365)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x1fb7ff){const _0x1e64be=a0_0x1f8046;try{const _0x185d82=['analysis.history_debug_00',_0x1e64be(0x370)];for(const _0xf34287 of _0x185d82){try{const _0x59a35e=await _0x1fb7ff['getObjectAsync'](_0xf34287);_0x59a35e&&await _0x1fb7ff[_0x1e64be(0x347)](_0xf34287);}catch(_0x8e8c86){}}}catch(_0x15dd20){}}async function initHistory(_0x45f1c4){const _0x235513=a0_0x1f8046;try{const _0x38cbeb=await _0x45f1c4[_0x235513(0x2d1)](_0x235513(0x23c));_0x38cbeb&&_0x38cbeb[_0x235513(0x276)]&&(_0x45f1c4[_0x235513(0x215)]=JSON[_0x235513(0x2b7)](_0x38cbeb['val'][_0x235513(0x1cb)]()));}catch(_0x19fa5e){_0x45f1c4[_0x235513(0x215)]=[];}try{const _0x1a3e28=await _0x45f1c4['getStateAsync'](_0x235513(0x28c));if(_0x1a3e28&&_0x1a3e28[_0x235513(0x276)])_0x45f1c4[_0x235513(0x298)]=JSON[_0x235513(0x2b7)](_0x1a3e28['val'][_0x235513(0x1cb)]());}catch(_0x4a897f){_0x45f1c4[_0x235513(0x298)]=[];}if(_0x45f1c4[_0x235513(0x215)]&&_0x45f1c4[_0x235513(0x215)]['length']>0x0){_0x45f1c4[_0x235513(0x32e)][_0x235513(0x2ae)](_0x235513(0x1c6)+_0x45f1c4[_0x235513(0x215)][_0x235513(0x1f5)]+_0x235513(0x353));for(let _0xfc5aec=_0x45f1c4[_0x235513(0x215)]['length']-0x1;_0xfc5aec>=0x0;_0xfc5aec--){const _0x5c5208=_0x45f1c4[_0x235513(0x215)][_0xfc5aec];_0x5c5208&&_0x5c5208['id']!==undefined&&_0x5c5208[_0x235513(0x1d0)]!==undefined&&(_0x45f1c4[_0x235513(0x1fe)][_0x5c5208['id']]=_0x5c5208['value']);}}}async function initSystemConfig(_0x4c502b){const _0x476873=a0_0x1f8046;try{const _0x4934b1=await _0x4c502b[_0x476873(0x381)](_0x476873(0x30a));_0x4934b1&&_0x4934b1['common']&&(_0x4c502b[_0x476873(0x1e0)]={'latitude':_0x4934b1['common'][_0x476873(0x2e2)]||0x0,'longitude':_0x4934b1['common'][_0x476873(0x266)]||0x0,'city':_0x4934b1[_0x476873(0x3a5)][_0x476873(0x1f2)]||''});}catch(_0x4d9198){}}async function checkLicense(_0x304c74,_0x25cbff){const _0x4673b4=a0_0x1f8046;if(!_0x25cbff)return![];_0x304c74[_0x4673b4(0x33d)]=await getSystemUUID(_0x304c74);if(_0x25cbff===_0x4673b4(0x379)||_0x25cbff[_0x4673b4(0x283)](_0x4673b4(0x1cd)))return!![];return![];}async function getSystemUUID(_0x4c1d9c){const _0x419fe8=a0_0x1f8046;try{const _0x31d154=await _0x4c1d9c['getForeignObjectAsync']('system.meta.uuid');if(_0x31d154&&_0x31d154[_0x419fe8(0x3a0)]&&_0x31d154[_0x419fe8(0x3a0)]['uuid'])return _0x31d154[_0x419fe8(0x3a0)][_0x419fe8(0x2f0)];return'uuid-not-found';}catch(_0x2ba10c){return _0x419fe8(0x235);}}async function createAllObjects(_0x3e5882){const _0x526db7=a0_0x1f8046;await checkSystemObjects(_0x3e5882),await _0x3e5882[_0x526db7(0x2b5)]('system.presenceWho',{'type':'state','common':{'name':'Who\x20is\x20present?','type':_0x526db7(0x1f6),'role':'text','read':!![],'write':![],'def':''},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)](_0x526db7(0x3a4),{'type':_0x526db7(0x213),'common':{'name':_0x526db7(0x2d3),'type':_0x526db7(0x1f6),'role':_0x526db7(0x30d),'read':!![],'write':![]},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)](_0x526db7(0x23c),{'type':'state','common':{'name':_0x526db7(0x2eb),'type':_0x526db7(0x1f6),'role':_0x526db7(0x30d),'read':!![],'write':![]},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)](_0x526db7(0x33b),{'type':_0x526db7(0x213),'common':{'name':_0x526db7(0x2c4),'type':_0x526db7(0x25e),'role':_0x526db7(0x2c6),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)](_0x526db7(0x38c),{'type':'state','common':{'name':'Trigger\x20Briefing\x20(Test)','type':_0x526db7(0x25e),'role':_0x526db7(0x2c6),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)]('analysis.lastResult',{'type':_0x526db7(0x213),'common':{'name':'Last\x20Result','type':_0x526db7(0x1f6),'role':_0x526db7(0x30d),'read':!![],'write':![]},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)](_0x526db7(0x29a),{'type':_0x526db7(0x213),'common':{'name':_0x526db7(0x292),'type':_0x526db7(0x25e),'role':_0x526db7(0x22f),'read':!![],'write':![],'def':![]},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)](_0x526db7(0x26b),{'type':_0x526db7(0x213),'common':{'name':_0x526db7(0x304),'type':'boolean','role':_0x526db7(0x26d),'read':!![],'write':![],'def':![]},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)](_0x526db7(0x227),{'type':_0x526db7(0x213),'common':{'name':_0x526db7(0x374),'type':'string','role':_0x526db7(0x1c2),'read':!![],'write':![]},'native':{}}),await _0x3e5882['setObjectNotExistsAsync'](_0x526db7(0x31e),{'type':'state','common':{'name':_0x526db7(0x35c),'type':_0x526db7(0x1f6),'role':_0x526db7(0x265),'read':!![],'write':![]},'native':{}}),await _0x3e5882['setObjectNotExistsAsync'](_0x526db7(0x39e),{'type':_0x526db7(0x213),'common':{'name':_0x526db7(0x2de),'type':'string','role':_0x526db7(0x213),'read':!![],'write':![],'def':_0x526db7(0x392)},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)]('analysis.comfortSummary',{'type':_0x526db7(0x213),'common':{'name':_0x526db7(0x1ea),'type':_0x526db7(0x1f6),'role':_0x526db7(0x265),'read':!![],'write':![]},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)]('analysis.comfortSuggestion',{'type':'state','common':{'name':_0x526db7(0x264),'type':_0x526db7(0x1f6),'role':'text','read':!![],'write':![]},'native':{}}),await _0x3e5882[_0x526db7(0x208)](_0x526db7(0x240),{'type':_0x526db7(0x1ff),'common':{'name':_0x526db7(0x2fe)},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)](_0x526db7(0x2a7),{'type':_0x526db7(0x213),'common':{'name':_0x526db7(0x373),'type':'boolean','role':_0x526db7(0x321),'read':!![],'write':![],'def':![]},'native':{}}),await _0x3e5882['setObjectNotExistsAsync'](_0x526db7(0x29e),{'type':_0x526db7(0x213),'common':{'name':'Description','type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)](_0x526db7(0x34f),{'type':_0x526db7(0x213),'common':{'name':'Action','type':_0x526db7(0x1f6),'role':'text','read':!![],'write':![]},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)](_0x526db7(0x1e5),{'type':'state','common':{'name':_0x526db7(0x39c),'type':_0x526db7(0x1f6),'role':'text','read':!![],'write':![]},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)](_0x526db7(0x2fa),{'type':'state','common':{'name':_0x526db7(0x3a3),'type':_0x526db7(0x1f6),'role':_0x526db7(0x265),'read':!![],'write':![]},'native':{}}),await _0x3e5882['setObjectNotExistsAsync'](_0x526db7(0x1fc),{'type':_0x526db7(0x213),'common':{'name':_0x526db7(0x371),'type':_0x526db7(0x25e),'role':_0x526db7(0x348),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)](_0x526db7(0x25f),{'type':_0x526db7(0x213),'common':{'name':_0x526db7(0x230),'type':'boolean','role':_0x526db7(0x2c6),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)](_0x526db7(0x28c),{'type':'state','common':{'name':_0x526db7(0x345),'type':'string','role':_0x526db7(0x30d),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x3e5882['setObjectNotExistsAsync']('analysis.feedbackHistory',{'type':_0x526db7(0x213),'common':{'name':_0x526db7(0x263),'type':_0x526db7(0x1f6),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await _0x3e5882['extendObjectAsync'](_0x526db7(0x36d),{'type':'channel','common':{'name':_0x526db7(0x249)},'native':{}}),await _0x3e5882['setObjectNotExistsAsync']('analysis.health.sleepScore',{'type':_0x526db7(0x213),'common':{'name':_0x526db7(0x2af),'type':'number','role':'value.health','read':!![],'write':![],'def':0x0},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)](_0x526db7(0x23d),{'type':_0x526db7(0x213),'common':{'name':'Restlessness\x20Level','type':_0x526db7(0x1f6),'role':_0x526db7(0x265),'read':!![],'write':![],'def':_0x526db7(0x21f)},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)]('analysis.health.notes',{'type':_0x526db7(0x213),'common':{'name':_0x526db7(0x251),'type':'string','role':_0x526db7(0x265),'read':!![],'write':![],'def':''},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)](_0x526db7(0x29f),{'type':'state','common':{'name':_0x526db7(0x2e7),'type':_0x526db7(0x1f6),'role':_0x526db7(0x265),'read':!![],'write':![],'def':_0x526db7(0x392)},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)]('analysis.health.trendValue',{'type':_0x526db7(0x213),'common':{'name':_0x526db7(0x34d),'type':_0x526db7(0x33c),'role':_0x526db7(0x1d0),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x3e5882['extendObjectAsync'](_0x526db7(0x239),{'type':_0x526db7(0x1ff),'common':{'name':_0x526db7(0x3a6)},'native':{}}),await _0x3e5882[_0x526db7(0x2b5)]('LTM.trainingData.sequences',{'type':_0x526db7(0x213),'common':{'name':'Recorded\x20Motion\x20Sequences','type':_0x526db7(0x1f6),'role':_0x526db7(0x30d),'read':!![],'write':![],'def':'[]','desc':_0x526db7(0x27d)},'native':{}}),await _0x3e5882['setObjectNotExistsAsync'](_0x526db7(0x386),{'type':_0x526db7(0x213),'common':{'name':_0x526db7(0x30f),'type':_0x526db7(0x1f6),'role':'json','read':!![],'write':![],'def':'[]','desc':_0x526db7(0x27c)},'native':{}}),await checkLtmObjects(_0x3e5882),await checkLtmDriftObjects(_0x3e5882);}async function checkSystemObjects(_0x2292f0){const _0x533d21=a0_0x1f8046;await _0x2292f0['extendObjectAsync']('system',{'type':_0x533d21(0x1ff),'common':{'name':_0x533d21(0x3a9)},'native':{}}),await _0x2292f0[_0x533d21(0x208)](SYSTEM_DP_MODE,{'type':_0x533d21(0x213),'common':{'name':_0x533d21(0x3b3),'type':_0x533d21(0x1f6),'role':_0x533d21(0x213),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x533d21(0x295)],'states':{[SYSTEM_MODES['NORMAL']]:_0x533d21(0x2cb),[SYSTEM_MODES[_0x533d21(0x350)]]:_0x533d21(0x2cd),[SYSTEM_MODES['PARTY']]:'Party',[SYSTEM_MODES[_0x533d21(0x388)]]:_0x533d21(0x2b4)}},'native':{}});}async function checkLtmObjects(_0x3f4050){const _0x52c1ff=a0_0x1f8046;await _0x3f4050[_0x52c1ff(0x208)](_0x52c1ff(0x290),{'type':_0x52c1ff(0x1ff),'common':{'name':_0x52c1ff(0x290)},'native':{}}),await _0x3f4050['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':'state','common':{'name':'Raw\x20Log','type':'string','role':_0x52c1ff(0x30d),'read':!![],'write':![]},'native':{}}),await _0x3f4050[_0x52c1ff(0x208)](LTM_DP_DAILY_DIGESTS,{'type':_0x52c1ff(0x213),'common':{'name':_0x52c1ff(0x1d1),'type':_0x52c1ff(0x1f6),'role':_0x52c1ff(0x30d),'read':!![],'write':![]},'native':{}}),await _0x3f4050['extendObjectAsync'](LTM_DP_STATUS,{'type':'state','common':{'name':'Processing\x20Status','type':_0x52c1ff(0x1f6),'role':_0x52c1ff(0x265),'read':!![],'write':![]},'native':{}}),await _0x3f4050[_0x52c1ff(0x208)](LTM_DP_TRIGGER_DIGEST,{'type':_0x52c1ff(0x213),'common':{'name':'Trigger\x20Digest','type':'boolean','role':_0x52c1ff(0x2c6),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x3f4050[_0x52c1ff(0x208)](LTM_DP_BASELINE_STATUS,{'type':'state','common':{'name':_0x52c1ff(0x2d0),'type':'string','role':_0x52c1ff(0x265),'read':!![],'write':![]},'native':{}});}async function checkLtmDriftObjects(_0x1cb343){const _0x26dc85=a0_0x1f8046;await _0x1cb343[_0x26dc85(0x208)](LTM_DP_DRIFT_CHANNEL,{'type':_0x26dc85(0x1ff),'common':{'name':_0x26dc85(0x1f1)},'native':{}}),await _0x1cb343[_0x26dc85(0x208)](LTM_DP_DRIFT_STATUS,{'type':_0x26dc85(0x213),'common':{'name':_0x26dc85(0x1dc),'type':_0x26dc85(0x1f6),'role':_0x26dc85(0x213),'read':!![],'write':![],'def':_0x26dc85(0x392)},'native':{}}),await _0x1cb343[_0x26dc85(0x208)](LTM_DP_DRIFT_DETAILS,{'type':'state','common':{'name':_0x26dc85(0x225),'type':_0x26dc85(0x1f6),'role':_0x26dc85(0x265),'read':!![],'write':![]},'native':{}}),await _0x1cb343['extendObjectAsync'](LTM_DP_DRIFT_LAST_CHECK,{'type':'state','common':{'name':_0x26dc85(0x2fb),'type':_0x26dc85(0x33c),'role':_0x26dc85(0x2e6),'read':!![],'write':![]},'native':{}});}async function loadSystemMode(_0x5551ff){const _0x3346db=a0_0x1f8046;try{const _0x3e6ff7=await _0x5551ff['getStateAsync'](SYSTEM_DP_MODE);_0x3e6ff7&&_0x3e6ff7[_0x3346db(0x276)]&&Object['values'](SYSTEM_MODES)[_0x3346db(0x273)](_0x3e6ff7[_0x3346db(0x276)])?_0x5551ff[_0x3346db(0x32a)]=_0x3e6ff7[_0x3346db(0x276)]:(_0x5551ff[_0x3346db(0x32a)]=SYSTEM_MODES['NORMAL'],await _0x5551ff['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x3346db(0x295)],'ack':!![]}));}catch(_0x2ae833){_0x5551ff['currentSystemMode']=SYSTEM_MODES[_0x3346db(0x295)];}}async function loadRawEventLog(_0x75efce){const _0x5188a6=a0_0x1f8046;try{const _0x4badfd=await _0x75efce[_0x5188a6(0x2d1)](LTM_DP_RAW_LOG);if(_0x4badfd&&_0x4badfd['val'])_0x75efce['rawEventLog']=JSON[_0x5188a6(0x2b7)](_0x4badfd[_0x5188a6(0x276)]);}catch(_0x6b977d){_0x75efce[_0x5188a6(0x202)]=[];}}async function saveRawEventLog(_0xe3a99a){const _0x2b1443=a0_0x1f8046;_0xe3a99a[_0x2b1443(0x202)]['length']>RAW_LOG_MAX_SIZE&&_0xe3a99a[_0x2b1443(0x202)][_0x2b1443(0x222)](0x0,_0xe3a99a['rawEventLog'][_0x2b1443(0x1f5)]-RAW_LOG_MAX_SIZE),await _0xe3a99a[_0x2b1443(0x1c4)](LTM_DP_RAW_LOG,{'val':JSON[_0x2b1443(0x2f8)](_0xe3a99a[_0x2b1443(0x202)]),'ack':!![]});}async function loadDailyDigests(_0x8701cb){const _0x4b4c34=a0_0x1f8046;try{const _0x39fe54=await _0x8701cb['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x39fe54&&_0x39fe54[_0x4b4c34(0x276)])_0x8701cb[_0x4b4c34(0x2e8)]=JSON[_0x4b4c34(0x2b7)](_0x39fe54[_0x4b4c34(0x276)]);}catch(_0x3b6560){_0x8701cb[_0x4b4c34(0x2e8)]=[];}await updateBaselineStatus(_0x8701cb);}async function saveDailyDigests(_0x37c2a5,_0x43a461=!![]){const _0x16234d=a0_0x1f8046,_0x2f9068=_0x37c2a5[_0x16234d(0x32b)]['ltmLtbWindowDays']||0x3c;_0x37c2a5['dailyDigests']['length']>_0x2f9068&&_0x37c2a5[_0x16234d(0x2e8)][_0x16234d(0x222)](0x0,_0x37c2a5[_0x16234d(0x2e8)][_0x16234d(0x1f5)]-_0x2f9068);await _0x37c2a5[_0x16234d(0x1c4)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x16234d(0x2f8)](_0x37c2a5['dailyDigests']),'ack':!![]});if(_0x43a461)await updateBaselineStatus(_0x37c2a5);}async function updateAnalysisHistory(_0x1a52ec,_0x1c9dbc){const _0x98b25d=a0_0x1f8046;_0x1a52ec['analysisHistory'][_0x98b25d(0x29d)](_0x1c9dbc);if(_0x1a52ec[_0x98b25d(0x298)]['length']>ANALYSIS_HISTORY_MAX_SIZE)_0x1a52ec[_0x98b25d(0x298)][_0x98b25d(0x20c)]();await _0x1a52ec[_0x98b25d(0x1c4)](_0x98b25d(0x28c),{'val':JSON[_0x98b25d(0x2f8)](_0x1a52ec[_0x98b25d(0x298)]),'ack':!![]});}async function updateBaselineStatus(_0x3131fa){const _0x545ef4=a0_0x1f8046;if(!_0x3131fa[_0x545ef4(0x226)]){await _0x3131fa[_0x545ef4(0x1c4)](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0x3afdc3=_0x3131fa[_0x545ef4(0x2e8)][_0x545ef4(0x1f5)]>=(_0x3131fa[_0x545ef4(0x32b)]['minDaysForBaseline']||0x7)?_0x545ef4(0x23b)+_0x3131fa[_0x545ef4(0x2e8)][_0x545ef4(0x1f5)]+'\x20Tage)':_0x545ef4(0x36e)+_0x3131fa[_0x545ef4(0x2e8)][_0x545ef4(0x1f5)]+'/'+(_0x3131fa[_0x545ef4(0x32b)]['minDaysForBaseline']||0x7)+')';await _0x3131fa[_0x545ef4(0x1c4)](LTM_DP_BASELINE_STATUS,{'val':_0x3afdc3,'ack':!![]});}async function initSensorSubscriptions(_0x28971f){const _0x3382fb=a0_0x1f8046,_0x47e531=_0x28971f[_0x3382fb(0x32b)]['devices'];if(_0x47e531&&_0x47e531['length']>0x0){_0x28971f[_0x3382fb(0x32e)][_0x3382fb(0x2ae)](_0x3382fb(0x272)+_0x47e531[_0x3382fb(0x1f5)]+_0x3382fb(0x2c2));for(const _0x31bb96 of _0x47e531){if(_0x31bb96['id']){await _0x28971f[_0x3382fb(0x21d)](_0x31bb96['id']);try{const _0x57ea63=await _0x28971f[_0x3382fb(0x1de)](_0x31bb96['id']);if(_0x57ea63)_0x28971f['sensorLastValues'][_0x31bb96['id']]=_0x57ea63[_0x3382fb(0x276)];}catch(_0xb1609d){}}}}}async function initPresenceSubscriptions(_0x518847){const _0x8a2055=a0_0x1f8046,_0x8cb367=_0x518847['config'][_0x8a2055(0x38f)]||[];if(_0x8cb367[_0x8a2055(0x1f5)]>0x0){_0x518847[_0x8a2055(0x32e)][_0x8a2055(0x2ae)](_0x8a2055(0x272)+_0x8cb367[_0x8a2055(0x1f5)]+_0x8a2055(0x36b));for(const _0x4aaa4f of _0x8cb367){await _0x518847[_0x8a2055(0x21d)](_0x4aaa4f);}try{await checkWifiPresence(_0x518847);}catch(_0x2cda21){}}}async function getWeatherContext(_0x3988c9){const _0x3db492=a0_0x1f8046;try{if(!_0x3988c9[_0x3db492(0x32b)][_0x3db492(0x20f)])return'Wetter:\x20Deaktiviert';let _0x34e22a='';const _0x3215be=_0x3988c9['config'][_0x3db492(0x20b)];if(_0x3215be)try{if(_0x3215be[_0x3db492(0x273)](_0x3db492(0x369))){const _0xd336c2=await _0x3988c9[_0x3db492(0x1de)](_0x3215be+_0x3db492(0x1c8));if(_0xd336c2&&_0xd336c2[_0x3db492(0x276)])_0x34e22a=_0xd336c2['val'];}else{if(_0x3215be[_0x3db492(0x273)](_0x3db492(0x324))){const _0x29b4ef=await _0x3988c9[_0x3db492(0x1de)](_0x3215be+'.NextHours.Location_1.Day_1.current.symbol_desc');if(_0x29b4ef&&_0x29b4ef[_0x3db492(0x276)])_0x34e22a=_0x29b4ef['val'];}else{if(_0x3215be['includes'](_0x3db492(0x39b))){const _0x5ae7ab=await _0x3988c9[_0x3db492(0x1de)](_0x3215be+_0x3db492(0x33f));if(_0x5ae7ab&&_0x5ae7ab['val'])_0x34e22a=_0x5ae7ab[_0x3db492(0x276)];}}}}catch(_0x567b08){}if(!_0x34e22a){const _0x592684=[_0x3db492(0x2c8),_0x3db492(0x367),'weatherunderground.0','openweathermap.0'];for(const _0x4bffd7 of _0x592684){try{const _0x2bfe35=await _0x3988c9[_0x3db492(0x381)](_0x4bffd7);if(_0x2bfe35){if(_0x4bffd7[_0x3db492(0x273)]('accuweather')){const _0x9f3ed5=await _0x3988c9[_0x3db492(0x1de)](_0x4bffd7+'.Summary.Current');if(_0x9f3ed5&&_0x9f3ed5['val']){_0x34e22a=_0x9f3ed5[_0x3db492(0x276)];break;}}}}catch(_0x392d2f){}}}return _0x34e22a?_0x3db492(0x237)+_0x34e22a:_0x3db492(0x252);}catch(_0x3b7581){return _0x3db492(0x2f2)+_0x3b7581['message'];}}async function getCalendarContext(_0x4db8d5){const _0x3afdcb=a0_0x1f8046;try{if(!_0x4db8d5['config']['useCalendar'])return _0x3afdcb(0x1df);let _0xb57149=_0x4db8d5[_0x3afdcb(0x32b)][_0x3afdcb(0x28d)]||_0x3afdcb(0x3a1),_0x10feb5=_0x4db8d5[_0x3afdcb(0x32b)][_0x3afdcb(0x22a)]||[];if(typeof _0x10feb5===_0x3afdcb(0x1f6))_0x10feb5=_0x10feb5['split'](',');try{const _0xbb0e1d=await _0x4db8d5[_0x3afdcb(0x1de)](_0xb57149+_0x3afdcb(0x27b));if(_0xbb0e1d&&_0xbb0e1d[_0x3afdcb(0x276)]){let _0x1b0687=tryParse(_0xbb0e1d[_0x3afdcb(0x276)]);if(_0x1b0687&&Array['isArray'](_0x1b0687)){if(_0x10feb5['length']>0x0)_0x1b0687=_0x1b0687['filter'](_0xf0db6f=>_0x10feb5['includes'](_0xf0db6f[_0x3afdcb(0x2d4)]||''));else return'KALENDER:\x20Keine\x20Kalender\x20ausgew√§hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)';if(_0x1b0687[_0x3afdcb(0x1f5)]>0x0){const _0x1c7de2=_0x1b0687[_0x3afdcb(0x344)](0x0,0x3)[_0x3afdcb(0x1e6)](_0x1d953d=>{const _0x1159bc=_0x3afdcb;let _0x4822ce=_0x1d953d['date'];if(_0x1d953d[_0x1159bc(0x23f)])_0x4822ce+='\x20'+_0x1d953d['time'];return _0x4822ce+':\x20'+_0x1d953d[_0x1159bc(0x378)]+'\x20('+_0x1d953d['_calName']+')';});return _0x3afdcb(0x1cf)+_0x1c7de2[_0x3afdcb(0x2f1)]('\x20|\x20');}else return _0x3afdcb(0x2ec);}}}catch(_0x20a5e7){_0x4db8d5['log'][_0x3afdcb(0x2c7)]('Error\x20reading\x20calendar\x20table:\x20'+_0x20a5e7[_0x3afdcb(0x2ca)]);}return'KALENDER:\x20Keine\x20Daten';}catch(_0x4a6d5f){return _0x3afdcb(0x28b)+_0x4a6d5f[_0x3afdcb(0x2ca)];}}async function getCalendarNames(_0x35e724,_0x9e2b84){const _0x5b2605=a0_0x1f8046;try{const _0x3831b3=await _0x35e724[_0x5b2605(0x1de)](_0x9e2b84+'.data.table');if(_0x3831b3&&_0x3831b3[_0x5b2605(0x276)]){const _0x465f8e=tryParse(_0x3831b3[_0x5b2605(0x276)]);if(_0x465f8e&&Array[_0x5b2605(0x35d)](_0x465f8e)){const _0x52b30a=[...new Set(_0x465f8e[_0x5b2605(0x1e6)](_0x38087d=>_0x38087d[_0x5b2605(0x2d4)])[_0x5b2605(0x258)](Boolean))];return _0x52b30a[_0x5b2605(0x277)]();}}return[];}catch(_0x468680){return _0x35e724[_0x5b2605(0x32e)][_0x5b2605(0x24f)](_0x5b2605(0x3a2)+_0x468680['message']),[];}}async function checkWifiPresence(_0x29d476){const _0x3c80d4=a0_0x1f8046;try{const _0x591a75=_0x29d476[_0x3c80d4(0x32b)]['presenceDevices']||[];let _0x54e795=![];const _0x3ab169=[];for(const _0x2b74dc of _0x591a75){try{const _0x2e36f3=await _0x29d476[_0x3c80d4(0x1de)](_0x2b74dc);if(_0x2e36f3&&(_0x2e36f3[_0x3c80d4(0x276)]===!![]||_0x2e36f3[_0x3c80d4(0x276)]===_0x3c80d4(0x1be)||_0x2e36f3['val']===0x1)){_0x54e795=!![];const _0x5c72a4=await _0x29d476[_0x3c80d4(0x381)](_0x2b74dc);let _0x5a9579=_0x2b74dc;_0x5c72a4&&_0x5c72a4[_0x3c80d4(0x3a5)]&&_0x5c72a4[_0x3c80d4(0x3a5)][_0x3c80d4(0x3ab)]&&(_0x5a9579=typeof _0x5c72a4[_0x3c80d4(0x3a5)]['name']===_0x3c80d4(0x219)?_0x5c72a4[_0x3c80d4(0x3a5)][_0x3c80d4(0x3ab)]['de']||_0x5c72a4[_0x3c80d4(0x3a5)]['name']['en']:_0x5c72a4[_0x3c80d4(0x3a5)][_0x3c80d4(0x3ab)]),_0x3ab169['push'](_0x5a9579);}}catch(_0x553dd0){}}return await _0x29d476[_0x3c80d4(0x1c4)](_0x3c80d4(0x397),{'val':_0x3ab169[_0x3c80d4(0x2f1)](',\x20'),'ack':!![]}),_0x54e795&&(_0x29d476[_0x3c80d4(0x23a)]&&(_0x29d476[_0x3c80d4(0x32e)][_0x3c80d4(0x2ae)](_0x3c80d4(0x255)),abortExitTimer(_0x29d476)),!_0x29d476[_0x3c80d4(0x2cf)]&&_0x29d476[_0x3c80d4(0x32a)]===SYSTEM_MODES[_0x3c80d4(0x295)]&&await setPresence(_0x29d476,!![])),_0x54e795;}catch(_0x2575ad){return _0x29d476[_0x3c80d4(0x32e)][_0x3c80d4(0x24f)](_0x3c80d4(0x22c)+_0x2575ad[_0x3c80d4(0x2ca)]),![];}}function startExitTimer(_0x1dd39b){const _0x5aa8c5=a0_0x1f8046;abortExitTimer(_0x1dd39b),_0x1dd39b[_0x5aa8c5(0x1f9)]=!![],_0x1dd39b[_0x5aa8c5(0x31c)]=setTimeout(()=>{_0x1dd39b['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x1dd39b[_0x5aa8c5(0x23a)]=setTimeout(()=>{setPresence(_0x1dd39b,![]),_0x1dd39b['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x9f3582){const _0x5ba5c6=a0_0x1f8046;if(_0x9f3582[_0x5ba5c6(0x23a)])clearTimeout(_0x9f3582[_0x5ba5c6(0x23a)]);if(_0x9f3582[_0x5ba5c6(0x31c)])clearTimeout(_0x9f3582[_0x5ba5c6(0x31c)]);_0x9f3582[_0x5ba5c6(0x23a)]=null,_0x9f3582[_0x5ba5c6(0x31c)]=null,_0x9f3582['isGracePeriodActive']=![];}async function setPresence(_0x2dfdba,_0x2399fc){const _0x4ade83=a0_0x1f8046;if(_0x2dfdba[_0x4ade83(0x2cf)]===_0x2399fc)return;_0x2dfdba[_0x4ade83(0x2cf)]=_0x2399fc,await _0x2dfdba[_0x4ade83(0x1c4)](_0x4ade83(0x1ca),{'val':_0x2399fc,'ack':!![]});}async function saveFeedback(_0x4d9543,_0x46e64b){const _0x3fd182=a0_0x1f8046;_0x4d9543[_0x3fd182(0x32e)][_0x3fd182(0x2ae)](_0x3fd182(0x26c)+JSON[_0x3fd182(0x2f8)](_0x46e64b));}async function runBaselineDriftAnalysis(_0x14cdf6){const _0x30651f=a0_0x1f8046;if(!_0x14cdf6['isProVersion']||!_0x14cdf6[_0x30651f(0x1e7)])return;const _0x3f14af=_0x14cdf6[_0x30651f(0x32b)]['ltmStbWindowDays']||0xe;if(_0x14cdf6[_0x30651f(0x2e8)]['length']<_0x3f14af+(_0x14cdf6['config'][_0x30651f(0x2ee)]||0x7)){await _0x14cdf6[_0x30651f(0x1c4)](LTM_DP_DRIFT_STATUS,{'val':_0x30651f(0x1c1),'ack':!![]});return;}const _0x271133=_0x14cdf6[_0x30651f(0x2e8)][_0x30651f(0x344)](-_0x3f14af),_0x13cd49=_0x14cdf6[_0x30651f(0x2e8)][_0x30651f(0x344)](0x0,_0x14cdf6['dailyDigests'][_0x30651f(0x1f5)]-_0x3f14af),_0x4928bb=_0x30651f(0x1d5)+JSON[_0x30651f(0x2f8)](_0x13cd49)+_0x30651f(0x2e0)+JSON[_0x30651f(0x2f8)](_0x271133);try{const _0x430d5a=await _0x14cdf6[_0x30651f(0x1e7)][_0x30651f(0x3b8)](_0x4928bb),_0x1734b8=JSON['parse'](_0x430d5a[_0x30651f(0x368)][_0x30651f(0x265)]()['replace'](/```json|```/g,'')[_0x30651f(0x216)]());_0x1734b8['baselineDrift']&&(await _0x14cdf6[_0x30651f(0x1c4)](LTM_DP_DRIFT_STATUS,{'val':_0x1734b8[_0x30651f(0x319)],'ack':!![]}),await _0x14cdf6[_0x30651f(0x1c4)](LTM_DP_DRIFT_DETAILS,{'val':_0x1734b8['driftDetails'],'ack':!![]}),await _0x14cdf6['setStateAsync'](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x30651f(0x1f7)](),'ack':!![]}));}catch(_0x374d44){}}function setupLtmScheduler(_0x214c79){const _0x2aaea1=a0_0x1f8046;try{if(_0x214c79[_0x2aaea1(0x32d)])_0x214c79[_0x2aaea1(0x32d)][_0x2aaea1(0x39f)]();if(!_0x214c79[_0x2aaea1(0x226)]){_0x214c79[_0x2aaea1(0x1c4)](LTM_DP_STATUS,{'val':_0x2aaea1(0x35a),'ack':!![]});return;}_0x214c79[_0x2aaea1(0x32d)]=schedule['scheduleJob'](LTM_SCHEDULE,()=>createDailyDigest(_0x214c79));}catch(_0x39e7a0){_0x214c79[_0x2aaea1(0x32e)][_0x2aaea1(0x24f)]('LTM\x20Sched\x20Error:\x20'+_0x39e7a0[_0x2aaea1(0x2ca)]);}}function setupModeResetScheduler(_0x4ee4e1){const _0x433bbd=a0_0x1f8046;try{if(_0x4ee4e1[_0x433bbd(0x359)])_0x4ee4e1[_0x433bbd(0x359)]['cancel']();_0x4ee4e1['modeResetJob']=schedule[_0x433bbd(0x256)](MODE_RESET_SCHEDULE,async()=>{const _0x4f9999=_0x433bbd;await loadSystemMode(_0x4ee4e1),AUTO_RESET_MODES[_0x4f9999(0x273)](_0x4ee4e1[_0x4f9999(0x32a)])&&await _0x4ee4e1['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x4f9999(0x295)],'ack':![]});});}catch(_0x26a830){_0x4ee4e1[_0x433bbd(0x32e)]['error'](_0x433bbd(0x291)+_0x26a830[_0x433bbd(0x2ca)]);}}function setupDriftAnalysisScheduler(_0xc120d0){const _0x123abc=a0_0x1f8046;try{if(_0xc120d0[_0x123abc(0x383)])clearInterval(_0xc120d0[_0x123abc(0x383)]);if(!_0xc120d0[_0x123abc(0x226)])return;_0xc120d0[_0x123abc(0x383)]=setInterval(()=>runBaselineDriftAnalysis(_0xc120d0),(_0xc120d0[_0x123abc(0x32b)][_0x123abc(0x362)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0xc120d0),0x1388);}catch(_0x1afabb){_0xc120d0['log'][_0x123abc(0x24f)](_0x123abc(0x1ee)+_0x1afabb[_0x123abc(0x2ca)]);}}function setupBriefingScheduler(_0xb95dd2){const _0x267cde=a0_0x1f8046;try{if(_0xb95dd2[_0x267cde(0x24e)])_0xb95dd2[_0x267cde(0x24e)][_0x267cde(0x39f)]();if(!_0xb95dd2[_0x267cde(0x32b)][_0x267cde(0x271)])return;const _0x91c79c=(_0xb95dd2[_0x267cde(0x32b)][_0x267cde(0x3b7)]||_0x267cde(0x2e3))[_0x267cde(0x1c3)](':'),_0x5b4ad8=parseInt(_0x91c79c[0x0])||0x8,_0x21efb2=parseInt(_0x91c79c[0x1])||0x0,_0x2394ae=_0x21efb2+'\x20'+_0x5b4ad8+_0x267cde(0x330);_0xb95dd2['log'][_0x267cde(0x2ae)](_0x267cde(0x387)+_0x5b4ad8+':'+(_0x21efb2<0xa?'0'+_0x21efb2:_0x21efb2)),_0xb95dd2[_0x267cde(0x24e)]=schedule[_0x267cde(0x256)](_0x2394ae,()=>{sendMorningBriefing(_0xb95dd2);});}catch(_0x273c61){_0xb95dd2[_0x267cde(0x32e)]['error'](_0x267cde(0x357)+_0x273c61[_0x267cde(0x2ca)]);}}async function sendNotification(_0xaa92df,_0x354735,_0xe9739f=![],_0x3d37cc=![]){const _0x1b76eb=a0_0x1f8046;_0xaa92df[_0x1b76eb(0x32e)][_0x1b76eb(0x2ae)]((_0xe9739f?_0x1b76eb(0x25b):'')+'Sending\x20notification:\x20\x22'+_0x354735+'\x22');const _0x3a9799=_0xaa92df['config'];let _0x35d178=0x0;if(_0x3a9799[_0x1b76eb(0x316)]){let _0x182001={};(_0x354735[_0x1b76eb(0x273)]('Alarm')||_0x3d37cc)&&(_0x182001={'reply_markup':{'inline_keyboard':[[{'text':_0x1b76eb(0x24a),'callback_data':_0x1b76eb(0x394)}],[{'text':_0x1b76eb(0x211),'callback_data':_0x1b76eb(0x2f9)}]]}}),await _0xaa92df[_0x1b76eb(0x2c5)](_0x3a9799[_0x1b76eb(0x2bc)],'send',{'text':_0x354735,'user':_0x3a9799['notifyTelegramRecipient'],..._0x182001}),_0x35d178++;}if(_0x3a9799[_0x1b76eb(0x27e)]){let _0x1920cf={'message':_0x354735,'title':_0x3d37cc?'üö®\x20EMERGENCY':_0x1b76eb(0x3af),'priority':_0x3d37cc?0x2:0x1,'device':_0x3a9799[_0x1b76eb(0x24d)]};_0x3d37cc&&(_0x1920cf[_0x1b76eb(0x1ed)]=0x1e,_0x1920cf[_0x1b76eb(0x25a)]=0xe10,_0x1920cf['sound']='siren'),await _0xaa92df[_0x1b76eb(0x2c5)](_0x3a9799['notifyPushoverInstance'],_0x1b76eb(0x327),_0x1920cf),_0x35d178++;}return _0x3a9799[_0x1b76eb(0x340)]&&(await _0xaa92df[_0x1b76eb(0x2c5)](_0x3a9799[_0x1b76eb(0x334)],_0x1b76eb(0x327),{'text':_0x354735,'to':_0x3a9799[_0x1b76eb(0x391)]}),_0x35d178++),_0x35d178;}async function setupTelegramListener(_0x5439e7){const _0xdaf045=a0_0x1f8046,_0x1a7c52=_0x5439e7[_0xdaf045(0x32b)][_0xdaf045(0x2bc)];_0x5439e7[_0xdaf045(0x32b)][_0xdaf045(0x316)]&&_0x1a7c52&&(_0x5439e7[_0xdaf045(0x32e)][_0xdaf045(0x2ae)](_0xdaf045(0x2d6)+_0x1a7c52+_0xdaf045(0x2d9)),await _0x5439e7[_0xdaf045(0x21d)](_0x1a7c52+_0xdaf045(0x385)));}async function handleTelegramResponse(_0x46c9d6,_0x5b659d){const _0xc18d60=a0_0x1f8046;let _0x12b5d5=_0x5b659d;_0x5b659d[_0xc18d60(0x283)]('[')&&(_0x12b5d5=_0x5b659d[_0xc18d60(0x32f)](_0x5b659d[_0xc18d60(0x31b)](']')+0x1));if(_0x12b5d5===_0xc18d60(0x394))_0x46c9d6['log'][_0xc18d60(0x2ae)](_0xc18d60(0x21c)),await _0x46c9d6[_0xc18d60(0x1c4)](_0xc18d60(0x29a),{'val':![],'ack':!![]}),await _0x46c9d6[_0xc18d60(0x1c4)]('analysis.alertReason',{'val':_0xc18d60(0x2b0),'ack':!![]}),_0x46c9d6[_0xc18d60(0x309)]=![],sendNotification(_0x46c9d6,'‚úÖ\x20Alarm\x20quittiert.\x20System\x20normal.',![]);else _0x12b5d5===_0xc18d60(0x2f9)&&(_0x46c9d6[_0xc18d60(0x32e)][_0xc18d60(0x2c7)](_0xc18d60(0x1f8)),sendNotification(_0x46c9d6,_0xc18d60(0x3b9),![],!![]));}async function runAutopilot(_0x583dd3){const _0x49412c=a0_0x1f8046,_0xada5e7=_0x583dd3['config'][_0x49412c(0x212)],_0x303269=_0x583dd3[_0x49412c(0x215)][_0x49412c(0x1f5)]>0x0?_0x583dd3['eventHistory'][0x0][_0x49412c(0x335)]:Date['now'](),_0x549763=(Date['now']()-_0x303269)/(0x3e8*0x3c*0x3c);let _0x2e58dc='';_0x583dd3['config'][_0x49412c(0x329)]&&_0x583dd3[_0x49412c(0x32a)]===SYSTEM_MODES[_0x49412c(0x295)]&&_0x583dd3[_0x49412c(0x2cf)]&&(_0x549763>_0xada5e7&&(_0x2e58dc=_0x49412c(0x361)+_0x549763['toFixed'](0x1)+_0x49412c(0x1bd))),runGeminiAnalysis(_0x583dd3,_0x2e58dc)[_0x49412c(0x21e)](_0x464b22=>_0x583dd3[_0x49412c(0x32e)][_0x49412c(0x24f)](_0x464b22));}async function createDailyDigest(_0x4b327f){const _0x12ba04=a0_0x1f8046;if(!_0x4b327f[_0x12ba04(0x226)])return;await _0x4b327f[_0x12ba04(0x1c4)](LTM_DP_STATUS,{'val':_0x12ba04(0x2e1)+new Date()[_0x12ba04(0x3bd)](),'ack':!![]});if(!_0x4b327f[_0x12ba04(0x1e7)]||_0x4b327f[_0x12ba04(0x202)][_0x12ba04(0x1f5)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4b327f[_0x12ba04(0x1c4)](LTM_DP_STATUS,{'val':_0x12ba04(0x35b),'ack':!![]});return;}const _0x4daa95=JSON[_0x12ba04(0x2b7)](JSON[_0x12ba04(0x2f8)](_0x4b327f[_0x12ba04(0x202)])),_0x4627c9=_0x4daa95['length'],_0x192417='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x12ba04(0x2f8)](_0x4daa95);try{const _0xe910d5=await _0x4b327f['geminiModel']['generateContent'](_0x192417),_0x4529f5=JSON[_0x12ba04(0x2b7)](_0xe910d5[_0x12ba04(0x368)][_0x12ba04(0x265)]()['replace'](/```json|```/g,'')[_0x12ba04(0x216)]());_0x4529f5[_0x12ba04(0x2a2)]&&(_0x4b327f[_0x12ba04(0x2e8)][_0x12ba04(0x380)]({'timestamp':new Date()[_0x12ba04(0x313)](),'eventCount':_0x4627c9,'summary':_0x4529f5[_0x12ba04(0x2a2)],'activityLevel':_0x4529f5[_0x12ba04(0x294)],'systemMode':_0x4b327f[_0x12ba04(0x32a)]}),await saveDailyDigests(_0x4b327f),_0x4b327f[_0x12ba04(0x202)]=[],await saveRawEventLog(_0x4b327f),await _0x4b327f['setStateAsync'](LTM_DP_STATUS,{'val':_0x12ba04(0x34a)+_0x4627c9+_0x12ba04(0x210),'ack':!![]}),runPythonHealthCheck(_0x4b327f));}catch(_0x1546ad){await _0x4b327f[_0x12ba04(0x1c4)](LTM_DP_STATUS,{'val':'Error:\x20'+_0x1546ad[_0x12ba04(0x2ca)],'ack':!![]});}}async function sendMorningBriefing(_0x48da88){const _0x549742=a0_0x1f8046;if(!_0x48da88[_0x549742(0x1e7)])return;_0x48da88[_0x549742(0x32e)]['info'](_0x549742(0x315));const _0x12f13c=_0x48da88[_0x549742(0x2e8)][_0x549742(0x1f5)]>0x0?_0x48da88[_0x549742(0x2e8)][_0x48da88[_0x549742(0x2e8)][_0x549742(0x1f5)]-0x1]:null,_0x1374e1=_0x12f13c&&_0x12f13c[_0x549742(0x2a5)]?_0x12f13c['health']['sleepScore']:'N/A',_0x195c31=new Date();_0x195c31[_0x549742(0x1dd)](0x4,0x0,0x0,0x0);const _0x67f68b=_0x48da88[_0x549742(0x215)][_0x549742(0x258)](_0x28a90c=>new Date(_0x28a90c[_0x549742(0x335)])>_0x195c31),_0x5eaf4e=PERSONA_MAPPING[_0x48da88[_0x549742(0x32b)]['aiPersona']||_0x549742(0x1eb)],_0x7d49c8=_0x48da88[_0x549742(0x32b)][_0x549742(0x207)]||'',_0x2dcb1e=await getWeatherContext(_0x48da88),_0x413356=await getCalendarContext(_0x48da88),_0x464a75=_0x549742(0x3a8)+_0x5eaf4e+_0x549742(0x363)+_0x7d49c8+'.\x20ZUSATZ:\x20'+_0x2dcb1e+'\x20'+_0x413356+_0x549742(0x287)+_0x1374e1+_0x549742(0x253)+JSON['stringify'](_0x67f68b[_0x549742(0x344)](0x0,0xa))+_0x549742(0x29b);try{const _0x390513=await _0x48da88[_0x549742(0x1e7)][_0x549742(0x3b8)](_0x464a75),_0x4889e4=_0x549742(0x1d8)+_0x390513['response'][_0x549742(0x265)]()[_0x549742(0x216)]();sendNotification(_0x48da88,_0x4889e4),_0x48da88[_0x549742(0x32e)][_0x549742(0x2ae)]('Morning\x20Briefing\x20sent.');}catch(_0x289e86){_0x48da88[_0x549742(0x32e)]['error']('Briefing\x20Error:\x20'+_0x289e86[_0x549742(0x2ca)]);}}async function scanForDevices(_0x37804d,_0x5a4738){const _0x26f38d=a0_0x1f8046;_0x37804d[_0x26f38d(0x32e)]['info'](_0x26f38d(0x2ce));const _0x1a608f=[],_0x7d1c74=await _0x37804d[_0x26f38d(0x395)]('*'),_0x2e74c7=await _0x37804d[_0x26f38d(0x395)](_0x26f38d(0x314),_0x26f38d(0x349)),_0x3bf69e=await _0x37804d[_0x26f38d(0x395)]('enum.rooms.*',_0x26f38d(0x349)),_0x1e348e={};if(_0x2e74c7)for(const _0x1d998e in _0x2e74c7){const _0x1f8bd8=_0x2e74c7[_0x1d998e][_0x26f38d(0x3a5)]['members']||[];_0x1f8bd8[_0x26f38d(0x238)](_0x32c2ba=>{if(!_0x1e348e[_0x32c2ba])_0x1e348e[_0x32c2ba]=[];_0x1e348e[_0x32c2ba]['push'](_0x1d998e);});}const _0x2ad201={};if(_0x3bf69e)for(const _0x59c7e5 in _0x3bf69e){const _0x4ad22e=_0x3bf69e[_0x59c7e5][_0x26f38d(0x3a5)][_0x26f38d(0x34e)]||[],_0x2d4c16=typeof _0x3bf69e[_0x59c7e5][_0x26f38d(0x3a5)][_0x26f38d(0x3ab)]===_0x26f38d(0x219)?_0x3bf69e[_0x59c7e5][_0x26f38d(0x3a5)][_0x26f38d(0x3ab)]['de']:_0x3bf69e[_0x59c7e5][_0x26f38d(0x3a5)]['name'];_0x4ad22e['forEach'](_0x37ee28=>_0x2ad201[_0x37ee28]=_0x2d4c16);}const _0x481091=_0x5a4738[_0x26f38d(0x1d6)]||[],_0x5dfcdb=_0x5a4738['motion']!==![],_0x44e750=_0x5a4738['doors']!==![],_0x14e29a=_0x5a4738['lights']!==![],_0x1dacdb=_0x5a4738['temperature']===!![],_0x3988f1=_0x5a4738[_0x26f38d(0x3ae)]===!![];for(const _0x4aacb1 in _0x7d1c74){const _0x1fff44=_0x7d1c74[_0x4aacb1];if(_0x1fff44['type']!==_0x26f38d(0x213)||!_0x1fff44[_0x26f38d(0x3a5)])continue;if(ADAPTER_BLACKLIST['some'](_0x152492=>_0x4aacb1[_0x26f38d(0x283)](_0x152492))&&!_0x3988f1)continue;const _0x2bfa8a=(_0x1fff44['common'][_0x26f38d(0x34c)]||'')[_0x26f38d(0x2a8)]();let _0x45f4d2=(typeof _0x1fff44[_0x26f38d(0x3a5)][_0x26f38d(0x3ab)]===_0x26f38d(0x219)?_0x1fff44[_0x26f38d(0x3a5)][_0x26f38d(0x3ab)]['de']:_0x1fff44[_0x26f38d(0x3a5)][_0x26f38d(0x3ab)])||_0x4aacb1;const _0x5262b7=_0x45f4d2[_0x26f38d(0x2a8)]();let _0x7032d2=![],_0x2ffb13=![];if(_0x481091['length']>0x0){const _0x25f922=_0x1e348e[_0x4aacb1]||[],_0x3409c3=_0x4aacb1[_0x26f38d(0x1c3)]('.')[_0x26f38d(0x344)](0x0,-0x1)[_0x26f38d(0x2f1)]('.'),_0x2b3602=_0x1e348e[_0x3409c3]||[];(_0x25f922['some'](_0x445ac9=>_0x481091[_0x26f38d(0x273)](_0x445ac9))||_0x2b3602['some'](_0x522dcb=>_0x481091['includes'](_0x522dcb)))&&(_0x7032d2=!![],_0x2ffb13=!![]);}if(!_0x7032d2&&!_0x3988f1){if(HARD_IGNORE_TERMS['some'](_0x327ae2=>_0x4aacb1[_0x26f38d(0x273)](_0x327ae2)||_0x5262b7['includes'](_0x327ae2['toLowerCase']())))continue;}if(BAD_NAMES[_0x26f38d(0x1d3)](_0x3fa4e6=>_0x5262b7===_0x3fa4e6||_0x5262b7[_0x26f38d(0x38d)]('.'+_0x3fa4e6))){const _0x4f8817=_0x4aacb1[_0x26f38d(0x1c3)]('.');if(_0x4f8817[_0x26f38d(0x1f5)]>0x2){const _0x564342=_0x4f8817[_0x26f38d(0x344)](0x0,-0x1)[_0x26f38d(0x2f1)]('.'),_0x455ce0=_0x7d1c74[_0x564342];if(_0x455ce0&&_0x455ce0[_0x26f38d(0x3a5)]&&_0x455ce0[_0x26f38d(0x3a5)][_0x26f38d(0x3ab)]){const _0x53b25d=typeof _0x455ce0[_0x26f38d(0x3a5)][_0x26f38d(0x3ab)]===_0x26f38d(0x219)?_0x455ce0[_0x26f38d(0x3a5)][_0x26f38d(0x3ab)]['de']:_0x455ce0[_0x26f38d(0x3a5)]['name'];_0x53b25d&&!_0x45f4d2[_0x26f38d(0x273)](_0x53b25d)&&(_0x45f4d2=_0x53b25d+'\x20'+_0x45f4d2);}}}let _0x4c5d26='';if(_0x5dfcdb&&(_0x2bfa8a['includes'](_0x26f38d(0x2ed))||_0x2bfa8a[_0x26f38d(0x273)]('occupancy')||_0x5262b7[_0x26f38d(0x273)](_0x26f38d(0x37a))||_0x5262b7[_0x26f38d(0x273)](_0x26f38d(0x2c1))))_0x4c5d26='motion';else{if(!_0x4c5d26&&_0x44e750&&(_0x2bfa8a[_0x26f38d(0x273)](_0x26f38d(0x384))||_0x2bfa8a[_0x26f38d(0x273)](_0x26f38d(0x224))||_0x2bfa8a[_0x26f38d(0x273)](_0x26f38d(0x1ec))||_0x2bfa8a[_0x26f38d(0x273)](_0x26f38d(0x214))||_0x2bfa8a['includes'](_0x26f38d(0x343))||_0x5262b7[_0x26f38d(0x273)](_0x26f38d(0x2bd))||_0x5262b7[_0x26f38d(0x273)]('t√ºr')||_0x5262b7[_0x26f38d(0x273)]('rollladen')))_0x4c5d26=_0x26f38d(0x384);else{if(!_0x4c5d26&&_0x14e29a&&(_0x2bfa8a[_0x26f38d(0x273)]('light')||_0x2bfa8a['includes']('switch')||_0x2bfa8a[_0x26f38d(0x273)](_0x26f38d(0x2b1))||_0x5262b7[_0x26f38d(0x273)](_0x26f38d(0x36f))||_0x5262b7[_0x26f38d(0x273)]('lampe')||_0x5262b7[_0x26f38d(0x273)](_0x26f38d(0x24b)))){if(_0x1fff44['common'][_0x26f38d(0x250)]||_0x2bfa8a[_0x26f38d(0x273)](_0x26f38d(0x346)))_0x4c5d26=_0x26f38d(0x3aa);}else{if(!_0x4c5d26&&_0x1dacdb&&(_0x2bfa8a[_0x26f38d(0x273)](_0x26f38d(0x297))||_0x2bfa8a[_0x26f38d(0x273)]('humidity')||_0x2bfa8a[_0x26f38d(0x273)]('thermostat')||_0x5262b7[_0x26f38d(0x273)]('temp')||_0x5262b7[_0x26f38d(0x273)](_0x26f38d(0x2be))||_0x5262b7[_0x26f38d(0x273)]('heizung')))_0x4c5d26='temperature';else{if(!_0x4c5d26&&_0x2ffb13)_0x4c5d26=_0x26f38d(0x200);}}}}if(_0x4c5d26){let _0x5b9920=_0x2ad201[_0x4aacb1]||'';if(!_0x5b9920){let _0x29489d=_0x4aacb1;for(let _0x2975b5=0x0;_0x2975b5<0x3;_0x2975b5++){const _0x146497=_0x29489d[_0x26f38d(0x322)]('.');if(_0x146497===-0x1)break;_0x29489d=_0x29489d['substring'](0x0,_0x146497);if(_0x2ad201[_0x29489d]){_0x5b9920=_0x2ad201[_0x29489d];break;}}}_0x1a608f[_0x26f38d(0x380)]({'id':_0x4aacb1,'name':_0x45f4d2,'location':_0x5b9920,'type':_0x4c5d26,'logDuplicates':_0x4c5d26===_0x26f38d(0x2ed),'isExit':![],'_score':_0x5b9920?0x50:_0x4c5d26===_0x26f38d(0x200)?0x5a:0x28});}}return _0x1a608f['sort']((_0x479caa,_0x46fcb3)=>_0x46fcb3['_score']-_0x479caa[_0x26f38d(0x351)]),_0x1a608f;}async function executeAutomationAction(_0x17997b){const _0x4673b3=a0_0x1f8046;try{const _0x5ba1cf=await _0x17997b[_0x4673b3(0x2d1)]('analysis.automation.targetId'),_0x577aab=await _0x17997b['getStateAsync'](_0x4673b3(0x2fa));if(_0x5ba1cf&&_0x5ba1cf[_0x4673b3(0x276)]&&_0x577aab){const _0x5f4735=_0x5ba1cf[_0x4673b3(0x276)];let _0x3e716b=_0x577aab['val'];try{_0x3e716b=JSON['parse'](_0x3e716b);}catch(_0x5df3be){}_0x17997b[_0x4673b3(0x32e)][_0x4673b3(0x2ae)](_0x4673b3(0x1db)+_0x5f4735+'\x20=\x20'+_0x3e716b),await _0x17997b[_0x4673b3(0x218)](_0x5f4735,_0x3e716b);}else _0x17997b[_0x4673b3(0x32e)][_0x4673b3(0x2c7)](_0x4673b3(0x2a0));}catch(_0x20c748){_0x17997b[_0x4673b3(0x32e)][_0x4673b3(0x24f)](_0x4673b3(0x26f)+_0x20c748[_0x4673b3(0x2ca)]);}}function tryParse(_0x28e702){try{return JSON['parse'](_0x28e702);}catch(_0x5c5fc3){return null;}}async function recordSequence(_0x46dfa9,_0xb4cb3){const _0x1faf36=a0_0x1f8046,_0x2e8225=(_0xb4cb3[_0x1faf36(0x39d)]||'')[_0x1faf36(0x2a8)](),_0x4d4389=[_0x1faf36(0x2ed),_0x1faf36(0x37a),_0x1faf36(0x2c1),_0x1faf36(0x301),'occupancy',_0x1faf36(0x384),_0x1faf36(0x32c),_0x1faf36(0x224),_0x1faf36(0x2bd),_0x1faf36(0x268),_0x1faf36(0x2f7),_0x1faf36(0x3aa),_0x1faf36(0x36f),_0x1faf36(0x348),_0x1faf36(0x24b),_0x1faf36(0x2b1),_0x1faf36(0x3ac)];if(!_0x4d4389[_0x1faf36(0x1d3)](_0x3c4c57=>_0x2e8225[_0x1faf36(0x273)](_0x3c4c57))){_0x46dfa9[_0x1faf36(0x32e)][_0x1faf36(0x1d2)]('[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20'+_0xb4cb3['id']+_0x1faf36(0x2f5)+_0xb4cb3['type']+_0x1faf36(0x39a));return;}if(!_0xb4cb3[_0x1faf36(0x1d0)]){_0x46dfa9['log']['debug']('[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20'+_0xb4cb3['id']+_0x1faf36(0x3a7)+_0xb4cb3[_0x1faf36(0x1d0)]+')');return;}_0x46dfa9['log']['debug'](_0x1faf36(0x1d4)+_0xb4cb3['id']+'\x20('+_0xb4cb3[_0x1faf36(0x285)]+')');if(sequenceTimer)clearTimeout(sequenceTimer);const _0x29a4fb={'loc':_0xb4cb3[_0x1faf36(0x285)]||_0x1faf36(0x1fb),'id':_0xb4cb3['id'],'ts':Date[_0x1faf36(0x1f7)]()};activeSequence[_0x1faf36(0x380)](_0x29a4fb),_0x46dfa9['log'][_0x1faf36(0x1d2)](_0x1faf36(0x1ce)+_0x29a4fb[_0x1faf36(0x2c3)]+'\x20(Length:\x20'+activeSequence['length']+')'),sequenceTimer=setTimeout(async()=>{const _0x3d0523=_0x1faf36;activeSequence[_0x3d0523(0x1f5)]>0x1?await saveCompletedSequence(_0x46dfa9):(_0x46dfa9[_0x3d0523(0x32e)][_0x3d0523(0x1d2)](_0x3d0523(0x2ac)+activeSequence['length']+')'),activeSequence=[]);},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x482349){const _0x53bb6a=a0_0x1f8046;try{_0x482349[_0x53bb6a(0x32e)][_0x53bb6a(0x2ae)]('[RECORDER]\x20Sequence\x20finished\x20(Steps:\x20'+activeSequence[_0x53bb6a(0x1f5)]+_0x53bb6a(0x28f));const _0x57907e=await _0x482349['getStateAsync'](_0x53bb6a(0x36c));let _0x11ab9a=[];if(_0x57907e&&_0x57907e['val'])try{_0x11ab9a=JSON[_0x53bb6a(0x2b7)](_0x57907e[_0x53bb6a(0x276)]);}catch(_0xc22d55){}const _0x51b65b=activeSequence[0x0]['ts'],_0x239389=activeSequence[_0x53bb6a(0x1e6)](_0x235598=>({'loc':_0x235598[_0x53bb6a(0x2c3)],'t_delta':Math[_0x53bb6a(0x2da)]((_0x235598['ts']-_0x51b65b)/0x3e8)})),_0x5a58e5={'timestamp':new Date(_0x51b65b)[_0x53bb6a(0x313)](),'steps':_0x239389,'duration':Math[_0x53bb6a(0x2da)]((activeSequence[activeSequence['length']-0x1]['ts']-_0x51b65b)/0x3e8),'daytime':new Date(_0x51b65b)['getHours']()};_0x11ab9a[_0x53bb6a(0x380)](_0x5a58e5),_0x11ab9a['length']>MAX_TRAINING_SET_SIZE&&_0x11ab9a['shift'](),await _0x482349[_0x53bb6a(0x1c4)](_0x53bb6a(0x36c),{'val':JSON[_0x53bb6a(0x2f8)](_0x11ab9a),'ack':!![]}),activeSequence=[],sequenceTimer=null;}catch(_0x150eb0){_0x482349[_0x53bb6a(0x32e)][_0x53bb6a(0x24f)](_0x53bb6a(0x27f)+_0x150eb0[_0x53bb6a(0x2ca)]);}}function a0_0x4996(_0x147809,_0x306c0b){const _0x386045=a0_0x565f();return a0_0x4996=function(_0x4c82b8,_0x3044e5){_0x4c82b8=_0x4c82b8-0x1bd;let _0x565f02=_0x386045[_0x4c82b8];return _0x565f02;},a0_0x4996(_0x147809,_0x306c0b);}async function getOutsideTemperatureNumeric(_0xa2c6ab){const _0x36130d=a0_0x1f8046;if(_0xa2c6ab[_0x36130d(0x32b)][_0x36130d(0x1cc)])try{const _0x2ce2ab=await _0xa2c6ab[_0x36130d(0x1de)](_0xa2c6ab['config']['outdoorSensorId']);if(_0x2ce2ab&&_0x2ce2ab[_0x36130d(0x276)]!==undefined&&_0x2ce2ab[_0x36130d(0x276)]!==null){const _0xd3cf64=parseFloat(_0x2ce2ab[_0x36130d(0x276)]);if(!isNaN(_0xd3cf64))return _0xd3cf64;}}catch(_0x149a8d){_0xa2c6ab[_0x36130d(0x32e)][_0x36130d(0x2c7)](_0x36130d(0x305)+_0xa2c6ab['config'][_0x36130d(0x1cc)]+':\x20'+_0x149a8d['message']);}const _0x26b545=_0xa2c6ab['config']['weatherInstance'];if(!_0xa2c6ab[_0x36130d(0x32b)][_0x36130d(0x20f)]||!_0x26b545)return null;try{let _0x4354ec='';if(_0x26b545[_0x36130d(0x273)](_0x36130d(0x369)))_0x4354ec=_0x26b545+_0x36130d(0x354);else{if(_0x26b545[_0x36130d(0x273)](_0x36130d(0x324)))_0x4354ec=_0x26b545+_0x36130d(0x1f0);else{if(_0x26b545['includes']('openweathermap'))_0x4354ec=_0x26b545+'.forecast.current.temperature';else{if(_0x26b545[_0x36130d(0x273)](_0x36130d(0x323)))_0x4354ec=_0x26b545+_0x36130d(0x37e);}}}if(_0x4354ec){const _0x34171a=await _0xa2c6ab['getForeignStateAsync'](_0x4354ec);if(_0x34171a&&_0x34171a[_0x36130d(0x276)]!==undefined&&_0x34171a['val']!==null)return parseFloat(_0x34171a[_0x36130d(0x276)]);}}catch(_0xd23255){}return null;}async function recordThermodynamics(_0xa8daad,_0x187438,_0x4bb787,_0x117ecd){const _0x2fb918=a0_0x1f8046,_0x249d47=await getOutsideTemperatureNumeric(_0xa8daad),_0x3a705a=await _0xa8daad[_0x2fb918(0x2d1)]('LTM.trainingData.thermodynamics');let _0xef2f8=[];if(_0x3a705a&&_0x3a705a[_0x2fb918(0x276)])try{_0xef2f8=JSON[_0x2fb918(0x2b7)](_0x3a705a[_0x2fb918(0x276)]);}catch(_0x5cfb55){}_0xef2f8['push']({'ts':Date[_0x2fb918(0x1f7)](),'room':_0x117ecd||_0x2fb918(0x1fb),'t_in':_0x4bb787,'t_out':_0x249d47});if(_0xef2f8[_0x2fb918(0x1f5)]>THERMO_LOG_SIZE)_0xef2f8[_0x2fb918(0x307)]();await _0xa8daad[_0x2fb918(0x1c4)]('LTM.trainingData.thermodynamics',{'val':JSON['stringify'](_0xef2f8),'ack':!![]});}async function processSensorEvent(_0x4710c4,_0x46e7dc,_0x45e1ee,_0xcadb3f){const _0x312fe0=a0_0x1f8046;if(!_0xcadb3f)return;const _0x32e5be=_0x45e1ee[_0x312fe0(0x276)],_0x2cdfe9=Date[_0x312fe0(0x1f7)]();_0x4710c4['log'][_0x312fe0(0x1d2)](_0x312fe0(0x27a)+_0x46e7dc+_0x312fe0(0x2f6)+_0x32e5be);const _0x5bfc7a=_0x4710c4[_0x312fe0(0x1fe)][_0x46e7dc];_0x4710c4[_0x312fe0(0x1fe)][_0x46e7dc]=_0x32e5be;if(!_0xcadb3f[_0x312fe0(0x31f)]&&_0x5bfc7a!=undefined&&_0x5bfc7a==_0x32e5be){_0x4710c4[_0x312fe0(0x32e)][_0x312fe0(0x1d2)](_0x312fe0(0x1e9)+_0xcadb3f[_0x312fe0(0x3ab)]+_0x312fe0(0x30c)+_0x32e5be+')');return;}_0x4710c4[_0x312fe0(0x226)]&&_0xcadb3f[_0x312fe0(0x39d)]===_0x312fe0(0x297)&&recordThermodynamics(_0x4710c4,_0x46e7dc,_0x32e5be,_0xcadb3f[_0x312fe0(0x285)]);const _0x56a5e2={'timestamp':_0x2cdfe9,'id':_0x46e7dc,'name':_0xcadb3f[_0x312fe0(0x3ab)],'type':_0xcadb3f[_0x312fe0(0x39d)],'location':_0xcadb3f['location'],'value':_0x32e5be};_0x4710c4[_0x312fe0(0x215)][_0x312fe0(0x29d)](_0x56a5e2);if(_0x4710c4[_0x312fe0(0x215)][_0x312fe0(0x1f5)]>HISTORY_MAX_SIZE)_0x4710c4[_0x312fe0(0x215)][_0x312fe0(0x20c)]();await _0x4710c4[_0x312fe0(0x1c4)]('events.lastEvent',{'val':JSON[_0x312fe0(0x2f8)](_0x56a5e2),'ack':!![]}),await _0x4710c4['setStateAsync'](_0x312fe0(0x23c),{'val':JSON[_0x312fe0(0x2f8)](_0x4710c4[_0x312fe0(0x215)]),'ack':!![]});_0x4710c4[_0x312fe0(0x226)]&&(_0x4710c4[_0x312fe0(0x202)]['push'](_0x56a5e2),await saveRawEventLog(_0x4710c4),recordSequence(_0x4710c4,_0x56a5e2));if(_0xcadb3f[_0x312fe0(0x372)]&&_0x32e5be===!![]){if(_0x4710c4[_0x312fe0(0x2cf)]&&!_0x4710c4[_0x312fe0(0x1f9)])_0x4710c4[_0x312fe0(0x32e)][_0x312fe0(0x2ae)](_0x312fe0(0x259)+_0xcadb3f[_0x312fe0(0x3ab)]+_0x312fe0(0x3ba)),startExitTimer(_0x4710c4);else!_0x4710c4[_0x312fe0(0x2cf)]&&(_0x4710c4[_0x312fe0(0x32e)]['info']('Entry\x20detected\x20via\x20'+_0xcadb3f[_0x312fe0(0x3ab)]+_0x312fe0(0x1fa)),await setPresence(_0x4710c4,!![]));}else _0xcadb3f[_0x312fe0(0x39d)]==='motion'&&_0x32e5be===!![]&&(_0x4710c4[_0x312fe0(0x23a)]&&(_0x4710c4[_0x312fe0(0x32e)][_0x312fe0(0x2ae)](_0x312fe0(0x3bc)),abortExitTimer(_0x4710c4)),!_0x4710c4[_0x312fe0(0x2cf)]&&_0x4710c4[_0x312fe0(0x32a)]===SYSTEM_MODES[_0x312fe0(0x295)]&&await setPresence(_0x4710c4,!![]));}async function runGeminiAnalysis(_0x82d008,_0x50c587=''){const _0x1bf30b=a0_0x1f8046;if(!_0x82d008['geminiModel'])return;if(_0x82d008['eventHistory'][_0x1bf30b(0x1f5)]===0x0)return;const _0x9feec3=_0x82d008[_0x1bf30b(0x215)][_0x1bf30b(0x344)](0x0,0xf),_0x36b114=await getWeatherContext(_0x82d008),_0x34305c=_0x82d008[_0x1bf30b(0x32a)],_0x1a7660=PERSONA_MAPPING[_0x82d008[_0x1bf30b(0x32b)][_0x1bf30b(0x232)]||_0x1bf30b(0x1eb)],_0x2f9b17=_0x82d008[_0x1bf30b(0x32b)][_0x1bf30b(0x207)]||'Keine\x20Details.';let _0x86bd16=![];try{const _0xd1ca0a=await _0x82d008['getStateAsync'](_0x1bf30b(0x1fc));if(_0xd1ca0a&&_0xd1ca0a[_0x1bf30b(0x276)])_0x86bd16=!![];}catch(_0x50bac4){}const _0x50ffee=_0x1bf30b(0x21b)+_0x1a7660+'.\x0a\x20\x20\x20\x20KONTEXT:\x20'+_0x2f9b17+'.\x0a\x20\x20\x20\x20SYSTEM_MODE:\x20'+_0x34305c+_0x1bf30b(0x1bf)+_0x36b114+_0x1bf30b(0x306)+(_0x50c587||'Keiner')+'.\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20INPUT\x20DATEN\x20(Letzte\x20Events):\x0a\x20\x20\x20\x20'+JSON[_0x1bf30b(0x2f8)](_0x9feec3)+_0x1bf30b(0x280);try{const _0x280ab4=await _0x82d008[_0x1bf30b(0x1e7)][_0x1bf30b(0x3b8)](_0x50ffee),_0x43ab32=_0x280ab4['response'][_0x1bf30b(0x265)]()[_0x1bf30b(0x376)](/```json|```/g,'')[_0x1bf30b(0x216)](),_0x1870ae=JSON['parse'](_0x43ab32);await _0x82d008[_0x1bf30b(0x1c4)](_0x1bf30b(0x257),{'val':JSON[_0x1bf30b(0x2f8)](_0x1870ae),'ack':!![]});_0x1870ae[_0x1bf30b(0x2a2)]&&await _0x82d008[_0x1bf30b(0x1c4)]('analysis.activitySummary',{'val':_0x1870ae[_0x1bf30b(0x2a2)],'ack':!![]});const _0x1320f2={'timestamp':Date[_0x1bf30b(0x1f7)](),'id':Date['now']()['toString'](),'analysis':{'activity':{'summary':_0x1870ae[_0x1bf30b(0x2a2)]||_0x1bf30b(0x2ea),'isAlert':_0x1870ae['isAlert']||![],'alertReason':_0x1870ae[_0x1bf30b(0x2bb)]},'comfort':{'automationProposal':_0x1870ae['automationProposal']}}};await updateAnalysisHistory(_0x82d008,_0x1320f2);const _0x140835=_0x1870ae[_0x1bf30b(0x37b)]||![];_0x140835!==_0x82d008[_0x1bf30b(0x309)]&&(await _0x82d008[_0x1bf30b(0x1c4)](_0x1bf30b(0x29a),{'val':_0x140835,'ack':!![]}),_0x82d008[_0x1bf30b(0x309)]=_0x140835,_0x140835&&(await _0x82d008['setStateAsync']('analysis.alertReason',{'val':_0x1870ae[_0x1bf30b(0x2bb)],'ack':!![]}),sendNotification(_0x82d008,_0x1bf30b(0x2fc)+_0x1870ae[_0x1bf30b(0x2bb)],![],_0x1870ae[_0x1bf30b(0x203)]))),_0x1870ae[_0x1bf30b(0x242)]&&_0x1870ae['automationProposal']['detected']&&_0x1870ae[_0x1bf30b(0x242)]['targetId']&&(_0x82d008[_0x1bf30b(0x32e)][_0x1bf30b(0x2ae)](_0x1bf30b(0x2b8)+_0x1870ae[_0x1bf30b(0x242)]['description']),await _0x82d008['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x82d008[_0x1bf30b(0x1c4)]('analysis.automation.description',{'val':_0x1870ae[_0x1bf30b(0x242)][_0x1bf30b(0x2d5)],'ack':!![]}),await _0x82d008[_0x1bf30b(0x1c4)](_0x1bf30b(0x1e5),{'val':_0x1870ae[_0x1bf30b(0x242)][_0x1bf30b(0x20d)],'ack':!![]}),await _0x82d008[_0x1bf30b(0x1c4)]('analysis.automation.targetValue',{'val':JSON[_0x1bf30b(0x2f8)](_0x1870ae[_0x1bf30b(0x242)]['targetValue']),'ack':!![]}),_0x86bd16&&(_0x82d008[_0x1bf30b(0x32e)]['info']('ü§ñ\x20BUTLER\x20AUTO-APPLY:\x20Executing\x20'+_0x1870ae[_0x1bf30b(0x242)]['targetId']+'...'),await executeAutomationAction(_0x82d008)));}catch(_0x2e4cc7){_0x82d008['log']['error'](_0x1bf30b(0x1c0)+_0x2e4cc7[_0x1bf30b(0x2ca)]);}}function installPythonDependencies(_0x210511){const _0x10e3b0=a0_0x1f8046;if(_0x210511[_0x10e3b0(0x325)])return;_0x210511[_0x10e3b0(0x325)]=!![];const _0x3db258=path[_0x10e3b0(0x2f1)](__dirname,_0x10e3b0(0x3b6),_0x10e3b0(0x1c7));_0x210511['log']['info']('üõ†Ô∏è\x20AUTO-FIX:\x20Installing\x20Python\x20dependencies\x20from\x20'+_0x3db258+'...'),stopPythonService(_0x210511);const _0x2c0da4=_0x10e3b0(0x31d)+_0x3db258+'\x22\x20--break-system-packages';exec(_0x2c0da4,(_0x453ed4,_0x44fb5d,_0x17f4ad)=>{const _0x24158a=_0x10e3b0;_0x210511['dependencyInstallInProgress']=![],_0x453ed4?(_0x210511[_0x24158a(0x32e)][_0x24158a(0x24f)](_0x24158a(0x282)+_0x2c0da4),_0x210511[_0x24158a(0x32e)]['error'](_0x24158a(0x22b)+(_0x17f4ad||_0x453ed4[_0x24158a(0x2ca)]))):(_0x210511[_0x24158a(0x32e)][_0x24158a(0x2ae)](_0x24158a(0x275)),startPythonService(_0x210511));});}function sendToPython(_0x300ed5,_0x43d972,_0x36b3b9={}){const _0x1b131a=a0_0x1f8046;if(!_0x300ed5[_0x1b131a(0x2b6)]||!_0x300ed5['pythonProcess'][_0x1b131a(0x1e2)][_0x1b131a(0x201)])return;const _0x322435=JSON[_0x1b131a(0x2f8)]({'command':_0x43d972,..._0x36b3b9});try{_0x300ed5[_0x1b131a(0x2b6)][_0x1b131a(0x1e2)]['write'](_0x322435+'\x0a');}catch(_0x844fd){_0x300ed5[_0x1b131a(0x32e)][_0x1b131a(0x24f)]('Failed\x20to\x20send\x20to\x20Python:\x20'+_0x844fd['message']);}}function runPythonHealthCheck(_0x4f1780){const _0x4c041f=a0_0x1f8046;if(!_0x4f1780[_0x4c041f(0x2e8)]||_0x4f1780[_0x4c041f(0x2e8)]['length']<0x2){_0x4f1780[_0x4c041f(0x32e)][_0x4c041f(0x2ae)]('Guardian:\x20Not\x20enough\x20history\x20data\x20for\x20trend\x20analysis\x20yet.');return;}const _0x19fec7=_0x4f1780[_0x4c041f(0x2e8)][_0x4c041f(0x1e6)](_0x48d534=>{const _0x1a6212=_0x4c041f,_0x40b14d=(_0x48d534[_0x1a6212(0x294)]||'')[_0x1a6212(0x2a8)]();return ACTIVITY_LEVEL_MAP[_0x40b14d]||0x32;});_0x4f1780[_0x4c041f(0x32e)][_0x4c041f(0x2ae)](_0x4c041f(0x38b)+_0x19fec7[_0x4c041f(0x1f5)]+_0x4c041f(0x2ef)),sendToPython(_0x4f1780,'ANALYZE_TREND',{'values':_0x19fec7,'tag':_0x4c041f(0x390)});}function handlePythonResult(_0x1d23cd,_0x306d43){const _0x298e6c=a0_0x1f8046;if(_0x306d43[_0x298e6c(0x39d)]===_0x298e6c(0x267))_0x1d23cd[_0x298e6c(0x32e)][_0x298e6c(0x1d2)](_0x298e6c(0x35e));else{if(_0x306d43[_0x298e6c(0x39d)]===_0x298e6c(0x326)){const {tag:_0x5a3953,diagnosis:_0x1b475e,change_percent:_0x4f4ee3}=_0x306d43['payload'];_0x1d23cd['log'][_0x298e6c(0x2ae)](_0x298e6c(0x24c)+_0x5a3953+_0x298e6c(0x223)+_0x1b475e+'\x20('+_0x4f4ee3+'%)'),_0x1d23cd['setStateAsync'](_0x298e6c(0x29f),{'val':_0x1b475e,'ack':!![]}),_0x1d23cd['setStateAsync'](_0x298e6c(0x299),{'val':_0x4f4ee3,'ack':!![]});}}}function startPythonService(_0x364af4){const _0x3744bc=a0_0x1f8046;try{const _0x11abca=path[_0x3744bc(0x2f1)](__dirname,'python_service','service.py');_0x364af4[_0x3744bc(0x32e)]['info'](_0x3744bc(0x2bf)+_0x11abca),_0x364af4[_0x3744bc(0x2b6)]=spawn(_0x3744bc(0x234),[_0x11abca]),_0x364af4[_0x3744bc(0x2b6)][_0x3744bc(0x288)]['on']('data',_0x2c80d1=>{const _0x2d838e=_0x3744bc,_0x361a56=_0x2c80d1[_0x2d838e(0x1cb)]()[_0x2d838e(0x1c3)]('\x0a');_0x361a56[_0x2d838e(0x238)](_0x9df6f5=>{const _0x26b6ea=_0x2d838e,_0x45c72a=_0x9df6f5[_0x26b6ea(0x216)]();if(!_0x45c72a)return;if(_0x45c72a['startsWith']('[LOG]'))_0x364af4['log'][_0x26b6ea(0x1d2)]('[PYTHON]\x20'+_0x45c72a['substring'](0x5)[_0x26b6ea(0x216)]());else{if(_0x45c72a[_0x26b6ea(0x283)](_0x26b6ea(0x1d7)))try{const _0x22b929=JSON[_0x26b6ea(0x2b7)](_0x45c72a[_0x26b6ea(0x32f)](0x8)['trim']());handlePythonResult(_0x364af4,_0x22b929);}catch(_0x472135){_0x364af4[_0x26b6ea(0x32e)][_0x26b6ea(0x2c7)](_0x26b6ea(0x3ad)+_0x45c72a);}}(_0x45c72a['includes'](_0x26b6ea(0x35f))||_0x45c72a[_0x26b6ea(0x273)](_0x26b6ea(0x36a)))&&(_0x364af4[_0x26b6ea(0x32e)]['warn']('‚ö†Ô∏è\x20Python\x20missing\x20dependencies.\x20Triggering\x20Auto-Install...'),installPythonDependencies(_0x364af4));});}),_0x364af4['pythonProcess'][_0x3744bc(0x2c9)]['on'](_0x3744bc(0x38a),_0x2fe0eb=>{const _0x41066c=_0x3744bc,_0x27a0ac=_0x2fe0eb[_0x41066c(0x1cb)]()[_0x41066c(0x216)]();_0x364af4['log'][_0x41066c(0x24f)](_0x41066c(0x1c5)+_0x27a0ac);}),_0x364af4[_0x3744bc(0x2b6)]['on']('close',_0x56e2fc=>{const _0x3363fd=_0x3744bc;_0x364af4[_0x3363fd(0x32e)][_0x3363fd(0x2ae)](_0x3363fd(0x341)+_0x56e2fc),_0x364af4[_0x3363fd(0x2b6)]=null;}),_0x364af4[_0x3744bc(0x2b6)]['on'](_0x3744bc(0x24f),_0x23ee6b=>{const _0x58bfae=_0x3744bc;_0x364af4[_0x58bfae(0x32e)]['warn'](_0x58bfae(0x37c)+_0x23ee6b[_0x58bfae(0x2ca)]);});}catch(_0x28bab2){_0x364af4[_0x3744bc(0x32e)][_0x3744bc(0x24f)](_0x3744bc(0x396)+_0x28bab2[_0x3744bc(0x2ca)]);}}function stopPythonService(_0x201706){const _0x91e24c=a0_0x1f8046;if(_0x201706[_0x91e24c(0x2b6)]){_0x201706[_0x91e24c(0x32e)][_0x91e24c(0x2ae)](_0x91e24c(0x2a6));try{_0x201706['pythonProcess'][_0x91e24c(0x274)]();}catch(_0x49c2d0){_0x201706[_0x91e24c(0x32e)][_0x91e24c(0x2c7)]('Could\x20not\x20kill\x20Python\x20process:\x20'+_0x49c2d0[_0x91e24c(0x2ca)]);}_0x201706['pythonProcess']=null;}}class CogniLiving extends utils[a0_0x1f8046(0x360)]{constructor(_0x1a9c0d){const _0x1accb6=a0_0x1f8046;super({..._0x1a9c0d,'name':_0x1accb6(0x393)}),this[_0x1accb6(0x215)]=[],this[_0x1accb6(0x298)]=[],this['feedbackHistory']=[],this[_0x1accb6(0x202)]=[],this[_0x1accb6(0x2e8)]=[],this[_0x1accb6(0x1fe)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x1accb6(0x2cf)]=!![],this['exitTimer']=null,this[_0x1accb6(0x31c)]=null,this[_0x1accb6(0x1f9)]=![],this[_0x1accb6(0x22d)]=null,this['geminiModel']=null,this['currentSystemMode']=SYSTEM_MODES[_0x1accb6(0x295)],this[_0x1accb6(0x226)]=![],this[_0x1accb6(0x309)]=![],this[_0x1accb6(0x33d)]=_0x1accb6(0x206),this[_0x1accb6(0x2b9)]=null,this[_0x1accb6(0x32d)]=null,this[_0x1accb6(0x359)]=null,this[_0x1accb6(0x383)]=null,this[_0x1accb6(0x24e)]=null,this[_0x1accb6(0x2b6)]=null,this[_0x1accb6(0x325)]=![],this['on'](_0x1accb6(0x308),this[_0x1accb6(0x328)][_0x1accb6(0x281)](this)),this['on'](_0x1accb6(0x31a),this[_0x1accb6(0x1ef)]['bind'](this)),this['on']('unload',this['onUnload']['bind'](this)),this['on'](_0x1accb6(0x2ca),this[_0x1accb6(0x33e)][_0x1accb6(0x281)](this));}async[a0_0x1f8046(0x328)](){const _0x51b114=a0_0x1f8046;this[_0x51b114(0x32e)][_0x51b114(0x2ae)](_0x51b114(0x1fd)+this[_0x51b114(0x358)]+_0x51b114(0x205)),await initZombies(this),this[_0x51b114(0x32b)][_0x51b114(0x29c)]=this[_0x51b114(0x32b)][_0x51b114(0x29c)]||'';try{this[_0x51b114(0x226)]=await checkLicense(this,this['config'][_0x51b114(0x29c)]);}catch(_0x17488f){}this['log'][_0x51b114(0x2ae)](_0x51b114(0x336)+!!this[_0x51b114(0x32b)]['licenseKey']+'\x20|\x20Status:\x20'+(this[_0x51b114(0x226)]?_0x51b114(0x333):_0x51b114(0x377)));if(!this[_0x51b114(0x32b)][_0x51b114(0x212)]||this[_0x51b114(0x32b)][_0x51b114(0x212)]<0.1)this[_0x51b114(0x32b)][_0x51b114(0x212)]=0xc;await initHistory(this),await initSystemConfig(this);if(this[_0x51b114(0x32b)]['geminiApiKey'])try{this[_0x51b114(0x22d)]=new GoogleGenerativeAI(this['config'][_0x51b114(0x233)]),this[_0x51b114(0x1e7)]=this['genAI'][_0x51b114(0x2fd)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this['log'][_0x51b114(0x2ae)]('Gemini\x20AI\x20initialized.');}catch(_0x141ad0){this[_0x51b114(0x32e)][_0x51b114(0x24f)](_0x51b114(0x342)+_0x141ad0[_0x51b114(0x2ca)]);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this['subscribeStates']('analysis.trigger'),this[_0x51b114(0x318)](LTM_DP_TRIGGER_DIGEST),this[_0x51b114(0x318)]('system.mode'),this[_0x51b114(0x318)]('analysis.triggerBriefing'),this[_0x51b114(0x318)](_0x51b114(0x25f)),this[_0x51b114(0x318)](_0x51b114(0x1fc)),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this),setTimeout(()=>checkWifiPresence(this),0x1388);if(this['analysisTimer'])clearInterval(this['analysisTimer']);const _0x4d6d8e=this[_0x51b114(0x32b)][_0x51b114(0x1e4)]||0xf;_0x4d6d8e>0x0&&(this[_0x51b114(0x32e)][_0x51b114(0x2ae)](_0x51b114(0x375)+_0x4d6d8e+'\x20min).'),this[_0x51b114(0x2b9)]=setInterval(()=>{runAutopilot(this);},_0x4d6d8e*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this),startPythonService(this),setTimeout(()=>{const _0xc10260=_0x51b114;this[_0xc10260(0x2b6)]&&runPythonHealthCheck(this);},0x1388);}['onUnload'](_0x7813b5){const _0x568e1a=a0_0x1f8046;if(this[_0x568e1a(0x2b9)])clearInterval(this['analysisTimer']);if(this[_0x568e1a(0x383)])clearInterval(this[_0x568e1a(0x383)]);if(this[_0x568e1a(0x32d)])this['ltmJob'][_0x568e1a(0x39f)]();if(this[_0x568e1a(0x359)])this[_0x568e1a(0x359)]['cancel']();if(this[_0x568e1a(0x24e)])this[_0x568e1a(0x24e)][_0x568e1a(0x39f)]();if(this[_0x568e1a(0x23a)])clearTimeout(this[_0x568e1a(0x23a)]);if(this[_0x568e1a(0x31c)])clearTimeout(this['exitGraceTimer']);stopPythonService(this),_0x7813b5();}async[a0_0x1f8046(0x1ef)](_0x304002,_0x135873){const _0x55d356=a0_0x1f8046;if(!_0x135873)return;if(_0x304002['includes'](_0x55d356(0x228))&&_0x304002[_0x55d356(0x38d)]('communicate.request')&&_0x135873[_0x55d356(0x276)]){await handleTelegramResponse(this,_0x135873[_0x55d356(0x276)]);return;}if(_0x304002===this['namespace']+'.'+SYSTEM_DP_MODE){_0x135873[_0x55d356(0x276)]&&Object[_0x55d356(0x2db)](SYSTEM_MODES)['includes'](_0x135873['val'])&&(this[_0x55d356(0x32a)]=_0x135873['val'],_0x135873[_0x55d356(0x276)]===SYSTEM_MODES['VACATION']?await setPresence(this,![]):await setPresence(this,!![]));if(!_0x135873['ack'])this['setState'](_0x304002,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x135873[_0x55d356(0x2d2)]){_0x304002[_0x55d356(0x273)](_0x55d356(0x33b))&&_0x135873[_0x55d356(0x276)]&&(this['setState'](_0x304002,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x304002[_0x55d356(0x273)](_0x55d356(0x262))&&_0x135873[_0x55d356(0x276)]){this[_0x55d356(0x278)](_0x304002,{'val':![],'ack':!![]});if(this[_0x55d356(0x226)])createDailyDigest(this);}_0x304002['includes'](_0x55d356(0x352))&&_0x135873['val']&&(this[_0x55d356(0x278)](_0x304002,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x304002[_0x55d356(0x273)](_0x55d356(0x339))&&_0x135873[_0x55d356(0x276)]&&(this[_0x55d356(0x278)](_0x304002,{'val':![],'ack':!![]}),executeAutomationAction(this));return;}if(this[_0x55d356(0x32b)]['presenceDevices']&&this['config'][_0x55d356(0x38f)][_0x55d356(0x273)](_0x304002)){await checkWifiPresence(this);return;}const _0x2a60dd=(this[_0x55d356(0x32b)][_0x55d356(0x1e8)]||[])['find'](_0x1be687=>_0x1be687['id']===_0x304002);if(_0x2a60dd)processSensorEvent(this,_0x304002,_0x135873,_0x2a60dd);}async[a0_0x1f8046(0x33e)](_0x412807){const _0x57f445=a0_0x1f8046;if(typeof _0x412807==='object'&&_0x412807[_0x57f445(0x2ca)])try{if(_0x412807['command']===_0x57f445(0x254)){const _0x1e8039=_0x412807[_0x57f445(0x2ca)][_0x57f445(0x2df)]||this[_0x57f445(0x32b)][_0x57f445(0x233)];if(!_0x1e8039)return this[_0x57f445(0x204)](_0x412807['from'],_0x412807[_0x57f445(0x2ad)],{'success':![],'message':_0x57f445(0x241)},_0x412807[_0x57f445(0x270)]);try{const _0x306333=new GoogleGenerativeAI(_0x1e8039),_0xb1a9b5=_0x306333[_0x57f445(0x2fd)]({'model':GEMINI_MODEL}),_0x1bf9cf=await _0xb1a9b5[_0x57f445(0x3b8)](_0x57f445(0x389)),_0x11a8f7=await _0x1bf9cf[_0x57f445(0x368)],_0x428efc=_0x11a8f7[_0x57f445(0x265)]();this['sendTo'](_0x412807['from'],_0x412807[_0x57f445(0x2ad)],{'success':!![],'message':'Verbindung\x20erfolgreich!\x20Antwort:\x20'+_0x428efc[_0x57f445(0x32f)](0x0,0x14)+_0x57f445(0x1d9)},_0x412807[_0x57f445(0x270)]);}catch(_0x2e3e48){this[_0x57f445(0x204)](_0x412807[_0x57f445(0x25d)],_0x412807[_0x57f445(0x2ad)],{'success':![],'message':_0x57f445(0x28a)+_0x2e3e48[_0x57f445(0x2ca)]},_0x412807[_0x57f445(0x270)]);}}else{if(_0x412807[_0x57f445(0x2ad)]==='testNotification'){}else{if(_0x412807[_0x57f445(0x2ad)]===_0x57f445(0x221)){if(!this['isProVersion'])return this[_0x57f445(0x204)](_0x412807['from'],_0x412807[_0x57f445(0x2ad)],{'success':![],'isPro':![]},_0x412807[_0x57f445(0x270)]);let _0x11ca78={'status':'N/A','details':'','lastCheck':0x0};try{_0x11ca78[_0x57f445(0x2b3)]=(await this[_0x57f445(0x2d1)](LTM_DP_DRIFT_STATUS))[_0x57f445(0x276)],_0x11ca78[_0x57f445(0x246)]=(await this[_0x57f445(0x2d1)](LTM_DP_DRIFT_DETAILS))[_0x57f445(0x276)],_0x11ca78[_0x57f445(0x2ab)]=(await this[_0x57f445(0x2d1)](LTM_DP_DRIFT_LAST_CHECK))['val'];}catch(_0x2c16a6){}const _0x3c2ba2=this['analysisHistory']||[];this[_0x57f445(0x204)](_0x412807[_0x57f445(0x25d)],_0x412807['command'],{'success':!![],'isPro':!![],'dailyDigests':this[_0x57f445(0x2e8)],'driftAnalysis':_0x11ca78,'analysisHistory':_0x3c2ba2},_0x412807['callback']);}else{if(_0x412807[_0x57f445(0x2ad)]===_0x57f445(0x2aa)){const _0x487a00=this['dailyDigests'][_0x57f445(0x1f5)],_0x1c4cad=new Date(),_0x53e03f=new Date(_0x1c4cad[_0x57f445(0x2a1)](),_0x1c4cad[_0x57f445(0x244)](),_0x1c4cad['getDate']())['getTime'](),_0x5884f6=this[_0x57f445(0x202)][_0x57f445(0x258)](_0x2aeaef=>new Date(_0x2aeaef[_0x57f445(0x335)])[_0x57f445(0x356)]()>_0x53e03f)[_0x57f445(0x1f5)],_0xbac89d=new Array(0x18)['fill'](0x0);this[_0x57f445(0x202)]['forEach'](_0x12c1a3=>{const _0x5155a2=_0x57f445,_0x35d0de=new Date(_0x12c1a3[_0x5155a2(0x335)]);if(_0x35d0de['getTime']()>_0x53e03f)_0xbac89d[_0x35d0de[_0x5155a2(0x366)]()]++;});let _0x2450c9={'status':_0x57f445(0x392)};try{_0x2450c9['status']=(await this[_0x57f445(0x2d1)](LTM_DP_DRIFT_STATUS))[_0x57f445(0x276)];}catch(_0x578fe1){}let _0x10a9fd='';try{const _0x51b4bf=await this[_0x57f445(0x2d1)]('system.presenceWho');_0x10a9fd=_0x51b4bf?_0x51b4bf[_0x57f445(0x276)]:'';}catch(_0x19f7c9){}let _0x1591dd=null;!this[_0x57f445(0x1e7)]&&(_0x1591dd=this[_0x57f445(0x32b)][_0x57f445(0x233)]?_0x57f445(0x2f3):_0x57f445(0x338));let _0x39fa20={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0xbf7afa=await this[_0x57f445(0x2d1)](_0x57f445(0x2a7)),_0x3b3a26=await this[_0x57f445(0x2d1)](_0x57f445(0x29e)),_0x4f22cf=await this[_0x57f445(0x2d1)](_0x57f445(0x1e5)),_0x5a2fa5=await this['getStateAsync'](_0x57f445(0x2fa)),_0xf0fd21=await this[_0x57f445(0x2d1)]('analysis.automation.autoApply');_0xbf7afa&&_0xbf7afa[_0x57f445(0x276)]&&(_0x39fa20['detected']=!![],_0x39fa20[_0x57f445(0x2d5)]=_0x3b3a26?_0x3b3a26[_0x57f445(0x276)]:'',_0x39fa20[_0x57f445(0x20d)]=_0x4f22cf?_0x4f22cf[_0x57f445(0x276)]:'',_0x39fa20[_0x57f445(0x331)]=_0x5a2fa5?_0x5a2fa5[_0x57f445(0x276)]:''),_0x39fa20['autoApply']=_0xf0fd21?!!_0xf0fd21['val']:![];}catch(_0x25aea9){}this[_0x57f445(0x204)](_0x412807['from'],_0x412807[_0x57f445(0x2ad)],{'success':!![],'eventHistory':this[_0x57f445(0x215)][_0x57f445(0x344)](0x0,0xf),'stats':{'digestCount':_0x487a00,'eventCountToday':_0x5884f6,'hourlyActivity':_0xbac89d,'driftStatus':_0x2450c9[_0x57f445(0x2b3)],'isPresent':this[_0x57f445(0x2cf)],'presenceWho':_0x10a9fd,'minDays':this[_0x57f445(0x32b)]['minDaysForBaseline']||0x7,'stbDays':this[_0x57f445(0x32b)][_0x57f445(0x231)]||0xe,'ltbDays':this[_0x57f445(0x32b)][_0x57f445(0x37f)]||0x3c,'systemError':_0x1591dd},'automation':_0x39fa20},_0x412807[_0x57f445(0x270)]);}else{if(_0x412807[_0x57f445(0x2ad)]===_0x57f445(0x2d8)){const _0x38d3b5=await this[_0x57f445(0x395)](_0x57f445(0x314),'enum'),_0x2d1706=[];if(_0x38d3b5)for(const _0x4d318a in _0x38d3b5){const _0x15936d=_0x38d3b5[_0x4d318a],_0x4d56cf=(_0x15936d['common']&&typeof _0x15936d[_0x57f445(0x3a5)][_0x57f445(0x3ab)]===_0x57f445(0x219)?_0x15936d[_0x57f445(0x3a5)][_0x57f445(0x3ab)]['de']:_0x15936d[_0x57f445(0x3a5)][_0x57f445(0x3ab)])||_0x15936d[_0x57f445(0x3a5)][_0x57f445(0x3ab)];_0x2d1706[_0x57f445(0x380)]({'id':_0x4d318a,'name':_0x4d56cf});}this[_0x57f445(0x204)](_0x412807[_0x57f445(0x25d)],_0x412807[_0x57f445(0x2ad)],{'success':!![],'enums':_0x2d1706},_0x412807[_0x57f445(0x270)]);}else{if(_0x412807[_0x57f445(0x2ad)]===_0x57f445(0x303))try{const _0x16d859=await scanForDevices(this,_0x412807[_0x57f445(0x2ca)]||{});this['sendTo'](_0x412807[_0x57f445(0x25d)],_0x412807[_0x57f445(0x2ad)],{'success':!![],'devices':_0x16d859},_0x412807['callback']);}catch(_0x40f030){this['sendTo'](_0x412807[_0x57f445(0x25d)],_0x412807[_0x57f445(0x2ad)],{'success':![],'error':_0x40f030[_0x57f445(0x2ca)]},_0x412807['callback']);}else{if(_0x412807[_0x57f445(0x2ad)]===_0x57f445(0x20a)){const _0x5a63c6=_0x412807[_0x57f445(0x2ca)][_0x57f445(0x220)];if(!_0x5a63c6)return this[_0x57f445(0x204)](_0x412807[_0x57f445(0x25d)],_0x412807[_0x57f445(0x2ad)],{'success':![],'error':_0x57f445(0x355)},_0x412807[_0x57f445(0x270)]);const _0x506762=await getCalendarNames(this,_0x5a63c6);this[_0x57f445(0x204)](_0x412807[_0x57f445(0x25d)],_0x412807[_0x57f445(0x2ad)],{'success':!![],'names':_0x506762},_0x412807['callback']);}else{if(_0x412807[_0x57f445(0x2ad)]===_0x57f445(0x30b)){const {targetId:_0x5b11f6,targetValue:_0x133252}=_0x412807[_0x57f445(0x2ca)];this[_0x57f445(0x32e)]['info'](_0x57f445(0x21a)+_0x5b11f6+'\x20=\x20'+_0x133252),await this[_0x57f445(0x1c4)](_0x57f445(0x2a7),{'val':!![],'ack':!![]}),await this[_0x57f445(0x1c4)]('analysis.automation.description',{'val':'SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20'+_0x5b11f6,'ack':!![]}),await this[_0x57f445(0x1c4)]('analysis.automation.targetId',{'val':_0x5b11f6,'ack':!![]}),await this[_0x57f445(0x1c4)]('analysis.automation.targetValue',{'val':_0x133252,'ack':!![]}),this[_0x57f445(0x204)](_0x412807[_0x57f445(0x25d)],_0x412807[_0x57f445(0x2ad)],{'success':!![]},_0x412807[_0x57f445(0x270)]);}else{if(_0x412807[_0x57f445(0x2ad)]===_0x57f445(0x3b2)){const {historyId:_0x32f88b,rating:_0x2be8d3,comment:_0x3fa711,alertReason:_0x14a583}=_0x412807[_0x57f445(0x2ca)];_0x32f88b&&_0x2be8d3?(await saveFeedback(this,{'timestamp':Date[_0x57f445(0x1f7)](),'historyId':_0x32f88b,'rating':_0x2be8d3,'comment':_0x3fa711,'alertReason':_0x14a583}),this[_0x57f445(0x204)](_0x412807[_0x57f445(0x25d)],_0x412807['command'],{'success':!![]},_0x412807['callback'])):this[_0x57f445(0x204)](_0x412807[_0x57f445(0x25d)],_0x412807['command'],{'success':![],'error':'Missing\x20data'},_0x412807[_0x57f445(0x270)]);}else _0x412807[_0x57f445(0x2ad)]===_0x57f445(0x3bb)&&(this[_0x57f445(0x32e)][_0x57f445(0x2ae)](_0x57f445(0x2b2)),await this['setStateAsync'](_0x57f445(0x2a7),{'val':![],'ack':!![]}),await this[_0x57f445(0x1c4)](_0x57f445(0x29e),{'val':'','ack':!![]}),this[_0x57f445(0x204)](_0x412807[_0x57f445(0x25d)],_0x412807[_0x57f445(0x2ad)],{'success':!![]},_0x412807[_0x57f445(0x270)]));}}}}}}}}}catch(_0x1f98ca){this[_0x57f445(0x32e)][_0x57f445(0x24f)](_0x57f445(0x286)+_0x412807[_0x57f445(0x2ad)]+':\x20'+_0x1f98ca[_0x57f445(0x2ca)]);if(_0x412807['callback'])this[_0x57f445(0x204)](_0x412807[_0x57f445(0x25d)],_0x412807['command'],{'success':![],'error':_0x1f98ca['message']},_0x412807[_0x57f445(0x270)]);}}}function a0_0x565f(){const _0x554e90=['stick_unreach','party','analysis.isEmergency','Feedback\x20saved:\x20','indicator.alarm.fire','LTM.triggerDailyDigest','BUTLER\x20Execution\x20Error:\x20','callback','briefingEnabled','Subscribing\x20to\x20','includes','kill','‚úÖ\x20AUTO-FIX\x20SUCCESS.\x20Dependencies\x20installed.\x20Restarting\x20Service...','val','sort','setState','LTM.rawEventLog','Event\x20received:\x20','.data.table','Correlation\x20between\x20Inside\x20Temp,\x20Outside\x20Temp\x20and\x20Time','Array\x20of\x20completed\x20movement\x20paths\x20for\x20ML\x20training','notifyPushoverEnabled','[RECORDER]\x20Error\x20saving\x20sequence:\x20','\x0a\x0a\x20\x20\x20\x20AUFGABE:\x0a\x20\x20\x20\x201.\x20Analysiere\x20auf\x20Gesundheitsrisiken\x20(Sturz,\x20Inaktivit√§t).\x0a\x20\x20\x20\x202.\x20Analysiere\x20auf\x20Komfort/Automatisierung\x20(\x22Butler\x22).\x20Erkennst\x20du\x20ein\x20Muster?\x20(z.B.\x20\x22Wenn\x20Bewegung\x20Flur,\x20dann\x20Licht\x20an\x22).\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20FORMAT\x20(JSON\x20Only!):\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22isAlert\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22alertReason\x22:\x20\x22string\x20(kurz)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22isEmergency\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22summary\x22:\x20\x22string\x20(Was\x20passiert\x20gerade?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22automationProposal\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22detected\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22string\x20(Was\x20soll\x20automatisiert\x20werden?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetId\x22:\x20\x22string\x20(ioBroker\x20ID,\x20z.B.\x200_userdata.0.light)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetValue\x22:\x20\x22any\x20(Wert,\x20z.B.\x20true\x20oder\x2050)\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','bind','‚ùå\x20AUTO-FIX\x20FAILED.\x20Please\x20run\x20manually:\x20sudo\x20','startsWith','(((.+)+)+)+$','location','Error\x20in\x20onMessage\x20command\x20','.\x20DATEN:\x20Schlaf\x20','stdout','targetposition','Fehler:\x20','KALENDER\x20ERROR:\x20','analysis.analysisHistory','calendarInstance','system.mode',').\x20Saving\x20to\x20Training\x20Data.','LTM','Reset\x20Sched\x20Error:\x20','AI\x20Alert\x20Status','currentposition','activityLevel','NORMAL','info.','temperature','analysisHistory','analysis.health.trendValue','analysis.isAlert','.\x20OUTPUT:\x20Nur\x20Text.','licenseKey','unshift','analysis.automation.description','analysis.health.trendDiagnosis','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','getFullYear','summary','scriptEnabled','energy','health','üêç\x20Stopping\x20Python\x20Sidecar...','analysis.automation.patternDetected','toLowerCase','working','getOverviewData','lastCheck','[RECORDER]\x20Discarding\x20short\x20sequence\x20(Length:\x20','command','info','Sleep\x20Score\x20(0-100)','Vom\x20Benutzer\x20best√§tigt\x20(OK).','dimmer','User\x20dismissed\x20automation\x20proposal.','status','Gast','setObjectNotExistsAsync','pythonProcess','parse','ü§ñ\x20BUTLER\x20PROPOSAL:\x20','analysisTimer','occupancy','alertReason','notifyTelegramInstance','fenster','klima','üêç\x20Starting\x20Python\x20Sidecar:\x20','config_pending','pr√§senz','\x20sensors...','loc','Trigger\x20Analysis','sendToAsync','button','warn','accuweather.0','stderr','message','Normal','maintenance','Urlaub','Scanning\x20for\x20devices\x20(V8:\x20Whitelist\x20Priority)...','isPresent','Baseline\x20Status','getStateAsync','ack','Last\x20raw\x20event','_calName','description','üì°\x20Hooking\x20into\x20','LTM.processingStatus','getEnums','\x20for\x20interactive\x20buttons...','round','values','level','Fokus\x20auf\x20Komfort.','Deviation','apiKey','\x0aSTB:\x20','Started\x20at\x20','latitude','08:00','main','actual_temperature','date','Trend\x20Diagnosis\x20(Python)','dailyDigests','update','Keine\x20Analyse.','Event\x20History','KALENDER:\x20Keine\x20relevanten\x20Termine','motion','minDaysForBaseline','\x20days\x20of\x20activity\x20data\x20to\x20Python...','uuid','join','WETTER\x20ERROR:\x20','KI-Modell\x20nicht\x20initialisiert','brightness','\x20(Type\x20\x27','\x20=\x20','kontakt','stringify','COGNI_REQUEST_CALL','analysis.automation.targetValue','Last\x20Check','‚ö†Ô∏è\x20ALARM:\x20','getGenerativeModel','Automation\x20Proposals','child_process','firmware','presence','path','scanDevices','AI\x20Emergency\x20Status','Error\x20reading\x20outdoor\x20sensor\x20','.\x0a\x20\x20\x20\x20NOTFALL-KONTEXT:\x20','shift','ready','lastAlertState','system.config','simulateButler','\x20(Value:\x20','json','Analysiere\x20ausgewogen.','Thermodynamic\x20Data\x20Points','humidity','connection','history.','toISOString','enum.functions.*','Generating\x20Morning\x20Briefing...','notifyTelegramEnabled','803556jhxbrd','subscribeStates','baselineDrift','stateChange','indexOf','exitGraceTimer','python3\x20-m\x20pip\x20install\x20-r\x20\x22','analysis.activitySummary','logDuplicates','power','indicator','lastIndexOf','weatherunderground','daswetter','dependencyInstallInProgress','TREND_RESULT','send','onReady','inactivityMonitoringEnabled','currentSystemMode','config','t√ºr','ltmJob','log','substring','\x20*\x20*\x20*','targetValue','rssi','‚úÖ\x20PRO\x20ACTIVATED','notifyEmailInstance','timestamp','[LICENSE\x20CHECK]\x20Key\x20present:\x20','set_temperature','Kein\x20API\x20Key!','automation.triggerAction','vacation','analysis.trigger','number','systemUUID','onMessage','.forecast.current.state','notifyEmailEnabled','[PYTHON]\x20Service\x20exited\x20with\x20code\x20','Gemini\x20Init\x20Error:\x20','shutter','slice','Logbook','sensor','delObjectAsync','switch','enum','Success:\x20Compressed\x20','156669snuHVq','role','Trend\x20Value\x20(%)','members','analysis.automation.suggestedAction','VACATION','_score','triggerBriefing','\x20events)...','.Current.Temperature','No\x20instance','getTime','Briefing\x20Sched\x20Error:\x20','version','modeResetJob','Deaktiviert\x20(Pro-Feature)','Skipped\x20(No\x20AI\x20or\x20Data)','Activity\x20Summary','isArray','üêç\x20Python\x20Pong\x20received!\x20Latency\x20check\x20passed.','No\x20module\x20named','Adapter','HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20','ltmDriftCheckIntervalHours','.\x20KONTEXT:\x20','guest','PRIORIT√ÑT:\x20Sicherheit.','getHours','daswetter.0','response','accuweather','Bibliotheken\x20nicht\x20gefunden','\x20presence\x20devices...','LTM.trainingData.sequences','analysis.health','Lernphase\x20(','licht','events.history_debug_00','Auto\x20Apply\x20Rule','isExit','Pattern\x20Detected','Alert\x20Reason','Starting\x20Autopilot\x20(','replace','‚ùå\x20FREE\x20MODE','event','TEST-PRO-KEY','bewegung','isAlert','[PYTHON]\x20Failed\x20to\x20start\x20(is\x20python3\x20installed?):\x20','224380EPWliU','.forecast.current.temp','ltmLtbWindowDays','push','getForeignObjectAsync','2028150rYTqrW','driftAnalysisTimer','door','.communicate.request','LTM.trainingData.thermodynamics','Scheduling\x20Morning\x20Briefing\x20for\x20','GUEST','Say\x20Hello','data','Guardian:\x20Sending\x20','analysis.triggerBriefing','endsWith','0\x204\x20*\x20*\x20*','presenceDevices','Activity-Level','notifyEmailRecipient','N/A','cogni-living','COGNI_CONFIRM_OK','getForeignObjectsAsync','Error\x20launching\x20Python\x20service:\x20','system.presenceWho','LTM.driftAnalysis.baselineDrift','dutycycle','\x27\x20not\x20in\x20allowed\x20list)','openweathermap','Target\x20ID','type','analysis.deviationFromBaseline','cancel','native','ical.0','getCalendarNames\x20Error:\x20','Target\x20Value','events.lastEvent','common','Training\x20Data\x20Sets','\x20(Value\x20is\x20falsy:\x20','ROLLE:\x20F√ºrsorglicher\x20Assistent.\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20','System\x20Status\x20&\x20Control','light','name','lampe','Invalid\x20JSON\x20from\x20Python:\x20','weather','Cogni-Living','exports','flot.','submitFeedback','System\x20Mode','off','4022080AexNoU','python_service','briefingTime','generateContent','üìû\x20R√úCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20R√ºckruf-Button\x20gedr√ºckt.',').\x20Starting\x20Timer.','dismissAutomation','Motion\x20detected\x20inside.\x20Aborting\x20Exit\x20Timer.','toLocaleString','\x20hours.\x20Potential\x20incapacitation.','online','.\x0a\x20\x20\x20\x20WETTER:\x20','Gemini\x20Analysis\x20Error:\x20','N/A\x20(Learning)','text.alarm','split','setStateAsync','[PYTHON\x20ERR]\x20','Restoring\x20sensor\x20cache\x20from\x20history\x20(','requirements.txt','.Summary.Current','normal','system.isPresent','toString','outdoorSensorId','PRO-','[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20','KALENDER:\x20','value','Daily\x20Digests','debug','some','[RECORDER\x20DEBUG]\x20Accepting\x20Event\x20','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','selectedFunctionIds','[RESULT]','üåÖ\x20Daily\x20Briefing:\x0a','...','271767sxPZbH','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','Drift\x20Status','setHours','getForeignStateAsync','Kalender:\x20Deaktiviert','systemConfig','lowbat','stdin','Fokus\x20auf\x20Familienroutinen.','analysisInterval','analysis.automation.targetId','map','geminiModel','devices','IGNORING\x20DUPLICATE\x20(Cached):\x20','Comfort\x20Summary','generic','lock','retry','Drift\x20Sched\x20Error:\x20','onStateChange','.NextHours.Location_1.Day_1.current.temp_value','Drift\x20Analysis','city','vis.','138lGCzWd','length','string','now','üìû\x20User\x20requested\x20CALL\x20via\x20Telegram!','isGracePeriodActive','.\x20Welcome\x20home.','Unknown','analysis.automation.autoApply','cogni-living\x20adapter\x20starting\x20(v','sensorLastValues','channel','custom','writable','rawEventLog','isEmergency','sendTo',')\x20-\x20FUNCTIONS\x20FIRST\x20ARCHITECTURE','unknown','livingContext','extendObjectAsync','echarts.','getCalendarNames','weatherInstance','pop','targetId','48zRdfsQ','useWeather','\x20events','üìû\x20R√ºckruf\x20anfordern','inactivityThresholdHours','state','blind','eventHistory','trim','0\x203\x20*\x20*\x20*','setForeignStateAsync','object','üß™\x20Simulating\x20Butler\x20Proposal:\x20','\x0a\x20\x20\x20\x20ROLLE:\x20KI-Hausverwalter\x20&\x20Gesundheits-Assistent.\x0a\x20\x20\x20\x20PERSONA:\x20','‚úÖ\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.','subscribeForeignStatesAsync','catch','none','instance','getLtmData','splice','):\x20','window','Drift\x20Details','isProVersion','analysis.alertReason','telegram','search','calendarSelection','Details:\x20','Error\x20checking\x20WiFi:\x20','genAI','material.','indicator.alarm','Trigger\x20Action\x20Now','ltmStbWindowDays','aiPersona','geminiApiKey','python3','uuid-error','setpoint','WETTER:\x20','forEach','LTM.trainingData','exitTimer','Aktiv\x20(','events.history','analysis.health.restlessness','valve','time','analysis.automation','Kein\x20API\x20Key\x20eingegeben.','automationProposal','admin.','getMonth','simple-api.','details','LTM.dailyDigests','LTM.driftAnalysis.lastCheck','Health\x20&\x20Sleep\x20Analysis','‚úÖ\x20Alles\x20OK\x20(Reset)','schalter','üêç\x20Guardian\x20Diagnosis\x20(','notifyPushoverRecipient','briefingJob','error','write','Health\x20Notes','WETTER:\x20Keine\x20Daten\x20gefunden','/100,\x20Aktivit√§t\x20seit\x2004:00:\x20','testApiKey','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','scheduleJob','analysis.lastResult','filter','Exit\x20Sensor\x20triggered\x20(','expire','[TEST]\x20','5532184CQdMZS','from','boolean','analysis.automation.triggerAction','LTM.driftAnalysis','LTM.baselineStatus','triggerDailyDigest','Feedback\x20Log','Comfort\x20Suggestion','text','longitude','PONG','contact'];a0_0x565f=function(){return _0x554e90;};return a0_0x565f();}if(require[a0_0x1f8046(0x2e4)]!==module)module[a0_0x1f8046(0x3b0)]=_0x17c30c=>new CogniLiving(_0x17c30c);else new CogniLiving();