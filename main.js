function a0_0x54d1(_0x5833b0,_0x1ace13){const _0x2dfece=a0_0x5d1c();return a0_0x54d1=function(_0x5d9500,_0x54f1bf){_0x5d9500=_0x5d9500-0x12b;let _0x5d1c50=_0x2dfece[_0x5d9500];return _0x5d1c50;},a0_0x54d1(_0x5833b0,_0x1ace13);}const a0_0x4968cc=a0_0x54d1;(function(_0x22dc7d,_0x523a2a){const _0x4b4499=a0_0x54d1,_0x5fec66=_0x22dc7d();while(!![]){try{const _0x56205e=-parseInt(_0x4b4499(0x231))/0x1*(-parseInt(_0x4b4499(0x1e9))/0x2)+-parseInt(_0x4b4499(0x17a))/0x3*(parseInt(_0x4b4499(0x24c))/0x4)+-parseInt(_0x4b4499(0x1f0))/0x5+-parseInt(_0x4b4499(0x174))/0x6+-parseInt(_0x4b4499(0x23d))/0x7*(parseInt(_0x4b4499(0x239))/0x8)+parseInt(_0x4b4499(0x14d))/0x9+parseInt(_0x4b4499(0x1ed))/0xa;if(_0x56205e===_0x523a2a)break;else _0x5fec66['push'](_0x5fec66['shift']());}catch(_0x4cc2c2){_0x5fec66['push'](_0x5fec66['shift']());}}}(a0_0x5d1c,0x9dfff));const a0_0x54f1bf=(function(){let _0x82cf33=!![];return function(_0x2164cd,_0x5e1e8a){const _0x7be10d=_0x82cf33?function(){const _0x4962a8=a0_0x54d1;if(_0x5e1e8a){const _0x43e040=_0x5e1e8a[_0x4962a8(0x134)](_0x2164cd,arguments);return _0x5e1e8a=null,_0x43e040;}}:function(){};return _0x82cf33=![],_0x7be10d;};}()),a0_0x5d9500=a0_0x54f1bf(this,function(){const _0x2e10ba=a0_0x54d1;return a0_0x5d9500[_0x2e10ba(0x206)]()[_0x2e10ba(0x130)](_0x2e10ba(0x18b))['toString']()[_0x2e10ba(0x230)](a0_0x5d9500)[_0x2e10ba(0x130)](_0x2e10ba(0x18b));});function a0_0x5d1c(){const _0x4e3aeb=['rawEventLog','toLowerCase','lastAlertState','LTM.rawEventLog','response','Init...','NORMAL','sensorLastValues','onMessage','.json','DAY','round','analysis.activity.roomHistory','motion','cleanupGhostInterventions','TRAIN_TOPOLOGY','health','models/gemini-flash-latest','terrasse','onReady','./lib/scheduler','SET_LEARNING_MODE','Sonne:\x20','licenseKey','telegram','mkdirSync','error','Warm-Up\x20Time','text','log','analysis.training.status','length','TRAIN_SECURITY','exports','exitTimer','isArray','No\x20data','getStateAsync','{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}','ready','from','.venv','getForeignStateAsync','checkSolarCondition','.system.mode','Warte\x20auf\x20Analyse...','getHours','handleInfrasound','debug','replace','toLocaleDateString','info','üíæ\x20Saving\x20Daily\x20History\x20for\x20','devices','reduce','rows','executeAutomationAction','./lib/scanner','pressureBuffer','initSystemConfig','todayVector','TRAIN_ENERGY','üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','analysis.health.activityTrend','timestamp','integrateRoomTime','Aktiv\x20(','analysisTimer','onStateChange','stateChange','calendarName','filter','currentSystemMode','callback','isProVersion','CALCULATE_HEALTH_TREND','instance','analysis.training.triggerSecurity','triggerInfrasoundCorrelation','string','analysis.energy.warmupTimes','number','59\x2023\x20*\x20*\x20*','‚Ü∫\x20Replaying\x20','forEach','262642hfsWTE','moduleComfort','json',',\x20Temp:\x20','28242330XlnVra','endsWith','python','6225650bQhGLP','common','analysis.training.triggerComfort','./lib/ai_agent','Adapter','stringify','find','Guest\x20Mode','triggerGaitAnalysis','scheduleJob','infrasoundLocked','eventHistory','split','includes','initSchedules','dailyDigests','‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.','substring','analysis.training.triggerEnergy','generateHealthReport','genAI','minDaysForBaseline','toString','setStateAsync','setHours','object','warn','driftAnalysisTimer','analysisHistory','message','readFileSync','location','analysis.automation.targetId','analysis.training.triggerTopology','./lib/installer','apiKey','automation.triggerAction','analysis.health.geminiDay','analysis.health.todayRoomDetails','runPythonHealthCheck','value','guest','scanThermostats','Gemini\x20Report\x20Night','checkCalendarTriggers','checkLicense','analysis.prediction.trackerConfidence','main','scanForDevices','analysis.training.triggerHealth','subscribeForeignStates','sendMorningBriefing','max','Room\x20Dwell\x20Time\x20Stats','abortExitTimer','analysis.trigger','state','updateHealthVector','setDate','geminiApiKey','system.adapter.ical.È¶ô','loadSystemMode','some','system.adapter.ical.','constructor','2aKXvzC','system.presenceWho','join','systemConfig','healthTrendInterval','isRelevantActivity','\x20Kalender-Adapter\x20gefunden.','toISOString','3368rJDzNL','enum','add','memoryCache','8043PGGZLA','moduleHealth','./lib/recorder','name','History\x20Save\x20Error:\x20','analysis.energy.warmupSources','existsSync','analysis.activity.roomStats','history','LTM.trainingData.sequences','setState','protectAiMemory','setPresence','security','triggerDailyDigest','12AlDqfJ','system','...','historyJob','NIGHT','bootTime','parse','config','getForeignObjectsAsync','search','Keine\x20Daten','Gemini\x20Report\x20Day','moduleEnergy','apply','isPresent','values','all','@google/generative-ai','./lib/python_bridge','version','inactivityThresholdHours','ltmJob','type','command','updateTopology','setObjectNotExistsAsync','date','moduleSecurity','getOverviewData','analyzeWindowOpening','haust√ºr','Verbindung\x20erfolgreich:\x20','subscribeStates','Lernphase\x20(','TRAIN_COMFORT','infrasoundEnabled','getHistoryData','LTM.trainingData.thermodynamics','2884662EVnfFe','ack','dependencyInstallInProgress','Say\x20Hello','enum.rooms.*','briefingJob','Gemini\x20Init\x20Error:\x20','{\x22history\x22:{}}','utf8','SYSTEM_DP_MODE','window','activeModules','initZombies','subscribeForeignStatesAsync','SYSTEM_MODES','fill','cogni-living\x20adapter\x20starting\x20(v','LTM.triggerDailyDigest','getEnums','\x20Tage)','TRAIN_HEALTH','@iobroker/adapter-core','LTM.dailyDigests','appendToLog','Party\x20Mode','now','saveDailyHistory','infrasoundSensorId','sources','writeFileSync','scanDevices','node-schedule','‚úÖ\x20History\x20saved:\x20','./lib/automation','push','lastTrackerEventTime','roomIntegratorTimer','Standard','modeResetJob','3894084pzRlGE','onUnload','Daily\x20Room\x20Details\x20(48x30min)','runGeminiAnalysis','party','testApiKey','382353iLSAdk','\x22history\x22:{}','getGenerativeModel','send','min','energy','processSensorEvent','Kein\x20API\x20Key\x20√ºbergeben.','bin','modules','replayTodayEvents','bind','val','cancel','triggerBriefing','[Integrator]\x20Error:\x20','sendTo','(((.+)+)+)+$','cogni-living','getAbsoluteDefaultDataDir','analysis.health.todayVector','getObjectViewAsync','analysis.security.learningStatus','application/json','open','then'];a0_0x5d1c=function(){return _0x4e3aeb;};return a0_0x5d1c();}a0_0x5d9500();'use strict';const utils=require(a0_0x4968cc(0x162)),{GoogleGenerativeAI}=require(a0_0x4968cc(0x138)),path=require('path'),fs=require('fs'),installer=require(a0_0x4968cc(0x212)),scanner=require(a0_0x4968cc(0x1cd)),schedulers=require(a0_0x4968cc(0x1a8)),topology=require('./lib/topology'),setup=require('./lib/setup'),recorder=require(a0_0x4968cc(0x23f)),pythonBridge=require(a0_0x4968cc(0x139)),aiAgent=require(a0_0x4968cc(0x1f3)),deadMan=require('./lib/dead_man'),automation=require(a0_0x4968cc(0x16e)),GEMINI_MODEL=a0_0x4968cc(0x1a5);class CogniLiving extends utils[a0_0x4968cc(0x1f4)]{constructor(_0x2f3673){const _0x3a4789=a0_0x4968cc;super({..._0x2f3673,'name':_0x3a4789(0x18c)}),this['eventHistory']=[],this[_0x3a4789(0x20c)]=[],this['rawEventLog']=[],this[_0x3a4789(0x1ff)]=[],this[_0x3a4789(0x19b)]={},this[_0x3a4789(0x234)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x3a4789(0x135)]=!![],this[_0x3a4789(0x1b6)]=null,this['exitGraceTimer']=null,this['isGracePeriodActive']=![],this[_0x3a4789(0x204)]=null,this['geminiModel']=null,this[_0x3a4789(0x1dc)]=setup['SYSTEM_MODES'][_0x3a4789(0x19a)],this['isProVersion']=![],this[_0x3a4789(0x196)]=![],this[_0x3a4789(0x1d7)]=null,this[_0x3a4789(0x13c)]=null,this[_0x3a4789(0x173)]=null,this[_0x3a4789(0x20b)]=null,this[_0x3a4789(0x152)]=null,this['historyJob']=null,this['trackerHeartbeat']=null,this['healthTrendInterval']=null,this[_0x3a4789(0x171)]=null,this['dependencyInstallInProgress']=![],this[_0x3a4789(0x170)]=Date[_0x3a4789(0x166)](),this[_0x3a4789(0x23c)]=null,this[_0x3a4789(0x12c)]=Date[_0x3a4789(0x166)](),this[_0x3a4789(0x1fa)]=![],this[_0x3a4789(0x1ce)]=[],this[_0x3a4789(0x158)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x3a4789(0x1bb),this[_0x3a4789(0x1a7)][_0x3a4789(0x185)](this)),this['on'](_0x3a4789(0x1d9),this[_0x3a4789(0x1d8)][_0x3a4789(0x185)](this)),this['on']('unload',this['onUnload'][_0x3a4789(0x185)](this)),this['on'](_0x3a4789(0x20d),this[_0x3a4789(0x19c)][_0x3a4789(0x185)](this));}async[a0_0x4968cc(0x1a7)](){const _0xdd6463=a0_0x4968cc;this[_0xdd6463(0x1b1)][_0xdd6463(0x1c7)](_0xdd6463(0x15d)+this[_0xdd6463(0x13a)]+')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)');if(this[_0xdd6463(0x12e)][_0xdd6463(0x23e)]!==undefined)this[_0xdd6463(0x158)][_0xdd6463(0x1a4)]=this['config'][_0xdd6463(0x23e)];if(this[_0xdd6463(0x12e)][_0xdd6463(0x142)]!==undefined)this[_0xdd6463(0x158)][_0xdd6463(0x24a)]=this['config']['moduleSecurity'];if(this[_0xdd6463(0x12e)][_0xdd6463(0x133)]!==undefined)this[_0xdd6463(0x158)]['energy']=this[_0xdd6463(0x12e)][_0xdd6463(0x133)];if(this[_0xdd6463(0x12e)]['moduleComfort']!==undefined)this[_0xdd6463(0x158)]['comfort']=this[_0xdd6463(0x12e)][_0xdd6463(0x1ea)];if(this[_0xdd6463(0x12e)][_0xdd6463(0x183)])this['activeModules']={...this[_0xdd6463(0x158)],...this[_0xdd6463(0x12e)][_0xdd6463(0x183)]};this['startSystem']();}async['startSystem'](){const _0x4febca=a0_0x4968cc;await setup[_0x4febca(0x159)](this);try{this['isProVersion']=await setup[_0x4febca(0x21d)](this['config'][_0x4febca(0x1ab)]);}catch(_0xbb7da){}if(!this[_0x4febca(0x12e)][_0x4febca(0x13b)]||this[_0x4febca(0x12e)][_0x4febca(0x13b)]<0.1)this[_0x4febca(0x12e)][_0x4febca(0x13b)]=0xc;await setup['initHistory'](this),await setup[_0x4febca(0x1cf)](this);try{const _0x8e4e20=await this[_0x4febca(0x1b9)](_0x4febca(0x1e4)),_0x12b76b=await this['getStateAsync'](_0x4febca(0x242));_0x8e4e20&&_0x8e4e20[_0x4febca(0x186)]&&_0x12b76b&&_0x12b76b[_0x4febca(0x186)]&&(Date['now']()-_0x8e4e20['ts']<0x4*0xe10*0x3e8&&(this[_0x4febca(0x23c)]={'times':JSON[_0x4febca(0x12d)](_0x8e4e20[_0x4febca(0x186)]),'sources':JSON[_0x4febca(0x12d)](_0x12b76b[_0x4febca(0x186)])}));}catch(_0x33c617){}if(this[_0x4febca(0x12e)]['geminiApiKey'])try{this['genAI']=new GoogleGenerativeAI(this['config'][_0x4febca(0x22b)]),this['geminiModel']=this['genAI']['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x4febca(0x191)}});}catch(_0x59dd37){this[_0x4febca(0x1b1)][_0x4febca(0x1ae)](_0x4febca(0x153)+_0x59dd37[_0x4febca(0x20d)]);}await setup['createAllObjects'](this),await this[_0x4febca(0x22d)](),schedulers[_0x4febca(0x1fe)](this),await this[_0x4febca(0x140)]('analysis.visualization.pulse',{'type':_0x4febca(0x228),'common':{'name':'Live\x20Event\x20Pulse','type':_0x4febca(0x1e5),'role':_0x4febca(0x218),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x4febca(0x244),{'type':_0x4febca(0x228),'common':{'name':_0x4febca(0x225),'type':_0x4febca(0x1e3),'role':_0x4febca(0x1eb),'read':!![],'write':![],'def':_0x4febca(0x1ba)},'native':{}}),await this[_0x4febca(0x140)](_0x4febca(0x1a0),{'type':_0x4febca(0x228),'common':{'name':'Room\x20History\x20(24h\x20Buckets)','type':_0x4febca(0x1e3),'role':_0x4febca(0x1eb),'read':!![],'write':![],'def':_0x4febca(0x154)},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.geminiNight',{'type':_0x4febca(0x228),'common':{'name':_0x4febca(0x21b),'type':_0x4febca(0x1e3),'role':_0x4febca(0x1b0),'read':!![],'write':![],'def':_0x4febca(0x1c1)},'native':{}}),await this[_0x4febca(0x140)](_0x4febca(0x215),{'type':_0x4febca(0x228),'common':{'name':_0x4febca(0x132),'type':_0x4febca(0x1e3),'role':'text','read':!![],'write':![],'def':_0x4febca(0x1c1)},'native':{}}),await this[_0x4febca(0x140)](_0x4febca(0x18e),{'type':_0x4febca(0x228),'common':{'name':'Daily\x20Activity\x20Vector\x20(48x30min)','type':_0x4febca(0x1e3),'role':_0x4febca(0x1eb),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x4febca(0x140)](_0x4febca(0x216),{'type':_0x4febca(0x228),'common':{'name':_0x4febca(0x176),'type':_0x4febca(0x1e3),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x4febca(0x140)](_0x4febca(0x1d3),{'type':_0x4febca(0x228),'common':{'name':'General\x20Activity\x20Trend','type':_0x4febca(0x1e5),'role':_0x4febca(0x218),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x4febca(0x140)](_0x4febca(0x1e4),{'type':_0x4febca(0x228),'common':{'name':_0x4febca(0x1af),'type':_0x4febca(0x1e3),'role':_0x4febca(0x1eb),'read':!![],'write':![]},'native':{}});try{const _0x5a021e=await this[_0x4febca(0x1b9)]('events.history');if(_0x5a021e&&_0x5a021e[_0x4febca(0x186)]){this[_0x4febca(0x1fb)]=JSON[_0x4febca(0x12d)](_0x5a021e[_0x4febca(0x186)]);if(this['isProVersion']){const _0x1ae35d=await this['getStateAsync'](_0x4febca(0x197));if(_0x1ae35d&&_0x1ae35d[_0x4febca(0x186)])this[_0x4febca(0x194)]=JSON[_0x4febca(0x12d)](_0x1ae35d[_0x4febca(0x186)]);}this['log'][_0x4febca(0x1c7)]('üì¶\x20Restored\x20'+this[_0x4febca(0x1fb)][_0x4febca(0x1b3)]+'\x20events\x20from\x20standard\x20storage.');}}catch(_0x95e92e){this[_0x4febca(0x1fb)]=[];}try{const _0x1feecd=await this[_0x4febca(0x1b9)](_0x4febca(0x163));if(_0x1feecd&&_0x1feecd[_0x4febca(0x186)])this[_0x4febca(0x1ff)]=JSON[_0x4febca(0x12d)](_0x1feecd[_0x4febca(0x186)]);}catch(_0x304dda){this[_0x4febca(0x1ff)]=[];}const _0xf421ed=this['dailyDigests'][_0x4febca(0x1b3)]>=(this[_0x4febca(0x12e)][_0x4febca(0x205)]||0x7)?_0x4febca(0x1d6)+this[_0x4febca(0x1ff)]['length']+_0x4febca(0x160):_0x4febca(0x148)+this['dailyDigests'][_0x4febca(0x1b3)]+'/'+(this['config'][_0x4febca(0x205)]||0x7)+')';await this[_0x4febca(0x207)]('LTM.baselineStatus',{'val':_0xf421ed,'ack':!![]}),this[_0x4febca(0x147)](_0x4febca(0x227)),this[_0x4febca(0x147)](_0x4febca(0x15e)),this[_0x4febca(0x147)](_0x4febca(0x221));this[_0x4febca(0x12e)][_0x4febca(0x14a)]&&this['config'][_0x4febca(0x168)]&&this[_0x4febca(0x158)]['security']&&this[_0x4febca(0x222)](this[_0x4febca(0x12e)]['infrasoundSensorId']);const _0x3071eb=this['config'][_0x4febca(0x1c9)];if(_0x3071eb)for(const _0x24fab6 of _0x3071eb){await this[_0x4febca(0x15a)](_0x24fab6['id']);}const _0x50316b=this['config']['presenceDevices'];if(_0x50316b)for(const _0x15df26 of _0x50316b){await this[_0x4febca(0x15a)](_0x15df26);}const _0x4f5b97=require(_0x4febca(0x16c));if(this[_0x4febca(0x24f)])this[_0x4febca(0x24f)]['cancel']();this[_0x4febca(0x24f)]=_0x4f5b97[_0x4febca(0x1f9)](_0x4febca(0x1e6),()=>{const _0x5373be=_0x4febca;this[_0x5373be(0x167)]();}),setTimeout(()=>this[_0x4febca(0x184)](),0x1388);if(this[_0x4febca(0x171)])clearInterval(this['roomIntegratorTimer']);this[_0x4febca(0x1d5)](),this[_0x4febca(0x171)]=setInterval(async()=>{await this['integrateRoomTime']();},0x3c*0x3e8);if(this[_0x4febca(0x235)])clearInterval(this[_0x4febca(0x235)]);this['healthTrendInterval']=setInterval(()=>{const _0x1a9f65=_0x4febca;this[_0x1a9f65(0x1de)]&&this['activeModules'][_0x1a9f65(0x1a4)]&&this['runPythonHealthCheck']();},0x4*0x3c*0x3c*0x3e8);const _0x54cf28=path[_0x4febca(0x233)](__dirname,_0x4febca(0x1bd),_0x4febca(0x182),_0x4febca(0x1ef));pythonBridge['startService'](this,_0x54cf28);}[a0_0x4968cc(0x175)](_0x3d29db){const _0x1bf5e5=a0_0x4968cc;if(this['historyJob'])this[_0x1bf5e5(0x24f)][_0x1bf5e5(0x187)]();this[_0x1bf5e5(0x167)]()[_0x1bf5e5(0x193)](()=>{const _0x184a6d=_0x1bf5e5;if(this[_0x184a6d(0x1d7)])clearInterval(this[_0x184a6d(0x1d7)]);if(this[_0x184a6d(0x171)])clearInterval(this[_0x184a6d(0x171)]);recorder[_0x184a6d(0x226)](this),pythonBridge['stopService'](this),_0x3d29db();});}async[a0_0x4968cc(0x184)](){const _0x439f29=a0_0x4968cc;if(!this[_0x439f29(0x1fb)]||this['eventHistory'][_0x439f29(0x1b3)]===0x0){this['log']['warn']('‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.');return;}this[_0x439f29(0x1b1)][_0x439f29(0x1c7)](_0x439f29(0x1e7)+this[_0x439f29(0x1fb)][_0x439f29(0x1b3)]+'\x20events\x20from\x20today...');const _0x20c2ac=new Date()[_0x439f29(0x208)](0x0,0x0,0x0,0x0),_0x2a0565=_0x439f29(0x1a0);let _0x41189f={'history':{},'date':new Date()['toLocaleDateString']()};const _0x1f4d0e=_0x439f29(0x18e),_0x2e6e6b=_0x439f29(0x216);let _0x3c6602=new Array(0x30)['fill'](0x0),_0x16cb90=Array['from']({'length':0x30},()=>[]);this['eventHistory'][_0x439f29(0x1e8)](_0x15bd4a=>{const _0xc3f314=_0x439f29;if(_0x15bd4a[_0xc3f314(0x1d4)]>=_0x20c2ac){if(recorder[_0xc3f314(0x236)](_0x15bd4a['type'],_0x15bd4a['value'])){const _0x47bd36=new Date(_0x15bd4a['timestamp']),_0x5cc761=_0x47bd36[_0xc3f314(0x1c2)]()*0x2+(_0x47bd36['getMinutes']()>=0x1e?0x1:0x0);if(_0x5cc761<0x30){_0x3c6602[_0x5cc761]++;const _0x4f1ee5=_0x15bd4a[_0xc3f314(0x20f)]||_0x15bd4a[_0xc3f314(0x240)]||'?';let _0xa86b0d=_0x16cb90[_0x5cc761];!_0xa86b0d[_0xc3f314(0x1fd)](_0x4f1ee5)&&_0xa86b0d['push'](_0x4f1ee5);}const _0x5408d4=_0x47bd36[_0xc3f314(0x1c2)]();let _0x13f91f=_0x15bd4a[_0xc3f314(0x20f)]||'Unknown';const _0x206147=(this[_0xc3f314(0x12e)][_0xc3f314(0x1c9)]||[])['find'](_0x545cfa=>_0x545cfa[_0xc3f314(0x20f)]===_0x13f91f);if(_0x206147)_0x13f91f=_0x206147[_0xc3f314(0x20f)];if(!_0x41189f[_0xc3f314(0x245)][_0x13f91f])_0x41189f[_0xc3f314(0x245)][_0x13f91f]=new Array(0x18)[_0xc3f314(0x15c)](0x0);if(_0x41189f[_0xc3f314(0x245)][_0x13f91f][_0x5408d4]<0x3c)_0x41189f[_0xc3f314(0x245)][_0x13f91f][_0x5408d4]++;}}});const _0x483f31=await this[_0x439f29(0x1b9)](_0x2a0565);(!_0x483f31||!_0x483f31[_0x439f29(0x186)]||_0x483f31[_0x439f29(0x186)]==='{}'||_0x483f31[_0x439f29(0x186)][_0x439f29(0x1fd)](_0x439f29(0x17b)))&&await this[_0x439f29(0x207)](_0x2a0565,{'val':JSON[_0x439f29(0x1f5)](_0x41189f),'ack':!![]}),await this['setStateAsync'](_0x1f4d0e,{'val':JSON[_0x439f29(0x1f5)](_0x3c6602),'ack':!![]}),await this[_0x439f29(0x207)](_0x2e6e6b,{'val':JSON[_0x439f29(0x1f5)](_0x16cb90),'ack':!![]}),this[_0x439f29(0x1b1)][_0x439f29(0x1c7)](_0x439f29(0x200));}async[a0_0x4968cc(0x167)](){const _0x355e14=a0_0x4968cc;if(!this[_0x355e14(0x158)][_0x355e14(0x1a4)])return;const _0x4aa951=new Date()['toISOString']()[_0x355e14(0x1fc)]('T')[0x0];this[_0x355e14(0x1b1)][_0x355e14(0x1c4)](_0x355e14(0x1c8)+_0x4aa951+_0x355e14(0x24e));try{const [_0x3e6928,_0x3b76a4,_0x6af9e6,_0x2638f0,_0x26f457,_0x476e03]=await Promise[_0x355e14(0x137)]([this['getStateAsync'](_0x355e14(0x1a0)),this[_0x355e14(0x1b9)]('analysis.health.geminiNight'),this[_0x355e14(0x1b9)]('analysis.health.geminiDay'),this[_0x355e14(0x1b9)]('analysis.security.lastScore'),this[_0x355e14(0x1b9)](_0x355e14(0x18e)),this[_0x355e14(0x1b9)](_0x355e14(0x1d3))]),_0xf7af09=this[_0x355e14(0x1fb)][_0x355e14(0x1db)](_0x1b7c53=>_0x1b7c53[_0x355e14(0x1d4)]>=new Date()[_0x355e14(0x208)](0x0,0x0,0x0,0x0)&&(_0x1b7c53[_0x355e14(0x240)]['toLowerCase']()[_0x355e14(0x1fd)](_0x355e14(0x145))||_0x1b7c53[_0x355e14(0x240)][_0x355e14(0x195)]()['includes'](_0x355e14(0x1a6)))&&(_0x1b7c53['value']===!![]||_0x1b7c53[_0x355e14(0x218)]===_0x355e14(0x192)))[_0x355e14(0x1b3)];let _0x232daf=0x55;if(_0x476e03&&_0x476e03['val']!==undefined)_0x232daf=Math[_0x355e14(0x17e)](0x64,Math[_0x355e14(0x224)](0x14,Math[_0x355e14(0x19f)](0x50+Number(_0x476e03['val'])*0x5)));const _0x55720c={'date':_0x4aa951,'timestamp':Date[_0x355e14(0x166)](),'roomHistory':_0x3e6928?.[_0x355e14(0x186)]?JSON[_0x355e14(0x12d)](_0x3e6928[_0x355e14(0x186)]):{},'geminiNight':_0x3b76a4?.[_0x355e14(0x186)]||_0x355e14(0x131),'geminiDay':_0x6af9e6?.[_0x355e14(0x186)]||_0x355e14(0x131),'anomalyScore':_0x2638f0?.[_0x355e14(0x186)]||0.1,'todayVector':_0x26f457?.[_0x355e14(0x186)]?JSON[_0x355e14(0x12d)](_0x26f457[_0x355e14(0x186)]):new Array(0x30)[_0x355e14(0x15c)](0x0),'batteryLevel':_0x232daf,'freshAirCount':_0xf7af09,'eventHistory':this[_0x355e14(0x1fb)]},_0x4eedb7=utils[_0x355e14(0x18d)](),_0x1268c4=path['join'](_0x4eedb7,_0x355e14(0x18c),_0x355e14(0x245));if(!fs[_0x355e14(0x243)](_0x1268c4))fs[_0x355e14(0x1ad)](_0x1268c4,{'recursive':!![]});const _0xe18a94=path['join'](_0x1268c4,_0x4aa951+'.json');fs[_0x355e14(0x16a)](_0xe18a94,JSON[_0x355e14(0x1f5)](_0x55720c)),this[_0x355e14(0x1b1)][_0x355e14(0x1c7)](_0x355e14(0x16d)+_0xe18a94);}catch(_0x48bc6f){this[_0x355e14(0x1b1)][_0x355e14(0x1ae)](_0x355e14(0x241)+_0x48bc6f[_0x355e14(0x20d)]);}}async[a0_0x4968cc(0x1d5)](){const _0x28e5f2=a0_0x4968cc;if(!this[_0x28e5f2(0x135)])return;try{let _0x384bd4=null;try{const _0x3d20cc=await this[_0x28e5f2(0x1b9)]('analysis.prediction.trackerTopRoom'),_0x4d201a=await this['getStateAsync'](_0x28e5f2(0x21e));if(_0x3d20cc&&_0x3d20cc['val']&&_0x4d201a&&_0x4d201a[_0x28e5f2(0x186)]&&_0x4d201a[_0x28e5f2(0x186)]>0.3){if(_0x3d20cc[_0x28e5f2(0x186)]!=='Unknown'&&_0x3d20cc['val']!==_0x28e5f2(0x199))_0x384bd4=_0x3d20cc['val'];}}catch(_0x2d36eb){}if(!_0x384bd4){const _0x385512=this[_0x28e5f2(0x12e)][_0x28e5f2(0x1c9)]||[];for(const _0x37d05d of _0x385512){if(_0x37d05d[_0x28e5f2(0x13d)]===_0x28e5f2(0x1a1)&&_0x37d05d[_0x28e5f2(0x20f)])try{const _0x51a1d5=await this['getForeignStateAsync'](_0x37d05d['id']);if(_0x51a1d5&&(_0x51a1d5[_0x28e5f2(0x186)]===!![]||_0x51a1d5[_0x28e5f2(0x186)]==='on'||_0x51a1d5[_0x28e5f2(0x186)]===0x1)){_0x384bd4=_0x37d05d[_0x28e5f2(0x20f)];break;}}catch(_0x32ab5b){}}}if(!_0x384bd4)return;const _0x2ee435=this[_0x28e5f2(0x12e)][_0x28e5f2(0x1c9)]||[];let _0x3121b0=_0x384bd4;const _0x550b9d=_0x2ee435[_0x28e5f2(0x1f6)](_0x4ac7c9=>_0x4ac7c9[_0x28e5f2(0x20f)]&&_0x4ac7c9[_0x28e5f2(0x20f)][_0x28e5f2(0x195)]()===_0x384bd4[_0x28e5f2(0x195)]());if(_0x550b9d)_0x3121b0=_0x550b9d['location'];const _0x187dd7=_0x28e5f2(0x1a0),_0xf8df11=await this[_0x28e5f2(0x1b9)](_0x187dd7),_0x1dc87d=new Date()[_0x28e5f2(0x1c6)]();let _0x2e4624={'history':{},'date':_0x1dc87d};if(_0xf8df11&&_0xf8df11['val'])try{_0x2e4624=JSON['parse'](_0xf8df11[_0x28e5f2(0x186)]);}catch(_0x1ef119){}_0x2e4624[_0x28e5f2(0x141)]!==_0x1dc87d&&(_0x2e4624[_0x28e5f2(0x245)]={},_0x2e4624['date']=_0x1dc87d);if(!_0x2e4624[_0x28e5f2(0x245)][_0x3121b0])_0x2e4624['history'][_0x3121b0]=new Array(0x18)['fill'](0x0);const _0x3c070a=new Date()[_0x28e5f2(0x1c2)]();if(_0x2e4624[_0x28e5f2(0x245)][_0x3121b0][_0x3c070a]<0x3c)_0x2e4624[_0x28e5f2(0x245)][_0x3121b0][_0x3c070a]++;await this[_0x28e5f2(0x207)](_0x187dd7,{'val':JSON[_0x28e5f2(0x1f5)](_0x2e4624),'ack':!![]});}catch(_0x34167f){this[_0x28e5f2(0x1b1)][_0x28e5f2(0x20a)](_0x28e5f2(0x189)+_0x34167f['message']);}}async[a0_0x4968cc(0x19c)](_0x39b0d0){const _0x2aaadc=a0_0x4968cc;if(typeof _0x39b0d0===_0x2aaadc(0x209)&&_0x39b0d0[_0x2aaadc(0x20d)]){if(_0x39b0d0[_0x2aaadc(0x13e)]===_0x2aaadc(0x14b)){const _0x1bc42e=_0x39b0d0[_0x2aaadc(0x20d)][_0x2aaadc(0x141)],_0x5a897a=utils[_0x2aaadc(0x18d)](),_0xb1faaf=path[_0x2aaadc(0x233)](_0x5a897a,_0x2aaadc(0x18c),_0x2aaadc(0x245),_0x1bc42e+_0x2aaadc(0x19d));if(fs[_0x2aaadc(0x243)](_0xb1faaf))try{const _0x4307d8=JSON[_0x2aaadc(0x12d)](fs['readFileSync'](_0xb1faaf,'utf8'));this[_0x2aaadc(0x18a)](_0x39b0d0[_0x2aaadc(0x1bc)],_0x39b0d0[_0x2aaadc(0x13e)],{'success':!![],'data':_0x4307d8},_0x39b0d0['callback']);}catch(_0x15cf5d){this[_0x2aaadc(0x18a)](_0x39b0d0[_0x2aaadc(0x1bc)],_0x39b0d0[_0x2aaadc(0x13e)],{'success':![],'error':'Corrupt'},_0x39b0d0[_0x2aaadc(0x1dd)]);}else this['sendTo'](_0x39b0d0[_0x2aaadc(0x1bc)],_0x39b0d0[_0x2aaadc(0x13e)],{'success':![],'error':_0x2aaadc(0x1b8)},_0x39b0d0[_0x2aaadc(0x1dd)]);}else{if(_0x39b0d0['command']===_0x2aaadc(0x143)){const _0x2ac61e=this[_0x2aaadc(0x1ff)][_0x2aaadc(0x1b3)];let _0x251068=new Array(0x30)[_0x2aaadc(0x15c)](0x0),_0x1d4393=Array[_0x2aaadc(0x1bc)]({'length':0x30},()=>[]);try{const _0x15e1c0=await this['getStateAsync'](_0x2aaadc(0x18e));if(_0x15e1c0&&_0x15e1c0[_0x2aaadc(0x186)])_0x251068=JSON[_0x2aaadc(0x12d)](_0x15e1c0[_0x2aaadc(0x186)]);const _0x3b5c49=await this['getStateAsync'](_0x2aaadc(0x216));if(_0x3b5c49&&_0x3b5c49[_0x2aaadc(0x186)])_0x1d4393=JSON[_0x2aaadc(0x12d)](_0x3b5c49[_0x2aaadc(0x186)]);}catch(_0x179b8e){}let _0x2eeaa4=new Array(0x30)[_0x2aaadc(0x15c)](0x0);try{const _0x34c6b8=new Date();_0x34c6b8[_0x2aaadc(0x22a)](_0x34c6b8['getDate']()-0x1);const _0x13eb3b=_0x34c6b8[_0x2aaadc(0x238)]()[_0x2aaadc(0x1fc)]('T')[0x0],_0x4e9076=utils['getAbsoluteDefaultDataDir'](),_0x10c245=path[_0x2aaadc(0x233)](_0x4e9076,'cogni-living',_0x2aaadc(0x245),_0x13eb3b+_0x2aaadc(0x19d));if(fs['existsSync'](_0x10c245)){const _0x46d0ca=JSON[_0x2aaadc(0x12d)](fs[_0x2aaadc(0x20e)](_0x10c245,_0x2aaadc(0x155)));if(_0x46d0ca&&_0x46d0ca[_0x2aaadc(0x1d0)])_0x2eeaa4=_0x46d0ca[_0x2aaadc(0x1d0)];}}catch(_0x4fbf4e){}let _0x3b5e2f={'today':{},'yesterday':{}};try{const _0x378f06=await this[_0x2aaadc(0x1b9)]('analysis.activity.roomStats');if(_0x378f06&&_0x378f06['val'])_0x3b5e2f=JSON[_0x2aaadc(0x12d)](_0x378f06[_0x2aaadc(0x186)]);}catch(_0x28e5a4){}let _0x55b65d=null;try{const _0x418975=await this[_0x2aaadc(0x1b9)](_0x2aaadc(0x1d3));if(_0x418975)_0x55b65d=_0x418975[_0x2aaadc(0x186)];}catch(_0x39ee5e){}if(_0x55b65d===undefined||_0x55b65d===null){const _0xf63ce3=_0x251068[_0x2aaadc(0x1ca)]((_0xafce4,_0x234014)=>_0xafce4+_0x234014,0x0),_0x21a8bc=Math[_0x2aaadc(0x17e)](0x2,Math['max'](-0x2,(0x64-_0xf63ce3)/0x32));_0x55b65d=_0x21a8bc;}let _0x51216e=![],_0x40a9e3='',_0x139878='',_0x51b38e='';try{const _0x26a9d1=await this[_0x2aaadc(0x1b9)]('analysis.automation.patternDetected');if(_0x26a9d1&&_0x26a9d1['val']){_0x51216e=!![];const _0x5845b7=await this[_0x2aaadc(0x1b9)]('analysis.automation.description');_0x40a9e3=_0x5845b7?_0x5845b7[_0x2aaadc(0x186)]:'';const _0x4b29ed=await this[_0x2aaadc(0x1b9)](_0x2aaadc(0x210));_0x139878=_0x4b29ed?_0x4b29ed[_0x2aaadc(0x186)]:'';const _0x2171cc=await this[_0x2aaadc(0x1b9)]('analysis.automation.targetValue');_0x51b38e=_0x2171cc?_0x2171cc[_0x2aaadc(0x186)]:'';}}catch(_0x33fd89){}const _0x5f405a=await this['checkSolarCondition'](),_0x230894=(this[_0x2aaadc(0x12e)][_0x2aaadc(0x1c9)]||[])[_0x2aaadc(0x22e)](_0x28a189=>_0x28a189['isSolar']),_0x3cef12=_0x5f405a&&_0x230894;let _0x1b3f97='';try{const _0x5121b0=await this[_0x2aaadc(0x1b9)](_0x2aaadc(0x232));if(_0x5121b0&&_0x5121b0['val'])_0x1b3f97=_0x5121b0[_0x2aaadc(0x186)];}catch(_0x4c8294){}this[_0x2aaadc(0x18a)](_0x39b0d0['from'],_0x39b0d0[_0x2aaadc(0x13e)],{'success':!![],'eventHistory':this[_0x2aaadc(0x1fb)]['slice'](0x0,0x7d0),'stats':{'digestCount':_0x2ac61e,'isPresent':this[_0x2aaadc(0x135)],'hourlyActivity':_0x251068,'hourlyDetails':_0x1d4393,'yesterdayActivity':_0x2eeaa4,'solarActive':_0x3cef12,'presenceWho':_0x1b3f97,'roomStats':_0x3b5e2f,'activityTrend':_0x55b65d,'modules':this[_0x2aaadc(0x158)]},'automation':{'detected':_0x51216e,'description':_0x40a9e3,'targetId':_0x139878,'targetValue':_0x51b38e}},_0x39b0d0[_0x2aaadc(0x1dd)]);}else{if(_0x39b0d0[_0x2aaadc(0x13e)]==='checkThermostats')try{const _0x2efc21=await automation[_0x2aaadc(0x21a)](this);this[_0x2aaadc(0x18a)](_0x39b0d0[_0x2aaadc(0x1bc)],_0x39b0d0['command'],{'success':!![],'results':_0x2efc21},_0x39b0d0[_0x2aaadc(0x1dd)]);}catch(_0x58e649){this[_0x2aaadc(0x18a)](_0x39b0d0[_0x2aaadc(0x1bc)],_0x39b0d0[_0x2aaadc(0x13e)],{'success':![],'error':_0x58e649['message']},_0x39b0d0[_0x2aaadc(0x1dd)]);}else{if(_0x39b0d0[_0x2aaadc(0x13e)]===_0x2aaadc(0x16b))try{const _0x5970b7=await scanner[_0x2aaadc(0x220)](this,_0x39b0d0['message']||{});this[_0x2aaadc(0x18a)](_0x39b0d0[_0x2aaadc(0x1bc)],_0x39b0d0['command'],{'success':!![],'devices':_0x5970b7},_0x39b0d0[_0x2aaadc(0x1dd)]);}catch(_0x3228ad){}else{if(_0x39b0d0[_0x2aaadc(0x13e)]===_0x2aaadc(0x15f)){const _0x1fcbd1=await this['getForeignObjectsAsync']('enum.functions.*','enum'),_0x18fffb=[];if(_0x1fcbd1)for(const _0x12a537 in _0x1fcbd1){let _0x4f8366=_0x1fcbd1[_0x12a537][_0x2aaadc(0x1f1)][_0x2aaadc(0x240)];if(_0x4f8366&&typeof _0x4f8366===_0x2aaadc(0x209))_0x4f8366=_0x4f8366['de']||_0x4f8366['en']||Object['values'](_0x4f8366)[0x0]||JSON[_0x2aaadc(0x1f5)](_0x4f8366);_0x18fffb['push']({'id':_0x12a537,'name':String(_0x4f8366||_0x12a537)});}const _0x3857fb=await this[_0x2aaadc(0x12f)](_0x2aaadc(0x151),_0x2aaadc(0x23a)),_0x1e34ee=[];if(_0x3857fb)for(const _0xd2d7d4 in _0x3857fb){let _0x4c16c8=_0x3857fb[_0xd2d7d4][_0x2aaadc(0x1f1)]['name'];if(_0x4c16c8&&typeof _0x4c16c8===_0x2aaadc(0x209))_0x4c16c8=_0x4c16c8['de']||_0x4c16c8['en']||Object[_0x2aaadc(0x136)](_0x4c16c8)[0x0]||JSON[_0x2aaadc(0x1f5)](_0x4c16c8);_0x1e34ee[_0x2aaadc(0x16f)](String(_0x4c16c8||_0xd2d7d4[_0x2aaadc(0x1fc)]('.')['pop']()));}this[_0x2aaadc(0x18a)](_0x39b0d0[_0x2aaadc(0x1bc)],_0x39b0d0[_0x2aaadc(0x13e)],{'success':!![],'enums':_0x18fffb,'rooms':_0x1e34ee},_0x39b0d0[_0x2aaadc(0x1dd)]);}else{if(_0x39b0d0[_0x2aaadc(0x13e)]==='getCalendarNames')try{const _0x354c6d=await this[_0x2aaadc(0x18f)](_0x2aaadc(0x24d),_0x2aaadc(0x1e0),{'startkey':_0x2aaadc(0x22f),'endkey':_0x2aaadc(0x22c)}),_0x987fb3=new Set();if(_0x354c6d&&_0x354c6d[_0x2aaadc(0x1cb)])for(const _0x5e402e of _0x354c6d[_0x2aaadc(0x1cb)]){const _0x11f6d5=_0x5e402e['id'][_0x2aaadc(0x1c5)]('system.adapter.',''),_0x3bd023=await this[_0x2aaadc(0x1be)](_0x11f6d5+'.data.table');let _0x5ad4ad=![];if(_0x3bd023&&_0x3bd023['val']){const _0x1f8db0=typeof _0x3bd023[_0x2aaadc(0x186)]===_0x2aaadc(0x1e3)?JSON['parse'](_0x3bd023[_0x2aaadc(0x186)]):_0x3bd023[_0x2aaadc(0x186)];Array[_0x2aaadc(0x1b7)](_0x1f8db0)&&_0x1f8db0['forEach'](_0x55ce6e=>{const _0x58942a=_0x2aaadc;_0x55ce6e['calendarName']&&(_0x987fb3[_0x58942a(0x23b)](_0x55ce6e[_0x58942a(0x1da)]),_0x5ad4ad=!![]);});}!_0x5ad4ad&&_0x987fb3['add'](_0x11f6d5);}const _0x17d53b=Array[_0x2aaadc(0x1bc)](_0x987fb3);if(_0x17d53b[_0x2aaadc(0x1b3)]===0x0)_0x17d53b['push'](_0x2aaadc(0x172));this[_0x2aaadc(0x18a)](_0x39b0d0['from'],_0x39b0d0[_0x2aaadc(0x13e)],{'success':!![],'names':_0x17d53b},_0x39b0d0[_0x2aaadc(0x1dd)]);}catch(_0x4d14b8){this[_0x2aaadc(0x18a)](_0x39b0d0[_0x2aaadc(0x1bc)],_0x39b0d0[_0x2aaadc(0x13e)],{'success':![],'error':'Scan\x20Error:\x20'+_0x4d14b8[_0x2aaadc(0x20d)]},_0x39b0d0['callback']);}else{if(_0x39b0d0['command']===_0x2aaadc(0x179))try{const _0x297bad=_0x39b0d0[_0x2aaadc(0x20d)]?_0x39b0d0[_0x2aaadc(0x20d)][_0x2aaadc(0x213)]:'';if(!_0x297bad)throw new Error(_0x2aaadc(0x181));const _0x2089fe=new GoogleGenerativeAI(_0x297bad),_0x2cc2d5=_0x2089fe[_0x2aaadc(0x17c)]({'model':GEMINI_MODEL}),_0x39be85=await _0x2cc2d5['generateContent'](_0x2aaadc(0x150)),_0x233f6d=await _0x39be85[_0x2aaadc(0x198)],_0x1dd2f7=_0x233f6d[_0x2aaadc(0x1b0)]();this['sendTo'](_0x39b0d0['from'],_0x39b0d0[_0x2aaadc(0x13e)],{'success':!![],'message':_0x2aaadc(0x146)+_0x1dd2f7[_0x2aaadc(0x201)](0x0,0x14)+_0x2aaadc(0x24e)},_0x39b0d0[_0x2aaadc(0x1dd)]);}catch(_0x577422){this['sendTo'](_0x39b0d0[_0x2aaadc(0x1bc)],_0x39b0d0[_0x2aaadc(0x13e)],{'success':![],'message':_0x577422[_0x2aaadc(0x20d)]},_0x39b0d0[_0x2aaadc(0x1dd)]);}else{if(_0x39b0d0['command']==='testContext')try{const _0x2340b7=await this[_0x2aaadc(0x1bf)](),_0x5b05ae=await this[_0x2aaadc(0x18f)]('system','instance',{'startkey':_0x2aaadc(0x22f),'endkey':_0x2aaadc(0x22c)}),_0x2bb993=_0x5b05ae&&_0x5b05ae['rows']?_0x5b05ae[_0x2aaadc(0x1cb)][_0x2aaadc(0x1b3)]:0x0;this[_0x2aaadc(0x18a)](_0x39b0d0['from'],_0x39b0d0[_0x2aaadc(0x13e)],{'success':!![],'weather':_0x2aaadc(0x1aa)+_0x2340b7+_0x2aaadc(0x1ec)+(this['sensorLastValues'][this['config']['outdoorSensorId']]||'?')+'¬∞C','calendar':_0x2bb993+_0x2aaadc(0x237)},_0x39b0d0[_0x2aaadc(0x1dd)]);}catch(_0xde0dec){this[_0x2aaadc(0x18a)](_0x39b0d0[_0x2aaadc(0x1bc)],_0x39b0d0[_0x2aaadc(0x13e)],{'success':![]},_0x39b0d0[_0x2aaadc(0x1dd)]);}}}}}}}}}}[a0_0x4968cc(0x217)](){const _0xec1cd4=a0_0x4968cc;if(!this['activeModules'][_0xec1cd4(0x1a4)])return;this[_0xec1cd4(0x1b1)][_0xec1cd4(0x1c4)](_0xec1cd4(0x1d2));try{const _0x248156=this[_0xec1cd4(0x194)]||[];pythonBridge[_0xec1cd4(0x17d)](this,_0xec1cd4(0x1df),{'events':_0x248156});}catch(_0x52a831){this[_0xec1cd4(0x1b1)][_0xec1cd4(0x20a)]('Failed\x20to\x20trigger\x20Python\x20Health\x20Check');}}async[a0_0x4968cc(0x1d8)](_0x2cdd91,_0x49d9c8){const _0x42d927=a0_0x4968cc;if(!_0x49d9c8||this[_0x42d927(0x14f)])return;if(_0x2cdd91[_0x42d927(0x1fd)](_0x42d927(0x1ac))&&_0x2cdd91[_0x42d927(0x1ee)]('communicate.request')&&_0x49d9c8[_0x42d927(0x186)])return;if(this[_0x42d927(0x12e)]['infrasoundEnabled']&&_0x2cdd91===this[_0x42d927(0x12e)]['infrasoundSensorId']&&this[_0x42d927(0x158)][_0x42d927(0x24a)]){this[_0x42d927(0x1c3)](_0x49d9c8['val']);return;}if(_0x49d9c8[_0x42d927(0x14e)]&&_0x2cdd91[_0x42d927(0x1ee)]('pulse'))return;if(_0x2cdd91===this['namespace']+_0x42d927(0x1c0)){if(_0x49d9c8[_0x42d927(0x186)]&&Object['values'](setup[_0x42d927(0x15b)])[_0x42d927(0x1fd)](_0x49d9c8[_0x42d927(0x186)])){this['currentSystemMode']=_0x49d9c8[_0x42d927(0x186)];if(_0x49d9c8[_0x42d927(0x186)]===setup['SYSTEM_MODES']['VACATION'])await recorder[_0x42d927(0x249)](this,![]);else await recorder[_0x42d927(0x249)](this,!![]);if(this[_0x42d927(0x1de)]){let _0x31ab8d=![],_0x22cdda=0x0,_0x4450a5='manual';if(this[_0x42d927(0x1dc)]===_0x42d927(0x178))_0x31ab8d=!![],_0x22cdda=0x168,_0x4450a5=_0x42d927(0x165);else this[_0x42d927(0x1dc)]===_0x42d927(0x219)&&(_0x31ab8d=!![],_0x22cdda=0x5a0,_0x4450a5=_0x42d927(0x1f7));pythonBridge[_0x42d927(0x17d)](this,_0x42d927(0x1a9),{'active':_0x31ab8d,'duration':_0x22cdda,'label':_0x4450a5}),await this[_0x42d927(0x207)](_0x42d927(0x190),{'val':JSON['stringify']({'active':_0x31ab8d,'label':_0x4450a5,'timestamp':Date['now']()}),'ack':!![]});}}if(!_0x49d9c8['ack'])this[_0x42d927(0x247)](_0x2cdd91,{'val':this['currentSystemMode'],'ack':!![]});return;}if(_0x2cdd91['endsWith'](_0x42d927(0x242))&&_0x49d9c8['ack'])this[_0x42d927(0x248)](_0x49d9c8[_0x42d927(0x186)]);if(_0x2cdd91[_0x42d927(0x1ee)](_0x42d927(0x1e4))&&_0x49d9c8[_0x42d927(0x14e)]&&this['activeModules']['energy'])automation[_0x42d927(0x21c)](this);if(!_0x49d9c8[_0x42d927(0x14e)]){if(_0x2cdd91['includes'](_0x42d927(0x227))&&_0x49d9c8[_0x42d927(0x186)]){this[_0x42d927(0x247)](_0x2cdd91,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this);return;}if(_0x2cdd91[_0x42d927(0x1fd)](_0x42d927(0x24b))&&_0x49d9c8[_0x42d927(0x186)]){this[_0x42d927(0x247)](_0x2cdd91,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent['createDailyDigest'](this,pythonBridge);return;}if(_0x2cdd91[_0x42d927(0x1fd)](_0x42d927(0x188))&&_0x49d9c8[_0x42d927(0x186)]){this[_0x42d927(0x247)](_0x2cdd91,{'val':![],'ack':!![]}),aiAgent[_0x42d927(0x223)](this);return;}if(_0x2cdd91[_0x42d927(0x1fd)](_0x42d927(0x214))&&_0x49d9c8[_0x42d927(0x186)]){this[_0x42d927(0x247)](_0x2cdd91,{'val':![],'ack':!![]}),aiAgent[_0x42d927(0x1cc)](this);return;}if(_0x2cdd91[_0x42d927(0x1fd)](_0x42d927(0x1e1))&&_0x49d9c8[_0x42d927(0x186)]){this[_0x42d927(0x247)](_0x2cdd91,{'val':![],'ack':!![]});if(this[_0x42d927(0x1de)])try{const _0x8cfc23=await this[_0x42d927(0x1b9)](_0x42d927(0x246));if(_0x8cfc23&&_0x8cfc23[_0x42d927(0x186)]){const _0x3950cc=JSON[_0x42d927(0x12d)](_0x8cfc23['val']);this[_0x42d927(0x207)](_0x42d927(0x1b2),{'val':'Sec-Training\x20started...','ack':!![]}),pythonBridge[_0x42d927(0x17d)](this,_0x42d927(0x1b4),{'sequences':_0x3950cc});}}catch(_0x39bfb0){}return;}if(_0x2cdd91[_0x42d927(0x1fd)](_0x42d927(0x221))&&_0x49d9c8[_0x42d927(0x186)]){this['setState'](_0x2cdd91,{'val':![],'ack':!![]});if(this[_0x42d927(0x1de)])try{this[_0x42d927(0x217)]();const _0x15f42d=await this[_0x42d927(0x1b9)](_0x42d927(0x163));if(_0x15f42d&&_0x15f42d['val'])pythonBridge[_0x42d927(0x17d)](this,_0x42d927(0x161),{'digests':JSON['parse'](_0x15f42d[_0x42d927(0x186)])});aiAgent[_0x42d927(0x203)](this,_0x42d927(0x12b)),setTimeout(()=>aiAgent[_0x42d927(0x203)](this,_0x42d927(0x19e)),0x2ee0);}catch(_0xdd5d3b){}return;}if(_0x2cdd91[_0x42d927(0x1fd)](_0x42d927(0x202))&&_0x49d9c8['val']){this['setState'](_0x2cdd91,{'val':![],'ack':!![]});if(this[_0x42d927(0x1de)])try{const _0x4ef797=await this[_0x42d927(0x1b9)](_0x42d927(0x14c));if(_0x4ef797&&_0x4ef797['val'])pythonBridge[_0x42d927(0x17d)](this,_0x42d927(0x1d1),{'points':JSON[_0x42d927(0x12d)](_0x4ef797[_0x42d927(0x186)])});}catch(_0x51ca3e){}return;}if(_0x2cdd91[_0x42d927(0x1fd)](_0x42d927(0x1f2))&&_0x49d9c8['val']){this[_0x42d927(0x247)](_0x2cdd91,{'val':![],'ack':!![]});if(this[_0x42d927(0x1de)])try{const _0x4aca16=await this[_0x42d927(0x1b9)](_0x42d927(0x197));if(_0x4aca16&&_0x4aca16[_0x42d927(0x186)]){const _0x223649={};if(this[_0x42d927(0x12e)][_0x42d927(0x1c9)])this[_0x42d927(0x12e)][_0x42d927(0x1c9)][_0x42d927(0x1e8)](_0x4480a0=>{const _0x187631=_0x42d927;if(_0x4480a0['id']&&_0x4480a0[_0x187631(0x13d)])_0x223649[_0x4480a0['id']]=_0x4480a0[_0x187631(0x13d)];});pythonBridge['send'](this,_0x42d927(0x149),{'events':JSON['parse'](_0x4aca16['val']),'deviceMap':_0x223649});}}catch(_0x25b79c){}return;}if(_0x2cdd91[_0x42d927(0x1fd)](_0x42d927(0x211))&&_0x49d9c8['val']){this[_0x42d927(0x247)](_0x2cdd91,{'val':![],'ack':!![]}),topology[_0x42d927(0x13f)](this);if(this[_0x42d927(0x1de)])try{const _0x4f3fe3=await this[_0x42d927(0x1b9)]('LTM.trainingData.sequences');if(_0x4f3fe3&&_0x4f3fe3[_0x42d927(0x186)])pythonBridge[_0x42d927(0x17d)](this,_0x42d927(0x1a3),{'sequences':JSON[_0x42d927(0x12d)](_0x4f3fe3[_0x42d927(0x186)])});}catch(_0x3900c4){}return;}}const _0x1ef3b5=(this[_0x42d927(0x12e)]['devices']||[])[_0x42d927(0x1f6)](_0x1f38f5=>_0x1f38f5['id']===_0x2cdd91);if(_0x1ef3b5){const _0x4c4a80=await recorder[_0x42d927(0x180)](this,_0x2cdd91,_0x49d9c8,_0x1ef3b5);_0x4c4a80&&this[_0x42d927(0x247)]('analysis.visualization.pulse',{'val':Date[_0x42d927(0x166)](),'ack':!![]});_0x4c4a80&&_0x4c4a80[_0x42d927(0x13d)]===_0x42d927(0x1a1)&&_0x4c4a80[_0x42d927(0x20f)]&&this[_0x42d927(0x1de)]&&deadMan['updateLocation'](this,_0x4c4a80[_0x42d927(0x20f)]);_0x49d9c8[_0x42d927(0x186)]&&(_0x49d9c8[_0x42d927(0x186)]===!![]||_0x49d9c8['val']===0x1||String(_0x49d9c8[_0x42d927(0x186)])[_0x42d927(0x195)]()===_0x42d927(0x192))&&(_0x1ef3b5['type']&&(_0x1ef3b5[_0x42d927(0x13d)][_0x42d927(0x1fd)](_0x42d927(0x157))||_0x1ef3b5[_0x42d927(0x13d)][_0x42d927(0x1fd)]('door'))&&this[_0x42d927(0x144)](_0x1ef3b5));if(_0x1ef3b5['type']==='temperature'||_0x1ef3b5['type']==='thermostat'){if(this[_0x42d927(0x158)][_0x42d927(0x17f)])automation[_0x42d927(0x1a2)](this);}}}async[a0_0x4968cc(0x248)](_0xaeb76a){const _0x253930=a0_0x4968cc;if(!this[_0x253930(0x23c)]||Date[_0x253930(0x166)]()-this[_0x253930(0x12c)]>0x493e0)return;try{const _0x454b51=JSON[_0x253930(0x12d)](_0xaeb76a),_0x7c2e30=this[_0x253930(0x23c)][_0x253930(0x169)];let _0x53e680=![];for(const _0x26cc93 in _0x7c2e30){if(_0x7c2e30[_0x26cc93][_0x253930(0x1fd)]('AI')&&_0x454b51[_0x26cc93]&&!_0x454b51[_0x26cc93][_0x253930(0x1fd)]('AI')){_0x53e680=!![];break;}}_0x53e680&&(await this[_0x253930(0x207)](_0x253930(0x1e4),{'val':JSON[_0x253930(0x1f5)](this[_0x253930(0x23c)]['times']),'ack':!![]}),await this['setStateAsync'](_0x253930(0x242),{'val':JSON['stringify'](this[_0x253930(0x23c)][_0x253930(0x169)]),'ack':!![]}));}catch(_0x36143f){}}async[a0_0x4968cc(0x22d)](){const _0x31857d=a0_0x4968cc;try{const _0x70ed65=await this['getStateAsync'](setup[_0x31857d(0x156)]);if(_0x70ed65&&_0x70ed65[_0x31857d(0x186)])this[_0x31857d(0x1dc)]=_0x70ed65[_0x31857d(0x186)];}catch(_0x228ec6){this['currentSystemMode']=setup[_0x31857d(0x15b)][_0x31857d(0x19a)];}}async['checkWifiPresence'](){return![];}async['runAutopilot'](){const _0x41fb49=a0_0x4968cc;await aiAgent[_0x41fb49(0x177)](this);this[_0x41fb49(0x158)]['health']&&(this[_0x41fb49(0x229)](),this[_0x41fb49(0x1f8)]());if(this[_0x41fb49(0x158)]['energy'])this['triggerEnergyPrediction']();}async[a0_0x4968cc(0x1bf)](){return![];}[a0_0x4968cc(0x1f8)](){const _0xa04561=a0_0x4968cc;if(!this[_0xa04561(0x1de)])return;}async['triggerEnergyPrediction'](){}[a0_0x4968cc(0x229)](){}async['handleInfrasound'](_0x30ff86){}async[a0_0x4968cc(0x1e2)](_0x26ae5a,_0xc3c097){}async[a0_0x4968cc(0x144)](_0x3f3be0){}async[a0_0x4968cc(0x164)](_0x23881e){}['sendNotification'](_0x1c8807){}}if(require[a0_0x4968cc(0x21f)]!==module)module[a0_0x4968cc(0x1b5)]=_0x2316ee=>new CogniLiving(_0x2316ee);else new CogniLiving();