function a0_0x873b(){const _0x673b13=['./lib/recorder','./lib/automation','Sensors\x20used\x20for\x20Gait\x20Analysis','407902JrsJOC','VACATION','log','SET_TOPOLOGY','analysis.activity.roomStats','communicate.request','bin','location','energy','moduleEnergy','join',')\x20-\x20Phase\x20E\x20(Hybrid\x20Integrator)','analysis.training.triggerHealth','./lib/installer','checkLicense','presenceDevices','unload','common','[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]','open','.communicate.request','analysis.security.infrasoundLog','dailyDigests','state','checkThermostats','processSensorEvent','ðŸ“…\x20Midnight\x20Reset:\x20Archiving\x20Room\x20Stats.','subscribeForeignStatesAsync','error','notifyTelegramInstance','getStateAsync','party','system.presenceWho','analysis.energy.warmupSources','setupLtmScheduler','yesterday','analysis.automation.patternDetected','path','guest','analysis.health.gaitSensors','ðŸ§©\x20Active\x20Modules:\x20','lastAlertState','Gemini\x20Init\x20Error:\x20','automation.triggerAction','modules','triggerInfrasoundCorrelation','stateChange','devices','eventHistory','SET_LEARNING_MODE','split','infrasoundEnabled','LTM.triggerDailyDigest','sendTo','./lib/setup','isPresent','analysis.visualization.pulse','setupDriftAnalysisScheduler','isGracePeriodActive','text','analysis.energy.pinnForecast','date','analysis.energy.warmupTargets','from','cancel','modeResetJob','search','TRAIN_SECURITY','analysis.automation.triggerAction','window','Active\x20Calendar\x20Enforcements\x20(Locks)','SYSTEM_DP_MODE','application/json','LTM.trainingData.thermodynamics','LTM.baselineStatus','models/gemini-flash-latest','trackerHeartbeat','onReady','analysis.training.triggerSecurity','NORMAL','toLowerCase','inactivityThresholdHours','3482850kpkmOG','loadSystemMode','161bDAsJk','4hkWfnY','scanDevices','LTM.trainingData.sequences','updateHealthVector','object','filter','ack','infrasoundLocked','setHours','checkWifiPresence','now','PINN\x20AI\x20Forecast','TRAIN_HEALTH','sendMorningBriefing','5706uecxsz','enum','Forensic\x20Infrasound\x20Log','initZombies','analyzeWindowOpening','Live\x20Event\x20Pulse','analysis.prediction.trackerTopRoom','674503jsBTgF','executeAutomationAction','TRAIN_TOPOLOGY','Gait\x20Speed\x20Calculation\x20Proof','Guest\x20Mode','analysis.energy.warmupTimes','scanForDevices','runGeminiAnalysis','toString','integrateRoomTime','Unknown','enum.functions.*','message','analysis.triggerBriefing','Daily\x20Activity\x20Vector\x20(24h)','Room\x20Dwell\x20Time\x20Stats\x20(Today/Yesterday)','analysis.health.gaitDebug','getEnums','constructor','geminiModel','forEach','info','(((.+)+)+)+$','Adapter','notifyTelegramEnabled','times','startService','pulse','./lib/python_bridge','activeModules','exitGraceTimer','monitorEnforcements','startSystem','analysis.training.status','triggerEnergyPrediction','type','LTM.dailyDigests','json','security','[Integrator]\x20Error:\x20','exitTimer','analysisHistory','some','moduleComfort','analysis.energy.rlPenalties','analysis.topology.structure','sendNotification','stringify','python','@google/generative-ai','includes','setObjectNotExistsAsync','./lib/scanner','analysisTimer','initHistory','dependencyInstallInProgress','analysis.prediction.trackerConfidence','analysis.trigger','setPresence','value','analysis.automation.targetId','thermostat','roomIntegratorTimer','parse','Warm-Up\x20Target\x20Temps\x20(JSON)','healthTrendInterval','comfort','pop','analysis.energy.ventilationAlerts','trackerEnabled','onStateChange','scanThermostats','sources','onMessage','system.mode','setStateAsync','handleInfrasound','main','moduleHealth','string','{\x22default\x22:\x2021}','cogni-living\x20adapter\x20starting\x20(v','cogni-living','runPythonHealthCheck','analysis.health.activityTrend','.venv','createAllObjects','NONE','\x20Tage)','endsWith','createDailyDigest','isProVersion','moduleSecurity','Aktiv\x20(','getState','Active\x20Ventilation\x20Alerts','find','runAutopilot','namespace','Party\x20Mode','setupModeResetScheduler','apply','3688257yrsKQG','ltmJob','cleanupGhostInterventions','Sec-Training\x20started...','setState','getForeignObjectsAsync','triggerBriefing','appendToLog','length','lastTrackerEventTime','systemConfig','updateTopology','health','runBaselineDriftAnalysis','protectAiMemory','analysis.training.triggerTopology','checkCalendarTriggers','Init...','callback','number','40085hwzcMz','General\x20Activity\x20Trend\x20(%)','command','currentSystemMode','./lib/scheduler','today','infrasoundSensorId','134528ADjpES','bootTime','send','briefingJob','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','rawEventLog','subscribeStates','analysis.training.triggerEnergy','TRAIN_ENERGY','toLocaleDateString','subscribeForeignStates','checkSolarCondition','bind','LTM.rawEventLog','initSystemConfig','push','SYSTEM_MODES','manual','name','minDaysForBaseline','driftAnalysisTimer','ANALYZE_HEALTH','38330qBnaEI','motion','genAI','analysis.health.todayVector','config','triggerGaitAnalysis','TRAIN_COMFORT','timestamp','val','slice','analysis.training.triggerComfort','onUnload','memoryCache'];a0_0x873b=function(){return _0x673b13;};return a0_0x873b();}const a0_0x39cc6c=a0_0x1948;(function(_0x3a1f6c,_0x1d718d){const _0x1bd0e4=a0_0x1948,_0x409e82=_0x3a1f6c();while(!![]){try{const _0x291ef3=parseInt(_0x1bd0e4(0x211))/0x1+parseInt(_0x1bd0e4(0x2b8))/0x2+parseInt(_0x1bd0e4(0x277))/0x3+parseInt(_0x1bd0e4(0x1fc))/0x4*(-parseInt(_0x1bd0e4(0x28b))/0x5)+parseInt(_0x1bd0e4(0x1f9))/0x6+-parseInt(_0x1bd0e4(0x1fb))/0x7*(-parseInt(_0x1bd0e4(0x292))/0x8)+parseInt(_0x1bd0e4(0x20a))/0x9*(-parseInt(_0x1bd0e4(0x2a8))/0xa);if(_0x291ef3===_0x1d718d)break;else _0x409e82['push'](_0x409e82['shift']());}catch(_0x866d48){_0x409e82['push'](_0x409e82['shift']());}}}(a0_0x873b,0x9b831));function a0_0x1948(_0x352fd7,_0x1ecfb1){const _0x3b5203=a0_0x873b();return a0_0x1948=function(_0x37e613,_0x4a627c){_0x37e613=_0x37e613-0x1e1;let _0x873b64=_0x3b5203[_0x37e613];return _0x873b64;},a0_0x1948(_0x352fd7,_0x1ecfb1);}const a0_0x4a627c=(function(){let _0x76c3de=!![];return function(_0x4a5e10,_0x187a2e){const _0x1db27c=_0x76c3de?function(){const _0x309f3d=a0_0x1948;if(_0x187a2e){const _0x314216=_0x187a2e[_0x309f3d(0x276)](_0x4a5e10,arguments);return _0x187a2e=null,_0x314216;}}:function(){};return _0x76c3de=![],_0x1db27c;};}()),a0_0x37e613=a0_0x4a627c(this,function(){const _0xd5c91d=a0_0x1948;return a0_0x37e613[_0xd5c91d(0x219)]()[_0xd5c91d(0x1e9)](_0xd5c91d(0x227))[_0xd5c91d(0x219)]()[_0xd5c91d(0x223)](a0_0x37e613)['search'](_0xd5c91d(0x227));});a0_0x37e613();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x39cc6c(0x242)),path=require(a0_0x39cc6c(0x2dd)),installer=require(a0_0x39cc6c(0x2c5)),scanner=require(a0_0x39cc6c(0x245)),schedulers=require(a0_0x39cc6c(0x28f)),topology=require('./lib/topology'),setup=require(a0_0x39cc6c(0x2ee)),recorder=require(a0_0x39cc6c(0x2b5)),pythonBridge=require(a0_0x39cc6c(0x22d)),aiAgent=require('./lib/ai_agent'),deadMan=require('./lib/dead_man'),automation=require(a0_0x39cc6c(0x2b6)),GEMINI_MODEL=a0_0x39cc6c(0x1f2),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x39cc6c(0x228)]{constructor(_0x84fe88){const _0x3e4c87=a0_0x39cc6c;super({..._0x84fe88,'name':_0x3e4c87(0x263)}),this[_0x3e4c87(0x2e8)]=[],this[_0x3e4c87(0x23a)]=[],this[_0x3e4c87(0x297)]=[],this['dailyDigests']=[],this['sensorLastValues']={},this[_0x3e4c87(0x281)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x3e4c87(0x2ef)]=!![],this[_0x3e4c87(0x239)]=null,this[_0x3e4c87(0x22f)]=null,this[_0x3e4c87(0x1e1)]=![],this[_0x3e4c87(0x2aa)]=null,this[_0x3e4c87(0x224)]=null,this[_0x3e4c87(0x28e)]=setup[_0x3e4c87(0x2a2)][_0x3e4c87(0x1f6)],this[_0x3e4c87(0x26c)]=![],this[_0x3e4c87(0x2e1)]=![],this[_0x3e4c87(0x246)]=null,this[_0x3e4c87(0x278)]=null,this[_0x3e4c87(0x1e8)]=null,this['driftAnalysisTimer']=null,this[_0x3e4c87(0x295)]=null,this['trackerHeartbeat']=null,this[_0x3e4c87(0x252)]=null,this[_0x3e4c87(0x24f)]=null,this[_0x3e4c87(0x248)]=![],this[_0x3e4c87(0x280)]=Date[_0x3e4c87(0x206)](),this[_0x3e4c87(0x2b4)]=null,this[_0x3e4c87(0x293)]=Date[_0x3e4c87(0x206)](),this[_0x3e4c87(0x203)]=![],this['pressureBuffer']=[],this[_0x3e4c87(0x22e)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on']('ready',this[_0x3e4c87(0x1f4)]['bind'](this)),this['on'](_0x3e4c87(0x2e6),this[_0x3e4c87(0x257)]['bind'](this)),this['on'](_0x3e4c87(0x2c8),this['onUnload'][_0x3e4c87(0x29e)](this)),this['on'](_0x3e4c87(0x21d),this['onMessage'][_0x3e4c87(0x29e)](this));}async[a0_0x39cc6c(0x1f4)](){const _0x12de19=a0_0x39cc6c;this[_0x12de19(0x2ba)][_0x12de19(0x226)](_0x12de19(0x262)+this['version']+_0x12de19(0x2c3));if(this[_0x12de19(0x2ac)][_0x12de19(0x25f)]!==undefined)this[_0x12de19(0x22e)][_0x12de19(0x283)]=this[_0x12de19(0x2ac)][_0x12de19(0x25f)];if(this[_0x12de19(0x2ac)]['moduleSecurity']!==undefined)this[_0x12de19(0x22e)][_0x12de19(0x237)]=this[_0x12de19(0x2ac)][_0x12de19(0x26d)];if(this['config'][_0x12de19(0x2c1)]!==undefined)this[_0x12de19(0x22e)][_0x12de19(0x2c0)]=this['config'][_0x12de19(0x2c1)];if(this[_0x12de19(0x2ac)][_0x12de19(0x23c)]!==undefined)this[_0x12de19(0x22e)][_0x12de19(0x253)]=this[_0x12de19(0x2ac)][_0x12de19(0x23c)];if(this['config'][_0x12de19(0x2e4)])this[_0x12de19(0x22e)]={...this['activeModules'],...this[_0x12de19(0x2ac)][_0x12de19(0x2e4)]};this[_0x12de19(0x2ba)][_0x12de19(0x226)](_0x12de19(0x2e0)+(Object['keys'](this[_0x12de19(0x22e)])[_0x12de19(0x201)](_0x196650=>this['activeModules'][_0x196650])['join'](',\x20')||_0x12de19(0x268))),this[_0x12de19(0x231)]();}async[a0_0x39cc6c(0x231)](){const _0x5e4337=a0_0x39cc6c;await setup[_0x5e4337(0x20d)](this);try{this[_0x5e4337(0x26c)]=await setup[_0x5e4337(0x2c6)](this[_0x5e4337(0x2ac)]['licenseKey']);}catch(_0x4cda9f){}if(!this[_0x5e4337(0x2ac)][_0x5e4337(0x1f8)]||this[_0x5e4337(0x2ac)]['inactivityThresholdHours']<0.1)this['config'][_0x5e4337(0x1f8)]=0xc;await setup[_0x5e4337(0x247)](this),await setup[_0x5e4337(0x2a0)](this);try{const _0x394295=await this[_0x5e4337(0x2d6)](_0x5e4337(0x216)),_0x48ada8=await this[_0x5e4337(0x2d6)](_0x5e4337(0x2d9));_0x394295&&_0x394295[_0x5e4337(0x2b0)]&&_0x48ada8&&_0x48ada8['val']&&(Date[_0x5e4337(0x206)]()-_0x394295['ts']<0x4*0xe10*0x3e8&&(this[_0x5e4337(0x2b4)]={'times':JSON[_0x5e4337(0x250)](_0x394295[_0x5e4337(0x2b0)]),'sources':JSON['parse'](_0x48ada8[_0x5e4337(0x2b0)])},this[_0x5e4337(0x2ba)][_0x5e4337(0x226)]('ðŸ§ \x20Memory:\x20Cache\x20hydrated.')));}catch(_0x1ccae3){}if(this[_0x5e4337(0x2ac)]['geminiApiKey'])try{this[_0x5e4337(0x2aa)]=new GoogleGenerativeAI(this[_0x5e4337(0x2ac)]['geminiApiKey']),this[_0x5e4337(0x224)]=this[_0x5e4337(0x2aa)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x5e4337(0x1ef)}});}catch(_0x9cee50){this[_0x5e4337(0x2ba)][_0x5e4337(0x2d4)](_0x5e4337(0x2e2)+_0x9cee50[_0x5e4337(0x21d)]);}await setup[_0x5e4337(0x267)](this),await this[_0x5e4337(0x1fa)](),await this[_0x5e4337(0x244)]('analysis.visualization.pulse',{'type':_0x5e4337(0x2cf),'common':{'name':_0x5e4337(0x20f),'type':_0x5e4337(0x28a),'role':_0x5e4337(0x24c),'read':!![],'write':![]},'native':{}}),await this[_0x5e4337(0x244)](_0x5e4337(0x2bc),{'type':_0x5e4337(0x2cf),'common':{'name':_0x5e4337(0x220),'type':'string','role':_0x5e4337(0x236),'read':!![],'write':![],'def':'{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}'},'native':{}}),await this[_0x5e4337(0x244)](_0x5e4337(0x2ab),{'type':_0x5e4337(0x2cf),'common':{'name':_0x5e4337(0x21f),'type':_0x5e4337(0x260),'role':'json','read':!![],'write':![],'def':_0x5e4337(0x2ca)},'native':{}}),await this[_0x5e4337(0x244)](_0x5e4337(0x1e3),{'type':'state','common':{'name':_0x5e4337(0x207),'type':_0x5e4337(0x260),'role':_0x5e4337(0x236),'read':!![],'write':![]},'native':{}}),await this[_0x5e4337(0x244)](_0x5e4337(0x255),{'type':'state','common':{'name':_0x5e4337(0x270),'type':'string','role':_0x5e4337(0x236),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x5e4337(0x216),{'type':_0x5e4337(0x2cf),'common':{'name':_0x5e4337(0x296),'type':_0x5e4337(0x260),'role':_0x5e4337(0x236),'read':!![],'write':![]},'native':{}}),await this[_0x5e4337(0x244)](_0x5e4337(0x1e5),{'type':_0x5e4337(0x2cf),'common':{'name':_0x5e4337(0x251),'type':_0x5e4337(0x260),'role':_0x5e4337(0x236),'read':!![],'write':!![],'def':_0x5e4337(0x261)},'native':{}}),await this[_0x5e4337(0x244)](_0x5e4337(0x23d),{'type':_0x5e4337(0x2cf),'common':{'name':'Reinforcement\x20Learning\x20Penalties','type':_0x5e4337(0x260),'role':'json','read':!![],'write':![],'def':'{}'},'native':{}}),await this['setObjectNotExistsAsync'](_0x5e4337(0x265),{'type':_0x5e4337(0x2cf),'common':{'name':_0x5e4337(0x28c),'type':'number','role':_0x5e4337(0x24c),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x5e4337(0x244)](_0x5e4337(0x2df),{'type':_0x5e4337(0x2cf),'common':{'name':_0x5e4337(0x2b7),'type':_0x5e4337(0x260),'role':_0x5e4337(0x1e2),'read':!![],'write':![]},'native':{}}),await this[_0x5e4337(0x244)]('analysis.energy.activeEnforcements',{'type':'state','common':{'name':_0x5e4337(0x1ed),'type':_0x5e4337(0x260),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x5e4337(0x244)](_0x5e4337(0x2cd),{'type':_0x5e4337(0x2cf),'common':{'name':_0x5e4337(0x20c),'type':_0x5e4337(0x260),'role':_0x5e4337(0x236),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x5e4337(0x244)](_0x5e4337(0x221),{'type':_0x5e4337(0x2cf),'common':{'name':_0x5e4337(0x214),'type':_0x5e4337(0x260),'role':'text','read':!![],'write':![]},'native':{}});try{const _0x51cc4f=await this['getStateAsync'](_0x5e4337(0x29f));if(_0x51cc4f&&_0x51cc4f['val'])this[_0x5e4337(0x297)]=JSON[_0x5e4337(0x250)](_0x51cc4f[_0x5e4337(0x2b0)]);}catch(_0x545037){this[_0x5e4337(0x297)]=[];}try{const _0x5b5c2a=await this['getStateAsync'](_0x5e4337(0x235));if(_0x5b5c2a&&_0x5b5c2a['val'])this['dailyDigests']=JSON[_0x5e4337(0x250)](_0x5b5c2a['val']);}catch(_0x5e368c){this['dailyDigests']=[];}const _0x3f6f59=this[_0x5e4337(0x2ce)][_0x5e4337(0x27f)]>=(this['config']['minDaysForBaseline']||0x7)?_0x5e4337(0x26e)+this['dailyDigests']['length']+_0x5e4337(0x269):'Lernphase\x20('+this['dailyDigests'][_0x5e4337(0x27f)]+'/'+(this[_0x5e4337(0x2ac)][_0x5e4337(0x2a5)]||0x7)+')';await this[_0x5e4337(0x25c)](_0x5e4337(0x1f1),{'val':_0x3f6f59,'ack':!![]}),this[_0x5e4337(0x298)](_0x5e4337(0x24a)),this[_0x5e4337(0x298)](_0x5e4337(0x2ec)),this['subscribeStates'](_0x5e4337(0x25b)),this[_0x5e4337(0x298)](_0x5e4337(0x21e)),this['subscribeStates'](_0x5e4337(0x1eb)),this['subscribeStates']('analysis.automation.autoApply'),this['subscribeStates'](_0x5e4337(0x1f5)),this[_0x5e4337(0x298)](_0x5e4337(0x2c4)),this['subscribeStates'](_0x5e4337(0x299)),this[_0x5e4337(0x298)](_0x5e4337(0x2b2)),this[_0x5e4337(0x298)](_0x5e4337(0x286)),this['subscribeStates']('analysis.energy.mpcActive'),this[_0x5e4337(0x298)](_0x5e4337(0x2d9)),this['subscribeStates'](_0x5e4337(0x216));this[_0x5e4337(0x2ac)][_0x5e4337(0x2eb)]&&this[_0x5e4337(0x2ac)][_0x5e4337(0x291)]&&this[_0x5e4337(0x22e)][_0x5e4337(0x237)]&&this[_0x5e4337(0x29c)](this[_0x5e4337(0x2ac)][_0x5e4337(0x291)]);const _0x36c063=this[_0x5e4337(0x2ac)][_0x5e4337(0x2e7)];if(_0x36c063)for(const _0x2aec06 of _0x36c063){await this['subscribeForeignStatesAsync'](_0x2aec06['id']);}const _0x323e59=this[_0x5e4337(0x2ac)][_0x5e4337(0x2c7)];if(_0x323e59)for(const _0x56c421 of _0x323e59){await this[_0x5e4337(0x2d3)](_0x56c421);}if(this[_0x5e4337(0x2ac)][_0x5e4337(0x229)]&&this[_0x5e4337(0x2ac)][_0x5e4337(0x2d5)])await this['subscribeForeignStatesAsync'](this[_0x5e4337(0x2ac)]['notifyTelegramInstance']+_0x5e4337(0x2cc));setTimeout(()=>this[_0x5e4337(0x205)](),0x1388);if(this[_0x5e4337(0x246)])clearInterval(this[_0x5e4337(0x246)]);const _0x3ccf45=this['config']['analysisInterval']||0xf;_0x3ccf45>0x0&&(this[_0x5e4337(0x246)]=setInterval(()=>{const _0x576d9a=_0x5e4337;this[_0x576d9a(0x272)]();if(this[_0x576d9a(0x22e)][_0x576d9a(0x2c0)])automation['monitorEnforcements'](this);},_0x3ccf45*0x3c*0x3e8));setTimeout(()=>{const _0x590f27=_0x5e4337;this[_0x590f27(0x22e)][_0x590f27(0x2c0)]&&(automation[_0x590f27(0x287)](this),automation[_0x590f27(0x230)](this));},0x2710);this[_0x5e4337(0x2ac)][_0x5e4337(0x256)]!==![]&&this[_0x5e4337(0x22e)]['security']&&(this['trackerHeartbeat']=setInterval(()=>{const _0x431f76=_0x5e4337;if(this[_0x431f76(0x26c)]){const _0x492d6d=Date['now'](),_0x3010bc=this[_0x431f76(0x280)]||_0x492d6d,_0x99a6a1=(_0x492d6d-_0x3010bc)/0x3e8;_0x99a6a1>0x2&&(this[_0x431f76(0x280)]=_0x492d6d,pythonBridge[_0x431f76(0x294)](this,'TRACK_EVENT',{'room':null,'dt':_0x99a6a1}));}},0xbb8));if(this['roomIntegratorTimer'])clearInterval(this[_0x5e4337(0x24f)]);this[_0x5e4337(0x21a)](),this[_0x5e4337(0x24f)]=setInterval(async()=>{const _0x2f675a=_0x5e4337;await this[_0x2f675a(0x21a)]();},0x3c*0x3e8);if(this[_0x5e4337(0x252)])clearInterval(this[_0x5e4337(0x252)]);this[_0x5e4337(0x252)]=setInterval(()=>{const _0x3806eb=_0x5e4337;this[_0x3806eb(0x26c)]&&this[_0x3806eb(0x22e)]['health']&&this['runPythonHealthCheck']();},0x4*0x3c*0x3c*0x3e8),schedulers[_0x5e4337(0x2da)](this,()=>aiAgent[_0x5e4337(0x26b)](this,pythonBridge)),schedulers[_0x5e4337(0x275)](this),schedulers[_0x5e4337(0x2f1)](this,()=>aiAgent[_0x5e4337(0x284)](this));if(this[_0x5e4337(0x22e)][_0x5e4337(0x283)])schedulers['setupBriefingScheduler'](this,()=>aiAgent[_0x5e4337(0x209)](this));const _0x2ab1a4=path[_0x5e4337(0x2c2)](__dirname,_0x5e4337(0x266),_0x5e4337(0x2be),_0x5e4337(0x241));pythonBridge[_0x5e4337(0x22b)](this,_0x2ab1a4),setTimeout(async()=>{const _0x604ba2=_0x5e4337;await topology[_0x604ba2(0x282)](this);try{const _0x449258=await this[_0x604ba2(0x2d6)](_0x604ba2(0x23e));if(_0x449258&&_0x449258[_0x604ba2(0x2b0)])pythonBridge[_0x604ba2(0x294)](this,_0x604ba2(0x2bb),JSON['parse'](_0x449258['val']));}catch(_0x2149b9){}this[_0x604ba2(0x22e)][_0x604ba2(0x283)]&&(this[_0x604ba2(0x264)](),this[_0x604ba2(0x2ad)](),this[_0x604ba2(0x1ff)]()),this[_0x604ba2(0x22e)]['energy']&&this[_0x604ba2(0x233)]();},0x1388);}[a0_0x39cc6c(0x2b3)](_0x3ebfc4){const _0x21d337=a0_0x39cc6c;if(this[_0x21d337(0x246)])clearInterval(this[_0x21d337(0x246)]);if(this[_0x21d337(0x2a6)])clearInterval(this[_0x21d337(0x2a6)]);if(this[_0x21d337(0x1f3)])clearInterval(this[_0x21d337(0x1f3)]);if(this[_0x21d337(0x252)])clearInterval(this[_0x21d337(0x252)]);if(this['roomIntegratorTimer'])clearInterval(this['roomIntegratorTimer']);if(this[_0x21d337(0x278)])this[_0x21d337(0x278)][_0x21d337(0x1e7)]();if(this[_0x21d337(0x1e8)])this[_0x21d337(0x1e8)][_0x21d337(0x1e7)]();if(this[_0x21d337(0x295)])this['briefingJob'][_0x21d337(0x1e7)]();recorder['abortExitTimer'](this),pythonBridge['stopService'](this),_0x3ebfc4();}async['integrateRoomTime'](){const _0x346cdd=a0_0x39cc6c;if(!this[_0x346cdd(0x2ef)])return;try{let _0x227257=null;try{const _0xe13b4a=await this[_0x346cdd(0x2d6)](_0x346cdd(0x210)),_0x26bff4=await this['getStateAsync'](_0x346cdd(0x249));_0xe13b4a&&_0xe13b4a['val']&&_0x26bff4&&_0x26bff4[_0x346cdd(0x2b0)]&&_0x26bff4['val']>0.3&&(_0xe13b4a['val']!==_0x346cdd(0x21b)&&_0xe13b4a['val']!==_0x346cdd(0x288)&&(_0x227257=_0xe13b4a[_0x346cdd(0x2b0)]));}catch(_0x14e7dc){}if(!_0x227257){const _0x1478bd=this['config'][_0x346cdd(0x2e7)]||[];for(const _0x291804 of _0x1478bd){if(_0x291804[_0x346cdd(0x234)]==='motion'&&_0x291804[_0x346cdd(0x2bf)])try{const _0x224bc7=await this['getForeignStateAsync'](_0x291804['id']);if(_0x224bc7&&(_0x224bc7[_0x346cdd(0x2b0)]===!![]||_0x224bc7[_0x346cdd(0x2b0)]==='on'||_0x224bc7['val']===0x1||_0x224bc7[_0x346cdd(0x2b0)]==='true')){_0x227257=_0x291804[_0x346cdd(0x2bf)];break;}}catch(_0x33c64c){}}}if(!_0x227257)return;const _0x2e831d=_0x346cdd(0x2bc),_0x2c8050=await this['getStateAsync'](_0x2e831d);let _0x2b1403={'today':{},'yesterday':{},'date':new Date()[_0x346cdd(0x29b)]()};if(_0x2c8050&&_0x2c8050[_0x346cdd(0x2b0)])try{_0x2b1403=JSON[_0x346cdd(0x250)](_0x2c8050[_0x346cdd(0x2b0)]);}catch(_0x43799d){}if(!_0x2b1403[_0x346cdd(0x290)])_0x2b1403[_0x346cdd(0x290)]={};if(!_0x2b1403[_0x346cdd(0x2db)])_0x2b1403[_0x346cdd(0x2db)]={};const _0x3726e2=new Date()[_0x346cdd(0x29b)]();_0x2b1403['date']!==_0x3726e2&&(this[_0x346cdd(0x2ba)][_0x346cdd(0x226)](_0x346cdd(0x2d2)),_0x2b1403[_0x346cdd(0x2db)]=_0x2b1403[_0x346cdd(0x290)]||{},_0x2b1403[_0x346cdd(0x290)]={},_0x2b1403[_0x346cdd(0x1e4)]=_0x3726e2);if(!_0x2b1403[_0x346cdd(0x290)][_0x227257])_0x2b1403[_0x346cdd(0x290)][_0x227257]=0x0;_0x2b1403[_0x346cdd(0x290)][_0x227257]++,await this['setStateAsync'](_0x2e831d,{'val':JSON['stringify'](_0x2b1403),'ack':!![]});}catch(_0x282138){this[_0x346cdd(0x2ba)]['warn'](_0x346cdd(0x238)+_0x282138[_0x346cdd(0x21d)]);}}[a0_0x39cc6c(0x264)](){const _0x5e3d7f=a0_0x39cc6c;if(!this[_0x5e3d7f(0x26c)])return;this[_0x5e3d7f(0x26f)](_0x5e3d7f(0x235),(_0x4f5a95,_0x4f34b8)=>{const _0x51bd0c=_0x5e3d7f;if(_0x4f34b8&&_0x4f34b8['val'])try{const _0xe723bf=JSON[_0x51bd0c(0x250)](_0x4f34b8['val']);_0xe723bf[_0x51bd0c(0x27f)]>0x0&&pythonBridge[_0x51bd0c(0x294)](this,_0x51bd0c(0x2a7),{'digest':_0xe723bf[0x0]});}catch(_0x2849ab){}});}async[a0_0x39cc6c(0x257)](_0x316e01,_0x22ed2d){const _0x347628=a0_0x39cc6c;if(!_0x22ed2d||this['dependencyInstallInProgress'])return;if(_0x316e01[_0x347628(0x243)]('telegram')&&_0x316e01[_0x347628(0x26a)](_0x347628(0x2bd))&&_0x22ed2d['val'])return;if(this[_0x347628(0x2ac)]['infrasoundEnabled']&&_0x316e01===this[_0x347628(0x2ac)][_0x347628(0x291)]&&this[_0x347628(0x22e)][_0x347628(0x237)]){this[_0x347628(0x25d)](_0x22ed2d[_0x347628(0x2b0)]);return;}if(_0x22ed2d[_0x347628(0x202)]&&_0x316e01[_0x347628(0x26a)](_0x347628(0x22c)))return;if(_0x316e01===this[_0x347628(0x273)]+'.system.mode'){if(_0x22ed2d[_0x347628(0x2b0)]&&Object['values'](setup['SYSTEM_MODES'])['includes'](_0x22ed2d[_0x347628(0x2b0)])){this[_0x347628(0x28e)]=_0x22ed2d[_0x347628(0x2b0)];if(_0x22ed2d[_0x347628(0x2b0)]===setup['SYSTEM_MODES'][_0x347628(0x2b9)])await recorder[_0x347628(0x24b)](this,![]);else await recorder[_0x347628(0x24b)](this,!![]);if(this[_0x347628(0x26c)]){let _0xb0938a=![],_0x4839b2=0x0,_0x1703be=_0x347628(0x2a3);if(this[_0x347628(0x28e)]===_0x347628(0x2d7))_0xb0938a=!![],_0x4839b2=0x168,_0x1703be=_0x347628(0x274);else this[_0x347628(0x28e)]===_0x347628(0x2de)&&(_0xb0938a=!![],_0x4839b2=0x5a0,_0x1703be=_0x347628(0x215));pythonBridge[_0x347628(0x294)](this,_0x347628(0x2e9),{'active':_0xb0938a,'duration':_0x4839b2,'label':_0x1703be}),await this[_0x347628(0x25c)]('analysis.security.learningStatus',{'val':JSON[_0x347628(0x240)]({'active':_0xb0938a,'label':_0x1703be,'timestamp':Date[_0x347628(0x206)]()}),'ack':!![]});}}if(!_0x22ed2d[_0x347628(0x202)])this[_0x347628(0x27b)](_0x316e01,{'val':this['currentSystemMode'],'ack':!![]});return;}if(_0x316e01[_0x347628(0x26a)](_0x347628(0x2d9))&&_0x22ed2d['ack'])this[_0x347628(0x285)](_0x22ed2d[_0x347628(0x2b0)]);if(_0x316e01[_0x347628(0x26a)](_0x347628(0x216))&&_0x22ed2d[_0x347628(0x202)]&&this[_0x347628(0x22e)][_0x347628(0x2c0)])automation[_0x347628(0x287)](this);if(!_0x22ed2d['ack']){if(_0x316e01[_0x347628(0x243)]('analysis.trigger')&&_0x22ed2d[_0x347628(0x2b0)]){this[_0x347628(0x27b)](_0x316e01,{'val':![],'ack':!![]}),aiAgent[_0x347628(0x218)](this);return;}if(_0x316e01[_0x347628(0x243)]('triggerDailyDigest')&&_0x22ed2d['val']){this[_0x347628(0x27b)](_0x316e01,{'val':![],'ack':!![]});if(this[_0x347628(0x26c)])aiAgent['createDailyDigest'](this,pythonBridge);return;}if(_0x316e01[_0x347628(0x243)](_0x347628(0x27d))&&_0x22ed2d[_0x347628(0x2b0)]){this[_0x347628(0x27b)](_0x316e01,{'val':![],'ack':!![]}),aiAgent[_0x347628(0x209)](this);return;}if(_0x316e01[_0x347628(0x243)](_0x347628(0x2e3))&&_0x22ed2d['val']){this[_0x347628(0x27b)](_0x316e01,{'val':![],'ack':!![]}),aiAgent[_0x347628(0x212)](this);return;}if(_0x316e01['includes'](_0x347628(0x1f5))&&_0x22ed2d[_0x347628(0x2b0)]){this[_0x347628(0x27b)](_0x316e01,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0xc59af9=await this['getStateAsync'](_0x347628(0x1fe));if(_0xc59af9&&_0xc59af9[_0x347628(0x2b0)]){const _0x1df61a=JSON[_0x347628(0x250)](_0xc59af9[_0x347628(0x2b0)]);this[_0x347628(0x25c)](_0x347628(0x232),{'val':_0x347628(0x27a),'ack':!![]}),pythonBridge[_0x347628(0x294)](this,_0x347628(0x1ea),{'sequences':_0x1df61a});}}catch(_0x4cff8b){}return;}if(_0x316e01['includes'](_0x347628(0x2c4))&&_0x22ed2d[_0x347628(0x2b0)]){this[_0x347628(0x27b)](_0x316e01,{'val':![],'ack':!![]});if(this[_0x347628(0x26c)])try{const _0xed188f=await this[_0x347628(0x2d6)](_0x347628(0x235));if(_0xed188f&&_0xed188f[_0x347628(0x2b0)])pythonBridge[_0x347628(0x294)](this,_0x347628(0x208),{'digests':JSON[_0x347628(0x250)](_0xed188f[_0x347628(0x2b0)])});}catch(_0x504ede){}return;}if(_0x316e01[_0x347628(0x243)]('analysis.training.triggerEnergy')&&_0x22ed2d[_0x347628(0x2b0)]){this[_0x347628(0x27b)](_0x316e01,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x5e9c88=await this[_0x347628(0x2d6)](_0x347628(0x1f0));if(_0x5e9c88&&_0x5e9c88[_0x347628(0x2b0)])pythonBridge[_0x347628(0x294)](this,_0x347628(0x29a),{'points':JSON[_0x347628(0x250)](_0x5e9c88[_0x347628(0x2b0)])});}catch(_0x5c3f6a){}return;}if(_0x316e01['includes'](_0x347628(0x2b2))&&_0x22ed2d['val']){this[_0x347628(0x27b)](_0x316e01,{'val':![],'ack':!![]});if(this[_0x347628(0x26c)])try{const _0x43ac47=await this['getStateAsync']('LTM.rawEventLog');if(_0x43ac47&&_0x43ac47[_0x347628(0x2b0)]){const _0x4ef556={};if(this[_0x347628(0x2ac)][_0x347628(0x2e7)])this[_0x347628(0x2ac)][_0x347628(0x2e7)][_0x347628(0x225)](_0x1fa2a3=>{if(_0x1fa2a3['id']&&_0x1fa2a3['type'])_0x4ef556[_0x1fa2a3['id']]=_0x1fa2a3['type'];});pythonBridge['send'](this,_0x347628(0x2ae),{'events':JSON['parse'](_0x43ac47[_0x347628(0x2b0)]),'deviceMap':_0x4ef556});}}catch(_0x4c458d){}return;}if(_0x316e01['includes'](_0x347628(0x286))&&_0x22ed2d[_0x347628(0x2b0)]){this['setState'](_0x316e01,{'val':![],'ack':!![]}),topology[_0x347628(0x282)](this);if(this[_0x347628(0x26c)])try{const _0x20d02d=await this['getStateAsync'](_0x347628(0x1fe));if(_0x20d02d&&_0x20d02d[_0x347628(0x2b0)])pythonBridge[_0x347628(0x294)](this,_0x347628(0x213),{'sequences':JSON[_0x347628(0x250)](_0x20d02d[_0x347628(0x2b0)])});}catch(_0x1bb6e4){}return;}}const _0x2a9230=(this[_0x347628(0x2ac)][_0x347628(0x2e7)]||[])[_0x347628(0x271)](_0x270f9a=>_0x270f9a['id']===_0x316e01);if(_0x2a9230){const _0x327eae=await recorder[_0x347628(0x2d1)](this,_0x316e01,_0x22ed2d,_0x2a9230);_0x327eae&&this['setState'](_0x347628(0x2f0),{'val':Date[_0x347628(0x206)](),'ack':!![]});_0x327eae&&_0x327eae[_0x347628(0x234)]===_0x347628(0x2a9)&&_0x327eae[_0x347628(0x2bf)]&&this[_0x347628(0x26c)]&&deadMan['updateLocation'](this,_0x327eae[_0x347628(0x2bf)]);_0x22ed2d[_0x347628(0x2b0)]&&(_0x22ed2d[_0x347628(0x2b0)]===!![]||_0x22ed2d[_0x347628(0x2b0)]===0x1||String(_0x22ed2d[_0x347628(0x2b0)])[_0x347628(0x1f7)]()===_0x347628(0x2cb))&&(_0x2a9230['type']&&(_0x2a9230[_0x347628(0x234)][_0x347628(0x243)](_0x347628(0x1ec))||_0x2a9230[_0x347628(0x234)][_0x347628(0x243)]('door'))&&this[_0x347628(0x20e)](_0x2a9230));if(_0x2a9230[_0x347628(0x234)]==='temperature'||_0x2a9230[_0x347628(0x234)]===_0x347628(0x24e)){if(this['activeModules']['energy'])automation[_0x347628(0x279)](this);}}}async[a0_0x39cc6c(0x285)](_0x48dee9){const _0x5d0902=a0_0x39cc6c;if(!this[_0x5d0902(0x2b4)]||Date[_0x5d0902(0x206)]()-this[_0x5d0902(0x293)]>0x493e0)return;try{const _0x1aa67b=JSON[_0x5d0902(0x250)](_0x48dee9),_0x473504=this['memoryCache'][_0x5d0902(0x259)];let _0x32017a=![];for(const _0xf3c808 in _0x473504){if(_0x473504[_0xf3c808][_0x5d0902(0x243)]('AI')&&_0x1aa67b[_0xf3c808]&&!_0x1aa67b[_0xf3c808]['includes']('AI')){_0x32017a=!![];break;}}_0x32017a&&(await this['setStateAsync'](_0x5d0902(0x216),{'val':JSON[_0x5d0902(0x240)](this['memoryCache'][_0x5d0902(0x22a)]),'ack':!![]}),await this[_0x5d0902(0x25c)](_0x5d0902(0x2d9),{'val':JSON[_0x5d0902(0x240)](this[_0x5d0902(0x2b4)]['sources']),'ack':!![]}));}catch(_0x16cae5){}}async[a0_0x39cc6c(0x25a)](_0x4ec917){const _0x26014f=a0_0x39cc6c;if(typeof _0x4ec917===_0x26014f(0x200)&&_0x4ec917[_0x26014f(0x21d)]){if(_0x4ec917['command']===_0x26014f(0x2d0))try{const _0x4c508b=await automation[_0x26014f(0x258)](this);this['sendTo'](_0x4ec917['from'],_0x4ec917[_0x26014f(0x28d)],{'success':!![],'results':_0x4c508b},_0x4ec917[_0x26014f(0x289)]);}catch(_0x17cbc2){this[_0x26014f(0x2ed)](_0x4ec917[_0x26014f(0x1e6)],_0x4ec917[_0x26014f(0x28d)],{'success':![],'error':_0x17cbc2[_0x26014f(0x21d)]},_0x4ec917[_0x26014f(0x289)]);}else{if(_0x4ec917[_0x26014f(0x28d)]==='getOverviewData'){const _0xb9b34f=this['dailyDigests'][_0x26014f(0x27f)];let _0x353bff=new Array(0x18)['fill'](0x0);try{const _0x4ee04c=await this[_0x26014f(0x2d6)](_0x26014f(0x2ab));if(_0x4ee04c&&_0x4ee04c[_0x26014f(0x2b0)])_0x353bff=JSON[_0x26014f(0x250)](_0x4ee04c[_0x26014f(0x2b0)]);else{const _0x5dcf9e=new Date()[_0x26014f(0x204)](0x0,0x0,0x0,0x0);this[_0x26014f(0x2e8)]&&this[_0x26014f(0x2e8)][_0x26014f(0x225)](_0x535420=>{const _0x19227f=_0x26014f;if(_0x535420[_0x19227f(0x2af)]>=_0x5dcf9e){const _0x1ac8d3=new Date(_0x535420[_0x19227f(0x2af)])['getHours']();if(_0x1ac8d3>=0x0&&_0x1ac8d3<0x18)_0x353bff[_0x1ac8d3]++;}});}}catch(_0x4fb9eb){}let _0x31819e={'today':{},'yesterday':{}};try{const _0x25638f=await this[_0x26014f(0x2d6)](_0x26014f(0x2bc));if(_0x25638f&&_0x25638f[_0x26014f(0x2b0)])_0x31819e=JSON[_0x26014f(0x250)](_0x25638f[_0x26014f(0x2b0)]);}catch(_0x39160d){}let _0x4ba202=![],_0xfee7db='',_0x273736='',_0x3c2ba3='';try{const _0x53ef6a=await this[_0x26014f(0x2d6)](_0x26014f(0x2dc));if(_0x53ef6a&&_0x53ef6a[_0x26014f(0x2b0)]){_0x4ba202=!![];const _0x31868e=await this[_0x26014f(0x2d6)]('analysis.automation.description');_0xfee7db=_0x31868e?_0x31868e[_0x26014f(0x2b0)]:'';const _0x21a0c5=await this[_0x26014f(0x2d6)](_0x26014f(0x24d));_0x273736=_0x21a0c5?_0x21a0c5['val']:'';const _0x58bfa2=await this[_0x26014f(0x2d6)]('analysis.automation.targetValue');_0x3c2ba3=_0x58bfa2?_0x58bfa2['val']:'';}}catch(_0x196fc7){}const _0x3cd04c=await this['checkSolarCondition'](),_0xaf8b8c=(this[_0x26014f(0x2ac)]['devices']||[])[_0x26014f(0x23b)](_0x225559=>_0x225559['isSolar']),_0x277eb9=_0x3cd04c&&_0xaf8b8c;let _0x544740='';try{const _0x1124ef=await this[_0x26014f(0x2d6)](_0x26014f(0x2d8));if(_0x1124ef&&_0x1124ef[_0x26014f(0x2b0)])_0x544740=_0x1124ef[_0x26014f(0x2b0)];}catch(_0x371656){}this[_0x26014f(0x2ed)](_0x4ec917['from'],_0x4ec917[_0x26014f(0x28d)],{'success':!![],'eventHistory':this[_0x26014f(0x2e8)][_0x26014f(0x2b1)](0x0,0x64),'stats':{'digestCount':_0xb9b34f,'isPresent':this[_0x26014f(0x2ef)],'hourlyActivity':_0x353bff,'solarActive':_0x277eb9,'presenceWho':_0x544740,'roomStats':_0x31819e,'modules':this[_0x26014f(0x22e)]},'automation':{'detected':_0x4ba202,'description':_0xfee7db,'targetId':_0x273736,'targetValue':_0x3c2ba3}},_0x4ec917['callback']);}else{if(_0x4ec917[_0x26014f(0x28d)]==='simulateEnergyMPC'){}else{if(_0x4ec917[_0x26014f(0x28d)]==='testApiKey'){}else{if(_0x4ec917[_0x26014f(0x28d)]===_0x26014f(0x1fd))try{const _0x180737=await scanner[_0x26014f(0x217)](this,_0x4ec917[_0x26014f(0x21d)]||{});this[_0x26014f(0x2ed)](_0x4ec917[_0x26014f(0x1e6)],_0x4ec917[_0x26014f(0x28d)],{'success':!![],'devices':_0x180737},_0x4ec917[_0x26014f(0x289)]);}catch(_0x49bf26){}else{if(_0x4ec917[_0x26014f(0x28d)]===_0x26014f(0x222)){const _0x53e344=await this['getForeignObjectsAsync'](_0x26014f(0x21c),_0x26014f(0x20b)),_0x36aa84=[];if(_0x53e344)for(const _0x2d1066 in _0x53e344){_0x36aa84['push']({'id':_0x2d1066,'name':_0x53e344[_0x2d1066][_0x26014f(0x2c9)]['name']});}const _0x188e4e=await this[_0x26014f(0x27c)]('enum.rooms.*',_0x26014f(0x20b)),_0x1b0b33=[];if(_0x188e4e)for(const _0x2763db in _0x188e4e){_0x1b0b33[_0x26014f(0x2a1)](_0x188e4e[_0x2763db][_0x26014f(0x2c9)][_0x26014f(0x2a4)]||_0x2763db[_0x26014f(0x2ea)]('.')[_0x26014f(0x254)]());}this[_0x26014f(0x2ed)](_0x4ec917['from'],_0x4ec917['command'],{'success':!![],'enums':_0x36aa84,'rooms':_0x1b0b33},_0x4ec917[_0x26014f(0x289)]);}}}}}}}}async['loadSystemMode'](){const _0x19f704=a0_0x39cc6c;try{const _0x130c7d=await this[_0x19f704(0x2d6)](setup[_0x19f704(0x1ee)]);if(_0x130c7d&&_0x130c7d[_0x19f704(0x2b0)])this[_0x19f704(0x28e)]=_0x130c7d[_0x19f704(0x2b0)];}catch(_0xe48f03){this['currentSystemMode']=setup[_0x19f704(0x2a2)]['NORMAL'];}}async[a0_0x39cc6c(0x205)](){return![];}async['runAutopilot'](){const _0x35a707=a0_0x39cc6c;await aiAgent['runGeminiAnalysis'](this);this[_0x35a707(0x22e)]['health']&&(this[_0x35a707(0x1ff)](),this[_0x35a707(0x2ad)]());if(this['activeModules'][_0x35a707(0x2c0)])this[_0x35a707(0x233)]();}async[a0_0x39cc6c(0x29d)](){return![];}[a0_0x39cc6c(0x2ad)](){if(!this['isProVersion'])return;}async[a0_0x39cc6c(0x233)](){}['updateHealthVector'](){}async[a0_0x39cc6c(0x25d)](_0x3862f6){}async[a0_0x39cc6c(0x2e5)](_0x59599c,_0x414857){}async[a0_0x39cc6c(0x20e)](_0xcf92c4){}async[a0_0x39cc6c(0x27e)](_0x407ba0){}[a0_0x39cc6c(0x23f)](_0x11ca59){}}if(require[a0_0x39cc6c(0x25e)]!==module)module['exports']=_0x233dfc=>new CogniLiving(_0x233dfc);else new CogniLiving();