const a0_0x599c98=a0_0x4788;(function(_0x31ab29,_0x239344){const _0x47ab8b=a0_0x4788,_0x1b54bc=_0x31ab29();while(!![]){try{const _0xa085c8=-parseInt(_0x47ab8b(0x255))/0x1+-parseInt(_0x47ab8b(0x1c9))/0x2+-parseInt(_0x47ab8b(0x241))/0x3+-parseInt(_0x47ab8b(0x26f))/0x4+-parseInt(_0x47ab8b(0x1fc))/0x5*(parseInt(_0x47ab8b(0x1b0))/0x6)+parseInt(_0x47ab8b(0x1d4))/0x7+parseInt(_0x47ab8b(0x262))/0x8;if(_0xa085c8===_0x239344)break;else _0x1b54bc['push'](_0x1b54bc['shift']());}catch(_0x10cc19){_0x1b54bc['push'](_0x1b54bc['shift']());}}}(a0_0x3e9f,0xef676));const a0_0x216350=(function(){let _0x19e263=!![];return function(_0x1da4e0,_0x50baa8){const _0x10c285=_0x19e263?function(){const _0x5347c7=a0_0x4788;if(_0x50baa8){const _0x514d68=_0x50baa8[_0x5347c7(0x238)](_0x1da4e0,arguments);return _0x50baa8=null,_0x514d68;}}:function(){};return _0x19e263=![],_0x10c285;};}()),a0_0x23231f=a0_0x216350(this,function(){const _0x3bb0d1=a0_0x4788;return a0_0x23231f[_0x3bb0d1(0x1b4)]()[_0x3bb0d1(0x243)](_0x3bb0d1(0x1e8))['toString']()['constructor'](a0_0x23231f)[_0x3bb0d1(0x243)](_0x3bb0d1(0x1e8));});function a0_0x3e9f(){const _0x31ddd1=['@iobroker/adapter-core','530694YiKbXf','./lib/setup','triggerBriefing','./lib/installer','toString','version','Verbunden','briefingJob','updateHealthVector','initSystemConfig','text','object','analysis.training.status','location','systemConfig','Daten\x20nicht\x20verfÃ¼gbar','getStateAsync','Kein\x20Wetter-Adapter','callback','send','enum','analysisHistory','command','namespace','getCalendarNames','3072704ioqCxh','getMinutes','analysis.training.triggerSecurity','split','response','PYTHON_EXE','LTM.trainingData.sequences','system.adapter.','SYSTEM_MODES','setStateAsync','telegram','7071778TUBodw','analysis.training.triggerTopology','Gesendet','getOverviewData','common','updated','LTM.trainingData.thermodynamics','./lib/scanner','SYSTEM_DP_MODE','minDaysForBaseline','runPythonHealthCheck','Verbindung\x20erfolgreich!','./lib/recorder','Test','sendTo','onMessage','Standard','getOutsideTemperatureNumeric','Gemini\x20Init\x20Error:\x20','loadSystemMode','(((.+)+)+)+$','weatherInstance','onStateChange','VACATION','analysis.training.triggerEnergy','TRAIN_COMFORT','checkAndInstall','genAI','analysisInterval','setHours','getGenerativeModel','onUnload','testApiKey','config','notifyTelegramInstance','toLowerCase','driftAnalysisTimer','analysis.training.triggerHealth','main','endsWith','25BWlwoI','analysis.trigger','SET_TOPOLOGY','analysis.triggerBriefing','updateTopologyMatrix','./lib/ai_agent','ANALYZE_TREND','Kein\x20API\x20Key\x20Ã¼bergeben','NORMAL','onReady','getTime','Instanz\x20nicht\x20gefunden','./lib/dead_man','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','message','./lib/topology','presenceDevices','cogni-living\x20adapter\x20starting\x20(v','licenseKey','add','executeAutomationAction','ltmJob','processSensorEvent','checkLicense','name','setPresence','instance','LTM.triggerDailyDigest','find','communicate.request','initZombies','apiKey','setState','eventHistory','Adapter','checkWifiPresence','keys','floor','testNotification','subscribeForeignStatesAsync','log','analysis.automation.triggerAction','values','subscribeStates','TRAIN_ENERGY','currentSystemMode','dailyDigests','Activity-Level','devices','TRAIN_SECURITY','generateContent','getForeignObjectAsync','motion','getState','rawEventLog','startService','_calName','type','initHistory','isArray','apply','\x20Tage)','triggerGaitAnalysis','getForeignStateAsync','LTM.rawEventLog','timestamp','cancel','val','Notification\x20Test\x20Failed:\x20','4909500ZARYFm','geminiApiKey','search','Lernphase\x20(','ANALYZE_GAIT','TRAIN_HEALTH','setupDriftAnalysisScheduler','modeResetJob','runAutopilot','stateChange','automation.triggerAction','getLtmData','getHours','info','setupLtmScheduler','analysisTimer','sendMorningBriefing','exitTimer','push','dependencyInstallInProgress','1659546hBqmkp','isPresent','analysis.automation.autoApply','runGeminiAnalysis','./lib/scheduler','from','isProVersion','pop','includes','calendarInstance','inactivityThresholdHours','forEach','bind','51446632lsLQWQ','startSystem','sort','setupModeResetScheduler','parse','runBaselineDriftAnalysis','analysis.training.triggerComfort','isGracePeriodActive','PREDICT_ENERGY','ack','abortExitTimer','getForeignObjectsAsync','models/gemini-flash-latest','4743368ZUtTSh','triggerEnergyPrediction','createAllObjects','calendarName','stringify','cogni-living','ready','application/json','createDailyDigest','error','updateTopology','unload','system.presenceWho','notifyTelegramEnabled','enum.rooms.*','./lib/python_bridge','.system.mode','geminiModel','analysis.topology.structure','length'];a0_0x3e9f=function(){return _0x31ddd1;};return a0_0x3e9f();}function a0_0x4788(_0x31a1f6,_0x173ca9){const _0x36e71a=a0_0x3e9f();return a0_0x4788=function(_0x23231f,_0x216350){_0x23231f=_0x23231f-0x1a2;let _0x3e9fad=_0x36e71a[_0x23231f];return _0x3e9fad;},a0_0x4788(_0x31a1f6,_0x173ca9);}a0_0x23231f();'use strict';const utils=require(a0_0x599c98(0x1af)),{GoogleGenerativeAI}=require('@google/generative-ai'),installer=require(a0_0x599c98(0x1b3)),scanner=require(a0_0x599c98(0x1db)),schedulers=require(a0_0x599c98(0x259)),topology=require(a0_0x599c98(0x20b)),setup=require(a0_0x599c98(0x1b1)),recorder=require(a0_0x599c98(0x1e0)),pythonBridge=require(a0_0x599c98(0x1aa)),aiAgent=require(a0_0x599c98(0x201)),deadMan=require(a0_0x599c98(0x208)),GEMINI_MODEL=a0_0x599c98(0x26e),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x599c98(0x21e)]{constructor(_0x287fc4){const _0x28923e=a0_0x599c98;super({..._0x287fc4,'name':_0x28923e(0x274)}),this['eventHistory']=[],this[_0x28923e(0x1c5)]=[],this[_0x28923e(0x232)]=[],this[_0x28923e(0x22a)]=[],this['sensorLastValues']={},this[_0x28923e(0x1be)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x28923e(0x256)]=!![],this['exitTimer']=null,this['exitGraceTimer']=null,this[_0x28923e(0x269)]=![],this['genAI']=null,this[_0x28923e(0x1ac)]=null,this[_0x28923e(0x229)]=setup[_0x28923e(0x1d1)][_0x28923e(0x204)],this[_0x28923e(0x25b)]=![],this['lastAlertState']=![],this['analysisTimer']=null,this[_0x28923e(0x211)]=null,this[_0x28923e(0x248)]=null,this[_0x28923e(0x1f8)]=null,this[_0x28923e(0x1b7)]=null,this[_0x28923e(0x254)]=![],this['on'](_0x28923e(0x275),this[_0x28923e(0x205)][_0x28923e(0x261)](this)),this['on'](_0x28923e(0x24a),this[_0x28923e(0x1ea)][_0x28923e(0x261)](this)),this['on'](_0x28923e(0x1a6),this[_0x28923e(0x1f3)]['bind'](this)),this['on']('message',this['onMessage'][_0x28923e(0x261)](this));}async[a0_0x599c98(0x205)](){const _0x45ff2=a0_0x599c98;this[_0x45ff2(0x224)][_0x45ff2(0x24e)](_0x45ff2(0x20d)+this[_0x45ff2(0x1b5)]+')\x20-\x20Phase\x20C\x20(Hardened)');if(!installer[_0x45ff2(0x1ee)](this,()=>this[_0x45ff2(0x263)]()))return;}async[a0_0x599c98(0x263)](){const _0x476237=a0_0x599c98;await setup[_0x476237(0x21a)](this);try{this[_0x476237(0x25b)]=await setup[_0x476237(0x213)](this[_0x476237(0x1f5)][_0x476237(0x20e)]);}catch(_0x42d42d){}if(!this[_0x476237(0x1f5)][_0x476237(0x25f)]||this[_0x476237(0x1f5)][_0x476237(0x25f)]<0.1)this[_0x476237(0x1f5)][_0x476237(0x25f)]=0xc;await setup[_0x476237(0x236)](this),await setup[_0x476237(0x1b9)](this);if(this['config'][_0x476237(0x242)])try{this[_0x476237(0x1ef)]=new GoogleGenerativeAI(this['config'][_0x476237(0x242)]),this[_0x476237(0x1ac)]=this[_0x476237(0x1ef)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x476237(0x1a2)}}),this[_0x476237(0x224)][_0x476237(0x24e)]('Gemini\x20AI\x20initialized.');}catch(_0x235c53){this[_0x476237(0x224)][_0x476237(0x1a4)](_0x476237(0x1e6)+_0x235c53['message']);}await setup[_0x476237(0x271)](this),await this[_0x476237(0x1e7)]();try{const _0x6c2157=await this[_0x476237(0x1c0)](_0x476237(0x23c));if(_0x6c2157&&_0x6c2157[_0x476237(0x23f)])this['rawEventLog']=JSON['parse'](_0x6c2157[_0x476237(0x23f)]);}catch(_0x248f75){this[_0x476237(0x232)]=[];}try{const _0x3cb485=await this[_0x476237(0x1c0)]('LTM.dailyDigests');if(_0x3cb485&&_0x3cb485[_0x476237(0x23f)])this[_0x476237(0x22a)]=JSON['parse'](_0x3cb485[_0x476237(0x23f)]);}catch(_0x263908){this['dailyDigests']=[];}const _0x5e7117=this['dailyDigests']['length']>=(this[_0x476237(0x1f5)][_0x476237(0x1dd)]||0x7)?'Aktiv\x20('+this[_0x476237(0x22a)][_0x476237(0x1ae)]+_0x476237(0x239):_0x476237(0x244)+this['dailyDigests'][_0x476237(0x1ae)]+'/'+(this[_0x476237(0x1f5)][_0x476237(0x1dd)]||0x7)+')';await this[_0x476237(0x1d2)]('LTM.baselineStatus',{'val':_0x5e7117,'ack':!![]}),this[_0x476237(0x227)](_0x476237(0x1fd)),this['subscribeStates'](_0x476237(0x217)),this[_0x476237(0x227)]('system.mode'),this[_0x476237(0x227)](_0x476237(0x1ff)),this[_0x476237(0x227)](_0x476237(0x225)),this[_0x476237(0x227)](_0x476237(0x257)),this[_0x476237(0x227)](_0x476237(0x1cb)),this['subscribeStates'](_0x476237(0x1f9)),this[_0x476237(0x227)](_0x476237(0x1ec)),this[_0x476237(0x227)](_0x476237(0x268)),this[_0x476237(0x227)]('analysis.training.triggerTopology');const _0xe81abc=this[_0x476237(0x1f5)][_0x476237(0x22c)];if(_0xe81abc)for(const _0xac5f17 of _0xe81abc){await this[_0x476237(0x223)](_0xac5f17['id']);}const _0x394175=this[_0x476237(0x1f5)]['presenceDevices'];if(_0x394175)for(const _0x225174 of _0x394175){await this['subscribeForeignStatesAsync'](_0x225174);}if(this[_0x476237(0x1f5)][_0x476237(0x1a8)]&&this[_0x476237(0x1f5)][_0x476237(0x1f6)])await this[_0x476237(0x223)](this[_0x476237(0x1f5)][_0x476237(0x1f6)]+'.communicate.request');setTimeout(()=>this[_0x476237(0x21f)](),0x1388);if(this['analysisTimer'])clearInterval(this[_0x476237(0x250)]);const _0xf853d0=this[_0x476237(0x1f5)][_0x476237(0x1f0)]||0xf;_0xf853d0>0x0&&(this[_0x476237(0x250)]=setInterval(()=>{const _0xcbd483=_0x476237;this[_0xcbd483(0x249)]();},_0xf853d0*0x3c*0x3e8)),schedulers[_0x476237(0x24f)](this,()=>aiAgent[_0x476237(0x1a3)](this,pythonBridge)),schedulers[_0x476237(0x265)](this),schedulers[_0x476237(0x247)](this,()=>aiAgent[_0x476237(0x267)](this)),schedulers['setupBriefingScheduler'](this,()=>aiAgent[_0x476237(0x251)](this)),pythonBridge[_0x476237(0x233)](this,installer[_0x476237(0x1ce)]),setTimeout(async()=>{const _0x5e5b7a=_0x476237;await topology['updateTopology'](this);try{const _0x1cd31b=await this[_0x5e5b7a(0x1c0)]('analysis.topology.structure');if(_0x1cd31b&&_0x1cd31b[_0x5e5b7a(0x23f)])pythonBridge['send'](this,_0x5e5b7a(0x1fe),JSON['parse'](_0x1cd31b['val']));}catch(_0x5c0647){}this['runPythonHealthCheck'](),this[_0x5e5b7a(0x23a)](),this['triggerEnergyPrediction'](),this[_0x5e5b7a(0x1b8)]();},0x1388);}['onUnload'](_0x2bd2e6){const _0x4bbc02=a0_0x599c98;if(this[_0x4bbc02(0x250)])clearInterval(this[_0x4bbc02(0x250)]);if(this['driftAnalysisTimer'])clearInterval(this[_0x4bbc02(0x1f8)]);if(this[_0x4bbc02(0x211)])this[_0x4bbc02(0x211)][_0x4bbc02(0x23e)]();if(this['modeResetJob'])this[_0x4bbc02(0x248)][_0x4bbc02(0x23e)]();if(this[_0x4bbc02(0x1b7)])this[_0x4bbc02(0x1b7)]['cancel']();recorder[_0x4bbc02(0x26c)](this),pythonBridge['stopService'](this),_0x2bd2e6();}async[a0_0x599c98(0x1ea)](_0x1c0549,_0x21b5e2){const _0x1ce004=a0_0x599c98;if(!_0x21b5e2||this[_0x1ce004(0x254)])return;if(_0x1c0549[_0x1ce004(0x25d)](_0x1ce004(0x1d3))&&_0x1c0549[_0x1ce004(0x1fb)](_0x1ce004(0x219))&&_0x21b5e2[_0x1ce004(0x23f)])return;if(_0x1c0549===this[_0x1ce004(0x1c7)]+_0x1ce004(0x1ab)){if(_0x21b5e2[_0x1ce004(0x23f)]&&Object[_0x1ce004(0x226)](setup[_0x1ce004(0x1d1)])['includes'](_0x21b5e2[_0x1ce004(0x23f)])){this[_0x1ce004(0x229)]=_0x21b5e2[_0x1ce004(0x23f)];if(_0x21b5e2[_0x1ce004(0x23f)]===setup[_0x1ce004(0x1d1)][_0x1ce004(0x1eb)])await recorder[_0x1ce004(0x215)](this,![]);else await recorder[_0x1ce004(0x215)](this,!![]);}if(!_0x21b5e2[_0x1ce004(0x26b)])this['setState'](_0x1c0549,{'val':this[_0x1ce004(0x229)],'ack':!![]});return;}if(!_0x21b5e2['ack']){_0x1c0549[_0x1ce004(0x25d)](_0x1ce004(0x1fd))&&_0x21b5e2[_0x1ce004(0x23f)]&&(this[_0x1ce004(0x21c)](_0x1c0549,{'val':![],'ack':!![]}),aiAgent[_0x1ce004(0x258)](this));if(_0x1c0549['includes']('triggerDailyDigest')&&_0x21b5e2[_0x1ce004(0x23f)]){this[_0x1ce004(0x21c)](_0x1c0549,{'val':![],'ack':!![]});if(this[_0x1ce004(0x25b)])aiAgent['createDailyDigest'](this,pythonBridge);}_0x1c0549[_0x1ce004(0x25d)](_0x1ce004(0x1b2))&&_0x21b5e2[_0x1ce004(0x23f)]&&(this[_0x1ce004(0x21c)](_0x1c0549,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this));_0x1c0549[_0x1ce004(0x25d)](_0x1ce004(0x24b))&&_0x21b5e2[_0x1ce004(0x23f)]&&(this[_0x1ce004(0x21c)](_0x1c0549,{'val':![],'ack':!![]}),aiAgent[_0x1ce004(0x210)](this));if(_0x1c0549['includes'](_0x1ce004(0x1cb))&&_0x21b5e2['val']){this[_0x1ce004(0x21c)](_0x1c0549,{'val':![],'ack':!![]});if(this[_0x1ce004(0x25b)])try{const _0xfeaee=await this[_0x1ce004(0x1c0)](_0x1ce004(0x1cf));if(_0xfeaee&&_0xfeaee[_0x1ce004(0x23f)]){const _0x32105e=JSON['parse'](_0xfeaee['val']);this['setStateAsync'](_0x1ce004(0x1bc),{'val':'Sec-Training\x20started...','ack':!![]}),pythonBridge['send'](this,_0x1ce004(0x22d),{'sequences':_0x32105e});}}catch(_0x3aea40){}}if(_0x1c0549[_0x1ce004(0x25d)]('analysis.training.triggerHealth')&&_0x21b5e2[_0x1ce004(0x23f)]){this[_0x1ce004(0x21c)](_0x1c0549,{'val':![],'ack':!![]});if(this[_0x1ce004(0x25b)])try{const _0x435df1=await this['getStateAsync']('LTM.dailyDigests');if(_0x435df1&&_0x435df1[_0x1ce004(0x23f)])pythonBridge['send'](this,_0x1ce004(0x246),{'digests':JSON[_0x1ce004(0x266)](_0x435df1[_0x1ce004(0x23f)])});}catch(_0x3d4561){}}if(_0x1c0549[_0x1ce004(0x25d)](_0x1ce004(0x1ec))&&_0x21b5e2[_0x1ce004(0x23f)]){this[_0x1ce004(0x21c)](_0x1c0549,{'val':![],'ack':!![]});if(this[_0x1ce004(0x25b)])try{const _0x7e6303=await this[_0x1ce004(0x1c0)](_0x1ce004(0x1da));if(_0x7e6303&&_0x7e6303[_0x1ce004(0x23f)])pythonBridge[_0x1ce004(0x1c3)](this,_0x1ce004(0x228),{'points':JSON[_0x1ce004(0x266)](_0x7e6303[_0x1ce004(0x23f)])});}catch(_0x272830){}}if(_0x1c0549[_0x1ce004(0x25d)](_0x1ce004(0x268))&&_0x21b5e2[_0x1ce004(0x23f)]){this[_0x1ce004(0x21c)](_0x1c0549,{'val':![],'ack':!![]});if(this[_0x1ce004(0x25b)])try{const _0x212974=await this[_0x1ce004(0x1c0)]('LTM.rawEventLog');if(_0x212974&&_0x212974[_0x1ce004(0x23f)])pythonBridge[_0x1ce004(0x1c3)](this,_0x1ce004(0x1ed),{'events':JSON[_0x1ce004(0x266)](_0x212974['val'])});}catch(_0x3f0616){}}_0x1c0549['includes'](_0x1ce004(0x1d5))&&_0x21b5e2[_0x1ce004(0x23f)]&&(this[_0x1ce004(0x21c)](_0x1c0549,{'val':![],'ack':!![]}),topology[_0x1ce004(0x1a5)](this));return;}if(this[_0x1ce004(0x1f5)][_0x1ce004(0x20c)]&&this['config']['presenceDevices']['includes'](_0x1c0549)){await this[_0x1ce004(0x21f)]();return;}const _0xa3f76a=(this[_0x1ce004(0x1f5)][_0x1ce004(0x22c)]||[])[_0x1ce004(0x218)](_0x1c0ff2=>_0x1c0ff2['id']===_0x1c0549);if(_0xa3f76a){const _0xcb73f1=await recorder[_0x1ce004(0x212)](this,_0x1c0549,_0x21b5e2,_0xa3f76a);_0xcb73f1&&_0xcb73f1[_0x1ce004(0x235)]===_0x1ce004(0x230)&&_0xcb73f1[_0x1ce004(0x1bd)]&&this[_0x1ce004(0x25b)]&&deadMan['updateLocation'](this,_0xcb73f1[_0x1ce004(0x1bd)]);}}async[a0_0x599c98(0x1e3)](_0x7470cf){const _0x300224=a0_0x599c98;if(typeof _0x7470cf===_0x300224(0x1bb)&&_0x7470cf['message']){if(_0x7470cf[_0x300224(0x1c6)]===_0x300224(0x1f4))try{const _0x3e913b=_0x7470cf['message'][_0x300224(0x21b)];if(!_0x3e913b)throw new Error(_0x300224(0x203));const _0x29d573=new GoogleGenerativeAI(_0x3e913b),_0x1b2edb=_0x29d573[_0x300224(0x1f2)]({'model':GEMINI_MODEL}),_0x2848f7=await _0x1b2edb[_0x300224(0x22e)](_0x300224(0x1e1)),_0x2bc0d4=await _0x2848f7[_0x300224(0x1cd)];if(_0x2bc0d4[_0x300224(0x1ba)]())this[_0x300224(0x1e2)](_0x7470cf[_0x300224(0x25a)],_0x7470cf[_0x300224(0x1c6)],{'success':!![],'message':_0x300224(0x1df)},_0x7470cf[_0x300224(0x1c2)]);else throw new Error('Keine\x20Antwort\x20von\x20Gemini');}catch(_0x5efd07){this[_0x300224(0x1e2)](_0x7470cf[_0x300224(0x25a)],_0x7470cf['command'],{'success':![],'message':_0x5efd07[_0x300224(0x20a)]},_0x7470cf['callback']);}else{if(_0x7470cf[_0x300224(0x1c6)]==='scanDevices')try{const _0x197a8d=await scanner['scanForDevices'](this,_0x7470cf[_0x300224(0x20a)]||{});this[_0x300224(0x1e2)](_0x7470cf['from'],_0x7470cf[_0x300224(0x1c6)],{'success':!![],'devices':_0x197a8d},_0x7470cf['callback']);}catch(_0x318260){this[_0x300224(0x1e2)](_0x7470cf[_0x300224(0x25a)],_0x7470cf['command'],{'success':![],'error':_0x318260[_0x300224(0x20a)]},_0x7470cf[_0x300224(0x1c2)]);}else{if(_0x7470cf[_0x300224(0x1c6)]===_0x300224(0x200))try{const {matrix:_0x3469e4}=_0x7470cf[_0x300224(0x20a)],_0x13c6cb=await this[_0x300224(0x1c0)](_0x300224(0x1ad));if(_0x13c6cb&&_0x13c6cb['val']){const _0x20d063=JSON[_0x300224(0x266)](_0x13c6cb[_0x300224(0x23f)]);_0x20d063['matrix']=_0x3469e4,_0x20d063[_0x300224(0x1d9)]=Date['now'](),await this[_0x300224(0x1d2)](_0x300224(0x1ad),{'val':JSON[_0x300224(0x273)](_0x20d063),'ack':!![]}),pythonBridge[_0x300224(0x1c3)](this,_0x300224(0x1fe),_0x20d063);}this[_0x300224(0x1e2)](_0x7470cf[_0x300224(0x25a)],_0x7470cf[_0x300224(0x1c6)],{'success':!![]},_0x7470cf[_0x300224(0x1c2)]);}catch(_0x5877f5){this[_0x300224(0x224)]['error'](_0x5877f5);}else{if(_0x7470cf[_0x300224(0x1c6)]===_0x300224(0x24c))this[_0x300224(0x1e2)](_0x7470cf[_0x300224(0x25a)],_0x7470cf[_0x300224(0x1c6)],{'success':!![],'dailyDigests':this[_0x300224(0x22a)]||[],'analysisHistory':this[_0x300224(0x1c5)]||[]},_0x7470cf[_0x300224(0x1c2)]);else{if(_0x7470cf[_0x300224(0x1c6)]===_0x300224(0x1d7)){const _0x4bb88d=this[_0x300224(0x22a)][_0x300224(0x1ae)],_0x43813f=new Array(0x18)['fill'](0x0),_0x28adc2=new Date()[_0x300224(0x1f1)](0x0,0x0,0x0,0x0);this[_0x300224(0x21d)]&&this[_0x300224(0x21d)][_0x300224(0x260)](_0x4557ae=>{const _0xec8071=_0x300224;if(_0x4557ae[_0xec8071(0x23d)]>=_0x28adc2){const _0x226b5f=new Date(_0x4557ae[_0xec8071(0x23d)])[_0xec8071(0x24d)]();if(_0x226b5f>=0x0&&_0x226b5f<0x18)_0x43813f[_0x226b5f]++;}}),this[_0x300224(0x1e2)](_0x7470cf[_0x300224(0x25a)],_0x7470cf[_0x300224(0x1c6)],{'success':!![],'eventHistory':this[_0x300224(0x21d)]['slice'](0x0,0xf),'stats':{'digestCount':_0x4bb88d,'isPresent':this[_0x300224(0x256)],'hourlyActivity':_0x43813f},'automation':{'detected':![]}},_0x7470cf['callback']);}else{if(_0x7470cf['command']==='getEnums'){const _0x41c274=await this['getForeignObjectsAsync']('enum.functions.*',_0x300224(0x1c4)),_0x208db2=[];if(_0x41c274)for(const _0x3f4f46 in _0x41c274){const _0x5cb04b=_0x41c274[_0x3f4f46],_0x141ae4=(_0x5cb04b[_0x300224(0x1d8)]&&typeof _0x5cb04b[_0x300224(0x1d8)]['name']===_0x300224(0x1bb)?_0x5cb04b['common'][_0x300224(0x214)]['de']:_0x5cb04b['common']['name'])||_0x5cb04b['common']['name'];_0x208db2[_0x300224(0x253)]({'id':_0x3f4f46,'name':_0x141ae4});}const _0x3921e3=await this[_0x300224(0x26d)](_0x300224(0x1a9),_0x300224(0x1c4)),_0x10e92b=[];if(_0x3921e3)for(const _0x473f6a in _0x3921e3){const _0x58bbe5=_0x3921e3[_0x473f6a],_0x35c96f=(_0x58bbe5[_0x300224(0x1d8)]&&typeof _0x58bbe5[_0x300224(0x1d8)]['name']==='object'?_0x58bbe5[_0x300224(0x1d8)][_0x300224(0x214)]['de']:_0x58bbe5[_0x300224(0x1d8)][_0x300224(0x214)])||_0x473f6a[_0x300224(0x1cc)]('.')[_0x300224(0x25c)]();_0x10e92b[_0x300224(0x253)](_0x35c96f);}this[_0x300224(0x1e2)](_0x7470cf[_0x300224(0x25a)],_0x7470cf[_0x300224(0x1c6)],{'success':!![],'enums':_0x208db2,'rooms':_0x10e92b},_0x7470cf[_0x300224(0x1c2)]);}else{if(_0x7470cf['command']==='testContext')try{let _0x18ee0c=_0x300224(0x1c1),_0x1c4450='Kein\x20Kalender-Adapter';if(this[_0x300224(0x1f5)][_0x300224(0x1e9)]){const _0x25be93=await recorder[_0x300224(0x1e5)](this);_0x18ee0c=_0x25be93!==null?_0x25be93+'Â°C':_0x300224(0x1bf);}if(this[_0x300224(0x1f5)][_0x300224(0x25e)]){const _0x20a6f9=await this[_0x300224(0x22f)](_0x300224(0x1d0)+this[_0x300224(0x1f5)][_0x300224(0x25e)]);_0x1c4450=_0x20a6f9?_0x300224(0x1b6):_0x300224(0x207);}this['sendTo'](_0x7470cf[_0x300224(0x25a)],_0x7470cf[_0x300224(0x1c6)],{'success':!![],'weather':_0x18ee0c,'calendar':_0x1c4450},_0x7470cf['callback']);}catch(_0x5b8243){this[_0x300224(0x1e2)](_0x7470cf[_0x300224(0x25a)],_0x7470cf[_0x300224(0x1c6)],{'success':![],'error':_0x5b8243[_0x300224(0x20a)]},_0x7470cf[_0x300224(0x1c2)]);}else{if(_0x7470cf['command']===_0x300224(0x1c8))try{const _0x44ec4a=_0x7470cf['message'][_0x300224(0x216)],_0x43ddfa=await this[_0x300224(0x23b)](_0x44ec4a+'.data.table');let _0x9503d4=[];if(_0x43ddfa&&_0x43ddfa[_0x300224(0x23f)]){const _0x393e7c=JSON[_0x300224(0x266)](_0x43ddfa[_0x300224(0x23f)]),_0x341834=new Set();Array[_0x300224(0x237)](_0x393e7c)&&_0x393e7c['forEach'](_0x1fa890=>{const _0x3818ff=_0x300224;if(_0x1fa890[_0x3818ff(0x234)])_0x341834[_0x3818ff(0x20f)](_0x1fa890[_0x3818ff(0x234)]);else{if(_0x1fa890[_0x3818ff(0x272)])_0x341834[_0x3818ff(0x20f)](_0x1fa890[_0x3818ff(0x272)]);}}),_0x9503d4=Array[_0x300224(0x25a)](_0x341834)[_0x300224(0x264)]();}if(_0x9503d4[_0x300224(0x1ae)]===0x0)_0x9503d4=[_0x300224(0x1e4)];this[_0x300224(0x1e2)](_0x7470cf[_0x300224(0x25a)],_0x7470cf[_0x300224(0x1c6)],{'success':!![],'names':_0x9503d4},_0x7470cf[_0x300224(0x1c2)]);}catch(_0x5cef86){this[_0x300224(0x1e2)](_0x7470cf[_0x300224(0x25a)],_0x7470cf[_0x300224(0x1c6)],{'success':![],'error':_0x5cef86[_0x300224(0x20a)]},_0x7470cf[_0x300224(0x1c2)]);}else{if(_0x7470cf[_0x300224(0x1c6)]===_0x300224(0x222))try{await setup['sendNotification'](this,'ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.',![],![]),this[_0x300224(0x1e2)](_0x7470cf[_0x300224(0x25a)],_0x7470cf[_0x300224(0x1c6)],{'success':!![],'message':_0x300224(0x1d6)},_0x7470cf[_0x300224(0x1c2)]);}catch(_0x3fb562){this[_0x300224(0x224)][_0x300224(0x1a4)](_0x300224(0x240)+_0x3fb562[_0x300224(0x20a)]),this[_0x300224(0x1e2)](_0x7470cf[_0x300224(0x25a)],_0x7470cf['command'],{'success':![],'message':'Fehler:\x20'+_0x3fb562['message']},_0x7470cf[_0x300224(0x1c2)]);}}}}}}}}}}}async['loadSystemMode'](){const _0x2a1d1a=a0_0x599c98;try{const _0x5d916c=await this['getStateAsync'](setup[_0x2a1d1a(0x1dc)]);_0x5d916c&&_0x5d916c[_0x2a1d1a(0x23f)]&&Object['values'](setup[_0x2a1d1a(0x1d1)])['includes'](_0x5d916c[_0x2a1d1a(0x23f)])?this['currentSystemMode']=_0x5d916c[_0x2a1d1a(0x23f)]:(this[_0x2a1d1a(0x229)]=setup[_0x2a1d1a(0x1d1)][_0x2a1d1a(0x204)],await this['setStateAsync'](setup['SYSTEM_DP_MODE'],{'val':setup[_0x2a1d1a(0x1d1)]['NORMAL'],'ack':!![]}));}catch(_0x244e82){this[_0x2a1d1a(0x229)]=setup[_0x2a1d1a(0x1d1)]['NORMAL'];}}async[a0_0x599c98(0x21f)](){const _0x5e46c7=a0_0x599c98;try{const _0x278fa5=this['config'][_0x5e46c7(0x20c)]||[];let _0x5d60e1=![];const _0x212dd5=[];for(const _0x23422e of _0x278fa5){try{const _0x2df0d8=await this[_0x5e46c7(0x23b)](_0x23422e);_0x2df0d8&&(_0x2df0d8['val']===!![]||_0x2df0d8[_0x5e46c7(0x23f)]==='online'||_0x2df0d8[_0x5e46c7(0x23f)]===0x1)&&(_0x5d60e1=!![],_0x212dd5[_0x5e46c7(0x253)](_0x23422e));}catch(_0x99a3c){}}return await this[_0x5e46c7(0x1d2)](_0x5e46c7(0x1a7),{'val':_0x212dd5['join'](',\x20'),'ack':!![]}),_0x5d60e1&&(this[_0x5e46c7(0x252)]&&(this[_0x5e46c7(0x224)]['info']('WiFi\x20Presence\x20detected.'),recorder[_0x5e46c7(0x26c)](this)),!this['isPresent']&&this[_0x5e46c7(0x229)]===setup[_0x5e46c7(0x1d1)]['NORMAL']&&await recorder[_0x5e46c7(0x215)](this,!![])),_0x5d60e1;}catch(_0x428bb8){return![];}}async[a0_0x599c98(0x249)](){const _0x1548a6=a0_0x599c98;this['log']['debug'](_0x1548a6(0x209)),await aiAgent['runGeminiAnalysis'](this),this[_0x1548a6(0x1b8)](),this[_0x1548a6(0x23a)](),this['triggerEnergyPrediction']();}['triggerGaitAnalysis'](){const _0x1561f8=a0_0x599c98;if(!this[_0x1561f8(0x25b)])return;try{this[_0x1561f8(0x231)]('LTM.trainingData.sequences',(_0x4a24d7,_0xb4ceeb)=>{const _0x228a80=_0x1561f8;_0xb4ceeb&&_0xb4ceeb[_0x228a80(0x23f)]&&pythonBridge['send'](this,_0x228a80(0x245),{'sequences':JSON[_0x228a80(0x266)](_0xb4ceeb['val'])});});}catch(_0x4959ce){}}async[a0_0x599c98(0x270)](){const _0x27a6bb=a0_0x599c98;if(!this[_0x27a6bb(0x25b)])return;try{const _0x3d6593=await recorder[_0x27a6bb(0x1e5)](this);if(_0x3d6593===null)return;const _0x27b2d1={},_0x10bd79=this['config'][_0x27a6bb(0x22c)]||[];for(const _0x378ff1 of _0x10bd79){if(_0x378ff1['type']==='temperature'&&_0x378ff1[_0x27a6bb(0x1bd)]){const _0x39da57=this['sensorLastValues'][_0x378ff1['id']];if(_0x39da57!==undefined)_0x27b2d1[_0x378ff1[_0x27a6bb(0x1bd)]]=_0x39da57;}}Object[_0x27a6bb(0x220)](_0x27b2d1)[_0x27a6bb(0x1ae)]>0x0&&pythonBridge[_0x27a6bb(0x1c3)](this,_0x27a6bb(0x26a),{'current_temps':_0x27b2d1,'t_out':_0x3d6593});}catch(_0x1909dd){}}['updateHealthVector'](){const _0x55f816=a0_0x599c98;if(!this[_0x55f816(0x232)]||this['rawEventLog']['length']===0x0)return;const _0x256a63=new Array(0x60)['fill'](0x0),_0x3fb7a8=new Date()[_0x55f816(0x1f1)](0x0,0x0,0x0,0x0);this[_0x55f816(0x232)]['forEach'](_0x1e37f5=>{const _0x4c5d31=_0x55f816,_0x5def9e=new Date(_0x1e37f5[_0x4c5d31(0x23d)]);if(_0x5def9e[_0x4c5d31(0x206)]()>=_0x3fb7a8){const _0x1e5b31=_0x5def9e[_0x4c5d31(0x24d)](),_0x55bf82=_0x5def9e[_0x4c5d31(0x1ca)](),_0x2f2cec=_0x1e5b31*0x4+Math[_0x4c5d31(0x221)](_0x55bf82/0xf);if(_0x2f2cec>=0x0&&_0x2f2cec<0x60)_0x256a63[_0x2f2cec]++;}}),this['setStateAsync']('analysis.health.todayVector',{'val':JSON[_0x55f816(0x273)](_0x256a63),'ack':!![]});}[a0_0x599c98(0x1de)](){const _0x35fb55=a0_0x599c98;if(!this[_0x35fb55(0x22a)]||this[_0x35fb55(0x22a)][_0x35fb55(0x1ae)]<0x2)return;const _0x5aa8a7=this['dailyDigests']['map'](_0x21d911=>{const _0x48e900=_0x35fb55,_0x305a68=(_0x21d911['activityLevel']||'')[_0x48e900(0x1f7)]();return ACTIVITY_LEVEL_MAP[_0x305a68]||0x32;});pythonBridge[_0x35fb55(0x1c3)](this,_0x35fb55(0x202),{'values':_0x5aa8a7,'tag':_0x35fb55(0x22b)});}}if(require[a0_0x599c98(0x1fa)]!==module)module['exports']=_0x3842f5=>new CogniLiving(_0x3842f5);else new CogniLiving();