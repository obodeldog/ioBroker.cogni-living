function a0_0x6078(){const _0x2d1937=['onReady','setHours','exitGraceTimer','currentSystemMode','ðŸ§ \x20Triggering\x20Security\x20Training...','object','setupDriftAnalysisScheduler','@google/generative-ai','./lib/scheduler','endsWith','10cPGivV','ANALYZE_GAIT','sendTo','createAllObjects','notifyTelegramInstance','telegram','location','genAI','geminiApiKey','runPythonHealthCheck','790640DcSKFj','analysis.training.triggerEnergy','sendMorningBriefing','analysis.trigger','exitTimer','application/json','getEnums','log','abortExitTimer','ltmJob','subscribeForeignStatesAsync','toLowerCase','getOverviewData','7255PFbsmQ','main','TRAIN_ENERGY','lastAlertState','stringify','getGenerativeModel','info','timestamp','executeAutomationAction','isPresent','temperature','2248295PwCSPO','LTM.rawEventLog','onUnload','enum.rooms.*','analysis.topology.structure','LTM.dailyDigests','presenceDevices','runBaselineDriftAnalysis','isGracePeriodActive','keys','constructor','testApiKey','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','./lib/recorder','online','Lernphase\x20(','LTM.baselineStatus','Sec-Training\x20started...','from','forEach','Gemini\x20Init\x20Error:\x20','stopService','stateChange','startService','./lib/installer','values','setStateAsync','inactivityThresholdHours','Aktiv\x20(','geminiModel','licenseKey','callback','analysisTimer','driftAnalysisTimer','name','SET_TOPOLOGY','updateTopologyMatrix','getHours','activityLevel','getState','Activity-Level','1038awXYOp','cogni-living','setPresence','subscribeStates','command','checkAndInstall','getOutsideTemperatureNumeric','unload','triggerEnergyPrediction','scanDevices','find','toString','error','4328335DzKKcj','search','Adapter','getStateAsync','send','parse','analysisInterval','debug','message','scanForDevices','.communicate.request','matrix','devices','runGeminiAnalysis','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','analysis.training.triggerHealth','namespace','onStateChange','config','LTM.trainingData.sequences','./lib/ai_agent','cancel','updateHealthVector','map','LTM.trainingData.thermodynamics','analysis.training.triggerSecurity','automation.triggerAction','isProVersion','fill','getForeignStateAsync','ANALYZE_TREND','join','triggerBriefing','analysis.training.status','push','setupLtmScheduler','WiFi\x20Presence\x20detected.','analysis.training.triggerComfort','val','analysisHistory','common','ack','minDaysForBaseline','initHistory','now','processSensorEvent','\x20Tage)','18uDtNUT','rawEventLog','communicate.request','PYTHON_EXE','787221GsVTHy','initZombies','createDailyDigest','length','4044ulDJgd','initSystemConfig','16DIjDhE','triggerGaitAnalysis','90493AwRIIE',')\x20-\x20Phase\x20C\x20(Stabilization)','VACATION','runAutopilot','SYSTEM_MODES','ready','briefingJob','TRAIN_SECURITY','notifyTelegramEnabled','dependencyInstallInProgress','(((.+)+)+)+$','bind','split','system.presenceWho','checkWifiPresence','includes','eventHistory','TRAIN_HEALTH','NORMAL','Topology\x20Update\x20Error:\x20','84VVYxZu','setupModeResetScheduler','SYSTEM_DP_MODE','dailyDigests','updateTopology','194agKGQi','setState','getTime','models/gemini-flash-latest','analysis.triggerBriefing','enum.functions.*','ðŸ•¸ï¸\x20Topology\x20Graph\x20manually\x20updated\x20by\x20user.','analysis.automation.triggerAction','checkLicense','updated','modeResetJob','enum','sensorLastValues'];a0_0x6078=function(){return _0x2d1937;};return a0_0x6078();}const a0_0x4742eb=a0_0x12bb;function a0_0x12bb(_0x464c80,_0x589b43){const _0x48baa4=a0_0x6078();return a0_0x12bb=function(_0x1719a5,_0x79b101){_0x1719a5=_0x1719a5-0x1e3;let _0x60787=_0x48baa4[_0x1719a5];return _0x60787;},a0_0x12bb(_0x464c80,_0x589b43);}(function(_0x2fa946,_0x17c36e){const _0xc1597c=a0_0x12bb,_0x3f8ebe=_0x2fa946();while(!![]){try{const _0x1b9f6e=-parseInt(_0xc1597c(0x223))/0x1*(-parseInt(_0xc1597c(0x1f5))/0x2)+-parseInt(_0xc1597c(0x257))/0x3*(-parseInt(_0xc1597c(0x29b))/0x4)+-parseInt(_0xc1597c(0x216))/0x5*(-parseInt(_0xc1597c(0x293))/0x6)+-parseInt(_0xc1597c(0x22e))/0x7*(parseInt(_0xc1597c(0x29d))/0x8)+-parseInt(_0xc1597c(0x297))/0x9*(parseInt(_0xc1597c(0x20c))/0xa)+-parseInt(_0xc1597c(0x264))/0xb+parseInt(_0xc1597c(0x1f0))/0xc*(-parseInt(_0xc1597c(0x29f))/0xd);if(_0x1b9f6e===_0x17c36e)break;else _0x3f8ebe['push'](_0x3f8ebe['shift']());}catch(_0x5363a6){_0x3f8ebe['push'](_0x3f8ebe['shift']());}}}(a0_0x6078,0x56e22));const a0_0x79b101=(function(){let _0x6ba642=!![];return function(_0x4bd4e0,_0x8c5922){const _0x51a74f=_0x6ba642?function(){if(_0x8c5922){const _0xad10b1=_0x8c5922['apply'](_0x4bd4e0,arguments);return _0x8c5922=null,_0xad10b1;}}:function(){};return _0x6ba642=![],_0x51a74f;};}()),a0_0x1719a5=a0_0x79b101(this,function(){const _0x43b6d4=a0_0x12bb;return a0_0x1719a5[_0x43b6d4(0x262)]()[_0x43b6d4(0x265)](_0x43b6d4(0x1e6))[_0x43b6d4(0x262)]()[_0x43b6d4(0x238)](a0_0x1719a5)[_0x43b6d4(0x265)]('(((.+)+)+)+$');});a0_0x1719a5();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x4742eb(0x209)),installer=require(a0_0x4742eb(0x246)),scanner=require('./lib/scanner'),schedulers=require(a0_0x4742eb(0x20a)),topology=require('./lib/topology'),setup=require('./lib/setup'),recorder=require(a0_0x4742eb(0x23b)),pythonBridge=require('./lib/python_bridge'),aiAgent=require(a0_0x4742eb(0x278)),GEMINI_MODEL=a0_0x4742eb(0x1f8),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x4742eb(0x266)]{constructor(_0x5d70b7){const _0x52a524=a0_0x4742eb;super({..._0x5d70b7,'name':_0x52a524(0x258)}),this[_0x52a524(0x1ec)]=[],this['analysisHistory']=[],this[_0x52a524(0x294)]=[],this['dailyDigests']=[],this[_0x52a524(0x201)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x52a524(0x21a)]=null,this[_0x52a524(0x204)]=null,this[_0x52a524(0x236)]=![],this[_0x52a524(0x213)]=null,this[_0x52a524(0x24b)]=null,this[_0x52a524(0x205)]=setup[_0x52a524(0x2a3)][_0x52a524(0x1ee)],this[_0x52a524(0x27f)]=![],this[_0x52a524(0x226)]=![],this['analysisTimer']=null,this[_0x52a524(0x21f)]=null,this[_0x52a524(0x1ff)]=null,this[_0x52a524(0x24f)]=null,this[_0x52a524(0x2a5)]=null,this[_0x52a524(0x1e5)]=![],this['on'](_0x52a524(0x2a4),this[_0x52a524(0x202)]['bind'](this)),this['on'](_0x52a524(0x244),this['onStateChange'][_0x52a524(0x1e7)](this)),this['on'](_0x52a524(0x25e),this['onUnload'][_0x52a524(0x1e7)](this)),this['on']('message',this['onMessage']['bind'](this));}async['onReady'](){const _0x2875dc=a0_0x4742eb;this[_0x2875dc(0x21d)][_0x2875dc(0x229)]('cogni-living\x20adapter\x20starting\x20(v'+this['version']+_0x2875dc(0x2a0));if(!installer[_0x2875dc(0x25c)](this,()=>this['startSystem']()))return;}async['startSystem'](){const _0x284adf=a0_0x4742eb;await setup[_0x284adf(0x298)](this);try{this[_0x284adf(0x27f)]=await setup[_0x284adf(0x1fd)](this['config'][_0x284adf(0x24c)]);}catch(_0x506fa0){}if(!this['config'][_0x284adf(0x249)]||this[_0x284adf(0x276)]['inactivityThresholdHours']<0.1)this[_0x284adf(0x276)][_0x284adf(0x249)]=0xc;await setup[_0x284adf(0x28f)](this),await setup[_0x284adf(0x29c)](this);if(this[_0x284adf(0x276)][_0x284adf(0x214)])try{this['genAI']=new GoogleGenerativeAI(this['config']['geminiApiKey']),this[_0x284adf(0x24b)]=this[_0x284adf(0x213)][_0x284adf(0x228)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x284adf(0x21b)}}),this[_0x284adf(0x21d)][_0x284adf(0x229)]('Gemini\x20AI\x20initialized.');}catch(_0x2a873f){this[_0x284adf(0x21d)][_0x284adf(0x263)](_0x284adf(0x242)+_0x2a873f[_0x284adf(0x26c)]);}await setup[_0x284adf(0x20f)](this),await this['loadSystemMode']();try{const _0x2e8e13=await this['getStateAsync'](_0x284adf(0x22f));if(_0x2e8e13&&_0x2e8e13[_0x284adf(0x28a)])this['rawEventLog']=JSON[_0x284adf(0x269)](_0x2e8e13[_0x284adf(0x28a)]);}catch(_0x17ce4f){this['rawEventLog']=[];}try{const _0x428ea7=await this[_0x284adf(0x267)](_0x284adf(0x233));if(_0x428ea7&&_0x428ea7['val'])this['dailyDigests']=JSON[_0x284adf(0x269)](_0x428ea7['val']);}catch(_0x2546d1){this[_0x284adf(0x1f3)]=[];}const _0x1f12ec=this['dailyDigests'][_0x284adf(0x29a)]>=(this[_0x284adf(0x276)]['minDaysForBaseline']||0x7)?_0x284adf(0x24a)+this[_0x284adf(0x1f3)]['length']+_0x284adf(0x292):_0x284adf(0x23d)+this[_0x284adf(0x1f3)][_0x284adf(0x29a)]+'/'+(this[_0x284adf(0x276)][_0x284adf(0x28e)]||0x7)+')';await this[_0x284adf(0x248)](_0x284adf(0x23e),{'val':_0x1f12ec,'ack':!![]}),this[_0x284adf(0x25a)](_0x284adf(0x219)),this[_0x284adf(0x25a)]('LTM.triggerDailyDigest'),this[_0x284adf(0x25a)]('system.mode'),this[_0x284adf(0x25a)](_0x284adf(0x1f9)),this[_0x284adf(0x25a)](_0x284adf(0x1fc)),this[_0x284adf(0x25a)]('analysis.automation.autoApply'),this['subscribeStates'](_0x284adf(0x27d)),this[_0x284adf(0x25a)](_0x284adf(0x273)),this['subscribeStates'](_0x284adf(0x217)),this[_0x284adf(0x25a)](_0x284adf(0x289)),this[_0x284adf(0x25a)]('analysis.training.triggerTopology');const _0x30c55e=this[_0x284adf(0x276)][_0x284adf(0x270)];if(_0x30c55e)for(const _0x2a2705 of _0x30c55e){await this[_0x284adf(0x220)](_0x2a2705['id']);}const _0x363311=this['config']['presenceDevices'];if(_0x363311)for(const _0x21b2b9 of _0x363311){await this[_0x284adf(0x220)](_0x21b2b9);}if(this[_0x284adf(0x276)][_0x284adf(0x1e4)]&&this[_0x284adf(0x276)][_0x284adf(0x210)])await this[_0x284adf(0x220)](this[_0x284adf(0x276)][_0x284adf(0x210)]+_0x284adf(0x26e));setTimeout(()=>this['checkWifiPresence'](),0x1388);if(this[_0x284adf(0x24e)])clearInterval(this[_0x284adf(0x24e)]);const _0x317102=this['config'][_0x284adf(0x26a)]||0xf;_0x317102>0x0&&(this[_0x284adf(0x24e)]=setInterval(()=>{const _0x319906=_0x284adf;this[_0x319906(0x2a2)]();},_0x317102*0x3c*0x3e8)),schedulers[_0x284adf(0x287)](this,()=>aiAgent[_0x284adf(0x299)](this,pythonBridge)),schedulers[_0x284adf(0x1f1)](this),schedulers[_0x284adf(0x208)](this,()=>aiAgent[_0x284adf(0x235)](this)),schedulers['setupBriefingScheduler'](this,()=>aiAgent['sendMorningBriefing'](this)),pythonBridge[_0x284adf(0x245)](this,installer[_0x284adf(0x296)]),setTimeout(async()=>{const _0x118110=_0x284adf;await topology[_0x118110(0x1f4)](this);try{const _0x4c56ff=await this['getStateAsync'](_0x118110(0x232));if(_0x4c56ff&&_0x4c56ff[_0x118110(0x28a)])pythonBridge['send'](this,_0x118110(0x251),JSON[_0x118110(0x269)](_0x4c56ff[_0x118110(0x28a)]));}catch(_0x410a3e){}this[_0x118110(0x215)](),this[_0x118110(0x29e)](),this[_0x118110(0x25f)](),this['updateHealthVector']();},0x1388);}[a0_0x4742eb(0x230)](_0x988d10){const _0x12e40d=a0_0x4742eb;if(this['analysisTimer'])clearInterval(this['analysisTimer']);if(this[_0x12e40d(0x24f)])clearInterval(this[_0x12e40d(0x24f)]);if(this[_0x12e40d(0x21f)])this[_0x12e40d(0x21f)]['cancel']();if(this['modeResetJob'])this[_0x12e40d(0x1ff)][_0x12e40d(0x279)]();if(this[_0x12e40d(0x2a5)])this[_0x12e40d(0x2a5)][_0x12e40d(0x279)]();recorder[_0x12e40d(0x21e)](this),pythonBridge[_0x12e40d(0x243)](this),_0x988d10();}async[a0_0x4742eb(0x275)](_0x2b43fd,_0x100e74){const _0x536f0b=a0_0x4742eb;if(!_0x100e74||this[_0x536f0b(0x1e5)])return;if(_0x2b43fd['includes'](_0x536f0b(0x211))&&_0x2b43fd[_0x536f0b(0x20b)](_0x536f0b(0x295))&&_0x100e74[_0x536f0b(0x28a)])return;if(_0x2b43fd===this[_0x536f0b(0x274)]+'.system.mode'){if(_0x100e74[_0x536f0b(0x28a)]&&Object[_0x536f0b(0x247)](setup[_0x536f0b(0x2a3)])['includes'](_0x100e74[_0x536f0b(0x28a)])){this[_0x536f0b(0x205)]=_0x100e74[_0x536f0b(0x28a)];if(_0x100e74[_0x536f0b(0x28a)]===setup['SYSTEM_MODES'][_0x536f0b(0x2a1)])await recorder[_0x536f0b(0x259)](this,![]);else await recorder[_0x536f0b(0x259)](this,!![]);}if(!_0x100e74[_0x536f0b(0x28d)])this[_0x536f0b(0x1f6)](_0x2b43fd,{'val':this[_0x536f0b(0x205)],'ack':!![]});return;}if(!_0x100e74[_0x536f0b(0x28d)]){_0x2b43fd[_0x536f0b(0x1eb)](_0x536f0b(0x219))&&_0x100e74[_0x536f0b(0x28a)]&&(this['setState'](_0x2b43fd,{'val':![],'ack':!![]}),aiAgent[_0x536f0b(0x271)](this));if(_0x2b43fd[_0x536f0b(0x1eb)]('triggerDailyDigest')&&_0x100e74[_0x536f0b(0x28a)]){this['setState'](_0x2b43fd,{'val':![],'ack':!![]});if(this[_0x536f0b(0x27f)])aiAgent[_0x536f0b(0x299)](this,pythonBridge);}_0x2b43fd[_0x536f0b(0x1eb)](_0x536f0b(0x284))&&_0x100e74[_0x536f0b(0x28a)]&&(this[_0x536f0b(0x1f6)](_0x2b43fd,{'val':![],'ack':!![]}),aiAgent[_0x536f0b(0x218)](this));_0x2b43fd[_0x536f0b(0x1eb)](_0x536f0b(0x27e))&&_0x100e74['val']&&(this[_0x536f0b(0x1f6)](_0x2b43fd,{'val':![],'ack':!![]}),aiAgent[_0x536f0b(0x22b)](this));if(_0x2b43fd[_0x536f0b(0x1eb)](_0x536f0b(0x27d))&&_0x100e74[_0x536f0b(0x28a)]){this['setState'](_0x2b43fd,{'val':![],'ack':!![]});if(this[_0x536f0b(0x27f)])try{const _0x24f163=await this[_0x536f0b(0x267)]('LTM.trainingData.sequences');if(_0x24f163&&_0x24f163[_0x536f0b(0x28a)]){const _0x56b943=JSON[_0x536f0b(0x269)](_0x24f163[_0x536f0b(0x28a)]);this[_0x536f0b(0x21d)][_0x536f0b(0x229)](_0x536f0b(0x206)),this[_0x536f0b(0x248)](_0x536f0b(0x285),{'val':_0x536f0b(0x23f),'ack':!![]}),pythonBridge[_0x536f0b(0x268)](this,_0x536f0b(0x1e3),{'sequences':_0x56b943});}}catch(_0x5c71c4){this[_0x536f0b(0x21d)][_0x536f0b(0x263)]('Training\x20Error:\x20'+_0x5c71c4[_0x536f0b(0x26c)]);}}if(_0x2b43fd[_0x536f0b(0x1eb)](_0x536f0b(0x273))&&_0x100e74[_0x536f0b(0x28a)]){this['setState'](_0x2b43fd,{'val':![],'ack':!![]});if(this[_0x536f0b(0x27f)])try{const _0x277536=await this[_0x536f0b(0x267)](_0x536f0b(0x233));if(_0x277536&&_0x277536['val'])pythonBridge[_0x536f0b(0x268)](this,_0x536f0b(0x1ed),{'digests':JSON['parse'](_0x277536[_0x536f0b(0x28a)])});}catch(_0x3fe86b){}}if(_0x2b43fd[_0x536f0b(0x1eb)](_0x536f0b(0x217))&&_0x100e74[_0x536f0b(0x28a)]){this[_0x536f0b(0x1f6)](_0x2b43fd,{'val':![],'ack':!![]});if(this[_0x536f0b(0x27f)])try{const _0x545aad=await this['getStateAsync'](_0x536f0b(0x27c));if(_0x545aad&&_0x545aad['val'])pythonBridge['send'](this,_0x536f0b(0x225),{'points':JSON[_0x536f0b(0x269)](_0x545aad['val'])});}catch(_0x25ad8a){}}if(_0x2b43fd[_0x536f0b(0x1eb)](_0x536f0b(0x289))&&_0x100e74['val']){this[_0x536f0b(0x1f6)](_0x2b43fd,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x264883=await this[_0x536f0b(0x267)](_0x536f0b(0x22f));_0x264883&&_0x264883['val']&&(this['log'][_0x536f0b(0x229)](_0x536f0b(0x272)),pythonBridge['send'](this,'TRAIN_COMFORT',{'events':JSON['parse'](_0x264883[_0x536f0b(0x28a)])}));}catch(_0x599e73){}}_0x2b43fd[_0x536f0b(0x1eb)]('analysis.training.triggerTopology')&&_0x100e74[_0x536f0b(0x28a)]&&(this['setState'](_0x2b43fd,{'val':![],'ack':!![]}),this[_0x536f0b(0x21d)][_0x536f0b(0x229)]('ðŸ•¸ï¸\x20Manually\x20triggering\x20Topology\x20Update...'),topology[_0x536f0b(0x1f4)](this));return;}if(this[_0x536f0b(0x276)][_0x536f0b(0x234)]&&this[_0x536f0b(0x276)][_0x536f0b(0x234)][_0x536f0b(0x1eb)](_0x2b43fd)){await this['checkWifiPresence']();return;}const _0x4f6a06=(this['config'][_0x536f0b(0x270)]||[])[_0x536f0b(0x261)](_0x5cf46c=>_0x5cf46c['id']===_0x2b43fd);if(_0x4f6a06)recorder[_0x536f0b(0x291)](this,_0x2b43fd,_0x100e74,_0x4f6a06);}async['onMessage'](_0x488f6e){const _0x1efbae=a0_0x4742eb;if(typeof _0x488f6e===_0x1efbae(0x207)&&_0x488f6e[_0x1efbae(0x26c)]){if(_0x488f6e[_0x1efbae(0x25b)]===_0x1efbae(0x239)){}else{if(_0x488f6e['command']===_0x1efbae(0x260))try{const _0xdb8fd4=await scanner[_0x1efbae(0x26d)](this,_0x488f6e['message']||{});this[_0x1efbae(0x20e)](_0x488f6e['from'],_0x488f6e[_0x1efbae(0x25b)],{'success':!![],'devices':_0xdb8fd4},_0x488f6e[_0x1efbae(0x24d)]);}catch(_0x46f84d){this[_0x1efbae(0x20e)](_0x488f6e[_0x1efbae(0x240)],_0x488f6e[_0x1efbae(0x25b)],{'success':![],'error':_0x46f84d[_0x1efbae(0x26c)]},_0x488f6e[_0x1efbae(0x24d)]);}else{if(_0x488f6e[_0x1efbae(0x25b)]===_0x1efbae(0x252)){const {matrix:_0x399177}=_0x488f6e[_0x1efbae(0x26c)];try{const _0x1aa1be=await this[_0x1efbae(0x267)]('analysis.topology.structure');if(_0x1aa1be&&_0x1aa1be['val']){const _0xe845=JSON[_0x1efbae(0x269)](_0x1aa1be['val']);_0xe845[_0x1efbae(0x26f)]=_0x399177,_0xe845[_0x1efbae(0x1fe)]=Date[_0x1efbae(0x290)](),await this[_0x1efbae(0x248)](_0x1efbae(0x232),{'val':JSON[_0x1efbae(0x227)](_0xe845),'ack':!![]}),this['log']['info'](_0x1efbae(0x1fb)),pythonBridge['send'](this,'SET_TOPOLOGY',_0xe845);}this[_0x1efbae(0x20e)](_0x488f6e[_0x1efbae(0x240)],_0x488f6e['command'],{'success':!![]},_0x488f6e[_0x1efbae(0x24d)]);}catch(_0x36399c){this[_0x1efbae(0x21d)][_0x1efbae(0x263)](_0x1efbae(0x1ef)+_0x36399c[_0x1efbae(0x26c)]);}}else{if(_0x488f6e['command']==='getLtmData')this['sendTo'](_0x488f6e[_0x1efbae(0x240)],_0x488f6e['command'],{'success':!![],'dailyDigests':this[_0x1efbae(0x1f3)]||[],'analysisHistory':this[_0x1efbae(0x28b)]||[]},_0x488f6e['callback']);else{if(_0x488f6e[_0x1efbae(0x25b)]===_0x1efbae(0x222)){const _0x2c479a=this[_0x1efbae(0x1f3)][_0x1efbae(0x29a)],_0x3ee492=new Array(0x18)[_0x1efbae(0x280)](0x0),_0x395217=new Date()[_0x1efbae(0x203)](0x0,0x0,0x0,0x0);this[_0x1efbae(0x1ec)]&&this['eventHistory'][_0x1efbae(0x241)](_0x4a341e=>{const _0x45a7a4=_0x1efbae;if(_0x4a341e['timestamp']>=_0x395217){const _0x2e402f=new Date(_0x4a341e[_0x45a7a4(0x22a)])[_0x45a7a4(0x253)]();if(_0x2e402f>=0x0&&_0x2e402f<0x18)_0x3ee492[_0x2e402f]++;}}),this[_0x1efbae(0x20e)](_0x488f6e[_0x1efbae(0x240)],_0x488f6e[_0x1efbae(0x25b)],{'success':!![],'eventHistory':this[_0x1efbae(0x1ec)]['slice'](0x0,0xf),'stats':{'digestCount':_0x2c479a,'isPresent':this[_0x1efbae(0x22c)],'hourlyActivity':_0x3ee492},'automation':{'detected':![]}},_0x488f6e[_0x1efbae(0x24d)]);}else{if(_0x488f6e[_0x1efbae(0x25b)]===_0x1efbae(0x21c)){const _0x2082fe=await this['getForeignObjectsAsync'](_0x1efbae(0x1fa),_0x1efbae(0x200)),_0x1cb031=[];if(_0x2082fe)for(const _0x3482bb in _0x2082fe){const _0x2eed77=_0x2082fe[_0x3482bb],_0x14dd6f=(_0x2eed77[_0x1efbae(0x28c)]&&typeof _0x2eed77[_0x1efbae(0x28c)][_0x1efbae(0x250)]===_0x1efbae(0x207)?_0x2eed77[_0x1efbae(0x28c)][_0x1efbae(0x250)]['de']:_0x2eed77['common'][_0x1efbae(0x250)])||_0x2eed77['common']['name'];_0x1cb031[_0x1efbae(0x286)]({'id':_0x3482bb,'name':_0x14dd6f});}const _0x54012a=await this['getForeignObjectsAsync'](_0x1efbae(0x231),'enum'),_0x22261b=[];if(_0x54012a)for(const _0x39b2dd in _0x54012a){const _0xfe2aa2=_0x54012a[_0x39b2dd],_0x588e37=(_0xfe2aa2['common']&&typeof _0xfe2aa2[_0x1efbae(0x28c)][_0x1efbae(0x250)]===_0x1efbae(0x207)?_0xfe2aa2['common'][_0x1efbae(0x250)]['de']:_0xfe2aa2[_0x1efbae(0x28c)]['name'])||_0x39b2dd[_0x1efbae(0x1e8)]('.')['pop']();_0x22261b[_0x1efbae(0x286)](_0x588e37);}this[_0x1efbae(0x20e)](_0x488f6e[_0x1efbae(0x240)],_0x488f6e[_0x1efbae(0x25b)],{'success':!![],'enums':_0x1cb031,'rooms':_0x22261b},_0x488f6e[_0x1efbae(0x24d)]);}}}}}}}}async['loadSystemMode'](){const _0x3f65ef=a0_0x4742eb;try{const _0x1f5608=await this[_0x3f65ef(0x267)](setup[_0x3f65ef(0x1f2)]);_0x1f5608&&_0x1f5608[_0x3f65ef(0x28a)]&&Object[_0x3f65ef(0x247)](setup['SYSTEM_MODES'])[_0x3f65ef(0x1eb)](_0x1f5608['val'])?this[_0x3f65ef(0x205)]=_0x1f5608[_0x3f65ef(0x28a)]:(this[_0x3f65ef(0x205)]=setup[_0x3f65ef(0x2a3)][_0x3f65ef(0x1ee)],await this[_0x3f65ef(0x248)](setup['SYSTEM_DP_MODE'],{'val':setup[_0x3f65ef(0x2a3)][_0x3f65ef(0x1ee)],'ack':!![]}));}catch(_0x15ca8f){this[_0x3f65ef(0x205)]=setup[_0x3f65ef(0x2a3)][_0x3f65ef(0x1ee)];}}async[a0_0x4742eb(0x1ea)](){const _0x5edb4c=a0_0x4742eb;try{const _0x2c0cf2=this['config'][_0x5edb4c(0x234)]||[];let _0x59483d=![];const _0x1e7b72=[];for(const _0x27ad08 of _0x2c0cf2){try{const _0x1ec88f=await this[_0x5edb4c(0x281)](_0x27ad08);_0x1ec88f&&(_0x1ec88f[_0x5edb4c(0x28a)]===!![]||_0x1ec88f[_0x5edb4c(0x28a)]===_0x5edb4c(0x23c)||_0x1ec88f[_0x5edb4c(0x28a)]===0x1)&&(_0x59483d=!![],_0x1e7b72[_0x5edb4c(0x286)](_0x27ad08));}catch(_0x4c4510){}}return await this[_0x5edb4c(0x248)](_0x5edb4c(0x1e9),{'val':_0x1e7b72[_0x5edb4c(0x283)](',\x20'),'ack':!![]}),_0x59483d&&(this[_0x5edb4c(0x21a)]&&(this[_0x5edb4c(0x21d)][_0x5edb4c(0x229)](_0x5edb4c(0x288)),recorder[_0x5edb4c(0x21e)](this)),!this[_0x5edb4c(0x22c)]&&this[_0x5edb4c(0x205)]===setup['SYSTEM_MODES'][_0x5edb4c(0x1ee)]&&await recorder[_0x5edb4c(0x259)](this,!![])),_0x59483d;}catch(_0x24367f){return![];}}async[a0_0x4742eb(0x2a2)](){const _0x11ea6f=a0_0x4742eb;this['log'][_0x11ea6f(0x26b)](_0x11ea6f(0x23a)),await aiAgent[_0x11ea6f(0x271)](this),this[_0x11ea6f(0x27a)](),this[_0x11ea6f(0x29e)](),this[_0x11ea6f(0x25f)]();}[a0_0x4742eb(0x29e)](){const _0x4dd6d8=a0_0x4742eb;if(!this['isProVersion'])return;try{this[_0x4dd6d8(0x255)](_0x4dd6d8(0x277),(_0x3c0416,_0x1f59db)=>{const _0x69902=_0x4dd6d8;_0x1f59db&&_0x1f59db['val']&&pythonBridge[_0x69902(0x268)](this,_0x69902(0x20d),{'sequences':JSON['parse'](_0x1f59db['val'])});});}catch(_0xfeb85f){}}async['triggerEnergyPrediction'](){const _0x35a0af=a0_0x4742eb;if(!this['isProVersion'])return;try{const _0x1b2bca=await recorder[_0x35a0af(0x25d)](this);if(_0x1b2bca===null)return;const _0x3e44dc={},_0x28298c=this[_0x35a0af(0x276)][_0x35a0af(0x270)]||[];for(const _0x47d98e of _0x28298c){if(_0x47d98e['type']===_0x35a0af(0x22d)&&_0x47d98e[_0x35a0af(0x212)]){const _0x33ab7e=this[_0x35a0af(0x201)][_0x47d98e['id']];if(_0x33ab7e!==undefined)_0x3e44dc[_0x47d98e[_0x35a0af(0x212)]]=_0x33ab7e;}}Object[_0x35a0af(0x237)](_0x3e44dc)[_0x35a0af(0x29a)]>0x0&&pythonBridge['send'](this,'PREDICT_ENERGY',{'current_temps':_0x3e44dc,'t_out':_0x1b2bca});}catch(_0x4d3671){}}[a0_0x4742eb(0x27a)](){const _0x6752ff=a0_0x4742eb;if(!this[_0x6752ff(0x294)]||this[_0x6752ff(0x294)]['length']===0x0)return;const _0x3515a9=new Array(0x60)[_0x6752ff(0x280)](0x0),_0x5610fd=new Date()[_0x6752ff(0x203)](0x0,0x0,0x0,0x0);this['rawEventLog'][_0x6752ff(0x241)](_0x3a2dd1=>{const _0x50d62c=_0x6752ff,_0x2e9730=new Date(_0x3a2dd1['timestamp']);if(_0x2e9730[_0x50d62c(0x1f7)]()>=_0x5610fd){const _0x580e9c=_0x2e9730[_0x50d62c(0x253)](),_0x4a28e8=_0x2e9730['getMinutes'](),_0xda594a=_0x580e9c*0x4+Math['floor'](_0x4a28e8/0xf);if(_0xda594a>=0x0&&_0xda594a<0x60)_0x3515a9[_0xda594a]++;}}),this[_0x6752ff(0x248)]('analysis.health.todayVector',{'val':JSON['stringify'](_0x3515a9),'ack':!![]});}[a0_0x4742eb(0x215)](){const _0x478c7a=a0_0x4742eb;if(!this[_0x478c7a(0x1f3)]||this[_0x478c7a(0x1f3)][_0x478c7a(0x29a)]<0x2)return;const _0x13dd52=this[_0x478c7a(0x1f3)][_0x478c7a(0x27b)](_0x34510c=>{const _0x454592=_0x478c7a,_0x170032=(_0x34510c[_0x454592(0x254)]||'')[_0x454592(0x221)]();return ACTIVITY_LEVEL_MAP[_0x170032]||0x32;});pythonBridge[_0x478c7a(0x268)](this,_0x478c7a(0x282),{'values':_0x13dd52,'tag':_0x478c7a(0x256)});}}if(require[a0_0x4742eb(0x224)]!==module)module['exports']=_0x8cc20=>new CogniLiving(_0x8cc20);else new CogniLiving();