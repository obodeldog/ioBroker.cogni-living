const a0_0x2b007b=a0_0x4821;(function(_0x3f60bd,_0x11f72d){const _0x1f3347=a0_0x4821,_0x148d6b=_0x3f60bd();while(!![]){try{const _0x89723=-parseInt(_0x1f3347(0x243))/0x1+-parseInt(_0x1f3347(0x39f))/0x2+-parseInt(_0x1f3347(0x2c8))/0x3*(parseInt(_0x1f3347(0x260))/0x4)+-parseInt(_0x1f3347(0x281))/0x5+-parseInt(_0x1f3347(0x27d))/0x6+-parseInt(_0x1f3347(0x21f))/0x7*(parseInt(_0x1f3347(0x392))/0x8)+parseInt(_0x1f3347(0x24a))/0x9*(parseInt(_0x1f3347(0x22f))/0xa);if(_0x89723===_0x11f72d)break;else _0x148d6b['push'](_0x148d6b['shift']());}catch(_0x44a7b2){_0x148d6b['push'](_0x148d6b['shift']());}}}(a0_0x1b9c,0xd94f7));const a0_0x3de6f0=(function(){let _0x59e044=!![];return function(_0x12152f,_0x4a1376){const _0x5e1c96=_0x59e044?function(){const _0x409f89=a0_0x4821;if(_0x4a1376){const _0x158730=_0x4a1376[_0x409f89(0x22c)](_0x12152f,arguments);return _0x4a1376=null,_0x158730;}}:function(){};return _0x59e044=![],_0x5e1c96;};}()),a0_0x128f60=a0_0x3de6f0(this,function(){const _0x3e8b01=a0_0x4821;return a0_0x128f60[_0x3e8b01(0x21a)]()['search'](_0x3e8b01(0x284))['toString']()[_0x3e8b01(0x348)](a0_0x128f60)[_0x3e8b01(0x25d)]('(((.+)+)+)+$');});a0_0x128f60();'use strict';const utils=require(a0_0x2b007b(0x30b)),{GoogleGenerativeAI}=require('@google/generative-ai'),schedule=require(a0_0x2b007b(0x37c)),{spawn,exec}=require(a0_0x2b007b(0x274)),path=require(a0_0x2b007b(0x2bf)),fs=require('fs'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x2b007b(0x32c),LTM_SCHEDULE='0\x203\x20*\x20*\x20*',MODE_RESET_SCHEDULE=a0_0x2b007b(0x208),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x2b007b(0x36d),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST=a0_0x2b007b(0x256),LTM_DP_BASELINE_STATUS=a0_0x2b007b(0x293),LTM_DP_DRIFT_CHANNEL=a0_0x2b007b(0x321),LTM_DP_DRIFT_STATUS=a0_0x2b007b(0x31d),LTM_DP_DRIFT_DETAILS=a0_0x2b007b(0x21c),LTM_DP_DRIFT_LAST_CHECK=a0_0x2b007b(0x26d),SYSTEM_DP_MODE=a0_0x2b007b(0x2f2),SYSTEM_MODES={'NORMAL':a0_0x2b007b(0x231),'VACATION':a0_0x2b007b(0x1fa),'PARTY':a0_0x2b007b(0x328),'GUEST':'guest'},AUTO_RESET_MODES=[SYSTEM_MODES['PARTY'],SYSTEM_MODES['GUEST']],PERSONA_MAPPING={'generic':a0_0x2b007b(0x26f),'senior_aal':'PRIORIT√ÑT:\x20Gesundheit/AAL.','family':a0_0x2b007b(0x2c5),'single_comfort':a0_0x2b007b(0x269),'security':a0_0x2b007b(0x2d3)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0},BAD_NAMES=[a0_0x2b007b(0x21e),'currentposition',a0_0x2b007b(0x357),a0_0x2b007b(0x237),a0_0x2b007b(0x27a),a0_0x2b007b(0x1ff),'on',a0_0x2b007b(0x250),a0_0x2b007b(0x2ce),a0_0x2b007b(0x2ba),'shutter',a0_0x2b007b(0x29f),a0_0x2b007b(0x2a2),a0_0x2b007b(0x301),a0_0x2b007b(0x28b),a0_0x2b007b(0x2ab),a0_0x2b007b(0x2f1),a0_0x2b007b(0x2c9),a0_0x2b007b(0x346),a0_0x2b007b(0x240),'energy',a0_0x2b007b(0x2a1),'valve',a0_0x2b007b(0x36e),a0_0x2b007b(0x360)],ADAPTER_BLACKLIST=[a0_0x2b007b(0x24e),'admin.',a0_0x2b007b(0x2b7),a0_0x2b007b(0x266),a0_0x2b007b(0x2d8),a0_0x2b007b(0x39d),'icons-mfd.',a0_0x2b007b(0x336),'echarts.',a0_0x2b007b(0x227),a0_0x2b007b(0x27b)],IS_WIN=process[a0_0x2b007b(0x337)]===a0_0x2b007b(0x375),VENV_PATH=path['join'](__dirname,'.venv'),PYTHON_EXE=IS_WIN?path[a0_0x2b007b(0x2ac)](VENV_PATH,a0_0x2b007b(0x37a),a0_0x2b007b(0x25b)):path[a0_0x2b007b(0x2ac)](VENV_PATH,a0_0x2b007b(0x259),a0_0x2b007b(0x219)),PIP_EXE=IS_WIN?path[a0_0x2b007b(0x2ac)](VENV_PATH,a0_0x2b007b(0x37a),'pip.exe'):path[a0_0x2b007b(0x2ac)](VENV_PATH,a0_0x2b007b(0x259),'pip');let activeSequence=[],sequenceTimer=null,panicMode=![];async function startSystem(_0xfa5b0e){const _0x206d16=a0_0x2b007b;_0xfa5b0e[_0x206d16(0x2d1)][_0x206d16(0x306)]('üöÄ\x20Starting\x20System\x20Logic...'),await initZombies(_0xfa5b0e);try{_0xfa5b0e[_0x206d16(0x305)]=await checkLicense(_0xfa5b0e['config'][_0x206d16(0x246)]);}catch(_0x433273){}if(!_0xfa5b0e[_0x206d16(0x364)][_0x206d16(0x20b)]||_0xfa5b0e[_0x206d16(0x364)][_0x206d16(0x20b)]<0.1)_0xfa5b0e[_0x206d16(0x364)]['inactivityThresholdHours']=0xc;await initHistory(_0xfa5b0e),await initSystemConfig(_0xfa5b0e);if(_0xfa5b0e[_0x206d16(0x364)][_0x206d16(0x32f)])try{_0xfa5b0e[_0x206d16(0x33f)]=new GoogleGenerativeAI(_0xfa5b0e[_0x206d16(0x364)][_0x206d16(0x32f)]),_0xfa5b0e[_0x206d16(0x27f)]=_0xfa5b0e[_0x206d16(0x33f)][_0x206d16(0x361)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),_0xfa5b0e[_0x206d16(0x2d1)][_0x206d16(0x306)](_0x206d16(0x2ad));}catch(_0x493bdd){_0xfa5b0e[_0x206d16(0x2d1)][_0x206d16(0x2fc)](_0x206d16(0x25c)+_0x493bdd['message']);}await createAllObjects(_0xfa5b0e),await loadSystemMode(_0xfa5b0e),await loadRawEventLog(_0xfa5b0e),await loadDailyDigests(_0xfa5b0e),_0xfa5b0e[_0x206d16(0x358)](_0x206d16(0x367)),_0xfa5b0e[_0x206d16(0x358)](LTM_DP_TRIGGER_DIGEST),_0xfa5b0e[_0x206d16(0x358)]('system.mode'),_0xfa5b0e[_0x206d16(0x358)](_0x206d16(0x320)),_0xfa5b0e['subscribeStates'](_0x206d16(0x366)),_0xfa5b0e['subscribeStates'](_0x206d16(0x2e0)),_0xfa5b0e[_0x206d16(0x358)](_0x206d16(0x34f)),_0xfa5b0e[_0x206d16(0x358)](_0x206d16(0x387)),_0xfa5b0e[_0x206d16(0x358)](_0x206d16(0x1fe)),await initSensorSubscriptions(_0xfa5b0e),await initPresenceSubscriptions(_0xfa5b0e),await setupTelegramListener(_0xfa5b0e),setTimeout(()=>checkWifiPresence(_0xfa5b0e),0x1388);if(_0xfa5b0e[_0x206d16(0x282)])clearInterval(_0xfa5b0e[_0x206d16(0x282)]);const _0x404ee2=_0xfa5b0e['config']['analysisInterval']||0xf;_0x404ee2>0x0&&(_0xfa5b0e[_0x206d16(0x282)]=setInterval(()=>{runAutopilot(_0xfa5b0e);},_0x404ee2*0x3c*0x3e8)),setupLtmScheduler(_0xfa5b0e),setupModeResetScheduler(_0xfa5b0e),setupDriftAnalysisScheduler(_0xfa5b0e),setupBriefingScheduler(_0xfa5b0e),startPythonService(_0xfa5b0e),setTimeout(()=>{const _0x2367ce=_0x206d16;if(_0xfa5b0e[_0x2367ce(0x270)])runPythonHealthCheck(_0xfa5b0e);},0x1388);}function checkAndInstall(_0x3e3748){const _0xe848cc=a0_0x2b007b;if(!fs[_0xe848cc(0x22a)](VENV_PATH)||!fs['existsSync'](PIP_EXE))return _0x3e3748[_0xe848cc(0x2d1)][_0xe848cc(0x249)](_0xe848cc(0x34c)),installPythonDependencies(_0x3e3748),![];return!![];}function a0_0x4821(_0x89b6d9,_0x6dbd7e){const _0x1e8d0c=a0_0x1b9c();return a0_0x4821=function(_0x128f60,_0x3de6f0){_0x128f60=_0x128f60-0x1f4;let _0x1b9ce3=_0x1e8d0c[_0x128f60];return _0x1b9ce3;},a0_0x4821(_0x89b6d9,_0x6dbd7e);}function installPythonDependencies(_0x21c3c5){const _0x1c3a55=a0_0x2b007b;if(_0x21c3c5[_0x1c3a55(0x298)])return;_0x21c3c5[_0x1c3a55(0x298)]=!![];const _0x196ed4=path[_0x1c3a55(0x2ac)](__dirname,_0x1c3a55(0x33c),_0x1c3a55(0x278));_0x21c3c5['log'][_0x1c3a55(0x306)]('üõ†Ô∏è\x20Installing\x20Python\x20environment.\x20Do\x20not\x20restart!'),stopPythonService(_0x21c3c5);if(fs[_0x1c3a55(0x22a)](VENV_PATH))try{fs[_0x1c3a55(0x2cc)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x2fcc04){}exec(_0x1c3a55(0x2c3)+VENV_PATH+'\x22',_0x3b975c=>{const _0x4ebd83=_0x1c3a55;if(_0x3b975c){_0x21c3c5[_0x4ebd83(0x2d1)][_0x4ebd83(0x2fc)]('‚ùå\x20VENV\x20FAILED.\x20Run:\x20sudo\x20apt\x20install\x20python3-venv'),_0x21c3c5[_0x4ebd83(0x298)]=![];return;}installRequirementsInVenv(_0x21c3c5,_0x196ed4);});}function installRequirementsInVenv(_0x4a1b4d,_0x127a21){const _0xec5506=a0_0x2b007b;_0x4a1b4d[_0xec5506(0x2d1)][_0xec5506(0x306)](_0xec5506(0x397));const _0x58ca46='\x22'+PIP_EXE+_0xec5506(0x286)+_0x127a21+'\x22';exec(_0x58ca46,{'timeout':0x124f80},(_0x191d12,_0x236e4b,_0x314a92)=>{const _0x3da343=_0xec5506;_0x4a1b4d[_0x3da343(0x298)]=![],_0x191d12?_0x4a1b4d['log'][_0x3da343(0x2fc)](_0x3da343(0x218)+(_0x314a92||_0x191d12[_0x3da343(0x223)])):(_0x4a1b4d['log'][_0x3da343(0x306)](_0x3da343(0x29b)),startSystem(_0x4a1b4d));});}async function initZombies(_0x1f4462){const _0x3dce46=a0_0x2b007b;try{const _0x533733=['analysis.history_debug_00',_0x3dce46(0x28a)];for(const _0x434b0a of _0x533733){try{const _0x270a1a=await _0x1f4462['getObjectAsync'](_0x434b0a);if(_0x270a1a)await _0x1f4462[_0x3dce46(0x30f)](_0x434b0a);}catch(_0x3afc64){}}}catch(_0x1d738f){}}async function checkLicense(_0x3cc1e7){return!![];}async function initHistory(_0x1d310b){const _0x42d890=a0_0x2b007b;try{const _0x3c9691=await _0x1d310b[_0x42d890(0x222)](_0x42d890(0x2bd));_0x3c9691&&_0x3c9691[_0x42d890(0x295)]&&(_0x1d310b['eventHistory']=JSON[_0x42d890(0x37f)](_0x3c9691[_0x42d890(0x295)][_0x42d890(0x21a)]()));}catch(_0x284502){_0x1d310b[_0x42d890(0x34d)]=[];}try{const _0x3b7c3a=await _0x1d310b[_0x42d890(0x222)]('analysis.analysisHistory');if(_0x3b7c3a&&_0x3b7c3a[_0x42d890(0x295)])_0x1d310b[_0x42d890(0x315)]=JSON['parse'](_0x3b7c3a['val'][_0x42d890(0x21a)]());}catch(_0x3c9ccf){_0x1d310b[_0x42d890(0x315)]=[];}if(_0x1d310b[_0x42d890(0x34d)]&&_0x1d310b['eventHistory'][_0x42d890(0x242)]>0x0){_0x1d310b[_0x42d890(0x2d1)]['info']('Restoring\x20sensor\x20cache...');for(let _0x1f9f33=_0x1d310b[_0x42d890(0x34d)][_0x42d890(0x242)]-0x1;_0x1f9f33>=0x0;_0x1f9f33--){const _0x3e3e20=_0x1d310b['eventHistory'][_0x1f9f33];if(_0x3e3e20&&_0x3e3e20['id']!==undefined&&_0x3e3e20['value']!==undefined)_0x1d310b[_0x42d890(0x32d)][_0x3e3e20['id']]=_0x3e3e20['value'];}}}async function initSystemConfig(_0x5a6333){const _0x49d954=a0_0x2b007b;try{const _0x2449d4=await _0x5a6333['getForeignObjectAsync']('system.config');if(_0x2449d4&&_0x2449d4[_0x49d954(0x22d)])_0x5a6333['systemConfig']={'latitude':_0x2449d4[_0x49d954(0x22d)]['latitude']||0x0,'longitude':_0x2449d4[_0x49d954(0x22d)][_0x49d954(0x2bb)]||0x0,'city':_0x2449d4['common'][_0x49d954(0x216)]||''};}catch(_0x1aeb86){}}async function createAllObjects(_0x55ac80){const _0x3b34f3=a0_0x2b007b;await _0x55ac80[_0x3b34f3(0x394)](_0x3b34f3(0x388),{'type':_0x3b34f3(0x380),'common':{'name':_0x3b34f3(0x2f5)},'native':{}}),await _0x55ac80[_0x3b34f3(0x394)](SYSTEM_DP_MODE,{'type':_0x3b34f3(0x357),'common':{'name':'System\x20Mode','type':_0x3b34f3(0x268),'role':_0x3b34f3(0x357),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x3b34f3(0x2c4)]},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)](_0x3b34f3(0x1f5),{'type':'state','common':{'name':_0x3b34f3(0x368),'type':_0x3b34f3(0x268),'role':_0x3b34f3(0x398),'read':!![],'write':![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)](_0x3b34f3(0x2e1),{'type':_0x3b34f3(0x357),'common':{'name':_0x3b34f3(0x332),'type':_0x3b34f3(0x268),'role':_0x3b34f3(0x2fb),'read':!![],'write':![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)]('events.history',{'type':_0x3b34f3(0x357),'common':{'name':_0x3b34f3(0x2b2),'type':'string','role':_0x3b34f3(0x2fb),'read':!![],'write':![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x394)](_0x3b34f3(0x206),{'type':_0x3b34f3(0x380),'common':{'name':_0x3b34f3(0x253)},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)](_0x3b34f3(0x34f),{'type':_0x3b34f3(0x357),'common':{'name':_0x3b34f3(0x26e),'type':_0x3b34f3(0x285),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)]('analysis.training.triggerHealth',{'type':_0x3b34f3(0x357),'common':{'name':'Train\x20Health','type':_0x3b34f3(0x285),'role':_0x3b34f3(0x1fd),'read':!![],'write':!![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)](_0x3b34f3(0x1fe),{'type':_0x3b34f3(0x357),'common':{'name':'Train\x20Energy','type':_0x3b34f3(0x285),'role':_0x3b34f3(0x1fd),'read':!![],'write':!![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)]('analysis.training.status',{'type':_0x3b34f3(0x357),'common':{'name':_0x3b34f3(0x2c7),'type':_0x3b34f3(0x268),'role':_0x3b34f3(0x398),'read':!![],'write':![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x394)](_0x3b34f3(0x27c),{'type':_0x3b34f3(0x380),'common':{'name':_0x3b34f3(0x2ef)},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)]('analysis.security.lastScore',{'type':_0x3b34f3(0x357),'common':{'name':_0x3b34f3(0x1f7),'type':_0x3b34f3(0x30c),'role':_0x3b34f3(0x27a),'read':!![],'write':![]},'native':{}}),await _0x55ac80['setObjectNotExistsAsync']('analysis.security.currentThreshold',{'type':'state','common':{'name':_0x3b34f3(0x32e),'type':_0x3b34f3(0x30c),'role':_0x3b34f3(0x27a),'read':!![],'write':![]},'native':{}}),await _0x55ac80['setObjectNotExistsAsync'](_0x3b34f3(0x201),{'type':_0x3b34f3(0x357),'common':{'name':'Last\x20Check','type':_0x3b34f3(0x268),'role':_0x3b34f3(0x329),'read':!![],'write':![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x394)](_0x3b34f3(0x205),{'type':_0x3b34f3(0x380),'common':{'name':_0x3b34f3(0x200)},'native':{}}),await _0x55ac80['setObjectNotExistsAsync'](_0x3b34f3(0x225),{'type':_0x3b34f3(0x357),'common':{'name':_0x3b34f3(0x356),'type':_0x3b34f3(0x268),'role':_0x3b34f3(0x329),'read':!![],'write':![]},'native':{}}),await _0x55ac80['setObjectNotExistsAsync'](_0x3b34f3(0x262),{'type':_0x3b34f3(0x357),'common':{'name':_0x3b34f3(0x343),'type':_0x3b34f3(0x285),'role':_0x3b34f3(0x37e),'read':!![],'write':![]},'native':{}}),await _0x55ac80['setObjectNotExistsAsync']('analysis.health.trendDiagnosis',{'type':_0x3b34f3(0x357),'common':{'name':'Trend','type':'string','role':_0x3b34f3(0x398),'read':!![],'write':![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)](_0x3b34f3(0x297),{'type':_0x3b34f3(0x357),'common':{'name':_0x3b34f3(0x313),'type':_0x3b34f3(0x30c),'role':_0x3b34f3(0x27a),'read':!![],'write':![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x394)](_0x3b34f3(0x25f),{'type':_0x3b34f3(0x380),'common':{'name':_0x3b34f3(0x2b9)},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)](_0x3b34f3(0x294),{'type':_0x3b34f3(0x357),'common':{'name':_0x3b34f3(0x2df),'type':_0x3b34f3(0x268),'role':_0x3b34f3(0x398),'read':!![],'write':![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)](_0x3b34f3(0x2d9),{'type':_0x3b34f3(0x357),'common':{'name':_0x3b34f3(0x263),'type':_0x3b34f3(0x268),'role':'text','read':!![],'write':![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x394)](_0x3b34f3(0x390),{'type':_0x3b34f3(0x380),'common':{'name':_0x3b34f3(0x390)},'native':{}}),await _0x55ac80[_0x3b34f3(0x394)](LTM_DP_RAW_LOG,{'type':_0x3b34f3(0x357),'common':{'name':_0x3b34f3(0x37b),'type':'string','role':_0x3b34f3(0x2fb),'read':!![],'write':![]},'native':{}}),await _0x55ac80['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':_0x3b34f3(0x2e7),'type':_0x3b34f3(0x268),'role':'json','read':!![],'write':![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)]('LTM.trainingData.sequences',{'type':'state','common':{'name':_0x3b34f3(0x25a),'type':_0x3b34f3(0x268),'role':_0x3b34f3(0x2fb),'read':!![],'write':![]},'native':{}}),await _0x55ac80['setObjectNotExistsAsync'](_0x3b34f3(0x2dc),{'type':_0x3b34f3(0x357),'common':{'name':_0x3b34f3(0x36c),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)]('analysis.trigger',{'type':_0x3b34f3(0x357),'common':{'name':'Trigger\x20Analysis','type':'boolean','role':_0x3b34f3(0x1fd),'read':!![],'write':!![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)](_0x3b34f3(0x320),{'type':_0x3b34f3(0x357),'common':{'name':_0x3b34f3(0x2cf),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)](_0x3b34f3(0x2ca),{'type':'state','common':{'name':_0x3b34f3(0x20e),'type':_0x3b34f3(0x285),'role':_0x3b34f3(0x2f8),'read':!![],'write':![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)](_0x3b34f3(0x273),{'type':'state','common':{'name':_0x3b34f3(0x383),'type':_0x3b34f3(0x268),'role':_0x3b34f3(0x1f4),'read':!![],'write':![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)](_0x3b34f3(0x21b),{'type':'state','common':{'name':_0x3b34f3(0x38e),'type':'string','role':_0x3b34f3(0x398),'read':!![],'write':![]},'native':{}}),await _0x55ac80['setObjectNotExistsAsync'](_0x3b34f3(0x374),{'type':_0x3b34f3(0x357),'common':{'name':_0x3b34f3(0x307),'type':_0x3b34f3(0x285),'role':_0x3b34f3(0x37e),'read':!![],'write':![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)](_0x3b34f3(0x386),{'type':_0x3b34f3(0x357),'common':{'name':_0x3b34f3(0x395),'type':'string','role':_0x3b34f3(0x398),'read':!![],'write':![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)](_0x3b34f3(0x371),{'type':_0x3b34f3(0x357),'common':{'name':_0x3b34f3(0x2f4),'type':_0x3b34f3(0x268),'role':_0x3b34f3(0x398),'read':!![],'write':![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)](_0x3b34f3(0x255),{'type':_0x3b34f3(0x357),'common':{'name':_0x3b34f3(0x2ea),'type':_0x3b34f3(0x268),'role':_0x3b34f3(0x398),'read':!![],'write':![]},'native':{}}),await _0x55ac80[_0x3b34f3(0x314)](_0x3b34f3(0x2e0),{'type':_0x3b34f3(0x357),'common':{'name':_0x3b34f3(0x370),'type':_0x3b34f3(0x285),'role':_0x3b34f3(0x2ce),'read':!![],'write':!![]},'native':{}}),await _0x55ac80['setObjectNotExistsAsync']('analysis.automation.triggerAction',{'type':_0x3b34f3(0x357),'common':{'name':_0x3b34f3(0x2be),'type':_0x3b34f3(0x285),'role':'button','read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0xdf72fa){const _0x5fdbf6=a0_0x2b007b;try{const _0x5907a3=await _0xdf72fa[_0x5fdbf6(0x222)](SYSTEM_DP_MODE);_0x5907a3&&_0x5907a3['val']&&Object[_0x5fdbf6(0x252)](SYSTEM_MODES)['includes'](_0x5907a3['val'])?_0xdf72fa['currentSystemMode']=_0x5907a3[_0x5fdbf6(0x295)]:(_0xdf72fa[_0x5fdbf6(0x30a)]=SYSTEM_MODES[_0x5fdbf6(0x2c4)],await _0xdf72fa[_0x5fdbf6(0x34e)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x8ecea1){_0xdf72fa['currentSystemMode']=SYSTEM_MODES[_0x5fdbf6(0x2c4)];}}async function loadRawEventLog(_0x4339a2){const _0x4bc4fe=a0_0x2b007b;try{const _0x5a035a=await _0x4339a2[_0x4bc4fe(0x222)](LTM_DP_RAW_LOG);if(_0x5a035a&&_0x5a035a[_0x4bc4fe(0x295)])_0x4339a2['rawEventLog']=JSON['parse'](_0x5a035a[_0x4bc4fe(0x295)]);}catch(_0x7bbb8e){_0x4339a2[_0x4bc4fe(0x2d5)]=[];}}async function saveRawEventLog(_0x5246b5){const _0x33e248=a0_0x2b007b;if(_0x5246b5[_0x33e248(0x2d5)][_0x33e248(0x242)]>RAW_LOG_MAX_SIZE)_0x5246b5['rawEventLog']['splice'](0x0,_0x5246b5[_0x33e248(0x2d5)][_0x33e248(0x242)]-RAW_LOG_MAX_SIZE);await _0x5246b5[_0x33e248(0x34e)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x5246b5[_0x33e248(0x2d5)]),'ack':!![]});}async function loadDailyDigests(_0x504529){const _0x3ea4c9=a0_0x2b007b;try{const _0x376dc9=await _0x504529[_0x3ea4c9(0x222)](LTM_DP_DAILY_DIGESTS);if(_0x376dc9&&_0x376dc9[_0x3ea4c9(0x295)])_0x504529[_0x3ea4c9(0x391)]=JSON[_0x3ea4c9(0x37f)](_0x376dc9['val']);}catch(_0x42567f){_0x504529[_0x3ea4c9(0x391)]=[];}await updateBaselineStatus(_0x504529);}async function saveDailyDigests(_0xf8ea2a,_0x3303d4=!![]){const _0x567d59=a0_0x2b007b,_0x5e0612=_0xf8ea2a[_0x567d59(0x364)]['ltmLtbWindowDays']||0x3c;_0xf8ea2a[_0x567d59(0x391)][_0x567d59(0x242)]>_0x5e0612&&_0xf8ea2a[_0x567d59(0x391)][_0x567d59(0x30e)](0x0,_0xf8ea2a[_0x567d59(0x391)][_0x567d59(0x242)]-_0x5e0612);await _0xf8ea2a['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x567d59(0x2ae)](_0xf8ea2a[_0x567d59(0x391)]),'ack':!![]});if(_0x3303d4)await updateBaselineStatus(_0xf8ea2a);}async function updateAnalysisHistory(_0x52047e,_0x41f4fa){const _0x58e75d=a0_0x2b007b;_0x52047e[_0x58e75d(0x315)][_0x58e75d(0x254)](_0x41f4fa);if(_0x52047e[_0x58e75d(0x315)][_0x58e75d(0x242)]>HISTORY_MAX_SIZE)_0x52047e[_0x58e75d(0x315)]['pop']();await _0x52047e['setStateAsync'](_0x58e75d(0x36b),{'val':JSON['stringify'](_0x52047e[_0x58e75d(0x315)]),'ack':!![]});}async function updateBaselineStatus(_0x11f2f8){const _0x2c2e73=a0_0x2b007b;if(!_0x11f2f8[_0x2c2e73(0x305)]){await _0x11f2f8['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0x20bed7=_0x11f2f8['dailyDigests']['length']>=(_0x11f2f8['config'][_0x2c2e73(0x2f0)]||0x7)?'Aktiv\x20('+_0x11f2f8[_0x2c2e73(0x391)][_0x2c2e73(0x242)]+_0x2c2e73(0x289):_0x2c2e73(0x340)+_0x11f2f8['dailyDigests'][_0x2c2e73(0x242)]+'/'+(_0x11f2f8[_0x2c2e73(0x364)]['minDaysForBaseline']||0x7)+')';await _0x11f2f8['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x20bed7,'ack':!![]});}async function initSensorSubscriptions(_0x3ef80b){const _0x30f176=a0_0x2b007b,_0x236532=_0x3ef80b[_0x30f176(0x364)]['devices'];if(_0x236532)for(const _0x4464f6 of _0x236532){await _0x3ef80b[_0x30f176(0x31c)](_0x4464f6['id']);}}async function initPresenceSubscriptions(_0x4708f4){const _0xe13bd=a0_0x2b007b,_0x597f46=_0x4708f4['config'][_0xe13bd(0x210)];if(_0x597f46)for(const _0x5d41f6 of _0x597f46){await _0x4708f4[_0xe13bd(0x31c)](_0x5d41f6);}}async function setupTelegramListener(_0x2fe729){const _0x20d425=a0_0x2b007b,_0x866aba=_0x2fe729['config']['notifyTelegramInstance'];if(_0x2fe729['config'][_0x20d425(0x365)]&&_0x866aba)await _0x2fe729[_0x20d425(0x31c)](_0x866aba+'.communicate.request');}async function checkWifiPresence(_0x21a773){const _0x3db1d0=a0_0x2b007b;try{const _0x187eef=_0x21a773[_0x3db1d0(0x364)][_0x3db1d0(0x210)]||[];let _0x5e0a73=![];const _0x3980e9=[];for(const _0x19765a of _0x187eef){try{const _0x2fe2f0=await _0x21a773[_0x3db1d0(0x248)](_0x19765a);_0x2fe2f0&&(_0x2fe2f0[_0x3db1d0(0x295)]===!![]||_0x2fe2f0[_0x3db1d0(0x295)]===_0x3db1d0(0x296)||_0x2fe2f0[_0x3db1d0(0x295)]===0x1)&&(_0x5e0a73=!![],_0x3980e9['push'](_0x19765a));}catch(_0x6e03d1){}}return await _0x21a773['setStateAsync'](_0x3db1d0(0x1f5),{'val':_0x3980e9[_0x3db1d0(0x2ac)](',\x20'),'ack':!![]}),_0x5e0a73&&(_0x21a773[_0x3db1d0(0x291)]&&(_0x21a773['log'][_0x3db1d0(0x306)](_0x3db1d0(0x34b)),abortExitTimer(_0x21a773)),!_0x21a773[_0x3db1d0(0x31e)]&&_0x21a773[_0x3db1d0(0x30a)]===SYSTEM_MODES[_0x3db1d0(0x2c4)]&&await setPresence(_0x21a773,!![])),_0x5e0a73;}catch(_0x24eba7){return![];}}function startExitTimer(_0x4c4901){const _0x3052a9=a0_0x2b007b;abortExitTimer(_0x4c4901),_0x4c4901[_0x3052a9(0x2d4)]=!![],_0x4c4901[_0x3052a9(0x2da)]=setTimeout(()=>{const _0x2c94e6=_0x3052a9;_0x4c4901[_0x2c94e6(0x2d4)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x4c4901[_0x3052a9(0x291)]=setTimeout(()=>{const _0x1cc421=_0x3052a9;setPresence(_0x4c4901,![]),_0x4c4901[_0x1cc421(0x291)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x157fff){const _0x2b6ac1=a0_0x2b007b;if(_0x157fff[_0x2b6ac1(0x291)])clearTimeout(_0x157fff[_0x2b6ac1(0x291)]);if(_0x157fff[_0x2b6ac1(0x2da)])clearTimeout(_0x157fff['exitGraceTimer']);_0x157fff[_0x2b6ac1(0x291)]=null,_0x157fff[_0x2b6ac1(0x2da)]=null,_0x157fff[_0x2b6ac1(0x2d4)]=![];}async function setPresence(_0x115e9a,_0x460021){const _0x5ba8f3=a0_0x2b007b;if(_0x115e9a[_0x5ba8f3(0x31e)]===_0x460021)return;_0x115e9a[_0x5ba8f3(0x31e)]=_0x460021,await _0x115e9a[_0x5ba8f3(0x34e)](_0x5ba8f3(0x33a),{'val':_0x460021,'ack':!![]});}async function executeAutomationAction(_0x3a8279){const _0x1ab233=a0_0x2b007b;try{const _0x33921f=await _0x3a8279[_0x1ab233(0x222)](_0x1ab233(0x371)),_0x2faa7d=await _0x3a8279['getStateAsync'](_0x1ab233(0x255));if(_0x33921f&&_0x33921f[_0x1ab233(0x295)]&&_0x2faa7d){const _0x9b993a=_0x33921f[_0x1ab233(0x295)];let _0x3be9ba=_0x2faa7d[_0x1ab233(0x295)];try{_0x3be9ba=JSON['parse'](_0x3be9ba);}catch(_0x4c6ddf){}_0x3a8279[_0x1ab233(0x2d1)]['info']('ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x9b993a+'\x20=\x20'+_0x3be9ba),await _0x3a8279[_0x1ab233(0x24c)](_0x9b993a,_0x3be9ba);}else _0x3a8279[_0x1ab233(0x2d1)]['warn'](_0x1ab233(0x215));}catch(_0x4cd17c){_0x3a8279['log'][_0x1ab233(0x2fc)](_0x1ab233(0x257)+_0x4cd17c[_0x1ab233(0x223)]);}}function a0_0x1b9c(){const _0x88c8dc=['Drift\x20Sched\x20Error:\x20','Daily\x20Digests','getHours','setState','Target\x20Value','pop','testApiKey','Unbekannt','version','Security\x20Monitor','minDaysForBaseline','occupancy','system.mode','analysis.lastResult','Target\x20ID','System','light','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','indicator.alarm','TRAIN_HEALTH','testContext','json','error','Err:\x20','push','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','heating','status','devices','is_anomaly','aiPersona','isProVersion','info','Pattern\x20Detected','door','isAlert','currentSystemMode','@iobroker/adapter-core','number','insulation','splice','delObjectAsync','COGNI_REQUEST_CALL','sendToAsync','apiKey','Trend\x20Value','setObjectNotExistsAsync','analysisHistory','[RECORDER]\x20Error:\x20','exports','bind','cogni-living\x20adapter\x20starting\x20(v','notifyPushoverEnabled','getTime','subscribeForeignStatesAsync','LTM.driftAnalysis.baselineDrift','isPresent','writable','analysis.triggerBriefing','LTM.driftAnalysis','enum.functions.*','getCalendarNames','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','heizung','getOverviewData','üß†\x20Triggering\x20Security\x20Training...','party','date','Training\x20Error:\x20','sendTo','models/gemini-flash-latest','sensorLastValues','Current\x20Threshold','geminiApiKey','callback','getMonth','Last\x20raw\x20event','now','Kein\x20API\x20Key!','response','flot.','platform','TRAIN_ENERGY','expire','system.isPresent','onStateChange','python_service','find','weatherunderground','genAI','Lernphase\x20(','map','üêç\x20Python\x20Pong','Anomaly\x20Detected','getLtmData','notifyEmailInstance','humidity','‚úÖ\x20Alles\x20OK\x20(Reset)','constructor','scanDevices','namespace','WiFi\x20Presence\x20detected.','‚ö†Ô∏è\x20Python\x20VENV\x20missing/broken.\x20Starting\x20MAINTENANCE\x20MODE...','eventHistory','setStateAsync','analysis.training.triggerSecurity','toLowerCase','generateContent','SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20','fenster','forEach','analysis.security.lastScore','Last\x20Check','state','subscribeStates','diagnosis','toISOString','stdin','systemConfig','isExit','üìû\x20R√ºckruf\x20anfordern','Error\x20launching\x20Python:\x20','set_temperature','getGenerativeModel','daswetter','kontakt','config','notifyTelegramEnabled','analysis.automation.triggerAction','analysis.trigger','Who\x20is\x20present?','ANALYZE_HEALTH','bewegung','analysis.analysisHistory','Thermodynamics','LTM.rawEventLog','actual_temperature','No\x20instance','Auto\x20Apply','analysis.automation.targetId','LTM\x20Sched\x20Error:\x20','from','analysis.automation.patternDetected','win32','sound','licht','some','TREND_RESULT','Scripts','Raw\x20Log','node-schedule','ltmJob','indicator','parse','channel','Digest','N/A','Alert\x20Reason','N/A\x20(Learning)','round','analysis.automation.description','analysis.training.triggerHealth','system','TRAINING_COMPLETE','communicate.request','alertReason','notifyTelegramRecipient','trim','Activity\x20Summary','slice','LTM','dailyDigests','616NWtYNp','üß™\x20Simulating\x20Butler\x20Proposal:\x20','extendObjectAsync','Description','generic','Installing\x20pip\x20packages...','text','simulateButler','python3','VACATION','analysis.health.trendDiagnosis','material.','livingContext','3282358KLMWEG','automationProposal','getEnums','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','text.alarm','system.presenceWho','ENERGY_TRAIN_RESULT','Anomaly\x20Score','08:00','briefingEnabled','vacation','enum','logDuplicates','button','analysis.training.triggerEnergy','brightness','Health\x20Analysis','analysis.security.lastCheck','schalter','\x0aSTB:\x20','notifyEmailEnabled','analysis.health','analysis.training','üìû\x20R√úCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20R√ºckruf-Button\x20gedr√ºckt.','0\x204\x20*\x20*\x20*','HEALTH_TRAIN_RESULT','activityLevel','inactivityThresholdHours','üö®\x20EMERGENCY','accuweather','Alert\x20Status','success','presenceDevices','send','description','[RESULT]','autoApply','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','city','PONG','‚ùå\x20INSTALL\x20FAILED:\x20','python','toString','analysis.activitySummary','LTM.driftAnalysis.driftDetails','notifyPushoverRecipient','targetposition','91595IAcdvL','stdout','targetId','getStateAsync','message','cancel','analysis.health.lastCheck','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','javascript.','name','details','existsSync','Gemini\x20Error:\x20','apply','common','telegram','19405510hRQwOI','Alarm','normal','getDate','pr√§senz','.\x20WETTER:\x20','shift','toLocaleTimeString','level','write','summary','t√ºr','SECURITY_RESULT','analysis.training.status','isEmergency','Activity-Level','systemUUID','power','[LOG]','length','29193DVmHvJ','replace','location','licenseKey','dimmer','getForeignStateAsync','warn','27wRwXJg','Unknown','setForeignStateAsync','endsWith','system.','notifyPushoverInstance','off','COGNI_CONFIRM_OK','values','AI\x20Training','unshift','analysis.automation.targetValue','LTM.triggerDailyDigest','BUTLER\x20Execution\x20Error:\x20','driftAnalysisTimer','bin','Sequences','python.exe','Gemini\x20Init\x20Error:\x20','search','briefingJob','analysis.energy','590780zqdfxC','Reset\x20Sched\x20Error:\x20','analysis.health.isAnomaly','Heating\x20Score','command','indexOf','vis.','scheduleJob','string','Fokus\x20auf\x20Komfort.','getFullYear','ltmDriftCheckIntervalHours','briefingTime','LTM.driftAnalysis.lastCheck','Train\x20Security','Analysiere\x20ausgewogen.','pythonProcess','.\x20ANWESEND:\x20','temperatur','analysis.alertReason','child_process','unload','Kein\x20API\x20Key.','Started...','requirements.txt','lampe','value','simple-api.','analysis.security','7331520XMTxrf','debug','geminiModel','Adapter','1466190dKixdT','analysisTimer','instance','(((.+)+)+)+$','boolean','\x22\x20install\x20--no-cache-dir\x20--force-reinstall\x20-r\x20\x22','TRAIN_SECURITY','KI-Modell\x20nicht\x20initialisiert','\x20Tage)','events.history_debug_00','motion','payload','useWeather','openweathermap','loc','filter','exitTimer','ANALYZE_SEQUENCE','LTM.baselineStatus','analysis.energy.insulationScore','val','online','analysis.health.trendValue','dependencyInstallInProgress','.\x20EMERGENCY:\x20','object','‚úÖ\x20INSTALL\x20SUCCESS.','retry','.Current.Temperature','fill','blind','stateChange','setpoint','cover','Keine\x20Details.','\x20=\x20','type','getForeignObjectsAsync','onUnload','Sec-Training\x20started...','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','triggerBriefing','presence','join','Gemini\x20AI\x20initialized.','stringify','service.py','LTM.trainingData.sequences','ack','Event\x20History','onMessage','baselineDrift','‚úÖ\x20HEALTH\x20TRAINED.','detected','info.','modeResetJob','Energy\x20Intelligence','position','longitude','split','events.history','Trigger\x20Action','path','triggerDailyDigest','ltmStbWindowDays','cogni-living','python3\x20-m\x20venv\x20\x22','NORMAL','Fokus\x20auf\x20Familienroutinen.','timestamp','Training\x20Status','15ONMiZU','temperature','analysis.isAlert','data','rmSync','startsWith','switch','Trigger\x20Briefing','substring','log','driftDetails','PRIORIT√ÑT:\x20Sicherheit.','isGracePeriodActive','rawEventLog','.\x20EVENTS:\x20','ready','history.','analysis.energy.heatingScore','exitGraceTimer','lastAlertState','LTM.trainingData.thermodynamics','includes','\x20->\x20','Insulation\x20Score','analysis.automation.autoApply','events.lastEvent','Failed','[PYTHON]\x20','Missing\x20data','onReady'];a0_0x1b9c=function(){return _0x88c8dc;};return a0_0x1b9c();}async function processSensorEvent(_0x5573dc,_0x1c1b37,_0x2d5eee,_0x28403b){const _0xe80316=a0_0x2b007b;if(!_0x28403b)return;const _0x1e3a23=_0x2d5eee[_0xe80316(0x295)],_0x24a418=Date[_0xe80316(0x333)](),_0x11352f=_0x5573dc['sensorLastValues'][_0x1c1b37];_0x5573dc[_0xe80316(0x32d)][_0x1c1b37]=_0x1e3a23;if(!_0x28403b[_0xe80316(0x1fc)]&&_0x11352f!=undefined&&_0x11352f==_0x1e3a23)return;const _0x31e526=(_0x28403b[_0xe80316(0x2a5)]||'')[_0xe80316(0x350)](),_0xddabdd=_0x31e526[_0xe80316(0x2dd)](_0xe80316(0x2c9))||_0x31e526['includes'](_0xe80316(0x272))||_0x31e526[_0xe80316(0x2dd)]('klima')||_0x31e526['includes'](_0xe80316(0x325));_0x5573dc[_0xe80316(0x305)]&&_0xddabdd&&recordThermodynamics(_0x5573dc,_0x1c1b37,_0x1e3a23,_0x28403b[_0xe80316(0x245)]);const _0x32b6fc={'timestamp':_0x24a418,'id':_0x1c1b37,'name':_0x28403b[_0xe80316(0x228)],'type':_0x28403b[_0xe80316(0x2a5)],'location':_0x28403b['location'],'value':_0x1e3a23};_0x5573dc[_0xe80316(0x34d)][_0xe80316(0x254)](_0x32b6fc);if(_0x5573dc[_0xe80316(0x34d)][_0xe80316(0x242)]>HISTORY_MAX_SIZE)_0x5573dc[_0xe80316(0x34d)][_0xe80316(0x2eb)]();await _0x5573dc[_0xe80316(0x34e)](_0xe80316(0x2e1),{'val':JSON[_0xe80316(0x2ae)](_0x32b6fc),'ack':!![]}),await _0x5573dc[_0xe80316(0x34e)]('events.history',{'val':JSON[_0xe80316(0x2ae)](_0x5573dc[_0xe80316(0x34d)]),'ack':!![]});_0x5573dc[_0xe80316(0x305)]&&(_0x5573dc['rawEventLog'][_0xe80316(0x2fe)](_0x32b6fc),await saveRawEventLog(_0x5573dc),recordSequence(_0x5573dc,_0x32b6fc));if(_0x28403b[_0xe80316(0x35d)]&&_0x1e3a23===!![]){if(_0x5573dc[_0xe80316(0x31e)]&&!_0x5573dc[_0xe80316(0x2d4)])startExitTimer(_0x5573dc);else{if(!_0x5573dc[_0xe80316(0x31e)])setPresence(_0x5573dc,!![]);}}else{if(_0x28403b[_0xe80316(0x2a5)]===_0xe80316(0x28b)&&_0x1e3a23===!![]){if(_0x5573dc[_0xe80316(0x291)])abortExitTimer(_0x5573dc);if(!_0x5573dc[_0xe80316(0x31e)]&&_0x5573dc[_0xe80316(0x30a)]===SYSTEM_MODES['NORMAL'])setPresence(_0x5573dc,!![]);}}}async function recordThermodynamics(_0x56a1c8,_0x41b037,_0xf2e354,_0x1daa79){const _0x38cb91=a0_0x2b007b,_0x19869d=await getOutsideTemperatureNumeric(_0x56a1c8),_0x257d2a=await _0x56a1c8['getStateAsync'](_0x38cb91(0x2dc));let _0x46145e=[];if(_0x257d2a&&_0x257d2a[_0x38cb91(0x295)])try{_0x46145e=JSON[_0x38cb91(0x37f)](_0x257d2a[_0x38cb91(0x295)]);}catch(_0x492f0b){}_0x46145e[_0x38cb91(0x2fe)]({'ts':Date['now'](),'room':_0x1daa79||_0x38cb91(0x24b),'t_in':_0xf2e354,'t_out':_0x19869d});if(_0x46145e[_0x38cb91(0x242)]>THERMO_LOG_SIZE)_0x46145e['shift']();await _0x56a1c8['setStateAsync'](_0x38cb91(0x2dc),{'val':JSON[_0x38cb91(0x2ae)](_0x46145e),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x2fd546){const _0x55719c=a0_0x2b007b;if(_0x2fd546[_0x55719c(0x364)]['outdoorSensorId'])try{const _0x5f5a33=await _0x2fd546['getForeignStateAsync'](_0x2fd546[_0x55719c(0x364)]['outdoorSensorId']);if(_0x5f5a33&&_0x5f5a33[_0x55719c(0x295)]!==undefined&&_0x5f5a33[_0x55719c(0x295)]!==null)return parseFloat(_0x5f5a33[_0x55719c(0x295)]);}catch(_0x336ece){}const _0x5e67a4=_0x2fd546[_0x55719c(0x364)]['weatherInstance'];if(!_0x2fd546['config'][_0x55719c(0x28d)]||!_0x5e67a4)return null;try{let _0x2d6f85='';if(_0x5e67a4[_0x55719c(0x2dd)](_0x55719c(0x20d)))_0x2d6f85=_0x5e67a4+_0x55719c(0x29d);else{if(_0x5e67a4[_0x55719c(0x2dd)](_0x55719c(0x362)))_0x2d6f85=_0x5e67a4+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x5e67a4[_0x55719c(0x2dd)](_0x55719c(0x28e)))_0x2d6f85=_0x5e67a4+'.forecast.current.temperature';else{if(_0x5e67a4['includes'](_0x55719c(0x33e)))_0x2d6f85=_0x5e67a4+'.forecast.current.temp';}}}if(_0x2d6f85){const _0x22ace6=await _0x2fd546[_0x55719c(0x248)](_0x2d6f85);if(_0x22ace6&&_0x22ace6[_0x55719c(0x295)]!==undefined&&_0x22ace6[_0x55719c(0x295)]!==null)return parseFloat(_0x22ace6[_0x55719c(0x295)]);}}catch(_0x56ade6){}return null;}async function recordSequence(_0x4d0689,_0x705476){const _0x173e7a=a0_0x2b007b,_0x199c65=(_0x705476['type']||'')[_0x173e7a(0x350)](),_0x4a0482=['motion',_0x173e7a(0x36a),_0x173e7a(0x233),_0x173e7a(0x2ab),'occupancy',_0x173e7a(0x308),_0x173e7a(0x23a),'window',_0x173e7a(0x353),'contact',_0x173e7a(0x363),_0x173e7a(0x2f6),_0x173e7a(0x377),_0x173e7a(0x2ce),_0x173e7a(0x202),_0x173e7a(0x247),_0x173e7a(0x279)];if(!_0x4a0482[_0x173e7a(0x378)](_0x20a281=>_0x199c65[_0x173e7a(0x2dd)](_0x20a281)))return;if(!_0x705476[_0x173e7a(0x27a)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x173e7a(0x2fe)]({'loc':_0x705476[_0x173e7a(0x245)]||_0x173e7a(0x24b),'id':_0x705476['id'],'ts':Date[_0x173e7a(0x333)]()}),sequenceTimer=setTimeout(async()=>{const _0x1309c0=_0x173e7a;if(activeSequence[_0x1309c0(0x242)]>0x1)await saveCompletedSequence(_0x4d0689);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x1a122d){const _0x3d47d2=a0_0x2b007b;try{const _0x42b52f=await _0x1a122d[_0x3d47d2(0x222)](_0x3d47d2(0x2b0));let _0x2cdaea=[];if(_0x42b52f&&_0x42b52f[_0x3d47d2(0x295)])try{_0x2cdaea=JSON[_0x3d47d2(0x37f)](_0x42b52f[_0x3d47d2(0x295)]);}catch(_0x2b2a1f){}const _0x12649e=activeSequence[0x0]['ts'],_0x547860=activeSequence[_0x3d47d2(0x341)](_0x2d0ace=>({'loc':_0x2d0ace[_0x3d47d2(0x28f)],'t_delta':Math[_0x3d47d2(0x385)]((_0x2d0ace['ts']-_0x12649e)/0x3e8)})),_0x5af459={'timestamp':new Date(_0x12649e)['toISOString'](),'steps':_0x547860,'duration':Math['round']((activeSequence[activeSequence['length']-0x1]['ts']-_0x12649e)/0x3e8),'daytime':new Date(_0x12649e)[_0x3d47d2(0x2e8)]()};_0x2cdaea[_0x3d47d2(0x2fe)](_0x5af459);if(_0x2cdaea[_0x3d47d2(0x242)]>MAX_TRAINING_SET_SIZE)_0x2cdaea[_0x3d47d2(0x235)]();await _0x1a122d[_0x3d47d2(0x34e)](_0x3d47d2(0x2b0),{'val':JSON[_0x3d47d2(0x2ae)](_0x2cdaea),'ack':!![]}),runSecurityCheck(_0x1a122d,_0x5af459);}catch(_0x20fdd5){_0x1a122d[_0x3d47d2(0x2d1)][_0x3d47d2(0x2fc)](_0x3d47d2(0x316)+_0x20fdd5[_0x3d47d2(0x223)]);}}function runSecurityCheck(_0x18fd6c,_0x4bd47b){const _0x445120=a0_0x2b007b;if(!_0x18fd6c[_0x445120(0x305)])return;sendToPython(_0x18fd6c,_0x445120(0x292),{'sequence':_0x4bd47b});}function sendToPython(_0xc4487,_0x24793f,_0x1410dc={}){const _0x41a1f5=a0_0x2b007b;if(!_0xc4487[_0x41a1f5(0x270)]||!_0xc4487[_0x41a1f5(0x270)][_0x41a1f5(0x35b)][_0x41a1f5(0x31f)])return;const _0x50cd3b=JSON[_0x41a1f5(0x2ae)]({'command':_0x24793f,..._0x1410dc});try{_0xc4487['pythonProcess']['stdin'][_0x41a1f5(0x238)](_0x50cd3b+'\x0a');}catch(_0x3fbfa6){}}function startPythonService(_0x39c114){const _0x6dffe2=a0_0x2b007b;let _0x1375b7=_0x6dffe2(0x39a);if(fs['existsSync'](PYTHON_EXE))_0x1375b7=PYTHON_EXE;try{const _0x33fd5b=path[_0x6dffe2(0x2ac)](__dirname,_0x6dffe2(0x33c),_0x6dffe2(0x2af));_0x39c114[_0x6dffe2(0x270)]=spawn(_0x1375b7,[_0x33fd5b]),_0x39c114[_0x6dffe2(0x270)][_0x6dffe2(0x220)]['on'](_0x6dffe2(0x2cb),_0x2c9b00=>{const _0x197699=_0x6dffe2,_0xb99a9c=_0x2c9b00['toString']()[_0x197699(0x2bc)]('\x0a');_0xb99a9c[_0x197699(0x354)](_0x1f109f=>{const _0x3a55b9=_0x197699,_0x1706da=_0x1f109f[_0x3a55b9(0x38d)]();if(!_0x1706da)return;if(_0x1706da['startsWith'](_0x3a55b9(0x241)))_0x39c114[_0x3a55b9(0x2d1)]['debug'](_0x3a55b9(0x2e3)+_0x1706da[_0x3a55b9(0x2d0)](0x5)['trim']());else{if(_0x1706da[_0x3a55b9(0x2cd)](_0x3a55b9(0x213)))try{const _0x12b5c8=JSON['parse'](_0x1706da[_0x3a55b9(0x2d0)](0x8)[_0x3a55b9(0x38d)]());handlePythonResult(_0x39c114,_0x12b5c8);}catch(_0x47d519){}}});}),_0x39c114[_0x6dffe2(0x270)]['on']('close',_0x230486=>{_0x39c114['pythonProcess']=null;});}catch(_0x5014bd){_0x39c114['log'][_0x6dffe2(0x2fc)](_0x6dffe2(0x35f)+_0x5014bd[_0x6dffe2(0x223)]);}}function stopPythonService(_0x2b4585){const _0x137a8f=a0_0x2b007b;if(_0x2b4585[_0x137a8f(0x270)]){try{_0x2b4585[_0x137a8f(0x270)]['kill']();}catch(_0x597c6a){}_0x2b4585[_0x137a8f(0x270)]=null;}}function handlePythonResult(_0xee941a,_0x25664b){const _0x490d66=a0_0x2b007b;if(_0x25664b[_0x490d66(0x2a5)]===_0x490d66(0x217))_0xee941a[_0x490d66(0x2d1)][_0x490d66(0x27e)](_0x490d66(0x342));else{if(_0x25664b[_0x490d66(0x2a5)]===_0x490d66(0x23b)){const {anomaly_score:_0x272db0,is_anomaly:_0x25c0ac,threshold:_0xf86a20}=_0x25664b[_0x490d66(0x28c)];_0xee941a['log']['info'](_0x490d66(0x226)+_0x272db0['toFixed'](0x5)+_0x490d66(0x2de)+(_0x25c0ac?'ANOMALY':'OK')),_0xee941a[_0x490d66(0x34e)](_0x490d66(0x355),{'val':_0x272db0,'ack':!![]}),_0xee941a[_0x490d66(0x34e)]('analysis.security.lastCheck',{'val':new Date()[_0x490d66(0x35a)](),'ack':!![]});_0xf86a20&&_0xee941a[_0x490d66(0x34e)]('analysis.security.currentThreshold',{'val':_0xf86a20,'ack':!![]});if(_0x25c0ac){const _0x182048=_0x490d66(0x2ff)+_0x272db0['toFixed'](0x4)+')';_0xee941a[_0x490d66(0x34e)](_0x490d66(0x2ca),{'val':!![],'ack':!![]}),_0xee941a[_0x490d66(0x34e)](_0x490d66(0x273),{'val':_0x182048,'ack':!![]}),sendNotification(_0xee941a,_0x490d66(0x2f7)+_0x182048,![],!![]);}}else{if(_0x25664b[_0x490d66(0x2a5)]===_0x490d66(0x389))_0xee941a['setStateAsync'](_0x490d66(0x23c),{'val':_0x25664b['payload']['success']?'Success:\x20'+new Date()[_0x490d66(0x236)]():_0x490d66(0x2e2),'ack':!![]});else{if(_0x25664b['type']===_0x490d66(0x1f6)){if(_0x25664b[_0x490d66(0x28c)][_0x490d66(0x20f)])try{const _0x4da21b=JSON[_0x490d66(0x37f)](_0x25664b[_0x490d66(0x28c)][_0x490d66(0x229)]);if(_0x4da21b[_0x490d66(0x30d)])_0xee941a[_0x490d66(0x34e)](_0x490d66(0x294),{'val':JSON[_0x490d66(0x2ae)](_0x4da21b[_0x490d66(0x30d)]),'ack':!![]});if(_0x4da21b[_0x490d66(0x300)])_0xee941a['setStateAsync']('analysis.energy.heatingScore',{'val':JSON[_0x490d66(0x2ae)](_0x4da21b[_0x490d66(0x300)]),'ack':!![]});}catch(_0x1e8941){}}else{if(_0x25664b['type']===_0x490d66(0x209)){if(_0x25664b['payload']['success'])_0xee941a[_0x490d66(0x2d1)][_0x490d66(0x306)](_0x490d66(0x2b5));}else{if(_0x25664b[_0x490d66(0x2a5)]==='HEALTH_RESULT')_0xee941a[_0x490d66(0x34e)](_0x490d66(0x225),{'val':new Date()['toISOString'](),'ack':!![]}),_0xee941a[_0x490d66(0x34e)](_0x490d66(0x262),{'val':_0x25664b[_0x490d66(0x28c)][_0x490d66(0x303)],'ack':!![]});else _0x25664b[_0x490d66(0x2a5)]===_0x490d66(0x379)&&(_0xee941a['setStateAsync'](_0x490d66(0x39c),{'val':_0x25664b['payload'][_0x490d66(0x359)],'ack':!![]}),_0xee941a[_0x490d66(0x34e)](_0x490d66(0x297),{'val':_0x25664b[_0x490d66(0x28c)]['change_percent'],'ack':!![]}));}}}}}}function runPythonHealthCheck(_0x244a0f){const _0xf6d540=a0_0x2b007b;if(!_0x244a0f['dailyDigests']||_0x244a0f[_0xf6d540(0x391)][_0xf6d540(0x242)]<0x2)return;const _0x4e2388=_0x244a0f[_0xf6d540(0x391)][_0xf6d540(0x341)](_0x55008a=>{const _0x5b744f=_0xf6d540,_0x528141=(_0x55008a[_0x5b744f(0x20a)]||'')[_0x5b744f(0x350)]();return ACTIVITY_LEVEL_MAP[_0x528141]||0x32;});sendToPython(_0x244a0f,'ANALYZE_TREND',{'values':_0x4e2388,'tag':_0xf6d540(0x23e)});}async function handleTelegramResponse(_0x434aaf,_0x244cdf){const _0xd057ec=a0_0x2b007b;let _0x313f93=_0x244cdf;_0x244cdf[_0xd057ec(0x2cd)]('[')&&(_0x313f93=_0x244cdf['substring'](_0x244cdf[_0xd057ec(0x265)](']')+0x1));if(_0x313f93==='COGNI_CONFIRM_OK')await _0x434aaf[_0xd057ec(0x34e)](_0xd057ec(0x2ca),{'val':![],'ack':!![]}),await _0x434aaf[_0xd057ec(0x34e)](_0xd057ec(0x273),{'val':'Vom\x20Benutzer\x20best√§tigt\x20(OK).','ack':!![]}),_0x434aaf[_0xd057ec(0x2db)]=![],sendNotification(_0x434aaf,'‚úÖ\x20Alarm\x20quittiert.\x20System\x20normal.',![]);else _0x313f93===_0xd057ec(0x310)&&sendNotification(_0x434aaf,_0xd057ec(0x207),![],!![]);}async function sendNotification(_0x2b02d2,_0x365ab8,_0x2fe504=![],_0xd99cf6=![]){const _0x2cb260=a0_0x2b007b,_0x2b4a0b=_0x2b02d2[_0x2cb260(0x364)];if(_0x2b4a0b[_0x2cb260(0x365)]){let _0x128bd8={};(_0x365ab8[_0x2cb260(0x2dd)](_0x2cb260(0x230))||_0xd99cf6)&&(_0x128bd8={'reply_markup':{'inline_keyboard':[[{'text':_0x2cb260(0x347),'callback_data':_0x2cb260(0x251)}],[{'text':_0x2cb260(0x35e),'callback_data':_0x2cb260(0x310)}]]}}),await _0x2b02d2['sendToAsync'](_0x2b4a0b['notifyTelegramInstance'],_0x2cb260(0x211),{'text':_0x365ab8,'user':_0x2b4a0b[_0x2cb260(0x38c)],..._0x128bd8});}if(_0x2b4a0b[_0x2cb260(0x31a)]){let _0x49826c={'message':_0x365ab8,'title':_0xd99cf6?_0x2cb260(0x20c):'Cogni-Living','priority':_0xd99cf6?0x2:0x1,'device':_0x2b4a0b[_0x2cb260(0x21d)]};_0xd99cf6&&(_0x49826c[_0x2cb260(0x29c)]=0x1e,_0x49826c[_0x2cb260(0x339)]=0xe10,_0x49826c[_0x2cb260(0x376)]='siren'),await _0x2b02d2[_0x2cb260(0x311)](_0x2b4a0b[_0x2cb260(0x24f)],_0x2cb260(0x211),_0x49826c);}_0x2b4a0b[_0x2cb260(0x204)]&&await _0x2b02d2['sendToAsync'](_0x2b4a0b[_0x2cb260(0x345)],'send',{'text':_0x365ab8,'to':_0x2b4a0b['notifyEmailRecipient']});}async function runGeminiAnalysis(_0x102ebc,_0x5b3219=''){const _0x4b5c09=a0_0x2b007b;if(!_0x102ebc[_0x4b5c09(0x27f)])return;if(_0x102ebc['eventHistory'][_0x4b5c09(0x242)]===0x0)return;const _0x3b4fae=_0x102ebc[_0x4b5c09(0x34d)][_0x4b5c09(0x38f)](0x0,0xf),_0x2bc2a4=await getWeatherContext(_0x102ebc),_0x515ff5=_0x102ebc[_0x4b5c09(0x30a)],_0x19cc03=PERSONA_MAPPING[_0x102ebc[_0x4b5c09(0x364)][_0x4b5c09(0x304)]||_0x4b5c09(0x396)],_0x4d5e9c=_0x102ebc[_0x4b5c09(0x364)][_0x4b5c09(0x39e)]||_0x4b5c09(0x2a3);let _0x4ecf63=_0x4b5c09(0x2ed);try{const _0x30d5bd=await _0x102ebc['getStateAsync'](_0x4b5c09(0x1f5));if(_0x30d5bd&&_0x30d5bd['val'])_0x4ecf63=_0x30d5bd[_0x4b5c09(0x295)];}catch(_0x50dd5f){}let _0x3d46a4=![];try{const _0x213ec4=await _0x102ebc['getStateAsync'](_0x4b5c09(0x2e0));if(_0x213ec4&&_0x213ec4['val'])_0x3d46a4=!![];}catch(_0x2b4a32){}const _0x9d6b5c='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x19cc03+'.\x20KONTEXT:\x20'+_0x4d5e9c+'.\x20SYSTEM_MODE:\x20'+_0x515ff5+_0x4b5c09(0x234)+_0x2bc2a4+_0x4b5c09(0x271)+_0x4ecf63+_0x4b5c09(0x2d6)+JSON[_0x4b5c09(0x2ae)](_0x3b4fae)+_0x4b5c09(0x299)+_0x5b3219+_0x4b5c09(0x2a9);try{const _0x31371a=await _0x102ebc['geminiModel'][_0x4b5c09(0x351)](_0x9d6b5c),_0x4dfed9=JSON[_0x4b5c09(0x37f)](_0x31371a[_0x4b5c09(0x335)]['text']()[_0x4b5c09(0x244)](/```json|```/g,'')[_0x4b5c09(0x38d)]());await _0x102ebc[_0x4b5c09(0x34e)](_0x4b5c09(0x2f3),{'val':JSON['stringify'](_0x4dfed9),'ack':!![]});if(_0x4dfed9[_0x4b5c09(0x239)])await _0x102ebc['setStateAsync']('analysis.activitySummary',{'val':_0x4dfed9[_0x4b5c09(0x239)],'ack':!![]});const _0x42b22c={'timestamp':Date['now'](),'id':Date[_0x4b5c09(0x333)]()[_0x4b5c09(0x21a)](),'analysis':{'activity':{'summary':_0x4dfed9['summary'],'isAlert':_0x4dfed9[_0x4b5c09(0x309)],'alertReason':_0x4dfed9[_0x4b5c09(0x38b)]},'comfort':{'automationProposal':_0x4dfed9[_0x4b5c09(0x3a0)]}}};await updateAnalysisHistory(_0x102ebc,_0x42b22c);const _0x2d08dd=_0x4dfed9[_0x4b5c09(0x309)]||![];_0x2d08dd!==_0x102ebc['lastAlertState']&&(await _0x102ebc[_0x4b5c09(0x34e)](_0x4b5c09(0x2ca),{'val':_0x2d08dd,'ack':!![]}),_0x102ebc[_0x4b5c09(0x2db)]=_0x2d08dd,_0x2d08dd&&(await _0x102ebc[_0x4b5c09(0x34e)](_0x4b5c09(0x273),{'val':_0x4dfed9[_0x4b5c09(0x38b)],'ack':!![]}),sendNotification(_0x102ebc,'‚ö†Ô∏è\x20ALARM:\x20'+_0x4dfed9[_0x4b5c09(0x38b)],![],_0x4dfed9[_0x4b5c09(0x23d)])));if(_0x4dfed9[_0x4b5c09(0x3a0)]&&_0x4dfed9[_0x4b5c09(0x3a0)][_0x4b5c09(0x2b6)]){await _0x102ebc[_0x4b5c09(0x34e)](_0x4b5c09(0x374),{'val':!![],'ack':!![]}),await _0x102ebc[_0x4b5c09(0x34e)](_0x4b5c09(0x386),{'val':_0x4dfed9[_0x4b5c09(0x3a0)][_0x4b5c09(0x212)],'ack':!![]}),await _0x102ebc[_0x4b5c09(0x34e)](_0x4b5c09(0x371),{'val':_0x4dfed9['automationProposal'][_0x4b5c09(0x221)],'ack':!![]}),await _0x102ebc[_0x4b5c09(0x34e)](_0x4b5c09(0x255),{'val':JSON['stringify'](_0x4dfed9[_0x4b5c09(0x3a0)]['targetValue']),'ack':!![]});if(_0x3d46a4)executeAutomationAction(_0x102ebc);}}catch(_0x16ae0a){_0x102ebc[_0x4b5c09(0x2d1)]['error'](_0x4b5c09(0x22b)+_0x16ae0a[_0x4b5c09(0x223)]);}}async function createDailyDigest(_0x3384c4){const _0x5ef79f=a0_0x2b007b;if(!_0x3384c4['isProVersion'])return;await _0x3384c4[_0x5ef79f(0x34e)](LTM_DP_STATUS,{'val':_0x5ef79f(0x277),'ack':!![]});if(!_0x3384c4[_0x5ef79f(0x27f)]||_0x3384c4[_0x5ef79f(0x2d5)][_0x5ef79f(0x242)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x3384c4[_0x5ef79f(0x34e)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x1fc18a=JSON['parse'](JSON[_0x5ef79f(0x2ae)](_0x3384c4[_0x5ef79f(0x2d5)])),_0xe70dd8=_0x1fc18a['length'],_0x24c141=_0x5ef79f(0x3a2)+JSON[_0x5ef79f(0x2ae)](_0x1fc18a);try{const _0xaf5c25=await _0x3384c4[_0x5ef79f(0x27f)][_0x5ef79f(0x351)](_0x24c141),_0x553f5c=JSON[_0x5ef79f(0x37f)](_0xaf5c25[_0x5ef79f(0x335)]['text']()[_0x5ef79f(0x244)](/```json|```/g,'')['trim']()),_0x30f122={'timestamp':new Date()['toISOString'](),'eventCount':_0xe70dd8,'summary':_0x553f5c[_0x5ef79f(0x239)]||_0x5ef79f(0x381),'activityLevel':_0x553f5c[_0x5ef79f(0x20a)]||'normal','systemMode':_0x3384c4[_0x5ef79f(0x30a)]};_0x3384c4[_0x5ef79f(0x391)]['push'](_0x30f122),await saveDailyDigests(_0x3384c4),_0x3384c4[_0x5ef79f(0x2d5)]=[],await saveRawEventLog(_0x3384c4),await _0x3384c4[_0x5ef79f(0x34e)](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x3384c4[_0x5ef79f(0x305)])sendToPython(_0x3384c4,_0x5ef79f(0x369),{'digest':_0x30f122});}catch(_0x4274c4){_0x3384c4[_0x5ef79f(0x2d1)][_0x5ef79f(0x2fc)](_0x4274c4[_0x5ef79f(0x223)]);}}function setupLtmScheduler(_0x3f1718){const _0x3c5a1c=a0_0x2b007b;try{if(_0x3f1718[_0x3c5a1c(0x37d)])_0x3f1718[_0x3c5a1c(0x37d)]['cancel']();if(!_0x3f1718['isProVersion'])return;_0x3f1718[_0x3c5a1c(0x37d)]=schedule[_0x3c5a1c(0x267)](LTM_SCHEDULE,()=>createDailyDigest(_0x3f1718));}catch(_0x20ee2d){_0x3f1718[_0x3c5a1c(0x2d1)][_0x3c5a1c(0x2fc)](_0x3c5a1c(0x372)+_0x20ee2d[_0x3c5a1c(0x223)]);}}function setupModeResetScheduler(_0x2b6c27){const _0x5aa6db=a0_0x2b007b;try{if(_0x2b6c27['modeResetJob'])_0x2b6c27[_0x5aa6db(0x2b8)][_0x5aa6db(0x224)]();_0x2b6c27[_0x5aa6db(0x2b8)]=schedule[_0x5aa6db(0x267)](MODE_RESET_SCHEDULE,async()=>{const _0x2d51df=_0x5aa6db;await loadSystemMode(_0x2b6c27),AUTO_RESET_MODES[_0x2d51df(0x2dd)](_0x2b6c27[_0x2d51df(0x30a)])&&await _0x2b6c27['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x2d51df(0x2c4)],'ack':![]});});}catch(_0x17f5c3){_0x2b6c27[_0x5aa6db(0x2d1)][_0x5aa6db(0x2fc)](_0x5aa6db(0x261)+_0x17f5c3[_0x5aa6db(0x223)]);}}function setupDriftAnalysisScheduler(_0x29da6c){const _0x24f52b=a0_0x2b007b;try{if(_0x29da6c[_0x24f52b(0x258)])clearInterval(_0x29da6c[_0x24f52b(0x258)]);if(!_0x29da6c[_0x24f52b(0x305)])return;_0x29da6c[_0x24f52b(0x258)]=setInterval(()=>runBaselineDriftAnalysis(_0x29da6c),(_0x29da6c[_0x24f52b(0x364)][_0x24f52b(0x26b)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x29da6c),0x1388);}catch(_0x1aa9b6){_0x29da6c[_0x24f52b(0x2d1)]['error'](_0x24f52b(0x2e6)+_0x1aa9b6[_0x24f52b(0x223)]);}}function setupBriefingScheduler(_0x1b020e){const _0x4c8845=a0_0x2b007b;try{if(_0x1b020e[_0x4c8845(0x25e)])_0x1b020e[_0x4c8845(0x25e)][_0x4c8845(0x224)]();if(!_0x1b020e[_0x4c8845(0x364)][_0x4c8845(0x1f9)])return;const _0x36f28a=(_0x1b020e[_0x4c8845(0x364)][_0x4c8845(0x26c)]||_0x4c8845(0x1f8))[_0x4c8845(0x2bc)](':'),_0x59a0f3=parseInt(_0x36f28a[0x0])||0x8,_0xb6be58=parseInt(_0x36f28a[0x1])||0x0,_0x47425a=_0xb6be58+'\x20'+_0x59a0f3+'\x20*\x20*\x20*';_0x1b020e['briefingJob']=schedule['scheduleJob'](_0x47425a,()=>{sendMorningBriefing(_0x1b020e);});}catch(_0x252511){_0x1b020e[_0x4c8845(0x2d1)][_0x4c8845(0x2fc)]('Briefing\x20Sched\x20Error:\x20'+_0x252511[_0x4c8845(0x223)]);}}async function runBaselineDriftAnalysis(_0x3e90f9){const _0xd27da6=a0_0x2b007b;if(!_0x3e90f9[_0xd27da6(0x305)]||!_0x3e90f9['geminiModel'])return;const _0x4098bc=_0x3e90f9['config'][_0xd27da6(0x2c1)]||0xe;if(_0x3e90f9[_0xd27da6(0x391)][_0xd27da6(0x242)]<_0x4098bc+0x7){await _0x3e90f9['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0xd27da6(0x384),'ack':!![]});return;}const _0x1372be=_0x3e90f9['dailyDigests']['slice'](-_0x4098bc),_0x37a079=_0x3e90f9[_0xd27da6(0x391)]['slice'](0x0,_0x3e90f9['dailyDigests'][_0xd27da6(0x242)]-_0x4098bc),_0x45d520=_0xd27da6(0x324)+JSON[_0xd27da6(0x2ae)](_0x37a079)+_0xd27da6(0x203)+JSON[_0xd27da6(0x2ae)](_0x1372be);try{const _0xaeef78=await _0x3e90f9[_0xd27da6(0x27f)][_0xd27da6(0x351)](_0x45d520),_0x17da24=JSON[_0xd27da6(0x37f)](_0xaeef78[_0xd27da6(0x335)]['text']()[_0xd27da6(0x244)](/```json|```/g,'')['trim']());_0x17da24[_0xd27da6(0x2b4)]&&(await _0x3e90f9[_0xd27da6(0x34e)](LTM_DP_DRIFT_STATUS,{'val':_0x17da24['baselineDrift'],'ack':!![]}),await _0x3e90f9['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0x17da24[_0xd27da6(0x2d2)],'ack':!![]}),await _0x3e90f9[_0xd27da6(0x34e)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0xd27da6(0x333)](),'ack':!![]}));}catch(_0x563e50){}}class CogniLiving extends utils[a0_0x2b007b(0x280)]{constructor(_0x31ea83){const _0x2ecc45=a0_0x2b007b;super({..._0x31ea83,'name':_0x2ecc45(0x2c2)}),this[_0x2ecc45(0x34d)]=[],this['analysisHistory']=[],this[_0x2ecc45(0x2d5)]=[],this[_0x2ecc45(0x391)]=[],this[_0x2ecc45(0x32d)]={},this[_0x2ecc45(0x35c)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x2ecc45(0x31e)]=!![],this[_0x2ecc45(0x291)]=null,this[_0x2ecc45(0x2da)]=null,this[_0x2ecc45(0x2d4)]=![],this[_0x2ecc45(0x33f)]=null,this[_0x2ecc45(0x27f)]=null,this[_0x2ecc45(0x30a)]=SYSTEM_MODES[_0x2ecc45(0x2c4)],this[_0x2ecc45(0x305)]=![],this[_0x2ecc45(0x2db)]=![],this[_0x2ecc45(0x23f)]='unknown',this[_0x2ecc45(0x282)]=null,this['ltmJob']=null,this[_0x2ecc45(0x2b8)]=null,this[_0x2ecc45(0x258)]=null,this[_0x2ecc45(0x25e)]=null,this['pythonProcess']=null,this['dependencyInstallInProgress']=![],this['on'](_0x2ecc45(0x2d7),this[_0x2ecc45(0x2e5)][_0x2ecc45(0x318)](this)),this['on'](_0x2ecc45(0x2a0),this[_0x2ecc45(0x33b)][_0x2ecc45(0x318)](this)),this['on'](_0x2ecc45(0x275),this[_0x2ecc45(0x2a7)][_0x2ecc45(0x318)](this)),this['on'](_0x2ecc45(0x223),this[_0x2ecc45(0x2b3)][_0x2ecc45(0x318)](this));}async[a0_0x2b007b(0x2e5)](){const _0x46aa8d=a0_0x2b007b;this[_0x46aa8d(0x2d1)]['info'](_0x46aa8d(0x319)+this[_0x46aa8d(0x2ee)]+')\x20-\x20SAFE\x20BOOT');if(!checkAndInstall(this))return;await startSystem(this);}[a0_0x2b007b(0x2a7)](_0x54b7ba){const _0x5d5f69=a0_0x2b007b;if(this[_0x5d5f69(0x282)])clearInterval(this[_0x5d5f69(0x282)]);if(this[_0x5d5f69(0x258)])clearInterval(this[_0x5d5f69(0x258)]);if(this[_0x5d5f69(0x37d)])this[_0x5d5f69(0x37d)]['cancel']();if(this[_0x5d5f69(0x2b8)])this[_0x5d5f69(0x2b8)][_0x5d5f69(0x224)]();if(this[_0x5d5f69(0x25e)])this[_0x5d5f69(0x25e)][_0x5d5f69(0x224)]();if(this[_0x5d5f69(0x291)])clearTimeout(this[_0x5d5f69(0x291)]);if(this[_0x5d5f69(0x2da)])clearTimeout(this['exitGraceTimer']);stopPythonService(this),_0x54b7ba();}async[a0_0x2b007b(0x33b)](_0x52e2f8,_0x1cb0db){const _0x3d574d=a0_0x2b007b;if(!_0x1cb0db||this[_0x3d574d(0x298)])return;if(_0x52e2f8[_0x3d574d(0x2dd)](_0x3d574d(0x22e))&&_0x52e2f8[_0x3d574d(0x24d)](_0x3d574d(0x38a))&&_0x1cb0db[_0x3d574d(0x295)]){await handleTelegramResponse(this,_0x1cb0db['val']);return;}if(_0x52e2f8===this[_0x3d574d(0x34a)]+'.'+SYSTEM_DP_MODE){if(_0x1cb0db[_0x3d574d(0x295)]&&Object[_0x3d574d(0x252)](SYSTEM_MODES)['includes'](_0x1cb0db[_0x3d574d(0x295)])){this[_0x3d574d(0x30a)]=_0x1cb0db[_0x3d574d(0x295)];if(_0x1cb0db[_0x3d574d(0x295)]===SYSTEM_MODES[_0x3d574d(0x39b)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x1cb0db[_0x3d574d(0x2b1)])this['setState'](_0x52e2f8,{'val':this[_0x3d574d(0x30a)],'ack':!![]});return;}if(!_0x1cb0db[_0x3d574d(0x2b1)]){_0x52e2f8[_0x3d574d(0x2dd)]('analysis.trigger')&&_0x1cb0db['val']&&(this[_0x3d574d(0x2e9)](_0x52e2f8,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x52e2f8[_0x3d574d(0x2dd)](_0x3d574d(0x2c0))&&_0x1cb0db['val']){this[_0x3d574d(0x2e9)](_0x52e2f8,{'val':![],'ack':!![]});if(this['isProVersion'])createDailyDigest(this);}_0x52e2f8['includes'](_0x3d574d(0x2aa))&&_0x1cb0db[_0x3d574d(0x295)]&&(this['setState'](_0x52e2f8,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x52e2f8[_0x3d574d(0x2dd)]('automation.triggerAction')&&_0x1cb0db[_0x3d574d(0x295)]&&(this[_0x3d574d(0x2e9)](_0x52e2f8,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x52e2f8[_0x3d574d(0x2dd)](_0x3d574d(0x34f))&&_0x1cb0db[_0x3d574d(0x295)]){this['setState'](_0x52e2f8,{'val':![],'ack':!![]});if(this[_0x3d574d(0x305)])try{const _0x2a63e5=await this[_0x3d574d(0x222)](_0x3d574d(0x2b0));if(_0x2a63e5&&_0x2a63e5[_0x3d574d(0x295)]){const _0x56c4c9=JSON[_0x3d574d(0x37f)](_0x2a63e5[_0x3d574d(0x295)]);this[_0x3d574d(0x2d1)]['info'](_0x3d574d(0x327)),this[_0x3d574d(0x34e)](_0x3d574d(0x23c),{'val':_0x3d574d(0x2a8),'ack':!![]}),sendToPython(this,_0x3d574d(0x287),{'sequences':_0x56c4c9});}}catch(_0x18d733){this[_0x3d574d(0x2d1)][_0x3d574d(0x2fc)](_0x3d574d(0x32a)+_0x18d733[_0x3d574d(0x223)]);}}if(_0x52e2f8[_0x3d574d(0x2dd)]('analysis.training.triggerHealth')&&_0x1cb0db['val']){this['setState'](_0x52e2f8,{'val':![],'ack':!![]});if(this[_0x3d574d(0x305)])try{const _0x215192=await this[_0x3d574d(0x222)](LTM_DP_DAILY_DIGESTS);if(_0x215192&&_0x215192['val'])sendToPython(this,_0x3d574d(0x2f9),{'digests':JSON[_0x3d574d(0x37f)](_0x215192['val'])});}catch(_0x5059eb){}}if(_0x52e2f8[_0x3d574d(0x2dd)](_0x3d574d(0x1fe))&&_0x1cb0db['val']){this[_0x3d574d(0x2e9)](_0x52e2f8,{'val':![],'ack':!![]});if(this[_0x3d574d(0x305)])try{const _0x4c80b9=await this[_0x3d574d(0x222)]('LTM.trainingData.thermodynamics');if(_0x4c80b9&&_0x4c80b9[_0x3d574d(0x295)])sendToPython(this,_0x3d574d(0x338),{'points':JSON[_0x3d574d(0x37f)](_0x4c80b9[_0x3d574d(0x295)])});}catch(_0x17d1e1){}}return;}if(this[_0x3d574d(0x364)][_0x3d574d(0x210)]&&this[_0x3d574d(0x364)][_0x3d574d(0x210)][_0x3d574d(0x2dd)](_0x52e2f8)){await checkWifiPresence(this);return;}const _0x57d592=(this[_0x3d574d(0x364)][_0x3d574d(0x302)]||[])[_0x3d574d(0x33d)](_0x338253=>_0x338253['id']===_0x52e2f8);if(_0x57d592)processSensorEvent(this,_0x52e2f8,_0x1cb0db,_0x57d592);}async['onMessage'](_0x9b7029){const _0x23200d=a0_0x2b007b;if(typeof _0x9b7029===_0x23200d(0x29a)&&_0x9b7029[_0x23200d(0x223)]){if(_0x9b7029['command']===_0x23200d(0x2ec)){const _0x25a02b=_0x9b7029[_0x23200d(0x223)][_0x23200d(0x312)]||this[_0x23200d(0x364)][_0x23200d(0x32f)];if(!_0x25a02b)return this[_0x23200d(0x32b)](_0x9b7029[_0x23200d(0x373)],_0x9b7029['command'],{'success':![],'message':_0x23200d(0x276)},_0x9b7029[_0x23200d(0x330)]);try{const _0xc0a832=new GoogleGenerativeAI(_0x25a02b),_0x257e93=_0xc0a832[_0x23200d(0x361)]({'model':GEMINI_MODEL}),_0x2ee909=await _0x257e93['generateContent']('Hi');this[_0x23200d(0x32b)](_0x9b7029[_0x23200d(0x373)],_0x9b7029['command'],{'success':!![],'message':'OK:\x20'+_0x2ee909[_0x23200d(0x335)][_0x23200d(0x398)]()},_0x9b7029['callback']);}catch(_0x401587){this[_0x23200d(0x32b)](_0x9b7029[_0x23200d(0x373)],_0x9b7029[_0x23200d(0x264)],{'success':![],'message':_0x23200d(0x2fd)+_0x401587[_0x23200d(0x223)]},_0x9b7029[_0x23200d(0x330)]);}}else{if(_0x9b7029[_0x23200d(0x264)]===_0x23200d(0x2fa)){const _0x2aed20=await getWeatherContext(this),_0x1a9a52=await getCalendarContext(this);this[_0x23200d(0x32b)](_0x9b7029['from'],_0x9b7029[_0x23200d(0x264)],{'success':!![],'weather':_0x2aed20,'calendar':_0x1a9a52},_0x9b7029['callback']);}else{if(_0x9b7029[_0x23200d(0x264)]===_0x23200d(0x344)){if(!this[_0x23200d(0x305)])return this[_0x23200d(0x32b)](_0x9b7029['from'],_0x9b7029[_0x23200d(0x264)],{'success':![],'isPro':![]},_0x9b7029[_0x23200d(0x330)]);let _0x11cdc2={'status':'N/A'};try{const _0x441c22=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x11cdc2[_0x23200d(0x301)]=_0x441c22?_0x441c22[_0x23200d(0x295)]:_0x23200d(0x382);}catch(_0x20de49){}this[_0x23200d(0x32b)](_0x9b7029['from'],_0x9b7029['command'],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x11cdc2,'analysisHistory':this['analysisHistory']},_0x9b7029[_0x23200d(0x330)]);}else{if(_0x9b7029[_0x23200d(0x264)]===_0x23200d(0x326)){const _0x1117ac=this[_0x23200d(0x391)]['length'],_0x52c030=new Date(),_0x5031e0=new Date(_0x52c030[_0x23200d(0x26a)](),_0x52c030[_0x23200d(0x331)](),_0x52c030[_0x23200d(0x232)]())[_0x23200d(0x31b)](),_0x4a3252=this['rawEventLog'][_0x23200d(0x290)](_0x12de7b=>new Date(_0x12de7b['timestamp'])['getTime']()>_0x5031e0)[_0x23200d(0x242)],_0x3ac4c8=new Array(0x18)[_0x23200d(0x29e)](0x0);this[_0x23200d(0x2d5)][_0x23200d(0x354)](_0x4d67a1=>{const _0x4d28fd=_0x23200d,_0x1d7408=new Date(_0x4d67a1[_0x4d28fd(0x2c6)]);if(_0x1d7408[_0x4d28fd(0x31b)]()>_0x5031e0)_0x3ac4c8[_0x1d7408[_0x4d28fd(0x2e8)]()]++;});let _0x122269={'status':'N/A'};try{const _0x4b5d65=await this[_0x23200d(0x222)](LTM_DP_DRIFT_STATUS);_0x122269['status']=_0x4b5d65?_0x4b5d65[_0x23200d(0x295)]:_0x23200d(0x382);}catch(_0x4ca955){}let _0x239404='';try{const _0x18c9fd=await this['getStateAsync']('system.presenceWho');_0x239404=_0x18c9fd?_0x18c9fd[_0x23200d(0x295)]:'';}catch(_0x39c500){}let _0x29d208=null;!this[_0x23200d(0x27f)]&&(_0x29d208=this[_0x23200d(0x364)][_0x23200d(0x32f)]?_0x23200d(0x288):_0x23200d(0x334));let _0x5c2873={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x43c4aa=await this[_0x23200d(0x222)](_0x23200d(0x374));if(_0x43c4aa&&_0x43c4aa[_0x23200d(0x295)]){_0x5c2873[_0x23200d(0x2b6)]=!![];const _0x4dedad=await this[_0x23200d(0x222)]('analysis.automation.description');_0x5c2873[_0x23200d(0x212)]=_0x4dedad?_0x4dedad[_0x23200d(0x295)]:'';const _0x40964f=await this[_0x23200d(0x222)](_0x23200d(0x371));_0x5c2873[_0x23200d(0x221)]=_0x40964f?_0x40964f[_0x23200d(0x295)]:'';const _0x1ad869=await this[_0x23200d(0x222)](_0x23200d(0x255));_0x5c2873['targetValue']=_0x1ad869?_0x1ad869['val']:'';}const _0x418623=await this[_0x23200d(0x222)](_0x23200d(0x2e0));_0x5c2873[_0x23200d(0x214)]=_0x418623?!!_0x418623[_0x23200d(0x295)]:![];}catch(_0x59d8c6){}this['sendTo'](_0x9b7029['from'],_0x9b7029['command'],{'success':!![],'eventHistory':this['eventHistory'][_0x23200d(0x38f)](0x0,0xf),'stats':{'digestCount':_0x1117ac,'eventCountToday':_0x4a3252,'hourlyActivity':_0x3ac4c8,'driftStatus':_0x122269[_0x23200d(0x301)],'isPresent':this[_0x23200d(0x31e)],'presenceWho':_0x239404,'minDays':this[_0x23200d(0x364)]['minDaysForBaseline']||0x7,'stbDays':this[_0x23200d(0x364)][_0x23200d(0x2c1)]||0xe,'ltbDays':this[_0x23200d(0x364)]['ltmLtbWindowDays']||0x3c,'systemError':_0x29d208},'automation':_0x5c2873},_0x9b7029[_0x23200d(0x330)]);}else{if(_0x9b7029[_0x23200d(0x264)]===_0x23200d(0x349))try{const _0x370834=await scanForDevices(this,_0x9b7029[_0x23200d(0x223)]||{});this[_0x23200d(0x32b)](_0x9b7029['from'],_0x9b7029[_0x23200d(0x264)],{'success':!![],'devices':_0x370834},_0x9b7029[_0x23200d(0x330)]);}catch(_0x44a566){this[_0x23200d(0x32b)](_0x9b7029[_0x23200d(0x373)],_0x9b7029['command'],{'success':![],'error':_0x44a566[_0x23200d(0x223)]},_0x9b7029[_0x23200d(0x330)]);}else{if(_0x9b7029[_0x23200d(0x264)]===_0x23200d(0x3a1)){const _0x2e2100=await this[_0x23200d(0x2a6)](_0x23200d(0x322),_0x23200d(0x1fb)),_0x15bc2e=[];if(_0x2e2100)for(const _0x2486a0 in _0x2e2100){const _0x512599=_0x2e2100[_0x2486a0],_0x5a8ad4=(_0x512599[_0x23200d(0x22d)]&&typeof _0x512599[_0x23200d(0x22d)][_0x23200d(0x228)]===_0x23200d(0x29a)?_0x512599[_0x23200d(0x22d)][_0x23200d(0x228)]['de']:_0x512599['common']['name'])||_0x512599[_0x23200d(0x22d)][_0x23200d(0x228)];_0x15bc2e[_0x23200d(0x2fe)]({'id':_0x2486a0,'name':_0x5a8ad4});}this[_0x23200d(0x32b)](_0x9b7029[_0x23200d(0x373)],_0x9b7029[_0x23200d(0x264)],{'success':!![],'enums':_0x15bc2e},_0x9b7029[_0x23200d(0x330)]);}else{if(_0x9b7029[_0x23200d(0x264)]===_0x23200d(0x323)){const _0x112714=_0x9b7029[_0x23200d(0x223)][_0x23200d(0x283)];if(!_0x112714)return this['sendTo'](_0x9b7029[_0x23200d(0x373)],_0x9b7029[_0x23200d(0x264)],{'success':![],'error':_0x23200d(0x36f)},_0x9b7029[_0x23200d(0x330)]);const _0x2958a8=await getCalendarNames(this,_0x112714);this[_0x23200d(0x32b)](_0x9b7029[_0x23200d(0x373)],_0x9b7029[_0x23200d(0x264)],{'success':!![],'names':_0x2958a8},_0x9b7029[_0x23200d(0x330)]);}else{if(_0x9b7029[_0x23200d(0x264)]===_0x23200d(0x399)){const {targetId:_0x2b484b,targetValue:_0x3cfb6b}=_0x9b7029['message'];this['log']['info'](_0x23200d(0x393)+_0x2b484b+_0x23200d(0x2a4)+_0x3cfb6b),await this[_0x23200d(0x34e)](_0x23200d(0x374),{'val':!![],'ack':!![]}),await this[_0x23200d(0x34e)](_0x23200d(0x386),{'val':_0x23200d(0x352)+_0x2b484b,'ack':!![]}),await this[_0x23200d(0x34e)](_0x23200d(0x371),{'val':_0x2b484b,'ack':!![]}),await this[_0x23200d(0x34e)](_0x23200d(0x255),{'val':_0x3cfb6b,'ack':!![]}),this['sendTo'](_0x9b7029[_0x23200d(0x373)],_0x9b7029['command'],{'success':!![]},_0x9b7029[_0x23200d(0x330)]);}else{if(_0x9b7029[_0x23200d(0x264)]==='submitFeedback'){const {historyId:_0x1eeefe,rating:_0x583163,comment:_0x3848d7,alertReason:_0x8589eb}=_0x9b7029[_0x23200d(0x223)];_0x1eeefe&&_0x583163?(await saveFeedback(this,{'timestamp':Date[_0x23200d(0x333)](),'historyId':_0x1eeefe,'rating':_0x583163,'comment':_0x3848d7,'alertReason':_0x8589eb}),this['sendTo'](_0x9b7029['from'],_0x9b7029[_0x23200d(0x264)],{'success':!![]},_0x9b7029[_0x23200d(0x330)])):this[_0x23200d(0x32b)](_0x9b7029[_0x23200d(0x373)],_0x9b7029[_0x23200d(0x264)],{'success':![],'error':_0x23200d(0x2e4)},_0x9b7029[_0x23200d(0x330)]);}else _0x9b7029[_0x23200d(0x264)]==='dismissAutomation'&&(this[_0x23200d(0x2d1)][_0x23200d(0x306)]('User\x20dismissed\x20automation\x20proposal.'),await this[_0x23200d(0x34e)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),await this[_0x23200d(0x34e)](_0x23200d(0x386),{'val':'','ack':!![]}),this[_0x23200d(0x32b)](_0x9b7029[_0x23200d(0x373)],_0x9b7029[_0x23200d(0x264)],{'success':!![]},_0x9b7029[_0x23200d(0x330)]));}}}}}}}}}}}if(require['main']!==module)module[a0_0x2b007b(0x317)]=_0x34c0f8=>new CogniLiving(_0x34c0f8);else new CogniLiving();