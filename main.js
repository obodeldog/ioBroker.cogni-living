const a0_0x55499d=a0_0x2b75;function a0_0x2b75(_0x4a9d42,_0x11f2c8){const _0x22288b=a0_0x5ca3();return a0_0x2b75=function(_0x52649e,_0xeb074b){_0x52649e=_0x52649e-0x1eb;let _0x5ca304=_0x22288b[_0x52649e];return _0x5ca304;},a0_0x2b75(_0x4a9d42,_0x11f2c8);}(function(_0x4dc980,_0x3d0be6){const _0x3fcdf6=a0_0x2b75,_0x4a5dec=_0x4dc980();while(!![]){try{const _0x2bf30a=parseInt(_0x3fcdf6(0x246))/0x1*(-parseInt(_0x3fcdf6(0x22d))/0x2)+-parseInt(_0x3fcdf6(0x24f))/0x3+parseInt(_0x3fcdf6(0x29c))/0x4*(-parseInt(_0x3fcdf6(0x39d))/0x5)+-parseInt(_0x3fcdf6(0x307))/0x6+parseInt(_0x3fcdf6(0x249))/0x7*(parseInt(_0x3fcdf6(0x20a))/0x8)+parseInt(_0x3fcdf6(0x25b))/0x9*(parseInt(_0x3fcdf6(0x339))/0xa)+parseInt(_0x3fcdf6(0x2bf))/0xb;if(_0x2bf30a===_0x3d0be6)break;else _0x4a5dec['push'](_0x4a5dec['shift']());}catch(_0xef569){_0x4a5dec['push'](_0x4a5dec['shift']());}}}(a0_0x5ca3,0x51061));const a0_0xeb074b=(function(){let _0x190625=!![];return function(_0x1f9668,_0x3ce446){const _0x3d01ef=_0x190625?function(){if(_0x3ce446){const _0x2f3740=_0x3ce446['apply'](_0x1f9668,arguments);return _0x3ce446=null,_0x2f3740;}}:function(){};return _0x190625=![],_0x3d01ef;};}()),a0_0x52649e=a0_0xeb074b(this,function(){const _0x439a0f=a0_0x2b75;return a0_0x52649e[_0x439a0f(0x32e)]()[_0x439a0f(0x3b3)](_0x439a0f(0x284))[_0x439a0f(0x32e)]()['constructor'](a0_0x52649e)['search'](_0x439a0f(0x284));});a0_0x52649e();'use strict';const utils=require(a0_0x55499d(0x264)),{GoogleGenerativeAI}=require(a0_0x55499d(0x1f8)),schedule=require(a0_0x55499d(0x3b4)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x55499d(0x28e),LTM_SCHEDULE=a0_0x55499d(0x32f),MODE_RESET_SCHEDULE=a0_0x55499d(0x2ae),ANALYSIS_HISTORY_MAX_SIZE=0x64,LTM_DP_RAW_LOG=a0_0x55499d(0x2bb),LTM_DP_DAILY_DIGESTS=a0_0x55499d(0x21d),LTM_DP_STATUS=a0_0x55499d(0x297),LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS='LTM.baselineStatus',LTM_DP_DRIFT_CHANNEL=a0_0x55499d(0x272),LTM_DP_DRIFT_STATUS=a0_0x55499d(0x2e8),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x55499d(0x2aa),SYSTEM_DP_MODE='system.mode',HARD_IGNORE_TERMS=[a0_0x55499d(0x394),a0_0x55499d(0x2f2),a0_0x55499d(0x27b),a0_0x55499d(0x291),a0_0x55499d(0x2fc),a0_0x55499d(0x295),a0_0x55499d(0x398),a0_0x55499d(0x26b),a0_0x55499d(0x200),a0_0x55499d(0x214),'working',a0_0x55499d(0x37d),a0_0x55499d(0x350),a0_0x55499d(0x381),'dutycycle',a0_0x55499d(0x21c),'reachable',a0_0x55499d(0x312)],BAD_NAMES=[a0_0x55499d(0x397),a0_0x55499d(0x340),a0_0x55499d(0x38a),a0_0x55499d(0x392),'value','brightness','on',a0_0x55499d(0x29b),a0_0x55499d(0x2b1),a0_0x55499d(0x33f),a0_0x55499d(0x2f9),'blind',a0_0x55499d(0x2da),a0_0x55499d(0x31e),a0_0x55499d(0x277),a0_0x55499d(0x324),a0_0x55499d(0x363),a0_0x55499d(0x2d6),'humidity',a0_0x55499d(0x2a3),a0_0x55499d(0x2b4),a0_0x55499d(0x27c),a0_0x55499d(0x2be),a0_0x55499d(0x395),a0_0x55499d(0x32c)],ADAPTER_BLACKLIST=[a0_0x55499d(0x2c5),'admin.','info.',a0_0x55499d(0x2cf),a0_0x55499d(0x33a),a0_0x55499d(0x2eb),'icons-mfd.',a0_0x55499d(0x29a),a0_0x55499d(0x24a),a0_0x55499d(0x20f),a0_0x55499d(0x25e)],SYSTEM_MODES={'NORMAL':a0_0x55499d(0x308),'VACATION':'vacation','PARTY':a0_0x55499d(0x230),'GUEST':'guest'},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x55499d(0x1eb)],SYSTEM_MODES[a0_0x55499d(0x316)]],PERSONA_MAPPING={'generic':a0_0x55499d(0x323),'senior_aal':a0_0x55499d(0x247),'family':a0_0x55499d(0x34a),'single_comfort':a0_0x55499d(0x224),'security':a0_0x55499d(0x357)};class CogniLiving extends utils[a0_0x55499d(0x22a)]{constructor(_0x35fe20){const _0x3fe14d=a0_0x55499d;super({..._0x35fe20,'name':'cogni-living'}),this['eventHistory']=[],this[_0x3fe14d(0x299)]=[],this['feedbackHistory']=[],this[_0x3fe14d(0x220)]=[],this['dailyDigests']=[],this[_0x3fe14d(0x2e1)]={},this[_0x3fe14d(0x243)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x3fe14d(0x39e)]=!![],this['exitTimer']=null,this[_0x3fe14d(0x23c)]=null,this[_0x3fe14d(0x1f3)]=![],this[_0x3fe14d(0x216)]=null,this[_0x3fe14d(0x2e7)]=null,this['currentSystemMode']=SYSTEM_MODES[_0x3fe14d(0x329)],this[_0x3fe14d(0x3a7)]=![],this[_0x3fe14d(0x2f5)]=![],this[_0x3fe14d(0x206)]=_0x3fe14d(0x293),this[_0x3fe14d(0x294)]=null,this[_0x3fe14d(0x231)]=null,this[_0x3fe14d(0x2ba)]=null,this[_0x3fe14d(0x20b)]=null,this[_0x3fe14d(0x225)]=null,this['on'](_0x3fe14d(0x26a),this['onReady'][_0x3fe14d(0x23b)](this)),this['on'](_0x3fe14d(0x305),this[_0x3fe14d(0x32a)]['bind'](this)),this['on'](_0x3fe14d(0x334),this[_0x3fe14d(0x325)][_0x3fe14d(0x23b)](this)),this['on'](_0x3fe14d(0x353),this[_0x3fe14d(0x271)][_0x3fe14d(0x23b)](this));}async[a0_0x55499d(0x2de)](){const _0x45d8dc=a0_0x55499d;this[_0x45d8dc(0x2a5)][_0x45d8dc(0x300)](_0x45d8dc(0x1fd)+this[_0x45d8dc(0x38b)]+_0x45d8dc(0x266)),await initZombies(this),this['config'][_0x45d8dc(0x28a)]=this[_0x45d8dc(0x25c)][_0x45d8dc(0x28a)]||'';try{this[_0x45d8dc(0x3a7)]=await checkLicense(this,this[_0x45d8dc(0x25c)]['licenseKey']);}catch(_0x583fb7){}if(!this[_0x45d8dc(0x25c)][_0x45d8dc(0x3ac)]||this['config'][_0x45d8dc(0x3ac)]<0.1)this[_0x45d8dc(0x25c)][_0x45d8dc(0x3ac)]=0xc;await initHistory(this),await initSystemConfig(this);if(this[_0x45d8dc(0x25c)][_0x45d8dc(0x393)])try{this[_0x45d8dc(0x216)]=new GoogleGenerativeAI(this[_0x45d8dc(0x25c)]['geminiApiKey']),this[_0x45d8dc(0x2e7)]=this[_0x45d8dc(0x216)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this['log'][_0x45d8dc(0x300)](_0x45d8dc(0x344));}catch(_0x19b019){this[_0x45d8dc(0x2a5)][_0x45d8dc(0x200)](_0x45d8dc(0x1fe)+_0x19b019[_0x45d8dc(0x353)]);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this['subscribeStates'](_0x45d8dc(0x2c7)),this[_0x45d8dc(0x252)](LTM_DP_TRIGGER_DIGEST),this[_0x45d8dc(0x252)]('system.mode'),this['subscribeStates'](_0x45d8dc(0x377)),this['subscribeStates'](_0x45d8dc(0x31d)),this['subscribeStates']('analysis.automation.autoApply'),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this);if(this[_0x45d8dc(0x294)])clearInterval(this[_0x45d8dc(0x294)]);const _0x53bd3e=this['config'][_0x45d8dc(0x35d)]||0xf;_0x53bd3e>0x0&&(this['log'][_0x45d8dc(0x300)](_0x45d8dc(0x28b)+_0x53bd3e+_0x45d8dc(0x374)),this[_0x45d8dc(0x294)]=setInterval(()=>{runAutopilot(this);},_0x53bd3e*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this);}['onUnload'](_0x16a69b){const _0x3765f6=a0_0x55499d;if(this[_0x3765f6(0x294)])clearInterval(this[_0x3765f6(0x294)]);if(this[_0x3765f6(0x20b)])clearInterval(this[_0x3765f6(0x20b)]);if(this['ltmJob'])this[_0x3765f6(0x231)]['cancel']();if(this[_0x3765f6(0x2ba)])this[_0x3765f6(0x2ba)]['cancel']();if(this[_0x3765f6(0x225)])this[_0x3765f6(0x225)][_0x3765f6(0x2d8)]();if(this[_0x3765f6(0x39c)])clearTimeout(this[_0x3765f6(0x39c)]);if(this['exitGraceTimer'])clearTimeout(this[_0x3765f6(0x23c)]);_0x16a69b();}async[a0_0x55499d(0x32a)](_0x25dc2f,_0x43a000){const _0x248586=a0_0x55499d;if(!_0x43a000)return;if(_0x25dc2f[_0x248586(0x1ec)]('telegram')&&_0x25dc2f[_0x248586(0x221)](_0x248586(0x368))&&_0x43a000[_0x248586(0x35f)]){await handleTelegramResponse(this,_0x43a000[_0x248586(0x35f)]);return;}if(_0x25dc2f===this[_0x248586(0x37c)]+'.'+SYSTEM_DP_MODE){_0x43a000[_0x248586(0x35f)]&&Object[_0x248586(0x2b6)](SYSTEM_MODES)[_0x248586(0x1ec)](_0x43a000[_0x248586(0x35f)])&&(this['currentSystemMode']=_0x43a000['val'],_0x43a000[_0x248586(0x35f)]===SYSTEM_MODES[_0x248586(0x28d)]?await setPresence(this,![]):await setPresence(this,!![]));if(!_0x43a000[_0x248586(0x36a)])this['setState'](_0x25dc2f,{'val':this[_0x248586(0x3ad)],'ack':!![]});return;}if(!_0x43a000['ack']){_0x25dc2f[_0x248586(0x1ec)](_0x248586(0x2c7))&&_0x43a000[_0x248586(0x35f)]&&(this['setState'](_0x25dc2f,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x25dc2f['includes']('triggerDailyDigest')&&_0x43a000['val']){this[_0x248586(0x331)](_0x25dc2f,{'val':![],'ack':!![]});if(this[_0x248586(0x3a7)])createDailyDigest(this);}_0x25dc2f[_0x248586(0x1ec)](_0x248586(0x1ef))&&_0x43a000[_0x248586(0x35f)]&&(this[_0x248586(0x331)](_0x25dc2f,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x25dc2f[_0x248586(0x1ec)]('automation.triggerAction')&&_0x43a000[_0x248586(0x35f)]&&(this[_0x248586(0x331)](_0x25dc2f,{'val':![],'ack':!![]}),executeAutomationAction(this));return;}if(this[_0x248586(0x25c)][_0x248586(0x34d)]&&this[_0x248586(0x25c)]['presenceDevices'][_0x248586(0x1ec)](_0x25dc2f)){await checkWifiPresence(this);return;}const _0x47f096=(this[_0x248586(0x25c)][_0x248586(0x28f)]||[])[_0x248586(0x23d)](_0x397da9=>_0x397da9['id']===_0x25dc2f);if(_0x47f096)processSensorEvent(this,_0x25dc2f,_0x43a000,_0x47f096);}async[a0_0x55499d(0x271)](_0x1fd233){const _0x1d6d2f=a0_0x55499d;if(typeof _0x1fd233===_0x1d6d2f(0x20c)&&_0x1fd233['message'])try{if(_0x1fd233[_0x1d6d2f(0x22c)]==='testApiKey'){if(!_0x1fd233[_0x1d6d2f(0x353)][_0x1d6d2f(0x2e9)])return this[_0x1d6d2f(0x269)](_0x1fd233['from'],_0x1fd233[_0x1d6d2f(0x22c)],{'success':![],'message':_0x1d6d2f(0x31c)},_0x1fd233['callback']);try{const _0x20cafb=new GoogleGenerativeAI(_0x1fd233[_0x1d6d2f(0x353)]['apiKey'])[_0x1d6d2f(0x208)]({'model':_0x1d6d2f(0x28e)});await _0x20cafb[_0x1d6d2f(0x251)](_0x1d6d2f(0x2fb)),this[_0x1d6d2f(0x269)](_0x1fd233[_0x1d6d2f(0x26e)],_0x1fd233['command'],{'success':!![],'message':_0x1d6d2f(0x301)},_0x1fd233[_0x1d6d2f(0x3ab)]);}catch(_0x5b7ea9){this[_0x1d6d2f(0x269)](_0x1fd233[_0x1d6d2f(0x26e)],_0x1fd233['command'],{'success':![],'message':_0x5b7ea9[_0x1d6d2f(0x353)]},_0x1fd233[_0x1d6d2f(0x3ab)]);}}else{if(_0x1fd233['command']===_0x1d6d2f(0x285)){const _0x4125bd=await sendNotification(this,_0x1d6d2f(0x219),!![],!![]);this['sendTo'](_0x1fd233[_0x1d6d2f(0x26e)],_0x1fd233['command'],{'success':_0x4125bd>0x0,'message':_0x4125bd+_0x1d6d2f(0x35a)},_0x1fd233['callback']);}else{if(_0x1fd233[_0x1d6d2f(0x22c)]===_0x1d6d2f(0x2ca)){if(!this[_0x1d6d2f(0x3a7)])return this[_0x1d6d2f(0x269)](_0x1fd233[_0x1d6d2f(0x26e)],_0x1fd233[_0x1d6d2f(0x22c)],{'success':![],'isPro':![]},_0x1fd233[_0x1d6d2f(0x3ab)]);let _0x130fff={'status':_0x1d6d2f(0x32b),'details':'','lastCheck':0x0};try{_0x130fff[_0x1d6d2f(0x31e)]=(await this['getStateAsync'](LTM_DP_DRIFT_STATUS))['val'],_0x130fff['details']=(await this[_0x1d6d2f(0x229)](LTM_DP_DRIFT_DETAILS))[_0x1d6d2f(0x35f)],_0x130fff[_0x1d6d2f(0x276)]=(await this['getStateAsync'](LTM_DP_DRIFT_LAST_CHECK))[_0x1d6d2f(0x35f)];}catch(_0x42eb55){}const _0x9e28ba=this[_0x1d6d2f(0x299)]||[];this[_0x1d6d2f(0x269)](_0x1fd233[_0x1d6d2f(0x26e)],_0x1fd233[_0x1d6d2f(0x22c)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x1d6d2f(0x30a)],'driftAnalysis':_0x130fff,'analysisHistory':_0x9e28ba},_0x1fd233['callback']);}else{if(_0x1fd233[_0x1d6d2f(0x22c)]===_0x1d6d2f(0x37b)){const _0x3ad5f9=this[_0x1d6d2f(0x30a)][_0x1d6d2f(0x355)],_0x550885=this[_0x1d6d2f(0x2b2)][_0x1d6d2f(0x213)](_0xc0a512=>_0xc0a512[_0x1d6d2f(0x21a)]>new Date()[_0x1d6d2f(0x226)](0x0,0x0,0x0,0x0))[_0x1d6d2f(0x355)];let _0x212c60={'status':'N/A'};try{_0x212c60[_0x1d6d2f(0x31e)]=(await this['getStateAsync'](LTM_DP_DRIFT_STATUS))[_0x1d6d2f(0x35f)];}catch(_0x1cff5d){}let _0x3b6e11='';try{const _0x43791b=await this[_0x1d6d2f(0x229)](_0x1d6d2f(0x262));_0x3b6e11=_0x43791b?_0x43791b[_0x1d6d2f(0x35f)]:'';}catch(_0x31102b){}let _0x3c31cd=null;!this[_0x1d6d2f(0x2e7)]&&(_0x3c31cd=this['config'][_0x1d6d2f(0x393)]?_0x1d6d2f(0x389):'Kein\x20API\x20Key!');let _0x11ca82={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x327d17=await this[_0x1d6d2f(0x229)]('analysis.automation.patternDetected'),_0x4ed13f=await this['getStateAsync'](_0x1d6d2f(0x327)),_0x43600b=await this[_0x1d6d2f(0x229)](_0x1d6d2f(0x2ce)),_0x120f62=await this[_0x1d6d2f(0x229)](_0x1d6d2f(0x20d)),_0x4618b7=await this['getStateAsync'](_0x1d6d2f(0x351));_0x327d17&&_0x327d17[_0x1d6d2f(0x35f)]&&(_0x11ca82[_0x1d6d2f(0x37a)]=!![],_0x11ca82['description']=_0x4ed13f?_0x4ed13f[_0x1d6d2f(0x35f)]:'',_0x11ca82[_0x1d6d2f(0x35c)]=_0x43600b?_0x43600b[_0x1d6d2f(0x35f)]:'',_0x11ca82[_0x1d6d2f(0x2d2)]=_0x120f62?_0x120f62[_0x1d6d2f(0x35f)]:''),_0x11ca82[_0x1d6d2f(0x270)]=_0x4618b7?!!_0x4618b7[_0x1d6d2f(0x35f)]:![];}catch(_0x2bef73){}this[_0x1d6d2f(0x269)](_0x1fd233[_0x1d6d2f(0x26e)],_0x1fd233['command'],{'success':!![],'eventHistory':this[_0x1d6d2f(0x2b2)][_0x1d6d2f(0x2ec)](0x0,0xf),'stats':{'digestCount':_0x3ad5f9,'eventCountToday':_0x550885,'driftStatus':_0x212c60['status'],'isPresent':this[_0x1d6d2f(0x39e)],'presenceWho':_0x3b6e11,'minDays':this['config'][_0x1d6d2f(0x23f)]||0x7,'stbDays':this[_0x1d6d2f(0x25c)][_0x1d6d2f(0x273)]||0xe,'ltbDays':this[_0x1d6d2f(0x25c)][_0x1d6d2f(0x2ee)]||0x3c,'systemError':_0x3c31cd},'automation':_0x11ca82},_0x1fd233[_0x1d6d2f(0x3ab)]);}else{if(_0x1fd233[_0x1d6d2f(0x22c)]==='getEnums'){const _0x501c9a=await this[_0x1d6d2f(0x309)]('enum.functions.*',_0x1d6d2f(0x25f)),_0x4cfd4b=[];if(_0x501c9a)for(const _0x465532 in _0x501c9a){const _0x1f6291=_0x501c9a[_0x465532],_0x3d2705=(_0x1f6291['common']&&typeof _0x1f6291[_0x1d6d2f(0x204)][_0x1d6d2f(0x375)]===_0x1d6d2f(0x20c)?_0x1f6291[_0x1d6d2f(0x204)][_0x1d6d2f(0x375)]['de']:_0x1f6291['common']['name'])||_0x1f6291[_0x1d6d2f(0x204)][_0x1d6d2f(0x375)];_0x4cfd4b[_0x1d6d2f(0x2c1)]({'id':_0x465532,'name':_0x3d2705});}this[_0x1d6d2f(0x269)](_0x1fd233['from'],_0x1fd233['command'],{'success':!![],'enums':_0x4cfd4b},_0x1fd233[_0x1d6d2f(0x3ab)]);}else{if(_0x1fd233[_0x1d6d2f(0x22c)]===_0x1d6d2f(0x2bd))try{const _0x106f36=await scanForDevices(this,_0x1fd233[_0x1d6d2f(0x353)]||{});this[_0x1d6d2f(0x269)](_0x1fd233['from'],_0x1fd233[_0x1d6d2f(0x22c)],{'success':!![],'devices':_0x106f36},_0x1fd233['callback']);}catch(_0xcbe130){this[_0x1d6d2f(0x269)](_0x1fd233['from'],_0x1fd233[_0x1d6d2f(0x22c)],{'success':![],'error':_0xcbe130['message']},_0x1fd233['callback']);}else{if(_0x1fd233[_0x1d6d2f(0x22c)]===_0x1d6d2f(0x380)){const _0x3c5c9b=_0x1fd233[_0x1d6d2f(0x353)]['instance'];if(!_0x3c5c9b)return this[_0x1d6d2f(0x269)](_0x1fd233['from'],_0x1fd233[_0x1d6d2f(0x22c)],{'success':![],'error':_0x1d6d2f(0x2c0)},_0x1fd233['callback']);const _0x31b6a4=await getCalendarNames(this,_0x3c5c9b);this[_0x1d6d2f(0x269)](_0x1fd233[_0x1d6d2f(0x26e)],_0x1fd233[_0x1d6d2f(0x22c)],{'success':!![],'names':_0x31b6a4},_0x1fd233[_0x1d6d2f(0x3ab)]);}else{if(_0x1fd233['command']===_0x1d6d2f(0x2b8)){const {targetId:_0x3a14d1,targetValue:_0x7d0e45}=_0x1fd233[_0x1d6d2f(0x353)];this['log']['info'](_0x1d6d2f(0x244)+_0x3a14d1+_0x1d6d2f(0x26d)+_0x7d0e45),await this[_0x1d6d2f(0x341)](_0x1d6d2f(0x1ff),{'val':!![],'ack':!![]}),await this[_0x1d6d2f(0x341)](_0x1d6d2f(0x327),{'val':_0x1d6d2f(0x296)+_0x3a14d1,'ack':!![]}),await this['setStateAsync'](_0x1d6d2f(0x2ce),{'val':_0x3a14d1,'ack':!![]}),await this['setStateAsync']('analysis.automation.targetValue',{'val':_0x7d0e45,'ack':!![]}),this[_0x1d6d2f(0x269)](_0x1fd233[_0x1d6d2f(0x26e)],_0x1fd233['command'],{'success':!![]},_0x1fd233['callback']);}else{if(_0x1fd233[_0x1d6d2f(0x22c)]===_0x1d6d2f(0x33e)){const {historyId:_0x305cb4,rating:_0x2c13c6,comment:_0x2455c4,alertReason:_0x2ab0d5}=_0x1fd233['message'];_0x305cb4&&_0x2c13c6?(await saveFeedback(this,{'timestamp':Date[_0x1d6d2f(0x33c)](),'historyId':_0x305cb4,'rating':_0x2c13c6,'comment':_0x2455c4,'alertReason':_0x2ab0d5}),this[_0x1d6d2f(0x269)](_0x1fd233[_0x1d6d2f(0x26e)],_0x1fd233['command'],{'success':!![]},_0x1fd233[_0x1d6d2f(0x3ab)])):this[_0x1d6d2f(0x269)](_0x1fd233[_0x1d6d2f(0x26e)],_0x1fd233[_0x1d6d2f(0x22c)],{'success':![],'error':_0x1d6d2f(0x3af)},_0x1fd233[_0x1d6d2f(0x3ab)]);}else _0x1fd233[_0x1d6d2f(0x22c)]===_0x1d6d2f(0x3ae)&&(this[_0x1d6d2f(0x2a5)][_0x1d6d2f(0x300)](_0x1d6d2f(0x2ea)),await this['setStateAsync'](_0x1d6d2f(0x1ff),{'val':![],'ack':!![]}),await this[_0x1d6d2f(0x341)](_0x1d6d2f(0x327),{'val':'','ack':!![]}),this[_0x1d6d2f(0x269)](_0x1fd233[_0x1d6d2f(0x26e)],_0x1fd233[_0x1d6d2f(0x22c)],{'success':!![]},_0x1fd233['callback']));}}}}}}}}}catch(_0x4bf0e7){this[_0x1d6d2f(0x2a5)]['error'](_0x1d6d2f(0x223)+_0x1fd233[_0x1d6d2f(0x22c)]+':\x20'+_0x4bf0e7['message']);if(_0x1fd233[_0x1d6d2f(0x3ab)])this[_0x1d6d2f(0x269)](_0x1fd233[_0x1d6d2f(0x26e)],_0x1fd233[_0x1d6d2f(0x22c)],{'success':![],'error':_0x4bf0e7[_0x1d6d2f(0x353)]},_0x1fd233[_0x1d6d2f(0x3ab)]);}}}async function initZombies(_0xd3379a){const _0x4ca7de=a0_0x55499d;try{const _0x5a9554=[_0x4ca7de(0x37e),_0x4ca7de(0x256)];for(const _0xa66437 of _0x5a9554){try{const _0x403e57=await _0xd3379a[_0x4ca7de(0x27e)](_0xa66437);_0x403e57&&await _0xd3379a[_0x4ca7de(0x260)](_0xa66437);}catch(_0x5bab76){}}}catch(_0x987f80){}}async function initHistory(_0x44ed71){const _0x4f6c02=a0_0x55499d;try{const _0x54400e=await _0x44ed71[_0x4f6c02(0x229)](_0x4f6c02(0x2a2));_0x54400e&&_0x54400e[_0x4f6c02(0x35f)]&&(_0x44ed71[_0x4f6c02(0x2b2)]=JSON['parse'](_0x54400e['val'][_0x4f6c02(0x32e)]()));}catch(_0x374527){_0x44ed71[_0x4f6c02(0x2b2)]=[];}try{const _0x539854=await _0x44ed71[_0x4f6c02(0x229)]('analysis.analysisHistory');if(_0x539854&&_0x539854[_0x4f6c02(0x35f)])_0x44ed71['analysisHistory']=JSON['parse'](_0x539854[_0x4f6c02(0x35f)][_0x4f6c02(0x32e)]());}catch(_0x7872d2){_0x44ed71[_0x4f6c02(0x299)]=[];}}async function initSystemConfig(_0x2a04e2){const _0x1ba45b=a0_0x55499d;try{const _0x6bdf4c=await _0x2a04e2[_0x1ba45b(0x328)](_0x1ba45b(0x347));_0x6bdf4c&&_0x6bdf4c['common']&&(_0x2a04e2[_0x1ba45b(0x243)]={'latitude':_0x6bdf4c[_0x1ba45b(0x204)][_0x1ba45b(0x20e)]||0x0,'longitude':_0x6bdf4c[_0x1ba45b(0x204)][_0x1ba45b(0x283)]||0x0,'city':_0x6bdf4c[_0x1ba45b(0x204)]['city']||''});}catch(_0x560a1e){}}async function checkLicense(_0x156aa4,_0x2264cb){const _0x2327f6=a0_0x55499d;if(!_0x2264cb)return![];_0x156aa4[_0x2327f6(0x206)]=await getSystemUUID(_0x156aa4);if(_0x2264cb==='TEST-PRO-KEY'||_0x2264cb[_0x2327f6(0x253)](_0x2327f6(0x267)))return!![];return![];}async function getSystemUUID(_0x3e42f5){const _0x381c47=a0_0x55499d;try{const _0xb0553c=await _0x3e42f5[_0x381c47(0x328)](_0x381c47(0x22f));if(_0xb0553c&&_0xb0553c[_0x381c47(0x30b)]&&_0xb0553c[_0x381c47(0x30b)][_0x381c47(0x1f1)])return _0xb0553c[_0x381c47(0x30b)][_0x381c47(0x1f1)];return _0x381c47(0x2d7);}catch(_0x210179){return _0x381c47(0x3a3);}}async function createAllObjects(_0x132e81){const _0x7cd4ca=a0_0x55499d;await checkSystemObjects(_0x132e81),await _0x132e81[_0x7cd4ca(0x274)](_0x7cd4ca(0x262),{'type':_0x7cd4ca(0x38a),'common':{'name':_0x7cd4ca(0x242),'type':_0x7cd4ca(0x2d4),'role':_0x7cd4ca(0x38f),'read':!![],'write':![],'def':''},'native':{}}),await _0x132e81[_0x7cd4ca(0x274)](_0x7cd4ca(0x311),{'type':_0x7cd4ca(0x38a),'common':{'name':'Last\x20raw\x20event','type':_0x7cd4ca(0x2d4),'role':_0x7cd4ca(0x2c9),'read':!![],'write':![]},'native':{}}),await _0x132e81[_0x7cd4ca(0x274)]('events.history',{'type':_0x7cd4ca(0x38a),'common':{'name':_0x7cd4ca(0x250),'type':'string','role':_0x7cd4ca(0x2c9),'read':!![],'write':![]},'native':{}}),await _0x132e81['setObjectNotExistsAsync']('analysis.trigger',{'type':'state','common':{'name':_0x7cd4ca(0x239),'type':_0x7cd4ca(0x2a0),'role':_0x7cd4ca(0x2a7),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x132e81['setObjectNotExistsAsync'](_0x7cd4ca(0x377),{'type':_0x7cd4ca(0x38a),'common':{'name':_0x7cd4ca(0x36d),'type':_0x7cd4ca(0x2a0),'role':_0x7cd4ca(0x2a7),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x132e81[_0x7cd4ca(0x274)](_0x7cd4ca(0x30e),{'type':'state','common':{'name':_0x7cd4ca(0x289),'type':'string','role':_0x7cd4ca(0x2c9),'read':!![],'write':![]},'native':{}}),await _0x132e81[_0x7cd4ca(0x274)](_0x7cd4ca(0x227),{'type':'state','common':{'name':_0x7cd4ca(0x384),'type':'boolean','role':_0x7cd4ca(0x30d),'read':!![],'write':![],'def':![]},'native':{}}),await _0x132e81['setObjectNotExistsAsync'](_0x7cd4ca(0x2c3),{'type':_0x7cd4ca(0x38a),'common':{'name':_0x7cd4ca(0x306),'type':_0x7cd4ca(0x2a0),'role':_0x7cd4ca(0x21f),'read':!![],'write':![],'def':![]},'native':{}}),await _0x132e81[_0x7cd4ca(0x274)](_0x7cd4ca(0x3a1),{'type':_0x7cd4ca(0x38a),'common':{'name':_0x7cd4ca(0x2a8),'type':'string','role':_0x7cd4ca(0x258),'read':!![],'write':![]},'native':{}}),await _0x132e81[_0x7cd4ca(0x274)](_0x7cd4ca(0x218),{'type':'state','common':{'name':_0x7cd4ca(0x367),'type':_0x7cd4ca(0x2d4),'role':_0x7cd4ca(0x38f),'read':!![],'write':![]},'native':{}}),await _0x132e81[_0x7cd4ca(0x274)](_0x7cd4ca(0x38e),{'type':_0x7cd4ca(0x38a),'common':{'name':_0x7cd4ca(0x302),'type':_0x7cd4ca(0x2d4),'role':_0x7cd4ca(0x38a),'read':!![],'write':![],'def':_0x7cd4ca(0x32b)},'native':{}}),await _0x132e81[_0x7cd4ca(0x274)](_0x7cd4ca(0x2dc),{'type':_0x7cd4ca(0x38a),'common':{'name':_0x7cd4ca(0x32d),'type':_0x7cd4ca(0x2d4),'role':'text','read':!![],'write':![]},'native':{}}),await _0x132e81[_0x7cd4ca(0x274)](_0x7cd4ca(0x288),{'type':'state','common':{'name':'Comfort\x20Suggestion','type':_0x7cd4ca(0x2d4),'role':_0x7cd4ca(0x38f),'read':!![],'write':![]},'native':{}}),await _0x132e81['extendObjectAsync'](_0x7cd4ca(0x279),{'type':_0x7cd4ca(0x2e0),'common':{'name':_0x7cd4ca(0x318)},'native':{}}),await _0x132e81[_0x7cd4ca(0x274)](_0x7cd4ca(0x1ff),{'type':_0x7cd4ca(0x38a),'common':{'name':_0x7cd4ca(0x3a8),'type':_0x7cd4ca(0x2a0),'role':'indicator','read':!![],'write':![],'def':![]},'native':{}}),await _0x132e81['setObjectNotExistsAsync'](_0x7cd4ca(0x327),{'type':_0x7cd4ca(0x38a),'common':{'name':_0x7cd4ca(0x3b0),'type':_0x7cd4ca(0x2d4),'role':_0x7cd4ca(0x38f),'read':!![],'write':![]},'native':{}}),await _0x132e81[_0x7cd4ca(0x274)](_0x7cd4ca(0x39f),{'type':_0x7cd4ca(0x38a),'common':{'name':_0x7cd4ca(0x3a6),'type':_0x7cd4ca(0x2d4),'role':'text','read':!![],'write':![]},'native':{}}),await _0x132e81[_0x7cd4ca(0x274)](_0x7cd4ca(0x2ce),{'type':_0x7cd4ca(0x38a),'common':{'name':'Target\x20ID','type':_0x7cd4ca(0x2d4),'role':_0x7cd4ca(0x38f),'read':!![],'write':![]},'native':{}}),await _0x132e81[_0x7cd4ca(0x274)](_0x7cd4ca(0x20d),{'type':_0x7cd4ca(0x38a),'common':{'name':'Target\x20Value','type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x132e81['setObjectNotExistsAsync'](_0x7cd4ca(0x351),{'type':_0x7cd4ca(0x38a),'common':{'name':_0x7cd4ca(0x343),'type':_0x7cd4ca(0x2a0),'role':'switch','read':!![],'write':!![],'def':![]},'native':{}}),await _0x132e81['setObjectNotExistsAsync']('analysis.automation.triggerAction',{'type':_0x7cd4ca(0x38a),'common':{'name':_0x7cd4ca(0x205),'type':_0x7cd4ca(0x2a0),'role':_0x7cd4ca(0x2a7),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x132e81['setObjectNotExistsAsync'](_0x7cd4ca(0x39b),{'type':_0x7cd4ca(0x38a),'common':{'name':_0x7cd4ca(0x34e),'type':'string','role':_0x7cd4ca(0x2c9),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x132e81['setObjectNotExistsAsync'](_0x7cd4ca(0x2df),{'type':_0x7cd4ca(0x38a),'common':{'name':_0x7cd4ca(0x24b),'type':_0x7cd4ca(0x2d4),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await _0x132e81[_0x7cd4ca(0x34b)](_0x7cd4ca(0x399),{'type':_0x7cd4ca(0x2e0),'common':{'name':'Health\x20&\x20Sleep\x20Analysis'},'native':{}}),await _0x132e81[_0x7cd4ca(0x274)](_0x7cd4ca(0x348),{'type':'state','common':{'name':_0x7cd4ca(0x31a),'type':_0x7cd4ca(0x2e4),'role':'value.health','read':!![],'write':![],'def':0x0},'native':{}}),await _0x132e81[_0x7cd4ca(0x274)](_0x7cd4ca(0x2fe),{'type':_0x7cd4ca(0x38a),'common':{'name':_0x7cd4ca(0x3a4),'type':_0x7cd4ca(0x2d4),'role':_0x7cd4ca(0x38f),'read':!![],'write':![],'def':_0x7cd4ca(0x2d1)},'native':{}}),await _0x132e81[_0x7cd4ca(0x274)](_0x7cd4ca(0x1f5),{'type':'state','common':{'name':_0x7cd4ca(0x320),'type':_0x7cd4ca(0x2d4),'role':'text','read':!![],'write':![],'def':''},'native':{}}),await checkLtmObjects(_0x132e81),await checkLtmDriftObjects(_0x132e81);}async function checkSystemObjects(_0x112afd){const _0x4d676d=a0_0x55499d;await _0x112afd['extendObjectAsync'](_0x4d676d(0x298),{'type':_0x4d676d(0x2e0),'common':{'name':_0x4d676d(0x371)},'native':{}}),await _0x112afd[_0x4d676d(0x34b)](SYSTEM_DP_MODE,{'type':_0x4d676d(0x38a),'common':{'name':'System\x20Mode','type':_0x4d676d(0x2d4),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL'],'states':{[SYSTEM_MODES[_0x4d676d(0x329)]]:'Normal',[SYSTEM_MODES[_0x4d676d(0x28d)]]:'Urlaub',[SYSTEM_MODES['PARTY']]:_0x4d676d(0x2b9),[SYSTEM_MODES['GUEST']]:_0x4d676d(0x2e2)}},'native':{}});}async function checkLtmObjects(_0x5fc078){const _0x181c8e=a0_0x55499d;await _0x5fc078[_0x181c8e(0x34b)](_0x181c8e(0x35e),{'type':_0x181c8e(0x2e0),'common':{'name':_0x181c8e(0x35e)},'native':{}}),await _0x5fc078[_0x181c8e(0x34b)](LTM_DP_RAW_LOG,{'type':'state','common':{'name':_0x181c8e(0x202),'type':_0x181c8e(0x2d4),'role':_0x181c8e(0x2c9),'read':!![],'write':![]},'native':{}}),await _0x5fc078['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x181c8e(0x38a),'common':{'name':_0x181c8e(0x2f6),'type':_0x181c8e(0x2d4),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5fc078[_0x181c8e(0x34b)](LTM_DP_STATUS,{'type':_0x181c8e(0x38a),'common':{'name':_0x181c8e(0x282),'type':_0x181c8e(0x2d4),'role':_0x181c8e(0x38f),'read':!![],'write':![]},'native':{}}),await _0x5fc078[_0x181c8e(0x34b)](LTM_DP_TRIGGER_DIGEST,{'type':_0x181c8e(0x38a),'common':{'name':_0x181c8e(0x25a),'type':_0x181c8e(0x2a0),'role':_0x181c8e(0x2a7),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x5fc078[_0x181c8e(0x34b)](LTM_DP_BASELINE_STATUS,{'type':_0x181c8e(0x38a),'common':{'name':_0x181c8e(0x2f8),'type':_0x181c8e(0x2d4),'role':_0x181c8e(0x38f),'read':!![],'write':![]},'native':{}});}async function checkLtmDriftObjects(_0x54fccf){const _0x18aa03=a0_0x55499d;await _0x54fccf[_0x18aa03(0x34b)](LTM_DP_DRIFT_CHANNEL,{'type':_0x18aa03(0x2e0),'common':{'name':'Drift\x20Analysis'},'native':{}}),await _0x54fccf[_0x18aa03(0x34b)](LTM_DP_DRIFT_STATUS,{'type':_0x18aa03(0x38a),'common':{'name':_0x18aa03(0x383),'type':_0x18aa03(0x2d4),'role':'state','read':!![],'write':![],'def':_0x18aa03(0x32b)},'native':{}}),await _0x54fccf[_0x18aa03(0x34b)](LTM_DP_DRIFT_DETAILS,{'type':_0x18aa03(0x38a),'common':{'name':'Drift\x20Details','type':_0x18aa03(0x2d4),'role':_0x18aa03(0x38f),'read':!![],'write':![]},'native':{}}),await _0x54fccf[_0x18aa03(0x34b)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x18aa03(0x38a),'common':{'name':_0x18aa03(0x303),'type':'number','role':_0x18aa03(0x2ef),'read':!![],'write':![]},'native':{}});}async function loadSystemMode(_0x346a77){const _0x40623e=a0_0x55499d;try{const _0x1afef4=await _0x346a77[_0x40623e(0x229)](SYSTEM_DP_MODE);_0x1afef4&&_0x1afef4[_0x40623e(0x35f)]&&Object[_0x40623e(0x2b6)](SYSTEM_MODES)['includes'](_0x1afef4[_0x40623e(0x35f)])?_0x346a77[_0x40623e(0x3ad)]=_0x1afef4['val']:(_0x346a77[_0x40623e(0x3ad)]=SYSTEM_MODES[_0x40623e(0x329)],await _0x346a77['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x40623e(0x329)],'ack':!![]}));}catch(_0x2a2ffc){_0x346a77[_0x40623e(0x3ad)]=SYSTEM_MODES[_0x40623e(0x329)];}}async function loadRawEventLog(_0x1d0a9d){const _0x35bacc=a0_0x55499d;try{const _0x26f4e7=await _0x1d0a9d[_0x35bacc(0x229)](LTM_DP_RAW_LOG);if(_0x26f4e7&&_0x26f4e7[_0x35bacc(0x35f)])_0x1d0a9d['rawEventLog']=JSON[_0x35bacc(0x2ad)](_0x26f4e7[_0x35bacc(0x35f)]);}catch(_0x2ab08d){_0x1d0a9d[_0x35bacc(0x220)]=[];}}async function loadDailyDigests(_0x216aad){const _0x6eff82=a0_0x55499d;try{const _0x163c3d=await _0x216aad['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x163c3d&&_0x163c3d[_0x6eff82(0x35f)])_0x216aad[_0x6eff82(0x30a)]=JSON[_0x6eff82(0x2ad)](_0x163c3d[_0x6eff82(0x35f)]);}catch(_0x407111){_0x216aad[_0x6eff82(0x30a)]=[];}await updateBaselineStatus(_0x216aad);}async function saveRawEventLog(_0x19a8be){const _0x3c75bc=a0_0x55499d;_0x19a8be[_0x3c75bc(0x220)][_0x3c75bc(0x355)]>RAW_LOG_MAX_SIZE&&_0x19a8be[_0x3c75bc(0x220)][_0x3c75bc(0x335)](0x0,_0x19a8be[_0x3c75bc(0x220)][_0x3c75bc(0x355)]-RAW_LOG_MAX_SIZE),await _0x19a8be[_0x3c75bc(0x341)](LTM_DP_RAW_LOG,{'val':JSON[_0x3c75bc(0x38d)](_0x19a8be[_0x3c75bc(0x220)]),'ack':!![]});}async function saveDailyDigests(_0x3cf964,_0x15d63b=!![]){const _0x61a860=a0_0x55499d,_0x4d50b2=_0x3cf964[_0x61a860(0x25c)]['ltmLtbWindowDays']||0x3c;_0x3cf964[_0x61a860(0x30a)][_0x61a860(0x355)]>_0x4d50b2&&_0x3cf964[_0x61a860(0x30a)][_0x61a860(0x335)](0x0,_0x3cf964['dailyDigests']['length']-_0x4d50b2);await _0x3cf964[_0x61a860(0x341)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x61a860(0x38d)](_0x3cf964[_0x61a860(0x30a)]),'ack':!![]});if(_0x15d63b)await updateBaselineStatus(_0x3cf964);}async function updateAnalysisHistory(_0x4e3b2a,_0xd9ec64){const _0x30b276=a0_0x55499d;_0x4e3b2a[_0x30b276(0x299)][_0x30b276(0x2cd)](_0xd9ec64);if(_0x4e3b2a['analysisHistory'][_0x30b276(0x355)]>ANALYSIS_HISTORY_MAX_SIZE)_0x4e3b2a[_0x30b276(0x299)][_0x30b276(0x236)]();await _0x4e3b2a[_0x30b276(0x341)]('analysis.analysisHistory',{'val':JSON[_0x30b276(0x38d)](_0x4e3b2a['analysisHistory']),'ack':!![]});}function a0_0x5ca3(){const _0x110fa4=['substring','events.lastEvent','link_quality','response','flur','weatherunderground.0','GUEST','generic','Automation\x20Proposals','light','Sleep\x20Score\x20(0-100)','ðŸš¨ðŸš¨\x20NOTFALL','No\x20Key','analysis.automation.triggerAction','status','klima','Health\x20Notes','indexOf','Briefing\x20Sched\x20Error:\x20','Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','presence','onUnload','time','analysis.automation.description','getForeignObjectAsync','NORMAL','onStateChange','N/A','set_temperature','Comfort\x20Summary','toString','0\x203\x20*\x20*\x20*','toFixed','setState','HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20','Subscribing\x20to\x20','unload','splice','activity','N/A\x20(Learning)','notifyPushoverInstance','10RwYOzB','history.','trim','now','Triggered\x20analysis\x20but\x20Gemini\x20AI\x20is\x20not\x20initialized!\x20Check\x20API\x20Key.','submitFeedback','position','currentposition','setStateAsync','heizung','Auto\x20Apply\x20Rule','Gemini\x20AI\x20initialized.','\x20sensors...','_score','system.config','analysis.health.sleepScore','_calName','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.','extendObjectAsync','activityLevel','presenceDevices','Logbook','\x20hours.\x20Potential\x20incapacitation.','stick_unreach','analysis.automation.autoApply','thermostat','message','alertReason','length','KALENDER:\x20Keine\x20Daten','PRIORITÃ„T:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungewÃ¶hnliche\x20Anwesenheit.','location','health','\x20sent','wohn','targetId','analysisInterval','LTM','val','isArray','âœ…\x20Alles\x20OK\x20(Reset)','Kalender:\x20Deaktiviert','occupancy','accuweather.0','Flur','Deaktiviert\x20(Pro-Feature)','Activity\x20Summary','communicate.request','humidity','ack','KALENDER:\x20','ltmDriftCheckIntervalHours','Trigger\x20Briefing\x20(Test)','toLocaleString','isAlert','[TEST]\x20','System\x20Status\x20&\x20Control','KÃ¼che','notifyPushoverEnabled','\x20min).','name','toLowerCase','analysis.triggerBriefing','Badezimmer','\x20events','detected','getOverviewData','namespace','direction','analysis.history_debug_00','Drift\x20Sched\x20Error:\x20','getCalendarNames','config_pending','exports','Drift\x20Status','AI\x20Alert\x20Status','.\x20ZUSATZ:\x20','prÃ¤senz','calendarSelection','automationProposal','KI-Modell\x20nicht\x20initialisiert','state','version','patternDetected','stringify','analysis.deviationFromBaseline','text','logDuplicates','.\x20PRÃ„SENZ:\x20','level','geminiApiKey','scriptProblem','actual_temperature','join','targetposition','connection','analysis.health','sleepScore','analysis.analysisHistory','exitTimer','20AOtQnX','isPresent','analysis.automation.suggestedAction','retry','analysis.alertReason','Wohnzimmer','uuid-error','Restlessness\x20Level','weather','Action','isProVersion','Pattern\x20Detected','fenster','.\x20DATEN:\x20Schlaf\x20','callback','inactivityThresholdHours','currentSystemMode','dismissAutomation','Missing\x20data','Description','.data.table','Error:\x20','search','node-schedule','PARTY','includes','Aktiv\x20(','Vom\x20Benutzer\x20bestÃ¤tigt\x20(OK).','triggerBriefing','\x20Tage)','uuid','weatherInstance','isGracePeriodActive','execution','analysis.health.notes','sort','ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20AKTUELLE\x20ZEIT:\x20','@google/generative-ai','door','type','\x20Phase\x203:\x20DRIFT\x20ACTIVE.','No\x20recorded\x20events\x20yet.','cogni-living\x20adapter\x20starting\x20(v','Gemini\x20Init\x20Error:\x20','analysis.automation.patternDetected','error','notifyTelegramRecipient','Raw\x20Log','\x20presence\x20devices...','common','Trigger\x20Action\x20Now','systemUUID','schalter','getGenerativeModel','members','10696MMGlIo','driftAnalysisTimer','object','analysis.automation.targetValue','latitude','javascript.','\x20for\x20interactive\x20buttons...','replace','.Summary.Current','filter','fault','enum.rooms.*','genAI','COGNI_CONFIRM_OK','analysis.activitySummary','[Test]\x20Interaktiver\x20Alarm','timestamp','isEmergency','firmware','LTM.dailyDigests','accuweather','indicator.alarm.fire','rawEventLog','endsWith','send','Error\x20in\x20onMessage\x20command\x20','Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung.','briefingJob','setHours','analysis.isAlert','scheduleJob','getStateAsync','Adapter','Scanning\x20for\x20devices\x20(V7:\x20Basics\x20+\x20Explicit\x20Whitelist)...','command','6YGJFnS','WETTER:\x20Keine\x20Daten\x20gefunden','system.meta.uuid','party','ltmJob','lock','sendToAsync','lampe','Nein','pop','de-DE','COGNI_REQUEST_CALL','Trigger\x20Analysis','Analysis\x20Error:\x20','bind','exitGraceTimer','find','notifyPushoverRecipient','minDaysForBaseline','Phase\x202:\x20ACUTE\x20MONITORING.\x20STB\x20(Last\x2014d):\x20','\x20EVENTS:\x20','Who\x20is\x20present?','systemConfig','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','comfort','35587LaxXyh','PRIORITÃ„T:\x20Gesundheit\x20und\x20Sicherheit\x20fÃ¼r\x20Senioren\x20(AAL).\x20Erkenne\x20InaktivitÃ¤t,\x20potenzielle\x20StÃ¼rze\x20(indirekt),\x20Schlafunterbrechungen\x20und\x20nÃ¤chtliche\x20Unruhe.','notifyTelegramInstance','203hKfXbb','echarts.','Feedback\x20Log','ROLLE:\x20FÃ¼rsorglicher\x20Assistent.\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20','livingContext','lights','901278nnUkaa','Event\x20History','generateContent','subscribeStates','startsWith','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','events.history_debug_00','sensor','text.alarm','calendarInstance','Trigger\x20Digest','3915981MyiYQG','config','summary','simple-api.','enum','delObjectAsync','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','system.presenceWho','Briefing\x20Error:\x20','@iobroker/adapter-core','.\x20OUTPUT:\x20Nur\x20Text.',')\x20-\x20FULL\x20STANDALONE\x20MODE','PRO-','briefingEnabled','sendTo','ready','maintenance','KALENDER:\x20Keine\x20relevanten\x20Termine','\x20=\x20','from','useWeather','autoApply','onMessage','LTM.driftAnalysis','ltmStbWindowDays','setObjectNotExistsAsync','ðŸŒ…\x20Daily\x20Briefing:\x0a','lastCheck','motion','Keine\x20neuen\x20Automatisierungs-Muster\x20erkannt.','analysis.automation','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','update','setpoint','Scheduling\x20Morning\x20Briefing\x20for\x20','getObjectAsync','getCalendarNames\x20Error:\x20','enum.functions.*','getForeignStateAsync','Processing\x20Status','longitude','(((.+)+)+)+$','testNotification','daswetter.0','Started\x20at\x20','analysis.comfortSuggestion','Last\x20Result','licenseKey','Starting\x20Autopilot\x20(','main','VACATION','models/gemini-flash-latest','devices','doors','unreach','description','unknown','analysisTimer','rssi','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','LTM.processingStatus','system','analysisHistory','flot.','off','218780UZskyh','subscribeForeignStatesAsync','Generating\x20Morning\x20Briefing...','Cogni-Living','boolean','toISOString','events.history','power','map','log','ðŸ“¡\x20Hooking\x20into\x20','button','Alert\x20Reason','.\x20KONTEXT:\x20','LTM.driftAnalysis.lastCheck','WETTER:\x20','temp','parse','0\x204\x20*\x20*\x20*','custom','Error\x20checking\x20WiFi:\x20','switch','eventHistory','warn','energy','Reset\x20Sched\x20Error:\x20','values','siren','simulateButler','Party','modeResetJob','LTM.rawEventLog','Phase\x201:\x20Learning\x20(No\x20Baseline).\x20Rely\x20on\x20common\x20sense.','scanDevices','valve','6057711vuzAWO','No\x20instance','push','setForeignStateAsync','analysis.isEmergency','2-digit','system.','openweathermap.0','analysis.trigger','notifyEmailInstance','json','getLtmData','ðŸ¤–\x20AUTO-APPLY:\x20Executing\x20','driftDetails','unshift','analysis.automation.targetId','vis.','Morning\x20Briefing\x20sent.','none','targetValue','Schlafzimmer','string','baselineDrift','temperature','uuid-not-found','cancel','openweathermap','cover','Lernphase\x20(','analysis.comfortSummary','window','onReady','analysis.feedbackHistory','channel','sensorLastValues','Gast','.communicate.request','number','split','\x0aSTB:\x20','geminiModel','LTM.driftAnalysis.baselineDrift','apiKey','User\x20dismissed\x20automation\x20proposal.','material.','slice','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','ltmLtbWindowDays','date','dimmer','âš ï¸\x20Alarm','scriptEnabled','aiPersona','lastIndexOf','lastAlertState','Daily\x20Digests','ðŸ“ž\x20RÃ¼ckruf\x20anfordern','Baseline\x20Status','shutter','role','test','lowbat','ðŸ“ž\x20RÃœCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20RÃ¼ckruf-Button\x20gedrÃ¼ckt.','analysis.health.restlessness','some','info','Success','Deviation','Last\x20Check','\x20*\x20*\x20*','stateChange','AI\x20Emergency\x20Status','400458aHeZFs','normal','getForeignObjectsAsync','dailyDigests','native','LTM\x20Sched\x20Error:\x20','indicator.alarm','analysis.lastResult','Error\x20reading\x20calendar\x20table:\x20'];a0_0x5ca3=function(){return _0x110fa4;};return a0_0x5ca3();}async function updateBaselineStatus(_0x1e153a){const _0x4bfe24=a0_0x55499d;if(!_0x1e153a['isProVersion']){await _0x1e153a[_0x4bfe24(0x341)](LTM_DP_BASELINE_STATUS,{'val':_0x4bfe24(0x366),'ack':!![]});return;}const _0x303ba5=_0x1e153a[_0x4bfe24(0x30a)][_0x4bfe24(0x355)]>=(_0x1e153a['config'][_0x4bfe24(0x23f)]||0x7)?_0x4bfe24(0x1ed)+_0x1e153a[_0x4bfe24(0x30a)][_0x4bfe24(0x355)]+_0x4bfe24(0x1f0):_0x4bfe24(0x2db)+_0x1e153a[_0x4bfe24(0x30a)][_0x4bfe24(0x355)]+'/'+(_0x1e153a[_0x4bfe24(0x25c)]['minDaysForBaseline']||0x7)+')';await _0x1e153a['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x303ba5,'ack':!![]});}async function initSensorSubscriptions(_0x538125){const _0x379deb=a0_0x55499d,_0x17be89=_0x538125[_0x379deb(0x25c)][_0x379deb(0x28f)];if(_0x17be89&&_0x17be89[_0x379deb(0x355)]>0x0){_0x538125['log'][_0x379deb(0x300)]('Subscribing\x20to\x20'+_0x17be89['length']+_0x379deb(0x345));for(const _0x5718e4 of _0x17be89){if(_0x5718e4['id']){await _0x538125[_0x379deb(0x29d)](_0x5718e4['id']);try{const _0x183826=await _0x538125[_0x379deb(0x281)](_0x5718e4['id']);if(_0x183826)_0x538125['sensorLastValues'][_0x5718e4['id']]=_0x183826['val'];}catch(_0x4ee40f){}}}}}async function initPresenceSubscriptions(_0x3d9f58){const _0x14118c=a0_0x55499d,_0x266d88=_0x3d9f58[_0x14118c(0x25c)][_0x14118c(0x34d)]||[];if(_0x266d88[_0x14118c(0x355)]>0x0){_0x3d9f58[_0x14118c(0x2a5)]['info'](_0x14118c(0x333)+_0x266d88[_0x14118c(0x355)]+_0x14118c(0x203));for(const _0x203e12 of _0x266d88){await _0x3d9f58[_0x14118c(0x29d)](_0x203e12);}try{await checkWifiPresence(_0x3d9f58);}catch(_0x9f0976){}}}async function getWeatherContext(_0x4f90c6){const _0x1cc27f=a0_0x55499d;try{if(!_0x4f90c6['config'][_0x1cc27f(0x26f)])return'Wetter:\x20Deaktiviert';let _0x898518='';const _0x51f935=_0x4f90c6[_0x1cc27f(0x25c)][_0x1cc27f(0x1f2)];if(_0x51f935)try{if(_0x51f935[_0x1cc27f(0x1ec)](_0x1cc27f(0x21e))){const _0x2998cc=await _0x4f90c6['getForeignStateAsync'](_0x51f935+_0x1cc27f(0x212));if(_0x2998cc&&_0x2998cc[_0x1cc27f(0x35f)])_0x898518=_0x2998cc[_0x1cc27f(0x35f)];}else{if(_0x51f935[_0x1cc27f(0x1ec)]('daswetter')){const _0x27e32e=await _0x4f90c6[_0x1cc27f(0x281)](_0x51f935+'.NextHours.Location_1.Day_1.current.symbol_desc');if(_0x27e32e&&_0x27e32e['val'])_0x898518=_0x27e32e['val'];}else{if(_0x51f935[_0x1cc27f(0x1ec)](_0x1cc27f(0x2d9))){const _0x4188d0=await _0x4f90c6['getForeignStateAsync'](_0x51f935+'.forecast.current.state');if(_0x4188d0&&_0x4188d0['val'])_0x898518=_0x4188d0['val'];}}}}catch(_0x4919e4){}if(!_0x898518){const _0x389a4c=[_0x1cc27f(0x364),_0x1cc27f(0x286),_0x1cc27f(0x315),_0x1cc27f(0x2c6)];for(const _0x4b6b18 of _0x389a4c){try{const _0x2c5381=await _0x4f90c6[_0x1cc27f(0x328)](_0x4b6b18);if(_0x2c5381){if(_0x4b6b18[_0x1cc27f(0x1ec)](_0x1cc27f(0x21e))){const _0x11ad01=await _0x4f90c6[_0x1cc27f(0x281)](_0x4b6b18+'.Summary.Current');if(_0x11ad01&&_0x11ad01[_0x1cc27f(0x35f)]){_0x898518=_0x11ad01[_0x1cc27f(0x35f)];break;}}}}catch(_0x1c68eb){}}}return _0x898518?_0x1cc27f(0x2ab)+_0x898518:_0x1cc27f(0x22e);}catch(_0x332851){return'WETTER\x20ERROR:\x20'+_0x332851[_0x1cc27f(0x353)];}}async function getCalendarContext(_0xee65b2){const _0x4b3260=a0_0x55499d;try{if(!_0xee65b2[_0x4b3260(0x25c)]['useCalendar'])return _0x4b3260(0x362);let _0x48fa1a=_0xee65b2['config'][_0x4b3260(0x259)]||'ical.0',_0x5ef3fc=_0xee65b2[_0x4b3260(0x25c)][_0x4b3260(0x387)]||[];if(typeof _0x5ef3fc===_0x4b3260(0x2d4))_0x5ef3fc=_0x5ef3fc['split'](',');try{const _0x3a3f0d=await _0xee65b2[_0x4b3260(0x281)](_0x48fa1a+'.data.table');if(_0x3a3f0d&&_0x3a3f0d['val']){let _0x221643=tryParse(_0x3a3f0d[_0x4b3260(0x35f)]);if(_0x221643&&Array[_0x4b3260(0x360)](_0x221643)){if(_0x5ef3fc[_0x4b3260(0x355)]>0x0)_0x221643=_0x221643[_0x4b3260(0x213)](_0x56cf2a=>_0x5ef3fc[_0x4b3260(0x1ec)](_0x56cf2a[_0x4b3260(0x349)]||''));else return'KALENDER:\x20Keine\x20Kalender\x20ausgewÃ¤hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)';if(_0x221643[_0x4b3260(0x355)]>0x0){const _0x42c9e4=_0x221643[_0x4b3260(0x2ec)](0x0,0x3)[_0x4b3260(0x2a4)](_0x4cca19=>{const _0x48f993=_0x4b3260;let _0x4f8a29=_0x4cca19['date'];if(_0x4cca19[_0x48f993(0x326)])_0x4f8a29+='\x20'+_0x4cca19[_0x48f993(0x326)];return _0x4f8a29+':\x20'+_0x4cca19['event']+'\x20('+_0x4cca19[_0x48f993(0x349)]+')';});return _0x4b3260(0x36b)+_0x42c9e4[_0x4b3260(0x396)]('\x20|\x20');}else return _0x4b3260(0x26c);}}}catch(_0xdd3943){_0xee65b2[_0x4b3260(0x2a5)][_0x4b3260(0x2b3)](_0x4b3260(0x30f)+_0xdd3943[_0x4b3260(0x353)]);}return _0x4b3260(0x356);}catch(_0x37c048){return'KALENDER\x20ERROR:\x20'+_0x37c048[_0x4b3260(0x353)];}}async function getCalendarNames(_0x24a428,_0x39ebe6){const _0x223e8b=a0_0x55499d;try{const _0x4f7d0f=await _0x24a428[_0x223e8b(0x281)](_0x39ebe6+_0x223e8b(0x3b1));if(_0x4f7d0f&&_0x4f7d0f[_0x223e8b(0x35f)]){const _0x887e46=tryParse(_0x4f7d0f[_0x223e8b(0x35f)]);if(_0x887e46&&Array[_0x223e8b(0x360)](_0x887e46)){const _0x4e95dc=[...new Set(_0x887e46[_0x223e8b(0x2a4)](_0x5a66ce=>_0x5a66ce[_0x223e8b(0x349)])[_0x223e8b(0x213)](Boolean))];return _0x4e95dc[_0x223e8b(0x1f6)]();}}return[];}catch(_0x5a4a3c){return _0x24a428[_0x223e8b(0x2a5)]['error'](_0x223e8b(0x27f)+_0x5a4a3c[_0x223e8b(0x353)]),[];}}async function checkWifiPresence(_0x2aacec){const _0x2ead92=a0_0x55499d;try{const _0x201118=_0x2aacec[_0x2ead92(0x25c)][_0x2ead92(0x34d)]||[];let _0x42ca40=![];const _0x2e2497=[];for(const _0x25e878 of _0x201118){try{const _0x1fd26f=await _0x2aacec[_0x2ead92(0x281)](_0x25e878);if(_0x1fd26f&&(_0x1fd26f['val']===!![]||_0x1fd26f[_0x2ead92(0x35f)]==='online'||_0x1fd26f['val']===0x1)){_0x42ca40=!![];const _0x49698a=await _0x2aacec[_0x2ead92(0x328)](_0x25e878);let _0x183aff=_0x25e878;_0x49698a&&_0x49698a[_0x2ead92(0x204)]&&_0x49698a['common'][_0x2ead92(0x375)]&&(_0x183aff=typeof _0x49698a['common'][_0x2ead92(0x375)]==='object'?_0x49698a[_0x2ead92(0x204)]['name']['de']||_0x49698a['common'][_0x2ead92(0x375)]['en']:_0x49698a[_0x2ead92(0x204)][_0x2ead92(0x375)]),_0x2e2497[_0x2ead92(0x2c1)](_0x183aff);}}catch(_0x7d8332){}}return await _0x2aacec[_0x2ead92(0x341)](_0x2ead92(0x262),{'val':_0x2e2497[_0x2ead92(0x396)](',\x20'),'ack':!![]}),_0x42ca40&&(_0x2aacec[_0x2ead92(0x39c)]&&(_0x2aacec[_0x2ead92(0x2a5)][_0x2ead92(0x300)](_0x2ead92(0x27a)),abortExitTimer(_0x2aacec)),!_0x2aacec['isPresent']&&_0x2aacec[_0x2ead92(0x3ad)]===SYSTEM_MODES[_0x2ead92(0x329)]&&await setPresence(_0x2aacec,!![])),_0x42ca40;}catch(_0x310cb8){return _0x2aacec[_0x2ead92(0x2a5)][_0x2ead92(0x200)](_0x2ead92(0x2b0)+_0x310cb8['message']),![];}}function startExitTimer(_0x2f42c6){const _0x11f5ea=a0_0x55499d;abortExitTimer(_0x2f42c6),_0x2f42c6[_0x11f5ea(0x1f3)]=!![],_0x2f42c6[_0x11f5ea(0x23c)]=setTimeout(()=>{_0x2f42c6['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x2f42c6[_0x11f5ea(0x39c)]=setTimeout(()=>{const _0x41cf54=_0x11f5ea;setPresence(_0x2f42c6,![]),_0x2f42c6[_0x41cf54(0x39c)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x1e9bd6){const _0x493e75=a0_0x55499d;if(_0x1e9bd6[_0x493e75(0x39c)])clearTimeout(_0x1e9bd6[_0x493e75(0x39c)]);if(_0x1e9bd6[_0x493e75(0x23c)])clearTimeout(_0x1e9bd6[_0x493e75(0x23c)]);_0x1e9bd6[_0x493e75(0x39c)]=null,_0x1e9bd6[_0x493e75(0x23c)]=null,_0x1e9bd6['isGracePeriodActive']=![];}async function setPresence(_0x3d988d,_0xb51d4a){const _0x4314a0=a0_0x55499d;if(_0x3d988d[_0x4314a0(0x39e)]===_0xb51d4a)return;_0x3d988d[_0x4314a0(0x39e)]=_0xb51d4a,await _0x3d988d[_0x4314a0(0x341)]('system.isPresent',{'val':_0xb51d4a,'ack':!![]});}async function saveFeedback(_0x53ed5a,_0xd74467){_0x53ed5a['log']['info']('Feedback\x20saved:\x20'+JSON['stringify'](_0xd74467));}async function runBaselineDriftAnalysis(_0x4237ab){const _0x44989a=a0_0x55499d;if(!_0x4237ab[_0x44989a(0x3a7)]||!_0x4237ab[_0x44989a(0x2e7)])return;const _0x34e8b3=_0x4237ab['config'][_0x44989a(0x273)]||0xe;if(_0x4237ab[_0x44989a(0x30a)][_0x44989a(0x355)]<_0x34e8b3+(_0x4237ab[_0x44989a(0x25c)][_0x44989a(0x23f)]||0x7)){await _0x4237ab[_0x44989a(0x341)](LTM_DP_DRIFT_STATUS,{'val':_0x44989a(0x337),'ack':!![]});return;}const _0x1ee24c=_0x4237ab[_0x44989a(0x30a)]['slice'](-_0x34e8b3),_0x24096b=_0x4237ab[_0x44989a(0x30a)][_0x44989a(0x2ec)](0x0,_0x4237ab['dailyDigests'][_0x44989a(0x355)]-_0x34e8b3),_0x1fb600=_0x44989a(0x2ed)+JSON['stringify'](_0x24096b)+_0x44989a(0x2e6)+JSON[_0x44989a(0x38d)](_0x1ee24c);try{const _0x43df37=await _0x4237ab[_0x44989a(0x2e7)][_0x44989a(0x251)](_0x1fb600),_0x131c9b=JSON[_0x44989a(0x2ad)](_0x43df37[_0x44989a(0x313)][_0x44989a(0x38f)]()['replace'](/```json|```/g,'')['trim']());_0x131c9b[_0x44989a(0x2d5)]&&(await _0x4237ab['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x131c9b[_0x44989a(0x2d5)],'ack':!![]}),await _0x4237ab[_0x44989a(0x341)](LTM_DP_DRIFT_DETAILS,{'val':_0x131c9b[_0x44989a(0x2cc)],'ack':!![]}),await _0x4237ab[_0x44989a(0x341)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x44989a(0x33c)](),'ack':!![]}));}catch(_0xf48f95){}}function setupLtmScheduler(_0x2cb13f){const _0x78cd00=a0_0x55499d;try{if(_0x2cb13f[_0x78cd00(0x231)])_0x2cb13f[_0x78cd00(0x231)][_0x78cd00(0x2d8)]();if(!_0x2cb13f['isProVersion']){_0x2cb13f['setStateAsync'](LTM_DP_STATUS,{'val':_0x78cd00(0x366),'ack':!![]});return;}_0x2cb13f['ltmJob']=schedule['scheduleJob'](LTM_SCHEDULE,()=>createDailyDigest(_0x2cb13f));}catch(_0x103ab0){_0x2cb13f[_0x78cd00(0x2a5)][_0x78cd00(0x200)](_0x78cd00(0x30c)+_0x103ab0['message']);}}function setupModeResetScheduler(_0x4ee716){const _0x13ff39=a0_0x55499d;try{if(_0x4ee716['modeResetJob'])_0x4ee716[_0x13ff39(0x2ba)][_0x13ff39(0x2d8)]();_0x4ee716['modeResetJob']=schedule['scheduleJob'](MODE_RESET_SCHEDULE,async()=>{const _0x56dc0d=_0x13ff39;await loadSystemMode(_0x4ee716),AUTO_RESET_MODES[_0x56dc0d(0x1ec)](_0x4ee716[_0x56dc0d(0x3ad)])&&await _0x4ee716['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x56dc0d(0x329)],'ack':![]});});}catch(_0x47740e){_0x4ee716[_0x13ff39(0x2a5)][_0x13ff39(0x200)](_0x13ff39(0x2b5)+_0x47740e[_0x13ff39(0x353)]);}}function setupDriftAnalysisScheduler(_0x18335e){const _0x534f78=a0_0x55499d;try{if(_0x18335e[_0x534f78(0x20b)])clearInterval(_0x18335e[_0x534f78(0x20b)]);if(!_0x18335e[_0x534f78(0x3a7)])return;_0x18335e[_0x534f78(0x20b)]=setInterval(()=>runBaselineDriftAnalysis(_0x18335e),(_0x18335e[_0x534f78(0x25c)][_0x534f78(0x36c)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x18335e),0x1388);}catch(_0x3fe4c2){_0x18335e['log']['error'](_0x534f78(0x37f)+_0x3fe4c2[_0x534f78(0x353)]);}}function setupBriefingScheduler(_0x3f9d77){const _0x235306=a0_0x55499d;try{if(_0x3f9d77[_0x235306(0x225)])_0x3f9d77[_0x235306(0x225)]['cancel']();if(!_0x3f9d77['config'][_0x235306(0x268)])return;const _0xff659=(_0x3f9d77[_0x235306(0x25c)]['briefingTime']||'08:00')[_0x235306(0x2e5)](':'),_0x3fabe3=parseInt(_0xff659[0x0])||0x8,_0x5ae8ff=parseInt(_0xff659[0x1])||0x0,_0x5e71ff=_0x5ae8ff+'\x20'+_0x3fabe3+_0x235306(0x304);_0x3f9d77[_0x235306(0x2a5)][_0x235306(0x300)](_0x235306(0x27d)+_0x3fabe3+':'+(_0x5ae8ff<0xa?'0'+_0x5ae8ff:_0x5ae8ff)),_0x3f9d77['briefingJob']=schedule[_0x235306(0x228)](_0x5e71ff,()=>{sendMorningBriefing(_0x3f9d77);});}catch(_0x266d5c){_0x3f9d77[_0x235306(0x2a5)][_0x235306(0x200)](_0x235306(0x322)+_0x266d5c[_0x235306(0x353)]);}}async function sendNotification(_0x473a04,_0x49fd6d,_0x2e10b1=![],_0xcc3254=![]){const _0x2ecfe4=a0_0x55499d;_0x473a04['log']['info']((_0x2e10b1?_0x2ecfe4(0x370):'')+'Sending\x20notification:\x20\x22'+_0x49fd6d+'\x22');const _0x411e21=_0x473a04[_0x2ecfe4(0x25c)];let _0x3ffed0=0x0;if(_0x411e21['notifyTelegramEnabled']){let _0x12cb12={};(_0x49fd6d[_0x2ecfe4(0x1ec)]('Alarm')||_0xcc3254)&&(_0x12cb12={'reply_markup':{'inline_keyboard':[[{'text':_0x2ecfe4(0x361),'callback_data':'COGNI_CONFIRM_OK'}],[{'text':_0x2ecfe4(0x2f7),'callback_data':_0x2ecfe4(0x238)}]]}}),await _0x473a04['sendToAsync'](_0x411e21[_0x2ecfe4(0x248)],_0x2ecfe4(0x222),{'text':_0x49fd6d,'user':_0x411e21[_0x2ecfe4(0x201)],..._0x12cb12}),_0x3ffed0++;}if(_0x411e21[_0x2ecfe4(0x373)]){let _0x5b37ff={'message':_0x49fd6d,'title':_0xcc3254?'ðŸš¨\x20EMERGENCY':_0x2ecfe4(0x29f),'priority':_0xcc3254?0x2:0x1,'device':_0x411e21[_0x2ecfe4(0x23e)]};_0xcc3254&&(_0x5b37ff[_0x2ecfe4(0x3a0)]=0x1e,_0x5b37ff['expire']=0xe10,_0x5b37ff['sound']=_0x2ecfe4(0x2b7)),await _0x473a04[_0x2ecfe4(0x233)](_0x411e21[_0x2ecfe4(0x338)],_0x2ecfe4(0x222),_0x5b37ff),_0x3ffed0++;}return _0x411e21['notifyEmailEnabled']&&(await _0x473a04[_0x2ecfe4(0x233)](_0x411e21[_0x2ecfe4(0x2c8)],_0x2ecfe4(0x222),{'text':_0x49fd6d,'to':_0x411e21['notifyEmailRecipient']}),_0x3ffed0++),_0x3ffed0;}async function setupTelegramListener(_0x29dc59){const _0xf40362=a0_0x55499d,_0x1233fc=_0x29dc59[_0xf40362(0x25c)][_0xf40362(0x248)];_0x29dc59[_0xf40362(0x25c)]['notifyTelegramEnabled']&&_0x1233fc&&(_0x29dc59[_0xf40362(0x2a5)]['info'](_0xf40362(0x2a6)+_0x1233fc+_0xf40362(0x210)),await _0x29dc59[_0xf40362(0x29d)](_0x1233fc+_0xf40362(0x2e3)));}async function handleTelegramResponse(_0x593d60,_0x17de74){const _0xfcf7ba=a0_0x55499d;let _0x12f148=_0x17de74;_0x17de74[_0xfcf7ba(0x253)]('[')&&(_0x12f148=_0x17de74[_0xfcf7ba(0x310)](_0x17de74[_0xfcf7ba(0x321)](']')+0x1));if(_0x12f148===_0xfcf7ba(0x217))_0x593d60[_0xfcf7ba(0x2a5)][_0xfcf7ba(0x300)]('âœ…\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.'),await _0x593d60['setStateAsync'](_0xfcf7ba(0x227),{'val':![],'ack':!![]}),await _0x593d60[_0xfcf7ba(0x341)](_0xfcf7ba(0x3a1),{'val':_0xfcf7ba(0x1ee),'ack':!![]}),_0x593d60['lastAlertState']=![],sendNotification(_0x593d60,'âœ…\x20Alarm\x20quittiert.\x20System\x20normal.',![]);else _0x12f148==='COGNI_REQUEST_CALL'&&(_0x593d60['log'][_0xfcf7ba(0x2b3)]('ðŸ“ž\x20User\x20requested\x20CALL\x20via\x20Telegram!'),sendNotification(_0x593d60,_0xfcf7ba(0x2fd),![],!![]));}async function processSensorEvent(_0x3493a6,_0x2edc46,_0xadd371,_0x1afb8d){const _0x5e7040=a0_0x55499d;if(!_0x1afb8d[_0x5e7040(0x390)]&&_0x3493a6[_0x5e7040(0x2e1)][_0x2edc46]===_0xadd371[_0x5e7040(0x35f)])return;_0x3493a6[_0x5e7040(0x2e1)][_0x2edc46]=_0xadd371['val'];if(_0x3493a6[_0x5e7040(0x1f3)])return;const _0x17bc14=await checkWifiPresence(_0x3493a6);if(_0x17bc14){if(!_0x3493a6[_0x5e7040(0x39e)])await setPresence(_0x3493a6,!![]);}else{const _0x224105=_0x1afb8d['isExit']===!![];if(_0x224105)startExitTimer(_0x3493a6);else{if(_0x3493a6[_0x5e7040(0x39c)])abortExitTimer(_0x3493a6);if(!_0x3493a6[_0x5e7040(0x39e)]&&_0x3493a6[_0x5e7040(0x3ad)]===SYSTEM_MODES['NORMAL'])await setPresence(_0x3493a6,!![]);}}const _0x276d84={'timestamp':_0xadd371['ts'],'id':_0x2edc46,'name':_0x1afb8d[_0x5e7040(0x375)],'value':_0xadd371['val'],'location':_0x1afb8d['location'],'type':_0x1afb8d[_0x5e7040(0x1fa)]};_0x3493a6[_0x5e7040(0x2b2)][_0x5e7040(0x2cd)](_0x276d84);if(_0x3493a6[_0x5e7040(0x2b2)][_0x5e7040(0x355)]>HISTORY_MAX_SIZE)_0x3493a6['eventHistory']['pop']();await _0x3493a6[_0x5e7040(0x341)](_0x5e7040(0x311),{'val':JSON[_0x5e7040(0x38d)](_0x276d84),'ack':!![]}),await _0x3493a6[_0x5e7040(0x341)](_0x5e7040(0x2a2),{'val':JSON['stringify'](_0x3493a6[_0x5e7040(0x2b2)]),'ack':!![]}),_0x3493a6['rawEventLog'][_0x5e7040(0x2c1)]({'timestamp':new Date(_0xadd371['ts'])[_0x5e7040(0x2a1)](),'sensorName':_0x1afb8d[_0x5e7040(0x375)],'location':_0x1afb8d[_0x5e7040(0x358)],'value':_0xadd371[_0x5e7040(0x35f)]}),await saveRawEventLog(_0x3493a6);}async function runGeminiAnalysis(_0x313dfb,_0x494299=''){const _0x5b1ea3=a0_0x55499d;if(!_0x313dfb['geminiModel']){_0x313dfb[_0x5b1ea3(0x2a5)][_0x5b1ea3(0x2b3)](_0x5b1ea3(0x33d));return;}const _0x66eaaf=_0x313dfb['eventHistory'][_0x5b1ea3(0x355)]>0x0?_0x313dfb['eventHistory']:[{'note':_0x5b1ea3(0x1fc)}],_0x2f2a99=PERSONA_MAPPING[_0x313dfb[_0x5b1ea3(0x25c)][_0x5b1ea3(0x2f3)]||'generic'],_0x28b830=_0x313dfb[_0x5b1ea3(0x25c)][_0x5b1ea3(0x24d)]||'',_0x2a7dea=_0x313dfb['currentSystemMode'],_0x36d681=await getWeatherContext(_0x313dfb),_0x495e6f=await getCalendarContext(_0x313dfb),_0x5b2350=(_0x36d681+'\x20'+_0x495e6f)['trim'](),_0x1a77c5=new Date(),_0x16ead9=_0x1a77c5[_0x5b1ea3(0x36e)](_0x5b1ea3(0x237),{'weekday':'long','hour':_0x5b1ea3(0x2c4),'minute':'2-digit'});let _0xea8bf3=_0x5b1ea3(0x2bc);const _0x5830c0=_0x313dfb[_0x5b1ea3(0x30a)]['length'];if(_0x313dfb[_0x5b1ea3(0x3a7)]&&_0x5830c0>=(_0x313dfb['config'][_0x5b1ea3(0x23f)]||0x7)){const _0x56bf89=_0x313dfb['dailyDigests']['slice'](-(_0x313dfb[_0x5b1ea3(0x25c)][_0x5b1ea3(0x273)]||0xe));_0xea8bf3=_0x5b1ea3(0x240)+JSON[_0x5b1ea3(0x38d)](_0x56bf89)+'.';if(_0x5830c0>=0x1e)_0xea8bf3+=_0x5b1ea3(0x1fb);}const _0x599aed='CRITICAL\x20SAFETY\x20CHECK:\x201.\x20Sofort/Ad-Hoc:\x20Ist\x20es\x20jetzt\x20('+_0x16ead9+')\x20verdÃ¤chtig\x20still?\x202.\x20Akut\x20(vs.\x20STB):\x20Weicht\x20das\x20heutige\x20Verhalten\x20stark\x20von\x20den\x20letzten\x2014\x20Tagen\x20ab?\x20Ignoriere\x20Fehlalarme\x20durch\x20Kontext:\x20'+_0x5b2350,_0x45279c='AUTOMATION\x20RULES\x20(THE\x20BUTLER):\x20-\x20Only\x20propose\x20automation\x20if\x20you\x20see\x20a\x20STABLE,\x20REPETITIVE\x20pattern\x20(e.g.\x20happens\x20every\x20day).\x20-\x20IGNORE\x20one-time\x20events.\x20-\x20\x22targetId\x22\x20MUST\x20be\x20a\x20valid\x20sensor\x20ID.',_0x4cf063=_0x5b1ea3(0x1f7)+_0x16ead9+'.\x20MODUS:\x20'+_0x2a7dea+_0x5b1ea3(0x391)+(_0x313dfb['isPresent']?'Ja':_0x5b1ea3(0x235))+_0x5b1ea3(0x2a9)+_0x28b830+'.\x20PERSONA:\x20'+_0x2f2a99+'.\x20'+_0xea8bf3+'\x20'+(_0x494299?_0x494299:'')+'\x20'+_0x599aed+'\x20'+_0x45279c+_0x5b1ea3(0x241)+JSON[_0x5b1ea3(0x38d)](_0x66eaaf)+'\x20SCHEMA:\x20{\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22isEmergency\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x22comfort\x22:\x20{\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22execution\x22:\x20{\x20\x22targetId\x22:\x20\x22string|null\x22,\x20\x22targetValue\x22:\x20\x22boolean|number|null\x22\x20}\x20}\x20},\x20\x22health\x22:\x20{\x20\x22sleepScore\x22:\x20number\x20(0-100),\x20\x22restlessness\x22:\x20\x22string\x22,\x20\x22notes\x22:\x20\x22string\x22\x20}\x20}';try{const _0x3fb1b9=await _0x313dfb['geminiModel']['generateContent'](_0x4cf063),_0x513ce2=_0x3fb1b9[_0x5b1ea3(0x313)][_0x5b1ea3(0x38f)]()[_0x5b1ea3(0x211)](/```json|```/g,'')[_0x5b1ea3(0x33b)](),_0x459026=JSON[_0x5b1ea3(0x2ad)](_0x513ce2);await _0x313dfb['setStateAsync'](_0x5b1ea3(0x30e),{'val':_0x513ce2,'ack':!![]}),await _0x313dfb[_0x5b1ea3(0x341)]('analysis.alertReason',{'val':_0x459026['activity'][_0x5b1ea3(0x354)]||'','ack':!![]}),await _0x313dfb[_0x5b1ea3(0x341)](_0x5b1ea3(0x218),{'val':_0x459026[_0x5b1ea3(0x336)][_0x5b1ea3(0x25d)]||_0x5b1ea3(0x32b),'ack':!![]});const _0x15553d=_0x459026[_0x5b1ea3(0x245)]?.[_0x5b1ea3(0x388)];if(_0x313dfb['isProVersion']&&_0x15553d){const _0x4a4319=_0x15553d[_0x5b1ea3(0x38c)]||![];await _0x313dfb[_0x5b1ea3(0x341)](_0x5b1ea3(0x1ff),{'val':_0x4a4319,'ack':!![]}),await _0x313dfb[_0x5b1ea3(0x341)]('analysis.automation.description',{'val':_0x4a4319?_0x15553d[_0x5b1ea3(0x292)]:_0x5b1ea3(0x278),'ack':!![]});if(_0x4a4319&&_0x15553d[_0x5b1ea3(0x1f4)]&&_0x15553d['execution'][_0x5b1ea3(0x35c)]){await _0x313dfb[_0x5b1ea3(0x341)](_0x5b1ea3(0x2ce),{'val':_0x15553d['execution']['targetId'],'ack':!![]}),await _0x313dfb[_0x5b1ea3(0x341)](_0x5b1ea3(0x20d),{'val':JSON[_0x5b1ea3(0x38d)](_0x15553d[_0x5b1ea3(0x1f4)][_0x5b1ea3(0x2d2)]),'ack':!![]});const _0x237d22=await _0x313dfb[_0x5b1ea3(0x229)](_0x5b1ea3(0x351));_0x237d22&&_0x237d22[_0x5b1ea3(0x35f)]&&(_0x313dfb[_0x5b1ea3(0x2a5)][_0x5b1ea3(0x300)](_0x5b1ea3(0x2cb)+_0x15553d[_0x5b1ea3(0x1f4)]['targetId']+_0x5b1ea3(0x26d)+_0x15553d['execution'][_0x5b1ea3(0x2d2)]),executeAutomationAction(_0x313dfb));}else await _0x313dfb[_0x5b1ea3(0x341)]('analysis.automation.targetId',{'val':'','ack':!![]}),await _0x313dfb[_0x5b1ea3(0x341)](_0x5b1ea3(0x20d),{'val':'','ack':!![]});}if(_0x459026[_0x5b1ea3(0x336)]['isAlert']||_0x459026['activity']['isEmergency']){await _0x313dfb[_0x5b1ea3(0x341)]('analysis.isAlert',{'val':!![],'ack':!![]});if(!_0x313dfb[_0x5b1ea3(0x2f5)]||_0x459026[_0x5b1ea3(0x336)]['isEmergency']){const _0x382bfa=_0x459026[_0x5b1ea3(0x336)][_0x5b1ea3(0x21b)]?_0x5b1ea3(0x31b):_0x5b1ea3(0x2f1);sendNotification(_0x313dfb,_0x382bfa+':\x20'+_0x459026['activity'][_0x5b1ea3(0x354)],![],_0x459026[_0x5b1ea3(0x336)][_0x5b1ea3(0x21b)]);}}else await _0x313dfb[_0x5b1ea3(0x341)]('analysis.isAlert',{'val':![],'ack':!![]});_0x313dfb[_0x5b1ea3(0x2f5)]=_0x459026[_0x5b1ea3(0x336)][_0x5b1ea3(0x36f)]||_0x459026[_0x5b1ea3(0x336)][_0x5b1ea3(0x21b)],updateAnalysisHistory(_0x313dfb,{'timestamp':Date[_0x5b1ea3(0x33c)](),'id':Date[_0x5b1ea3(0x33c)]()[_0x5b1ea3(0x32e)](),'analysis':_0x459026,'systemMode':_0x2a7dea,'isPro':_0x313dfb[_0x5b1ea3(0x3a7)]});}catch(_0x129133){_0x313dfb[_0x5b1ea3(0x2a5)][_0x5b1ea3(0x200)](_0x5b1ea3(0x23a)+_0x129133[_0x5b1ea3(0x353)]);}}async function executeAutomationAction(_0x18217f){const _0x14ecf3=a0_0x55499d;try{const _0x340448=await _0x18217f[_0x14ecf3(0x229)](_0x14ecf3(0x2ce)),_0x326f39=await _0x18217f[_0x14ecf3(0x229)](_0x14ecf3(0x20d));if(_0x340448&&_0x340448[_0x14ecf3(0x35f)]&&_0x326f39){const _0x4e06b6=_0x340448['val'];let _0x5ce569=_0x326f39['val'];try{_0x5ce569=JSON[_0x14ecf3(0x2ad)](_0x5ce569);}catch(_0xddaab){}_0x18217f[_0x14ecf3(0x2a5)][_0x14ecf3(0x300)](_0x14ecf3(0x261)+_0x4e06b6+_0x14ecf3(0x26d)+_0x5ce569),await _0x18217f[_0x14ecf3(0x2c2)](_0x4e06b6,_0x5ce569);}else _0x18217f[_0x14ecf3(0x2a5)][_0x14ecf3(0x2b3)](_0x14ecf3(0x255));}catch(_0x147757){_0x18217f[_0x14ecf3(0x2a5)][_0x14ecf3(0x200)]('BUTLER\x20Execution\x20Error:\x20'+_0x147757[_0x14ecf3(0x353)]);}}async function runAutopilot(_0xbb72ed){const _0x44634e=a0_0x55499d,_0x2fc0bc=_0xbb72ed['config'][_0x44634e(0x3ac)],_0x38e2b8=_0xbb72ed[_0x44634e(0x2b2)][_0x44634e(0x355)]>0x0?_0xbb72ed[_0x44634e(0x2b2)][0x0][_0x44634e(0x21a)]:Date[_0x44634e(0x33c)](),_0x12dc85=(Date[_0x44634e(0x33c)]()-_0x38e2b8)/(0x3e8*0x3c*0x3c);let _0x30f372='';_0xbb72ed[_0x44634e(0x25c)]['inactivityMonitoringEnabled']&&_0xbb72ed['currentSystemMode']===SYSTEM_MODES[_0x44634e(0x329)]&&_0xbb72ed['isPresent']&&(_0x12dc85>_0x2fc0bc&&(_0x30f372=_0x44634e(0x332)+_0x12dc85[_0x44634e(0x330)](0x1)+_0x44634e(0x34f))),runGeminiAnalysis(_0xbb72ed,_0x30f372)['catch'](_0x2cc347=>_0xbb72ed[_0x44634e(0x2a5)][_0x44634e(0x200)](_0x2cc347));}async function createDailyDigest(_0x10d2c1){const _0x16f7ad=a0_0x55499d;if(!_0x10d2c1[_0x16f7ad(0x3a7)])return;await _0x10d2c1['setStateAsync'](LTM_DP_STATUS,{'val':_0x16f7ad(0x287)+new Date()[_0x16f7ad(0x36e)](),'ack':!![]});if(!_0x10d2c1[_0x16f7ad(0x2e7)]||_0x10d2c1[_0x16f7ad(0x220)][_0x16f7ad(0x355)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x10d2c1[_0x16f7ad(0x341)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x33d0f8=JSON[_0x16f7ad(0x2ad)](JSON['stringify'](_0x10d2c1[_0x16f7ad(0x220)])),_0x222a1d=_0x33d0f8[_0x16f7ad(0x355)],_0x242cb5=_0x16f7ad(0x254)+JSON[_0x16f7ad(0x38d)](_0x33d0f8);try{const _0x1e3bc1=await _0x10d2c1[_0x16f7ad(0x2e7)]['generateContent'](_0x242cb5),_0x4ffd5c=JSON[_0x16f7ad(0x2ad)](_0x1e3bc1[_0x16f7ad(0x313)]['text']()[_0x16f7ad(0x211)](/```json|```/g,'')['trim']());_0x4ffd5c[_0x16f7ad(0x25d)]&&(_0x10d2c1['dailyDigests'][_0x16f7ad(0x2c1)]({'timestamp':new Date()[_0x16f7ad(0x2a1)](),'eventCount':_0x222a1d,'summary':_0x4ffd5c[_0x16f7ad(0x25d)],'activityLevel':_0x4ffd5c[_0x16f7ad(0x34c)],'systemMode':_0x10d2c1[_0x16f7ad(0x3ad)]}),await saveDailyDigests(_0x10d2c1),_0x10d2c1[_0x16f7ad(0x220)]=[],await saveRawEventLog(_0x10d2c1),await _0x10d2c1[_0x16f7ad(0x341)](LTM_DP_STATUS,{'val':'Success:\x20Compressed\x20'+_0x222a1d+_0x16f7ad(0x379),'ack':!![]}));}catch(_0x5f03df){await _0x10d2c1[_0x16f7ad(0x341)](LTM_DP_STATUS,{'val':_0x16f7ad(0x3b2)+_0x5f03df[_0x16f7ad(0x353)],'ack':!![]});}}async function sendMorningBriefing(_0x817462){const _0xf53319=a0_0x55499d;if(!_0x817462[_0xf53319(0x2e7)])return;_0x817462[_0xf53319(0x2a5)][_0xf53319(0x300)](_0xf53319(0x29e));const _0x394709=_0x817462[_0xf53319(0x30a)][_0xf53319(0x355)]>0x0?_0x817462[_0xf53319(0x30a)][_0x817462[_0xf53319(0x30a)]['length']-0x1]:null,_0x36efbc=_0x394709&&_0x394709[_0xf53319(0x359)]?_0x394709[_0xf53319(0x359)][_0xf53319(0x39a)]:_0xf53319(0x32b),_0x124805=new Date();_0x124805['setHours'](0x4,0x0,0x0,0x0);const _0x15ea38=_0x817462[_0xf53319(0x2b2)][_0xf53319(0x213)](_0x22d44e=>new Date(_0x22d44e[_0xf53319(0x21a)])>_0x124805),_0x2b6a7a=PERSONA_MAPPING[_0x817462[_0xf53319(0x25c)][_0xf53319(0x2f3)]||_0xf53319(0x317)],_0x38d4da=_0x817462[_0xf53319(0x25c)][_0xf53319(0x24d)]||'',_0x158ce8=await getWeatherContext(_0x817462),_0x5bb285=await getCalendarContext(_0x817462),_0x81d92=_0xf53319(0x24c)+_0x2b6a7a+_0xf53319(0x2a9)+_0x38d4da+_0xf53319(0x385)+_0x158ce8+'\x20'+_0x5bb285+_0xf53319(0x3aa)+_0x36efbc+'/100,\x20AktivitÃ¤t\x20seit\x2004:00:\x20'+JSON[_0xf53319(0x38d)](_0x15ea38[_0xf53319(0x2ec)](0x0,0xa))+_0xf53319(0x265);try{const _0x5e0c55=await _0x817462[_0xf53319(0x2e7)][_0xf53319(0x251)](_0x81d92),_0x1571f9=_0xf53319(0x275)+_0x5e0c55[_0xf53319(0x313)][_0xf53319(0x38f)]()[_0xf53319(0x33b)]();sendNotification(_0x817462,_0x1571f9),_0x817462['log'][_0xf53319(0x300)](_0xf53319(0x2d0));}catch(_0x4e18c2){_0x817462[_0xf53319(0x2a5)][_0xf53319(0x200)](_0xf53319(0x263)+_0x4e18c2['message']);}}async function scanForDevices(_0xeadb3d,_0xff7e47){const _0x185a77=a0_0x55499d;_0xeadb3d[_0x185a77(0x2a5)][_0x185a77(0x300)](_0x185a77(0x22b));const _0x5e8bf3=[],_0x4e5f0f=await _0xeadb3d[_0x185a77(0x309)]('*'),_0x335d72=await _0xeadb3d['getForeignObjectsAsync'](_0x185a77(0x280),_0x185a77(0x25f)),_0x5a025e=await _0xeadb3d[_0x185a77(0x309)](_0x185a77(0x215),_0x185a77(0x25f)),_0x1bb41a={};if(_0x335d72)for(const _0x1d5258 in _0x335d72){const _0x344252=_0x335d72[_0x1d5258][_0x185a77(0x204)][_0x185a77(0x209)]||[];_0x344252['forEach'](_0x1aee5a=>{const _0x122eb1=_0x185a77;if(!_0x1bb41a[_0x1aee5a])_0x1bb41a[_0x1aee5a]=[];_0x1bb41a[_0x1aee5a][_0x122eb1(0x2c1)](_0x1d5258);});}const _0x343506={};if(_0x5a025e)for(const _0x269225 in _0x5a025e){const _0x4b1ecc=_0x5a025e[_0x269225][_0x185a77(0x204)][_0x185a77(0x209)]||[],_0x26db14=typeof _0x5a025e[_0x269225][_0x185a77(0x204)][_0x185a77(0x375)]===_0x185a77(0x20c)?_0x5a025e[_0x269225][_0x185a77(0x204)][_0x185a77(0x375)]['de']:_0x5a025e[_0x269225][_0x185a77(0x204)][_0x185a77(0x375)];_0x4b1ecc['forEach'](_0x3b195a=>_0x343506[_0x3b195a]=_0x26db14);}const _0x415f5d=_0xff7e47['selectedFunctionIds']||[],_0x4cf329=_0xff7e47[_0x185a77(0x277)]!==![],_0x2c0899=_0xff7e47[_0x185a77(0x290)]!==![],_0xa3f740=_0xff7e47[_0x185a77(0x24e)]!==![],_0x1a8aea=_0xff7e47[_0x185a77(0x2d6)]===!![],_0x2ce16d=_0xff7e47[_0x185a77(0x3a5)]===!![];for(const _0x4dd4a1 in _0x4e5f0f){const _0x106f4b=_0x4e5f0f[_0x4dd4a1];if(_0x106f4b['type']!==_0x185a77(0x38a)||!_0x106f4b['common'])continue;if(ADAPTER_BLACKLIST[_0x185a77(0x2ff)](_0x1b6bd2=>_0x4dd4a1[_0x185a77(0x253)](_0x1b6bd2))&&!_0x2ce16d)continue;const _0x2053fd=(_0x106f4b[_0x185a77(0x204)][_0x185a77(0x2fa)]||'')[_0x185a77(0x376)]();let _0x21fa10=(typeof _0x106f4b[_0x185a77(0x204)][_0x185a77(0x375)]===_0x185a77(0x20c)?_0x106f4b[_0x185a77(0x204)][_0x185a77(0x375)]['de']:_0x106f4b[_0x185a77(0x204)][_0x185a77(0x375)])||_0x4dd4a1;const _0x268edb=_0x21fa10[_0x185a77(0x376)]();let _0x23980d=![],_0x2d8a98=![];if(_0x415f5d[_0x185a77(0x355)]>0x0){const _0x4ee4c2=_0x1bb41a[_0x4dd4a1]||[],_0x3a8a3d=_0x4dd4a1[_0x185a77(0x2e5)]('.')[_0x185a77(0x2ec)](0x0,-0x1)['join']('.'),_0x2e5c93=_0x1bb41a[_0x3a8a3d]||[];(_0x4ee4c2[_0x185a77(0x2ff)](_0x3cb26f=>_0x415f5d[_0x185a77(0x1ec)](_0x3cb26f))||_0x2e5c93[_0x185a77(0x2ff)](_0x45eacf=>_0x415f5d[_0x185a77(0x1ec)](_0x45eacf)))&&(_0x23980d=!![],_0x2d8a98=!![]);}if(!_0x23980d&&!_0x2ce16d){if(HARD_IGNORE_TERMS[_0x185a77(0x2ff)](_0x10c3ea=>_0x4dd4a1['includes'](_0x10c3ea)||_0x268edb[_0x185a77(0x1ec)](_0x10c3ea['toLowerCase']())))continue;}if(BAD_NAMES[_0x185a77(0x2ff)](_0x3a6168=>_0x268edb===_0x3a6168||_0x268edb[_0x185a77(0x221)]('.'+_0x3a6168))){const _0x4c1977=_0x4dd4a1[_0x185a77(0x2e5)]('.');if(_0x4c1977[_0x185a77(0x355)]>0x2){const _0x4988dd=_0x4c1977['slice'](0x0,-0x1)[_0x185a77(0x396)]('.'),_0x325d14=_0x4e5f0f[_0x4988dd];if(_0x325d14&&_0x325d14[_0x185a77(0x204)]&&_0x325d14['common'][_0x185a77(0x375)]){const _0x3e9168=typeof _0x325d14[_0x185a77(0x204)]['name']===_0x185a77(0x20c)?_0x325d14[_0x185a77(0x204)][_0x185a77(0x375)]['de']:_0x325d14[_0x185a77(0x204)][_0x185a77(0x375)];if(_0x3e9168&&!_0x21fa10[_0x185a77(0x1ec)](_0x3e9168))_0x21fa10=_0x3e9168+'\x20'+_0x21fa10;}}}let _0x361b47='';if(_0x4cf329&&(_0x2053fd[_0x185a77(0x1ec)](_0x185a77(0x277))||_0x2053fd[_0x185a77(0x1ec)](_0x185a77(0x363))||_0x268edb[_0x185a77(0x1ec)]('bewegung')||_0x268edb[_0x185a77(0x1ec)](_0x185a77(0x386))))_0x361b47='motion';else{if(!_0x361b47&&_0x2c0899&&(_0x2053fd[_0x185a77(0x1ec)](_0x185a77(0x1f9))||_0x2053fd['includes'](_0x185a77(0x2dd))||_0x2053fd['includes'](_0x185a77(0x232))||_0x2053fd[_0x185a77(0x1ec)]('blind')||_0x2053fd['includes']('shutter')||_0x268edb[_0x185a77(0x1ec)](_0x185a77(0x3a9))||_0x268edb[_0x185a77(0x1ec)]('tÃ¼r')||_0x268edb[_0x185a77(0x1ec)]('rollladen')))_0x361b47=_0x185a77(0x1f9);else{if(!_0x361b47&&_0xa3f740&&(_0x2053fd['includes'](_0x185a77(0x319))||_0x2053fd[_0x185a77(0x1ec)]('switch')||_0x2053fd[_0x185a77(0x1ec)](_0x185a77(0x2f0))||_0x268edb[_0x185a77(0x1ec)]('licht')||_0x268edb[_0x185a77(0x1ec)](_0x185a77(0x234))||_0x268edb[_0x185a77(0x1ec)](_0x185a77(0x207)))){if(_0x106f4b[_0x185a77(0x204)]['write']||_0x2053fd[_0x185a77(0x1ec)](_0x185a77(0x257)))_0x361b47=_0x185a77(0x319);}else{if(!_0x361b47&&_0x1a8aea&&(_0x2053fd[_0x185a77(0x1ec)]('temperature')||_0x2053fd[_0x185a77(0x1ec)](_0x185a77(0x369))||_0x2053fd[_0x185a77(0x1ec)](_0x185a77(0x352))||_0x268edb[_0x185a77(0x1ec)](_0x185a77(0x2ac))||_0x268edb[_0x185a77(0x1ec)](_0x185a77(0x31f))||_0x268edb[_0x185a77(0x1ec)](_0x185a77(0x342))))_0x361b47=_0x185a77(0x2d6);else{if(!_0x361b47&&_0x2d8a98)_0x361b47=_0x185a77(0x2af);}}}}if(_0x361b47){let _0x3a612a=_0x343506[_0x4dd4a1]||'';if(!_0x3a612a){let _0x26e10b=_0x4dd4a1;for(let _0x354ced=0x0;_0x354ced<0x3;_0x354ced++){const _0x550fae=_0x26e10b[_0x185a77(0x2f4)]('.');if(_0x550fae===-0x1)break;_0x26e10b=_0x26e10b[_0x185a77(0x310)](0x0,_0x550fae);if(_0x343506[_0x26e10b]){_0x3a612a=_0x343506[_0x26e10b];break;}}}if(!_0x3a612a){const _0x992049=(_0x4dd4a1+'\x20'+_0x21fa10)[_0x185a77(0x376)]();if(_0x992049[_0x185a77(0x1ec)]('bad')||_0x992049['includes']('wc'))_0x3a612a=_0x185a77(0x378);else{if(_0x992049['includes']('kÃ¼che'))_0x3a612a=_0x185a77(0x372);else{if(_0x992049[_0x185a77(0x1ec)](_0x185a77(0x35b)))_0x3a612a=_0x185a77(0x3a2);else{if(_0x992049[_0x185a77(0x1ec)]('schlaf'))_0x3a612a=_0x185a77(0x2d3);else{if(_0x992049[_0x185a77(0x1ec)](_0x185a77(0x314)))_0x3a612a=_0x185a77(0x365);}}}}}_0x5e8bf3[_0x185a77(0x2c1)]({'id':_0x4dd4a1,'name':_0x21fa10,'location':_0x3a612a,'type':_0x361b47,'logDuplicates':_0x361b47===_0x185a77(0x277),'isExit':![],'_score':_0x3a612a?0x50:_0x361b47===_0x185a77(0x2af)?0x5a:0x28});}}return _0x5e8bf3['sort']((_0x19b290,_0x283217)=>_0x283217[_0x185a77(0x346)]-_0x19b290[_0x185a77(0x346)]),_0x5e8bf3;}if(require[a0_0x55499d(0x28c)]!==module)module[a0_0x55499d(0x382)]=_0x6b5154=>new CogniLiving(_0x6b5154);else new CogniLiving();