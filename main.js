const a0_0x1f2939=a0_0x5a24;(function(_0xbe986,_0x26d490){const _0x51f7d8=a0_0x5a24,_0x5bfa9a=_0xbe986();while(!![]){try{const _0x2fcfd5=parseInt(_0x51f7d8(0x180))/0x1+parseInt(_0x51f7d8(0xce))/0x2+parseInt(_0x51f7d8(0xd7))/0x3*(-parseInt(_0x51f7d8(0x128))/0x4)+-parseInt(_0x51f7d8(0x167))/0x5+parseInt(_0x51f7d8(0x165))/0x6*(parseInt(_0x51f7d8(0xfb))/0x7)+parseInt(_0x51f7d8(0x177))/0x8+-parseInt(_0x51f7d8(0x10d))/0x9;if(_0x2fcfd5===_0x26d490)break;else _0x5bfa9a['push'](_0x5bfa9a['shift']());}catch(_0x230fc8){_0x5bfa9a['push'](_0x5bfa9a['shift']());}}}(a0_0x364b,0xf000c));const a0_0x555559=(function(){let _0x327167=!![];return function(_0x5c7d3f,_0x287def){const _0x2f334b=_0x327167?function(){const _0x1c7790=a0_0x5a24;if(_0x287def){const _0x3a0033=_0x287def[_0x1c7790(0x13d)](_0x5c7d3f,arguments);return _0x287def=null,_0x3a0033;}}:function(){};return _0x327167=![],_0x2f334b;};}()),a0_0x3a109c=a0_0x555559(this,function(){const _0x49cd30=a0_0x5a24;return a0_0x3a109c[_0x49cd30(0x10f)]()[_0x49cd30(0xcb)]('(((.+)+)+)+$')['toString']()[_0x49cd30(0x111)](a0_0x3a109c)[_0x49cd30(0xcb)](_0x49cd30(0x12a));});a0_0x3a109c();'use strict';function a0_0x364b(){const _0x451415=['debug','processSensorEvent','application/json','error','analysisHistory','stringify','runBaselineDriftAnalysis','Sec-Training\x20started...','ANALYZE_TREND','checkAndInstall','VACATION','runGeminiAnalysis','endsWith','bind','TRAIN_HEALTH','push','./lib/ai_agent','lastAlertState','main','join','notifyTelegramInstance','SET_TOPOLOGY','minDaysForBaseline','toLowerCase','analysis.training.triggerEnergy','common','slice','ready','13758eAVXAX','Lernphase\x20(','6946190bUAhhA','abortExitTimer','LTM.dailyDigests','driftAnalysisTimer','LTM.rawEventLog','activityLevel','setState','./lib/setup','analysis.triggerBriefing','fill','values','rawEventLog','message','enum','\x20Tage)','pop','5649400FcbkDA','getEnums','LTM.trainingData.thermodynamics','WiFi\x20Presence\x20detected.','find','sendTo','runAutopilot','getTime','Gemini\x20Init\x20Error:\x20','1007711MMOBYK','object','stopService','setupDriftAnalysisScheduler','onStateChange','@google/generative-ai','from','initZombies','command','unload','system.mode','currentSystemMode','setupModeResetScheduler','.system.mode','subscribeForeignStatesAsync','name','split','callback','analysis.health.todayVector','length','search','exitTimer','ðŸ•¸ï¸\x20Topology\x20Graph\x20manually\x20updated\x20by\x20user.','3210474uSsYip','timestamp','isProVersion','LTM.trainingData.sequences','licenseKey','analysis.training.triggerSecurity','analysis.training.triggerHealth','eventHistory','runPythonHealthCheck','246219UqNyBe','TRAIN_COMFORT','SYSTEM_DP_MODE','updateHealthVector','analysis.training.triggerComfort','ltmJob','sensorLastValues','analysis.training.status','inactivityThresholdHours','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','Training\x20Error:\x20','loadSystemMode','briefingJob','Aktiv\x20(','startSystem','devices','subscribeStates','triggerBriefing','triggerEnergyPrediction','matrix','scanDevices','SYSTEM_MODES','telegram','parse','setupBriefingScheduler','analysisTimer','communicate.request','TRAIN_SECURITY','createDailyDigest','startService','checkWifiPresence','analysis.training.triggerTopology','floor','Adapter','geminiApiKey','Gemini\x20AI\x20initialized.','1827WSyMfQ','ðŸ§ \x20Triggering\x20Security\x20Training...','analysis.trigger','online','type','initHistory','keys','version','forEach','Topology\x20Update\x20Error:\x20','modeResetJob','now','scanForDevices','systemConfig','genAI','.communicate.request','triggerDailyDigest','setStateAsync','10953126VPIAvt','getForeignObjectsAsync','toString','getGenerativeModel','constructor','./lib/python_bridge','ANALYZE_GAIT','config','getOverviewData','cogni-living','includes','analysis.automation.triggerAction','getState','namespace','dependencyInstallInProgress','stateChange','log','analysisInterval','analysis.topology.structure','location','send','ack','checkLicense','cogni-living\x20adapter\x20starting\x20(v','setupLtmScheduler','onReady','./lib/topology','16GfVcSp','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','(((.+)+)+)+$','getStateAsync','PREDICT_ENERGY','getHours','./lib/installer','cancel','@iobroker/adapter-core','isPresent','dailyDigests','enum.rooms.*','createAllObjects','temperature','updateTopology','triggerGaitAnalysis','setPresence','val','initSystemConfig','onMessage','info','apply','onUnload','presenceDevices','NORMAL','ðŸ•¸ï¸\x20Manually\x20triggering\x20Topology\x20Update...','executeAutomationAction','geminiModel','Activity-Level','models/gemini-flash-latest','LTM.triggerDailyDigest','updateTopologyMatrix','isGracePeriodActive'];a0_0x364b=function(){return _0x451415;};return a0_0x364b();}function a0_0x5a24(_0x3e7619,_0x1ef8c5){const _0x4c973e=a0_0x364b();return a0_0x5a24=function(_0x3a109c,_0x555559){_0x3a109c=_0x3a109c-0xba;let _0x364b88=_0x4c973e[_0x3a109c];return _0x364b88;},a0_0x5a24(_0x3e7619,_0x1ef8c5);}const utils=require(a0_0x1f2939(0x130)),{GoogleGenerativeAI}=require(a0_0x1f2939(0xbc)),installer=require(a0_0x1f2939(0x12e)),scanner=require('./lib/scanner'),schedulers=require('./lib/scheduler'),topology=require(a0_0x1f2939(0x127)),setup=require(a0_0x1f2939(0x16e)),recorder=require('./lib/recorder'),pythonBridge=require(a0_0x1f2939(0x112)),aiAgent=require(a0_0x1f2939(0x159)),GEMINI_MODEL=a0_0x1f2939(0x145),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x1f2939(0xf8)]{constructor(_0xf10d91){const _0x58b00b=a0_0x1f2939;super({..._0xf10d91,'name':_0x58b00b(0x116)}),this[_0x58b00b(0xd5)]=[],this[_0x58b00b(0x14d)]=[],this['rawEventLog']=[],this[_0x58b00b(0x132)]=[],this['sensorLastValues']={},this[_0x58b00b(0x108)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x58b00b(0xcc)]=null,this['exitGraceTimer']=null,this[_0x58b00b(0x148)]=![],this[_0x58b00b(0x109)]=null,this[_0x58b00b(0x143)]=null,this[_0x58b00b(0xc2)]=setup[_0x58b00b(0xec)][_0x58b00b(0x140)],this[_0x58b00b(0xd0)]=![],this[_0x58b00b(0x15a)]=![],this['analysisTimer']=null,this[_0x58b00b(0xdc)]=null,this[_0x58b00b(0x105)]=null,this['driftAnalysisTimer']=null,this[_0x58b00b(0xe3)]=null,this[_0x58b00b(0x11b)]=![],this['on'](_0x58b00b(0x164),this[_0x58b00b(0x126)][_0x58b00b(0x156)](this)),this['on'](_0x58b00b(0x11c),this[_0x58b00b(0xbb)]['bind'](this)),this['on'](_0x58b00b(0xc0),this['onUnload'][_0x58b00b(0x156)](this)),this['on'](_0x58b00b(0x173),this[_0x58b00b(0x13b)][_0x58b00b(0x156)](this));}async[a0_0x1f2939(0x126)](){const _0x5ac67a=a0_0x1f2939;this[_0x5ac67a(0x11d)][_0x5ac67a(0x13c)](_0x5ac67a(0x124)+this[_0x5ac67a(0x102)]+')\x20-\x20Phase\x20C\x20(Refactored)');if(!installer[_0x5ac67a(0x152)](this,()=>this['startSystem']()))return;}async[a0_0x1f2939(0xe5)](){const _0x587daa=a0_0x1f2939;await setup[_0x587daa(0xbe)](this);try{this[_0x587daa(0xd0)]=await setup[_0x587daa(0x123)](this[_0x587daa(0x114)][_0x587daa(0xd2)]);}catch(_0x1fdf4a){}if(!this[_0x587daa(0x114)]['inactivityThresholdHours']||this['config'][_0x587daa(0xdf)]<0.1)this['config']['inactivityThresholdHours']=0xc;await setup[_0x587daa(0x100)](this),await setup[_0x587daa(0x13a)](this);if(this[_0x587daa(0x114)][_0x587daa(0xf9)])try{this[_0x587daa(0x109)]=new GoogleGenerativeAI(this[_0x587daa(0x114)][_0x587daa(0xf9)]),this[_0x587daa(0x143)]=this[_0x587daa(0x109)][_0x587daa(0x110)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x587daa(0x14b)}}),this[_0x587daa(0x11d)][_0x587daa(0x13c)](_0x587daa(0xfa));}catch(_0x197af1){this[_0x587daa(0x11d)][_0x587daa(0x14c)](_0x587daa(0x17f)+_0x197af1[_0x587daa(0x173)]);}await setup[_0x587daa(0x134)](this),await this[_0x587daa(0xe2)]();try{const _0x2e3df9=await this[_0x587daa(0x12b)](_0x587daa(0x16b));if(_0x2e3df9&&_0x2e3df9[_0x587daa(0x139)])this[_0x587daa(0x172)]=JSON[_0x587daa(0xee)](_0x2e3df9[_0x587daa(0x139)]);}catch(_0x4186b5){this[_0x587daa(0x172)]=[];}try{const _0xcb7fe5=await this[_0x587daa(0x12b)](_0x587daa(0x169));if(_0xcb7fe5&&_0xcb7fe5[_0x587daa(0x139)])this[_0x587daa(0x132)]=JSON[_0x587daa(0xee)](_0xcb7fe5[_0x587daa(0x139)]);}catch(_0x32038c){this[_0x587daa(0x132)]=[];}const _0x22e68e=this[_0x587daa(0x132)]['length']>=(this[_0x587daa(0x114)][_0x587daa(0x15f)]||0x7)?_0x587daa(0xe4)+this[_0x587daa(0x132)][_0x587daa(0xca)]+_0x587daa(0x175):_0x587daa(0x166)+this[_0x587daa(0x132)][_0x587daa(0xca)]+'/'+(this[_0x587daa(0x114)][_0x587daa(0x15f)]||0x7)+')';await this[_0x587daa(0x10c)]('LTM.baselineStatus',{'val':_0x22e68e,'ack':!![]}),this[_0x587daa(0xe7)](_0x587daa(0xfd)),this['subscribeStates'](_0x587daa(0x146)),this['subscribeStates'](_0x587daa(0xc1)),this['subscribeStates'](_0x587daa(0x16f)),this[_0x587daa(0xe7)](_0x587daa(0x118)),this[_0x587daa(0xe7)]('analysis.automation.autoApply'),this[_0x587daa(0xe7)](_0x587daa(0xd3)),this[_0x587daa(0xe7)]('analysis.training.triggerHealth'),this[_0x587daa(0xe7)](_0x587daa(0x161)),this[_0x587daa(0xe7)]('analysis.training.triggerComfort'),this[_0x587daa(0xe7)](_0x587daa(0xf6));const _0x2fad06=this[_0x587daa(0x114)]['devices'];if(_0x2fad06)for(const _0x26d8bc of _0x2fad06){await this[_0x587daa(0xc5)](_0x26d8bc['id']);}const _0x54c784=this[_0x587daa(0x114)][_0x587daa(0x13f)];if(_0x54c784)for(const _0x34120f of _0x54c784){await this[_0x587daa(0xc5)](_0x34120f);}if(this[_0x587daa(0x114)]['notifyTelegramEnabled']&&this['config'][_0x587daa(0x15d)])await this['subscribeForeignStatesAsync'](this[_0x587daa(0x114)][_0x587daa(0x15d)]+_0x587daa(0x10a));setTimeout(()=>this[_0x587daa(0xf5)](),0x1388);if(this[_0x587daa(0xf0)])clearInterval(this[_0x587daa(0xf0)]);const _0x308719=this[_0x587daa(0x114)][_0x587daa(0x11e)]||0xf;_0x308719>0x0&&(this[_0x587daa(0xf0)]=setInterval(()=>{const _0x5e3824=_0x587daa;this[_0x5e3824(0x17d)]();},_0x308719*0x3c*0x3e8)),schedulers[_0x587daa(0x125)](this,()=>aiAgent[_0x587daa(0xf3)](this,pythonBridge)),schedulers[_0x587daa(0xc3)](this),schedulers[_0x587daa(0xba)](this,()=>aiAgent[_0x587daa(0x14f)](this)),schedulers[_0x587daa(0xef)](this,()=>aiAgent['sendMorningBriefing'](this)),pythonBridge[_0x587daa(0xf4)](this,installer['PYTHON_EXE']),setTimeout(async()=>{const _0x11b06a=_0x587daa;await topology[_0x11b06a(0x136)](this);try{const _0x5445ae=await this['getStateAsync']('analysis.topology.structure');if(_0x5445ae&&_0x5445ae[_0x11b06a(0x139)])pythonBridge[_0x11b06a(0x121)](this,_0x11b06a(0x15e),JSON[_0x11b06a(0xee)](_0x5445ae['val']));}catch(_0xdcb2e3){}this[_0x11b06a(0xd6)](),this['triggerGaitAnalysis'](),this[_0x11b06a(0xe9)](),this[_0x11b06a(0xda)]();},0x1388);}[a0_0x1f2939(0x13e)](_0x2f535e){const _0x5408da=a0_0x1f2939;if(this[_0x5408da(0xf0)])clearInterval(this[_0x5408da(0xf0)]);if(this[_0x5408da(0x16a)])clearInterval(this[_0x5408da(0x16a)]);if(this['ltmJob'])this[_0x5408da(0xdc)][_0x5408da(0x12f)]();if(this[_0x5408da(0x105)])this[_0x5408da(0x105)][_0x5408da(0x12f)]();if(this[_0x5408da(0xe3)])this[_0x5408da(0xe3)][_0x5408da(0x12f)]();recorder[_0x5408da(0x168)](this),pythonBridge[_0x5408da(0x182)](this),_0x2f535e();}async['onStateChange'](_0x2e68f0,_0x4da07f){const _0x49404e=a0_0x1f2939;if(!_0x4da07f||this[_0x49404e(0x11b)])return;if(_0x2e68f0[_0x49404e(0x117)](_0x49404e(0xed))&&_0x2e68f0[_0x49404e(0x155)](_0x49404e(0xf1))&&_0x4da07f['val'])return;if(_0x2e68f0===this[_0x49404e(0x11a)]+_0x49404e(0xc4)){if(_0x4da07f[_0x49404e(0x139)]&&Object[_0x49404e(0x171)](setup['SYSTEM_MODES'])[_0x49404e(0x117)](_0x4da07f['val'])){this[_0x49404e(0xc2)]=_0x4da07f[_0x49404e(0x139)];if(_0x4da07f['val']===setup[_0x49404e(0xec)][_0x49404e(0x153)])await recorder['setPresence'](this,![]);else await recorder['setPresence'](this,!![]);}if(!_0x4da07f[_0x49404e(0x122)])this[_0x49404e(0x16d)](_0x2e68f0,{'val':this[_0x49404e(0xc2)],'ack':!![]});return;}if(!_0x4da07f['ack']){_0x2e68f0[_0x49404e(0x117)]('analysis.trigger')&&_0x4da07f[_0x49404e(0x139)]&&(this['setState'](_0x2e68f0,{'val':![],'ack':!![]}),aiAgent[_0x49404e(0x154)](this));if(_0x2e68f0[_0x49404e(0x117)](_0x49404e(0x10b))&&_0x4da07f[_0x49404e(0x139)]){this['setState'](_0x2e68f0,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent[_0x49404e(0xf3)](this,pythonBridge);}_0x2e68f0[_0x49404e(0x117)](_0x49404e(0xe8))&&_0x4da07f['val']&&(this[_0x49404e(0x16d)](_0x2e68f0,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this));_0x2e68f0[_0x49404e(0x117)]('automation.triggerAction')&&_0x4da07f[_0x49404e(0x139)]&&(this['setState'](_0x2e68f0,{'val':![],'ack':!![]}),aiAgent[_0x49404e(0x142)](this));if(_0x2e68f0['includes'](_0x49404e(0xd3))&&_0x4da07f[_0x49404e(0x139)]){this[_0x49404e(0x16d)](_0x2e68f0,{'val':![],'ack':!![]});if(this[_0x49404e(0xd0)])try{const _0x3e1b06=await this['getStateAsync'](_0x49404e(0xd1));if(_0x3e1b06&&_0x3e1b06[_0x49404e(0x139)]){const _0x2ede62=JSON['parse'](_0x3e1b06[_0x49404e(0x139)]);this[_0x49404e(0x11d)][_0x49404e(0x13c)](_0x49404e(0xfc)),this[_0x49404e(0x10c)](_0x49404e(0xde),{'val':_0x49404e(0x150),'ack':!![]}),pythonBridge[_0x49404e(0x121)](this,_0x49404e(0xf2),{'sequences':_0x2ede62});}}catch(_0x277bdf){this[_0x49404e(0x11d)][_0x49404e(0x14c)](_0x49404e(0xe1)+_0x277bdf[_0x49404e(0x173)]);}}if(_0x2e68f0[_0x49404e(0x117)](_0x49404e(0xd4))&&_0x4da07f['val']){this[_0x49404e(0x16d)](_0x2e68f0,{'val':![],'ack':!![]});if(this[_0x49404e(0xd0)])try{const _0x2d7792=await this[_0x49404e(0x12b)](_0x49404e(0x169));if(_0x2d7792&&_0x2d7792[_0x49404e(0x139)])pythonBridge[_0x49404e(0x121)](this,_0x49404e(0x157),{'digests':JSON[_0x49404e(0xee)](_0x2d7792[_0x49404e(0x139)])});}catch(_0x3d8175){}}if(_0x2e68f0[_0x49404e(0x117)](_0x49404e(0x161))&&_0x4da07f[_0x49404e(0x139)]){this[_0x49404e(0x16d)](_0x2e68f0,{'val':![],'ack':!![]});if(this[_0x49404e(0xd0)])try{const _0x301185=await this['getStateAsync'](_0x49404e(0x179));if(_0x301185&&_0x301185[_0x49404e(0x139)])pythonBridge[_0x49404e(0x121)](this,'TRAIN_ENERGY',{'points':JSON[_0x49404e(0xee)](_0x301185[_0x49404e(0x139)])});}catch(_0x1da7f2){}}if(_0x2e68f0[_0x49404e(0x117)](_0x49404e(0xdb))&&_0x4da07f[_0x49404e(0x139)]){this[_0x49404e(0x16d)](_0x2e68f0,{'val':![],'ack':!![]});if(this[_0x49404e(0xd0)])try{const _0x24618e=await this[_0x49404e(0x12b)](_0x49404e(0x16b));_0x24618e&&_0x24618e[_0x49404e(0x139)]&&(this[_0x49404e(0x11d)][_0x49404e(0x13c)](_0x49404e(0x129)),pythonBridge[_0x49404e(0x121)](this,_0x49404e(0xd8),{'events':JSON[_0x49404e(0xee)](_0x24618e[_0x49404e(0x139)])}));}catch(_0x3bba8b){}}_0x2e68f0[_0x49404e(0x117)](_0x49404e(0xf6))&&_0x4da07f['val']&&(this[_0x49404e(0x16d)](_0x2e68f0,{'val':![],'ack':!![]}),this[_0x49404e(0x11d)]['info'](_0x49404e(0x141)),topology[_0x49404e(0x136)](this));return;}if(this[_0x49404e(0x114)][_0x49404e(0x13f)]&&this[_0x49404e(0x114)]['presenceDevices'][_0x49404e(0x117)](_0x2e68f0)){await this[_0x49404e(0xf5)]();return;}const _0x3daebe=(this['config'][_0x49404e(0xe6)]||[])[_0x49404e(0x17b)](_0x2688d0=>_0x2688d0['id']===_0x2e68f0);if(_0x3daebe)recorder[_0x49404e(0x14a)](this,_0x2e68f0,_0x4da07f,_0x3daebe);}async['onMessage'](_0x18aeb1){const _0x215f55=a0_0x1f2939;if(typeof _0x18aeb1===_0x215f55(0x181)&&_0x18aeb1[_0x215f55(0x173)]){if(_0x18aeb1[_0x215f55(0xbf)]==='testApiKey'){}else{if(_0x18aeb1[_0x215f55(0xbf)]===_0x215f55(0xeb))try{const _0x17c12c=await scanner[_0x215f55(0x107)](this,_0x18aeb1[_0x215f55(0x173)]||{});this[_0x215f55(0x17c)](_0x18aeb1['from'],_0x18aeb1[_0x215f55(0xbf)],{'success':!![],'devices':_0x17c12c},_0x18aeb1[_0x215f55(0xc8)]);}catch(_0x586292){this[_0x215f55(0x17c)](_0x18aeb1[_0x215f55(0xbd)],_0x18aeb1['command'],{'success':![],'error':_0x586292[_0x215f55(0x173)]},_0x18aeb1[_0x215f55(0xc8)]);}else{if(_0x18aeb1[_0x215f55(0xbf)]===_0x215f55(0x147)){const {matrix:_0x3f639a}=_0x18aeb1[_0x215f55(0x173)];try{const _0x19b9eb=await this[_0x215f55(0x12b)](_0x215f55(0x11f));if(_0x19b9eb&&_0x19b9eb['val']){const _0x260fb9=JSON[_0x215f55(0xee)](_0x19b9eb['val']);_0x260fb9[_0x215f55(0xea)]=_0x3f639a,_0x260fb9['updated']=Date[_0x215f55(0x106)](),await this[_0x215f55(0x10c)](_0x215f55(0x11f),{'val':JSON[_0x215f55(0x14e)](_0x260fb9),'ack':!![]}),this[_0x215f55(0x11d)][_0x215f55(0x13c)](_0x215f55(0xcd)),pythonBridge[_0x215f55(0x121)](this,_0x215f55(0x15e),_0x260fb9);}this[_0x215f55(0x17c)](_0x18aeb1['from'],_0x18aeb1[_0x215f55(0xbf)],{'success':!![]},_0x18aeb1['callback']);}catch(_0x26ca27){this[_0x215f55(0x11d)][_0x215f55(0x14c)](_0x215f55(0x104)+_0x26ca27[_0x215f55(0x173)]);}}else{if(_0x18aeb1['command']===_0x215f55(0x115)){const _0x576a12=this[_0x215f55(0x132)][_0x215f55(0xca)];this['sendTo'](_0x18aeb1[_0x215f55(0xbd)],_0x18aeb1[_0x215f55(0xbf)],{'success':!![],'eventHistory':this[_0x215f55(0xd5)][_0x215f55(0x163)](0x0,0xf),'stats':{'digestCount':_0x576a12,'isPresent':this['isPresent']}},_0x18aeb1['callback']);}else{if(_0x18aeb1[_0x215f55(0xbf)]===_0x215f55(0x178)){const _0x4d5967=await this[_0x215f55(0x10e)]('enum.functions.*',_0x215f55(0x174)),_0x4650e8=[];if(_0x4d5967)for(const _0xe7726 in _0x4d5967){const _0x122bb8=_0x4d5967[_0xe7726],_0x12e17b=(_0x122bb8[_0x215f55(0x162)]&&typeof _0x122bb8[_0x215f55(0x162)][_0x215f55(0xc6)]===_0x215f55(0x181)?_0x122bb8[_0x215f55(0x162)][_0x215f55(0xc6)]['de']:_0x122bb8[_0x215f55(0x162)][_0x215f55(0xc6)])||_0x122bb8[_0x215f55(0x162)][_0x215f55(0xc6)];_0x4650e8['push']({'id':_0xe7726,'name':_0x12e17b});}const _0x4bc6b2=await this[_0x215f55(0x10e)](_0x215f55(0x133),'enum'),_0x3441a2=[];if(_0x4bc6b2)for(const _0x3f5935 in _0x4bc6b2){const _0x431a0e=_0x4bc6b2[_0x3f5935],_0x4f132b=(_0x431a0e[_0x215f55(0x162)]&&typeof _0x431a0e['common'][_0x215f55(0xc6)]==='object'?_0x431a0e[_0x215f55(0x162)]['name']['de']:_0x431a0e[_0x215f55(0x162)][_0x215f55(0xc6)])||_0x3f5935[_0x215f55(0xc7)]('.')[_0x215f55(0x176)]();_0x3441a2[_0x215f55(0x158)](_0x4f132b);}this[_0x215f55(0x17c)](_0x18aeb1[_0x215f55(0xbd)],_0x18aeb1[_0x215f55(0xbf)],{'success':!![],'enums':_0x4650e8,'rooms':_0x3441a2},_0x18aeb1['callback']);}}}}}}}async[a0_0x1f2939(0xe2)](){const _0x2a967e=a0_0x1f2939;try{const _0x3d00bb=await this[_0x2a967e(0x12b)](setup[_0x2a967e(0xd9)]);_0x3d00bb&&_0x3d00bb['val']&&Object['values'](setup[_0x2a967e(0xec)])['includes'](_0x3d00bb['val'])?this['currentSystemMode']=_0x3d00bb['val']:(this[_0x2a967e(0xc2)]=setup[_0x2a967e(0xec)][_0x2a967e(0x140)],await this[_0x2a967e(0x10c)](setup[_0x2a967e(0xd9)],{'val':setup[_0x2a967e(0xec)][_0x2a967e(0x140)],'ack':!![]}));}catch(_0xe499b2){this[_0x2a967e(0xc2)]=setup[_0x2a967e(0xec)][_0x2a967e(0x140)];}}async[a0_0x1f2939(0xf5)](){const _0x158fd1=a0_0x1f2939;try{const _0x393f69=this[_0x158fd1(0x114)][_0x158fd1(0x13f)]||[];let _0x489a5e=![];const _0x278aff=[];for(const _0x4dee70 of _0x393f69){try{const _0x296997=await this['getForeignStateAsync'](_0x4dee70);_0x296997&&(_0x296997[_0x158fd1(0x139)]===!![]||_0x296997[_0x158fd1(0x139)]===_0x158fd1(0xfe)||_0x296997['val']===0x1)&&(_0x489a5e=!![],_0x278aff[_0x158fd1(0x158)](_0x4dee70));}catch(_0x5c40d1){}}return await this['setStateAsync']('system.presenceWho',{'val':_0x278aff[_0x158fd1(0x15c)](',\x20'),'ack':!![]}),_0x489a5e&&(this[_0x158fd1(0xcc)]&&(this[_0x158fd1(0x11d)][_0x158fd1(0x13c)](_0x158fd1(0x17a)),recorder['abortExitTimer'](this)),!this[_0x158fd1(0x131)]&&this['currentSystemMode']===setup[_0x158fd1(0xec)][_0x158fd1(0x140)]&&await recorder[_0x158fd1(0x138)](this,!![])),_0x489a5e;}catch(_0xac62af){return![];}}async[a0_0x1f2939(0x17d)](){const _0x5cd20e=a0_0x1f2939;this[_0x5cd20e(0x11d)][_0x5cd20e(0x149)](_0x5cd20e(0xe0)),await aiAgent[_0x5cd20e(0x154)](this),this[_0x5cd20e(0xda)](),this[_0x5cd20e(0x137)](),this[_0x5cd20e(0xe9)]();}[a0_0x1f2939(0x137)](){const _0x18b5b7=a0_0x1f2939;if(!this[_0x18b5b7(0xd0)])return;try{this[_0x18b5b7(0x119)](_0x18b5b7(0xd1),(_0xc96d75,_0x37c761)=>{const _0x52b454=_0x18b5b7;_0x37c761&&_0x37c761[_0x52b454(0x139)]&&pythonBridge[_0x52b454(0x121)](this,_0x52b454(0x113),{'sequences':JSON[_0x52b454(0xee)](_0x37c761[_0x52b454(0x139)])});});}catch(_0x138f12){}}async[a0_0x1f2939(0xe9)](){const _0x56f871=a0_0x1f2939;if(!this[_0x56f871(0xd0)])return;try{const _0x9a1da=await recorder['getOutsideTemperatureNumeric'](this);if(_0x9a1da===null)return;const _0x3cfb28={},_0x58d9e4=this[_0x56f871(0x114)]['devices']||[];for(const _0xabfbea of _0x58d9e4){if(_0xabfbea[_0x56f871(0xff)]===_0x56f871(0x135)&&_0xabfbea[_0x56f871(0x120)]){const _0x54db17=this[_0x56f871(0xdd)][_0xabfbea['id']];if(_0x54db17!==undefined)_0x3cfb28[_0xabfbea[_0x56f871(0x120)]]=_0x54db17;}}Object[_0x56f871(0x101)](_0x3cfb28)[_0x56f871(0xca)]>0x0&&pythonBridge[_0x56f871(0x121)](this,_0x56f871(0x12c),{'current_temps':_0x3cfb28,'t_out':_0x9a1da});}catch(_0x520c4a){}}['updateHealthVector'](){const _0x57b644=a0_0x1f2939;if(!this[_0x57b644(0x172)]||this[_0x57b644(0x172)][_0x57b644(0xca)]===0x0)return;const _0x5045f0=new Array(0x60)[_0x57b644(0x170)](0x0),_0x54a889=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x57b644(0x172)][_0x57b644(0x103)](_0x5c7f94=>{const _0x505026=_0x57b644,_0xb3c89=new Date(_0x5c7f94[_0x505026(0xcf)]);if(_0xb3c89[_0x505026(0x17e)]()>=_0x54a889){const _0x354f3f=_0xb3c89[_0x505026(0x12d)](),_0x9f9e5a=_0xb3c89['getMinutes'](),_0x3ee696=_0x354f3f*0x4+Math[_0x505026(0xf7)](_0x9f9e5a/0xf);if(_0x3ee696>=0x0&&_0x3ee696<0x60)_0x5045f0[_0x3ee696]++;}}),this[_0x57b644(0x10c)](_0x57b644(0xc9),{'val':JSON[_0x57b644(0x14e)](_0x5045f0),'ack':!![]});}[a0_0x1f2939(0xd6)](){const _0x44c90d=a0_0x1f2939;if(!this['dailyDigests']||this[_0x44c90d(0x132)][_0x44c90d(0xca)]<0x2)return;const _0x8bdb06=this[_0x44c90d(0x132)]['map'](_0x236314=>{const _0x5caac6=_0x44c90d,_0x614838=(_0x236314[_0x5caac6(0x16c)]||'')[_0x5caac6(0x160)]();return ACTIVITY_LEVEL_MAP[_0x614838]||0x32;});pythonBridge['send'](this,_0x44c90d(0x151),{'values':_0x8bdb06,'tag':_0x44c90d(0x144)});}}if(require[a0_0x1f2939(0x15b)]!==module)module['exports']=_0x27d2a0=>new CogniLiving(_0x27d2a0);else new CogniLiving();