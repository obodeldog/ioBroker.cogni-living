const a0_0x85d2bf=a0_0x2998;(function(_0x1ec864,_0x10e785){const _0x40f7d6=a0_0x2998,_0x3d2ea3=_0x1ec864();while(!![]){try{const _0x42bd46=-parseInt(_0x40f7d6(0x146))/0x1+parseInt(_0x40f7d6(0x29c))/0x2*(-parseInt(_0x40f7d6(0x179))/0x3)+parseInt(_0x40f7d6(0x27b))/0x4+parseInt(_0x40f7d6(0xc9))/0x5*(parseInt(_0x40f7d6(0xe2))/0x6)+-parseInt(_0x40f7d6(0x29a))/0x7+parseInt(_0x40f7d6(0x274))/0x8+-parseInt(_0x40f7d6(0xb9))/0x9*(-parseInt(_0x40f7d6(0x240))/0xa);if(_0x42bd46===_0x10e785)break;else _0x3d2ea3['push'](_0x3d2ea3['shift']());}catch(_0x2a6c58){_0x3d2ea3['push'](_0x3d2ea3['shift']());}}}(a0_0x4f4e,0xf1ceb));const a0_0x10a596=(function(){let _0x2c33c7=!![];return function(_0x40362b,_0x321092){const _0x5234c5=_0x2c33c7?function(){const _0x4c699e=a0_0x2998;if(_0x321092){const _0x458441=_0x321092[_0x4c699e(0x270)](_0x40362b,arguments);return _0x321092=null,_0x458441;}}:function(){};return _0x2c33c7=![],_0x5234c5;};}()),a0_0x24ccf3=a0_0x10a596(this,function(){const _0x49082b=a0_0x2998;return a0_0x24ccf3[_0x49082b(0x141)]()[_0x49082b(0x296)](_0x49082b(0x123))[_0x49082b(0x141)]()[_0x49082b(0x13c)](a0_0x24ccf3)[_0x49082b(0x296)](_0x49082b(0x123));});a0_0x24ccf3();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x85d2bf(0x1e4)),schedule=require(a0_0x85d2bf(0x1be)),{spawn,exec}=require(a0_0x85d2bf(0x1ad)),path=require(a0_0x85d2bf(0x206)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x85d2bf(0x254),LTM_SCHEDULE=a0_0x85d2bf(0x1cd),MODE_RESET_SCHEDULE=a0_0x85d2bf(0x217),ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,LTM_DP_RAW_LOG=a0_0x85d2bf(0x257),LTM_DP_DAILY_DIGESTS=a0_0x85d2bf(0x10f),LTM_DP_STATUS=a0_0x85d2bf(0x16e),LTM_DP_TRIGGER_DIGEST=a0_0x85d2bf(0x2af),LTM_DP_BASELINE_STATUS=a0_0x85d2bf(0x116),LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS=a0_0x85d2bf(0x28d),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x85d2bf(0xa9),SYSTEM_DP_MODE=a0_0x85d2bf(0xae),HARD_IGNORE_TERMS=[a0_0x85d2bf(0x12b),a0_0x85d2bf(0x1f2),a0_0x85d2bf(0x26a),'unreach','lowbat',a0_0x85d2bf(0x21b),a0_0x85d2bf(0x189),a0_0x85d2bf(0x23a),a0_0x85d2bf(0x236),a0_0x85d2bf(0x198),'working',a0_0x85d2bf(0xde),a0_0x85d2bf(0x1b9),a0_0x85d2bf(0xce),a0_0x85d2bf(0xea),'firmware',a0_0x85d2bf(0x1ca),a0_0x85d2bf(0xaf)],BAD_NAMES=['targetposition','currentposition',a0_0x85d2bf(0x215),a0_0x85d2bf(0x10e),'value','brightness','on',a0_0x85d2bf(0x25f),'switch',a0_0x85d2bf(0x120),a0_0x85d2bf(0x125),a0_0x85d2bf(0xa8),'cover',a0_0x85d2bf(0x23e),a0_0x85d2bf(0x201),a0_0x85d2bf(0x12f),a0_0x85d2bf(0x171),a0_0x85d2bf(0x287),'humidity',a0_0x85d2bf(0x14f),a0_0x85d2bf(0x140),'setpoint','valve',a0_0x85d2bf(0x295),a0_0x85d2bf(0xec)],ADAPTER_BLACKLIST=[a0_0x85d2bf(0x156),a0_0x85d2bf(0x211),a0_0x85d2bf(0xf0),a0_0x85d2bf(0x294),a0_0x85d2bf(0x131),a0_0x85d2bf(0xa6),a0_0x85d2bf(0xbf),a0_0x85d2bf(0x142),a0_0x85d2bf(0x13b),'javascript.',a0_0x85d2bf(0x162)],SYSTEM_MODES={'NORMAL':a0_0x85d2bf(0x209),'VACATION':a0_0x85d2bf(0x113),'PARTY':a0_0x85d2bf(0x173),'GUEST':a0_0x85d2bf(0x1f8)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x85d2bf(0x132)],SYSTEM_MODES[a0_0x85d2bf(0x24b)]],PERSONA_MAPPING={'generic':a0_0x85d2bf(0x21a),'senior_aal':a0_0x85d2bf(0x26d),'family':'Fokus\x20auf\x20Familienroutinen.','single_comfort':'Fokus\x20auf\x20Komfort.','security':'PRIORIT√ÑT:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x4ab043){const _0x520243=a0_0x85d2bf;try{const _0x5c346a=[_0x520243(0x224),'events.history_debug_00'];for(const _0x487a0d of _0x5c346a){try{const _0x4f65c9=await _0x4ab043['getObjectAsync'](_0x487a0d);_0x4f65c9&&await _0x4ab043[_0x520243(0x2ac)](_0x487a0d);}catch(_0x55f78c){}}}catch(_0x2f7d6c){}}async function initHistory(_0x3d70ba){const _0x569a29=a0_0x85d2bf;try{const _0x3cd8e4=await _0x3d70ba[_0x569a29(0x18e)](_0x569a29(0x10d));_0x3cd8e4&&_0x3cd8e4[_0x569a29(0xb1)]&&(_0x3d70ba['eventHistory']=JSON[_0x569a29(0xc3)](_0x3cd8e4[_0x569a29(0xb1)][_0x569a29(0x141)]()));}catch(_0x2b3e17){_0x3d70ba[_0x569a29(0x2a8)]=[];}try{const _0x10f43f=await _0x3d70ba[_0x569a29(0x18e)](_0x569a29(0x145));if(_0x10f43f&&_0x10f43f['val'])_0x3d70ba['analysisHistory']=JSON['parse'](_0x10f43f[_0x569a29(0xb1)][_0x569a29(0x141)]());}catch(_0x2bcaef){_0x3d70ba[_0x569a29(0x15f)]=[];}if(_0x3d70ba['eventHistory']&&_0x3d70ba[_0x569a29(0x2a8)][_0x569a29(0x1ff)]>0x0){_0x3d70ba[_0x569a29(0x24e)][_0x569a29(0x188)](_0x569a29(0x149)+_0x3d70ba['eventHistory'][_0x569a29(0x1ff)]+_0x569a29(0x19a));for(let _0x11f55e=_0x3d70ba['eventHistory'][_0x569a29(0x1ff)]-0x1;_0x11f55e>=0x0;_0x11f55e--){const _0x2ac653=_0x3d70ba['eventHistory'][_0x11f55e];_0x2ac653&&_0x2ac653['id']!==undefined&&_0x2ac653[_0x569a29(0x243)]!==undefined&&(_0x3d70ba[_0x569a29(0x1a8)][_0x2ac653['id']]=_0x2ac653[_0x569a29(0x243)]);}}}async function initSystemConfig(_0x4f9c81){const _0x2a0e25=a0_0x85d2bf;try{const _0x53e232=await _0x4f9c81['getForeignObjectAsync'](_0x2a0e25(0x25b));_0x53e232&&_0x53e232['common']&&(_0x4f9c81[_0x2a0e25(0xd8)]={'latitude':_0x53e232[_0x2a0e25(0x27e)]['latitude']||0x0,'longitude':_0x53e232[_0x2a0e25(0x27e)][_0x2a0e25(0x258)]||0x0,'city':_0x53e232[_0x2a0e25(0x27e)]['city']||''});}catch(_0x35781f){}}function a0_0x2998(_0x1b75c1,_0xad2778){const _0x157694=a0_0x4f4e();return a0_0x2998=function(_0x24ccf3,_0x10a596){_0x24ccf3=_0x24ccf3-0xa5;let _0x4f4e5d=_0x157694[_0x24ccf3];return _0x4f4e5d;},a0_0x2998(_0x1b75c1,_0xad2778);}async function checkLicense(_0x26b17a,_0x6c721d){const _0x58a373=a0_0x85d2bf;if(!_0x6c721d)return![];_0x26b17a[_0x58a373(0x1e2)]=await getSystemUUID(_0x26b17a);if(_0x6c721d===_0x58a373(0x2ab)||_0x6c721d[_0x58a373(0x2a2)](_0x58a373(0x2b2)))return!![];return![];}async function getSystemUUID(_0x3700c2){const _0x1c3395=a0_0x85d2bf;try{const _0x40fe1b=await _0x3700c2[_0x1c3395(0xf8)](_0x1c3395(0xd2));if(_0x40fe1b&&_0x40fe1b[_0x1c3395(0x27a)]&&_0x40fe1b[_0x1c3395(0x27a)]['uuid'])return _0x40fe1b['native']['uuid'];return _0x1c3395(0x106);}catch(_0xbbdaf){return _0x1c3395(0x212);}}async function createAllObjects(_0x58843c){const _0x3f8d31=a0_0x85d2bf;await checkSystemObjects(_0x58843c),await _0x58843c['setObjectNotExistsAsync']('system.presenceWho',{'type':_0x3f8d31(0x215),'common':{'name':_0x3f8d31(0x1c7),'type':_0x3f8d31(0xf7),'role':'text','read':!![],'write':![],'def':''},'native':{}}),await _0x58843c[_0x3f8d31(0x10a)](_0x3f8d31(0x202),{'type':'state','common':{'name':_0x3f8d31(0x26f),'type':_0x3f8d31(0xf7),'role':_0x3f8d31(0x1bd),'read':!![],'write':![]},'native':{}}),await _0x58843c[_0x3f8d31(0x10a)](_0x3f8d31(0x10d),{'type':'state','common':{'name':_0x3f8d31(0x238),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x58843c[_0x3f8d31(0x10a)]('analysis.trigger',{'type':_0x3f8d31(0x215),'common':{'name':_0x3f8d31(0xa7),'type':'boolean','role':_0x3f8d31(0x165),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x58843c['setObjectNotExistsAsync'](_0x3f8d31(0xef),{'type':'state','common':{'name':_0x3f8d31(0x265),'type':_0x3f8d31(0x289),'role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await _0x58843c['setObjectNotExistsAsync']('analysis.lastResult',{'type':'state','common':{'name':_0x3f8d31(0x1cb),'type':_0x3f8d31(0xf7),'role':_0x3f8d31(0x1bd),'read':!![],'write':![]},'native':{}}),await _0x58843c['setObjectNotExistsAsync'](_0x3f8d31(0x1ce),{'type':_0x3f8d31(0x215),'common':{'name':_0x3f8d31(0x174),'type':_0x3f8d31(0x289),'role':_0x3f8d31(0x291),'read':!![],'write':![],'def':![]},'native':{}}),await _0x58843c['setObjectNotExistsAsync'](_0x3f8d31(0x1f4),{'type':_0x3f8d31(0x215),'common':{'name':'AI\x20Emergency\x20Status','type':_0x3f8d31(0x289),'role':_0x3f8d31(0x148),'read':!![],'write':![],'def':![]},'native':{}}),await _0x58843c[_0x3f8d31(0x10a)](_0x3f8d31(0x228),{'type':_0x3f8d31(0x215),'common':{'name':_0x3f8d31(0x25a),'type':_0x3f8d31(0xf7),'role':_0x3f8d31(0xeb),'read':!![],'write':![]},'native':{}}),await _0x58843c[_0x3f8d31(0x10a)]('analysis.activitySummary',{'type':'state','common':{'name':_0x3f8d31(0x1c4),'type':_0x3f8d31(0xf7),'role':_0x3f8d31(0x22b),'read':!![],'write':![]},'native':{}}),await _0x58843c['setObjectNotExistsAsync'](_0x3f8d31(0x1cc),{'type':'state','common':{'name':'Deviation','type':_0x3f8d31(0xf7),'role':_0x3f8d31(0x215),'read':!![],'write':![],'def':_0x3f8d31(0x231)},'native':{}}),await _0x58843c['setObjectNotExistsAsync'](_0x3f8d31(0x20c),{'type':_0x3f8d31(0x215),'common':{'name':'Comfort\x20Summary','type':_0x3f8d31(0xf7),'role':_0x3f8d31(0x22b),'read':!![],'write':![]},'native':{}}),await _0x58843c[_0x3f8d31(0x10a)](_0x3f8d31(0x12e),{'type':_0x3f8d31(0x215),'common':{'name':_0x3f8d31(0xad),'type':_0x3f8d31(0xf7),'role':_0x3f8d31(0x22b),'read':!![],'write':![]},'native':{}}),await _0x58843c[_0x3f8d31(0x154)](_0x3f8d31(0x252),{'type':_0x3f8d31(0x23c),'common':{'name':_0x3f8d31(0x168)},'native':{}}),await _0x58843c['setObjectNotExistsAsync'](_0x3f8d31(0x14d),{'type':'state','common':{'name':_0x3f8d31(0x18a),'type':_0x3f8d31(0x289),'role':'indicator','read':!![],'write':![],'def':![]},'native':{}}),await _0x58843c[_0x3f8d31(0x10a)](_0x3f8d31(0x1eb),{'type':_0x3f8d31(0x215),'common':{'name':'Description','type':'string','role':_0x3f8d31(0x22b),'read':!![],'write':![]},'native':{}}),await _0x58843c[_0x3f8d31(0x10a)](_0x3f8d31(0x1b6),{'type':_0x3f8d31(0x215),'common':{'name':_0x3f8d31(0x18b),'type':_0x3f8d31(0xf7),'role':_0x3f8d31(0x22b),'read':!![],'write':![]},'native':{}}),await _0x58843c[_0x3f8d31(0x10a)]('analysis.automation.targetId',{'type':_0x3f8d31(0x215),'common':{'name':_0x3f8d31(0xe8),'type':_0x3f8d31(0xf7),'role':'text','read':!![],'write':![]},'native':{}}),await _0x58843c['setObjectNotExistsAsync'](_0x3f8d31(0x1ac),{'type':_0x3f8d31(0x215),'common':{'name':'Target\x20Value','type':'string','role':_0x3f8d31(0x22b),'read':!![],'write':![]},'native':{}}),await _0x58843c[_0x3f8d31(0x10a)](_0x3f8d31(0xac),{'type':_0x3f8d31(0x215),'common':{'name':_0x3f8d31(0x1db),'type':_0x3f8d31(0x289),'role':_0x3f8d31(0xe7),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x58843c[_0x3f8d31(0x10a)](_0x3f8d31(0x17b),{'type':'state','common':{'name':_0x3f8d31(0x281),'type':_0x3f8d31(0x289),'role':_0x3f8d31(0x165),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x58843c[_0x3f8d31(0x10a)](_0x3f8d31(0x145),{'type':_0x3f8d31(0x215),'common':{'name':'Logbook','type':_0x3f8d31(0xf7),'role':_0x3f8d31(0x1bd),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x58843c[_0x3f8d31(0x10a)](_0x3f8d31(0x15d),{'type':_0x3f8d31(0x215),'common':{'name':_0x3f8d31(0xcd),'type':_0x3f8d31(0xf7),'role':_0x3f8d31(0x1bd),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x58843c['extendObjectAsync'](_0x3f8d31(0x1e1),{'type':_0x3f8d31(0x23c),'common':{'name':_0x3f8d31(0x259)},'native':{}}),await _0x58843c[_0x3f8d31(0x10a)](_0x3f8d31(0x283),{'type':_0x3f8d31(0x215),'common':{'name':_0x3f8d31(0xc6),'type':_0x3f8d31(0x271),'role':'value.health','read':!![],'write':![],'def':0x0},'native':{}}),await _0x58843c[_0x3f8d31(0x10a)](_0x3f8d31(0x1d1),{'type':_0x3f8d31(0x215),'common':{'name':_0x3f8d31(0x138),'type':'string','role':_0x3f8d31(0x22b),'read':!![],'write':![],'def':'none'},'native':{}}),await _0x58843c['setObjectNotExistsAsync']('analysis.health.notes',{'type':'state','common':{'name':_0x3f8d31(0x29e),'type':'string','role':_0x3f8d31(0x22b),'read':!![],'write':![],'def':''},'native':{}}),await _0x58843c['setObjectNotExistsAsync']('analysis.health.trendDiagnosis',{'type':'state','common':{'name':_0x3f8d31(0x24f),'type':'string','role':'text','read':!![],'write':![],'def':_0x3f8d31(0x231)},'native':{}}),await _0x58843c[_0x3f8d31(0x10a)](_0x3f8d31(0x152),{'type':_0x3f8d31(0x215),'common':{'name':_0x3f8d31(0x10b),'type':_0x3f8d31(0x271),'role':_0x3f8d31(0x243),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x58843c[_0x3f8d31(0x154)](_0x3f8d31(0x11a),{'type':_0x3f8d31(0x23c),'common':{'name':_0x3f8d31(0x1e5)},'native':{}}),await _0x58843c[_0x3f8d31(0x10a)]('LTM.trainingData.sequences',{'type':_0x3f8d31(0x215),'common':{'name':_0x3f8d31(0xf2),'type':_0x3f8d31(0xf7),'role':_0x3f8d31(0x1bd),'read':!![],'write':![],'def':'[]','desc':_0x3f8d31(0x279)},'native':{}}),await _0x58843c[_0x3f8d31(0x10a)](_0x3f8d31(0x1d3),{'type':_0x3f8d31(0x215),'common':{'name':_0x3f8d31(0x1f3),'type':'string','role':_0x3f8d31(0x1bd),'read':!![],'write':![],'def':'[]','desc':_0x3f8d31(0x235)},'native':{}}),await checkLtmObjects(_0x58843c),await checkLtmDriftObjects(_0x58843c);}async function checkSystemObjects(_0x13ad29){const _0x4dc9bf=a0_0x85d2bf;await _0x13ad29[_0x4dc9bf(0x154)](_0x4dc9bf(0xc5),{'type':_0x4dc9bf(0x23c),'common':{'name':_0x4dc9bf(0xdf)},'native':{}}),await _0x13ad29['extendObjectAsync'](SYSTEM_DP_MODE,{'type':_0x4dc9bf(0x215),'common':{'name':_0x4dc9bf(0x2aa),'type':'string','role':_0x4dc9bf(0x215),'read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL'],'states':{[SYSTEM_MODES[_0x4dc9bf(0xbb)]]:_0x4dc9bf(0x249),[SYSTEM_MODES[_0x4dc9bf(0x219)]]:_0x4dc9bf(0x178),[SYSTEM_MODES[_0x4dc9bf(0x132)]]:_0x4dc9bf(0x29b),[SYSTEM_MODES['GUEST']]:_0x4dc9bf(0x17d)}},'native':{}});}async function checkLtmObjects(_0x58ac50){const _0x4702e0=a0_0x85d2bf;await _0x58ac50[_0x4702e0(0x154)](_0x4702e0(0x115),{'type':'channel','common':{'name':_0x4702e0(0x115)},'native':{}}),await _0x58ac50[_0x4702e0(0x154)](LTM_DP_RAW_LOG,{'type':_0x4702e0(0x215),'common':{'name':'Raw\x20Log','type':_0x4702e0(0xf7),'role':_0x4702e0(0x1bd),'read':!![],'write':![]},'native':{}}),await _0x58ac50[_0x4702e0(0x154)](LTM_DP_DAILY_DIGESTS,{'type':_0x4702e0(0x215),'common':{'name':'Daily\x20Digests','type':_0x4702e0(0xf7),'role':_0x4702e0(0x1bd),'read':!![],'write':![]},'native':{}}),await _0x58ac50[_0x4702e0(0x154)](LTM_DP_STATUS,{'type':_0x4702e0(0x215),'common':{'name':_0x4702e0(0x1a0),'type':_0x4702e0(0xf7),'role':_0x4702e0(0x22b),'read':!![],'write':![]},'native':{}}),await _0x58ac50['extendObjectAsync'](LTM_DP_TRIGGER_DIGEST,{'type':'state','common':{'name':_0x4702e0(0x193),'type':'boolean','role':_0x4702e0(0x165),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x58ac50[_0x4702e0(0x154)](LTM_DP_BASELINE_STATUS,{'type':'state','common':{'name':_0x4702e0(0x16d),'type':_0x4702e0(0xf7),'role':'text','read':!![],'write':![]},'native':{}});}async function checkLtmDriftObjects(_0x36214c){const _0x435cbb=a0_0x85d2bf;await _0x36214c[_0x435cbb(0x154)](LTM_DP_DRIFT_CHANNEL,{'type':_0x435cbb(0x23c),'common':{'name':'Drift\x20Analysis'},'native':{}}),await _0x36214c[_0x435cbb(0x154)](LTM_DP_DRIFT_STATUS,{'type':'state','common':{'name':_0x435cbb(0x12d),'type':_0x435cbb(0xf7),'role':_0x435cbb(0x215),'read':!![],'write':![],'def':_0x435cbb(0x231)},'native':{}}),await _0x36214c[_0x435cbb(0x154)](LTM_DP_DRIFT_DETAILS,{'type':_0x435cbb(0x215),'common':{'name':'Drift\x20Details','type':'string','role':_0x435cbb(0x22b),'read':!![],'write':![]},'native':{}}),await _0x36214c['extendObjectAsync'](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x435cbb(0x215),'common':{'name':_0x435cbb(0x1fb),'type':'number','role':_0x435cbb(0x17a),'read':!![],'write':![]},'native':{}});}async function loadSystemMode(_0x494bb8){const _0x431f43=a0_0x85d2bf;try{const _0x3d3f24=await _0x494bb8[_0x431f43(0x18e)](SYSTEM_DP_MODE);_0x3d3f24&&_0x3d3f24[_0x431f43(0xb1)]&&Object['values'](SYSTEM_MODES)['includes'](_0x3d3f24['val'])?_0x494bb8[_0x431f43(0x1f1)]=_0x3d3f24[_0x431f43(0xb1)]:(_0x494bb8[_0x431f43(0x1f1)]=SYSTEM_MODES['NORMAL'],await _0x494bb8[_0x431f43(0xbe)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x431f43(0xbb)],'ack':!![]}));}catch(_0x1c4fca){_0x494bb8[_0x431f43(0x1f1)]=SYSTEM_MODES[_0x431f43(0xbb)];}}async function loadRawEventLog(_0x4e3bcb){const _0x10dfc2=a0_0x85d2bf;try{const _0x561b86=await _0x4e3bcb[_0x10dfc2(0x18e)](LTM_DP_RAW_LOG);if(_0x561b86&&_0x561b86['val'])_0x4e3bcb[_0x10dfc2(0x137)]=JSON[_0x10dfc2(0xc3)](_0x561b86[_0x10dfc2(0xb1)]);}catch(_0x16d796){_0x4e3bcb['rawEventLog']=[];}}async function saveRawEventLog(_0xeb20a9){const _0x589e94=a0_0x85d2bf;_0xeb20a9['rawEventLog'][_0x589e94(0x1ff)]>RAW_LOG_MAX_SIZE&&_0xeb20a9['rawEventLog']['splice'](0x0,_0xeb20a9[_0x589e94(0x137)][_0x589e94(0x1ff)]-RAW_LOG_MAX_SIZE),await _0xeb20a9[_0x589e94(0xbe)](LTM_DP_RAW_LOG,{'val':JSON[_0x589e94(0xf4)](_0xeb20a9['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x186dbf){const _0x308017=a0_0x85d2bf;try{const _0x102db7=await _0x186dbf[_0x308017(0x18e)](LTM_DP_DAILY_DIGESTS);if(_0x102db7&&_0x102db7[_0x308017(0xb1)])_0x186dbf['dailyDigests']=JSON[_0x308017(0xc3)](_0x102db7[_0x308017(0xb1)]);}catch(_0x1294bc){_0x186dbf[_0x308017(0x180)]=[];}await updateBaselineStatus(_0x186dbf);}async function saveDailyDigests(_0x501b76,_0x5486a4=!![]){const _0x4c2c1f=a0_0x85d2bf,_0x44f590=_0x501b76[_0x4c2c1f(0x298)][_0x4c2c1f(0x230)]||0x3c;_0x501b76[_0x4c2c1f(0x180)]['length']>_0x44f590&&_0x501b76[_0x4c2c1f(0x180)][_0x4c2c1f(0xc8)](0x0,_0x501b76[_0x4c2c1f(0x180)]['length']-_0x44f590);await _0x501b76['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x4c2c1f(0xf4)](_0x501b76['dailyDigests']),'ack':!![]});if(_0x5486a4)await updateBaselineStatus(_0x501b76);}async function updateAnalysisHistory(_0x454401,_0x4d054b){const _0x5f44e4=a0_0x85d2bf;_0x454401[_0x5f44e4(0x15f)]['unshift'](_0x4d054b);if(_0x454401['analysisHistory'][_0x5f44e4(0x1ff)]>ANALYSIS_HISTORY_MAX_SIZE)_0x454401[_0x5f44e4(0x15f)]['pop']();await _0x454401['setStateAsync'](_0x5f44e4(0x145),{'val':JSON['stringify'](_0x454401[_0x5f44e4(0x15f)]),'ack':!![]});}async function updateBaselineStatus(_0x4d6455){const _0x9c1664=a0_0x85d2bf;if(!_0x4d6455[_0x9c1664(0x245)]){await _0x4d6455[_0x9c1664(0xbe)](LTM_DP_BASELINE_STATUS,{'val':_0x9c1664(0xb6),'ack':!![]});return;}const _0x35bcc0=_0x4d6455[_0x9c1664(0x180)][_0x9c1664(0x1ff)]>=(_0x4d6455[_0x9c1664(0x298)][_0x9c1664(0x1fc)]||0x7)?_0x9c1664(0x16b)+_0x4d6455[_0x9c1664(0x180)][_0x9c1664(0x1ff)]+_0x9c1664(0xbc):_0x9c1664(0x1aa)+_0x4d6455[_0x9c1664(0x180)][_0x9c1664(0x1ff)]+'/'+(_0x4d6455[_0x9c1664(0x298)][_0x9c1664(0x1fc)]||0x7)+')';await _0x4d6455[_0x9c1664(0xbe)](LTM_DP_BASELINE_STATUS,{'val':_0x35bcc0,'ack':!![]});}async function initSensorSubscriptions(_0x296edf){const _0x47d2cc=a0_0x85d2bf,_0x3c2089=_0x296edf['config'][_0x47d2cc(0x1a9)];if(_0x3c2089&&_0x3c2089[_0x47d2cc(0x1ff)]>0x0){_0x296edf[_0x47d2cc(0x24e)][_0x47d2cc(0x188)]('Subscribing\x20to\x20'+_0x3c2089['length']+'\x20sensors...');for(const _0x2753b0 of _0x3c2089){if(_0x2753b0['id']){await _0x296edf[_0x47d2cc(0x14c)](_0x2753b0['id']);try{const _0x282fda=await _0x296edf[_0x47d2cc(0x251)](_0x2753b0['id']);if(_0x282fda)_0x296edf[_0x47d2cc(0x1a8)][_0x2753b0['id']]=_0x282fda[_0x47d2cc(0xb1)];}catch(_0x38fc45){}}}}}async function initPresenceSubscriptions(_0xe604f){const _0x9a06ba=a0_0x85d2bf,_0x35efc7=_0xe604f['config']['presenceDevices']||[];if(_0x35efc7[_0x9a06ba(0x1ff)]>0x0){_0xe604f['log'][_0x9a06ba(0x188)](_0x9a06ba(0xcf)+_0x35efc7[_0x9a06ba(0x1ff)]+_0x9a06ba(0x124));for(const _0x5b08d5 of _0x35efc7){await _0xe604f[_0x9a06ba(0x14c)](_0x5b08d5);}try{await checkWifiPresence(_0xe604f);}catch(_0x11437d){}}}async function getWeatherContext(_0x27f8b1){const _0xc92fed=a0_0x85d2bf;try{if(!_0x27f8b1[_0xc92fed(0x298)][_0xc92fed(0x20e)])return'Wetter:\x20Deaktiviert';let _0x38b7b0='';const _0x565076=_0x27f8b1[_0xc92fed(0x298)][_0xc92fed(0x273)];if(_0x565076)try{if(_0x565076[_0xc92fed(0x213)]('accuweather')){const _0x146db3=await _0x27f8b1[_0xc92fed(0x251)](_0x565076+_0xc92fed(0x182));if(_0x146db3&&_0x146db3[_0xc92fed(0xb1)])_0x38b7b0=_0x146db3[_0xc92fed(0xb1)];}else{if(_0x565076[_0xc92fed(0x213)](_0xc92fed(0x26c))){const _0x54ea09=await _0x27f8b1[_0xc92fed(0x251)](_0x565076+_0xc92fed(0x1dd));if(_0x54ea09&&_0x54ea09[_0xc92fed(0xb1)])_0x38b7b0=_0x54ea09['val'];}else{if(_0x565076['includes'](_0xc92fed(0xf5))){const _0x49f3c3=await _0x27f8b1[_0xc92fed(0x251)](_0x565076+_0xc92fed(0x2a4));if(_0x49f3c3&&_0x49f3c3[_0xc92fed(0xb1)])_0x38b7b0=_0x49f3c3['val'];}}}}catch(_0x1bc1f6){}if(!_0x38b7b0){const _0x73bb35=[_0xc92fed(0x105),_0xc92fed(0x227),_0xc92fed(0xf1),_0xc92fed(0x18d)];for(const _0x13c41d of _0x73bb35){try{const _0x2dc820=await _0x27f8b1[_0xc92fed(0xf8)](_0x13c41d);if(_0x2dc820){if(_0x13c41d[_0xc92fed(0x213)](_0xc92fed(0x172))){const _0x3b598e=await _0x27f8b1[_0xc92fed(0x251)](_0x13c41d+_0xc92fed(0x182));if(_0x3b598e&&_0x3b598e[_0xc92fed(0xb1)]){_0x38b7b0=_0x3b598e[_0xc92fed(0xb1)];break;}}}}catch(_0x3532c9){}}}return _0x38b7b0?'WETTER:\x20'+_0x38b7b0:_0xc92fed(0x233);}catch(_0xf209a3){return _0xc92fed(0x255)+_0xf209a3[_0xc92fed(0x21d)];}}async function getCalendarContext(_0x37cf59){const _0x21ae36=a0_0x85d2bf;try{if(!_0x37cf59[_0x21ae36(0x298)][_0x21ae36(0x1c8)])return'Kalender:\x20Deaktiviert';let _0x42dbdf=_0x37cf59[_0x21ae36(0x298)][_0x21ae36(0x267)]||_0x21ae36(0x1b7),_0xdb8f1b=_0x37cf59[_0x21ae36(0x298)]['calendarSelection']||[];if(typeof _0xdb8f1b==='string')_0xdb8f1b=_0xdb8f1b[_0x21ae36(0x195)](',');try{const _0x4cdfee=await _0x37cf59['getForeignStateAsync'](_0x42dbdf+_0x21ae36(0x21c));if(_0x4cdfee&&_0x4cdfee[_0x21ae36(0xb1)]){let _0x578663=tryParse(_0x4cdfee[_0x21ae36(0xb1)]);if(_0x578663&&Array[_0x21ae36(0x284)](_0x578663)){if(_0xdb8f1b['length']>0x0)_0x578663=_0x578663[_0x21ae36(0x207)](_0x58582d=>_0xdb8f1b[_0x21ae36(0x213)](_0x58582d[_0x21ae36(0x121)]||''));else return _0x21ae36(0x14a);if(_0x578663[_0x21ae36(0x1ff)]>0x0){const _0x1cb42d=_0x578663[_0x21ae36(0x1ec)](0x0,0x3)[_0x21ae36(0x263)](_0x1de9bb=>{const _0x5c8216=_0x21ae36;let _0x2b18b4=_0x1de9bb['date'];if(_0x1de9bb[_0x5c8216(0x157)])_0x2b18b4+='\x20'+_0x1de9bb['time'];return _0x2b18b4+':\x20'+_0x1de9bb[_0x5c8216(0xfe)]+'\x20('+_0x1de9bb['_calName']+')';});return _0x21ae36(0x147)+_0x1cb42d[_0x21ae36(0x256)](_0x21ae36(0x158));}else return _0x21ae36(0x1fd);}}}catch(_0x2ecde7){_0x37cf59[_0x21ae36(0x24e)]['warn']('Error\x20reading\x20calendar\x20table:\x20'+_0x2ecde7[_0x21ae36(0x21d)]);}return'KALENDER:\x20Keine\x20Daten';}catch(_0x336a19){return _0x21ae36(0xdb)+_0x336a19[_0x21ae36(0x21d)];}}async function getCalendarNames(_0x2ea8b7,_0x577b1f){const _0x23e160=a0_0x85d2bf;try{const _0x42e23c=await _0x2ea8b7['getForeignStateAsync'](_0x577b1f+_0x23e160(0x21c));if(_0x42e23c&&_0x42e23c[_0x23e160(0xb1)]){const _0x411089=tryParse(_0x42e23c['val']);if(_0x411089&&Array[_0x23e160(0x284)](_0x411089)){const _0x2a3136=[...new Set(_0x411089['map'](_0x3980cb=>_0x3980cb['_calName'])[_0x23e160(0x207)](Boolean))];return _0x2a3136[_0x23e160(0xc2)]();}}return[];}catch(_0x42b8a9){return _0x2ea8b7['log'][_0x23e160(0x236)]('getCalendarNames\x20Error:\x20'+_0x42b8a9[_0x23e160(0x21d)]),[];}}async function checkWifiPresence(_0x1c6e4a){const _0x2bbce0=a0_0x85d2bf;try{const _0x12f9bd=_0x1c6e4a[_0x2bbce0(0x298)][_0x2bbce0(0x1fe)]||[];let _0x3d62d2=![];const _0x367cf7=[];for(const _0x33ef2e of _0x12f9bd){try{const _0x2c753b=await _0x1c6e4a[_0x2bbce0(0x251)](_0x33ef2e);if(_0x2c753b&&(_0x2c753b[_0x2bbce0(0xb1)]===!![]||_0x2c753b[_0x2bbce0(0xb1)]===_0x2bbce0(0xf9)||_0x2c753b[_0x2bbce0(0xb1)]===0x1)){_0x3d62d2=!![];const _0x2c5823=await _0x1c6e4a[_0x2bbce0(0xf8)](_0x33ef2e);let _0x28ea48=_0x33ef2e;_0x2c5823&&_0x2c5823[_0x2bbce0(0x27e)]&&_0x2c5823['common'][_0x2bbce0(0x200)]&&(_0x28ea48=typeof _0x2c5823['common'][_0x2bbce0(0x200)]===_0x2bbce0(0x155)?_0x2c5823[_0x2bbce0(0x27e)][_0x2bbce0(0x200)]['de']||_0x2c5823[_0x2bbce0(0x27e)][_0x2bbce0(0x200)]['en']:_0x2c5823[_0x2bbce0(0x27e)][_0x2bbce0(0x200)]),_0x367cf7[_0x2bbce0(0xaa)](_0x28ea48);}}catch(_0x4573bd){}}return await _0x1c6e4a[_0x2bbce0(0xbe)]('system.presenceWho',{'val':_0x367cf7['join'](',\x20'),'ack':!![]}),_0x3d62d2&&(_0x1c6e4a[_0x2bbce0(0x247)]&&(_0x1c6e4a['log']['info'](_0x2bbce0(0x1f7)),abortExitTimer(_0x1c6e4a)),!_0x1c6e4a['isPresent']&&_0x1c6e4a[_0x2bbce0(0x1f1)]===SYSTEM_MODES[_0x2bbce0(0xbb)]&&await setPresence(_0x1c6e4a,!![])),_0x3d62d2;}catch(_0x4498d0){return _0x1c6e4a[_0x2bbce0(0x24e)][_0x2bbce0(0x236)](_0x2bbce0(0x2a5)+_0x4498d0[_0x2bbce0(0x21d)]),![];}}function startExitTimer(_0x51dc5a){const _0x3f414c=a0_0x85d2bf;abortExitTimer(_0x51dc5a),_0x51dc5a[_0x3f414c(0xcc)]=!![],_0x51dc5a[_0x3f414c(0x1bf)]=setTimeout(()=>{const _0x5e491c=_0x3f414c;_0x51dc5a[_0x5e491c(0xcc)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x51dc5a['exitTimer']=setTimeout(()=>{const _0x575f69=_0x3f414c;setPresence(_0x51dc5a,![]),_0x51dc5a[_0x575f69(0x247)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x2156f5){const _0x35a127=a0_0x85d2bf;if(_0x2156f5[_0x35a127(0x247)])clearTimeout(_0x2156f5['exitTimer']);if(_0x2156f5[_0x35a127(0x1bf)])clearTimeout(_0x2156f5[_0x35a127(0x1bf)]);_0x2156f5[_0x35a127(0x247)]=null,_0x2156f5[_0x35a127(0x1bf)]=null,_0x2156f5[_0x35a127(0xcc)]=![];}async function setPresence(_0x27d123,_0x384709){const _0x47db39=a0_0x85d2bf;if(_0x27d123[_0x47db39(0x24c)]===_0x384709)return;_0x27d123['isPresent']=_0x384709,await _0x27d123[_0x47db39(0xbe)](_0x47db39(0x118),{'val':_0x384709,'ack':!![]});}async function saveFeedback(_0x9d59b7,_0x518b4e){const _0x3753c9=a0_0x85d2bf;_0x9d59b7[_0x3753c9(0x24e)][_0x3753c9(0x188)](_0x3753c9(0x102)+JSON['stringify'](_0x518b4e));}async function runBaselineDriftAnalysis(_0x151148){const _0x2a0174=a0_0x85d2bf;if(!_0x151148[_0x2a0174(0x245)]||!_0x151148[_0x2a0174(0x275)])return;const _0x16facf=_0x151148[_0x2a0174(0x298)][_0x2a0174(0x16c)]||0xe;if(_0x151148[_0x2a0174(0x180)][_0x2a0174(0x1ff)]<_0x16facf+(_0x151148[_0x2a0174(0x298)][_0x2a0174(0x1fc)]||0x7)){await _0x151148[_0x2a0174(0xbe)](LTM_DP_DRIFT_STATUS,{'val':_0x2a0174(0x27d),'ack':!![]});return;}const _0xf4d402=_0x151148[_0x2a0174(0x180)]['slice'](-_0x16facf),_0x28e005=_0x151148['dailyDigests'][_0x2a0174(0x1ec)](0x0,_0x151148[_0x2a0174(0x180)]['length']-_0x16facf),_0x3cbaef=_0x2a0174(0x1bb)+JSON[_0x2a0174(0xf4)](_0x28e005)+'\x0aSTB:\x20'+JSON[_0x2a0174(0xf4)](_0xf4d402);try{const _0x405f70=await _0x151148[_0x2a0174(0x275)][_0x2a0174(0x163)](_0x3cbaef),_0x103247=JSON[_0x2a0174(0xc3)](_0x405f70['response']['text']()[_0x2a0174(0x1f6)](/```json|```/g,'')['trim']());_0x103247[_0x2a0174(0xfc)]&&(await _0x151148[_0x2a0174(0xbe)](LTM_DP_DRIFT_STATUS,{'val':_0x103247['baselineDrift'],'ack':!![]}),await _0x151148[_0x2a0174(0xbe)](LTM_DP_DRIFT_DETAILS,{'val':_0x103247[_0x2a0174(0x286)],'ack':!![]}),await _0x151148[_0x2a0174(0xbe)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x2a0174(0x108)](),'ack':!![]}));}catch(_0x4a90fe){}}function setupLtmScheduler(_0x29cc3c){const _0x4615c9=a0_0x85d2bf;try{if(_0x29cc3c[_0x4615c9(0x1bc)])_0x29cc3c[_0x4615c9(0x1bc)][_0x4615c9(0xb7)]();if(!_0x29cc3c[_0x4615c9(0x245)]){_0x29cc3c[_0x4615c9(0xbe)](LTM_DP_STATUS,{'val':_0x4615c9(0xb6),'ack':!![]});return;}_0x29cc3c['ltmJob']=schedule[_0x4615c9(0x11c)](LTM_SCHEDULE,()=>createDailyDigest(_0x29cc3c));}catch(_0x46af7b){_0x29cc3c[_0x4615c9(0x24e)][_0x4615c9(0x236)]('LTM\x20Sched\x20Error:\x20'+_0x46af7b[_0x4615c9(0x21d)]);}}function setupModeResetScheduler(_0x530702){const _0x50beed=a0_0x85d2bf;try{if(_0x530702[_0x50beed(0xcb)])_0x530702[_0x50beed(0xcb)][_0x50beed(0xb7)]();_0x530702[_0x50beed(0xcb)]=schedule[_0x50beed(0x11c)](MODE_RESET_SCHEDULE,async()=>{const _0x53d46d=_0x50beed;await loadSystemMode(_0x530702),AUTO_RESET_MODES[_0x53d46d(0x213)](_0x530702[_0x53d46d(0x1f1)])&&await _0x530702[_0x53d46d(0xbe)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x53d46d(0xbb)],'ack':![]});});}catch(_0x5a5cd5){_0x530702[_0x50beed(0x24e)]['error']('Reset\x20Sched\x20Error:\x20'+_0x5a5cd5[_0x50beed(0x21d)]);}}function setupDriftAnalysisScheduler(_0x56c888){const _0x5ae8ab=a0_0x85d2bf;try{if(_0x56c888[_0x5ae8ab(0x11b)])clearInterval(_0x56c888['driftAnalysisTimer']);if(!_0x56c888['isProVersion'])return;_0x56c888['driftAnalysisTimer']=setInterval(()=>runBaselineDriftAnalysis(_0x56c888),(_0x56c888[_0x5ae8ab(0x298)][_0x5ae8ab(0x2b0)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x56c888),0x1388);}catch(_0x36c615){_0x56c888[_0x5ae8ab(0x24e)][_0x5ae8ab(0x236)](_0x5ae8ab(0x21f)+_0x36c615['message']);}}function setupBriefingScheduler(_0x5c73e7){const _0x5671ed=a0_0x85d2bf;try{if(_0x5c73e7['briefingJob'])_0x5c73e7['briefingJob'][_0x5671ed(0xb7)]();if(!_0x5c73e7[_0x5671ed(0x298)][_0x5671ed(0x29f)])return;const _0x472d8e=(_0x5c73e7['config'][_0x5671ed(0xd9)]||'08:00')[_0x5671ed(0x195)](':'),_0x1883f1=parseInt(_0x472d8e[0x0])||0x8,_0x67e604=parseInt(_0x472d8e[0x1])||0x0,_0x14c1c1=_0x67e604+'\x20'+_0x1883f1+_0x5671ed(0x250);_0x5c73e7[_0x5671ed(0x24e)][_0x5671ed(0x188)](_0x5671ed(0x117)+_0x1883f1+':'+(_0x67e604<0xa?'0'+_0x67e604:_0x67e604)),_0x5c73e7[_0x5671ed(0x2a6)]=schedule['scheduleJob'](_0x14c1c1,()=>{sendMorningBriefing(_0x5c73e7);});}catch(_0x44cdda){_0x5c73e7['log'][_0x5671ed(0x236)](_0x5671ed(0x1cf)+_0x44cdda[_0x5671ed(0x21d)]);}}async function sendNotification(_0x5f056d,_0x3dc41e,_0x69a742=![],_0x2b5911=![]){const _0x334fb9=a0_0x85d2bf;_0x5f056d[_0x334fb9(0x24e)]['info']((_0x69a742?_0x334fb9(0x194):'')+_0x334fb9(0x144)+_0x3dc41e+'\x22');const _0x1bcbc0=_0x5f056d[_0x334fb9(0x298)];let _0x27e336=0x0;if(_0x1bcbc0[_0x334fb9(0x278)]){let _0x502f4a={};(_0x3dc41e['includes'](_0x334fb9(0x126))||_0x2b5911)&&(_0x502f4a={'reply_markup':{'inline_keyboard':[[{'text':'‚úÖ\x20Alles\x20OK\x20(Reset)','callback_data':_0x334fb9(0x15c)}],[{'text':_0x334fb9(0x28e),'callback_data':'COGNI_REQUEST_CALL'}]]}}),await _0x5f056d[_0x334fb9(0x160)](_0x1bcbc0[_0x334fb9(0x1ae)],_0x334fb9(0x161),{'text':_0x3dc41e,'user':_0x1bcbc0[_0x334fb9(0x10c)],..._0x502f4a}),_0x27e336++;}if(_0x1bcbc0[_0x334fb9(0x1e6)]){let _0x6b39ef={'message':_0x3dc41e,'title':_0x2b5911?_0x334fb9(0x2a3):_0x334fb9(0x181),'priority':_0x2b5911?0x2:0x1,'device':_0x1bcbc0[_0x334fb9(0x25d)]};_0x2b5911&&(_0x6b39ef[_0x334fb9(0x16a)]=0x1e,_0x6b39ef[_0x334fb9(0xba)]=0xe10,_0x6b39ef[_0x334fb9(0x277)]=_0x334fb9(0xdc)),await _0x5f056d[_0x334fb9(0x160)](_0x1bcbc0[_0x334fb9(0x2b3)],_0x334fb9(0x161),_0x6b39ef),_0x27e336++;}return _0x1bcbc0[_0x334fb9(0xa5)]&&(await _0x5f056d[_0x334fb9(0x160)](_0x1bcbc0[_0x334fb9(0x14e)],_0x334fb9(0x161),{'text':_0x3dc41e,'to':_0x1bcbc0['notifyEmailRecipient']}),_0x27e336++),_0x27e336;}async function setupTelegramListener(_0x5ce4d3){const _0x285dc6=a0_0x85d2bf,_0x5b89ba=_0x5ce4d3[_0x285dc6(0x298)][_0x285dc6(0x1ae)];_0x5ce4d3[_0x285dc6(0x298)][_0x285dc6(0x278)]&&_0x5b89ba&&(_0x5ce4d3['log']['info'](_0x285dc6(0x135)+_0x5b89ba+_0x285dc6(0x1a4)),await _0x5ce4d3[_0x285dc6(0x14c)](_0x5b89ba+_0x285dc6(0x183)));}async function handleTelegramResponse(_0x45d319,_0x2c799c){const _0x55ca68=a0_0x85d2bf;let _0x5f624f=_0x2c799c;_0x2c799c[_0x55ca68(0x2a2)]('[')&&(_0x5f624f=_0x2c799c[_0x55ca68(0x11f)](_0x2c799c[_0x55ca68(0x177)](']')+0x1));if(_0x5f624f==='COGNI_CONFIRM_OK')_0x45d319[_0x55ca68(0x24e)]['info'](_0x55ca68(0x1c6)),await _0x45d319[_0x55ca68(0xbe)](_0x55ca68(0x1ce),{'val':![],'ack':!![]}),await _0x45d319[_0x55ca68(0xbe)](_0x55ca68(0x228),{'val':'Vom\x20Benutzer\x20best√§tigt\x20(OK).','ack':!![]}),_0x45d319['lastAlertState']=![],sendNotification(_0x45d319,_0x55ca68(0xc0),![]);else _0x5f624f===_0x55ca68(0xe3)&&(_0x45d319[_0x55ca68(0x24e)][_0x55ca68(0x1d5)](_0x55ca68(0xd7)),sendNotification(_0x45d319,'üìû\x20R√úCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20R√ºckruf-Button\x20gedr√ºckt.',![],!![]));}async function runAutopilot(_0xdd83f9){const _0x357fed=a0_0x85d2bf,_0x33a1b3=_0xdd83f9['config']['inactivityThresholdHours'],_0x18dc16=_0xdd83f9[_0x357fed(0x2a8)][_0x357fed(0x1ff)]>0x0?_0xdd83f9[_0x357fed(0x2a8)][0x0]['timestamp']:Date['now'](),_0x5591ce=(Date[_0x357fed(0x108)]()-_0x18dc16)/(0x3e8*0x3c*0x3c);let _0x4bf8f1='';_0xdd83f9[_0x357fed(0x298)][_0x357fed(0x220)]&&_0xdd83f9['currentSystemMode']===SYSTEM_MODES[_0x357fed(0xbb)]&&_0xdd83f9['isPresent']&&(_0x5591ce>_0x33a1b3&&(_0x4bf8f1=_0x357fed(0x241)+_0x5591ce[_0x357fed(0x1ea)](0x1)+_0x357fed(0x1de))),runGeminiAnalysis(_0xdd83f9,_0x4bf8f1)['catch'](_0xdb7576=>_0xdd83f9[_0x357fed(0x24e)][_0x357fed(0x236)](_0xdb7576));}async function createDailyDigest(_0x1bd284){const _0x3e175f=a0_0x85d2bf;if(!_0x1bd284['isProVersion'])return;await _0x1bd284['setStateAsync'](LTM_DP_STATUS,{'val':'Started\x20at\x20'+new Date()[_0x3e175f(0x22c)](),'ack':!![]});if(!_0x1bd284[_0x3e175f(0x275)]||_0x1bd284['rawEventLog']['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x1bd284[_0x3e175f(0xbe)](LTM_DP_STATUS,{'val':_0x3e175f(0x114),'ack':!![]});return;}const _0x539b50=JSON['parse'](JSON[_0x3e175f(0xf4)](_0x1bd284[_0x3e175f(0x137)])),_0x4b5a3d=_0x539b50['length'],_0x4853c8='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON['stringify'](_0x539b50);try{const _0x55de10=await _0x1bd284[_0x3e175f(0x275)][_0x3e175f(0x163)](_0x4853c8),_0x36acd6=JSON[_0x3e175f(0xc3)](_0x55de10['response'][_0x3e175f(0x22b)]()['replace'](/```json|```/g,'')[_0x3e175f(0x104)]());_0x36acd6[_0x3e175f(0xe5)]&&(_0x1bd284[_0x3e175f(0x180)][_0x3e175f(0xaa)]({'timestamp':new Date()['toISOString'](),'eventCount':_0x4b5a3d,'summary':_0x36acd6[_0x3e175f(0xe5)],'activityLevel':_0x36acd6[_0x3e175f(0x166)],'systemMode':_0x1bd284['currentSystemMode']}),await saveDailyDigests(_0x1bd284),_0x1bd284[_0x3e175f(0x137)]=[],await saveRawEventLog(_0x1bd284),await _0x1bd284['setStateAsync'](LTM_DP_STATUS,{'val':_0x3e175f(0x1a1)+_0x4b5a3d+_0x3e175f(0x2a1),'ack':!![]}),runPythonHealthCheck(_0x1bd284));}catch(_0x3d76e5){await _0x1bd284[_0x3e175f(0xbe)](LTM_DP_STATUS,{'val':'Error:\x20'+_0x3d76e5[_0x3e175f(0x21d)],'ack':!![]});}}async function sendMorningBriefing(_0x3521bf){const _0x1e0dd9=a0_0x85d2bf;if(!_0x3521bf[_0x1e0dd9(0x275)])return;_0x3521bf[_0x1e0dd9(0x24e)]['info']('Generating\x20Morning\x20Briefing...');const _0x4bd99f=_0x3521bf[_0x1e0dd9(0x180)][_0x1e0dd9(0x1ff)]>0x0?_0x3521bf[_0x1e0dd9(0x180)][_0x3521bf[_0x1e0dd9(0x180)][_0x1e0dd9(0x1ff)]-0x1]:null,_0x31304c=_0x4bd99f&&_0x4bd99f[_0x1e0dd9(0xb8)]?_0x4bd99f[_0x1e0dd9(0xb8)][_0x1e0dd9(0x269)]:_0x1e0dd9(0x231),_0x120cc9=new Date();_0x120cc9[_0x1e0dd9(0x210)](0x4,0x0,0x0,0x0);const _0x3344b3=_0x3521bf[_0x1e0dd9(0x2a8)][_0x1e0dd9(0x207)](_0x248a09=>new Date(_0x248a09[_0x1e0dd9(0x23b)])>_0x120cc9),_0x25940b=PERSONA_MAPPING[_0x3521bf[_0x1e0dd9(0x298)]['aiPersona']||_0x1e0dd9(0x1f0)],_0x329254=_0x3521bf[_0x1e0dd9(0x298)][_0x1e0dd9(0x1a6)]||'',_0x3472f4=await getWeatherContext(_0x3521bf),_0x352a3d=await getCalendarContext(_0x3521bf),_0x551373=_0x1e0dd9(0x1c0)+_0x25940b+_0x1e0dd9(0x1d7)+_0x329254+_0x1e0dd9(0x1af)+_0x3472f4+'\x20'+_0x352a3d+_0x1e0dd9(0x18c)+_0x31304c+_0x1e0dd9(0x222)+JSON[_0x1e0dd9(0xf4)](_0x3344b3['slice'](0x0,0xa))+_0x1e0dd9(0x169);try{const _0x513fad=await _0x3521bf['geminiModel'][_0x1e0dd9(0x163)](_0x551373),_0x44babb='üåÖ\x20Daily\x20Briefing:\x0a'+_0x513fad[_0x1e0dd9(0x1e0)][_0x1e0dd9(0x22b)]()[_0x1e0dd9(0x104)]();sendNotification(_0x3521bf,_0x44babb),_0x3521bf[_0x1e0dd9(0x24e)]['info'](_0x1e0dd9(0x15a));}catch(_0x5401df){_0x3521bf[_0x1e0dd9(0x24e)][_0x1e0dd9(0x236)]('Briefing\x20Error:\x20'+_0x5401df['message']);}}async function scanForDevices(_0x5e48f8,_0x2e1028){const _0x12b031=a0_0x85d2bf;_0x5e48f8['log'][_0x12b031(0x188)](_0x12b031(0x187));const _0x59a428=[],_0x39aadd=await _0x5e48f8[_0x12b031(0x111)]('*'),_0x1e8b72=await _0x5e48f8[_0x12b031(0x111)](_0x12b031(0x29d),_0x12b031(0x28c)),_0x4a3f09=await _0x5e48f8[_0x12b031(0x111)](_0x12b031(0x130),_0x12b031(0x28c)),_0xdc5cc6={};if(_0x1e8b72)for(const _0x1e040f in _0x1e8b72){const _0x4b6171=_0x1e8b72[_0x1e040f]['common'][_0x12b031(0x1f9)]||[];_0x4b6171[_0x12b031(0x21e)](_0x2a6e8a=>{const _0x3057ab=_0x12b031;if(!_0xdc5cc6[_0x2a6e8a])_0xdc5cc6[_0x2a6e8a]=[];_0xdc5cc6[_0x2a6e8a][_0x3057ab(0xaa)](_0x1e040f);});}const _0x493dac={};if(_0x4a3f09)for(const _0x395bb2 in _0x4a3f09){const _0x556921=_0x4a3f09[_0x395bb2][_0x12b031(0x27e)]['members']||[],_0x4b9df7=typeof _0x4a3f09[_0x395bb2]['common'][_0x12b031(0x200)]===_0x12b031(0x155)?_0x4a3f09[_0x395bb2][_0x12b031(0x27e)][_0x12b031(0x200)]['de']:_0x4a3f09[_0x395bb2][_0x12b031(0x27e)]['name'];_0x556921['forEach'](_0x21a8b=>_0x493dac[_0x21a8b]=_0x4b9df7);}const _0x48828c=_0x2e1028['selectedFunctionIds']||[],_0xc29174=_0x2e1028[_0x12b031(0x201)]!==![],_0x5d2370=_0x2e1028[_0x12b031(0x239)]!==![],_0x156093=_0x2e1028[_0x12b031(0x1e7)]!==![],_0x2bd901=_0x2e1028[_0x12b031(0x287)]===!![],_0x42f894=_0x2e1028[_0x12b031(0x22e)]===!![];for(const _0x553c61 in _0x39aadd){const _0x32009d=_0x39aadd[_0x553c61];if(_0x32009d['type']!==_0x12b031(0x215)||!_0x32009d[_0x12b031(0x27e)])continue;if(ADAPTER_BLACKLIST[_0x12b031(0x24d)](_0x1356dc=>_0x553c61[_0x12b031(0x2a2)](_0x1356dc))&&!_0x42f894)continue;const _0x46c48e=(_0x32009d[_0x12b031(0x27e)][_0x12b031(0x196)]||'')[_0x12b031(0x1e8)]();let _0x3963a6=(typeof _0x32009d[_0x12b031(0x27e)]['name']===_0x12b031(0x155)?_0x32009d[_0x12b031(0x27e)][_0x12b031(0x200)]['de']:_0x32009d[_0x12b031(0x27e)][_0x12b031(0x200)])||_0x553c61;const _0xa2a9fb=_0x3963a6[_0x12b031(0x1e8)]();let _0x463b3c=![],_0x1680c2=![];if(_0x48828c[_0x12b031(0x1ff)]>0x0){const _0x550f16=_0xdc5cc6[_0x553c61]||[],_0x43a0d0=_0x553c61[_0x12b031(0x195)]('.')[_0x12b031(0x1ec)](0x0,-0x1)['join']('.'),_0x2a266b=_0xdc5cc6[_0x43a0d0]||[];(_0x550f16[_0x12b031(0x24d)](_0x3f101d=>_0x48828c['includes'](_0x3f101d))||_0x2a266b['some'](_0x3e74cd=>_0x48828c[_0x12b031(0x213)](_0x3e74cd)))&&(_0x463b3c=!![],_0x1680c2=!![]);}if(!_0x463b3c&&!_0x42f894){if(HARD_IGNORE_TERMS['some'](_0x1b8757=>_0x553c61[_0x12b031(0x213)](_0x1b8757)||_0xa2a9fb[_0x12b031(0x213)](_0x1b8757[_0x12b031(0x1e8)]())))continue;}if(BAD_NAMES[_0x12b031(0x24d)](_0x15dbe6=>_0xa2a9fb===_0x15dbe6||_0xa2a9fb[_0x12b031(0x1f5)]('.'+_0x15dbe6))){const _0x1fdda0=_0x553c61[_0x12b031(0x195)]('.');if(_0x1fdda0[_0x12b031(0x1ff)]>0x2){const _0x38951f=_0x1fdda0[_0x12b031(0x1ec)](0x0,-0x1)[_0x12b031(0x256)]('.'),_0x213333=_0x39aadd[_0x38951f];if(_0x213333&&_0x213333[_0x12b031(0x27e)]&&_0x213333[_0x12b031(0x27e)][_0x12b031(0x200)]){const _0x126f74=typeof _0x213333[_0x12b031(0x27e)][_0x12b031(0x200)]===_0x12b031(0x155)?_0x213333[_0x12b031(0x27e)]['name']['de']:_0x213333[_0x12b031(0x27e)][_0x12b031(0x200)];_0x126f74&&!_0x3963a6[_0x12b031(0x213)](_0x126f74)&&(_0x3963a6=_0x126f74+'\x20'+_0x3963a6);}}}let _0x3fcaee='';if(_0xc29174&&(_0x46c48e[_0x12b031(0x213)](_0x12b031(0x201))||_0x46c48e[_0x12b031(0x213)]('occupancy')||_0xa2a9fb[_0x12b031(0x213)](_0x12b031(0x276))||_0xa2a9fb['includes']('pr√§senz')))_0x3fcaee=_0x12b031(0x201);else{if(!_0x3fcaee&&_0x5d2370&&(_0x46c48e[_0x12b031(0x213)]('door')||_0x46c48e['includes'](_0x12b031(0x199))||_0x46c48e[_0x12b031(0x213)]('lock')||_0x46c48e[_0x12b031(0x213)](_0x12b031(0xa8))||_0x46c48e[_0x12b031(0x213)]('shutter')||_0xa2a9fb['includes'](_0x12b031(0x1da))||_0xa2a9fb['includes'](_0x12b031(0x1b0))||_0xa2a9fb[_0x12b031(0x213)]('rollladen')))_0x3fcaee='door';else{if(!_0x3fcaee&&_0x156093&&(_0x46c48e[_0x12b031(0x213)](_0x12b031(0x237))||_0x46c48e[_0x12b031(0x213)](_0x12b031(0xe7))||_0x46c48e[_0x12b031(0x213)](_0x12b031(0x100))||_0xa2a9fb[_0x12b031(0x213)](_0x12b031(0x1c2))||_0xa2a9fb[_0x12b031(0x213)](_0x12b031(0xee))||_0xa2a9fb[_0x12b031(0x213)]('schalter'))){if(_0x32009d['common'][_0x12b031(0x134)]||_0x46c48e['includes'](_0x12b031(0x20d)))_0x3fcaee=_0x12b031(0x237);}else{if(!_0x3fcaee&&_0x2bd901&&(_0x46c48e[_0x12b031(0x213)]('temperature')||_0x46c48e[_0x12b031(0x213)](_0x12b031(0xb3))||_0x46c48e['includes']('thermostat')||_0xa2a9fb[_0x12b031(0x213)](_0x12b031(0xd4))||_0xa2a9fb[_0x12b031(0x213)](_0x12b031(0x112))||_0xa2a9fb[_0x12b031(0x213)](_0x12b031(0xe4))))_0x3fcaee=_0x12b031(0x287);else{if(!_0x3fcaee&&_0x1680c2)_0x3fcaee='custom';}}}}if(_0x3fcaee){let _0x4124e3=_0x493dac[_0x553c61]||'';if(!_0x4124e3){let _0x33fc42=_0x553c61;for(let _0x5e2279=0x0;_0x5e2279<0x3;_0x5e2279++){const _0x3d036b=_0x33fc42[_0x12b031(0x203)]('.');if(_0x3d036b===-0x1)break;_0x33fc42=_0x33fc42[_0x12b031(0x11f)](0x0,_0x3d036b);if(_0x493dac[_0x33fc42]){_0x4124e3=_0x493dac[_0x33fc42];break;}}}_0x59a428[_0x12b031(0xaa)]({'id':_0x553c61,'name':_0x3963a6,'location':_0x4124e3,'type':_0x3fcaee,'logDuplicates':_0x3fcaee===_0x12b031(0x201),'isExit':![],'_score':_0x4124e3?0x50:_0x3fcaee===_0x12b031(0x234)?0x5a:0x28});}}return _0x59a428[_0x12b031(0xc2)]((_0x44dfcc,_0x4ea385)=>_0x4ea385['_score']-_0x44dfcc[_0x12b031(0x1ef)]),_0x59a428;}async function executeAutomationAction(_0x49874d){const _0x3c5ccd=a0_0x85d2bf;try{const _0x32cacc=await _0x49874d['getStateAsync'](_0x3c5ccd(0x260)),_0xf7a5af=await _0x49874d[_0x3c5ccd(0x18e)](_0x3c5ccd(0x1ac));if(_0x32cacc&&_0x32cacc[_0x3c5ccd(0xb1)]&&_0xf7a5af){const _0x2f57ca=_0x32cacc[_0x3c5ccd(0xb1)];let _0x227635=_0xf7a5af[_0x3c5ccd(0xb1)];try{_0x227635=JSON[_0x3c5ccd(0xc3)](_0x227635);}catch(_0x51fd5c){}_0x49874d['log'][_0x3c5ccd(0x188)](_0x3c5ccd(0x17c)+_0x2f57ca+_0x3c5ccd(0x164)+_0x227635),await _0x49874d[_0x3c5ccd(0x186)](_0x2f57ca,_0x227635);}else _0x49874d[_0x3c5ccd(0x24e)][_0x3c5ccd(0x1d5)](_0x3c5ccd(0xe1));}catch(_0x29ff85){_0x49874d['log'][_0x3c5ccd(0x236)](_0x3c5ccd(0x2b1)+_0x29ff85[_0x3c5ccd(0x21d)]);}}function tryParse(_0x1e1d0a){try{return JSON['parse'](_0x1e1d0a);}catch(_0x4b3bb3){return null;}}function a0_0x4f4e(){const _0x39c92f=['üõ†Ô∏è\x20AUTO-FIX:\x20Installing\x20Python\x20dependencies\x20from\x20','Morning\x20Briefing\x20sent.','\x20(Length:\x20','COGNI_CONFIRM_OK','analysis.feedbackHistory','cogni-living\x20adapter\x20starting\x20(v','analysisHistory','sendToAsync','send','simple-api.','generateContent','\x20=\x20','button','activityLevel','Gemini\x20Init\x20Error:\x20','Automation\x20Proposals','.\x20OUTPUT:\x20Nur\x20Text.','retry','Aktiv\x20(','ltmStbWindowDays','Baseline\x20Status','LTM.processingStatus','\x22\x20--break-system-packages','.\x0a\x20\x20\x20\x20WETTER:\x20','occupancy','accuweather','party','AI\x20Alert\x20Status','[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20','payload','indexOf','Urlaub','512250sQTxsi','date','analysis.automation.triggerAction','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','Gast','toISOString','PONG','dailyDigests','Cogni-Living','.Summary.Current','.communicate.request','unshift','getMonth','setForeignStateAsync','Scanning\x20for\x20devices\x20(V8:\x20Whitelist\x20Priority)...','info','connection','Pattern\x20Detected','Action','.\x20DATEN:\x20Schlaf\x20','openweathermap.0','getStateAsync','location','Kein\x20API\x20Key\x20eingegeben.','Entry\x20detected\x20via\x20','data','Trigger\x20Digest','[TEST]\x20','split','role','ack','fault','window','\x20events)...','apiKey','SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20','Keine\x20Details.','triggerBriefing','exports','Processing\x20Status','Success:\x20Compressed\x20','inactivityThresholdHours','):\x20','\x20for\x20interactive\x20buttons...','bind','livingContext','cogni-living','sensorLastValues','devices','Lernphase\x20(','debug','analysis.automation.targetValue','child_process','notifyTelegramInstance','.\x20ZUSATZ:\x20','t√ºr','Adapter','...','Bibliotheken\x20nicht\x20gefunden','Guardian:\x20Sending\x20','.\x0a\x20\x20\x20\x20KONTEXT:\x20','analysis.automation.suggestedAction','ical.0','type','stick_unreach',')\x20-\x20FUNCTIONS\x20FIRST\x20ARCHITECTURE','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','ltmJob','json','node-schedule','exitGraceTimer','ROLLE:\x20F√ºrsorglicher\x20Assistent.\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20','subscribeStates','licht','Gemini\x20AI\x20initialized.','Activity\x20Summary','Keine\x20Analyse.','‚úÖ\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.','Who\x20is\x20present?','useCalendar','analysis.health.trendDiagnosis','reachable','Last\x20Result','analysis.deviationFromBaseline','0\x203\x20*\x20*\x20*','analysis.isAlert','Briefing\x20Sched\x20Error:\x20','application/json','analysis.health.restlessness','\x20(Value\x20is\x20falsy:\x20','LTM.trainingData.thermodynamics','getDate','warn','description','.\x20KONTEXT:\x20','scanDevices','outdoorSensorId','fenster','Auto\x20Apply\x20Rule','requirements.txt','.NextHours.Location_1.Day_1.current.symbol_desc','\x20hours.\x20Potential\x20incapacitation.','ML-Libs\x20fehlen','response','analysis.health','systemUUID','instance','@google/generative-ai','Training\x20Data\x20Sets','notifyPushoverEnabled','lights','toLowerCase','getTime','toFixed','analysis.automation.description','slice','setState','IGNORING\x20DUPLICATE\x20(Cached):\x20','_score','generic','currentSystemMode','scriptEnabled','Thermodynamic\x20Data\x20Points','analysis.isEmergency','endsWith','replace','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','guest','members','.\x0a\x20\x20\x20\x20NOTFALL-KONTEXT:\x20','Last\x20Check','minDaysForBaseline','KALENDER:\x20Keine\x20relevanten\x20Termine','presenceDevices','length','name','motion','events.lastEvent','lastIndexOf','geminiApiKey','from','path','filter','door','normal','onUnload','loc','analysis.comfortSummary','sensor','useWeather','kontakt','setHours','admin.','uuid-error','includes','Missing\x20data','state','Kein\x20API\x20Key!','0\x204\x20*\x20*\x20*','Could\x20not\x20kill\x20Python\x20process:\x20','VACATION','Analysiere\x20ausgewogen.','rssi','.data.table','message','forEach','Drift\x20Sched\x20Error:\x20','inactivityMonitoringEnabled','.\x20Welcome\x20home.','/100,\x20Aktivit√§t\x20seit\x2004:00:\x20','logDuplicates','analysis.history_debug_00','command','details','daswetter.0','analysis.alertReason','analysisTimer','getFullYear','text','toLocaleString','version','weather','Error\x20launching\x20Python\x20service:\x20','ltmLtbWindowDays','N/A','[RECORDER]\x20Sequence\x20finished\x20(Steps:\x20','WETTER:\x20Keine\x20Daten\x20gefunden','custom','Correlation\x20between\x20Inside\x20Temp,\x20Outside\x20Temp\x20and\x20Time','error','light','Event\x20History','doors','maintenance','timestamp','channel','simulateButler','status','isAlert','5894660wedCju','HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20','\x20(Type\x20\x27','value','Exit\x20Sensor\x20triggered\x20(','isProVersion','‚úÖ\x20AUTO-FIX\x20SUCCESS.\x20Dependencies\x20installed.\x20Restarting\x20Service...','exitTimer','aiPersona','Normal','fill','GUEST','isPresent','some','log','Trend\x20Diagnosis\x20(Python)','\x20*\x20*\x20*','getForeignStateAsync','analysis.automation','dependencyInstallInProgress','models/gemini-flash-latest','WETTER\x20ERROR:\x20','join','LTM.rawEventLog','longitude','Health\x20&\x20Sleep\x20Analysis','Alert\x20Reason','system.config','writable','notifyPushoverRecipient','\x20min).','off','analysis.automation.targetId','\x20days\x20of\x20activity\x20data\x20to\x20Python...','Unknown','map','Guardian:\x20Not\x20enough\x20history\x20data\x20for\x20trend\x20analysis\x20yet.','Trigger\x20Briefing\x20(Test)','kill','calendarInstance','targetId','sleepScore','update','values','daswetter','PRIORIT√ÑT:\x20Gesundheit/AAL.','lastAlertState','Last\x20raw\x20event','apply','number','.\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20INPUT\x20DATEN\x20(Letzte\x20Events):\x0a\x20\x20\x20\x20','weatherInstance','8930440zQaDUe','geminiModel','bewegung','sound','notifyTelegramEnabled','Array\x20of\x20completed\x20movement\x20paths\x20for\x20ML\x20training','native','15824YJxbkg','unload','N/A\x20(Learning)','common','.forecast.current.temp','dismissAutomation','Trigger\x20Action\x20Now','python_service','analysis.health.sleepScore','isArray','detected','driftDetails','temperature','getEnums','boolean','main','genAI','enum','LTM.driftAnalysis.baselineDrift','üìû\x20R√ºckruf\x20anfordern','üêç\x20Starting\x20Python\x20Sidecar:\x20','onReady','indicator.alarm','\x20(Value:\x20','Motion\x20detected\x20inside.\x20Aborting\x20Exit\x20Timer.','vis.','actual_temperature','search','feedbackHistory','config','.NextHours.Location_1.Day_1.current.temp_value','9931495gWzsdy','Party','2KxsHJe','enum.functions.*','Health\x20Notes','briefingEnabled','[RESULT]','\x20events','startsWith','üö®\x20EMERGENCY','.forecast.current.state','Error\x20checking\x20WiFi:\x20','briefingJob','testApiKey','eventHistory','pythonProcess','System\x20Mode','TEST-PRO-KEY','delObjectAsync','schalter','[PYTHON]\x20Failed\x20to\x20start\x20(is\x20python3\x20installed?):\x20','LTM.triggerDailyDigest','ltmDriftCheckIntervalHours','BUTLER\x20Execution\x20Error:\x20','PRO-','notifyPushoverInstance','notifyEmailEnabled','material.','Trigger\x20Analysis','blind','LTM.driftAnalysis.lastCheck','push','[RECORDER]\x20Error\x20saving\x20sequence:\x20','analysis.automation.autoApply','Comfort\x20Suggestion','system.mode','link_quality','automation.triggerAction','val','isEmergency','humidity','onMessage','analysis.trigger','Deaktiviert\x20(Pro-Feature)','cancel','health','36TVLjSN','expire','NORMAL','\x20Tage)','Starting\x20Autopilot\x20(','setStateAsync','icons-mfd.','‚úÖ\x20Alarm\x20quittiert.\x20System\x20normal.','testNotification','sort','parse','Event\x20received:\x20','system','Sleep\x20Score\x20(0-100)','system.presenceWho','splice','2838930cUzdBK','getGenerativeModel','modeResetJob','isGracePeriodActive','Feedback\x20Log','config_pending','Subscribing\x20to\x20','weatherunderground','temperatur','system.meta.uuid','ü§ñ\x20BUTLER\x20PROPOSAL:\x20','temp','close','pop','üìû\x20User\x20requested\x20CALL\x20via\x20Telegram!','systemConfig','briefingTime','pr√§senz','KALENDER\x20ERROR:\x20','siren','analysisInterval','direction','System\x20Status\x20&\x20Control','getOverviewData','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','6wychPT','COGNI_REQUEST_CALL','heizung','summary','Keiner','switch','Target\x20ID','sendTo','dutycycle','text.alarm','set_temperature','[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20','lampe','analysis.triggerBriefing','info.','weatherunderground.0','Recorded\x20Motion\x20Sequences','Invalid\x20JSON\x20from\x20Python:\x20','stringify','openweathermap','round','string','getForeignObjectAsync','online','TREND_RESULT','ready','baselineDrift','alertReason','event','.\x0a\x20\x20\x20\x20SYSTEM_MODE:\x20','dimmer','python3','Feedback\x20saved:\x20','\x20|\x20Status:\x20','trim','accuweather.0','uuid-not-found','namespace','now','‚úÖ\x20PRO\x20ACTIVATED','setObjectNotExistsAsync','Trend\x20Value\x20(%)','notifyTelegramRecipient','events.history','level','LTM.dailyDigests','onStateChange','getForeignObjectsAsync','klima','vacation','Skipped\x20(No\x20AI\x20or\x20Data)','LTM','LTM.baselineStatus','Scheduling\x20Morning\x20Briefing\x20for\x20','system.isPresent','üêç\x20Stopping\x20Python\x20Sidecar...','LTM.trainingData','driftAnalysisTimer','scheduleJob','licenseKey',').\x20Saving\x20to\x20Training\x20Data.','substring','position','_calName','‚ùå\x20FREE\x20MODE','(((.+)+)+)+$','\x20presence\x20devices...','shutter','Alarm','shift','Gemini\x20Analysis\x20Error:\x20','automationProposal','Details:\x20','scriptProblem','stdin','Drift\x20Status','analysis.comfortSuggestion','presence','enum.rooms.*','history.','PARTY','.forecast.current.temperature','write','üì°\x20Hooking\x20into\x20','targetValue','rawEventLog','Restlessness\x20Level','getHours','.Current.Temperature','echarts.','constructor','find','LTM.trainingData.sequences','unknown','energy','toString','flot.','üß™\x20Simulating\x20Butler\x20Proposal:\x20','Sending\x20notification:\x20\x22','analysis.analysisHistory','1465933TQqMcp','KALENDER:\x20','indicator.alarm.fire','Restoring\x20sensor\x20cache\x20from\x20history\x20(','KALENDER:\x20Keine\x20Kalender\x20ausgew√§hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)','Failed\x20to\x20send\x20to\x20Python:\x20','subscribeForeignStatesAsync','analysis.automation.patternDetected','notifyEmailInstance','power','callback','triggerDailyDigest','analysis.health.trendValue','getLtmData','extendObjectAsync','object','system.','time','\x20|\x20'];a0_0x4f4e=function(){return _0x39c92f;};return a0_0x4f4e();}async function recordSequence(_0x4e6212,_0x417b50){const _0x98b7b3=a0_0x85d2bf,_0x219b1b=(_0x417b50[_0x98b7b3(0x1b8)]||'')[_0x98b7b3(0x1e8)](),_0x321ef6=['motion',_0x98b7b3(0x276),_0x98b7b3(0xda),_0x98b7b3(0x12f),_0x98b7b3(0x171),_0x98b7b3(0x208),_0x98b7b3(0x1b0),'window','fenster','contact',_0x98b7b3(0x20f),_0x98b7b3(0x237),_0x98b7b3(0x1c2),_0x98b7b3(0xe7),_0x98b7b3(0x2ad),_0x98b7b3(0x100),'lampe'];if(!_0x321ef6[_0x98b7b3(0x24d)](_0x2aa12b=>_0x219b1b[_0x98b7b3(0x213)](_0x2aa12b))){_0x4e6212['log'][_0x98b7b3(0x1ab)](_0x98b7b3(0xed)+_0x417b50['id']+_0x98b7b3(0x242)+_0x417b50[_0x98b7b3(0x1b8)]+'\x27\x20not\x20in\x20allowed\x20list)');return;}if(!_0x417b50[_0x98b7b3(0x243)]){_0x4e6212[_0x98b7b3(0x24e)][_0x98b7b3(0x1ab)](_0x98b7b3(0xed)+_0x417b50['id']+_0x98b7b3(0x1d2)+_0x417b50[_0x98b7b3(0x243)]+')');return;}_0x4e6212['log']['debug']('[RECORDER\x20DEBUG]\x20Accepting\x20Event\x20'+_0x417b50['id']+'\x20('+_0x417b50[_0x98b7b3(0x18f)]+')');if(sequenceTimer)clearTimeout(sequenceTimer);const _0xe449c7={'loc':_0x417b50[_0x98b7b3(0x18f)]||_0x98b7b3(0x262),'id':_0x417b50['id'],'ts':Date[_0x98b7b3(0x108)]()};activeSequence['push'](_0xe449c7),_0x4e6212[_0x98b7b3(0x24e)][_0x98b7b3(0x1ab)](_0x98b7b3(0x175)+_0xe449c7[_0x98b7b3(0x20b)]+_0x98b7b3(0x15b)+activeSequence[_0x98b7b3(0x1ff)]+')'),sequenceTimer=setTimeout(async()=>{const _0x1cfaf7=_0x98b7b3;activeSequence[_0x1cfaf7(0x1ff)]>0x1?await saveCompletedSequence(_0x4e6212):(_0x4e6212['log'][_0x1cfaf7(0x1ab)]('[RECORDER]\x20Discarding\x20short\x20sequence\x20(Length:\x20'+activeSequence['length']+')'),activeSequence=[]);},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0xd35c53){const _0x4ffc90=a0_0x85d2bf;try{_0xd35c53['log'][_0x4ffc90(0x188)](_0x4ffc90(0x232)+activeSequence['length']+_0x4ffc90(0x11e));const _0x198164=await _0xd35c53[_0x4ffc90(0x18e)](_0x4ffc90(0x13e));let _0x3e8be0=[];if(_0x198164&&_0x198164[_0x4ffc90(0xb1)])try{_0x3e8be0=JSON[_0x4ffc90(0xc3)](_0x198164[_0x4ffc90(0xb1)]);}catch(_0x3b85e4){}const _0x4fbab0=activeSequence[0x0]['ts'],_0x49b74e=activeSequence['map'](_0x50fde7=>({'loc':_0x50fde7[_0x4ffc90(0x20b)],'t_delta':Math[_0x4ffc90(0xf6)]((_0x50fde7['ts']-_0x4fbab0)/0x3e8)})),_0x1e1f41={'timestamp':new Date(_0x4fbab0)[_0x4ffc90(0x17e)](),'steps':_0x49b74e,'duration':Math[_0x4ffc90(0xf6)]((activeSequence[activeSequence['length']-0x1]['ts']-_0x4fbab0)/0x3e8),'daytime':new Date(_0x4fbab0)[_0x4ffc90(0x139)]()};_0x3e8be0['push'](_0x1e1f41),_0x3e8be0[_0x4ffc90(0x1ff)]>MAX_TRAINING_SET_SIZE&&_0x3e8be0[_0x4ffc90(0x127)](),await _0xd35c53[_0x4ffc90(0xbe)](_0x4ffc90(0x13e),{'val':JSON[_0x4ffc90(0xf4)](_0x3e8be0),'ack':!![]}),activeSequence=[],sequenceTimer=null;}catch(_0x5ce908){_0xd35c53[_0x4ffc90(0x24e)][_0x4ffc90(0x236)](_0x4ffc90(0xab)+_0x5ce908[_0x4ffc90(0x21d)]);}}async function getOutsideTemperatureNumeric(_0x192f50){const _0xe7ee0b=a0_0x85d2bf;if(_0x192f50[_0xe7ee0b(0x298)]['outdoorSensorId'])try{const _0x41dd2e=await _0x192f50[_0xe7ee0b(0x251)](_0x192f50['config'][_0xe7ee0b(0x1d9)]);if(_0x41dd2e&&_0x41dd2e[_0xe7ee0b(0xb1)]!==undefined&&_0x41dd2e[_0xe7ee0b(0xb1)]!==null){const _0x3ee71c=parseFloat(_0x41dd2e[_0xe7ee0b(0xb1)]);if(!isNaN(_0x3ee71c))return _0x3ee71c;}}catch(_0x47f102){_0x192f50['log'][_0xe7ee0b(0x1d5)]('Error\x20reading\x20outdoor\x20sensor\x20'+_0x192f50[_0xe7ee0b(0x298)][_0xe7ee0b(0x1d9)]+':\x20'+_0x47f102['message']);}const _0x41ff56=_0x192f50[_0xe7ee0b(0x298)][_0xe7ee0b(0x273)];if(!_0x192f50[_0xe7ee0b(0x298)][_0xe7ee0b(0x20e)]||!_0x41ff56)return null;try{let _0x260a94='';if(_0x41ff56[_0xe7ee0b(0x213)](_0xe7ee0b(0x172)))_0x260a94=_0x41ff56+_0xe7ee0b(0x13a);else{if(_0x41ff56[_0xe7ee0b(0x213)](_0xe7ee0b(0x26c)))_0x260a94=_0x41ff56+_0xe7ee0b(0x299);else{if(_0x41ff56[_0xe7ee0b(0x213)](_0xe7ee0b(0xf5)))_0x260a94=_0x41ff56+_0xe7ee0b(0x133);else{if(_0x41ff56[_0xe7ee0b(0x213)](_0xe7ee0b(0xd0)))_0x260a94=_0x41ff56+_0xe7ee0b(0x27f);}}}if(_0x260a94){const _0x437855=await _0x192f50[_0xe7ee0b(0x251)](_0x260a94);if(_0x437855&&_0x437855[_0xe7ee0b(0xb1)]!==undefined&&_0x437855['val']!==null)return parseFloat(_0x437855[_0xe7ee0b(0xb1)]);}}catch(_0x943826){}return null;}async function recordThermodynamics(_0x449ab2,_0x2f02a3,_0x2d4fca,_0x21d843){const _0xf30735=a0_0x85d2bf,_0x538271=await getOutsideTemperatureNumeric(_0x449ab2),_0x4febfe=await _0x449ab2[_0xf30735(0x18e)](_0xf30735(0x1d3));let _0x3d1a8f=[];if(_0x4febfe&&_0x4febfe['val'])try{_0x3d1a8f=JSON[_0xf30735(0xc3)](_0x4febfe[_0xf30735(0xb1)]);}catch(_0x2cf3c9){}_0x3d1a8f[_0xf30735(0xaa)]({'ts':Date[_0xf30735(0x108)](),'room':_0x21d843||_0xf30735(0x262),'t_in':_0x2d4fca,'t_out':_0x538271});if(_0x3d1a8f['length']>THERMO_LOG_SIZE)_0x3d1a8f[_0xf30735(0x127)]();await _0x449ab2[_0xf30735(0xbe)](_0xf30735(0x1d3),{'val':JSON['stringify'](_0x3d1a8f),'ack':!![]});}async function processSensorEvent(_0x1d548b,_0x1a23d6,_0x5d337c,_0x450964){const _0x22d0bb=a0_0x85d2bf;if(!_0x450964)return;const _0x2786c5=_0x5d337c[_0x22d0bb(0xb1)],_0x20e36e=Date[_0x22d0bb(0x108)]();_0x1d548b[_0x22d0bb(0x24e)][_0x22d0bb(0x1ab)](_0x22d0bb(0xc4)+_0x1a23d6+_0x22d0bb(0x164)+_0x2786c5);const _0x51c6c7=_0x1d548b[_0x22d0bb(0x1a8)][_0x1a23d6];_0x1d548b[_0x22d0bb(0x1a8)][_0x1a23d6]=_0x2786c5;if(!_0x450964[_0x22d0bb(0x223)]&&_0x51c6c7!=undefined&&_0x51c6c7==_0x2786c5){_0x1d548b[_0x22d0bb(0x24e)][_0x22d0bb(0x1ab)](_0x22d0bb(0x1ee)+_0x450964[_0x22d0bb(0x200)]+_0x22d0bb(0x292)+_0x2786c5+')');return;}const _0x40cf53=(_0x450964[_0x22d0bb(0x1b8)]||'')['toLowerCase'](),_0x557d34=_0x40cf53[_0x22d0bb(0x213)](_0x22d0bb(0x287))||_0x40cf53[_0x22d0bb(0x213)](_0x22d0bb(0xd1))||_0x40cf53[_0x22d0bb(0x213)](_0x22d0bb(0x112))||_0x40cf53[_0x22d0bb(0x213)](_0x22d0bb(0xe4));_0x1d548b['isProVersion']&&_0x557d34&&recordThermodynamics(_0x1d548b,_0x1a23d6,_0x2786c5,_0x450964[_0x22d0bb(0x18f)]);const _0x442c09={'timestamp':_0x20e36e,'id':_0x1a23d6,'name':_0x450964[_0x22d0bb(0x200)],'type':_0x450964['type'],'location':_0x450964[_0x22d0bb(0x18f)],'value':_0x2786c5};_0x1d548b[_0x22d0bb(0x2a8)][_0x22d0bb(0x184)](_0x442c09);if(_0x1d548b[_0x22d0bb(0x2a8)][_0x22d0bb(0x1ff)]>HISTORY_MAX_SIZE)_0x1d548b[_0x22d0bb(0x2a8)][_0x22d0bb(0xd6)]();await _0x1d548b[_0x22d0bb(0xbe)](_0x22d0bb(0x202),{'val':JSON['stringify'](_0x442c09),'ack':!![]}),await _0x1d548b['setStateAsync'](_0x22d0bb(0x10d),{'val':JSON[_0x22d0bb(0xf4)](_0x1d548b['eventHistory']),'ack':!![]});_0x1d548b[_0x22d0bb(0x245)]&&(_0x1d548b[_0x22d0bb(0x137)]['push'](_0x442c09),await saveRawEventLog(_0x1d548b),recordSequence(_0x1d548b,_0x442c09));if(_0x450964['isExit']&&_0x2786c5===!![]){if(_0x1d548b['isPresent']&&!_0x1d548b[_0x22d0bb(0xcc)])_0x1d548b['log'][_0x22d0bb(0x188)](_0x22d0bb(0x244)+_0x450964[_0x22d0bb(0x200)]+').\x20Starting\x20Timer.'),startExitTimer(_0x1d548b);else!_0x1d548b[_0x22d0bb(0x24c)]&&(_0x1d548b[_0x22d0bb(0x24e)][_0x22d0bb(0x188)](_0x22d0bb(0x191)+_0x450964[_0x22d0bb(0x200)]+_0x22d0bb(0x221)),await setPresence(_0x1d548b,!![]));}else _0x450964[_0x22d0bb(0x1b8)]==='motion'&&_0x2786c5===!![]&&(_0x1d548b[_0x22d0bb(0x247)]&&(_0x1d548b[_0x22d0bb(0x24e)][_0x22d0bb(0x188)](_0x22d0bb(0x293)),abortExitTimer(_0x1d548b)),!_0x1d548b['isPresent']&&_0x1d548b[_0x22d0bb(0x1f1)]===SYSTEM_MODES[_0x22d0bb(0xbb)]&&await setPresence(_0x1d548b,!![]));}async function runGeminiAnalysis(_0x23ea3a,_0x557eb6=''){const _0x4930e0=a0_0x85d2bf;if(!_0x23ea3a['geminiModel'])return;if(_0x23ea3a[_0x4930e0(0x2a8)][_0x4930e0(0x1ff)]===0x0)return;const _0x14dae1=_0x23ea3a[_0x4930e0(0x2a8)][_0x4930e0(0x1ec)](0x0,0xf),_0x582772=await getWeatherContext(_0x23ea3a),_0x2070ed=_0x23ea3a[_0x4930e0(0x1f1)],_0x410ae9=PERSONA_MAPPING[_0x23ea3a[_0x4930e0(0x298)][_0x4930e0(0x248)]||_0x4930e0(0x1f0)],_0x1c5548=_0x23ea3a['config'][_0x4930e0(0x1a6)]||_0x4930e0(0x19d);let _0x4a1760=![];try{const _0x36dee8=await _0x23ea3a['getStateAsync'](_0x4930e0(0xac));if(_0x36dee8&&_0x36dee8[_0x4930e0(0xb1)])_0x4a1760=!![];}catch(_0x552b9a){}const _0x160523='\x0a\x20\x20\x20\x20ROLLE:\x20KI-Hausverwalter\x20&\x20Gesundheits-Assistent.\x0a\x20\x20\x20\x20PERSONA:\x20'+_0x410ae9+_0x4930e0(0x1b5)+_0x1c5548+_0x4930e0(0xff)+_0x2070ed+_0x4930e0(0x170)+_0x582772+_0x4930e0(0x1fa)+(_0x557eb6||_0x4930e0(0xe6))+_0x4930e0(0x272)+JSON['stringify'](_0x14dae1)+'\x0a\x0a\x20\x20\x20\x20AUFGABE:\x0a\x20\x20\x20\x201.\x20Analysiere\x20auf\x20Gesundheitsrisiken\x20(Sturz,\x20Inaktivit√§t).\x0a\x20\x20\x20\x202.\x20Analysiere\x20auf\x20Komfort/Automatisierung\x20(\x22Butler\x22).\x20Erkennst\x20du\x20ein\x20Muster?\x20(z.B.\x20\x22Wenn\x20Bewegung\x20Flur,\x20dann\x20Licht\x20an\x22).\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20FORMAT\x20(JSON\x20Only!):\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22isAlert\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22alertReason\x22:\x20\x22string\x20(kurz)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22isEmergency\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22summary\x22:\x20\x22string\x20(Was\x20passiert\x20gerade?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22automationProposal\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22detected\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22string\x20(Was\x20soll\x20automatisiert\x20werden?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetId\x22:\x20\x22string\x20(ioBroker\x20ID,\x20z.B.\x200_userdata.0.light)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetValue\x22:\x20\x22any\x20(Wert,\x20z.B.\x20true\x20oder\x2050)\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20';try{const _0x2600f3=await _0x23ea3a[_0x4930e0(0x275)][_0x4930e0(0x163)](_0x160523),_0x2ceb7e=_0x2600f3[_0x4930e0(0x1e0)][_0x4930e0(0x22b)]()[_0x4930e0(0x1f6)](/```json|```/g,'')[_0x4930e0(0x104)](),_0x47cc01=JSON[_0x4930e0(0xc3)](_0x2ceb7e);await _0x23ea3a[_0x4930e0(0xbe)]('analysis.lastResult',{'val':JSON['stringify'](_0x47cc01),'ack':!![]});_0x47cc01['summary']&&await _0x23ea3a[_0x4930e0(0xbe)]('analysis.activitySummary',{'val':_0x47cc01[_0x4930e0(0xe5)],'ack':!![]});const _0x460bce={'timestamp':Date['now'](),'id':Date[_0x4930e0(0x108)]()[_0x4930e0(0x141)](),'analysis':{'activity':{'summary':_0x47cc01[_0x4930e0(0xe5)]||_0x4930e0(0x1c5),'isAlert':_0x47cc01[_0x4930e0(0x23f)]||![],'alertReason':_0x47cc01[_0x4930e0(0xfd)]},'comfort':{'automationProposal':_0x47cc01[_0x4930e0(0x129)]}}};await updateAnalysisHistory(_0x23ea3a,_0x460bce);const _0x535638=_0x47cc01[_0x4930e0(0x23f)]||![];_0x535638!==_0x23ea3a['lastAlertState']&&(await _0x23ea3a['setStateAsync']('analysis.isAlert',{'val':_0x535638,'ack':!![]}),_0x23ea3a['lastAlertState']=_0x535638,_0x535638&&(await _0x23ea3a[_0x4930e0(0xbe)](_0x4930e0(0x228),{'val':_0x47cc01[_0x4930e0(0xfd)],'ack':!![]}),sendNotification(_0x23ea3a,'‚ö†Ô∏è\x20ALARM:\x20'+_0x47cc01[_0x4930e0(0xfd)],![],_0x47cc01[_0x4930e0(0xb2)]))),_0x47cc01['automationProposal']&&_0x47cc01[_0x4930e0(0x129)][_0x4930e0(0x285)]&&_0x47cc01['automationProposal'][_0x4930e0(0x268)]&&(_0x23ea3a[_0x4930e0(0x24e)][_0x4930e0(0x188)](_0x4930e0(0xd3)+_0x47cc01['automationProposal']['description']),await _0x23ea3a[_0x4930e0(0xbe)](_0x4930e0(0x14d),{'val':!![],'ack':!![]}),await _0x23ea3a[_0x4930e0(0xbe)](_0x4930e0(0x1eb),{'val':_0x47cc01[_0x4930e0(0x129)][_0x4930e0(0x1d6)],'ack':!![]}),await _0x23ea3a[_0x4930e0(0xbe)](_0x4930e0(0x260),{'val':_0x47cc01[_0x4930e0(0x129)][_0x4930e0(0x268)],'ack':!![]}),await _0x23ea3a[_0x4930e0(0xbe)](_0x4930e0(0x1ac),{'val':JSON['stringify'](_0x47cc01[_0x4930e0(0x129)]['targetValue']),'ack':!![]}),_0x4a1760&&(_0x23ea3a['log'][_0x4930e0(0x188)]('ü§ñ\x20BUTLER\x20AUTO-APPLY:\x20Executing\x20'+_0x47cc01[_0x4930e0(0x129)][_0x4930e0(0x268)]+_0x4930e0(0x1b2)),await executeAutomationAction(_0x23ea3a)));}catch(_0xd7517e){_0x23ea3a[_0x4930e0(0x24e)][_0x4930e0(0x236)](_0x4930e0(0x128)+_0xd7517e['message']);}}function installPythonDependencies(_0x1a7725){const _0x559381=a0_0x85d2bf;if(_0x1a7725['dependencyInstallInProgress'])return;_0x1a7725[_0x559381(0x253)]=!![];const _0x38b62e=path['join'](__dirname,_0x559381(0x282),_0x559381(0x1dc));_0x1a7725[_0x559381(0x24e)]['info'](_0x559381(0x159)+_0x38b62e+_0x559381(0x1b2)),stopPythonService(_0x1a7725);const _0x57cb82='python3\x20-m\x20pip\x20install\x20-r\x20\x22'+_0x38b62e+_0x559381(0x16f);exec(_0x57cb82,(_0x1f517d,_0x2844fb,_0x27cda7)=>{const _0x1483fb=_0x559381;_0x1a7725[_0x1483fb(0x253)]=![],_0x1f517d?(_0x1a7725[_0x1483fb(0x24e)][_0x1483fb(0x236)]('‚ùå\x20AUTO-FIX\x20FAILED.\x20Please\x20run\x20manually:\x20sudo\x20'+_0x57cb82),_0x1a7725[_0x1483fb(0x24e)][_0x1483fb(0x236)](_0x1483fb(0x12a)+(_0x27cda7||_0x1f517d[_0x1483fb(0x21d)]))):(_0x1a7725[_0x1483fb(0x24e)][_0x1483fb(0x188)](_0x1483fb(0x246)),startPythonService(_0x1a7725));});}function sendToPython(_0x4e3ca4,_0x42fec3,_0x2a41e6={}){const _0x1c6dbb=a0_0x85d2bf;if(!_0x4e3ca4[_0x1c6dbb(0x2a9)]||!_0x4e3ca4[_0x1c6dbb(0x2a9)][_0x1c6dbb(0x12c)][_0x1c6dbb(0x25c)])return;const _0x278d6b=JSON['stringify']({'command':_0x42fec3,..._0x2a41e6});try{_0x4e3ca4[_0x1c6dbb(0x2a9)]['stdin'][_0x1c6dbb(0x134)](_0x278d6b+'\x0a');}catch(_0x1d4158){_0x4e3ca4[_0x1c6dbb(0x24e)]['error'](_0x1c6dbb(0x14b)+_0x1d4158['message']);}}function runPythonHealthCheck(_0x3750bb){const _0x3b657d=a0_0x85d2bf;if(!_0x3750bb[_0x3b657d(0x180)]||_0x3750bb['dailyDigests'][_0x3b657d(0x1ff)]<0x2){_0x3750bb['log'][_0x3b657d(0x188)](_0x3b657d(0x264));return;}const _0x253f53=_0x3750bb['dailyDigests'][_0x3b657d(0x263)](_0x586f1e=>{const _0x1649e9=_0x3b657d,_0x2d0328=(_0x586f1e[_0x1649e9(0x166)]||'')[_0x1649e9(0x1e8)]();return ACTIVITY_LEVEL_MAP[_0x2d0328]||0x32;});_0x3750bb[_0x3b657d(0x24e)][_0x3b657d(0x188)](_0x3b657d(0x1b4)+_0x253f53['length']+_0x3b657d(0x261)),sendToPython(_0x3750bb,'ANALYZE_TREND',{'values':_0x253f53,'tag':'Activity-Level'});}function handlePythonResult(_0xacd7,_0x485a14){const _0x32c26c=a0_0x85d2bf;if(_0x485a14[_0x32c26c(0x1b8)]===_0x32c26c(0x17f))_0xacd7[_0x32c26c(0x24e)][_0x32c26c(0x1ab)]('üêç\x20Python\x20Pong\x20received!\x20Latency\x20check\x20passed.');else{if(_0x485a14[_0x32c26c(0x1b8)]===_0x32c26c(0xfa)){const {tag:_0x217668,diagnosis:_0x18679d,change_percent:_0xb3104f}=_0x485a14[_0x32c26c(0x176)];_0xacd7[_0x32c26c(0x24e)]['info']('üêç\x20Guardian\x20Diagnosis\x20('+_0x217668+_0x32c26c(0x1a3)+_0x18679d+'\x20('+_0xb3104f+'%)'),_0xacd7['setStateAsync'](_0x32c26c(0x1c9),{'val':_0x18679d,'ack':!![]}),_0xacd7['setStateAsync']('analysis.health.trendValue',{'val':_0xb3104f,'ack':!![]});}}}function startPythonService(_0x7b61a4){const _0x199581=a0_0x85d2bf;try{const _0x478ea6=path['join'](__dirname,_0x199581(0x282),'service.py');_0x7b61a4[_0x199581(0x24e)][_0x199581(0x188)](_0x199581(0x28f)+_0x478ea6),_0x7b61a4[_0x199581(0x2a9)]=spawn(_0x199581(0x101),[_0x478ea6]),_0x7b61a4[_0x199581(0x2a9)]['stdout']['on'](_0x199581(0x192),_0x5a1e51=>{const _0xd6bed2=_0x199581,_0x57a0c8=_0x5a1e51['toString']()[_0xd6bed2(0x195)]('\x0a');_0x57a0c8[_0xd6bed2(0x21e)](_0x871db7=>{const _0x5b0e9d=_0xd6bed2,_0x4888e9=_0x871db7[_0x5b0e9d(0x104)]();if(!_0x4888e9)return;if(_0x4888e9[_0x5b0e9d(0x2a2)]('[LOG]'))_0x7b61a4[_0x5b0e9d(0x24e)][_0x5b0e9d(0x1ab)]('[PYTHON]\x20'+_0x4888e9[_0x5b0e9d(0x11f)](0x5)[_0x5b0e9d(0x104)]());else{if(_0x4888e9[_0x5b0e9d(0x2a2)](_0x5b0e9d(0x2a0)))try{const _0x218372=JSON[_0x5b0e9d(0xc3)](_0x4888e9[_0x5b0e9d(0x11f)](0x8)[_0x5b0e9d(0x104)]());handlePythonResult(_0x7b61a4,_0x218372);}catch(_0x10c5f4){_0x7b61a4[_0x5b0e9d(0x24e)][_0x5b0e9d(0x1d5)](_0x5b0e9d(0xf3)+_0x4888e9);}}(_0x4888e9['includes']('No\x20module\x20named')||_0x4888e9['includes'](_0x5b0e9d(0x1b3))||_0x4888e9['includes'](_0x5b0e9d(0x1df)))&&(_0x7b61a4['log'][_0x5b0e9d(0x1d5)]('‚ö†Ô∏è\x20Python\x20missing\x20dependencies.\x20Triggering\x20Auto-Install...'),installPythonDependencies(_0x7b61a4));});}),_0x7b61a4['pythonProcess']['stderr']['on'](_0x199581(0x192),_0x2c22c3=>{const _0x157991=_0x199581,_0x47f1ca=_0x2c22c3['toString']()[_0x157991(0x104)]();_0x7b61a4[_0x157991(0x24e)]['error']('[PYTHON\x20ERR]\x20'+_0x47f1ca);}),_0x7b61a4[_0x199581(0x2a9)]['on'](_0x199581(0xd5),_0x245509=>{const _0xc3d01c=_0x199581;_0x7b61a4[_0xc3d01c(0x24e)][_0xc3d01c(0x188)]('[PYTHON]\x20Service\x20exited\x20with\x20code\x20'+_0x245509),_0x7b61a4['pythonProcess']=null;}),_0x7b61a4[_0x199581(0x2a9)]['on'](_0x199581(0x236),_0x53a3d4=>{const _0x7defac=_0x199581;_0x7b61a4[_0x7defac(0x24e)][_0x7defac(0x1d5)](_0x7defac(0x2ae)+_0x53a3d4[_0x7defac(0x21d)]);});}catch(_0xccf96e){_0x7b61a4[_0x199581(0x24e)][_0x199581(0x236)](_0x199581(0x22f)+_0xccf96e[_0x199581(0x21d)]);}}function stopPythonService(_0x2de56e){const _0x2b3797=a0_0x85d2bf;if(_0x2de56e[_0x2b3797(0x2a9)]){_0x2de56e['log'][_0x2b3797(0x188)](_0x2b3797(0x119));try{_0x2de56e[_0x2b3797(0x2a9)][_0x2b3797(0x266)]();}catch(_0x3782a0){_0x2de56e[_0x2b3797(0x24e)]['warn'](_0x2b3797(0x218)+_0x3782a0['message']);}_0x2de56e[_0x2b3797(0x2a9)]=null;}}class CogniLiving extends utils[a0_0x85d2bf(0x1b1)]{constructor(_0x15c25f){const _0x5907fc=a0_0x85d2bf;super({..._0x15c25f,'name':_0x5907fc(0x1a7)}),this['eventHistory']=[],this[_0x5907fc(0x15f)]=[],this[_0x5907fc(0x297)]=[],this['rawEventLog']=[],this[_0x5907fc(0x180)]=[],this[_0x5907fc(0x1a8)]={},this[_0x5907fc(0xd8)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x5907fc(0x24c)]=!![],this['exitTimer']=null,this['exitGraceTimer']=null,this[_0x5907fc(0xcc)]=![],this[_0x5907fc(0x28b)]=null,this['geminiModel']=null,this[_0x5907fc(0x1f1)]=SYSTEM_MODES['NORMAL'],this[_0x5907fc(0x245)]=![],this[_0x5907fc(0x26e)]=![],this[_0x5907fc(0x1e2)]=_0x5907fc(0x13f),this[_0x5907fc(0x229)]=null,this[_0x5907fc(0x1bc)]=null,this[_0x5907fc(0xcb)]=null,this[_0x5907fc(0x11b)]=null,this[_0x5907fc(0x2a6)]=null,this['pythonProcess']=null,this['dependencyInstallInProgress']=![],this['on'](_0x5907fc(0xfb),this[_0x5907fc(0x290)][_0x5907fc(0x1a5)](this)),this['on']('stateChange',this[_0x5907fc(0x110)][_0x5907fc(0x1a5)](this)),this['on'](_0x5907fc(0x27c),this[_0x5907fc(0x20a)]['bind'](this)),this['on']('message',this[_0x5907fc(0xb4)][_0x5907fc(0x1a5)](this));}async['onReady'](){const _0x463d42=a0_0x85d2bf;this[_0x463d42(0x24e)][_0x463d42(0x188)](_0x463d42(0x15e)+this[_0x463d42(0x22d)]+_0x463d42(0x1ba)),await initZombies(this),this['config'][_0x463d42(0x11d)]=this[_0x463d42(0x298)]['licenseKey']||'';try{this[_0x463d42(0x245)]=await checkLicense(this,this[_0x463d42(0x298)]['licenseKey']);}catch(_0x5cbaa8){}this['log']['info']('[LICENSE\x20CHECK]\x20Key\x20present:\x20'+!!this['config']['licenseKey']+_0x463d42(0x103)+(this['isProVersion']?_0x463d42(0x109):_0x463d42(0x122)));if(!this[_0x463d42(0x298)][_0x463d42(0x1a2)]||this[_0x463d42(0x298)][_0x463d42(0x1a2)]<0.1)this[_0x463d42(0x298)][_0x463d42(0x1a2)]=0xc;await initHistory(this),await initSystemConfig(this);if(this['config'][_0x463d42(0x204)])try{this['genAI']=new GoogleGenerativeAI(this[_0x463d42(0x298)]['geminiApiKey']),this[_0x463d42(0x275)]=this[_0x463d42(0x28b)][_0x463d42(0xca)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x463d42(0x1d0)}}),this['log']['info'](_0x463d42(0x1c3));}catch(_0x25406a){this[_0x463d42(0x24e)][_0x463d42(0x236)](_0x463d42(0x167)+_0x25406a[_0x463d42(0x21d)]);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this['subscribeStates']('analysis.trigger'),this[_0x463d42(0x1c1)](LTM_DP_TRIGGER_DIGEST),this[_0x463d42(0x1c1)](_0x463d42(0xae)),this[_0x463d42(0x1c1)](_0x463d42(0xef)),this['subscribeStates'](_0x463d42(0x17b)),this[_0x463d42(0x1c1)](_0x463d42(0xac)),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this),setTimeout(()=>checkWifiPresence(this),0x1388);if(this[_0x463d42(0x229)])clearInterval(this[_0x463d42(0x229)]);const _0x210ce1=this[_0x463d42(0x298)][_0x463d42(0xdd)]||0xf;_0x210ce1>0x0&&(this[_0x463d42(0x24e)][_0x463d42(0x188)](_0x463d42(0xbd)+_0x210ce1+_0x463d42(0x25e)),this[_0x463d42(0x229)]=setInterval(()=>{runAutopilot(this);},_0x210ce1*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this),startPythonService(this),setTimeout(()=>{this['pythonProcess']&&runPythonHealthCheck(this);},0x1388);}[a0_0x85d2bf(0x20a)](_0x2fe270){const _0x9dd1c0=a0_0x85d2bf;if(this[_0x9dd1c0(0x229)])clearInterval(this['analysisTimer']);if(this['driftAnalysisTimer'])clearInterval(this['driftAnalysisTimer']);if(this['ltmJob'])this['ltmJob'][_0x9dd1c0(0xb7)]();if(this[_0x9dd1c0(0xcb)])this[_0x9dd1c0(0xcb)]['cancel']();if(this[_0x9dd1c0(0x2a6)])this['briefingJob']['cancel']();if(this[_0x9dd1c0(0x247)])clearTimeout(this[_0x9dd1c0(0x247)]);if(this[_0x9dd1c0(0x1bf)])clearTimeout(this[_0x9dd1c0(0x1bf)]);stopPythonService(this),_0x2fe270();}async[a0_0x85d2bf(0x110)](_0x89cf02,_0x279e78){const _0x552ca6=a0_0x85d2bf;if(!_0x279e78)return;if(_0x89cf02['includes']('telegram')&&_0x89cf02['endsWith']('communicate.request')&&_0x279e78['val']){await handleTelegramResponse(this,_0x279e78['val']);return;}if(_0x89cf02===this[_0x552ca6(0x107)]+'.'+SYSTEM_DP_MODE){_0x279e78[_0x552ca6(0xb1)]&&Object[_0x552ca6(0x26b)](SYSTEM_MODES)[_0x552ca6(0x213)](_0x279e78[_0x552ca6(0xb1)])&&(this['currentSystemMode']=_0x279e78[_0x552ca6(0xb1)],_0x279e78[_0x552ca6(0xb1)]===SYSTEM_MODES['VACATION']?await setPresence(this,![]):await setPresence(this,!![]));if(!_0x279e78[_0x552ca6(0x197)])this['setState'](_0x89cf02,{'val':this[_0x552ca6(0x1f1)],'ack':!![]});return;}if(!_0x279e78[_0x552ca6(0x197)]){_0x89cf02['includes'](_0x552ca6(0xb5))&&_0x279e78[_0x552ca6(0xb1)]&&(this[_0x552ca6(0x1ed)](_0x89cf02,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x89cf02[_0x552ca6(0x213)](_0x552ca6(0x151))&&_0x279e78[_0x552ca6(0xb1)]){this[_0x552ca6(0x1ed)](_0x89cf02,{'val':![],'ack':!![]});if(this[_0x552ca6(0x245)])createDailyDigest(this);}_0x89cf02['includes'](_0x552ca6(0x19e))&&_0x279e78['val']&&(this['setState'](_0x89cf02,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x89cf02[_0x552ca6(0x213)](_0x552ca6(0xb0))&&_0x279e78[_0x552ca6(0xb1)]&&(this[_0x552ca6(0x1ed)](_0x89cf02,{'val':![],'ack':!![]}),executeAutomationAction(this));return;}if(this[_0x552ca6(0x298)][_0x552ca6(0x1fe)]&&this[_0x552ca6(0x298)][_0x552ca6(0x1fe)]['includes'](_0x89cf02)){await checkWifiPresence(this);return;}const _0x18a181=(this[_0x552ca6(0x298)][_0x552ca6(0x1a9)]||[])[_0x552ca6(0x13d)](_0x5b2a1b=>_0x5b2a1b['id']===_0x89cf02);if(_0x18a181)processSensorEvent(this,_0x89cf02,_0x279e78,_0x18a181);}async['onMessage'](_0x26325a){const _0x967301=a0_0x85d2bf;if(typeof _0x26325a===_0x967301(0x155)&&_0x26325a[_0x967301(0x21d)])try{if(_0x26325a[_0x967301(0x225)]===_0x967301(0x2a7)){const _0x477dd0=_0x26325a[_0x967301(0x21d)][_0x967301(0x19b)]||this[_0x967301(0x298)][_0x967301(0x204)];if(!_0x477dd0)return this[_0x967301(0xe9)](_0x26325a[_0x967301(0x205)],_0x26325a[_0x967301(0x225)],{'success':![],'message':_0x967301(0x190)},_0x26325a['callback']);try{const _0x1fa645=new GoogleGenerativeAI(_0x477dd0),_0x4c2511=_0x1fa645[_0x967301(0xca)]({'model':GEMINI_MODEL}),_0x51b2c4=await _0x4c2511[_0x967301(0x163)]('Say\x20Hello'),_0x4e15b0=await _0x51b2c4['response'],_0x4358b1=_0x4e15b0[_0x967301(0x22b)]();this['sendTo'](_0x26325a[_0x967301(0x205)],_0x26325a[_0x967301(0x225)],{'success':!![],'message':'Verbindung\x20erfolgreich!\x20Antwort:\x20'+_0x4358b1[_0x967301(0x11f)](0x0,0x14)+_0x967301(0x1b2)},_0x26325a[_0x967301(0x150)]);}catch(_0x3805c2){this[_0x967301(0xe9)](_0x26325a['from'],_0x26325a['command'],{'success':![],'message':'Fehler:\x20'+_0x3805c2[_0x967301(0x21d)]},_0x26325a['callback']);}}else{if(_0x26325a[_0x967301(0x225)]===_0x967301(0xc1)){}else{if(_0x26325a['command']===_0x967301(0x153)){if(!this[_0x967301(0x245)])return this[_0x967301(0xe9)](_0x26325a[_0x967301(0x205)],_0x26325a[_0x967301(0x225)],{'success':![],'isPro':![]},_0x26325a[_0x967301(0x150)]);let _0x4520e2={'status':_0x967301(0x231),'details':'','lastCheck':0x0};try{_0x4520e2[_0x967301(0x23e)]=(await this[_0x967301(0x18e)](LTM_DP_DRIFT_STATUS))['val'],_0x4520e2[_0x967301(0x226)]=(await this[_0x967301(0x18e)](LTM_DP_DRIFT_DETAILS))['val'],_0x4520e2['lastCheck']=(await this[_0x967301(0x18e)](LTM_DP_DRIFT_LAST_CHECK))[_0x967301(0xb1)];}catch(_0x3e9102){}const _0x5d0deb=this['analysisHistory']||[];this[_0x967301(0xe9)](_0x26325a[_0x967301(0x205)],_0x26325a['command'],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x4520e2,'analysisHistory':_0x5d0deb},_0x26325a[_0x967301(0x150)]);}else{if(_0x26325a['command']===_0x967301(0xe0)){const _0x215785=this['dailyDigests'][_0x967301(0x1ff)],_0x911638=new Date(),_0x57217b=new Date(_0x911638[_0x967301(0x22a)](),_0x911638[_0x967301(0x185)](),_0x911638[_0x967301(0x1d4)]())['getTime'](),_0x263761=this[_0x967301(0x137)]['filter'](_0x3e9529=>new Date(_0x3e9529[_0x967301(0x23b)])['getTime']()>_0x57217b)['length'],_0x335284=new Array(0x18)[_0x967301(0x24a)](0x0);this[_0x967301(0x137)][_0x967301(0x21e)](_0x420a75=>{const _0x33fb2d=_0x967301,_0x204ddd=new Date(_0x420a75[_0x33fb2d(0x23b)]);if(_0x204ddd[_0x33fb2d(0x1e9)]()>_0x57217b)_0x335284[_0x204ddd[_0x33fb2d(0x139)]()]++;});let _0x91bcbe={'status':_0x967301(0x231)};try{_0x91bcbe[_0x967301(0x23e)]=(await this['getStateAsync'](LTM_DP_DRIFT_STATUS))[_0x967301(0xb1)];}catch(_0x25ab36){}let _0x2edfaa='';try{const _0x3a352b=await this['getStateAsync'](_0x967301(0xc7));_0x2edfaa=_0x3a352b?_0x3a352b[_0x967301(0xb1)]:'';}catch(_0x465647){}let _0x38132e=null;!this[_0x967301(0x275)]&&(_0x38132e=this[_0x967301(0x298)][_0x967301(0x204)]?'KI-Modell\x20nicht\x20initialisiert':_0x967301(0x216));let _0x146cb5={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x602886=await this[_0x967301(0x18e)](_0x967301(0x14d)),_0x4451a1=await this[_0x967301(0x18e)](_0x967301(0x1eb)),_0x26e641=await this[_0x967301(0x18e)](_0x967301(0x260)),_0x5ab9a7=await this[_0x967301(0x18e)]('analysis.automation.targetValue'),_0x21bd06=await this['getStateAsync'](_0x967301(0xac));_0x602886&&_0x602886[_0x967301(0xb1)]&&(_0x146cb5[_0x967301(0x285)]=!![],_0x146cb5['description']=_0x4451a1?_0x4451a1[_0x967301(0xb1)]:'',_0x146cb5[_0x967301(0x268)]=_0x26e641?_0x26e641[_0x967301(0xb1)]:'',_0x146cb5[_0x967301(0x136)]=_0x5ab9a7?_0x5ab9a7[_0x967301(0xb1)]:''),_0x146cb5['autoApply']=_0x21bd06?!!_0x21bd06[_0x967301(0xb1)]:![];}catch(_0x366aad){}this[_0x967301(0xe9)](_0x26325a[_0x967301(0x205)],_0x26325a[_0x967301(0x225)],{'success':!![],'eventHistory':this[_0x967301(0x2a8)][_0x967301(0x1ec)](0x0,0xf),'stats':{'digestCount':_0x215785,'eventCountToday':_0x263761,'hourlyActivity':_0x335284,'driftStatus':_0x91bcbe[_0x967301(0x23e)],'isPresent':this[_0x967301(0x24c)],'presenceWho':_0x2edfaa,'minDays':this[_0x967301(0x298)][_0x967301(0x1fc)]||0x7,'stbDays':this[_0x967301(0x298)]['ltmStbWindowDays']||0xe,'ltbDays':this[_0x967301(0x298)][_0x967301(0x230)]||0x3c,'systemError':_0x38132e},'automation':_0x146cb5},_0x26325a[_0x967301(0x150)]);}else{if(_0x26325a[_0x967301(0x225)]===_0x967301(0x288)){const _0x430ff4=await this[_0x967301(0x111)](_0x967301(0x29d),'enum'),_0x17e231=[];if(_0x430ff4)for(const _0x39b317 in _0x430ff4){const _0x582798=_0x430ff4[_0x39b317],_0x16f40a=(_0x582798[_0x967301(0x27e)]&&typeof _0x582798[_0x967301(0x27e)][_0x967301(0x200)]===_0x967301(0x155)?_0x582798[_0x967301(0x27e)][_0x967301(0x200)]['de']:_0x582798[_0x967301(0x27e)]['name'])||_0x582798[_0x967301(0x27e)][_0x967301(0x200)];_0x17e231[_0x967301(0xaa)]({'id':_0x39b317,'name':_0x16f40a});}this[_0x967301(0xe9)](_0x26325a[_0x967301(0x205)],_0x26325a['command'],{'success':!![],'enums':_0x17e231},_0x26325a[_0x967301(0x150)]);}else{if(_0x26325a['command']===_0x967301(0x1d8))try{const _0x308c5e=await scanForDevices(this,_0x26325a[_0x967301(0x21d)]||{});this[_0x967301(0xe9)](_0x26325a[_0x967301(0x205)],_0x26325a[_0x967301(0x225)],{'success':!![],'devices':_0x308c5e},_0x26325a[_0x967301(0x150)]);}catch(_0x565cd1){this[_0x967301(0xe9)](_0x26325a[_0x967301(0x205)],_0x26325a[_0x967301(0x225)],{'success':![],'error':_0x565cd1['message']},_0x26325a[_0x967301(0x150)]);}else{if(_0x26325a[_0x967301(0x225)]==='getCalendarNames'){const _0x2f7675=_0x26325a[_0x967301(0x21d)][_0x967301(0x1e3)];if(!_0x2f7675)return this['sendTo'](_0x26325a[_0x967301(0x205)],_0x26325a[_0x967301(0x225)],{'success':![],'error':'No\x20instance'},_0x26325a[_0x967301(0x150)]);const _0x2ec9c4=await getCalendarNames(this,_0x2f7675);this[_0x967301(0xe9)](_0x26325a[_0x967301(0x205)],_0x26325a[_0x967301(0x225)],{'success':!![],'names':_0x2ec9c4},_0x26325a[_0x967301(0x150)]);}else{if(_0x26325a[_0x967301(0x225)]===_0x967301(0x23d)){const {targetId:_0x5a05b1,targetValue:_0x22ebde}=_0x26325a['message'];this[_0x967301(0x24e)][_0x967301(0x188)](_0x967301(0x143)+_0x5a05b1+_0x967301(0x164)+_0x22ebde),await this[_0x967301(0xbe)](_0x967301(0x14d),{'val':!![],'ack':!![]}),await this['setStateAsync'](_0x967301(0x1eb),{'val':_0x967301(0x19c)+_0x5a05b1,'ack':!![]}),await this['setStateAsync'](_0x967301(0x260),{'val':_0x5a05b1,'ack':!![]}),await this['setStateAsync']('analysis.automation.targetValue',{'val':_0x22ebde,'ack':!![]}),this[_0x967301(0xe9)](_0x26325a['from'],_0x26325a['command'],{'success':!![]},_0x26325a[_0x967301(0x150)]);}else{if(_0x26325a[_0x967301(0x225)]==='submitFeedback'){const {historyId:_0x45b144,rating:_0x4eb546,comment:_0x15c27d,alertReason:_0x46e8e4}=_0x26325a['message'];_0x45b144&&_0x4eb546?(await saveFeedback(this,{'timestamp':Date['now'](),'historyId':_0x45b144,'rating':_0x4eb546,'comment':_0x15c27d,'alertReason':_0x46e8e4}),this[_0x967301(0xe9)](_0x26325a[_0x967301(0x205)],_0x26325a[_0x967301(0x225)],{'success':!![]},_0x26325a[_0x967301(0x150)])):this[_0x967301(0xe9)](_0x26325a[_0x967301(0x205)],_0x26325a[_0x967301(0x225)],{'success':![],'error':_0x967301(0x214)},_0x26325a[_0x967301(0x150)]);}else _0x26325a[_0x967301(0x225)]===_0x967301(0x280)&&(this[_0x967301(0x24e)]['info']('User\x20dismissed\x20automation\x20proposal.'),await this[_0x967301(0xbe)](_0x967301(0x14d),{'val':![],'ack':!![]}),await this[_0x967301(0xbe)]('analysis.automation.description',{'val':'','ack':!![]}),this[_0x967301(0xe9)](_0x26325a[_0x967301(0x205)],_0x26325a[_0x967301(0x225)],{'success':!![]},_0x26325a[_0x967301(0x150)]));}}}}}}}}}catch(_0x1d1c7e){this['log'][_0x967301(0x236)]('Error\x20in\x20onMessage\x20command\x20'+_0x26325a[_0x967301(0x225)]+':\x20'+_0x1d1c7e['message']);if(_0x26325a[_0x967301(0x150)])this[_0x967301(0xe9)](_0x26325a[_0x967301(0x205)],_0x26325a[_0x967301(0x225)],{'success':![],'error':_0x1d1c7e['message']},_0x26325a[_0x967301(0x150)]);}}}if(require[a0_0x85d2bf(0x28a)]!==module)module[a0_0x85d2bf(0x19f)]=_0x48f8ef=>new CogniLiving(_0x48f8ef);else new CogniLiving();