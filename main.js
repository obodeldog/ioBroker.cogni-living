const a0_0x2f7599=a0_0x3710;(function(_0x5db585,_0x110e56){const _0x593605=a0_0x3710,_0x3f2cf1=_0x5db585();while(!![]){try{const _0x2838a2=-parseInt(_0x593605(0xed))/0x1*(parseInt(_0x593605(0x182))/0x2)+-parseInt(_0x593605(0xe7))/0x3+-parseInt(_0x593605(0x110))/0x4*(-parseInt(_0x593605(0x137))/0x5)+-parseInt(_0x593605(0x12a))/0x6+-parseInt(_0x593605(0x15c))/0x7*(parseInt(_0x593605(0x17a))/0x8)+-parseInt(_0x593605(0x17c))/0x9+parseInt(_0x593605(0x17b))/0xa;if(_0x2838a2===_0x110e56)break;else _0x3f2cf1['push'](_0x3f2cf1['shift']());}catch(_0x24fc19){_0x3f2cf1['push'](_0x3f2cf1['shift']());}}}(a0_0x53ae,0x4df96));const a0_0x1f4f76=(function(){let _0x37ce9a=!![];return function(_0x218e33,_0x82e260){const _0x47ceda=_0x37ce9a?function(){if(_0x82e260){const _0x5f4f99=_0x82e260['apply'](_0x218e33,arguments);return _0x82e260=null,_0x5f4f99;}}:function(){};return _0x37ce9a=![],_0x47ceda;};}()),a0_0x13d340=a0_0x1f4f76(this,function(){const _0x448652=a0_0x3710;return a0_0x13d340[_0x448652(0x17e)]()[_0x448652(0x105)](_0x448652(0x146))[_0x448652(0x17e)]()['constructor'](a0_0x13d340)[_0x448652(0x105)](_0x448652(0x146));});function a0_0x53ae(){const _0x363a33=['LTM.dailyDigests','floor','setupModeResetScheduler','system.presenceWho','analysis.automation.autoApply','setupLtmScheduler','SYSTEM_DP_MODE','LTM.triggerDailyDigest','triggerGaitAnalysis','createAllObjects','checkWifiPresence','length','analysis.trigger','1421irXsYE','getForeignObjectsAsync','cogni-living\x20adapter\x20starting\x20(v','TRAIN_COMFORT','scanDevices','analysis.training.triggerComfort','eventHistory','activityLevel','message','testApiKey','setState','ANALYZE_TREND','@google/generative-ai','checkLicense','notifyTelegramEnabled','exitGraceTimer','analysis.training.status','communicate.request','onUnload','./lib/recorder','bind','triggerDailyDigest','LTM.rawEventLog','minDaysForBaseline','cogni-living','application/json','from','timestamp','cancel','processSensorEvent','19744fASedG','10737280sKnBNZ','633474BjOwUW','subscribeForeignStatesAsync','toString','Aktiv\x20(','analysisInterval','error','170TDWuVL','split','isPresent','ANALYZE_GAIT','Gemini\x20AI\x20initialized.','system.mode','setHours','initHistory','matrix','LTM.trainingData.sequences','location','devices','getLtmData','Training\x20Error:\x20','namespace','includes','getStateAsync','parse','ltmJob','models/gemini-flash-latest','fill','createDailyDigest','analysis.training.triggerTopology','ready','info','command','ðŸ•¸ï¸\x20Topology\x20Graph\x20manually\x20updated\x20by\x20user.','Topology\x20Update\x20Error:\x20','unload','briefingJob','./lib/ai_agent','setStateAsync','analysis.training.triggerEnergy','@iobroker/adapter-core','Sec-Training\x20started...','178800LFahEN','geminiApiKey','sendMorningBriefing','dailyDigests','slice','setPresence','4245EAOatr','onStateChange','send','val','onMessage','runGeminiAnalysis','onReady','lastAlertState','getOutsideTemperatureNumeric','presenceDevices','analysis.training.triggerHealth','telegram','loadSystemMode','getHours','driftAnalysisTimer','common','exitTimer','rawEventLog','getTime','modeResetJob',')\x20-\x20Phase\x20C\x20(Stabilization)','version','object','automation.triggerAction','search','Lernphase\x20(','getOverviewData','TRAIN_ENERGY','ðŸ•¸ï¸\x20Manually\x20triggering\x20Topology\x20Update...','SYSTEM_MODES','VACATION','runAutopilot','setupBriefingScheduler','analysis.topology.structure','abortExitTimer','1144680LreblL','online','join','config','PYTHON_EXE','updateHealthVector','inactivityThresholdHours','type','map','analysis.health.todayVector','startSystem','getState','getForeignStateAsync','Activity-Level','pop','Gemini\x20Init\x20Error:\x20','getEnums','getMinutes','analysisHistory','ack','./lib/python_bridge','notifyTelegramInstance','initZombies','debug','name','isProVersion','292206nDtAGY','stringify','forEach','SET_TOPOLOGY','stateChange','log','callback','TRAIN_SECURITY','updateTopology','analysis.training.triggerSecurity','genAI','values','temperature','5PsFPNF','analysis.automation.triggerAction','./lib/scheduler','runBaselineDriftAnalysis','LTM.trainingData.thermodynamics','updateTopologyMatrix','subscribeStates','runPythonHealthCheck','./lib/scanner','TRAIN_HEALTH','currentSystemMode','initSystemConfig','sensorLastValues','enum.rooms.*','sendTo','(((.+)+)+)+$','analysisTimer','enum.functions.*','triggerEnergyPrediction','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','NORMAL','isGracePeriodActive','Adapter','scanForDevices'];a0_0x53ae=function(){return _0x363a33;};return a0_0x53ae();}a0_0x13d340();'use strict';function a0_0x3710(_0x55de94,_0x1ebe7c){const _0x1f6ad2=a0_0x53ae();return a0_0x3710=function(_0x13d340,_0x1f4f76){_0x13d340=_0x13d340-0xe0;let _0x53aeec=_0x1f6ad2[_0x13d340];return _0x53aeec;},a0_0x3710(_0x55de94,_0x1ebe7c);}const utils=require(a0_0x2f7599(0xe5)),{GoogleGenerativeAI}=require(a0_0x2f7599(0x168)),installer=require('./lib/installer'),scanner=require(a0_0x2f7599(0x13f)),schedulers=require(a0_0x2f7599(0x139)),topology=require('./lib/topology'),setup=require('./lib/setup'),recorder=require(a0_0x2f7599(0x16f)),pythonBridge=require(a0_0x2f7599(0x124)),aiAgent=require(a0_0x2f7599(0xe2)),GEMINI_MODEL=a0_0x2f7599(0x195),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x2f7599(0x14d)]{constructor(_0x4859f0){const _0x1cbc71=a0_0x2f7599;super({..._0x4859f0,'name':_0x1cbc71(0x174)}),this[_0x1cbc71(0x162)]=[],this[_0x1cbc71(0x122)]=[],this[_0x1cbc71(0xfe)]=[],this[_0x1cbc71(0xea)]=[],this['sensorLastValues']={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x1cbc71(0xfd)]=null,this[_0x1cbc71(0x16b)]=null,this[_0x1cbc71(0x14c)]=![],this[_0x1cbc71(0x134)]=null,this['geminiModel']=null,this[_0x1cbc71(0x141)]=setup[_0x1cbc71(0x10a)][_0x1cbc71(0x14b)],this[_0x1cbc71(0x129)]=![],this[_0x1cbc71(0xf4)]=![],this[_0x1cbc71(0x147)]=null,this[_0x1cbc71(0x194)]=null,this[_0x1cbc71(0x100)]=null,this[_0x1cbc71(0xfb)]=null,this[_0x1cbc71(0xe1)]=null,this['dependencyInstallInProgress']=![],this['on'](_0x1cbc71(0x199),this[_0x1cbc71(0xf3)][_0x1cbc71(0x170)](this)),this['on'](_0x1cbc71(0x12e),this[_0x1cbc71(0xee)][_0x1cbc71(0x170)](this)),this['on'](_0x1cbc71(0xe0),this[_0x1cbc71(0x16e)][_0x1cbc71(0x170)](this)),this['on'](_0x1cbc71(0x164),this['onMessage'][_0x1cbc71(0x170)](this));}async[a0_0x2f7599(0xf3)](){const _0x20cb1d=a0_0x2f7599;this[_0x20cb1d(0x12f)][_0x20cb1d(0x19a)](_0x20cb1d(0x15e)+this[_0x20cb1d(0x102)]+_0x20cb1d(0x101));if(!installer['checkAndInstall'](this,()=>this[_0x20cb1d(0x11a)]()))return;}async['startSystem'](){const _0x42ea6d=a0_0x2f7599;await setup[_0x42ea6d(0x126)](this);try{this[_0x42ea6d(0x129)]=await setup[_0x42ea6d(0x169)](this['config']['licenseKey']);}catch(_0x390d88){}if(!this[_0x42ea6d(0x113)]['inactivityThresholdHours']||this[_0x42ea6d(0x113)]['inactivityThresholdHours']<0.1)this['config'][_0x42ea6d(0x116)]=0xc;await setup[_0x42ea6d(0x189)](this),await setup[_0x42ea6d(0x142)](this);if(this[_0x42ea6d(0x113)][_0x42ea6d(0xe8)])try{this[_0x42ea6d(0x134)]=new GoogleGenerativeAI(this[_0x42ea6d(0x113)][_0x42ea6d(0xe8)]),this['geminiModel']=this[_0x42ea6d(0x134)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x42ea6d(0x175)}}),this['log'][_0x42ea6d(0x19a)](_0x42ea6d(0x186));}catch(_0x3920f5){this[_0x42ea6d(0x12f)][_0x42ea6d(0x181)](_0x42ea6d(0x11f)+_0x3920f5[_0x42ea6d(0x164)]);}await setup[_0x42ea6d(0x158)](this),await this[_0x42ea6d(0xf9)]();try{const _0x53bd2d=await this[_0x42ea6d(0x192)]('LTM.rawEventLog');if(_0x53bd2d&&_0x53bd2d[_0x42ea6d(0xf0)])this['rawEventLog']=JSON['parse'](_0x53bd2d[_0x42ea6d(0xf0)]);}catch(_0x357035){this[_0x42ea6d(0xfe)]=[];}try{const _0x2b46f7=await this[_0x42ea6d(0x192)](_0x42ea6d(0x14f));if(_0x2b46f7&&_0x2b46f7['val'])this['dailyDigests']=JSON[_0x42ea6d(0x193)](_0x2b46f7[_0x42ea6d(0xf0)]);}catch(_0x3acd19){this[_0x42ea6d(0xea)]=[];}const _0x5e4ffe=this['dailyDigests'][_0x42ea6d(0x15a)]>=(this[_0x42ea6d(0x113)]['minDaysForBaseline']||0x7)?_0x42ea6d(0x17f)+this[_0x42ea6d(0xea)][_0x42ea6d(0x15a)]+'\x20Tage)':_0x42ea6d(0x106)+this['dailyDigests'][_0x42ea6d(0x15a)]+'/'+(this[_0x42ea6d(0x113)][_0x42ea6d(0x173)]||0x7)+')';await this[_0x42ea6d(0xe3)]('LTM.baselineStatus',{'val':_0x5e4ffe,'ack':!![]}),this[_0x42ea6d(0x13d)](_0x42ea6d(0x15b)),this[_0x42ea6d(0x13d)](_0x42ea6d(0x156)),this['subscribeStates'](_0x42ea6d(0x187)),this['subscribeStates']('analysis.triggerBriefing'),this[_0x42ea6d(0x13d)](_0x42ea6d(0x138)),this[_0x42ea6d(0x13d)](_0x42ea6d(0x153)),this['subscribeStates'](_0x42ea6d(0x133)),this[_0x42ea6d(0x13d)]('analysis.training.triggerHealth'),this['subscribeStates'](_0x42ea6d(0xe4)),this[_0x42ea6d(0x13d)](_0x42ea6d(0x161)),this[_0x42ea6d(0x13d)](_0x42ea6d(0x198));const _0x3812b5=this['config'][_0x42ea6d(0x18d)];if(_0x3812b5)for(const _0x56d9d0 of _0x3812b5){await this[_0x42ea6d(0x17d)](_0x56d9d0['id']);}const _0x4ed76d=this[_0x42ea6d(0x113)]['presenceDevices'];if(_0x4ed76d)for(const _0x52599c of _0x4ed76d){await this['subscribeForeignStatesAsync'](_0x52599c);}if(this[_0x42ea6d(0x113)][_0x42ea6d(0x16a)]&&this['config']['notifyTelegramInstance'])await this[_0x42ea6d(0x17d)](this[_0x42ea6d(0x113)][_0x42ea6d(0x125)]+'.communicate.request');setTimeout(()=>this[_0x42ea6d(0x159)](),0x1388);if(this[_0x42ea6d(0x147)])clearInterval(this[_0x42ea6d(0x147)]);const _0xefbe32=this['config'][_0x42ea6d(0x180)]||0xf;_0xefbe32>0x0&&(this[_0x42ea6d(0x147)]=setInterval(()=>{const _0x285d4b=_0x42ea6d;this[_0x285d4b(0x10c)]();},_0xefbe32*0x3c*0x3e8)),schedulers[_0x42ea6d(0x154)](this,()=>aiAgent[_0x42ea6d(0x197)](this,pythonBridge)),schedulers[_0x42ea6d(0x151)](this),schedulers['setupDriftAnalysisScheduler'](this,()=>aiAgent[_0x42ea6d(0x13a)](this)),schedulers[_0x42ea6d(0x10d)](this,()=>aiAgent[_0x42ea6d(0xe9)](this)),pythonBridge['startService'](this,installer[_0x42ea6d(0x114)]),setTimeout(async()=>{const _0x2a474f=_0x42ea6d;await topology['updateTopology'](this);try{const _0x3e46d2=await this[_0x2a474f(0x192)](_0x2a474f(0x10e));if(_0x3e46d2&&_0x3e46d2[_0x2a474f(0xf0)])pythonBridge[_0x2a474f(0xef)](this,'SET_TOPOLOGY',JSON[_0x2a474f(0x193)](_0x3e46d2[_0x2a474f(0xf0)]));}catch(_0x2bb4f9){}this[_0x2a474f(0x13e)](),this['triggerGaitAnalysis'](),this[_0x2a474f(0x149)](),this[_0x2a474f(0x115)]();},0x1388);}[a0_0x2f7599(0x16e)](_0x706daf){const _0x5497f4=a0_0x2f7599;if(this[_0x5497f4(0x147)])clearInterval(this[_0x5497f4(0x147)]);if(this[_0x5497f4(0xfb)])clearInterval(this[_0x5497f4(0xfb)]);if(this[_0x5497f4(0x194)])this[_0x5497f4(0x194)][_0x5497f4(0x178)]();if(this[_0x5497f4(0x100)])this[_0x5497f4(0x100)][_0x5497f4(0x178)]();if(this['briefingJob'])this['briefingJob'][_0x5497f4(0x178)]();recorder[_0x5497f4(0x10f)](this),pythonBridge['stopService'](this),_0x706daf();}async[a0_0x2f7599(0xee)](_0x50c259,_0x101489){const _0x2b242f=a0_0x2f7599;if(!_0x101489||this['dependencyInstallInProgress'])return;if(_0x50c259[_0x2b242f(0x191)](_0x2b242f(0xf8))&&_0x50c259['endsWith'](_0x2b242f(0x16d))&&_0x101489[_0x2b242f(0xf0)])return;if(_0x50c259===this[_0x2b242f(0x190)]+'.system.mode'){if(_0x101489[_0x2b242f(0xf0)]&&Object[_0x2b242f(0x135)](setup[_0x2b242f(0x10a)])[_0x2b242f(0x191)](_0x101489['val'])){this[_0x2b242f(0x141)]=_0x101489['val'];if(_0x101489[_0x2b242f(0xf0)]===setup[_0x2b242f(0x10a)][_0x2b242f(0x10b)])await recorder[_0x2b242f(0xec)](this,![]);else await recorder[_0x2b242f(0xec)](this,!![]);}if(!_0x101489[_0x2b242f(0x123)])this['setState'](_0x50c259,{'val':this[_0x2b242f(0x141)],'ack':!![]});return;}if(!_0x101489[_0x2b242f(0x123)]){_0x50c259[_0x2b242f(0x191)](_0x2b242f(0x15b))&&_0x101489['val']&&(this[_0x2b242f(0x166)](_0x50c259,{'val':![],'ack':!![]}),aiAgent[_0x2b242f(0xf2)](this));if(_0x50c259['includes'](_0x2b242f(0x171))&&_0x101489[_0x2b242f(0xf0)]){this[_0x2b242f(0x166)](_0x50c259,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent[_0x2b242f(0x197)](this,pythonBridge);}_0x50c259[_0x2b242f(0x191)]('triggerBriefing')&&_0x101489[_0x2b242f(0xf0)]&&(this[_0x2b242f(0x166)](_0x50c259,{'val':![],'ack':!![]}),aiAgent[_0x2b242f(0xe9)](this));_0x50c259[_0x2b242f(0x191)](_0x2b242f(0x104))&&_0x101489[_0x2b242f(0xf0)]&&(this[_0x2b242f(0x166)](_0x50c259,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this));if(_0x50c259[_0x2b242f(0x191)](_0x2b242f(0x133))&&_0x101489['val']){this[_0x2b242f(0x166)](_0x50c259,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x2e08a3=await this[_0x2b242f(0x192)](_0x2b242f(0x18b));if(_0x2e08a3&&_0x2e08a3[_0x2b242f(0xf0)]){const _0x12c2e6=JSON['parse'](_0x2e08a3[_0x2b242f(0xf0)]);this[_0x2b242f(0x12f)]['info']('ðŸ§ \x20Triggering\x20Security\x20Training...'),this[_0x2b242f(0xe3)](_0x2b242f(0x16c),{'val':_0x2b242f(0xe6),'ack':!![]}),pythonBridge[_0x2b242f(0xef)](this,_0x2b242f(0x131),{'sequences':_0x12c2e6});}}catch(_0x498bce){this[_0x2b242f(0x12f)][_0x2b242f(0x181)](_0x2b242f(0x18f)+_0x498bce[_0x2b242f(0x164)]);}}if(_0x50c259['includes'](_0x2b242f(0xf7))&&_0x101489[_0x2b242f(0xf0)]){this[_0x2b242f(0x166)](_0x50c259,{'val':![],'ack':!![]});if(this[_0x2b242f(0x129)])try{const _0x439504=await this['getStateAsync'](_0x2b242f(0x14f));if(_0x439504&&_0x439504[_0x2b242f(0xf0)])pythonBridge[_0x2b242f(0xef)](this,_0x2b242f(0x140),{'digests':JSON[_0x2b242f(0x193)](_0x439504['val'])});}catch(_0x4b2c2d){}}if(_0x50c259[_0x2b242f(0x191)](_0x2b242f(0xe4))&&_0x101489['val']){this[_0x2b242f(0x166)](_0x50c259,{'val':![],'ack':!![]});if(this[_0x2b242f(0x129)])try{const _0x5a5a2d=await this['getStateAsync'](_0x2b242f(0x13b));if(_0x5a5a2d&&_0x5a5a2d[_0x2b242f(0xf0)])pythonBridge['send'](this,_0x2b242f(0x108),{'points':JSON[_0x2b242f(0x193)](_0x5a5a2d[_0x2b242f(0xf0)])});}catch(_0x4b9305){}}if(_0x50c259[_0x2b242f(0x191)](_0x2b242f(0x161))&&_0x101489['val']){this[_0x2b242f(0x166)](_0x50c259,{'val':![],'ack':!![]});if(this[_0x2b242f(0x129)])try{const _0x5a54c3=await this['getStateAsync'](_0x2b242f(0x172));_0x5a54c3&&_0x5a54c3[_0x2b242f(0xf0)]&&(this[_0x2b242f(0x12f)][_0x2b242f(0x19a)]('ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...'),pythonBridge['send'](this,_0x2b242f(0x15f),{'events':JSON[_0x2b242f(0x193)](_0x5a54c3['val'])}));}catch(_0x558736){}}_0x50c259[_0x2b242f(0x191)](_0x2b242f(0x198))&&_0x101489[_0x2b242f(0xf0)]&&(this[_0x2b242f(0x166)](_0x50c259,{'val':![],'ack':!![]}),this[_0x2b242f(0x12f)][_0x2b242f(0x19a)](_0x2b242f(0x109)),topology[_0x2b242f(0x132)](this));return;}if(this[_0x2b242f(0x113)][_0x2b242f(0xf6)]&&this[_0x2b242f(0x113)][_0x2b242f(0xf6)][_0x2b242f(0x191)](_0x50c259)){await this['checkWifiPresence']();return;}const _0x75e0ee=(this[_0x2b242f(0x113)]['devices']||[])['find'](_0x257586=>_0x257586['id']===_0x50c259);if(_0x75e0ee)recorder[_0x2b242f(0x179)](this,_0x50c259,_0x101489,_0x75e0ee);}async[a0_0x2f7599(0xf1)](_0x43efc1){const _0x18ce78=a0_0x2f7599;if(typeof _0x43efc1===_0x18ce78(0x103)&&_0x43efc1['message']){if(_0x43efc1[_0x18ce78(0x19b)]===_0x18ce78(0x165)){}else{if(_0x43efc1[_0x18ce78(0x19b)]===_0x18ce78(0x160))try{const _0x17c0fc=await scanner[_0x18ce78(0x14e)](this,_0x43efc1[_0x18ce78(0x164)]||{});this[_0x18ce78(0x145)](_0x43efc1[_0x18ce78(0x176)],_0x43efc1['command'],{'success':!![],'devices':_0x17c0fc},_0x43efc1[_0x18ce78(0x130)]);}catch(_0x31a4ad){this['sendTo'](_0x43efc1[_0x18ce78(0x176)],_0x43efc1[_0x18ce78(0x19b)],{'success':![],'error':_0x31a4ad[_0x18ce78(0x164)]},_0x43efc1[_0x18ce78(0x130)]);}else{if(_0x43efc1[_0x18ce78(0x19b)]===_0x18ce78(0x13c)){const {matrix:_0x493368}=_0x43efc1[_0x18ce78(0x164)];try{const _0x354bb9=await this[_0x18ce78(0x192)](_0x18ce78(0x10e));if(_0x354bb9&&_0x354bb9[_0x18ce78(0xf0)]){const _0x524f6e=JSON[_0x18ce78(0x193)](_0x354bb9[_0x18ce78(0xf0)]);_0x524f6e[_0x18ce78(0x18a)]=_0x493368,_0x524f6e['updated']=Date['now'](),await this[_0x18ce78(0xe3)]('analysis.topology.structure',{'val':JSON['stringify'](_0x524f6e),'ack':!![]}),this[_0x18ce78(0x12f)]['info'](_0x18ce78(0x19c)),pythonBridge[_0x18ce78(0xef)](this,_0x18ce78(0x12d),_0x524f6e);}this['sendTo'](_0x43efc1[_0x18ce78(0x176)],_0x43efc1[_0x18ce78(0x19b)],{'success':!![]},_0x43efc1[_0x18ce78(0x130)]);}catch(_0x2b0d7d){this[_0x18ce78(0x12f)][_0x18ce78(0x181)](_0x18ce78(0x19d)+_0x2b0d7d[_0x18ce78(0x164)]);}}else{if(_0x43efc1[_0x18ce78(0x19b)]===_0x18ce78(0x18e))this[_0x18ce78(0x145)](_0x43efc1['from'],_0x43efc1[_0x18ce78(0x19b)],{'success':!![],'dailyDigests':this[_0x18ce78(0xea)]||[],'analysisHistory':this[_0x18ce78(0x122)]||[]},_0x43efc1['callback']);else{if(_0x43efc1['command']===_0x18ce78(0x107)){const _0x48f3c8=this[_0x18ce78(0xea)]['length'],_0x3b7961=new Array(0x18)[_0x18ce78(0x196)](0x0),_0x34da2b=new Date()[_0x18ce78(0x188)](0x0,0x0,0x0,0x0);this[_0x18ce78(0x162)]&&this[_0x18ce78(0x162)][_0x18ce78(0x12c)](_0x585a94=>{const _0x4a266e=_0x18ce78;if(_0x585a94[_0x4a266e(0x177)]>=_0x34da2b){const _0x548d58=new Date(_0x585a94[_0x4a266e(0x177)])[_0x4a266e(0xfa)]();if(_0x548d58>=0x0&&_0x548d58<0x18)_0x3b7961[_0x548d58]++;}}),this[_0x18ce78(0x145)](_0x43efc1[_0x18ce78(0x176)],_0x43efc1[_0x18ce78(0x19b)],{'success':!![],'eventHistory':this[_0x18ce78(0x162)][_0x18ce78(0xeb)](0x0,0xf),'stats':{'digestCount':_0x48f3c8,'isPresent':this[_0x18ce78(0x184)],'hourlyActivity':_0x3b7961},'automation':{'detected':![]}},_0x43efc1[_0x18ce78(0x130)]);}else{if(_0x43efc1[_0x18ce78(0x19b)]===_0x18ce78(0x120)){const _0x223aca=await this['getForeignObjectsAsync'](_0x18ce78(0x148),'enum'),_0x221c9a=[];if(_0x223aca)for(const _0x405b29 in _0x223aca){const _0x1a7faf=_0x223aca[_0x405b29],_0x138821=(_0x1a7faf[_0x18ce78(0xfc)]&&typeof _0x1a7faf[_0x18ce78(0xfc)][_0x18ce78(0x128)]===_0x18ce78(0x103)?_0x1a7faf[_0x18ce78(0xfc)][_0x18ce78(0x128)]['de']:_0x1a7faf[_0x18ce78(0xfc)][_0x18ce78(0x128)])||_0x1a7faf['common'][_0x18ce78(0x128)];_0x221c9a['push']({'id':_0x405b29,'name':_0x138821});}const _0x2fb5c6=await this[_0x18ce78(0x15d)](_0x18ce78(0x144),'enum'),_0x36d23b=[];if(_0x2fb5c6)for(const _0x108532 in _0x2fb5c6){const _0x1114a0=_0x2fb5c6[_0x108532],_0x12e9d2=(_0x1114a0[_0x18ce78(0xfc)]&&typeof _0x1114a0[_0x18ce78(0xfc)][_0x18ce78(0x128)]==='object'?_0x1114a0[_0x18ce78(0xfc)]['name']['de']:_0x1114a0[_0x18ce78(0xfc)][_0x18ce78(0x128)])||_0x108532[_0x18ce78(0x183)]('.')[_0x18ce78(0x11e)]();_0x36d23b['push'](_0x12e9d2);}this[_0x18ce78(0x145)](_0x43efc1['from'],_0x43efc1['command'],{'success':!![],'enums':_0x221c9a,'rooms':_0x36d23b},_0x43efc1[_0x18ce78(0x130)]);}}}}}}}}async[a0_0x2f7599(0xf9)](){const _0x463be7=a0_0x2f7599;try{const _0x26aab4=await this['getStateAsync'](setup['SYSTEM_DP_MODE']);_0x26aab4&&_0x26aab4[_0x463be7(0xf0)]&&Object[_0x463be7(0x135)](setup[_0x463be7(0x10a)])[_0x463be7(0x191)](_0x26aab4[_0x463be7(0xf0)])?this['currentSystemMode']=_0x26aab4[_0x463be7(0xf0)]:(this[_0x463be7(0x141)]=setup[_0x463be7(0x10a)][_0x463be7(0x14b)],await this['setStateAsync'](setup[_0x463be7(0x155)],{'val':setup[_0x463be7(0x10a)][_0x463be7(0x14b)],'ack':!![]}));}catch(_0x83adb1){this[_0x463be7(0x141)]=setup[_0x463be7(0x10a)]['NORMAL'];}}async[a0_0x2f7599(0x159)](){const _0x1ab3e8=a0_0x2f7599;try{const _0xcdf98a=this[_0x1ab3e8(0x113)][_0x1ab3e8(0xf6)]||[];let _0x2831b4=![];const _0x346abb=[];for(const _0xe0c8f of _0xcdf98a){try{const _0x420178=await this[_0x1ab3e8(0x11c)](_0xe0c8f);_0x420178&&(_0x420178[_0x1ab3e8(0xf0)]===!![]||_0x420178['val']===_0x1ab3e8(0x111)||_0x420178['val']===0x1)&&(_0x2831b4=!![],_0x346abb['push'](_0xe0c8f));}catch(_0x5329e1){}}return await this[_0x1ab3e8(0xe3)](_0x1ab3e8(0x152),{'val':_0x346abb[_0x1ab3e8(0x112)](',\x20'),'ack':!![]}),_0x2831b4&&(this[_0x1ab3e8(0xfd)]&&(this[_0x1ab3e8(0x12f)]['info']('WiFi\x20Presence\x20detected.'),recorder[_0x1ab3e8(0x10f)](this)),!this['isPresent']&&this[_0x1ab3e8(0x141)]===setup[_0x1ab3e8(0x10a)][_0x1ab3e8(0x14b)]&&await recorder[_0x1ab3e8(0xec)](this,!![])),_0x2831b4;}catch(_0x274598){return![];}}async['runAutopilot'](){const _0x2aca58=a0_0x2f7599;this[_0x2aca58(0x12f)][_0x2aca58(0x127)](_0x2aca58(0x14a)),await aiAgent[_0x2aca58(0xf2)](this),this[_0x2aca58(0x115)](),this[_0x2aca58(0x157)](),this['triggerEnergyPrediction']();}['triggerGaitAnalysis'](){const _0x2947b1=a0_0x2f7599;if(!this[_0x2947b1(0x129)])return;try{this[_0x2947b1(0x11b)](_0x2947b1(0x18b),(_0x3ed64d,_0x2d77e1)=>{const _0x2e4edf=_0x2947b1;_0x2d77e1&&_0x2d77e1[_0x2e4edf(0xf0)]&&pythonBridge[_0x2e4edf(0xef)](this,_0x2e4edf(0x185),{'sequences':JSON[_0x2e4edf(0x193)](_0x2d77e1[_0x2e4edf(0xf0)])});});}catch(_0x19b600){}}async[a0_0x2f7599(0x149)](){const _0x31709f=a0_0x2f7599;if(!this['isProVersion'])return;try{const _0x701164=await recorder[_0x31709f(0xf5)](this);if(_0x701164===null)return;const _0x2510b8={},_0x1b1a30=this[_0x31709f(0x113)][_0x31709f(0x18d)]||[];for(const _0x26fa93 of _0x1b1a30){if(_0x26fa93[_0x31709f(0x117)]===_0x31709f(0x136)&&_0x26fa93[_0x31709f(0x18c)]){const _0x4f9052=this[_0x31709f(0x143)][_0x26fa93['id']];if(_0x4f9052!==undefined)_0x2510b8[_0x26fa93[_0x31709f(0x18c)]]=_0x4f9052;}}Object['keys'](_0x2510b8)[_0x31709f(0x15a)]>0x0&&pythonBridge[_0x31709f(0xef)](this,'PREDICT_ENERGY',{'current_temps':_0x2510b8,'t_out':_0x701164});}catch(_0x231bbc){}}[a0_0x2f7599(0x115)](){const _0x476012=a0_0x2f7599;if(!this[_0x476012(0xfe)]||this[_0x476012(0xfe)][_0x476012(0x15a)]===0x0)return;const _0x8ed959=new Array(0x60)['fill'](0x0),_0x3b59f3=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x476012(0xfe)]['forEach'](_0x3a02ef=>{const _0xac738f=_0x476012,_0x62b222=new Date(_0x3a02ef[_0xac738f(0x177)]);if(_0x62b222[_0xac738f(0xff)]()>=_0x3b59f3){const _0x4377c6=_0x62b222['getHours'](),_0x6fcf08=_0x62b222[_0xac738f(0x121)](),_0x196ea1=_0x4377c6*0x4+Math[_0xac738f(0x150)](_0x6fcf08/0xf);if(_0x196ea1>=0x0&&_0x196ea1<0x60)_0x8ed959[_0x196ea1]++;}}),this['setStateAsync'](_0x476012(0x119),{'val':JSON[_0x476012(0x12b)](_0x8ed959),'ack':!![]});}[a0_0x2f7599(0x13e)](){const _0x27c4ab=a0_0x2f7599;if(!this[_0x27c4ab(0xea)]||this[_0x27c4ab(0xea)]['length']<0x2)return;const _0x5d966d=this['dailyDigests'][_0x27c4ab(0x118)](_0x5773d4=>{const _0x477ae6=_0x27c4ab,_0x132605=(_0x5773d4[_0x477ae6(0x163)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x132605]||0x32;});pythonBridge['send'](this,_0x27c4ab(0x167),{'values':_0x5d966d,'tag':_0x27c4ab(0x11d)});}}if(require['main']!==module)module['exports']=_0x4bd86d=>new CogniLiving(_0x4bd86d);else new CogniLiving();