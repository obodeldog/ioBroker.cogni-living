const a0_0x1a8bb7=a0_0x30d3;(function(_0x5abc7e,_0x45db62){const _0xa34318=a0_0x30d3,_0x4dad09=_0x5abc7e();while(!![]){try{const _0x4f9f3d=parseInt(_0xa34318(0x1ac))/0x1*(parseInt(_0xa34318(0x17e))/0x2)+-parseInt(_0xa34318(0x192))/0x3*(-parseInt(_0xa34318(0xf6))/0x4)+parseInt(_0xa34318(0x1e2))/0x5+parseInt(_0xa34318(0xca))/0x6*(-parseInt(_0xa34318(0xef))/0x7)+parseInt(_0xa34318(0xab))/0x8+-parseInt(_0xa34318(0x170))/0x9+parseInt(_0xa34318(0x115))/0xa;if(_0x4f9f3d===_0x45db62)break;else _0x4dad09['push'](_0x4dad09['shift']());}catch(_0x29a0c3){_0x4dad09['push'](_0x4dad09['shift']());}}}(a0_0x41f6,0x37aca));const a0_0x51f7ff=(function(){let _0x479185=!![];return function(_0x49e7ad,_0x104a2b){const _0x1483fa=_0x479185?function(){if(_0x104a2b){const _0x22b1b6=_0x104a2b['apply'](_0x49e7ad,arguments);return _0x104a2b=null,_0x22b1b6;}}:function(){};return _0x479185=![],_0x1483fa;};}()),a0_0x116a89=a0_0x51f7ff(this,function(){const _0x172f8f=a0_0x30d3;return a0_0x116a89['toString']()[_0x172f8f(0xd0)]('(((.+)+)+)+$')['toString']()[_0x172f8f(0x10b)](a0_0x116a89)[_0x172f8f(0xd0)](_0x172f8f(0x153));});function a0_0x30d3(_0x407a34,_0x7bcfa3){const _0xad1c1c=a0_0x41f6();return a0_0x30d3=function(_0x116a89,_0x51f7ff){_0x116a89=_0x116a89-0xa1;let _0x41f606=_0xad1c1c[_0x116a89];return _0x41f606;},a0_0x30d3(_0x407a34,_0x7bcfa3);}function a0_0x41f6(){const _0x4193f2=['modeResetJob','notifyPushoverInstance','Guest\x20Mode','length','currentSystemMode','runAutopilot','constructor','NextHours.Location_1.Day_1.current.symbol_desc','models/gemini-flash-latest','OPTIMIZE_ENERGY','analysis.energy.rlPenalties','push','magnet','handleInfrasound','accuweather.0','onMessage','762690LvnLfg','.system.mode','ready','testApiKey','onStateChange','subscribeForeignStates','floor','getForeignObjectAsync','Sec-Training\x20started...','getForeignStateAsync','response','sort','\x20hPa\x20(Threshold:\x20','triggerGaitAnalysis','apiKey','analysis.training.triggerTopology','json','analysisTimer','abortExitTimer','cancel','Fenster\x20geÃ¶ffnet:\x20','string','setState','Kein\x20Kalender-Adapter','Key\x20not\x20found\x20or\x20not\x20provided','triggerInfrasoundCorrelation','key','version','Standard','split','getHours','bind','message','thermostat','Gait\x20Speed\x20Calculation\x20Proof','analysis.automation.autoApply','infrasoundSensorId','isSolar','notifyPushoverEnabled','Current.WeatherText','[Forensics]\x20Save\x20failed:\x20','reed','TRACK_EVENT','klar','analysis.energy.warmupSources','calendarName','exports','security.alarm_triggered','analysis.energy.mpcActive','warn','geminiModel','ErklÃ¤rt\x20durch:\x20','Kein\x20API\x20Key\x20Ã¼bergeben','checkCalendarTriggers','ANOMALY\x20(Real\x20Threat?)','./lib/scheduler','party','system.adapter.','Fehler:\x20','clear','slice','[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20','(((.+)+)+)+$','LTM.trainingData.sequences','filter','cogni-living','genAI','command','guest','runPythonHealthCheck','sendTo','getLtmData','analysis.topology.structure','manual','fill','getStateAsync','SYSTEM_DP_MODE','./lib/ai_agent','LTM.triggerDailyDigest','Notification\x20Test\x20Failed:\x20','Aktiv\x20(','matrix','Active\x20Ventilation\x20Alerts','dailyDigests','PREDICT_ENERGY','analysis.energy.warmupTargets','[Calibration]\x20Window\x20','scores','setHours','Keine\x20Antwort\x20von\x20Gemini','onReady','2374830dZCnvo','find','getForeignObjectsAsync','licenseKey','analysis.training.triggerComfort','config','ðŸ§ \x20Graph-Brain:\x20Training\x20Behaviour\x20Matrix\x20based\x20on\x20','pop','triggerBriefing','unshift','analysis.health.todayVector','./lib/recorder','analysis.training.triggerEnergy','Party\x20Mode','14524urHBzf','startSystem','enum.functions.*','Reinforcement\x20Learning\x20Penalties','Heizung\x20kann\x20','setPresence','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','info','NORMAL','from','name','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','TRAIN_TOPOLOGY','devices','endsWith','loadSystemMode','resetRLPenalty','setStateAsync','enum','exitTimer','856719lkmoYg','./lib/scanner','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','includes','setupDriftAnalysisScheduler','infrasoundEnabled','.communicate.request','times','text','setupModeResetScheduler','driftAnalysisTimer','protectAiMemory','lastTrackerEventTime','getMinutes','memoryCache','rawEventLog','\x20sequences...','heiter','WiFi\x20Presence\x20detected.','inactivityThresholdHours','Simulation\x20durch\x20Admin\x20(Test)','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','unload','trackerEnabled','instance','\x20hPa\x20(Limit:\x20','1cYSVUE','@google/generative-ai','val','notifyTelegramEnabled','TRAIN_HEALTH','values','isArray','analysis.security.infrasoundLog','{\x22default\x22:\x2021}','ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20','SET_LEARNING_MODE','./lib/automation','isPresent','analysis.training.triggerHealth','notifyTelegramInstance','\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.','VACATION','getGenerativeModel','LTM.dailyDigests','Test','automation.triggerAction','common','updateHealthVector','scanDevices','system.presenceWho','sources','scanThermostats','ANALYZE_TREND','exitGraceTimer','cogni-living\x20adapter\x20starting\x20(v','role','pressureBuffer','Verbunden','infrasoundThreshold','namespace','log','timestamp','main','Gemini\x20AI\x20initialized.','PINN\x20AI\x20Forecast','./lib/setup','isGracePeriodActive','isProVersion','analysisInterval','setupLtmScheduler','appendToLog','minutes_safe','door','Activity-Level','[Forensics]\x20Infrasound\x20Event\x20correlated:\x20','TRAIN_COMFORT','forEach','eventHistory','error','964840EYdYFs','Memory\x20Hydration\x20Failed:\x20',')\x20-\x20Phase\x20D\x20(Forensic\x20Calibration)','send','online','analysis.health.activityTrend','ltmJob','ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).','testContext','updateTopologyMatrix','abs','startService','forecast.current.weather','checkLicense','bootTime','analysis.automation.targetId','testNotification','runBaselineDriftAnalysis','stringify','processSensorEvent','ack','callback','debug','analysisHistory','object','@iobroker/adapter-core','state','./lib/python_bridge','updateTopology','telegram','General\x20Activity\x20Trend\x20(%)','lastAlertState','analysis.health.gaitDebug','trackerHeartbeat','subscribeForeignStatesAsync','2715960SUJpqx','scanForDevices','analysis.energy.activeEnforcements','./lib/installer','TRAIN_ENERGY','TRAIN_SECURITY','sendNotification','sendMorningBriefing','\x20Tage)','now','Nuukanni\x20Security','analysis.automation.description','infrasoundLocked','add','some','_calName','SYSTEM_MODES','presenceDevices','geminiApiKey','dependencyInstallInProgress','location','createAllObjects','stateChange','checkSolarCondition','getOutsideTemperatureNumeric','PYTHON_EXE','Instanz\x20nicht\x20gefunden','window','checkWifiPresence','getEnums','daswetter.0','30VxaZZt','type','triggerEnergyPrediction','[Infrasound]\x20ðŸŸ¡\x20Debug-Mode:\x20Alarm\x20detected\x20but\x20suppressed\x20because\x20presence=true.','dismissAutomation','stopService','search','sunny','calendarInstance','analysis.energy.insulationScore','monitorEnforcements','analysis.energy.warmupTimes','analysis.training.triggerSecurity','ALARM','Graph-Brain\x20Train\x20Error:\x20','analysis.energy.ventilationAlerts','cleanupGhostInterventions','analysis.automation.targetValue','setObjectNotExistsAsync','onUnload','Gesendet','analysis.security.learningStatus','ANALYZE_GAIT','LTM.rawEventLog','value','Keine\x20Sensor-AktivitÃ¤t','systemConfig','\x20hPa.\x20Einbruch\x20wahrscheinlich.','getState','analysis.automation.patternDetected','runGeminiAnalysis','analysis.automation.triggerAction','entries','healthTrendInterval','subscribeStates','generateContent','getCalendarNames','573517AEuaPZ','.data.table','Forensic\x20Infrasound\x20Log','toLowerCase','createDailyDigest','analyzeWindowOpening','Gemini\x20Init\x20Error:\x20','4msVFnI','briefingJob','checkThermostats','initSystemConfig','infrasoundArmingId','SET_TOPOLOGY','parse','application/json','analysis.health.gaitSensors','weatherunderground.0','âš ï¸\x20Graph-Brain:\x20No\x20training\x20sequences\x20found\x20in\x20LTM.','keys','sensor.door','initHistory','sensorLastValues'];a0_0x41f6=function(){return _0x4193f2;};return a0_0x41f6();}a0_0x116a89();'use strict';const utils=require(a0_0x1a8bb7(0xa1)),{GoogleGenerativeAI}=require(a0_0x1a8bb7(0x1ad)),installer=require(a0_0x1a8bb7(0xae)),scanner=require(a0_0x1a8bb7(0x193)),schedulers=require(a0_0x1a8bb7(0x14c)),topology=require('./lib/topology'),setup=require(a0_0x1a8bb7(0x1d4)),recorder=require(a0_0x1a8bb7(0x17b)),pythonBridge=require(a0_0x1a8bb7(0xa3)),aiAgent=require(a0_0x1a8bb7(0x162)),deadMan=require('./lib/dead_man'),automation=require(a0_0x1a8bb7(0x1b7)),GEMINI_MODEL=a0_0x1a8bb7(0x10d),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils['Adapter']{constructor(_0x48cd58){const _0x576880=a0_0x1a8bb7;super({..._0x48cd58,'name':_0x576880(0x156)}),this[_0x576880(0x1e0)]=[],this['analysisHistory']=[],this[_0x576880(0x1a1)]=[],this[_0x576880(0x168)]=[],this[_0x576880(0x104)]={},this[_0x576880(0xe4)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x576880(0x1b8)]=!![],this['exitTimer']=null,this[_0x576880(0x1c8)]=null,this[_0x576880(0x1d5)]=![],this[_0x576880(0x157)]=null,this['geminiModel']=null,this[_0x576880(0x109)]=setup['SYSTEM_MODES'][_0x576880(0x186)],this['isProVersion']=![],this[_0x576880(0xa7)]=![],this[_0x576880(0x126)]=null,this[_0x576880(0x1e8)]=null,this[_0x576880(0x105)]=null,this[_0x576880(0x19c)]=null,this[_0x576880(0xf7)]=null,this[_0x576880(0xa9)]=null,this[_0x576880(0xeb)]=null,this[_0x576880(0xbe)]=![],this[_0x576880(0x19e)]=Date[_0x576880(0xb4)](),this['memoryCache']=null,this[_0x576880(0x1f0)]=Date[_0x576880(0xb4)](),this[_0x576880(0xb7)]=![],this[_0x576880(0x1cb)]=[],this['on'](_0x576880(0x117),this['onReady']['bind'](this)),this['on'](_0x576880(0xc1),this[_0x576880(0x119)][_0x576880(0x134)](this)),this['on'](_0x576880(0x1a8),this[_0x576880(0xdd)][_0x576880(0x134)](this)),this['on'](_0x576880(0x135),this[_0x576880(0x114)][_0x576880(0x134)](this));}async[a0_0x1a8bb7(0x16f)](){const _0xa86bfb=a0_0x1a8bb7;this[_0xa86bfb(0x1cf)][_0xa86bfb(0x185)](_0xa86bfb(0x1c9)+this[_0xa86bfb(0x130)]+_0xa86bfb(0x1e4));if(!installer['checkAndInstall'](this,()=>this[_0xa86bfb(0x17f)]()))return;}async['startSystem'](){const _0x408ce0=a0_0x1a8bb7;await setup['initZombies'](this);try{this[_0x408ce0(0x1d6)]=await setup[_0x408ce0(0x1ef)](this['config'][_0x408ce0(0x173)]);}catch(_0x5ee749){}if(!this[_0x408ce0(0x175)][_0x408ce0(0x1a5)]||this[_0x408ce0(0x175)]['inactivityThresholdHours']<0.1)this['config']['inactivityThresholdHours']=0xc;await setup[_0x408ce0(0x103)](this),await setup[_0x408ce0(0xf9)](this);try{const _0x2e9ebb=await this['getStateAsync'](_0x408ce0(0xd5)),_0x33305c=await this[_0x408ce0(0x160)](_0x408ce0(0x141));_0x2e9ebb&&_0x2e9ebb[_0x408ce0(0x1ae)]&&_0x33305c&&_0x33305c[_0x408ce0(0x1ae)]&&(Date[_0x408ce0(0xb4)]()-_0x2e9ebb['ts']<0x4*0xe10*0x3e8&&(this['memoryCache']={'times':JSON['parse'](_0x2e9ebb[_0x408ce0(0x1ae)]),'sources':JSON[_0x408ce0(0xfc)](_0x33305c[_0x408ce0(0x1ae)])},this[_0x408ce0(0x1cf)][_0x408ce0(0x185)]('ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20'+Object[_0x408ce0(0x101)](this['memoryCache'][_0x408ce0(0x199)])['length']+'\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).')));}catch(_0x1e95f5){this[_0x408ce0(0x1cf)][_0x408ce0(0x146)](_0x408ce0(0x1e3)+_0x1e95f5[_0x408ce0(0x135)]);}if(this[_0x408ce0(0x175)]['geminiApiKey'])try{this[_0x408ce0(0x157)]=new GoogleGenerativeAI(this[_0x408ce0(0x175)][_0x408ce0(0xbd)]),this[_0x408ce0(0x147)]=this[_0x408ce0(0x157)][_0x408ce0(0x1bd)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x408ce0(0xfd)}}),this[_0x408ce0(0x1cf)][_0x408ce0(0x185)](_0x408ce0(0x1d2));}catch(_0x1abac8){this['log'][_0x408ce0(0x1e1)](_0x408ce0(0xf5)+_0x1abac8[_0x408ce0(0x135)]);}await setup[_0x408ce0(0xc0)](this),await this[_0x408ce0(0x18d)](),await this[_0x408ce0(0xdc)]('analysis.energy.pinnForecast',{'type':_0x408ce0(0xa2),'common':{'name':_0x408ce0(0x1d3),'type':_0x408ce0(0x12a),'role':_0x408ce0(0x125),'read':!![],'write':![]},'native':{}}),await this[_0x408ce0(0xdc)](_0x408ce0(0xd9),{'type':'state','common':{'name':_0x408ce0(0x167),'type':_0x408ce0(0x12a),'role':_0x408ce0(0x125),'read':!![],'write':![]},'native':{}}),await this[_0x408ce0(0xdc)](_0x408ce0(0xd5),{'type':_0x408ce0(0xa2),'common':{'name':_0x408ce0(0x189),'type':'string','role':_0x408ce0(0x125),'read':!![],'write':![]},'native':{}}),await this[_0x408ce0(0xdc)](_0x408ce0(0x16a),{'type':'state','common':{'name':'Warm-Up\x20Target\x20Temps\x20(JSON)','type':_0x408ce0(0x12a),'role':_0x408ce0(0x125),'read':!![],'write':!![],'def':_0x408ce0(0x1b4)},'native':{}}),await this[_0x408ce0(0xdc)](_0x408ce0(0x10f),{'type':'state','common':{'name':_0x408ce0(0x181),'type':'string','role':_0x408ce0(0x125),'read':!![],'write':![],'def':'{}'},'native':{}}),await this['setObjectNotExistsAsync'](_0x408ce0(0x1e7),{'type':_0x408ce0(0xa2),'common':{'name':_0x408ce0(0xa6),'type':'number','role':_0x408ce0(0xe2),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x408ce0(0xdc)](_0x408ce0(0xfe),{'type':'state','common':{'name':'Sensors\x20used\x20for\x20Gait\x20Analysis','type':_0x408ce0(0x12a),'role':'text','read':!![],'write':![]},'native':{}}),await this[_0x408ce0(0xdc)](_0x408ce0(0xad),{'type':'state','common':{'name':'Active\x20Calendar\x20Enforcements\x20(Locks)','type':'string','role':_0x408ce0(0x125),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x408ce0(0xdc)]('analysis.security.infrasoundLog',{'type':_0x408ce0(0xa2),'common':{'name':_0x408ce0(0xf1),'type':_0x408ce0(0x12a),'role':_0x408ce0(0x125),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x408ce0(0xdc)](_0x408ce0(0xa8),{'type':_0x408ce0(0xa2),'common':{'name':_0x408ce0(0x137),'type':_0x408ce0(0x12a),'role':'text','read':!![],'write':![]},'native':{}});try{const _0x3c9b66=await this[_0x408ce0(0x160)](_0x408ce0(0xe1));if(_0x3c9b66&&_0x3c9b66[_0x408ce0(0x1ae)])this[_0x408ce0(0x1a1)]=JSON[_0x408ce0(0xfc)](_0x3c9b66[_0x408ce0(0x1ae)]);}catch(_0x3c7201){this[_0x408ce0(0x1a1)]=[];}try{const _0x4870a0=await this[_0x408ce0(0x160)](_0x408ce0(0x1be));if(_0x4870a0&&_0x4870a0[_0x408ce0(0x1ae)])this[_0x408ce0(0x168)]=JSON[_0x408ce0(0xfc)](_0x4870a0['val']);}catch(_0x3c0ae8){this['dailyDigests']=[];}const _0x5adfa2=this[_0x408ce0(0x168)][_0x408ce0(0x108)]>=(this[_0x408ce0(0x175)]['minDaysForBaseline']||0x7)?_0x408ce0(0x165)+this[_0x408ce0(0x168)][_0x408ce0(0x108)]+_0x408ce0(0xb3):'Lernphase\x20('+this[_0x408ce0(0x168)][_0x408ce0(0x108)]+'/'+(this['config']['minDaysForBaseline']||0x7)+')';await this[_0x408ce0(0x18f)]('LTM.baselineStatus',{'val':_0x5adfa2,'ack':!![]}),this[_0x408ce0(0xec)]('analysis.trigger'),this[_0x408ce0(0xec)](_0x408ce0(0x163)),this[_0x408ce0(0xec)]('system.mode'),this[_0x408ce0(0xec)]('analysis.triggerBriefing'),this['subscribeStates'](_0x408ce0(0xe9)),this[_0x408ce0(0xec)](_0x408ce0(0x138)),this[_0x408ce0(0xec)](_0x408ce0(0xd6)),this[_0x408ce0(0xec)](_0x408ce0(0x1b9)),this[_0x408ce0(0xec)]('analysis.training.triggerEnergy'),this[_0x408ce0(0xec)](_0x408ce0(0x174)),this[_0x408ce0(0xec)](_0x408ce0(0x124)),this['subscribeStates'](_0x408ce0(0x145)),this[_0x408ce0(0xec)](_0x408ce0(0x141));this[_0x408ce0(0x175)][_0x408ce0(0x197)]&&this[_0x408ce0(0x175)][_0x408ce0(0x139)]&&(this[_0x408ce0(0x1cf)]['info'](_0x408ce0(0x152)+this[_0x408ce0(0x175)][_0x408ce0(0x139)]),this[_0x408ce0(0x11a)](this[_0x408ce0(0x175)][_0x408ce0(0x139)]));const _0x28d77b=this[_0x408ce0(0x175)][_0x408ce0(0x18b)];if(_0x28d77b)for(const _0x25b50e of _0x28d77b){await this[_0x408ce0(0xaa)](_0x25b50e['id']);}const _0x2d5ec3=this[_0x408ce0(0x175)][_0x408ce0(0xbc)];if(_0x2d5ec3)for(const _0x92888a of _0x2d5ec3){await this[_0x408ce0(0xaa)](_0x92888a);}if(this[_0x408ce0(0x175)][_0x408ce0(0x1af)]&&this['config'][_0x408ce0(0x1ba)])await this[_0x408ce0(0xaa)](this[_0x408ce0(0x175)][_0x408ce0(0x1ba)]+_0x408ce0(0x198));setTimeout(()=>this['checkWifiPresence'](),0x1388);if(this[_0x408ce0(0x126)])clearInterval(this[_0x408ce0(0x126)]);const _0x18641e=this['config'][_0x408ce0(0x1d7)]||0xf;_0x18641e>0x0&&(this[_0x408ce0(0x126)]=setInterval(()=>{const _0x4b4214=_0x408ce0;this[_0x4b4214(0x10a)](),automation[_0x4b4214(0x14a)](this),automation[_0x4b4214(0xd4)](this);},_0x18641e*0x3c*0x3e8));setTimeout(()=>{const _0x2f5c14=_0x408ce0;automation[_0x2f5c14(0x14a)](this),automation[_0x2f5c14(0xd4)](this);},0x2710);this[_0x408ce0(0x175)][_0x408ce0(0x1a9)]!==![]&&(this[_0x408ce0(0xa9)]=setInterval(()=>{const _0x5e3920=_0x408ce0;if(this[_0x5e3920(0x1d6)]){const _0x262125=Date['now'](),_0x1f414d=this[_0x5e3920(0x19e)]||_0x262125,_0x19e20e=(_0x262125-_0x1f414d)/0x3e8;_0x19e20e>0x2&&(this['lastTrackerEventTime']=_0x262125,pythonBridge[_0x5e3920(0x1e5)](this,_0x5e3920(0x13f),{'room':null,'dt':_0x19e20e}));}},0xbb8));if(this[_0x408ce0(0xeb)])clearInterval(this[_0x408ce0(0xeb)]);this[_0x408ce0(0xeb)]=setInterval(()=>{const _0x504e08=_0x408ce0;this[_0x504e08(0x1d6)]&&(this['log'][_0x504e08(0x185)]('â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...'),this[_0x504e08(0x15a)]());},0x4*0x3c*0x3c*0x3e8),schedulers[_0x408ce0(0x1d8)](this,()=>aiAgent[_0x408ce0(0xf3)](this,pythonBridge)),schedulers[_0x408ce0(0x19b)](this),schedulers[_0x408ce0(0x196)](this,()=>aiAgent[_0x408ce0(0x1f3)](this)),schedulers['setupBriefingScheduler'](this,()=>aiAgent[_0x408ce0(0xb2)](this)),pythonBridge[_0x408ce0(0x1ed)](this,installer[_0x408ce0(0xc4)]),setTimeout(async()=>{const _0x5dc874=_0x408ce0;await topology['updateTopology'](this);try{const _0x3687aa=await this['getStateAsync']('analysis.topology.structure');if(_0x3687aa&&_0x3687aa['val'])pythonBridge[_0x5dc874(0x1e5)](this,_0x5dc874(0xfb),JSON['parse'](_0x3687aa[_0x5dc874(0x1ae)]));}catch(_0x2d34b9){}this['runPythonHealthCheck'](),this[_0x5dc874(0x122)](),this[_0x5dc874(0xcc)](),this[_0x5dc874(0x1c2)]();},0x1388);}[a0_0x1a8bb7(0xdd)](_0x2ac8cf){const _0x109c28=a0_0x1a8bb7;if(this[_0x109c28(0x126)])clearInterval(this[_0x109c28(0x126)]);if(this[_0x109c28(0x19c)])clearInterval(this['driftAnalysisTimer']);if(this[_0x109c28(0xa9)])clearInterval(this[_0x109c28(0xa9)]);if(this[_0x109c28(0xeb)])clearInterval(this['healthTrendInterval']);if(this[_0x109c28(0x1e8)])this[_0x109c28(0x1e8)][_0x109c28(0x128)]();if(this[_0x109c28(0x105)])this[_0x109c28(0x105)][_0x109c28(0x128)]();if(this['briefingJob'])this[_0x109c28(0xf7)][_0x109c28(0x128)]();recorder[_0x109c28(0x127)](this),pythonBridge[_0x109c28(0xcf)](this),_0x2ac8cf();}async['onStateChange'](_0x3a5b2c,_0x4cdc99){const _0xce707=a0_0x1a8bb7;if(!_0x4cdc99||this['dependencyInstallInProgress'])return;if(_0x3a5b2c['includes'](_0xce707(0xa5))&&_0x3a5b2c[_0xce707(0x18c)]('communicate.request')&&_0x4cdc99['val'])return;if(this['config'][_0xce707(0x197)]&&_0x3a5b2c===this[_0xce707(0x175)]['infrasoundSensorId']){this['handleInfrasound'](_0x4cdc99[_0xce707(0x1ae)]);return;}if(_0x3a5b2c===this[_0xce707(0x1ce)]+_0xce707(0x116)){if(_0x4cdc99[_0xce707(0x1ae)]&&Object[_0xce707(0x1b1)](setup[_0xce707(0xbb)])[_0xce707(0x195)](_0x4cdc99['val'])){this[_0xce707(0x109)]=_0x4cdc99[_0xce707(0x1ae)];if(_0x4cdc99[_0xce707(0x1ae)]===setup[_0xce707(0xbb)][_0xce707(0x1bc)])await recorder['setPresence'](this,![]);else await recorder['setPresence'](this,!![]);if(this['isProVersion']){let _0x30a06b=![],_0x42b5ad=0x0,_0x85ec24=_0xce707(0x15e);if(this[_0xce707(0x109)]===_0xce707(0x14d))_0x30a06b=!![],_0x42b5ad=0x168,_0x85ec24=_0xce707(0x17d);else this[_0xce707(0x109)]===_0xce707(0x159)&&(_0x30a06b=!![],_0x42b5ad=0x5a0,_0x85ec24=_0xce707(0x107));pythonBridge[_0xce707(0x1e5)](this,_0xce707(0x1b6),{'active':_0x30a06b,'duration':_0x42b5ad,'label':_0x85ec24}),await this[_0xce707(0x18f)](_0xce707(0xdf),{'val':JSON[_0xce707(0x1f4)]({'active':_0x30a06b,'label':_0x85ec24,'timestamp':Date[_0xce707(0xb4)]()}),'ack':!![]});}}if(!_0x4cdc99[_0xce707(0x1f6)])this[_0xce707(0x12b)](_0x3a5b2c,{'val':this[_0xce707(0x109)],'ack':!![]});return;}_0x3a5b2c[_0xce707(0x18c)](_0xce707(0x141))&&_0x4cdc99['ack']&&this['protectAiMemory'](_0x4cdc99[_0xce707(0x1ae)]);if(!_0x4cdc99[_0xce707(0x1f6)]){if(_0x3a5b2c[_0xce707(0x195)]('analysis.trigger')&&_0x4cdc99['val']){this['setState'](_0x3a5b2c,{'val':![],'ack':!![]}),aiAgent[_0xce707(0xe8)](this);return;}if(_0x3a5b2c[_0xce707(0x195)]('triggerDailyDigest')&&_0x4cdc99[_0xce707(0x1ae)]){this[_0xce707(0x12b)](_0x3a5b2c,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent[_0xce707(0xf3)](this,pythonBridge);return;}if(_0x3a5b2c[_0xce707(0x195)](_0xce707(0x178))&&_0x4cdc99[_0xce707(0x1ae)]){this[_0xce707(0x12b)](_0x3a5b2c,{'val':![],'ack':!![]}),aiAgent[_0xce707(0xb2)](this);return;}if(_0x3a5b2c['includes'](_0xce707(0x1c0))&&_0x4cdc99['val']){this[_0xce707(0x12b)](_0x3a5b2c,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this);return;}if(_0x3a5b2c[_0xce707(0x195)](_0xce707(0xd6))&&_0x4cdc99[_0xce707(0x1ae)]){this[_0xce707(0x12b)](_0x3a5b2c,{'val':![],'ack':!![]});if(this[_0xce707(0x1d6)])try{const _0x19442e=await this[_0xce707(0x160)](_0xce707(0x154));if(_0x19442e&&_0x19442e[_0xce707(0x1ae)]){const _0x403d8b=JSON[_0xce707(0xfc)](_0x19442e[_0xce707(0x1ae)]);this['setStateAsync']('analysis.training.status',{'val':_0xce707(0x11d),'ack':!![]}),pythonBridge[_0xce707(0x1e5)](this,_0xce707(0xb0),{'sequences':_0x403d8b});}}catch(_0x414ddb){}return;}if(_0x3a5b2c[_0xce707(0x195)](_0xce707(0x1b9))&&_0x4cdc99['val']){this[_0xce707(0x12b)](_0x3a5b2c,{'val':![],'ack':!![]});if(this[_0xce707(0x1d6)])try{const _0x183502=await this['getStateAsync'](_0xce707(0x1be));if(_0x183502&&_0x183502[_0xce707(0x1ae)])pythonBridge[_0xce707(0x1e5)](this,_0xce707(0x1b0),{'digests':JSON[_0xce707(0xfc)](_0x183502[_0xce707(0x1ae)])});}catch(_0x19ab1f){}return;}if(_0x3a5b2c['includes'](_0xce707(0x17c))&&_0x4cdc99[_0xce707(0x1ae)]){this[_0xce707(0x12b)](_0x3a5b2c,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x27de72=await this[_0xce707(0x160)]('LTM.trainingData.thermodynamics');if(_0x27de72&&_0x27de72[_0xce707(0x1ae)])pythonBridge['send'](this,_0xce707(0xaf),{'points':JSON[_0xce707(0xfc)](_0x27de72[_0xce707(0x1ae)])});}catch(_0x1e4fed){}return;}if(_0x3a5b2c[_0xce707(0x195)](_0xce707(0x174))&&_0x4cdc99[_0xce707(0x1ae)]){this[_0xce707(0x12b)](_0x3a5b2c,{'val':![],'ack':!![]});if(this[_0xce707(0x1d6)])try{const _0x1c7e28=await this[_0xce707(0x160)](_0xce707(0xe1));if(_0x1c7e28&&_0x1c7e28['val'])pythonBridge[_0xce707(0x1e5)](this,_0xce707(0x1de),{'events':JSON[_0xce707(0xfc)](_0x1c7e28['val'])});}catch(_0x596da4){}return;}if(_0x3a5b2c[_0xce707(0x195)](_0xce707(0x124))&&_0x4cdc99[_0xce707(0x1ae)]){this[_0xce707(0x12b)](_0x3a5b2c,{'val':![],'ack':!![]}),topology[_0xce707(0xa4)](this);if(this['isProVersion'])try{const _0x22c025=await this['getStateAsync'](_0xce707(0x154));if(_0x22c025&&_0x22c025[_0xce707(0x1ae)]){const _0x51a366=JSON[_0xce707(0xfc)](_0x22c025[_0xce707(0x1ae)]);this['log'][_0xce707(0x185)](_0xce707(0x176)+_0x51a366[_0xce707(0x108)]+_0xce707(0x1a2)),pythonBridge[_0xce707(0x1e5)](this,_0xce707(0x18a),{'sequences':_0x51a366});}else this[_0xce707(0x1cf)][_0xce707(0x146)](_0xce707(0x100));}catch(_0x3f80d6){this[_0xce707(0x1cf)][_0xce707(0x1e1)](_0xce707(0xd8)+_0x3f80d6[_0xce707(0x135)]);}return;}}if(this[_0xce707(0x175)]['presenceDevices']&&this[_0xce707(0x175)]['presenceDevices'][_0xce707(0x195)](_0x3a5b2c)){await this[_0xce707(0xc7)]();return;}const _0x5bec5b=(this['config'][_0xce707(0x18b)]||[])[_0xce707(0x171)](_0x460f46=>_0x460f46['id']===_0x3a5b2c);if(_0x5bec5b){const _0x35172d=await recorder[_0xce707(0x1f5)](this,_0x3a5b2c,_0x4cdc99,_0x5bec5b);_0x35172d&&_0x35172d[_0xce707(0xcb)]==='motion'&&_0x35172d['location']&&this[_0xce707(0x1d6)]&&deadMan['updateLocation'](this,_0x35172d[_0xce707(0xbf)]),_0x4cdc99[_0xce707(0x1ae)]&&(_0x4cdc99[_0xce707(0x1ae)]===!![]||_0x4cdc99[_0xce707(0x1ae)]===0x1||String(_0x4cdc99[_0xce707(0x1ae)])[_0xce707(0xf2)]()==='open')&&(_0x5bec5b[_0xce707(0xcb)]&&(_0x5bec5b[_0xce707(0xcb)][_0xce707(0x195)](_0xce707(0xc6))||_0x5bec5b[_0xce707(0xcb)]['includes'](_0xce707(0x1db))||_0x5bec5b[_0xce707(0xcb)][_0xce707(0x195)](_0xce707(0x111)))&&this['analyzeWindowOpening'](_0x5bec5b)),(_0x5bec5b['type']==='temperature'||_0x5bec5b[_0xce707(0xcb)]===_0xce707(0x136))&&automation[_0xce707(0xda)](this);}}async[a0_0x1a8bb7(0x19d)](_0x4813b4){const _0x2019e3=a0_0x1a8bb7;if(!this[_0x2019e3(0x1a0)]||Date[_0x2019e3(0xb4)]()-this['bootTime']>0x493e0)return;if(!this[_0x2019e3(0x1a0)][_0x2019e3(0x1c5)]||!this[_0x2019e3(0x1a0)][_0x2019e3(0x199)])return;try{const _0x46349c=JSON[_0x2019e3(0xfc)](_0x4813b4),_0x104ca0=this['memoryCache'][_0x2019e3(0x1c5)];let _0x16081d=![];for(const _0x478c3f in _0x104ca0){if(_0x104ca0[_0x478c3f][_0x2019e3(0x195)]('AI')&&_0x46349c[_0x478c3f]&&!_0x46349c[_0x478c3f][_0x2019e3(0x195)]('AI')){_0x16081d=!![];break;}}_0x16081d&&(this[_0x2019e3(0x1cf)][_0x2019e3(0x185)](_0x2019e3(0x1e9)),await this[_0x2019e3(0x18f)](_0x2019e3(0xd5),{'val':JSON[_0x2019e3(0x1f4)](this[_0x2019e3(0x1a0)]['times']),'ack':!![]}),await this[_0x2019e3(0x18f)](_0x2019e3(0x141),{'val':JSON[_0x2019e3(0x1f4)](this[_0x2019e3(0x1a0)][_0x2019e3(0x1c5)]),'ack':!![]}));}catch(_0x655b7e){}}async[a0_0x1a8bb7(0x114)](_0xd215b3){const _0x271646=a0_0x1a8bb7;if(typeof _0xd215b3===_0x271646(0x1fa)&&_0xd215b3[_0x271646(0x135)]){if(_0xd215b3[_0x271646(0x158)]===_0x271646(0xf8))try{const _0x17b5b6=await automation[_0x271646(0x1c6)](this);this[_0x271646(0x15b)](_0xd215b3[_0x271646(0x187)],_0xd215b3['command'],{'success':!![],'results':_0x17b5b6},_0xd215b3[_0x271646(0x1f7)]);}catch(_0x57ade0){this[_0x271646(0x15b)](_0xd215b3[_0x271646(0x187)],_0xd215b3[_0x271646(0x158)],{'success':![],'error':_0x57ade0[_0x271646(0x135)]},_0xd215b3[_0x271646(0x1f7)]);}else{if(_0xd215b3[_0x271646(0x158)]==='simulateEnergyMPC')try{const {current_temps:_0x39686f,t_out:_0x5e1c1b,targets:_0x2cc9d6,t_forecast:_0x2628fe}=_0xd215b3[_0x271646(0x135)],_0x4993f3=[];let _0xb62da9={};try{const _0x243c7c=await this[_0x271646(0x160)](_0x271646(0xd3));if(_0x243c7c&&_0x243c7c[_0x271646(0x1ae)]){const _0x81513e=JSON[_0x271646(0xfc)](_0x243c7c[_0x271646(0x1ae)]);_0xb62da9=_0x81513e[_0x271646(0x16c)]||_0x81513e;}}catch(_0x4c1ea3){}const _0xe9df8f=_0x2628fe!==undefined&&_0x2628fe!==null?(_0x5e1c1b+_0x2628fe)/0x2:_0x5e1c1b;for(const [_0x538d5b,_0x478324]of Object[_0x271646(0xea)](_0x39686f)){const _0x2d8de6=_0x2cc9d6[_0x538d5b]||0x15;if(_0x478324<=_0x2d8de6)continue;let _0x35d4aa=_0xb62da9[_0x538d5b]||-0.5;if(_0x35d4aa>=0x0)_0x35d4aa=-0.5;const _0x4492e9=Math[_0x271646(0x1ec)](_0x35d4aa),_0x5f305c=_0x478324-_0x2d8de6;let _0x1f8f0a=Math[_0x271646(0x11b)](_0x5f305c/_0x4492e9*0x3c);const _0x1b976d=_0x478324-_0x5e1c1b,_0x418a6f=_0x478324-_0xe9df8f;if(_0x418a6f!==0x0&&_0x1b976d!==0x0){const _0x5a9e0b=_0x1b976d/_0x418a6f;_0x1f8f0a=Math[_0x271646(0x11b)](_0x1f8f0a*_0x5a9e0b);}if(_0x1f8f0a>0xf){if(_0x1f8f0a>0xf0)_0x1f8f0a=0xf0;_0x4993f3[_0x271646(0x110)]({'room':_0x538d5b,'minutes_safe':_0x1f8f0a,'target':_0x2d8de6,'current':_0x478324,'savings_msg':_0x271646(0x182)+_0x1f8f0a+'\x20min\x20ausbleiben.'});}}_0x4993f3[_0x271646(0x120)]((_0x5ed1cd,_0x526b6c)=>_0x526b6c['minutes_safe']-_0x5ed1cd[_0x271646(0x1da)]),this[_0x271646(0x15b)](_0xd215b3[_0x271646(0x187)],_0xd215b3[_0x271646(0x158)],{'success':!![],'proposals':_0x4993f3},_0xd215b3[_0x271646(0x1f7)]);}catch(_0x4a7fb0){this['sendTo'](_0xd215b3[_0x271646(0x187)],_0xd215b3[_0x271646(0x158)],{'success':![],'error':_0x4a7fb0[_0x271646(0x135)]},_0xd215b3['callback']);}else{if(_0xd215b3[_0x271646(0x158)]===_0x271646(0x18e))try{const _0x168952=_0xd215b3['message'][_0x271646(0x12f)],_0x507360='analysis.energy.rlPenalties',_0x346c1a=await this[_0x271646(0x160)](_0x507360);let _0x3d6068={};if(_0x346c1a&&_0x346c1a[_0x271646(0x1ae)])try{_0x3d6068=JSON['parse'](_0x346c1a[_0x271646(0x1ae)]);}catch(_0x592db0){}_0x168952&&_0x3d6068[_0x168952]?(delete _0x3d6068[_0x168952],await this['setStateAsync'](_0x507360,{'val':JSON['stringify'](_0x3d6068),'ack':!![]}),this[_0x271646(0x1cf)][_0x271646(0x185)](_0x271646(0x194)+_0x168952+_0x271646(0x1bb)),this[_0x271646(0x15b)](_0xd215b3[_0x271646(0x187)],_0xd215b3[_0x271646(0x158)],{'success':!![]},_0xd215b3['callback'])):this[_0x271646(0x15b)](_0xd215b3[_0x271646(0x187)],_0xd215b3[_0x271646(0x158)],{'success':![],'error':_0x271646(0x12d)},_0xd215b3['callback']);}catch(_0x32a927){this[_0x271646(0x15b)](_0xd215b3[_0x271646(0x187)],_0xd215b3[_0x271646(0x158)],{'success':![],'error':_0x32a927['message']},_0xd215b3['callback']);}else{if(_0xd215b3[_0x271646(0x158)]===_0x271646(0xce))await this[_0x271646(0x18f)](_0x271646(0xe7),{'val':![],'ack':!![]}),await this[_0x271646(0x18f)]('analysis.automation.description',{'val':'','ack':!![]}),await this[_0x271646(0x18f)]('analysis.automation.targetId',{'val':'','ack':!![]}),this[_0x271646(0x15b)](_0xd215b3['from'],_0xd215b3['command'],{'success':!![]},_0xd215b3[_0x271646(0x1f7)]);else{if(_0xd215b3[_0x271646(0x158)]==='simulateButler'){const {targetId:_0x181320,targetValue:_0xe47230}=_0xd215b3['message'];await this[_0x271646(0x18f)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0x271646(0x18f)](_0x271646(0xb6),{'val':_0x271646(0x1a6),'ack':!![]}),await this[_0x271646(0x18f)](_0x271646(0x1f1),{'val':_0x181320,'ack':!![]}),await this[_0x271646(0x18f)]('analysis.automation.targetValue',{'val':String(_0xe47230),'ack':!![]}),this[_0x271646(0x15b)](_0xd215b3[_0x271646(0x187)],_0xd215b3['command'],{'success':!![]},_0xd215b3[_0x271646(0x1f7)]);}else{if(_0xd215b3['command']===_0x271646(0x118))try{const _0x3c4de4=_0xd215b3['message'][_0x271646(0x123)];if(!_0x3c4de4)throw new Error(_0x271646(0x149));const _0xbf4866=new GoogleGenerativeAI(_0x3c4de4),_0x29a12d=_0xbf4866[_0x271646(0x1bd)]({'model':GEMINI_MODEL}),_0x24e089=await _0x29a12d[_0x271646(0xed)](_0x271646(0x1bf)),_0x28277f=await _0x24e089[_0x271646(0x11f)];if(_0x28277f[_0x271646(0x19a)]())this[_0x271646(0x15b)](_0xd215b3[_0x271646(0x187)],_0xd215b3[_0x271646(0x158)],{'success':!![],'message':'Verbindung\x20erfolgreich!'},_0xd215b3[_0x271646(0x1f7)]);else throw new Error(_0x271646(0x16e));}catch(_0x7ab8b5){this[_0x271646(0x15b)](_0xd215b3['from'],_0xd215b3[_0x271646(0x158)],{'success':![],'message':_0x7ab8b5[_0x271646(0x135)]},_0xd215b3['callback']);}else{if(_0xd215b3[_0x271646(0x158)]===_0x271646(0x1c3))try{const _0x4017d0=await scanner[_0x271646(0xac)](this,_0xd215b3[_0x271646(0x135)]||{});this[_0x271646(0x15b)](_0xd215b3[_0x271646(0x187)],_0xd215b3[_0x271646(0x158)],{'success':!![],'devices':_0x4017d0},_0xd215b3[_0x271646(0x1f7)]);}catch(_0x4fbf86){this[_0x271646(0x15b)](_0xd215b3[_0x271646(0x187)],_0xd215b3[_0x271646(0x158)],{'success':![],'error':_0x4fbf86[_0x271646(0x135)]},_0xd215b3[_0x271646(0x1f7)]);}else{if(_0xd215b3['command']===_0x271646(0x1eb))try{const {matrix:_0x1b2196}=_0xd215b3[_0x271646(0x135)],_0x36652a=await this[_0x271646(0x160)](_0x271646(0x15d));if(_0x36652a&&_0x36652a[_0x271646(0x1ae)]){const _0x23efa2=JSON['parse'](_0x36652a[_0x271646(0x1ae)]);_0x23efa2[_0x271646(0x166)]=_0x1b2196,_0x23efa2['updated']=Date[_0x271646(0xb4)](),await this['setStateAsync'](_0x271646(0x15d),{'val':JSON[_0x271646(0x1f4)](_0x23efa2),'ack':!![]}),pythonBridge['send'](this,_0x271646(0xfb),_0x23efa2);}this[_0x271646(0x15b)](_0xd215b3['from'],_0xd215b3[_0x271646(0x158)],{'success':!![]},_0xd215b3[_0x271646(0x1f7)]);}catch(_0x282838){this[_0x271646(0x1cf)]['error'](_0x282838);}else{if(_0xd215b3[_0x271646(0x158)]===_0x271646(0x15c))this[_0x271646(0x15b)](_0xd215b3[_0x271646(0x187)],_0xd215b3[_0x271646(0x158)],{'success':!![],'dailyDigests':this[_0x271646(0x168)]||[],'analysisHistory':this[_0x271646(0x1f9)]||[]},_0xd215b3['callback']);else{if(_0xd215b3['command']==='getOverviewData'){const _0x53a055=this[_0x271646(0x168)][_0x271646(0x108)],_0x2061a6=new Array(0x18)[_0x271646(0x15f)](0x0),_0x450385=new Date()[_0x271646(0x16d)](0x0,0x0,0x0,0x0);this[_0x271646(0x1e0)]&&this[_0x271646(0x1e0)][_0x271646(0x1df)](_0x9b3dc3=>{const _0x298d89=_0x271646;if(_0x9b3dc3[_0x298d89(0x1d0)]>=_0x450385){const _0x192ce4=new Date(_0x9b3dc3[_0x298d89(0x1d0)])[_0x298d89(0x133)]();if(_0x192ce4>=0x0&&_0x192ce4<0x18)_0x2061a6[_0x192ce4]++;}});let _0x5b59a8=![],_0x253c73='',_0x46a342='',_0x11c078='';try{const _0x18aa1f=await this[_0x271646(0x160)]('analysis.automation.patternDetected');if(_0x18aa1f&&_0x18aa1f['val']){_0x5b59a8=!![];const _0x250c79=await this[_0x271646(0x160)](_0x271646(0xb6));_0x253c73=_0x250c79?_0x250c79[_0x271646(0x1ae)]:'';const _0x275256=await this['getStateAsync'](_0x271646(0x1f1));_0x46a342=_0x275256?_0x275256[_0x271646(0x1ae)]:'';const _0x1cb319=await this['getStateAsync'](_0x271646(0xdb));_0x11c078=_0x1cb319?_0x1cb319[_0x271646(0x1ae)]:'';}}catch(_0x2bf821){}const _0x4fd651=await this[_0x271646(0xc2)](),_0x378a3c=(this['config'][_0x271646(0x18b)]||[])[_0x271646(0xb9)](_0x3fa200=>_0x3fa200[_0x271646(0x13a)]),_0x527138=_0x4fd651&&_0x378a3c;let _0x35b946='';try{const _0x57f5a6=await this['getStateAsync']('system.presenceWho');if(_0x57f5a6&&_0x57f5a6[_0x271646(0x1ae)])_0x35b946=_0x57f5a6[_0x271646(0x1ae)];}catch(_0xe9a884){}this[_0x271646(0x15b)](_0xd215b3[_0x271646(0x187)],_0xd215b3['command'],{'success':!![],'eventHistory':this[_0x271646(0x1e0)][_0x271646(0x151)](0x0,0xf),'stats':{'digestCount':_0x53a055,'isPresent':this[_0x271646(0x1b8)],'hourlyActivity':_0x2061a6,'solarActive':_0x527138,'presenceWho':_0x35b946},'automation':{'detected':_0x5b59a8,'description':_0x253c73,'targetId':_0x46a342,'targetValue':_0x11c078}},_0xd215b3['callback']);}else{if(_0xd215b3[_0x271646(0x158)]===_0x271646(0xc8)){const _0x23d6c6=await this['getForeignObjectsAsync'](_0x271646(0x180),'enum'),_0x4707fb=[];if(_0x23d6c6)for(const _0x32a8c0 in _0x23d6c6){const _0x328953=_0x23d6c6[_0x32a8c0],_0x37691c=(_0x328953['common']&&typeof _0x328953[_0x271646(0x1c1)][_0x271646(0x188)]===_0x271646(0x1fa)?_0x328953[_0x271646(0x1c1)]['name']['de']:_0x328953['common'][_0x271646(0x188)])||_0x328953[_0x271646(0x1c1)][_0x271646(0x188)];_0x4707fb[_0x271646(0x110)]({'id':_0x32a8c0,'name':_0x37691c});}const _0x3ff3b5=await this[_0x271646(0x172)]('enum.rooms.*',_0x271646(0x190)),_0x30e1ca=[];if(_0x3ff3b5)for(const _0x15cedd in _0x3ff3b5){const _0x5e7f5d=_0x3ff3b5[_0x15cedd],_0x4d4a0a=(_0x5e7f5d[_0x271646(0x1c1)]&&typeof _0x5e7f5d['common'][_0x271646(0x188)]==='object'?_0x5e7f5d[_0x271646(0x1c1)][_0x271646(0x188)]['de']:_0x5e7f5d[_0x271646(0x1c1)][_0x271646(0x188)])||_0x15cedd['split']('.')[_0x271646(0x177)]();_0x30e1ca[_0x271646(0x110)](_0x4d4a0a);}this[_0x271646(0x15b)](_0xd215b3[_0x271646(0x187)],_0xd215b3[_0x271646(0x158)],{'success':!![],'enums':_0x4707fb,'rooms':_0x30e1ca},_0xd215b3[_0x271646(0x1f7)]);}else{if(_0xd215b3[_0x271646(0x158)]===_0x271646(0x1ea))try{let _0x3c366d='Kein\x20Wetter-Adapter',_0x208e83=_0x271646(0x12c);if(this[_0x271646(0x175)]['useWeather']){const _0x13fd97=await recorder[_0x271646(0xc3)](this);_0x3c366d=_0x13fd97!==null?_0x13fd97+'Â°C':'Daten\x20nicht\x20verfÃ¼gbar';}if(this[_0x271646(0x175)][_0x271646(0xd2)]){const _0x44a88b=await this[_0x271646(0x11c)](_0x271646(0x14e)+this['config'][_0x271646(0xd2)]);_0x208e83=_0x44a88b?_0x271646(0x1cc):_0x271646(0xc5);}this[_0x271646(0x15b)](_0xd215b3[_0x271646(0x187)],_0xd215b3[_0x271646(0x158)],{'success':!![],'weather':_0x3c366d,'calendar':_0x208e83},_0xd215b3[_0x271646(0x1f7)]);}catch(_0x1f4a02){this['sendTo'](_0xd215b3['from'],_0xd215b3[_0x271646(0x158)],{'success':![],'error':_0x1f4a02[_0x271646(0x135)]},_0xd215b3[_0x271646(0x1f7)]);}else{if(_0xd215b3[_0x271646(0x158)]===_0x271646(0xee))try{const _0x543695=_0xd215b3['message'][_0x271646(0x1aa)],_0x312897=await this[_0x271646(0x11e)](_0x543695+_0x271646(0xf0));let _0x2ad806=[];if(_0x312897&&_0x312897[_0x271646(0x1ae)]){const _0x22ed63=JSON[_0x271646(0xfc)](_0x312897[_0x271646(0x1ae)]),_0x379b41=new Set();Array[_0x271646(0x1b2)](_0x22ed63)&&_0x22ed63[_0x271646(0x1df)](_0x4e7a87=>{const _0x55a82c=_0x271646;if(_0x4e7a87['_calName'])_0x379b41[_0x55a82c(0xb8)](_0x4e7a87[_0x55a82c(0xba)]);else{if(_0x4e7a87[_0x55a82c(0x142)])_0x379b41[_0x55a82c(0xb8)](_0x4e7a87[_0x55a82c(0x142)]);}}),_0x2ad806=Array[_0x271646(0x187)](_0x379b41)[_0x271646(0x120)]();}if(_0x2ad806[_0x271646(0x108)]===0x0)_0x2ad806=[_0x271646(0x131)];this[_0x271646(0x15b)](_0xd215b3[_0x271646(0x187)],_0xd215b3[_0x271646(0x158)],{'success':!![],'names':_0x2ad806},_0xd215b3['callback']);}catch(_0x166ae1){this[_0x271646(0x15b)](_0xd215b3['from'],_0xd215b3[_0x271646(0x158)],{'success':![],'error':_0x166ae1['message']},_0xd215b3[_0x271646(0x1f7)]);}else{if(_0xd215b3[_0x271646(0x158)]===_0x271646(0x1f2))try{await setup[_0x271646(0xb1)](this,_0x271646(0x184),![],![]),this[_0x271646(0x15b)](_0xd215b3[_0x271646(0x187)],_0xd215b3['command'],{'success':!![],'message':_0x271646(0xde)},_0xd215b3['callback']);}catch(_0x96b4b1){this[_0x271646(0x1cf)][_0x271646(0x1e1)](_0x271646(0x164)+_0x96b4b1[_0x271646(0x135)]),this[_0x271646(0x15b)](_0xd215b3[_0x271646(0x187)],_0xd215b3['command'],{'success':![],'message':_0x271646(0x14f)+_0x96b4b1[_0x271646(0x135)]},_0xd215b3['callback']);}}}}}}}}}}}}}}}}async[a0_0x1a8bb7(0x18d)](){const _0x336cf9=a0_0x1a8bb7;try{const _0x58163c=await this[_0x336cf9(0x160)](setup[_0x336cf9(0x161)]);_0x58163c&&_0x58163c[_0x336cf9(0x1ae)]&&Object[_0x336cf9(0x1b1)](setup[_0x336cf9(0xbb)])[_0x336cf9(0x195)](_0x58163c[_0x336cf9(0x1ae)])?this[_0x336cf9(0x109)]=_0x58163c['val']:(this['currentSystemMode']=setup[_0x336cf9(0xbb)][_0x336cf9(0x186)],await this[_0x336cf9(0x18f)](setup[_0x336cf9(0x161)],{'val':setup['SYSTEM_MODES'][_0x336cf9(0x186)],'ack':!![]}));}catch(_0x5053d4){this[_0x336cf9(0x109)]=setup[_0x336cf9(0xbb)][_0x336cf9(0x186)];}}async['checkWifiPresence'](){const _0x584587=a0_0x1a8bb7;try{const _0x1802d3=this[_0x584587(0x175)][_0x584587(0xbc)]||[];let _0x1d5a4b=![];const _0x521eb=[];for(const _0x336205 of _0x1802d3){try{const _0x2ace34=await this['getForeignStateAsync'](_0x336205);_0x2ace34&&(_0x2ace34['val']===!![]||_0x2ace34['val']===_0x584587(0x1e6)||_0x2ace34['val']===0x1)&&(_0x1d5a4b=!![],_0x521eb[_0x584587(0x110)](_0x336205));}catch(_0x58c3ab){}}return await this[_0x584587(0x18f)](_0x584587(0x1c4),{'val':_0x521eb['join'](',\x20'),'ack':!![]}),_0x1d5a4b&&(this[_0x584587(0x191)]&&(this[_0x584587(0x1cf)]['info'](_0x584587(0x1a4)),recorder[_0x584587(0x127)](this)),!this[_0x584587(0x1b8)]&&this[_0x584587(0x109)]===setup[_0x584587(0xbb)][_0x584587(0x186)]&&await recorder[_0x584587(0x183)](this,!![])),_0x1d5a4b;}catch(_0x5bd432){return![];}}async[a0_0x1a8bb7(0x10a)](){const _0x2a3922=a0_0x1a8bb7;this[_0x2a3922(0x1cf)][_0x2a3922(0x1f8)](_0x2a3922(0x1a7)),await aiAgent[_0x2a3922(0xe8)](this),this[_0x2a3922(0x1c2)](),this['triggerGaitAnalysis'](),this[_0x2a3922(0xcc)]();}async[a0_0x1a8bb7(0xc2)](){const _0x4533e0=a0_0x1a8bb7,_0x2cf7b5=[_0x4533e0(0xff),_0x4533e0(0x113),_0x4533e0(0xc9)],_0x36fca5=[_0x4533e0(0x1ee),_0x4533e0(0x13c),_0x4533e0(0x10c)];for(const _0x166619 of _0x2cf7b5){for(const _0x403bf3 of _0x36fca5){try{const _0x3f0285=_0x166619+'.'+_0x403bf3,_0x3ef405=await this[_0x4533e0(0x11e)](_0x3f0285);if(_0x3ef405&&_0x3ef405[_0x4533e0(0x1ae)]){const _0x40ddcf=String(_0x3ef405[_0x4533e0(0x1ae)])[_0x4533e0(0xf2)]();if(_0x40ddcf[_0x4533e0(0x195)]('sonn')||_0x40ddcf[_0x4533e0(0x195)](_0x4533e0(0xd1))||_0x40ddcf[_0x4533e0(0x195)](_0x4533e0(0x140))||_0x40ddcf[_0x4533e0(0x195)](_0x4533e0(0x150))||_0x40ddcf['includes'](_0x4533e0(0x1a3)))return!![];}}catch(_0x244c8e){}}}return![];}[a0_0x1a8bb7(0x122)](){const _0x3e8189=a0_0x1a8bb7;if(!this[_0x3e8189(0x1d6)])return;try{this[_0x3e8189(0xe6)](_0x3e8189(0x154),(_0x26a14f,_0x51739b)=>{const _0x106160=_0x3e8189;_0x51739b&&_0x51739b[_0x106160(0x1ae)]&&pythonBridge[_0x106160(0x1e5)](this,_0x106160(0xe0),{'sequences':JSON['parse'](_0x51739b['val'])});});}catch(_0x40ccb8){}}async['triggerEnergyPrediction'](){const _0x276b8a=a0_0x1a8bb7;if(!this[_0x276b8a(0x1d6)])return;try{const _0x563cfe=await recorder[_0x276b8a(0xc3)](this);if(_0x563cfe===null)return;const _0x386f02={},_0xe330f={},_0x1ed902=this['config'][_0x276b8a(0x18b)]||[];for(const _0x8028b0 of _0x1ed902){if(_0x8028b0[_0x276b8a(0xcb)]==='temperature'&&_0x8028b0[_0x276b8a(0xbf)]){const _0x1527e5=this[_0x276b8a(0x104)][_0x8028b0['id']];if(_0x1527e5!==undefined)_0x386f02[_0x8028b0[_0x276b8a(0xbf)]]=_0x1527e5;if(_0x8028b0[_0x276b8a(0x13a)])_0xe330f[_0x8028b0[_0x276b8a(0xbf)]]=!![];}}const _0x22692e=await this[_0x276b8a(0xc2)]();let _0x56c4a8={};try{const _0x230acd=await this[_0x276b8a(0x160)](_0x276b8a(0x16a));if(_0x230acd&&_0x230acd[_0x276b8a(0x1ae)])_0x56c4a8=JSON[_0x276b8a(0xfc)](_0x230acd[_0x276b8a(0x1ae)]);}catch(_0x24d71c){}Object[_0x276b8a(0x101)](_0x386f02)[_0x276b8a(0x108)]>0x0&&(pythonBridge['send'](this,_0x276b8a(0x169),{'current_temps':_0x386f02,'t_out':_0x563cfe,'is_sunny':_0x22692e,'solar_flags':_0xe330f,'warmup_targets':_0x56c4a8}),pythonBridge[_0x276b8a(0x1e5)](this,_0x276b8a(0x10e),{'current_temps':_0x386f02,'t_out':_0x563cfe,'targets':{}}));}catch(_0x106649){}}[a0_0x1a8bb7(0x1c2)](){const _0x22a38c=a0_0x1a8bb7;if(!this[_0x22a38c(0x1a1)]||this['rawEventLog'][_0x22a38c(0x108)]===0x0)return;const _0x39dd77=new Array(0x60)['fill'](0x0),_0x27433d=new Date()[_0x22a38c(0x16d)](0x0,0x0,0x0,0x0);this['rawEventLog'][_0x22a38c(0x1df)](_0x3f34c2=>{const _0x1df068=_0x22a38c,_0xe5f67a=new Date(_0x3f34c2[_0x1df068(0x1d0)]);if(_0xe5f67a['getTime']()>=_0x27433d){const _0x5c5dd8=_0xe5f67a[_0x1df068(0x133)](),_0x3f1cab=_0xe5f67a[_0x1df068(0x19f)](),_0x362082=_0x5c5dd8*0x4+Math['floor'](_0x3f1cab/0xf);if(_0x362082>=0x0&&_0x362082<0x60)_0x39dd77[_0x362082]++;}}),this[_0x22a38c(0x18f)](_0x22a38c(0x17a),{'val':JSON['stringify'](_0x39dd77),'ack':!![]});}[a0_0x1a8bb7(0x15a)](){const _0x5d6685=a0_0x1a8bb7;if(!this[_0x5d6685(0x168)]||this[_0x5d6685(0x168)][_0x5d6685(0x108)]<0x2)return;const _0x449745=this[_0x5d6685(0x168)]['map'](_0x10a753=>{const _0xed989=(_0x10a753['activityLevel']||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0xed989]||0x32;});pythonBridge[_0x5d6685(0x1e5)](this,_0x5d6685(0x1c7),{'values':_0x449745,'tag':_0x5d6685(0x1dc)});}async[a0_0x1a8bb7(0x112)](_0x316ffe){const _0x37859d=a0_0x1a8bb7;if(_0x316ffe==null||typeof _0x316ffe!=='number')return;const _0x2fa591=Date[_0x37859d(0xb4)]();this[_0x37859d(0x1cb)][_0x37859d(0x110)]({'ts':_0x2fa591,'val':_0x316ffe}),this[_0x37859d(0x1cb)]=this[_0x37859d(0x1cb)][_0x37859d(0x155)](_0x4698a4=>_0x2fa591-_0x4698a4['ts']<0x1388);if(this[_0x37859d(0xb7)])return;if(this[_0x37859d(0x175)][_0x37859d(0xfa)]){const _0x10d6c8=await this['getForeignStateAsync'](this[_0x37859d(0x175)][_0x37859d(0xfa)]);if(_0x10d6c8&&!_0x10d6c8[_0x37859d(0x1ae)])return;}const _0x8f4264=this[_0x37859d(0x175)]['infrasoundThreshold']||0.04;if(Math[_0x37859d(0x1ec)](_0x316ffe)>=_0x8f4264){this[_0x37859d(0x1cf)][_0x37859d(0x146)]('[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20'+_0x316ffe+_0x37859d(0x1ab)+_0x8f4264+')'),await this[_0x37859d(0x18f)](_0x37859d(0x144),{'val':!![],'ack':!![]});const _0x39a03c=this['isPresent'];_0x39a03c?(this['log'][_0x37859d(0x185)](_0x37859d(0xcd)),this[_0x37859d(0x12e)](_0x316ffe,'INTERNAL')):(this[_0x37859d(0x12e)](_0x316ffe,_0x37859d(0xd7)),this['sendNotification'](_0x37859d(0x1b5)+_0x316ffe+_0x37859d(0xe5))),this[_0x37859d(0xb7)]=!![],setTimeout(()=>{const _0x204383=_0x37859d;this[_0x204383(0xb7)]=![];},0x2710);}}async['triggerInfrasoundCorrelation'](_0xd48d39,_0x1a78d4='ALARM'){const _0x29c216=a0_0x1a8bb7,_0x4e809d=Date[_0x29c216(0xb4)](),_0x2ef91f=this[_0x29c216(0x175)][_0x29c216(0x18b)]||[];setTimeout(async()=>{const _0x1b0c73=_0x29c216;let _0x33b634=null,_0x2b2e06=_0x1b0c73(0xe3);const _0x19cb29=[],_0x409285=_0x2ef91f[_0x1b0c73(0x155)](_0x5a0bd7=>_0x5a0bd7[_0x1b0c73(0xcb)]&&(_0x5a0bd7[_0x1b0c73(0xcb)][_0x1b0c73(0x195)](_0x1b0c73(0xc6))||_0x5a0bd7[_0x1b0c73(0xcb)][_0x1b0c73(0x195)]('door')||_0x5a0bd7[_0x1b0c73(0xcb)][_0x1b0c73(0x195)](_0x1b0c73(0x111))||_0x5a0bd7[_0x1b0c73(0xcb)][_0x1b0c73(0x195)](_0x1b0c73(0x13e)))||_0x5a0bd7[_0x1b0c73(0x1ca)]&&(_0x5a0bd7[_0x1b0c73(0x1ca)]['includes']('sensor.window')||_0x5a0bd7[_0x1b0c73(0x1ca)][_0x1b0c73(0x195)](_0x1b0c73(0x102))));for(const _0x57e327 of _0x409285){try{const _0x4534ec=await this[_0x1b0c73(0x11e)](_0x57e327['id']);if(_0x4534ec){if(_0x4534ec['ts']>=_0x4e809d-0x7d0){_0x33b634=_0x57e327[_0x1b0c73(0x188)]||_0x57e327['id'],_0x2b2e06=_0x1b0c73(0x148)+_0x33b634;break;}}}catch(_0x25a721){}}const _0x1abc58={'timestamp':_0x4e809d,'pressure':_0xd48d39,'isMatch':!!_0x33b634,'explanation':_0x2b2e06,'type':_0x1a78d4};await this[_0x1b0c73(0x1d9)](_0x1abc58),this[_0x1b0c73(0x1cf)]['info'](_0x1b0c73(0x1dd)+(!!_0x33b634?'MATCH\x20(False\x20Positive)':_0x1b0c73(0x14b)));},0x1388);}async[a0_0x1a8bb7(0xf4)](_0x20090a){const _0x1805d1=a0_0x1a8bb7,_0x218862=Date['now'](),_0x43ffd5=_0x20090a['name']||_0x20090a['id'][_0x1805d1(0x132)]('.')[_0x1805d1(0x177)]();let _0x11dbbb=0x0;setTimeout(async()=>{const _0x4a9d7d=_0x1805d1;this[_0x4a9d7d(0x1cb)]['forEach'](_0x1b7a19=>{const _0x103bc3=_0x4a9d7d;_0x1b7a19['ts']>=_0x218862-0xfa0&&_0x1b7a19['ts']<=_0x218862+0x3e8&&(Math['abs'](_0x1b7a19[_0x103bc3(0x1ae)])>Math[_0x103bc3(0x1ec)](_0x11dbbb)&&(_0x11dbbb=_0x1b7a19['val']));});const _0x3c1d4e=this['config'][_0x4a9d7d(0x1cd)]||0.04,_0x49c6e3=Math[_0x4a9d7d(0x1ec)](_0x11dbbb)>=_0x3c1d4e,_0x2deff5={'timestamp':_0x218862,'pressure':_0x11dbbb,'isMatch':_0x49c6e3,'explanation':_0x4a9d7d(0x129)+_0x43ffd5,'type':'CALIB'};await this['appendToLog'](_0x2deff5),this[_0x4a9d7d(0x1cf)][_0x4a9d7d(0x1f8)](_0x4a9d7d(0x16b)+_0x43ffd5+'\x20opened.\x20Peak\x20Pressure:\x20'+_0x11dbbb['toFixed'](0x4)+_0x4a9d7d(0x121)+_0x3c1d4e+')');},0x1f4);}async[a0_0x1a8bb7(0x1d9)](_0x11d85d){const _0x1576be=a0_0x1a8bb7;try{const _0x4479e6=await this[_0x1576be(0x160)](_0x1576be(0x1b3));let _0x255ceb=[];if(_0x4479e6&&_0x4479e6[_0x1576be(0x1ae)])_0x255ceb=JSON['parse'](_0x4479e6[_0x1576be(0x1ae)]);_0x255ceb[_0x1576be(0x179)](_0x11d85d);if(_0x255ceb[_0x1576be(0x108)]>0x14)_0x255ceb=_0x255ceb[_0x1576be(0x151)](0x0,0x14);await this['setStateAsync'](_0x1576be(0x1b3),{'val':JSON[_0x1576be(0x1f4)](_0x255ceb),'ack':!![]});}catch(_0x203608){this[_0x1576be(0x1cf)][_0x1576be(0x1e1)](_0x1576be(0x13d)+_0x203608[_0x1576be(0x135)]);}}[a0_0x1a8bb7(0xb1)](_0x33a0da){const _0x2aa48e=a0_0x1a8bb7;this[_0x2aa48e(0x175)][_0x2aa48e(0x13b)]&&this[_0x2aa48e(0x175)][_0x2aa48e(0x106)]&&this[_0x2aa48e(0x15b)](this[_0x2aa48e(0x175)]['notifyPushoverInstance'],_0x2aa48e(0x1e5),{'message':_0x33a0da,'title':_0x2aa48e(0xb5),'priority':0x1}),this[_0x2aa48e(0x175)][_0x2aa48e(0x1af)]&&this[_0x2aa48e(0x175)][_0x2aa48e(0x1ba)]&&this['sendTo'](this[_0x2aa48e(0x175)]['notifyTelegramInstance'],_0x2aa48e(0x1e5),{'text':_0x33a0da});}}if(require[a0_0x1a8bb7(0x1d1)]!==module)module[a0_0x1a8bb7(0x143)]=_0xa21980=>new CogniLiving(_0xa21980);else new CogniLiving();