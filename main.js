const a0_0x33c095=a0_0x3f16;(function(_0x2c5bd5,_0x3fd43d){const _0x2992e9=a0_0x3f16,_0x5a0797=_0x2c5bd5();while(!![]){try{const _0x738c7e=-parseInt(_0x2992e9(0x101))/0x1*(-parseInt(_0x2992e9(0x1f0))/0x2)+parseInt(_0x2992e9(0x1c3))/0x3+parseInt(_0x2992e9(0x239))/0x4+parseInt(_0x2992e9(0x198))/0x5*(parseInt(_0x2992e9(0x250))/0x6)+parseInt(_0x2992e9(0x168))/0x7+-parseInt(_0x2992e9(0x21c))/0x8+-parseInt(_0x2992e9(0x13b))/0x9;if(_0x738c7e===_0x3fd43d)break;else _0x5a0797['push'](_0x5a0797['shift']());}catch(_0x2022b0){_0x5a0797['push'](_0x5a0797['shift']());}}}(a0_0x3192,0x4c94f));const a0_0x21f71c=(function(){let _0x52500d=!![];return function(_0x6fd31b,_0x3e091f){const _0x4b213f=_0x52500d?function(){const _0x2abbcc=a0_0x3f16;if(_0x3e091f){const _0x35766f=_0x3e091f[_0x2abbcc(0x264)](_0x6fd31b,arguments);return _0x3e091f=null,_0x35766f;}}:function(){};return _0x52500d=![],_0x4b213f;};}()),a0_0x88956e=a0_0x21f71c(this,function(){const _0x3a3e7e=a0_0x3f16;return a0_0x88956e[_0x3a3e7e(0xfa)]()[_0x3a3e7e(0x182)](_0x3a3e7e(0x1a4))[_0x3a3e7e(0xfa)]()[_0x3a3e7e(0x129)](a0_0x88956e)[_0x3a3e7e(0x182)]('(((.+)+)+)+$');});a0_0x88956e();'use strict';const utils=require(a0_0x33c095(0x105)),{GoogleGenerativeAI}=require(a0_0x33c095(0x130)),schedule=require(a0_0x33c095(0x22e)),{spawn,exec}=require(a0_0x33c095(0x275)),path=require(a0_0x33c095(0x265)),fs=require('fs'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x33c095(0x1ac),LTM_SCHEDULE=a0_0x33c095(0x266),MODE_RESET_SCHEDULE=a0_0x33c095(0x15f),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x33c095(0x26e),LTM_DP_DAILY_DIGESTS=a0_0x33c095(0xf4),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST=a0_0x33c095(0x13a),LTM_DP_BASELINE_STATUS='LTM.baselineStatus',LTM_DP_DRIFT_CHANNEL=a0_0x33c095(0xf9),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS=a0_0x33c095(0x272),LTM_DP_DRIFT_LAST_CHECK=a0_0x33c095(0x1cd),SYSTEM_DP_MODE=a0_0x33c095(0x12d),SYSTEM_MODES={'NORMAL':a0_0x33c095(0x152),'VACATION':a0_0x33c095(0x1a0),'PARTY':a0_0x33c095(0x223),'GUEST':a0_0x33c095(0x206)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x33c095(0x120)],SYSTEM_MODES[a0_0x33c095(0x1bc)]],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0x33c095(0x1c5),'family':'Fokus\x20auf\x20Familienroutinen.','single_comfort':'Fokus\x20auf\x20Komfort.','security':a0_0x33c095(0x243)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0},BAD_NAMES=[a0_0x33c095(0x17a),a0_0x33c095(0x259),a0_0x33c095(0x14c),'level',a0_0x33c095(0x1d6),a0_0x33c095(0x142),'on','off',a0_0x33c095(0x161),a0_0x33c095(0x1b4),a0_0x33c095(0x118),a0_0x33c095(0xfb),'cover',a0_0x33c095(0xed),a0_0x33c095(0x187),a0_0x33c095(0x107),'occupancy',a0_0x33c095(0x245),a0_0x33c095(0xfc),a0_0x33c095(0x1fa),a0_0x33c095(0x16c),a0_0x33c095(0x25b),a0_0x33c095(0x261),a0_0x33c095(0x174),a0_0x33c095(0x218)],ADAPTER_BLACKLIST=['system.',a0_0x33c095(0x25d),a0_0x33c095(0x22f),a0_0x33c095(0xf7),a0_0x33c095(0x294),'material.',a0_0x33c095(0xfe),a0_0x33c095(0x1ce),a0_0x33c095(0x27b),a0_0x33c095(0x1b2),'simple-api.'],IS_WIN=process[a0_0x33c095(0x290)]===a0_0x33c095(0x16d),PERSISTENT_DIR=path[a0_0x33c095(0x18b)](__dirname,a0_0x33c095(0x149)),VENV_PATH=PERSISTENT_DIR,PYTHON_EXE=IS_WIN?path[a0_0x33c095(0x18b)](VENV_PATH,a0_0x33c095(0x1bf),'python.exe'):path[a0_0x33c095(0x18b)](VENV_PATH,a0_0x33c095(0x226),a0_0x33c095(0x1ae)),PIP_EXE=IS_WIN?path['join'](VENV_PATH,a0_0x33c095(0x1bf),a0_0x33c095(0x195)):path['join'](VENV_PATH,a0_0x33c095(0x226),'pip');let activeSequence=[],sequenceTimer=null,panicMode=![];async function startSystem(_0x29f513){const _0x18dd7a=a0_0x33c095;_0x29f513['log'][_0x18dd7a(0x114)](_0x18dd7a(0x181)),await initZombies(_0x29f513);try{_0x29f513[_0x18dd7a(0x288)]=await checkLicense(_0x29f513[_0x18dd7a(0x22d)][_0x18dd7a(0x24f)]);}catch(_0x4f5ffd){}if(!_0x29f513[_0x18dd7a(0x22d)][_0x18dd7a(0x246)]||_0x29f513['config'][_0x18dd7a(0x246)]<0.1)_0x29f513['config'][_0x18dd7a(0x246)]=0xc;await initHistory(_0x29f513),await initSystemConfig(_0x29f513);if(_0x29f513[_0x18dd7a(0x22d)][_0x18dd7a(0x137)])try{_0x29f513['genAI']=new GoogleGenerativeAI(_0x29f513['config']['geminiApiKey']),_0x29f513[_0x18dd7a(0x16e)]=_0x29f513[_0x18dd7a(0x179)][_0x18dd7a(0x216)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x18dd7a(0x144)}}),_0x29f513['log']['info'](_0x18dd7a(0x1d7));}catch(_0xa1658e){_0x29f513[_0x18dd7a(0x230)][_0x18dd7a(0x176)](_0x18dd7a(0x158)+_0xa1658e[_0x18dd7a(0x189)]);}await createAllObjects(_0x29f513),await loadSystemMode(_0x29f513),await loadRawEventLog(_0x29f513),await loadDailyDigests(_0x29f513),_0x29f513['subscribeStates']('analysis.trigger'),_0x29f513[_0x18dd7a(0x10b)](LTM_DP_TRIGGER_DIGEST),_0x29f513['subscribeStates']('system.mode'),_0x29f513['subscribeStates'](_0x18dd7a(0x1ed)),_0x29f513['subscribeStates']('analysis.automation.triggerAction'),_0x29f513['subscribeStates'](_0x18dd7a(0x1a6)),_0x29f513[_0x18dd7a(0x10b)](_0x18dd7a(0x22c)),_0x29f513[_0x18dd7a(0x10b)](_0x18dd7a(0x113)),_0x29f513[_0x18dd7a(0x10b)](_0x18dd7a(0x1ca)),await initSensorSubscriptions(_0x29f513),await initPresenceSubscriptions(_0x29f513),await setupTelegramListener(_0x29f513),setTimeout(()=>checkWifiPresence(_0x29f513),0x1388);if(_0x29f513['analysisTimer'])clearInterval(_0x29f513['analysisTimer']);const _0x32188c=_0x29f513[_0x18dd7a(0x22d)]['analysisInterval']||0xf;_0x32188c>0x0&&(_0x29f513[_0x18dd7a(0x11d)]=setInterval(()=>{runAutopilot(_0x29f513);},_0x32188c*0x3c*0x3e8)),setupLtmScheduler(_0x29f513),setupModeResetScheduler(_0x29f513),setupDriftAnalysisScheduler(_0x29f513),setupBriefingScheduler(_0x29f513),startPythonService(_0x29f513),setTimeout(()=>{const _0x430325=_0x18dd7a;if(_0x29f513[_0x430325(0xf5)])runPythonHealthCheck(_0x29f513);},0x1388);}function checkAndInstall(_0xa3aa69){const _0x489311=a0_0x33c095;if(!fs[_0x489311(0x1de)](VENV_PATH)||!fs[_0x489311(0x1de)](PIP_EXE))return _0xa3aa69[_0x489311(0x230)][_0x489311(0x222)](_0x489311(0x184)+VENV_PATH+_0x489311(0x131)),installPythonDependencies(_0xa3aa69),![];return!![];}function installPythonDependencies(_0x3b1a56){const _0x252cd5=a0_0x33c095;if(_0x3b1a56[_0x252cd5(0x263)])return;_0x3b1a56[_0x252cd5(0x263)]=!![];const _0x36e9bd=path[_0x252cd5(0x18b)](__dirname,_0x252cd5(0x117),_0x252cd5(0x213));stopPythonService(_0x3b1a56);if(fs[_0x252cd5(0x1de)](VENV_PATH)&&!fs[_0x252cd5(0x1de)](PIP_EXE))try{fs[_0x252cd5(0x138)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x319f6c){}_0x3b1a56[_0x252cd5(0x230)]['info'](_0x252cd5(0x1c7)+VENV_PATH),exec(_0x252cd5(0x1dc)+VENV_PATH+'\x22',_0x123540=>{const _0x379a27=_0x252cd5;if(_0x123540){_0x3b1a56[_0x379a27(0x230)][_0x379a27(0x176)](_0x379a27(0x262)),_0x3b1a56[_0x379a27(0x263)]=![];return;}installRequirementsInVenv(_0x3b1a56,_0x36e9bd);});}function installRequirementsInVenv(_0x579b3d,_0x41b69b){const _0x1e54c9=a0_0x33c095;_0x579b3d[_0x1e54c9(0x230)][_0x1e54c9(0x114)](_0x1e54c9(0x274));const _0x56ca1d='\x22'+PIP_EXE+_0x1e54c9(0x12b)+_0x41b69b+'\x22';exec(_0x56ca1d,{'timeout':0x124f80},(_0x33fa34,_0x4cef87,_0x27ca18)=>{const _0x1f591f=_0x1e54c9;_0x579b3d['dependencyInstallInProgress']=![],_0x33fa34?_0x579b3d[_0x1f591f(0x230)][_0x1f591f(0x176)](_0x1f591f(0x1d5)+(_0x27ca18||_0x33fa34[_0x1f591f(0x189)])):(_0x579b3d['log']['info']('‚úÖ\x20INSTALL\x20SUCCESS.'),startSystem(_0x579b3d));});}async function initZombies(_0x5eccbe){const _0x5afe79=a0_0x33c095;try{const _0x1390c9=[_0x5afe79(0x19e),_0x5afe79(0x27e)];for(const _0x3fe890 of _0x1390c9){try{const _0x48a14b=await _0x5eccbe['getObjectAsync'](_0x3fe890);if(_0x48a14b)await _0x5eccbe[_0x5afe79(0x1d0)](_0x3fe890);}catch(_0x13bb21){}}}catch(_0x11efc0){}}async function checkLicense(_0x27df6f){return!![];}async function initHistory(_0x3c0624){const _0x380f1b=a0_0x33c095;try{const _0x43bfa4=await _0x3c0624[_0x380f1b(0x248)](_0x380f1b(0x20f));_0x43bfa4&&_0x43bfa4['val']&&(_0x3c0624['eventHistory']=JSON[_0x380f1b(0x1cb)](_0x43bfa4[_0x380f1b(0x1e3)][_0x380f1b(0xfa)]()));}catch(_0x445431){_0x3c0624[_0x380f1b(0x1e1)]=[];}try{const _0x545a9e=await _0x3c0624[_0x380f1b(0x248)](_0x380f1b(0x18d));if(_0x545a9e&&_0x545a9e['val'])_0x3c0624[_0x380f1b(0xf2)]=JSON[_0x380f1b(0x1cb)](_0x545a9e['val'][_0x380f1b(0xfa)]());}catch(_0x1c4efc){_0x3c0624['analysisHistory']=[];}if(_0x3c0624['eventHistory']&&_0x3c0624[_0x380f1b(0x1e1)][_0x380f1b(0x281)]>0x0){_0x3c0624[_0x380f1b(0x230)][_0x380f1b(0x114)](_0x380f1b(0x10c));for(let _0xd1417a=_0x3c0624[_0x380f1b(0x1e1)][_0x380f1b(0x281)]-0x1;_0xd1417a>=0x0;_0xd1417a--){const _0x568a4c=_0x3c0624['eventHistory'][_0xd1417a];if(_0x568a4c&&_0x568a4c['id']!==undefined&&_0x568a4c['value']!==undefined)_0x3c0624[_0x380f1b(0x171)][_0x568a4c['id']]=_0x568a4c[_0x380f1b(0x1d6)];}}}async function initSystemConfig(_0x5e06a1){const _0x34b4e3=a0_0x33c095;try{const _0x567761=await _0x5e06a1[_0x34b4e3(0x221)](_0x34b4e3(0x194));if(_0x567761&&_0x567761[_0x34b4e3(0x209)])_0x5e06a1[_0x34b4e3(0x211)]={'latitude':_0x567761[_0x34b4e3(0x209)][_0x34b4e3(0x1b0)]||0x0,'longitude':_0x567761[_0x34b4e3(0x209)][_0x34b4e3(0x1fe)]||0x0,'city':_0x567761[_0x34b4e3(0x209)][_0x34b4e3(0x23a)]||''};}catch(_0x544722){}}async function createAllObjects(_0x55f062){const _0x54afd7=a0_0x33c095;await _0x55f062[_0x54afd7(0x10a)](_0x54afd7(0x280),{'type':_0x54afd7(0x271),'common':{'name':_0x54afd7(0x180)},'native':{}}),await _0x55f062[_0x54afd7(0x10a)](SYSTEM_DP_MODE,{'type':'state','common':{'name':_0x54afd7(0x12e),'type':_0x54afd7(0x234),'role':_0x54afd7(0x14c),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x54afd7(0x1ff)]},'native':{}}),await _0x55f062['setObjectNotExistsAsync'](_0x54afd7(0x128),{'type':'state','common':{'name':_0x54afd7(0x19a),'type':_0x54afd7(0x234),'role':_0x54afd7(0x186),'read':!![],'write':![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x157),{'type':_0x54afd7(0x14c),'common':{'name':_0x54afd7(0x26c),'type':_0x54afd7(0x234),'role':_0x54afd7(0x10e),'read':!![],'write':![]},'native':{}}),await _0x55f062['setObjectNotExistsAsync'](_0x54afd7(0x20f),{'type':_0x54afd7(0x14c),'common':{'name':'Event\x20History','type':_0x54afd7(0x234),'role':'json','read':!![],'write':![]},'native':{}}),await _0x55f062[_0x54afd7(0x10a)]('analysis.training',{'type':_0x54afd7(0x271),'common':{'name':'AI\x20Training'},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x22c),{'type':'state','common':{'name':'Train\x20Security','type':_0x54afd7(0x1f5),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x113),{'type':_0x54afd7(0x14c),'common':{'name':_0x54afd7(0x268),'type':_0x54afd7(0x1f5),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x1ca),{'type':_0x54afd7(0x14c),'common':{'name':_0x54afd7(0x122),'type':_0x54afd7(0x1f5),'role':_0x54afd7(0x154),'read':!![],'write':!![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x103),{'type':_0x54afd7(0x14c),'common':{'name':_0x54afd7(0x17d),'type':_0x54afd7(0x234),'role':'text','read':!![],'write':![]},'native':{}}),await _0x55f062[_0x54afd7(0x10a)](_0x54afd7(0x141),{'type':_0x54afd7(0x271),'common':{'name':'Security\x20Monitor'},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)]('analysis.security.lastScore',{'type':_0x54afd7(0x14c),'common':{'name':_0x54afd7(0x1e2),'type':_0x54afd7(0x1e6),'role':_0x54afd7(0x1d6),'read':!![],'write':![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x16a),{'type':_0x54afd7(0x14c),'common':{'name':'Current\x20Threshold','type':'number','role':_0x54afd7(0x1d6),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x147),{'type':_0x54afd7(0x14c),'common':{'name':_0x54afd7(0x162),'type':'string','role':_0x54afd7(0x167),'read':!![],'write':![]},'native':{}}),await _0x55f062[_0x54afd7(0x10a)]('analysis.health',{'type':_0x54afd7(0x271),'common':{'name':'Health\x20Analysis'},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x148),{'type':_0x54afd7(0x14c),'common':{'name':_0x54afd7(0x162),'type':_0x54afd7(0x234),'role':_0x54afd7(0x167),'read':!![],'write':![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x251),{'type':_0x54afd7(0x14c),'common':{'name':'Anomaly\x20Detected','type':'boolean','role':_0x54afd7(0x208),'read':!![],'write':![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)]('analysis.health.trendDiagnosis',{'type':_0x54afd7(0x14c),'common':{'name':'Trend','type':_0x54afd7(0x234),'role':_0x54afd7(0x186),'read':!![],'write':![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x1c4),{'type':_0x54afd7(0x14c),'common':{'name':'Trend\x20Value','type':'number','role':_0x54afd7(0x1d6),'read':!![],'write':![]},'native':{}}),await _0x55f062[_0x54afd7(0x10a)]('analysis.energy',{'type':_0x54afd7(0x271),'common':{'name':'Energy\x20Intelligence'},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x260),{'type':_0x54afd7(0x14c),'common':{'name':_0x54afd7(0x15a),'type':_0x54afd7(0x234),'role':_0x54afd7(0x186),'read':!![],'write':![]},'native':{}}),await _0x55f062['setObjectNotExistsAsync'](_0x54afd7(0x1ba),{'type':_0x54afd7(0x14c),'common':{'name':_0x54afd7(0x203),'type':_0x54afd7(0x234),'role':_0x54afd7(0x186),'read':!![],'write':![]},'native':{}}),await _0x55f062[_0x54afd7(0x10a)](_0x54afd7(0x1a8),{'type':_0x54afd7(0x271),'common':{'name':_0x54afd7(0x1a8)},'native':{}}),await _0x55f062[_0x54afd7(0x10a)](LTM_DP_RAW_LOG,{'type':_0x54afd7(0x14c),'common':{'name':'Raw\x20Log','type':_0x54afd7(0x234),'role':_0x54afd7(0x10e),'read':!![],'write':![]},'native':{}}),await _0x55f062['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x54afd7(0x14c),'common':{'name':_0x54afd7(0x204),'type':'string','role':_0x54afd7(0x10e),'read':!![],'write':![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x21e),{'type':_0x54afd7(0x14c),'common':{'name':_0x54afd7(0x1a1),'type':_0x54afd7(0x234),'role':_0x54afd7(0x10e),'read':!![],'write':![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x1d2),{'type':_0x54afd7(0x14c),'common':{'name':'Thermodynamics','type':_0x54afd7(0x234),'role':'json','read':!![],'write':![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x26d),{'type':_0x54afd7(0x14c),'common':{'name':_0x54afd7(0x200),'type':_0x54afd7(0x1f5),'role':_0x54afd7(0x154),'read':!![],'write':!![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x1ed),{'type':'state','common':{'name':_0x54afd7(0x116),'type':_0x54afd7(0x1f5),'role':_0x54afd7(0x154),'read':!![],'write':!![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x1a2),{'type':_0x54afd7(0x14c),'common':{'name':_0x54afd7(0xef),'type':_0x54afd7(0x1f5),'role':_0x54afd7(0x111),'read':!![],'write':![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x196),{'type':_0x54afd7(0x14c),'common':{'name':_0x54afd7(0x156),'type':_0x54afd7(0x234),'role':_0x54afd7(0x192),'read':!![],'write':![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x23d),{'type':_0x54afd7(0x14c),'common':{'name':_0x54afd7(0x219),'type':_0x54afd7(0x234),'role':_0x54afd7(0x186),'read':!![],'write':![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)]('analysis.automation.patternDetected',{'type':_0x54afd7(0x14c),'common':{'name':_0x54afd7(0x20d),'type':_0x54afd7(0x1f5),'role':_0x54afd7(0x208),'read':!![],'write':![]},'native':{}}),await _0x55f062['setObjectNotExistsAsync']('analysis.automation.description',{'type':'state','common':{'name':_0x54afd7(0x258),'type':_0x54afd7(0x234),'role':_0x54afd7(0x186),'read':!![],'write':![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0xf6),{'type':_0x54afd7(0x14c),'common':{'name':'Target\x20ID','type':_0x54afd7(0x234),'role':_0x54afd7(0x186),'read':!![],'write':![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x193),{'type':_0x54afd7(0x14c),'common':{'name':'Target\x20Value','type':_0x54afd7(0x234),'role':'text','read':!![],'write':![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x1a6),{'type':_0x54afd7(0x14c),'common':{'name':_0x54afd7(0x24d),'type':_0x54afd7(0x1f5),'role':_0x54afd7(0x161),'read':!![],'write':!![]},'native':{}}),await _0x55f062[_0x54afd7(0x1e9)](_0x54afd7(0x143),{'type':_0x54afd7(0x14c),'common':{'name':_0x54afd7(0x22a),'type':_0x54afd7(0x1f5),'role':_0x54afd7(0x154),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x7d004){const _0x388d3a=a0_0x33c095;try{const _0x39b781=await _0x7d004[_0x388d3a(0x248)](SYSTEM_DP_MODE);_0x39b781&&_0x39b781[_0x388d3a(0x1e3)]&&Object[_0x388d3a(0x27f)](SYSTEM_MODES)[_0x388d3a(0x21b)](_0x39b781[_0x388d3a(0x1e3)])?_0x7d004['currentSystemMode']=_0x39b781[_0x388d3a(0x1e3)]:(_0x7d004[_0x388d3a(0x151)]=SYSTEM_MODES[_0x388d3a(0x1ff)],await _0x7d004[_0x388d3a(0x255)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x388d3a(0x1ff)],'ack':!![]}));}catch(_0x2ef242){_0x7d004[_0x388d3a(0x151)]=SYSTEM_MODES['NORMAL'];}}function a0_0x3192(){const _0x5cbce3=['warn','party','find','getMonth','bin','analysis.lastResult','object','[RECORDER]\x20Error:\x20','Trigger\x20Action','[PYTHON]\x20','analysis.training.triggerSecurity','config','node-schedule','info.','log','payload','some','notifyTelegramInstance','string','dismissAutomation','apiKey','fill','communicate.request','34704zIKpRk','city','simulateButler','endsWith','analysis.activitySummary','\x20*\x20*\x20*','notifyEmailInstance','.\x20KONTEXT:\x20','üö®\x20EMERGENCY','.Current.Temperature','PRIORIT√ÑT:\x20Sicherheit.','COGNI_CONFIRM_OK','temperature','inactivityThresholdHours','rawEventLog','getStateAsync','from','livingContext','shift','briefingJob','Auto\x20Apply','replace','licenseKey','497550zhJnbl','analysis.health.isAnomaly','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','.communicate.request','\x20=\x20','setStateAsync','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','onUnload','Description','currentposition','LTM\x20Sched\x20Error:\x20','setpoint','onStateChange','admin.','telegram','üìû\x20R√ºckruf\x20anfordern','analysis.energy.insulationScore','valve','‚ùå\x20VENV\x20FAILED.\x20Run:\x20sudo\x20apt\x20install\x20python3-venv','dependencyInstallInProgress','apply','path','0\x203\x20*\x20*\x20*','Unknown','Train\x20Health','.forecast.current.temperature','Success:\x20','useWeather','Last\x20raw\x20event','analysis.trigger','LTM.rawEventLog','cancel','User\x20dismissed\x20automation\x20proposal.','channel','LTM.driftAnalysis.driftDetails','Cogni-Living','Installing\x20pip\x20packages...','child_process','sound','namespace','send','toISOString','filter','echarts.','Gemini\x20Error:\x20','stdin','events.history_debug_00','values','system','length','window','submitFeedback','isEmergency','driftDetails','scanDevices','round','isProVersion','alertReason','üß™\x20Simulating\x20Butler\x20Proposal:\x20','system.isPresent','summary','.NextHours.Location_1.Day_1.current.temp_value','unload','heizung','platform','exitTimer','generic','isAlert','history.','door','analysis.automation.patternDetected','notifyPushoverRecipient','\x0aGrund:\x20','Error\x20launching\x20Python:\x20','fenster','‚úÖ\x20Alles\x20OK\x20(Reset)','status','location','Alert\x20Status','testApiKey','weatherInstance','analysisHistory','enum','LTM.dailyDigests','pythonProcess','analysis.automation.targetId','vis.','Drift\x20Sched\x20Error:\x20','LTM.driftAnalysis','toString','blind','humidity','Success','icons-mfd.','getHours','toLowerCase','56ojAFfx','getDate','analysis.training.status','insulation','@iobroker/adapter-core','light','presence','detected','slice','extendObjectAsync','subscribeStates','Restoring\x20sensor\x20cache...','üß†\x20Triggering\x20Security\x20Training...','json','COGNI_REQUEST_CALL','timestamp','indicator.alarm','stringify','analysis.training.triggerHealth','info','notifyTelegramRecipient','Trigger\x20Briefing','python_service','shutter','startsWith','minDaysForBaseline','outdoorSensorId','cogni-living','analysisTimer','getEnums','ltmLtbWindowDays','PARTY','automationProposal','Train\x20Energy','isGracePeriodActive','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','kontakt','HEALTH_RESULT','substring','system.presenceWho','constructor','getFullYear','\x22\x20install\x20--no-cache-dir\x20--force-reinstall\x20-r\x20\x22','briefingEnabled','system.mode','System\x20Mode','setState','@google/generative-ai',').\x20Installiere...','setForeignStateAsync','diagnosis','activityLevel','logDuplicates','splice','geminiApiKey','rmSync','Skipped\x20(No\x20AI\x20or\x20Data)','LTM.triggerDailyDigest','763218fvyRyX','sendTo','Sec-Training\x20started...','triggerDailyDigest','BUTLER\x20Execution\x20Error:\x20','data','analysis.security','brightness','analysis.automation.triggerAction','application/json','ack','service.py','analysis.security.lastCheck','analysis.health.lastCheck','../../iobroker-data/cogni-living-venv','sendToAsync','openweathermap','state','write','TRAIN_HEALTH','retry','notifyTelegramEnabled','currentSystemMode','normal','getLtmData','button','heating','Alert\x20Reason','events.lastEvent','Gemini\x20Init\x20Error:\x20','pr√§senz','Insulation\x20Score','ltmStbWindowDays','Adapter','Deaktiviert\x20(Pro-Feature)','unknown','0\x204\x20*\x20*\x20*','success','switch','Last\x20Check','name','analysis.security.lastScore','notifyEmailEnabled','generateContent','date','1479464jFwiJf','siren','analysis.security.currentThreshold','üêç\x20Python\x20Pong','energy','win32','geminiModel','targetValue','notifyPushoverEnabled','sensorLastValues','Kein\x20API\x20Key!','TREND_RESULT','actual_temperature','now','error','exitGraceTimer','‚úÖ\x20HEALTH\x20TRAINED.','genAI','targetposition','occupancy','ANALYZE_SEQUENCE','Training\x20Status','stateChange','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','System','üöÄ\x20Starting\x20System\x20Logic...','search','notifyEmailRecipient','‚ö†Ô∏è\x20Persistentes\x20Python\x20VENV\x20fehlt\x20(','Training\x20Error:\x20','text','motion','change_percent','message','ltmJob','join','VACATION','analysis.analysisHistory','\x20Tage)','analysis.automation.description','OK:\x20','isExit','text.alarm','analysis.automation.targetValue','system.config','pip.exe','analysis.alertReason','TRAIN_SECURITY','25Venrbr','briefingTime','Who\x20is\x20present?','onMessage','Err:\x20','lampe','analysis.history_debug_00','callback','vacation','Sequences','analysis.isAlert','main','(((.+)+)+)+$','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','analysis.automation.autoApply','HEALTH_TRAIN_RESULT','LTM','WiFi\x20Presence\x20detected.','instance','response','models/gemini-flash-latest','getForeignStateAsync','python','Briefing\x20Sched\x20Error:\x20','latitude','enum.functions.*','javascript.','targetId','position','klima','modeResetJob','Lernphase\x20(','getCalendarNames','dailyDigests','analysis.energy.heatingScore','getOverviewData','GUEST','toLocaleTimeString','ltmDriftCheckIntervalHours','Scripts','temperatur','map','[LOG]','410934AQEczA','analysis.health.trendValue','PRIORIT√ÑT:\x20Gesundheit/AAL.','push','üõ†Ô∏è\x20Creating\x20Persistent\x20VENV\x20at:\x20','getForeignObjectsAsync','systemUUID','analysis.training.triggerEnergy','parse','Aktiv\x20(','LTM.driftAnalysis.lastCheck','flot.','triggerBriefing','delObjectAsync','getTime','LTM.trainingData.thermodynamics','\x20->\x20','devices','‚ùå\x20INSTALL\x20FAILED:\x20','value','Gemini\x20AI\x20initialized.','toFixed','presenceDevices','Missing\x20data','python3','python3\x20-m\x20venv\x20\x22','pop','existsSync','lastAlertState','scheduleJob','eventHistory','Anomaly\x20Score','val','licht','threshold','number','\x0aSTB:\x20','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','setObjectNotExistsAsync','driftAnalysisTimer','.\x20SYSTEM_MODE:\x20','exports','analysis.triggerBriefing','command','subscribeForeignStatesAsync','6782tfOrpG','.forecast.current.temp','accuweather','writable','schalter','boolean','üìû\x20R√úCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20R√ºckruf-Button\x20gedr√ºckt.','bind','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','Kein\x20API\x20Key.','power','KI-Modell\x20nicht\x20initialisiert','bewegung','expire','longitude','NORMAL','Trigger\x20Analysis','isPresent','.\x20WETTER:\x20','Heating\x20Score','Daily\x20Digests','t√ºr','guest','Digest','indicator','common','trim','testContext','dimmer','Pattern\x20Detected','notifyPushoverInstance','events.history','Keine\x20Details.','systemConfig','PONG','requirements.txt','description','N/A','getGenerativeModel','onReady','set_temperature','Activity\x20Summary','N/A\x20(Learning)','includes','4504368jUUkud','type','LTM.trainingData.sequences','Activity-Level','baselineDrift','getForeignObjectAsync'];a0_0x3192=function(){return _0x5cbce3;};return a0_0x3192();}async function loadRawEventLog(_0x1ac9f4){const _0x24754e=a0_0x33c095;try{const _0x229387=await _0x1ac9f4['getStateAsync'](LTM_DP_RAW_LOG);if(_0x229387&&_0x229387[_0x24754e(0x1e3)])_0x1ac9f4[_0x24754e(0x247)]=JSON[_0x24754e(0x1cb)](_0x229387[_0x24754e(0x1e3)]);}catch(_0x41442c){_0x1ac9f4[_0x24754e(0x247)]=[];}}async function saveRawEventLog(_0x10e390){const _0x4978f1=a0_0x33c095;if(_0x10e390[_0x4978f1(0x247)][_0x4978f1(0x281)]>RAW_LOG_MAX_SIZE)_0x10e390['rawEventLog'][_0x4978f1(0x136)](0x0,_0x10e390['rawEventLog'][_0x4978f1(0x281)]-RAW_LOG_MAX_SIZE);await _0x10e390[_0x4978f1(0x255)](LTM_DP_RAW_LOG,{'val':JSON[_0x4978f1(0x112)](_0x10e390[_0x4978f1(0x247)]),'ack':!![]});}async function loadDailyDigests(_0x443164){const _0x3ba97a=a0_0x33c095;try{const _0x1fee83=await _0x443164['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x1fee83&&_0x1fee83['val'])_0x443164[_0x3ba97a(0x1b9)]=JSON[_0x3ba97a(0x1cb)](_0x1fee83[_0x3ba97a(0x1e3)]);}catch(_0x281c22){_0x443164[_0x3ba97a(0x1b9)]=[];}await updateBaselineStatus(_0x443164);}async function saveDailyDigests(_0x2b8c36,_0x340333=!![]){const _0x288747=a0_0x33c095,_0x47ae0e=_0x2b8c36[_0x288747(0x22d)][_0x288747(0x11f)]||0x3c;_0x2b8c36[_0x288747(0x1b9)]['length']>_0x47ae0e&&_0x2b8c36[_0x288747(0x1b9)][_0x288747(0x136)](0x0,_0x2b8c36[_0x288747(0x1b9)][_0x288747(0x281)]-_0x47ae0e);await _0x2b8c36[_0x288747(0x255)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x288747(0x112)](_0x2b8c36[_0x288747(0x1b9)]),'ack':!![]});if(_0x340333)await updateBaselineStatus(_0x2b8c36);}async function updateAnalysisHistory(_0x5ce83a,_0x12f576){const _0x310262=a0_0x33c095;_0x5ce83a[_0x310262(0xf2)]['unshift'](_0x12f576);if(_0x5ce83a['analysisHistory'][_0x310262(0x281)]>HISTORY_MAX_SIZE)_0x5ce83a[_0x310262(0xf2)][_0x310262(0x1dd)]();await _0x5ce83a['setStateAsync'](_0x310262(0x18d),{'val':JSON[_0x310262(0x112)](_0x5ce83a[_0x310262(0xf2)]),'ack':!![]});}async function updateBaselineStatus(_0x373828){const _0x37c5b7=a0_0x33c095;if(!_0x373828[_0x37c5b7(0x288)]){await _0x373828[_0x37c5b7(0x255)](LTM_DP_BASELINE_STATUS,{'val':_0x37c5b7(0x15d),'ack':!![]});return;}const _0x1b9a4e=_0x373828[_0x37c5b7(0x1b9)][_0x37c5b7(0x281)]>=(_0x373828[_0x37c5b7(0x22d)][_0x37c5b7(0x11a)]||0x7)?_0x37c5b7(0x1cc)+_0x373828[_0x37c5b7(0x1b9)][_0x37c5b7(0x281)]+_0x37c5b7(0x18e):_0x37c5b7(0x1b7)+_0x373828['dailyDigests'][_0x37c5b7(0x281)]+'/'+(_0x373828['config'][_0x37c5b7(0x11a)]||0x7)+')';await _0x373828[_0x37c5b7(0x255)](LTM_DP_BASELINE_STATUS,{'val':_0x1b9a4e,'ack':!![]});}async function initSensorSubscriptions(_0x4249a9){const _0x2761ba=a0_0x33c095,_0x4a7ce7=_0x4249a9[_0x2761ba(0x22d)][_0x2761ba(0x1d4)];if(_0x4a7ce7)for(const _0x52d9a1 of _0x4a7ce7){await _0x4249a9[_0x2761ba(0x1ef)](_0x52d9a1['id']);}}function a0_0x3f16(_0x454ed2,_0xc9064e){const _0x275f9d=a0_0x3192();return a0_0x3f16=function(_0x88956e,_0x21f71c){_0x88956e=_0x88956e-0xe7;let _0x319244=_0x275f9d[_0x88956e];return _0x319244;},a0_0x3f16(_0x454ed2,_0xc9064e);}async function initPresenceSubscriptions(_0x273809){const _0x52c8c3=a0_0x33c095,_0xa4487d=_0x273809[_0x52c8c3(0x22d)][_0x52c8c3(0x1d9)];if(_0xa4487d)for(const _0x2e358e of _0xa4487d){await _0x273809[_0x52c8c3(0x1ef)](_0x2e358e);}}async function setupTelegramListener(_0x2a2e08){const _0x14f0ec=a0_0x33c095,_0x31e319=_0x2a2e08[_0x14f0ec(0x22d)][_0x14f0ec(0x233)];if(_0x2a2e08['config'][_0x14f0ec(0x150)]&&_0x31e319)await _0x2a2e08[_0x14f0ec(0x1ef)](_0x31e319+_0x14f0ec(0x253));}async function checkWifiPresence(_0x5405cb){const _0x738597=a0_0x33c095;try{const _0x4dffdd=_0x5405cb[_0x738597(0x22d)][_0x738597(0x1d9)]||[];let _0x3c4a9b=![];const _0x3eb2c7=[];for(const _0x1b11c9 of _0x4dffdd){try{const _0x4367a3=await _0x5405cb[_0x738597(0x1ad)](_0x1b11c9);_0x4367a3&&(_0x4367a3[_0x738597(0x1e3)]===!![]||_0x4367a3[_0x738597(0x1e3)]==='online'||_0x4367a3[_0x738597(0x1e3)]===0x1)&&(_0x3c4a9b=!![],_0x3eb2c7[_0x738597(0x1c6)](_0x1b11c9));}catch(_0x4c675b){}}return await _0x5405cb[_0x738597(0x255)](_0x738597(0x128),{'val':_0x3eb2c7[_0x738597(0x18b)](',\x20'),'ack':!![]}),_0x3c4a9b&&(_0x5405cb[_0x738597(0x291)]&&(_0x5405cb['log'][_0x738597(0x114)](_0x738597(0x1a9)),abortExitTimer(_0x5405cb)),!_0x5405cb[_0x738597(0x201)]&&_0x5405cb[_0x738597(0x151)]===SYSTEM_MODES[_0x738597(0x1ff)]&&await setPresence(_0x5405cb,!![])),_0x3c4a9b;}catch(_0x44a076){return![];}}function startExitTimer(_0x1ad1f3){const _0x6ad03a=a0_0x33c095;abortExitTimer(_0x1ad1f3),_0x1ad1f3['isGracePeriodActive']=!![],_0x1ad1f3[_0x6ad03a(0x177)]=setTimeout(()=>{const _0x4b631e=_0x6ad03a;_0x1ad1f3[_0x4b631e(0x123)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x1ad1f3[_0x6ad03a(0x291)]=setTimeout(()=>{const _0x353135=_0x6ad03a;setPresence(_0x1ad1f3,![]),_0x1ad1f3[_0x353135(0x291)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x3e2411){const _0xd523ed=a0_0x33c095;if(_0x3e2411[_0xd523ed(0x291)])clearTimeout(_0x3e2411[_0xd523ed(0x291)]);if(_0x3e2411['exitGraceTimer'])clearTimeout(_0x3e2411[_0xd523ed(0x177)]);_0x3e2411[_0xd523ed(0x291)]=null,_0x3e2411[_0xd523ed(0x177)]=null,_0x3e2411[_0xd523ed(0x123)]=![];}async function setPresence(_0x35f8ef,_0x17c130){const _0x1dcfe4=a0_0x33c095;if(_0x35f8ef[_0x1dcfe4(0x201)]===_0x17c130)return;_0x35f8ef[_0x1dcfe4(0x201)]=_0x17c130,await _0x35f8ef['setStateAsync'](_0x1dcfe4(0x28b),{'val':_0x17c130,'ack':!![]});}async function executeAutomationAction(_0x25b9fa){const _0x273316=a0_0x33c095;try{const _0x256b88=await _0x25b9fa['getStateAsync'](_0x273316(0xf6)),_0x4532dc=await _0x25b9fa[_0x273316(0x248)](_0x273316(0x193));if(_0x256b88&&_0x256b88[_0x273316(0x1e3)]&&_0x4532dc){const _0x53a988=_0x256b88[_0x273316(0x1e3)];let _0x5258d0=_0x4532dc['val'];try{_0x5258d0=JSON[_0x273316(0x1cb)](_0x5258d0);}catch(_0x413388){}_0x25b9fa[_0x273316(0x230)][_0x273316(0x114)]('ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x53a988+_0x273316(0x254)+_0x5258d0),await _0x25b9fa[_0x273316(0x132)](_0x53a988,_0x5258d0);}else _0x25b9fa[_0x273316(0x230)][_0x273316(0x222)](_0x273316(0x252));}catch(_0x28ea46){_0x25b9fa['log'][_0x273316(0x176)](_0x273316(0x13f)+_0x28ea46[_0x273316(0x189)]);}}async function processSensorEvent(_0x2eccea,_0x398806,_0x57d9ae,_0x44fbc0){const _0x1d48ae=a0_0x33c095;if(!_0x44fbc0)return;const _0x4d0e2a=_0x57d9ae[_0x1d48ae(0x1e3)],_0x1aa54d=Date[_0x1d48ae(0x175)](),_0x2c7c40=_0x2eccea[_0x1d48ae(0x171)][_0x398806];_0x2eccea[_0x1d48ae(0x171)][_0x398806]=_0x4d0e2a;if(!_0x44fbc0[_0x1d48ae(0x135)]&&_0x2c7c40!=undefined&&_0x2c7c40==_0x4d0e2a)return;const _0x22bb1d=(_0x44fbc0[_0x1d48ae(0x21d)]||'')[_0x1d48ae(0x100)](),_0x442e0d=_0x22bb1d[_0x1d48ae(0x21b)]('temperature')||_0x22bb1d[_0x1d48ae(0x21b)](_0x1d48ae(0x1c0))||_0x22bb1d['includes'](_0x1d48ae(0x1b5))||_0x22bb1d[_0x1d48ae(0x21b)](_0x1d48ae(0x28f));_0x2eccea[_0x1d48ae(0x288)]&&_0x442e0d&&recordThermodynamics(_0x2eccea,_0x398806,_0x4d0e2a,_0x44fbc0[_0x1d48ae(0xee)]);const _0x59135b={'timestamp':_0x1aa54d,'id':_0x398806,'name':_0x44fbc0[_0x1d48ae(0x163)],'type':_0x44fbc0['type'],'location':_0x44fbc0[_0x1d48ae(0xee)],'value':_0x4d0e2a};_0x2eccea[_0x1d48ae(0x1e1)]['unshift'](_0x59135b);if(_0x2eccea[_0x1d48ae(0x1e1)][_0x1d48ae(0x281)]>HISTORY_MAX_SIZE)_0x2eccea[_0x1d48ae(0x1e1)][_0x1d48ae(0x1dd)]();await _0x2eccea['setStateAsync'](_0x1d48ae(0x157),{'val':JSON[_0x1d48ae(0x112)](_0x59135b),'ack':!![]}),await _0x2eccea[_0x1d48ae(0x255)](_0x1d48ae(0x20f),{'val':JSON[_0x1d48ae(0x112)](_0x2eccea[_0x1d48ae(0x1e1)]),'ack':!![]});_0x2eccea[_0x1d48ae(0x288)]&&(_0x2eccea[_0x1d48ae(0x247)][_0x1d48ae(0x1c6)](_0x59135b),await saveRawEventLog(_0x2eccea),recordSequence(_0x2eccea,_0x59135b));if(_0x44fbc0[_0x1d48ae(0x191)]&&_0x4d0e2a===!![]){if(_0x2eccea['isPresent']&&!_0x2eccea[_0x1d48ae(0x123)])startExitTimer(_0x2eccea);else{if(!_0x2eccea['isPresent'])setPresence(_0x2eccea,!![]);}}else{if(_0x44fbc0[_0x1d48ae(0x21d)]==='motion'&&_0x4d0e2a===!![]){if(_0x2eccea[_0x1d48ae(0x291)])abortExitTimer(_0x2eccea);if(!_0x2eccea[_0x1d48ae(0x201)]&&_0x2eccea[_0x1d48ae(0x151)]===SYSTEM_MODES[_0x1d48ae(0x1ff)])setPresence(_0x2eccea,!![]);}}}async function recordThermodynamics(_0x457f2a,_0x3a7897,_0x3c55a1,_0x93ab5a){const _0x562331=a0_0x33c095,_0xb75887=await getOutsideTemperatureNumeric(_0x457f2a),_0x1b44d7=await _0x457f2a[_0x562331(0x248)](_0x562331(0x1d2));let _0xad8b04=[];if(_0x1b44d7&&_0x1b44d7['val'])try{_0xad8b04=JSON[_0x562331(0x1cb)](_0x1b44d7[_0x562331(0x1e3)]);}catch(_0x3b4de8){}_0xad8b04[_0x562331(0x1c6)]({'ts':Date[_0x562331(0x175)](),'room':_0x93ab5a||'Unknown','t_in':_0x3c55a1,'t_out':_0xb75887});if(_0xad8b04[_0x562331(0x281)]>THERMO_LOG_SIZE)_0xad8b04[_0x562331(0x24b)]();await _0x457f2a['setStateAsync'](_0x562331(0x1d2),{'val':JSON[_0x562331(0x112)](_0xad8b04),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x5f4676){const _0xb83fd=a0_0x33c095;if(_0x5f4676[_0xb83fd(0x22d)][_0xb83fd(0x11b)])try{const _0x522c47=await _0x5f4676['getForeignStateAsync'](_0x5f4676[_0xb83fd(0x22d)]['outdoorSensorId']);if(_0x522c47&&_0x522c47[_0xb83fd(0x1e3)]!==undefined&&_0x522c47[_0xb83fd(0x1e3)]!==null)return parseFloat(_0x522c47[_0xb83fd(0x1e3)]);}catch(_0x33350e){}const _0x55b32=_0x5f4676[_0xb83fd(0x22d)][_0xb83fd(0xf1)];if(!_0x5f4676[_0xb83fd(0x22d)][_0xb83fd(0x26b)]||!_0x55b32)return null;try{let _0x16e0b4='';if(_0x55b32['includes'](_0xb83fd(0x1f2)))_0x16e0b4=_0x55b32+_0xb83fd(0x242);else{if(_0x55b32['includes']('daswetter'))_0x16e0b4=_0x55b32+_0xb83fd(0x28d);else{if(_0x55b32[_0xb83fd(0x21b)](_0xb83fd(0x14b)))_0x16e0b4=_0x55b32+_0xb83fd(0x269);else{if(_0x55b32[_0xb83fd(0x21b)]('weatherunderground'))_0x16e0b4=_0x55b32+_0xb83fd(0x1f1);}}}if(_0x16e0b4){const _0x2b3199=await _0x5f4676[_0xb83fd(0x1ad)](_0x16e0b4);if(_0x2b3199&&_0x2b3199[_0xb83fd(0x1e3)]!==undefined&&_0x2b3199[_0xb83fd(0x1e3)]!==null)return parseFloat(_0x2b3199[_0xb83fd(0x1e3)]);}}catch(_0x1a75a8){}return null;}async function recordSequence(_0x1da68c,_0x410b2e){const _0x537d0a=a0_0x33c095,_0x37eece=(_0x410b2e['type']||'')['toLowerCase'](),_0x5a1530=[_0x537d0a(0x187),_0x537d0a(0x1fc),_0x537d0a(0x159),_0x537d0a(0x107),_0x537d0a(0x17b),_0x537d0a(0x295),_0x537d0a(0x205),_0x537d0a(0x282),_0x537d0a(0xeb),'contact',_0x537d0a(0x125),_0x537d0a(0x106),_0x537d0a(0x1e4),_0x537d0a(0x161),_0x537d0a(0x1f4),_0x537d0a(0x20c),_0x537d0a(0x19d)];if(!_0x5a1530[_0x537d0a(0x232)](_0x5bddeb=>_0x37eece['includes'](_0x5bddeb)))return;if(!_0x410b2e[_0x537d0a(0x1d6)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x537d0a(0x1c6)]({'loc':_0x410b2e[_0x537d0a(0xee)]||_0x537d0a(0x267),'id':_0x410b2e['id'],'ts':Date[_0x537d0a(0x175)]()}),sequenceTimer=setTimeout(async()=>{const _0x2f9bb8=_0x537d0a;if(activeSequence[_0x2f9bb8(0x281)]>0x1)await saveCompletedSequence(_0x1da68c);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x594580){const _0x48d9cd=a0_0x33c095;try{const _0x14462e=await _0x594580[_0x48d9cd(0x248)](_0x48d9cd(0x21e));let _0x262dde=[];if(_0x14462e&&_0x14462e[_0x48d9cd(0x1e3)])try{_0x262dde=JSON['parse'](_0x14462e[_0x48d9cd(0x1e3)]);}catch(_0xa5c9d4){}const _0x586d17=activeSequence[0x0]['ts'],_0x401ddd=activeSequence[_0x48d9cd(0x1c1)](_0x1ebe4d=>({'loc':_0x1ebe4d['loc'],'t_delta':Math[_0x48d9cd(0x287)]((_0x1ebe4d['ts']-_0x586d17)/0x3e8)})),_0x192754={'timestamp':new Date(_0x586d17)[_0x48d9cd(0x279)](),'steps':_0x401ddd,'duration':Math[_0x48d9cd(0x287)]((activeSequence[activeSequence[_0x48d9cd(0x281)]-0x1]['ts']-_0x586d17)/0x3e8),'daytime':new Date(_0x586d17)[_0x48d9cd(0xff)]()};_0x262dde['push'](_0x192754);if(_0x262dde[_0x48d9cd(0x281)]>MAX_TRAINING_SET_SIZE)_0x262dde[_0x48d9cd(0x24b)]();await _0x594580[_0x48d9cd(0x255)](_0x48d9cd(0x21e),{'val':JSON['stringify'](_0x262dde),'ack':!![]}),runSecurityCheck(_0x594580,_0x192754);}catch(_0x34194d){_0x594580[_0x48d9cd(0x230)][_0x48d9cd(0x176)](_0x48d9cd(0x229)+_0x34194d[_0x48d9cd(0x189)]);}}function runSecurityCheck(_0x39ef49,_0x330236){const _0x23ef03=a0_0x33c095;if(!_0x39ef49['isProVersion'])return;sendToPython(_0x39ef49,_0x23ef03(0x17c),{'sequence':_0x330236});}function sendToPython(_0x89bcea,_0x13d7e1,_0x235f63={}){const _0xf9ffc4=a0_0x33c095;if(!_0x89bcea[_0xf9ffc4(0xf5)]||!_0x89bcea[_0xf9ffc4(0xf5)][_0xf9ffc4(0x27d)][_0xf9ffc4(0x1f3)])return;const _0x2c2e36=JSON['stringify']({'command':_0x13d7e1,..._0x235f63});try{_0x89bcea[_0xf9ffc4(0xf5)][_0xf9ffc4(0x27d)][_0xf9ffc4(0x14d)](_0x2c2e36+'\x0a');}catch(_0x3b9c68){}}function startPythonService(_0x364a1b){const _0x34f122=a0_0x33c095;let _0x9a25a5=_0x34f122(0x1db);if(fs[_0x34f122(0x1de)](PYTHON_EXE))_0x9a25a5=PYTHON_EXE;try{const _0x1d34dd=path['join'](__dirname,_0x34f122(0x117),_0x34f122(0x146));_0x364a1b[_0x34f122(0xf5)]=spawn(_0x9a25a5,[_0x1d34dd]),_0x364a1b['pythonProcess']['stdout']['on'](_0x34f122(0x140),_0x50be84=>{const _0x455a17=_0x34f122,_0x208ed2=_0x50be84[_0x455a17(0xfa)]()['split']('\x0a');_0x208ed2['forEach'](_0xb6ca30=>{const _0x4ac17e=_0x455a17,_0x4ea8f7=_0xb6ca30[_0x4ac17e(0x20a)]();if(!_0x4ea8f7)return;if(_0x4ea8f7['startsWith'](_0x4ac17e(0x1c2)))_0x364a1b[_0x4ac17e(0x230)]['debug'](_0x4ac17e(0x22b)+_0x4ea8f7[_0x4ac17e(0x127)](0x5)[_0x4ac17e(0x20a)]());else{if(_0x4ea8f7[_0x4ac17e(0x119)]('[RESULT]'))try{const _0x65a0cc=JSON[_0x4ac17e(0x1cb)](_0x4ea8f7[_0x4ac17e(0x127)](0x8)[_0x4ac17e(0x20a)]());handlePythonResult(_0x364a1b,_0x65a0cc);}catch(_0x53a4ff){}}});}),_0x364a1b[_0x34f122(0xf5)]['on']('close',_0x4715c9=>{_0x364a1b['pythonProcess']=null;});}catch(_0x2e1b0d){_0x364a1b[_0x34f122(0x230)][_0x34f122(0x176)](_0x34f122(0xea)+_0x2e1b0d[_0x34f122(0x189)]);}}function stopPythonService(_0x12d815){const _0x9c2b1d=a0_0x33c095;if(_0x12d815[_0x9c2b1d(0xf5)]){try{_0x12d815[_0x9c2b1d(0xf5)]['kill']();}catch(_0x3980f8){}_0x12d815[_0x9c2b1d(0xf5)]=null;}}function handlePythonResult(_0x128305,_0x2841b9){const _0x17af6a=a0_0x33c095;if(_0x2841b9[_0x17af6a(0x21d)]===_0x17af6a(0x212))_0x128305[_0x17af6a(0x230)]['debug'](_0x17af6a(0x16b));else{if(_0x2841b9[_0x17af6a(0x21d)]==='SECURITY_RESULT'){const {anomaly_score:_0x38fe43,is_anomaly:_0x342e64,threshold:_0x29a283,explanation:_0x2ff847}=_0x2841b9['payload'];_0x128305['log'][_0x17af6a(0x114)](_0x17af6a(0x1e8)+_0x38fe43[_0x17af6a(0x1d8)](0x5)+_0x17af6a(0x1d3)+(_0x342e64?'ANOMALY':'OK')),_0x128305[_0x17af6a(0x255)](_0x17af6a(0x164),{'val':_0x38fe43,'ack':!![]}),_0x128305[_0x17af6a(0x255)](_0x17af6a(0x147),{'val':new Date()[_0x17af6a(0x279)](),'ack':!![]});if(_0x29a283)_0x128305[_0x17af6a(0x255)](_0x17af6a(0x16a),{'val':_0x29a283,'ack':!![]});if(_0x342e64){let _0xc005c8=_0x17af6a(0x17f)+_0x38fe43[_0x17af6a(0x1d8)](0x4)+')';_0x2ff847&&_0x2ff847!==_0x17af6a(0x267)&&(_0xc005c8+=_0x17af6a(0xe9)+_0x2ff847),_0x128305[_0x17af6a(0x255)](_0x17af6a(0x1a2),{'val':!![],'ack':!![]}),_0x128305['setStateAsync']('analysis.alertReason',{'val':_0xc005c8,'ack':!![]}),sendNotification(_0x128305,_0x17af6a(0x1a5)+_0xc005c8,![],!![]);}}else{if(_0x2841b9['type']==='TRAINING_COMPLETE'){const _0x527fa6=_0x2841b9[_0x17af6a(0x231)]['details']||'',_0x1e1481=_0x2841b9[_0x17af6a(0x231)][_0x17af6a(0x1e5)],_0x154514=_0x2841b9['payload'][_0x17af6a(0x160)]?_0x17af6a(0x26a)+new Date()[_0x17af6a(0x1bd)]()+'\x20('+_0x527fa6+')':'Failed:\x20'+_0x2841b9[_0x17af6a(0x231)]['reason'];_0x128305[_0x17af6a(0x255)](_0x17af6a(0x103),{'val':_0x154514,'ack':!![]}),_0x2841b9[_0x17af6a(0x231)]['success']&&_0x1e1481&&(_0x128305[_0x17af6a(0x230)]['info']('üéØ\x20Training\x20Success.\x20New\x20Threshold\x20set\x20to:\x20'+_0x1e1481),_0x128305[_0x17af6a(0x255)]('analysis.security.currentThreshold',{'val':_0x1e1481,'ack':!![]}));}else{if(_0x2841b9[_0x17af6a(0x21d)]==='ENERGY_TRAIN_RESULT'){if(_0x2841b9[_0x17af6a(0x231)][_0x17af6a(0x160)])try{const _0xb5765b=JSON[_0x17af6a(0x1cb)](_0x2841b9[_0x17af6a(0x231)]['details']);if(_0xb5765b[_0x17af6a(0x104)])_0x128305['setStateAsync']('analysis.energy.insulationScore',{'val':JSON[_0x17af6a(0x112)](_0xb5765b[_0x17af6a(0x104)]),'ack':!![]});if(_0xb5765b[_0x17af6a(0x155)])_0x128305[_0x17af6a(0x255)](_0x17af6a(0x1ba),{'val':JSON[_0x17af6a(0x112)](_0xb5765b[_0x17af6a(0x155)]),'ack':!![]});}catch(_0x1dde11){}}else{if(_0x2841b9[_0x17af6a(0x21d)]===_0x17af6a(0x1a7)){if(_0x2841b9[_0x17af6a(0x231)][_0x17af6a(0x160)])_0x128305[_0x17af6a(0x230)][_0x17af6a(0x114)](_0x17af6a(0x178));}else{if(_0x2841b9[_0x17af6a(0x21d)]===_0x17af6a(0x126))_0x128305['setStateAsync'](_0x17af6a(0x148),{'val':new Date()[_0x17af6a(0x279)](),'ack':!![]}),_0x128305['setStateAsync'](_0x17af6a(0x251),{'val':_0x2841b9[_0x17af6a(0x231)]['is_anomaly'],'ack':!![]});else _0x2841b9[_0x17af6a(0x21d)]===_0x17af6a(0x173)&&(_0x128305[_0x17af6a(0x255)]('analysis.health.trendDiagnosis',{'val':_0x2841b9['payload'][_0x17af6a(0x133)],'ack':!![]}),_0x128305[_0x17af6a(0x255)]('analysis.health.trendValue',{'val':_0x2841b9[_0x17af6a(0x231)][_0x17af6a(0x188)],'ack':!![]}));}}}}}}function runPythonHealthCheck(_0x378583){const _0x2aaa57=a0_0x33c095;if(!_0x378583['dailyDigests']||_0x378583[_0x2aaa57(0x1b9)][_0x2aaa57(0x281)]<0x2)return;const _0x4e7872=_0x378583['dailyDigests']['map'](_0x1d7be0=>{const _0x555e3d=_0x2aaa57,_0x5e6578=(_0x1d7be0[_0x555e3d(0x134)]||'')[_0x555e3d(0x100)]();return ACTIVITY_LEVEL_MAP[_0x5e6578]||0x32;});sendToPython(_0x378583,'ANALYZE_TREND',{'values':_0x4e7872,'tag':_0x2aaa57(0x21f)});}async function handleTelegramResponse(_0x18d771,_0x3cf1ec){const _0x3a841e=a0_0x33c095;let _0x50c4d2=_0x3cf1ec;_0x3cf1ec[_0x3a841e(0x119)]('[')&&(_0x50c4d2=_0x3cf1ec[_0x3a841e(0x127)](_0x3cf1ec['indexOf'](']')+0x1));if(_0x50c4d2===_0x3a841e(0x244))await _0x18d771[_0x3a841e(0x255)]('analysis.isAlert',{'val':![],'ack':!![]}),await _0x18d771[_0x3a841e(0x255)](_0x3a841e(0x196),{'val':'Vom\x20Benutzer\x20best√§tigt\x20(OK).','ack':!![]}),_0x18d771[_0x3a841e(0x1df)]=![],sendNotification(_0x18d771,'‚úÖ\x20Alarm\x20quittiert.\x20System\x20normal.',![]);else _0x50c4d2===_0x3a841e(0x10f)&&sendNotification(_0x18d771,_0x3a841e(0x1f6),![],!![]);}async function sendNotification(_0x51740b,_0x34c253,_0x56468e=![],_0x1cb1cb=![]){const _0x563b43=a0_0x33c095,_0x5870ba=_0x51740b[_0x563b43(0x22d)];if(_0x5870ba[_0x563b43(0x150)]){let _0x3d2a84={};(_0x34c253[_0x563b43(0x21b)]('Alarm')||_0x1cb1cb)&&(_0x3d2a84={'reply_markup':{'inline_keyboard':[[{'text':_0x563b43(0xec),'callback_data':'COGNI_CONFIRM_OK'}],[{'text':_0x563b43(0x25f),'callback_data':_0x563b43(0x10f)}]]}}),await _0x51740b[_0x563b43(0x14a)](_0x5870ba[_0x563b43(0x233)],_0x563b43(0x278),{'text':_0x34c253,'user':_0x5870ba[_0x563b43(0x115)],..._0x3d2a84});}if(_0x5870ba[_0x563b43(0x170)]){let _0x28cbf3={'message':_0x34c253,'title':_0x1cb1cb?_0x563b43(0x241):_0x563b43(0x273),'priority':_0x1cb1cb?0x2:0x1,'device':_0x5870ba[_0x563b43(0xe8)]};_0x1cb1cb&&(_0x28cbf3[_0x563b43(0x14f)]=0x1e,_0x28cbf3[_0x563b43(0x1fd)]=0xe10,_0x28cbf3[_0x563b43(0x276)]=_0x563b43(0x169)),await _0x51740b[_0x563b43(0x14a)](_0x5870ba[_0x563b43(0x20e)],'send',_0x28cbf3);}_0x5870ba[_0x563b43(0x165)]&&await _0x51740b[_0x563b43(0x14a)](_0x5870ba[_0x563b43(0x23f)],_0x563b43(0x278),{'text':_0x34c253,'to':_0x5870ba[_0x563b43(0x183)]});}async function runGeminiAnalysis(_0x263cd8,_0x315d80=''){const _0x7cc732=a0_0x33c095;if(!_0x263cd8[_0x7cc732(0x16e)])return;if(_0x263cd8[_0x7cc732(0x1e1)][_0x7cc732(0x281)]===0x0)return;const _0x25149b=_0x263cd8[_0x7cc732(0x1e1)][_0x7cc732(0x109)](0x0,0xf),_0x2c1288=await getWeatherContext(_0x263cd8),_0x4b8a22=_0x263cd8[_0x7cc732(0x151)],_0x28babf=PERSONA_MAPPING[_0x263cd8['config']['aiPersona']||_0x7cc732(0x292)],_0x5cd500=_0x263cd8[_0x7cc732(0x22d)][_0x7cc732(0x24a)]||_0x7cc732(0x210);let _0x3ea13c='Unbekannt';try{const _0x454276=await _0x263cd8[_0x7cc732(0x248)]('system.presenceWho');if(_0x454276&&_0x454276[_0x7cc732(0x1e3)])_0x3ea13c=_0x454276[_0x7cc732(0x1e3)];}catch(_0x3eb952){}let _0x232d38=![];try{const _0x206817=await _0x263cd8[_0x7cc732(0x248)](_0x7cc732(0x1a6));if(_0x206817&&_0x206817[_0x7cc732(0x1e3)])_0x232d38=!![];}catch(_0x405dcc){}const _0x31caa2=_0x7cc732(0x1f8)+_0x28babf+_0x7cc732(0x240)+_0x5cd500+_0x7cc732(0x1eb)+_0x4b8a22+_0x7cc732(0x202)+_0x2c1288+'.\x20ANWESEND:\x20'+_0x3ea13c+'.\x20EVENTS:\x20'+JSON[_0x7cc732(0x112)](_0x25149b)+'.\x20EMERGENCY:\x20'+_0x315d80+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0x37b019=await _0x263cd8[_0x7cc732(0x16e)]['generateContent'](_0x31caa2),_0x5b98ec=JSON[_0x7cc732(0x1cb)](_0x37b019[_0x7cc732(0x1ab)][_0x7cc732(0x186)]()['replace'](/```json|```/g,'')[_0x7cc732(0x20a)]());await _0x263cd8[_0x7cc732(0x255)](_0x7cc732(0x227),{'val':JSON[_0x7cc732(0x112)](_0x5b98ec),'ack':!![]});if(_0x5b98ec[_0x7cc732(0x28c)])await _0x263cd8['setStateAsync'](_0x7cc732(0x23d),{'val':_0x5b98ec[_0x7cc732(0x28c)],'ack':!![]});const _0x121b66={'timestamp':Date['now'](),'id':Date[_0x7cc732(0x175)]()[_0x7cc732(0xfa)](),'analysis':{'activity':{'summary':_0x5b98ec[_0x7cc732(0x28c)],'isAlert':_0x5b98ec[_0x7cc732(0x293)],'alertReason':_0x5b98ec[_0x7cc732(0x289)]},'comfort':{'automationProposal':_0x5b98ec[_0x7cc732(0x121)]}}};await updateAnalysisHistory(_0x263cd8,_0x121b66);const _0x23f35e=_0x5b98ec[_0x7cc732(0x293)]||![];_0x23f35e!==_0x263cd8['lastAlertState']&&(await _0x263cd8['setStateAsync'](_0x7cc732(0x1a2),{'val':_0x23f35e,'ack':!![]}),_0x263cd8[_0x7cc732(0x1df)]=_0x23f35e,_0x23f35e&&(await _0x263cd8[_0x7cc732(0x255)](_0x7cc732(0x196),{'val':_0x5b98ec[_0x7cc732(0x289)],'ack':!![]}),sendNotification(_0x263cd8,'‚ö†Ô∏è\x20ALARM:\x20'+_0x5b98ec['alertReason'],![],_0x5b98ec[_0x7cc732(0x284)])));if(_0x5b98ec[_0x7cc732(0x121)]&&_0x5b98ec[_0x7cc732(0x121)][_0x7cc732(0x108)]){await _0x263cd8[_0x7cc732(0x255)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x263cd8['setStateAsync'](_0x7cc732(0x18f),{'val':_0x5b98ec[_0x7cc732(0x121)][_0x7cc732(0x214)],'ack':!![]}),await _0x263cd8[_0x7cc732(0x255)](_0x7cc732(0xf6),{'val':_0x5b98ec[_0x7cc732(0x121)][_0x7cc732(0x1b3)],'ack':!![]}),await _0x263cd8[_0x7cc732(0x255)](_0x7cc732(0x193),{'val':JSON[_0x7cc732(0x112)](_0x5b98ec[_0x7cc732(0x121)][_0x7cc732(0x16f)]),'ack':!![]});if(_0x232d38)executeAutomationAction(_0x263cd8);}}catch(_0x5ac8e6){_0x263cd8[_0x7cc732(0x230)]['error'](_0x7cc732(0x27c)+_0x5ac8e6[_0x7cc732(0x189)]);}}async function createDailyDigest(_0x47ad90){const _0x42c1d5=a0_0x33c095;if(!_0x47ad90['isProVersion'])return;await _0x47ad90[_0x42c1d5(0x255)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x47ad90[_0x42c1d5(0x16e)]||_0x47ad90['rawEventLog'][_0x42c1d5(0x281)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x47ad90[_0x42c1d5(0x255)](LTM_DP_STATUS,{'val':_0x42c1d5(0x139),'ack':!![]});return;}const _0x509c61=JSON[_0x42c1d5(0x1cb)](JSON[_0x42c1d5(0x112)](_0x47ad90[_0x42c1d5(0x247)])),_0x27042b=_0x509c61['length'],_0xbfd989=_0x42c1d5(0x256)+JSON[_0x42c1d5(0x112)](_0x509c61);try{const _0x5431ff=await _0x47ad90[_0x42c1d5(0x16e)][_0x42c1d5(0x166)](_0xbfd989),_0x3ba586=JSON[_0x42c1d5(0x1cb)](_0x5431ff['response'][_0x42c1d5(0x186)]()[_0x42c1d5(0x24e)](/```json|```/g,'')[_0x42c1d5(0x20a)]()),_0x2afcbb={'timestamp':new Date()[_0x42c1d5(0x279)](),'eventCount':_0x27042b,'summary':_0x3ba586[_0x42c1d5(0x28c)]||_0x42c1d5(0x207),'activityLevel':_0x3ba586[_0x42c1d5(0x134)]||'normal','systemMode':_0x47ad90[_0x42c1d5(0x151)]};_0x47ad90['dailyDigests']['push'](_0x2afcbb),await saveDailyDigests(_0x47ad90),_0x47ad90[_0x42c1d5(0x247)]=[],await saveRawEventLog(_0x47ad90),await _0x47ad90[_0x42c1d5(0x255)](LTM_DP_STATUS,{'val':_0x42c1d5(0xfd),'ack':!![]});if(_0x47ad90[_0x42c1d5(0x288)])sendToPython(_0x47ad90,'ANALYZE_HEALTH',{'digest':_0x2afcbb});}catch(_0x427e0f){_0x47ad90['log'][_0x42c1d5(0x176)](_0x427e0f[_0x42c1d5(0x189)]);}}function setupLtmScheduler(_0x5da79c){const _0x4b0808=a0_0x33c095;try{if(_0x5da79c['ltmJob'])_0x5da79c[_0x4b0808(0x18a)][_0x4b0808(0x26f)]();if(!_0x5da79c[_0x4b0808(0x288)])return;_0x5da79c[_0x4b0808(0x18a)]=schedule[_0x4b0808(0x1e0)](LTM_SCHEDULE,()=>createDailyDigest(_0x5da79c));}catch(_0x513e6a){_0x5da79c[_0x4b0808(0x230)][_0x4b0808(0x176)](_0x4b0808(0x25a)+_0x513e6a[_0x4b0808(0x189)]);}}function setupModeResetScheduler(_0x3328f1){const _0x208aeb=a0_0x33c095;try{if(_0x3328f1['modeResetJob'])_0x3328f1[_0x208aeb(0x1b6)]['cancel']();_0x3328f1[_0x208aeb(0x1b6)]=schedule['scheduleJob'](MODE_RESET_SCHEDULE,async()=>{const _0x3c39e0=_0x208aeb;await loadSystemMode(_0x3328f1),AUTO_RESET_MODES['includes'](_0x3328f1[_0x3c39e0(0x151)])&&await _0x3328f1[_0x3c39e0(0x255)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x3c39e0(0x1ff)],'ack':![]});});}catch(_0x3c8f6c){_0x3328f1['log']['error']('Reset\x20Sched\x20Error:\x20'+_0x3c8f6c[_0x208aeb(0x189)]);}}function setupDriftAnalysisScheduler(_0x23bc4c){const _0x4124d5=a0_0x33c095;try{if(_0x23bc4c[_0x4124d5(0x1ea)])clearInterval(_0x23bc4c[_0x4124d5(0x1ea)]);if(!_0x23bc4c[_0x4124d5(0x288)])return;_0x23bc4c[_0x4124d5(0x1ea)]=setInterval(()=>runBaselineDriftAnalysis(_0x23bc4c),(_0x23bc4c[_0x4124d5(0x22d)][_0x4124d5(0x1be)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x23bc4c),0x1388);}catch(_0x1a4e8a){_0x23bc4c[_0x4124d5(0x230)][_0x4124d5(0x176)](_0x4124d5(0xf8)+_0x1a4e8a[_0x4124d5(0x189)]);}}function setupBriefingScheduler(_0x180c0d){const _0x1fe263=a0_0x33c095;try{if(_0x180c0d[_0x1fe263(0x24c)])_0x180c0d[_0x1fe263(0x24c)]['cancel']();if(!_0x180c0d[_0x1fe263(0x22d)][_0x1fe263(0x12c)])return;const _0x346b54=(_0x180c0d[_0x1fe263(0x22d)][_0x1fe263(0x199)]||'08:00')['split'](':'),_0x45d4fb=parseInt(_0x346b54[0x0])||0x8,_0x1382c5=parseInt(_0x346b54[0x1])||0x0,_0x520b35=_0x1382c5+'\x20'+_0x45d4fb+_0x1fe263(0x23e);_0x180c0d['briefingJob']=schedule[_0x1fe263(0x1e0)](_0x520b35,()=>{sendMorningBriefing(_0x180c0d);});}catch(_0x24af12){_0x180c0d[_0x1fe263(0x230)]['error'](_0x1fe263(0x1af)+_0x24af12['message']);}}async function runBaselineDriftAnalysis(_0x43f6f6){const _0x9f48b6=a0_0x33c095;if(!_0x43f6f6['isProVersion']||!_0x43f6f6[_0x9f48b6(0x16e)])return;const _0x2cda59=_0x43f6f6[_0x9f48b6(0x22d)][_0x9f48b6(0x15b)]||0xe;if(_0x43f6f6['dailyDigests'][_0x9f48b6(0x281)]<_0x2cda59+0x7){await _0x43f6f6[_0x9f48b6(0x255)](LTM_DP_DRIFT_STATUS,{'val':_0x9f48b6(0x21a),'ack':!![]});return;}const _0x1f7453=_0x43f6f6[_0x9f48b6(0x1b9)][_0x9f48b6(0x109)](-_0x2cda59),_0x22d670=_0x43f6f6[_0x9f48b6(0x1b9)][_0x9f48b6(0x109)](0x0,_0x43f6f6[_0x9f48b6(0x1b9)][_0x9f48b6(0x281)]-_0x2cda59),_0x175df6=_0x9f48b6(0x124)+JSON[_0x9f48b6(0x112)](_0x22d670)+_0x9f48b6(0x1e7)+JSON[_0x9f48b6(0x112)](_0x1f7453);try{const _0x532202=await _0x43f6f6[_0x9f48b6(0x16e)][_0x9f48b6(0x166)](_0x175df6),_0x2dfb2e=JSON[_0x9f48b6(0x1cb)](_0x532202[_0x9f48b6(0x1ab)][_0x9f48b6(0x186)]()[_0x9f48b6(0x24e)](/```json|```/g,'')[_0x9f48b6(0x20a)]());_0x2dfb2e['baselineDrift']&&(await _0x43f6f6[_0x9f48b6(0x255)](LTM_DP_DRIFT_STATUS,{'val':_0x2dfb2e[_0x9f48b6(0x220)],'ack':!![]}),await _0x43f6f6[_0x9f48b6(0x255)](LTM_DP_DRIFT_DETAILS,{'val':_0x2dfb2e[_0x9f48b6(0x285)],'ack':!![]}),await _0x43f6f6[_0x9f48b6(0x255)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0x14f3d0){}}class CogniLiving extends utils[a0_0x33c095(0x15c)]{constructor(_0x56a138){const _0x3f246d=a0_0x33c095;super({..._0x56a138,'name':_0x3f246d(0x11c)}),this[_0x3f246d(0x1e1)]=[],this[_0x3f246d(0xf2)]=[],this[_0x3f246d(0x247)]=[],this[_0x3f246d(0x1b9)]=[],this['sensorLastValues']={},this[_0x3f246d(0x211)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x3f246d(0x201)]=!![],this[_0x3f246d(0x291)]=null,this[_0x3f246d(0x177)]=null,this[_0x3f246d(0x123)]=![],this[_0x3f246d(0x179)]=null,this[_0x3f246d(0x16e)]=null,this[_0x3f246d(0x151)]=SYSTEM_MODES[_0x3f246d(0x1ff)],this[_0x3f246d(0x288)]=![],this[_0x3f246d(0x1df)]=![],this[_0x3f246d(0x1c9)]=_0x3f246d(0x15e),this[_0x3f246d(0x11d)]=null,this[_0x3f246d(0x18a)]=null,this['modeResetJob']=null,this[_0x3f246d(0x1ea)]=null,this[_0x3f246d(0x24c)]=null,this['pythonProcess']=null,this['dependencyInstallInProgress']=![],this['on']('ready',this[_0x3f246d(0x217)]['bind'](this)),this['on'](_0x3f246d(0x17e),this[_0x3f246d(0x25c)][_0x3f246d(0x1f7)](this)),this['on'](_0x3f246d(0x28e),this['onUnload'][_0x3f246d(0x1f7)](this)),this['on'](_0x3f246d(0x189),this[_0x3f246d(0x19b)][_0x3f246d(0x1f7)](this));}async['onReady'](){const _0x1eee88=a0_0x33c095;this[_0x1eee88(0x230)][_0x1eee88(0x114)]('cogni-living\x20adapter\x20starting\x20(v'+this['version']+')\x20-\x20SAFE\x20BOOT');if(!checkAndInstall(this))return;await startSystem(this);}[a0_0x33c095(0x257)](_0x15d368){const _0x1fc42d=a0_0x33c095;if(this[_0x1fc42d(0x11d)])clearInterval(this[_0x1fc42d(0x11d)]);if(this[_0x1fc42d(0x1ea)])clearInterval(this['driftAnalysisTimer']);if(this['ltmJob'])this[_0x1fc42d(0x18a)][_0x1fc42d(0x26f)]();if(this[_0x1fc42d(0x1b6)])this[_0x1fc42d(0x1b6)][_0x1fc42d(0x26f)]();if(this['briefingJob'])this['briefingJob']['cancel']();if(this[_0x1fc42d(0x291)])clearTimeout(this[_0x1fc42d(0x291)]);if(this[_0x1fc42d(0x177)])clearTimeout(this[_0x1fc42d(0x177)]);stopPythonService(this),_0x15d368();}async[a0_0x33c095(0x25c)](_0x49007d,_0x37f79a){const _0xe3e1f=a0_0x33c095;if(!_0x37f79a||this[_0xe3e1f(0x263)])return;if(_0x49007d['includes'](_0xe3e1f(0x25e))&&_0x49007d[_0xe3e1f(0x23c)](_0xe3e1f(0x238))&&_0x37f79a['val']){await handleTelegramResponse(this,_0x37f79a[_0xe3e1f(0x1e3)]);return;}if(_0x49007d===this[_0xe3e1f(0x277)]+'.'+SYSTEM_DP_MODE){if(_0x37f79a['val']&&Object[_0xe3e1f(0x27f)](SYSTEM_MODES)['includes'](_0x37f79a[_0xe3e1f(0x1e3)])){this[_0xe3e1f(0x151)]=_0x37f79a[_0xe3e1f(0x1e3)];if(_0x37f79a['val']===SYSTEM_MODES[_0xe3e1f(0x18c)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x37f79a[_0xe3e1f(0x145)])this[_0xe3e1f(0x12f)](_0x49007d,{'val':this[_0xe3e1f(0x151)],'ack':!![]});return;}if(!_0x37f79a[_0xe3e1f(0x145)]){_0x49007d['includes']('analysis.trigger')&&_0x37f79a[_0xe3e1f(0x1e3)]&&(this[_0xe3e1f(0x12f)](_0x49007d,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x49007d[_0xe3e1f(0x21b)](_0xe3e1f(0x13e))&&_0x37f79a[_0xe3e1f(0x1e3)]){this[_0xe3e1f(0x12f)](_0x49007d,{'val':![],'ack':!![]});if(this[_0xe3e1f(0x288)])createDailyDigest(this);}_0x49007d[_0xe3e1f(0x21b)](_0xe3e1f(0x1cf))&&_0x37f79a['val']&&(this[_0xe3e1f(0x12f)](_0x49007d,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x49007d['includes']('automation.triggerAction')&&_0x37f79a[_0xe3e1f(0x1e3)]&&(this['setState'](_0x49007d,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x49007d['includes'](_0xe3e1f(0x22c))&&_0x37f79a[_0xe3e1f(0x1e3)]){this[_0xe3e1f(0x12f)](_0x49007d,{'val':![],'ack':!![]});if(this[_0xe3e1f(0x288)])try{const _0x26fdc7=await this[_0xe3e1f(0x248)](_0xe3e1f(0x21e));if(_0x26fdc7&&_0x26fdc7[_0xe3e1f(0x1e3)]){const _0x3e8d59=JSON[_0xe3e1f(0x1cb)](_0x26fdc7['val']);this[_0xe3e1f(0x230)][_0xe3e1f(0x114)](_0xe3e1f(0x10d)),this[_0xe3e1f(0x255)](_0xe3e1f(0x103),{'val':_0xe3e1f(0x13d),'ack':!![]}),sendToPython(this,_0xe3e1f(0x197),{'sequences':_0x3e8d59});}}catch(_0x38d906){this['log'][_0xe3e1f(0x176)](_0xe3e1f(0x185)+_0x38d906['message']);}}if(_0x49007d[_0xe3e1f(0x21b)](_0xe3e1f(0x113))&&_0x37f79a['val']){this[_0xe3e1f(0x12f)](_0x49007d,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x5373bb=await this[_0xe3e1f(0x248)](LTM_DP_DAILY_DIGESTS);if(_0x5373bb&&_0x5373bb[_0xe3e1f(0x1e3)])sendToPython(this,_0xe3e1f(0x14e),{'digests':JSON[_0xe3e1f(0x1cb)](_0x5373bb[_0xe3e1f(0x1e3)])});}catch(_0x57d1b6){}}if(_0x49007d[_0xe3e1f(0x21b)](_0xe3e1f(0x1ca))&&_0x37f79a['val']){this[_0xe3e1f(0x12f)](_0x49007d,{'val':![],'ack':!![]});if(this[_0xe3e1f(0x288)])try{const _0x4cf40a=await this[_0xe3e1f(0x248)](_0xe3e1f(0x1d2));if(_0x4cf40a&&_0x4cf40a[_0xe3e1f(0x1e3)])sendToPython(this,'TRAIN_ENERGY',{'points':JSON['parse'](_0x4cf40a[_0xe3e1f(0x1e3)])});}catch(_0x1f3057){}}return;}if(this[_0xe3e1f(0x22d)][_0xe3e1f(0x1d9)]&&this[_0xe3e1f(0x22d)][_0xe3e1f(0x1d9)][_0xe3e1f(0x21b)](_0x49007d)){await checkWifiPresence(this);return;}const _0x1f23e1=(this[_0xe3e1f(0x22d)][_0xe3e1f(0x1d4)]||[])[_0xe3e1f(0x224)](_0x55fb01=>_0x55fb01['id']===_0x49007d);if(_0x1f23e1)processSensorEvent(this,_0x49007d,_0x37f79a,_0x1f23e1);}async[a0_0x33c095(0x19b)](_0x492b5c){const _0x3a2b05=a0_0x33c095;if(typeof _0x492b5c==='object'&&_0x492b5c[_0x3a2b05(0x189)]){if(_0x492b5c[_0x3a2b05(0x1ee)]===_0x3a2b05(0xf0)){const _0x719f59=_0x492b5c['message'][_0x3a2b05(0x236)]||this[_0x3a2b05(0x22d)]['geminiApiKey'];if(!_0x719f59)return this[_0x3a2b05(0x13c)](_0x492b5c['from'],_0x492b5c[_0x3a2b05(0x1ee)],{'success':![],'message':_0x3a2b05(0x1f9)},_0x492b5c[_0x3a2b05(0x19f)]);try{const _0x56daa0=new GoogleGenerativeAI(_0x719f59),_0x369d21=_0x56daa0['getGenerativeModel']({'model':GEMINI_MODEL}),_0x8f983e=await _0x369d21['generateContent']('Hi');this['sendTo'](_0x492b5c[_0x3a2b05(0x249)],_0x492b5c[_0x3a2b05(0x1ee)],{'success':!![],'message':_0x3a2b05(0x190)+_0x8f983e['response'][_0x3a2b05(0x186)]()},_0x492b5c[_0x3a2b05(0x19f)]);}catch(_0x27da97){this[_0x3a2b05(0x13c)](_0x492b5c[_0x3a2b05(0x249)],_0x492b5c[_0x3a2b05(0x1ee)],{'success':![],'message':_0x3a2b05(0x19c)+_0x27da97[_0x3a2b05(0x189)]},_0x492b5c[_0x3a2b05(0x19f)]);}}else{if(_0x492b5c['command']===_0x3a2b05(0x20b)){const _0xceb866=await getWeatherContext(this),_0xab40d5=await getCalendarContext(this);this[_0x3a2b05(0x13c)](_0x492b5c['from'],_0x492b5c['command'],{'success':!![],'weather':_0xceb866,'calendar':_0xab40d5},_0x492b5c[_0x3a2b05(0x19f)]);}else{if(_0x492b5c[_0x3a2b05(0x1ee)]===_0x3a2b05(0x153)){if(!this['isProVersion'])return this[_0x3a2b05(0x13c)](_0x492b5c['from'],_0x492b5c[_0x3a2b05(0x1ee)],{'success':![],'isPro':![]},_0x492b5c[_0x3a2b05(0x19f)]);let _0x5505ab={'status':_0x3a2b05(0x215)};try{const _0x4395b0=await this[_0x3a2b05(0x248)](LTM_DP_DRIFT_STATUS);_0x5505ab[_0x3a2b05(0xed)]=_0x4395b0?_0x4395b0[_0x3a2b05(0x1e3)]:'N/A';}catch(_0x58ca6a){}this[_0x3a2b05(0x13c)](_0x492b5c['from'],_0x492b5c[_0x3a2b05(0x1ee)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x3a2b05(0x1b9)],'driftAnalysis':_0x5505ab,'analysisHistory':this['analysisHistory']},_0x492b5c[_0x3a2b05(0x19f)]);}else{if(_0x492b5c[_0x3a2b05(0x1ee)]===_0x3a2b05(0x1bb)){const _0x2ea87d=this['dailyDigests'][_0x3a2b05(0x281)],_0x5d99c1=new Date(),_0x7dee9=new Date(_0x5d99c1[_0x3a2b05(0x12a)](),_0x5d99c1[_0x3a2b05(0x225)](),_0x5d99c1[_0x3a2b05(0x102)]())[_0x3a2b05(0x1d1)](),_0x56ab72=this['rawEventLog'][_0x3a2b05(0x27a)](_0x20b5cd=>new Date(_0x20b5cd[_0x3a2b05(0x110)])[_0x3a2b05(0x1d1)]()>_0x7dee9)[_0x3a2b05(0x281)],_0x4d8156=new Array(0x18)[_0x3a2b05(0x237)](0x0);this[_0x3a2b05(0x247)]['forEach'](_0x3727fd=>{const _0x3a0f2b=_0x3a2b05,_0x4548e9=new Date(_0x3727fd[_0x3a0f2b(0x110)]);if(_0x4548e9[_0x3a0f2b(0x1d1)]()>_0x7dee9)_0x4d8156[_0x4548e9[_0x3a0f2b(0xff)]()]++;});let _0x47e638={'status':'N/A'};try{const _0xee01d7=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x47e638[_0x3a2b05(0xed)]=_0xee01d7?_0xee01d7[_0x3a2b05(0x1e3)]:_0x3a2b05(0x215);}catch(_0x2219ea){}let _0x55eef6='';try{const _0x12dcc0=await this['getStateAsync'](_0x3a2b05(0x128));_0x55eef6=_0x12dcc0?_0x12dcc0[_0x3a2b05(0x1e3)]:'';}catch(_0x530bff){}let _0xb0ecff=null;!this[_0x3a2b05(0x16e)]&&(_0xb0ecff=this['config'][_0x3a2b05(0x137)]?_0x3a2b05(0x1fb):_0x3a2b05(0x172));let _0x534fef={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x6de132=await this[_0x3a2b05(0x248)]('analysis.automation.patternDetected');if(_0x6de132&&_0x6de132[_0x3a2b05(0x1e3)]){_0x534fef['detected']=!![];const _0x2c42bd=await this[_0x3a2b05(0x248)]('analysis.automation.description');_0x534fef[_0x3a2b05(0x214)]=_0x2c42bd?_0x2c42bd[_0x3a2b05(0x1e3)]:'';const _0x46ef71=await this[_0x3a2b05(0x248)](_0x3a2b05(0xf6));_0x534fef['targetId']=_0x46ef71?_0x46ef71['val']:'';const _0x26da4f=await this[_0x3a2b05(0x248)](_0x3a2b05(0x193));_0x534fef[_0x3a2b05(0x16f)]=_0x26da4f?_0x26da4f[_0x3a2b05(0x1e3)]:'';}const _0x279145=await this[_0x3a2b05(0x248)](_0x3a2b05(0x1a6));_0x534fef['autoApply']=_0x279145?!!_0x279145[_0x3a2b05(0x1e3)]:![];}catch(_0x55c42d){}this[_0x3a2b05(0x13c)](_0x492b5c[_0x3a2b05(0x249)],_0x492b5c[_0x3a2b05(0x1ee)],{'success':!![],'eventHistory':this[_0x3a2b05(0x1e1)][_0x3a2b05(0x109)](0x0,0xf),'stats':{'digestCount':_0x2ea87d,'eventCountToday':_0x56ab72,'hourlyActivity':_0x4d8156,'driftStatus':_0x47e638['status'],'isPresent':this[_0x3a2b05(0x201)],'presenceWho':_0x55eef6,'minDays':this[_0x3a2b05(0x22d)][_0x3a2b05(0x11a)]||0x7,'stbDays':this['config']['ltmStbWindowDays']||0xe,'ltbDays':this[_0x3a2b05(0x22d)]['ltmLtbWindowDays']||0x3c,'systemError':_0xb0ecff},'automation':_0x534fef},_0x492b5c[_0x3a2b05(0x19f)]);}else{if(_0x492b5c['command']===_0x3a2b05(0x286))try{const _0x10d486=await scanForDevices(this,_0x492b5c[_0x3a2b05(0x189)]||{});this['sendTo'](_0x492b5c[_0x3a2b05(0x249)],_0x492b5c['command'],{'success':!![],'devices':_0x10d486},_0x492b5c[_0x3a2b05(0x19f)]);}catch(_0x205ed8){this[_0x3a2b05(0x13c)](_0x492b5c['from'],_0x492b5c[_0x3a2b05(0x1ee)],{'success':![],'error':_0x205ed8[_0x3a2b05(0x189)]},_0x492b5c[_0x3a2b05(0x19f)]);}else{if(_0x492b5c[_0x3a2b05(0x1ee)]===_0x3a2b05(0x11e)){const _0xa24608=await this[_0x3a2b05(0x1c8)](_0x3a2b05(0x1b1),_0x3a2b05(0xf3)),_0x36c2d8=[];if(_0xa24608)for(const _0x2e611a in _0xa24608){const _0xe77af4=_0xa24608[_0x2e611a],_0x1dce9e=(_0xe77af4[_0x3a2b05(0x209)]&&typeof _0xe77af4[_0x3a2b05(0x209)][_0x3a2b05(0x163)]===_0x3a2b05(0x228)?_0xe77af4[_0x3a2b05(0x209)][_0x3a2b05(0x163)]['de']:_0xe77af4[_0x3a2b05(0x209)]['name'])||_0xe77af4[_0x3a2b05(0x209)][_0x3a2b05(0x163)];_0x36c2d8['push']({'id':_0x2e611a,'name':_0x1dce9e});}this[_0x3a2b05(0x13c)](_0x492b5c[_0x3a2b05(0x249)],_0x492b5c['command'],{'success':!![],'enums':_0x36c2d8},_0x492b5c[_0x3a2b05(0x19f)]);}else{if(_0x492b5c[_0x3a2b05(0x1ee)]===_0x3a2b05(0x1b8)){const _0x580990=_0x492b5c[_0x3a2b05(0x189)][_0x3a2b05(0x1aa)];if(!_0x580990)return this[_0x3a2b05(0x13c)](_0x492b5c['from'],_0x492b5c[_0x3a2b05(0x1ee)],{'success':![],'error':'No\x20instance'},_0x492b5c[_0x3a2b05(0x19f)]);const _0x240255=await getCalendarNames(this,_0x580990);this['sendTo'](_0x492b5c[_0x3a2b05(0x249)],_0x492b5c['command'],{'success':!![],'names':_0x240255},_0x492b5c[_0x3a2b05(0x19f)]);}else{if(_0x492b5c['command']===_0x3a2b05(0x23b)){const {targetId:_0x54fe06,targetValue:_0x4d0c4c}=_0x492b5c[_0x3a2b05(0x189)];this[_0x3a2b05(0x230)]['info'](_0x3a2b05(0x28a)+_0x54fe06+_0x3a2b05(0x254)+_0x4d0c4c),await this['setStateAsync'](_0x3a2b05(0xe7),{'val':!![],'ack':!![]}),await this[_0x3a2b05(0x255)](_0x3a2b05(0x18f),{'val':'SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20'+_0x54fe06,'ack':!![]}),await this[_0x3a2b05(0x255)](_0x3a2b05(0xf6),{'val':_0x54fe06,'ack':!![]}),await this['setStateAsync'](_0x3a2b05(0x193),{'val':_0x4d0c4c,'ack':!![]}),this[_0x3a2b05(0x13c)](_0x492b5c[_0x3a2b05(0x249)],_0x492b5c[_0x3a2b05(0x1ee)],{'success':!![]},_0x492b5c['callback']);}else{if(_0x492b5c[_0x3a2b05(0x1ee)]===_0x3a2b05(0x283)){const {historyId:_0x7e3b1a,rating:_0x6dba8d,comment:_0x57c03e,alertReason:_0x3cbc23}=_0x492b5c[_0x3a2b05(0x189)];_0x7e3b1a&&_0x6dba8d?(await saveFeedback(this,{'timestamp':Date['now'](),'historyId':_0x7e3b1a,'rating':_0x6dba8d,'comment':_0x57c03e,'alertReason':_0x3cbc23}),this['sendTo'](_0x492b5c[_0x3a2b05(0x249)],_0x492b5c[_0x3a2b05(0x1ee)],{'success':!![]},_0x492b5c['callback'])):this['sendTo'](_0x492b5c[_0x3a2b05(0x249)],_0x492b5c[_0x3a2b05(0x1ee)],{'success':![],'error':_0x3a2b05(0x1da)},_0x492b5c[_0x3a2b05(0x19f)]);}else _0x492b5c[_0x3a2b05(0x1ee)]===_0x3a2b05(0x235)&&(this[_0x3a2b05(0x230)]['info'](_0x3a2b05(0x270)),await this[_0x3a2b05(0x255)](_0x3a2b05(0xe7),{'val':![],'ack':!![]}),await this[_0x3a2b05(0x255)](_0x3a2b05(0x18f),{'val':'','ack':!![]}),this[_0x3a2b05(0x13c)](_0x492b5c['from'],_0x492b5c[_0x3a2b05(0x1ee)],{'success':!![]},_0x492b5c[_0x3a2b05(0x19f)]));}}}}}}}}}}}if(require[a0_0x33c095(0x1a3)]!==module)module[a0_0x33c095(0x1ec)]=_0x46a163=>new CogniLiving(_0x46a163);else new CogniLiving();