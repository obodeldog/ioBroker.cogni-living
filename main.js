const a0_0x341954=a0_0x381b;(function(_0x1954da,_0x28cce9){const _0x55b867=a0_0x381b,_0x48815d=_0x1954da();while(!![]){try{const _0x483dcd=-parseInt(_0x55b867(0x286))/0x1+-parseInt(_0x55b867(0x2c7))/0x2*(parseInt(_0x55b867(0x27d))/0x3)+-parseInt(_0x55b867(0x1e3))/0x4+-parseInt(_0x55b867(0x2a9))/0x5+-parseInt(_0x55b867(0x1fc))/0x6*(parseInt(_0x55b867(0x29d))/0x7)+parseInt(_0x55b867(0x208))/0x8+parseInt(_0x55b867(0x1b5))/0x9*(parseInt(_0x55b867(0x1e4))/0xa);if(_0x483dcd===_0x28cce9)break;else _0x48815d['push'](_0x48815d['shift']());}catch(_0x3cdfc2){_0x48815d['push'](_0x48815d['shift']());}}}(a0_0x1665,0x9642c));function a0_0x1665(){const _0x1d5a9f=['bind','Verbindung\x20erfolgreich!','modeResetJob','error','floor','healthTrendInterval','getStateAsync','88986LnDLPk','runAutopilot','initSystemConfig','number','system.presenceWho','analysis.topology.structure','scanThermostats','sunny','./lib/scanner','General\x20Activity\x20Trend\x20(%)','models/gemini-flash-latest','search','8170432exufeF','devices','notifyTelegramEnabled','system.adapter.','timestamp','Lernphase\x20(','calendarInstance','Gemini\x20AI\x20initialized.','config','\x20Tage)','info','scanForDevices','createAllObjects','minutes_safe','cleanupGhostInterventions','ANALYZE_TREND','stopService','SYSTEM_MODES','getState','json','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','motion','state','trackerHeartbeat','getTime','VACATION','setState','common','apply','briefingJob','type','analysis.energy.rlPenalties','fill','guest','Party\x20Mode','initZombies','key','Active\x20Ventilation\x20Alerts','NORMAL','processSensorEvent','PYTHON_EXE','some','Heizung\x20kann\x20','stateChange','analysis.energy.ventilationAlerts','analysisHistory','trackerEnabled','isProVersion','dependencyInstallInProgress','LTM.trainingData.sequences','sendTo','add','./lib/setup','isPresent','exitTimer','analysis.energy.pinnForecast','sensorLastValues','analysis.health.activityTrend','triggerGaitAnalysis','getForeignObjectAsync','values','â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...','daswetter.0','analysis.health.todayVector','analysis.energy.mpcActive','ltmJob','thermostat','value','now','presenceDevices','LTM.trainingData.thermodynamics','Instanz\x20nicht\x20gefunden','Daten\x20nicht\x20verfÃ¼gbar','sendMorningBriefing','isGracePeriodActive','rawEventLog','analysis.automation.description','Aktiv\x20(','initHistory','log','eventHistory','TRAIN_COMFORT','Verbunden','text','telegram','analysis.energy.insulationScore','getOutsideTemperatureNumeric','Gemini\x20Init\x20Error:\x20','./lib/automation','./lib/topology','LTM.triggerDailyDigest','updateLocation','TRAIN_ENERGY','geminiModel','PREDICT_ENERGY','klar','./lib/recorder','setPresence','(((.+)+)+)+$','Sec-Training\x20started...','online','parse','Guest\x20Mode','subscribeStates','getForeignObjectsAsync','location','setupDriftAnalysisScheduler','Key\x20not\x20found\x20or\x20not\x20provided','find','analysis.training.triggerTopology','.system.mode','weatherunderground.0','unload','checkCalendarTriggers','getForeignStateAsync','TRAIN_HEALTH','setHours','790617EUumAX','currentSystemMode','inactivityThresholdHours','Current.WeatherText','message','genAI','application/json','LTM.dailyDigests','includes','781086vuXerE','getOverviewData','dailyDigests','Activity-Level','licenseKey','temperature','SET_LEARNING_MODE','analysis.training.status','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','enum','Notification\x20Test\x20Failed:\x20','setupLtmScheduler','loadSystemMode','updateHealthVector','isArray','checkLicense','keys','enum.rooms.*','onUnload','lastAlertState','analysis.automation.targetId','analysis.training.triggerEnergy','analysis.automation.patternDetected','511UkPVia','checkSolarCondition','cogni-living\x20adapter\x20starting\x20(v','forEach','LTM.rawEventLog','analysis.health.gaitSensors','toLowerCase','SYSTEM_DP_MODE','push','length','abs','analysis.trigger','4013620KQPVZW','_calName','analysis.energy.warmupTimes','./lib/dead_man','command','analysis.health.gaitDebug','send','triggerEnergyPrediction','TRACK_EVENT','Kein\x20Wetter-Adapter','cogni-living','abortExitTimer','Standard','endsWith','scores','notifyTelegramInstance','minDaysForBaseline','calendarName','enum.functions.*','onReady','TRAIN_SECURITY','generateContent','manual','toString','sort','analysis.training.triggerHealth','getGenerativeModel','isSolar','party','analysisTimer','8WvObpQ','simulateButler','checkWifiPresence','triggerBriefing','exitGraceTimer','stringify','subscribeForeignStatesAsync','2277MKpYLf','.data.table','analysis.automation.targetValue','join','runPythonHealthCheck','getLtmData','pop','onStateChange','scanDevices','analysis.training.triggerComfort','runBaselineDriftAnalysis','analysis.automation.triggerAction','Kein\x20Kalender-Adapter','updateTopologyMatrix','Keine\x20Antwort\x20von\x20Gemini','automation.triggerAction','analysis.training.triggerSecurity','object','geminiApiKey','apiKey','cancel','./lib/scheduler','simulateEnergyMPC','runGeminiAnalysis','exports','onMessage','Reinforcement\x20Learning\x20Penalties','analysis.triggerBriefing','map','string','callback','testContext','lastTrackerEventTime','LTM.baselineStatus','setStateAsync','updateTopology','WiFi\x20Presence\x20detected.','instance','./lib/python_bridge','Simulation\x20durch\x20Admin\x20(Test)','executeAutomationAction','Fehler:\x20','setObjectNotExistsAsync','analysis.energy.warmupTargets','from','ANALYZE_GAIT','4821220bLEIls','178660bSVKfa','sonn','NextHours.Location_1.Day_1.current.symbol_desc','./lib/installer','ack','useWeather','.communicate.request','val','forecast.current.weather','accuweather.0','Gesendet','@google/generative-ai','constructor','name','driftAnalysisTimer','getHours','analysis.security.learningStatus'];a0_0x1665=function(){return _0x1d5a9f;};return a0_0x1665();}const a0_0x4f8bc2=(function(){let _0x3e0d5e=!![];return function(_0x4e96a3,_0xf4549c){const _0x7b01a7=_0x3e0d5e?function(){const _0x54939a=a0_0x381b;if(_0xf4549c){const _0x44d3e9=_0xf4549c[_0x54939a(0x224)](_0x4e96a3,arguments);return _0xf4549c=null,_0x44d3e9;}}:function(){};return _0x3e0d5e=![],_0x7b01a7;};}()),a0_0x573fe0=a0_0x4f8bc2(this,function(){const _0x3934a7=a0_0x381b;return a0_0x573fe0[_0x3934a7(0x2c0)]()[_0x3934a7(0x207)](_0x3934a7(0x26a))[_0x3934a7(0x2c0)]()[_0x3934a7(0x1f0)](a0_0x573fe0)['search'](_0x3934a7(0x26a));});a0_0x573fe0();function a0_0x381b(_0x2c6246,_0x53f3b3){const _0x5dec3b=a0_0x1665();return a0_0x381b=function(_0x573fe0,_0x4f8bc2){_0x573fe0=_0x573fe0-0x1af;let _0x1665d0=_0x5dec3b[_0x573fe0];return _0x1665d0;},a0_0x381b(_0x2c6246,_0x53f3b3);}'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x341954(0x1ef)),installer=require(a0_0x341954(0x1e7)),scanner=require(a0_0x341954(0x204)),schedulers=require(a0_0x341954(0x1ca)),topology=require(a0_0x341954(0x261)),setup=require(a0_0x341954(0x23c)),recorder=require(a0_0x341954(0x268)),pythonBridge=require(a0_0x341954(0x1db)),aiAgent=require('./lib/ai_agent'),deadMan=require(a0_0x341954(0x2ac)),automation=require(a0_0x341954(0x260)),GEMINI_MODEL=a0_0x341954(0x206),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils['Adapter']{constructor(_0x1267dd){const _0x882857=a0_0x341954;super({..._0x1267dd,'name':_0x882857(0x2b3)}),this['eventHistory']=[],this['analysisHistory']=[],this[_0x882857(0x253)]=[],this[_0x882857(0x288)]=[],this[_0x882857(0x240)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x882857(0x23e)]=null,this[_0x882857(0x1b2)]=null,this[_0x882857(0x252)]=![],this[_0x882857(0x282)]=null,this[_0x882857(0x265)]=null,this[_0x882857(0x27e)]=setup[_0x882857(0x219)][_0x882857(0x22e)],this[_0x882857(0x237)]=![],this[_0x882857(0x299)]=![],this[_0x882857(0x2c6)]=null,this[_0x882857(0x249)]=null,this[_0x882857(0x1f7)]=null,this[_0x882857(0x1f2)]=null,this[_0x882857(0x225)]=null,this[_0x882857(0x21f)]=null,this['healthTrendInterval']=null,this[_0x882857(0x238)]=![],this['lastTrackerEventTime']=Date[_0x882857(0x24c)](),this['on']('ready',this[_0x882857(0x2bc)]['bind'](this)),this['on'](_0x882857(0x233),this[_0x882857(0x1bc)][_0x882857(0x1f5)](this)),this['on'](_0x882857(0x278),this[_0x882857(0x298)][_0x882857(0x1f5)](this)),this['on'](_0x882857(0x281),this['onMessage'][_0x882857(0x1f5)](this));}async['onReady'](){const _0x42a48c=a0_0x341954;this['log'][_0x42a48c(0x212)](_0x42a48c(0x29f)+this['version']+')\x20-\x20Phase\x20D\x20(Transparency)');if(!installer['checkAndInstall'](this,()=>this['startSystem']()))return;}async['startSystem'](){const _0x5463e7=a0_0x341954;await setup[_0x5463e7(0x22b)](this);try{this[_0x5463e7(0x237)]=await setup[_0x5463e7(0x295)](this[_0x5463e7(0x210)][_0x5463e7(0x28a)]);}catch(_0x1cd2e4){}if(!this['config'][_0x5463e7(0x27f)]||this['config'][_0x5463e7(0x27f)]<0.1)this[_0x5463e7(0x210)][_0x5463e7(0x27f)]=0xc;await setup[_0x5463e7(0x256)](this),await setup[_0x5463e7(0x1fe)](this);if(this[_0x5463e7(0x210)][_0x5463e7(0x1c7)])try{this['genAI']=new GoogleGenerativeAI(this[_0x5463e7(0x210)][_0x5463e7(0x1c7)]),this[_0x5463e7(0x265)]=this[_0x5463e7(0x282)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x5463e7(0x283)}}),this[_0x5463e7(0x257)][_0x5463e7(0x212)](_0x5463e7(0x20f));}catch(_0xc9bdef){this[_0x5463e7(0x257)][_0x5463e7(0x1f8)](_0x5463e7(0x25f)+_0xc9bdef[_0x5463e7(0x281)]);}await setup[_0x5463e7(0x214)](this),await this[_0x5463e7(0x292)](),await this[_0x5463e7(0x1df)](_0x5463e7(0x23f),{'type':_0x5463e7(0x21e),'common':{'name':'PINN\x20AI\x20Forecast','type':'string','role':_0x5463e7(0x21b),'read':!![],'write':![]},'native':{}}),await this[_0x5463e7(0x1df)](_0x5463e7(0x234),{'type':_0x5463e7(0x21e),'common':{'name':_0x5463e7(0x22d),'type':_0x5463e7(0x1d2),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x5463e7(0x1df)](_0x5463e7(0x2ab),{'type':_0x5463e7(0x21e),'common':{'name':'Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','type':_0x5463e7(0x1d2),'role':_0x5463e7(0x21b),'read':!![],'write':![]},'native':{}}),await this[_0x5463e7(0x1df)](_0x5463e7(0x1e0),{'type':_0x5463e7(0x21e),'common':{'name':'Warm-Up\x20Target\x20Temps\x20(JSON)','type':_0x5463e7(0x1d2),'role':_0x5463e7(0x21b),'read':!![],'write':!![],'def':'{\x22default\x22:\x2021}'},'native':{}}),await this['setObjectNotExistsAsync'](_0x5463e7(0x227),{'type':_0x5463e7(0x21e),'common':{'name':_0x5463e7(0x1cf),'type':_0x5463e7(0x1d2),'role':'json','read':!![],'write':![],'def':'{}'},'native':{}}),await this['setObjectNotExistsAsync'](_0x5463e7(0x241),{'type':_0x5463e7(0x21e),'common':{'name':_0x5463e7(0x205),'type':_0x5463e7(0x1ff),'role':_0x5463e7(0x24b),'unit':'%','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x5463e7(0x2a2),{'type':_0x5463e7(0x21e),'common':{'name':'Sensors\x20used\x20for\x20Gait\x20Analysis','type':_0x5463e7(0x1d2),'role':'text','read':!![],'write':![]},'native':{}}),await this[_0x5463e7(0x1df)](_0x5463e7(0x2ae),{'type':'state','common':{'name':'Gait\x20Speed\x20Calculation\x20Proof','type':'string','role':_0x5463e7(0x25b),'read':!![],'write':![]},'native':{}});try{const _0x141ab5=await this['getStateAsync'](_0x5463e7(0x2a1));if(_0x141ab5&&_0x141ab5['val'])this['rawEventLog']=JSON[_0x5463e7(0x26d)](_0x141ab5[_0x5463e7(0x1eb)]);}catch(_0x1fd132){this[_0x5463e7(0x253)]=[];}try{const _0x538b0c=await this['getStateAsync'](_0x5463e7(0x284));if(_0x538b0c&&_0x538b0c[_0x5463e7(0x1eb)])this[_0x5463e7(0x288)]=JSON[_0x5463e7(0x26d)](_0x538b0c[_0x5463e7(0x1eb)]);}catch(_0xb5b308){this[_0x5463e7(0x288)]=[];}const _0x12e7d1=this[_0x5463e7(0x288)][_0x5463e7(0x2a6)]>=(this[_0x5463e7(0x210)][_0x5463e7(0x2b9)]||0x7)?_0x5463e7(0x255)+this[_0x5463e7(0x288)][_0x5463e7(0x2a6)]+_0x5463e7(0x211):_0x5463e7(0x20d)+this['dailyDigests'][_0x5463e7(0x2a6)]+'/'+(this[_0x5463e7(0x210)][_0x5463e7(0x2b9)]||0x7)+')';await this[_0x5463e7(0x1d7)](_0x5463e7(0x1d6),{'val':_0x12e7d1,'ack':!![]}),this[_0x5463e7(0x26f)](_0x5463e7(0x2a8)),this[_0x5463e7(0x26f)](_0x5463e7(0x262)),this[_0x5463e7(0x26f)]('system.mode'),this[_0x5463e7(0x26f)](_0x5463e7(0x1d0)),this[_0x5463e7(0x26f)](_0x5463e7(0x1c0)),this['subscribeStates']('analysis.automation.autoApply'),this['subscribeStates'](_0x5463e7(0x1c5)),this[_0x5463e7(0x26f)]('analysis.training.triggerHealth'),this['subscribeStates'](_0x5463e7(0x29b)),this[_0x5463e7(0x26f)](_0x5463e7(0x1be)),this['subscribeStates'](_0x5463e7(0x275)),this[_0x5463e7(0x26f)](_0x5463e7(0x248));const _0x5211f5=this[_0x5463e7(0x210)][_0x5463e7(0x209)];if(_0x5211f5)for(const _0x3f6110 of _0x5211f5){await this[_0x5463e7(0x1b4)](_0x3f6110['id']);}const _0x3c7860=this['config'][_0x5463e7(0x24d)];if(_0x3c7860)for(const _0x5b82bc of _0x3c7860){await this['subscribeForeignStatesAsync'](_0x5b82bc);}if(this[_0x5463e7(0x210)][_0x5463e7(0x20a)]&&this[_0x5463e7(0x210)]['notifyTelegramInstance'])await this[_0x5463e7(0x1b4)](this[_0x5463e7(0x210)][_0x5463e7(0x2b8)]+_0x5463e7(0x1ea));setTimeout(()=>this[_0x5463e7(0x1b0)](),0x1388);if(this[_0x5463e7(0x2c6)])clearInterval(this[_0x5463e7(0x2c6)]);const _0x21ea93=this[_0x5463e7(0x210)]['analysisInterval']||0xf;_0x21ea93>0x0&&(this[_0x5463e7(0x2c6)]=setInterval(()=>{const _0x4372c4=_0x5463e7;this[_0x4372c4(0x1fd)](),automation['checkCalendarTriggers'](this);},_0x21ea93*0x3c*0x3e8));setTimeout(()=>automation[_0x5463e7(0x279)](this),0x2710);this[_0x5463e7(0x210)][_0x5463e7(0x236)]!==![]&&(this['trackerHeartbeat']=setInterval(()=>{const _0x574bbe=_0x5463e7;if(this['isProVersion']){const _0x3179b8=Date[_0x574bbe(0x24c)](),_0x27a89b=this['lastTrackerEventTime']||_0x3179b8,_0x536056=(_0x3179b8-_0x27a89b)/0x3e8;_0x536056>0x2&&(this[_0x574bbe(0x1d5)]=_0x3179b8,pythonBridge[_0x574bbe(0x2af)](this,_0x574bbe(0x2b1),{'room':null,'dt':_0x536056}));}},0xbb8));if(this[_0x5463e7(0x1fa)])clearInterval(this[_0x5463e7(0x1fa)]);this[_0x5463e7(0x1fa)]=setInterval(()=>{const _0x2dab26=_0x5463e7;this['isProVersion']&&(this[_0x2dab26(0x257)][_0x2dab26(0x212)](_0x2dab26(0x245)),this[_0x2dab26(0x1b9)]());},0x4*0x3c*0x3c*0x3e8),schedulers[_0x5463e7(0x291)](this,()=>aiAgent['createDailyDigest'](this,pythonBridge)),schedulers['setupModeResetScheduler'](this),schedulers[_0x5463e7(0x272)](this,()=>aiAgent[_0x5463e7(0x1bf)](this)),schedulers['setupBriefingScheduler'](this,()=>aiAgent[_0x5463e7(0x251)](this)),pythonBridge['startService'](this,installer[_0x5463e7(0x230)]),setTimeout(async()=>{const _0x57dd2c=_0x5463e7;await topology[_0x57dd2c(0x1d8)](this);try{const _0x242f46=await this[_0x57dd2c(0x1fb)](_0x57dd2c(0x201));if(_0x242f46&&_0x242f46['val'])pythonBridge[_0x57dd2c(0x2af)](this,'SET_TOPOLOGY',JSON['parse'](_0x242f46['val']));}catch(_0x2ceedb){}this['runPythonHealthCheck'](),this[_0x57dd2c(0x242)](),this['triggerEnergyPrediction'](),this['updateHealthVector']();},0x1388);}[a0_0x341954(0x298)](_0x324e27){const _0x192231=a0_0x341954;if(this[_0x192231(0x2c6)])clearInterval(this[_0x192231(0x2c6)]);if(this[_0x192231(0x1f2)])clearInterval(this[_0x192231(0x1f2)]);if(this[_0x192231(0x21f)])clearInterval(this[_0x192231(0x21f)]);if(this[_0x192231(0x1fa)])clearInterval(this[_0x192231(0x1fa)]);if(this[_0x192231(0x249)])this['ltmJob'][_0x192231(0x1c9)]();if(this[_0x192231(0x1f7)])this['modeResetJob']['cancel']();if(this['briefingJob'])this['briefingJob'][_0x192231(0x1c9)]();recorder[_0x192231(0x2b4)](this),pythonBridge[_0x192231(0x218)](this),_0x324e27();}async[a0_0x341954(0x1bc)](_0x548a35,_0x38721b){const _0x5761af=a0_0x341954;if(!_0x38721b||this[_0x5761af(0x238)])return;if(_0x548a35[_0x5761af(0x285)](_0x5761af(0x25c))&&_0x548a35[_0x5761af(0x2b6)]('communicate.request')&&_0x38721b[_0x5761af(0x1eb)])return;if(_0x548a35===this['namespace']+_0x5761af(0x276)){if(_0x38721b['val']&&Object[_0x5761af(0x244)](setup[_0x5761af(0x219)])['includes'](_0x38721b[_0x5761af(0x1eb)])){this[_0x5761af(0x27e)]=_0x38721b[_0x5761af(0x1eb)];if(_0x38721b[_0x5761af(0x1eb)]===setup[_0x5761af(0x219)][_0x5761af(0x221)])await recorder['setPresence'](this,![]);else await recorder[_0x5761af(0x269)](this,!![]);if(this['isProVersion']){let _0x4e953f=![],_0x112882=0x0,_0x3bea53=_0x5761af(0x2bf);if(this['currentSystemMode']===_0x5761af(0x2c5))_0x4e953f=!![],_0x112882=0x168,_0x3bea53=_0x5761af(0x22a);else this[_0x5761af(0x27e)]===_0x5761af(0x229)&&(_0x4e953f=!![],_0x112882=0x5a0,_0x3bea53=_0x5761af(0x26e));pythonBridge[_0x5761af(0x2af)](this,_0x5761af(0x28c),{'active':_0x4e953f,'duration':_0x112882,'label':_0x3bea53}),await this[_0x5761af(0x1d7)](_0x5761af(0x1f4),{'val':JSON['stringify']({'active':_0x4e953f,'label':_0x3bea53,'timestamp':Date[_0x5761af(0x24c)]()}),'ack':!![]});}}if(!_0x38721b['ack'])this['setState'](_0x548a35,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x38721b[_0x5761af(0x1e8)]){if(_0x548a35[_0x5761af(0x285)]('analysis.trigger')&&_0x38721b[_0x5761af(0x1eb)]){this['setState'](_0x548a35,{'val':![],'ack':!![]}),aiAgent[_0x5761af(0x1cc)](this);return;}if(_0x548a35['includes']('triggerDailyDigest')&&_0x38721b[_0x5761af(0x1eb)]){this['setState'](_0x548a35,{'val':![],'ack':!![]});if(this[_0x5761af(0x237)])aiAgent['createDailyDigest'](this,pythonBridge);return;}if(_0x548a35[_0x5761af(0x285)](_0x5761af(0x1b1))&&_0x38721b['val']){this[_0x5761af(0x222)](_0x548a35,{'val':![],'ack':!![]}),aiAgent[_0x5761af(0x251)](this);return;}if(_0x548a35[_0x5761af(0x285)](_0x5761af(0x1c4))&&_0x38721b[_0x5761af(0x1eb)]){this[_0x5761af(0x222)](_0x548a35,{'val':![],'ack':!![]}),aiAgent[_0x5761af(0x1dd)](this);return;}if(_0x548a35[_0x5761af(0x285)](_0x5761af(0x1c5))&&_0x38721b[_0x5761af(0x1eb)]){this['setState'](_0x548a35,{'val':![],'ack':!![]});if(this[_0x5761af(0x237)])try{const _0x4a80fd=await this[_0x5761af(0x1fb)](_0x5761af(0x239));if(_0x4a80fd&&_0x4a80fd[_0x5761af(0x1eb)]){const _0x5a13a5=JSON[_0x5761af(0x26d)](_0x4a80fd[_0x5761af(0x1eb)]);this[_0x5761af(0x1d7)](_0x5761af(0x28d),{'val':_0x5761af(0x26b),'ack':!![]}),pythonBridge[_0x5761af(0x2af)](this,_0x5761af(0x2bd),{'sequences':_0x5a13a5});}}catch(_0x5b4da0){}return;}if(_0x548a35['includes'](_0x5761af(0x2c2))&&_0x38721b[_0x5761af(0x1eb)]){this[_0x5761af(0x222)](_0x548a35,{'val':![],'ack':!![]});if(this[_0x5761af(0x237)])try{const _0x402f32=await this[_0x5761af(0x1fb)](_0x5761af(0x284));if(_0x402f32&&_0x402f32[_0x5761af(0x1eb)])pythonBridge[_0x5761af(0x2af)](this,_0x5761af(0x27b),{'digests':JSON[_0x5761af(0x26d)](_0x402f32[_0x5761af(0x1eb)])});}catch(_0x36041d){}return;}if(_0x548a35['includes'](_0x5761af(0x29b))&&_0x38721b[_0x5761af(0x1eb)]){this[_0x5761af(0x222)](_0x548a35,{'val':![],'ack':!![]});if(this[_0x5761af(0x237)])try{const _0x4ad1a4=await this[_0x5761af(0x1fb)](_0x5761af(0x24e));if(_0x4ad1a4&&_0x4ad1a4['val'])pythonBridge[_0x5761af(0x2af)](this,_0x5761af(0x264),{'points':JSON[_0x5761af(0x26d)](_0x4ad1a4[_0x5761af(0x1eb)])});}catch(_0x108e5f){}return;}if(_0x548a35[_0x5761af(0x285)]('analysis.training.triggerComfort')&&_0x38721b['val']){this[_0x5761af(0x222)](_0x548a35,{'val':![],'ack':!![]});if(this[_0x5761af(0x237)])try{const _0x5c73e0=await this[_0x5761af(0x1fb)](_0x5761af(0x2a1));if(_0x5c73e0&&_0x5c73e0['val'])pythonBridge[_0x5761af(0x2af)](this,_0x5761af(0x259),{'events':JSON[_0x5761af(0x26d)](_0x5c73e0['val'])});}catch(_0x38ea48){}return;}if(_0x548a35[_0x5761af(0x285)](_0x5761af(0x275))&&_0x38721b['val']){this[_0x5761af(0x222)](_0x548a35,{'val':![],'ack':!![]}),topology[_0x5761af(0x1d8)](this);return;}}if(this[_0x5761af(0x210)]['presenceDevices']&&this[_0x5761af(0x210)][_0x5761af(0x24d)][_0x5761af(0x285)](_0x548a35)){await this[_0x5761af(0x1b0)]();return;}const _0x110251=(this[_0x5761af(0x210)][_0x5761af(0x209)]||[])[_0x5761af(0x274)](_0x420958=>_0x420958['id']===_0x548a35);if(_0x110251){const _0x555d87=await recorder[_0x5761af(0x22f)](this,_0x548a35,_0x38721b,_0x110251);_0x555d87&&_0x555d87[_0x5761af(0x226)]===_0x5761af(0x21d)&&_0x555d87['location']&&this[_0x5761af(0x237)]&&deadMan[_0x5761af(0x263)](this,_0x555d87[_0x5761af(0x271)]),(_0x110251[_0x5761af(0x226)]===_0x5761af(0x28b)||_0x110251[_0x5761af(0x226)]===_0x5761af(0x24a))&&automation[_0x5761af(0x216)](this);}}async[a0_0x341954(0x1ce)](_0x4b7b45){const _0x44f2b1=a0_0x341954;if(typeof _0x4b7b45===_0x44f2b1(0x1c6)&&_0x4b7b45[_0x44f2b1(0x281)]){if(_0x4b7b45[_0x44f2b1(0x2ad)]==='checkThermostats')try{const _0x1118b9=await automation[_0x44f2b1(0x202)](this);this[_0x44f2b1(0x23a)](_0x4b7b45['from'],_0x4b7b45[_0x44f2b1(0x2ad)],{'success':!![],'results':_0x1118b9},_0x4b7b45['callback']);}catch(_0x2d114b){this[_0x44f2b1(0x23a)](_0x4b7b45['from'],_0x4b7b45['command'],{'success':![],'error':_0x2d114b[_0x44f2b1(0x281)]},_0x4b7b45[_0x44f2b1(0x1d3)]);}else{if(_0x4b7b45[_0x44f2b1(0x2ad)]===_0x44f2b1(0x1cb))try{const {current_temps:_0x3cf441,t_out:_0x3eb9ab,targets:_0x3eab87,t_forecast:_0x26beac}=_0x4b7b45[_0x44f2b1(0x281)],_0x48ccab=[];let _0x4ef969={};try{const _0x2dc6c7=await this[_0x44f2b1(0x1fb)](_0x44f2b1(0x25d));if(_0x2dc6c7&&_0x2dc6c7['val']){const _0x10ae66=JSON['parse'](_0x2dc6c7[_0x44f2b1(0x1eb)]);_0x4ef969=_0x10ae66[_0x44f2b1(0x2b7)]||_0x10ae66;}}catch(_0x48c4bc){}const _0x458f85=_0x26beac!==undefined&&_0x26beac!==null?(_0x3eb9ab+_0x26beac)/0x2:_0x3eb9ab;for(const [_0x3e0988,_0xb2236b]of Object['entries'](_0x3cf441)){const _0x5a4861=_0x3eab87[_0x3e0988]||0x15;if(_0xb2236b<=_0x5a4861)continue;let _0x18a6fd=_0x4ef969[_0x3e0988]||-0.5;if(_0x18a6fd>=0x0)_0x18a6fd=-0.5;const _0x3a4bfc=Math[_0x44f2b1(0x2a7)](_0x18a6fd),_0x225365=_0xb2236b-_0x5a4861;let _0x27ac2a=Math[_0x44f2b1(0x1f9)](_0x225365/_0x3a4bfc*0x3c);const _0x1c92ad=_0xb2236b-_0x3eb9ab,_0x709602=_0xb2236b-_0x458f85;if(_0x709602!==0x0&&_0x1c92ad!==0x0){const _0x50bd70=_0x1c92ad/_0x709602;_0x27ac2a=Math[_0x44f2b1(0x1f9)](_0x27ac2a*_0x50bd70);}if(_0x27ac2a>0xf){if(_0x27ac2a>0xf0)_0x27ac2a=0xf0;_0x48ccab[_0x44f2b1(0x2a5)]({'room':_0x3e0988,'minutes_safe':_0x27ac2a,'target':_0x5a4861,'current':_0xb2236b,'savings_msg':_0x44f2b1(0x232)+_0x27ac2a+'\x20min\x20ausbleiben.'});}}_0x48ccab['sort']((_0x56d8fb,_0x100406)=>_0x100406[_0x44f2b1(0x215)]-_0x56d8fb[_0x44f2b1(0x215)]),this['sendTo'](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45['command'],{'success':!![],'proposals':_0x48ccab},_0x4b7b45[_0x44f2b1(0x1d3)]);}catch(_0x2ed7f6){this[_0x44f2b1(0x23a)](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45[_0x44f2b1(0x2ad)],{'success':![],'error':_0x2ed7f6[_0x44f2b1(0x281)]},_0x4b7b45[_0x44f2b1(0x1d3)]);}else{if(_0x4b7b45['command']==='resetRLPenalty')try{const _0x4d467e=_0x4b7b45[_0x44f2b1(0x281)][_0x44f2b1(0x22c)],_0x461de9=_0x44f2b1(0x227),_0x190228=await this[_0x44f2b1(0x1fb)](_0x461de9);let _0x36003f={};if(_0x190228&&_0x190228['val'])try{_0x36003f=JSON['parse'](_0x190228[_0x44f2b1(0x1eb)]);}catch(_0x419807){}_0x4d467e&&_0x36003f[_0x4d467e]?(delete _0x36003f[_0x4d467e],await this[_0x44f2b1(0x1d7)](_0x461de9,{'val':JSON[_0x44f2b1(0x1b3)](_0x36003f),'ack':!![]}),this['log']['info'](_0x44f2b1(0x21c)+_0x4d467e+'\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.'),this[_0x44f2b1(0x23a)](_0x4b7b45['from'],_0x4b7b45[_0x44f2b1(0x2ad)],{'success':!![]},_0x4b7b45[_0x44f2b1(0x1d3)])):this[_0x44f2b1(0x23a)](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45[_0x44f2b1(0x2ad)],{'success':![],'error':_0x44f2b1(0x273)},_0x4b7b45['callback']);}catch(_0x3a3704){this[_0x44f2b1(0x23a)](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45[_0x44f2b1(0x2ad)],{'success':![],'error':_0x3a3704[_0x44f2b1(0x281)]},_0x4b7b45['callback']);}else{if(_0x4b7b45[_0x44f2b1(0x2ad)]==='dismissAutomation')await this[_0x44f2b1(0x1d7)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),await this[_0x44f2b1(0x1d7)](_0x44f2b1(0x254),{'val':'','ack':!![]}),await this[_0x44f2b1(0x1d7)](_0x44f2b1(0x29a),{'val':'','ack':!![]}),this[_0x44f2b1(0x23a)](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45[_0x44f2b1(0x2ad)],{'success':!![]},_0x4b7b45[_0x44f2b1(0x1d3)]);else{if(_0x4b7b45['command']===_0x44f2b1(0x1af)){const {targetId:_0x48c66a,targetValue:_0x447f7f}=_0x4b7b45['message'];await this[_0x44f2b1(0x1d7)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0x44f2b1(0x1d7)]('analysis.automation.description',{'val':_0x44f2b1(0x1dc),'ack':!![]}),await this[_0x44f2b1(0x1d7)](_0x44f2b1(0x29a),{'val':_0x48c66a,'ack':!![]}),await this[_0x44f2b1(0x1d7)]('analysis.automation.targetValue',{'val':String(_0x447f7f),'ack':!![]}),this[_0x44f2b1(0x23a)](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45['command'],{'success':!![]},_0x4b7b45[_0x44f2b1(0x1d3)]);}else{if(_0x4b7b45[_0x44f2b1(0x2ad)]==='testApiKey')try{const _0x28a058=_0x4b7b45[_0x44f2b1(0x281)][_0x44f2b1(0x1c8)];if(!_0x28a058)throw new Error('Kein\x20API\x20Key\x20Ã¼bergeben');const _0x45be80=new GoogleGenerativeAI(_0x28a058),_0x3be083=_0x45be80[_0x44f2b1(0x2c3)]({'model':GEMINI_MODEL}),_0x13854e=await _0x3be083[_0x44f2b1(0x2be)]('Test'),_0x4a939c=await _0x13854e['response'];if(_0x4a939c[_0x44f2b1(0x25b)]())this[_0x44f2b1(0x23a)](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45[_0x44f2b1(0x2ad)],{'success':!![],'message':_0x44f2b1(0x1f6)},_0x4b7b45[_0x44f2b1(0x1d3)]);else throw new Error(_0x44f2b1(0x1c3));}catch(_0xd8c98f){this[_0x44f2b1(0x23a)](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45[_0x44f2b1(0x2ad)],{'success':![],'message':_0xd8c98f[_0x44f2b1(0x281)]},_0x4b7b45['callback']);}else{if(_0x4b7b45['command']===_0x44f2b1(0x1bd))try{const _0x57bd9d=await scanner[_0x44f2b1(0x213)](this,_0x4b7b45[_0x44f2b1(0x281)]||{});this[_0x44f2b1(0x23a)](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45[_0x44f2b1(0x2ad)],{'success':!![],'devices':_0x57bd9d},_0x4b7b45[_0x44f2b1(0x1d3)]);}catch(_0x4681b3){this[_0x44f2b1(0x23a)](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45[_0x44f2b1(0x2ad)],{'success':![],'error':_0x4681b3[_0x44f2b1(0x281)]},_0x4b7b45[_0x44f2b1(0x1d3)]);}else{if(_0x4b7b45['command']===_0x44f2b1(0x1c2))try{const {matrix:_0xaeb22b}=_0x4b7b45[_0x44f2b1(0x281)],_0x1ad9c0=await this[_0x44f2b1(0x1fb)](_0x44f2b1(0x201));if(_0x1ad9c0&&_0x1ad9c0[_0x44f2b1(0x1eb)]){const _0x48eeda=JSON[_0x44f2b1(0x26d)](_0x1ad9c0[_0x44f2b1(0x1eb)]);_0x48eeda['matrix']=_0xaeb22b,_0x48eeda['updated']=Date[_0x44f2b1(0x24c)](),await this[_0x44f2b1(0x1d7)](_0x44f2b1(0x201),{'val':JSON[_0x44f2b1(0x1b3)](_0x48eeda),'ack':!![]}),pythonBridge['send'](this,'SET_TOPOLOGY',_0x48eeda);}this[_0x44f2b1(0x23a)](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45[_0x44f2b1(0x2ad)],{'success':!![]},_0x4b7b45[_0x44f2b1(0x1d3)]);}catch(_0x114a3b){this[_0x44f2b1(0x257)][_0x44f2b1(0x1f8)](_0x114a3b);}else{if(_0x4b7b45['command']===_0x44f2b1(0x1ba))this[_0x44f2b1(0x23a)](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45[_0x44f2b1(0x2ad)],{'success':!![],'dailyDigests':this['dailyDigests']||[],'analysisHistory':this[_0x44f2b1(0x235)]||[]},_0x4b7b45[_0x44f2b1(0x1d3)]);else{if(_0x4b7b45[_0x44f2b1(0x2ad)]===_0x44f2b1(0x287)){const _0x490719=this[_0x44f2b1(0x288)][_0x44f2b1(0x2a6)],_0x143d18=new Array(0x18)[_0x44f2b1(0x228)](0x0),_0x93f2f0=new Date()[_0x44f2b1(0x27c)](0x0,0x0,0x0,0x0);this['eventHistory']&&this[_0x44f2b1(0x258)][_0x44f2b1(0x2a0)](_0x5115a8=>{const _0x2ecdd5=_0x44f2b1;if(_0x5115a8[_0x2ecdd5(0x20c)]>=_0x93f2f0){const _0x58446f=new Date(_0x5115a8[_0x2ecdd5(0x20c)])[_0x2ecdd5(0x1f3)]();if(_0x58446f>=0x0&&_0x58446f<0x18)_0x143d18[_0x58446f]++;}});let _0x27996e=![],_0x23935a='',_0x11c3f2='',_0x3d9c89='';try{const _0x290b83=await this['getStateAsync'](_0x44f2b1(0x29c));if(_0x290b83&&_0x290b83[_0x44f2b1(0x1eb)]){_0x27996e=!![];const _0x1e3814=await this[_0x44f2b1(0x1fb)]('analysis.automation.description');_0x23935a=_0x1e3814?_0x1e3814[_0x44f2b1(0x1eb)]:'';const _0x190ba9=await this[_0x44f2b1(0x1fb)](_0x44f2b1(0x29a));_0x11c3f2=_0x190ba9?_0x190ba9[_0x44f2b1(0x1eb)]:'';const _0x34dc29=await this[_0x44f2b1(0x1fb)](_0x44f2b1(0x1b7));_0x3d9c89=_0x34dc29?_0x34dc29[_0x44f2b1(0x1eb)]:'';}}catch(_0x7375d9){}const _0x2cddfe=await this[_0x44f2b1(0x29e)](),_0x59fac1=(this['config']['devices']||[])[_0x44f2b1(0x231)](_0x5ed302=>_0x5ed302[_0x44f2b1(0x2c4)]),_0x17fde9=_0x2cddfe&&_0x59fac1;this[_0x44f2b1(0x23a)](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45[_0x44f2b1(0x2ad)],{'success':!![],'eventHistory':this[_0x44f2b1(0x258)]['slice'](0x0,0xf),'stats':{'digestCount':_0x490719,'isPresent':this[_0x44f2b1(0x23d)],'hourlyActivity':_0x143d18,'solarActive':_0x17fde9},'automation':{'detected':_0x27996e,'description':_0x23935a,'targetId':_0x11c3f2,'targetValue':_0x3d9c89}},_0x4b7b45['callback']);}else{if(_0x4b7b45[_0x44f2b1(0x2ad)]==='getEnums'){const _0x5eda0d=await this[_0x44f2b1(0x270)](_0x44f2b1(0x2bb),_0x44f2b1(0x28f)),_0x53b97a=[];if(_0x5eda0d)for(const _0x42a2ac in _0x5eda0d){const _0x31842d=_0x5eda0d[_0x42a2ac],_0x47ece2=(_0x31842d['common']&&typeof _0x31842d['common'][_0x44f2b1(0x1f1)]===_0x44f2b1(0x1c6)?_0x31842d[_0x44f2b1(0x223)]['name']['de']:_0x31842d[_0x44f2b1(0x223)][_0x44f2b1(0x1f1)])||_0x31842d['common'][_0x44f2b1(0x1f1)];_0x53b97a[_0x44f2b1(0x2a5)]({'id':_0x42a2ac,'name':_0x47ece2});}const _0x19b59a=await this[_0x44f2b1(0x270)](_0x44f2b1(0x297),_0x44f2b1(0x28f)),_0x5f2a71=[];if(_0x19b59a)for(const _0x4c56ad in _0x19b59a){const _0xa3ab87=_0x19b59a[_0x4c56ad],_0x992065=(_0xa3ab87[_0x44f2b1(0x223)]&&typeof _0xa3ab87[_0x44f2b1(0x223)][_0x44f2b1(0x1f1)]===_0x44f2b1(0x1c6)?_0xa3ab87[_0x44f2b1(0x223)]['name']['de']:_0xa3ab87['common'][_0x44f2b1(0x1f1)])||_0x4c56ad['split']('.')[_0x44f2b1(0x1bb)]();_0x5f2a71[_0x44f2b1(0x2a5)](_0x992065);}this[_0x44f2b1(0x23a)](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45[_0x44f2b1(0x2ad)],{'success':!![],'enums':_0x53b97a,'rooms':_0x5f2a71},_0x4b7b45[_0x44f2b1(0x1d3)]);}else{if(_0x4b7b45[_0x44f2b1(0x2ad)]===_0x44f2b1(0x1d4))try{let _0xa5b9da=_0x44f2b1(0x2b2),_0x282671=_0x44f2b1(0x1c1);if(this[_0x44f2b1(0x210)][_0x44f2b1(0x1e9)]){const _0x5469df=await recorder[_0x44f2b1(0x25e)](this);_0xa5b9da=_0x5469df!==null?_0x5469df+'Â°C':_0x44f2b1(0x250);}if(this[_0x44f2b1(0x210)][_0x44f2b1(0x20e)]){const _0x42d398=await this[_0x44f2b1(0x243)](_0x44f2b1(0x20b)+this[_0x44f2b1(0x210)]['calendarInstance']);_0x282671=_0x42d398?_0x44f2b1(0x25a):_0x44f2b1(0x24f);}this[_0x44f2b1(0x23a)](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45[_0x44f2b1(0x2ad)],{'success':!![],'weather':_0xa5b9da,'calendar':_0x282671},_0x4b7b45[_0x44f2b1(0x1d3)]);}catch(_0x3a83c2){this['sendTo'](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45['command'],{'success':![],'error':_0x3a83c2[_0x44f2b1(0x281)]},_0x4b7b45['callback']);}else{if(_0x4b7b45[_0x44f2b1(0x2ad)]==='getCalendarNames')try{const _0x5be49b=_0x4b7b45['message'][_0x44f2b1(0x1da)],_0x3dcc59=await this[_0x44f2b1(0x27a)](_0x5be49b+_0x44f2b1(0x1b6));let _0x21b253=[];if(_0x3dcc59&&_0x3dcc59[_0x44f2b1(0x1eb)]){const _0xe2a5a9=JSON[_0x44f2b1(0x26d)](_0x3dcc59[_0x44f2b1(0x1eb)]),_0x4690ab=new Set();Array[_0x44f2b1(0x294)](_0xe2a5a9)&&_0xe2a5a9[_0x44f2b1(0x2a0)](_0xfde603=>{const _0x3cd619=_0x44f2b1;if(_0xfde603[_0x3cd619(0x2aa)])_0x4690ab[_0x3cd619(0x23b)](_0xfde603[_0x3cd619(0x2aa)]);else{if(_0xfde603['calendarName'])_0x4690ab[_0x3cd619(0x23b)](_0xfde603[_0x3cd619(0x2ba)]);}}),_0x21b253=Array['from'](_0x4690ab)[_0x44f2b1(0x2c1)]();}if(_0x21b253[_0x44f2b1(0x2a6)]===0x0)_0x21b253=[_0x44f2b1(0x2b5)];this[_0x44f2b1(0x23a)](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45[_0x44f2b1(0x2ad)],{'success':!![],'names':_0x21b253},_0x4b7b45[_0x44f2b1(0x1d3)]);}catch(_0x1f7218){this['sendTo'](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45[_0x44f2b1(0x2ad)],{'success':![],'error':_0x1f7218['message']},_0x4b7b45[_0x44f2b1(0x1d3)]);}else{if(_0x4b7b45[_0x44f2b1(0x2ad)]==='testNotification')try{await setup['sendNotification'](this,_0x44f2b1(0x28e),![],![]),this[_0x44f2b1(0x23a)](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45[_0x44f2b1(0x2ad)],{'success':!![],'message':_0x44f2b1(0x1ee)},_0x4b7b45['callback']);}catch(_0x43912c){this[_0x44f2b1(0x257)]['error'](_0x44f2b1(0x290)+_0x43912c[_0x44f2b1(0x281)]),this[_0x44f2b1(0x23a)](_0x4b7b45[_0x44f2b1(0x1e1)],_0x4b7b45[_0x44f2b1(0x2ad)],{'success':![],'message':_0x44f2b1(0x1de)+_0x43912c[_0x44f2b1(0x281)]},_0x4b7b45[_0x44f2b1(0x1d3)]);}}}}}}}}}}}}}}}}async[a0_0x341954(0x292)](){const _0x212444=a0_0x341954;try{const _0x5687a2=await this[_0x212444(0x1fb)](setup[_0x212444(0x2a4)]);_0x5687a2&&_0x5687a2[_0x212444(0x1eb)]&&Object[_0x212444(0x244)](setup[_0x212444(0x219)])['includes'](_0x5687a2['val'])?this[_0x212444(0x27e)]=_0x5687a2[_0x212444(0x1eb)]:(this[_0x212444(0x27e)]=setup['SYSTEM_MODES']['NORMAL'],await this['setStateAsync'](setup[_0x212444(0x2a4)],{'val':setup['SYSTEM_MODES']['NORMAL'],'ack':!![]}));}catch(_0x4ad03e){this[_0x212444(0x27e)]=setup[_0x212444(0x219)][_0x212444(0x22e)];}}async[a0_0x341954(0x1b0)](){const _0x5e0dd1=a0_0x341954;try{const _0x56bf3b=this[_0x5e0dd1(0x210)][_0x5e0dd1(0x24d)]||[];let _0x487e94=![];const _0x17c1fb=[];for(const _0x4be978 of _0x56bf3b){try{const _0x25aca1=await this[_0x5e0dd1(0x27a)](_0x4be978);_0x25aca1&&(_0x25aca1[_0x5e0dd1(0x1eb)]===!![]||_0x25aca1[_0x5e0dd1(0x1eb)]===_0x5e0dd1(0x26c)||_0x25aca1['val']===0x1)&&(_0x487e94=!![],_0x17c1fb[_0x5e0dd1(0x2a5)](_0x4be978));}catch(_0x9d524d){}}return await this[_0x5e0dd1(0x1d7)](_0x5e0dd1(0x200),{'val':_0x17c1fb[_0x5e0dd1(0x1b8)](',\x20'),'ack':!![]}),_0x487e94&&(this['exitTimer']&&(this['log'][_0x5e0dd1(0x212)](_0x5e0dd1(0x1d9)),recorder['abortExitTimer'](this)),!this[_0x5e0dd1(0x23d)]&&this['currentSystemMode']===setup[_0x5e0dd1(0x219)][_0x5e0dd1(0x22e)]&&await recorder[_0x5e0dd1(0x269)](this,!![])),_0x487e94;}catch(_0x58d2d6){return![];}}async[a0_0x341954(0x1fd)](){const _0x2e33c5=a0_0x341954;this[_0x2e33c5(0x257)]['debug']('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await aiAgent['runGeminiAnalysis'](this),this[_0x2e33c5(0x293)](),this[_0x2e33c5(0x242)](),this[_0x2e33c5(0x2b0)]();}async[a0_0x341954(0x29e)](){const _0x3ef299=a0_0x341954,_0x50db49=[_0x3ef299(0x277),_0x3ef299(0x1ed),_0x3ef299(0x246)],_0xf75fe1=[_0x3ef299(0x1ec),_0x3ef299(0x280),_0x3ef299(0x1e6)];for(const _0x593aeb of _0x50db49){for(const _0xb4e744 of _0xf75fe1){try{const _0x473a23=_0x593aeb+'.'+_0xb4e744,_0x3e8b57=await this[_0x3ef299(0x27a)](_0x473a23);if(_0x3e8b57&&_0x3e8b57['val']){const _0x1096b7=String(_0x3e8b57[_0x3ef299(0x1eb)])[_0x3ef299(0x2a3)]();if(_0x1096b7['includes'](_0x3ef299(0x1e5))||_0x1096b7[_0x3ef299(0x285)](_0x3ef299(0x203))||_0x1096b7[_0x3ef299(0x285)](_0x3ef299(0x267))||_0x1096b7[_0x3ef299(0x285)]('clear')||_0x1096b7[_0x3ef299(0x285)]('heiter'))return!![];}}catch(_0x5e189b){}}}return![];}[a0_0x341954(0x242)](){const _0x47b7bd=a0_0x341954;if(!this['isProVersion'])return;try{this[_0x47b7bd(0x21a)]('LTM.trainingData.sequences',(_0x4d122b,_0x13d3cf)=>{const _0x2e6541=_0x47b7bd;_0x13d3cf&&_0x13d3cf[_0x2e6541(0x1eb)]&&pythonBridge[_0x2e6541(0x2af)](this,_0x2e6541(0x1e2),{'sequences':JSON[_0x2e6541(0x26d)](_0x13d3cf[_0x2e6541(0x1eb)])});});}catch(_0x349e6b){}}async[a0_0x341954(0x2b0)](){const _0x4b2aa7=a0_0x341954;if(!this[_0x4b2aa7(0x237)])return;try{const _0x29be28=await recorder[_0x4b2aa7(0x25e)](this);if(_0x29be28===null)return;const _0x26da72={},_0x151340={},_0xab4b5f=this[_0x4b2aa7(0x210)][_0x4b2aa7(0x209)]||[];for(const _0x5dda0d of _0xab4b5f){if(_0x5dda0d['type']===_0x4b2aa7(0x28b)&&_0x5dda0d['location']){const _0x399ec7=this[_0x4b2aa7(0x240)][_0x5dda0d['id']];if(_0x399ec7!==undefined)_0x26da72[_0x5dda0d['location']]=_0x399ec7;if(_0x5dda0d['isSolar'])_0x151340[_0x5dda0d['location']]=!![];}}const _0x17bc8f=await this[_0x4b2aa7(0x29e)]();let _0x364e9f={};try{const _0x6ef76e=await this[_0x4b2aa7(0x1fb)](_0x4b2aa7(0x1e0));if(_0x6ef76e&&_0x6ef76e[_0x4b2aa7(0x1eb)])_0x364e9f=JSON[_0x4b2aa7(0x26d)](_0x6ef76e[_0x4b2aa7(0x1eb)]);}catch(_0x47c170){}Object[_0x4b2aa7(0x296)](_0x26da72)[_0x4b2aa7(0x2a6)]>0x0&&(pythonBridge[_0x4b2aa7(0x2af)](this,_0x4b2aa7(0x266),{'current_temps':_0x26da72,'t_out':_0x29be28,'is_sunny':_0x17bc8f,'solar_flags':_0x151340,'warmup_targets':_0x364e9f}),pythonBridge[_0x4b2aa7(0x2af)](this,'OPTIMIZE_ENERGY',{'current_temps':_0x26da72,'t_out':_0x29be28,'targets':{}}));}catch(_0x11c15c){}}['updateHealthVector'](){const _0xf94938=a0_0x341954;if(!this[_0xf94938(0x253)]||this['rawEventLog']['length']===0x0)return;const _0x230703=new Array(0x60)[_0xf94938(0x228)](0x0),_0x30bcd3=new Date()[_0xf94938(0x27c)](0x0,0x0,0x0,0x0);this['rawEventLog'][_0xf94938(0x2a0)](_0x2e6265=>{const _0x23b11c=_0xf94938,_0x186a4f=new Date(_0x2e6265['timestamp']);if(_0x186a4f[_0x23b11c(0x220)]()>=_0x30bcd3){const _0x35971d=_0x186a4f[_0x23b11c(0x1f3)](),_0x5ece3f=_0x186a4f['getMinutes'](),_0x52b1ed=_0x35971d*0x4+Math[_0x23b11c(0x1f9)](_0x5ece3f/0xf);if(_0x52b1ed>=0x0&&_0x52b1ed<0x60)_0x230703[_0x52b1ed]++;}}),this[_0xf94938(0x1d7)](_0xf94938(0x247),{'val':JSON[_0xf94938(0x1b3)](_0x230703),'ack':!![]});}[a0_0x341954(0x1b9)](){const _0x2e1470=a0_0x341954;if(!this[_0x2e1470(0x288)]||this[_0x2e1470(0x288)][_0x2e1470(0x2a6)]<0x2)return;const _0x1a1a37=this[_0x2e1470(0x288)][_0x2e1470(0x1d1)](_0x24bbaa=>{const _0x5e487b=(_0x24bbaa['activityLevel']||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x5e487b]||0x32;});pythonBridge[_0x2e1470(0x2af)](this,_0x2e1470(0x217),{'values':_0x1a1a37,'tag':_0x2e1470(0x289)});}}if(require['main']!==module)module[a0_0x341954(0x1cd)]=_0x2753d1=>new CogniLiving(_0x2753d1);else new CogniLiving();