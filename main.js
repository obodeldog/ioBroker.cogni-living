const a0_0x121d89=a0_0x2fbc;(function(_0x540d1b,_0x3d58df){const _0x3e7913=a0_0x2fbc,_0x4aa918=_0x540d1b();while(!![]){try{const _0x272668=parseInt(_0x3e7913(0x1d7))/0x1*(parseInt(_0x3e7913(0x1cb))/0x2)+parseInt(_0x3e7913(0x305))/0x3+-parseInt(_0x3e7913(0x25d))/0x4*(parseInt(_0x3e7913(0x31f))/0x5)+-parseInt(_0x3e7913(0x327))/0x6+parseInt(_0x3e7913(0x2ed))/0x7+-parseInt(_0x3e7913(0x1ad))/0x8+-parseInt(_0x3e7913(0x1ec))/0x9*(-parseInt(_0x3e7913(0x1a3))/0xa);if(_0x272668===_0x3d58df)break;else _0x4aa918['push'](_0x4aa918['shift']());}catch(_0xf66b3){_0x4aa918['push'](_0x4aa918['shift']());}}}(a0_0xa691,0xcd2d0));const a0_0x5d71a0=(function(){let _0x8a0487=!![];return function(_0x1131d2,_0x240d78){const _0x2fd0a6=_0x8a0487?function(){if(_0x240d78){const _0x26e49f=_0x240d78['apply'](_0x1131d2,arguments);return _0x240d78=null,_0x26e49f;}}:function(){};return _0x8a0487=![],_0x2fd0a6;};}()),a0_0x1fb43b=a0_0x5d71a0(this,function(){const _0x49e15e=a0_0x2fbc;return a0_0x1fb43b[_0x49e15e(0x213)]()[_0x49e15e(0x25a)](_0x49e15e(0x2fb))[_0x49e15e(0x213)]()[_0x49e15e(0x2cc)](a0_0x1fb43b)[_0x49e15e(0x25a)](_0x49e15e(0x2fb));});a0_0x1fb43b();'use strict';const utils=require(a0_0x121d89(0x2ac)),{GoogleGenerativeAI}=require(a0_0x121d89(0x270)),{spawn}=require(a0_0x121d89(0x194)),path=require(a0_0x121d89(0x1f6)),fs=require('fs'),installer=require(a0_0x121d89(0x1a0)),scanner=require(a0_0x121d89(0x265)),schedulers=require(a0_0x121d89(0x1fa)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x121d89(0x19b),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x121d89(0x1e4),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x121d89(0x2a6),LTM_DP_TRIGGER_DIGEST=a0_0x121d89(0x24e),LTM_DP_BASELINE_STATUS=a0_0x121d89(0x209),LTM_DP_DRIFT_CHANNEL=a0_0x121d89(0x332),LTM_DP_DRIFT_STATUS=a0_0x121d89(0x1ce),LTM_DP_DRIFT_DETAILS=a0_0x121d89(0x225),LTM_DP_DRIFT_LAST_CHECK=a0_0x121d89(0x2fc),SYSTEM_DP_MODE=a0_0x121d89(0x2d6),SYSTEM_MODES={'NORMAL':'normal','VACATION':a0_0x121d89(0x191),'PARTY':a0_0x121d89(0x32c),'GUEST':a0_0x121d89(0x271)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x121d89(0x328)],SYSTEM_MODES[a0_0x121d89(0x2e1)]],PERSONA_MAPPING={'generic':a0_0x121d89(0x26c),'senior_aal':a0_0x121d89(0x1e8),'family':a0_0x121d89(0x278),'single_comfort':'Fokus\x20auf\x20Komfort.','security':a0_0x121d89(0x286)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x433745){const _0x5a1f02=a0_0x121d89;try{const _0x3a2c7d=[_0x5a1f02(0x23b),_0x5a1f02(0x30a)];for(const _0x4ceb68 of _0x3a2c7d){try{const _0x598927=await _0x433745[_0x5a1f02(0x21b)](_0x4ceb68);if(_0x598927)await _0x433745[_0x5a1f02(0x294)](_0x4ceb68);}catch(_0x661146){}}}catch(_0x420348){}}async function checkLicense(_0x25c061){return!![];}async function initHistory(_0x4d26f5){const _0x679505=a0_0x121d89;try{const _0x5ff7a4=await _0x4d26f5['getStateAsync'](_0x679505(0x32f));_0x5ff7a4&&_0x5ff7a4[_0x679505(0x23e)]&&(_0x4d26f5[_0x679505(0x287)]=JSON[_0x679505(0x2a9)](_0x5ff7a4['val'][_0x679505(0x213)]()));}catch(_0x2999fd){_0x4d26f5[_0x679505(0x287)]=[];}try{const _0x2c8287=await _0x4d26f5[_0x679505(0x1f1)](_0x679505(0x2f4));if(_0x2c8287&&_0x2c8287[_0x679505(0x23e)])_0x4d26f5['analysisHistory']=JSON[_0x679505(0x2a9)](_0x2c8287['val'][_0x679505(0x213)]());}catch(_0x4f2844){_0x4d26f5[_0x679505(0x2b8)]=[];}if(_0x4d26f5[_0x679505(0x287)]&&_0x4d26f5[_0x679505(0x287)]['length']>0x0){_0x4d26f5['log']['info'](_0x679505(0x2f9));for(let _0x4b2d47=_0x4d26f5[_0x679505(0x287)][_0x679505(0x230)]-0x1;_0x4b2d47>=0x0;_0x4b2d47--){const _0x53ea9c=_0x4d26f5['eventHistory'][_0x4b2d47];if(_0x53ea9c&&_0x53ea9c['id']!==undefined&&_0x53ea9c['value']!==undefined)_0x4d26f5['sensorLastValues'][_0x53ea9c['id']]=_0x53ea9c[_0x679505(0x2ad)];}}}async function initSystemConfig(_0x40dc88){const _0x5f3bb4=a0_0x121d89;try{const _0x4ecd1c=await _0x40dc88[_0x5f3bb4(0x21d)](_0x5f3bb4(0x269));if(_0x4ecd1c&&_0x4ecd1c[_0x5f3bb4(0x214)])_0x40dc88['systemConfig']={'latitude':_0x4ecd1c[_0x5f3bb4(0x214)][_0x5f3bb4(0x302)]||0x0,'longitude':_0x4ecd1c[_0x5f3bb4(0x214)][_0x5f3bb4(0x2f0)]||0x0,'city':_0x4ecd1c[_0x5f3bb4(0x214)][_0x5f3bb4(0x196)]||''};}catch(_0x2885d8){}}async function createAllObjects(_0x1a1abf){const _0x46e215=a0_0x121d89;await _0x1a1abf[_0x46e215(0x292)](_0x46e215(0x1d2),{'type':_0x46e215(0x2bb),'common':{'name':_0x46e215(0x29f)},'native':{}}),await _0x1a1abf[_0x46e215(0x292)](SYSTEM_DP_MODE,{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x2aa),'type':_0x46e215(0x30e),'role':_0x46e215(0x1bb),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x46e215(0x298)]},'native':{}}),await _0x1a1abf['setObjectNotExistsAsync'](_0x46e215(0x25b),{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x236),'type':_0x46e215(0x30e),'role':_0x46e215(0x295),'read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)](_0x46e215(0x247),{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x1e2),'type':_0x46e215(0x30e),'role':'json','read':!![],'write':![]},'native':{}}),await _0x1a1abf['setObjectNotExistsAsync'](_0x46e215(0x32f),{'type':_0x46e215(0x1bb),'common':{'name':'Event\x20History','type':_0x46e215(0x30e),'role':_0x46e215(0x29d),'read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x292)](_0x46e215(0x28d),{'type':_0x46e215(0x2bb),'common':{'name':_0x46e215(0x2f7)},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)]('analysis.training.triggerSecurity',{'type':'state','common':{'name':'Train\x20Security','type':_0x46e215(0x2a0),'role':_0x46e215(0x2fd),'read':!![],'write':!![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)](_0x46e215(0x210),{'type':'state','common':{'name':'Train\x20Health','type':'boolean','role':_0x46e215(0x2fd),'read':!![],'write':!![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)]('analysis.training.triggerEnergy',{'type':'state','common':{'name':_0x46e215(0x28c),'type':_0x46e215(0x2a0),'role':_0x46e215(0x2fd),'read':!![],'write':!![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)]('analysis.training.triggerComfort',{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x1c1),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)](_0x46e215(0x2b4),{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x19a),'type':_0x46e215(0x2a0),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)](_0x46e215(0x25e),{'type':_0x46e215(0x1bb),'common':{'name':'Training\x20Status','type':'string','role':_0x46e215(0x295),'read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x292)](_0x46e215(0x224),{'type':_0x46e215(0x2bb),'common':{'name':_0x46e215(0x28f)},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)]('analysis.security.lastScore',{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x1c2),'type':'number','role':_0x46e215(0x2ad),'read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)](_0x46e215(0x1e9),{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x22d),'type':'number','role':'value','read':!![],'write':![],'def':0.05},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)](_0x46e215(0x1cd),{'type':'state','common':{'name':_0x46e215(0x28b),'type':'string','role':_0x46e215(0x1f4),'read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)]('analysis.security.topologyMatrix',{'type':'state','common':{'name':_0x46e215(0x246),'type':_0x46e215(0x30e),'role':'json','read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x292)](_0x46e215(0x1d8),{'type':'channel','common':{'name':_0x46e215(0x2f8)},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)]('analysis.health.lastCheck',{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x28b),'type':_0x46e215(0x30e),'role':_0x46e215(0x1f4),'read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)]('analysis.health.isAnomaly',{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x2e6),'type':_0x46e215(0x2a0),'role':_0x46e215(0x289),'read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)](_0x46e215(0x20f),{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x307),'type':_0x46e215(0x30e),'role':_0x46e215(0x295),'read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)]('analysis.health.trendValue',{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x316),'type':_0x46e215(0x1f7),'role':_0x46e215(0x2ad),'read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)](_0x46e215(0x223),{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x2fe),'type':_0x46e215(0x30e),'role':_0x46e215(0x29d),'read':!![],'write':![]},'native':{}}),await _0x1a1abf['setObjectNotExistsAsync'](_0x46e215(0x1b1),{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x31c),'type':_0x46e215(0x1f7),'role':_0x46e215(0x2ad),'read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x292)](_0x46e215(0x202),{'type':_0x46e215(0x2bb),'common':{'name':_0x46e215(0x276)},'native':{}}),await _0x1a1abf['setObjectNotExistsAsync']('analysis.energy.insulationScore',{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x252),'type':_0x46e215(0x30e),'role':_0x46e215(0x295),'read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)](_0x46e215(0x306),{'type':'state','common':{'name':_0x46e215(0x1b7),'type':_0x46e215(0x30e),'role':'text','read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)](_0x46e215(0x2e2),{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x314),'type':_0x46e215(0x30e),'role':'json','read':!![],'write':![]},'native':{}}),await _0x1a1abf['extendObjectAsync']('LTM',{'type':'channel','common':{'name':_0x46e215(0x254)},'native':{}}),await _0x1a1abf[_0x46e215(0x292)](LTM_DP_RAW_LOG,{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x311),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x292)](LTM_DP_DAILY_DIGESTS,{'type':_0x46e215(0x1bb),'common':{'name':'Daily\x20Digests','type':_0x46e215(0x30e),'role':_0x46e215(0x29d),'read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)](_0x46e215(0x2fa),{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x1d1),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)]('LTM.trainingData.thermodynamics',{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x24d),'type':'string','role':_0x46e215(0x29d),'read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)]('analysis.trigger',{'type':'state','common':{'name':_0x46e215(0x31e),'type':_0x46e215(0x2a0),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x1a1abf['setObjectNotExistsAsync']('analysis.triggerBriefing',{'type':_0x46e215(0x1bb),'common':{'name':'Trigger\x20Briefing','type':_0x46e215(0x2a0),'role':_0x46e215(0x2fd),'read':!![],'write':!![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)](_0x46e215(0x190),{'type':'state','common':{'name':_0x46e215(0x253),'type':'boolean','role':_0x46e215(0x217),'read':!![],'write':![]},'native':{}}),await _0x1a1abf['setObjectNotExistsAsync'](_0x46e215(0x255),{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x25c),'type':_0x46e215(0x30e),'role':'text.alarm','read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)](_0x46e215(0x195),{'type':_0x46e215(0x1bb),'common':{'name':'Activity\x20Summary','type':_0x46e215(0x30e),'role':_0x46e215(0x295),'read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)](_0x46e215(0x1ea),{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x22b),'type':_0x46e215(0x2a0),'role':_0x46e215(0x289),'read':!![],'write':![]},'native':{}}),await _0x1a1abf['setObjectNotExistsAsync'](_0x46e215(0x243),{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x222),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)](_0x46e215(0x27d),{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x2c6),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)]('analysis.automation.targetId',{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x29b),'type':_0x46e215(0x30e),'role':_0x46e215(0x295),'read':!![],'write':![]},'native':{}}),await _0x1a1abf['setObjectNotExistsAsync'](_0x46e215(0x27e),{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x258),'type':'string','role':_0x46e215(0x295),'read':!![],'write':![]},'native':{}}),await _0x1a1abf['setObjectNotExistsAsync']('analysis.automation.autoApply',{'type':'state','common':{'name':_0x46e215(0x2ee),'type':_0x46e215(0x2a0),'role':_0x46e215(0x317),'read':!![],'write':!![]},'native':{}}),await _0x1a1abf[_0x46e215(0x2f1)](_0x46e215(0x212),{'type':_0x46e215(0x1bb),'common':{'name':_0x46e215(0x25f),'type':_0x46e215(0x2a0),'role':_0x46e215(0x2fd),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x11d914){const _0x36b064=a0_0x121d89;try{const _0x510a34=await _0x11d914[_0x36b064(0x1f1)](SYSTEM_DP_MODE);_0x510a34&&_0x510a34[_0x36b064(0x23e)]&&Object[_0x36b064(0x2ec)](SYSTEM_MODES)[_0x36b064(0x221)](_0x510a34[_0x36b064(0x23e)])?_0x11d914[_0x36b064(0x198)]=_0x510a34['val']:(_0x11d914['currentSystemMode']=SYSTEM_MODES[_0x36b064(0x298)],await _0x11d914['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x358312){_0x11d914['currentSystemMode']=SYSTEM_MODES[_0x36b064(0x298)];}}async function loadRawEventLog(_0x18e2ec){const _0x564563=a0_0x121d89;try{const _0x5ad619=await _0x18e2ec['getStateAsync'](LTM_DP_RAW_LOG);if(_0x5ad619&&_0x5ad619[_0x564563(0x23e)])_0x18e2ec['rawEventLog']=JSON['parse'](_0x5ad619[_0x564563(0x23e)]);}catch(_0x6d3025){_0x18e2ec[_0x564563(0x27a)]=[];}}async function saveRawEventLog(_0x378898){const _0x510573=a0_0x121d89;if(_0x378898['rawEventLog']['length']>RAW_LOG_MAX_SIZE)_0x378898[_0x510573(0x27a)][_0x510573(0x31a)](0x0,_0x378898['rawEventLog'][_0x510573(0x230)]-RAW_LOG_MAX_SIZE);await _0x378898[_0x510573(0x30b)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x378898[_0x510573(0x27a)]),'ack':!![]});}async function loadDailyDigests(_0x2e5c9f){const _0x1dac22=a0_0x121d89;try{const _0x2d7554=await _0x2e5c9f['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x2d7554&&_0x2d7554['val'])_0x2e5c9f[_0x1dac22(0x26b)]=JSON['parse'](_0x2d7554['val']);}catch(_0x309b10){_0x2e5c9f[_0x1dac22(0x26b)]=[];}await updateBaselineStatus(_0x2e5c9f);}async function saveDailyDigests(_0x32d0dd,_0xada980=!![]){const _0x468393=a0_0x121d89,_0x1a2d2e=_0x32d0dd['config']['ltmLtbWindowDays']||0x3c;_0x32d0dd['dailyDigests'][_0x468393(0x230)]>_0x1a2d2e&&_0x32d0dd[_0x468393(0x26b)]['splice'](0x0,_0x32d0dd[_0x468393(0x26b)]['length']-_0x1a2d2e);await _0x32d0dd[_0x468393(0x30b)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x468393(0x19e)](_0x32d0dd[_0x468393(0x26b)]),'ack':!![]});if(_0xada980)await updateBaselineStatus(_0x32d0dd);}async function updateAnalysisHistory(_0x335af8,_0x2e297e){const _0x28aa92=a0_0x121d89;_0x335af8[_0x28aa92(0x2b8)][_0x28aa92(0x20b)](_0x2e297e);if(_0x335af8[_0x28aa92(0x2b8)][_0x28aa92(0x230)]>HISTORY_MAX_SIZE)_0x335af8[_0x28aa92(0x2b8)][_0x28aa92(0x1b2)]();await _0x335af8['setStateAsync'](_0x28aa92(0x2f4),{'val':JSON[_0x28aa92(0x19e)](_0x335af8['analysisHistory']),'ack':!![]});}async function updateBaselineStatus(_0x3d16f6){const _0x18da88=a0_0x121d89;if(!_0x3d16f6[_0x18da88(0x218)]){await _0x3d16f6[_0x18da88(0x30b)](LTM_DP_BASELINE_STATUS,{'val':_0x18da88(0x2e5),'ack':!![]});return;}const _0x3062ae=_0x3d16f6['dailyDigests'][_0x18da88(0x230)]>=(_0x3d16f6[_0x18da88(0x2e7)][_0x18da88(0x1d3)]||0x7)?_0x18da88(0x24b)+_0x3d16f6[_0x18da88(0x26b)][_0x18da88(0x230)]+_0x18da88(0x323):_0x18da88(0x227)+_0x3d16f6[_0x18da88(0x26b)][_0x18da88(0x230)]+'/'+(_0x3d16f6['config']['minDaysForBaseline']||0x7)+')';await _0x3d16f6[_0x18da88(0x30b)](LTM_DP_BASELINE_STATUS,{'val':_0x3062ae,'ack':!![]});}async function initSensorSubscriptions(_0x1356f9){const _0x286212=a0_0x121d89,_0x29f1c5=_0x1356f9['config'][_0x286212(0x1b0)];if(_0x29f1c5)for(const _0x29483c of _0x29f1c5){await _0x1356f9[_0x286212(0x1be)](_0x29483c['id']);}}function a0_0xa691(){const _0x435f4d=['testApiKey','exports','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','constructor','isAlert','setupBriefingScheduler','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','N/A','getTime','âš ï¸\x20SECURITY\x20ALARM:\x20','Activity-Level','\x20->\x20','LTM.trainingData.thermodynamics','system.mode','unknown','motion','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','insulation','setState','communicate.request','response','Wetterdaten\x20deaktiviert.','sensorLastValues','Success:\x20','GUEST','analysis.energy.forecast','notifyTelegramEnabled','setHours','Deaktiviert\x20(Pro-Feature)','Anomaly\x20Detected','config','PYTHON_EXE','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','ready','analysis.energy.insulationScore','values','1243298UEDBEK','Auto\x20Apply','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','longitude','setObjectNotExistsAsync','onUnload','toLowerCase','analysis.analysisHistory','round','rule','AI\x20Training','Health\x20Analysis','Restoring\x20sensor\x20cache...','LTM.trainingData.sequences','(((.+)+)+)+$','LTM.driftAnalysis.lastCheck','button','Today\x20Vector\x20(15m)','close','apiKey','Gemini\x20Error:\x20','latitude','PONG','data','3371085TFEqmp','analysis.energy.heatingScore','Trend','cogni-living\x20adapter\x20starting\x20(v','activityLevel','events.history_debug_00','setStateAsync','analysis.trigger','\x20new\x20patterns.','string','confidence','Training\x20Error:\x20','Raw\x20Log','sendTo','success','Temperature\x20Forecast','endsWith','Trend\x20Value','switch','join','description','splice','analysisTimer','Gait\x20Speed\x20Trend','âœ…\x20HEALTH\x20TRAINED.','Trigger\x20Analysis','20aDvHiT','ANOMALY','enum.rooms.*','getGenerativeModel','\x20Tage)','outdoorSensorId','getOverviewData','TRAIN_SECURITY','4003158OJzOll','PARTY','toLocaleTimeString','TREND_RESULT','.\x20KONTEXT:\x20','party','OK:\x20','location','events.history','summary','automationProposal','LTM.driftAnalysis','getForeignStateAsync','TOPOLOGY_RESULT','analysis.isAlert','vacation','triggerDailyDigest','useWeather','child_process','analysis.activitySummary','city','Keine\x20Termine.','currentSystemMode','geminiApiKey','Build\x20Topology','models/gemini-flash-latest','TRAIN_HEALTH','Regel\x20erkannt:\x20','stringify','occupancy','./lib/installer','Error\x20launching\x20Python:\x20','lampe','40DKxRRa','genAI','Skipped\x20(No\x20AI\x20or\x20Data)','.forecast.current.state','modeResetJob','type','N/A\x20(Learning)','alertReason','ack','.communicate.request','3509184ICBSTN','.Current.Temperature','testContext','devices','analysis.health.gaitSpeed','pop','.\x20SYSTEM_MODE:\x20','ANALYZE_HEALTH','Err:\x20','Missing\x20data','Heating\x20Score','fill','map','service.py','state','name','toISOString','subscribeForeignStatesAsync','info','\x0aGrund:\x20','Train\x20Comfort','Anomaly\x20Score','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','ENERGY_TRAIN_RESULT','Briefing\x20Error:\x20','analysis.automation.targetId','schalter','getCalendarNames','bind','setupLtmScheduler','10600XbuwnD','version','analysis.security.lastCheck','LTM.driftAnalysis.baselineDrift','heating','stateChange','Sequences','system','minDaysForBaseline','licenseKey','getEnums','analysis.automation.autoApply','9DLNzrM','analysis.health','ðŸ§ \x20Triggering\x20Security\x20Training...','startsWith','lastAlertState','Unknown','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','ðŸ\x20Python\x20Pong','command','[RESULT]','accuweather','Last\x20raw\x20event','generateContent','LTM.rawEventLog','replace','targetValue','diagnosis','PRIORITÃ„T:\x20Gesundheit/AAL.','analysis.security.currentThreshold','analysis.automation.patternDetected','Success','4234203SVmMEj','livingContext','debug','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','Keine\x20Wetterdaten\x20verfÃ¼gbar.','getStateAsync','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','systemUUID','date','driftDetails','path','number','enum.functions.*','push','./lib/scheduler','isExit','Unbekannt','is_anomaly','onMessage','Kein\x20API\x20Key!','shift','isGracePeriodActive','analysis.energy','stdin','dependencyInstallInProgress','User\x20dismissed\x20automation\x20proposal.','temperatur','.\x20WETTER:\x20','BUILD_TOPOLOGY','LTM.baselineStatus','Failed:\x20','unshift','onStateChange','object','isPresent','analysis.health.trendDiagnosis','analysis.training.triggerHealth','payload','analysis.automation.triggerAction','toString','common','find','Keine\x20Details.','indicator.alarm','isProVersion','COMFORT_RESULT','unload','getObjectAsync','substring','getForeignObjectAsync','ANALYZE_SEQUENCE','baselineDrift','analysis.training.triggerEnergy','includes','Description','analysis.health.todayVector','analysis.security','LTM.driftAnalysis.driftDetails','targetId','Lernphase\x20(','checkAndInstall','filter','system.isPresent','Pattern\x20Detected','setupDriftAnalysisScheduler','Current\x20Threshold','getForeignObjectsAsync','Topology\x20Error:\x20','length','status','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','details','isEmergency','calendarInstance','Who\x20is\x20present?','analysis.training.triggerSecurity','inactivityThresholdHours','.\x20ANWESEND:\x20','analysis.security.lastScore','analysis.history_debug_00','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','temperature','val','autoApply','pythonProcess','HEALTH_TRAIN_RESULT','Adapter','analysis.automation.description','message','analysis.security.topologyMatrix','Topology\x20Matrix','events.lastEvent','analysis.training.triggerComfort','Kalender\x20deaktiviert.','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','Aktiv\x20(','getHours','Thermodynamics','LTM.triggerDailyDigest','[RECORDER]\x20Error:\x20','systemConfig','toFixed','Insulation\x20Score','Alert\x20Status','LTM','analysis.alertReason','Digest','telegram','Target\x20Value','error','search','system.presenceWho','Alert\x20Reason','1284636KrmLvy','analysis.training.status','Trigger\x20Action','.forecast.current.temperature','split','HEALTH_RESULT','No\x20instance','weatherunderground','./lib/scanner','from','.forecast.current.temp','cogni-living','system.config','application/json','dailyDigests','Analysiere\x20ausgewogen.','instance','contact','tÃ¼r','@google/generative-ai','guest','\x0aSTB:\x20','briefingJob','Â°C,\x20','normal','Energy\x20Intelligence','\x20=\x20','Fokus\x20auf\x20Familienroutinen.','generic','rawEventLog','scanDevices','callback','analysis.automation.detectedPatterns','analysis.automation.targetValue','namespace','window','ðŸŒ…\x20Morning\x20Briefing:\x0a','subscribeStates','setupModeResetScheduler','klima','kill','PRIORITÃ„T:\x20Sicherheit.','eventHistory','log','indicator','weatherInstance','Last\x20Check','Train\x20Energy','analysis.training','GAIT_RESULT','Security\x20Monitor','light','dismissAutomation','extendObjectAsync','licht','delObjectAsync','text','trim','ltmLtbWindowDays','NORMAL','existsSync','automation.triggerAction','Target\x20ID','WiFi\x20Presence\x20detected.','json','ANALYZE_GAIT','System','boolean','loc','notifyTelegramInstance','scanForDevices','cancel','driftAnalysisTimer','LTM.processingStatus','.\x20EMERGENCY:\x20','getFullYear','parse','System\x20Mode','onReady','@iobroker/adapter-core','value','ltmJob','exitGraceTimer','Gemini\x20Init\x20Error:\x20','timestamp','simulateButler','now','analysis.training.triggerTopology','[PYTHON]\x20','analysis.health.lastCheck','âš ï¸\x20ALARM:\x20','analysisHistory','submitFeedback','stdout','channel','ltmStbWindowDays','writable','geminiModel','analysis.triggerBriefing','analysis.lastResult','analysis.health.trendValue','presenceDevices','exitTimer','forEach','heizung','Detected\x20Patterns','main','slice'];a0_0xa691=function(){return _0x435f4d;};return a0_0xa691();}async function initPresenceSubscriptions(_0x5d06fa){const _0x3767b2=a0_0x121d89,_0x36937c=_0x5d06fa[_0x3767b2(0x2e7)][_0x3767b2(0x2c2)];if(_0x36937c)for(const _0x2c2812 of _0x36937c){await _0x5d06fa[_0x3767b2(0x1be)](_0x2c2812);}}async function setupTelegramListener(_0xfb38e6){const _0x23e124=a0_0x121d89,_0x2b76fa=_0xfb38e6[_0x23e124(0x2e7)][_0x23e124(0x2a2)];if(_0xfb38e6[_0x23e124(0x2e7)][_0x23e124(0x2e3)]&&_0x2b76fa)await _0xfb38e6[_0x23e124(0x1be)](_0x2b76fa+_0x23e124(0x1ac));}async function checkWifiPresence(_0x4a2a16){const _0x8d5f77=a0_0x121d89;try{const _0x4f5352=_0x4a2a16[_0x8d5f77(0x2e7)][_0x8d5f77(0x2c2)]||[];let _0x403558=![];const _0x50d019=[];for(const _0x3aebe9 of _0x4f5352){try{const _0x52af58=await _0x4a2a16[_0x8d5f77(0x18e)](_0x3aebe9);_0x52af58&&(_0x52af58['val']===!![]||_0x52af58[_0x8d5f77(0x23e)]==='online'||_0x52af58[_0x8d5f77(0x23e)]===0x1)&&(_0x403558=!![],_0x50d019['push'](_0x3aebe9));}catch(_0xc32149){}}return await _0x4a2a16[_0x8d5f77(0x30b)](_0x8d5f77(0x25b),{'val':_0x50d019[_0x8d5f77(0x318)](',\x20'),'ack':!![]}),_0x403558&&(_0x4a2a16[_0x8d5f77(0x2c3)]&&(_0x4a2a16[_0x8d5f77(0x288)][_0x8d5f77(0x1bf)](_0x8d5f77(0x29c)),abortExitTimer(_0x4a2a16)),!_0x4a2a16[_0x8d5f77(0x20e)]&&_0x4a2a16[_0x8d5f77(0x198)]===SYSTEM_MODES[_0x8d5f77(0x298)]&&await setPresence(_0x4a2a16,!![])),_0x403558;}catch(_0x12fae0){return![];}}function startExitTimer(_0x3e45fc){const _0x995b93=a0_0x121d89;abortExitTimer(_0x3e45fc),_0x3e45fc[_0x995b93(0x201)]=!![],_0x3e45fc['exitGraceTimer']=setTimeout(()=>{const _0x1f7b40=_0x995b93;_0x3e45fc[_0x1f7b40(0x201)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x3e45fc[_0x995b93(0x2c3)]=setTimeout(()=>{const _0x3fd045=_0x995b93;setPresence(_0x3e45fc,![]),_0x3e45fc[_0x3fd045(0x2c3)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x15ced0){const _0x2ab28e=a0_0x121d89;if(_0x15ced0[_0x2ab28e(0x2c3)])clearTimeout(_0x15ced0[_0x2ab28e(0x2c3)]);if(_0x15ced0['exitGraceTimer'])clearTimeout(_0x15ced0[_0x2ab28e(0x2af)]);_0x15ced0[_0x2ab28e(0x2c3)]=null,_0x15ced0['exitGraceTimer']=null,_0x15ced0[_0x2ab28e(0x201)]=![];}async function setPresence(_0x136adb,_0x3f3d97){const _0xeec6d4=a0_0x121d89;if(_0x136adb[_0xeec6d4(0x20e)]===_0x3f3d97)return;_0x136adb[_0xeec6d4(0x20e)]=_0x3f3d97,await _0x136adb[_0xeec6d4(0x30b)](_0xeec6d4(0x22a),{'val':_0x3f3d97,'ack':!![]});}async function executeAutomationAction(_0x35be15){const _0x4e58b4=a0_0x121d89;try{const _0xc85c25=await _0x35be15[_0x4e58b4(0x1f1)](_0x4e58b4(0x1c6)),_0x14a847=await _0x35be15[_0x4e58b4(0x1f1)]('analysis.automation.targetValue');if(_0xc85c25&&_0xc85c25[_0x4e58b4(0x23e)]&&_0x14a847){const _0x365eef=_0xc85c25['val'];let _0x43fe19=_0x14a847[_0x4e58b4(0x23e)];try{_0x43fe19=JSON[_0x4e58b4(0x2a9)](_0x43fe19);}catch(_0x4e05c4){}_0x35be15['log'][_0x4e58b4(0x1bf)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x365eef+'\x20=\x20'+_0x43fe19),await _0x35be15['setForeignStateAsync'](_0x365eef,_0x43fe19);}else _0x35be15[_0x4e58b4(0x288)]['warn'](_0x4e58b4(0x1c3));}catch(_0x37cc51){_0x35be15[_0x4e58b4(0x288)][_0x4e58b4(0x259)]('BUTLER\x20Execution\x20Error:\x20'+_0x37cc51[_0x4e58b4(0x244)]);}}async function processSensorEvent(_0x7f6f5a,_0xd32cf6,_0x1cf5ea,_0x1932a4){const _0x3cebf8=a0_0x121d89;if(!_0x1932a4)return;const _0xb655fb=_0x1cf5ea[_0x3cebf8(0x23e)],_0x29433d=Date[_0x3cebf8(0x2b3)](),_0x4d1f9e=_0x7f6f5a['sensorLastValues'][_0xd32cf6];_0x7f6f5a[_0x3cebf8(0x2df)][_0xd32cf6]=_0xb655fb;if(!_0x1932a4['logDuplicates']&&_0x4d1f9e!=undefined&&_0x4d1f9e==_0xb655fb)return;const _0xce2155=(_0x1932a4[_0x3cebf8(0x1a8)]||'')[_0x3cebf8(0x2f3)](),_0x2f72bc=_0xce2155[_0x3cebf8(0x221)](_0x3cebf8(0x23d))||_0xce2155[_0x3cebf8(0x221)](_0x3cebf8(0x206))||_0xce2155[_0x3cebf8(0x221)](_0x3cebf8(0x284))||_0xce2155[_0x3cebf8(0x221)](_0x3cebf8(0x2c5));_0x7f6f5a[_0x3cebf8(0x218)]&&_0x2f72bc&&recordThermodynamics(_0x7f6f5a,_0xd32cf6,_0xb655fb,_0x1932a4[_0x3cebf8(0x32e)]);const _0x5a7b5f={'timestamp':_0x29433d,'id':_0xd32cf6,'name':_0x1932a4[_0x3cebf8(0x1bc)],'type':_0x1932a4[_0x3cebf8(0x1a8)],'location':_0x1932a4[_0x3cebf8(0x32e)],'value':_0xb655fb};_0x7f6f5a[_0x3cebf8(0x287)][_0x3cebf8(0x20b)](_0x5a7b5f);if(_0x7f6f5a['eventHistory'][_0x3cebf8(0x230)]>HISTORY_MAX_SIZE)_0x7f6f5a[_0x3cebf8(0x287)][_0x3cebf8(0x1b2)]();await _0x7f6f5a[_0x3cebf8(0x30b)]('events.lastEvent',{'val':JSON['stringify'](_0x5a7b5f),'ack':!![]}),await _0x7f6f5a[_0x3cebf8(0x30b)]('events.history',{'val':JSON['stringify'](_0x7f6f5a[_0x3cebf8(0x287)]),'ack':!![]});_0x7f6f5a[_0x3cebf8(0x218)]&&(_0x7f6f5a[_0x3cebf8(0x27a)][_0x3cebf8(0x1f9)](_0x5a7b5f),await saveRawEventLog(_0x7f6f5a),recordSequence(_0x7f6f5a,_0x5a7b5f));if(_0x1932a4[_0x3cebf8(0x1fb)]&&_0xb655fb===!![]){if(_0x7f6f5a[_0x3cebf8(0x20e)]&&!_0x7f6f5a[_0x3cebf8(0x201)])startExitTimer(_0x7f6f5a);else{if(!_0x7f6f5a['isPresent'])setPresence(_0x7f6f5a,!![]);}}else{if(_0x1932a4['type']===_0x3cebf8(0x2d8)&&_0xb655fb===!![]){if(_0x7f6f5a[_0x3cebf8(0x2c3)])abortExitTimer(_0x7f6f5a);if(!_0x7f6f5a['isPresent']&&_0x7f6f5a['currentSystemMode']===SYSTEM_MODES['NORMAL'])setPresence(_0x7f6f5a,!![]);}}}async function recordThermodynamics(_0x2d103c,_0xe85a3f,_0x4bd121,_0x52de32){const _0x4ba6cc=a0_0x121d89,_0x314931=await getOutsideTemperatureNumeric(_0x2d103c),_0x42c42c=await _0x2d103c[_0x4ba6cc(0x1f1)]('LTM.trainingData.thermodynamics');let _0x32d054=[];if(_0x42c42c&&_0x42c42c[_0x4ba6cc(0x23e)])try{_0x32d054=JSON['parse'](_0x42c42c[_0x4ba6cc(0x23e)]);}catch(_0xa3be6e){}_0x32d054[_0x4ba6cc(0x1f9)]({'ts':Date[_0x4ba6cc(0x2b3)](),'room':_0x52de32||_0x4ba6cc(0x1dc),'t_in':_0x4bd121,'t_out':_0x314931});if(_0x32d054[_0x4ba6cc(0x230)]>THERMO_LOG_SIZE)_0x32d054[_0x4ba6cc(0x200)]();await _0x2d103c[_0x4ba6cc(0x30b)](_0x4ba6cc(0x2d5),{'val':JSON[_0x4ba6cc(0x19e)](_0x32d054),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x80336){const _0x4d14e9=a0_0x121d89;if(_0x80336[_0x4d14e9(0x2e7)][_0x4d14e9(0x324)])try{const _0x38da88=await _0x80336[_0x4d14e9(0x18e)](_0x80336[_0x4d14e9(0x2e7)][_0x4d14e9(0x324)]);if(_0x38da88&&_0x38da88[_0x4d14e9(0x23e)]!==undefined&&_0x38da88[_0x4d14e9(0x23e)]!==null)return parseFloat(_0x38da88[_0x4d14e9(0x23e)]);}catch(_0x54e05d){}const _0x39483b=_0x80336[_0x4d14e9(0x2e7)][_0x4d14e9(0x28a)];if(!_0x80336[_0x4d14e9(0x2e7)][_0x4d14e9(0x193)]||!_0x39483b)return null;try{let _0x26b684='';if(_0x39483b[_0x4d14e9(0x221)](_0x4d14e9(0x1e1)))_0x26b684=_0x39483b+_0x4d14e9(0x1ae);else{if(_0x39483b['includes']('daswetter'))_0x26b684=_0x39483b+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x39483b[_0x4d14e9(0x221)]('openweathermap'))_0x26b684=_0x39483b+_0x4d14e9(0x260);else{if(_0x39483b[_0x4d14e9(0x221)](_0x4d14e9(0x264)))_0x26b684=_0x39483b+_0x4d14e9(0x267);}}}if(_0x26b684){const _0x22e461=await _0x80336[_0x4d14e9(0x18e)](_0x26b684);if(_0x22e461&&_0x22e461[_0x4d14e9(0x23e)]!==undefined&&_0x22e461[_0x4d14e9(0x23e)]!==null)return parseFloat(_0x22e461[_0x4d14e9(0x23e)]);}}catch(_0x12fb63){}return null;}async function recordSequence(_0x46e973,_0x9524c6){const _0x31f491=a0_0x121d89,_0x51a62d=(_0x9524c6['type']||'')[_0x31f491(0x2f3)](),_0x3013ac=[_0x31f491(0x2d8),'bewegung','prÃ¤senz','presence',_0x31f491(0x19f),'door',_0x31f491(0x26f),_0x31f491(0x280),'fenster',_0x31f491(0x26e),'kontakt',_0x31f491(0x290),_0x31f491(0x293),_0x31f491(0x317),_0x31f491(0x1c7),'dimmer',_0x31f491(0x1a2)];if(!_0x3013ac['some'](_0x2c5c55=>_0x51a62d['includes'](_0x2c5c55)))return;if(!_0x9524c6['value'])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x31f491(0x1f9)]({'loc':_0x9524c6[_0x31f491(0x32e)]||_0x31f491(0x1dc),'id':_0x9524c6['id'],'ts':Date['now']()}),sequenceTimer=setTimeout(async()=>{const _0x31d856=_0x31f491;if(activeSequence[_0x31d856(0x230)]>0x1)await saveCompletedSequence(_0x46e973);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x437000){const _0x2671c4=a0_0x121d89;try{const _0x151950=await _0x437000['getStateAsync']('LTM.trainingData.sequences');let _0x1065c7=[];if(_0x151950&&_0x151950['val'])try{_0x1065c7=JSON[_0x2671c4(0x2a9)](_0x151950[_0x2671c4(0x23e)]);}catch(_0x4460e2){}const _0x5b0909=activeSequence[0x0]['ts'],_0x213b1d=activeSequence[_0x2671c4(0x1b9)](_0x5387b7=>({'loc':_0x5387b7[_0x2671c4(0x2a1)],'t_delta':Math['round']((_0x5387b7['ts']-_0x5b0909)/0x3e8)})),_0x20ccdc={'timestamp':new Date(_0x5b0909)[_0x2671c4(0x1bd)](),'steps':_0x213b1d,'duration':Math[_0x2671c4(0x2f5)]((activeSequence[activeSequence[_0x2671c4(0x230)]-0x1]['ts']-_0x5b0909)/0x3e8),'daytime':new Date(_0x5b0909)[_0x2671c4(0x24c)]()};_0x1065c7[_0x2671c4(0x1f9)](_0x20ccdc);if(_0x1065c7[_0x2671c4(0x230)]>MAX_TRAINING_SET_SIZE)_0x1065c7[_0x2671c4(0x200)]();await _0x437000['setStateAsync'](_0x2671c4(0x2fa),{'val':JSON[_0x2671c4(0x19e)](_0x1065c7),'ack':!![]}),runSecurityCheck(_0x437000,_0x20ccdc);}catch(_0x3339ad){_0x437000[_0x2671c4(0x288)]['error'](_0x2671c4(0x24f)+_0x3339ad[_0x2671c4(0x244)]);}}function runSecurityCheck(_0x3b571e,_0x5f156b){const _0xbf3112=a0_0x121d89;if(!_0x3b571e['isProVersion'])return;sendToPython(_0x3b571e,_0xbf3112(0x21e),{'sequence':_0x5f156b});}async function createDailyDigest(_0x198f8f){const _0x333d05=a0_0x121d89;if(!_0x198f8f['isProVersion'])return;await _0x198f8f[_0x333d05(0x30b)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x198f8f['geminiModel']||_0x198f8f['rawEventLog'][_0x333d05(0x230)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x198f8f[_0x333d05(0x30b)](LTM_DP_STATUS,{'val':_0x333d05(0x1a5),'ack':!![]});return;}const _0x26ad2c=JSON[_0x333d05(0x2a9)](JSON[_0x333d05(0x19e)](_0x198f8f[_0x333d05(0x27a)])),_0x1868b5=_0x26ad2c[_0x333d05(0x230)],_0x4fc88b=_0x333d05(0x2e9)+JSON[_0x333d05(0x19e)](_0x26ad2c);try{const _0x3401b8=await _0x198f8f[_0x333d05(0x2be)][_0x333d05(0x1e3)](_0x4fc88b),_0x491147=JSON[_0x333d05(0x2a9)](_0x3401b8[_0x333d05(0x2dd)][_0x333d05(0x295)]()[_0x333d05(0x1e5)](/```json|```/g,'')[_0x333d05(0x296)]()),_0x1fbb0f={'timestamp':new Date()[_0x333d05(0x1bd)](),'eventCount':_0x1868b5,'summary':_0x491147[_0x333d05(0x330)]||_0x333d05(0x256),'activityLevel':_0x491147[_0x333d05(0x309)]||_0x333d05(0x275),'systemMode':_0x198f8f[_0x333d05(0x198)]};_0x198f8f['dailyDigests']['push'](_0x1fbb0f),await saveDailyDigests(_0x198f8f),_0x198f8f['rawEventLog']=[],await saveRawEventLog(_0x198f8f),await _0x198f8f[_0x333d05(0x30b)](LTM_DP_STATUS,{'val':_0x333d05(0x1eb),'ack':!![]});if(_0x198f8f[_0x333d05(0x218)])sendToPython(_0x198f8f,_0x333d05(0x1b4),{'digest':_0x1fbb0f});}catch(_0x51a04b){_0x198f8f[_0x333d05(0x288)]['error'](_0x51a04b[_0x333d05(0x244)]);}}async function runBaselineDriftAnalysis(_0x3dce18){const _0x44b906=a0_0x121d89;if(!_0x3dce18[_0x44b906(0x218)]||!_0x3dce18[_0x44b906(0x2be)])return;const _0x5c398d=_0x3dce18[_0x44b906(0x2e7)][_0x44b906(0x2bc)]||0xe;if(_0x3dce18[_0x44b906(0x26b)]['length']<_0x5c398d+0x7){await _0x3dce18['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x44b906(0x1a9),'ack':!![]});return;}const _0x2f38f6=_0x3dce18[_0x44b906(0x26b)][_0x44b906(0x2c8)](-_0x5c398d),_0x695c5c=_0x3dce18[_0x44b906(0x26b)]['slice'](0x0,_0x3dce18['dailyDigests'][_0x44b906(0x230)]-_0x5c398d),_0x2f765e=_0x44b906(0x232)+JSON[_0x44b906(0x19e)](_0x695c5c)+_0x44b906(0x272)+JSON[_0x44b906(0x19e)](_0x2f38f6);try{const _0x195a09=await _0x3dce18['geminiModel'][_0x44b906(0x1e3)](_0x2f765e),_0x299469=JSON['parse'](_0x195a09[_0x44b906(0x2dd)][_0x44b906(0x295)]()[_0x44b906(0x1e5)](/```json|```/g,'')[_0x44b906(0x296)]());_0x299469[_0x44b906(0x21f)]&&(await _0x3dce18[_0x44b906(0x30b)](LTM_DP_DRIFT_STATUS,{'val':_0x299469['baselineDrift'],'ack':!![]}),await _0x3dce18[_0x44b906(0x30b)](LTM_DP_DRIFT_DETAILS,{'val':_0x299469[_0x44b906(0x1f5)],'ack':!![]}),await _0x3dce18[_0x44b906(0x30b)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0x79f657){}}async function sendMorningBriefing(_0x1f1823){const _0xdd6b7f=a0_0x121d89;if(!_0x1f1823[_0xdd6b7f(0x2be)])return;try{const _0x3dc6c2='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x3b4cbe=await _0x1f1823[_0xdd6b7f(0x2be)]['generateContent'](_0x3dc6c2),_0x2e01f8=_0x3b4cbe[_0xdd6b7f(0x2dd)]['text']();sendNotification(_0x1f1823,_0xdd6b7f(0x281)+_0x2e01f8);}catch(_0x186852){_0x1f1823[_0xdd6b7f(0x288)]['error'](_0xdd6b7f(0x1c5)+_0x186852['message']);}}function stopPythonService(_0x3781d9){const _0x280549=a0_0x121d89;if(_0x3781d9[_0x280549(0x240)]){try{_0x3781d9['pythonProcess'][_0x280549(0x285)]();}catch(_0x53132b){}_0x3781d9[_0x280549(0x240)]=null;}}function sendToPython(_0x15114a,_0x2a963d,_0x3f22c9={}){const _0x37a816=a0_0x121d89;if(!_0x15114a[_0x37a816(0x240)]||!_0x15114a[_0x37a816(0x240)][_0x37a816(0x203)][_0x37a816(0x2bd)])return;const _0x47be41=JSON[_0x37a816(0x19e)]({'command':_0x2a963d,..._0x3f22c9});try{_0x15114a[_0x37a816(0x240)][_0x37a816(0x203)]['write'](_0x47be41+'\x0a');}catch(_0x335905){}}function runPythonHealthCheck(_0xb7e581){const _0x519ecc=a0_0x121d89;if(!_0xb7e581[_0x519ecc(0x26b)]||_0xb7e581[_0x519ecc(0x26b)][_0x519ecc(0x230)]<0x2)return;const _0x2b5177=_0xb7e581['dailyDigests'][_0x519ecc(0x1b9)](_0x21fc40=>{const _0x52934d=_0x519ecc,_0x409420=(_0x21fc40[_0x52934d(0x309)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x409420]||0x32;});sendToPython(_0xb7e581,'ANALYZE_TREND',{'values':_0x2b5177,'tag':_0x519ecc(0x2d3)});}function handlePythonResult(_0x3498e3,_0x3a37d9){const _0x5c046c=a0_0x121d89;if(_0x3a37d9[_0x5c046c(0x1a8)]===_0x5c046c(0x303))_0x3498e3['log'][_0x5c046c(0x1ee)](_0x5c046c(0x1de));else{if(_0x3a37d9['type']==='SECURITY_RESULT'){const {anomaly_score:_0x17224f,is_anomaly:_0x3b529c,threshold:_0xe829c6,explanation:_0x105b69}=_0x3a37d9[_0x5c046c(0x211)];_0x3498e3[_0x5c046c(0x288)]['info'](_0x5c046c(0x2cf)+_0x17224f['toFixed'](0x5)+_0x5c046c(0x2d4)+(_0x3b529c?_0x5c046c(0x320):'OK')),_0x3498e3[_0x5c046c(0x30b)](_0x5c046c(0x23a),{'val':_0x17224f,'ack':!![]}),_0x3498e3['setStateAsync'](_0x5c046c(0x1cd),{'val':new Date()['toISOString'](),'ack':!![]});if(_0xe829c6)_0x3498e3['setStateAsync'](_0x5c046c(0x1e9),{'val':_0xe829c6,'ack':!![]});if(_0x3b529c){let _0x16af32=_0x5c046c(0x2ef)+_0x17224f[_0x5c046c(0x251)](0x4)+')';if(_0x105b69&&_0x105b69!=='Unknown')_0x16af32+=_0x5c046c(0x1c0)+_0x105b69;_0x3498e3['setStateAsync'](_0x5c046c(0x190),{'val':!![],'ack':!![]}),_0x3498e3[_0x5c046c(0x30b)](_0x5c046c(0x255),{'val':_0x16af32,'ack':!![]}),sendNotification(_0x3498e3,_0x5c046c(0x2d2)+_0x16af32,![],!![]);}}else{if(_0x3a37d9[_0x5c046c(0x1a8)]==='TRAINING_COMPLETE'){const _0x3ae71c=_0x3a37d9[_0x5c046c(0x211)][_0x5c046c(0x233)]||'',_0x28953c=_0x3a37d9['payload']['threshold'],_0x217a35=_0x3a37d9[_0x5c046c(0x211)][_0x5c046c(0x313)]?_0x5c046c(0x2e0)+new Date()[_0x5c046c(0x329)]()+'\x20('+_0x3ae71c+')':_0x5c046c(0x20a)+_0x3a37d9[_0x5c046c(0x211)]['reason'];_0x3498e3[_0x5c046c(0x30b)]('analysis.training.status',{'val':_0x217a35,'ack':!![]});if(_0x3a37d9['payload'][_0x5c046c(0x313)]&&_0x28953c)_0x3498e3['setStateAsync'](_0x5c046c(0x1e9),{'val':_0x28953c,'ack':!![]});}else{if(_0x3a37d9[_0x5c046c(0x1a8)]===_0x5c046c(0x219)){const {patterns:_0x52dcb8}=_0x3a37d9['payload'];if(_0x52dcb8&&_0x52dcb8[_0x5c046c(0x230)]>0x0){_0x3498e3[_0x5c046c(0x288)][_0x5c046c(0x1bf)]('ðŸ›‹ï¸\x20BUTLER:\x20Found\x20'+_0x52dcb8['length']+_0x5c046c(0x30d)),_0x3498e3[_0x5c046c(0x30b)](_0x5c046c(0x27d),{'val':JSON[_0x5c046c(0x19e)](_0x52dcb8),'ack':!![]});const _0x171f56=_0x52dcb8[0x0],_0x10a6c4=_0x5c046c(0x19d)+_0x171f56[_0x5c046c(0x2f6)]+'\x20('+(_0x171f56[_0x5c046c(0x30f)]*0x64)[_0x5c046c(0x251)](0x0)+'%)';_0x3498e3['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x3498e3['setStateAsync'](_0x5c046c(0x243),{'val':_0x10a6c4,'ack':!![]});}else _0x3498e3[_0x5c046c(0x288)][_0x5c046c(0x1bf)](_0x5c046c(0x1f2)),_0x3498e3[_0x5c046c(0x30b)](_0x5c046c(0x1ea),{'val':![],'ack':!![]}),_0x3498e3[_0x5c046c(0x30b)](_0x5c046c(0x27d),{'val':'[]','ack':!![]});}else{if(_0x3a37d9['type']===_0x5c046c(0x1c4)){if(_0x3a37d9['payload'][_0x5c046c(0x313)])try{const _0x434bc8=JSON[_0x5c046c(0x2a9)](_0x3a37d9[_0x5c046c(0x211)][_0x5c046c(0x233)]);if(_0x434bc8['insulation'])_0x3498e3['setStateAsync'](_0x5c046c(0x2eb),{'val':JSON[_0x5c046c(0x19e)](_0x434bc8[_0x5c046c(0x2da)]),'ack':!![]});if(_0x434bc8[_0x5c046c(0x1cf)])_0x3498e3['setStateAsync'](_0x5c046c(0x306),{'val':JSON['stringify'](_0x434bc8[_0x5c046c(0x1cf)]),'ack':!![]});}catch(_0x221115){}}else{if(_0x3a37d9['type']===_0x5c046c(0x241)){if(_0x3a37d9[_0x5c046c(0x211)][_0x5c046c(0x313)])_0x3498e3[_0x5c046c(0x288)]['info'](_0x5c046c(0x31d));}else{if(_0x3a37d9[_0x5c046c(0x1a8)]===_0x5c046c(0x262))_0x3498e3['setStateAsync'](_0x5c046c(0x2b6),{'val':new Date()[_0x5c046c(0x1bd)](),'ack':!![]}),_0x3498e3[_0x5c046c(0x30b)]('analysis.health.isAnomaly',{'val':_0x3a37d9[_0x5c046c(0x211)][_0x5c046c(0x1fd)],'ack':!![]});else{if(_0x3a37d9[_0x5c046c(0x1a8)]===_0x5c046c(0x32a))_0x3498e3[_0x5c046c(0x30b)]('analysis.health.trendDiagnosis',{'val':_0x3a37d9[_0x5c046c(0x211)][_0x5c046c(0x1e7)],'ack':!![]}),_0x3498e3[_0x5c046c(0x30b)](_0x5c046c(0x2c1),{'val':_0x3a37d9[_0x5c046c(0x211)]['change_percent'],'ack':!![]});else{if(_0x3a37d9[_0x5c046c(0x1a8)]===_0x5c046c(0x28e)){const {speed_trend:_0x33a392}=_0x3a37d9['payload'];if(_0x33a392!==undefined)_0x3498e3[_0x5c046c(0x30b)](_0x5c046c(0x1b1),{'val':_0x33a392,'ack':!![]});}else{if(_0x3a37d9[_0x5c046c(0x1a8)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x1613a2}=_0x3a37d9['payload'];if(_0x1613a2)_0x3498e3[_0x5c046c(0x30b)](_0x5c046c(0x2e2),{'val':JSON[_0x5c046c(0x19e)](_0x1613a2),'ack':!![]});}else{if(_0x3a37d9['type']===_0x5c046c(0x18f)){const {data:_0x2e5e49}=_0x3a37d9[_0x5c046c(0x211)];_0x2e5e49&&(_0x3498e3[_0x5c046c(0x288)][_0x5c046c(0x1bf)](_0x5c046c(0x24a)),_0x3498e3[_0x5c046c(0x30b)](_0x5c046c(0x245),{'val':JSON['stringify'](_0x2e5e49),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x11aace){const _0x638a7=a0_0x121d89;let _0x1b007a='python3';if(fs[_0x638a7(0x299)](installer[_0x638a7(0x2e8)]))_0x1b007a=installer[_0x638a7(0x2e8)];try{const _0x31e4b3=path[_0x638a7(0x318)](__dirname,'python_service',_0x638a7(0x1ba));_0x11aace['pythonProcess']=spawn(_0x1b007a,[_0x31e4b3]),_0x11aace['pythonProcess'][_0x638a7(0x2ba)]['on'](_0x638a7(0x304),_0x2030c9=>{const _0x1a31e2=_0x638a7,_0x53b494=_0x2030c9[_0x1a31e2(0x213)]()['split']('\x0a');_0x53b494[_0x1a31e2(0x2c4)](_0xaac91a=>{const _0x40697b=_0x1a31e2,_0x5b27f4=_0xaac91a['trim']();if(!_0x5b27f4)return;if(_0x5b27f4[_0x40697b(0x1da)]('[LOG]'))_0x11aace[_0x40697b(0x288)][_0x40697b(0x1ee)](_0x40697b(0x2b5)+_0x5b27f4['substring'](0x5)['trim']());else{if(_0x5b27f4[_0x40697b(0x1da)](_0x40697b(0x1e0)))try{const _0x138f58=JSON[_0x40697b(0x2a9)](_0x5b27f4[_0x40697b(0x21c)](0x8)[_0x40697b(0x296)]());handlePythonResult(_0x11aace,_0x138f58);}catch(_0x485c8e){}}});}),_0x11aace[_0x638a7(0x240)]['on'](_0x638a7(0x2ff),_0x1e608a=>{const _0xc30ee9=_0x638a7;_0x11aace[_0xc30ee9(0x240)]=null;});}catch(_0x22c861){_0x11aace[_0x638a7(0x288)]['error'](_0x638a7(0x1a1)+_0x22c861['message']);}}function a0_0x2fbc(_0xda884e,_0x332f71){const _0x3059c9=a0_0xa691();return a0_0x2fbc=function(_0x1fb43b,_0x5d71a0){_0x1fb43b=_0x1fb43b-0x18e;let _0xa691e5=_0x3059c9[_0x1fb43b];return _0xa691e5;},a0_0x2fbc(_0xda884e,_0x332f71);}async function runAutopilot(_0x15b434){const _0x31ce19=a0_0x121d89;_0x15b434[_0x31ce19(0x288)][_0x31ce19(0x1ee)](_0x31ce19(0x23c)),await runGeminiAnalysis(_0x15b434),updateHealthVector(_0x15b434),triggerGaitAnalysis(_0x15b434),triggerEnergyPrediction(_0x15b434);}async function triggerGaitAnalysis(_0x4a1502){const _0x230931=a0_0x121d89;if(!_0x4a1502['isProVersion'])return;try{const _0xb70538=await _0x4a1502[_0x230931(0x1f1)](_0x230931(0x2fa));_0xb70538&&_0xb70538[_0x230931(0x23e)]&&sendToPython(_0x4a1502,_0x230931(0x29e),{'sequences':JSON['parse'](_0xb70538[_0x230931(0x23e)])});}catch(_0x4d368b){}}async function triggerEnergyPrediction(_0x3028ec){const _0xd81f60=a0_0x121d89;if(!_0x3028ec[_0xd81f60(0x218)])return;try{const _0x1c89a8=await getOutsideTemperatureNumeric(_0x3028ec);if(_0x1c89a8===null)return;const _0x1f6492={},_0x34b6c5=_0x3028ec[_0xd81f60(0x2e7)][_0xd81f60(0x1b0)]||[];for(const _0x392933 of _0x34b6c5){if(_0x392933[_0xd81f60(0x1a8)]===_0xd81f60(0x23d)&&_0x392933['location']){const _0x3d361b=_0x3028ec[_0xd81f60(0x2df)][_0x392933['id']];if(_0x3d361b!==undefined)_0x1f6492[_0x392933[_0xd81f60(0x32e)]]=_0x3d361b;}}Object['keys'](_0x1f6492)[_0xd81f60(0x230)]>0x0&&sendToPython(_0x3028ec,'PREDICT_ENERGY',{'current_temps':_0x1f6492,'t_out':_0x1c89a8});}catch(_0x507a9b){}}function updateHealthVector(_0x48164a){const _0x896cd3=a0_0x121d89;if(!_0x48164a[_0x896cd3(0x27a)]||_0x48164a[_0x896cd3(0x27a)][_0x896cd3(0x230)]===0x0)return;const _0x2d69a8=new Array(0x60)[_0x896cd3(0x1b8)](0x0),_0x2f8a67=new Date()[_0x896cd3(0x2e4)](0x0,0x0,0x0,0x0);_0x48164a['rawEventLog']['forEach'](_0x3686ce=>{const _0x255850=_0x896cd3,_0x2425f2=new Date(_0x3686ce['timestamp']);if(_0x2425f2[_0x255850(0x2d1)]()>=_0x2f8a67){const _0x497395=_0x2425f2[_0x255850(0x24c)](),_0x43a4c0=_0x2425f2['getMinutes'](),_0xf837b5=_0x497395*0x4+Math['floor'](_0x43a4c0/0xf);if(_0xf837b5>=0x0&&_0xf837b5<0x60)_0x2d69a8[_0xf837b5]++;}}),_0x48164a[_0x896cd3(0x30b)](_0x896cd3(0x223),{'val':JSON['stringify'](_0x2d69a8),'ack':!![]});}async function getWeatherContext(_0x322c5d){const _0x2d5aa5=a0_0x121d89;if(!_0x322c5d[_0x2d5aa5(0x2e7)]['useWeather']||!_0x322c5d[_0x2d5aa5(0x2e7)][_0x2d5aa5(0x28a)])return _0x2d5aa5(0x2de);try{const _0x4800c9=_0x322c5d[_0x2d5aa5(0x2e7)][_0x2d5aa5(0x28a)];let _0x3df4e9=await _0x322c5d[_0x2d5aa5(0x18e)](_0x4800c9+_0x2d5aa5(0x1ae));if(!_0x3df4e9)_0x3df4e9=await _0x322c5d['getForeignStateAsync'](_0x4800c9+'.forecast.current.temperature');let _0x53c09a=await _0x322c5d['getForeignStateAsync'](_0x4800c9+'.Current.WeatherText');if(!_0x53c09a)_0x53c09a=await _0x322c5d[_0x2d5aa5(0x18e)](_0x4800c9+_0x2d5aa5(0x1a6));if(_0x3df4e9&&_0x53c09a)return _0x3df4e9[_0x2d5aa5(0x23e)]+_0x2d5aa5(0x274)+_0x53c09a[_0x2d5aa5(0x23e)];}catch(_0x5d5409){}return _0x2d5aa5(0x1f0);}async function getCalendarContext(_0x3e8617){const _0x13556f=a0_0x121d89;if(!_0x3e8617['config']['useCalendar']||!_0x3e8617[_0x13556f(0x2e7)][_0x13556f(0x235)])return _0x13556f(0x249);return _0x13556f(0x197);}async function getCalendarNames(_0x465f9b,_0x4ba153){return[];}async function saveFeedback(_0x5f006f,_0x31b0ad){const _0x434194=a0_0x121d89;_0x5f006f[_0x434194(0x288)][_0x434194(0x1bf)]('ðŸ“\x20Feedback\x20received:\x20'+_0x31b0ad['rating']);}async function runGeminiAnalysis(_0x3cb91e,_0x1ab42b=''){const _0xb3110f=a0_0x121d89;if(!_0x3cb91e[_0xb3110f(0x2be)])return;if(_0x3cb91e[_0xb3110f(0x287)]['length']===0x0)return;const _0x376890=_0x3cb91e[_0xb3110f(0x287)][_0xb3110f(0x2c8)](0x0,0xf),_0x135bff=await getWeatherContext(_0x3cb91e),_0x4eacb7=_0x3cb91e[_0xb3110f(0x198)],_0x377964=PERSONA_MAPPING[_0x3cb91e[_0xb3110f(0x2e7)]['aiPersona']||_0xb3110f(0x279)],_0xdbdb2c=_0x3cb91e[_0xb3110f(0x2e7)][_0xb3110f(0x1ed)]||_0xb3110f(0x216);let _0x2bc55a=_0xb3110f(0x1fc);try{const _0x2f95ba=await _0x3cb91e[_0xb3110f(0x1f1)]('system.presenceWho');if(_0x2f95ba&&_0x2f95ba['val'])_0x2bc55a=_0x2f95ba[_0xb3110f(0x23e)];}catch(_0x3a6b2b){}let _0x5e7a63=![];try{const _0x5777cd=await _0x3cb91e['getStateAsync'](_0xb3110f(0x1d6));if(_0x5777cd&&_0x5777cd[_0xb3110f(0x23e)])_0x5e7a63=!![];}catch(_0x4344ac){}const _0x4aff0a=_0xb3110f(0x2d9)+_0x377964+_0xb3110f(0x32b)+_0xdbdb2c+_0xb3110f(0x1b3)+_0x4eacb7+_0xb3110f(0x207)+_0x135bff+_0xb3110f(0x239)+_0x2bc55a+'.\x20EVENTS:\x20'+JSON[_0xb3110f(0x19e)](_0x376890)+_0xb3110f(0x2a7)+_0x1ab42b+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0x574696=await _0x3cb91e['geminiModel'][_0xb3110f(0x1e3)](_0x4aff0a),_0x4eb036=JSON[_0xb3110f(0x2a9)](_0x574696['response']['text']()[_0xb3110f(0x1e5)](/```json|```/g,'')['trim']());await _0x3cb91e['setStateAsync'](_0xb3110f(0x2c0),{'val':JSON['stringify'](_0x4eb036),'ack':!![]});if(_0x4eb036[_0xb3110f(0x330)])await _0x3cb91e['setStateAsync']('analysis.activitySummary',{'val':_0x4eb036[_0xb3110f(0x330)],'ack':!![]});const _0x25a305={'timestamp':Date[_0xb3110f(0x2b3)](),'id':Date[_0xb3110f(0x2b3)]()[_0xb3110f(0x213)](),'analysis':{'activity':{'summary':_0x4eb036[_0xb3110f(0x330)],'isAlert':_0x4eb036['isAlert'],'alertReason':_0x4eb036[_0xb3110f(0x1aa)]},'comfort':{'automationProposal':_0x4eb036[_0xb3110f(0x331)]}}};await updateAnalysisHistory(_0x3cb91e,_0x25a305);const _0x2fc56d=_0x4eb036[_0xb3110f(0x2cd)]||![];_0x2fc56d!==_0x3cb91e[_0xb3110f(0x1db)]&&(await _0x3cb91e[_0xb3110f(0x30b)](_0xb3110f(0x190),{'val':_0x2fc56d,'ack':!![]}),_0x3cb91e[_0xb3110f(0x1db)]=_0x2fc56d,_0x2fc56d&&(await _0x3cb91e['setStateAsync']('analysis.alertReason',{'val':_0x4eb036[_0xb3110f(0x1aa)],'ack':!![]}),sendNotification(_0x3cb91e,_0xb3110f(0x2b7)+_0x4eb036[_0xb3110f(0x1aa)],![],_0x4eb036[_0xb3110f(0x234)])));if(_0x4eb036[_0xb3110f(0x331)]&&_0x4eb036['automationProposal']['detected']){await _0x3cb91e[_0xb3110f(0x30b)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x3cb91e['setStateAsync']('analysis.automation.description',{'val':_0x4eb036[_0xb3110f(0x331)][_0xb3110f(0x319)],'ack':!![]}),await _0x3cb91e[_0xb3110f(0x30b)](_0xb3110f(0x1c6),{'val':_0x4eb036[_0xb3110f(0x331)][_0xb3110f(0x226)],'ack':!![]}),await _0x3cb91e[_0xb3110f(0x30b)](_0xb3110f(0x27e),{'val':JSON[_0xb3110f(0x19e)](_0x4eb036[_0xb3110f(0x331)][_0xb3110f(0x1e6)]),'ack':!![]});if(_0x5e7a63)executeAutomationAction(_0x3cb91e);}}catch(_0xda6fc7){_0x3cb91e[_0xb3110f(0x288)][_0xb3110f(0x259)](_0xb3110f(0x301)+_0xda6fc7[_0xb3110f(0x244)]);}}async function startSystem(_0x40993e){const _0x3ff6b5=a0_0x121d89;_0x40993e[_0x3ff6b5(0x288)][_0x3ff6b5(0x1bf)](_0x3ff6b5(0x1ef)),await initZombies(_0x40993e);try{_0x40993e[_0x3ff6b5(0x218)]=await checkLicense(_0x40993e['config'][_0x3ff6b5(0x1d4)]);}catch(_0xeb9512){}if(!_0x40993e[_0x3ff6b5(0x2e7)]['inactivityThresholdHours']||_0x40993e[_0x3ff6b5(0x2e7)][_0x3ff6b5(0x238)]<0.1)_0x40993e[_0x3ff6b5(0x2e7)][_0x3ff6b5(0x238)]=0xc;await initHistory(_0x40993e),await initSystemConfig(_0x40993e);if(_0x40993e[_0x3ff6b5(0x2e7)][_0x3ff6b5(0x199)])try{_0x40993e[_0x3ff6b5(0x1a4)]=new GoogleGenerativeAI(_0x40993e['config'][_0x3ff6b5(0x199)]),_0x40993e[_0x3ff6b5(0x2be)]=_0x40993e[_0x3ff6b5(0x1a4)][_0x3ff6b5(0x322)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x3ff6b5(0x26a)}}),_0x40993e['log'][_0x3ff6b5(0x1bf)]('Gemini\x20AI\x20initialized.');}catch(_0x1ce92a){_0x40993e[_0x3ff6b5(0x288)]['error'](_0x3ff6b5(0x2b0)+_0x1ce92a[_0x3ff6b5(0x244)]);}await createAllObjects(_0x40993e),await loadSystemMode(_0x40993e),await loadRawEventLog(_0x40993e),await loadDailyDigests(_0x40993e),_0x40993e[_0x3ff6b5(0x282)](_0x3ff6b5(0x30c)),_0x40993e[_0x3ff6b5(0x282)](LTM_DP_TRIGGER_DIGEST),_0x40993e[_0x3ff6b5(0x282)](_0x3ff6b5(0x2d6)),_0x40993e[_0x3ff6b5(0x282)](_0x3ff6b5(0x2bf)),_0x40993e[_0x3ff6b5(0x282)](_0x3ff6b5(0x212)),_0x40993e[_0x3ff6b5(0x282)]('analysis.automation.autoApply'),_0x40993e[_0x3ff6b5(0x282)](_0x3ff6b5(0x237)),_0x40993e[_0x3ff6b5(0x282)](_0x3ff6b5(0x210)),_0x40993e[_0x3ff6b5(0x282)](_0x3ff6b5(0x220)),_0x40993e[_0x3ff6b5(0x282)](_0x3ff6b5(0x248)),_0x40993e[_0x3ff6b5(0x282)]('analysis.training.triggerTopology'),await initSensorSubscriptions(_0x40993e),await initPresenceSubscriptions(_0x40993e),await setupTelegramListener(_0x40993e),setTimeout(()=>checkWifiPresence(_0x40993e),0x1388);if(_0x40993e['analysisTimer'])clearInterval(_0x40993e[_0x3ff6b5(0x31b)]);const _0xbe806a=_0x40993e[_0x3ff6b5(0x2e7)]['analysisInterval']||0xf;_0xbe806a>0x0&&(_0x40993e[_0x3ff6b5(0x31b)]=setInterval(()=>{runAutopilot(_0x40993e);},_0xbe806a*0x3c*0x3e8)),schedulers[_0x3ff6b5(0x1ca)](_0x40993e,()=>createDailyDigest(_0x40993e)),schedulers[_0x3ff6b5(0x283)](_0x40993e),schedulers[_0x3ff6b5(0x22c)](_0x40993e,()=>runBaselineDriftAnalysis(_0x40993e)),schedulers[_0x3ff6b5(0x2ce)](_0x40993e,()=>sendMorningBriefing(_0x40993e)),startPythonService(_0x40993e),setTimeout(()=>{const _0x288537=_0x3ff6b5;_0x40993e[_0x288537(0x240)]&&(runPythonHealthCheck(_0x40993e),triggerGaitAnalysis(_0x40993e),triggerEnergyPrediction(_0x40993e)),updateHealthVector(_0x40993e);},0x1388);}class CogniLiving extends utils[a0_0x121d89(0x242)]{constructor(_0x47a507){const _0x20fe5b=a0_0x121d89;super({..._0x47a507,'name':_0x20fe5b(0x268)}),this['eventHistory']=[],this[_0x20fe5b(0x2b8)]=[],this[_0x20fe5b(0x27a)]=[],this[_0x20fe5b(0x26b)]=[],this[_0x20fe5b(0x2df)]={},this[_0x20fe5b(0x250)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x20fe5b(0x20e)]=!![],this['exitTimer']=null,this[_0x20fe5b(0x2af)]=null,this[_0x20fe5b(0x201)]=![],this[_0x20fe5b(0x1a4)]=null,this[_0x20fe5b(0x2be)]=null,this[_0x20fe5b(0x198)]=SYSTEM_MODES[_0x20fe5b(0x298)],this[_0x20fe5b(0x218)]=![],this[_0x20fe5b(0x1db)]=![],this[_0x20fe5b(0x1f3)]=_0x20fe5b(0x2d7),this[_0x20fe5b(0x31b)]=null,this[_0x20fe5b(0x2ae)]=null,this[_0x20fe5b(0x1a7)]=null,this[_0x20fe5b(0x2a5)]=null,this[_0x20fe5b(0x273)]=null,this['pythonProcess']=null,this[_0x20fe5b(0x204)]=![],this['on'](_0x20fe5b(0x2ea),this[_0x20fe5b(0x2ab)][_0x20fe5b(0x1c9)](this)),this['on'](_0x20fe5b(0x1d0),this[_0x20fe5b(0x20c)][_0x20fe5b(0x1c9)](this)),this['on'](_0x20fe5b(0x21a),this['onUnload']['bind'](this)),this['on'](_0x20fe5b(0x244),this[_0x20fe5b(0x1fe)]['bind'](this));}async[a0_0x121d89(0x2ab)](){const _0x2775f2=a0_0x121d89;this[_0x2775f2(0x288)][_0x2775f2(0x1bf)](_0x2775f2(0x308)+this[_0x2775f2(0x1cc)]+')\x20-\x20SAFE\x20BOOT');if(!installer[_0x2775f2(0x228)](this,()=>startSystem(this)))return;}[a0_0x121d89(0x2f2)](_0x19c64e){const _0x5a5b0e=a0_0x121d89;if(this[_0x5a5b0e(0x31b)])clearInterval(this[_0x5a5b0e(0x31b)]);if(this[_0x5a5b0e(0x2a5)])clearInterval(this[_0x5a5b0e(0x2a5)]);if(this['ltmJob'])this[_0x5a5b0e(0x2ae)][_0x5a5b0e(0x2a4)]();if(this[_0x5a5b0e(0x1a7)])this[_0x5a5b0e(0x1a7)][_0x5a5b0e(0x2a4)]();if(this[_0x5a5b0e(0x273)])this[_0x5a5b0e(0x273)][_0x5a5b0e(0x2a4)]();if(this['exitTimer'])clearTimeout(this[_0x5a5b0e(0x2c3)]);if(this[_0x5a5b0e(0x2af)])clearTimeout(this[_0x5a5b0e(0x2af)]);stopPythonService(this),_0x19c64e();}async[a0_0x121d89(0x20c)](_0x56eeb4,_0x2b0511){const _0x32f0e1=a0_0x121d89;if(!_0x2b0511||this[_0x32f0e1(0x204)])return;if(_0x56eeb4[_0x32f0e1(0x221)](_0x32f0e1(0x257))&&_0x56eeb4[_0x32f0e1(0x315)](_0x32f0e1(0x2dc))&&_0x2b0511[_0x32f0e1(0x23e)]){await handleTelegramResponse(this,_0x2b0511[_0x32f0e1(0x23e)]);return;}if(_0x56eeb4===this[_0x32f0e1(0x27f)]+'.'+SYSTEM_DP_MODE){if(_0x2b0511[_0x32f0e1(0x23e)]&&Object[_0x32f0e1(0x2ec)](SYSTEM_MODES)[_0x32f0e1(0x221)](_0x2b0511[_0x32f0e1(0x23e)])){this[_0x32f0e1(0x198)]=_0x2b0511['val'];if(_0x2b0511[_0x32f0e1(0x23e)]===SYSTEM_MODES['VACATION'])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x2b0511['ack'])this[_0x32f0e1(0x2db)](_0x56eeb4,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x2b0511[_0x32f0e1(0x1ab)]){_0x56eeb4[_0x32f0e1(0x221)](_0x32f0e1(0x30c))&&_0x2b0511['val']&&(this[_0x32f0e1(0x2db)](_0x56eeb4,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x56eeb4[_0x32f0e1(0x221)](_0x32f0e1(0x192))&&_0x2b0511[_0x32f0e1(0x23e)]){this['setState'](_0x56eeb4,{'val':![],'ack':!![]});if(this[_0x32f0e1(0x218)])createDailyDigest(this);}_0x56eeb4[_0x32f0e1(0x221)]('triggerBriefing')&&_0x2b0511[_0x32f0e1(0x23e)]&&(this[_0x32f0e1(0x2db)](_0x56eeb4,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x56eeb4[_0x32f0e1(0x221)](_0x32f0e1(0x29a))&&_0x2b0511['val']&&(this[_0x32f0e1(0x2db)](_0x56eeb4,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x56eeb4['includes'](_0x32f0e1(0x237))&&_0x2b0511[_0x32f0e1(0x23e)]){this[_0x32f0e1(0x2db)](_0x56eeb4,{'val':![],'ack':!![]});if(this[_0x32f0e1(0x218)])try{const _0x5f5199=await this['getStateAsync'](_0x32f0e1(0x2fa));if(_0x5f5199&&_0x5f5199[_0x32f0e1(0x23e)]){const _0x16fd9c=JSON[_0x32f0e1(0x2a9)](_0x5f5199[_0x32f0e1(0x23e)]);this[_0x32f0e1(0x288)][_0x32f0e1(0x1bf)](_0x32f0e1(0x1d9)),this[_0x32f0e1(0x30b)](_0x32f0e1(0x25e),{'val':'Sec-Training\x20started...','ack':!![]}),sendToPython(this,_0x32f0e1(0x326),{'sequences':_0x16fd9c});}}catch(_0x35102e){this[_0x32f0e1(0x288)][_0x32f0e1(0x259)](_0x32f0e1(0x310)+_0x35102e[_0x32f0e1(0x244)]);}}if(_0x56eeb4[_0x32f0e1(0x221)](_0x32f0e1(0x210))&&_0x2b0511[_0x32f0e1(0x23e)]){this['setState'](_0x56eeb4,{'val':![],'ack':!![]});if(this[_0x32f0e1(0x218)])try{const _0x27c0ab=await this[_0x32f0e1(0x1f1)](LTM_DP_DAILY_DIGESTS);if(_0x27c0ab&&_0x27c0ab[_0x32f0e1(0x23e)])sendToPython(this,_0x32f0e1(0x19c),{'digests':JSON[_0x32f0e1(0x2a9)](_0x27c0ab['val'])});}catch(_0x5f509f){}}if(_0x56eeb4[_0x32f0e1(0x221)](_0x32f0e1(0x220))&&_0x2b0511[_0x32f0e1(0x23e)]){this[_0x32f0e1(0x2db)](_0x56eeb4,{'val':![],'ack':!![]});if(this[_0x32f0e1(0x218)])try{const _0xeaabb1=await this[_0x32f0e1(0x1f1)](_0x32f0e1(0x2d5));if(_0xeaabb1&&_0xeaabb1[_0x32f0e1(0x23e)])sendToPython(this,'TRAIN_ENERGY',{'points':JSON[_0x32f0e1(0x2a9)](_0xeaabb1[_0x32f0e1(0x23e)])});}catch(_0x3b4c6a){}}if(_0x56eeb4['includes']('analysis.training.triggerComfort')&&_0x2b0511['val']){this[_0x32f0e1(0x2db)](_0x56eeb4,{'val':![],'ack':!![]});if(this[_0x32f0e1(0x218)])try{const _0xb01684=await this['getStateAsync'](LTM_DP_RAW_LOG);_0xb01684&&_0xb01684[_0x32f0e1(0x23e)]&&(this[_0x32f0e1(0x288)][_0x32f0e1(0x1bf)]('ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...'),sendToPython(this,'TRAIN_COMFORT',{'events':JSON[_0x32f0e1(0x2a9)](_0xb01684['val'])}));}catch(_0x13b90b){}}if(_0x56eeb4[_0x32f0e1(0x221)](_0x32f0e1(0x2b4))&&_0x2b0511['val']){this['setState'](_0x56eeb4,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x1120ac=await this['getStateAsync']('LTM.trainingData.sequences');if(_0x1120ac&&_0x1120ac[_0x32f0e1(0x23e)]){const _0x411c89=JSON[_0x32f0e1(0x2a9)](_0x1120ac[_0x32f0e1(0x23e)]);this[_0x32f0e1(0x288)][_0x32f0e1(0x1bf)]('ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...'),sendToPython(this,_0x32f0e1(0x208),{'sequences':_0x411c89});}}catch(_0x857fd8){this[_0x32f0e1(0x288)]['error'](_0x32f0e1(0x22f)+_0x857fd8['message']);}}return;}if(this[_0x32f0e1(0x2e7)][_0x32f0e1(0x2c2)]&&this[_0x32f0e1(0x2e7)][_0x32f0e1(0x2c2)][_0x32f0e1(0x221)](_0x56eeb4)){await checkWifiPresence(this);return;}const _0xc3f7a6=(this[_0x32f0e1(0x2e7)][_0x32f0e1(0x1b0)]||[])[_0x32f0e1(0x215)](_0x59a8fe=>_0x59a8fe['id']===_0x56eeb4);if(_0xc3f7a6)processSensorEvent(this,_0x56eeb4,_0x2b0511,_0xc3f7a6);}async[a0_0x121d89(0x1fe)](_0x4d640a){const _0x4efce0=a0_0x121d89;if(typeof _0x4d640a===_0x4efce0(0x20d)&&_0x4d640a[_0x4efce0(0x244)]){if(_0x4d640a['command']===_0x4efce0(0x2c9)){const _0x102285=_0x4d640a[_0x4efce0(0x244)][_0x4efce0(0x300)]||this['config'][_0x4efce0(0x199)];if(!_0x102285)return this[_0x4efce0(0x312)](_0x4d640a[_0x4efce0(0x266)],_0x4d640a[_0x4efce0(0x1df)],{'success':![],'message':'Kein\x20API\x20Key.'},_0x4d640a['callback']);try{const _0x5d12f1=new GoogleGenerativeAI(_0x102285),_0x55aaea=_0x5d12f1['getGenerativeModel']({'model':GEMINI_MODEL}),_0x3ef428=await _0x55aaea[_0x4efce0(0x1e3)]('Hi');this[_0x4efce0(0x312)](_0x4d640a[_0x4efce0(0x266)],_0x4d640a[_0x4efce0(0x1df)],{'success':!![],'message':_0x4efce0(0x32d)+_0x3ef428[_0x4efce0(0x2dd)][_0x4efce0(0x295)]()},_0x4d640a['callback']);}catch(_0x571b20){this['sendTo'](_0x4d640a['from'],_0x4d640a['command'],{'success':![],'message':_0x4efce0(0x1b5)+_0x571b20['message']},_0x4d640a[_0x4efce0(0x27c)]);}}else{if(_0x4d640a['command']===_0x4efce0(0x1af)){const _0x3b0e70=await getWeatherContext(this),_0x33425c=await getCalendarContext(this);this[_0x4efce0(0x312)](_0x4d640a['from'],_0x4d640a['command'],{'success':!![],'weather':_0x3b0e70,'calendar':_0x33425c},_0x4d640a[_0x4efce0(0x27c)]);}else{if(_0x4d640a[_0x4efce0(0x1df)]==='getLtmData'){if(!this[_0x4efce0(0x218)])return this[_0x4efce0(0x312)](_0x4d640a[_0x4efce0(0x266)],_0x4d640a[_0x4efce0(0x1df)],{'success':![],'isPro':![]},_0x4d640a[_0x4efce0(0x27c)]);let _0x3715bf={'status':'N/A'};try{const _0x2d2633=await this[_0x4efce0(0x1f1)](LTM_DP_DRIFT_STATUS);_0x3715bf[_0x4efce0(0x231)]=_0x2d2633?_0x2d2633[_0x4efce0(0x23e)]:'N/A';}catch(_0x1ce7bf){}this['sendTo'](_0x4d640a['from'],_0x4d640a[_0x4efce0(0x1df)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x3715bf,'analysisHistory':this[_0x4efce0(0x2b8)]},_0x4d640a['callback']);}else{if(_0x4d640a['command']===_0x4efce0(0x325)){const _0x1a2eff=this[_0x4efce0(0x26b)][_0x4efce0(0x230)],_0x4369d8=new Date(),_0x383ccf=new Date(_0x4369d8[_0x4efce0(0x2a8)](),_0x4369d8['getMonth'](),_0x4369d8['getDate']())[_0x4efce0(0x2d1)](),_0x5865b2=this[_0x4efce0(0x27a)][_0x4efce0(0x229)](_0x3bd434=>new Date(_0x3bd434[_0x4efce0(0x2b1)])['getTime']()>_0x383ccf)['length'],_0x2ae626=new Array(0x18)[_0x4efce0(0x1b8)](0x0);this[_0x4efce0(0x27a)]['forEach'](_0x741ddd=>{const _0x220260=_0x4efce0,_0xde3f59=new Date(_0x741ddd[_0x220260(0x2b1)]);if(_0xde3f59['getTime']()>_0x383ccf)_0x2ae626[_0xde3f59[_0x220260(0x24c)]()]++;});let _0xb2aefe={'status':_0x4efce0(0x2d0)};try{const _0x300286=await this[_0x4efce0(0x1f1)](LTM_DP_DRIFT_STATUS);_0xb2aefe['status']=_0x300286?_0x300286[_0x4efce0(0x23e)]:_0x4efce0(0x2d0);}catch(_0xe7b466){}let _0x21e44c='';try{const _0x108fbd=await this[_0x4efce0(0x1f1)](_0x4efce0(0x25b));_0x21e44c=_0x108fbd?_0x108fbd[_0x4efce0(0x23e)]:'';}catch(_0x46acd1){}let _0x13737d=null;!this[_0x4efce0(0x2be)]&&(_0x13737d=this[_0x4efce0(0x2e7)]['geminiApiKey']?'KI-Modell\x20nicht\x20initialisiert':_0x4efce0(0x1ff));let _0x33c097={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x2b4995=await this[_0x4efce0(0x1f1)](_0x4efce0(0x1ea));if(_0x2b4995&&_0x2b4995[_0x4efce0(0x23e)]){_0x33c097['detected']=!![];const _0x4f1e47=await this[_0x4efce0(0x1f1)](_0x4efce0(0x243));_0x33c097[_0x4efce0(0x319)]=_0x4f1e47?_0x4f1e47[_0x4efce0(0x23e)]:'';const _0x223c9d=await this[_0x4efce0(0x1f1)]('analysis.automation.targetId');_0x33c097[_0x4efce0(0x226)]=_0x223c9d?_0x223c9d[_0x4efce0(0x23e)]:'';const _0x138b51=await this['getStateAsync'](_0x4efce0(0x27e));_0x33c097['targetValue']=_0x138b51?_0x138b51[_0x4efce0(0x23e)]:'';}const _0x385ccf=await this[_0x4efce0(0x1f1)](_0x4efce0(0x1d6));_0x33c097[_0x4efce0(0x23f)]=_0x385ccf?!!_0x385ccf[_0x4efce0(0x23e)]:![];}catch(_0x3966ad){}this[_0x4efce0(0x312)](_0x4d640a[_0x4efce0(0x266)],_0x4d640a[_0x4efce0(0x1df)],{'success':!![],'eventHistory':this[_0x4efce0(0x287)]['slice'](0x0,0xf),'stats':{'digestCount':_0x1a2eff,'eventCountToday':_0x5865b2,'hourlyActivity':_0x2ae626,'driftStatus':_0xb2aefe['status'],'isPresent':this[_0x4efce0(0x20e)],'presenceWho':_0x21e44c,'minDays':this['config'][_0x4efce0(0x1d3)]||0x7,'stbDays':this[_0x4efce0(0x2e7)][_0x4efce0(0x2bc)]||0xe,'ltbDays':this[_0x4efce0(0x2e7)][_0x4efce0(0x297)]||0x3c,'systemError':_0x13737d},'automation':_0x33c097},_0x4d640a[_0x4efce0(0x27c)]);}else{if(_0x4d640a[_0x4efce0(0x1df)]===_0x4efce0(0x27b))try{const _0x454a21=await scanner[_0x4efce0(0x2a3)](this,_0x4d640a['message']||{});this['sendTo'](_0x4d640a[_0x4efce0(0x266)],_0x4d640a[_0x4efce0(0x1df)],{'success':!![],'devices':_0x454a21},_0x4d640a[_0x4efce0(0x27c)]);}catch(_0x593507){this[_0x4efce0(0x312)](_0x4d640a[_0x4efce0(0x266)],_0x4d640a[_0x4efce0(0x1df)],{'success':![],'error':_0x593507['message']},_0x4d640a[_0x4efce0(0x27c)]);}else{if(_0x4d640a[_0x4efce0(0x1df)]===_0x4efce0(0x1d5)){const _0x493cde=await this[_0x4efce0(0x22e)](_0x4efce0(0x1f8),'enum'),_0x4ae7b3=[];if(_0x493cde)for(const _0x2b9ab0 in _0x493cde){const _0xfd03f5=_0x493cde[_0x2b9ab0],_0x383d67=(_0xfd03f5[_0x4efce0(0x214)]&&typeof _0xfd03f5[_0x4efce0(0x214)]['name']===_0x4efce0(0x20d)?_0xfd03f5[_0x4efce0(0x214)][_0x4efce0(0x1bc)]['de']:_0xfd03f5[_0x4efce0(0x214)][_0x4efce0(0x1bc)])||_0xfd03f5[_0x4efce0(0x214)][_0x4efce0(0x1bc)];_0x4ae7b3['push']({'id':_0x2b9ab0,'name':_0x383d67});}const _0x5c820c=await this[_0x4efce0(0x22e)](_0x4efce0(0x321),'enum'),_0x1c3c26=[];if(_0x5c820c)for(const _0x4dfbdc in _0x5c820c){const _0x451a94=_0x5c820c[_0x4dfbdc],_0x447214=(_0x451a94[_0x4efce0(0x214)]&&typeof _0x451a94[_0x4efce0(0x214)][_0x4efce0(0x1bc)]===_0x4efce0(0x20d)?_0x451a94[_0x4efce0(0x214)][_0x4efce0(0x1bc)]['de']:_0x451a94[_0x4efce0(0x214)][_0x4efce0(0x1bc)])||_0x4dfbdc[_0x4efce0(0x261)]('.')[_0x4efce0(0x1b2)]();_0x1c3c26[_0x4efce0(0x1f9)](_0x447214);}this[_0x4efce0(0x312)](_0x4d640a[_0x4efce0(0x266)],_0x4d640a['command'],{'success':!![],'enums':_0x4ae7b3,'rooms':_0x1c3c26},_0x4d640a[_0x4efce0(0x27c)]);}else{if(_0x4d640a[_0x4efce0(0x1df)]===_0x4efce0(0x1c8)){const _0x2ae9e0=_0x4d640a[_0x4efce0(0x244)][_0x4efce0(0x26d)];if(!_0x2ae9e0)return this['sendTo'](_0x4d640a['from'],_0x4d640a['command'],{'success':![],'error':_0x4efce0(0x263)},_0x4d640a['callback']);const _0x145846=await getCalendarNames(this,_0x2ae9e0);this['sendTo'](_0x4d640a[_0x4efce0(0x266)],_0x4d640a[_0x4efce0(0x1df)],{'success':!![],'names':_0x145846},_0x4d640a[_0x4efce0(0x27c)]);}else{if(_0x4d640a['command']===_0x4efce0(0x2b2)){const {targetId:_0x1d5343,targetValue:_0x5bce52}=_0x4d640a[_0x4efce0(0x244)];this[_0x4efce0(0x288)][_0x4efce0(0x1bf)](_0x4efce0(0x2cb)+_0x1d5343+_0x4efce0(0x277)+_0x5bce52),await this[_0x4efce0(0x30b)](_0x4efce0(0x1ea),{'val':!![],'ack':!![]}),await this[_0x4efce0(0x30b)](_0x4efce0(0x243),{'val':_0x4efce0(0x1dd)+_0x1d5343,'ack':!![]}),await this[_0x4efce0(0x30b)](_0x4efce0(0x1c6),{'val':_0x1d5343,'ack':!![]}),await this[_0x4efce0(0x30b)](_0x4efce0(0x27e),{'val':_0x5bce52,'ack':!![]}),this[_0x4efce0(0x312)](_0x4d640a[_0x4efce0(0x266)],_0x4d640a[_0x4efce0(0x1df)],{'success':!![]},_0x4d640a[_0x4efce0(0x27c)]);}else{if(_0x4d640a[_0x4efce0(0x1df)]===_0x4efce0(0x2b9)){const {historyId:_0x50ff11,rating:_0x365106,comment:_0x264a09,alertReason:_0x397608}=_0x4d640a[_0x4efce0(0x244)];_0x50ff11&&_0x365106?(await saveFeedback(this,{'timestamp':Date[_0x4efce0(0x2b3)](),'historyId':_0x50ff11,'rating':_0x365106,'comment':_0x264a09,'alertReason':_0x397608}),this[_0x4efce0(0x312)](_0x4d640a[_0x4efce0(0x266)],_0x4d640a[_0x4efce0(0x1df)],{'success':!![]},_0x4d640a[_0x4efce0(0x27c)])):this['sendTo'](_0x4d640a['from'],_0x4d640a[_0x4efce0(0x1df)],{'success':![],'error':_0x4efce0(0x1b6)},_0x4d640a[_0x4efce0(0x27c)]);}else _0x4d640a['command']===_0x4efce0(0x291)&&(this['log'][_0x4efce0(0x1bf)](_0x4efce0(0x205)),await this[_0x4efce0(0x30b)](_0x4efce0(0x1ea),{'val':![],'ack':!![]}),await this[_0x4efce0(0x30b)](_0x4efce0(0x243),{'val':'','ack':!![]}),this[_0x4efce0(0x312)](_0x4d640a[_0x4efce0(0x266)],_0x4d640a['command'],{'success':!![]},_0x4d640a[_0x4efce0(0x27c)]));}}}}}}}}}}}if(require[a0_0x121d89(0x2c7)]!==module)module[a0_0x121d89(0x2ca)]=_0xe0f0dc=>new CogniLiving(_0xe0f0dc);else new CogniLiving();