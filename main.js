const a0_0x3cb703=a0_0x4929;(function(_0x5365dd,_0x4a908e){const _0x1024ef=a0_0x4929,_0x436fec=_0x5365dd();while(!![]){try{const _0x88cd31=parseInt(_0x1024ef(0x2c5))/0x1*(parseInt(_0x1024ef(0x28e))/0x2)+parseInt(_0x1024ef(0x226))/0x3+parseInt(_0x1024ef(0x2e2))/0x4*(parseInt(_0x1024ef(0x2f7))/0x5)+-parseInt(_0x1024ef(0x2d3))/0x6+-parseInt(_0x1024ef(0x30e))/0x7*(-parseInt(_0x1024ef(0x32d))/0x8)+parseInt(_0x1024ef(0x327))/0x9*(-parseInt(_0x1024ef(0x27a))/0xa)+parseInt(_0x1024ef(0x2aa))/0xb*(parseInt(_0x1024ef(0x2bd))/0xc);if(_0x88cd31===_0x4a908e)break;else _0x436fec['push'](_0x436fec['shift']());}catch(_0x464174){_0x436fec['push'](_0x436fec['shift']());}}}(a0_0x3aaa,0x50815));const a0_0x14793f=(function(){let _0x14706f=!![];return function(_0x37639b,_0x16357d){const _0x40824c=_0x14706f?function(){if(_0x16357d){const _0x51884a=_0x16357d['apply'](_0x37639b,arguments);return _0x16357d=null,_0x51884a;}}:function(){};return _0x14706f=![],_0x40824c;};}()),a0_0x50cd7a=a0_0x14793f(this,function(){const _0x80d8a9=a0_0x4929;return a0_0x50cd7a[_0x80d8a9(0x316)]()[_0x80d8a9(0x32f)]('(((.+)+)+)+$')[_0x80d8a9(0x316)]()[_0x80d8a9(0x332)](a0_0x50cd7a)[_0x80d8a9(0x32f)](_0x80d8a9(0x2d5));});a0_0x50cd7a();function a0_0x3aaa(){const _0x53f010=['temperature','.venv','log','saveDailyHistory','217108xWftvt','üîä\x20Infraschall:\x20','LTM.triggerDailyDigest','presenceDevices','clear','setPresence','roomIntegratorTimer','getTime','sonn','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','infrasoundThreshold','Warm-Up\x20Time','some','subscribeForeignStatesAsync','utf8','getForeignObjectsAsync','send','isPresent','TRAIN_HEALTH','startSystem','ready','toLowerCase','writeFileSync','healthTrendInterval','¬∞C)','history','\x20sequences','scanThermostats','1440417BYmRSa','üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','SYSTEM_MODES','\x20(Threshold)','security','calendarName','checkWifiPresence:\x20Error\x20checking\x20','./lib/scheduler','forecast.current.weather','analyzeWindowOpening\x20error:\x20','daswetter.0','pressureBuffer','SYSTEM_DP_MODE','analysis.security.learningStatus','split','cogni-living\x20adapter\x20starting\x20(v','sunny','object','üì¶\x20Restored\x20','36ugdEcD','comfort','application/json','Corrupt','system.adapter.ical.','appendToLog','¬∞C\x20(Innen:\x20','loadSystemMode','5RZMWgL','analysis.training.triggerSecurity','modeResetJob','onUnload','value','slice','analysis.health.todayVector','TRAIN_TOPOLOGY','initSchedules','analysis.training.triggerComfort','analysis.automation.patternDetected','{\x22history\x22:{}}','cogni-living','readFileSync','3666672qmACbg','analysis.health.activityTrend','(((.+)+)+)+$','Say\x20Hello','getAbsoluteDefaultDataDir','No\x20data','Live\x20Event\x20Pulse','‚Ü∫\x20Replaying\x20','guest','toLocaleTimeString','runPythonHealthCheck','online','unload','threshold_exceeded','Warte\x20auf\x20Analyse...','32428AnZLaG','analysis.energy.warmupTargets','getHours','checkWifiPresence','modules','dailyDigests','[PythonBridge]\x20Forwarding\x20command:\x20','TRAIN_COMFORT','config','isArray','calendarCheckTimer','analysisHistory','location','geminiModel','custom','./lib/dead_man','analysis.visualization.pulse',')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)','Init...','moduleEnergy','cleanupGhostInterventions','185WbNQEe','Keine\x20Daten','triggerHealth\x20error:\x20','runAutopilot','values','Unknown','now','energy','weatherTempId','thermostat','generateContent','outdoorSensorId','History\x20Save\x20Error:\x20','terrasse','exports','models/gemini-flash-latest','enum.rooms.*','handleInfrasound','haust√ºr','min','sendTo','2-digit','instance','1127pxWZQC','rows','analysis.activity.roomStats','keys','Gute\x20L√ºftungsm√∂glichkeit!','triggerEnergyPrediction','isProVersion','stateChange','toString','analysis.safety.infrasoundAlert','rawEventLog','./lib/ai_agent','Current.WeatherText','currentSystemMode','minDaysForBaseline','initSystemConfig','includes','analysis.energy.warmupSources','abortExitTimer','state','system.presenceWho','apiKey','getCalendarNames','callback','setStateAsync','131850oRexNg','systemConfig','heiter','updateTopology','Event','fill','12424pJrJbz','date','search','devices','Gemini\x20Init\x20Error:\x20','constructor','geminiApiKey','dependencyInstallInProgress','push','Daily\x20Room\x20Details\x20(48x30min)','analysis.activity.roomHistory','motion','triggerInfrasoundCorrelation','party','./lib/scanner','moduleSecurity','number',',\x20Temp:\x20','sensorLastValues','.system.mode','message','analysis.training.triggerHealth','system','name','times','then','events.history','pythonBridge\x20command\x20failed:\x20','updateSchedulePreview','analysis.automation.targetId','debug','analysis.training.triggerEnergy','getMinutes',':\x20Temp-Differenz\x20','lastAlertState','¬∞C,\x20Au√üen:\x20','todayVector','round','./lib/python_bridge','klar','historyJob','getObjectViewAsync','door','response','\x20>\x20','analysis.security.lastScore','onStateChange','triggerGaitAnalysis\x20parse\x20error:\x20','bind','executeAutomationAction','subscribeForeignStates','analysis.training.triggerTopology','open','üîä\x20FORENSIC:\x20Infraschall\x20bei\x20Abwesenheit!\x20Pressure:\x20','checkCalendarTriggers','.uptime','analysis.trigger','\x20Kalender-Adapter\x20gefunden.','checkSolarCondition','useCalendar','de-DE','memoryCache','‚úÖ\x20History\x20saved:\x20','scanForDevices','replace','automation.triggerAction','infrasoundEnabled','initZombies','subscribeStates','Adapter','triggerDailyDigest','analysis.health.todayRoomDetails','Daily\x20Activity\x20Vector\x20(48x30min)','@iobroker/adapter-core','from','driftAnalysisTimer','text','General\x20Activity\x20Trend','toISOString','getStateAsync','analysis.prediction.trackerConfidence','updateHealthVector','L√ºften\x20empfohlen','analysis.energy.warmupTimes','telegram','analysis.automation.targetValue','inactivityThresholdHours','getEnums','Manual\x20Event','infrasoundLocked','analysis.ventilation.lastWindow','node-schedule','processSensorEvent','communicate.request','VACATION','ERROR','getOverviewData','.last_seen','type','167724iODZrR','Unbekannt','enum','scanDevices','filter','activeModules','TRAIN_SECURITY','val','runGeminiAnalysis','getDate','createDailyDigest','onReady','triggerGaitAnalysis','warn','generateHealthReport','LTM.rawEventLog','refreshCalendar','triggerBriefing','triggerGaitAnalysis\x20error:\x20','max','map','infrasoundSensorId','cancel','moduleComfort','üîä\x20Infraschall-Alarm:\x20','getForeignStateAsync','\x20-\x20','add','üìù\x20Manual\x20event\x20logged:\x20','find','python','setState','command','scheduleJob','LTM.dailyDigests','üö®\x20INFRASCHALL-ALARM:\x20Anomalie\x20bei\x20Abwesenheit\x20(scharf)!','Guest\x20Mode','timestamp','Niemand','integrateRoomTime','existsSync','json','forEach','Verbindung\x20erfolgreich:\x20','setHours','endsWith','LTM.baselineStatus','ack',',\x20Events:\x0a','updateLocation','protectAiMemory','CALCULATE_HEALTH_TREND','Lernphase\x20(','Sonne:\x20','analyzeWindowOpening','59\x2023\x20*\x20*\x20*','mkdirSync','analysis.training.status','info','getGenerativeModel','PREDICT_ENERGY','‚òÄÔ∏è\x20Solar\x20Condition:\x20SUNNY\x20detected\x20via\x20','enum.functions.*','analysis.health.geminiNight','lastTrackerEventTime','toLocaleDateString','onMessage','genAI','error','presenceCheckTimer','checkThermostats','setObjectNotExistsAsync','briefingJob','\x20events\x20from\x20today...','LTM.trainingData.sequences','analysisTimer','./lib/setup','moduleHealth','join','analysis.health.geminiDay','eventHistory','parse','exitTimer','refreshCalendar\x20failed:\x20','410VNyFop','stringify','string','Gemini\x20Report\x20Day','./lib/automation','namespace','accuweather.0','./lib/topology','...','Scan\x20Error:\x20','toFixed','\x20(Bewohner\x20anwesend\x20-\x20normal)','.json','./lib/installer','length','health'];a0_0x3aaa=function(){return _0x53f010;};return a0_0x3aaa();}'use strict';const utils=require(a0_0x3cb703(0x20c)),{GoogleGenerativeAI}=require('@google/generative-ai'),path=require('path'),fs=require('fs'),installer=require(a0_0x3cb703(0x287)),scanner=require(a0_0x3cb703(0x33b)),schedulers=require(a0_0x3cb703(0x2b1)),topology=require(a0_0x3cb703(0x281)),setup=require(a0_0x3cb703(0x272)),recorder=require('./lib/recorder'),pythonBridge=require(a0_0x3cb703(0x353)),aiAgent=require(a0_0x3cb703(0x319)),deadMan=require(a0_0x3cb703(0x2f1)),automation=require(a0_0x3cb703(0x27e)),GEMINI_MODEL=a0_0x3cb703(0x306);class CogniLiving extends utils[a0_0x3cb703(0x208)]{constructor(_0x371c27){const _0x2f84fc=a0_0x3cb703;super({..._0x371c27,'name':_0x2f84fc(0x2d1)}),this['eventHistory']=[],this[_0x2f84fc(0x2ed)]=[],this['rawEventLog']=[],this[_0x2f84fc(0x2e7)]=[],this['sensorLastValues']={},this[_0x2f84fc(0x328)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x2f84fc(0x29f)]=!![],this[_0x2f84fc(0x278)]=null,this['exitGraceTimer']=null,this['isGracePeriodActive']=![],this[_0x2f84fc(0x269)]=null,this['geminiModel']=null,this['currentSystemMode']=setup[_0x2f84fc(0x2ac)]['NORMAL'],this[_0x2f84fc(0x314)]=![],this[_0x2f84fc(0x34f)]=![],this['analysisTimer']=null,this['calendarCheckTimer']=null,this[_0x2f84fc(0x26b)]=null,this['ltmJob']=null,this[_0x2f84fc(0x2c7)]=null,this[_0x2f84fc(0x20e)]=null,this[_0x2f84fc(0x26e)]=null,this[_0x2f84fc(0x355)]=null,this['trackerHeartbeat']=null,this[_0x2f84fc(0x2a5)]=null,this[_0x2f84fc(0x294)]=null,this['dependencyInstallInProgress']=![],this[_0x2f84fc(0x266)]=Date[_0x2f84fc(0x2fd)](),this[_0x2f84fc(0x200)]=null,this['bootTime']=Date[_0x2f84fc(0x2fd)](),this[_0x2f84fc(0x21c)]=![],this[_0x2f84fc(0x2b5)]=[],this[_0x2f84fc(0x22b)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x2f84fc(0x2a2),this['onReady'][_0x2f84fc(0x1f3)](this)),this['on'](_0x2f84fc(0x315),this[_0x2f84fc(0x35b)][_0x2f84fc(0x1f3)](this)),this['on'](_0x2f84fc(0x2df),this[_0x2f84fc(0x2c8)][_0x2f84fc(0x1f3)](this)),this['on'](_0x2f84fc(0x341),this[_0x2f84fc(0x268)][_0x2f84fc(0x1f3)](this));}async[a0_0x3cb703(0x231)](){const _0x3e5c7d=a0_0x3cb703;this[_0x3e5c7d(0x28c)][_0x3e5c7d(0x260)](_0x3e5c7d(0x2b9)+this['version']+_0x3e5c7d(0x2f3));if(this[_0x3e5c7d(0x2ea)][_0x3e5c7d(0x273)]!==undefined)this[_0x3e5c7d(0x22b)][_0x3e5c7d(0x289)]=this[_0x3e5c7d(0x2ea)][_0x3e5c7d(0x273)];if(this[_0x3e5c7d(0x2ea)][_0x3e5c7d(0x33c)]!==undefined)this[_0x3e5c7d(0x22b)][_0x3e5c7d(0x2ae)]=this[_0x3e5c7d(0x2ea)][_0x3e5c7d(0x33c)];if(this[_0x3e5c7d(0x2ea)]['moduleEnergy']!==undefined)this[_0x3e5c7d(0x22b)][_0x3e5c7d(0x2fe)]=this['config'][_0x3e5c7d(0x2f5)];if(this[_0x3e5c7d(0x2ea)][_0x3e5c7d(0x23d)]!==undefined)this[_0x3e5c7d(0x22b)][_0x3e5c7d(0x2be)]=this['config'][_0x3e5c7d(0x23d)];if(this[_0x3e5c7d(0x2ea)][_0x3e5c7d(0x2e6)])this[_0x3e5c7d(0x22b)]={...this[_0x3e5c7d(0x22b)],...this[_0x3e5c7d(0x2ea)][_0x3e5c7d(0x2e6)]};this[_0x3e5c7d(0x2a1)]();}async[a0_0x3cb703(0x2a1)](){const _0x2cb8eb=a0_0x3cb703;await setup[_0x2cb8eb(0x206)](this);try{this[_0x2cb8eb(0x314)]=await setup['checkLicense'](this['config']['licenseKey']);}catch(_0xc223){}if(!this['config'][_0x2cb8eb(0x219)]||this[_0x2cb8eb(0x2ea)][_0x2cb8eb(0x219)]<0.1)this[_0x2cb8eb(0x2ea)][_0x2cb8eb(0x219)]=0xc;await setup['initHistory'](this),await setup[_0x2cb8eb(0x31d)](this);try{const _0x1774b1=await this[_0x2cb8eb(0x212)](_0x2cb8eb(0x216)),_0x2f0dfb=await this['getStateAsync'](_0x2cb8eb(0x31f));_0x1774b1&&_0x1774b1[_0x2cb8eb(0x22d)]&&_0x2f0dfb&&_0x2f0dfb[_0x2cb8eb(0x22d)]&&(Date[_0x2cb8eb(0x2fd)]()-_0x1774b1['ts']<0x4*0xe10*0x3e8&&(this[_0x2cb8eb(0x200)]={'times':JSON[_0x2cb8eb(0x277)](_0x1774b1[_0x2cb8eb(0x22d)]),'sources':JSON['parse'](_0x2f0dfb[_0x2cb8eb(0x22d)])}));}catch(_0x327090){}if(this[_0x2cb8eb(0x2ea)]['geminiApiKey'])try{this[_0x2cb8eb(0x269)]=new GoogleGenerativeAI(this[_0x2cb8eb(0x2ea)][_0x2cb8eb(0x333)]),this[_0x2cb8eb(0x2ef)]=this['genAI'][_0x2cb8eb(0x261)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x2cb8eb(0x2bf)}});}catch(_0x41e3d2){this[_0x2cb8eb(0x28c)][_0x2cb8eb(0x26a)](_0x2cb8eb(0x331)+_0x41e3d2[_0x2cb8eb(0x341)]);}await setup['createAllObjects'](this),await this[_0x2cb8eb(0x2c4)](),schedulers[_0x2cb8eb(0x2cd)](this),await this[_0x2cb8eb(0x26d)](_0x2cb8eb(0x2f2),{'type':_0x2cb8eb(0x321),'common':{'name':_0x2cb8eb(0x2d9),'type':_0x2cb8eb(0x33d),'role':_0x2cb8eb(0x2c9),'read':!![],'write':![]},'native':{}}),await this[_0x2cb8eb(0x26d)](_0x2cb8eb(0x310),{'type':_0x2cb8eb(0x321),'common':{'name':'Room\x20Dwell\x20Time\x20Stats','type':_0x2cb8eb(0x27c),'role':_0x2cb8eb(0x24f),'read':!![],'write':![],'def':'{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}'},'native':{}}),await this[_0x2cb8eb(0x26d)](_0x2cb8eb(0x337),{'type':_0x2cb8eb(0x321),'common':{'name':'Room\x20History\x20(24h\x20Buckets)','type':'string','role':'json','read':!![],'write':![],'def':_0x2cb8eb(0x2d0)},'native':{}}),await this['setObjectNotExistsAsync'](_0x2cb8eb(0x265),{'type':'state','common':{'name':'Gemini\x20Report\x20Night','type':_0x2cb8eb(0x27c),'role':_0x2cb8eb(0x20f),'read':!![],'write':![],'def':_0x2cb8eb(0x2e1)},'native':{}}),await this[_0x2cb8eb(0x26d)](_0x2cb8eb(0x275),{'type':_0x2cb8eb(0x321),'common':{'name':_0x2cb8eb(0x27d),'type':'string','role':_0x2cb8eb(0x20f),'read':!![],'write':![],'def':_0x2cb8eb(0x2e1)},'native':{}}),await this[_0x2cb8eb(0x26d)](_0x2cb8eb(0x2cb),{'type':_0x2cb8eb(0x321),'common':{'name':_0x2cb8eb(0x20b),'type':_0x2cb8eb(0x27c),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x2cb8eb(0x26d)](_0x2cb8eb(0x20a),{'type':_0x2cb8eb(0x321),'common':{'name':_0x2cb8eb(0x336),'type':_0x2cb8eb(0x27c),'role':_0x2cb8eb(0x24f),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x2cb8eb(0x26d)](_0x2cb8eb(0x2d4),{'type':_0x2cb8eb(0x321),'common':{'name':_0x2cb8eb(0x210),'type':_0x2cb8eb(0x33d),'role':'value','unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x2cb8eb(0x26d)](_0x2cb8eb(0x216),{'type':'state','common':{'name':_0x2cb8eb(0x299),'type':_0x2cb8eb(0x27c),'role':'json','read':!![],'write':![]},'native':{}});try{const _0xb693d5=await this['getStateAsync'](_0x2cb8eb(0x347));if(_0xb693d5&&_0xb693d5[_0x2cb8eb(0x22d)]){this[_0x2cb8eb(0x276)]=JSON[_0x2cb8eb(0x277)](_0xb693d5[_0x2cb8eb(0x22d)]);if(this[_0x2cb8eb(0x314)]){const _0x35ca4b=await this[_0x2cb8eb(0x212)](_0x2cb8eb(0x235));if(_0x35ca4b&&_0x35ca4b[_0x2cb8eb(0x22d)])this[_0x2cb8eb(0x318)]=JSON['parse'](_0x35ca4b[_0x2cb8eb(0x22d)]);}this['log']['info'](_0x2cb8eb(0x2bc)+this[_0x2cb8eb(0x276)][_0x2cb8eb(0x288)]+'\x20events\x20from\x20standard\x20storage.');}}catch(_0x5f3b47){this[_0x2cb8eb(0x276)]=[];}try{const _0x15d3a5=await this[_0x2cb8eb(0x212)](_0x2cb8eb(0x248));if(_0x15d3a5&&_0x15d3a5['val'])this[_0x2cb8eb(0x2e7)]=JSON[_0x2cb8eb(0x277)](_0x15d3a5[_0x2cb8eb(0x22d)]);}catch(_0x2b72a4){this[_0x2cb8eb(0x2e7)]=[];}const _0x269f5b=this[_0x2cb8eb(0x2e7)][_0x2cb8eb(0x288)]>=(this[_0x2cb8eb(0x2ea)]['minDaysForBaseline']||0x7)?'Aktiv\x20('+this[_0x2cb8eb(0x2e7)][_0x2cb8eb(0x288)]+'\x20Tage)':_0x2cb8eb(0x25a)+this[_0x2cb8eb(0x2e7)]['length']+'/'+(this[_0x2cb8eb(0x2ea)][_0x2cb8eb(0x31c)]||0x7)+')';await this['setStateAsync'](_0x2cb8eb(0x254),{'val':_0x269f5b,'ack':!![]}),this[_0x2cb8eb(0x207)](_0x2cb8eb(0x1fb)),this[_0x2cb8eb(0x207)](_0x2cb8eb(0x290)),this[_0x2cb8eb(0x207)](_0x2cb8eb(0x342));this[_0x2cb8eb(0x2ea)]['infrasoundEnabled']&&this['config'][_0x2cb8eb(0x23b)]&&this[_0x2cb8eb(0x22b)][_0x2cb8eb(0x2ae)]&&this[_0x2cb8eb(0x1f5)](this[_0x2cb8eb(0x2ea)][_0x2cb8eb(0x23b)]);const _0x5397ca=this[_0x2cb8eb(0x2ea)]['devices'];if(_0x5397ca)for(const _0x2afd6f of _0x5397ca){await this[_0x2cb8eb(0x29b)](_0x2afd6f['id']);}const _0x855fce=this[_0x2cb8eb(0x2ea)]['presenceDevices'];if(_0x855fce)for(const _0x2ab3f1 of _0x855fce){await this[_0x2cb8eb(0x29b)](_0x2ab3f1);}const _0x55e105=require(_0x2cb8eb(0x21e));if(this[_0x2cb8eb(0x355)])this[_0x2cb8eb(0x355)][_0x2cb8eb(0x23c)]();this[_0x2cb8eb(0x355)]=_0x55e105[_0x2cb8eb(0x247)](_0x2cb8eb(0x25d),()=>{this['saveDailyHistory']();}),setTimeout(()=>this['replayTodayEvents'](),0x1388);if(this[_0x2cb8eb(0x294)])clearInterval(this[_0x2cb8eb(0x294)]);this[_0x2cb8eb(0x24d)](),this[_0x2cb8eb(0x294)]=setInterval(async()=>{const _0x47ba61=_0x2cb8eb;await this[_0x47ba61(0x24d)]();},0x3c*0x3e8);if(this[_0x2cb8eb(0x2a5)])clearInterval(this[_0x2cb8eb(0x2a5)]);this[_0x2cb8eb(0x2a5)]=setInterval(()=>{const _0x43a003=_0x2cb8eb;this[_0x43a003(0x314)]&&this['activeModules']['health']&&this[_0x43a003(0x2dd)]();},0x4*0x3c*0x3c*0x3e8);if(this[_0x2cb8eb(0x271)])clearInterval(this[_0x2cb8eb(0x271)]);this[_0x2cb8eb(0x22b)][_0x2cb8eb(0x2fe)]&&(this[_0x2cb8eb(0x271)]=setInterval(()=>{this['triggerEnergyPrediction']();},0xf*0x3c*0x3e8),setTimeout(()=>this[_0x2cb8eb(0x313)](),0x2710));if(this[_0x2cb8eb(0x2ec)])clearInterval(this[_0x2cb8eb(0x2ec)]);this['config'][_0x2cb8eb(0x1fe)]&&this[_0x2cb8eb(0x22b)][_0x2cb8eb(0x2fe)]&&(this[_0x2cb8eb(0x2ec)]=setInterval(()=>{const _0x4b9718=_0x2cb8eb;automation[_0x4b9718(0x1f9)](this);},0x2*0x3c*0x3e8),setTimeout(()=>automation[_0x2cb8eb(0x1f9)](this),0x3a98));if(this[_0x2cb8eb(0x26b)])clearInterval(this[_0x2cb8eb(0x26b)]);this[_0x2cb8eb(0x2ea)][_0x2cb8eb(0x291)]&&this[_0x2cb8eb(0x2ea)][_0x2cb8eb(0x291)][_0x2cb8eb(0x288)]>0x0&&(this[_0x2cb8eb(0x26b)]=setInterval(async()=>{const _0xa659dd=_0x2cb8eb;await this[_0xa659dd(0x2e5)]();},0x3c*0x3e8),setTimeout(async()=>await this['checkWifiPresence'](),0x1388));const _0x69240c=path[_0x2cb8eb(0x274)](__dirname,_0x2cb8eb(0x28b),'bin',_0x2cb8eb(0x244));pythonBridge['startService'](this,_0x69240c);}[a0_0x3cb703(0x2c8)](_0x1e15f6){const _0x5d115c=a0_0x3cb703;if(this[_0x5d115c(0x355)])this[_0x5d115c(0x355)][_0x5d115c(0x23c)]();this[_0x5d115c(0x28d)]()[_0x5d115c(0x346)](()=>{const _0x183b29=_0x5d115c;if(this['analysisTimer'])clearInterval(this[_0x183b29(0x271)]);if(this[_0x183b29(0x2ec)])clearInterval(this[_0x183b29(0x2ec)]);if(this[_0x183b29(0x26b)])clearInterval(this[_0x183b29(0x26b)]);if(this[_0x183b29(0x294)])clearInterval(this['roomIntegratorTimer']);recorder[_0x183b29(0x320)](this),pythonBridge['stopService'](this),_0x1e15f6();});}async['replayTodayEvents'](){const _0x2a56bd=a0_0x3cb703;if(!this[_0x2a56bd(0x276)]||this[_0x2a56bd(0x276)]['length']===0x0){this['log']['warn']('‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.');return;}this[_0x2a56bd(0x28c)][_0x2a56bd(0x260)](_0x2a56bd(0x2da)+this['eventHistory'][_0x2a56bd(0x288)]+_0x2a56bd(0x26f));const _0x4e9f8e=new Date()[_0x2a56bd(0x252)](0x0,0x0,0x0,0x0),_0x36ace2=_0x2a56bd(0x337);let _0x3346e5={'history':{},'date':new Date()[_0x2a56bd(0x267)]()};const _0x2b6c9c='analysis.health.todayVector',_0x26de74=_0x2a56bd(0x20a);let _0x548ef9=new Array(0x30)[_0x2a56bd(0x32c)](0x0),_0x1a4b19=Array['from']({'length':0x30},()=>[]);this[_0x2a56bd(0x276)][_0x2a56bd(0x250)](_0x2781d3=>{const _0x5a8646=_0x2a56bd;if(_0x2781d3['timestamp']>=_0x4e9f8e){if(recorder['isRelevantActivity'](_0x2781d3[_0x5a8646(0x225)],_0x2781d3[_0x5a8646(0x2c9)])){const _0x4e4d18=new Date(_0x2781d3['timestamp']),_0x16d863=_0x4e4d18[_0x5a8646(0x2e4)]()*0x2+(_0x4e4d18['getMinutes']()>=0x1e?0x1:0x0);if(_0x16d863<0x30){_0x548ef9[_0x16d863]++;const _0x5deb44=_0x2781d3[_0x5a8646(0x2ee)]||_0x2781d3[_0x5a8646(0x344)]||'?';let _0x58f2c2=_0x1a4b19[_0x16d863];!_0x58f2c2[_0x5a8646(0x31e)](_0x5deb44)&&_0x58f2c2[_0x5a8646(0x335)](_0x5deb44);}const _0x350a18=_0x4e4d18[_0x5a8646(0x2e4)]();let _0x3e1f83=_0x2781d3[_0x5a8646(0x2ee)]||_0x5a8646(0x2fc);const _0x203a46=(this[_0x5a8646(0x2ea)][_0x5a8646(0x330)]||[])[_0x5a8646(0x243)](_0x414275=>_0x414275[_0x5a8646(0x2ee)]===_0x3e1f83);if(_0x203a46)_0x3e1f83=_0x203a46[_0x5a8646(0x2ee)];if(!_0x3346e5[_0x5a8646(0x2a7)][_0x3e1f83])_0x3346e5[_0x5a8646(0x2a7)][_0x3e1f83]=new Array(0x18)[_0x5a8646(0x32c)](0x0);if(_0x3346e5[_0x5a8646(0x2a7)][_0x3e1f83][_0x350a18]<0x3c)_0x3346e5['history'][_0x3e1f83][_0x350a18]++;}}});const _0x498467=await this[_0x2a56bd(0x212)](_0x36ace2);(!_0x498467||!_0x498467['val']||_0x498467['val']==='{}'||_0x498467['val']['includes']('\x22history\x22:{}'))&&await this[_0x2a56bd(0x326)](_0x36ace2,{'val':JSON[_0x2a56bd(0x27b)](_0x3346e5),'ack':!![]}),await this[_0x2a56bd(0x326)](_0x2b6c9c,{'val':JSON[_0x2a56bd(0x27b)](_0x548ef9),'ack':!![]}),await this[_0x2a56bd(0x326)](_0x26de74,{'val':JSON[_0x2a56bd(0x27b)](_0x1a4b19),'ack':!![]}),this[_0x2a56bd(0x28c)][_0x2a56bd(0x260)]('‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.');}async[a0_0x3cb703(0x28d)](){const _0x115117=a0_0x3cb703;if(!this[_0x115117(0x22b)]['health'])return;const _0x4f457c=new Date()[_0x115117(0x211)]()['split']('T')[0x0];this[_0x115117(0x28c)][_0x115117(0x34b)]('üíæ\x20Saving\x20Daily\x20History\x20for\x20'+_0x4f457c+_0x115117(0x282));try{const [_0x1953e3,_0x5cff52,_0x46449a,_0x510cdf,_0x241900,_0x3d27a3]=await Promise['all']([this['getStateAsync']('analysis.activity.roomHistory'),this[_0x115117(0x212)](_0x115117(0x265)),this[_0x115117(0x212)](_0x115117(0x275)),this[_0x115117(0x212)](_0x115117(0x35a)),this[_0x115117(0x212)](_0x115117(0x2cb)),this[_0x115117(0x212)](_0x115117(0x2d4))]),_0x2e83c1=this[_0x115117(0x276)]['filter'](_0xa6f382=>_0xa6f382['timestamp']>=new Date()['setHours'](0x0,0x0,0x0,0x0)&&(_0xa6f382['name'][_0x115117(0x2a3)]()[_0x115117(0x31e)](_0x115117(0x309))||_0xa6f382[_0x115117(0x344)][_0x115117(0x2a3)]()[_0x115117(0x31e)](_0x115117(0x304)))&&(_0xa6f382[_0x115117(0x2c9)]===!![]||_0xa6f382[_0x115117(0x2c9)]==='open'))[_0x115117(0x288)];let _0x2a1318=0x55;if(_0x3d27a3&&_0x3d27a3[_0x115117(0x22d)]!==undefined)_0x2a1318=Math[_0x115117(0x30a)](0x64,Math[_0x115117(0x239)](0x14,Math[_0x115117(0x352)](0x50+Number(_0x3d27a3[_0x115117(0x22d)])*0x5)));const _0x1f13ac={'date':_0x4f457c,'timestamp':Date['now'](),'roomHistory':_0x1953e3?.[_0x115117(0x22d)]?JSON['parse'](_0x1953e3[_0x115117(0x22d)]):{},'geminiNight':_0x5cff52?.[_0x115117(0x22d)]||'Keine\x20Daten','geminiDay':_0x46449a?.[_0x115117(0x22d)]||_0x115117(0x2f8),'anomalyScore':_0x510cdf?.[_0x115117(0x22d)]||0.1,'todayVector':_0x241900?.[_0x115117(0x22d)]?JSON[_0x115117(0x277)](_0x241900['val']):new Array(0x30)[_0x115117(0x32c)](0x0),'batteryLevel':_0x2a1318,'freshAirCount':_0x2e83c1,'eventHistory':this['eventHistory']},_0x3e9270=utils[_0x115117(0x2d7)](),_0x283777=path[_0x115117(0x274)](_0x3e9270,'cogni-living',_0x115117(0x2a7));if(!fs['existsSync'](_0x283777))fs[_0x115117(0x25e)](_0x283777,{'recursive':!![]});const _0x2d20ef=path[_0x115117(0x274)](_0x283777,_0x4f457c+_0x115117(0x286));fs[_0x115117(0x2a4)](_0x2d20ef,JSON['stringify'](_0x1f13ac)),this[_0x115117(0x28c)][_0x115117(0x260)](_0x115117(0x201)+_0x2d20ef);}catch(_0x1a845a){this[_0x115117(0x28c)][_0x115117(0x26a)](_0x115117(0x303)+_0x1a845a['message']);}}async[a0_0x3cb703(0x24d)](){const _0x39ca18=a0_0x3cb703;if(!this[_0x39ca18(0x29f)])return;try{let _0x2b9283=null;try{const _0x2a6dc6=await this['getStateAsync']('analysis.prediction.trackerTopRoom'),_0x1bca5e=await this[_0x39ca18(0x212)](_0x39ca18(0x213));if(_0x2a6dc6&&_0x2a6dc6[_0x39ca18(0x22d)]&&_0x1bca5e&&_0x1bca5e[_0x39ca18(0x22d)]&&_0x1bca5e[_0x39ca18(0x22d)]>0.3){if(_0x2a6dc6[_0x39ca18(0x22d)]!==_0x39ca18(0x2fc)&&_0x2a6dc6[_0x39ca18(0x22d)]!==_0x39ca18(0x2f4))_0x2b9283=_0x2a6dc6[_0x39ca18(0x22d)];}}catch(_0x34769d){}if(!_0x2b9283){const _0x21a387=this[_0x39ca18(0x2ea)][_0x39ca18(0x330)]||[];for(const _0x218679 of _0x21a387){if(_0x218679[_0x39ca18(0x225)]===_0x39ca18(0x338)&&_0x218679[_0x39ca18(0x2ee)])try{const _0x2bbef6=await this['getForeignStateAsync'](_0x218679['id']);if(_0x2bbef6&&(_0x2bbef6[_0x39ca18(0x22d)]===!![]||_0x2bbef6[_0x39ca18(0x22d)]==='on'||_0x2bbef6[_0x39ca18(0x22d)]===0x1)){_0x2b9283=_0x218679[_0x39ca18(0x2ee)];break;}}catch(_0x2847b3){}}}if(!_0x2b9283)return;const _0x28b9c0=this[_0x39ca18(0x2ea)][_0x39ca18(0x330)]||[];let _0x586a9f=_0x2b9283;const _0x3b92ea=_0x28b9c0['find'](_0x3c2de8=>_0x3c2de8[_0x39ca18(0x2ee)]&&_0x3c2de8[_0x39ca18(0x2ee)][_0x39ca18(0x2a3)]()===_0x2b9283['toLowerCase']());if(_0x3b92ea)_0x586a9f=_0x3b92ea['location'];const _0x225911=_0x39ca18(0x337),_0x2aa135=await this[_0x39ca18(0x212)](_0x225911),_0x5949c0=new Date()[_0x39ca18(0x267)]();let _0x36420c={'history':{},'date':_0x5949c0};if(_0x2aa135&&_0x2aa135[_0x39ca18(0x22d)])try{_0x36420c=JSON[_0x39ca18(0x277)](_0x2aa135[_0x39ca18(0x22d)]);}catch(_0x5767c9){}_0x36420c['date']!==_0x5949c0&&(_0x36420c[_0x39ca18(0x2a7)]={},_0x36420c[_0x39ca18(0x32e)]=_0x5949c0);if(!_0x36420c[_0x39ca18(0x2a7)][_0x586a9f])_0x36420c[_0x39ca18(0x2a7)][_0x586a9f]=new Array(0x18)[_0x39ca18(0x32c)](0x0);const _0x5ed24d=new Date()[_0x39ca18(0x2e4)]();if(_0x36420c[_0x39ca18(0x2a7)][_0x586a9f][_0x5ed24d]<0x3c)_0x36420c[_0x39ca18(0x2a7)][_0x586a9f][_0x5ed24d]++;await this[_0x39ca18(0x326)](_0x225911,{'val':JSON[_0x39ca18(0x27b)](_0x36420c),'ack':!![]});}catch(_0x50fe60){this[_0x39ca18(0x28c)][_0x39ca18(0x233)]('[Integrator]\x20Error:\x20'+_0x50fe60['message']);}}async[a0_0x3cb703(0x268)](_0x233f35){const _0x5ef4c1=a0_0x3cb703;if(typeof _0x233f35===_0x5ef4c1(0x2bb)&&_0x233f35['message']){if(_0x233f35['command']==='getHistoryData'){const _0x5acacf=_0x233f35[_0x5ef4c1(0x341)]['date'],_0x1d78dc=utils[_0x5ef4c1(0x2d7)](),_0x27581f=path[_0x5ef4c1(0x274)](_0x1d78dc,_0x5ef4c1(0x2d1),_0x5ef4c1(0x2a7),_0x5acacf+_0x5ef4c1(0x286));if(fs[_0x5ef4c1(0x24e)](_0x27581f))try{const _0xb2ae91=JSON[_0x5ef4c1(0x277)](fs[_0x5ef4c1(0x2d2)](_0x27581f,_0x5ef4c1(0x29c)));this[_0x5ef4c1(0x30b)](_0x233f35[_0x5ef4c1(0x20d)],_0x233f35['command'],{'success':!![],'data':_0xb2ae91},_0x233f35[_0x5ef4c1(0x325)]);}catch(_0x3c6445){this['sendTo'](_0x233f35[_0x5ef4c1(0x20d)],_0x233f35['command'],{'success':![],'error':_0x5ef4c1(0x2c0)},_0x233f35['callback']);}else this[_0x5ef4c1(0x30b)](_0x233f35[_0x5ef4c1(0x20d)],_0x233f35[_0x5ef4c1(0x246)],{'success':![],'error':_0x5ef4c1(0x2d8)},_0x233f35[_0x5ef4c1(0x325)]);}else{if(_0x233f35[_0x5ef4c1(0x246)]===_0x5ef4c1(0x223)){const _0x499351=this[_0x5ef4c1(0x2e7)][_0x5ef4c1(0x288)];let _0x2cca3e=new Array(0x30)[_0x5ef4c1(0x32c)](0x0),_0x919706=Array[_0x5ef4c1(0x20d)]({'length':0x30},()=>[]);try{const _0x484d21=await this['getStateAsync'](_0x5ef4c1(0x2cb));if(_0x484d21&&_0x484d21[_0x5ef4c1(0x22d)])_0x2cca3e=JSON[_0x5ef4c1(0x277)](_0x484d21[_0x5ef4c1(0x22d)]);const _0x300812=await this[_0x5ef4c1(0x212)]('analysis.health.todayRoomDetails');if(_0x300812&&_0x300812[_0x5ef4c1(0x22d)])_0x919706=JSON['parse'](_0x300812[_0x5ef4c1(0x22d)]);}catch(_0x443ef3){}let _0x145808=new Array(0x30)['fill'](0x0);try{const _0x4c8718=new Date();_0x4c8718['setDate'](_0x4c8718[_0x5ef4c1(0x22f)]()-0x1);const _0x2ada98=_0x4c8718[_0x5ef4c1(0x211)]()[_0x5ef4c1(0x2b8)]('T')[0x0],_0x164265=utils[_0x5ef4c1(0x2d7)](),_0x328aa8=path[_0x5ef4c1(0x274)](_0x164265,'cogni-living',_0x5ef4c1(0x2a7),_0x2ada98+_0x5ef4c1(0x286));if(fs[_0x5ef4c1(0x24e)](_0x328aa8)){const _0x46a4ce=JSON[_0x5ef4c1(0x277)](fs[_0x5ef4c1(0x2d2)](_0x328aa8,_0x5ef4c1(0x29c)));if(_0x46a4ce&&_0x46a4ce[_0x5ef4c1(0x351)])_0x145808=_0x46a4ce[_0x5ef4c1(0x351)];}}catch(_0x11760f){}let _0x4ab3df={'today':{},'yesterday':{}};try{const _0x44eed1=await this[_0x5ef4c1(0x212)](_0x5ef4c1(0x310));if(_0x44eed1&&_0x44eed1[_0x5ef4c1(0x22d)])_0x4ab3df=JSON[_0x5ef4c1(0x277)](_0x44eed1['val']);}catch(_0x131fc3){}let _0x38151f=null;try{const _0x19fa69=await this[_0x5ef4c1(0x212)](_0x5ef4c1(0x2d4));if(_0x19fa69)_0x38151f=_0x19fa69[_0x5ef4c1(0x22d)];}catch(_0x3e7ccf){}if(_0x38151f===undefined||_0x38151f===null){const _0x2335e9=_0x2cca3e['reduce']((_0x132244,_0x522f26)=>_0x132244+_0x522f26,0x0),_0x2021e5=Math[_0x5ef4c1(0x30a)](0x2,Math[_0x5ef4c1(0x239)](-0x2,(0x64-_0x2335e9)/0x32));_0x38151f=_0x2021e5;}let _0xa836f9=![],_0x2be29b='',_0x3eb1bd='',_0x35be24='';try{const _0x2db9d0=await this[_0x5ef4c1(0x212)](_0x5ef4c1(0x2cf));if(_0x2db9d0&&_0x2db9d0[_0x5ef4c1(0x22d)]){_0xa836f9=!![];const _0x4b51d5=await this[_0x5ef4c1(0x212)]('analysis.automation.description');_0x2be29b=_0x4b51d5?_0x4b51d5[_0x5ef4c1(0x22d)]:'';const _0x3bc2bd=await this[_0x5ef4c1(0x212)](_0x5ef4c1(0x34a));_0x3eb1bd=_0x3bc2bd?_0x3bc2bd[_0x5ef4c1(0x22d)]:'';const _0x22cf97=await this[_0x5ef4c1(0x212)](_0x5ef4c1(0x218));_0x35be24=_0x22cf97?_0x22cf97[_0x5ef4c1(0x22d)]:'';}}catch(_0x5022bf){}const _0x293861=await this['checkSolarCondition'](),_0x205b3d=(this[_0x5ef4c1(0x2ea)][_0x5ef4c1(0x330)]||[])[_0x5ef4c1(0x29a)](_0x300fa2=>_0x300fa2['isSolar']),_0x1a42d5=_0x293861&&_0x205b3d;let _0x4100b2='';try{const _0x5eb0dc=await this['getStateAsync']('system.presenceWho');if(_0x5eb0dc&&_0x5eb0dc['val'])_0x4100b2=_0x5eb0dc[_0x5ef4c1(0x22d)];}catch(_0x4302b1){}this[_0x5ef4c1(0x30b)](_0x233f35[_0x5ef4c1(0x20d)],_0x233f35[_0x5ef4c1(0x246)],{'success':!![],'eventHistory':this[_0x5ef4c1(0x276)][_0x5ef4c1(0x2ca)](0x0,0x7d0),'stats':{'digestCount':_0x499351,'isPresent':this['isPresent'],'hourlyActivity':_0x2cca3e,'hourlyDetails':_0x919706,'yesterdayActivity':_0x145808,'solarActive':_0x1a42d5,'presenceWho':_0x4100b2,'roomStats':_0x4ab3df,'activityTrend':_0x38151f,'modules':this['activeModules']},'automation':{'detected':_0xa836f9,'description':_0x2be29b,'targetId':_0x3eb1bd,'targetValue':_0x35be24}},_0x233f35[_0x5ef4c1(0x325)]);}else{if(_0x233f35[_0x5ef4c1(0x246)]===_0x5ef4c1(0x26c))try{const _0x1085c8=await automation[_0x5ef4c1(0x2a9)](this);this[_0x5ef4c1(0x30b)](_0x233f35[_0x5ef4c1(0x20d)],_0x233f35['command'],{'success':!![],'results':_0x1085c8},_0x233f35[_0x5ef4c1(0x325)]);}catch(_0x4d1e2d){this['sendTo'](_0x233f35[_0x5ef4c1(0x20d)],_0x233f35[_0x5ef4c1(0x246)],{'success':![],'error':_0x4d1e2d['message']},_0x233f35[_0x5ef4c1(0x325)]);}else{if(_0x233f35['command']===_0x5ef4c1(0x229))try{const _0x363054=await scanner[_0x5ef4c1(0x202)](this,_0x233f35[_0x5ef4c1(0x341)]||{});this[_0x5ef4c1(0x30b)](_0x233f35[_0x5ef4c1(0x20d)],_0x233f35[_0x5ef4c1(0x246)],{'success':!![],'devices':_0x363054},_0x233f35[_0x5ef4c1(0x325)]);}catch(_0x2c703d){}else{if(_0x233f35['command']===_0x5ef4c1(0x21a)){const _0x5b81ae=await this[_0x5ef4c1(0x29d)](_0x5ef4c1(0x264),'enum'),_0x3963c3=[];if(_0x5b81ae)for(const _0xaa9ccc in _0x5b81ae){let _0x25628e=_0x5b81ae[_0xaa9ccc]['common'][_0x5ef4c1(0x344)];if(_0x25628e&&typeof _0x25628e==='object')_0x25628e=_0x25628e['de']||_0x25628e['en']||Object[_0x5ef4c1(0x2fb)](_0x25628e)[0x0]||JSON[_0x5ef4c1(0x27b)](_0x25628e);_0x3963c3[_0x5ef4c1(0x335)]({'id':_0xaa9ccc,'name':String(_0x25628e||_0xaa9ccc)});}const _0x22db52=await this[_0x5ef4c1(0x29d)](_0x5ef4c1(0x307),_0x5ef4c1(0x228)),_0x3e7d5d=[];if(_0x22db52)for(const _0x30923a in _0x22db52){let _0xf77c1b=_0x22db52[_0x30923a]['common'][_0x5ef4c1(0x344)];if(_0xf77c1b&&typeof _0xf77c1b===_0x5ef4c1(0x2bb))_0xf77c1b=_0xf77c1b['de']||_0xf77c1b['en']||Object[_0x5ef4c1(0x2fb)](_0xf77c1b)[0x0]||JSON[_0x5ef4c1(0x27b)](_0xf77c1b);_0x3e7d5d[_0x5ef4c1(0x335)](String(_0xf77c1b||_0x30923a[_0x5ef4c1(0x2b8)]('.')['pop']()));}this['sendTo'](_0x233f35[_0x5ef4c1(0x20d)],_0x233f35['command'],{'success':!![],'enums':_0x3963c3,'rooms':_0x3e7d5d},_0x233f35[_0x5ef4c1(0x325)]);}else{if(_0x233f35[_0x5ef4c1(0x246)]===_0x5ef4c1(0x324))try{const _0x3511ec=await this['getObjectViewAsync'](_0x5ef4c1(0x343),_0x5ef4c1(0x30d),{'startkey':_0x5ef4c1(0x2c1),'endkey':'system.adapter.ical.È¶ô'}),_0x214850=new Set();if(_0x3511ec&&_0x3511ec[_0x5ef4c1(0x30f)])for(const _0x334663 of _0x3511ec[_0x5ef4c1(0x30f)]){const _0x27bc99=_0x334663['id'][_0x5ef4c1(0x203)]('system.adapter.',''),_0x4cf127=await this[_0x5ef4c1(0x23f)](_0x27bc99+'.data.table');let _0x28a40a=![];if(_0x4cf127&&_0x4cf127['val']){const _0x33902e=typeof _0x4cf127[_0x5ef4c1(0x22d)]===_0x5ef4c1(0x27c)?JSON[_0x5ef4c1(0x277)](_0x4cf127[_0x5ef4c1(0x22d)]):_0x4cf127[_0x5ef4c1(0x22d)];Array[_0x5ef4c1(0x2eb)](_0x33902e)&&_0x33902e['forEach'](_0x22b572=>{const _0x59b807=_0x5ef4c1;_0x22b572[_0x59b807(0x2af)]&&(_0x214850[_0x59b807(0x241)](_0x22b572['calendarName']),_0x28a40a=!![]);});}!_0x28a40a&&_0x214850[_0x5ef4c1(0x241)](_0x27bc99);}const _0x2ce62b=Array['from'](_0x214850);if(_0x2ce62b[_0x5ef4c1(0x288)]===0x0)_0x2ce62b[_0x5ef4c1(0x335)]('Standard');this['sendTo'](_0x233f35['from'],_0x233f35[_0x5ef4c1(0x246)],{'success':!![],'names':_0x2ce62b},_0x233f35[_0x5ef4c1(0x325)]);}catch(_0x144398){this[_0x5ef4c1(0x30b)](_0x233f35[_0x5ef4c1(0x20d)],_0x233f35[_0x5ef4c1(0x246)],{'success':![],'error':_0x5ef4c1(0x283)+_0x144398[_0x5ef4c1(0x341)]},_0x233f35[_0x5ef4c1(0x325)]);}else{if(_0x233f35['command']===_0x5ef4c1(0x236))try{await automation[_0x5ef4c1(0x349)](this),this[_0x5ef4c1(0x30b)](_0x233f35[_0x5ef4c1(0x20d)],_0x233f35['command'],{'success':!![]},_0x233f35[_0x5ef4c1(0x325)]);}catch(_0x1c0492){this[_0x5ef4c1(0x28c)]['warn'](_0x5ef4c1(0x279)+_0x1c0492['message']),this['sendTo'](_0x233f35[_0x5ef4c1(0x20d)],_0x233f35[_0x5ef4c1(0x246)],{'success':![],'error':_0x1c0492[_0x5ef4c1(0x341)]},_0x233f35[_0x5ef4c1(0x325)]);}else{if(_0x233f35[_0x5ef4c1(0x246)]==='pythonBridge')try{const _0x239f9e=_0x233f35[_0x5ef4c1(0x341)][_0x5ef4c1(0x246)],_0x502da3=_0x233f35[_0x5ef4c1(0x341)];this[_0x5ef4c1(0x28c)][_0x5ef4c1(0x34b)](_0x5ef4c1(0x2e8)+_0x239f9e),pythonBridge[_0x5ef4c1(0x29e)](this,_0x239f9e,_0x502da3,_0x343894=>{const _0x3df83d=_0x5ef4c1;this[_0x3df83d(0x30b)](_0x233f35['from'],_0x233f35[_0x3df83d(0x246)],_0x343894,_0x233f35[_0x3df83d(0x325)]);});}catch(_0x502c35){this[_0x5ef4c1(0x28c)][_0x5ef4c1(0x233)](_0x5ef4c1(0x348)+_0x502c35['message']),this[_0x5ef4c1(0x30b)](_0x233f35[_0x5ef4c1(0x20d)],_0x233f35[_0x5ef4c1(0x246)],{'type':_0x5ef4c1(0x222),'payload':_0x502c35[_0x5ef4c1(0x341)]},_0x233f35[_0x5ef4c1(0x325)]);}else{if(_0x233f35[_0x5ef4c1(0x246)]==='testApiKey')try{const _0x4109c4=_0x233f35[_0x5ef4c1(0x341)]?_0x233f35[_0x5ef4c1(0x341)][_0x5ef4c1(0x323)]:'';if(!_0x4109c4)throw new Error('Kein\x20API\x20Key\x20√ºbergeben.');const _0x1803e3=new GoogleGenerativeAI(_0x4109c4),_0x5929d1=_0x1803e3[_0x5ef4c1(0x261)]({'model':GEMINI_MODEL}),_0x5acb13=await _0x5929d1[_0x5ef4c1(0x301)](_0x5ef4c1(0x2d6)),_0x10f0df=await _0x5acb13[_0x5ef4c1(0x358)],_0x5c54dc=_0x10f0df['text']();this[_0x5ef4c1(0x30b)](_0x233f35[_0x5ef4c1(0x20d)],_0x233f35[_0x5ef4c1(0x246)],{'success':!![],'message':_0x5ef4c1(0x251)+_0x5c54dc['substring'](0x0,0x14)+'...'},_0x233f35['callback']);}catch(_0x41418d){this['sendTo'](_0x233f35[_0x5ef4c1(0x20d)],_0x233f35[_0x5ef4c1(0x246)],{'success':![],'message':_0x41418d['message']},_0x233f35[_0x5ef4c1(0x325)]);}else{if(_0x233f35[_0x5ef4c1(0x246)]==='testContext')try{const _0x135aa2=await this[_0x5ef4c1(0x1fd)](),_0x4414cb=await this[_0x5ef4c1(0x356)](_0x5ef4c1(0x343),_0x5ef4c1(0x30d),{'startkey':_0x5ef4c1(0x2c1),'endkey':'system.adapter.ical.È¶ô'}),_0x42abde=_0x4414cb&&_0x4414cb['rows']?_0x4414cb[_0x5ef4c1(0x30f)][_0x5ef4c1(0x288)]:0x0;this['sendTo'](_0x233f35[_0x5ef4c1(0x20d)],_0x233f35[_0x5ef4c1(0x246)],{'success':!![],'weather':_0x5ef4c1(0x25b)+_0x135aa2+_0x5ef4c1(0x33e)+(this[_0x5ef4c1(0x33f)][this[_0x5ef4c1(0x2ea)][_0x5ef4c1(0x302)]]||'?')+'¬∞C','calendar':_0x42abde+_0x5ef4c1(0x1fc)},_0x233f35[_0x5ef4c1(0x325)]);}catch(_0x177142){this[_0x5ef4c1(0x30b)](_0x233f35[_0x5ef4c1(0x20d)],_0x233f35[_0x5ef4c1(0x246)],{'success':![]},_0x233f35[_0x5ef4c1(0x325)]);}}}}}}}}}}}}[a0_0x3cb703(0x2dd)](){const _0x56a31c=a0_0x3cb703;if(!this[_0x56a31c(0x22b)][_0x56a31c(0x289)])return;this[_0x56a31c(0x28c)]['debug'](_0x56a31c(0x2ab));try{const _0x16fdd9=this[_0x56a31c(0x318)]||[];pythonBridge[_0x56a31c(0x29e)](this,_0x56a31c(0x259),{'events':_0x16fdd9});}catch(_0x507fbf){this['log'][_0x56a31c(0x233)](_0x56a31c(0x297));}}async[a0_0x3cb703(0x35b)](_0x49647e,_0x2fb761){const _0x2192c6=a0_0x3cb703;if(!_0x2fb761||this[_0x2192c6(0x334)])return;if(_0x49647e[_0x2192c6(0x31e)](_0x2192c6(0x217))&&_0x49647e[_0x2192c6(0x253)](_0x2192c6(0x220))&&_0x2fb761[_0x2192c6(0x22d)])return;if(this[_0x2192c6(0x2ea)][_0x2192c6(0x205)]&&_0x49647e===this[_0x2192c6(0x2ea)][_0x2192c6(0x23b)]&&this[_0x2192c6(0x22b)][_0x2192c6(0x2ae)]){this[_0x2192c6(0x308)](_0x2fb761[_0x2192c6(0x22d)]);return;}if(_0x2fb761['ack']&&_0x49647e[_0x2192c6(0x253)]('pulse'))return;if(_0x49647e===this[_0x2192c6(0x27f)]+_0x2192c6(0x340)){if(_0x2fb761['val']&&Object['values'](setup['SYSTEM_MODES'])[_0x2192c6(0x31e)](_0x2fb761[_0x2192c6(0x22d)])){this[_0x2192c6(0x31b)]=_0x2fb761[_0x2192c6(0x22d)];if(_0x2fb761[_0x2192c6(0x22d)]===setup[_0x2192c6(0x2ac)][_0x2192c6(0x221)])await recorder[_0x2192c6(0x293)](this,![]);else await recorder[_0x2192c6(0x293)](this,!![]);if(this['isProVersion']){let _0x57c38f=![],_0x584bf9=0x0,_0x592ede='manual';if(this['currentSystemMode']===_0x2192c6(0x33a))_0x57c38f=!![],_0x584bf9=0x168,_0x592ede='Party\x20Mode';else this['currentSystemMode']===_0x2192c6(0x2db)&&(_0x57c38f=!![],_0x584bf9=0x5a0,_0x592ede=_0x2192c6(0x24a));pythonBridge[_0x2192c6(0x29e)](this,'SET_LEARNING_MODE',{'active':_0x57c38f,'duration':_0x584bf9,'label':_0x592ede}),await this[_0x2192c6(0x326)](_0x2192c6(0x2b7),{'val':JSON[_0x2192c6(0x27b)]({'active':_0x57c38f,'label':_0x592ede,'timestamp':Date[_0x2192c6(0x2fd)]()}),'ack':!![]});}}if(!_0x2fb761['ack'])this[_0x2192c6(0x245)](_0x49647e,{'val':this[_0x2192c6(0x31b)],'ack':!![]});return;}if(_0x49647e[_0x2192c6(0x253)]('analysis.energy.warmupSources')&&_0x2fb761[_0x2192c6(0x255)])this[_0x2192c6(0x258)](_0x2fb761['val']);if(_0x49647e[_0x2192c6(0x253)](_0x2192c6(0x216))&&_0x2fb761[_0x2192c6(0x255)]&&this['activeModules'][_0x2192c6(0x2fe)])automation[_0x2192c6(0x1f9)](this);if(!_0x2fb761[_0x2192c6(0x255)]){if(_0x49647e[_0x2192c6(0x31e)](_0x2192c6(0x1fb))&&_0x2fb761[_0x2192c6(0x22d)]){this['setState'](_0x49647e,{'val':![],'ack':!![]}),aiAgent[_0x2192c6(0x22e)](this);return;}if(_0x49647e[_0x2192c6(0x31e)](_0x2192c6(0x209))&&_0x2fb761[_0x2192c6(0x22d)]){this['setState'](_0x49647e,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent[_0x2192c6(0x230)](this,pythonBridge);return;}if(_0x49647e['includes'](_0x2192c6(0x237))&&_0x2fb761[_0x2192c6(0x22d)]){this['setState'](_0x49647e,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this);return;}if(_0x49647e['includes'](_0x2192c6(0x204))&&_0x2fb761[_0x2192c6(0x22d)]){this[_0x2192c6(0x245)](_0x49647e,{'val':![],'ack':!![]}),aiAgent[_0x2192c6(0x1f4)](this);return;}if(_0x49647e['includes'](_0x2192c6(0x2c6))&&_0x2fb761['val']){this[_0x2192c6(0x245)](_0x49647e,{'val':![],'ack':!![]});if(this[_0x2192c6(0x314)])try{const _0x19e010=await this[_0x2192c6(0x212)](_0x2192c6(0x270));if(_0x19e010&&_0x19e010[_0x2192c6(0x22d)]){const _0x5d7728=JSON[_0x2192c6(0x277)](_0x19e010[_0x2192c6(0x22d)]);this['setStateAsync'](_0x2192c6(0x25f),{'val':'Sec-Training\x20started...','ack':!![]}),pythonBridge[_0x2192c6(0x29e)](this,_0x2192c6(0x22c),{'sequences':_0x5d7728});}}catch(_0x3e6193){}return;}if(_0x49647e['includes']('analysis.training.triggerHealth')&&_0x2fb761[_0x2192c6(0x22d)]){this[_0x2192c6(0x245)](_0x49647e,{'val':![],'ack':!![]});try{aiAgent['generateHealthReport'](this,'NIGHT'),setTimeout(()=>aiAgent[_0x2192c6(0x234)](this,'DAY'),0x2ee0);if(this[_0x2192c6(0x314)]){this[_0x2192c6(0x2dd)]();const _0x33b9dd=await this[_0x2192c6(0x212)]('LTM.dailyDigests');if(_0x33b9dd&&_0x33b9dd[_0x2192c6(0x22d)])pythonBridge[_0x2192c6(0x29e)](this,_0x2192c6(0x2a0),{'digests':JSON[_0x2192c6(0x277)](_0x33b9dd[_0x2192c6(0x22d)])});}}catch(_0xa29f14){this['log'][_0x2192c6(0x233)](_0x2192c6(0x2f9)+_0xa29f14[_0x2192c6(0x341)]);}return;}if(_0x49647e['includes'](_0x2192c6(0x34c))&&_0x2fb761[_0x2192c6(0x22d)]){this[_0x2192c6(0x245)](_0x49647e,{'val':![],'ack':!![]}),await this[_0x2192c6(0x313)]();return;}if(_0x49647e[_0x2192c6(0x31e)](_0x2192c6(0x2ce))&&_0x2fb761['val']){this[_0x2192c6(0x245)](_0x49647e,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x1dc8d0=await this[_0x2192c6(0x212)](_0x2192c6(0x235));if(_0x1dc8d0&&_0x1dc8d0[_0x2192c6(0x22d)]){const _0x5c717e={};if(this['config'][_0x2192c6(0x330)])this[_0x2192c6(0x2ea)][_0x2192c6(0x330)]['forEach'](_0x49a7a7=>{const _0x15ab6c=_0x2192c6;if(_0x49a7a7['id']&&_0x49a7a7[_0x15ab6c(0x225)])_0x5c717e[_0x49a7a7['id']]=_0x49a7a7[_0x15ab6c(0x225)];});pythonBridge['send'](this,_0x2192c6(0x2e9),{'events':JSON[_0x2192c6(0x277)](_0x1dc8d0[_0x2192c6(0x22d)]),'deviceMap':_0x5c717e});}}catch(_0x327650){}return;}if(_0x49647e['includes'](_0x2192c6(0x1f6))&&_0x2fb761['val']){this[_0x2192c6(0x245)](_0x49647e,{'val':![],'ack':!![]}),topology[_0x2192c6(0x32a)](this);if(this[_0x2192c6(0x314)])try{const _0x256d10=await this[_0x2192c6(0x212)](_0x2192c6(0x270));if(_0x256d10&&_0x256d10['val'])pythonBridge[_0x2192c6(0x29e)](this,_0x2192c6(0x2cc),{'sequences':JSON['parse'](_0x256d10['val'])});}catch(_0x2a96dd){}return;}}const _0x5e3053=(this[_0x2192c6(0x2ea)][_0x2192c6(0x330)]||[])[_0x2192c6(0x243)](_0x41edea=>_0x41edea['id']===_0x49647e);if(_0x5e3053){const _0x18ea0d=await recorder[_0x2192c6(0x21f)](this,_0x49647e,_0x2fb761,_0x5e3053);_0x18ea0d&&this[_0x2192c6(0x245)](_0x2192c6(0x2f2),{'val':Date[_0x2192c6(0x2fd)](),'ack':!![]});_0x18ea0d&&_0x18ea0d[_0x2192c6(0x225)]==='motion'&&_0x18ea0d[_0x2192c6(0x2ee)]&&this[_0x2192c6(0x314)]&&deadMan[_0x2192c6(0x257)](this,_0x18ea0d[_0x2192c6(0x2ee)]);_0x2fb761[_0x2192c6(0x22d)]&&(_0x2fb761['val']===!![]||_0x2fb761[_0x2192c6(0x22d)]===0x1||String(_0x2fb761['val'])[_0x2192c6(0x2a3)]()===_0x2192c6(0x1f7))&&(_0x5e3053['type']&&(_0x5e3053[_0x2192c6(0x225)][_0x2192c6(0x31e)]('window')||_0x5e3053[_0x2192c6(0x225)][_0x2192c6(0x31e)](_0x2192c6(0x357)))&&this[_0x2192c6(0x25c)](_0x5e3053));if(_0x5e3053[_0x2192c6(0x225)]===_0x2192c6(0x28a)||_0x5e3053[_0x2192c6(0x225)]===_0x2192c6(0x300)){if(this['activeModules'][_0x2192c6(0x2fe)])automation[_0x2192c6(0x2f6)](this);}}}async[a0_0x3cb703(0x258)](_0x2d6c63){const _0x38fc30=a0_0x3cb703;if(!this[_0x38fc30(0x200)]||Date[_0x38fc30(0x2fd)]()-this['bootTime']>0x493e0)return;try{const _0x1a5809=JSON[_0x38fc30(0x277)](_0x2d6c63),_0x1be20f=this[_0x38fc30(0x200)]['sources'];let _0x6f9432=![];for(const _0x4eb72d in _0x1be20f){if(_0x1be20f[_0x4eb72d]['includes']('AI')&&_0x1a5809[_0x4eb72d]&&!_0x1a5809[_0x4eb72d][_0x38fc30(0x31e)]('AI')){_0x6f9432=!![];break;}}_0x6f9432&&(await this[_0x38fc30(0x326)](_0x38fc30(0x216),{'val':JSON['stringify'](this[_0x38fc30(0x200)][_0x38fc30(0x345)]),'ack':!![]}),await this[_0x38fc30(0x326)]('analysis.energy.warmupSources',{'val':JSON['stringify'](this['memoryCache']['sources']),'ack':!![]}));}catch(_0x193f28){}}async[a0_0x3cb703(0x2c4)](){const _0x33c66e=a0_0x3cb703;try{const _0x152933=await this[_0x33c66e(0x212)](setup[_0x33c66e(0x2b6)]);if(_0x152933&&_0x152933[_0x33c66e(0x22d)])this[_0x33c66e(0x31b)]=_0x152933[_0x33c66e(0x22d)];}catch(_0x3c4a09){this[_0x33c66e(0x31b)]=setup[_0x33c66e(0x2ac)]['NORMAL'];}}async[a0_0x3cb703(0x2e5)](){const _0x27dad1=a0_0x3cb703,_0x4d3aec=this[_0x27dad1(0x2ea)][_0x27dad1(0x291)]||[];if(_0x4d3aec[_0x27dad1(0x288)]===0x0)return![];const _0x2c35a0=[],_0xc121e4=Date[_0x27dad1(0x2fd)](),_0x29ece6=0x5*0x3c*0x3e8;for(const _0x1cc9dd of _0x4d3aec){try{let _0x55b8ba=![];try{const _0x17adbd=await this[_0x27dad1(0x23f)](_0x1cc9dd+'.isOnline');if(_0x17adbd&&_0x17adbd['val']===!![])_0x55b8ba=!![];}catch(_0x5deb3a){}if(!_0x55b8ba)try{const _0x924e09=await this[_0x27dad1(0x23f)](_0x1cc9dd+_0x27dad1(0x224));if(_0x924e09&&_0x924e09['ts']){const _0x3bce44=_0xc121e4-_0x924e09['ts'];if(_0x3bce44<_0x29ece6)_0x55b8ba=!![];}}catch(_0x2f2b0a){}if(!_0x55b8ba)try{const _0x4e4724=await this['getForeignStateAsync'](_0x1cc9dd+_0x27dad1(0x1fa));if(_0x4e4724&&typeof _0x4e4724['val']===_0x27dad1(0x33d)&&_0x4e4724[_0x27dad1(0x22d)]>0x0)_0x55b8ba=!![];}catch(_0x5bac70){}if(!_0x55b8ba)try{const _0x370a61=await this[_0x27dad1(0x23f)](_0x1cc9dd);if(_0x370a61){const _0x5c2d41=_0xc121e4-(_0x370a61['ts']||0x0);_0x5c2d41<_0x29ece6&&(_0x370a61['val']===!![]||_0x370a61[_0x27dad1(0x22d)]===_0x27dad1(0x2de)||_0x370a61['val']===0x1)&&(_0x55b8ba=!![]);}}catch(_0x12f6fc){}if(_0x55b8ba){const _0x23cd18=_0x1cc9dd[_0x27dad1(0x2b8)]('.'),_0x4eb1dd=_0x23cd18[_0x23cd18[_0x27dad1(0x288)]-0x1]||_0x1cc9dd;_0x2c35a0['push'](_0x4eb1dd);}}catch(_0x306021){this['log'][_0x27dad1(0x233)](_0x27dad1(0x2b0)+_0x1cc9dd+':\x20'+_0x306021['message']);}}const _0x3e0cb7=_0x2c35a0[_0x27dad1(0x288)]>0x0?_0x2c35a0[_0x27dad1(0x274)](',\x20'):_0x27dad1(0x24c);return await this[_0x27dad1(0x326)](_0x27dad1(0x322),{'val':_0x3e0cb7,'ack':!![]}),_0x2c35a0[_0x27dad1(0x288)]>0x0;}async[a0_0x3cb703(0x2fa)](){const _0x2b250d=a0_0x3cb703;await aiAgent[_0x2b250d(0x22e)](this);this['activeModules'][_0x2b250d(0x289)]&&(this[_0x2b250d(0x214)](),this[_0x2b250d(0x232)]());if(this[_0x2b250d(0x22b)]['energy'])this[_0x2b250d(0x313)]();}async[a0_0x3cb703(0x1fd)](){const _0x5437b6=a0_0x3cb703,_0x56e034=['weatherunderground.0',_0x5437b6(0x280),_0x5437b6(0x2b4)],_0x3e3bdc=[_0x5437b6(0x2b2),_0x5437b6(0x31a),'NextHours.Location_1.Day_1.current.symbol_desc'];for(const _0x35513c of _0x56e034){for(const _0x2da402 of _0x3e3bdc){try{const _0x41053e=_0x35513c+'.'+_0x2da402,_0xfd5561=await this['getForeignStateAsync'](_0x41053e);if(_0xfd5561&&_0xfd5561[_0x5437b6(0x22d)]){const _0xd73890=String(_0xfd5561['val'])[_0x5437b6(0x2a3)]();if(_0xd73890[_0x5437b6(0x31e)](_0x5437b6(0x2ba))||_0xd73890[_0x5437b6(0x31e)](_0x5437b6(0x329))||_0xd73890['includes'](_0x5437b6(0x354))||_0xd73890[_0x5437b6(0x31e)](_0x5437b6(0x296))||_0xd73890[_0x5437b6(0x31e)](_0x5437b6(0x292)))return this[_0x5437b6(0x28c)]['debug'](_0x5437b6(0x263)+_0x41053e),!![];}}catch(_0x20514f){}}}return![];}[a0_0x3cb703(0x232)](){const _0x39114a=a0_0x3cb703;if(!this['isProVersion'])return;try{this[_0x39114a(0x212)]('LTM.trainingData.sequences',(_0x5265a3,_0x472677)=>{const _0x1076aa=_0x39114a;if(_0x5265a3||!_0x472677||!_0x472677[_0x1076aa(0x22d)])return;try{const _0x312987=JSON[_0x1076aa(0x277)](_0x472677['val']);if(!_0x312987||_0x312987[_0x1076aa(0x288)]===0x0)return;pythonBridge[_0x1076aa(0x29e)](this,'ANALYZE_GAIT',{'sequences':_0x312987}),this[_0x1076aa(0x28c)][_0x1076aa(0x34b)]('üö∂\x20Gait\x20Analysis\x20triggered\x20with\x20'+_0x312987[_0x1076aa(0x288)]+_0x1076aa(0x2a8));}catch(_0x1b7f52){this[_0x1076aa(0x28c)][_0x1076aa(0x233)](_0x1076aa(0x1f2)+_0x1b7f52[_0x1076aa(0x341)]);}});}catch(_0x4b86d2){this[_0x39114a(0x28c)][_0x39114a(0x233)](_0x39114a(0x238)+_0x4b86d2['message']);}}async[a0_0x3cb703(0x313)](){const _0x449e30=a0_0x3cb703;if(!this[_0x449e30(0x314)]||!this['activeModules']['energy'])return;try{const _0x2855de={},_0x5c8ad6={},_0x3b6e9d=this[_0x449e30(0x2ea)][_0x449e30(0x330)]||[];for(const _0x1c6961 of _0x3b6e9d){if((_0x1c6961[_0x449e30(0x225)]===_0x449e30(0x28a)||_0x1c6961[_0x449e30(0x225)]==='thermostat')&&_0x1c6961[_0x449e30(0x2ee)])try{const _0x5433f1=await this[_0x449e30(0x23f)](_0x1c6961['id']);_0x5433f1&&typeof _0x5433f1['val']===_0x449e30(0x33d)&&(_0x2855de[_0x1c6961[_0x449e30(0x2ee)]]=_0x5433f1[_0x449e30(0x22d)],_0x5c8ad6[_0x1c6961[_0x449e30(0x2ee)]]=_0x1c6961['isSolar']||![]);}catch(_0x237eab){}}let _0x5af655=0xa;if(this[_0x449e30(0x2ea)][_0x449e30(0x2ff)])try{const _0x5a372f=await this[_0x449e30(0x23f)](this[_0x449e30(0x2ea)][_0x449e30(0x2ff)]);if(_0x5a372f&&typeof _0x5a372f['val']===_0x449e30(0x33d))_0x5af655=_0x5a372f[_0x449e30(0x22d)];}catch(_0x1547eb){}const _0x149726=await this[_0x449e30(0x1fd)]();let _0xd43ad6={};try{const _0x32ecc5=await this[_0x449e30(0x212)](_0x449e30(0x2e3));if(_0x32ecc5&&_0x32ecc5[_0x449e30(0x22d)])_0xd43ad6=JSON[_0x449e30(0x277)](_0x32ecc5[_0x449e30(0x22d)]);}catch(_0x366f2f){}pythonBridge[_0x449e30(0x29e)](this,_0x449e30(0x262),{'current_temps':_0x2855de,'t_out':_0x5af655,'is_sunny':_0x149726,'solar_flags':_0x5c8ad6,'warmup_targets':_0xd43ad6}),this[_0x449e30(0x28c)][_0x449e30(0x260)]('üîÆ\x20Energy\x20Prediction\x20triggered\x20('+Object[_0x449e30(0x311)](_0x2855de)[_0x449e30(0x288)]+'\x20rooms)');}catch(_0x6a367b){this[_0x449e30(0x28c)][_0x449e30(0x233)]('triggerEnergyPrediction\x20Error:\x20'+_0x6a367b[_0x449e30(0x341)]);}}[a0_0x3cb703(0x214)](){const _0x3bc6ec=a0_0x3cb703;if(!this[_0x3bc6ec(0x318)]||this[_0x3bc6ec(0x318)][_0x3bc6ec(0x288)]===0x0)return;const _0x597ee7=new Array(0x30)[_0x3bc6ec(0x32c)](0x0),_0x2e3e6d=Array[_0x3bc6ec(0x20d)]({'length':0x30},()=>[]),_0x26ae19=new Date()[_0x3bc6ec(0x252)](0x0,0x0,0x0,0x0);this[_0x3bc6ec(0x318)][_0x3bc6ec(0x250)](_0x43a513=>{const _0x213435=_0x3bc6ec,_0xce5d23=new Date(_0x43a513[_0x213435(0x24b)]);if(_0xce5d23[_0x213435(0x295)]()>=_0x26ae19){const _0x3d5ca1=_0xce5d23[_0x213435(0x2e4)](),_0x366142=_0xce5d23[_0x213435(0x34d)](),_0x40ca10=_0x3d5ca1*0x2+Math['floor'](_0x366142/0x1e);_0x40ca10>=0x0&&_0x40ca10<0x30&&(_0x597ee7[_0x40ca10]++,_0x2e3e6d[_0x40ca10][_0x213435(0x335)]({'time':_0xce5d23[_0x213435(0x2dc)](_0x213435(0x1ff),{'hour':_0x213435(0x30c),'minute':_0x213435(0x30c)}),'location':_0x43a513[_0x213435(0x2ee)]||_0x213435(0x227),'type':_0x43a513[_0x213435(0x225)]||_0x213435(0x32b)}));}}),this[_0x3bc6ec(0x326)](_0x3bc6ec(0x2cb),{'val':JSON[_0x3bc6ec(0x27b)](_0x597ee7),'ack':!![]}),this[_0x3bc6ec(0x326)](_0x3bc6ec(0x20a),{'val':JSON[_0x3bc6ec(0x27b)](_0x2e3e6d),'ack':!![]});}async['handleInfrasound'](_0x4dc755){const _0x477055=a0_0x3cb703;if(!this['config'][_0x477055(0x205)]||typeof _0x4dc755!==_0x477055(0x33d))return;const _0x313945=this[_0x477055(0x2ea)][_0x477055(0x298)]||0.04;this[_0x477055(0x2b5)][_0x477055(0x335)]({'timestamp':Date[_0x477055(0x2fd)](),'value':_0x4dc755}),this[_0x477055(0x2b5)][_0x477055(0x288)]>0x64&&this[_0x477055(0x2b5)]['shift'](),_0x4dc755>_0x313945&&!this[_0x477055(0x21c)]&&(this[_0x477055(0x21c)]=!![],this['log'][_0x477055(0x233)](_0x477055(0x23e)+_0x4dc755[_0x477055(0x284)](0x4)+_0x477055(0x359)+_0x313945+_0x477055(0x2ad)),await this['triggerInfrasoundCorrelation'](_0x4dc755,_0x477055(0x2e0)),setTimeout(()=>{const _0x30d697=_0x477055;this[_0x30d697(0x21c)]=![];},0x5*0x3c*0x3e8));}async[a0_0x3cb703(0x339)](_0xdd7a1c,_0x50596a){const _0x59359d=a0_0x3cb703;if(!this[_0x59359d(0x29f)]){const _0x4a3c97=this[_0x59359d(0x276)][_0x59359d(0x2ca)](0x0,0xa),_0x656db8=_0x4a3c97[_0x59359d(0x23a)](_0x34039d=>new Date(_0x34039d[_0x59359d(0x24b)])[_0x59359d(0x2dc)](_0x59359d(0x1ff))+_0x59359d(0x240)+(_0x34039d[_0x59359d(0x2ee)]||_0x59359d(0x2fc))+':\x20'+_0x34039d['name'])['join']('\x0a');this[_0x59359d(0x28c)][_0x59359d(0x233)](_0x59359d(0x1f8)+_0xdd7a1c[_0x59359d(0x284)](0x4)+_0x59359d(0x256)+_0x656db8);if(this[_0x59359d(0x2ea)]['infrasoundArmingId'])try{const _0x168a6a=await this[_0x59359d(0x23f)](this[_0x59359d(0x2ea)]['infrasoundArmingId']);_0x168a6a&&_0x168a6a[_0x59359d(0x22d)]===!![]&&(await this['setStateAsync'](_0x59359d(0x317),{'val':JSON[_0x59359d(0x27b)]({'timestamp':Date['now'](),'pressure':_0xdd7a1c[_0x59359d(0x284)](0x4),'eventType':_0x50596a,'recentEvents':_0x4a3c97['slice'](0x0,0x3)}),'ack':!![]}),this[_0x59359d(0x28c)][_0x59359d(0x26a)](_0x59359d(0x249)));}catch(_0x526827){}}else this[_0x59359d(0x28c)]['debug'](_0x59359d(0x28f)+_0xdd7a1c[_0x59359d(0x284)](0x4)+_0x59359d(0x285));}async[a0_0x3cb703(0x25c)](_0x37b3f9){const _0x3cd319=a0_0x3cb703;if(!_0x37b3f9||!_0x37b3f9[_0x3cd319(0x2ee)])return;try{const _0x2c6930=(this[_0x3cd319(0x2ea)]['devices']||[])[_0x3cd319(0x22a)](_0xd38ea8=>_0xd38ea8[_0x3cd319(0x2ee)]===_0x37b3f9[_0x3cd319(0x2ee)]&&(_0xd38ea8[_0x3cd319(0x225)]===_0x3cd319(0x28a)||_0xd38ea8[_0x3cd319(0x225)]==='thermostat'));if(_0x2c6930['length']===0x0)return;const _0x120621=await this[_0x3cd319(0x23f)](_0x2c6930[0x0]['id']);if(!_0x120621||typeof _0x120621[_0x3cd319(0x22d)]!==_0x3cd319(0x33d))return;const _0x281ba0=_0x120621[_0x3cd319(0x22d)];let _0x51fb21=null;if(this[_0x3cd319(0x2ea)][_0x3cd319(0x2ff)]){const _0x576698=await this[_0x3cd319(0x23f)](this['config'][_0x3cd319(0x2ff)]);_0x576698&&typeof _0x576698[_0x3cd319(0x22d)]===_0x3cd319(0x33d)&&(_0x51fb21=_0x576698['val']);}if(_0x51fb21!==null){const _0x134380=Math['abs'](_0x281ba0-_0x51fb21);_0x134380>0x3&&(this[_0x3cd319(0x28c)][_0x3cd319(0x34b)]('üí®\x20L√ºftung\x20in\x20'+_0x37b3f9[_0x3cd319(0x2ee)]+_0x3cd319(0x34e)+_0x134380[_0x3cd319(0x284)](0x1)+_0x3cd319(0x2c3)+_0x281ba0+_0x3cd319(0x350)+_0x51fb21+_0x3cd319(0x2a6)),await this['setStateAsync'](_0x3cd319(0x21d),{'val':JSON[_0x3cd319(0x27b)]({'room':_0x37b3f9[_0x3cd319(0x2ee)],'timestamp':Date[_0x3cd319(0x2fd)](),'tempDiff':_0x134380[_0x3cd319(0x284)](0x1),'recommendation':_0x134380>0x5?_0x3cd319(0x312):_0x3cd319(0x215)}),'ack':!![]}));}}catch(_0x2ea710){this[_0x3cd319(0x28c)][_0x3cd319(0x233)](_0x3cd319(0x2b3)+_0x2ea710['message']);}}async[a0_0x3cb703(0x2c2)](_0x496dc0){const _0x3432e1=a0_0x3cb703;if(!_0x496dc0||typeof _0x496dc0!==_0x3432e1(0x2bb))return;const _0x4878ea={'timestamp':_0x496dc0[_0x3432e1(0x24b)]||Date[_0x3432e1(0x2fd)](),'id':_0x496dc0['id']||Date[_0x3432e1(0x2fd)]()[_0x3432e1(0x316)](),'name':_0x496dc0[_0x3432e1(0x344)]||_0x3432e1(0x21b),'type':_0x496dc0[_0x3432e1(0x225)]||_0x3432e1(0x2f0),'location':_0x496dc0[_0x3432e1(0x2ee)]||_0x3432e1(0x2fc),'value':_0x496dc0[_0x3432e1(0x2c9)]||null};this[_0x3432e1(0x276)]['unshift'](_0x4878ea);if(this[_0x3432e1(0x276)]['length']>0x1388)this[_0x3432e1(0x276)]['pop']();await this['setStateAsync'](_0x3432e1(0x347),{'val':JSON[_0x3432e1(0x27b)](this[_0x3432e1(0x276)]),'ack':!![]}),this[_0x3432e1(0x28c)][_0x3432e1(0x34b)](_0x3432e1(0x242)+_0x4878ea['name']+'\x20('+_0x4878ea[_0x3432e1(0x2ee)]+')');}['sendNotification'](_0xa3ac56){}}function a0_0x4929(_0x178678,_0x544fa6){const _0x250602=a0_0x3aaa();return a0_0x4929=function(_0x50cd7a,_0x14793f){_0x50cd7a=_0x50cd7a-0x1f2;let _0x3aaa18=_0x250602[_0x50cd7a];return _0x3aaa18;},a0_0x4929(_0x178678,_0x544fa6);}if(require['main']!==module)module[a0_0x3cb703(0x305)]=_0x55d0c1=>new CogniLiving(_0x55d0c1);else new CogniLiving();