const a0_0x39798a=a0_0xc660;function a0_0xc660(_0x430589,_0x20da88){const _0xd0710d=a0_0x19dd();return a0_0xc660=function(_0x28f154,_0x3a6357){_0x28f154=_0x28f154-0x1da;let _0x19dd25=_0xd0710d[_0x28f154];return _0x19dd25;},a0_0xc660(_0x430589,_0x20da88);}(function(_0x1385f9,_0x224974){const _0x476e51=a0_0xc660,_0x2cc4f7=_0x1385f9();while(!![]){try{const _0x516cdd=-parseInt(_0x476e51(0x295))/0x1*(parseInt(_0x476e51(0x2ff))/0x2)+parseInt(_0x476e51(0x33d))/0x3+-parseInt(_0x476e51(0x34d))/0x4+parseInt(_0x476e51(0x1f3))/0x5+-parseInt(_0x476e51(0x1f7))/0x6*(-parseInt(_0x476e51(0x31a))/0x7)+-parseInt(_0x476e51(0x1da))/0x8+parseInt(_0x476e51(0x26f))/0x9*(-parseInt(_0x476e51(0x34e))/0xa);if(_0x516cdd===_0x224974)break;else _0x2cc4f7['push'](_0x2cc4f7['shift']());}catch(_0x12a728){_0x2cc4f7['push'](_0x2cc4f7['shift']());}}}(a0_0x19dd,0x5d7b3));const a0_0x3a6357=(function(){let _0xcd689e=!![];return function(_0x148bb6,_0x42ee03){const _0x252016=_0xcd689e?function(){const _0x2ba3df=a0_0xc660;if(_0x42ee03){const _0x52fa22=_0x42ee03[_0x2ba3df(0x1f0)](_0x148bb6,arguments);return _0x42ee03=null,_0x52fa22;}}:function(){};return _0xcd689e=![],_0x252016;};}()),a0_0x28f154=a0_0x3a6357(this,function(){const _0xf9a337=a0_0xc660;return a0_0x28f154[_0xf9a337(0x1e7)]()[_0xf9a337(0x271)](_0xf9a337(0x303))['toString']()[_0xf9a337(0x2eb)](a0_0x28f154)[_0xf9a337(0x271)](_0xf9a337(0x303));});a0_0x28f154();'use strict';const utils=require(a0_0x39798a(0x302)),{GoogleGenerativeAI}=require(a0_0x39798a(0x1eb)),schedule=require(a0_0x39798a(0x222)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x39798a(0x22b),LTM_SCHEDULE=a0_0x39798a(0x24f),MODE_RESET_SCHEDULE=a0_0x39798a(0x2d0),ANALYSIS_HISTORY_MAX_SIZE=0x64,LTM_DP_RAW_LOG=a0_0x39798a(0x330),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x39798a(0x2cf),LTM_DP_TRIGGER_DIGEST=a0_0x39798a(0x2cb),LTM_DP_BASELINE_STATUS=a0_0x39798a(0x323),LTM_DP_DRIFT_CHANNEL=a0_0x39798a(0x31b),LTM_DP_DRIFT_STATUS=a0_0x39798a(0x288),LTM_DP_DRIFT_DETAILS=a0_0x39798a(0x25b),LTM_DP_DRIFT_LAST_CHECK=a0_0x39798a(0x305),SYSTEM_DP_MODE='system.mode',IGNORE_TERMS=[a0_0x39798a(0x23d),a0_0x39798a(0x240),a0_0x39798a(0x32b),a0_0x39798a(0x1fe),a0_0x39798a(0x326),a0_0x39798a(0x33b),a0_0x39798a(0x2ad),a0_0x39798a(0x231),a0_0x39798a(0x29f),a0_0x39798a(0x2ab),a0_0x39798a(0x2be),'available',a0_0x39798a(0x2c4),a0_0x39798a(0x2a8),a0_0x39798a(0x2a0),a0_0x39798a(0x237),a0_0x39798a(0x201),a0_0x39798a(0x278),a0_0x39798a(0x2e5),a0_0x39798a(0x2ef)],GENERIC_NAMES=[a0_0x39798a(0x315),a0_0x39798a(0x27e),a0_0x39798a(0x219),a0_0x39798a(0x229),a0_0x39798a(0x350),a0_0x39798a(0x1e1),'on',a0_0x39798a(0x328),'switch',a0_0x39798a(0x245),a0_0x39798a(0x25e),'blind',a0_0x39798a(0x29c),a0_0x39798a(0x2a7),a0_0x39798a(0x327),'presence','occupancy'],ADAPTER_BLACKLIST=[a0_0x39798a(0x2fe),a0_0x39798a(0x216),'info.',a0_0x39798a(0x30c),a0_0x39798a(0x22a),'material.',a0_0x39798a(0x2ae)],SYSTEM_MODES={'NORMAL':a0_0x39798a(0x238),'VACATION':a0_0x39798a(0x2b9),'PARTY':'party','GUEST':a0_0x39798a(0x280)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x39798a(0x32d)],SYSTEM_MODES['GUEST']],EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,PERSONA_MAPPING={'generic':a0_0x39798a(0x2d1),'senior_aal':'PRIORIT√ÑT:\x20Gesundheit\x20und\x20Sicherheit\x20f√ºr\x20Senioren\x20(AAL).\x20Erkenne\x20Inaktivit√§t,\x20potenzielle\x20St√ºrze\x20(indirekt),\x20Schlafunterbrechungen\x20und\x20n√§chtliche\x20Unruhe.','family':a0_0x39798a(0x306),'single_comfort':'Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung.','security':'PRIORIT√ÑT:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungew√∂hnliche\x20Anwesenheit.'};class CogniLiving extends utils['Adapter']{constructor(_0x54676c){const _0x52a5d3=a0_0x39798a;super({..._0x54676c,'name':'cogni-living'}),this['eventHistory']=[],this[_0x52a5d3(0x242)]=[],this[_0x52a5d3(0x346)]=[],this['rawEventLog']=[],this['dailyDigests']=[],this[_0x52a5d3(0x21f)]={},this[_0x52a5d3(0x2d4)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x52a5d3(0x2ee)]=null,this[_0x52a5d3(0x31f)]=null,this['isGracePeriodActive']=![],this[_0x52a5d3(0x1e4)]=null,this['geminiModel']=null,this[_0x52a5d3(0x22d)]=SYSTEM_MODES[_0x52a5d3(0x202)],this[_0x52a5d3(0x247)]=![],this[_0x52a5d3(0x331)]=![],this['systemUUID']='unknown',this[_0x52a5d3(0x321)]=null,this[_0x52a5d3(0x259)]=null,this[_0x52a5d3(0x29d)]=null,this[_0x52a5d3(0x2aa)]=null,this[_0x52a5d3(0x263)]=null,this['on'](_0x52a5d3(0x322),this[_0x52a5d3(0x25f)][_0x52a5d3(0x2f0)](this)),this['on'](_0x52a5d3(0x1f2),this[_0x52a5d3(0x33a)][_0x52a5d3(0x2f0)](this)),this['on']('unload',this[_0x52a5d3(0x1f8)][_0x52a5d3(0x2f0)](this)),this['on'](_0x52a5d3(0x2b6),this['onMessage'][_0x52a5d3(0x2f0)](this));}async['onReady'](){const _0x3014a5=a0_0x39798a;this[_0x3014a5(0x32f)][_0x3014a5(0x28d)](_0x3014a5(0x335)+this[_0x3014a5(0x250)]+_0x3014a5(0x2b8)),await this[_0x3014a5(0x209)](),this[_0x3014a5(0x262)][_0x3014a5(0x23c)]=this[_0x3014a5(0x262)][_0x3014a5(0x23c)]||'';try{this['isProVersion']=await this[_0x3014a5(0x29e)](this[_0x3014a5(0x262)]['licenseKey']);}catch(_0x24422e){this[_0x3014a5(0x32f)][_0x3014a5(0x201)](_0x3014a5(0x352)+_0x24422e['message']);}if(!this[_0x3014a5(0x262)]['inactivityThresholdHours']||this[_0x3014a5(0x262)][_0x3014a5(0x34c)]<0.1)this[_0x3014a5(0x262)][_0x3014a5(0x34c)]=0xc;await this['initHistory'](),await this[_0x3014a5(0x32c)]();if(this['config'][_0x3014a5(0x2f9)])try{this[_0x3014a5(0x1e4)]=new GoogleGenerativeAI(this['config']['geminiApiKey']),this[_0x3014a5(0x20f)]=this[_0x3014a5(0x1e4)][_0x3014a5(0x316)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x3014a5(0x32f)][_0x3014a5(0x28d)](_0x3014a5(0x34f));}catch(_0x254a29){this['log']['error']('Gemini\x20Init\x20Error:\x20'+_0x254a29[_0x3014a5(0x2b6)]);}await this[_0x3014a5(0x234)](),await this[_0x3014a5(0x2bb)](),await this[_0x3014a5(0x1e9)](),await this[_0x3014a5(0x2f4)](),this[_0x3014a5(0x252)](_0x3014a5(0x333)),this[_0x3014a5(0x252)](LTM_DP_TRIGGER_DIGEST),this[_0x3014a5(0x252)]('system.mode'),this['subscribeStates'](_0x3014a5(0x21b)),await this[_0x3014a5(0x254)](),await this['initPresenceSubscriptions']();if(this['analysisTimer'])clearInterval(this[_0x3014a5(0x321)]);const _0x1cd3dc=this[_0x3014a5(0x262)][_0x3014a5(0x24c)]||0xf;_0x1cd3dc>0x0&&(this[_0x3014a5(0x32f)]['info']('Starting\x20Autopilot\x20('+_0x1cd3dc+_0x3014a5(0x337)+this[_0x3014a5(0x262)][_0x3014a5(0x34c)]+'h.'),this[_0x3014a5(0x321)]=setInterval(()=>{const _0x5dac3c=_0x3014a5;this[_0x5dac3c(0x1df)]();},_0x1cd3dc*0x3c*0x3e8)),this[_0x3014a5(0x28b)](),this[_0x3014a5(0x2fb)](),this[_0x3014a5(0x1e5)](),this[_0x3014a5(0x2de)]();}[a0_0x39798a(0x1f8)](_0x247fe1){const _0x173d38=a0_0x39798a;if(this[_0x173d38(0x321)])clearInterval(this['analysisTimer']);if(this[_0x173d38(0x2aa)])clearInterval(this['driftAnalysisTimer']);if(this[_0x173d38(0x259)])this[_0x173d38(0x259)][_0x173d38(0x256)]();if(this['modeResetJob'])this[_0x173d38(0x29d)][_0x173d38(0x256)]();if(this[_0x173d38(0x263)])this[_0x173d38(0x263)][_0x173d38(0x256)]();if(this['exitTimer'])clearTimeout(this[_0x173d38(0x2ee)]);if(this[_0x173d38(0x31f)])clearTimeout(this[_0x173d38(0x31f)]);_0x247fe1();}async['onStateChange'](_0x5a60b2,_0x361047){const _0x10fcb0=a0_0x39798a;if(!_0x361047)return;if(_0x5a60b2===this[_0x10fcb0(0x22c)]+'.'+SYSTEM_DP_MODE){_0x361047[_0x10fcb0(0x2dd)]&&Object[_0x10fcb0(0x261)](SYSTEM_MODES)[_0x10fcb0(0x2db)](_0x361047['val'])&&(this['currentSystemMode']=_0x361047['val'],_0x361047[_0x10fcb0(0x2dd)]===SYSTEM_MODES[_0x10fcb0(0x27c)]?await this['setPresence'](![]):await this[_0x10fcb0(0x286)](!![]));if(!_0x361047[_0x10fcb0(0x357)])this[_0x10fcb0(0x2f1)](_0x5a60b2,{'val':this[_0x10fcb0(0x22d)],'ack':!![]});return;}if(!_0x361047[_0x10fcb0(0x357)]){_0x5a60b2[_0x10fcb0(0x2db)](_0x10fcb0(0x333))&&_0x361047[_0x10fcb0(0x2dd)]&&(this[_0x10fcb0(0x2f1)](_0x5a60b2,{'val':![],'ack':!![]}),this[_0x10fcb0(0x32e)]());if(_0x5a60b2['includes'](_0x10fcb0(0x23a))&&_0x361047[_0x10fcb0(0x2dd)]){this['setState'](_0x5a60b2,{'val':![],'ack':!![]});if(this['isProVersion'])this[_0x10fcb0(0x227)]();}_0x5a60b2[_0x10fcb0(0x2db)](_0x10fcb0(0x289))&&_0x361047['val']&&(this[_0x10fcb0(0x2f1)](_0x5a60b2,{'val':![],'ack':!![]}),this[_0x10fcb0(0x2bc)]());return;}if(this[_0x10fcb0(0x262)][_0x10fcb0(0x28a)]&&this[_0x10fcb0(0x262)][_0x10fcb0(0x28a)][_0x10fcb0(0x2db)](_0x5a60b2)){await this[_0x10fcb0(0x1ef)]();return;}const _0x2dc874=(this[_0x10fcb0(0x262)][_0x10fcb0(0x28c)]||[])[_0x10fcb0(0x308)](_0x4b8616=>_0x4b8616['id']===_0x5a60b2);if(_0x2dc874)this[_0x10fcb0(0x1f9)](_0x5a60b2,_0x361047,_0x2dc874);}async[a0_0x39798a(0x324)](_0xbd64f6){const _0x260bdd=a0_0x39798a;if(typeof _0xbd64f6==='object'&&_0xbd64f6[_0x260bdd(0x2b6)])try{if(_0xbd64f6[_0x260bdd(0x2b0)]==='testApiKey'){}else{if(_0xbd64f6[_0x260bdd(0x2b0)]==='testNotification'){}else{if(_0xbd64f6['command']===_0x260bdd(0x284)){}else{if(_0xbd64f6['command']===_0x260bdd(0x34a)){const _0xfc38fd=this[_0x260bdd(0x23f)]['length'],_0x1947c1=this[_0x260bdd(0x20b)]['filter'](_0xca88a4=>_0xca88a4[_0x260bdd(0x24b)]>new Date()[_0x260bdd(0x343)](0x0,0x0,0x0,0x0))[_0x260bdd(0x1f6)];let _0xe4e505={'status':'N/A'};try{_0xe4e505['status']=(await this[_0x260bdd(0x2d2)](LTM_DP_DRIFT_STATUS))[_0x260bdd(0x2dd)];}catch(_0x424a1a){}this[_0x260bdd(0x319)](_0xbd64f6[_0x260bdd(0x1de)],_0xbd64f6[_0x260bdd(0x2b0)],{'success':!![],'eventHistory':this[_0x260bdd(0x20b)][_0x260bdd(0x27a)](0x0,0xf),'stats':{'digestCount':_0xfc38fd,'eventCountToday':_0x1947c1,'driftStatus':_0xe4e505[_0x260bdd(0x2a7)],'isPresent':this['isPresent']}},_0xbd64f6[_0x260bdd(0x1dc)]);}else{if(_0xbd64f6['command']===_0x260bdd(0x340)){const _0x29c1d8=await this[_0x260bdd(0x354)]('enum.functions.*',_0x260bdd(0x26a)),_0x3bcc00=[];if(_0x29c1d8)for(const _0x318928 in _0x29c1d8){const _0x328776=_0x29c1d8[_0x318928],_0x311740=(_0x328776[_0x260bdd(0x314)]&&typeof _0x328776[_0x260bdd(0x314)][_0x260bdd(0x243)]===_0x260bdd(0x257)?_0x328776[_0x260bdd(0x314)][_0x260bdd(0x243)]['de']:_0x328776[_0x260bdd(0x314)][_0x260bdd(0x243)])||_0x328776['common']['name'];_0x3bcc00['push']({'id':_0x318928,'name':_0x311740});}this[_0x260bdd(0x319)](_0xbd64f6['from'],_0xbd64f6[_0x260bdd(0x2b0)],{'success':!![],'enums':_0x3bcc00},_0xbd64f6[_0x260bdd(0x1dc)]);}else{if(_0xbd64f6[_0x260bdd(0x2b0)]===_0x260bdd(0x2ea))try{const _0x474462=await this[_0x260bdd(0x276)](_0xbd64f6[_0x260bdd(0x2b6)]||{});this['sendTo'](_0xbd64f6[_0x260bdd(0x1de)],_0xbd64f6[_0x260bdd(0x2b0)],{'success':!![],'devices':_0x474462},_0xbd64f6[_0x260bdd(0x1dc)]);}catch(_0x10a1a5){this[_0x260bdd(0x319)](_0xbd64f6[_0x260bdd(0x1de)],_0xbd64f6[_0x260bdd(0x2b0)],{'success':![],'error':_0x10a1a5[_0x260bdd(0x2b6)]},_0xbd64f6['callback']);}}}}}}}catch(_0x5d3f8e){this[_0x260bdd(0x32f)]['error'](_0x260bdd(0x2b3)+_0xbd64f6[_0x260bdd(0x2b0)]+':\x20'+_0x5d3f8e[_0x260bdd(0x2b6)]);if(_0xbd64f6['callback'])this[_0x260bdd(0x319)](_0xbd64f6[_0x260bdd(0x1de)],_0xbd64f6[_0x260bdd(0x2b0)],{'success':![],'error':_0x5d3f8e[_0x260bdd(0x2b6)]},_0xbd64f6[_0x260bdd(0x1dc)]);}}async[a0_0x39798a(0x1f9)](_0x59dcdb,_0x5a2a49,_0x14564d){const _0x4cc499=a0_0x39798a;if(!_0x14564d[_0x4cc499(0x24a)]&&this[_0x4cc499(0x21f)][_0x59dcdb]===_0x5a2a49['val'])return;this[_0x4cc499(0x21f)][_0x59dcdb]=_0x5a2a49[_0x4cc499(0x2dd)];if(this[_0x4cc499(0x2da)])return;const _0x2fedf8=await this[_0x4cc499(0x1ef)]();if(_0x2fedf8){if(!this[_0x4cc499(0x344)])await this[_0x4cc499(0x286)](!![]);}else{const _0x4c3fce=_0x14564d[_0x4cc499(0x204)]===!![];_0x4c3fce?this[_0x4cc499(0x30d)]():(this[_0x4cc499(0x2ee)]&&this[_0x4cc499(0x24e)](),!this[_0x4cc499(0x344)]&&this[_0x4cc499(0x22d)]===SYSTEM_MODES['NORMAL']&&await this[_0x4cc499(0x286)](!![]));}const _0x562fdf={'timestamp':_0x5a2a49['ts'],'id':_0x59dcdb,'name':_0x14564d[_0x4cc499(0x243)],'value':_0x5a2a49['val'],'location':_0x14564d[_0x4cc499(0x210)],'type':_0x14564d[_0x4cc499(0x1fc)]};this[_0x4cc499(0x20b)][_0x4cc499(0x292)](_0x562fdf);if(this['eventHistory'][_0x4cc499(0x1f6)]>HISTORY_MAX_SIZE)this['eventHistory']['pop']();await this[_0x4cc499(0x2a1)](_0x4cc499(0x28e),{'val':JSON[_0x4cc499(0x345)](_0x562fdf),'ack':!![]}),await this['setStateAsync'](_0x4cc499(0x2b2),{'val':JSON[_0x4cc499(0x345)](this['eventHistory']),'ack':!![]}),this[_0x4cc499(0x309)][_0x4cc499(0x282)]({'timestamp':new Date(_0x5a2a49['ts'])[_0x4cc499(0x21c)](),'sensorName':_0x14564d[_0x4cc499(0x243)],'location':_0x14564d[_0x4cc499(0x210)],'value':_0x5a2a49[_0x4cc499(0x2dd)]}),await this['saveRawEventLog']();}async[a0_0x39798a(0x1df)](){}async[a0_0x39798a(0x32e)](_0x1f58b5=''){}async[a0_0x39798a(0x227)](){}async['sendMorningBriefing'](){}async[a0_0x39798a(0x276)](_0x4bb2ca){const _0x48859d=a0_0x39798a;this['log'][_0x48859d(0x28d)](_0x48859d(0x205));const _0x4cd527=[],_0x5c1ff8=await this[_0x48859d(0x354)]('*');let _0xa88846=0x0;const _0x3cd489=await this[_0x48859d(0x354)](_0x48859d(0x2a9),_0x48859d(0x26a)),_0xa794bd=await this[_0x48859d(0x354)]('enum.functions.*',_0x48859d(0x26a)),_0x8c1856={};if(_0x3cd489)for(const _0x50ad54 in _0x3cd489){const _0x15d8f7=_0x3cd489[_0x50ad54][_0x48859d(0x314)][_0x48859d(0x255)]||[],_0x4c2baa=typeof _0x3cd489[_0x50ad54][_0x48859d(0x314)]['name']===_0x48859d(0x257)?_0x3cd489[_0x50ad54][_0x48859d(0x314)]['name']['de']:_0x3cd489[_0x50ad54][_0x48859d(0x314)]['name'];_0x15d8f7[_0x48859d(0x332)](_0x1455c0=>_0x8c1856[_0x1455c0]=_0x4c2baa);}const _0x42302e={};if(_0xa794bd)for(const _0x4c0d69 in _0xa794bd){const _0x133639=_0xa794bd[_0x4c0d69][_0x48859d(0x314)][_0x48859d(0x255)]||[],_0x11298f=_0x4c0d69[_0x48859d(0x293)]('.')[_0x48859d(0x287)]()[_0x48859d(0x251)]();_0x133639[_0x48859d(0x332)](_0x4a463c=>{if(!_0x42302e[_0x4a463c])_0x42302e[_0x4a463c]=[];_0x42302e[_0x4a463c]['push'](_0x11298f);});}const _0x161b9c=_0x4bb2ca[_0x48859d(0x272)]||[],_0x611c58=_0x4bb2ca[_0x48859d(0x327)]!==![],_0x45a5ff=_0x4bb2ca[_0x48859d(0x294)]!==![],_0x3fbff8=_0x4bb2ca[_0x48859d(0x277)]!==![],_0x32a06c=_0x4bb2ca[_0x48859d(0x33e)]===!![],_0x58a495=_0x4bb2ca['weather']===!![];for(const _0x15d880 in _0x5c1ff8){const _0x533e63=_0x5c1ff8[_0x15d880];if(_0x533e63[_0x48859d(0x1fc)]!==_0x48859d(0x219)||!_0x533e63[_0x48859d(0x314)])continue;if(ADAPTER_BLACKLIST[_0x48859d(0x1ee)](_0x120dc5=>_0x15d880[_0x48859d(0x2c6)](_0x120dc5))&&!_0x58a495)continue;const _0x314e1b=(_0x533e63[_0x48859d(0x314)][_0x48859d(0x1e3)]||'')['toLowerCase']();let _0x3d3f1e=(typeof _0x533e63[_0x48859d(0x314)][_0x48859d(0x243)]===_0x48859d(0x257)?_0x533e63[_0x48859d(0x314)][_0x48859d(0x243)]['de']:_0x533e63[_0x48859d(0x314)][_0x48859d(0x243)])||_0x15d880;const _0x40645a=_0x3d3f1e['toLowerCase'](),_0x41acec=GENERIC_NAMES[_0x48859d(0x1ee)](_0x13e1af=>_0x40645a[_0x48859d(0x2db)](_0x13e1af))||_0x40645a['includes'](_0x48859d(0x315));let _0x3eef57='';if(_0x41acec){let _0x2dbcaa='',_0x467aff=_0x15d880;const _0x195c1b=_0x41acec&&_0xa88846<0x5;if(_0x195c1b)_0x3eef57+=_0x48859d(0x2df)+_0x15d880+_0x48859d(0x248)+_0x3d3f1e+_0x48859d(0x2d8);for(let _0x100a8b=0x0;_0x100a8b<0x4;_0x100a8b++){const _0x420d8f=_0x467aff[_0x48859d(0x283)]('.');if(_0x420d8f===-0x1)break;_0x467aff=_0x467aff[_0x48859d(0x236)](0x0,_0x420d8f);const _0x2b59fd=_0x5c1ff8[_0x467aff];if(_0x2b59fd&&_0x2b59fd['common']&&_0x2b59fd[_0x48859d(0x314)][_0x48859d(0x243)]){const _0x448535=typeof _0x2b59fd[_0x48859d(0x314)][_0x48859d(0x243)]===_0x48859d(0x257)?_0x2b59fd[_0x48859d(0x314)][_0x48859d(0x243)]['de']:_0x2b59fd[_0x48859d(0x314)]['name'],_0x472407=_0x448535?_0x448535['toLowerCase']():'';if(_0x195c1b)_0x3eef57+='L'+_0x100a8b+'\x20Parent:\x20'+_0x467aff+_0x48859d(0x285)+_0x448535+'\x22\x20|\x20';const _0x188248=_0x467aff[_0x48859d(0x293)]('.')[_0x48859d(0x287)]()['toLowerCase']();_0x448535&&!_0x472407['includes']('channel')&&!_0x472407['includes']('device')&&_0x472407!==_0x188248&&_0x448535[_0x48859d(0x1f6)]>0x2&&(_0x2dbcaa=_0x448535);}}_0x195c1b&&(this[_0x48859d(0x32f)][_0x48859d(0x1ea)](_0x48859d(0x2a2)+_0x3eef57+'\x20=>\x20SELECTED:\x20\x22'+_0x2dbcaa+'\x22'),_0xa88846++),_0x2dbcaa&&(!_0x3d3f1e[_0x48859d(0x251)]()[_0x48859d(0x2db)](_0x2dbcaa[_0x48859d(0x251)]())&&(_0x3d3f1e=_0x2dbcaa+'\x20'+_0x3d3f1e));}const _0x3092e4=_0x42302e[_0x15d880]||[];let _0x5dad96=![],_0x4ed6ce=![];if(_0x161b9c[_0x48859d(0x1f6)]>0x0)for(const _0x57ea88 of _0x161b9c){if(_0xa794bd[_0x57ea88]&&_0xa794bd[_0x57ea88]['common'][_0x48859d(0x255)]){const _0x1fecfa=_0xa794bd[_0x57ea88][_0x48859d(0x314)][_0x48859d(0x255)];if(_0x1fecfa['includes'](_0x15d880)||_0x1fecfa[_0x48859d(0x1ee)](_0x1b7c17=>_0x15d880[_0x48859d(0x2c6)](_0x1b7c17+'.'))){_0x5dad96=!![],_0x4ed6ce=!![];break;}}}if(!_0x5dad96&&!_0x58a495){if(IGNORE_TERMS[_0x48859d(0x1ee)](_0x28717d=>_0x15d880[_0x48859d(0x233)]()['includes'](_0x28717d)||_0x40645a[_0x48859d(0x2db)](_0x28717d['toLowerCase']()))){if(!_0x314e1b[_0x48859d(0x2db)](_0x48859d(0x327))&&!_0x314e1b[_0x48859d(0x2db)](_0x48859d(0x211))&&!_0x314e1b[_0x48859d(0x2db)]('switch'))continue;}}let _0x10cf51='';if(_0x611c58&&(_0x314e1b[_0x48859d(0x2db)](_0x48859d(0x327))||_0x40645a['includes'](_0x48859d(0x2c8))))_0x10cf51='motion';else{if(!_0x10cf51&&_0x45a5ff&&(_0x314e1b['includes'](_0x48859d(0x211))||_0x314e1b[_0x48859d(0x2db)]('window')||_0x40645a[_0x48859d(0x2db)](_0x48859d(0x2e4))||_0x40645a[_0x48859d(0x2db)]('t√ºr')))_0x10cf51=_0x48859d(0x211);else{if(!_0x10cf51&&_0x3fbff8&&(_0x314e1b['includes'](_0x48859d(0x27d))||_0x40645a[_0x48859d(0x2db)]('licht')))_0x10cf51=_0x48859d(0x27d);else{if(!_0x10cf51&&_0x32a06c&&(_0x314e1b[_0x48859d(0x2db)](_0x48859d(0x33e))||_0x40645a[_0x48859d(0x2db)]('temp')))_0x10cf51=_0x48859d(0x33e);else{if(!_0x10cf51&&_0x4ed6ce)_0x10cf51=_0x48859d(0x21e);}}}}if(_0x10cf51){let _0x410b82=_0x8c1856[_0x15d880]||'';if(!_0x410b82){let _0x4df7b9=_0x15d880;for(let _0x24e389=0x0;_0x24e389<0x3;_0x24e389++){const _0x1da0da=_0x4df7b9[_0x48859d(0x283)]('.');if(_0x1da0da===-0x1)break;_0x4df7b9=_0x4df7b9['substring'](0x0,_0x1da0da);if(_0x8c1856[_0x4df7b9]){_0x410b82=_0x8c1856[_0x4df7b9];break;}}}if(!_0x410b82){if(_0x40645a[_0x48859d(0x2db)]('bad'))_0x410b82='Badezimmer';else{if(_0x40645a[_0x48859d(0x2db)](_0x48859d(0x301)))_0x410b82=_0x48859d(0x31d);else{if(_0x40645a['includes']('wohn'))_0x410b82='Wohnzimmer';else{if(_0x40645a[_0x48859d(0x2db)]('schlaf'))_0x410b82=_0x48859d(0x2b7);else{if(_0x40645a[_0x48859d(0x2db)](_0x48859d(0x2d7)))_0x410b82=_0x48859d(0x348);else{if(_0x40645a['includes'](_0x48859d(0x1db)))_0x410b82=_0x48859d(0x2e2);}}}}}}_0x4cd527[_0x48859d(0x282)]({'id':_0x15d880,'name':_0x3d3f1e,'location':_0x410b82,'type':_0x10cf51,'logDuplicates':_0x10cf51===_0x48859d(0x327),'isExit':![],'_score':_0x410b82?0x50:_0x10cf51===_0x48859d(0x21e)?0x5a:0x28});}}return _0x4cd527[_0x48859d(0x300)]((_0x50cae4,_0x17ea06)=>_0x17ea06[_0x48859d(0x241)]-_0x50cae4[_0x48859d(0x241)]),_0x4cd527;}[a0_0x39798a(0x25a)](_0x3d8f1d){const _0x248446=a0_0x39798a;if(typeof _0x3d8f1d===_0x248446(0x257))return _0x3d8f1d;try{return JSON[_0x248446(0x20a)](_0x3d8f1d);}catch(_0x45b3b1){return null;}}async[a0_0x39798a(0x209)](){}async[a0_0x39798a(0x320)](){const _0x267ead=a0_0x39798a;try{const _0x17c53b=await this['getStateAsync'](_0x267ead(0x2b2));_0x17c53b&&_0x17c53b['val']&&(this[_0x267ead(0x20b)]=JSON[_0x267ead(0x20a)](_0x17c53b[_0x267ead(0x2dd)][_0x267ead(0x1e7)]()));}catch(_0x29c3fb){this[_0x267ead(0x20b)]=[];}try{const _0x409c81=await this[_0x267ead(0x2d2)]('analysis.analysisHistory');if(_0x409c81&&_0x409c81['val'])this[_0x267ead(0x242)]=JSON['parse'](_0x409c81[_0x267ead(0x2dd)][_0x267ead(0x1e7)]());}catch(_0x1f1882){this[_0x267ead(0x242)]=[];}}async[a0_0x39798a(0x32c)](){const _0xb4c566=a0_0x39798a;try{const _0x1afce8=await this['getForeignObjectAsync'](_0xb4c566(0x2ac));_0x1afce8&&_0x1afce8['common']&&(this[_0xb4c566(0x2d4)]={'latitude':_0x1afce8[_0xb4c566(0x314)][_0xb4c566(0x311)]||0x0,'longitude':_0x1afce8['common']['longitude']||0x0,'city':_0x1afce8[_0xb4c566(0x314)][_0xb4c566(0x1f1)]||''});}catch(_0x21d832){}}async['checkLicense'](_0x55740d){const _0x1a4673=a0_0x39798a;if(!_0x55740d)return![];this[_0x1a4673(0x2e7)]=await this[_0x1a4673(0x30a)]();if(_0x55740d==='TEST-PRO-KEY'||_0x55740d['startsWith']('PRO-'))return!![];return![];}async[a0_0x39798a(0x30a)](){const _0x716420=a0_0x39798a;try{const _0x13a162=await this[_0x716420(0x353)](_0x716420(0x296));if(_0x13a162&&_0x13a162[_0x716420(0x2fd)]&&_0x13a162[_0x716420(0x2fd)][_0x716420(0x31c)])return _0x13a162[_0x716420(0x2fd)][_0x716420(0x31c)];return _0x716420(0x2c5);}catch(_0x4f0326){return _0x716420(0x215);}}async[a0_0x39798a(0x234)](){const _0x50d326=a0_0x39798a;await this['checkSystemObjects'](),await this[_0x50d326(0x1e2)](_0x50d326(0x28e),{'type':_0x50d326(0x219),'common':{'name':_0x50d326(0x1e8),'type':_0x50d326(0x20c),'role':_0x50d326(0x265),'read':!![],'write':![]},'native':{}}),await this[_0x50d326(0x1e2)](_0x50d326(0x2b2),{'type':_0x50d326(0x219),'common':{'name':_0x50d326(0x27f),'type':_0x50d326(0x20c),'role':_0x50d326(0x265),'read':!![],'write':![]},'native':{}}),await this[_0x50d326(0x1e2)](_0x50d326(0x333),{'type':_0x50d326(0x219),'common':{'name':_0x50d326(0x338),'type':_0x50d326(0x218),'role':_0x50d326(0x307),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x50d326(0x1e2)](_0x50d326(0x21b),{'type':_0x50d326(0x219),'common':{'name':_0x50d326(0x26e),'type':_0x50d326(0x218),'role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x50d326(0x1e2)]('analysis.lastResult',{'type':'state','common':{'name':_0x50d326(0x33f),'type':'string','role':_0x50d326(0x265),'read':!![],'write':![]},'native':{}}),await this[_0x50d326(0x1e2)](_0x50d326(0x336),{'type':'state','common':{'name':_0x50d326(0x33c),'type':_0x50d326(0x218),'role':_0x50d326(0x2ec),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x50d326(0x1e2)]('analysis.isEmergency',{'type':_0x50d326(0x219),'common':{'name':'AI\x20Emergency\x20Status','type':'boolean','role':_0x50d326(0x2fa),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x50d326(0x1e2)]('analysis.alertReason',{'type':'state','common':{'name':'Alert\x20Reason','type':'string','role':_0x50d326(0x2dc),'read':!![],'write':![]},'native':{}}),await this[_0x50d326(0x1e2)]('analysis.activitySummary',{'type':_0x50d326(0x219),'common':{'name':_0x50d326(0x2d6),'type':_0x50d326(0x20c),'role':_0x50d326(0x356),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.deviationFromBaseline',{'type':_0x50d326(0x219),'common':{'name':_0x50d326(0x208),'type':'string','role':'state','read':!![],'write':![],'def':_0x50d326(0x2f7)},'native':{}}),await this[_0x50d326(0x1e2)](_0x50d326(0x223),{'type':_0x50d326(0x219),'common':{'name':_0x50d326(0x312),'type':_0x50d326(0x20c),'role':'text','read':!![],'write':![]},'native':{}}),await this[_0x50d326(0x1e2)](_0x50d326(0x239),{'type':_0x50d326(0x219),'common':{'name':_0x50d326(0x2f2),'type':'string','role':_0x50d326(0x356),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](_0x50d326(0x24d),{'type':_0x50d326(0x1fb),'common':{'name':'Automation\x20Proposals'},'native':{}}),await this['setObjectNotExistsAsync']('analysis.automation.patternDetected',{'type':'state','common':{'name':_0x50d326(0x268),'type':'boolean','role':'indicator','read':!![],'write':![],'def':![]},'native':{}}),await this[_0x50d326(0x1e2)](_0x50d326(0x26b),{'type':_0x50d326(0x219),'common':{'name':_0x50d326(0x266),'type':_0x50d326(0x20c),'role':_0x50d326(0x356),'read':!![],'write':![]},'native':{}}),await this[_0x50d326(0x1e2)](_0x50d326(0x342),{'type':_0x50d326(0x219),'common':{'name':'Action','type':_0x50d326(0x20c),'role':_0x50d326(0x356),'read':!![],'write':![]},'native':{}}),await this[_0x50d326(0x1e2)](_0x50d326(0x212),{'type':_0x50d326(0x219),'common':{'name':_0x50d326(0x2d9),'type':_0x50d326(0x20c),'role':_0x50d326(0x265),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0x50d326(0x1fa),{'type':_0x50d326(0x219),'common':{'name':_0x50d326(0x341),'type':_0x50d326(0x20c),'role':_0x50d326(0x265),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x50d326(0x2e8)](_0x50d326(0x1dd),{'type':'channel','common':{'name':'Health\x20&\x20Sleep\x20Analysis'},'native':{}}),await this[_0x50d326(0x1e2)](_0x50d326(0x355),{'type':_0x50d326(0x219),'common':{'name':'Sleep\x20Score\x20(0-100)','type':'number','role':_0x50d326(0x2cd),'read':!![],'write':![],'def':0x0},'native':{}}),await this[_0x50d326(0x1e2)]('analysis.health.restlessness',{'type':'state','common':{'name':_0x50d326(0x2bd),'type':_0x50d326(0x20c),'role':_0x50d326(0x356),'read':!![],'write':![],'def':'none'},'native':{}}),await this[_0x50d326(0x1e2)](_0x50d326(0x297),{'type':_0x50d326(0x219),'common':{'name':_0x50d326(0x313),'type':'string','role':_0x50d326(0x356),'read':!![],'write':![],'def':''},'native':{}}),await this[_0x50d326(0x310)](),await this[_0x50d326(0x2fc)]();}async['checkSystemObjects'](){const _0x5966b1=a0_0x39798a;await this[_0x5966b1(0x2e8)](_0x5966b1(0x1ed),{'type':_0x5966b1(0x1fb),'common':{'name':_0x5966b1(0x273)},'native':{}}),await this[_0x5966b1(0x2e8)](SYSTEM_DP_MODE,{'type':'state','common':{'name':_0x5966b1(0x31e),'type':'string','role':'state','read':!![],'write':!![],'def':SYSTEM_MODES[_0x5966b1(0x202)],'states':{[SYSTEM_MODES[_0x5966b1(0x202)]]:'Normal',[SYSTEM_MODES[_0x5966b1(0x27c)]]:'Urlaub',[SYSTEM_MODES[_0x5966b1(0x32d)]]:_0x5966b1(0x349),[SYSTEM_MODES['GUEST']]:_0x5966b1(0x2b5)}},'native':{}});}async[a0_0x39798a(0x310)](){const _0x4ce8f0=a0_0x39798a;await this[_0x4ce8f0(0x2e8)]('LTM',{'type':'channel','common':{'name':'LTM'},'native':{}}),await this[_0x4ce8f0(0x2e8)](LTM_DP_RAW_LOG,{'type':_0x4ce8f0(0x219),'common':{'name':_0x4ce8f0(0x23b),'type':_0x4ce8f0(0x20c),'role':_0x4ce8f0(0x265),'read':!![],'write':![]},'native':{}}),await this[_0x4ce8f0(0x2e8)](LTM_DP_DAILY_DIGESTS,{'type':_0x4ce8f0(0x219),'common':{'name':_0x4ce8f0(0x329),'type':_0x4ce8f0(0x20c),'role':_0x4ce8f0(0x265),'read':!![],'write':![]},'native':{}}),await this[_0x4ce8f0(0x2e8)](LTM_DP_STATUS,{'type':_0x4ce8f0(0x219),'common':{'name':_0x4ce8f0(0x20d),'type':_0x4ce8f0(0x20c),'role':_0x4ce8f0(0x356),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_TRIGGER_DIGEST,{'type':_0x4ce8f0(0x219),'common':{'name':'Trigger\x20Digest','type':_0x4ce8f0(0x218),'role':_0x4ce8f0(0x307),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x4ce8f0(0x2e8)](LTM_DP_BASELINE_STATUS,{'type':'state','common':{'name':'Baseline\x20Status','type':'string','role':_0x4ce8f0(0x356),'read':!![],'write':![]},'native':{}});}async['checkLtmDriftObjects'](){const _0x4e6f1d=a0_0x39798a;await this[_0x4e6f1d(0x2e8)](LTM_DP_DRIFT_CHANNEL,{'type':_0x4e6f1d(0x1fb),'common':{'name':_0x4e6f1d(0x200)},'native':{}}),await this[_0x4e6f1d(0x2e8)](LTM_DP_DRIFT_STATUS,{'type':_0x4e6f1d(0x219),'common':{'name':_0x4e6f1d(0x2ca),'type':'string','role':'state','read':!![],'write':![],'def':_0x4e6f1d(0x2f7)},'native':{}}),await this[_0x4e6f1d(0x2e8)](LTM_DP_DRIFT_DETAILS,{'type':_0x4e6f1d(0x219),'common':{'name':_0x4e6f1d(0x2e1),'type':'string','role':_0x4e6f1d(0x356),'read':!![],'write':![]},'native':{}}),await this[_0x4e6f1d(0x2e8)](LTM_DP_DRIFT_LAST_CHECK,{'type':'state','common':{'name':_0x4e6f1d(0x1ec),'type':_0x4e6f1d(0x2c9),'role':_0x4e6f1d(0x224),'read':!![],'write':![]},'native':{}});}async[a0_0x39798a(0x2bb)](){const _0x2058c4=a0_0x39798a;try{const _0x204f24=await this[_0x2058c4(0x2d2)](SYSTEM_DP_MODE);_0x204f24&&_0x204f24[_0x2058c4(0x2dd)]&&Object[_0x2058c4(0x261)](SYSTEM_MODES)[_0x2058c4(0x2db)](_0x204f24[_0x2058c4(0x2dd)])?this[_0x2058c4(0x22d)]=_0x204f24[_0x2058c4(0x2dd)]:(this[_0x2058c4(0x22d)]=SYSTEM_MODES[_0x2058c4(0x202)],await this['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x4cf861){this['currentSystemMode']=SYSTEM_MODES[_0x2058c4(0x202)];}}async[a0_0x39798a(0x1e9)](){const _0x5ea3cb=a0_0x39798a;try{const _0x5971c0=await this['getStateAsync'](LTM_DP_RAW_LOG);if(_0x5971c0&&_0x5971c0[_0x5ea3cb(0x2dd)])this[_0x5ea3cb(0x309)]=JSON[_0x5ea3cb(0x20a)](_0x5971c0[_0x5ea3cb(0x2dd)]);}catch(_0x40f27b){this[_0x5ea3cb(0x309)]=[];}}async['loadDailyDigests'](){const _0x3ebf6f=a0_0x39798a;try{const _0x386410=await this[_0x3ebf6f(0x2d2)](LTM_DP_DAILY_DIGESTS);if(_0x386410&&_0x386410[_0x3ebf6f(0x2dd)])this[_0x3ebf6f(0x23f)]=JSON[_0x3ebf6f(0x20a)](_0x386410[_0x3ebf6f(0x2dd)]);}catch(_0x98965c){this[_0x3ebf6f(0x23f)]=[];}await this[_0x3ebf6f(0x2a6)]();}async[a0_0x39798a(0x230)](){const _0x123200=a0_0x39798a;this[_0x123200(0x309)]['length']>RAW_LOG_MAX_SIZE&&this[_0x123200(0x309)]['splice'](0x0,this[_0x123200(0x309)][_0x123200(0x1f6)]-RAW_LOG_MAX_SIZE),await this['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x123200(0x345)](this[_0x123200(0x309)]),'ack':!![]});}async['saveDailyDigests'](_0x37d6fb=!![]){const _0x2c6716=a0_0x39798a,_0x17f73d=this[_0x2c6716(0x262)]['ltmLtbWindowDays']||0x3c;this[_0x2c6716(0x23f)][_0x2c6716(0x1f6)]>_0x17f73d&&this[_0x2c6716(0x23f)]['splice'](0x0,this['dailyDigests'][_0x2c6716(0x1f6)]-_0x17f73d);await this[_0x2c6716(0x2a1)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x2c6716(0x345)](this['dailyDigests']),'ack':!![]});if(_0x37d6fb)await this[_0x2c6716(0x2a6)]();}async[a0_0x39798a(0x2ed)](_0xa18472){const _0x2dee25=a0_0x39798a;this['analysisHistory'][_0x2dee25(0x292)](_0xa18472);if(this[_0x2dee25(0x242)][_0x2dee25(0x1f6)]>ANALYSIS_HISTORY_MAX_SIZE)this['analysisHistory'][_0x2dee25(0x287)]();await this['setStateAsync'](_0x2dee25(0x212),{'val':JSON[_0x2dee25(0x345)](this[_0x2dee25(0x242)]),'ack':!![]});}async[a0_0x39798a(0x2a6)](){const _0x2ab879=a0_0x39798a;if(!this[_0x2ab879(0x247)]){await this['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0x4c189f=this[_0x2ab879(0x23f)][_0x2ab879(0x1f6)]>=(this['config'][_0x2ab879(0x221)]||0x7)?_0x2ab879(0x1e6)+this[_0x2ab879(0x23f)][_0x2ab879(0x1f6)]+_0x2ab879(0x2c1):'Lernphase\x20('+this[_0x2ab879(0x23f)][_0x2ab879(0x1f6)]+'/'+(this[_0x2ab879(0x262)][_0x2ab879(0x221)]||0x7)+')';await this[_0x2ab879(0x2a1)](LTM_DP_BASELINE_STATUS,{'val':_0x4c189f,'ack':!![]});}async[a0_0x39798a(0x254)](){const _0xb8613f=a0_0x39798a,_0x59cec4=this[_0xb8613f(0x262)][_0xb8613f(0x28c)];if(_0x59cec4&&_0x59cec4['length']>0x0){this['log'][_0xb8613f(0x28d)]('Subscribing\x20to\x20'+_0x59cec4[_0xb8613f(0x1f6)]+_0xb8613f(0x20e));for(const _0x2ebc47 of _0x59cec4){if(_0x2ebc47['id']){await this[_0xb8613f(0x291)](_0x2ebc47['id']);try{const _0x30010d=await this[_0xb8613f(0x25c)](_0x2ebc47['id']);if(_0x30010d)this[_0xb8613f(0x21f)][_0x2ebc47['id']]=_0x30010d[_0xb8613f(0x2dd)];}catch(_0x42bae3){}}}}}async[a0_0x39798a(0x298)](){const _0x44de64=a0_0x39798a,_0x18950b=this[_0x44de64(0x262)]['presenceDevices']||[];if(_0x18950b[_0x44de64(0x1f6)]>0x0){this['log']['info'](_0x44de64(0x267)+_0x18950b[_0x44de64(0x1f6)]+_0x44de64(0x249));for(const _0x2761bb of _0x18950b){await this[_0x44de64(0x291)](_0x2761bb);}try{await this[_0x44de64(0x1ef)]();}catch(_0x2008dd){}}}async[a0_0x39798a(0x26d)](){const _0x3c4e4f=a0_0x39798a;try{if(!this['config'][_0x3c4e4f(0x2f8)])return _0x3c4e4f(0x1fd);let _0x407049='';const _0x1be2ff=this[_0x3c4e4f(0x262)]['weatherInstance'];if(_0x1be2ff)try{if(_0x1be2ff[_0x3c4e4f(0x2db)](_0x3c4e4f(0x30e))){const _0x3fdf6a=await this[_0x3c4e4f(0x25c)](_0x1be2ff+_0x3c4e4f(0x207));if(_0x3fdf6a&&_0x3fdf6a[_0x3c4e4f(0x2dd)])_0x407049=_0x3fdf6a[_0x3c4e4f(0x2dd)];}else{if(_0x1be2ff[_0x3c4e4f(0x2db)]('daswetter')){const _0x512df0=await this[_0x3c4e4f(0x25c)](_0x1be2ff+_0x3c4e4f(0x264));if(_0x512df0&&_0x512df0[_0x3c4e4f(0x2dd)])_0x407049=_0x512df0[_0x3c4e4f(0x2dd)];}else{if(_0x1be2ff[_0x3c4e4f(0x2db)](_0x3c4e4f(0x1f5))){const _0xc4282e=await this[_0x3c4e4f(0x25c)](_0x1be2ff+_0x3c4e4f(0x228));if(_0xc4282e&&_0xc4282e['val'])_0x407049=_0xc4282e[_0x3c4e4f(0x2dd)];}}}}catch(_0x27330b){}if(!_0x407049){const _0x36f09d=[_0x3c4e4f(0x26c),_0x3c4e4f(0x334),_0x3c4e4f(0x2c7),'openweathermap.0'];for(const _0x12155e of _0x36f09d){try{const _0x5dd113=await this[_0x3c4e4f(0x353)](_0x12155e);if(_0x5dd113){if(_0x12155e['includes']('accuweather')){const _0x34cacf=await this['getForeignStateAsync'](_0x12155e+_0x3c4e4f(0x207));if(_0x34cacf&&_0x34cacf[_0x3c4e4f(0x2dd)]){_0x407049=_0x34cacf[_0x3c4e4f(0x2dd)];break;}}}}catch(_0x32eaaa){}}}return _0x407049?_0x3c4e4f(0x299)+_0x407049:_0x3c4e4f(0x2c3);}catch(_0x476e14){return _0x3c4e4f(0x2e0)+_0x476e14[_0x3c4e4f(0x2b6)];}}async[a0_0x39798a(0x217)](){const _0x225e85=a0_0x39798a;try{if(!this['config'][_0x225e85(0x1f4)])return _0x225e85(0x246);let _0x3124cc=this[_0x225e85(0x262)][_0x225e85(0x351)]||_0x225e85(0x225),_0x31e370=this[_0x225e85(0x262)][_0x225e85(0x2b1)]||[];if(typeof _0x31e370===_0x225e85(0x20c))_0x31e370=_0x31e370[_0x225e85(0x293)](',');try{const _0x3da79b=await this[_0x225e85(0x25c)](_0x3124cc+_0x225e85(0x206));if(_0x3da79b&&_0x3da79b['val']){let _0x30465e=this[_0x225e85(0x25a)](_0x3da79b[_0x225e85(0x2dd)]);if(_0x30465e&&Array['isArray'](_0x30465e)){if(_0x31e370['length']>0x0)_0x30465e=_0x30465e[_0x225e85(0x269)](_0xbe08d8=>_0x31e370['includes'](_0xbe08d8[_0x225e85(0x213)]||''));else return _0x225e85(0x339);if(_0x30465e[_0x225e85(0x1f6)]>0x0){const _0x4aa4ea=_0x30465e[_0x225e85(0x27a)](0x0,0x3)[_0x225e85(0x29b)](_0xe06e6=>{const _0x5740f1=_0x225e85;let _0x3787b9=_0xe06e6[_0x5740f1(0x224)];if(_0xe06e6[_0x5740f1(0x318)])_0x3787b9+='\x20'+_0xe06e6[_0x5740f1(0x318)];return _0x3787b9+':\x20'+_0xe06e6[_0x5740f1(0x2e6)]+'\x20('+_0xe06e6[_0x5740f1(0x213)]+')';});return _0x225e85(0x232)+_0x4aa4ea['join'](_0x225e85(0x274));}else return _0x225e85(0x281);}}}catch(_0x481d72){this[_0x225e85(0x32f)][_0x225e85(0x1ea)]('Error\x20reading\x20calendar\x20table:\x20'+_0x481d72[_0x225e85(0x2b6)]);}return _0x225e85(0x2e9);}catch(_0x2c0c84){return _0x225e85(0x270)+_0x2c0c84['message'];}}async[a0_0x39798a(0x25d)](_0x4d30c0){const _0x2fc004=a0_0x39798a;try{const _0x401969=await this[_0x2fc004(0x25c)](_0x4d30c0+_0x2fc004(0x206));if(_0x401969&&_0x401969['val']){const _0x128f85=this[_0x2fc004(0x25a)](_0x401969[_0x2fc004(0x2dd)]);if(_0x128f85&&Array[_0x2fc004(0x235)](_0x128f85)){const _0x1ee2ec=[...new Set(_0x128f85[_0x2fc004(0x29b)](_0xda5520=>_0xda5520[_0x2fc004(0x213)])[_0x2fc004(0x269)](Boolean))];return _0x1ee2ec['sort']();}}return[];}catch(_0xa49d45){return this[_0x2fc004(0x32f)]['error']('getCalendarNames\x20Error:\x20'+_0xa49d45[_0x2fc004(0x2b6)]),[];}}async[a0_0x39798a(0x1ef)](){const _0x3e2219=a0_0x39798a;try{const _0x366750=this[_0x3e2219(0x262)][_0x3e2219(0x28a)]||[];let _0x3ec243=![];for(const _0x2c3e2d of _0x366750){try{const _0x29dd69=await this[_0x3e2219(0x25c)](_0x2c3e2d);if(_0x29dd69&&(_0x29dd69['val']===!![]||_0x29dd69[_0x3e2219(0x2dd)]===_0x3e2219(0x2f6)||_0x29dd69[_0x3e2219(0x2dd)]===0x1)){_0x3ec243=!![];break;}}catch(_0x16e916){}}return _0x3ec243&&(this[_0x3e2219(0x2ee)]&&(this[_0x3e2219(0x32f)][_0x3e2219(0x28d)](_0x3e2219(0x1e0)),this[_0x3e2219(0x24e)]()),!this[_0x3e2219(0x344)]&&this[_0x3e2219(0x22d)]===SYSTEM_MODES['NORMAL']&&await this[_0x3e2219(0x286)](!![])),_0x3ec243;}catch(_0x4e8a5a){return this[_0x3e2219(0x32f)][_0x3e2219(0x201)](_0x3e2219(0x203)+_0x4e8a5a[_0x3e2219(0x2b6)]),![];}}[a0_0x39798a(0x30d)](){const _0x354d91=a0_0x39798a;this[_0x354d91(0x24e)](),this[_0x354d91(0x2da)]=!![],this[_0x354d91(0x31f)]=setTimeout(()=>{const _0x58ceac=_0x354d91;this[_0x58ceac(0x2da)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),this['exitTimer']=setTimeout(()=>{const _0xbaf736=_0x354d91;this[_0xbaf736(0x286)](![]),this[_0xbaf736(0x2ee)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}[a0_0x39798a(0x24e)](){const _0x37adde=a0_0x39798a;if(this[_0x37adde(0x2ee)])clearTimeout(this['exitTimer']);if(this['exitGraceTimer'])clearTimeout(this['exitGraceTimer']);this['exitTimer']=null,this[_0x37adde(0x31f)]=null,this[_0x37adde(0x2da)]=![];}async['setPresence'](_0x3773c5){const _0x30a711=a0_0x39798a;if(this[_0x30a711(0x344)]===_0x3773c5)return;this[_0x30a711(0x344)]=_0x3773c5,await this[_0x30a711(0x2a1)](_0x30a711(0x2af),{'val':_0x3773c5,'ack':!![]});}async['saveFeedback'](_0x96885e){const _0x255a1a=a0_0x39798a;this['log'][_0x255a1a(0x28d)](_0x255a1a(0x2a3)+JSON[_0x255a1a(0x345)](_0x96885e));}async[a0_0x39798a(0x2c2)](){const _0x3ea574=a0_0x39798a;if(!this[_0x3ea574(0x247)]||!this[_0x3ea574(0x20f)])return;const _0x2ecb69=this[_0x3ea574(0x262)][_0x3ea574(0x34b)]||0xe;if(this['dailyDigests'][_0x3ea574(0x1f6)]<_0x2ecb69+(this[_0x3ea574(0x262)]['minDaysForBaseline']||0x7)){await this[_0x3ea574(0x2a1)](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0xdfff1f=this[_0x3ea574(0x23f)][_0x3ea574(0x27a)](-_0x2ecb69),_0x25d709=this[_0x3ea574(0x23f)]['slice'](0x0,this['dailyDigests'][_0x3ea574(0x1f6)]-_0x2ecb69),_0x4a2182=_0x3ea574(0x325)+JSON[_0x3ea574(0x345)](_0x25d709)+_0x3ea574(0x260)+JSON[_0x3ea574(0x345)](_0xdfff1f);try{const _0x454d0f=await this[_0x3ea574(0x20f)][_0x3ea574(0x22f)](_0x4a2182),_0x145bf3=JSON[_0x3ea574(0x20a)](_0x454d0f[_0x3ea574(0x214)][_0x3ea574(0x356)]()['replace'](/```json|```/g,'')[_0x3ea574(0x2cc)]());_0x145bf3[_0x3ea574(0x226)]&&(await this[_0x3ea574(0x2a1)](LTM_DP_DRIFT_STATUS,{'val':_0x145bf3[_0x3ea574(0x226)],'ack':!![]}),await this[_0x3ea574(0x2a1)](LTM_DP_DRIFT_DETAILS,{'val':_0x145bf3[_0x3ea574(0x2f3)],'ack':!![]}),await this[_0x3ea574(0x2a1)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x3ea574(0x2a5)](),'ack':!![]}));}catch(_0x4f4bd1){}}[a0_0x39798a(0x28b)](){const _0xd4959c=a0_0x39798a;try{if(this[_0xd4959c(0x259)])this['ltmJob']['cancel']();if(!this[_0xd4959c(0x247)]){this[_0xd4959c(0x2a1)](LTM_DP_STATUS,{'val':_0xd4959c(0x2ce),'ack':!![]});return;}this[_0xd4959c(0x259)]=schedule[_0xd4959c(0x317)](LTM_SCHEDULE,()=>this[_0xd4959c(0x227)]());}catch(_0x43bc59){this[_0xd4959c(0x32f)][_0xd4959c(0x201)](_0xd4959c(0x2a4)+_0x43bc59[_0xd4959c(0x2b6)]);}}[a0_0x39798a(0x2fb)](){const _0x1c3b06=a0_0x39798a;try{if(this[_0x1c3b06(0x29d)])this[_0x1c3b06(0x29d)]['cancel']();this[_0x1c3b06(0x29d)]=schedule[_0x1c3b06(0x317)](MODE_RESET_SCHEDULE,async()=>{const _0x3f9e8a=_0x1c3b06;await this[_0x3f9e8a(0x2bb)](),AUTO_RESET_MODES['includes'](this[_0x3f9e8a(0x22d)])&&await this[_0x3f9e8a(0x2a1)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x3f9e8a(0x202)],'ack':![]});});}catch(_0x13a1c9){this[_0x1c3b06(0x32f)]['error'](_0x1c3b06(0x2e3)+_0x13a1c9[_0x1c3b06(0x2b6)]);}}[a0_0x39798a(0x1e5)](){const _0x145d66=a0_0x39798a;try{if(this['driftAnalysisTimer'])clearInterval(this[_0x145d66(0x2aa)]);if(!this[_0x145d66(0x247)])return;this['driftAnalysisTimer']=setInterval(()=>this[_0x145d66(0x2c2)](),(this[_0x145d66(0x262)][_0x145d66(0x28f)]||0x18)*0x36ee80),setTimeout(()=>this['runBaselineDriftAnalysis'](),0x1388);}catch(_0x4d4268){this[_0x145d66(0x32f)][_0x145d66(0x201)](_0x145d66(0x244)+_0x4d4268[_0x145d66(0x2b6)]);}}[a0_0x39798a(0x2de)](){const _0x3d1b35=a0_0x39798a;try{if(this[_0x3d1b35(0x263)])this[_0x3d1b35(0x263)]['cancel']();if(!this['config'][_0x3d1b35(0x21d)])return;const _0x5dae94=(this[_0x3d1b35(0x262)]['briefingTime']||_0x3d1b35(0x21a))[_0x3d1b35(0x293)](':'),_0x321270=parseInt(_0x5dae94[0x0])||0x8,_0x1c0277=parseInt(_0x5dae94[0x1])||0x0,_0x97a27b=_0x1c0277+'\x20'+_0x321270+'\x20*\x20*\x20*';this[_0x3d1b35(0x32f)][_0x3d1b35(0x28d)](_0x3d1b35(0x279)+_0x321270+':'+(_0x1c0277<0xa?'0'+_0x1c0277:_0x1c0277)),this[_0x3d1b35(0x263)]=schedule[_0x3d1b35(0x317)](_0x97a27b,()=>{const _0x187a16=_0x3d1b35;this[_0x187a16(0x2bc)]();});}catch(_0x1d91ed){this['log']['error'](_0x3d1b35(0x2b4)+_0x1d91ed[_0x3d1b35(0x2b6)]);}}async[a0_0x39798a(0x347)](_0x209678,_0x333d45=![],_0x209e17=![]){const _0x965135=a0_0x39798a;this[_0x965135(0x32f)][_0x965135(0x28d)]((_0x333d45?_0x965135(0x2ba):'')+'Sending\x20notification:\x20\x22'+_0x209678+'\x22');const _0x400131=this[_0x965135(0x262)];let _0xd45658=0x0;_0x400131[_0x965135(0x22e)]&&(await this[_0x965135(0x30b)](_0x400131[_0x965135(0x258)],_0x965135(0x2d3),{'text':_0x209678,'user':_0x400131[_0x965135(0x253)]}),_0xd45658++);if(_0x400131[_0x965135(0x30f)]){let _0x531af4={'message':_0x209678,'title':_0x209e17?_0x965135(0x27b):_0x965135(0x2bf),'priority':_0x209e17?0x2:0x1,'device':_0x400131[_0x965135(0x304)]};_0x209e17&&(_0x531af4[_0x965135(0x32a)]=0x1e,_0x531af4[_0x965135(0x290)]=0xe10,_0x531af4[_0x965135(0x275)]=_0x965135(0x1ff)),await this[_0x965135(0x30b)](_0x400131[_0x965135(0x2c0)],_0x965135(0x2d3),_0x531af4),_0xd45658++;}return _0x400131[_0x965135(0x220)]&&(await this[_0x965135(0x30b)](_0x400131[_0x965135(0x23e)],'send',{'text':_0x209678,'to':_0x400131[_0x965135(0x29a)]}),_0xd45658++),_0xd45658;}}function a0_0x19dd(){const _0x408da2=['KALENDER:\x20Keine\x20Daten','scanDevices','constructor','indicator.alarm','updateAnalysisHistory','exitTimer','direction','bind','setState','Comfort\x20Suggestion','driftDetails','loadDailyDigests','exports','online','N/A','useWeather','geminiApiKey','indicator.alarm.fire','setupModeResetScheduler','checkLtmDriftObjects','native','system.','8jilIlL','sort','k√ºche','@iobroker/adapter-core','(((.+)+)+)+$','notifyPushoverRecipient','LTM.driftAnalysis.lastCheck','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.','button','find','rawEventLog','getSystemUUID','sendToAsync','vis.','startExitTimer','accuweather','notifyPushoverEnabled','checkLtmObjects','latitude','Comfort\x20Summary','Health\x20Notes','common','targetposition','getGenerativeModel','scheduleJob','time','sendTo','7WZtwfT','LTM.driftAnalysis','uuid','K√ºche','System\x20Mode','exitGraceTimer','initHistory','analysisTimer','ready','LTM.baselineStatus','onMessage','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','battery','motion','off','Daily\x20Digests','retry','rssi','initSystemConfig','PARTY','runGeminiAnalysis','log','LTM.rawEventLog','lastAlertState','forEach','analysis.trigger','daswetter.0','cogni-living\x20adapter\x20starting\x20(v','analysis.isAlert','\x20min).\x20Watchdog\x20Limit:\x20','Trigger\x20Analysis','KALENDER:\x20Keine\x20Kalender\x20ausgew√§hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)','onStateChange','voltage','AI\x20Alert\x20Status','1783788MjEMtX','temperature','Last\x20Result','getEnums','Feedback\x20Log','analysis.automation.suggestedAction','setHours','isPresent','stringify','feedbackHistory','sendNotification','Flur','Party','getOverviewData','ltmStbWindowDays','inactivityThresholdHours','1450292bmZKKh','695120illnLN','Gemini\x20AI\x20initialized.','value','calendarInstance','License\x20Check\x20failed:\x20','getForeignObjectAsync','getForeignObjectsAsync','analysis.health.sleepScore','text','ack','2644880oIRcuJ','b√ºro','callback','analysis.health','from','runAutopilot','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','brightness','setObjectNotExistsAsync','role','genAI','setupDriftAnalysisScheduler','Aktiv\x20(','toString','Last\x20raw\x20event','loadRawEventLog','warn','@google/generative-ai','Last\x20Check','system','some','checkWifiPresence','apply','city','stateChange','2676365YHUrAB','useCalendar','openweathermap','length','2844054IhFzgB','onUnload','processSensorEvent','analysis.feedbackHistory','channel','type','Wetter:\x20Deaktiviert','signal','siren','Drift\x20Analysis','error','NORMAL','Error\x20checking\x20WiFi:\x20','isExit','Scanning\x20for\x20devices\x20(Recursive\x20V3\x20+\x20Debug)...','.data.table','.Summary.Current','Deviation','initZombies','parse','eventHistory','string','Processing\x20Status','\x20sensors...','geminiModel','location','door','analysis.analysisHistory','_calName','response','uuid-error','admin.','getCalendarContext','boolean','state','08:00','analysis.triggerBriefing','toISOString','briefingEnabled','custom','sensorLastValues','notifyEmailEnabled','minDaysForBaseline','node-schedule','analysis.comfortSummary','date','ical.0','baselineDrift','createDailyDigest','.forecast.current.state','level','history.','models/gemini-flash-latest','namespace','currentSystemMode','notifyTelegramEnabled','generateContent','saveRawEventLog','consumption','KALENDER:\x20','toUpperCase','createAllObjects','isArray','substring','maintenance','normal','analysis.comfortSuggestion','triggerDailyDigest','Raw\x20Log','licenseKey','unreach','notifyEmailInstance','dailyDigests','lowbat','_score','analysisHistory','name','Drift\x20Sched\x20Error:\x20','position','Kalender:\x20Deaktiviert','isProVersion','\x20(Initial\x20Name:\x20','\x20presence\x20devices...','logDuplicates','timestamp','analysisInterval','analysis.automation','abortExitTimer','0\x203\x20*\x20*\x20*','version','toLowerCase','subscribeStates','notifyTelegramRecipient','initSensorSubscriptions','members','cancel','object','notifyTelegramInstance','ltmJob','tryParse','LTM.driftAnalysis.driftDetails','getForeignStateAsync','getCalendarNames','shutter','onReady','\x0aSTB:\x20','values','config','briefingJob','.NextHours.Location_1.Day_1.current.symbol_desc','json','Description','Subscribing\x20to\x20','Pattern\x20Detected','filter','enum','analysis.automation.description','accuweather.0','getWeatherContext','Trigger\x20Briefing\x20(Test)','18xWWMJV','KALENDER\x20ERROR:\x20','search','selectedFunctionIds','System\x20Status\x20&\x20Control','\x20|\x20','sound','scanForDevices','lights','fault','Scheduling\x20Morning\x20Briefing\x20for\x20','slice','üö®\x20EMERGENCY','VACATION','light','currentposition','Event\x20History','guest','KALENDER:\x20Keine\x20relevanten\x20Termine','push','lastIndexOf','getLtmData','\x20->\x20Name:\x20\x22','setPresence','pop','LTM.driftAnalysis.baselineDrift','triggerBriefing','presenceDevices','setupLtmScheduler','devices','info','events.lastEvent','ltmDriftCheckIntervalHours','expire','subscribeForeignStatesAsync','unshift','split','doors','97193dGcjbf','system.meta.uuid','analysis.health.notes','initPresenceSubscriptions','WETTER:\x20','notifyEmailRecipient','map','cover','modeResetJob','checkLicense','power','connection','setStateAsync','üîç\x20DEBUG\x20WALKER:\x20','Feedback\x20saved:\x20','LTM\x20Sched\x20Error:\x20','now','updateBaselineStatus','status','quality','enum.rooms.*','driftAnalysisTimer','energy','system.config','current','icons-mfd.','system.isPresent','command','calendarSelection','events.history','Error\x20in\x20onMessage\x20command\x20','Briefing\x20Sched\x20Error:\x20','Gast','message','Schlafzimmer',')\x20-\x20OBFUSCATION\x20SAFE\x20MODE','vacation','[TEST]\x20','loadSystemMode','sendMorningBriefing','Restlessness\x20Level','update','Cogni-Living','notifyPushoverInstance','\x20Tage)','runBaselineDriftAnalysis','WETTER:\x20Keine\x20Daten\x20gefunden','link','uuid-not-found','startsWith','weatherunderground.0','bewegung','number','Drift\x20Status','LTM.triggerDailyDigest','trim','value.health','Deaktiviert\x20(Pro-Feature)','LTM.processingStatus','0\x204\x20*\x20*\x20*','Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','getStateAsync','send','systemConfig','main','Activity\x20Summary','flur',')\x20|\x20','Logbook','isGracePeriodActive','includes','text.alarm','val','setupBriefingScheduler','START\x20for\x20','WETTER\x20ERROR:\x20','Drift\x20Details','B√ºro','Reset\x20Sched\x20Error:\x20','fenster','working','event','systemUUID','extendObjectAsync'];a0_0x19dd=function(){return _0x408da2;};return a0_0x19dd();}if(require[a0_0x39798a(0x2d5)]!==module)module[a0_0x39798a(0x2f5)]=_0x5c39ee=>new CogniLiving(_0x5c39ee);else new CogniLiving();