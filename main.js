const a0_0x2c905b=a0_0x50df;function a0_0x50df(_0x20649a,_0x14482f){const _0x4753df=a0_0x3d04();return a0_0x50df=function(_0x5a8ba9,_0x52407f){_0x5a8ba9=_0x5a8ba9-0x159;let _0x3d04dd=_0x4753df[_0x5a8ba9];return _0x3d04dd;},a0_0x50df(_0x20649a,_0x14482f);}(function(_0x3db624,_0x25f044){const _0x1a68ea=a0_0x50df,_0x47847e=_0x3db624();while(!![]){try{const _0x29c12e=-parseInt(_0x1a68ea(0x1de))/0x1+-parseInt(_0x1a68ea(0x1d0))/0x2+parseInt(_0x1a68ea(0x258))/0x3*(-parseInt(_0x1a68ea(0x20c))/0x4)+parseInt(_0x1a68ea(0x185))/0x5*(parseInt(_0x1a68ea(0x28a))/0x6)+parseInt(_0x1a68ea(0x1a0))/0x7*(parseInt(_0x1a68ea(0x1a8))/0x8)+-parseInt(_0x1a68ea(0x247))/0x9+parseInt(_0x1a68ea(0x1a1))/0xa;if(_0x29c12e===_0x25f044)break;else _0x47847e['push'](_0x47847e['shift']());}catch(_0x134760){_0x47847e['push'](_0x47847e['shift']());}}}(a0_0x3d04,0x275f3));const a0_0x52407f=(function(){let _0x5b90e3=!![];return function(_0x395916,_0x1d2b75){const _0x55a77b=_0x5b90e3?function(){const _0x49c514=a0_0x50df;if(_0x1d2b75){const _0x2e2c65=_0x1d2b75[_0x49c514(0x21f)](_0x395916,arguments);return _0x1d2b75=null,_0x2e2c65;}}:function(){};return _0x5b90e3=![],_0x55a77b;};}()),a0_0x5a8ba9=a0_0x52407f(this,function(){const _0x55d256=a0_0x50df;return a0_0x5a8ba9[_0x55d256(0x244)]()[_0x55d256(0x1fb)](_0x55d256(0x222))[_0x55d256(0x244)]()[_0x55d256(0x26e)](a0_0x5a8ba9)[_0x55d256(0x1fb)](_0x55d256(0x222));});a0_0x5a8ba9();'use strict';const utils=require(a0_0x2c905b(0x20d)),{GoogleGenerativeAI}=require(a0_0x2c905b(0x22e)),installer=require(a0_0x2c905b(0x224)),scanner=require(a0_0x2c905b(0x19f)),schedulers=require(a0_0x2c905b(0x1ab)),topology=require(a0_0x2c905b(0x1f7)),setup=require(a0_0x2c905b(0x28b)),recorder=require(a0_0x2c905b(0x1e2)),pythonBridge=require(a0_0x2c905b(0x208)),aiAgent=require(a0_0x2c905b(0x1fc)),deadMan=require(a0_0x2c905b(0x180)),automation=require(a0_0x2c905b(0x289)),GEMINI_MODEL=a0_0x2c905b(0x2ac),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x2c905b(0x27e)]{constructor(_0x38fde0){const _0x502dfb=a0_0x2c905b;super({..._0x38fde0,'name':_0x502dfb(0x182)}),this[_0x502dfb(0x248)]=[],this[_0x502dfb(0x29d)]=[],this['rawEventLog']=[],this['dailyDigests']=[],this[_0x502dfb(0x276)]={},this[_0x502dfb(0x23e)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x502dfb(0x23c)]=!![],this['exitTimer']=null,this[_0x502dfb(0x236)]=null,this[_0x502dfb(0x19e)]=![],this[_0x502dfb(0x295)]=null,this[_0x502dfb(0x26c)]=null,this[_0x502dfb(0x187)]=setup[_0x502dfb(0x226)]['NORMAL'],this[_0x502dfb(0x296)]=![],this['lastAlertState']=![],this[_0x502dfb(0x24e)]=null,this[_0x502dfb(0x256)]=null,this['modeResetJob']=null,this[_0x502dfb(0x1e4)]=null,this[_0x502dfb(0x1bb)]=null,this['trackerHeartbeat']=null,this[_0x502dfb(0x1c7)]=null,this[_0x502dfb(0x1c4)]=![],this[_0x502dfb(0x1ae)]=Date['now'](),this['memoryCache']=null,this[_0x502dfb(0x27a)]=Date[_0x502dfb(0x1cc)](),this[_0x502dfb(0x1e6)]=![],this[_0x502dfb(0x29f)]=[],this['on'](_0x502dfb(0x266),this[_0x502dfb(0x1a4)][_0x502dfb(0x240)](this)),this['on'](_0x502dfb(0x20b),this[_0x502dfb(0x196)][_0x502dfb(0x240)](this)),this['on'](_0x502dfb(0x20a),this[_0x502dfb(0x171)][_0x502dfb(0x240)](this)),this['on']('message',this['onMessage'][_0x502dfb(0x240)](this));}async[a0_0x2c905b(0x1a4)](){const _0x123add=a0_0x2c905b;this[_0x123add(0x268)][_0x123add(0x178)](_0x123add(0x188)+this['version']+_0x123add(0x1cf));if(!installer[_0x123add(0x217)](this,()=>this['startSystem']()))return;}async[a0_0x2c905b(0x28f)](){const _0x568b88=a0_0x2c905b;await setup[_0x568b88(0x186)](this);try{this[_0x568b88(0x296)]=await setup[_0x568b88(0x293)](this['config'][_0x568b88(0x271)]);}catch(_0x44bb9e){}if(!this[_0x568b88(0x193)][_0x568b88(0x25a)]||this[_0x568b88(0x193)][_0x568b88(0x25a)]<0.1)this['config']['inactivityThresholdHours']=0xc;await setup[_0x568b88(0x2a5)](this),await setup[_0x568b88(0x288)](this);try{const _0x3770c7=await this[_0x568b88(0x213)](_0x568b88(0x181)),_0x1e5669=await this[_0x568b88(0x213)](_0x568b88(0x251));_0x3770c7&&_0x3770c7[_0x568b88(0x228)]&&_0x1e5669&&_0x1e5669[_0x568b88(0x228)]&&(Date['now']()-_0x3770c7['ts']<0x4*0xe10*0x3e8&&(this['memoryCache']={'times':JSON['parse'](_0x3770c7[_0x568b88(0x228)]),'sources':JSON[_0x568b88(0x179)](_0x1e5669[_0x568b88(0x228)])},this[_0x568b88(0x268)][_0x568b88(0x178)]('üß†\x20Memory:\x20Cache\x20hydrated\x20with\x20'+Object['keys'](this[_0x568b88(0x1c0)]['times'])[_0x568b88(0x16d)]+_0x568b88(0x225))));}catch(_0x457d09){this[_0x568b88(0x268)][_0x568b88(0x190)]('Memory\x20Hydration\x20Failed:\x20'+_0x457d09[_0x568b88(0x1a3)]);}if(this[_0x568b88(0x193)][_0x568b88(0x17d)])try{this[_0x568b88(0x295)]=new GoogleGenerativeAI(this['config'][_0x568b88(0x17d)]),this[_0x568b88(0x26c)]=this[_0x568b88(0x295)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x568b88(0x165)}}),this[_0x568b88(0x268)]['info']('Gemini\x20AI\x20initialized.');}catch(_0x214871){this[_0x568b88(0x268)][_0x568b88(0x284)]('Gemini\x20Init\x20Error:\x20'+_0x214871['message']);}await setup[_0x568b88(0x275)](this),await this[_0x568b88(0x21b)](),await this[_0x568b88(0x239)]('analysis.energy.pinnForecast',{'type':_0x568b88(0x260),'common':{'name':_0x568b88(0x1cd),'type':_0x568b88(0x2a2),'role':'json','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.energy.ventilationAlerts',{'type':_0x568b88(0x260),'common':{'name':_0x568b88(0x2b2),'type':_0x568b88(0x2a2),'role':_0x568b88(0x1df),'read':!![],'write':![]},'native':{}}),await this[_0x568b88(0x239)](_0x568b88(0x181),{'type':_0x568b88(0x260),'common':{'name':'Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','type':'string','role':_0x568b88(0x1df),'read':!![],'write':![]},'native':{}}),await this[_0x568b88(0x239)]('analysis.energy.warmupTargets',{'type':_0x568b88(0x260),'common':{'name':'Warm-Up\x20Target\x20Temps\x20(JSON)','type':_0x568b88(0x2a2),'role':'json','read':!![],'write':!![],'def':_0x568b88(0x234)},'native':{}}),await this[_0x568b88(0x239)]('analysis.energy.rlPenalties',{'type':_0x568b88(0x260),'common':{'name':'Reinforcement\x20Learning\x20Penalties','type':_0x568b88(0x2a2),'role':'json','read':!![],'write':![],'def':'{}'},'native':{}}),await this[_0x568b88(0x239)](_0x568b88(0x1d4),{'type':_0x568b88(0x260),'common':{'name':_0x568b88(0x1a5),'type':_0x568b88(0x1f3),'role':_0x568b88(0x1b3),'unit':'%','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x568b88(0x1b0),{'type':_0x568b88(0x260),'common':{'name':_0x568b88(0x28e),'type':_0x568b88(0x2a2),'role':_0x568b88(0x1f0),'read':!![],'write':![]},'native':{}}),await this[_0x568b88(0x239)](_0x568b88(0x25f),{'type':_0x568b88(0x260),'common':{'name':_0x568b88(0x1e8),'type':_0x568b88(0x2a2),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x568b88(0x239)](_0x568b88(0x2a3),{'type':'state','common':{'name':_0x568b88(0x17b),'type':_0x568b88(0x2a2),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x568b88(0x239)](_0x568b88(0x209),{'type':_0x568b88(0x260),'common':{'name':_0x568b88(0x21d),'type':'string','role':_0x568b88(0x1f0),'read':!![],'write':![]},'native':{}});try{const _0x47a3e2=await this[_0x568b88(0x213)](_0x568b88(0x207));if(_0x47a3e2&&_0x47a3e2[_0x568b88(0x228)])this[_0x568b88(0x1aa)]=JSON[_0x568b88(0x179)](_0x47a3e2[_0x568b88(0x228)]);}catch(_0x566a33){this[_0x568b88(0x1aa)]=[];}try{const _0x1b5bdb=await this[_0x568b88(0x213)](_0x568b88(0x294));if(_0x1b5bdb&&_0x1b5bdb[_0x568b88(0x228)])this['dailyDigests']=JSON[_0x568b88(0x179)](_0x1b5bdb[_0x568b88(0x228)]);}catch(_0x231ea9){this[_0x568b88(0x16b)]=[];}const _0x36efd7=this[_0x568b88(0x16b)]['length']>=(this[_0x568b88(0x193)][_0x568b88(0x23a)]||0x7)?_0x568b88(0x19c)+this[_0x568b88(0x16b)][_0x568b88(0x16d)]+_0x568b88(0x1c8):_0x568b88(0x281)+this[_0x568b88(0x16b)]['length']+'/'+(this[_0x568b88(0x193)][_0x568b88(0x23a)]||0x7)+')';await this[_0x568b88(0x292)](_0x568b88(0x1b8),{'val':_0x36efd7,'ack':!![]}),this['subscribeStates'](_0x568b88(0x286)),this['subscribeStates'](_0x568b88(0x25d)),this['subscribeStates']('system.mode'),this[_0x568b88(0x1f9)]('analysis.triggerBriefing'),this[_0x568b88(0x1f9)](_0x568b88(0x163)),this['subscribeStates'](_0x568b88(0x1bd)),this[_0x568b88(0x1f9)](_0x568b88(0x1c2)),this[_0x568b88(0x1f9)](_0x568b88(0x1ac)),this[_0x568b88(0x1f9)]('analysis.training.triggerEnergy'),this['subscribeStates'](_0x568b88(0x274)),this[_0x568b88(0x1f9)](_0x568b88(0x192)),this[_0x568b88(0x1f9)](_0x568b88(0x232)),this[_0x568b88(0x1f9)](_0x568b88(0x251));this[_0x568b88(0x193)][_0x568b88(0x1d7)]&&this[_0x568b88(0x193)][_0x568b88(0x18c)]&&(this[_0x568b88(0x268)]['info'](_0x568b88(0x235)+this[_0x568b88(0x193)][_0x568b88(0x18c)]),this['subscribeForeignStates'](this[_0x568b88(0x193)][_0x568b88(0x18c)]));const _0x2446a9=this[_0x568b88(0x193)]['devices'];if(_0x2446a9)for(const _0x18ca2a of _0x2446a9){await this[_0x568b88(0x22c)](_0x18ca2a['id']);}const _0x43b0d4=this[_0x568b88(0x193)][_0x568b88(0x2a0)];if(_0x43b0d4)for(const _0x5288c4 of _0x43b0d4){await this['subscribeForeignStatesAsync'](_0x5288c4);}if(this[_0x568b88(0x193)][_0x568b88(0x1c3)]&&this['config'][_0x568b88(0x211)])await this['subscribeForeignStatesAsync'](this['config'][_0x568b88(0x211)]+'.communicate.request');setTimeout(()=>this[_0x568b88(0x174)](),0x1388);if(this[_0x568b88(0x24e)])clearInterval(this['analysisTimer']);const _0xab5b26=this[_0x568b88(0x193)]['analysisInterval']||0xf;_0xab5b26>0x0&&(this[_0x568b88(0x24e)]=setInterval(()=>{const _0x402204=_0x568b88;this['runAutopilot'](),automation[_0x402204(0x25b)](this),automation['monitorEnforcements'](this);},_0xab5b26*0x3c*0x3e8));setTimeout(()=>{const _0x3c0745=_0x568b88;automation['checkCalendarTriggers'](this),automation[_0x3c0745(0x27c)](this);},0x2710);this[_0x568b88(0x193)]['trackerEnabled']!==![]&&(this[_0x568b88(0x1f2)]=setInterval(()=>{const _0x3713b4=_0x568b88;if(this['isProVersion']){const _0x330368=Date[_0x3713b4(0x1cc)](),_0x1d7e0=this[_0x3713b4(0x1ae)]||_0x330368,_0x23e129=(_0x330368-_0x1d7e0)/0x3e8;_0x23e129>0x2&&(this['lastTrackerEventTime']=_0x330368,pythonBridge[_0x3713b4(0x1c1)](this,_0x3713b4(0x17a),{'room':null,'dt':_0x23e129}));}},0xbb8));if(this['healthTrendInterval'])clearInterval(this[_0x568b88(0x1c7)]);this[_0x568b88(0x1c7)]=setInterval(()=>{const _0x56c8fb=_0x568b88;this[_0x56c8fb(0x296)]&&(this[_0x56c8fb(0x268)][_0x56c8fb(0x178)](_0x56c8fb(0x204)),this[_0x56c8fb(0x270)]());},0x4*0x3c*0x3c*0x3e8),schedulers[_0x568b88(0x167)](this,()=>aiAgent[_0x568b88(0x230)](this,pythonBridge)),schedulers[_0x568b88(0x17e)](this),schedulers['setupDriftAnalysisScheduler'](this,()=>aiAgent[_0x568b88(0x2a8)](this)),schedulers[_0x568b88(0x1af)](this,()=>aiAgent[_0x568b88(0x22d)](this)),pythonBridge[_0x568b88(0x15b)](this,installer['PYTHON_EXE']),setTimeout(async()=>{const _0x30a02d=_0x568b88;await topology['updateTopology'](this);try{const _0x5ea0bb=await this[_0x30a02d(0x213)](_0x30a02d(0x252));if(_0x5ea0bb&&_0x5ea0bb[_0x30a02d(0x228)])pythonBridge[_0x30a02d(0x1c1)](this,_0x30a02d(0x290),JSON['parse'](_0x5ea0bb['val']));}catch(_0x3f294a){}this[_0x30a02d(0x270)](),this['triggerGaitAnalysis'](),this['triggerEnergyPrediction'](),this[_0x30a02d(0x259)]();},0x1388);}[a0_0x2c905b(0x171)](_0x29c307){const _0xd87db1=a0_0x2c905b;if(this[_0xd87db1(0x24e)])clearInterval(this[_0xd87db1(0x24e)]);if(this[_0xd87db1(0x1e4)])clearInterval(this[_0xd87db1(0x1e4)]);if(this[_0xd87db1(0x1f2)])clearInterval(this[_0xd87db1(0x1f2)]);if(this[_0xd87db1(0x1c7)])clearInterval(this[_0xd87db1(0x1c7)]);if(this[_0xd87db1(0x256)])this[_0xd87db1(0x256)]['cancel']();if(this[_0xd87db1(0x1fe)])this[_0xd87db1(0x1fe)][_0xd87db1(0x221)]();if(this[_0xd87db1(0x1bb)])this[_0xd87db1(0x1bb)][_0xd87db1(0x221)]();recorder[_0xd87db1(0x223)](this),pythonBridge[_0xd87db1(0x184)](this),_0x29c307();}async['onStateChange'](_0x42c471,_0xfb34){const _0x5adf33=a0_0x2c905b;if(!_0xfb34||this[_0x5adf33(0x1c4)])return;if(_0x42c471[_0x5adf33(0x231)](_0x5adf33(0x18a))&&_0x42c471[_0x5adf33(0x278)](_0x5adf33(0x28d))&&_0xfb34[_0x5adf33(0x228)])return;if(this[_0x5adf33(0x193)][_0x5adf33(0x1d7)]&&_0x42c471===this[_0x5adf33(0x193)]['infrasoundSensorId']){this[_0x5adf33(0x24f)](_0xfb34[_0x5adf33(0x228)]);return;}if(_0x42c471===this[_0x5adf33(0x279)]+_0x5adf33(0x2a7)){if(_0xfb34[_0x5adf33(0x228)]&&Object[_0x5adf33(0x1eb)](setup['SYSTEM_MODES'])[_0x5adf33(0x231)](_0xfb34[_0x5adf33(0x228)])){this[_0x5adf33(0x187)]=_0xfb34[_0x5adf33(0x228)];if(_0xfb34[_0x5adf33(0x228)]===setup[_0x5adf33(0x226)]['VACATION'])await recorder[_0x5adf33(0x194)](this,![]);else await recorder['setPresence'](this,!![]);if(this['isProVersion']){let _0x474c25=![],_0x55c5a2=0x0,_0x493162=_0x5adf33(0x15d);if(this[_0x5adf33(0x187)]===_0x5adf33(0x191))_0x474c25=!![],_0x55c5a2=0x168,_0x493162=_0x5adf33(0x15c);else this[_0x5adf33(0x187)]===_0x5adf33(0x1b1)&&(_0x474c25=!![],_0x55c5a2=0x5a0,_0x493162=_0x5adf33(0x1ec));pythonBridge['send'](this,_0x5adf33(0x1ba),{'active':_0x474c25,'duration':_0x55c5a2,'label':_0x493162}),await this[_0x5adf33(0x292)](_0x5adf33(0x1e0),{'val':JSON[_0x5adf33(0x1ef)]({'active':_0x474c25,'label':_0x493162,'timestamp':Date[_0x5adf33(0x1cc)]()}),'ack':!![]});}}if(!_0xfb34[_0x5adf33(0x26a)])this[_0x5adf33(0x21e)](_0x42c471,{'val':this['currentSystemMode'],'ack':!![]});return;}_0x42c471[_0x5adf33(0x278)](_0x5adf33(0x251))&&_0xfb34['ack']&&this[_0x5adf33(0x1ad)](_0xfb34['val']);if(!_0xfb34['ack']){if(_0x42c471[_0x5adf33(0x231)]('analysis.trigger')&&_0xfb34['val']){this['setState'](_0x42c471,{'val':![],'ack':!![]}),aiAgent[_0x5adf33(0x291)](this);return;}if(_0x42c471[_0x5adf33(0x231)](_0x5adf33(0x1b4))&&_0xfb34['val']){this['setState'](_0x42c471,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent[_0x5adf33(0x230)](this,pythonBridge);return;}if(_0x42c471[_0x5adf33(0x231)]('triggerBriefing')&&_0xfb34[_0x5adf33(0x228)]){this[_0x5adf33(0x21e)](_0x42c471,{'val':![],'ack':!![]}),aiAgent[_0x5adf33(0x22d)](this);return;}if(_0x42c471[_0x5adf33(0x231)](_0x5adf33(0x26d))&&_0xfb34[_0x5adf33(0x228)]){this[_0x5adf33(0x21e)](_0x42c471,{'val':![],'ack':!![]}),aiAgent[_0x5adf33(0x23b)](this);return;}if(_0x42c471[_0x5adf33(0x231)](_0x5adf33(0x1c2))&&_0xfb34['val']){this['setState'](_0x42c471,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x126815=await this['getStateAsync'](_0x5adf33(0x255));if(_0x126815&&_0x126815[_0x5adf33(0x228)]){const _0x1ba5ad=JSON[_0x5adf33(0x179)](_0x126815[_0x5adf33(0x228)]);this[_0x5adf33(0x292)](_0x5adf33(0x241),{'val':'Sec-Training\x20started...','ack':!![]}),pythonBridge['send'](this,'TRAIN_SECURITY',{'sequences':_0x1ba5ad});}}catch(_0x10d6ac){}return;}if(_0x42c471[_0x5adf33(0x231)](_0x5adf33(0x1ac))&&_0xfb34[_0x5adf33(0x228)]){this['setState'](_0x42c471,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x1efc8a=await this[_0x5adf33(0x213)](_0x5adf33(0x294));if(_0x1efc8a&&_0x1efc8a[_0x5adf33(0x228)])pythonBridge['send'](this,_0x5adf33(0x210),{'digests':JSON[_0x5adf33(0x179)](_0x1efc8a[_0x5adf33(0x228)])});}catch(_0x293169){}return;}if(_0x42c471['includes'](_0x5adf33(0x25c))&&_0xfb34['val']){this['setState'](_0x42c471,{'val':![],'ack':!![]});if(this[_0x5adf33(0x296)])try{const _0x43afb7=await this[_0x5adf33(0x213)](_0x5adf33(0x1b5));if(_0x43afb7&&_0x43afb7[_0x5adf33(0x228)])pythonBridge[_0x5adf33(0x1c1)](this,_0x5adf33(0x16a),{'points':JSON[_0x5adf33(0x179)](_0x43afb7[_0x5adf33(0x228)])});}catch(_0x2f43ca){}return;}if(_0x42c471[_0x5adf33(0x231)]('analysis.training.triggerComfort')&&_0xfb34['val']){this[_0x5adf33(0x21e)](_0x42c471,{'val':![],'ack':!![]});if(this[_0x5adf33(0x296)])try{const _0x5c41ad=await this[_0x5adf33(0x213)]('LTM.rawEventLog');if(_0x5c41ad&&_0x5c41ad['val'])pythonBridge[_0x5adf33(0x1c1)](this,_0x5adf33(0x280),{'events':JSON['parse'](_0x5c41ad['val'])});}catch(_0x290249){}return;}if(_0x42c471[_0x5adf33(0x231)]('analysis.training.triggerTopology')&&_0xfb34[_0x5adf33(0x228)]){this['setState'](_0x42c471,{'val':![],'ack':!![]}),topology[_0x5adf33(0x2b0)](this);if(this[_0x5adf33(0x296)])try{const _0x3d34c2=await this[_0x5adf33(0x213)]('LTM.trainingData.sequences');if(_0x3d34c2&&_0x3d34c2[_0x5adf33(0x228)]){const _0x41e7b5=JSON[_0x5adf33(0x179)](_0x3d34c2[_0x5adf33(0x228)]);this['log'][_0x5adf33(0x178)](_0x5adf33(0x262)+_0x41e7b5[_0x5adf33(0x16d)]+_0x5adf33(0x216)),pythonBridge['send'](this,'TRAIN_TOPOLOGY',{'sequences':_0x41e7b5});}else this[_0x5adf33(0x268)][_0x5adf33(0x190)](_0x5adf33(0x18b));}catch(_0x2d73f2){this[_0x5adf33(0x268)][_0x5adf33(0x284)](_0x5adf33(0x25e)+_0x2d73f2[_0x5adf33(0x1a3)]);}return;}}if(this['config'][_0x5adf33(0x2a0)]&&this['config'][_0x5adf33(0x2a0)][_0x5adf33(0x231)](_0x42c471)){await this[_0x5adf33(0x174)]();return;}const _0x2b463d=(this[_0x5adf33(0x193)][_0x5adf33(0x287)]||[])[_0x5adf33(0x24d)](_0x7aa575=>_0x7aa575['id']===_0x42c471);if(_0x2b463d){const _0x127139=await recorder[_0x5adf33(0x24b)](this,_0x42c471,_0xfb34,_0x2b463d);_0x127139&&_0x127139['type']===_0x5adf33(0x197)&&_0x127139['location']&&this['isProVersion']&&deadMan[_0x5adf33(0x299)](this,_0x127139[_0x5adf33(0x2ab)]),_0xfb34['val']&&(_0xfb34[_0x5adf33(0x228)]===!![]||_0xfb34[_0x5adf33(0x228)]===0x1||String(_0xfb34['val'])[_0x5adf33(0x1e1)]()===_0x5adf33(0x18f))&&(_0x2b463d[_0x5adf33(0x162)]&&(_0x2b463d[_0x5adf33(0x162)][_0x5adf33(0x231)](_0x5adf33(0x29e))||_0x2b463d[_0x5adf33(0x162)]['includes'](_0x5adf33(0x199))||_0x2b463d[_0x5adf33(0x162)][_0x5adf33(0x231)](_0x5adf33(0x1d6)))&&this[_0x5adf33(0x160)](_0x2b463d)),(_0x2b463d[_0x5adf33(0x162)]===_0x5adf33(0x1c5)||_0x2b463d[_0x5adf33(0x162)]===_0x5adf33(0x1fd))&&automation[_0x5adf33(0x1d9)](this);}}async['protectAiMemory'](_0x2fb34a){const _0x4f8b25=a0_0x2c905b;if(!this['memoryCache']||Date[_0x4f8b25(0x1cc)]()-this[_0x4f8b25(0x27a)]>0x493e0)return;if(!this['memoryCache'][_0x4f8b25(0x15e)]||!this[_0x4f8b25(0x1c0)][_0x4f8b25(0x285)])return;try{const _0x2511a7=JSON[_0x4f8b25(0x179)](_0x2fb34a),_0x43989c=this['memoryCache'][_0x4f8b25(0x15e)];let _0x585ff2=![];for(const _0x5b848c in _0x43989c){if(_0x43989c[_0x5b848c][_0x4f8b25(0x231)]('AI')&&_0x2511a7[_0x5b848c]&&!_0x2511a7[_0x5b848c][_0x4f8b25(0x231)]('AI')){_0x585ff2=!![];break;}}_0x585ff2&&(this[_0x4f8b25(0x268)][_0x4f8b25(0x178)](_0x4f8b25(0x297)),await this[_0x4f8b25(0x292)]('analysis.energy.warmupTimes',{'val':JSON[_0x4f8b25(0x1ef)](this[_0x4f8b25(0x1c0)][_0x4f8b25(0x285)]),'ack':!![]}),await this[_0x4f8b25(0x292)](_0x4f8b25(0x251),{'val':JSON[_0x4f8b25(0x1ef)](this[_0x4f8b25(0x1c0)][_0x4f8b25(0x15e)]),'ack':!![]}));}catch(_0x488d8a){}}async[a0_0x2c905b(0x1fa)](_0x2528a3){const _0x4888ca=a0_0x2c905b;if(typeof _0x2528a3==='object'&&_0x2528a3['message']){if(_0x2528a3[_0x4888ca(0x233)]===_0x4888ca(0x22a))try{const _0x5300a9=await automation['scanThermostats'](this);this['sendTo'](_0x2528a3[_0x4888ca(0x18d)],_0x2528a3['command'],{'success':!![],'results':_0x5300a9},_0x2528a3[_0x4888ca(0x1bf)]);}catch(_0x3b31a1){this[_0x4888ca(0x1d1)](_0x2528a3['from'],_0x2528a3['command'],{'success':![],'error':_0x3b31a1[_0x4888ca(0x1a3)]},_0x2528a3[_0x4888ca(0x1bf)]);}else{if(_0x2528a3[_0x4888ca(0x233)]==='simulateEnergyMPC')try{const {current_temps:_0x3bc3d1,t_out:_0x537c1a,targets:_0x4e0902,t_forecast:_0xb32642}=_0x2528a3[_0x4888ca(0x1a3)],_0x25b941=[];let _0x2be7c1={};try{const _0xaefc45=await this[_0x4888ca(0x213)](_0x4888ca(0x250));if(_0xaefc45&&_0xaefc45[_0x4888ca(0x228)]){const _0xfe0a8f=JSON['parse'](_0xaefc45[_0x4888ca(0x228)]);_0x2be7c1=_0xfe0a8f[_0x4888ca(0x202)]||_0xfe0a8f;}}catch(_0x2a675d){}const _0x3fedca=_0xb32642!==undefined&&_0xb32642!==null?(_0x537c1a+_0xb32642)/0x2:_0x537c1a;for(const [_0x137572,_0x148f22]of Object[_0x4888ca(0x23d)](_0x3bc3d1)){const _0x5c13b9=_0x4e0902[_0x137572]||0x15;if(_0x148f22<=_0x5c13b9)continue;let _0x121cca=_0x2be7c1[_0x137572]||-0.5;if(_0x121cca>=0x0)_0x121cca=-0.5;const _0x378dac=Math[_0x4888ca(0x169)](_0x121cca),_0x521ee8=_0x148f22-_0x5c13b9;let _0x36d25b=Math['floor'](_0x521ee8/_0x378dac*0x3c);const _0x3be53c=_0x148f22-_0x537c1a,_0xdaa553=_0x148f22-_0x3fedca;if(_0xdaa553!==0x0&&_0x3be53c!==0x0){const _0x5d6ecd=_0x3be53c/_0xdaa553;_0x36d25b=Math[_0x4888ca(0x19a)](_0x36d25b*_0x5d6ecd);}if(_0x36d25b>0xf){if(_0x36d25b>0xf0)_0x36d25b=0xf0;_0x25b941[_0x4888ca(0x28c)]({'room':_0x137572,'minutes_safe':_0x36d25b,'target':_0x5c13b9,'current':_0x148f22,'savings_msg':_0x4888ca(0x1dd)+_0x36d25b+_0x4888ca(0x166)});}}_0x25b941['sort']((_0x162c26,_0x393cc8)=>_0x393cc8[_0x4888ca(0x15a)]-_0x162c26[_0x4888ca(0x15a)]),this[_0x4888ca(0x1d1)](_0x2528a3['from'],_0x2528a3[_0x4888ca(0x233)],{'success':!![],'proposals':_0x25b941},_0x2528a3[_0x4888ca(0x1bf)]);}catch(_0x530c44){this['sendTo'](_0x2528a3['from'],_0x2528a3['command'],{'success':![],'error':_0x530c44[_0x4888ca(0x1a3)]},_0x2528a3[_0x4888ca(0x1bf)]);}else{if(_0x2528a3['command']===_0x4888ca(0x177))try{const _0x4aaf9d=_0x2528a3[_0x4888ca(0x1a3)][_0x4888ca(0x2a1)],_0x534c86=_0x4888ca(0x261),_0x5026b8=await this[_0x4888ca(0x213)](_0x534c86);let _0x521ebe={};if(_0x5026b8&&_0x5026b8[_0x4888ca(0x228)])try{_0x521ebe=JSON['parse'](_0x5026b8[_0x4888ca(0x228)]);}catch(_0x5c7211){}_0x4aaf9d&&_0x521ebe[_0x4aaf9d]?(delete _0x521ebe[_0x4aaf9d],await this['setStateAsync'](_0x534c86,{'val':JSON[_0x4888ca(0x1ef)](_0x521ebe),'ack':!![]}),this[_0x4888ca(0x268)]['info'](_0x4888ca(0x1dc)+_0x4aaf9d+_0x4888ca(0x198)),this[_0x4888ca(0x1d1)](_0x2528a3['from'],_0x2528a3['command'],{'success':!![]},_0x2528a3['callback'])):this[_0x4888ca(0x1d1)](_0x2528a3[_0x4888ca(0x18d)],_0x2528a3[_0x4888ca(0x233)],{'success':![],'error':_0x4888ca(0x16c)},_0x2528a3['callback']);}catch(_0x1a62a2){this[_0x4888ca(0x1d1)](_0x2528a3[_0x4888ca(0x18d)],_0x2528a3[_0x4888ca(0x233)],{'success':![],'error':_0x1a62a2['message']},_0x2528a3['callback']);}else{if(_0x2528a3[_0x4888ca(0x233)]===_0x4888ca(0x176))await this[_0x4888ca(0x292)](_0x4888ca(0x229),{'val':![],'ack':!![]}),await this['setStateAsync']('analysis.automation.description',{'val':'','ack':!![]}),await this[_0x4888ca(0x292)]('analysis.automation.targetId',{'val':'','ack':!![]}),this[_0x4888ca(0x1d1)](_0x2528a3[_0x4888ca(0x18d)],_0x2528a3[_0x4888ca(0x233)],{'success':!![]},_0x2528a3[_0x4888ca(0x1bf)]);else{if(_0x2528a3[_0x4888ca(0x233)]===_0x4888ca(0x1ee)){const {targetId:_0x4326fc,targetValue:_0x41aed1}=_0x2528a3[_0x4888ca(0x1a3)];await this[_0x4888ca(0x292)](_0x4888ca(0x229),{'val':!![],'ack':!![]}),await this['setStateAsync'](_0x4888ca(0x264),{'val':_0x4888ca(0x189),'ack':!![]}),await this[_0x4888ca(0x292)](_0x4888ca(0x29b),{'val':_0x4326fc,'ack':!![]}),await this[_0x4888ca(0x292)](_0x4888ca(0x253),{'val':String(_0x41aed1),'ack':!![]}),this[_0x4888ca(0x1d1)](_0x2528a3[_0x4888ca(0x18d)],_0x2528a3[_0x4888ca(0x233)],{'success':!![]},_0x2528a3[_0x4888ca(0x1bf)]);}else{if(_0x2528a3['command']===_0x4888ca(0x20f))try{const _0x5c52da=_0x2528a3[_0x4888ca(0x1a3)][_0x4888ca(0x17f)];if(!_0x5c52da)throw new Error(_0x4888ca(0x1d8));const _0x1c8944=new GoogleGenerativeAI(_0x5c52da),_0x5b8691=_0x1c8944[_0x4888ca(0x2b4)]({'model':GEMINI_MODEL}),_0x3e3281=await _0x5b8691[_0x4888ca(0x2aa)](_0x4888ca(0x1db)),_0x8de905=await _0x3e3281[_0x4888ca(0x19b)];if(_0x8de905[_0x4888ca(0x1f0)]())this['sendTo'](_0x2528a3['from'],_0x2528a3['command'],{'success':!![],'message':'Verbindung\x20erfolgreich!'},_0x2528a3['callback']);else throw new Error(_0x4888ca(0x22b));}catch(_0x180681){this[_0x4888ca(0x1d1)](_0x2528a3[_0x4888ca(0x18d)],_0x2528a3[_0x4888ca(0x233)],{'success':![],'message':_0x180681['message']},_0x2528a3['callback']);}else{if(_0x2528a3[_0x4888ca(0x233)]===_0x4888ca(0x269))try{const _0x56c62f=await scanner[_0x4888ca(0x1e5)](this,_0x2528a3[_0x4888ca(0x1a3)]||{});this[_0x4888ca(0x1d1)](_0x2528a3['from'],_0x2528a3[_0x4888ca(0x233)],{'success':!![],'devices':_0x56c62f},_0x2528a3['callback']);}catch(_0x3ffd4){this[_0x4888ca(0x1d1)](_0x2528a3['from'],_0x2528a3['command'],{'success':![],'error':_0x3ffd4[_0x4888ca(0x1a3)]},_0x2528a3[_0x4888ca(0x1bf)]);}else{if(_0x2528a3[_0x4888ca(0x233)]===_0x4888ca(0x1d5))try{const {matrix:_0x4e7d2b}=_0x2528a3[_0x4888ca(0x1a3)],_0x18bbc9=await this['getStateAsync'](_0x4888ca(0x252));if(_0x18bbc9&&_0x18bbc9[_0x4888ca(0x228)]){const _0x124cca=JSON[_0x4888ca(0x179)](_0x18bbc9[_0x4888ca(0x228)]);_0x124cca[_0x4888ca(0x1a6)]=_0x4e7d2b,_0x124cca[_0x4888ca(0x267)]=Date[_0x4888ca(0x1cc)](),await this[_0x4888ca(0x292)]('analysis.topology.structure',{'val':JSON['stringify'](_0x124cca),'ack':!![]}),pythonBridge[_0x4888ca(0x1c1)](this,_0x4888ca(0x290),_0x124cca);}this[_0x4888ca(0x1d1)](_0x2528a3[_0x4888ca(0x18d)],_0x2528a3[_0x4888ca(0x233)],{'success':!![]},_0x2528a3[_0x4888ca(0x1bf)]);}catch(_0x20f2e4){this[_0x4888ca(0x268)][_0x4888ca(0x284)](_0x20f2e4);}else{if(_0x2528a3[_0x4888ca(0x233)]===_0x4888ca(0x1be))this[_0x4888ca(0x1d1)](_0x2528a3['from'],_0x2528a3[_0x4888ca(0x233)],{'success':!![],'dailyDigests':this[_0x4888ca(0x16b)]||[],'analysisHistory':this[_0x4888ca(0x29d)]||[]},_0x2528a3[_0x4888ca(0x1bf)]);else{if(_0x2528a3['command']===_0x4888ca(0x1ed)){const _0x576018=this[_0x4888ca(0x16b)]['length'],_0x2eabd7=new Array(0x18)[_0x4888ca(0x1b6)](0x0),_0x43ec50=new Date()[_0x4888ca(0x16e)](0x0,0x0,0x0,0x0);this[_0x4888ca(0x248)]&&this[_0x4888ca(0x248)]['forEach'](_0xd24ca3=>{const _0x35ac78=_0x4888ca;if(_0xd24ca3[_0x35ac78(0x20e)]>=_0x43ec50){const _0x4e8dcc=new Date(_0xd24ca3[_0x35ac78(0x20e)])[_0x35ac78(0x21c)]();if(_0x4e8dcc>=0x0&&_0x4e8dcc<0x18)_0x2eabd7[_0x4e8dcc]++;}});let _0x22aa40=![],_0x2331b5='',_0x329d5b='',_0x243691='';try{const _0x1e6e2f=await this['getStateAsync'](_0x4888ca(0x229));if(_0x1e6e2f&&_0x1e6e2f['val']){_0x22aa40=!![];const _0x3f99b4=await this[_0x4888ca(0x213)](_0x4888ca(0x264));_0x2331b5=_0x3f99b4?_0x3f99b4[_0x4888ca(0x228)]:'';const _0x37aae3=await this[_0x4888ca(0x213)](_0x4888ca(0x29b));_0x329d5b=_0x37aae3?_0x37aae3[_0x4888ca(0x228)]:'';const _0x4d9e58=await this[_0x4888ca(0x213)]('analysis.automation.targetValue');_0x243691=_0x4d9e58?_0x4d9e58[_0x4888ca(0x228)]:'';}}catch(_0xce1127){}const _0x5e2005=await this[_0x4888ca(0x1f4)](),_0x59374c=(this['config'][_0x4888ca(0x287)]||[])['some'](_0x3a7e4b=>_0x3a7e4b['isSolar']),_0xdaff1e=_0x5e2005&&_0x59374c;let _0x1236db='';try{const _0x25dba5=await this[_0x4888ca(0x213)](_0x4888ca(0x172));if(_0x25dba5&&_0x25dba5['val'])_0x1236db=_0x25dba5[_0x4888ca(0x228)];}catch(_0x47c9bd){}this[_0x4888ca(0x1d1)](_0x2528a3[_0x4888ca(0x18d)],_0x2528a3[_0x4888ca(0x233)],{'success':!![],'eventHistory':this['eventHistory'][_0x4888ca(0x219)](0x0,0xf),'stats':{'digestCount':_0x576018,'isPresent':this['isPresent'],'hourlyActivity':_0x2eabd7,'solarActive':_0xdaff1e,'presenceWho':_0x1236db},'automation':{'detected':_0x22aa40,'description':_0x2331b5,'targetId':_0x329d5b,'targetValue':_0x243691}},_0x2528a3[_0x4888ca(0x1bf)]);}else{if(_0x2528a3['command']==='getEnums'){const _0x1ba394=await this['getForeignObjectsAsync'](_0x4888ca(0x273),_0x4888ca(0x243)),_0x427f2e=[];if(_0x1ba394)for(const _0x28bcac in _0x1ba394){const _0x1e2716=_0x1ba394[_0x28bcac],_0xb90d71=(_0x1e2716['common']&&typeof _0x1e2716[_0x4888ca(0x159)][_0x4888ca(0x1e9)]===_0x4888ca(0x23f)?_0x1e2716['common']['name']['de']:_0x1e2716[_0x4888ca(0x159)][_0x4888ca(0x1e9)])||_0x1e2716[_0x4888ca(0x159)][_0x4888ca(0x1e9)];_0x427f2e['push']({'id':_0x28bcac,'name':_0xb90d71});}const _0x4418d6=await this[_0x4888ca(0x227)](_0x4888ca(0x277),_0x4888ca(0x243)),_0x1d5025=[];if(_0x4418d6)for(const _0x11ef9f in _0x4418d6){const _0x3de97e=_0x4418d6[_0x11ef9f],_0xe77b45=(_0x3de97e[_0x4888ca(0x159)]&&typeof _0x3de97e[_0x4888ca(0x159)]['name']==='object'?_0x3de97e[_0x4888ca(0x159)]['name']['de']:_0x3de97e[_0x4888ca(0x159)][_0x4888ca(0x1e9)])||_0x11ef9f[_0x4888ca(0x200)]('.')[_0x4888ca(0x19d)]();_0x1d5025[_0x4888ca(0x28c)](_0xe77b45);}this[_0x4888ca(0x1d1)](_0x2528a3['from'],_0x2528a3[_0x4888ca(0x233)],{'success':!![],'enums':_0x427f2e,'rooms':_0x1d5025},_0x2528a3[_0x4888ca(0x1bf)]);}else{if(_0x2528a3['command']===_0x4888ca(0x1f5))try{let _0x2fa2b9=_0x4888ca(0x282),_0x5572d1=_0x4888ca(0x215);if(this[_0x4888ca(0x193)]['useWeather']){const _0x498e02=await recorder[_0x4888ca(0x263)](this);_0x2fa2b9=_0x498e02!==null?_0x498e02+'¬∞C':_0x4888ca(0x203);}if(this[_0x4888ca(0x193)]['calendarInstance']){const _0x28de65=await this[_0x4888ca(0x22f)](_0x4888ca(0x1ff)+this[_0x4888ca(0x193)][_0x4888ca(0x173)]);_0x5572d1=_0x28de65?_0x4888ca(0x206):_0x4888ca(0x1f8);}this['sendTo'](_0x2528a3[_0x4888ca(0x18d)],_0x2528a3[_0x4888ca(0x233)],{'success':!![],'weather':_0x2fa2b9,'calendar':_0x5572d1},_0x2528a3[_0x4888ca(0x1bf)]);}catch(_0x461c95){this[_0x4888ca(0x1d1)](_0x2528a3['from'],_0x2528a3[_0x4888ca(0x233)],{'success':![],'error':_0x461c95[_0x4888ca(0x1a3)]},_0x2528a3[_0x4888ca(0x1bf)]);}else{if(_0x2528a3['command']===_0x4888ca(0x238))try{const _0xae41fc=_0x2528a3[_0x4888ca(0x1a3)][_0x4888ca(0x26f)],_0x28328f=await this[_0x4888ca(0x2a9)](_0xae41fc+'.data.table');let _0x3714f4=[];if(_0x28328f&&_0x28328f[_0x4888ca(0x228)]){const _0x46a0fe=JSON[_0x4888ca(0x179)](_0x28328f[_0x4888ca(0x228)]),_0x29837b=new Set();Array[_0x4888ca(0x1ca)](_0x46a0fe)&&_0x46a0fe[_0x4888ca(0x1c9)](_0x198091=>{const _0x252c8a=_0x4888ca;if(_0x198091['_calName'])_0x29837b['add'](_0x198091[_0x252c8a(0x1b7)]);else{if(_0x198091[_0x252c8a(0x1cb)])_0x29837b[_0x252c8a(0x1e3)](_0x198091[_0x252c8a(0x1cb)]);}}),_0x3714f4=Array['from'](_0x29837b)[_0x4888ca(0x2a6)]();}if(_0x3714f4[_0x4888ca(0x16d)]===0x0)_0x3714f4=[_0x4888ca(0x1c6)];this[_0x4888ca(0x1d1)](_0x2528a3['from'],_0x2528a3[_0x4888ca(0x233)],{'success':!![],'names':_0x3714f4},_0x2528a3[_0x4888ca(0x1bf)]);}catch(_0x5c2377){this[_0x4888ca(0x1d1)](_0x2528a3[_0x4888ca(0x18d)],_0x2528a3[_0x4888ca(0x233)],{'success':![],'error':_0x5c2377[_0x4888ca(0x1a3)]},_0x2528a3[_0x4888ca(0x1bf)]);}else{if(_0x2528a3[_0x4888ca(0x233)]===_0x4888ca(0x175))try{await setup[_0x4888ca(0x16f)](this,_0x4888ca(0x1a2),![],![]),this[_0x4888ca(0x1d1)](_0x2528a3[_0x4888ca(0x18d)],_0x2528a3[_0x4888ca(0x233)],{'success':!![],'message':'Gesendet'},_0x2528a3['callback']);}catch(_0x2da685){this['log'][_0x4888ca(0x284)]('Notification\x20Test\x20Failed:\x20'+_0x2da685[_0x4888ca(0x1a3)]),this[_0x4888ca(0x1d1)](_0x2528a3['from'],_0x2528a3[_0x4888ca(0x233)],{'success':![],'message':'Fehler:\x20'+_0x2da685[_0x4888ca(0x1a3)]},_0x2528a3[_0x4888ca(0x1bf)]);}}}}}}}}}}}}}}}}async[a0_0x2c905b(0x21b)](){const _0x112685=a0_0x2c905b;try{const _0x2c6a25=await this[_0x112685(0x213)](setup[_0x112685(0x246)]);_0x2c6a25&&_0x2c6a25[_0x112685(0x228)]&&Object[_0x112685(0x1eb)](setup[_0x112685(0x226)])['includes'](_0x2c6a25[_0x112685(0x228)])?this['currentSystemMode']=_0x2c6a25[_0x112685(0x228)]:(this[_0x112685(0x187)]=setup[_0x112685(0x226)][_0x112685(0x1a7)],await this[_0x112685(0x292)](setup[_0x112685(0x246)],{'val':setup[_0x112685(0x226)]['NORMAL'],'ack':!![]}));}catch(_0x97fe7f){this[_0x112685(0x187)]=setup[_0x112685(0x226)]['NORMAL'];}}async[a0_0x2c905b(0x174)](){const _0x4b81e1=a0_0x2c905b;try{const _0x411cf5=this[_0x4b81e1(0x193)][_0x4b81e1(0x2a0)]||[];let _0x415256=![];const _0x2fd46d=[];for(const _0x24b015 of _0x411cf5){try{const _0x230b33=await this[_0x4b81e1(0x2a9)](_0x24b015);_0x230b33&&(_0x230b33[_0x4b81e1(0x228)]===!![]||_0x230b33[_0x4b81e1(0x228)]==='online'||_0x230b33[_0x4b81e1(0x228)]===0x1)&&(_0x415256=!![],_0x2fd46d[_0x4b81e1(0x28c)](_0x24b015));}catch(_0x4bd3f6){}}return await this[_0x4b81e1(0x292)](_0x4b81e1(0x172),{'val':_0x2fd46d[_0x4b81e1(0x245)](',\x20'),'ack':!![]}),_0x415256&&(this[_0x4b81e1(0x1d2)]&&(this[_0x4b81e1(0x268)][_0x4b81e1(0x178)](_0x4b81e1(0x1a9)),recorder['abortExitTimer'](this)),!this[_0x4b81e1(0x23c)]&&this[_0x4b81e1(0x187)]===setup[_0x4b81e1(0x226)][_0x4b81e1(0x1a7)]&&await recorder[_0x4b81e1(0x194)](this,!![])),_0x415256;}catch(_0x310f16){return![];}}async[a0_0x2c905b(0x2a4)](){const _0x1b27a9=a0_0x2c905b;this[_0x1b27a9(0x268)]['debug'](_0x1b27a9(0x220)),await aiAgent['runGeminiAnalysis'](this),this[_0x1b27a9(0x259)](),this['triggerGaitAnalysis'](),this[_0x1b27a9(0x2af)]();}async['checkSolarCondition'](){const _0x4435da=a0_0x2c905b,_0x291047=['weatherunderground.0',_0x4435da(0x205),_0x4435da(0x18e)],_0xa18b06=[_0x4435da(0x257),_0x4435da(0x29c),_0x4435da(0x161)];for(const _0x3447cd of _0x291047){for(const _0x26240a of _0xa18b06){try{const _0x5e604c=_0x3447cd+'.'+_0x26240a,_0x191e5e=await this[_0x4435da(0x2a9)](_0x5e604c);if(_0x191e5e&&_0x191e5e[_0x4435da(0x228)]){const _0x2a204f=String(_0x191e5e['val'])['toLowerCase']();if(_0x2a204f[_0x4435da(0x231)]('sonn')||_0x2a204f[_0x4435da(0x231)]('sunny')||_0x2a204f[_0x4435da(0x231)]('klar')||_0x2a204f[_0x4435da(0x231)](_0x4435da(0x249))||_0x2a204f[_0x4435da(0x231)](_0x4435da(0x237)))return!![];}}catch(_0x2963dc){}}}return![];}[a0_0x2c905b(0x24a)](){const _0x161657=a0_0x2c905b;if(!this['isProVersion'])return;try{this[_0x161657(0x1d3)](_0x161657(0x255),(_0x4033be,_0x42fac6)=>{const _0xe2b436=_0x161657;_0x42fac6&&_0x42fac6[_0xe2b436(0x228)]&&pythonBridge['send'](this,_0xe2b436(0x218),{'sequences':JSON[_0xe2b436(0x179)](_0x42fac6['val'])});});}catch(_0x273fbc){}}async[a0_0x2c905b(0x2af)](){const _0x1f4e35=a0_0x2c905b;if(!this[_0x1f4e35(0x296)])return;try{const _0x26b85b=await recorder[_0x1f4e35(0x263)](this);if(_0x26b85b===null)return;const _0xba4aaf={},_0x5b7cdf={},_0x52876b=this['config'][_0x1f4e35(0x287)]||[];for(const _0x109cb3 of _0x52876b){if(_0x109cb3[_0x1f4e35(0x162)]===_0x1f4e35(0x1c5)&&_0x109cb3[_0x1f4e35(0x2ab)]){const _0x54edca=this[_0x1f4e35(0x276)][_0x109cb3['id']];if(_0x54edca!==undefined)_0xba4aaf[_0x109cb3[_0x1f4e35(0x2ab)]]=_0x54edca;if(_0x109cb3[_0x1f4e35(0x1b9)])_0x5b7cdf[_0x109cb3[_0x1f4e35(0x2ab)]]=!![];}}const _0x4ce7d9=await this[_0x1f4e35(0x1f4)]();let _0x34affe={};try{const _0x3760d5=await this[_0x1f4e35(0x213)](_0x1f4e35(0x27d));if(_0x3760d5&&_0x3760d5[_0x1f4e35(0x228)])_0x34affe=JSON[_0x1f4e35(0x179)](_0x3760d5[_0x1f4e35(0x228)]);}catch(_0x2bb475){}Object[_0x1f4e35(0x1f6)](_0xba4aaf)[_0x1f4e35(0x16d)]>0x0&&(pythonBridge['send'](this,_0x1f4e35(0x1f1),{'current_temps':_0xba4aaf,'t_out':_0x26b85b,'is_sunny':_0x4ce7d9,'solar_flags':_0x5b7cdf,'warmup_targets':_0x34affe}),pythonBridge[_0x1f4e35(0x1c1)](this,'OPTIMIZE_ENERGY',{'current_temps':_0xba4aaf,'t_out':_0x26b85b,'targets':{}}));}catch(_0x16081d){}}['updateHealthVector'](){const _0x312acc=a0_0x2c905b;if(!this[_0x312acc(0x1aa)]||this[_0x312acc(0x1aa)]['length']===0x0)return;const _0x1af8f5=new Array(0x60)[_0x312acc(0x1b6)](0x0),_0x509105=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x312acc(0x1aa)][_0x312acc(0x1c9)](_0x4b079b=>{const _0x41082e=_0x312acc,_0x262868=new Date(_0x4b079b[_0x41082e(0x20e)]);if(_0x262868[_0x41082e(0x1e7)]()>=_0x509105){const _0x19ee1a=_0x262868[_0x41082e(0x21c)](),_0x5bcc26=_0x262868['getMinutes'](),_0x12d3b6=_0x19ee1a*0x4+Math[_0x41082e(0x19a)](_0x5bcc26/0xf);if(_0x12d3b6>=0x0&&_0x12d3b6<0x60)_0x1af8f5[_0x12d3b6]++;}}),this[_0x312acc(0x292)](_0x312acc(0x1b2),{'val':JSON['stringify'](_0x1af8f5),'ack':!![]});}['runPythonHealthCheck'](){const _0x474840=a0_0x2c905b;if(!this[_0x474840(0x16b)]||this[_0x474840(0x16b)]['length']<0x2)return;const _0x38bb4b=this[_0x474840(0x16b)][_0x474840(0x283)](_0x1b6659=>{const _0x48f9aa=_0x474840,_0x5767c7=(_0x1b6659['activityLevel']||'')[_0x48f9aa(0x1e1)]();return ACTIVITY_LEVEL_MAP[_0x5767c7]||0x32;});pythonBridge[_0x474840(0x1c1)](this,'ANALYZE_TREND',{'values':_0x38bb4b,'tag':_0x474840(0x2ad)});}async['handleInfrasound'](_0x166bec){const _0x18c644=a0_0x2c905b;if(_0x166bec==null||typeof _0x166bec!=='number')return;const _0x34b820=Date['now']();this['pressureBuffer']['push']({'ts':_0x34b820,'val':_0x166bec}),this['pressureBuffer']=this['pressureBuffer']['filter'](_0x386c6b=>_0x34b820-_0x386c6b['ts']<0x1388);if(this[_0x18c644(0x1e6)])return;if(this['config'][_0x18c644(0x272)]){const _0x34934f=await this[_0x18c644(0x2a9)](this[_0x18c644(0x193)][_0x18c644(0x272)]);if(_0x34934f&&!_0x34934f['val'])return;}const _0x269d65=this['config'][_0x18c644(0x27b)]||0.04;if(Math['abs'](_0x166bec)>=_0x269d65){this[_0x18c644(0x268)][_0x18c644(0x190)](_0x18c644(0x26b)+_0x166bec+_0x18c644(0x21a)+_0x269d65+')'),await this['setStateAsync'](_0x18c644(0x1ea),{'val':!![],'ack':!![]});const _0x2411d5=this[_0x18c644(0x23c)];_0x2411d5?(this['log'][_0x18c644(0x178)]('[Infrasound]\x20üü°\x20Debug-Mode:\x20Alarm\x20detected\x20but\x20suppressed\x20because\x20presence=true.'),this[_0x18c644(0x2b3)](_0x166bec,_0x18c644(0x298))):(this[_0x18c644(0x2b3)](_0x166bec,_0x18c644(0x1bc)),this[_0x18c644(0x16f)]('üö®\x20DRUCKWELLEN-ALARM!\x20St√§rke:\x20'+_0x166bec+_0x18c644(0x27f))),this[_0x18c644(0x1e6)]=!![],setTimeout(()=>{this['infrasoundLocked']=![];},0x2710);}}async[a0_0x2c905b(0x2b3)](_0x3ecf11,_0x243822=a0_0x2c905b(0x1bc)){const _0x286f01=a0_0x2c905b,_0xcbbf53=Date[_0x286f01(0x1cc)](),_0x3f0668=this[_0x286f01(0x193)]['devices']||[];setTimeout(async()=>{const _0x76831e=_0x286f01;let _0x3f2d2a=null,_0x18dcae='Keine\x20Sensor-Aktivit√§t';const _0x4c2bbe=[],_0x5eca2e=_0x3f0668['filter'](_0x9b4dcc=>_0x9b4dcc[_0x76831e(0x162)]&&(_0x9b4dcc['type'][_0x76831e(0x231)](_0x76831e(0x29e))||_0x9b4dcc['type']['includes'](_0x76831e(0x199))||_0x9b4dcc[_0x76831e(0x162)]['includes']('magnet')||_0x9b4dcc[_0x76831e(0x162)][_0x76831e(0x231)](_0x76831e(0x24c)))||_0x9b4dcc[_0x76831e(0x242)]&&(_0x9b4dcc[_0x76831e(0x242)][_0x76831e(0x231)](_0x76831e(0x2b1))||_0x9b4dcc[_0x76831e(0x242)][_0x76831e(0x231)](_0x76831e(0x212))));for(const _0x566974 of _0x5eca2e){try{const _0x4685fc=await this[_0x76831e(0x2a9)](_0x566974['id']);if(_0x4685fc){if(_0x4685fc['ts']>=_0xcbbf53-0x7d0){_0x3f2d2a=_0x566974['name']||_0x566974['id'],_0x18dcae='Erkl√§rt\x20durch:\x20'+_0x3f2d2a;break;}}}catch(_0x5bb3dd){}}const _0x2378d7={'timestamp':_0xcbbf53,'pressure':_0x3ecf11,'isMatch':!!_0x3f2d2a,'explanation':_0x18dcae,'type':_0x243822};await this[_0x76831e(0x168)](_0x2378d7),this[_0x76831e(0x268)][_0x76831e(0x178)](_0x76831e(0x2ae)+(!!_0x3f2d2a?_0x76831e(0x265):_0x76831e(0x195)));},0x1388);}async[a0_0x2c905b(0x160)](_0x406af3){const _0x380f53=a0_0x2c905b,_0x194ed2=Date['now'](),_0x119d26=_0x406af3['name']||_0x406af3['id'][_0x380f53(0x200)]('.')[_0x380f53(0x19d)]();let _0x191e04=0x0;setTimeout(async()=>{const _0x249a3b=_0x380f53;this[_0x249a3b(0x29f)][_0x249a3b(0x1c9)](_0xc63bc0=>{const _0x37e418=_0x249a3b;_0xc63bc0['ts']>=_0x194ed2-0xfa0&&_0xc63bc0['ts']<=_0x194ed2+0x3e8&&(Math[_0x37e418(0x169)](_0xc63bc0[_0x37e418(0x228)])>Math[_0x37e418(0x169)](_0x191e04)&&(_0x191e04=_0xc63bc0['val']));});const _0x3052b8=this[_0x249a3b(0x193)][_0x249a3b(0x27b)]||0.04,_0x388d0d=Math[_0x249a3b(0x169)](_0x191e04)>=_0x3052b8,_0x2d5439={'timestamp':_0x194ed2,'pressure':_0x191e04,'isMatch':_0x388d0d,'explanation':'Fenster\x20ge√∂ffnet:\x20'+_0x119d26,'type':'CALIB'};await this[_0x249a3b(0x168)](_0x2d5439),this[_0x249a3b(0x268)][_0x249a3b(0x1ce)](_0x249a3b(0x15f)+_0x119d26+'\x20opened.\x20Peak\x20Pressure:\x20'+_0x191e04[_0x249a3b(0x17c)](0x4)+_0x249a3b(0x170)+_0x3052b8+')');},0x1f4);}async[a0_0x2c905b(0x168)](_0xde27db){const _0x14a833=a0_0x2c905b;try{const _0xe0b954=await this['getStateAsync'](_0x14a833(0x2a3));let _0xdc27cd=[];if(_0xe0b954&&_0xe0b954['val'])_0xdc27cd=JSON[_0x14a833(0x179)](_0xe0b954[_0x14a833(0x228)]);_0xdc27cd[_0x14a833(0x183)](_0xde27db);if(_0xdc27cd['length']>0x14)_0xdc27cd=_0xdc27cd[_0x14a833(0x219)](0x0,0x14);await this[_0x14a833(0x292)]('analysis.security.infrasoundLog',{'val':JSON[_0x14a833(0x1ef)](_0xdc27cd),'ack':!![]});}catch(_0x4640d5){this['log'][_0x14a833(0x284)](_0x14a833(0x201)+_0x4640d5[_0x14a833(0x1a3)]);}}['sendNotification'](_0x1a1cd7){const _0x15c3dc=a0_0x2c905b;this['config'][_0x15c3dc(0x1da)]&&this['config']['notifyPushoverInstance']&&this[_0x15c3dc(0x1d1)](this['config'][_0x15c3dc(0x214)],_0x15c3dc(0x1c1),{'message':_0x1a1cd7,'title':_0x15c3dc(0x254),'priority':0x1}),this['config'][_0x15c3dc(0x1c3)]&&this['config'][_0x15c3dc(0x211)]&&this[_0x15c3dc(0x1d1)](this['config'][_0x15c3dc(0x211)],_0x15c3dc(0x1c1),{'text':_0x1a1cd7});}}if(require[a0_0x2c905b(0x164)]!==module)module[a0_0x2c905b(0x29a)]=_0x589ab0=>new CogniLiving(_0x589ab0);else new CogniLiving();function a0_0x3d04(){const _0x211fa8=['abortExitTimer','./lib/installer','\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).','SYSTEM_MODES','getForeignObjectsAsync','val','analysis.automation.patternDetected','checkThermostats','Keine\x20Antwort\x20von\x20Gemini','subscribeForeignStatesAsync','sendMorningBriefing','@google/generative-ai','getForeignObjectAsync','createDailyDigest','includes','analysis.energy.mpcActive','command','{\x22default\x22:\x2021}','[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20','exitGraceTimer','heiter','getCalendarNames','setObjectNotExistsAsync','minDaysForBaseline','executeAutomationAction','isPresent','entries','systemConfig','object','bind','analysis.training.status','role','enum','toString','join','SYSTEM_DP_MODE','1466586TQpoZW','eventHistory','clear','triggerGaitAnalysis','processSensorEvent','reed','find','analysisTimer','handleInfrasound','analysis.energy.insulationScore','analysis.energy.warmupSources','analysis.topology.structure','analysis.automation.targetValue','Nuukanni\x20Security','LTM.trainingData.sequences','ltmJob','forecast.current.weather','3CWEAQx','updateHealthVector','inactivityThresholdHours','checkCalendarTriggers','analysis.training.triggerEnergy','LTM.triggerDailyDigest','Graph-Brain\x20Train\x20Error:\x20','analysis.energy.activeEnforcements','state','analysis.energy.rlPenalties','üß†\x20Graph-Brain:\x20Training\x20Behaviour\x20Matrix\x20based\x20on\x20','getOutsideTemperatureNumeric','analysis.automation.description','MATCH\x20(False\x20Positive)','ready','updated','log','scanDevices','ack','[Infrasound]\x20üö®\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20','geminiModel','automation.triggerAction','constructor','instance','runPythonHealthCheck','licenseKey','infrasoundArmingId','enum.functions.*','analysis.training.triggerComfort','createAllObjects','sensorLastValues','enum.rooms.*','endsWith','namespace','bootTime','infrasoundThreshold','monitorEnforcements','analysis.energy.warmupTargets','Adapter','\x20hPa.\x20Einbruch\x20wahrscheinlich.','TRAIN_COMFORT','Lernphase\x20(','Kein\x20Wetter-Adapter','map','error','times','analysis.trigger','devices','initSystemConfig','./lib/automation','156kGXUvg','./lib/setup','push','communicate.request','Sensors\x20used\x20for\x20Gait\x20Analysis','startSystem','SET_TOPOLOGY','runGeminiAnalysis','setStateAsync','checkLicense','LTM.dailyDigests','genAI','isProVersion','üß†\x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).','INTERNAL','updateLocation','exports','analysis.automation.targetId','Current.WeatherText','analysisHistory','window','pressureBuffer','presenceDevices','key','string','analysis.security.infrasoundLog','runAutopilot','initHistory','sort','.system.mode','runBaselineDriftAnalysis','getForeignStateAsync','generateContent','location','models/gemini-flash-latest','Activity-Level','[Forensics]\x20Infrasound\x20Event\x20correlated:\x20','triggerEnergyPrediction','updateTopology','sensor.window','Active\x20Ventilation\x20Alerts','triggerInfrasoundCorrelation','getGenerativeModel','common','minutes_safe','startService','Party\x20Mode','manual','sources','[Calibration]\x20Window\x20','analyzeWindowOpening','NextHours.Location_1.Day_1.current.symbol_desc','type','analysis.automation.triggerAction','main','application/json','\x20min\x20ausbleiben.','setupLtmScheduler','appendToLog','abs','TRAIN_ENERGY','dailyDigests','Key\x20not\x20found\x20or\x20not\x20provided','length','setHours','sendNotification','\x20hPa\x20(Threshold:\x20','onUnload','system.presenceWho','calendarInstance','checkWifiPresence','testNotification','dismissAutomation','resetRLPenalty','info','parse','TRACK_EVENT','Forensic\x20Infrasound\x20Log','toFixed','geminiApiKey','setupModeResetScheduler','apiKey','./lib/dead_man','analysis.energy.warmupTimes','cogni-living','unshift','stopService','51980eWgnqR','initZombies','currentSystemMode','cogni-living\x20adapter\x20starting\x20(v','Simulation\x20durch\x20Admin\x20(Test)','telegram','‚ö†Ô∏è\x20Graph-Brain:\x20No\x20training\x20sequences\x20found\x20in\x20LTM.','infrasoundSensorId','from','daswetter.0','open','warn','party','analysis.training.triggerTopology','config','setPresence','ANOMALY\x20(Real\x20Threat?)','onStateChange','motion','\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gel√∂scht.','door','floor','response','Aktiv\x20(','pop','isGracePeriodActive','./lib/scanner','70nBcPLb','4599960aelqnY','üîî\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','message','onReady','General\x20Activity\x20Trend\x20(%)','matrix','NORMAL','42376KUPjot','WiFi\x20Presence\x20detected.','rawEventLog','./lib/scheduler','analysis.training.triggerHealth','protectAiMemory','lastTrackerEventTime','setupBriefingScheduler','analysis.health.gaitSensors','guest','analysis.health.todayVector','value','triggerDailyDigest','LTM.trainingData.thermodynamics','fill','_calName','LTM.baselineStatus','isSolar','SET_LEARNING_MODE','briefingJob','ALARM','analysis.automation.autoApply','getLtmData','callback','memoryCache','send','analysis.training.triggerSecurity','notifyTelegramEnabled','dependencyInstallInProgress','temperature','Standard','healthTrendInterval','\x20Tage)','forEach','isArray','calendarName','now','PINN\x20AI\x20Forecast','debug',')\x20-\x20Phase\x20D\x20(Forensic\x20Calibration)','553130EwOvnX','sendTo','exitTimer','getState','analysis.health.activityTrend','updateTopologyMatrix','magnet','infrasoundEnabled','Kein\x20API\x20Key\x20√ºbergeben','cleanupGhostInterventions','notifyPushoverEnabled','Test','üéì\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20f√ºr\x20\x27','Heizung\x20kann\x20','16817QCfbsp','json','analysis.security.learningStatus','toLowerCase','./lib/recorder','add','driftAnalysisTimer','scanForDevices','infrasoundLocked','getTime','Active\x20Calendar\x20Enforcements\x20(Locks)','name','security.alarm_triggered','values','Guest\x20Mode','getOverviewData','simulateButler','stringify','text','PREDICT_ENERGY','trackerHeartbeat','number','checkSolarCondition','testContext','keys','./lib/topology','Instanz\x20nicht\x20gefunden','subscribeStates','onMessage','search','./lib/ai_agent','thermostat','modeResetJob','system.adapter.','split','[Forensics]\x20Save\x20failed:\x20','scores','Daten\x20nicht\x20verf√ºgbar','‚ù§Ô∏è\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...','accuweather.0','Verbunden','LTM.rawEventLog','./lib/python_bridge','analysis.health.gaitDebug','unload','stateChange','662636mYDLWz','@iobroker/adapter-core','timestamp','testApiKey','TRAIN_HEALTH','notifyTelegramInstance','sensor.door','getStateAsync','notifyPushoverInstance','Kein\x20Kalender-Adapter','\x20sequences...','checkAndInstall','ANALYZE_GAIT','slice','\x20hPa\x20(Limit:\x20','loadSystemMode','getHours','Gait\x20Speed\x20Calculation\x20Proof','setState','apply','ü§ñ\x20Autopilot:\x20Running\x20periodic\x20analysis...','cancel','(((.+)+)+)+$'];a0_0x3d04=function(){return _0x211fa8;};return a0_0x3d04();}