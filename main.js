function a0_0x5c0e(){const _0x2e36c9=['âœ…\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.','stderr','system.meta.uuid','0\x203\x20*\x20*\x20*','Logbook','notifyEmailRecipient','retry','getForeignObjectsAsync','subscribeStates','Last\x20Result','system.mode','analysis.isEmergency','switch','toFixed','filter','lampe','getHours','Error\x20launching\x20Python\x20service:\x20','join','endsWith','Cogni-Living','uuid','VACATION','targetposition','lock','getStateAsync','link_quality','bind','longitude','events.history','working','getLtmData','Morning\x20Briefing\x20sent.','now','\x20presence\x20devices...','direction','parse','08:00','indicator.alarm.fire','getCalendarNames\x20Error:\x20','Description','online','Deviation','(((.+)+)+)+$','WETTER:\x20Keine\x20Daten\x20gefunden','genAI','simple-api.','constructor','Drift\x20Sched\x20Error:\x20','text','analysis.automation.patternDetected','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','Starting\x20Autopilot\x20(','flot.','door','data','currentSystemMode','User\x20dismissed\x20automation\x20proposal.','analysis.automation','close','Sleep\x20Score\x20(0-100)','notifyEmailInstance','analysisHistory','Success:\x20Compressed\x20','namespace','onStateChange','ðŸ“ž\x20User\x20requested\x20CALL\x20via\x20Telegram!','analysis.automation.autoApply','KALENDER\x20ERROR:\x20','search','ltmLtbWindowDays','stick_unreach','name','Exit\x20Sensor\x20triggered\x20(','extendObjectAsync','notifyTelegramInstance','.data.table',').\x20Starting\x20Timer.','common','tÃ¼r','Lernphase\x20(','.NextHours.Location_1.Day_1.current.symbol_desc','bewegung','system.config','blind','ltmJob','valve','temperature','AI\x20Emergency\x20Status','shutter','.\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20INPUT\x20DATEN\x20(Letzte\x20Events):\x0a\x20\x20\x20\x20','sound','baselineDrift','replace','object','stringify','sendToAsync','material.','setForeignStateAsync','fault','push','string','N/A','telegram','doors','Feedback\x20saved:\x20','activityLevel','LTM.driftAnalysis.driftDetails','python_service','Deaktiviert\x20(Pro-Feature)','command','Pattern\x20Detected','update','response','presence','toISOString','guest','Fokus\x20auf\x20Komfort.','history.','from','notifyTelegramRecipient','sleepScore','pythonProcess','analysisInterval','analysis.feedbackHistory','livingContext','communicate.request','json','ltmDriftCheckIntervalHours','selectedFunctionIds','config','isEmergency','kill','trim','HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20','analysis.trigger','apply','latitude','analysis.isAlert','LTM.driftAnalysis','System\x20Status\x20&\x20Control','3045030GRurxU','.\x0a\x20\x20\x20\x20WETTER:\x20','notifyEmailEnabled','alertReason','child_process','@google/generative-ai','generic','weatherunderground.0','ðŸ\x20Starting\x20Python\x20Sidecar:\x20','...','admin.','driftAnalysisTimer','analysis.alertReason','getFullYear','exitGraceTimer','cogni-living','analysis.activitySummary','instance','normal','Gemini\x20Init\x20Error:\x20','dailyDigests','notifyTelegramEnabled','stateChange','cover','toString','aiPersona','.communicate.request','Fokus\x20auf\x20Familienroutinen.','928935qhlIqv','python3','forEach','calendarSelection','geminiModel','getObjectAsync','Comfort\x20Summary','rawEventLog','scriptProblem','analysis.automation.description','\x20min).','humidity','expire','events.history_debug_00','analysis.health.sleepScore','ack','motion','scriptEnabled','fenster','getForeignObjectAsync','lastAlertState','autoApply','.\x20OUTPUT:\x20Nur\x20Text.','timestamp','text.alarm','analysis.triggerBriefing','Reset\x20Sched\x20Error:\x20','N/A\x20(Learning)','Restlessness\x20Level','onReady','Error\x20reading\x20calendar\x20table:\x20','startsWith','error','channel','role','Missing\x20data','custom','split','LTM.processingStatus','Drift\x20Status','Target\x20ID','\x20|\x20','@iobroker/adapter-core','service.py','COGNI_REQUEST_CALL','splice','\x0aSTB:\x20','analysis.comfortSuggestion','analysis.automation.targetValue','debug','submitFeedback','slice','.\x20KONTEXT:\x20','accuweather','10970880wSalCc','Event\x20received:\x20','Automation\x20Proposals','generateContent','isGracePeriodActive','getDate','\x20(Value:\x20','7810704TzpfrC','briefingTime','location','delObjectAsync','Normal','[PYTHON]\x20Failed\x20to\x20start\x20(is\x20python3\x20installed?):\x20','getCalendarNames','NORMAL','modeResetJob','system.presenceWho','Who\x20is\x20present?','44jybMuM','LTM\x20Sched\x20Error:\x20','system.isPresent','Motion\x20detected\x20inside.\x20Aborting\x20Exit\x20Timer.','.\x20DATEN:\x20Schlaf\x20','.Summary.Current','0\x204\x20*\x20*\x20*','members','exports','stdout','3428RCDxbJ','lastCheck','vacation','callback','ltmStbWindowDays','firmware','simulateButler','log','isPresent','Gemini\x20Analysis\x20Error:\x20','value','driftDetails','LTM.rawEventLog','enum.functions.*','send','off','catch','indicator','warn','inactivityMonitoringEnabled','BUTLER\x20Execution\x20Error:\x20','health','dutycycle','triggerDailyDigest','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','logDuplicates','.\x0a\x20\x20\x20\x20SYSTEM_MODE:\x20','klima','Sending\x20notification:\x20\x22','ROLLE:\x20FÃ¼rsorglicher\x20Assistent.\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20','Briefing\x20Sched\x20Error:\x20','setState','automation.triggerAction','[PYTHON]\x20Service\x20exited\x20with\x20code\x20','AI\x20Alert\x20Status','native','ðŸ¤–\x20BUTLER\x20AUTO-APPLY:\x20Executing\x20','power','Trigger\x20Analysis','7UNBDIZ','_calName','isProVersion','lastIndexOf','Duplicate\x20ignored\x20for\x20','setStateAsync','cogni-living\x20adapter\x20starting\x20(v','\x20=\x20','analysis.comfortSummary','lowbat','Analysiere\x20ausgewogen.','setpoint','dimmer','rollladen','[TEST]\x20','path','3aWAZYQ','LTM.baselineStatus','city','boolean','analysis.automation.triggerAction','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','light','analysis.health.restlessness','message','toLowerCase','devices','daswetter.0','siren','node-schedule','analysis.automation.targetId','setObjectNotExistsAsync','description','scanDevices','GUEST','exitTimer','cancel','LTM','automationProposal','targetId','Drift\x20Details','useCalendar','lights','maintenance','vis.','type','\x20hours.\x20Potential\x20incapacitation.','TEST-PRO-KEY','occupancy','PARTY','notifyPushoverRecipient','[PYTHON\x20ERR]\x20','systemUUID','find','button','unknown','85368cGHAkD','Could\x20not\x20kill\x20Python\x20process:\x20','fill','geminiApiKey','Last\x20Check','weather','write','prÃ¤senz','LTM.driftAnalysis.baselineDrift','eventHistory','Trigger\x20Digest','enum','number','includes','substring','getEnums','_score','Kein\x20API\x20Key!','sensorLastValues','none','/100,\x20AktivitÃ¤t\x20seit\x2004:00:\x20','\x20Tage)','\x20for\x20interactive\x20buttons...','some','Skipped\x20(No\x20AI\x20or\x20Data)','analysis.history_debug_00','Activity\x20Summary','5556488QqgEgj','status','ðŸš¨\x20EMERGENCY','summary','position','sort','\x20*\x20*\x20*','sendTo','energy','details','heizung','getTime','length','info.','Gemini\x20AI\x20initialized.','getOverviewData','detected','Party','\x20sensors...','actual_temperature','Scheduling\x20Morning\x20Briefing\x20for\x20','analysisTimer','values','testApiKey','getForeignStateAsync','systemConfig','javascript.','subscribeForeignStatesAsync','ðŸ“ž\x20RÃ¼ckruf\x20anfordern','onUnload','onMessage','Subscribing\x20to\x20','Target\x20Value','date','triggerBriefing','state','val','event','licenseKey','level','Daily\x20Digests','Trigger\x20Action\x20Now','Entry\x20detected\x20via\x20','Wetter:\x20Deaktiviert','.\x20ZUSATZ:\x20','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','inactivityThresholdHours','rssi','info','events.lastEvent','PRIORITÃ„T:\x20Sicherheit.','map','temp','Alert\x20Reason','Adapter','briefingJob','weatherInstance','Gast','scheduleJob','Alarm','Last\x20raw\x20event','unreach','time','KALENDER:\x20Keine\x20Daten','âš ï¸\x20ALARM:\x20','Error\x20in\x20onMessage\x20command\x20','useWeather','analysis.deviationFromBaseline','uuid-not-found','presenceDevices','isArray',')\x20-\x20FUNCTIONS\x20FIRST\x20ARCHITECTURE','schalter','version','analysis.analysisHistory','.forecast.current.state','minDaysForBaseline'];a0_0x5c0e=function(){return _0x2e36c9;};return a0_0x5c0e();}const a0_0x492e6a=a0_0x38f4;(function(_0x7933e5,_0x4ebbb7){const _0x3f6bd8=a0_0x38f4,_0x130fd9=_0x7933e5();while(!![]){try{const _0x87220d=parseInt(_0x3f6bd8(0x22f))/0x1*(-parseInt(_0x3f6bd8(0x239))/0x2)+-parseInt(_0x3f6bd8(0xae))/0x3*(parseInt(_0x3f6bd8(0xd6))/0x4)+-parseInt(_0x3f6bd8(0x1e7))/0x5+-parseInt(_0x3f6bd8(0x1cb))/0x6*(parseInt(_0x3f6bd8(0x9e))/0x7)+-parseInt(_0x3f6bd8(0xf1))/0x8+parseInt(_0x3f6bd8(0x224))/0x9+parseInt(_0x3f6bd8(0x21d))/0xa;if(_0x87220d===_0x4ebbb7)break;else _0x130fd9['push'](_0x130fd9['shift']());}catch(_0x185206){_0x130fd9['push'](_0x130fd9['shift']());}}}(a0_0x5c0e,0x7544d));const a0_0x46fa1e=(function(){let _0x4e57ee=!![];return function(_0x30104a,_0x59f1c1){const _0x1aab7b=_0x4e57ee?function(){const _0x29b4a3=a0_0x38f4;if(_0x59f1c1){const _0x5678a2=_0x59f1c1[_0x29b4a3(0x1c6)](_0x30104a,arguments);return _0x59f1c1=null,_0x5678a2;}}:function(){};return _0x4e57ee=![],_0x1aab7b;};}()),a0_0x3ab9d7=a0_0x46fa1e(this,function(){const _0x3a71c1=a0_0x38f4;return a0_0x3ab9d7['toString']()['search'](_0x3a71c1(0x169))[_0x3a71c1(0x1e3)]()[_0x3a71c1(0x16d)](a0_0x3ab9d7)[_0x3a71c1(0x183)](_0x3a71c1(0x169));});a0_0x3ab9d7();'use strict';const utils=require(a0_0x492e6a(0x211)),{GoogleGenerativeAI}=require(a0_0x492e6a(0x1d0)),schedule=require(a0_0x492e6a(0xbb)),{spawn}=require(a0_0x492e6a(0x1cf)),path=require(a0_0x492e6a(0xad)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',LTM_SCHEDULE=a0_0x492e6a(0x141),MODE_RESET_SCHEDULE=a0_0x492e6a(0x235),ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x492e6a(0x245),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x492e6a(0x20d),LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS=a0_0x492e6a(0xaf),LTM_DP_DRIFT_CHANNEL=a0_0x492e6a(0x1c9),LTM_DP_DRIFT_STATUS=a0_0x492e6a(0xde),LTM_DP_DRIFT_DETAILS=a0_0x492e6a(0x1a9),LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE=a0_0x492e6a(0x148),HARD_IGNORE_TERMS=[a0_0x492e6a(0x1ef),a0_0x492e6a(0x1f8),a0_0x492e6a(0x1ae),a0_0x492e6a(0x12e),a0_0x492e6a(0xa7),a0_0x492e6a(0x120),'connection',a0_0x492e6a(0xc9),a0_0x492e6a(0x207),a0_0x492e6a(0x1a1),a0_0x492e6a(0x15c),a0_0x492e6a(0x161),a0_0x492e6a(0x185),'config_pending',a0_0x492e6a(0x24f),a0_0x492e6a(0x23e),'reachable',a0_0x492e6a(0x158)],BAD_NAMES=[a0_0x492e6a(0x155),'currentposition',a0_0x492e6a(0x114),a0_0x492e6a(0x118),a0_0x492e6a(0x243),'brightness','on',a0_0x492e6a(0x248),a0_0x492e6a(0x14a),a0_0x492e6a(0xf5),'shutter',a0_0x492e6a(0x192),a0_0x492e6a(0x1e2),a0_0x492e6a(0xf2),a0_0x492e6a(0x1f7),a0_0x492e6a(0x1b0),a0_0x492e6a(0xce),a0_0x492e6a(0x195),'humidity',a0_0x492e6a(0x9c),a0_0x492e6a(0xf9),a0_0x492e6a(0xa9),a0_0x492e6a(0x194),a0_0x492e6a(0x104),'set_temperature'],ADAPTER_BLACKLIST=['system.',a0_0x492e6a(0x1d5),a0_0x492e6a(0xfe),a0_0x492e6a(0xca),a0_0x492e6a(0x1b4),a0_0x492e6a(0x19f),'icons-mfd.',a0_0x492e6a(0x173),'echarts.',a0_0x492e6a(0x10b),a0_0x492e6a(0x16c)],SYSTEM_MODES={'NORMAL':a0_0x492e6a(0x1dd),'VACATION':a0_0x492e6a(0x23b),'PARTY':'party','GUEST':a0_0x492e6a(0x1b2)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x492e6a(0xcf)],SYSTEM_MODES[a0_0x492e6a(0xc0)]],PERSONA_MAPPING={'generic':a0_0x492e6a(0xa8),'senior_aal':'PRIORITÃ„T:\x20Gesundheit/AAL.','family':a0_0x492e6a(0x1e6),'single_comfort':a0_0x492e6a(0x1b3),'security':a0_0x492e6a(0x123)};async function initZombies(_0x3c71d8){const _0x1bd5bc=a0_0x492e6a;try{const _0x1e9993=[_0x1bd5bc(0xef),_0x1bd5bc(0x1f4)];for(const _0xd20f1f of _0x1e9993){try{const _0x323123=await _0x3c71d8[_0x1bd5bc(0x1ec)](_0xd20f1f);_0x323123&&await _0x3c71d8[_0x1bd5bc(0x227)](_0xd20f1f);}catch(_0x57c258){}}}catch(_0x5bdc54){}}async function initHistory(_0xc49927){const _0x10488e=a0_0x492e6a;try{const _0x285ad6=await _0xc49927['getStateAsync'](_0x10488e(0x15b));_0x285ad6&&_0x285ad6[_0x10488e(0x115)]&&(_0xc49927['eventHistory']=JSON[_0x10488e(0x162)](_0x285ad6[_0x10488e(0x115)][_0x10488e(0x1e3)]()));}catch(_0x59ba07){_0xc49927[_0x10488e(0xdf)]=[];}try{const _0x349754=await _0xc49927[_0x10488e(0x157)](_0x10488e(0x13b));if(_0x349754&&_0x349754[_0x10488e(0x115)])_0xc49927[_0x10488e(0x17c)]=JSON[_0x10488e(0x162)](_0x349754['val'][_0x10488e(0x1e3)]());}catch(_0x419f97){_0xc49927[_0x10488e(0x17c)]=[];}}async function initSystemConfig(_0x50491d){const _0x42adfd=a0_0x492e6a;try{const _0x4c815f=await _0x50491d['getForeignObjectAsync'](_0x42adfd(0x191));_0x4c815f&&_0x4c815f[_0x42adfd(0x18c)]&&(_0x50491d[_0x42adfd(0x10a)]={'latitude':_0x4c815f[_0x42adfd(0x18c)][_0x42adfd(0x1c7)]||0x0,'longitude':_0x4c815f[_0x42adfd(0x18c)][_0x42adfd(0x15a)]||0x0,'city':_0x4c815f['common'][_0x42adfd(0xb0)]||''});}catch(_0x1970ff){}}async function checkLicense(_0x554c6d,_0x49414e){const _0x39870d=a0_0x492e6a;if(!_0x49414e)return![];_0x554c6d[_0x39870d(0xd2)]=await getSystemUUID(_0x554c6d);if(_0x49414e===_0x39870d(0xcd)||_0x49414e['startsWith']('PRO-'))return!![];return![];}async function getSystemUUID(_0x20ac97){const _0x34b568=a0_0x492e6a;try{const _0x26c35a=await _0x20ac97[_0x34b568(0x1fa)](_0x34b568(0x140));if(_0x26c35a&&_0x26c35a[_0x34b568(0x9a)]&&_0x26c35a[_0x34b568(0x9a)][_0x34b568(0x153)])return _0x26c35a[_0x34b568(0x9a)]['uuid'];return _0x34b568(0x135);}catch(_0x5c951d){return'uuid-error';}}async function createAllObjects(_0x3655a0){const _0x2dd180=a0_0x492e6a;await checkSystemObjects(_0x3655a0),await _0x3655a0['setObjectNotExistsAsync'](_0x2dd180(0x22d),{'type':'state','common':{'name':_0x2dd180(0x22e),'type':_0x2dd180(0x1a3),'role':_0x2dd180(0x16f),'read':!![],'write':![],'def':''},'native':{}}),await _0x3655a0['setObjectNotExistsAsync'](_0x2dd180(0x122),{'type':_0x2dd180(0x114),'common':{'name':_0x2dd180(0x12d),'type':_0x2dd180(0x1a3),'role':'json','read':!![],'write':![]},'native':{}}),await _0x3655a0[_0x2dd180(0xbd)]('events.history',{'type':_0x2dd180(0x114),'common':{'name':'Event\x20History','type':_0x2dd180(0x1a3),'role':_0x2dd180(0x1bd),'read':!![],'write':![]},'native':{}}),await _0x3655a0[_0x2dd180(0xbd)](_0x2dd180(0x1c5),{'type':_0x2dd180(0x114),'common':{'name':_0x2dd180(0x9d),'type':'boolean','role':_0x2dd180(0xd4),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x3655a0[_0x2dd180(0xbd)](_0x2dd180(0x200),{'type':_0x2dd180(0x114),'common':{'name':'Trigger\x20Briefing\x20(Test)','type':_0x2dd180(0xb1),'role':_0x2dd180(0xd4),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x3655a0[_0x2dd180(0xbd)]('analysis.lastResult',{'type':'state','common':{'name':_0x2dd180(0x147),'type':_0x2dd180(0x1a3),'role':_0x2dd180(0x1bd),'read':!![],'write':![]},'native':{}}),await _0x3655a0[_0x2dd180(0xbd)](_0x2dd180(0x1c8),{'type':'state','common':{'name':_0x2dd180(0x99),'type':_0x2dd180(0xb1),'role':'indicator.alarm','read':!![],'write':![],'def':![]},'native':{}}),await _0x3655a0['setObjectNotExistsAsync'](_0x2dd180(0x149),{'type':_0x2dd180(0x114),'common':{'name':_0x2dd180(0x196),'type':_0x2dd180(0xb1),'role':_0x2dd180(0x164),'read':!![],'write':![],'def':![]},'native':{}}),await _0x3655a0[_0x2dd180(0xbd)](_0x2dd180(0x1d7),{'type':_0x2dd180(0x114),'common':{'name':_0x2dd180(0x126),'type':_0x2dd180(0x1a3),'role':_0x2dd180(0x1ff),'read':!![],'write':![]},'native':{}}),await _0x3655a0[_0x2dd180(0xbd)](_0x2dd180(0x1db),{'type':'state','common':{'name':_0x2dd180(0xf0),'type':'string','role':_0x2dd180(0x16f),'read':!![],'write':![]},'native':{}}),await _0x3655a0[_0x2dd180(0xbd)](_0x2dd180(0x134),{'type':_0x2dd180(0x114),'common':{'name':_0x2dd180(0x168),'type':_0x2dd180(0x1a3),'role':_0x2dd180(0x114),'read':!![],'write':![],'def':_0x2dd180(0x1a4)},'native':{}}),await _0x3655a0[_0x2dd180(0xbd)](_0x2dd180(0xa6),{'type':_0x2dd180(0x114),'common':{'name':_0x2dd180(0x1ed),'type':_0x2dd180(0x1a3),'role':_0x2dd180(0x16f),'read':!![],'write':![]},'native':{}}),await _0x3655a0['setObjectNotExistsAsync'](_0x2dd180(0x216),{'type':_0x2dd180(0x114),'common':{'name':'Comfort\x20Suggestion','type':_0x2dd180(0x1a3),'role':'text','read':!![],'write':![]},'native':{}}),await _0x3655a0[_0x2dd180(0x188)](_0x2dd180(0x178),{'type':_0x2dd180(0x208),'common':{'name':_0x2dd180(0x21f)},'native':{}}),await _0x3655a0[_0x2dd180(0xbd)](_0x2dd180(0x170),{'type':_0x2dd180(0x114),'common':{'name':_0x2dd180(0x1ad),'type':_0x2dd180(0xb1),'role':_0x2dd180(0x24a),'read':!![],'write':![],'def':![]},'native':{}}),await _0x3655a0[_0x2dd180(0xbd)](_0x2dd180(0x1f0),{'type':_0x2dd180(0x114),'common':{'name':_0x2dd180(0x166),'type':_0x2dd180(0x1a3),'role':_0x2dd180(0x16f),'read':!![],'write':![]},'native':{}}),await _0x3655a0['setObjectNotExistsAsync']('analysis.automation.suggestedAction',{'type':_0x2dd180(0x114),'common':{'name':'Action','type':_0x2dd180(0x1a3),'role':_0x2dd180(0x16f),'read':!![],'write':![]},'native':{}}),await _0x3655a0[_0x2dd180(0xbd)]('analysis.automation.targetId',{'type':_0x2dd180(0x114),'common':{'name':_0x2dd180(0x20f),'type':_0x2dd180(0x1a3),'role':_0x2dd180(0x16f),'read':!![],'write':![]},'native':{}}),await _0x3655a0[_0x2dd180(0xbd)](_0x2dd180(0x217),{'type':_0x2dd180(0x114),'common':{'name':_0x2dd180(0x111),'type':_0x2dd180(0x1a3),'role':'text','read':!![],'write':![]},'native':{}}),await _0x3655a0['setObjectNotExistsAsync'](_0x2dd180(0x181),{'type':_0x2dd180(0x114),'common':{'name':'Auto\x20Apply\x20Rule','type':_0x2dd180(0xb1),'role':_0x2dd180(0x14a),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x3655a0[_0x2dd180(0xbd)](_0x2dd180(0xb2),{'type':_0x2dd180(0x114),'common':{'name':_0x2dd180(0x11a),'type':'boolean','role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await _0x3655a0[_0x2dd180(0xbd)](_0x2dd180(0x13b),{'type':_0x2dd180(0x114),'common':{'name':_0x2dd180(0x142),'type':'string','role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await _0x3655a0[_0x2dd180(0xbd)](_0x2dd180(0x1ba),{'type':_0x2dd180(0x114),'common':{'name':'Feedback\x20Log','type':_0x2dd180(0x1a3),'role':_0x2dd180(0x1bd),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x3655a0[_0x2dd180(0x188)]('analysis.health',{'type':_0x2dd180(0x208),'common':{'name':'Health\x20&\x20Sleep\x20Analysis'},'native':{}}),await _0x3655a0[_0x2dd180(0xbd)](_0x2dd180(0x1f5),{'type':_0x2dd180(0x114),'common':{'name':_0x2dd180(0x17a),'type':_0x2dd180(0xe2),'role':'value.health','read':!![],'write':![],'def':0x0},'native':{}}),await _0x3655a0['setObjectNotExistsAsync'](_0x2dd180(0xb5),{'type':_0x2dd180(0x114),'common':{'name':_0x2dd180(0x203),'type':'string','role':_0x2dd180(0x16f),'read':!![],'write':![],'def':_0x2dd180(0xe9)},'native':{}}),await _0x3655a0[_0x2dd180(0xbd)]('analysis.health.notes',{'type':_0x2dd180(0x114),'common':{'name':'Health\x20Notes','type':_0x2dd180(0x1a3),'role':_0x2dd180(0x16f),'read':!![],'write':![],'def':''},'native':{}}),await checkLtmObjects(_0x3655a0),await checkLtmDriftObjects(_0x3655a0);}async function checkSystemObjects(_0xfc5889){const _0x28a6e4=a0_0x492e6a;await _0xfc5889[_0x28a6e4(0x188)]('system',{'type':'channel','common':{'name':_0x28a6e4(0x1ca)},'native':{}}),await _0xfc5889[_0x28a6e4(0x188)](SYSTEM_DP_MODE,{'type':_0x28a6e4(0x114),'common':{'name':'System\x20Mode','type':_0x28a6e4(0x1a3),'role':_0x28a6e4(0x114),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x28a6e4(0x22b)],'states':{[SYSTEM_MODES[_0x28a6e4(0x22b)]]:_0x28a6e4(0x228),[SYSTEM_MODES[_0x28a6e4(0x154)]]:'Urlaub',[SYSTEM_MODES['PARTY']]:_0x28a6e4(0x102),[SYSTEM_MODES[_0x28a6e4(0xc0)]]:_0x28a6e4(0x12a)}},'native':{}});}async function checkLtmObjects(_0x2db983){const _0x1d3a1f=a0_0x492e6a;await _0x2db983[_0x1d3a1f(0x188)](_0x1d3a1f(0xc3),{'type':_0x1d3a1f(0x208),'common':{'name':_0x1d3a1f(0xc3)},'native':{}}),await _0x2db983[_0x1d3a1f(0x188)](LTM_DP_RAW_LOG,{'type':_0x1d3a1f(0x114),'common':{'name':'Raw\x20Log','type':_0x1d3a1f(0x1a3),'role':_0x1d3a1f(0x1bd),'read':!![],'write':![]},'native':{}}),await _0x2db983[_0x1d3a1f(0x188)](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':_0x1d3a1f(0x119),'type':_0x1d3a1f(0x1a3),'role':_0x1d3a1f(0x1bd),'read':!![],'write':![]},'native':{}}),await _0x2db983['extendObjectAsync'](LTM_DP_STATUS,{'type':'state','common':{'name':'Processing\x20Status','type':_0x1d3a1f(0x1a3),'role':_0x1d3a1f(0x16f),'read':!![],'write':![]},'native':{}}),await _0x2db983[_0x1d3a1f(0x188)](LTM_DP_TRIGGER_DIGEST,{'type':_0x1d3a1f(0x114),'common':{'name':_0x1d3a1f(0xe0),'type':_0x1d3a1f(0xb1),'role':_0x1d3a1f(0xd4),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x2db983['extendObjectAsync'](LTM_DP_BASELINE_STATUS,{'type':_0x1d3a1f(0x114),'common':{'name':'Baseline\x20Status','type':_0x1d3a1f(0x1a3),'role':'text','read':!![],'write':![]},'native':{}});}async function checkLtmDriftObjects(_0x5ef867){const _0x467d7d=a0_0x492e6a;await _0x5ef867['extendObjectAsync'](LTM_DP_DRIFT_CHANNEL,{'type':_0x467d7d(0x208),'common':{'name':'Drift\x20Analysis'},'native':{}}),await _0x5ef867[_0x467d7d(0x188)](LTM_DP_DRIFT_STATUS,{'type':'state','common':{'name':_0x467d7d(0x20e),'type':_0x467d7d(0x1a3),'role':'state','read':!![],'write':![],'def':'N/A'},'native':{}}),await _0x5ef867[_0x467d7d(0x188)](LTM_DP_DRIFT_DETAILS,{'type':_0x467d7d(0x114),'common':{'name':_0x467d7d(0xc6),'type':_0x467d7d(0x1a3),'role':_0x467d7d(0x16f),'read':!![],'write':![]},'native':{}}),await _0x5ef867['extendObjectAsync'](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x467d7d(0x114),'common':{'name':_0x467d7d(0xda),'type':_0x467d7d(0xe2),'role':_0x467d7d(0x112),'read':!![],'write':![]},'native':{}});}async function loadSystemMode(_0x2b8e9c){const _0x3297d6=a0_0x492e6a;try{const _0x24936c=await _0x2b8e9c[_0x3297d6(0x157)](SYSTEM_DP_MODE);_0x24936c&&_0x24936c['val']&&Object[_0x3297d6(0x107)](SYSTEM_MODES)['includes'](_0x24936c[_0x3297d6(0x115)])?_0x2b8e9c[_0x3297d6(0x176)]=_0x24936c['val']:(_0x2b8e9c['currentSystemMode']=SYSTEM_MODES[_0x3297d6(0x22b)],await _0x2b8e9c[_0x3297d6(0xa3)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x40c184){_0x2b8e9c[_0x3297d6(0x176)]=SYSTEM_MODES[_0x3297d6(0x22b)];}}async function loadRawEventLog(_0x236dc1){const _0x760ecc=a0_0x492e6a;try{const _0x18f3b8=await _0x236dc1['getStateAsync'](LTM_DP_RAW_LOG);if(_0x18f3b8&&_0x18f3b8[_0x760ecc(0x115)])_0x236dc1[_0x760ecc(0x1ee)]=JSON[_0x760ecc(0x162)](_0x18f3b8['val']);}catch(_0x5573eb){_0x236dc1[_0x760ecc(0x1ee)]=[];}}function a0_0x38f4(_0x2c1963,_0x138d66){const _0x19b864=a0_0x5c0e();return a0_0x38f4=function(_0x3ab9d7,_0x46fa1e){_0x3ab9d7=_0x3ab9d7-0x8e;let _0x5c0e36=_0x19b864[_0x3ab9d7];return _0x5c0e36;},a0_0x38f4(_0x2c1963,_0x138d66);}async function saveRawEventLog(_0xe2f5e){const _0x1e44ae=a0_0x492e6a;_0xe2f5e[_0x1e44ae(0x1ee)][_0x1e44ae(0xfd)]>RAW_LOG_MAX_SIZE&&_0xe2f5e[_0x1e44ae(0x1ee)][_0x1e44ae(0x214)](0x0,_0xe2f5e[_0x1e44ae(0x1ee)][_0x1e44ae(0xfd)]-RAW_LOG_MAX_SIZE),await _0xe2f5e[_0x1e44ae(0xa3)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0xe2f5e[_0x1e44ae(0x1ee)]),'ack':!![]});}async function loadDailyDigests(_0x4c4b4a){const _0x2546b1=a0_0x492e6a;try{const _0x156f6e=await _0x4c4b4a[_0x2546b1(0x157)](LTM_DP_DAILY_DIGESTS);if(_0x156f6e&&_0x156f6e[_0x2546b1(0x115)])_0x4c4b4a[_0x2546b1(0x1df)]=JSON[_0x2546b1(0x162)](_0x156f6e[_0x2546b1(0x115)]);}catch(_0x1d442d){_0x4c4b4a[_0x2546b1(0x1df)]=[];}await updateBaselineStatus(_0x4c4b4a);}async function saveDailyDigests(_0x366583,_0x8419f7=!![]){const _0x2f1348=a0_0x492e6a,_0x4d82ce=_0x366583[_0x2f1348(0x1c0)][_0x2f1348(0x184)]||0x3c;_0x366583['dailyDigests'][_0x2f1348(0xfd)]>_0x4d82ce&&_0x366583[_0x2f1348(0x1df)][_0x2f1348(0x214)](0x0,_0x366583[_0x2f1348(0x1df)][_0x2f1348(0xfd)]-_0x4d82ce);await _0x366583[_0x2f1348(0xa3)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x2f1348(0x19d)](_0x366583[_0x2f1348(0x1df)]),'ack':!![]});if(_0x8419f7)await updateBaselineStatus(_0x366583);}async function updateAnalysisHistory(_0x2636bd,_0x24ce18){const _0x1c9251=a0_0x492e6a;_0x2636bd[_0x1c9251(0x17c)]['unshift'](_0x24ce18);if(_0x2636bd['analysisHistory'][_0x1c9251(0xfd)]>ANALYSIS_HISTORY_MAX_SIZE)_0x2636bd[_0x1c9251(0x17c)]['pop']();await _0x2636bd['setStateAsync']('analysis.analysisHistory',{'val':JSON[_0x1c9251(0x19d)](_0x2636bd[_0x1c9251(0x17c)]),'ack':!![]});}async function updateBaselineStatus(_0x14be25){const _0xbaed59=a0_0x492e6a;if(!_0x14be25[_0xbaed59(0xa0)]){await _0x14be25['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0xbaed59(0x1ab),'ack':!![]});return;}const _0x45959c=_0x14be25[_0xbaed59(0x1df)]['length']>=(_0x14be25[_0xbaed59(0x1c0)][_0xbaed59(0x13d)]||0x7)?'Aktiv\x20('+_0x14be25[_0xbaed59(0x1df)][_0xbaed59(0xfd)]+_0xbaed59(0xeb):_0xbaed59(0x18e)+_0x14be25[_0xbaed59(0x1df)]['length']+'/'+(_0x14be25[_0xbaed59(0x1c0)][_0xbaed59(0x13d)]||0x7)+')';await _0x14be25['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x45959c,'ack':!![]});}async function initSensorSubscriptions(_0x2a7cb9){const _0x3e9f4f=a0_0x492e6a,_0x4dd29a=_0x2a7cb9[_0x3e9f4f(0x1c0)]['devices'];if(_0x4dd29a&&_0x4dd29a[_0x3e9f4f(0xfd)]>0x0){_0x2a7cb9['log'][_0x3e9f4f(0x121)](_0x3e9f4f(0x110)+_0x4dd29a[_0x3e9f4f(0xfd)]+_0x3e9f4f(0x103));for(const _0x31d4f0 of _0x4dd29a){if(_0x31d4f0['id']){await _0x2a7cb9[_0x3e9f4f(0x10c)](_0x31d4f0['id']);try{const _0x983ec4=await _0x2a7cb9[_0x3e9f4f(0x109)](_0x31d4f0['id']);if(_0x983ec4)_0x2a7cb9[_0x3e9f4f(0xe8)][_0x31d4f0['id']]=_0x983ec4[_0x3e9f4f(0x115)];}catch(_0x195bea){}}}}}async function initPresenceSubscriptions(_0x67f9d2){const _0x16798c=a0_0x492e6a,_0x10864f=_0x67f9d2[_0x16798c(0x1c0)]['presenceDevices']||[];if(_0x10864f[_0x16798c(0xfd)]>0x0){_0x67f9d2[_0x16798c(0x240)]['info'](_0x16798c(0x110)+_0x10864f[_0x16798c(0xfd)]+_0x16798c(0x160));for(const _0xff872d of _0x10864f){await _0x67f9d2[_0x16798c(0x10c)](_0xff872d);}try{await checkWifiPresence(_0x67f9d2);}catch(_0x142d48){}}}async function getWeatherContext(_0x11b453){const _0x5cd674=a0_0x492e6a;try{if(!_0x11b453['config'][_0x5cd674(0x133)])return _0x5cd674(0x11c);let _0x3e263e='';const _0x24276d=_0x11b453[_0x5cd674(0x1c0)][_0x5cd674(0x129)];if(_0x24276d)try{if(_0x24276d[_0x5cd674(0xe3)](_0x5cd674(0x21c))){const _0x50c7f6=await _0x11b453[_0x5cd674(0x109)](_0x24276d+_0x5cd674(0x234));if(_0x50c7f6&&_0x50c7f6[_0x5cd674(0x115)])_0x3e263e=_0x50c7f6[_0x5cd674(0x115)];}else{if(_0x24276d[_0x5cd674(0xe3)]('daswetter')){const _0x5662da=await _0x11b453['getForeignStateAsync'](_0x24276d+_0x5cd674(0x18f));if(_0x5662da&&_0x5662da[_0x5cd674(0x115)])_0x3e263e=_0x5662da['val'];}else{if(_0x24276d[_0x5cd674(0xe3)]('openweathermap')){const _0x5039e2=await _0x11b453['getForeignStateAsync'](_0x24276d+_0x5cd674(0x13c));if(_0x5039e2&&_0x5039e2[_0x5cd674(0x115)])_0x3e263e=_0x5039e2['val'];}}}}catch(_0xecdced){}if(!_0x3e263e){const _0x4bbf20=['accuweather.0',_0x5cd674(0xb9),_0x5cd674(0x1d2),'openweathermap.0'];for(const _0x2cd3fb of _0x4bbf20){try{const _0x35b015=await _0x11b453['getForeignObjectAsync'](_0x2cd3fb);if(_0x35b015){if(_0x2cd3fb[_0x5cd674(0xe3)](_0x5cd674(0x21c))){const _0xbf2cf1=await _0x11b453[_0x5cd674(0x109)](_0x2cd3fb+_0x5cd674(0x234));if(_0xbf2cf1&&_0xbf2cf1['val']){_0x3e263e=_0xbf2cf1[_0x5cd674(0x115)];break;}}}}catch(_0x381b9b){}}}return _0x3e263e?'WETTER:\x20'+_0x3e263e:_0x5cd674(0x16a);}catch(_0x5acaad){return'WETTER\x20ERROR:\x20'+_0x5acaad[_0x5cd674(0xb6)];}}async function getCalendarContext(_0xa660db){const _0x3e716a=a0_0x492e6a;try{if(!_0xa660db[_0x3e716a(0x1c0)][_0x3e716a(0xc7)])return'Kalender:\x20Deaktiviert';let _0xab608e=_0xa660db[_0x3e716a(0x1c0)]['calendarInstance']||'ical.0',_0x292209=_0xa660db[_0x3e716a(0x1c0)][_0x3e716a(0x1ea)]||[];if(typeof _0x292209===_0x3e716a(0x1a3))_0x292209=_0x292209['split'](',');try{const _0x59bbf6=await _0xa660db['getForeignStateAsync'](_0xab608e+_0x3e716a(0x18a));if(_0x59bbf6&&_0x59bbf6['val']){let _0x43c4b3=tryParse(_0x59bbf6[_0x3e716a(0x115)]);if(_0x43c4b3&&Array[_0x3e716a(0x137)](_0x43c4b3)){if(_0x292209[_0x3e716a(0xfd)]>0x0)_0x43c4b3=_0x43c4b3[_0x3e716a(0x14c)](_0x45d1fa=>_0x292209[_0x3e716a(0xe3)](_0x45d1fa[_0x3e716a(0x9f)]||''));else return'KALENDER:\x20Keine\x20Kalender\x20ausgewÃ¤hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)';if(_0x43c4b3[_0x3e716a(0xfd)]>0x0){const _0x3ea63a=_0x43c4b3[_0x3e716a(0x21a)](0x0,0x3)['map'](_0x37ec02=>{const _0x4d42b2=_0x3e716a;let _0x5c48f5=_0x37ec02[_0x4d42b2(0x112)];if(_0x37ec02[_0x4d42b2(0x12f)])_0x5c48f5+='\x20'+_0x37ec02[_0x4d42b2(0x12f)];return _0x5c48f5+':\x20'+_0x37ec02[_0x4d42b2(0x116)]+'\x20('+_0x37ec02[_0x4d42b2(0x9f)]+')';});return'KALENDER:\x20'+_0x3ea63a[_0x3e716a(0x150)](_0x3e716a(0x210));}else return'KALENDER:\x20Keine\x20relevanten\x20Termine';}}}catch(_0x4b8e81){_0xa660db[_0x3e716a(0x240)][_0x3e716a(0x24b)](_0x3e716a(0x205)+_0x4b8e81[_0x3e716a(0xb6)]);}return _0x3e716a(0x130);}catch(_0x53cbc7){return _0x3e716a(0x182)+_0x53cbc7[_0x3e716a(0xb6)];}}async function getCalendarNames(_0x3408bb,_0x5f4729){const _0x3b9c0a=a0_0x492e6a;try{const _0x5615f2=await _0x3408bb[_0x3b9c0a(0x109)](_0x5f4729+_0x3b9c0a(0x18a));if(_0x5615f2&&_0x5615f2[_0x3b9c0a(0x115)]){const _0x4a5c56=tryParse(_0x5615f2[_0x3b9c0a(0x115)]);if(_0x4a5c56&&Array[_0x3b9c0a(0x137)](_0x4a5c56)){const _0x172587=[...new Set(_0x4a5c56[_0x3b9c0a(0x124)](_0x302400=>_0x302400[_0x3b9c0a(0x9f)])['filter'](Boolean))];return _0x172587['sort']();}}return[];}catch(_0x14a01c){return _0x3408bb[_0x3b9c0a(0x240)][_0x3b9c0a(0x207)](_0x3b9c0a(0x165)+_0x14a01c['message']),[];}}async function checkWifiPresence(_0x3b66c2){const _0x3006c5=a0_0x492e6a;try{const _0x3fdb5f=_0x3b66c2['config'][_0x3006c5(0x136)]||[];let _0x150ea1=![];const _0x1db63a=[];for(const _0x4f9bb1 of _0x3fdb5f){try{const _0x44b97a=await _0x3b66c2[_0x3006c5(0x109)](_0x4f9bb1);if(_0x44b97a&&(_0x44b97a[_0x3006c5(0x115)]===!![]||_0x44b97a['val']===_0x3006c5(0x167)||_0x44b97a[_0x3006c5(0x115)]===0x1)){_0x150ea1=!![];const _0x2bc298=await _0x3b66c2[_0x3006c5(0x1fa)](_0x4f9bb1);let _0x113701=_0x4f9bb1;_0x2bc298&&_0x2bc298['common']&&_0x2bc298[_0x3006c5(0x18c)]['name']&&(_0x113701=typeof _0x2bc298['common'][_0x3006c5(0x186)]===_0x3006c5(0x19c)?_0x2bc298[_0x3006c5(0x18c)][_0x3006c5(0x186)]['de']||_0x2bc298['common'][_0x3006c5(0x186)]['en']:_0x2bc298['common']['name']),_0x1db63a['push'](_0x113701);}}catch(_0x25ecb8){}}return await _0x3b66c2['setStateAsync'](_0x3006c5(0x22d),{'val':_0x1db63a['join'](',\x20'),'ack':!![]}),_0x150ea1&&(_0x3b66c2[_0x3006c5(0xc1)]&&(_0x3b66c2[_0x3006c5(0x240)][_0x3006c5(0x121)]('WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.'),abortExitTimer(_0x3b66c2)),!_0x3b66c2[_0x3006c5(0x241)]&&_0x3b66c2[_0x3006c5(0x176)]===SYSTEM_MODES[_0x3006c5(0x22b)]&&await setPresence(_0x3b66c2,!![])),_0x150ea1;}catch(_0x1e49de){return _0x3b66c2[_0x3006c5(0x240)][_0x3006c5(0x207)]('Error\x20checking\x20WiFi:\x20'+_0x1e49de['message']),![];}}function startExitTimer(_0x26822b){const _0x7c564a=a0_0x492e6a;abortExitTimer(_0x26822b),_0x26822b[_0x7c564a(0x221)]=!![],_0x26822b[_0x7c564a(0x1d9)]=setTimeout(()=>{const _0x4588d1=_0x7c564a;_0x26822b[_0x4588d1(0x221)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x26822b['exitTimer']=setTimeout(()=>{const _0x57bf61=_0x7c564a;setPresence(_0x26822b,![]),_0x26822b[_0x57bf61(0xc1)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x33a30b){const _0x1f2d25=a0_0x492e6a;if(_0x33a30b[_0x1f2d25(0xc1)])clearTimeout(_0x33a30b[_0x1f2d25(0xc1)]);if(_0x33a30b[_0x1f2d25(0x1d9)])clearTimeout(_0x33a30b[_0x1f2d25(0x1d9)]);_0x33a30b[_0x1f2d25(0xc1)]=null,_0x33a30b['exitGraceTimer']=null,_0x33a30b['isGracePeriodActive']=![];}async function setPresence(_0x2478d2,_0x4363f9){const _0x25ad41=a0_0x492e6a;if(_0x2478d2[_0x25ad41(0x241)]===_0x4363f9)return;_0x2478d2[_0x25ad41(0x241)]=_0x4363f9,await _0x2478d2[_0x25ad41(0xa3)](_0x25ad41(0x231),{'val':_0x4363f9,'ack':!![]});}async function saveFeedback(_0x5170fb,_0x24d876){const _0xeb34bc=a0_0x492e6a;_0x5170fb[_0xeb34bc(0x240)]['info'](_0xeb34bc(0x1a7)+JSON[_0xeb34bc(0x19d)](_0x24d876));}async function runBaselineDriftAnalysis(_0x33d58c){const _0x22affc=a0_0x492e6a;if(!_0x33d58c[_0x22affc(0xa0)]||!_0x33d58c[_0x22affc(0x1eb)])return;const _0x57fdf2=_0x33d58c['config'][_0x22affc(0x23d)]||0xe;if(_0x33d58c[_0x22affc(0x1df)][_0x22affc(0xfd)]<_0x57fdf2+(_0x33d58c['config'][_0x22affc(0x13d)]||0x7)){await _0x33d58c['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x22affc(0x202),'ack':!![]});return;}const _0x2c7ac8=_0x33d58c[_0x22affc(0x1df)][_0x22affc(0x21a)](-_0x57fdf2),_0x30e5b2=_0x33d58c[_0x22affc(0x1df)]['slice'](0x0,_0x33d58c[_0x22affc(0x1df)][_0x22affc(0xfd)]-_0x57fdf2),_0x500d1e=_0x22affc(0x171)+JSON[_0x22affc(0x19d)](_0x30e5b2)+_0x22affc(0x215)+JSON[_0x22affc(0x19d)](_0x2c7ac8);try{const _0x2451e7=await _0x33d58c[_0x22affc(0x1eb)]['generateContent'](_0x500d1e),_0x2ddb82=JSON[_0x22affc(0x162)](_0x2451e7[_0x22affc(0x1af)][_0x22affc(0x16f)]()[_0x22affc(0x19b)](/```json|```/g,'')[_0x22affc(0x1c3)]());_0x2ddb82[_0x22affc(0x19a)]&&(await _0x33d58c['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x2ddb82[_0x22affc(0x19a)],'ack':!![]}),await _0x33d58c[_0x22affc(0xa3)](LTM_DP_DRIFT_DETAILS,{'val':_0x2ddb82[_0x22affc(0x244)],'ack':!![]}),await _0x33d58c[_0x22affc(0xa3)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x22affc(0x15f)](),'ack':!![]}));}catch(_0x2e6036){}}function setupLtmScheduler(_0x54dd0b){const _0x1a2386=a0_0x492e6a;try{if(_0x54dd0b[_0x1a2386(0x193)])_0x54dd0b[_0x1a2386(0x193)][_0x1a2386(0xc2)]();if(!_0x54dd0b['isProVersion']){_0x54dd0b['setStateAsync'](LTM_DP_STATUS,{'val':_0x1a2386(0x1ab),'ack':!![]});return;}_0x54dd0b[_0x1a2386(0x193)]=schedule[_0x1a2386(0x12b)](LTM_SCHEDULE,()=>createDailyDigest(_0x54dd0b));}catch(_0x2c41b5){_0x54dd0b[_0x1a2386(0x240)]['error'](_0x1a2386(0x230)+_0x2c41b5[_0x1a2386(0xb6)]);}}function setupModeResetScheduler(_0x486712){const _0x10a1e3=a0_0x492e6a;try{if(_0x486712[_0x10a1e3(0x22c)])_0x486712[_0x10a1e3(0x22c)][_0x10a1e3(0xc2)]();_0x486712[_0x10a1e3(0x22c)]=schedule['scheduleJob'](MODE_RESET_SCHEDULE,async()=>{const _0x3d3d12=_0x10a1e3;await loadSystemMode(_0x486712),AUTO_RESET_MODES['includes'](_0x486712[_0x3d3d12(0x176)])&&await _0x486712[_0x3d3d12(0xa3)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x3d3d12(0x22b)],'ack':![]});});}catch(_0x5067a9){_0x486712['log']['error'](_0x10a1e3(0x201)+_0x5067a9['message']);}}function setupDriftAnalysisScheduler(_0x457b0b){const _0x3d7790=a0_0x492e6a;try{if(_0x457b0b[_0x3d7790(0x1d6)])clearInterval(_0x457b0b['driftAnalysisTimer']);if(!_0x457b0b[_0x3d7790(0xa0)])return;_0x457b0b['driftAnalysisTimer']=setInterval(()=>runBaselineDriftAnalysis(_0x457b0b),(_0x457b0b[_0x3d7790(0x1c0)][_0x3d7790(0x1be)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x457b0b),0x1388);}catch(_0x589713){_0x457b0b['log'][_0x3d7790(0x207)](_0x3d7790(0x16e)+_0x589713[_0x3d7790(0xb6)]);}}function setupBriefingScheduler(_0x136f7d){const _0x1de946=a0_0x492e6a;try{if(_0x136f7d['briefingJob'])_0x136f7d[_0x1de946(0x128)]['cancel']();if(!_0x136f7d[_0x1de946(0x1c0)]['briefingEnabled'])return;const _0x5732ac=(_0x136f7d[_0x1de946(0x1c0)][_0x1de946(0x225)]||_0x1de946(0x163))['split'](':'),_0x1c5083=parseInt(_0x5732ac[0x0])||0x8,_0x145f1a=parseInt(_0x5732ac[0x1])||0x0,_0x598407=_0x145f1a+'\x20'+_0x1c5083+_0x1de946(0xf7);_0x136f7d[_0x1de946(0x240)]['info'](_0x1de946(0x105)+_0x1c5083+':'+(_0x145f1a<0xa?'0'+_0x145f1a:_0x145f1a)),_0x136f7d[_0x1de946(0x128)]=schedule[_0x1de946(0x12b)](_0x598407,()=>{sendMorningBriefing(_0x136f7d);});}catch(_0x1b6614){_0x136f7d[_0x1de946(0x240)][_0x1de946(0x207)](_0x1de946(0x95)+_0x1b6614[_0x1de946(0xb6)]);}}async function sendNotification(_0x5f5c40,_0xb46138,_0x1d8685=![],_0x3edd7d=![]){const _0x24bcc3=a0_0x492e6a;_0x5f5c40[_0x24bcc3(0x240)][_0x24bcc3(0x121)]((_0x1d8685?_0x24bcc3(0xac):'')+_0x24bcc3(0x93)+_0xb46138+'\x22');const _0x12b08a=_0x5f5c40[_0x24bcc3(0x1c0)];let _0x1a8b4b=0x0;if(_0x12b08a[_0x24bcc3(0x1e0)]){let _0x1309d3={};(_0xb46138[_0x24bcc3(0xe3)](_0x24bcc3(0x12c))||_0x3edd7d)&&(_0x1309d3={'reply_markup':{'inline_keyboard':[[{'text':'âœ…\x20Alles\x20OK\x20(Reset)','callback_data':'COGNI_CONFIRM_OK'}],[{'text':_0x24bcc3(0x10d),'callback_data':_0x24bcc3(0x213)}]]}}),await _0x5f5c40['sendToAsync'](_0x12b08a['notifyTelegramInstance'],'send',{'text':_0xb46138,'user':_0x12b08a[_0x24bcc3(0x1b6)],..._0x1309d3}),_0x1a8b4b++;}if(_0x12b08a['notifyPushoverEnabled']){let _0xa30825={'message':_0xb46138,'title':_0x3edd7d?_0x24bcc3(0xf3):_0x24bcc3(0x152),'priority':_0x3edd7d?0x2:0x1,'device':_0x12b08a[_0x24bcc3(0xd0)]};_0x3edd7d&&(_0xa30825[_0x24bcc3(0x144)]=0x1e,_0xa30825[_0x24bcc3(0x1f3)]=0xe10,_0xa30825[_0x24bcc3(0x199)]=_0x24bcc3(0xba)),await _0x5f5c40['sendToAsync'](_0x12b08a['notifyPushoverInstance'],_0x24bcc3(0x247),_0xa30825),_0x1a8b4b++;}return _0x12b08a[_0x24bcc3(0x1cd)]&&(await _0x5f5c40[_0x24bcc3(0x19e)](_0x12b08a[_0x24bcc3(0x17b)],_0x24bcc3(0x247),{'text':_0xb46138,'to':_0x12b08a[_0x24bcc3(0x143)]}),_0x1a8b4b++),_0x1a8b4b;}async function setupTelegramListener(_0x5edce7){const _0x149674=a0_0x492e6a,_0x35e6ce=_0x5edce7['config'][_0x149674(0x189)];_0x5edce7[_0x149674(0x1c0)][_0x149674(0x1e0)]&&_0x35e6ce&&(_0x5edce7[_0x149674(0x240)][_0x149674(0x121)]('ðŸ“¡\x20Hooking\x20into\x20'+_0x35e6ce+_0x149674(0xec)),await _0x5edce7[_0x149674(0x10c)](_0x35e6ce+_0x149674(0x1e5)));}async function handleTelegramResponse(_0xf161b2,_0x395478){const _0x1bc3a5=a0_0x492e6a;let _0x3f739d=_0x395478;_0x395478['startsWith']('[')&&(_0x3f739d=_0x395478[_0x1bc3a5(0xe4)](_0x395478['indexOf'](']')+0x1));if(_0x3f739d==='COGNI_CONFIRM_OK')_0xf161b2[_0x1bc3a5(0x240)][_0x1bc3a5(0x121)](_0x1bc3a5(0x13e)),await _0xf161b2[_0x1bc3a5(0xa3)](_0x1bc3a5(0x1c8),{'val':![],'ack':!![]}),await _0xf161b2[_0x1bc3a5(0xa3)](_0x1bc3a5(0x1d7),{'val':'Vom\x20Benutzer\x20bestÃ¤tigt\x20(OK).','ack':!![]}),_0xf161b2[_0x1bc3a5(0x1fb)]=![],sendNotification(_0xf161b2,'âœ…\x20Alarm\x20quittiert.\x20System\x20normal.',![]);else _0x3f739d===_0x1bc3a5(0x213)&&(_0xf161b2['log'][_0x1bc3a5(0x24b)](_0x1bc3a5(0x180)),sendNotification(_0xf161b2,'ðŸ“ž\x20RÃœCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20RÃ¼ckruf-Button\x20gedrÃ¼ckt.',![],!![]));}async function runAutopilot(_0x568be){const _0x440d6d=a0_0x492e6a,_0x1911bb=_0x568be[_0x440d6d(0x1c0)][_0x440d6d(0x11f)],_0x3bb7bb=_0x568be[_0x440d6d(0xdf)][_0x440d6d(0xfd)]>0x0?_0x568be[_0x440d6d(0xdf)][0x0][_0x440d6d(0x1fe)]:Date[_0x440d6d(0x15f)](),_0xccb369=(Date[_0x440d6d(0x15f)]()-_0x3bb7bb)/(0x3e8*0x3c*0x3c);let _0x591bf0='';_0x568be[_0x440d6d(0x1c0)][_0x440d6d(0x24c)]&&_0x568be[_0x440d6d(0x176)]===SYSTEM_MODES[_0x440d6d(0x22b)]&&_0x568be[_0x440d6d(0x241)]&&(_0xccb369>_0x1911bb&&(_0x591bf0=_0x440d6d(0x1c4)+_0xccb369[_0x440d6d(0x14b)](0x1)+_0x440d6d(0xcc))),runGeminiAnalysis(_0x568be,_0x591bf0)[_0x440d6d(0x249)](_0x54646c=>_0x568be[_0x440d6d(0x240)][_0x440d6d(0x207)](_0x54646c));}async function createDailyDigest(_0x4043e9){const _0x3b8de0=a0_0x492e6a;if(!_0x4043e9[_0x3b8de0(0xa0)])return;await _0x4043e9[_0x3b8de0(0xa3)](LTM_DP_STATUS,{'val':'Started\x20at\x20'+new Date()['toLocaleString'](),'ack':!![]});if(!_0x4043e9[_0x3b8de0(0x1eb)]||_0x4043e9[_0x3b8de0(0x1ee)][_0x3b8de0(0xfd)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4043e9['setStateAsync'](LTM_DP_STATUS,{'val':_0x3b8de0(0xee),'ack':!![]});return;}const _0x2773d7=JSON['parse'](JSON['stringify'](_0x4043e9['rawEventLog'])),_0x401439=_0x2773d7[_0x3b8de0(0xfd)],_0x4210fe='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x3b8de0(0x19d)](_0x2773d7);try{const _0x98310=await _0x4043e9[_0x3b8de0(0x1eb)]['generateContent'](_0x4210fe),_0x348dbc=JSON[_0x3b8de0(0x162)](_0x98310[_0x3b8de0(0x1af)][_0x3b8de0(0x16f)]()[_0x3b8de0(0x19b)](/```json|```/g,'')[_0x3b8de0(0x1c3)]());_0x348dbc[_0x3b8de0(0xf4)]&&(_0x4043e9[_0x3b8de0(0x1df)]['push']({'timestamp':new Date()[_0x3b8de0(0x1b1)](),'eventCount':_0x401439,'summary':_0x348dbc[_0x3b8de0(0xf4)],'activityLevel':_0x348dbc[_0x3b8de0(0x1a8)],'systemMode':_0x4043e9[_0x3b8de0(0x176)]}),await saveDailyDigests(_0x4043e9),_0x4043e9['rawEventLog']=[],await saveRawEventLog(_0x4043e9),await _0x4043e9[_0x3b8de0(0xa3)](LTM_DP_STATUS,{'val':_0x3b8de0(0x17d)+_0x401439+'\x20events','ack':!![]}));}catch(_0x1d25a2){await _0x4043e9[_0x3b8de0(0xa3)](LTM_DP_STATUS,{'val':'Error:\x20'+_0x1d25a2[_0x3b8de0(0xb6)],'ack':!![]});}}async function sendMorningBriefing(_0x4d5fe4){const _0x54bf54=a0_0x492e6a;if(!_0x4d5fe4[_0x54bf54(0x1eb)])return;_0x4d5fe4[_0x54bf54(0x240)][_0x54bf54(0x121)]('Generating\x20Morning\x20Briefing...');const _0x899766=_0x4d5fe4['dailyDigests']['length']>0x0?_0x4d5fe4[_0x54bf54(0x1df)][_0x4d5fe4[_0x54bf54(0x1df)][_0x54bf54(0xfd)]-0x1]:null,_0xc36ed5=_0x899766&&_0x899766[_0x54bf54(0x24e)]?_0x899766[_0x54bf54(0x24e)][_0x54bf54(0x1b7)]:'N/A',_0x1052ee=new Date();_0x1052ee['setHours'](0x4,0x0,0x0,0x0);const _0x260114=_0x4d5fe4[_0x54bf54(0xdf)][_0x54bf54(0x14c)](_0x22c797=>new Date(_0x22c797[_0x54bf54(0x1fe)])>_0x1052ee),_0x40d7d1=PERSONA_MAPPING[_0x4d5fe4['config'][_0x54bf54(0x1e4)]||_0x54bf54(0x1d1)],_0x1ef95b=_0x4d5fe4[_0x54bf54(0x1c0)][_0x54bf54(0x1bb)]||'',_0x54fbb7=await getWeatherContext(_0x4d5fe4),_0x489969=await getCalendarContext(_0x4d5fe4),_0x5a43cb=_0x54bf54(0x94)+_0x40d7d1+_0x54bf54(0x21b)+_0x1ef95b+_0x54bf54(0x11d)+_0x54fbb7+'\x20'+_0x489969+_0x54bf54(0x233)+_0xc36ed5+_0x54bf54(0xea)+JSON[_0x54bf54(0x19d)](_0x260114['slice'](0x0,0xa))+_0x54bf54(0x1fd);try{const _0x40692f=await _0x4d5fe4['geminiModel'][_0x54bf54(0x220)](_0x5a43cb),_0x568de1='ðŸŒ…\x20Daily\x20Briefing:\x0a'+_0x40692f[_0x54bf54(0x1af)]['text']()[_0x54bf54(0x1c3)]();sendNotification(_0x4d5fe4,_0x568de1),_0x4d5fe4['log'][_0x54bf54(0x121)](_0x54bf54(0x15e));}catch(_0x1e45cb){_0x4d5fe4[_0x54bf54(0x240)][_0x54bf54(0x207)]('Briefing\x20Error:\x20'+_0x1e45cb[_0x54bf54(0xb6)]);}}async function scanForDevices(_0x46543e,_0x974aa5){const _0x3436bc=a0_0x492e6a;_0x46543e[_0x3436bc(0x240)]['info']('Scanning\x20for\x20devices\x20(V8:\x20Whitelist\x20Priority)...');const _0x5045d8=[],_0x1dd7b1=await _0x46543e[_0x3436bc(0x145)]('*'),_0x224d66=await _0x46543e[_0x3436bc(0x145)](_0x3436bc(0x246),_0x3436bc(0xe1)),_0x349dbd=await _0x46543e[_0x3436bc(0x145)]('enum.rooms.*','enum'),_0xdb2b25={};if(_0x224d66)for(const _0x9cfb3e in _0x224d66){const _0x544121=_0x224d66[_0x9cfb3e][_0x3436bc(0x18c)][_0x3436bc(0x236)]||[];_0x544121[_0x3436bc(0x1e9)](_0x4b8c5e=>{if(!_0xdb2b25[_0x4b8c5e])_0xdb2b25[_0x4b8c5e]=[];_0xdb2b25[_0x4b8c5e]['push'](_0x9cfb3e);});}const _0x47aea1={};if(_0x349dbd)for(const _0x50fbc1 in _0x349dbd){const _0x2cf811=_0x349dbd[_0x50fbc1][_0x3436bc(0x18c)][_0x3436bc(0x236)]||[],_0x48b6ea=typeof _0x349dbd[_0x50fbc1]['common'][_0x3436bc(0x186)]===_0x3436bc(0x19c)?_0x349dbd[_0x50fbc1][_0x3436bc(0x18c)][_0x3436bc(0x186)]['de']:_0x349dbd[_0x50fbc1][_0x3436bc(0x18c)][_0x3436bc(0x186)];_0x2cf811[_0x3436bc(0x1e9)](_0x585491=>_0x47aea1[_0x585491]=_0x48b6ea);}const _0x426f8a=_0x974aa5[_0x3436bc(0x1bf)]||[],_0x14e1c2=_0x974aa5[_0x3436bc(0x1f7)]!==![],_0x102fc7=_0x974aa5[_0x3436bc(0x1a6)]!==![],_0x351a06=_0x974aa5[_0x3436bc(0xc8)]!==![],_0x5d2703=_0x974aa5[_0x3436bc(0x195)]===!![],_0x103b5c=_0x974aa5[_0x3436bc(0xdb)]===!![];for(const _0x1f4f10 in _0x1dd7b1){const _0xc00a1c=_0x1dd7b1[_0x1f4f10];if(_0xc00a1c[_0x3436bc(0xcb)]!==_0x3436bc(0x114)||!_0xc00a1c[_0x3436bc(0x18c)])continue;if(ADAPTER_BLACKLIST[_0x3436bc(0xed)](_0x305880=>_0x1f4f10[_0x3436bc(0x206)](_0x305880))&&!_0x103b5c)continue;const _0x489412=(_0xc00a1c['common'][_0x3436bc(0x209)]||'')[_0x3436bc(0xb7)]();let _0xcbab88=(typeof _0xc00a1c[_0x3436bc(0x18c)][_0x3436bc(0x186)]===_0x3436bc(0x19c)?_0xc00a1c[_0x3436bc(0x18c)][_0x3436bc(0x186)]['de']:_0xc00a1c[_0x3436bc(0x18c)][_0x3436bc(0x186)])||_0x1f4f10;const _0x5a3388=_0xcbab88[_0x3436bc(0xb7)]();let _0x124bbf=![],_0x4e630f=![];if(_0x426f8a['length']>0x0){const _0x3f04c5=_0xdb2b25[_0x1f4f10]||[],_0x2c0020=_0x1f4f10[_0x3436bc(0x20c)]('.')[_0x3436bc(0x21a)](0x0,-0x1)[_0x3436bc(0x150)]('.'),_0x2aba7c=_0xdb2b25[_0x2c0020]||[];(_0x3f04c5[_0x3436bc(0xed)](_0x5942a2=>_0x426f8a[_0x3436bc(0xe3)](_0x5942a2))||_0x2aba7c[_0x3436bc(0xed)](_0x4689b5=>_0x426f8a['includes'](_0x4689b5)))&&(_0x124bbf=!![],_0x4e630f=!![]);}if(!_0x124bbf&&!_0x103b5c){if(HARD_IGNORE_TERMS[_0x3436bc(0xed)](_0x59089d=>_0x1f4f10['includes'](_0x59089d)||_0x5a3388[_0x3436bc(0xe3)](_0x59089d[_0x3436bc(0xb7)]())))continue;}if(BAD_NAMES[_0x3436bc(0xed)](_0x313e10=>_0x5a3388===_0x313e10||_0x5a3388[_0x3436bc(0x151)]('.'+_0x313e10))){const _0x5bfd5f=_0x1f4f10['split']('.');if(_0x5bfd5f[_0x3436bc(0xfd)]>0x2){const _0x5da26c=_0x5bfd5f['slice'](0x0,-0x1)[_0x3436bc(0x150)]('.'),_0x1c94d4=_0x1dd7b1[_0x5da26c];if(_0x1c94d4&&_0x1c94d4[_0x3436bc(0x18c)]&&_0x1c94d4[_0x3436bc(0x18c)][_0x3436bc(0x186)]){const _0x45b3a5=typeof _0x1c94d4[_0x3436bc(0x18c)][_0x3436bc(0x186)]==='object'?_0x1c94d4[_0x3436bc(0x18c)][_0x3436bc(0x186)]['de']:_0x1c94d4['common']['name'];_0x45b3a5&&!_0xcbab88[_0x3436bc(0xe3)](_0x45b3a5)&&(_0xcbab88=_0x45b3a5+'\x20'+_0xcbab88);}}}let _0x29d482='';if(_0x14e1c2&&(_0x489412['includes']('motion')||_0x489412[_0x3436bc(0xe3)](_0x3436bc(0xce))||_0x5a3388['includes'](_0x3436bc(0x190))||_0x5a3388[_0x3436bc(0xe3)](_0x3436bc(0xdd))))_0x29d482=_0x3436bc(0x1f7);else{if(!_0x29d482&&_0x102fc7&&(_0x489412[_0x3436bc(0xe3)](_0x3436bc(0x174))||_0x489412['includes']('window')||_0x489412['includes'](_0x3436bc(0x156))||_0x489412[_0x3436bc(0xe3)](_0x3436bc(0x192))||_0x489412[_0x3436bc(0xe3)](_0x3436bc(0x197))||_0x5a3388['includes'](_0x3436bc(0x1f9))||_0x5a3388[_0x3436bc(0xe3)](_0x3436bc(0x18d))||_0x5a3388['includes'](_0x3436bc(0xab))))_0x29d482=_0x3436bc(0x174);else{if(!_0x29d482&&_0x351a06&&(_0x489412[_0x3436bc(0xe3)](_0x3436bc(0xb4))||_0x489412[_0x3436bc(0xe3)](_0x3436bc(0x14a))||_0x489412[_0x3436bc(0xe3)](_0x3436bc(0xaa))||_0x5a3388[_0x3436bc(0xe3)]('licht')||_0x5a3388['includes'](_0x3436bc(0x14d))||_0x5a3388['includes'](_0x3436bc(0x139)))){if(_0xc00a1c['common'][_0x3436bc(0xdc)]||_0x489412[_0x3436bc(0xe3)]('sensor'))_0x29d482=_0x3436bc(0xb4);}else{if(!_0x29d482&&_0x5d2703&&(_0x489412[_0x3436bc(0xe3)](_0x3436bc(0x195))||_0x489412[_0x3436bc(0xe3)](_0x3436bc(0x1f2))||_0x489412['includes']('thermostat')||_0x5a3388['includes'](_0x3436bc(0x125))||_0x5a3388['includes'](_0x3436bc(0x92))||_0x5a3388[_0x3436bc(0xe3)](_0x3436bc(0xfb))))_0x29d482=_0x3436bc(0x195);else{if(!_0x29d482&&_0x4e630f)_0x29d482='custom';}}}}if(_0x29d482){let _0x254772=_0x47aea1[_0x1f4f10]||'';if(!_0x254772){let _0x1cfbd1=_0x1f4f10;for(let _0x220b4f=0x0;_0x220b4f<0x3;_0x220b4f++){const _0x16bf4b=_0x1cfbd1[_0x3436bc(0xa1)]('.');if(_0x16bf4b===-0x1)break;_0x1cfbd1=_0x1cfbd1[_0x3436bc(0xe4)](0x0,_0x16bf4b);if(_0x47aea1[_0x1cfbd1]){_0x254772=_0x47aea1[_0x1cfbd1];break;}}}_0x5045d8['push']({'id':_0x1f4f10,'name':_0xcbab88,'location':_0x254772,'type':_0x29d482,'logDuplicates':_0x29d482===_0x3436bc(0x1f7),'isExit':![],'_score':_0x254772?0x50:_0x29d482===_0x3436bc(0x20b)?0x5a:0x28});}}return _0x5045d8[_0x3436bc(0xf6)]((_0x7dd8a6,_0x300df5)=>_0x300df5[_0x3436bc(0xe6)]-_0x7dd8a6[_0x3436bc(0xe6)]),_0x5045d8;}async function executeAutomationAction(_0x29077e){const _0x469218=a0_0x492e6a;try{const _0x39acbc=await _0x29077e[_0x469218(0x157)](_0x469218(0xbc)),_0x194910=await _0x29077e['getStateAsync'](_0x469218(0x217));if(_0x39acbc&&_0x39acbc[_0x469218(0x115)]&&_0x194910){const _0x2ffbcc=_0x39acbc[_0x469218(0x115)];let _0x21edd0=_0x194910[_0x469218(0x115)];try{_0x21edd0=JSON[_0x469218(0x162)](_0x21edd0);}catch(_0x3a24b0){}_0x29077e[_0x469218(0x240)][_0x469218(0x121)](_0x469218(0x8f)+_0x2ffbcc+_0x469218(0xa5)+_0x21edd0),await _0x29077e[_0x469218(0x1a0)](_0x2ffbcc,_0x21edd0);}else _0x29077e[_0x469218(0x240)][_0x469218(0x24b)](_0x469218(0x11e));}catch(_0xb18c09){_0x29077e['log'][_0x469218(0x207)](_0x469218(0x24d)+_0xb18c09[_0x469218(0xb6)]);}}function tryParse(_0x1f9663){try{return JSON['parse'](_0x1f9663);}catch(_0x2591da){return null;}}async function processSensorEvent(_0x40307f,_0x39174b,_0x4ec7ea,_0x1d2b2f){const _0x45fb6c=a0_0x492e6a;if(!_0x1d2b2f)return;const _0x22a046=_0x4ec7ea[_0x45fb6c(0x115)],_0x558ef6=Date[_0x45fb6c(0x15f)]();_0x40307f[_0x45fb6c(0x240)]['debug'](_0x45fb6c(0x21e)+_0x39174b+'\x20=\x20'+_0x22a046),_0x40307f[_0x45fb6c(0xe8)][_0x39174b]=_0x22a046;if(!_0x1d2b2f[_0x45fb6c(0x90)]&&_0x40307f[_0x45fb6c(0xdf)]&&_0x40307f[_0x45fb6c(0xdf)][_0x45fb6c(0xfd)]>0x0){const _0x25b2ab=_0x40307f[_0x45fb6c(0xdf)][0x0];if(_0x25b2ab['id']===_0x39174b&&_0x25b2ab['value']===_0x22a046){_0x40307f[_0x45fb6c(0x240)][_0x45fb6c(0x218)](_0x45fb6c(0xa2)+_0x1d2b2f['name']+_0x45fb6c(0x223)+_0x22a046+')');return;}}const _0x1be56c={'timestamp':_0x558ef6,'id':_0x39174b,'name':_0x1d2b2f[_0x45fb6c(0x186)],'type':_0x1d2b2f['type'],'location':_0x1d2b2f[_0x45fb6c(0x226)],'value':_0x22a046};_0x40307f[_0x45fb6c(0xdf)]['unshift'](_0x1be56c);if(_0x40307f[_0x45fb6c(0xdf)]['length']>HISTORY_MAX_SIZE)_0x40307f[_0x45fb6c(0xdf)]['pop']();await _0x40307f['setStateAsync']('events.lastEvent',{'val':JSON['stringify'](_0x1be56c),'ack':!![]}),await _0x40307f[_0x45fb6c(0xa3)](_0x45fb6c(0x15b),{'val':JSON[_0x45fb6c(0x19d)](_0x40307f[_0x45fb6c(0xdf)]),'ack':!![]});_0x40307f['isProVersion']&&(_0x40307f[_0x45fb6c(0x1ee)][_0x45fb6c(0x1a2)](_0x1be56c),await saveRawEventLog(_0x40307f));if(_0x1d2b2f['isExit']&&_0x22a046===!![]){if(_0x40307f['isPresent']&&!_0x40307f[_0x45fb6c(0x221)])_0x40307f[_0x45fb6c(0x240)][_0x45fb6c(0x121)](_0x45fb6c(0x187)+_0x1d2b2f['name']+_0x45fb6c(0x18b)),startExitTimer(_0x40307f);else!_0x40307f[_0x45fb6c(0x241)]&&(_0x40307f[_0x45fb6c(0x240)][_0x45fb6c(0x121)](_0x45fb6c(0x11b)+_0x1d2b2f[_0x45fb6c(0x186)]+'.\x20Welcome\x20home.'),await setPresence(_0x40307f,!![]));}else _0x1d2b2f[_0x45fb6c(0xcb)]==='motion'&&_0x22a046===!![]&&(_0x40307f[_0x45fb6c(0xc1)]&&(_0x40307f[_0x45fb6c(0x240)][_0x45fb6c(0x121)](_0x45fb6c(0x232)),abortExitTimer(_0x40307f)),!_0x40307f[_0x45fb6c(0x241)]&&_0x40307f[_0x45fb6c(0x176)]===SYSTEM_MODES['NORMAL']&&await setPresence(_0x40307f,!![]));}async function runGeminiAnalysis(_0x6af108,_0x33badd=''){const _0x2d4cd6=a0_0x492e6a;if(!_0x6af108[_0x2d4cd6(0x1eb)])return;if(_0x6af108['eventHistory'][_0x2d4cd6(0xfd)]===0x0)return;const _0x54c942=_0x6af108[_0x2d4cd6(0xdf)][_0x2d4cd6(0x21a)](0x0,0xf),_0x6cbe8b=await getWeatherContext(_0x6af108),_0x472c18=_0x6af108[_0x2d4cd6(0x176)],_0x14b0b9=PERSONA_MAPPING[_0x6af108[_0x2d4cd6(0x1c0)][_0x2d4cd6(0x1e4)]||'generic'],_0x44ca47=_0x6af108[_0x2d4cd6(0x1c0)]['livingContext']||'Keine\x20Details.';let _0x5e5406=![];try{const _0x369f9f=await _0x6af108[_0x2d4cd6(0x157)]('analysis.automation.autoApply');if(_0x369f9f&&_0x369f9f[_0x2d4cd6(0x115)])_0x5e5406=!![];}catch(_0x340341){}const _0x5500b2='\x0a\x20\x20\x20\x20ROLLE:\x20KI-Hausverwalter\x20&\x20Gesundheits-Assistent.\x0a\x20\x20\x20\x20PERSONA:\x20'+_0x14b0b9+'.\x0a\x20\x20\x20\x20KONTEXT:\x20'+_0x44ca47+_0x2d4cd6(0x91)+_0x472c18+_0x2d4cd6(0x1cc)+_0x6cbe8b+'.\x0a\x20\x20\x20\x20NOTFALL-KONTEXT:\x20'+(_0x33badd||'Keiner')+_0x2d4cd6(0x198)+JSON[_0x2d4cd6(0x19d)](_0x54c942)+'\x0a\x0a\x20\x20\x20\x20AUFGABE:\x0a\x20\x20\x20\x201.\x20Analysiere\x20auf\x20Gesundheitsrisiken\x20(Sturz,\x20InaktivitÃ¤t).\x0a\x20\x20\x20\x202.\x20Analysiere\x20auf\x20Komfort/Automatisierung\x20(\x22Butler\x22).\x20Erkennst\x20du\x20ein\x20Muster?\x20(z.B.\x20\x22Wenn\x20Bewegung\x20Flur,\x20dann\x20Licht\x20an\x22).\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20FORMAT\x20(JSON\x20Only!):\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22isAlert\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22alertReason\x22:\x20\x22string\x20(kurz)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22isEmergency\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22summary\x22:\x20\x22string\x20(Was\x20passiert\x20gerade?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22automationProposal\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22detected\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22string\x20(Was\x20soll\x20automatisiert\x20werden?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetId\x22:\x20\x22string\x20(ioBroker\x20ID,\x20z.B.\x200_userdata.0.light)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetValue\x22:\x20\x22any\x20(Wert,\x20z.B.\x20true\x20oder\x2050)\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20';try{const _0x30d938=await _0x6af108[_0x2d4cd6(0x1eb)][_0x2d4cd6(0x220)](_0x5500b2),_0x34b590=_0x30d938[_0x2d4cd6(0x1af)][_0x2d4cd6(0x16f)]()['replace'](/```json|```/g,'')[_0x2d4cd6(0x1c3)](),_0x5ec2ed=JSON[_0x2d4cd6(0x162)](_0x34b590);await _0x6af108[_0x2d4cd6(0xa3)]('analysis.lastResult',{'val':JSON[_0x2d4cd6(0x19d)](_0x5ec2ed),'ack':!![]});const _0x23f22b=_0x5ec2ed['isAlert']||![];_0x23f22b!==_0x6af108[_0x2d4cd6(0x1fb)]&&(await _0x6af108[_0x2d4cd6(0xa3)](_0x2d4cd6(0x1c8),{'val':_0x23f22b,'ack':!![]}),_0x6af108['lastAlertState']=_0x23f22b,_0x23f22b&&(await _0x6af108[_0x2d4cd6(0xa3)]('analysis.alertReason',{'val':_0x5ec2ed[_0x2d4cd6(0x1ce)],'ack':!![]}),sendNotification(_0x6af108,_0x2d4cd6(0x131)+_0x5ec2ed['alertReason'],![],_0x5ec2ed[_0x2d4cd6(0x1c1)]))),_0x5ec2ed['automationProposal']&&_0x5ec2ed[_0x2d4cd6(0xc4)][_0x2d4cd6(0x101)]&&_0x5ec2ed[_0x2d4cd6(0xc4)][_0x2d4cd6(0xc5)]&&(_0x6af108['log']['info']('ðŸ¤–\x20BUTLER\x20PROPOSAL:\x20'+_0x5ec2ed[_0x2d4cd6(0xc4)][_0x2d4cd6(0xbe)]),await _0x6af108[_0x2d4cd6(0xa3)](_0x2d4cd6(0x170),{'val':!![],'ack':!![]}),await _0x6af108[_0x2d4cd6(0xa3)](_0x2d4cd6(0x1f0),{'val':_0x5ec2ed[_0x2d4cd6(0xc4)][_0x2d4cd6(0xbe)],'ack':!![]}),await _0x6af108['setStateAsync']('analysis.automation.targetId',{'val':_0x5ec2ed[_0x2d4cd6(0xc4)]['targetId'],'ack':!![]}),await _0x6af108[_0x2d4cd6(0xa3)](_0x2d4cd6(0x217),{'val':JSON[_0x2d4cd6(0x19d)](_0x5ec2ed['automationProposal']['targetValue']),'ack':!![]}),_0x5e5406&&(_0x6af108[_0x2d4cd6(0x240)]['info'](_0x2d4cd6(0x9b)+_0x5ec2ed[_0x2d4cd6(0xc4)][_0x2d4cd6(0xc5)]+_0x2d4cd6(0x1d4)),await executeAutomationAction(_0x6af108)));}catch(_0x4a7d80){_0x6af108[_0x2d4cd6(0x240)][_0x2d4cd6(0x207)](_0x2d4cd6(0x242)+_0x4a7d80['message']);}}function startPythonService(_0x263ff0){const _0x3bba9f=a0_0x492e6a;try{const _0xf134e8=path[_0x3bba9f(0x150)](__dirname,_0x3bba9f(0x1aa),_0x3bba9f(0x212));_0x263ff0[_0x3bba9f(0x240)][_0x3bba9f(0x121)](_0x3bba9f(0x1d3)+_0xf134e8),_0x263ff0[_0x3bba9f(0x1b8)]=spawn(_0x3bba9f(0x1e8),[_0xf134e8]),_0x263ff0[_0x3bba9f(0x1b8)][_0x3bba9f(0x238)]['on'](_0x3bba9f(0x175),_0x1e85a6=>{const _0x14dd64=_0x3bba9f,_0x31c3b0=_0x1e85a6[_0x14dd64(0x1e3)]()[_0x14dd64(0x1c3)]();_0x263ff0['log']['debug']('[PYTHON]\x20'+_0x31c3b0);}),_0x263ff0[_0x3bba9f(0x1b8)][_0x3bba9f(0x13f)]['on'](_0x3bba9f(0x175),_0x8372a4=>{const _0x1a24d3=_0x3bba9f,_0x3fc7ce=_0x8372a4[_0x1a24d3(0x1e3)]()[_0x1a24d3(0x1c3)]();_0x263ff0[_0x1a24d3(0x240)][_0x1a24d3(0x207)](_0x1a24d3(0xd1)+_0x3fc7ce);}),_0x263ff0[_0x3bba9f(0x1b8)]['on'](_0x3bba9f(0x179),_0x22f5ab=>{const _0x289ce9=_0x3bba9f;_0x263ff0[_0x289ce9(0x240)][_0x289ce9(0x121)](_0x289ce9(0x98)+_0x22f5ab),_0x263ff0[_0x289ce9(0x1b8)]=null;}),_0x263ff0[_0x3bba9f(0x1b8)]['on']('error',_0x53d2c0=>{const _0x5461c4=_0x3bba9f;_0x263ff0[_0x5461c4(0x240)][_0x5461c4(0x24b)](_0x5461c4(0x229)+_0x53d2c0[_0x5461c4(0xb6)]);});}catch(_0x8d92bc){_0x263ff0[_0x3bba9f(0x240)][_0x3bba9f(0x207)](_0x3bba9f(0x14f)+_0x8d92bc['message']);}}function stopPythonService(_0x29cdda){const _0x5cf963=a0_0x492e6a;if(_0x29cdda[_0x5cf963(0x1b8)]){_0x29cdda[_0x5cf963(0x240)][_0x5cf963(0x121)]('ðŸ\x20Stopping\x20Python\x20Sidecar...');try{_0x29cdda[_0x5cf963(0x1b8)][_0x5cf963(0x1c2)]();}catch(_0x16975c){_0x29cdda['log'][_0x5cf963(0x24b)](_0x5cf963(0xd7)+_0x16975c[_0x5cf963(0xb6)]);}_0x29cdda['pythonProcess']=null;}}class CogniLiving extends utils[a0_0x492e6a(0x127)]{constructor(_0x30f2a2){const _0x1b70b8=a0_0x492e6a;super({..._0x30f2a2,'name':_0x1b70b8(0x1da)}),this['eventHistory']=[],this['analysisHistory']=[],this['feedbackHistory']=[],this[_0x1b70b8(0x1ee)]=[],this[_0x1b70b8(0x1df)]=[],this['sensorLastValues']={},this[_0x1b70b8(0x10a)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x1b70b8(0x241)]=!![],this[_0x1b70b8(0xc1)]=null,this[_0x1b70b8(0x1d9)]=null,this[_0x1b70b8(0x221)]=![],this[_0x1b70b8(0x16b)]=null,this['geminiModel']=null,this[_0x1b70b8(0x176)]=SYSTEM_MODES[_0x1b70b8(0x22b)],this['isProVersion']=![],this['lastAlertState']=![],this['systemUUID']=_0x1b70b8(0xd5),this[_0x1b70b8(0x106)]=null,this[_0x1b70b8(0x193)]=null,this[_0x1b70b8(0x22c)]=null,this[_0x1b70b8(0x1d6)]=null,this[_0x1b70b8(0x128)]=null,this['pythonProcess']=null,this['on']('ready',this[_0x1b70b8(0x204)]['bind'](this)),this['on'](_0x1b70b8(0x1e1),this[_0x1b70b8(0x17f)][_0x1b70b8(0x159)](this)),this['on']('unload',this[_0x1b70b8(0x10e)]['bind'](this)),this['on'](_0x1b70b8(0xb6),this[_0x1b70b8(0x10f)]['bind'](this));}async[a0_0x492e6a(0x204)](){const _0x1d1ad5=a0_0x492e6a;this[_0x1d1ad5(0x240)][_0x1d1ad5(0x121)](_0x1d1ad5(0xa4)+this[_0x1d1ad5(0x13a)]+_0x1d1ad5(0x138)),await initZombies(this),this[_0x1d1ad5(0x1c0)][_0x1d1ad5(0x117)]=this[_0x1d1ad5(0x1c0)]['licenseKey']||'';try{this[_0x1d1ad5(0xa0)]=await checkLicense(this,this['config']['licenseKey']);}catch(_0x341da1){}if(!this[_0x1d1ad5(0x1c0)]['inactivityThresholdHours']||this[_0x1d1ad5(0x1c0)][_0x1d1ad5(0x11f)]<0.1)this['config'][_0x1d1ad5(0x11f)]=0xc;await initHistory(this),await initSystemConfig(this);if(this[_0x1d1ad5(0x1c0)]['geminiApiKey'])try{this['genAI']=new GoogleGenerativeAI(this['config'][_0x1d1ad5(0xd9)]),this[_0x1d1ad5(0x1eb)]=this['genAI']['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x1d1ad5(0x240)]['info'](_0x1d1ad5(0xff));}catch(_0x1706f0){this[_0x1d1ad5(0x240)][_0x1d1ad5(0x207)](_0x1d1ad5(0x1de)+_0x1706f0[_0x1d1ad5(0xb6)]);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this[_0x1d1ad5(0x146)](_0x1d1ad5(0x1c5)),this[_0x1d1ad5(0x146)](LTM_DP_TRIGGER_DIGEST),this[_0x1d1ad5(0x146)]('system.mode'),this[_0x1d1ad5(0x146)](_0x1d1ad5(0x200)),this[_0x1d1ad5(0x146)](_0x1d1ad5(0xb2)),this['subscribeStates'](_0x1d1ad5(0x181)),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this),setTimeout(()=>checkWifiPresence(this),0x1388);if(this[_0x1d1ad5(0x106)])clearInterval(this[_0x1d1ad5(0x106)]);const _0x5efd54=this[_0x1d1ad5(0x1c0)][_0x1d1ad5(0x1b9)]||0xf;_0x5efd54>0x0&&(this[_0x1d1ad5(0x240)]['info'](_0x1d1ad5(0x172)+_0x5efd54+_0x1d1ad5(0x1f1)),this[_0x1d1ad5(0x106)]=setInterval(()=>{runAutopilot(this);},_0x5efd54*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this),startPythonService(this);}['onUnload'](_0x582f4a){const _0x2128a0=a0_0x492e6a;if(this[_0x2128a0(0x106)])clearInterval(this[_0x2128a0(0x106)]);if(this[_0x2128a0(0x1d6)])clearInterval(this[_0x2128a0(0x1d6)]);if(this[_0x2128a0(0x193)])this[_0x2128a0(0x193)][_0x2128a0(0xc2)]();if(this['modeResetJob'])this[_0x2128a0(0x22c)][_0x2128a0(0xc2)]();if(this['briefingJob'])this['briefingJob'][_0x2128a0(0xc2)]();if(this[_0x2128a0(0xc1)])clearTimeout(this[_0x2128a0(0xc1)]);if(this[_0x2128a0(0x1d9)])clearTimeout(this[_0x2128a0(0x1d9)]);stopPythonService(this),_0x582f4a();}async['onStateChange'](_0x5a0e2f,_0x4a3af3){const _0x54990d=a0_0x492e6a;if(!_0x4a3af3)return;if(_0x5a0e2f[_0x54990d(0xe3)](_0x54990d(0x1a5))&&_0x5a0e2f[_0x54990d(0x151)](_0x54990d(0x1bc))&&_0x4a3af3[_0x54990d(0x115)]){await handleTelegramResponse(this,_0x4a3af3['val']);return;}if(_0x5a0e2f===this[_0x54990d(0x17e)]+'.'+SYSTEM_DP_MODE){_0x4a3af3['val']&&Object['values'](SYSTEM_MODES)[_0x54990d(0xe3)](_0x4a3af3['val'])&&(this[_0x54990d(0x176)]=_0x4a3af3[_0x54990d(0x115)],_0x4a3af3[_0x54990d(0x115)]===SYSTEM_MODES[_0x54990d(0x154)]?await setPresence(this,![]):await setPresence(this,!![]));if(!_0x4a3af3[_0x54990d(0x1f6)])this[_0x54990d(0x96)](_0x5a0e2f,{'val':this[_0x54990d(0x176)],'ack':!![]});return;}if(!_0x4a3af3[_0x54990d(0x1f6)]){_0x5a0e2f['includes']('analysis.trigger')&&_0x4a3af3[_0x54990d(0x115)]&&(this[_0x54990d(0x96)](_0x5a0e2f,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x5a0e2f[_0x54990d(0xe3)](_0x54990d(0x8e))&&_0x4a3af3[_0x54990d(0x115)]){this[_0x54990d(0x96)](_0x5a0e2f,{'val':![],'ack':!![]});if(this[_0x54990d(0xa0)])createDailyDigest(this);}_0x5a0e2f['includes'](_0x54990d(0x113))&&_0x4a3af3[_0x54990d(0x115)]&&(this[_0x54990d(0x96)](_0x5a0e2f,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x5a0e2f[_0x54990d(0xe3)](_0x54990d(0x97))&&_0x4a3af3[_0x54990d(0x115)]&&(this[_0x54990d(0x96)](_0x5a0e2f,{'val':![],'ack':!![]}),executeAutomationAction(this));return;}if(this[_0x54990d(0x1c0)][_0x54990d(0x136)]&&this[_0x54990d(0x1c0)]['presenceDevices'][_0x54990d(0xe3)](_0x5a0e2f)){await checkWifiPresence(this);return;}const _0x450eef=(this['config'][_0x54990d(0xb8)]||[])[_0x54990d(0xd3)](_0x195f8e=>_0x195f8e['id']===_0x5a0e2f);if(_0x450eef)processSensorEvent(this,_0x5a0e2f,_0x4a3af3,_0x450eef);}async[a0_0x492e6a(0x10f)](_0x1bfdfc){const _0x28f168=a0_0x492e6a;if(typeof _0x1bfdfc==='object'&&_0x1bfdfc[_0x28f168(0xb6)])try{if(_0x1bfdfc[_0x28f168(0x1ac)]===_0x28f168(0x108)){}else{if(_0x1bfdfc[_0x28f168(0x1ac)]==='testNotification'){}else{if(_0x1bfdfc[_0x28f168(0x1ac)]===_0x28f168(0x15d)){if(!this[_0x28f168(0xa0)])return this[_0x28f168(0xf8)](_0x1bfdfc['from'],_0x1bfdfc[_0x28f168(0x1ac)],{'success':![],'isPro':![]},_0x1bfdfc[_0x28f168(0x23c)]);let _0x76d898={'status':_0x28f168(0x1a4),'details':'','lastCheck':0x0};try{_0x76d898[_0x28f168(0xf2)]=(await this['getStateAsync'](LTM_DP_DRIFT_STATUS))[_0x28f168(0x115)],_0x76d898[_0x28f168(0xfa)]=(await this['getStateAsync'](LTM_DP_DRIFT_DETAILS))[_0x28f168(0x115)],_0x76d898[_0x28f168(0x23a)]=(await this[_0x28f168(0x157)](LTM_DP_DRIFT_LAST_CHECK))[_0x28f168(0x115)];}catch(_0x5e71b2){}const _0x3bacfa=this['analysisHistory']||[];this[_0x28f168(0xf8)](_0x1bfdfc[_0x28f168(0x1b5)],_0x1bfdfc['command'],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x76d898,'analysisHistory':_0x3bacfa},_0x1bfdfc[_0x28f168(0x23c)]);}else{if(_0x1bfdfc[_0x28f168(0x1ac)]===_0x28f168(0x100)){const _0x2853fa=this['dailyDigests'][_0x28f168(0xfd)],_0x2f65dc=new Date(),_0x34f999=new Date(_0x2f65dc[_0x28f168(0x1d8)](),_0x2f65dc['getMonth'](),_0x2f65dc[_0x28f168(0x222)]())[_0x28f168(0xfc)](),_0x319029=this[_0x28f168(0x1ee)][_0x28f168(0x14c)](_0x35494c=>new Date(_0x35494c[_0x28f168(0x1fe)])[_0x28f168(0xfc)]()>_0x34f999)[_0x28f168(0xfd)],_0x1fbbd5=new Array(0x18)[_0x28f168(0xd8)](0x0);this[_0x28f168(0x1ee)][_0x28f168(0x1e9)](_0x32c7eb=>{const _0x4b42c3=_0x28f168,_0x29a4b9=new Date(_0x32c7eb[_0x4b42c3(0x1fe)]);if(_0x29a4b9[_0x4b42c3(0xfc)]()>_0x34f999)_0x1fbbd5[_0x29a4b9[_0x4b42c3(0x14e)]()]++;});let _0x1fc521={'status':'N/A'};try{_0x1fc521[_0x28f168(0xf2)]=(await this[_0x28f168(0x157)](LTM_DP_DRIFT_STATUS))[_0x28f168(0x115)];}catch(_0x5986da){}let _0x226bed='';try{const _0x33be9a=await this['getStateAsync'](_0x28f168(0x22d));_0x226bed=_0x33be9a?_0x33be9a['val']:'';}catch(_0x2d347c){}let _0x3effca=null;!this[_0x28f168(0x1eb)]&&(_0x3effca=this[_0x28f168(0x1c0)][_0x28f168(0xd9)]?'KI-Modell\x20nicht\x20initialisiert':_0x28f168(0xe7));let _0x22a595={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x574466=await this[_0x28f168(0x157)](_0x28f168(0x170)),_0x3a9eb1=await this[_0x28f168(0x157)](_0x28f168(0x1f0)),_0x1249f9=await this[_0x28f168(0x157)]('analysis.automation.targetId'),_0x23545c=await this['getStateAsync'](_0x28f168(0x217)),_0x59e1f3=await this[_0x28f168(0x157)](_0x28f168(0x181));_0x574466&&_0x574466[_0x28f168(0x115)]&&(_0x22a595[_0x28f168(0x101)]=!![],_0x22a595[_0x28f168(0xbe)]=_0x3a9eb1?_0x3a9eb1[_0x28f168(0x115)]:'',_0x22a595[_0x28f168(0xc5)]=_0x1249f9?_0x1249f9[_0x28f168(0x115)]:'',_0x22a595['targetValue']=_0x23545c?_0x23545c[_0x28f168(0x115)]:''),_0x22a595[_0x28f168(0x1fc)]=_0x59e1f3?!!_0x59e1f3[_0x28f168(0x115)]:![];}catch(_0x38f5b9){}this['sendTo'](_0x1bfdfc[_0x28f168(0x1b5)],_0x1bfdfc['command'],{'success':!![],'eventHistory':this[_0x28f168(0xdf)]['slice'](0x0,0xf),'stats':{'digestCount':_0x2853fa,'eventCountToday':_0x319029,'hourlyActivity':_0x1fbbd5,'driftStatus':_0x1fc521[_0x28f168(0xf2)],'isPresent':this[_0x28f168(0x241)],'presenceWho':_0x226bed,'minDays':this[_0x28f168(0x1c0)][_0x28f168(0x13d)]||0x7,'stbDays':this[_0x28f168(0x1c0)][_0x28f168(0x23d)]||0xe,'ltbDays':this[_0x28f168(0x1c0)][_0x28f168(0x184)]||0x3c,'systemError':_0x3effca},'automation':_0x22a595},_0x1bfdfc[_0x28f168(0x23c)]);}else{if(_0x1bfdfc['command']===_0x28f168(0xe5)){const _0x3784a4=await this['getForeignObjectsAsync']('enum.functions.*',_0x28f168(0xe1)),_0x566551=[];if(_0x3784a4)for(const _0x57d27f in _0x3784a4){const _0x585033=_0x3784a4[_0x57d27f],_0x9ec39c=(_0x585033[_0x28f168(0x18c)]&&typeof _0x585033['common'][_0x28f168(0x186)]==='object'?_0x585033['common'][_0x28f168(0x186)]['de']:_0x585033[_0x28f168(0x18c)][_0x28f168(0x186)])||_0x585033[_0x28f168(0x18c)][_0x28f168(0x186)];_0x566551[_0x28f168(0x1a2)]({'id':_0x57d27f,'name':_0x9ec39c});}this[_0x28f168(0xf8)](_0x1bfdfc['from'],_0x1bfdfc[_0x28f168(0x1ac)],{'success':!![],'enums':_0x566551},_0x1bfdfc['callback']);}else{if(_0x1bfdfc[_0x28f168(0x1ac)]===_0x28f168(0xbf))try{const _0x1d4843=await scanForDevices(this,_0x1bfdfc[_0x28f168(0xb6)]||{});this[_0x28f168(0xf8)](_0x1bfdfc['from'],_0x1bfdfc[_0x28f168(0x1ac)],{'success':!![],'devices':_0x1d4843},_0x1bfdfc['callback']);}catch(_0x467c45){this[_0x28f168(0xf8)](_0x1bfdfc[_0x28f168(0x1b5)],_0x1bfdfc[_0x28f168(0x1ac)],{'success':![],'error':_0x467c45[_0x28f168(0xb6)]},_0x1bfdfc[_0x28f168(0x23c)]);}else{if(_0x1bfdfc[_0x28f168(0x1ac)]===_0x28f168(0x22a)){const _0x3b4453=_0x1bfdfc[_0x28f168(0xb6)][_0x28f168(0x1dc)];if(!_0x3b4453)return this[_0x28f168(0xf8)](_0x1bfdfc[_0x28f168(0x1b5)],_0x1bfdfc[_0x28f168(0x1ac)],{'success':![],'error':'No\x20instance'},_0x1bfdfc[_0x28f168(0x23c)]);const _0x4abb81=await getCalendarNames(this,_0x3b4453);this['sendTo'](_0x1bfdfc[_0x28f168(0x1b5)],_0x1bfdfc[_0x28f168(0x1ac)],{'success':!![],'names':_0x4abb81},_0x1bfdfc[_0x28f168(0x23c)]);}else{if(_0x1bfdfc[_0x28f168(0x1ac)]===_0x28f168(0x23f)){const {targetId:_0x345a0e,targetValue:_0x598897}=_0x1bfdfc[_0x28f168(0xb6)];this[_0x28f168(0x240)]['info'](_0x28f168(0xb3)+_0x345a0e+'\x20=\x20'+_0x598897),await this[_0x28f168(0xa3)](_0x28f168(0x170),{'val':!![],'ack':!![]}),await this[_0x28f168(0xa3)](_0x28f168(0x1f0),{'val':'SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20'+_0x345a0e,'ack':!![]}),await this[_0x28f168(0xa3)](_0x28f168(0xbc),{'val':_0x345a0e,'ack':!![]}),await this[_0x28f168(0xa3)]('analysis.automation.targetValue',{'val':_0x598897,'ack':!![]}),this[_0x28f168(0xf8)](_0x1bfdfc[_0x28f168(0x1b5)],_0x1bfdfc[_0x28f168(0x1ac)],{'success':!![]},_0x1bfdfc[_0x28f168(0x23c)]);}else{if(_0x1bfdfc[_0x28f168(0x1ac)]===_0x28f168(0x219)){const {historyId:_0x544e3e,rating:_0x47c905,comment:_0x2738a7,alertReason:_0x39d4b3}=_0x1bfdfc[_0x28f168(0xb6)];_0x544e3e&&_0x47c905?(await saveFeedback(this,{'timestamp':Date[_0x28f168(0x15f)](),'historyId':_0x544e3e,'rating':_0x47c905,'comment':_0x2738a7,'alertReason':_0x39d4b3}),this['sendTo'](_0x1bfdfc['from'],_0x1bfdfc[_0x28f168(0x1ac)],{'success':!![]},_0x1bfdfc[_0x28f168(0x23c)])):this[_0x28f168(0xf8)](_0x1bfdfc[_0x28f168(0x1b5)],_0x1bfdfc[_0x28f168(0x1ac)],{'success':![],'error':_0x28f168(0x20a)},_0x1bfdfc[_0x28f168(0x23c)]);}else _0x1bfdfc[_0x28f168(0x1ac)]==='dismissAutomation'&&(this[_0x28f168(0x240)][_0x28f168(0x121)](_0x28f168(0x177)),await this[_0x28f168(0xa3)](_0x28f168(0x170),{'val':![],'ack':!![]}),await this[_0x28f168(0xa3)](_0x28f168(0x1f0),{'val':'','ack':!![]}),this[_0x28f168(0xf8)](_0x1bfdfc[_0x28f168(0x1b5)],_0x1bfdfc['command'],{'success':!![]},_0x1bfdfc[_0x28f168(0x23c)]));}}}}}}}}}catch(_0x490645){this['log'][_0x28f168(0x207)](_0x28f168(0x132)+_0x1bfdfc[_0x28f168(0x1ac)]+':\x20'+_0x490645[_0x28f168(0xb6)]);if(_0x1bfdfc['callback'])this[_0x28f168(0xf8)](_0x1bfdfc[_0x28f168(0x1b5)],_0x1bfdfc[_0x28f168(0x1ac)],{'success':![],'error':_0x490645[_0x28f168(0xb6)]},_0x1bfdfc[_0x28f168(0x23c)]);}}}if(require['main']!==module)module[a0_0x492e6a(0x237)]=_0x1f251e=>new CogniLiving(_0x1f251e);else new CogniLiving();