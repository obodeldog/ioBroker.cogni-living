const a0_0x4d74c2=a0_0x5d96;(function(_0x1588dd,_0x417017){const _0xd43e6b=a0_0x5d96,_0x1c0d37=_0x1588dd();while(!![]){try{const _0x203280=parseInt(_0xd43e6b(0x228))/0x1*(-parseInt(_0xd43e6b(0x273))/0x2)+-parseInt(_0xd43e6b(0x2b2))/0x3*(-parseInt(_0xd43e6b(0x21c))/0x4)+-parseInt(_0xd43e6b(0x274))/0x5*(-parseInt(_0xd43e6b(0x2b4))/0x6)+-parseInt(_0xd43e6b(0x2f1))/0x7+-parseInt(_0xd43e6b(0x23c))/0x8*(parseInt(_0xd43e6b(0x1e7))/0x9)+-parseInt(_0xd43e6b(0x258))/0xa+parseInt(_0xd43e6b(0x2c6))/0xb*(parseInt(_0xd43e6b(0x1ff))/0xc);if(_0x203280===_0x417017)break;else _0x1c0d37['push'](_0x1c0d37['shift']());}catch(_0x6ac38b){_0x1c0d37['push'](_0x1c0d37['shift']());}}}(a0_0x12c5,0xe2845));const a0_0xbb86f2=(function(){let _0x3fe168=!![];return function(_0x5db898,_0x225be9){const _0x58d8b0=_0x3fe168?function(){const _0x20951e=a0_0x5d96;if(_0x225be9){const _0x4f40e2=_0x225be9[_0x20951e(0x1d1)](_0x5db898,arguments);return _0x225be9=null,_0x4f40e2;}}:function(){};return _0x3fe168=![],_0x58d8b0;};}()),a0_0x1ec6b6=a0_0xbb86f2(this,function(){const _0x378f2f=a0_0x5d96;return a0_0x1ec6b6['toString']()[_0x378f2f(0x1d5)](_0x378f2f(0x2a3))[_0x378f2f(0x22a)]()[_0x378f2f(0x287)](a0_0x1ec6b6)['search']('(((.+)+)+)+$');});a0_0x1ec6b6();'use strict';const utils=require(a0_0x4d74c2(0x2de)),{GoogleGenerativeAI}=require(a0_0x4d74c2(0x325)),{spawn}=require(a0_0x4d74c2(0x1e8)),path=require(a0_0x4d74c2(0x1d6)),fs=require('fs'),installer=require(a0_0x4d74c2(0x2ee)),scanner=require('./lib/scanner'),schedulers=require(a0_0x4d74c2(0x2fb)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x4d74c2(0x209),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST=a0_0x4d74c2(0x31a),LTM_DP_BASELINE_STATUS=a0_0x4d74c2(0x1cd),LTM_DP_DRIFT_CHANNEL=a0_0x4d74c2(0x1f8),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS=a0_0x4d74c2(0x270),LTM_DP_DRIFT_LAST_CHECK=a0_0x4d74c2(0x2d1),SYSTEM_DP_MODE=a0_0x4d74c2(0x30d),SYSTEM_MODES={'NORMAL':a0_0x4d74c2(0x1b1),'VACATION':a0_0x4d74c2(0x307),'PARTY':a0_0x4d74c2(0x1f5),'GUEST':a0_0x4d74c2(0x2b9)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x4d74c2(0x2ca)],SYSTEM_MODES[a0_0x4d74c2(0x265)]],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0x4d74c2(0x22c),'family':a0_0x4d74c2(0x27b),'single_comfort':a0_0x4d74c2(0x2fa),'security':a0_0x4d74c2(0x1d0)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x58169d){const _0x2846b7=a0_0x4d74c2;try{const _0x349fc1=[_0x2846b7(0x249),_0x2846b7(0x289)];for(const _0x511b51 of _0x349fc1){try{const _0x249432=await _0x58169d[_0x2846b7(0x2ef)](_0x511b51);if(_0x249432)await _0x58169d[_0x2846b7(0x1fe)](_0x511b51);}catch(_0x48ce65){}}}catch(_0x5b28a5){}}async function checkLicense(_0x42ff12){return!![];}function a0_0x5d96(_0x47bcfd,_0x16fcf4){const _0x557d17=a0_0x12c5();return a0_0x5d96=function(_0x1ec6b6,_0xbb86f2){_0x1ec6b6=_0x1ec6b6-0x1a3;let _0x12c585=_0x557d17[_0x1ec6b6];return _0x12c585;},a0_0x5d96(_0x47bcfd,_0x16fcf4);}async function initHistory(_0x2dc35f){const _0x20e02f=a0_0x4d74c2;try{const _0x221e0e=await _0x2dc35f['getStateAsync'](_0x20e02f(0x29f));_0x221e0e&&_0x221e0e[_0x20e02f(0x2eb)]&&(_0x2dc35f['eventHistory']=JSON[_0x20e02f(0x1ae)](_0x221e0e[_0x20e02f(0x2eb)][_0x20e02f(0x22a)]()));}catch(_0x218d7d){_0x2dc35f['eventHistory']=[];}try{const _0x120053=await _0x2dc35f[_0x20e02f(0x1ed)](_0x20e02f(0x328));if(_0x120053&&_0x120053[_0x20e02f(0x2eb)])_0x2dc35f[_0x20e02f(0x21e)]=JSON[_0x20e02f(0x1ae)](_0x120053['val']['toString']());}catch(_0x4bcb85){_0x2dc35f[_0x20e02f(0x21e)]=[];}if(_0x2dc35f[_0x20e02f(0x2a0)]&&_0x2dc35f[_0x20e02f(0x2a0)]['length']>0x0){_0x2dc35f['log'][_0x20e02f(0x2cc)](_0x20e02f(0x1d7));for(let _0x3fb76d=_0x2dc35f[_0x20e02f(0x2a0)][_0x20e02f(0x31f)]-0x1;_0x3fb76d>=0x0;_0x3fb76d--){const _0x363066=_0x2dc35f[_0x20e02f(0x2a0)][_0x3fb76d];if(_0x363066&&_0x363066['id']!==undefined&&_0x363066['value']!==undefined)_0x2dc35f[_0x20e02f(0x1e9)][_0x363066['id']]=_0x363066['value'];}}}async function initSystemConfig(_0x1bcb4d){const _0x39051b=a0_0x4d74c2;try{const _0x2dfd09=await _0x1bcb4d[_0x39051b(0x2bb)](_0x39051b(0x246));if(_0x2dfd09&&_0x2dfd09[_0x39051b(0x327)])_0x1bcb4d[_0x39051b(0x1dc)]={'latitude':_0x2dfd09['common'][_0x39051b(0x2d9)]||0x0,'longitude':_0x2dfd09[_0x39051b(0x327)][_0x39051b(0x2f5)]||0x0,'city':_0x2dfd09[_0x39051b(0x327)][_0x39051b(0x27d)]||''};}catch(_0x5b26d5){}}async function createAllObjects(_0x317682){const _0x573632=a0_0x4d74c2;await _0x317682[_0x573632(0x1cf)](_0x573632(0x27a),{'type':_0x573632(0x1a6),'common':{'name':'System'},'native':{}}),await _0x317682[_0x573632(0x1cf)](SYSTEM_DP_MODE,{'type':_0x573632(0x2bc),'common':{'name':_0x573632(0x239),'type':_0x573632(0x319),'role':_0x573632(0x2bc),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x573632(0x2c9)]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x1c6),{'type':_0x573632(0x2bc),'common':{'name':'Who\x20is\x20present?','type':_0x573632(0x319),'role':'text','read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x2ab),{'type':_0x573632(0x2bc),'common':{'name':'Last\x20raw\x20event','type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x29f),{'type':_0x573632(0x2bc),'common':{'name':_0x573632(0x27e),'type':_0x573632(0x319),'role':_0x573632(0x2be),'read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1cf)](_0x573632(0x1ce),{'type':'channel','common':{'name':_0x573632(0x1c1)},'native':{}}),await _0x317682['setObjectNotExistsAsync'](_0x573632(0x240),{'type':_0x573632(0x2bc),'common':{'name':_0x573632(0x25e),'type':_0x573632(0x253),'role':_0x573632(0x214),'read':!![],'write':!![]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x213),{'type':_0x573632(0x2bc),'common':{'name':_0x573632(0x286),'type':_0x573632(0x253),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x20b),{'type':'state','common':{'name':'Train\x20Energy','type':'boolean','role':_0x573632(0x214),'read':!![],'write':!![]},'native':{}}),await _0x317682[_0x573632(0x1c4)]('analysis.training.triggerComfort',{'type':_0x573632(0x2bc),'common':{'name':'Train\x20Comfort','type':_0x573632(0x253),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x2d0),{'type':'state','common':{'name':_0x573632(0x24e),'type':_0x573632(0x253),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x317682[_0x573632(0x1c4)]('analysis.training.status',{'type':_0x573632(0x2bc),'common':{'name':_0x573632(0x264),'type':_0x573632(0x319),'role':_0x573632(0x1b5),'read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1cf)](_0x573632(0x317),{'type':'channel','common':{'name':_0x573632(0x2b5)},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x275),{'type':_0x573632(0x2bc),'common':{'name':'Anomaly\x20Score','type':'number','role':_0x573632(0x279),'read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x2a4),{'type':_0x573632(0x2bc),'common':{'name':_0x573632(0x2dd),'type':'number','role':_0x573632(0x279),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x1f4),{'type':_0x573632(0x2bc),'common':{'name':'Last\x20Check','type':_0x573632(0x319),'role':_0x573632(0x1b8),'read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1c4)]('analysis.security.topologyMatrix',{'type':'state','common':{'name':'Topology\x20Matrix','type':_0x573632(0x319),'role':_0x573632(0x2be),'read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1cf)](_0x573632(0x329),{'type':_0x573632(0x1a6),'common':{'name':_0x573632(0x26d)},'native':{}}),await _0x317682['setObjectNotExistsAsync']('analysis.health.lastCheck',{'type':_0x573632(0x2bc),'common':{'name':'Last\x20Check','type':_0x573632(0x319),'role':_0x573632(0x1b8),'read':!![],'write':![]},'native':{}}),await _0x317682['setObjectNotExistsAsync']('analysis.health.isAnomaly',{'type':_0x573632(0x2bc),'common':{'name':_0x573632(0x25c),'type':_0x573632(0x253),'role':_0x573632(0x2d6),'read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1c4)]('analysis.health.trendDiagnosis',{'type':'state','common':{'name':_0x573632(0x306),'type':_0x573632(0x319),'role':'text','read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x266),{'type':_0x573632(0x2bc),'common':{'name':_0x573632(0x25f),'type':'number','role':_0x573632(0x279),'read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x30e),{'type':_0x573632(0x2bc),'common':{'name':_0x573632(0x2ad),'type':_0x573632(0x319),'role':_0x573632(0x2be),'read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x1b4),{'type':'state','common':{'name':'Gait\x20Speed\x20Trend','type':'number','role':_0x573632(0x279),'read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1cf)](_0x573632(0x1bf),{'type':_0x573632(0x1a6),'common':{'name':'Energy\x20Intelligence'},'native':{}}),await _0x317682['setObjectNotExistsAsync']('analysis.energy.insulationScore',{'type':_0x573632(0x2bc),'common':{'name':_0x573632(0x1c8),'type':_0x573632(0x319),'role':_0x573632(0x1b5),'read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x25a),{'type':'state','common':{'name':_0x573632(0x218),'type':_0x573632(0x319),'role':'text','read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x26a),{'type':_0x573632(0x2bc),'common':{'name':_0x573632(0x23a),'type':_0x573632(0x319),'role':_0x573632(0x2be),'read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1cf)](_0x573632(0x2ba),{'type':_0x573632(0x1a6),'common':{'name':_0x573632(0x2ba)},'native':{}}),await _0x317682[_0x573632(0x1cf)](LTM_DP_RAW_LOG,{'type':_0x573632(0x2bc),'common':{'name':'Raw\x20Log','type':_0x573632(0x319),'role':'json','read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1cf)](LTM_DP_DAILY_DIGESTS,{'type':_0x573632(0x2bc),'common':{'name':_0x573632(0x2c2),'type':_0x573632(0x319),'role':'json','read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x282),{'type':'state','common':{'name':_0x573632(0x208),'type':_0x573632(0x319),'role':_0x573632(0x2be),'read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1c4)]('LTM.trainingData.thermodynamics',{'type':_0x573632(0x2bc),'common':{'name':_0x573632(0x313),'type':_0x573632(0x319),'role':'json','read':!![],'write':![]},'native':{}}),await _0x317682['setObjectNotExistsAsync'](_0x573632(0x238),{'type':_0x573632(0x2bc),'common':{'name':_0x573632(0x256),'type':'boolean','role':_0x573632(0x214),'read':!![],'write':!![]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x232),{'type':_0x573632(0x2bc),'common':{'name':'Trigger\x20Briefing','type':_0x573632(0x253),'role':_0x573632(0x214),'read':!![],'write':!![]},'native':{}}),await _0x317682['setObjectNotExistsAsync'](_0x573632(0x2d7),{'type':_0x573632(0x2bc),'common':{'name':_0x573632(0x27f),'type':_0x573632(0x253),'role':_0x573632(0x2a5),'read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1c4)]('analysis.alertReason',{'type':_0x573632(0x2bc),'common':{'name':'Alert\x20Reason','type':_0x573632(0x319),'role':_0x573632(0x2c4),'read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x1d4),{'type':_0x573632(0x2bc),'common':{'name':_0x573632(0x236),'type':_0x573632(0x319),'role':_0x573632(0x1b5),'read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x2c5),{'type':'state','common':{'name':_0x573632(0x1a4),'type':_0x573632(0x253),'role':_0x573632(0x2d6),'read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x1fc),{'type':_0x573632(0x2bc),'common':{'name':_0x573632(0x2c1),'type':_0x573632(0x319),'role':_0x573632(0x1b5),'read':!![],'write':![]},'native':{}}),await _0x317682['setObjectNotExistsAsync']('analysis.automation.detectedPatterns',{'type':_0x573632(0x2bc),'common':{'name':'Detected\x20Patterns','type':_0x573632(0x319),'role':_0x573632(0x2be),'read':!![],'write':![]},'native':{}}),await _0x317682['setObjectNotExistsAsync']('analysis.automation.targetId',{'type':'state','common':{'name':_0x573632(0x2cb),'type':'string','role':_0x573632(0x1b5),'read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x1fa),{'type':_0x573632(0x2bc),'common':{'name':_0x573632(0x230),'type':_0x573632(0x319),'role':_0x573632(0x1b5),'read':!![],'write':![]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x28d),{'type':'state','common':{'name':'Auto\x20Apply','type':_0x573632(0x253),'role':_0x573632(0x2e3),'read':!![],'write':!![]},'native':{}}),await _0x317682[_0x573632(0x1c4)](_0x573632(0x263),{'type':_0x573632(0x2bc),'common':{'name':_0x573632(0x250),'type':'boolean','role':_0x573632(0x214),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x595fa5){const _0x3af832=a0_0x4d74c2;try{const _0xe4bc4a=await _0x595fa5[_0x3af832(0x1ed)](SYSTEM_DP_MODE);_0xe4bc4a&&_0xe4bc4a[_0x3af832(0x2eb)]&&Object['values'](SYSTEM_MODES)[_0x3af832(0x20f)](_0xe4bc4a[_0x3af832(0x2eb)])?_0x595fa5[_0x3af832(0x31d)]=_0xe4bc4a[_0x3af832(0x2eb)]:(_0x595fa5[_0x3af832(0x31d)]=SYSTEM_MODES[_0x3af832(0x2c9)],await _0x595fa5[_0x3af832(0x2dc)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x5a9cb6){_0x595fa5['currentSystemMode']=SYSTEM_MODES[_0x3af832(0x2c9)];}}async function loadRawEventLog(_0x6874ac){const _0x287161=a0_0x4d74c2;try{const _0x21adee=await _0x6874ac[_0x287161(0x1ed)](LTM_DP_RAW_LOG);if(_0x21adee&&_0x21adee[_0x287161(0x2eb)])_0x6874ac[_0x287161(0x283)]=JSON[_0x287161(0x1ae)](_0x21adee[_0x287161(0x2eb)]);}catch(_0x5dfd1f){_0x6874ac[_0x287161(0x283)]=[];}}async function saveRawEventLog(_0x46ee22){const _0x1cd77b=a0_0x4d74c2;if(_0x46ee22[_0x1cd77b(0x283)][_0x1cd77b(0x31f)]>RAW_LOG_MAX_SIZE)_0x46ee22[_0x1cd77b(0x283)][_0x1cd77b(0x225)](0x0,_0x46ee22[_0x1cd77b(0x283)]['length']-RAW_LOG_MAX_SIZE);await _0x46ee22[_0x1cd77b(0x2dc)](LTM_DP_RAW_LOG,{'val':JSON[_0x1cd77b(0x2c0)](_0x46ee22[_0x1cd77b(0x283)]),'ack':!![]});}async function loadDailyDigests(_0x1a1d25){const _0x107a82=a0_0x4d74c2;try{const _0x3f6cfc=await _0x1a1d25[_0x107a82(0x1ed)](LTM_DP_DAILY_DIGESTS);if(_0x3f6cfc&&_0x3f6cfc[_0x107a82(0x2eb)])_0x1a1d25[_0x107a82(0x310)]=JSON['parse'](_0x3f6cfc[_0x107a82(0x2eb)]);}catch(_0x2d4d09){_0x1a1d25['dailyDigests']=[];}await updateBaselineStatus(_0x1a1d25);}function a0_0x12c5(){const _0x494fa1=['dailyDigests',')\x20-\x20SAFE\x20BOOT','fenster','Thermodynamics','bewegung','TRAIN_ENERGY','toLowerCase','analysis.security','targetId','string','LTM.triggerDailyDigest','setupModeResetScheduler','from','currentSystemMode','ltmLtbWindowDays','length','[LOG]','WiFi\x20Presence\x20detected.','detected','analysis.training.triggerComfort','geminiModel','@google/generative-ai','version','common','analysis.analysisHistory','analysis.health','Gemini\x20Init\x20Error:\x20','timestamp','Unknown','geminiApiKey','setupDriftAnalysisScheduler','values','analysis.health.isAnomaly','Pattern\x20Detected','fill','channel','debug','isProVersion','analysis.training.status','.Current.WeatherText','type','Unbekannt','Lernphase\x20(','parse','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','onStateChange','normal','instance','toFixed','analysis.health.gaitSpeed','text','setForeignStateAsync','isExit','date','ltmStbWindowDays','presenceDevices','onMessage','Keine\x20Details.','lastAlertState','\x20new\x20patterns.','analysis.energy','temperatur','AI\x20Training','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','loc','setObjectNotExistsAsync','write','system.presenceWho','system.isPresent','Insulation\x20Score','ENERGY_PREDICT_RESULT','pop','outdoorSensorId','.forecast.current.temperature','LTM.baselineStatus','analysis.training','extendObjectAsync','PRIORITÃ„T:\x20Sicherheit.','apply','livingContext','.\x20KONTEXT:\x20','analysis.activitySummary','search','path','Restoring\x20sensor\x20cache...','telegram','main','\x0aSTB:\x20','trim','systemConfig','getFullYear','[RESULT]','some','warn','COMFORT_RESULT','ðŸŒ…\x20Morning\x20Briefing:\x0a','getGenerativeModel','driftAnalysisTimer','analysisTimer','âš ï¸\x20ALARM:\x20','27TvZAxH','child_process','sensorLastValues','stateChange','getForeignStateAsync','generateContent','getStateAsync','ANALYZE_GAIT','.Current.Temperature','analysis.alertReason','Success:\x20','TRAINING_COMPLETE','light','analysis.security.lastCheck','party','description','getTime','LTM.driftAnalysis','inactivityThresholdHours','analysis.automation.targetValue','lampe','analysis.automation.description','getMonth','delObjectAsync','42344004AvIJoO','object','temperature','ANOMALY','forEach','BUILD_TOPOLOGY','Keine\x20Termine.','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','genAI','Sequences','LTM.rawEventLog','kill','analysis.training.triggerEnergy','getForeignObjectsAsync','keys','analysisInterval','includes','modeResetJob','application/json','command','analysis.training.triggerHealth','button','setState','scanDevices','TRAIN_HEALTH','Heating\x20Score','generic','TRAIN_COMFORT','confidence','40UvhACI','automationProposal','analysisHistory','ðŸ“\x20Feedback\x20received:\x20','PREDICT_ENERGY','N/A','ready','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','ack','splice','ltmJob','BUTLER\x20Execution\x20Error:\x20','1nfZIru','data','toString','find','PRIORITÃ„T:\x20Gesundheit/AAL.','getHours','cancel','config','Target\x20Value','analysis.health.trendDiagnosis','analysis.triggerBriefing','schalter','.\x20EMERGENCY:\x20','ðŸ\x20Python\x20Pong','Activity\x20Summary','isGracePeriodActive','analysis.trigger','System\x20Mode','Temperature\x20Forecast','scanForDevices','207816zLdBLl','setupLtmScheduler','.communicate.request','testContext','analysis.training.triggerSecurity','floor','startsWith','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','occupancy','system.config','Started...','pythonProcess','analysis.history_debug_00','.forecast.current.state','bind','.NextHours.Location_1.Day_1.current.temp_value','threshold','Build\x20Topology','Topology\x20Error:\x20','Trigger\x20Action','getOverviewData','ANALYZE_TREND','boolean','[RECORDER]\x20Error:\x20','toISOString','Trigger\x20Analysis','.\x20WETTER:\x20','1644290oOvTfU','unknown','analysis.energy.heatingScore','\x20->\x20','Anomaly\x20Detected','getDate','Train\x20Security','Trend\x20Value','TOPOLOGY_RESULT','close','weatherunderground','analysis.automation.triggerAction','Training\x20Status','GUEST','analysis.health.trendValue','callback','round','Success','analysis.energy.forecast','heating','HEALTH_TRAIN_RESULT','Health\x20Analysis','isPresent','replace','LTM.driftAnalysis.driftDetails','sendTo','communicate.request','2236306LAsxpA','8050RtBEbJ','analysis.security.lastScore','setupBriefingScheduler','ANALYZE_HEALTH','substring','value','system','Fokus\x20auf\x20Familienroutinen.','automation.triggerAction','city','Event\x20History','Alert\x20Status','Wetterdaten\x20deaktiviert.','minDaysForBaseline','LTM.trainingData.sequences','rawEventLog','KI-Modell\x20nicht\x20initialisiert','namespace','Train\x20Health','constructor','useWeather','events.history_debug_00','prÃ¤senz','kontakt','PYTHON_EXE','analysis.automation.autoApply','SECURITY_RESULT','getMinutes','slice','baselineDrift','enum','briefingJob','isAlert','PONG','details','N/A\x20(Learning)','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','shift','existsSync','rating','subscribeForeignStatesAsync','join','systemUUID','events.history','eventHistory','Sec-Training\x20started...','summary','(((.+)+)+)+$','analysis.security.currentThreshold','indicator.alarm','dependencyInstallInProgress','Keine\x20Wetterdaten\x20verfÃ¼gbar.','push','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','motion','events.lastEvent','exitGraceTimer','Today\x20Vector\x20(15m)','tÃ¼r','unshift','success','unload','66837GZJFQt','getEnums','126TwbJtJ','Security\x20Monitor','[PYTHON]\x20','toLocaleTimeString','exitTimer','guest','LTM','getForeignObjectAsync','state','TRAIN_SECURITY','json','name','stringify','Description','Daily\x20Digests','licenseKey','text.alarm','analysis.automation.patternDetected','11LzVLMm','ENERGY_TRAIN_RESULT','location','NORMAL','PARTY','Target\x20ID','info','isEmergency','online','aiPersona','analysis.training.triggerTopology','LTM.driftAnalysis.lastCheck','map','weatherInstance','rule','subscribeStates','indicator','analysis.isAlert','.forecast.current.temp','latitude','Digest','error','setStateAsync','Current\x20Threshold','@iobroker/adapter-core','service.py','door','daswetter','klima','switch','Missing\x20data','TREND_RESULT','\x0aGrund:\x20','onUnload','driftDetails','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','payload','val','\x20=\x20','writable','./lib/installer','getObjectAsync','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','10478587RqxQQw','accuweather','message','status','longitude','checkAndInstall','now','Regel\x20erkannt:\x20','Â°C,\x20','Fokus\x20auf\x20Komfort.','./lib/scheduler','reason','LTM.trainingData.thermodynamics','analysis.automation.targetId','submitFeedback','\x20Tage)','Aktiv\x20(','Kein\x20API\x20Key.','dismissAutomation','ðŸ§ \x20Triggering\x20Security\x20Training...','onReady','Trend','vacation','alertReason','dimmer','analysis.automation.detectedPatterns','response','log','system.mode','analysis.health.todayVector','Failed:\x20'];a0_0x12c5=function(){return _0x494fa1;};return a0_0x12c5();}async function saveDailyDigests(_0x2895b0,_0xf5f322=!![]){const _0x5d0e96=a0_0x4d74c2,_0xce9491=_0x2895b0[_0x5d0e96(0x22f)]['ltmLtbWindowDays']||0x3c;_0x2895b0[_0x5d0e96(0x310)][_0x5d0e96(0x31f)]>_0xce9491&&_0x2895b0['dailyDigests'][_0x5d0e96(0x225)](0x0,_0x2895b0['dailyDigests'][_0x5d0e96(0x31f)]-_0xce9491);await _0x2895b0[_0x5d0e96(0x2dc)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x5d0e96(0x2c0)](_0x2895b0[_0x5d0e96(0x310)]),'ack':!![]});if(_0xf5f322)await updateBaselineStatus(_0x2895b0);}async function updateAnalysisHistory(_0x1a3dbf,_0x988e59){const _0x181f3b=a0_0x4d74c2;_0x1a3dbf[_0x181f3b(0x21e)]['unshift'](_0x988e59);if(_0x1a3dbf[_0x181f3b(0x21e)][_0x181f3b(0x31f)]>HISTORY_MAX_SIZE)_0x1a3dbf[_0x181f3b(0x21e)][_0x181f3b(0x1ca)]();await _0x1a3dbf[_0x181f3b(0x2dc)](_0x181f3b(0x328),{'val':JSON['stringify'](_0x1a3dbf[_0x181f3b(0x21e)]),'ack':!![]});}async function updateBaselineStatus(_0x4b8ad5){const _0x107636=a0_0x4d74c2;if(!_0x4b8ad5[_0x107636(0x1a8)]){await _0x4b8ad5[_0x107636(0x2dc)](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0x16ccb8=_0x4b8ad5[_0x107636(0x310)][_0x107636(0x31f)]>=(_0x4b8ad5[_0x107636(0x22f)][_0x107636(0x281)]||0x7)?_0x107636(0x301)+_0x4b8ad5[_0x107636(0x310)]['length']+_0x107636(0x300):_0x107636(0x1ad)+_0x4b8ad5[_0x107636(0x310)][_0x107636(0x31f)]+'/'+(_0x4b8ad5['config']['minDaysForBaseline']||0x7)+')';await _0x4b8ad5[_0x107636(0x2dc)](LTM_DP_BASELINE_STATUS,{'val':_0x16ccb8,'ack':!![]});}async function initSensorSubscriptions(_0x44d9c6){const _0x4ed47b=a0_0x4d74c2,_0xd04d76=_0x44d9c6[_0x4ed47b(0x22f)]['devices'];if(_0xd04d76)for(const _0x5964d6 of _0xd04d76){await _0x44d9c6[_0x4ed47b(0x29c)](_0x5964d6['id']);}}async function initPresenceSubscriptions(_0x3779f7){const _0x2d9333=a0_0x4d74c2,_0x368c5e=_0x3779f7['config']['presenceDevices'];if(_0x368c5e)for(const _0x56865f of _0x368c5e){await _0x3779f7[_0x2d9333(0x29c)](_0x56865f);}}async function setupTelegramListener(_0x6bb3b4){const _0xdad9d5=a0_0x4d74c2,_0xf363cb=_0x6bb3b4[_0xdad9d5(0x22f)]['notifyTelegramInstance'];if(_0x6bb3b4['config']['notifyTelegramEnabled']&&_0xf363cb)await _0x6bb3b4[_0xdad9d5(0x29c)](_0xf363cb+_0xdad9d5(0x23e));}async function checkWifiPresence(_0x13518e){const _0x6d2d40=a0_0x4d74c2;try{const _0x3743f8=_0x13518e[_0x6d2d40(0x22f)][_0x6d2d40(0x1ba)]||[];let _0x1fa382=![];const _0x41ca91=[];for(const _0x28eddf of _0x3743f8){try{const _0x200510=await _0x13518e[_0x6d2d40(0x1eb)](_0x28eddf);_0x200510&&(_0x200510[_0x6d2d40(0x2eb)]===!![]||_0x200510[_0x6d2d40(0x2eb)]===_0x6d2d40(0x2ce)||_0x200510[_0x6d2d40(0x2eb)]===0x1)&&(_0x1fa382=!![],_0x41ca91[_0x6d2d40(0x2a8)](_0x28eddf));}catch(_0x17e041){}}return await _0x13518e['setStateAsync']('system.presenceWho',{'val':_0x41ca91['join'](',\x20'),'ack':!![]}),_0x1fa382&&(_0x13518e[_0x6d2d40(0x2b8)]&&(_0x13518e[_0x6d2d40(0x30c)][_0x6d2d40(0x2cc)](_0x6d2d40(0x321)),abortExitTimer(_0x13518e)),!_0x13518e[_0x6d2d40(0x26e)]&&_0x13518e[_0x6d2d40(0x31d)]===SYSTEM_MODES[_0x6d2d40(0x2c9)]&&await setPresence(_0x13518e,!![])),_0x1fa382;}catch(_0x58128d){return![];}}function startExitTimer(_0x3b5b56){const _0x5afcaa=a0_0x4d74c2;abortExitTimer(_0x3b5b56),_0x3b5b56[_0x5afcaa(0x237)]=!![],_0x3b5b56['exitGraceTimer']=setTimeout(()=>{_0x3b5b56['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x3b5b56[_0x5afcaa(0x2b8)]=setTimeout(()=>{setPresence(_0x3b5b56,![]),_0x3b5b56['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x100c0e){const _0x2b0064=a0_0x4d74c2;if(_0x100c0e[_0x2b0064(0x2b8)])clearTimeout(_0x100c0e[_0x2b0064(0x2b8)]);if(_0x100c0e['exitGraceTimer'])clearTimeout(_0x100c0e[_0x2b0064(0x2ac)]);_0x100c0e[_0x2b0064(0x2b8)]=null,_0x100c0e[_0x2b0064(0x2ac)]=null,_0x100c0e['isGracePeriodActive']=![];}async function setPresence(_0x162869,_0x22ba28){const _0x189dbd=a0_0x4d74c2;if(_0x162869[_0x189dbd(0x26e)]===_0x22ba28)return;_0x162869['isPresent']=_0x22ba28,await _0x162869[_0x189dbd(0x2dc)](_0x189dbd(0x1c7),{'val':_0x22ba28,'ack':!![]});}async function executeAutomationAction(_0x33779c){const _0x51207e=a0_0x4d74c2;try{const _0x257f31=await _0x33779c[_0x51207e(0x1ed)]('analysis.automation.targetId'),_0x4cf3ab=await _0x33779c[_0x51207e(0x1ed)](_0x51207e(0x1fa));if(_0x257f31&&_0x257f31['val']&&_0x4cf3ab){const _0x2175d6=_0x257f31[_0x51207e(0x2eb)];let _0x469753=_0x4cf3ab[_0x51207e(0x2eb)];try{_0x469753=JSON[_0x51207e(0x1ae)](_0x469753);}catch(_0xe2a848){}_0x33779c[_0x51207e(0x30c)][_0x51207e(0x2cc)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x2175d6+_0x51207e(0x2ec)+_0x469753),await _0x33779c[_0x51207e(0x1b6)](_0x2175d6,_0x469753);}else _0x33779c['log'][_0x51207e(0x1e0)](_0x51207e(0x2e9));}catch(_0x2d7f64){_0x33779c[_0x51207e(0x30c)][_0x51207e(0x2db)](_0x51207e(0x227)+_0x2d7f64[_0x51207e(0x2f3)]);}}async function processSensorEvent(_0xb6f1dd,_0x31d949,_0x32a6d6,_0xbfb5f){const _0x42baee=a0_0x4d74c2;if(!_0xbfb5f)return;const _0x437a35=_0x32a6d6['val'],_0x249015=Date[_0x42baee(0x2f7)](),_0x5b19f1=_0xb6f1dd[_0x42baee(0x1e9)][_0x31d949];_0xb6f1dd['sensorLastValues'][_0x31d949]=_0x437a35;if(!_0xbfb5f['logDuplicates']&&_0x5b19f1!=undefined&&_0x5b19f1==_0x437a35)return;const _0x200502=(_0xbfb5f[_0x42baee(0x1ab)]||'')[_0x42baee(0x316)](),_0x1bdfc8=_0x200502[_0x42baee(0x20f)](_0x42baee(0x201))||_0x200502['includes'](_0x42baee(0x1c0))||_0x200502[_0x42baee(0x20f)](_0x42baee(0x2e2))||_0x200502[_0x42baee(0x20f)]('heizung');_0xb6f1dd[_0x42baee(0x1a8)]&&_0x1bdfc8&&recordThermodynamics(_0xb6f1dd,_0x31d949,_0x437a35,_0xbfb5f['location']);const _0x40bee9={'timestamp':_0x249015,'id':_0x31d949,'name':_0xbfb5f[_0x42baee(0x2bf)],'type':_0xbfb5f[_0x42baee(0x1ab)],'location':_0xbfb5f[_0x42baee(0x2c8)],'value':_0x437a35};_0xb6f1dd['eventHistory'][_0x42baee(0x2af)](_0x40bee9);if(_0xb6f1dd[_0x42baee(0x2a0)]['length']>HISTORY_MAX_SIZE)_0xb6f1dd[_0x42baee(0x2a0)][_0x42baee(0x1ca)]();await _0xb6f1dd[_0x42baee(0x2dc)](_0x42baee(0x2ab),{'val':JSON[_0x42baee(0x2c0)](_0x40bee9),'ack':!![]}),await _0xb6f1dd['setStateAsync'](_0x42baee(0x29f),{'val':JSON['stringify'](_0xb6f1dd[_0x42baee(0x2a0)]),'ack':!![]});_0xb6f1dd[_0x42baee(0x1a8)]&&(_0xb6f1dd[_0x42baee(0x283)][_0x42baee(0x2a8)](_0x40bee9),await saveRawEventLog(_0xb6f1dd),recordSequence(_0xb6f1dd,_0x40bee9));if(_0xbfb5f[_0x42baee(0x1b7)]&&_0x437a35===!![]){if(_0xb6f1dd[_0x42baee(0x26e)]&&!_0xb6f1dd[_0x42baee(0x237)])startExitTimer(_0xb6f1dd);else{if(!_0xb6f1dd['isPresent'])setPresence(_0xb6f1dd,!![]);}}else{if(_0xbfb5f[_0x42baee(0x1ab)]===_0x42baee(0x2aa)&&_0x437a35===!![]){if(_0xb6f1dd[_0x42baee(0x2b8)])abortExitTimer(_0xb6f1dd);if(!_0xb6f1dd['isPresent']&&_0xb6f1dd[_0x42baee(0x31d)]===SYSTEM_MODES['NORMAL'])setPresence(_0xb6f1dd,!![]);}}}async function recordThermodynamics(_0x4f9160,_0x44fcba,_0x13dbb6,_0x1d7031){const _0x2599fd=a0_0x4d74c2,_0x5e6955=await getOutsideTemperatureNumeric(_0x4f9160),_0x9682ef=await _0x4f9160[_0x2599fd(0x1ed)]('LTM.trainingData.thermodynamics');let _0x4ec5bc=[];if(_0x9682ef&&_0x9682ef['val'])try{_0x4ec5bc=JSON[_0x2599fd(0x1ae)](_0x9682ef['val']);}catch(_0x58c299){}_0x4ec5bc[_0x2599fd(0x2a8)]({'ts':Date[_0x2599fd(0x2f7)](),'room':_0x1d7031||_0x2599fd(0x32c),'t_in':_0x13dbb6,'t_out':_0x5e6955});if(_0x4ec5bc[_0x2599fd(0x31f)]>THERMO_LOG_SIZE)_0x4ec5bc['shift']();await _0x4f9160[_0x2599fd(0x2dc)](_0x2599fd(0x2fd),{'val':JSON[_0x2599fd(0x2c0)](_0x4ec5bc),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x43a92c){const _0x24d565=a0_0x4d74c2;if(_0x43a92c[_0x24d565(0x22f)][_0x24d565(0x1cb)])try{const _0x503092=await _0x43a92c[_0x24d565(0x1eb)](_0x43a92c['config'][_0x24d565(0x1cb)]);if(_0x503092&&_0x503092['val']!==undefined&&_0x503092[_0x24d565(0x2eb)]!==null)return parseFloat(_0x503092[_0x24d565(0x2eb)]);}catch(_0x4c9693){}const _0x9c7f4d=_0x43a92c[_0x24d565(0x22f)][_0x24d565(0x2d3)];if(!_0x43a92c[_0x24d565(0x22f)][_0x24d565(0x288)]||!_0x9c7f4d)return null;try{let _0x507175='';if(_0x9c7f4d[_0x24d565(0x20f)](_0x24d565(0x2f2)))_0x507175=_0x9c7f4d+_0x24d565(0x1ef);else{if(_0x9c7f4d[_0x24d565(0x20f)](_0x24d565(0x2e1)))_0x507175=_0x9c7f4d+_0x24d565(0x24c);else{if(_0x9c7f4d[_0x24d565(0x20f)]('openweathermap'))_0x507175=_0x9c7f4d+_0x24d565(0x1cc);else{if(_0x9c7f4d[_0x24d565(0x20f)](_0x24d565(0x262)))_0x507175=_0x9c7f4d+_0x24d565(0x2d8);}}}if(_0x507175){const _0x37e9fc=await _0x43a92c[_0x24d565(0x1eb)](_0x507175);if(_0x37e9fc&&_0x37e9fc[_0x24d565(0x2eb)]!==undefined&&_0x37e9fc[_0x24d565(0x2eb)]!==null)return parseFloat(_0x37e9fc[_0x24d565(0x2eb)]);}}catch(_0x1cce8f){}return null;}async function recordSequence(_0x35ba23,_0x3abb08){const _0x3c2f71=a0_0x4d74c2,_0x4d8e0c=(_0x3abb08[_0x3c2f71(0x1ab)]||'')[_0x3c2f71(0x316)](),_0x318fde=[_0x3c2f71(0x2aa),_0x3c2f71(0x314),_0x3c2f71(0x28a),'presence',_0x3c2f71(0x245),_0x3c2f71(0x2e0),_0x3c2f71(0x2ae),'window',_0x3c2f71(0x312),'contact',_0x3c2f71(0x28b),_0x3c2f71(0x1f3),'licht',_0x3c2f71(0x2e3),_0x3c2f71(0x233),_0x3c2f71(0x309),_0x3c2f71(0x1fb)];if(!_0x318fde[_0x3c2f71(0x1df)](_0x33745c=>_0x4d8e0c[_0x3c2f71(0x20f)](_0x33745c)))return;if(!_0x3abb08[_0x3c2f71(0x279)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x3c2f71(0x2a8)]({'loc':_0x3abb08[_0x3c2f71(0x2c8)]||_0x3c2f71(0x32c),'id':_0x3abb08['id'],'ts':Date[_0x3c2f71(0x2f7)]()}),sequenceTimer=setTimeout(async()=>{const _0x1cfff5=_0x3c2f71;if(activeSequence[_0x1cfff5(0x31f)]>0x1)await saveCompletedSequence(_0x35ba23);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x18ce4b){const _0x8c29c1=a0_0x4d74c2;try{const _0x23658=await _0x18ce4b[_0x8c29c1(0x1ed)](_0x8c29c1(0x282));let _0x21d792=[];if(_0x23658&&_0x23658[_0x8c29c1(0x2eb)])try{_0x21d792=JSON['parse'](_0x23658[_0x8c29c1(0x2eb)]);}catch(_0x40a639){}const _0x20b039=activeSequence[0x0]['ts'],_0x495301=activeSequence['map'](_0x5c90c8=>({'loc':_0x5c90c8[_0x8c29c1(0x1c3)],'t_delta':Math[_0x8c29c1(0x268)]((_0x5c90c8['ts']-_0x20b039)/0x3e8)})),_0x226f27={'timestamp':new Date(_0x20b039)[_0x8c29c1(0x255)](),'steps':_0x495301,'duration':Math[_0x8c29c1(0x268)]((activeSequence[activeSequence[_0x8c29c1(0x31f)]-0x1]['ts']-_0x20b039)/0x3e8),'daytime':new Date(_0x20b039)[_0x8c29c1(0x22d)]()};_0x21d792['push'](_0x226f27);if(_0x21d792['length']>MAX_TRAINING_SET_SIZE)_0x21d792[_0x8c29c1(0x299)]();await _0x18ce4b['setStateAsync'](_0x8c29c1(0x282),{'val':JSON[_0x8c29c1(0x2c0)](_0x21d792),'ack':!![]}),runSecurityCheck(_0x18ce4b,_0x226f27);}catch(_0x17a6e7){_0x18ce4b[_0x8c29c1(0x30c)][_0x8c29c1(0x2db)](_0x8c29c1(0x254)+_0x17a6e7[_0x8c29c1(0x2f3)]);}}function runSecurityCheck(_0x59a7f8,_0xc57361){const _0x5db107=a0_0x4d74c2;if(!_0x59a7f8[_0x5db107(0x1a8)])return;sendToPython(_0x59a7f8,'ANALYZE_SEQUENCE',{'sequence':_0xc57361});}async function createDailyDigest(_0x2be0ad){const _0x3d87a8=a0_0x4d74c2;if(!_0x2be0ad['isProVersion'])return;await _0x2be0ad[_0x3d87a8(0x2dc)](LTM_DP_STATUS,{'val':_0x3d87a8(0x247),'ack':!![]});if(!_0x2be0ad['geminiModel']||_0x2be0ad[_0x3d87a8(0x283)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x2be0ad[_0x3d87a8(0x2dc)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x4184fe=JSON[_0x3d87a8(0x1ae)](JSON[_0x3d87a8(0x2c0)](_0x2be0ad[_0x3d87a8(0x283)])),_0x3057c3=_0x4184fe[_0x3d87a8(0x31f)],_0x45e8f3=_0x3d87a8(0x206)+JSON[_0x3d87a8(0x2c0)](_0x4184fe);try{const _0x13ced8=await _0x2be0ad[_0x3d87a8(0x324)][_0x3d87a8(0x1ec)](_0x45e8f3),_0x17140=JSON[_0x3d87a8(0x1ae)](_0x13ced8[_0x3d87a8(0x30b)][_0x3d87a8(0x1b5)]()[_0x3d87a8(0x26f)](/```json|```/g,'')[_0x3d87a8(0x1db)]()),_0x16ed2e={'timestamp':new Date()[_0x3d87a8(0x255)](),'eventCount':_0x3057c3,'summary':_0x17140[_0x3d87a8(0x2a2)]||_0x3d87a8(0x2da),'activityLevel':_0x17140['activityLevel']||_0x3d87a8(0x1b1),'systemMode':_0x2be0ad['currentSystemMode']};_0x2be0ad[_0x3d87a8(0x310)][_0x3d87a8(0x2a8)](_0x16ed2e),await saveDailyDigests(_0x2be0ad),_0x2be0ad[_0x3d87a8(0x283)]=[],await saveRawEventLog(_0x2be0ad),await _0x2be0ad['setStateAsync'](LTM_DP_STATUS,{'val':_0x3d87a8(0x269),'ack':!![]});if(_0x2be0ad[_0x3d87a8(0x1a8)])sendToPython(_0x2be0ad,_0x3d87a8(0x277),{'digest':_0x16ed2e});}catch(_0x4ca72c){_0x2be0ad[_0x3d87a8(0x30c)]['error'](_0x4ca72c[_0x3d87a8(0x2f3)]);}}async function runBaselineDriftAnalysis(_0x15315f){const _0x4cf5f3=a0_0x4d74c2;if(!_0x15315f[_0x4cf5f3(0x1a8)]||!_0x15315f['geminiModel'])return;const _0x489507=_0x15315f[_0x4cf5f3(0x22f)][_0x4cf5f3(0x1b9)]||0xe;if(_0x15315f[_0x4cf5f3(0x310)][_0x4cf5f3(0x31f)]<_0x489507+0x7){await _0x15315f[_0x4cf5f3(0x2dc)](LTM_DP_DRIFT_STATUS,{'val':_0x4cf5f3(0x297),'ack':!![]});return;}const _0x407253=_0x15315f[_0x4cf5f3(0x310)][_0x4cf5f3(0x290)](-_0x489507),_0x3b1987=_0x15315f[_0x4cf5f3(0x310)]['slice'](0x0,_0x15315f[_0x4cf5f3(0x310)][_0x4cf5f3(0x31f)]-_0x489507),_0x38f540=_0x4cf5f3(0x1c2)+JSON[_0x4cf5f3(0x2c0)](_0x3b1987)+_0x4cf5f3(0x1da)+JSON[_0x4cf5f3(0x2c0)](_0x407253);try{const _0x5203c7=await _0x15315f['geminiModel'][_0x4cf5f3(0x1ec)](_0x38f540),_0x1a69fa=JSON[_0x4cf5f3(0x1ae)](_0x5203c7[_0x4cf5f3(0x30b)]['text']()[_0x4cf5f3(0x26f)](/```json|```/g,'')[_0x4cf5f3(0x1db)]());_0x1a69fa[_0x4cf5f3(0x291)]&&(await _0x15315f['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x1a69fa[_0x4cf5f3(0x291)],'ack':!![]}),await _0x15315f[_0x4cf5f3(0x2dc)](LTM_DP_DRIFT_DETAILS,{'val':_0x1a69fa[_0x4cf5f3(0x2e8)],'ack':!![]}),await _0x15315f[_0x4cf5f3(0x2dc)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0xdf3594){}}async function sendMorningBriefing(_0x58748d){const _0x1598fe=a0_0x4d74c2;if(!_0x58748d['geminiModel'])return;try{const _0x584bc5='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x540f4c=await _0x58748d[_0x1598fe(0x324)][_0x1598fe(0x1ec)](_0x584bc5),_0x56b24f=_0x540f4c[_0x1598fe(0x30b)][_0x1598fe(0x1b5)]();sendNotification(_0x58748d,_0x1598fe(0x1e2)+_0x56b24f);}catch(_0x17d8c8){_0x58748d[_0x1598fe(0x30c)][_0x1598fe(0x2db)]('Briefing\x20Error:\x20'+_0x17d8c8[_0x1598fe(0x2f3)]);}}function stopPythonService(_0x17dcd4){const _0x99e83e=a0_0x4d74c2;if(_0x17dcd4[_0x99e83e(0x248)]){try{_0x17dcd4['pythonProcess'][_0x99e83e(0x20a)]();}catch(_0x2439af){}_0x17dcd4[_0x99e83e(0x248)]=null;}}function sendToPython(_0x43a9c2,_0x54a366,_0x18d267={}){const _0x4392f9=a0_0x4d74c2;if(!_0x43a9c2[_0x4392f9(0x248)]||!_0x43a9c2[_0x4392f9(0x248)]['stdin'][_0x4392f9(0x2ed)])return;const _0x190918=JSON['stringify']({'command':_0x54a366,..._0x18d267});try{_0x43a9c2['pythonProcess']['stdin'][_0x4392f9(0x1c5)](_0x190918+'\x0a');}catch(_0x4da461){}}function runPythonHealthCheck(_0x5c7daa){const _0x38f6a3=a0_0x4d74c2;if(!_0x5c7daa[_0x38f6a3(0x310)]||_0x5c7daa[_0x38f6a3(0x310)]['length']<0x2)return;const _0x11024d=_0x5c7daa['dailyDigests'][_0x38f6a3(0x2d2)](_0x23d69f=>{const _0x25bc4a=(_0x23d69f['activityLevel']||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x25bc4a]||0x32;});sendToPython(_0x5c7daa,_0x38f6a3(0x252),{'values':_0x11024d,'tag':'Activity-Level'});}function handlePythonResult(_0x14c53,_0x39b0e){const _0x1b1fd9=a0_0x4d74c2;if(_0x39b0e[_0x1b1fd9(0x1ab)]===_0x1b1fd9(0x295))_0x14c53[_0x1b1fd9(0x30c)]['debug'](_0x1b1fd9(0x235));else{if(_0x39b0e[_0x1b1fd9(0x1ab)]===_0x1b1fd9(0x28e)){const {anomaly_score:_0x225554,is_anomaly:_0x13eb51,threshold:_0x34eddc,explanation:_0x34ceb2}=_0x39b0e['payload'];_0x14c53[_0x1b1fd9(0x30c)][_0x1b1fd9(0x2cc)]('ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20'+_0x225554[_0x1b1fd9(0x1b3)](0x5)+_0x1b1fd9(0x25b)+(_0x13eb51?_0x1b1fd9(0x202):'OK')),_0x14c53[_0x1b1fd9(0x2dc)](_0x1b1fd9(0x275),{'val':_0x225554,'ack':!![]}),_0x14c53[_0x1b1fd9(0x2dc)](_0x1b1fd9(0x1f4),{'val':new Date()[_0x1b1fd9(0x255)](),'ack':!![]});if(_0x34eddc)_0x14c53[_0x1b1fd9(0x2dc)](_0x1b1fd9(0x2a4),{'val':_0x34eddc,'ack':!![]});if(_0x13eb51){let _0x41b7e7=_0x1b1fd9(0x223)+_0x225554[_0x1b1fd9(0x1b3)](0x4)+')';if(_0x34ceb2&&_0x34ceb2!=='Unknown')_0x41b7e7+=_0x1b1fd9(0x2e6)+_0x34ceb2;_0x14c53[_0x1b1fd9(0x2dc)](_0x1b1fd9(0x2d7),{'val':!![],'ack':!![]}),_0x14c53['setStateAsync'](_0x1b1fd9(0x1f0),{'val':_0x41b7e7,'ack':!![]}),sendNotification(_0x14c53,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x41b7e7,![],!![]);}}else{if(_0x39b0e[_0x1b1fd9(0x1ab)]===_0x1b1fd9(0x1f2)){const _0x44996c=_0x39b0e[_0x1b1fd9(0x2ea)][_0x1b1fd9(0x296)]||'',_0x31500c=_0x39b0e[_0x1b1fd9(0x2ea)][_0x1b1fd9(0x24d)],_0x38b892=_0x39b0e['payload']['success']?_0x1b1fd9(0x1f1)+new Date()[_0x1b1fd9(0x2b7)]()+'\x20('+_0x44996c+')':_0x1b1fd9(0x30f)+_0x39b0e[_0x1b1fd9(0x2ea)][_0x1b1fd9(0x2fc)];_0x14c53['setStateAsync'](_0x1b1fd9(0x1a9),{'val':_0x38b892,'ack':!![]});if(_0x39b0e[_0x1b1fd9(0x2ea)]['success']&&_0x31500c)_0x14c53[_0x1b1fd9(0x2dc)](_0x1b1fd9(0x2a4),{'val':_0x31500c,'ack':!![]});}else{if(_0x39b0e[_0x1b1fd9(0x1ab)]===_0x1b1fd9(0x1e1)){const {patterns:_0x7e283a}=_0x39b0e['payload'];if(_0x7e283a&&_0x7e283a['length']>0x0){_0x14c53[_0x1b1fd9(0x30c)][_0x1b1fd9(0x2cc)](_0x1b1fd9(0x2f0)+_0x7e283a[_0x1b1fd9(0x31f)]+_0x1b1fd9(0x1be)),_0x14c53[_0x1b1fd9(0x2dc)](_0x1b1fd9(0x30a),{'val':JSON[_0x1b1fd9(0x2c0)](_0x7e283a),'ack':!![]});const _0x147030=_0x7e283a[0x0],_0x1ef986=_0x1b1fd9(0x2f8)+_0x147030[_0x1b1fd9(0x2d4)]+'\x20('+(_0x147030[_0x1b1fd9(0x21b)]*0x64)['toFixed'](0x0)+'%)';_0x14c53[_0x1b1fd9(0x2dc)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x14c53[_0x1b1fd9(0x2dc)](_0x1b1fd9(0x1fc),{'val':_0x1ef986,'ack':!![]});}else _0x14c53[_0x1b1fd9(0x30c)][_0x1b1fd9(0x2cc)](_0x1b1fd9(0x243)),_0x14c53[_0x1b1fd9(0x2dc)](_0x1b1fd9(0x2c5),{'val':![],'ack':!![]}),_0x14c53[_0x1b1fd9(0x2dc)]('analysis.automation.detectedPatterns',{'val':'[]','ack':!![]});}else{if(_0x39b0e[_0x1b1fd9(0x1ab)]===_0x1b1fd9(0x2c7)){if(_0x39b0e[_0x1b1fd9(0x2ea)][_0x1b1fd9(0x2b0)])try{const _0x4990b6=JSON['parse'](_0x39b0e[_0x1b1fd9(0x2ea)][_0x1b1fd9(0x296)]);if(_0x4990b6['insulation'])_0x14c53[_0x1b1fd9(0x2dc)]('analysis.energy.insulationScore',{'val':JSON[_0x1b1fd9(0x2c0)](_0x4990b6['insulation']),'ack':!![]});if(_0x4990b6[_0x1b1fd9(0x26b)])_0x14c53[_0x1b1fd9(0x2dc)](_0x1b1fd9(0x25a),{'val':JSON['stringify'](_0x4990b6[_0x1b1fd9(0x26b)]),'ack':!![]});}catch(_0x33705a){}}else{if(_0x39b0e[_0x1b1fd9(0x1ab)]===_0x1b1fd9(0x26c)){if(_0x39b0e[_0x1b1fd9(0x2ea)]['success'])_0x14c53[_0x1b1fd9(0x30c)][_0x1b1fd9(0x2cc)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x39b0e['type']==='HEALTH_RESULT')_0x14c53[_0x1b1fd9(0x2dc)]('analysis.health.lastCheck',{'val':new Date()[_0x1b1fd9(0x255)](),'ack':!![]}),_0x14c53[_0x1b1fd9(0x2dc)](_0x1b1fd9(0x1a3),{'val':_0x39b0e[_0x1b1fd9(0x2ea)]['is_anomaly'],'ack':!![]});else{if(_0x39b0e[_0x1b1fd9(0x1ab)]===_0x1b1fd9(0x2e5))_0x14c53['setStateAsync'](_0x1b1fd9(0x231),{'val':_0x39b0e[_0x1b1fd9(0x2ea)]['diagnosis'],'ack':!![]}),_0x14c53[_0x1b1fd9(0x2dc)](_0x1b1fd9(0x266),{'val':_0x39b0e[_0x1b1fd9(0x2ea)]['change_percent'],'ack':!![]});else{if(_0x39b0e[_0x1b1fd9(0x1ab)]==='GAIT_RESULT'){const {speed_trend:_0x3de79f}=_0x39b0e['payload'];if(_0x3de79f!==undefined)_0x14c53[_0x1b1fd9(0x2dc)](_0x1b1fd9(0x1b4),{'val':_0x3de79f,'ack':!![]});}else{if(_0x39b0e[_0x1b1fd9(0x1ab)]===_0x1b1fd9(0x1c9)){const {forecast:_0xbe5331}=_0x39b0e[_0x1b1fd9(0x2ea)];if(_0xbe5331)_0x14c53['setStateAsync'](_0x1b1fd9(0x26a),{'val':JSON[_0x1b1fd9(0x2c0)](_0xbe5331),'ack':!![]});}else{if(_0x39b0e['type']===_0x1b1fd9(0x260)){const {data:_0x20f5a4}=_0x39b0e[_0x1b1fd9(0x2ea)];_0x20f5a4&&(_0x14c53[_0x1b1fd9(0x30c)][_0x1b1fd9(0x2cc)]('ðŸ•¸ï¸\x20Topology\x20Map\x20updated.'),_0x14c53[_0x1b1fd9(0x2dc)]('analysis.security.topologyMatrix',{'val':JSON[_0x1b1fd9(0x2c0)](_0x20f5a4),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x3779cd){const _0x291820=a0_0x4d74c2;let _0x4079c7='python3';if(fs[_0x291820(0x29a)](installer[_0x291820(0x28c)]))_0x4079c7=installer[_0x291820(0x28c)];try{const _0x5cfb37=path[_0x291820(0x29d)](__dirname,'python_service',_0x291820(0x2df));_0x3779cd[_0x291820(0x248)]=spawn(_0x4079c7,[_0x5cfb37]),_0x3779cd[_0x291820(0x248)]['stdout']['on'](_0x291820(0x229),_0x121a04=>{const _0x179845=_0x291820,_0xf19e92=_0x121a04[_0x179845(0x22a)]()['split']('\x0a');_0xf19e92[_0x179845(0x203)](_0x1ac417=>{const _0x1adf19=_0x179845,_0x38be62=_0x1ac417[_0x1adf19(0x1db)]();if(!_0x38be62)return;if(_0x38be62[_0x1adf19(0x242)](_0x1adf19(0x320)))_0x3779cd[_0x1adf19(0x30c)]['debug'](_0x1adf19(0x2b6)+_0x38be62[_0x1adf19(0x278)](0x5)[_0x1adf19(0x1db)]());else{if(_0x38be62[_0x1adf19(0x242)](_0x1adf19(0x1de)))try{const _0x5a081b=JSON['parse'](_0x38be62[_0x1adf19(0x278)](0x8)[_0x1adf19(0x1db)]());handlePythonResult(_0x3779cd,_0x5a081b);}catch(_0x1947db){}}});}),_0x3779cd[_0x291820(0x248)]['on'](_0x291820(0x261),_0xdac917=>{_0x3779cd['pythonProcess']=null;});}catch(_0x334b3b){_0x3779cd[_0x291820(0x30c)][_0x291820(0x2db)]('Error\x20launching\x20Python:\x20'+_0x334b3b[_0x291820(0x2f3)]);}}async function runAutopilot(_0x94ca6e){const _0x23770a=a0_0x4d74c2;_0x94ca6e[_0x23770a(0x30c)][_0x23770a(0x1a7)](_0x23770a(0x244)),await runGeminiAnalysis(_0x94ca6e),updateHealthVector(_0x94ca6e),triggerGaitAnalysis(_0x94ca6e),triggerEnergyPrediction(_0x94ca6e);}async function triggerGaitAnalysis(_0x14edd6){const _0x1fd522=a0_0x4d74c2;if(!_0x14edd6[_0x1fd522(0x1a8)])return;try{const _0x4ec9a3=await _0x14edd6[_0x1fd522(0x1ed)](_0x1fd522(0x282));_0x4ec9a3&&_0x4ec9a3[_0x1fd522(0x2eb)]&&sendToPython(_0x14edd6,_0x1fd522(0x1ee),{'sequences':JSON[_0x1fd522(0x1ae)](_0x4ec9a3[_0x1fd522(0x2eb)])});}catch(_0x3d70ef){}}async function triggerEnergyPrediction(_0x163af7){const _0xe8792=a0_0x4d74c2;if(!_0x163af7['isProVersion'])return;try{const _0x71117d=await getOutsideTemperatureNumeric(_0x163af7);if(_0x71117d===null)return;const _0x443a34={},_0x1c9e21=_0x163af7[_0xe8792(0x22f)]['devices']||[];for(const _0x43ec6b of _0x1c9e21){if(_0x43ec6b[_0xe8792(0x1ab)]==='temperature'&&_0x43ec6b[_0xe8792(0x2c8)]){const _0x242dbf=_0x163af7[_0xe8792(0x1e9)][_0x43ec6b['id']];if(_0x242dbf!==undefined)_0x443a34[_0x43ec6b['location']]=_0x242dbf;}}Object[_0xe8792(0x20d)](_0x443a34)[_0xe8792(0x31f)]>0x0&&sendToPython(_0x163af7,_0xe8792(0x220),{'current_temps':_0x443a34,'t_out':_0x71117d});}catch(_0x287dfd){}}function updateHealthVector(_0x4c7bb1){const _0x16ae8c=a0_0x4d74c2;if(!_0x4c7bb1[_0x16ae8c(0x283)]||_0x4c7bb1['rawEventLog']['length']===0x0)return;const _0x3c7136=new Array(0x60)[_0x16ae8c(0x1a5)](0x0),_0x3fdb0b=new Date()['setHours'](0x0,0x0,0x0,0x0);_0x4c7bb1[_0x16ae8c(0x283)][_0x16ae8c(0x203)](_0x1b989c=>{const _0x1a383a=_0x16ae8c,_0x3cd197=new Date(_0x1b989c[_0x1a383a(0x32b)]);if(_0x3cd197[_0x1a383a(0x1f7)]()>=_0x3fdb0b){const _0xbdbb34=_0x3cd197[_0x1a383a(0x22d)](),_0x3d16df=_0x3cd197[_0x1a383a(0x28f)](),_0x1e7725=_0xbdbb34*0x4+Math[_0x1a383a(0x241)](_0x3d16df/0xf);if(_0x1e7725>=0x0&&_0x1e7725<0x60)_0x3c7136[_0x1e7725]++;}}),_0x4c7bb1[_0x16ae8c(0x2dc)]('analysis.health.todayVector',{'val':JSON[_0x16ae8c(0x2c0)](_0x3c7136),'ack':!![]});}async function getWeatherContext(_0x1d4e51){const _0x4ea36a=a0_0x4d74c2;if(!_0x1d4e51[_0x4ea36a(0x22f)][_0x4ea36a(0x288)]||!_0x1d4e51[_0x4ea36a(0x22f)][_0x4ea36a(0x2d3)])return _0x4ea36a(0x280);try{const _0x3f0223=_0x1d4e51['config'][_0x4ea36a(0x2d3)];let _0x2b261e=await _0x1d4e51[_0x4ea36a(0x1eb)](_0x3f0223+'.Current.Temperature');if(!_0x2b261e)_0x2b261e=await _0x1d4e51[_0x4ea36a(0x1eb)](_0x3f0223+_0x4ea36a(0x1cc));let _0x19d0fa=await _0x1d4e51['getForeignStateAsync'](_0x3f0223+_0x4ea36a(0x1aa));if(!_0x19d0fa)_0x19d0fa=await _0x1d4e51['getForeignStateAsync'](_0x3f0223+_0x4ea36a(0x24a));if(_0x2b261e&&_0x19d0fa)return _0x2b261e[_0x4ea36a(0x2eb)]+_0x4ea36a(0x2f9)+_0x19d0fa[_0x4ea36a(0x2eb)];}catch(_0x293013){}return _0x4ea36a(0x2a7);}async function getCalendarContext(_0x5b54ce){const _0x33293a=a0_0x4d74c2;if(!_0x5b54ce[_0x33293a(0x22f)]['useCalendar']||!_0x5b54ce['config']['calendarInstance'])return'Kalender\x20deaktiviert.';return _0x33293a(0x205);}async function getCalendarNames(_0x863108,_0x49e7d6){return[];}async function saveFeedback(_0xccf748,_0x59ad87){const _0x1c2c43=a0_0x4d74c2;_0xccf748[_0x1c2c43(0x30c)][_0x1c2c43(0x2cc)](_0x1c2c43(0x21f)+_0x59ad87[_0x1c2c43(0x29b)]);}async function runGeminiAnalysis(_0x47696c,_0x1f311a=''){const _0x1b7c87=a0_0x4d74c2;if(!_0x47696c['geminiModel'])return;if(_0x47696c['eventHistory'][_0x1b7c87(0x31f)]===0x0)return;const _0x1af755=_0x47696c[_0x1b7c87(0x2a0)]['slice'](0x0,0xf),_0x2bbc71=await getWeatherContext(_0x47696c),_0x274b4b=_0x47696c[_0x1b7c87(0x31d)],_0x3e87f8=PERSONA_MAPPING[_0x47696c['config'][_0x1b7c87(0x2cf)]||_0x1b7c87(0x219)],_0x3d49a5=_0x47696c[_0x1b7c87(0x22f)][_0x1b7c87(0x1d2)]||_0x1b7c87(0x1bc);let _0x58bf4e=_0x1b7c87(0x1ac);try{const _0x1d1844=await _0x47696c[_0x1b7c87(0x1ed)](_0x1b7c87(0x1c6));if(_0x1d1844&&_0x1d1844[_0x1b7c87(0x2eb)])_0x58bf4e=_0x1d1844[_0x1b7c87(0x2eb)];}catch(_0x21d11d){}let _0x3adb13=![];try{const _0x67046c=await _0x47696c[_0x1b7c87(0x1ed)](_0x1b7c87(0x28d));if(_0x67046c&&_0x67046c[_0x1b7c87(0x2eb)])_0x3adb13=!![];}catch(_0x572ca6){}const _0x3afa9a='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x3e87f8+_0x1b7c87(0x1d3)+_0x3d49a5+'.\x20SYSTEM_MODE:\x20'+_0x274b4b+_0x1b7c87(0x257)+_0x2bbc71+'.\x20ANWESEND:\x20'+_0x58bf4e+'.\x20EVENTS:\x20'+JSON[_0x1b7c87(0x2c0)](_0x1af755)+_0x1b7c87(0x234)+_0x1f311a+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0x372c74=await _0x47696c[_0x1b7c87(0x324)][_0x1b7c87(0x1ec)](_0x3afa9a),_0x3b79a2=JSON[_0x1b7c87(0x1ae)](_0x372c74['response'][_0x1b7c87(0x1b5)]()[_0x1b7c87(0x26f)](/```json|```/g,'')[_0x1b7c87(0x1db)]());await _0x47696c[_0x1b7c87(0x2dc)]('analysis.lastResult',{'val':JSON['stringify'](_0x3b79a2),'ack':!![]});if(_0x3b79a2['summary'])await _0x47696c[_0x1b7c87(0x2dc)](_0x1b7c87(0x1d4),{'val':_0x3b79a2[_0x1b7c87(0x2a2)],'ack':!![]});const _0x20bf7f={'timestamp':Date['now'](),'id':Date[_0x1b7c87(0x2f7)]()[_0x1b7c87(0x22a)](),'analysis':{'activity':{'summary':_0x3b79a2[_0x1b7c87(0x2a2)],'isAlert':_0x3b79a2[_0x1b7c87(0x294)],'alertReason':_0x3b79a2[_0x1b7c87(0x308)]},'comfort':{'automationProposal':_0x3b79a2[_0x1b7c87(0x21d)]}}};await updateAnalysisHistory(_0x47696c,_0x20bf7f);const _0x322c7f=_0x3b79a2[_0x1b7c87(0x294)]||![];_0x322c7f!==_0x47696c[_0x1b7c87(0x1bd)]&&(await _0x47696c[_0x1b7c87(0x2dc)](_0x1b7c87(0x2d7),{'val':_0x322c7f,'ack':!![]}),_0x47696c['lastAlertState']=_0x322c7f,_0x322c7f&&(await _0x47696c['setStateAsync'](_0x1b7c87(0x1f0),{'val':_0x3b79a2['alertReason'],'ack':!![]}),sendNotification(_0x47696c,_0x1b7c87(0x1e6)+_0x3b79a2['alertReason'],![],_0x3b79a2[_0x1b7c87(0x2cd)])));if(_0x3b79a2[_0x1b7c87(0x21d)]&&_0x3b79a2[_0x1b7c87(0x21d)]['detected']){await _0x47696c[_0x1b7c87(0x2dc)](_0x1b7c87(0x2c5),{'val':!![],'ack':!![]}),await _0x47696c[_0x1b7c87(0x2dc)]('analysis.automation.description',{'val':_0x3b79a2[_0x1b7c87(0x21d)][_0x1b7c87(0x1f6)],'ack':!![]}),await _0x47696c['setStateAsync'](_0x1b7c87(0x2fe),{'val':_0x3b79a2[_0x1b7c87(0x21d)][_0x1b7c87(0x318)],'ack':!![]}),await _0x47696c[_0x1b7c87(0x2dc)](_0x1b7c87(0x1fa),{'val':JSON[_0x1b7c87(0x2c0)](_0x3b79a2[_0x1b7c87(0x21d)]['targetValue']),'ack':!![]});if(_0x3adb13)executeAutomationAction(_0x47696c);}}catch(_0x1eddd9){_0x47696c[_0x1b7c87(0x30c)][_0x1b7c87(0x2db)]('Gemini\x20Error:\x20'+_0x1eddd9[_0x1b7c87(0x2f3)]);}}async function startSystem(_0x37f711){const _0x532c6c=a0_0x4d74c2;_0x37f711[_0x532c6c(0x30c)]['info'](_0x532c6c(0x298)),await initZombies(_0x37f711);try{_0x37f711[_0x532c6c(0x1a8)]=await checkLicense(_0x37f711[_0x532c6c(0x22f)][_0x532c6c(0x2c3)]);}catch(_0x2a3161){}if(!_0x37f711[_0x532c6c(0x22f)][_0x532c6c(0x1f9)]||_0x37f711[_0x532c6c(0x22f)][_0x532c6c(0x1f9)]<0.1)_0x37f711[_0x532c6c(0x22f)][_0x532c6c(0x1f9)]=0xc;await initHistory(_0x37f711),await initSystemConfig(_0x37f711);if(_0x37f711[_0x532c6c(0x22f)][_0x532c6c(0x32d)])try{_0x37f711[_0x532c6c(0x207)]=new GoogleGenerativeAI(_0x37f711['config'][_0x532c6c(0x32d)]),_0x37f711[_0x532c6c(0x324)]=_0x37f711['genAI'][_0x532c6c(0x1e3)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x532c6c(0x211)}}),_0x37f711[_0x532c6c(0x30c)]['info']('Gemini\x20AI\x20initialized.');}catch(_0x224378){_0x37f711['log'][_0x532c6c(0x2db)](_0x532c6c(0x32a)+_0x224378[_0x532c6c(0x2f3)]);}await createAllObjects(_0x37f711),await loadSystemMode(_0x37f711),await loadRawEventLog(_0x37f711),await loadDailyDigests(_0x37f711),_0x37f711[_0x532c6c(0x2d5)](_0x532c6c(0x238)),_0x37f711[_0x532c6c(0x2d5)](LTM_DP_TRIGGER_DIGEST),_0x37f711[_0x532c6c(0x2d5)](_0x532c6c(0x30d)),_0x37f711[_0x532c6c(0x2d5)](_0x532c6c(0x232)),_0x37f711[_0x532c6c(0x2d5)](_0x532c6c(0x263)),_0x37f711[_0x532c6c(0x2d5)](_0x532c6c(0x28d)),_0x37f711[_0x532c6c(0x2d5)](_0x532c6c(0x240)),_0x37f711[_0x532c6c(0x2d5)](_0x532c6c(0x213)),_0x37f711[_0x532c6c(0x2d5)](_0x532c6c(0x20b)),_0x37f711[_0x532c6c(0x2d5)](_0x532c6c(0x323)),_0x37f711[_0x532c6c(0x2d5)]('analysis.training.triggerTopology'),await initSensorSubscriptions(_0x37f711),await initPresenceSubscriptions(_0x37f711),await setupTelegramListener(_0x37f711),setTimeout(()=>checkWifiPresence(_0x37f711),0x1388);if(_0x37f711[_0x532c6c(0x1e5)])clearInterval(_0x37f711[_0x532c6c(0x1e5)]);const _0x5b85ad=_0x37f711[_0x532c6c(0x22f)][_0x532c6c(0x20e)]||0xf;_0x5b85ad>0x0&&(_0x37f711['analysisTimer']=setInterval(()=>{runAutopilot(_0x37f711);},_0x5b85ad*0x3c*0x3e8)),schedulers[_0x532c6c(0x23d)](_0x37f711,()=>createDailyDigest(_0x37f711)),schedulers[_0x532c6c(0x31b)](_0x37f711),schedulers[_0x532c6c(0x32e)](_0x37f711,()=>runBaselineDriftAnalysis(_0x37f711)),schedulers[_0x532c6c(0x276)](_0x37f711,()=>sendMorningBriefing(_0x37f711)),startPythonService(_0x37f711),setTimeout(()=>{const _0x1e445d=_0x532c6c;_0x37f711[_0x1e445d(0x248)]&&(runPythonHealthCheck(_0x37f711),triggerGaitAnalysis(_0x37f711),triggerEnergyPrediction(_0x37f711)),updateHealthVector(_0x37f711);},0x1388);}class CogniLiving extends utils['Adapter']{constructor(_0x5c487d){const _0x42bf67=a0_0x4d74c2;super({..._0x5c487d,'name':'cogni-living'}),this['eventHistory']=[],this['analysisHistory']=[],this[_0x42bf67(0x283)]=[],this[_0x42bf67(0x310)]=[],this['sensorLastValues']={},this[_0x42bf67(0x1dc)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x42bf67(0x2b8)]=null,this[_0x42bf67(0x2ac)]=null,this[_0x42bf67(0x237)]=![],this['genAI']=null,this[_0x42bf67(0x324)]=null,this['currentSystemMode']=SYSTEM_MODES[_0x42bf67(0x2c9)],this[_0x42bf67(0x1a8)]=![],this[_0x42bf67(0x1bd)]=![],this[_0x42bf67(0x29e)]=_0x42bf67(0x259),this['analysisTimer']=null,this['ltmJob']=null,this[_0x42bf67(0x210)]=null,this[_0x42bf67(0x1e4)]=null,this[_0x42bf67(0x293)]=null,this[_0x42bf67(0x248)]=null,this[_0x42bf67(0x2a6)]=![],this['on'](_0x42bf67(0x222),this[_0x42bf67(0x305)][_0x42bf67(0x24b)](this)),this['on'](_0x42bf67(0x1ea),this[_0x42bf67(0x1b0)][_0x42bf67(0x24b)](this)),this['on'](_0x42bf67(0x2b1),this['onUnload'][_0x42bf67(0x24b)](this)),this['on'](_0x42bf67(0x2f3),this[_0x42bf67(0x1bb)]['bind'](this));}async[a0_0x4d74c2(0x305)](){const _0x1931fe=a0_0x4d74c2;this[_0x1931fe(0x30c)][_0x1931fe(0x2cc)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x1931fe(0x326)]+_0x1931fe(0x311));if(!installer[_0x1931fe(0x2f6)](this,()=>startSystem(this)))return;}[a0_0x4d74c2(0x2e7)](_0x540f98){const _0x2f9734=a0_0x4d74c2;if(this[_0x2f9734(0x1e5)])clearInterval(this[_0x2f9734(0x1e5)]);if(this['driftAnalysisTimer'])clearInterval(this[_0x2f9734(0x1e4)]);if(this['ltmJob'])this[_0x2f9734(0x226)][_0x2f9734(0x22e)]();if(this['modeResetJob'])this[_0x2f9734(0x210)][_0x2f9734(0x22e)]();if(this[_0x2f9734(0x293)])this[_0x2f9734(0x293)]['cancel']();if(this[_0x2f9734(0x2b8)])clearTimeout(this[_0x2f9734(0x2b8)]);if(this[_0x2f9734(0x2ac)])clearTimeout(this[_0x2f9734(0x2ac)]);stopPythonService(this),_0x540f98();}async[a0_0x4d74c2(0x1b0)](_0x20d737,_0x5c6b71){const _0x5a3ec1=a0_0x4d74c2;if(!_0x5c6b71||this[_0x5a3ec1(0x2a6)])return;if(_0x20d737[_0x5a3ec1(0x20f)](_0x5a3ec1(0x1d8))&&_0x20d737['endsWith'](_0x5a3ec1(0x272))&&_0x5c6b71[_0x5a3ec1(0x2eb)]){await handleTelegramResponse(this,_0x5c6b71['val']);return;}if(_0x20d737===this[_0x5a3ec1(0x285)]+'.'+SYSTEM_DP_MODE){if(_0x5c6b71[_0x5a3ec1(0x2eb)]&&Object[_0x5a3ec1(0x32f)](SYSTEM_MODES)['includes'](_0x5c6b71['val'])){this['currentSystemMode']=_0x5c6b71[_0x5a3ec1(0x2eb)];if(_0x5c6b71['val']===SYSTEM_MODES['VACATION'])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x5c6b71[_0x5a3ec1(0x224)])this['setState'](_0x20d737,{'val':this[_0x5a3ec1(0x31d)],'ack':!![]});return;}if(!_0x5c6b71['ack']){_0x20d737[_0x5a3ec1(0x20f)](_0x5a3ec1(0x238))&&_0x5c6b71[_0x5a3ec1(0x2eb)]&&(this[_0x5a3ec1(0x215)](_0x20d737,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x20d737[_0x5a3ec1(0x20f)]('triggerDailyDigest')&&_0x5c6b71[_0x5a3ec1(0x2eb)]){this[_0x5a3ec1(0x215)](_0x20d737,{'val':![],'ack':!![]});if(this[_0x5a3ec1(0x1a8)])createDailyDigest(this);}_0x20d737[_0x5a3ec1(0x20f)]('triggerBriefing')&&_0x5c6b71[_0x5a3ec1(0x2eb)]&&(this[_0x5a3ec1(0x215)](_0x20d737,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x20d737[_0x5a3ec1(0x20f)](_0x5a3ec1(0x27c))&&_0x5c6b71[_0x5a3ec1(0x2eb)]&&(this['setState'](_0x20d737,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x20d737[_0x5a3ec1(0x20f)](_0x5a3ec1(0x240))&&_0x5c6b71['val']){this[_0x5a3ec1(0x215)](_0x20d737,{'val':![],'ack':!![]});if(this[_0x5a3ec1(0x1a8)])try{const _0x426667=await this[_0x5a3ec1(0x1ed)](_0x5a3ec1(0x282));if(_0x426667&&_0x426667['val']){const _0x58c50a=JSON[_0x5a3ec1(0x1ae)](_0x426667[_0x5a3ec1(0x2eb)]);this[_0x5a3ec1(0x30c)][_0x5a3ec1(0x2cc)](_0x5a3ec1(0x304)),this[_0x5a3ec1(0x2dc)](_0x5a3ec1(0x1a9),{'val':_0x5a3ec1(0x2a1),'ack':!![]}),sendToPython(this,_0x5a3ec1(0x2bd),{'sequences':_0x58c50a});}}catch(_0x528416){this[_0x5a3ec1(0x30c)][_0x5a3ec1(0x2db)]('Training\x20Error:\x20'+_0x528416['message']);}}if(_0x20d737[_0x5a3ec1(0x20f)](_0x5a3ec1(0x213))&&_0x5c6b71[_0x5a3ec1(0x2eb)]){this[_0x5a3ec1(0x215)](_0x20d737,{'val':![],'ack':!![]});if(this[_0x5a3ec1(0x1a8)])try{const _0x247a18=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x247a18&&_0x247a18['val'])sendToPython(this,_0x5a3ec1(0x217),{'digests':JSON['parse'](_0x247a18[_0x5a3ec1(0x2eb)])});}catch(_0x23034e){}}if(_0x20d737['includes'](_0x5a3ec1(0x20b))&&_0x5c6b71[_0x5a3ec1(0x2eb)]){this[_0x5a3ec1(0x215)](_0x20d737,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x3ba696=await this[_0x5a3ec1(0x1ed)](_0x5a3ec1(0x2fd));if(_0x3ba696&&_0x3ba696[_0x5a3ec1(0x2eb)])sendToPython(this,_0x5a3ec1(0x315),{'points':JSON['parse'](_0x3ba696['val'])});}catch(_0x3d9a48){}}if(_0x20d737[_0x5a3ec1(0x20f)](_0x5a3ec1(0x323))&&_0x5c6b71['val']){this[_0x5a3ec1(0x215)](_0x20d737,{'val':![],'ack':!![]});if(this[_0x5a3ec1(0x1a8)])try{const _0x1f5940=await this['getStateAsync'](LTM_DP_RAW_LOG);_0x1f5940&&_0x1f5940[_0x5a3ec1(0x2eb)]&&(this['log'][_0x5a3ec1(0x2cc)]('ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...'),sendToPython(this,_0x5a3ec1(0x21a),{'events':JSON[_0x5a3ec1(0x1ae)](_0x1f5940[_0x5a3ec1(0x2eb)])}));}catch(_0x4a14bf){}}if(_0x20d737['includes'](_0x5a3ec1(0x2d0))&&_0x5c6b71[_0x5a3ec1(0x2eb)]){this[_0x5a3ec1(0x215)](_0x20d737,{'val':![],'ack':!![]});if(this[_0x5a3ec1(0x1a8)])try{const _0x3eb55a=await this[_0x5a3ec1(0x1ed)](_0x5a3ec1(0x282));if(_0x3eb55a&&_0x3eb55a[_0x5a3ec1(0x2eb)]){const _0x7b25c5=JSON['parse'](_0x3eb55a['val']);this[_0x5a3ec1(0x30c)]['info'](_0x5a3ec1(0x2a9)),sendToPython(this,_0x5a3ec1(0x204),{'sequences':_0x7b25c5});}}catch(_0x73b669){this[_0x5a3ec1(0x30c)]['error'](_0x5a3ec1(0x24f)+_0x73b669[_0x5a3ec1(0x2f3)]);}}return;}if(this[_0x5a3ec1(0x22f)][_0x5a3ec1(0x1ba)]&&this[_0x5a3ec1(0x22f)][_0x5a3ec1(0x1ba)][_0x5a3ec1(0x20f)](_0x20d737)){await checkWifiPresence(this);return;}const _0x2f9a8b=(this['config']['devices']||[])[_0x5a3ec1(0x22b)](_0x510a4f=>_0x510a4f['id']===_0x20d737);if(_0x2f9a8b)processSensorEvent(this,_0x20d737,_0x5c6b71,_0x2f9a8b);}async[a0_0x4d74c2(0x1bb)](_0x2b9a7e){const _0x4ff540=a0_0x4d74c2;if(typeof _0x2b9a7e==='object'&&_0x2b9a7e[_0x4ff540(0x2f3)]){if(_0x2b9a7e[_0x4ff540(0x212)]==='testApiKey'){const _0x39ae4a=_0x2b9a7e[_0x4ff540(0x2f3)]['apiKey']||this[_0x4ff540(0x22f)]['geminiApiKey'];if(!_0x39ae4a)return this[_0x4ff540(0x271)](_0x2b9a7e[_0x4ff540(0x31c)],_0x2b9a7e[_0x4ff540(0x212)],{'success':![],'message':_0x4ff540(0x302)},_0x2b9a7e[_0x4ff540(0x267)]);try{const _0x6a83d9=new GoogleGenerativeAI(_0x39ae4a),_0x4d0586=_0x6a83d9[_0x4ff540(0x1e3)]({'model':GEMINI_MODEL}),_0x5da4e7=await _0x4d0586['generateContent']('Hi');this[_0x4ff540(0x271)](_0x2b9a7e['from'],_0x2b9a7e['command'],{'success':!![],'message':'OK:\x20'+_0x5da4e7['response']['text']()},_0x2b9a7e[_0x4ff540(0x267)]);}catch(_0x22ed96){this[_0x4ff540(0x271)](_0x2b9a7e[_0x4ff540(0x31c)],_0x2b9a7e[_0x4ff540(0x212)],{'success':![],'message':'Err:\x20'+_0x22ed96['message']},_0x2b9a7e[_0x4ff540(0x267)]);}}else{if(_0x2b9a7e[_0x4ff540(0x212)]===_0x4ff540(0x23f)){const _0x1f480f=await getWeatherContext(this),_0x378f3b=await getCalendarContext(this);this[_0x4ff540(0x271)](_0x2b9a7e['from'],_0x2b9a7e[_0x4ff540(0x212)],{'success':!![],'weather':_0x1f480f,'calendar':_0x378f3b},_0x2b9a7e[_0x4ff540(0x267)]);}else{if(_0x2b9a7e['command']==='getLtmData'){if(!this[_0x4ff540(0x1a8)])return this['sendTo'](_0x2b9a7e[_0x4ff540(0x31c)],_0x2b9a7e[_0x4ff540(0x212)],{'success':![],'isPro':![]},_0x2b9a7e['callback']);let _0x16ed29={'status':'N/A'};try{const _0x17367=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x16ed29[_0x4ff540(0x2f4)]=_0x17367?_0x17367['val']:_0x4ff540(0x221);}catch(_0x1d33eb){}this['sendTo'](_0x2b9a7e[_0x4ff540(0x31c)],_0x2b9a7e['command'],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x16ed29,'analysisHistory':this[_0x4ff540(0x21e)]},_0x2b9a7e[_0x4ff540(0x267)]);}else{if(_0x2b9a7e[_0x4ff540(0x212)]===_0x4ff540(0x251)){const _0x597bba=this[_0x4ff540(0x310)][_0x4ff540(0x31f)],_0x48a01a=new Date(),_0x8bfb79=new Date(_0x48a01a[_0x4ff540(0x1dd)](),_0x48a01a[_0x4ff540(0x1fd)](),_0x48a01a[_0x4ff540(0x25d)]())['getTime'](),_0x2d4431=this[_0x4ff540(0x283)]['filter'](_0x27389d=>new Date(_0x27389d['timestamp'])['getTime']()>_0x8bfb79)[_0x4ff540(0x31f)],_0x27dbba=new Array(0x18)[_0x4ff540(0x1a5)](0x0);this[_0x4ff540(0x283)][_0x4ff540(0x203)](_0x1600d8=>{const _0xf01c1b=_0x4ff540,_0x27c0c5=new Date(_0x1600d8[_0xf01c1b(0x32b)]);if(_0x27c0c5['getTime']()>_0x8bfb79)_0x27dbba[_0x27c0c5[_0xf01c1b(0x22d)]()]++;});let _0x4a7169={'status':_0x4ff540(0x221)};try{const _0x55f987=await this[_0x4ff540(0x1ed)](LTM_DP_DRIFT_STATUS);_0x4a7169[_0x4ff540(0x2f4)]=_0x55f987?_0x55f987[_0x4ff540(0x2eb)]:_0x4ff540(0x221);}catch(_0x258c9e){}let _0x3e69e5='';try{const _0x977a16=await this[_0x4ff540(0x1ed)](_0x4ff540(0x1c6));_0x3e69e5=_0x977a16?_0x977a16[_0x4ff540(0x2eb)]:'';}catch(_0x371e61){}let _0x46bdfd=null;!this[_0x4ff540(0x324)]&&(_0x46bdfd=this[_0x4ff540(0x22f)][_0x4ff540(0x32d)]?_0x4ff540(0x284):'Kein\x20API\x20Key!');let _0x4e71fa={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x1d9f4f=await this[_0x4ff540(0x1ed)](_0x4ff540(0x2c5));if(_0x1d9f4f&&_0x1d9f4f[_0x4ff540(0x2eb)]){_0x4e71fa[_0x4ff540(0x322)]=!![];const _0x5636a6=await this[_0x4ff540(0x1ed)](_0x4ff540(0x1fc));_0x4e71fa[_0x4ff540(0x1f6)]=_0x5636a6?_0x5636a6['val']:'';const _0x227806=await this[_0x4ff540(0x1ed)](_0x4ff540(0x2fe));_0x4e71fa['targetId']=_0x227806?_0x227806[_0x4ff540(0x2eb)]:'';const _0x1fae1a=await this[_0x4ff540(0x1ed)](_0x4ff540(0x1fa));_0x4e71fa['targetValue']=_0x1fae1a?_0x1fae1a[_0x4ff540(0x2eb)]:'';}const _0x7f826f=await this[_0x4ff540(0x1ed)](_0x4ff540(0x28d));_0x4e71fa['autoApply']=_0x7f826f?!!_0x7f826f[_0x4ff540(0x2eb)]:![];}catch(_0x46331a){}this[_0x4ff540(0x271)](_0x2b9a7e['from'],_0x2b9a7e['command'],{'success':!![],'eventHistory':this['eventHistory'][_0x4ff540(0x290)](0x0,0xf),'stats':{'digestCount':_0x597bba,'eventCountToday':_0x2d4431,'hourlyActivity':_0x27dbba,'driftStatus':_0x4a7169['status'],'isPresent':this[_0x4ff540(0x26e)],'presenceWho':_0x3e69e5,'minDays':this['config'][_0x4ff540(0x281)]||0x7,'stbDays':this[_0x4ff540(0x22f)][_0x4ff540(0x1b9)]||0xe,'ltbDays':this[_0x4ff540(0x22f)][_0x4ff540(0x31e)]||0x3c,'systemError':_0x46bdfd},'automation':_0x4e71fa},_0x2b9a7e[_0x4ff540(0x267)]);}else{if(_0x2b9a7e[_0x4ff540(0x212)]===_0x4ff540(0x216))try{const _0x34877f=await scanner[_0x4ff540(0x23b)](this,_0x2b9a7e[_0x4ff540(0x2f3)]||{});this['sendTo'](_0x2b9a7e[_0x4ff540(0x31c)],_0x2b9a7e[_0x4ff540(0x212)],{'success':!![],'devices':_0x34877f},_0x2b9a7e[_0x4ff540(0x267)]);}catch(_0x4b1c98){this[_0x4ff540(0x271)](_0x2b9a7e[_0x4ff540(0x31c)],_0x2b9a7e[_0x4ff540(0x212)],{'success':![],'error':_0x4b1c98['message']},_0x2b9a7e[_0x4ff540(0x267)]);}else{if(_0x2b9a7e[_0x4ff540(0x212)]===_0x4ff540(0x2b3)){const _0xf87fd0=await this[_0x4ff540(0x20c)]('enum.functions.*',_0x4ff540(0x292)),_0x2f974b=[];if(_0xf87fd0)for(const _0x5aad0d in _0xf87fd0){const _0x1f5e95=_0xf87fd0[_0x5aad0d],_0x3779c5=(_0x1f5e95['common']&&typeof _0x1f5e95[_0x4ff540(0x327)][_0x4ff540(0x2bf)]===_0x4ff540(0x200)?_0x1f5e95['common'][_0x4ff540(0x2bf)]['de']:_0x1f5e95[_0x4ff540(0x327)][_0x4ff540(0x2bf)])||_0x1f5e95[_0x4ff540(0x327)][_0x4ff540(0x2bf)];_0x2f974b[_0x4ff540(0x2a8)]({'id':_0x5aad0d,'name':_0x3779c5});}const _0x420e67=await this[_0x4ff540(0x20c)]('enum.rooms.*','enum'),_0x468673=[];if(_0x420e67)for(const _0x28ee25 in _0x420e67){const _0x17ec54=_0x420e67[_0x28ee25],_0x3a35ae=(_0x17ec54[_0x4ff540(0x327)]&&typeof _0x17ec54[_0x4ff540(0x327)][_0x4ff540(0x2bf)]===_0x4ff540(0x200)?_0x17ec54[_0x4ff540(0x327)][_0x4ff540(0x2bf)]['de']:_0x17ec54[_0x4ff540(0x327)][_0x4ff540(0x2bf)])||_0x28ee25['split']('.')[_0x4ff540(0x1ca)]();_0x468673['push'](_0x3a35ae);}this[_0x4ff540(0x271)](_0x2b9a7e[_0x4ff540(0x31c)],_0x2b9a7e[_0x4ff540(0x212)],{'success':!![],'enums':_0x2f974b,'rooms':_0x468673},_0x2b9a7e[_0x4ff540(0x267)]);}else{if(_0x2b9a7e['command']==='getCalendarNames'){const _0x1ab5b3=_0x2b9a7e['message'][_0x4ff540(0x1b2)];if(!_0x1ab5b3)return this['sendTo'](_0x2b9a7e['from'],_0x2b9a7e[_0x4ff540(0x212)],{'success':![],'error':'No\x20instance'},_0x2b9a7e[_0x4ff540(0x267)]);const _0x581817=await getCalendarNames(this,_0x1ab5b3);this[_0x4ff540(0x271)](_0x2b9a7e[_0x4ff540(0x31c)],_0x2b9a7e[_0x4ff540(0x212)],{'success':!![],'names':_0x581817},_0x2b9a7e[_0x4ff540(0x267)]);}else{if(_0x2b9a7e['command']==='simulateButler'){const {targetId:_0x5928d6,targetValue:_0x2d5f92}=_0x2b9a7e['message'];this[_0x4ff540(0x30c)][_0x4ff540(0x2cc)](_0x4ff540(0x1af)+_0x5928d6+_0x4ff540(0x2ec)+_0x2d5f92),await this[_0x4ff540(0x2dc)](_0x4ff540(0x2c5),{'val':!![],'ack':!![]}),await this[_0x4ff540(0x2dc)](_0x4ff540(0x1fc),{'val':'SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20'+_0x5928d6,'ack':!![]}),await this['setStateAsync'](_0x4ff540(0x2fe),{'val':_0x5928d6,'ack':!![]}),await this[_0x4ff540(0x2dc)](_0x4ff540(0x1fa),{'val':_0x2d5f92,'ack':!![]}),this[_0x4ff540(0x271)](_0x2b9a7e[_0x4ff540(0x31c)],_0x2b9a7e[_0x4ff540(0x212)],{'success':!![]},_0x2b9a7e[_0x4ff540(0x267)]);}else{if(_0x2b9a7e[_0x4ff540(0x212)]===_0x4ff540(0x2ff)){const {historyId:_0x18ba54,rating:_0x43f91a,comment:_0x42ab84,alertReason:_0x32e774}=_0x2b9a7e[_0x4ff540(0x2f3)];_0x18ba54&&_0x43f91a?(await saveFeedback(this,{'timestamp':Date['now'](),'historyId':_0x18ba54,'rating':_0x43f91a,'comment':_0x42ab84,'alertReason':_0x32e774}),this[_0x4ff540(0x271)](_0x2b9a7e[_0x4ff540(0x31c)],_0x2b9a7e[_0x4ff540(0x212)],{'success':!![]},_0x2b9a7e[_0x4ff540(0x267)])):this['sendTo'](_0x2b9a7e[_0x4ff540(0x31c)],_0x2b9a7e['command'],{'success':![],'error':_0x4ff540(0x2e4)},_0x2b9a7e['callback']);}else _0x2b9a7e[_0x4ff540(0x212)]===_0x4ff540(0x303)&&(this['log'][_0x4ff540(0x2cc)]('User\x20dismissed\x20automation\x20proposal.'),await this[_0x4ff540(0x2dc)](_0x4ff540(0x2c5),{'val':![],'ack':!![]}),await this[_0x4ff540(0x2dc)]('analysis.automation.description',{'val':'','ack':!![]}),this[_0x4ff540(0x271)](_0x2b9a7e[_0x4ff540(0x31c)],_0x2b9a7e[_0x4ff540(0x212)],{'success':!![]},_0x2b9a7e['callback']));}}}}}}}}}}}if(require[a0_0x4d74c2(0x1d9)]!==module)module['exports']=_0x5f3a62=>new CogniLiving(_0x5f3a62);else new CogniLiving();