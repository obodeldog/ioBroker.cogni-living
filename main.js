const a0_0x193b58=a0_0x3bb4;(function(_0x9a58e,_0x12b4f4){const _0x608d2c=a0_0x3bb4,_0x2160ea=_0x9a58e();while(!![]){try{const _0x4f5f7d=-parseInt(_0x608d2c(0x1e9))/0x1*(parseInt(_0x608d2c(0x206))/0x2)+parseInt(_0x608d2c(0x225))/0x3+parseInt(_0x608d2c(0x2b8))/0x4*(parseInt(_0x608d2c(0x19a))/0x5)+-parseInt(_0x608d2c(0x1c8))/0x6*(-parseInt(_0x608d2c(0x1be))/0x7)+-parseInt(_0x608d2c(0x1fe))/0x8*(parseInt(_0x608d2c(0x2b4))/0x9)+-parseInt(_0x608d2c(0x211))/0xa+-parseInt(_0x608d2c(0x1e8))/0xb*(parseInt(_0x608d2c(0x208))/0xc);if(_0x4f5f7d===_0x12b4f4)break;else _0x2160ea['push'](_0x2160ea['shift']());}catch(_0x42c70e){_0x2160ea['push'](_0x2160ea['shift']());}}}(a0_0x4f73,0x4f340));function a0_0x3bb4(_0x1c3520,_0x1ba91b){const _0x3ad3d0=a0_0x4f73();return a0_0x3bb4=function(_0x599648,_0x215547){_0x599648=_0x599648-0x198;let _0x4f73b0=_0x3ad3d0[_0x599648];return _0x4f73b0;},a0_0x3bb4(_0x1c3520,_0x1ba91b);}const a0_0x215547=(function(){let _0x24695e=!![];return function(_0x344243,_0x539769){const _0x1b0235=_0x24695e?function(){const _0x3d2859=a0_0x3bb4;if(_0x539769){const _0x9d3a4a=_0x539769[_0x3d2859(0x1ed)](_0x344243,arguments);return _0x539769=null,_0x9d3a4a;}}:function(){};return _0x24695e=![],_0x1b0235;};}()),a0_0x599648=a0_0x215547(this,function(){const _0x1bf396=a0_0x3bb4;return a0_0x599648[_0x1bf396(0x29a)]()[_0x1bf396(0x27a)](_0x1bf396(0x1c7))['toString']()['constructor'](a0_0x599648)['search'](_0x1bf396(0x1c7));});a0_0x599648();'use strict';function a0_0x4f73(){const _0xabd535=['sensorLastValues','currentSystemMode','\x20min).\x20Watchdog\x20Limit:\x20','NORMAL','cancel','native','383680jXKuEq','0\x203\x20*\x20*\x20*','LTM','getEnums','Missing\x20data','system','splice','System\x20Status\x20&\x20Control','ltmStbWindowDays','\x20*\x20*\x20*','analysis.automation.description','LTM.processingStatus','openweathermap.0','.Summary.Current','eventHistory','events.history_debug_02','subscribeForeignStatesAsync','events.history_debug_01','sendMorningBriefing','normal','884586gWhQof','daswetter.0','Error\x20initHistory:\x20','KALENDER\x20ERROR:\x20','Feedback\x20Log','VACATION','isProVersion','License\x20Check\x20failed:\x20','scheduleJob','string','node-schedule','LTM\x20Sched\x20Error:\x20','scanForDevices','analysis.triggerBriefing','Comfort\x20Summary','boolean','setupLtmScheduler','analysis.isAlert','button','Automation\x20Proposals','Drift\x20Analysis','instance','inactivityThresholdHours','KALENDER:\x20Keine\x20Kalender\x20ausgewählt\x20(Bitte\x20in\x20Settings\x20konfigurieren)','driftDetails','Processing\x20Status','Deaktiviert\x20(Pro-Feature)','apiKey','analysis.automation','setObjectNotExistsAsync','bind','Drift\x20Details','Subscribing\x20to\x20','LTM.baselineStatus','events.history_debug_04','system.mode','pop','WETTER\x20ERROR:\x20','none','Briefing\x20Sched\x20Error:\x20','ltmJob','events.history','N/A\x20(No\x20Activity)','AI\x20Alert\x20Status','analysis.isEmergency','enum','resetAnalysisStates','date','Error\x20reading\x20calendar\x20table:\x20','unload','submitFeedback','stringify','split','system.meta.uuid','loadRawEventLog','testContext','Success','No\x20instance','includes','updateBaselineStatus','onStateChange','createAllObjects\x20failed:\x20','getCalendarNames','ltmDriftCheckIntervalHours','scanDevices','Comfort\x20Suggestion','Lernphase\x20(','onReady','Urlaub','Gast','GUEST','onMessage','Error\x20in\x20onMessage\x20command\x20','Starting\x20Autopilot\x20(','now','value.health','Restlessness\x20Level','PRIORITÄT:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungewöhnliche\x20Anwesenheit.','getSystemUUID','analysis.history_debug_02','system.isPresent','Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung.','sendTo','\x20|\x20','Event\x20History','search','Last\x20raw\x20event','extendObjectAsync','getStateAsync','licenseKey','object','Adapter','getForeignObjectAsync','feedbackHistory','analysisHistory','KALENDER:\x20','checkSystemObjects','Scheduling\x20Morning\x20Briefing\x20for\x20','analysis.trigger','join','values','setStateAsync','checkLicense','info','testApiKey','indicator.alarm','log','online','\x20sensors...','application/json','WETTER:\x20','analysis.alertReason','val','_calName','getGenerativeModel','getCalendarNames\x20Error:\x20','No\x20Key','toString','No\x20recent\x20activity.','analysis.activitySummary','LTM.driftAnalysis','Description','briefingJob','useCalendar','lastAlertState','loadRawEventLog\x20failed:\x20','PARTY','analysis.health.restlessness','KALENDER:\x20Keine\x20relevanten\x20Termine\x20(in\x20ausgewählten\x20Kalendern)','useWeather','setupModeResetScheduler','json','analysis.health','push','analysis.lastResult','getCalendarContext','analysis.history_debug_04','state','map','party','indicator','Kalender:\x20Deaktiviert','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','9UIqYpg','getWeatherContext','analysis.health.notes','loadSystemMode','3944LPufdX','version','Error\x20checking\x20WiFi:\x20','uuid-not-found','parse','subscribeStates','dailyDigests','3270lWkwXd','Wetter:\x20Deaktiviert','text','AI\x20Emergency\x20Status','guest','createDailyDigest','channel','status','ROLLE:\x20Data\x20Scientist.\x20VERGLEICHE:\x20Dataset\x20A\x20(Recent)\x20vs\x20B\x20(Established).\x20ZIEL:\x20Erkenne\x20Drift.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aB\x20(LTB):\x0a','.NextHours.Location_1.Day_1.current.symbol_desc','minDaysForBaseline','indicator.alarm.fire','Autopilot\x20error:\x20','common','unknown','baselineDrift','analysis.health.sleepScore','weatherunderground.0','.data.table','checkWifiPresence','analysisTimer','Pattern\x20Detected','[Test]\x20Notification','LTM.driftAnalysis.lastCheck','setupDriftAnalysisScheduler','N/A\x20(Learning)','Trigger\x20Analysis','setupBriefingScheduler','error','systemConfig','latitude','slice','models/gemini-flash-latest','Activity\x20Summary','generateContent','cogni-living\x20adapter\x20starting\x20(v','1791727IBsoBx','rawEventLog','driftAnalysisTimer','config','exports','event','warn','Trigger\x20Digest','sort','(((.+)+)+)+$','6QhNjvY','command','createAllObjects','isArray','runBaselineDriftAnalysis','Action','analysis.analysisHistory','length','events.history_debug_00','Raw\x20Log','accuweather','callback','@google/generative-ai','uuid','LTM.rawEventLog','@iobroker/adapter-core','briefingTime','events.history_debug_03','initHistory','runAutopilot','Health\x20Notes','from','ready','getForeignObjectsAsync','geminiModel','Baseline\x20Status','analysis.history_debug_03','name','analysis.history_debug_01','isPresent','filter','presenceDevices','675389WwHPPK','37546uKFdUI','saveDailyDigests','Deviation','N/A','apply','events.lastEvent','checkLtmObjects','LTM.dailyDigests','loadDailyDigests','genAI','saveFeedback','cogni-living','\x20presence\x20devices...','modeResetJob','message','analysis.deviationFromBaseline','number','analysis.comfortSummary','loadSystemMode\x20failed:\x20','setPresence','getForeignStateAsync','2376632JCGpJL','enum.functions.*','vacation','isGracePeriodActive','Aktiv\x20(','time','briefingEnabled','onUnload','22ovvvZn','KALENDER:\x20Keine\x20Daten','24WJDcXu','\x20sent','openweathermap'];a0_0x4f73=function(){return _0xabd535;};return a0_0x4f73();}const utils=require(a0_0x193b58(0x1d7)),{GoogleGenerativeAI}=require(a0_0x193b58(0x1d4)),schedule=require(a0_0x193b58(0x22f)),HISTORY_MAX_SIZE=0x32,ANALYSIS_HISTORY_MAX_SIZE=0x64,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x193b58(0x1ba),LTM_SCHEDULE=a0_0x193b58(0x212),MODE_RESET_SCHEDULE='0\x204\x20*\x20*\x20*',LTM_DP_RAW_LOG=a0_0x193b58(0x1d6),LTM_DP_DAILY_DIGESTS=a0_0x193b58(0x1f0),LTM_DP_STATUS=a0_0x193b58(0x21c),LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS=a0_0x193b58(0x246),LTM_DP_DRIFT_CHANNEL=a0_0x193b58(0x29d),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x193b58(0x1b1),SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':a0_0x193b58(0x224),'VACATION':a0_0x193b58(0x200),'PARTY':a0_0x193b58(0x2b0),'GUEST':a0_0x193b58(0x19e)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x193b58(0x2a3)],SYSTEM_MODES[a0_0x193b58(0x26b)]],EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','senior_aal':'PRIORITÄT:\x20Gesundheit\x20und\x20Sicherheit\x20für\x20Senioren\x20(AAL).\x20Erkenne\x20Inaktivität,\x20potenzielle\x20Stürze\x20(indirekt),\x20Schlafunterbrechungen\x20und\x20nächtliche\x20Unruhe.','family':'Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.','single_comfort':a0_0x193b58(0x276),'security':a0_0x193b58(0x272)};class CogniLiving extends utils[a0_0x193b58(0x280)]{constructor(_0x2e008a){const _0x3278bb=a0_0x193b58;super({..._0x2e008a,'name':_0x3278bb(0x1f4)}),this[_0x3278bb(0x21f)]=[],this[_0x3278bb(0x283)]=[],this[_0x3278bb(0x282)]=[],this[_0x3278bb(0x1bf)]=[],this[_0x3278bb(0x199)]=[],this['sensorLastValues']={},this[_0x3278bb(0x1b7)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x3278bb(0x1e5)]=!![],this['exitTimer']=null,this['exitGraceTimer']=null,this[_0x3278bb(0x201)]=![],this[_0x3278bb(0x1f2)]=null,this[_0x3278bb(0x1e0)]=null,this[_0x3278bb(0x20c)]=SYSTEM_MODES[_0x3278bb(0x20e)],this[_0x3278bb(0x22b)]=![],this[_0x3278bb(0x2a1)]=![],this['systemUUID']=_0x3278bb(0x1a8),this[_0x3278bb(0x1ae)]=null,this[_0x3278bb(0x24d)]=null,this[_0x3278bb(0x1f6)]=null,this[_0x3278bb(0x1c0)]=null,this['briefingJob']=null,this['on'](_0x3278bb(0x1de),this[_0x3278bb(0x268)][_0x3278bb(0x243)](this)),this['on']('stateChange',this[_0x3278bb(0x261)][_0x3278bb(0x243)](this)),this['on'](_0x3278bb(0x256),this[_0x3278bb(0x205)][_0x3278bb(0x243)](this)),this['on'](_0x3278bb(0x1f7),this[_0x3278bb(0x26c)][_0x3278bb(0x243)](this));}['tryParse'](_0x3c7a3a){const _0x1ebc3f=a0_0x193b58;if(typeof _0x3c7a3a==='object')return _0x3c7a3a;try{return JSON[_0x1ebc3f(0x2bc)](_0x3c7a3a);}catch(_0x376ff3){return null;}}async[a0_0x193b58(0x2b5)](){const _0x305c5b=a0_0x193b58;try{if(!this[_0x305c5b(0x1c1)][_0x305c5b(0x2a6)])return _0x305c5b(0x19b);let _0x30fc3c='';const _0x26ded1=this['config']['weatherInstance'];if(_0x26ded1)try{if(_0x26ded1['includes'](_0x305c5b(0x1d2))){const _0x5cc53f=await this[_0x305c5b(0x1fd)](_0x26ded1+_0x305c5b(0x21e));if(_0x5cc53f&&_0x5cc53f[_0x305c5b(0x295)])_0x30fc3c=_0x5cc53f[_0x305c5b(0x295)];}else{if(_0x26ded1['includes']('daswetter')){const _0x3c63e3=await this[_0x305c5b(0x1fd)](_0x26ded1+_0x305c5b(0x1a3));if(_0x3c63e3&&_0x3c63e3[_0x305c5b(0x295)])_0x30fc3c=_0x3c63e3[_0x305c5b(0x295)];}else{if(_0x26ded1['includes'](_0x305c5b(0x20a))){const _0x45eb4a=await this[_0x305c5b(0x1fd)](_0x26ded1+'.forecast.current.state');if(_0x45eb4a&&_0x45eb4a[_0x305c5b(0x295)])_0x30fc3c=_0x45eb4a[_0x305c5b(0x295)];}}}}catch(_0x1e717f){}if(!_0x30fc3c){const _0x2d2af2=['accuweather.0',_0x305c5b(0x226),_0x305c5b(0x1ab),_0x305c5b(0x21d)];for(const _0x5bdc87 of _0x2d2af2){try{const _0x130276=await this[_0x305c5b(0x281)](_0x5bdc87);if(_0x130276){if(_0x5bdc87['includes']('accuweather')){const _0x4261fe=await this[_0x305c5b(0x1fd)](_0x5bdc87+_0x305c5b(0x21e));if(_0x4261fe&&_0x4261fe['val']){_0x30fc3c=_0x4261fe[_0x305c5b(0x295)];break;}}}}catch(_0x3ee30a){}}}return _0x30fc3c?_0x305c5b(0x293)+_0x30fc3c:'WETTER:\x20Keine\x20Daten\x20gefunden';}catch(_0x5a38eb){return _0x305c5b(0x24a)+_0x5a38eb['message'];}}async[a0_0x193b58(0x2ac)](){const _0x212581=a0_0x193b58;try{if(!this[_0x212581(0x1c1)][_0x212581(0x2a0)])return _0x212581(0x2b2);let _0x56ea7f=this[_0x212581(0x1c1)]['calendarInstance']||'ical.0',_0x576dd7=this[_0x212581(0x1c1)]['calendarSelection']||[];if(typeof _0x576dd7==='string')_0x576dd7=_0x576dd7[_0x212581(0x259)](',');try{const _0x516655=await this['getForeignStateAsync'](_0x56ea7f+_0x212581(0x1ac));if(_0x516655&&_0x516655['val']){let _0x4da9b8=this['tryParse'](_0x516655[_0x212581(0x295)]);if(_0x4da9b8&&Array[_0x212581(0x1cb)](_0x4da9b8)){if(_0x576dd7['length']>0x0)_0x4da9b8=_0x4da9b8[_0x212581(0x1e6)](_0x3b3166=>_0x576dd7[_0x212581(0x25f)](_0x3b3166['_calName']||''));else return _0x212581(0x23c);if(_0x4da9b8['length']>0x0){const _0x5b3785=_0x4da9b8[_0x212581(0x1b9)](0x0,0x3)[_0x212581(0x2af)](_0x3cae2f=>{const _0x1ad16=_0x212581;let _0xc021f5=_0x3cae2f[_0x1ad16(0x254)];if(_0x3cae2f[_0x1ad16(0x203)])_0xc021f5+='\x20'+_0x3cae2f[_0x1ad16(0x203)];return _0xc021f5+':\x20'+_0x3cae2f[_0x1ad16(0x1c3)]+'\x20('+_0x3cae2f[_0x1ad16(0x296)]+')';});return _0x212581(0x284)+_0x5b3785[_0x212581(0x288)](_0x212581(0x278));}else return _0x212581(0x2a5);}}}catch(_0x33783d){this[_0x212581(0x28f)][_0x212581(0x1c4)](_0x212581(0x255)+_0x33783d['message']);}return _0x212581(0x207);}catch(_0x1bfb9c){return _0x212581(0x228)+_0x1bfb9c[_0x212581(0x1f7)];}}async[a0_0x193b58(0x263)](_0x3c7907){const _0x12892d=a0_0x193b58;try{const _0x14298a=await this[_0x12892d(0x1fd)](_0x3c7907+'.data.table');if(_0x14298a&&_0x14298a[_0x12892d(0x295)]){const _0x5675de=this['tryParse'](_0x14298a[_0x12892d(0x295)]);if(_0x5675de&&Array[_0x12892d(0x1cb)](_0x5675de)){const _0x2b96f6=[...new Set(_0x5675de[_0x12892d(0x2af)](_0x3b18fc=>_0x3b18fc[_0x12892d(0x296)])[_0x12892d(0x1e6)](Boolean))];return _0x2b96f6[_0x12892d(0x1c6)]();}}return[];}catch(_0xd5e97a){return this[_0x12892d(0x28f)][_0x12892d(0x1b6)](_0x12892d(0x298)+_0xd5e97a[_0x12892d(0x1f7)]),[];}}async[a0_0x193b58(0x1da)](){const _0x1443cf=a0_0x193b58;try{const _0x78228c=await this[_0x1443cf(0x27d)](_0x1443cf(0x24e));_0x78228c&&_0x78228c[_0x1443cf(0x295)]&&(this[_0x1443cf(0x21f)]=JSON[_0x1443cf(0x2bc)](_0x78228c['val'][_0x1443cf(0x29a)]()));}catch(_0x328bef){this[_0x1443cf(0x21f)]=[];}try{const _0x28201c=await this[_0x1443cf(0x27d)](_0x1443cf(0x1ce));if(_0x28201c&&_0x28201c['val'])this[_0x1443cf(0x283)]=JSON['parse'](_0x28201c[_0x1443cf(0x295)]['toString']());}catch(_0x5cbbb3){this[_0x1443cf(0x283)]=[];}}async[a0_0x193b58(0x273)](){const _0x1881bd=a0_0x193b58;try{const _0x33873b=await this[_0x1881bd(0x281)](_0x1881bd(0x25a));if(_0x33873b&&_0x33873b[_0x1881bd(0x210)]&&_0x33873b[_0x1881bd(0x210)][_0x1881bd(0x1d5)])return _0x33873b[_0x1881bd(0x210)][_0x1881bd(0x1d5)];return _0x1881bd(0x2bb);}catch(_0x148375){return'uuid-error';}}async[a0_0x193b58(0x28b)](_0x5f0d6e){const _0x5e5ee4=a0_0x193b58;if(!_0x5f0d6e)return![];this['systemUUID']=await this[_0x5e5ee4(0x273)]();if(_0x5f0d6e==='TEST-PRO-KEY'||_0x5f0d6e['startsWith']('PRO-'))return!![];return![];}async[a0_0x193b58(0x1ef)](){const _0x291680=a0_0x193b58;await this[_0x291680(0x27c)]('LTM',{'type':_0x291680(0x1a0),'common':{'name':_0x291680(0x213)},'native':{}}),await this[_0x291680(0x27c)](LTM_DP_RAW_LOG,{'type':_0x291680(0x2ae),'common':{'name':_0x291680(0x1d1),'type':'string','role':_0x291680(0x2a8),'read':!![],'write':![]},'native':{}}),await this[_0x291680(0x27c)](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':'Daily\x20Digests','type':'string','role':_0x291680(0x2a8),'read':!![],'write':![]},'native':{}}),await this[_0x291680(0x27c)](LTM_DP_STATUS,{'type':_0x291680(0x2ae),'common':{'name':_0x291680(0x23e),'type':_0x291680(0x22e),'role':_0x291680(0x19c),'read':!![],'write':![]},'native':{}}),await this[_0x291680(0x27c)](LTM_DP_TRIGGER_DIGEST,{'type':'state','common':{'name':_0x291680(0x1c5),'type':_0x291680(0x234),'role':_0x291680(0x237),'read':!![],'write':!![],'def':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_BASELINE_STATUS,{'type':_0x291680(0x2ae),'common':{'name':_0x291680(0x1e1),'type':'string','role':_0x291680(0x19c),'read':!![],'write':![]},'native':{}});}async['checkLtmDriftObjects'](){const _0x4b7218=a0_0x193b58;await this[_0x4b7218(0x27c)](LTM_DP_DRIFT_CHANNEL,{'type':_0x4b7218(0x1a0),'common':{'name':_0x4b7218(0x239)},'native':{}}),await this[_0x4b7218(0x27c)](LTM_DP_DRIFT_STATUS,{'type':_0x4b7218(0x2ae),'common':{'name':'Drift\x20Status','type':_0x4b7218(0x22e),'role':'state','read':!![],'write':![],'def':'N/A'},'native':{}}),await this[_0x4b7218(0x27c)](LTM_DP_DRIFT_DETAILS,{'type':_0x4b7218(0x2ae),'common':{'name':_0x4b7218(0x244),'type':_0x4b7218(0x22e),'role':_0x4b7218(0x19c),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_DRIFT_LAST_CHECK,{'type':'state','common':{'name':'Last\x20Check','type':_0x4b7218(0x1f9),'role':_0x4b7218(0x254),'read':!![],'write':![]},'native':{}});}async[a0_0x193b58(0x285)](){const _0x2564f1=a0_0x193b58;await this[_0x2564f1(0x27c)](_0x2564f1(0x216),{'type':_0x2564f1(0x1a0),'common':{'name':_0x2564f1(0x218)},'native':{}}),await this['extendObjectAsync'](SYSTEM_DP_MODE,{'type':_0x2564f1(0x2ae),'common':{'name':'System\x20Mode','type':_0x2564f1(0x22e),'role':_0x2564f1(0x2ae),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x2564f1(0x20e)],'states':{[SYSTEM_MODES[_0x2564f1(0x20e)]]:'Normal',[SYSTEM_MODES[_0x2564f1(0x22a)]]:_0x2564f1(0x269),[SYSTEM_MODES[_0x2564f1(0x2a3)]]:'Party',[SYSTEM_MODES[_0x2564f1(0x26b)]]:_0x2564f1(0x26a)}},'native':{}});}async['createAllObjects'](){const _0x535916=a0_0x193b58;try{await this[_0x535916(0x285)](),await this[_0x535916(0x242)](_0x535916(0x275),{'type':'state','common':{'name':'Presence\x20Status','type':_0x535916(0x234),'role':_0x535916(0x2b1),'read':!![],'write':![],'def':!![]},'native':{}}),await this[_0x535916(0x242)](_0x535916(0x1ee),{'type':_0x535916(0x2ae),'common':{'name':_0x535916(0x27b),'type':_0x535916(0x22e),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x535916(0x242)](_0x535916(0x24e),{'type':_0x535916(0x2ae),'common':{'name':_0x535916(0x279),'type':_0x535916(0x22e),'role':_0x535916(0x2a8),'read':!![],'write':![]},'native':{}}),await this[_0x535916(0x242)](_0x535916(0x287),{'type':_0x535916(0x2ae),'common':{'name':_0x535916(0x1b4),'type':_0x535916(0x234),'role':_0x535916(0x237),'read':!![],'write':!![],'def':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x535916(0x232),{'type':_0x535916(0x2ae),'common':{'name':'Trigger\x20Briefing\x20(Test)','type':'boolean','role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x535916(0x242)](_0x535916(0x2ab),{'type':_0x535916(0x2ae),'common':{'name':'Last\x20Result','type':'string','role':_0x535916(0x2a8),'read':!![],'write':![]},'native':{}}),await this[_0x535916(0x242)](_0x535916(0x236),{'type':_0x535916(0x2ae),'common':{'name':_0x535916(0x250),'type':_0x535916(0x234),'role':_0x535916(0x28e),'read':!![],'write':![],'def':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x535916(0x251),{'type':_0x535916(0x2ae),'common':{'name':_0x535916(0x19d),'type':_0x535916(0x234),'role':_0x535916(0x1a5),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x535916(0x242)](_0x535916(0x294),{'type':_0x535916(0x2ae),'common':{'name':'Alert\x20Reason','type':_0x535916(0x22e),'role':'text.alarm','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x535916(0x29c),{'type':_0x535916(0x2ae),'common':{'name':_0x535916(0x1bb),'type':'string','role':_0x535916(0x19c),'read':!![],'write':![]},'native':{}}),await this[_0x535916(0x242)]('analysis.deviationFromBaseline',{'type':'state','common':{'name':_0x535916(0x1eb),'type':_0x535916(0x22e),'role':_0x535916(0x2ae),'read':!![],'write':![],'def':'N/A'},'native':{}}),await this[_0x535916(0x242)](_0x535916(0x1fa),{'type':_0x535916(0x2ae),'common':{'name':_0x535916(0x233),'type':_0x535916(0x22e),'role':_0x535916(0x19c),'read':!![],'write':![]},'native':{}}),await this[_0x535916(0x242)]('analysis.comfortSuggestion',{'type':_0x535916(0x2ae),'common':{'name':_0x535916(0x266),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await this[_0x535916(0x27c)](_0x535916(0x241),{'type':_0x535916(0x1a0),'common':{'name':_0x535916(0x238)},'native':{}}),await this['setObjectNotExistsAsync']('analysis.automation.patternDetected',{'type':_0x535916(0x2ae),'common':{'name':_0x535916(0x1af),'type':_0x535916(0x234),'role':_0x535916(0x2b1),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x535916(0x242)](_0x535916(0x21b),{'type':_0x535916(0x2ae),'common':{'name':_0x535916(0x29e),'type':_0x535916(0x22e),'role':_0x535916(0x19c),'read':!![],'write':![]},'native':{}}),await this[_0x535916(0x242)]('analysis.automation.suggestedAction',{'type':'state','common':{'name':_0x535916(0x1cd),'type':'string','role':_0x535916(0x19c),'read':!![],'write':![]},'native':{}}),await this[_0x535916(0x242)](_0x535916(0x1ce),{'type':_0x535916(0x2ae),'common':{'name':'Logbook','type':_0x535916(0x22e),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x535916(0x242)]('analysis.feedbackHistory',{'type':_0x535916(0x2ae),'common':{'name':_0x535916(0x229),'type':_0x535916(0x22e),'role':_0x535916(0x2a8),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x535916(0x27c)](_0x535916(0x2a9),{'type':_0x535916(0x1a0),'common':{'name':'Health\x20&\x20Sleep\x20Analysis'},'native':{}}),await this[_0x535916(0x242)](_0x535916(0x1aa),{'type':_0x535916(0x2ae),'common':{'name':'Sleep\x20Score\x20(0-100)','type':_0x535916(0x1f9),'role':_0x535916(0x270),'read':!![],'write':![],'def':0x0},'native':{}}),await this[_0x535916(0x242)](_0x535916(0x2a4),{'type':_0x535916(0x2ae),'common':{'name':_0x535916(0x271),'type':'string','role':_0x535916(0x19c),'read':!![],'write':![],'def':_0x535916(0x24b)},'native':{}}),await this[_0x535916(0x242)](_0x535916(0x2b6),{'type':_0x535916(0x2ae),'common':{'name':_0x535916(0x1dc),'type':'string','role':_0x535916(0x19c),'read':!![],'write':![],'def':''},'native':{}}),await this[_0x535916(0x1ef)](),await this['checkLtmDriftObjects']();}catch(_0x3f7066){this['log'][_0x535916(0x1b6)]('Error\x20creating\x20objects:\x20'+_0x3f7066[_0x535916(0x1f7)]);}}async[a0_0x193b58(0x268)](){const _0x3fb111=a0_0x193b58;this[_0x3fb111(0x28f)][_0x3fb111(0x28c)](_0x3fb111(0x1bd)+this[_0x3fb111(0x2b9)]+')');try{const _0x33da6f=['analysis.history_debug_00',_0x3fb111(0x1e4),_0x3fb111(0x274),_0x3fb111(0x1e2),_0x3fb111(0x2ad),_0x3fb111(0x1d0),_0x3fb111(0x222),_0x3fb111(0x220),_0x3fb111(0x1d9),_0x3fb111(0x247)];for(const _0x39f828 of _0x33da6f){try{const _0x367f4a=await this['getObjectAsync'](_0x39f828);_0x367f4a&&await this['delObjectAsync'](_0x39f828);}catch(_0x8dcffc){}}}catch(_0x1ececc){}this[_0x3fb111(0x1c1)][_0x3fb111(0x27e)]=this[_0x3fb111(0x1c1)]['licenseKey']||'';try{this[_0x3fb111(0x22b)]=await this[_0x3fb111(0x28b)](this['config'][_0x3fb111(0x27e)]);}catch(_0x5dfaa0){this['log'][_0x3fb111(0x1b6)](_0x3fb111(0x22c)+_0x5dfaa0[_0x3fb111(0x1f7)]);}if(!this[_0x3fb111(0x1c1)][_0x3fb111(0x23b)]||this['config']['inactivityThresholdHours']<0.1)this[_0x3fb111(0x1c1)][_0x3fb111(0x23b)]=0xc;try{await this[_0x3fb111(0x1da)]();}catch(_0x417f1d){this[_0x3fb111(0x28f)]['error'](_0x3fb111(0x227)+_0x417f1d[_0x3fb111(0x1f7)]);}try{const _0x5a850c=await this[_0x3fb111(0x281)]('system.config');_0x5a850c&&_0x5a850c[_0x3fb111(0x1a7)]&&(this['systemConfig']={'latitude':_0x5a850c[_0x3fb111(0x1a7)][_0x3fb111(0x1b8)]||0x0,'longitude':_0x5a850c[_0x3fb111(0x1a7)]['longitude']||0x0,'city':_0x5a850c[_0x3fb111(0x1a7)]['city']||''});}catch(_0x2eb2cf){}if(this[_0x3fb111(0x1c1)]['geminiApiKey'])try{this[_0x3fb111(0x1f2)]=new GoogleGenerativeAI(this[_0x3fb111(0x1c1)]['geminiApiKey']),this[_0x3fb111(0x1e0)]=this['genAI'][_0x3fb111(0x297)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x3fb111(0x292)}}),this[_0x3fb111(0x28f)][_0x3fb111(0x28c)]('Gemini\x20AI\x20initialized.');}catch(_0x113ff2){this[_0x3fb111(0x28f)][_0x3fb111(0x1b6)]('Gemini\x20Init\x20Error:\x20'+_0x113ff2[_0x3fb111(0x1f7)]);}try{await this[_0x3fb111(0x1ca)]();}catch(_0x3a58eb){this[_0x3fb111(0x28f)][_0x3fb111(0x1b6)](_0x3fb111(0x262)+_0x3a58eb[_0x3fb111(0x1f7)]);}try{await this[_0x3fb111(0x2b7)]();}catch(_0x4a64f1){this['log']['error'](_0x3fb111(0x1fb)+_0x4a64f1[_0x3fb111(0x1f7)]);}try{await this[_0x3fb111(0x25b)]();}catch(_0xb23187){this['log'][_0x3fb111(0x1b6)](_0x3fb111(0x2a2)+_0xb23187['message']);}try{await this[_0x3fb111(0x1f1)]();}catch(_0x32d2c1){this[_0x3fb111(0x28f)][_0x3fb111(0x1b6)]('loadDailyDigests\x20failed:\x20'+_0x32d2c1[_0x3fb111(0x1f7)]);}this[_0x3fb111(0x198)]('analysis.trigger'),this[_0x3fb111(0x198)](LTM_DP_TRIGGER_DIGEST),this[_0x3fb111(0x198)](_0x3fb111(0x248)),this[_0x3fb111(0x198)]('analysis.triggerBriefing');const _0x34af01=this[_0x3fb111(0x1c1)]['devices'];if(_0x34af01&&_0x34af01[_0x3fb111(0x1cf)]>0x0){this['log'][_0x3fb111(0x28c)](_0x3fb111(0x245)+_0x34af01[_0x3fb111(0x1cf)]+_0x3fb111(0x291));for(const _0x3b75df of _0x34af01){if(_0x3b75df['id']){await this[_0x3fb111(0x221)](_0x3b75df['id']);try{const _0x5898fe=await this[_0x3fb111(0x1fd)](_0x3b75df['id']);if(_0x5898fe)this[_0x3fb111(0x20b)][_0x3b75df['id']]=_0x5898fe['val'];}catch(_0x6a0a85){}}}}const _0x30478c=this[_0x3fb111(0x1c1)][_0x3fb111(0x1e7)]||[];if(_0x30478c['length']>0x0){this['log']['info']('Subscribing\x20to\x20'+_0x30478c[_0x3fb111(0x1cf)]+_0x3fb111(0x1f5));for(const _0x5a8a24 of _0x30478c){await this[_0x3fb111(0x221)](_0x5a8a24);}try{await this[_0x3fb111(0x1ad)]();}catch(_0x823ec8){}}if(this[_0x3fb111(0x1ae)])clearInterval(this[_0x3fb111(0x1ae)]);const _0x1d4561=this[_0x3fb111(0x1c1)]['analysisInterval']||0xf;_0x1d4561>0x0&&(this[_0x3fb111(0x28f)][_0x3fb111(0x28c)](_0x3fb111(0x26e)+_0x1d4561+_0x3fb111(0x20d)+this[_0x3fb111(0x1c1)][_0x3fb111(0x23b)]+'h.'),this[_0x3fb111(0x1ae)]=setInterval(()=>{const _0x451267=_0x3fb111;try{this[_0x451267(0x1db)]();}catch(_0x2bcebd){this[_0x451267(0x28f)][_0x451267(0x1b6)](_0x451267(0x1a6)+_0x2bcebd[_0x451267(0x1f7)]);}},_0x1d4561*0x3c*0x3e8)),this[_0x3fb111(0x235)](),this['setupModeResetScheduler'](),this[_0x3fb111(0x1b2)](),this[_0x3fb111(0x1b5)]();}async[a0_0x193b58(0x2b7)](){const _0x496613=a0_0x193b58;try{const _0x9ad2d5=await this[_0x496613(0x27d)](SYSTEM_DP_MODE);_0x9ad2d5&&_0x9ad2d5[_0x496613(0x295)]&&Object[_0x496613(0x289)](SYSTEM_MODES)[_0x496613(0x25f)](_0x9ad2d5[_0x496613(0x295)])?this[_0x496613(0x20c)]=_0x9ad2d5[_0x496613(0x295)]:(this[_0x496613(0x20c)]=SYSTEM_MODES['NORMAL'],await this['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x4c7ce3){this[_0x496613(0x20c)]=SYSTEM_MODES[_0x496613(0x20e)];}}async[a0_0x193b58(0x25b)](){const _0x36ec4b=a0_0x193b58;try{const _0x50e6d1=await this[_0x36ec4b(0x27d)](LTM_DP_RAW_LOG);if(_0x50e6d1&&_0x50e6d1[_0x36ec4b(0x295)])this[_0x36ec4b(0x1bf)]=JSON['parse'](_0x50e6d1[_0x36ec4b(0x295)]);}catch(_0x1e0c0f){this[_0x36ec4b(0x1bf)]=[];}}async[a0_0x193b58(0x1f1)](){const _0x4e69d4=a0_0x193b58;try{const _0x5e2cad=await this[_0x4e69d4(0x27d)](LTM_DP_DAILY_DIGESTS);if(_0x5e2cad&&_0x5e2cad[_0x4e69d4(0x295)])this['dailyDigests']=JSON[_0x4e69d4(0x2bc)](_0x5e2cad[_0x4e69d4(0x295)]);}catch(_0x2d1816){this[_0x4e69d4(0x199)]=[];}await this[_0x4e69d4(0x260)]();}async[a0_0x193b58(0x260)](){const _0x5e3c5a=a0_0x193b58;if(!this[_0x5e3c5a(0x22b)]){await this[_0x5e3c5a(0x28a)](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0x40cefc=this[_0x5e3c5a(0x199)][_0x5e3c5a(0x1cf)]>=(this[_0x5e3c5a(0x1c1)]['minDaysForBaseline']||0x7)?_0x5e3c5a(0x202)+this[_0x5e3c5a(0x199)][_0x5e3c5a(0x1cf)]+'\x20Tage)':_0x5e3c5a(0x267)+this[_0x5e3c5a(0x199)][_0x5e3c5a(0x1cf)]+'/'+(this['config'][_0x5e3c5a(0x1a4)]||0x7)+')';await this[_0x5e3c5a(0x28a)](LTM_DP_BASELINE_STATUS,{'val':_0x40cefc,'ack':!![]});}async[a0_0x193b58(0x1ad)](){const _0x5aaa41=a0_0x193b58;try{const _0x579063=this[_0x5aaa41(0x1c1)]['presenceDevices']||[];let _0x52d55e=![];for(const _0x446987 of _0x579063){try{const _0x3f8b8f=await this['getForeignStateAsync'](_0x446987);if(_0x3f8b8f&&(_0x3f8b8f['val']===!![]||_0x3f8b8f['val']===_0x5aaa41(0x290)||_0x3f8b8f[_0x5aaa41(0x295)]===0x1)){_0x52d55e=!![];break;}}catch(_0x17c6d9){}}return _0x52d55e&&(this['exitTimer']&&(this[_0x5aaa41(0x28f)][_0x5aaa41(0x28c)](_0x5aaa41(0x2b3)),this['abortExitTimer']()),!this[_0x5aaa41(0x1e5)]&&this[_0x5aaa41(0x20c)]===SYSTEM_MODES['NORMAL']&&this[_0x5aaa41(0x1fc)](!![])),_0x52d55e;}catch(_0x439632){return this['log'][_0x5aaa41(0x1b6)](_0x5aaa41(0x2ba)+_0x439632['message']),![];}}['setupLtmScheduler'](){const _0x300a25=a0_0x193b58;try{if(this[_0x300a25(0x24d)])this[_0x300a25(0x24d)][_0x300a25(0x20f)]();if(!this[_0x300a25(0x22b)]){this[_0x300a25(0x28a)](LTM_DP_STATUS,{'val':_0x300a25(0x23f),'ack':!![]});return;}this[_0x300a25(0x24d)]=schedule['scheduleJob'](LTM_SCHEDULE,()=>this[_0x300a25(0x19f)]());}catch(_0x5a6bed){this[_0x300a25(0x28f)][_0x300a25(0x1b6)](_0x300a25(0x230)+_0x5a6bed[_0x300a25(0x1f7)]);}}[a0_0x193b58(0x2a7)](){const _0x519885=a0_0x193b58;try{if(this['modeResetJob'])this[_0x519885(0x1f6)]['cancel']();this['modeResetJob']=schedule[_0x519885(0x22d)](MODE_RESET_SCHEDULE,async()=>{const _0x36fa5b=_0x519885;await this[_0x36fa5b(0x2b7)](),AUTO_RESET_MODES[_0x36fa5b(0x25f)](this['currentSystemMode'])&&await this[_0x36fa5b(0x28a)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x36fa5b(0x20e)],'ack':![]});});}catch(_0x5e183f){this['log'][_0x519885(0x1b6)]('Reset\x20Sched\x20Error:\x20'+_0x5e183f[_0x519885(0x1f7)]);}}[a0_0x193b58(0x1b2)](){const _0xb34448=a0_0x193b58;try{if(this[_0xb34448(0x1c0)])clearInterval(this[_0xb34448(0x1c0)]);if(!this[_0xb34448(0x22b)])return;this[_0xb34448(0x1c0)]=setInterval(()=>this[_0xb34448(0x1cc)](),(this[_0xb34448(0x1c1)][_0xb34448(0x264)]||0x18)*0x36ee80),setTimeout(()=>this[_0xb34448(0x1cc)](),0x1388);}catch(_0xc876fb){this[_0xb34448(0x28f)]['error']('Drift\x20Sched\x20Error:\x20'+_0xc876fb[_0xb34448(0x1f7)]);}}[a0_0x193b58(0x1b5)](){const _0x51cc3c=a0_0x193b58;try{if(this['briefingJob'])this['briefingJob'][_0x51cc3c(0x20f)]();if(!this['config'][_0x51cc3c(0x204)])return;const _0x21997f=(this[_0x51cc3c(0x1c1)][_0x51cc3c(0x1d8)]||'08:00')[_0x51cc3c(0x259)](':'),_0x5c63d0=parseInt(_0x21997f[0x0])||0x8,_0xef21d6=parseInt(_0x21997f[0x1])||0x0,_0x8ddfe2=_0xef21d6+'\x20'+_0x5c63d0+_0x51cc3c(0x21a);this['log']['info'](_0x51cc3c(0x286)+_0x5c63d0+':'+(_0xef21d6<0xa?'0'+_0xef21d6:_0xef21d6)),this[_0x51cc3c(0x29f)]=schedule['scheduleJob'](_0x8ddfe2,()=>{const _0x3e92d2=_0x51cc3c;this[_0x3e92d2(0x223)]();});}catch(_0x5a4ac9){this[_0x51cc3c(0x28f)][_0x51cc3c(0x1b6)](_0x51cc3c(0x24c)+_0x5a4ac9[_0x51cc3c(0x1f7)]);}}async[a0_0x193b58(0x1cc)](){const _0x5bf3f7=a0_0x193b58;if(!this[_0x5bf3f7(0x22b)]||!this['geminiModel'])return;const _0x36cb61=this['config'][_0x5bf3f7(0x219)]||0xe;if(this[_0x5bf3f7(0x199)][_0x5bf3f7(0x1cf)]<_0x36cb61+(this['config'][_0x5bf3f7(0x1a4)]||0x7)){await this[_0x5bf3f7(0x28a)](LTM_DP_DRIFT_STATUS,{'val':_0x5bf3f7(0x1b3),'ack':!![]});return;}const _0x2cd257=this[_0x5bf3f7(0x199)]['slice'](-_0x36cb61),_0x384ac3=this['dailyDigests'][_0x5bf3f7(0x1b9)](0x0,this['dailyDigests'][_0x5bf3f7(0x1cf)]-_0x36cb61),_0x55aac3=_0x5bf3f7(0x1a2)+JSON[_0x5bf3f7(0x258)](_0x384ac3)+'\x0a\x0aA\x20(STB):\x0a'+JSON['stringify'](_0x2cd257);try{const _0x5181c5=await this['geminiModel'][_0x5bf3f7(0x1bc)](_0x55aac3),_0x55d441=JSON['parse'](_0x5181c5['response']['text']()['replace'](/```json|```/g,'')['trim']());_0x55d441[_0x5bf3f7(0x1a9)]&&(await this[_0x5bf3f7(0x28a)](LTM_DP_DRIFT_STATUS,{'val':_0x55d441[_0x5bf3f7(0x1a9)],'ack':!![]}),await this[_0x5bf3f7(0x28a)](LTM_DP_DRIFT_DETAILS,{'val':_0x55d441[_0x5bf3f7(0x23d)],'ack':!![]}),await this[_0x5bf3f7(0x28a)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x5bf3f7(0x26f)](),'ack':!![]}));}catch(_0x2f5a14){}}async['saveRawEventLog'](){const _0xfa9c3b=a0_0x193b58;this[_0xfa9c3b(0x1bf)]['length']>RAW_LOG_MAX_SIZE&&this[_0xfa9c3b(0x1bf)][_0xfa9c3b(0x217)](0x0,this[_0xfa9c3b(0x1bf)][_0xfa9c3b(0x1cf)]-RAW_LOG_MAX_SIZE),await this[_0xfa9c3b(0x28a)](LTM_DP_RAW_LOG,{'val':JSON[_0xfa9c3b(0x258)](this[_0xfa9c3b(0x1bf)]),'ack':!![]});}async[a0_0x193b58(0x1ea)](_0x35565f=!![]){const _0x36a7f6=a0_0x193b58,_0x208d80=this[_0x36a7f6(0x1c1)]['ltmLtbWindowDays']||0x3c;this['dailyDigests'][_0x36a7f6(0x1cf)]>_0x208d80&&this[_0x36a7f6(0x199)][_0x36a7f6(0x217)](0x0,this['dailyDigests'][_0x36a7f6(0x1cf)]-_0x208d80);await this[_0x36a7f6(0x28a)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](this[_0x36a7f6(0x199)]),'ack':!![]});if(_0x35565f)await this[_0x36a7f6(0x260)]();}async['updateAnalysisHistory'](_0x5ea1ce){const _0x25fb18=a0_0x193b58;this['analysisHistory']['unshift'](_0x5ea1ce);if(this[_0x25fb18(0x283)][_0x25fb18(0x1cf)]>ANALYSIS_HISTORY_MAX_SIZE)this[_0x25fb18(0x283)][_0x25fb18(0x249)]();await this['setStateAsync'](_0x25fb18(0x1ce),{'val':JSON[_0x25fb18(0x258)](this['analysisHistory']),'ack':!![]});}async[a0_0x193b58(0x253)](){const _0x540336=a0_0x193b58;await this[_0x540336(0x28a)](_0x540336(0x29c),{'val':_0x540336(0x29b),'ack':!![]}),await this[_0x540336(0x28a)](_0x540336(0x1f8),{'val':this[_0x540336(0x22b)]?_0x540336(0x24f):'N/A\x20(Pro\x20Feature)','ack':!![]}),await this[_0x540336(0x28a)](_0x540336(0x236),{'val':![],'ack':!![]}),await this[_0x540336(0x28a)]('analysis.isEmergency',{'val':![],'ack':!![]}),this[_0x540336(0x2a1)]=![];}async[a0_0x193b58(0x26c)](_0x25ce77){const _0x58ecfe=a0_0x193b58;if(typeof _0x25ce77===_0x58ecfe(0x27f)&&_0x25ce77[_0x58ecfe(0x1f7)])try{if(_0x25ce77[_0x58ecfe(0x1c9)]===_0x58ecfe(0x28d)){if(!_0x25ce77['message'][_0x58ecfe(0x240)])return this[_0x58ecfe(0x277)](_0x25ce77['from'],_0x25ce77[_0x58ecfe(0x1c9)],{'success':![],'message':_0x58ecfe(0x299)},_0x25ce77['callback']);try{const _0x236720=new GoogleGenerativeAI(_0x25ce77[_0x58ecfe(0x1f7)][_0x58ecfe(0x240)])[_0x58ecfe(0x297)]({'model':_0x58ecfe(0x1ba)});await _0x236720[_0x58ecfe(0x1bc)]('test'),this['sendTo'](_0x25ce77[_0x58ecfe(0x1dd)],_0x25ce77[_0x58ecfe(0x1c9)],{'success':!![],'message':_0x58ecfe(0x25d)},_0x25ce77[_0x58ecfe(0x1d3)]);}catch(_0x4725c3){this['sendTo'](_0x25ce77['from'],_0x25ce77[_0x58ecfe(0x1c9)],{'success':![],'message':_0x4725c3[_0x58ecfe(0x1f7)]},_0x25ce77[_0x58ecfe(0x1d3)]);}}else{if(_0x25ce77[_0x58ecfe(0x1c9)]==='testNotification'){const _0x1d5982=await this['sendNotification'](_0x58ecfe(0x1b0),!![]);this[_0x58ecfe(0x277)](_0x25ce77['from'],_0x25ce77[_0x58ecfe(0x1c9)],{'success':_0x1d5982>0x0,'message':_0x1d5982+_0x58ecfe(0x209)},_0x25ce77['callback']);}else{if(_0x25ce77[_0x58ecfe(0x1c9)]==='getLtmData'){if(!this[_0x58ecfe(0x22b)])return this[_0x58ecfe(0x277)](_0x25ce77[_0x58ecfe(0x1dd)],_0x25ce77[_0x58ecfe(0x1c9)],{'success':![],'isPro':![]},_0x25ce77[_0x58ecfe(0x1d3)]);let _0x98983e={'status':_0x58ecfe(0x1ec),'details':'','lastCheck':0x0};try{_0x98983e[_0x58ecfe(0x1a1)]=(await this[_0x58ecfe(0x27d)](LTM_DP_DRIFT_STATUS))[_0x58ecfe(0x295)],_0x98983e['details']=(await this[_0x58ecfe(0x27d)](LTM_DP_DRIFT_DETAILS))[_0x58ecfe(0x295)],_0x98983e['lastCheck']=(await this[_0x58ecfe(0x27d)](LTM_DP_DRIFT_LAST_CHECK))[_0x58ecfe(0x295)];}catch(_0x4f5b17){}this[_0x58ecfe(0x277)](_0x25ce77[_0x58ecfe(0x1dd)],_0x25ce77[_0x58ecfe(0x1c9)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x58ecfe(0x199)],'driftAnalysis':_0x98983e,'analysisHistory':this['analysisHistory']},_0x25ce77[_0x58ecfe(0x1d3)]);}else{if(_0x25ce77[_0x58ecfe(0x1c9)]===_0x58ecfe(0x214)){const _0x2762bf=await this[_0x58ecfe(0x1df)](_0x58ecfe(0x1ff),_0x58ecfe(0x252)),_0x4dfb6f=[];if(_0x2762bf)for(const _0x2a8b2a in _0x2762bf){const _0x1b5ce6=_0x2762bf[_0x2a8b2a],_0x321697=(_0x1b5ce6[_0x58ecfe(0x1a7)]&&typeof _0x1b5ce6[_0x58ecfe(0x1a7)][_0x58ecfe(0x1e3)]==='object'?_0x1b5ce6[_0x58ecfe(0x1a7)][_0x58ecfe(0x1e3)]['de']:_0x1b5ce6[_0x58ecfe(0x1a7)][_0x58ecfe(0x1e3)])||_0x1b5ce6[_0x58ecfe(0x1a7)][_0x58ecfe(0x1e3)];_0x4dfb6f[_0x58ecfe(0x2aa)]({'id':_0x2a8b2a,'name':_0x321697});}this[_0x58ecfe(0x277)](_0x25ce77[_0x58ecfe(0x1dd)],_0x25ce77['command'],{'success':!![],'enums':_0x4dfb6f},_0x25ce77[_0x58ecfe(0x1d3)]);}else{if(_0x25ce77[_0x58ecfe(0x1c9)]===_0x58ecfe(0x265))try{const _0x56074c=await this[_0x58ecfe(0x231)](_0x25ce77[_0x58ecfe(0x1f7)]||{});this['sendTo'](_0x25ce77[_0x58ecfe(0x1dd)],_0x25ce77['command'],{'success':!![],'devices':_0x56074c},_0x25ce77['callback']);}catch(_0x305e59){this[_0x58ecfe(0x277)](_0x25ce77[_0x58ecfe(0x1dd)],_0x25ce77['command'],{'success':![],'error':_0x305e59[_0x58ecfe(0x1f7)]},_0x25ce77['callback']);}else{if(_0x25ce77[_0x58ecfe(0x1c9)]===_0x58ecfe(0x257)){const {historyId:_0x4c15a6,rating:_0x1e8cee,comment:_0x12df2f,alertReason:_0x312f45}=_0x25ce77[_0x58ecfe(0x1f7)];_0x4c15a6&&_0x1e8cee?(await this[_0x58ecfe(0x1f3)]({'timestamp':Date[_0x58ecfe(0x26f)](),'historyId':_0x4c15a6,'rating':_0x1e8cee,'comment':_0x12df2f,'alertReason':_0x312f45}),this[_0x58ecfe(0x277)](_0x25ce77[_0x58ecfe(0x1dd)],_0x25ce77[_0x58ecfe(0x1c9)],{'success':!![]},_0x25ce77[_0x58ecfe(0x1d3)])):this[_0x58ecfe(0x277)](_0x25ce77[_0x58ecfe(0x1dd)],_0x25ce77[_0x58ecfe(0x1c9)],{'success':![],'error':_0x58ecfe(0x215)},_0x25ce77[_0x58ecfe(0x1d3)]);}else{if(_0x25ce77['command']===_0x58ecfe(0x25c)){const _0x583d84=await this[_0x58ecfe(0x2b5)](),_0x51c2fd=await this[_0x58ecfe(0x2ac)]();this[_0x58ecfe(0x277)](_0x25ce77[_0x58ecfe(0x1dd)],_0x25ce77[_0x58ecfe(0x1c9)],{'success':!![],'weather':_0x583d84,'calendar':_0x51c2fd},_0x25ce77[_0x58ecfe(0x1d3)]);}else{if(_0x25ce77[_0x58ecfe(0x1c9)]===_0x58ecfe(0x263)){const _0x2053f9=_0x25ce77[_0x58ecfe(0x1f7)][_0x58ecfe(0x23a)];if(!_0x2053f9)return this[_0x58ecfe(0x277)](_0x25ce77[_0x58ecfe(0x1dd)],_0x25ce77[_0x58ecfe(0x1c9)],{'success':![],'error':_0x58ecfe(0x25e)},_0x25ce77['callback']);const _0x5537f2=await this[_0x58ecfe(0x263)](_0x2053f9);this[_0x58ecfe(0x277)](_0x25ce77['from'],_0x25ce77['command'],{'success':!![],'names':_0x5537f2},_0x25ce77[_0x58ecfe(0x1d3)]);}}}}}}}}}catch(_0x1a5d3d){this[_0x58ecfe(0x28f)][_0x58ecfe(0x1b6)](_0x58ecfe(0x26d)+_0x25ce77[_0x58ecfe(0x1c9)]+':\x20'+_0x1a5d3d[_0x58ecfe(0x1f7)]);if(_0x25ce77[_0x58ecfe(0x1d3)])this[_0x58ecfe(0x277)](_0x25ce77[_0x58ecfe(0x1dd)],_0x25ce77[_0x58ecfe(0x1c9)],{'success':![],'error':_0x1a5d3d[_0x58ecfe(0x1f7)]},_0x25ce77['callback']);}}}if(require['main']!==module)module[a0_0x193b58(0x1c2)]=_0x5e86f7=>new CogniLiving(_0x5e86f7);else new CogniLiving();