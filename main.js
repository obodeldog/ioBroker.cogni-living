const a0_0x2b6918=a0_0x1e44;function a0_0x1e44(_0x4eb72e,_0x5d4bc6){const _0x3caa2c=a0_0x9a54();return a0_0x1e44=function(_0x3f8805,_0x254de8){_0x3f8805=_0x3f8805-0xb7;let _0x9a5478=_0x3caa2c[_0x3f8805];return _0x9a5478;},a0_0x1e44(_0x4eb72e,_0x5d4bc6);}(function(_0x266b15,_0x377abb){const _0x513fc0=a0_0x1e44,_0x5303da=_0x266b15();while(!![]){try{const _0x498acb=-parseInt(_0x513fc0(0x1e8))/0x1+-parseInt(_0x513fc0(0x1c2))/0x2+parseInt(_0x513fc0(0xf3))/0x3*(parseInt(_0x513fc0(0x13f))/0x4)+parseInt(_0x513fc0(0x1cb))/0x5*(-parseInt(_0x513fc0(0x183))/0x6)+parseInt(_0x513fc0(0xe3))/0x7*(-parseInt(_0x513fc0(0x136))/0x8)+-parseInt(_0x513fc0(0x19b))/0x9*(parseInt(_0x513fc0(0x150))/0xa)+-parseInt(_0x513fc0(0x19c))/0xb*(-parseInt(_0x513fc0(0x137))/0xc);if(_0x498acb===_0x377abb)break;else _0x5303da['push'](_0x5303da['shift']());}catch(_0x3cee39){_0x5303da['push'](_0x5303da['shift']());}}}(a0_0x9a54,0x77c7d));function a0_0x9a54(){const _0x20282c=['Kein\x20API\x20Key\x20√ºbergeben.','dailyDigests','python','Room\x20History\x20(24h\x20Buckets)','activeModules','val',')\x20-\x20Phase\x20E\x20(Commands\x20Fixed)','analysis.automation.patternDetected','timestamp','LTM.baselineStatus','.venv','writeFileSync','healthTrendInterval','json','initZombies','sensorLastValues','bind','analysis.training.triggerSecurity','updateTopology','command','analysis.training.triggerEnergy','currentSystemMode','Sec-Training\x20started...','analysis.health.geminiDay','pulse','briefingJob','substring','send','Daily\x20Room\x20Details\x20(48x30min)','guest','testContext','TRAIN_ENERGY','getObjectViewAsync','./lib/python_bridge','sendTo','4173880nuMvPn','10894596Xycywg','includes','isRelevantActivity','constructor','error','round','namespace','value','88444OSdpFD','analysis.training.status','exitTimer','setDate','mkdirSync','generateHealthReport','sendMorningBriefing','eventHistory','getStateAsync','rawEventLog','analysisHistory','location','inactivityThresholdHours','History\x20Save\x20Error:\x20','warn','initSystemConfig','Room\x20Dwell\x20Time\x20Stats','200hCFdHM','memoryCache','apply','generateContent','analyzeWindowOpening','Gemini\x20Init\x20Error:\x20','isGracePeriodActive','values','all','add','analysis.training.triggerTopology','analysis.health.todayRoomDetails','stateChange','minDaysForBaseline','min','temperature','analysis.activity.roomStats','toLowerCase','scanThermostats','analysis.training.triggerHealth','gemini-1.5-flash','onMessage','string','main','\x20events\x20from\x20today...','presenceDevices','models/gemini-flash-latest','checkThermostats','object','TRAIN_SECURITY','./lib/setup','cleanupGhostInterventions','./lib/topology','enum','isPresent','checkLicense','log','config','analysis.automation.targetId','moduleEnergy','General\x20Activity\x20Trend','state','ack','version','max','message','calendarName','Adapter\x20instance\x20not\x20found\x20or\x20no\x20data.','driftAnalysisTimer','setObjectNotExistsAsync','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','46476pvPBMv','getHours','cancel','replayTodayEvents','runAutopilot','isProVersion','moduleComfort','59\x2023\x20*\x20*\x20*','updateHealthVector','SET_LEARNING_MODE','thermostat','split','length','...','analysis.health.todayVector','path','bin','onUnload','scheduleJob','motion','Guest\x20Mode','name','push','getDate','229959axMclm','33ehPCNH','CALCULATE_HEALTH_TREND','roomIntegratorTimer','setStateAsync','common','./lib/scheduler','Lernphase\x20(','üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','exitGraceTimer','subscribeForeignStates','instance','endsWith','isArray','analysis.visualization.pulse','window','slice','startSystem','analysis.training.triggerComfort','find','updateLocation','SYSTEM_DP_MODE','Gemini\x20Report\x20Night','Verbindung\x20erfolgreich:\x20','communicate.request','triggerEnergyPrediction','getForeignObjectsAsync','onStateChange','infrasoundSensorId','open','Warm-Up\x20Time','debug','SYSTEM_MODES','subscribeStates','integrateRoomTime','getMinutes','Adapter','setPresence','enum.rooms.*','1650624qbkpzX','getAbsoluteDefaultDataDir','DAY','{\x22history\x22:{}}','analysis.health.activityTrend','readFileSync','cogni-living\x20adapter\x20starting\x20(v','handleInfrasound','haust√ºr','400WEHayg','moduleHealth','getGenerativeModel','appendToLog','analysis.energy.warmupSources','lastTrackerEventTime','@google/generative-ai','security','checkWifiPresence','getEnums','geminiApiKey','callback','triggerDailyDigest','type','some','rows','\x20events\x20from\x20standard\x20storage.','toString','Party\x20Mode','health','modules','automation.triggerAction','saveDailyHistory','TRAIN_TOPOLOGY','ltmJob','runPythonHealthCheck','analysis.automation.targetValue','triggerGaitAnalysis','\x22history\x22:{}','595499cvdSuz','apiKey','runGeminiAnalysis','analysis.energy.warmupTimes','abortExitTimer','party','getForeignStateAsync','.system.mode','initHistory','toISOString','unload','sources','Sonne:\x20','pop','analysis.prediction.trackerConfidence','analysis.automation.description','comfort','getHistoryData','checkSolarCondition','‚Ü∫\x20Replaying\x20','protectAiMemory','text','energy','infrasoundLocked','historyJob','setHours','existsSync','geminiModel','getCalendarNames','events.history','analysis.security.lastScore','cogni-living','todayVector','LTM.dailyDigests','from','genAI','analysis.health.geminiNight','checkCalendarTriggers','createAllObjects','analysis.prediction.trackerTopRoom','.data.table','setState','LTM.triggerDailyDigest','onReady','createDailyDigest','parse','history','7Uqdfzx','Aktiv\x20(','‚úÖ\x20History\x20saved:\x20','join','Unknown','‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.','now','reduce','infrasoundEnabled','scanForDevices','number','./lib/automation','moduleSecurity','üíæ\x20Saving\x20Daily\x20History\x20for\x20','./lib/scanner','(((.+)+)+)+$','114dDttEg','scanDevices','telegram','bootTime','testApiKey','utf8','triggerInfrasoundCorrelation','VACATION','fill','Standard','analysis.activity.roomHistory','devices','startService','date','triggerBriefing','stringify','toLocaleDateString','info','.json','NORMAL','analysis.security.learningStatus','forEach','dependencyInstallInProgress','door','LTM.rawEventLog','LTM.trainingData.sequences','analysisTimer','\x20Tage)','system','subscribeForeignStatesAsync','analysis.trigger','search'];a0_0x9a54=function(){return _0x20282c;};return a0_0x9a54();}const a0_0x254de8=(function(){let _0x55c0ad=!![];return function(_0x41ec52,_0x4a7634){const _0x49972d=_0x55c0ad?function(){const _0x48ab5e=a0_0x1e44;if(_0x4a7634){const _0x162762=_0x4a7634[_0x48ab5e(0x152)](_0x41ec52,arguments);return _0x4a7634=null,_0x162762;}}:function(){};return _0x55c0ad=![],_0x49972d;};}()),a0_0x3f8805=a0_0x254de8(this,function(){const _0x1722f5=a0_0x1e44;return a0_0x3f8805[_0x1722f5(0x1dc)]()[_0x1722f5(0x112)](_0x1722f5(0xf2))['toString']()[_0x1722f5(0x13a)](a0_0x3f8805)[_0x1722f5(0x112)](_0x1722f5(0xf2));});a0_0x3f8805();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x2b6918(0x1d1)),path=require(a0_0x2b6918(0x192)),fs=require('fs'),installer=require('./lib/installer'),scanner=require(a0_0x2b6918(0xf1)),schedulers=require(a0_0x2b6918(0x1a1)),topology=require(a0_0x2b6918(0x170)),setup=require(a0_0x2b6918(0x16e)),recorder=require('./lib/recorder'),pythonBridge=require(a0_0x2b6918(0x134)),aiAgent=require('./lib/ai_agent'),deadMan=require('./lib/dead_man'),automation=require(a0_0x2b6918(0xee)),GEMINI_MODEL=a0_0x2b6918(0x16a);class CogniLiving extends utils[a0_0x2b6918(0x1bf)]{constructor(_0x119a6a){const _0x521c20=a0_0x2b6918;super({..._0x119a6a,'name':_0x521c20(0xd3)}),this[_0x521c20(0x146)]=[],this[_0x521c20(0x149)]=[],this[_0x521c20(0x148)]=[],this['dailyDigests']=[],this[_0x521c20(0x122)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x521c20(0x172)]=!![],this[_0x521c20(0x141)]=null,this[_0x521c20(0x1a4)]=null,this[_0x521c20(0x156)]=![],this['genAI']=null,this[_0x521c20(0xcf)]=null,this[_0x521c20(0x128)]=setup[_0x521c20(0x1bb)][_0x521c20(0x106)],this[_0x521c20(0x188)]=![],this['lastAlertState']=![],this[_0x521c20(0x10d)]=null,this[_0x521c20(0x1e3)]=null,this['modeResetJob']=null,this[_0x521c20(0x180)]=null,this[_0x521c20(0x12c)]=null,this[_0x521c20(0xcc)]=null,this['trackerHeartbeat']=null,this[_0x521c20(0x11f)]=null,this[_0x521c20(0x19e)]=null,this[_0x521c20(0x109)]=![],this[_0x521c20(0x1d0)]=Date['now'](),this[_0x521c20(0x151)]=null,this[_0x521c20(0xf6)]=Date[_0x521c20(0xe9)](),this[_0x521c20(0xcb)]=![],this['pressureBuffer']=[],this[_0x521c20(0x117)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on']('ready',this[_0x521c20(0xdf)][_0x521c20(0x123)](this)),this['on'](_0x521c20(0x15c),this[_0x521c20(0x1b6)]['bind'](this)),this['on'](_0x521c20(0xbe),this[_0x521c20(0x194)][_0x521c20(0x123)](this)),this['on'](_0x521c20(0x17d),this[_0x521c20(0x165)]['bind'](this));}async[a0_0x2b6918(0xdf)](){const _0x1fe255=a0_0x2b6918;this['log'][_0x1fe255(0x104)](_0x1fe255(0x1c8)+this[_0x1fe255(0x17b)]+_0x1fe255(0x119));if(this[_0x1fe255(0x175)][_0x1fe255(0x1cc)]!==undefined)this['activeModules']['health']=this[_0x1fe255(0x175)]['moduleHealth'];if(this[_0x1fe255(0x175)][_0x1fe255(0xef)]!==undefined)this['activeModules']['security']=this['config'][_0x1fe255(0xef)];if(this[_0x1fe255(0x175)][_0x1fe255(0x177)]!==undefined)this[_0x1fe255(0x117)][_0x1fe255(0xca)]=this[_0x1fe255(0x175)][_0x1fe255(0x177)];if(this[_0x1fe255(0x175)]['moduleComfort']!==undefined)this[_0x1fe255(0x117)][_0x1fe255(0xc4)]=this[_0x1fe255(0x175)][_0x1fe255(0x189)];if(this[_0x1fe255(0x175)][_0x1fe255(0x1df)])this['activeModules']={...this[_0x1fe255(0x117)],...this[_0x1fe255(0x175)][_0x1fe255(0x1df)]};this['startSystem']();}async[a0_0x2b6918(0x1ac)](){const _0x1e8ef2=a0_0x2b6918;await setup[_0x1e8ef2(0x121)](this);try{this[_0x1e8ef2(0x188)]=await setup[_0x1e8ef2(0x173)](this[_0x1e8ef2(0x175)]['licenseKey']);}catch(_0x4c3259){}if(!this[_0x1e8ef2(0x175)][_0x1e8ef2(0x14b)]||this[_0x1e8ef2(0x175)]['inactivityThresholdHours']<0.1)this[_0x1e8ef2(0x175)][_0x1e8ef2(0x14b)]=0xc;await setup[_0x1e8ef2(0xbc)](this),await setup[_0x1e8ef2(0x14e)](this);try{const _0x3c5ab3=await this['getStateAsync'](_0x1e8ef2(0xb7)),_0x4e5183=await this[_0x1e8ef2(0x147)](_0x1e8ef2(0x1cf));_0x3c5ab3&&_0x3c5ab3[_0x1e8ef2(0x118)]&&_0x4e5183&&_0x4e5183[_0x1e8ef2(0x118)]&&(Date[_0x1e8ef2(0xe9)]()-_0x3c5ab3['ts']<0x4*0xe10*0x3e8&&(this[_0x1e8ef2(0x151)]={'times':JSON[_0x1e8ef2(0xe1)](_0x3c5ab3[_0x1e8ef2(0x118)]),'sources':JSON['parse'](_0x4e5183['val'])}));}catch(_0xa8881a){}if(this[_0x1e8ef2(0x175)][_0x1e8ef2(0x1d5)])try{this[_0x1e8ef2(0xd7)]=new GoogleGenerativeAI(this[_0x1e8ef2(0x175)][_0x1e8ef2(0x1d5)]),this['geminiModel']=this[_0x1e8ef2(0xd7)][_0x1e8ef2(0x1cd)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}});}catch(_0x53631d){this[_0x1e8ef2(0x174)][_0x1e8ef2(0x13b)](_0x1e8ef2(0x155)+_0x53631d[_0x1e8ef2(0x17d)]);}await setup[_0x1e8ef2(0xda)](this),await this['loadSystemMode'](),await this[_0x1e8ef2(0x181)](_0x1e8ef2(0x1a9),{'type':_0x1e8ef2(0x179),'common':{'name':'Live\x20Event\x20Pulse','type':_0x1e8ef2(0xed),'role':_0x1e8ef2(0x13e),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x1e8ef2(0x160),{'type':_0x1e8ef2(0x179),'common':{'name':_0x1e8ef2(0x14f),'type':_0x1e8ef2(0x166),'role':_0x1e8ef2(0x120),'read':!![],'write':![],'def':'{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}'},'native':{}}),await this[_0x1e8ef2(0x181)](_0x1e8ef2(0xfd),{'type':_0x1e8ef2(0x179),'common':{'name':_0x1e8ef2(0x116),'type':'string','role':_0x1e8ef2(0x120),'read':!![],'write':![],'def':_0x1e8ef2(0x1c5)},'native':{}}),await this[_0x1e8ef2(0x181)](_0x1e8ef2(0xd8),{'type':_0x1e8ef2(0x179),'common':{'name':_0x1e8ef2(0x1b1),'type':_0x1e8ef2(0x166),'role':_0x1e8ef2(0xc9),'read':!![],'write':![],'def':'Warte\x20auf\x20Analyse...'},'native':{}}),await this[_0x1e8ef2(0x181)]('analysis.health.geminiDay',{'type':_0x1e8ef2(0x179),'common':{'name':'Gemini\x20Report\x20Day','type':_0x1e8ef2(0x166),'role':_0x1e8ef2(0xc9),'read':!![],'write':![],'def':'Warte\x20auf\x20Analyse...'},'native':{}}),await this[_0x1e8ef2(0x181)](_0x1e8ef2(0x191),{'type':_0x1e8ef2(0x179),'common':{'name':'Daily\x20Activity\x20Vector\x20(48x30min)','type':_0x1e8ef2(0x166),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x1e8ef2(0x181)](_0x1e8ef2(0x15b),{'type':_0x1e8ef2(0x179),'common':{'name':_0x1e8ef2(0x12f),'type':'string','role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.activityTrend',{'type':_0x1e8ef2(0x179),'common':{'name':_0x1e8ef2(0x178),'type':_0x1e8ef2(0xed),'role':_0x1e8ef2(0x13e),'unit':'%','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x1e8ef2(0xb7),{'type':'state','common':{'name':_0x1e8ef2(0x1b9),'type':'string','role':_0x1e8ef2(0x120),'read':!![],'write':![]},'native':{}});try{const _0x4db599=await this[_0x1e8ef2(0x147)](_0x1e8ef2(0xd1));if(_0x4db599&&_0x4db599[_0x1e8ef2(0x118)]){this[_0x1e8ef2(0x146)]=JSON[_0x1e8ef2(0xe1)](_0x4db599['val']);if(this[_0x1e8ef2(0x188)]){const _0x10b5de=await this['getStateAsync'](_0x1e8ef2(0x10b));if(_0x10b5de&&_0x10b5de[_0x1e8ef2(0x118)])this[_0x1e8ef2(0x148)]=JSON['parse'](_0x10b5de['val']);}this[_0x1e8ef2(0x174)][_0x1e8ef2(0x104)]('üì¶\x20Restored\x20'+this[_0x1e8ef2(0x146)][_0x1e8ef2(0x18f)]+_0x1e8ef2(0x1db));}}catch(_0x370414){this[_0x1e8ef2(0x146)]=[];}try{const _0x4b0bd9=await this['getStateAsync'](_0x1e8ef2(0xd5));if(_0x4b0bd9&&_0x4b0bd9['val'])this[_0x1e8ef2(0x114)]=JSON[_0x1e8ef2(0xe1)](_0x4b0bd9['val']);}catch(_0x302af2){this[_0x1e8ef2(0x114)]=[];}const _0x310e19=this[_0x1e8ef2(0x114)][_0x1e8ef2(0x18f)]>=(this[_0x1e8ef2(0x175)][_0x1e8ef2(0x15d)]||0x7)?_0x1e8ef2(0xe4)+this[_0x1e8ef2(0x114)]['length']+_0x1e8ef2(0x10e):_0x1e8ef2(0x1a2)+this[_0x1e8ef2(0x114)][_0x1e8ef2(0x18f)]+'/'+(this[_0x1e8ef2(0x175)][_0x1e8ef2(0x15d)]||0x7)+')';await this[_0x1e8ef2(0x19f)](_0x1e8ef2(0x11c),{'val':_0x310e19,'ack':!![]}),this[_0x1e8ef2(0x1bc)](_0x1e8ef2(0x111)),this[_0x1e8ef2(0x1bc)](_0x1e8ef2(0xde)),this[_0x1e8ef2(0x1bc)]('analysis.training.triggerHealth');this['config'][_0x1e8ef2(0xeb)]&&this['config']['infrasoundSensorId']&&this[_0x1e8ef2(0x117)][_0x1e8ef2(0x1d2)]&&this[_0x1e8ef2(0x1a5)](this['config'][_0x1e8ef2(0x1b7)]);const _0x3c617e=this[_0x1e8ef2(0x175)][_0x1e8ef2(0xfe)];if(_0x3c617e)for(const _0x31f68f of _0x3c617e){await this[_0x1e8ef2(0x110)](_0x31f68f['id']);}const _0x57eae8=this[_0x1e8ef2(0x175)][_0x1e8ef2(0x169)];if(_0x57eae8)for(const _0x20e1a4 of _0x57eae8){await this[_0x1e8ef2(0x110)](_0x20e1a4);}const _0x512ce4=require('node-schedule');if(this[_0x1e8ef2(0xcc)])this[_0x1e8ef2(0xcc)][_0x1e8ef2(0x185)]();this[_0x1e8ef2(0xcc)]=_0x512ce4[_0x1e8ef2(0x195)](_0x1e8ef2(0x18a),()=>{this['saveDailyHistory']();}),setTimeout(()=>this['replayTodayEvents'](),0x1388);if(this['roomIntegratorTimer'])clearInterval(this[_0x1e8ef2(0x19e)]);this[_0x1e8ef2(0x1bd)](),this[_0x1e8ef2(0x19e)]=setInterval(async()=>{const _0x1e0706=_0x1e8ef2;await this[_0x1e0706(0x1bd)]();},0x3c*0x3e8);if(this[_0x1e8ef2(0x11f)])clearInterval(this[_0x1e8ef2(0x11f)]);this['healthTrendInterval']=setInterval(()=>{const _0x4961e7=_0x1e8ef2;this[_0x4961e7(0x188)]&&this['activeModules']['health']&&this['runPythonHealthCheck']();},0x4*0x3c*0x3c*0x3e8);const _0x11ce12=path[_0x1e8ef2(0xe6)](__dirname,_0x1e8ef2(0x11d),_0x1e8ef2(0x193),_0x1e8ef2(0x115));pythonBridge[_0x1e8ef2(0xff)](this,_0x11ce12);}[a0_0x2b6918(0x194)](_0x4bbffe){const _0x3f5a82=a0_0x2b6918;if(this[_0x3f5a82(0xcc)])this['historyJob'][_0x3f5a82(0x185)]();this[_0x3f5a82(0x1e1)]()['then'](()=>{const _0xc4530f=_0x3f5a82;if(this['analysisTimer'])clearInterval(this[_0xc4530f(0x10d)]);if(this[_0xc4530f(0x19e)])clearInterval(this[_0xc4530f(0x19e)]);recorder[_0xc4530f(0xb8)](this),pythonBridge['stopService'](this),_0x4bbffe();});}async[a0_0x2b6918(0x186)](){const _0xa15536=a0_0x2b6918;if(!this['eventHistory']||this[_0xa15536(0x146)][_0xa15536(0x18f)]===0x0){this[_0xa15536(0x174)][_0xa15536(0x14d)](_0xa15536(0xe8));return;}this[_0xa15536(0x174)][_0xa15536(0x104)](_0xa15536(0xc7)+this[_0xa15536(0x146)][_0xa15536(0x18f)]+_0xa15536(0x168));const _0x1ec3c9=new Date()[_0xa15536(0xcd)](0x0,0x0,0x0,0x0),_0x369af4=_0xa15536(0xfd);let _0x2fccaf={'history':{},'date':new Date()['toLocaleDateString']()};const _0x4e8317='analysis.health.todayVector',_0x203977=_0xa15536(0x15b);let _0x2446cf=new Array(0x30)[_0xa15536(0xfb)](0x0),_0xfcaf08=Array['from']({'length':0x30},()=>[]);this['eventHistory']['forEach'](_0x1bbad7=>{const _0x1e70b3=_0xa15536;if(_0x1bbad7[_0x1e70b3(0x11b)]>=_0x1ec3c9){if(recorder[_0x1e70b3(0x139)](_0x1bbad7[_0x1e70b3(0x1d8)],_0x1bbad7[_0x1e70b3(0x13e)])){const _0x8b0a80=new Date(_0x1bbad7['timestamp']),_0x592aa1=_0x8b0a80['getHours']()*0x2+(_0x8b0a80[_0x1e70b3(0x1be)]()>=0x1e?0x1:0x0);if(_0x592aa1<0x30){_0x2446cf[_0x592aa1]++;const _0x22f675=_0x1bbad7[_0x1e70b3(0x14a)]||_0x1bbad7['name']||'?';let _0x5a5d84=_0xfcaf08[_0x592aa1];!_0x5a5d84[_0x1e70b3(0x138)](_0x22f675)&&_0x5a5d84['push'](_0x22f675);}const _0x4f3588=_0x8b0a80['getHours']();let _0x5e273d=_0x1bbad7[_0x1e70b3(0x14a)]||_0x1e70b3(0xe7);const _0x4596c0=(this['config'][_0x1e70b3(0xfe)]||[])['find'](_0x24bbaa=>_0x24bbaa[_0x1e70b3(0x14a)]===_0x5e273d);if(_0x4596c0)_0x5e273d=_0x4596c0[_0x1e70b3(0x14a)];if(!_0x2fccaf[_0x1e70b3(0xe2)][_0x5e273d])_0x2fccaf[_0x1e70b3(0xe2)][_0x5e273d]=new Array(0x18)['fill'](0x0);if(_0x2fccaf[_0x1e70b3(0xe2)][_0x5e273d][_0x4f3588]<0x3c)_0x2fccaf[_0x1e70b3(0xe2)][_0x5e273d][_0x4f3588]++;}}});const _0x17b13e=await this[_0xa15536(0x147)](_0x369af4);(!_0x17b13e||!_0x17b13e[_0xa15536(0x118)]||_0x17b13e[_0xa15536(0x118)]==='{}'||_0x17b13e[_0xa15536(0x118)][_0xa15536(0x138)](_0xa15536(0x1e7)))&&await this[_0xa15536(0x19f)](_0x369af4,{'val':JSON['stringify'](_0x2fccaf),'ack':!![]}),await this[_0xa15536(0x19f)](_0x4e8317,{'val':JSON['stringify'](_0x2446cf),'ack':!![]}),await this[_0xa15536(0x19f)](_0x203977,{'val':JSON[_0xa15536(0x102)](_0xfcaf08),'ack':!![]}),this[_0xa15536(0x174)]['info']('‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.');}async[a0_0x2b6918(0x1e1)](){const _0x38e4c4=a0_0x2b6918;if(!this[_0x38e4c4(0x117)][_0x38e4c4(0x1de)])return;const _0x3c7ec5=new Date()[_0x38e4c4(0xbd)]()[_0x38e4c4(0x18e)]('T')[0x0];this[_0x38e4c4(0x174)][_0x38e4c4(0x1ba)](_0x38e4c4(0xf0)+_0x3c7ec5+'...');try{const [_0x3ceb06,_0x1e3bf6,_0x110f2a,_0x546621,_0x44ec11,_0x713dcf]=await Promise[_0x38e4c4(0x158)]([this['getStateAsync']('analysis.activity.roomHistory'),this[_0x38e4c4(0x147)](_0x38e4c4(0xd8)),this[_0x38e4c4(0x147)](_0x38e4c4(0x12a)),this['getStateAsync'](_0x38e4c4(0xd2)),this['getStateAsync']('analysis.health.todayVector'),this[_0x38e4c4(0x147)](_0x38e4c4(0x1c6))]),_0xd5b4cb=this[_0x38e4c4(0x146)]['filter'](_0xe9bdc6=>_0xe9bdc6['timestamp']>=new Date()['setHours'](0x0,0x0,0x0,0x0)&&(_0xe9bdc6[_0x38e4c4(0x198)]['toLowerCase']()[_0x38e4c4(0x138)](_0x38e4c4(0x1ca))||_0xe9bdc6[_0x38e4c4(0x198)][_0x38e4c4(0x161)]()[_0x38e4c4(0x138)]('terrasse'))&&(_0xe9bdc6[_0x38e4c4(0x13e)]===!![]||_0xe9bdc6[_0x38e4c4(0x13e)]==='open'))['length'];let _0x29dc6f=0x55;if(_0x713dcf&&_0x713dcf[_0x38e4c4(0x118)]!==undefined)_0x29dc6f=Math['min'](0x64,Math[_0x38e4c4(0x17c)](0x14,Math[_0x38e4c4(0x13c)](0x50+Number(_0x713dcf['val'])*0x5)));const _0x56f077={'date':_0x3c7ec5,'timestamp':Date[_0x38e4c4(0xe9)](),'roomHistory':_0x3ceb06?.[_0x38e4c4(0x118)]?JSON[_0x38e4c4(0xe1)](_0x3ceb06[_0x38e4c4(0x118)]):{},'geminiNight':_0x1e3bf6?.['val']||'Keine\x20Daten','geminiDay':_0x110f2a?.[_0x38e4c4(0x118)]||'Keine\x20Daten','anomalyScore':_0x546621?.[_0x38e4c4(0x118)]||0.1,'todayVector':_0x44ec11?.['val']?JSON[_0x38e4c4(0xe1)](_0x44ec11['val']):new Array(0x30)[_0x38e4c4(0xfb)](0x0),'batteryLevel':_0x29dc6f,'freshAirCount':_0xd5b4cb,'eventHistory':this[_0x38e4c4(0x146)]},_0x2085cc=utils[_0x38e4c4(0x1c3)](),_0x21495b=path[_0x38e4c4(0xe6)](_0x2085cc,_0x38e4c4(0xd3),_0x38e4c4(0xe2));if(!fs[_0x38e4c4(0xce)](_0x21495b))fs[_0x38e4c4(0x143)](_0x21495b,{'recursive':!![]});const _0x39563c=path[_0x38e4c4(0xe6)](_0x21495b,_0x3c7ec5+_0x38e4c4(0x105));fs[_0x38e4c4(0x11e)](_0x39563c,JSON[_0x38e4c4(0x102)](_0x56f077)),this[_0x38e4c4(0x174)][_0x38e4c4(0x104)](_0x38e4c4(0xe5)+_0x39563c);}catch(_0x645e83){this[_0x38e4c4(0x174)][_0x38e4c4(0x13b)](_0x38e4c4(0x14c)+_0x645e83[_0x38e4c4(0x17d)]);}}async[a0_0x2b6918(0x1bd)](){const _0x5bc32c=a0_0x2b6918;if(!this['isPresent'])return;try{let _0x27a784=null;try{const _0x19445b=await this['getStateAsync'](_0x5bc32c(0xdb)),_0x37db9c=await this[_0x5bc32c(0x147)](_0x5bc32c(0xc2));if(_0x19445b&&_0x19445b['val']&&_0x37db9c&&_0x37db9c['val']&&_0x37db9c[_0x5bc32c(0x118)]>0.3){if(_0x19445b[_0x5bc32c(0x118)]!=='Unknown'&&_0x19445b[_0x5bc32c(0x118)]!=='Init...')_0x27a784=_0x19445b[_0x5bc32c(0x118)];}}catch(_0x2e0ad3){}if(!_0x27a784){const _0x2a9c94=this['config'][_0x5bc32c(0xfe)]||[];for(const _0x51c809 of _0x2a9c94){if(_0x51c809[_0x5bc32c(0x1d8)]===_0x5bc32c(0x196)&&_0x51c809[_0x5bc32c(0x14a)])try{const _0x24f3e9=await this[_0x5bc32c(0xba)](_0x51c809['id']);if(_0x24f3e9&&(_0x24f3e9[_0x5bc32c(0x118)]===!![]||_0x24f3e9[_0x5bc32c(0x118)]==='on'||_0x24f3e9[_0x5bc32c(0x118)]===0x1)){_0x27a784=_0x51c809[_0x5bc32c(0x14a)];break;}}catch(_0x3141cd){}}}if(!_0x27a784)return;const _0x584dad=this[_0x5bc32c(0x175)]['devices']||[];let _0x3ccd7f=_0x27a784;const _0x44aa3c=_0x584dad[_0x5bc32c(0x1ae)](_0x154879=>_0x154879[_0x5bc32c(0x14a)]&&_0x154879['location'][_0x5bc32c(0x161)]()===_0x27a784[_0x5bc32c(0x161)]());if(_0x44aa3c)_0x3ccd7f=_0x44aa3c[_0x5bc32c(0x14a)];const _0x20bb4d=_0x5bc32c(0xfd),_0x415442=await this['getStateAsync'](_0x20bb4d),_0x20ce16=new Date()[_0x5bc32c(0x103)]();let _0xc98685={'history':{},'date':_0x20ce16};if(_0x415442&&_0x415442[_0x5bc32c(0x118)])try{_0xc98685=JSON[_0x5bc32c(0xe1)](_0x415442[_0x5bc32c(0x118)]);}catch(_0x329337){}_0xc98685[_0x5bc32c(0x100)]!==_0x20ce16&&(_0xc98685[_0x5bc32c(0xe2)]={},_0xc98685[_0x5bc32c(0x100)]=_0x20ce16);if(!_0xc98685['history'][_0x3ccd7f])_0xc98685[_0x5bc32c(0xe2)][_0x3ccd7f]=new Array(0x18)[_0x5bc32c(0xfb)](0x0);const _0x4f6c81=new Date()[_0x5bc32c(0x184)]();if(_0xc98685[_0x5bc32c(0xe2)][_0x3ccd7f][_0x4f6c81]<0x3c)_0xc98685[_0x5bc32c(0xe2)][_0x3ccd7f][_0x4f6c81]++;await this[_0x5bc32c(0x19f)](_0x20bb4d,{'val':JSON[_0x5bc32c(0x102)](_0xc98685),'ack':!![]});}catch(_0x25e8e7){this[_0x5bc32c(0x174)][_0x5bc32c(0x14d)]('[Integrator]\x20Error:\x20'+_0x25e8e7[_0x5bc32c(0x17d)]);}}async[a0_0x2b6918(0x165)](_0xfdab35){const _0x18cbf8=a0_0x2b6918;if(typeof _0xfdab35===_0x18cbf8(0x16c)&&_0xfdab35[_0x18cbf8(0x17d)]){if(_0xfdab35[_0x18cbf8(0x126)]===_0x18cbf8(0xc5)){const _0x67ec0b=_0xfdab35['message'][_0x18cbf8(0x100)],_0x207178=utils[_0x18cbf8(0x1c3)](),_0x5a8cf3=path['join'](_0x207178,'cogni-living',_0x18cbf8(0xe2),_0x67ec0b+_0x18cbf8(0x105));if(fs[_0x18cbf8(0xce)](_0x5a8cf3))try{const _0x3cc6de=JSON[_0x18cbf8(0xe1)](fs[_0x18cbf8(0x1c7)](_0x5a8cf3,'utf8'));this['sendTo'](_0xfdab35[_0x18cbf8(0xd6)],_0xfdab35['command'],{'success':!![],'data':_0x3cc6de},_0xfdab35['callback']);}catch(_0x38690f){this[_0x18cbf8(0x135)](_0xfdab35['from'],_0xfdab35[_0x18cbf8(0x126)],{'success':![],'error':'Corrupt'},_0xfdab35['callback']);}else this[_0x18cbf8(0x135)](_0xfdab35[_0x18cbf8(0xd6)],_0xfdab35['command'],{'success':![],'error':'No\x20data'},_0xfdab35[_0x18cbf8(0x1d6)]);}else{if(_0xfdab35[_0x18cbf8(0x126)]==='getOverviewData'){const _0x5683d8=this[_0x18cbf8(0x114)]['length'];let _0x1d628a=new Array(0x30)[_0x18cbf8(0xfb)](0x0),_0x49cf4c=Array['from']({'length':0x30},()=>[]);try{const _0x310eae=await this[_0x18cbf8(0x147)](_0x18cbf8(0x191));if(_0x310eae&&_0x310eae['val'])_0x1d628a=JSON[_0x18cbf8(0xe1)](_0x310eae[_0x18cbf8(0x118)]);const _0x1e90ef=await this['getStateAsync']('analysis.health.todayRoomDetails');if(_0x1e90ef&&_0x1e90ef[_0x18cbf8(0x118)])_0x49cf4c=JSON['parse'](_0x1e90ef[_0x18cbf8(0x118)]);}catch(_0x99694){}let _0x1733d1=new Array(0x30)[_0x18cbf8(0xfb)](0x0);try{const _0x3f194f=new Date();_0x3f194f[_0x18cbf8(0x142)](_0x3f194f[_0x18cbf8(0x19a)]()-0x1);const _0x2cb3c5=_0x3f194f[_0x18cbf8(0xbd)]()[_0x18cbf8(0x18e)]('T')[0x0],_0x181b3f=utils[_0x18cbf8(0x1c3)](),_0x57b8d8=path[_0x18cbf8(0xe6)](_0x181b3f,_0x18cbf8(0xd3),_0x18cbf8(0xe2),_0x2cb3c5+_0x18cbf8(0x105));if(fs['existsSync'](_0x57b8d8)){const _0x41575a=JSON[_0x18cbf8(0xe1)](fs['readFileSync'](_0x57b8d8,_0x18cbf8(0xf8)));if(_0x41575a&&_0x41575a[_0x18cbf8(0xd4)])_0x1733d1=_0x41575a[_0x18cbf8(0xd4)];}}catch(_0x1c87a8){}let _0x2a1b6e={'today':{},'yesterday':{}};try{const _0x1a158d=await this['getStateAsync'](_0x18cbf8(0x160));if(_0x1a158d&&_0x1a158d['val'])_0x2a1b6e=JSON[_0x18cbf8(0xe1)](_0x1a158d['val']);}catch(_0x4f0351){}let _0x5dc7f3=null;try{const _0x218826=await this[_0x18cbf8(0x147)](_0x18cbf8(0x1c6));if(_0x218826)_0x5dc7f3=_0x218826['val'];}catch(_0x42a6b3){}if(_0x5dc7f3===undefined||_0x5dc7f3===null){const _0x36b9a7=_0x1d628a[_0x18cbf8(0xea)]((_0x1fc333,_0xb64f2e)=>_0x1fc333+_0xb64f2e,0x0),_0x519119=Math[_0x18cbf8(0x15e)](0x2,Math[_0x18cbf8(0x17c)](-0x2,(0x64-_0x36b9a7)/0x32));_0x5dc7f3=_0x519119;}let _0x498854=![],_0x549386='',_0x544800='',_0x19f87c='';try{const _0x1e8ccb=await this['getStateAsync'](_0x18cbf8(0x11a));if(_0x1e8ccb&&_0x1e8ccb[_0x18cbf8(0x118)]){_0x498854=!![];const _0xe0b688=await this['getStateAsync'](_0x18cbf8(0xc3));_0x549386=_0xe0b688?_0xe0b688[_0x18cbf8(0x118)]:'';const _0x4f10d5=await this['getStateAsync'](_0x18cbf8(0x176));_0x544800=_0x4f10d5?_0x4f10d5[_0x18cbf8(0x118)]:'';const _0x2575ca=await this[_0x18cbf8(0x147)](_0x18cbf8(0x1e5));_0x19f87c=_0x2575ca?_0x2575ca[_0x18cbf8(0x118)]:'';}}catch(_0x548166){}const _0x52623a=await this[_0x18cbf8(0xc6)](),_0xf53c2=(this[_0x18cbf8(0x175)]['devices']||[])[_0x18cbf8(0x1d9)](_0x3a1a0b=>_0x3a1a0b['isSolar']),_0x4fd02f=_0x52623a&&_0xf53c2;let _0x525584='';try{const _0xcdb497=await this[_0x18cbf8(0x147)]('system.presenceWho');if(_0xcdb497&&_0xcdb497[_0x18cbf8(0x118)])_0x525584=_0xcdb497[_0x18cbf8(0x118)];}catch(_0x4acd93){}this[_0x18cbf8(0x135)](_0xfdab35[_0x18cbf8(0xd6)],_0xfdab35[_0x18cbf8(0x126)],{'success':!![],'eventHistory':this[_0x18cbf8(0x146)][_0x18cbf8(0x1ab)](0x0,0x7d0),'stats':{'digestCount':_0x5683d8,'isPresent':this[_0x18cbf8(0x172)],'hourlyActivity':_0x1d628a,'hourlyDetails':_0x49cf4c,'yesterdayActivity':_0x1733d1,'solarActive':_0x4fd02f,'presenceWho':_0x525584,'roomStats':_0x2a1b6e,'activityTrend':_0x5dc7f3,'modules':this[_0x18cbf8(0x117)]},'automation':{'detected':_0x498854,'description':_0x549386,'targetId':_0x544800,'targetValue':_0x19f87c}},_0xfdab35[_0x18cbf8(0x1d6)]);}else{if(_0xfdab35[_0x18cbf8(0x126)]===_0x18cbf8(0x16b))try{const _0x2b4c89=await automation[_0x18cbf8(0x162)](this);this[_0x18cbf8(0x135)](_0xfdab35['from'],_0xfdab35[_0x18cbf8(0x126)],{'success':!![],'results':_0x2b4c89},_0xfdab35[_0x18cbf8(0x1d6)]);}catch(_0x12c62b){this['sendTo'](_0xfdab35[_0x18cbf8(0xd6)],_0xfdab35[_0x18cbf8(0x126)],{'success':![],'error':_0x12c62b[_0x18cbf8(0x17d)]},_0xfdab35[_0x18cbf8(0x1d6)]);}else{if(_0xfdab35[_0x18cbf8(0x126)]===_0x18cbf8(0xf4))try{const _0xfeae77=await scanner[_0x18cbf8(0xec)](this,_0xfdab35[_0x18cbf8(0x17d)]||{});this[_0x18cbf8(0x135)](_0xfdab35['from'],_0xfdab35[_0x18cbf8(0x126)],{'success':!![],'devices':_0xfeae77},_0xfdab35[_0x18cbf8(0x1d6)]);}catch(_0x1e11ac){}else{if(_0xfdab35[_0x18cbf8(0x126)]===_0x18cbf8(0x1d4)){const _0x26d4af=await this['getForeignObjectsAsync']('enum.functions.*',_0x18cbf8(0x171)),_0x5aee6e=[];if(_0x26d4af)for(const _0x12f7ed in _0x26d4af){let _0x1deb89=_0x26d4af[_0x12f7ed][_0x18cbf8(0x1a0)][_0x18cbf8(0x198)];if(_0x1deb89&&typeof _0x1deb89===_0x18cbf8(0x16c))_0x1deb89=_0x1deb89['de']||_0x1deb89['en']||Object[_0x18cbf8(0x157)](_0x1deb89)[0x0]||JSON['stringify'](_0x1deb89);_0x5aee6e[_0x18cbf8(0x199)]({'id':_0x12f7ed,'name':String(_0x1deb89||_0x12f7ed)});}const _0x4888bd=await this[_0x18cbf8(0x1b5)](_0x18cbf8(0x1c1),_0x18cbf8(0x171)),_0x1652f0=[];if(_0x4888bd)for(const _0x8f99a1 in _0x4888bd){let _0x4cc511=_0x4888bd[_0x8f99a1]['common'][_0x18cbf8(0x198)];if(_0x4cc511&&typeof _0x4cc511===_0x18cbf8(0x16c))_0x4cc511=_0x4cc511['de']||_0x4cc511['en']||Object[_0x18cbf8(0x157)](_0x4cc511)[0x0]||JSON[_0x18cbf8(0x102)](_0x4cc511);_0x1652f0['push'](String(_0x4cc511||_0x8f99a1[_0x18cbf8(0x18e)]('.')[_0x18cbf8(0xc1)]()));}this[_0x18cbf8(0x135)](_0xfdab35[_0x18cbf8(0xd6)],_0xfdab35[_0x18cbf8(0x126)],{'success':!![],'enums':_0x5aee6e,'rooms':_0x1652f0},_0xfdab35[_0x18cbf8(0x1d6)]);}else{if(_0xfdab35[_0x18cbf8(0x126)]===_0x18cbf8(0xd0)){const _0x242974=_0xfdab35[_0x18cbf8(0x17d)]&&_0xfdab35['message'][_0x18cbf8(0x1a6)]?_0xfdab35['message']['instance']:'ical.0';try{const _0x4c43fa=await this[_0x18cbf8(0xba)](_0x242974+_0x18cbf8(0xdc));let _0x1d4119=[];if(_0x4c43fa&&_0x4c43fa[_0x18cbf8(0x118)]){const _0x495ecc=typeof _0x4c43fa[_0x18cbf8(0x118)]===_0x18cbf8(0x166)?JSON['parse'](_0x4c43fa['val']):_0x4c43fa[_0x18cbf8(0x118)];if(Array[_0x18cbf8(0x1a8)](_0x495ecc)){const _0x4314b1=new Set();_0x495ecc[_0x18cbf8(0x108)](_0x19d433=>{const _0x5688e5=_0x18cbf8;if(_0x19d433[_0x5688e5(0x17e)])_0x4314b1[_0x5688e5(0x159)](_0x19d433[_0x5688e5(0x17e)]);}),_0x1d4119=Array[_0x18cbf8(0xd6)](_0x4314b1);}}if(_0x1d4119[_0x18cbf8(0x18f)]===0x0)_0x1d4119=[_0x18cbf8(0xfc)];this[_0x18cbf8(0x135)](_0xfdab35[_0x18cbf8(0xd6)],_0xfdab35[_0x18cbf8(0x126)],{'success':!![],'names':_0x1d4119},_0xfdab35[_0x18cbf8(0x1d6)]);}catch(_0x45fc7e){this[_0x18cbf8(0x135)](_0xfdab35[_0x18cbf8(0xd6)],_0xfdab35[_0x18cbf8(0x126)],{'success':![],'error':_0x18cbf8(0x17f)},_0xfdab35[_0x18cbf8(0x1d6)]);}}else{if(_0xfdab35[_0x18cbf8(0x126)]===_0x18cbf8(0xf7))try{const _0x3f9193=_0xfdab35[_0x18cbf8(0x17d)]?_0xfdab35['message'][_0x18cbf8(0x1e9)]:'';if(!_0x3f9193)throw new Error(_0x18cbf8(0x113));const _0x23ed29=new GoogleGenerativeAI(_0x3f9193),_0x5d1572=_0x23ed29['getGenerativeModel']({'model':_0x18cbf8(0x164)}),_0x335b7c=await _0x5d1572[_0x18cbf8(0x153)]('Say\x20Hello'),_0x117af2=await _0x335b7c['response'],_0x3931a0=_0x117af2['text']();this[_0x18cbf8(0x135)](_0xfdab35[_0x18cbf8(0xd6)],_0xfdab35[_0x18cbf8(0x126)],{'success':!![],'message':_0x18cbf8(0x1b2)+_0x3931a0[_0x18cbf8(0x12d)](0x0,0x14)+_0x18cbf8(0x190)},_0xfdab35['callback']);}catch(_0x2fb3fa){this[_0x18cbf8(0x135)](_0xfdab35['from'],_0xfdab35['command'],{'success':![],'message':_0x2fb3fa[_0x18cbf8(0x17d)]},_0xfdab35['callback']);}else{if(_0xfdab35[_0x18cbf8(0x126)]===_0x18cbf8(0x131))try{const _0x42baaa=await this['checkSolarCondition'](),_0x27b939=await this[_0x18cbf8(0x133)](_0x18cbf8(0x10f),_0x18cbf8(0x1a6),{'startkey':'system.adapter.ical.','endkey':'system.adapter.ical.È¶ô'}),_0x2c7a84=_0x27b939&&_0x27b939['rows']?_0x27b939[_0x18cbf8(0x1da)][_0x18cbf8(0x18f)]:0x0;this[_0x18cbf8(0x135)](_0xfdab35[_0x18cbf8(0xd6)],_0xfdab35[_0x18cbf8(0x126)],{'success':!![],'weather':_0x18cbf8(0xc0)+_0x42baaa+',\x20Temp:\x20'+(this[_0x18cbf8(0x122)][this[_0x18cbf8(0x175)]['outdoorSensorId']]||'?')+'¬∞C','calendar':_0x2c7a84+'\x20Kalender-Adapter\x20gefunden.'},_0xfdab35['callback']);}catch(_0x362a6a){this[_0x18cbf8(0x135)](_0xfdab35[_0x18cbf8(0xd6)],_0xfdab35[_0x18cbf8(0x126)],{'success':![]},_0xfdab35[_0x18cbf8(0x1d6)]);}}}}}}}}}}[a0_0x2b6918(0x1e4)](){const _0x13a49a=a0_0x2b6918;if(!this[_0x13a49a(0x117)]['health'])return;this[_0x13a49a(0x174)][_0x13a49a(0x1ba)](_0x13a49a(0x1a3));try{const _0x1e4a48=this[_0x13a49a(0x148)]||[];pythonBridge[_0x13a49a(0x12e)](this,_0x13a49a(0x19d),{'events':_0x1e4a48});}catch(_0x421303){this[_0x13a49a(0x174)][_0x13a49a(0x14d)](_0x13a49a(0x182));}}async[a0_0x2b6918(0x1b6)](_0x473a70,_0x5964e5){const _0x484eb1=a0_0x2b6918;if(!_0x5964e5||this[_0x484eb1(0x109)])return;if(_0x473a70['includes'](_0x484eb1(0xf5))&&_0x473a70[_0x484eb1(0x1a7)](_0x484eb1(0x1b3))&&_0x5964e5[_0x484eb1(0x118)])return;if(this[_0x484eb1(0x175)][_0x484eb1(0xeb)]&&_0x473a70===this[_0x484eb1(0x175)][_0x484eb1(0x1b7)]&&this[_0x484eb1(0x117)][_0x484eb1(0x1d2)]){this[_0x484eb1(0x1c9)](_0x5964e5[_0x484eb1(0x118)]);return;}if(_0x5964e5['ack']&&_0x473a70[_0x484eb1(0x1a7)](_0x484eb1(0x12b)))return;if(_0x473a70===this[_0x484eb1(0x13d)]+_0x484eb1(0xbb)){if(_0x5964e5[_0x484eb1(0x118)]&&Object[_0x484eb1(0x157)](setup['SYSTEM_MODES'])['includes'](_0x5964e5[_0x484eb1(0x118)])){this[_0x484eb1(0x128)]=_0x5964e5[_0x484eb1(0x118)];if(_0x5964e5[_0x484eb1(0x118)]===setup[_0x484eb1(0x1bb)][_0x484eb1(0xfa)])await recorder[_0x484eb1(0x1c0)](this,![]);else await recorder[_0x484eb1(0x1c0)](this,!![]);if(this[_0x484eb1(0x188)]){let _0x31fe0f=![],_0x23cf34=0x0,_0x230612='manual';if(this[_0x484eb1(0x128)]===_0x484eb1(0xb9))_0x31fe0f=!![],_0x23cf34=0x168,_0x230612=_0x484eb1(0x1dd);else this[_0x484eb1(0x128)]===_0x484eb1(0x130)&&(_0x31fe0f=!![],_0x23cf34=0x5a0,_0x230612=_0x484eb1(0x197));pythonBridge[_0x484eb1(0x12e)](this,_0x484eb1(0x18c),{'active':_0x31fe0f,'duration':_0x23cf34,'label':_0x230612}),await this[_0x484eb1(0x19f)](_0x484eb1(0x107),{'val':JSON['stringify']({'active':_0x31fe0f,'label':_0x230612,'timestamp':Date[_0x484eb1(0xe9)]()}),'ack':!![]});}}if(!_0x5964e5['ack'])this['setState'](_0x473a70,{'val':this[_0x484eb1(0x128)],'ack':!![]});return;}if(_0x473a70[_0x484eb1(0x1a7)](_0x484eb1(0x1cf))&&_0x5964e5[_0x484eb1(0x17a)])this[_0x484eb1(0xc8)](_0x5964e5[_0x484eb1(0x118)]);if(_0x473a70['endsWith'](_0x484eb1(0xb7))&&_0x5964e5[_0x484eb1(0x17a)]&&this[_0x484eb1(0x117)][_0x484eb1(0xca)])automation[_0x484eb1(0xd9)](this);if(!_0x5964e5[_0x484eb1(0x17a)]){if(_0x473a70[_0x484eb1(0x138)]('analysis.trigger')&&_0x5964e5['val']){this['setState'](_0x473a70,{'val':![],'ack':!![]}),aiAgent[_0x484eb1(0x1ea)](this);return;}if(_0x473a70[_0x484eb1(0x138)](_0x484eb1(0x1d7))&&_0x5964e5['val']){this[_0x484eb1(0xdd)](_0x473a70,{'val':![],'ack':!![]});if(this[_0x484eb1(0x188)])aiAgent[_0x484eb1(0xe0)](this,pythonBridge);return;}if(_0x473a70[_0x484eb1(0x138)](_0x484eb1(0x101))&&_0x5964e5['val']){this['setState'](_0x473a70,{'val':![],'ack':!![]}),aiAgent[_0x484eb1(0x145)](this);return;}if(_0x473a70[_0x484eb1(0x138)](_0x484eb1(0x1e0))&&_0x5964e5[_0x484eb1(0x118)]){this[_0x484eb1(0xdd)](_0x473a70,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this);return;}if(_0x473a70[_0x484eb1(0x138)](_0x484eb1(0x124))&&_0x5964e5[_0x484eb1(0x118)]){this[_0x484eb1(0xdd)](_0x473a70,{'val':![],'ack':!![]});if(this[_0x484eb1(0x188)])try{const _0xf543d8=await this[_0x484eb1(0x147)](_0x484eb1(0x10c));if(_0xf543d8&&_0xf543d8[_0x484eb1(0x118)]){const _0x45fa02=JSON[_0x484eb1(0xe1)](_0xf543d8[_0x484eb1(0x118)]);this[_0x484eb1(0x19f)](_0x484eb1(0x140),{'val':_0x484eb1(0x129),'ack':!![]}),pythonBridge['send'](this,_0x484eb1(0x16d),{'sequences':_0x45fa02});}}catch(_0x12f979){}return;}if(_0x473a70[_0x484eb1(0x138)](_0x484eb1(0x163))&&_0x5964e5['val']){this[_0x484eb1(0xdd)](_0x473a70,{'val':![],'ack':!![]});if(this['isProVersion'])try{this[_0x484eb1(0x1e4)]();const _0x375120=await this[_0x484eb1(0x147)](_0x484eb1(0xd5));if(_0x375120&&_0x375120['val'])pythonBridge[_0x484eb1(0x12e)](this,'TRAIN_HEALTH',{'digests':JSON['parse'](_0x375120[_0x484eb1(0x118)])});aiAgent[_0x484eb1(0x144)](this,'NIGHT'),setTimeout(()=>aiAgent[_0x484eb1(0x144)](this,_0x484eb1(0x1c4)),0x2ee0);}catch(_0x23bcee){}return;}if(_0x473a70[_0x484eb1(0x138)](_0x484eb1(0x127))&&_0x5964e5[_0x484eb1(0x118)]){this['setState'](_0x473a70,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x1fe769=await this[_0x484eb1(0x147)]('LTM.trainingData.thermodynamics');if(_0x1fe769&&_0x1fe769[_0x484eb1(0x118)])pythonBridge[_0x484eb1(0x12e)](this,_0x484eb1(0x132),{'points':JSON['parse'](_0x1fe769[_0x484eb1(0x118)])});}catch(_0x56c6d9){}return;}if(_0x473a70[_0x484eb1(0x138)](_0x484eb1(0x1ad))&&_0x5964e5[_0x484eb1(0x118)]){this[_0x484eb1(0xdd)](_0x473a70,{'val':![],'ack':!![]});if(this[_0x484eb1(0x188)])try{const _0x46d83c=await this[_0x484eb1(0x147)]('LTM.rawEventLog');if(_0x46d83c&&_0x46d83c[_0x484eb1(0x118)]){const _0x38c278={};if(this[_0x484eb1(0x175)]['devices'])this[_0x484eb1(0x175)]['devices'][_0x484eb1(0x108)](_0x1e36d7=>{const _0x594a65=_0x484eb1;if(_0x1e36d7['id']&&_0x1e36d7[_0x594a65(0x1d8)])_0x38c278[_0x1e36d7['id']]=_0x1e36d7[_0x594a65(0x1d8)];});pythonBridge[_0x484eb1(0x12e)](this,'TRAIN_COMFORT',{'events':JSON[_0x484eb1(0xe1)](_0x46d83c['val']),'deviceMap':_0x38c278});}}catch(_0x400e07){}return;}if(_0x473a70['includes'](_0x484eb1(0x15a))&&_0x5964e5[_0x484eb1(0x118)]){this[_0x484eb1(0xdd)](_0x473a70,{'val':![],'ack':!![]}),topology[_0x484eb1(0x125)](this);if(this[_0x484eb1(0x188)])try{const _0x1b0b07=await this[_0x484eb1(0x147)](_0x484eb1(0x10c));if(_0x1b0b07&&_0x1b0b07['val'])pythonBridge[_0x484eb1(0x12e)](this,_0x484eb1(0x1e2),{'sequences':JSON[_0x484eb1(0xe1)](_0x1b0b07[_0x484eb1(0x118)])});}catch(_0x41df96){}return;}}const _0xe5762a=(this[_0x484eb1(0x175)]['devices']||[])[_0x484eb1(0x1ae)](_0x21ad4f=>_0x21ad4f['id']===_0x473a70);if(_0xe5762a){const _0x4b7d4f=await recorder['processSensorEvent'](this,_0x473a70,_0x5964e5,_0xe5762a);_0x4b7d4f&&this[_0x484eb1(0xdd)](_0x484eb1(0x1a9),{'val':Date['now'](),'ack':!![]});_0x4b7d4f&&_0x4b7d4f['type']==='motion'&&_0x4b7d4f[_0x484eb1(0x14a)]&&this['isProVersion']&&deadMan[_0x484eb1(0x1af)](this,_0x4b7d4f[_0x484eb1(0x14a)]);_0x5964e5['val']&&(_0x5964e5[_0x484eb1(0x118)]===!![]||_0x5964e5[_0x484eb1(0x118)]===0x1||String(_0x5964e5[_0x484eb1(0x118)])[_0x484eb1(0x161)]()===_0x484eb1(0x1b8))&&(_0xe5762a[_0x484eb1(0x1d8)]&&(_0xe5762a[_0x484eb1(0x1d8)]['includes'](_0x484eb1(0x1aa))||_0xe5762a[_0x484eb1(0x1d8)]['includes'](_0x484eb1(0x10a)))&&this['analyzeWindowOpening'](_0xe5762a));if(_0xe5762a['type']===_0x484eb1(0x15f)||_0xe5762a[_0x484eb1(0x1d8)]===_0x484eb1(0x18d)){if(this[_0x484eb1(0x117)][_0x484eb1(0xca)])automation[_0x484eb1(0x16f)](this);}}}async[a0_0x2b6918(0xc8)](_0x382cd7){const _0x20c09c=a0_0x2b6918;if(!this[_0x20c09c(0x151)]||Date[_0x20c09c(0xe9)]()-this['bootTime']>0x493e0)return;try{const _0x6ad635=JSON['parse'](_0x382cd7),_0x400911=this[_0x20c09c(0x151)][_0x20c09c(0xbf)];let _0x1978ee=![];for(const _0x2bd473 in _0x400911){if(_0x400911[_0x2bd473][_0x20c09c(0x138)]('AI')&&_0x6ad635[_0x2bd473]&&!_0x6ad635[_0x2bd473][_0x20c09c(0x138)]('AI')){_0x1978ee=!![];break;}}_0x1978ee&&(await this['setStateAsync']('analysis.energy.warmupTimes',{'val':JSON[_0x20c09c(0x102)](this['memoryCache']['times']),'ack':!![]}),await this[_0x20c09c(0x19f)](_0x20c09c(0x1cf),{'val':JSON[_0x20c09c(0x102)](this[_0x20c09c(0x151)][_0x20c09c(0xbf)]),'ack':!![]}));}catch(_0x5f3afe){}}async['loadSystemMode'](){const _0x12e712=a0_0x2b6918;try{const _0x3e9ec5=await this[_0x12e712(0x147)](setup[_0x12e712(0x1b0)]);if(_0x3e9ec5&&_0x3e9ec5[_0x12e712(0x118)])this[_0x12e712(0x128)]=_0x3e9ec5[_0x12e712(0x118)];}catch(_0x52d657){this[_0x12e712(0x128)]=setup['SYSTEM_MODES'][_0x12e712(0x106)];}}async[a0_0x2b6918(0x1d3)](){return![];}async[a0_0x2b6918(0x187)](){const _0x2640b4=a0_0x2b6918;await aiAgent[_0x2640b4(0x1ea)](this);this[_0x2640b4(0x117)][_0x2640b4(0x1de)]&&(this[_0x2640b4(0x18b)](),this['triggerGaitAnalysis']());if(this['activeModules'][_0x2640b4(0xca)])this['triggerEnergyPrediction']();}async[a0_0x2b6918(0xc6)](){return![];}[a0_0x2b6918(0x1e6)](){if(!this['isProVersion'])return;}async[a0_0x2b6918(0x1b4)](){}['updateHealthVector'](){}async[a0_0x2b6918(0x1c9)](_0xe489a3){}async[a0_0x2b6918(0xf9)](_0x23747a,_0x3a69ff){}async[a0_0x2b6918(0x154)](_0x1dacbc){}async[a0_0x2b6918(0x1ce)](_0xe3a9b6){}['sendNotification'](_0x11dafa){}}if(require[a0_0x2b6918(0x167)]!==module)module['exports']=_0x6f47c8=>new CogniLiving(_0x6f47c8);else new CogniLiving();