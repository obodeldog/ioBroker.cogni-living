const a0_0x5c4e32=a0_0x23cb;(function(_0x35c522,_0x9b18a7){const _0x42b275=a0_0x23cb,_0x3ec712=_0x35c522();while(!![]){try{const _0x200953=parseInt(_0x42b275(0x1fe))/0x1+parseInt(_0x42b275(0x209))/0x2*(parseInt(_0x42b275(0x1e5))/0x3)+parseInt(_0x42b275(0x19b))/0x4*(parseInt(_0x42b275(0x1cd))/0x5)+-parseInt(_0x42b275(0xf9))/0x6*(-parseInt(_0x42b275(0x122))/0x7)+parseInt(_0x42b275(0x2a9))/0x8*(parseInt(_0x42b275(0x280))/0x9)+-parseInt(_0x42b275(0x130))/0xa+-parseInt(_0x42b275(0x161))/0xb;if(_0x200953===_0x9b18a7)break;else _0x3ec712['push'](_0x3ec712['shift']());}catch(_0x28fce3){_0x3ec712['push'](_0x3ec712['shift']());}}}(a0_0x3342,0xbfb0c));const a0_0x3bdd38=(function(){let _0x555fdf=!![];return function(_0xf10f5b,_0xc244f6){const _0x43f3c8=_0x555fdf?function(){const _0x5a01b6=a0_0x23cb;if(_0xc244f6){const _0x4e3fa8=_0xc244f6[_0x5a01b6(0xe2)](_0xf10f5b,arguments);return _0xc244f6=null,_0x4e3fa8;}}:function(){};return _0x555fdf=![],_0x43f3c8;};}()),a0_0x242f72=a0_0x3bdd38(this,function(){const _0x342b3e=a0_0x23cb;return a0_0x242f72[_0x342b3e(0x166)]()[_0x342b3e(0x21a)]('(((.+)+)+)+$')[_0x342b3e(0x166)]()[_0x342b3e(0x1ea)](a0_0x242f72)[_0x342b3e(0x21a)]('(((.+)+)+)+$');});function a0_0x3342(){const _0x110dba=['PRIORITÃ„T:\x20Sicherheit.','ltmJob','âš ï¸\x20Python\x20missing\x20dependencies.\x20Triggering\x20Auto-Install...','isArray','\x20sensors...','unshift','getForeignObjectsAsync','.\x20KONTEXT:\x20','Pattern\x20Detected','role','error','Error\x20launching\x20Python\x20service:\x20','isProVersion','notifyTelegramInstance','[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20','maintenance','icons-mfd.','licht','.forecast.current.temp','System\x20Status\x20&\x20Control','indicator.alarm','exports','events.history','debug','\x20days\x20of\x20activity\x20data\x20to\x20Python...','fault','exitTimer','object','occupancy','getStateAsync','targetposition','send','name','button','\x20(Type\x20\x27','Logbook','Comfort\x20Suggestion','No\x20instance','baselineDrift','close','PARTY','[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20','Gast','Success:\x20Compressed\x20','4OTPPQt','timestamp','VACATION','getTime','minDaysForBaseline','analysis.health.sleepScore','modeResetJob','Normal','stdin','systemConfig','value','thermostat','KALENDER:\x20Keine\x20Daten','status','health','sendToAsync','Fehler:\x20','analysis.automation.suggestedAction','Deviation','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','uuid','LTM.processingStatus','service.py','slice','door','presence','targetValue','stick_unreach','\x20events','setHours','ðŸš¨\x20EMERGENCY','analysis.feedbackHistory','some','Bibliotheken\x20nicht\x20gefunden','getGenerativeModel','javascript.','âœ…\x20AUTO-FIX\x20SUCCESS.\x20Dependencies\x20installed.\x20Restarting\x20Service...','lastIndexOf','direction','Drift\x20Analysis','notifyTelegramRecipient','unreach','@google/generative-ai','subscribeStates','ðŸ“ž\x20RÃ¼ckruf\x20anfordern','location','stderr','lastAlertState','pop','time','2589240LDyeJC','length','Details:\x20','namespace','expire','Training\x20Data\x20Sets','system.meta.uuid','ðŸ\x20Stopping\x20Python\x20Sidecar...','[PYTHON]\x20','NORMAL','ðŸ› ï¸\x20AUTO-FIX:\x20Installing\x20Python\x20dependencies\x20from\x20','data','simulateButler','motion','rawEventLog','set_temperature','notifyEmailEnabled','actual_temperature','delObjectAsync','briefingJob','useCalendar','filter','\x22\x20--break-system-packages\x20--user','number','1137HkCtCe','state','substring','common','Error\x20checking\x20WiFi:\x20','constructor','Last\x20raw\x20event','channel','generateContent','ðŸ\x20Python\x20Pong\x20received!\x20Latency\x20check\x20passed.','notifyTelegramEnabled','Automation\x20Proposals','getCalendarNames','.data.table','Aktiv\x20(','Daily\x20Digests','config_pending','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','toFixed','push','system.isPresent','events.history_debug_00','[RECORDER]\x20Discarding\x20short\x20sequence\x20(Length:\x20','[PYTHON]\x20Service\x20exited\x20with\x20code\x20','toLocaleString','143286GvELVB','klima','analysis.activitySummary','driftDetails','siren','Health\x20&\x20Sleep\x20Analysis','.forecast.current.temperature','getObjectAsync','.NextHours.Location_1.Day_1.current.temp_value','licenseKey','rssi','514QgqSqG','response','log',')\x20-\x20FUNCTIONS\x20FIRST\x20ARCHITECTURE','forEach','Verbindung\x20erfolgreich!\x20Antwort:\x20','lock','Activity-Level','Could\x20not\x20kill\x20Python\x20process:\x20','sensorLastValues','devices','enum','Who\x20is\x20present?','LTM.trainingData.sequences','ack','working','[RECORDER\x20DEBUG]\x20Accepting\x20Event\x20','search','echarts.','Please\x20run\x20this\x20MANUALLY\x20in\x20the\x20console\x20(as\x20root/sudo):\x20apt\x20install\x20python3-pip','light','cover','\x20min).','info','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','briefingTime','testContext','onMessage','ANALYZE_TREND','analysis.trigger','Last\x20Check','âŒ\x20Installation\x20failed\x20even\x20after\x20bootstrap:\x20','temp','Wetter:\x20Deaktiviert','useWeather','analysis.health.trendDiagnosis','cancel','stringify','Description','[TEST]\x20','analysis.automation.description','apiKey','analysis.deviationFromBaseline','.forecast.current.state','ready','round','KALENDER:\x20','Briefing\x20Error:\x20','analysis.triggerBriefing','autoApply','analysis.automation.triggerAction','callback','LTM.driftAnalysis','doors','Trigger\x20Action\x20Now','text.alarm','testNotification','TREND_RESULT','getEnums','\x20(Value\x20is\x20falsy:\x20','replace','system.config','analysis.automation.targetId','08:00','livingContext','split','text','type','models/gemini-flash-latest','version','PONG','\x27\x20not\x20in\x20allowed\x20list)','LTM.baselineStatus','automation.triggerAction','.Current.Temperature','isGracePeriodActive','\x20=\x20','power',').\x20Saving\x20to\x20Training\x20Data.','selectedFunctionIds','presenceDevices','find','enum.functions.*','retry','link_quality','calendarSelection','values','window','LTM','fill','...','system.mode','bewegung','currentSystemMode','âœ…\x20PIP\x20bootstrapped\x20successfully.\x20Retrying\x20installation...','currentposition','analysis.alertReason','string','boolean','.NextHours.Location_1.Day_1.current.symbol_desc','Alert\x20Reason','rollladen','ðŸ\x20Starting\x20Python\x20Sidecar:\x20','system.presenceWho','Briefing\x20Sched\x20Error:\x20','Array\x20of\x20completed\x20movement\x20paths\x20for\x20ML\x20training','writable','.Summary.Current','Correlation\x20between\x20Inside\x20Temp,\x20Outside\x20Temp\x20and\x20Time','parse','dimmer','activityLevel','analysis.analysisHistory','Target\x20ID','json','N/A','connection','prÃ¤senz','BUTLER\x20Execution\x20Error:\x20','47727qqdUEA','eventHistory','Guardian:\x20Not\x20enough\x20history\x20data\x20for\x20trend\x20analysis\x20yet.','/100,\x20AktivitÃ¤t\x20seit\x2004:00:\x20','blind','material.','val','date','main','Started\x20at\x20','setpoint','switch','bind','daswetter.0','getForeignStateAsync','analysis.automation.autoApply','shift','getDate','Recorded\x20Motion\x20Sequences','now','analysis.comfortSummary','Error:\x20','Morning\x20Briefing\x20sent.','schalter','Kein\x20API\x20Key!','geminiModel','python3\x20-m\x20pip\x20install\x20-r\x20\x22','endsWith','WETTER:\x20','Skipped\x20(No\x20AI\x20or\x20Data)','shutter','extendObjectAsync','energy','analysis.automation','Thermodynamic\x20Data\x20Points','daswetter','openweathermap','sort','contact','Comfort\x20Summary','targetId','184vYedxO','description','LTM.driftAnalysis.driftDetails','scanDevices','join','genAI','analysisHistory','Gemini\x20Init\x20Error:\x20','getMonth','weatherInstance','kill','fenster','getHours','analysisTimer','KALENDER\x20ERROR:\x20','\x20hours.\x20Potential\x20incapacitation.','getCalendarNames\x20Error:\x20','Lernphase\x20(','warn','ðŸ“ž\x20User\x20requested\x20CALL\x20via\x20Telegram!','kontakt','No\x20module\x20named','Adapter','Missing\x20data','getForeignObjectAsync','LTM.rawEventLog','stateChange','feedbackHistory','0\x203\x20*\x20*\x20*','Scheduling\x20Morning\x20Briefing\x20for\x20','accuweather','PRO-','Auto\x20Apply\x20Rule','Feedback\x20Log','getLtmData','GUEST','onStateChange','[RECORDER]\x20Sequence\x20finished\x20(Steps:\x20','ltmDriftCheckIntervalHours','LTM.trainingData.thermodynamics','@iobroker/adapter-core','temperature','loc','generic','Action','analysis.health.trendValue','exitGraceTimer','ðŸ\x20Guardian\x20Diagnosis\x20(','\x22\x20--break-system-packages','openweathermap.0','Party','summary','indexOf','apply','analysis.comfortSuggestion','analysis.isEmergency','submitFeedback','_score','weatherunderground','toLowerCase','Failed\x20to\x20send\x20to\x20Python:\x20','lastCheck','Kalender:\x20Deaktiviert','dependencyInstallInProgress','analysis.automation.targetValue','\x20events)...','testApiKey','python3','simple-api.','firmware','\x20|\x20','Trend\x20Value\x20(%)','flot.','accuweather.0','Feedback\x20saved:\x20','setStateAsync','9282WSkhux','ðŸŒ…\x20Daily\x20Briefing:\x0a','inactivityThresholdHours','message','Baseline\x20Status','Vom\x20Benutzer\x20bestÃ¤tigt\x20(OK).','COGNI_CONFIRM_OK','AI\x20Emergency\x20Status','KALENDER:\x20Keine\x20Kalender\x20ausgewÃ¤hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)','triggerBriefing','subscribeForeignStatesAsync','0\x204\x20*\x20*\x20*','âœ…\x20SUCCESS.\x20Dependencies\x20installed.\x20Restarting\x20Service...','Drift\x20Status','child_process','aiPersona','Kein\x20API\x20Key\x20eingegeben.','setState','analysisInterval','LTM\x20Sched\x20Error:\x20','pythonProcess','native','driftAnalysisTimer','Activity\x20Summary','âŒ\x20AUTO-FIX\x20FAILED.\x20Please\x20check\x20permissions.','.\x20OUTPUT:\x20Nur\x20Text.','path','party','uuid-error','AI\x20Alert\x20Status','analysis.health.restlessness','notifyEmailRecipient','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','members','scriptProblem','value.health','triggerDailyDigest','ltmStbWindowDays','ltmLtbWindowDays','toISOString','[RESULT]','5033dSrqXi','write','analysis.automation.patternDetected','calendarInstance','Invalid\x20JSON\x20from\x20Python:\x20','communicate.request','off','PRIORITÃ„T:\x20Gesundheit/AAL.','Event\x20History','notifyPushoverInstance','reachable','sendTo','ðŸ“ž\x20RÃœCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20RÃ¼ckruf-Button\x20gedrÃ¼ckt.','map','10732090yrrQkZ','sensor','âœ…\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.','Deaktiviert\x20(Pro-Feature)','position','lights','python_service','heizung','WETTER\x20ERROR:\x20','dismissAutomation','city','unknown','Fokus\x20auf\x20Familienroutinen.','ML-Libs\x20fehlen','unload','cogni-living\x20adapter\x20starting\x20(v','valve','none','getFullYear','lampe','Fokus\x20auf\x20Komfort.','includes','indicator.alarm.fire','humidity','âœ…\x20Alarm\x20quittiert.\x20System\x20normal.','python3\x20-m\x20ensurepip\x20--default-pip\x20--user','analysis.isAlert','ROLLE:\x20FÃ¼rsorglicher\x20Assistent.\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20','setObjectNotExistsAsync','config','Unknown','splice','Processing\x20Status','[RECORDER]\x20Error\x20saving\x20sequence:\x20','KALENDER:\x20Keine\x20relevanten\x20Termine','geminiApiKey','longitude','trim','isPresent','outdoorSensorId','startsWith','sleepScore','scheduleJob','KI-Modell\x20nicht\x20initialisiert','Say\x20Hello','Gemini\x20AI\x20initialized.','onUnload','dutycycle','onReady','1478686qwmDbe','[LOG]','tÃ¼r','command','vacation','toString','Trigger\x20Briefing\x20(Test)','dailyDigests','No\x20module\x20named\x20pip','online','from','.communicate.request','Sending\x20notification:\x20\x22','uuid-not-found'];a0_0x3342=function(){return _0x110dba;};return a0_0x3342();}a0_0x242f72();'use strict';const utils=require(a0_0x5c4e32(0x2d1)),{GoogleGenerativeAI}=require(a0_0x5c4e32(0x1c5)),schedule=require('node-schedule'),{spawn,exec}=require(a0_0x5c4e32(0x107)),path=require(a0_0x5c4e32(0x113)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x5c4e32(0x24d),LTM_SCHEDULE=a0_0x5c4e32(0x2c5),MODE_RESET_SCHEDULE=a0_0x5c4e32(0x104),ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,LTM_DP_RAW_LOG=a0_0x5c4e32(0x2c2),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x5c4e32(0x1b0),LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS=a0_0x5c4e32(0x251),LTM_DP_DRIFT_CHANNEL=a0_0x5c4e32(0x23d),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS=a0_0x5c4e32(0x2ab),LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE=a0_0x5c4e32(0x264),HARD_IGNORE_TERMS=[a0_0x5c4e32(0x11b),'scriptEnabled','update',a0_0x5c4e32(0x1c4),'lowbat',a0_0x5c4e32(0x208),a0_0x5c4e32(0x27d),a0_0x5c4e32(0x17e),'error',a0_0x5c4e32(0x188),a0_0x5c4e32(0x218),a0_0x5c4e32(0x1c1),a0_0x5c4e32(0x1b6),a0_0x5c4e32(0x1f5),a0_0x5c4e32(0x15f),a0_0x5c4e32(0xf2),a0_0x5c4e32(0x12c),a0_0x5c4e32(0x25d)],BAD_NAMES=[a0_0x5c4e32(0x18d),a0_0x5c4e32(0x268),'state','level',a0_0x5c4e32(0x1a5),'brightness','on',a0_0x5c4e32(0x128),a0_0x5c4e32(0x28b),a0_0x5c4e32(0x134),a0_0x5c4e32(0x29e),'blind',a0_0x5c4e32(0x21e),a0_0x5c4e32(0x1a8),a0_0x5c4e32(0x1da),a0_0x5c4e32(0x1b4),a0_0x5c4e32(0x18b),'temperature','humidity',a0_0x5c4e32(0x256),a0_0x5c4e32(0x2a0),a0_0x5c4e32(0x28a),a0_0x5c4e32(0x140),a0_0x5c4e32(0x1de),a0_0x5c4e32(0x1dc)],ADAPTER_BLACKLIST=['system.','admin.','info.','vis.','history.',a0_0x5c4e32(0x285),a0_0x5c4e32(0x17f),a0_0x5c4e32(0xf5),a0_0x5c4e32(0x21b),a0_0x5c4e32(0x1be),a0_0x5c4e32(0xf1)],SYSTEM_MODES={'NORMAL':'normal','VACATION':a0_0x5c4e32(0x165),'PARTY':a0_0x5c4e32(0x114),'GUEST':'guest'},AUTO_RESET_MODES=[SYSTEM_MODES['PARTY'],SYSTEM_MODES[a0_0x5c4e32(0x2cc)]],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0x5c4e32(0x129),'family':a0_0x5c4e32(0x13c),'single_comfort':a0_0x5c4e32(0x144),'security':a0_0x5c4e32(0x16f)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0xdebc24){const _0x1f6c7f=a0_0x5c4e32;try{const _0x24afb1=['analysis.history_debug_00',_0x1f6c7f(0x1fa)];for(const _0x599429 of _0x24afb1){try{const _0x180837=await _0xdebc24[_0x1f6c7f(0x205)](_0x599429);_0x180837&&await _0xdebc24[_0x1f6c7f(0x1df)](_0x599429);}catch(_0xe5b9c5){}}}catch(_0x35d363){}}async function initHistory(_0x39e756){const _0x368101=a0_0x5c4e32;try{const _0x1ea902=await _0x39e756[_0x368101(0x18c)](_0x368101(0x185));_0x1ea902&&_0x1ea902['val']&&(_0x39e756[_0x368101(0x281)]=JSON[_0x368101(0x276)](_0x1ea902['val'][_0x368101(0x166)]()));}catch(_0x398ef3){_0x39e756[_0x368101(0x281)]=[];}try{const _0x222163=await _0x39e756[_0x368101(0x18c)](_0x368101(0x279));if(_0x222163&&_0x222163[_0x368101(0x286)])_0x39e756[_0x368101(0x2af)]=JSON['parse'](_0x222163[_0x368101(0x286)][_0x368101(0x166)]());}catch(_0x579d94){_0x39e756[_0x368101(0x2af)]=[];}if(_0x39e756['eventHistory']&&_0x39e756[_0x368101(0x281)][_0x368101(0x1ce)]>0x0){_0x39e756[_0x368101(0x20b)]['info']('Restoring\x20sensor\x20cache\x20from\x20history\x20('+_0x39e756['eventHistory']['length']+_0x368101(0xee));for(let _0x54b7d8=_0x39e756['eventHistory'][_0x368101(0x1ce)]-0x1;_0x54b7d8>=0x0;_0x54b7d8--){const _0x1f4018=_0x39e756[_0x368101(0x281)][_0x54b7d8];_0x1f4018&&_0x1f4018['id']!==undefined&&_0x1f4018[_0x368101(0x1a5)]!==undefined&&(_0x39e756[_0x368101(0x212)][_0x1f4018['id']]=_0x1f4018[_0x368101(0x1a5)]);}}}async function initSystemConfig(_0x490250){const _0x4aecf2=a0_0x5c4e32;try{const _0x3c272b=await _0x490250['getForeignObjectAsync'](_0x4aecf2(0x246));_0x3c272b&&_0x3c272b[_0x4aecf2(0x1e8)]&&(_0x490250[_0x4aecf2(0x1a4)]={'latitude':_0x3c272b['common']['latitude']||0x0,'longitude':_0x3c272b[_0x4aecf2(0x1e8)][_0x4aecf2(0x154)]||0x0,'city':_0x3c272b['common'][_0x4aecf2(0x13a)]||''});}catch(_0x30e610){}}async function checkLicense(_0x53605f,_0x518359){const _0x591cd9=a0_0x5c4e32;if(!_0x518359)return![];_0x53605f['systemUUID']=await getSystemUUID(_0x53605f);if(_0x518359==='TEST-PRO-KEY'||_0x518359[_0x591cd9(0x158)](_0x591cd9(0x2c8)))return!![];return![];}async function getSystemUUID(_0x18883a){const _0x37c8fc=a0_0x5c4e32;try{const _0x424b58=await _0x18883a[_0x37c8fc(0x2c1)](_0x37c8fc(0x1d3));if(_0x424b58&&_0x424b58['native']&&_0x424b58[_0x37c8fc(0x10e)][_0x37c8fc(0x1af)])return _0x424b58['native'][_0x37c8fc(0x1af)];return _0x37c8fc(0x16e);}catch(_0x3a7c43){return _0x37c8fc(0x115);}}async function createAllObjects(_0x5084b2){const _0x2ed082=a0_0x5c4e32;await checkSystemObjects(_0x5084b2),await _0x5084b2['setObjectNotExistsAsync'](_0x2ed082(0x270),{'type':_0x2ed082(0x1e6),'common':{'name':_0x2ed082(0x215),'type':_0x2ed082(0x26a),'role':_0x2ed082(0x24b),'read':!![],'write':![],'def':''},'native':{}}),await _0x5084b2['setObjectNotExistsAsync']('events.lastEvent',{'type':'state','common':{'name':_0x2ed082(0x1eb),'type':_0x2ed082(0x26a),'role':_0x2ed082(0x27b),'read':!![],'write':![]},'native':{}}),await _0x5084b2['setObjectNotExistsAsync'](_0x2ed082(0x185),{'type':_0x2ed082(0x1e6),'common':{'name':_0x2ed082(0x12a),'type':_0x2ed082(0x26a),'role':_0x2ed082(0x27b),'read':!![],'write':![]},'native':{}}),await _0x5084b2[_0x2ed082(0x14c)]('analysis.trigger',{'type':_0x2ed082(0x1e6),'common':{'name':'Trigger\x20Analysis','type':'boolean','role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await _0x5084b2[_0x2ed082(0x14c)](_0x2ed082(0x239),{'type':_0x2ed082(0x1e6),'common':{'name':_0x2ed082(0x167),'type':'boolean','role':_0x2ed082(0x190),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x5084b2[_0x2ed082(0x14c)]('analysis.lastResult',{'type':_0x2ed082(0x1e6),'common':{'name':'Last\x20Result','type':_0x2ed082(0x26a),'role':_0x2ed082(0x27b),'read':!![],'write':![]},'native':{}}),await _0x5084b2[_0x2ed082(0x14c)]('analysis.isAlert',{'type':_0x2ed082(0x1e6),'common':{'name':_0x2ed082(0x116),'type':'boolean','role':_0x2ed082(0x183),'read':!![],'write':![],'def':![]},'native':{}}),await _0x5084b2[_0x2ed082(0x14c)](_0x2ed082(0xe4),{'type':'state','common':{'name':_0x2ed082(0x100),'type':_0x2ed082(0x26b),'role':_0x2ed082(0x146),'read':!![],'write':![],'def':![]},'native':{}}),await _0x5084b2[_0x2ed082(0x14c)]('analysis.alertReason',{'type':_0x2ed082(0x1e6),'common':{'name':_0x2ed082(0x26d),'type':_0x2ed082(0x26a),'role':_0x2ed082(0x240),'read':!![],'write':![]},'native':{}}),await _0x5084b2[_0x2ed082(0x14c)](_0x2ed082(0x200),{'type':_0x2ed082(0x1e6),'common':{'name':_0x2ed082(0x110),'type':_0x2ed082(0x26a),'role':'text','read':!![],'write':![]},'native':{}}),await _0x5084b2[_0x2ed082(0x14c)](_0x2ed082(0x233),{'type':'state','common':{'name':_0x2ed082(0x1ad),'type':_0x2ed082(0x26a),'role':_0x2ed082(0x1e6),'read':!![],'write':![],'def':_0x2ed082(0x27c)},'native':{}}),await _0x5084b2['setObjectNotExistsAsync'](_0x2ed082(0x294),{'type':_0x2ed082(0x1e6),'common':{'name':_0x2ed082(0x2a7),'type':'string','role':_0x2ed082(0x24b),'read':!![],'write':![]},'native':{}}),await _0x5084b2['setObjectNotExistsAsync'](_0x2ed082(0xe3),{'type':_0x2ed082(0x1e6),'common':{'name':_0x2ed082(0x193),'type':'string','role':_0x2ed082(0x24b),'read':!![],'write':![]},'native':{}}),await _0x5084b2['extendObjectAsync'](_0x2ed082(0x2a1),{'type':'channel','common':{'name':_0x2ed082(0x1f0)},'native':{}}),await _0x5084b2['setObjectNotExistsAsync'](_0x2ed082(0x124),{'type':_0x2ed082(0x1e6),'common':{'name':_0x2ed082(0x177),'type':_0x2ed082(0x26b),'role':'indicator','read':!![],'write':![],'def':![]},'native':{}}),await _0x5084b2[_0x2ed082(0x14c)](_0x2ed082(0x231),{'type':_0x2ed082(0x1e6),'common':{'name':_0x2ed082(0x22f),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x5084b2['setObjectNotExistsAsync'](_0x2ed082(0x1ac),{'type':'state','common':{'name':_0x2ed082(0x2d5),'type':_0x2ed082(0x26a),'role':_0x2ed082(0x24b),'read':!![],'write':![]},'native':{}}),await _0x5084b2[_0x2ed082(0x14c)](_0x2ed082(0x247),{'type':_0x2ed082(0x1e6),'common':{'name':_0x2ed082(0x27a),'type':_0x2ed082(0x26a),'role':_0x2ed082(0x24b),'read':!![],'write':![]},'native':{}}),await _0x5084b2[_0x2ed082(0x14c)](_0x2ed082(0xed),{'type':_0x2ed082(0x1e6),'common':{'name':'Target\x20Value','type':_0x2ed082(0x26a),'role':'text','read':!![],'write':![]},'native':{}}),await _0x5084b2['setObjectNotExistsAsync']('analysis.automation.autoApply',{'type':'state','common':{'name':_0x2ed082(0x2c9),'type':_0x2ed082(0x26b),'role':_0x2ed082(0x28b),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x5084b2['setObjectNotExistsAsync'](_0x2ed082(0x23b),{'type':'state','common':{'name':_0x2ed082(0x23f),'type':'boolean','role':_0x2ed082(0x190),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x5084b2[_0x2ed082(0x14c)](_0x2ed082(0x279),{'type':_0x2ed082(0x1e6),'common':{'name':_0x2ed082(0x192),'type':'string','role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await _0x5084b2['setObjectNotExistsAsync'](_0x2ed082(0x1ba),{'type':_0x2ed082(0x1e6),'common':{'name':_0x2ed082(0x2ca),'type':_0x2ed082(0x26a),'role':_0x2ed082(0x27b),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x5084b2[_0x2ed082(0x29f)]('analysis.health',{'type':'channel','common':{'name':_0x2ed082(0x203)},'native':{}}),await _0x5084b2[_0x2ed082(0x14c)](_0x2ed082(0x1a0),{'type':'state','common':{'name':'Sleep\x20Score\x20(0-100)','type':_0x2ed082(0x1e4),'role':_0x2ed082(0x11c),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x5084b2[_0x2ed082(0x14c)](_0x2ed082(0x117),{'type':_0x2ed082(0x1e6),'common':{'name':'Restlessness\x20Level','type':_0x2ed082(0x26a),'role':_0x2ed082(0x24b),'read':!![],'write':![],'def':_0x2ed082(0x141)},'native':{}}),await _0x5084b2[_0x2ed082(0x14c)]('analysis.health.notes',{'type':_0x2ed082(0x1e6),'common':{'name':'Health\x20Notes','type':_0x2ed082(0x26a),'role':_0x2ed082(0x24b),'read':!![],'write':![],'def':''},'native':{}}),await _0x5084b2[_0x2ed082(0x14c)](_0x2ed082(0x22c),{'type':_0x2ed082(0x1e6),'common':{'name':'Trend\x20Diagnosis\x20(Python)','type':'string','role':_0x2ed082(0x24b),'read':!![],'write':![],'def':_0x2ed082(0x27c)},'native':{}}),await _0x5084b2['setObjectNotExistsAsync']('analysis.health.trendValue',{'type':_0x2ed082(0x1e6),'common':{'name':_0x2ed082(0xf4),'type':'number','role':_0x2ed082(0x1a5),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x5084b2[_0x2ed082(0x29f)]('LTM.trainingData',{'type':'channel','common':{'name':_0x2ed082(0x1d2)},'native':{}}),await _0x5084b2['setObjectNotExistsAsync'](_0x2ed082(0x216),{'type':_0x2ed082(0x1e6),'common':{'name':_0x2ed082(0x292),'type':_0x2ed082(0x26a),'role':'json','read':!![],'write':![],'def':'[]','desc':_0x2ed082(0x272)},'native':{}}),await _0x5084b2['setObjectNotExistsAsync']('LTM.trainingData.thermodynamics',{'type':_0x2ed082(0x1e6),'common':{'name':_0x2ed082(0x2a2),'type':_0x2ed082(0x26a),'role':_0x2ed082(0x27b),'read':!![],'write':![],'def':'[]','desc':_0x2ed082(0x275)},'native':{}}),await checkLtmObjects(_0x5084b2),await checkLtmDriftObjects(_0x5084b2);}async function checkSystemObjects(_0x2608cb){const _0x3f5f53=a0_0x5c4e32;await _0x2608cb[_0x3f5f53(0x29f)]('system',{'type':'channel','common':{'name':_0x3f5f53(0x182)},'native':{}}),await _0x2608cb[_0x3f5f53(0x29f)](SYSTEM_DP_MODE,{'type':'state','common':{'name':'System\x20Mode','type':_0x3f5f53(0x26a),'role':_0x3f5f53(0x1e6),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x3f5f53(0x1d6)],'states':{[SYSTEM_MODES['NORMAL']]:_0x3f5f53(0x1a2),[SYSTEM_MODES[_0x3f5f53(0x19d)]]:'Urlaub',[SYSTEM_MODES[_0x3f5f53(0x197)]]:_0x3f5f53(0x2db),[SYSTEM_MODES['GUEST']]:_0x3f5f53(0x199)}},'native':{}});}async function checkLtmObjects(_0x4dbb8f){const _0x5e2f0d=a0_0x5c4e32;await _0x4dbb8f[_0x5e2f0d(0x29f)](_0x5e2f0d(0x261),{'type':'channel','common':{'name':'LTM'},'native':{}}),await _0x4dbb8f[_0x5e2f0d(0x29f)](LTM_DP_RAW_LOG,{'type':_0x5e2f0d(0x1e6),'common':{'name':'Raw\x20Log','type':_0x5e2f0d(0x26a),'role':_0x5e2f0d(0x27b),'read':!![],'write':![]},'native':{}}),await _0x4dbb8f['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x5e2f0d(0x1e6),'common':{'name':_0x5e2f0d(0x1f4),'type':_0x5e2f0d(0x26a),'role':'json','read':!![],'write':![]},'native':{}}),await _0x4dbb8f['extendObjectAsync'](LTM_DP_STATUS,{'type':_0x5e2f0d(0x1e6),'common':{'name':_0x5e2f0d(0x150),'type':_0x5e2f0d(0x26a),'role':_0x5e2f0d(0x24b),'read':!![],'write':![]},'native':{}}),await _0x4dbb8f[_0x5e2f0d(0x29f)](LTM_DP_TRIGGER_DIGEST,{'type':_0x5e2f0d(0x1e6),'common':{'name':'Trigger\x20Digest','type':_0x5e2f0d(0x26b),'role':_0x5e2f0d(0x190),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x4dbb8f[_0x5e2f0d(0x29f)](LTM_DP_BASELINE_STATUS,{'type':_0x5e2f0d(0x1e6),'common':{'name':_0x5e2f0d(0xfd),'type':_0x5e2f0d(0x26a),'role':'text','read':!![],'write':![]},'native':{}});}async function checkLtmDriftObjects(_0x4f1021){const _0x171218=a0_0x5c4e32;await _0x4f1021['extendObjectAsync'](LTM_DP_DRIFT_CHANNEL,{'type':_0x171218(0x1ec),'common':{'name':_0x171218(0x1c2)},'native':{}}),await _0x4f1021['extendObjectAsync'](LTM_DP_DRIFT_STATUS,{'type':'state','common':{'name':_0x171218(0x106),'type':_0x171218(0x26a),'role':_0x171218(0x1e6),'read':!![],'write':![],'def':'N/A'},'native':{}}),await _0x4f1021['extendObjectAsync'](LTM_DP_DRIFT_DETAILS,{'type':'state','common':{'name':'Drift\x20Details','type':_0x171218(0x26a),'role':'text','read':!![],'write':![]},'native':{}}),await _0x4f1021['extendObjectAsync'](LTM_DP_DRIFT_LAST_CHECK,{'type':'state','common':{'name':_0x171218(0x227),'type':'number','role':_0x171218(0x287),'read':!![],'write':![]},'native':{}});}async function loadSystemMode(_0x4bcaf4){const _0x553557=a0_0x5c4e32;try{const _0x4e02be=await _0x4bcaf4[_0x553557(0x18c)](SYSTEM_DP_MODE);_0x4e02be&&_0x4e02be['val']&&Object['values'](SYSTEM_MODES)[_0x553557(0x145)](_0x4e02be[_0x553557(0x286)])?_0x4bcaf4[_0x553557(0x266)]=_0x4e02be[_0x553557(0x286)]:(_0x4bcaf4['currentSystemMode']=SYSTEM_MODES[_0x553557(0x1d6)],await _0x4bcaf4[_0x553557(0xf8)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x553557(0x1d6)],'ack':!![]}));}catch(_0x4e3659){_0x4bcaf4[_0x553557(0x266)]=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0x30777f){const _0x38e584=a0_0x5c4e32;try{const _0x8aa839=await _0x30777f[_0x38e584(0x18c)](LTM_DP_RAW_LOG);if(_0x8aa839&&_0x8aa839[_0x38e584(0x286)])_0x30777f['rawEventLog']=JSON['parse'](_0x8aa839['val']);}catch(_0x422231){_0x30777f['rawEventLog']=[];}}async function saveRawEventLog(_0x443f70){const _0x4c08c3=a0_0x5c4e32;_0x443f70[_0x4c08c3(0x1db)][_0x4c08c3(0x1ce)]>RAW_LOG_MAX_SIZE&&_0x443f70[_0x4c08c3(0x1db)][_0x4c08c3(0x14f)](0x0,_0x443f70[_0x4c08c3(0x1db)]['length']-RAW_LOG_MAX_SIZE),await _0x443f70[_0x4c08c3(0xf8)](LTM_DP_RAW_LOG,{'val':JSON[_0x4c08c3(0x22e)](_0x443f70[_0x4c08c3(0x1db)]),'ack':!![]});}async function loadDailyDigests(_0x41159a){const _0x1a2612=a0_0x5c4e32;try{const _0x25c228=await _0x41159a[_0x1a2612(0x18c)](LTM_DP_DAILY_DIGESTS);if(_0x25c228&&_0x25c228['val'])_0x41159a['dailyDigests']=JSON[_0x1a2612(0x276)](_0x25c228['val']);}catch(_0x2b2d35){_0x41159a[_0x1a2612(0x168)]=[];}await updateBaselineStatus(_0x41159a);}async function saveDailyDigests(_0x147c69,_0x5a1abf=!![]){const _0x23857d=a0_0x5c4e32,_0x58f8f7=_0x147c69[_0x23857d(0x14d)][_0x23857d(0x11f)]||0x3c;_0x147c69[_0x23857d(0x168)][_0x23857d(0x1ce)]>_0x58f8f7&&_0x147c69[_0x23857d(0x168)][_0x23857d(0x14f)](0x0,_0x147c69[_0x23857d(0x168)]['length']-_0x58f8f7);await _0x147c69[_0x23857d(0xf8)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x23857d(0x22e)](_0x147c69[_0x23857d(0x168)]),'ack':!![]});if(_0x5a1abf)await updateBaselineStatus(_0x147c69);}async function updateAnalysisHistory(_0x5c8180,_0x21be0a){const _0x176a41=a0_0x5c4e32;_0x5c8180['analysisHistory'][_0x176a41(0x174)](_0x21be0a);if(_0x5c8180[_0x176a41(0x2af)][_0x176a41(0x1ce)]>ANALYSIS_HISTORY_MAX_SIZE)_0x5c8180['analysisHistory'][_0x176a41(0x1cb)]();await _0x5c8180['setStateAsync']('analysis.analysisHistory',{'val':JSON[_0x176a41(0x22e)](_0x5c8180[_0x176a41(0x2af)]),'ack':!![]});}async function updateBaselineStatus(_0x2a58b8){const _0x5a87bc=a0_0x5c4e32;if(!_0x2a58b8[_0x5a87bc(0x17b)]){await _0x2a58b8['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x5a87bc(0x133),'ack':!![]});return;}const _0x7c08ca=_0x2a58b8[_0x5a87bc(0x168)][_0x5a87bc(0x1ce)]>=(_0x2a58b8[_0x5a87bc(0x14d)][_0x5a87bc(0x19f)]||0x7)?_0x5a87bc(0x1f3)+_0x2a58b8['dailyDigests'][_0x5a87bc(0x1ce)]+'\x20Tage)':_0x5a87bc(0x2ba)+_0x2a58b8[_0x5a87bc(0x168)][_0x5a87bc(0x1ce)]+'/'+(_0x2a58b8[_0x5a87bc(0x14d)]['minDaysForBaseline']||0x7)+')';await _0x2a58b8[_0x5a87bc(0xf8)](LTM_DP_BASELINE_STATUS,{'val':_0x7c08ca,'ack':!![]});}async function initSensorSubscriptions(_0x1d2263){const _0x52a55e=a0_0x5c4e32,_0x4eeefc=_0x1d2263['config'][_0x52a55e(0x213)];if(_0x4eeefc&&_0x4eeefc[_0x52a55e(0x1ce)]>0x0){_0x1d2263[_0x52a55e(0x20b)][_0x52a55e(0x220)]('Subscribing\x20to\x20'+_0x4eeefc[_0x52a55e(0x1ce)]+_0x52a55e(0x173));for(const _0x7537d3 of _0x4eeefc){if(_0x7537d3['id']){await _0x1d2263[_0x52a55e(0x103)](_0x7537d3['id']);try{const _0x43d0d3=await _0x1d2263[_0x52a55e(0x28e)](_0x7537d3['id']);if(_0x43d0d3)_0x1d2263[_0x52a55e(0x212)][_0x7537d3['id']]=_0x43d0d3[_0x52a55e(0x286)];}catch(_0x26c8a9){}}}}}async function initPresenceSubscriptions(_0x2e0796){const _0x485028=a0_0x5c4e32,_0xd7d2a3=_0x2e0796[_0x485028(0x14d)]['presenceDevices']||[];if(_0xd7d2a3['length']>0x0){_0x2e0796[_0x485028(0x20b)]['info']('Subscribing\x20to\x20'+_0xd7d2a3[_0x485028(0x1ce)]+'\x20presence\x20devices...');for(const _0x3760d8 of _0xd7d2a3){await _0x2e0796[_0x485028(0x103)](_0x3760d8);}try{await checkWifiPresence(_0x2e0796);}catch(_0x548e2c){}}}async function getWeatherContext(_0x545a9c){const _0x39212d=a0_0x5c4e32;try{if(!_0x545a9c[_0x39212d(0x14d)][_0x39212d(0x22b)])return _0x39212d(0x22a);let _0x180b29='';const _0x4c6e89=_0x545a9c[_0x39212d(0x14d)]['weatherInstance'];if(_0x4c6e89)try{if(_0x4c6e89[_0x39212d(0x145)](_0x39212d(0x2c7))){const _0x5064c0=await _0x545a9c['getForeignStateAsync'](_0x4c6e89+_0x39212d(0x274));if(_0x5064c0&&_0x5064c0[_0x39212d(0x286)])_0x180b29=_0x5064c0[_0x39212d(0x286)];}else{if(_0x4c6e89[_0x39212d(0x145)]('daswetter')){const _0x25cbe1=await _0x545a9c['getForeignStateAsync'](_0x4c6e89+_0x39212d(0x26c));if(_0x25cbe1&&_0x25cbe1['val'])_0x180b29=_0x25cbe1[_0x39212d(0x286)];}else{if(_0x4c6e89['includes'](_0x39212d(0x2a4))){const _0x5a745f=await _0x545a9c[_0x39212d(0x28e)](_0x4c6e89+_0x39212d(0x234));if(_0x5a745f&&_0x5a745f[_0x39212d(0x286)])_0x180b29=_0x5a745f[_0x39212d(0x286)];}}}}catch(_0x5ae1fd){}if(!_0x180b29){const _0x540516=[_0x39212d(0xf6),_0x39212d(0x28d),'weatherunderground.0',_0x39212d(0x2da)];for(const _0x6ee121 of _0x540516){try{const _0x3efbe3=await _0x545a9c['getForeignObjectAsync'](_0x6ee121);if(_0x3efbe3){if(_0x6ee121['includes']('accuweather')){const _0x1f70d=await _0x545a9c[_0x39212d(0x28e)](_0x6ee121+_0x39212d(0x274));if(_0x1f70d&&_0x1f70d[_0x39212d(0x286)]){_0x180b29=_0x1f70d['val'];break;}}}}catch(_0x294266){}}}return _0x180b29?_0x39212d(0x29c)+_0x180b29:'WETTER:\x20Keine\x20Daten\x20gefunden';}catch(_0xb6a5c8){return _0x39212d(0x138)+_0xb6a5c8[_0x39212d(0xfc)];}}async function getCalendarContext(_0x3019b7){const _0x116da5=a0_0x5c4e32;try{if(!_0x3019b7[_0x116da5(0x14d)][_0x116da5(0x1e1)])return _0x116da5(0xeb);let _0x4325f7=_0x3019b7[_0x116da5(0x14d)][_0x116da5(0x125)]||'ical.0',_0x197fee=_0x3019b7[_0x116da5(0x14d)][_0x116da5(0x25e)]||[];if(typeof _0x197fee===_0x116da5(0x26a))_0x197fee=_0x197fee['split'](',');try{const _0x15a270=await _0x3019b7[_0x116da5(0x28e)](_0x4325f7+_0x116da5(0x1f2));if(_0x15a270&&_0x15a270['val']){let _0x32b7b8=tryParse(_0x15a270['val']);if(_0x32b7b8&&Array['isArray'](_0x32b7b8)){if(_0x197fee['length']>0x0)_0x32b7b8=_0x32b7b8[_0x116da5(0x1e2)](_0x3fae6e=>_0x197fee[_0x116da5(0x145)](_0x3fae6e['_calName']||''));else return _0x116da5(0x101);if(_0x32b7b8[_0x116da5(0x1ce)]>0x0){const _0x240508=_0x32b7b8[_0x116da5(0x1b2)](0x0,0x3)[_0x116da5(0x12f)](_0x15af16=>{const _0xcc62eb=_0x116da5;let _0x5ea602=_0x15af16[_0xcc62eb(0x287)];if(_0x15af16[_0xcc62eb(0x1cc)])_0x5ea602+='\x20'+_0x15af16[_0xcc62eb(0x1cc)];return _0x5ea602+':\x20'+_0x15af16['event']+'\x20('+_0x15af16['_calName']+')';});return _0x116da5(0x237)+_0x240508[_0x116da5(0x2ad)](_0x116da5(0xf3));}else return _0x116da5(0x152);}}}catch(_0x242a6e){_0x3019b7[_0x116da5(0x20b)][_0x116da5(0x2bb)]('Error\x20reading\x20calendar\x20table:\x20'+_0x242a6e[_0x116da5(0xfc)]);}return _0x116da5(0x1a7);}catch(_0x455a5a){return _0x116da5(0x2b7)+_0x455a5a[_0x116da5(0xfc)];}}async function getCalendarNames(_0x247ec0,_0x42c0ae){const _0x14092b=a0_0x5c4e32;try{const _0x4f6f0f=await _0x247ec0[_0x14092b(0x28e)](_0x42c0ae+_0x14092b(0x1f2));if(_0x4f6f0f&&_0x4f6f0f[_0x14092b(0x286)]){const _0x5481bb=tryParse(_0x4f6f0f[_0x14092b(0x286)]);if(_0x5481bb&&Array[_0x14092b(0x172)](_0x5481bb)){const _0x132040=[...new Set(_0x5481bb[_0x14092b(0x12f)](_0x14ce1a=>_0x14ce1a['_calName'])['filter'](Boolean))];return _0x132040[_0x14092b(0x2a5)]();}}return[];}catch(_0x56f7bd){return _0x247ec0[_0x14092b(0x20b)][_0x14092b(0x179)](_0x14092b(0x2b9)+_0x56f7bd['message']),[];}}async function checkWifiPresence(_0x4ec597){const _0x93286e=a0_0x5c4e32;try{const _0x1619c1=_0x4ec597[_0x93286e(0x14d)][_0x93286e(0x259)]||[];let _0x3e1f83=![];const _0x2ff88b=[];for(const _0x4a2e8e of _0x1619c1){try{const _0x31f00c=await _0x4ec597['getForeignStateAsync'](_0x4a2e8e);if(_0x31f00c&&(_0x31f00c[_0x93286e(0x286)]===!![]||_0x31f00c[_0x93286e(0x286)]===_0x93286e(0x16a)||_0x31f00c[_0x93286e(0x286)]===0x1)){_0x3e1f83=!![];const _0x4f9dc5=await _0x4ec597[_0x93286e(0x2c1)](_0x4a2e8e);let _0x1e6d44=_0x4a2e8e;_0x4f9dc5&&_0x4f9dc5[_0x93286e(0x1e8)]&&_0x4f9dc5[_0x93286e(0x1e8)][_0x93286e(0x18f)]&&(_0x1e6d44=typeof _0x4f9dc5[_0x93286e(0x1e8)]['name']==='object'?_0x4f9dc5[_0x93286e(0x1e8)][_0x93286e(0x18f)]['de']||_0x4f9dc5[_0x93286e(0x1e8)][_0x93286e(0x18f)]['en']:_0x4f9dc5[_0x93286e(0x1e8)][_0x93286e(0x18f)]),_0x2ff88b[_0x93286e(0x1f8)](_0x1e6d44);}}catch(_0x12259b){}}return await _0x4ec597[_0x93286e(0xf8)]('system.presenceWho',{'val':_0x2ff88b[_0x93286e(0x2ad)](',\x20'),'ack':!![]}),_0x3e1f83&&(_0x4ec597[_0x93286e(0x189)]&&(_0x4ec597[_0x93286e(0x20b)]['info']('WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.'),abortExitTimer(_0x4ec597)),!_0x4ec597[_0x93286e(0x156)]&&_0x4ec597[_0x93286e(0x266)]===SYSTEM_MODES[_0x93286e(0x1d6)]&&await setPresence(_0x4ec597,!![])),_0x3e1f83;}catch(_0x522c70){return _0x4ec597[_0x93286e(0x20b)]['error'](_0x93286e(0x1e9)+_0x522c70['message']),![];}}function startExitTimer(_0x369d6c){const _0x5bb501=a0_0x5c4e32;abortExitTimer(_0x369d6c),_0x369d6c[_0x5bb501(0x254)]=!![],_0x369d6c[_0x5bb501(0x2d7)]=setTimeout(()=>{const _0x40ba3c=_0x5bb501;_0x369d6c[_0x40ba3c(0x254)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x369d6c[_0x5bb501(0x189)]=setTimeout(()=>{const _0x5a6733=_0x5bb501;setPresence(_0x369d6c,![]),_0x369d6c[_0x5a6733(0x189)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x4b6271){const _0x2ca704=a0_0x5c4e32;if(_0x4b6271[_0x2ca704(0x189)])clearTimeout(_0x4b6271[_0x2ca704(0x189)]);if(_0x4b6271[_0x2ca704(0x2d7)])clearTimeout(_0x4b6271['exitGraceTimer']);_0x4b6271[_0x2ca704(0x189)]=null,_0x4b6271[_0x2ca704(0x2d7)]=null,_0x4b6271[_0x2ca704(0x254)]=![];}async function setPresence(_0x34eb75,_0x2c39a1){const _0x19cca1=a0_0x5c4e32;if(_0x34eb75['isPresent']===_0x2c39a1)return;_0x34eb75[_0x19cca1(0x156)]=_0x2c39a1,await _0x34eb75[_0x19cca1(0xf8)](_0x19cca1(0x1f9),{'val':_0x2c39a1,'ack':!![]});}async function saveFeedback(_0x38bcc8,_0x26f34d){const _0x15182a=a0_0x5c4e32;_0x38bcc8[_0x15182a(0x20b)][_0x15182a(0x220)](_0x15182a(0xf7)+JSON[_0x15182a(0x22e)](_0x26f34d));}async function runBaselineDriftAnalysis(_0x540bad){const _0x45ff87=a0_0x5c4e32;if(!_0x540bad[_0x45ff87(0x17b)]||!_0x540bad['geminiModel'])return;const _0x399afc=_0x540bad[_0x45ff87(0x14d)]['ltmStbWindowDays']||0xe;if(_0x540bad['dailyDigests'][_0x45ff87(0x1ce)]<_0x399afc+(_0x540bad['config'][_0x45ff87(0x19f)]||0x7)){await _0x540bad[_0x45ff87(0xf8)](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x40fe82=_0x540bad[_0x45ff87(0x168)][_0x45ff87(0x1b2)](-_0x399afc),_0x5ef86a=_0x540bad['dailyDigests']['slice'](0x0,_0x540bad['dailyDigests']['length']-_0x399afc),_0xe5ac87=_0x45ff87(0x1ae)+JSON['stringify'](_0x5ef86a)+'\x0aSTB:\x20'+JSON[_0x45ff87(0x22e)](_0x40fe82);try{const _0x11461f=await _0x540bad['geminiModel']['generateContent'](_0xe5ac87),_0x42ed31=JSON[_0x45ff87(0x276)](_0x11461f[_0x45ff87(0x20a)][_0x45ff87(0x24b)]()[_0x45ff87(0x245)](/```json|```/g,'')[_0x45ff87(0x155)]());_0x42ed31[_0x45ff87(0x195)]&&(await _0x540bad[_0x45ff87(0xf8)](LTM_DP_DRIFT_STATUS,{'val':_0x42ed31[_0x45ff87(0x195)],'ack':!![]}),await _0x540bad['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0x42ed31[_0x45ff87(0x201)],'ack':!![]}),await _0x540bad[_0x45ff87(0xf8)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0x2ba64b){}}function setupLtmScheduler(_0x12f2c9){const _0x33eb8c=a0_0x5c4e32;try{if(_0x12f2c9[_0x33eb8c(0x170)])_0x12f2c9[_0x33eb8c(0x170)][_0x33eb8c(0x22d)]();if(!_0x12f2c9[_0x33eb8c(0x17b)]){_0x12f2c9[_0x33eb8c(0xf8)](LTM_DP_STATUS,{'val':_0x33eb8c(0x133),'ack':!![]});return;}_0x12f2c9[_0x33eb8c(0x170)]=schedule[_0x33eb8c(0x15a)](LTM_SCHEDULE,()=>createDailyDigest(_0x12f2c9));}catch(_0x3cc469){_0x12f2c9[_0x33eb8c(0x20b)]['error'](_0x33eb8c(0x10c)+_0x3cc469[_0x33eb8c(0xfc)]);}}function setupModeResetScheduler(_0x2bc75a){const _0x464471=a0_0x5c4e32;try{if(_0x2bc75a[_0x464471(0x1a1)])_0x2bc75a['modeResetJob'][_0x464471(0x22d)]();_0x2bc75a[_0x464471(0x1a1)]=schedule[_0x464471(0x15a)](MODE_RESET_SCHEDULE,async()=>{const _0x20df30=_0x464471;await loadSystemMode(_0x2bc75a),AUTO_RESET_MODES[_0x20df30(0x145)](_0x2bc75a[_0x20df30(0x266)])&&await _0x2bc75a['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':![]});});}catch(_0x5c2671){_0x2bc75a[_0x464471(0x20b)][_0x464471(0x179)]('Reset\x20Sched\x20Error:\x20'+_0x5c2671[_0x464471(0xfc)]);}}function setupDriftAnalysisScheduler(_0xfc781f){const _0x52a802=a0_0x5c4e32;try{if(_0xfc781f[_0x52a802(0x10f)])clearInterval(_0xfc781f[_0x52a802(0x10f)]);if(!_0xfc781f[_0x52a802(0x17b)])return;_0xfc781f[_0x52a802(0x10f)]=setInterval(()=>runBaselineDriftAnalysis(_0xfc781f),(_0xfc781f[_0x52a802(0x14d)][_0x52a802(0x2cf)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0xfc781f),0x1388);}catch(_0x259480){_0xfc781f['log'][_0x52a802(0x179)]('Drift\x20Sched\x20Error:\x20'+_0x259480[_0x52a802(0xfc)]);}}function setupBriefingScheduler(_0x4d0d4b){const _0x57cfaa=a0_0x5c4e32;try{if(_0x4d0d4b[_0x57cfaa(0x1e0)])_0x4d0d4b[_0x57cfaa(0x1e0)][_0x57cfaa(0x22d)]();if(!_0x4d0d4b[_0x57cfaa(0x14d)]['briefingEnabled'])return;const _0x883d06=(_0x4d0d4b[_0x57cfaa(0x14d)][_0x57cfaa(0x222)]||_0x57cfaa(0x248))[_0x57cfaa(0x24a)](':'),_0x1dfefa=parseInt(_0x883d06[0x0])||0x8,_0x22a290=parseInt(_0x883d06[0x1])||0x0,_0xa2abb8=_0x22a290+'\x20'+_0x1dfefa+'\x20*\x20*\x20*';_0x4d0d4b[_0x57cfaa(0x20b)][_0x57cfaa(0x220)](_0x57cfaa(0x2c6)+_0x1dfefa+':'+(_0x22a290<0xa?'0'+_0x22a290:_0x22a290)),_0x4d0d4b[_0x57cfaa(0x1e0)]=schedule['scheduleJob'](_0xa2abb8,()=>{sendMorningBriefing(_0x4d0d4b);});}catch(_0x53df84){_0x4d0d4b[_0x57cfaa(0x20b)]['error'](_0x57cfaa(0x271)+_0x53df84['message']);}}async function sendNotification(_0x5ed202,_0x1fea31,_0x39dc4f=![],_0x332f13=![]){const _0x2db3a1=a0_0x5c4e32;_0x5ed202[_0x2db3a1(0x20b)][_0x2db3a1(0x220)]((_0x39dc4f?_0x2db3a1(0x230):'')+_0x2db3a1(0x16d)+_0x1fea31+'\x22');const _0x205c3a=_0x5ed202['config'];let _0x197303=0x0;if(_0x205c3a[_0x2db3a1(0x1ef)]){let _0x5d21d6={};(_0x1fea31[_0x2db3a1(0x145)]('Alarm')||_0x332f13)&&(_0x5d21d6={'reply_markup':{'inline_keyboard':[[{'text':'âœ…\x20Alles\x20OK\x20(Reset)','callback_data':_0x2db3a1(0xff)}],[{'text':_0x2db3a1(0x1c7),'callback_data':'COGNI_REQUEST_CALL'}]]}}),await _0x5ed202[_0x2db3a1(0x1aa)](_0x205c3a[_0x2db3a1(0x17c)],_0x2db3a1(0x18e),{'text':_0x1fea31,'user':_0x205c3a[_0x2db3a1(0x1c3)],..._0x5d21d6}),_0x197303++;}if(_0x205c3a['notifyPushoverEnabled']){let _0x2c6d58={'message':_0x1fea31,'title':_0x332f13?_0x2db3a1(0x1b9):'Cogni-Living','priority':_0x332f13?0x2:0x1,'device':_0x205c3a['notifyPushoverRecipient']};_0x332f13&&(_0x2c6d58[_0x2db3a1(0x25c)]=0x1e,_0x2c6d58[_0x2db3a1(0x1d1)]=0xe10,_0x2c6d58['sound']=_0x2db3a1(0x202)),await _0x5ed202[_0x2db3a1(0x1aa)](_0x205c3a[_0x2db3a1(0x12b)],_0x2db3a1(0x18e),_0x2c6d58),_0x197303++;}return _0x205c3a[_0x2db3a1(0x1dd)]&&(await _0x5ed202['sendToAsync'](_0x205c3a['notifyEmailInstance'],'send',{'text':_0x1fea31,'to':_0x205c3a[_0x2db3a1(0x118)]}),_0x197303++),_0x197303;}async function setupTelegramListener(_0x26beab){const _0x3b6397=a0_0x5c4e32,_0x1ec266=_0x26beab[_0x3b6397(0x14d)][_0x3b6397(0x17c)];_0x26beab[_0x3b6397(0x14d)][_0x3b6397(0x1ef)]&&_0x1ec266&&(_0x26beab['log'][_0x3b6397(0x220)]('ðŸ“¡\x20Hooking\x20into\x20'+_0x1ec266+'\x20for\x20interactive\x20buttons...'),await _0x26beab['subscribeForeignStatesAsync'](_0x1ec266+_0x3b6397(0x16c)));}async function handleTelegramResponse(_0x33a913,_0x2594f4){const _0x3c530d=a0_0x5c4e32;let _0xd1c823=_0x2594f4;_0x2594f4[_0x3c530d(0x158)]('[')&&(_0xd1c823=_0x2594f4[_0x3c530d(0x1e7)](_0x2594f4[_0x3c530d(0xe1)](']')+0x1));if(_0xd1c823===_0x3c530d(0xff))_0x33a913['log'][_0x3c530d(0x220)](_0x3c530d(0x132)),await _0x33a913['setStateAsync'](_0x3c530d(0x14a),{'val':![],'ack':!![]}),await _0x33a913[_0x3c530d(0xf8)](_0x3c530d(0x269),{'val':_0x3c530d(0xfe),'ack':!![]}),_0x33a913['lastAlertState']=![],sendNotification(_0x33a913,_0x3c530d(0x148),![]);else _0xd1c823==='COGNI_REQUEST_CALL'&&(_0x33a913[_0x3c530d(0x20b)][_0x3c530d(0x2bb)](_0x3c530d(0x2bc)),sendNotification(_0x33a913,_0x3c530d(0x12e),![],!![]));}async function runAutopilot(_0x5c22a0){const _0x4b865=a0_0x5c4e32,_0x5844f3=_0x5c22a0[_0x4b865(0x14d)][_0x4b865(0xfb)],_0x4ccf3c=_0x5c22a0[_0x4b865(0x281)]['length']>0x0?_0x5c22a0[_0x4b865(0x281)][0x0][_0x4b865(0x19c)]:Date['now'](),_0x4ec764=(Date['now']()-_0x4ccf3c)/(0x3e8*0x3c*0x3c);let _0xcabc3a='';_0x5c22a0[_0x4b865(0x14d)]['inactivityMonitoringEnabled']&&_0x5c22a0['currentSystemMode']===SYSTEM_MODES[_0x4b865(0x1d6)]&&_0x5c22a0['isPresent']&&(_0x4ec764>_0x5844f3&&(_0xcabc3a='HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20'+_0x4ec764[_0x4b865(0x1f7)](0x1)+_0x4b865(0x2b8))),runGeminiAnalysis(_0x5c22a0,_0xcabc3a)['catch'](_0xbed850=>_0x5c22a0[_0x4b865(0x20b)][_0x4b865(0x179)](_0xbed850));}async function createDailyDigest(_0x4d45c2){const _0x3c0fbe=a0_0x5c4e32;if(!_0x4d45c2[_0x3c0fbe(0x17b)])return;await _0x4d45c2['setStateAsync'](LTM_DP_STATUS,{'val':_0x3c0fbe(0x289)+new Date()[_0x3c0fbe(0x1fd)](),'ack':!![]});if(!_0x4d45c2['geminiModel']||_0x4d45c2[_0x3c0fbe(0x1db)][_0x3c0fbe(0x1ce)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x4d45c2[_0x3c0fbe(0xf8)](LTM_DP_STATUS,{'val':_0x3c0fbe(0x29d),'ack':!![]});return;}const _0x4761f6=JSON['parse'](JSON[_0x3c0fbe(0x22e)](_0x4d45c2[_0x3c0fbe(0x1db)])),_0x3bde6b=_0x4761f6[_0x3c0fbe(0x1ce)],_0xcfac62=_0x3c0fbe(0x221)+JSON[_0x3c0fbe(0x22e)](_0x4761f6);try{const _0x6c2188=await _0x4d45c2[_0x3c0fbe(0x299)][_0x3c0fbe(0x1ed)](_0xcfac62),_0x197f74=JSON['parse'](_0x6c2188['response'][_0x3c0fbe(0x24b)]()[_0x3c0fbe(0x245)](/```json|```/g,'')[_0x3c0fbe(0x155)]());_0x197f74[_0x3c0fbe(0xe0)]&&(_0x4d45c2[_0x3c0fbe(0x168)]['push']({'timestamp':new Date()[_0x3c0fbe(0x120)](),'eventCount':_0x3bde6b,'summary':_0x197f74[_0x3c0fbe(0xe0)],'activityLevel':_0x197f74[_0x3c0fbe(0x278)],'systemMode':_0x4d45c2[_0x3c0fbe(0x266)]}),await saveDailyDigests(_0x4d45c2),_0x4d45c2[_0x3c0fbe(0x1db)]=[],await saveRawEventLog(_0x4d45c2),await _0x4d45c2[_0x3c0fbe(0xf8)](LTM_DP_STATUS,{'val':_0x3c0fbe(0x19a)+_0x3bde6b+_0x3c0fbe(0x1b7),'ack':!![]}),runPythonHealthCheck(_0x4d45c2));}catch(_0x438628){await _0x4d45c2[_0x3c0fbe(0xf8)](LTM_DP_STATUS,{'val':_0x3c0fbe(0x295)+_0x438628[_0x3c0fbe(0xfc)],'ack':!![]});}}async function sendMorningBriefing(_0x35f0a9){const _0x4c1f53=a0_0x5c4e32;if(!_0x35f0a9[_0x4c1f53(0x299)])return;_0x35f0a9[_0x4c1f53(0x20b)]['info']('Generating\x20Morning\x20Briefing...');const _0x139de4=_0x35f0a9[_0x4c1f53(0x168)][_0x4c1f53(0x1ce)]>0x0?_0x35f0a9[_0x4c1f53(0x168)][_0x35f0a9[_0x4c1f53(0x168)][_0x4c1f53(0x1ce)]-0x1]:null,_0x534572=_0x139de4&&_0x139de4[_0x4c1f53(0x1a9)]?_0x139de4[_0x4c1f53(0x1a9)][_0x4c1f53(0x159)]:_0x4c1f53(0x27c),_0x1b6f76=new Date();_0x1b6f76[_0x4c1f53(0x1b8)](0x4,0x0,0x0,0x0);const _0x299e73=_0x35f0a9[_0x4c1f53(0x281)]['filter'](_0x27a308=>new Date(_0x27a308[_0x4c1f53(0x19c)])>_0x1b6f76),_0x579e6e=PERSONA_MAPPING[_0x35f0a9[_0x4c1f53(0x14d)][_0x4c1f53(0x108)]||_0x4c1f53(0x2d4)],_0x40be4b=_0x35f0a9['config'][_0x4c1f53(0x249)]||'',_0x8ab811=await getWeatherContext(_0x35f0a9),_0x148f6a=await getCalendarContext(_0x35f0a9),_0x56e411=_0x4c1f53(0x14b)+_0x579e6e+_0x4c1f53(0x176)+_0x40be4b+'.\x20ZUSATZ:\x20'+_0x8ab811+'\x20'+_0x148f6a+'.\x20DATEN:\x20Schlaf\x20'+_0x534572+_0x4c1f53(0x283)+JSON[_0x4c1f53(0x22e)](_0x299e73[_0x4c1f53(0x1b2)](0x0,0xa))+_0x4c1f53(0x112);try{const _0x2df526=await _0x35f0a9['geminiModel'][_0x4c1f53(0x1ed)](_0x56e411),_0x498d68=_0x4c1f53(0xfa)+_0x2df526['response'][_0x4c1f53(0x24b)]()[_0x4c1f53(0x155)]();sendNotification(_0x35f0a9,_0x498d68),_0x35f0a9[_0x4c1f53(0x20b)][_0x4c1f53(0x220)](_0x4c1f53(0x296));}catch(_0x4c57ce){_0x35f0a9[_0x4c1f53(0x20b)][_0x4c1f53(0x179)](_0x4c1f53(0x238)+_0x4c57ce[_0x4c1f53(0xfc)]);}}async function scanForDevices(_0x2a6a75,_0x5331df){const _0x4ed0fd=a0_0x5c4e32;_0x2a6a75[_0x4ed0fd(0x20b)][_0x4ed0fd(0x220)]('Scanning\x20for\x20devices\x20(V8:\x20Whitelist\x20Priority)...');const _0x116a96=[],_0x4933bc=await _0x2a6a75[_0x4ed0fd(0x175)]('*'),_0x28a603=await _0x2a6a75[_0x4ed0fd(0x175)]('enum.functions.*',_0x4ed0fd(0x214)),_0x3fc6c5=await _0x2a6a75['getForeignObjectsAsync']('enum.rooms.*',_0x4ed0fd(0x214)),_0x44f45e={};if(_0x28a603)for(const _0x533921 in _0x28a603){const _0xf3d8d=_0x28a603[_0x533921][_0x4ed0fd(0x1e8)][_0x4ed0fd(0x11a)]||[];_0xf3d8d[_0x4ed0fd(0x20d)](_0x4e8d55=>{const _0x191df6=_0x4ed0fd;if(!_0x44f45e[_0x4e8d55])_0x44f45e[_0x4e8d55]=[];_0x44f45e[_0x4e8d55][_0x191df6(0x1f8)](_0x533921);});}const _0x2bd0b3={};if(_0x3fc6c5)for(const _0x18f103 in _0x3fc6c5){const _0x29d31d=_0x3fc6c5[_0x18f103]['common'][_0x4ed0fd(0x11a)]||[],_0x20ca09=typeof _0x3fc6c5[_0x18f103][_0x4ed0fd(0x1e8)]['name']===_0x4ed0fd(0x18a)?_0x3fc6c5[_0x18f103]['common']['name']['de']:_0x3fc6c5[_0x18f103]['common']['name'];_0x29d31d[_0x4ed0fd(0x20d)](_0x3d5687=>_0x2bd0b3[_0x3d5687]=_0x20ca09);}const _0x35ad79=_0x5331df[_0x4ed0fd(0x258)]||[],_0x41c21e=_0x5331df[_0x4ed0fd(0x1da)]!==![],_0x117cb6=_0x5331df[_0x4ed0fd(0x23e)]!==![],_0x1107eb=_0x5331df[_0x4ed0fd(0x135)]!==![],_0x41c158=_0x5331df[_0x4ed0fd(0x2d2)]===!![],_0x290464=_0x5331df['weather']===!![];for(const _0x29011e in _0x4933bc){const _0x18eaaa=_0x4933bc[_0x29011e];if(_0x18eaaa[_0x4ed0fd(0x24c)]!==_0x4ed0fd(0x1e6)||!_0x18eaaa[_0x4ed0fd(0x1e8)])continue;if(ADAPTER_BLACKLIST[_0x4ed0fd(0x1bb)](_0x12e0fb=>_0x29011e[_0x4ed0fd(0x158)](_0x12e0fb))&&!_0x290464)continue;const _0x28bb45=(_0x18eaaa[_0x4ed0fd(0x1e8)][_0x4ed0fd(0x178)]||'')[_0x4ed0fd(0xe8)]();let _0x9299ee=(typeof _0x18eaaa['common'][_0x4ed0fd(0x18f)]==='object'?_0x18eaaa['common'][_0x4ed0fd(0x18f)]['de']:_0x18eaaa[_0x4ed0fd(0x1e8)][_0x4ed0fd(0x18f)])||_0x29011e;const _0x38adab=_0x9299ee[_0x4ed0fd(0xe8)]();let _0x306637=![],_0x426bb0=![];if(_0x35ad79[_0x4ed0fd(0x1ce)]>0x0){const _0x5456b3=_0x44f45e[_0x29011e]||[],_0x418a4d=_0x29011e[_0x4ed0fd(0x24a)]('.')[_0x4ed0fd(0x1b2)](0x0,-0x1)[_0x4ed0fd(0x2ad)]('.'),_0x49c52f=_0x44f45e[_0x418a4d]||[];(_0x5456b3['some'](_0x12d625=>_0x35ad79['includes'](_0x12d625))||_0x49c52f[_0x4ed0fd(0x1bb)](_0x1e2f14=>_0x35ad79['includes'](_0x1e2f14)))&&(_0x306637=!![],_0x426bb0=!![]);}if(!_0x306637&&!_0x290464){if(HARD_IGNORE_TERMS['some'](_0x9b9faf=>_0x29011e[_0x4ed0fd(0x145)](_0x9b9faf)||_0x38adab[_0x4ed0fd(0x145)](_0x9b9faf['toLowerCase']())))continue;}if(BAD_NAMES[_0x4ed0fd(0x1bb)](_0x5a113c=>_0x38adab===_0x5a113c||_0x38adab[_0x4ed0fd(0x29b)]('.'+_0x5a113c))){const _0x2dec78=_0x29011e[_0x4ed0fd(0x24a)]('.');if(_0x2dec78['length']>0x2){const _0x1fbc99=_0x2dec78[_0x4ed0fd(0x1b2)](0x0,-0x1)[_0x4ed0fd(0x2ad)]('.'),_0x56ec69=_0x4933bc[_0x1fbc99];if(_0x56ec69&&_0x56ec69[_0x4ed0fd(0x1e8)]&&_0x56ec69[_0x4ed0fd(0x1e8)][_0x4ed0fd(0x18f)]){const _0x25cf0c=typeof _0x56ec69[_0x4ed0fd(0x1e8)][_0x4ed0fd(0x18f)]===_0x4ed0fd(0x18a)?_0x56ec69[_0x4ed0fd(0x1e8)][_0x4ed0fd(0x18f)]['de']:_0x56ec69[_0x4ed0fd(0x1e8)][_0x4ed0fd(0x18f)];_0x25cf0c&&!_0x9299ee[_0x4ed0fd(0x145)](_0x25cf0c)&&(_0x9299ee=_0x25cf0c+'\x20'+_0x9299ee);}}}let _0x446d66='';if(_0x41c21e&&(_0x28bb45[_0x4ed0fd(0x145)](_0x4ed0fd(0x1da))||_0x28bb45['includes']('occupancy')||_0x38adab[_0x4ed0fd(0x145)](_0x4ed0fd(0x265))||_0x38adab[_0x4ed0fd(0x145)](_0x4ed0fd(0x27e))))_0x446d66=_0x4ed0fd(0x1da);else{if(!_0x446d66&&_0x117cb6&&(_0x28bb45['includes']('door')||_0x28bb45[_0x4ed0fd(0x145)](_0x4ed0fd(0x260))||_0x28bb45[_0x4ed0fd(0x145)](_0x4ed0fd(0x20f))||_0x28bb45[_0x4ed0fd(0x145)](_0x4ed0fd(0x284))||_0x28bb45[_0x4ed0fd(0x145)](_0x4ed0fd(0x29e))||_0x38adab[_0x4ed0fd(0x145)](_0x4ed0fd(0x2b4))||_0x38adab['includes'](_0x4ed0fd(0x163))||_0x38adab[_0x4ed0fd(0x145)](_0x4ed0fd(0x26e))))_0x446d66=_0x4ed0fd(0x1b3);else{if(!_0x446d66&&_0x1107eb&&(_0x28bb45['includes'](_0x4ed0fd(0x21d))||_0x28bb45['includes'](_0x4ed0fd(0x28b))||_0x28bb45[_0x4ed0fd(0x145)]('dimmer')||_0x38adab['includes'](_0x4ed0fd(0x180))||_0x38adab[_0x4ed0fd(0x145)](_0x4ed0fd(0x143))||_0x38adab[_0x4ed0fd(0x145)](_0x4ed0fd(0x297)))){if(_0x18eaaa[_0x4ed0fd(0x1e8)][_0x4ed0fd(0x123)]||_0x28bb45['includes'](_0x4ed0fd(0x131)))_0x446d66=_0x4ed0fd(0x21d);}else{if(!_0x446d66&&_0x41c158&&(_0x28bb45[_0x4ed0fd(0x145)]('temperature')||_0x28bb45[_0x4ed0fd(0x145)](_0x4ed0fd(0x147))||_0x28bb45['includes'](_0x4ed0fd(0x1a6))||_0x38adab[_0x4ed0fd(0x145)](_0x4ed0fd(0x229))||_0x38adab[_0x4ed0fd(0x145)](_0x4ed0fd(0x1ff))||_0x38adab['includes'](_0x4ed0fd(0x137))))_0x446d66=_0x4ed0fd(0x2d2);else{if(!_0x446d66&&_0x426bb0)_0x446d66='custom';}}}}if(_0x446d66){let _0x2f75a3=_0x2bd0b3[_0x29011e]||'';if(!_0x2f75a3){let _0x34ffac=_0x29011e;for(let _0x392266=0x0;_0x392266<0x3;_0x392266++){const _0x3cb2fa=_0x34ffac[_0x4ed0fd(0x1c0)]('.');if(_0x3cb2fa===-0x1)break;_0x34ffac=_0x34ffac['substring'](0x0,_0x3cb2fa);if(_0x2bd0b3[_0x34ffac]){_0x2f75a3=_0x2bd0b3[_0x34ffac];break;}}}_0x116a96['push']({'id':_0x29011e,'name':_0x9299ee,'location':_0x2f75a3,'type':_0x446d66,'logDuplicates':_0x446d66===_0x4ed0fd(0x1da),'isExit':![],'_score':_0x2f75a3?0x50:_0x446d66==='custom'?0x5a:0x28});}}return _0x116a96[_0x4ed0fd(0x2a5)]((_0x2f2db3,_0x55f0fd)=>_0x55f0fd[_0x4ed0fd(0xe6)]-_0x2f2db3[_0x4ed0fd(0xe6)]),_0x116a96;}async function executeAutomationAction(_0xd8bbca){const _0x4a05db=a0_0x5c4e32;try{const _0x53d822=await _0xd8bbca['getStateAsync'](_0x4a05db(0x247)),_0x240778=await _0xd8bbca[_0x4a05db(0x18c)](_0x4a05db(0xed));if(_0x53d822&&_0x53d822[_0x4a05db(0x286)]&&_0x240778){const _0x221099=_0x53d822['val'];let _0x75e46=_0x240778[_0x4a05db(0x286)];try{_0x75e46=JSON[_0x4a05db(0x276)](_0x75e46);}catch(_0x3c3b3d){}_0xd8bbca[_0x4a05db(0x20b)]['info'](_0x4a05db(0x1f6)+_0x221099+'\x20=\x20'+_0x75e46),await _0xd8bbca['setForeignStateAsync'](_0x221099,_0x75e46);}else _0xd8bbca[_0x4a05db(0x20b)][_0x4a05db(0x2bb)]('ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x3f3db5){_0xd8bbca[_0x4a05db(0x20b)][_0x4a05db(0x179)](_0x4a05db(0x27f)+_0x3f3db5['message']);}}function tryParse(_0x4b3980){try{return JSON['parse'](_0x4b3980);}catch(_0x5d12b3){return null;}}async function recordSequence(_0x4e3428,_0x201054){const _0x46311d=a0_0x5c4e32,_0x18e279=(_0x201054[_0x46311d(0x24c)]||'')['toLowerCase'](),_0x3d2c82=[_0x46311d(0x1da),_0x46311d(0x265),_0x46311d(0x27e),_0x46311d(0x1b4),_0x46311d(0x18b),'door',_0x46311d(0x163),_0x46311d(0x260),'fenster',_0x46311d(0x2a6),_0x46311d(0x2bd),_0x46311d(0x21d),_0x46311d(0x180),_0x46311d(0x28b),_0x46311d(0x297),_0x46311d(0x277),_0x46311d(0x143)];if(!_0x3d2c82['some'](_0x4fca2b=>_0x18e279['includes'](_0x4fca2b))){_0x4e3428[_0x46311d(0x20b)][_0x46311d(0x186)]('[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20'+_0x201054['id']+_0x46311d(0x191)+_0x201054[_0x46311d(0x24c)]+_0x46311d(0x250));return;}if(!_0x201054['value']){_0x4e3428[_0x46311d(0x20b)][_0x46311d(0x186)](_0x46311d(0x17d)+_0x201054['id']+_0x46311d(0x244)+_0x201054[_0x46311d(0x1a5)]+')');return;}_0x4e3428[_0x46311d(0x20b)][_0x46311d(0x186)](_0x46311d(0x219)+_0x201054['id']+'\x20('+_0x201054[_0x46311d(0x1c8)]+')');if(sequenceTimer)clearTimeout(sequenceTimer);const _0x27b3d0={'loc':_0x201054['location']||_0x46311d(0x14e),'id':_0x201054['id'],'ts':Date[_0x46311d(0x293)]()};activeSequence[_0x46311d(0x1f8)](_0x27b3d0),_0x4e3428[_0x46311d(0x20b)][_0x46311d(0x186)](_0x46311d(0x198)+_0x27b3d0[_0x46311d(0x2d3)]+'\x20(Length:\x20'+activeSequence[_0x46311d(0x1ce)]+')'),sequenceTimer=setTimeout(async()=>{const _0x152fb2=_0x46311d;activeSequence[_0x152fb2(0x1ce)]>0x1?await saveCompletedSequence(_0x4e3428):(_0x4e3428[_0x152fb2(0x20b)]['debug'](_0x152fb2(0x1fb)+activeSequence['length']+')'),activeSequence=[]);},SEQUENCE_TIMEOUT_MS);}function a0_0x23cb(_0x1b9f73,_0x11b46e){const _0x30dcb2=a0_0x3342();return a0_0x23cb=function(_0x242f72,_0x3bdd38){_0x242f72=_0x242f72-0xe0;let _0x3342dc=_0x30dcb2[_0x242f72];return _0x3342dc;},a0_0x23cb(_0x1b9f73,_0x11b46e);}async function saveCompletedSequence(_0x369e22){const _0x5f2cb3=a0_0x5c4e32;try{_0x369e22[_0x5f2cb3(0x20b)][_0x5f2cb3(0x220)](_0x5f2cb3(0x2ce)+activeSequence[_0x5f2cb3(0x1ce)]+_0x5f2cb3(0x257));const _0x445d96=await _0x369e22[_0x5f2cb3(0x18c)](_0x5f2cb3(0x216));let _0x3959b5=[];if(_0x445d96&&_0x445d96[_0x5f2cb3(0x286)])try{_0x3959b5=JSON[_0x5f2cb3(0x276)](_0x445d96[_0x5f2cb3(0x286)]);}catch(_0x265b6a){}const _0x1eea15=activeSequence[0x0]['ts'],_0x1ea511=activeSequence[_0x5f2cb3(0x12f)](_0xd66e85=>({'loc':_0xd66e85['loc'],'t_delta':Math[_0x5f2cb3(0x236)]((_0xd66e85['ts']-_0x1eea15)/0x3e8)})),_0x211a2c={'timestamp':new Date(_0x1eea15)[_0x5f2cb3(0x120)](),'steps':_0x1ea511,'duration':Math[_0x5f2cb3(0x236)]((activeSequence[activeSequence[_0x5f2cb3(0x1ce)]-0x1]['ts']-_0x1eea15)/0x3e8),'daytime':new Date(_0x1eea15)[_0x5f2cb3(0x2b5)]()};_0x3959b5['push'](_0x211a2c),_0x3959b5[_0x5f2cb3(0x1ce)]>MAX_TRAINING_SET_SIZE&&_0x3959b5[_0x5f2cb3(0x290)](),await _0x369e22[_0x5f2cb3(0xf8)](_0x5f2cb3(0x216),{'val':JSON['stringify'](_0x3959b5),'ack':!![]}),activeSequence=[],sequenceTimer=null;}catch(_0x50ffaa){_0x369e22[_0x5f2cb3(0x20b)][_0x5f2cb3(0x179)](_0x5f2cb3(0x151)+_0x50ffaa[_0x5f2cb3(0xfc)]);}}async function getOutsideTemperatureNumeric(_0xb6b63f){const _0x2109b9=a0_0x5c4e32;if(_0xb6b63f[_0x2109b9(0x14d)][_0x2109b9(0x157)])try{const _0x43a48c=await _0xb6b63f[_0x2109b9(0x28e)](_0xb6b63f[_0x2109b9(0x14d)][_0x2109b9(0x157)]);if(_0x43a48c&&_0x43a48c[_0x2109b9(0x286)]!==undefined&&_0x43a48c[_0x2109b9(0x286)]!==null){const _0x3770a8=parseFloat(_0x43a48c[_0x2109b9(0x286)]);if(!isNaN(_0x3770a8))return _0x3770a8;}}catch(_0x44f440){_0xb6b63f[_0x2109b9(0x20b)][_0x2109b9(0x2bb)]('Error\x20reading\x20outdoor\x20sensor\x20'+_0xb6b63f[_0x2109b9(0x14d)]['outdoorSensorId']+':\x20'+_0x44f440[_0x2109b9(0xfc)]);}const _0x5e82d5=_0xb6b63f[_0x2109b9(0x14d)][_0x2109b9(0x2b2)];if(!_0xb6b63f[_0x2109b9(0x14d)][_0x2109b9(0x22b)]||!_0x5e82d5)return null;try{let _0x6cbc4e='';if(_0x5e82d5[_0x2109b9(0x145)]('accuweather'))_0x6cbc4e=_0x5e82d5+_0x2109b9(0x253);else{if(_0x5e82d5[_0x2109b9(0x145)](_0x2109b9(0x2a3)))_0x6cbc4e=_0x5e82d5+_0x2109b9(0x206);else{if(_0x5e82d5[_0x2109b9(0x145)]('openweathermap'))_0x6cbc4e=_0x5e82d5+_0x2109b9(0x204);else{if(_0x5e82d5[_0x2109b9(0x145)](_0x2109b9(0xe7)))_0x6cbc4e=_0x5e82d5+_0x2109b9(0x181);}}}if(_0x6cbc4e){const _0x40b734=await _0xb6b63f[_0x2109b9(0x28e)](_0x6cbc4e);if(_0x40b734&&_0x40b734[_0x2109b9(0x286)]!==undefined&&_0x40b734[_0x2109b9(0x286)]!==null)return parseFloat(_0x40b734[_0x2109b9(0x286)]);}}catch(_0x3e105a){}return null;}async function recordThermodynamics(_0x5bbee0,_0xe8efc0,_0x4bbd3e,_0x2848d2){const _0x1674a2=a0_0x5c4e32,_0x4f80a9=await getOutsideTemperatureNumeric(_0x5bbee0),_0x58433f=await _0x5bbee0[_0x1674a2(0x18c)](_0x1674a2(0x2d0));let _0x4c2306=[];if(_0x58433f&&_0x58433f[_0x1674a2(0x286)])try{_0x4c2306=JSON['parse'](_0x58433f[_0x1674a2(0x286)]);}catch(_0x5e6a57){}_0x4c2306[_0x1674a2(0x1f8)]({'ts':Date[_0x1674a2(0x293)](),'room':_0x2848d2||'Unknown','t_in':_0x4bbd3e,'t_out':_0x4f80a9});if(_0x4c2306[_0x1674a2(0x1ce)]>THERMO_LOG_SIZE)_0x4c2306['shift']();await _0x5bbee0['setStateAsync'](_0x1674a2(0x2d0),{'val':JSON[_0x1674a2(0x22e)](_0x4c2306),'ack':!![]});}function installPythonDependencies(_0xd31948){const _0x463808=a0_0x5c4e32;if(_0xd31948[_0x463808(0xec)])return;_0xd31948[_0x463808(0xec)]=!![];const _0x1b48b1=path[_0x463808(0x2ad)](__dirname,_0x463808(0x136),'requirements.txt');_0xd31948[_0x463808(0x20b)][_0x463808(0x220)](_0x463808(0x1d7)+_0x1b48b1+_0x463808(0x263)),stopPythonService(_0xd31948);const _0x521de0=_0x463808(0x29a)+_0x1b48b1+_0x463808(0x2d9);exec(_0x521de0,(_0x23a911,_0x315a9a,_0x5392cd)=>{const _0x1ace4a=_0x463808,_0x47f904=_0x5392cd&&_0x5392cd[_0x1ace4a(0x145)](_0x1ace4a(0x169))||_0x23a911&&_0x23a911['message'][_0x1ace4a(0x145)](_0x1ace4a(0x169));if(_0x47f904){_0xd31948[_0x1ace4a(0x20b)][_0x1ace4a(0x2bb)]('âš ï¸\x20PIP\x20is\x20missing.\x20Attempting\x20self-healing\x20via\x20ensurepip\x20(User\x20Mode)...'),exec(_0x1ace4a(0x149),(_0x20b613,_0x42c188,_0x7ba67a)=>{const _0x56ee5f=_0x1ace4a;_0x20b613?(_0xd31948['log'][_0x56ee5f(0x179)]('âŒ\x20CRITICAL:\x20Self-healing\x20failed.\x20The\x20system\x20is\x20locked\x20down.'),_0xd31948[_0x56ee5f(0x20b)][_0x56ee5f(0x179)](_0x56ee5f(0x21c)),_0xd31948['dependencyInstallInProgress']=![]):(_0xd31948[_0x56ee5f(0x20b)]['info'](_0x56ee5f(0x267)),exec('python3\x20-m\x20pip\x20install\x20-r\x20\x22'+_0x1b48b1+_0x56ee5f(0x1e3),(_0x51050a,_0x5ab311,_0x292027)=>{const _0x119d00=_0x56ee5f;_0x51050a?_0xd31948['log'][_0x119d00(0x179)](_0x119d00(0x228)+_0x51050a[_0x119d00(0xfc)]):(_0xd31948[_0x119d00(0x20b)]['info'](_0x119d00(0x105)),startPythonService(_0xd31948)),_0xd31948['dependencyInstallInProgress']=![];}));});return;}_0xd31948['dependencyInstallInProgress']=![],_0x23a911?(_0xd31948[_0x1ace4a(0x20b)]['error'](_0x1ace4a(0x111)),_0xd31948[_0x1ace4a(0x20b)][_0x1ace4a(0x179)](_0x1ace4a(0x1cf)+(_0x5392cd||_0x23a911[_0x1ace4a(0xfc)]))):(_0xd31948[_0x1ace4a(0x20b)][_0x1ace4a(0x220)](_0x1ace4a(0x1bf)),startPythonService(_0xd31948));});}function sendToPython(_0x1ff6aa,_0x516c1c,_0xfb284={}){const _0x36993d=a0_0x5c4e32;if(!_0x1ff6aa['pythonProcess']||!_0x1ff6aa[_0x36993d(0x10d)]['stdin'][_0x36993d(0x273)])return;const _0x1c5c35=JSON[_0x36993d(0x22e)]({'command':_0x516c1c,..._0xfb284});try{_0x1ff6aa[_0x36993d(0x10d)][_0x36993d(0x1a3)]['write'](_0x1c5c35+'\x0a');}catch(_0x325506){_0x1ff6aa[_0x36993d(0x20b)][_0x36993d(0x179)](_0x36993d(0xe9)+_0x325506[_0x36993d(0xfc)]);}}function runPythonHealthCheck(_0x3f2393){const _0x1ff0fc=a0_0x5c4e32;if(!_0x3f2393[_0x1ff0fc(0x168)]||_0x3f2393[_0x1ff0fc(0x168)][_0x1ff0fc(0x1ce)]<0x2){_0x3f2393[_0x1ff0fc(0x20b)][_0x1ff0fc(0x220)](_0x1ff0fc(0x282));return;}const _0x227ed3=_0x3f2393[_0x1ff0fc(0x168)][_0x1ff0fc(0x12f)](_0x25fc74=>{const _0x29ddc3=_0x1ff0fc,_0x5bca8a=(_0x25fc74['activityLevel']||'')[_0x29ddc3(0xe8)]();return ACTIVITY_LEVEL_MAP[_0x5bca8a]||0x32;});_0x3f2393[_0x1ff0fc(0x20b)][_0x1ff0fc(0x220)]('Guardian:\x20Sending\x20'+_0x227ed3['length']+_0x1ff0fc(0x187)),sendToPython(_0x3f2393,_0x1ff0fc(0x225),{'values':_0x227ed3,'tag':_0x1ff0fc(0x210)});}function handlePythonResult(_0x253100,_0x5a85b0){const _0x437e24=a0_0x5c4e32;if(_0x5a85b0['type']===_0x437e24(0x24f))_0x253100[_0x437e24(0x20b)][_0x437e24(0x186)](_0x437e24(0x1ee));else{if(_0x5a85b0[_0x437e24(0x24c)]===_0x437e24(0x242)){const {tag:_0x1537f0,diagnosis:_0x58cd57,change_percent:_0x167241}=_0x5a85b0['payload'];_0x253100[_0x437e24(0x20b)][_0x437e24(0x220)](_0x437e24(0x2d8)+_0x1537f0+'):\x20'+_0x58cd57+'\x20('+_0x167241+'%)'),_0x253100['setStateAsync'](_0x437e24(0x22c),{'val':_0x58cd57,'ack':!![]}),_0x253100[_0x437e24(0xf8)](_0x437e24(0x2d6),{'val':_0x167241,'ack':!![]});}}}function startPythonService(_0x11e894){const _0x54beb0=a0_0x5c4e32;try{const _0xda71c8=path[_0x54beb0(0x2ad)](__dirname,'python_service',_0x54beb0(0x1b1));_0x11e894[_0x54beb0(0x20b)][_0x54beb0(0x220)](_0x54beb0(0x26f)+_0xda71c8),_0x11e894[_0x54beb0(0x10d)]=spawn(_0x54beb0(0xf0),[_0xda71c8]),_0x11e894['pythonProcess']['stdout']['on']('data',_0x107028=>{const _0x5ca2cc=_0x54beb0,_0x288d7e=_0x107028['toString']()['split']('\x0a');_0x288d7e[_0x5ca2cc(0x20d)](_0x166f49=>{const _0x3d6d23=_0x5ca2cc,_0x13599f=_0x166f49['trim']();if(!_0x13599f)return;if(_0x13599f['startsWith'](_0x3d6d23(0x162)))_0x11e894[_0x3d6d23(0x20b)][_0x3d6d23(0x186)](_0x3d6d23(0x1d5)+_0x13599f[_0x3d6d23(0x1e7)](0x5)[_0x3d6d23(0x155)]());else{if(_0x13599f['startsWith'](_0x3d6d23(0x121)))try{const _0x28dd93=JSON[_0x3d6d23(0x276)](_0x13599f[_0x3d6d23(0x1e7)](0x8)[_0x3d6d23(0x155)]());handlePythonResult(_0x11e894,_0x28dd93);}catch(_0x329b12){_0x11e894[_0x3d6d23(0x20b)]['warn'](_0x3d6d23(0x126)+_0x13599f);}}(_0x13599f['includes'](_0x3d6d23(0x2be))||_0x13599f[_0x3d6d23(0x145)](_0x3d6d23(0x1bc))||_0x13599f[_0x3d6d23(0x145)](_0x3d6d23(0x13d)))&&(_0x11e894[_0x3d6d23(0x20b)][_0x3d6d23(0x2bb)](_0x3d6d23(0x171)),installPythonDependencies(_0x11e894));});}),_0x11e894[_0x54beb0(0x10d)][_0x54beb0(0x1c9)]['on'](_0x54beb0(0x1d8),_0x2b4733=>{const _0x28ce4d=_0x54beb0,_0x57c36d=_0x2b4733[_0x28ce4d(0x166)]()[_0x28ce4d(0x155)]();_0x11e894['log'][_0x28ce4d(0x179)]('[PYTHON\x20ERR]\x20'+_0x57c36d);}),_0x11e894['pythonProcess']['on'](_0x54beb0(0x196),_0x3f97a1=>{const _0x416084=_0x54beb0;_0x11e894[_0x416084(0x20b)][_0x416084(0x220)](_0x416084(0x1fc)+_0x3f97a1),_0x11e894[_0x416084(0x10d)]=null;}),_0x11e894[_0x54beb0(0x10d)]['on'](_0x54beb0(0x179),_0x3adf50=>{const _0x379d09=_0x54beb0;_0x11e894[_0x379d09(0x20b)][_0x379d09(0x2bb)]('[PYTHON]\x20Failed\x20to\x20start\x20(is\x20python3\x20installed?):\x20'+_0x3adf50[_0x379d09(0xfc)]);});}catch(_0xe6e5d){_0x11e894[_0x54beb0(0x20b)][_0x54beb0(0x179)](_0x54beb0(0x17a)+_0xe6e5d['message']);}}function stopPythonService(_0xdb7c78){const _0x16dd48=a0_0x5c4e32;if(_0xdb7c78[_0x16dd48(0x10d)]){_0xdb7c78['log'][_0x16dd48(0x220)](_0x16dd48(0x1d4));try{_0xdb7c78['pythonProcess'][_0x16dd48(0x2b3)]();}catch(_0x679d8c){_0xdb7c78[_0x16dd48(0x20b)]['warn'](_0x16dd48(0x211)+_0x679d8c[_0x16dd48(0xfc)]);}_0xdb7c78[_0x16dd48(0x10d)]=null;}}class CogniLiving extends utils[a0_0x5c4e32(0x2bf)]{constructor(_0x5c8b23){const _0xd6644e=a0_0x5c4e32;super({..._0x5c8b23,'name':'cogni-living'}),this['eventHistory']=[],this[_0xd6644e(0x2af)]=[],this[_0xd6644e(0x2c4)]=[],this[_0xd6644e(0x1db)]=[],this[_0xd6644e(0x168)]=[],this[_0xd6644e(0x212)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0xd6644e(0x156)]=!![],this[_0xd6644e(0x189)]=null,this[_0xd6644e(0x2d7)]=null,this[_0xd6644e(0x254)]=![],this['genAI']=null,this['geminiModel']=null,this['currentSystemMode']=SYSTEM_MODES['NORMAL'],this[_0xd6644e(0x17b)]=![],this[_0xd6644e(0x1ca)]=![],this['systemUUID']=_0xd6644e(0x13b),this[_0xd6644e(0x2b6)]=null,this[_0xd6644e(0x170)]=null,this['modeResetJob']=null,this[_0xd6644e(0x10f)]=null,this['briefingJob']=null,this[_0xd6644e(0x10d)]=null,this[_0xd6644e(0xec)]=![],this['on'](_0xd6644e(0x235),this['onReady'][_0xd6644e(0x28c)](this)),this['on'](_0xd6644e(0x2c3),this[_0xd6644e(0x2cd)][_0xd6644e(0x28c)](this)),this['on'](_0xd6644e(0x13e),this['onUnload'][_0xd6644e(0x28c)](this)),this['on'](_0xd6644e(0xfc),this['onMessage'][_0xd6644e(0x28c)](this));}async[a0_0x5c4e32(0x160)](){const _0x462701=a0_0x5c4e32;this['log'][_0x462701(0x220)](_0x462701(0x13f)+this[_0x462701(0x24e)]+_0x462701(0x20c)),await initZombies(this),this[_0x462701(0x14d)][_0x462701(0x207)]=this[_0x462701(0x14d)][_0x462701(0x207)]||'';try{this[_0x462701(0x17b)]=await checkLicense(this,this[_0x462701(0x14d)][_0x462701(0x207)]);}catch(_0x3cfaef){}if(!this[_0x462701(0x14d)][_0x462701(0xfb)]||this[_0x462701(0x14d)][_0x462701(0xfb)]<0.1)this[_0x462701(0x14d)][_0x462701(0xfb)]=0xc;await initHistory(this),await initSystemConfig(this);if(this[_0x462701(0x14d)][_0x462701(0x153)])try{this[_0x462701(0x2ae)]=new GoogleGenerativeAI(this[_0x462701(0x14d)][_0x462701(0x153)]),this[_0x462701(0x299)]=this[_0x462701(0x2ae)][_0x462701(0x1bd)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this['log'][_0x462701(0x220)](_0x462701(0x15d));}catch(_0x2491bb){this[_0x462701(0x20b)][_0x462701(0x179)](_0x462701(0x2b0)+_0x2491bb[_0x462701(0xfc)]);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this['subscribeStates'](_0x462701(0x226)),this[_0x462701(0x1c6)](LTM_DP_TRIGGER_DIGEST),this['subscribeStates'](_0x462701(0x264)),this['subscribeStates'](_0x462701(0x239)),this[_0x462701(0x1c6)](_0x462701(0x23b)),this[_0x462701(0x1c6)](_0x462701(0x28f)),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this),setTimeout(()=>checkWifiPresence(this),0x1388);if(this['analysisTimer'])clearInterval(this[_0x462701(0x2b6)]);const _0x342406=this[_0x462701(0x14d)][_0x462701(0x10b)]||0xf;_0x342406>0x0&&(this[_0x462701(0x20b)][_0x462701(0x220)]('Starting\x20Autopilot\x20('+_0x342406+_0x462701(0x21f)),this['analysisTimer']=setInterval(()=>{runAutopilot(this);},_0x342406*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this),startPythonService(this),setTimeout(()=>{const _0x40e000=_0x462701;this[_0x40e000(0x10d)]&&runPythonHealthCheck(this);},0x1388);}[a0_0x5c4e32(0x15e)](_0x17f06e){const _0x32feea=a0_0x5c4e32;if(this[_0x32feea(0x2b6)])clearInterval(this[_0x32feea(0x2b6)]);if(this[_0x32feea(0x10f)])clearInterval(this[_0x32feea(0x10f)]);if(this[_0x32feea(0x170)])this[_0x32feea(0x170)]['cancel']();if(this[_0x32feea(0x1a1)])this[_0x32feea(0x1a1)][_0x32feea(0x22d)]();if(this[_0x32feea(0x1e0)])this[_0x32feea(0x1e0)]['cancel']();if(this['exitTimer'])clearTimeout(this[_0x32feea(0x189)]);if(this[_0x32feea(0x2d7)])clearTimeout(this[_0x32feea(0x2d7)]);stopPythonService(this),_0x17f06e();}async[a0_0x5c4e32(0x2cd)](_0x1db6e5,_0xcec44b){const _0x1cb472=a0_0x5c4e32;if(!_0xcec44b)return;if(_0x1db6e5['includes']('telegram')&&_0x1db6e5['endsWith'](_0x1cb472(0x127))&&_0xcec44b[_0x1cb472(0x286)]){await handleTelegramResponse(this,_0xcec44b[_0x1cb472(0x286)]);return;}if(_0x1db6e5===this[_0x1cb472(0x1d0)]+'.'+SYSTEM_DP_MODE){_0xcec44b[_0x1cb472(0x286)]&&Object[_0x1cb472(0x25f)](SYSTEM_MODES)[_0x1cb472(0x145)](_0xcec44b[_0x1cb472(0x286)])&&(this[_0x1cb472(0x266)]=_0xcec44b[_0x1cb472(0x286)],_0xcec44b['val']===SYSTEM_MODES['VACATION']?await setPresence(this,![]):await setPresence(this,!![]));if(!_0xcec44b['ack'])this[_0x1cb472(0x10a)](_0x1db6e5,{'val':this[_0x1cb472(0x266)],'ack':!![]});return;}if(!_0xcec44b[_0x1cb472(0x217)]){_0x1db6e5[_0x1cb472(0x145)](_0x1cb472(0x226))&&_0xcec44b[_0x1cb472(0x286)]&&(this[_0x1cb472(0x10a)](_0x1db6e5,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x1db6e5['includes'](_0x1cb472(0x11d))&&_0xcec44b[_0x1cb472(0x286)]){this['setState'](_0x1db6e5,{'val':![],'ack':!![]});if(this[_0x1cb472(0x17b)])createDailyDigest(this);}_0x1db6e5[_0x1cb472(0x145)](_0x1cb472(0x102))&&_0xcec44b[_0x1cb472(0x286)]&&(this[_0x1cb472(0x10a)](_0x1db6e5,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x1db6e5[_0x1cb472(0x145)](_0x1cb472(0x252))&&_0xcec44b['val']&&(this['setState'](_0x1db6e5,{'val':![],'ack':!![]}),executeAutomationAction(this));return;}if(this[_0x1cb472(0x14d)][_0x1cb472(0x259)]&&this[_0x1cb472(0x14d)]['presenceDevices'][_0x1cb472(0x145)](_0x1db6e5)){await checkWifiPresence(this);return;}const _0x183bf5=(this[_0x1cb472(0x14d)][_0x1cb472(0x213)]||[])[_0x1cb472(0x25a)](_0xd04dc9=>_0xd04dc9['id']===_0x1db6e5);if(_0x183bf5)processSensorEvent(this,_0x1db6e5,_0xcec44b,_0x183bf5);}async[a0_0x5c4e32(0x224)](_0x4cefc5){const _0x47ccd0=a0_0x5c4e32;if(typeof _0x4cefc5==='object'&&_0x4cefc5[_0x47ccd0(0xfc)])try{if(_0x4cefc5[_0x47ccd0(0x164)]===_0x47ccd0(0xef)){const _0x1c75d0=_0x4cefc5[_0x47ccd0(0xfc)][_0x47ccd0(0x232)]||this[_0x47ccd0(0x14d)][_0x47ccd0(0x153)];if(!_0x1c75d0)return this[_0x47ccd0(0x12d)](_0x4cefc5[_0x47ccd0(0x16b)],_0x4cefc5[_0x47ccd0(0x164)],{'success':![],'message':_0x47ccd0(0x109)},_0x4cefc5[_0x47ccd0(0x23c)]);try{const _0x23b658=new GoogleGenerativeAI(_0x1c75d0),_0x57243c=_0x23b658['getGenerativeModel']({'model':GEMINI_MODEL}),_0x3da60d=await _0x57243c[_0x47ccd0(0x1ed)](_0x47ccd0(0x15c)),_0x30e4c5=await _0x3da60d[_0x47ccd0(0x20a)],_0xcac48c=_0x30e4c5[_0x47ccd0(0x24b)]();this[_0x47ccd0(0x12d)](_0x4cefc5[_0x47ccd0(0x16b)],_0x4cefc5[_0x47ccd0(0x164)],{'success':!![],'message':_0x47ccd0(0x20e)+_0xcac48c[_0x47ccd0(0x1e7)](0x0,0x14)+_0x47ccd0(0x263)},_0x4cefc5[_0x47ccd0(0x23c)]);}catch(_0x5e01f5){this['sendTo'](_0x4cefc5['from'],_0x4cefc5[_0x47ccd0(0x164)],{'success':![],'message':_0x47ccd0(0x1ab)+_0x5e01f5[_0x47ccd0(0xfc)]},_0x4cefc5[_0x47ccd0(0x23c)]);}}else{if(_0x4cefc5['command']===_0x47ccd0(0x223)){const _0x35ddf2=await getWeatherContext(this),_0x138218=await getCalendarContext(this);this[_0x47ccd0(0x12d)](_0x4cefc5[_0x47ccd0(0x16b)],_0x4cefc5[_0x47ccd0(0x164)],{'success':!![],'weather':_0x35ddf2,'calendar':_0x138218},_0x4cefc5['callback']);}else{if(_0x4cefc5[_0x47ccd0(0x164)]===_0x47ccd0(0x241)){}else{if(_0x4cefc5[_0x47ccd0(0x164)]===_0x47ccd0(0x2cb)){if(!this['isProVersion'])return this['sendTo'](_0x4cefc5[_0x47ccd0(0x16b)],_0x4cefc5[_0x47ccd0(0x164)],{'success':![],'isPro':![]},_0x4cefc5[_0x47ccd0(0x23c)]);let _0x492ed9={'status':_0x47ccd0(0x27c),'details':'','lastCheck':0x0};try{_0x492ed9[_0x47ccd0(0x1a8)]=(await this[_0x47ccd0(0x18c)](LTM_DP_DRIFT_STATUS))['val'],_0x492ed9['details']=(await this[_0x47ccd0(0x18c)](LTM_DP_DRIFT_DETAILS))['val'],_0x492ed9[_0x47ccd0(0xea)]=(await this[_0x47ccd0(0x18c)](LTM_DP_DRIFT_LAST_CHECK))[_0x47ccd0(0x286)];}catch(_0x2ebc31){}const _0x2d74ff=this['analysisHistory']||[];this[_0x47ccd0(0x12d)](_0x4cefc5[_0x47ccd0(0x16b)],_0x4cefc5[_0x47ccd0(0x164)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x47ccd0(0x168)],'driftAnalysis':_0x492ed9,'analysisHistory':_0x2d74ff},_0x4cefc5[_0x47ccd0(0x23c)]);}else{if(_0x4cefc5[_0x47ccd0(0x164)]==='getOverviewData'){const _0xa842f8=this[_0x47ccd0(0x168)][_0x47ccd0(0x1ce)],_0x2d7cfc=new Date(),_0x4a96c7=new Date(_0x2d7cfc[_0x47ccd0(0x142)](),_0x2d7cfc[_0x47ccd0(0x2b1)](),_0x2d7cfc[_0x47ccd0(0x291)]())[_0x47ccd0(0x19e)](),_0x2d0cc2=this['rawEventLog']['filter'](_0x3c00a8=>new Date(_0x3c00a8[_0x47ccd0(0x19c)])[_0x47ccd0(0x19e)]()>_0x4a96c7)[_0x47ccd0(0x1ce)],_0x1fa2b7=new Array(0x18)[_0x47ccd0(0x262)](0x0);this['rawEventLog']['forEach'](_0x308937=>{const _0x858df3=_0x47ccd0,_0x3bd8bd=new Date(_0x308937[_0x858df3(0x19c)]);if(_0x3bd8bd[_0x858df3(0x19e)]()>_0x4a96c7)_0x1fa2b7[_0x3bd8bd[_0x858df3(0x2b5)]()]++;});let _0x12ab80={'status':_0x47ccd0(0x27c)};try{_0x12ab80[_0x47ccd0(0x1a8)]=(await this['getStateAsync'](LTM_DP_DRIFT_STATUS))[_0x47ccd0(0x286)];}catch(_0x3c7d1b){}let _0x628ca2='';try{const _0x4bdb7d=await this['getStateAsync'](_0x47ccd0(0x270));_0x628ca2=_0x4bdb7d?_0x4bdb7d[_0x47ccd0(0x286)]:'';}catch(_0x56b54b){}let _0x1985be=null;!this[_0x47ccd0(0x299)]&&(_0x1985be=this['config'][_0x47ccd0(0x153)]?_0x47ccd0(0x15b):_0x47ccd0(0x298));let _0x37acf2={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0xea1a1f=await this[_0x47ccd0(0x18c)]('analysis.automation.patternDetected'),_0x29efba=await this[_0x47ccd0(0x18c)]('analysis.automation.description'),_0x20aa15=await this['getStateAsync']('analysis.automation.targetId'),_0x21549c=await this[_0x47ccd0(0x18c)]('analysis.automation.targetValue'),_0x121a07=await this[_0x47ccd0(0x18c)](_0x47ccd0(0x28f));_0xea1a1f&&_0xea1a1f[_0x47ccd0(0x286)]&&(_0x37acf2['detected']=!![],_0x37acf2[_0x47ccd0(0x2aa)]=_0x29efba?_0x29efba[_0x47ccd0(0x286)]:'',_0x37acf2[_0x47ccd0(0x2a8)]=_0x20aa15?_0x20aa15[_0x47ccd0(0x286)]:'',_0x37acf2[_0x47ccd0(0x1b5)]=_0x21549c?_0x21549c['val']:''),_0x37acf2[_0x47ccd0(0x23a)]=_0x121a07?!!_0x121a07['val']:![];}catch(_0x1161bc){}this['sendTo'](_0x4cefc5['from'],_0x4cefc5[_0x47ccd0(0x164)],{'success':!![],'eventHistory':this['eventHistory'][_0x47ccd0(0x1b2)](0x0,0xf),'stats':{'digestCount':_0xa842f8,'eventCountToday':_0x2d0cc2,'hourlyActivity':_0x1fa2b7,'driftStatus':_0x12ab80[_0x47ccd0(0x1a8)],'isPresent':this[_0x47ccd0(0x156)],'presenceWho':_0x628ca2,'minDays':this[_0x47ccd0(0x14d)][_0x47ccd0(0x19f)]||0x7,'stbDays':this[_0x47ccd0(0x14d)][_0x47ccd0(0x11e)]||0xe,'ltbDays':this['config'][_0x47ccd0(0x11f)]||0x3c,'systemError':_0x1985be},'automation':_0x37acf2},_0x4cefc5[_0x47ccd0(0x23c)]);}else{if(_0x4cefc5['command']===_0x47ccd0(0x243)){const _0x2c9133=await this[_0x47ccd0(0x175)](_0x47ccd0(0x25b),'enum'),_0x5ee669=[];if(_0x2c9133)for(const _0x5937c4 in _0x2c9133){const _0x3e3b09=_0x2c9133[_0x5937c4],_0x30b1cf=(_0x3e3b09[_0x47ccd0(0x1e8)]&&typeof _0x3e3b09['common']['name']==='object'?_0x3e3b09[_0x47ccd0(0x1e8)][_0x47ccd0(0x18f)]['de']:_0x3e3b09[_0x47ccd0(0x1e8)][_0x47ccd0(0x18f)])||_0x3e3b09['common'][_0x47ccd0(0x18f)];_0x5ee669[_0x47ccd0(0x1f8)]({'id':_0x5937c4,'name':_0x30b1cf});}this[_0x47ccd0(0x12d)](_0x4cefc5['from'],_0x4cefc5['command'],{'success':!![],'enums':_0x5ee669},_0x4cefc5[_0x47ccd0(0x23c)]);}else{if(_0x4cefc5['command']===_0x47ccd0(0x2ac))try{const _0x43082b=await scanForDevices(this,_0x4cefc5[_0x47ccd0(0xfc)]||{});this[_0x47ccd0(0x12d)](_0x4cefc5['from'],_0x4cefc5['command'],{'success':!![],'devices':_0x43082b},_0x4cefc5[_0x47ccd0(0x23c)]);}catch(_0x4cf850){this[_0x47ccd0(0x12d)](_0x4cefc5[_0x47ccd0(0x16b)],_0x4cefc5[_0x47ccd0(0x164)],{'success':![],'error':_0x4cf850['message']},_0x4cefc5[_0x47ccd0(0x23c)]);}else{if(_0x4cefc5[_0x47ccd0(0x164)]===_0x47ccd0(0x1f1)){const _0x46f9ec=_0x4cefc5[_0x47ccd0(0xfc)]['instance'];if(!_0x46f9ec)return this['sendTo'](_0x4cefc5['from'],_0x4cefc5['command'],{'success':![],'error':_0x47ccd0(0x194)},_0x4cefc5[_0x47ccd0(0x23c)]);const _0x2a887c=await getCalendarNames(this,_0x46f9ec);this['sendTo'](_0x4cefc5[_0x47ccd0(0x16b)],_0x4cefc5[_0x47ccd0(0x164)],{'success':!![],'names':_0x2a887c},_0x4cefc5[_0x47ccd0(0x23c)]);}else{if(_0x4cefc5['command']===_0x47ccd0(0x1d9)){const {targetId:_0x55d3ea,targetValue:_0x16cc74}=_0x4cefc5[_0x47ccd0(0xfc)];this[_0x47ccd0(0x20b)][_0x47ccd0(0x220)](_0x47ccd0(0x119)+_0x55d3ea+_0x47ccd0(0x255)+_0x16cc74),await this[_0x47ccd0(0xf8)](_0x47ccd0(0x124),{'val':!![],'ack':!![]}),await this[_0x47ccd0(0xf8)](_0x47ccd0(0x231),{'val':'SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20'+_0x55d3ea,'ack':!![]}),await this['setStateAsync']('analysis.automation.targetId',{'val':_0x55d3ea,'ack':!![]}),await this[_0x47ccd0(0xf8)](_0x47ccd0(0xed),{'val':_0x16cc74,'ack':!![]}),this[_0x47ccd0(0x12d)](_0x4cefc5[_0x47ccd0(0x16b)],_0x4cefc5[_0x47ccd0(0x164)],{'success':!![]},_0x4cefc5[_0x47ccd0(0x23c)]);}else{if(_0x4cefc5[_0x47ccd0(0x164)]===_0x47ccd0(0xe5)){const {historyId:_0x11c510,rating:_0x4cd55c,comment:_0x103fc7,alertReason:_0xc858f8}=_0x4cefc5[_0x47ccd0(0xfc)];_0x11c510&&_0x4cd55c?(await saveFeedback(this,{'timestamp':Date[_0x47ccd0(0x293)](),'historyId':_0x11c510,'rating':_0x4cd55c,'comment':_0x103fc7,'alertReason':_0xc858f8}),this[_0x47ccd0(0x12d)](_0x4cefc5['from'],_0x4cefc5[_0x47ccd0(0x164)],{'success':!![]},_0x4cefc5[_0x47ccd0(0x23c)])):this[_0x47ccd0(0x12d)](_0x4cefc5[_0x47ccd0(0x16b)],_0x4cefc5[_0x47ccd0(0x164)],{'success':![],'error':_0x47ccd0(0x2c0)},_0x4cefc5['callback']);}else _0x4cefc5[_0x47ccd0(0x164)]===_0x47ccd0(0x139)&&(this[_0x47ccd0(0x20b)][_0x47ccd0(0x220)]('User\x20dismissed\x20automation\x20proposal.'),await this[_0x47ccd0(0xf8)](_0x47ccd0(0x124),{'val':![],'ack':!![]}),await this[_0x47ccd0(0xf8)]('analysis.automation.description',{'val':'','ack':!![]}),this[_0x47ccd0(0x12d)](_0x4cefc5[_0x47ccd0(0x16b)],_0x4cefc5[_0x47ccd0(0x164)],{'success':!![]},_0x4cefc5[_0x47ccd0(0x23c)]));}}}}}}}}}}catch(_0x26814c){this['log'][_0x47ccd0(0x179)]('Error\x20in\x20onMessage\x20command\x20'+_0x4cefc5[_0x47ccd0(0x164)]+':\x20'+_0x26814c[_0x47ccd0(0xfc)]);if(_0x4cefc5[_0x47ccd0(0x23c)])this[_0x47ccd0(0x12d)](_0x4cefc5[_0x47ccd0(0x16b)],_0x4cefc5[_0x47ccd0(0x164)],{'success':![],'error':_0x26814c[_0x47ccd0(0xfc)]},_0x4cefc5[_0x47ccd0(0x23c)]);}}}if(require[a0_0x5c4e32(0x288)]!==module)module[a0_0x5c4e32(0x184)]=_0x51ea01=>new CogniLiving(_0x51ea01);else new CogniLiving();