const a0_0x3fd6c8=a0_0x1d8e;(function(_0x14180a,_0x119477){const _0x36543f=a0_0x1d8e,_0x5743a0=_0x14180a();while(!![]){try{const _0x2463e6=-parseInt(_0x36543f(0x271))/0x1+parseInt(_0x36543f(0x14b))/0x2+-parseInt(_0x36543f(0x1f2))/0x3+-parseInt(_0x36543f(0x1e8))/0x4*(parseInt(_0x36543f(0x1da))/0x5)+-parseInt(_0x36543f(0x226))/0x6*(-parseInt(_0x36543f(0x196))/0x7)+-parseInt(_0x36543f(0x194))/0x8*(parseInt(_0x36543f(0x18b))/0x9)+parseInt(_0x36543f(0x1c8))/0xa;if(_0x2463e6===_0x119477)break;else _0x5743a0['push'](_0x5743a0['shift']());}catch(_0x5551b3){_0x5743a0['push'](_0x5743a0['shift']());}}}(a0_0x11a2,0xa70dc));const a0_0x31be5d=(function(){let _0xcb853c=!![];return function(_0x5f8add,_0x47d223){const _0x149543=_0xcb853c?function(){const _0x440c08=a0_0x1d8e;if(_0x47d223){const _0x41a188=_0x47d223[_0x440c08(0x146)](_0x5f8add,arguments);return _0x47d223=null,_0x41a188;}}:function(){};return _0xcb853c=![],_0x149543;};}()),a0_0x4529f9=a0_0x31be5d(this,function(){const _0x959532=a0_0x1d8e;return a0_0x4529f9['toString']()[_0x959532(0x161)]('(((.+)+)+)+$')[_0x959532(0x268)]()[_0x959532(0x17d)](a0_0x4529f9)['search'](_0x959532(0x27e));});a0_0x4529f9();'use strict';const utils=require(a0_0x3fd6c8(0x10e)),{GoogleGenerativeAI}=require(a0_0x3fd6c8(0x1f0)),{spawn}=require('child_process'),path=require(a0_0x3fd6c8(0x20a)),fs=require('fs'),installer=require(a0_0x3fd6c8(0x1e9)),scanner=require('./lib/scanner'),schedulers=require('./lib/scheduler'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x3fd6c8(0x1d5),LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS='LTM.baselineStatus',LTM_DP_DRIFT_CHANNEL=a0_0x3fd6c8(0x1eb),LTM_DP_DRIFT_STATUS=a0_0x3fd6c8(0x162),LTM_DP_DRIFT_DETAILS=a0_0x3fd6c8(0x166),LTM_DP_DRIFT_LAST_CHECK=a0_0x3fd6c8(0x144),SYSTEM_DP_MODE=a0_0x3fd6c8(0x251),SYSTEM_MODES={'NORMAL':a0_0x3fd6c8(0x160),'VACATION':'vacation','PARTY':a0_0x3fd6c8(0x28f),'GUEST':'guest'},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x3fd6c8(0x1df)],SYSTEM_MODES[a0_0x3fd6c8(0x29f)]],PERSONA_MAPPING={'generic':a0_0x3fd6c8(0x128),'senior_aal':'PRIORITÃ„T:\x20Gesundheit/AAL.','family':a0_0x3fd6c8(0x1f4),'single_comfort':a0_0x3fd6c8(0x19b),'security':'PRIORITÃ„T:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x39fe66){const _0x1d9795=a0_0x3fd6c8;try{const _0x4ff8b5=['analysis.history_debug_00','events.history_debug_00'];for(const _0xf4971a of _0x4ff8b5){try{const _0x9dbc41=await _0x39fe66[_0x1d9795(0x29e)](_0xf4971a);if(_0x9dbc41)await _0x39fe66[_0x1d9795(0x183)](_0xf4971a);}catch(_0x4cc900){}}}catch(_0x50d65a){}}async function checkLicense(_0x3600d0){return!![];}async function initHistory(_0x4ea6d4){const _0x1779af=a0_0x3fd6c8;try{const _0x46cafc=await _0x4ea6d4[_0x1779af(0x26c)](_0x1779af(0x12b));_0x46cafc&&_0x46cafc[_0x1779af(0x24c)]&&(_0x4ea6d4[_0x1779af(0x141)]=JSON['parse'](_0x46cafc['val'][_0x1779af(0x268)]()));}catch(_0x57ba04){_0x4ea6d4[_0x1779af(0x141)]=[];}try{const _0x45bf99=await _0x4ea6d4['getStateAsync'](_0x1779af(0x265));if(_0x45bf99&&_0x45bf99[_0x1779af(0x24c)])_0x4ea6d4[_0x1779af(0x137)]=JSON[_0x1779af(0x127)](_0x45bf99['val'][_0x1779af(0x268)]());}catch(_0x4c770c){_0x4ea6d4[_0x1779af(0x137)]=[];}if(_0x4ea6d4[_0x1779af(0x141)]&&_0x4ea6d4[_0x1779af(0x141)][_0x1779af(0x24d)]>0x0){_0x4ea6d4[_0x1779af(0x16d)][_0x1779af(0x267)](_0x1779af(0x1b6));for(let _0xdb8830=_0x4ea6d4['eventHistory'][_0x1779af(0x24d)]-0x1;_0xdb8830>=0x0;_0xdb8830--){const _0x3932fe=_0x4ea6d4['eventHistory'][_0xdb8830];if(_0x3932fe&&_0x3932fe['id']!==undefined&&_0x3932fe['value']!==undefined)_0x4ea6d4[_0x1779af(0x1d3)][_0x3932fe['id']]=_0x3932fe['value'];}}}async function initSystemConfig(_0x5e19a6){const _0x247d0d=a0_0x3fd6c8;try{const _0x2a7fa0=await _0x5e19a6['getForeignObjectAsync'](_0x247d0d(0x21a));if(_0x2a7fa0&&_0x2a7fa0[_0x247d0d(0x1b9)])_0x5e19a6[_0x247d0d(0x13f)]={'latitude':_0x2a7fa0[_0x247d0d(0x1b9)][_0x247d0d(0x163)]||0x0,'longitude':_0x2a7fa0[_0x247d0d(0x1b9)][_0x247d0d(0x209)]||0x0,'city':_0x2a7fa0[_0x247d0d(0x1b9)][_0x247d0d(0x1a4)]||''};}catch(_0x15b2a5){}}function a0_0x11a2(){const _0x3343a2=['Â°C,\x20','slice','toISOString','driftAnalysisTimer','Trend','motion','getForeignObjectsAsync','Raw\x20Log','12855550jbNKbC','Activity-Level','Briefing\x20Error:\x20','Success','geminiModel','triggerBriefing','ANALYZE_SEQUENCE','includes','Keine\x20Wetterdaten\x20verfÃ¼gbar.','presenceDevices','version','sensorLastValues','scanDevices','LTM.processingStatus','targetId','fenster','Err:\x20','Train\x20Comfort','220xbKpjL','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','python3','\x20=\x20','SECURITY_RESULT','PARTY','Temperature\x20Forecast','Gemini\x20Init\x20Error:\x20','name','Sec-Training\x20started...','Unbekannt','ðŸ\x20Python\x20Pong','ðŸ§ \x20Triggering\x20Security\x20Training...','response','47972NsAzGb','./lib/installer','currentSystemMode','LTM.driftAnalysis','.\x20EMERGENCY:\x20','state','logDuplicates','boolean','@google/generative-ai','AI\x20Training','550215SUSgfL','instance','Fokus\x20auf\x20Familienroutinen.','daswetter','setForeignStateAsync','description','toLocaleTimeString','subscribeStates','Who\x20is\x20present?','N/A\x20(Learning)','Description','callback','analysis.automation.autoApply','exitGraceTimer','triggerDailyDigest','cogni-living','system','\x20Tage)','Daily\x20Digests','is_anomaly','N/A','testContext','onUnload','longitude','path','toLowerCase','enum.rooms.*','[PYTHON]\x20','notifyTelegramEnabled','json','unknown','analysis.training.triggerComfort','OK:\x20','Pattern\x20Detected','Missing\x20data','Started...','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','presence','accuweather','weatherInstance','system.config','pythonProcess','setupLtmScheduler','cancel','COMFORT_RESULT','Gemini\x20AI\x20initialized.','contact','[RESULT]','NORMAL','System','analysis.security.topologyMatrix','getEnums','6IOaOmF','find','Trigger\x20Briefing','LTM.trainingData.sequences','VACATION','Kalender\x20deaktiviert.','getTime','analysis.health.trendValue','analysis.automation.triggerAction','useWeather','ltmLtbWindowDays','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','getCalendarNames','location','ANALYZE_TREND','ðŸ“\x20Feedback\x20received:\x20','online','PYTHON_EXE','error','Kein\x20API\x20Key.','namespace','some','Training\x20Error:\x20','onReady','BUILD_TOPOLOGY','Lernphase\x20(','forEach','fill','ltmStbWindowDays','.Current.WeatherText','analysis.security.currentThreshold','Last\x20raw\x20event','stringify','stdin','toFixed','isEmergency','briefingJob','Training\x20Status','val','length','setState','lampe','TRAIN_COMFORT','system.mode','setHours','âš ï¸\x20SECURITY\x20ALARM:\x20','Kein\x20API\x20Key!','enum.functions.*','ðŸŒ…\x20Morning\x20Briefing:\x0a','type','Alert\x20Status','analysis.triggerBriefing','Keine\x20Termine.','floor','isGracePeriodActive','getHours','Anomaly\x20Detected','Wetterdaten\x20deaktiviert.','analysis.health.todayVector','.\x20KONTEXT:\x20','button','light','sendTo','analysis.analysisHistory','checkAndInstall','info','toString','dailyDigests','write','isAlert','getStateAsync','\x20new\x20patterns.','âš ï¸\x20ALARM:\x20','command','threshold','712773wimEpR','getDate','devices','modeResetJob','Skipped\x20(No\x20AI\x20or\x20Data)','Last\x20Check','analysis.training.status','analysis.alertReason','Energy\x20Intelligence','HEALTH_TRAIN_RESULT','Train\x20Security','Gemini\x20Error:\x20','analysis.security','(((.+)+)+)+$','generic','schalter','automation.triggerAction','detected','unshift','values','system.presenceWho','systemUUID','heizung','No\x20instance','pop','status','subscribeForeignStatesAsync','kill','analysis.security.lastCheck','dependencyInstallInProgress','party','analysisTimer','\x0aSTB:\x20','service.py','LTM','setStateAsync','setupModeResetScheduler','TRAIN_ENERGY','details','PREDICT_ENERGY','.\x20WETTER:\x20','Current\x20Threshold','ANALYZE_GAIT','Train\x20Energy','automationProposal','getObjectAsync','GUEST','Thermodynamics','dimmer','.\x20EVENTS:\x20','config','analysis.energy.insulationScore','ack','System\x20Mode','indicator.alarm','aiPersona','map','startsWith','switch','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','klima','stdout','Keine\x20Details.','loc','Deaktiviert\x20(Pro-Feature)','Activity\x20Summary','number','@iobroker/adapter-core','writable','getGenerativeModel','Topology\x20Matrix','now','Trend\x20Value','licenseKey','door','Aktiv\x20(','Today\x20Vector\x20(15m)','heating','from','analysis.activitySummary','isPresent','warn','calendarInstance','Unknown','Trigger\x20Analysis','KI-Modell\x20nicht\x20initialisiert','Failed:\x20','bind','WiFi\x20Presence\x20detected.','.forecast.current.temp','analysis.automation.detectedPatterns','rule','parse','Analysiere\x20ausgewogen.','TRAIN_HEALTH','.forecast.current.state','events.history','diagnosis','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','GAIT_RESULT','.\x20ANWESEND:\x20','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','replace','[RECORDER]\x20Error:\x20','analysis.automation.targetId','inactivityThresholdHours','object','splice','analysisHistory','shift','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','substring','generateContent','keys','analysis.energy.forecast','TRAIN_SECURITY','systemConfig','analysis.isAlert','eventHistory','analysis.automation.targetValue','temperatur','LTM.driftAnalysis.lastCheck','openweathermap','apply','analysis.trigger','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','analysis.training.triggerSecurity','691274neSIYm','window','testApiKey','filter','getForeignStateAsync','string','getMinutes','isExit','analysis.health.gaitSpeed','analysis.training.triggerEnergy','text.alarm','events.lastEvent','driftDetails','indicator','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','setupBriefingScheduler','licht','extendObjectAsync','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','activityLevel','isProVersion','normal','search','LTM.driftAnalysis.baselineDrift','latitude','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','geminiApiKey','LTM.driftAnalysis.driftDetails','ANALYZE_HEALTH','setObjectNotExistsAsync','payload','baselineDrift','enum','telegram','log','rawEventLog','analysis.health.lastCheck','trim','TREND_RESULT','Gait\x20Speed\x20Trend','split','useCalendar','main','analysis.security.lastScore',')\x20-\x20SAFE\x20BOOT','kontakt','notifyTelegramInstance','ANOMALY','.Current.Temperature','join','constructor','exitTimer','Target\x20ID','outdoorSensorId','temperature','message','delObjectAsync','LTM.trainingData.thermodynamics','BUTLER\x20Execution\x20Error:\x20','Digest','getMonth','Error\x20launching\x20Python:\x20','Build\x20Topology','channel','981lIlvXe','confidence','genAI','minDaysForBaseline','[LOG]','analysis.lastResult','analysis.energy.heatingScore','text','analysis.automation.description','7224OJOdip','Anomaly\x20Score','4027499ZiGTtc','tÃ¼r','ENERGY_PREDICT_RESULT','Insulation\x20Score','analysis.automation.patternDetected','Fokus\x20auf\x20Komfort.','onStateChange','push','Event\x20History','Trigger\x20Action','analysis.training.triggerHealth','cogni-living\x20adapter\x20starting\x20(v','setupDriftAnalysisScheduler','system.isPresent','city','analysis.training.triggerTopology','submitFeedback','.\x20SYSTEM_MODE:\x20','Auto\x20Apply','timestamp','success','analysis.health.isAnomaly','value','data','lastAlertState','communicate.request','Detected\x20Patterns','ltmJob','simulateButler','debug','alertReason','onMessage','Restoring\x20sensor\x20cache...','.NextHours.Location_1.Day_1.current.temp_value','livingContext','common','existsSync','autoApply','TOPOLOGY_RESULT','round','Success:\x20','targetValue'];a0_0x11a2=function(){return _0x3343a2;};return a0_0x11a2();}async function createAllObjects(_0x40c129){const _0x192908=a0_0x3fd6c8;await _0x40c129['extendObjectAsync'](_0x192908(0x202),{'type':_0x192908(0x18a),'common':{'name':_0x192908(0x223)},'native':{}}),await _0x40c129[_0x192908(0x15c)](SYSTEM_DP_MODE,{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x100),'type':_0x192908(0x150),'role':_0x192908(0x1ed),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x192908(0x222)]},'native':{}}),await _0x40c129[_0x192908(0x168)](_0x192908(0x285),{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x1fa),'type':_0x192908(0x150),'role':_0x192908(0x192),'read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x168)](_0x192908(0x156),{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x245),'type':_0x192908(0x150),'role':_0x192908(0x20f),'read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x168)](_0x192908(0x12b),{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x19e),'type':_0x192908(0x150),'role':_0x192908(0x20f),'read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x15c)]('analysis.training',{'type':_0x192908(0x18a),'common':{'name':_0x192908(0x1f1)},'native':{}}),await _0x40c129['setObjectNotExistsAsync'](_0x192908(0x14a),{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x27b),'type':'boolean','role':_0x192908(0x262),'read':!![],'write':!![]},'native':{}}),await _0x40c129['setObjectNotExistsAsync']('analysis.training.triggerHealth',{'type':_0x192908(0x1ed),'common':{'name':'Train\x20Health','type':_0x192908(0x1ef),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x40c129['setObjectNotExistsAsync'](_0x192908(0x154),{'type':'state','common':{'name':_0x192908(0x29c),'type':_0x192908(0x1ef),'role':_0x192908(0x262),'read':!![],'write':!![]},'native':{}}),await _0x40c129['setObjectNotExistsAsync']('analysis.training.triggerComfort',{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x1d9),'type':_0x192908(0x1ef),'role':_0x192908(0x262),'read':!![],'write':!![]},'native':{}}),await _0x40c129[_0x192908(0x168)](_0x192908(0x1a5),{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x189),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x40c129['setObjectNotExistsAsync'](_0x192908(0x277),{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x24b),'type':_0x192908(0x150),'role':_0x192908(0x192),'read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x15c)](_0x192908(0x27d),{'type':_0x192908(0x18a),'common':{'name':'Security\x20Monitor'},'native':{}}),await _0x40c129['setObjectNotExistsAsync'](_0x192908(0x176),{'type':'state','common':{'name':_0x192908(0x195),'type':'number','role':'value','read':!![],'write':![]},'native':{}}),await _0x40c129['setObjectNotExistsAsync'](_0x192908(0x244),{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x29a),'type':_0x192908(0x10d),'role':_0x192908(0x1ac),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x40c129[_0x192908(0x168)](_0x192908(0x28d),{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x276),'type':_0x192908(0x150),'role':'date','read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x168)](_0x192908(0x224),{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x111),'type':_0x192908(0x150),'role':_0x192908(0x20f),'read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x15c)]('analysis.health',{'type':_0x192908(0x18a),'common':{'name':'Health\x20Analysis'},'native':{}}),await _0x40c129[_0x192908(0x168)](_0x192908(0x16f),{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x276),'type':_0x192908(0x150),'role':'date','read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x168)](_0x192908(0x1ab),{'type':'state','common':{'name':_0x192908(0x25e),'type':_0x192908(0x1ef),'role':_0x192908(0x158),'read':!![],'write':![]},'native':{}}),await _0x40c129['setObjectNotExistsAsync']('analysis.health.trendDiagnosis',{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x1c4),'type':_0x192908(0x150),'role':'text','read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x168)](_0x192908(0x22d),{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x113),'type':'number','role':'value','read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x168)](_0x192908(0x260),{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x117),'type':_0x192908(0x150),'role':_0x192908(0x20f),'read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x168)](_0x192908(0x153),{'type':'state','common':{'name':_0x192908(0x172),'type':'number','role':_0x192908(0x1ac),'read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x15c)]('analysis.energy',{'type':_0x192908(0x18a),'common':{'name':_0x192908(0x279)},'native':{}}),await _0x40c129[_0x192908(0x168)]('analysis.energy.insulationScore',{'type':'state','common':{'name':_0x192908(0x199),'type':_0x192908(0x150),'role':_0x192908(0x192),'read':!![],'write':![]},'native':{}}),await _0x40c129['setObjectNotExistsAsync']('analysis.energy.heatingScore',{'type':_0x192908(0x1ed),'common':{'name':'Heating\x20Score','type':_0x192908(0x150),'role':_0x192908(0x192),'read':!![],'write':![]},'native':{}}),await _0x40c129['setObjectNotExistsAsync'](_0x192908(0x13d),{'type':'state','common':{'name':_0x192908(0x1e0),'type':_0x192908(0x150),'role':_0x192908(0x20f),'read':!![],'write':![]},'native':{}}),await _0x40c129['extendObjectAsync'](_0x192908(0x293),{'type':_0x192908(0x18a),'common':{'name':_0x192908(0x293)},'native':{}}),await _0x40c129[_0x192908(0x15c)](LTM_DP_RAW_LOG,{'type':'state','common':{'name':_0x192908(0x1c7),'type':_0x192908(0x150),'role':'json','read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x15c)](LTM_DP_DAILY_DIGESTS,{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x204),'type':_0x192908(0x150),'role':_0x192908(0x20f),'read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x168)](_0x192908(0x229),{'type':_0x192908(0x1ed),'common':{'name':'Sequences','type':'string','role':_0x192908(0x20f),'read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x168)]('LTM.trainingData.thermodynamics',{'type':'state','common':{'name':_0x192908(0x2a0),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x168)]('analysis.trigger',{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x11f),'type':_0x192908(0x1ef),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x40c129['setObjectNotExistsAsync']('analysis.triggerBriefing',{'type':'state','common':{'name':_0x192908(0x228),'type':'boolean','role':_0x192908(0x262),'read':!![],'write':!![]},'native':{}}),await _0x40c129['setObjectNotExistsAsync'](_0x192908(0x140),{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x258),'type':_0x192908(0x1ef),'role':_0x192908(0x101),'read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x168)](_0x192908(0x278),{'type':_0x192908(0x1ed),'common':{'name':'Alert\x20Reason','type':'string','role':_0x192908(0x155),'read':!![],'write':![]},'native':{}}),await _0x40c129['setObjectNotExistsAsync'](_0x192908(0x11a),{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x10c),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x168)]('analysis.automation.patternDetected',{'type':'state','common':{'name':_0x192908(0x213),'type':_0x192908(0x1ef),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x168)](_0x192908(0x193),{'type':'state','common':{'name':_0x192908(0x1fc),'type':_0x192908(0x150),'role':_0x192908(0x192),'read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x168)](_0x192908(0x125),{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x1b0),'type':_0x192908(0x150),'role':_0x192908(0x20f),'read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x168)](_0x192908(0x133),{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x17f),'type':_0x192908(0x150),'role':_0x192908(0x192),'read':!![],'write':![]},'native':{}}),await _0x40c129['setObjectNotExistsAsync'](_0x192908(0x142),{'type':_0x192908(0x1ed),'common':{'name':'Target\x20Value','type':_0x192908(0x150),'role':_0x192908(0x192),'read':!![],'write':![]},'native':{}}),await _0x40c129[_0x192908(0x168)]('analysis.automation.autoApply',{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x1a8),'type':'boolean','role':_0x192908(0x105),'read':!![],'write':!![]},'native':{}}),await _0x40c129['setObjectNotExistsAsync'](_0x192908(0x22e),{'type':_0x192908(0x1ed),'common':{'name':_0x192908(0x19f),'type':_0x192908(0x1ef),'role':_0x192908(0x262),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x28770b){const _0x613619=a0_0x3fd6c8;try{const _0x51adac=await _0x28770b[_0x613619(0x26c)](SYSTEM_DP_MODE);_0x51adac&&_0x51adac[_0x613619(0x24c)]&&Object[_0x613619(0x284)](SYSTEM_MODES)['includes'](_0x51adac[_0x613619(0x24c)])?_0x28770b[_0x613619(0x1ea)]=_0x51adac[_0x613619(0x24c)]:(_0x28770b['currentSystemMode']=SYSTEM_MODES[_0x613619(0x222)],await _0x28770b['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x613619(0x222)],'ack':!![]}));}catch(_0x29d23d){_0x28770b[_0x613619(0x1ea)]=SYSTEM_MODES[_0x613619(0x222)];}}async function loadRawEventLog(_0x6acdd0){const _0x3dfd12=a0_0x3fd6c8;try{const _0x101c45=await _0x6acdd0[_0x3dfd12(0x26c)](LTM_DP_RAW_LOG);if(_0x101c45&&_0x101c45[_0x3dfd12(0x24c)])_0x6acdd0[_0x3dfd12(0x16e)]=JSON[_0x3dfd12(0x127)](_0x101c45[_0x3dfd12(0x24c)]);}catch(_0x3ba611){_0x6acdd0[_0x3dfd12(0x16e)]=[];}}async function saveRawEventLog(_0x49950d){const _0x38c8af=a0_0x3fd6c8;if(_0x49950d['rawEventLog'][_0x38c8af(0x24d)]>RAW_LOG_MAX_SIZE)_0x49950d['rawEventLog'][_0x38c8af(0x136)](0x0,_0x49950d[_0x38c8af(0x16e)]['length']-RAW_LOG_MAX_SIZE);await _0x49950d[_0x38c8af(0x294)](LTM_DP_RAW_LOG,{'val':JSON[_0x38c8af(0x246)](_0x49950d['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x13dab1){const _0x5d7dcb=a0_0x3fd6c8;try{const _0xd3e4dd=await _0x13dab1[_0x5d7dcb(0x26c)](LTM_DP_DAILY_DIGESTS);if(_0xd3e4dd&&_0xd3e4dd[_0x5d7dcb(0x24c)])_0x13dab1[_0x5d7dcb(0x269)]=JSON[_0x5d7dcb(0x127)](_0xd3e4dd[_0x5d7dcb(0x24c)]);}catch(_0x4dce7e){_0x13dab1['dailyDigests']=[];}await updateBaselineStatus(_0x13dab1);}async function saveDailyDigests(_0x61614b,_0x4ddc82=!![]){const _0x34f502=a0_0x3fd6c8,_0x5a0de6=_0x61614b[_0x34f502(0x2a3)]['ltmLtbWindowDays']||0x3c;_0x61614b[_0x34f502(0x269)][_0x34f502(0x24d)]>_0x5a0de6&&_0x61614b[_0x34f502(0x269)][_0x34f502(0x136)](0x0,_0x61614b['dailyDigests'][_0x34f502(0x24d)]-_0x5a0de6);await _0x61614b[_0x34f502(0x294)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x34f502(0x246)](_0x61614b[_0x34f502(0x269)]),'ack':!![]});if(_0x4ddc82)await updateBaselineStatus(_0x61614b);}async function updateAnalysisHistory(_0x9d1c8e,_0x5ba5c6){const _0x15fde5=a0_0x3fd6c8;_0x9d1c8e[_0x15fde5(0x137)][_0x15fde5(0x283)](_0x5ba5c6);if(_0x9d1c8e[_0x15fde5(0x137)][_0x15fde5(0x24d)]>HISTORY_MAX_SIZE)_0x9d1c8e[_0x15fde5(0x137)][_0x15fde5(0x289)]();await _0x9d1c8e['setStateAsync'](_0x15fde5(0x265),{'val':JSON[_0x15fde5(0x246)](_0x9d1c8e[_0x15fde5(0x137)]),'ack':!![]});}async function updateBaselineStatus(_0x5a8224){const _0x2d8fb5=a0_0x3fd6c8;if(!_0x5a8224[_0x2d8fb5(0x15f)]){await _0x5a8224['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x2d8fb5(0x10b),'ack':!![]});return;}const _0x16ad08=_0x5a8224[_0x2d8fb5(0x269)][_0x2d8fb5(0x24d)]>=(_0x5a8224['config'][_0x2d8fb5(0x18e)]||0x7)?_0x2d8fb5(0x116)+_0x5a8224[_0x2d8fb5(0x269)][_0x2d8fb5(0x24d)]+_0x2d8fb5(0x203):_0x2d8fb5(0x23f)+_0x5a8224['dailyDigests'][_0x2d8fb5(0x24d)]+'/'+(_0x5a8224[_0x2d8fb5(0x2a3)][_0x2d8fb5(0x18e)]||0x7)+')';await _0x5a8224[_0x2d8fb5(0x294)](LTM_DP_BASELINE_STATUS,{'val':_0x16ad08,'ack':!![]});}async function initSensorSubscriptions(_0x3815b8){const _0x98410=a0_0x3fd6c8,_0x11b259=_0x3815b8['config'][_0x98410(0x273)];if(_0x11b259)for(const _0x36d3fc of _0x11b259){await _0x3815b8[_0x98410(0x28b)](_0x36d3fc['id']);}}async function initPresenceSubscriptions(_0x3c3548){const _0x7b35e3=a0_0x3fd6c8,_0x28bb34=_0x3c3548[_0x7b35e3(0x2a3)][_0x7b35e3(0x1d1)];if(_0x28bb34)for(const _0xfde042 of _0x28bb34){await _0x3c3548['subscribeForeignStatesAsync'](_0xfde042);}}async function setupTelegramListener(_0x519027){const _0x578037=a0_0x3fd6c8,_0x4f530b=_0x519027[_0x578037(0x2a3)][_0x578037(0x179)];if(_0x519027[_0x578037(0x2a3)][_0x578037(0x20e)]&&_0x4f530b)await _0x519027['subscribeForeignStatesAsync'](_0x4f530b+'.communicate.request');}async function checkWifiPresence(_0x83d473){const _0x242749=a0_0x3fd6c8;try{const _0x1f5a7a=_0x83d473[_0x242749(0x2a3)][_0x242749(0x1d1)]||[];let _0x1f0152=![];const _0x36f0b0=[];for(const _0x438ffe of _0x1f5a7a){try{const _0x4c6a69=await _0x83d473[_0x242749(0x14f)](_0x438ffe);_0x4c6a69&&(_0x4c6a69['val']===!![]||_0x4c6a69[_0x242749(0x24c)]===_0x242749(0x236)||_0x4c6a69[_0x242749(0x24c)]===0x1)&&(_0x1f0152=!![],_0x36f0b0[_0x242749(0x19d)](_0x438ffe));}catch(_0x248168){}}return await _0x83d473[_0x242749(0x294)]('system.presenceWho',{'val':_0x36f0b0[_0x242749(0x17c)](',\x20'),'ack':!![]}),_0x1f0152&&(_0x83d473[_0x242749(0x17e)]&&(_0x83d473[_0x242749(0x16d)][_0x242749(0x267)](_0x242749(0x123)),abortExitTimer(_0x83d473)),!_0x83d473[_0x242749(0x11b)]&&_0x83d473[_0x242749(0x1ea)]===SYSTEM_MODES[_0x242749(0x222)]&&await setPresence(_0x83d473,!![])),_0x1f0152;}catch(_0x5c6649){return![];}}function startExitTimer(_0x2e4fe8){const _0x262452=a0_0x3fd6c8;abortExitTimer(_0x2e4fe8),_0x2e4fe8['isGracePeriodActive']=!![],_0x2e4fe8[_0x262452(0x1ff)]=setTimeout(()=>{_0x2e4fe8['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x2e4fe8[_0x262452(0x17e)]=setTimeout(()=>{setPresence(_0x2e4fe8,![]),_0x2e4fe8['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x5d40e1){const _0x27baca=a0_0x3fd6c8;if(_0x5d40e1[_0x27baca(0x17e)])clearTimeout(_0x5d40e1[_0x27baca(0x17e)]);if(_0x5d40e1['exitGraceTimer'])clearTimeout(_0x5d40e1['exitGraceTimer']);_0x5d40e1[_0x27baca(0x17e)]=null,_0x5d40e1[_0x27baca(0x1ff)]=null,_0x5d40e1[_0x27baca(0x25c)]=![];}async function setPresence(_0x2871c2,_0x427415){const _0x176f24=a0_0x3fd6c8;if(_0x2871c2[_0x176f24(0x11b)]===_0x427415)return;_0x2871c2[_0x176f24(0x11b)]=_0x427415,await _0x2871c2[_0x176f24(0x294)](_0x176f24(0x1a3),{'val':_0x427415,'ack':!![]});}async function executeAutomationAction(_0x15e0bd){const _0x3decf6=a0_0x3fd6c8;try{const _0x295b88=await _0x15e0bd['getStateAsync'](_0x3decf6(0x133)),_0x5387cd=await _0x15e0bd[_0x3decf6(0x26c)](_0x3decf6(0x142));if(_0x295b88&&_0x295b88[_0x3decf6(0x24c)]&&_0x5387cd){const _0x5bf0e0=_0x295b88[_0x3decf6(0x24c)];let _0x7ac0bb=_0x5387cd['val'];try{_0x7ac0bb=JSON['parse'](_0x7ac0bb);}catch(_0x37df14){}_0x15e0bd[_0x3decf6(0x16d)]['info']('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x5bf0e0+_0x3decf6(0x1dd)+_0x7ac0bb),await _0x15e0bd[_0x3decf6(0x1f6)](_0x5bf0e0,_0x7ac0bb);}else _0x15e0bd[_0x3decf6(0x16d)][_0x3decf6(0x11c)](_0x3decf6(0x231));}catch(_0xd0440d){_0x15e0bd[_0x3decf6(0x16d)][_0x3decf6(0x238)](_0x3decf6(0x185)+_0xd0440d[_0x3decf6(0x182)]);}}async function processSensorEvent(_0x3e5e88,_0x23c5e2,_0x1b17df,_0x2e1ff6){const _0x394ddb=a0_0x3fd6c8;if(!_0x2e1ff6)return;const _0x17fe55=_0x1b17df[_0x394ddb(0x24c)],_0x57f8c1=Date['now'](),_0x521baf=_0x3e5e88['sensorLastValues'][_0x23c5e2];_0x3e5e88[_0x394ddb(0x1d3)][_0x23c5e2]=_0x17fe55;if(!_0x2e1ff6[_0x394ddb(0x1ee)]&&_0x521baf!=undefined&&_0x521baf==_0x17fe55)return;const _0x267810=(_0x2e1ff6['type']||'')[_0x394ddb(0x20b)](),_0x4d30a8=_0x267810[_0x394ddb(0x1cf)](_0x394ddb(0x181))||_0x267810[_0x394ddb(0x1cf)](_0x394ddb(0x143))||_0x267810[_0x394ddb(0x1cf)](_0x394ddb(0x107))||_0x267810[_0x394ddb(0x1cf)](_0x394ddb(0x287));_0x3e5e88['isProVersion']&&_0x4d30a8&&recordThermodynamics(_0x3e5e88,_0x23c5e2,_0x17fe55,_0x2e1ff6[_0x394ddb(0x233)]);const _0xd84154={'timestamp':_0x57f8c1,'id':_0x23c5e2,'name':_0x2e1ff6['name'],'type':_0x2e1ff6['type'],'location':_0x2e1ff6[_0x394ddb(0x233)],'value':_0x17fe55};_0x3e5e88['eventHistory'][_0x394ddb(0x283)](_0xd84154);if(_0x3e5e88[_0x394ddb(0x141)][_0x394ddb(0x24d)]>HISTORY_MAX_SIZE)_0x3e5e88[_0x394ddb(0x141)][_0x394ddb(0x289)]();await _0x3e5e88[_0x394ddb(0x294)]('events.lastEvent',{'val':JSON[_0x394ddb(0x246)](_0xd84154),'ack':!![]}),await _0x3e5e88['setStateAsync'](_0x394ddb(0x12b),{'val':JSON[_0x394ddb(0x246)](_0x3e5e88[_0x394ddb(0x141)]),'ack':!![]});_0x3e5e88[_0x394ddb(0x15f)]&&(_0x3e5e88['rawEventLog']['push'](_0xd84154),await saveRawEventLog(_0x3e5e88),recordSequence(_0x3e5e88,_0xd84154));if(_0x2e1ff6[_0x394ddb(0x152)]&&_0x17fe55===!![]){if(_0x3e5e88[_0x394ddb(0x11b)]&&!_0x3e5e88[_0x394ddb(0x25c)])startExitTimer(_0x3e5e88);else{if(!_0x3e5e88[_0x394ddb(0x11b)])setPresence(_0x3e5e88,!![]);}}else{if(_0x2e1ff6[_0x394ddb(0x257)]==='motion'&&_0x17fe55===!![]){if(_0x3e5e88[_0x394ddb(0x17e)])abortExitTimer(_0x3e5e88);if(!_0x3e5e88[_0x394ddb(0x11b)]&&_0x3e5e88[_0x394ddb(0x1ea)]===SYSTEM_MODES[_0x394ddb(0x222)])setPresence(_0x3e5e88,!![]);}}}async function recordThermodynamics(_0x4a6d4f,_0x1f1ec0,_0x8ffd2e,_0x4628c8){const _0x1fd416=a0_0x3fd6c8,_0xe538a=await getOutsideTemperatureNumeric(_0x4a6d4f),_0x104b30=await _0x4a6d4f[_0x1fd416(0x26c)](_0x1fd416(0x184));let _0x48ca46=[];if(_0x104b30&&_0x104b30[_0x1fd416(0x24c)])try{_0x48ca46=JSON[_0x1fd416(0x127)](_0x104b30['val']);}catch(_0x346315){}_0x48ca46[_0x1fd416(0x19d)]({'ts':Date[_0x1fd416(0x112)](),'room':_0x4628c8||_0x1fd416(0x11e),'t_in':_0x8ffd2e,'t_out':_0xe538a});if(_0x48ca46[_0x1fd416(0x24d)]>THERMO_LOG_SIZE)_0x48ca46[_0x1fd416(0x138)]();await _0x4a6d4f[_0x1fd416(0x294)](_0x1fd416(0x184),{'val':JSON[_0x1fd416(0x246)](_0x48ca46),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x171adf){const _0x187d32=a0_0x3fd6c8;if(_0x171adf[_0x187d32(0x2a3)][_0x187d32(0x180)])try{const _0x2b496b=await _0x171adf['getForeignStateAsync'](_0x171adf['config']['outdoorSensorId']);if(_0x2b496b&&_0x2b496b[_0x187d32(0x24c)]!==undefined&&_0x2b496b[_0x187d32(0x24c)]!==null)return parseFloat(_0x2b496b['val']);}catch(_0x32c0aa){}const _0x31a3db=_0x171adf[_0x187d32(0x2a3)][_0x187d32(0x219)];if(!_0x171adf[_0x187d32(0x2a3)]['useWeather']||!_0x31a3db)return null;try{let _0x52bd4a='';if(_0x31a3db[_0x187d32(0x1cf)](_0x187d32(0x218)))_0x52bd4a=_0x31a3db+_0x187d32(0x17b);else{if(_0x31a3db[_0x187d32(0x1cf)](_0x187d32(0x1f5)))_0x52bd4a=_0x31a3db+_0x187d32(0x1b7);else{if(_0x31a3db[_0x187d32(0x1cf)](_0x187d32(0x145)))_0x52bd4a=_0x31a3db+'.forecast.current.temperature';else{if(_0x31a3db[_0x187d32(0x1cf)]('weatherunderground'))_0x52bd4a=_0x31a3db+_0x187d32(0x124);}}}if(_0x52bd4a){const _0x140c4e=await _0x171adf[_0x187d32(0x14f)](_0x52bd4a);if(_0x140c4e&&_0x140c4e[_0x187d32(0x24c)]!==undefined&&_0x140c4e['val']!==null)return parseFloat(_0x140c4e[_0x187d32(0x24c)]);}}catch(_0x35c54f){}return null;}async function recordSequence(_0x50a21e,_0x79711f){const _0x396eb6=a0_0x3fd6c8,_0x2204ba=(_0x79711f[_0x396eb6(0x257)]||'')[_0x396eb6(0x20b)](),_0x12e1c3=[_0x396eb6(0x1c5),'bewegung','prÃ¤senz',_0x396eb6(0x217),'occupancy',_0x396eb6(0x115),_0x396eb6(0x197),_0x396eb6(0x14c),_0x396eb6(0x1d7),_0x396eb6(0x220),_0x396eb6(0x178),_0x396eb6(0x263),_0x396eb6(0x15b),_0x396eb6(0x105),_0x396eb6(0x280),_0x396eb6(0x2a1),_0x396eb6(0x24f)];if(!_0x12e1c3[_0x396eb6(0x23b)](_0xd201a=>_0x2204ba[_0x396eb6(0x1cf)](_0xd201a)))return;if(!_0x79711f[_0x396eb6(0x1ac)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x396eb6(0x19d)]({'loc':_0x79711f[_0x396eb6(0x233)]||'Unknown','id':_0x79711f['id'],'ts':Date[_0x396eb6(0x112)]()}),sequenceTimer=setTimeout(async()=>{const _0x2b086d=_0x396eb6;if(activeSequence[_0x2b086d(0x24d)]>0x1)await saveCompletedSequence(_0x50a21e);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x98b822){const _0x2f7882=a0_0x3fd6c8;try{const _0x1d51a4=await _0x98b822[_0x2f7882(0x26c)](_0x2f7882(0x229));let _0x178f5f=[];if(_0x1d51a4&&_0x1d51a4[_0x2f7882(0x24c)])try{_0x178f5f=JSON['parse'](_0x1d51a4[_0x2f7882(0x24c)]);}catch(_0x4f701c){}const _0xb56f6b=activeSequence[0x0]['ts'],_0x171a9b=activeSequence[_0x2f7882(0x103)](_0x36175f=>({'loc':_0x36175f[_0x2f7882(0x10a)],'t_delta':Math[_0x2f7882(0x1bd)]((_0x36175f['ts']-_0xb56f6b)/0x3e8)})),_0x5848e4={'timestamp':new Date(_0xb56f6b)[_0x2f7882(0x1c2)](),'steps':_0x171a9b,'duration':Math[_0x2f7882(0x1bd)]((activeSequence[activeSequence[_0x2f7882(0x24d)]-0x1]['ts']-_0xb56f6b)/0x3e8),'daytime':new Date(_0xb56f6b)[_0x2f7882(0x25d)]()};_0x178f5f['push'](_0x5848e4);if(_0x178f5f[_0x2f7882(0x24d)]>MAX_TRAINING_SET_SIZE)_0x178f5f['shift']();await _0x98b822[_0x2f7882(0x294)](_0x2f7882(0x229),{'val':JSON[_0x2f7882(0x246)](_0x178f5f),'ack':!![]}),runSecurityCheck(_0x98b822,_0x5848e4);}catch(_0x4fe1ec){_0x98b822[_0x2f7882(0x16d)][_0x2f7882(0x238)](_0x2f7882(0x132)+_0x4fe1ec['message']);}}function runSecurityCheck(_0x16522a,_0x5deee9){const _0x24f0d3=a0_0x3fd6c8;if(!_0x16522a['isProVersion'])return;sendToPython(_0x16522a,_0x24f0d3(0x1ce),{'sequence':_0x5deee9});}async function createDailyDigest(_0x444a17){const _0x560ada=a0_0x3fd6c8;if(!_0x444a17['isProVersion'])return;await _0x444a17['setStateAsync'](LTM_DP_STATUS,{'val':_0x560ada(0x215),'ack':!![]});if(!_0x444a17['geminiModel']||_0x444a17[_0x560ada(0x16e)][_0x560ada(0x24d)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x444a17[_0x560ada(0x294)](LTM_DP_STATUS,{'val':_0x560ada(0x275),'ack':!![]});return;}const _0x82738d=JSON['parse'](JSON[_0x560ada(0x246)](_0x444a17['rawEventLog'])),_0x280b09=_0x82738d[_0x560ada(0x24d)],_0x4062ee='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON['stringify'](_0x82738d);try{const _0x31266b=await _0x444a17[_0x560ada(0x1cc)][_0x560ada(0x13b)](_0x4062ee),_0xd27935=JSON[_0x560ada(0x127)](_0x31266b[_0x560ada(0x1e7)][_0x560ada(0x192)]()[_0x560ada(0x131)](/```json|```/g,'')[_0x560ada(0x170)]()),_0x291184={'timestamp':new Date()[_0x560ada(0x1c2)](),'eventCount':_0x280b09,'summary':_0xd27935['summary']||_0x560ada(0x186),'activityLevel':_0xd27935['activityLevel']||_0x560ada(0x160),'systemMode':_0x444a17[_0x560ada(0x1ea)]};_0x444a17[_0x560ada(0x269)][_0x560ada(0x19d)](_0x291184),await saveDailyDigests(_0x444a17),_0x444a17[_0x560ada(0x16e)]=[],await saveRawEventLog(_0x444a17),await _0x444a17[_0x560ada(0x294)](LTM_DP_STATUS,{'val':_0x560ada(0x1cb),'ack':!![]});if(_0x444a17[_0x560ada(0x15f)])sendToPython(_0x444a17,_0x560ada(0x167),{'digest':_0x291184});}catch(_0x96ca5b){_0x444a17[_0x560ada(0x16d)][_0x560ada(0x238)](_0x96ca5b[_0x560ada(0x182)]);}}async function runBaselineDriftAnalysis(_0x162e4e){const _0x10a647=a0_0x3fd6c8;if(!_0x162e4e[_0x10a647(0x15f)]||!_0x162e4e[_0x10a647(0x1cc)])return;const _0x98126f=_0x162e4e[_0x10a647(0x2a3)][_0x10a647(0x242)]||0xe;if(_0x162e4e['dailyDigests'][_0x10a647(0x24d)]<_0x98126f+0x7){await _0x162e4e[_0x10a647(0x294)](LTM_DP_DRIFT_STATUS,{'val':_0x10a647(0x1fb),'ack':!![]});return;}const _0x225b34=_0x162e4e[_0x10a647(0x269)][_0x10a647(0x1c1)](-_0x98126f),_0x8b1d51=_0x162e4e[_0x10a647(0x269)][_0x10a647(0x1c1)](0x0,_0x162e4e['dailyDigests'][_0x10a647(0x24d)]-_0x98126f),_0x2cdff9='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON['stringify'](_0x8b1d51)+_0x10a647(0x291)+JSON[_0x10a647(0x246)](_0x225b34);try{const _0x20849f=await _0x162e4e['geminiModel'][_0x10a647(0x13b)](_0x2cdff9),_0xb2ee4=JSON[_0x10a647(0x127)](_0x20849f[_0x10a647(0x1e7)]['text']()[_0x10a647(0x131)](/```json|```/g,'')['trim']());_0xb2ee4['baselineDrift']&&(await _0x162e4e[_0x10a647(0x294)](LTM_DP_DRIFT_STATUS,{'val':_0xb2ee4[_0x10a647(0x16a)],'ack':!![]}),await _0x162e4e['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0xb2ee4[_0x10a647(0x157)],'ack':!![]}),await _0x162e4e[_0x10a647(0x294)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0x5607ca){}}async function sendMorningBriefing(_0x191ea2){const _0x3e239a=a0_0x3fd6c8;if(!_0x191ea2[_0x3e239a(0x1cc)])return;try{const _0x2f2a50=_0x3e239a(0x130),_0x4b8cc2=await _0x191ea2[_0x3e239a(0x1cc)]['generateContent'](_0x2f2a50),_0x3a73cf=_0x4b8cc2['response'][_0x3e239a(0x192)]();sendNotification(_0x191ea2,_0x3e239a(0x256)+_0x3a73cf);}catch(_0x1b2092){_0x191ea2[_0x3e239a(0x16d)][_0x3e239a(0x238)](_0x3e239a(0x1ca)+_0x1b2092[_0x3e239a(0x182)]);}}function stopPythonService(_0x3470a1){const _0x24854f=a0_0x3fd6c8;if(_0x3470a1[_0x24854f(0x21b)]){try{_0x3470a1[_0x24854f(0x21b)][_0x24854f(0x28c)]();}catch(_0x1b8968){}_0x3470a1[_0x24854f(0x21b)]=null;}}function sendToPython(_0xdc0b7c,_0x483725,_0x14af54={}){const _0x468527=a0_0x3fd6c8;if(!_0xdc0b7c['pythonProcess']||!_0xdc0b7c[_0x468527(0x21b)][_0x468527(0x247)][_0x468527(0x10f)])return;const _0x5b7967=JSON[_0x468527(0x246)]({'command':_0x483725,..._0x14af54});try{_0xdc0b7c['pythonProcess'][_0x468527(0x247)][_0x468527(0x26a)](_0x5b7967+'\x0a');}catch(_0x404fa6){}}function runPythonHealthCheck(_0x132fca){const _0x154d11=a0_0x3fd6c8;if(!_0x132fca[_0x154d11(0x269)]||_0x132fca[_0x154d11(0x269)]['length']<0x2)return;const _0x5c933e=_0x132fca[_0x154d11(0x269)]['map'](_0xe7b6c9=>{const _0x26b3a7=_0x154d11,_0x50ee41=(_0xe7b6c9[_0x26b3a7(0x15e)]||'')[_0x26b3a7(0x20b)]();return ACTIVITY_LEVEL_MAP[_0x50ee41]||0x32;});sendToPython(_0x132fca,_0x154d11(0x234),{'values':_0x5c933e,'tag':_0x154d11(0x1c9)});}function handlePythonResult(_0x49e4e6,_0x7c5f8e){const _0x545b84=a0_0x3fd6c8;if(_0x7c5f8e[_0x545b84(0x257)]==='PONG')_0x49e4e6[_0x545b84(0x16d)][_0x545b84(0x1b3)](_0x545b84(0x1e5));else{if(_0x7c5f8e[_0x545b84(0x257)]===_0x545b84(0x1de)){const {anomaly_score:_0x313779,is_anomaly:_0x37ecbd,threshold:_0x4334de,explanation:_0x472a76}=_0x7c5f8e[_0x545b84(0x169)];_0x49e4e6[_0x545b84(0x16d)]['info'](_0x545b84(0x148)+_0x313779[_0x545b84(0x248)](0x5)+'\x20->\x20'+(_0x37ecbd?_0x545b84(0x17a):'OK')),_0x49e4e6[_0x545b84(0x294)](_0x545b84(0x176),{'val':_0x313779,'ack':!![]}),_0x49e4e6['setStateAsync'](_0x545b84(0x28d),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x4334de)_0x49e4e6[_0x545b84(0x294)](_0x545b84(0x244),{'val':_0x4334de,'ack':!![]});if(_0x37ecbd){let _0x4ec408=_0x545b84(0x216)+_0x313779[_0x545b84(0x248)](0x4)+')';if(_0x472a76&&_0x472a76!==_0x545b84(0x11e))_0x4ec408+='\x0aGrund:\x20'+_0x472a76;_0x49e4e6[_0x545b84(0x294)](_0x545b84(0x140),{'val':!![],'ack':!![]}),_0x49e4e6[_0x545b84(0x294)](_0x545b84(0x278),{'val':_0x4ec408,'ack':!![]}),sendNotification(_0x49e4e6,_0x545b84(0x253)+_0x4ec408,![],!![]);}}else{if(_0x7c5f8e[_0x545b84(0x257)]==='TRAINING_COMPLETE'){const _0x1c2a29=_0x7c5f8e[_0x545b84(0x169)]['details']||'',_0x5f02bc=_0x7c5f8e['payload'][_0x545b84(0x270)],_0x5c600c=_0x7c5f8e[_0x545b84(0x169)][_0x545b84(0x1aa)]?_0x545b84(0x1be)+new Date()[_0x545b84(0x1f8)]()+'\x20('+_0x1c2a29+')':_0x545b84(0x121)+_0x7c5f8e[_0x545b84(0x169)]['reason'];_0x49e4e6[_0x545b84(0x294)](_0x545b84(0x277),{'val':_0x5c600c,'ack':!![]});if(_0x7c5f8e[_0x545b84(0x169)][_0x545b84(0x1aa)]&&_0x5f02bc)_0x49e4e6[_0x545b84(0x294)](_0x545b84(0x244),{'val':_0x5f02bc,'ack':!![]});}else{if(_0x7c5f8e[_0x545b84(0x257)]===_0x545b84(0x21e)){const {patterns:_0x5665db}=_0x7c5f8e[_0x545b84(0x169)];if(_0x5665db&&_0x5665db[_0x545b84(0x24d)]>0x0){_0x49e4e6[_0x545b84(0x16d)][_0x545b84(0x267)](_0x545b84(0x106)+_0x5665db['length']+_0x545b84(0x26d)),_0x49e4e6[_0x545b84(0x294)](_0x545b84(0x125),{'val':JSON[_0x545b84(0x246)](_0x5665db),'ack':!![]});const _0x10c439=_0x5665db[0x0],_0x51a900='Regel\x20erkannt:\x20'+_0x10c439[_0x545b84(0x126)]+'\x20('+(_0x10c439[_0x545b84(0x18c)]*0x64)[_0x545b84(0x248)](0x0)+'%)';_0x49e4e6['setStateAsync'](_0x545b84(0x19a),{'val':!![],'ack':!![]}),_0x49e4e6[_0x545b84(0x294)](_0x545b84(0x193),{'val':_0x51a900,'ack':!![]});}else _0x49e4e6[_0x545b84(0x16d)][_0x545b84(0x267)](_0x545b84(0x12d)),_0x49e4e6[_0x545b84(0x294)](_0x545b84(0x19a),{'val':![],'ack':!![]}),_0x49e4e6['setStateAsync']('analysis.automation.detectedPatterns',{'val':'[]','ack':!![]});}else{if(_0x7c5f8e['type']==='ENERGY_TRAIN_RESULT'){if(_0x7c5f8e[_0x545b84(0x169)][_0x545b84(0x1aa)])try{const _0x2786f0=JSON[_0x545b84(0x127)](_0x7c5f8e[_0x545b84(0x169)][_0x545b84(0x297)]);if(_0x2786f0['insulation'])_0x49e4e6[_0x545b84(0x294)](_0x545b84(0x2a4),{'val':JSON[_0x545b84(0x246)](_0x2786f0['insulation']),'ack':!![]});if(_0x2786f0[_0x545b84(0x118)])_0x49e4e6['setStateAsync'](_0x545b84(0x191),{'val':JSON[_0x545b84(0x246)](_0x2786f0[_0x545b84(0x118)]),'ack':!![]});}catch(_0x157bdc){}}else{if(_0x7c5f8e[_0x545b84(0x257)]===_0x545b84(0x27a)){if(_0x7c5f8e[_0x545b84(0x169)][_0x545b84(0x1aa)])_0x49e4e6['log'][_0x545b84(0x267)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x7c5f8e[_0x545b84(0x257)]==='HEALTH_RESULT')_0x49e4e6[_0x545b84(0x294)](_0x545b84(0x16f),{'val':new Date()[_0x545b84(0x1c2)](),'ack':!![]}),_0x49e4e6[_0x545b84(0x294)]('analysis.health.isAnomaly',{'val':_0x7c5f8e[_0x545b84(0x169)][_0x545b84(0x205)],'ack':!![]});else{if(_0x7c5f8e[_0x545b84(0x257)]===_0x545b84(0x171))_0x49e4e6['setStateAsync']('analysis.health.trendDiagnosis',{'val':_0x7c5f8e[_0x545b84(0x169)][_0x545b84(0x12c)],'ack':!![]}),_0x49e4e6['setStateAsync'](_0x545b84(0x22d),{'val':_0x7c5f8e[_0x545b84(0x169)]['change_percent'],'ack':!![]});else{if(_0x7c5f8e[_0x545b84(0x257)]===_0x545b84(0x12e)){const {speed_trend:_0x7c44c5}=_0x7c5f8e['payload'];if(_0x7c44c5!==undefined)_0x49e4e6['setStateAsync'](_0x545b84(0x153),{'val':_0x7c44c5,'ack':!![]});}else{if(_0x7c5f8e[_0x545b84(0x257)]===_0x545b84(0x198)){const {forecast:_0x140b2b}=_0x7c5f8e[_0x545b84(0x169)];if(_0x140b2b)_0x49e4e6[_0x545b84(0x294)]('analysis.energy.forecast',{'val':JSON[_0x545b84(0x246)](_0x140b2b),'ack':!![]});}else{if(_0x7c5f8e[_0x545b84(0x257)]===_0x545b84(0x1bc)){const {data:_0x551d92}=_0x7c5f8e[_0x545b84(0x169)];_0x551d92&&(_0x49e4e6['log'][_0x545b84(0x267)]('ðŸ•¸ï¸\x20Topology\x20Map\x20updated.'),_0x49e4e6['setStateAsync'](_0x545b84(0x224),{'val':JSON[_0x545b84(0x246)](_0x551d92),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x255e43){const _0x1b9ec8=a0_0x3fd6c8;let _0x510a8b=_0x1b9ec8(0x1dc);if(fs[_0x1b9ec8(0x1ba)](installer[_0x1b9ec8(0x237)]))_0x510a8b=installer['PYTHON_EXE'];try{const _0xec7b3c=path[_0x1b9ec8(0x17c)](__dirname,'python_service',_0x1b9ec8(0x292));_0x255e43[_0x1b9ec8(0x21b)]=spawn(_0x510a8b,[_0xec7b3c]),_0x255e43[_0x1b9ec8(0x21b)][_0x1b9ec8(0x108)]['on'](_0x1b9ec8(0x1ad),_0x539df4=>{const _0x420dcd=_0x1b9ec8,_0x2b18ed=_0x539df4[_0x420dcd(0x268)]()[_0x420dcd(0x173)]('\x0a');_0x2b18ed[_0x420dcd(0x240)](_0xab70c=>{const _0x278543=_0x420dcd,_0x167470=_0xab70c[_0x278543(0x170)]();if(!_0x167470)return;if(_0x167470['startsWith'](_0x278543(0x18f)))_0x255e43[_0x278543(0x16d)][_0x278543(0x1b3)](_0x278543(0x20d)+_0x167470[_0x278543(0x13a)](0x5)[_0x278543(0x170)]());else{if(_0x167470[_0x278543(0x104)](_0x278543(0x221)))try{const _0x396db4=JSON[_0x278543(0x127)](_0x167470[_0x278543(0x13a)](0x8)[_0x278543(0x170)]());handlePythonResult(_0x255e43,_0x396db4);}catch(_0x3f827e){}}});}),_0x255e43[_0x1b9ec8(0x21b)]['on']('close',_0x48fbdd=>{const _0x589fd2=_0x1b9ec8;_0x255e43[_0x589fd2(0x21b)]=null;});}catch(_0x1927b1){_0x255e43[_0x1b9ec8(0x16d)][_0x1b9ec8(0x238)](_0x1b9ec8(0x188)+_0x1927b1[_0x1b9ec8(0x182)]);}}async function runAutopilot(_0x383328){const _0x4dc4a2=a0_0x3fd6c8;_0x383328[_0x4dc4a2(0x16d)][_0x4dc4a2(0x1b3)](_0x4dc4a2(0x1db)),await runGeminiAnalysis(_0x383328),updateHealthVector(_0x383328),triggerGaitAnalysis(_0x383328),triggerEnergyPrediction(_0x383328);}async function triggerGaitAnalysis(_0x5611a5){const _0x4f0ae1=a0_0x3fd6c8;if(!_0x5611a5[_0x4f0ae1(0x15f)])return;try{const _0x2576c8=await _0x5611a5[_0x4f0ae1(0x26c)](_0x4f0ae1(0x229));_0x2576c8&&_0x2576c8[_0x4f0ae1(0x24c)]&&sendToPython(_0x5611a5,_0x4f0ae1(0x29b),{'sequences':JSON[_0x4f0ae1(0x127)](_0x2576c8[_0x4f0ae1(0x24c)])});}catch(_0x1126e7){}}async function triggerEnergyPrediction(_0x34e6e7){const _0x296090=a0_0x3fd6c8;if(!_0x34e6e7[_0x296090(0x15f)])return;try{const _0x24f86e=await getOutsideTemperatureNumeric(_0x34e6e7);if(_0x24f86e===null)return;const _0x4b5cab={},_0x457784=_0x34e6e7[_0x296090(0x2a3)][_0x296090(0x273)]||[];for(const _0x2cea56 of _0x457784){if(_0x2cea56[_0x296090(0x257)]===_0x296090(0x181)&&_0x2cea56[_0x296090(0x233)]){const _0x54d2b4=_0x34e6e7['sensorLastValues'][_0x2cea56['id']];if(_0x54d2b4!==undefined)_0x4b5cab[_0x2cea56[_0x296090(0x233)]]=_0x54d2b4;}}Object[_0x296090(0x13c)](_0x4b5cab)[_0x296090(0x24d)]>0x0&&sendToPython(_0x34e6e7,_0x296090(0x298),{'current_temps':_0x4b5cab,'t_out':_0x24f86e});}catch(_0x118157){}}function updateHealthVector(_0x312d6e){const _0x1a8357=a0_0x3fd6c8;if(!_0x312d6e['rawEventLog']||_0x312d6e[_0x1a8357(0x16e)][_0x1a8357(0x24d)]===0x0)return;const _0x3194cd=new Array(0x60)[_0x1a8357(0x241)](0x0),_0x25a08f=new Date()[_0x1a8357(0x252)](0x0,0x0,0x0,0x0);_0x312d6e[_0x1a8357(0x16e)][_0x1a8357(0x240)](_0x304b46=>{const _0x3f5f6c=_0x1a8357,_0x1991b0=new Date(_0x304b46[_0x3f5f6c(0x1a9)]);if(_0x1991b0['getTime']()>=_0x25a08f){const _0x2d0119=_0x1991b0[_0x3f5f6c(0x25d)](),_0x35ea0e=_0x1991b0[_0x3f5f6c(0x151)](),_0x8470f7=_0x2d0119*0x4+Math[_0x3f5f6c(0x25b)](_0x35ea0e/0xf);if(_0x8470f7>=0x0&&_0x8470f7<0x60)_0x3194cd[_0x8470f7]++;}}),_0x312d6e[_0x1a8357(0x294)](_0x1a8357(0x260),{'val':JSON[_0x1a8357(0x246)](_0x3194cd),'ack':!![]});}async function getWeatherContext(_0x4c4451){const _0x227398=a0_0x3fd6c8;if(!_0x4c4451[_0x227398(0x2a3)][_0x227398(0x22f)]||!_0x4c4451[_0x227398(0x2a3)][_0x227398(0x219)])return _0x227398(0x25f);try{const _0x14c263=_0x4c4451['config'][_0x227398(0x219)];let _0xb943d5=await _0x4c4451[_0x227398(0x14f)](_0x14c263+_0x227398(0x17b));if(!_0xb943d5)_0xb943d5=await _0x4c4451[_0x227398(0x14f)](_0x14c263+'.forecast.current.temperature');let _0x4a631f=await _0x4c4451[_0x227398(0x14f)](_0x14c263+_0x227398(0x243));if(!_0x4a631f)_0x4a631f=await _0x4c4451['getForeignStateAsync'](_0x14c263+_0x227398(0x12a));if(_0xb943d5&&_0x4a631f)return _0xb943d5[_0x227398(0x24c)]+_0x227398(0x1c0)+_0x4a631f[_0x227398(0x24c)];}catch(_0xbd32a9){}return _0x227398(0x1d0);}async function getCalendarContext(_0x31d9b1){const _0x4ab331=a0_0x3fd6c8;if(!_0x31d9b1['config'][_0x4ab331(0x174)]||!_0x31d9b1[_0x4ab331(0x2a3)][_0x4ab331(0x11d)])return _0x4ab331(0x22b);return _0x4ab331(0x25a);}async function getCalendarNames(_0x11b5a7,_0x100663){return[];}async function saveFeedback(_0x13d917,_0x686ddf){const _0x4ebc1c=a0_0x3fd6c8;_0x13d917[_0x4ebc1c(0x16d)][_0x4ebc1c(0x267)](_0x4ebc1c(0x235)+_0x686ddf['rating']);}async function runGeminiAnalysis(_0x260249,_0x2fd33c=''){const _0xa5500=a0_0x3fd6c8;if(!_0x260249['geminiModel'])return;if(_0x260249[_0xa5500(0x141)]['length']===0x0)return;const _0x485d35=_0x260249[_0xa5500(0x141)][_0xa5500(0x1c1)](0x0,0xf),_0x3714e7=await getWeatherContext(_0x260249),_0xf01aa4=_0x260249[_0xa5500(0x1ea)],_0x40ed19=PERSONA_MAPPING[_0x260249[_0xa5500(0x2a3)][_0xa5500(0x102)]||_0xa5500(0x27f)],_0x39e1a3=_0x260249[_0xa5500(0x2a3)][_0xa5500(0x1b8)]||_0xa5500(0x109);let _0x38bf4e=_0xa5500(0x1e4);try{const _0x19a4fb=await _0x260249[_0xa5500(0x26c)](_0xa5500(0x285));if(_0x19a4fb&&_0x19a4fb['val'])_0x38bf4e=_0x19a4fb['val'];}catch(_0xd773a9){}let _0x2f3d12=![];try{const _0x3b304f=await _0x260249[_0xa5500(0x26c)]('analysis.automation.autoApply');if(_0x3b304f&&_0x3b304f[_0xa5500(0x24c)])_0x2f3d12=!![];}catch(_0x3f4cdf){}const _0x23ca7c=_0xa5500(0x149)+_0x40ed19+_0xa5500(0x261)+_0x39e1a3+_0xa5500(0x1a7)+_0xf01aa4+_0xa5500(0x299)+_0x3714e7+_0xa5500(0x12f)+_0x38bf4e+_0xa5500(0x2a2)+JSON['stringify'](_0x485d35)+_0xa5500(0x1ec)+_0x2fd33c+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0x306dd3=await _0x260249[_0xa5500(0x1cc)][_0xa5500(0x13b)](_0x23ca7c),_0x121b1d=JSON[_0xa5500(0x127)](_0x306dd3[_0xa5500(0x1e7)]['text']()[_0xa5500(0x131)](/```json|```/g,'')['trim']());await _0x260249[_0xa5500(0x294)](_0xa5500(0x190),{'val':JSON[_0xa5500(0x246)](_0x121b1d),'ack':!![]});if(_0x121b1d['summary'])await _0x260249['setStateAsync'](_0xa5500(0x11a),{'val':_0x121b1d['summary'],'ack':!![]});const _0x3c0be3={'timestamp':Date[_0xa5500(0x112)](),'id':Date[_0xa5500(0x112)]()[_0xa5500(0x268)](),'analysis':{'activity':{'summary':_0x121b1d['summary'],'isAlert':_0x121b1d[_0xa5500(0x26b)],'alertReason':_0x121b1d['alertReason']},'comfort':{'automationProposal':_0x121b1d[_0xa5500(0x29d)]}}};await updateAnalysisHistory(_0x260249,_0x3c0be3);const _0x5332d8=_0x121b1d['isAlert']||![];_0x5332d8!==_0x260249[_0xa5500(0x1ae)]&&(await _0x260249['setStateAsync']('analysis.isAlert',{'val':_0x5332d8,'ack':!![]}),_0x260249['lastAlertState']=_0x5332d8,_0x5332d8&&(await _0x260249['setStateAsync'](_0xa5500(0x278),{'val':_0x121b1d[_0xa5500(0x1b4)],'ack':!![]}),sendNotification(_0x260249,_0xa5500(0x26e)+_0x121b1d[_0xa5500(0x1b4)],![],_0x121b1d[_0xa5500(0x249)])));if(_0x121b1d[_0xa5500(0x29d)]&&_0x121b1d[_0xa5500(0x29d)][_0xa5500(0x282)]){await _0x260249[_0xa5500(0x294)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x260249['setStateAsync'](_0xa5500(0x193),{'val':_0x121b1d[_0xa5500(0x29d)][_0xa5500(0x1f7)],'ack':!![]}),await _0x260249['setStateAsync']('analysis.automation.targetId',{'val':_0x121b1d['automationProposal'][_0xa5500(0x1d6)],'ack':!![]}),await _0x260249['setStateAsync']('analysis.automation.targetValue',{'val':JSON[_0xa5500(0x246)](_0x121b1d['automationProposal'][_0xa5500(0x1bf)]),'ack':!![]});if(_0x2f3d12)executeAutomationAction(_0x260249);}}catch(_0x2dc7c5){_0x260249[_0xa5500(0x16d)][_0xa5500(0x238)](_0xa5500(0x27c)+_0x2dc7c5[_0xa5500(0x182)]);}}function a0_0x1d8e(_0x375190,_0x36decc){const _0xa96bb7=a0_0x11a2();return a0_0x1d8e=function(_0x4529f9,_0x31be5d){_0x4529f9=_0x4529f9-0xff;let _0x11a2d5=_0xa96bb7[_0x4529f9];return _0x11a2d5;},a0_0x1d8e(_0x375190,_0x36decc);}async function startSystem(_0x1dfa0f){const _0x5aa8aa=a0_0x3fd6c8;_0x1dfa0f[_0x5aa8aa(0x16d)][_0x5aa8aa(0x267)]('ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...'),await initZombies(_0x1dfa0f);try{_0x1dfa0f[_0x5aa8aa(0x15f)]=await checkLicense(_0x1dfa0f[_0x5aa8aa(0x2a3)][_0x5aa8aa(0x114)]);}catch(_0x42f9a6){}if(!_0x1dfa0f[_0x5aa8aa(0x2a3)][_0x5aa8aa(0x134)]||_0x1dfa0f[_0x5aa8aa(0x2a3)]['inactivityThresholdHours']<0.1)_0x1dfa0f[_0x5aa8aa(0x2a3)]['inactivityThresholdHours']=0xc;await initHistory(_0x1dfa0f),await initSystemConfig(_0x1dfa0f);if(_0x1dfa0f[_0x5aa8aa(0x2a3)][_0x5aa8aa(0x165)])try{_0x1dfa0f[_0x5aa8aa(0x18d)]=new GoogleGenerativeAI(_0x1dfa0f[_0x5aa8aa(0x2a3)]['geminiApiKey']),_0x1dfa0f['geminiModel']=_0x1dfa0f['genAI']['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),_0x1dfa0f['log'][_0x5aa8aa(0x267)](_0x5aa8aa(0x21f));}catch(_0x1d652b){_0x1dfa0f[_0x5aa8aa(0x16d)][_0x5aa8aa(0x238)](_0x5aa8aa(0x1e1)+_0x1d652b[_0x5aa8aa(0x182)]);}await createAllObjects(_0x1dfa0f),await loadSystemMode(_0x1dfa0f),await loadRawEventLog(_0x1dfa0f),await loadDailyDigests(_0x1dfa0f),_0x1dfa0f[_0x5aa8aa(0x1f9)](_0x5aa8aa(0x147)),_0x1dfa0f['subscribeStates'](LTM_DP_TRIGGER_DIGEST),_0x1dfa0f[_0x5aa8aa(0x1f9)](_0x5aa8aa(0x251)),_0x1dfa0f['subscribeStates'](_0x5aa8aa(0x259)),_0x1dfa0f['subscribeStates'](_0x5aa8aa(0x22e)),_0x1dfa0f['subscribeStates']('analysis.automation.autoApply'),_0x1dfa0f[_0x5aa8aa(0x1f9)](_0x5aa8aa(0x14a)),_0x1dfa0f['subscribeStates'](_0x5aa8aa(0x1a0)),_0x1dfa0f[_0x5aa8aa(0x1f9)](_0x5aa8aa(0x154)),_0x1dfa0f[_0x5aa8aa(0x1f9)](_0x5aa8aa(0x211)),_0x1dfa0f[_0x5aa8aa(0x1f9)](_0x5aa8aa(0x1a5)),await initSensorSubscriptions(_0x1dfa0f),await initPresenceSubscriptions(_0x1dfa0f),await setupTelegramListener(_0x1dfa0f),setTimeout(()=>checkWifiPresence(_0x1dfa0f),0x1388);if(_0x1dfa0f['analysisTimer'])clearInterval(_0x1dfa0f['analysisTimer']);const _0x12b65a=_0x1dfa0f[_0x5aa8aa(0x2a3)]['analysisInterval']||0xf;_0x12b65a>0x0&&(_0x1dfa0f[_0x5aa8aa(0x290)]=setInterval(()=>{runAutopilot(_0x1dfa0f);},_0x12b65a*0x3c*0x3e8)),schedulers[_0x5aa8aa(0x21c)](_0x1dfa0f,()=>createDailyDigest(_0x1dfa0f)),schedulers[_0x5aa8aa(0x295)](_0x1dfa0f),schedulers[_0x5aa8aa(0x1a2)](_0x1dfa0f,()=>runBaselineDriftAnalysis(_0x1dfa0f)),schedulers[_0x5aa8aa(0x15a)](_0x1dfa0f,()=>sendMorningBriefing(_0x1dfa0f)),startPythonService(_0x1dfa0f),setTimeout(()=>{const _0x36d3a4=_0x5aa8aa;_0x1dfa0f[_0x36d3a4(0x21b)]&&(runPythonHealthCheck(_0x1dfa0f),triggerGaitAnalysis(_0x1dfa0f),triggerEnergyPrediction(_0x1dfa0f)),updateHealthVector(_0x1dfa0f);},0x1388);}class CogniLiving extends utils['Adapter']{constructor(_0x15846a){const _0x56e358=a0_0x3fd6c8;super({..._0x15846a,'name':_0x56e358(0x201)}),this['eventHistory']=[],this[_0x56e358(0x137)]=[],this['rawEventLog']=[],this[_0x56e358(0x269)]=[],this['sensorLastValues']={},this[_0x56e358(0x13f)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x56e358(0x11b)]=!![],this[_0x56e358(0x17e)]=null,this[_0x56e358(0x1ff)]=null,this[_0x56e358(0x25c)]=![],this[_0x56e358(0x18d)]=null,this[_0x56e358(0x1cc)]=null,this['currentSystemMode']=SYSTEM_MODES[_0x56e358(0x222)],this[_0x56e358(0x15f)]=![],this['lastAlertState']=![],this[_0x56e358(0x286)]=_0x56e358(0x210),this[_0x56e358(0x290)]=null,this['ltmJob']=null,this[_0x56e358(0x274)]=null,this[_0x56e358(0x1c3)]=null,this[_0x56e358(0x24a)]=null,this[_0x56e358(0x21b)]=null,this['dependencyInstallInProgress']=![],this['on']('ready',this['onReady'][_0x56e358(0x122)](this)),this['on']('stateChange',this[_0x56e358(0x19c)][_0x56e358(0x122)](this)),this['on']('unload',this[_0x56e358(0x208)][_0x56e358(0x122)](this)),this['on'](_0x56e358(0x182),this[_0x56e358(0x1b5)][_0x56e358(0x122)](this));}async[a0_0x3fd6c8(0x23d)](){const _0x3a70d3=a0_0x3fd6c8;this[_0x3a70d3(0x16d)]['info'](_0x3a70d3(0x1a1)+this[_0x3a70d3(0x1d2)]+_0x3a70d3(0x177));if(!installer[_0x3a70d3(0x266)](this,()=>startSystem(this)))return;}[a0_0x3fd6c8(0x208)](_0x2e2d6b){const _0x1b130b=a0_0x3fd6c8;if(this['analysisTimer'])clearInterval(this[_0x1b130b(0x290)]);if(this['driftAnalysisTimer'])clearInterval(this[_0x1b130b(0x1c3)]);if(this[_0x1b130b(0x1b1)])this[_0x1b130b(0x1b1)][_0x1b130b(0x21d)]();if(this[_0x1b130b(0x274)])this[_0x1b130b(0x274)][_0x1b130b(0x21d)]();if(this[_0x1b130b(0x24a)])this[_0x1b130b(0x24a)]['cancel']();if(this[_0x1b130b(0x17e)])clearTimeout(this[_0x1b130b(0x17e)]);if(this[_0x1b130b(0x1ff)])clearTimeout(this[_0x1b130b(0x1ff)]);stopPythonService(this),_0x2e2d6b();}async[a0_0x3fd6c8(0x19c)](_0x3d33d8,_0x41666e){const _0x2ca8b4=a0_0x3fd6c8;if(!_0x41666e||this[_0x2ca8b4(0x28e)])return;if(_0x3d33d8[_0x2ca8b4(0x1cf)](_0x2ca8b4(0x16c))&&_0x3d33d8['endsWith'](_0x2ca8b4(0x1af))&&_0x41666e[_0x2ca8b4(0x24c)]){await handleTelegramResponse(this,_0x41666e['val']);return;}if(_0x3d33d8===this[_0x2ca8b4(0x23a)]+'.'+SYSTEM_DP_MODE){if(_0x41666e[_0x2ca8b4(0x24c)]&&Object[_0x2ca8b4(0x284)](SYSTEM_MODES)[_0x2ca8b4(0x1cf)](_0x41666e[_0x2ca8b4(0x24c)])){this[_0x2ca8b4(0x1ea)]=_0x41666e[_0x2ca8b4(0x24c)];if(_0x41666e[_0x2ca8b4(0x24c)]===SYSTEM_MODES[_0x2ca8b4(0x22a)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x41666e[_0x2ca8b4(0xff)])this['setState'](_0x3d33d8,{'val':this[_0x2ca8b4(0x1ea)],'ack':!![]});return;}if(!_0x41666e['ack']){_0x3d33d8[_0x2ca8b4(0x1cf)](_0x2ca8b4(0x147))&&_0x41666e['val']&&(this['setState'](_0x3d33d8,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x3d33d8[_0x2ca8b4(0x1cf)](_0x2ca8b4(0x200))&&_0x41666e[_0x2ca8b4(0x24c)]){this[_0x2ca8b4(0x24e)](_0x3d33d8,{'val':![],'ack':!![]});if(this['isProVersion'])createDailyDigest(this);}_0x3d33d8[_0x2ca8b4(0x1cf)](_0x2ca8b4(0x1cd))&&_0x41666e[_0x2ca8b4(0x24c)]&&(this[_0x2ca8b4(0x24e)](_0x3d33d8,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x3d33d8['includes'](_0x2ca8b4(0x281))&&_0x41666e[_0x2ca8b4(0x24c)]&&(this['setState'](_0x3d33d8,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x3d33d8[_0x2ca8b4(0x1cf)](_0x2ca8b4(0x14a))&&_0x41666e[_0x2ca8b4(0x24c)]){this[_0x2ca8b4(0x24e)](_0x3d33d8,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0xd356a4=await this[_0x2ca8b4(0x26c)](_0x2ca8b4(0x229));if(_0xd356a4&&_0xd356a4[_0x2ca8b4(0x24c)]){const _0x38d7d3=JSON[_0x2ca8b4(0x127)](_0xd356a4[_0x2ca8b4(0x24c)]);this[_0x2ca8b4(0x16d)][_0x2ca8b4(0x267)](_0x2ca8b4(0x1e6)),this[_0x2ca8b4(0x294)]('analysis.training.status',{'val':_0x2ca8b4(0x1e3),'ack':!![]}),sendToPython(this,_0x2ca8b4(0x13e),{'sequences':_0x38d7d3});}}catch(_0x23c98c){this[_0x2ca8b4(0x16d)][_0x2ca8b4(0x238)](_0x2ca8b4(0x23c)+_0x23c98c['message']);}}if(_0x3d33d8[_0x2ca8b4(0x1cf)](_0x2ca8b4(0x1a0))&&_0x41666e[_0x2ca8b4(0x24c)]){this[_0x2ca8b4(0x24e)](_0x3d33d8,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x49a60f=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x49a60f&&_0x49a60f['val'])sendToPython(this,_0x2ca8b4(0x129),{'digests':JSON[_0x2ca8b4(0x127)](_0x49a60f[_0x2ca8b4(0x24c)])});}catch(_0x39ba62){}}if(_0x3d33d8[_0x2ca8b4(0x1cf)](_0x2ca8b4(0x154))&&_0x41666e['val']){this[_0x2ca8b4(0x24e)](_0x3d33d8,{'val':![],'ack':!![]});if(this[_0x2ca8b4(0x15f)])try{const _0x2fbb43=await this[_0x2ca8b4(0x26c)](_0x2ca8b4(0x184));if(_0x2fbb43&&_0x2fbb43['val'])sendToPython(this,_0x2ca8b4(0x296),{'points':JSON[_0x2ca8b4(0x127)](_0x2fbb43['val'])});}catch(_0x51540f){}}if(_0x3d33d8[_0x2ca8b4(0x1cf)](_0x2ca8b4(0x211))&&_0x41666e[_0x2ca8b4(0x24c)]){this[_0x2ca8b4(0x24e)](_0x3d33d8,{'val':![],'ack':!![]});if(this[_0x2ca8b4(0x15f)])try{const _0x3d54b3=await this[_0x2ca8b4(0x26c)](LTM_DP_RAW_LOG);_0x3d54b3&&_0x3d54b3[_0x2ca8b4(0x24c)]&&(this[_0x2ca8b4(0x16d)]['info'](_0x2ca8b4(0x159)),sendToPython(this,_0x2ca8b4(0x250),{'events':JSON[_0x2ca8b4(0x127)](_0x3d54b3['val'])}));}catch(_0x3cd8e6){}}if(_0x3d33d8['includes']('analysis.training.triggerTopology')&&_0x41666e['val']){this[_0x2ca8b4(0x24e)](_0x3d33d8,{'val':![],'ack':!![]});if(this[_0x2ca8b4(0x15f)])try{const _0xf98733=await this[_0x2ca8b4(0x26c)](_0x2ca8b4(0x229));if(_0xf98733&&_0xf98733['val']){const _0xabfebc=JSON[_0x2ca8b4(0x127)](_0xf98733[_0x2ca8b4(0x24c)]);this['log'][_0x2ca8b4(0x267)](_0x2ca8b4(0x164)),sendToPython(this,_0x2ca8b4(0x23e),{'sequences':_0xabfebc});}}catch(_0x146706){this[_0x2ca8b4(0x16d)][_0x2ca8b4(0x238)]('Topology\x20Error:\x20'+_0x146706[_0x2ca8b4(0x182)]);}}return;}if(this[_0x2ca8b4(0x2a3)][_0x2ca8b4(0x1d1)]&&this[_0x2ca8b4(0x2a3)][_0x2ca8b4(0x1d1)][_0x2ca8b4(0x1cf)](_0x3d33d8)){await checkWifiPresence(this);return;}const _0x36a731=(this[_0x2ca8b4(0x2a3)][_0x2ca8b4(0x273)]||[])[_0x2ca8b4(0x227)](_0x4cb5ba=>_0x4cb5ba['id']===_0x3d33d8);if(_0x36a731)processSensorEvent(this,_0x3d33d8,_0x41666e,_0x36a731);}async[a0_0x3fd6c8(0x1b5)](_0x20fc9a){const _0x1baf53=a0_0x3fd6c8;if(typeof _0x20fc9a===_0x1baf53(0x135)&&_0x20fc9a['message']){if(_0x20fc9a[_0x1baf53(0x26f)]===_0x1baf53(0x14d)){const _0x1d8f80=_0x20fc9a[_0x1baf53(0x182)]['apiKey']||this[_0x1baf53(0x2a3)][_0x1baf53(0x165)];if(!_0x1d8f80)return this[_0x1baf53(0x264)](_0x20fc9a[_0x1baf53(0x119)],_0x20fc9a[_0x1baf53(0x26f)],{'success':![],'message':_0x1baf53(0x239)},_0x20fc9a[_0x1baf53(0x1fd)]);try{const _0x3a661c=new GoogleGenerativeAI(_0x1d8f80),_0x67ff4c=_0x3a661c[_0x1baf53(0x110)]({'model':GEMINI_MODEL}),_0x377756=await _0x67ff4c['generateContent']('Hi');this[_0x1baf53(0x264)](_0x20fc9a[_0x1baf53(0x119)],_0x20fc9a['command'],{'success':!![],'message':_0x1baf53(0x212)+_0x377756['response']['text']()},_0x20fc9a[_0x1baf53(0x1fd)]);}catch(_0x29446c){this[_0x1baf53(0x264)](_0x20fc9a[_0x1baf53(0x119)],_0x20fc9a['command'],{'success':![],'message':_0x1baf53(0x1d8)+_0x29446c[_0x1baf53(0x182)]},_0x20fc9a[_0x1baf53(0x1fd)]);}}else{if(_0x20fc9a[_0x1baf53(0x26f)]===_0x1baf53(0x207)){const _0x114504=await getWeatherContext(this),_0x4d550a=await getCalendarContext(this);this[_0x1baf53(0x264)](_0x20fc9a[_0x1baf53(0x119)],_0x20fc9a[_0x1baf53(0x26f)],{'success':!![],'weather':_0x114504,'calendar':_0x4d550a},_0x20fc9a[_0x1baf53(0x1fd)]);}else{if(_0x20fc9a[_0x1baf53(0x26f)]==='getLtmData'){if(!this['isProVersion'])return this[_0x1baf53(0x264)](_0x20fc9a[_0x1baf53(0x119)],_0x20fc9a['command'],{'success':![],'isPro':![]},_0x20fc9a[_0x1baf53(0x1fd)]);let _0x53c1d7={'status':_0x1baf53(0x206)};try{const _0x2e0ba4=await this[_0x1baf53(0x26c)](LTM_DP_DRIFT_STATUS);_0x53c1d7[_0x1baf53(0x28a)]=_0x2e0ba4?_0x2e0ba4['val']:_0x1baf53(0x206);}catch(_0x3590b9){}this[_0x1baf53(0x264)](_0x20fc9a[_0x1baf53(0x119)],_0x20fc9a[_0x1baf53(0x26f)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x53c1d7,'analysisHistory':this['analysisHistory']},_0x20fc9a[_0x1baf53(0x1fd)]);}else{if(_0x20fc9a['command']==='getOverviewData'){const _0x397a97=this['dailyDigests'][_0x1baf53(0x24d)],_0x41ae36=new Date(),_0x42895f=new Date(_0x41ae36['getFullYear'](),_0x41ae36[_0x1baf53(0x187)](),_0x41ae36[_0x1baf53(0x272)]())[_0x1baf53(0x22c)](),_0x21e7c4=this[_0x1baf53(0x16e)][_0x1baf53(0x14e)](_0x302cfd=>new Date(_0x302cfd[_0x1baf53(0x1a9)])[_0x1baf53(0x22c)]()>_0x42895f)[_0x1baf53(0x24d)],_0xb200e5=new Array(0x18)[_0x1baf53(0x241)](0x0);this['rawEventLog'][_0x1baf53(0x240)](_0x3c19db=>{const _0x4b51f2=_0x1baf53,_0x5af9d6=new Date(_0x3c19db[_0x4b51f2(0x1a9)]);if(_0x5af9d6[_0x4b51f2(0x22c)]()>_0x42895f)_0xb200e5[_0x5af9d6[_0x4b51f2(0x25d)]()]++;});let _0x123b62={'status':_0x1baf53(0x206)};try{const _0x5e55cf=await this[_0x1baf53(0x26c)](LTM_DP_DRIFT_STATUS);_0x123b62[_0x1baf53(0x28a)]=_0x5e55cf?_0x5e55cf['val']:_0x1baf53(0x206);}catch(_0x1d6e50){}let _0x59afa9='';try{const _0x5ec319=await this['getStateAsync'](_0x1baf53(0x285));_0x59afa9=_0x5ec319?_0x5ec319['val']:'';}catch(_0x4bf66e){}let _0x3c06d5=null;!this[_0x1baf53(0x1cc)]&&(_0x3c06d5=this[_0x1baf53(0x2a3)]['geminiApiKey']?_0x1baf53(0x120):_0x1baf53(0x254));let _0x1ea15b={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x196f10=await this[_0x1baf53(0x26c)](_0x1baf53(0x19a));if(_0x196f10&&_0x196f10['val']){_0x1ea15b['detected']=!![];const _0x4ce205=await this['getStateAsync'](_0x1baf53(0x193));_0x1ea15b[_0x1baf53(0x1f7)]=_0x4ce205?_0x4ce205['val']:'';const _0x8c8c01=await this[_0x1baf53(0x26c)](_0x1baf53(0x133));_0x1ea15b[_0x1baf53(0x1d6)]=_0x8c8c01?_0x8c8c01['val']:'';const _0x5940b9=await this['getStateAsync'](_0x1baf53(0x142));_0x1ea15b['targetValue']=_0x5940b9?_0x5940b9[_0x1baf53(0x24c)]:'';}const _0x69c386=await this[_0x1baf53(0x26c)](_0x1baf53(0x1fe));_0x1ea15b[_0x1baf53(0x1bb)]=_0x69c386?!!_0x69c386['val']:![];}catch(_0x1028ef){}this[_0x1baf53(0x264)](_0x20fc9a['from'],_0x20fc9a['command'],{'success':!![],'eventHistory':this[_0x1baf53(0x141)][_0x1baf53(0x1c1)](0x0,0xf),'stats':{'digestCount':_0x397a97,'eventCountToday':_0x21e7c4,'hourlyActivity':_0xb200e5,'driftStatus':_0x123b62[_0x1baf53(0x28a)],'isPresent':this[_0x1baf53(0x11b)],'presenceWho':_0x59afa9,'minDays':this[_0x1baf53(0x2a3)]['minDaysForBaseline']||0x7,'stbDays':this['config'][_0x1baf53(0x242)]||0xe,'ltbDays':this[_0x1baf53(0x2a3)][_0x1baf53(0x230)]||0x3c,'systemError':_0x3c06d5},'automation':_0x1ea15b},_0x20fc9a['callback']);}else{if(_0x20fc9a[_0x1baf53(0x26f)]===_0x1baf53(0x1d4))try{const _0x1ab69a=await scanner['scanForDevices'](this,_0x20fc9a[_0x1baf53(0x182)]||{});this['sendTo'](_0x20fc9a[_0x1baf53(0x119)],_0x20fc9a[_0x1baf53(0x26f)],{'success':!![],'devices':_0x1ab69a},_0x20fc9a[_0x1baf53(0x1fd)]);}catch(_0x2067d7){this[_0x1baf53(0x264)](_0x20fc9a[_0x1baf53(0x119)],_0x20fc9a[_0x1baf53(0x26f)],{'success':![],'error':_0x2067d7['message']},_0x20fc9a[_0x1baf53(0x1fd)]);}else{if(_0x20fc9a[_0x1baf53(0x26f)]===_0x1baf53(0x225)){const _0x3e6fca=await this[_0x1baf53(0x1c6)](_0x1baf53(0x255),_0x1baf53(0x16b)),_0x3537b7=[];if(_0x3e6fca)for(const _0x314d00 in _0x3e6fca){const _0x50c672=_0x3e6fca[_0x314d00],_0x3a747c=(_0x50c672['common']&&typeof _0x50c672[_0x1baf53(0x1b9)]['name']===_0x1baf53(0x135)?_0x50c672['common']['name']['de']:_0x50c672[_0x1baf53(0x1b9)][_0x1baf53(0x1e2)])||_0x50c672[_0x1baf53(0x1b9)]['name'];_0x3537b7[_0x1baf53(0x19d)]({'id':_0x314d00,'name':_0x3a747c});}const _0x28243e=await this['getForeignObjectsAsync'](_0x1baf53(0x20c),_0x1baf53(0x16b)),_0x1ce4bf=[];if(_0x28243e)for(const _0x3d7830 in _0x28243e){const _0x541e70=_0x28243e[_0x3d7830],_0x25aade=(_0x541e70[_0x1baf53(0x1b9)]&&typeof _0x541e70[_0x1baf53(0x1b9)][_0x1baf53(0x1e2)]===_0x1baf53(0x135)?_0x541e70[_0x1baf53(0x1b9)]['name']['de']:_0x541e70[_0x1baf53(0x1b9)][_0x1baf53(0x1e2)])||_0x3d7830[_0x1baf53(0x173)]('.')['pop']();_0x1ce4bf['push'](_0x25aade);}this[_0x1baf53(0x264)](_0x20fc9a[_0x1baf53(0x119)],_0x20fc9a[_0x1baf53(0x26f)],{'success':!![],'enums':_0x3537b7,'rooms':_0x1ce4bf},_0x20fc9a[_0x1baf53(0x1fd)]);}else{if(_0x20fc9a[_0x1baf53(0x26f)]===_0x1baf53(0x232)){const _0xca5da4=_0x20fc9a[_0x1baf53(0x182)][_0x1baf53(0x1f3)];if(!_0xca5da4)return this[_0x1baf53(0x264)](_0x20fc9a[_0x1baf53(0x119)],_0x20fc9a['command'],{'success':![],'error':_0x1baf53(0x288)},_0x20fc9a[_0x1baf53(0x1fd)]);const _0x3824e7=await getCalendarNames(this,_0xca5da4);this['sendTo'](_0x20fc9a[_0x1baf53(0x119)],_0x20fc9a[_0x1baf53(0x26f)],{'success':!![],'names':_0x3824e7},_0x20fc9a[_0x1baf53(0x1fd)]);}else{if(_0x20fc9a[_0x1baf53(0x26f)]===_0x1baf53(0x1b2)){const {targetId:_0x1eff2c,targetValue:_0x731eb6}=_0x20fc9a['message'];this['log'][_0x1baf53(0x267)](_0x1baf53(0x139)+_0x1eff2c+_0x1baf53(0x1dd)+_0x731eb6),await this[_0x1baf53(0x294)](_0x1baf53(0x19a),{'val':!![],'ack':!![]}),await this[_0x1baf53(0x294)](_0x1baf53(0x193),{'val':_0x1baf53(0x15d)+_0x1eff2c,'ack':!![]}),await this['setStateAsync'](_0x1baf53(0x133),{'val':_0x1eff2c,'ack':!![]}),await this[_0x1baf53(0x294)](_0x1baf53(0x142),{'val':_0x731eb6,'ack':!![]}),this[_0x1baf53(0x264)](_0x20fc9a[_0x1baf53(0x119)],_0x20fc9a[_0x1baf53(0x26f)],{'success':!![]},_0x20fc9a[_0x1baf53(0x1fd)]);}else{if(_0x20fc9a[_0x1baf53(0x26f)]===_0x1baf53(0x1a6)){const {historyId:_0x401451,rating:_0x251caf,comment:_0x46a801,alertReason:_0x4274b1}=_0x20fc9a['message'];_0x401451&&_0x251caf?(await saveFeedback(this,{'timestamp':Date[_0x1baf53(0x112)](),'historyId':_0x401451,'rating':_0x251caf,'comment':_0x46a801,'alertReason':_0x4274b1}),this[_0x1baf53(0x264)](_0x20fc9a['from'],_0x20fc9a['command'],{'success':!![]},_0x20fc9a[_0x1baf53(0x1fd)])):this['sendTo'](_0x20fc9a['from'],_0x20fc9a[_0x1baf53(0x26f)],{'success':![],'error':_0x1baf53(0x214)},_0x20fc9a[_0x1baf53(0x1fd)]);}else _0x20fc9a[_0x1baf53(0x26f)]==='dismissAutomation'&&(this[_0x1baf53(0x16d)][_0x1baf53(0x267)]('User\x20dismissed\x20automation\x20proposal.'),await this[_0x1baf53(0x294)](_0x1baf53(0x19a),{'val':![],'ack':!![]}),await this[_0x1baf53(0x294)](_0x1baf53(0x193),{'val':'','ack':!![]}),this[_0x1baf53(0x264)](_0x20fc9a[_0x1baf53(0x119)],_0x20fc9a[_0x1baf53(0x26f)],{'success':!![]},_0x20fc9a[_0x1baf53(0x1fd)]));}}}}}}}}}}}if(require[a0_0x3fd6c8(0x175)]!==module)module['exports']=_0x2254b4=>new CogniLiving(_0x2254b4);else new CogniLiving();