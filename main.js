function a0_0x4921(){const _0x4bb019=['updateLocation','forecast.current.weather','checkLicense','ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20','analysis.security.infrasoundLog','info','analysis.energy.pinnForecast','minutes_safe','setHours','setObjectNotExistsAsync','simulateButler','forEach','config','name','infrasoundArmingId','Nuukanni\x20Security','.data.table','subscribeForeignStatesAsync','786KeLWeI','monitorEnforcements','keys','length','cogni-living','enum.functions.*','isPresent','onMessage','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','notifyTelegramEnabled','Kein\x20Kalender-Adapter','Daten\x20nicht\x20verfÃ¼gbar','TRAIN_COMFORT','725456OFsztX','cogni-living\x20adapter\x20starting\x20(v','isProVersion','key','Sec-Training\x20started...','sunny','analysis.energy.rlPenalties','lastTrackerEventTime','ANALYZE_GAIT','onStateChange','bind','SYSTEM_DP_MODE','getCalendarNames','location','analysisHistory','triggerInfrasoundCorrelation','onReady','json','devices','{\x22default\x22:\x2021}','setupDriftAnalysisScheduler','getForeignObjectAsync','times','19150GHRQaz','abs','getOutsideTemperatureNumeric','infrasoundLocked','./lib/automation','string','SET_LEARNING_MODE','TRAIN_TOPOLOGY','analysis.health.gaitDebug','\x20hPa\x20(Limit:\x20','geminiModel','sources','./lib/python_bridge','trackerHeartbeat','loadSystemMode','Gesendet','Gemini\x20Init\x20Error:\x20','[Forensics]\x20Save\x20failed:\x20','subscribeStates','generateContent','analysis.training.triggerHealth','security.alarm_triggered','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','toString','analyzeWindowOpening','triggerBriefing','isSolar','checkSolarCondition','simulateEnergyMPC','setState','analysis.topology.structure','main','Fehler:\x20','activityLevel','checkAndInstall','analysis.energy.warmupTargets','analysis.health.todayVector','debug','entries','Heizung\x20kann\x20','General\x20Activity\x20Trend\x20(%)','inactivityThresholdHours','sonn','checkWifiPresence','Fenster\x20geÃ¶ffnet:\x20','resetRLPenalty','state','Warm-Up\x20Target\x20Temps\x20(JSON)','dailyDigests','sendMorningBriefing','manual','analysis.automation.targetValue','text','analysis.training.triggerSecurity','1553776qtUYmf','checkThermostats','analysis.energy.warmupSources','updateTopologyMatrix','briefingJob','16IdUOeN','infrasoundSensorId','1185723rvCHPz','pressureBuffer','getEnums','exitGraceTimer','unload','stateChange','_calName','\x20hPa.\x20Einbruch\x20wahrscheinlich.','[Calibration]\x20Window\x20','pop','[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20','(((.+)+)+)+$','ANOMALY\x20(Real\x20Threat?)','./lib/installer','ANALYZE_TREND','2937AzYMCy','12865BAAfoA','stringify','NextHours.Location_1.Day_1.current.symbol_desc','onUnload','endsWith','notifyPushoverEnabled','startService','Adapter','scanDevices','system.adapter.','analysis.training.status','parse','setStateAsync','weatherunderground.0','analysis.energy.ventilationAlerts','party','Gait\x20Speed\x20Calculation\x20Proof','testNotification','analysis.automation.triggerAction','val','subscribeForeignStates','testContext','Test','LTM.triggerDailyDigest','analysis.automation.description','healthTrendInterval','toFixed','./lib/recorder','dependencyInstallInProgress','filter','Memory\x20Hydration\x20Failed:\x20','automation.triggerAction','eventHistory','namespace','Reinforcement\x20Learning\x20Penalties','models/gemini-flash-latest','Current.WeatherText','executeAutomationAction','from','triggerDailyDigest','log','values','value','testApiKey','modeResetJob','scores','warn','temperature','map','runGeminiAnalysis','sendTo','Keine\x20Antwort\x20von\x20Gemini','reed','memoryCache','Sensors\x20used\x20for\x20Gait\x20Analysis','daswetter.0','enum','updateTopology','ðŸ§ \x20Graph-Brain:\x20Training\x20Behaviour\x20Matrix\x20based\x20on\x20','Kein\x20API\x20Key\x20Ã¼bergeben','setPresence','getStateAsync','cancel','isGracePeriodActive','notifyPushoverInstance','open','getForeignObjectsAsync','OPTIMIZE_ENERGY','klar','Standard','INTERNAL','PREDICT_ENERGY','protectAiMemory','updateHealthVector','some','\x20hPa\x20(Threshold:\x20','getLtmData','analysis.automation.autoApply','system.presenceWho','analysis.security.learningStatus','Key\x20not\x20found\x20or\x20not\x20provided','Gemini\x20AI\x20initialized.','getOverviewData',')\x20-\x20Phase\x20D\x20(Forensic\x20Calibration)','initSystemConfig','analysisTimer','[Forensics]\x20Infrasound\x20Event\x20correlated:\x20','LTM.dailyDigests','analysis.training.triggerComfort','timestamp','./lib/setup','message','scanForDevices','isArray','LTM.trainingData.sequences','Graph-Brain\x20Train\x20Error:\x20','motion','ALARM','cleanupGhostInterventions','exitTimer','heiter','ltmJob','push','analysis.training.triggerEnergy','./lib/dead_man','type','analysis.trigger','triggerGaitAnalysis','split','error','Active\x20Ventilation\x20Alerts','@google/generative-ai','fill','analysis.automation.patternDetected','door','ready','magnet','accuweather.0','PINN\x20AI\x20Forecast','setupModeResetScheduler','system.mode','PYTHON_EXE','analysis.energy.warmupTimes','infrasoundThreshold','initZombies','analysis.automation.targetId','runPythonHealthCheck','includes','Party\x20Mode','2uXGBfZ','add','getForeignStateAsync','\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.','WiFi\x20Presence\x20detected.','geminiApiKey','@iobroker/adapter-core','triggerEnergyPrediction','communicate.request','sensorLastValues','genAI','matrix','exports','notifyTelegramInstance','now','initHistory','presenceDevices','startSystem','floor','window','thermostat','Forensic\x20Infrasound\x20Log','object','819393SptlgB','appendToLog','TRAIN_HEALTH','ack','licenseKey','instance','[Infrasound]\x20ðŸŸ¡\x20Debug-Mode:\x20Alarm\x20detected\x20but\x20suppressed\x20because\x20presence=true.','runAutopilot','ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20','getHours','search','enum.rooms.*','common','role','analysis.health.activityTrend','NORMAL','useWeather','minDaysForBaseline','âš ï¸\x20Graph-Brain:\x20No\x20training\x20sequences\x20found\x20in\x20LTM.','Active\x20Calendar\x20Enforcements\x20(Locks)','rawEventLog','processSensorEvent','createAllObjects','send','Notification\x20Test\x20Failed:\x20','MATCH\x20(False\x20Positive)','Verbindung\x20erfolgreich!','join','currentSystemMode','number','Keine\x20Sensor-AktivitÃ¤t','analysis.training.triggerTopology','bootTime','./lib/scheduler','find','analysis.health.gaitSensors','setupLtmScheduler','apply','SET_TOPOLOGY','TRAIN_SECURITY','slice','SYSTEM_MODES','calendarInstance','.system.mode','driftAnalysisTimer','command','infrasoundEnabled','442105rRCjJK','callback','\x20opened.\x20Peak\x20Pressure:\x20','Aktiv\x20(','TRACK_EVENT','sendNotification','ErklÃ¤rt\x20durch:\x20','\x20min\x20ausbleiben.'];a0_0x4921=function(){return _0x4bb019;};return a0_0x4921();}const a0_0x566ec9=a0_0x264c;(function(_0x1fd2fc,_0x572b5f){const _0x650ad=a0_0x264c,_0x578b68=_0x1fd2fc();while(!![]){try{const _0x1fd90c=parseInt(_0x650ad(0x18f))/0x1+-parseInt(_0x650ad(0x149))/0x2*(-parseInt(_0x650ad(0x160))/0x3)+parseInt(_0x650ad(0x1b6))/0x4+parseInt(_0x650ad(0x21a))/0x5*(parseInt(_0x650ad(0x1a9))/0x6)+-parseInt(_0x650ad(0x203))/0x7+-parseInt(_0x650ad(0x208))/0x8*(parseInt(_0x650ad(0x20a))/0x9)+-parseInt(_0x650ad(0x1cd))/0xa*(parseInt(_0x650ad(0x219))/0xb);if(_0x1fd90c===_0x572b5f)break;else _0x578b68['push'](_0x578b68['shift']());}catch(_0x18fd47){_0x578b68['push'](_0x578b68['shift']());}}}(a0_0x4921,0x39d60));const a0_0x360364=(function(){let _0x17320f=!![];return function(_0x1909a0,_0x368bbb){const _0x2f7d1c=_0x17320f?function(){const _0x427170=a0_0x264c;if(_0x368bbb){const _0x23c4f2=_0x368bbb[_0x427170(0x185)](_0x1909a0,arguments);return _0x368bbb=null,_0x23c4f2;}}:function(){};return _0x17320f=![],_0x2f7d1c;};}()),a0_0x4d5a88=a0_0x360364(this,function(){const _0x52bef3=a0_0x264c;return a0_0x4d5a88[_0x52bef3(0x1e4)]()[_0x52bef3(0x16a)](_0x52bef3(0x215))['toString']()['constructor'](a0_0x4d5a88)[_0x52bef3(0x16a)]('(((.+)+)+)+$');});a0_0x4d5a88();'use strict';const utils=require(a0_0x566ec9(0x14f)),{GoogleGenerativeAI}=require(a0_0x566ec9(0x137)),installer=require(a0_0x566ec9(0x217)),scanner=require('./lib/scanner'),schedulers=require(a0_0x566ec9(0x181)),topology=require('./lib/topology'),setup=require(a0_0x566ec9(0x122)),recorder=require(a0_0x566ec9(0x235)),pythonBridge=require(a0_0x566ec9(0x1d9)),aiAgent=require('./lib/ai_agent'),deadMan=require(a0_0x566ec9(0x130)),automation=require(a0_0x566ec9(0x1d1)),GEMINI_MODEL=a0_0x566ec9(0xeb),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x264c(_0x53813d,_0x4238ae){const _0x5d540c=a0_0x4921();return a0_0x264c=function(_0x4d5a88,_0x360364){_0x4d5a88=_0x4d5a88-0xe4;let _0x492147=_0x5d540c[_0x4d5a88];return _0x492147;},a0_0x264c(_0x53813d,_0x4238ae);}class CogniLiving extends utils[a0_0x566ec9(0x221)]{constructor(_0x22cf56){const _0x206139=a0_0x566ec9;super({..._0x22cf56,'name':_0x206139(0x1ad)}),this[_0x206139(0xe8)]=[],this['analysisHistory']=[],this[_0x206139(0x174)]=[],this['dailyDigests']=[],this[_0x206139(0x152)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x206139(0x1af)]=!![],this[_0x206139(0x12b)]=null,this[_0x206139(0x20d)]=null,this[_0x206139(0x107)]=![],this[_0x206139(0x153)]=null,this[_0x206139(0x1d7)]=null,this[_0x206139(0x17c)]=setup[_0x206139(0x189)]['NORMAL'],this['isProVersion']=![],this['lastAlertState']=![],this[_0x206139(0x11d)]=null,this['ltmJob']=null,this['modeResetJob']=null,this[_0x206139(0x18c)]=null,this['briefingJob']=null,this[_0x206139(0x1da)]=null,this[_0x206139(0x233)]=null,this[_0x206139(0xe4)]=![],this[_0x206139(0x1bd)]=Date[_0x206139(0x157)](),this[_0x206139(0xfd)]=null,this[_0x206139(0x180)]=Date[_0x206139(0x157)](),this['infrasoundLocked']=![],this[_0x206139(0x20b)]=[],this['on'](_0x206139(0x13b),this[_0x206139(0x1c6)][_0x206139(0x1c0)](this)),this['on'](_0x206139(0x20f),this[_0x206139(0x1bf)][_0x206139(0x1c0)](this)),this['on'](_0x206139(0x20e),this[_0x206139(0x21d)][_0x206139(0x1c0)](this)),this['on'](_0x206139(0x123),this[_0x206139(0x1b0)][_0x206139(0x1c0)](this));}async['onReady'](){const _0x383271=a0_0x566ec9;this[_0x383271(0xf0)]['info'](_0x383271(0x1b7)+this['version']+_0x383271(0x11b));if(!installer[_0x383271(0x1ef)](this,()=>this[_0x383271(0x15a)]()))return;}async['startSystem'](){const _0x63a951=a0_0x566ec9;await setup[_0x63a951(0x144)](this);try{this[_0x63a951(0x1b8)]=await setup[_0x63a951(0x199)](this[_0x63a951(0x1a3)][_0x63a951(0x164)]);}catch(_0x3f42d4){}if(!this[_0x63a951(0x1a3)][_0x63a951(0x1f6)]||this[_0x63a951(0x1a3)]['inactivityThresholdHours']<0.1)this[_0x63a951(0x1a3)][_0x63a951(0x1f6)]=0xc;await setup[_0x63a951(0x158)](this),await setup[_0x63a951(0x11c)](this);try{const _0x5f0460=await this['getStateAsync'](_0x63a951(0x142)),_0x440fe5=await this[_0x63a951(0x105)](_0x63a951(0x205));_0x5f0460&&_0x5f0460[_0x63a951(0x22d)]&&_0x440fe5&&_0x440fe5[_0x63a951(0x22d)]&&(Date[_0x63a951(0x157)]()-_0x5f0460['ts']<0x4*0xe10*0x3e8&&(this['memoryCache']={'times':JSON[_0x63a951(0x225)](_0x5f0460[_0x63a951(0x22d)]),'sources':JSON[_0x63a951(0x225)](_0x440fe5[_0x63a951(0x22d)])},this[_0x63a951(0xf0)][_0x63a951(0x19c)](_0x63a951(0x19a)+Object[_0x63a951(0x1ab)](this[_0x63a951(0xfd)][_0x63a951(0x1cc)])[_0x63a951(0x1ac)]+'\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).')));}catch(_0x1ade1a){this[_0x63a951(0xf0)][_0x63a951(0xf6)](_0x63a951(0xe6)+_0x1ade1a[_0x63a951(0x123)]);}if(this[_0x63a951(0x1a3)][_0x63a951(0x14e)])try{this[_0x63a951(0x153)]=new GoogleGenerativeAI(this[_0x63a951(0x1a3)][_0x63a951(0x14e)]),this[_0x63a951(0x1d7)]=this[_0x63a951(0x153)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this['log'][_0x63a951(0x19c)](_0x63a951(0x119));}catch(_0x2d3960){this[_0x63a951(0xf0)][_0x63a951(0x135)](_0x63a951(0x1dd)+_0x2d3960['message']);}await setup[_0x63a951(0x176)](this),await this['loadSystemMode'](),await this[_0x63a951(0x1a0)](_0x63a951(0x19d),{'type':_0x63a951(0x1fb),'common':{'name':_0x63a951(0x13e),'type':_0x63a951(0x1d2),'role':_0x63a951(0x1c7),'read':!![],'write':![]},'native':{}}),await this[_0x63a951(0x1a0)](_0x63a951(0x228),{'type':_0x63a951(0x1fb),'common':{'name':_0x63a951(0x136),'type':_0x63a951(0x1d2),'role':_0x63a951(0x1c7),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x63a951(0x142),{'type':_0x63a951(0x1fb),'common':{'name':_0x63a951(0x1e3),'type':_0x63a951(0x1d2),'role':_0x63a951(0x1c7),'read':!![],'write':![]},'native':{}}),await this[_0x63a951(0x1a0)](_0x63a951(0x1f0),{'type':_0x63a951(0x1fb),'common':{'name':_0x63a951(0x1fc),'type':_0x63a951(0x1d2),'role':_0x63a951(0x1c7),'read':!![],'write':!![],'def':_0x63a951(0x1c9)},'native':{}}),await this[_0x63a951(0x1a0)]('analysis.energy.rlPenalties',{'type':_0x63a951(0x1fb),'common':{'name':_0x63a951(0xea),'type':_0x63a951(0x1d2),'role':_0x63a951(0x1c7),'read':!![],'write':![],'def':'{}'},'native':{}}),await this[_0x63a951(0x1a0)](_0x63a951(0x16e),{'type':_0x63a951(0x1fb),'common':{'name':_0x63a951(0x1f5),'type':_0x63a951(0x17d),'role':_0x63a951(0xf2),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x63a951(0x1a0)](_0x63a951(0x183),{'type':_0x63a951(0x1fb),'common':{'name':_0x63a951(0xfe),'type':'string','role':_0x63a951(0x201),'read':!![],'write':![]},'native':{}}),await this[_0x63a951(0x1a0)]('analysis.energy.activeEnforcements',{'type':_0x63a951(0x1fb),'common':{'name':_0x63a951(0x173),'type':_0x63a951(0x1d2),'role':_0x63a951(0x1c7),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x63a951(0x1a0)](_0x63a951(0x19b),{'type':_0x63a951(0x1fb),'common':{'name':_0x63a951(0x15e),'type':_0x63a951(0x1d2),'role':_0x63a951(0x1c7),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0x63a951(0x1d5),{'type':_0x63a951(0x1fb),'common':{'name':_0x63a951(0x22a),'type':'string','role':_0x63a951(0x201),'read':!![],'write':![]},'native':{}});try{const _0x102346=await this[_0x63a951(0x105)]('LTM.rawEventLog');if(_0x102346&&_0x102346[_0x63a951(0x22d)])this[_0x63a951(0x174)]=JSON[_0x63a951(0x225)](_0x102346[_0x63a951(0x22d)]);}catch(_0x14e1d7){this[_0x63a951(0x174)]=[];}try{const _0x1af1ed=await this[_0x63a951(0x105)](_0x63a951(0x11f));if(_0x1af1ed&&_0x1af1ed['val'])this[_0x63a951(0x1fd)]=JSON['parse'](_0x1af1ed[_0x63a951(0x22d)]);}catch(_0xc4db8f){this['dailyDigests']=[];}const _0x1ee19d=this['dailyDigests'][_0x63a951(0x1ac)]>=(this[_0x63a951(0x1a3)][_0x63a951(0x171)]||0x7)?_0x63a951(0x192)+this[_0x63a951(0x1fd)][_0x63a951(0x1ac)]+'\x20Tage)':'Lernphase\x20('+this[_0x63a951(0x1fd)][_0x63a951(0x1ac)]+'/'+(this[_0x63a951(0x1a3)]['minDaysForBaseline']||0x7)+')';await this[_0x63a951(0x226)]('LTM.baselineStatus',{'val':_0x1ee19d,'ack':!![]}),this[_0x63a951(0x1df)](_0x63a951(0x132)),this[_0x63a951(0x1df)](_0x63a951(0x231)),this[_0x63a951(0x1df)](_0x63a951(0x140)),this[_0x63a951(0x1df)]('analysis.triggerBriefing'),this[_0x63a951(0x1df)](_0x63a951(0x22c)),this[_0x63a951(0x1df)](_0x63a951(0x115)),this[_0x63a951(0x1df)](_0x63a951(0x202)),this[_0x63a951(0x1df)](_0x63a951(0x1e1)),this[_0x63a951(0x1df)]('analysis.training.triggerEnergy'),this[_0x63a951(0x1df)](_0x63a951(0x120)),this['subscribeStates'](_0x63a951(0x17f)),this[_0x63a951(0x1df)]('analysis.energy.mpcActive'),this[_0x63a951(0x1df)](_0x63a951(0x205));this[_0x63a951(0x1a3)][_0x63a951(0x18e)]&&this[_0x63a951(0x1a3)][_0x63a951(0x209)]&&(this[_0x63a951(0xf0)]['info']('[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20'+this['config'][_0x63a951(0x209)]),this[_0x63a951(0x22e)](this[_0x63a951(0x1a3)][_0x63a951(0x209)]));const _0x25ce22=this[_0x63a951(0x1a3)][_0x63a951(0x1c8)];if(_0x25ce22)for(const _0x1b595b of _0x25ce22){await this[_0x63a951(0x1a8)](_0x1b595b['id']);}const _0x4a341c=this[_0x63a951(0x1a3)][_0x63a951(0x159)];if(_0x4a341c)for(const _0x2e0adf of _0x4a341c){await this[_0x63a951(0x1a8)](_0x2e0adf);}if(this['config']['notifyTelegramEnabled']&&this[_0x63a951(0x1a3)]['notifyTelegramInstance'])await this[_0x63a951(0x1a8)](this['config'][_0x63a951(0x156)]+'.communicate.request');setTimeout(()=>this[_0x63a951(0x1f8)](),0x1388);if(this[_0x63a951(0x11d)])clearInterval(this[_0x63a951(0x11d)]);const _0x3208eb=this[_0x63a951(0x1a3)]['analysisInterval']||0xf;_0x3208eb>0x0&&(this[_0x63a951(0x11d)]=setInterval(()=>{const _0x673c77=_0x63a951;this[_0x673c77(0x167)](),automation['checkCalendarTriggers'](this),automation['monitorEnforcements'](this);},_0x3208eb*0x3c*0x3e8));setTimeout(()=>{const _0x19c44f=_0x63a951;automation['checkCalendarTriggers'](this),automation[_0x19c44f(0x1aa)](this);},0x2710);this[_0x63a951(0x1a3)]['trackerEnabled']!==![]&&(this['trackerHeartbeat']=setInterval(()=>{const _0x375d67=_0x63a951;if(this[_0x375d67(0x1b8)]){const _0xcfdd21=Date[_0x375d67(0x157)](),_0x1d6687=this[_0x375d67(0x1bd)]||_0xcfdd21,_0x225ffd=(_0xcfdd21-_0x1d6687)/0x3e8;_0x225ffd>0x2&&(this[_0x375d67(0x1bd)]=_0xcfdd21,pythonBridge[_0x375d67(0x177)](this,_0x375d67(0x193),{'room':null,'dt':_0x225ffd}));}},0xbb8));if(this['healthTrendInterval'])clearInterval(this['healthTrendInterval']);this['healthTrendInterval']=setInterval(()=>{const _0x549727=_0x63a951;this[_0x549727(0x1b8)]&&(this[_0x549727(0xf0)][_0x549727(0x19c)]('â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...'),this[_0x549727(0x146)]());},0x4*0x3c*0x3c*0x3e8),schedulers[_0x63a951(0x184)](this,()=>aiAgent['createDailyDigest'](this,pythonBridge)),schedulers[_0x63a951(0x13f)](this),schedulers[_0x63a951(0x1ca)](this,()=>aiAgent['runBaselineDriftAnalysis'](this)),schedulers['setupBriefingScheduler'](this,()=>aiAgent[_0x63a951(0x1fe)](this)),pythonBridge[_0x63a951(0x220)](this,installer[_0x63a951(0x141)]),setTimeout(async()=>{const _0x1698cc=_0x63a951;await topology[_0x1698cc(0x101)](this);try{const _0x25b52e=await this[_0x1698cc(0x105)](_0x1698cc(0x1eb));if(_0x25b52e&&_0x25b52e[_0x1698cc(0x22d)])pythonBridge[_0x1698cc(0x177)](this,_0x1698cc(0x186),JSON[_0x1698cc(0x225)](_0x25b52e[_0x1698cc(0x22d)]));}catch(_0x79204e){}this[_0x1698cc(0x146)](),this[_0x1698cc(0x133)](),this[_0x1698cc(0x150)](),this[_0x1698cc(0x111)]();},0x1388);}[a0_0x566ec9(0x21d)](_0x1a3297){const _0x425e34=a0_0x566ec9;if(this['analysisTimer'])clearInterval(this[_0x425e34(0x11d)]);if(this[_0x425e34(0x18c)])clearInterval(this['driftAnalysisTimer']);if(this['trackerHeartbeat'])clearInterval(this[_0x425e34(0x1da)]);if(this[_0x425e34(0x233)])clearInterval(this[_0x425e34(0x233)]);if(this[_0x425e34(0x12d)])this[_0x425e34(0x12d)][_0x425e34(0x106)]();if(this[_0x425e34(0xf4)])this[_0x425e34(0xf4)]['cancel']();if(this[_0x425e34(0x207)])this[_0x425e34(0x207)][_0x425e34(0x106)]();recorder['abortExitTimer'](this),pythonBridge['stopService'](this),_0x1a3297();}async[a0_0x566ec9(0x1bf)](_0x27c651,_0x3f2ac4){const _0x14e713=a0_0x566ec9;if(!_0x3f2ac4||this[_0x14e713(0xe4)])return;if(_0x27c651[_0x14e713(0x147)]('telegram')&&_0x27c651[_0x14e713(0x21e)](_0x14e713(0x151))&&_0x3f2ac4['val'])return;if(this[_0x14e713(0x1a3)]['infrasoundEnabled']&&_0x27c651===this['config']['infrasoundSensorId']){this['handleInfrasound'](_0x3f2ac4[_0x14e713(0x22d)]);return;}if(_0x27c651===this[_0x14e713(0xe9)]+_0x14e713(0x18b)){if(_0x3f2ac4['val']&&Object[_0x14e713(0xf1)](setup[_0x14e713(0x189)])[_0x14e713(0x147)](_0x3f2ac4['val'])){this[_0x14e713(0x17c)]=_0x3f2ac4[_0x14e713(0x22d)];if(_0x3f2ac4[_0x14e713(0x22d)]===setup[_0x14e713(0x189)]['VACATION'])await recorder[_0x14e713(0x104)](this,![]);else await recorder['setPresence'](this,!![]);if(this[_0x14e713(0x1b8)]){let _0x3f4d72=![],_0xd775ee=0x0,_0x2ad614=_0x14e713(0x1ff);if(this[_0x14e713(0x17c)]===_0x14e713(0x229))_0x3f4d72=!![],_0xd775ee=0x168,_0x2ad614=_0x14e713(0x148);else this['currentSystemMode']==='guest'&&(_0x3f4d72=!![],_0xd775ee=0x5a0,_0x2ad614='Guest\x20Mode');pythonBridge[_0x14e713(0x177)](this,_0x14e713(0x1d3),{'active':_0x3f4d72,'duration':_0xd775ee,'label':_0x2ad614}),await this[_0x14e713(0x226)](_0x14e713(0x117),{'val':JSON[_0x14e713(0x21b)]({'active':_0x3f4d72,'label':_0x2ad614,'timestamp':Date[_0x14e713(0x157)]()}),'ack':!![]});}}if(!_0x3f2ac4['ack'])this[_0x14e713(0x1ea)](_0x27c651,{'val':this[_0x14e713(0x17c)],'ack':!![]});return;}_0x27c651[_0x14e713(0x21e)](_0x14e713(0x205))&&_0x3f2ac4['ack']&&this[_0x14e713(0x110)](_0x3f2ac4[_0x14e713(0x22d)]);if(!_0x3f2ac4[_0x14e713(0x163)]){if(_0x27c651[_0x14e713(0x147)](_0x14e713(0x132))&&_0x3f2ac4['val']){this[_0x14e713(0x1ea)](_0x27c651,{'val':![],'ack':!![]}),aiAgent[_0x14e713(0xf9)](this);return;}if(_0x27c651[_0x14e713(0x147)](_0x14e713(0xef))&&_0x3f2ac4[_0x14e713(0x22d)]){this['setState'](_0x27c651,{'val':![],'ack':!![]});if(this[_0x14e713(0x1b8)])aiAgent['createDailyDigest'](this,pythonBridge);return;}if(_0x27c651[_0x14e713(0x147)](_0x14e713(0x1e6))&&_0x3f2ac4[_0x14e713(0x22d)]){this[_0x14e713(0x1ea)](_0x27c651,{'val':![],'ack':!![]}),aiAgent[_0x14e713(0x1fe)](this);return;}if(_0x27c651[_0x14e713(0x147)](_0x14e713(0xe7))&&_0x3f2ac4[_0x14e713(0x22d)]){this[_0x14e713(0x1ea)](_0x27c651,{'val':![],'ack':!![]}),aiAgent[_0x14e713(0xed)](this);return;}if(_0x27c651['includes'](_0x14e713(0x202))&&_0x3f2ac4['val']){this[_0x14e713(0x1ea)](_0x27c651,{'val':![],'ack':!![]});if(this[_0x14e713(0x1b8)])try{const _0x32d035=await this['getStateAsync'](_0x14e713(0x126));if(_0x32d035&&_0x32d035[_0x14e713(0x22d)]){const _0x5a8f72=JSON[_0x14e713(0x225)](_0x32d035['val']);this[_0x14e713(0x226)](_0x14e713(0x224),{'val':_0x14e713(0x1ba),'ack':!![]}),pythonBridge[_0x14e713(0x177)](this,_0x14e713(0x187),{'sequences':_0x5a8f72});}}catch(_0x51ac6d){}return;}if(_0x27c651[_0x14e713(0x147)]('analysis.training.triggerHealth')&&_0x3f2ac4[_0x14e713(0x22d)]){this['setState'](_0x27c651,{'val':![],'ack':!![]});if(this[_0x14e713(0x1b8)])try{const _0x1a9cab=await this['getStateAsync'](_0x14e713(0x11f));if(_0x1a9cab&&_0x1a9cab[_0x14e713(0x22d)])pythonBridge['send'](this,_0x14e713(0x162),{'digests':JSON[_0x14e713(0x225)](_0x1a9cab['val'])});}catch(_0x37d313){}return;}if(_0x27c651[_0x14e713(0x147)](_0x14e713(0x12f))&&_0x3f2ac4[_0x14e713(0x22d)]){this[_0x14e713(0x1ea)](_0x27c651,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x4a1d5e=await this[_0x14e713(0x105)]('LTM.trainingData.thermodynamics');if(_0x4a1d5e&&_0x4a1d5e['val'])pythonBridge[_0x14e713(0x177)](this,'TRAIN_ENERGY',{'points':JSON['parse'](_0x4a1d5e[_0x14e713(0x22d)])});}catch(_0x368a6f){}return;}if(_0x27c651[_0x14e713(0x147)](_0x14e713(0x120))&&_0x3f2ac4[_0x14e713(0x22d)]){this[_0x14e713(0x1ea)](_0x27c651,{'val':![],'ack':!![]});if(this[_0x14e713(0x1b8)])try{const _0x59e30f=await this['getStateAsync']('LTM.rawEventLog');if(_0x59e30f&&_0x59e30f[_0x14e713(0x22d)])pythonBridge['send'](this,_0x14e713(0x1b5),{'events':JSON['parse'](_0x59e30f[_0x14e713(0x22d)])});}catch(_0x4ab38d){}return;}if(_0x27c651[_0x14e713(0x147)](_0x14e713(0x17f))&&_0x3f2ac4['val']){this[_0x14e713(0x1ea)](_0x27c651,{'val':![],'ack':!![]}),topology[_0x14e713(0x101)](this);if(this['isProVersion'])try{const _0x14aac9=await this[_0x14e713(0x105)](_0x14e713(0x126));if(_0x14aac9&&_0x14aac9[_0x14e713(0x22d)]){const _0x53c01b=JSON[_0x14e713(0x225)](_0x14aac9[_0x14e713(0x22d)]);this[_0x14e713(0xf0)][_0x14e713(0x19c)](_0x14e713(0x102)+_0x53c01b[_0x14e713(0x1ac)]+'\x20sequences...'),pythonBridge['send'](this,_0x14e713(0x1d4),{'sequences':_0x53c01b});}else this[_0x14e713(0xf0)][_0x14e713(0xf6)](_0x14e713(0x172));}catch(_0x5d37eb){this[_0x14e713(0xf0)][_0x14e713(0x135)](_0x14e713(0x127)+_0x5d37eb['message']);}return;}}if(this[_0x14e713(0x1a3)]['presenceDevices']&&this['config'][_0x14e713(0x159)][_0x14e713(0x147)](_0x27c651)){await this['checkWifiPresence']();return;}const _0xda474=(this['config'][_0x14e713(0x1c8)]||[])[_0x14e713(0x182)](_0x226e19=>_0x226e19['id']===_0x27c651);if(_0xda474){const _0xc88bfd=await recorder[_0x14e713(0x175)](this,_0x27c651,_0x3f2ac4,_0xda474);_0xc88bfd&&_0xc88bfd[_0x14e713(0x131)]===_0x14e713(0x128)&&_0xc88bfd[_0x14e713(0x1c3)]&&this[_0x14e713(0x1b8)]&&deadMan[_0x14e713(0x197)](this,_0xc88bfd[_0x14e713(0x1c3)]),_0x3f2ac4['val']&&(_0x3f2ac4[_0x14e713(0x22d)]===!![]||_0x3f2ac4[_0x14e713(0x22d)]===0x1||String(_0x3f2ac4[_0x14e713(0x22d)])['toLowerCase']()===_0x14e713(0x109))&&(_0xda474[_0x14e713(0x131)]&&(_0xda474['type']['includes']('window')||_0xda474[_0x14e713(0x131)][_0x14e713(0x147)](_0x14e713(0x13a))||_0xda474[_0x14e713(0x131)]['includes']('magnet'))&&this[_0x14e713(0x1e5)](_0xda474)),(_0xda474[_0x14e713(0x131)]===_0x14e713(0xf7)||_0xda474[_0x14e713(0x131)]===_0x14e713(0x15d))&&automation[_0x14e713(0x12a)](this);}}async[a0_0x566ec9(0x110)](_0x4b3e6a){const _0x46e77c=a0_0x566ec9;if(!this[_0x46e77c(0xfd)]||Date[_0x46e77c(0x157)]()-this[_0x46e77c(0x180)]>0x493e0)return;if(!this[_0x46e77c(0xfd)][_0x46e77c(0x1d8)]||!this['memoryCache'][_0x46e77c(0x1cc)])return;try{const _0x562944=JSON[_0x46e77c(0x225)](_0x4b3e6a),_0x3ceab5=this[_0x46e77c(0xfd)][_0x46e77c(0x1d8)];let _0x419c27=![];for(const _0x1c08dd in _0x3ceab5){if(_0x3ceab5[_0x1c08dd][_0x46e77c(0x147)]('AI')&&_0x562944[_0x1c08dd]&&!_0x562944[_0x1c08dd][_0x46e77c(0x147)]('AI')){_0x419c27=!![];break;}}_0x419c27&&(this[_0x46e77c(0xf0)][_0x46e77c(0x19c)]('ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).'),await this[_0x46e77c(0x226)](_0x46e77c(0x142),{'val':JSON[_0x46e77c(0x21b)](this['memoryCache'][_0x46e77c(0x1cc)]),'ack':!![]}),await this[_0x46e77c(0x226)]('analysis.energy.warmupSources',{'val':JSON[_0x46e77c(0x21b)](this[_0x46e77c(0xfd)][_0x46e77c(0x1d8)]),'ack':!![]}));}catch(_0x52fff8){}}async[a0_0x566ec9(0x1b0)](_0x165b05){const _0x3de6c4=a0_0x566ec9;if(typeof _0x165b05===_0x3de6c4(0x15f)&&_0x165b05[_0x3de6c4(0x123)]){if(_0x165b05['command']===_0x3de6c4(0x204))try{const _0x4b3f9b=await automation['scanThermostats'](this);this['sendTo'](_0x165b05[_0x3de6c4(0xee)],_0x165b05['command'],{'success':!![],'results':_0x4b3f9b},_0x165b05[_0x3de6c4(0x190)]);}catch(_0x2f4bc8){this['sendTo'](_0x165b05['from'],_0x165b05[_0x3de6c4(0x18d)],{'success':![],'error':_0x2f4bc8[_0x3de6c4(0x123)]},_0x165b05['callback']);}else{if(_0x165b05[_0x3de6c4(0x18d)]===_0x3de6c4(0x1e9))try{const {current_temps:_0x2aaec2,t_out:_0x137251,targets:_0x2cb716,t_forecast:_0x3dcb72}=_0x165b05['message'],_0x40f2fc=[];let _0x3bce4a={};try{const _0x1c902b=await this['getStateAsync']('analysis.energy.insulationScore');if(_0x1c902b&&_0x1c902b[_0x3de6c4(0x22d)]){const _0x4b3aa1=JSON['parse'](_0x1c902b[_0x3de6c4(0x22d)]);_0x3bce4a=_0x4b3aa1[_0x3de6c4(0xf5)]||_0x4b3aa1;}}catch(_0x4cba3c){}const _0x471e3b=_0x3dcb72!==undefined&&_0x3dcb72!==null?(_0x137251+_0x3dcb72)/0x2:_0x137251;for(const [_0x2c76b0,_0x509b5b]of Object[_0x3de6c4(0x1f3)](_0x2aaec2)){const _0x33e321=_0x2cb716[_0x2c76b0]||0x15;if(_0x509b5b<=_0x33e321)continue;let _0x419adb=_0x3bce4a[_0x2c76b0]||-0.5;if(_0x419adb>=0x0)_0x419adb=-0.5;const _0x4acaa6=Math[_0x3de6c4(0x1ce)](_0x419adb),_0x1aaca6=_0x509b5b-_0x33e321;let _0x32225d=Math[_0x3de6c4(0x15b)](_0x1aaca6/_0x4acaa6*0x3c);const _0x5e2957=_0x509b5b-_0x137251,_0x4aacc2=_0x509b5b-_0x471e3b;if(_0x4aacc2!==0x0&&_0x5e2957!==0x0){const _0x2fbe91=_0x5e2957/_0x4aacc2;_0x32225d=Math['floor'](_0x32225d*_0x2fbe91);}if(_0x32225d>0xf){if(_0x32225d>0xf0)_0x32225d=0xf0;_0x40f2fc[_0x3de6c4(0x12e)]({'room':_0x2c76b0,'minutes_safe':_0x32225d,'target':_0x33e321,'current':_0x509b5b,'savings_msg':_0x3de6c4(0x1f4)+_0x32225d+_0x3de6c4(0x196)});}}_0x40f2fc['sort']((_0xa7f1da,_0x535fba)=>_0x535fba[_0x3de6c4(0x19e)]-_0xa7f1da[_0x3de6c4(0x19e)]),this[_0x3de6c4(0xfa)](_0x165b05['from'],_0x165b05[_0x3de6c4(0x18d)],{'success':!![],'proposals':_0x40f2fc},_0x165b05[_0x3de6c4(0x190)]);}catch(_0x3eec42){this[_0x3de6c4(0xfa)](_0x165b05[_0x3de6c4(0xee)],_0x165b05[_0x3de6c4(0x18d)],{'success':![],'error':_0x3eec42[_0x3de6c4(0x123)]},_0x165b05[_0x3de6c4(0x190)]);}else{if(_0x165b05[_0x3de6c4(0x18d)]===_0x3de6c4(0x1fa))try{const _0x189317=_0x165b05[_0x3de6c4(0x123)][_0x3de6c4(0x1b9)],_0xe96c3a=_0x3de6c4(0x1bc),_0x422159=await this[_0x3de6c4(0x105)](_0xe96c3a);let _0x296822={};if(_0x422159&&_0x422159[_0x3de6c4(0x22d)])try{_0x296822=JSON['parse'](_0x422159[_0x3de6c4(0x22d)]);}catch(_0x2b2a28){}_0x189317&&_0x296822[_0x189317]?(delete _0x296822[_0x189317],await this[_0x3de6c4(0x226)](_0xe96c3a,{'val':JSON[_0x3de6c4(0x21b)](_0x296822),'ack':!![]}),this[_0x3de6c4(0xf0)]['info']('ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27'+_0x189317+_0x3de6c4(0x14c)),this[_0x3de6c4(0xfa)](_0x165b05[_0x3de6c4(0xee)],_0x165b05[_0x3de6c4(0x18d)],{'success':!![]},_0x165b05['callback'])):this['sendTo'](_0x165b05[_0x3de6c4(0xee)],_0x165b05[_0x3de6c4(0x18d)],{'success':![],'error':_0x3de6c4(0x118)},_0x165b05[_0x3de6c4(0x190)]);}catch(_0x24dc47){this[_0x3de6c4(0xfa)](_0x165b05['from'],_0x165b05[_0x3de6c4(0x18d)],{'success':![],'error':_0x24dc47[_0x3de6c4(0x123)]},_0x165b05['callback']);}else{if(_0x165b05[_0x3de6c4(0x18d)]==='dismissAutomation')await this[_0x3de6c4(0x226)](_0x3de6c4(0x139),{'val':![],'ack':!![]}),await this[_0x3de6c4(0x226)](_0x3de6c4(0x232),{'val':'','ack':!![]}),await this[_0x3de6c4(0x226)](_0x3de6c4(0x145),{'val':'','ack':!![]}),this[_0x3de6c4(0xfa)](_0x165b05[_0x3de6c4(0xee)],_0x165b05[_0x3de6c4(0x18d)],{'success':!![]},_0x165b05[_0x3de6c4(0x190)]);else{if(_0x165b05[_0x3de6c4(0x18d)]===_0x3de6c4(0x1a1)){const {targetId:_0x263662,targetValue:_0xa59306}=_0x165b05[_0x3de6c4(0x123)];await this['setStateAsync'](_0x3de6c4(0x139),{'val':!![],'ack':!![]}),await this[_0x3de6c4(0x226)]('analysis.automation.description',{'val':'Simulation\x20durch\x20Admin\x20(Test)','ack':!![]}),await this[_0x3de6c4(0x226)](_0x3de6c4(0x145),{'val':_0x263662,'ack':!![]}),await this['setStateAsync'](_0x3de6c4(0x200),{'val':String(_0xa59306),'ack':!![]}),this[_0x3de6c4(0xfa)](_0x165b05[_0x3de6c4(0xee)],_0x165b05[_0x3de6c4(0x18d)],{'success':!![]},_0x165b05[_0x3de6c4(0x190)]);}else{if(_0x165b05[_0x3de6c4(0x18d)]===_0x3de6c4(0xf3))try{const _0x34b8b3=_0x165b05[_0x3de6c4(0x123)]['apiKey'];if(!_0x34b8b3)throw new Error(_0x3de6c4(0x103));const _0x398f2a=new GoogleGenerativeAI(_0x34b8b3),_0x2aa71a=_0x398f2a['getGenerativeModel']({'model':GEMINI_MODEL}),_0x286f7a=await _0x2aa71a[_0x3de6c4(0x1e0)](_0x3de6c4(0x230)),_0x15506a=await _0x286f7a['response'];if(_0x15506a[_0x3de6c4(0x201)]())this[_0x3de6c4(0xfa)](_0x165b05[_0x3de6c4(0xee)],_0x165b05[_0x3de6c4(0x18d)],{'success':!![],'message':_0x3de6c4(0x17a)},_0x165b05[_0x3de6c4(0x190)]);else throw new Error(_0x3de6c4(0xfb));}catch(_0x33ebc4){this['sendTo'](_0x165b05[_0x3de6c4(0xee)],_0x165b05[_0x3de6c4(0x18d)],{'success':![],'message':_0x33ebc4[_0x3de6c4(0x123)]},_0x165b05[_0x3de6c4(0x190)]);}else{if(_0x165b05[_0x3de6c4(0x18d)]===_0x3de6c4(0x222))try{const _0x15af73=await scanner[_0x3de6c4(0x124)](this,_0x165b05[_0x3de6c4(0x123)]||{});this[_0x3de6c4(0xfa)](_0x165b05['from'],_0x165b05[_0x3de6c4(0x18d)],{'success':!![],'devices':_0x15af73},_0x165b05['callback']);}catch(_0x38b4f1){this[_0x3de6c4(0xfa)](_0x165b05[_0x3de6c4(0xee)],_0x165b05[_0x3de6c4(0x18d)],{'success':![],'error':_0x38b4f1['message']},_0x165b05['callback']);}else{if(_0x165b05[_0x3de6c4(0x18d)]===_0x3de6c4(0x206))try{const {matrix:_0x58784a}=_0x165b05[_0x3de6c4(0x123)],_0x14afca=await this[_0x3de6c4(0x105)](_0x3de6c4(0x1eb));if(_0x14afca&&_0x14afca['val']){const _0x5dc96b=JSON[_0x3de6c4(0x225)](_0x14afca[_0x3de6c4(0x22d)]);_0x5dc96b[_0x3de6c4(0x154)]=_0x58784a,_0x5dc96b['updated']=Date[_0x3de6c4(0x157)](),await this[_0x3de6c4(0x226)](_0x3de6c4(0x1eb),{'val':JSON[_0x3de6c4(0x21b)](_0x5dc96b),'ack':!![]}),pythonBridge[_0x3de6c4(0x177)](this,_0x3de6c4(0x186),_0x5dc96b);}this[_0x3de6c4(0xfa)](_0x165b05['from'],_0x165b05[_0x3de6c4(0x18d)],{'success':!![]},_0x165b05[_0x3de6c4(0x190)]);}catch(_0x466b3f){this['log']['error'](_0x466b3f);}else{if(_0x165b05['command']===_0x3de6c4(0x114))this['sendTo'](_0x165b05[_0x3de6c4(0xee)],_0x165b05[_0x3de6c4(0x18d)],{'success':!![],'dailyDigests':this['dailyDigests']||[],'analysisHistory':this[_0x3de6c4(0x1c4)]||[]},_0x165b05[_0x3de6c4(0x190)]);else{if(_0x165b05[_0x3de6c4(0x18d)]===_0x3de6c4(0x11a)){const _0x369cd0=this['dailyDigests'][_0x3de6c4(0x1ac)],_0x33eb76=new Array(0x18)[_0x3de6c4(0x138)](0x0),_0x4597a5=new Date()[_0x3de6c4(0x19f)](0x0,0x0,0x0,0x0);this[_0x3de6c4(0xe8)]&&this['eventHistory'][_0x3de6c4(0x1a2)](_0x39f0bf=>{const _0xe79ed7=_0x3de6c4;if(_0x39f0bf[_0xe79ed7(0x121)]>=_0x4597a5){const _0x58dd8f=new Date(_0x39f0bf[_0xe79ed7(0x121)])['getHours']();if(_0x58dd8f>=0x0&&_0x58dd8f<0x18)_0x33eb76[_0x58dd8f]++;}});let _0x3352fc=![],_0x291008='',_0x75b940='',_0x189082='';try{const _0x3a484d=await this[_0x3de6c4(0x105)](_0x3de6c4(0x139));if(_0x3a484d&&_0x3a484d['val']){_0x3352fc=!![];const _0x16f199=await this[_0x3de6c4(0x105)](_0x3de6c4(0x232));_0x291008=_0x16f199?_0x16f199['val']:'';const _0x5daa29=await this[_0x3de6c4(0x105)]('analysis.automation.targetId');_0x75b940=_0x5daa29?_0x5daa29[_0x3de6c4(0x22d)]:'';const _0x17fb27=await this[_0x3de6c4(0x105)](_0x3de6c4(0x200));_0x189082=_0x17fb27?_0x17fb27[_0x3de6c4(0x22d)]:'';}}catch(_0x325f0a){}const _0x4272c6=await this[_0x3de6c4(0x1e8)](),_0x1ecbac=(this[_0x3de6c4(0x1a3)][_0x3de6c4(0x1c8)]||[])[_0x3de6c4(0x112)](_0x26b9aa=>_0x26b9aa[_0x3de6c4(0x1e7)]),_0x3fb802=_0x4272c6&&_0x1ecbac;let _0x4467d0='';try{const _0x31c4b1=await this['getStateAsync'](_0x3de6c4(0x116));if(_0x31c4b1&&_0x31c4b1[_0x3de6c4(0x22d)])_0x4467d0=_0x31c4b1[_0x3de6c4(0x22d)];}catch(_0x303f3f){}this[_0x3de6c4(0xfa)](_0x165b05[_0x3de6c4(0xee)],_0x165b05[_0x3de6c4(0x18d)],{'success':!![],'eventHistory':this['eventHistory'][_0x3de6c4(0x188)](0x0,0xf),'stats':{'digestCount':_0x369cd0,'isPresent':this[_0x3de6c4(0x1af)],'hourlyActivity':_0x33eb76,'solarActive':_0x3fb802,'presenceWho':_0x4467d0},'automation':{'detected':_0x3352fc,'description':_0x291008,'targetId':_0x75b940,'targetValue':_0x189082}},_0x165b05['callback']);}else{if(_0x165b05[_0x3de6c4(0x18d)]===_0x3de6c4(0x20c)){const _0x153c91=await this[_0x3de6c4(0x10a)](_0x3de6c4(0x1ae),_0x3de6c4(0x100)),_0x319a94=[];if(_0x153c91)for(const _0x4909b3 in _0x153c91){const _0x3578a6=_0x153c91[_0x4909b3],_0x5938aa=(_0x3578a6['common']&&typeof _0x3578a6[_0x3de6c4(0x16c)][_0x3de6c4(0x1a4)]==='object'?_0x3578a6[_0x3de6c4(0x16c)][_0x3de6c4(0x1a4)]['de']:_0x3578a6[_0x3de6c4(0x16c)][_0x3de6c4(0x1a4)])||_0x3578a6[_0x3de6c4(0x16c)][_0x3de6c4(0x1a4)];_0x319a94[_0x3de6c4(0x12e)]({'id':_0x4909b3,'name':_0x5938aa});}const _0x37d532=await this['getForeignObjectsAsync'](_0x3de6c4(0x16b),_0x3de6c4(0x100)),_0x543869=[];if(_0x37d532)for(const _0x45d7dc in _0x37d532){const _0xf04302=_0x37d532[_0x45d7dc],_0x4c6ea2=(_0xf04302[_0x3de6c4(0x16c)]&&typeof _0xf04302[_0x3de6c4(0x16c)]['name']===_0x3de6c4(0x15f)?_0xf04302[_0x3de6c4(0x16c)][_0x3de6c4(0x1a4)]['de']:_0xf04302[_0x3de6c4(0x16c)][_0x3de6c4(0x1a4)])||_0x45d7dc[_0x3de6c4(0x134)]('.')[_0x3de6c4(0x213)]();_0x543869[_0x3de6c4(0x12e)](_0x4c6ea2);}this[_0x3de6c4(0xfa)](_0x165b05[_0x3de6c4(0xee)],_0x165b05[_0x3de6c4(0x18d)],{'success':!![],'enums':_0x319a94,'rooms':_0x543869},_0x165b05['callback']);}else{if(_0x165b05[_0x3de6c4(0x18d)]===_0x3de6c4(0x22f))try{let _0x5a03f9='Kein\x20Wetter-Adapter',_0x325865=_0x3de6c4(0x1b3);if(this['config'][_0x3de6c4(0x170)]){const _0x6ad7a4=await recorder['getOutsideTemperatureNumeric'](this);_0x5a03f9=_0x6ad7a4!==null?_0x6ad7a4+'Â°C':_0x3de6c4(0x1b4);}if(this[_0x3de6c4(0x1a3)][_0x3de6c4(0x18a)]){const _0x5b91ba=await this[_0x3de6c4(0x1cb)](_0x3de6c4(0x223)+this[_0x3de6c4(0x1a3)][_0x3de6c4(0x18a)]);_0x325865=_0x5b91ba?'Verbunden':'Instanz\x20nicht\x20gefunden';}this['sendTo'](_0x165b05[_0x3de6c4(0xee)],_0x165b05[_0x3de6c4(0x18d)],{'success':!![],'weather':_0x5a03f9,'calendar':_0x325865},_0x165b05[_0x3de6c4(0x190)]);}catch(_0xab4dd8){this['sendTo'](_0x165b05[_0x3de6c4(0xee)],_0x165b05[_0x3de6c4(0x18d)],{'success':![],'error':_0xab4dd8[_0x3de6c4(0x123)]},_0x165b05[_0x3de6c4(0x190)]);}else{if(_0x165b05[_0x3de6c4(0x18d)]===_0x3de6c4(0x1c2))try{const _0x24f110=_0x165b05[_0x3de6c4(0x123)][_0x3de6c4(0x165)],_0x1a6c8d=await this['getForeignStateAsync'](_0x24f110+_0x3de6c4(0x1a7));let _0x2177a3=[];if(_0x1a6c8d&&_0x1a6c8d[_0x3de6c4(0x22d)]){const _0x50c4ae=JSON[_0x3de6c4(0x225)](_0x1a6c8d['val']),_0x5ad5bd=new Set();Array[_0x3de6c4(0x125)](_0x50c4ae)&&_0x50c4ae[_0x3de6c4(0x1a2)](_0x20dce4=>{const _0x2d5b79=_0x3de6c4;if(_0x20dce4[_0x2d5b79(0x210)])_0x5ad5bd[_0x2d5b79(0x14a)](_0x20dce4[_0x2d5b79(0x210)]);else{if(_0x20dce4['calendarName'])_0x5ad5bd[_0x2d5b79(0x14a)](_0x20dce4['calendarName']);}}),_0x2177a3=Array[_0x3de6c4(0xee)](_0x5ad5bd)['sort']();}if(_0x2177a3['length']===0x0)_0x2177a3=[_0x3de6c4(0x10d)];this[_0x3de6c4(0xfa)](_0x165b05[_0x3de6c4(0xee)],_0x165b05[_0x3de6c4(0x18d)],{'success':!![],'names':_0x2177a3},_0x165b05[_0x3de6c4(0x190)]);}catch(_0xa38349){this[_0x3de6c4(0xfa)](_0x165b05[_0x3de6c4(0xee)],_0x165b05[_0x3de6c4(0x18d)],{'success':![],'error':_0xa38349[_0x3de6c4(0x123)]},_0x165b05[_0x3de6c4(0x190)]);}else{if(_0x165b05[_0x3de6c4(0x18d)]===_0x3de6c4(0x22b))try{await setup[_0x3de6c4(0x194)](this,_0x3de6c4(0x1b1),![],![]),this[_0x3de6c4(0xfa)](_0x165b05['from'],_0x165b05['command'],{'success':!![],'message':_0x3de6c4(0x1dc)},_0x165b05['callback']);}catch(_0x1c5170){this[_0x3de6c4(0xf0)][_0x3de6c4(0x135)](_0x3de6c4(0x178)+_0x1c5170[_0x3de6c4(0x123)]),this[_0x3de6c4(0xfa)](_0x165b05[_0x3de6c4(0xee)],_0x165b05[_0x3de6c4(0x18d)],{'success':![],'message':_0x3de6c4(0x1ed)+_0x1c5170['message']},_0x165b05[_0x3de6c4(0x190)]);}}}}}}}}}}}}}}}}async[a0_0x566ec9(0x1db)](){const _0x5832b4=a0_0x566ec9;try{const _0x39ad0d=await this[_0x5832b4(0x105)](setup[_0x5832b4(0x1c1)]);_0x39ad0d&&_0x39ad0d[_0x5832b4(0x22d)]&&Object[_0x5832b4(0xf1)](setup[_0x5832b4(0x189)])['includes'](_0x39ad0d[_0x5832b4(0x22d)])?this[_0x5832b4(0x17c)]=_0x39ad0d[_0x5832b4(0x22d)]:(this['currentSystemMode']=setup['SYSTEM_MODES'][_0x5832b4(0x16f)],await this['setStateAsync'](setup['SYSTEM_DP_MODE'],{'val':setup[_0x5832b4(0x189)][_0x5832b4(0x16f)],'ack':!![]}));}catch(_0x32ee6b){this[_0x5832b4(0x17c)]=setup[_0x5832b4(0x189)][_0x5832b4(0x16f)];}}async[a0_0x566ec9(0x1f8)](){const _0x164145=a0_0x566ec9;try{const _0x45cd01=this[_0x164145(0x1a3)][_0x164145(0x159)]||[];let _0x4c3535=![];const _0x3c9571=[];for(const _0x4d3a15 of _0x45cd01){try{const _0x219339=await this[_0x164145(0x14b)](_0x4d3a15);_0x219339&&(_0x219339['val']===!![]||_0x219339[_0x164145(0x22d)]==='online'||_0x219339[_0x164145(0x22d)]===0x1)&&(_0x4c3535=!![],_0x3c9571[_0x164145(0x12e)](_0x4d3a15));}catch(_0x247156){}}return await this['setStateAsync']('system.presenceWho',{'val':_0x3c9571[_0x164145(0x17b)](',\x20'),'ack':!![]}),_0x4c3535&&(this[_0x164145(0x12b)]&&(this[_0x164145(0xf0)][_0x164145(0x19c)](_0x164145(0x14d)),recorder['abortExitTimer'](this)),!this[_0x164145(0x1af)]&&this[_0x164145(0x17c)]===setup['SYSTEM_MODES'][_0x164145(0x16f)]&&await recorder[_0x164145(0x104)](this,!![])),_0x4c3535;}catch(_0x5f5f8d){return![];}}async[a0_0x566ec9(0x167)](){const _0x4c2551=a0_0x566ec9;this[_0x4c2551(0xf0)][_0x4c2551(0x1f2)]('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await aiAgent[_0x4c2551(0xf9)](this),this[_0x4c2551(0x111)](),this[_0x4c2551(0x133)](),this[_0x4c2551(0x150)]();}async[a0_0x566ec9(0x1e8)](){const _0x46bb75=a0_0x566ec9,_0x11b5a3=[_0x46bb75(0x227),_0x46bb75(0x13d),_0x46bb75(0xff)],_0x762491=[_0x46bb75(0x198),_0x46bb75(0xec),_0x46bb75(0x21c)];for(const _0x15a10a of _0x11b5a3){for(const _0x56a600 of _0x762491){try{const _0x790b81=_0x15a10a+'.'+_0x56a600,_0x2bb4b7=await this[_0x46bb75(0x14b)](_0x790b81);if(_0x2bb4b7&&_0x2bb4b7[_0x46bb75(0x22d)]){const _0x2a07ed=String(_0x2bb4b7['val'])['toLowerCase']();if(_0x2a07ed[_0x46bb75(0x147)](_0x46bb75(0x1f7))||_0x2a07ed[_0x46bb75(0x147)](_0x46bb75(0x1bb))||_0x2a07ed[_0x46bb75(0x147)](_0x46bb75(0x10c))||_0x2a07ed[_0x46bb75(0x147)]('clear')||_0x2a07ed[_0x46bb75(0x147)](_0x46bb75(0x12c)))return!![];}}catch(_0x573688){}}}return![];}[a0_0x566ec9(0x133)](){const _0x4450b5=a0_0x566ec9;if(!this['isProVersion'])return;try{this['getState'](_0x4450b5(0x126),(_0x76823,_0x5e0da1)=>{const _0x26e6c0=_0x4450b5;_0x5e0da1&&_0x5e0da1['val']&&pythonBridge[_0x26e6c0(0x177)](this,_0x26e6c0(0x1be),{'sequences':JSON['parse'](_0x5e0da1['val'])});});}catch(_0x2fafb2){}}async[a0_0x566ec9(0x150)](){const _0x2b65c3=a0_0x566ec9;if(!this[_0x2b65c3(0x1b8)])return;try{const _0x41c13c=await recorder[_0x2b65c3(0x1cf)](this);if(_0x41c13c===null)return;const _0x4b7446={},_0x5d7b15={},_0x31dc20=this['config'][_0x2b65c3(0x1c8)]||[];for(const _0x37d02c of _0x31dc20){if(_0x37d02c[_0x2b65c3(0x131)]===_0x2b65c3(0xf7)&&_0x37d02c[_0x2b65c3(0x1c3)]){const _0x5c8d7f=this[_0x2b65c3(0x152)][_0x37d02c['id']];if(_0x5c8d7f!==undefined)_0x4b7446[_0x37d02c[_0x2b65c3(0x1c3)]]=_0x5c8d7f;if(_0x37d02c[_0x2b65c3(0x1e7)])_0x5d7b15[_0x37d02c[_0x2b65c3(0x1c3)]]=!![];}}const _0x5fd769=await this[_0x2b65c3(0x1e8)]();let _0x39189c={};try{const _0x2a9bf2=await this[_0x2b65c3(0x105)](_0x2b65c3(0x1f0));if(_0x2a9bf2&&_0x2a9bf2['val'])_0x39189c=JSON[_0x2b65c3(0x225)](_0x2a9bf2[_0x2b65c3(0x22d)]);}catch(_0x5bb6ba){}Object[_0x2b65c3(0x1ab)](_0x4b7446)[_0x2b65c3(0x1ac)]>0x0&&(pythonBridge['send'](this,_0x2b65c3(0x10f),{'current_temps':_0x4b7446,'t_out':_0x41c13c,'is_sunny':_0x5fd769,'solar_flags':_0x5d7b15,'warmup_targets':_0x39189c}),pythonBridge[_0x2b65c3(0x177)](this,_0x2b65c3(0x10b),{'current_temps':_0x4b7446,'t_out':_0x41c13c,'targets':{}}));}catch(_0x2ae826){}}[a0_0x566ec9(0x111)](){const _0xa8fd1a=a0_0x566ec9;if(!this[_0xa8fd1a(0x174)]||this[_0xa8fd1a(0x174)][_0xa8fd1a(0x1ac)]===0x0)return;const _0x501bbd=new Array(0x60)['fill'](0x0),_0x3d496d=new Date()[_0xa8fd1a(0x19f)](0x0,0x0,0x0,0x0);this[_0xa8fd1a(0x174)][_0xa8fd1a(0x1a2)](_0x43e947=>{const _0x343a3a=_0xa8fd1a,_0x586281=new Date(_0x43e947['timestamp']);if(_0x586281['getTime']()>=_0x3d496d){const _0x3f2149=_0x586281[_0x343a3a(0x169)](),_0xc48d4c=_0x586281['getMinutes'](),_0x414808=_0x3f2149*0x4+Math[_0x343a3a(0x15b)](_0xc48d4c/0xf);if(_0x414808>=0x0&&_0x414808<0x60)_0x501bbd[_0x414808]++;}}),this['setStateAsync'](_0xa8fd1a(0x1f1),{'val':JSON[_0xa8fd1a(0x21b)](_0x501bbd),'ack':!![]});}[a0_0x566ec9(0x146)](){const _0x8a7970=a0_0x566ec9;if(!this[_0x8a7970(0x1fd)]||this['dailyDigests'][_0x8a7970(0x1ac)]<0x2)return;const _0xdadf3=this[_0x8a7970(0x1fd)][_0x8a7970(0xf8)](_0x177a79=>{const _0x34dc04=_0x8a7970,_0x2ba177=(_0x177a79[_0x34dc04(0x1ee)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x2ba177]||0x32;});pythonBridge[_0x8a7970(0x177)](this,_0x8a7970(0x218),{'values':_0xdadf3,'tag':'Activity-Level'});}async['handleInfrasound'](_0x26edae){const _0x5cc54a=a0_0x566ec9;if(_0x26edae==null||typeof _0x26edae!=='number')return;const _0x3de475=Date[_0x5cc54a(0x157)]();this[_0x5cc54a(0x20b)][_0x5cc54a(0x12e)]({'ts':_0x3de475,'val':_0x26edae}),this[_0x5cc54a(0x20b)]=this['pressureBuffer'][_0x5cc54a(0xe5)](_0x1160e7=>_0x3de475-_0x1160e7['ts']<0x1388);if(this[_0x5cc54a(0x1d0)])return;if(this[_0x5cc54a(0x1a3)]['infrasoundArmingId']){const _0x2552c8=await this['getForeignStateAsync'](this[_0x5cc54a(0x1a3)][_0x5cc54a(0x1a5)]);if(_0x2552c8&&!_0x2552c8['val'])return;}const _0x49def5=this['config'][_0x5cc54a(0x143)]||0.04;if(Math[_0x5cc54a(0x1ce)](_0x26edae)>=_0x49def5){this[_0x5cc54a(0xf0)]['warn'](_0x5cc54a(0x214)+_0x26edae+_0x5cc54a(0x1d6)+_0x49def5+')'),await this[_0x5cc54a(0x226)](_0x5cc54a(0x1e2),{'val':!![],'ack':!![]});const _0x8bbda2=this[_0x5cc54a(0x1af)];_0x8bbda2?(this[_0x5cc54a(0xf0)][_0x5cc54a(0x19c)](_0x5cc54a(0x166)),this[_0x5cc54a(0x1c5)](_0x26edae,_0x5cc54a(0x10e))):(this[_0x5cc54a(0x1c5)](_0x26edae,'ALARM'),this[_0x5cc54a(0x194)](_0x5cc54a(0x168)+_0x26edae+_0x5cc54a(0x211))),this['infrasoundLocked']=!![],setTimeout(()=>{const _0x30694e=_0x5cc54a;this[_0x30694e(0x1d0)]=![];},0x2710);}}async[a0_0x566ec9(0x1c5)](_0x77a4fb,_0x3fc6b8=a0_0x566ec9(0x129)){const _0x2dbb4c=a0_0x566ec9,_0x5f3c17=Date[_0x2dbb4c(0x157)](),_0x404c95=this[_0x2dbb4c(0x1a3)][_0x2dbb4c(0x1c8)]||[];setTimeout(async()=>{const _0x26c509=_0x2dbb4c;let _0x15fcd9=null,_0x30980a=_0x26c509(0x17e);const _0x55a8a8=[],_0x1024be=_0x404c95[_0x26c509(0xe5)](_0x2bf037=>_0x2bf037[_0x26c509(0x131)]&&(_0x2bf037[_0x26c509(0x131)][_0x26c509(0x147)](_0x26c509(0x15c))||_0x2bf037[_0x26c509(0x131)][_0x26c509(0x147)]('door')||_0x2bf037[_0x26c509(0x131)][_0x26c509(0x147)](_0x26c509(0x13c))||_0x2bf037[_0x26c509(0x131)][_0x26c509(0x147)](_0x26c509(0xfc)))||_0x2bf037[_0x26c509(0x16d)]&&(_0x2bf037[_0x26c509(0x16d)][_0x26c509(0x147)]('sensor.window')||_0x2bf037['role'][_0x26c509(0x147)]('sensor.door')));for(const _0x4259be of _0x1024be){try{const _0x29f111=await this[_0x26c509(0x14b)](_0x4259be['id']);if(_0x29f111){if(_0x29f111['ts']>=_0x5f3c17-0x7d0){_0x15fcd9=_0x4259be[_0x26c509(0x1a4)]||_0x4259be['id'],_0x30980a=_0x26c509(0x195)+_0x15fcd9;break;}}}catch(_0xe37fb0){}}const _0x3cc5c6={'timestamp':_0x5f3c17,'pressure':_0x77a4fb,'isMatch':!!_0x15fcd9,'explanation':_0x30980a,'type':_0x3fc6b8};await this[_0x26c509(0x161)](_0x3cc5c6),this['log'][_0x26c509(0x19c)](_0x26c509(0x11e)+(!!_0x15fcd9?_0x26c509(0x179):_0x26c509(0x216)));},0x1388);}async['analyzeWindowOpening'](_0x1a6c1d){const _0x23a319=a0_0x566ec9,_0x535f73=Date[_0x23a319(0x157)](),_0x13e6b3=_0x1a6c1d[_0x23a319(0x1a4)]||_0x1a6c1d['id'][_0x23a319(0x134)]('.')[_0x23a319(0x213)]();let _0x30bee5=0x0;setTimeout(async()=>{const _0x5d29ac=_0x23a319;this[_0x5d29ac(0x20b)][_0x5d29ac(0x1a2)](_0x2f9bd2=>{const _0x431578=_0x5d29ac;_0x2f9bd2['ts']>=_0x535f73-0xfa0&&_0x2f9bd2['ts']<=_0x535f73+0x3e8&&(Math[_0x431578(0x1ce)](_0x2f9bd2['val'])>Math[_0x431578(0x1ce)](_0x30bee5)&&(_0x30bee5=_0x2f9bd2['val']));});const _0x52ec2e=this['config'][_0x5d29ac(0x143)]||0.04,_0x2a8369=Math[_0x5d29ac(0x1ce)](_0x30bee5)>=_0x52ec2e,_0x56d5c8={'timestamp':_0x535f73,'pressure':_0x30bee5,'isMatch':_0x2a8369,'explanation':_0x5d29ac(0x1f9)+_0x13e6b3,'type':'CALIB'};await this[_0x5d29ac(0x161)](_0x56d5c8),this[_0x5d29ac(0xf0)][_0x5d29ac(0x1f2)](_0x5d29ac(0x212)+_0x13e6b3+_0x5d29ac(0x191)+_0x30bee5[_0x5d29ac(0x234)](0x4)+_0x5d29ac(0x113)+_0x52ec2e+')');},0x1f4);}async[a0_0x566ec9(0x161)](_0x20b34d){const _0x38091e=a0_0x566ec9;try{const _0x283f24=await this[_0x38091e(0x105)](_0x38091e(0x19b));let _0x226426=[];if(_0x283f24&&_0x283f24['val'])_0x226426=JSON[_0x38091e(0x225)](_0x283f24[_0x38091e(0x22d)]);_0x226426['unshift'](_0x20b34d);if(_0x226426[_0x38091e(0x1ac)]>0x14)_0x226426=_0x226426[_0x38091e(0x188)](0x0,0x14);await this['setStateAsync']('analysis.security.infrasoundLog',{'val':JSON[_0x38091e(0x21b)](_0x226426),'ack':!![]});}catch(_0x5a2438){this['log'][_0x38091e(0x135)](_0x38091e(0x1de)+_0x5a2438[_0x38091e(0x123)]);}}[a0_0x566ec9(0x194)](_0x293034){const _0x50c192=a0_0x566ec9;this[_0x50c192(0x1a3)][_0x50c192(0x21f)]&&this[_0x50c192(0x1a3)][_0x50c192(0x108)]&&this[_0x50c192(0xfa)](this[_0x50c192(0x1a3)]['notifyPushoverInstance'],'send',{'message':_0x293034,'title':_0x50c192(0x1a6),'priority':0x1}),this['config'][_0x50c192(0x1b2)]&&this['config'][_0x50c192(0x156)]&&this[_0x50c192(0xfa)](this[_0x50c192(0x1a3)]['notifyTelegramInstance'],_0x50c192(0x177),{'text':_0x293034});}}if(require[a0_0x566ec9(0x1ec)]!==module)module[a0_0x566ec9(0x155)]=_0x4be64d=>new CogniLiving(_0x4be64d);else new CogniLiving();