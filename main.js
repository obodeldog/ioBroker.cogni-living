function a0_0x154f(_0x2c174b,_0xf2710){const _0x30ba26=a0_0x50a8();return a0_0x154f=function(_0x34724c,_0x5beca5){_0x34724c=_0x34724c-0x69;let _0x50a8d4=_0x30ba26[_0x34724c];return _0x50a8d4;},a0_0x154f(_0x2c174b,_0xf2710);}const a0_0x1b8814=a0_0x154f;(function(_0x5d31fc,_0x5f51e3){const _0xadaf33=a0_0x154f,_0x56460d=_0x5d31fc();while(!![]){try{const _0x2d1951=-parseInt(_0xadaf33(0xa5))/0x1*(parseInt(_0xadaf33(0x120))/0x2)+-parseInt(_0xadaf33(0x96))/0x3*(parseInt(_0xadaf33(0x9b))/0x4)+-parseInt(_0xadaf33(0xbf))/0x5+-parseInt(_0xadaf33(0x100))/0x6*(parseInt(_0xadaf33(0x103))/0x7)+parseInt(_0xadaf33(0x85))/0x8+-parseInt(_0xadaf33(0x6d))/0x9+parseInt(_0xadaf33(0xe3))/0xa;if(_0x2d1951===_0x5f51e3)break;else _0x56460d['push'](_0x56460d['shift']());}catch(_0x5e4af2){_0x56460d['push'](_0x56460d['shift']());}}}(a0_0x50a8,0x5a4ff));const a0_0x5beca5=(function(){let _0x169328=!![];return function(_0x1963c1,_0x3c7d9e){const _0x1327e7=_0x169328?function(){const _0x1b3d6c=a0_0x154f;if(_0x3c7d9e){const _0x4bcf06=_0x3c7d9e[_0x1b3d6c(0xd3)](_0x1963c1,arguments);return _0x3c7d9e=null,_0x4bcf06;}}:function(){};return _0x169328=![],_0x1327e7;};}()),a0_0x34724c=a0_0x5beca5(this,function(){const _0x322fb7=a0_0x154f;return a0_0x34724c[_0x322fb7(0x71)]()[_0x322fb7(0x84)](_0x322fb7(0xd2))['toString']()[_0x322fb7(0xb2)](a0_0x34724c)[_0x322fb7(0x84)]('(((.+)+)+)+$');});a0_0x34724c();'use strict';const utils=require(a0_0x1b8814(0x6f)),{GoogleGenerativeAI}=require('@google/generative-ai'),installer=require('./lib/installer'),scanner=require('./lib/scanner'),schedulers=require('./lib/scheduler'),topology=require(a0_0x1b8814(0xb9)),setup=require(a0_0x1b8814(0xe9)),recorder=require('./lib/recorder'),pythonBridge=require(a0_0x1b8814(0x90)),aiAgent=require('./lib/ai_agent'),deadMan=require(a0_0x1b8814(0x9e)),GEMINI_MODEL=a0_0x1b8814(0xe8),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x50a8(){const _0x4423c1=['log','20283230Whzozy','geminiModel','triggerEnergyPrediction','TRAIN_HEALTH','genAI','models/gemini-flash-latest','./lib/setup','analysis.training.triggerHealth','find','enum','NORMAL','getOverviewData','scanDevices','LTM.rawEventLog','system.presenceWho','loadSystemMode','enum.functions.*','subscribeStates','analysis.triggerBriefing','analysis.automation.autoApply','ðŸ§ \x20Triggering\x20Security\x20Training...','system.mode','presenceDevices','getOutsideTemperatureNumeric','notifyTelegramInstance','briefingJob','analysis.automation.triggerAction','setupDriftAnalysisScheduler','config','24RpKbfk','initSystemConfig','analysisTimer','14959saicDt','analysis.training.triggerSecurity','cogni-living\x20adapter\x20starting\x20(v','licenseKey','onStateChange','val','unload','driftAnalysisTimer','timestamp','createAllObjects','updateHealthVector','initHistory','exports','.communicate.request','onReady','Adapter','type','location','length','toLowerCase','from','sendMorningBriefing','.system.mode','temperature','getForeignStateAsync','namespace','eventHistory','fill','scanForDevices','206srtIrT','activityLevel','matrix','startSystem','startService','bind','WiFi\x20Presence\x20detected.','systemConfig','LTM.baselineStatus','abortExitTimer','common','notifyTelegramEnabled','Topology\x20Update\x20Error:\x20','info','2198412DmjGWQ','setPresence','@iobroker/adapter-core','setupModeResetScheduler','toString','split','runBaselineDriftAnalysis','createDailyDigest','cancel','triggerBriefing','setState','checkLicense','LTM.trainingData.sequences','stateChange','LTM.trainingData.thermodynamics','isProVersion','analysis.training.triggerTopology','enum.rooms.*','endsWith','Activity-Level','application/json','checkWifiPresence','VACATION','search','1633880drsstK','analysis.training.status','Sec-Training\x20started...','join','runPythonHealthCheck','dailyDigests','online','forEach','updateTopology','setupLtmScheduler','TRAIN_SECURITY','./lib/python_bridge','dependencyInstallInProgress','push','analysis.topology.structure','object','analysis.training.triggerEnergy','231aMQdmj','TRAIN_COMFORT','analysis.trigger','name','ANALYZE_TREND','20564jOscMl','callback','PYTHON_EXE','./lib/dead_man','isGracePeriodActive','exitGraceTimer','main','ltmJob','includes','message','5485eTXSbp','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','stringify','triggerDailyDigest','onMessage','SYSTEM_DP_MODE','modeResetJob','devices','exitTimer','rawEventLog',')\x20-\x20Phase\x20C\x20(Dead\x20Man\x20Switch)','updateTopologyMatrix','debug','constructor','runGeminiAnalysis','getForeignObjectsAsync','minDaysForBaseline','updateLocation','pop','processSensorEvent','./lib/topology','getMinutes','Aktiv\x20(','keys','subscribeForeignStatesAsync','geminiApiKey','3245055wEGYfP','initZombies','testApiKey','SET_TOPOLOGY','ðŸ•¸ï¸\x20Topology\x20Graph\x20manually\x20updated\x20by\x20user.','onUnload','getStateAsync','inactivityThresholdHours','now','executeAutomationAction','values','setStateAsync','SYSTEM_MODES','triggerGaitAnalysis','currentSystemMode','PREDICT_ENERGY','analysis.health.todayVector','error','LTM.dailyDigests','(((.+)+)+)+$','apply','isPresent','runAutopilot','analysisInterval','parse','Gemini\x20Init\x20Error:\x20','send','getHours','sendTo','cogni-living','map','command','motion','ready','analysis.training.triggerComfort'];a0_0x50a8=function(){return _0x4423c1;};return a0_0x50a8();}class CogniLiving extends utils[a0_0x1b8814(0x112)]{constructor(_0xa98795){const _0x5da9f4=a0_0x1b8814;super({..._0xa98795,'name':_0x5da9f4(0xdc)}),this['eventHistory']=[],this['analysisHistory']=[],this[_0x5da9f4(0xae)]=[],this[_0x5da9f4(0x8a)]=[],this['sensorLastValues']={},this[_0x5da9f4(0x127)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x5da9f4(0xd4)]=!![],this[_0x5da9f4(0xad)]=null,this[_0x5da9f4(0xa0)]=null,this[_0x5da9f4(0x9f)]=![],this[_0x5da9f4(0xe7)]=null,this['geminiModel']=null,this['currentSystemMode']=setup[_0x5da9f4(0xcb)][_0x5da9f4(0xed)],this['isProVersion']=![],this['lastAlertState']=![],this[_0x5da9f4(0x102)]=null,this[_0x5da9f4(0xa2)]=null,this[_0x5da9f4(0xab)]=null,this[_0x5da9f4(0x10a)]=null,this[_0x5da9f4(0xfc)]=null,this[_0x5da9f4(0x91)]=![],this['on'](_0x5da9f4(0xe0),this[_0x5da9f4(0x111)]['bind'](this)),this['on'](_0x5da9f4(0x7a),this[_0x5da9f4(0x107)]['bind'](this)),this['on'](_0x5da9f4(0x109),this[_0x5da9f4(0xc4)][_0x5da9f4(0x125)](this)),this['on'](_0x5da9f4(0xa4),this[_0x5da9f4(0xa9)]['bind'](this));}async[a0_0x1b8814(0x111)](){const _0x1e8fcc=a0_0x1b8814;this[_0x1e8fcc(0xe2)][_0x1e8fcc(0x6c)](_0x1e8fcc(0x105)+this['version']+_0x1e8fcc(0xaf));if(!installer['checkAndInstall'](this,()=>this[_0x1e8fcc(0x123)]()))return;}async['startSystem'](){const _0x4295e4=a0_0x1b8814;await setup[_0x4295e4(0xc0)](this);try{this[_0x4295e4(0x7c)]=await setup[_0x4295e4(0x78)](this['config'][_0x4295e4(0x106)]);}catch(_0x3e3894){}if(!this[_0x4295e4(0xff)][_0x4295e4(0xc6)]||this[_0x4295e4(0xff)]['inactivityThresholdHours']<0.1)this[_0x4295e4(0xff)][_0x4295e4(0xc6)]=0xc;await setup[_0x4295e4(0x10e)](this),await setup[_0x4295e4(0x101)](this);if(this[_0x4295e4(0xff)][_0x4295e4(0xbe)])try{this[_0x4295e4(0xe7)]=new GoogleGenerativeAI(this[_0x4295e4(0xff)]['geminiApiKey']),this[_0x4295e4(0xe4)]=this[_0x4295e4(0xe7)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x4295e4(0x81)}}),this['log']['info']('Gemini\x20AI\x20initialized.');}catch(_0x4c3c1c){this[_0x4295e4(0xe2)]['error'](_0x4295e4(0xd8)+_0x4c3c1c[_0x4295e4(0xa4)]);}await setup[_0x4295e4(0x10c)](this),await this[_0x4295e4(0xf2)]();try{const _0x2ade47=await this['getStateAsync'](_0x4295e4(0xf0));if(_0x2ade47&&_0x2ade47['val'])this['rawEventLog']=JSON[_0x4295e4(0xd7)](_0x2ade47[_0x4295e4(0x108)]);}catch(_0xbd8532){this['rawEventLog']=[];}try{const _0x409c26=await this[_0x4295e4(0xc5)](_0x4295e4(0xd1));if(_0x409c26&&_0x409c26['val'])this[_0x4295e4(0x8a)]=JSON[_0x4295e4(0xd7)](_0x409c26[_0x4295e4(0x108)]);}catch(_0xba2c32){this['dailyDigests']=[];}const _0xf23910=this[_0x4295e4(0x8a)][_0x4295e4(0x115)]>=(this['config']['minDaysForBaseline']||0x7)?_0x4295e4(0xbb)+this[_0x4295e4(0x8a)][_0x4295e4(0x115)]+'\x20Tage)':'Lernphase\x20('+this[_0x4295e4(0x8a)][_0x4295e4(0x115)]+'/'+(this[_0x4295e4(0xff)][_0x4295e4(0xb5)]||0x7)+')';await this[_0x4295e4(0xca)](_0x4295e4(0x128),{'val':_0xf23910,'ack':!![]}),this[_0x4295e4(0xf4)](_0x4295e4(0x98)),this[_0x4295e4(0xf4)]('LTM.triggerDailyDigest'),this[_0x4295e4(0xf4)](_0x4295e4(0xf8)),this[_0x4295e4(0xf4)](_0x4295e4(0xf5)),this[_0x4295e4(0xf4)](_0x4295e4(0xfd)),this[_0x4295e4(0xf4)](_0x4295e4(0xf6)),this[_0x4295e4(0xf4)](_0x4295e4(0x104)),this[_0x4295e4(0xf4)](_0x4295e4(0xea)),this['subscribeStates'](_0x4295e4(0x95)),this[_0x4295e4(0xf4)](_0x4295e4(0xe1)),this[_0x4295e4(0xf4)]('analysis.training.triggerTopology');const _0x11bdce=this['config'][_0x4295e4(0xac)];if(_0x11bdce)for(const _0x5bad4e of _0x11bdce){await this['subscribeForeignStatesAsync'](_0x5bad4e['id']);}const _0x5e5d94=this['config'][_0x4295e4(0xf9)];if(_0x5e5d94)for(const _0x358cf3 of _0x5e5d94){await this[_0x4295e4(0xbd)](_0x358cf3);}if(this[_0x4295e4(0xff)][_0x4295e4(0x6a)]&&this[_0x4295e4(0xff)][_0x4295e4(0xfb)])await this[_0x4295e4(0xbd)](this[_0x4295e4(0xff)][_0x4295e4(0xfb)]+_0x4295e4(0x110));setTimeout(()=>this[_0x4295e4(0x82)](),0x1388);if(this[_0x4295e4(0x102)])clearInterval(this['analysisTimer']);const _0x35a2c6=this[_0x4295e4(0xff)][_0x4295e4(0xd6)]||0xf;_0x35a2c6>0x0&&(this[_0x4295e4(0x102)]=setInterval(()=>{const _0x1613a9=_0x4295e4;this[_0x1613a9(0xd5)]();},_0x35a2c6*0x3c*0x3e8)),schedulers[_0x4295e4(0x8e)](this,()=>aiAgent['createDailyDigest'](this,pythonBridge)),schedulers[_0x4295e4(0x70)](this),schedulers[_0x4295e4(0xfe)](this,()=>aiAgent[_0x4295e4(0x73)](this)),schedulers['setupBriefingScheduler'](this,()=>aiAgent[_0x4295e4(0x118)](this)),pythonBridge[_0x4295e4(0x124)](this,installer[_0x4295e4(0x9d)]),setTimeout(async()=>{const _0x3dd4a9=_0x4295e4;await topology['updateTopology'](this);try{const _0x56238b=await this['getStateAsync'](_0x3dd4a9(0x93));if(_0x56238b&&_0x56238b['val'])pythonBridge[_0x3dd4a9(0xd9)](this,'SET_TOPOLOGY',JSON[_0x3dd4a9(0xd7)](_0x56238b[_0x3dd4a9(0x108)]));}catch(_0xf189d1){}this[_0x3dd4a9(0x89)](),this[_0x3dd4a9(0xcc)](),this[_0x3dd4a9(0xe5)](),this[_0x3dd4a9(0x10d)]();},0x1388);}['onUnload'](_0x317a40){const _0x3bad5d=a0_0x1b8814;if(this[_0x3bad5d(0x102)])clearInterval(this['analysisTimer']);if(this[_0x3bad5d(0x10a)])clearInterval(this[_0x3bad5d(0x10a)]);if(this[_0x3bad5d(0xa2)])this[_0x3bad5d(0xa2)][_0x3bad5d(0x75)]();if(this[_0x3bad5d(0xab)])this[_0x3bad5d(0xab)][_0x3bad5d(0x75)]();if(this[_0x3bad5d(0xfc)])this['briefingJob']['cancel']();recorder[_0x3bad5d(0x129)](this),pythonBridge['stopService'](this),_0x317a40();}async['onStateChange'](_0x2e30c7,_0x22aaba){const _0x1c3916=a0_0x1b8814;if(!_0x22aaba||this[_0x1c3916(0x91)])return;if(_0x2e30c7[_0x1c3916(0xa3)]('telegram')&&_0x2e30c7[_0x1c3916(0x7f)]('communicate.request')&&_0x22aaba[_0x1c3916(0x108)])return;if(_0x2e30c7===this[_0x1c3916(0x11c)]+_0x1c3916(0x119)){if(_0x22aaba[_0x1c3916(0x108)]&&Object[_0x1c3916(0xc9)](setup[_0x1c3916(0xcb)])[_0x1c3916(0xa3)](_0x22aaba[_0x1c3916(0x108)])){this[_0x1c3916(0xcd)]=_0x22aaba[_0x1c3916(0x108)];if(_0x22aaba[_0x1c3916(0x108)]===setup[_0x1c3916(0xcb)][_0x1c3916(0x83)])await recorder[_0x1c3916(0x6e)](this,![]);else await recorder['setPresence'](this,!![]);}if(!_0x22aaba['ack'])this[_0x1c3916(0x77)](_0x2e30c7,{'val':this[_0x1c3916(0xcd)],'ack':!![]});return;}if(!_0x22aaba['ack']){_0x2e30c7[_0x1c3916(0xa3)](_0x1c3916(0x98))&&_0x22aaba['val']&&(this[_0x1c3916(0x77)](_0x2e30c7,{'val':![],'ack':!![]}),aiAgent[_0x1c3916(0xb3)](this));if(_0x2e30c7[_0x1c3916(0xa3)](_0x1c3916(0xa8))&&_0x22aaba[_0x1c3916(0x108)]){this[_0x1c3916(0x77)](_0x2e30c7,{'val':![],'ack':!![]});if(this[_0x1c3916(0x7c)])aiAgent[_0x1c3916(0x74)](this,pythonBridge);}_0x2e30c7[_0x1c3916(0xa3)](_0x1c3916(0x76))&&_0x22aaba[_0x1c3916(0x108)]&&(this[_0x1c3916(0x77)](_0x2e30c7,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this));_0x2e30c7[_0x1c3916(0xa3)]('automation.triggerAction')&&_0x22aaba[_0x1c3916(0x108)]&&(this['setState'](_0x2e30c7,{'val':![],'ack':!![]}),aiAgent[_0x1c3916(0xc8)](this));if(_0x2e30c7['includes']('analysis.training.triggerSecurity')&&_0x22aaba[_0x1c3916(0x108)]){this[_0x1c3916(0x77)](_0x2e30c7,{'val':![],'ack':!![]});if(this[_0x1c3916(0x7c)])try{const _0x4e06fd=await this[_0x1c3916(0xc5)](_0x1c3916(0x79));if(_0x4e06fd&&_0x4e06fd[_0x1c3916(0x108)]){const _0x47b77d=JSON[_0x1c3916(0xd7)](_0x4e06fd[_0x1c3916(0x108)]);this['log'][_0x1c3916(0x6c)](_0x1c3916(0xf7)),this[_0x1c3916(0xca)](_0x1c3916(0x86),{'val':_0x1c3916(0x87),'ack':!![]}),pythonBridge[_0x1c3916(0xd9)](this,_0x1c3916(0x8f),{'sequences':_0x47b77d});}}catch(_0x24c4ea){this['log'][_0x1c3916(0xd0)]('Training\x20Error:\x20'+_0x24c4ea[_0x1c3916(0xa4)]);}}if(_0x2e30c7['includes']('analysis.training.triggerHealth')&&_0x22aaba['val']){this[_0x1c3916(0x77)](_0x2e30c7,{'val':![],'ack':!![]});if(this[_0x1c3916(0x7c)])try{const _0xd523d4=await this['getStateAsync'](_0x1c3916(0xd1));if(_0xd523d4&&_0xd523d4[_0x1c3916(0x108)])pythonBridge[_0x1c3916(0xd9)](this,_0x1c3916(0xe6),{'digests':JSON[_0x1c3916(0xd7)](_0xd523d4['val'])});}catch(_0x160a29){}}if(_0x2e30c7[_0x1c3916(0xa3)](_0x1c3916(0x95))&&_0x22aaba[_0x1c3916(0x108)]){this[_0x1c3916(0x77)](_0x2e30c7,{'val':![],'ack':!![]});if(this[_0x1c3916(0x7c)])try{const _0x48435d=await this[_0x1c3916(0xc5)](_0x1c3916(0x7b));if(_0x48435d&&_0x48435d[_0x1c3916(0x108)])pythonBridge[_0x1c3916(0xd9)](this,'TRAIN_ENERGY',{'points':JSON[_0x1c3916(0xd7)](_0x48435d['val'])});}catch(_0x267bb6){}}if(_0x2e30c7[_0x1c3916(0xa3)](_0x1c3916(0xe1))&&_0x22aaba[_0x1c3916(0x108)]){this[_0x1c3916(0x77)](_0x2e30c7,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x55582b=await this[_0x1c3916(0xc5)]('LTM.rawEventLog');_0x55582b&&_0x55582b[_0x1c3916(0x108)]&&(this[_0x1c3916(0xe2)]['info']('ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...'),pythonBridge[_0x1c3916(0xd9)](this,_0x1c3916(0x97),{'events':JSON[_0x1c3916(0xd7)](_0x55582b[_0x1c3916(0x108)])}));}catch(_0x43c3b7){}}_0x2e30c7[_0x1c3916(0xa3)](_0x1c3916(0x7d))&&_0x22aaba[_0x1c3916(0x108)]&&(this[_0x1c3916(0x77)](_0x2e30c7,{'val':![],'ack':!![]}),this[_0x1c3916(0xe2)][_0x1c3916(0x6c)]('ðŸ•¸ï¸\x20Manually\x20triggering\x20Topology\x20Update...'),topology[_0x1c3916(0x8d)](this));return;}if(this['config'][_0x1c3916(0xf9)]&&this[_0x1c3916(0xff)]['presenceDevices'][_0x1c3916(0xa3)](_0x2e30c7)){await this['checkWifiPresence']();return;}const _0x58db3d=(this[_0x1c3916(0xff)][_0x1c3916(0xac)]||[])[_0x1c3916(0xeb)](_0x31d67d=>_0x31d67d['id']===_0x2e30c7);if(_0x58db3d){const _0x1094b1=await recorder[_0x1c3916(0xb8)](this,_0x2e30c7,_0x22aaba,_0x58db3d);_0x1094b1&&_0x1094b1[_0x1c3916(0x113)]===_0x1c3916(0xdf)&&_0x1094b1[_0x1c3916(0x114)]&&this[_0x1c3916(0x7c)]&&deadMan[_0x1c3916(0xb6)](this,_0x1094b1[_0x1c3916(0x114)]);}}async[a0_0x1b8814(0xa9)](_0xf151b3){const _0x41d061=a0_0x1b8814;if(typeof _0xf151b3===_0x41d061(0x94)&&_0xf151b3[_0x41d061(0xa4)]){if(_0xf151b3[_0x41d061(0xde)]===_0x41d061(0xc1)){}else{if(_0xf151b3['command']===_0x41d061(0xef))try{const _0x5afbbe=await scanner[_0x41d061(0x11f)](this,_0xf151b3[_0x41d061(0xa4)]||{});this['sendTo'](_0xf151b3['from'],_0xf151b3['command'],{'success':!![],'devices':_0x5afbbe},_0xf151b3[_0x41d061(0x9c)]);}catch(_0x34eea9){this['sendTo'](_0xf151b3['from'],_0xf151b3[_0x41d061(0xde)],{'success':![],'error':_0x34eea9[_0x41d061(0xa4)]},_0xf151b3[_0x41d061(0x9c)]);}else{if(_0xf151b3[_0x41d061(0xde)]===_0x41d061(0xb0)){const {matrix:_0x4da83e}=_0xf151b3['message'];try{const _0x1a7191=await this['getStateAsync']('analysis.topology.structure');if(_0x1a7191&&_0x1a7191[_0x41d061(0x108)]){const _0x5dd869=JSON[_0x41d061(0xd7)](_0x1a7191[_0x41d061(0x108)]);_0x5dd869[_0x41d061(0x122)]=_0x4da83e,_0x5dd869['updated']=Date[_0x41d061(0xc7)](),await this[_0x41d061(0xca)](_0x41d061(0x93),{'val':JSON[_0x41d061(0xa7)](_0x5dd869),'ack':!![]}),this[_0x41d061(0xe2)]['info'](_0x41d061(0xc3)),pythonBridge['send'](this,_0x41d061(0xc2),_0x5dd869);}this[_0x41d061(0xdb)](_0xf151b3[_0x41d061(0x117)],_0xf151b3[_0x41d061(0xde)],{'success':!![]},_0xf151b3[_0x41d061(0x9c)]);}catch(_0x3aa12a){this[_0x41d061(0xe2)]['error'](_0x41d061(0x6b)+_0x3aa12a[_0x41d061(0xa4)]);}}else{if(_0xf151b3['command']==='getLtmData')this['sendTo'](_0xf151b3[_0x41d061(0x117)],_0xf151b3[_0x41d061(0xde)],{'success':!![],'dailyDigests':this['dailyDigests']||[],'analysisHistory':this['analysisHistory']||[]},_0xf151b3[_0x41d061(0x9c)]);else{if(_0xf151b3[_0x41d061(0xde)]===_0x41d061(0xee)){const _0x5b63a7=this[_0x41d061(0x8a)][_0x41d061(0x115)],_0x819691=new Array(0x18)[_0x41d061(0x11e)](0x0),_0x464dd1=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x41d061(0x11d)]&&this[_0x41d061(0x11d)][_0x41d061(0x8c)](_0x21c5d5=>{const _0xcf82c=_0x41d061;if(_0x21c5d5[_0xcf82c(0x10b)]>=_0x464dd1){const _0x5e1da4=new Date(_0x21c5d5[_0xcf82c(0x10b)])[_0xcf82c(0xda)]();if(_0x5e1da4>=0x0&&_0x5e1da4<0x18)_0x819691[_0x5e1da4]++;}}),this[_0x41d061(0xdb)](_0xf151b3[_0x41d061(0x117)],_0xf151b3[_0x41d061(0xde)],{'success':!![],'eventHistory':this[_0x41d061(0x11d)]['slice'](0x0,0xf),'stats':{'digestCount':_0x5b63a7,'isPresent':this['isPresent'],'hourlyActivity':_0x819691},'automation':{'detected':![]}},_0xf151b3[_0x41d061(0x9c)]);}else{if(_0xf151b3['command']==='getEnums'){const _0x1b5b45=await this[_0x41d061(0xb4)](_0x41d061(0xf3),_0x41d061(0xec)),_0x35849b=[];if(_0x1b5b45)for(const _0x16996e in _0x1b5b45){const _0x41a9b8=_0x1b5b45[_0x16996e],_0x3c6a1a=(_0x41a9b8[_0x41d061(0x69)]&&typeof _0x41a9b8[_0x41d061(0x69)][_0x41d061(0x99)]===_0x41d061(0x94)?_0x41a9b8['common'][_0x41d061(0x99)]['de']:_0x41a9b8[_0x41d061(0x69)][_0x41d061(0x99)])||_0x41a9b8[_0x41d061(0x69)]['name'];_0x35849b[_0x41d061(0x92)]({'id':_0x16996e,'name':_0x3c6a1a});}const _0x4454bf=await this[_0x41d061(0xb4)](_0x41d061(0x7e),_0x41d061(0xec)),_0x1a9cd6=[];if(_0x4454bf)for(const _0x5828c0 in _0x4454bf){const _0xc90478=_0x4454bf[_0x5828c0],_0x2c090b=(_0xc90478['common']&&typeof _0xc90478[_0x41d061(0x69)][_0x41d061(0x99)]===_0x41d061(0x94)?_0xc90478[_0x41d061(0x69)]['name']['de']:_0xc90478[_0x41d061(0x69)][_0x41d061(0x99)])||_0x5828c0[_0x41d061(0x72)]('.')[_0x41d061(0xb7)]();_0x1a9cd6[_0x41d061(0x92)](_0x2c090b);}this[_0x41d061(0xdb)](_0xf151b3['from'],_0xf151b3[_0x41d061(0xde)],{'success':!![],'enums':_0x35849b,'rooms':_0x1a9cd6},_0xf151b3['callback']);}}}}}}}}async[a0_0x1b8814(0xf2)](){const _0x31341b=a0_0x1b8814;try{const _0x3fc629=await this[_0x31341b(0xc5)](setup[_0x31341b(0xaa)]);_0x3fc629&&_0x3fc629[_0x31341b(0x108)]&&Object[_0x31341b(0xc9)](setup[_0x31341b(0xcb)])[_0x31341b(0xa3)](_0x3fc629[_0x31341b(0x108)])?this['currentSystemMode']=_0x3fc629[_0x31341b(0x108)]:(this['currentSystemMode']=setup[_0x31341b(0xcb)][_0x31341b(0xed)],await this[_0x31341b(0xca)](setup[_0x31341b(0xaa)],{'val':setup[_0x31341b(0xcb)][_0x31341b(0xed)],'ack':!![]}));}catch(_0x18594c){this['currentSystemMode']=setup[_0x31341b(0xcb)][_0x31341b(0xed)];}}async['checkWifiPresence'](){const _0x460f0a=a0_0x1b8814;try{const _0x356f44=this[_0x460f0a(0xff)][_0x460f0a(0xf9)]||[];let _0x30af4d=![];const _0x3ca706=[];for(const _0x234c2c of _0x356f44){try{const _0x278b7c=await this[_0x460f0a(0x11b)](_0x234c2c);_0x278b7c&&(_0x278b7c[_0x460f0a(0x108)]===!![]||_0x278b7c['val']===_0x460f0a(0x8b)||_0x278b7c[_0x460f0a(0x108)]===0x1)&&(_0x30af4d=!![],_0x3ca706[_0x460f0a(0x92)](_0x234c2c));}catch(_0x47e3a5){}}return await this[_0x460f0a(0xca)](_0x460f0a(0xf1),{'val':_0x3ca706[_0x460f0a(0x88)](',\x20'),'ack':!![]}),_0x30af4d&&(this['exitTimer']&&(this['log'][_0x460f0a(0x6c)](_0x460f0a(0x126)),recorder['abortExitTimer'](this)),!this[_0x460f0a(0xd4)]&&this['currentSystemMode']===setup[_0x460f0a(0xcb)][_0x460f0a(0xed)]&&await recorder[_0x460f0a(0x6e)](this,!![])),_0x30af4d;}catch(_0x528060){return![];}}async[a0_0x1b8814(0xd5)](){const _0xaaed3c=a0_0x1b8814;this[_0xaaed3c(0xe2)][_0xaaed3c(0xb1)](_0xaaed3c(0xa6)),await aiAgent[_0xaaed3c(0xb3)](this),this[_0xaaed3c(0x10d)](),this['triggerGaitAnalysis'](),this[_0xaaed3c(0xe5)]();}[a0_0x1b8814(0xcc)](){const _0x13ad89=a0_0x1b8814;if(!this[_0x13ad89(0x7c)])return;try{this['getState'](_0x13ad89(0x79),(_0x54d787,_0x4611a4)=>{const _0x30c72e=_0x13ad89;_0x4611a4&&_0x4611a4['val']&&pythonBridge['send'](this,'ANALYZE_GAIT',{'sequences':JSON[_0x30c72e(0xd7)](_0x4611a4[_0x30c72e(0x108)])});});}catch(_0xed215a){}}async['triggerEnergyPrediction'](){const _0x670970=a0_0x1b8814;if(!this[_0x670970(0x7c)])return;try{const _0x561716=await recorder[_0x670970(0xfa)](this);if(_0x561716===null)return;const _0x14ef4a={},_0x2a7c74=this[_0x670970(0xff)][_0x670970(0xac)]||[];for(const _0x48aee7 of _0x2a7c74){if(_0x48aee7[_0x670970(0x113)]===_0x670970(0x11a)&&_0x48aee7[_0x670970(0x114)]){const _0x3bf784=this['sensorLastValues'][_0x48aee7['id']];if(_0x3bf784!==undefined)_0x14ef4a[_0x48aee7[_0x670970(0x114)]]=_0x3bf784;}}Object[_0x670970(0xbc)](_0x14ef4a)['length']>0x0&&pythonBridge[_0x670970(0xd9)](this,_0x670970(0xce),{'current_temps':_0x14ef4a,'t_out':_0x561716});}catch(_0x56f9f8){}}[a0_0x1b8814(0x10d)](){const _0x585a80=a0_0x1b8814;if(!this[_0x585a80(0xae)]||this[_0x585a80(0xae)][_0x585a80(0x115)]===0x0)return;const _0x420409=new Array(0x60)[_0x585a80(0x11e)](0x0),_0x2ca8dd=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x585a80(0xae)]['forEach'](_0x1606d5=>{const _0x2ebcab=_0x585a80,_0x538f6b=new Date(_0x1606d5[_0x2ebcab(0x10b)]);if(_0x538f6b['getTime']()>=_0x2ca8dd){const _0x4c7968=_0x538f6b[_0x2ebcab(0xda)](),_0x38fbde=_0x538f6b[_0x2ebcab(0xba)](),_0x535cde=_0x4c7968*0x4+Math['floor'](_0x38fbde/0xf);if(_0x535cde>=0x0&&_0x535cde<0x60)_0x420409[_0x535cde]++;}}),this[_0x585a80(0xca)](_0x585a80(0xcf),{'val':JSON[_0x585a80(0xa7)](_0x420409),'ack':!![]});}[a0_0x1b8814(0x89)](){const _0x46181e=a0_0x1b8814;if(!this[_0x46181e(0x8a)]||this[_0x46181e(0x8a)][_0x46181e(0x115)]<0x2)return;const _0x54b232=this['dailyDigests'][_0x46181e(0xdd)](_0x20d970=>{const _0x25acbe=_0x46181e,_0x423cd7=(_0x20d970[_0x25acbe(0x121)]||'')[_0x25acbe(0x116)]();return ACTIVITY_LEVEL_MAP[_0x423cd7]||0x32;});pythonBridge[_0x46181e(0xd9)](this,_0x46181e(0x9a),{'values':_0x54b232,'tag':_0x46181e(0x80)});}}if(require[a0_0x1b8814(0xa1)]!==module)module[a0_0x1b8814(0x10f)]=_0x2dbbe8=>new CogniLiving(_0x2dbbe8);else new CogniLiving();