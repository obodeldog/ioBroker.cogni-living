const a0_0x368a15=a0_0xa5b4;(function(_0x97882a,_0x1924ec){const _0x12c015=a0_0xa5b4,_0x27e15e=_0x97882a();while(!![]){try{const _0x3a9d5e=-parseInt(_0x12c015(0x2a0))/0x1*(-parseInt(_0x12c015(0x2f9))/0x2)+parseInt(_0x12c015(0x213))/0x3*(-parseInt(_0x12c015(0x248))/0x4)+-parseInt(_0x12c015(0x31a))/0x5*(-parseInt(_0x12c015(0x1e7))/0x6)+parseInt(_0x12c015(0x228))/0x7*(-parseInt(_0x12c015(0x2eb))/0x8)+parseInt(_0x12c015(0x230))/0x9+-parseInt(_0x12c015(0x2a6))/0xa*(-parseInt(_0x12c015(0x32f))/0xb)+parseInt(_0x12c015(0x2c1))/0xc;if(_0x3a9d5e===_0x1924ec)break;else _0x27e15e['push'](_0x27e15e['shift']());}catch(_0xa2eeb1){_0x27e15e['push'](_0x27e15e['shift']());}}}(a0_0x8098,0x2d7fd));const a0_0x5c26af=(function(){let _0xd70acb=!![];return function(_0x3467ad,_0x442cb8){const _0xef46a9=_0xd70acb?function(){const _0xcdc843=a0_0xa5b4;if(_0x442cb8){const _0x2567e8=_0x442cb8[_0xcdc843(0x1d8)](_0x3467ad,arguments);return _0x442cb8=null,_0x2567e8;}}:function(){};return _0xd70acb=![],_0xef46a9;};}()),a0_0x1a3aa8=a0_0x5c26af(this,function(){const _0x4a6275=a0_0xa5b4;return a0_0x1a3aa8[_0x4a6275(0x1b0)]()['search']('(((.+)+)+)+$')[_0x4a6275(0x1b0)]()[_0x4a6275(0x2d7)](a0_0x1a3aa8)[_0x4a6275(0x323)]('(((.+)+)+)+$');});a0_0x1a3aa8();'use strict';function a0_0xa5b4(_0x56de1d,_0x2101e4){const _0x1820ef=a0_0x8098();return a0_0xa5b4=function(_0x1a3aa8,_0x5c26af){_0x1a3aa8=_0x1a3aa8-0x17b;let _0x80984b=_0x1820ef[_0x1a3aa8];return _0x80984b;},a0_0xa5b4(_0x56de1d,_0x2101e4);}function a0_0x8098(){const _0x56c25e=['LTM.driftAnalysis.lastCheck','button','HARD\x20WATCHDOG:\x20No\x20activity\x20for\x20','ðŸ› ï¸\x20MAINTENANCE\x20MODE:\x20Hard\x20Reset\x20of\x20Python\x20environment.\x20Deleting\x20','weatherInstance','echarts.','writable','activeSequence','TREND_RESULT','admin.','6457qTlXYK','/100.\x20OUTPUT:\x20Text.','currentSystemMode','briefingJob','onMessage','heating','Feedback:\x20','LTM.processingStatus','pip.exe','subscribeStates','@google/generative-ai','generic','analysis.energy.insulationScore','Last\x20raw\x20event','systemUUID','[RESULT]','string','analysis.training.status','.venv','[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20','âŒ\x20INSTALL\x20FAILED:\x20','indicator','ready','generateContent','stopPythonService','indicator.alarm','system','contact','version','vacation','analysis.training.triggerHealth','checkWifiPresence','javascript.','notifyTelegramRecipient','LTM.driftAnalysis.driftDetails','ANALYZE_SEQUENCE','presenceDevices','stateChange','stick_unreach','scheduleJob','platform','motion','date','analysisHistory','window','daswetter','round','vis.','stdin','Heating\x20Score','data','name','notifyEmailRecipient','sendNotification','setupDriftAnalysisScheduler','analysis.automation.description','analysis.alertReason','off','devices','ðŸ\x20Stopping\x20Python...','eventHistory','cancel','slice','getWeatherContext','cogni-living\x20adapter\x20starting\x20(v','working','isPresent','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20',').\x20Panic\x20Mode.','firmware','notifyPushoverRecipient','sensorLastValues','getHours','toString','saveDailyDigests','Raw\x20Log','sendToPython','channel','createAllObjects','[PYTHON\x20ERR]\x20','setupBriefingScheduler','.communicate.request','geminiApiKey','Daily\x20Digests','scriptProblem','analysis.automation.autoApply','location','power','Alarm','licht','âœ…\x20VERIFICATION\x20PASSED.\x20Starting\x20Service.','COGNI_CONFIRM_OK','LTM\x20Sched\x20Error:\x20','config_pending','LTM.driftAnalysis.baselineDrift','ðŸ›¡ï¸\x20SECURITY:\x20Sending\x20sequence\x20to\x20Guard\x20for\x20analysis...','dependencyInstallInProgress','python3','saveFeedback','state','stringify','ltmLtbWindowDays','onUnload','python_service','cogni-living','livingContext','forEach','actual_temperature','driftDetails','some','ltmStbWindowDays','join','requirements.txt','apply','PRIORITÃ„T:\x20Gesundheit/AAL.','isArray','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','Trigger\x20Action','LTM.trainingData.sequences','Installing\x20pip\x20packages\x20(Force\x20Reinstall)...','\x0aSTB:\x20','logDuplicates','position','notifyTelegramEnabled','setPresence','node-schedule','Briefing\x20Error:\x20','Gemini\x20Init\x20Error:\x20','6qTzfvr','setupModeResetScheduler','isExit','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','pythonProcess','shutter','temperatur','win32','Train\x20Energy','\x20->\x20','loadDailyDigests','child_process','recordSequence','map','Success:\x20','âœ…\x20Alarm\x20quittiert.\x20System\x20normal.','number','inactivityThresholdHours','minDaysForBaseline','getCalendarContext','history.','klima','analysis.automation.triggerAction','analysis.energy.heatingScore','âš ï¸\x20SECURITY\x20ALARM:\x20','.forecast.current.temperature','push','json','TRAINING_COMPLETE','startPythonService','events.lastEvent','connection','split','payload','N/A\x20(Learning)','indexOf','sendToAsync','analysisInterval','length','Description','Energy\x20Intelligence','runGeminiAnalysis','analysis.health.trendDiagnosis','.\x20KONTEXT:\x20','3Forutw','city','baselineDrift','initSystemConfig','ENERGY_TRAIN_RESULT','geminiModel','Scripts','sendMorningBriefing','replace','toFixed','response','panicMode','initHistory','reachable','âš ï¸\x20VENV\x20missing.\x20Reinstalling...','python.exe','fault','status','lastAlertState','notifyPushoverEnabled','\x22\x20install\x20--no-cache-dir\x20--force-reinstall\x20-r\x20\x22','203JEYohA','LTM.dailyDigests','executeAutomationAction','Restoring\x20sensor\x20cache\x20from\x20history\x20(','cpu_feature_guard','python3\x20-m\x20venv\x20\x22','Started...','loc','207207sFXQWS','startExitTimer','kontakt','installPythonDependencies','saveRawEventLog','N/A','Unknown','values','Deaktiviert\x20(Pro-Feature)','abortExitTimer','Auto\x20Apply','config','getForeignObjectAsync','system.mode','systemConfig','analysis.isAlert','ðŸ\x20Using\x20VENV:\x20','useWeather','LTM.triggerDailyDigest','summary','No\x20module\x20named','ðŸ“ž\x20RÃœCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20RÃ¼ckruf-Button\x20gedrÃ¼ckt.','brightness','prÃ¤senz','1238684RtIVTG','Drift\x20Sched\x20Error:\x20','Event\x20History','Last\x20Check','Train\x20Health','saveCompletedSequence','models/gemini-flash-latest','Fokus\x20auf\x20Familienroutinen.','Kalender:\x20Deaktiviert','analysis.security.lastCheck','outdoorSensorId','ltmJob','setObjectNotExistsAsync','uuid','Generating\x20Morning\x20Briefing...','analysis.analysisHistory','loadSystemMode','kill','flot.','Alert\x20Reason','Activity-Level','notifyPushoverInstance','maintenance','party','val','parse','Trend','SECURITY_RESULT','expire','activityLevel','setForeignStateAsync','system.presenceWho','getGenerativeModel','âŒ\x20VENV\x20CREATION\x20FAILED.\x20Please\x20run:\x20sudo\x20apt\x20install\x20python3-venv','Skipped\x20(No\x20AI\x20or\x20Data)','useCalendar','extendObjectAsync','type','Alert\x20Status','analysis.security.lastScore','normal','subscribeForeignStatesAsync','Training\x20Status','COGNI_REQUEST_CALL','analysis.health.trendValue','light','analysis.health.isAnomaly','guest','ANALYZE_TREND','initSensorSubscriptions','pop','events.history','filter','updateAnalysisHistory','fenster','info','bind','PONG','log','material.','exitGraceTimer','insulation','door','Target\x20Value','includes','python','setStateAsync','dimmer','trim','analysis.activitySummary','value','analysis.automation.targetId','LTM.rawEventLog','NORMAL','existsSync','unshift','analysis.energy','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','level','.forecast.current.temp','link_quality','updateBaselineStatus','âœ…\x20Alles\x20OK\x20(Reset)','checkLicense','presence','recordThermodynamics','valve','startsWith','1ewenUA','online','runAutopilot','getStateAsync','Trend\x20Value','analysis.automation.targetValue','1570tAeFlz','substring','Keine\x20Termine','LTM.trainingData.thermodynamics','Cogni-Living','analysis.training.triggerSecurity','error','set_temperature','analysis.training','health','onReady','Who\x20is\x20present?','initPresenceSubscriptions','Failed:\x20','notifyEmailEnabled','events.history_debug_00','setupLtmScheduler','info.','longitude','sequenceTimer','common','installRequirementsInVenv','[LOG]','Thermodynamics','text','LTM.baselineStatus','LTM','6972012wDioxe','toLocaleTimeString','_calName','driftAnalysisTimer','system.','Trigger\x20Analysis','inactivityMonitoringEnabled','getForeignStateAsync','toISOString','ðŸŒ…\x20Daily\x20Briefing:\x0a','loadRawEventLog','notifyEmailInstance','PARTY','.\x20DATEN:\x20Schlaf\x20','boolean',')\x20-\x20CLASS\x20FIELDS\x20FIX','dutycycle','dailyDigests','pip','createDailyDigest','message','processSensorEvent','constructor','system.config','exports','now','unload','scriptEnabled','cover','runBaselineDriftAnalysis','analysis.training.triggerEnergy','ðŸ\x20Guardian\x20Diagnosis:\x20','modeResetJob','rmSync','isProVersion','.data.table','Security\x20Monitor','\x20*\x20*\x20*','analysis.history_debug_00','notifyTelegramInstance','\x20events)...','analysis.health.lastCheck','81352rgcRHW','getOutsideTemperatureNumeric','HEALTH_RESULT','getObjectAsync','08:00','.\x20ZUSATZ:\x20','ðŸ\x20Python\x20Pong','lowbat','analysisTimer','shift','targetposition','unreach','application/json','Adapter','101830tKLQjo','system.isPresent','\x20=\x20','rawEventLog','occupancy','\x20(Length:\x20','initZombies','calendarInstance','ical.0','analysis.triggerBriefing','Success','debug','blind','isGracePeriodActive','currentposition','toLowerCase','briefingEnabled','Target\x20ID','onStateChange','splice','[PYTHON]\x20','Vom\x20Benutzer\x20bestÃ¤tigt\x20(OK).','setupTelegramListener','Sequences','.Current.Temperature','Trigger\x20Briefing','Fokus\x20auf\x20Komfort.','exitTimer','WiFi\x20Presence\x20detected.','.NextHours.Location_1.Day_1.current.temp_value','âš ï¸\x20Missing\x20Libs\x20(','switch','ltmDriftCheckIntervalHours','219195PRdLPV','Digest','service.py','runSecurityCheck','send','sort','warn','analysis.trigger','System','search','handlePythonResult'];a0_0x8098=function(){return _0x56c25e;};return a0_0x8098();}const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x368a15(0x339)),schedule=require(a0_0x368a15(0x1e4)),{spawn,exec}=require(a0_0x368a15(0x1f2)),path=require('path'),fs=require('fs'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x368a15(0x24e),LTM_SCHEDULE='0\x203\x20*\x20*\x20*',MODE_RESET_SCHEDULE='0\x204\x20*\x20*\x20*',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x368a15(0x290),LTM_DP_DAILY_DIGESTS=a0_0x368a15(0x229),LTM_DP_STATUS=a0_0x368a15(0x336),LTM_DP_TRIGGER_DIGEST=a0_0x368a15(0x242),LTM_DP_BASELINE_STATUS=a0_0x368a15(0x2bf),LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS=a0_0x368a15(0x1c5),LTM_DP_DRIFT_DETAILS=a0_0x368a15(0x189),LTM_DP_DRIFT_LAST_CHECK=a0_0x368a15(0x325),SYSTEM_DP_MODE=a0_0x368a15(0x23d),SYSTEM_MODES={'NORMAL':a0_0x368a15(0x270),'VACATION':a0_0x368a15(0x184),'PARTY':a0_0x368a15(0x25f),'GUEST':a0_0x368a15(0x277)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x368a15(0x2cd)],SYSTEM_MODES['GUEST']],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0x368a15(0x1d9),'family':a0_0x368a15(0x24f),'single_comfort':a0_0x368a15(0x313),'security':'PRIORITÃ„T:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0},HARD_IGNORE_TERMS=[a0_0x368a15(0x1bb),a0_0x368a15(0x2dc),'update',a0_0x368a15(0x2f6),a0_0x368a15(0x2f2),'rssi',a0_0x368a15(0x206),a0_0x368a15(0x25e),a0_0x368a15(0x2ac),a0_0x368a15(0x223),a0_0x368a15(0x1a8),'direction',a0_0x368a15(0x18d),a0_0x368a15(0x1c4),a0_0x368a15(0x2d1),a0_0x368a15(0x1ac),a0_0x368a15(0x220),a0_0x368a15(0x298)],BAD_NAMES=[a0_0x368a15(0x2f5),a0_0x368a15(0x307),a0_0x368a15(0x1ca),a0_0x368a15(0x296),a0_0x368a15(0x28e),a0_0x368a15(0x246),'on',a0_0x368a15(0x1a0),a0_0x368a15(0x318),a0_0x368a15(0x1e1),a0_0x368a15(0x1ec),a0_0x368a15(0x305),a0_0x368a15(0x2dd),a0_0x368a15(0x224),'motion','presence',a0_0x368a15(0x2fd),'temperature','humidity',a0_0x368a15(0x1be),'energy','setpoint',a0_0x368a15(0x29e),a0_0x368a15(0x1d2),a0_0x368a15(0x2ad)],ADAPTER_BLACKLIST=[a0_0x368a15(0x2c5),a0_0x368a15(0x32e),a0_0x368a15(0x2b7),a0_0x368a15(0x196),a0_0x368a15(0x1fb),a0_0x368a15(0x283),'icons-mfd.',a0_0x368a15(0x25a),a0_0x368a15(0x32a),a0_0x368a15(0x187),'simple-api.'],IS_WIN=process[a0_0x368a15(0x18f)]===a0_0x368a15(0x1ee),VENV_PATH=path[a0_0x368a15(0x1d6)](__dirname,a0_0x368a15(0x341)),PYTHON_EXE=IS_WIN?path[a0_0x368a15(0x1d6)](VENV_PATH,'Scripts',a0_0x368a15(0x222)):path[a0_0x368a15(0x1d6)](VENV_PATH,'bin',a0_0x368a15(0x289)),PIP_EXE=IS_WIN?path[a0_0x368a15(0x1d6)](VENV_PATH,a0_0x368a15(0x219),a0_0x368a15(0x337)):path[a0_0x368a15(0x1d6)](VENV_PATH,'bin',a0_0x368a15(0x2d3));class CogniLiving extends utils[a0_0x368a15(0x2f8)]{constructor(_0x1674cf){const _0x546977=a0_0x368a15;super({..._0x1674cf,'name':_0x546977(0x1cf)}),this['eventHistory']=[],this[_0x546977(0x192)]=[],this['rawEventLog']=[],this[_0x546977(0x2d2)]=[],this[_0x546977(0x1ae)]={},this[_0x546977(0x23e)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x546977(0x1a9)]=!![],this[_0x546977(0x314)]=null,this[_0x546977(0x284)]=null,this['isGracePeriodActive']=![],this['genAI']=null,this[_0x546977(0x218)]=null,this[_0x546977(0x331)]=SYSTEM_MODES[_0x546977(0x291)],this['isProVersion']=![],this[_0x546977(0x225)]=![],this[_0x546977(0x33d)]='unknown',this[_0x546977(0x2f3)]=null,this[_0x546977(0x253)]=null,this['modeResetJob']=null,this[_0x546977(0x2c4)]=null,this[_0x546977(0x332)]=null,this[_0x546977(0x1eb)]=null,this[_0x546977(0x1c7)]=![],this['panicMode']=![],this[_0x546977(0x32c)]=[],this[_0x546977(0x2b9)]=null,this['on'](_0x546977(0x17d),this[_0x546977(0x2b0)][_0x546977(0x280)](this)),this['on'](_0x546977(0x18c),this[_0x546977(0x30b)][_0x546977(0x280)](this)),this['on'](_0x546977(0x2db),this[_0x546977(0x1cd)]['bind'](this)),this['on'](_0x546977(0x2d5),this[_0x546977(0x333)][_0x546977(0x280)](this));}['initZombies']=async()=>{const _0x35b21c=a0_0x368a15;try{const _0x26b02a=[_0x35b21c(0x2e7),_0x35b21c(0x2b5)];for(const _0x2b30c9 of _0x26b02a){try{const _0xc8be13=await this[_0x35b21c(0x2ee)](_0x2b30c9);if(_0xc8be13)await this['delObjectAsync'](_0x2b30c9);}catch(_0x33d4f3){}}}catch(_0x489567){}};['initHistory']=async()=>{const _0x4c53ca=a0_0x368a15;try{const _0x1ad42c=await this[_0x4c53ca(0x2a3)](_0x4c53ca(0x27b));_0x1ad42c&&_0x1ad42c['val']&&(this[_0x4c53ca(0x1a3)]=JSON[_0x4c53ca(0x261)](_0x1ad42c['val']['toString']()));}catch(_0x42b7c9){this['eventHistory']=[];}try{const _0x313fe7=await this['getStateAsync'](_0x4c53ca(0x257));if(_0x313fe7&&_0x313fe7[_0x4c53ca(0x260)])this[_0x4c53ca(0x192)]=JSON[_0x4c53ca(0x261)](_0x313fe7['val'][_0x4c53ca(0x1b0)]());}catch(_0x598efb){this[_0x4c53ca(0x192)]=[];}if(this[_0x4c53ca(0x1a3)]&&this['eventHistory'][_0x4c53ca(0x20d)]>0x0){this['log'][_0x4c53ca(0x27f)](_0x4c53ca(0x22b)+this['eventHistory'][_0x4c53ca(0x20d)]+_0x4c53ca(0x2e9));for(let _0x3f2610=this[_0x4c53ca(0x1a3)][_0x4c53ca(0x20d)]-0x1;_0x3f2610>=0x0;_0x3f2610--){const _0x55fb36=this[_0x4c53ca(0x1a3)][_0x3f2610];if(_0x55fb36&&_0x55fb36['id']!==undefined&&_0x55fb36[_0x4c53ca(0x28e)]!==undefined)this[_0x4c53ca(0x1ae)][_0x55fb36['id']]=_0x55fb36[_0x4c53ca(0x28e)];}}};[a0_0x368a15(0x216)]=async()=>{const _0x621ce7=a0_0x368a15;try{const _0x27c38e=await this[_0x621ce7(0x23c)](_0x621ce7(0x2d8));if(_0x27c38e&&_0x27c38e[_0x621ce7(0x2ba)])this[_0x621ce7(0x23e)]={'latitude':_0x27c38e[_0x621ce7(0x2ba)]['latitude']||0x0,'longitude':_0x27c38e[_0x621ce7(0x2ba)][_0x621ce7(0x2b8)]||0x0,'city':_0x27c38e[_0x621ce7(0x2ba)][_0x621ce7(0x214)]||''};}catch(_0x30d84c){}};['checkLicense']=async _0x435866=>{return!![];};['getSystemUUID']=async()=>{const _0x1c102d=a0_0x368a15;return _0x1c102d(0x255);};[a0_0x368a15(0x2cb)]=async()=>{const _0xd1553=a0_0x368a15;try{const _0x59342e=await this[_0xd1553(0x2a3)](LTM_DP_RAW_LOG);if(_0x59342e&&_0x59342e[_0xd1553(0x260)])this[_0xd1553(0x2fc)]=JSON[_0xd1553(0x261)](_0x59342e[_0xd1553(0x260)]);}catch(_0x178006){this[_0xd1553(0x2fc)]=[];}};[a0_0x368a15(0x234)]=async()=>{const _0x32cb0a=a0_0x368a15;if(this[_0x32cb0a(0x2fc)][_0x32cb0a(0x20d)]>RAW_LOG_MAX_SIZE)this[_0x32cb0a(0x2fc)]['splice'](0x0,this[_0x32cb0a(0x2fc)][_0x32cb0a(0x20d)]-RAW_LOG_MAX_SIZE);await this['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x32cb0a(0x1cb)](this[_0x32cb0a(0x2fc)]),'ack':!![]});};[a0_0x368a15(0x1f1)]=async()=>{const _0x47a200=a0_0x368a15;try{const _0x116a39=await this[_0x47a200(0x2a3)](LTM_DP_DAILY_DIGESTS);if(_0x116a39&&_0x116a39[_0x47a200(0x260)])this[_0x47a200(0x2d2)]=JSON[_0x47a200(0x261)](_0x116a39[_0x47a200(0x260)]);}catch(_0x295c6c){this[_0x47a200(0x2d2)]=[];}await this[_0x47a200(0x299)]();};['saveDailyDigests']=async(_0x305861=!![])=>{const _0x24ca05=a0_0x368a15,_0x187aaf=this[_0x24ca05(0x23b)][_0x24ca05(0x1cc)]||0x3c;this[_0x24ca05(0x2d2)][_0x24ca05(0x20d)]>_0x187aaf&&this[_0x24ca05(0x2d2)][_0x24ca05(0x30c)](0x0,this[_0x24ca05(0x2d2)]['length']-_0x187aaf);await this[_0x24ca05(0x28a)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x24ca05(0x1cb)](this[_0x24ca05(0x2d2)]),'ack':!![]});if(_0x305861)await this[_0x24ca05(0x299)]();};[a0_0x368a15(0x27d)]=async _0x4351e4=>{const _0x11accc=a0_0x368a15;this[_0x11accc(0x192)]['unshift'](_0x4351e4);if(this[_0x11accc(0x192)][_0x11accc(0x20d)]>ANALYSIS_HISTORY_MAX_SIZE)this['analysisHistory'][_0x11accc(0x27a)]();await this[_0x11accc(0x28a)]('analysis.analysisHistory',{'val':JSON[_0x11accc(0x1cb)](this['analysisHistory']),'ack':!![]});};[a0_0x368a15(0x299)]=async()=>{const _0x174b68=a0_0x368a15;if(!this[_0x174b68(0x2e3)]){await this[_0x174b68(0x28a)](LTM_DP_BASELINE_STATUS,{'val':_0x174b68(0x238),'ack':!![]});return;}const _0x590f4e=this['dailyDigests'][_0x174b68(0x20d)]>=(this[_0x174b68(0x23b)][_0x174b68(0x1f9)]||0x7)?'Aktiv\x20('+this[_0x174b68(0x2d2)][_0x174b68(0x20d)]+'\x20Tage)':'Lernphase\x20('+this[_0x174b68(0x2d2)][_0x174b68(0x20d)]+'/'+(this[_0x174b68(0x23b)]['minDaysForBaseline']||0x7)+')';await this[_0x174b68(0x28a)](LTM_DP_BASELINE_STATUS,{'val':_0x590f4e,'ack':!![]});};[a0_0x368a15(0x258)]=async()=>{const _0x4e39b5=a0_0x368a15;try{const _0x2063d1=await this[_0x4e39b5(0x2a3)](SYSTEM_DP_MODE);_0x2063d1&&_0x2063d1[_0x4e39b5(0x260)]&&Object[_0x4e39b5(0x237)](SYSTEM_MODES)[_0x4e39b5(0x288)](_0x2063d1[_0x4e39b5(0x260)])?this[_0x4e39b5(0x331)]=_0x2063d1[_0x4e39b5(0x260)]:(this['currentSystemMode']=SYSTEM_MODES[_0x4e39b5(0x291)],await this['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x1f97a7){this[_0x4e39b5(0x331)]=SYSTEM_MODES[_0x4e39b5(0x291)];}};[a0_0x368a15(0x1b5)]=async()=>{const _0x2ab39b=a0_0x368a15;await this[_0x2ab39b(0x26c)](_0x2ab39b(0x181),{'type':_0x2ab39b(0x1b4),'common':{'name':_0x2ab39b(0x322)},'native':{}}),await this[_0x2ab39b(0x26c)](SYSTEM_DP_MODE,{'type':'state','common':{'name':'System\x20Mode','type':'string','role':_0x2ab39b(0x1ca),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x2ab39b(0x291)]},'native':{}}),await this[_0x2ab39b(0x254)]('system.presenceWho',{'type':_0x2ab39b(0x1ca),'common':{'name':_0x2ab39b(0x2b1),'type':_0x2ab39b(0x33f),'role':_0x2ab39b(0x2be),'read':!![],'write':![]},'native':{}}),await this[_0x2ab39b(0x254)](_0x2ab39b(0x205),{'type':_0x2ab39b(0x1ca),'common':{'name':_0x2ab39b(0x33c),'type':_0x2ab39b(0x33f),'role':_0x2ab39b(0x202),'read':!![],'write':![]},'native':{}}),await this[_0x2ab39b(0x254)]('events.history',{'type':_0x2ab39b(0x1ca),'common':{'name':_0x2ab39b(0x24a),'type':_0x2ab39b(0x33f),'role':_0x2ab39b(0x202),'read':!![],'write':![]},'native':{}}),await this[_0x2ab39b(0x26c)](_0x2ab39b(0x2ae),{'type':_0x2ab39b(0x1b4),'common':{'name':'AI\x20Training'},'native':{}}),await this[_0x2ab39b(0x254)](_0x2ab39b(0x2ab),{'type':_0x2ab39b(0x1ca),'common':{'name':'Train\x20Security','type':_0x2ab39b(0x2cf),'role':_0x2ab39b(0x326),'read':!![],'write':!![]},'native':{}}),await this[_0x2ab39b(0x254)](_0x2ab39b(0x185),{'type':'state','common':{'name':_0x2ab39b(0x24c),'type':_0x2ab39b(0x2cf),'role':_0x2ab39b(0x326),'read':!![],'write':!![]},'native':{}}),await this[_0x2ab39b(0x254)](_0x2ab39b(0x2df),{'type':_0x2ab39b(0x1ca),'common':{'name':_0x2ab39b(0x1ef),'type':'boolean','role':_0x2ab39b(0x326),'read':!![],'write':!![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x2ab39b(0x340),{'type':_0x2ab39b(0x1ca),'common':{'name':_0x2ab39b(0x272),'type':_0x2ab39b(0x33f),'role':_0x2ab39b(0x2be),'read':!![],'write':![]},'native':{}}),await this[_0x2ab39b(0x26c)]('analysis.security',{'type':_0x2ab39b(0x1b4),'common':{'name':_0x2ab39b(0x2e5)},'native':{}}),await this[_0x2ab39b(0x254)](_0x2ab39b(0x26f),{'type':_0x2ab39b(0x1ca),'common':{'name':'Anomaly\x20Score','type':'number','role':'value','read':!![],'write':![]},'native':{}}),await this[_0x2ab39b(0x254)](_0x2ab39b(0x251),{'type':_0x2ab39b(0x1ca),'common':{'name':_0x2ab39b(0x24b),'type':_0x2ab39b(0x33f),'role':_0x2ab39b(0x191),'read':!![],'write':![]},'native':{}}),await this[_0x2ab39b(0x26c)]('analysis.health',{'type':'channel','common':{'name':'Health\x20Analysis'},'native':{}}),await this[_0x2ab39b(0x254)](_0x2ab39b(0x2ea),{'type':_0x2ab39b(0x1ca),'common':{'name':_0x2ab39b(0x24b),'type':'string','role':_0x2ab39b(0x191),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x2ab39b(0x276),{'type':_0x2ab39b(0x1ca),'common':{'name':'Anomaly\x20Detected','type':'boolean','role':'indicator','read':!![],'write':![]},'native':{}}),await this[_0x2ab39b(0x254)](_0x2ab39b(0x211),{'type':_0x2ab39b(0x1ca),'common':{'name':_0x2ab39b(0x262),'type':_0x2ab39b(0x33f),'role':_0x2ab39b(0x2be),'read':!![],'write':![]},'native':{}}),await this[_0x2ab39b(0x254)](_0x2ab39b(0x274),{'type':'state','common':{'name':_0x2ab39b(0x2a4),'type':_0x2ab39b(0x1f7),'role':_0x2ab39b(0x28e),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](_0x2ab39b(0x294),{'type':_0x2ab39b(0x1b4),'common':{'name':_0x2ab39b(0x20f)},'native':{}}),await this[_0x2ab39b(0x254)](_0x2ab39b(0x33b),{'type':_0x2ab39b(0x1ca),'common':{'name':'Insulation\x20Score','type':_0x2ab39b(0x33f),'role':_0x2ab39b(0x2be),'read':!![],'write':![]},'native':{}}),await this[_0x2ab39b(0x254)](_0x2ab39b(0x1fe),{'type':_0x2ab39b(0x1ca),'common':{'name':_0x2ab39b(0x198),'type':'string','role':_0x2ab39b(0x2be),'read':!![],'write':![]},'native':{}}),await this[_0x2ab39b(0x26c)](_0x2ab39b(0x2c0),{'type':_0x2ab39b(0x1b4),'common':{'name':'LTM'},'native':{}}),await this[_0x2ab39b(0x26c)](LTM_DP_RAW_LOG,{'type':_0x2ab39b(0x1ca),'common':{'name':_0x2ab39b(0x1b2),'type':'string','role':_0x2ab39b(0x202),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x2ab39b(0x1ca),'common':{'name':_0x2ab39b(0x1ba),'type':_0x2ab39b(0x33f),'role':_0x2ab39b(0x202),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x2ab39b(0x1dd),{'type':_0x2ab39b(0x1ca),'common':{'name':_0x2ab39b(0x310),'type':_0x2ab39b(0x33f),'role':_0x2ab39b(0x202),'read':!![],'write':![]},'native':{}}),await this[_0x2ab39b(0x254)](_0x2ab39b(0x2a9),{'type':_0x2ab39b(0x1ca),'common':{'name':_0x2ab39b(0x2bd),'type':_0x2ab39b(0x33f),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x2ab39b(0x254)]('analysis.trigger',{'type':_0x2ab39b(0x1ca),'common':{'name':_0x2ab39b(0x2c6),'type':_0x2ab39b(0x2cf),'role':_0x2ab39b(0x326),'read':!![],'write':!![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x2ab39b(0x302),{'type':_0x2ab39b(0x1ca),'common':{'name':_0x2ab39b(0x312),'type':_0x2ab39b(0x2cf),'role':_0x2ab39b(0x326),'read':!![],'write':!![]},'native':{}}),await this[_0x2ab39b(0x254)](_0x2ab39b(0x23f),{'type':_0x2ab39b(0x1ca),'common':{'name':_0x2ab39b(0x26e),'type':_0x2ab39b(0x2cf),'role':_0x2ab39b(0x180),'read':!![],'write':![]},'native':{}}),await this[_0x2ab39b(0x254)](_0x2ab39b(0x19f),{'type':_0x2ab39b(0x1ca),'common':{'name':_0x2ab39b(0x25b),'type':'string','role':'text.alarm','read':!![],'write':![]},'native':{}}),await this[_0x2ab39b(0x254)](_0x2ab39b(0x28d),{'type':_0x2ab39b(0x1ca),'common':{'name':'Activity\x20Summary','type':_0x2ab39b(0x33f),'role':_0x2ab39b(0x2be),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.automation.patternDetected',{'type':_0x2ab39b(0x1ca),'common':{'name':'Pattern\x20Detected','type':_0x2ab39b(0x2cf),'role':_0x2ab39b(0x17c),'read':!![],'write':![]},'native':{}}),await this[_0x2ab39b(0x254)](_0x2ab39b(0x19e),{'type':_0x2ab39b(0x1ca),'common':{'name':_0x2ab39b(0x20e),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await this[_0x2ab39b(0x254)](_0x2ab39b(0x28f),{'type':'state','common':{'name':_0x2ab39b(0x30a),'type':'string','role':_0x2ab39b(0x2be),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x2ab39b(0x2a5),{'type':'state','common':{'name':_0x2ab39b(0x287),'type':_0x2ab39b(0x33f),'role':_0x2ab39b(0x2be),'read':!![],'write':![]},'native':{}}),await this[_0x2ab39b(0x254)](_0x2ab39b(0x1bc),{'type':'state','common':{'name':_0x2ab39b(0x23a),'type':'boolean','role':'switch','read':!![],'write':!![]},'native':{}}),await this[_0x2ab39b(0x254)]('analysis.automation.triggerAction',{'type':_0x2ab39b(0x1ca),'common':{'name':_0x2ab39b(0x1dc),'type':'boolean','role':_0x2ab39b(0x326),'read':!![],'write':!![]},'native':{}});};[a0_0x368a15(0x29d)]=async(_0x520ea5,_0x6fedcc,_0x16c37c)=>{const _0x4a5389=a0_0x368a15,_0x5e4ab2=await this[_0x4a5389(0x2ec)](),_0x2034f5=await this[_0x4a5389(0x2a3)](_0x4a5389(0x2a9));let _0x7b17f=[];if(_0x2034f5&&_0x2034f5['val'])try{_0x7b17f=JSON[_0x4a5389(0x261)](_0x2034f5[_0x4a5389(0x260)]);}catch(_0x149e15){}_0x7b17f['push']({'ts':Date['now'](),'room':_0x16c37c||_0x4a5389(0x236),'t_in':_0x6fedcc,'t_out':_0x5e4ab2});if(_0x7b17f[_0x4a5389(0x20d)]>THERMO_LOG_SIZE)_0x7b17f[_0x4a5389(0x2f4)]();await this['setStateAsync'](_0x4a5389(0x2a9),{'val':JSON['stringify'](_0x7b17f),'ack':!![]});};[a0_0x368a15(0x2ec)]=async()=>{const _0x327b89=a0_0x368a15;if(this[_0x327b89(0x23b)][_0x327b89(0x252)])try{const _0x562b28=await this[_0x327b89(0x2c8)](this[_0x327b89(0x23b)]['outdoorSensorId']);if(_0x562b28&&_0x562b28[_0x327b89(0x260)]!==undefined&&_0x562b28[_0x327b89(0x260)]!==null)return parseFloat(_0x562b28['val']);}catch(_0x5503e3){}const _0x1fc3a5=this[_0x327b89(0x23b)][_0x327b89(0x329)];if(!this['config'][_0x327b89(0x241)]||!_0x1fc3a5)return null;try{let _0x339b34='';if(_0x1fc3a5['includes']('accuweather'))_0x339b34=_0x1fc3a5+_0x327b89(0x311);else{if(_0x1fc3a5[_0x327b89(0x288)](_0x327b89(0x194)))_0x339b34=_0x1fc3a5+_0x327b89(0x316);else{if(_0x1fc3a5[_0x327b89(0x288)]('openweathermap'))_0x339b34=_0x1fc3a5+_0x327b89(0x200);else{if(_0x1fc3a5[_0x327b89(0x288)]('weatherunderground'))_0x339b34=_0x1fc3a5+_0x327b89(0x297);}}}if(_0x339b34){const _0x27d1ed=await this[_0x327b89(0x2c8)](_0x339b34);if(_0x27d1ed&&_0x27d1ed['val']!==undefined&&_0x27d1ed[_0x327b89(0x260)]!==null)return parseFloat(_0x27d1ed[_0x327b89(0x260)]);}}catch(_0x563688){}return null;};[a0_0x368a15(0x1f3)]=async _0x4474ae=>{const _0x466282=a0_0x368a15,_0x3d9c14=(_0x4474ae[_0x466282(0x26d)]||'')[_0x466282(0x308)](),_0x5eab06=[_0x466282(0x190),'bewegung',_0x466282(0x247),_0x466282(0x29c),_0x466282(0x2fd),_0x466282(0x286),'tÃ¼r',_0x466282(0x193),_0x466282(0x27e),_0x466282(0x182),_0x466282(0x232),_0x466282(0x275),_0x466282(0x1c0),_0x466282(0x318),'schalter',_0x466282(0x28b),'lampe'];if(!_0x5eab06[_0x466282(0x1d4)](_0x56d707=>_0x3d9c14[_0x466282(0x288)](_0x56d707)))return;if(!_0x4474ae[_0x466282(0x28e)])return;if(this['sequenceTimer'])clearTimeout(this[_0x466282(0x2b9)]);this['activeSequence']['push']({'loc':_0x4474ae[_0x466282(0x1bd)]||_0x466282(0x236),'id':_0x4474ae['id'],'ts':Date[_0x466282(0x2da)]()}),this[_0x466282(0x282)]['debug'](_0x466282(0x342)+_0x4474ae[_0x466282(0x1bd)]+_0x466282(0x2fe)+this['activeSequence'][_0x466282(0x20d)]+')'),this[_0x466282(0x2b9)]=setTimeout(async()=>{const _0x55faac=_0x466282;if(this['activeSequence'][_0x55faac(0x20d)]>0x1)await this[_0x55faac(0x24d)]();this[_0x55faac(0x32c)]=[];},SEQUENCE_TIMEOUT_MS);};[a0_0x368a15(0x24d)]=async()=>{const _0x3ed79d=a0_0x368a15;try{const _0x34ff93=await this[_0x3ed79d(0x2a3)](_0x3ed79d(0x1dd));let _0x120a4a=[];if(_0x34ff93&&_0x34ff93['val'])try{_0x120a4a=JSON['parse'](_0x34ff93[_0x3ed79d(0x260)]);}catch(_0x5b2040){}const _0x3cca4e=this[_0x3ed79d(0x32c)][0x0]['ts'],_0x394277=this[_0x3ed79d(0x32c)][_0x3ed79d(0x1f4)](_0x2422e1=>({'loc':_0x2422e1[_0x3ed79d(0x22f)],'t_delta':Math[_0x3ed79d(0x195)]((_0x2422e1['ts']-_0x3cca4e)/0x3e8)})),_0x4b25a6={'timestamp':new Date(_0x3cca4e)[_0x3ed79d(0x2c9)](),'steps':_0x394277,'duration':Math['round']((this[_0x3ed79d(0x32c)][this[_0x3ed79d(0x32c)][_0x3ed79d(0x20d)]-0x1]['ts']-_0x3cca4e)/0x3e8),'daytime':new Date(_0x3cca4e)[_0x3ed79d(0x1af)]()};_0x120a4a[_0x3ed79d(0x201)](_0x4b25a6);if(_0x120a4a[_0x3ed79d(0x20d)]>MAX_TRAINING_SET_SIZE)_0x120a4a[_0x3ed79d(0x2f4)]();await this[_0x3ed79d(0x28a)](_0x3ed79d(0x1dd),{'val':JSON[_0x3ed79d(0x1cb)](_0x120a4a),'ack':!![]}),this[_0x3ed79d(0x31d)](_0x4b25a6);}catch(_0x4022f7){this['log']['error']('[RECORDER]\x20Error\x20saving\x20sequence:\x20'+_0x4022f7['message']);}};[a0_0x368a15(0x31d)]=_0xacd674=>{const _0x3c4a06=a0_0x368a15;if(!this[_0x3c4a06(0x2e3)])return;this[_0x3c4a06(0x282)][_0x3c4a06(0x304)](_0x3c4a06(0x1c6)),this[_0x3c4a06(0x1b3)](_0x3c4a06(0x18a),{'sequence':_0xacd674});};[a0_0x368a15(0x2d6)]=async(_0x95a010,_0xb4e804,_0x48679e)=>{const _0x4ac60d=a0_0x368a15;if(!_0x48679e)return;const _0x436256=_0xb4e804[_0x4ac60d(0x260)],_0x2be369=Date[_0x4ac60d(0x2da)](),_0x23fd75=this[_0x4ac60d(0x1ae)][_0x95a010];this[_0x4ac60d(0x1ae)][_0x95a010]=_0x436256;if(!_0x48679e[_0x4ac60d(0x1e0)]&&_0x23fd75!=undefined&&_0x23fd75==_0x436256)return;const _0x1b459f=(_0x48679e[_0x4ac60d(0x26d)]||'')[_0x4ac60d(0x308)](),_0x26cc17=_0x1b459f[_0x4ac60d(0x288)]('temperature')||_0x1b459f[_0x4ac60d(0x288)](_0x4ac60d(0x1ed))||_0x1b459f[_0x4ac60d(0x288)](_0x4ac60d(0x1fc))||_0x1b459f[_0x4ac60d(0x288)]('heizung');this['isProVersion']&&_0x26cc17&&this[_0x4ac60d(0x29d)](_0x95a010,_0x436256,_0x48679e[_0x4ac60d(0x1bd)]);const _0x8f5122={'timestamp':_0x2be369,'id':_0x95a010,'name':_0x48679e[_0x4ac60d(0x19a)],'type':_0x48679e[_0x4ac60d(0x26d)],'location':_0x48679e[_0x4ac60d(0x1bd)],'value':_0x436256};this[_0x4ac60d(0x1a3)][_0x4ac60d(0x293)](_0x8f5122);if(this[_0x4ac60d(0x1a3)][_0x4ac60d(0x20d)]>HISTORY_MAX_SIZE)this[_0x4ac60d(0x1a3)]['pop']();await this[_0x4ac60d(0x28a)]('events.lastEvent',{'val':JSON['stringify'](_0x8f5122),'ack':!![]}),await this['setStateAsync'](_0x4ac60d(0x27b),{'val':JSON[_0x4ac60d(0x1cb)](this[_0x4ac60d(0x1a3)]),'ack':!![]});this[_0x4ac60d(0x2e3)]&&(this['rawEventLog'][_0x4ac60d(0x201)](_0x8f5122),await this[_0x4ac60d(0x234)](),this['recordSequence'](_0x8f5122));if(_0x48679e[_0x4ac60d(0x1e9)]&&_0x436256===!![]){if(this['isPresent']&&!this[_0x4ac60d(0x306)])this[_0x4ac60d(0x231)]();else{if(!this['isPresent'])this[_0x4ac60d(0x1e3)](!![]);}}else{if(_0x48679e[_0x4ac60d(0x26d)]===_0x4ac60d(0x190)&&_0x436256===!![]){if(this[_0x4ac60d(0x314)])this[_0x4ac60d(0x239)]();if(!this[_0x4ac60d(0x1a9)]&&this[_0x4ac60d(0x331)]===SYSTEM_MODES['NORMAL'])this[_0x4ac60d(0x1e3)](!![]);}}};[a0_0x368a15(0x233)]=()=>{const _0x1ebf98=a0_0x368a15;if(this['dependencyInstallInProgress']||this[_0x1ebf98(0x21e)])return;this[_0x1ebf98(0x1c7)]=!![];const _0x469a9f=path[_0x1ebf98(0x1d6)](__dirname,'python_service',_0x1ebf98(0x1d7));this['log']['info'](_0x1ebf98(0x328)+VENV_PATH+'...'),this[_0x1ebf98(0x17f)]();if(fs[_0x1ebf98(0x292)](VENV_PATH))try{fs[_0x1ebf98(0x2e2)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x5f1695){}exec(_0x1ebf98(0x22d)+VENV_PATH+'\x22',_0x257554=>{const _0x17e32e=_0x1ebf98;if(_0x257554){this[_0x17e32e(0x282)][_0x17e32e(0x2ac)](_0x17e32e(0x269)),this[_0x17e32e(0x1c7)]=![],this[_0x17e32e(0x21e)]=!![];return;}this[_0x17e32e(0x2bb)](_0x469a9f);});};[a0_0x368a15(0x2bb)]=_0x62c2a9=>{const _0x434444=a0_0x368a15;this[_0x434444(0x282)]['info'](_0x434444(0x1de));const _0x15e62b='\x22'+PIP_EXE+_0x434444(0x227)+_0x62c2a9+'\x22';exec(_0x15e62b,{'timeout':0x124f80},(_0x37212d,_0x1df777,_0xc1a29d)=>{const _0x826fe6=_0x434444;this[_0x826fe6(0x1c7)]=![],_0x37212d?(this[_0x826fe6(0x282)][_0x826fe6(0x2ac)](_0x826fe6(0x17b)+(_0xc1a29d||_0x37212d[_0x826fe6(0x2d5)])),this[_0x826fe6(0x21e)]=!![]):(this[_0x826fe6(0x282)][_0x826fe6(0x27f)]('âœ…\x20INSTALL\x20SUCCESS.\x20Verifying...'),exec('\x22'+PYTHON_EXE+'\x22\x20-c\x20\x22import\x20tensorflow;\x20print(\x27OK\x27)\x22',(_0x4381e5,_0x4dc236)=>{const _0x30149b=_0x826fe6;_0x4dc236&&_0x4dc236[_0x30149b(0x288)]('OK')?(this[_0x30149b(0x282)][_0x30149b(0x27f)](_0x30149b(0x1c1)),this['startPythonService']()):(this[_0x30149b(0x282)][_0x30149b(0x2ac)]('âŒ\x20VERIFICATION\x20FAILED.\x20Tensorflow\x20missing.\x20Panic\x20Mode.'),this[_0x30149b(0x21e)]=!![]);}));});};[a0_0x368a15(0x204)]=()=>{const _0x3ca89c=a0_0x368a15;if(this['dependencyInstallInProgress']||this[_0x3ca89c(0x21e)])return;let _0x35aee7=_0x3ca89c(0x1c8);if(fs['existsSync'](PYTHON_EXE))this[_0x3ca89c(0x282)]['info'](_0x3ca89c(0x240)+PYTHON_EXE),_0x35aee7=PYTHON_EXE;else{this[_0x3ca89c(0x282)][_0x3ca89c(0x320)](_0x3ca89c(0x221)),this[_0x3ca89c(0x233)]();return;}try{const _0x16b3eb=path['join'](__dirname,_0x3ca89c(0x1ce),_0x3ca89c(0x31c));this['pythonProcess']=spawn(_0x35aee7,[_0x16b3eb]),this[_0x3ca89c(0x1eb)]['stdout']['on']('data',_0x43ddfe=>{const _0x28008e=_0x3ca89c,_0x19d7ab=_0x43ddfe[_0x28008e(0x1b0)]()[_0x28008e(0x207)]('\x0a');_0x19d7ab[_0x28008e(0x1d1)](_0x41e11e=>{const _0x41c02d=_0x28008e,_0x2186ed=_0x41e11e[_0x41c02d(0x28c)]();if(!_0x2186ed)return;if(_0x2186ed[_0x41c02d(0x29f)](_0x41c02d(0x2bc)))this[_0x41c02d(0x282)][_0x41c02d(0x304)](_0x41c02d(0x30d)+_0x2186ed[_0x41c02d(0x2a7)](0x5)[_0x41c02d(0x28c)]());else{if(_0x2186ed[_0x41c02d(0x29f)](_0x41c02d(0x33e)))try{const _0x4b91f2=JSON[_0x41c02d(0x261)](_0x2186ed[_0x41c02d(0x2a7)](0x8)[_0x41c02d(0x28c)]());this[_0x41c02d(0x324)](_0x4b91f2);}catch(_0x1e1263){this[_0x41c02d(0x282)][_0x41c02d(0x320)]('Invalid\x20JSON:\x20'+_0x2186ed);}}_0x2186ed[_0x41c02d(0x288)](_0x41c02d(0x244))&&(this['log'][_0x41c02d(0x2ac)](_0x41c02d(0x317)+_0x2186ed+_0x41c02d(0x1ab)),this[_0x41c02d(0x21e)]=!![],this[_0x41c02d(0x17f)]());});}),this[_0x3ca89c(0x1eb)]['stderr']['on'](_0x3ca89c(0x199),_0x4035db=>{const _0x36b5f5=_0x3ca89c,_0xa69fd8=_0x4035db['toString']()[_0x36b5f5(0x28c)]();if(!_0xa69fd8[_0x36b5f5(0x288)](_0x36b5f5(0x22c)))this[_0x36b5f5(0x282)][_0x36b5f5(0x2ac)](_0x36b5f5(0x1b6)+_0xa69fd8);}),this[_0x3ca89c(0x1eb)]['on']('close',_0x3d0a29=>{const _0x66e885=_0x3ca89c;this['log']['info']('[PYTHON]\x20Exited\x20'+_0x3d0a29),this['pythonProcess']=null,_0x3d0a29!==0x0&&!this['panicMode']&&setTimeout(()=>this[_0x66e885(0x204)](),0x7530);});}catch(_0x405e23){this[_0x3ca89c(0x282)][_0x3ca89c(0x2ac)]('Error\x20launching\x20Python:\x20'+_0x405e23['message']);}};[a0_0x368a15(0x17f)]=()=>{const _0x1e72cd=a0_0x368a15;if(this['pythonProcess']){this[_0x1e72cd(0x282)][_0x1e72cd(0x27f)](_0x1e72cd(0x1a2));try{this['pythonProcess'][_0x1e72cd(0x259)]();}catch(_0x1d073f){}this['pythonProcess']=null;}};[a0_0x368a15(0x324)]=_0x2096a5=>{const _0x2456af=a0_0x368a15;if(_0x2096a5[_0x2456af(0x26d)]===_0x2456af(0x281))this['log'][_0x2456af(0x304)](_0x2456af(0x2f1));else{if(_0x2096a5[_0x2456af(0x26d)]===_0x2456af(0x263)){const {anomaly_score:_0x3a94f0,is_anomaly:_0x11275a,threshold:_0x263533}=_0x2096a5[_0x2456af(0x208)];this[_0x2456af(0x282)][_0x2456af(0x27f)](_0x2456af(0x1ea)+_0x3a94f0[_0x2456af(0x21c)](0x5)+_0x2456af(0x1f0)+(_0x11275a?'ANOMALY':'OK')),this['setStateAsync']('analysis.security.lastScore',{'val':_0x3a94f0,'ack':!![]}),this[_0x2456af(0x28a)]('analysis.security.lastCheck',{'val':new Date()['toISOString'](),'ack':!![]});if(_0x11275a){const _0x5e6d92=_0x2456af(0x295)+_0x3a94f0['toFixed'](0x4)+')';this[_0x2456af(0x28a)]('analysis.isAlert',{'val':!![],'ack':!![]}),this['setStateAsync'](_0x2456af(0x19f),{'val':_0x5e6d92,'ack':!![]}),this[_0x2456af(0x19c)](_0x2456af(0x1ff)+_0x5e6d92,![],!![]);}}else{if(_0x2096a5[_0x2456af(0x26d)]===_0x2456af(0x203)){const {success:_0x411b8b,details:_0x2b35d4}=_0x2096a5[_0x2456af(0x208)];this['setStateAsync'](_0x2456af(0x340),{'val':_0x411b8b?_0x2456af(0x1f5)+new Date()[_0x2456af(0x2c2)]()+'\x20('+_0x2b35d4+')':_0x2456af(0x2b3)+_0x2b35d4,'ack':!![]});}else{if(_0x2096a5[_0x2456af(0x26d)]===_0x2456af(0x217)){const {success:_0x51aefc,details:_0x151b80}=_0x2096a5[_0x2456af(0x208)];if(_0x51aefc)try{const _0x1bb57e=JSON[_0x2456af(0x261)](_0x151b80);if(_0x1bb57e[_0x2456af(0x285)])this[_0x2456af(0x28a)](_0x2456af(0x33b),{'val':JSON[_0x2456af(0x1cb)](_0x1bb57e[_0x2456af(0x285)]),'ack':!![]});if(_0x1bb57e[_0x2456af(0x334)])this[_0x2456af(0x28a)]('analysis.energy.heatingScore',{'val':JSON['stringify'](_0x1bb57e[_0x2456af(0x334)]),'ack':!![]});}catch(_0x2d0960){}}else{if(_0x2096a5[_0x2456af(0x26d)]==='HEALTH_TRAIN_RESULT'){const {success:_0x3a1a60,details:_0x28717d}=_0x2096a5['payload'];if(_0x3a1a60)this['log'][_0x2456af(0x27f)]('âœ…\x20HEALTH\x20TRAINED:\x20'+_0x28717d);}else{if(_0x2096a5[_0x2456af(0x26d)]===_0x2456af(0x2ed)){const {is_anomaly:_0x26c7a0,details:_0x123641}=_0x2096a5['payload'];this['setStateAsync']('analysis.health.lastCheck',{'val':new Date()[_0x2456af(0x2c9)](),'ack':!![]}),this['setStateAsync'](_0x2456af(0x276),{'val':_0x26c7a0,'ack':!![]});}else{if(_0x2096a5[_0x2456af(0x26d)]===_0x2456af(0x32d)){const {diagnosis:_0x33573a,change_percent:_0x219271}=_0x2096a5['payload'];this['log'][_0x2456af(0x27f)](_0x2456af(0x2e0)+_0x33573a+'\x20('+_0x219271+'%)'),this[_0x2456af(0x28a)](_0x2456af(0x211),{'val':_0x33573a,'ack':!![]}),this[_0x2456af(0x28a)]('analysis.health.trendValue',{'val':_0x219271,'ack':!![]});}}}}}}}};[a0_0x368a15(0x1b3)]=(_0x3a2564,_0x2f3d36={})=>{const _0x501ac4=a0_0x368a15;if(!this[_0x501ac4(0x1eb)]||!this[_0x501ac4(0x1eb)][_0x501ac4(0x197)][_0x501ac4(0x32b)])return;const _0x2ba75b=JSON[_0x501ac4(0x1cb)]({'command':_0x3a2564,..._0x2f3d36});try{this[_0x501ac4(0x1eb)][_0x501ac4(0x197)]['write'](_0x2ba75b+'\x0a');}catch(_0x24e74f){}};['initSensorSubscriptions']=async()=>{const _0x2fef65=a0_0x368a15,_0x39593b=this[_0x2fef65(0x23b)][_0x2fef65(0x1a1)];if(_0x39593b)for(const _0x17d269 of _0x39593b){await this[_0x2fef65(0x271)](_0x17d269['id']);}};[a0_0x368a15(0x2b2)]=async()=>{const _0x5d8a87=a0_0x368a15,_0x5be471=this[_0x5d8a87(0x23b)][_0x5d8a87(0x18b)];if(_0x5be471)for(const _0x406c1e of _0x5be471){await this['subscribeForeignStatesAsync'](_0x406c1e);}};[a0_0x368a15(0x30f)]=async()=>{const _0x40ab6e=a0_0x368a15,_0x2ab426=this[_0x40ab6e(0x23b)]['notifyTelegramInstance'];if(this[_0x40ab6e(0x23b)][_0x40ab6e(0x1e2)]&&_0x2ab426)await this['subscribeForeignStatesAsync'](_0x2ab426+_0x40ab6e(0x1b8));};[a0_0x368a15(0x186)]=async()=>{const _0x2820ae=a0_0x368a15;try{const _0x2941d1=this[_0x2820ae(0x23b)][_0x2820ae(0x18b)]||[];let _0x350f5f=![];const _0x2f06bf=[];for(const _0x5cd7c6 of _0x2941d1){try{const _0x1cfd8b=await this[_0x2820ae(0x2c8)](_0x5cd7c6);_0x1cfd8b&&(_0x1cfd8b[_0x2820ae(0x260)]===!![]||_0x1cfd8b['val']===_0x2820ae(0x2a1)||_0x1cfd8b[_0x2820ae(0x260)]===0x1)&&(_0x350f5f=!![],_0x2f06bf[_0x2820ae(0x201)](_0x5cd7c6));}catch(_0x25dacc){}}return await this[_0x2820ae(0x28a)](_0x2820ae(0x267),{'val':_0x2f06bf['join'](',\x20'),'ack':!![]}),_0x350f5f&&(this['exitTimer']&&(this['log'][_0x2820ae(0x27f)](_0x2820ae(0x315)),this['abortExitTimer']()),!this[_0x2820ae(0x1a9)]&&this[_0x2820ae(0x331)]===SYSTEM_MODES[_0x2820ae(0x291)]&&await this[_0x2820ae(0x1e3)](!![])),_0x350f5f;}catch(_0x57339f){return![];}};[a0_0x368a15(0x231)]=()=>{const _0x34841a=a0_0x368a15;this[_0x34841a(0x239)](),this[_0x34841a(0x306)]=!![],this[_0x34841a(0x284)]=setTimeout(()=>{const _0x204c0f=_0x34841a;this[_0x204c0f(0x306)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),this[_0x34841a(0x314)]=setTimeout(()=>{const _0x44448f=_0x34841a;this[_0x44448f(0x1e3)](![]),this[_0x44448f(0x314)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);};[a0_0x368a15(0x239)]=()=>{const _0x806d1=a0_0x368a15;if(this[_0x806d1(0x314)])clearTimeout(this['exitTimer']);if(this[_0x806d1(0x284)])clearTimeout(this['exitGraceTimer']);this[_0x806d1(0x314)]=null,this[_0x806d1(0x284)]=null,this[_0x806d1(0x306)]=![];};['setPresence']=async _0x4b7b74=>{const _0x2b55be=a0_0x368a15;if(this[_0x2b55be(0x1a9)]===_0x4b7b74)return;this[_0x2b55be(0x1a9)]=_0x4b7b74,await this[_0x2b55be(0x28a)](_0x2b55be(0x2fa),{'val':_0x4b7b74,'ack':!![]});};[a0_0x368a15(0x22a)]=async()=>{const _0x153104=a0_0x368a15;try{const _0x5e7974=await this[_0x153104(0x2a3)](_0x153104(0x28f)),_0x5ed364=await this[_0x153104(0x2a3)](_0x153104(0x2a5));if(_0x5e7974&&_0x5e7974[_0x153104(0x260)]&&_0x5ed364){const _0x2da51c=_0x5e7974[_0x153104(0x260)];let _0x5da29b=_0x5ed364[_0x153104(0x260)];try{_0x5da29b=JSON['parse'](_0x5da29b);}catch(_0x92d202){}this['log']['info'](_0x153104(0x1aa)+_0x2da51c+_0x153104(0x2fb)+_0x5da29b),await this[_0x153104(0x266)](_0x2da51c,_0x5da29b);}else this['log'][_0x153104(0x320)]('ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x34e68e){this['log']['error']('BUTLER\x20Execution\x20Error:\x20'+_0x34e68e[_0x153104(0x2d5)]);}};['handleTelegramResponse']=async _0x501df0=>{const _0x4ca318=a0_0x368a15;let _0x58076f=_0x501df0;_0x501df0['startsWith']('[')&&(_0x58076f=_0x501df0['substring'](_0x501df0[_0x4ca318(0x20a)](']')+0x1));if(_0x58076f===_0x4ca318(0x1c2))await this[_0x4ca318(0x28a)](_0x4ca318(0x23f),{'val':![],'ack':!![]}),await this[_0x4ca318(0x28a)]('analysis.alertReason',{'val':_0x4ca318(0x30e),'ack':!![]}),this[_0x4ca318(0x225)]=![],this[_0x4ca318(0x19c)](_0x4ca318(0x1f6),![]);else _0x58076f==='COGNI_REQUEST_CALL'&&this[_0x4ca318(0x19c)](_0x4ca318(0x245),![],!![]);};[a0_0x368a15(0x19c)]=async(_0x4210a8,_0x3efb6b=![],_0x1389b6=![])=>{const _0x49ef16=a0_0x368a15,_0x3d918a=this[_0x49ef16(0x23b)];if(_0x3d918a[_0x49ef16(0x1e2)]){let _0x414f8b={};(_0x4210a8['includes'](_0x49ef16(0x1bf))||_0x1389b6)&&(_0x414f8b={'reply_markup':{'inline_keyboard':[[{'text':_0x49ef16(0x29a),'callback_data':_0x49ef16(0x1c2)}],[{'text':'ðŸ“ž\x20RÃ¼ckruf\x20anfordern','callback_data':_0x49ef16(0x273)}]]}}),await this[_0x49ef16(0x20b)](_0x3d918a[_0x49ef16(0x2e8)],_0x49ef16(0x31e),{'text':_0x4210a8,'user':_0x3d918a[_0x49ef16(0x188)],..._0x414f8b});}if(_0x3d918a[_0x49ef16(0x226)]){let _0x5de357={'message':_0x4210a8,'title':_0x1389b6?'ðŸš¨\x20EMERGENCY':_0x49ef16(0x2aa),'priority':_0x1389b6?0x2:0x1,'device':_0x3d918a[_0x49ef16(0x1ad)]};_0x1389b6&&(_0x5de357['retry']=0x1e,_0x5de357[_0x49ef16(0x264)]=0xe10,_0x5de357['sound']='siren'),await this[_0x49ef16(0x20b)](_0x3d918a[_0x49ef16(0x25d)],_0x49ef16(0x31e),_0x5de357);}_0x3d918a[_0x49ef16(0x2b4)]&&await this[_0x49ef16(0x20b)](_0x3d918a[_0x49ef16(0x2cc)],_0x49ef16(0x31e),{'text':_0x4210a8,'to':_0x3d918a[_0x49ef16(0x19b)]});};[a0_0x368a15(0x2a2)]=async()=>{const _0x1cbdb4=a0_0x368a15,_0x4fa251=this[_0x1cbdb4(0x23b)][_0x1cbdb4(0x1f8)],_0x9a58c0=this[_0x1cbdb4(0x1a3)][_0x1cbdb4(0x20d)]>0x0?this[_0x1cbdb4(0x1a3)][0x0]['timestamp']:Date[_0x1cbdb4(0x2da)](),_0x37460c=(Date[_0x1cbdb4(0x2da)]()-_0x9a58c0)/(0x3e8*0x3c*0x3c);let _0xb3fbfd='';this[_0x1cbdb4(0x23b)][_0x1cbdb4(0x2c7)]&&this[_0x1cbdb4(0x331)]===SYSTEM_MODES[_0x1cbdb4(0x291)]&&this[_0x1cbdb4(0x1a9)]&&(_0x37460c>_0x4fa251&&(_0xb3fbfd=_0x1cbdb4(0x327)+_0x37460c['toFixed'](0x1)+'h.')),this[_0x1cbdb4(0x210)](_0xb3fbfd);};['runPythonHealthCheck']=async()=>{const _0x56122f=a0_0x368a15;if(!this[_0x56122f(0x2d2)]||this[_0x56122f(0x2d2)][_0x56122f(0x20d)]<0x2)return;const _0x3c360b=this[_0x56122f(0x2d2)][_0x56122f(0x1f4)](_0x356ebb=>{const _0x21913a=_0x56122f,_0x3c2766=(_0x356ebb[_0x21913a(0x265)]||'')[_0x21913a(0x308)]();return ACTIVITY_LEVEL_MAP[_0x3c2766]||0x32;});this[_0x56122f(0x1b3)](_0x56122f(0x278),{'values':_0x3c360b,'tag':_0x56122f(0x25c)});};[a0_0x368a15(0x2d4)]=async()=>{const _0x4b11c0=a0_0x368a15;if(!this[_0x4b11c0(0x2e3)])return;await this[_0x4b11c0(0x28a)](LTM_DP_STATUS,{'val':_0x4b11c0(0x22e),'ack':!![]});if(!this['geminiModel']||this[_0x4b11c0(0x2fc)][_0x4b11c0(0x20d)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await this[_0x4b11c0(0x28a)](LTM_DP_STATUS,{'val':_0x4b11c0(0x26a),'ack':!![]});return;}const _0x2f76e6=JSON['parse'](JSON['stringify'](this[_0x4b11c0(0x2fc)])),_0x3ea622=_0x2f76e6[_0x4b11c0(0x20d)],_0x105ae4='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x4b11c0(0x1cb)](_0x2f76e6);try{const _0x522cff=await this['geminiModel']['generateContent'](_0x105ae4),_0x597a83=JSON['parse'](_0x522cff[_0x4b11c0(0x21d)][_0x4b11c0(0x2be)]()[_0x4b11c0(0x21b)](/```json|```/g,'')[_0x4b11c0(0x28c)]()),_0x5bf57b={'timestamp':new Date()['toISOString'](),'eventCount':_0x3ea622,'summary':_0x597a83[_0x4b11c0(0x243)]||_0x4b11c0(0x31b),'activityLevel':_0x597a83['activityLevel']||_0x4b11c0(0x270),'systemMode':this[_0x4b11c0(0x331)]};this[_0x4b11c0(0x2d2)][_0x4b11c0(0x201)](_0x5bf57b),await this[_0x4b11c0(0x1b1)](),this[_0x4b11c0(0x2fc)]=[],await this[_0x4b11c0(0x234)](),await this['setStateAsync'](LTM_DP_STATUS,{'val':_0x4b11c0(0x303),'ack':!![]});if(this[_0x4b11c0(0x2e3)])this[_0x4b11c0(0x1b3)]('ANALYZE_HEALTH',{'digest':_0x5bf57b});}catch(_0x28a833){this[_0x4b11c0(0x282)][_0x4b11c0(0x2ac)](_0x28a833[_0x4b11c0(0x2d5)]);}};[a0_0x368a15(0x2de)]=async()=>{const _0x1213b6=a0_0x368a15;if(!this[_0x1213b6(0x2e3)]||!this['geminiModel'])return;const _0x3fd8cf=this[_0x1213b6(0x23b)][_0x1213b6(0x1d5)]||0xe;if(this[_0x1213b6(0x2d2)][_0x1213b6(0x20d)]<_0x3fd8cf+0x7){await this[_0x1213b6(0x28a)](LTM_DP_DRIFT_STATUS,{'val':_0x1213b6(0x209),'ack':!![]});return;}const _0x1d90d1=this[_0x1213b6(0x2d2)][_0x1213b6(0x1a5)](-_0x3fd8cf),_0x2b439b=this[_0x1213b6(0x2d2)][_0x1213b6(0x1a5)](0x0,this[_0x1213b6(0x2d2)]['length']-_0x3fd8cf),_0x3de8f4=_0x1213b6(0x1db)+JSON[_0x1213b6(0x1cb)](_0x2b439b)+_0x1213b6(0x1df)+JSON[_0x1213b6(0x1cb)](_0x1d90d1);try{const _0x10ff18=await this[_0x1213b6(0x218)][_0x1213b6(0x17e)](_0x3de8f4),_0x526f3=JSON[_0x1213b6(0x261)](_0x10ff18['response'][_0x1213b6(0x2be)]()[_0x1213b6(0x21b)](/```json|```/g,'')[_0x1213b6(0x28c)]());_0x526f3['baselineDrift']&&(await this['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x526f3[_0x1213b6(0x215)],'ack':!![]}),await this[_0x1213b6(0x28a)](LTM_DP_DRIFT_DETAILS,{'val':_0x526f3[_0x1213b6(0x1d3)],'ack':!![]}),await this[_0x1213b6(0x28a)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x1213b6(0x2da)](),'ack':!![]}));}catch(_0x5cbb70){}};[a0_0x368a15(0x21a)]=async()=>{const _0x95aa91=a0_0x368a15;if(!this[_0x95aa91(0x218)])return;this[_0x95aa91(0x282)][_0x95aa91(0x27f)](_0x95aa91(0x256));const _0x2dd52a=this[_0x95aa91(0x2d2)][_0x95aa91(0x20d)]>0x0?this[_0x95aa91(0x2d2)][this[_0x95aa91(0x2d2)]['length']-0x1]:null,_0x22898e=_0x2dd52a&&_0x2dd52a[_0x95aa91(0x2af)]?_0x2dd52a['health']['sleepScore']:_0x95aa91(0x235),_0x58c2d0=new Date();_0x58c2d0['setHours'](0x4,0x0,0x0,0x0);const _0x2318ae=this[_0x95aa91(0x1a3)]['filter'](_0x429c75=>new Date(_0x429c75['timestamp'])>_0x58c2d0),_0x162c35=PERSONA_MAPPING[this['config']['aiPersona']||_0x95aa91(0x33a)],_0x2f4650=this['config'][_0x95aa91(0x1d0)]||'',_0x1a28fa=await this[_0x95aa91(0x1a6)](),_0x57dfa8=await this['getCalendarContext'](),_0x3ffe27='ROLLE:\x20Assistent.\x20AUFGABE:\x20Schreibe\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20'+_0x162c35+_0x95aa91(0x212)+_0x2f4650+_0x95aa91(0x2f0)+_0x1a28fa+'\x20'+_0x57dfa8+_0x95aa91(0x2ce)+_0x22898e+_0x95aa91(0x330);try{const _0x5e817e=await this[_0x95aa91(0x218)][_0x95aa91(0x17e)](_0x3ffe27),_0x43bc89=_0x95aa91(0x2ca)+_0x5e817e[_0x95aa91(0x21d)][_0x95aa91(0x2be)]()['trim']();this[_0x95aa91(0x19c)](_0x43bc89);}catch(_0x31d0f6){this[_0x95aa91(0x282)][_0x95aa91(0x2ac)](_0x95aa91(0x1e5)+_0x31d0f6[_0x95aa91(0x2d5)]);}};['getCalendarNames']=async _0x22ab1b=>{const _0x39117a=a0_0x368a15;try{const _0x4ca6e7=await this[_0x39117a(0x2c8)](_0x22ab1b+_0x39117a(0x2e4));if(_0x4ca6e7&&_0x4ca6e7[_0x39117a(0x260)]){const _0x538f71=JSON[_0x39117a(0x261)](_0x4ca6e7[_0x39117a(0x260)]);if(Array[_0x39117a(0x1da)](_0x538f71))return[...new Set(_0x538f71[_0x39117a(0x1f4)](_0x361697=>_0x361697[_0x39117a(0x2c3)])[_0x39117a(0x27c)](Boolean))][_0x39117a(0x31f)]();}}catch(_0x3d5c53){}return[];};[a0_0x368a15(0x1fa)]=async()=>{const _0x4b3351=a0_0x368a15;if(!this[_0x4b3351(0x23b)][_0x4b3351(0x26b)])return _0x4b3351(0x250);const _0x5e8489=this[_0x4b3351(0x23b)][_0x4b3351(0x300)]||_0x4b3351(0x301);try{const _0x4e4433=await this['getForeignStateAsync'](_0x5e8489+_0x4b3351(0x2e4));if(_0x4e4433&&_0x4e4433[_0x4b3351(0x260)]){let _0x5c8366=JSON[_0x4b3351(0x261)](_0x4e4433[_0x4b3351(0x260)]);if(Array[_0x4b3351(0x1da)](_0x5c8366)){if(_0x5c8366[_0x4b3351(0x20d)]>0x0)return'KALENDER:\x20'+_0x5c8366['slice'](0x0,0x3)[_0x4b3351(0x1f4)](_0x7ece=>_0x7ece['event'])[_0x4b3351(0x1d6)](',\x20');}}}catch(_0xbec0b7){}return _0x4b3351(0x2a8);};[a0_0x368a15(0x1c9)]=async _0x35f780=>{const _0x392c10=a0_0x368a15;this['log']['info'](_0x392c10(0x335)+JSON[_0x392c10(0x1cb)](_0x35f780));};['setupLtmScheduler']=()=>{const _0x12f0e3=a0_0x368a15;try{if(this[_0x12f0e3(0x253)])this['ltmJob']['cancel']();if(!this[_0x12f0e3(0x2e3)])return;this[_0x12f0e3(0x253)]=schedule[_0x12f0e3(0x18e)](LTM_SCHEDULE,()=>this[_0x12f0e3(0x2d4)]());}catch(_0x157869){this[_0x12f0e3(0x282)][_0x12f0e3(0x2ac)](_0x12f0e3(0x1c3)+_0x157869[_0x12f0e3(0x2d5)]);}};[a0_0x368a15(0x1e8)]=()=>{const _0x18eed2=a0_0x368a15;try{if(this['modeResetJob'])this['modeResetJob'][_0x18eed2(0x1a4)]();this[_0x18eed2(0x2e1)]=schedule['scheduleJob'](MODE_RESET_SCHEDULE,async()=>{const _0x3870e5=_0x18eed2;await this[_0x3870e5(0x258)](),AUTO_RESET_MODES['includes'](this[_0x3870e5(0x331)])&&await this[_0x3870e5(0x28a)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x3870e5(0x291)],'ack':![]});});}catch(_0x363501){this[_0x18eed2(0x282)][_0x18eed2(0x2ac)]('Reset\x20Sched\x20Error:\x20'+_0x363501['message']);}};[a0_0x368a15(0x19d)]=()=>{const _0x2280db=a0_0x368a15;try{if(this[_0x2280db(0x2c4)])clearInterval(this[_0x2280db(0x2c4)]);if(!this['isProVersion'])return;this['driftAnalysisTimer']=setInterval(()=>this['runBaselineDriftAnalysis'](),(this[_0x2280db(0x23b)][_0x2280db(0x319)]||0x18)*0x36ee80),setTimeout(()=>this[_0x2280db(0x2de)](),0x1388);}catch(_0x364d45){this[_0x2280db(0x282)][_0x2280db(0x2ac)](_0x2280db(0x249)+_0x364d45[_0x2280db(0x2d5)]);}};[a0_0x368a15(0x1b7)]=()=>{const _0x4b22cf=a0_0x368a15;try{if(this[_0x4b22cf(0x332)])this[_0x4b22cf(0x332)]['cancel']();if(!this[_0x4b22cf(0x23b)][_0x4b22cf(0x309)])return;const _0x24d2b3=(this[_0x4b22cf(0x23b)]['briefingTime']||_0x4b22cf(0x2ef))['split'](':'),_0x8c5e33=parseInt(_0x24d2b3[0x0])||0x8,_0x2af139=parseInt(_0x24d2b3[0x1])||0x0,_0x503509=_0x2af139+'\x20'+_0x8c5e33+_0x4b22cf(0x2e6);this[_0x4b22cf(0x332)]=schedule[_0x4b22cf(0x18e)](_0x503509,()=>{const _0x18ffb8=_0x4b22cf;this[_0x18ffb8(0x21a)]();});}catch(_0x53af05){this[_0x4b22cf(0x282)][_0x4b22cf(0x2ac)]('Briefing\x20Sched\x20Error:\x20'+_0x53af05[_0x4b22cf(0x2d5)]);}};async[a0_0x368a15(0x2b0)](){const _0x1754db=a0_0x368a15;this[_0x1754db(0x282)][_0x1754db(0x27f)](_0x1754db(0x1a7)+this[_0x1754db(0x183)]+_0x1754db(0x2d0));if(fs['existsSync'](VENV_PATH)&&!fs[_0x1754db(0x292)](PIP_EXE)){this[_0x1754db(0x282)][_0x1754db(0x320)]('VENV\x20Broken.\x20Starting\x20repair...'),this[_0x1754db(0x233)]();return;}await this[_0x1754db(0x2ff)]();try{this['isProVersion']=await this[_0x1754db(0x29b)](this[_0x1754db(0x23b)]['licenseKey']);}catch(_0x4de645){}if(!this[_0x1754db(0x23b)]['inactivityThresholdHours']||this[_0x1754db(0x23b)][_0x1754db(0x1f8)]<0.1)this['config'][_0x1754db(0x1f8)]=0xc;await this[_0x1754db(0x21f)](),await this['initSystemConfig']();if(this[_0x1754db(0x23b)][_0x1754db(0x1b9)])try{this['genAI']=new GoogleGenerativeAI(this[_0x1754db(0x23b)]['geminiApiKey']),this[_0x1754db(0x218)]=this['genAI'][_0x1754db(0x268)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x1754db(0x2f7)}}),this[_0x1754db(0x282)][_0x1754db(0x27f)]('Gemini\x20AI\x20initialized.');}catch(_0x8e2196){this[_0x1754db(0x282)][_0x1754db(0x2ac)](_0x1754db(0x1e6)+_0x8e2196[_0x1754db(0x2d5)]);}await this[_0x1754db(0x1b5)](),await this['loadSystemMode'](),await this['loadRawEventLog'](),await this[_0x1754db(0x1f1)](),this['subscribeStates'](_0x1754db(0x321)),this['subscribeStates'](LTM_DP_TRIGGER_DIGEST),this[_0x1754db(0x338)](_0x1754db(0x23d)),this[_0x1754db(0x338)](_0x1754db(0x302)),this[_0x1754db(0x338)](_0x1754db(0x1fd)),this[_0x1754db(0x338)](_0x1754db(0x1bc)),this[_0x1754db(0x338)]('analysis.training.triggerSecurity'),this[_0x1754db(0x338)](_0x1754db(0x185)),this[_0x1754db(0x338)](_0x1754db(0x2df)),await this[_0x1754db(0x279)](),await this[_0x1754db(0x2b2)](),await this['setupTelegramListener'](),setTimeout(()=>this[_0x1754db(0x186)](),0x1388);if(this[_0x1754db(0x2f3)])clearInterval(this[_0x1754db(0x2f3)]);const _0x4a6ed2=this[_0x1754db(0x23b)][_0x1754db(0x20c)]||0xf;_0x4a6ed2>0x0&&(this[_0x1754db(0x2f3)]=setInterval(()=>{const _0x253998=_0x1754db;this[_0x253998(0x2a2)]();},_0x4a6ed2*0x3c*0x3e8)),this[_0x1754db(0x2b6)](),this[_0x1754db(0x1e8)](),this[_0x1754db(0x19d)](),this[_0x1754db(0x1b7)](),this['startPythonService'](),setTimeout(()=>{const _0x1649e2=_0x1754db;if(this[_0x1649e2(0x1eb)])this['runPythonHealthCheck']();},0x1388);}}if(require['main']!==module)module[a0_0x368a15(0x2d9)]=_0x4ff304=>new CogniLiving(_0x4ff304);else new CogniLiving();