const a0_0x7b4414=a0_0x53bc;(function(_0x21883e,_0x4ac5dd){const _0x3fcc66=a0_0x53bc,_0x307765=_0x21883e();while(!![]){try{const _0x1802c3=parseInt(_0x3fcc66(0x132))/0x1+-parseInt(_0x3fcc66(0x25d))/0x2*(-parseInt(_0x3fcc66(0x1ac))/0x3)+-parseInt(_0x3fcc66(0x23e))/0x4+-parseInt(_0x3fcc66(0x15f))/0x5*(-parseInt(_0x3fcc66(0x1cb))/0x6)+-parseInt(_0x3fcc66(0x1f3))/0x7*(parseInt(_0x3fcc66(0x1d3))/0x8)+-parseInt(_0x3fcc66(0x222))/0x9+parseInt(_0x3fcc66(0x290))/0xa;if(_0x1802c3===_0x4ac5dd)break;else _0x307765['push'](_0x307765['shift']());}catch(_0x292fe3){_0x307765['push'](_0x307765['shift']());}}}(a0_0x2db1,0x7d7e3));const a0_0x5821e8=(function(){let _0x4fc915=!![];return function(_0x428afd,_0x2ad514){const _0x5297b2=_0x4fc915?function(){const _0x4fe5fb=a0_0x53bc;if(_0x2ad514){const _0x3133ce=_0x2ad514[_0x4fe5fb(0x1b6)](_0x428afd,arguments);return _0x2ad514=null,_0x3133ce;}}:function(){};return _0x4fc915=![],_0x5297b2;};}()),a0_0x164178=a0_0x5821e8(this,function(){const _0x573488=a0_0x53bc;return a0_0x164178['toString']()[_0x573488(0x1d1)](_0x573488(0x23d))[_0x573488(0x2aa)]()[_0x573488(0x1e9)](a0_0x164178)[_0x573488(0x1d1)](_0x573488(0x23d));});a0_0x164178();'use strict';const utils=require(a0_0x7b4414(0x189)),{GoogleGenerativeAI}=require(a0_0x7b4414(0x1e1)),{spawn}=require('child_process'),path=require(a0_0x7b4414(0x1c8)),fs=require('fs'),installer=require(a0_0x7b4414(0x267)),scanner=require(a0_0x7b4414(0x1e3)),schedulers=require(a0_0x7b4414(0x21c)),topology=require(a0_0x7b4414(0x1e5)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x7b4414(0x2a1),LTM_DP_DAILY_DIGESTS=a0_0x7b4414(0x154),LTM_DP_STATUS=a0_0x7b4414(0x29b),LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS=a0_0x7b4414(0x14a),LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS=a0_0x7b4414(0x186),LTM_DP_DRIFT_DETAILS=a0_0x7b4414(0x28a),LTM_DP_DRIFT_LAST_CHECK=a0_0x7b4414(0x14b),SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':a0_0x7b4414(0x26d),'VACATION':'vacation','PARTY':a0_0x7b4414(0x1db),'GUEST':a0_0x7b4414(0x251)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x7b4414(0x22f)],SYSTEM_MODES[a0_0x7b4414(0x18d)]],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0x7b4414(0x1e8),'family':a0_0x7b4414(0x126),'single_comfort':a0_0x7b4414(0x2a0),'security':a0_0x7b4414(0x157)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x323b41){const _0x2c69e9=a0_0x7b4414;try{const _0x4a7c7c=['analysis.history_debug_00',_0x2c69e9(0x1f1)];for(const _0x101aa5 of _0x4a7c7c){try{const _0x4cf223=await _0x323b41['getObjectAsync'](_0x101aa5);if(_0x4cf223)await _0x323b41['delObjectAsync'](_0x101aa5);}catch(_0x2e719b){}}}catch(_0x35f0fe){}}async function checkLicense(_0x4d5acc){return!![];}async function initHistory(_0x54a988){const _0x1082a3=a0_0x7b4414;try{const _0x516fef=await _0x54a988[_0x1082a3(0x15e)](_0x1082a3(0x2a2));_0x516fef&&_0x516fef[_0x1082a3(0x246)]&&(_0x54a988[_0x1082a3(0x1c6)]=JSON['parse'](_0x516fef['val'][_0x1082a3(0x2aa)]()));}catch(_0x23a191){_0x54a988[_0x1082a3(0x1c6)]=[];}try{const _0x34f406=await _0x54a988[_0x1082a3(0x15e)](_0x1082a3(0x13f));if(_0x34f406&&_0x34f406[_0x1082a3(0x246)])_0x54a988[_0x1082a3(0x271)]=JSON[_0x1082a3(0x2b2)](_0x34f406[_0x1082a3(0x246)]['toString']());}catch(_0x39af2f){_0x54a988[_0x1082a3(0x271)]=[];}if(_0x54a988[_0x1082a3(0x1c6)]&&_0x54a988[_0x1082a3(0x1c6)]['length']>0x0){_0x54a988[_0x1082a3(0x17a)][_0x1082a3(0x176)](_0x1082a3(0x18f));for(let _0x886c02=_0x54a988[_0x1082a3(0x1c6)][_0x1082a3(0x23f)]-0x1;_0x886c02>=0x0;_0x886c02--){const _0x5a18fe=_0x54a988['eventHistory'][_0x886c02];if(_0x5a18fe&&_0x5a18fe['id']!==undefined&&_0x5a18fe[_0x1082a3(0x19b)]!==undefined)_0x54a988[_0x1082a3(0x232)][_0x5a18fe['id']]=_0x5a18fe[_0x1082a3(0x19b)];}}}async function initSystemConfig(_0x5eed30){const _0x258bf7=a0_0x7b4414;try{const _0x16f79f=await _0x5eed30[_0x258bf7(0x263)]('system.config');if(_0x16f79f&&_0x16f79f['common'])_0x5eed30['systemConfig']={'latitude':_0x16f79f['common'][_0x258bf7(0x1de)]||0x0,'longitude':_0x16f79f[_0x258bf7(0x268)][_0x258bf7(0x182)]||0x0,'city':_0x16f79f[_0x258bf7(0x268)][_0x258bf7(0x14f)]||''};}catch(_0x4bcd70){}}async function createAllObjects(_0x55509c){const _0xdb7e55=a0_0x7b4414;await _0x55509c[_0xdb7e55(0x237)]('system',{'type':_0xdb7e55(0x14c),'common':{'name':'System'},'native':{}}),await _0x55509c['extendObjectAsync'](SYSTEM_DP_MODE,{'type':_0xdb7e55(0x2a5),'common':{'name':'System\x20Mode','type':_0xdb7e55(0x210),'role':_0xdb7e55(0x2a5),'read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL']},'native':{}}),await _0x55509c['setObjectNotExistsAsync'](_0xdb7e55(0x151),{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x22a),'type':_0xdb7e55(0x210),'role':_0xdb7e55(0x1c9),'read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x1ba),{'type':_0xdb7e55(0x2a5),'common':{'name':'Last\x20raw\x20event','type':_0xdb7e55(0x210),'role':'json','read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x2a2),{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x181),'type':_0xdb7e55(0x210),'role':_0xdb7e55(0x1fe),'read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x237)](_0xdb7e55(0x253),{'type':_0xdb7e55(0x14c),'common':{'name':_0xdb7e55(0x1eb)},'native':{}}),await _0x55509c['setObjectNotExistsAsync'](_0xdb7e55(0x278),{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x25f),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x55509c['setObjectNotExistsAsync']('analysis.training.triggerHealth',{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x1f0),'type':_0xdb7e55(0x1e6),'role':_0xdb7e55(0x226),'read':!![],'write':!![]},'native':{}}),await _0x55509c['setObjectNotExistsAsync'](_0xdb7e55(0x1cd),{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x17b),'type':_0xdb7e55(0x1e6),'role':_0xdb7e55(0x226),'read':!![],'write':!![]},'native':{}}),await _0x55509c['setObjectNotExistsAsync']('analysis.training.triggerComfort',{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x196),'type':'boolean','role':_0xdb7e55(0x226),'read':!![],'write':!![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x152),{'type':'state','common':{'name':_0xdb7e55(0x29f),'type':_0xdb7e55(0x1e6),'role':_0xdb7e55(0x226),'read':!![],'write':!![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)]('analysis.training.status',{'type':_0xdb7e55(0x2a5),'common':{'name':'Training\x20Status','type':'string','role':_0xdb7e55(0x1c9),'read':!![],'write':![]},'native':{}}),await _0x55509c['extendObjectAsync']('analysis.security',{'type':_0xdb7e55(0x14c),'common':{'name':_0xdb7e55(0x1d0)},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x216),{'type':_0xdb7e55(0x2a5),'common':{'name':'Anomaly\x20Score','type':_0xdb7e55(0x27a),'role':_0xdb7e55(0x19b),'read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)]('analysis.security.currentThreshold',{'type':'state','common':{'name':_0xdb7e55(0x1cf),'type':_0xdb7e55(0x27a),'role':_0xdb7e55(0x19b),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x22e),{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x27c),'type':_0xdb7e55(0x210),'role':_0xdb7e55(0x1ad),'read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x237)](_0xdb7e55(0x143),{'type':_0xdb7e55(0x14c),'common':{'name':_0xdb7e55(0x1c3)},'native':{}}),await _0x55509c['setObjectNotExistsAsync'](_0xdb7e55(0x13a),{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x25a),'type':_0xdb7e55(0x210),'role':_0xdb7e55(0x1fe),'read':!![],'write':![],'def':_0xdb7e55(0x27d)},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x17e),{'type':'state','common':{'name':'Topology\x20Matrix\x20(Legacy)','type':_0xdb7e55(0x210),'role':_0xdb7e55(0x1fe),'read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x237)]('analysis.health',{'type':_0xdb7e55(0x14c),'common':{'name':_0xdb7e55(0x136)},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x142),{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x27c),'type':_0xdb7e55(0x210),'role':_0xdb7e55(0x1ad),'read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x1ff),{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x250),'type':_0xdb7e55(0x1e6),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x1a8),{'type':_0xdb7e55(0x2a5),'common':{'name':'Trend','type':_0xdb7e55(0x210),'role':_0xdb7e55(0x1c9),'read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x256),{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x261),'type':_0xdb7e55(0x27a),'role':_0xdb7e55(0x19b),'read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x1fa),{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x173),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x12d),{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x192),'type':_0xdb7e55(0x27a),'role':'value','read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x237)]('analysis.energy',{'type':_0xdb7e55(0x14c),'common':{'name':_0xdb7e55(0x1b7)},'native':{}}),await _0x55509c['setObjectNotExistsAsync'](_0xdb7e55(0x19e),{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x236),'type':_0xdb7e55(0x210),'role':_0xdb7e55(0x1c9),'read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)]('analysis.energy.heatingScore',{'type':_0xdb7e55(0x2a5),'common':{'name':'Heating\x20Score','type':'string','role':_0xdb7e55(0x1c9),'read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x1ee),{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x130),'type':'string','role':_0xdb7e55(0x1fe),'read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x237)]('LTM',{'type':_0xdb7e55(0x14c),'common':{'name':_0xdb7e55(0x1d5)},'native':{}}),await _0x55509c['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':_0xdb7e55(0x2a5),'common':{'name':'Raw\x20Log','type':_0xdb7e55(0x210),'role':_0xdb7e55(0x1fe),'read':!![],'write':![]},'native':{}}),await _0x55509c['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x206),'type':_0xdb7e55(0x210),'role':_0xdb7e55(0x1fe),'read':!![],'write':![]},'native':{}}),await _0x55509c['setObjectNotExistsAsync']('LTM.trainingData.sequences',{'type':'state','common':{'name':'Sequences','type':'string','role':_0xdb7e55(0x1fe),'read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x2a4),{'type':'state','common':{'name':'Thermodynamics','type':_0xdb7e55(0x210),'role':_0xdb7e55(0x1fe),'read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)]('analysis.trigger',{'type':_0xdb7e55(0x2a5),'common':{'name':'Trigger\x20Analysis','type':_0xdb7e55(0x1e6),'role':_0xdb7e55(0x226),'read':!![],'write':!![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x224),{'type':_0xdb7e55(0x2a5),'common':{'name':'Trigger\x20Briefing','type':'boolean','role':_0xdb7e55(0x226),'read':!![],'write':!![]},'native':{}}),await _0x55509c['setObjectNotExistsAsync'](_0xdb7e55(0x243),{'type':'state','common':{'name':_0xdb7e55(0x170),'type':_0xdb7e55(0x1e6),'role':'indicator.alarm','read':!![],'write':![]},'native':{}}),await _0x55509c['setObjectNotExistsAsync']('analysis.alertReason',{'type':_0xdb7e55(0x2a5),'common':{'name':'Alert\x20Reason','type':_0xdb7e55(0x210),'role':'text.alarm','read':!![],'write':![]},'native':{}}),await _0x55509c['setObjectNotExistsAsync']('analysis.activitySummary',{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x245),'type':_0xdb7e55(0x210),'role':'text','read':!![],'write':![]},'native':{}}),await _0x55509c['setObjectNotExistsAsync']('analysis.automation.patternDetected',{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x1ab),'type':_0xdb7e55(0x1e6),'role':_0xdb7e55(0x1e2),'read':!![],'write':![]},'native':{}}),await _0x55509c['setObjectNotExistsAsync'](_0xdb7e55(0x1e4),{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x195),'type':_0xdb7e55(0x210),'role':'text','read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x19c),{'type':_0xdb7e55(0x2a5),'common':{'name':'Detected\x20Patterns','type':_0xdb7e55(0x210),'role':_0xdb7e55(0x1fe),'read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x29e),{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x259),'type':_0xdb7e55(0x210),'role':_0xdb7e55(0x1c9),'read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x191),{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x12f),'type':_0xdb7e55(0x210),'role':_0xdb7e55(0x1c9),'read':!![],'write':![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x1e7),{'type':_0xdb7e55(0x2a5),'common':{'name':_0xdb7e55(0x274),'type':_0xdb7e55(0x1e6),'role':_0xdb7e55(0x249),'read':!![],'write':!![]},'native':{}}),await _0x55509c[_0xdb7e55(0x21e)](_0xdb7e55(0x22b),{'type':'state','common':{'name':'Trigger\x20Action','type':_0xdb7e55(0x1e6),'role':_0xdb7e55(0x226),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x365dc6){const _0x229faa=a0_0x7b4414;try{const _0x2d82b9=await _0x365dc6[_0x229faa(0x15e)](SYSTEM_DP_MODE);_0x2d82b9&&_0x2d82b9[_0x229faa(0x246)]&&Object[_0x229faa(0x166)](SYSTEM_MODES)['includes'](_0x2d82b9[_0x229faa(0x246)])?_0x365dc6[_0x229faa(0x144)]=_0x2d82b9[_0x229faa(0x246)]:(_0x365dc6['currentSystemMode']=SYSTEM_MODES[_0x229faa(0x295)],await _0x365dc6[_0x229faa(0x127)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x229faa(0x295)],'ack':!![]}));}catch(_0x562fa8){_0x365dc6['currentSystemMode']=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0x4e5e1d){const _0x3ef5ad=a0_0x7b4414;try{const _0x3660e4=await _0x4e5e1d['getStateAsync'](LTM_DP_RAW_LOG);if(_0x3660e4&&_0x3660e4[_0x3ef5ad(0x246)])_0x4e5e1d['rawEventLog']=JSON['parse'](_0x3660e4[_0x3ef5ad(0x246)]);}catch(_0x1a90d5){_0x4e5e1d[_0x3ef5ad(0x209)]=[];}}async function saveRawEventLog(_0xf16e9d){const _0x496c4c=a0_0x7b4414;if(_0xf16e9d[_0x496c4c(0x209)][_0x496c4c(0x23f)]>RAW_LOG_MAX_SIZE)_0xf16e9d[_0x496c4c(0x209)][_0x496c4c(0x272)](0x0,_0xf16e9d[_0x496c4c(0x209)][_0x496c4c(0x23f)]-RAW_LOG_MAX_SIZE);await _0xf16e9d[_0x496c4c(0x127)](LTM_DP_RAW_LOG,{'val':JSON[_0x496c4c(0x247)](_0xf16e9d[_0x496c4c(0x209)]),'ack':!![]});}async function loadDailyDigests(_0x2904ab){const _0x56487a=a0_0x7b4414;try{const _0x2e94f1=await _0x2904ab[_0x56487a(0x15e)](LTM_DP_DAILY_DIGESTS);if(_0x2e94f1&&_0x2e94f1[_0x56487a(0x246)])_0x2904ab[_0x56487a(0x238)]=JSON[_0x56487a(0x2b2)](_0x2e94f1[_0x56487a(0x246)]);}catch(_0x2017d9){_0x2904ab['dailyDigests']=[];}await updateBaselineStatus(_0x2904ab);}function a0_0x2db1(){const _0x2c93ba=['Gemini\x20Error:\x20','Keine\x20Wetterdaten\x20verfÃ¼gbar.','Keine\x20Termine.','floor','apply','Energy\x20Intelligence','reason','HEALTH_RESULT','events.lastEvent','detected','notifyTelegramEnabled','Activity-Level','sendTo','rule','minDaysForBaseline','alertReason','licenseKey','Graph\x20Topology','.\x20WETTER:\x20','analysisTimer','eventHistory','analysis.training.triggerComfort','path','text','scanForDevices','18rFGXDz','Briefing\x20Error:\x20','analysis.training.triggerEnergy','licht','Current\x20Threshold','Security\x20Monitor','search','onUnload','1052808NDjQQJ','name','LTM','driftAnalysisTimer','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','TRAIN_SECURITY','N/A','getMinutes','party','geminiApiKey','targetValue','latitude','config','updated','@google/generative-ai','indicator','./lib/scanner','analysis.automation.description','./lib/topology','boolean','analysis.automation.autoApply','PRIORITÃ„T:\x20Gesundheit/AAL.','constructor','communicate.request','AI\x20Training','warn','presence','analysis.energy.forecast','analysis.alertReason','Train\x20Health','events.history_debug_00','geminiModel','28njtvUZ','analysis.security.currentThreshold','light','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','getMonth','automationProposal','Started...','analysis.health.todayVector','isExit','getHours','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','json','analysis.health.isAnomaly','WiFi\x20Presence\x20detected.','setupDriftAnalysisScheduler','substring','door','data','TOPOLOGY_ACK','Daily\x20Digests','getCalendarNames','service.py','rawEventLog','close','analysis.training.triggerHealth','heating','PYTHON_EXE','type','Success','string','kill','subscribeForeignStatesAsync','details','setupBriefingScheduler','payload','analysis.security.lastScore','TRAINING_COMPLETE','pop','inactivityThresholdHours','setHours','getTime','./lib/scheduler','lampe','setObjectNotExistsAsync','.forecast.current.temperature','HEALTH_TRAIN_RESULT','from','3286026XqSKXc','klima','analysis.triggerBriefing','ðŸ“\x20Feedback\x20received:\x20','button','Unknown','unload','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','Who\x20is\x20present?','analysis.automation.triggerAction','debug','getForeignObjectsAsync','analysis.security.lastCheck','PARTY','dimmer','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','sensorLastValues','cancel','ðŸŒ…\x20Morning\x20Briefing:\x0a','bind','Insulation\x20Score','extendObjectAsync','dailyDigests','analysis.training.status','cogni-living','description','modeResetJob','(((.+)+)+)+$','1902792YANwDT','length','join','toLocaleTimeString','TOPOLOGY_RESULT','analysis.isAlert','getEnums','Activity\x20Summary','val','stringify','rating','switch','python_service','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','startsWith','pythonProcess','cogni-living\x20adapter\x20starting\x20(v','outdoorSensorId','Anomaly\x20Detected','guest','.forecast.current.temp','analysis.training','ack','.\x20EMERGENCY:\x20','analysis.health.trendValue','round','briefingJob','Target\x20ID','Graph\x20Structure\x20(Adjacency\x20Matrix)','Digest','unshift','2ggVQnC','VACATION','Train\x20Security','scanDevices','Trend\x20Value','genAI','getForeignObjectAsync','onStateChange','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','toISOString','./lib/installer','common','keys','replace','threshold','status','normal','systemConfig','python3','KI-Modell\x20nicht\x20initialisiert','analysisHistory','splice','callback','Auto\x20Apply','Wetterdaten\x20deaktiviert.','SET_TOPOLOGY','notifyTelegramInstance','analysis.training.triggerSecurity','Aktiv\x20(','number','Training\x20Error:\x20','Last\x20Check','{\x22rooms\x22:[],\x20\x22matrix\x22:[]}','loc','version','kontakt','insulation','stateChange','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.14.2)...','Kein\x20API\x20Key.','.\x20SYSTEM_MODE:\x20','LTM.trainingData.sequences','devices','includes','toLowerCase','LTM.driftAnalysis.driftDetails','toFixed','trim','ANALYZE_HEALTH','application/json','Success:\x20','11912270wPYkkh','Error\x20launching\x20Python:\x20','subscribeStates','isAlert','some','NORMAL','.\x20EVENTS:\x20','forEach','[RESULT]','contact','enum','LTM.processingStatus','[LOG]','generateContent','analysis.automation.targetId','Build\x20Topology','Fokus\x20auf\x20Komfort.','LTM.rawEventLog','events.history','isEmergency','LTM.trainingData.thermodynamics','state','GAIT_RESULT','Skipped\x20(No\x20AI\x20or\x20Data)','setupModeResetScheduler','User\x20dismissed\x20automation\x20proposal.','toString','\x20new\x20patterns.','analysis.automation.patternDetected','updateTopologyMatrix','ðŸ§ \x20Triggering\x20Security\x20Training...','instance','getLtmData','endsWith','parse','.\x20KONTEXT:\x20','analysis.lastResult','response','accuweather','Fokus\x20auf\x20Familienroutinen.','setStateAsync','now','testApiKey','[RECORDER]\x20Error:\x20','logDuplicates','Failed:\x20','analysis.health.gaitSpeed','ðŸ\x20Python\x20confirmed\x20new\x20topology.','Target\x20Value','Temperature\x20Forecast','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','540141DwgJtl','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','isGracePeriodActive','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','Health\x20Analysis','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','existsSync','simulateButler','analysis.topology.structure','Unbekannt','exports','ready','isPresent','analysis.analysisHistory','motion','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','analysis.health.lastCheck','analysis.topology','currentSystemMode','timestamp','main','Adapter','analysis.activitySummary','Regel\x20erkannt:\x20','LTM.baselineStatus','LTM.driftAnalysis.lastCheck','channel','onMessage','exitTimer','city','.forecast.current.state','system.presenceWho','analysis.training.triggerTopology','PONG','LTM.dailyDigests','activityLevel','success','PRIORITÃ„T:\x20Sicherheit.','ltmLtbWindowDays','âœ…\x20HEALTH\x20TRAINED.','No\x20instance','temperature','setupLtmScheduler','dependencyInstallInProgress','getStateAsync','195615wFMsoQ','unknown','\x20->\x20','ðŸ\x20Python\x20Pong','ðŸ•¸ï¸\x20Topology\x20Graph\x20manually\x20updated\x20by\x20user.','isProVersion','setState','values','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','PREDICT_ENERGY','error','submitFeedback','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','Gemini\x20Init\x20Error:\x20','map','stdin','exitGraceTimer','Alert\x20Status','Gemini\x20AI\x20initialized.','ANOMALY','Today\x20Vector\x20(15m)','bewegung','Deaktiviert\x20(Pro-Feature)','info','lastAlertState','command','stdout','log','Train\x20Energy','getGenerativeModel','Kein\x20API\x20Key!','analysis.security.topologyMatrix','summary','dismissAutomation','Event\x20History','longitude','Lernphase\x20(','message','BUTLER\x20Execution\x20Error:\x20','LTM.driftAnalysis.baselineDrift','targetId','ltmJob','@iobroker/adapter-core','diagnosis','\x0aSTB:\x20','split','GUEST','ENERGY_PREDICT_RESULT','Restoring\x20sensor\x20cache...','analysis.trigger','analysis.automation.targetValue','Gait\x20Speed\x20Trend','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','presenceDevices','Description','Train\x20Comfort','location','\x20Tage)','Missing\x20data','useWeather','value','analysis.automation.detectedPatterns','push','analysis.energy.insulationScore','driftDetails','getDate','object','ltmStbWindowDays','weatherInstance','baselineDrift','.Current.Temperature','fill','getForeignStateAsync','analysis.health.trendDiagnosis','testContext','triggerBriefing','Pattern\x20Detected','97494oCTggZ','date','slice','ANALYZE_SEQUENCE','Err:\x20','matrix'];a0_0x2db1=function(){return _0x2c93ba;};return a0_0x2db1();}async function saveDailyDigests(_0x45eae2,_0x3cf3e8=!![]){const _0x1602de=a0_0x7b4414,_0x256f1d=_0x45eae2['config'][_0x1602de(0x158)]||0x3c;_0x45eae2[_0x1602de(0x238)][_0x1602de(0x23f)]>_0x256f1d&&_0x45eae2[_0x1602de(0x238)][_0x1602de(0x272)](0x0,_0x45eae2[_0x1602de(0x238)][_0x1602de(0x23f)]-_0x256f1d);await _0x45eae2['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x1602de(0x247)](_0x45eae2[_0x1602de(0x238)]),'ack':!![]});if(_0x3cf3e8)await updateBaselineStatus(_0x45eae2);}async function updateAnalysisHistory(_0x259023,_0x552cfc){const _0x3d9d49=a0_0x7b4414;_0x259023[_0x3d9d49(0x271)]['unshift'](_0x552cfc);if(_0x259023[_0x3d9d49(0x271)][_0x3d9d49(0x23f)]>HISTORY_MAX_SIZE)_0x259023[_0x3d9d49(0x271)][_0x3d9d49(0x218)]();await _0x259023[_0x3d9d49(0x127)]('analysis.analysisHistory',{'val':JSON[_0x3d9d49(0x247)](_0x259023[_0x3d9d49(0x271)]),'ack':!![]});}async function updateBaselineStatus(_0x418759){const _0x47a335=a0_0x7b4414;if(!_0x418759[_0x47a335(0x164)]){await _0x418759[_0x47a335(0x127)](LTM_DP_BASELINE_STATUS,{'val':_0x47a335(0x175),'ack':!![]});return;}const _0xec882b=_0x418759['dailyDigests'][_0x47a335(0x23f)]>=(_0x418759[_0x47a335(0x1df)][_0x47a335(0x1c0)]||0x7)?_0x47a335(0x279)+_0x418759[_0x47a335(0x238)][_0x47a335(0x23f)]+_0x47a335(0x198):_0x47a335(0x183)+_0x418759[_0x47a335(0x238)][_0x47a335(0x23f)]+'/'+(_0x418759[_0x47a335(0x1df)][_0x47a335(0x1c0)]||0x7)+')';await _0x418759[_0x47a335(0x127)](LTM_DP_BASELINE_STATUS,{'val':_0xec882b,'ack':!![]});}async function initSensorSubscriptions(_0x236067){const _0x47eb7e=a0_0x7b4414,_0xe89f0b=_0x236067[_0x47eb7e(0x1df)][_0x47eb7e(0x287)];if(_0xe89f0b)for(const _0xb154ea of _0xe89f0b){await _0x236067[_0x47eb7e(0x212)](_0xb154ea['id']);}}async function initPresenceSubscriptions(_0x188486){const _0x4336e8=a0_0x7b4414,_0x3bdc42=_0x188486[_0x4336e8(0x1df)][_0x4336e8(0x194)];if(_0x3bdc42)for(const _0x3a596b of _0x3bdc42){await _0x188486[_0x4336e8(0x212)](_0x3a596b);}}async function setupTelegramListener(_0x561318){const _0x30b1b8=a0_0x7b4414,_0x4a115c=_0x561318['config'][_0x30b1b8(0x277)];if(_0x561318[_0x30b1b8(0x1df)][_0x30b1b8(0x1bc)]&&_0x4a115c)await _0x561318[_0x30b1b8(0x212)](_0x4a115c+'.communicate.request');}async function checkWifiPresence(_0x377abc){const _0xaed788=a0_0x7b4414;try{const _0x484b1c=_0x377abc[_0xaed788(0x1df)]['presenceDevices']||[];let _0x2016a6=![];const _0x146e44=[];for(const _0x2e7db7 of _0x484b1c){try{const _0x1b4994=await _0x377abc[_0xaed788(0x1a7)](_0x2e7db7);_0x1b4994&&(_0x1b4994['val']===!![]||_0x1b4994['val']==='online'||_0x1b4994[_0xaed788(0x246)]===0x1)&&(_0x2016a6=!![],_0x146e44['push'](_0x2e7db7));}catch(_0x308a0f){}}return await _0x377abc[_0xaed788(0x127)](_0xaed788(0x151),{'val':_0x146e44[_0xaed788(0x240)](',\x20'),'ack':!![]}),_0x2016a6&&(_0x377abc['exitTimer']&&(_0x377abc[_0xaed788(0x17a)][_0xaed788(0x176)](_0xaed788(0x200)),abortExitTimer(_0x377abc)),!_0x377abc['isPresent']&&_0x377abc[_0xaed788(0x144)]===SYSTEM_MODES[_0xaed788(0x295)]&&await setPresence(_0x377abc,!![])),_0x2016a6;}catch(_0x32f2bf){return![];}}function startExitTimer(_0x3e0c3f){const _0x2226d2=a0_0x7b4414;abortExitTimer(_0x3e0c3f),_0x3e0c3f[_0x2226d2(0x134)]=!![],_0x3e0c3f[_0x2226d2(0x16f)]=setTimeout(()=>{_0x3e0c3f['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x3e0c3f['exitTimer']=setTimeout(()=>{const _0x32b23a=_0x2226d2;setPresence(_0x3e0c3f,![]),_0x3e0c3f[_0x32b23a(0x14e)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x38585a){const _0x406743=a0_0x7b4414;if(_0x38585a[_0x406743(0x14e)])clearTimeout(_0x38585a[_0x406743(0x14e)]);if(_0x38585a[_0x406743(0x16f)])clearTimeout(_0x38585a[_0x406743(0x16f)]);_0x38585a[_0x406743(0x14e)]=null,_0x38585a[_0x406743(0x16f)]=null,_0x38585a[_0x406743(0x134)]=![];}async function setPresence(_0xfa3d8c,_0x1727bb){const _0x4dc576=a0_0x7b4414;if(_0xfa3d8c['isPresent']===_0x1727bb)return;_0xfa3d8c['isPresent']=_0x1727bb,await _0xfa3d8c[_0x4dc576(0x127)]('system.isPresent',{'val':_0x1727bb,'ack':!![]});}async function executeAutomationAction(_0x4e8b20){const _0x13d53c=a0_0x7b4414;try{const _0x347ca5=await _0x4e8b20['getStateAsync'](_0x13d53c(0x29e)),_0x1eca9c=await _0x4e8b20[_0x13d53c(0x15e)](_0x13d53c(0x191));if(_0x347ca5&&_0x347ca5[_0x13d53c(0x246)]&&_0x1eca9c){const _0x5f5841=_0x347ca5[_0x13d53c(0x246)];let _0x57b103=_0x1eca9c[_0x13d53c(0x246)];try{_0x57b103=JSON[_0x13d53c(0x2b2)](_0x57b103);}catch(_0x530682){}_0x4e8b20['log']['info'](_0x13d53c(0x24b)+_0x5f5841+'\x20=\x20'+_0x57b103),await _0x4e8b20['setForeignStateAsync'](_0x5f5841,_0x57b103);}else _0x4e8b20[_0x13d53c(0x17a)][_0x13d53c(0x1ec)](_0x13d53c(0x1d7));}catch(_0x14d066){_0x4e8b20[_0x13d53c(0x17a)][_0x13d53c(0x169)](_0x13d53c(0x185)+_0x14d066[_0x13d53c(0x184)]);}}async function processSensorEvent(_0x32e29f,_0x2d8d44,_0x31cc0e,_0x348508){const _0x1c4753=a0_0x7b4414;if(!_0x348508)return;const _0x3c55bc=_0x31cc0e[_0x1c4753(0x246)],_0x3382fe=Date[_0x1c4753(0x128)](),_0x43c5da=_0x32e29f[_0x1c4753(0x232)][_0x2d8d44];_0x32e29f[_0x1c4753(0x232)][_0x2d8d44]=_0x3c55bc;if(!_0x348508[_0x1c4753(0x12b)]&&_0x43c5da!=undefined&&_0x43c5da==_0x3c55bc)return;const _0x2da3f1=(_0x348508[_0x1c4753(0x20e)]||'')[_0x1c4753(0x289)](),_0x3f3e55=_0x2da3f1['includes'](_0x1c4753(0x15b))||_0x2da3f1[_0x1c4753(0x288)]('temperatur')||_0x2da3f1['includes'](_0x1c4753(0x223))||_0x2da3f1[_0x1c4753(0x288)]('heizung');_0x32e29f['isProVersion']&&_0x3f3e55&&recordThermodynamics(_0x32e29f,_0x2d8d44,_0x3c55bc,_0x348508[_0x1c4753(0x197)]);const _0x1cc3e5={'timestamp':_0x3382fe,'id':_0x2d8d44,'name':_0x348508[_0x1c4753(0x1d4)],'type':_0x348508['type'],'location':_0x348508['location'],'value':_0x3c55bc};_0x32e29f[_0x1c4753(0x1c6)][_0x1c4753(0x25c)](_0x1cc3e5);if(_0x32e29f[_0x1c4753(0x1c6)][_0x1c4753(0x23f)]>HISTORY_MAX_SIZE)_0x32e29f[_0x1c4753(0x1c6)]['pop']();await _0x32e29f[_0x1c4753(0x127)](_0x1c4753(0x1ba),{'val':JSON[_0x1c4753(0x247)](_0x1cc3e5),'ack':!![]}),await _0x32e29f[_0x1c4753(0x127)](_0x1c4753(0x2a2),{'val':JSON[_0x1c4753(0x247)](_0x32e29f[_0x1c4753(0x1c6)]),'ack':!![]});_0x32e29f[_0x1c4753(0x164)]&&(_0x32e29f['rawEventLog'][_0x1c4753(0x19d)](_0x1cc3e5),await saveRawEventLog(_0x32e29f),recordSequence(_0x32e29f,_0x1cc3e5));if(_0x348508[_0x1c4753(0x1fb)]&&_0x3c55bc===!![]){if(_0x32e29f[_0x1c4753(0x13e)]&&!_0x32e29f['isGracePeriodActive'])startExitTimer(_0x32e29f);else{if(!_0x32e29f['isPresent'])setPresence(_0x32e29f,!![]);}}else{if(_0x348508[_0x1c4753(0x20e)]===_0x1c4753(0x140)&&_0x3c55bc===!![]){if(_0x32e29f[_0x1c4753(0x14e)])abortExitTimer(_0x32e29f);if(!_0x32e29f[_0x1c4753(0x13e)]&&_0x32e29f['currentSystemMode']===SYSTEM_MODES[_0x1c4753(0x295)])setPresence(_0x32e29f,!![]);}}}async function recordThermodynamics(_0x29cfa4,_0x10de81,_0x5831e1,_0x309636){const _0x5e5e09=a0_0x7b4414,_0x3795a7=await getOutsideTemperatureNumeric(_0x29cfa4),_0x357d6d=await _0x29cfa4['getStateAsync'](_0x5e5e09(0x2a4));let _0x465a4e=[];if(_0x357d6d&&_0x357d6d['val'])try{_0x465a4e=JSON[_0x5e5e09(0x2b2)](_0x357d6d['val']);}catch(_0x254afd){}_0x465a4e[_0x5e5e09(0x19d)]({'ts':Date['now'](),'room':_0x309636||_0x5e5e09(0x227),'t_in':_0x5831e1,'t_out':_0x3795a7});if(_0x465a4e[_0x5e5e09(0x23f)]>THERMO_LOG_SIZE)_0x465a4e['shift']();await _0x29cfa4[_0x5e5e09(0x127)](_0x5e5e09(0x2a4),{'val':JSON['stringify'](_0x465a4e),'ack':!![]});}async function getOutsideTemperatureNumeric(_0xe0289a){const _0x296a78=a0_0x7b4414;if(_0xe0289a[_0x296a78(0x1df)][_0x296a78(0x24f)])try{const _0xb8c811=await _0xe0289a[_0x296a78(0x1a7)](_0xe0289a['config']['outdoorSensorId']);if(_0xb8c811&&_0xb8c811[_0x296a78(0x246)]!==undefined&&_0xb8c811[_0x296a78(0x246)]!==null)return parseFloat(_0xb8c811[_0x296a78(0x246)]);}catch(_0x27d6d6){}const _0x51e021=_0xe0289a[_0x296a78(0x1df)]['weatherInstance'];if(!_0xe0289a['config'][_0x296a78(0x19a)]||!_0x51e021)return null;try{let _0x5d6d8d='';if(_0x51e021[_0x296a78(0x288)](_0x296a78(0x125)))_0x5d6d8d=_0x51e021+_0x296a78(0x1a5);else{if(_0x51e021['includes']('daswetter'))_0x5d6d8d=_0x51e021+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x51e021[_0x296a78(0x288)]('openweathermap'))_0x5d6d8d=_0x51e021+_0x296a78(0x21f);else{if(_0x51e021['includes']('weatherunderground'))_0x5d6d8d=_0x51e021+_0x296a78(0x252);}}}if(_0x5d6d8d){const _0x24e7d5=await _0xe0289a['getForeignStateAsync'](_0x5d6d8d);if(_0x24e7d5&&_0x24e7d5['val']!==undefined&&_0x24e7d5[_0x296a78(0x246)]!==null)return parseFloat(_0x24e7d5[_0x296a78(0x246)]);}}catch(_0x1e7270){}return null;}async function recordSequence(_0x49f090,_0x199dc4){const _0x364d13=a0_0x7b4414,_0x3a4e0b=(_0x199dc4[_0x364d13(0x20e)]||'')[_0x364d13(0x289)](),_0x4905d5=[_0x364d13(0x140),_0x364d13(0x174),'prÃ¤senz',_0x364d13(0x1ed),'occupancy',_0x364d13(0x203),'tÃ¼r','window','fenster',_0x364d13(0x299),_0x364d13(0x280),_0x364d13(0x1f5),_0x364d13(0x1ce),'switch','schalter',_0x364d13(0x230),_0x364d13(0x21d)];if(!_0x4905d5[_0x364d13(0x294)](_0x184dc7=>_0x3a4e0b['includes'](_0x184dc7)))return;if(!_0x199dc4[_0x364d13(0x19b)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x364d13(0x19d)]({'loc':_0x199dc4[_0x364d13(0x197)]||_0x364d13(0x227),'id':_0x199dc4['id'],'ts':Date[_0x364d13(0x128)]()}),sequenceTimer=setTimeout(async()=>{const _0x342c63=_0x364d13;if(activeSequence[_0x342c63(0x23f)]>0x1)await saveCompletedSequence(_0x49f090);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x2307f6){const _0x12b36d=a0_0x7b4414;try{const _0x353233=await _0x2307f6['getStateAsync'](_0x12b36d(0x286));let _0x13f7ea=[];if(_0x353233&&_0x353233[_0x12b36d(0x246)])try{_0x13f7ea=JSON[_0x12b36d(0x2b2)](_0x353233[_0x12b36d(0x246)]);}catch(_0x520426){}const _0x2aabbe=activeSequence[0x0]['ts'],_0x55fdd3=activeSequence[_0x12b36d(0x16d)](_0x3525c9=>({'loc':_0x3525c9[_0x12b36d(0x27e)],'t_delta':Math[_0x12b36d(0x257)]((_0x3525c9['ts']-_0x2aabbe)/0x3e8)})),_0x23535c={'timestamp':new Date(_0x2aabbe)[_0x12b36d(0x266)](),'steps':_0x55fdd3,'duration':Math[_0x12b36d(0x257)]((activeSequence[activeSequence[_0x12b36d(0x23f)]-0x1]['ts']-_0x2aabbe)/0x3e8),'daytime':new Date(_0x2aabbe)[_0x12b36d(0x1fc)]()};_0x13f7ea[_0x12b36d(0x19d)](_0x23535c);if(_0x13f7ea['length']>MAX_TRAINING_SET_SIZE)_0x13f7ea['shift']();await _0x2307f6['setStateAsync'](_0x12b36d(0x286),{'val':JSON['stringify'](_0x13f7ea),'ack':!![]}),runSecurityCheck(_0x2307f6,_0x23535c);}catch(_0x59c170){_0x2307f6[_0x12b36d(0x17a)][_0x12b36d(0x169)](_0x12b36d(0x12a)+_0x59c170[_0x12b36d(0x184)]);}}function runSecurityCheck(_0x288cd6,_0x34ee21){const _0x2c0cb7=a0_0x7b4414;if(!_0x288cd6[_0x2c0cb7(0x164)])return;sendToPython(_0x288cd6,_0x2c0cb7(0x1af),{'sequence':_0x34ee21});}async function createDailyDigest(_0x1af95d){const _0xc46262=a0_0x7b4414;if(!_0x1af95d[_0xc46262(0x164)])return;await _0x1af95d[_0xc46262(0x127)](LTM_DP_STATUS,{'val':_0xc46262(0x1f9),'ack':!![]});if(!_0x1af95d[_0xc46262(0x1f2)]||_0x1af95d['rawEventLog'][_0xc46262(0x23f)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x1af95d[_0xc46262(0x127)](LTM_DP_STATUS,{'val':_0xc46262(0x2a7),'ack':!![]});return;}const _0x155d1a=JSON[_0xc46262(0x2b2)](JSON[_0xc46262(0x247)](_0x1af95d['rawEventLog'])),_0x36dcf4=_0x155d1a['length'],_0x21e830=_0xc46262(0x131)+JSON[_0xc46262(0x247)](_0x155d1a);try{const _0x2584f8=await _0x1af95d[_0xc46262(0x1f2)]['generateContent'](_0x21e830),_0x28069c=JSON[_0xc46262(0x2b2)](_0x2584f8[_0xc46262(0x124)][_0xc46262(0x1c9)]()[_0xc46262(0x26a)](/```json|```/g,'')['trim']()),_0x444118={'timestamp':new Date()[_0xc46262(0x266)](),'eventCount':_0x36dcf4,'summary':_0x28069c[_0xc46262(0x17f)]||_0xc46262(0x25b),'activityLevel':_0x28069c[_0xc46262(0x155)]||'normal','systemMode':_0x1af95d[_0xc46262(0x144)]};_0x1af95d['dailyDigests'][_0xc46262(0x19d)](_0x444118),await saveDailyDigests(_0x1af95d),_0x1af95d[_0xc46262(0x209)]=[],await saveRawEventLog(_0x1af95d),await _0x1af95d['setStateAsync'](LTM_DP_STATUS,{'val':_0xc46262(0x20f),'ack':!![]});if(_0x1af95d['isProVersion'])sendToPython(_0x1af95d,_0xc46262(0x28d),{'digest':_0x444118});}catch(_0x2b2565){_0x1af95d[_0xc46262(0x17a)][_0xc46262(0x169)](_0x2b2565[_0xc46262(0x184)]);}}async function runBaselineDriftAnalysis(_0xe0d0fd){const _0x598e16=a0_0x7b4414;if(!_0xe0d0fd[_0x598e16(0x164)]||!_0xe0d0fd[_0x598e16(0x1f2)])return;const _0x328acb=_0xe0d0fd[_0x598e16(0x1df)][_0x598e16(0x1a2)]||0xe;if(_0xe0d0fd[_0x598e16(0x238)]['length']<_0x328acb+0x7){await _0xe0d0fd[_0x598e16(0x127)](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x4aaf52=_0xe0d0fd[_0x598e16(0x238)]['slice'](-_0x328acb),_0x48be19=_0xe0d0fd[_0x598e16(0x238)][_0x598e16(0x1ae)](0x0,_0xe0d0fd[_0x598e16(0x238)][_0x598e16(0x23f)]-_0x328acb),_0x1c373f=_0x598e16(0x137)+JSON[_0x598e16(0x247)](_0x48be19)+_0x598e16(0x18b)+JSON['stringify'](_0x4aaf52);try{const _0x436eef=await _0xe0d0fd['geminiModel'][_0x598e16(0x29d)](_0x1c373f),_0x1d11cc=JSON['parse'](_0x436eef[_0x598e16(0x124)][_0x598e16(0x1c9)]()[_0x598e16(0x26a)](/```json|```/g,'')[_0x598e16(0x28c)]());_0x1d11cc[_0x598e16(0x1a4)]&&(await _0xe0d0fd[_0x598e16(0x127)](LTM_DP_DRIFT_STATUS,{'val':_0x1d11cc['baselineDrift'],'ack':!![]}),await _0xe0d0fd[_0x598e16(0x127)](LTM_DP_DRIFT_DETAILS,{'val':_0x1d11cc[_0x598e16(0x19f)],'ack':!![]}),await _0xe0d0fd[_0x598e16(0x127)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x598e16(0x128)](),'ack':!![]}));}catch(_0x25a448){}}async function sendMorningBriefing(_0xc8f687){const _0x19db5e=a0_0x7b4414;if(!_0xc8f687[_0x19db5e(0x1f2)])return;try{const _0x4d9e29=_0x19db5e(0x141),_0x4c8526=await _0xc8f687[_0x19db5e(0x1f2)][_0x19db5e(0x29d)](_0x4d9e29),_0x547693=_0x4c8526[_0x19db5e(0x124)]['text']();sendNotification(_0xc8f687,_0x19db5e(0x234)+_0x547693);}catch(_0x27bf6a){_0xc8f687['log']['error'](_0x19db5e(0x1cc)+_0x27bf6a[_0x19db5e(0x184)]);}}function stopPythonService(_0x5c7a28){const _0x470d85=a0_0x7b4414;if(_0x5c7a28[_0x470d85(0x24d)]){try{_0x5c7a28[_0x470d85(0x24d)][_0x470d85(0x211)]();}catch(_0x1af2ef){}_0x5c7a28[_0x470d85(0x24d)]=null;}}function sendToPython(_0x580a77,_0x409298,_0x22bfad={}){const _0x51e5e5=a0_0x7b4414;if(!_0x580a77[_0x51e5e5(0x24d)]||!_0x580a77[_0x51e5e5(0x24d)][_0x51e5e5(0x16e)]['writable'])return;const _0x428cb7=JSON[_0x51e5e5(0x247)]({'command':_0x409298,..._0x22bfad});try{_0x580a77['pythonProcess'][_0x51e5e5(0x16e)]['write'](_0x428cb7+'\x0a');}catch(_0x3952c5){}}function runPythonHealthCheck(_0x1df8ad){const _0xa5739b=a0_0x7b4414;if(!_0x1df8ad[_0xa5739b(0x238)]||_0x1df8ad[_0xa5739b(0x238)][_0xa5739b(0x23f)]<0x2)return;const _0x5caa64=_0x1df8ad[_0xa5739b(0x238)][_0xa5739b(0x16d)](_0x4fb3f7=>{const _0x294c79=_0xa5739b,_0x44e42a=(_0x4fb3f7[_0x294c79(0x155)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x44e42a]||0x32;});sendToPython(_0x1df8ad,'ANALYZE_TREND',{'values':_0x5caa64,'tag':_0xa5739b(0x1bd)});}function a0_0x53bc(_0x5ea72c,_0x42d037){const _0x2c5a3b=a0_0x2db1();return a0_0x53bc=function(_0x164178,_0x5821e8){_0x164178=_0x164178-0x124;let _0x2db1bc=_0x2c5a3b[_0x164178];return _0x2db1bc;},a0_0x53bc(_0x5ea72c,_0x42d037);}function handlePythonResult(_0x1ca4f8,_0x4df47e){const _0x509988=a0_0x7b4414;if(_0x4df47e[_0x509988(0x20e)]===_0x509988(0x153))_0x1ca4f8['log'][_0x509988(0x22c)](_0x509988(0x162));else{if(_0x4df47e[_0x509988(0x20e)]==='SECURITY_RESULT'){const {anomaly_score:_0xc1b045,is_anomaly:_0x18d0e4,threshold:_0x19f1ee,explanation:_0x157320}=_0x4df47e[_0x509988(0x215)];_0x1ca4f8['log']['info'](_0x509988(0x229)+_0xc1b045[_0x509988(0x28b)](0x5)+_0x509988(0x161)+(_0x18d0e4?_0x509988(0x172):'OK')),_0x1ca4f8[_0x509988(0x127)](_0x509988(0x216),{'val':_0xc1b045,'ack':!![]}),_0x1ca4f8[_0x509988(0x127)](_0x509988(0x22e),{'val':new Date()[_0x509988(0x266)](),'ack':!![]});if(_0x19f1ee)_0x1ca4f8[_0x509988(0x127)](_0x509988(0x1f4),{'val':_0x19f1ee,'ack':!![]});if(_0x18d0e4){let _0x337797=_0x509988(0x265)+_0xc1b045[_0x509988(0x28b)](0x4)+')';if(_0x157320&&_0x157320!==_0x509988(0x227))_0x337797+='\x0aGrund:\x20'+_0x157320;_0x1ca4f8['setStateAsync'](_0x509988(0x243),{'val':!![],'ack':!![]}),_0x1ca4f8['setStateAsync'](_0x509988(0x1ef),{'val':_0x337797,'ack':!![]}),sendNotification(_0x1ca4f8,'âš ï¸\x20SECURITY\x20ALARM:\x20'+_0x337797,![],!![]);}}else{if(_0x4df47e[_0x509988(0x20e)]===_0x509988(0x217)){const _0x1653b0=_0x4df47e[_0x509988(0x215)][_0x509988(0x213)]||'',_0x4e715a=_0x4df47e['payload'][_0x509988(0x26b)],_0x1cc1c9=_0x4df47e['payload']['success']?_0x509988(0x28f)+new Date()[_0x509988(0x241)]()+'\x20('+_0x1653b0+')':_0x509988(0x12c)+_0x4df47e[_0x509988(0x215)][_0x509988(0x1b8)];_0x1ca4f8[_0x509988(0x127)](_0x509988(0x239),{'val':_0x1cc1c9,'ack':!![]});if(_0x4df47e[_0x509988(0x215)]['success']&&_0x4e715a)_0x1ca4f8['setStateAsync'](_0x509988(0x1f4),{'val':_0x4e715a,'ack':!![]});}else{if(_0x4df47e[_0x509988(0x20e)]==='COMFORT_RESULT'){const {patterns:_0x328fdf}=_0x4df47e[_0x509988(0x215)];if(_0x328fdf&&_0x328fdf[_0x509988(0x23f)]>0x0){_0x1ca4f8[_0x509988(0x17a)][_0x509988(0x176)](_0x509988(0x16b)+_0x328fdf[_0x509988(0x23f)]+_0x509988(0x2ab)),_0x1ca4f8[_0x509988(0x127)]('analysis.automation.detectedPatterns',{'val':JSON[_0x509988(0x247)](_0x328fdf),'ack':!![]});const _0x1590e0=_0x328fdf[0x0],_0x3897d3=_0x509988(0x149)+_0x1590e0[_0x509988(0x1bf)]+'\x20('+(_0x1590e0['confidence']*0x64)[_0x509988(0x28b)](0x0)+'%)';_0x1ca4f8[_0x509988(0x127)](_0x509988(0x2ac),{'val':!![],'ack':!![]}),_0x1ca4f8['setStateAsync'](_0x509988(0x1e4),{'val':_0x3897d3,'ack':!![]});}else _0x1ca4f8[_0x509988(0x17a)][_0x509988(0x176)](_0x509988(0x1fd)),_0x1ca4f8[_0x509988(0x127)](_0x509988(0x2ac),{'val':![],'ack':!![]}),_0x1ca4f8['setStateAsync'](_0x509988(0x19c),{'val':'[]','ack':!![]});}else{if(_0x4df47e[_0x509988(0x20e)]==='ENERGY_TRAIN_RESULT'){if(_0x4df47e[_0x509988(0x215)][_0x509988(0x156)])try{const _0x1befc4=JSON['parse'](_0x4df47e[_0x509988(0x215)][_0x509988(0x213)]);if(_0x1befc4[_0x509988(0x281)])_0x1ca4f8[_0x509988(0x127)](_0x509988(0x19e),{'val':JSON[_0x509988(0x247)](_0x1befc4[_0x509988(0x281)]),'ack':!![]});if(_0x1befc4['heating'])_0x1ca4f8[_0x509988(0x127)]('analysis.energy.heatingScore',{'val':JSON[_0x509988(0x247)](_0x1befc4[_0x509988(0x20c)]),'ack':!![]});}catch(_0x17657f){}}else{if(_0x4df47e[_0x509988(0x20e)]===_0x509988(0x220)){if(_0x4df47e[_0x509988(0x215)]['success'])_0x1ca4f8[_0x509988(0x17a)]['info'](_0x509988(0x159));}else{if(_0x4df47e[_0x509988(0x20e)]===_0x509988(0x1b9))_0x1ca4f8[_0x509988(0x127)](_0x509988(0x142),{'val':new Date()[_0x509988(0x266)](),'ack':!![]}),_0x1ca4f8[_0x509988(0x127)]('analysis.health.isAnomaly',{'val':_0x4df47e[_0x509988(0x215)]['is_anomaly'],'ack':!![]});else{if(_0x4df47e['type']==='TREND_RESULT')_0x1ca4f8[_0x509988(0x127)](_0x509988(0x1a8),{'val':_0x4df47e[_0x509988(0x215)][_0x509988(0x18a)],'ack':!![]}),_0x1ca4f8[_0x509988(0x127)](_0x509988(0x256),{'val':_0x4df47e[_0x509988(0x215)]['change_percent'],'ack':!![]});else{if(_0x4df47e['type']===_0x509988(0x2a6)){const {speed_trend:_0xca780e}=_0x4df47e[_0x509988(0x215)];if(_0xca780e!==undefined)_0x1ca4f8[_0x509988(0x127)]('analysis.health.gaitSpeed',{'val':_0xca780e,'ack':!![]});}else{if(_0x4df47e[_0x509988(0x20e)]===_0x509988(0x18e)){const {forecast:_0x4dd7b6}=_0x4df47e[_0x509988(0x215)];if(_0x4dd7b6)_0x1ca4f8[_0x509988(0x127)]('analysis.energy.forecast',{'val':JSON[_0x509988(0x247)](_0x4dd7b6),'ack':!![]});}else{if(_0x4df47e[_0x509988(0x20e)]===_0x509988(0x242)){const {data:_0x3321aa}=_0x4df47e['payload'];_0x3321aa&&(_0x1ca4f8[_0x509988(0x17a)][_0x509988(0x176)]('ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.'),_0x1ca4f8[_0x509988(0x127)]('analysis.security.topologyMatrix',{'val':JSON[_0x509988(0x247)](_0x3321aa),'ack':!![]}));}else{if(_0x4df47e['type']===_0x509988(0x205))_0x1ca4f8['log']['debug'](_0x509988(0x12e));else{if(_0x4df47e[_0x509988(0x20e)]==='SIGNAL_RESULT'){}}}}}}}}}}}}}}function startPythonService(_0x3b3396){const _0x177c16=a0_0x7b4414;let _0x2bbe7f=_0x177c16(0x26f);if(fs[_0x177c16(0x138)](installer['PYTHON_EXE']))_0x2bbe7f=installer[_0x177c16(0x20d)];try{const _0x2c8271=path[_0x177c16(0x240)](__dirname,_0x177c16(0x24a),_0x177c16(0x208));_0x3b3396[_0x177c16(0x24d)]=spawn(_0x2bbe7f,[_0x2c8271]),_0x3b3396[_0x177c16(0x24d)][_0x177c16(0x179)]['on'](_0x177c16(0x204),_0x44f958=>{const _0x2ce5bc=_0x177c16,_0x402e03=_0x44f958[_0x2ce5bc(0x2aa)]()[_0x2ce5bc(0x18c)]('\x0a');_0x402e03[_0x2ce5bc(0x297)](_0x185425=>{const _0x713174=_0x2ce5bc,_0x17de6e=_0x185425[_0x713174(0x28c)]();if(!_0x17de6e)return;if(_0x17de6e[_0x713174(0x24c)](_0x713174(0x29c)))_0x3b3396[_0x713174(0x17a)][_0x713174(0x22c)]('[PYTHON]\x20'+_0x17de6e[_0x713174(0x202)](0x5)[_0x713174(0x28c)]());else{if(_0x17de6e[_0x713174(0x24c)](_0x713174(0x298)))try{const _0x2def40=JSON[_0x713174(0x2b2)](_0x17de6e[_0x713174(0x202)](0x8)['trim']());handlePythonResult(_0x3b3396,_0x2def40);}catch(_0x5ceeec){}}});}),_0x3b3396[_0x177c16(0x24d)]['on'](_0x177c16(0x20a),_0x18a8ec=>{const _0x2a0901=_0x177c16;_0x3b3396[_0x2a0901(0x24d)]=null;});}catch(_0x2a7c30){_0x3b3396['log']['error'](_0x177c16(0x291)+_0x2a7c30[_0x177c16(0x184)]);}}async function runAutopilot(_0x498e54){const _0xe4f777=a0_0x7b4414;_0x498e54[_0xe4f777(0x17a)][_0xe4f777(0x22c)](_0xe4f777(0x1f6)),await runGeminiAnalysis(_0x498e54),updateHealthVector(_0x498e54),triggerGaitAnalysis(_0x498e54),triggerEnergyPrediction(_0x498e54);}async function triggerGaitAnalysis(_0x57fb04){const _0x2e1b8e=a0_0x7b4414;if(!_0x57fb04[_0x2e1b8e(0x164)])return;try{const _0x138e64=await _0x57fb04['getStateAsync'](_0x2e1b8e(0x286));_0x138e64&&_0x138e64[_0x2e1b8e(0x246)]&&sendToPython(_0x57fb04,'ANALYZE_GAIT',{'sequences':JSON[_0x2e1b8e(0x2b2)](_0x138e64[_0x2e1b8e(0x246)])});}catch(_0x2cca52){}}async function triggerEnergyPrediction(_0x21b2a7){const _0x3a3404=a0_0x7b4414;if(!_0x21b2a7[_0x3a3404(0x164)])return;try{const _0x517d9e=await getOutsideTemperatureNumeric(_0x21b2a7);if(_0x517d9e===null)return;const _0x31a2bf={},_0x241b27=_0x21b2a7[_0x3a3404(0x1df)][_0x3a3404(0x287)]||[];for(const _0x2ea984 of _0x241b27){if(_0x2ea984[_0x3a3404(0x20e)]===_0x3a3404(0x15b)&&_0x2ea984['location']){const _0x3da310=_0x21b2a7[_0x3a3404(0x232)][_0x2ea984['id']];if(_0x3da310!==undefined)_0x31a2bf[_0x2ea984[_0x3a3404(0x197)]]=_0x3da310;}}Object[_0x3a3404(0x269)](_0x31a2bf)['length']>0x0&&sendToPython(_0x21b2a7,_0x3a3404(0x168),{'current_temps':_0x31a2bf,'t_out':_0x517d9e});}catch(_0x378be7){}}function updateHealthVector(_0x126055){const _0x5f1423=a0_0x7b4414;if(!_0x126055['rawEventLog']||_0x126055[_0x5f1423(0x209)]['length']===0x0)return;const _0xeb29fd=new Array(0x60)['fill'](0x0),_0x5339b8=new Date()[_0x5f1423(0x21a)](0x0,0x0,0x0,0x0);_0x126055[_0x5f1423(0x209)][_0x5f1423(0x297)](_0x36cf89=>{const _0x29249e=_0x5f1423,_0x2e9ad3=new Date(_0x36cf89[_0x29249e(0x145)]);if(_0x2e9ad3[_0x29249e(0x21b)]()>=_0x5339b8){const _0x4b367d=_0x2e9ad3['getHours'](),_0x146412=_0x2e9ad3[_0x29249e(0x1da)](),_0x5dea0b=_0x4b367d*0x4+Math[_0x29249e(0x1b5)](_0x146412/0xf);if(_0x5dea0b>=0x0&&_0x5dea0b<0x60)_0xeb29fd[_0x5dea0b]++;}}),_0x126055[_0x5f1423(0x127)](_0x5f1423(0x1fa),{'val':JSON[_0x5f1423(0x247)](_0xeb29fd),'ack':!![]});}async function getWeatherContext(_0x4af314){const _0x393cf3=a0_0x7b4414;if(!_0x4af314[_0x393cf3(0x1df)]['useWeather']||!_0x4af314[_0x393cf3(0x1df)][_0x393cf3(0x1a3)])return _0x393cf3(0x275);try{const _0xb7b237=_0x4af314[_0x393cf3(0x1df)][_0x393cf3(0x1a3)];let _0x2cd9f0=await _0x4af314[_0x393cf3(0x1a7)](_0xb7b237+_0x393cf3(0x1a5));if(!_0x2cd9f0)_0x2cd9f0=await _0x4af314['getForeignStateAsync'](_0xb7b237+'.forecast.current.temperature');let _0x277b2f=await _0x4af314[_0x393cf3(0x1a7)](_0xb7b237+'.Current.WeatherText');if(!_0x277b2f)_0x277b2f=await _0x4af314[_0x393cf3(0x1a7)](_0xb7b237+_0x393cf3(0x150));if(_0x2cd9f0&&_0x277b2f)return _0x2cd9f0[_0x393cf3(0x246)]+'Â°C,\x20'+_0x277b2f['val'];}catch(_0x4eabc3){}return _0x393cf3(0x1b3);}async function getCalendarContext(_0x588602){const _0x5922e9=a0_0x7b4414;if(!_0x588602['config']['useCalendar']||!_0x588602[_0x5922e9(0x1df)]['calendarInstance'])return'Kalender\x20deaktiviert.';return _0x5922e9(0x1b4);}async function getCalendarNames(_0x5da816,_0xe712f9){return[];}async function saveFeedback(_0x5732ab,_0x244b4a){const _0xb8d88=a0_0x7b4414;_0x5732ab['log']['info'](_0xb8d88(0x225)+_0x244b4a[_0xb8d88(0x248)]);}async function runGeminiAnalysis(_0x5df6a3,_0x244c5e=''){const _0x6beef5=a0_0x7b4414;if(!_0x5df6a3[_0x6beef5(0x1f2)])return;if(_0x5df6a3[_0x6beef5(0x1c6)][_0x6beef5(0x23f)]===0x0)return;const _0x3a31a7=_0x5df6a3[_0x6beef5(0x1c6)][_0x6beef5(0x1ae)](0x0,0xf),_0x20c5ea=await getWeatherContext(_0x5df6a3),_0x2f855a=_0x5df6a3[_0x6beef5(0x144)],_0x4b943d=PERSONA_MAPPING[_0x5df6a3['config']['aiPersona']||'generic'],_0x102ec4=_0x5df6a3[_0x6beef5(0x1df)]['livingContext']||'Keine\x20Details.';let _0x515df0=_0x6beef5(0x13b);try{const _0x641305=await _0x5df6a3[_0x6beef5(0x15e)](_0x6beef5(0x151));if(_0x641305&&_0x641305[_0x6beef5(0x246)])_0x515df0=_0x641305[_0x6beef5(0x246)];}catch(_0x334b08){}let _0x1407a3=![];try{const _0x552e4b=await _0x5df6a3['getStateAsync']('analysis.automation.autoApply');if(_0x552e4b&&_0x552e4b['val'])_0x1407a3=!![];}catch(_0x3ca891){}const _0x5c4a28=_0x6beef5(0x133)+_0x4b943d+_0x6beef5(0x2b3)+_0x102ec4+_0x6beef5(0x285)+_0x2f855a+_0x6beef5(0x1c4)+_0x20c5ea+'.\x20ANWESEND:\x20'+_0x515df0+_0x6beef5(0x296)+JSON[_0x6beef5(0x247)](_0x3a31a7)+_0x6beef5(0x255)+_0x244c5e+_0x6beef5(0x135);try{const _0x189a54=await _0x5df6a3[_0x6beef5(0x1f2)][_0x6beef5(0x29d)](_0x5c4a28),_0x3d0bf5=JSON['parse'](_0x189a54[_0x6beef5(0x124)][_0x6beef5(0x1c9)]()[_0x6beef5(0x26a)](/```json|```/g,'')[_0x6beef5(0x28c)]());await _0x5df6a3['setStateAsync'](_0x6beef5(0x2b4),{'val':JSON[_0x6beef5(0x247)](_0x3d0bf5),'ack':!![]});if(_0x3d0bf5[_0x6beef5(0x17f)])await _0x5df6a3['setStateAsync'](_0x6beef5(0x148),{'val':_0x3d0bf5[_0x6beef5(0x17f)],'ack':!![]});const _0x5ed006={'timestamp':Date['now'](),'id':Date[_0x6beef5(0x128)]()[_0x6beef5(0x2aa)](),'analysis':{'activity':{'summary':_0x3d0bf5[_0x6beef5(0x17f)],'isAlert':_0x3d0bf5[_0x6beef5(0x293)],'alertReason':_0x3d0bf5[_0x6beef5(0x1c1)]},'comfort':{'automationProposal':_0x3d0bf5['automationProposal']}}};await updateAnalysisHistory(_0x5df6a3,_0x5ed006);const _0x52ffab=_0x3d0bf5[_0x6beef5(0x293)]||![];_0x52ffab!==_0x5df6a3[_0x6beef5(0x177)]&&(await _0x5df6a3[_0x6beef5(0x127)](_0x6beef5(0x243),{'val':_0x52ffab,'ack':!![]}),_0x5df6a3[_0x6beef5(0x177)]=_0x52ffab,_0x52ffab&&(await _0x5df6a3[_0x6beef5(0x127)]('analysis.alertReason',{'val':_0x3d0bf5[_0x6beef5(0x1c1)],'ack':!![]}),sendNotification(_0x5df6a3,'âš ï¸\x20ALARM:\x20'+_0x3d0bf5[_0x6beef5(0x1c1)],![],_0x3d0bf5[_0x6beef5(0x2a3)])));if(_0x3d0bf5[_0x6beef5(0x1f8)]&&_0x3d0bf5['automationProposal'][_0x6beef5(0x1bb)]){await _0x5df6a3[_0x6beef5(0x127)](_0x6beef5(0x2ac),{'val':!![],'ack':!![]}),await _0x5df6a3[_0x6beef5(0x127)](_0x6beef5(0x1e4),{'val':_0x3d0bf5[_0x6beef5(0x1f8)][_0x6beef5(0x23b)],'ack':!![]}),await _0x5df6a3[_0x6beef5(0x127)]('analysis.automation.targetId',{'val':_0x3d0bf5[_0x6beef5(0x1f8)]['targetId'],'ack':!![]}),await _0x5df6a3[_0x6beef5(0x127)](_0x6beef5(0x191),{'val':JSON[_0x6beef5(0x247)](_0x3d0bf5['automationProposal'][_0x6beef5(0x1dd)]),'ack':!![]});if(_0x1407a3)executeAutomationAction(_0x5df6a3);}}catch(_0x5cfe0b){_0x5df6a3[_0x6beef5(0x17a)][_0x6beef5(0x169)](_0x6beef5(0x1b2)+_0x5cfe0b['message']);}}async function startSystem(_0x45202e){const _0x2b9091=a0_0x7b4414;_0x45202e[_0x2b9091(0x17a)][_0x2b9091(0x176)](_0x2b9091(0x283)),await initZombies(_0x45202e);try{_0x45202e['isProVersion']=await checkLicense(_0x45202e['config'][_0x2b9091(0x1c2)]);}catch(_0x507b80){}if(!_0x45202e[_0x2b9091(0x1df)]['inactivityThresholdHours']||_0x45202e['config'][_0x2b9091(0x219)]<0.1)_0x45202e[_0x2b9091(0x1df)][_0x2b9091(0x219)]=0xc;await initHistory(_0x45202e),await initSystemConfig(_0x45202e);if(_0x45202e['config']['geminiApiKey'])try{_0x45202e[_0x2b9091(0x262)]=new GoogleGenerativeAI(_0x45202e[_0x2b9091(0x1df)][_0x2b9091(0x1dc)]),_0x45202e[_0x2b9091(0x1f2)]=_0x45202e[_0x2b9091(0x262)][_0x2b9091(0x17c)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x2b9091(0x28e)}}),_0x45202e[_0x2b9091(0x17a)][_0x2b9091(0x176)](_0x2b9091(0x171));}catch(_0x360037){_0x45202e[_0x2b9091(0x17a)][_0x2b9091(0x169)](_0x2b9091(0x16c)+_0x360037[_0x2b9091(0x184)]);}await createAllObjects(_0x45202e),await loadSystemMode(_0x45202e),await loadRawEventLog(_0x45202e),await loadDailyDigests(_0x45202e),_0x45202e[_0x2b9091(0x292)](_0x2b9091(0x190)),_0x45202e[_0x2b9091(0x292)](LTM_DP_TRIGGER_DIGEST),_0x45202e[_0x2b9091(0x292)]('system.mode'),_0x45202e[_0x2b9091(0x292)](_0x2b9091(0x224)),_0x45202e[_0x2b9091(0x292)](_0x2b9091(0x22b)),_0x45202e[_0x2b9091(0x292)](_0x2b9091(0x1e7)),_0x45202e[_0x2b9091(0x292)](_0x2b9091(0x278)),_0x45202e[_0x2b9091(0x292)](_0x2b9091(0x20b)),_0x45202e[_0x2b9091(0x292)](_0x2b9091(0x1cd)),_0x45202e['subscribeStates'](_0x2b9091(0x1c7)),_0x45202e[_0x2b9091(0x292)](_0x2b9091(0x152)),await initSensorSubscriptions(_0x45202e),await initPresenceSubscriptions(_0x45202e),await setupTelegramListener(_0x45202e),setTimeout(()=>checkWifiPresence(_0x45202e),0x1388);if(_0x45202e[_0x2b9091(0x1c5)])clearInterval(_0x45202e[_0x2b9091(0x1c5)]);const _0x1df0a9=_0x45202e[_0x2b9091(0x1df)]['analysisInterval']||0xf;_0x1df0a9>0x0&&(_0x45202e[_0x2b9091(0x1c5)]=setInterval(()=>{runAutopilot(_0x45202e);},_0x1df0a9*0x3c*0x3e8)),schedulers[_0x2b9091(0x15c)](_0x45202e,()=>createDailyDigest(_0x45202e)),schedulers[_0x2b9091(0x2a8)](_0x45202e),schedulers[_0x2b9091(0x201)](_0x45202e,()=>runBaselineDriftAnalysis(_0x45202e)),schedulers[_0x2b9091(0x214)](_0x45202e,()=>sendMorningBriefing(_0x45202e)),startPythonService(_0x45202e),setTimeout(async()=>{const _0x5da533=_0x2b9091;await topology['updateTopology'](_0x45202e);try{const _0x5d02b9=await _0x45202e[_0x5da533(0x15e)]('analysis.topology.structure');if(_0x5d02b9&&_0x5d02b9[_0x5da533(0x246)])sendToPython(_0x45202e,_0x5da533(0x276),JSON['parse'](_0x5d02b9['val']));}catch(_0x5679ad){}_0x45202e['pythonProcess']&&(runPythonHealthCheck(_0x45202e),triggerGaitAnalysis(_0x45202e),triggerEnergyPrediction(_0x45202e)),updateHealthVector(_0x45202e);},0x1388);}class CogniLiving extends utils[a0_0x7b4414(0x147)]{constructor(_0x53e72c){const _0x2d00ea=a0_0x7b4414;super({..._0x53e72c,'name':_0x2d00ea(0x23a)}),this[_0x2d00ea(0x1c6)]=[],this[_0x2d00ea(0x271)]=[],this[_0x2d00ea(0x209)]=[],this[_0x2d00ea(0x238)]=[],this[_0x2d00ea(0x232)]={},this[_0x2d00ea(0x26e)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x2d00ea(0x13e)]=!![],this[_0x2d00ea(0x14e)]=null,this[_0x2d00ea(0x16f)]=null,this[_0x2d00ea(0x134)]=![],this[_0x2d00ea(0x262)]=null,this[_0x2d00ea(0x1f2)]=null,this['currentSystemMode']=SYSTEM_MODES[_0x2d00ea(0x295)],this['isProVersion']=![],this[_0x2d00ea(0x177)]=![],this['systemUUID']=_0x2d00ea(0x160),this['analysisTimer']=null,this['ltmJob']=null,this[_0x2d00ea(0x23c)]=null,this[_0x2d00ea(0x1d6)]=null,this[_0x2d00ea(0x258)]=null,this[_0x2d00ea(0x24d)]=null,this[_0x2d00ea(0x15d)]=![],this['on'](_0x2d00ea(0x13d),this['onReady'][_0x2d00ea(0x235)](this)),this['on'](_0x2d00ea(0x282),this[_0x2d00ea(0x264)][_0x2d00ea(0x235)](this)),this['on'](_0x2d00ea(0x228),this[_0x2d00ea(0x1d2)][_0x2d00ea(0x235)](this)),this['on']('message',this[_0x2d00ea(0x14d)][_0x2d00ea(0x235)](this));}async['onReady'](){const _0x20c272=a0_0x7b4414;this[_0x20c272(0x17a)][_0x20c272(0x176)](_0x20c272(0x24e)+this[_0x20c272(0x27f)]+')\x20-\x20SAFE\x20BOOT');if(!installer['checkAndInstall'](this,()=>startSystem(this)))return;}[a0_0x7b4414(0x1d2)](_0x301d4d){const _0x1a44f1=a0_0x7b4414;if(this[_0x1a44f1(0x1c5)])clearInterval(this['analysisTimer']);if(this[_0x1a44f1(0x1d6)])clearInterval(this['driftAnalysisTimer']);if(this['ltmJob'])this[_0x1a44f1(0x188)][_0x1a44f1(0x233)]();if(this['modeResetJob'])this['modeResetJob'][_0x1a44f1(0x233)]();if(this[_0x1a44f1(0x258)])this['briefingJob'][_0x1a44f1(0x233)]();if(this['exitTimer'])clearTimeout(this[_0x1a44f1(0x14e)]);if(this[_0x1a44f1(0x16f)])clearTimeout(this[_0x1a44f1(0x16f)]);stopPythonService(this),_0x301d4d();}async[a0_0x7b4414(0x264)](_0x283142,_0x540d68){const _0x18da0d=a0_0x7b4414;if(!_0x540d68||this['dependencyInstallInProgress'])return;if(_0x283142['includes']('telegram')&&_0x283142[_0x18da0d(0x2b1)](_0x18da0d(0x1ea))&&_0x540d68[_0x18da0d(0x246)]){await handleTelegramResponse(this,_0x540d68[_0x18da0d(0x246)]);return;}if(_0x283142===this['namespace']+'.'+SYSTEM_DP_MODE){if(_0x540d68['val']&&Object[_0x18da0d(0x166)](SYSTEM_MODES)[_0x18da0d(0x288)](_0x540d68[_0x18da0d(0x246)])){this[_0x18da0d(0x144)]=_0x540d68[_0x18da0d(0x246)];if(_0x540d68[_0x18da0d(0x246)]===SYSTEM_MODES[_0x18da0d(0x25e)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x540d68[_0x18da0d(0x254)])this[_0x18da0d(0x165)](_0x283142,{'val':this[_0x18da0d(0x144)],'ack':!![]});return;}if(!_0x540d68[_0x18da0d(0x254)]){_0x283142[_0x18da0d(0x288)]('analysis.trigger')&&_0x540d68[_0x18da0d(0x246)]&&(this[_0x18da0d(0x165)](_0x283142,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x283142['includes']('triggerDailyDigest')&&_0x540d68[_0x18da0d(0x246)]){this['setState'](_0x283142,{'val':![],'ack':!![]});if(this[_0x18da0d(0x164)])createDailyDigest(this);}_0x283142[_0x18da0d(0x288)](_0x18da0d(0x1aa))&&_0x540d68['val']&&(this[_0x18da0d(0x165)](_0x283142,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x283142[_0x18da0d(0x288)]('automation.triggerAction')&&_0x540d68[_0x18da0d(0x246)]&&(this[_0x18da0d(0x165)](_0x283142,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x283142['includes'](_0x18da0d(0x278))&&_0x540d68[_0x18da0d(0x246)]){this['setState'](_0x283142,{'val':![],'ack':!![]});if(this[_0x18da0d(0x164)])try{const _0x4ebde3=await this[_0x18da0d(0x15e)]('LTM.trainingData.sequences');if(_0x4ebde3&&_0x4ebde3['val']){const _0xa9b8c0=JSON['parse'](_0x4ebde3[_0x18da0d(0x246)]);this['log'][_0x18da0d(0x176)](_0x18da0d(0x2ae)),this[_0x18da0d(0x127)]('analysis.training.status',{'val':'Sec-Training\x20started...','ack':!![]}),sendToPython(this,_0x18da0d(0x1d8),{'sequences':_0xa9b8c0});}}catch(_0x2ae34d){this[_0x18da0d(0x17a)][_0x18da0d(0x169)](_0x18da0d(0x27b)+_0x2ae34d[_0x18da0d(0x184)]);}}if(_0x283142['includes'](_0x18da0d(0x20b))&&_0x540d68['val']){this[_0x18da0d(0x165)](_0x283142,{'val':![],'ack':!![]});if(this[_0x18da0d(0x164)])try{const _0x17bdf0=await this[_0x18da0d(0x15e)](LTM_DP_DAILY_DIGESTS);if(_0x17bdf0&&_0x17bdf0['val'])sendToPython(this,'TRAIN_HEALTH',{'digests':JSON[_0x18da0d(0x2b2)](_0x17bdf0[_0x18da0d(0x246)])});}catch(_0x39903c){}}if(_0x283142['includes'](_0x18da0d(0x1cd))&&_0x540d68[_0x18da0d(0x246)]){this[_0x18da0d(0x165)](_0x283142,{'val':![],'ack':!![]});if(this[_0x18da0d(0x164)])try{const _0x2c51a5=await this[_0x18da0d(0x15e)]('LTM.trainingData.thermodynamics');if(_0x2c51a5&&_0x2c51a5[_0x18da0d(0x246)])sendToPython(this,'TRAIN_ENERGY',{'points':JSON[_0x18da0d(0x2b2)](_0x2c51a5[_0x18da0d(0x246)])});}catch(_0x5e496f){}}if(_0x283142['includes'](_0x18da0d(0x1c7))&&_0x540d68[_0x18da0d(0x246)]){this['setState'](_0x283142,{'val':![],'ack':!![]});if(this[_0x18da0d(0x164)])try{const _0xa8bb0a=await this[_0x18da0d(0x15e)](LTM_DP_RAW_LOG);_0xa8bb0a&&_0xa8bb0a[_0x18da0d(0x246)]&&(this[_0x18da0d(0x17a)]['info'](_0x18da0d(0x193)),sendToPython(this,'TRAIN_COMFORT',{'events':JSON[_0x18da0d(0x2b2)](_0xa8bb0a['val'])}));}catch(_0x500967){}}_0x283142[_0x18da0d(0x288)](_0x18da0d(0x152))&&_0x540d68[_0x18da0d(0x246)]&&(this['setState'](_0x283142,{'val':![],'ack':!![]}),this[_0x18da0d(0x17a)]['info']('ðŸ•¸ï¸\x20Manually\x20triggering\x20Topology\x20Update...'),topology['updateTopology'](this));return;}if(this[_0x18da0d(0x1df)]['presenceDevices']&&this[_0x18da0d(0x1df)]['presenceDevices'][_0x18da0d(0x288)](_0x283142)){await checkWifiPresence(this);return;}const _0x21e8c3=(this[_0x18da0d(0x1df)][_0x18da0d(0x287)]||[])['find'](_0x8a5201=>_0x8a5201['id']===_0x283142);if(_0x21e8c3)processSensorEvent(this,_0x283142,_0x540d68,_0x21e8c3);}async[a0_0x7b4414(0x14d)](_0x5e064e){const _0x333f80=a0_0x7b4414;if(typeof _0x5e064e==='object'&&_0x5e064e[_0x333f80(0x184)]){if(_0x5e064e[_0x333f80(0x178)]===_0x333f80(0x129)){const _0x5394ae=_0x5e064e[_0x333f80(0x184)]['apiKey']||this[_0x333f80(0x1df)][_0x333f80(0x1dc)];if(!_0x5394ae)return this[_0x333f80(0x1be)](_0x5e064e[_0x333f80(0x221)],_0x5e064e[_0x333f80(0x178)],{'success':![],'message':_0x333f80(0x284)},_0x5e064e['callback']);try{const _0x4961e3=new GoogleGenerativeAI(_0x5394ae),_0x1209e1=_0x4961e3[_0x333f80(0x17c)]({'model':GEMINI_MODEL}),_0x404d8a=await _0x1209e1[_0x333f80(0x29d)]('Hi');this[_0x333f80(0x1be)](_0x5e064e[_0x333f80(0x221)],_0x5e064e[_0x333f80(0x178)],{'success':!![],'message':'OK:\x20'+_0x404d8a[_0x333f80(0x124)]['text']()},_0x5e064e[_0x333f80(0x273)]);}catch(_0x2c862e){this[_0x333f80(0x1be)](_0x5e064e['from'],_0x5e064e[_0x333f80(0x178)],{'success':![],'message':_0x333f80(0x1b0)+_0x2c862e[_0x333f80(0x184)]},_0x5e064e[_0x333f80(0x273)]);}}else{if(_0x5e064e['command']===_0x333f80(0x1a9)){const _0x5c3cff=await getWeatherContext(this),_0x31b0a9=await getCalendarContext(this);this[_0x333f80(0x1be)](_0x5e064e[_0x333f80(0x221)],_0x5e064e[_0x333f80(0x178)],{'success':!![],'weather':_0x5c3cff,'calendar':_0x31b0a9},_0x5e064e[_0x333f80(0x273)]);}else{if(_0x5e064e['command']===_0x333f80(0x2b0)){if(!this[_0x333f80(0x164)])return this[_0x333f80(0x1be)](_0x5e064e[_0x333f80(0x221)],_0x5e064e[_0x333f80(0x178)],{'success':![],'isPro':![]},_0x5e064e[_0x333f80(0x273)]);let _0x669e0b={'status':'N/A'};try{const _0x2c061b=await this[_0x333f80(0x15e)](LTM_DP_DRIFT_STATUS);_0x669e0b[_0x333f80(0x26c)]=_0x2c061b?_0x2c061b[_0x333f80(0x246)]:'N/A';}catch(_0x43a406){}this[_0x333f80(0x1be)](_0x5e064e[_0x333f80(0x221)],_0x5e064e['command'],{'success':!![],'isPro':!![],'dailyDigests':this[_0x333f80(0x238)],'driftAnalysis':_0x669e0b,'analysisHistory':this[_0x333f80(0x271)]},_0x5e064e['callback']);}else{if(_0x5e064e['command']==='getOverviewData'){const _0x3e3e62=this[_0x333f80(0x238)][_0x333f80(0x23f)],_0x23ff39=new Date(),_0x255914=new Date(_0x23ff39['getFullYear'](),_0x23ff39[_0x333f80(0x1f7)](),_0x23ff39[_0x333f80(0x1a0)]())[_0x333f80(0x21b)](),_0x594da2=this[_0x333f80(0x209)]['filter'](_0x147d34=>new Date(_0x147d34[_0x333f80(0x145)])[_0x333f80(0x21b)]()>_0x255914)[_0x333f80(0x23f)],_0x388e55=new Array(0x18)[_0x333f80(0x1a6)](0x0);this['rawEventLog'][_0x333f80(0x297)](_0x530a4b=>{const _0x57821e=_0x333f80,_0x3ab4d3=new Date(_0x530a4b[_0x57821e(0x145)]);if(_0x3ab4d3['getTime']()>_0x255914)_0x388e55[_0x3ab4d3[_0x57821e(0x1fc)]()]++;});let _0x3d8bdb={'status':_0x333f80(0x1d9)};try{const _0x51c07d=await this[_0x333f80(0x15e)](LTM_DP_DRIFT_STATUS);_0x3d8bdb['status']=_0x51c07d?_0x51c07d[_0x333f80(0x246)]:_0x333f80(0x1d9);}catch(_0x530079){}let _0x7dd021='';try{const _0xf9d39c=await this[_0x333f80(0x15e)](_0x333f80(0x151));_0x7dd021=_0xf9d39c?_0xf9d39c[_0x333f80(0x246)]:'';}catch(_0x1fcfe6){}let _0x9a637a=null;!this[_0x333f80(0x1f2)]&&(_0x9a637a=this[_0x333f80(0x1df)][_0x333f80(0x1dc)]?_0x333f80(0x270):_0x333f80(0x17d));let _0x478c83={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x506b6d=await this[_0x333f80(0x15e)]('analysis.automation.patternDetected');if(_0x506b6d&&_0x506b6d[_0x333f80(0x246)]){_0x478c83['detected']=!![];const _0x508319=await this['getStateAsync'](_0x333f80(0x1e4));_0x478c83[_0x333f80(0x23b)]=_0x508319?_0x508319[_0x333f80(0x246)]:'';const _0x355915=await this['getStateAsync'](_0x333f80(0x29e));_0x478c83[_0x333f80(0x187)]=_0x355915?_0x355915[_0x333f80(0x246)]:'';const _0x53b503=await this[_0x333f80(0x15e)](_0x333f80(0x191));_0x478c83[_0x333f80(0x1dd)]=_0x53b503?_0x53b503[_0x333f80(0x246)]:'';}const _0x3a25aa=await this[_0x333f80(0x15e)](_0x333f80(0x1e7));_0x478c83['autoApply']=_0x3a25aa?!!_0x3a25aa['val']:![];}catch(_0xf71e2f){}this[_0x333f80(0x1be)](_0x5e064e[_0x333f80(0x221)],_0x5e064e[_0x333f80(0x178)],{'success':!![],'eventHistory':this[_0x333f80(0x1c6)][_0x333f80(0x1ae)](0x0,0xf),'stats':{'digestCount':_0x3e3e62,'eventCountToday':_0x594da2,'hourlyActivity':_0x388e55,'driftStatus':_0x3d8bdb[_0x333f80(0x26c)],'isPresent':this[_0x333f80(0x13e)],'presenceWho':_0x7dd021,'minDays':this['config'][_0x333f80(0x1c0)]||0x7,'stbDays':this[_0x333f80(0x1df)][_0x333f80(0x1a2)]||0xe,'ltbDays':this[_0x333f80(0x1df)]['ltmLtbWindowDays']||0x3c,'systemError':_0x9a637a},'automation':_0x478c83},_0x5e064e[_0x333f80(0x273)]);}else{if(_0x5e064e[_0x333f80(0x178)]===_0x333f80(0x260))try{const _0x15729a=await scanner[_0x333f80(0x1ca)](this,_0x5e064e[_0x333f80(0x184)]||{});this['sendTo'](_0x5e064e[_0x333f80(0x221)],_0x5e064e[_0x333f80(0x178)],{'success':!![],'devices':_0x15729a},_0x5e064e['callback']);}catch(_0x3fe9c2){this[_0x333f80(0x1be)](_0x5e064e[_0x333f80(0x221)],_0x5e064e['command'],{'success':![],'error':_0x3fe9c2[_0x333f80(0x184)]},_0x5e064e[_0x333f80(0x273)]);}else{if(_0x5e064e[_0x333f80(0x178)]===_0x333f80(0x244)){const _0x4034da=await this[_0x333f80(0x22d)]('enum.functions.*',_0x333f80(0x29a)),_0x34810e=[];if(_0x4034da)for(const _0x4cbd77 in _0x4034da){const _0x26c8f2=_0x4034da[_0x4cbd77],_0x383718=(_0x26c8f2['common']&&typeof _0x26c8f2['common'][_0x333f80(0x1d4)]===_0x333f80(0x1a1)?_0x26c8f2[_0x333f80(0x268)][_0x333f80(0x1d4)]['de']:_0x26c8f2[_0x333f80(0x268)][_0x333f80(0x1d4)])||_0x26c8f2['common'][_0x333f80(0x1d4)];_0x34810e[_0x333f80(0x19d)]({'id':_0x4cbd77,'name':_0x383718});}const _0x3f138f=await this[_0x333f80(0x22d)]('enum.rooms.*','enum'),_0x587515=[];if(_0x3f138f)for(const _0x28d564 in _0x3f138f){const _0x426e41=_0x3f138f[_0x28d564],_0x4b44d7=(_0x426e41['common']&&typeof _0x426e41[_0x333f80(0x268)][_0x333f80(0x1d4)]===_0x333f80(0x1a1)?_0x426e41[_0x333f80(0x268)]['name']['de']:_0x426e41['common'][_0x333f80(0x1d4)])||_0x28d564[_0x333f80(0x18c)]('.')[_0x333f80(0x218)]();_0x587515[_0x333f80(0x19d)](_0x4b44d7);}this[_0x333f80(0x1be)](_0x5e064e[_0x333f80(0x221)],_0x5e064e[_0x333f80(0x178)],{'success':!![],'enums':_0x34810e,'rooms':_0x587515},_0x5e064e['callback']);}else{if(_0x5e064e[_0x333f80(0x178)]===_0x333f80(0x207)){const _0x330c9b=_0x5e064e['message'][_0x333f80(0x2af)];if(!_0x330c9b)return this[_0x333f80(0x1be)](_0x5e064e['from'],_0x5e064e[_0x333f80(0x178)],{'success':![],'error':_0x333f80(0x15a)},_0x5e064e[_0x333f80(0x273)]);const _0x5e2124=await getCalendarNames(this,_0x330c9b);this[_0x333f80(0x1be)](_0x5e064e[_0x333f80(0x221)],_0x5e064e[_0x333f80(0x178)],{'success':!![],'names':_0x5e2124},_0x5e064e['callback']);}else{if(_0x5e064e[_0x333f80(0x178)]===_0x333f80(0x139)){const {targetId:_0x4cda0c,targetValue:_0x1a727b}=_0x5e064e[_0x333f80(0x184)];this[_0x333f80(0x17a)]['info'](_0x333f80(0x167)+_0x4cda0c+'\x20=\x20'+_0x1a727b),await this[_0x333f80(0x127)](_0x333f80(0x2ac),{'val':!![],'ack':!![]}),await this[_0x333f80(0x127)]('analysis.automation.description',{'val':_0x333f80(0x231)+_0x4cda0c,'ack':!![]}),await this[_0x333f80(0x127)](_0x333f80(0x29e),{'val':_0x4cda0c,'ack':!![]}),await this[_0x333f80(0x127)](_0x333f80(0x191),{'val':_0x1a727b,'ack':!![]}),this[_0x333f80(0x1be)](_0x5e064e[_0x333f80(0x221)],_0x5e064e[_0x333f80(0x178)],{'success':!![]},_0x5e064e['callback']);}else{if(_0x5e064e[_0x333f80(0x178)]===_0x333f80(0x16a)){const {historyId:_0x1daecc,rating:_0x1b88ab,comment:_0x207702,alertReason:_0xc8140d}=_0x5e064e[_0x333f80(0x184)];_0x1daecc&&_0x1b88ab?(await saveFeedback(this,{'timestamp':Date[_0x333f80(0x128)](),'historyId':_0x1daecc,'rating':_0x1b88ab,'comment':_0x207702,'alertReason':_0xc8140d}),this[_0x333f80(0x1be)](_0x5e064e[_0x333f80(0x221)],_0x5e064e[_0x333f80(0x178)],{'success':!![]},_0x5e064e[_0x333f80(0x273)])):this[_0x333f80(0x1be)](_0x5e064e[_0x333f80(0x221)],_0x5e064e[_0x333f80(0x178)],{'success':![],'error':_0x333f80(0x199)},_0x5e064e['callback']);}else{if(_0x5e064e['command']===_0x333f80(0x180))this[_0x333f80(0x17a)]['info'](_0x333f80(0x2a9)),await this[_0x333f80(0x127)](_0x333f80(0x2ac),{'val':![],'ack':!![]}),await this[_0x333f80(0x127)](_0x333f80(0x1e4),{'val':'','ack':!![]}),this['sendTo'](_0x5e064e['from'],_0x5e064e[_0x333f80(0x178)],{'success':!![]},_0x5e064e[_0x333f80(0x273)]);else{if(_0x5e064e[_0x333f80(0x178)]===_0x333f80(0x2ad)){const {matrix:_0x44e763}=_0x5e064e[_0x333f80(0x184)];try{const _0x149597=await this[_0x333f80(0x15e)](_0x333f80(0x13a));if(_0x149597&&_0x149597[_0x333f80(0x246)]){const _0x10c0aa=JSON[_0x333f80(0x2b2)](_0x149597[_0x333f80(0x246)]);_0x10c0aa[_0x333f80(0x1b1)]=_0x44e763,_0x10c0aa[_0x333f80(0x1e0)]=Date[_0x333f80(0x128)](),await this[_0x333f80(0x127)](_0x333f80(0x13a),{'val':JSON['stringify'](_0x10c0aa),'ack':!![]}),this[_0x333f80(0x17a)]['info'](_0x333f80(0x163)),sendToPython(this,_0x333f80(0x276),_0x10c0aa);}this[_0x333f80(0x1be)](_0x5e064e['from'],_0x5e064e[_0x333f80(0x178)],{'success':!![]},_0x5e064e['callback']);}catch(_0x5c1825){this['log'][_0x333f80(0x169)]('Topology\x20Update\x20Error:\x20'+_0x5c1825[_0x333f80(0x184)]);}}}}}}}}}}}}}}}if(require[a0_0x7b4414(0x146)]!==module)module[a0_0x7b4414(0x13c)]=_0x152a19=>new CogniLiving(_0x152a19);else new CogniLiving();