const a0_0x28f14e=a0_0x3da3;function a0_0x19e9(){const _0x31a093=['LTM.baselineStatus','detected','‚ö†Ô∏è\x20VENV\x20missing.\x20Attempting\x20install...','LTM.driftAnalysis.baselineDrift','...','764752mXqUpZ','setPresence','bin','generateContent','unknown','\x20sequences...','getTime','PONG','runPythonHealthCheck','version','fault','config_pending','Error\x20launching\x20Python:\x20','5eCqhrU','message','saveCompletedSequence','map','[RESULT]','scanForDevices','models/gemini-flash-latest','pythonProcess','getOutsideTemperatureNumeric','data','link_quality','response','‚úÖ\x20HEALTH\x20TRAINED:\x20','name','apply','reachable','checkWifiPresence','dailyDigests','toLowerCase','getForeignStateAsync','Unknown','runBaselineDriftAnalysis','update','currentSystemMode','‚ùå\x20PIP\x20INSTALL\x20FAILED:\x20','log','dutycycle','licenseKey','setupBriefingScheduler','devices','121OsSeHi','stringify','exitTimer','setupTelegramListener','Keine\x20Details.','scanDevices','SECURITY_RESULT','startPythonService','createAllObjects','path','enum.functions.*','getFullYear','initZombies','[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20','trim','sendTo','pr√§senz','motion','ack','startExitTimer','python.exe','callback','getHours','toISOString','daswetter','cogni-living\x20adapter\x20starting\x20(v','analysis.training.triggerEnergy','sendMorningBriefing','analysis.energy.heatingScore','executeAutomationAction','timestamp','saveFeedback','geminiModel','‚ùå\x20VENV\x20CREATION\x20FAILED.\x20Please\x20run:\x20sudo\x20apt\x20install\x20python3-venv','analysis.automation.targetId','dimmer','LTM.driftAnalysis','writable','icons-mfd.','includes','endsWith','recordSequence','targetId','system.presenceWho','working','handleTelegramResponse','analysis.automation.targetValue','from','onUnload','analysis.automation.autoApply','recordThermodynamics','944132merNvN','checkLicense','triggerBriefing','substring','lampe','geminiApiKey','LTM.trainingData.thermodynamics','\x22\x20install\x20-r\x20\x22','slice','getMonth','ltmJob','stopPythonService','off','val','getWeatherContext','generic','insulation','Failed:\x20','üêç\x20Using\x20VENV\x20Python:\x20','Kein\x20API\x20Key!','No\x20instance','filter','@google/generative-ai','t√ºr','HEALTH_RESULT','Missing\x20data','values','stdin','material.','setupLtmScheduler','getOverviewData','light','onStateChange','isProVersion','analysis.training.triggerSecurity','LTM.driftAnalysis.lastCheck','analysis.automation.triggerAction','loc','sequenceTimer','simple-api.','fenster','temperature','cancel','dependencyInstallInProgress','testContext','loadRawEventLog','Say\x20Hello','enum','Adapter','sendToPython','actual_temperature','getForeignObjectsAsync','8iTzHvZ','value','info','3035724gYHpdn','[PYTHON]\x20Exited\x20code\x20','ENERGY_TRAIN_RESULT','getCalendarNames','getLtmData','role','3AJtgJz','rawEventLog','Gemini\x20Init\x20Error:\x20','sensorLastValues','isPresent','.\x20EVENTS:\x20','isGracePeriodActive','text','existsSync','lastAlertState','loadDailyDigests','\x20->\x20','runSecurityCheck','parse','events.history','object',')\x20-\x20FULL\x20CLASS\x20MODE','some','[RECORDER]\x20Error\x20saving\x20sequence:\x20','Bibliotheken\x20nicht\x20gefunden','(((.+)+)+)+$','lights','normal','admin.','payload','testApiKey','power','lowbat','analysis.energy.insulationScore','setStateAsync','toFixed','HEALTH_TRAIN_RESULT','lastIndexOf','stdout','state','dismissAutomation','handlePythonResult','level','Fokus\x20auf\x20Komfort.','processSensorEvent','klima','stateChange','stderr','firmware','inactivityThresholdHours','[PYTHON]\x20','SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20','schalter','analysis.trigger','info.','toLocaleTimeString','kill','namespace','pop','installRequirementsInVenv','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','analysis.training.triggerHealth','isExit','üõ†Ô∏è\x20MAINTENANCE\x20MODE:\x20Installing\x20Python\x20dependencies.\x20Do\x20not\x20restart!','systemConfig','analysisHistory','livingContext','.venv','0\x204\x20*\x20*\x20*','KI-Modell\x20nicht\x20initialisiert','Scanning\x20for\x20devices...','heating','\x20=\x20','occupancy','exports','1550640WknPdU','analysis.health.lastCheck','initSensorSubscriptions','getCalendarContext','members','join','abortExitTimer','1911762gIBJru','direction','Kein\x20API\x20Key\x20eingegeben.','driftAnalysisTimer','createDailyDigest','üêç\x20Stopping\x20Python...','setupModeResetScheduler','analysis.training.status','connection','initPresenceSubscriptions','communicate.request','licht','guest','toString','python','search','presence','[PYTHON\x20ERR]\x20','targetValue','now','push','fill','analysis.security.lastCheck','status','onMessage','openweathermap','forEach','common','onReady','@iobroker/adapter-core','switch','setpoint','eventHistory','873106GJTmvq','Fokus\x20auf\x20Familienroutinen.','length','constructor','Fehler:\x20','cogni-living','party','close','.\x20AUFGABE:\x20Security\x20&\x20Comfort\x20Check.\x20JSON\x20OUTPUT\x20ONLY.','analysis.automation.patternDetected','stick_unreach','window','telegram','minDaysForBaseline','cpu_feature_guard','1467920TMerqX','üß†\x20Triggering\x20Security\x20Training\x20with\x20','find','VACATION','humidity','\x20(Length:\x20','subscribeStates','door','replace','startsWith','location','unreach','main','Unbekannt','bind','LTM.trainingData.sequences','python_service','briefingJob','analysisTimer','apiKey','error','N/A','system.mode','submitFeedback','set_temperature','accuweather','application/json','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','analysis.security.lastScore','node-schedule','shutter','genAI','autoApply','üêç\x20Python\x20Pong','details','outdoorSensorId','initHistory','enum.rooms.*','config','modeResetJob','getStateAsync','User\x20dismissed\x20automation\x20proposal.','runGeminiAnalysis','pip','system.','installPythonDependencies','warn','win32','contact','systemUUID','LTM.processingStatus','brightness','getEnums','presenceDevices','getDate','temperatur','üß™\x20Simulating\x20Butler\x20Proposal:\x20','Gemini\x20Error:\x20','Scripts','activeSequence','pip.exe','Gemini\x20AI\x20initialized.','Training\x20Error:\x20','.forecast.current.temperature','debug','rssi','analysis.health.isAnomaly','runAutopilot','loadSystemMode','shift','valve','command','analysis.lastResult','cover','type','javascript.','LTM.triggerDailyDigest','currentposition','TRAIN_HEALTH','instance','Analysiere\x20ausgewogen.','analysis.automation.description','weatherunderground','ltmStbWindowDays','setState','description','.NextHours.Location_1.Day_1.current.temp_value','.\x20MODE:\x20','saveRawEventLog','useWeather','Invalid\x20JSON:\x20','TRAIN_SECURITY','exitGraceTimer','targetposition'];a0_0x19e9=function(){return _0x31a093;};return a0_0x19e9();}function a0_0x3da3(_0x3b3e3e,_0x1a1212){const _0x1f55dc=a0_0x19e9();return a0_0x3da3=function(_0x4effa6,_0x79c76){_0x4effa6=_0x4effa6-0x79;let _0x19e9a6=_0x1f55dc[_0x4effa6];return _0x19e9a6;},a0_0x3da3(_0x3b3e3e,_0x1a1212);}(function(_0x344c30,_0x55ef64){const _0xd254f7=a0_0x3da3,_0x3e26b6=_0x344c30();while(!![]){try{const _0x51f63c=-parseInt(_0xd254f7(0x1a1))/0x1+-parseInt(_0xd254f7(0x12f))/0x2*(parseInt(_0xd254f7(0xc1))/0x3)+-parseInt(_0xd254f7(0x107))/0x4+parseInt(_0xd254f7(0x1ae))/0x5*(parseInt(_0xd254f7(0xbb))/0x6)+parseInt(_0xd254f7(0x84))/0x7+parseInt(_0xd254f7(0xb8))/0x8*(-parseInt(_0xd254f7(0x10e))/0x9)+-parseInt(_0xd254f7(0x13e))/0xa*(-parseInt(_0xd254f7(0x1cc))/0xb);if(_0x51f63c===_0x55ef64)break;else _0x3e26b6['push'](_0x3e26b6['shift']());}catch(_0x2a2170){_0x3e26b6['push'](_0x3e26b6['shift']());}}}(a0_0x19e9,0x6ee0f));const a0_0x79c76=(function(){let _0x4967fa=!![];return function(_0x4bece0,_0x1af153){const _0x2bd62a=_0x4967fa?function(){const _0x57607d=a0_0x3da3;if(_0x1af153){const _0x444927=_0x1af153[_0x57607d(0x1bc)](_0x4bece0,arguments);return _0x1af153=null,_0x444927;}}:function(){};return _0x4967fa=![],_0x2bd62a;};}()),a0_0x4effa6=a0_0x79c76(this,function(){const _0x353aff=a0_0x3da3;return a0_0x4effa6[_0x353aff(0x11b)]()[_0x353aff(0x11d)](_0x353aff(0xd5))[_0x353aff(0x11b)]()[_0x353aff(0x132)](a0_0x4effa6)[_0x353aff(0x11d)](_0x353aff(0xd5));});a0_0x4effa6();'use strict';const utils=require(a0_0x28f14e(0x12b)),{GoogleGenerativeAI}=require(a0_0x28f14e(0x9a)),schedule=require(a0_0x28f14e(0x15b)),{spawn,exec}=require('child_process'),path=require(a0_0x28f14e(0x1d5)),fs=require('fs'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x28f14e(0x1b4),LTM_SCHEDULE='0\x203\x20*\x20*\x20*',MODE_RESET_SCHEDULE=a0_0x28f14e(0x100),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x28f14e(0x170),LTM_DP_TRIGGER_DIGEST=a0_0x28f14e(0x18a),LTM_DP_BASELINE_STATUS=a0_0x28f14e(0x19c),LTM_DP_DRIFT_CHANNEL=a0_0x28f14e(0x1f0),LTM_DP_DRIFT_STATUS=a0_0x28f14e(0x19f),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x28f14e(0xa7),SYSTEM_DP_MODE=a0_0x28f14e(0x154),SYSTEM_MODES={'NORMAL':a0_0x28f14e(0xd7),'VACATION':'vacation','PARTY':a0_0x28f14e(0x135),'GUEST':a0_0x28f14e(0x11a)},AUTO_RESET_MODES=[SYSTEM_MODES['PARTY'],SYSTEM_MODES['GUEST']],PERSONA_MAPPING={'generic':a0_0x28f14e(0x18e),'senior_aal':'PRIORIT√ÑT:\x20Gesundheit/AAL.','family':a0_0x28f14e(0x130),'single_comfort':a0_0x28f14e(0xe7),'security':'PRIORIT√ÑT:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0},HARD_IGNORE_TERMS=['scriptProblem','scriptEnabled',a0_0x28f14e(0x1c4),a0_0x28f14e(0x149),a0_0x28f14e(0xdc),a0_0x28f14e(0x17f),a0_0x28f14e(0x116),'maintenance',a0_0x28f14e(0x152),a0_0x28f14e(0x1ab),a0_0x28f14e(0x7d),a0_0x28f14e(0x10f),a0_0x28f14e(0x139),a0_0x28f14e(0x1ac),a0_0x28f14e(0x1c8),a0_0x28f14e(0xec),a0_0x28f14e(0x1bd),a0_0x28f14e(0x1b8)],BAD_NAMES=[a0_0x28f14e(0x19b),a0_0x28f14e(0x18b),'state',a0_0x28f14e(0xe6),a0_0x28f14e(0xb9),a0_0x28f14e(0x171),'on',a0_0x28f14e(0x90),a0_0x28f14e(0x12c),'position',a0_0x28f14e(0x15c),'blind',a0_0x28f14e(0x187),'status',a0_0x28f14e(0x1dd),a0_0x28f14e(0x11e),'occupancy','temperature',a0_0x28f14e(0x142),a0_0x28f14e(0xdb),'energy',a0_0x28f14e(0x12d),a0_0x28f14e(0x184),a0_0x28f14e(0xb6),a0_0x28f14e(0x156)],ADAPTER_BLACKLIST=[a0_0x28f14e(0x16a),a0_0x28f14e(0xd8),a0_0x28f14e(0xf2),'vis.','history.',a0_0x28f14e(0xa0),a0_0x28f14e(0x1f2),'flot.','echarts.',a0_0x28f14e(0x189),a0_0x28f14e(0xab)],IS_WIN=process['platform']===a0_0x28f14e(0x16d),VENV_PATH=path[a0_0x28f14e(0x10c)](__dirname,a0_0x28f14e(0xff)),PYTHON_EXE=IS_WIN?path[a0_0x28f14e(0x10c)](VENV_PATH,a0_0x28f14e(0x178),a0_0x28f14e(0x1e0)):path[a0_0x28f14e(0x10c)](VENV_PATH,a0_0x28f14e(0x1a3),a0_0x28f14e(0x11c)),PIP_EXE=IS_WIN?path[a0_0x28f14e(0x10c)](VENV_PATH,'Scripts',a0_0x28f14e(0x17a)):path[a0_0x28f14e(0x10c)](VENV_PATH,a0_0x28f14e(0x1a3),a0_0x28f14e(0x169));class CogniLiving extends utils[a0_0x28f14e(0xb4)]{constructor(_0x5f5194){const _0x365c63=a0_0x28f14e;super({..._0x5f5194,'name':_0x365c63(0x134)}),this[_0x365c63(0x12e)]=[],this[_0x365c63(0xfd)]=[],this[_0x365c63(0xc2)]=[],this[_0x365c63(0x1bf)]=[],this[_0x365c63(0xc4)]={},this[_0x365c63(0xfc)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x365c63(0x1ce)]=null,this[_0x365c63(0x19a)]=null,this[_0x365c63(0xc7)]=![],this[_0x365c63(0x15d)]=null,this[_0x365c63(0x1ec)]=null,this[_0x365c63(0x1c5)]=SYSTEM_MODES['NORMAL'],this[_0x365c63(0xa5)]=![],this[_0x365c63(0xca)]=![],this[_0x365c63(0x16f)]=_0x365c63(0x1a5),this[_0x365c63(0x150)]=null,this[_0x365c63(0x8e)]=null,this[_0x365c63(0x165)]=null,this[_0x365c63(0x111)]=null,this[_0x365c63(0x14f)]=null,this['pythonProcess']=null,this[_0x365c63(0xaf)]=![],this['activeSequence']=[],this[_0x365c63(0xaa)]=null,this['on']('ready',this[_0x365c63(0x12a)][_0x365c63(0x14c)](this)),this['on'](_0x365c63(0xea),this[_0x365c63(0xa4)][_0x365c63(0x14c)](this)),this['on']('unload',this[_0x365c63(0x81)]['bind'](this)),this['on'](_0x365c63(0x1af),this['onMessage'][_0x365c63(0x14c)](this));}async[a0_0x28f14e(0x12a)](){const _0x48291f=a0_0x28f14e;this['log']['info'](_0x48291f(0x1e5)+this[_0x48291f(0x1aa)]+_0x48291f(0xd1)),await this[_0x48291f(0x1d8)](),this[_0x48291f(0x164)][_0x48291f(0x1c9)]=this[_0x48291f(0x164)][_0x48291f(0x1c9)]||'';try{this[_0x48291f(0xa5)]=await this[_0x48291f(0x85)](this[_0x48291f(0x164)][_0x48291f(0x1c9)]);}catch(_0x26bddd){}if(!this[_0x48291f(0x164)][_0x48291f(0xed)]||this[_0x48291f(0x164)][_0x48291f(0xed)]<0.1)this[_0x48291f(0x164)][_0x48291f(0xed)]=0xc;await this[_0x48291f(0x162)](),await this['initSystemConfig']();if(this[_0x48291f(0x164)]['geminiApiKey'])try{this[_0x48291f(0x15d)]=new GoogleGenerativeAI(this[_0x48291f(0x164)][_0x48291f(0x89)]),this[_0x48291f(0x1ec)]=this['genAI']['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x48291f(0x158)}}),this[_0x48291f(0x1c7)]['info'](_0x48291f(0x17b));}catch(_0x5f05df){this[_0x48291f(0x1c7)][_0x48291f(0x152)](_0x48291f(0xc3)+_0x5f05df[_0x48291f(0x1af)]);}await this[_0x48291f(0x1d4)](),await this[_0x48291f(0x182)](),await this[_0x48291f(0xb1)](),await this[_0x48291f(0xcb)](),this[_0x48291f(0x144)](_0x48291f(0xf1)),this['subscribeStates'](LTM_DP_TRIGGER_DIGEST),this[_0x48291f(0x144)](_0x48291f(0x154)),this['subscribeStates']('analysis.triggerBriefing'),this[_0x48291f(0x144)](_0x48291f(0xa8)),this['subscribeStates'](_0x48291f(0x82)),this[_0x48291f(0x144)](_0x48291f(0xa6)),this[_0x48291f(0x144)](_0x48291f(0xf9)),this[_0x48291f(0x144)](_0x48291f(0x1e6)),await this[_0x48291f(0x109)](),await this[_0x48291f(0x117)](),await this[_0x48291f(0x1cf)](),setTimeout(()=>this[_0x48291f(0x1be)](),0x1388);if(this[_0x48291f(0x150)])clearInterval(this[_0x48291f(0x150)]);const _0x18f745=this['config']['analysisInterval']||0xf;_0x18f745>0x0&&(this[_0x48291f(0x150)]=setInterval(()=>{const _0x902624=_0x48291f;this[_0x902624(0x181)]();},_0x18f745*0x3c*0x3e8)),this[_0x48291f(0xa1)](),this[_0x48291f(0x114)](),this['setupDriftAnalysisScheduler'](),this[_0x48291f(0x1ca)](),this['startPythonService'](),setTimeout(()=>{const _0x34ac89=_0x48291f;if(this[_0x34ac89(0x1b5)])this[_0x34ac89(0x1a9)]();},0x1388);}[a0_0x28f14e(0x81)](_0x2e0fbe){const _0x57158d=a0_0x28f14e;if(this[_0x57158d(0x150)])clearInterval(this[_0x57158d(0x150)]);if(this[_0x57158d(0x111)])clearInterval(this[_0x57158d(0x111)]);if(this[_0x57158d(0x8e)])this[_0x57158d(0x8e)][_0x57158d(0xae)]();if(this['modeResetJob'])this['modeResetJob'][_0x57158d(0xae)]();if(this[_0x57158d(0x14f)])this[_0x57158d(0x14f)]['cancel']();if(this[_0x57158d(0x1ce)])clearTimeout(this[_0x57158d(0x1ce)]);if(this['exitGraceTimer'])clearTimeout(this[_0x57158d(0x19a)]);this['stopPythonService'](),_0x2e0fbe();}async[a0_0x28f14e(0xa4)](_0x30d047,_0x4fd553){const _0x28c0a9=a0_0x28f14e;if(!_0x4fd553)return;if(this[_0x28c0a9(0xaf)])return;if(_0x30d047[_0x28c0a9(0x1f3)](_0x28c0a9(0x13b))&&_0x30d047[_0x28c0a9(0x79)](_0x28c0a9(0x118))&&_0x4fd553[_0x28c0a9(0x91)]){await this[_0x28c0a9(0x7e)](_0x4fd553[_0x28c0a9(0x91)]);return;}if(_0x30d047===this[_0x28c0a9(0xf5)]+'.'+SYSTEM_DP_MODE){_0x4fd553[_0x28c0a9(0x91)]&&Object[_0x28c0a9(0x9e)](SYSTEM_MODES)[_0x28c0a9(0x1f3)](_0x4fd553[_0x28c0a9(0x91)])&&(this[_0x28c0a9(0x1c5)]=_0x4fd553['val'],_0x4fd553[_0x28c0a9(0x91)]===SYSTEM_MODES[_0x28c0a9(0x141)]?await this[_0x28c0a9(0x1a2)](![]):await this[_0x28c0a9(0x1a2)](!![]));if(!_0x4fd553[_0x28c0a9(0x1de)])this[_0x28c0a9(0x192)](_0x30d047,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x4fd553[_0x28c0a9(0x1de)]){_0x30d047['includes'](_0x28c0a9(0xf1))&&_0x4fd553[_0x28c0a9(0x91)]&&(this[_0x28c0a9(0x192)](_0x30d047,{'val':![],'ack':!![]}),this['runGeminiAnalysis']());if(_0x30d047['includes']('triggerDailyDigest')&&_0x4fd553[_0x28c0a9(0x91)]){this[_0x28c0a9(0x192)](_0x30d047,{'val':![],'ack':!![]});if(this[_0x28c0a9(0xa5)])this[_0x28c0a9(0x112)]();}_0x30d047[_0x28c0a9(0x1f3)](_0x28c0a9(0x86))&&_0x4fd553[_0x28c0a9(0x91)]&&(this[_0x28c0a9(0x192)](_0x30d047,{'val':![],'ack':!![]}),this[_0x28c0a9(0x1e7)]());_0x30d047[_0x28c0a9(0x1f3)]('automation.triggerAction')&&_0x4fd553['val']&&(this[_0x28c0a9(0x192)](_0x30d047,{'val':![],'ack':!![]}),this[_0x28c0a9(0x1e9)]());if(_0x30d047['includes']('analysis.training.triggerSecurity')&&_0x4fd553[_0x28c0a9(0x91)]){this[_0x28c0a9(0x192)](_0x30d047,{'val':![],'ack':!![]});if(!this[_0x28c0a9(0xa5)])return;try{const _0x46cdac=await this[_0x28c0a9(0x166)](_0x28c0a9(0x14d));if(_0x46cdac&&_0x46cdac[_0x28c0a9(0x91)]){const _0x138574=JSON[_0x28c0a9(0xce)](_0x46cdac[_0x28c0a9(0x91)]);this[_0x28c0a9(0x1c7)]['info'](_0x28c0a9(0x13f)+_0x138574[_0x28c0a9(0x131)]+_0x28c0a9(0x1a6)),this[_0x28c0a9(0xde)](_0x28c0a9(0x115),{'val':'Sec-Training\x20started...','ack':!![]}),this[_0x28c0a9(0xb5)](_0x28c0a9(0x199),{'sequences':_0x138574});}}catch(_0x3d5814){this[_0x28c0a9(0x1c7)][_0x28c0a9(0x152)](_0x28c0a9(0x17c)+_0x3d5814[_0x28c0a9(0x1af)]);}}if(_0x30d047['includes'](_0x28c0a9(0xf9))&&_0x4fd553[_0x28c0a9(0x91)]){this[_0x28c0a9(0x192)](_0x30d047,{'val':![],'ack':!![]});if(!this['isProVersion'])return;try{const _0x59ae0d=await this[_0x28c0a9(0x166)](LTM_DP_DAILY_DIGESTS);_0x59ae0d&&_0x59ae0d['val']&&this[_0x28c0a9(0xb5)](_0x28c0a9(0x18c),{'digests':JSON['parse'](_0x59ae0d[_0x28c0a9(0x91)])});}catch(_0x2979d5){}}if(_0x30d047[_0x28c0a9(0x1f3)]('analysis.training.triggerEnergy')&&_0x4fd553[_0x28c0a9(0x91)]){this[_0x28c0a9(0x192)](_0x30d047,{'val':![],'ack':!![]});if(!this[_0x28c0a9(0xa5)])return;try{const _0x635054=await this[_0x28c0a9(0x166)](_0x28c0a9(0x8a));_0x635054&&_0x635054[_0x28c0a9(0x91)]&&this[_0x28c0a9(0xb5)]('TRAIN_ENERGY',{'points':JSON['parse'](_0x635054[_0x28c0a9(0x91)])});}catch(_0x25266a){}}return;}if(this[_0x28c0a9(0x164)][_0x28c0a9(0x173)]&&this[_0x28c0a9(0x164)]['presenceDevices'][_0x28c0a9(0x1f3)](_0x30d047)){await this[_0x28c0a9(0x1be)]();return;}const _0x1e41c0=(this[_0x28c0a9(0x164)][_0x28c0a9(0x1cb)]||[])[_0x28c0a9(0x140)](_0x53952f=>_0x53952f['id']===_0x30d047);if(_0x1e41c0)this[_0x28c0a9(0xe8)](_0x30d047,_0x4fd553,_0x1e41c0);}async[a0_0x28f14e(0x126)](_0x13fe5b){const _0x2712a8=a0_0x28f14e;if(typeof _0x13fe5b===_0x2712a8(0xd0)&&_0x13fe5b[_0x2712a8(0x1af)]){if(_0x13fe5b[_0x2712a8(0x185)]===_0x2712a8(0xda)){const _0x42a99b=_0x13fe5b[_0x2712a8(0x1af)][_0x2712a8(0x151)]||this['config'][_0x2712a8(0x89)];if(!_0x42a99b)return this[_0x2712a8(0x1db)](_0x13fe5b[_0x2712a8(0x80)],_0x13fe5b[_0x2712a8(0x185)],{'success':![],'message':_0x2712a8(0x110)},_0x13fe5b[_0x2712a8(0x1e1)]);try{const _0x1e4af3=new GoogleGenerativeAI(_0x42a99b),_0x7542bb=_0x1e4af3['getGenerativeModel']({'model':GEMINI_MODEL}),_0x31003e=await _0x7542bb[_0x2712a8(0x1a4)](_0x2712a8(0xb2)),_0x5a4ca4=await _0x31003e[_0x2712a8(0x1b9)],_0x18804a=_0x5a4ca4[_0x2712a8(0xc8)]();this[_0x2712a8(0x1db)](_0x13fe5b['from'],_0x13fe5b[_0x2712a8(0x185)],{'success':!![],'message':'Verbindung\x20erfolgreich!\x20Antwort:\x20'+_0x18804a['substring'](0x0,0x14)+_0x2712a8(0x1a0)},_0x13fe5b[_0x2712a8(0x1e1)]);}catch(_0x2f705e){this[_0x2712a8(0x1db)](_0x13fe5b[_0x2712a8(0x80)],_0x13fe5b[_0x2712a8(0x185)],{'success':![],'message':_0x2712a8(0x133)+_0x2f705e['message']},_0x13fe5b['callback']);}}else{if(_0x13fe5b[_0x2712a8(0x185)]===_0x2712a8(0xb0)){const _0x5253ae=await this[_0x2712a8(0x92)](),_0x3fa8a3=await this['getCalendarContext']();this[_0x2712a8(0x1db)](_0x13fe5b[_0x2712a8(0x80)],_0x13fe5b[_0x2712a8(0x185)],{'success':!![],'weather':_0x5253ae,'calendar':_0x3fa8a3},_0x13fe5b[_0x2712a8(0x1e1)]);}else{if(_0x13fe5b[_0x2712a8(0x185)]===_0x2712a8(0xbf)){if(!this[_0x2712a8(0xa5)])return this[_0x2712a8(0x1db)](_0x13fe5b['from'],_0x13fe5b[_0x2712a8(0x185)],{'success':![],'isPro':![]},_0x13fe5b[_0x2712a8(0x1e1)]);let _0x32250e={'status':_0x2712a8(0x153),'details':''};try{_0x32250e[_0x2712a8(0x125)]=(await this[_0x2712a8(0x166)](LTM_DP_DRIFT_STATUS))[_0x2712a8(0x91)],_0x32250e[_0x2712a8(0x160)]=(await this[_0x2712a8(0x166)](LTM_DP_DRIFT_DETAILS))[_0x2712a8(0x91)];}catch(_0x5d3c8f){}this[_0x2712a8(0x1db)](_0x13fe5b['from'],_0x13fe5b[_0x2712a8(0x185)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x32250e,'analysisHistory':this[_0x2712a8(0xfd)]},_0x13fe5b[_0x2712a8(0x1e1)]);}else{if(_0x13fe5b[_0x2712a8(0x185)]===_0x2712a8(0xa2)){const _0x431aa1=this[_0x2712a8(0x1bf)][_0x2712a8(0x131)],_0x50f01f=new Date(),_0x3aaa2c=new Date(_0x50f01f[_0x2712a8(0x1d7)](),_0x50f01f[_0x2712a8(0x8d)](),_0x50f01f[_0x2712a8(0x174)]())[_0x2712a8(0x1a7)](),_0x44c10f=this[_0x2712a8(0xc2)][_0x2712a8(0x99)](_0xdbee2f=>new Date(_0xdbee2f[_0x2712a8(0x1ea)])['getTime']()>_0x3aaa2c)['length'],_0x3080b1=new Array(0x18)[_0x2712a8(0x123)](0x0);this['rawEventLog'][_0x2712a8(0x128)](_0x261406=>{const _0x3f5cb8=_0x2712a8,_0x1825e2=new Date(_0x261406[_0x3f5cb8(0x1ea)]);if(_0x1825e2[_0x3f5cb8(0x1a7)]()>_0x3aaa2c)_0x3080b1[_0x1825e2['getHours']()]++;});let _0x14adfc={'status':_0x2712a8(0x153)};try{_0x14adfc[_0x2712a8(0x125)]=(await this[_0x2712a8(0x166)](LTM_DP_DRIFT_STATUS))['val'];}catch(_0x27ad7f){}let _0x1f6a5a='';try{const _0x54dddd=await this[_0x2712a8(0x166)](_0x2712a8(0x7c));_0x1f6a5a=_0x54dddd?_0x54dddd[_0x2712a8(0x91)]:'';}catch(_0x17b1a3){}let _0x427919=null;!this[_0x2712a8(0x1ec)]&&(_0x427919=this[_0x2712a8(0x164)][_0x2712a8(0x89)]?_0x2712a8(0x101):_0x2712a8(0x97));let _0x1a6ffb={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x5228da=await this[_0x2712a8(0x166)](_0x2712a8(0x138)),_0x5ad34c=await this[_0x2712a8(0x166)](_0x2712a8(0x18f)),_0x5e001c=await this[_0x2712a8(0x166)]('analysis.automation.targetId'),_0x51a32a=await this[_0x2712a8(0x166)](_0x2712a8(0x7f)),_0x207508=await this[_0x2712a8(0x166)](_0x2712a8(0x82));_0x5228da&&_0x5228da[_0x2712a8(0x91)]&&(_0x1a6ffb[_0x2712a8(0x19d)]=!![],_0x1a6ffb[_0x2712a8(0x193)]=_0x5ad34c?_0x5ad34c[_0x2712a8(0x91)]:'',_0x1a6ffb[_0x2712a8(0x7b)]=_0x5e001c?_0x5e001c[_0x2712a8(0x91)]:'',_0x1a6ffb[_0x2712a8(0x120)]=_0x51a32a?_0x51a32a['val']:''),_0x1a6ffb[_0x2712a8(0x15e)]=_0x207508?!!_0x207508[_0x2712a8(0x91)]:![];}catch(_0x404e74){}this['sendTo'](_0x13fe5b[_0x2712a8(0x80)],_0x13fe5b['command'],{'success':!![],'eventHistory':this[_0x2712a8(0x12e)][_0x2712a8(0x8c)](0x0,0xf),'stats':{'digestCount':_0x431aa1,'eventCountToday':_0x44c10f,'hourlyActivity':_0x3080b1,'driftStatus':_0x14adfc['status'],'isPresent':this[_0x2712a8(0xc5)],'presenceWho':_0x1f6a5a,'minDays':this[_0x2712a8(0x164)][_0x2712a8(0x13c)]||0x7,'stbDays':this[_0x2712a8(0x164)][_0x2712a8(0x191)]||0xe,'ltbDays':this[_0x2712a8(0x164)]['ltmLtbWindowDays']||0x3c,'systemError':_0x427919},'automation':_0x1a6ffb},_0x13fe5b[_0x2712a8(0x1e1)]);}else{if(_0x13fe5b[_0x2712a8(0x185)]===_0x2712a8(0x1d1))try{const _0x399327=await this[_0x2712a8(0x1b3)](_0x13fe5b[_0x2712a8(0x1af)]||{});this[_0x2712a8(0x1db)](_0x13fe5b[_0x2712a8(0x80)],_0x13fe5b[_0x2712a8(0x185)],{'success':!![],'devices':_0x399327},_0x13fe5b[_0x2712a8(0x1e1)]);}catch(_0x2ff4c0){this['sendTo'](_0x13fe5b['from'],_0x13fe5b[_0x2712a8(0x185)],{'success':![],'error':_0x2ff4c0[_0x2712a8(0x1af)]},_0x13fe5b['callback']);}else{if(_0x13fe5b[_0x2712a8(0x185)]===_0x2712a8(0x172)){const _0x208086=await this[_0x2712a8(0xb7)](_0x2712a8(0x1d6),_0x2712a8(0xb3)),_0x1af13b=[];if(_0x208086)for(const _0x4d9039 in _0x208086){const _0x24ee64=_0x208086[_0x4d9039],_0x52fcad=(_0x24ee64[_0x2712a8(0x129)]&&typeof _0x24ee64[_0x2712a8(0x129)][_0x2712a8(0x1bb)]===_0x2712a8(0xd0)?_0x24ee64[_0x2712a8(0x129)][_0x2712a8(0x1bb)]['de']:_0x24ee64[_0x2712a8(0x129)][_0x2712a8(0x1bb)])||_0x24ee64[_0x2712a8(0x129)][_0x2712a8(0x1bb)];_0x1af13b[_0x2712a8(0x122)]({'id':_0x4d9039,'name':_0x52fcad});}this[_0x2712a8(0x1db)](_0x13fe5b['from'],_0x13fe5b[_0x2712a8(0x185)],{'success':!![],'enums':_0x1af13b},_0x13fe5b[_0x2712a8(0x1e1)]);}else{if(_0x13fe5b[_0x2712a8(0x185)]===_0x2712a8(0xbe)){const _0x5cd5c9=_0x13fe5b['message'][_0x2712a8(0x18d)];if(!_0x5cd5c9)return this['sendTo'](_0x13fe5b[_0x2712a8(0x80)],_0x13fe5b['command'],{'success':![],'error':_0x2712a8(0x98)},_0x13fe5b[_0x2712a8(0x1e1)]);const _0x3b60b9=await this[_0x2712a8(0xbe)](_0x5cd5c9);this['sendTo'](_0x13fe5b['from'],_0x13fe5b[_0x2712a8(0x185)],{'success':!![],'names':_0x3b60b9},_0x13fe5b[_0x2712a8(0x1e1)]);}else{if(_0x13fe5b[_0x2712a8(0x185)]==='simulateButler'){const {targetId:_0x3ffb2b,targetValue:_0x33782c}=_0x13fe5b['message'];this[_0x2712a8(0x1c7)][_0x2712a8(0xba)](_0x2712a8(0x176)+_0x3ffb2b+_0x2712a8(0x104)+_0x33782c),await this[_0x2712a8(0xde)](_0x2712a8(0x138),{'val':!![],'ack':!![]}),await this[_0x2712a8(0xde)](_0x2712a8(0x18f),{'val':_0x2712a8(0xef)+_0x3ffb2b,'ack':!![]}),await this['setStateAsync'](_0x2712a8(0x1ee),{'val':_0x3ffb2b,'ack':!![]}),await this[_0x2712a8(0xde)](_0x2712a8(0x7f),{'val':_0x33782c,'ack':!![]}),this[_0x2712a8(0x1db)](_0x13fe5b[_0x2712a8(0x80)],_0x13fe5b[_0x2712a8(0x185)],{'success':!![]},_0x13fe5b['callback']);}else{if(_0x13fe5b[_0x2712a8(0x185)]===_0x2712a8(0x155)){const {historyId:_0x2bd57a,rating:_0x4ea1c0,comment:_0xf4b195,alertReason:_0x4dd00b}=_0x13fe5b[_0x2712a8(0x1af)];_0x2bd57a&&_0x4ea1c0?(await this[_0x2712a8(0x1eb)]({'timestamp':Date[_0x2712a8(0x121)](),'historyId':_0x2bd57a,'rating':_0x4ea1c0,'comment':_0xf4b195,'alertReason':_0x4dd00b}),this['sendTo'](_0x13fe5b[_0x2712a8(0x80)],_0x13fe5b[_0x2712a8(0x185)],{'success':!![]},_0x13fe5b[_0x2712a8(0x1e1)])):this[_0x2712a8(0x1db)](_0x13fe5b[_0x2712a8(0x80)],_0x13fe5b['command'],{'success':![],'error':_0x2712a8(0x9d)},_0x13fe5b['callback']);}else _0x13fe5b['command']===_0x2712a8(0xe4)&&(this[_0x2712a8(0x1c7)][_0x2712a8(0xba)](_0x2712a8(0x167)),await this[_0x2712a8(0xde)](_0x2712a8(0x138),{'val':![],'ack':!![]}),await this[_0x2712a8(0xde)]('analysis.automation.description',{'val':'','ack':!![]}),this['sendTo'](_0x13fe5b[_0x2712a8(0x80)],_0x13fe5b['command'],{'success':!![]},_0x13fe5b['callback']));}}}}}}}}}}async[a0_0x28f14e(0xe8)](_0x4b5f7d,_0x1c37c6,_0x23deaa){const _0x51cd25=a0_0x28f14e;if(!_0x23deaa)return;const _0x4e4453=_0x1c37c6[_0x51cd25(0x91)],_0x374029=Date[_0x51cd25(0x121)](),_0x4348b2=this[_0x51cd25(0xc4)][_0x4b5f7d];this[_0x51cd25(0xc4)][_0x4b5f7d]=_0x4e4453;if(!_0x23deaa['logDuplicates']&&_0x4348b2!=undefined&&_0x4348b2==_0x4e4453)return;const _0x2e4633=(_0x23deaa[_0x51cd25(0x188)]||'')[_0x51cd25(0x1c0)](),_0x549367=_0x2e4633[_0x51cd25(0x1f3)]('temperature')||_0x2e4633[_0x51cd25(0x1f3)](_0x51cd25(0x175))||_0x2e4633[_0x51cd25(0x1f3)](_0x51cd25(0xe9))||_0x2e4633[_0x51cd25(0x1f3)]('heizung');this['isProVersion']&&_0x549367&&this[_0x51cd25(0x83)](_0x4b5f7d,_0x4e4453,_0x23deaa[_0x51cd25(0x148)]);const _0x1622e3={'timestamp':_0x374029,'id':_0x4b5f7d,'name':_0x23deaa[_0x51cd25(0x1bb)],'type':_0x23deaa[_0x51cd25(0x188)],'location':_0x23deaa['location'],'value':_0x4e4453};this['eventHistory']['unshift'](_0x1622e3);if(this[_0x51cd25(0x12e)][_0x51cd25(0x131)]>HISTORY_MAX_SIZE)this['eventHistory'][_0x51cd25(0xf6)]();await this[_0x51cd25(0xde)]('events.lastEvent',{'val':JSON[_0x51cd25(0x1cd)](_0x1622e3),'ack':!![]}),await this[_0x51cd25(0xde)](_0x51cd25(0xcf),{'val':JSON[_0x51cd25(0x1cd)](this[_0x51cd25(0x12e)]),'ack':!![]});this[_0x51cd25(0xa5)]&&(this[_0x51cd25(0xc2)][_0x51cd25(0x122)](_0x1622e3),await this[_0x51cd25(0x196)](),this[_0x51cd25(0x7a)](_0x1622e3));if(_0x23deaa[_0x51cd25(0xfa)]&&_0x4e4453===!![]){if(this[_0x51cd25(0xc5)]&&!this['isGracePeriodActive'])this[_0x51cd25(0x1df)]();else{if(!this[_0x51cd25(0xc5)])this[_0x51cd25(0x1a2)](!![]);}}else{if(_0x23deaa[_0x51cd25(0x188)]===_0x51cd25(0x1dd)&&_0x4e4453===!![]){if(this[_0x51cd25(0x1ce)])this[_0x51cd25(0x10d)]();if(!this['isPresent']&&this[_0x51cd25(0x1c5)]===SYSTEM_MODES['NORMAL'])this[_0x51cd25(0x1a2)](!![]);}}}async[a0_0x28f14e(0x7a)](_0x48dab6){const _0x1e21c9=a0_0x28f14e,_0x192811=(_0x48dab6[_0x1e21c9(0x188)]||'')[_0x1e21c9(0x1c0)](),_0x28ea52=['motion','bewegung',_0x1e21c9(0x1dc),_0x1e21c9(0x11e),_0x1e21c9(0x105),_0x1e21c9(0x145),_0x1e21c9(0x9b),_0x1e21c9(0x13a),_0x1e21c9(0xac),_0x1e21c9(0x16e),'kontakt',_0x1e21c9(0xa3),_0x1e21c9(0x119),_0x1e21c9(0x12c),_0x1e21c9(0xf0),_0x1e21c9(0x1ef),_0x1e21c9(0x88)];if(!_0x28ea52[_0x1e21c9(0xd2)](_0x5272bc=>_0x192811[_0x1e21c9(0x1f3)](_0x5272bc)))return;if(!_0x48dab6[_0x1e21c9(0xb9)])return;if(this['sequenceTimer'])clearTimeout(this[_0x1e21c9(0xaa)]);this[_0x1e21c9(0x179)][_0x1e21c9(0x122)]({'loc':_0x48dab6[_0x1e21c9(0x148)]||_0x1e21c9(0x1c2),'id':_0x48dab6['id'],'ts':Date['now']()}),this[_0x1e21c9(0x1c7)][_0x1e21c9(0x17e)](_0x1e21c9(0x1d9)+_0x48dab6[_0x1e21c9(0x148)]+_0x1e21c9(0x143)+this[_0x1e21c9(0x179)][_0x1e21c9(0x131)]+')'),this[_0x1e21c9(0xaa)]=setTimeout(async()=>{const _0x3a6717=_0x1e21c9;if(this['activeSequence']['length']>0x1)await this[_0x3a6717(0x1b0)]();this[_0x3a6717(0x179)]=[];},SEQUENCE_TIMEOUT_MS);}async[a0_0x28f14e(0x1b0)](){const _0x1a9580=a0_0x28f14e;try{const _0x2e73c4=await this['getStateAsync'](_0x1a9580(0x14d));let _0x1b9409=[];if(_0x2e73c4&&_0x2e73c4['val'])try{_0x1b9409=JSON['parse'](_0x2e73c4[_0x1a9580(0x91)]);}catch(_0x30c9bc){}const _0x34000e=this[_0x1a9580(0x179)][0x0]['ts'],_0x18e55a=this[_0x1a9580(0x179)][_0x1a9580(0x1b1)](_0x18ff19=>({'loc':_0x18ff19[_0x1a9580(0xa9)],'t_delta':Math['round']((_0x18ff19['ts']-_0x34000e)/0x3e8)})),_0x1195e5={'timestamp':new Date(_0x34000e)[_0x1a9580(0x1e3)](),'steps':_0x18e55a,'duration':Math['round']((this[_0x1a9580(0x179)][this[_0x1a9580(0x179)][_0x1a9580(0x131)]-0x1]['ts']-_0x34000e)/0x3e8),'daytime':new Date(_0x34000e)[_0x1a9580(0x1e2)]()};_0x1b9409[_0x1a9580(0x122)](_0x1195e5);if(_0x1b9409['length']>MAX_TRAINING_SET_SIZE)_0x1b9409[_0x1a9580(0x183)]();await this[_0x1a9580(0xde)](_0x1a9580(0x14d),{'val':JSON[_0x1a9580(0x1cd)](_0x1b9409),'ack':!![]}),this[_0x1a9580(0xcd)](_0x1195e5);}catch(_0x2dd202){this[_0x1a9580(0x1c7)]['error'](_0x1a9580(0xd3)+_0x2dd202[_0x1a9580(0x1af)]);}}[a0_0x28f14e(0xcd)](_0x217cfd){const _0x211670=a0_0x28f14e;if(!this['isProVersion'])return;this[_0x211670(0x1c7)][_0x211670(0x17e)]('üõ°Ô∏è\x20SECURITY:\x20Sending\x20sequence\x20to\x20Guard\x20for\x20analysis...'),this[_0x211670(0xb5)]('ANALYZE_SEQUENCE',{'sequence':_0x217cfd});}[a0_0x28f14e(0x16b)](){const _0x2cdfc6=a0_0x28f14e;if(this[_0x2cdfc6(0xaf)])return;this[_0x2cdfc6(0xaf)]=!![];const _0x38ed2d=path[_0x2cdfc6(0x10c)](__dirname,_0x2cdfc6(0x14e),'requirements.txt');this[_0x2cdfc6(0x1c7)][_0x2cdfc6(0xba)](_0x2cdfc6(0xfb)),this['stopPythonService']();if(fs['existsSync'](VENV_PATH)){if(!fs[_0x2cdfc6(0xc9)](PIP_EXE)){this['log'][_0x2cdfc6(0x16c)]('‚ö†Ô∏è\x20Broken\x20venv\x20detected.\x20Repairing...');try{fs['rmSync'](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x277f67){}}}!fs[_0x2cdfc6(0xc9)](VENV_PATH)?exec('python3\x20-m\x20venv\x20\x22'+VENV_PATH+'\x22',_0x1baa3f=>{const _0x2013e2=_0x2cdfc6;if(_0x1baa3f){this['log'][_0x2013e2(0x152)](_0x2013e2(0x1ed)),this[_0x2013e2(0xaf)]=![];return;}this[_0x2013e2(0xf7)](_0x38ed2d);}):this[_0x2cdfc6(0xf7)](_0x38ed2d);}[a0_0x28f14e(0xf7)](_0x73175f){const _0x32d251=a0_0x28f14e;this[_0x32d251(0x1c7)][_0x32d251(0xba)]('Installing\x20dependencies\x20into\x20venv...');const _0x18bd96='\x22'+PIP_EXE+_0x32d251(0x8b)+_0x73175f+'\x22';exec(_0x18bd96,{'timeout':0x124f80,'maxBuffer':0x400*0x400*0x32},_0x668662=>{const _0x1fa6a9=_0x32d251;this[_0x1fa6a9(0xaf)]=![],_0x668662?this[_0x1fa6a9(0x1c7)]['error'](_0x1fa6a9(0x1c6)+_0x668662[_0x1fa6a9(0x1af)]):(this[_0x1fa6a9(0x1c7)][_0x1fa6a9(0xba)]('‚úÖ\x20INFRASTRUCTURE\x20READY.'),this[_0x1fa6a9(0x1d3)]());});}[a0_0x28f14e(0x1d3)](){const _0x2f7dda=a0_0x28f14e;if(this[_0x2f7dda(0xaf)])return;let _0x447ab1='python3';if(fs['existsSync'](PYTHON_EXE))this[_0x2f7dda(0x1c7)][_0x2f7dda(0xba)](_0x2f7dda(0x96)+PYTHON_EXE),_0x447ab1=PYTHON_EXE;else{this[_0x2f7dda(0x1c7)][_0x2f7dda(0x16c)](_0x2f7dda(0x19e)),this[_0x2f7dda(0x16b)]();return;}try{const _0xd3759e=path[_0x2f7dda(0x10c)](__dirname,_0x2f7dda(0x14e),'service.py');this['pythonProcess']=spawn(_0x447ab1,[_0xd3759e]),this[_0x2f7dda(0x1b5)][_0x2f7dda(0xe2)]['on'](_0x2f7dda(0x1b7),_0x1b18ff=>{const _0x2bb0e8=_0x2f7dda,_0x54e0dc=_0x1b18ff[_0x2bb0e8(0x11b)]()['split']('\x0a');_0x54e0dc[_0x2bb0e8(0x128)](_0x386aa9=>{const _0x20bb60=_0x2bb0e8,_0x16baaa=_0x386aa9[_0x20bb60(0x1da)]();if(!_0x16baaa)return;if(_0x16baaa[_0x20bb60(0x147)]('[LOG]'))this[_0x20bb60(0x1c7)][_0x20bb60(0x17e)](_0x20bb60(0xee)+_0x16baaa[_0x20bb60(0x87)](0x5)[_0x20bb60(0x1da)]());else{if(_0x16baaa[_0x20bb60(0x147)](_0x20bb60(0x1b2)))try{const _0x10756b=JSON[_0x20bb60(0xce)](_0x16baaa['substring'](0x8)[_0x20bb60(0x1da)]());this['handlePythonResult'](_0x10756b);}catch(_0x17423f){this[_0x20bb60(0x1c7)]['warn'](_0x20bb60(0x198)+_0x16baaa);}}(_0x16baaa['includes']('No\x20module\x20named')||_0x16baaa[_0x20bb60(0x1f3)](_0x20bb60(0xd4)))&&(this['log'][_0x20bb60(0x16c)]('‚ö†Ô∏è\x20Python\x20missing\x20libs.\x20Auto-Install\x20triggered.'),this['installPythonDependencies']());});}),this[_0x2f7dda(0x1b5)][_0x2f7dda(0xeb)]['on']('data',_0x436e92=>{const _0x393de3=_0x2f7dda,_0xaded2=_0x436e92[_0x393de3(0x11b)]()['trim']();if(!_0xaded2[_0x393de3(0x1f3)](_0x393de3(0x13d)))this[_0x393de3(0x1c7)][_0x393de3(0x152)](_0x393de3(0x11f)+_0xaded2);}),this[_0x2f7dda(0x1b5)]['on'](_0x2f7dda(0x136),_0x558cbb=>{const _0x3e7ee4=_0x2f7dda;this[_0x3e7ee4(0x1c7)][_0x3e7ee4(0xba)](_0x3e7ee4(0xbc)+_0x558cbb),this['pythonProcess']=null;});}catch(_0x4439fc){this[_0x2f7dda(0x1c7)][_0x2f7dda(0x152)](_0x2f7dda(0x1ad)+_0x4439fc[_0x2f7dda(0x1af)]);}}[a0_0x28f14e(0x8f)](){const _0x4a8b2f=a0_0x28f14e;if(this[_0x4a8b2f(0x1b5)]){this['log'][_0x4a8b2f(0xba)](_0x4a8b2f(0x113));try{this[_0x4a8b2f(0x1b5)][_0x4a8b2f(0xf4)]();}catch(_0x564f9f){}this['pythonProcess']=null;}}[a0_0x28f14e(0xe5)](_0x1f85cd){const _0x22d3c1=a0_0x28f14e;if(_0x1f85cd['type']===_0x22d3c1(0x1a8))this['log'][_0x22d3c1(0x17e)](_0x22d3c1(0x15f));else{if(_0x1f85cd['type']===_0x22d3c1(0x1d2)){const {anomaly_score:_0x2c8b3e,is_anomaly:_0x43c5e6,threshold:_0x3cb1ae}=_0x1f85cd[_0x22d3c1(0xd9)];this[_0x22d3c1(0x1c7)][_0x22d3c1(0xba)](_0x22d3c1(0xf8)+_0x2c8b3e['toFixed'](0x5)+_0x22d3c1(0xcc)+(_0x43c5e6?'ANOMALY':'OK')),this[_0x22d3c1(0xde)](_0x22d3c1(0x15a),{'val':_0x2c8b3e,'ack':!![]}),this[_0x22d3c1(0xde)](_0x22d3c1(0x124),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x43c5e6){const _0x1d6ab2='Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x2c8b3e[_0x22d3c1(0xdf)](0x4)+')';this['setStateAsync']('analysis.isAlert',{'val':!![],'ack':!![]}),this[_0x22d3c1(0xde)]('analysis.alertReason',{'val':_0x1d6ab2,'ack':!![]}),this['sendNotification'](_0x22d3c1(0x159)+_0x1d6ab2,![],!![]);}}else{if(_0x1f85cd[_0x22d3c1(0x188)]==='TRAINING_COMPLETE'){const {success:_0x108e69,details:_0xc90e17}=_0x1f85cd[_0x22d3c1(0xd9)];this[_0x22d3c1(0xde)]('analysis.training.status',{'val':_0x108e69?'Success:\x20'+new Date()[_0x22d3c1(0xf3)]()+'\x20('+_0xc90e17+')':_0x22d3c1(0x95)+_0xc90e17,'ack':!![]});}else{if(_0x1f85cd['type']===_0x22d3c1(0xbd)){const {success:_0x321635,details:_0x7ef6da}=_0x1f85cd['payload'];if(_0x321635)try{const _0x3e8803=JSON['parse'](_0x7ef6da);if(_0x3e8803[_0x22d3c1(0x94)])this['setStateAsync'](_0x22d3c1(0xdd),{'val':JSON[_0x22d3c1(0x1cd)](_0x3e8803[_0x22d3c1(0x94)]),'ack':!![]});if(_0x3e8803[_0x22d3c1(0x103)])this[_0x22d3c1(0xde)](_0x22d3c1(0x1e8),{'val':JSON['stringify'](_0x3e8803['heating']),'ack':!![]});}catch(_0x1d213b){}}else{if(_0x1f85cd[_0x22d3c1(0x188)]===_0x22d3c1(0xe0)){const {success:_0x57ea1,details:_0x137897}=_0x1f85cd['payload'];if(_0x57ea1)this['log'][_0x22d3c1(0xba)](_0x22d3c1(0x1ba)+_0x137897);}else{if(_0x1f85cd[_0x22d3c1(0x188)]===_0x22d3c1(0x9c)){const {is_anomaly:_0x474f2d,details:_0x4a9a80}=_0x1f85cd['payload'];this[_0x22d3c1(0xde)](_0x22d3c1(0x108),{'val':new Date()[_0x22d3c1(0x1e3)](),'ack':!![]}),this['setStateAsync'](_0x22d3c1(0x180),{'val':_0x474f2d,'ack':!![]});}}}}}}}[a0_0x28f14e(0xb5)](_0x3e06bc,_0x59544d={}){const _0x13bc10=a0_0x28f14e;if(!this[_0x13bc10(0x1b5)]||!this[_0x13bc10(0x1b5)][_0x13bc10(0x9f)][_0x13bc10(0x1f1)])return;const _0x310519=JSON[_0x13bc10(0x1cd)]({'command':_0x3e06bc,..._0x59544d});try{this['pythonProcess'][_0x13bc10(0x9f)]['write'](_0x310519+'\x0a');}catch(_0x15a188){}}async[a0_0x28f14e(0x83)](_0x233f0a,_0x53f254,_0x1157f2){const _0x5345b9=a0_0x28f14e,_0x3ccfc7=await this[_0x5345b9(0x1b6)](),_0x542134=await this['getStateAsync'](_0x5345b9(0x8a));let _0x106ed4=[];if(_0x542134&&_0x542134['val'])try{_0x106ed4=JSON[_0x5345b9(0xce)](_0x542134['val']);}catch(_0xdb2eb){}_0x106ed4[_0x5345b9(0x122)]({'ts':Date[_0x5345b9(0x121)](),'room':_0x1157f2||_0x5345b9(0x1c2),'t_in':_0x53f254,'t_out':_0x3ccfc7});if(_0x106ed4['length']>THERMO_LOG_SIZE)_0x106ed4[_0x5345b9(0x183)]();await this[_0x5345b9(0xde)](_0x5345b9(0x8a),{'val':JSON[_0x5345b9(0x1cd)](_0x106ed4),'ack':!![]});}async[a0_0x28f14e(0x1b6)](){const _0x23c16a=a0_0x28f14e;if(this[_0x23c16a(0x164)][_0x23c16a(0x161)])try{const _0x3f8607=await this[_0x23c16a(0x1c1)](this[_0x23c16a(0x164)][_0x23c16a(0x161)]);if(_0x3f8607&&_0x3f8607[_0x23c16a(0x91)]!==undefined&&_0x3f8607[_0x23c16a(0x91)]!==null){const _0x1a84cf=parseFloat(_0x3f8607[_0x23c16a(0x91)]);if(!isNaN(_0x1a84cf))return _0x1a84cf;}}catch(_0x228861){}const _0x55566d=this['config']['weatherInstance'];if(!this[_0x23c16a(0x164)][_0x23c16a(0x197)]||!_0x55566d)return null;try{let _0x396214='';if(_0x55566d[_0x23c16a(0x1f3)](_0x23c16a(0x157)))_0x396214=_0x55566d+'.Current.Temperature';else{if(_0x55566d[_0x23c16a(0x1f3)](_0x23c16a(0x1e4)))_0x396214=_0x55566d+_0x23c16a(0x194);else{if(_0x55566d[_0x23c16a(0x1f3)](_0x23c16a(0x127)))_0x396214=_0x55566d+_0x23c16a(0x17d);else{if(_0x55566d[_0x23c16a(0x1f3)](_0x23c16a(0x190)))_0x396214=_0x55566d+'.forecast.current.temp';}}}if(_0x396214){const _0xe17d34=await this[_0x23c16a(0x1c1)](_0x396214);if(_0xe17d34&&_0xe17d34['val']!==undefined&&_0xe17d34['val']!==null)return parseFloat(_0xe17d34['val']);}}catch(_0x34382a){}return null;}async[a0_0x28f14e(0x1b3)](_0x76002c){const _0x22e082=a0_0x28f14e;this[_0x22e082(0x1c7)]['info'](_0x22e082(0x102));const _0x354e1f=[],_0x20c851=await this[_0x22e082(0xb7)]('*'),_0xe5cfe8=await this[_0x22e082(0xb7)]('enum.functions.*','enum'),_0x59de53=await this[_0x22e082(0xb7)](_0x22e082(0x163),_0x22e082(0xb3)),_0x5bf74b={};if(_0xe5cfe8)for(const _0x407e8b in _0xe5cfe8){const _0x98cbd6=_0xe5cfe8[_0x407e8b][_0x22e082(0x129)][_0x22e082(0x10b)]||[];_0x98cbd6[_0x22e082(0x128)](_0x5e3095=>{const _0x3c4675=_0x22e082;if(!_0x5bf74b[_0x5e3095])_0x5bf74b[_0x5e3095]=[];_0x5bf74b[_0x5e3095][_0x3c4675(0x122)](_0x407e8b);});}const _0x58b6ee={};if(_0x59de53)for(const _0x32921a in _0x59de53){const _0x385168=_0x59de53[_0x32921a][_0x22e082(0x129)]['members']||[],_0xa2d688=typeof _0x59de53[_0x32921a][_0x22e082(0x129)]['name']==='object'?_0x59de53[_0x32921a][_0x22e082(0x129)][_0x22e082(0x1bb)]['de']:_0x59de53[_0x32921a]['common']['name'];_0x385168[_0x22e082(0x128)](_0xac082f=>_0x58b6ee[_0xac082f]=_0xa2d688);}const _0x1d3f83=_0x76002c[_0x22e082(0x1dd)]!==![],_0x29d502=_0x76002c['doors']!==![],_0xf6eadf=_0x76002c[_0x22e082(0xd6)]!==![],_0x193854=_0x76002c[_0x22e082(0xad)]===!![],_0x2d2a0c=_0x76002c['weather']===!![];for(const _0x435227 in _0x20c851){const _0x50ae0=_0x20c851[_0x435227];if(_0x50ae0['type']!==_0x22e082(0xe3)||!_0x50ae0[_0x22e082(0x129)])continue;if(ADAPTER_BLACKLIST[_0x22e082(0xd2)](_0x26ca02=>_0x435227['startsWith'](_0x26ca02))&&!_0x2d2a0c)continue;const _0x1c640d=(_0x50ae0['common'][_0x22e082(0xc0)]||'')[_0x22e082(0x1c0)]();let _0x1f564b=(typeof _0x50ae0[_0x22e082(0x129)][_0x22e082(0x1bb)]===_0x22e082(0xd0)?_0x50ae0[_0x22e082(0x129)][_0x22e082(0x1bb)]['de']:_0x50ae0[_0x22e082(0x129)][_0x22e082(0x1bb)])||_0x435227;const _0x9db9e9=_0x1f564b['toLowerCase']();let _0x1aa370=![];if(_0x2d2a0c&&_0x435227[_0x22e082(0x1f3)](_0x22e082(0xad)))_0x1aa370=!![];if(!_0x1aa370&&!_0x2d2a0c){if(HARD_IGNORE_TERMS['some'](_0x25e77e=>_0x435227[_0x22e082(0x1f3)](_0x25e77e)||_0x9db9e9[_0x22e082(0x1f3)](_0x25e77e['toLowerCase']())))continue;}let _0x34f5cd='';if(_0x1d3f83&&(_0x1c640d[_0x22e082(0x1f3)](_0x22e082(0x1dd))||_0x1c640d[_0x22e082(0x1f3)](_0x22e082(0x105))))_0x34f5cd=_0x22e082(0x1dd);else{if(_0x29d502&&(_0x1c640d[_0x22e082(0x1f3)](_0x22e082(0x145))||_0x1c640d['includes'](_0x22e082(0x13a))))_0x34f5cd=_0x22e082(0x145);else{if(_0xf6eadf&&(_0x1c640d[_0x22e082(0x1f3)](_0x22e082(0xa3))||_0x1c640d[_0x22e082(0x1f3)](_0x22e082(0x12c))))_0x34f5cd=_0x22e082(0xa3);else{if(_0x193854&&(_0x1c640d[_0x22e082(0x1f3)](_0x22e082(0xad))||_0x1c640d['includes'](_0x22e082(0x142))))_0x34f5cd=_0x22e082(0xad);}}}if(_0x34f5cd){let _0xbed677=_0x58b6ee[_0x435227]||'';if(!_0xbed677){let _0x34b619=_0x435227;for(let _0xf64197=0x0;_0xf64197<0x3;_0xf64197++){const _0x1b7db4=_0x34b619[_0x22e082(0xe1)]('.');if(_0x1b7db4===-0x1)break;_0x34b619=_0x34b619[_0x22e082(0x87)](0x0,_0x1b7db4);if(_0x58b6ee[_0x34b619]){_0xbed677=_0x58b6ee[_0x34b619];break;}}}_0x354e1f[_0x22e082(0x122)]({'id':_0x435227,'name':_0x1f564b,'location':_0xbed677,'type':_0x34f5cd,'logDuplicates':_0x34f5cd===_0x22e082(0x1dd),'isExit':![],'_score':_0xbed677?0x50:0x28});}}return _0x354e1f;}async[a0_0x28f14e(0x168)](){const _0x23179e=a0_0x28f14e;if(!this[_0x23179e(0x1ec)])return;if(this[_0x23179e(0x12e)][_0x23179e(0x131)]===0x0)return;const _0xc24c92=this[_0x23179e(0x12e)][_0x23179e(0x8c)](0x0,0xf),_0x5bd394=await this['getWeatherContext'](),_0x486431=this[_0x23179e(0x1c5)],_0xcf8594=PERSONA_MAPPING[this[_0x23179e(0x164)]['aiPersona']||_0x23179e(0x93)],_0x32c72e=this[_0x23179e(0x164)][_0x23179e(0xfe)]||_0x23179e(0x1d0);let _0x6e806f=_0x23179e(0x14b);try{const _0x48b5a2=await this[_0x23179e(0x166)](_0x23179e(0x7c));if(_0x48b5a2&&_0x48b5a2[_0x23179e(0x91)])_0x6e806f=_0x48b5a2[_0x23179e(0x91)];}catch(_0x1b99e7){}const _0x46d217='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0xcf8594+_0x23179e(0x195)+_0x486431+_0x23179e(0xc6)+JSON[_0x23179e(0x1cd)](_0xc24c92)+_0x23179e(0x137);try{const _0x57c967=await this[_0x23179e(0x1ec)]['generateContent'](_0x46d217),_0x1630bc=JSON['parse'](_0x57c967[_0x23179e(0x1b9)][_0x23179e(0xc8)]()[_0x23179e(0x146)](/```json|```/g,'')[_0x23179e(0x1da)]());await this[_0x23179e(0xde)](_0x23179e(0x186),{'val':JSON[_0x23179e(0x1cd)](_0x1630bc),'ack':!![]});}catch(_0x14c9e6){this[_0x23179e(0x1c7)][_0x23179e(0x152)](_0x23179e(0x177)+_0x14c9e6['message']);}}async['createDailyDigest'](){}async[a0_0x28f14e(0x1c3)](){}async['sendMorningBriefing'](){}async[a0_0x28f14e(0x181)](){}async['getCalendarNames'](_0x192e4b){return[];}async[a0_0x28f14e(0x10a)](){return'';}async[a0_0x28f14e(0x1eb)](_0x3cc822){const _0x3ae464=a0_0x28f14e;this[_0x3ae464(0x1c7)][_0x3ae464(0xba)](JSON[_0x3ae464(0x1cd)](_0x3cc822));}}if(require[a0_0x28f14e(0x14a)]!==module)module[a0_0x28f14e(0x106)]=_0x51077c=>new CogniLiving(_0x51077c);else new CogniLiving();