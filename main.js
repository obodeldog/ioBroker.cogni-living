const a0_0x2d519f=a0_0x9554;(function(_0x526823,_0x1e7890){const _0x3a97f3=a0_0x9554,_0x278ad4=_0x526823();while(!![]){try{const _0x17c9b7=-parseInt(_0x3a97f3(0x1d8))/0x1*(parseInt(_0x3a97f3(0x2ad))/0x2)+-parseInt(_0x3a97f3(0x20e))/0x3+parseInt(_0x3a97f3(0x36f))/0x4+parseInt(_0x3a97f3(0x3a5))/0x5+-parseInt(_0x3a97f3(0x1ec))/0x6+parseInt(_0x3a97f3(0x355))/0x7+parseInt(_0x3a97f3(0x23b))/0x8;if(_0x17c9b7===_0x1e7890)break;else _0x278ad4['push'](_0x278ad4['shift']());}catch(_0x2e62e6){_0x278ad4['push'](_0x278ad4['shift']());}}}(a0_0x19df,0xe3f6a));const a0_0x17c318=(function(){let _0x39379e=!![];return function(_0x2fea80,_0x2aa34b){const _0xdcdc41=_0x39379e?function(){const _0x36ea82=a0_0x9554;if(_0x2aa34b){const _0x42b2ad=_0x2aa34b[_0x36ea82(0x330)](_0x2fea80,arguments);return _0x2aa34b=null,_0x42b2ad;}}:function(){};return _0x39379e=![],_0xdcdc41;};}()),a0_0x31ba71=a0_0x17c318(this,function(){const _0x5932cb=a0_0x9554;return a0_0x31ba71['toString']()[_0x5932cb(0x1fe)]('(((.+)+)+)+$')['toString']()['constructor'](a0_0x31ba71)['search'](_0x5932cb(0x27d));});a0_0x31ba71();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x2d519f(0x3b4)),schedule=require('node-schedule'),{spawn,exec}=require(a0_0x2d519f(0x347)),path=require(a0_0x2d519f(0x23c)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x2d519f(0x2ee),LTM_SCHEDULE=a0_0x2d519f(0x272),MODE_RESET_SCHEDULE=a0_0x2d519f(0x35e),ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0x2d519f(0x3c4),LTM_DP_STATUS=a0_0x2d519f(0x2e0),LTM_DP_TRIGGER_DIGEST=a0_0x2d519f(0x23a),LTM_DP_BASELINE_STATUS=a0_0x2d519f(0x3a8),LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x2d519f(0x247),SYSTEM_DP_MODE=a0_0x2d519f(0x2d8),HARD_IGNORE_TERMS=[a0_0x2d519f(0x325),'scriptEnabled',a0_0x2d519f(0x2a6),'unreach',a0_0x2d519f(0x35c),a0_0x2d519f(0x2f5),a0_0x2d519f(0x230),a0_0x2d519f(0x1f3),a0_0x2d519f(0x1ef),'fault',a0_0x2d519f(0x21d),a0_0x2d519f(0x281),a0_0x2d519f(0x39c),a0_0x2d519f(0x1dc),a0_0x2d519f(0x2c5),a0_0x2d519f(0x327),a0_0x2d519f(0x398),'link_quality'],BAD_NAMES=[a0_0x2d519f(0x253),a0_0x2d519f(0x26c),'state',a0_0x2d519f(0x314),a0_0x2d519f(0x2a3),a0_0x2d519f(0x321),'on',a0_0x2d519f(0x20b),'switch',a0_0x2d519f(0x34d),a0_0x2d519f(0x357),a0_0x2d519f(0x2f1),a0_0x2d519f(0x2e5),a0_0x2d519f(0x275),'motion','presence','occupancy',a0_0x2d519f(0x215),a0_0x2d519f(0x3b3),a0_0x2d519f(0x252),a0_0x2d519f(0x282),a0_0x2d519f(0x217),a0_0x2d519f(0x2ed),a0_0x2d519f(0x33f),a0_0x2d519f(0x308)],ADAPTER_BLACKLIST=[a0_0x2d519f(0x225),a0_0x2d519f(0x28a),a0_0x2d519f(0x248),a0_0x2d519f(0x2ef),a0_0x2d519f(0x3b2),a0_0x2d519f(0x32b),a0_0x2d519f(0x368),a0_0x2d519f(0x2ba),a0_0x2d519f(0x395),a0_0x2d519f(0x36a),a0_0x2d519f(0x338)],SYSTEM_MODES={'NORMAL':a0_0x2d519f(0x34e),'VACATION':a0_0x2d519f(0x205),'PARTY':a0_0x2d519f(0x1d4),'GUEST':'guest'},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x2d519f(0x218)],SYSTEM_MODES[a0_0x2d519f(0x3be)]],PERSONA_MAPPING={'generic':a0_0x2d519f(0x348),'senior_aal':a0_0x2d519f(0x32e),'family':'Fokus\x20auf\x20Familienroutinen.','single_comfort':a0_0x2d519f(0x1e7),'security':'PRIORIT√ÑT:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x5ee21a){const _0x25dd02=a0_0x2d519f;try{const _0x35dccc=[_0x25dd02(0x2eb),_0x25dd02(0x3c7)];for(const _0xf6e851 of _0x35dccc){try{const _0x351321=await _0x5ee21a[_0x25dd02(0x311)](_0xf6e851);_0x351321&&await _0x5ee21a[_0x25dd02(0x296)](_0xf6e851);}catch(_0x4924e9){}}}catch(_0x390d38){}}async function initHistory(_0x55de50){const _0x4a3eb0=a0_0x2d519f;try{const _0x5cb489=await _0x55de50[_0x4a3eb0(0x2ea)](_0x4a3eb0(0x21f));_0x5cb489&&_0x5cb489[_0x4a3eb0(0x33a)]&&(_0x55de50[_0x4a3eb0(0x37e)]=JSON[_0x4a3eb0(0x305)](_0x5cb489[_0x4a3eb0(0x33a)][_0x4a3eb0(0x309)]()));}catch(_0x1f9375){_0x55de50['eventHistory']=[];}try{const _0x183f54=await _0x55de50[_0x4a3eb0(0x2ea)](_0x4a3eb0(0x387));if(_0x183f54&&_0x183f54['val'])_0x55de50[_0x4a3eb0(0x378)]=JSON[_0x4a3eb0(0x305)](_0x183f54['val'][_0x4a3eb0(0x309)]());}catch(_0x55f4d3){_0x55de50['analysisHistory']=[];}if(_0x55de50[_0x4a3eb0(0x37e)]&&_0x55de50[_0x4a3eb0(0x37e)][_0x4a3eb0(0x224)]>0x0){_0x55de50[_0x4a3eb0(0x2cb)][_0x4a3eb0(0x385)](_0x4a3eb0(0x2fe)+_0x55de50[_0x4a3eb0(0x37e)][_0x4a3eb0(0x224)]+_0x4a3eb0(0x360));for(let _0xfa0301=_0x55de50['eventHistory']['length']-0x1;_0xfa0301>=0x0;_0xfa0301--){const _0x1c78e4=_0x55de50[_0x4a3eb0(0x37e)][_0xfa0301];_0x1c78e4&&_0x1c78e4['id']!==undefined&&_0x1c78e4[_0x4a3eb0(0x2a3)]!==undefined&&(_0x55de50[_0x4a3eb0(0x213)][_0x1c78e4['id']]=_0x1c78e4[_0x4a3eb0(0x2a3)]);}}}async function initSystemConfig(_0x521452){const _0x1d6e25=a0_0x2d519f;try{const _0x2295a3=await _0x521452['getForeignObjectAsync'](_0x1d6e25(0x2c3));_0x2295a3&&_0x2295a3['common']&&(_0x521452[_0x1d6e25(0x235)]={'latitude':_0x2295a3[_0x1d6e25(0x3bb)]['latitude']||0x0,'longitude':_0x2295a3[_0x1d6e25(0x3bb)]['longitude']||0x0,'city':_0x2295a3[_0x1d6e25(0x3bb)][_0x1d6e25(0x310)]||''});}catch(_0x216e88){}}async function checkLicense(_0x2d06b3,_0x1401db){const _0x44e088=a0_0x2d519f;if(!_0x1401db)return![];_0x2d06b3[_0x44e088(0x3ab)]=await getSystemUUID(_0x2d06b3);if(_0x1401db===_0x44e088(0x27f)||_0x1401db[_0x44e088(0x299)]('PRO-'))return!![];return![];}async function getSystemUUID(_0x502a53){const _0x12007d=a0_0x2d519f;try{const _0x5caa28=await _0x502a53[_0x12007d(0x363)]('system.meta.uuid');if(_0x5caa28&&_0x5caa28['native']&&_0x5caa28[_0x12007d(0x1f2)][_0x12007d(0x2bf)])return _0x5caa28[_0x12007d(0x1f2)]['uuid'];return _0x12007d(0x1e4);}catch(_0x5b429a){return _0x12007d(0x1da);}}async function createAllObjects(_0x10e6f3){const _0x1d2a68=a0_0x2d519f;await checkSystemObjects(_0x10e6f3),await _0x10e6f3['setObjectNotExistsAsync'](_0x1d2a68(0x280),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x237),'type':_0x1d2a68(0x2b9),'role':_0x1d2a68(0x20d),'read':!![],'write':![],'def':''},'native':{}}),await _0x10e6f3[_0x1d2a68(0x291)](_0x1d2a68(0x371),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x285),'type':_0x1d2a68(0x2b9),'role':_0x1d2a68(0x346),'read':!![],'write':![]},'native':{}}),await _0x10e6f3['setObjectNotExistsAsync'](_0x1d2a68(0x21f),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x29e),'type':'string','role':_0x1d2a68(0x346),'read':!![],'write':![]},'native':{}}),await _0x10e6f3[_0x1d2a68(0x291)](_0x1d2a68(0x333),{'type':_0x1d2a68(0x242),'common':{'name':'Trigger\x20Analysis','type':'boolean','role':_0x1d2a68(0x358),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x10e6f3[_0x1d2a68(0x291)](_0x1d2a68(0x269),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x231),'type':_0x1d2a68(0x2a7),'role':_0x1d2a68(0x358),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x10e6f3[_0x1d2a68(0x291)](_0x1d2a68(0x1e9),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x1db),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x10e6f3['setObjectNotExistsAsync'](_0x1d2a68(0x23e),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x36d),'type':_0x1d2a68(0x2a7),'role':_0x1d2a68(0x366),'read':!![],'write':![],'def':![]},'native':{}}),await _0x10e6f3['setObjectNotExistsAsync'](_0x1d2a68(0x349),{'type':'state','common':{'name':'AI\x20Emergency\x20Status','type':_0x1d2a68(0x2a7),'role':_0x1d2a68(0x262),'read':!![],'write':![],'def':![]},'native':{}}),await _0x10e6f3[_0x1d2a68(0x291)](_0x1d2a68(0x28d),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x1d0),'type':_0x1d2a68(0x2b9),'role':_0x1d2a68(0x1ff),'read':!![],'write':![]},'native':{}}),await _0x10e6f3['setObjectNotExistsAsync'](_0x1d2a68(0x3d0),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x3ac),'type':_0x1d2a68(0x2b9),'role':'text','read':!![],'write':![]},'native':{}}),await _0x10e6f3[_0x1d2a68(0x291)](_0x1d2a68(0x1d1),{'type':_0x1d2a68(0x242),'common':{'name':'Deviation','type':_0x1d2a68(0x2b9),'role':'state','read':!![],'write':![],'def':_0x1d2a68(0x2da)},'native':{}}),await _0x10e6f3['setObjectNotExistsAsync'](_0x1d2a68(0x2a8),{'type':'state','common':{'name':_0x1d2a68(0x228),'type':'string','role':_0x1d2a68(0x20d),'read':!![],'write':![]},'native':{}}),await _0x10e6f3['setObjectNotExistsAsync'](_0x1d2a68(0x2e9),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x1cd),'type':_0x1d2a68(0x2b9),'role':_0x1d2a68(0x20d),'read':!![],'write':![]},'native':{}}),await _0x10e6f3[_0x1d2a68(0x323)](_0x1d2a68(0x226),{'type':_0x1d2a68(0x263),'common':{'name':_0x1d2a68(0x38e)},'native':{}}),await _0x10e6f3[_0x1d2a68(0x291)](_0x1d2a68(0x2a2),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x1ea),'type':_0x1d2a68(0x2a7),'role':_0x1d2a68(0x2be),'read':!![],'write':![],'def':![]},'native':{}}),await _0x10e6f3[_0x1d2a68(0x291)]('analysis.automation.description',{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x332),'type':_0x1d2a68(0x2b9),'role':_0x1d2a68(0x20d),'read':!![],'write':![]},'native':{}}),await _0x10e6f3[_0x1d2a68(0x291)](_0x1d2a68(0x386),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x31b),'type':_0x1d2a68(0x2b9),'role':_0x1d2a68(0x20d),'read':!![],'write':![]},'native':{}}),await _0x10e6f3[_0x1d2a68(0x291)]('analysis.automation.targetId',{'type':_0x1d2a68(0x242),'common':{'name':'Target\x20ID','type':_0x1d2a68(0x2b9),'role':_0x1d2a68(0x20d),'read':!![],'write':![]},'native':{}}),await _0x10e6f3[_0x1d2a68(0x291)](_0x1d2a68(0x29f),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x298),'type':_0x1d2a68(0x2b9),'role':_0x1d2a68(0x20d),'read':!![],'write':![]},'native':{}}),await _0x10e6f3['setObjectNotExistsAsync'](_0x1d2a68(0x23d),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x3b1),'type':_0x1d2a68(0x2a7),'role':_0x1d2a68(0x212),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x10e6f3[_0x1d2a68(0x291)](_0x1d2a68(0x2f8),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x221),'type':_0x1d2a68(0x2a7),'role':_0x1d2a68(0x358),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x10e6f3[_0x1d2a68(0x291)](_0x1d2a68(0x387),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x21b),'type':'string','role':_0x1d2a68(0x346),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x10e6f3[_0x1d2a68(0x291)](_0x1d2a68(0x2fd),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x22f),'type':_0x1d2a68(0x2b9),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await _0x10e6f3['extendObjectAsync'](_0x1d2a68(0x208),{'type':'channel','common':{'name':'Health\x20&\x20Sleep\x20Analysis'},'native':{}}),await _0x10e6f3['setObjectNotExistsAsync']('analysis.health.sleepScore',{'type':_0x1d2a68(0x242),'common':{'name':'Sleep\x20Score\x20(0-100)','type':_0x1d2a68(0x393),'role':_0x1d2a68(0x266),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x10e6f3['setObjectNotExistsAsync'](_0x1d2a68(0x388),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x34f),'type':'string','role':_0x1d2a68(0x20d),'read':!![],'write':![],'def':_0x1d2a68(0x3a9)},'native':{}}),await _0x10e6f3[_0x1d2a68(0x291)](_0x1d2a68(0x34a),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x31f),'type':'string','role':_0x1d2a68(0x20d),'read':!![],'write':![],'def':''},'native':{}}),await _0x10e6f3[_0x1d2a68(0x291)]('analysis.health.trendDiagnosis',{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x2f2),'type':'string','role':_0x1d2a68(0x20d),'read':!![],'write':![],'def':_0x1d2a68(0x2da)},'native':{}}),await _0x10e6f3[_0x1d2a68(0x291)]('analysis.health.trendValue',{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x26a),'type':_0x1d2a68(0x393),'role':'value','read':!![],'write':![],'def':0x0},'native':{}}),await _0x10e6f3[_0x1d2a68(0x323)](_0x1d2a68(0x220),{'type':_0x1d2a68(0x263),'common':{'name':_0x1d2a68(0x3bd)},'native':{}}),await _0x10e6f3['setObjectNotExistsAsync'](_0x1d2a68(0x271),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x3c0),'type':_0x1d2a68(0x2b9),'role':_0x1d2a68(0x346),'read':!![],'write':![],'def':'[]','desc':_0x1d2a68(0x336)},'native':{}}),await _0x10e6f3[_0x1d2a68(0x291)](_0x1d2a68(0x227),{'type':_0x1d2a68(0x242),'common':{'name':_0x1d2a68(0x2ff),'type':_0x1d2a68(0x2b9),'role':_0x1d2a68(0x346),'read':!![],'write':![],'def':'[]','desc':_0x1d2a68(0x37d)},'native':{}}),await checkLtmObjects(_0x10e6f3),await checkLtmDriftObjects(_0x10e6f3);}async function checkSystemObjects(_0x5c2691){const _0x4b16d0=a0_0x2d519f;await _0x5c2691[_0x4b16d0(0x323)](_0x4b16d0(0x33b),{'type':_0x4b16d0(0x263),'common':{'name':'System\x20Status\x20&\x20Control'},'native':{}}),await _0x5c2691[_0x4b16d0(0x323)](SYSTEM_DP_MODE,{'type':_0x4b16d0(0x242),'common':{'name':_0x4b16d0(0x31a),'type':'string','role':_0x4b16d0(0x242),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x4b16d0(0x241)],'states':{[SYSTEM_MODES['NORMAL']]:_0x4b16d0(0x1e2),[SYSTEM_MODES[_0x4b16d0(0x35a)]]:_0x4b16d0(0x3d2),[SYSTEM_MODES[_0x4b16d0(0x218)]]:_0x4b16d0(0x2f6),[SYSTEM_MODES[_0x4b16d0(0x3be)]]:_0x4b16d0(0x3ca)}},'native':{}});}async function checkLtmObjects(_0x4e601d){const _0x162aaa=a0_0x2d519f;await _0x4e601d[_0x162aaa(0x323)](_0x162aaa(0x1f5),{'type':_0x162aaa(0x263),'common':{'name':_0x162aaa(0x1f5)},'native':{}}),await _0x4e601d['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':_0x162aaa(0x242),'common':{'name':_0x162aaa(0x240),'type':_0x162aaa(0x2b9),'role':'json','read':!![],'write':![]},'native':{}}),await _0x4e601d['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x162aaa(0x242),'common':{'name':_0x162aaa(0x22a),'type':'string','role':_0x162aaa(0x346),'read':!![],'write':![]},'native':{}}),await _0x4e601d[_0x162aaa(0x323)](LTM_DP_STATUS,{'type':_0x162aaa(0x242),'common':{'name':'Processing\x20Status','type':_0x162aaa(0x2b9),'role':_0x162aaa(0x20d),'read':!![],'write':![]},'native':{}}),await _0x4e601d[_0x162aaa(0x323)](LTM_DP_TRIGGER_DIGEST,{'type':_0x162aaa(0x242),'common':{'name':_0x162aaa(0x246),'type':_0x162aaa(0x2a7),'role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await _0x4e601d[_0x162aaa(0x323)](LTM_DP_BASELINE_STATUS,{'type':_0x162aaa(0x242),'common':{'name':_0x162aaa(0x376),'type':_0x162aaa(0x2b9),'role':'text','read':!![],'write':![]},'native':{}});}async function checkLtmDriftObjects(_0x4e0f2a){const _0x492a0b=a0_0x2d519f;await _0x4e0f2a[_0x492a0b(0x323)](LTM_DP_DRIFT_CHANNEL,{'type':'channel','common':{'name':_0x492a0b(0x211)},'native':{}}),await _0x4e0f2a[_0x492a0b(0x323)](LTM_DP_DRIFT_STATUS,{'type':_0x492a0b(0x242),'common':{'name':'Drift\x20Status','type':_0x492a0b(0x2b9),'role':_0x492a0b(0x242),'read':!![],'write':![],'def':_0x492a0b(0x2da)},'native':{}}),await _0x4e0f2a[_0x492a0b(0x323)](LTM_DP_DRIFT_DETAILS,{'type':'state','common':{'name':_0x492a0b(0x36e),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x4e0f2a[_0x492a0b(0x323)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x492a0b(0x242),'common':{'name':_0x492a0b(0x3d1),'type':_0x492a0b(0x393),'role':_0x492a0b(0x2fb),'read':!![],'write':![]},'native':{}});}async function loadSystemMode(_0x2a1a67){const _0x305380=a0_0x2d519f;try{const _0x3eae49=await _0x2a1a67[_0x305380(0x2ea)](SYSTEM_DP_MODE);_0x3eae49&&_0x3eae49[_0x305380(0x33a)]&&Object[_0x305380(0x278)](SYSTEM_MODES)[_0x305380(0x391)](_0x3eae49[_0x305380(0x33a)])?_0x2a1a67['currentSystemMode']=_0x3eae49[_0x305380(0x33a)]:(_0x2a1a67[_0x305380(0x39f)]=SYSTEM_MODES[_0x305380(0x241)],await _0x2a1a67[_0x305380(0x331)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x4c32df){_0x2a1a67[_0x305380(0x39f)]=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0x1fea84){const _0x5ecd00=a0_0x2d519f;try{const _0x2079d3=await _0x1fea84['getStateAsync'](LTM_DP_RAW_LOG);if(_0x2079d3&&_0x2079d3[_0x5ecd00(0x33a)])_0x1fea84[_0x5ecd00(0x21c)]=JSON['parse'](_0x2079d3[_0x5ecd00(0x33a)]);}catch(_0x1bf94c){_0x1fea84[_0x5ecd00(0x21c)]=[];}}async function saveRawEventLog(_0x852c44){const _0x48cbc7=a0_0x2d519f;_0x852c44['rawEventLog']['length']>RAW_LOG_MAX_SIZE&&_0x852c44[_0x48cbc7(0x21c)][_0x48cbc7(0x2de)](0x0,_0x852c44[_0x48cbc7(0x21c)][_0x48cbc7(0x224)]-RAW_LOG_MAX_SIZE),await _0x852c44[_0x48cbc7(0x331)](LTM_DP_RAW_LOG,{'val':JSON[_0x48cbc7(0x392)](_0x852c44[_0x48cbc7(0x21c)]),'ack':!![]});}async function loadDailyDigests(_0x24e051){const _0xb624b7=a0_0x2d519f;try{const _0x1789fe=await _0x24e051[_0xb624b7(0x2ea)](LTM_DP_DAILY_DIGESTS);if(_0x1789fe&&_0x1789fe[_0xb624b7(0x33a)])_0x24e051['dailyDigests']=JSON[_0xb624b7(0x305)](_0x1789fe[_0xb624b7(0x33a)]);}catch(_0x4e4155){_0x24e051[_0xb624b7(0x2ae)]=[];}await updateBaselineStatus(_0x24e051);}async function saveDailyDigests(_0x268b2e,_0x87b465=!![]){const _0x5de00b=a0_0x2d519f,_0x1c7c38=_0x268b2e[_0x5de00b(0x207)][_0x5de00b(0x201)]||0x3c;_0x268b2e[_0x5de00b(0x2ae)][_0x5de00b(0x224)]>_0x1c7c38&&_0x268b2e[_0x5de00b(0x2ae)]['splice'](0x0,_0x268b2e[_0x5de00b(0x2ae)][_0x5de00b(0x224)]-_0x1c7c38);await _0x268b2e[_0x5de00b(0x331)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x5de00b(0x392)](_0x268b2e[_0x5de00b(0x2ae)]),'ack':!![]});if(_0x87b465)await updateBaselineStatus(_0x268b2e);}async function updateAnalysisHistory(_0x5a72fd,_0x4bf5f9){const _0x37c6a1=a0_0x2d519f;_0x5a72fd[_0x37c6a1(0x378)][_0x37c6a1(0x2b5)](_0x4bf5f9);if(_0x5a72fd[_0x37c6a1(0x378)]['length']>ANALYSIS_HISTORY_MAX_SIZE)_0x5a72fd[_0x37c6a1(0x378)]['pop']();await _0x5a72fd[_0x37c6a1(0x331)](_0x37c6a1(0x387),{'val':JSON[_0x37c6a1(0x392)](_0x5a72fd[_0x37c6a1(0x378)]),'ack':!![]});}async function updateBaselineStatus(_0x23af54){const _0x4a41a9=a0_0x2d519f;if(!_0x23af54['isProVersion']){await _0x23af54[_0x4a41a9(0x331)](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0x214763=_0x23af54['dailyDigests'][_0x4a41a9(0x224)]>=(_0x23af54[_0x4a41a9(0x207)][_0x4a41a9(0x312)]||0x7)?_0x4a41a9(0x2d6)+_0x23af54[_0x4a41a9(0x2ae)][_0x4a41a9(0x224)]+_0x4a41a9(0x3dc):'Lernphase\x20('+_0x23af54[_0x4a41a9(0x2ae)][_0x4a41a9(0x224)]+'/'+(_0x23af54['config'][_0x4a41a9(0x312)]||0x7)+')';await _0x23af54[_0x4a41a9(0x331)](LTM_DP_BASELINE_STATUS,{'val':_0x214763,'ack':!![]});}async function initSensorSubscriptions(_0x556cfa){const _0x1f6b8f=a0_0x2d519f,_0x7257bc=_0x556cfa[_0x1f6b8f(0x207)]['devices'];if(_0x7257bc&&_0x7257bc[_0x1f6b8f(0x224)]>0x0){_0x556cfa[_0x1f6b8f(0x2cb)][_0x1f6b8f(0x385)](_0x1f6b8f(0x365)+_0x7257bc['length']+_0x1f6b8f(0x3de));for(const _0xcd879b of _0x7257bc){if(_0xcd879b['id']){await _0x556cfa['subscribeForeignStatesAsync'](_0xcd879b['id']);try{const _0x1817e4=await _0x556cfa[_0x1f6b8f(0x364)](_0xcd879b['id']);if(_0x1817e4)_0x556cfa['sensorLastValues'][_0xcd879b['id']]=_0x1817e4[_0x1f6b8f(0x33a)];}catch(_0x4e9731){}}}}}async function initPresenceSubscriptions(_0x1dd22c){const _0x5e2104=a0_0x2d519f,_0x802d7=_0x1dd22c[_0x5e2104(0x207)][_0x5e2104(0x249)]||[];if(_0x802d7[_0x5e2104(0x224)]>0x0){_0x1dd22c[_0x5e2104(0x2cb)][_0x5e2104(0x385)](_0x5e2104(0x365)+_0x802d7['length']+_0x5e2104(0x301));for(const _0x36de12 of _0x802d7){await _0x1dd22c[_0x5e2104(0x373)](_0x36de12);}try{await checkWifiPresence(_0x1dd22c);}catch(_0x32501a){}}}async function getWeatherContext(_0x16c3d3){const _0x553af1=a0_0x2d519f;try{if(!_0x16c3d3[_0x553af1(0x207)]['useWeather'])return'Wetter:\x20Deaktiviert';let _0x23a653='';const _0x4113b3=_0x16c3d3[_0x553af1(0x207)]['weatherInstance'];if(_0x4113b3)try{if(_0x4113b3[_0x553af1(0x391)]('accuweather')){const _0x324ebb=await _0x16c3d3['getForeignStateAsync'](_0x4113b3+_0x553af1(0x2bd));if(_0x324ebb&&_0x324ebb['val'])_0x23a653=_0x324ebb[_0x553af1(0x33a)];}else{if(_0x4113b3['includes'](_0x553af1(0x37c))){const _0x5861fc=await _0x16c3d3[_0x553af1(0x364)](_0x4113b3+_0x553af1(0x3d9));if(_0x5861fc&&_0x5861fc[_0x553af1(0x33a)])_0x23a653=_0x5861fc[_0x553af1(0x33a)];}else{if(_0x4113b3['includes'](_0x553af1(0x2af))){const _0x46c243=await _0x16c3d3['getForeignStateAsync'](_0x4113b3+_0x553af1(0x25b));if(_0x46c243&&_0x46c243[_0x553af1(0x33a)])_0x23a653=_0x46c243[_0x553af1(0x33a)];}}}}catch(_0x530d03){}if(!_0x23a653){const _0x351cc3=['accuweather.0',_0x553af1(0x1ee),'weatherunderground.0',_0x553af1(0x353)];for(const _0x18c25b of _0x351cc3){try{const _0xd56406=await _0x16c3d3[_0x553af1(0x363)](_0x18c25b);if(_0xd56406){if(_0x18c25b[_0x553af1(0x391)](_0x553af1(0x234))){const _0x48167a=await _0x16c3d3[_0x553af1(0x364)](_0x18c25b+_0x553af1(0x2bd));if(_0x48167a&&_0x48167a[_0x553af1(0x33a)]){_0x23a653=_0x48167a[_0x553af1(0x33a)];break;}}}}catch(_0x4e2128){}}}return _0x23a653?_0x553af1(0x34b)+_0x23a653:_0x553af1(0x251);}catch(_0x1dc82f){return'WETTER\x20ERROR:\x20'+_0x1dc82f[_0x553af1(0x1c9)];}}async function getCalendarContext(_0x198285){const _0x4cc1aa=a0_0x2d519f;try{if(!_0x198285[_0x4cc1aa(0x207)]['useCalendar'])return _0x4cc1aa(0x2b2);let _0x4f9d0b=_0x198285[_0x4cc1aa(0x207)][_0x4cc1aa(0x384)]||_0x4cc1aa(0x2b3),_0x2d17d3=_0x198285[_0x4cc1aa(0x207)]['calendarSelection']||[];if(typeof _0x2d17d3===_0x4cc1aa(0x2b9))_0x2d17d3=_0x2d17d3['split'](',');try{const _0x479af4=await _0x198285['getForeignStateAsync'](_0x4f9d0b+_0x4cc1aa(0x375));if(_0x479af4&&_0x479af4[_0x4cc1aa(0x33a)]){let _0x5b0555=tryParse(_0x479af4[_0x4cc1aa(0x33a)]);if(_0x5b0555&&Array[_0x4cc1aa(0x369)](_0x5b0555)){if(_0x2d17d3['length']>0x0)_0x5b0555=_0x5b0555[_0x4cc1aa(0x367)](_0x2dac0f=>_0x2d17d3[_0x4cc1aa(0x391)](_0x2dac0f['_calName']||''));else return _0x4cc1aa(0x356);if(_0x5b0555[_0x4cc1aa(0x224)]>0x0){const _0xbd23d5=_0x5b0555['slice'](0x0,0x3)[_0x4cc1aa(0x2cd)](_0x55584f=>{const _0x53951a=_0x4cc1aa;let _0x57bc4a=_0x55584f[_0x53951a(0x2fb)];if(_0x55584f['time'])_0x57bc4a+='\x20'+_0x55584f['time'];return _0x57bc4a+':\x20'+_0x55584f[_0x53951a(0x24b)]+'\x20('+_0x55584f['_calName']+')';});return'KALENDER:\x20'+_0xbd23d5['join'](_0x4cc1aa(0x2c2));}else return'KALENDER:\x20Keine\x20relevanten\x20Termine';}}}catch(_0x36a040){_0x198285['log']['warn'](_0x4cc1aa(0x1de)+_0x36a040[_0x4cc1aa(0x1c9)]);}return _0x4cc1aa(0x39b);}catch(_0x314fb3){return _0x4cc1aa(0x273)+_0x314fb3[_0x4cc1aa(0x1c9)];}}async function getCalendarNames(_0x172b9b,_0x4297bb){const _0x50ac80=a0_0x2d519f;try{const _0x42f6d6=await _0x172b9b[_0x50ac80(0x364)](_0x4297bb+'.data.table');if(_0x42f6d6&&_0x42f6d6['val']){const _0x5e9952=tryParse(_0x42f6d6['val']);if(_0x5e9952&&Array[_0x50ac80(0x369)](_0x5e9952)){const _0x530443=[...new Set(_0x5e9952['map'](_0x5998e8=>_0x5998e8[_0x50ac80(0x29c)])[_0x50ac80(0x367)](Boolean))];return _0x530443[_0x50ac80(0x239)]();}}return[];}catch(_0xd48754){return _0x172b9b[_0x50ac80(0x2cb)]['error'](_0x50ac80(0x1d2)+_0xd48754['message']),[];}}async function checkWifiPresence(_0x44dd39){const _0x31bf72=a0_0x2d519f;try{const _0x324839=_0x44dd39[_0x31bf72(0x207)]['presenceDevices']||[];let _0x5b6b1b=![];const _0x5d2cc1=[];for(const _0x2e02ce of _0x324839){try{const _0x51fa8f=await _0x44dd39[_0x31bf72(0x364)](_0x2e02ce);if(_0x51fa8f&&(_0x51fa8f[_0x31bf72(0x33a)]===!![]||_0x51fa8f['val']==='online'||_0x51fa8f[_0x31bf72(0x33a)]===0x1)){_0x5b6b1b=!![];const _0x29821d=await _0x44dd39[_0x31bf72(0x363)](_0x2e02ce);let _0x20a350=_0x2e02ce;_0x29821d&&_0x29821d['common']&&_0x29821d[_0x31bf72(0x3bb)][_0x31bf72(0x3dd)]&&(_0x20a350=typeof _0x29821d[_0x31bf72(0x3bb)][_0x31bf72(0x3dd)]===_0x31bf72(0x233)?_0x29821d['common']['name']['de']||_0x29821d['common'][_0x31bf72(0x3dd)]['en']:_0x29821d['common'][_0x31bf72(0x3dd)]),_0x5d2cc1[_0x31bf72(0x216)](_0x20a350);}}catch(_0x242c8d){}}return await _0x44dd39['setStateAsync'](_0x31bf72(0x280),{'val':_0x5d2cc1[_0x31bf72(0x3d8)](',\x20'),'ack':!![]}),_0x5b6b1b&&(_0x44dd39[_0x31bf72(0x286)]&&(_0x44dd39[_0x31bf72(0x2cb)]['info']('WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.'),abortExitTimer(_0x44dd39)),!_0x44dd39['isPresent']&&_0x44dd39[_0x31bf72(0x39f)]===SYSTEM_MODES[_0x31bf72(0x241)]&&await setPresence(_0x44dd39,!![])),_0x5b6b1b;}catch(_0x19f165){return _0x44dd39[_0x31bf72(0x2cb)][_0x31bf72(0x1ef)](_0x31bf72(0x379)+_0x19f165[_0x31bf72(0x1c9)]),![];}}function startExitTimer(_0x505841){const _0x37e4da=a0_0x2d519f;abortExitTimer(_0x505841),_0x505841[_0x37e4da(0x2f7)]=!![],_0x505841[_0x37e4da(0x307)]=setTimeout(()=>{const _0x54fceb=_0x37e4da;_0x505841[_0x54fceb(0x2f7)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x505841['exitTimer']=setTimeout(()=>{const _0x3c0b76=_0x37e4da;setPresence(_0x505841,![]),_0x505841[_0x3c0b76(0x286)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x43c4b8){const _0x1133e1=a0_0x2d519f;if(_0x43c4b8['exitTimer'])clearTimeout(_0x43c4b8[_0x1133e1(0x286)]);if(_0x43c4b8['exitGraceTimer'])clearTimeout(_0x43c4b8[_0x1133e1(0x307)]);_0x43c4b8['exitTimer']=null,_0x43c4b8[_0x1133e1(0x307)]=null,_0x43c4b8[_0x1133e1(0x2f7)]=![];}async function setPresence(_0x33dcad,_0x4ef4cf){const _0x34a90e=a0_0x2d519f;if(_0x33dcad[_0x34a90e(0x2e6)]===_0x4ef4cf)return;_0x33dcad[_0x34a90e(0x2e6)]=_0x4ef4cf,await _0x33dcad[_0x34a90e(0x331)]('system.isPresent',{'val':_0x4ef4cf,'ack':!![]});}async function saveFeedback(_0x16a80d,_0x5af725){const _0x5e48ef=a0_0x2d519f;_0x16a80d[_0x5e48ef(0x2cb)][_0x5e48ef(0x385)](_0x5e48ef(0x3ae)+JSON[_0x5e48ef(0x392)](_0x5af725));}async function runBaselineDriftAnalysis(_0x445137){const _0x1c4157=a0_0x2d519f;if(!_0x445137[_0x1c4157(0x223)]||!_0x445137['geminiModel'])return;const _0x76d1c3=_0x445137[_0x1c4157(0x207)][_0x1c4157(0x3da)]||0xe;if(_0x445137[_0x1c4157(0x2ae)][_0x1c4157(0x224)]<_0x76d1c3+(_0x445137[_0x1c4157(0x207)][_0x1c4157(0x312)]||0x7)){await _0x445137['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x1c4157(0x2cc),'ack':!![]});return;}const _0x2f660f=_0x445137[_0x1c4157(0x2ae)]['slice'](-_0x76d1c3),_0x5d4a90=_0x445137['dailyDigests']['slice'](0x0,_0x445137[_0x1c4157(0x2ae)]['length']-_0x76d1c3),_0x3db277=_0x1c4157(0x29d)+JSON['stringify'](_0x5d4a90)+_0x1c4157(0x25d)+JSON[_0x1c4157(0x392)](_0x2f660f);try{const _0xf85af1=await _0x445137[_0x1c4157(0x2d1)]['generateContent'](_0x3db277),_0x162516=JSON['parse'](_0xf85af1['response'][_0x1c4157(0x20d)]()['replace'](/```json|```/g,'')[_0x1c4157(0x232)]());_0x162516[_0x1c4157(0x1fd)]&&(await _0x445137[_0x1c4157(0x331)](LTM_DP_DRIFT_STATUS,{'val':_0x162516[_0x1c4157(0x1fd)],'ack':!![]}),await _0x445137[_0x1c4157(0x331)](LTM_DP_DRIFT_DETAILS,{'val':_0x162516[_0x1c4157(0x300)],'ack':!![]}),await _0x445137['setStateAsync'](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x1c4157(0x214)](),'ack':!![]}));}catch(_0x7b816a){}}function setupLtmScheduler(_0x4b10c5){const _0x260440=a0_0x2d519f;try{if(_0x4b10c5[_0x260440(0x3ba)])_0x4b10c5[_0x260440(0x3ba)][_0x260440(0x3aa)]();if(!_0x4b10c5[_0x260440(0x223)]){_0x4b10c5[_0x260440(0x331)](LTM_DP_STATUS,{'val':_0x260440(0x1f6),'ack':!![]});return;}_0x4b10c5[_0x260440(0x3ba)]=schedule[_0x260440(0x33c)](LTM_SCHEDULE,()=>createDailyDigest(_0x4b10c5));}catch(_0x31738a){_0x4b10c5[_0x260440(0x2cb)]['error'](_0x260440(0x3c1)+_0x31738a[_0x260440(0x1c9)]);}}function setupModeResetScheduler(_0xa23943){const _0x5744b7=a0_0x2d519f;try{if(_0xa23943[_0x5744b7(0x2fc)])_0xa23943['modeResetJob'][_0x5744b7(0x3aa)]();_0xa23943[_0x5744b7(0x2fc)]=schedule[_0x5744b7(0x33c)](MODE_RESET_SCHEDULE,async()=>{const _0x14be32=_0x5744b7;await loadSystemMode(_0xa23943),AUTO_RESET_MODES[_0x14be32(0x391)](_0xa23943[_0x14be32(0x39f)])&&await _0xa23943[_0x14be32(0x331)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x14be32(0x241)],'ack':![]});});}catch(_0x2d7dec){_0xa23943[_0x5744b7(0x2cb)]['error'](_0x5744b7(0x1d7)+_0x2d7dec[_0x5744b7(0x1c9)]);}}function a0_0x9554(_0x53fc42,_0x508143){const _0x22592c=a0_0x19df();return a0_0x9554=function(_0x31ba71,_0x17c318){_0x31ba71=_0x31ba71-0x1c9;let _0x19df27=_0x22592c[_0x31ba71];return _0x19df27;},a0_0x9554(_0x53fc42,_0x508143);}function setupDriftAnalysisScheduler(_0x3176dc){const _0x2a850f=a0_0x2d519f;try{if(_0x3176dc[_0x2a850f(0x24a)])clearInterval(_0x3176dc['driftAnalysisTimer']);if(!_0x3176dc[_0x2a850f(0x223)])return;_0x3176dc[_0x2a850f(0x24a)]=setInterval(()=>runBaselineDriftAnalysis(_0x3176dc),(_0x3176dc['config'][_0x2a850f(0x265)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x3176dc),0x1388);}catch(_0x40df13){_0x3176dc[_0x2a850f(0x2cb)]['error'](_0x2a850f(0x328)+_0x40df13[_0x2a850f(0x1c9)]);}}function setupBriefingScheduler(_0x52d0da){const _0x37e6aa=a0_0x2d519f;try{if(_0x52d0da[_0x37e6aa(0x27b)])_0x52d0da[_0x37e6aa(0x27b)]['cancel']();if(!_0x52d0da[_0x37e6aa(0x207)][_0x37e6aa(0x2df)])return;const _0x8c4abd=(_0x52d0da[_0x37e6aa(0x207)][_0x37e6aa(0x35f)]||'08:00')[_0x37e6aa(0x202)](':'),_0x5300ef=parseInt(_0x8c4abd[0x0])||0x8,_0x3a83b4=parseInt(_0x8c4abd[0x1])||0x0,_0x6a180d=_0x3a83b4+'\x20'+_0x5300ef+'\x20*\x20*\x20*';_0x52d0da[_0x37e6aa(0x2cb)]['info'](_0x37e6aa(0x3a3)+_0x5300ef+':'+(_0x3a83b4<0xa?'0'+_0x3a83b4:_0x3a83b4)),_0x52d0da[_0x37e6aa(0x27b)]=schedule[_0x37e6aa(0x33c)](_0x6a180d,()=>{sendMorningBriefing(_0x52d0da);});}catch(_0x189bb7){_0x52d0da[_0x37e6aa(0x2cb)][_0x37e6aa(0x1ef)](_0x37e6aa(0x3bf)+_0x189bb7[_0x37e6aa(0x1c9)]);}}async function sendNotification(_0x4c8721,_0x1d4517,_0xae7794=![],_0x39c441=![]){const _0x45c4cf=a0_0x2d519f;_0x4c8721[_0x45c4cf(0x2cb)][_0x45c4cf(0x385)]((_0xae7794?_0x45c4cf(0x3b5):'')+_0x45c4cf(0x29a)+_0x1d4517+'\x22');const _0x35bd03=_0x4c8721[_0x45c4cf(0x207)];let _0x3e2fb8=0x0;if(_0x35bd03[_0x45c4cf(0x22b)]){let _0x30c66={};(_0x1d4517['includes'](_0x45c4cf(0x1e5))||_0x39c441)&&(_0x30c66={'reply_markup':{'inline_keyboard':[[{'text':_0x45c4cf(0x1fc),'callback_data':'COGNI_CONFIRM_OK'}],[{'text':_0x45c4cf(0x26e),'callback_data':_0x45c4cf(0x210)}]]}}),await _0x4c8721[_0x45c4cf(0x352)](_0x35bd03[_0x45c4cf(0x3d6)],'send',{'text':_0x1d4517,'user':_0x35bd03[_0x45c4cf(0x27c)],..._0x30c66}),_0x3e2fb8++;}if(_0x35bd03['notifyPushoverEnabled']){let _0x18ed82={'message':_0x1d4517,'title':_0x39c441?_0x45c4cf(0x2f9):_0x45c4cf(0x2ac),'priority':_0x39c441?0x2:0x1,'device':_0x35bd03[_0x45c4cf(0x1d3)]};_0x39c441&&(_0x18ed82[_0x45c4cf(0x1cb)]=0x1e,_0x18ed82['expire']=0xe10,_0x18ed82[_0x45c4cf(0x2cf)]='siren'),await _0x4c8721['sendToAsync'](_0x35bd03['notifyPushoverInstance'],'send',_0x18ed82),_0x3e2fb8++;}return _0x35bd03['notifyEmailEnabled']&&(await _0x4c8721['sendToAsync'](_0x35bd03['notifyEmailInstance'],_0x45c4cf(0x30d),{'text':_0x1d4517,'to':_0x35bd03['notifyEmailRecipient']}),_0x3e2fb8++),_0x3e2fb8;}async function setupTelegramListener(_0x31045d){const _0x47d0ec=a0_0x2d519f,_0x2cfca8=_0x31045d['config']['notifyTelegramInstance'];_0x31045d[_0x47d0ec(0x207)]['notifyTelegramEnabled']&&_0x2cfca8&&(_0x31045d['log'][_0x47d0ec(0x385)](_0x47d0ec(0x324)+_0x2cfca8+_0x47d0ec(0x2f4)),await _0x31045d['subscribeForeignStatesAsync'](_0x2cfca8+'.communicate.request'));}async function handleTelegramResponse(_0x56b0b5,_0x25a7fc){const _0x20df45=a0_0x2d519f;let _0x2d80e4=_0x25a7fc;_0x25a7fc['startsWith']('[')&&(_0x2d80e4=_0x25a7fc[_0x20df45(0x24f)](_0x25a7fc[_0x20df45(0x2a9)](']')+0x1));if(_0x2d80e4==='COGNI_CONFIRM_OK')_0x56b0b5['log'][_0x20df45(0x385)](_0x20df45(0x24e)),await _0x56b0b5[_0x20df45(0x331)]('analysis.isAlert',{'val':![],'ack':!![]}),await _0x56b0b5['setStateAsync'](_0x20df45(0x28d),{'val':_0x20df45(0x3af),'ack':!![]}),_0x56b0b5['lastAlertState']=![],sendNotification(_0x56b0b5,_0x20df45(0x27e),![]);else _0x2d80e4===_0x20df45(0x210)&&(_0x56b0b5['log'][_0x20df45(0x344)]('üìû\x20User\x20requested\x20CALL\x20via\x20Telegram!'),sendNotification(_0x56b0b5,_0x20df45(0x288),![],!![]));}async function runAutopilot(_0x31e01b){const _0x43a5e2=a0_0x2d519f,_0x4af1b1=_0x31e01b[_0x43a5e2(0x207)][_0x43a5e2(0x362)],_0x52497f=_0x31e01b[_0x43a5e2(0x37e)]['length']>0x0?_0x31e01b[_0x43a5e2(0x37e)][0x0][_0x43a5e2(0x283)]:Date[_0x43a5e2(0x214)](),_0x280408=(Date[_0x43a5e2(0x214)]()-_0x52497f)/(0x3e8*0x3c*0x3c);let _0x53e35f='';_0x31e01b['config']['inactivityMonitoringEnabled']&&_0x31e01b[_0x43a5e2(0x39f)]===SYSTEM_MODES['NORMAL']&&_0x31e01b[_0x43a5e2(0x2e6)]&&(_0x280408>_0x4af1b1&&(_0x53e35f='HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20'+_0x280408[_0x43a5e2(0x260)](0x1)+_0x43a5e2(0x380))),runGeminiAnalysis(_0x31e01b,_0x53e35f)[_0x43a5e2(0x259)](_0x187567=>_0x31e01b['log'][_0x43a5e2(0x1ef)](_0x187567));}async function createDailyDigest(_0x380a26){const _0x132b41=a0_0x2d519f;if(!_0x380a26[_0x132b41(0x223)])return;await _0x380a26['setStateAsync'](LTM_DP_STATUS,{'val':_0x132b41(0x3c5)+new Date()[_0x132b41(0x1cf)](),'ack':!![]});if(!_0x380a26[_0x132b41(0x2d1)]||_0x380a26[_0x132b41(0x21c)][_0x132b41(0x224)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x380a26['setStateAsync'](LTM_DP_STATUS,{'val':_0x132b41(0x1e0),'ack':!![]});return;}const _0x4918d5=JSON[_0x132b41(0x305)](JSON[_0x132b41(0x392)](_0x380a26['rawEventLog'])),_0x4d7fb5=_0x4918d5[_0x132b41(0x224)],_0x36b19f=_0x132b41(0x1eb)+JSON[_0x132b41(0x392)](_0x4918d5);try{const _0x19dc65=await _0x380a26[_0x132b41(0x2d1)]['generateContent'](_0x36b19f),_0x33293f=JSON[_0x132b41(0x305)](_0x19dc65['response'][_0x132b41(0x20d)]()[_0x132b41(0x20c)](/```json|```/g,'')[_0x132b41(0x232)]());_0x33293f[_0x132b41(0x1f1)]&&(_0x380a26[_0x132b41(0x2ae)][_0x132b41(0x216)]({'timestamp':new Date()[_0x132b41(0x2ca)](),'eventCount':_0x4d7fb5,'summary':_0x33293f['summary'],'activityLevel':_0x33293f[_0x132b41(0x3d4)],'systemMode':_0x380a26['currentSystemMode']}),await saveDailyDigests(_0x380a26),_0x380a26['rawEventLog']=[],await saveRawEventLog(_0x380a26),await _0x380a26[_0x132b41(0x331)](LTM_DP_STATUS,{'val':_0x132b41(0x3d7)+_0x4d7fb5+_0x132b41(0x2fa),'ack':!![]}),runPythonHealthCheck(_0x380a26));}catch(_0x32ab07){await _0x380a26['setStateAsync'](LTM_DP_STATUS,{'val':_0x132b41(0x3a4)+_0x32ab07[_0x132b41(0x1c9)],'ack':!![]});}}async function sendMorningBriefing(_0x2c29b0){const _0x40dea6=a0_0x2d519f;if(!_0x2c29b0[_0x40dea6(0x2d1)])return;_0x2c29b0[_0x40dea6(0x2cb)]['info'](_0x40dea6(0x2e7));const _0x2178aa=_0x2c29b0[_0x40dea6(0x2ae)][_0x40dea6(0x224)]>0x0?_0x2c29b0[_0x40dea6(0x2ae)][_0x2c29b0[_0x40dea6(0x2ae)][_0x40dea6(0x224)]-0x1]:null,_0xd9b925=_0x2178aa&&_0x2178aa['health']?_0x2178aa['health']['sleepScore']:_0x40dea6(0x2da),_0x4bf5e0=new Date();_0x4bf5e0[_0x40dea6(0x2d9)](0x4,0x0,0x0,0x0);const _0x26f1be=_0x2c29b0['eventHistory'][_0x40dea6(0x367)](_0x5b6c5d=>new Date(_0x5b6c5d['timestamp'])>_0x4bf5e0),_0x31eaa1=PERSONA_MAPPING[_0x2c29b0[_0x40dea6(0x207)][_0x40dea6(0x3b0)]||_0x40dea6(0x245)],_0x39327e=_0x2c29b0[_0x40dea6(0x207)][_0x40dea6(0x302)]||'',_0x594c6a=await getWeatherContext(_0x2c29b0),_0x4faac0=await getCalendarContext(_0x2c29b0),_0x2500dc=_0x40dea6(0x25c)+_0x31eaa1+'.\x20KONTEXT:\x20'+_0x39327e+_0x40dea6(0x39d)+_0x594c6a+'\x20'+_0x4faac0+_0x40dea6(0x38d)+_0xd9b925+'/100,\x20Aktivit√§t\x20seit\x2004:00:\x20'+JSON[_0x40dea6(0x392)](_0x26f1be['slice'](0x0,0xa))+_0x40dea6(0x22c);try{const _0x30db21=await _0x2c29b0['geminiModel'][_0x40dea6(0x2d3)](_0x2500dc),_0x19c92b='üåÖ\x20Daily\x20Briefing:\x0a'+_0x30db21['response'][_0x40dea6(0x20d)]()[_0x40dea6(0x232)]();sendNotification(_0x2c29b0,_0x19c92b),_0x2c29b0[_0x40dea6(0x2cb)][_0x40dea6(0x385)](_0x40dea6(0x3c3));}catch(_0x4c5f0e){_0x2c29b0['log']['error'](_0x40dea6(0x2c0)+_0x4c5f0e[_0x40dea6(0x1c9)]);}}async function scanForDevices(_0x399fc2,_0x5e7567){const _0x53ab8c=a0_0x2d519f;_0x399fc2[_0x53ab8c(0x2cb)]['info'](_0x53ab8c(0x2a0));const _0x33753b=[],_0x2d1d26=await _0x399fc2['getForeignObjectsAsync']('*'),_0x3f11fc=await _0x399fc2['getForeignObjectsAsync'](_0x53ab8c(0x22e),_0x53ab8c(0x1dd)),_0x3f8ced=await _0x399fc2[_0x53ab8c(0x229)](_0x53ab8c(0x374),_0x53ab8c(0x1dd)),_0x5de132={};if(_0x3f11fc)for(const _0x34c89e in _0x3f11fc){const _0x5b8dda=_0x3f11fc[_0x34c89e][_0x53ab8c(0x3bb)][_0x53ab8c(0x397)]||[];_0x5b8dda[_0x53ab8c(0x2c1)](_0x35c4c3=>{const _0x2ba05c=_0x53ab8c;if(!_0x5de132[_0x35c4c3])_0x5de132[_0x35c4c3]=[];_0x5de132[_0x35c4c3][_0x2ba05c(0x216)](_0x34c89e);});}const _0x5a1b8e={};if(_0x3f8ced)for(const _0x6df94b in _0x3f8ced){const _0xcd9cb2=_0x3f8ced[_0x6df94b][_0x53ab8c(0x3bb)]['members']||[],_0x1c0327=typeof _0x3f8ced[_0x6df94b][_0x53ab8c(0x3bb)][_0x53ab8c(0x3dd)]==='object'?_0x3f8ced[_0x6df94b][_0x53ab8c(0x3bb)][_0x53ab8c(0x3dd)]['de']:_0x3f8ced[_0x6df94b][_0x53ab8c(0x3bb)][_0x53ab8c(0x3dd)];_0xcd9cb2['forEach'](_0x840936=>_0x5a1b8e[_0x840936]=_0x1c0327);}const _0x4a2cff=_0x5e7567[_0x53ab8c(0x2dd)]||[],_0x1181f7=_0x5e7567['motion']!==![],_0x43a2cb=_0x5e7567[_0x53ab8c(0x351)]!==![],_0xe09c2e=_0x5e7567['lights']!==![],_0x411130=_0x5e7567[_0x53ab8c(0x215)]===!![],_0xc3b3ed=_0x5e7567['weather']===!![];for(const _0x3631b3 in _0x2d1d26){const _0x254bc5=_0x2d1d26[_0x3631b3];if(_0x254bc5[_0x53ab8c(0x2c6)]!=='state'||!_0x254bc5[_0x53ab8c(0x3bb)])continue;if(ADAPTER_BLACKLIST[_0x53ab8c(0x2d5)](_0x20775b=>_0x3631b3['startsWith'](_0x20775b))&&!_0xc3b3ed)continue;const _0x170a36=(_0x254bc5[_0x53ab8c(0x3bb)][_0x53ab8c(0x32d)]||'')['toLowerCase']();let _0xd23b6a=(typeof _0x254bc5[_0x53ab8c(0x3bb)][_0x53ab8c(0x3dd)]===_0x53ab8c(0x233)?_0x254bc5['common'][_0x53ab8c(0x3dd)]['de']:_0x254bc5[_0x53ab8c(0x3bb)][_0x53ab8c(0x3dd)])||_0x3631b3;const _0x817377=_0xd23b6a[_0x53ab8c(0x320)]();let _0x551b8b=![],_0x23eaa5=![];if(_0x4a2cff[_0x53ab8c(0x224)]>0x0){const _0xc12562=_0x5de132[_0x3631b3]||[],_0x5a68fa=_0x3631b3['split']('.')[_0x53ab8c(0x1f4)](0x0,-0x1)[_0x53ab8c(0x3d8)]('.'),_0x2a6f5b=_0x5de132[_0x5a68fa]||[];(_0xc12562[_0x53ab8c(0x2d5)](_0x4ec86a=>_0x4a2cff['includes'](_0x4ec86a))||_0x2a6f5b[_0x53ab8c(0x2d5)](_0x268718=>_0x4a2cff[_0x53ab8c(0x391)](_0x268718)))&&(_0x551b8b=!![],_0x23eaa5=!![]);}if(!_0x551b8b&&!_0xc3b3ed){if(HARD_IGNORE_TERMS[_0x53ab8c(0x2d5)](_0xb7c2c5=>_0x3631b3['includes'](_0xb7c2c5)||_0x817377[_0x53ab8c(0x391)](_0xb7c2c5[_0x53ab8c(0x320)]())))continue;}if(BAD_NAMES[_0x53ab8c(0x2d5)](_0x13bd7b=>_0x817377===_0x13bd7b||_0x817377[_0x53ab8c(0x39e)]('.'+_0x13bd7b))){const _0xebdc8d=_0x3631b3['split']('.');if(_0xebdc8d[_0x53ab8c(0x224)]>0x2){const _0x1f8321=_0xebdc8d[_0x53ab8c(0x1f4)](0x0,-0x1)[_0x53ab8c(0x3d8)]('.'),_0x52d2d5=_0x2d1d26[_0x1f8321];if(_0x52d2d5&&_0x52d2d5[_0x53ab8c(0x3bb)]&&_0x52d2d5[_0x53ab8c(0x3bb)][_0x53ab8c(0x3dd)]){const _0x21f269=typeof _0x52d2d5[_0x53ab8c(0x3bb)]['name']===_0x53ab8c(0x233)?_0x52d2d5[_0x53ab8c(0x3bb)]['name']['de']:_0x52d2d5[_0x53ab8c(0x3bb)][_0x53ab8c(0x3dd)];_0x21f269&&!_0xd23b6a['includes'](_0x21f269)&&(_0xd23b6a=_0x21f269+'\x20'+_0xd23b6a);}}}let _0x1c6e19='';if(_0x1181f7&&(_0x170a36['includes'](_0x53ab8c(0x256))||_0x170a36[_0x53ab8c(0x391)](_0x53ab8c(0x345))||_0x817377[_0x53ab8c(0x391)](_0x53ab8c(0x236))||_0x817377['includes']('pr√§senz')))_0x1c6e19=_0x53ab8c(0x256);else{if(!_0x1c6e19&&_0x43a2cb&&(_0x170a36[_0x53ab8c(0x391)](_0x53ab8c(0x20a))||_0x170a36[_0x53ab8c(0x391)](_0x53ab8c(0x389))||_0x170a36[_0x53ab8c(0x391)](_0x53ab8c(0x287))||_0x170a36[_0x53ab8c(0x391)](_0x53ab8c(0x2f1))||_0x170a36['includes'](_0x53ab8c(0x357))||_0x817377[_0x53ab8c(0x391)](_0x53ab8c(0x37b))||_0x817377['includes'](_0x53ab8c(0x292))||_0x817377['includes'](_0x53ab8c(0x3c9))))_0x1c6e19=_0x53ab8c(0x20a);else{if(!_0x1c6e19&&_0xe09c2e&&(_0x170a36[_0x53ab8c(0x391)](_0x53ab8c(0x394))||_0x170a36['includes'](_0x53ab8c(0x212))||_0x170a36['includes']('dimmer')||_0x817377['includes']('licht')||_0x817377[_0x53ab8c(0x391)](_0x53ab8c(0x343))||_0x817377[_0x53ab8c(0x391)](_0x53ab8c(0x2e2)))){if(_0x254bc5['common'][_0x53ab8c(0x1f8)]||_0x170a36['includes'](_0x53ab8c(0x29b)))_0x1c6e19=_0x53ab8c(0x394);}else{if(!_0x1c6e19&&_0x411130&&(_0x170a36[_0x53ab8c(0x391)](_0x53ab8c(0x215))||_0x170a36[_0x53ab8c(0x391)](_0x53ab8c(0x3b3))||_0x170a36[_0x53ab8c(0x391)](_0x53ab8c(0x33d))||_0x817377[_0x53ab8c(0x391)](_0x53ab8c(0x20f))||_0x817377[_0x53ab8c(0x391)](_0x53ab8c(0x3a2))||_0x817377[_0x53ab8c(0x391)]('heizung')))_0x1c6e19='temperature';else{if(!_0x1c6e19&&_0x23eaa5)_0x1c6e19='custom';}}}}if(_0x1c6e19){let _0x3687ec=_0x5a1b8e[_0x3631b3]||'';if(!_0x3687ec){let _0x5ed057=_0x3631b3;for(let _0x1b9302=0x0;_0x1b9302<0x3;_0x1b9302++){const _0x3b1bd4=_0x5ed057[_0x53ab8c(0x3d3)]('.');if(_0x3b1bd4===-0x1)break;_0x5ed057=_0x5ed057[_0x53ab8c(0x24f)](0x0,_0x3b1bd4);if(_0x5a1b8e[_0x5ed057]){_0x3687ec=_0x5a1b8e[_0x5ed057];break;}}}_0x33753b[_0x53ab8c(0x216)]({'id':_0x3631b3,'name':_0xd23b6a,'location':_0x3687ec,'type':_0x1c6e19,'logDuplicates':_0x1c6e19===_0x53ab8c(0x256),'isExit':![],'_score':_0x3687ec?0x50:_0x1c6e19===_0x53ab8c(0x3bc)?0x5a:0x28});}}return _0x33753b['sort']((_0x4e31e5,_0x335984)=>_0x335984[_0x53ab8c(0x303)]-_0x4e31e5[_0x53ab8c(0x303)]),_0x33753b;}async function executeAutomationAction(_0x5adc6c){const _0x550d2c=a0_0x2d519f;try{const _0x201523=await _0x5adc6c['getStateAsync']('analysis.automation.targetId'),_0x369507=await _0x5adc6c['getStateAsync'](_0x550d2c(0x29f));if(_0x201523&&_0x201523['val']&&_0x369507){const _0x5a260c=_0x201523[_0x550d2c(0x33a)];let _0x365d88=_0x369507[_0x550d2c(0x33a)];try{_0x365d88=JSON[_0x550d2c(0x305)](_0x365d88);}catch(_0x5024b8){}_0x5adc6c[_0x550d2c(0x2cb)]['info'](_0x550d2c(0x1d6)+_0x5a260c+'\x20=\x20'+_0x365d88),await _0x5adc6c[_0x550d2c(0x3db)](_0x5a260c,_0x365d88);}else _0x5adc6c[_0x550d2c(0x2cb)][_0x550d2c(0x344)](_0x550d2c(0x39a));}catch(_0x5dd8f5){_0x5adc6c[_0x550d2c(0x2cb)]['error'](_0x550d2c(0x2d4)+_0x5dd8f5['message']);}}function tryParse(_0x131d9e){const _0xb60fb7=a0_0x2d519f;try{return JSON[_0xb60fb7(0x305)](_0x131d9e);}catch(_0x2b824f){return null;}}async function recordSequence(_0x342dac,_0x36d90b){const _0x46afe2=a0_0x2d519f,_0x48db9e=(_0x36d90b[_0x46afe2(0x2c6)]||'')[_0x46afe2(0x320)](),_0x4eb26e=[_0x46afe2(0x256),_0x46afe2(0x236),_0x46afe2(0x2b7),_0x46afe2(0x31d),_0x46afe2(0x345),_0x46afe2(0x20a),_0x46afe2(0x292),'window','fenster',_0x46afe2(0x38a),'kontakt',_0x46afe2(0x394),_0x46afe2(0x2d0),_0x46afe2(0x212),_0x46afe2(0x2e2),'dimmer','lampe'];if(!_0x4eb26e[_0x46afe2(0x2d5)](_0x161ec5=>_0x48db9e['includes'](_0x161ec5))){_0x342dac[_0x46afe2(0x2cb)][_0x46afe2(0x1ed)]('[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20'+_0x36d90b['id']+_0x46afe2(0x337)+_0x36d90b[_0x46afe2(0x2c6)]+_0x46afe2(0x2e1));return;}if(!_0x36d90b['value']){_0x342dac['log'][_0x46afe2(0x1ed)](_0x46afe2(0x37f)+_0x36d90b['id']+_0x46afe2(0x1f9)+_0x36d90b['value']+')');return;}_0x342dac[_0x46afe2(0x2cb)]['debug'](_0x46afe2(0x28f)+_0x36d90b['id']+'\x20('+_0x36d90b[_0x46afe2(0x209)]+')');if(sequenceTimer)clearTimeout(sequenceTimer);const _0xe666f1={'loc':_0x36d90b[_0x46afe2(0x209)]||_0x46afe2(0x2e3),'id':_0x36d90b['id'],'ts':Date[_0x46afe2(0x214)]()};activeSequence[_0x46afe2(0x216)](_0xe666f1),_0x342dac[_0x46afe2(0x2cb)][_0x46afe2(0x1ed)](_0x46afe2(0x26f)+_0xe666f1[_0x46afe2(0x31e)]+_0x46afe2(0x334)+activeSequence['length']+')'),sequenceTimer=setTimeout(async()=>{const _0x5a89e3=_0x46afe2;activeSequence[_0x5a89e3(0x224)]>0x1?await saveCompletedSequence(_0x342dac):(_0x342dac[_0x5a89e3(0x2cb)][_0x5a89e3(0x1ed)]('[RECORDER]\x20Discarding\x20short\x20sequence\x20(Length:\x20'+activeSequence[_0x5a89e3(0x224)]+')'),activeSequence=[]);},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x2503be){const _0x32e43a=a0_0x2d519f;try{_0x2503be[_0x32e43a(0x2cb)]['info'](_0x32e43a(0x316)+activeSequence[_0x32e43a(0x224)]+_0x32e43a(0x270));const _0x1c30c5=await _0x2503be[_0x32e43a(0x2ea)](_0x32e43a(0x271));let _0x7edbca=[];if(_0x1c30c5&&_0x1c30c5[_0x32e43a(0x33a)])try{_0x7edbca=JSON['parse'](_0x1c30c5['val']);}catch(_0x2f2d6c){}const _0x41db23=activeSequence[0x0]['ts'],_0x516522=activeSequence[_0x32e43a(0x2cd)](_0x42e226=>({'loc':_0x42e226['loc'],'t_delta':Math['round']((_0x42e226['ts']-_0x41db23)/0x3e8)})),_0x5971de={'timestamp':new Date(_0x41db23)[_0x32e43a(0x2ca)](),'steps':_0x516522,'duration':Math[_0x32e43a(0x295)]((activeSequence[activeSequence[_0x32e43a(0x224)]-0x1]['ts']-_0x41db23)/0x3e8),'daytime':new Date(_0x41db23)[_0x32e43a(0x26d)]()};_0x7edbca['push'](_0x5971de),_0x7edbca['length']>MAX_TRAINING_SET_SIZE&&_0x7edbca[_0x32e43a(0x24d)](),await _0x2503be[_0x32e43a(0x331)](_0x32e43a(0x271),{'val':JSON[_0x32e43a(0x392)](_0x7edbca),'ack':!![]}),activeSequence=[],sequenceTimer=null;}catch(_0x5f3d63){_0x2503be['log'][_0x32e43a(0x1ef)]('[RECORDER]\x20Error\x20saving\x20sequence:\x20'+_0x5f3d63[_0x32e43a(0x1c9)]);}}async function getOutsideTemperatureNumeric(_0x56e3af){const _0x3d294e=a0_0x2d519f;if(_0x56e3af['config'][_0x3d294e(0x36b)])try{const _0x3ecaa1=await _0x56e3af[_0x3d294e(0x364)](_0x56e3af[_0x3d294e(0x207)][_0x3d294e(0x36b)]);if(_0x3ecaa1&&_0x3ecaa1['val']!==undefined&&_0x3ecaa1['val']!==null){const _0x5ca6ec=parseFloat(_0x3ecaa1[_0x3d294e(0x33a)]);if(!isNaN(_0x5ca6ec))return _0x5ca6ec;}}catch(_0x51fbc0){_0x56e3af[_0x3d294e(0x2cb)][_0x3d294e(0x344)](_0x3d294e(0x3b8)+_0x56e3af[_0x3d294e(0x207)][_0x3d294e(0x36b)]+':\x20'+_0x51fbc0[_0x3d294e(0x1c9)]);}const _0x33cbf9=_0x56e3af[_0x3d294e(0x207)][_0x3d294e(0x27a)];if(!_0x56e3af[_0x3d294e(0x207)][_0x3d294e(0x289)]||!_0x33cbf9)return null;try{let _0x367fbc='';if(_0x33cbf9[_0x3d294e(0x391)](_0x3d294e(0x234)))_0x367fbc=_0x33cbf9+_0x3d294e(0x318);else{if(_0x33cbf9[_0x3d294e(0x391)]('daswetter'))_0x367fbc=_0x33cbf9+_0x3d294e(0x1d9);else{if(_0x33cbf9[_0x3d294e(0x391)](_0x3d294e(0x2af)))_0x367fbc=_0x33cbf9+_0x3d294e(0x1e3);else{if(_0x33cbf9['includes']('weatherunderground'))_0x367fbc=_0x33cbf9+_0x3d294e(0x250);}}}if(_0x367fbc){const _0x2abbda=await _0x56e3af[_0x3d294e(0x364)](_0x367fbc);if(_0x2abbda&&_0x2abbda[_0x3d294e(0x33a)]!==undefined&&_0x2abbda[_0x3d294e(0x33a)]!==null)return parseFloat(_0x2abbda[_0x3d294e(0x33a)]);}}catch(_0x5762f8){}return null;}async function recordThermodynamics(_0x564e49,_0x3f7f1a,_0x3f623b,_0x6e8f13){const _0x147794=a0_0x2d519f,_0x13f109=await getOutsideTemperatureNumeric(_0x564e49),_0x214d92=await _0x564e49[_0x147794(0x2ea)](_0x147794(0x227));let _0x7de34b=[];if(_0x214d92&&_0x214d92[_0x147794(0x33a)])try{_0x7de34b=JSON[_0x147794(0x305)](_0x214d92['val']);}catch(_0x4937ba){}_0x7de34b[_0x147794(0x216)]({'ts':Date[_0x147794(0x214)](),'room':_0x6e8f13||'Unknown','t_in':_0x3f623b,'t_out':_0x13f109});if(_0x7de34b[_0x147794(0x224)]>THERMO_LOG_SIZE)_0x7de34b[_0x147794(0x24d)]();await _0x564e49[_0x147794(0x331)](_0x147794(0x227),{'val':JSON[_0x147794(0x392)](_0x7de34b),'ack':!![]});}async function processSensorEvent(_0x1ba210,_0x40b34b,_0x11415c,_0x214c75){const _0x4e33e5=a0_0x2d519f;if(!_0x214c75)return;const _0x36421f=_0x11415c[_0x4e33e5(0x33a)],_0x3f7f41=Date[_0x4e33e5(0x214)]();_0x1ba210[_0x4e33e5(0x2cb)]['debug'](_0x4e33e5(0x329)+_0x40b34b+_0x4e33e5(0x31c)+_0x36421f);const _0x44bf9b=_0x1ba210[_0x4e33e5(0x213)][_0x40b34b];_0x1ba210[_0x4e33e5(0x213)][_0x40b34b]=_0x36421f;if(!_0x214c75[_0x4e33e5(0x2ab)]&&_0x44bf9b!=undefined&&_0x44bf9b==_0x36421f){_0x1ba210[_0x4e33e5(0x2cb)]['debug'](_0x4e33e5(0x297)+_0x214c75[_0x4e33e5(0x3dd)]+_0x4e33e5(0x264)+_0x36421f+')');return;}_0x1ba210[_0x4e33e5(0x223)]&&_0x214c75[_0x4e33e5(0x2c6)]===_0x4e33e5(0x215)&&recordThermodynamics(_0x1ba210,_0x40b34b,_0x36421f,_0x214c75[_0x4e33e5(0x209)]);const _0x4cf9dc={'timestamp':_0x3f7f41,'id':_0x40b34b,'name':_0x214c75['name'],'type':_0x214c75['type'],'location':_0x214c75[_0x4e33e5(0x209)],'value':_0x36421f};_0x1ba210[_0x4e33e5(0x37e)][_0x4e33e5(0x2b5)](_0x4cf9dc);if(_0x1ba210['eventHistory'][_0x4e33e5(0x224)]>HISTORY_MAX_SIZE)_0x1ba210[_0x4e33e5(0x37e)][_0x4e33e5(0x2db)]();await _0x1ba210[_0x4e33e5(0x331)](_0x4e33e5(0x371),{'val':JSON[_0x4e33e5(0x392)](_0x4cf9dc),'ack':!![]}),await _0x1ba210['setStateAsync'](_0x4e33e5(0x21f),{'val':JSON[_0x4e33e5(0x392)](_0x1ba210['eventHistory']),'ack':!![]});_0x1ba210['isProVersion']&&(_0x1ba210[_0x4e33e5(0x21c)][_0x4e33e5(0x216)](_0x4cf9dc),await saveRawEventLog(_0x1ba210),recordSequence(_0x1ba210,_0x4cf9dc));if(_0x214c75[_0x4e33e5(0x2b6)]&&_0x36421f===!![]){if(_0x1ba210[_0x4e33e5(0x2e6)]&&!_0x1ba210[_0x4e33e5(0x2f7)])_0x1ba210[_0x4e33e5(0x2cb)]['info'](_0x4e33e5(0x315)+_0x214c75[_0x4e33e5(0x3dd)]+_0x4e33e5(0x3a6)),startExitTimer(_0x1ba210);else!_0x1ba210['isPresent']&&(_0x1ba210[_0x4e33e5(0x2cb)]['info'](_0x4e33e5(0x37a)+_0x214c75[_0x4e33e5(0x3dd)]+'.\x20Welcome\x20home.'),await setPresence(_0x1ba210,!![]));}else _0x214c75['type']===_0x4e33e5(0x256)&&_0x36421f===!![]&&(_0x1ba210[_0x4e33e5(0x286)]&&(_0x1ba210[_0x4e33e5(0x2cb)][_0x4e33e5(0x385)](_0x4e33e5(0x2ce)),abortExitTimer(_0x1ba210)),!_0x1ba210[_0x4e33e5(0x2e6)]&&_0x1ba210['currentSystemMode']===SYSTEM_MODES[_0x4e33e5(0x241)]&&await setPresence(_0x1ba210,!![]));}async function runGeminiAnalysis(_0x586556,_0x93c989=''){const _0x28f5f3=a0_0x2d519f;if(!_0x586556['geminiModel'])return;if(_0x586556[_0x28f5f3(0x37e)][_0x28f5f3(0x224)]===0x0)return;const _0x262b24=_0x586556[_0x28f5f3(0x37e)][_0x28f5f3(0x1f4)](0x0,0xf),_0x1fb879=await getWeatherContext(_0x586556),_0x2c5418=_0x586556[_0x28f5f3(0x39f)],_0xb66492=PERSONA_MAPPING[_0x586556[_0x28f5f3(0x207)]['aiPersona']||'generic'],_0x4e9e68=_0x586556[_0x28f5f3(0x207)]['livingContext']||_0x28f5f3(0x274);let _0x26a842=![];try{const _0x3cae8b=await _0x586556['getStateAsync'](_0x28f5f3(0x23d));if(_0x3cae8b&&_0x3cae8b['val'])_0x26a842=!![];}catch(_0x42b61a){}const _0x13e32f=_0x28f5f3(0x361)+_0xb66492+_0x28f5f3(0x1df)+_0x4e9e68+_0x28f5f3(0x32a)+_0x2c5418+_0x28f5f3(0x222)+_0x1fb879+_0x28f5f3(0x3b9)+(_0x93c989||_0x28f5f3(0x25a))+_0x28f5f3(0x2c9)+JSON[_0x28f5f3(0x392)](_0x262b24)+_0x28f5f3(0x35b);try{const _0x15b0f2=await _0x586556[_0x28f5f3(0x2d1)][_0x28f5f3(0x2d3)](_0x13e32f),_0x26d391=_0x15b0f2['response'][_0x28f5f3(0x20d)]()[_0x28f5f3(0x20c)](/```json|```/g,'')[_0x28f5f3(0x232)](),_0x5e65c1=JSON['parse'](_0x26d391);await _0x586556[_0x28f5f3(0x331)](_0x28f5f3(0x1e9),{'val':JSON[_0x28f5f3(0x392)](_0x5e65c1),'ack':!![]});_0x5e65c1['summary']&&await _0x586556[_0x28f5f3(0x331)]('analysis.activitySummary',{'val':_0x5e65c1[_0x28f5f3(0x1f1)],'ack':!![]});const _0x803ab5={'timestamp':Date[_0x28f5f3(0x214)](),'id':Date[_0x28f5f3(0x214)]()['toString'](),'analysis':{'activity':{'summary':_0x5e65c1[_0x28f5f3(0x1f1)]||_0x28f5f3(0x341),'isAlert':_0x5e65c1['isAlert']||![],'alertReason':_0x5e65c1[_0x28f5f3(0x2e8)]},'comfort':{'automationProposal':_0x5e65c1['automationProposal']}}};await updateAnalysisHistory(_0x586556,_0x803ab5);const _0x348a35=_0x5e65c1['isAlert']||![];_0x348a35!==_0x586556['lastAlertState']&&(await _0x586556[_0x28f5f3(0x331)]('analysis.isAlert',{'val':_0x348a35,'ack':!![]}),_0x586556[_0x28f5f3(0x3cb)]=_0x348a35,_0x348a35&&(await _0x586556['setStateAsync'](_0x28f5f3(0x28d),{'val':_0x5e65c1[_0x28f5f3(0x2e8)],'ack':!![]}),sendNotification(_0x586556,_0x28f5f3(0x306)+_0x5e65c1[_0x28f5f3(0x2e8)],![],_0x5e65c1[_0x28f5f3(0x2a5)]))),_0x5e65c1['automationProposal']&&_0x5e65c1[_0x28f5f3(0x1ca)][_0x28f5f3(0x322)]&&_0x5e65c1['automationProposal']['targetId']&&(_0x586556[_0x28f5f3(0x2cb)][_0x28f5f3(0x385)](_0x28f5f3(0x317)+_0x5e65c1[_0x28f5f3(0x1ca)]['description']),await _0x586556[_0x28f5f3(0x331)](_0x28f5f3(0x2a2),{'val':!![],'ack':!![]}),await _0x586556[_0x28f5f3(0x331)](_0x28f5f3(0x354),{'val':_0x5e65c1['automationProposal'][_0x28f5f3(0x244)],'ack':!![]}),await _0x586556[_0x28f5f3(0x331)](_0x28f5f3(0x1f0),{'val':_0x5e65c1[_0x28f5f3(0x1ca)][_0x28f5f3(0x1cc)],'ack':!![]}),await _0x586556['setStateAsync'](_0x28f5f3(0x29f),{'val':JSON[_0x28f5f3(0x392)](_0x5e65c1['automationProposal']['targetValue']),'ack':!![]}),_0x26a842&&(_0x586556[_0x28f5f3(0x2cb)]['info']('ü§ñ\x20BUTLER\x20AUTO-APPLY:\x20Executing\x20'+_0x5e65c1[_0x28f5f3(0x1ca)]['targetId']+'...'),await executeAutomationAction(_0x586556)));}catch(_0x5b966e){_0x586556[_0x28f5f3(0x2cb)][_0x28f5f3(0x1ef)](_0x28f5f3(0x204)+_0x5b966e['message']);}}function installPythonDependencies(_0x456aa9){const _0x55a05d=a0_0x2d519f;if(_0x456aa9[_0x55a05d(0x30a)])return;_0x456aa9['dependencyInstallInProgress']=!![];const _0x1e2974=path[_0x55a05d(0x3d8)](__dirname,_0x55a05d(0x32f),_0x55a05d(0x243));_0x456aa9['log']['info'](_0x55a05d(0x350)+_0x1e2974+'...'),stopPythonService(_0x456aa9);const _0x45ddc6=_0x55a05d(0x33e)+_0x1e2974+'\x22\x20--break-system-packages';exec(_0x45ddc6,(_0x27a253,_0x5c9dbd,_0x511fc5)=>{const _0x2044c9=_0x55a05d;_0x456aa9['dependencyInstallInProgress']=![],_0x27a253?(_0x456aa9['log']['error']('‚ùå\x20AUTO-FIX\x20FAILED.\x20Please\x20run\x20manually:\x20sudo\x20'+_0x45ddc6),_0x456aa9[_0x2044c9(0x2cb)][_0x2044c9(0x1ef)](_0x2044c9(0x200)+(_0x511fc5||_0x27a253[_0x2044c9(0x1c9)]))):(_0x456aa9[_0x2044c9(0x2cb)][_0x2044c9(0x385)](_0x2044c9(0x1d5)),startPythonService(_0x456aa9));});}function sendToPython(_0x4c6cd5,_0x3c5914,_0x4788ff={}){const _0x434f03=a0_0x2d519f;if(!_0x4c6cd5[_0x434f03(0x3df)]||!_0x4c6cd5[_0x434f03(0x3df)][_0x434f03(0x34c)][_0x434f03(0x372)])return;const _0x3665cc=JSON[_0x434f03(0x392)]({'command':_0x3c5914,..._0x4788ff});try{_0x4c6cd5[_0x434f03(0x3df)][_0x434f03(0x34c)][_0x434f03(0x1f8)](_0x3665cc+'\x0a');}catch(_0x250b1c){_0x4c6cd5[_0x434f03(0x2cb)][_0x434f03(0x1ef)](_0x434f03(0x30f)+_0x250b1c[_0x434f03(0x1c9)]);}}function runPythonHealthCheck(_0x3d8b67){const _0x110d1c=a0_0x2d519f;if(!_0x3d8b67[_0x110d1c(0x2ae)]||_0x3d8b67[_0x110d1c(0x2ae)]['length']<0x2){_0x3d8b67[_0x110d1c(0x2cb)][_0x110d1c(0x385)](_0x110d1c(0x279));return;}const _0x56bc04=_0x3d8b67[_0x110d1c(0x2ae)]['map'](_0x3f6089=>{const _0xf33b0b=_0x110d1c,_0x40f6dc=(_0x3f6089['activityLevel']||'')[_0xf33b0b(0x320)]();return ACTIVITY_LEVEL_MAP[_0x40f6dc]||0x32;});_0x3d8b67[_0x110d1c(0x2cb)][_0x110d1c(0x385)](_0x110d1c(0x254)+_0x56bc04[_0x110d1c(0x224)]+_0x110d1c(0x277)),sendToPython(_0x3d8b67,_0x110d1c(0x284),{'values':_0x56bc04,'tag':_0x110d1c(0x2f0)});}function handlePythonResult(_0x229642,_0x18aa77){const _0x31ac1a=a0_0x2d519f;if(_0x18aa77[_0x31ac1a(0x2c6)]==='PONG')_0x229642[_0x31ac1a(0x2cb)][_0x31ac1a(0x1ed)]('üêç\x20Python\x20Pong\x20received!\x20Latency\x20check\x20passed.');else{if(_0x18aa77['type']===_0x31ac1a(0x30b)){const {tag:_0x28c6e7,diagnosis:_0x264248,change_percent:_0xa113d2}=_0x18aa77[_0x31ac1a(0x3a1)];_0x229642[_0x31ac1a(0x2cb)][_0x31ac1a(0x385)](_0x31ac1a(0x28c)+_0x28c6e7+_0x31ac1a(0x2b8)+_0x264248+'\x20('+_0xa113d2+'%)'),_0x229642[_0x31ac1a(0x331)](_0x31ac1a(0x2d2),{'val':_0x264248,'ack':!![]}),_0x229642['setStateAsync']('analysis.health.trendValue',{'val':_0xa113d2,'ack':!![]});}}}function startPythonService(_0x1b4616){const _0x5e885f=a0_0x2d519f;try{const _0x39fbf5=path[_0x5e885f(0x3d8)](__dirname,_0x5e885f(0x32f),_0x5e885f(0x2bc));_0x1b4616[_0x5e885f(0x2cb)][_0x5e885f(0x385)]('üêç\x20Starting\x20Python\x20Sidecar:\x20'+_0x39fbf5),_0x1b4616['pythonProcess']=spawn(_0x5e885f(0x268),[_0x39fbf5]),_0x1b4616[_0x5e885f(0x3df)][_0x5e885f(0x28e)]['on'](_0x5e885f(0x276),_0x203019=>{const _0xc69d68=_0x5e885f,_0x5465e7=_0x203019[_0xc69d68(0x309)]()['split']('\x0a');_0x5465e7[_0xc69d68(0x2c1)](_0x558a0a=>{const _0x590090=_0xc69d68,_0x5a02af=_0x558a0a['trim']();if(!_0x5a02af)return;if(_0x5a02af[_0x590090(0x299)](_0x590090(0x261)))_0x1b4616[_0x590090(0x2cb)]['debug'](_0x590090(0x3c6)+_0x5a02af[_0x590090(0x24f)](0x5)[_0x590090(0x232)]());else{if(_0x5a02af[_0x590090(0x299)](_0x590090(0x2f3)))try{const _0x393fad=JSON[_0x590090(0x305)](_0x5a02af['substring'](0x8)['trim']());handlePythonResult(_0x1b4616,_0x393fad);}catch(_0x4a2394){_0x1b4616[_0x590090(0x2cb)][_0x590090(0x344)](_0x590090(0x38b)+_0x5a02af);}}(_0x5a02af[_0x590090(0x391)](_0x590090(0x206))||_0x5a02af['includes'](_0x590090(0x25e)))&&(_0x1b4616[_0x590090(0x2cb)][_0x590090(0x344)](_0x590090(0x304)),installPythonDependencies(_0x1b4616));});}),_0x1b4616[_0x5e885f(0x3df)][_0x5e885f(0x326)]['on'](_0x5e885f(0x276),_0x4fd1b5=>{const _0x19d5f8=_0x5e885f,_0x43e35e=_0x4fd1b5[_0x19d5f8(0x309)]()['trim']();_0x1b4616[_0x19d5f8(0x2cb)]['error'](_0x19d5f8(0x1ce)+_0x43e35e);}),_0x1b4616[_0x5e885f(0x3df)]['on'](_0x5e885f(0x377),_0x224039=>{const _0x466650=_0x5e885f;_0x1b4616[_0x466650(0x2cb)]['info'](_0x466650(0x3ce)+_0x224039),_0x1b4616['pythonProcess']=null;}),_0x1b4616[_0x5e885f(0x3df)]['on'](_0x5e885f(0x1ef),_0x2a7d0d=>{const _0x3d96b6=_0x5e885f;_0x1b4616[_0x3d96b6(0x2cb)][_0x3d96b6(0x344)](_0x3d96b6(0x238)+_0x2a7d0d[_0x3d96b6(0x1c9)]);});}catch(_0x43bc28){_0x1b4616[_0x5e885f(0x2cb)][_0x5e885f(0x1ef)]('Error\x20launching\x20Python\x20service:\x20'+_0x43bc28[_0x5e885f(0x1c9)]);}}function stopPythonService(_0x432a59){const _0x4d5aa2=a0_0x2d519f;if(_0x432a59[_0x4d5aa2(0x3df)]){_0x432a59[_0x4d5aa2(0x2cb)][_0x4d5aa2(0x385)](_0x4d5aa2(0x319));try{_0x432a59[_0x4d5aa2(0x3df)][_0x4d5aa2(0x3cc)]();}catch(_0x2a1c33){_0x432a59[_0x4d5aa2(0x2cb)][_0x4d5aa2(0x344)](_0x4d5aa2(0x28b)+_0x2a1c33['message']);}_0x432a59['pythonProcess']=null;}}class CogniLiving extends utils['Adapter']{constructor(_0x150391){const _0x200bb4=a0_0x2d519f;super({..._0x150391,'name':_0x200bb4(0x340)}),this[_0x200bb4(0x37e)]=[],this['analysisHistory']=[],this[_0x200bb4(0x339)]=[],this[_0x200bb4(0x21c)]=[],this[_0x200bb4(0x2ae)]=[],this[_0x200bb4(0x213)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x200bb4(0x2e6)]=!![],this[_0x200bb4(0x286)]=null,this['exitGraceTimer']=null,this[_0x200bb4(0x2f7)]=![],this[_0x200bb4(0x381)]=null,this['geminiModel']=null,this['currentSystemMode']=SYSTEM_MODES[_0x200bb4(0x241)],this[_0x200bb4(0x223)]=![],this['lastAlertState']=![],this['systemUUID']=_0x200bb4(0x3cd),this[_0x200bb4(0x1fb)]=null,this[_0x200bb4(0x3ba)]=null,this[_0x200bb4(0x2fc)]=null,this[_0x200bb4(0x24a)]=null,this[_0x200bb4(0x27b)]=null,this['pythonProcess']=null,this[_0x200bb4(0x30a)]=![],this['on'](_0x200bb4(0x1f7),this[_0x200bb4(0x21e)][_0x200bb4(0x396)](this)),this['on'](_0x200bb4(0x1fa),this[_0x200bb4(0x203)][_0x200bb4(0x396)](this)),this['on'](_0x200bb4(0x2c8),this[_0x200bb4(0x25f)][_0x200bb4(0x396)](this)),this['on'](_0x200bb4(0x1c9),this[_0x200bb4(0x383)][_0x200bb4(0x396)](this));}async[a0_0x2d519f(0x21e)](){const _0x1612ad=a0_0x2d519f;this[_0x1612ad(0x2cb)]['info']('cogni-living\x20adapter\x20starting\x20(v'+this[_0x1612ad(0x342)]+_0x1612ad(0x38c)),await initZombies(this),this[_0x1612ad(0x207)][_0x1612ad(0x2c4)]=this[_0x1612ad(0x207)][_0x1612ad(0x2c4)]||'';try{this['isProVersion']=await checkLicense(this,this[_0x1612ad(0x207)][_0x1612ad(0x2c4)]);}catch(_0x64a15f){}this[_0x1612ad(0x2cb)][_0x1612ad(0x385)](_0x1612ad(0x294)+!!this['config'][_0x1612ad(0x2c4)]+'\x20|\x20Status:\x20'+(this[_0x1612ad(0x223)]?_0x1612ad(0x219):_0x1612ad(0x3a0)));if(!this[_0x1612ad(0x207)][_0x1612ad(0x362)]||this[_0x1612ad(0x207)][_0x1612ad(0x362)]<0.1)this[_0x1612ad(0x207)]['inactivityThresholdHours']=0xc;await initHistory(this),await initSystemConfig(this);if(this[_0x1612ad(0x207)]['geminiApiKey'])try{this[_0x1612ad(0x381)]=new GoogleGenerativeAI(this[_0x1612ad(0x207)]['geminiApiKey']),this[_0x1612ad(0x2d1)]=this['genAI'][_0x1612ad(0x1e8)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x1612ad(0x2ec)}}),this[_0x1612ad(0x2cb)]['info']('Gemini\x20AI\x20initialized.');}catch(_0x22f6c0){this['log'][_0x1612ad(0x1ef)](_0x1612ad(0x2e4)+_0x22f6c0['message']);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this[_0x1612ad(0x255)]('analysis.trigger'),this[_0x1612ad(0x255)](LTM_DP_TRIGGER_DIGEST),this[_0x1612ad(0x255)](_0x1612ad(0x2d8)),this[_0x1612ad(0x255)](_0x1612ad(0x269)),this['subscribeStates'](_0x1612ad(0x2f8)),this[_0x1612ad(0x255)](_0x1612ad(0x23d)),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this),setTimeout(()=>checkWifiPresence(this),0x1388);if(this[_0x1612ad(0x1fb)])clearInterval(this[_0x1612ad(0x1fb)]);const _0x1719b2=this[_0x1612ad(0x207)][_0x1612ad(0x290)]||0xf;_0x1719b2>0x0&&(this[_0x1612ad(0x2cb)][_0x1612ad(0x385)]('Starting\x20Autopilot\x20('+_0x1719b2+_0x1612ad(0x38f)),this[_0x1612ad(0x1fb)]=setInterval(()=>{runAutopilot(this);},_0x1719b2*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this),startPythonService(this),setTimeout(()=>{const _0x3a69c3=_0x1612ad;this[_0x3a69c3(0x3df)]&&runPythonHealthCheck(this);},0x1388);}[a0_0x2d519f(0x25f)](_0x51c0f2){const _0x741f1=a0_0x2d519f;if(this[_0x741f1(0x1fb)])clearInterval(this['analysisTimer']);if(this[_0x741f1(0x24a)])clearInterval(this[_0x741f1(0x24a)]);if(this[_0x741f1(0x3ba)])this[_0x741f1(0x3ba)][_0x741f1(0x3aa)]();if(this[_0x741f1(0x2fc)])this[_0x741f1(0x2fc)]['cancel']();if(this[_0x741f1(0x27b)])this['briefingJob'][_0x741f1(0x3aa)]();if(this[_0x741f1(0x286)])clearTimeout(this['exitTimer']);if(this[_0x741f1(0x307)])clearTimeout(this['exitGraceTimer']);stopPythonService(this),_0x51c0f2();}async[a0_0x2d519f(0x203)](_0x5f57e5,_0x4c5259){const _0x319fdd=a0_0x2d519f;if(!_0x4c5259)return;if(_0x5f57e5[_0x319fdd(0x391)]('telegram')&&_0x5f57e5[_0x319fdd(0x39e)](_0x319fdd(0x36c))&&_0x4c5259['val']){await handleTelegramResponse(this,_0x4c5259[_0x319fdd(0x33a)]);return;}if(_0x5f57e5===this[_0x319fdd(0x3c2)]+'.'+SYSTEM_DP_MODE){_0x4c5259['val']&&Object[_0x319fdd(0x278)](SYSTEM_MODES)[_0x319fdd(0x391)](_0x4c5259['val'])&&(this[_0x319fdd(0x39f)]=_0x4c5259[_0x319fdd(0x33a)],_0x4c5259[_0x319fdd(0x33a)]===SYSTEM_MODES[_0x319fdd(0x35a)]?await setPresence(this,![]):await setPresence(this,!![]));if(!_0x4c5259[_0x319fdd(0x399)])this[_0x319fdd(0x2c7)](_0x5f57e5,{'val':this[_0x319fdd(0x39f)],'ack':!![]});return;}if(!_0x4c5259[_0x319fdd(0x399)]){_0x5f57e5[_0x319fdd(0x391)]('analysis.trigger')&&_0x4c5259[_0x319fdd(0x33a)]&&(this[_0x319fdd(0x2c7)](_0x5f57e5,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x5f57e5[_0x319fdd(0x391)](_0x319fdd(0x359))&&_0x4c5259[_0x319fdd(0x33a)]){this[_0x319fdd(0x2c7)](_0x5f57e5,{'val':![],'ack':!![]});if(this[_0x319fdd(0x223)])createDailyDigest(this);}_0x5f57e5[_0x319fdd(0x391)](_0x319fdd(0x22d))&&_0x4c5259[_0x319fdd(0x33a)]&&(this[_0x319fdd(0x2c7)](_0x5f57e5,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x5f57e5[_0x319fdd(0x391)]('automation.triggerAction')&&_0x4c5259[_0x319fdd(0x33a)]&&(this[_0x319fdd(0x2c7)](_0x5f57e5,{'val':![],'ack':!![]}),executeAutomationAction(this));return;}if(this[_0x319fdd(0x207)][_0x319fdd(0x249)]&&this['config'][_0x319fdd(0x249)][_0x319fdd(0x391)](_0x5f57e5)){await checkWifiPresence(this);return;}const _0x11c4ca=(this[_0x319fdd(0x207)][_0x319fdd(0x390)]||[])[_0x319fdd(0x293)](_0x27b906=>_0x27b906['id']===_0x5f57e5);if(_0x11c4ca)processSensorEvent(this,_0x5f57e5,_0x4c5259,_0x11c4ca);}async[a0_0x2d519f(0x383)](_0x5c41f8){const _0xefe83d=a0_0x2d519f;if(typeof _0x5c41f8===_0xefe83d(0x233)&&_0x5c41f8[_0xefe83d(0x1c9)])try{if(_0x5c41f8[_0xefe83d(0x2bb)]===_0xefe83d(0x2aa)){const _0x4d0045=_0x5c41f8['message'][_0xefe83d(0x3d5)]||this[_0xefe83d(0x207)][_0xefe83d(0x257)];if(!_0x4d0045)return this['sendTo'](_0x5c41f8[_0xefe83d(0x3b7)],_0x5c41f8[_0xefe83d(0x2bb)],{'success':![],'message':'Kein\x20API\x20Key\x20eingegeben.'},_0x5c41f8[_0xefe83d(0x26b)]);try{const _0x77c142=new GoogleGenerativeAI(_0x4d0045),_0x46e839=_0x77c142[_0xefe83d(0x1e8)]({'model':GEMINI_MODEL}),_0x554fde=await _0x46e839[_0xefe83d(0x2d3)](_0xefe83d(0x1e1)),_0x455e0e=await _0x554fde[_0xefe83d(0x370)],_0x24a7c7=_0x455e0e[_0xefe83d(0x20d)]();this[_0xefe83d(0x24c)](_0x5c41f8[_0xefe83d(0x3b7)],_0x5c41f8[_0xefe83d(0x2bb)],{'success':!![],'message':_0xefe83d(0x3b6)+_0x24a7c7[_0xefe83d(0x24f)](0x0,0x14)+'...'},_0x5c41f8[_0xefe83d(0x26b)]);}catch(_0x215345){this[_0xefe83d(0x24c)](_0x5c41f8[_0xefe83d(0x3b7)],_0x5c41f8[_0xefe83d(0x2bb)],{'success':![],'message':_0xefe83d(0x313)+_0x215345[_0xefe83d(0x1c9)]},_0x5c41f8[_0xefe83d(0x26b)]);}}else{if(_0x5c41f8[_0xefe83d(0x2bb)]===_0xefe83d(0x32c)){const _0x22a5e5=await getWeatherContext(this),_0x26e850=await getCalendarContext(this);this[_0xefe83d(0x24c)](_0x5c41f8[_0xefe83d(0x3b7)],_0x5c41f8[_0xefe83d(0x2bb)],{'success':!![],'weather':_0x22a5e5,'calendar':_0x26e850},_0x5c41f8['callback']);}else{if(_0x5c41f8[_0xefe83d(0x2bb)]===_0xefe83d(0x2b1)){}else{if(_0x5c41f8['command']===_0xefe83d(0x335)){if(!this[_0xefe83d(0x223)])return this[_0xefe83d(0x24c)](_0x5c41f8[_0xefe83d(0x3b7)],_0x5c41f8['command'],{'success':![],'isPro':![]},_0x5c41f8[_0xefe83d(0x26b)]);let _0x22e25c={'status':'N/A','details':'','lastCheck':0x0};try{_0x22e25c[_0xefe83d(0x275)]=(await this[_0xefe83d(0x2ea)](LTM_DP_DRIFT_STATUS))[_0xefe83d(0x33a)],_0x22e25c[_0xefe83d(0x30c)]=(await this[_0xefe83d(0x2ea)](LTM_DP_DRIFT_DETAILS))[_0xefe83d(0x33a)],_0x22e25c[_0xefe83d(0x2a1)]=(await this[_0xefe83d(0x2ea)](LTM_DP_DRIFT_LAST_CHECK))[_0xefe83d(0x33a)];}catch(_0x35692a){}const _0x395d50=this[_0xefe83d(0x378)]||[];this[_0xefe83d(0x24c)](_0x5c41f8[_0xefe83d(0x3b7)],_0x5c41f8[_0xefe83d(0x2bb)],{'success':!![],'isPro':!![],'dailyDigests':this[_0xefe83d(0x2ae)],'driftAnalysis':_0x22e25c,'analysisHistory':_0x395d50},_0x5c41f8[_0xefe83d(0x26b)]);}else{if(_0x5c41f8[_0xefe83d(0x2bb)]===_0xefe83d(0x2a4)){const _0x42d50a=this[_0xefe83d(0x2ae)]['length'],_0x34c361=new Date(),_0x119052=new Date(_0x34c361[_0xefe83d(0x3c8)](),_0x34c361[_0xefe83d(0x3cf)](),_0x34c361[_0xefe83d(0x382)]())[_0xefe83d(0x1e6)](),_0x2e79ef=this[_0xefe83d(0x21c)][_0xefe83d(0x367)](_0x18887a=>new Date(_0x18887a[_0xefe83d(0x283)])[_0xefe83d(0x1e6)]()>_0x119052)[_0xefe83d(0x224)],_0x3346dd=new Array(0x18)['fill'](0x0);this['rawEventLog']['forEach'](_0xe6f09=>{const _0x413367=_0xefe83d,_0xbb9fe4=new Date(_0xe6f09[_0x413367(0x283)]);if(_0xbb9fe4['getTime']()>_0x119052)_0x3346dd[_0xbb9fe4['getHours']()]++;});let _0x443391={'status':_0xefe83d(0x2da)};try{_0x443391['status']=(await this[_0xefe83d(0x2ea)](LTM_DP_DRIFT_STATUS))[_0xefe83d(0x33a)];}catch(_0x587d05){}let _0x34a3e8='';try{const _0x5852b4=await this[_0xefe83d(0x2ea)]('system.presenceWho');_0x34a3e8=_0x5852b4?_0x5852b4[_0xefe83d(0x33a)]:'';}catch(_0x5d3ea5){}let _0x4034dd=null;!this[_0xefe83d(0x2d1)]&&(_0x4034dd=this[_0xefe83d(0x207)][_0xefe83d(0x257)]?_0xefe83d(0x2b4):'Kein\x20API\x20Key!');let _0xa14ba8={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x505880=await this[_0xefe83d(0x2ea)](_0xefe83d(0x2a2)),_0x1b82f6=await this[_0xefe83d(0x2ea)](_0xefe83d(0x354)),_0x4192eb=await this[_0xefe83d(0x2ea)]('analysis.automation.targetId'),_0x42149b=await this[_0xefe83d(0x2ea)](_0xefe83d(0x29f)),_0x12e5c3=await this[_0xefe83d(0x2ea)](_0xefe83d(0x23d));_0x505880&&_0x505880[_0xefe83d(0x33a)]&&(_0xa14ba8[_0xefe83d(0x322)]=!![],_0xa14ba8[_0xefe83d(0x244)]=_0x1b82f6?_0x1b82f6[_0xefe83d(0x33a)]:'',_0xa14ba8['targetId']=_0x4192eb?_0x4192eb['val']:'',_0xa14ba8['targetValue']=_0x42149b?_0x42149b[_0xefe83d(0x33a)]:''),_0xa14ba8[_0xefe83d(0x21a)]=_0x12e5c3?!!_0x12e5c3[_0xefe83d(0x33a)]:![];}catch(_0x1347f0){}this[_0xefe83d(0x24c)](_0x5c41f8[_0xefe83d(0x3b7)],_0x5c41f8[_0xefe83d(0x2bb)],{'success':!![],'eventHistory':this[_0xefe83d(0x37e)][_0xefe83d(0x1f4)](0x0,0xf),'stats':{'digestCount':_0x42d50a,'eventCountToday':_0x2e79ef,'hourlyActivity':_0x3346dd,'driftStatus':_0x443391['status'],'isPresent':this[_0xefe83d(0x2e6)],'presenceWho':_0x34a3e8,'minDays':this[_0xefe83d(0x207)][_0xefe83d(0x312)]||0x7,'stbDays':this[_0xefe83d(0x207)]['ltmStbWindowDays']||0xe,'ltbDays':this['config'][_0xefe83d(0x201)]||0x3c,'systemError':_0x4034dd},'automation':_0xa14ba8},_0x5c41f8[_0xefe83d(0x26b)]);}else{if(_0x5c41f8[_0xefe83d(0x2bb)]===_0xefe83d(0x30e)){const _0x4e2600=await this[_0xefe83d(0x229)](_0xefe83d(0x22e),_0xefe83d(0x1dd)),_0x4cec13=[];if(_0x4e2600)for(const _0xc32a93 in _0x4e2600){const _0xf68ba3=_0x4e2600[_0xc32a93],_0x58441d=(_0xf68ba3[_0xefe83d(0x3bb)]&&typeof _0xf68ba3[_0xefe83d(0x3bb)]['name']===_0xefe83d(0x233)?_0xf68ba3['common'][_0xefe83d(0x3dd)]['de']:_0xf68ba3['common'][_0xefe83d(0x3dd)])||_0xf68ba3[_0xefe83d(0x3bb)]['name'];_0x4cec13[_0xefe83d(0x216)]({'id':_0xc32a93,'name':_0x58441d});}this[_0xefe83d(0x24c)](_0x5c41f8[_0xefe83d(0x3b7)],_0x5c41f8[_0xefe83d(0x2bb)],{'success':!![],'enums':_0x4cec13},_0x5c41f8[_0xefe83d(0x26b)]);}else{if(_0x5c41f8[_0xefe83d(0x2bb)]==='scanDevices')try{const _0x3ecf08=await scanForDevices(this,_0x5c41f8[_0xefe83d(0x1c9)]||{});this[_0xefe83d(0x24c)](_0x5c41f8[_0xefe83d(0x3b7)],_0x5c41f8[_0xefe83d(0x2bb)],{'success':!![],'devices':_0x3ecf08},_0x5c41f8[_0xefe83d(0x26b)]);}catch(_0x35b779){this['sendTo'](_0x5c41f8[_0xefe83d(0x3b7)],_0x5c41f8[_0xefe83d(0x2bb)],{'success':![],'error':_0x35b779[_0xefe83d(0x1c9)]},_0x5c41f8[_0xefe83d(0x26b)]);}else{if(_0x5c41f8[_0xefe83d(0x2bb)]===_0xefe83d(0x3ad)){const _0x31e75b=_0x5c41f8[_0xefe83d(0x1c9)][_0xefe83d(0x2dc)];if(!_0x31e75b)return this[_0xefe83d(0x24c)](_0x5c41f8['from'],_0x5c41f8[_0xefe83d(0x2bb)],{'success':![],'error':_0xefe83d(0x258)},_0x5c41f8[_0xefe83d(0x26b)]);const _0x4522a8=await getCalendarNames(this,_0x31e75b);this[_0xefe83d(0x24c)](_0x5c41f8[_0xefe83d(0x3b7)],_0x5c41f8[_0xefe83d(0x2bb)],{'success':!![],'names':_0x4522a8},_0x5c41f8[_0xefe83d(0x26b)]);}else{if(_0x5c41f8[_0xefe83d(0x2bb)]==='simulateButler'){const {targetId:_0x3e7868,targetValue:_0xd0a524}=_0x5c41f8[_0xefe83d(0x1c9)];this[_0xefe83d(0x2cb)][_0xefe83d(0x385)]('üß™\x20Simulating\x20Butler\x20Proposal:\x20'+_0x3e7868+_0xefe83d(0x31c)+_0xd0a524),await this[_0xefe83d(0x331)](_0xefe83d(0x2a2),{'val':!![],'ack':!![]}),await this['setStateAsync'](_0xefe83d(0x354),{'val':_0xefe83d(0x3a7)+_0x3e7868,'ack':!![]}),await this[_0xefe83d(0x331)](_0xefe83d(0x1f0),{'val':_0x3e7868,'ack':!![]}),await this['setStateAsync'](_0xefe83d(0x29f),{'val':_0xd0a524,'ack':!![]}),this['sendTo'](_0x5c41f8['from'],_0x5c41f8[_0xefe83d(0x2bb)],{'success':!![]},_0x5c41f8[_0xefe83d(0x26b)]);}else{if(_0x5c41f8[_0xefe83d(0x2bb)]===_0xefe83d(0x35d)){const {historyId:_0x3da5fc,rating:_0x305429,comment:_0x5947e9,alertReason:_0xd59a84}=_0x5c41f8[_0xefe83d(0x1c9)];_0x3da5fc&&_0x305429?(await saveFeedback(this,{'timestamp':Date[_0xefe83d(0x214)](),'historyId':_0x3da5fc,'rating':_0x305429,'comment':_0x5947e9,'alertReason':_0xd59a84}),this[_0xefe83d(0x24c)](_0x5c41f8[_0xefe83d(0x3b7)],_0x5c41f8[_0xefe83d(0x2bb)],{'success':!![]},_0x5c41f8[_0xefe83d(0x26b)])):this[_0xefe83d(0x24c)](_0x5c41f8[_0xefe83d(0x3b7)],_0x5c41f8[_0xefe83d(0x2bb)],{'success':![],'error':_0xefe83d(0x2d7)},_0x5c41f8[_0xefe83d(0x26b)]);}else _0x5c41f8[_0xefe83d(0x2bb)]==='dismissAutomation'&&(this[_0xefe83d(0x2cb)]['info'](_0xefe83d(0x267)),await this[_0xefe83d(0x331)](_0xefe83d(0x2a2),{'val':![],'ack':!![]}),await this[_0xefe83d(0x331)](_0xefe83d(0x354),{'val':'','ack':!![]}),this['sendTo'](_0x5c41f8[_0xefe83d(0x3b7)],_0x5c41f8[_0xefe83d(0x2bb)],{'success':!![]},_0x5c41f8['callback']));}}}}}}}}}}catch(_0x18e0a3){this[_0xefe83d(0x2cb)][_0xefe83d(0x1ef)](_0xefe83d(0x23f)+_0x5c41f8[_0xefe83d(0x2bb)]+':\x20'+_0x18e0a3[_0xefe83d(0x1c9)]);if(_0x5c41f8[_0xefe83d(0x26b)])this[_0xefe83d(0x24c)](_0x5c41f8[_0xefe83d(0x3b7)],_0x5c41f8[_0xefe83d(0x2bb)],{'success':![],'error':_0x18e0a3[_0xefe83d(0x1c9)]},_0x5c41f8[_0xefe83d(0x26b)]);}}}function a0_0x19df(){const _0x444b91=['ANALYZE_TREND','Last\x20raw\x20event','exitTimer','lock','üìû\x20R√úCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20R√ºckruf-Button\x20gedr√ºckt.','useWeather','admin.','Could\x20not\x20kill\x20Python\x20process:\x20','üêç\x20Guardian\x20Diagnosis\x20(','analysis.alertReason','stdout','[RECORDER\x20DEBUG]\x20Accepting\x20Event\x20','analysisInterval','setObjectNotExistsAsync','t√ºr','find','[LICENSE\x20CHECK]\x20Key\x20present:\x20','round','delObjectAsync','IGNORING\x20DUPLICATE\x20(Cached):\x20','Target\x20Value','startsWith','Sending\x20notification:\x20\x22','sensor','_calName','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','Event\x20History','analysis.automation.targetValue','Scanning\x20for\x20devices\x20(V8:\x20Whitelist\x20Priority)...','lastCheck','analysis.automation.patternDetected','value','getOverviewData','isEmergency','update','boolean','analysis.comfortSummary','indexOf','testApiKey','logDuplicates','Cogni-Living','46918vffvbW','dailyDigests','openweathermap','exports','testNotification','Kalender:\x20Deaktiviert','ical.0','KI-Modell\x20nicht\x20initialisiert','unshift','isExit','pr√§senz','):\x20','string','flot.','command','service.py','.Summary.Current','indicator','uuid','Briefing\x20Error:\x20','forEach','\x20|\x20','system.config','licenseKey','dutycycle','type','setState','unload','.\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20INPUT\x20DATEN\x20(Letzte\x20Events):\x0a\x20\x20\x20\x20','toISOString','log','N/A\x20(Learning)','map','Motion\x20detected\x20inside.\x20Aborting\x20Exit\x20Timer.','sound','licht','geminiModel','analysis.health.trendDiagnosis','generateContent','BUTLER\x20Execution\x20Error:\x20','some','Aktiv\x20(','Missing\x20data','system.mode','setHours','N/A','pop','instance','selectedFunctionIds','splice','briefingEnabled','LTM.processingStatus','\x27\x20not\x20in\x20allowed\x20list)','schalter','Unknown','Gemini\x20Init\x20Error:\x20','cover','isPresent','Generating\x20Morning\x20Briefing...','alertReason','analysis.comfortSuggestion','getStateAsync','analysis.history_debug_00','application/json','valve','models/gemini-flash-latest','vis.','Activity-Level','blind','Trend\x20Diagnosis\x20(Python)','[RESULT]','\x20for\x20interactive\x20buttons...','rssi','Party','isGracePeriodActive','analysis.automation.triggerAction','üö®\x20EMERGENCY','\x20events','date','modeResetJob','analysis.feedbackHistory','Restoring\x20sensor\x20cache\x20from\x20history\x20(','Thermodynamic\x20Data\x20Points','driftDetails','\x20presence\x20devices...','livingContext','_score','‚ö†Ô∏è\x20Python\x20missing\x20dependencies.\x20Triggering\x20Auto-Install...','parse','‚ö†Ô∏è\x20ALARM:\x20','exitGraceTimer','set_temperature','toString','dependencyInstallInProgress','TREND_RESULT','details','send','getEnums','Failed\x20to\x20send\x20to\x20Python:\x20','city','getObjectAsync','minDaysForBaseline','Fehler:\x20','level','Exit\x20Sensor\x20triggered\x20(','[RECORDER]\x20Sequence\x20finished\x20(Steps:\x20','ü§ñ\x20BUTLER\x20PROPOSAL:\x20','.Current.Temperature','üêç\x20Stopping\x20Python\x20Sidecar...','System\x20Mode','Action','\x20=\x20','presence','loc','Health\x20Notes','toLowerCase','brightness','detected','extendObjectAsync','üì°\x20Hooking\x20into\x20','scriptProblem','stderr','firmware','Drift\x20Sched\x20Error:\x20','Event\x20received:\x20','.\x0a\x20\x20\x20\x20SYSTEM_MODE:\x20','material.','testContext','role','PRIORIT√ÑT:\x20Gesundheit/AAL.','python_service','apply','setStateAsync','Description','analysis.trigger','\x20(Length:\x20','getLtmData','Array\x20of\x20completed\x20movement\x20paths\x20for\x20ML\x20training','\x20(Type\x20\x27','simple-api.','feedbackHistory','val','system','scheduleJob','thermostat','python3\x20-m\x20pip\x20install\x20-r\x20\x22','actual_temperature','cogni-living','Keine\x20Analyse.','version','lampe','warn','occupancy','json','child_process','Analysiere\x20ausgewogen.','analysis.isEmergency','analysis.health.notes','WETTER:\x20','stdin','position','normal','Restlessness\x20Level','üõ†Ô∏è\x20AUTO-FIX:\x20Installing\x20Python\x20dependencies\x20from\x20','doors','sendToAsync','openweathermap.0','analysis.automation.description','1292396xCTNfv','KALENDER:\x20Keine\x20Kalender\x20ausgew√§hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)','shutter','button','triggerDailyDigest','VACATION','\x0a\x0a\x20\x20\x20\x20AUFGABE:\x0a\x20\x20\x20\x201.\x20Analysiere\x20auf\x20Gesundheitsrisiken\x20(Sturz,\x20Inaktivit√§t).\x0a\x20\x20\x20\x202.\x20Analysiere\x20auf\x20Komfort/Automatisierung\x20(\x22Butler\x22).\x20Erkennst\x20du\x20ein\x20Muster?\x20(z.B.\x20\x22Wenn\x20Bewegung\x20Flur,\x20dann\x20Licht\x20an\x22).\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20FORMAT\x20(JSON\x20Only!):\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22isAlert\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22alertReason\x22:\x20\x22string\x20(kurz)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22isEmergency\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22summary\x22:\x20\x22string\x20(Was\x20passiert\x20gerade?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22automationProposal\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22detected\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22string\x20(Was\x20soll\x20automatisiert\x20werden?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetId\x22:\x20\x22string\x20(ioBroker\x20ID,\x20z.B.\x200_userdata.0.light)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetValue\x22:\x20\x22any\x20(Wert,\x20z.B.\x20true\x20oder\x2050)\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','lowbat','submitFeedback','0\x204\x20*\x20*\x20*','briefingTime','\x20events)...','\x0a\x20\x20\x20\x20ROLLE:\x20KI-Hausverwalter\x20&\x20Gesundheits-Assistent.\x0a\x20\x20\x20\x20PERSONA:\x20','inactivityThresholdHours','getForeignObjectAsync','getForeignStateAsync','Subscribing\x20to\x20','indicator.alarm','filter','icons-mfd.','isArray','javascript.','outdoorSensorId','communicate.request','AI\x20Alert\x20Status','Drift\x20Details','1504504YnrXBO','response','events.lastEvent','writable','subscribeForeignStatesAsync','enum.rooms.*','.data.table','Baseline\x20Status','close','analysisHistory','Error\x20checking\x20WiFi:\x20','Entry\x20detected\x20via\x20','fenster','daswetter','Correlation\x20between\x20Inside\x20Temp,\x20Outside\x20Temp\x20and\x20Time','eventHistory','[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20','\x20hours.\x20Potential\x20incapacitation.','genAI','getDate','onMessage','calendarInstance','info','analysis.automation.suggestedAction','analysis.analysisHistory','analysis.health.restlessness','window','contact','Invalid\x20JSON\x20from\x20Python:\x20',')\x20-\x20FUNCTIONS\x20FIRST\x20ARCHITECTURE','.\x20DATEN:\x20Schlaf\x20','Automation\x20Proposals','\x20min).','devices','includes','stringify','number','light','echarts.','bind','members','reachable','ack','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','KALENDER:\x20Keine\x20Daten','stick_unreach','.\x20ZUSATZ:\x20','endsWith','currentSystemMode','‚ùå\x20FREE\x20MODE','payload','klima','Scheduling\x20Morning\x20Briefing\x20for\x20','Error:\x20','5507210kWTcYg',').\x20Starting\x20Timer.','SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20','LTM.baselineStatus','none','cancel','systemUUID','Activity\x20Summary','getCalendarNames','Feedback\x20saved:\x20','Vom\x20Benutzer\x20best√§tigt\x20(OK).','aiPersona','Auto\x20Apply\x20Rule','history.','humidity','@google/generative-ai','[TEST]\x20','Verbindung\x20erfolgreich!\x20Antwort:\x20','from','Error\x20reading\x20outdoor\x20sensor\x20','.\x0a\x20\x20\x20\x20NOTFALL-KONTEXT:\x20','ltmJob','common','custom','Training\x20Data\x20Sets','GUEST','Briefing\x20Sched\x20Error:\x20','Recorded\x20Motion\x20Sequences','LTM\x20Sched\x20Error:\x20','namespace','Morning\x20Briefing\x20sent.','LTM.dailyDigests','Started\x20at\x20','[PYTHON]\x20','events.history_debug_00','getFullYear','rollladen','Gast','lastAlertState','kill','unknown','[PYTHON]\x20Service\x20exited\x20with\x20code\x20','getMonth','analysis.activitySummary','Last\x20Check','Urlaub','lastIndexOf','activityLevel','apiKey','notifyTelegramInstance','Success:\x20Compressed\x20','join','.NextHours.Location_1.Day_1.current.symbol_desc','ltmStbWindowDays','setForeignStateAsync','\x20Tage)','name','\x20sensors...','pythonProcess','message','automationProposal','retry','targetId','Comfort\x20Suggestion','[PYTHON\x20ERR]\x20','toLocaleString','Alert\x20Reason','analysis.deviationFromBaseline','getCalendarNames\x20Error:\x20','notifyPushoverRecipient','party','‚úÖ\x20AUTO-FIX\x20SUCCESS.\x20Dependencies\x20installed.\x20Restarting\x20Service...','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','Reset\x20Sched\x20Error:\x20','18kDGgBF','.NextHours.Location_1.Day_1.current.temp_value','uuid-error','Last\x20Result','config_pending','enum','Error\x20reading\x20calendar\x20table:\x20','.\x0a\x20\x20\x20\x20KONTEXT:\x20','Skipped\x20(No\x20AI\x20or\x20Data)','Say\x20Hello','Normal','.forecast.current.temperature','uuid-not-found','Alarm','getTime','Fokus\x20auf\x20Komfort.','getGenerativeModel','analysis.lastResult','Pattern\x20Detected','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','7425900BxmDkV','debug','daswetter.0','error','analysis.automation.targetId','summary','native','maintenance','slice','LTM','Deaktiviert\x20(Pro-Feature)','ready','write','\x20(Value\x20is\x20falsy:\x20','stateChange','analysisTimer','‚úÖ\x20Alles\x20OK\x20(Reset)','baselineDrift','search','text.alarm','Details:\x20','ltmLtbWindowDays','split','onStateChange','Gemini\x20Analysis\x20Error:\x20','vacation','No\x20module\x20named','config','analysis.health','location','door','off','replace','text','1390278IhAmOW','temp','COGNI_REQUEST_CALL','Drift\x20Analysis','switch','sensorLastValues','now','temperature','push','setpoint','PARTY','‚úÖ\x20PRO\x20ACTIVATED','autoApply','Logbook','rawEventLog','working','onReady','events.history','LTM.trainingData','Trigger\x20Action\x20Now','.\x0a\x20\x20\x20\x20WETTER:\x20','isProVersion','length','system.','analysis.automation','LTM.trainingData.thermodynamics','Comfort\x20Summary','getForeignObjectsAsync','Daily\x20Digests','notifyTelegramEnabled','.\x20OUTPUT:\x20Nur\x20Text.','triggerBriefing','enum.functions.*','Feedback\x20Log','connection','Trigger\x20Briefing\x20(Test)','trim','object','accuweather','systemConfig','bewegung','Who\x20is\x20present?','[PYTHON]\x20Failed\x20to\x20start\x20(is\x20python3\x20installed?):\x20','sort','LTM.triggerDailyDigest','11159040ZvlTbL','path','analysis.automation.autoApply','analysis.isAlert','Error\x20in\x20onMessage\x20command\x20','Raw\x20Log','NORMAL','state','requirements.txt','description','generic','Trigger\x20Digest','LTM.driftAnalysis.lastCheck','info.','presenceDevices','driftAnalysisTimer','event','sendTo','shift','‚úÖ\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.','substring','.forecast.current.temp','WETTER:\x20Keine\x20Daten\x20gefunden','power','targetposition','Guardian:\x20Sending\x20','subscribeStates','motion','geminiApiKey','No\x20instance','catch','Keiner','.forecast.current.state','ROLLE:\x20F√ºrsorglicher\x20Assistent.\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20','\x0aSTB:\x20','Bibliotheken\x20nicht\x20gefunden','onUnload','toFixed','[LOG]','indicator.alarm.fire','channel','\x20(Value:\x20','ltmDriftCheckIntervalHours','value.health','User\x20dismissed\x20automation\x20proposal.','python3','analysis.triggerBriefing','Trend\x20Value\x20(%)','callback','currentposition','getHours','üìû\x20R√ºckruf\x20anfordern','[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20',').\x20Saving\x20to\x20Training\x20Data.','LTM.trainingData.sequences','0\x203\x20*\x20*\x20*','KALENDER\x20ERROR:\x20','Keine\x20Details.','status','data','\x20days\x20of\x20activity\x20data\x20to\x20Python...','values','Guardian:\x20Not\x20enough\x20history\x20data\x20for\x20trend\x20analysis\x20yet.','weatherInstance','briefingJob','notifyTelegramRecipient','(((.+)+)+)+$','‚úÖ\x20Alarm\x20quittiert.\x20System\x20normal.','TEST-PRO-KEY','system.presenceWho','direction','energy','timestamp'];a0_0x19df=function(){return _0x444b91;};return a0_0x19df();}if(require['main']!==module)module[a0_0x2d519f(0x2b0)]=_0x59a187=>new CogniLiving(_0x59a187);else new CogniLiving();