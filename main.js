const a0_0x43a482=a0_0x19a3;(function(_0x19aeab,_0x382028){const _0x22d74c=a0_0x19a3,_0x44c245=_0x19aeab();while(!![]){try{const _0x58aff5=parseInt(_0x22d74c(0x1e7))/0x1+-parseInt(_0x22d74c(0x1d2))/0x2*(-parseInt(_0x22d74c(0x231))/0x3)+-parseInt(_0x22d74c(0x1c4))/0x4*(parseInt(_0x22d74c(0x120))/0x5)+parseInt(_0x22d74c(0xb6))/0x6*(parseInt(_0x22d74c(0xbe))/0x7)+parseInt(_0x22d74c(0x136))/0x8+parseInt(_0x22d74c(0xe2))/0x9*(-parseInt(_0x22d74c(0x1a6))/0xa)+-parseInt(_0x22d74c(0x16d))/0xb*(-parseInt(_0x22d74c(0x213))/0xc);if(_0x58aff5===_0x382028)break;else _0x44c245['push'](_0x44c245['shift']());}catch(_0x19f5d5){_0x44c245['push'](_0x44c245['shift']());}}}(a0_0x4a23,0x2d760));const a0_0x59822e=(function(){let _0xa5272e=!![];return function(_0x2952f0,_0x4e9c61){const _0x475833=_0xa5272e?function(){if(_0x4e9c61){const _0x5557e2=_0x4e9c61['apply'](_0x2952f0,arguments);return _0x4e9c61=null,_0x5557e2;}}:function(){};return _0xa5272e=![],_0x475833;};}()),a0_0x4aa6eb=a0_0x59822e(this,function(){const _0x39527c=a0_0x19a3;return a0_0x4aa6eb[_0x39527c(0x1b7)]()['search']('(((.+)+)+)+$')['toString']()['constructor'](a0_0x4aa6eb)[_0x39527c(0xd1)](_0x39527c(0x1fd));});a0_0x4aa6eb();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x43a482(0x1b9)),schedule=require(a0_0x43a482(0x150)),{spawn,exec}=require(a0_0x43a482(0x175)),path=require(a0_0x43a482(0xd6)),fs=require('fs'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x43a482(0xb4),LTM_SCHEDULE='0\x203\x20*\x20*\x20*',MODE_RESET_SCHEDULE=a0_0x43a482(0xf4),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x43a482(0x1dd),LTM_DP_DAILY_DIGESTS=a0_0x43a482(0xdc),LTM_DP_STATUS=a0_0x43a482(0x234),LTM_DP_TRIGGER_DIGEST=a0_0x43a482(0x142),LTM_DP_BASELINE_STATUS=a0_0x43a482(0x143),LTM_DP_DRIFT_CHANNEL=a0_0x43a482(0x228),LTM_DP_DRIFT_STATUS=a0_0x43a482(0x1ec),LTM_DP_DRIFT_DETAILS=a0_0x43a482(0x20b),LTM_DP_DRIFT_LAST_CHECK=a0_0x43a482(0x21b),SYSTEM_DP_MODE=a0_0x43a482(0x181),SYSTEM_MODES={'NORMAL':a0_0x43a482(0x1dc),'VACATION':a0_0x43a482(0x18e),'PARTY':a0_0x43a482(0xd5),'GUEST':a0_0x43a482(0x260)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x43a482(0x165)],SYSTEM_MODES[a0_0x43a482(0xf7)]],PERSONA_MAPPING={'generic':a0_0x43a482(0x12b),'senior_aal':a0_0x43a482(0x17d),'family':a0_0x43a482(0xfe),'single_comfort':a0_0x43a482(0x221),'security':a0_0x43a482(0x155)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0},HARD_IGNORE_TERMS=[a0_0x43a482(0x215),'scriptEnabled',a0_0x43a482(0xbd),'unreach',a0_0x43a482(0x126),a0_0x43a482(0xf3),a0_0x43a482(0x206),'maintenance',a0_0x43a482(0x116),a0_0x43a482(0x163),a0_0x43a482(0x24e),'direction','stick_unreach',a0_0x43a482(0x203),a0_0x43a482(0x13e),a0_0x43a482(0x1e4),a0_0x43a482(0x134),a0_0x43a482(0xd8)],BAD_NAMES=[a0_0x43a482(0x24b),'currentposition',a0_0x43a482(0xe3),a0_0x43a482(0x191),a0_0x43a482(0x192),a0_0x43a482(0x166),'on',a0_0x43a482(0x17f),a0_0x43a482(0x257),a0_0x43a482(0xc7),a0_0x43a482(0xd2),a0_0x43a482(0x212),a0_0x43a482(0x10a),a0_0x43a482(0xe0),a0_0x43a482(0x209),a0_0x43a482(0xdd),a0_0x43a482(0xd9),a0_0x43a482(0x23c),a0_0x43a482(0x119),a0_0x43a482(0x13d),a0_0x43a482(0x14f),'setpoint',a0_0x43a482(0x15c),a0_0x43a482(0x1a4),a0_0x43a482(0x105)],ADAPTER_BLACKLIST=['system.',a0_0x43a482(0xf5),a0_0x43a482(0x139),a0_0x43a482(0x1e2),a0_0x43a482(0xff),a0_0x43a482(0x161),'icons-mfd.',a0_0x43a482(0x1ba),'echarts.',a0_0x43a482(0x1f4),a0_0x43a482(0xd0)],IS_WIN=process['platform']===a0_0x43a482(0xb2),VENV_PATH=path['join'](__dirname,a0_0x43a482(0x1bc)),PYTHON_EXE=IS_WIN?path['join'](VENV_PATH,a0_0x43a482(0x15e),a0_0x43a482(0x230)):path[a0_0x43a482(0x1e0)](VENV_PATH,a0_0x43a482(0x14d),'python'),PIP_EXE=IS_WIN?path[a0_0x43a482(0x1e0)](VENV_PATH,a0_0x43a482(0x15e),a0_0x43a482(0x18b)):path[a0_0x43a482(0x1e0)](VENV_PATH,a0_0x43a482(0x14d),'pip');let activeSequence=[],sequenceTimer=null,panicMode=![];async function initZombies(_0x2d79e8){const _0x20daaa=a0_0x43a482;try{const _0x4a29d0=['analysis.history_debug_00',_0x20daaa(0x189)];for(const _0x513953 of _0x4a29d0){try{const _0x6b31e6=await _0x2d79e8[_0x20daaa(0x16a)](_0x513953);if(_0x6b31e6)await _0x2d79e8[_0x20daaa(0x240)](_0x513953);}catch(_0x31fbb9){}}}catch(_0x35e073){}}async function initHistory(_0x4f339d){const _0x42afec=a0_0x43a482;try{const _0x3d86a8=await _0x4f339d[_0x42afec(0x113)]('events.history');_0x3d86a8&&_0x3d86a8[_0x42afec(0x25e)]&&(_0x4f339d['eventHistory']=JSON['parse'](_0x3d86a8[_0x42afec(0x25e)][_0x42afec(0x1b7)]()));}catch(_0x151756){_0x4f339d['eventHistory']=[];}try{const _0x2e4f76=await _0x4f339d[_0x42afec(0x113)](_0x42afec(0x226));if(_0x2e4f76&&_0x2e4f76[_0x42afec(0x25e)])_0x4f339d['analysisHistory']=JSON[_0x42afec(0x255)](_0x2e4f76[_0x42afec(0x25e)][_0x42afec(0x1b7)]());}catch(_0x3a7dfb){_0x4f339d[_0x42afec(0x21c)]=[];}if(_0x4f339d[_0x42afec(0x168)]&&_0x4f339d[_0x42afec(0x168)][_0x42afec(0x22b)]>0x0){_0x4f339d[_0x42afec(0x1f0)]['info'](_0x42afec(0x184)+_0x4f339d[_0x42afec(0x168)][_0x42afec(0x22b)]+_0x42afec(0xeb));for(let _0x268232=_0x4f339d[_0x42afec(0x168)][_0x42afec(0x22b)]-0x1;_0x268232>=0x0;_0x268232--){const _0x1f2fd4=_0x4f339d['eventHistory'][_0x268232];if(_0x1f2fd4&&_0x1f2fd4['id']!==undefined&&_0x1f2fd4['value']!==undefined)_0x4f339d[_0x42afec(0xc2)][_0x1f2fd4['id']]=_0x1f2fd4['value'];}}}async function initSystemConfig(_0xf888a7){const _0x141626=a0_0x43a482;try{const _0x2db47e=await _0xf888a7[_0x141626(0x1f3)](_0x141626(0x160));if(_0x2db47e&&_0x2db47e['common'])_0xf888a7[_0x141626(0x11b)]={'latitude':_0x2db47e[_0x141626(0x18f)][_0x141626(0x1cb)]||0x0,'longitude':_0x2db47e[_0x141626(0x18f)][_0x141626(0x17e)]||0x0,'city':_0x2db47e[_0x141626(0x18f)][_0x141626(0x25a)]||''};}catch(_0x4b4db1){}}async function checkLicense(_0x10f2e1,_0x390459){return!![];}async function getSystemUUID(_0x4c41bd){return'uuid';}async function loadRawEventLog(_0x1b9473){const _0x1cfb8b=a0_0x43a482;try{const _0x26d61f=await _0x1b9473['getStateAsync'](LTM_DP_RAW_LOG);if(_0x26d61f&&_0x26d61f[_0x1cfb8b(0x25e)])_0x1b9473['rawEventLog']=JSON[_0x1cfb8b(0x255)](_0x26d61f['val']);}catch(_0x2e1ddd){_0x1b9473[_0x1cfb8b(0xc3)]=[];}}async function saveRawEventLog(_0x5d98aa){const _0x38de59=a0_0x43a482;if(_0x5d98aa[_0x38de59(0xc3)][_0x38de59(0x22b)]>RAW_LOG_MAX_SIZE)_0x5d98aa[_0x38de59(0xc3)]['splice'](0x0,_0x5d98aa[_0x38de59(0xc3)][_0x38de59(0x22b)]-RAW_LOG_MAX_SIZE);await _0x5d98aa['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x38de59(0x16f)](_0x5d98aa['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x509417){const _0x5e82fb=a0_0x43a482;try{const _0x243b15=await _0x509417[_0x5e82fb(0x113)](LTM_DP_DAILY_DIGESTS);if(_0x243b15&&_0x243b15[_0x5e82fb(0x25e)])_0x509417[_0x5e82fb(0x1ea)]=JSON['parse'](_0x243b15[_0x5e82fb(0x25e)]);}catch(_0x4ac5a7){_0x509417[_0x5e82fb(0x1ea)]=[];}await updateBaselineStatus(_0x509417);}async function saveDailyDigests(_0x11edb4,_0x166f04=!![]){const _0x4989f8=a0_0x43a482,_0xa560fd=_0x11edb4[_0x4989f8(0x23e)][_0x4989f8(0x21d)]||0x3c;_0x11edb4[_0x4989f8(0x1ea)]['length']>_0xa560fd&&_0x11edb4['dailyDigests'][_0x4989f8(0x106)](0x0,_0x11edb4[_0x4989f8(0x1ea)][_0x4989f8(0x22b)]-_0xa560fd);await _0x11edb4[_0x4989f8(0x177)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x4989f8(0x16f)](_0x11edb4['dailyDigests']),'ack':!![]});if(_0x166f04)await updateBaselineStatus(_0x11edb4);}async function updateAnalysisHistory(_0x528ed2,_0x303864){const _0x1668de=a0_0x43a482;_0x528ed2[_0x1668de(0x21c)][_0x1668de(0x259)](_0x303864);if(_0x528ed2[_0x1668de(0x21c)]['length']>ANALYSIS_HISTORY_MAX_SIZE)_0x528ed2['analysisHistory'][_0x1668de(0x1bb)]();await _0x528ed2[_0x1668de(0x177)](_0x1668de(0x226),{'val':JSON['stringify'](_0x528ed2[_0x1668de(0x21c)]),'ack':!![]});}async function updateBaselineStatus(_0xb5ad68){const _0x1e4112=a0_0x43a482;if(!_0xb5ad68[_0x1e4112(0x1d7)]){await _0xb5ad68[_0x1e4112(0x177)](LTM_DP_BASELINE_STATUS,{'val':_0x1e4112(0x132),'ack':!![]});return;}const _0x56e026=_0xb5ad68[_0x1e4112(0x1ea)][_0x1e4112(0x22b)]>=(_0xb5ad68[_0x1e4112(0x23e)][_0x1e4112(0x123)]||0x7)?_0x1e4112(0x167)+_0xb5ad68[_0x1e4112(0x1ea)][_0x1e4112(0x22b)]+'\x20Tage)':_0x1e4112(0x229)+_0xb5ad68['dailyDigests'][_0x1e4112(0x22b)]+'/'+(_0xb5ad68[_0x1e4112(0x23e)][_0x1e4112(0x123)]||0x7)+')';await _0xb5ad68['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x56e026,'ack':!![]});}function a0_0x4a23(){const _0x1c66d5=['valve','Success:\x20','Scripts','existsSync','system.config','material.','setState','fault','write','PARTY','brightness','Aktiv\x20(','eventHistory','Trend\x20Value','getObjectAsync','LTM\x20Sched\x20Error:\x20','Target\x20ID','221782gPDoWY','indexOf','stringify','apiKey','schalter','Gemini\x20Init\x20Error:\x20','analysis.training.triggerHealth','licht','child_process','.forecast.current.temp','setStateAsync','analysis.trigger','isPresent','string','values','tÃ¼r','PRIORITÃ„T:\x20Gesundheit/AAL.','longitude','off','sound','system.mode','Last\x20raw\x20event','analysis.automation.triggerAction','Restoring\x20sensor\x20cache\x20from\x20history\x20(','analysis.health.isAnomaly','Missing\x20data','[PYTHON]\x20','Alarm','events.history_debug_00','warn','pip.exe','sendToAsync','cancel','vacation','common','accuweather','level','value','text.alarm','ðŸ›¡ï¸\x20SECURITY:\x20Sending\x20sequence\x20to\x20Guard\x20for\x20analysis...','activityLevel','HEALTH_TRAIN_RESULT','setObjectNotExistsAsync','slice','events.lastEvent','text','shift','notifyPushoverRecipient','Alert\x20Status','Daily\x20Digests','analysis.triggerBriefing','unload','ðŸ\x20Guardian\x20Diagnosis:\x20','LTM.trainingData.sequences','ltmDriftCheckIntervalHours','actual_temperature','briefingJob','13260exinPD','message','briefingEnabled','NORMAL','some','info','pythonProcess','[RECORDER]\x20Error\x20saving\x20sequence:\x20','ack','ANALYZE_SEQUENCE','TRAINING_COMPLETE','close','substring','onMessage','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','requirements.txt','analysis.automation.targetValue','toString','\x22\x20install\x20--no-cache-dir\x20--force-reinstall\x20-r\x20\x22','@google/generative-ai','flot.','pop','.venv','testApiKey','Insulation\x20Score','from','notifyTelegramInstance','notifyEmailEnabled','driftAnalysisTimer','stateChange','8voFePj','analysis.training.triggerSecurity','loc','Cogni-Living','send','.communicate.request','HARD\x20WATCHDOG:\x20No\x20activity\x20for\x20','latitude','online','setForeignStateAsync','devices','analysis.energy','ltmStbWindowDays','analysisInterval','146FChjAb','startsWith','activeSequence','Training\x20Status','generateContent','isProVersion','geminiApiKey','COGNI_REQUEST_CALL','LTM','System','normal','LTM.rawEventLog','stdout','.NextHours.Location_1.Day_1.current.temp_value','join','weatherunderground','vis.','Activity-Level','firmware','âŒ\x20INSTALL\x20FAILED:\x20','openweathermap','23683smAnKH','Error\x20launching\x20Python:\x20','heating','dailyDigests','retry','LTM.driftAnalysis.baselineDrift','light','find','targetId','log','analysis.isAlert','ENERGY_TRAIN_RESULT','getForeignObjectAsync','javascript.','detected','getOverviewData','contact','callback','analysis.automation.description','includes','command','âœ…\x20INSTALL\x20SUCCESS.\x20Verifying...','(((.+)+)+)+$','toLocaleTimeString','notifyEmailRecipient','analysis.training.status','\x20=\x20','name','config_pending','getMonth','.Current.Temperature','connection','notifyPushoverEnabled','ðŸ\x20Python\x20Pong','motion','Trigger\x20Briefing','LTM.driftAnalysis.driftDetails','stderr','cogni-living','type','now','Sequences','channel','blind','24sNyvZI','Unknown','scriptProblem','push','\x22\x20-c\x20\x22import\x20tensorflow;\x20print(\x27OK\x27)\x22','toISOString','isGracePeriodActive','KI-Modell\x20nicht\x20initialisiert','LTM.driftAnalysis.lastCheck','analysisHistory','ltmLtbWindowDays',')\x20-\x20HYBRID\x20STABLE','âœ…\x20Alarm\x20quittiert.\x20System\x20normal.','analysis.alertReason','Fokus\x20auf\x20Komfort.','\x20sequences...','timestamp','Kein\x20API\x20Key!','analysis.automation.autoApply','analysis.analysisHistory','ðŸ\x20Using\x20VENV:\x20','LTM.driftAnalysis','Lernphase\x20(','writable','length','submitFeedback','temperatur','bind','window','python.exe','5904caBdub','analysis.activitySummary','date','LTM.processingStatus','VACATION','debug','notifyPushoverInstance','[LOG]','toLowerCase','âœ…\x20Alles\x20OK\x20(Reset)','json','temperature','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','config','kill','delObjectAsync','fenster','âœ…\x20HEALTH\x20TRAINED:\x20','getForeignStateAsync','[PYTHON\x20ERR]\x20','Trend','User\x20dismissed\x20automation\x20proposal.','âŒ\x20VENV\x20CREATION\x20FAILED.\x20Please\x20run:\x20sudo\x20apt\x20install\x20python3-venv','[RESULT]','ðŸ“ž\x20RÃœCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20RÃ¼ckruf-Button\x20gedrÃ¼ckt.','presenceDevices','targetposition','sequenceTimer','cpu_feature_guard','working','bewegung','getTime','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','subscribeForeignStatesAsync','Alert\x20Reason','\x20(Length:\x20','parse','\x20*\x20*\x20*','switch','geminiModel','unshift','city','unknown','prÃ¤senz','onReady','val','onStateChange','guest','inactivityMonitoringEnabled','python3','extendObjectAsync','analysisTimer','Gemini\x20AI\x20initialized.','win32','payload','models/gemini-flash-latest','PONG','282ilpcIs','Last\x20Check','Anomaly\x20Detected','System\x20Mode','TREND_RESULT','indicator','sendTo','update','31955xBpzHZ','scanDevices','Installing\x20pip\x20packages\x20(Force\x20Reinstall)...','telegram','sensorLastValues','rawEventLog','Event\x20History','ltmJob','autoApply','position','scheduleJob','Sec-Training\x20started...','exitTimer','stdin','response','klima','analysis.health.lastCheck','LTM.trainingData.thermodynamics','simple-api.','search','shutter','rmSync','Train\x20Energy','party','path','Description','link_quality','occupancy','Heating\x20Score','filter','LTM.dailyDigests','presence','analysis.automation.targetId','Raw\x20Log','status','Vom\x20Benutzer\x20bestÃ¤tigt\x20(OK).','2043eANLcx','state','analysis.security.lastScore','onUnload','analysis.energy.insulationScore','automation.triggerAction','analysis.training.triggerEnergy','genAI','service.py','\x20events)...','split','daswetter','door','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','data','testContext','\x20->\x20','rssi','0\x204\x20*\x20*\x20*','admin.','toFixed','GUEST','modeResetJob','analysis.energy.heatingScore','system','getFullYear','enum','Training\x20Error:\x20','Fokus\x20auf\x20Familienroutinen.','history.','[PYTHON]\x20Exited\x20','âœ…\x20VERIFICATION\x20PASSED.\x20Starting\x20Service.','ANALYZE_TREND','Adapter',').\x20Panic\x20Mode.','set_temperature','splice','briefingTime','Auto\x20Apply','Invalid\x20JSON:\x20','cover','TRAIN_HEALTH','button','events.history','system.presenceWho','subscribeStates','Security\x20Monitor','COGNI_CONFIRM_OK','trim','getStateAsync','Who\x20is\x20present?','TRAIN_ENERGY','error','Train\x20Security','Briefing\x20Sched\x20Error:\x20','humidity','No\x20module\x20named','systemConfig','boolean','HEALTH_RESULT','analysis.security.lastCheck','âš ï¸\x20VENV\x20missing.\x20Installing...','740855ZuiZKx','currentSystemMode','analysis.health.trendValue','minDaysForBaseline','[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20','getDate','lowbat','WiFi\x20Presence\x20detected.','analysis.health','main','Trigger\x20Analysis','Analysiere\x20ausgewogen.','N/A','lampe','number','analysis.automation.patternDetected','Thermodynamics','ANOMALY','Deaktiviert\x20(Pro-Feature)','OK:\x20','reachable','python_service','2890608thaspG','âš ï¸\x20SECURITY\x20ALARM:\x20','notifyTelegramEnabled','info.','systemUUID','insulation','cogni-living\x20adapter\x20starting\x20(v','power','dutycycle','exitGraceTimer','ðŸ§ \x20Triggering\x20Security\x20Training\x20with\x20','instance','LTM.triggerDailyDigest','LTM.baselineStatus','Reset\x20Sched\x20Error:\x20','forEach','inactivityThresholdHours','Target\x20Value','dimmer','getHours','triggerDailyDigest','dependencyInstallInProgress','fill','bin','dismissAutomation','energy','node-schedule','getCalendarNames','analysis.health.trendDiagnosis','licenseKey','communicate.request','PRIORITÃ„T:\x20Sicherheit.','location','outdoorSensorId','object','kontakt','round','getGenerativeModel'];a0_0x4a23=function(){return _0x1c66d5;};return a0_0x4a23();}async function loadSystemMode(_0x36db43){const _0x5bbdcd=a0_0x43a482;try{const _0x597d02=await _0x36db43[_0x5bbdcd(0x113)](SYSTEM_DP_MODE);_0x597d02&&_0x597d02[_0x5bbdcd(0x25e)]&&Object[_0x5bbdcd(0x17b)](SYSTEM_MODES)['includes'](_0x597d02[_0x5bbdcd(0x25e)])?_0x36db43[_0x5bbdcd(0x121)]=_0x597d02[_0x5bbdcd(0x25e)]:(_0x36db43[_0x5bbdcd(0x121)]=SYSTEM_MODES[_0x5bbdcd(0x1a9)],await _0x36db43['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x1b0efc){_0x36db43[_0x5bbdcd(0x121)]=SYSTEM_MODES['NORMAL'];}}async function createAllObjects(_0x2756a1){const _0x5c0af3=a0_0x43a482;await _0x2756a1[_0x5c0af3(0xaf)](_0x5c0af3(0xfa),{'type':_0x5c0af3(0x211),'common':{'name':_0x5c0af3(0x1db)},'native':{}}),await _0x2756a1[_0x5c0af3(0xaf)](SYSTEM_DP_MODE,{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0xb9),'type':_0x5c0af3(0x17a),'role':_0x5c0af3(0xe3),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x5c0af3(0x1a9)]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)](_0x5c0af3(0x10e),{'type':'state','common':{'name':_0x5c0af3(0x114),'type':_0x5c0af3(0x17a),'role':_0x5c0af3(0x19a),'read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)](_0x5c0af3(0x199),{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0x182),'type':_0x5c0af3(0x17a),'role':'json','read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)](_0x5c0af3(0x10d),{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0xc4),'type':_0x5c0af3(0x17a),'role':'json','read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0xaf)]('analysis.training',{'type':_0x5c0af3(0x211),'common':{'name':'AI\x20Training'},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)]('analysis.training.triggerSecurity',{'type':'state','common':{'name':_0x5c0af3(0x117),'type':_0x5c0af3(0x11c),'role':_0x5c0af3(0x10c),'read':!![],'write':!![]},'native':{}}),await _0x2756a1['setObjectNotExistsAsync'](_0x5c0af3(0x173),{'type':_0x5c0af3(0xe3),'common':{'name':'Train\x20Health','type':_0x5c0af3(0x11c),'role':_0x5c0af3(0x10c),'read':!![],'write':!![]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)]('analysis.training.triggerEnergy',{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0xd4),'type':_0x5c0af3(0x11c),'role':_0x5c0af3(0x10c),'read':!![],'write':!![]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)](_0x5c0af3(0x200),{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0x1d5),'type':'string','role':_0x5c0af3(0x19a),'read':!![],'write':![]},'native':{}}),await _0x2756a1['extendObjectAsync']('analysis.security',{'type':_0x5c0af3(0x211),'common':{'name':_0x5c0af3(0x110)},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)](_0x5c0af3(0xe4),{'type':_0x5c0af3(0xe3),'common':{'name':'Anomaly\x20Score','type':_0x5c0af3(0x12e),'role':_0x5c0af3(0x192),'read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)](_0x5c0af3(0x11e),{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0xb7),'type':_0x5c0af3(0x17a),'role':_0x5c0af3(0x233),'read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0xaf)](_0x5c0af3(0x128),{'type':_0x5c0af3(0x211),'common':{'name':'Health\x20Analysis'},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)]('analysis.health.lastCheck',{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0xb7),'type':_0x5c0af3(0x17a),'role':_0x5c0af3(0x233),'read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)](_0x5c0af3(0x185),{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0xb8),'type':_0x5c0af3(0x11c),'role':_0x5c0af3(0xbb),'read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)](_0x5c0af3(0x152),{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0x245),'type':'string','role':_0x5c0af3(0x19a),'read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)]('analysis.health.trendValue',{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0x169),'type':_0x5c0af3(0x12e),'role':'value','read':!![],'write':![]},'native':{}}),await _0x2756a1['extendObjectAsync'](_0x5c0af3(0x1cf),{'type':_0x5c0af3(0x211),'common':{'name':'Energy\x20Intelligence'},'native':{}}),await _0x2756a1['setObjectNotExistsAsync'](_0x5c0af3(0xe6),{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0x1be),'type':'string','role':_0x5c0af3(0x19a),'read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)]('analysis.energy.heatingScore',{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0xda),'type':_0x5c0af3(0x17a),'role':_0x5c0af3(0x19a),'read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0xaf)](_0x5c0af3(0x1da),{'type':_0x5c0af3(0x211),'common':{'name':_0x5c0af3(0x1da)},'native':{}}),await _0x2756a1['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0xdf),'type':_0x5c0af3(0x17a),'role':_0x5c0af3(0x23b),'read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0xaf)](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':_0x5c0af3(0x19e),'type':_0x5c0af3(0x17a),'role':'json','read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)](_0x5c0af3(0x1a2),{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0x210),'type':_0x5c0af3(0x17a),'role':_0x5c0af3(0x23b),'read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)](_0x5c0af3(0xcf),{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0x130),'type':_0x5c0af3(0x17a),'role':_0x5c0af3(0x23b),'read':!![],'write':![]},'native':{}}),await _0x2756a1['setObjectNotExistsAsync'](_0x5c0af3(0x178),{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0x12a),'type':_0x5c0af3(0x11c),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x2756a1['setObjectNotExistsAsync'](_0x5c0af3(0x19f),{'type':'state','common':{'name':_0x5c0af3(0x20a),'type':_0x5c0af3(0x11c),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x2756a1['setObjectNotExistsAsync'](_0x5c0af3(0x1f1),{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0x19d),'type':_0x5c0af3(0x11c),'role':'indicator.alarm','read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)](_0x5c0af3(0x220),{'type':'state','common':{'name':_0x5c0af3(0x253),'type':_0x5c0af3(0x17a),'role':_0x5c0af3(0x193),'read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)](_0x5c0af3(0x232),{'type':_0x5c0af3(0xe3),'common':{'name':'Activity\x20Summary','type':_0x5c0af3(0x17a),'role':_0x5c0af3(0x19a),'read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)](_0x5c0af3(0x12f),{'type':_0x5c0af3(0xe3),'common':{'name':'Pattern\x20Detected','type':_0x5c0af3(0x11c),'role':_0x5c0af3(0xbb),'read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)](_0x5c0af3(0x1f9),{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0xd7),'type':_0x5c0af3(0x17a),'role':'text','read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)](_0x5c0af3(0xde),{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0x16c),'type':_0x5c0af3(0x17a),'role':_0x5c0af3(0x19a),'read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)]('analysis.automation.targetValue',{'type':_0x5c0af3(0xe3),'common':{'name':_0x5c0af3(0x147),'type':_0x5c0af3(0x17a),'role':_0x5c0af3(0x19a),'read':!![],'write':![]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)](_0x5c0af3(0x225),{'type':'state','common':{'name':_0x5c0af3(0x108),'type':_0x5c0af3(0x11c),'role':_0x5c0af3(0x257),'read':!![],'write':!![]},'native':{}}),await _0x2756a1[_0x5c0af3(0x197)](_0x5c0af3(0x183),{'type':_0x5c0af3(0xe3),'common':{'name':'Trigger\x20Action','type':_0x5c0af3(0x11c),'role':_0x5c0af3(0x10c),'read':!![],'write':!![]},'native':{}});}async function recordThermodynamics(_0x1d7fb9,_0x33eb44,_0x14be60,_0x2f2218){const _0x553636=a0_0x43a482,_0x11480f=await getOutsideTemperatureNumeric(_0x1d7fb9),_0x3bd875=await _0x1d7fb9[_0x553636(0x113)](_0x553636(0xcf));let _0x12c9f7=[];if(_0x3bd875&&_0x3bd875[_0x553636(0x25e)])try{_0x12c9f7=JSON[_0x553636(0x255)](_0x3bd875[_0x553636(0x25e)]);}catch(_0x34dbe0){}_0x12c9f7['push']({'ts':Date['now'](),'room':_0x2f2218||_0x553636(0x214),'t_in':_0x14be60,'t_out':_0x11480f});if(_0x12c9f7[_0x553636(0x22b)]>THERMO_LOG_SIZE)_0x12c9f7[_0x553636(0x19b)]();await _0x1d7fb9[_0x553636(0x177)](_0x553636(0xcf),{'val':JSON['stringify'](_0x12c9f7),'ack':!![]});}async function getOutsideTemperatureNumeric(_0xba4874){const _0x5ef5c3=a0_0x43a482;if(_0xba4874[_0x5ef5c3(0x23e)][_0x5ef5c3(0x157)])try{const _0x13f874=await _0xba4874[_0x5ef5c3(0x243)](_0xba4874[_0x5ef5c3(0x23e)][_0x5ef5c3(0x157)]);if(_0x13f874&&_0x13f874[_0x5ef5c3(0x25e)]!==undefined&&_0x13f874[_0x5ef5c3(0x25e)]!==null)return parseFloat(_0x13f874['val']);}catch(_0x5e038f){}const _0x177ccf=_0xba4874['config']['weatherInstance'];if(!_0xba4874[_0x5ef5c3(0x23e)]['useWeather']||!_0x177ccf)return null;try{let _0x880f1f='';if(_0x177ccf[_0x5ef5c3(0x1fa)](_0x5ef5c3(0x190)))_0x880f1f=_0x177ccf+_0x5ef5c3(0x205);else{if(_0x177ccf['includes'](_0x5ef5c3(0xed)))_0x880f1f=_0x177ccf+_0x5ef5c3(0x1df);else{if(_0x177ccf[_0x5ef5c3(0x1fa)](_0x5ef5c3(0x1e6)))_0x880f1f=_0x177ccf+'.forecast.current.temperature';else{if(_0x177ccf[_0x5ef5c3(0x1fa)](_0x5ef5c3(0x1e1)))_0x880f1f=_0x177ccf+_0x5ef5c3(0x176);}}}if(_0x880f1f){const _0x3fbff5=await _0xba4874[_0x5ef5c3(0x243)](_0x880f1f);if(_0x3fbff5&&_0x3fbff5[_0x5ef5c3(0x25e)]!==undefined&&_0x3fbff5[_0x5ef5c3(0x25e)]!==null)return parseFloat(_0x3fbff5[_0x5ef5c3(0x25e)]);}}catch(_0x2cd6c6){}return null;}async function recordSequence(_0x4b9693,_0x145b65){const _0x59d524=a0_0x43a482,_0xfcc861=(_0x145b65[_0x59d524(0x20e)]||'')['toLowerCase'](),_0x145b50=[_0x59d524(0x209),_0x59d524(0x24f),_0x59d524(0x25c),_0x59d524(0xdd),_0x59d524(0xd9),_0x59d524(0xee),_0x59d524(0x17c),_0x59d524(0x22f),_0x59d524(0x241),_0x59d524(0x1f7),_0x59d524(0x159),_0x59d524(0x1ed),_0x59d524(0x174),_0x59d524(0x257),_0x59d524(0x171),_0x59d524(0x148),_0x59d524(0x12d)];if(!_0x145b50[_0x59d524(0x1aa)](_0x3e71db=>_0xfcc861[_0x59d524(0x1fa)](_0x3e71db)))return;if(!_0x145b65[_0x59d524(0x192)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x59d524(0x216)]({'loc':_0x145b65[_0x59d524(0x156)]||'Unknown','id':_0x145b65['id'],'ts':Date[_0x59d524(0x20f)]()}),_0x4b9693['log'][_0x59d524(0x236)](_0x59d524(0x124)+_0x145b65[_0x59d524(0x156)]+_0x59d524(0x254)+activeSequence['length']+')'),sequenceTimer=setTimeout(async()=>{if(activeSequence['length']>0x1)await saveCompletedSequence(_0x4b9693);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x34f865){const _0x12458d=a0_0x43a482;try{const _0x14a637=await _0x34f865[_0x12458d(0x113)](_0x12458d(0x1a2));let _0x2eda08=[];if(_0x14a637&&_0x14a637[_0x12458d(0x25e)])try{_0x2eda08=JSON[_0x12458d(0x255)](_0x14a637['val']);}catch(_0x423b04){}const _0x2e013d=activeSequence[0x0]['ts'],_0x510c8e=activeSequence['map'](_0x1d8d7d=>({'loc':_0x1d8d7d[_0x12458d(0x1c6)],'t_delta':Math['round']((_0x1d8d7d['ts']-_0x2e013d)/0x3e8)})),_0x54f2c3={'timestamp':new Date(_0x2e013d)[_0x12458d(0x218)](),'steps':_0x510c8e,'duration':Math[_0x12458d(0x15a)]((activeSequence[activeSequence[_0x12458d(0x22b)]-0x1]['ts']-_0x2e013d)/0x3e8),'daytime':new Date(_0x2e013d)[_0x12458d(0x149)]()};_0x2eda08[_0x12458d(0x216)](_0x54f2c3);if(_0x2eda08[_0x12458d(0x22b)]>MAX_TRAINING_SET_SIZE)_0x2eda08[_0x12458d(0x19b)]();await _0x34f865[_0x12458d(0x177)](_0x12458d(0x1a2),{'val':JSON[_0x12458d(0x16f)](_0x2eda08),'ack':!![]}),runSecurityCheck(_0x34f865,_0x54f2c3);}catch(_0x470b44){_0x34f865[_0x12458d(0x1f0)]['error'](_0x12458d(0x1ad)+_0x470b44[_0x12458d(0x1a7)]);}}function runSecurityCheck(_0x4c87ca,_0x37d5e6){const _0x2250ce=a0_0x43a482;if(!_0x4c87ca[_0x2250ce(0x1d7)])return;_0x4c87ca[_0x2250ce(0x1f0)]['debug'](_0x2250ce(0x194)),sendToPython(_0x4c87ca,_0x2250ce(0x1af),{'sequence':_0x37d5e6});}async function processSensorEvent(_0x18e0c6,_0x50116d,_0x32ad01,_0x3d537b){const _0x218df0=a0_0x43a482;if(!_0x3d537b)return;const _0x4ea749=_0x32ad01[_0x218df0(0x25e)],_0x42a32c=Date[_0x218df0(0x20f)](),_0x49ef42=_0x18e0c6[_0x218df0(0xc2)][_0x50116d];_0x18e0c6[_0x218df0(0xc2)][_0x50116d]=_0x4ea749;if(!_0x3d537b['logDuplicates']&&_0x49ef42!=undefined&&_0x49ef42==_0x4ea749)return;const _0x434b69=(_0x3d537b[_0x218df0(0x20e)]||'')[_0x218df0(0x239)](),_0x2de135=_0x434b69['includes'](_0x218df0(0x23c))||_0x434b69[_0x218df0(0x1fa)](_0x218df0(0x22d))||_0x434b69[_0x218df0(0x1fa)](_0x218df0(0xcd))||_0x434b69[_0x218df0(0x1fa)]('heizung');_0x18e0c6['isProVersion']&&_0x2de135&&recordThermodynamics(_0x18e0c6,_0x50116d,_0x4ea749,_0x3d537b[_0x218df0(0x156)]);const _0x32e557={'timestamp':_0x42a32c,'id':_0x50116d,'name':_0x3d537b[_0x218df0(0x202)],'type':_0x3d537b[_0x218df0(0x20e)],'location':_0x3d537b['location'],'value':_0x4ea749};_0x18e0c6[_0x218df0(0x168)][_0x218df0(0x259)](_0x32e557);if(_0x18e0c6[_0x218df0(0x168)][_0x218df0(0x22b)]>HISTORY_MAX_SIZE)_0x18e0c6[_0x218df0(0x168)]['pop']();await _0x18e0c6[_0x218df0(0x177)](_0x218df0(0x199),{'val':JSON[_0x218df0(0x16f)](_0x32e557),'ack':!![]}),await _0x18e0c6[_0x218df0(0x177)](_0x218df0(0x10d),{'val':JSON[_0x218df0(0x16f)](_0x18e0c6['eventHistory']),'ack':!![]});_0x18e0c6['isProVersion']&&(_0x18e0c6['rawEventLog'][_0x218df0(0x216)](_0x32e557),await saveRawEventLog(_0x18e0c6),recordSequence(_0x18e0c6,_0x32e557));if(_0x3d537b['isExit']&&_0x4ea749===!![]){if(_0x18e0c6[_0x218df0(0x179)]&&!_0x18e0c6['isGracePeriodActive'])startExitTimer(_0x18e0c6);else{if(!_0x18e0c6['isPresent'])setPresence(_0x18e0c6,!![]);}}else{if(_0x3d537b[_0x218df0(0x20e)]==='motion'&&_0x4ea749===!![]){if(_0x18e0c6[_0x218df0(0xca)])abortExitTimer(_0x18e0c6);if(!_0x18e0c6['isPresent']&&_0x18e0c6['currentSystemMode']===SYSTEM_MODES[_0x218df0(0x1a9)])setPresence(_0x18e0c6,!![]);}}}function installPythonDependencies(_0xc25f0){const _0x5dbbd6=a0_0x43a482;if(_0xc25f0['dependencyInstallInProgress']||panicMode)return;_0xc25f0[_0x5dbbd6(0x14b)]=!![];const _0x1bdf68=path[_0x5dbbd6(0x1e0)](__dirname,'python_service',_0x5dbbd6(0x1b5));_0xc25f0['log'][_0x5dbbd6(0x1ab)]('ðŸ› ï¸\x20MAINTENANCE\x20MODE:\x20Installing\x20Python\x20dependencies\x20(This\x20can\x20take\x20>5\x20minutes)...'),stopPythonService(_0xc25f0);if(fs[_0x5dbbd6(0x15f)](VENV_PATH))try{fs[_0x5dbbd6(0xd3)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x5b2a0e){}exec('python3\x20-m\x20venv\x20\x22'+VENV_PATH+'\x22',_0xf76f89=>{const _0x33e099=_0x5dbbd6;if(_0xf76f89){_0xc25f0[_0x33e099(0x1f0)]['error'](_0x33e099(0x247)),_0xc25f0[_0x33e099(0x14b)]=![],panicMode=!![];return;}installRequirementsInVenv(_0xc25f0,_0x1bdf68);});}function installRequirementsInVenv(_0x14145a,_0x1479db){const _0x5d65b2=a0_0x43a482;_0x14145a[_0x5d65b2(0x1f0)][_0x5d65b2(0x1ab)](_0x5d65b2(0xc0));const _0x21e572='\x22'+PIP_EXE+_0x5d65b2(0x1b8)+_0x1479db+'\x22';exec(_0x21e572,{'timeout':0x124f80},(_0x1743d3,_0x569d4e,_0x1a3e9c)=>{const _0x2dfc72=_0x5d65b2;_0x14145a[_0x2dfc72(0x14b)]=![],_0x1743d3?(_0x14145a['log']['error'](_0x2dfc72(0x1e5)+(_0x1a3e9c||_0x1743d3['message'])),panicMode=!![]):(_0x14145a[_0x2dfc72(0x1f0)][_0x2dfc72(0x1ab)](_0x2dfc72(0x1fc)),exec('\x22'+PYTHON_EXE+_0x2dfc72(0x217),(_0x2f8304,_0x1ad35b)=>{const _0x380178=_0x2dfc72;_0x1ad35b&&_0x1ad35b[_0x380178(0x1fa)]('OK')?(_0x14145a['log'][_0x380178(0x1ab)](_0x380178(0x101)),startPythonService(_0x14145a)):(_0x14145a['log'][_0x380178(0x116)]('âŒ\x20VERIFICATION\x20FAILED.\x20Tensorflow\x20missing.\x20Panic\x20Mode.'),panicMode=!![]);}));});}function startPythonService(_0x3bfa38){const _0x3e7b83=a0_0x43a482;if(_0x3bfa38['dependencyInstallInProgress']||panicMode)return;let _0x368c88=_0x3e7b83(0x262);if(fs[_0x3e7b83(0x15f)](PYTHON_EXE))_0x3bfa38[_0x3e7b83(0x1f0)][_0x3e7b83(0x1ab)](_0x3e7b83(0x227)+PYTHON_EXE),_0x368c88=PYTHON_EXE;else{_0x3bfa38['log'][_0x3e7b83(0x18a)](_0x3e7b83(0x11f)),installPythonDependencies(_0x3bfa38);return;}try{const _0x475722=path['join'](__dirname,_0x3e7b83(0x135),_0x3e7b83(0xea));_0x3bfa38[_0x3e7b83(0x1ac)]=spawn(_0x368c88,[_0x475722]),_0x3bfa38['pythonProcess'][_0x3e7b83(0x1de)]['on'](_0x3e7b83(0xf0),_0x1850b4=>{const _0x153256=_0x3e7b83,_0x2ebb68=_0x1850b4[_0x153256(0x1b7)]()[_0x153256(0xec)]('\x0a');_0x2ebb68['forEach'](_0x514363=>{const _0x53f9c1=_0x153256,_0x578255=_0x514363[_0x53f9c1(0x112)]();if(!_0x578255)return;if(_0x578255[_0x53f9c1(0x1d3)](_0x53f9c1(0x238)))_0x3bfa38['log'][_0x53f9c1(0x236)](_0x53f9c1(0x187)+_0x578255[_0x53f9c1(0x1b2)](0x5)[_0x53f9c1(0x112)]());else{if(_0x578255[_0x53f9c1(0x1d3)](_0x53f9c1(0x248)))try{const _0xbc7e1=JSON[_0x53f9c1(0x255)](_0x578255[_0x53f9c1(0x1b2)](0x8)[_0x53f9c1(0x112)]());handlePythonResult(_0x3bfa38,_0xbc7e1);}catch(_0x4e5328){_0x3bfa38[_0x53f9c1(0x1f0)][_0x53f9c1(0x18a)](_0x53f9c1(0x109)+_0x578255);}}_0x578255[_0x53f9c1(0x1fa)](_0x53f9c1(0x11a))&&(_0x3bfa38[_0x53f9c1(0x1f0)][_0x53f9c1(0x116)]('âš ï¸\x20Missing\x20Libs\x20('+_0x578255+_0x53f9c1(0x104)),panicMode=!![],stopPythonService(_0x3bfa38));});}),_0x3bfa38[_0x3e7b83(0x1ac)][_0x3e7b83(0x20c)]['on'](_0x3e7b83(0xf0),_0x5b10c4=>{const _0x57a611=_0x3e7b83,_0x4d36ef=_0x5b10c4[_0x57a611(0x1b7)]()[_0x57a611(0x112)]();if(!_0x4d36ef[_0x57a611(0x1fa)](_0x57a611(0x24d)))_0x3bfa38[_0x57a611(0x1f0)][_0x57a611(0x116)](_0x57a611(0x244)+_0x4d36ef);}),_0x3bfa38['pythonProcess']['on'](_0x3e7b83(0x1b1),_0x498a4e=>{const _0x23cdd0=_0x3e7b83;_0x3bfa38['log'][_0x23cdd0(0x1ab)](_0x23cdd0(0x100)+_0x498a4e),_0x3bfa38['pythonProcess']=null,_0x498a4e!==0x0&&!panicMode&&setTimeout(()=>startPythonService(_0x3bfa38),0x7530);});}catch(_0x3b970d){_0x3bfa38['log']['error'](_0x3e7b83(0x1e8)+_0x3b970d[_0x3e7b83(0x1a7)]);}}function stopPythonService(_0x570aaf){const _0x54f9ab=a0_0x43a482;if(_0x570aaf[_0x54f9ab(0x1ac)]){_0x570aaf['log']['info']('ðŸ\x20Stopping\x20Python...');try{_0x570aaf[_0x54f9ab(0x1ac)][_0x54f9ab(0x23f)]();}catch(_0x32adef){}_0x570aaf[_0x54f9ab(0x1ac)]=null;}}function handlePythonResult(_0x5a5bf6,_0x2cc1e3){const _0x2b6b01=a0_0x43a482;if(_0x2cc1e3['type']===_0x2b6b01(0xb5))_0x5a5bf6[_0x2b6b01(0x1f0)][_0x2b6b01(0x236)](_0x2b6b01(0x208));else{if(_0x2cc1e3[_0x2b6b01(0x20e)]==='SECURITY_RESULT'){const {anomaly_score:_0x1a8c60,is_anomaly:_0x4bcdf9,threshold:_0x16d2ff}=_0x2cc1e3['payload'];_0x5a5bf6['log'][_0x2b6b01(0x1ab)]('ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20'+_0x1a8c60[_0x2b6b01(0xf6)](0x5)+_0x2b6b01(0xf2)+(_0x4bcdf9?_0x2b6b01(0x131):'OK')),_0x5a5bf6[_0x2b6b01(0x177)](_0x2b6b01(0xe4),{'val':_0x1a8c60,'ack':!![]}),_0x5a5bf6[_0x2b6b01(0x177)](_0x2b6b01(0x11e),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x4bcdf9){const _0x98b06d=_0x2b6b01(0x1b4)+_0x1a8c60[_0x2b6b01(0xf6)](0x4)+')';_0x5a5bf6['setStateAsync'](_0x2b6b01(0x1f1),{'val':!![],'ack':!![]}),_0x5a5bf6[_0x2b6b01(0x177)](_0x2b6b01(0x220),{'val':_0x98b06d,'ack':!![]}),sendNotification(_0x5a5bf6,_0x2b6b01(0x137)+_0x98b06d,![],!![]);}}else{if(_0x2cc1e3['type']===_0x2b6b01(0x1b0)){const {success:_0x2d0858,details:_0x520762}=_0x2cc1e3[_0x2b6b01(0xb3)];_0x5a5bf6[_0x2b6b01(0x177)](_0x2b6b01(0x200),{'val':_0x2d0858?_0x2b6b01(0x15d)+new Date()[_0x2b6b01(0x1fe)]()+'\x20('+_0x520762+')':'Failed:\x20'+_0x520762,'ack':!![]});}else{if(_0x2cc1e3['type']===_0x2b6b01(0x1f2)){const {success:_0x771b66,details:_0x38e481}=_0x2cc1e3[_0x2b6b01(0xb3)];if(_0x771b66)try{const _0x555581=JSON[_0x2b6b01(0x255)](_0x38e481);if(_0x555581[_0x2b6b01(0x13b)])_0x5a5bf6[_0x2b6b01(0x177)](_0x2b6b01(0xe6),{'val':JSON['stringify'](_0x555581[_0x2b6b01(0x13b)]),'ack':!![]});if(_0x555581[_0x2b6b01(0x1e9)])_0x5a5bf6[_0x2b6b01(0x177)](_0x2b6b01(0xf9),{'val':JSON[_0x2b6b01(0x16f)](_0x555581['heating']),'ack':!![]});}catch(_0x3a2744){}}else{if(_0x2cc1e3[_0x2b6b01(0x20e)]===_0x2b6b01(0x196)){const {success:_0x454246,details:_0x1124e1}=_0x2cc1e3['payload'];if(_0x454246)_0x5a5bf6[_0x2b6b01(0x1f0)][_0x2b6b01(0x1ab)](_0x2b6b01(0x242)+_0x1124e1);}else{if(_0x2cc1e3['type']===_0x2b6b01(0x11d)){const {is_anomaly:_0x4a8606,details:_0x46e53c}=_0x2cc1e3['payload'];_0x5a5bf6[_0x2b6b01(0x177)](_0x2b6b01(0xce),{'val':new Date()['toISOString'](),'ack':!![]}),_0x5a5bf6[_0x2b6b01(0x177)](_0x2b6b01(0x185),{'val':_0x4a8606,'ack':!![]});}else{if(_0x2cc1e3[_0x2b6b01(0x20e)]===_0x2b6b01(0xba)){const {diagnosis:_0x47b574,change_percent:_0x449dfb}=_0x2cc1e3['payload'];_0x5a5bf6[_0x2b6b01(0x1f0)][_0x2b6b01(0x1ab)](_0x2b6b01(0x1a1)+_0x47b574+'\x20('+_0x449dfb+'%)'),_0x5a5bf6[_0x2b6b01(0x177)]('analysis.health.trendDiagnosis',{'val':_0x47b574,'ack':!![]}),_0x5a5bf6[_0x2b6b01(0x177)](_0x2b6b01(0x122),{'val':_0x449dfb,'ack':!![]});}}}}}}}}function a0_0x19a3(_0x30d41c,_0x28846f){const _0x157c1=a0_0x4a23();return a0_0x19a3=function(_0x4aa6eb,_0x59822e){_0x4aa6eb=_0x4aa6eb-0xaf;let _0x4a239f=_0x157c1[_0x4aa6eb];return _0x4a239f;},a0_0x19a3(_0x30d41c,_0x28846f);}function sendToPython(_0x1f988b,_0x56f37b,_0x204166={}){const _0x5a187b=a0_0x43a482;if(!_0x1f988b[_0x5a187b(0x1ac)]||!_0x1f988b[_0x5a187b(0x1ac)][_0x5a187b(0xcb)][_0x5a187b(0x22a)])return;const _0x415140=JSON[_0x5a187b(0x16f)]({'command':_0x56f37b,..._0x204166});try{_0x1f988b['pythonProcess']['stdin'][_0x5a187b(0x164)](_0x415140+'\x0a');}catch(_0x5c5259){}}async function initSensorSubscriptions(_0x299ef6){const _0x443f41=a0_0x43a482,_0x18fb0a=_0x299ef6[_0x443f41(0x23e)][_0x443f41(0x1ce)];if(_0x18fb0a)for(const _0x40ea6b of _0x18fb0a){await _0x299ef6['subscribeForeignStatesAsync'](_0x40ea6b['id']);}}async function initPresenceSubscriptions(_0x282e65){const _0x4e5db3=a0_0x43a482,_0x1c853a=_0x282e65['config'][_0x4e5db3(0x24a)];if(_0x1c853a)for(const _0x20595c of _0x1c853a){await _0x282e65[_0x4e5db3(0x252)](_0x20595c);}}async function setupTelegramListener(_0x19e61e){const _0x29583c=a0_0x43a482,_0x3ddd19=_0x19e61e[_0x29583c(0x23e)]['notifyTelegramInstance'];if(_0x19e61e[_0x29583c(0x23e)][_0x29583c(0x138)]&&_0x3ddd19)await _0x19e61e[_0x29583c(0x252)](_0x3ddd19+_0x29583c(0x1c9));}async function checkWifiPresence(_0x4c3515){const _0x4958d8=a0_0x43a482;try{const _0x289fec=_0x4c3515['config'][_0x4958d8(0x24a)]||[];let _0x310c0a=![];const _0x472836=[];for(const _0x509354 of _0x289fec){try{const _0x59437d=await _0x4c3515[_0x4958d8(0x243)](_0x509354);_0x59437d&&(_0x59437d[_0x4958d8(0x25e)]===!![]||_0x59437d['val']===_0x4958d8(0x1cc)||_0x59437d[_0x4958d8(0x25e)]===0x1)&&(_0x310c0a=!![],_0x472836['push'](_0x509354));}catch(_0x52489d){}}return await _0x4c3515['setStateAsync']('system.presenceWho',{'val':_0x472836[_0x4958d8(0x1e0)](',\x20'),'ack':!![]}),_0x310c0a&&(_0x4c3515[_0x4958d8(0xca)]&&(_0x4c3515[_0x4958d8(0x1f0)][_0x4958d8(0x1ab)](_0x4958d8(0x127)),abortExitTimer(_0x4c3515)),!_0x4c3515['isPresent']&&_0x4c3515['currentSystemMode']===SYSTEM_MODES[_0x4958d8(0x1a9)]&&await setPresence(_0x4c3515,!![])),_0x310c0a;}catch(_0x2d6abf){return![];}}function startExitTimer(_0x340b27){const _0x25bdbf=a0_0x43a482;abortExitTimer(_0x340b27),_0x340b27[_0x25bdbf(0x219)]=!![],_0x340b27[_0x25bdbf(0x13f)]=setTimeout(()=>{_0x340b27['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x340b27[_0x25bdbf(0xca)]=setTimeout(()=>{const _0x2f13eb=_0x25bdbf;setPresence(_0x340b27,![]),_0x340b27[_0x2f13eb(0xca)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x57efea){const _0x594f8d=a0_0x43a482;if(_0x57efea[_0x594f8d(0xca)])clearTimeout(_0x57efea[_0x594f8d(0xca)]);if(_0x57efea[_0x594f8d(0x13f)])clearTimeout(_0x57efea[_0x594f8d(0x13f)]);_0x57efea[_0x594f8d(0xca)]=null,_0x57efea[_0x594f8d(0x13f)]=null,_0x57efea['isGracePeriodActive']=![];}async function setPresence(_0x44d35f,_0x6a554e){const _0x25b236=a0_0x43a482;if(_0x44d35f['isPresent']===_0x6a554e)return;_0x44d35f[_0x25b236(0x179)]=_0x6a554e,await _0x44d35f[_0x25b236(0x177)]('system.isPresent',{'val':_0x6a554e,'ack':!![]});}async function executeAutomationAction(_0x40c73d){const _0x194d66=a0_0x43a482;try{const _0x31e21d=await _0x40c73d[_0x194d66(0x113)]('analysis.automation.targetId'),_0xae87fc=await _0x40c73d[_0x194d66(0x113)]('analysis.automation.targetValue');if(_0x31e21d&&_0x31e21d[_0x194d66(0x25e)]&&_0xae87fc){const _0x43b230=_0x31e21d[_0x194d66(0x25e)];let _0x3e5794=_0xae87fc[_0x194d66(0x25e)];try{_0x3e5794=JSON[_0x194d66(0x255)](_0x3e5794);}catch(_0x350b5b){}_0x40c73d[_0x194d66(0x1f0)][_0x194d66(0x1ab)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x43b230+_0x194d66(0x201)+_0x3e5794),await _0x40c73d[_0x194d66(0x1cd)](_0x43b230,_0x3e5794);}else _0x40c73d[_0x194d66(0x1f0)]['warn'](_0x194d66(0xef));}catch(_0x3d646a){_0x40c73d[_0x194d66(0x1f0)][_0x194d66(0x116)]('BUTLER\x20Execution\x20Error:\x20'+_0x3d646a[_0x194d66(0x1a7)]);}}async function handleTelegramResponse(_0x1c690d,_0x556c10){const _0x103a59=a0_0x43a482;let _0xfc51a0=_0x556c10;_0x556c10['startsWith']('[')&&(_0xfc51a0=_0x556c10[_0x103a59(0x1b2)](_0x556c10[_0x103a59(0x16e)](']')+0x1));if(_0xfc51a0===_0x103a59(0x111))await _0x1c690d['setStateAsync'](_0x103a59(0x1f1),{'val':![],'ack':!![]}),await _0x1c690d[_0x103a59(0x177)](_0x103a59(0x220),{'val':_0x103a59(0xe1),'ack':!![]}),_0x1c690d['lastAlertState']=![],sendNotification(_0x1c690d,_0x103a59(0x21f),![]);else _0xfc51a0===_0x103a59(0x1d9)&&sendNotification(_0x1c690d,_0x103a59(0x249),![],!![]);}async function sendNotification(_0x11b0df,_0xde4d7d,_0x2652de=![],_0x146b3c=![]){const _0x15706f=a0_0x43a482,_0x44e4fa=_0x11b0df[_0x15706f(0x23e)];if(_0x44e4fa[_0x15706f(0x138)]){let _0x3f8d45={};(_0xde4d7d[_0x15706f(0x1fa)](_0x15706f(0x188))||_0x146b3c)&&(_0x3f8d45={'reply_markup':{'inline_keyboard':[[{'text':_0x15706f(0x23a),'callback_data':_0x15706f(0x111)}],[{'text':'ðŸ“ž\x20RÃ¼ckruf\x20anfordern','callback_data':_0x15706f(0x1d9)}]]}}),await _0x11b0df['sendToAsync'](_0x44e4fa[_0x15706f(0x1c0)],_0x15706f(0x1c8),{'text':_0xde4d7d,'user':_0x44e4fa['notifyTelegramRecipient'],..._0x3f8d45});}if(_0x44e4fa[_0x15706f(0x207)]){let _0x2809c6={'message':_0xde4d7d,'title':_0x146b3c?'ðŸš¨\x20EMERGENCY':_0x15706f(0x1c7),'priority':_0x146b3c?0x2:0x1,'device':_0x44e4fa[_0x15706f(0x19c)]};_0x146b3c&&(_0x2809c6[_0x15706f(0x1eb)]=0x1e,_0x2809c6['expire']=0xe10,_0x2809c6[_0x15706f(0x180)]='siren'),await _0x11b0df[_0x15706f(0x18c)](_0x44e4fa[_0x15706f(0x237)],'send',_0x2809c6);}_0x44e4fa[_0x15706f(0x1c1)]&&await _0x11b0df[_0x15706f(0x18c)](_0x44e4fa['notifyEmailInstance'],_0x15706f(0x1c8),{'text':_0xde4d7d,'to':_0x44e4fa[_0x15706f(0x1ff)]});}async function runAutopilot(_0x299420){const _0x14386a=a0_0x43a482,_0x4c039b=_0x299420[_0x14386a(0x23e)][_0x14386a(0x146)],_0x43a63d=_0x299420[_0x14386a(0x168)]['length']>0x0?_0x299420[_0x14386a(0x168)][0x0][_0x14386a(0x223)]:Date['now'](),_0x10e3b0=(Date[_0x14386a(0x20f)]()-_0x43a63d)/(0x3e8*0x3c*0x3c);let _0x2af808='';_0x299420[_0x14386a(0x23e)][_0x14386a(0x261)]&&_0x299420[_0x14386a(0x121)]===SYSTEM_MODES[_0x14386a(0x1a9)]&&_0x299420[_0x14386a(0x179)]&&(_0x10e3b0>_0x4c039b&&(_0x2af808=_0x14386a(0x1ca)+_0x10e3b0[_0x14386a(0xf6)](0x1)+'h.')),runGeminiAnalysis(_0x299420,_0x2af808);}async function runPythonHealthCheck(_0x3f5b7a){const _0x30ad76=a0_0x43a482;if(!_0x3f5b7a[_0x30ad76(0x1ea)]||_0x3f5b7a[_0x30ad76(0x1ea)]['length']<0x2)return;const _0x58529a=_0x3f5b7a[_0x30ad76(0x1ea)]['map'](_0xdbf3ff=>{const _0x347ce1=_0x30ad76,_0x3db384=(_0xdbf3ff[_0x347ce1(0x195)]||'')[_0x347ce1(0x239)]();return ACTIVITY_LEVEL_MAP[_0x3db384]||0x32;});sendToPython(_0x3f5b7a,_0x30ad76(0x102),{'values':_0x58529a,'tag':_0x30ad76(0x1e3)});}function setupLtmScheduler(_0x48ebe9){const _0x1ad4ad=a0_0x43a482;try{if(_0x48ebe9[_0x1ad4ad(0xc5)])_0x48ebe9[_0x1ad4ad(0xc5)]['cancel']();if(!_0x48ebe9['isProVersion'])return;_0x48ebe9[_0x1ad4ad(0xc5)]=schedule[_0x1ad4ad(0xc8)](LTM_SCHEDULE,()=>createDailyDigest(_0x48ebe9));}catch(_0x3dcb03){_0x48ebe9[_0x1ad4ad(0x1f0)][_0x1ad4ad(0x116)](_0x1ad4ad(0x16b)+_0x3dcb03['message']);}}function setupModeResetScheduler(_0x5b00cd){const _0x37fef6=a0_0x43a482;try{if(_0x5b00cd['modeResetJob'])_0x5b00cd[_0x37fef6(0xf8)][_0x37fef6(0x18d)]();_0x5b00cd[_0x37fef6(0xf8)]=schedule[_0x37fef6(0xc8)](MODE_RESET_SCHEDULE,async()=>{const _0x34739f=_0x37fef6;await loadSystemMode(_0x5b00cd),AUTO_RESET_MODES[_0x34739f(0x1fa)](_0x5b00cd[_0x34739f(0x121)])&&await _0x5b00cd[_0x34739f(0x177)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x34739f(0x1a9)],'ack':![]});});}catch(_0x5c509d){_0x5b00cd[_0x37fef6(0x1f0)]['error'](_0x37fef6(0x144)+_0x5c509d[_0x37fef6(0x1a7)]);}}function setupDriftAnalysisScheduler(_0x4fc9fd){const _0x1b4c2a=a0_0x43a482;try{if(_0x4fc9fd[_0x1b4c2a(0x1c2)])clearInterval(_0x4fc9fd[_0x1b4c2a(0x1c2)]);if(!_0x4fc9fd[_0x1b4c2a(0x1d7)])return;_0x4fc9fd[_0x1b4c2a(0x1c2)]=setInterval(()=>runBaselineDriftAnalysis(_0x4fc9fd),(_0x4fc9fd[_0x1b4c2a(0x23e)][_0x1b4c2a(0x1a3)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x4fc9fd),0x1388);}catch(_0xad71c4){_0x4fc9fd['log'][_0x1b4c2a(0x116)]('Drift\x20Sched\x20Error:\x20'+_0xad71c4[_0x1b4c2a(0x1a7)]);}}function setupBriefingScheduler(_0x4e2dc9){const _0x31d123=a0_0x43a482;try{if(_0x4e2dc9[_0x31d123(0x1a5)])_0x4e2dc9[_0x31d123(0x1a5)][_0x31d123(0x18d)]();if(!_0x4e2dc9[_0x31d123(0x23e)][_0x31d123(0x1a8)])return;const _0x4a6075=(_0x4e2dc9[_0x31d123(0x23e)][_0x31d123(0x107)]||'08:00')[_0x31d123(0xec)](':'),_0x3af14d=parseInt(_0x4a6075[0x0])||0x8,_0x84634a=parseInt(_0x4a6075[0x1])||0x0,_0x42710c=_0x84634a+'\x20'+_0x3af14d+_0x31d123(0x256);_0x4e2dc9['briefingJob']=schedule['scheduleJob'](_0x42710c,()=>{sendMorningBriefing(_0x4e2dc9);});}catch(_0x2d6609){_0x4e2dc9[_0x31d123(0x1f0)][_0x31d123(0x116)](_0x31d123(0x118)+_0x2d6609[_0x31d123(0x1a7)]);}}class CogniLiving extends utils[a0_0x43a482(0x103)]{constructor(_0x169ec4){const _0x3b7a01=a0_0x43a482;super({..._0x169ec4,'name':_0x3b7a01(0x20d)}),this[_0x3b7a01(0x168)]=[],this[_0x3b7a01(0x21c)]=[],this[_0x3b7a01(0xc3)]=[],this[_0x3b7a01(0x1ea)]=[],this['sensorLastValues']={},this[_0x3b7a01(0x11b)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x3b7a01(0x179)]=!![],this[_0x3b7a01(0xca)]=null,this[_0x3b7a01(0x13f)]=null,this[_0x3b7a01(0x219)]=![],this[_0x3b7a01(0xe9)]=null,this[_0x3b7a01(0x258)]=null,this['currentSystemMode']=SYSTEM_MODES[_0x3b7a01(0x1a9)],this[_0x3b7a01(0x1d7)]=![],this['lastAlertState']=![],this[_0x3b7a01(0x13a)]=_0x3b7a01(0x25b),this[_0x3b7a01(0xb0)]=null,this['ltmJob']=null,this[_0x3b7a01(0xf8)]=null,this[_0x3b7a01(0x1c2)]=null,this[_0x3b7a01(0x1a5)]=null,this[_0x3b7a01(0x1ac)]=null,this[_0x3b7a01(0x14b)]=![],this[_0x3b7a01(0x1d4)]=[],this[_0x3b7a01(0x24c)]=null,this['on']('ready',this['onReady'][_0x3b7a01(0x22e)](this)),this['on'](_0x3b7a01(0x1c3),this[_0x3b7a01(0x25f)]['bind'](this)),this['on'](_0x3b7a01(0x1a0),this[_0x3b7a01(0xe5)][_0x3b7a01(0x22e)](this)),this['on'](_0x3b7a01(0x1a7),this[_0x3b7a01(0x1b3)][_0x3b7a01(0x22e)](this));}async[a0_0x43a482(0x25d)](){const _0x38ca6f=a0_0x43a482;this[_0x38ca6f(0x1f0)][_0x38ca6f(0x1ab)](_0x38ca6f(0x13c)+this['version']+_0x38ca6f(0x21e)),await initZombies(this),this[_0x38ca6f(0x23e)][_0x38ca6f(0x153)]=this['config'][_0x38ca6f(0x153)]||'';try{this[_0x38ca6f(0x1d7)]=await checkLicense(this,this[_0x38ca6f(0x23e)][_0x38ca6f(0x153)]);}catch(_0x4efca4){}if(!this['config'][_0x38ca6f(0x146)]||this[_0x38ca6f(0x23e)]['inactivityThresholdHours']<0.1)this[_0x38ca6f(0x23e)][_0x38ca6f(0x146)]=0xc;await initHistory(this),await initSystemConfig(this);if(this[_0x38ca6f(0x23e)][_0x38ca6f(0x1d8)])try{this[_0x38ca6f(0xe9)]=new GoogleGenerativeAI(this[_0x38ca6f(0x23e)][_0x38ca6f(0x1d8)]),this[_0x38ca6f(0x258)]=this['genAI'][_0x38ca6f(0x15b)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x38ca6f(0x1f0)][_0x38ca6f(0x1ab)](_0x38ca6f(0xb1));}catch(_0x45307b){this[_0x38ca6f(0x1f0)]['error'](_0x38ca6f(0x172)+_0x45307b[_0x38ca6f(0x1a7)]);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this[_0x38ca6f(0x10f)](_0x38ca6f(0x178)),this[_0x38ca6f(0x10f)](LTM_DP_TRIGGER_DIGEST),this[_0x38ca6f(0x10f)](_0x38ca6f(0x181)),this[_0x38ca6f(0x10f)](_0x38ca6f(0x19f)),this[_0x38ca6f(0x10f)]('analysis.automation.triggerAction'),this['subscribeStates'](_0x38ca6f(0x225)),this[_0x38ca6f(0x10f)]('analysis.training.triggerSecurity'),this['subscribeStates']('analysis.training.triggerHealth'),this[_0x38ca6f(0x10f)](_0x38ca6f(0xe8)),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this),setTimeout(()=>checkWifiPresence(this),0x1388);if(this['analysisTimer'])clearInterval(this[_0x38ca6f(0xb0)]);const _0x1a9bea=this[_0x38ca6f(0x23e)][_0x38ca6f(0x1d1)]||0xf;_0x1a9bea>0x0&&(this[_0x38ca6f(0xb0)]=setInterval(()=>{runAutopilot(this);},_0x1a9bea*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this),startPythonService(this),setTimeout(()=>{if(this['pythonProcess'])runPythonHealthCheck(this);},0x1388);}[a0_0x43a482(0xe5)](_0xecb4cc){const _0x25849c=a0_0x43a482;if(this[_0x25849c(0xb0)])clearInterval(this[_0x25849c(0xb0)]);if(this[_0x25849c(0x1c2)])clearInterval(this[_0x25849c(0x1c2)]);if(this[_0x25849c(0xc5)])this['ltmJob'][_0x25849c(0x18d)]();if(this['modeResetJob'])this[_0x25849c(0xf8)][_0x25849c(0x18d)]();if(this[_0x25849c(0x1a5)])this['briefingJob'][_0x25849c(0x18d)]();if(this['exitTimer'])clearTimeout(this[_0x25849c(0xca)]);if(this[_0x25849c(0x13f)])clearTimeout(this[_0x25849c(0x13f)]);stopPythonService(this),_0xecb4cc();}async['onStateChange'](_0x1f715c,_0x4dacd9){const _0x1b19f4=a0_0x43a482;if(!_0x4dacd9)return;if(this[_0x1b19f4(0x14b)]||panicMode)return;if(_0x1f715c[_0x1b19f4(0x1fa)](_0x1b19f4(0xc1))&&_0x1f715c['endsWith'](_0x1b19f4(0x154))&&_0x4dacd9[_0x1b19f4(0x25e)]){await handleTelegramResponse(this,_0x4dacd9[_0x1b19f4(0x25e)]);return;}if(_0x1f715c===this['namespace']+'.'+SYSTEM_DP_MODE){_0x4dacd9[_0x1b19f4(0x25e)]&&Object[_0x1b19f4(0x17b)](SYSTEM_MODES)[_0x1b19f4(0x1fa)](_0x4dacd9[_0x1b19f4(0x25e)])&&(this[_0x1b19f4(0x121)]=_0x4dacd9[_0x1b19f4(0x25e)],_0x4dacd9[_0x1b19f4(0x25e)]===SYSTEM_MODES[_0x1b19f4(0x235)]?await setPresence(this,![]):await setPresence(this,!![]));if(!_0x4dacd9[_0x1b19f4(0x1ae)])this[_0x1b19f4(0x162)](_0x1f715c,{'val':this[_0x1b19f4(0x121)],'ack':!![]});return;}if(!_0x4dacd9[_0x1b19f4(0x1ae)]){_0x1f715c[_0x1b19f4(0x1fa)]('analysis.trigger')&&_0x4dacd9[_0x1b19f4(0x25e)]&&(this[_0x1b19f4(0x162)](_0x1f715c,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x1f715c[_0x1b19f4(0x1fa)](_0x1b19f4(0x14a))&&_0x4dacd9[_0x1b19f4(0x25e)]){this[_0x1b19f4(0x162)](_0x1f715c,{'val':![],'ack':!![]});if(this['isProVersion'])createDailyDigest(this);}_0x1f715c[_0x1b19f4(0x1fa)]('triggerBriefing')&&_0x4dacd9['val']&&(this['setState'](_0x1f715c,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x1f715c[_0x1b19f4(0x1fa)](_0x1b19f4(0xe7))&&_0x4dacd9[_0x1b19f4(0x25e)]&&(this[_0x1b19f4(0x162)](_0x1f715c,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x1f715c['includes'](_0x1b19f4(0x1c5))&&_0x4dacd9[_0x1b19f4(0x25e)]){this[_0x1b19f4(0x162)](_0x1f715c,{'val':![],'ack':!![]});if(!this['isProVersion'])return;try{const _0x562a8f=await this[_0x1b19f4(0x113)](_0x1b19f4(0x1a2));if(_0x562a8f&&_0x562a8f[_0x1b19f4(0x25e)]){const _0xb3e566=JSON['parse'](_0x562a8f[_0x1b19f4(0x25e)]);this[_0x1b19f4(0x1f0)][_0x1b19f4(0x1ab)](_0x1b19f4(0x140)+_0xb3e566[_0x1b19f4(0x22b)]+_0x1b19f4(0x222)),this[_0x1b19f4(0x177)](_0x1b19f4(0x200),{'val':_0x1b19f4(0xc9),'ack':!![]}),sendToPython(this,'TRAIN_SECURITY',{'sequences':_0xb3e566});}}catch(_0x261a0e){this[_0x1b19f4(0x1f0)][_0x1b19f4(0x116)](_0x1b19f4(0xfd)+_0x261a0e[_0x1b19f4(0x1a7)]);}}if(_0x1f715c[_0x1b19f4(0x1fa)]('analysis.training.triggerHealth')&&_0x4dacd9[_0x1b19f4(0x25e)]){this['setState'](_0x1f715c,{'val':![],'ack':!![]});if(!this[_0x1b19f4(0x1d7)])return;try{const _0x289851=await this[_0x1b19f4(0x113)](LTM_DP_DAILY_DIGESTS);_0x289851&&_0x289851[_0x1b19f4(0x25e)]&&sendToPython(this,_0x1b19f4(0x10b),{'digests':JSON['parse'](_0x289851[_0x1b19f4(0x25e)])});}catch(_0x57ac5c){}}if(_0x1f715c[_0x1b19f4(0x1fa)](_0x1b19f4(0xe8))&&_0x4dacd9[_0x1b19f4(0x25e)]){this[_0x1b19f4(0x162)](_0x1f715c,{'val':![],'ack':!![]});if(!this[_0x1b19f4(0x1d7)])return;try{const _0x8189c8=await this[_0x1b19f4(0x113)]('LTM.trainingData.thermodynamics');_0x8189c8&&_0x8189c8[_0x1b19f4(0x25e)]&&sendToPython(this,_0x1b19f4(0x115),{'points':JSON['parse'](_0x8189c8[_0x1b19f4(0x25e)])});}catch(_0x18d732){}}return;}if(this['config'][_0x1b19f4(0x24a)]&&this[_0x1b19f4(0x23e)][_0x1b19f4(0x24a)]['includes'](_0x1f715c)){await checkWifiPresence(this);return;}const _0x57fdd0=(this[_0x1b19f4(0x23e)][_0x1b19f4(0x1ce)]||[])[_0x1b19f4(0x1ee)](_0x42d04a=>_0x42d04a['id']===_0x1f715c);if(_0x57fdd0)processSensorEvent(this,_0x1f715c,_0x4dacd9,_0x57fdd0);}async[a0_0x43a482(0x1b3)](_0x9de304){const _0x2f9016=a0_0x43a482;if(typeof _0x9de304===_0x2f9016(0x158)&&_0x9de304[_0x2f9016(0x1a7)]){if(_0x9de304['command']===_0x2f9016(0x1bd)){const _0x59a961=_0x9de304[_0x2f9016(0x1a7)][_0x2f9016(0x170)]||this[_0x2f9016(0x23e)][_0x2f9016(0x1d8)];if(!_0x59a961)return this[_0x2f9016(0xbc)](_0x9de304['from'],_0x9de304[_0x2f9016(0x1fb)],{'success':![],'message':'Kein\x20API\x20Key.'},_0x9de304[_0x2f9016(0x1f8)]);try{const _0x48f0b3=new GoogleGenerativeAI(_0x59a961),_0x123cdb=_0x48f0b3[_0x2f9016(0x15b)]({'model':GEMINI_MODEL}),_0x5af763=await _0x123cdb[_0x2f9016(0x1d6)]('Hi');this[_0x2f9016(0xbc)](_0x9de304[_0x2f9016(0x1bf)],_0x9de304[_0x2f9016(0x1fb)],{'success':!![],'message':_0x2f9016(0x133)+_0x5af763[_0x2f9016(0xcc)]['text']()},_0x9de304[_0x2f9016(0x1f8)]);}catch(_0x1c1e3f){this[_0x2f9016(0xbc)](_0x9de304[_0x2f9016(0x1bf)],_0x9de304[_0x2f9016(0x1fb)],{'success':![],'message':'Err:\x20'+_0x1c1e3f['message']},_0x9de304[_0x2f9016(0x1f8)]);}}else{if(_0x9de304[_0x2f9016(0x1fb)]===_0x2f9016(0xf1)){const _0x11e61c=await getWeatherContext(this),_0x4e6620=await getCalendarContext(this);this[_0x2f9016(0xbc)](_0x9de304['from'],_0x9de304[_0x2f9016(0x1fb)],{'success':!![],'weather':_0x11e61c,'calendar':_0x4e6620},_0x9de304[_0x2f9016(0x1f8)]);}else{if(_0x9de304[_0x2f9016(0x1fb)]==='getLtmData'){if(!this[_0x2f9016(0x1d7)])return this[_0x2f9016(0xbc)](_0x9de304[_0x2f9016(0x1bf)],_0x9de304['command'],{'success':![],'isPro':![]},_0x9de304[_0x2f9016(0x1f8)]);let _0x3eaef7={'status':_0x2f9016(0x12c),'details':''};try{const _0x35c36b=await this[_0x2f9016(0x113)](LTM_DP_DRIFT_STATUS),_0x5af26c=await this[_0x2f9016(0x113)](LTM_DP_DRIFT_DETAILS);_0x3eaef7[_0x2f9016(0xe0)]=_0x35c36b?_0x35c36b[_0x2f9016(0x25e)]:_0x2f9016(0x12c),_0x3eaef7['details']=_0x5af26c?_0x5af26c[_0x2f9016(0x25e)]:'';}catch(_0x68cc39){}this['sendTo'](_0x9de304[_0x2f9016(0x1bf)],_0x9de304[_0x2f9016(0x1fb)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x2f9016(0x1ea)],'driftAnalysis':_0x3eaef7,'analysisHistory':this[_0x2f9016(0x21c)]},_0x9de304['callback']);}else{if(_0x9de304[_0x2f9016(0x1fb)]===_0x2f9016(0x1f6)){const _0x3b4b97=this['dailyDigests'][_0x2f9016(0x22b)],_0x44e2aa=new Date(),_0x47bc3c=new Date(_0x44e2aa[_0x2f9016(0xfb)](),_0x44e2aa[_0x2f9016(0x204)](),_0x44e2aa[_0x2f9016(0x125)]())[_0x2f9016(0x250)](),_0x50725b=this[_0x2f9016(0xc3)][_0x2f9016(0xdb)](_0x29fa76=>new Date(_0x29fa76[_0x2f9016(0x223)])[_0x2f9016(0x250)]()>_0x47bc3c)[_0x2f9016(0x22b)],_0xdee40a=new Array(0x18)[_0x2f9016(0x14c)](0x0);this[_0x2f9016(0xc3)][_0x2f9016(0x145)](_0x30a733=>{const _0x300c2e=_0x2f9016,_0x59b8a9=new Date(_0x30a733['timestamp']);if(_0x59b8a9[_0x300c2e(0x250)]()>_0x47bc3c)_0xdee40a[_0x59b8a9['getHours']()]++;});let _0x28c37a={'status':_0x2f9016(0x12c)};try{const _0x4da303=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x28c37a[_0x2f9016(0xe0)]=_0x4da303?_0x4da303['val']:_0x2f9016(0x12c);}catch(_0x4b7950){}let _0x177d76='';try{const _0x71af3f=await this[_0x2f9016(0x113)](_0x2f9016(0x10e));_0x177d76=_0x71af3f?_0x71af3f[_0x2f9016(0x25e)]:'';}catch(_0x255f21){}let _0x4126ba=null;!this[_0x2f9016(0x258)]&&(_0x4126ba=this[_0x2f9016(0x23e)][_0x2f9016(0x1d8)]?_0x2f9016(0x21a):_0x2f9016(0x224));let _0x19bcfa={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x18df4b=await this[_0x2f9016(0x113)]('analysis.automation.patternDetected'),_0x2f80ec=await this['getStateAsync'](_0x2f9016(0x1f9)),_0x18de82=await this[_0x2f9016(0x113)](_0x2f9016(0xde)),_0x11d3c8=await this[_0x2f9016(0x113)](_0x2f9016(0x1b6)),_0x545538=await this['getStateAsync'](_0x2f9016(0x225));_0x18df4b&&_0x18df4b[_0x2f9016(0x25e)]&&(_0x19bcfa[_0x2f9016(0x1f5)]=!![],_0x19bcfa['description']=_0x2f80ec?_0x2f80ec[_0x2f9016(0x25e)]:'',_0x19bcfa[_0x2f9016(0x1ef)]=_0x18de82?_0x18de82[_0x2f9016(0x25e)]:'',_0x19bcfa['targetValue']=_0x11d3c8?_0x11d3c8[_0x2f9016(0x25e)]:''),_0x19bcfa[_0x2f9016(0xc6)]=_0x545538?!!_0x545538[_0x2f9016(0x25e)]:![];}catch(_0x55c73e){}this[_0x2f9016(0xbc)](_0x9de304['from'],_0x9de304[_0x2f9016(0x1fb)],{'success':!![],'eventHistory':this['eventHistory'][_0x2f9016(0x198)](0x0,0xf),'stats':{'digestCount':_0x3b4b97,'eventCountToday':_0x50725b,'hourlyActivity':_0xdee40a,'driftStatus':_0x28c37a[_0x2f9016(0xe0)],'isPresent':this[_0x2f9016(0x179)],'presenceWho':_0x177d76,'minDays':this[_0x2f9016(0x23e)][_0x2f9016(0x123)]||0x7,'stbDays':this[_0x2f9016(0x23e)][_0x2f9016(0x1d0)]||0xe,'ltbDays':this[_0x2f9016(0x23e)][_0x2f9016(0x21d)]||0x3c,'systemError':_0x4126ba},'automation':_0x19bcfa},_0x9de304[_0x2f9016(0x1f8)]);}else{if(_0x9de304[_0x2f9016(0x1fb)]===_0x2f9016(0xbf))try{const _0x273f3f=await scanForDevices(this,_0x9de304[_0x2f9016(0x1a7)]||{});this[_0x2f9016(0xbc)](_0x9de304[_0x2f9016(0x1bf)],_0x9de304[_0x2f9016(0x1fb)],{'success':!![],'devices':_0x273f3f},_0x9de304[_0x2f9016(0x1f8)]);}catch(_0x3c0660){this[_0x2f9016(0xbc)](_0x9de304[_0x2f9016(0x1bf)],_0x9de304[_0x2f9016(0x1fb)],{'success':![],'error':_0x3c0660[_0x2f9016(0x1a7)]},_0x9de304['callback']);}else{if(_0x9de304[_0x2f9016(0x1fb)]==='getEnums'){const _0x13c4b5=await this['getForeignObjectsAsync']('enum.functions.*',_0x2f9016(0xfc)),_0x65ba54=[];if(_0x13c4b5)for(const _0x2e0d48 in _0x13c4b5){const _0x106135=_0x13c4b5[_0x2e0d48],_0x17ca5b=(_0x106135[_0x2f9016(0x18f)]&&typeof _0x106135[_0x2f9016(0x18f)][_0x2f9016(0x202)]==='object'?_0x106135[_0x2f9016(0x18f)]['name']['de']:_0x106135[_0x2f9016(0x18f)]['name'])||_0x106135[_0x2f9016(0x18f)][_0x2f9016(0x202)];_0x65ba54[_0x2f9016(0x216)]({'id':_0x2e0d48,'name':_0x17ca5b});}this['sendTo'](_0x9de304[_0x2f9016(0x1bf)],_0x9de304[_0x2f9016(0x1fb)],{'success':!![],'enums':_0x65ba54},_0x9de304[_0x2f9016(0x1f8)]);}else{if(_0x9de304['command']===_0x2f9016(0x151)){const _0x9e180=_0x9de304[_0x2f9016(0x1a7)][_0x2f9016(0x141)];if(!_0x9e180)return this[_0x2f9016(0xbc)](_0x9de304[_0x2f9016(0x1bf)],_0x9de304[_0x2f9016(0x1fb)],{'success':![],'error':'No\x20instance'},_0x9de304[_0x2f9016(0x1f8)]);const _0x22769c=await getCalendarNames(this,_0x9e180);this[_0x2f9016(0xbc)](_0x9de304[_0x2f9016(0x1bf)],_0x9de304[_0x2f9016(0x1fb)],{'success':!![],'names':_0x22769c},_0x9de304[_0x2f9016(0x1f8)]);}else{if(_0x9de304[_0x2f9016(0x1fb)]==='simulateButler'){const {targetId:_0x55caee,targetValue:_0x470b9c}=_0x9de304[_0x2f9016(0x1a7)];this[_0x2f9016(0x1f0)][_0x2f9016(0x1ab)](_0x2f9016(0x23d)+_0x55caee+'\x20=\x20'+_0x470b9c),await this['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this['setStateAsync'](_0x2f9016(0x1f9),{'val':_0x2f9016(0x251)+_0x55caee,'ack':!![]}),await this[_0x2f9016(0x177)]('analysis.automation.targetId',{'val':_0x55caee,'ack':!![]}),await this[_0x2f9016(0x177)](_0x2f9016(0x1b6),{'val':_0x470b9c,'ack':!![]}),this[_0x2f9016(0xbc)](_0x9de304['from'],_0x9de304[_0x2f9016(0x1fb)],{'success':!![]},_0x9de304[_0x2f9016(0x1f8)]);}else{if(_0x9de304[_0x2f9016(0x1fb)]===_0x2f9016(0x22c)){const {historyId:_0x307baa,rating:_0x52c8a1,comment:_0x1ccdaf,alertReason:_0x3cfacb}=_0x9de304['message'];_0x307baa&&_0x52c8a1?(await saveFeedback(this,{'timestamp':Date[_0x2f9016(0x20f)](),'historyId':_0x307baa,'rating':_0x52c8a1,'comment':_0x1ccdaf,'alertReason':_0x3cfacb}),this[_0x2f9016(0xbc)](_0x9de304[_0x2f9016(0x1bf)],_0x9de304[_0x2f9016(0x1fb)],{'success':!![]},_0x9de304[_0x2f9016(0x1f8)])):this[_0x2f9016(0xbc)](_0x9de304[_0x2f9016(0x1bf)],_0x9de304[_0x2f9016(0x1fb)],{'success':![],'error':_0x2f9016(0x186)},_0x9de304[_0x2f9016(0x1f8)]);}else _0x9de304[_0x2f9016(0x1fb)]===_0x2f9016(0x14e)&&(this[_0x2f9016(0x1f0)][_0x2f9016(0x1ab)](_0x2f9016(0x246)),await this[_0x2f9016(0x177)](_0x2f9016(0x12f),{'val':![],'ack':!![]}),await this[_0x2f9016(0x177)](_0x2f9016(0x1f9),{'val':'','ack':!![]}),this[_0x2f9016(0xbc)](_0x9de304[_0x2f9016(0x1bf)],_0x9de304[_0x2f9016(0x1fb)],{'success':!![]},_0x9de304[_0x2f9016(0x1f8)]));}}}}}}}}}}}if(require[a0_0x43a482(0x129)]!==module)module['exports']=_0x40356c=>new CogniLiving(_0x40356c);else new CogniLiving();