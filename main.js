function a0_0x120b(){const _0x6508de=['ðŸ›¡ï¸\x20SECURITY:\x20Sending\x20sequence\x20to\x20Guard\x20for\x20analysis...','Trend\x20Value','telegram','AI\x20Training','WiFi\x20Presence\x20detected.','actual_temperature','ANALYZE_HEALTH','Unbekannt','briefingJob','0\x203\x20*\x20*\x20*','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','trim','Description','SECURITY_RESULT','N/A','val','Event\x20History','getEnums','exitTimer','subscribeStates','getStateAsync','geminiModel','name','namespace','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','dimmer','VACATION','latitude','Restoring\x20sensor\x20cache\x20from\x20history\x20(','âœ…\x20Alarm\x20quittiert.\x20System\x20normal.','notifyEmailInstance','eventHistory','system.','LTM.baselineStatus','events.history_debug_00','some','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','party','âš ï¸\x20VENV\x20missing.\x20Installing...','Heating\x20Score','LTM.triggerDailyDigest','system.mode','briefingTime','ical.0','ltmJob','cogni-living','PONG','analysis.automation.description','\x20events)...','Digest','.\x20SYSTEM_MODE:\x20','analysis.automation.autoApply','boolean','flot.','onUnload','python3','error','python_service','enum','kill','pip.exe','submitFeedback','setpoint','blind','push','_calName','Drift\x20Sched\x20Error:\x20','Feedback:\x20','doors','getObjectAsync','setObjectNotExistsAsync','length','status','onMessage','includes','data','âš ï¸\x20Missing\x20Libs\x20(','No\x20module\x20named','simple-api.','normal','TRAINING_COMPLETE','\x20(Length:\x20','toLowerCase','Train\x20Security','platform','system.config','analysisTimer','ANOMALY','Failed:\x20','@google/generative-ai','humidity','âš ï¸\x20ALARM:\x20','uuid','triggerBriefing','targetposition','TRAIN_ENERGY','summary','power','generic','cover','values','exitGraceTimer','set_temperature','.communicate.request','Error\x20launching\x20Python:\x20','bind','.\x20WETTER:\x20','analysis.security.lastScore','124976mtDStU','notifyPushoverEnabled','Train\x20Health','tÃ¼r','getForeignObjectsAsync','isProVersion','response','Trigger\x20Briefing','Insulation\x20Score','57AfZaxZ','ENERGY_TRAIN_RESULT','extendObjectAsync','COGNI_REQUEST_CALL','Security\x20Monitor','ðŸ“ž\x20RÃœCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20RÃ¼ckruf-Button\x20gedrÃ¼ckt.','shutter','Kein\x20API\x20Key!','LTM.dailyDigests','539405TLsliz','777858lwaNfr','isEmergency','Gemini\x20Error:\x20','guest','analysis.health.lastCheck','notifyTelegramRecipient','getTime','6921kEGQSf','dismissAutomation','Invalid\x20JSON:\x20','online','channel','event','longitude','7906owuyFT','COGNI_CONFIRM_OK','getGenerativeModel','indicator.alarm','[RECORDER]\x20Error\x20saving\x20sequence:\x20','onStateChange','Who\x20is\x20present?','LTM.processingStatus','analysis.history_debug_00','getLtmData','loc','insulation',').\x20Repairing...','No\x20instance','sort','âœ…\x20Alles\x20OK\x20(Reset)','modeResetJob','TRAIN_HEALTH','ðŸ§ \x20Triggering\x20Security\x20Training...','Reset\x20Sched\x20Error:\x20','weatherInstance','KALENDER:\x20','LTM.driftAnalysis.lastCheck','subscribeForeignStatesAsync','Target\x20ID','isPresent','HEALTH_RESULT','livingContext','Scanning\x20for\x20devices...','unshift','Last\x20Check','PARTY','setForeignStateAsync','analysis.automation.targetValue','date','klima','analysis.training.triggerHealth','Scripts','geminiApiKey','isArray','command','scheduleJob','temperature','switch','onReady','splice','light','cpu_feature_guard','ðŸ› ï¸\x20MAINTENANCE\x20MODE:\x20Installing\x20Python\x20dependencies.\x20Do\x20not\x20restart!','[PYTHON]\x20Exited\x20','search','Unknown','56XNisUO','\x22\x20-c\x20\x22import\x20tensorflow;\x20print(\x27OK\x27)\x22','fenster','role','system.presenceWho','send','path','analysis.health','.\x20ANWESEND:\x20','538604zhDHjb','system','sound','Raw\x20Log','lastIndexOf','useCalendar','dependencyInstallInProgress','analysis.alertReason','Alert\x20Reason','autoApply','licenseKey','Kein\x20API\x20Key.','\x20Tage)','Sequences','retry','object','getOverviewData','common','logDuplicates','getHours','enum.rooms.*','Fokus\x20auf\x20Familienroutinen.','notifyEmailEnabled','alertReason','notifyPushoverInstance','indicator','detected','System\x20Mode','ack','genAI','toString','win32','notifyPushoverRecipient','Health\x20Analysis','LTM.trainingData.thermodynamics','Anomaly\x20Score','OK:\x20','analysis.isAlert','analysis.lastResult','python3\x20-m\x20venv\x20\x22','debug','Target\x20Value','inactivityThresholdHours','HEALTH_TRAIN_RESULT','Aktiv\x20(','âš ï¸\x20SECURITY\x20ALARM:\x20','.NextHours.Location_1.Day_1.current.temp_value','stderr','material.','description','notifyTelegramEnabled','analysis.training.triggerSecurity','analysis.security','indexOf','from','âŒ\x20VENV\x20CREATION\x20FAILED.\x20Please\x20run:\x20sudo\x20apt\x20install\x20python3-venv','info','join','targetId','string','round','Energy\x20Intelligence','analysis.training','bin','LTM.trainingData.sequences','slice','minDaysForBaseline','sendTo','isExit','heating','fill','ltmDriftCheckIntervalHours','getCalendarNames','LTM.driftAnalysis','selectedFunctionIds','filter','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','generateContent','main','analysis.analysisHistory','analysis.health.trendValue','triggerDailyDigest','analysis.security.lastCheck','events.lastEvent','state','enum.functions.*','Last\x20raw\x20event','bewegung','analysis.health.isAnomaly','json','KI-Modell\x20nicht\x20initialisiert','[RESULT]','.\x20EMERGENCY:\x20','Success:\x20','analysis.triggerBriefing','payload','cancel','Trigger\x20Analysis','pop','1570RFglYV','(((.+)+)+)+$','âŒ\x20VERIFICATION\x20FAILED.\x20Tensorflow\x20missing.\x20Panic\x20Mode.','@iobroker/adapter-core','Training\x20Status','echarts.','timestamp','prÃ¤senz','Cogni-Living','Anomaly\x20Detected','stateChange','Briefing\x20Sched\x20Error:\x20','analysis.automation.patternDetected','Lernphase\x20(','setStateAsync','notifyEmailRecipient','analysisHistory','activityLevel','GUEST','lastAlertState','toISOString','warn','analysis.training.status','message','scanDevices','testContext','Adapter','Installing\x20packages\x20(Force\x20Reinstall)...','daswetter','currentSystemMode','.Current.Temperature','analysis.automation.targetId','close','devices','kontakt','Analysiere\x20ausgewogen.','[PYTHON]\x20','service.py','[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20','heizung','analysis.training.triggerEnergy','testApiKey','config','getFullYear','off','LTM.driftAnalysis.baselineDrift','writable','parse',')\x20-\x20STRICT\x20ORDER\x20OK','log','âœ…\x20HEALTH\x20TRAINED:\x20','\x20=\x20','Missing\x20data','currentposition','text','systemConfig','events.history','simulateButler','icons-mfd.','callback','shift','inactivityMonitoringEnabled','Thermodynamics','ltmLtbWindowDays','info.','Keine\x20Details.','type','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','Pattern\x20Detected','driftAnalysisTimer','window','âŒ\x20INSTALL\x20FAILED:\x20','now','getDate','location','apiKey','targetValue','briefingEnabled','analysis.energy.heatingScore','toFixed','substring','[LOG]','.data.table','.venv','[PYTHON\x20ERR]\x20','presenceDevices','PRIORITÃ„T:\x20Sicherheit.','Trend','stdout','\x20*\x20*\x20*','rmSync','analysis.trigger','TRAIN_SECURITY','pythonProcess','Started...','exports','button','javascript.','split','replace','ðŸ\x20Python\x20Pong','NORMAL','instance','child_process','admin.','lampe','energy','useWeather','Training\x20Error:\x20','getForeignStateAsync','stringify','number','expire','stdin','Alarm','system.isPresent','Skipped\x20(No\x20AI\x20or\x20Data)','unload','python','sendToAsync','contact','analysis.energy.insulationScore','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','motion','schalter','Vom\x20Benutzer\x20bestÃ¤tigt\x20(OK).','brightness','Train\x20Energy','members','.forecast.current.temp','city','Auto\x20Apply','setState','pip','forEach','Trigger\x20Action','analysis.automation.triggerAction','analysis.activitySummary','System','isGracePeriodActive','LTM.rawEventLog','openweathermap','ðŸš¨\x20EMERGENCY','door','occupancy','isAlert','automationProposal','unknown','lights','Alert\x20Status','LTM\x20Sched\x20Error:\x20','valve','dailyDigests','\x20->\x20','ANALYZE_TREND','siren','rawEventLog','value','systemUUID','map','Fokus\x20auf\x20Komfort.','startsWith','weather','sensorLastValues','analysisInterval','outdoorSensorId','119619YVGoYb','endsWith'];a0_0x120b=function(){return _0x6508de;};return a0_0x120b();}const a0_0x974424=a0_0x6856;(function(_0x2d1898,_0x340a51){const _0x7e7eb4=a0_0x6856,_0x5e5c49=_0x2d1898();while(!![]){try{const _0x389f08=-parseInt(_0x7e7eb4(0x243))/0x1+-parseInt(_0x7e7eb4(0x2d2))/0x2*(-parseInt(_0x7e7eb4(0x2ba))/0x3)+parseInt(_0x7e7eb4(0x13a))/0x4+-parseInt(_0x7e7eb4(0x2c3))/0x5+parseInt(_0x7e7eb4(0x2c4))/0x6+-parseInt(_0x7e7eb4(0x131))/0x7*(parseInt(_0x7e7eb4(0x2b1))/0x8)+-parseInt(_0x7e7eb4(0x2cb))/0x9*(-parseInt(_0x7e7eb4(0x19d))/0xa);if(_0x389f08===_0x340a51)break;else _0x5e5c49['push'](_0x5e5c49['shift']());}catch(_0x2942d1){_0x5e5c49['push'](_0x5e5c49['shift']());}}}(a0_0x120b,0x1a48a));const a0_0x3ee7ea=(function(){let _0x16cb19=!![];return function(_0x36e291,_0x4cc13d){const _0x4b8f4a=_0x16cb19?function(){if(_0x4cc13d){const _0x1f7cf8=_0x4cc13d['apply'](_0x36e291,arguments);return _0x4cc13d=null,_0x1f7cf8;}}:function(){};return _0x16cb19=![],_0x4b8f4a;};}()),a0_0x292bdf=a0_0x3ee7ea(this,function(){const _0x41433e=a0_0x6856;return a0_0x292bdf['toString']()[_0x41433e(0x12f)]('(((.+)+)+)+$')[_0x41433e(0x158)]()['constructor'](a0_0x292bdf)['search'](_0x41433e(0x19e));});a0_0x292bdf();'use strict';const utils=require(a0_0x974424(0x1a0)),{GoogleGenerativeAI}=require(a0_0x974424(0x29e)),schedule=require('node-schedule'),{spawn,exec}=require(a0_0x974424(0x204)),path=require(a0_0x974424(0x137)),fs=require('fs'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',LTM_SCHEDULE=a0_0x974424(0x24e),MODE_RESET_SCHEDULE='0\x204\x20*\x20*\x20*',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x974424(0x229),LTM_DP_DAILY_DIGESTS=a0_0x974424(0x2c2),LTM_DP_STATUS=a0_0x974424(0x2d9),LTM_DP_TRIGGER_DIGEST=a0_0x974424(0x26d),LTM_DP_BASELINE_STATUS=a0_0x974424(0x266),LTM_DP_DRIFT_CHANNEL=a0_0x974424(0x183),LTM_DP_DRIFT_STATUS=a0_0x974424(0x1ca),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x974424(0x2e8),SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':a0_0x974424(0x294),'VACATION':'vacation','PARTY':a0_0x974424(0x26a),'GUEST':a0_0x974424(0x2c7)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x974424(0x11c)],SYSTEM_MODES[a0_0x974424(0x1af)]],PERSONA_MAPPING={'generic':a0_0x974424(0x1c0),'senior_aal':'PRIORITÃ„T:\x20Gesundheit/AAL.','family':a0_0x974424(0x14f),'single_comfort':a0_0x974424(0x23d),'security':a0_0x974424(0x1f3)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0},BAD_NAMES=[a0_0x974424(0x2a3),a0_0x974424(0x1d2),a0_0x974424(0x18e),'level',a0_0x974424(0x23a),a0_0x974424(0x21b),'on',a0_0x974424(0x1c9),a0_0x974424(0x128),'position',a0_0x974424(0x2c0),a0_0x974424(0x284),a0_0x974424(0x2a8),'status','motion','presence','occupancy',a0_0x974424(0x127),a0_0x974424(0x29f),a0_0x974424(0x2a6),a0_0x974424(0x207),a0_0x974424(0x283),a0_0x974424(0x234),a0_0x974424(0x24a),a0_0x974424(0x2ab)],ADAPTER_BLACKLIST=[a0_0x974424(0x265),a0_0x974424(0x205),a0_0x974424(0x1dd),'vis.','history.',a0_0x974424(0x16a),a0_0x974424(0x1d7),a0_0x974424(0x27a),a0_0x974424(0x1a2),a0_0x974424(0x1fe),a0_0x974424(0x293)],IS_WIN=process[a0_0x974424(0x299)]===a0_0x974424(0x159),VENV_PATH=path[a0_0x974424(0x173)](__dirname,a0_0x974424(0x1f0)),PYTHON_EXE=IS_WIN?path['join'](VENV_PATH,a0_0x974424(0x122),'python.exe'):path[a0_0x974424(0x173)](VENV_PATH,a0_0x974424(0x179),a0_0x974424(0x213)),PIP_EXE=IS_WIN?path['join'](VENV_PATH,'Scripts',a0_0x974424(0x281)):path[a0_0x974424(0x173)](VENV_PATH,a0_0x974424(0x179),a0_0x974424(0x222));let activeSequence=[],sequenceTimer=null,panicMode=![];async function initZombies(_0x1312d7){const _0x1fc50f=a0_0x974424;try{const _0x2f8ee8=[_0x1fc50f(0x2da),_0x1fc50f(0x267)];for(const _0x76fd9a of _0x2f8ee8){try{const _0x3d4b94=await _0x1312d7[_0x1fc50f(0x28a)](_0x76fd9a);if(_0x3d4b94)await _0x1312d7['delObjectAsync'](_0x76fd9a);}catch(_0x522a62){}}}catch(_0x4a8f1d){}}async function initHistory(_0x288860){const _0x2586e9=a0_0x974424;try{const _0x3db701=await _0x288860[_0x2586e9(0x259)](_0x2586e9(0x1d5));_0x3db701&&_0x3db701[_0x2586e9(0x254)]&&(_0x288860[_0x2586e9(0x264)]=JSON[_0x2586e9(0x1cc)](_0x3db701[_0x2586e9(0x254)][_0x2586e9(0x158)]()));}catch(_0x3de213){_0x288860['eventHistory']=[];}try{const _0x39964e=await _0x288860[_0x2586e9(0x259)](_0x2586e9(0x189));if(_0x39964e&&_0x39964e['val'])_0x288860[_0x2586e9(0x1ad)]=JSON[_0x2586e9(0x1cc)](_0x39964e[_0x2586e9(0x254)]['toString']());}catch(_0x2b9149){_0x288860['analysisHistory']=[];}if(_0x288860[_0x2586e9(0x264)]&&_0x288860[_0x2586e9(0x264)][_0x2586e9(0x28c)]>0x0){_0x288860[_0x2586e9(0x1ce)][_0x2586e9(0x172)](_0x2586e9(0x261)+_0x288860[_0x2586e9(0x264)][_0x2586e9(0x28c)]+_0x2586e9(0x275));for(let _0x503c9f=_0x288860[_0x2586e9(0x264)]['length']-0x1;_0x503c9f>=0x0;_0x503c9f--){const _0x206997=_0x288860[_0x2586e9(0x264)][_0x503c9f];if(_0x206997&&_0x206997['id']!==undefined&&_0x206997[_0x2586e9(0x23a)]!==undefined)_0x288860['sensorLastValues'][_0x206997['id']]=_0x206997[_0x2586e9(0x23a)];}}}async function initSystemConfig(_0x25a133){const _0x1cb466=a0_0x974424;try{const _0x73a639=await _0x25a133['getForeignObjectAsync'](_0x1cb466(0x29a));if(_0x73a639&&_0x73a639[_0x1cb466(0x14b)])_0x25a133[_0x1cb466(0x1d4)]={'latitude':_0x73a639['common'][_0x1cb466(0x260)]||0x0,'longitude':_0x73a639['common'][_0x1cb466(0x2d1)]||0x0,'city':_0x73a639[_0x1cb466(0x14b)][_0x1cb466(0x21f)]||''};}catch(_0x264ed0){}}async function checkLicense(_0x119109,_0x32eab9){return!![];}async function getSystemUUID(_0x10b01f){const _0x4fdc61=a0_0x974424;return _0x4fdc61(0x2a1);}async function loadRawEventLog(_0x4235ca){const _0x372a66=a0_0x974424;try{const _0x536417=await _0x4235ca[_0x372a66(0x259)](LTM_DP_RAW_LOG);if(_0x536417&&_0x536417[_0x372a66(0x254)])_0x4235ca[_0x372a66(0x239)]=JSON[_0x372a66(0x1cc)](_0x536417['val']);}catch(_0x48450f){_0x4235ca[_0x372a66(0x239)]=[];}}async function saveRawEventLog(_0x4236c6){const _0x3b4e82=a0_0x974424;if(_0x4236c6['rawEventLog'][_0x3b4e82(0x28c)]>RAW_LOG_MAX_SIZE)_0x4236c6[_0x3b4e82(0x239)][_0x3b4e82(0x12a)](0x0,_0x4236c6[_0x3b4e82(0x239)]['length']-RAW_LOG_MAX_SIZE);await _0x4236c6['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x3b4e82(0x20b)](_0x4236c6['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x49898f){const _0x5777ed=a0_0x974424;try{const _0x3625a4=await _0x49898f[_0x5777ed(0x259)](LTM_DP_DAILY_DIGESTS);if(_0x3625a4&&_0x3625a4[_0x5777ed(0x254)])_0x49898f['dailyDigests']=JSON['parse'](_0x3625a4['val']);}catch(_0x612d97){_0x49898f[_0x5777ed(0x235)]=[];}await updateBaselineStatus(_0x49898f);}async function saveDailyDigests(_0x15f943,_0x417ef7=!![]){const _0x1943a0=a0_0x974424,_0x31c151=_0x15f943[_0x1943a0(0x1c7)][_0x1943a0(0x1dc)]||0x3c;_0x15f943[_0x1943a0(0x235)][_0x1943a0(0x28c)]>_0x31c151&&_0x15f943[_0x1943a0(0x235)][_0x1943a0(0x12a)](0x0,_0x15f943[_0x1943a0(0x235)]['length']-_0x31c151);await _0x15f943[_0x1943a0(0x1ab)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x1943a0(0x20b)](_0x15f943[_0x1943a0(0x235)]),'ack':!![]});if(_0x417ef7)await updateBaselineStatus(_0x15f943);}async function updateAnalysisHistory(_0x3fa8ab,_0x34bf2a){const _0x210898=a0_0x974424;_0x3fa8ab[_0x210898(0x1ad)][_0x210898(0x11a)](_0x34bf2a);if(_0x3fa8ab[_0x210898(0x1ad)][_0x210898(0x28c)]>ANALYSIS_HISTORY_MAX_SIZE)_0x3fa8ab[_0x210898(0x1ad)][_0x210898(0x19c)]();await _0x3fa8ab[_0x210898(0x1ab)](_0x210898(0x189),{'val':JSON[_0x210898(0x20b)](_0x3fa8ab[_0x210898(0x1ad)]),'ack':!![]});}async function updateBaselineStatus(_0x116c5b){const _0x26f22c=a0_0x974424;if(!_0x116c5b[_0x26f22c(0x2b6)]){await _0x116c5b[_0x26f22c(0x1ab)](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0x30be8c=_0x116c5b[_0x26f22c(0x235)][_0x26f22c(0x28c)]>=(_0x116c5b[_0x26f22c(0x1c7)]['minDaysForBaseline']||0x7)?_0x26f22c(0x166)+_0x116c5b[_0x26f22c(0x235)][_0x26f22c(0x28c)]+_0x26f22c(0x146):_0x26f22c(0x1aa)+_0x116c5b[_0x26f22c(0x235)][_0x26f22c(0x28c)]+'/'+(_0x116c5b['config'][_0x26f22c(0x17c)]||0x7)+')';await _0x116c5b[_0x26f22c(0x1ab)](LTM_DP_BASELINE_STATUS,{'val':_0x30be8c,'ack':!![]});}async function loadSystemMode(_0x4a9c41){const _0x2ff204=a0_0x974424;try{const _0x24c9b7=await _0x4a9c41['getStateAsync'](SYSTEM_DP_MODE);_0x24c9b7&&_0x24c9b7[_0x2ff204(0x254)]&&Object[_0x2ff204(0x2a9)](SYSTEM_MODES)[_0x2ff204(0x28f)](_0x24c9b7[_0x2ff204(0x254)])?_0x4a9c41[_0x2ff204(0x1ba)]=_0x24c9b7[_0x2ff204(0x254)]:(_0x4a9c41[_0x2ff204(0x1ba)]=SYSTEM_MODES['NORMAL'],await _0x4a9c41[_0x2ff204(0x1ab)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x2ff204(0x202)],'ack':!![]}));}catch(_0x2a4599){_0x4a9c41[_0x2ff204(0x1ba)]=SYSTEM_MODES[_0x2ff204(0x202)];}}async function createAllObjects(_0x192984){const _0x5cb3a0=a0_0x974424;await _0x192984[_0x5cb3a0(0x2bc)](_0x5cb3a0(0x13b),{'type':_0x5cb3a0(0x2cf),'common':{'name':_0x5cb3a0(0x227)},'native':{}}),await _0x192984[_0x5cb3a0(0x2bc)](SYSTEM_DP_MODE,{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x155),'type':'string','role':_0x5cb3a0(0x18e),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x5cb3a0(0x202)]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x135),{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x2d8),'type':'string','role':_0x5cb3a0(0x1d3),'read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x18d),{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x190),'type':_0x5cb3a0(0x175),'role':_0x5cb3a0(0x193),'read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x1d5),{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x255),'type':_0x5cb3a0(0x175),'role':_0x5cb3a0(0x193),'read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x2bc)](_0x5cb3a0(0x178),{'type':'channel','common':{'name':_0x5cb3a0(0x248)},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x16d),{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x298),'type':'boolean','role':_0x5cb3a0(0x1fd),'read':!![],'write':!![]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x121),{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x2b3),'type':_0x5cb3a0(0x279),'role':_0x5cb3a0(0x1fd),'read':!![],'write':!![]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x1c5),{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x21c),'type':'boolean','role':_0x5cb3a0(0x1fd),'read':!![],'write':!![]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x1b3),{'type':'state','common':{'name':_0x5cb3a0(0x1a1),'type':_0x5cb3a0(0x175),'role':_0x5cb3a0(0x1d3),'read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x2bc)](_0x5cb3a0(0x16e),{'type':_0x5cb3a0(0x2cf),'common':{'name':_0x5cb3a0(0x2be)},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x2b0),{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x15d),'type':'number','role':_0x5cb3a0(0x23a),'read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x18c),{'type':_0x5cb3a0(0x18e),'common':{'name':'Last\x20Check','type':_0x5cb3a0(0x175),'role':_0x5cb3a0(0x11f),'read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x2bc)](_0x5cb3a0(0x138),{'type':_0x5cb3a0(0x2cf),'common':{'name':_0x5cb3a0(0x15b)},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x2c8),{'type':'state','common':{'name':_0x5cb3a0(0x11b),'type':_0x5cb3a0(0x175),'role':'date','read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x192),{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x1a6),'type':_0x5cb3a0(0x279),'role':_0x5cb3a0(0x153),'read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)]('analysis.health.trendDiagnosis',{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x1f4),'type':_0x5cb3a0(0x175),'role':_0x5cb3a0(0x1d3),'read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x18a),{'type':'state','common':{'name':_0x5cb3a0(0x246),'type':_0x5cb3a0(0x20c),'role':_0x5cb3a0(0x23a),'read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x2bc)]('analysis.energy',{'type':_0x5cb3a0(0x2cf),'common':{'name':_0x5cb3a0(0x177)},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x216),{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x2b9),'type':'string','role':_0x5cb3a0(0x1d3),'read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x1eb),{'type':'state','common':{'name':_0x5cb3a0(0x26c),'type':_0x5cb3a0(0x175),'role':_0x5cb3a0(0x1d3),'read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x2bc)]('LTM',{'type':'channel','common':{'name':'LTM'},'native':{}}),await _0x192984[_0x5cb3a0(0x2bc)](LTM_DP_RAW_LOG,{'type':'state','common':{'name':_0x5cb3a0(0x13d),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x2bc)](LTM_DP_DAILY_DIGESTS,{'type':_0x5cb3a0(0x18e),'common':{'name':'Daily\x20Digests','type':_0x5cb3a0(0x175),'role':_0x5cb3a0(0x193),'read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)]('LTM.trainingData.sequences',{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x147),'type':_0x5cb3a0(0x175),'role':'json','read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x15c),{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x1db),'type':'string','role':_0x5cb3a0(0x193),'read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x1f8),{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x19b),'type':_0x5cb3a0(0x279),'role':_0x5cb3a0(0x1fd),'read':!![],'write':!![]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x198),{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x2b8),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x192984['setObjectNotExistsAsync'](_0x5cb3a0(0x15f),{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x232),'type':_0x5cb3a0(0x279),'role':_0x5cb3a0(0x2d5),'read':!![],'write':![]},'native':{}}),await _0x192984['setObjectNotExistsAsync'](_0x5cb3a0(0x141),{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x142),'type':'string','role':'text.alarm','read':!![],'write':![]},'native':{}}),await _0x192984['setObjectNotExistsAsync'](_0x5cb3a0(0x226),{'type':_0x5cb3a0(0x18e),'common':{'name':'Activity\x20Summary','type':'string','role':_0x5cb3a0(0x1d3),'read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x1a9),{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x1e1),'type':_0x5cb3a0(0x279),'role':_0x5cb3a0(0x153),'read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)]('analysis.automation.description',{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x251),'type':_0x5cb3a0(0x175),'role':_0x5cb3a0(0x1d3),'read':!![],'write':![]},'native':{}}),await _0x192984['setObjectNotExistsAsync'](_0x5cb3a0(0x1bc),{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x115),'type':_0x5cb3a0(0x175),'role':_0x5cb3a0(0x1d3),'read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x11e),{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x163),'type':_0x5cb3a0(0x175),'role':_0x5cb3a0(0x1d3),'read':!![],'write':![]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x278),{'type':_0x5cb3a0(0x18e),'common':{'name':_0x5cb3a0(0x220),'type':'boolean','role':'switch','read':!![],'write':!![]},'native':{}}),await _0x192984[_0x5cb3a0(0x28b)](_0x5cb3a0(0x225),{'type':'state','common':{'name':_0x5cb3a0(0x224),'type':_0x5cb3a0(0x279),'role':_0x5cb3a0(0x1fd),'read':!![],'write':!![]},'native':{}});}async function recordThermodynamics(_0x98e1b3,_0x1bc8e7,_0x57265f,_0x45beb4){const _0x41a003=a0_0x974424,_0x153e99=await getOutsideTemperatureNumeric(_0x98e1b3),_0x3a48ea=await _0x98e1b3[_0x41a003(0x259)](_0x41a003(0x15c));let _0x27a70e=[];if(_0x3a48ea&&_0x3a48ea[_0x41a003(0x254)])try{_0x27a70e=JSON['parse'](_0x3a48ea[_0x41a003(0x254)]);}catch(_0x321744){}_0x27a70e[_0x41a003(0x285)]({'ts':Date[_0x41a003(0x1e5)](),'room':_0x45beb4||_0x41a003(0x130),'t_in':_0x57265f,'t_out':_0x153e99});if(_0x27a70e[_0x41a003(0x28c)]>THERMO_LOG_SIZE)_0x27a70e['shift']();await _0x98e1b3[_0x41a003(0x1ab)]('LTM.trainingData.thermodynamics',{'val':JSON[_0x41a003(0x20b)](_0x27a70e),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x1996b7){const _0x25c5af=a0_0x974424;if(_0x1996b7[_0x25c5af(0x1c7)]['outdoorSensorId'])try{const _0x131553=await _0x1996b7[_0x25c5af(0x20a)](_0x1996b7['config'][_0x25c5af(0x242)]);if(_0x131553&&_0x131553[_0x25c5af(0x254)]!==undefined&&_0x131553[_0x25c5af(0x254)]!==null)return parseFloat(_0x131553[_0x25c5af(0x254)]);}catch(_0x5d102f){}const _0x209efa=_0x1996b7[_0x25c5af(0x1c7)][_0x25c5af(0x2e6)];if(!_0x1996b7['config'][_0x25c5af(0x208)]||!_0x209efa)return null;try{let _0x2436e1='';if(_0x209efa[_0x25c5af(0x28f)]('accuweather'))_0x2436e1=_0x209efa+_0x25c5af(0x1bb);else{if(_0x209efa[_0x25c5af(0x28f)](_0x25c5af(0x1b9)))_0x2436e1=_0x209efa+_0x25c5af(0x168);else{if(_0x209efa[_0x25c5af(0x28f)](_0x25c5af(0x22a)))_0x2436e1=_0x209efa+'.forecast.current.temperature';else{if(_0x209efa['includes']('weatherunderground'))_0x2436e1=_0x209efa+_0x25c5af(0x21e);}}}if(_0x2436e1){const _0x5760f5=await _0x1996b7['getForeignStateAsync'](_0x2436e1);if(_0x5760f5&&_0x5760f5[_0x25c5af(0x254)]!==undefined&&_0x5760f5[_0x25c5af(0x254)]!==null)return parseFloat(_0x5760f5[_0x25c5af(0x254)]);}}catch(_0x28179d){}return null;}async function recordSequence(_0x2e3061,_0x4eec5d){const _0x480654=a0_0x974424,_0x490849=(_0x4eec5d[_0x480654(0x1df)]||'')['toLowerCase'](),_0x1d751b=['motion',_0x480654(0x191),_0x480654(0x1a4),'presence',_0x480654(0x22d),_0x480654(0x22c),_0x480654(0x2b4),_0x480654(0x1e3),_0x480654(0x133),_0x480654(0x215),_0x480654(0x1bf),_0x480654(0x12b),'licht','switch',_0x480654(0x219),_0x480654(0x25e),_0x480654(0x206)];if(!_0x1d751b[_0x480654(0x268)](_0x10fc4e=>_0x490849[_0x480654(0x28f)](_0x10fc4e)))return;if(!_0x4eec5d[_0x480654(0x23a)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence['push']({'loc':_0x4eec5d[_0x480654(0x1e7)]||_0x480654(0x130),'id':_0x4eec5d['id'],'ts':Date[_0x480654(0x1e5)]()}),_0x2e3061[_0x480654(0x1ce)]['debug'](_0x480654(0x1c3)+_0x4eec5d[_0x480654(0x1e7)]+_0x480654(0x296)+activeSequence['length']+')'),sequenceTimer=setTimeout(async()=>{const _0x36f03d=_0x480654;if(activeSequence[_0x36f03d(0x28c)]>0x1)await saveCompletedSequence(_0x2e3061);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x1f62df){const _0x40dec6=a0_0x974424;try{const _0x1973b8=await _0x1f62df[_0x40dec6(0x259)](_0x40dec6(0x17a));let _0x45292e=[];if(_0x1973b8&&_0x1973b8['val'])try{_0x45292e=JSON[_0x40dec6(0x1cc)](_0x1973b8['val']);}catch(_0x25a9c1){}const _0x59ebf7=activeSequence[0x0]['ts'],_0x2ae63b=activeSequence[_0x40dec6(0x23c)](_0x375d47=>({'loc':_0x375d47[_0x40dec6(0x2dc)],'t_delta':Math['round']((_0x375d47['ts']-_0x59ebf7)/0x3e8)})),_0x489f01={'timestamp':new Date(_0x59ebf7)['toISOString'](),'steps':_0x2ae63b,'duration':Math[_0x40dec6(0x176)]((activeSequence[activeSequence['length']-0x1]['ts']-_0x59ebf7)/0x3e8),'daytime':new Date(_0x59ebf7)[_0x40dec6(0x14d)]()};_0x45292e[_0x40dec6(0x285)](_0x489f01);if(_0x45292e[_0x40dec6(0x28c)]>MAX_TRAINING_SET_SIZE)_0x45292e[_0x40dec6(0x1d9)]();await _0x1f62df['setStateAsync'](_0x40dec6(0x17a),{'val':JSON[_0x40dec6(0x20b)](_0x45292e),'ack':!![]}),runSecurityCheck(_0x1f62df,_0x489f01);}catch(_0x3ec2ef){_0x1f62df[_0x40dec6(0x1ce)][_0x40dec6(0x27d)](_0x40dec6(0x2d6)+_0x3ec2ef[_0x40dec6(0x1b4)]);}}function runSecurityCheck(_0x3d3a51,_0x38f5ae){const _0x2a9061=a0_0x974424;if(!_0x3d3a51[_0x2a9061(0x2b6)])return;_0x3d3a51[_0x2a9061(0x1ce)][_0x2a9061(0x162)](_0x2a9061(0x245)),sendToPython(_0x3d3a51,'ANALYZE_SEQUENCE',{'sequence':_0x38f5ae});}async function processSensorEvent(_0x3ca346,_0x436275,_0x1817eb,_0x4457a1){const _0xe9893e=a0_0x974424;if(!_0x4457a1)return;const _0x10103d=_0x1817eb[_0xe9893e(0x254)],_0x153371=Date[_0xe9893e(0x1e5)](),_0x494b48=_0x3ca346[_0xe9893e(0x240)][_0x436275];_0x3ca346['sensorLastValues'][_0x436275]=_0x10103d;if(!_0x4457a1[_0xe9893e(0x14c)]&&_0x494b48!=undefined&&_0x494b48==_0x10103d)return;const _0xd989a3=(_0x4457a1[_0xe9893e(0x1df)]||'')[_0xe9893e(0x297)](),_0x1d0b1d=_0xd989a3['includes'](_0xe9893e(0x127))||_0xd989a3[_0xe9893e(0x28f)]('temperatur')||_0xd989a3['includes'](_0xe9893e(0x120))||_0xd989a3[_0xe9893e(0x28f)](_0xe9893e(0x1c4));_0x3ca346['isProVersion']&&_0x1d0b1d&&recordThermodynamics(_0x3ca346,_0x436275,_0x10103d,_0x4457a1[_0xe9893e(0x1e7)]);const _0x567d11={'timestamp':_0x153371,'id':_0x436275,'name':_0x4457a1[_0xe9893e(0x25b)],'type':_0x4457a1[_0xe9893e(0x1df)],'location':_0x4457a1[_0xe9893e(0x1e7)],'value':_0x10103d};_0x3ca346[_0xe9893e(0x264)][_0xe9893e(0x11a)](_0x567d11);if(_0x3ca346[_0xe9893e(0x264)][_0xe9893e(0x28c)]>HISTORY_MAX_SIZE)_0x3ca346['eventHistory']['pop']();await _0x3ca346[_0xe9893e(0x1ab)](_0xe9893e(0x18d),{'val':JSON[_0xe9893e(0x20b)](_0x567d11),'ack':!![]}),await _0x3ca346['setStateAsync'](_0xe9893e(0x1d5),{'val':JSON[_0xe9893e(0x20b)](_0x3ca346['eventHistory']),'ack':!![]});_0x3ca346[_0xe9893e(0x2b6)]&&(_0x3ca346[_0xe9893e(0x239)][_0xe9893e(0x285)](_0x567d11),await saveRawEventLog(_0x3ca346),recordSequence(_0x3ca346,_0x567d11));if(_0x4457a1[_0xe9893e(0x17e)]&&_0x10103d===!![]){if(_0x3ca346[_0xe9893e(0x116)]&&!_0x3ca346[_0xe9893e(0x228)])startExitTimer(_0x3ca346);else{if(!_0x3ca346[_0xe9893e(0x116)])setPresence(_0x3ca346,!![]);}}else{if(_0x4457a1[_0xe9893e(0x1df)]===_0xe9893e(0x218)&&_0x10103d===!![]){if(_0x3ca346['exitTimer'])abortExitTimer(_0x3ca346);if(!_0x3ca346[_0xe9893e(0x116)]&&_0x3ca346[_0xe9893e(0x1ba)]===SYSTEM_MODES[_0xe9893e(0x202)])setPresence(_0x3ca346,!![]);}}}function installPythonDependencies(_0x4e1468){const _0x39465c=a0_0x974424;if(_0x4e1468[_0x39465c(0x140)]||panicMode)return;_0x4e1468['dependencyInstallInProgress']=!![];const _0x59b192=path[_0x39465c(0x173)](__dirname,'python_service','requirements.txt');_0x4e1468[_0x39465c(0x1ce)][_0x39465c(0x172)](_0x39465c(0x12d)),stopPythonService(_0x4e1468);if(fs['existsSync'](VENV_PATH))try{fs[_0x39465c(0x1f7)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x44ba97){}exec(_0x39465c(0x161)+VENV_PATH+'\x22',_0x271623=>{const _0x48f56d=_0x39465c;if(_0x271623){_0x4e1468[_0x48f56d(0x1ce)][_0x48f56d(0x27d)](_0x48f56d(0x171)),_0x4e1468['dependencyInstallInProgress']=![],panicMode=!![];return;}installRequirementsInVenv(_0x4e1468,_0x59b192);});}function installRequirementsInVenv(_0x298c9d,_0x3616c8){const _0x2d8869=a0_0x974424;_0x298c9d[_0x2d8869(0x1ce)][_0x2d8869(0x172)](_0x2d8869(0x1b8));const _0xc51803='\x22'+PIP_EXE+'\x22\x20install\x20--no-cache-dir\x20--force-reinstall\x20-r\x20\x22'+_0x3616c8+'\x22';exec(_0xc51803,{'timeout':0x124f80},(_0x43da0b,_0x3b00aa,_0x536296)=>{const _0x1f03ec=_0x2d8869;_0x298c9d[_0x1f03ec(0x140)]=![],_0x43da0b?(_0x298c9d[_0x1f03ec(0x1ce)]['error'](_0x1f03ec(0x1e4)+(_0x536296||_0x43da0b['message'])),panicMode=!![]):(_0x298c9d['log'][_0x1f03ec(0x172)]('âœ…\x20INSTALL\x20SUCCESS.\x20Verifying...'),exec('\x22'+PYTHON_EXE+_0x1f03ec(0x132),(_0x1529d4,_0x2fc37e)=>{const _0x78a55e=_0x1f03ec;_0x2fc37e&&_0x2fc37e[_0x78a55e(0x28f)]('OK')?(_0x298c9d['log']['info']('âœ…\x20VERIFICATION\x20PASSED.\x20Starting\x20Service.'),startPythonService(_0x298c9d)):(_0x298c9d[_0x78a55e(0x1ce)][_0x78a55e(0x27d)](_0x78a55e(0x19f)),panicMode=!![]);}));});}function startPythonService(_0x59888c){const _0x1e4cb4=a0_0x974424;if(_0x59888c[_0x1e4cb4(0x140)]||panicMode)return;let _0x448872=_0x1e4cb4(0x27c);if(fs['existsSync'](PYTHON_EXE))_0x59888c[_0x1e4cb4(0x1ce)][_0x1e4cb4(0x172)]('ðŸ\x20Using\x20VENV:\x20'+PYTHON_EXE),_0x448872=PYTHON_EXE;else{_0x59888c[_0x1e4cb4(0x1ce)][_0x1e4cb4(0x1b2)](_0x1e4cb4(0x26b)),installPythonDependencies(_0x59888c);return;}try{const _0xa5e9f0=path[_0x1e4cb4(0x173)](__dirname,_0x1e4cb4(0x27e),_0x1e4cb4(0x1c2));_0x59888c[_0x1e4cb4(0x1fa)]=spawn(_0x448872,[_0xa5e9f0]),_0x59888c[_0x1e4cb4(0x1fa)][_0x1e4cb4(0x1f5)]['on'](_0x1e4cb4(0x290),_0x4b3486=>{const _0x5d5a90=_0x1e4cb4,_0x2ca519=_0x4b3486[_0x5d5a90(0x158)]()[_0x5d5a90(0x1ff)]('\x0a');_0x2ca519[_0x5d5a90(0x223)](_0x2c6384=>{const _0x50fe20=_0x5d5a90,_0x4c827d=_0x2c6384[_0x50fe20(0x250)]();if(!_0x4c827d)return;if(_0x4c827d[_0x50fe20(0x23e)](_0x50fe20(0x1ee)))_0x59888c['log'][_0x50fe20(0x162)](_0x50fe20(0x1c1)+_0x4c827d['substring'](0x5)['trim']());else{if(_0x4c827d[_0x50fe20(0x23e)](_0x50fe20(0x195)))try{const _0x2437e8=JSON[_0x50fe20(0x1cc)](_0x4c827d[_0x50fe20(0x1ed)](0x8)[_0x50fe20(0x250)]());handlePythonResult(_0x59888c,_0x2437e8);}catch(_0x2745a5){_0x59888c[_0x50fe20(0x1ce)]['warn'](_0x50fe20(0x2cd)+_0x4c827d);}}_0x4c827d[_0x50fe20(0x28f)](_0x50fe20(0x292))&&(_0x59888c[_0x50fe20(0x1ce)][_0x50fe20(0x27d)](_0x50fe20(0x291)+_0x4c827d+_0x50fe20(0x2de)),installPythonDependencies(_0x59888c));});}),_0x59888c[_0x1e4cb4(0x1fa)][_0x1e4cb4(0x169)]['on'](_0x1e4cb4(0x290),_0x41ced9=>{const _0x11915f=_0x1e4cb4,_0xa52a94=_0x41ced9[_0x11915f(0x158)]()[_0x11915f(0x250)]();if(!_0xa52a94['includes'](_0x11915f(0x12c)))_0x59888c[_0x11915f(0x1ce)][_0x11915f(0x27d)](_0x11915f(0x1f1)+_0xa52a94);}),_0x59888c[_0x1e4cb4(0x1fa)]['on'](_0x1e4cb4(0x1bd),_0xe765e=>{const _0x159997=_0x1e4cb4;_0x59888c[_0x159997(0x1ce)][_0x159997(0x172)](_0x159997(0x12e)+_0xe765e),_0x59888c[_0x159997(0x1fa)]=null,_0xe765e!==0x0&&!panicMode&&setTimeout(()=>startPythonService(_0x59888c),0x7530);});}catch(_0x231f15){_0x59888c[_0x1e4cb4(0x1ce)][_0x1e4cb4(0x27d)](_0x1e4cb4(0x2ad)+_0x231f15[_0x1e4cb4(0x1b4)]);}}function stopPythonService(_0x57fa56){const _0x2d6198=a0_0x974424;if(_0x57fa56[_0x2d6198(0x1fa)]){_0x57fa56[_0x2d6198(0x1ce)][_0x2d6198(0x172)]('ðŸ\x20Stopping\x20Python...');try{_0x57fa56[_0x2d6198(0x1fa)][_0x2d6198(0x280)]();}catch(_0x2c3496){}_0x57fa56[_0x2d6198(0x1fa)]=null;}}function handlePythonResult(_0x1631d0,_0x24b52f){const _0x3eb414=a0_0x974424;if(_0x24b52f[_0x3eb414(0x1df)]===_0x3eb414(0x273))_0x1631d0[_0x3eb414(0x1ce)][_0x3eb414(0x162)](_0x3eb414(0x201));else{if(_0x24b52f[_0x3eb414(0x1df)]===_0x3eb414(0x252)){const {anomaly_score:_0x372ba6,is_anomaly:_0x46f833,threshold:_0x5a22e5}=_0x24b52f[_0x3eb414(0x199)];_0x1631d0[_0x3eb414(0x1ce)][_0x3eb414(0x172)](_0x3eb414(0x186)+_0x372ba6[_0x3eb414(0x1ec)](0x5)+_0x3eb414(0x236)+(_0x46f833?_0x3eb414(0x29c):'OK')),_0x1631d0[_0x3eb414(0x1ab)](_0x3eb414(0x2b0),{'val':_0x372ba6,'ack':!![]}),_0x1631d0[_0x3eb414(0x1ab)](_0x3eb414(0x18c),{'val':new Date()[_0x3eb414(0x1b1)](),'ack':!![]});if(_0x46f833){const _0x20747b=_0x3eb414(0x25d)+_0x372ba6[_0x3eb414(0x1ec)](0x4)+')';_0x1631d0['setStateAsync']('analysis.isAlert',{'val':!![],'ack':!![]}),_0x1631d0['setStateAsync']('analysis.alertReason',{'val':_0x20747b,'ack':!![]}),sendNotification(_0x1631d0,_0x3eb414(0x167)+_0x20747b,![],!![]);}}else{if(_0x24b52f[_0x3eb414(0x1df)]===_0x3eb414(0x295)){const {success:_0x4cd301,details:_0x172aa5}=_0x24b52f[_0x3eb414(0x199)];_0x1631d0['setStateAsync'](_0x3eb414(0x1b3),{'val':_0x4cd301?_0x3eb414(0x197)+new Date()['toLocaleTimeString']()+'\x20('+_0x172aa5+')':_0x3eb414(0x29d)+_0x172aa5,'ack':!![]});}else{if(_0x24b52f['type']===_0x3eb414(0x2bb)){const {success:_0x162e27,details:_0x356438}=_0x24b52f[_0x3eb414(0x199)];if(_0x162e27)try{const _0xccd3b=JSON[_0x3eb414(0x1cc)](_0x356438);if(_0xccd3b[_0x3eb414(0x2dd)])_0x1631d0[_0x3eb414(0x1ab)](_0x3eb414(0x216),{'val':JSON[_0x3eb414(0x20b)](_0xccd3b[_0x3eb414(0x2dd)]),'ack':!![]});if(_0xccd3b['heating'])_0x1631d0[_0x3eb414(0x1ab)](_0x3eb414(0x1eb),{'val':JSON[_0x3eb414(0x20b)](_0xccd3b[_0x3eb414(0x17f)]),'ack':!![]});}catch(_0xb4cc75){}}else{if(_0x24b52f[_0x3eb414(0x1df)]===_0x3eb414(0x165)){const {success:_0x352847,details:_0x454071}=_0x24b52f[_0x3eb414(0x199)];if(_0x352847)_0x1631d0[_0x3eb414(0x1ce)][_0x3eb414(0x172)](_0x3eb414(0x1cf)+_0x454071);}else{if(_0x24b52f['type']===_0x3eb414(0x117)){const {is_anomaly:_0xaa5280,details:_0x4abda1}=_0x24b52f[_0x3eb414(0x199)];_0x1631d0[_0x3eb414(0x1ab)](_0x3eb414(0x2c8),{'val':new Date()[_0x3eb414(0x1b1)](),'ack':!![]}),_0x1631d0[_0x3eb414(0x1ab)](_0x3eb414(0x192),{'val':_0xaa5280,'ack':!![]});}else{if(_0x24b52f[_0x3eb414(0x1df)]==='TREND_RESULT'){const {diagnosis:_0x41c965,change_percent:_0x3b750d}=_0x24b52f[_0x3eb414(0x199)];_0x1631d0['log'][_0x3eb414(0x172)]('ðŸ\x20Guardian\x20Diagnosis:\x20'+_0x41c965+'\x20('+_0x3b750d+'%)'),_0x1631d0[_0x3eb414(0x1ab)]('analysis.health.trendDiagnosis',{'val':_0x41c965,'ack':!![]}),_0x1631d0[_0x3eb414(0x1ab)](_0x3eb414(0x18a),{'val':_0x3b750d,'ack':!![]});}}}}}}}}function sendToPython(_0x2f09fb,_0x58d446,_0x368eea={}){const _0x202f82=a0_0x974424;if(!_0x2f09fb[_0x202f82(0x1fa)]||!_0x2f09fb[_0x202f82(0x1fa)][_0x202f82(0x20e)][_0x202f82(0x1cb)])return;const _0x1bf6f5=JSON[_0x202f82(0x20b)]({'command':_0x58d446,..._0x368eea});try{_0x2f09fb[_0x202f82(0x1fa)][_0x202f82(0x20e)]['write'](_0x1bf6f5+'\x0a');}catch(_0x404c58){}}async function initSensorSubscriptions(_0x270f7f){const _0x4ca428=a0_0x974424,_0x44e83c=_0x270f7f[_0x4ca428(0x1c7)][_0x4ca428(0x1be)];if(_0x44e83c)for(const _0x46d82b of _0x44e83c){await _0x270f7f[_0x4ca428(0x114)](_0x46d82b['id']);}}async function initPresenceSubscriptions(_0x885c23){const _0x441044=a0_0x974424,_0x54c1c7=_0x885c23[_0x441044(0x1c7)][_0x441044(0x1f2)];if(_0x54c1c7)for(const _0x467cac of _0x54c1c7){await _0x885c23[_0x441044(0x114)](_0x467cac);}}async function setupTelegramListener(_0x32e8cd){const _0x12a8f6=a0_0x974424,_0x2cc082=_0x32e8cd[_0x12a8f6(0x1c7)]['notifyTelegramInstance'];if(_0x32e8cd[_0x12a8f6(0x1c7)]['notifyTelegramEnabled']&&_0x2cc082)await _0x32e8cd[_0x12a8f6(0x114)](_0x2cc082+_0x12a8f6(0x2ac));}async function checkWifiPresence(_0x17fc4c){const _0x296eca=a0_0x974424;try{const _0x6dce1=_0x17fc4c[_0x296eca(0x1c7)][_0x296eca(0x1f2)]||[];let _0x22dd06=![];const _0x3521a7=[];for(const _0x2925eb of _0x6dce1){try{const _0x121f93=await _0x17fc4c[_0x296eca(0x20a)](_0x2925eb);_0x121f93&&(_0x121f93[_0x296eca(0x254)]===!![]||_0x121f93[_0x296eca(0x254)]===_0x296eca(0x2ce)||_0x121f93['val']===0x1)&&(_0x22dd06=!![],_0x3521a7['push'](_0x2925eb));}catch(_0x46c255){}}return await _0x17fc4c['setStateAsync'](_0x296eca(0x135),{'val':_0x3521a7[_0x296eca(0x173)](',\x20'),'ack':!![]}),_0x22dd06&&(_0x17fc4c[_0x296eca(0x257)]&&(_0x17fc4c['log'][_0x296eca(0x172)](_0x296eca(0x249)),abortExitTimer(_0x17fc4c)),!_0x17fc4c[_0x296eca(0x116)]&&_0x17fc4c[_0x296eca(0x1ba)]===SYSTEM_MODES['NORMAL']&&await setPresence(_0x17fc4c,!![])),_0x22dd06;}catch(_0x490046){return![];}}function startExitTimer(_0x10ebf5){const _0x2a8471=a0_0x974424;abortExitTimer(_0x10ebf5),_0x10ebf5[_0x2a8471(0x228)]=!![],_0x10ebf5[_0x2a8471(0x2aa)]=setTimeout(()=>{const _0x345efb=_0x2a8471;_0x10ebf5[_0x345efb(0x228)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x10ebf5[_0x2a8471(0x257)]=setTimeout(()=>{setPresence(_0x10ebf5,![]),_0x10ebf5['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x5d6dee){const _0x33b17b=a0_0x974424;if(_0x5d6dee['exitTimer'])clearTimeout(_0x5d6dee[_0x33b17b(0x257)]);if(_0x5d6dee[_0x33b17b(0x2aa)])clearTimeout(_0x5d6dee[_0x33b17b(0x2aa)]);_0x5d6dee[_0x33b17b(0x257)]=null,_0x5d6dee[_0x33b17b(0x2aa)]=null,_0x5d6dee[_0x33b17b(0x228)]=![];}async function setPresence(_0x384559,_0x225a07){const _0x28f055=a0_0x974424;if(_0x384559[_0x28f055(0x116)]===_0x225a07)return;_0x384559['isPresent']=_0x225a07,await _0x384559['setStateAsync'](_0x28f055(0x210),{'val':_0x225a07,'ack':!![]});}async function executeAutomationAction(_0x111b0b){const _0x5062c1=a0_0x974424;try{const _0x466bee=await _0x111b0b[_0x5062c1(0x259)]('analysis.automation.targetId'),_0x221562=await _0x111b0b[_0x5062c1(0x259)](_0x5062c1(0x11e));if(_0x466bee&&_0x466bee[_0x5062c1(0x254)]&&_0x221562){const _0x2160a3=_0x466bee[_0x5062c1(0x254)];let _0x3acfad=_0x221562[_0x5062c1(0x254)];try{_0x3acfad=JSON[_0x5062c1(0x1cc)](_0x3acfad);}catch(_0x305395){}_0x111b0b[_0x5062c1(0x1ce)]['info'](_0x5062c1(0x217)+_0x2160a3+_0x5062c1(0x1d0)+_0x3acfad),await _0x111b0b[_0x5062c1(0x11d)](_0x2160a3,_0x3acfad);}else _0x111b0b[_0x5062c1(0x1ce)]['warn']('ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x11ffc1){_0x111b0b[_0x5062c1(0x1ce)][_0x5062c1(0x27d)]('BUTLER\x20Execution\x20Error:\x20'+_0x11ffc1[_0x5062c1(0x1b4)]);}}async function handleTelegramResponse(_0x1bb516,_0x37a3e9){const _0x29742c=a0_0x974424;let _0x3202e4=_0x37a3e9;_0x37a3e9[_0x29742c(0x23e)]('[')&&(_0x3202e4=_0x37a3e9[_0x29742c(0x1ed)](_0x37a3e9[_0x29742c(0x16f)](']')+0x1));if(_0x3202e4===_0x29742c(0x2d3))await _0x1bb516['setStateAsync'](_0x29742c(0x15f),{'val':![],'ack':!![]}),await _0x1bb516[_0x29742c(0x1ab)](_0x29742c(0x141),{'val':_0x29742c(0x21a),'ack':!![]}),_0x1bb516[_0x29742c(0x1b0)]=![],sendNotification(_0x1bb516,_0x29742c(0x262),![]);else _0x3202e4===_0x29742c(0x2bd)&&sendNotification(_0x1bb516,_0x29742c(0x2bf),![],!![]);}async function sendNotification(_0x5a5e59,_0x1f2751,_0x10acdb=![],_0x18cb19=![]){const _0x2e0e95=a0_0x974424,_0x21c2d3=_0x5a5e59[_0x2e0e95(0x1c7)];if(_0x21c2d3[_0x2e0e95(0x16c)]){let _0x3c9e50={};(_0x1f2751['includes'](_0x2e0e95(0x20f))||_0x18cb19)&&(_0x3c9e50={'reply_markup':{'inline_keyboard':[[{'text':_0x2e0e95(0x2e1),'callback_data':_0x2e0e95(0x2d3)}],[{'text':'ðŸ“ž\x20RÃ¼ckruf\x20anfordern','callback_data':'COGNI_REQUEST_CALL'}]]}}),await _0x5a5e59['sendToAsync'](_0x21c2d3['notifyTelegramInstance'],_0x2e0e95(0x136),{'text':_0x1f2751,'user':_0x21c2d3[_0x2e0e95(0x2c9)],..._0x3c9e50});}if(_0x21c2d3[_0x2e0e95(0x2b2)]){let _0x3e20c2={'message':_0x1f2751,'title':_0x18cb19?_0x2e0e95(0x22b):_0x2e0e95(0x1a5),'priority':_0x18cb19?0x2:0x1,'device':_0x21c2d3[_0x2e0e95(0x15a)]};_0x18cb19&&(_0x3e20c2[_0x2e0e95(0x148)]=0x1e,_0x3e20c2[_0x2e0e95(0x20d)]=0xe10,_0x3e20c2[_0x2e0e95(0x13c)]=_0x2e0e95(0x238)),await _0x5a5e59[_0x2e0e95(0x214)](_0x21c2d3[_0x2e0e95(0x152)],_0x2e0e95(0x136),_0x3e20c2);}_0x21c2d3[_0x2e0e95(0x150)]&&await _0x5a5e59[_0x2e0e95(0x214)](_0x21c2d3[_0x2e0e95(0x263)],_0x2e0e95(0x136),{'text':_0x1f2751,'to':_0x21c2d3[_0x2e0e95(0x1ac)]});}async function runAutopilot(_0x49b39c){const _0x3d5349=a0_0x974424,_0x2c9a96=_0x49b39c[_0x3d5349(0x1c7)]['inactivityThresholdHours'],_0x560aa7=_0x49b39c[_0x3d5349(0x264)][_0x3d5349(0x28c)]>0x0?_0x49b39c[_0x3d5349(0x264)][0x0][_0x3d5349(0x1a3)]:Date[_0x3d5349(0x1e5)](),_0x361357=(Date[_0x3d5349(0x1e5)]()-_0x560aa7)/(0x3e8*0x3c*0x3c);let _0x19471f='';_0x49b39c['config'][_0x3d5349(0x1da)]&&_0x49b39c[_0x3d5349(0x1ba)]===SYSTEM_MODES[_0x3d5349(0x202)]&&_0x49b39c[_0x3d5349(0x116)]&&(_0x361357>_0x2c9a96&&(_0x19471f='HARD\x20WATCHDOG:\x20No\x20activity\x20for\x20'+_0x361357['toFixed'](0x1)+'h.')),runGeminiAnalysis(_0x49b39c,_0x19471f);}async function runPythonHealthCheck(_0xf6dcb7){const _0x500b80=a0_0x974424;if(!_0xf6dcb7[_0x500b80(0x235)]||_0xf6dcb7[_0x500b80(0x235)][_0x500b80(0x28c)]<0x2)return;const _0x369eb2=_0xf6dcb7['dailyDigests']['map'](_0xd42193=>{const _0x3ba88f=_0x500b80,_0x1fb527=(_0xd42193[_0x3ba88f(0x1ae)]||'')[_0x3ba88f(0x297)]();return ACTIVITY_LEVEL_MAP[_0x1fb527]||0x32;});sendToPython(_0xf6dcb7,_0x500b80(0x237),{'values':_0x369eb2,'tag':'Activity-Level'});}async function scanForDevices(_0xe0ff1e,_0x15e84f){const _0x29be07=a0_0x974424;_0xe0ff1e[_0x29be07(0x1ce)]['info'](_0x29be07(0x119));const _0x1cd8b2=[],_0x4f08c4=await _0xe0ff1e['getForeignObjectsAsync']('*'),_0x29d4fd=await _0xe0ff1e[_0x29be07(0x2b5)](_0x29be07(0x18f),_0x29be07(0x27f)),_0xbc1110=await _0xe0ff1e[_0x29be07(0x2b5)](_0x29be07(0x14e),_0x29be07(0x27f)),_0x4cd5c4={};if(_0x29d4fd)for(const _0x29e69e in _0x29d4fd){const _0x5be0d0=_0x29d4fd[_0x29e69e][_0x29be07(0x14b)]['members']||[];_0x5be0d0[_0x29be07(0x223)](_0x754572=>{const _0x42edfd=_0x29be07;if(!_0x4cd5c4[_0x754572])_0x4cd5c4[_0x754572]=[];_0x4cd5c4[_0x754572][_0x42edfd(0x285)](_0x29e69e);});}const _0x881c81={};if(_0xbc1110)for(const _0x24be75 in _0xbc1110){const _0x14a68e=_0xbc1110[_0x24be75][_0x29be07(0x14b)][_0x29be07(0x21d)]||[],_0x27821d=typeof _0xbc1110[_0x24be75][_0x29be07(0x14b)][_0x29be07(0x25b)]===_0x29be07(0x149)?_0xbc1110[_0x24be75]['common'][_0x29be07(0x25b)]['de']:_0xbc1110[_0x24be75]['common'][_0x29be07(0x25b)];_0x14a68e[_0x29be07(0x223)](_0x5bd36d=>_0x881c81[_0x5bd36d]=_0x27821d);}const _0x2b23d0=_0x15e84f[_0x29be07(0x218)]!==![],_0x23ac81=_0x15e84f[_0x29be07(0x289)]!==![],_0x4ca6c1=_0x15e84f[_0x29be07(0x231)]!==![],_0x53c766=_0x15e84f['temperature']===!![],_0x2dd28d=_0x15e84f[_0x29be07(0x23f)]===!![];for(const _0x34d8ae in _0x4f08c4){const _0x4a94bc=_0x4f08c4[_0x34d8ae];if(_0x4a94bc[_0x29be07(0x1df)]!==_0x29be07(0x18e)||!_0x4a94bc[_0x29be07(0x14b)])continue;if(ADAPTER_BLACKLIST[_0x29be07(0x268)](_0x4c0036=>_0x34d8ae[_0x29be07(0x23e)](_0x4c0036))&&!_0x2dd28d)continue;const _0x40ffff=(_0x4a94bc[_0x29be07(0x14b)][_0x29be07(0x134)]||'')[_0x29be07(0x297)]();let _0x2882ec=(typeof _0x4a94bc['common'][_0x29be07(0x25b)]===_0x29be07(0x149)?_0x4a94bc[_0x29be07(0x14b)][_0x29be07(0x25b)]['de']:_0x4a94bc[_0x29be07(0x14b)][_0x29be07(0x25b)])||_0x34d8ae;const _0x3d9a80=_0x2882ec[_0x29be07(0x297)]();let _0x29d199=![];if(_0x15e84f['selectedFunctionIds']&&_0x15e84f['selectedFunctionIds'][_0x29be07(0x28c)]>0x0){const _0x49a99d=_0x4cd5c4[_0x34d8ae]||[],_0x5d2800=_0x34d8ae[_0x29be07(0x1ff)]('.')['slice'](0x0,-0x1)[_0x29be07(0x173)]('.'),_0x9c2b6c=_0x4cd5c4[_0x5d2800]||[];(_0x49a99d[_0x29be07(0x268)](_0x1ce220=>_0x15e84f[_0x29be07(0x184)][_0x29be07(0x28f)](_0x1ce220))||_0x9c2b6c[_0x29be07(0x268)](_0x497cc2=>_0x15e84f[_0x29be07(0x184)]['includes'](_0x497cc2)))&&(_0x29d199=!![]);}if(_0x2dd28d&&_0x34d8ae[_0x29be07(0x28f)]('temperature'))_0x29d199=!![];if(!_0x29d199&&!_0x2dd28d){if(HARD_IGNORE_TERMS[_0x29be07(0x268)](_0x4b4c08=>_0x34d8ae[_0x29be07(0x28f)](_0x4b4c08)||_0x3d9a80[_0x29be07(0x28f)](_0x4b4c08[_0x29be07(0x297)]())))continue;}let _0x5540a5='';if(_0x2b23d0&&(_0x40ffff[_0x29be07(0x28f)]('motion')||_0x40ffff[_0x29be07(0x28f)](_0x29be07(0x22d))))_0x5540a5=_0x29be07(0x218);else{if(_0x23ac81&&(_0x40ffff[_0x29be07(0x28f)]('door')||_0x40ffff['includes'](_0x29be07(0x1e3))))_0x5540a5=_0x29be07(0x22c);else{if(_0x4ca6c1&&(_0x40ffff[_0x29be07(0x28f)](_0x29be07(0x12b))||_0x40ffff[_0x29be07(0x28f)](_0x29be07(0x128))))_0x5540a5='light';else{if(_0x53c766&&(_0x40ffff[_0x29be07(0x28f)](_0x29be07(0x127))||_0x40ffff['includes'](_0x29be07(0x29f))))_0x5540a5=_0x29be07(0x127);}}}if(_0x5540a5){let _0x2ac7e1=_0x881c81[_0x34d8ae]||'';if(!_0x2ac7e1){let _0x1c9d2f=_0x34d8ae;for(let _0x3cfa1e=0x0;_0x3cfa1e<0x3;_0x3cfa1e++){const _0x24f8e3=_0x1c9d2f[_0x29be07(0x13e)]('.');if(_0x24f8e3===-0x1)break;_0x1c9d2f=_0x1c9d2f['substring'](0x0,_0x24f8e3);if(_0x881c81[_0x1c9d2f]){_0x2ac7e1=_0x881c81[_0x1c9d2f];break;}}}_0x1cd8b2[_0x29be07(0x285)]({'id':_0x34d8ae,'name':_0x2882ec,'location':_0x2ac7e1,'type':_0x5540a5,'logDuplicates':_0x5540a5===_0x29be07(0x218),'isExit':![],'_score':_0x2ac7e1?0x50:0x28});}}return _0x1cd8b2;}async function getCalendarNames(_0x23c3f6,_0x5e09c0){const _0x3090e3=a0_0x974424;try{const _0x2d7a2d=await _0x23c3f6[_0x3090e3(0x20a)](_0x5e09c0+'.data.table');if(_0x2d7a2d&&_0x2d7a2d['val']){const _0x2ca1d4=JSON[_0x3090e3(0x1cc)](_0x2d7a2d[_0x3090e3(0x254)]);if(Array[_0x3090e3(0x124)](_0x2ca1d4))return[...new Set(_0x2ca1d4[_0x3090e3(0x23c)](_0x36510b=>_0x36510b[_0x3090e3(0x286)])['filter'](Boolean))][_0x3090e3(0x2e0)]();}}catch(_0x1b3dfc){}return[];}async function getCalendarContext(_0x42484c){const _0x536d75=a0_0x974424;if(!_0x42484c[_0x536d75(0x1c7)][_0x536d75(0x13f)])return'Kalender:\x20Deaktiviert';const _0x5d1054=_0x42484c['config']['calendarInstance']||_0x536d75(0x270);try{const _0x5eb423=await _0x42484c[_0x536d75(0x20a)](_0x5d1054+_0x536d75(0x1ef));if(_0x5eb423&&_0x5eb423[_0x536d75(0x254)]){let _0x28b929=JSON[_0x536d75(0x1cc)](_0x5eb423[_0x536d75(0x254)]);if(Array[_0x536d75(0x124)](_0x28b929)){if(_0x28b929[_0x536d75(0x28c)]>0x0)return _0x536d75(0x2e7)+_0x28b929['slice'](0x0,0x3)[_0x536d75(0x23c)](_0x2c4414=>_0x2c4414[_0x536d75(0x2d0)])[_0x536d75(0x173)](',\x20');}}}catch(_0x31b30a){}return'Keine\x20Termine';}async function saveFeedback(_0xffb92,_0x191f70){const _0x59db7b=a0_0x974424;_0xffb92[_0x59db7b(0x1ce)][_0x59db7b(0x172)](_0x59db7b(0x288)+JSON[_0x59db7b(0x20b)](_0x191f70));}async function createDailyDigest(_0xd9358b){const _0x40adb3=a0_0x974424;if(!_0xd9358b[_0x40adb3(0x2b6)])return;await _0xd9358b[_0x40adb3(0x1ab)](LTM_DP_STATUS,{'val':_0x40adb3(0x1fb),'ack':!![]});if(!_0xd9358b[_0x40adb3(0x25a)]||_0xd9358b[_0x40adb3(0x239)][_0x40adb3(0x28c)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0xd9358b[_0x40adb3(0x1ab)](LTM_DP_STATUS,{'val':_0x40adb3(0x211),'ack':!![]});return;}const _0x15051d=JSON['parse'](JSON[_0x40adb3(0x20b)](_0xd9358b[_0x40adb3(0x239)])),_0x279d58=_0x15051d['length'],_0xa8553=_0x40adb3(0x269)+JSON[_0x40adb3(0x20b)](_0x15051d);try{const _0xf9e987=await _0xd9358b[_0x40adb3(0x25a)][_0x40adb3(0x187)](_0xa8553),_0x21a27f=JSON['parse'](_0xf9e987[_0x40adb3(0x2b7)][_0x40adb3(0x1d3)]()[_0x40adb3(0x200)](/```json|```/g,'')[_0x40adb3(0x250)]()),_0x22a378={'timestamp':new Date()[_0x40adb3(0x1b1)](),'eventCount':_0x279d58,'summary':_0x21a27f[_0x40adb3(0x2a5)]||_0x40adb3(0x276),'activityLevel':_0x21a27f['activityLevel']||_0x40adb3(0x294),'systemMode':_0xd9358b[_0x40adb3(0x1ba)]};_0xd9358b['dailyDigests']['push'](_0x22a378),await saveDailyDigests(_0xd9358b),_0xd9358b[_0x40adb3(0x239)]=[],await saveRawEventLog(_0xd9358b),await _0xd9358b[_0x40adb3(0x1ab)](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0xd9358b[_0x40adb3(0x2b6)])sendToPython(_0xd9358b,_0x40adb3(0x24b),{'digest':_0x22a378});}catch(_0x5a8b81){_0xd9358b['log'][_0x40adb3(0x27d)](_0x5a8b81[_0x40adb3(0x1b4)]);}}async function runGeminiAnalysis(_0x2dc7b5,_0x4ddea2=''){const _0x301834=a0_0x974424;if(!_0x2dc7b5[_0x301834(0x25a)])return;if(_0x2dc7b5[_0x301834(0x264)][_0x301834(0x28c)]===0x0)return;const _0x1a15de=_0x2dc7b5[_0x301834(0x264)]['slice'](0x0,0xf),_0x482a43=await getWeatherContext(_0x2dc7b5),_0x468a15=_0x2dc7b5[_0x301834(0x1ba)],_0x5e9c8e=PERSONA_MAPPING[_0x2dc7b5[_0x301834(0x1c7)]['aiPersona']||_0x301834(0x2a7)],_0x47d07c=_0x2dc7b5[_0x301834(0x1c7)][_0x301834(0x118)]||_0x301834(0x1de);let _0x1650ed=_0x301834(0x24c);try{const _0x27a800=await _0x2dc7b5[_0x301834(0x259)](_0x301834(0x135));if(_0x27a800&&_0x27a800[_0x301834(0x254)])_0x1650ed=_0x27a800['val'];}catch(_0x3802de){}let _0x5e9ce7=![];try{const _0x2691dc=await _0x2dc7b5[_0x301834(0x259)]('analysis.automation.autoApply');if(_0x2691dc&&_0x2691dc[_0x301834(0x254)])_0x5e9ce7=!![];}catch(_0x202be5){}const _0x1e353b=_0x301834(0x24f)+_0x5e9c8e+'.\x20KONTEXT:\x20'+_0x47d07c+_0x301834(0x277)+_0x468a15+_0x301834(0x2af)+_0x482a43+_0x301834(0x139)+_0x1650ed+'.\x20EVENTS:\x20'+JSON[_0x301834(0x20b)](_0x1a15de)+_0x301834(0x196)+_0x4ddea2+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0x1417f2=await _0x2dc7b5[_0x301834(0x25a)]['generateContent'](_0x1e353b),_0x4c989e=_0x1417f2[_0x301834(0x2b7)][_0x301834(0x1d3)]()['replace'](/```json|```/g,'')[_0x301834(0x250)](),_0x231249=JSON[_0x301834(0x1cc)](_0x4c989e);await _0x2dc7b5[_0x301834(0x1ab)](_0x301834(0x160),{'val':JSON[_0x301834(0x20b)](_0x231249),'ack':!![]});if(_0x231249[_0x301834(0x2a5)])await _0x2dc7b5[_0x301834(0x1ab)](_0x301834(0x226),{'val':_0x231249[_0x301834(0x2a5)],'ack':!![]});const _0x47726d={'timestamp':Date[_0x301834(0x1e5)](),'id':Date['now']()[_0x301834(0x158)](),'analysis':{'activity':{'summary':_0x231249['summary'],'isAlert':_0x231249[_0x301834(0x22e)],'alertReason':_0x231249['alertReason']},'comfort':{'automationProposal':_0x231249[_0x301834(0x22f)]}}};await updateAnalysisHistory(_0x2dc7b5,_0x47726d);const _0x5a3dee=_0x231249[_0x301834(0x22e)]||![];_0x5a3dee!==_0x2dc7b5[_0x301834(0x1b0)]&&(await _0x2dc7b5['setStateAsync'](_0x301834(0x15f),{'val':_0x5a3dee,'ack':!![]}),_0x2dc7b5['lastAlertState']=_0x5a3dee,_0x5a3dee&&(await _0x2dc7b5['setStateAsync']('analysis.alertReason',{'val':_0x231249[_0x301834(0x151)],'ack':!![]}),sendNotification(_0x2dc7b5,_0x301834(0x2a0)+_0x231249[_0x301834(0x151)],![],_0x231249[_0x301834(0x2c5)])));if(_0x231249[_0x301834(0x22f)]&&_0x231249[_0x301834(0x22f)][_0x301834(0x154)]){await _0x2dc7b5[_0x301834(0x1ab)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x2dc7b5[_0x301834(0x1ab)]('analysis.automation.description',{'val':_0x231249[_0x301834(0x22f)][_0x301834(0x16b)],'ack':!![]}),await _0x2dc7b5[_0x301834(0x1ab)]('analysis.automation.targetId',{'val':_0x231249['automationProposal'][_0x301834(0x174)],'ack':!![]}),await _0x2dc7b5[_0x301834(0x1ab)](_0x301834(0x11e),{'val':JSON['stringify'](_0x231249[_0x301834(0x22f)][_0x301834(0x1e9)]),'ack':!![]});if(_0x5e9ce7)executeAutomationAction(_0x2dc7b5);}}catch(_0x2278a6){_0x2dc7b5[_0x301834(0x1ce)][_0x301834(0x27d)](_0x301834(0x2c6)+_0x2278a6['message']);}}function setupLtmScheduler(_0x3c8126){const _0x2159e4=a0_0x974424;try{if(_0x3c8126['ltmJob'])_0x3c8126[_0x2159e4(0x271)][_0x2159e4(0x19a)]();if(!_0x3c8126[_0x2159e4(0x2b6)])return;_0x3c8126[_0x2159e4(0x271)]=schedule['scheduleJob'](LTM_SCHEDULE,()=>createDailyDigest(_0x3c8126));}catch(_0x47c81b){_0x3c8126['log'][_0x2159e4(0x27d)](_0x2159e4(0x233)+_0x47c81b[_0x2159e4(0x1b4)]);}}function setupModeResetScheduler(_0x3ac328){const _0x5cc4fa=a0_0x974424;try{if(_0x3ac328[_0x5cc4fa(0x2e2)])_0x3ac328[_0x5cc4fa(0x2e2)][_0x5cc4fa(0x19a)]();_0x3ac328[_0x5cc4fa(0x2e2)]=schedule[_0x5cc4fa(0x126)](MODE_RESET_SCHEDULE,async()=>{const _0x33e265=_0x5cc4fa;await loadSystemMode(_0x3ac328),AUTO_RESET_MODES[_0x33e265(0x28f)](_0x3ac328[_0x33e265(0x1ba)])&&await _0x3ac328['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x33e265(0x202)],'ack':![]});});}catch(_0x51295c){_0x3ac328[_0x5cc4fa(0x1ce)][_0x5cc4fa(0x27d)](_0x5cc4fa(0x2e5)+_0x51295c[_0x5cc4fa(0x1b4)]);}}function setupDriftAnalysisScheduler(_0x5a560a){const _0x12ab98=a0_0x974424;try{if(_0x5a560a[_0x12ab98(0x1e2)])clearInterval(_0x5a560a['driftAnalysisTimer']);if(!_0x5a560a[_0x12ab98(0x2b6)])return;_0x5a560a[_0x12ab98(0x1e2)]=setInterval(()=>runBaselineDriftAnalysis(_0x5a560a),(_0x5a560a[_0x12ab98(0x1c7)][_0x12ab98(0x181)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x5a560a),0x1388);}catch(_0x404ee2){_0x5a560a[_0x12ab98(0x1ce)][_0x12ab98(0x27d)](_0x12ab98(0x287)+_0x404ee2[_0x12ab98(0x1b4)]);}}function setupBriefingScheduler(_0x454318){const _0x1213b8=a0_0x974424;try{if(_0x454318['briefingJob'])_0x454318[_0x1213b8(0x24d)][_0x1213b8(0x19a)]();if(!_0x454318['config'][_0x1213b8(0x1ea)])return;const _0x258694=(_0x454318[_0x1213b8(0x1c7)][_0x1213b8(0x26f)]||'08:00')[_0x1213b8(0x1ff)](':'),_0x516fbe=parseInt(_0x258694[0x0])||0x8,_0x187a4b=parseInt(_0x258694[0x1])||0x0,_0xc7daf1=_0x187a4b+'\x20'+_0x516fbe+_0x1213b8(0x1f6);_0x454318[_0x1213b8(0x24d)]=schedule['scheduleJob'](_0xc7daf1,()=>{sendMorningBriefing(_0x454318);});}catch(_0x21a62f){_0x454318['log'][_0x1213b8(0x27d)](_0x1213b8(0x1a8)+_0x21a62f[_0x1213b8(0x1b4)]);}}function a0_0x6856(_0x2f8279,_0x4ca26e){const _0x42e225=a0_0x120b();return a0_0x6856=function(_0x292bdf,_0x3ee7ea){_0x292bdf=_0x292bdf-0x114;let _0x120b3b=_0x42e225[_0x292bdf];return _0x120b3b;},a0_0x6856(_0x2f8279,_0x4ca26e);}class CogniLiving extends utils[a0_0x974424(0x1b7)]{constructor(_0xa7783d){const _0x486465=a0_0x974424;super({..._0xa7783d,'name':_0x486465(0x272)}),this[_0x486465(0x264)]=[],this[_0x486465(0x1ad)]=[],this['rawEventLog']=[],this[_0x486465(0x235)]=[],this['sensorLastValues']={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x486465(0x116)]=!![],this[_0x486465(0x257)]=null,this[_0x486465(0x2aa)]=null,this['isGracePeriodActive']=![],this[_0x486465(0x157)]=null,this['geminiModel']=null,this['currentSystemMode']=SYSTEM_MODES[_0x486465(0x202)],this['isProVersion']=![],this['lastAlertState']=![],this[_0x486465(0x23b)]=_0x486465(0x230),this[_0x486465(0x29b)]=null,this[_0x486465(0x271)]=null,this['modeResetJob']=null,this[_0x486465(0x1e2)]=null,this[_0x486465(0x24d)]=null,this[_0x486465(0x1fa)]=null,this[_0x486465(0x140)]=![],this['on']('ready',this[_0x486465(0x129)]['bind'](this)),this['on'](_0x486465(0x1a7),this['onStateChange']['bind'](this)),this['on'](_0x486465(0x212),this[_0x486465(0x27b)][_0x486465(0x2ae)](this)),this['on']('message',this['onMessage'][_0x486465(0x2ae)](this));}async[a0_0x974424(0x129)](){const _0x3ac699=a0_0x974424;this['log'][_0x3ac699(0x172)]('cogni-living\x20adapter\x20starting\x20(v'+this['version']+_0x3ac699(0x1cd)),await initZombies(this);try{this['isProVersion']=await checkLicense(this,this[_0x3ac699(0x1c7)][_0x3ac699(0x144)]);}catch(_0x1a499d){}if(!this[_0x3ac699(0x1c7)]['inactivityThresholdHours']||this[_0x3ac699(0x1c7)][_0x3ac699(0x164)]<0.1)this[_0x3ac699(0x1c7)]['inactivityThresholdHours']=0xc;await initHistory(this),await initSystemConfig(this);if(this[_0x3ac699(0x1c7)][_0x3ac699(0x123)])try{this[_0x3ac699(0x157)]=new GoogleGenerativeAI(this['config'][_0x3ac699(0x123)]),this['geminiModel']=this['genAI']['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x3ac699(0x1ce)]['info']('Gemini\x20AI\x20initialized.');}catch(_0x2c8b53){this['log']['error']('Gemini\x20Init\x20Error:\x20'+_0x2c8b53[_0x3ac699(0x1b4)]);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this['subscribeStates'](_0x3ac699(0x1f8)),this[_0x3ac699(0x258)](LTM_DP_TRIGGER_DIGEST),this[_0x3ac699(0x258)](_0x3ac699(0x26e)),this[_0x3ac699(0x258)](_0x3ac699(0x198)),this[_0x3ac699(0x258)](_0x3ac699(0x225)),this[_0x3ac699(0x258)](_0x3ac699(0x278)),this['subscribeStates']('analysis.training.triggerSecurity'),this[_0x3ac699(0x258)](_0x3ac699(0x121)),this['subscribeStates'](_0x3ac699(0x1c5)),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this),setTimeout(()=>checkWifiPresence(this),0x1388);if(this['analysisTimer'])clearInterval(this['analysisTimer']);const _0xde7924=this['config'][_0x3ac699(0x241)]||0xf;_0xde7924>0x0&&(this[_0x3ac699(0x29b)]=setInterval(()=>{runAutopilot(this);},_0xde7924*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this),startPythonService(this),setTimeout(()=>{const _0x5736a6=_0x3ac699;if(this[_0x5736a6(0x1fa)])runPythonHealthCheck(this);},0x1388);}[a0_0x974424(0x27b)](_0x1de55c){const _0x1c607c=a0_0x974424;if(this[_0x1c607c(0x29b)])clearInterval(this[_0x1c607c(0x29b)]);if(this[_0x1c607c(0x1e2)])clearInterval(this[_0x1c607c(0x1e2)]);if(this['ltmJob'])this[_0x1c607c(0x271)][_0x1c607c(0x19a)]();if(this[_0x1c607c(0x2e2)])this[_0x1c607c(0x2e2)][_0x1c607c(0x19a)]();if(this[_0x1c607c(0x24d)])this['briefingJob'][_0x1c607c(0x19a)]();if(this[_0x1c607c(0x257)])clearTimeout(this[_0x1c607c(0x257)]);if(this['exitGraceTimer'])clearTimeout(this[_0x1c607c(0x2aa)]);stopPythonService(this),_0x1de55c();}async[a0_0x974424(0x2d7)](_0x22ae1a,_0x5d7013){const _0x27932c=a0_0x974424;if(!_0x5d7013||this[_0x27932c(0x140)])return;if(_0x22ae1a[_0x27932c(0x28f)](_0x27932c(0x247))&&_0x22ae1a[_0x27932c(0x244)]('communicate.request')&&_0x5d7013['val']){await handleTelegramResponse(this,_0x5d7013[_0x27932c(0x254)]);return;}if(_0x22ae1a===this[_0x27932c(0x25c)]+'.'+SYSTEM_DP_MODE){if(_0x5d7013[_0x27932c(0x254)]&&Object[_0x27932c(0x2a9)](SYSTEM_MODES)['includes'](_0x5d7013[_0x27932c(0x254)])){this['currentSystemMode']=_0x5d7013['val'];if(_0x5d7013[_0x27932c(0x254)]===SYSTEM_MODES[_0x27932c(0x25f)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x5d7013[_0x27932c(0x156)])this[_0x27932c(0x221)](_0x22ae1a,{'val':this[_0x27932c(0x1ba)],'ack':!![]});return;}if(!_0x5d7013[_0x27932c(0x156)]){_0x22ae1a['includes'](_0x27932c(0x1f8))&&_0x5d7013[_0x27932c(0x254)]&&(this[_0x27932c(0x221)](_0x22ae1a,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x22ae1a[_0x27932c(0x28f)](_0x27932c(0x18b))&&_0x5d7013[_0x27932c(0x254)]){this[_0x27932c(0x221)](_0x22ae1a,{'val':![],'ack':!![]});if(this[_0x27932c(0x2b6)])createDailyDigest(this);}_0x22ae1a[_0x27932c(0x28f)](_0x27932c(0x2a2))&&_0x5d7013[_0x27932c(0x254)]&&(this[_0x27932c(0x221)](_0x22ae1a,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x22ae1a[_0x27932c(0x28f)]('automation.triggerAction')&&_0x5d7013[_0x27932c(0x254)]&&(this[_0x27932c(0x221)](_0x22ae1a,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x22ae1a[_0x27932c(0x28f)](_0x27932c(0x16d))&&_0x5d7013['val']){this[_0x27932c(0x221)](_0x22ae1a,{'val':![],'ack':!![]});if(this[_0x27932c(0x2b6)])try{const _0x4eb93c=await this[_0x27932c(0x259)]('LTM.trainingData.sequences');if(_0x4eb93c&&_0x4eb93c['val']){const _0x386f22=JSON[_0x27932c(0x1cc)](_0x4eb93c[_0x27932c(0x254)]);this[_0x27932c(0x1ce)][_0x27932c(0x172)](_0x27932c(0x2e4)),this['setStateAsync'](_0x27932c(0x1b3),{'val':'Sec-Training\x20started...','ack':!![]}),sendToPython(this,_0x27932c(0x1f9),{'sequences':_0x386f22});}}catch(_0x5b6e44){this['log'][_0x27932c(0x27d)](_0x27932c(0x209)+_0x5b6e44[_0x27932c(0x1b4)]);}}if(_0x22ae1a[_0x27932c(0x28f)]('analysis.training.triggerHealth')&&_0x5d7013[_0x27932c(0x254)]){this['setState'](_0x22ae1a,{'val':![],'ack':!![]});if(this[_0x27932c(0x2b6)])try{const _0xe565c7=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0xe565c7&&_0xe565c7[_0x27932c(0x254)])sendToPython(this,_0x27932c(0x2e3),{'digests':JSON['parse'](_0xe565c7['val'])});}catch(_0x39c8a1){}}if(_0x22ae1a[_0x27932c(0x28f)](_0x27932c(0x1c5))&&_0x5d7013['val']){this['setState'](_0x22ae1a,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x4589ee=await this['getStateAsync'](_0x27932c(0x15c));if(_0x4589ee&&_0x4589ee['val'])sendToPython(this,_0x27932c(0x2a4),{'points':JSON[_0x27932c(0x1cc)](_0x4589ee[_0x27932c(0x254)])});}catch(_0x5b95b2){}}return;}if(this['config'][_0x27932c(0x1f2)]&&this[_0x27932c(0x1c7)][_0x27932c(0x1f2)][_0x27932c(0x28f)](_0x22ae1a)){await checkWifiPresence(this);return;}const _0xda74be=(this['config'][_0x27932c(0x1be)]||[])['find'](_0x405851=>_0x405851['id']===_0x22ae1a);if(_0xda74be)processSensorEvent(this,_0x22ae1a,_0x5d7013,_0xda74be);}async[a0_0x974424(0x28e)](_0x2b1b59){const _0x219703=a0_0x974424;if(typeof _0x2b1b59===_0x219703(0x149)&&_0x2b1b59['message']){if(_0x2b1b59['command']===_0x219703(0x1c6)){const _0x17022b=_0x2b1b59['message'][_0x219703(0x1e8)]||this[_0x219703(0x1c7)][_0x219703(0x123)];if(!_0x17022b)return this[_0x219703(0x17d)](_0x2b1b59[_0x219703(0x170)],_0x2b1b59[_0x219703(0x125)],{'success':![],'message':_0x219703(0x145)},_0x2b1b59[_0x219703(0x1d8)]);try{const _0x161912=new GoogleGenerativeAI(_0x17022b),_0x23667e=_0x161912[_0x219703(0x2d4)]({'model':GEMINI_MODEL}),_0x2f91fb=await _0x23667e[_0x219703(0x187)]('Hi');this[_0x219703(0x17d)](_0x2b1b59['from'],_0x2b1b59['command'],{'success':!![],'message':_0x219703(0x15e)+_0x2f91fb[_0x219703(0x2b7)][_0x219703(0x1d3)]()},_0x2b1b59[_0x219703(0x1d8)]);}catch(_0x2c944b){this[_0x219703(0x17d)](_0x2b1b59[_0x219703(0x170)],_0x2b1b59[_0x219703(0x125)],{'success':![],'message':'Err:\x20'+_0x2c944b[_0x219703(0x1b4)]},_0x2b1b59[_0x219703(0x1d8)]);}}else{if(_0x2b1b59[_0x219703(0x125)]===_0x219703(0x1b6)){const _0x4e9618=await getWeatherContext(this),_0x362fb7=await getCalendarContext(this);this[_0x219703(0x17d)](_0x2b1b59[_0x219703(0x170)],_0x2b1b59[_0x219703(0x125)],{'success':!![],'weather':_0x4e9618,'calendar':_0x362fb7},_0x2b1b59[_0x219703(0x1d8)]);}else{if(_0x2b1b59['command']===_0x219703(0x2db)){if(!this[_0x219703(0x2b6)])return this['sendTo'](_0x2b1b59['from'],_0x2b1b59['command'],{'success':![],'isPro':![]},_0x2b1b59[_0x219703(0x1d8)]);let _0xac42d2={'status':_0x219703(0x253)};try{const _0x1dbdca=await this[_0x219703(0x259)](LTM_DP_DRIFT_STATUS);_0xac42d2[_0x219703(0x28d)]=_0x1dbdca?_0x1dbdca[_0x219703(0x254)]:'N/A';}catch(_0x444b5b){}this[_0x219703(0x17d)](_0x2b1b59['from'],_0x2b1b59[_0x219703(0x125)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x219703(0x235)],'driftAnalysis':_0xac42d2,'analysisHistory':this[_0x219703(0x1ad)]},_0x2b1b59[_0x219703(0x1d8)]);}else{if(_0x2b1b59[_0x219703(0x125)]===_0x219703(0x14a)){const _0x2e0bc3=this['dailyDigests'][_0x219703(0x28c)],_0x90e579=new Date(),_0x55efc7=new Date(_0x90e579[_0x219703(0x1c8)](),_0x90e579['getMonth'](),_0x90e579[_0x219703(0x1e6)]())['getTime'](),_0x5b700a=this[_0x219703(0x239)][_0x219703(0x185)](_0x36a300=>new Date(_0x36a300[_0x219703(0x1a3)])[_0x219703(0x2ca)]()>_0x55efc7)['length'],_0x4d7d90=new Array(0x18)[_0x219703(0x180)](0x0);this['rawEventLog']['forEach'](_0x548e25=>{const _0x32781e=_0x219703,_0xeee821=new Date(_0x548e25[_0x32781e(0x1a3)]);if(_0xeee821[_0x32781e(0x2ca)]()>_0x55efc7)_0x4d7d90[_0xeee821[_0x32781e(0x14d)]()]++;});let _0xd5dc41={'status':_0x219703(0x253)};try{const _0x13c0f5=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0xd5dc41[_0x219703(0x28d)]=_0x13c0f5?_0x13c0f5[_0x219703(0x254)]:_0x219703(0x253);}catch(_0x565e6a){}let _0xa7d1dd='';try{const _0x3d7537=await this[_0x219703(0x259)](_0x219703(0x135));_0xa7d1dd=_0x3d7537?_0x3d7537[_0x219703(0x254)]:'';}catch(_0x729d9d){}let _0x55d1c7=null;!this['geminiModel']&&(_0x55d1c7=this[_0x219703(0x1c7)]['geminiApiKey']?_0x219703(0x194):_0x219703(0x2c1));let _0x12a279={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x15c71d=await this[_0x219703(0x259)]('analysis.automation.patternDetected');if(_0x15c71d&&_0x15c71d[_0x219703(0x254)]){_0x12a279['detected']=!![];const _0x4011fa=await this['getStateAsync'](_0x219703(0x274));_0x12a279[_0x219703(0x16b)]=_0x4011fa?_0x4011fa[_0x219703(0x254)]:'';const _0x5bcafb=await this[_0x219703(0x259)]('analysis.automation.targetId');_0x12a279[_0x219703(0x174)]=_0x5bcafb?_0x5bcafb[_0x219703(0x254)]:'';const _0x218e45=await this[_0x219703(0x259)](_0x219703(0x11e));_0x12a279[_0x219703(0x1e9)]=_0x218e45?_0x218e45['val']:'';}const _0x1e3f11=await this['getStateAsync'](_0x219703(0x278));_0x12a279[_0x219703(0x143)]=_0x1e3f11?!!_0x1e3f11[_0x219703(0x254)]:![];}catch(_0x396d76){}this[_0x219703(0x17d)](_0x2b1b59[_0x219703(0x170)],_0x2b1b59['command'],{'success':!![],'eventHistory':this['eventHistory'][_0x219703(0x17b)](0x0,0xf),'stats':{'digestCount':_0x2e0bc3,'eventCountToday':_0x5b700a,'hourlyActivity':_0x4d7d90,'driftStatus':_0xd5dc41[_0x219703(0x28d)],'isPresent':this[_0x219703(0x116)],'presenceWho':_0xa7d1dd,'minDays':this[_0x219703(0x1c7)][_0x219703(0x17c)]||0x7,'stbDays':this[_0x219703(0x1c7)]['ltmStbWindowDays']||0xe,'ltbDays':this[_0x219703(0x1c7)][_0x219703(0x1dc)]||0x3c,'systemError':_0x55d1c7},'automation':_0x12a279},_0x2b1b59[_0x219703(0x1d8)]);}else{if(_0x2b1b59['command']===_0x219703(0x1b5))try{const _0x2795bb=await scanForDevices(this,_0x2b1b59['message']||{});this[_0x219703(0x17d)](_0x2b1b59['from'],_0x2b1b59[_0x219703(0x125)],{'success':!![],'devices':_0x2795bb},_0x2b1b59[_0x219703(0x1d8)]);}catch(_0x20c0df){this['sendTo'](_0x2b1b59['from'],_0x2b1b59[_0x219703(0x125)],{'success':![],'error':_0x20c0df[_0x219703(0x1b4)]},_0x2b1b59[_0x219703(0x1d8)]);}else{if(_0x2b1b59[_0x219703(0x125)]===_0x219703(0x256)){const _0x4b4452=await this['getForeignObjectsAsync'](_0x219703(0x18f),_0x219703(0x27f)),_0x1d607d=[];if(_0x4b4452)for(const _0x2224f5 in _0x4b4452){const _0x548143=_0x4b4452[_0x2224f5],_0x274395=(_0x548143[_0x219703(0x14b)]&&typeof _0x548143[_0x219703(0x14b)]['name']===_0x219703(0x149)?_0x548143['common'][_0x219703(0x25b)]['de']:_0x548143[_0x219703(0x14b)][_0x219703(0x25b)])||_0x548143[_0x219703(0x14b)][_0x219703(0x25b)];_0x1d607d[_0x219703(0x285)]({'id':_0x2224f5,'name':_0x274395});}this[_0x219703(0x17d)](_0x2b1b59['from'],_0x2b1b59[_0x219703(0x125)],{'success':!![],'enums':_0x1d607d},_0x2b1b59[_0x219703(0x1d8)]);}else{if(_0x2b1b59[_0x219703(0x125)]===_0x219703(0x182)){const _0x769413=_0x2b1b59['message'][_0x219703(0x203)];if(!_0x769413)return this[_0x219703(0x17d)](_0x2b1b59[_0x219703(0x170)],_0x2b1b59['command'],{'success':![],'error':_0x219703(0x2df)},_0x2b1b59[_0x219703(0x1d8)]);const _0x4c4ca5=await getCalendarNames(this,_0x769413);this[_0x219703(0x17d)](_0x2b1b59['from'],_0x2b1b59[_0x219703(0x125)],{'success':!![],'names':_0x4c4ca5},_0x2b1b59[_0x219703(0x1d8)]);}else{if(_0x2b1b59[_0x219703(0x125)]===_0x219703(0x1d6)){const {targetId:_0x413337,targetValue:_0x5e8610}=_0x2b1b59[_0x219703(0x1b4)];this[_0x219703(0x1ce)][_0x219703(0x172)](_0x219703(0x1e0)+_0x413337+_0x219703(0x1d0)+_0x5e8610),await this[_0x219703(0x1ab)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0x219703(0x1ab)]('analysis.automation.description',{'val':'SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20'+_0x413337,'ack':!![]}),await this[_0x219703(0x1ab)](_0x219703(0x1bc),{'val':_0x413337,'ack':!![]}),await this['setStateAsync'](_0x219703(0x11e),{'val':_0x5e8610,'ack':!![]}),this[_0x219703(0x17d)](_0x2b1b59['from'],_0x2b1b59['command'],{'success':!![]},_0x2b1b59['callback']);}else{if(_0x2b1b59[_0x219703(0x125)]===_0x219703(0x282)){const {historyId:_0x145853,rating:_0x283912,comment:_0x57f915,alertReason:_0x4f9c17}=_0x2b1b59['message'];_0x145853&&_0x283912?(await saveFeedback(this,{'timestamp':Date[_0x219703(0x1e5)](),'historyId':_0x145853,'rating':_0x283912,'comment':_0x57f915,'alertReason':_0x4f9c17}),this[_0x219703(0x17d)](_0x2b1b59[_0x219703(0x170)],_0x2b1b59['command'],{'success':!![]},_0x2b1b59['callback'])):this[_0x219703(0x17d)](_0x2b1b59[_0x219703(0x170)],_0x2b1b59['command'],{'success':![],'error':_0x219703(0x1d1)},_0x2b1b59[_0x219703(0x1d8)]);}else _0x2b1b59[_0x219703(0x125)]===_0x219703(0x2cc)&&(this['log']['info']('User\x20dismissed\x20automation\x20proposal.'),await this[_0x219703(0x1ab)](_0x219703(0x1a9),{'val':![],'ack':!![]}),await this['setStateAsync'](_0x219703(0x274),{'val':'','ack':!![]}),this[_0x219703(0x17d)](_0x2b1b59[_0x219703(0x170)],_0x2b1b59['command'],{'success':!![]},_0x2b1b59[_0x219703(0x1d8)]));}}}}}}}}}}}if(require[a0_0x974424(0x188)]!==module)module[a0_0x974424(0x1fc)]=_0x53c91b=>new CogniLiving(_0x53c91b);else new CogniLiving();