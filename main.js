const a0_0x516068=a0_0x130d;(function(_0x15bed0,_0x36f49b){const _0x1aff00=a0_0x130d,_0xd4787a=_0x15bed0();while(!![]){try{const _0x566155=-parseInt(_0x1aff00(0x2a2))/0x1*(-parseInt(_0x1aff00(0x273))/0x2)+parseInt(_0x1aff00(0x1a4))/0x3*(-parseInt(_0x1aff00(0x240))/0x4)+parseInt(_0x1aff00(0x17b))/0x5*(parseInt(_0x1aff00(0x234))/0x6)+parseInt(_0x1aff00(0x217))/0x7*(parseInt(_0x1aff00(0x2d7))/0x8)+-parseInt(_0x1aff00(0x2ff))/0x9*(-parseInt(_0x1aff00(0x22e))/0xa)+parseInt(_0x1aff00(0x274))/0xb*(parseInt(_0x1aff00(0x180))/0xc)+-parseInt(_0x1aff00(0x22a))/0xd;if(_0x566155===_0x36f49b)break;else _0xd4787a['push'](_0xd4787a['shift']());}catch(_0x19a22f){_0xd4787a['push'](_0xd4787a['shift']());}}}(a0_0x4dfb,0xf2f03));const a0_0x2df6da=(function(){let _0x7f408e=!![];return function(_0x420a2f,_0x3c0002){const _0x4bb0a2=_0x7f408e?function(){const _0x410dfa=a0_0x130d;if(_0x3c0002){const _0x1ddca1=_0x3c0002[_0x410dfa(0x207)](_0x420a2f,arguments);return _0x3c0002=null,_0x1ddca1;}}:function(){};return _0x7f408e=![],_0x4bb0a2;};}()),a0_0x35d1c1=a0_0x2df6da(this,function(){const _0x20b6d1=a0_0x130d;return a0_0x35d1c1[_0x20b6d1(0x226)]()[_0x20b6d1(0x250)]('(((.+)+)+)+$')[_0x20b6d1(0x226)]()[_0x20b6d1(0x29a)](a0_0x35d1c1)['search'](_0x20b6d1(0x23c));});function a0_0x4dfb(){const _0x289861=['dailyDigests','archetype','\x20min).','application/json','button','wind','ROLLE:\x20Data\x20Scientist.\x20VERGLEICHE:\x20Dataset\x20A\x20(Recent)\x20vs\x20B\x20(Established).\x20ZIEL:\x20Erkenne\x20Drift.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aB\x20(LTB):\x0a','push','driftDetails','LOWBAT','weatherunderground.','LOW_BAT','No\x20Key','notifyPushoverRecipient','Adapter','Schalter/Licht','lastAlertState','28025PLVkjd','‚ö†Ô∏è\x20DEV-MODE:\x20Lokaler\x20Test-Schl√ºssel\x20erkannt.\x20Pro-Features\x20aktiviert.','Sending\x20notification:\x20\x22','LTM','exports','20287236TeMvxf','notifySignalInstance','Trigger\x20Analysis','FAULT','AI\x20Alert\x20Status','alertReason','Error:\x20','SECTION','now','No\x20comment','doors','occupancy','boolean','Baseline:\x20Inactive.','indicator','LTM.baselineStatus','geminiApiKey','response','onStateChange','setupModeResetScheduler','\x0a\x20\x20\x20\x20\x20\x20\x20\x20MODUS:\x20','toLowerCase','notifyEmailEnabled','analysis.isAlert','üìç\x20Standort\x20geladen:\x20','unshift','ERROR','wohn','genAI','stateChange','Bewegung','toLocaleString','t√ºr','saveRawEventLog','enum','history','3ffNyvP','saveFeedback','Deaktiviert\x20(Pro-Feature)','javascript.0.script','error','VACATION','getForeignObjectsAsync','[TEST]\x20','level.dimmer','.\x20PERSONA:\x20','callback','saveDailyDigests','unload','Konnte\x20System-Standort\x20nicht\x20laden.','checkLtmObjects','details','version','\x20sent','temperatur','fire','analysis.trigger','icon','icons-mfd.','Normal','devices','PRO-','hue','notifyWhatsappEnabled','notifyTelegramRecipient','warn','scanForDevices','apiKey','longitude','\x0a\x0aUSER\x20FEEDBACK\x20/\x20LERN-CONTEXT\x20(Vermeide\x20diese\x20Fehler):\x0a','driftAnalysisTimer','baselineDrift','common','sendNotification','-\x20User\x20Feedback:\x20Alarm\x20\x22','text','sensor.motion','Event\x20History','notifyTelegramEnabled','üö®\x20Alarm:\x20','patternDetected','getGenerativeModel','command','isAlert','Lernphase\x20(','DUTY_CYCLE','N/A\x20(Pro\x20Feature)','some','analysis.comfortSuggestion','length','Subscribing\x20to\x20','last\x20action','notifyWhatsappRecipient','getStateAsync','splice','ROLLE:\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20KONTEXT:\x20','flot.','schlaf','accuweather.','Drift\x20Details','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20','currentSystemMode','Baseline\x20Status','members','analysis.activitySummary','analysisHistory','latitude','STB\x20(Recent\x20History):\x20','isProVersion','analysis.alertReason',').\x20Nutze\x20dies\x20f√ºr\x20Sonnenstand/Lichtverh√§ltnisse.','Description','analysis.automation.description','description','PRIORIT√ÑT:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungew√∂hnliche\x20Anwesenheit\x20bei\x20Abwesenheit\x20der\x20Bewohner\x20oder\x20Fehlfunktionen,\x20die\x20auf\x20ein\x20Sicherheitsrisiko\x20hindeuten.','NORMAL','system.mode','city','Alert\x20Reason','trim','Processing\x20Status','Urlaub','toLocaleTimeString','notifyPushoverEnabled','bewegung','[Test]\x20Notification','0\x203\x20*\x20*\x20*','reachable','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.\x20Erwarte\x20hohe\x20Aktivit√§tsniveaus.','licht','\x20Tage)','\x20events','Gemini\x20Init\x20Error:\x20','livingContext','bind','apply','runGeminiAnalysis','value.temperature','.brightness','setStateAsync','enum.rooms.*','log','onReady','forecast','models/gemini-flash-latest','motion','submitFeedback','DIRECTION','LTM.driftAnalysis.lastCheck','presence','enum.functions.*','66703Ercedf','cancel','system.meta.uuid','No\x20recent\x20activity.','Badezimmer','0\x204\x20*\x20*\x20*','Pattern\x20Detected','notifyPushoverInstance','getLtmData','Running\x20in\x20FREE\x20mode\x20(LTM\x20&\x20Automation\x20disabled).','getSystemUUID','update','updateBaselineStatus','ltmDriftCheckIntervalHours','analysis.feedbackHistory','toString','substring','Success','Party','66530464jFQpNo','eventHistory','subscribeStates','generateContent','12835330mZGdoq','testApiKey','rating','sat','uniqueid','.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','2082fspnfr','setupLtmScheduler','ltmStbWindowDays','1.\x20ANALYSE\x20&\x20DEVIATION:\x20Vergleiche\x20Events\x20mit\x20STB.\x20deviation=\x27none|slight|significant|critical\x27.','vacation','.state','toISOString','debug','(((.+)+)+)+$','Feedback\x20Log','extendObjectAsync','lights','2977432zgLXmJ','parse','DUTYCYCLE','uuid-error','type','indicator.alarm','val','unknown','geminiModel','notifyWhatsappInstance','filter','normal','LTM.rawEventLog','runAutopilot','includes','Wohnzimmer','search','de-DE','checkLtmDriftObjects','json','Comfort\x20Suggestion','catch','LTM.driftAnalysis','long','analysis.analysisHistory','setObjectNotExistsAsync','ltmLtbWindowDays','AES_KEY','string','Starting\x20Autopilot\x20(','analysis.automation.suggestedAction','pop','split','analysis.lastResult','STICKY_UNREACH','processSensorEvent','number','toUpperCase','endsWith','UNREACH','leuchte','getForeignStateAsync','analysisInterval','Daily\x20Digests','_score','ack','LTM.dailyDigests','deviationFromBaseline','subscribeForeignStatesAsync','Received\x20scanDevices\x20request\x20from\x20Admin\x20UI.','Aktiv\x20(','2eVelpr','11KThqPd','scriptEnabled','loadRawEventLog','\x20f√ºr\x20Event\x20','last_seen','date','lampe','alert','send','text.alarm','N/A\x20(Learning)','createDailyDigest','Garten','getEnums','LTM.processingStatus','systemConfig','@google/generative-ai','join','STANDORT:\x20Lat\x20','system.','PARTY','@iobroker/adapter-core','node-schedule','temperature','mode','runBaselineDriftAnalysis','scheduleJob','sendToAsync','admin.','rauch','notifyEmailRecipient','setState','min','productname',',\x20Location:\x20','createAllObjects','selectedFunctionIds','object','constructor','info','systemUUID','native','Flur','updateAnalysisHistory','‚úÖ\x20Server\x20(simuliert):\x20Lizenz\x20g√ºltig.','level','1633162cJkVGX','licenseKey','2-digit','rawEventLog','modeResetJob','values','location','analysis.automation','timestamp','analysis.comfortSummary','stringify','shutter_contact','map','Success:\x20Compressed\x20','battery','pressure','sensor.window','sensor.door','Last\x20Check','SABOTAGE','activity','signal','ltmJob','aiPersona','capabilities','logDuplicates','Missing\x20data','party','cogni-living\x20adapter\x20starting\x20(v','guest','checkSystemObjects','reverse','false_positive','analysis.automation.patternDetected','comment','Last\x20Result','notifyTelegramInstance','CONFIG_PENDING','.on','Pro\x20Feature','Rauchmelder','uuid-not-found','channel','WEEK_PROGRAM','max','System\x20Status\x20&\x20Control','message','find','Unbekannt','bad','config','checkLicense','Lizenzpr√ºfung\x20gestartet\x20f√ºr\x20System-UUID:\x20','256lzrtfh','name','feedbackHistory','N/A','analysis.deviationFromBaseline','ERROR_CODE','1.\x20ANALYSE:\x20Bewerte\x20Sensor-Events.\x20deviation=\x27N/A\x27.','System\x20Mode','LTM.driftAnalysis.baselineDrift','state','Starting\x20Smart\x20Scan\x20with\x20filters:\x20','Started\x20at\x20','loadSystemMode','events.history','onUnload','test','Schlafzimmer','sendTo','fenster','LTM.triggerDailyDigest','process','Temperatur','.level','N/A\x20(No\x20Activity)','axios','historyId','PRIORIT√ÑT:\x20Gesundheit\x20und\x20Sicherheit\x20f√ºr\x20Senioren\x20(AAL).\x20Erkenne\x20Inaktivit√§t,\x20potenzielle\x20St√ºrze\x20(indirekt),\x20ungew√∂hnliche\x20n√§chtliche\x20Aktivit√§t.\x20Komfort\x20ist\x20sekund√§r.','diele','yr.','slice','effect','Feedback\x20gespeichert:\x20','uuid','minDaysForBaseline','modelid','Last\x20raw\x20event','sensorLastValues','switch.light','.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20','onMessage','9sNMtLr','summary','from','role','Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung\x20f√ºr\x20einen\x20einzelnen\x20Bewohner.\x20Aktivit√§tsmuster\x20sind\x20flexibel.','colormode','analysisTimer','precip','write','namespace','loadDailyDigests','notifyEmailInstance','getForeignObjectAsync','setupDriftAnalysisScheduler','events.lastEvent','Analysis\x20Error:\x20','Automation\x20Proposals','scriptProblem','resetAnalysisStates','detectionState'];a0_0x4dfb=function(){return _0x289861;};return a0_0x4dfb();}a0_0x35d1c1();'use strict';const utils=require(a0_0x516068(0x289)),{GoogleGenerativeAI}=require(a0_0x516068(0x284)),schedule=require(a0_0x516068(0x28a)),axios=require(a0_0x516068(0x2ef)),HISTORY_MAX_SIZE=0x32,FEEDBACK_MAX_SIZE=0x14,GEMINI_MODEL=a0_0x516068(0x210),ANALYSIS_HISTORY_MAX_SIZE=0x64,RAW_LOG_MAX_SIZE=0x5dc,DAILY_DIGEST_MAX_SIZE_LIMIT=0xb4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,LTM_SCHEDULE=a0_0x516068(0x1fe),LTM_DP_RAW_LOG=a0_0x516068(0x24c),LTM_DP_DAILY_DIGESTS=a0_0x516068(0x26e),LTM_DP_STATUS=a0_0x516068(0x282),LTM_DP_TRIGGER_DIGEST=a0_0x516068(0x2ea),LTM_DP_BASELINE_STATUS=a0_0x516068(0x18f),LTM_DP_DRIFT_CHANNEL=a0_0x516068(0x256),LTM_DP_DRIFT_STATUS=a0_0x516068(0x2df),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x516068(0x214),SYSTEM_DP_MODE=a0_0x516068(0x1f4),MODE_RESET_SCHEDULE=a0_0x516068(0x21c),SYSTEM_MODES={'NORMAL':a0_0x516068(0x24b),'VACATION':a0_0x516068(0x238),'PARTY':a0_0x516068(0x2bd),'GUEST':a0_0x516068(0x2bf)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x516068(0x288)],SYSTEM_MODES['GUEST']],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','senior_aal':a0_0x516068(0x2f1),'family':a0_0x516068(0x200),'single_comfort':a0_0x516068(0x303),'security':a0_0x516068(0x1f2)};function a0_0x130d(_0x32ba4d,_0x317a81){const _0x1d5988=a0_0x4dfb();return a0_0x130d=function(_0x35d1c1,_0x2df6da){_0x35d1c1=_0x35d1c1-0x174;let _0x4dfbd7=_0x1d5988[_0x35d1c1];return _0x4dfbd7;},a0_0x130d(_0x32ba4d,_0x317a81);}class CogniLiving extends utils[a0_0x516068(0x178)]{constructor(_0x5b5326){const _0x434ee5=a0_0x516068;super({..._0x5b5326,'name':'cogni-living'}),this['eventHistory']=[],this['analysisHistory']=[],this['feedbackHistory']=[],this[_0x434ee5(0x2a5)]=[],this['dailyDigests']=[],this[_0x434ee5(0x2fb)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x434ee5(0x19c)]=null,this['geminiModel']=null,this[_0x434ee5(0x1e5)]=SYSTEM_MODES['NORMAL'],this[_0x434ee5(0x1ec)]=![],this['lastAlertState']=![],this[_0x434ee5(0x29c)]=_0x434ee5(0x247),this[_0x434ee5(0x305)]=null,this['ltmJob']=null,this[_0x434ee5(0x2a6)]=null,this[_0x434ee5(0x1c6)]=null,this['on']('ready',this[_0x434ee5(0x20e)][_0x434ee5(0x206)](this)),this['on'](_0x434ee5(0x19d),this[_0x434ee5(0x192)][_0x434ee5(0x206)](this)),this['on'](_0x434ee5(0x1b0),this[_0x434ee5(0x2e5)][_0x434ee5(0x206)](this)),this['on'](_0x434ee5(0x2d0),this[_0x434ee5(0x2fe)][_0x434ee5(0x206)](this));}async['onReady'](){const _0x3a746a=a0_0x516068,_0x5d7c26=this[_0x3a746a(0x1b4)]||_0x3a746a(0x247);this[_0x3a746a(0x20d)]['info'](_0x3a746a(0x2be)+_0x5d7c26+')'),this[_0x3a746a(0x2d4)]['licenseKey']=this[_0x3a746a(0x2d4)][_0x3a746a(0x2a3)]||'',this[_0x3a746a(0x1ec)]=await this[_0x3a746a(0x2d5)](this['config'][_0x3a746a(0x2a3)]);this[_0x3a746a(0x1ec)]?this[_0x3a746a(0x20d)][_0x3a746a(0x29b)]('‚úÖ\x20License\x20check\x20successful:\x20PRO\x20features\x20enabled.'):this[_0x3a746a(0x20d)][_0x3a746a(0x29b)](_0x3a746a(0x220));if(!this[_0x3a746a(0x2d4)][_0x3a746a(0x2f8)]||this['config'][_0x3a746a(0x2f8)]<0x1)this['config']['minDaysForBaseline']=0x7;if(!this['config']['ltmStbWindowDays']||this['config'][_0x3a746a(0x236)]<0x1)this[_0x3a746a(0x2d4)][_0x3a746a(0x236)]=0xe;if(!this['config'][_0x3a746a(0x25a)]||this['config'][_0x3a746a(0x25a)]<0x1e)this[_0x3a746a(0x2d4)]['ltmLtbWindowDays']=0x3c;this[_0x3a746a(0x2d4)][_0x3a746a(0x25a)]=Math[_0x3a746a(0x294)](Math[_0x3a746a(0x2ce)](this['config'][_0x3a746a(0x25a)],this[_0x3a746a(0x2d4)][_0x3a746a(0x236)]+0xe),DAILY_DIGEST_MAX_SIZE_LIMIT);try{const _0x1792a3=await this[_0x3a746a(0x30b)]('system.config');_0x1792a3&&_0x1792a3[_0x3a746a(0x1c8)]&&(this['systemConfig'][_0x3a746a(0x1ea)]=_0x1792a3['common'][_0x3a746a(0x1ea)]||0x0,this[_0x3a746a(0x283)][_0x3a746a(0x1c4)]=_0x1792a3[_0x3a746a(0x1c8)][_0x3a746a(0x1c4)]||0x0,this['systemConfig'][_0x3a746a(0x1f5)]=_0x1792a3[_0x3a746a(0x1c8)]['city']||'',this[_0x3a746a(0x20d)][_0x3a746a(0x29b)](_0x3a746a(0x198)+(this[_0x3a746a(0x283)]['city']||_0x3a746a(0x2d2))+'\x20('+this[_0x3a746a(0x283)][_0x3a746a(0x1ea)]+',\x20'+this['systemConfig']['longitude']+')'));}catch(_0x318f21){this['log']['warn'](_0x3a746a(0x1b1));}if(this['config'][_0x3a746a(0x190)])try{this[_0x3a746a(0x19c)]=new GoogleGenerativeAI(this['config'][_0x3a746a(0x190)]),this[_0x3a746a(0x248)]=this[_0x3a746a(0x19c)][_0x3a746a(0x1d1)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x3a746a(0x316)}}),this['log'][_0x3a746a(0x29b)]('Gemini\x20AI\x20initialized.');}catch(_0x289246){this[_0x3a746a(0x20d)][_0x3a746a(0x1a8)](_0x3a746a(0x204)+_0x289246[_0x3a746a(0x2d0)]);}else this[_0x3a746a(0x20d)][_0x3a746a(0x1c1)]('Gemini\x20API\x20Key\x20missing.\x20AI\x20features\x20disabled.');await this[_0x3a746a(0x297)](),await this[_0x3a746a(0x2e3)]();const _0x1f0acd=await this[_0x3a746a(0x1dd)](_0x3a746a(0x197));this[_0x3a746a(0x17a)]=_0x1f0acd?!!_0x1f0acd[_0x3a746a(0x246)]:![];try{const _0xbd7c8b=await this['getStateAsync'](_0x3a746a(0x258));if(_0xbd7c8b&&_0xbd7c8b[_0x3a746a(0x246)])this[_0x3a746a(0x1e9)]=JSON['parse'](_0xbd7c8b[_0x3a746a(0x246)][_0x3a746a(0x226)]());}catch(_0x31efbc){this['analysisHistory']=[];}try{const _0x2aa4fb=await this['getStateAsync'](_0x3a746a(0x225));if(_0x2aa4fb&&_0x2aa4fb[_0x3a746a(0x246)])this[_0x3a746a(0x2d9)]=JSON['parse'](_0x2aa4fb[_0x3a746a(0x246)]['toString']());}catch(_0x4304d1){this[_0x3a746a(0x2d9)]=[];}await this[_0x3a746a(0x276)](),await this[_0x3a746a(0x309)](),this[_0x3a746a(0x22c)](_0x3a746a(0x1b8)),this[_0x3a746a(0x22c)](LTM_DP_TRIGGER_DIGEST),this[_0x3a746a(0x22c)](SYSTEM_DP_MODE);const _0x4bab36=this[_0x3a746a(0x2d4)][_0x3a746a(0x1bc)];if(_0x4bab36&&_0x4bab36[_0x3a746a(0x1d9)]>0x0){this[_0x3a746a(0x20d)][_0x3a746a(0x29b)](_0x3a746a(0x1da)+_0x4bab36['length']+'\x20sensors...');for(const _0x1d91cf of _0x4bab36){if(_0x1d91cf['id']){await this[_0x3a746a(0x270)](_0x1d91cf['id']);try{const _0x57f834=await this[_0x3a746a(0x269)](_0x1d91cf['id']);if(_0x57f834)this['sensorLastValues'][_0x1d91cf['id']]=_0x57f834[_0x3a746a(0x246)];}catch(_0x472fc2){}}}}if(this[_0x3a746a(0x305)])clearInterval(this[_0x3a746a(0x305)]);const _0x5dc3e1=this[_0x3a746a(0x2d4)]['analysisInterval']||0xf;_0x5dc3e1>0x0&&(this[_0x3a746a(0x20d)][_0x3a746a(0x29b)](_0x3a746a(0x25d)+_0x5dc3e1+_0x3a746a(0x315)),this[_0x3a746a(0x305)]=setInterval(()=>this[_0x3a746a(0x24d)](),_0x5dc3e1*0x3c*0x3e8)),this[_0x3a746a(0x235)](),this[_0x3a746a(0x193)](),this[_0x3a746a(0x30c)]();}async[a0_0x516068(0x1c2)](_0xc740ef={}){const _0x36b60c=a0_0x516068;this['log'][_0x36b60c(0x29b)](_0x36b60c(0x2e1)+JSON[_0x36b60c(0x2ac)](_0xc740ef));const _0x11e1c4=[],_0x73ceb4=_0xc740ef['motion']!==![],_0x1edbc3=_0xc740ef[_0x36b60c(0x18a)]!==![],_0xaedeb4=_0xc740ef[_0x36b60c(0x23f)]!==![],_0x19d6d5=_0xc740ef[_0x36b60c(0x28b)]===!![],_0x175e9d=_0xc740ef['weather']===!![],_0x5aaf76=_0xc740ef[_0x36b60c(0x298)]||[],_0x1aac41=await this[_0x36b60c(0x1aa)](_0x36b60c(0x20c),_0x36b60c(0x1a2)),_0x2cb5c4=await this['getForeignObjectsAsync'](_0x36b60c(0x216),'enum'),_0x1c9ae5={},_0x58815b={},_0x3bd2a2={},_0x479827=(_0x75c5f5,_0x4c8cb6,_0x37a71d=![])=>{const _0xa6f4f0=_0x36b60c;if(!_0x75c5f5)return;for(const _0xc3dce8 in _0x75c5f5){const _0x3a4b08=_0x75c5f5[_0xc3dce8];if(_0x3a4b08&&_0x3a4b08[_0xa6f4f0(0x1c8)]&&_0x3a4b08['common'][_0xa6f4f0(0x1e7)]){const _0x52b1a6=(typeof _0x3a4b08[_0xa6f4f0(0x1c8)][_0xa6f4f0(0x2d8)]===_0xa6f4f0(0x299)?_0x3a4b08[_0xa6f4f0(0x1c8)][_0xa6f4f0(0x2d8)]['de']:_0x3a4b08[_0xa6f4f0(0x1c8)][_0xa6f4f0(0x2d8)])||_0x3a4b08[_0xa6f4f0(0x1c8)][_0xa6f4f0(0x2d8)];if(_0x37a71d)_0x3bd2a2[_0xc3dce8]=_0x52b1a6;for(const _0x2fd687 of _0x3a4b08[_0xa6f4f0(0x1c8)]['members']){if(_0x37a71d){if(!_0x4c8cb6[_0x2fd687])_0x4c8cb6[_0x2fd687]=[];_0x4c8cb6[_0x2fd687][_0xa6f4f0(0x31a)](_0xc3dce8);}else _0x4c8cb6[_0x2fd687]=_0x52b1a6;}}}};_0x479827(_0x1aac41,_0x1c9ae5),_0x479827(_0x2cb5c4,_0x58815b,!![]);const _0x2ef1ce=await this['getForeignObjectsAsync']('*','state'),_0x42955c=[_0x36b60c(0x267),_0x36b60c(0x31c),_0x36b60c(0x175),'RSSI',_0x36b60c(0x19a),_0x36b60c(0x183),_0x36b60c(0x2b5),'ALARM',_0x36b60c(0x2c7),_0x36b60c(0x242),_0x36b60c(0x1d5),'WORKING',_0x36b60c(0x213),_0x36b60c(0x262),'OPERATING_VOLTAGE','VIRTUAL_CHANNEL','INSTALL_TEST','COMBINED_PARAMETER',_0x36b60c(0x2cd),'ON_TIME',_0x36b60c(0x187),_0x36b60c(0x2dc),'PROCESS',_0x36b60c(0x25b),'CONNECTION',_0x36b60c(0x1ff),'link_quality',_0x36b60c(0x2b0),_0x36b60c(0x222),'firmware',_0x36b60c(0x1b4),'connection',_0x36b60c(0x29b),_0x36b60c(0x2b7),_0x36b60c(0x278),_0x36b60c(0x1db),_0x36b60c(0x314),_0x36b60c(0x27b),_0x36b60c(0x28c),_0x36b60c(0x304),_0x36b60c(0x2f5),'xy','ct',_0x36b60c(0x1be),_0x36b60c(0x231),_0x36b60c(0x295),'manufacturer',_0x36b60c(0x2f9),_0x36b60c(0x232),_0x36b60c(0x1d2),'mac\x20address',_0x36b60c(0x1f1),_0x36b60c(0x2ba),_0x36b60c(0x2eb),_0x36b60c(0x275),_0x36b60c(0x310),_0x36b60c(0x1a7),_0x36b60c(0x312),_0x36b60c(0x300),_0x36b60c(0x1b9),_0x36b60c(0x1a3),_0x36b60c(0x20f),_0x36b60c(0x29b),_0x36b60c(0x253)];if(!_0x175e9d)_0x42955c['push']('wetter','weather',_0x36b60c(0x318),_0x36b60c(0x2b1),'uv','rain',_0x36b60c(0x306));const _0x368111=[_0x36b60c(0x287),_0x36b60c(0x290),'info.','vis.','history.','material.',_0x36b60c(0x1ba),_0x36b60c(0x1e0)];if(!_0x175e9d)_0x368111[_0x36b60c(0x31a)]('daswetter.',_0x36b60c(0x174),_0x36b60c(0x1e2),_0x36b60c(0x2f3),'openweathermap.');const _0xa352db=(_0x24520e,_0x117f99,_0x63d7ea=![])=>{const _0x5a6d32=_0x36b60c,_0x13c16f=_0x24520e[_0x5a6d32(0x260)]('.');if(_0x117f99[_0x24520e])return _0x117f99[_0x24520e];if(_0x13c16f[_0x5a6d32(0x1d9)]>0x2&&_0x117f99[_0x13c16f[_0x5a6d32(0x2f4)](0x0,-0x1)[_0x5a6d32(0x285)]('.')])return _0x117f99[_0x13c16f[_0x5a6d32(0x2f4)](0x0,-0x1)[_0x5a6d32(0x285)]('.')];if(_0x13c16f[_0x5a6d32(0x1d9)]>0x3&&_0x117f99[_0x13c16f[_0x5a6d32(0x2f4)](0x0,-0x2)['join']('.')])return _0x117f99[_0x13c16f[_0x5a6d32(0x2f4)](0x0,-0x2)[_0x5a6d32(0x285)]('.')];return _0x63d7ea?[]:null;};for(const _0x2a8228 in _0x2ef1ce){const _0x125add=_0x2ef1ce[_0x2a8228];if(!_0x125add||!_0x125add[_0x36b60c(0x1c8)])continue;if(_0x368111[_0x36b60c(0x1d7)](_0x57d85c=>_0x2a8228['startsWith'](_0x57d85c)))continue;const _0x55228f=_0x125add['common'][_0x36b60c(0x302)]||'',_0x281837=(_0x125add[_0x36b60c(0x1c8)][_0x36b60c(0x2d8)]&&typeof _0x125add[_0x36b60c(0x1c8)][_0x36b60c(0x2d8)]===_0x36b60c(0x299)?_0x125add['common']['name']['de']:_0x125add[_0x36b60c(0x1c8)][_0x36b60c(0x2d8)])||'',_0x3b191d=_0x2a8228[_0x36b60c(0x265)](),_0x536399=_0x281837?_0x281837['toLowerCase']():'',_0x190b1a=_0x2a8228[_0x36b60c(0x195)](),_0xd0d60f=_0xa352db(_0x2a8228,_0x1c9ae5),_0x3ef245=_0xa352db(_0x2a8228,_0x58815b,!![]);let _0x3ef922=null,_0x4262c7=![];if(_0x3ef245&&_0x3ef245['length']>0x0){const _0x3ded73=_0x3ef245[_0x36b60c(0x2d1)](_0x9b080f=>_0x5aaf76[_0x36b60c(0x24e)](_0x9b080f));if(_0x3ded73){_0x4262c7=!![];const _0x5c845f=_0x3bd2a2[_0x3ded73];if(_0x190b1a[_0x36b60c(0x24e)](_0x36b60c(0x215))||_0x190b1a[_0x36b60c(0x24e)](_0x36b60c(0x211)))_0x3ef922=_0x36b60c(0x19e);else{if(_0x190b1a['includes']('smoke')||_0x190b1a['includes'](_0x36b60c(0x1b7))||_0x536399[_0x36b60c(0x24e)](_0x36b60c(0x291)))_0x3ef922=_0x36b60c(0x2ca);else{if(_0x190b1a[_0x36b60c(0x24e)]('state')||_0x190b1a['includes'](_0x36b60c(0x2a1))||_0x190b1a[_0x36b60c(0x24e)]('on'))_0x3ef922=_0x36b60c(0x179);else _0x3ef922=_0x5c845f;}}}}if(!_0x4262c7&&!_0x175e9d){if(_0x42955c[_0x36b60c(0x1d7)](_0x27430f=>_0x536399['includes'](_0x27430f)||_0x3b191d[_0x36b60c(0x24e)](_0x27430f)))continue;}if(!_0x3ef922&&_0x73ceb4){const _0x304f9c=_0x55228f[_0x36b60c(0x24e)](_0x36b60c(0x1cc))||_0x55228f['includes'](_0x36b60c(0x18b)),_0xdcf63b=_0x536399['includes'](_0x36b60c(0x1fc))||_0x536399[_0x36b60c(0x24e)]('pr√§senz');if(_0x304f9c||_0xdcf63b)_0x3ef922='Bewegung';}if(!_0x3ef922&&_0x1edbc3){const _0x2202d4=_0x190b1a[_0x36b60c(0x24e)](_0x36b60c(0x2ad))&&_0x190b1a[_0x36b60c(0x266)](_0x36b60c(0x239));(_0x2202d4||_0x55228f[_0x36b60c(0x24e)](_0x36b60c(0x2b3))||_0x55228f['includes'](_0x36b60c(0x2b2))||(_0x536399['includes'](_0x36b60c(0x2e9))||_0x536399[_0x36b60c(0x24e)](_0x36b60c(0x1a0)))&&!_0x536399[_0x36b60c(0x24e)]('temp')&&!_0x536399[_0x36b60c(0x24e)]('griff')&&(_0x125add[_0x36b60c(0x1c8)][_0x36b60c(0x244)]===_0x36b60c(0x18c)||_0x125add['common'][_0x36b60c(0x244)]==='number'))&&(_0x3ef922='Fenster/T√ºr');}if(!_0x3ef922&&_0xaedeb4){const _0x62250e=_0x55228f['includes'](_0x36b60c(0x2fc))||_0x55228f[_0x36b60c(0x24e)](_0x36b60c(0x1ac)),_0x3fc662=_0x536399[_0x36b60c(0x24e)](_0x36b60c(0x201))||_0x536399['includes'](_0x36b60c(0x27a))||_0x536399[_0x36b60c(0x24e)](_0x36b60c(0x268)),_0x1c029d=_0x190b1a['endsWith'](_0x36b60c(0x239))||_0x190b1a[_0x36b60c(0x266)](_0x36b60c(0x2c8))||_0x190b1a[_0x36b60c(0x266)](_0x36b60c(0x2ed))||_0x190b1a[_0x36b60c(0x266)]('.bri')||_0x190b1a['endsWith'](_0x36b60c(0x20a));(_0x62250e||_0x3fc662)&&_0x1c029d&&_0x125add[_0x36b60c(0x1c8)][_0x36b60c(0x307)]&&(_0x3ef922='Licht');}!_0x3ef922&&_0x19d6d5&&((_0x55228f[_0x36b60c(0x24e)](_0x36b60c(0x209))||_0x55228f['includes']('value.humidity')||_0x536399[_0x36b60c(0x24e)](_0x36b60c(0x1b6)))&&(_0x3ef922=_0x36b60c(0x2ec)));if(_0x3ef922){let _0x2820a1=_0xd0d60f||'';if(!_0x2820a1){if(_0x536399[_0x36b60c(0x24e)](_0x36b60c(0x2d3)))_0x2820a1=_0x36b60c(0x21b);else{if(_0x536399[_0x36b60c(0x24e)]('k√ºche'))_0x2820a1='K√ºche';else{if(_0x536399['includes'](_0x36b60c(0x19b)))_0x2820a1=_0x36b60c(0x24f);else{if(_0x536399[_0x36b60c(0x24e)](_0x36b60c(0x1e1)))_0x2820a1=_0x36b60c(0x2e7);else{if(_0x536399[_0x36b60c(0x24e)]('flur')||_0x536399['includes'](_0x36b60c(0x2f2)))_0x2820a1=_0x36b60c(0x29e);else{if(_0x536399['includes']('garten'))_0x2820a1=_0x36b60c(0x280);}}}}}}let _0x51f4fb=0x0;if(_0x4262c7)_0x51f4fb+=0x1e;else{if(_0xd0d60f)_0x51f4fb+=0x14;else{if(_0x2820a1)_0x51f4fb+=0xa;}}_0x11e1c4[_0x36b60c(0x31a)]({'id':_0x2a8228,'name':_0x281837||_0x2a8228,'type':_0x3ef922,'location':_0x2820a1,'logDuplicates':_0x3ef922===_0x36b60c(0x19e),'_score':_0x51f4fb});}}return _0x11e1c4['sort']((_0x4ba08c,_0x15f312)=>_0x15f312['_score']-_0x4ba08c[_0x36b60c(0x26c)]),_0x11e1c4;}async[a0_0x516068(0x221)](){const _0x13a431=a0_0x516068;try{const _0x4abea9=await this[_0x13a431(0x30b)](_0x13a431(0x219));if(_0x4abea9&&_0x4abea9[_0x13a431(0x29d)]&&_0x4abea9[_0x13a431(0x29d)]['uuid'])return _0x4abea9[_0x13a431(0x29d)][_0x13a431(0x2f7)];return _0x13a431(0x2cb);}catch(_0xaf5186){return _0x13a431(0x243);}}async[a0_0x516068(0x2d5)](_0x150feb){const _0x261303=a0_0x516068;if(!_0x150feb)return![];this[_0x261303(0x29c)]=await this[_0x261303(0x221)](),this[_0x261303(0x20d)][_0x261303(0x29b)](_0x261303(0x2d6)+this[_0x261303(0x29c)]);if(_0x150feb==='TEST-PRO-KEY')return this[_0x261303(0x20d)]['info'](_0x261303(0x17c)),!![];if(_0x150feb['startsWith'](_0x261303(0x1bd)))return this[_0x261303(0x20d)][_0x261303(0x29b)](_0x261303(0x2a0)),!![];return![];}async[a0_0x516068(0x297)](){const _0x58f63a=a0_0x516068;await this[_0x58f63a(0x2c0)](),await this[_0x58f63a(0x259)](_0x58f63a(0x30d),{'type':_0x58f63a(0x2e0),'common':{'name':_0x58f63a(0x2fa),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await this[_0x58f63a(0x259)](_0x58f63a(0x2e4),{'type':_0x58f63a(0x2e0),'common':{'name':_0x58f63a(0x1cd),'type':_0x58f63a(0x25c),'role':_0x58f63a(0x253),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x58f63a(0x1b8),{'type':_0x58f63a(0x2e0),'common':{'name':_0x58f63a(0x182),'type':_0x58f63a(0x18c),'role':_0x58f63a(0x317),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x58f63a(0x259)](_0x58f63a(0x261),{'type':'state','common':{'name':_0x58f63a(0x2c5),'type':_0x58f63a(0x25c),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x58f63a(0x259)](_0x58f63a(0x197),{'type':'state','common':{'name':_0x58f63a(0x184),'type':_0x58f63a(0x18c),'role':_0x58f63a(0x245),'read':!![],'write':![],'def':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x58f63a(0x1ed),{'type':_0x58f63a(0x2e0),'common':{'name':_0x58f63a(0x1f6),'type':'string','role':_0x58f63a(0x27d),'read':!![],'write':![]},'native':{}}),await this[_0x58f63a(0x259)](_0x58f63a(0x1e8),{'type':'state','common':{'name':'Activity\x20Summary','type':'string','role':_0x58f63a(0x1cb),'read':!![],'write':![]},'native':{}}),await this[_0x58f63a(0x259)](_0x58f63a(0x2db),{'type':'state','common':{'name':'Deviation','type':_0x58f63a(0x25c),'role':_0x58f63a(0x2e0),'read':!![],'write':![],'def':_0x58f63a(0x2da)},'native':{}}),await this[_0x58f63a(0x259)](_0x58f63a(0x2ab),{'type':_0x58f63a(0x2e0),'common':{'name':'Comfort\x20Summary','type':_0x58f63a(0x25c),'role':_0x58f63a(0x1cb),'read':!![],'write':![]},'native':{}}),await this[_0x58f63a(0x259)](_0x58f63a(0x1d8),{'type':_0x58f63a(0x2e0),'common':{'name':_0x58f63a(0x254),'type':_0x58f63a(0x25c),'role':_0x58f63a(0x1cb),'read':!![],'write':![]},'native':{}}),await this[_0x58f63a(0x23e)](_0x58f63a(0x2a9),{'type':_0x58f63a(0x2cc),'common':{'name':_0x58f63a(0x30f)},'native':{}}),await this['setObjectNotExistsAsync'](_0x58f63a(0x2c3),{'type':_0x58f63a(0x2e0),'common':{'name':_0x58f63a(0x21d),'type':_0x58f63a(0x18c),'role':_0x58f63a(0x18e),'read':!![],'write':![],'def':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x58f63a(0x1f0),{'type':'state','common':{'name':_0x58f63a(0x1ef),'type':_0x58f63a(0x25c),'role':_0x58f63a(0x1cb),'read':!![],'write':![]},'native':{}}),await this[_0x58f63a(0x259)](_0x58f63a(0x25e),{'type':'state','common':{'name':'Action','type':_0x58f63a(0x25c),'role':'text','read':!![],'write':![]},'native':{}}),await this[_0x58f63a(0x259)](_0x58f63a(0x258),{'type':_0x58f63a(0x2e0),'common':{'name':'Logbook','type':_0x58f63a(0x25c),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0x58f63a(0x225),{'type':_0x58f63a(0x2e0),'common':{'name':_0x58f63a(0x23d),'type':_0x58f63a(0x25c),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this['checkLtmObjects'](),await this[_0x58f63a(0x252)]();}[a0_0x516068(0x192)](_0x4e1a03,_0xaa90d3){const _0x280117=a0_0x516068;if(!_0xaa90d3)return;if(_0x4e1a03===this[_0x280117(0x308)]+'.'+SYSTEM_DP_MODE){_0xaa90d3[_0x280117(0x246)]&&Object[_0x280117(0x2a7)](SYSTEM_MODES)['includes'](_0xaa90d3[_0x280117(0x246)])&&(this['currentSystemMode']=_0xaa90d3['val']);if(!_0xaa90d3[_0x280117(0x26d)])this[_0x280117(0x293)](_0x4e1a03,{'val':this[_0x280117(0x1e5)],'ack':!![]});return;}if(!_0xaa90d3[_0x280117(0x26d)]){_0x4e1a03[_0x280117(0x24e)]('analysis.trigger')&&_0xaa90d3[_0x280117(0x246)]&&(this['setState'](_0x4e1a03,{'val':![],'ack':!![]}),this['runGeminiAnalysis']());if(_0x4e1a03[_0x280117(0x24e)]('triggerDailyDigest')&&_0xaa90d3[_0x280117(0x246)]){this[_0x280117(0x293)](_0x4e1a03,{'val':![],'ack':!![]});if(this[_0x280117(0x1ec)])this[_0x280117(0x27f)]();}return;}const _0x44a3d4=(this[_0x280117(0x2d4)][_0x280117(0x1bc)]||[])['find'](_0x3c7904=>_0x3c7904['id']===_0x4e1a03);if(_0x44a3d4)this[_0x280117(0x263)](_0x4e1a03,_0xaa90d3,_0x44a3d4);}async[a0_0x516068(0x263)](_0x2809c1,_0x3c5d8c,_0xec837f){const _0x56abb6=a0_0x516068;if(!_0xec837f[_0x56abb6(0x2bb)]&&this['sensorLastValues'][_0x2809c1]===_0x3c5d8c[_0x56abb6(0x246)])return;this[_0x56abb6(0x2fb)][_0x2809c1]=_0x3c5d8c[_0x56abb6(0x246)];const _0x13543b={'timestamp':_0x3c5d8c['ts'],'id':_0x2809c1,'name':_0xec837f[_0x56abb6(0x2d8)],'value':_0x3c5d8c['val'],'location':_0xec837f[_0x56abb6(0x2a8)],'type':_0xec837f['type']};this['eventHistory'][_0x56abb6(0x199)](_0x13543b);if(this[_0x56abb6(0x22b)]['length']>HISTORY_MAX_SIZE)this[_0x56abb6(0x22b)]['pop']();await this[_0x56abb6(0x20b)](_0x56abb6(0x30d),{'val':JSON[_0x56abb6(0x2ac)](_0x13543b),'ack':!![]}),this[_0x56abb6(0x2a5)][_0x56abb6(0x31a)]({'timestamp':new Date(_0x3c5d8c['ts'])['toISOString'](),'sensorName':_0xec837f[_0x56abb6(0x2d8)],'location':_0xec837f[_0x56abb6(0x2a8)],'value':_0x3c5d8c[_0x56abb6(0x246)]}),await this[_0x56abb6(0x1a1)]();}[a0_0x516068(0x24d)](){const _0x7f51dc=a0_0x516068;if(this[_0x7f51dc(0x22b)][_0x7f51dc(0x1d9)]===0x0){this[_0x7f51dc(0x293)](_0x7f51dc(0x197),{'val':![],'ack':!![]}),this[_0x7f51dc(0x311)]();return;}const _0x4c5b41=Date['now']();if(_0x4c5b41-this[_0x7f51dc(0x22b)][0x0][_0x7f51dc(0x2aa)]>(this[_0x7f51dc(0x2d4)][_0x7f51dc(0x26a)]||0xf)*0x3c*0x3e8){this['setState'](_0x7f51dc(0x197),{'val':![],'ack':!![]}),this[_0x7f51dc(0x311)]();return;}this[_0x7f51dc(0x208)]()[_0x7f51dc(0x255)](_0x251efc=>this[_0x7f51dc(0x20d)][_0x7f51dc(0x1a8)](_0x251efc));}async['runGeminiAnalysis'](){const _0x242b1e=a0_0x516068;if(!this[_0x242b1e(0x248)]||this[_0x242b1e(0x22b)][_0x242b1e(0x1d9)]===0x0)return;const _0x15846c=PERSONA_MAPPING[this['config'][_0x242b1e(0x2b9)]||'generic'],_0x54fafa=this[_0x242b1e(0x2d4)]['livingContext']||'',_0x861571=this[_0x242b1e(0x1e5)],_0x5ad856=new Date(),_0x1c00cd=_0x5ad856[_0x242b1e(0x19f)](_0x242b1e(0x251),{'weekday':_0x242b1e(0x257),'hour':_0x242b1e(0x2a4),'minute':_0x242b1e(0x2a4)}),_0x29edce=this[_0x242b1e(0x283)],_0x24640d=_0x242b1e(0x286)+_0x29edce[_0x242b1e(0x1ea)]+',\x20Lon\x20'+_0x29edce[_0x242b1e(0x1c4)]+'\x20('+(_0x29edce[_0x242b1e(0x1f5)]||'Unbekannt')+_0x242b1e(0x1ee);this[_0x242b1e(0x20d)][_0x242b1e(0x23b)]('ü§ñ\x20AI\x20Prompt\x20Context\x20-\x20Time:\x20'+_0x1c00cd+_0x242b1e(0x296)+_0x29edce['city']);let _0x393e6f=_0x242b1e(0x18d),_0x35ce54=_0x242b1e(0x2dd);if(this[_0x242b1e(0x1ec)]&&this[_0x242b1e(0x313)][_0x242b1e(0x1d9)]>=(this[_0x242b1e(0x2d4)][_0x242b1e(0x2f8)]||0x7)&&_0x861571===SYSTEM_MODES['NORMAL']){const _0x4ba663=this['dailyDigests'][_0x242b1e(0x2f4)](-(this['config']['ltmStbWindowDays']||0xe))[_0x242b1e(0x2c1)]();_0x393e6f=_0x242b1e(0x1eb)+JSON[_0x242b1e(0x2ac)](_0x4ba663),_0x35ce54=_0x242b1e(0x237);}let _0xb6dfc3='';if(this[_0x242b1e(0x2d9)][_0x242b1e(0x1d9)]>0x0){const _0x2ae030=this[_0x242b1e(0x2d9)][_0x242b1e(0x24a)](_0x5e134b=>_0x5e134b[_0x242b1e(0x230)]===_0x242b1e(0x2c2)||_0x5e134b[_0x242b1e(0x230)]==='needs_improvement')[_0x242b1e(0x2f4)](0x0,0x3)[_0x242b1e(0x2ae)](_0x16a884=>_0x242b1e(0x1ca)+_0x16a884[_0x242b1e(0x185)]+'\x22\x20at\x20'+new Date(_0x16a884[_0x242b1e(0x2aa)])[_0x242b1e(0x1fa)]()+'\x20was\x20FALSE.\x20Reason:\x20'+(_0x16a884[_0x242b1e(0x2c4)]||_0x242b1e(0x189))+'.')[_0x242b1e(0x285)]('\x0a');_0x2ae030&&(_0xb6dfc3=_0x242b1e(0x1c5)+_0x2ae030+'\x0a');}const _0x2d8127='ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AKTUELLE\x20ZEIT:\x20'+_0x1c00cd+'.\x20'+_0x24640d+_0x242b1e(0x194)+_0x861571+'.\x20KONTEXT:\x20'+_0x54fafa+_0x242b1e(0x1ad)+_0x15846c+_0x242b1e(0x2fd)+_0x393e6f+'\x20'+_0xb6dfc3+_0x242b1e(0x1e4)+_0x35ce54+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20AUTOMATION:\x20patternDetected=true/false.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20EVENTS:\x20'+JSON[_0x242b1e(0x2ac)](this[_0x242b1e(0x22b)])+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SCHEMA:\x20{\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x22comfort\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22suggestion\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22suggestedAction\x22:\x20\x22string\x22\x20}\x20}\x20}';try{const _0xeddd8d=await this[_0x242b1e(0x248)][_0x242b1e(0x22d)](_0x2d8127),_0x4f95c5=JSON['parse'](_0xeddd8d[_0x242b1e(0x191)][_0x242b1e(0x1cb)]()['replace'](/```json|```/g,'')[_0x242b1e(0x1f7)]());await this['setStateAsync']('analysis.lastResult',{'val':JSON[_0x242b1e(0x2ac)](_0x4f95c5),'ack':!![]}),await this['setStateAsync'](_0x242b1e(0x1e8),{'val':_0x4f95c5[_0x242b1e(0x2b6)][_0x242b1e(0x300)]||_0x242b1e(0x2da),'ack':!![]}),await this[_0x242b1e(0x20b)](_0x242b1e(0x2db),{'val':_0x4f95c5['activity'][_0x242b1e(0x26f)]||_0x242b1e(0x2da),'ack':!![]}),await this[_0x242b1e(0x20b)](_0x242b1e(0x1ed),{'val':_0x4f95c5['activity'][_0x242b1e(0x185)]||'','ack':!![]});const _0x1195b5=_0x4f95c5['comfort']['automationProposal'],_0x2aa45f=this['isProVersion']?_0x1195b5[_0x242b1e(0x1d0)]:![];await this[_0x242b1e(0x20b)]('analysis.automation.patternDetected',{'val':_0x2aa45f,'ack':!![]}),await this['setStateAsync'](_0x242b1e(0x1f0),{'val':_0x2aa45f?_0x1195b5['description']:this[_0x242b1e(0x1ec)]?'':_0x242b1e(0x2c9),'ack':!![]});if(_0x4f95c5[_0x242b1e(0x2b6)]['isAlert']){await this[_0x242b1e(0x20b)]('analysis.isAlert',{'val':!![],'ack':!![]});if(!this[_0x242b1e(0x17a)])this[_0x242b1e(0x1c9)](_0x242b1e(0x1cf)+_0x4f95c5[_0x242b1e(0x2b6)]['alertReason']);}else await this[_0x242b1e(0x20b)]('analysis.isAlert',{'val':![],'ack':!![]});this[_0x242b1e(0x17a)]=_0x4f95c5[_0x242b1e(0x2b6)][_0x242b1e(0x1d3)];const _0x50b3aa={'timestamp':Date[_0x242b1e(0x188)](),'id':Date[_0x242b1e(0x188)]()['toString'](),'analysis':_0x4f95c5,'systemMode':_0x861571,'isPro':this[_0x242b1e(0x1ec)]};this[_0x242b1e(0x29f)](_0x50b3aa);}catch(_0x1346da){this['log'][_0x242b1e(0x1a8)](_0x242b1e(0x30e)+_0x1346da['message']);}}async[a0_0x516068(0x27f)](){const _0x594316=a0_0x516068;if(!this['isProVersion'])return;await this[_0x594316(0x20b)](LTM_DP_STATUS,{'val':_0x594316(0x2e2)+new Date()[_0x594316(0x19f)](),'ack':!![]});if(!this[_0x594316(0x248)]||this[_0x594316(0x2a5)][_0x594316(0x1d9)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await this[_0x594316(0x20b)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x3e1b09=JSON[_0x594316(0x241)](JSON[_0x594316(0x2ac)](this['rawEventLog'])),_0x4aa12c=(this[_0x594316(0x2d4)][_0x594316(0x205)]||'')[_0x594316(0x227)](0x0,0x3e8),_0x23aba4=_0x594316(0x1df)+_0x4aa12c+_0x594316(0x233)+JSON['stringify'](_0x3e1b09);try{const _0x5a1dbd=await this['geminiModel']['generateContent'](_0x23aba4),_0x3b0edb=JSON[_0x594316(0x241)](_0x5a1dbd[_0x594316(0x191)]['text']()['replace'](/```json|```/g,'')[_0x594316(0x1f7)]());_0x3b0edb[_0x594316(0x300)]&&(this[_0x594316(0x313)][_0x594316(0x31a)]({'timestamp':new Date()[_0x594316(0x23a)](),'eventCount':_0x3e1b09[_0x594316(0x1d9)],'summary':_0x3b0edb['summary'],'activityLevel':_0x3b0edb['activityLevel'],'systemMode':this[_0x594316(0x1e5)]}),await this[_0x594316(0x1af)](),this[_0x594316(0x2a5)]=[],await this[_0x594316(0x1a1)](),await this['setStateAsync'](LTM_DP_STATUS,{'val':_0x594316(0x2af)+_0x3e1b09[_0x594316(0x1d9)]+_0x594316(0x203),'ack':!![]}));}catch(_0x47e5f6){await this[_0x594316(0x20b)](LTM_DP_STATUS,{'val':_0x594316(0x186)+_0x47e5f6[_0x594316(0x2d0)],'ack':!![]});}}async['runBaselineDriftAnalysis'](){const _0x557e86=a0_0x516068;if(!this[_0x557e86(0x1ec)]||!this[_0x557e86(0x248)])return;const _0x46e5f3=this[_0x557e86(0x2d4)][_0x557e86(0x236)]||0xe;if(this[_0x557e86(0x313)][_0x557e86(0x1d9)]<_0x46e5f3+(this[_0x557e86(0x2d4)][_0x557e86(0x2f8)]||0x7)){await this['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x557e86(0x27e),'ack':!![]});return;}const _0x1f7ed4=this[_0x557e86(0x313)][_0x557e86(0x2f4)](-_0x46e5f3),_0x42747=this[_0x557e86(0x313)][_0x557e86(0x2f4)](0x0,this['dailyDigests'][_0x557e86(0x1d9)]-_0x46e5f3),_0x5741e5=_0x557e86(0x319)+JSON[_0x557e86(0x2ac)](_0x42747)+'\x0a\x0aA\x20(STB):\x0a'+JSON[_0x557e86(0x2ac)](_0x1f7ed4);try{const _0xdd7ddd=await this[_0x557e86(0x248)][_0x557e86(0x22d)](_0x5741e5),_0x54100a=JSON['parse'](_0xdd7ddd['response'][_0x557e86(0x1cb)]()['replace'](/```json|```/g,'')['trim']());_0x54100a[_0x557e86(0x1c7)]&&(await this[_0x557e86(0x20b)](LTM_DP_DRIFT_STATUS,{'val':_0x54100a['baselineDrift'],'ack':!![]}),await this[_0x557e86(0x20b)](LTM_DP_DRIFT_DETAILS,{'val':_0x54100a[_0x557e86(0x31b)],'ack':!![]}),await this[_0x557e86(0x20b)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0x43e419){}}async['checkSystemObjects'](){const _0x2ff002=a0_0x516068;await this[_0x2ff002(0x23e)]('system',{'type':'channel','common':{'name':_0x2ff002(0x2cf)},'native':{}}),await this['extendObjectAsync'](SYSTEM_DP_MODE,{'type':_0x2ff002(0x2e0),'common':{'name':_0x2ff002(0x2de),'type':'string','role':_0x2ff002(0x2e0),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x2ff002(0x1f3)],'states':{[SYSTEM_MODES[_0x2ff002(0x1f3)]]:_0x2ff002(0x1bb),[SYSTEM_MODES[_0x2ff002(0x1a9)]]:_0x2ff002(0x1f9),[SYSTEM_MODES[_0x2ff002(0x288)]]:_0x2ff002(0x229),[SYSTEM_MODES['GUEST']]:'Gast'}},'native':{}});}async[a0_0x516068(0x2e3)](){const _0x69e88d=a0_0x516068;try{const _0x4c910c=await this[_0x69e88d(0x1dd)](SYSTEM_DP_MODE);_0x4c910c&&_0x4c910c[_0x69e88d(0x246)]&&Object[_0x69e88d(0x2a7)](SYSTEM_MODES)[_0x69e88d(0x24e)](_0x4c910c[_0x69e88d(0x246)])?this[_0x69e88d(0x1e5)]=_0x4c910c[_0x69e88d(0x246)]:(this[_0x69e88d(0x1e5)]=SYSTEM_MODES[_0x69e88d(0x1f3)],await this[_0x69e88d(0x20b)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x69e88d(0x1f3)],'ack':!![]}));}catch(_0x188329){this['currentSystemMode']=SYSTEM_MODES[_0x69e88d(0x1f3)];}}[a0_0x516068(0x193)](){const _0x3bd6f6=a0_0x516068;if(this[_0x3bd6f6(0x2a6)])this['modeResetJob']['cancel']();this['modeResetJob']=schedule['scheduleJob'](MODE_RESET_SCHEDULE,async()=>{const _0x4522b3=_0x3bd6f6;await this[_0x4522b3(0x2e3)](),AUTO_RESET_MODES['includes'](this[_0x4522b3(0x1e5)])&&await this[_0x4522b3(0x20b)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':![]});});}async[a0_0x516068(0x223)](){const _0x299023=a0_0x516068;if(!this[_0x299023(0x1ec)]){await this[_0x299023(0x20b)](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0x4e973b=this[_0x299023(0x313)][_0x299023(0x1d9)]>=(this[_0x299023(0x2d4)][_0x299023(0x2f8)]||0x7)?_0x299023(0x272)+this[_0x299023(0x313)]['length']+_0x299023(0x202):_0x299023(0x1d4)+this[_0x299023(0x313)][_0x299023(0x1d9)]+'/'+(this[_0x299023(0x2d4)][_0x299023(0x2f8)]||0x7)+')';await this[_0x299023(0x20b)](LTM_DP_BASELINE_STATUS,{'val':_0x4e973b,'ack':!![]});}async[a0_0x516068(0x1b2)](){const _0x3f1b00=a0_0x516068;await this[_0x3f1b00(0x23e)](_0x3f1b00(0x17e),{'type':'channel','common':{'name':_0x3f1b00(0x17e)},'native':{}}),await this[_0x3f1b00(0x23e)](LTM_DP_RAW_LOG,{'type':_0x3f1b00(0x2e0),'common':{'name':'Raw\x20Log','type':_0x3f1b00(0x25c),'role':_0x3f1b00(0x253),'read':!![],'write':![]},'native':{}}),await this[_0x3f1b00(0x23e)](LTM_DP_DAILY_DIGESTS,{'type':_0x3f1b00(0x2e0),'common':{'name':_0x3f1b00(0x26b),'type':'string','role':_0x3f1b00(0x253),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_STATUS,{'type':'state','common':{'name':_0x3f1b00(0x1f8),'type':_0x3f1b00(0x25c),'role':_0x3f1b00(0x1cb),'read':!![],'write':![]},'native':{}}),await this[_0x3f1b00(0x23e)](LTM_DP_TRIGGER_DIGEST,{'type':_0x3f1b00(0x2e0),'common':{'name':'Trigger\x20Digest','type':'boolean','role':_0x3f1b00(0x317),'read':!![],'write':!![],'def':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_BASELINE_STATUS,{'type':_0x3f1b00(0x2e0),'common':{'name':_0x3f1b00(0x1e6),'type':'string','role':_0x3f1b00(0x1cb),'read':!![],'write':![]},'native':{}});}async['checkLtmDriftObjects'](){const _0x2d1b07=a0_0x516068;await this['extendObjectAsync'](LTM_DP_DRIFT_CHANNEL,{'type':'channel','common':{'name':'Drift\x20Analysis'},'native':{}}),await this[_0x2d1b07(0x23e)](LTM_DP_DRIFT_STATUS,{'type':_0x2d1b07(0x2e0),'common':{'name':'Drift\x20Status','type':_0x2d1b07(0x25c),'role':_0x2d1b07(0x2e0),'read':!![],'write':![],'def':_0x2d1b07(0x2da)},'native':{}}),await this[_0x2d1b07(0x23e)](LTM_DP_DRIFT_DETAILS,{'type':'state','common':{'name':_0x2d1b07(0x1e3),'type':'string','role':_0x2d1b07(0x1cb),'read':!![],'write':![]},'native':{}}),await this[_0x2d1b07(0x23e)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x2d1b07(0x2e0),'common':{'name':_0x2d1b07(0x2b4),'type':_0x2d1b07(0x264),'role':_0x2d1b07(0x279),'read':!![],'write':![]},'native':{}});}async['loadRawEventLog'](){const _0x30a9e2=a0_0x516068;try{const _0x56921c=await this[_0x30a9e2(0x1dd)](LTM_DP_RAW_LOG);if(_0x56921c&&_0x56921c[_0x30a9e2(0x246)])this[_0x30a9e2(0x2a5)]=JSON['parse'](_0x56921c[_0x30a9e2(0x246)]);}catch(_0x2941d6){this[_0x30a9e2(0x2a5)]=[];}}async[a0_0x516068(0x1a1)](){const _0x57c61c=a0_0x516068;this['rawEventLog'][_0x57c61c(0x1d9)]>RAW_LOG_MAX_SIZE&&this[_0x57c61c(0x2a5)][_0x57c61c(0x1de)](0x0,this[_0x57c61c(0x2a5)]['length']-RAW_LOG_MAX_SIZE),await this[_0x57c61c(0x20b)](LTM_DP_RAW_LOG,{'val':JSON[_0x57c61c(0x2ac)](this[_0x57c61c(0x2a5)]),'ack':!![]});}async[a0_0x516068(0x309)](){const _0xfeb6c9=a0_0x516068;try{const _0x3ab6aa=await this[_0xfeb6c9(0x1dd)](LTM_DP_DAILY_DIGESTS);if(_0x3ab6aa&&_0x3ab6aa[_0xfeb6c9(0x246)])this[_0xfeb6c9(0x313)]=JSON[_0xfeb6c9(0x241)](_0x3ab6aa[_0xfeb6c9(0x246)]);}catch(_0x540acf){this[_0xfeb6c9(0x313)]=[];}await this[_0xfeb6c9(0x223)]();}async[a0_0x516068(0x1af)](_0xa410c5=!![]){const _0x24624b=a0_0x516068,_0x49665c=this[_0x24624b(0x2d4)][_0x24624b(0x25a)]||0x3c;this[_0x24624b(0x313)][_0x24624b(0x1d9)]>_0x49665c&&this[_0x24624b(0x313)][_0x24624b(0x1de)](0x0,this[_0x24624b(0x313)][_0x24624b(0x1d9)]-_0x49665c);await this[_0x24624b(0x20b)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x24624b(0x2ac)](this['dailyDigests']),'ack':!![]});if(_0xa410c5)await this[_0x24624b(0x223)]();}['setupLtmScheduler'](){const _0x3ace3a=a0_0x516068;if(this['ltmJob'])this[_0x3ace3a(0x2b8)][_0x3ace3a(0x218)]();if(!this[_0x3ace3a(0x1ec)]){this[_0x3ace3a(0x20b)](LTM_DP_STATUS,{'val':_0x3ace3a(0x1a6),'ack':!![]});return;}this['ltmJob']=schedule[_0x3ace3a(0x28e)](LTM_SCHEDULE,()=>this[_0x3ace3a(0x27f)]());}['setupDriftAnalysisScheduler'](){const _0x2e3f53=a0_0x516068;if(this[_0x2e3f53(0x1c6)])clearInterval(this[_0x2e3f53(0x1c6)]);if(!this[_0x2e3f53(0x1ec)])return;this['driftAnalysisTimer']=setInterval(()=>this[_0x2e3f53(0x28d)](),(this[_0x2e3f53(0x2d4)][_0x2e3f53(0x224)]||0x18)*0x36ee80),setTimeout(()=>this[_0x2e3f53(0x28d)](),0x1388);}async[a0_0x516068(0x311)](){const _0x2e1657=a0_0x516068;await this[_0x2e1657(0x20b)](_0x2e1657(0x1e8),{'val':_0x2e1657(0x21a),'ack':!![]}),await this[_0x2e1657(0x20b)](_0x2e1657(0x2db),{'val':this[_0x2e1657(0x1ec)]?_0x2e1657(0x2ee):_0x2e1657(0x1d6),'ack':!![]}),await this[_0x2e1657(0x20b)](_0x2e1657(0x197),{'val':![],'ack':!![]}),this[_0x2e1657(0x17a)]=![];}async[a0_0x516068(0x29f)](_0x2660c9){const _0x54226a=a0_0x516068;this[_0x54226a(0x1e9)]['unshift'](_0x2660c9);if(this[_0x54226a(0x1e9)][_0x54226a(0x1d9)]>ANALYSIS_HISTORY_MAX_SIZE)this['analysisHistory'][_0x54226a(0x25f)]();await this[_0x54226a(0x20b)](_0x54226a(0x258),{'val':JSON[_0x54226a(0x2ac)](this[_0x54226a(0x1e9)]),'ack':!![]});}async[a0_0x516068(0x1c9)](_0x1375bb,_0x4f2384=![]){const _0x4ff147=a0_0x516068;this[_0x4ff147(0x20d)][_0x4ff147(0x29b)]((_0x4f2384?_0x4ff147(0x1ab):'')+_0x4ff147(0x17d)+_0x1375bb+'\x22');const _0x54233e=this['config'];let _0x410f13=0x0;return _0x54233e[_0x4ff147(0x1ce)]&&_0x54233e[_0x4ff147(0x2c6)]&&(await this[_0x4ff147(0x28f)](_0x54233e[_0x4ff147(0x2c6)],_0x4ff147(0x27c),{'text':_0x1375bb,'user':_0x54233e[_0x4ff147(0x1c0)]}),_0x410f13++),_0x54233e[_0x4ff147(0x1fb)]&&_0x54233e['notifyPushoverInstance']&&(await this[_0x4ff147(0x28f)](_0x54233e[_0x4ff147(0x21e)],_0x4ff147(0x27c),{'message':_0x1375bb,'title':'Alert','priority':0x1,'device':_0x54233e[_0x4ff147(0x177)]}),_0x410f13++),_0x54233e[_0x4ff147(0x196)]&&_0x54233e[_0x4ff147(0x30a)]&&(await this[_0x4ff147(0x28f)](_0x54233e[_0x4ff147(0x30a)],_0x4ff147(0x27c),{'text':_0x1375bb,'to':_0x54233e[_0x4ff147(0x292)]}),_0x410f13++),_0x54233e[_0x4ff147(0x1bf)]&&_0x54233e[_0x4ff147(0x249)]&&(await this[_0x4ff147(0x28f)](_0x54233e['notifyWhatsappInstance'],_0x4ff147(0x27c),{'text':_0x1375bb,'phone':_0x54233e[_0x4ff147(0x1dc)]}),_0x410f13++),_0x54233e['notifySignalEnabled']&&_0x54233e[_0x4ff147(0x181)]&&(await this[_0x4ff147(0x28f)](_0x54233e[_0x4ff147(0x181)],'send',{'text':_0x1375bb,'phone':_0x54233e['notifySignalRecipient']}),_0x410f13++),_0x410f13;}async[a0_0x516068(0x1a5)](_0x1c1fff){const _0x1faa56=a0_0x516068;this['feedbackHistory']['unshift'](_0x1c1fff);if(this['feedbackHistory'][_0x1faa56(0x1d9)]>FEEDBACK_MAX_SIZE)this[_0x1faa56(0x2d9)][_0x1faa56(0x25f)]();await this[_0x1faa56(0x20b)](_0x1faa56(0x225),{'val':JSON[_0x1faa56(0x2ac)](this[_0x1faa56(0x2d9)]),'ack':!![]}),this[_0x1faa56(0x20d)][_0x1faa56(0x29b)](_0x1faa56(0x2f6)+_0x1c1fff[_0x1faa56(0x230)]+_0x1faa56(0x277)+_0x1c1fff[_0x1faa56(0x2f0)]);}[a0_0x516068(0x2e5)](_0x27fabf){const _0x3b73b4=a0_0x516068;if(this[_0x3b73b4(0x305)])clearInterval(this[_0x3b73b4(0x305)]);if(this[_0x3b73b4(0x1c6)])clearInterval(this[_0x3b73b4(0x1c6)]);if(this[_0x3b73b4(0x2b8)])this['ltmJob'][_0x3b73b4(0x218)]();if(this[_0x3b73b4(0x2a6)])this[_0x3b73b4(0x2a6)][_0x3b73b4(0x218)]();_0x27fabf();}async[a0_0x516068(0x2fe)](_0x419c15){const _0x4c98a7=a0_0x516068;if(typeof _0x419c15===_0x4c98a7(0x299)&&_0x419c15['message']){if(_0x419c15[_0x4c98a7(0x1d2)]===_0x4c98a7(0x22f)){if(!_0x419c15['message'][_0x4c98a7(0x1c3)])return this['sendTo'](_0x419c15[_0x4c98a7(0x301)],_0x419c15[_0x4c98a7(0x1d2)],{'success':![],'message':_0x4c98a7(0x176)},_0x419c15['callback']);try{const _0x499127=new GoogleGenerativeAI(_0x419c15[_0x4c98a7(0x2d0)][_0x4c98a7(0x1c3)])['getGenerativeModel']({'model':_0x4c98a7(0x210)});await _0x499127[_0x4c98a7(0x22d)](_0x4c98a7(0x2e6)),this['sendTo'](_0x419c15[_0x4c98a7(0x301)],_0x419c15[_0x4c98a7(0x1d2)],{'success':!![],'message':_0x4c98a7(0x228)},_0x419c15['callback']);}catch(_0x1680ab){this['sendTo'](_0x419c15[_0x4c98a7(0x301)],_0x419c15[_0x4c98a7(0x1d2)],{'success':![],'message':_0x1680ab['message']},_0x419c15['callback']);}}else{if(_0x419c15[_0x4c98a7(0x1d2)]==='testNotification'){const _0x59cf3b=await this[_0x4c98a7(0x1c9)](_0x4c98a7(0x1fd),!![]);this[_0x4c98a7(0x2e8)](_0x419c15[_0x4c98a7(0x301)],_0x419c15[_0x4c98a7(0x1d2)],{'success':_0x59cf3b>0x0,'message':_0x59cf3b+_0x4c98a7(0x1b5)},_0x419c15[_0x4c98a7(0x1ae)]);}else{if(_0x419c15['command']===_0x4c98a7(0x21f)){if(!this[_0x4c98a7(0x1ec)])return this['sendTo'](_0x419c15[_0x4c98a7(0x301)],_0x419c15[_0x4c98a7(0x1d2)],{'success':![],'isPro':![]},_0x419c15[_0x4c98a7(0x1ae)]);let _0x5e281f={'status':_0x4c98a7(0x2da),'details':'','lastCheck':0x0};try{_0x5e281f['status']=(await this[_0x4c98a7(0x1dd)](LTM_DP_DRIFT_STATUS))[_0x4c98a7(0x246)],_0x5e281f[_0x4c98a7(0x1b3)]=(await this[_0x4c98a7(0x1dd)](LTM_DP_DRIFT_DETAILS))['val'],_0x5e281f['lastCheck']=(await this[_0x4c98a7(0x1dd)](LTM_DP_DRIFT_LAST_CHECK))[_0x4c98a7(0x246)];}catch(_0x1fa5dc){}this['sendTo'](_0x419c15[_0x4c98a7(0x301)],_0x419c15[_0x4c98a7(0x1d2)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x4c98a7(0x313)],'driftAnalysis':_0x5e281f,'analysisHistory':this[_0x4c98a7(0x1e9)]},_0x419c15[_0x4c98a7(0x1ae)]);}else{if(_0x419c15['command']===_0x4c98a7(0x281)){const _0x3c1199=await this[_0x4c98a7(0x1aa)](_0x4c98a7(0x216),_0x4c98a7(0x1a2)),_0x4f72ee=[];if(_0x3c1199)for(const _0x30e47f in _0x3c1199){const _0x43bc5e=_0x3c1199[_0x30e47f],_0x2f9181=(_0x43bc5e[_0x4c98a7(0x1c8)]&&typeof _0x43bc5e['common']['name']==='object'?_0x43bc5e[_0x4c98a7(0x1c8)]['name']['de']:_0x43bc5e[_0x4c98a7(0x1c8)][_0x4c98a7(0x2d8)])||_0x43bc5e['common'][_0x4c98a7(0x2d8)];_0x4f72ee[_0x4c98a7(0x31a)]({'id':_0x30e47f,'name':_0x2f9181});}this[_0x4c98a7(0x2e8)](_0x419c15['from'],_0x419c15['command'],{'success':!![],'enums':_0x4f72ee},_0x419c15[_0x4c98a7(0x1ae)]);}else{if(_0x419c15[_0x4c98a7(0x1d2)]==='scanDevices'){this['log'][_0x4c98a7(0x29b)](_0x4c98a7(0x271));const _0x443326=_0x419c15[_0x4c98a7(0x2d0)]||{};try{const _0x2dc630=await this['scanForDevices'](_0x443326);this[_0x4c98a7(0x2e8)](_0x419c15[_0x4c98a7(0x301)],_0x419c15[_0x4c98a7(0x1d2)],{'success':!![],'devices':_0x2dc630},_0x419c15[_0x4c98a7(0x1ae)]);}catch(_0x4d0526){this[_0x4c98a7(0x2e8)](_0x419c15[_0x4c98a7(0x301)],_0x419c15[_0x4c98a7(0x1d2)],{'success':![],'error':_0x4d0526[_0x4c98a7(0x2d0)]},_0x419c15['callback']);}}else{if(_0x419c15[_0x4c98a7(0x1d2)]===_0x4c98a7(0x212)){const {historyId:_0x2586ac,rating:_0x578cd5,comment:_0xb9bec0,alertReason:_0x3edc1e}=_0x419c15[_0x4c98a7(0x2d0)];_0x2586ac&&_0x578cd5?(await this[_0x4c98a7(0x1a5)]({'timestamp':Date[_0x4c98a7(0x188)](),'historyId':_0x2586ac,'rating':_0x578cd5,'comment':_0xb9bec0,'alertReason':_0x3edc1e}),this[_0x4c98a7(0x2e8)](_0x419c15['from'],_0x419c15[_0x4c98a7(0x1d2)],{'success':!![]},_0x419c15[_0x4c98a7(0x1ae)])):this[_0x4c98a7(0x2e8)](_0x419c15['from'],_0x419c15[_0x4c98a7(0x1d2)],{'success':![],'error':_0x4c98a7(0x2bc)},_0x419c15[_0x4c98a7(0x1ae)]);}}}}}}}}}if(require['main']!==module)module[a0_0x516068(0x17f)]=_0x54a18d=>new CogniLiving(_0x54a18d);else new CogniLiving();