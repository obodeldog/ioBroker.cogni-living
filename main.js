const a0_0x20ed52=a0_0x28e7;(function(_0x43c86f,_0x2137c4){const _0x190bbc=a0_0x28e7,_0x43d046=_0x43c86f();while(!![]){try{const _0x3f785a=parseInt(_0x190bbc(0x297))/0x1+-parseInt(_0x190bbc(0x348))/0x2+parseInt(_0x190bbc(0x315))/0x3*(-parseInt(_0x190bbc(0x2d2))/0x4)+parseInt(_0x190bbc(0x343))/0x5*(parseInt(_0x190bbc(0x257))/0x6)+-parseInt(_0x190bbc(0x296))/0x7*(-parseInt(_0x190bbc(0x2f8))/0x8)+-parseInt(_0x190bbc(0x314))/0x9*(-parseInt(_0x190bbc(0x2c8))/0xa)+-parseInt(_0x190bbc(0x272))/0xb;if(_0x3f785a===_0x2137c4)break;else _0x43d046['push'](_0x43d046['shift']());}catch(_0x3a04f7){_0x43d046['push'](_0x43d046['shift']());}}}(a0_0x3a55,0x34800));const a0_0x123e79=(function(){let _0x371338=!![];return function(_0x10df91,_0x296cd1){const _0x752749=_0x371338?function(){const _0x51ea68=a0_0x28e7;if(_0x296cd1){const _0x529192=_0x296cd1[_0x51ea68(0x1fd)](_0x10df91,arguments);return _0x296cd1=null,_0x529192;}}:function(){};return _0x371338=![],_0x752749;};}()),a0_0x5c1148=a0_0x123e79(this,function(){const _0x5191ec=a0_0x28e7;return a0_0x5c1148[_0x5191ec(0x33f)]()[_0x5191ec(0x31e)]('(((.+)+)+)+$')[_0x5191ec(0x33f)]()[_0x5191ec(0x2f2)](a0_0x5c1148)[_0x5191ec(0x31e)](_0x5191ec(0x2cf));});a0_0x5c1148();'use strict';const utils=require(a0_0x20ed52(0x290)),{GoogleGenerativeAI}=require(a0_0x20ed52(0x2ed)),{spawn}=require(a0_0x20ed52(0x29a)),path=require(a0_0x20ed52(0x30d)),fs=require('fs'),installer=require('./lib/installer'),scanner=require('./lib/scanner'),schedulers=require(a0_0x20ed52(0x2e8)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x20ed52(0x216),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x20ed52(0x20c),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x20ed52(0x214),LTM_DP_TRIGGER_DIGEST=a0_0x20ed52(0x276),LTM_DP_BASELINE_STATUS='LTM.baselineStatus',LTM_DP_DRIFT_CHANNEL=a0_0x20ed52(0x1f7),LTM_DP_DRIFT_STATUS=a0_0x20ed52(0x2d4),LTM_DP_DRIFT_DETAILS=a0_0x20ed52(0x350),LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE=a0_0x20ed52(0x367),SYSTEM_MODES={'NORMAL':a0_0x20ed52(0x2bd),'VACATION':a0_0x20ed52(0x359),'PARTY':'party','GUEST':a0_0x20ed52(0x355)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x20ed52(0x2ef)],SYSTEM_MODES['GUEST']],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0x20ed52(0x246),'family':a0_0x20ed52(0x338),'single_comfort':a0_0x20ed52(0x30a),'security':a0_0x20ed52(0x212)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x38552b){const _0x59cbcb=a0_0x20ed52;try{const _0x1ef1a6=[_0x59cbcb(0x2cb),_0x59cbcb(0x253)];for(const _0x539ae7 of _0x1ef1a6){try{const _0x370c0f=await _0x38552b['getObjectAsync'](_0x539ae7);if(_0x370c0f)await _0x38552b[_0x59cbcb(0x22c)](_0x539ae7);}catch(_0x478352){}}}catch(_0x4a1920){}}async function checkLicense(_0x5e6036){return!![];}async function initHistory(_0x397b09){const _0x409266=a0_0x20ed52;try{const _0x36b913=await _0x397b09['getStateAsync'](_0x409266(0x1e7));_0x36b913&&_0x36b913[_0x409266(0x248)]&&(_0x397b09['eventHistory']=JSON['parse'](_0x36b913[_0x409266(0x248)][_0x409266(0x33f)]()));}catch(_0x3379da){_0x397b09[_0x409266(0x1fb)]=[];}try{const _0x31d921=await _0x397b09[_0x409266(0x27b)](_0x409266(0x22a));if(_0x31d921&&_0x31d921[_0x409266(0x248)])_0x397b09[_0x409266(0x2c7)]=JSON[_0x409266(0x340)](_0x31d921[_0x409266(0x248)][_0x409266(0x33f)]());}catch(_0x588e29){_0x397b09[_0x409266(0x2c7)]=[];}if(_0x397b09[_0x409266(0x1fb)]&&_0x397b09['eventHistory']['length']>0x0){_0x397b09[_0x409266(0x34e)]['info']('Restoring\x20sensor\x20cache...');for(let _0x5a77a7=_0x397b09['eventHistory'][_0x409266(0x333)]-0x1;_0x5a77a7>=0x0;_0x5a77a7--){const _0x47ea75=_0x397b09[_0x409266(0x1fb)][_0x5a77a7];if(_0x47ea75&&_0x47ea75['id']!==undefined&&_0x47ea75[_0x409266(0x369)]!==undefined)_0x397b09['sensorLastValues'][_0x47ea75['id']]=_0x47ea75[_0x409266(0x369)];}}}function a0_0x3a55(){const _0x40185a=['Fokus\x20auf\x20Familienroutinen.','motion','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','timestamp','dependencyInstallInProgress','namespace','useCalendar','toString','parse','Anomaly\x20Detected','analysis.security.topologyMatrix','37375tiPdRN','notifyTelegramInstance','checkAndInstall','analysis.alertReason','Regel\x20erkannt:\x20','389796DEUuNG','âš ï¸\x20SECURITY\x20ALARM:\x20','common','setObjectNotExistsAsync','message','split','log','ltmJob','LTM.driftAnalysis.driftDetails','text.alarm','onMessage','analysis.training','analysis.triggerBriefing','guest','Trend\x20Value','toLowerCase','analysis.health.isAnomaly','vacation','name','AI\x20Training','includes','payload','HEALTH_TRAIN_RESULT','analysis.health.gaitSpeed','callback','livingContext','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','ANALYZE_GAIT','minDaysForBaseline','analysis.activitySummary','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','system.mode','kill','value','TRAIN_SECURITY','ANALYZE_SEQUENCE','logDuplicates','Adapter','type','Raw\x20Log','analysis.isAlert','bewegung','Topology\x20Matrix','GAIT_RESULT','lastAlertState','Kein\x20API\x20Key!','baselineDrift','is_anomaly','floor','object','exports','getDate','TRAIN_COMFORT','service.py','.\x20SYSTEM_MODE:\x20','events.history','rule','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','insulation','text','from','.\x20EVENTS:\x20','HEALTH_RESULT','COMFORT_RESULT','BUILD_TOPOLOGY','tÃ¼r','some','summary','Gemini\x20AI\x20initialized.','setupBriefingScheduler','triggerBriefing','LTM.driftAnalysis','system','find','enum','eventHistory','Insulation\x20Score','apply','Alert\x20Reason','rating','subscribeForeignStatesAsync','enum.functions.*','cogni-living\x20adapter\x20starting\x20(v','analysis.automation.patternDetected','ENERGY_PREDICT_RESULT','geminiApiKey','.forecast.current.state','Anomaly\x20Score','number','Energy\x20Intelligence','Skipped\x20(No\x20AI\x20or\x20Data)','unknown','LTM.rawEventLog','activityLevel','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','reason','fill','join','PRIORITÃ„T:\x20Sicherheit.','LTM.trainingData.sequences','LTM.processingStatus','Activity\x20Summary','models/gemini-flash-latest','filter','exitGraceTimer','Â°C,\x20','Trigger\x20Briefing','Pattern\x20Detected','response','OK:\x20','\x20->\x20','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','success','system.config','systemConfig','ltmStbWindowDays','setForeignStateAsync','Temperature\x20Forecast','calendarInstance','system.presenceWho','Detected\x20Patterns','location','analysis.analysisHistory','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','delObjectAsync','dismissAutomation','devices','heizung','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','channel','[PYTHON]\x20','getGenerativeModel','geminiModel','.forecast.current.temp','Alert\x20Status','forEach',')\x20-\x20SAFE\x20BOOT','startsWith','confidence','config','pop','shift','analysis.energy.forecast','Train\x20Health','automation.triggerAction','LTM.trainingData.thermodynamics','ready','analysis.training.status','diagnosis','unshift','PRIORITÃ„T:\x20Gesundheit/AAL.','analysis.automation.autoApply','val','PYTHON_EXE','triggerDailyDigest','Train\x20Security','Train\x20Comfort','getCalendarNames','stateChange','values','driftAnalysisTimer','\x20=\x20','presenceDevices','events.history_debug_00','date','setupModeResetScheduler','System','198LZRhHW','ANOMALY','command','cancel','Training\x20Status','analysis.security.lastScore','city','analysis.health.trendValue','WiFi\x20Presence\x20detected.','Health\x20Analysis','json','extendObjectAsync','presence','analysis.training.triggerSecurity','.\x20ANWESEND:\x20','.NextHours.Location_1.Day_1.current.temp_value','contact','toISOString','getFullYear','Digest','analysis.automation.description','ENERGY_TRAIN_RESULT','pythonProcess','getMinutes','openweathermap','klima','substring','277992RGnYQU','toLocaleTimeString','User\x20dismissed\x20automation\x20proposal.','communicate.request','LTM.triggerDailyDigest','map','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','Aktiv\x20(','notifyTelegramEnabled','getStateAsync','slice','automationProposal','NORMAL','inactivityThresholdHours','analysis.health.lastCheck','simulateButler','VACATION','exitTimer','licenseKey','Target\x20Value','temperature','stdout','Activity-Level','dimmer','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','Training\x20Error:\x20','Auto\x20Apply','unload','analysisTimer','outdoorSensorId','@iobroker/adapter-core','[RESULT]','getLtmData','\x20new\x20patterns.','switch','boolean','49PRwdGd','221938oqIEDb','schalter','analysis.security.lastCheck','child_process','heating','info','Error\x20launching\x20Python:\x20','debug','error','Today\x20Vector\x20(15m)','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','weatherunderground','longitude','Unknown','dailyDigests','onReady','onUnload','Kalender\x20deaktiviert.','getTime','light','status','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','apiKey','kontakt','threshold','targetValue','analysis.health.todayVector','analysis.energy','toFixed','existsSync','SECURITY_RESULT','analysis.automation.targetValue','generateContent','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','licht','state','ðŸ“\x20Feedback\x20received:\x20','accuweather','normal','analysis.training.triggerComfort','[LOG]','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','isProVersion','replace','close','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','events.lastEvent','ack','analysisHistory','40whxHRn','analysis.training.triggerHealth','setHours','analysis.history_debug_00','application/json','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','setStateAsync','(((.+)+)+)+$','\x0aSTB:\x20','onStateChange','225116vAPEpl','indicator','LTM.driftAnalysis.baselineDrift','testContext','detected','getForeignStateAsync','setState','now','Last\x20Check','LTM','analysis.trigger','Daily\x20Digests','setupLtmScheduler','push','targetId','Success','analysis.health','autoApply','genAI','window','getMonth','driftDetails','./lib/scheduler','briefingJob','Last\x20raw\x20event','âœ…\x20HEALTH\x20TRAINED.','.\x20WETTER:\x20','@google/generative-ai','ANALYZE_HEALTH','PARTY','currentSystemMode','Who\x20is\x20present?','constructor','PONG','main','bind','description','Topology\x20Error:\x20','213784YLEroH','button','getForeignObjectAsync','python3','N/A\x20(Learning)','ANALYZE_TREND','modeResetJob','analysis.security.currentThreshold','rawEventLog','analysis.training.triggerTopology','setupDriftAnalysisScheduler','ðŸ\x20Python\x20Pong','isPresent','useWeather','stringify','isAlert','Deaktiviert\x20(Pro-Feature)','string','Fokus\x20auf\x20Komfort.','isGracePeriodActive','Err:\x20','path','generic','sendTo','sensorLastValues','Keine\x20Termine.','ltmLtbWindowDays','weatherInstance','10467eHFmHG','12tphvMD','analysis.automation.detectedPatterns','isEmergency','online','PREDICT_ENERGY','getForeignObjectsAsync','Trigger\x20Analysis','change_percent','Gait\x20Speed\x20Trend','search','analysis.training.triggerEnergy','system.isPresent','stdin','python_service','Event\x20History','Gemini\x20Init\x20Error:\x20','N/A','analysis.energy.insulationScore','analysis.automation.targetId','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','analysis.energy.heatingScore','trim','Keine\x20Details.','splice','alertReason','getHours','instance','Trigger\x20Action','Briefing\x20Error:\x20','round','length','subscribeStates','Heating\x20Score','door','telegram'];a0_0x3a55=function(){return _0x40185a;};return a0_0x3a55();}async function initSystemConfig(_0x944f4){const _0x50af23=a0_0x20ed52;try{const _0x45982=await _0x944f4[_0x50af23(0x2fa)](_0x50af23(0x221));if(_0x45982&&_0x45982[_0x50af23(0x34a)])_0x944f4[_0x50af23(0x222)]={'latitude':_0x45982[_0x50af23(0x34a)]['latitude']||0x0,'longitude':_0x45982[_0x50af23(0x34a)][_0x50af23(0x2a3)]||0x0,'city':_0x45982[_0x50af23(0x34a)][_0x50af23(0x25d)]||''};}catch(_0x587c4f){}}async function createAllObjects(_0xc7013){const _0x4522ee=a0_0x20ed52;await _0xc7013[_0x4522ee(0x262)](_0x4522ee(0x1f8),{'type':'channel','common':{'name':_0x4522ee(0x256)},'native':{}}),await _0xc7013[_0x4522ee(0x262)](SYSTEM_DP_MODE,{'type':_0x4522ee(0x2ba),'common':{'name':'System\x20Mode','type':_0x4522ee(0x309),'role':_0x4522ee(0x2ba),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x4522ee(0x27e)]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x227),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x2f1),'type':'string','role':_0x4522ee(0x1eb),'read':!![],'write':![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x2c5),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x2ea),'type':'string','role':_0x4522ee(0x261),'read':!![],'write':![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x1e7),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x323),'type':_0x4522ee(0x309),'role':_0x4522ee(0x261),'read':!![],'write':![]},'native':{}}),await _0xc7013['extendObjectAsync'](_0x4522ee(0x353),{'type':_0x4522ee(0x231),'common':{'name':_0x4522ee(0x35b)},'native':{}}),await _0xc7013['setObjectNotExistsAsync'](_0x4522ee(0x264),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x24b),'type':_0x4522ee(0x295),'role':'button','read':!![],'write':!![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x2c9),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x23f),'type':_0x4522ee(0x295),'role':_0x4522ee(0x2f9),'read':!![],'write':!![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)]('analysis.training.triggerEnergy',{'type':_0x4522ee(0x2ba),'common':{'name':'Train\x20Energy','type':_0x4522ee(0x295),'role':_0x4522ee(0x2f9),'read':!![],'write':!![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x2be),{'type':'state','common':{'name':_0x4522ee(0x24c),'type':_0x4522ee(0x295),'role':'button','read':!![],'write':!![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x301),{'type':_0x4522ee(0x2ba),'common':{'name':'Build\x20Topology','type':_0x4522ee(0x295),'role':'button','read':!![],'write':!![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x243),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x25b),'type':_0x4522ee(0x309),'role':'text','read':!![],'write':![]},'native':{}}),await _0xc7013['extendObjectAsync']('analysis.security',{'type':_0x4522ee(0x231),'common':{'name':'Security\x20Monitor'},'native':{}}),await _0xc7013[_0x4522ee(0x34b)]('analysis.security.lastScore',{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x207),'type':'number','role':'value','read':!![],'write':![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x2ff),{'type':_0x4522ee(0x2ba),'common':{'name':'Current\x20Threshold','type':_0x4522ee(0x208),'role':_0x4522ee(0x369),'read':!![],'write':![],'def':0.05},'native':{}}),await _0xc7013[_0x4522ee(0x34b)]('analysis.security.lastCheck',{'type':'state','common':{'name':'Last\x20Check','type':_0x4522ee(0x309),'role':_0x4522ee(0x254),'read':!![],'write':![]},'native':{}}),await _0xc7013['setObjectNotExistsAsync']('analysis.security.topologyMatrix',{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x372),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0xc7013[_0x4522ee(0x262)](_0x4522ee(0x2e2),{'type':'channel','common':{'name':_0x4522ee(0x260)},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x280),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x2da),'type':_0x4522ee(0x309),'role':'date','read':!![],'write':![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)]('analysis.health.isAnomaly',{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x341),'type':'boolean','role':'indicator','read':!![],'write':![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)]('analysis.health.trendDiagnosis',{'type':_0x4522ee(0x2ba),'common':{'name':'Trend','type':_0x4522ee(0x309),'role':_0x4522ee(0x1eb),'read':!![],'write':![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x25e),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x356),'type':_0x4522ee(0x208),'role':_0x4522ee(0x369),'read':!![],'write':![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x2b1),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x2a0),'type':_0x4522ee(0x309),'role':_0x4522ee(0x261),'read':!![],'write':![]},'native':{}}),await _0xc7013['setObjectNotExistsAsync'](_0x4522ee(0x35f),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x31d),'type':_0x4522ee(0x208),'role':_0x4522ee(0x369),'read':!![],'write':![]},'native':{}}),await _0xc7013[_0x4522ee(0x262)](_0x4522ee(0x2b2),{'type':_0x4522ee(0x231),'common':{'name':_0x4522ee(0x209)},'native':{}}),await _0xc7013['setObjectNotExistsAsync'](_0x4522ee(0x326),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x1fc),'type':_0x4522ee(0x309),'role':_0x4522ee(0x1eb),'read':!![],'write':![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x329),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x335),'type':_0x4522ee(0x309),'role':_0x4522ee(0x1eb),'read':!![],'write':![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x23e),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x225),'type':_0x4522ee(0x309),'role':_0x4522ee(0x261),'read':!![],'write':![]},'native':{}}),await _0xc7013[_0x4522ee(0x262)](_0x4522ee(0x2db),{'type':_0x4522ee(0x231),'common':{'name':'LTM'},'native':{}}),await _0xc7013[_0x4522ee(0x262)](LTM_DP_RAW_LOG,{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x36f),'type':_0x4522ee(0x309),'role':_0x4522ee(0x261),'read':!![],'write':![]},'native':{}}),await _0xc7013[_0x4522ee(0x262)](LTM_DP_DAILY_DIGESTS,{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x2dd),'type':_0x4522ee(0x309),'role':_0x4522ee(0x261),'read':!![],'write':![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x213),{'type':_0x4522ee(0x2ba),'common':{'name':'Sequences','type':_0x4522ee(0x309),'role':_0x4522ee(0x261),'read':!![],'write':![]},'native':{}}),await _0xc7013['setObjectNotExistsAsync'](_0x4522ee(0x241),{'type':_0x4522ee(0x2ba),'common':{'name':'Thermodynamics','type':_0x4522ee(0x309),'role':_0x4522ee(0x261),'read':!![],'write':![]},'native':{}}),await _0xc7013['setObjectNotExistsAsync'](_0x4522ee(0x2dc),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x31b),'type':_0x4522ee(0x295),'role':'button','read':!![],'write':!![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x354),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x21a),'type':'boolean','role':_0x4522ee(0x2f9),'read':!![],'write':!![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x370),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x236),'type':_0x4522ee(0x295),'role':'indicator.alarm','read':!![],'write':![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x346),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x1fe),'type':_0x4522ee(0x309),'role':_0x4522ee(0x351),'read':!![],'write':![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x365),{'type':'state','common':{'name':_0x4522ee(0x215),'type':_0x4522ee(0x309),'role':_0x4522ee(0x1eb),'read':!![],'write':![]},'native':{}}),await _0xc7013['setObjectNotExistsAsync']('analysis.automation.patternDetected',{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x21b),'type':_0x4522ee(0x295),'role':_0x4522ee(0x2d3),'read':!![],'write':![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x26b),{'type':'state','common':{'name':'Description','type':_0x4522ee(0x309),'role':_0x4522ee(0x1eb),'read':!![],'write':![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x316),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x228),'type':_0x4522ee(0x309),'role':_0x4522ee(0x261),'read':!![],'write':![]},'native':{}}),await _0xc7013['setObjectNotExistsAsync']('analysis.automation.targetId',{'type':_0x4522ee(0x2ba),'common':{'name':'Target\x20ID','type':_0x4522ee(0x309),'role':_0x4522ee(0x1eb),'read':!![],'write':![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)](_0x4522ee(0x2b6),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x285),'type':_0x4522ee(0x309),'role':_0x4522ee(0x1eb),'read':!![],'write':![]},'native':{}}),await _0xc7013['setObjectNotExistsAsync'](_0x4522ee(0x247),{'type':_0x4522ee(0x2ba),'common':{'name':_0x4522ee(0x28c),'type':_0x4522ee(0x295),'role':'switch','read':!![],'write':!![]},'native':{}}),await _0xc7013[_0x4522ee(0x34b)]('analysis.automation.triggerAction',{'type':'state','common':{'name':_0x4522ee(0x330),'type':'boolean','role':_0x4522ee(0x2f9),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x1e876d){const _0x2d447a=a0_0x20ed52;try{const _0x34abe0=await _0x1e876d['getStateAsync'](SYSTEM_DP_MODE);_0x34abe0&&_0x34abe0[_0x2d447a(0x248)]&&Object[_0x2d447a(0x24f)](SYSTEM_MODES)[_0x2d447a(0x35c)](_0x34abe0[_0x2d447a(0x248)])?_0x1e876d['currentSystemMode']=_0x34abe0[_0x2d447a(0x248)]:(_0x1e876d[_0x2d447a(0x2f0)]=SYSTEM_MODES['NORMAL'],await _0x1e876d['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x5f1d35){_0x1e876d[_0x2d447a(0x2f0)]=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0x2d29cc){const _0x1774b3=a0_0x20ed52;try{const _0x543cb4=await _0x2d29cc[_0x1774b3(0x27b)](LTM_DP_RAW_LOG);if(_0x543cb4&&_0x543cb4[_0x1774b3(0x248)])_0x2d29cc['rawEventLog']=JSON[_0x1774b3(0x340)](_0x543cb4[_0x1774b3(0x248)]);}catch(_0x43c5c9){_0x2d29cc[_0x1774b3(0x300)]=[];}}async function saveRawEventLog(_0x5886a2){const _0x393ac6=a0_0x20ed52;if(_0x5886a2[_0x393ac6(0x300)][_0x393ac6(0x333)]>RAW_LOG_MAX_SIZE)_0x5886a2['rawEventLog'][_0x393ac6(0x32c)](0x0,_0x5886a2['rawEventLog'][_0x393ac6(0x333)]-RAW_LOG_MAX_SIZE);await _0x5886a2[_0x393ac6(0x2ce)](LTM_DP_RAW_LOG,{'val':JSON[_0x393ac6(0x306)](_0x5886a2[_0x393ac6(0x300)]),'ack':!![]});}async function loadDailyDigests(_0xdd7272){const _0x415142=a0_0x20ed52;try{const _0x4eea41=await _0xdd7272['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x4eea41&&_0x4eea41['val'])_0xdd7272['dailyDigests']=JSON['parse'](_0x4eea41[_0x415142(0x248)]);}catch(_0x1496fa){_0xdd7272[_0x415142(0x2a5)]=[];}await updateBaselineStatus(_0xdd7272);}async function saveDailyDigests(_0x3b3005,_0x4ff5ac=!![]){const _0x163ada=a0_0x20ed52,_0x5cdf68=_0x3b3005['config']['ltmLtbWindowDays']||0x3c;_0x3b3005[_0x163ada(0x2a5)][_0x163ada(0x333)]>_0x5cdf68&&_0x3b3005[_0x163ada(0x2a5)]['splice'](0x0,_0x3b3005[_0x163ada(0x2a5)][_0x163ada(0x333)]-_0x5cdf68);await _0x3b3005[_0x163ada(0x2ce)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x163ada(0x306)](_0x3b3005['dailyDigests']),'ack':!![]});if(_0x4ff5ac)await updateBaselineStatus(_0x3b3005);}async function updateAnalysisHistory(_0x1f519f,_0x580856){const _0x3735b0=a0_0x20ed52;_0x1f519f['analysisHistory'][_0x3735b0(0x245)](_0x580856);if(_0x1f519f[_0x3735b0(0x2c7)]['length']>HISTORY_MAX_SIZE)_0x1f519f[_0x3735b0(0x2c7)][_0x3735b0(0x23c)]();await _0x1f519f[_0x3735b0(0x2ce)]('analysis.analysisHistory',{'val':JSON['stringify'](_0x1f519f[_0x3735b0(0x2c7)]),'ack':!![]});}async function updateBaselineStatus(_0x12d447){const _0x1035d1=a0_0x20ed52;if(!_0x12d447[_0x1035d1(0x2c1)]){await _0x12d447[_0x1035d1(0x2ce)](LTM_DP_BASELINE_STATUS,{'val':_0x1035d1(0x308),'ack':!![]});return;}const _0x49c3fd=_0x12d447[_0x1035d1(0x2a5)][_0x1035d1(0x333)]>=(_0x12d447[_0x1035d1(0x23b)][_0x1035d1(0x364)]||0x7)?_0x1035d1(0x279)+_0x12d447['dailyDigests'][_0x1035d1(0x333)]+'\x20Tage)':'Lernphase\x20('+_0x12d447[_0x1035d1(0x2a5)][_0x1035d1(0x333)]+'/'+(_0x12d447[_0x1035d1(0x23b)][_0x1035d1(0x364)]||0x7)+')';await _0x12d447[_0x1035d1(0x2ce)](LTM_DP_BASELINE_STATUS,{'val':_0x49c3fd,'ack':!![]});}function a0_0x28e7(_0x50f0b4,_0x580f52){const _0x5a159e=a0_0x3a55();return a0_0x28e7=function(_0x5c1148,_0x123e79){_0x5c1148=_0x5c1148-0x1db;let _0x3a5509=_0x5a159e[_0x5c1148];return _0x3a5509;},a0_0x28e7(_0x50f0b4,_0x580f52);}async function initSensorSubscriptions(_0x5d5f22){const _0x58c48c=a0_0x20ed52,_0xdd105a=_0x5d5f22[_0x58c48c(0x23b)][_0x58c48c(0x22e)];if(_0xdd105a)for(const _0x11b542 of _0xdd105a){await _0x5d5f22['subscribeForeignStatesAsync'](_0x11b542['id']);}}async function initPresenceSubscriptions(_0x36af21){const _0x3cd491=a0_0x20ed52,_0x2a4f7d=_0x36af21[_0x3cd491(0x23b)][_0x3cd491(0x252)];if(_0x2a4f7d)for(const _0x167678 of _0x2a4f7d){await _0x36af21['subscribeForeignStatesAsync'](_0x167678);}}async function setupTelegramListener(_0x4d0bd9){const _0xcc6515=a0_0x20ed52,_0x5ba3b2=_0x4d0bd9[_0xcc6515(0x23b)][_0xcc6515(0x344)];if(_0x4d0bd9['config'][_0xcc6515(0x27a)]&&_0x5ba3b2)await _0x4d0bd9[_0xcc6515(0x200)](_0x5ba3b2+'.communicate.request');}async function checkWifiPresence(_0x206d9b){const _0x1b1fc4=a0_0x20ed52;try{const _0x190475=_0x206d9b[_0x1b1fc4(0x23b)][_0x1b1fc4(0x252)]||[];let _0x27d804=![];const _0x4bc2df=[];for(const _0xe3052b of _0x190475){try{const _0x283a34=await _0x206d9b[_0x1b1fc4(0x2d7)](_0xe3052b);_0x283a34&&(_0x283a34[_0x1b1fc4(0x248)]===!![]||_0x283a34[_0x1b1fc4(0x248)]===_0x1b1fc4(0x318)||_0x283a34['val']===0x1)&&(_0x27d804=!![],_0x4bc2df[_0x1b1fc4(0x2df)](_0xe3052b));}catch(_0x3ce794){}}return await _0x206d9b[_0x1b1fc4(0x2ce)](_0x1b1fc4(0x227),{'val':_0x4bc2df[_0x1b1fc4(0x211)](',\x20'),'ack':!![]}),_0x27d804&&(_0x206d9b[_0x1b1fc4(0x283)]&&(_0x206d9b[_0x1b1fc4(0x34e)][_0x1b1fc4(0x29c)](_0x1b1fc4(0x25f)),abortExitTimer(_0x206d9b)),!_0x206d9b[_0x1b1fc4(0x304)]&&_0x206d9b[_0x1b1fc4(0x2f0)]===SYSTEM_MODES['NORMAL']&&await setPresence(_0x206d9b,!![])),_0x27d804;}catch(_0x271e0f){return![];}}function startExitTimer(_0x52866a){const _0x138203=a0_0x20ed52;abortExitTimer(_0x52866a),_0x52866a['isGracePeriodActive']=!![],_0x52866a[_0x138203(0x218)]=setTimeout(()=>{const _0x2c6b2f=_0x138203;_0x52866a[_0x2c6b2f(0x30b)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x52866a[_0x138203(0x283)]=setTimeout(()=>{const _0x341d9a=_0x138203;setPresence(_0x52866a,![]),_0x52866a[_0x341d9a(0x283)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x5d6cbd){const _0xe93af3=a0_0x20ed52;if(_0x5d6cbd[_0xe93af3(0x283)])clearTimeout(_0x5d6cbd[_0xe93af3(0x283)]);if(_0x5d6cbd['exitGraceTimer'])clearTimeout(_0x5d6cbd['exitGraceTimer']);_0x5d6cbd[_0xe93af3(0x283)]=null,_0x5d6cbd[_0xe93af3(0x218)]=null,_0x5d6cbd[_0xe93af3(0x30b)]=![];}async function setPresence(_0x581875,_0x2d1669){const _0x4006f5=a0_0x20ed52;if(_0x581875[_0x4006f5(0x304)]===_0x2d1669)return;_0x581875[_0x4006f5(0x304)]=_0x2d1669,await _0x581875['setStateAsync'](_0x4006f5(0x320),{'val':_0x2d1669,'ack':!![]});}async function executeAutomationAction(_0x441c05){const _0xbafa6b=a0_0x20ed52;try{const _0x403c75=await _0x441c05[_0xbafa6b(0x27b)](_0xbafa6b(0x327)),_0x2980b8=await _0x441c05[_0xbafa6b(0x27b)](_0xbafa6b(0x2b6));if(_0x403c75&&_0x403c75['val']&&_0x2980b8){const _0x538195=_0x403c75['val'];let _0x2e2c6a=_0x2980b8['val'];try{_0x2e2c6a=JSON['parse'](_0x2e2c6a);}catch(_0x3d3a79){}_0x441c05['log'][_0xbafa6b(0x29c)](_0xbafa6b(0x33a)+_0x538195+_0xbafa6b(0x251)+_0x2e2c6a),await _0x441c05[_0xbafa6b(0x224)](_0x538195,_0x2e2c6a);}else _0x441c05['log']['warn'](_0xbafa6b(0x2c0));}catch(_0x26a225){_0x441c05[_0xbafa6b(0x34e)][_0xbafa6b(0x29f)]('BUTLER\x20Execution\x20Error:\x20'+_0x26a225[_0xbafa6b(0x34c)]);}}async function processSensorEvent(_0xc07a35,_0x152e6d,_0x5926ba,_0x28d912){const _0x28f952=a0_0x20ed52;if(!_0x28d912)return;const _0xe73e1f=_0x5926ba['val'],_0x115273=Date['now'](),_0x1d18cc=_0xc07a35[_0x28f952(0x310)][_0x152e6d];_0xc07a35[_0x28f952(0x310)][_0x152e6d]=_0xe73e1f;if(!_0x28d912[_0x28f952(0x36c)]&&_0x1d18cc!=undefined&&_0x1d18cc==_0xe73e1f)return;const _0x48e98f=(_0x28d912[_0x28f952(0x36e)]||'')[_0x28f952(0x357)](),_0x2bb114=_0x48e98f[_0x28f952(0x35c)](_0x28f952(0x286))||_0x48e98f['includes']('temperatur')||_0x48e98f[_0x28f952(0x35c)](_0x28f952(0x270))||_0x48e98f[_0x28f952(0x35c)](_0x28f952(0x22f));_0xc07a35[_0x28f952(0x2c1)]&&_0x2bb114&&recordThermodynamics(_0xc07a35,_0x152e6d,_0xe73e1f,_0x28d912['location']);const _0x4c893e={'timestamp':_0x115273,'id':_0x152e6d,'name':_0x28d912[_0x28f952(0x35a)],'type':_0x28d912[_0x28f952(0x36e)],'location':_0x28d912[_0x28f952(0x229)],'value':_0xe73e1f};_0xc07a35[_0x28f952(0x1fb)][_0x28f952(0x245)](_0x4c893e);if(_0xc07a35[_0x28f952(0x1fb)][_0x28f952(0x333)]>HISTORY_MAX_SIZE)_0xc07a35[_0x28f952(0x1fb)][_0x28f952(0x23c)]();await _0xc07a35['setStateAsync'](_0x28f952(0x2c5),{'val':JSON[_0x28f952(0x306)](_0x4c893e),'ack':!![]}),await _0xc07a35['setStateAsync'](_0x28f952(0x1e7),{'val':JSON[_0x28f952(0x306)](_0xc07a35[_0x28f952(0x1fb)]),'ack':!![]});_0xc07a35['isProVersion']&&(_0xc07a35['rawEventLog']['push'](_0x4c893e),await saveRawEventLog(_0xc07a35),recordSequence(_0xc07a35,_0x4c893e));if(_0x28d912['isExit']&&_0xe73e1f===!![]){if(_0xc07a35['isPresent']&&!_0xc07a35['isGracePeriodActive'])startExitTimer(_0xc07a35);else{if(!_0xc07a35[_0x28f952(0x304)])setPresence(_0xc07a35,!![]);}}else{if(_0x28d912[_0x28f952(0x36e)]===_0x28f952(0x339)&&_0xe73e1f===!![]){if(_0xc07a35[_0x28f952(0x283)])abortExitTimer(_0xc07a35);if(!_0xc07a35[_0x28f952(0x304)]&&_0xc07a35[_0x28f952(0x2f0)]===SYSTEM_MODES[_0x28f952(0x27e)])setPresence(_0xc07a35,!![]);}}}async function recordThermodynamics(_0x18e93e,_0x492cce,_0x2efcbb,_0x245942){const _0x4d8c49=a0_0x20ed52,_0x1aca64=await getOutsideTemperatureNumeric(_0x18e93e),_0x33f956=await _0x18e93e[_0x4d8c49(0x27b)]('LTM.trainingData.thermodynamics');let _0x41a305=[];if(_0x33f956&&_0x33f956['val'])try{_0x41a305=JSON['parse'](_0x33f956[_0x4d8c49(0x248)]);}catch(_0x2661b6){}_0x41a305[_0x4d8c49(0x2df)]({'ts':Date[_0x4d8c49(0x2d9)](),'room':_0x245942||'Unknown','t_in':_0x2efcbb,'t_out':_0x1aca64});if(_0x41a305['length']>THERMO_LOG_SIZE)_0x41a305['shift']();await _0x18e93e[_0x4d8c49(0x2ce)]('LTM.trainingData.thermodynamics',{'val':JSON[_0x4d8c49(0x306)](_0x41a305),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x29b481){const _0x585c46=a0_0x20ed52;if(_0x29b481['config'][_0x585c46(0x28f)])try{const _0x1b33d2=await _0x29b481[_0x585c46(0x2d7)](_0x29b481['config'][_0x585c46(0x28f)]);if(_0x1b33d2&&_0x1b33d2[_0x585c46(0x248)]!==undefined&&_0x1b33d2['val']!==null)return parseFloat(_0x1b33d2[_0x585c46(0x248)]);}catch(_0x31555d){}const _0x5cf8c5=_0x29b481[_0x585c46(0x23b)]['weatherInstance'];if(!_0x29b481['config'][_0x585c46(0x305)]||!_0x5cf8c5)return null;try{let _0x5614a9='';if(_0x5cf8c5['includes'](_0x585c46(0x2bc)))_0x5614a9=_0x5cf8c5+'.Current.Temperature';else{if(_0x5cf8c5[_0x585c46(0x35c)]('daswetter'))_0x5614a9=_0x5cf8c5+_0x585c46(0x266);else{if(_0x5cf8c5[_0x585c46(0x35c)](_0x585c46(0x26f)))_0x5614a9=_0x5cf8c5+'.forecast.current.temperature';else{if(_0x5cf8c5[_0x585c46(0x35c)](_0x585c46(0x2a2)))_0x5614a9=_0x5cf8c5+_0x585c46(0x235);}}}if(_0x5614a9){const _0x4ec770=await _0x29b481[_0x585c46(0x2d7)](_0x5614a9);if(_0x4ec770&&_0x4ec770[_0x585c46(0x248)]!==undefined&&_0x4ec770['val']!==null)return parseFloat(_0x4ec770[_0x585c46(0x248)]);}}catch(_0x18ccf4){}return null;}async function recordSequence(_0x155946,_0x302077){const _0x5185a6=a0_0x20ed52,_0x1ec565=(_0x302077['type']||'')[_0x5185a6(0x357)](),_0x19cb8c=[_0x5185a6(0x339),_0x5185a6(0x371),'prÃ¤senz',_0x5185a6(0x263),'occupancy',_0x5185a6(0x336),_0x5185a6(0x1f1),_0x5185a6(0x2e5),'fenster',_0x5185a6(0x267),_0x5185a6(0x2ae),_0x5185a6(0x2aa),_0x5185a6(0x2b9),_0x5185a6(0x294),_0x5185a6(0x298),_0x5185a6(0x289),'lampe'];if(!_0x19cb8c[_0x5185a6(0x1f2)](_0x542100=>_0x1ec565[_0x5185a6(0x35c)](_0x542100)))return;if(!_0x302077[_0x5185a6(0x369)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x5185a6(0x2df)]({'loc':_0x302077[_0x5185a6(0x229)]||_0x5185a6(0x2a4),'id':_0x302077['id'],'ts':Date[_0x5185a6(0x2d9)]()}),sequenceTimer=setTimeout(async()=>{const _0x55e1d6=_0x5185a6;if(activeSequence[_0x55e1d6(0x333)]>0x1)await saveCompletedSequence(_0x155946);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x3d4444){const _0x53b0f2=a0_0x20ed52;try{const _0x589bca=await _0x3d4444[_0x53b0f2(0x27b)]('LTM.trainingData.sequences');let _0x5a0c68=[];if(_0x589bca&&_0x589bca['val'])try{_0x5a0c68=JSON[_0x53b0f2(0x340)](_0x589bca[_0x53b0f2(0x248)]);}catch(_0x15d57e){}const _0x475e2e=activeSequence[0x0]['ts'],_0x125fec=activeSequence[_0x53b0f2(0x277)](_0x17f84a=>({'loc':_0x17f84a['loc'],'t_delta':Math[_0x53b0f2(0x332)]((_0x17f84a['ts']-_0x475e2e)/0x3e8)})),_0x201ee3={'timestamp':new Date(_0x475e2e)[_0x53b0f2(0x268)](),'steps':_0x125fec,'duration':Math[_0x53b0f2(0x332)]((activeSequence[activeSequence['length']-0x1]['ts']-_0x475e2e)/0x3e8),'daytime':new Date(_0x475e2e)['getHours']()};_0x5a0c68[_0x53b0f2(0x2df)](_0x201ee3);if(_0x5a0c68[_0x53b0f2(0x333)]>MAX_TRAINING_SET_SIZE)_0x5a0c68[_0x53b0f2(0x23d)]();await _0x3d4444[_0x53b0f2(0x2ce)](_0x53b0f2(0x213),{'val':JSON[_0x53b0f2(0x306)](_0x5a0c68),'ack':!![]}),runSecurityCheck(_0x3d4444,_0x201ee3);}catch(_0x12d25e){_0x3d4444[_0x53b0f2(0x34e)][_0x53b0f2(0x29f)]('[RECORDER]\x20Error:\x20'+_0x12d25e[_0x53b0f2(0x34c)]);}}function runSecurityCheck(_0x53d767,_0x55cffd){const _0x571282=a0_0x20ed52;if(!_0x53d767[_0x571282(0x2c1)])return;sendToPython(_0x53d767,_0x571282(0x36b),{'sequence':_0x55cffd});}async function createDailyDigest(_0x1bc53d){const _0x3de993=a0_0x20ed52;if(!_0x1bc53d[_0x3de993(0x2c1)])return;await _0x1bc53d[_0x3de993(0x2ce)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x1bc53d[_0x3de993(0x234)]||_0x1bc53d[_0x3de993(0x300)][_0x3de993(0x333)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x1bc53d['setStateAsync'](LTM_DP_STATUS,{'val':_0x3de993(0x20a),'ack':!![]});return;}const _0x5251aa=JSON[_0x3de993(0x340)](JSON[_0x3de993(0x306)](_0x1bc53d[_0x3de993(0x300)])),_0x50deaa=_0x5251aa[_0x3de993(0x333)],_0x68c7f6=_0x3de993(0x20e)+JSON[_0x3de993(0x306)](_0x5251aa);try{const _0xf129dd=await _0x1bc53d[_0x3de993(0x234)][_0x3de993(0x2b7)](_0x68c7f6),_0x58c6fe=JSON[_0x3de993(0x340)](_0xf129dd[_0x3de993(0x21c)][_0x3de993(0x1eb)]()['replace'](/```json|```/g,'')[_0x3de993(0x32a)]()),_0x3f529f={'timestamp':new Date()[_0x3de993(0x268)](),'eventCount':_0x50deaa,'summary':_0x58c6fe[_0x3de993(0x1f3)]||_0x3de993(0x26a),'activityLevel':_0x58c6fe[_0x3de993(0x20d)]||_0x3de993(0x2bd),'systemMode':_0x1bc53d[_0x3de993(0x2f0)]};_0x1bc53d[_0x3de993(0x2a5)][_0x3de993(0x2df)](_0x3f529f),await saveDailyDigests(_0x1bc53d),_0x1bc53d[_0x3de993(0x300)]=[],await saveRawEventLog(_0x1bc53d),await _0x1bc53d[_0x3de993(0x2ce)](LTM_DP_STATUS,{'val':_0x3de993(0x2e1),'ack':!![]});if(_0x1bc53d[_0x3de993(0x2c1)])sendToPython(_0x1bc53d,_0x3de993(0x2ee),{'digest':_0x3f529f});}catch(_0x547d2f){_0x1bc53d['log'][_0x3de993(0x29f)](_0x547d2f[_0x3de993(0x34c)]);}}async function runBaselineDriftAnalysis(_0x59a22e){const _0x12b368=a0_0x20ed52;if(!_0x59a22e[_0x12b368(0x2c1)]||!_0x59a22e[_0x12b368(0x234)])return;const _0x5c5d04=_0x59a22e[_0x12b368(0x23b)][_0x12b368(0x223)]||0xe;if(_0x59a22e[_0x12b368(0x2a5)][_0x12b368(0x333)]<_0x5c5d04+0x7){await _0x59a22e[_0x12b368(0x2ce)](LTM_DP_DRIFT_STATUS,{'val':_0x12b368(0x2fc),'ack':!![]});return;}const _0x416276=_0x59a22e[_0x12b368(0x2a5)][_0x12b368(0x27c)](-_0x5c5d04),_0x31291a=_0x59a22e[_0x12b368(0x2a5)]['slice'](0x0,_0x59a22e[_0x12b368(0x2a5)][_0x12b368(0x333)]-_0x5c5d04),_0x3e8f23=_0x12b368(0x22b)+JSON[_0x12b368(0x306)](_0x31291a)+_0x12b368(0x2d0)+JSON[_0x12b368(0x306)](_0x416276);try{const _0x4dcaa9=await _0x59a22e['geminiModel'][_0x12b368(0x2b7)](_0x3e8f23),_0xbb4e73=JSON[_0x12b368(0x340)](_0x4dcaa9['response'][_0x12b368(0x1eb)]()[_0x12b368(0x2c2)](/```json|```/g,'')[_0x12b368(0x32a)]());_0xbb4e73[_0x12b368(0x1de)]&&(await _0x59a22e[_0x12b368(0x2ce)](LTM_DP_DRIFT_STATUS,{'val':_0xbb4e73[_0x12b368(0x1de)],'ack':!![]}),await _0x59a22e['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0xbb4e73[_0x12b368(0x2e7)],'ack':!![]}),await _0x59a22e[_0x12b368(0x2ce)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x12b368(0x2d9)](),'ack':!![]}));}catch(_0x1ecbc1){}}async function sendMorningBriefing(_0x2ae1b1){const _0x97535c=a0_0x20ed52;if(!_0x2ae1b1[_0x97535c(0x234)])return;try{const _0x3c9ffd='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x13ea91=await _0x2ae1b1['geminiModel'][_0x97535c(0x2b7)](_0x3c9ffd),_0x1acd78=_0x13ea91[_0x97535c(0x21c)][_0x97535c(0x1eb)]();sendNotification(_0x2ae1b1,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x1acd78);}catch(_0x1ec26e){_0x2ae1b1['log']['error'](_0x97535c(0x331)+_0x1ec26e[_0x97535c(0x34c)]);}}function stopPythonService(_0x2497c2){const _0x5d974f=a0_0x20ed52;if(_0x2497c2[_0x5d974f(0x26d)]){try{_0x2497c2['pythonProcess'][_0x5d974f(0x368)]();}catch(_0x599590){}_0x2497c2[_0x5d974f(0x26d)]=null;}}function sendToPython(_0x2a8c11,_0x559461,_0x5300bc={}){const _0x476817=a0_0x20ed52;if(!_0x2a8c11['pythonProcess']||!_0x2a8c11[_0x476817(0x26d)]['stdin']['writable'])return;const _0x73e615=JSON[_0x476817(0x306)]({'command':_0x559461,..._0x5300bc});try{_0x2a8c11[_0x476817(0x26d)][_0x476817(0x321)]['write'](_0x73e615+'\x0a');}catch(_0xe332db){}}function runPythonHealthCheck(_0x33a81a){const _0x44a2fd=a0_0x20ed52;if(!_0x33a81a[_0x44a2fd(0x2a5)]||_0x33a81a[_0x44a2fd(0x2a5)][_0x44a2fd(0x333)]<0x2)return;const _0x10f9dd=_0x33a81a[_0x44a2fd(0x2a5)][_0x44a2fd(0x277)](_0x2359ad=>{const _0x10dded=_0x44a2fd,_0x5ae31a=(_0x2359ad['activityLevel']||'')[_0x10dded(0x357)]();return ACTIVITY_LEVEL_MAP[_0x5ae31a]||0x32;});sendToPython(_0x33a81a,_0x44a2fd(0x2fd),{'values':_0x10f9dd,'tag':_0x44a2fd(0x288)});}function handlePythonResult(_0x231452,_0x2259a6){const _0x318190=a0_0x20ed52;if(_0x2259a6['type']===_0x318190(0x2f3))_0x231452[_0x318190(0x34e)][_0x318190(0x29e)](_0x318190(0x303));else{if(_0x2259a6[_0x318190(0x36e)]===_0x318190(0x2b5)){const {anomaly_score:_0x5c38af,is_anomaly:_0x1dd6f7,threshold:_0x3af697,explanation:_0x13c1c0}=_0x2259a6['payload'];_0x231452[_0x318190(0x34e)][_0x318190(0x29c)](_0x318190(0x28a)+_0x5c38af['toFixed'](0x5)+_0x318190(0x21e)+(_0x1dd6f7?_0x318190(0x258):'OK')),_0x231452['setStateAsync'](_0x318190(0x25c),{'val':_0x5c38af,'ack':!![]}),_0x231452[_0x318190(0x2ce)](_0x318190(0x299),{'val':new Date()[_0x318190(0x268)](),'ack':!![]});if(_0x3af697)_0x231452[_0x318190(0x2ce)](_0x318190(0x2ff),{'val':_0x3af697,'ack':!![]});if(_0x1dd6f7){let _0x185502=_0x318190(0x328)+_0x5c38af[_0x318190(0x2b3)](0x4)+')';if(_0x13c1c0&&_0x13c1c0!=='Unknown')_0x185502+='\x0aGrund:\x20'+_0x13c1c0;_0x231452[_0x318190(0x2ce)](_0x318190(0x370),{'val':!![],'ack':!![]}),_0x231452[_0x318190(0x2ce)](_0x318190(0x346),{'val':_0x185502,'ack':!![]}),sendNotification(_0x231452,_0x318190(0x349)+_0x185502,![],!![]);}}else{if(_0x2259a6['type']==='TRAINING_COMPLETE'){const _0x3c90ef=_0x2259a6[_0x318190(0x35d)]['details']||'',_0x368606=_0x2259a6[_0x318190(0x35d)][_0x318190(0x2af)],_0x4157de=_0x2259a6[_0x318190(0x35d)][_0x318190(0x220)]?'Success:\x20'+new Date()[_0x318190(0x273)]()+'\x20('+_0x3c90ef+')':'Failed:\x20'+_0x2259a6[_0x318190(0x35d)][_0x318190(0x20f)];_0x231452[_0x318190(0x2ce)]('analysis.training.status',{'val':_0x4157de,'ack':!![]});if(_0x2259a6['payload'][_0x318190(0x220)]&&_0x368606)_0x231452[_0x318190(0x2ce)]('analysis.security.currentThreshold',{'val':_0x368606,'ack':!![]});}else{if(_0x2259a6['type']===_0x318190(0x1ef)){const {patterns:_0x1162d8}=_0x2259a6['payload'];if(_0x1162d8&&_0x1162d8['length']>0x0){_0x231452[_0x318190(0x34e)][_0x318190(0x29c)](_0x318190(0x2b8)+_0x1162d8[_0x318190(0x333)]+_0x318190(0x293)),_0x231452[_0x318190(0x2ce)](_0x318190(0x316),{'val':JSON['stringify'](_0x1162d8),'ack':!![]});const _0xe355ef=_0x1162d8[0x0],_0x333d50=_0x318190(0x347)+_0xe355ef[_0x318190(0x1e8)]+'\x20('+(_0xe355ef[_0x318190(0x23a)]*0x64)[_0x318190(0x2b3)](0x0)+'%)';_0x231452[_0x318190(0x2ce)](_0x318190(0x203),{'val':!![],'ack':!![]}),_0x231452['setStateAsync'](_0x318190(0x26b),{'val':_0x333d50,'ack':!![]});}else _0x231452[_0x318190(0x34e)]['info'](_0x318190(0x2cd)),_0x231452['setStateAsync'](_0x318190(0x203),{'val':![],'ack':!![]}),_0x231452[_0x318190(0x2ce)](_0x318190(0x316),{'val':'[]','ack':!![]});}else{if(_0x2259a6[_0x318190(0x36e)]===_0x318190(0x26c)){if(_0x2259a6[_0x318190(0x35d)][_0x318190(0x220)])try{const _0x28a7ae=JSON[_0x318190(0x340)](_0x2259a6['payload']['details']);if(_0x28a7ae[_0x318190(0x1ea)])_0x231452[_0x318190(0x2ce)](_0x318190(0x326),{'val':JSON[_0x318190(0x306)](_0x28a7ae[_0x318190(0x1ea)]),'ack':!![]});if(_0x28a7ae[_0x318190(0x29b)])_0x231452[_0x318190(0x2ce)](_0x318190(0x329),{'val':JSON[_0x318190(0x306)](_0x28a7ae[_0x318190(0x29b)]),'ack':!![]});}catch(_0x3aeefa){}}else{if(_0x2259a6['type']===_0x318190(0x35e)){if(_0x2259a6[_0x318190(0x35d)]['success'])_0x231452[_0x318190(0x34e)]['info'](_0x318190(0x2eb));}else{if(_0x2259a6[_0x318190(0x36e)]===_0x318190(0x1ee))_0x231452[_0x318190(0x2ce)]('analysis.health.lastCheck',{'val':new Date()[_0x318190(0x268)](),'ack':!![]}),_0x231452[_0x318190(0x2ce)](_0x318190(0x358),{'val':_0x2259a6[_0x318190(0x35d)][_0x318190(0x1df)],'ack':!![]});else{if(_0x2259a6[_0x318190(0x36e)]==='TREND_RESULT')_0x231452[_0x318190(0x2ce)]('analysis.health.trendDiagnosis',{'val':_0x2259a6['payload'][_0x318190(0x244)],'ack':!![]}),_0x231452[_0x318190(0x2ce)](_0x318190(0x25e),{'val':_0x2259a6[_0x318190(0x35d)][_0x318190(0x31c)],'ack':!![]});else{if(_0x2259a6['type']===_0x318190(0x1db)){const {speed_trend:_0x283934}=_0x2259a6[_0x318190(0x35d)];if(_0x283934!==undefined)_0x231452[_0x318190(0x2ce)](_0x318190(0x35f),{'val':_0x283934,'ack':!![]});}else{if(_0x2259a6[_0x318190(0x36e)]===_0x318190(0x204)){const {forecast:_0x55fd59}=_0x2259a6['payload'];if(_0x55fd59)_0x231452[_0x318190(0x2ce)](_0x318190(0x23e),{'val':JSON['stringify'](_0x55fd59),'ack':!![]});}else{if(_0x2259a6[_0x318190(0x36e)]==='TOPOLOGY_RESULT'){const {data:_0xd22098}=_0x2259a6[_0x318190(0x35d)];_0xd22098&&(_0x231452[_0x318190(0x34e)]['info'](_0x318190(0x2a1)),_0x231452[_0x318190(0x2ce)](_0x318190(0x342),{'val':JSON[_0x318190(0x306)](_0xd22098),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x134a14){const _0x4c6d43=a0_0x20ed52;let _0xac9a0e=_0x4c6d43(0x2fb);if(fs[_0x4c6d43(0x2b4)](installer[_0x4c6d43(0x249)]))_0xac9a0e=installer['PYTHON_EXE'];try{const _0x2de3df=path[_0x4c6d43(0x211)](__dirname,_0x4c6d43(0x322),_0x4c6d43(0x1e5));_0x134a14['pythonProcess']=spawn(_0xac9a0e,[_0x2de3df]),_0x134a14[_0x4c6d43(0x26d)][_0x4c6d43(0x287)]['on']('data',_0x5e3ad0=>{const _0x2f3777=_0x4c6d43,_0x2d5b19=_0x5e3ad0[_0x2f3777(0x33f)]()[_0x2f3777(0x34d)]('\x0a');_0x2d5b19[_0x2f3777(0x237)](_0x26bf11=>{const _0x1b4b61=_0x2f3777,_0x4ee0eb=_0x26bf11[_0x1b4b61(0x32a)]();if(!_0x4ee0eb)return;if(_0x4ee0eb['startsWith'](_0x1b4b61(0x2bf)))_0x134a14[_0x1b4b61(0x34e)][_0x1b4b61(0x29e)](_0x1b4b61(0x232)+_0x4ee0eb['substring'](0x5)[_0x1b4b61(0x32a)]());else{if(_0x4ee0eb[_0x1b4b61(0x239)](_0x1b4b61(0x291)))try{const _0x13600d=JSON[_0x1b4b61(0x340)](_0x4ee0eb[_0x1b4b61(0x271)](0x8)['trim']());handlePythonResult(_0x134a14,_0x13600d);}catch(_0x34ebf0){}}});}),_0x134a14[_0x4c6d43(0x26d)]['on'](_0x4c6d43(0x2c3),_0x319c1c=>{_0x134a14['pythonProcess']=null;});}catch(_0x44c560){_0x134a14[_0x4c6d43(0x34e)][_0x4c6d43(0x29f)](_0x4c6d43(0x29d)+_0x44c560[_0x4c6d43(0x34c)]);}}async function runAutopilot(_0x21a994){const _0x5baae4=a0_0x20ed52;_0x21a994[_0x5baae4(0x34e)][_0x5baae4(0x29e)](_0x5baae4(0x1e9)),await runGeminiAnalysis(_0x21a994),updateHealthVector(_0x21a994),triggerGaitAnalysis(_0x21a994),triggerEnergyPrediction(_0x21a994);}async function triggerGaitAnalysis(_0x39f818){const _0x3874cf=a0_0x20ed52;if(!_0x39f818['isProVersion'])return;try{const _0x5b38d5=await _0x39f818[_0x3874cf(0x27b)]('LTM.trainingData.sequences');_0x5b38d5&&_0x5b38d5['val']&&sendToPython(_0x39f818,_0x3874cf(0x363),{'sequences':JSON[_0x3874cf(0x340)](_0x5b38d5[_0x3874cf(0x248)])});}catch(_0x550ff2){}}async function triggerEnergyPrediction(_0xb28654){const _0xe070d7=a0_0x20ed52;if(!_0xb28654[_0xe070d7(0x2c1)])return;try{const _0x3c43e3=await getOutsideTemperatureNumeric(_0xb28654);if(_0x3c43e3===null)return;const _0x4caec9={},_0x2824cc=_0xb28654[_0xe070d7(0x23b)][_0xe070d7(0x22e)]||[];for(const _0x11d144 of _0x2824cc){if(_0x11d144[_0xe070d7(0x36e)]===_0xe070d7(0x286)&&_0x11d144[_0xe070d7(0x229)]){const _0xfde842=_0xb28654['sensorLastValues'][_0x11d144['id']];if(_0xfde842!==undefined)_0x4caec9[_0x11d144['location']]=_0xfde842;}}Object['keys'](_0x4caec9)['length']>0x0&&sendToPython(_0xb28654,_0xe070d7(0x319),{'current_temps':_0x4caec9,'t_out':_0x3c43e3});}catch(_0x18432d){}}function updateHealthVector(_0x1ce4a5){const _0x5cf1cf=a0_0x20ed52;if(!_0x1ce4a5[_0x5cf1cf(0x300)]||_0x1ce4a5[_0x5cf1cf(0x300)]['length']===0x0)return;const _0xfff343=new Array(0x60)[_0x5cf1cf(0x210)](0x0),_0x34f5a3=new Date()[_0x5cf1cf(0x2ca)](0x0,0x0,0x0,0x0);_0x1ce4a5[_0x5cf1cf(0x300)][_0x5cf1cf(0x237)](_0x7490f5=>{const _0x5110df=_0x5cf1cf,_0x22eb2b=new Date(_0x7490f5['timestamp']);if(_0x22eb2b['getTime']()>=_0x34f5a3){const _0x6df1f0=_0x22eb2b[_0x5110df(0x32e)](),_0xdc8969=_0x22eb2b[_0x5110df(0x26e)](),_0x6d734c=_0x6df1f0*0x4+Math[_0x5110df(0x1e0)](_0xdc8969/0xf);if(_0x6d734c>=0x0&&_0x6d734c<0x60)_0xfff343[_0x6d734c]++;}}),_0x1ce4a5[_0x5cf1cf(0x2ce)](_0x5cf1cf(0x2b1),{'val':JSON[_0x5cf1cf(0x306)](_0xfff343),'ack':!![]});}async function getWeatherContext(_0x3a0fa0){const _0x2d32e0=a0_0x20ed52;if(!_0x3a0fa0[_0x2d32e0(0x23b)][_0x2d32e0(0x305)]||!_0x3a0fa0[_0x2d32e0(0x23b)][_0x2d32e0(0x313)])return'Wetterdaten\x20deaktiviert.';try{const _0x824f3d=_0x3a0fa0[_0x2d32e0(0x23b)][_0x2d32e0(0x313)];let _0x422359=await _0x3a0fa0[_0x2d32e0(0x2d7)](_0x824f3d+'.Current.Temperature');if(!_0x422359)_0x422359=await _0x3a0fa0[_0x2d32e0(0x2d7)](_0x824f3d+'.forecast.current.temperature');let _0x398c4e=await _0x3a0fa0[_0x2d32e0(0x2d7)](_0x824f3d+'.Current.WeatherText');if(!_0x398c4e)_0x398c4e=await _0x3a0fa0[_0x2d32e0(0x2d7)](_0x824f3d+_0x2d32e0(0x206));if(_0x422359&&_0x398c4e)return _0x422359[_0x2d32e0(0x248)]+_0x2d32e0(0x219)+_0x398c4e[_0x2d32e0(0x248)];}catch(_0x4c8856){}return'Keine\x20Wetterdaten\x20verfÃ¼gbar.';}async function getCalendarContext(_0x109ec1){const _0x2bfeec=a0_0x20ed52;if(!_0x109ec1[_0x2bfeec(0x23b)][_0x2bfeec(0x33e)]||!_0x109ec1[_0x2bfeec(0x23b)][_0x2bfeec(0x226)])return _0x2bfeec(0x2a8);return _0x2bfeec(0x311);}async function getCalendarNames(_0x4e3d06,_0x80184a){return[];}async function saveFeedback(_0x4d5735,_0x34cefb){const _0x454ffb=a0_0x20ed52;_0x4d5735[_0x454ffb(0x34e)]['info'](_0x454ffb(0x2bb)+_0x34cefb[_0x454ffb(0x1ff)]);}async function runGeminiAnalysis(_0x5c44e9,_0xb39e20=''){const _0xc38ade=a0_0x20ed52;if(!_0x5c44e9[_0xc38ade(0x234)])return;if(_0x5c44e9[_0xc38ade(0x1fb)]['length']===0x0)return;const _0x112f8b=_0x5c44e9[_0xc38ade(0x1fb)][_0xc38ade(0x27c)](0x0,0xf),_0x10ea94=await getWeatherContext(_0x5c44e9),_0x1fa1ab=_0x5c44e9[_0xc38ade(0x2f0)],_0x4d5693=PERSONA_MAPPING[_0x5c44e9[_0xc38ade(0x23b)]['aiPersona']||_0xc38ade(0x30e)],_0x3dc078=_0x5c44e9[_0xc38ade(0x23b)][_0xc38ade(0x361)]||_0xc38ade(0x32b);let _0x539728='Unbekannt';try{const _0x50e4fe=await _0x5c44e9[_0xc38ade(0x27b)](_0xc38ade(0x227));if(_0x50e4fe&&_0x50e4fe[_0xc38ade(0x248)])_0x539728=_0x50e4fe[_0xc38ade(0x248)];}catch(_0x13d3d0){}let _0x2695cb=![];try{const _0x33b3a4=await _0x5c44e9[_0xc38ade(0x27b)]('analysis.automation.autoApply');if(_0x33b3a4&&_0x33b3a4[_0xc38ade(0x248)])_0x2695cb=!![];}catch(_0x2fe4c2){}const _0xd56fad=_0xc38ade(0x278)+_0x4d5693+'.\x20KONTEXT:\x20'+_0x3dc078+_0xc38ade(0x1e6)+_0x1fa1ab+_0xc38ade(0x2ec)+_0x10ea94+_0xc38ade(0x265)+_0x539728+_0xc38ade(0x1ed)+JSON[_0xc38ade(0x306)](_0x112f8b)+'.\x20EMERGENCY:\x20'+_0xb39e20+_0xc38ade(0x21f);try{const _0xf65cd3=await _0x5c44e9[_0xc38ade(0x234)][_0xc38ade(0x2b7)](_0xd56fad),_0xd9d07c=JSON[_0xc38ade(0x340)](_0xf65cd3[_0xc38ade(0x21c)]['text']()[_0xc38ade(0x2c2)](/```json|```/g,'')[_0xc38ade(0x32a)]());await _0x5c44e9[_0xc38ade(0x2ce)]('analysis.lastResult',{'val':JSON[_0xc38ade(0x306)](_0xd9d07c),'ack':!![]});if(_0xd9d07c[_0xc38ade(0x1f3)])await _0x5c44e9['setStateAsync'](_0xc38ade(0x365),{'val':_0xd9d07c['summary'],'ack':!![]});const _0x172ad0={'timestamp':Date[_0xc38ade(0x2d9)](),'id':Date[_0xc38ade(0x2d9)]()[_0xc38ade(0x33f)](),'analysis':{'activity':{'summary':_0xd9d07c[_0xc38ade(0x1f3)],'isAlert':_0xd9d07c[_0xc38ade(0x307)],'alertReason':_0xd9d07c[_0xc38ade(0x32d)]},'comfort':{'automationProposal':_0xd9d07c[_0xc38ade(0x27d)]}}};await updateAnalysisHistory(_0x5c44e9,_0x172ad0);const _0x12be61=_0xd9d07c[_0xc38ade(0x307)]||![];_0x12be61!==_0x5c44e9['lastAlertState']&&(await _0x5c44e9['setStateAsync'](_0xc38ade(0x370),{'val':_0x12be61,'ack':!![]}),_0x5c44e9[_0xc38ade(0x1dc)]=_0x12be61,_0x12be61&&(await _0x5c44e9[_0xc38ade(0x2ce)](_0xc38ade(0x346),{'val':_0xd9d07c[_0xc38ade(0x32d)],'ack':!![]}),sendNotification(_0x5c44e9,'âš ï¸\x20ALARM:\x20'+_0xd9d07c[_0xc38ade(0x32d)],![],_0xd9d07c[_0xc38ade(0x317)])));if(_0xd9d07c[_0xc38ade(0x27d)]&&_0xd9d07c['automationProposal'][_0xc38ade(0x2d6)]){await _0x5c44e9['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x5c44e9[_0xc38ade(0x2ce)](_0xc38ade(0x26b),{'val':_0xd9d07c[_0xc38ade(0x27d)][_0xc38ade(0x2f6)],'ack':!![]}),await _0x5c44e9[_0xc38ade(0x2ce)]('analysis.automation.targetId',{'val':_0xd9d07c[_0xc38ade(0x27d)]['targetId'],'ack':!![]}),await _0x5c44e9['setStateAsync'](_0xc38ade(0x2b6),{'val':JSON[_0xc38ade(0x306)](_0xd9d07c[_0xc38ade(0x27d)][_0xc38ade(0x2b0)]),'ack':!![]});if(_0x2695cb)executeAutomationAction(_0x5c44e9);}}catch(_0x164830){_0x5c44e9[_0xc38ade(0x34e)][_0xc38ade(0x29f)]('Gemini\x20Error:\x20'+_0x164830['message']);}}async function startSystem(_0xa615a5){const _0x5d7550=a0_0x20ed52;_0xa615a5[_0x5d7550(0x34e)][_0x5d7550(0x29c)](_0x5d7550(0x366)),await initZombies(_0xa615a5);try{_0xa615a5[_0x5d7550(0x2c1)]=await checkLicense(_0xa615a5['config'][_0x5d7550(0x284)]);}catch(_0x20c67e){}if(!_0xa615a5['config']['inactivityThresholdHours']||_0xa615a5[_0x5d7550(0x23b)]['inactivityThresholdHours']<0.1)_0xa615a5['config'][_0x5d7550(0x27f)]=0xc;await initHistory(_0xa615a5),await initSystemConfig(_0xa615a5);if(_0xa615a5[_0x5d7550(0x23b)][_0x5d7550(0x205)])try{_0xa615a5[_0x5d7550(0x2e4)]=new GoogleGenerativeAI(_0xa615a5[_0x5d7550(0x23b)][_0x5d7550(0x205)]),_0xa615a5[_0x5d7550(0x234)]=_0xa615a5[_0x5d7550(0x2e4)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x5d7550(0x2cc)}}),_0xa615a5[_0x5d7550(0x34e)][_0x5d7550(0x29c)](_0x5d7550(0x1f4));}catch(_0x2dabc2){_0xa615a5[_0x5d7550(0x34e)][_0x5d7550(0x29f)](_0x5d7550(0x324)+_0x2dabc2['message']);}await createAllObjects(_0xa615a5),await loadSystemMode(_0xa615a5),await loadRawEventLog(_0xa615a5),await loadDailyDigests(_0xa615a5),_0xa615a5['subscribeStates']('analysis.trigger'),_0xa615a5['subscribeStates'](LTM_DP_TRIGGER_DIGEST),_0xa615a5['subscribeStates']('system.mode'),_0xa615a5[_0x5d7550(0x334)](_0x5d7550(0x354)),_0xa615a5[_0x5d7550(0x334)]('analysis.automation.triggerAction'),_0xa615a5[_0x5d7550(0x334)](_0x5d7550(0x247)),_0xa615a5[_0x5d7550(0x334)](_0x5d7550(0x264)),_0xa615a5[_0x5d7550(0x334)](_0x5d7550(0x2c9)),_0xa615a5[_0x5d7550(0x334)](_0x5d7550(0x31f)),_0xa615a5['subscribeStates'](_0x5d7550(0x2be)),_0xa615a5[_0x5d7550(0x334)](_0x5d7550(0x301)),await initSensorSubscriptions(_0xa615a5),await initPresenceSubscriptions(_0xa615a5),await setupTelegramListener(_0xa615a5),setTimeout(()=>checkWifiPresence(_0xa615a5),0x1388);if(_0xa615a5[_0x5d7550(0x28e)])clearInterval(_0xa615a5[_0x5d7550(0x28e)]);const _0x436d10=_0xa615a5[_0x5d7550(0x23b)]['analysisInterval']||0xf;_0x436d10>0x0&&(_0xa615a5[_0x5d7550(0x28e)]=setInterval(()=>{runAutopilot(_0xa615a5);},_0x436d10*0x3c*0x3e8)),schedulers[_0x5d7550(0x2de)](_0xa615a5,()=>createDailyDigest(_0xa615a5)),schedulers[_0x5d7550(0x255)](_0xa615a5),schedulers[_0x5d7550(0x302)](_0xa615a5,()=>runBaselineDriftAnalysis(_0xa615a5)),schedulers[_0x5d7550(0x1f5)](_0xa615a5,()=>sendMorningBriefing(_0xa615a5)),startPythonService(_0xa615a5),setTimeout(()=>{const _0x1eba53=_0x5d7550;_0xa615a5[_0x1eba53(0x26d)]&&(runPythonHealthCheck(_0xa615a5),triggerGaitAnalysis(_0xa615a5),triggerEnergyPrediction(_0xa615a5)),updateHealthVector(_0xa615a5);},0x1388);}class CogniLiving extends utils[a0_0x20ed52(0x36d)]{constructor(_0x12cd62){const _0x2d92d0=a0_0x20ed52;super({..._0x12cd62,'name':'cogni-living'}),this['eventHistory']=[],this['analysisHistory']=[],this[_0x2d92d0(0x300)]=[],this[_0x2d92d0(0x2a5)]=[],this[_0x2d92d0(0x310)]={},this[_0x2d92d0(0x222)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x2d92d0(0x304)]=!![],this[_0x2d92d0(0x283)]=null,this['exitGraceTimer']=null,this[_0x2d92d0(0x30b)]=![],this[_0x2d92d0(0x2e4)]=null,this[_0x2d92d0(0x234)]=null,this[_0x2d92d0(0x2f0)]=SYSTEM_MODES[_0x2d92d0(0x27e)],this[_0x2d92d0(0x2c1)]=![],this[_0x2d92d0(0x1dc)]=![],this['systemUUID']=_0x2d92d0(0x20b),this[_0x2d92d0(0x28e)]=null,this['ltmJob']=null,this['modeResetJob']=null,this[_0x2d92d0(0x250)]=null,this[_0x2d92d0(0x2e9)]=null,this['pythonProcess']=null,this['dependencyInstallInProgress']=![],this['on'](_0x2d92d0(0x242),this[_0x2d92d0(0x2a6)][_0x2d92d0(0x2f5)](this)),this['on'](_0x2d92d0(0x24e),this['onStateChange'][_0x2d92d0(0x2f5)](this)),this['on'](_0x2d92d0(0x28d),this[_0x2d92d0(0x2a7)][_0x2d92d0(0x2f5)](this)),this['on']('message',this['onMessage'][_0x2d92d0(0x2f5)](this));}async['onReady'](){const _0x264ff8=a0_0x20ed52;this['log'][_0x264ff8(0x29c)](_0x264ff8(0x202)+this['version']+_0x264ff8(0x238));if(!installer[_0x264ff8(0x345)](this,()=>startSystem(this)))return;}[a0_0x20ed52(0x2a7)](_0x441fcb){const _0x2a138c=a0_0x20ed52;if(this[_0x2a138c(0x28e)])clearInterval(this['analysisTimer']);if(this[_0x2a138c(0x250)])clearInterval(this[_0x2a138c(0x250)]);if(this[_0x2a138c(0x34f)])this[_0x2a138c(0x34f)][_0x2a138c(0x25a)]();if(this[_0x2a138c(0x2fe)])this[_0x2a138c(0x2fe)][_0x2a138c(0x25a)]();if(this[_0x2a138c(0x2e9)])this['briefingJob'][_0x2a138c(0x25a)]();if(this[_0x2a138c(0x283)])clearTimeout(this[_0x2a138c(0x283)]);if(this[_0x2a138c(0x218)])clearTimeout(this[_0x2a138c(0x218)]);stopPythonService(this),_0x441fcb();}async[a0_0x20ed52(0x2d1)](_0x209f55,_0x159cb2){const _0x438672=a0_0x20ed52;if(!_0x159cb2||this[_0x438672(0x33c)])return;if(_0x209f55[_0x438672(0x35c)](_0x438672(0x337))&&_0x209f55['endsWith'](_0x438672(0x275))&&_0x159cb2[_0x438672(0x248)]){await handleTelegramResponse(this,_0x159cb2[_0x438672(0x248)]);return;}if(_0x209f55===this[_0x438672(0x33d)]+'.'+SYSTEM_DP_MODE){if(_0x159cb2[_0x438672(0x248)]&&Object['values'](SYSTEM_MODES)[_0x438672(0x35c)](_0x159cb2[_0x438672(0x248)])){this['currentSystemMode']=_0x159cb2['val'];if(_0x159cb2['val']===SYSTEM_MODES[_0x438672(0x282)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x159cb2[_0x438672(0x2c6)])this['setState'](_0x209f55,{'val':this[_0x438672(0x2f0)],'ack':!![]});return;}if(!_0x159cb2[_0x438672(0x2c6)]){_0x209f55[_0x438672(0x35c)](_0x438672(0x2dc))&&_0x159cb2[_0x438672(0x248)]&&(this[_0x438672(0x2d8)](_0x209f55,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x209f55[_0x438672(0x35c)](_0x438672(0x24a))&&_0x159cb2[_0x438672(0x248)]){this[_0x438672(0x2d8)](_0x209f55,{'val':![],'ack':!![]});if(this[_0x438672(0x2c1)])createDailyDigest(this);}_0x209f55[_0x438672(0x35c)](_0x438672(0x1f6))&&_0x159cb2['val']&&(this[_0x438672(0x2d8)](_0x209f55,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x209f55[_0x438672(0x35c)](_0x438672(0x240))&&_0x159cb2[_0x438672(0x248)]&&(this['setState'](_0x209f55,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x209f55[_0x438672(0x35c)]('analysis.training.triggerSecurity')&&_0x159cb2['val']){this[_0x438672(0x2d8)](_0x209f55,{'val':![],'ack':!![]});if(this[_0x438672(0x2c1)])try{const _0x557388=await this['getStateAsync'](_0x438672(0x213));if(_0x557388&&_0x557388[_0x438672(0x248)]){const _0x45ab74=JSON[_0x438672(0x340)](_0x557388[_0x438672(0x248)]);this[_0x438672(0x34e)][_0x438672(0x29c)]('ðŸ§ \x20Triggering\x20Security\x20Training...'),this[_0x438672(0x2ce)](_0x438672(0x243),{'val':'Sec-Training\x20started...','ack':!![]}),sendToPython(this,_0x438672(0x36a),{'sequences':_0x45ab74});}}catch(_0x438540){this[_0x438672(0x34e)]['error'](_0x438672(0x28b)+_0x438540[_0x438672(0x34c)]);}}if(_0x209f55[_0x438672(0x35c)](_0x438672(0x2c9))&&_0x159cb2[_0x438672(0x248)]){this['setState'](_0x209f55,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x21ce0d=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x21ce0d&&_0x21ce0d[_0x438672(0x248)])sendToPython(this,'TRAIN_HEALTH',{'digests':JSON[_0x438672(0x340)](_0x21ce0d[_0x438672(0x248)])});}catch(_0x2208ef){}}if(_0x209f55['includes'](_0x438672(0x31f))&&_0x159cb2[_0x438672(0x248)]){this[_0x438672(0x2d8)](_0x209f55,{'val':![],'ack':!![]});if(this[_0x438672(0x2c1)])try{const _0x115764=await this[_0x438672(0x27b)](_0x438672(0x241));if(_0x115764&&_0x115764['val'])sendToPython(this,'TRAIN_ENERGY',{'points':JSON[_0x438672(0x340)](_0x115764[_0x438672(0x248)])});}catch(_0x5d8145){}}if(_0x209f55[_0x438672(0x35c)](_0x438672(0x2be))&&_0x159cb2[_0x438672(0x248)]){this['setState'](_0x209f55,{'val':![],'ack':!![]});if(this[_0x438672(0x2c1)])try{const _0x42af5a=await this[_0x438672(0x27b)](LTM_DP_RAW_LOG);_0x42af5a&&_0x42af5a[_0x438672(0x248)]&&(this['log'][_0x438672(0x29c)](_0x438672(0x230)),sendToPython(this,_0x438672(0x1e4),{'events':JSON[_0x438672(0x340)](_0x42af5a['val'])}));}catch(_0x410dca){}}if(_0x209f55[_0x438672(0x35c)](_0x438672(0x301))&&_0x159cb2[_0x438672(0x248)]){this['setState'](_0x209f55,{'val':![],'ack':!![]});if(this[_0x438672(0x2c1)])try{const _0x5d981e=await this[_0x438672(0x27b)](_0x438672(0x213));if(_0x5d981e&&_0x5d981e[_0x438672(0x248)]){const _0x4897d6=JSON[_0x438672(0x340)](_0x5d981e[_0x438672(0x248)]);this['log'][_0x438672(0x29c)](_0x438672(0x2ac)),sendToPython(this,_0x438672(0x1f0),{'sequences':_0x4897d6});}}catch(_0x4a90fd){this[_0x438672(0x34e)][_0x438672(0x29f)](_0x438672(0x2f7)+_0x4a90fd[_0x438672(0x34c)]);}}return;}if(this['config'][_0x438672(0x252)]&&this[_0x438672(0x23b)][_0x438672(0x252)][_0x438672(0x35c)](_0x209f55)){await checkWifiPresence(this);return;}const _0x4d22db=(this[_0x438672(0x23b)]['devices']||[])[_0x438672(0x1f9)](_0x574cad=>_0x574cad['id']===_0x209f55);if(_0x4d22db)processSensorEvent(this,_0x209f55,_0x159cb2,_0x4d22db);}async[a0_0x20ed52(0x352)](_0x139182){const _0x2f1cda=a0_0x20ed52;if(typeof _0x139182===_0x2f1cda(0x1e1)&&_0x139182[_0x2f1cda(0x34c)]){if(_0x139182[_0x2f1cda(0x259)]==='testApiKey'){const _0x25f053=_0x139182[_0x2f1cda(0x34c)][_0x2f1cda(0x2ad)]||this[_0x2f1cda(0x23b)]['geminiApiKey'];if(!_0x25f053)return this[_0x2f1cda(0x30f)](_0x139182[_0x2f1cda(0x1ec)],_0x139182[_0x2f1cda(0x259)],{'success':![],'message':'Kein\x20API\x20Key.'},_0x139182[_0x2f1cda(0x360)]);try{const _0x2bbe7b=new GoogleGenerativeAI(_0x25f053),_0x20757f=_0x2bbe7b[_0x2f1cda(0x233)]({'model':GEMINI_MODEL}),_0x4e3c86=await _0x20757f[_0x2f1cda(0x2b7)]('Hi');this['sendTo'](_0x139182[_0x2f1cda(0x1ec)],_0x139182[_0x2f1cda(0x259)],{'success':!![],'message':_0x2f1cda(0x21d)+_0x4e3c86[_0x2f1cda(0x21c)]['text']()},_0x139182[_0x2f1cda(0x360)]);}catch(_0x514bd1){this[_0x2f1cda(0x30f)](_0x139182[_0x2f1cda(0x1ec)],_0x139182[_0x2f1cda(0x259)],{'success':![],'message':_0x2f1cda(0x30c)+_0x514bd1[_0x2f1cda(0x34c)]},_0x139182['callback']);}}else{if(_0x139182[_0x2f1cda(0x259)]===_0x2f1cda(0x2d5)){const _0x3af2b2=await getWeatherContext(this),_0x231a39=await getCalendarContext(this);this[_0x2f1cda(0x30f)](_0x139182[_0x2f1cda(0x1ec)],_0x139182[_0x2f1cda(0x259)],{'success':!![],'weather':_0x3af2b2,'calendar':_0x231a39},_0x139182['callback']);}else{if(_0x139182[_0x2f1cda(0x259)]===_0x2f1cda(0x292)){if(!this[_0x2f1cda(0x2c1)])return this[_0x2f1cda(0x30f)](_0x139182[_0x2f1cda(0x1ec)],_0x139182['command'],{'success':![],'isPro':![]},_0x139182[_0x2f1cda(0x360)]);let _0x113049={'status':_0x2f1cda(0x325)};try{const _0x3a15fb=await this[_0x2f1cda(0x27b)](LTM_DP_DRIFT_STATUS);_0x113049[_0x2f1cda(0x2ab)]=_0x3a15fb?_0x3a15fb[_0x2f1cda(0x248)]:_0x2f1cda(0x325);}catch(_0x6cfcc4){}this['sendTo'](_0x139182[_0x2f1cda(0x1ec)],_0x139182['command'],{'success':!![],'isPro':!![],'dailyDigests':this[_0x2f1cda(0x2a5)],'driftAnalysis':_0x113049,'analysisHistory':this[_0x2f1cda(0x2c7)]},_0x139182[_0x2f1cda(0x360)]);}else{if(_0x139182[_0x2f1cda(0x259)]==='getOverviewData'){const _0x3cc261=this[_0x2f1cda(0x2a5)][_0x2f1cda(0x333)],_0x533254=new Date(),_0x3a5b86=new Date(_0x533254[_0x2f1cda(0x269)](),_0x533254[_0x2f1cda(0x2e6)](),_0x533254[_0x2f1cda(0x1e3)]())[_0x2f1cda(0x2a9)](),_0x20a50c=this['rawEventLog'][_0x2f1cda(0x217)](_0x29b6e9=>new Date(_0x29b6e9[_0x2f1cda(0x33b)])['getTime']()>_0x3a5b86)[_0x2f1cda(0x333)],_0x33d0cc=new Array(0x18)['fill'](0x0);this[_0x2f1cda(0x300)][_0x2f1cda(0x237)](_0x796cbd=>{const _0x558517=_0x2f1cda,_0x123a37=new Date(_0x796cbd[_0x558517(0x33b)]);if(_0x123a37[_0x558517(0x2a9)]()>_0x3a5b86)_0x33d0cc[_0x123a37['getHours']()]++;});let _0x1a86c9={'status':_0x2f1cda(0x325)};try{const _0x3be873=await this[_0x2f1cda(0x27b)](LTM_DP_DRIFT_STATUS);_0x1a86c9[_0x2f1cda(0x2ab)]=_0x3be873?_0x3be873[_0x2f1cda(0x248)]:_0x2f1cda(0x325);}catch(_0x51b41d){}let _0x12f10f='';try{const _0x551728=await this[_0x2f1cda(0x27b)](_0x2f1cda(0x227));_0x12f10f=_0x551728?_0x551728[_0x2f1cda(0x248)]:'';}catch(_0x1fbc1){}let _0x1df2bb=null;!this[_0x2f1cda(0x234)]&&(_0x1df2bb=this[_0x2f1cda(0x23b)]['geminiApiKey']?'KI-Modell\x20nicht\x20initialisiert':_0x2f1cda(0x1dd));let _0x3691cf={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x16ae21=await this[_0x2f1cda(0x27b)](_0x2f1cda(0x203));if(_0x16ae21&&_0x16ae21[_0x2f1cda(0x248)]){_0x3691cf[_0x2f1cda(0x2d6)]=!![];const _0x5ef66e=await this[_0x2f1cda(0x27b)](_0x2f1cda(0x26b));_0x3691cf[_0x2f1cda(0x2f6)]=_0x5ef66e?_0x5ef66e['val']:'';const _0x33830e=await this['getStateAsync'](_0x2f1cda(0x327));_0x3691cf[_0x2f1cda(0x2e0)]=_0x33830e?_0x33830e[_0x2f1cda(0x248)]:'';const _0x6f8be=await this[_0x2f1cda(0x27b)](_0x2f1cda(0x2b6));_0x3691cf[_0x2f1cda(0x2b0)]=_0x6f8be?_0x6f8be[_0x2f1cda(0x248)]:'';}const _0x41f51b=await this[_0x2f1cda(0x27b)](_0x2f1cda(0x247));_0x3691cf[_0x2f1cda(0x2e3)]=_0x41f51b?!!_0x41f51b[_0x2f1cda(0x248)]:![];}catch(_0x23d8bc){}this['sendTo'](_0x139182[_0x2f1cda(0x1ec)],_0x139182[_0x2f1cda(0x259)],{'success':!![],'eventHistory':this[_0x2f1cda(0x1fb)][_0x2f1cda(0x27c)](0x0,0xf),'stats':{'digestCount':_0x3cc261,'eventCountToday':_0x20a50c,'hourlyActivity':_0x33d0cc,'driftStatus':_0x1a86c9[_0x2f1cda(0x2ab)],'isPresent':this[_0x2f1cda(0x304)],'presenceWho':_0x12f10f,'minDays':this[_0x2f1cda(0x23b)]['minDaysForBaseline']||0x7,'stbDays':this[_0x2f1cda(0x23b)]['ltmStbWindowDays']||0xe,'ltbDays':this[_0x2f1cda(0x23b)][_0x2f1cda(0x312)]||0x3c,'systemError':_0x1df2bb},'automation':_0x3691cf},_0x139182[_0x2f1cda(0x360)]);}else{if(_0x139182[_0x2f1cda(0x259)]==='scanDevices')try{const _0x1e8e8e=await scanner['scanForDevices'](this,_0x139182[_0x2f1cda(0x34c)]||{});this['sendTo'](_0x139182[_0x2f1cda(0x1ec)],_0x139182[_0x2f1cda(0x259)],{'success':!![],'devices':_0x1e8e8e},_0x139182[_0x2f1cda(0x360)]);}catch(_0x22262e){this['sendTo'](_0x139182[_0x2f1cda(0x1ec)],_0x139182[_0x2f1cda(0x259)],{'success':![],'error':_0x22262e[_0x2f1cda(0x34c)]},_0x139182[_0x2f1cda(0x360)]);}else{if(_0x139182[_0x2f1cda(0x259)]==='getEnums'){const _0x2ed938=await this[_0x2f1cda(0x31a)](_0x2f1cda(0x201),_0x2f1cda(0x1fa)),_0x126e14=[];if(_0x2ed938)for(const _0x29d4a5 in _0x2ed938){const _0x4b8d43=_0x2ed938[_0x29d4a5],_0x4945c0=(_0x4b8d43[_0x2f1cda(0x34a)]&&typeof _0x4b8d43[_0x2f1cda(0x34a)][_0x2f1cda(0x35a)]===_0x2f1cda(0x1e1)?_0x4b8d43[_0x2f1cda(0x34a)][_0x2f1cda(0x35a)]['de']:_0x4b8d43[_0x2f1cda(0x34a)][_0x2f1cda(0x35a)])||_0x4b8d43['common'][_0x2f1cda(0x35a)];_0x126e14['push']({'id':_0x29d4a5,'name':_0x4945c0});}const _0x3311c3=await this['getForeignObjectsAsync']('enum.rooms.*',_0x2f1cda(0x1fa)),_0x4e7b24=[];if(_0x3311c3)for(const _0x292f44 in _0x3311c3){const _0x6ea9b8=_0x3311c3[_0x292f44],_0x175dd0=(_0x6ea9b8['common']&&typeof _0x6ea9b8['common'][_0x2f1cda(0x35a)]===_0x2f1cda(0x1e1)?_0x6ea9b8[_0x2f1cda(0x34a)][_0x2f1cda(0x35a)]['de']:_0x6ea9b8[_0x2f1cda(0x34a)]['name'])||_0x292f44['split']('.')['pop']();_0x4e7b24[_0x2f1cda(0x2df)](_0x175dd0);}this['sendTo'](_0x139182['from'],_0x139182[_0x2f1cda(0x259)],{'success':!![],'enums':_0x126e14,'rooms':_0x4e7b24},_0x139182[_0x2f1cda(0x360)]);}else{if(_0x139182[_0x2f1cda(0x259)]===_0x2f1cda(0x24d)){const _0x20edfa=_0x139182[_0x2f1cda(0x34c)][_0x2f1cda(0x32f)];if(!_0x20edfa)return this[_0x2f1cda(0x30f)](_0x139182[_0x2f1cda(0x1ec)],_0x139182[_0x2f1cda(0x259)],{'success':![],'error':'No\x20instance'},_0x139182[_0x2f1cda(0x360)]);const _0x5f2711=await getCalendarNames(this,_0x20edfa);this['sendTo'](_0x139182[_0x2f1cda(0x1ec)],_0x139182[_0x2f1cda(0x259)],{'success':!![],'names':_0x5f2711},_0x139182['callback']);}else{if(_0x139182[_0x2f1cda(0x259)]===_0x2f1cda(0x281)){const {targetId:_0x3f013,targetValue:_0x4f6570}=_0x139182[_0x2f1cda(0x34c)];this[_0x2f1cda(0x34e)][_0x2f1cda(0x29c)](_0x2f1cda(0x2c4)+_0x3f013+_0x2f1cda(0x251)+_0x4f6570),await this[_0x2f1cda(0x2ce)](_0x2f1cda(0x203),{'val':!![],'ack':!![]}),await this['setStateAsync'](_0x2f1cda(0x26b),{'val':_0x2f1cda(0x362)+_0x3f013,'ack':!![]}),await this['setStateAsync'](_0x2f1cda(0x327),{'val':_0x3f013,'ack':!![]}),await this[_0x2f1cda(0x2ce)](_0x2f1cda(0x2b6),{'val':_0x4f6570,'ack':!![]}),this[_0x2f1cda(0x30f)](_0x139182[_0x2f1cda(0x1ec)],_0x139182[_0x2f1cda(0x259)],{'success':!![]},_0x139182[_0x2f1cda(0x360)]);}else{if(_0x139182['command']==='submitFeedback'){const {historyId:_0x408424,rating:_0x4d1624,comment:_0x2ca1c0,alertReason:_0x5c63bb}=_0x139182['message'];_0x408424&&_0x4d1624?(await saveFeedback(this,{'timestamp':Date[_0x2f1cda(0x2d9)](),'historyId':_0x408424,'rating':_0x4d1624,'comment':_0x2ca1c0,'alertReason':_0x5c63bb}),this[_0x2f1cda(0x30f)](_0x139182[_0x2f1cda(0x1ec)],_0x139182[_0x2f1cda(0x259)],{'success':!![]},_0x139182['callback'])):this[_0x2f1cda(0x30f)](_0x139182[_0x2f1cda(0x1ec)],_0x139182[_0x2f1cda(0x259)],{'success':![],'error':'Missing\x20data'},_0x139182[_0x2f1cda(0x360)]);}else _0x139182[_0x2f1cda(0x259)]===_0x2f1cda(0x22d)&&(this[_0x2f1cda(0x34e)][_0x2f1cda(0x29c)](_0x2f1cda(0x274)),await this[_0x2f1cda(0x2ce)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),await this[_0x2f1cda(0x2ce)]('analysis.automation.description',{'val':'','ack':!![]}),this[_0x2f1cda(0x30f)](_0x139182['from'],_0x139182[_0x2f1cda(0x259)],{'success':!![]},_0x139182['callback']));}}}}}}}}}}}if(require[a0_0x20ed52(0x2f4)]!==module)module[a0_0x20ed52(0x1e2)]=_0x4a76ad=>new CogniLiving(_0x4a76ad);else new CogniLiving();