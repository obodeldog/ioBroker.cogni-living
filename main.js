const a0_0x146ad5=a0_0x5204;(function(_0x246f01,_0x2b6a14){const _0x58baa4=a0_0x5204,_0x2501cf=_0x246f01();while(!![]){try{const _0x2c52b3=-parseInt(_0x58baa4(0x126))/0x1+-parseInt(_0x58baa4(0x18d))/0x2+-parseInt(_0x58baa4(0x1ab))/0x3+-parseInt(_0x58baa4(0x224))/0x4*(-parseInt(_0x58baa4(0x22a))/0x5)+parseInt(_0x58baa4(0x170))/0x6+parseInt(_0x58baa4(0x1cd))/0x7*(parseInt(_0x58baa4(0x28e))/0x8)+parseInt(_0x58baa4(0x148))/0x9;if(_0x2c52b3===_0x2b6a14)break;else _0x2501cf['push'](_0x2501cf['shift']());}catch(_0x468c9e){_0x2501cf['push'](_0x2501cf['shift']());}}}(a0_0x5308,0xa8be2));const a0_0x4ad235=(function(){let _0x3148dc=!![];return function(_0x324690,_0x203a21){const _0x3eb7cc=_0x3148dc?function(){const _0x4db2b2=a0_0x5204;if(_0x203a21){const _0x2fe9f3=_0x203a21[_0x4db2b2(0x266)](_0x324690,arguments);return _0x203a21=null,_0x2fe9f3;}}:function(){};return _0x3148dc=![],_0x3eb7cc;};}()),a0_0x31e2b1=a0_0x4ad235(this,function(){const _0x471999=a0_0x5204;return a0_0x31e2b1[_0x471999(0x204)]()[_0x471999(0x276)]('(((.+)+)+)+$')[_0x471999(0x204)]()['constructor'](a0_0x31e2b1)[_0x471999(0x276)](_0x471999(0x267));});a0_0x31e2b1();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x146ad5(0x12a)),{spawn}=require(a0_0x146ad5(0x101)),path=require('path'),fs=require('fs'),installer=require(a0_0x146ad5(0x174)),scanner=require(a0_0x146ad5(0x175)),schedulers=require(a0_0x146ad5(0x22e)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x146ad5(0x247),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x146ad5(0x15f),LTM_DP_DAILY_DIGESTS=a0_0x146ad5(0x20d),LTM_DP_STATUS=a0_0x146ad5(0x25e),LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS=a0_0x146ad5(0x1cc),LTM_DP_DRIFT_CHANNEL=a0_0x146ad5(0x20c),LTM_DP_DRIFT_STATUS=a0_0x146ad5(0x15b),LTM_DP_DRIFT_DETAILS=a0_0x146ad5(0x186),LTM_DP_DRIFT_LAST_CHECK=a0_0x146ad5(0x129),SYSTEM_DP_MODE=a0_0x146ad5(0x28b),SYSTEM_MODES={'NORMAL':a0_0x146ad5(0x1e9),'VACATION':a0_0x146ad5(0x1a5),'PARTY':a0_0x146ad5(0x27e),'GUEST':'guest'},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x146ad5(0x284)],SYSTEM_MODES[a0_0x146ad5(0x242)]],PERSONA_MAPPING={'generic':a0_0x146ad5(0x10c),'senior_aal':a0_0x146ad5(0x281),'family':'Fokus\x20auf\x20Familienroutinen.','single_comfort':a0_0x146ad5(0x211),'security':'PRIORIT√ÑT:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x239067){const _0x4f3efa=a0_0x146ad5;try{const _0x42f1d1=[_0x4f3efa(0x165),_0x4f3efa(0x1f9)];for(const _0x2e5856 of _0x42f1d1){try{const _0x5616de=await _0x239067[_0x4f3efa(0x138)](_0x2e5856);if(_0x5616de)await _0x239067[_0x4f3efa(0x238)](_0x2e5856);}catch(_0x15710b){}}}catch(_0x528cff){}}async function checkLicense(_0x1c6ddd){return!![];}async function initHistory(_0x5df4a1){const _0x1978e8=a0_0x146ad5;try{const _0x12ee22=await _0x5df4a1[_0x1978e8(0x243)](_0x1978e8(0x113));_0x12ee22&&_0x12ee22[_0x1978e8(0x244)]&&(_0x5df4a1[_0x1978e8(0x108)]=JSON[_0x1978e8(0x144)](_0x12ee22['val'][_0x1978e8(0x204)]()));}catch(_0x21f781){_0x5df4a1[_0x1978e8(0x108)]=[];}try{const _0x28cd45=await _0x5df4a1['getStateAsync'](_0x1978e8(0x23b));if(_0x28cd45&&_0x28cd45[_0x1978e8(0x244)])_0x5df4a1[_0x1978e8(0x194)]=JSON[_0x1978e8(0x144)](_0x28cd45[_0x1978e8(0x244)][_0x1978e8(0x204)]());}catch(_0x546608){_0x5df4a1['analysisHistory']=[];}if(_0x5df4a1[_0x1978e8(0x108)]&&_0x5df4a1[_0x1978e8(0x108)]['length']>0x0){_0x5df4a1[_0x1978e8(0x28f)]['info'](_0x1978e8(0x24d));for(let _0x4dba13=_0x5df4a1['eventHistory']['length']-0x1;_0x4dba13>=0x0;_0x4dba13--){const _0x4aac22=_0x5df4a1[_0x1978e8(0x108)][_0x4dba13];if(_0x4aac22&&_0x4aac22['id']!==undefined&&_0x4aac22['value']!==undefined)_0x5df4a1[_0x1978e8(0x1d4)][_0x4aac22['id']]=_0x4aac22['value'];}}}async function initSystemConfig(_0xdc5b8a){const _0x1982d1=a0_0x146ad5;try{const _0x2ee6a5=await _0xdc5b8a['getForeignObjectAsync']('system.config');if(_0x2ee6a5&&_0x2ee6a5[_0x1982d1(0x1c7)])_0xdc5b8a[_0x1982d1(0x20b)]={'latitude':_0x2ee6a5[_0x1982d1(0x1c7)]['latitude']||0x0,'longitude':_0x2ee6a5[_0x1982d1(0x1c7)]['longitude']||0x0,'city':_0x2ee6a5['common']['city']||''};}catch(_0x3a29b4){}}function a0_0x5204(_0x3809ac,_0x233f53){const _0x402e5c=a0_0x5308();return a0_0x5204=function(_0x31e2b1,_0x4ad235){_0x31e2b1=_0x31e2b1-0xf4;let _0x530802=_0x402e5c[_0x31e2b1];return _0x530802;},a0_0x5204(_0x3809ac,_0x233f53);}async function createAllObjects(_0x50f500){const _0x2faf00=a0_0x146ad5;await _0x50f500[_0x2faf00(0x254)](_0x2faf00(0x20e),{'type':'channel','common':{'name':_0x2faf00(0x12c)},'native':{}}),await _0x50f500['extendObjectAsync'](SYSTEM_DP_MODE,{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x188),'type':_0x2faf00(0x178),'role':_0x2faf00(0x1b1),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x2faf00(0x10a)]},'native':{}}),await _0x50f500['setObjectNotExistsAsync'](_0x2faf00(0x16e),{'type':'state','common':{'name':_0x2faf00(0x25f),'type':'string','role':_0x2faf00(0x169),'read':!![],'write':![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)](_0x2faf00(0x1e8),{'type':'state','common':{'name':_0x2faf00(0x206),'type':'string','role':_0x2faf00(0xf7),'read':!![],'write':![]},'native':{}}),await _0x50f500['setObjectNotExistsAsync'](_0x2faf00(0x113),{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x1ae),'type':_0x2faf00(0x178),'role':_0x2faf00(0xf7),'read':!![],'write':![]},'native':{}}),await _0x50f500[_0x2faf00(0x254)](_0x2faf00(0x22b),{'type':_0x2faf00(0xf5),'common':{'name':_0x2faf00(0x1de)},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)](_0x2faf00(0x172),{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x164),'type':'boolean','role':_0x2faf00(0x24f),'read':!![],'write':!![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)]('analysis.training.triggerHealth',{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x227),'type':'boolean','role':_0x2faf00(0x24f),'read':!![],'write':!![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)](_0x2faf00(0x277),{'type':_0x2faf00(0x1b1),'common':{'name':'Train\x20Energy','type':_0x2faf00(0x191),'role':_0x2faf00(0x24f),'read':!![],'write':!![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)](_0x2faf00(0x1a0),{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x274),'type':_0x2faf00(0x191),'role':_0x2faf00(0x24f),'read':!![],'write':!![]},'native':{}}),await _0x50f500['setObjectNotExistsAsync'](_0x2faf00(0x1c6),{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x225),'type':'boolean','role':_0x2faf00(0x24f),'read':!![],'write':!![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)](_0x2faf00(0x1f1),{'type':'state','common':{'name':_0x2faf00(0x1ad),'type':'string','role':_0x2faf00(0x169),'read':!![],'write':![]},'native':{}}),await _0x50f500[_0x2faf00(0x254)](_0x2faf00(0x208),{'type':_0x2faf00(0xf5),'common':{'name':_0x2faf00(0x143)},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)](_0x2faf00(0x1e5),{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x26a),'type':_0x2faf00(0x23a),'role':_0x2faf00(0x213),'read':!![],'write':![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)](_0x2faf00(0x100),{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x1f3),'type':_0x2faf00(0x23a),'role':_0x2faf00(0x213),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x50f500['setObjectNotExistsAsync'](_0x2faf00(0x14c),{'type':_0x2faf00(0x1b1),'common':{'name':'Last\x20Check','type':_0x2faf00(0x178),'role':_0x2faf00(0x163),'read':!![],'write':![]},'native':{}}),await _0x50f500['setObjectNotExistsAsync']('analysis.security.topologyMatrix',{'type':_0x2faf00(0x1b1),'common':{'name':'Topology\x20Matrix','type':'string','role':_0x2faf00(0xf7),'read':!![],'write':![]},'native':{}}),await _0x50f500[_0x2faf00(0x254)](_0x2faf00(0x290),{'type':_0x2faf00(0xf5),'common':{'name':'Health\x20Analysis'},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)]('analysis.health.lastCheck',{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x21b),'type':_0x2faf00(0x178),'role':_0x2faf00(0x163),'read':!![],'write':![]},'native':{}}),await _0x50f500['setObjectNotExistsAsync'](_0x2faf00(0x1a6),{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x123),'type':_0x2faf00(0x191),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)](_0x2faf00(0x1db),{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x269),'type':_0x2faf00(0x178),'role':_0x2faf00(0x169),'read':!![],'write':![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)](_0x2faf00(0x10f),{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x275),'type':'number','role':'value','read':!![],'write':![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)](_0x2faf00(0x28c),{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x260),'type':_0x2faf00(0x178),'role':_0x2faf00(0xf7),'read':!![],'write':![]},'native':{}}),await _0x50f500['setObjectNotExistsAsync'](_0x2faf00(0x155),{'type':_0x2faf00(0x1b1),'common':{'name':'Gait\x20Speed\x20Trend','type':_0x2faf00(0x23a),'role':_0x2faf00(0x213),'read':!![],'write':![]},'native':{}}),await _0x50f500['extendObjectAsync']('analysis.energy',{'type':_0x2faf00(0xf5),'common':{'name':_0x2faf00(0x179)},'native':{}}),await _0x50f500['setObjectNotExistsAsync']('analysis.energy.insulationScore',{'type':_0x2faf00(0x1b1),'common':{'name':'Insulation\x20Score','type':_0x2faf00(0x178),'role':_0x2faf00(0x169),'read':!![],'write':![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)]('analysis.energy.heatingScore',{'type':_0x2faf00(0x1b1),'common':{'name':'Heating\x20Score','type':_0x2faf00(0x178),'role':_0x2faf00(0x169),'read':!![],'write':![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)]('analysis.energy.forecast',{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x22d),'type':_0x2faf00(0x178),'role':_0x2faf00(0xf7),'read':!![],'write':![]},'native':{}}),await _0x50f500[_0x2faf00(0x254)](_0x2faf00(0x25a),{'type':_0x2faf00(0xf5),'common':{'name':'LTM'},'native':{}}),await _0x50f500[_0x2faf00(0x254)](LTM_DP_RAW_LOG,{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x1d1),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x50f500['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x2faf00(0x1b1),'common':{'name':'Daily\x20Digests','type':'string','role':_0x2faf00(0xf7),'read':!![],'write':![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)]('LTM.trainingData.sequences',{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x190),'type':_0x2faf00(0x178),'role':_0x2faf00(0xf7),'read':!![],'write':![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)](_0x2faf00(0x26b),{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x157),'type':_0x2faf00(0x178),'role':_0x2faf00(0xf7),'read':!![],'write':![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)](_0x2faf00(0x1e2),{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x1e7),'type':_0x2faf00(0x191),'role':_0x2faf00(0x24f),'read':!![],'write':!![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)](_0x2faf00(0x185),{'type':'state','common':{'name':_0x2faf00(0x1dd),'type':_0x2faf00(0x191),'role':_0x2faf00(0x24f),'read':!![],'write':!![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)]('analysis.isAlert',{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x272),'type':_0x2faf00(0x191),'role':_0x2faf00(0x151),'read':!![],'write':![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)](_0x2faf00(0x1a2),{'type':'state','common':{'name':_0x2faf00(0x1d3),'type':_0x2faf00(0x178),'role':_0x2faf00(0x1fb),'read':!![],'write':![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)](_0x2faf00(0x1ca),{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x1f4),'type':_0x2faf00(0x178),'role':_0x2faf00(0x169),'read':!![],'write':![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)](_0x2faf00(0x223),{'type':_0x2faf00(0x1b1),'common':{'name':'Pattern\x20Detected','type':_0x2faf00(0x191),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x50f500['setObjectNotExistsAsync']('analysis.automation.description',{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x1da),'type':_0x2faf00(0x178),'role':'text','read':!![],'write':![]},'native':{}}),await _0x50f500['setObjectNotExistsAsync'](_0x2faf00(0x1bf),{'type':'state','common':{'name':_0x2faf00(0x285),'type':_0x2faf00(0x178),'role':_0x2faf00(0xf7),'read':!![],'write':![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)](_0x2faf00(0xfe),{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x265),'type':_0x2faf00(0x178),'role':'text','read':!![],'write':![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)](_0x2faf00(0x1c9),{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x250),'type':_0x2faf00(0x178),'role':_0x2faf00(0x169),'read':!![],'write':![]},'native':{}}),await _0x50f500['setObjectNotExistsAsync']('analysis.automation.autoApply',{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x1ec),'type':_0x2faf00(0x191),'role':_0x2faf00(0x1c1),'read':!![],'write':!![]},'native':{}}),await _0x50f500[_0x2faf00(0x1fd)](_0x2faf00(0x252),{'type':_0x2faf00(0x1b1),'common':{'name':_0x2faf00(0x21a),'type':_0x2faf00(0x191),'role':_0x2faf00(0x24f),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x4137b5){const _0x2ce4a1=a0_0x146ad5;try{const _0x509dbe=await _0x4137b5[_0x2ce4a1(0x243)](SYSTEM_DP_MODE);_0x509dbe&&_0x509dbe['val']&&Object[_0x2ce4a1(0x201)](SYSTEM_MODES)[_0x2ce4a1(0x176)](_0x509dbe[_0x2ce4a1(0x244)])?_0x4137b5[_0x2ce4a1(0x214)]=_0x509dbe['val']:(_0x4137b5[_0x2ce4a1(0x214)]=SYSTEM_MODES[_0x2ce4a1(0x10a)],await _0x4137b5[_0x2ce4a1(0x262)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x2ce4a1(0x10a)],'ack':!![]}));}catch(_0x2742b5){_0x4137b5['currentSystemMode']=SYSTEM_MODES[_0x2ce4a1(0x10a)];}}async function loadRawEventLog(_0x5b3843){const _0x50ee4f=a0_0x146ad5;try{const _0x2fb401=await _0x5b3843[_0x50ee4f(0x243)](LTM_DP_RAW_LOG);if(_0x2fb401&&_0x2fb401[_0x50ee4f(0x244)])_0x5b3843['rawEventLog']=JSON[_0x50ee4f(0x144)](_0x2fb401[_0x50ee4f(0x244)]);}catch(_0x5b0342){_0x5b3843['rawEventLog']=[];}}async function saveRawEventLog(_0x4aada8){const _0x48c5c2=a0_0x146ad5;if(_0x4aada8[_0x48c5c2(0x124)][_0x48c5c2(0x133)]>RAW_LOG_MAX_SIZE)_0x4aada8['rawEventLog'][_0x48c5c2(0x282)](0x0,_0x4aada8['rawEventLog'][_0x48c5c2(0x133)]-RAW_LOG_MAX_SIZE);await _0x4aada8[_0x48c5c2(0x262)](LTM_DP_RAW_LOG,{'val':JSON[_0x48c5c2(0x24e)](_0x4aada8['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x1e5db0){const _0x3f9121=a0_0x146ad5;try{const _0x381d70=await _0x1e5db0['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x381d70&&_0x381d70[_0x3f9121(0x244)])_0x1e5db0[_0x3f9121(0x152)]=JSON[_0x3f9121(0x144)](_0x381d70[_0x3f9121(0x244)]);}catch(_0x2a216b){_0x1e5db0[_0x3f9121(0x152)]=[];}await updateBaselineStatus(_0x1e5db0);}async function saveDailyDigests(_0x173763,_0xb281c3=!![]){const _0x567a04=a0_0x146ad5,_0x18e02f=_0x173763['config'][_0x567a04(0x14a)]||0x3c;_0x173763[_0x567a04(0x152)][_0x567a04(0x133)]>_0x18e02f&&_0x173763[_0x567a04(0x152)][_0x567a04(0x282)](0x0,_0x173763[_0x567a04(0x152)][_0x567a04(0x133)]-_0x18e02f);await _0x173763[_0x567a04(0x262)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x173763[_0x567a04(0x152)]),'ack':!![]});if(_0xb281c3)await updateBaselineStatus(_0x173763);}async function updateAnalysisHistory(_0x4167c3,_0x35e3e4){const _0x40a2db=a0_0x146ad5;_0x4167c3['analysisHistory']['unshift'](_0x35e3e4);if(_0x4167c3[_0x40a2db(0x194)][_0x40a2db(0x133)]>HISTORY_MAX_SIZE)_0x4167c3[_0x40a2db(0x194)]['pop']();await _0x4167c3['setStateAsync'](_0x40a2db(0x23b),{'val':JSON[_0x40a2db(0x24e)](_0x4167c3['analysisHistory']),'ack':!![]});}async function updateBaselineStatus(_0x2b3959){const _0x1f79be=a0_0x146ad5;if(!_0x2b3959[_0x1f79be(0x166)]){await _0x2b3959['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x1f79be(0xf9),'ack':!![]});return;}const _0x2b980e=_0x2b3959[_0x1f79be(0x152)][_0x1f79be(0x133)]>=(_0x2b3959[_0x1f79be(0x207)][_0x1f79be(0x21e)]||0x7)?'Aktiv\x20('+_0x2b3959[_0x1f79be(0x152)][_0x1f79be(0x133)]+'\x20Tage)':_0x1f79be(0x13c)+_0x2b3959[_0x1f79be(0x152)][_0x1f79be(0x133)]+'/'+(_0x2b3959[_0x1f79be(0x207)][_0x1f79be(0x21e)]||0x7)+')';await _0x2b3959[_0x1f79be(0x262)](LTM_DP_BASELINE_STATUS,{'val':_0x2b980e,'ack':!![]});}async function initSensorSubscriptions(_0x23ff41){const _0x2259b=_0x23ff41['config']['devices'];if(_0x2259b)for(const _0x11004b of _0x2259b){await _0x23ff41['subscribeForeignStatesAsync'](_0x11004b['id']);}}async function initPresenceSubscriptions(_0x14aa61){const _0x88096e=a0_0x146ad5,_0x1a4089=_0x14aa61[_0x88096e(0x207)][_0x88096e(0x18f)];if(_0x1a4089)for(const _0x3fb293 of _0x1a4089){await _0x14aa61[_0x88096e(0x1b3)](_0x3fb293);}}async function setupTelegramListener(_0x82dbf4){const _0x1c4ad9=a0_0x146ad5,_0x22db8a=_0x82dbf4['config'][_0x1c4ad9(0x23c)];if(_0x82dbf4[_0x1c4ad9(0x207)][_0x1c4ad9(0xff)]&&_0x22db8a)await _0x82dbf4[_0x1c4ad9(0x1b3)](_0x22db8a+_0x1c4ad9(0x264));}async function checkWifiPresence(_0x4d7456){const _0x932612=a0_0x146ad5;try{const _0x55e5ba=_0x4d7456[_0x932612(0x207)][_0x932612(0x18f)]||[];let _0x4a46f7=![];const _0x5cbca5=[];for(const _0x1703f7 of _0x55e5ba){try{const _0x1bc914=await _0x4d7456[_0x932612(0x149)](_0x1703f7);_0x1bc914&&(_0x1bc914[_0x932612(0x244)]===!![]||_0x1bc914[_0x932612(0x244)]===_0x932612(0x283)||_0x1bc914['val']===0x1)&&(_0x4a46f7=!![],_0x5cbca5[_0x932612(0x1b0)](_0x1703f7));}catch(_0x391743){}}return await _0x4d7456[_0x932612(0x262)]('system.presenceWho',{'val':_0x5cbca5[_0x932612(0x26d)](',\x20'),'ack':!![]}),_0x4a46f7&&(_0x4d7456['exitTimer']&&(_0x4d7456[_0x932612(0x28f)]['info']('WiFi\x20Presence\x20detected.'),abortExitTimer(_0x4d7456)),!_0x4d7456[_0x932612(0x1a7)]&&_0x4d7456[_0x932612(0x214)]===SYSTEM_MODES[_0x932612(0x10a)]&&await setPresence(_0x4d7456,!![])),_0x4a46f7;}catch(_0x242919){return![];}}function startExitTimer(_0x386547){const _0x2aef53=a0_0x146ad5;abortExitTimer(_0x386547),_0x386547['isGracePeriodActive']=!![],_0x386547['exitGraceTimer']=setTimeout(()=>{const _0x1c3f66=a0_0x5204;_0x386547[_0x1c3f66(0x1c3)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x386547[_0x2aef53(0x1b8)]=setTimeout(()=>{const _0x3686ad=_0x2aef53;setPresence(_0x386547,![]),_0x386547[_0x3686ad(0x1b8)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x305a5e){const _0x4238a1=a0_0x146ad5;if(_0x305a5e[_0x4238a1(0x1b8)])clearTimeout(_0x305a5e['exitTimer']);if(_0x305a5e[_0x4238a1(0x1bb)])clearTimeout(_0x305a5e[_0x4238a1(0x1bb)]);_0x305a5e[_0x4238a1(0x1b8)]=null,_0x305a5e[_0x4238a1(0x1bb)]=null,_0x305a5e['isGracePeriodActive']=![];}async function setPresence(_0x855c73,_0x51ba98){const _0x2a3b28=a0_0x146ad5;if(_0x855c73[_0x2a3b28(0x1a7)]===_0x51ba98)return;_0x855c73[_0x2a3b28(0x1a7)]=_0x51ba98,await _0x855c73[_0x2a3b28(0x262)]('system.isPresent',{'val':_0x51ba98,'ack':!![]});}async function executeAutomationAction(_0x4b43c6){const _0x43d8ff=a0_0x146ad5;try{const _0x2cb347=await _0x4b43c6[_0x43d8ff(0x243)]('analysis.automation.targetId'),_0x1c8ec1=await _0x4b43c6[_0x43d8ff(0x243)](_0x43d8ff(0x1c9));if(_0x2cb347&&_0x2cb347[_0x43d8ff(0x244)]&&_0x1c8ec1){const _0x3a838f=_0x2cb347[_0x43d8ff(0x244)];let _0x5842f0=_0x1c8ec1[_0x43d8ff(0x244)];try{_0x5842f0=JSON[_0x43d8ff(0x144)](_0x5842f0);}catch(_0x2a7f41){}_0x4b43c6[_0x43d8ff(0x28f)][_0x43d8ff(0x251)]('ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x3a838f+'\x20=\x20'+_0x5842f0),await _0x4b43c6[_0x43d8ff(0x120)](_0x3a838f,_0x5842f0);}else _0x4b43c6[_0x43d8ff(0x28f)][_0x43d8ff(0x27b)]('ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x29a21c){_0x4b43c6[_0x43d8ff(0x28f)][_0x43d8ff(0x289)](_0x43d8ff(0x12f)+_0x29a21c[_0x43d8ff(0x1cf)]);}}async function processSensorEvent(_0x153e1d,_0x1e334e,_0x5e56dd,_0x7dfe15){const _0x528c97=a0_0x146ad5;if(!_0x7dfe15)return;const _0xb078c1=_0x5e56dd[_0x528c97(0x244)],_0x6abf77=Date[_0x528c97(0x112)](),_0x41a638=_0x153e1d[_0x528c97(0x1d4)][_0x1e334e];_0x153e1d['sensorLastValues'][_0x1e334e]=_0xb078c1;if(!_0x7dfe15[_0x528c97(0x279)]&&_0x41a638!=undefined&&_0x41a638==_0xb078c1)return;const _0x4425df=(_0x7dfe15[_0x528c97(0x1a1)]||'')[_0x528c97(0x24b)](),_0x3011dc=_0x4425df['includes'](_0x528c97(0x217))||_0x4425df[_0x528c97(0x176)](_0x528c97(0x1d2))||_0x4425df[_0x528c97(0x176)](_0x528c97(0x1c4))||_0x4425df['includes']('heizung');_0x153e1d[_0x528c97(0x166)]&&_0x3011dc&&recordThermodynamics(_0x153e1d,_0x1e334e,_0xb078c1,_0x7dfe15[_0x528c97(0x17f)]);const _0x5c76be={'timestamp':_0x6abf77,'id':_0x1e334e,'name':_0x7dfe15[_0x528c97(0x234)],'type':_0x7dfe15[_0x528c97(0x1a1)],'location':_0x7dfe15[_0x528c97(0x17f)],'value':_0xb078c1};_0x153e1d['eventHistory'][_0x528c97(0x1bd)](_0x5c76be);if(_0x153e1d[_0x528c97(0x108)][_0x528c97(0x133)]>HISTORY_MAX_SIZE)_0x153e1d[_0x528c97(0x108)]['pop']();await _0x153e1d[_0x528c97(0x262)]('events.lastEvent',{'val':JSON[_0x528c97(0x24e)](_0x5c76be),'ack':!![]}),await _0x153e1d[_0x528c97(0x262)](_0x528c97(0x113),{'val':JSON[_0x528c97(0x24e)](_0x153e1d[_0x528c97(0x108)]),'ack':!![]});_0x153e1d[_0x528c97(0x166)]&&(_0x153e1d[_0x528c97(0x124)][_0x528c97(0x1b0)](_0x5c76be),await saveRawEventLog(_0x153e1d),recordSequence(_0x153e1d,_0x5c76be));if(_0x7dfe15[_0x528c97(0x245)]&&_0xb078c1===!![]){if(_0x153e1d[_0x528c97(0x1a7)]&&!_0x153e1d[_0x528c97(0x1c3)])startExitTimer(_0x153e1d);else{if(!_0x153e1d[_0x528c97(0x1a7)])setPresence(_0x153e1d,!![]);}}else{if(_0x7dfe15[_0x528c97(0x1a1)]==='motion'&&_0xb078c1===!![]){if(_0x153e1d[_0x528c97(0x1b8)])abortExitTimer(_0x153e1d);if(!_0x153e1d[_0x528c97(0x1a7)]&&_0x153e1d['currentSystemMode']===SYSTEM_MODES[_0x528c97(0x10a)])setPresence(_0x153e1d,!![]);}}}async function recordThermodynamics(_0xeb7cbf,_0x33e59f,_0x4c04dd,_0x5c1c86){const _0x536f02=a0_0x146ad5,_0x59ae5c=await getOutsideTemperatureNumeric(_0xeb7cbf),_0x45dbe2=await _0xeb7cbf[_0x536f02(0x243)](_0x536f02(0x26b));let _0x401205=[];if(_0x45dbe2&&_0x45dbe2[_0x536f02(0x244)])try{_0x401205=JSON[_0x536f02(0x144)](_0x45dbe2[_0x536f02(0x244)]);}catch(_0x41d05e){}_0x401205[_0x536f02(0x1b0)]({'ts':Date[_0x536f02(0x112)](),'room':_0x5c1c86||_0x536f02(0x1f2),'t_in':_0x4c04dd,'t_out':_0x59ae5c});if(_0x401205[_0x536f02(0x133)]>THERMO_LOG_SIZE)_0x401205[_0x536f02(0x288)]();await _0xeb7cbf[_0x536f02(0x262)](_0x536f02(0x26b),{'val':JSON[_0x536f02(0x24e)](_0x401205),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x5e5e8b){const _0x2e8e5f=a0_0x146ad5;if(_0x5e5e8b[_0x2e8e5f(0x207)][_0x2e8e5f(0x22c)])try{const _0x50d496=await _0x5e5e8b['getForeignStateAsync'](_0x5e5e8b[_0x2e8e5f(0x207)][_0x2e8e5f(0x22c)]);if(_0x50d496&&_0x50d496[_0x2e8e5f(0x244)]!==undefined&&_0x50d496[_0x2e8e5f(0x244)]!==null)return parseFloat(_0x50d496[_0x2e8e5f(0x244)]);}catch(_0x161105){}const _0x1778fb=_0x5e5e8b['config'][_0x2e8e5f(0x270)];if(!_0x5e5e8b[_0x2e8e5f(0x207)][_0x2e8e5f(0x145)]||!_0x1778fb)return null;try{let _0x5ef9f9='';if(_0x1778fb[_0x2e8e5f(0x176)](_0x2e8e5f(0x230)))_0x5ef9f9=_0x1778fb+_0x2e8e5f(0x216);else{if(_0x1778fb[_0x2e8e5f(0x176)](_0x2e8e5f(0x14f)))_0x5ef9f9=_0x1778fb+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x1778fb[_0x2e8e5f(0x176)]('openweathermap'))_0x5ef9f9=_0x1778fb+'.forecast.current.temperature';else{if(_0x1778fb[_0x2e8e5f(0x176)](_0x2e8e5f(0x1b9)))_0x5ef9f9=_0x1778fb+_0x2e8e5f(0x1e0);}}}if(_0x5ef9f9){const _0x4919f5=await _0x5e5e8b[_0x2e8e5f(0x149)](_0x5ef9f9);if(_0x4919f5&&_0x4919f5[_0x2e8e5f(0x244)]!==undefined&&_0x4919f5[_0x2e8e5f(0x244)]!==null)return parseFloat(_0x4919f5['val']);}}catch(_0x4ddd75){}return null;}async function recordSequence(_0x305c01,_0xf028c5){const _0x301b9a=a0_0x146ad5,_0xc4f7b1=(_0xf028c5[_0x301b9a(0x1a1)]||'')[_0x301b9a(0x24b)](),_0x11190e=[_0x301b9a(0x1be),_0x301b9a(0x1d6),_0x301b9a(0x130),_0x301b9a(0x27c),'occupancy',_0x301b9a(0x203),_0x301b9a(0x287),_0x301b9a(0x1af),_0x301b9a(0x16a),'contact','kontakt',_0x301b9a(0x1ba),_0x301b9a(0x197),_0x301b9a(0x1c1),_0x301b9a(0x24c),_0x301b9a(0x136),_0x301b9a(0x17e)];if(!_0x11190e[_0x301b9a(0xfd)](_0xe1ae3a=>_0xc4f7b1[_0x301b9a(0x176)](_0xe1ae3a)))return;if(!_0xf028c5['value'])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x301b9a(0x1b0)]({'loc':_0xf028c5[_0x301b9a(0x17f)]||_0x301b9a(0x1f2),'id':_0xf028c5['id'],'ts':Date[_0x301b9a(0x112)]()}),sequenceTimer=setTimeout(async()=>{if(activeSequence['length']>0x1)await saveCompletedSequence(_0x305c01);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x3443fc){const _0x50d19f=a0_0x146ad5;try{const _0xdcd3fd=await _0x3443fc['getStateAsync'](_0x50d19f(0xfa));let _0x1c2dfd=[];if(_0xdcd3fd&&_0xdcd3fd[_0x50d19f(0x244)])try{_0x1c2dfd=JSON['parse'](_0xdcd3fd[_0x50d19f(0x244)]);}catch(_0x4f8418){}const _0x589a78=activeSequence[0x0]['ts'],_0x484f4d=activeSequence[_0x50d19f(0x1fa)](_0x45c6c4=>({'loc':_0x45c6c4[_0x50d19f(0x1eb)],'t_delta':Math['round']((_0x45c6c4['ts']-_0x589a78)/0x3e8)})),_0x3d956d={'timestamp':new Date(_0x589a78)['toISOString'](),'steps':_0x484f4d,'duration':Math[_0x50d19f(0x192)]((activeSequence[activeSequence[_0x50d19f(0x133)]-0x1]['ts']-_0x589a78)/0x3e8),'daytime':new Date(_0x589a78)[_0x50d19f(0x248)]()};_0x1c2dfd['push'](_0x3d956d);if(_0x1c2dfd[_0x50d19f(0x133)]>MAX_TRAINING_SET_SIZE)_0x1c2dfd['shift']();await _0x3443fc['setStateAsync'](_0x50d19f(0xfa),{'val':JSON[_0x50d19f(0x24e)](_0x1c2dfd),'ack':!![]}),runSecurityCheck(_0x3443fc,_0x3d956d);}catch(_0xf5863d){_0x3443fc[_0x50d19f(0x28f)][_0x50d19f(0x289)](_0x50d19f(0x218)+_0xf5863d[_0x50d19f(0x1cf)]);}}function runSecurityCheck(_0x35bba1,_0x573723){const _0x2a535a=a0_0x146ad5;if(!_0x35bba1[_0x2a535a(0x166)])return;sendToPython(_0x35bba1,_0x2a535a(0x181),{'sequence':_0x573723});}async function createDailyDigest(_0x3e2f19){const _0x308e51=a0_0x146ad5;if(!_0x3e2f19[_0x308e51(0x166)])return;await _0x3e2f19[_0x308e51(0x262)](LTM_DP_STATUS,{'val':_0x308e51(0x232),'ack':!![]});if(!_0x3e2f19[_0x308e51(0x122)]||_0x3e2f19[_0x308e51(0x124)][_0x308e51(0x133)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x3e2f19[_0x308e51(0x262)](LTM_DP_STATUS,{'val':_0x308e51(0x13d),'ack':!![]});return;}const _0x645779=JSON[_0x308e51(0x144)](JSON[_0x308e51(0x24e)](_0x3e2f19[_0x308e51(0x124)])),_0x158139=_0x645779[_0x308e51(0x133)],_0x5b555e=_0x308e51(0x131)+JSON['stringify'](_0x645779);try{const _0x4bc0d9=await _0x3e2f19[_0x308e51(0x122)][_0x308e51(0x212)](_0x5b555e),_0x4c0848=JSON['parse'](_0x4bc0d9[_0x308e51(0x246)][_0x308e51(0x169)]()[_0x308e51(0x135)](/```json|```/g,'')[_0x308e51(0x249)]()),_0x2e391d={'timestamp':new Date()['toISOString'](),'eventCount':_0x158139,'summary':_0x4c0848[_0x308e51(0xfc)]||_0x308e51(0x121),'activityLevel':_0x4c0848[_0x308e51(0x25b)]||'normal','systemMode':_0x3e2f19['currentSystemMode']};_0x3e2f19[_0x308e51(0x152)][_0x308e51(0x1b0)](_0x2e391d),await saveDailyDigests(_0x3e2f19),_0x3e2f19[_0x308e51(0x124)]=[],await saveRawEventLog(_0x3e2f19),await _0x3e2f19[_0x308e51(0x262)](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x3e2f19[_0x308e51(0x166)])sendToPython(_0x3e2f19,_0x308e51(0x1a9),{'digest':_0x2e391d});}catch(_0xa8e95e){_0x3e2f19[_0x308e51(0x28f)][_0x308e51(0x289)](_0xa8e95e[_0x308e51(0x1cf)]);}}async function runBaselineDriftAnalysis(_0x261a05){const _0x242093=a0_0x146ad5;if(!_0x261a05['isProVersion']||!_0x261a05['geminiModel'])return;const _0x292c6e=_0x261a05[_0x242093(0x207)][_0x242093(0x280)]||0xe;if(_0x261a05['dailyDigests'][_0x242093(0x133)]<_0x292c6e+0x7){await _0x261a05[_0x242093(0x262)](LTM_DP_DRIFT_STATUS,{'val':_0x242093(0x19a),'ack':!![]});return;}const _0xe2101e=_0x261a05[_0x242093(0x152)][_0x242093(0x236)](-_0x292c6e),_0xbf507f=_0x261a05['dailyDigests']['slice'](0x0,_0x261a05[_0x242093(0x152)][_0x242093(0x133)]-_0x292c6e),_0xcaab7d='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0x242093(0x24e)](_0xbf507f)+_0x242093(0x23d)+JSON[_0x242093(0x24e)](_0xe2101e);try{const _0x32694a=await _0x261a05[_0x242093(0x122)][_0x242093(0x212)](_0xcaab7d),_0x1b56d2=JSON['parse'](_0x32694a[_0x242093(0x246)]['text']()['replace'](/```json|```/g,'')[_0x242093(0x249)]());_0x1b56d2['baselineDrift']&&(await _0x261a05['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x1b56d2[_0x242093(0x160)],'ack':!![]}),await _0x261a05[_0x242093(0x262)](LTM_DP_DRIFT_DETAILS,{'val':_0x1b56d2['driftDetails'],'ack':!![]}),await _0x261a05[_0x242093(0x262)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x242093(0x112)](),'ack':!![]}));}catch(_0x2fd497){}}async function sendMorningBriefing(_0x3ed9b2){const _0x4dcb2f=a0_0x146ad5;if(!_0x3ed9b2['geminiModel'])return;try{const _0x11d3f8=_0x4dcb2f(0x235),_0x12865e=await _0x3ed9b2[_0x4dcb2f(0x122)][_0x4dcb2f(0x212)](_0x11d3f8),_0x102d4e=_0x12865e[_0x4dcb2f(0x246)][_0x4dcb2f(0x169)]();sendNotification(_0x3ed9b2,_0x4dcb2f(0x1a3)+_0x102d4e);}catch(_0x4ea11a){_0x3ed9b2['log'][_0x4dcb2f(0x289)](_0x4dcb2f(0x11b)+_0x4ea11a[_0x4dcb2f(0x1cf)]);}}function stopPythonService(_0x4fcbea){const _0x23c67b=a0_0x146ad5;if(_0x4fcbea[_0x23c67b(0x132)]){try{_0x4fcbea[_0x23c67b(0x132)][_0x23c67b(0x105)]();}catch(_0x279327){}_0x4fcbea[_0x23c67b(0x132)]=null;}}function sendToPython(_0x5085a3,_0x5e1243,_0x25f492={}){const _0x5de32d=a0_0x146ad5;if(!_0x5085a3[_0x5de32d(0x132)]||!_0x5085a3[_0x5de32d(0x132)][_0x5de32d(0x11c)][_0x5de32d(0x1b2)])return;const _0x31c230=JSON[_0x5de32d(0x24e)]({'command':_0x5e1243,..._0x25f492});try{_0x5085a3[_0x5de32d(0x132)][_0x5de32d(0x11c)]['write'](_0x31c230+'\x0a');}catch(_0x392f60){}}function a0_0x5308(){const _0x3da0ec=['Training\x20Status','Event\x20History','window','push','state','writable','subscribeForeignStatesAsync','getEnums','enum','VACATION','debug','exitTimer','weatherunderground','light','exitGraceTimer','keys','unshift','motion','analysis.automation.detectedPatterns','instance','switch','.\x20WETTER:\x20','isGracePeriodActive','klima','toFixed','analysis.training.triggerTopology','common','dependencyInstallInProgress','analysis.automation.targetValue','analysis.activitySummary','subscribeStates','LTM.baselineStatus','9849UBxnET','TRAIN_ENERGY','message','python3','Raw\x20Log','temperatur','Alert\x20Reason','sensorLastValues','reason','bewegung','Topology\x20Error:\x20','close','Regel\x20erkannt:\x20','Description','analysis.health.trendDiagnosis','cogni-living','Trigger\x20Briefing','AI\x20Training','SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20','.forecast.current.temp','.\x20ANWESEND:\x20','analysis.trigger','floor','triggerDailyDigest','analysis.security.lastScore','autoApply','Trigger\x20Analysis','events.lastEvent','normal','existsSync','loc','Auto\x20Apply','lastAlertState','üêç\x20Python\x20Pong','üß™\x20Simulating\x20Butler\x20Proposal:\x20','pop','analysis.training.status','Unknown','Current\x20Threshold','Activity\x20Summary','service.py','geminiApiKey','getCalendarNames','aiPersona','events.history_debug_00','map','text.alarm','ltmJob','setObjectNotExistsAsync','cancel','\x20->\x20','enum.functions.*','values','devices','door','toString','BUILD_TOPOLOGY','Last\x20raw\x20event','config','analysis.security','confidence','change_percent','systemConfig','LTM.driftAnalysis','LTM.dailyDigests','system','analysisTimer','Sec-Training\x20started...','Fokus\x20auf\x20Komfort.','generateContent','value','currentSystemMode','üõãÔ∏è\x20BUTLER:\x20Found\x20','.Current.Temperature','temperature','[RECORDER]\x20Error:\x20','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','Trigger\x20Action','Last\x20Check','getGenerativeModel','analysisInterval','minDaysForBaseline','bind','stateChange','enum.rooms.*','TOPOLOGY_RESULT','analysis.automation.patternDetected','4176748mUxJAZ','Build\x20Topology','Gemini\x20AI\x20initialized.','Train\x20Health','ENERGY_TRAIN_RESULT','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','5yFDCWT','analysis.training','outdoorSensorId','Temperature\x20Forecast','./lib/scheduler','analysis.automation.autoApply','accuweather','analysis.isAlert','Started...','triggerBriefing','name','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','slice','stdout','delObjectAsync','command','number','analysis.analysisHistory','notifyTelegramInstance','\x0aSTB:\x20','setupLtmScheduler','rule','detected','substring','GUEST','getStateAsync','val','isExit','response','models/gemini-flash-latest','getHours','trim','Keine\x20Wetterdaten\x20verf√ºgbar.','toLowerCase','schalter','Restoring\x20sensor\x20cache...','stringify','button','Target\x20Value','info','analysis.automation.triggerAction','analysis.energy.forecast','extendObjectAsync','PYTHON_EXE','analysis.energy.insulationScore','.\x20KONTEXT:\x20','Missing\x20data',')\x20-\x20SAFE\x20BOOT','LTM','activityLevel','payload','üß†\x20Triggering\x20Security\x20Training...','LTM.processingStatus','Who\x20is\x20present?','Today\x20Vector\x20(15m)','cogni-living\x20adapter\x20starting\x20(v','setStateAsync','getFullYear','.communicate.request','Target\x20ID','apply','(((.+)+)+)+$','licenseKey','Trend','Anomaly\x20Score','LTM.trainingData.thermodynamics','namespace','join','getOverviewData','analysis.energy.heatingScore','weatherInstance','details','Alert\x20Status','analysis.automation.description','Train\x20Comfort','Trend\x20Value','search','analysis.training.triggerEnergy','Gemini\x20Init\x20Error:\x20','logDuplicates','python_service','warn','presence','generic','party','analysis.health.lastCheck','ltmStbWindowDays','PRIORIT√ÑT:\x20Gesundheit/AAL.','splice','online','PARTY','Detected\x20Patterns','alertReason','t√ºr','shift','error','\x0aGrund:\x20','system.mode','analysis.health.todayVector','targetValue','6728zdcLDO','log','analysis.health','fill','GAIT_RESULT','channel','Training\x20Error:\x20','json','analysis.security.topologyMatrix','Deaktiviert\x20(Pro-Feature)','LTM.trainingData.sequences','sendTo','summary','some','analysis.automation.targetId','notifyTelegramEnabled','analysis.security.currentThreshold','child_process','callback','TRAIN_HEALTH','data','kill','HEALTH_RESULT','.\x20EMERGENCY:\x20','eventHistory','automation.triggerAction','NORMAL','rating','Analysiere\x20ausgewogen.','analysis.training.triggerHealth','Kein\x20API\x20Key.','analysis.health.trendValue','.forecast.current.state','exports','now','events.history','checkAndInstall','No\x20instance','üöÄ\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','setupModeResetScheduler','getForeignObjectsAsync','onReady','apiKey','Briefing\x20Error:\x20','stdin','heating','üìù\x20Feedback\x20received:\x20','getMonth','setForeignStateAsync','Digest','geminiModel','Anomaly\x20Detected','rawEventLog','üõãÔ∏è\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','880451zRctgC','setState','toISOString','LTM.driftAnalysis.lastCheck','@google/generative-ai','briefingJob','System','main','inactivityThresholdHours','BUTLER\x20Execution\x20Error:\x20','pr√§senz','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','pythonProcess','length','onStateChange','replace','dimmer','.\x20SYSTEM_MODE:\x20','getObjectAsync','split','onMessage','targetId','Lernphase\x20(','Skipped\x20(No\x20AI\x20or\x20Data)','ü§ñ\x20Autopilot:\x20Running\x20periodic\x20analysis...','getTime','unload','isEmergency','onUnload','Security\x20Monitor','parse','useWeather','timestamp','telegram','15840549GwivCH','getForeignStateAsync','ltmLtbWindowDays','TREND_RESULT','analysis.security.lastCheck','Err:\x20','analysis.lastResult','daswetter','\x20=\x20','indicator.alarm','dailyDigests','‚úÖ\x20HEALTH\x20TRAINED.','success','analysis.health.gaitSpeed','from','Thermodynamics','startsWith','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','calendarInstance','LTM.driftAnalysis.baselineDrift','KI-Modell\x20nicht\x20initialisiert','is_anomaly','‚ö†Ô∏è\x20ALARM:\x20','LTM.rawEventLog','baselineDrift','¬∞C,\x20','driftAnalysisTimer','date','Train\x20Security','analysis.history_debug_00','isProVersion','\x20new\x20patterns.','forEach','text','fenster','Kalender\x20deaktiviert.','simulateButler','HEALTH_TRAIN_RESULT','system.presenceWho','find','190104pDmJaA','application/json','analysis.training.triggerSecurity','üï∏Ô∏è\x20Building\x20Topology\x20Matrix...','./lib/installer','./lib/scanner','includes','TRAIN_SECURITY','string','Energy\x20Intelligence','ANALYZE_TREND','TRAIN_COMFORT','getMinutes','Failed:\x20','lampe','location','ENERGY_PREDICT_RESULT','ANALYZE_SEQUENCE','Adapter','status','communicate.request','analysis.triggerBriefing','LTM.driftAnalysis.driftDetails','getLtmData','System\x20Mode','threshold','üõãÔ∏è\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','genAI','automationProposal','2304444alUAYl','insulation','presenceDevices','Sequences','boolean','round','isAlert','analysisHistory','setHours','modeResetJob','licht','[PYTHON]\x20','Keine\x20Details.','N/A\x20(Learning)','testContext','Error\x20launching\x20Python:\x20','object','COMFORT_RESULT','description','analysis.training.triggerComfort','type','analysis.alertReason','üåÖ\x20Morning\x20Briefing:\x0a','testApiKey','vacation','analysis.health.isAnomaly','isPresent','N/A','ANALYZE_HEALTH','ack','3886128PBKKaI','Keine\x20Termine.'];a0_0x5308=function(){return _0x3da0ec;};return a0_0x5308();}function runPythonHealthCheck(_0x3c46a2){const _0x105848=a0_0x146ad5;if(!_0x3c46a2[_0x105848(0x152)]||_0x3c46a2[_0x105848(0x152)]['length']<0x2)return;const _0x3197ca=_0x3c46a2[_0x105848(0x152)][_0x105848(0x1fa)](_0x3f788e=>{const _0x2b2237=(_0x3f788e['activityLevel']||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x2b2237]||0x32;});sendToPython(_0x3c46a2,_0x105848(0x17a),{'values':_0x3197ca,'tag':'Activity-Level'});}function handlePythonResult(_0xaf1c81,_0x30b36f){const _0x526fe0=a0_0x146ad5;if(_0x30b36f[_0x526fe0(0x1a1)]==='PONG')_0xaf1c81[_0x526fe0(0x28f)][_0x526fe0(0x1b7)](_0x526fe0(0x1ee));else{if(_0x30b36f[_0x526fe0(0x1a1)]==='SECURITY_RESULT'){const {anomaly_score:_0x1800e3,is_anomaly:_0x16c2cd,threshold:_0x2aba59,explanation:_0x2c2896}=_0x30b36f[_0x526fe0(0x25c)];_0xaf1c81[_0x526fe0(0x28f)][_0x526fe0(0x251)]('üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20'+_0x1800e3[_0x526fe0(0x1c5)](0x5)+_0x526fe0(0x1ff)+(_0x16c2cd?'ANOMALY':'OK')),_0xaf1c81[_0x526fe0(0x262)]('analysis.security.lastScore',{'val':_0x1800e3,'ack':!![]}),_0xaf1c81[_0x526fe0(0x262)](_0x526fe0(0x14c),{'val':new Date()[_0x526fe0(0x128)](),'ack':!![]});if(_0x2aba59)_0xaf1c81[_0x526fe0(0x262)]('analysis.security.currentThreshold',{'val':_0x2aba59,'ack':!![]});if(_0x16c2cd){let _0x5f26db=_0x526fe0(0x219)+_0x1800e3['toFixed'](0x4)+')';if(_0x2c2896&&_0x2c2896!==_0x526fe0(0x1f2))_0x5f26db+=_0x526fe0(0x28a)+_0x2c2896;_0xaf1c81[_0x526fe0(0x262)](_0x526fe0(0x231),{'val':!![],'ack':!![]}),_0xaf1c81['setStateAsync'](_0x526fe0(0x1a2),{'val':_0x5f26db,'ack':!![]}),sendNotification(_0xaf1c81,'‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20'+_0x5f26db,![],!![]);}}else{if(_0x30b36f[_0x526fe0(0x1a1)]==='TRAINING_COMPLETE'){const _0x1f2bda=_0x30b36f[_0x526fe0(0x25c)][_0x526fe0(0x271)]||'',_0x47097c=_0x30b36f[_0x526fe0(0x25c)][_0x526fe0(0x189)],_0x4f07d8=_0x30b36f[_0x526fe0(0x25c)]['success']?'Success:\x20'+new Date()['toLocaleTimeString']()+'\x20('+_0x1f2bda+')':_0x526fe0(0x17d)+_0x30b36f[_0x526fe0(0x25c)][_0x526fe0(0x1d5)];_0xaf1c81[_0x526fe0(0x262)]('analysis.training.status',{'val':_0x4f07d8,'ack':!![]});if(_0x30b36f['payload']['success']&&_0x47097c)_0xaf1c81[_0x526fe0(0x262)](_0x526fe0(0x100),{'val':_0x47097c,'ack':!![]});}else{if(_0x30b36f[_0x526fe0(0x1a1)]===_0x526fe0(0x19e)){const {patterns:_0x162c41}=_0x30b36f[_0x526fe0(0x25c)];if(_0x162c41&&_0x162c41[_0x526fe0(0x133)]>0x0){_0xaf1c81[_0x526fe0(0x28f)][_0x526fe0(0x251)](_0x526fe0(0x215)+_0x162c41[_0x526fe0(0x133)]+_0x526fe0(0x167)),_0xaf1c81[_0x526fe0(0x262)](_0x526fe0(0x1bf),{'val':JSON[_0x526fe0(0x24e)](_0x162c41),'ack':!![]});const _0x1805c2=_0x162c41[0x0],_0x1f0682=_0x526fe0(0x1d9)+_0x1805c2[_0x526fe0(0x23f)]+'\x20('+(_0x1805c2[_0x526fe0(0x209)]*0x64)['toFixed'](0x0)+'%)';_0xaf1c81['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0xaf1c81[_0x526fe0(0x262)]('analysis.automation.description',{'val':_0x1f0682,'ack':!![]});}else _0xaf1c81['log'][_0x526fe0(0x251)](_0x526fe0(0x18a)),_0xaf1c81[_0x526fe0(0x262)](_0x526fe0(0x223),{'val':![],'ack':!![]}),_0xaf1c81['setStateAsync'](_0x526fe0(0x1bf),{'val':'[]','ack':!![]});}else{if(_0x30b36f[_0x526fe0(0x1a1)]===_0x526fe0(0x228)){if(_0x30b36f[_0x526fe0(0x25c)]['success'])try{const _0x4a105a=JSON[_0x526fe0(0x144)](_0x30b36f['payload']['details']);if(_0x4a105a[_0x526fe0(0x18e)])_0xaf1c81[_0x526fe0(0x262)](_0x526fe0(0x256),{'val':JSON[_0x526fe0(0x24e)](_0x4a105a[_0x526fe0(0x18e)]),'ack':!![]});if(_0x4a105a[_0x526fe0(0x11d)])_0xaf1c81[_0x526fe0(0x262)](_0x526fe0(0x26f),{'val':JSON[_0x526fe0(0x24e)](_0x4a105a[_0x526fe0(0x11d)]),'ack':!![]});}catch(_0x4018b5){}}else{if(_0x30b36f[_0x526fe0(0x1a1)]===_0x526fe0(0x16d)){if(_0x30b36f[_0x526fe0(0x25c)][_0x526fe0(0x154)])_0xaf1c81['log']['info'](_0x526fe0(0x153));}else{if(_0x30b36f[_0x526fe0(0x1a1)]===_0x526fe0(0x106))_0xaf1c81[_0x526fe0(0x262)](_0x526fe0(0x27f),{'val':new Date()[_0x526fe0(0x128)](),'ack':!![]}),_0xaf1c81[_0x526fe0(0x262)]('analysis.health.isAnomaly',{'val':_0x30b36f[_0x526fe0(0x25c)][_0x526fe0(0x15d)],'ack':!![]});else{if(_0x30b36f['type']===_0x526fe0(0x14b))_0xaf1c81[_0x526fe0(0x262)](_0x526fe0(0x1db),{'val':_0x30b36f[_0x526fe0(0x25c)]['diagnosis'],'ack':!![]}),_0xaf1c81[_0x526fe0(0x262)](_0x526fe0(0x10f),{'val':_0x30b36f['payload'][_0x526fe0(0x20a)],'ack':!![]});else{if(_0x30b36f[_0x526fe0(0x1a1)]===_0x526fe0(0xf4)){const {speed_trend:_0x1920a7}=_0x30b36f['payload'];if(_0x1920a7!==undefined)_0xaf1c81[_0x526fe0(0x262)](_0x526fe0(0x155),{'val':_0x1920a7,'ack':!![]});}else{if(_0x30b36f['type']===_0x526fe0(0x180)){const {forecast:_0xb0a00c}=_0x30b36f['payload'];if(_0xb0a00c)_0xaf1c81[_0x526fe0(0x262)](_0x526fe0(0x253),{'val':JSON[_0x526fe0(0x24e)](_0xb0a00c),'ack':!![]});}else{if(_0x30b36f[_0x526fe0(0x1a1)]===_0x526fe0(0x222)){const {data:_0x1b7ab4}=_0x30b36f[_0x526fe0(0x25c)];_0x1b7ab4&&(_0xaf1c81[_0x526fe0(0x28f)][_0x526fe0(0x251)]('üï∏Ô∏è\x20Topology\x20Map\x20updated.'),_0xaf1c81[_0x526fe0(0x262)](_0x526fe0(0xf8),{'val':JSON['stringify'](_0x1b7ab4),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x2e4a5b){const _0x354eba=a0_0x146ad5;let _0x518061=_0x354eba(0x1d0);if(fs[_0x354eba(0x1ea)](installer[_0x354eba(0x255)]))_0x518061=installer['PYTHON_EXE'];try{const _0x1c5708=path[_0x354eba(0x26d)](__dirname,_0x354eba(0x27a),_0x354eba(0x1f5));_0x2e4a5b[_0x354eba(0x132)]=spawn(_0x518061,[_0x1c5708]),_0x2e4a5b[_0x354eba(0x132)][_0x354eba(0x237)]['on'](_0x354eba(0x104),_0x446079=>{const _0x36d38c=_0x354eba,_0x309a01=_0x446079[_0x36d38c(0x204)]()['split']('\x0a');_0x309a01[_0x36d38c(0x168)](_0x311f3b=>{const _0x4a4863=_0x36d38c,_0x14a56c=_0x311f3b[_0x4a4863(0x249)]();if(!_0x14a56c)return;if(_0x14a56c[_0x4a4863(0x158)]('[LOG]'))_0x2e4a5b['log'][_0x4a4863(0x1b7)](_0x4a4863(0x198)+_0x14a56c[_0x4a4863(0x241)](0x5)[_0x4a4863(0x249)]());else{if(_0x14a56c[_0x4a4863(0x158)]('[RESULT]'))try{const _0x4c02b3=JSON[_0x4a4863(0x144)](_0x14a56c[_0x4a4863(0x241)](0x8)[_0x4a4863(0x249)]());handlePythonResult(_0x2e4a5b,_0x4c02b3);}catch(_0x35468a){}}});}),_0x2e4a5b[_0x354eba(0x132)]['on'](_0x354eba(0x1d8),_0x6caa9c=>{_0x2e4a5b['pythonProcess']=null;});}catch(_0x539356){_0x2e4a5b[_0x354eba(0x28f)][_0x354eba(0x289)](_0x354eba(0x19c)+_0x539356[_0x354eba(0x1cf)]);}}async function runAutopilot(_0x19843d){const _0x56acf7=a0_0x146ad5;_0x19843d[_0x56acf7(0x28f)][_0x56acf7(0x1b7)](_0x56acf7(0x13e)),await runGeminiAnalysis(_0x19843d),updateHealthVector(_0x19843d),triggerGaitAnalysis(_0x19843d),triggerEnergyPrediction(_0x19843d);}async function triggerGaitAnalysis(_0xd3b77a){const _0x14cbdf=a0_0x146ad5;if(!_0xd3b77a[_0x14cbdf(0x166)])return;try{const _0x177e1d=await _0xd3b77a[_0x14cbdf(0x243)](_0x14cbdf(0xfa));_0x177e1d&&_0x177e1d['val']&&sendToPython(_0xd3b77a,'ANALYZE_GAIT',{'sequences':JSON[_0x14cbdf(0x144)](_0x177e1d['val'])});}catch(_0x3e1ad1){}}async function triggerEnergyPrediction(_0x11fc29){const _0x357990=a0_0x146ad5;if(!_0x11fc29[_0x357990(0x166)])return;try{const _0xf442ff=await getOutsideTemperatureNumeric(_0x11fc29);if(_0xf442ff===null)return;const _0x2e433d={},_0x26ef0d=_0x11fc29[_0x357990(0x207)][_0x357990(0x202)]||[];for(const _0x35c6d9 of _0x26ef0d){if(_0x35c6d9[_0x357990(0x1a1)]===_0x357990(0x217)&&_0x35c6d9[_0x357990(0x17f)]){const _0x549fa9=_0x11fc29[_0x357990(0x1d4)][_0x35c6d9['id']];if(_0x549fa9!==undefined)_0x2e433d[_0x35c6d9['location']]=_0x549fa9;}}Object[_0x357990(0x1bc)](_0x2e433d)['length']>0x0&&sendToPython(_0x11fc29,'PREDICT_ENERGY',{'current_temps':_0x2e433d,'t_out':_0xf442ff});}catch(_0x40dfe0){}}function updateHealthVector(_0x457827){const _0xf2022=a0_0x146ad5;if(!_0x457827[_0xf2022(0x124)]||_0x457827['rawEventLog'][_0xf2022(0x133)]===0x0)return;const _0x3cfac6=new Array(0x60)[_0xf2022(0x291)](0x0),_0x13f468=new Date()[_0xf2022(0x195)](0x0,0x0,0x0,0x0);_0x457827[_0xf2022(0x124)]['forEach'](_0x5b355c=>{const _0xef5ae4=_0xf2022,_0x41ef3b=new Date(_0x5b355c[_0xef5ae4(0x146)]);if(_0x41ef3b[_0xef5ae4(0x13f)]()>=_0x13f468){const _0x146d23=_0x41ef3b[_0xef5ae4(0x248)](),_0x54f539=_0x41ef3b[_0xef5ae4(0x17c)](),_0x594be0=_0x146d23*0x4+Math[_0xef5ae4(0x1e3)](_0x54f539/0xf);if(_0x594be0>=0x0&&_0x594be0<0x60)_0x3cfac6[_0x594be0]++;}}),_0x457827[_0xf2022(0x262)](_0xf2022(0x28c),{'val':JSON[_0xf2022(0x24e)](_0x3cfac6),'ack':!![]});}async function getWeatherContext(_0x4d927b){const _0x2cf672=a0_0x146ad5;if(!_0x4d927b['config']['useWeather']||!_0x4d927b[_0x2cf672(0x207)]['weatherInstance'])return'Wetterdaten\x20deaktiviert.';try{const _0x27714e=_0x4d927b['config'][_0x2cf672(0x270)];let _0x4de2c7=await _0x4d927b[_0x2cf672(0x149)](_0x27714e+'.Current.Temperature');if(!_0x4de2c7)_0x4de2c7=await _0x4d927b[_0x2cf672(0x149)](_0x27714e+'.forecast.current.temperature');let _0x5544b7=await _0x4d927b[_0x2cf672(0x149)](_0x27714e+'.Current.WeatherText');if(!_0x5544b7)_0x5544b7=await _0x4d927b[_0x2cf672(0x149)](_0x27714e+_0x2cf672(0x110));if(_0x4de2c7&&_0x5544b7)return _0x4de2c7['val']+_0x2cf672(0x161)+_0x5544b7[_0x2cf672(0x244)];}catch(_0x343c96){}return _0x2cf672(0x24a);}async function getCalendarContext(_0x32fd19){const _0x16fcf0=a0_0x146ad5;if(!_0x32fd19[_0x16fcf0(0x207)]['useCalendar']||!_0x32fd19[_0x16fcf0(0x207)][_0x16fcf0(0x15a)])return _0x16fcf0(0x16b);return _0x16fcf0(0x1ac);}async function getCalendarNames(_0x252645,_0x367f58){return[];}async function saveFeedback(_0x51648d,_0x2e97c4){const _0x285b2b=a0_0x146ad5;_0x51648d['log']['info'](_0x285b2b(0x11e)+_0x2e97c4[_0x285b2b(0x10b)]);}async function runGeminiAnalysis(_0x33e863,_0x2c5f30=''){const _0x459f70=a0_0x146ad5;if(!_0x33e863[_0x459f70(0x122)])return;if(_0x33e863[_0x459f70(0x108)]['length']===0x0)return;const _0x5468aa=_0x33e863[_0x459f70(0x108)][_0x459f70(0x236)](0x0,0xf),_0xef2b32=await getWeatherContext(_0x33e863),_0x1597dd=_0x33e863[_0x459f70(0x214)],_0x520f01=PERSONA_MAPPING[_0x33e863[_0x459f70(0x207)][_0x459f70(0x1f8)]||_0x459f70(0x27d)],_0x2286fc=_0x33e863[_0x459f70(0x207)]['livingContext']||_0x459f70(0x199);let _0x121b01='Unbekannt';try{const _0x1ae5dc=await _0x33e863[_0x459f70(0x243)]('system.presenceWho');if(_0x1ae5dc&&_0x1ae5dc[_0x459f70(0x244)])_0x121b01=_0x1ae5dc[_0x459f70(0x244)];}catch(_0xbcd10c){}let _0x382e3b=![];try{const _0x3c99d1=await _0x33e863[_0x459f70(0x243)](_0x459f70(0x22f));if(_0x3c99d1&&_0x3c99d1['val'])_0x382e3b=!![];}catch(_0x1ab64f){}const _0x2a80de=_0x459f70(0x229)+_0x520f01+_0x459f70(0x257)+_0x2286fc+_0x459f70(0x137)+_0x1597dd+_0x459f70(0x1c2)+_0xef2b32+_0x459f70(0x1e1)+_0x121b01+'.\x20EVENTS:\x20'+JSON[_0x459f70(0x24e)](_0x5468aa)+_0x459f70(0x107)+_0x2c5f30+_0x459f70(0x159);try{const _0x3c4ece=await _0x33e863[_0x459f70(0x122)][_0x459f70(0x212)](_0x2a80de),_0x56f073=JSON[_0x459f70(0x144)](_0x3c4ece['response']['text']()[_0x459f70(0x135)](/```json|```/g,'')[_0x459f70(0x249)]());await _0x33e863[_0x459f70(0x262)](_0x459f70(0x14e),{'val':JSON['stringify'](_0x56f073),'ack':!![]});if(_0x56f073['summary'])await _0x33e863[_0x459f70(0x262)](_0x459f70(0x1ca),{'val':_0x56f073['summary'],'ack':!![]});const _0x2a8442={'timestamp':Date[_0x459f70(0x112)](),'id':Date[_0x459f70(0x112)]()[_0x459f70(0x204)](),'analysis':{'activity':{'summary':_0x56f073[_0x459f70(0xfc)],'isAlert':_0x56f073[_0x459f70(0x193)],'alertReason':_0x56f073[_0x459f70(0x286)]},'comfort':{'automationProposal':_0x56f073[_0x459f70(0x18c)]}}};await updateAnalysisHistory(_0x33e863,_0x2a8442);const _0x2b285b=_0x56f073[_0x459f70(0x193)]||![];_0x2b285b!==_0x33e863[_0x459f70(0x1ed)]&&(await _0x33e863['setStateAsync'](_0x459f70(0x231),{'val':_0x2b285b,'ack':!![]}),_0x33e863[_0x459f70(0x1ed)]=_0x2b285b,_0x2b285b&&(await _0x33e863[_0x459f70(0x262)](_0x459f70(0x1a2),{'val':_0x56f073[_0x459f70(0x286)],'ack':!![]}),sendNotification(_0x33e863,_0x459f70(0x15e)+_0x56f073[_0x459f70(0x286)],![],_0x56f073[_0x459f70(0x141)])));if(_0x56f073[_0x459f70(0x18c)]&&_0x56f073[_0x459f70(0x18c)][_0x459f70(0x240)]){await _0x33e863[_0x459f70(0x262)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x33e863[_0x459f70(0x262)](_0x459f70(0x273),{'val':_0x56f073[_0x459f70(0x18c)]['description'],'ack':!![]}),await _0x33e863['setStateAsync']('analysis.automation.targetId',{'val':_0x56f073[_0x459f70(0x18c)][_0x459f70(0x13b)],'ack':!![]}),await _0x33e863['setStateAsync'](_0x459f70(0x1c9),{'val':JSON[_0x459f70(0x24e)](_0x56f073[_0x459f70(0x18c)]['targetValue']),'ack':!![]});if(_0x382e3b)executeAutomationAction(_0x33e863);}}catch(_0x2272d0){_0x33e863['log']['error']('Gemini\x20Error:\x20'+_0x2272d0['message']);}}async function startSystem(_0xe1587){const _0x28b8c3=a0_0x146ad5;_0xe1587['log']['info'](_0x28b8c3(0x116)),await initZombies(_0xe1587);try{_0xe1587['isProVersion']=await checkLicense(_0xe1587[_0x28b8c3(0x207)][_0x28b8c3(0x268)]);}catch(_0x5cd716){}if(!_0xe1587[_0x28b8c3(0x207)][_0x28b8c3(0x12e)]||_0xe1587[_0x28b8c3(0x207)][_0x28b8c3(0x12e)]<0.1)_0xe1587['config'][_0x28b8c3(0x12e)]=0xc;await initHistory(_0xe1587),await initSystemConfig(_0xe1587);if(_0xe1587[_0x28b8c3(0x207)]['geminiApiKey'])try{_0xe1587['genAI']=new GoogleGenerativeAI(_0xe1587[_0x28b8c3(0x207)]['geminiApiKey']),_0xe1587[_0x28b8c3(0x122)]=_0xe1587[_0x28b8c3(0x18b)][_0x28b8c3(0x21c)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x28b8c3(0x171)}}),_0xe1587[_0x28b8c3(0x28f)][_0x28b8c3(0x251)](_0x28b8c3(0x226));}catch(_0x26ab72){_0xe1587[_0x28b8c3(0x28f)][_0x28b8c3(0x289)](_0x28b8c3(0x278)+_0x26ab72[_0x28b8c3(0x1cf)]);}await createAllObjects(_0xe1587),await loadSystemMode(_0xe1587),await loadRawEventLog(_0xe1587),await loadDailyDigests(_0xe1587),_0xe1587[_0x28b8c3(0x1cb)](_0x28b8c3(0x1e2)),_0xe1587[_0x28b8c3(0x1cb)](LTM_DP_TRIGGER_DIGEST),_0xe1587[_0x28b8c3(0x1cb)](_0x28b8c3(0x28b)),_0xe1587[_0x28b8c3(0x1cb)](_0x28b8c3(0x185)),_0xe1587[_0x28b8c3(0x1cb)](_0x28b8c3(0x252)),_0xe1587[_0x28b8c3(0x1cb)](_0x28b8c3(0x22f)),_0xe1587[_0x28b8c3(0x1cb)]('analysis.training.triggerSecurity'),_0xe1587['subscribeStates'](_0x28b8c3(0x10d)),_0xe1587[_0x28b8c3(0x1cb)](_0x28b8c3(0x277)),_0xe1587['subscribeStates'](_0x28b8c3(0x1a0)),_0xe1587[_0x28b8c3(0x1cb)](_0x28b8c3(0x1c6)),await initSensorSubscriptions(_0xe1587),await initPresenceSubscriptions(_0xe1587),await setupTelegramListener(_0xe1587),setTimeout(()=>checkWifiPresence(_0xe1587),0x1388);if(_0xe1587[_0x28b8c3(0x20f)])clearInterval(_0xe1587['analysisTimer']);const _0xf465b5=_0xe1587[_0x28b8c3(0x207)][_0x28b8c3(0x21d)]||0xf;_0xf465b5>0x0&&(_0xe1587[_0x28b8c3(0x20f)]=setInterval(()=>{runAutopilot(_0xe1587);},_0xf465b5*0x3c*0x3e8)),schedulers[_0x28b8c3(0x23e)](_0xe1587,()=>createDailyDigest(_0xe1587)),schedulers[_0x28b8c3(0x117)](_0xe1587),schedulers['setupDriftAnalysisScheduler'](_0xe1587,()=>runBaselineDriftAnalysis(_0xe1587)),schedulers['setupBriefingScheduler'](_0xe1587,()=>sendMorningBriefing(_0xe1587)),startPythonService(_0xe1587),setTimeout(()=>{_0xe1587['pythonProcess']&&(runPythonHealthCheck(_0xe1587),triggerGaitAnalysis(_0xe1587),triggerEnergyPrediction(_0xe1587)),updateHealthVector(_0xe1587);},0x1388);}class CogniLiving extends utils[a0_0x146ad5(0x182)]{constructor(_0x56cb79){const _0x289ccb=a0_0x146ad5;super({..._0x56cb79,'name':_0x289ccb(0x1dc)}),this['eventHistory']=[],this[_0x289ccb(0x194)]=[],this['rawEventLog']=[],this[_0x289ccb(0x152)]=[],this[_0x289ccb(0x1d4)]={},this[_0x289ccb(0x20b)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x289ccb(0x1a7)]=!![],this[_0x289ccb(0x1b8)]=null,this[_0x289ccb(0x1bb)]=null,this[_0x289ccb(0x1c3)]=![],this['genAI']=null,this['geminiModel']=null,this[_0x289ccb(0x214)]=SYSTEM_MODES['NORMAL'],this[_0x289ccb(0x166)]=![],this['lastAlertState']=![],this['systemUUID']='unknown',this[_0x289ccb(0x20f)]=null,this['ltmJob']=null,this[_0x289ccb(0x196)]=null,this[_0x289ccb(0x162)]=null,this['briefingJob']=null,this[_0x289ccb(0x132)]=null,this[_0x289ccb(0x1c8)]=![],this['on']('ready',this[_0x289ccb(0x119)]['bind'](this)),this['on'](_0x289ccb(0x220),this[_0x289ccb(0x134)][_0x289ccb(0x21f)](this)),this['on'](_0x289ccb(0x140),this['onUnload'][_0x289ccb(0x21f)](this)),this['on'](_0x289ccb(0x1cf),this[_0x289ccb(0x13a)]['bind'](this));}async[a0_0x146ad5(0x119)](){const _0x48d0b8=a0_0x146ad5;this[_0x48d0b8(0x28f)][_0x48d0b8(0x251)](_0x48d0b8(0x261)+this['version']+_0x48d0b8(0x259));if(!installer[_0x48d0b8(0x114)](this,()=>startSystem(this)))return;}[a0_0x146ad5(0x142)](_0x23ad78){const _0x10e29e=a0_0x146ad5;if(this[_0x10e29e(0x20f)])clearInterval(this[_0x10e29e(0x20f)]);if(this[_0x10e29e(0x162)])clearInterval(this[_0x10e29e(0x162)]);if(this[_0x10e29e(0x1fc)])this['ltmJob']['cancel']();if(this[_0x10e29e(0x196)])this[_0x10e29e(0x196)][_0x10e29e(0x1fe)]();if(this[_0x10e29e(0x12b)])this[_0x10e29e(0x12b)][_0x10e29e(0x1fe)]();if(this[_0x10e29e(0x1b8)])clearTimeout(this['exitTimer']);if(this[_0x10e29e(0x1bb)])clearTimeout(this[_0x10e29e(0x1bb)]);stopPythonService(this),_0x23ad78();}async['onStateChange'](_0x242b38,_0x18ca5b){const _0x361473=a0_0x146ad5;if(!_0x18ca5b||this[_0x361473(0x1c8)])return;if(_0x242b38[_0x361473(0x176)](_0x361473(0x147))&&_0x242b38['endsWith'](_0x361473(0x184))&&_0x18ca5b[_0x361473(0x244)]){await handleTelegramResponse(this,_0x18ca5b[_0x361473(0x244)]);return;}if(_0x242b38===this[_0x361473(0x26c)]+'.'+SYSTEM_DP_MODE){if(_0x18ca5b[_0x361473(0x244)]&&Object['values'](SYSTEM_MODES)['includes'](_0x18ca5b[_0x361473(0x244)])){this['currentSystemMode']=_0x18ca5b['val'];if(_0x18ca5b[_0x361473(0x244)]===SYSTEM_MODES[_0x361473(0x1b6)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x18ca5b[_0x361473(0x1aa)])this[_0x361473(0x127)](_0x242b38,{'val':this[_0x361473(0x214)],'ack':!![]});return;}if(!_0x18ca5b[_0x361473(0x1aa)]){_0x242b38[_0x361473(0x176)]('analysis.trigger')&&_0x18ca5b[_0x361473(0x244)]&&(this[_0x361473(0x127)](_0x242b38,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x242b38[_0x361473(0x176)](_0x361473(0x1e4))&&_0x18ca5b[_0x361473(0x244)]){this['setState'](_0x242b38,{'val':![],'ack':!![]});if(this[_0x361473(0x166)])createDailyDigest(this);}_0x242b38[_0x361473(0x176)](_0x361473(0x233))&&_0x18ca5b[_0x361473(0x244)]&&(this[_0x361473(0x127)](_0x242b38,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x242b38[_0x361473(0x176)](_0x361473(0x109))&&_0x18ca5b['val']&&(this[_0x361473(0x127)](_0x242b38,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x242b38[_0x361473(0x176)](_0x361473(0x172))&&_0x18ca5b[_0x361473(0x244)]){this[_0x361473(0x127)](_0x242b38,{'val':![],'ack':!![]});if(this[_0x361473(0x166)])try{const _0x2a97e9=await this['getStateAsync'](_0x361473(0xfa));if(_0x2a97e9&&_0x2a97e9['val']){const _0x4b667d=JSON[_0x361473(0x144)](_0x2a97e9['val']);this[_0x361473(0x28f)][_0x361473(0x251)](_0x361473(0x25d)),this['setStateAsync'](_0x361473(0x1f1),{'val':_0x361473(0x210),'ack':!![]}),sendToPython(this,_0x361473(0x177),{'sequences':_0x4b667d});}}catch(_0x171eae){this[_0x361473(0x28f)][_0x361473(0x289)](_0x361473(0xf6)+_0x171eae[_0x361473(0x1cf)]);}}if(_0x242b38['includes']('analysis.training.triggerHealth')&&_0x18ca5b[_0x361473(0x244)]){this['setState'](_0x242b38,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x4f3e51=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x4f3e51&&_0x4f3e51[_0x361473(0x244)])sendToPython(this,_0x361473(0x103),{'digests':JSON['parse'](_0x4f3e51[_0x361473(0x244)])});}catch(_0x599be3){}}if(_0x242b38[_0x361473(0x176)](_0x361473(0x277))&&_0x18ca5b[_0x361473(0x244)]){this['setState'](_0x242b38,{'val':![],'ack':!![]});if(this[_0x361473(0x166)])try{const _0x533d88=await this[_0x361473(0x243)]('LTM.trainingData.thermodynamics');if(_0x533d88&&_0x533d88['val'])sendToPython(this,_0x361473(0x1ce),{'points':JSON[_0x361473(0x144)](_0x533d88[_0x361473(0x244)])});}catch(_0x14a0c1){}}if(_0x242b38[_0x361473(0x176)]('analysis.training.triggerComfort')&&_0x18ca5b['val']){this[_0x361473(0x127)](_0x242b38,{'val':![],'ack':!![]});if(this[_0x361473(0x166)])try{const _0x34b40f=await this[_0x361473(0x243)](LTM_DP_RAW_LOG);_0x34b40f&&_0x34b40f[_0x361473(0x244)]&&(this['log']['info'](_0x361473(0x125)),sendToPython(this,_0x361473(0x17b),{'events':JSON[_0x361473(0x144)](_0x34b40f[_0x361473(0x244)])}));}catch(_0x579c20){}}if(_0x242b38['includes']('analysis.training.triggerTopology')&&_0x18ca5b['val']){this[_0x361473(0x127)](_0x242b38,{'val':![],'ack':!![]});if(this[_0x361473(0x166)])try{const _0x13cae9=await this[_0x361473(0x243)](_0x361473(0xfa));if(_0x13cae9&&_0x13cae9[_0x361473(0x244)]){const _0x3c5905=JSON[_0x361473(0x144)](_0x13cae9[_0x361473(0x244)]);this[_0x361473(0x28f)][_0x361473(0x251)](_0x361473(0x173)),sendToPython(this,_0x361473(0x205),{'sequences':_0x3c5905});}}catch(_0x47a0cd){this[_0x361473(0x28f)][_0x361473(0x289)](_0x361473(0x1d7)+_0x47a0cd['message']);}}return;}if(this['config'][_0x361473(0x18f)]&&this[_0x361473(0x207)][_0x361473(0x18f)][_0x361473(0x176)](_0x242b38)){await checkWifiPresence(this);return;}const _0x103ff2=(this[_0x361473(0x207)]['devices']||[])[_0x361473(0x16f)](_0x43bb42=>_0x43bb42['id']===_0x242b38);if(_0x103ff2)processSensorEvent(this,_0x242b38,_0x18ca5b,_0x103ff2);}async[a0_0x146ad5(0x13a)](_0x2c31c5){const _0x41d246=a0_0x146ad5;if(typeof _0x2c31c5===_0x41d246(0x19d)&&_0x2c31c5[_0x41d246(0x1cf)]){if(_0x2c31c5[_0x41d246(0x239)]===_0x41d246(0x1a4)){const _0x4acd4b=_0x2c31c5[_0x41d246(0x1cf)][_0x41d246(0x11a)]||this['config'][_0x41d246(0x1f6)];if(!_0x4acd4b)return this[_0x41d246(0xfb)](_0x2c31c5[_0x41d246(0x156)],_0x2c31c5[_0x41d246(0x239)],{'success':![],'message':_0x41d246(0x10e)},_0x2c31c5[_0x41d246(0x102)]);try{const _0x1f2147=new GoogleGenerativeAI(_0x4acd4b),_0x5b310c=_0x1f2147['getGenerativeModel']({'model':GEMINI_MODEL}),_0xdbd283=await _0x5b310c['generateContent']('Hi');this['sendTo'](_0x2c31c5[_0x41d246(0x156)],_0x2c31c5[_0x41d246(0x239)],{'success':!![],'message':'OK:\x20'+_0xdbd283[_0x41d246(0x246)][_0x41d246(0x169)]()},_0x2c31c5[_0x41d246(0x102)]);}catch(_0x2760d4){this[_0x41d246(0xfb)](_0x2c31c5['from'],_0x2c31c5[_0x41d246(0x239)],{'success':![],'message':_0x41d246(0x14d)+_0x2760d4[_0x41d246(0x1cf)]},_0x2c31c5['callback']);}}else{if(_0x2c31c5['command']===_0x41d246(0x19b)){const _0x134952=await getWeatherContext(this),_0x414616=await getCalendarContext(this);this['sendTo'](_0x2c31c5[_0x41d246(0x156)],_0x2c31c5[_0x41d246(0x239)],{'success':!![],'weather':_0x134952,'calendar':_0x414616},_0x2c31c5[_0x41d246(0x102)]);}else{if(_0x2c31c5[_0x41d246(0x239)]===_0x41d246(0x187)){if(!this[_0x41d246(0x166)])return this[_0x41d246(0xfb)](_0x2c31c5[_0x41d246(0x156)],_0x2c31c5[_0x41d246(0x239)],{'success':![],'isPro':![]},_0x2c31c5[_0x41d246(0x102)]);let _0x71ee61={'status':_0x41d246(0x1a8)};try{const _0xe83fb7=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x71ee61[_0x41d246(0x183)]=_0xe83fb7?_0xe83fb7['val']:_0x41d246(0x1a8);}catch(_0x3ee40d){}this['sendTo'](_0x2c31c5[_0x41d246(0x156)],_0x2c31c5[_0x41d246(0x239)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x71ee61,'analysisHistory':this['analysisHistory']},_0x2c31c5[_0x41d246(0x102)]);}else{if(_0x2c31c5[_0x41d246(0x239)]===_0x41d246(0x26e)){const _0x4c2607=this[_0x41d246(0x152)][_0x41d246(0x133)],_0x23a11e=new Date(),_0x2065f2=new Date(_0x23a11e[_0x41d246(0x263)](),_0x23a11e[_0x41d246(0x11f)](),_0x23a11e['getDate']())[_0x41d246(0x13f)](),_0x1d2575=this[_0x41d246(0x124)]['filter'](_0xdc7d1a=>new Date(_0xdc7d1a[_0x41d246(0x146)])['getTime']()>_0x2065f2)[_0x41d246(0x133)],_0x48ebef=new Array(0x18)[_0x41d246(0x291)](0x0);this['rawEventLog'][_0x41d246(0x168)](_0x253291=>{const _0x5eff75=_0x41d246,_0x543d69=new Date(_0x253291[_0x5eff75(0x146)]);if(_0x543d69[_0x5eff75(0x13f)]()>_0x2065f2)_0x48ebef[_0x543d69[_0x5eff75(0x248)]()]++;});let _0x2bf04f={'status':_0x41d246(0x1a8)};try{const _0x205e71=await this[_0x41d246(0x243)](LTM_DP_DRIFT_STATUS);_0x2bf04f[_0x41d246(0x183)]=_0x205e71?_0x205e71['val']:_0x41d246(0x1a8);}catch(_0x2ce205){}let _0x2ddb92='';try{const _0x567898=await this['getStateAsync'](_0x41d246(0x16e));_0x2ddb92=_0x567898?_0x567898[_0x41d246(0x244)]:'';}catch(_0x37ccc9){}let _0x22d199=null;!this[_0x41d246(0x122)]&&(_0x22d199=this[_0x41d246(0x207)][_0x41d246(0x1f6)]?_0x41d246(0x15c):'Kein\x20API\x20Key!');let _0x254bda={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x258e30=await this['getStateAsync'](_0x41d246(0x223));if(_0x258e30&&_0x258e30[_0x41d246(0x244)]){_0x254bda[_0x41d246(0x240)]=!![];const _0xd02570=await this['getStateAsync'](_0x41d246(0x273));_0x254bda[_0x41d246(0x19f)]=_0xd02570?_0xd02570[_0x41d246(0x244)]:'';const _0x51fdf1=await this[_0x41d246(0x243)](_0x41d246(0xfe));_0x254bda['targetId']=_0x51fdf1?_0x51fdf1[_0x41d246(0x244)]:'';const _0x4ed831=await this[_0x41d246(0x243)]('analysis.automation.targetValue');_0x254bda[_0x41d246(0x28d)]=_0x4ed831?_0x4ed831['val']:'';}const _0x24096c=await this[_0x41d246(0x243)](_0x41d246(0x22f));_0x254bda[_0x41d246(0x1e6)]=_0x24096c?!!_0x24096c[_0x41d246(0x244)]:![];}catch(_0x54c757){}this[_0x41d246(0xfb)](_0x2c31c5['from'],_0x2c31c5[_0x41d246(0x239)],{'success':!![],'eventHistory':this[_0x41d246(0x108)][_0x41d246(0x236)](0x0,0xf),'stats':{'digestCount':_0x4c2607,'eventCountToday':_0x1d2575,'hourlyActivity':_0x48ebef,'driftStatus':_0x2bf04f[_0x41d246(0x183)],'isPresent':this[_0x41d246(0x1a7)],'presenceWho':_0x2ddb92,'minDays':this['config']['minDaysForBaseline']||0x7,'stbDays':this[_0x41d246(0x207)][_0x41d246(0x280)]||0xe,'ltbDays':this[_0x41d246(0x207)][_0x41d246(0x14a)]||0x3c,'systemError':_0x22d199},'automation':_0x254bda},_0x2c31c5[_0x41d246(0x102)]);}else{if(_0x2c31c5[_0x41d246(0x239)]==='scanDevices')try{const _0x38574e=await scanner['scanForDevices'](this,_0x2c31c5['message']||{});this['sendTo'](_0x2c31c5[_0x41d246(0x156)],_0x2c31c5[_0x41d246(0x239)],{'success':!![],'devices':_0x38574e},_0x2c31c5[_0x41d246(0x102)]);}catch(_0x3e021a){this[_0x41d246(0xfb)](_0x2c31c5['from'],_0x2c31c5[_0x41d246(0x239)],{'success':![],'error':_0x3e021a[_0x41d246(0x1cf)]},_0x2c31c5[_0x41d246(0x102)]);}else{if(_0x2c31c5[_0x41d246(0x239)]===_0x41d246(0x1b4)){const _0x3d73b5=await this[_0x41d246(0x118)](_0x41d246(0x200),'enum'),_0x53d1da=[];if(_0x3d73b5)for(const _0x4f902a in _0x3d73b5){const _0x3117a5=_0x3d73b5[_0x4f902a],_0x540d4c=(_0x3117a5[_0x41d246(0x1c7)]&&typeof _0x3117a5[_0x41d246(0x1c7)][_0x41d246(0x234)]===_0x41d246(0x19d)?_0x3117a5[_0x41d246(0x1c7)][_0x41d246(0x234)]['de']:_0x3117a5[_0x41d246(0x1c7)][_0x41d246(0x234)])||_0x3117a5['common'][_0x41d246(0x234)];_0x53d1da[_0x41d246(0x1b0)]({'id':_0x4f902a,'name':_0x540d4c});}const _0x321b48=await this['getForeignObjectsAsync'](_0x41d246(0x221),_0x41d246(0x1b5)),_0x23b014=[];if(_0x321b48)for(const _0x2550f4 in _0x321b48){const _0x4b5147=_0x321b48[_0x2550f4],_0x4e6ebb=(_0x4b5147[_0x41d246(0x1c7)]&&typeof _0x4b5147[_0x41d246(0x1c7)][_0x41d246(0x234)]===_0x41d246(0x19d)?_0x4b5147[_0x41d246(0x1c7)][_0x41d246(0x234)]['de']:_0x4b5147[_0x41d246(0x1c7)][_0x41d246(0x234)])||_0x2550f4[_0x41d246(0x139)]('.')[_0x41d246(0x1f0)]();_0x23b014[_0x41d246(0x1b0)](_0x4e6ebb);}this[_0x41d246(0xfb)](_0x2c31c5[_0x41d246(0x156)],_0x2c31c5['command'],{'success':!![],'enums':_0x53d1da,'rooms':_0x23b014},_0x2c31c5[_0x41d246(0x102)]);}else{if(_0x2c31c5[_0x41d246(0x239)]===_0x41d246(0x1f7)){const _0x2b0618=_0x2c31c5['message'][_0x41d246(0x1c0)];if(!_0x2b0618)return this[_0x41d246(0xfb)](_0x2c31c5[_0x41d246(0x156)],_0x2c31c5[_0x41d246(0x239)],{'success':![],'error':_0x41d246(0x115)},_0x2c31c5['callback']);const _0x37bfd4=await getCalendarNames(this,_0x2b0618);this[_0x41d246(0xfb)](_0x2c31c5['from'],_0x2c31c5['command'],{'success':!![],'names':_0x37bfd4},_0x2c31c5[_0x41d246(0x102)]);}else{if(_0x2c31c5[_0x41d246(0x239)]===_0x41d246(0x16c)){const {targetId:_0x208c69,targetValue:_0x2bd523}=_0x2c31c5[_0x41d246(0x1cf)];this['log'][_0x41d246(0x251)](_0x41d246(0x1ef)+_0x208c69+_0x41d246(0x150)+_0x2bd523),await this[_0x41d246(0x262)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0x41d246(0x262)]('analysis.automation.description',{'val':_0x41d246(0x1df)+_0x208c69,'ack':!![]}),await this[_0x41d246(0x262)](_0x41d246(0xfe),{'val':_0x208c69,'ack':!![]}),await this[_0x41d246(0x262)](_0x41d246(0x1c9),{'val':_0x2bd523,'ack':!![]}),this['sendTo'](_0x2c31c5['from'],_0x2c31c5[_0x41d246(0x239)],{'success':!![]},_0x2c31c5[_0x41d246(0x102)]);}else{if(_0x2c31c5[_0x41d246(0x239)]==='submitFeedback'){const {historyId:_0x315f34,rating:_0x21bb81,comment:_0x533ab4,alertReason:_0x37b6ad}=_0x2c31c5[_0x41d246(0x1cf)];_0x315f34&&_0x21bb81?(await saveFeedback(this,{'timestamp':Date[_0x41d246(0x112)](),'historyId':_0x315f34,'rating':_0x21bb81,'comment':_0x533ab4,'alertReason':_0x37b6ad}),this[_0x41d246(0xfb)](_0x2c31c5[_0x41d246(0x156)],_0x2c31c5[_0x41d246(0x239)],{'success':!![]},_0x2c31c5[_0x41d246(0x102)])):this[_0x41d246(0xfb)](_0x2c31c5[_0x41d246(0x156)],_0x2c31c5[_0x41d246(0x239)],{'success':![],'error':_0x41d246(0x258)},_0x2c31c5[_0x41d246(0x102)]);}else _0x2c31c5[_0x41d246(0x239)]==='dismissAutomation'&&(this[_0x41d246(0x28f)][_0x41d246(0x251)]('User\x20dismissed\x20automation\x20proposal.'),await this[_0x41d246(0x262)](_0x41d246(0x223),{'val':![],'ack':!![]}),await this['setStateAsync'](_0x41d246(0x273),{'val':'','ack':!![]}),this[_0x41d246(0xfb)](_0x2c31c5[_0x41d246(0x156)],_0x2c31c5[_0x41d246(0x239)],{'success':!![]},_0x2c31c5['callback']));}}}}}}}}}}}if(require[a0_0x146ad5(0x12d)]!==module)module[a0_0x146ad5(0x111)]=_0x48a4b6=>new CogniLiving(_0x48a4b6);else new CogniLiving();