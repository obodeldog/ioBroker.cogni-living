const a0_0x2280a8=a0_0x4861;(function(_0x728924,_0x9dd1a8){const _0x6c5503=a0_0x4861,_0x1b7225=_0x728924();while(!![]){try{const _0x535a6f=-parseInt(_0x6c5503(0x19d))/0x1*(-parseInt(_0x6c5503(0x149))/0x2)+parseInt(_0x6c5503(0x86))/0x3+parseInt(_0x6c5503(0x99))/0x4*(-parseInt(_0x6c5503(0x1cb))/0x5)+-parseInt(_0x6c5503(0x170))/0x6+parseInt(_0x6c5503(0xcd))/0x7+-parseInt(_0x6c5503(0x1b2))/0x8+parseInt(_0x6c5503(0x1d5))/0x9;if(_0x535a6f===_0x9dd1a8)break;else _0x1b7225['push'](_0x1b7225['shift']());}catch(_0x4ac838){_0x1b7225['push'](_0x1b7225['shift']());}}}(a0_0x5472,0x7da84));const a0_0x22fcde=(function(){let _0x3e7b82=!![];return function(_0x51346c,_0x4a6e4f){const _0x4d87ae=_0x3e7b82?function(){const _0x5821d8=a0_0x4861;if(_0x4a6e4f){const _0x5d19e3=_0x4a6e4f[_0x5821d8(0x14b)](_0x51346c,arguments);return _0x4a6e4f=null,_0x5d19e3;}}:function(){};return _0x3e7b82=![],_0x4d87ae;};}()),a0_0x3262ab=a0_0x22fcde(this,function(){const _0x137d01=a0_0x4861;return a0_0x3262ab[_0x137d01(0x178)]()['search'](_0x137d01(0xc6))[_0x137d01(0x178)]()['constructor'](a0_0x3262ab)['search'](_0x137d01(0xc6));});a0_0x3262ab();'use strict';const utils=require(a0_0x2280a8(0x148)),{GoogleGenerativeAI}=require('@google/generative-ai'),{spawn}=require('child_process'),path=require(a0_0x2280a8(0x1a4)),fs=require('fs'),installer=require(a0_0x2280a8(0xaa)),scanner=require(a0_0x2280a8(0xac)),schedulers=require('./lib/scheduler'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x2280a8(0x9e),LTM_DP_DAILY_DIGESTS=a0_0x2280a8(0x96),LTM_DP_STATUS=a0_0x2280a8(0x101),LTM_DP_TRIGGER_DIGEST=a0_0x2280a8(0x140),LTM_DP_BASELINE_STATUS=a0_0x2280a8(0xef),LTM_DP_DRIFT_CHANNEL=a0_0x2280a8(0x1f4),LTM_DP_DRIFT_STATUS=a0_0x2280a8(0x1d1),LTM_DP_DRIFT_DETAILS=a0_0x2280a8(0x1df),LTM_DP_DRIFT_LAST_CHECK=a0_0x2280a8(0x1cc),SYSTEM_DP_MODE=a0_0x2280a8(0x17e),SYSTEM_MODES={'NORMAL':a0_0x2280a8(0x88),'VACATION':a0_0x2280a8(0x109),'PARTY':a0_0x2280a8(0x11f),'GUEST':a0_0x2280a8(0x13b)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x2280a8(0xab)],SYSTEM_MODES[a0_0x2280a8(0x1ee)]],PERSONA_MAPPING={'generic':a0_0x2280a8(0x1dd),'senior_aal':a0_0x2280a8(0xe7),'family':'Fokus\x20auf\x20Familienroutinen.','single_comfort':a0_0x2280a8(0xd5),'security':'PRIORIT√ÑT:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x425513){const _0x44cd96=a0_0x2280a8;try{const _0x16f147=[_0x44cd96(0xe9),_0x44cd96(0x1cf)];for(const _0x4d8363 of _0x16f147){try{const _0x14d732=await _0x425513[_0x44cd96(0x9c)](_0x4d8363);if(_0x14d732)await _0x425513[_0x44cd96(0xbf)](_0x4d8363);}catch(_0x35205c){}}}catch(_0x57357b){}}async function checkLicense(_0xfacbad){return!![];}async function initHistory(_0x45e61d){const _0x535d29=a0_0x2280a8;try{const _0x11f9ab=await _0x45e61d['getStateAsync'](_0x535d29(0xed));_0x11f9ab&&_0x11f9ab[_0x535d29(0xd0)]&&(_0x45e61d[_0x535d29(0x1d9)]=JSON[_0x535d29(0xb2)](_0x11f9ab[_0x535d29(0xd0)][_0x535d29(0x178)]()));}catch(_0x32b60e){_0x45e61d['eventHistory']=[];}try{const _0x4c2699=await _0x45e61d['getStateAsync'](_0x535d29(0xe8));if(_0x4c2699&&_0x4c2699[_0x535d29(0xd0)])_0x45e61d[_0x535d29(0x1ad)]=JSON[_0x535d29(0xb2)](_0x4c2699[_0x535d29(0xd0)][_0x535d29(0x178)]());}catch(_0x4f0acc){_0x45e61d[_0x535d29(0x1ad)]=[];}if(_0x45e61d[_0x535d29(0x1d9)]&&_0x45e61d[_0x535d29(0x1d9)]['length']>0x0){_0x45e61d[_0x535d29(0x8e)][_0x535d29(0x114)](_0x535d29(0x78));for(let _0x4f7234=_0x45e61d['eventHistory']['length']-0x1;_0x4f7234>=0x0;_0x4f7234--){const _0x138733=_0x45e61d[_0x535d29(0x1d9)][_0x4f7234];if(_0x138733&&_0x138733['id']!==undefined&&_0x138733['value']!==undefined)_0x45e61d[_0x535d29(0x128)][_0x138733['id']]=_0x138733[_0x535d29(0x8f)];}}}async function initSystemConfig(_0x1577c5){const _0x5535a4=a0_0x2280a8;try{const _0x1eaebe=await _0x1577c5[_0x5535a4(0xcc)](_0x5535a4(0xf6));if(_0x1eaebe&&_0x1eaebe[_0x5535a4(0xb7)])_0x1577c5[_0x5535a4(0x186)]={'latitude':_0x1eaebe['common'][_0x5535a4(0x81)]||0x0,'longitude':_0x1eaebe[_0x5535a4(0xb7)][_0x5535a4(0x169)]||0x0,'city':_0x1eaebe[_0x5535a4(0xb7)]['city']||''};}catch(_0xa419b1){}}async function createAllObjects(_0x30b6d8){const _0x3255dc=a0_0x2280a8;await _0x30b6d8['extendObjectAsync'](_0x3255dc(0x7b),{'type':_0x3255dc(0x123),'common':{'name':_0x3255dc(0xad)},'native':{}}),await _0x30b6d8[_0x3255dc(0xfc)](SYSTEM_DP_MODE,{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0x1e1),'type':_0x3255dc(0x164),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES[_0x3255dc(0x188)]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0x1ca),{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0xda),'type':_0x3255dc(0x164),'role':_0x3255dc(0x10d),'read':!![],'write':![]},'native':{}}),await _0x30b6d8['setObjectNotExistsAsync'](_0x3255dc(0x11c),{'type':'state','common':{'name':_0x3255dc(0x135),'type':_0x3255dc(0x164),'role':_0x3255dc(0x1e3),'read':!![],'write':![]},'native':{}}),await _0x30b6d8['setObjectNotExistsAsync'](_0x3255dc(0xed),{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0x1ce),'type':'string','role':_0x3255dc(0x1e3),'read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xfc)](_0x3255dc(0x1f7),{'type':_0x3255dc(0x123),'common':{'name':_0x3255dc(0x130)},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)]('analysis.training.triggerSecurity',{'type':'state','common':{'name':'Train\x20Security','type':_0x3255dc(0x121),'role':_0x3255dc(0xd3),'read':!![],'write':!![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0x205),{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0x8d),'type':_0x3255dc(0x121),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0x167),{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0x195),'type':'boolean','role':_0x3255dc(0xd3),'read':!![],'write':!![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0x6f),{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0x1b0),'type':'boolean','role':_0x3255dc(0xd3),'read':!![],'write':!![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0x197),{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0x1e4),'type':_0x3255dc(0x121),'role':_0x3255dc(0xd3),'read':!![],'write':!![]},'native':{}}),await _0x30b6d8['setObjectNotExistsAsync']('analysis.training.status',{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0xbc),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xfc)](_0x3255dc(0x1f6),{'type':_0x3255dc(0x123),'common':{'name':_0x3255dc(0x1ff)},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0xd6),{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0x16e),'type':_0x3255dc(0x201),'role':'value','read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0x168),{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0xe5),'type':_0x3255dc(0x201),'role':_0x3255dc(0x8f),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0x12d),{'type':'state','common':{'name':_0x3255dc(0x7f),'type':_0x3255dc(0x164),'role':_0x3255dc(0x14a),'read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0xa4),{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0x1de),'type':_0x3255dc(0x164),'role':'json','read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xfc)](_0x3255dc(0x108),{'type':_0x3255dc(0x123),'common':{'name':_0x3255dc(0x1a9)},'native':{}}),await _0x30b6d8['setObjectNotExistsAsync']('analysis.health.lastCheck',{'type':'state','common':{'name':_0x3255dc(0x7f),'type':_0x3255dc(0x164),'role':_0x3255dc(0x14a),'read':!![],'write':![]},'native':{}}),await _0x30b6d8['setObjectNotExistsAsync'](_0x3255dc(0x72),{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0x1fe),'type':'boolean','role':_0x3255dc(0x203),'read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0x18f),{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0x118),'type':_0x3255dc(0x164),'role':_0x3255dc(0x10d),'read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0x1ac),{'type':_0x3255dc(0x166),'common':{'name':'Trend\x20Value','type':_0x3255dc(0x201),'role':_0x3255dc(0x8f),'read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)]('analysis.health.todayVector',{'type':'state','common':{'name':_0x3255dc(0x150),'type':_0x3255dc(0x164),'role':_0x3255dc(0x1e3),'read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0x1bf),{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0xee),'type':'number','role':_0x3255dc(0x8f),'read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xfc)]('analysis.energy',{'type':'channel','common':{'name':_0x3255dc(0x10b)},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0x113),{'type':'state','common':{'name':_0x3255dc(0x204),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)]('analysis.energy.heatingScore',{'type':'state','common':{'name':_0x3255dc(0xf3),'type':_0x3255dc(0x164),'role':_0x3255dc(0x10d),'read':!![],'write':![]},'native':{}}),await _0x30b6d8['setObjectNotExistsAsync'](_0x3255dc(0x12f),{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0x1f2),'type':_0x3255dc(0x164),'role':'json','read':!![],'write':![]},'native':{}}),await _0x30b6d8['extendObjectAsync']('LTM',{'type':_0x3255dc(0x123),'common':{'name':'LTM'},'native':{}}),await _0x30b6d8[_0x3255dc(0xfc)](LTM_DP_RAW_LOG,{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0x70),'type':_0x3255dc(0x164),'role':_0x3255dc(0x1e3),'read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xfc)](LTM_DP_DAILY_DIGESTS,{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0xf7),'type':_0x3255dc(0x164),'role':_0x3255dc(0x1e3),'read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0x1a3),{'type':_0x3255dc(0x166),'common':{'name':'Sequences','type':_0x3255dc(0x164),'role':_0x3255dc(0x1e3),'read':!![],'write':![]},'native':{}}),await _0x30b6d8['setObjectNotExistsAsync'](_0x3255dc(0x133),{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0x73),'type':_0x3255dc(0x164),'role':_0x3255dc(0x1e3),'read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0xd1),{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0xfe),'type':_0x3255dc(0x121),'role':_0x3255dc(0xd3),'read':!![],'write':!![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0x134),{'type':'state','common':{'name':_0x3255dc(0x179),'type':_0x3255dc(0x121),'role':_0x3255dc(0xd3),'read':!![],'write':!![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)]('analysis.isAlert',{'type':_0x3255dc(0x166),'common':{'name':'Alert\x20Status','type':_0x3255dc(0x121),'role':_0x3255dc(0xb5),'read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0x18c),{'type':_0x3255dc(0x166),'common':{'name':'Alert\x20Reason','type':_0x3255dc(0x164),'role':_0x3255dc(0x87),'read':!![],'write':![]},'native':{}}),await _0x30b6d8['setObjectNotExistsAsync'](_0x3255dc(0x1f1),{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0x1b1),'type':'string','role':_0x3255dc(0x10d),'read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0x152),{'type':'state','common':{'name':_0x3255dc(0x1c4),'type':_0x3255dc(0x121),'role':_0x3255dc(0x203),'read':!![],'write':![]},'native':{}}),await _0x30b6d8['setObjectNotExistsAsync'](_0x3255dc(0xb6),{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0x1ed),'type':_0x3255dc(0x164),'role':_0x3255dc(0x10d),'read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)]('analysis.automation.detectedPatterns',{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0x1f0),'type':_0x3255dc(0x164),'role':'json','read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0x1b6),{'type':_0x3255dc(0x166),'common':{'name':'Target\x20ID','type':_0x3255dc(0x164),'role':'text','read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)]('analysis.automation.targetValue',{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0x157),'type':_0x3255dc(0x164),'role':_0x3255dc(0x10d),'read':!![],'write':![]},'native':{}}),await _0x30b6d8[_0x3255dc(0xe0)](_0x3255dc(0x208),{'type':'state','common':{'name':_0x3255dc(0x71),'type':'boolean','role':'switch','read':!![],'write':!![]},'native':{}}),await _0x30b6d8['setObjectNotExistsAsync'](_0x3255dc(0xbb),{'type':_0x3255dc(0x166),'common':{'name':_0x3255dc(0x1b9),'type':_0x3255dc(0x121),'role':'button','read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x4d359b){const _0x503c9a=a0_0x2280a8;try{const _0x2edc85=await _0x4d359b[_0x503c9a(0x1cd)](SYSTEM_DP_MODE);_0x2edc85&&_0x2edc85['val']&&Object[_0x503c9a(0x20b)](SYSTEM_MODES)[_0x503c9a(0x11d)](_0x2edc85['val'])?_0x4d359b['currentSystemMode']=_0x2edc85[_0x503c9a(0xd0)]:(_0x4d359b[_0x503c9a(0x12a)]=SYSTEM_MODES[_0x503c9a(0x188)],await _0x4d359b[_0x503c9a(0x16f)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x503c9a(0x188)],'ack':!![]}));}catch(_0x11ca11){_0x4d359b['currentSystemMode']=SYSTEM_MODES[_0x503c9a(0x188)];}}async function loadRawEventLog(_0xd47bc8){const _0x325da0=a0_0x2280a8;try{const _0x68121d=await _0xd47bc8['getStateAsync'](LTM_DP_RAW_LOG);if(_0x68121d&&_0x68121d[_0x325da0(0xd0)])_0xd47bc8['rawEventLog']=JSON['parse'](_0x68121d[_0x325da0(0xd0)]);}catch(_0x5c956b){_0xd47bc8[_0x325da0(0x19b)]=[];}}async function saveRawEventLog(_0x3eef3f){const _0x3e3b38=a0_0x2280a8;if(_0x3eef3f[_0x3e3b38(0x19b)][_0x3e3b38(0x139)]>RAW_LOG_MAX_SIZE)_0x3eef3f[_0x3e3b38(0x19b)][_0x3e3b38(0x1bb)](0x0,_0x3eef3f[_0x3e3b38(0x19b)][_0x3e3b38(0x139)]-RAW_LOG_MAX_SIZE);await _0x3eef3f[_0x3e3b38(0x16f)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x3eef3f[_0x3e3b38(0x19b)]),'ack':!![]});}function a0_0x4861(_0x7e4347,_0x5603d1){const _0x49b04a=a0_0x5472();return a0_0x4861=function(_0x3262ab,_0x22fcde){_0x3262ab=_0x3262ab-0x6f;let _0x547236=_0x49b04a[_0x3262ab];return _0x547236;},a0_0x4861(_0x7e4347,_0x5603d1);}async function loadDailyDigests(_0xa7d02c){const _0x1a1568=a0_0x2280a8;try{const _0xfc69a1=await _0xa7d02c[_0x1a1568(0x1cd)](LTM_DP_DAILY_DIGESTS);if(_0xfc69a1&&_0xfc69a1[_0x1a1568(0xd0)])_0xa7d02c[_0x1a1568(0x1e9)]=JSON[_0x1a1568(0xb2)](_0xfc69a1[_0x1a1568(0xd0)]);}catch(_0x53761a){_0xa7d02c['dailyDigests']=[];}await updateBaselineStatus(_0xa7d02c);}async function saveDailyDigests(_0x1a8f35,_0x14d8c3=!![]){const _0xe4c2c7=a0_0x2280a8,_0x511ddb=_0x1a8f35[_0xe4c2c7(0x1b4)][_0xe4c2c7(0xf4)]||0x3c;_0x1a8f35[_0xe4c2c7(0x1e9)]['length']>_0x511ddb&&_0x1a8f35[_0xe4c2c7(0x1e9)][_0xe4c2c7(0x1bb)](0x0,_0x1a8f35['dailyDigests']['length']-_0x511ddb);await _0x1a8f35[_0xe4c2c7(0x16f)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x1a8f35['dailyDigests']),'ack':!![]});if(_0x14d8c3)await updateBaselineStatus(_0x1a8f35);}async function updateAnalysisHistory(_0x47a914,_0x587b90){const _0x2b7e7b=a0_0x2280a8;_0x47a914[_0x2b7e7b(0x1ad)][_0x2b7e7b(0xfa)](_0x587b90);if(_0x47a914['analysisHistory']['length']>HISTORY_MAX_SIZE)_0x47a914['analysisHistory'][_0x2b7e7b(0xd9)]();await _0x47a914[_0x2b7e7b(0x16f)](_0x2b7e7b(0xe8),{'val':JSON[_0x2b7e7b(0x1ef)](_0x47a914[_0x2b7e7b(0x1ad)]),'ack':!![]});}async function updateBaselineStatus(_0x31c4f7){const _0x2a62a4=a0_0x2280a8;if(!_0x31c4f7['isProVersion']){await _0x31c4f7['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x2a62a4(0x1e7),'ack':!![]});return;}const _0x2bb1f6=_0x31c4f7[_0x2a62a4(0x1e9)][_0x2a62a4(0x139)]>=(_0x31c4f7[_0x2a62a4(0x1b4)][_0x2a62a4(0x1c6)]||0x7)?_0x2a62a4(0x126)+_0x31c4f7[_0x2a62a4(0x1e9)][_0x2a62a4(0x139)]+_0x2a62a4(0x161):_0x2a62a4(0x1a6)+_0x31c4f7[_0x2a62a4(0x1e9)][_0x2a62a4(0x139)]+'/'+(_0x31c4f7[_0x2a62a4(0x1b4)][_0x2a62a4(0x1c6)]||0x7)+')';await _0x31c4f7['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x2bb1f6,'ack':!![]});}async function initSensorSubscriptions(_0x591bb3){const _0x4a69e3=a0_0x2280a8,_0x1a07b7=_0x591bb3['config'][_0x4a69e3(0x176)];if(_0x1a07b7)for(const _0x38ad61 of _0x1a07b7){await _0x591bb3[_0x4a69e3(0x10f)](_0x38ad61['id']);}}async function initPresenceSubscriptions(_0x3cbb3e){const _0xa85d56=a0_0x2280a8,_0x210135=_0x3cbb3e[_0xa85d56(0x1b4)][_0xa85d56(0x7c)];if(_0x210135)for(const _0x159204 of _0x210135){await _0x3cbb3e[_0xa85d56(0x10f)](_0x159204);}}async function setupTelegramListener(_0x52be96){const _0x42516a=a0_0x2280a8,_0x1ca84a=_0x52be96[_0x42516a(0x1b4)]['notifyTelegramInstance'];if(_0x52be96['config'][_0x42516a(0x196)]&&_0x1ca84a)await _0x52be96[_0x42516a(0x10f)](_0x1ca84a+'.communicate.request');}async function checkWifiPresence(_0x352c5e){const _0x5e75f8=a0_0x2280a8;try{const _0x4c32ae=_0x352c5e[_0x5e75f8(0x1b4)][_0x5e75f8(0x7c)]||[];let _0x102801=![];const _0x480fe7=[];for(const _0x116388 of _0x4c32ae){try{const _0xb0b4ec=await _0x352c5e[_0x5e75f8(0xe4)](_0x116388);_0xb0b4ec&&(_0xb0b4ec[_0x5e75f8(0xd0)]===!![]||_0xb0b4ec[_0x5e75f8(0xd0)]===_0x5e75f8(0x156)||_0xb0b4ec[_0x5e75f8(0xd0)]===0x1)&&(_0x102801=!![],_0x480fe7[_0x5e75f8(0x1f8)](_0x116388));}catch(_0x4ee8ac){}}return await _0x352c5e['setStateAsync'](_0x5e75f8(0x1ca),{'val':_0x480fe7[_0x5e75f8(0x15b)](',\x20'),'ack':!![]}),_0x102801&&(_0x352c5e['exitTimer']&&(_0x352c5e[_0x5e75f8(0x8e)][_0x5e75f8(0x114)]('WiFi\x20Presence\x20detected.'),abortExitTimer(_0x352c5e)),!_0x352c5e['isPresent']&&_0x352c5e[_0x5e75f8(0x12a)]===SYSTEM_MODES[_0x5e75f8(0x188)]&&await setPresence(_0x352c5e,!![])),_0x102801;}catch(_0x24a64a){return![];}}function startExitTimer(_0x210ab1){const _0x3ed0ee=a0_0x2280a8;abortExitTimer(_0x210ab1),_0x210ab1[_0x3ed0ee(0x19c)]=!![],_0x210ab1['exitGraceTimer']=setTimeout(()=>{const _0x5cf15d=_0x3ed0ee;_0x210ab1[_0x5cf15d(0x19c)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x210ab1[_0x3ed0ee(0xc5)]=setTimeout(()=>{const _0x2fa7d9=_0x3ed0ee;setPresence(_0x210ab1,![]),_0x210ab1[_0x2fa7d9(0xc5)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x3d5a5b){const _0x194f32=a0_0x2280a8;if(_0x3d5a5b[_0x194f32(0xc5)])clearTimeout(_0x3d5a5b[_0x194f32(0xc5)]);if(_0x3d5a5b[_0x194f32(0x7e)])clearTimeout(_0x3d5a5b['exitGraceTimer']);_0x3d5a5b[_0x194f32(0xc5)]=null,_0x3d5a5b[_0x194f32(0x7e)]=null,_0x3d5a5b[_0x194f32(0x19c)]=![];}async function setPresence(_0x973229,_0x3d40bf){const _0x3dceb2=a0_0x2280a8;if(_0x973229['isPresent']===_0x3d40bf)return;_0x973229[_0x3dceb2(0xb4)]=_0x3d40bf,await _0x973229['setStateAsync'](_0x3dceb2(0x97),{'val':_0x3d40bf,'ack':!![]});}async function executeAutomationAction(_0x429725){const _0x586ef0=a0_0x2280a8;try{const _0x30053b=await _0x429725[_0x586ef0(0x1cd)](_0x586ef0(0x1b6)),_0x5ab000=await _0x429725[_0x586ef0(0x1cd)](_0x586ef0(0xc1));if(_0x30053b&&_0x30053b['val']&&_0x5ab000){const _0x592780=_0x30053b[_0x586ef0(0xd0)];let _0x117bbb=_0x5ab000[_0x586ef0(0xd0)];try{_0x117bbb=JSON['parse'](_0x117bbb);}catch(_0x25f623){}_0x429725[_0x586ef0(0x8e)][_0x586ef0(0x114)](_0x586ef0(0x1c9)+_0x592780+_0x586ef0(0x76)+_0x117bbb),await _0x429725['setForeignStateAsync'](_0x592780,_0x117bbb);}else _0x429725[_0x586ef0(0x8e)][_0x586ef0(0x163)]('ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x1542b3){_0x429725[_0x586ef0(0x8e)][_0x586ef0(0x1ea)]('BUTLER\x20Execution\x20Error:\x20'+_0x1542b3['message']);}}async function processSensorEvent(_0x24fde2,_0x4a1c05,_0x4ded44,_0x1634d5){const _0x124a8f=a0_0x2280a8;if(!_0x1634d5)return;const _0x3152c2=_0x4ded44[_0x124a8f(0xd0)],_0x3a1b8f=Date[_0x124a8f(0x116)](),_0x55cd26=_0x24fde2[_0x124a8f(0x128)][_0x4a1c05];_0x24fde2[_0x124a8f(0x128)][_0x4a1c05]=_0x3152c2;if(!_0x1634d5[_0x124a8f(0xa1)]&&_0x55cd26!=undefined&&_0x55cd26==_0x3152c2)return;const _0x1f42f4=(_0x1634d5[_0x124a8f(0x84)]||'')[_0x124a8f(0x1b3)](),_0x10c454=_0x1f42f4[_0x124a8f(0x11d)](_0x124a8f(0x122))||_0x1f42f4[_0x124a8f(0x11d)](_0x124a8f(0x91))||_0x1f42f4['includes']('klima')||_0x1f42f4['includes'](_0x124a8f(0x175));_0x24fde2['isProVersion']&&_0x10c454&&recordThermodynamics(_0x24fde2,_0x4a1c05,_0x3152c2,_0x1634d5[_0x124a8f(0x107)]);const _0x5e35e9={'timestamp':_0x3a1b8f,'id':_0x4a1c05,'name':_0x1634d5[_0x124a8f(0x9b)],'type':_0x1634d5['type'],'location':_0x1634d5[_0x124a8f(0x107)],'value':_0x3152c2};_0x24fde2[_0x124a8f(0x1d9)][_0x124a8f(0xfa)](_0x5e35e9);if(_0x24fde2[_0x124a8f(0x1d9)]['length']>HISTORY_MAX_SIZE)_0x24fde2[_0x124a8f(0x1d9)][_0x124a8f(0xd9)]();await _0x24fde2[_0x124a8f(0x16f)](_0x124a8f(0x11c),{'val':JSON[_0x124a8f(0x1ef)](_0x5e35e9),'ack':!![]}),await _0x24fde2[_0x124a8f(0x16f)](_0x124a8f(0xed),{'val':JSON['stringify'](_0x24fde2[_0x124a8f(0x1d9)]),'ack':!![]});_0x24fde2['isProVersion']&&(_0x24fde2[_0x124a8f(0x19b)][_0x124a8f(0x1f8)](_0x5e35e9),await saveRawEventLog(_0x24fde2),recordSequence(_0x24fde2,_0x5e35e9));if(_0x1634d5[_0x124a8f(0xf0)]&&_0x3152c2===!![]){if(_0x24fde2[_0x124a8f(0xb4)]&&!_0x24fde2[_0x124a8f(0x19c)])startExitTimer(_0x24fde2);else{if(!_0x24fde2[_0x124a8f(0xb4)])setPresence(_0x24fde2,!![]);}}else{if(_0x1634d5[_0x124a8f(0x84)]===_0x124a8f(0x1fc)&&_0x3152c2===!![]){if(_0x24fde2[_0x124a8f(0xc5)])abortExitTimer(_0x24fde2);if(!_0x24fde2[_0x124a8f(0xb4)]&&_0x24fde2[_0x124a8f(0x12a)]===SYSTEM_MODES[_0x124a8f(0x188)])setPresence(_0x24fde2,!![]);}}}async function recordThermodynamics(_0x8bbc1d,_0x5ef772,_0x3ce126,_0x2c8673){const _0x400581=a0_0x2280a8,_0x14c928=await getOutsideTemperatureNumeric(_0x8bbc1d),_0x1264f8=await _0x8bbc1d[_0x400581(0x1cd)](_0x400581(0x133));let _0x1626a7=[];if(_0x1264f8&&_0x1264f8[_0x400581(0xd0)])try{_0x1626a7=JSON[_0x400581(0xb2)](_0x1264f8[_0x400581(0xd0)]);}catch(_0x59937a){}_0x1626a7[_0x400581(0x1f8)]({'ts':Date[_0x400581(0x116)](),'room':_0x2c8673||_0x400581(0x8c),'t_in':_0x3ce126,'t_out':_0x14c928});if(_0x1626a7[_0x400581(0x139)]>THERMO_LOG_SIZE)_0x1626a7[_0x400581(0x79)]();await _0x8bbc1d[_0x400581(0x16f)](_0x400581(0x133),{'val':JSON[_0x400581(0x1ef)](_0x1626a7),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x475331){const _0x26c7b4=a0_0x2280a8;if(_0x475331['config'][_0x26c7b4(0xce)])try{const _0x5d2f84=await _0x475331[_0x26c7b4(0xe4)](_0x475331['config'][_0x26c7b4(0xce)]);if(_0x5d2f84&&_0x5d2f84['val']!==undefined&&_0x5d2f84[_0x26c7b4(0xd0)]!==null)return parseFloat(_0x5d2f84[_0x26c7b4(0xd0)]);}catch(_0x527603){}const _0x86a668=_0x475331[_0x26c7b4(0x1b4)][_0x26c7b4(0x1c8)];if(!_0x475331[_0x26c7b4(0x1b4)][_0x26c7b4(0xcf)]||!_0x86a668)return null;try{let _0x5247a4='';if(_0x86a668[_0x26c7b4(0x11d)]('accuweather'))_0x5247a4=_0x86a668+_0x26c7b4(0x1bc);else{if(_0x86a668[_0x26c7b4(0x11d)]('daswetter'))_0x5247a4=_0x86a668+_0x26c7b4(0x80);else{if(_0x86a668[_0x26c7b4(0x11d)](_0x26c7b4(0x194)))_0x5247a4=_0x86a668+_0x26c7b4(0x153);else{if(_0x86a668['includes'](_0x26c7b4(0x151)))_0x5247a4=_0x86a668+_0x26c7b4(0x120);}}}if(_0x5247a4){const _0x98c825=await _0x475331[_0x26c7b4(0xe4)](_0x5247a4);if(_0x98c825&&_0x98c825[_0x26c7b4(0xd0)]!==undefined&&_0x98c825[_0x26c7b4(0xd0)]!==null)return parseFloat(_0x98c825[_0x26c7b4(0xd0)]);}}catch(_0x31edea){}return null;}async function recordSequence(_0x1d6a0c,_0x2f2dc6){const _0x25d034=a0_0x2280a8,_0x249473=(_0x2f2dc6[_0x25d034(0x84)]||'')[_0x25d034(0x1b3)](),_0x293999=[_0x25d034(0x1fc),_0x25d034(0x106),_0x25d034(0x18b),_0x25d034(0xcb),_0x25d034(0x189),'door',_0x25d034(0x15f),'window',_0x25d034(0x141),'contact',_0x25d034(0x1d2),'light',_0x25d034(0xae),'switch',_0x25d034(0xa6),_0x25d034(0x180),'lampe'];if(!_0x293999[_0x25d034(0x137)](_0x57563a=>_0x249473[_0x25d034(0x11d)](_0x57563a)))return;if(!_0x2f2dc6[_0x25d034(0x8f)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x25d034(0x1f8)]({'loc':_0x2f2dc6[_0x25d034(0x107)]||_0x25d034(0x8c),'id':_0x2f2dc6['id'],'ts':Date[_0x25d034(0x116)]()}),sequenceTimer=setTimeout(async()=>{if(activeSequence['length']>0x1)await saveCompletedSequence(_0x1d6a0c);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x14e900){const _0x4b1a3a=a0_0x2280a8;try{const _0x1cfb48=await _0x14e900['getStateAsync'](_0x4b1a3a(0x1a3));let _0x485f07=[];if(_0x1cfb48&&_0x1cfb48[_0x4b1a3a(0xd0)])try{_0x485f07=JSON[_0x4b1a3a(0xb2)](_0x1cfb48[_0x4b1a3a(0xd0)]);}catch(_0x1f1bcf){}const _0x267bb3=activeSequence[0x0]['ts'],_0x574376=activeSequence[_0x4b1a3a(0x174)](_0x3a609d=>({'loc':_0x3a609d['loc'],'t_delta':Math[_0x4b1a3a(0x102)]((_0x3a609d['ts']-_0x267bb3)/0x3e8)})),_0x4f6ff0={'timestamp':new Date(_0x267bb3)['toISOString'](),'steps':_0x574376,'duration':Math[_0x4b1a3a(0x102)]((activeSequence[activeSequence[_0x4b1a3a(0x139)]-0x1]['ts']-_0x267bb3)/0x3e8),'daytime':new Date(_0x267bb3)[_0x4b1a3a(0x10e)]()};_0x485f07[_0x4b1a3a(0x1f8)](_0x4f6ff0);if(_0x485f07[_0x4b1a3a(0x139)]>MAX_TRAINING_SET_SIZE)_0x485f07[_0x4b1a3a(0x79)]();await _0x14e900[_0x4b1a3a(0x16f)]('LTM.trainingData.sequences',{'val':JSON[_0x4b1a3a(0x1ef)](_0x485f07),'ack':!![]}),runSecurityCheck(_0x14e900,_0x4f6ff0);}catch(_0x4689ec){_0x14e900[_0x4b1a3a(0x8e)][_0x4b1a3a(0x1ea)](_0x4b1a3a(0x181)+_0x4689ec[_0x4b1a3a(0x147)]);}}function runSecurityCheck(_0x47ccc0,_0xc6a0e8){const _0x2c552d=a0_0x2280a8;if(!_0x47ccc0[_0x2c552d(0x9d)])return;sendToPython(_0x47ccc0,_0x2c552d(0x83),{'sequence':_0xc6a0e8});}async function createDailyDigest(_0x2e4b2e){const _0x4f617d=a0_0x2280a8;if(!_0x2e4b2e[_0x4f617d(0x9d)])return;await _0x2e4b2e[_0x4f617d(0x16f)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x2e4b2e['geminiModel']||_0x2e4b2e[_0x4f617d(0x19b)][_0x4f617d(0x139)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x2e4b2e[_0x4f617d(0x16f)](LTM_DP_STATUS,{'val':_0x4f617d(0xba),'ack':!![]});return;}const _0x455edb=JSON[_0x4f617d(0xb2)](JSON[_0x4f617d(0x1ef)](_0x2e4b2e['rawEventLog'])),_0x1ce2ec=_0x455edb['length'],_0x54db26=_0x4f617d(0xec)+JSON[_0x4f617d(0x1ef)](_0x455edb);try{const _0x2c519d=await _0x2e4b2e[_0x4f617d(0x1a0)]['generateContent'](_0x54db26),_0x2558f7=JSON[_0x4f617d(0xb2)](_0x2c519d[_0x4f617d(0x119)][_0x4f617d(0x10d)]()[_0x4f617d(0xbd)](/```json|```/g,'')[_0x4f617d(0xb9)]()),_0x574a25={'timestamp':new Date()[_0x4f617d(0xb1)](),'eventCount':_0x1ce2ec,'summary':_0x2558f7[_0x4f617d(0x198)]||_0x4f617d(0xc8),'activityLevel':_0x2558f7[_0x4f617d(0x12c)]||_0x4f617d(0x88),'systemMode':_0x2e4b2e['currentSystemMode']};_0x2e4b2e[_0x4f617d(0x1e9)]['push'](_0x574a25),await saveDailyDigests(_0x2e4b2e),_0x2e4b2e['rawEventLog']=[],await saveRawEventLog(_0x2e4b2e),await _0x2e4b2e['setStateAsync'](LTM_DP_STATUS,{'val':_0x4f617d(0x20a),'ack':!![]});if(_0x2e4b2e[_0x4f617d(0x9d)])sendToPython(_0x2e4b2e,_0x4f617d(0x11e),{'digest':_0x574a25});}catch(_0x2a49c1){_0x2e4b2e['log'][_0x4f617d(0x1ea)](_0x2a49c1[_0x4f617d(0x147)]);}}async function runBaselineDriftAnalysis(_0x41a6c2){const _0x4ed5aa=a0_0x2280a8;if(!_0x41a6c2['isProVersion']||!_0x41a6c2[_0x4ed5aa(0x1a0)])return;const _0x38c462=_0x41a6c2[_0x4ed5aa(0x1b4)][_0x4ed5aa(0x15a)]||0xe;if(_0x41a6c2[_0x4ed5aa(0x1e9)][_0x4ed5aa(0x139)]<_0x38c462+0x7){await _0x41a6c2[_0x4ed5aa(0x16f)](LTM_DP_DRIFT_STATUS,{'val':_0x4ed5aa(0xff),'ack':!![]});return;}const _0x2fb1c4=_0x41a6c2[_0x4ed5aa(0x1e9)]['slice'](-_0x38c462),_0xaa12df=_0x41a6c2['dailyDigests'][_0x4ed5aa(0x16c)](0x0,_0x41a6c2[_0x4ed5aa(0x1e9)][_0x4ed5aa(0x139)]-_0x38c462),_0x27f988=_0x4ed5aa(0x10c)+JSON['stringify'](_0xaa12df)+_0x4ed5aa(0x7a)+JSON['stringify'](_0x2fb1c4);try{const _0x53ef34=await _0x41a6c2['geminiModel']['generateContent'](_0x27f988),_0x4779f3=JSON[_0x4ed5aa(0xb2)](_0x53ef34['response'][_0x4ed5aa(0x10d)]()[_0x4ed5aa(0xbd)](/```json|```/g,'')[_0x4ed5aa(0xb9)]());_0x4779f3[_0x4ed5aa(0xaf)]&&(await _0x41a6c2[_0x4ed5aa(0x16f)](LTM_DP_DRIFT_STATUS,{'val':_0x4779f3[_0x4ed5aa(0xaf)],'ack':!![]}),await _0x41a6c2[_0x4ed5aa(0x16f)](LTM_DP_DRIFT_DETAILS,{'val':_0x4779f3[_0x4ed5aa(0x1d7)],'ack':!![]}),await _0x41a6c2[_0x4ed5aa(0x16f)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x4ed5aa(0x116)](),'ack':!![]}));}catch(_0x2cac09){}}async function sendMorningBriefing(_0x5ef988){const _0x539440=a0_0x2280a8;if(!_0x5ef988[_0x539440(0x1a0)])return;try{const _0x493896=_0x539440(0x129),_0x12d44b=await _0x5ef988[_0x539440(0x1a0)][_0x539440(0x160)](_0x493896),_0x5bad5a=_0x12d44b[_0x539440(0x119)][_0x539440(0x10d)]();sendNotification(_0x5ef988,_0x539440(0x13a)+_0x5bad5a);}catch(_0x5915a9){_0x5ef988[_0x539440(0x8e)]['error'](_0x539440(0xc2)+_0x5915a9[_0x539440(0x147)]);}}function stopPythonService(_0x239634){const _0x5daf60=a0_0x2280a8;if(_0x239634['pythonProcess']){try{_0x239634[_0x5daf60(0x1d4)][_0x5daf60(0x17b)]();}catch(_0x148487){}_0x239634['pythonProcess']=null;}}function sendToPython(_0x368613,_0x1deac9,_0x815680={}){const _0x56c53c=a0_0x2280a8;if(!_0x368613[_0x56c53c(0x1d4)]||!_0x368613[_0x56c53c(0x1d4)][_0x56c53c(0x20d)][_0x56c53c(0xc7)])return;const _0x186ff9=JSON[_0x56c53c(0x1ef)]({'command':_0x1deac9,..._0x815680});try{_0x368613['pythonProcess'][_0x56c53c(0x20d)][_0x56c53c(0xde)](_0x186ff9+'\x0a');}catch(_0x110dcd){}}function runPythonHealthCheck(_0x41ed76){const _0x411b80=a0_0x2280a8;if(!_0x41ed76['dailyDigests']||_0x41ed76[_0x411b80(0x1e9)][_0x411b80(0x139)]<0x2)return;const _0x18e706=_0x41ed76[_0x411b80(0x1e9)]['map'](_0xd7d3ff=>{const _0x39f4b9=_0x411b80,_0x54715f=(_0xd7d3ff['activityLevel']||'')[_0x39f4b9(0x1b3)]();return ACTIVITY_LEVEL_MAP[_0x54715f]||0x32;});sendToPython(_0x41ed76,_0x411b80(0x1f9),{'values':_0x18e706,'tag':_0x411b80(0x18e)});}function handlePythonResult(_0x300c8e,_0x52330d){const _0x5095a0=a0_0x2280a8;if(_0x52330d[_0x5095a0(0x84)]==='PONG')_0x300c8e[_0x5095a0(0x8e)][_0x5095a0(0x143)](_0x5095a0(0xd8));else{if(_0x52330d[_0x5095a0(0x84)]==='SECURITY_RESULT'){const {anomaly_score:_0x76e139,is_anomaly:_0x5eaf35,threshold:_0x46a65f,explanation:_0x35adfc}=_0x52330d[_0x5095a0(0x16d)];_0x300c8e[_0x5095a0(0x8e)]['info']('üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20'+_0x76e139[_0x5095a0(0x1d8)](0x5)+_0x5095a0(0x159)+(_0x5eaf35?_0x5095a0(0x117):'OK')),_0x300c8e[_0x5095a0(0x16f)]('analysis.security.lastScore',{'val':_0x76e139,'ack':!![]}),_0x300c8e['setStateAsync'](_0x5095a0(0x12d),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x46a65f)_0x300c8e['setStateAsync'](_0x5095a0(0x168),{'val':_0x46a65f,'ack':!![]});if(_0x5eaf35){let _0x2342a5=_0x5095a0(0x1e0)+_0x76e139[_0x5095a0(0x1d8)](0x4)+')';if(_0x35adfc&&_0x35adfc!==_0x5095a0(0x8c))_0x2342a5+=_0x5095a0(0x93)+_0x35adfc;_0x300c8e[_0x5095a0(0x16f)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x300c8e['setStateAsync'](_0x5095a0(0x18c),{'val':_0x2342a5,'ack':!![]}),sendNotification(_0x300c8e,_0x5095a0(0x11b)+_0x2342a5,![],!![]);}}else{if(_0x52330d[_0x5095a0(0x84)]==='TRAINING_COMPLETE'){const _0x215ffe=_0x52330d[_0x5095a0(0x16d)]['details']||'',_0x585ff9=_0x52330d[_0x5095a0(0x16d)][_0x5095a0(0x154)],_0x436543=_0x52330d[_0x5095a0(0x16d)]['success']?_0x5095a0(0x17d)+new Date()[_0x5095a0(0x110)]()+'\x20('+_0x215ffe+')':_0x5095a0(0x115)+_0x52330d[_0x5095a0(0x16d)][_0x5095a0(0xf9)];_0x300c8e[_0x5095a0(0x16f)](_0x5095a0(0x138),{'val':_0x436543,'ack':!![]});if(_0x52330d[_0x5095a0(0x16d)]['success']&&_0x585ff9)_0x300c8e[_0x5095a0(0x16f)](_0x5095a0(0x168),{'val':_0x585ff9,'ack':!![]});}else{if(_0x52330d[_0x5095a0(0x84)]===_0x5095a0(0x82)){const {patterns:_0x5c9387}=_0x52330d[_0x5095a0(0x16d)];if(_0x5c9387&&_0x5c9387[_0x5095a0(0x139)]>0x0){_0x300c8e[_0x5095a0(0x8e)][_0x5095a0(0x114)](_0x5095a0(0xe1)+_0x5c9387[_0x5095a0(0x139)]+'\x20new\x20patterns.'),_0x300c8e[_0x5095a0(0x16f)](_0x5095a0(0x200),{'val':JSON['stringify'](_0x5c9387),'ack':!![]});const _0x2d6a91=_0x5c9387[0x0],_0x380b63=_0x5095a0(0xea)+_0x2d6a91[_0x5095a0(0x1fd)]+'\x20('+(_0x2d6a91['confidence']*0x64)[_0x5095a0(0x1d8)](0x0)+'%)';_0x300c8e['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x300c8e[_0x5095a0(0x16f)](_0x5095a0(0xb6),{'val':_0x380b63,'ack':!![]});}else _0x300c8e[_0x5095a0(0x8e)][_0x5095a0(0x114)](_0x5095a0(0x14c)),_0x300c8e['setStateAsync'](_0x5095a0(0x152),{'val':![],'ack':!![]}),_0x300c8e['setStateAsync']('analysis.automation.detectedPatterns',{'val':'[]','ack':!![]});}else{if(_0x52330d['type']===_0x5095a0(0xbe)){if(_0x52330d[_0x5095a0(0x16d)][_0x5095a0(0x19f)])try{const _0x23d304=JSON['parse'](_0x52330d['payload'][_0x5095a0(0x19a)]);if(_0x23d304['insulation'])_0x300c8e[_0x5095a0(0x16f)](_0x5095a0(0x113),{'val':JSON[_0x5095a0(0x1ef)](_0x23d304[_0x5095a0(0x145)]),'ack':!![]});if(_0x23d304[_0x5095a0(0x199)])_0x300c8e[_0x5095a0(0x16f)](_0x5095a0(0x75),{'val':JSON[_0x5095a0(0x1ef)](_0x23d304[_0x5095a0(0x199)]),'ack':!![]});}catch(_0x2600a9){}}else{if(_0x52330d[_0x5095a0(0x84)]===_0x5095a0(0x171)){if(_0x52330d[_0x5095a0(0x16d)][_0x5095a0(0x19f)])_0x300c8e[_0x5095a0(0x8e)][_0x5095a0(0x114)](_0x5095a0(0xc9));}else{if(_0x52330d['type']===_0x5095a0(0x207))_0x300c8e[_0x5095a0(0x16f)](_0x5095a0(0x1a5),{'val':new Date()[_0x5095a0(0xb1)](),'ack':!![]}),_0x300c8e['setStateAsync'](_0x5095a0(0x72),{'val':_0x52330d[_0x5095a0(0x16d)][_0x5095a0(0x13d)],'ack':!![]});else{if(_0x52330d[_0x5095a0(0x84)]==='TREND_RESULT')_0x300c8e[_0x5095a0(0x16f)]('analysis.health.trendDiagnosis',{'val':_0x52330d['payload'][_0x5095a0(0x98)],'ack':!![]}),_0x300c8e['setStateAsync'](_0x5095a0(0x1ac),{'val':_0x52330d['payload'][_0x5095a0(0x16a)],'ack':!![]});else{if(_0x52330d[_0x5095a0(0x84)]===_0x5095a0(0x165)){const {speed_trend:_0x4d6bdc}=_0x52330d['payload'];if(_0x4d6bdc!==undefined)_0x300c8e[_0x5095a0(0x16f)](_0x5095a0(0x1bf),{'val':_0x4d6bdc,'ack':!![]});}else{if(_0x52330d[_0x5095a0(0x84)]===_0x5095a0(0x12b)){const {forecast:_0xdda771}=_0x52330d[_0x5095a0(0x16d)];if(_0xdda771)_0x300c8e[_0x5095a0(0x16f)]('analysis.energy.forecast',{'val':JSON['stringify'](_0xdda771),'ack':!![]});}else{if(_0x52330d[_0x5095a0(0x84)]===_0x5095a0(0x94)){const {data:_0x59851b}=_0x52330d[_0x5095a0(0x16d)];_0x59851b&&(_0x300c8e[_0x5095a0(0x8e)]['info'](_0x5095a0(0x1fb)),_0x300c8e[_0x5095a0(0x16f)](_0x5095a0(0xa4),{'val':JSON[_0x5095a0(0x1ef)](_0x59851b),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x25e958){const _0x270cdb=a0_0x2280a8;let _0x43d7ae=_0x270cdb(0x131);if(fs[_0x270cdb(0x144)](installer['PYTHON_EXE']))_0x43d7ae=installer[_0x270cdb(0x1b7)];try{const _0x565b3b=path[_0x270cdb(0x15b)](__dirname,_0x270cdb(0x100),_0x270cdb(0x9a));_0x25e958[_0x270cdb(0x1d4)]=spawn(_0x43d7ae,[_0x565b3b]),_0x25e958[_0x270cdb(0x1d4)]['stdout']['on'](_0x270cdb(0x190),_0x201c5a=>{const _0x5ae0f0=_0x270cdb,_0x3d1147=_0x201c5a[_0x5ae0f0(0x178)]()[_0x5ae0f0(0x1db)]('\x0a');_0x3d1147[_0x5ae0f0(0x18a)](_0x5ac5ef=>{const _0x29a228=_0x5ae0f0,_0x2a0c18=_0x5ac5ef['trim']();if(!_0x2a0c18)return;if(_0x2a0c18[_0x29a228(0x17c)](_0x29a228(0xa2)))_0x25e958[_0x29a228(0x8e)]['debug'](_0x29a228(0xdb)+_0x2a0c18[_0x29a228(0xf1)](0x5)['trim']());else{if(_0x2a0c18['startsWith']('[RESULT]'))try{const _0x4ef1f2=JSON[_0x29a228(0xb2)](_0x2a0c18[_0x29a228(0xf1)](0x8)[_0x29a228(0xb9)]());handlePythonResult(_0x25e958,_0x4ef1f2);}catch(_0x21d214){}}});}),_0x25e958[_0x270cdb(0x1d4)]['on']('close',_0xa1252b=>{const _0x4dcf1b=_0x270cdb;_0x25e958[_0x4dcf1b(0x1d4)]=null;});}catch(_0x50d915){_0x25e958['log']['error'](_0x270cdb(0x1b5)+_0x50d915[_0x270cdb(0x147)]);}}async function runAutopilot(_0x296e53){const _0x2d4337=a0_0x2280a8;_0x296e53[_0x2d4337(0x8e)][_0x2d4337(0x143)](_0x2d4337(0x184)),await runGeminiAnalysis(_0x296e53),updateHealthVector(_0x296e53),triggerGaitAnalysis(_0x296e53),triggerEnergyPrediction(_0x296e53);}async function triggerGaitAnalysis(_0x44343e){const _0x5ac8f1=a0_0x2280a8;if(!_0x44343e['isProVersion'])return;try{const _0x298b96=await _0x44343e[_0x5ac8f1(0x1cd)](_0x5ac8f1(0x1a3));_0x298b96&&_0x298b96[_0x5ac8f1(0xd0)]&&sendToPython(_0x44343e,_0x5ac8f1(0x10a),{'sequences':JSON[_0x5ac8f1(0xb2)](_0x298b96['val'])});}catch(_0x5e675f){}}async function triggerEnergyPrediction(_0x227b7f){const _0x1b1488=a0_0x2280a8;if(!_0x227b7f[_0x1b1488(0x9d)])return;try{const _0x480db4=await getOutsideTemperatureNumeric(_0x227b7f);if(_0x480db4===null)return;const _0x514107={},_0x59e640=_0x227b7f[_0x1b1488(0x1b4)][_0x1b1488(0x176)]||[];for(const _0x31373e of _0x59e640){if(_0x31373e[_0x1b1488(0x84)]==='temperature'&&_0x31373e[_0x1b1488(0x107)]){const _0x2d4e56=_0x227b7f['sensorLastValues'][_0x31373e['id']];if(_0x2d4e56!==undefined)_0x514107[_0x31373e[_0x1b1488(0x107)]]=_0x2d4e56;}}Object['keys'](_0x514107)['length']>0x0&&sendToPython(_0x227b7f,'PREDICT_ENERGY',{'current_temps':_0x514107,'t_out':_0x480db4});}catch(_0x523de8){}}function updateHealthVector(_0x3df7a1){const _0xa48104=a0_0x2280a8;if(!_0x3df7a1[_0xa48104(0x19b)]||_0x3df7a1['rawEventLog'][_0xa48104(0x139)]===0x0)return;const _0x1e3aec=new Array(0x60)[_0xa48104(0x1ae)](0x0),_0x1a2689=new Date()['setHours'](0x0,0x0,0x0,0x0);_0x3df7a1['rawEventLog'][_0xa48104(0x18a)](_0x575afb=>{const _0x192088=_0xa48104,_0x4c13a1=new Date(_0x575afb[_0x192088(0x1d6)]);if(_0x4c13a1[_0x192088(0x1eb)]()>=_0x1a2689){const _0x4df526=_0x4c13a1[_0x192088(0x10e)](),_0x5555e9=_0x4c13a1[_0x192088(0xa7)](),_0x284bb0=_0x4df526*0x4+Math[_0x192088(0x124)](_0x5555e9/0xf);if(_0x284bb0>=0x0&&_0x284bb0<0x60)_0x1e3aec[_0x284bb0]++;}}),_0x3df7a1[_0xa48104(0x16f)]('analysis.health.todayVector',{'val':JSON[_0xa48104(0x1ef)](_0x1e3aec),'ack':!![]});}async function getWeatherContext(_0x5326b9){const _0x3de55a=a0_0x2280a8;if(!_0x5326b9[_0x3de55a(0x1b4)][_0x3de55a(0xcf)]||!_0x5326b9[_0x3de55a(0x1b4)][_0x3de55a(0x1c8)])return _0x3de55a(0x14f);try{const _0x51563a=_0x5326b9['config'][_0x3de55a(0x1c8)];let _0x4e53ed=await _0x5326b9[_0x3de55a(0xe4)](_0x51563a+'.Current.Temperature');if(!_0x4e53ed)_0x4e53ed=await _0x5326b9[_0x3de55a(0xe4)](_0x51563a+_0x3de55a(0x153));let _0x40edf4=await _0x5326b9[_0x3de55a(0xe4)](_0x51563a+_0x3de55a(0x1ba));if(!_0x40edf4)_0x40edf4=await _0x5326b9['getForeignStateAsync'](_0x51563a+_0x3de55a(0x111));if(_0x4e53ed&&_0x40edf4)return _0x4e53ed[_0x3de55a(0xd0)]+_0x3de55a(0x177)+_0x40edf4['val'];}catch(_0x2b681e){}return _0x3de55a(0x77);}async function getCalendarContext(_0x115db5){const _0x94f1fc=a0_0x2280a8;if(!_0x115db5[_0x94f1fc(0x1b4)][_0x94f1fc(0x173)]||!_0x115db5[_0x94f1fc(0x1b4)][_0x94f1fc(0xb0)])return _0x94f1fc(0x95);return'Keine\x20Termine.';}function a0_0x5472(){const _0x7dbe06=['modeResetJob','Heating\x20Score','ltmLtbWindowDays','N/A','system.config','Daily\x20Digests','object','reason','unshift','getCalendarNames','extendObjectAsync','apiKey','Trigger\x20Analysis','N/A\x20(Learning)','python_service','LTM.processingStatus','round','getOverviewData','command','Topology\x20Error:\x20','bewegung','location','analysis.health','vacation','ANALYZE_GAIT','Energy\x20Intelligence','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','text','getHours','subscribeForeignStatesAsync','toLocaleTimeString','.forecast.current.state','simulateButler','analysis.energy.insulationScore','info','Failed:\x20','now','ANOMALY','Trend','response','analysis.isAlert','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','events.lastEvent','includes','ANALYZE_HEALTH','party','.forecast.current.temp','boolean','temperature','channel','floor','‚ö†Ô∏è\x20ALARM:\x20','Aktiv\x20(','setupLtmScheduler','sensorLastValues','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','currentSystemMode','ENERGY_PREDICT_RESULT','activityLevel','analysis.security.lastCheck','automation.triggerAction','analysis.energy.forecast','AI\x20Training','python3','cogni-living','LTM.trainingData.thermodynamics','analysis.triggerBriefing','Last\x20raw\x20event','ack','some','analysis.training.status','length','üåÖ\x20Morning\x20Briefing:\x0a','guest','getEnums','is_anomaly','getForeignObjectsAsync','detected','LTM.triggerDailyDigest','fenster','onReady','debug','existsSync','insulation','TRAIN_SECURITY','message','@iobroker/adapter-core','106562jKddGu','date','apply','üõãÔ∏è\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','namespace','from','Wetterdaten\x20deaktiviert.','Today\x20Vector\x20(15m)','weatherunderground','analysis.automation.patternDetected','.forecast.current.temperature','threshold','Missing\x20data','online','Target\x20Value','status','\x20->\x20','ltmStbWindowDays','join','onUnload','.\x20WETTER:\x20','setState','t√ºr','generateContent','\x20Tage)','getGenerativeModel','warn','string','GAIT_RESULT','state','analysis.training.triggerEnergy','analysis.security.currentThreshold','longitude','change_percent','onMessage','slice','payload','Anomaly\x20Score','setStateAsync','3540468Agufxe','HEALTH_TRAIN_RESULT','instance','useCalendar','map','heizung','devices','¬∞C,\x20','toString','Trigger\x20Briefing','unknown','kill','startsWith','Success:\x20','system.mode','automationProposal','dimmer','[RECORDER]\x20Error:\x20','livingContext','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','ü§ñ\x20Autopilot:\x20Running\x20periodic\x20analysis...','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','systemConfig','SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20','NORMAL','occupancy','forEach','pr√§senz','analysis.alertReason','autoApply','Activity-Level','analysis.health.trendDiagnosis','data','lastAlertState','Sec-Training\x20started...','rating','openweathermap','Train\x20Energy','notifyTelegramEnabled','analysis.training.triggerTopology','summary','heating','details','rawEventLog','isGracePeriodActive','12ubTqzS','getLtmData','success','geminiModel','üöÄ\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','sendTo','LTM.trainingData.sequences','path','analysis.health.lastCheck','Lernphase\x20(','subscribeStates','scanForDevices','Health\x20Analysis','dependencyInstallInProgress','scanDevices','analysis.health.trendValue','analysisHistory','fill','unload','Train\x20Comfort','Activity\x20Summary','3162480AvqHVw','toLowerCase','config','Error\x20launching\x20Python:\x20','analysis.automation.targetId','PYTHON_EXE','üõãÔ∏è\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','Trigger\x20Action','.Current.WeatherText','splice','.Current.Temperature','isAlert','analysisInterval','analysis.health.gaitSpeed','Kein\x20API\x20Key.',')\x20-\x20SAFE\x20BOOT','üß™\x20Simulating\x20Butler\x20Proposal:\x20','communicate.request','Pattern\x20Detected','getDate','minDaysForBaseline','find','weatherInstance','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','system.presenceWho','4270535DDJIzL','LTM.driftAnalysis.lastCheck','getStateAsync','Event\x20History','events.history_debug_00','TRAIN_HEALTH','LTM.driftAnalysis.baselineDrift','kontakt','Gemini\x20Init\x20Error:\x20','pythonProcess','6904944FanGEd','timestamp','driftDetails','toFixed','eventHistory','enum','split','analysisTimer','Analysiere\x20ausgewogen.','Topology\x20Matrix','LTM.driftAnalysis.driftDetails','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','System\x20Mode','briefingJob','json','Build\x20Topology','getMonth','onStateChange','Deaktiviert\x20(Pro-Feature)','üï∏Ô∏è\x20Building\x20Topology\x20Matrix...','dailyDigests','error','getTime','ltmJob','Description','GUEST','stringify','Detected\x20Patterns','analysis.activitySummary','Temperature\x20Forecast','.\x20EMERGENCY:\x20','LTM.driftAnalysis','application/json','analysis.security','analysis.training','push','ANALYZE_TREND','alertReason','üï∏Ô∏è\x20Topology\x20Map\x20updated.','motion','rule','Anomaly\x20Detected','Security\x20Monitor','analysis.automation.detectedPatterns','number','genAI','indicator','Insulation\x20Score','analysis.training.triggerHealth','driftAnalysisTimer','HEALTH_RESULT','analysis.automation.autoApply','.\x20SYSTEM_MODE:\x20','Success','values','licenseKey','stdin','filter','analysis.training.triggerComfort','Raw\x20Log','Auto\x20Apply','analysis.health.isAnomaly','Thermodynamics','inactivityThresholdHours','analysis.energy.heatingScore','\x20=\x20','Keine\x20Wetterdaten\x20verf√ºgbar.','Restoring\x20sensor\x20cache...','shift','\x0aSTB:\x20','system','presenceDevices','main','exitGraceTimer','Last\x20Check','.NextHours.Location_1.Day_1.current.temp_value','latitude','COMFORT_RESULT','ANALYZE_SEQUENCE','type','dismissAutomation','1543527PxUZzD','text.alarm','normal','enum.functions.*','cogni-living\x20adapter\x20starting\x20(v','description','Unknown','Train\x20Health','log','value','OK:\x20','temperatur','.\x20ANWESEND:\x20','\x0aGrund:\x20','TOPOLOGY_RESULT','Kalender\x20deaktiviert.','LTM.dailyDigests','system.isPresent','diagnosis','4HAlgLs','service.py','name','getObjectAsync','isProVersion','LTM.rawEventLog','Training\x20Error:\x20','üìù\x20Feedback\x20received:\x20','logDuplicates','[LOG]','Keine\x20Details.','analysis.security.topologyMatrix','targetValue','schalter','getMinutes','geminiApiKey','Unbekannt','./lib/installer','PARTY','./lib/scanner','System','licht','baselineDrift','calendarInstance','toISOString','parse','Gemini\x20Error:\x20','isPresent','indicator.alarm','analysis.automation.description','common','targetId','trim','Skipped\x20(No\x20AI\x20or\x20Data)','analysis.automation.triggerAction','Training\x20Status','replace','ENERGY_TRAIN_RESULT','delObjectAsync','bind','analysis.automation.targetValue','Briefing\x20Error:\x20','setupDriftAnalysisScheduler','üß†\x20Triggering\x20Security\x20Training...','exitTimer','(((.+)+)+)+$','writable','Digest','‚úÖ\x20HEALTH\x20TRAINED.','cancel','presence','getForeignObjectAsync','3031630fxYJnK','outdoorSensorId','useWeather','val','analysis.trigger','triggerDailyDigest','button','Gemini\x20AI\x20initialized.','Fokus\x20auf\x20Komfort.','analysis.security.lastScore','callback','üêç\x20Python\x20Pong','pop','Who\x20is\x20present?','[PYTHON]\x20','testContext','analysis.training.triggerSecurity','write','ready','setObjectNotExistsAsync','üõãÔ∏è\x20BUTLER:\x20Found\x20','BUILD_TOPOLOGY','.\x20EVENTS:\x20','getForeignStateAsync','Current\x20Threshold','aiPersona','PRIORIT√ÑT:\x20Gesundheit/AAL.','analysis.analysisHistory','analysis.history_debug_00','Regel\x20erkannt:\x20','systemUUID','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','events.history','Gait\x20Speed\x20Trend','LTM.baselineStatus','isExit','substring'];a0_0x5472=function(){return _0x7dbe06;};return a0_0x5472();}async function getCalendarNames(_0x18efa1,_0x1706b0){return[];}async function saveFeedback(_0x49af43,_0x558267){const _0x37c78e=a0_0x2280a8;_0x49af43['log'][_0x37c78e(0x114)](_0x37c78e(0xa0)+_0x558267[_0x37c78e(0x193)]);}async function runGeminiAnalysis(_0x194562,_0x12cdd2=''){const _0x35c1bd=a0_0x2280a8;if(!_0x194562[_0x35c1bd(0x1a0)])return;if(_0x194562[_0x35c1bd(0x1d9)][_0x35c1bd(0x139)]===0x0)return;const _0x5a35f1=_0x194562[_0x35c1bd(0x1d9)][_0x35c1bd(0x16c)](0x0,0xf),_0x235d91=await getWeatherContext(_0x194562),_0x32e783=_0x194562[_0x35c1bd(0x12a)],_0x2cf610=PERSONA_MAPPING[_0x194562[_0x35c1bd(0x1b4)][_0x35c1bd(0xe6)]||'generic'],_0x26c49c=_0x194562['config'][_0x35c1bd(0x182)]||_0x35c1bd(0xa3);let _0xefd411=_0x35c1bd(0xa9);try{const _0x106e18=await _0x194562[_0x35c1bd(0x1cd)](_0x35c1bd(0x1ca));if(_0x106e18&&_0x106e18['val'])_0xefd411=_0x106e18[_0x35c1bd(0xd0)];}catch(_0x225536){}let _0x186f35=![];try{const _0x340dda=await _0x194562[_0x35c1bd(0x1cd)](_0x35c1bd(0x208));if(_0x340dda&&_0x340dda['val'])_0x186f35=!![];}catch(_0x549787){}const _0xf065e8=_0x35c1bd(0x183)+_0x2cf610+'.\x20KONTEXT:\x20'+_0x26c49c+_0x35c1bd(0x209)+_0x32e783+_0x35c1bd(0x15d)+_0x235d91+_0x35c1bd(0x92)+_0xefd411+_0x35c1bd(0xe3)+JSON[_0x35c1bd(0x1ef)](_0x5a35f1)+_0x35c1bd(0x1f3)+_0x12cdd2+_0x35c1bd(0x185);try{const _0x2ed22d=await _0x194562[_0x35c1bd(0x1a0)]['generateContent'](_0xf065e8),_0x45f173=JSON[_0x35c1bd(0xb2)](_0x2ed22d[_0x35c1bd(0x119)][_0x35c1bd(0x10d)]()[_0x35c1bd(0xbd)](/```json|```/g,'')['trim']());await _0x194562['setStateAsync']('analysis.lastResult',{'val':JSON[_0x35c1bd(0x1ef)](_0x45f173),'ack':!![]});if(_0x45f173[_0x35c1bd(0x198)])await _0x194562['setStateAsync'](_0x35c1bd(0x1f1),{'val':_0x45f173['summary'],'ack':!![]});const _0x47f830={'timestamp':Date['now'](),'id':Date[_0x35c1bd(0x116)]()[_0x35c1bd(0x178)](),'analysis':{'activity':{'summary':_0x45f173[_0x35c1bd(0x198)],'isAlert':_0x45f173[_0x35c1bd(0x1bd)],'alertReason':_0x45f173['alertReason']},'comfort':{'automationProposal':_0x45f173[_0x35c1bd(0x17f)]}}};await updateAnalysisHistory(_0x194562,_0x47f830);const _0x572dfe=_0x45f173['isAlert']||![];_0x572dfe!==_0x194562[_0x35c1bd(0x191)]&&(await _0x194562[_0x35c1bd(0x16f)](_0x35c1bd(0x11a),{'val':_0x572dfe,'ack':!![]}),_0x194562[_0x35c1bd(0x191)]=_0x572dfe,_0x572dfe&&(await _0x194562['setStateAsync'](_0x35c1bd(0x18c),{'val':_0x45f173['alertReason'],'ack':!![]}),sendNotification(_0x194562,_0x35c1bd(0x125)+_0x45f173[_0x35c1bd(0x1fa)],![],_0x45f173['isEmergency'])));if(_0x45f173[_0x35c1bd(0x17f)]&&_0x45f173[_0x35c1bd(0x17f)]['detected']){await _0x194562[_0x35c1bd(0x16f)](_0x35c1bd(0x152),{'val':!![],'ack':!![]}),await _0x194562['setStateAsync'](_0x35c1bd(0xb6),{'val':_0x45f173[_0x35c1bd(0x17f)][_0x35c1bd(0x8b)],'ack':!![]}),await _0x194562['setStateAsync'](_0x35c1bd(0x1b6),{'val':_0x45f173['automationProposal']['targetId'],'ack':!![]}),await _0x194562[_0x35c1bd(0x16f)]('analysis.automation.targetValue',{'val':JSON[_0x35c1bd(0x1ef)](_0x45f173['automationProposal']['targetValue']),'ack':!![]});if(_0x186f35)executeAutomationAction(_0x194562);}}catch(_0x242ad4){_0x194562[_0x35c1bd(0x8e)][_0x35c1bd(0x1ea)](_0x35c1bd(0xb3)+_0x242ad4[_0x35c1bd(0x147)]);}}async function startSystem(_0x4e4fda){const _0x53c21f=a0_0x2280a8;_0x4e4fda['log'][_0x53c21f(0x114)](_0x53c21f(0x1a1)),await initZombies(_0x4e4fda);try{_0x4e4fda[_0x53c21f(0x9d)]=await checkLicense(_0x4e4fda[_0x53c21f(0x1b4)][_0x53c21f(0x20c)]);}catch(_0x293250){}if(!_0x4e4fda[_0x53c21f(0x1b4)][_0x53c21f(0x74)]||_0x4e4fda['config'][_0x53c21f(0x74)]<0.1)_0x4e4fda['config'][_0x53c21f(0x74)]=0xc;await initHistory(_0x4e4fda),await initSystemConfig(_0x4e4fda);if(_0x4e4fda['config'][_0x53c21f(0xa8)])try{_0x4e4fda[_0x53c21f(0x202)]=new GoogleGenerativeAI(_0x4e4fda[_0x53c21f(0x1b4)][_0x53c21f(0xa8)]),_0x4e4fda[_0x53c21f(0x1a0)]=_0x4e4fda[_0x53c21f(0x202)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x53c21f(0x1f5)}}),_0x4e4fda['log'][_0x53c21f(0x114)](_0x53c21f(0xd4));}catch(_0x193499){_0x4e4fda[_0x53c21f(0x8e)][_0x53c21f(0x1ea)](_0x53c21f(0x1d3)+_0x193499[_0x53c21f(0x147)]);}await createAllObjects(_0x4e4fda),await loadSystemMode(_0x4e4fda),await loadRawEventLog(_0x4e4fda),await loadDailyDigests(_0x4e4fda),_0x4e4fda['subscribeStates'](_0x53c21f(0xd1)),_0x4e4fda[_0x53c21f(0x1a7)](LTM_DP_TRIGGER_DIGEST),_0x4e4fda[_0x53c21f(0x1a7)]('system.mode'),_0x4e4fda[_0x53c21f(0x1a7)]('analysis.triggerBriefing'),_0x4e4fda[_0x53c21f(0x1a7)](_0x53c21f(0xbb)),_0x4e4fda[_0x53c21f(0x1a7)]('analysis.automation.autoApply'),_0x4e4fda[_0x53c21f(0x1a7)](_0x53c21f(0xdd)),_0x4e4fda[_0x53c21f(0x1a7)](_0x53c21f(0x205)),_0x4e4fda['subscribeStates'](_0x53c21f(0x167)),_0x4e4fda[_0x53c21f(0x1a7)](_0x53c21f(0x6f)),_0x4e4fda[_0x53c21f(0x1a7)]('analysis.training.triggerTopology'),await initSensorSubscriptions(_0x4e4fda),await initPresenceSubscriptions(_0x4e4fda),await setupTelegramListener(_0x4e4fda),setTimeout(()=>checkWifiPresence(_0x4e4fda),0x1388);if(_0x4e4fda[_0x53c21f(0x1dc)])clearInterval(_0x4e4fda[_0x53c21f(0x1dc)]);const _0x50e463=_0x4e4fda[_0x53c21f(0x1b4)][_0x53c21f(0x1be)]||0xf;_0x50e463>0x0&&(_0x4e4fda[_0x53c21f(0x1dc)]=setInterval(()=>{runAutopilot(_0x4e4fda);},_0x50e463*0x3c*0x3e8)),schedulers[_0x53c21f(0x127)](_0x4e4fda,()=>createDailyDigest(_0x4e4fda)),schedulers['setupModeResetScheduler'](_0x4e4fda),schedulers[_0x53c21f(0xc3)](_0x4e4fda,()=>runBaselineDriftAnalysis(_0x4e4fda)),schedulers['setupBriefingScheduler'](_0x4e4fda,()=>sendMorningBriefing(_0x4e4fda)),startPythonService(_0x4e4fda),setTimeout(()=>{const _0x4869dd=_0x53c21f;_0x4e4fda[_0x4869dd(0x1d4)]&&(runPythonHealthCheck(_0x4e4fda),triggerGaitAnalysis(_0x4e4fda),triggerEnergyPrediction(_0x4e4fda)),updateHealthVector(_0x4e4fda);},0x1388);}class CogniLiving extends utils['Adapter']{constructor(_0x41c73d){const _0x17eb7d=a0_0x2280a8;super({..._0x41c73d,'name':_0x17eb7d(0x132)}),this['eventHistory']=[],this[_0x17eb7d(0x1ad)]=[],this[_0x17eb7d(0x19b)]=[],this['dailyDigests']=[],this[_0x17eb7d(0x128)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x17eb7d(0xb4)]=!![],this[_0x17eb7d(0xc5)]=null,this['exitGraceTimer']=null,this['isGracePeriodActive']=![],this['genAI']=null,this['geminiModel']=null,this['currentSystemMode']=SYSTEM_MODES[_0x17eb7d(0x188)],this[_0x17eb7d(0x9d)]=![],this[_0x17eb7d(0x191)]=![],this[_0x17eb7d(0xeb)]=_0x17eb7d(0x17a),this['analysisTimer']=null,this[_0x17eb7d(0x1ec)]=null,this[_0x17eb7d(0xf2)]=null,this[_0x17eb7d(0x206)]=null,this[_0x17eb7d(0x1e2)]=null,this[_0x17eb7d(0x1d4)]=null,this[_0x17eb7d(0x1aa)]=![],this['on'](_0x17eb7d(0xdf),this['onReady'][_0x17eb7d(0xc0)](this)),this['on']('stateChange',this[_0x17eb7d(0x1e6)]['bind'](this)),this['on'](_0x17eb7d(0x1af),this[_0x17eb7d(0x15c)][_0x17eb7d(0xc0)](this)),this['on'](_0x17eb7d(0x147),this[_0x17eb7d(0x16b)][_0x17eb7d(0xc0)](this));}async[a0_0x2280a8(0x142)](){const _0x3fe276=a0_0x2280a8;this[_0x3fe276(0x8e)][_0x3fe276(0x114)](_0x3fe276(0x8a)+this['version']+_0x3fe276(0x1c1));if(!installer['checkAndInstall'](this,()=>startSystem(this)))return;}['onUnload'](_0x3f0fd1){const _0x336624=a0_0x2280a8;if(this[_0x336624(0x1dc)])clearInterval(this[_0x336624(0x1dc)]);if(this['driftAnalysisTimer'])clearInterval(this[_0x336624(0x206)]);if(this[_0x336624(0x1ec)])this[_0x336624(0x1ec)][_0x336624(0xca)]();if(this[_0x336624(0xf2)])this[_0x336624(0xf2)]['cancel']();if(this[_0x336624(0x1e2)])this[_0x336624(0x1e2)][_0x336624(0xca)]();if(this['exitTimer'])clearTimeout(this[_0x336624(0xc5)]);if(this['exitGraceTimer'])clearTimeout(this[_0x336624(0x7e)]);stopPythonService(this),_0x3f0fd1();}async[a0_0x2280a8(0x1e6)](_0x53575b,_0x3b59f4){const _0x52e90c=a0_0x2280a8;if(!_0x3b59f4||this[_0x52e90c(0x1aa)])return;if(_0x53575b[_0x52e90c(0x11d)]('telegram')&&_0x53575b['endsWith'](_0x52e90c(0x1c3))&&_0x3b59f4['val']){await handleTelegramResponse(this,_0x3b59f4[_0x52e90c(0xd0)]);return;}if(_0x53575b===this[_0x52e90c(0x14d)]+'.'+SYSTEM_DP_MODE){if(_0x3b59f4[_0x52e90c(0xd0)]&&Object[_0x52e90c(0x20b)](SYSTEM_MODES)[_0x52e90c(0x11d)](_0x3b59f4['val'])){this[_0x52e90c(0x12a)]=_0x3b59f4[_0x52e90c(0xd0)];if(_0x3b59f4[_0x52e90c(0xd0)]===SYSTEM_MODES['VACATION'])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x3b59f4[_0x52e90c(0x136)])this[_0x52e90c(0x15e)](_0x53575b,{'val':this[_0x52e90c(0x12a)],'ack':!![]});return;}if(!_0x3b59f4[_0x52e90c(0x136)]){_0x53575b['includes'](_0x52e90c(0xd1))&&_0x3b59f4[_0x52e90c(0xd0)]&&(this[_0x52e90c(0x15e)](_0x53575b,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x53575b[_0x52e90c(0x11d)](_0x52e90c(0xd2))&&_0x3b59f4[_0x52e90c(0xd0)]){this[_0x52e90c(0x15e)](_0x53575b,{'val':![],'ack':!![]});if(this[_0x52e90c(0x9d)])createDailyDigest(this);}_0x53575b[_0x52e90c(0x11d)]('triggerBriefing')&&_0x3b59f4[_0x52e90c(0xd0)]&&(this['setState'](_0x53575b,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x53575b[_0x52e90c(0x11d)](_0x52e90c(0x12e))&&_0x3b59f4[_0x52e90c(0xd0)]&&(this[_0x52e90c(0x15e)](_0x53575b,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x53575b[_0x52e90c(0x11d)](_0x52e90c(0xdd))&&_0x3b59f4[_0x52e90c(0xd0)]){this[_0x52e90c(0x15e)](_0x53575b,{'val':![],'ack':!![]});if(this[_0x52e90c(0x9d)])try{const _0x384039=await this[_0x52e90c(0x1cd)]('LTM.trainingData.sequences');if(_0x384039&&_0x384039[_0x52e90c(0xd0)]){const _0x5506d2=JSON[_0x52e90c(0xb2)](_0x384039[_0x52e90c(0xd0)]);this['log'][_0x52e90c(0x114)](_0x52e90c(0xc4)),this[_0x52e90c(0x16f)]('analysis.training.status',{'val':_0x52e90c(0x192),'ack':!![]}),sendToPython(this,_0x52e90c(0x146),{'sequences':_0x5506d2});}}catch(_0x491543){this[_0x52e90c(0x8e)][_0x52e90c(0x1ea)](_0x52e90c(0x9f)+_0x491543['message']);}}if(_0x53575b[_0x52e90c(0x11d)](_0x52e90c(0x205))&&_0x3b59f4[_0x52e90c(0xd0)]){this[_0x52e90c(0x15e)](_0x53575b,{'val':![],'ack':!![]});if(this[_0x52e90c(0x9d)])try{const _0xe1dbe0=await this[_0x52e90c(0x1cd)](LTM_DP_DAILY_DIGESTS);if(_0xe1dbe0&&_0xe1dbe0[_0x52e90c(0xd0)])sendToPython(this,_0x52e90c(0x1d0),{'digests':JSON[_0x52e90c(0xb2)](_0xe1dbe0['val'])});}catch(_0x376250){}}if(_0x53575b['includes'](_0x52e90c(0x167))&&_0x3b59f4[_0x52e90c(0xd0)]){this[_0x52e90c(0x15e)](_0x53575b,{'val':![],'ack':!![]});if(this[_0x52e90c(0x9d)])try{const _0xef48db=await this[_0x52e90c(0x1cd)](_0x52e90c(0x133));if(_0xef48db&&_0xef48db[_0x52e90c(0xd0)])sendToPython(this,'TRAIN_ENERGY',{'points':JSON[_0x52e90c(0xb2)](_0xef48db[_0x52e90c(0xd0)])});}catch(_0x34b24a){}}if(_0x53575b[_0x52e90c(0x11d)](_0x52e90c(0x6f))&&_0x3b59f4[_0x52e90c(0xd0)]){this[_0x52e90c(0x15e)](_0x53575b,{'val':![],'ack':!![]});if(this[_0x52e90c(0x9d)])try{const _0x2c7cc5=await this[_0x52e90c(0x1cd)](LTM_DP_RAW_LOG);_0x2c7cc5&&_0x2c7cc5[_0x52e90c(0xd0)]&&(this[_0x52e90c(0x8e)][_0x52e90c(0x114)](_0x52e90c(0x1b8)),sendToPython(this,'TRAIN_COMFORT',{'events':JSON[_0x52e90c(0xb2)](_0x2c7cc5['val'])}));}catch(_0xc00fb5){}}if(_0x53575b['includes'](_0x52e90c(0x197))&&_0x3b59f4[_0x52e90c(0xd0)]){this[_0x52e90c(0x15e)](_0x53575b,{'val':![],'ack':!![]});if(this[_0x52e90c(0x9d)])try{const _0x4d4d6d=await this['getStateAsync'](_0x52e90c(0x1a3));if(_0x4d4d6d&&_0x4d4d6d['val']){const _0x189614=JSON[_0x52e90c(0xb2)](_0x4d4d6d[_0x52e90c(0xd0)]);this[_0x52e90c(0x8e)][_0x52e90c(0x114)](_0x52e90c(0x1e8)),sendToPython(this,_0x52e90c(0xe2),{'sequences':_0x189614});}}catch(_0x216e93){this[_0x52e90c(0x8e)]['error'](_0x52e90c(0x105)+_0x216e93['message']);}}return;}if(this['config'][_0x52e90c(0x7c)]&&this['config'][_0x52e90c(0x7c)][_0x52e90c(0x11d)](_0x53575b)){await checkWifiPresence(this);return;}const _0x12c642=(this[_0x52e90c(0x1b4)][_0x52e90c(0x176)]||[])[_0x52e90c(0x1c7)](_0x1af5d9=>_0x1af5d9['id']===_0x53575b);if(_0x12c642)processSensorEvent(this,_0x53575b,_0x3b59f4,_0x12c642);}async[a0_0x2280a8(0x16b)](_0x21b31a){const _0x5f1827=a0_0x2280a8;if(typeof _0x21b31a==='object'&&_0x21b31a[_0x5f1827(0x147)]){if(_0x21b31a[_0x5f1827(0x104)]==='testApiKey'){const _0xd4c152=_0x21b31a['message'][_0x5f1827(0xfd)]||this[_0x5f1827(0x1b4)][_0x5f1827(0xa8)];if(!_0xd4c152)return this[_0x5f1827(0x1a2)](_0x21b31a[_0x5f1827(0x14e)],_0x21b31a[_0x5f1827(0x104)],{'success':![],'message':_0x5f1827(0x1c0)},_0x21b31a[_0x5f1827(0xd7)]);try{const _0x9c9cba=new GoogleGenerativeAI(_0xd4c152),_0x344ffe=_0x9c9cba[_0x5f1827(0x162)]({'model':GEMINI_MODEL}),_0x4cc2fd=await _0x344ffe[_0x5f1827(0x160)]('Hi');this[_0x5f1827(0x1a2)](_0x21b31a[_0x5f1827(0x14e)],_0x21b31a[_0x5f1827(0x104)],{'success':!![],'message':_0x5f1827(0x90)+_0x4cc2fd[_0x5f1827(0x119)]['text']()},_0x21b31a['callback']);}catch(_0x1e46c3){this[_0x5f1827(0x1a2)](_0x21b31a[_0x5f1827(0x14e)],_0x21b31a[_0x5f1827(0x104)],{'success':![],'message':'Err:\x20'+_0x1e46c3['message']},_0x21b31a['callback']);}}else{if(_0x21b31a[_0x5f1827(0x104)]===_0x5f1827(0xdc)){const _0x212052=await getWeatherContext(this),_0x411d63=await getCalendarContext(this);this[_0x5f1827(0x1a2)](_0x21b31a[_0x5f1827(0x14e)],_0x21b31a[_0x5f1827(0x104)],{'success':!![],'weather':_0x212052,'calendar':_0x411d63},_0x21b31a[_0x5f1827(0xd7)]);}else{if(_0x21b31a[_0x5f1827(0x104)]===_0x5f1827(0x19e)){if(!this['isProVersion'])return this[_0x5f1827(0x1a2)](_0x21b31a[_0x5f1827(0x14e)],_0x21b31a[_0x5f1827(0x104)],{'success':![],'isPro':![]},_0x21b31a[_0x5f1827(0xd7)]);let _0x1a1df0={'status':'N/A'};try{const _0x513de4=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x1a1df0[_0x5f1827(0x158)]=_0x513de4?_0x513de4['val']:_0x5f1827(0xf5);}catch(_0x316f49){}this[_0x5f1827(0x1a2)](_0x21b31a[_0x5f1827(0x14e)],_0x21b31a[_0x5f1827(0x104)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x1a1df0,'analysisHistory':this[_0x5f1827(0x1ad)]},_0x21b31a[_0x5f1827(0xd7)]);}else{if(_0x21b31a[_0x5f1827(0x104)]===_0x5f1827(0x103)){const _0x409140=this[_0x5f1827(0x1e9)][_0x5f1827(0x139)],_0x13c992=new Date(),_0x1179f3=new Date(_0x13c992['getFullYear'](),_0x13c992[_0x5f1827(0x1e5)](),_0x13c992[_0x5f1827(0x1c5)]())[_0x5f1827(0x1eb)](),_0x45d415=this[_0x5f1827(0x19b)][_0x5f1827(0x20e)](_0x11e663=>new Date(_0x11e663['timestamp'])['getTime']()>_0x1179f3)['length'],_0x42d83f=new Array(0x18)[_0x5f1827(0x1ae)](0x0);this[_0x5f1827(0x19b)][_0x5f1827(0x18a)](_0x5a0592=>{const _0x4179e7=_0x5f1827,_0x19a6d8=new Date(_0x5a0592[_0x4179e7(0x1d6)]);if(_0x19a6d8[_0x4179e7(0x1eb)]()>_0x1179f3)_0x42d83f[_0x19a6d8['getHours']()]++;});let _0x29c5fb={'status':_0x5f1827(0xf5)};try{const _0x18cf07=await this[_0x5f1827(0x1cd)](LTM_DP_DRIFT_STATUS);_0x29c5fb['status']=_0x18cf07?_0x18cf07[_0x5f1827(0xd0)]:'N/A';}catch(_0x1546c2){}let _0x15ae36='';try{const _0x3876fb=await this['getStateAsync'](_0x5f1827(0x1ca));_0x15ae36=_0x3876fb?_0x3876fb[_0x5f1827(0xd0)]:'';}catch(_0x43b061){}let _0x3752b0=null;!this[_0x5f1827(0x1a0)]&&(_0x3752b0=this[_0x5f1827(0x1b4)][_0x5f1827(0xa8)]?'KI-Modell\x20nicht\x20initialisiert':'Kein\x20API\x20Key!');let _0x3ead3c={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x1a23ba=await this[_0x5f1827(0x1cd)](_0x5f1827(0x152));if(_0x1a23ba&&_0x1a23ba[_0x5f1827(0xd0)]){_0x3ead3c[_0x5f1827(0x13f)]=!![];const _0x12e91c=await this[_0x5f1827(0x1cd)](_0x5f1827(0xb6));_0x3ead3c[_0x5f1827(0x8b)]=_0x12e91c?_0x12e91c['val']:'';const _0x522200=await this[_0x5f1827(0x1cd)](_0x5f1827(0x1b6));_0x3ead3c[_0x5f1827(0xb8)]=_0x522200?_0x522200[_0x5f1827(0xd0)]:'';const _0x3c16c3=await this[_0x5f1827(0x1cd)](_0x5f1827(0xc1));_0x3ead3c[_0x5f1827(0xa5)]=_0x3c16c3?_0x3c16c3[_0x5f1827(0xd0)]:'';}const _0x3f7956=await this[_0x5f1827(0x1cd)](_0x5f1827(0x208));_0x3ead3c[_0x5f1827(0x18d)]=_0x3f7956?!!_0x3f7956[_0x5f1827(0xd0)]:![];}catch(_0x25c801){}this['sendTo'](_0x21b31a['from'],_0x21b31a[_0x5f1827(0x104)],{'success':!![],'eventHistory':this['eventHistory'][_0x5f1827(0x16c)](0x0,0xf),'stats':{'digestCount':_0x409140,'eventCountToday':_0x45d415,'hourlyActivity':_0x42d83f,'driftStatus':_0x29c5fb[_0x5f1827(0x158)],'isPresent':this[_0x5f1827(0xb4)],'presenceWho':_0x15ae36,'minDays':this[_0x5f1827(0x1b4)]['minDaysForBaseline']||0x7,'stbDays':this['config'][_0x5f1827(0x15a)]||0xe,'ltbDays':this[_0x5f1827(0x1b4)]['ltmLtbWindowDays']||0x3c,'systemError':_0x3752b0},'automation':_0x3ead3c},_0x21b31a['callback']);}else{if(_0x21b31a[_0x5f1827(0x104)]===_0x5f1827(0x1ab))try{const _0x148b96=await scanner[_0x5f1827(0x1a8)](this,_0x21b31a[_0x5f1827(0x147)]||{});this[_0x5f1827(0x1a2)](_0x21b31a[_0x5f1827(0x14e)],_0x21b31a[_0x5f1827(0x104)],{'success':!![],'devices':_0x148b96},_0x21b31a[_0x5f1827(0xd7)]);}catch(_0x137e69){this[_0x5f1827(0x1a2)](_0x21b31a['from'],_0x21b31a['command'],{'success':![],'error':_0x137e69[_0x5f1827(0x147)]},_0x21b31a[_0x5f1827(0xd7)]);}else{if(_0x21b31a[_0x5f1827(0x104)]===_0x5f1827(0x13c)){const _0x3b887f=await this[_0x5f1827(0x13e)](_0x5f1827(0x89),'enum'),_0x103ef0=[];if(_0x3b887f)for(const _0x1bb985 in _0x3b887f){const _0x33aaba=_0x3b887f[_0x1bb985],_0x5c029b=(_0x33aaba[_0x5f1827(0xb7)]&&typeof _0x33aaba[_0x5f1827(0xb7)][_0x5f1827(0x9b)]==='object'?_0x33aaba[_0x5f1827(0xb7)][_0x5f1827(0x9b)]['de']:_0x33aaba['common'][_0x5f1827(0x9b)])||_0x33aaba[_0x5f1827(0xb7)][_0x5f1827(0x9b)];_0x103ef0[_0x5f1827(0x1f8)]({'id':_0x1bb985,'name':_0x5c029b});}const _0x415486=await this[_0x5f1827(0x13e)]('enum.rooms.*',_0x5f1827(0x1da)),_0x4169c4=[];if(_0x415486)for(const _0x17ced1 in _0x415486){const _0x1097fe=_0x415486[_0x17ced1],_0xbabd7f=(_0x1097fe['common']&&typeof _0x1097fe[_0x5f1827(0xb7)]['name']===_0x5f1827(0xf8)?_0x1097fe[_0x5f1827(0xb7)][_0x5f1827(0x9b)]['de']:_0x1097fe[_0x5f1827(0xb7)][_0x5f1827(0x9b)])||_0x17ced1[_0x5f1827(0x1db)]('.')['pop']();_0x4169c4[_0x5f1827(0x1f8)](_0xbabd7f);}this[_0x5f1827(0x1a2)](_0x21b31a[_0x5f1827(0x14e)],_0x21b31a[_0x5f1827(0x104)],{'success':!![],'enums':_0x103ef0,'rooms':_0x4169c4},_0x21b31a['callback']);}else{if(_0x21b31a[_0x5f1827(0x104)]===_0x5f1827(0xfb)){const _0x30e575=_0x21b31a[_0x5f1827(0x147)][_0x5f1827(0x172)];if(!_0x30e575)return this[_0x5f1827(0x1a2)](_0x21b31a[_0x5f1827(0x14e)],_0x21b31a[_0x5f1827(0x104)],{'success':![],'error':'No\x20instance'},_0x21b31a[_0x5f1827(0xd7)]);const _0x1f5112=await getCalendarNames(this,_0x30e575);this[_0x5f1827(0x1a2)](_0x21b31a[_0x5f1827(0x14e)],_0x21b31a[_0x5f1827(0x104)],{'success':!![],'names':_0x1f5112},_0x21b31a['callback']);}else{if(_0x21b31a[_0x5f1827(0x104)]===_0x5f1827(0x112)){const {targetId:_0x313a64,targetValue:_0x3eccb7}=_0x21b31a[_0x5f1827(0x147)];this['log']['info'](_0x5f1827(0x1c2)+_0x313a64+_0x5f1827(0x76)+_0x3eccb7),await this[_0x5f1827(0x16f)](_0x5f1827(0x152),{'val':!![],'ack':!![]}),await this[_0x5f1827(0x16f)](_0x5f1827(0xb6),{'val':_0x5f1827(0x187)+_0x313a64,'ack':!![]}),await this[_0x5f1827(0x16f)](_0x5f1827(0x1b6),{'val':_0x313a64,'ack':!![]}),await this[_0x5f1827(0x16f)](_0x5f1827(0xc1),{'val':_0x3eccb7,'ack':!![]}),this[_0x5f1827(0x1a2)](_0x21b31a[_0x5f1827(0x14e)],_0x21b31a[_0x5f1827(0x104)],{'success':!![]},_0x21b31a[_0x5f1827(0xd7)]);}else{if(_0x21b31a[_0x5f1827(0x104)]==='submitFeedback'){const {historyId:_0x23fc98,rating:_0x1edde6,comment:_0x82407f,alertReason:_0x3409b2}=_0x21b31a[_0x5f1827(0x147)];_0x23fc98&&_0x1edde6?(await saveFeedback(this,{'timestamp':Date[_0x5f1827(0x116)](),'historyId':_0x23fc98,'rating':_0x1edde6,'comment':_0x82407f,'alertReason':_0x3409b2}),this[_0x5f1827(0x1a2)](_0x21b31a[_0x5f1827(0x14e)],_0x21b31a[_0x5f1827(0x104)],{'success':!![]},_0x21b31a[_0x5f1827(0xd7)])):this[_0x5f1827(0x1a2)](_0x21b31a[_0x5f1827(0x14e)],_0x21b31a['command'],{'success':![],'error':_0x5f1827(0x155)},_0x21b31a[_0x5f1827(0xd7)]);}else _0x21b31a['command']===_0x5f1827(0x85)&&(this[_0x5f1827(0x8e)][_0x5f1827(0x114)]('User\x20dismissed\x20automation\x20proposal.'),await this[_0x5f1827(0x16f)](_0x5f1827(0x152),{'val':![],'ack':!![]}),await this[_0x5f1827(0x16f)](_0x5f1827(0xb6),{'val':'','ack':!![]}),this[_0x5f1827(0x1a2)](_0x21b31a[_0x5f1827(0x14e)],_0x21b31a[_0x5f1827(0x104)],{'success':!![]},_0x21b31a[_0x5f1827(0xd7)]));}}}}}}}}}}}if(require[a0_0x2280a8(0x7d)]!==module)module['exports']=_0x3afcf5=>new CogniLiving(_0x3afcf5);else new CogniLiving();