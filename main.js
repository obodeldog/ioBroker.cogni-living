const a0_0x223d27=a0_0x2f21;(function(_0x1499b3,_0x2e1632){const _0x337786=a0_0x2f21,_0x4c3267=_0x1499b3();while(!![]){try{const _0x33b017=-parseInt(_0x337786(0x225))/0x1+parseInt(_0x337786(0x26e))/0x2+-parseInt(_0x337786(0x207))/0x3*(parseInt(_0x337786(0x234))/0x4)+parseInt(_0x337786(0x1e4))/0x5+-parseInt(_0x337786(0x1af))/0x6*(-parseInt(_0x337786(0x1f9))/0x7)+-parseInt(_0x337786(0x21a))/0x8+-parseInt(_0x337786(0x269))/0x9*(-parseInt(_0x337786(0x1c1))/0xa);if(_0x33b017===_0x2e1632)break;else _0x4c3267['push'](_0x4c3267['shift']());}catch(_0x3f510e){_0x4c3267['push'](_0x4c3267['shift']());}}}(a0_0x1838,0xbf35d));const a0_0x3e57c7=(function(){let _0x3e76c8=!![];return function(_0x10ea37,_0x2d566e){const _0x2243a7=_0x3e76c8?function(){const _0x1b2ae4=a0_0x2f21;if(_0x2d566e){const _0x5a3305=_0x2d566e[_0x1b2ae4(0x249)](_0x10ea37,arguments);return _0x2d566e=null,_0x5a3305;}}:function(){};return _0x3e76c8=![],_0x2243a7;};}()),a0_0x4572cd=a0_0x3e57c7(this,function(){const _0x124f77=a0_0x2f21;return a0_0x4572cd['toString']()['search'](_0x124f77(0x1f2))[_0x124f77(0x23a)]()[_0x124f77(0x1de)](a0_0x4572cd)['search'](_0x124f77(0x1f2));});a0_0x4572cd();function a0_0x2f21(_0x69efee,_0x41faef){const _0x5ec537=a0_0x1838();return a0_0x2f21=function(_0x4572cd,_0x3e57c7){_0x4572cd=_0x4572cd-0x196;let _0x1838ac=_0x5ec537[_0x4572cd];return _0x1838ac;},a0_0x2f21(_0x69efee,_0x41faef);}'use strict';const utils=require(a0_0x223d27(0x1cf)),{GoogleGenerativeAI}=require('@google/generative-ai'),installer=require(a0_0x223d27(0x1b6)),scanner=require(a0_0x223d27(0x1c6)),schedulers=require(a0_0x223d27(0x289)),topology=require('./lib/topology'),setup=require(a0_0x223d27(0x247)),recorder=require(a0_0x223d27(0x20e)),pythonBridge=require(a0_0x223d27(0x271)),aiAgent=require(a0_0x223d27(0x196)),deadMan=require('./lib/dead_man'),automation=require(a0_0x223d27(0x1c7)),GEMINI_MODEL=a0_0x223d27(0x1dc),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x223d27(0x23d)]{constructor(_0x925ffb){const _0xa2216a=a0_0x223d27;super({..._0x925ffb,'name':_0xa2216a(0x201)}),this[_0xa2216a(0x223)]=[],this[_0xa2216a(0x1d3)]=[],this[_0xa2216a(0x232)]=[],this[_0xa2216a(0x25e)]=[],this[_0xa2216a(0x26a)]={},this[_0xa2216a(0x259)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0xa2216a(0x1ba)]=!![],this[_0xa2216a(0x1bc)]=null,this['exitGraceTimer']=null,this['isGracePeriodActive']=![],this[_0xa2216a(0x200)]=null,this[_0xa2216a(0x19a)]=null,this[_0xa2216a(0x1ce)]=setup[_0xa2216a(0x1cd)][_0xa2216a(0x1ef)],this[_0xa2216a(0x210)]=![],this[_0xa2216a(0x228)]=![],this[_0xa2216a(0x1b9)]=null,this[_0xa2216a(0x19f)]=null,this[_0xa2216a(0x19e)]=null,this['driftAnalysisTimer']=null,this[_0xa2216a(0x24b)]=null,this[_0xa2216a(0x23c)]=![],this['on']('ready',this[_0xa2216a(0x1bd)][_0xa2216a(0x1eb)](this)),this['on']('stateChange',this['onStateChange'][_0xa2216a(0x1eb)](this)),this['on'](_0xa2216a(0x1ec),this[_0xa2216a(0x272)][_0xa2216a(0x1eb)](this)),this['on'](_0xa2216a(0x1f3),this[_0xa2216a(0x1f8)][_0xa2216a(0x1eb)](this));}async['onReady'](){const _0x23ba49=a0_0x223d27;this[_0x23ba49(0x1f5)]['info'](_0x23ba49(0x22c)+this['version']+')\x20-\x20Phase\x20C\x20(PINN\x20Neural\x20Core)');if(!installer[_0x23ba49(0x21b)](this,()=>this[_0x23ba49(0x270)]()))return;}async[a0_0x223d27(0x270)](){const _0x467115=a0_0x223d27;await setup[_0x467115(0x252)](this);try{this[_0x467115(0x210)]=await setup[_0x467115(0x282)](this[_0x467115(0x1f4)][_0x467115(0x1b5)]);}catch(_0x3acbc3){}if(!this[_0x467115(0x1f4)]['inactivityThresholdHours']||this[_0x467115(0x1f4)]['inactivityThresholdHours']<0.1)this[_0x467115(0x1f4)][_0x467115(0x1a0)]=0xc;await setup[_0x467115(0x1e1)](this),await setup['initSystemConfig'](this);if(this['config'][_0x467115(0x1fa)])try{this[_0x467115(0x200)]=new GoogleGenerativeAI(this['config']['geminiApiKey']),this[_0x467115(0x19a)]=this[_0x467115(0x200)][_0x467115(0x27e)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x467115(0x1b8)}}),this[_0x467115(0x1f5)]['info'](_0x467115(0x265));}catch(_0x40f79f){this['log'][_0x467115(0x23e)]('Gemini\x20Init\x20Error:\x20'+_0x40f79f[_0x467115(0x1f3)]);}await setup[_0x467115(0x266)](this),await this[_0x467115(0x1b2)]();try{const _0x538a82=await this[_0x467115(0x1a4)](_0x467115(0x20c));if(_0x538a82&&_0x538a82[_0x467115(0x1d2)])this[_0x467115(0x232)]=JSON[_0x467115(0x26b)](_0x538a82[_0x467115(0x1d2)]);}catch(_0x4bb564){this[_0x467115(0x232)]=[];}try{const _0x37f96f=await this[_0x467115(0x1a4)](_0x467115(0x19b));if(_0x37f96f&&_0x37f96f[_0x467115(0x1d2)])this[_0x467115(0x25e)]=JSON[_0x467115(0x26b)](_0x37f96f['val']);}catch(_0x206594){this[_0x467115(0x25e)]=[];}const _0x48b7b4=this[_0x467115(0x25e)][_0x467115(0x260)]>=(this['config']['minDaysForBaseline']||0x7)?_0x467115(0x1c0)+this[_0x467115(0x25e)][_0x467115(0x260)]+_0x467115(0x258):'Lernphase\x20('+this[_0x467115(0x25e)][_0x467115(0x260)]+'/'+(this[_0x467115(0x1f4)][_0x467115(0x1c5)]||0x7)+')';await this[_0x467115(0x1ae)]('LTM.baselineStatus',{'val':_0x48b7b4,'ack':!![]}),this['subscribeStates'](_0x467115(0x1c4)),this[_0x467115(0x283)](_0x467115(0x230)),this[_0x467115(0x283)](_0x467115(0x20d)),this[_0x467115(0x283)](_0x467115(0x268)),this['subscribeStates'](_0x467115(0x27b)),this['subscribeStates']('analysis.automation.autoApply'),this[_0x467115(0x283)](_0x467115(0x284)),this[_0x467115(0x283)](_0x467115(0x241)),this[_0x467115(0x283)](_0x467115(0x1e3)),this[_0x467115(0x283)]('analysis.training.triggerComfort'),this['subscribeStates'](_0x467115(0x218)),this[_0x467115(0x283)](_0x467115(0x244));const _0x523720=this[_0x467115(0x1f4)][_0x467115(0x21d)];if(_0x523720)for(const _0x47b070 of _0x523720){await this[_0x467115(0x236)](_0x47b070['id']);}const _0x10f51a=this[_0x467115(0x1f4)]['presenceDevices'];if(_0x10f51a)for(const _0x211890 of _0x10f51a){await this[_0x467115(0x236)](_0x211890);}if(this['config'][_0x467115(0x24d)]&&this[_0x467115(0x1f4)][_0x467115(0x19d)])await this[_0x467115(0x236)](this[_0x467115(0x1f4)][_0x467115(0x19d)]+'.communicate.request');setTimeout(()=>this['checkWifiPresence'](),0x1388);if(this[_0x467115(0x1b9)])clearInterval(this[_0x467115(0x1b9)]);const _0xc67a9b=this['config'][_0x467115(0x256)]||0xf;_0xc67a9b>0x0&&(this[_0x467115(0x1b9)]=setInterval(()=>{this['runAutopilot']();},_0xc67a9b*0x3c*0x3e8)),schedulers['setupLtmScheduler'](this,()=>aiAgent[_0x467115(0x1db)](this,pythonBridge)),schedulers[_0x467115(0x239)](this),schedulers[_0x467115(0x202)](this,()=>aiAgent[_0x467115(0x224)](this)),schedulers[_0x467115(0x26d)](this,()=>aiAgent[_0x467115(0x19c)](this)),pythonBridge[_0x467115(0x25c)](this,installer[_0x467115(0x1c9)]),setTimeout(async()=>{const _0x402b88=_0x467115;await topology[_0x402b88(0x237)](this);try{const _0x5076b5=await this['getStateAsync'](_0x402b88(0x1f0));if(_0x5076b5&&_0x5076b5['val'])pythonBridge[_0x402b88(0x1d6)](this,_0x402b88(0x1dd),JSON['parse'](_0x5076b5[_0x402b88(0x1d2)]));}catch(_0x27a9a7){}this[_0x402b88(0x251)](),this[_0x402b88(0x206)](),this[_0x402b88(0x1d5)](),this['updateHealthVector']();},0x1388);}[a0_0x223d27(0x272)](_0x19ccb6){const _0x107739=a0_0x223d27;if(this['analysisTimer'])clearInterval(this[_0x107739(0x1b9)]);if(this[_0x107739(0x1ab)])clearInterval(this[_0x107739(0x1ab)]);if(this[_0x107739(0x19f)])this[_0x107739(0x19f)][_0x107739(0x276)]();if(this[_0x107739(0x19e)])this['modeResetJob'][_0x107739(0x276)]();if(this[_0x107739(0x24b)])this['briefingJob'][_0x107739(0x276)]();recorder['abortExitTimer'](this),pythonBridge['stopService'](this),_0x19ccb6();}async[a0_0x223d27(0x264)](_0x17a50a,_0x55d80a){const _0x23324f=a0_0x223d27;if(!_0x55d80a||this['dependencyInstallInProgress'])return;if(_0x17a50a[_0x23324f(0x238)](_0x23324f(0x1da))&&_0x17a50a[_0x23324f(0x1cc)](_0x23324f(0x213))&&_0x55d80a[_0x23324f(0x1d2)])return;if(_0x17a50a===this[_0x23324f(0x203)]+_0x23324f(0x1cb)){if(_0x55d80a[_0x23324f(0x1d2)]&&Object[_0x23324f(0x197)](setup[_0x23324f(0x1cd)])[_0x23324f(0x238)](_0x55d80a[_0x23324f(0x1d2)])){this[_0x23324f(0x1ce)]=_0x55d80a[_0x23324f(0x1d2)];if(_0x55d80a[_0x23324f(0x1d2)]===setup[_0x23324f(0x1cd)]['VACATION'])await recorder['setPresence'](this,![]);else await recorder['setPresence'](this,!![]);}if(!_0x55d80a[_0x23324f(0x285)])this['setState'](_0x17a50a,{'val':this[_0x23324f(0x1ce)],'ack':!![]});return;}if(!_0x55d80a['ack']){_0x17a50a['includes'](_0x23324f(0x1c4))&&_0x55d80a[_0x23324f(0x1d2)]&&(this[_0x23324f(0x1d1)](_0x17a50a,{'val':![],'ack':!![]}),aiAgent[_0x23324f(0x1e0)](this));if(_0x17a50a[_0x23324f(0x238)](_0x23324f(0x246))&&_0x55d80a[_0x23324f(0x1d2)]){this[_0x23324f(0x1d1)](_0x17a50a,{'val':![],'ack':!![]});if(this[_0x23324f(0x210)])aiAgent['createDailyDigest'](this,pythonBridge);}_0x17a50a[_0x23324f(0x238)](_0x23324f(0x1b1))&&_0x55d80a['val']&&(this[_0x23324f(0x1d1)](_0x17a50a,{'val':![],'ack':!![]}),aiAgent[_0x23324f(0x19c)](this));_0x17a50a[_0x23324f(0x238)](_0x23324f(0x24c))&&_0x55d80a['val']&&(this[_0x23324f(0x1d1)](_0x17a50a,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this));if(_0x17a50a[_0x23324f(0x238)](_0x23324f(0x284))&&_0x55d80a['val']){this[_0x23324f(0x1d1)](_0x17a50a,{'val':![],'ack':!![]});if(this[_0x23324f(0x210)])try{const _0x21d97f=await this['getStateAsync'](_0x23324f(0x1a5));if(_0x21d97f&&_0x21d97f[_0x23324f(0x1d2)]){const _0x497c02=JSON[_0x23324f(0x26b)](_0x21d97f[_0x23324f(0x1d2)]);this[_0x23324f(0x1ae)](_0x23324f(0x204),{'val':_0x23324f(0x255),'ack':!![]}),pythonBridge[_0x23324f(0x1d6)](this,_0x23324f(0x25a),{'sequences':_0x497c02});}}catch(_0x22b509){}}if(_0x17a50a[_0x23324f(0x238)]('analysis.training.triggerHealth')&&_0x55d80a[_0x23324f(0x1d2)]){this[_0x23324f(0x1d1)](_0x17a50a,{'val':![],'ack':!![]});if(this[_0x23324f(0x210)])try{const _0x4ca3b2=await this[_0x23324f(0x1a4)]('LTM.dailyDigests');if(_0x4ca3b2&&_0x4ca3b2[_0x23324f(0x1d2)])pythonBridge['send'](this,'TRAIN_HEALTH',{'digests':JSON[_0x23324f(0x26b)](_0x4ca3b2[_0x23324f(0x1d2)])});}catch(_0x593ba3){}}if(_0x17a50a[_0x23324f(0x238)]('analysis.training.triggerEnergy')&&_0x55d80a[_0x23324f(0x1d2)]){this['setState'](_0x17a50a,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x572dfb=await this[_0x23324f(0x1a4)](_0x23324f(0x281));if(_0x572dfb&&_0x572dfb[_0x23324f(0x1d2)])pythonBridge[_0x23324f(0x1d6)](this,_0x23324f(0x227),{'points':JSON[_0x23324f(0x26b)](_0x572dfb['val'])});}catch(_0x1072f5){}}if(_0x17a50a[_0x23324f(0x238)](_0x23324f(0x253))&&_0x55d80a[_0x23324f(0x1d2)]){this[_0x23324f(0x1d1)](_0x17a50a,{'val':![],'ack':!![]});if(this[_0x23324f(0x210)])try{const _0x48261e=await this[_0x23324f(0x1a4)](_0x23324f(0x20c));if(_0x48261e&&_0x48261e[_0x23324f(0x1d2)])pythonBridge[_0x23324f(0x1d6)](this,'TRAIN_COMFORT',{'events':JSON['parse'](_0x48261e[_0x23324f(0x1d2)])});}catch(_0x11fb70){}}_0x17a50a[_0x23324f(0x238)]('analysis.training.triggerTopology')&&_0x55d80a['val']&&(this[_0x23324f(0x1d1)](_0x17a50a,{'val':![],'ack':!![]}),topology[_0x23324f(0x237)](this));return;}if(this['config'][_0x23324f(0x1c2)]&&this[_0x23324f(0x1f4)]['presenceDevices'][_0x23324f(0x238)](_0x17a50a)){await this['checkWifiPresence']();return;}const _0x295bae=(this[_0x23324f(0x1f4)][_0x23324f(0x21d)]||[])[_0x23324f(0x273)](_0x1a365d=>_0x1a365d['id']===_0x17a50a);if(_0x295bae){const _0x2a061f=await recorder[_0x23324f(0x1d9)](this,_0x17a50a,_0x55d80a,_0x295bae);_0x2a061f&&_0x2a061f['type']==='motion'&&_0x2a061f[_0x23324f(0x1ed)]&&this[_0x23324f(0x210)]&&deadMan[_0x23324f(0x1c3)](this,_0x2a061f[_0x23324f(0x1ed)]);}}async[a0_0x223d27(0x1f8)](_0x4e2d5e){const _0xdb0ff5=a0_0x223d27;if(typeof _0x4e2d5e===_0xdb0ff5(0x278)&&_0x4e2d5e[_0xdb0ff5(0x1f3)]){if(_0x4e2d5e[_0xdb0ff5(0x1ac)]===_0xdb0ff5(0x233))try{const _0x144c66=await automation['scanThermostats'](this);this['sendTo'](_0x4e2d5e[_0xdb0ff5(0x274)],_0x4e2d5e[_0xdb0ff5(0x1ac)],{'success':!![],'results':_0x144c66},_0x4e2d5e['callback']);}catch(_0x9cc141){this[_0xdb0ff5(0x24f)](_0x4e2d5e[_0xdb0ff5(0x274)],_0x4e2d5e[_0xdb0ff5(0x1ac)],{'success':![],'error':_0x9cc141[_0xdb0ff5(0x1f3)]},_0x4e2d5e['callback']);}else{if(_0x4e2d5e[_0xdb0ff5(0x1ac)]===_0xdb0ff5(0x245))try{const {current_temps:_0x18852a,t_out:_0x4a0988,targets:_0x479bce,t_forecast:_0x471f21}=_0x4e2d5e[_0xdb0ff5(0x1f3)],_0x3e5f91=[];let _0xf90734={};try{const _0x328ea1=await this[_0xdb0ff5(0x1a4)](_0xdb0ff5(0x20f));if(_0x328ea1&&_0x328ea1[_0xdb0ff5(0x1d2)]){const _0x1d64b4=JSON[_0xdb0ff5(0x26b)](_0x328ea1['val']);_0xf90734=_0x1d64b4[_0xdb0ff5(0x1b4)]||_0x1d64b4;}}catch(_0x5256d0){}const _0x1c9652=_0x471f21!==undefined&&_0x471f21!==null?(_0x4a0988+_0x471f21)/0x2:_0x4a0988;for(const [_0x26d618,_0x2109a4]of Object[_0xdb0ff5(0x1e2)](_0x18852a)){const _0xd9de9f=_0x479bce[_0x26d618]||0x15;if(_0x2109a4<=_0xd9de9f)continue;let _0x1c263f=_0xf90734[_0x26d618]||-0.5;if(_0x1c263f>=0x0)_0x1c263f=-0.5;const _0x1076c9=Math[_0xdb0ff5(0x22d)](_0x1c263f),_0x93efed=_0x2109a4-_0xd9de9f;let _0x51509e=Math[_0xdb0ff5(0x1d8)](_0x93efed/_0x1076c9*0x3c);const _0x1ce396=_0x2109a4-_0x4a0988,_0x4a1a1d=_0x2109a4-_0x1c9652;if(_0x4a1a1d!==0x0&&_0x1ce396!==0x0){const _0x40da20=_0x1ce396/_0x4a1a1d;_0x51509e=Math[_0xdb0ff5(0x1d8)](_0x51509e*_0x40da20);}if(_0x51509e>0xf){if(_0x51509e>0xf0)_0x51509e=0xf0;_0x3e5f91[_0xdb0ff5(0x216)]({'room':_0x26d618,'minutes_safe':_0x51509e,'target':_0xd9de9f,'current':_0x2109a4,'savings_msg':_0xdb0ff5(0x1a2)+_0x51509e+'\x20min\x20ausbleiben.'});}}_0x3e5f91[_0xdb0ff5(0x23f)]((_0x5e7d27,_0x429b15)=>_0x429b15[_0xdb0ff5(0x1fb)]-_0x5e7d27[_0xdb0ff5(0x1fb)]),this[_0xdb0ff5(0x24f)](_0x4e2d5e[_0xdb0ff5(0x274)],_0x4e2d5e[_0xdb0ff5(0x1ac)],{'success':!![],'proposals':_0x3e5f91},_0x4e2d5e['callback']);}catch(_0xa926e6){this['sendTo'](_0x4e2d5e[_0xdb0ff5(0x274)],_0x4e2d5e[_0xdb0ff5(0x1ac)],{'success':![],'error':_0xa926e6['message']},_0x4e2d5e[_0xdb0ff5(0x1f6)]);}else{if(_0x4e2d5e[_0xdb0ff5(0x1ac)]===_0xdb0ff5(0x1bf))await this[_0xdb0ff5(0x1ae)](_0xdb0ff5(0x1d0),{'val':![],'ack':!![]}),await this['setStateAsync']('analysis.automation.description',{'val':'','ack':!![]}),await this[_0xdb0ff5(0x1ae)]('analysis.automation.targetId',{'val':'','ack':!![]}),this[_0xdb0ff5(0x24f)](_0x4e2d5e[_0xdb0ff5(0x274)],_0x4e2d5e[_0xdb0ff5(0x1ac)],{'success':!![]},_0x4e2d5e[_0xdb0ff5(0x1f6)]);else{if(_0x4e2d5e[_0xdb0ff5(0x1ac)]===_0xdb0ff5(0x279)){const {targetId:_0x2d12ce,targetValue:_0x34a998}=_0x4e2d5e[_0xdb0ff5(0x1f3)];await this['setStateAsync'](_0xdb0ff5(0x1d0),{'val':!![],'ack':!![]}),await this[_0xdb0ff5(0x1ae)](_0xdb0ff5(0x26f),{'val':'Simulation\x20durch\x20Admin\x20(Test)','ack':!![]}),await this[_0xdb0ff5(0x1ae)]('analysis.automation.targetId',{'val':_0x2d12ce,'ack':!![]}),await this[_0xdb0ff5(0x1ae)](_0xdb0ff5(0x1e6),{'val':String(_0x34a998),'ack':!![]}),this[_0xdb0ff5(0x24f)](_0x4e2d5e['from'],_0x4e2d5e['command'],{'success':!![]},_0x4e2d5e[_0xdb0ff5(0x1f6)]);}else{if(_0x4e2d5e[_0xdb0ff5(0x1ac)]===_0xdb0ff5(0x257))try{const _0x5b2efd=_0x4e2d5e['message']['apiKey'];if(!_0x5b2efd)throw new Error(_0xdb0ff5(0x1a1));const _0x5c1358=new GoogleGenerativeAI(_0x5b2efd),_0x2f9d6c=_0x5c1358[_0xdb0ff5(0x27e)]({'model':GEMINI_MODEL}),_0x376537=await _0x2f9d6c[_0xdb0ff5(0x261)]('Test'),_0x5c7907=await _0x376537[_0xdb0ff5(0x1df)];if(_0x5c7907['text']())this[_0xdb0ff5(0x24f)](_0x4e2d5e[_0xdb0ff5(0x274)],_0x4e2d5e[_0xdb0ff5(0x1ac)],{'success':!![],'message':_0xdb0ff5(0x263)},_0x4e2d5e['callback']);else throw new Error(_0xdb0ff5(0x286));}catch(_0x19d47d){this[_0xdb0ff5(0x24f)](_0x4e2d5e[_0xdb0ff5(0x274)],_0x4e2d5e[_0xdb0ff5(0x1ac)],{'success':![],'message':_0x19d47d[_0xdb0ff5(0x1f3)]},_0x4e2d5e[_0xdb0ff5(0x1f6)]);}else{if(_0x4e2d5e[_0xdb0ff5(0x1ac)]==='scanDevices')try{const _0x3fcaa2=await scanner[_0xdb0ff5(0x280)](this,_0x4e2d5e['message']||{});this[_0xdb0ff5(0x24f)](_0x4e2d5e['from'],_0x4e2d5e[_0xdb0ff5(0x1ac)],{'success':!![],'devices':_0x3fcaa2},_0x4e2d5e['callback']);}catch(_0x574798){this['sendTo'](_0x4e2d5e[_0xdb0ff5(0x274)],_0x4e2d5e[_0xdb0ff5(0x1ac)],{'success':![],'error':_0x574798[_0xdb0ff5(0x1f3)]},_0x4e2d5e['callback']);}else{if(_0x4e2d5e[_0xdb0ff5(0x1ac)]===_0xdb0ff5(0x1fc))try{const {matrix:_0x55ebf1}=_0x4e2d5e[_0xdb0ff5(0x1f3)],_0x375137=await this[_0xdb0ff5(0x1a4)]('analysis.topology.structure');if(_0x375137&&_0x375137[_0xdb0ff5(0x1d2)]){const _0x47971d=JSON[_0xdb0ff5(0x26b)](_0x375137['val']);_0x47971d[_0xdb0ff5(0x1fd)]=_0x55ebf1,_0x47971d[_0xdb0ff5(0x1f1)]=Date[_0xdb0ff5(0x226)](),await this['setStateAsync'](_0xdb0ff5(0x1f0),{'val':JSON['stringify'](_0x47971d),'ack':!![]}),pythonBridge[_0xdb0ff5(0x1d6)](this,'SET_TOPOLOGY',_0x47971d);}this['sendTo'](_0x4e2d5e[_0xdb0ff5(0x274)],_0x4e2d5e[_0xdb0ff5(0x1ac)],{'success':!![]},_0x4e2d5e[_0xdb0ff5(0x1f6)]);}catch(_0x249993){this[_0xdb0ff5(0x1f5)][_0xdb0ff5(0x23e)](_0x249993);}else{if(_0x4e2d5e[_0xdb0ff5(0x1ac)]===_0xdb0ff5(0x28a))this[_0xdb0ff5(0x24f)](_0x4e2d5e[_0xdb0ff5(0x274)],_0x4e2d5e[_0xdb0ff5(0x1ac)],{'success':!![],'dailyDigests':this['dailyDigests']||[],'analysisHistory':this[_0xdb0ff5(0x1d3)]||[]},_0x4e2d5e[_0xdb0ff5(0x1f6)]);else{if(_0x4e2d5e['command']==='getOverviewData'){const _0x8345c7=this['dailyDigests'][_0xdb0ff5(0x260)],_0x56ffc2=new Array(0x18)[_0xdb0ff5(0x1ea)](0x0),_0x130f12=new Date()[_0xdb0ff5(0x26c)](0x0,0x0,0x0,0x0);this[_0xdb0ff5(0x223)]&&this[_0xdb0ff5(0x223)]['forEach'](_0x2bd448=>{const _0x503ee3=_0xdb0ff5;if(_0x2bd448[_0x503ee3(0x1b7)]>=_0x130f12){const _0xc59609=new Date(_0x2bd448[_0x503ee3(0x1b7)])[_0x503ee3(0x28c)]();if(_0xc59609>=0x0&&_0xc59609<0x18)_0x56ffc2[_0xc59609]++;}});let _0x4ab73e=![],_0x2f765f='',_0x45db7c='',_0x3b5b21='';try{const _0x51dbe2=await this[_0xdb0ff5(0x1a4)](_0xdb0ff5(0x1d0));if(_0x51dbe2&&_0x51dbe2['val']){_0x4ab73e=!![];const _0x5665ac=await this[_0xdb0ff5(0x1a4)](_0xdb0ff5(0x26f));_0x2f765f=_0x5665ac?_0x5665ac[_0xdb0ff5(0x1d2)]:'';const _0xf55be3=await this[_0xdb0ff5(0x1a4)]('analysis.automation.targetId');_0x45db7c=_0xf55be3?_0xf55be3['val']:'';const _0x39ccf0=await this[_0xdb0ff5(0x1a4)]('analysis.automation.targetValue');_0x3b5b21=_0x39ccf0?_0x39ccf0[_0xdb0ff5(0x1d2)]:'';}}catch(_0x2f31d0){}const _0x109d16=await this['checkSolarCondition'](),_0x13cd43=(this[_0xdb0ff5(0x1f4)][_0xdb0ff5(0x21d)]||[])[_0xdb0ff5(0x229)](_0x14dd39=>_0x14dd39[_0xdb0ff5(0x240)]),_0xff6018=_0x109d16&&_0x13cd43;this['sendTo'](_0x4e2d5e[_0xdb0ff5(0x274)],_0x4e2d5e[_0xdb0ff5(0x1ac)],{'success':!![],'eventHistory':this[_0xdb0ff5(0x223)][_0xdb0ff5(0x22e)](0x0,0xf),'stats':{'digestCount':_0x8345c7,'isPresent':this[_0xdb0ff5(0x1ba)],'hourlyActivity':_0x56ffc2,'solarActive':_0xff6018},'automation':{'detected':_0x4ab73e,'description':_0x2f765f,'targetId':_0x45db7c,'targetValue':_0x3b5b21}},_0x4e2d5e[_0xdb0ff5(0x1f6)]);}else{if(_0x4e2d5e[_0xdb0ff5(0x1ac)]===_0xdb0ff5(0x21f)){const _0x28655e=await this[_0xdb0ff5(0x209)]('enum.functions.*',_0xdb0ff5(0x1ff)),_0xc604d7=[];if(_0x28655e)for(const _0x1172be in _0x28655e){const _0x21aed4=_0x28655e[_0x1172be],_0x257893=(_0x21aed4[_0xdb0ff5(0x287)]&&typeof _0x21aed4['common'][_0xdb0ff5(0x221)]===_0xdb0ff5(0x278)?_0x21aed4[_0xdb0ff5(0x287)][_0xdb0ff5(0x221)]['de']:_0x21aed4[_0xdb0ff5(0x287)][_0xdb0ff5(0x221)])||_0x21aed4[_0xdb0ff5(0x287)][_0xdb0ff5(0x221)];_0xc604d7[_0xdb0ff5(0x216)]({'id':_0x1172be,'name':_0x257893});}const _0x7eeec6=await this[_0xdb0ff5(0x209)](_0xdb0ff5(0x262),_0xdb0ff5(0x1ff)),_0x66f1a1=[];if(_0x7eeec6)for(const _0x5bc870 in _0x7eeec6){const _0x502e24=_0x7eeec6[_0x5bc870],_0x395092=(_0x502e24[_0xdb0ff5(0x287)]&&typeof _0x502e24[_0xdb0ff5(0x287)][_0xdb0ff5(0x221)]===_0xdb0ff5(0x278)?_0x502e24['common'][_0xdb0ff5(0x221)]['de']:_0x502e24[_0xdb0ff5(0x287)][_0xdb0ff5(0x221)])||_0x5bc870[_0xdb0ff5(0x1d4)]('.')[_0xdb0ff5(0x1c8)]();_0x66f1a1[_0xdb0ff5(0x216)](_0x395092);}this[_0xdb0ff5(0x24f)](_0x4e2d5e['from'],_0x4e2d5e[_0xdb0ff5(0x1ac)],{'success':!![],'enums':_0xc604d7,'rooms':_0x66f1a1},_0x4e2d5e[_0xdb0ff5(0x1f6)]);}else{if(_0x4e2d5e[_0xdb0ff5(0x1ac)]===_0xdb0ff5(0x22a))try{let _0x373d8d='Kein\x20Wetter-Adapter',_0x184a99=_0xdb0ff5(0x1e9);if(this['config'][_0xdb0ff5(0x212)]){const _0x123319=await recorder[_0xdb0ff5(0x1a7)](this);_0x373d8d=_0x123319!==null?_0x123319+'Â°C':_0xdb0ff5(0x24a);}if(this[_0xdb0ff5(0x1f4)]['calendarInstance']){const _0x3c4fa8=await this['getForeignObjectAsync'](_0xdb0ff5(0x288)+this[_0xdb0ff5(0x1f4)]['calendarInstance']);_0x184a99=_0x3c4fa8?_0xdb0ff5(0x208):_0xdb0ff5(0x243);}this[_0xdb0ff5(0x24f)](_0x4e2d5e[_0xdb0ff5(0x274)],_0x4e2d5e[_0xdb0ff5(0x1ac)],{'success':!![],'weather':_0x373d8d,'calendar':_0x184a99},_0x4e2d5e[_0xdb0ff5(0x1f6)]);}catch(_0x225ae6){this[_0xdb0ff5(0x24f)](_0x4e2d5e[_0xdb0ff5(0x274)],_0x4e2d5e[_0xdb0ff5(0x1ac)],{'success':![],'error':_0x225ae6[_0xdb0ff5(0x1f3)]},_0x4e2d5e[_0xdb0ff5(0x1f6)]);}else{if(_0x4e2d5e[_0xdb0ff5(0x1ac)]===_0xdb0ff5(0x25b))try{const _0x674648=_0x4e2d5e[_0xdb0ff5(0x1f3)][_0xdb0ff5(0x275)],_0xa46ec0=await this['getForeignStateAsync'](_0x674648+_0xdb0ff5(0x242));let _0x518143=[];if(_0xa46ec0&&_0xa46ec0['val']){const _0x1f1513=JSON[_0xdb0ff5(0x26b)](_0xa46ec0['val']),_0x4cdc1d=new Set();Array['isArray'](_0x1f1513)&&_0x1f1513[_0xdb0ff5(0x1b3)](_0x1c6c73=>{const _0x272665=_0xdb0ff5;if(_0x1c6c73[_0x272665(0x1ad)])_0x4cdc1d[_0x272665(0x1fe)](_0x1c6c73[_0x272665(0x1ad)]);else{if(_0x1c6c73[_0x272665(0x220)])_0x4cdc1d['add'](_0x1c6c73[_0x272665(0x220)]);}}),_0x518143=Array['from'](_0x4cdc1d)[_0xdb0ff5(0x23f)]();}if(_0x518143[_0xdb0ff5(0x260)]===0x0)_0x518143=[_0xdb0ff5(0x22f)];this['sendTo'](_0x4e2d5e[_0xdb0ff5(0x274)],_0x4e2d5e[_0xdb0ff5(0x1ac)],{'success':!![],'names':_0x518143},_0x4e2d5e[_0xdb0ff5(0x1f6)]);}catch(_0x231778){this[_0xdb0ff5(0x24f)](_0x4e2d5e[_0xdb0ff5(0x274)],_0x4e2d5e[_0xdb0ff5(0x1ac)],{'success':![],'error':_0x231778[_0xdb0ff5(0x1f3)]},_0x4e2d5e[_0xdb0ff5(0x1f6)]);}else{if(_0x4e2d5e[_0xdb0ff5(0x1ac)]===_0xdb0ff5(0x1a9))try{await setup[_0xdb0ff5(0x214)](this,_0xdb0ff5(0x1d7),![],![]),this[_0xdb0ff5(0x24f)](_0x4e2d5e['from'],_0x4e2d5e[_0xdb0ff5(0x1ac)],{'success':!![],'message':_0xdb0ff5(0x28b)},_0x4e2d5e[_0xdb0ff5(0x1f6)]);}catch(_0x12801d){this[_0xdb0ff5(0x1f5)][_0xdb0ff5(0x23e)]('Notification\x20Test\x20Failed:\x20'+_0x12801d[_0xdb0ff5(0x1f3)]),this[_0xdb0ff5(0x24f)](_0x4e2d5e[_0xdb0ff5(0x274)],_0x4e2d5e[_0xdb0ff5(0x1ac)],{'success':![],'message':_0xdb0ff5(0x27a)+_0x12801d[_0xdb0ff5(0x1f3)]},_0x4e2d5e[_0xdb0ff5(0x1f6)]);}}}}}}}}}}}}}}}async[a0_0x223d27(0x1b2)](){const _0x9e4dfe=a0_0x223d27;try{const _0x4aa717=await this[_0x9e4dfe(0x1a4)](setup['SYSTEM_DP_MODE']);_0x4aa717&&_0x4aa717['val']&&Object[_0x9e4dfe(0x197)](setup[_0x9e4dfe(0x1cd)])['includes'](_0x4aa717['val'])?this[_0x9e4dfe(0x1ce)]=_0x4aa717['val']:(this[_0x9e4dfe(0x1ce)]=setup[_0x9e4dfe(0x1cd)][_0x9e4dfe(0x1ef)],await this[_0x9e4dfe(0x1ae)](setup[_0x9e4dfe(0x199)],{'val':setup[_0x9e4dfe(0x1cd)][_0x9e4dfe(0x1ef)],'ack':!![]}));}catch(_0x149633){this[_0x9e4dfe(0x1ce)]=setup[_0x9e4dfe(0x1cd)][_0x9e4dfe(0x1ef)];}}async[a0_0x223d27(0x27f)](){const _0x4158cf=a0_0x223d27;try{const _0x3346aa=this[_0x4158cf(0x1f4)][_0x4158cf(0x1c2)]||[];let _0x2d220b=![];const _0x2582ba=[];for(const _0xf90993 of _0x3346aa){try{const _0x4d7e11=await this[_0x4158cf(0x1a6)](_0xf90993);_0x4d7e11&&(_0x4d7e11['val']===!![]||_0x4d7e11['val']===_0x4158cf(0x222)||_0x4d7e11[_0x4158cf(0x1d2)]===0x1)&&(_0x2d220b=!![],_0x2582ba[_0x4158cf(0x216)](_0xf90993));}catch(_0x65cf48){}}return await this[_0x4158cf(0x1ae)]('system.presenceWho',{'val':_0x2582ba[_0x4158cf(0x248)](',\x20'),'ack':!![]}),_0x2d220b&&(this[_0x4158cf(0x1bc)]&&(this[_0x4158cf(0x1f5)]['info'](_0x4158cf(0x1ca)),recorder[_0x4158cf(0x267)](this)),!this[_0x4158cf(0x1ba)]&&this[_0x4158cf(0x1ce)]===setup[_0x4158cf(0x1cd)]['NORMAL']&&await recorder[_0x4158cf(0x1b0)](this,!![])),_0x2d220b;}catch(_0x40a218){return![];}}async[a0_0x223d27(0x27c)](){const _0x5b883f=a0_0x223d27;this[_0x5b883f(0x1f5)][_0x5b883f(0x1ee)](_0x5b883f(0x231)),await aiAgent[_0x5b883f(0x1e0)](this),this[_0x5b883f(0x217)](),this[_0x5b883f(0x206)](),this['triggerEnergyPrediction']();}async[a0_0x223d27(0x22b)](){const _0xb3d9a7=a0_0x223d27,_0x4fd189=[_0xb3d9a7(0x25f),_0xb3d9a7(0x1f7),_0xb3d9a7(0x27d)],_0x5a469b=[_0xb3d9a7(0x24e),_0xb3d9a7(0x254),_0xb3d9a7(0x20a)];for(const _0x2162c9 of _0x4fd189){for(const _0x41db4e of _0x5a469b){try{const _0x490b9f=_0x2162c9+'.'+_0x41db4e,_0x2f411a=await this[_0xb3d9a7(0x1a6)](_0x490b9f);if(_0x2f411a&&_0x2f411a[_0xb3d9a7(0x1d2)]){const _0x2b944f=String(_0x2f411a[_0xb3d9a7(0x1d2)])[_0xb3d9a7(0x215)]();if(_0x2b944f['includes']('sonn')||_0x2b944f['includes'](_0xb3d9a7(0x1e7))||_0x2b944f[_0xb3d9a7(0x238)](_0xb3d9a7(0x235))||_0x2b944f['includes']('clear')||_0x2b944f[_0xb3d9a7(0x238)](_0xb3d9a7(0x1e5)))return!![];}}catch(_0x4c3366){}}}return![];}[a0_0x223d27(0x206)](){const _0x322039=a0_0x223d27;if(!this[_0x322039(0x210)])return;try{this[_0x322039(0x1a8)](_0x322039(0x1a5),(_0x341910,_0x44e69e)=>{const _0x5a7442=_0x322039;_0x44e69e&&_0x44e69e['val']&&pythonBridge[_0x5a7442(0x1d6)](this,_0x5a7442(0x23b),{'sequences':JSON['parse'](_0x44e69e['val'])});});}catch(_0x1c3265){}}async[a0_0x223d27(0x1d5)](){const _0xd2ac10=a0_0x223d27;if(!this[_0xd2ac10(0x210)])return;try{const _0x24140e=await recorder['getOutsideTemperatureNumeric'](this);if(_0x24140e===null)return;const _0x1f0e8c={},_0x219755={},_0x2cd0e8=this['config'][_0xd2ac10(0x21d)]||[];for(const _0x204cbf of _0x2cd0e8){if(_0x204cbf[_0xd2ac10(0x1be)]===_0xd2ac10(0x1bb)&&_0x204cbf[_0xd2ac10(0x1ed)]){const _0x36705b=this[_0xd2ac10(0x26a)][_0x204cbf['id']];if(_0x36705b!==undefined)_0x1f0e8c[_0x204cbf['location']]=_0x36705b;if(_0x204cbf[_0xd2ac10(0x240)])_0x219755[_0x204cbf[_0xd2ac10(0x1ed)]]=!![];}}const _0x735d9a=await this[_0xd2ac10(0x22b)]();Object[_0xd2ac10(0x211)](_0x1f0e8c)['length']>0x0&&(pythonBridge[_0xd2ac10(0x1d6)](this,_0xd2ac10(0x20b),{'current_temps':_0x1f0e8c,'t_out':_0x24140e,'is_sunny':_0x735d9a,'solar_flags':_0x219755}),pythonBridge[_0xd2ac10(0x1d6)](this,_0xd2ac10(0x21c),{'current_temps':_0x1f0e8c,'t_out':_0x24140e,'targets':{}}));}catch(_0x49b9e6){}}[a0_0x223d27(0x217)](){const _0x41db9c=a0_0x223d27;if(!this[_0x41db9c(0x232)]||this['rawEventLog']['length']===0x0)return;const _0x52a18c=new Array(0x60)['fill'](0x0),_0x258784=new Date()[_0x41db9c(0x26c)](0x0,0x0,0x0,0x0);this[_0x41db9c(0x232)][_0x41db9c(0x1b3)](_0x2ebb20=>{const _0x2ee67d=_0x41db9c,_0x38dadd=new Date(_0x2ebb20[_0x2ee67d(0x1b7)]);if(_0x38dadd[_0x2ee67d(0x205)]()>=_0x258784){const _0x320ff7=_0x38dadd[_0x2ee67d(0x28c)](),_0x41a7cd=_0x38dadd[_0x2ee67d(0x250)](),_0x5a83b3=_0x320ff7*0x4+Math[_0x2ee67d(0x1d8)](_0x41a7cd/0xf);if(_0x5a83b3>=0x0&&_0x5a83b3<0x60)_0x52a18c[_0x5a83b3]++;}}),this[_0x41db9c(0x1ae)](_0x41db9c(0x219),{'val':JSON[_0x41db9c(0x1aa)](_0x52a18c),'ack':!![]});}['runPythonHealthCheck'](){const _0x1ec8e9=a0_0x223d27;if(!this[_0x1ec8e9(0x25e)]||this['dailyDigests'][_0x1ec8e9(0x260)]<0x2)return;const _0x10d705=this[_0x1ec8e9(0x25e)][_0x1ec8e9(0x277)](_0x3d874b=>{const _0x5e10b3=_0x1ec8e9,_0x5cde6d=(_0x3d874b[_0x5e10b3(0x21e)]||'')[_0x5e10b3(0x215)]();return ACTIVITY_LEVEL_MAP[_0x5cde6d]||0x32;});pythonBridge['send'](this,_0x1ec8e9(0x25d),{'values':_0x10d705,'tag':_0x1ec8e9(0x1a3)});}}function a0_0x1838(){const _0xbf3b99=['(((.+)+)+)+$','message','config','log','callback','accuweather.0','onMessage','3073861cbwALe','geminiApiKey','minutes_safe','updateTopologyMatrix','matrix','add','enum','genAI','cogni-living','setupDriftAnalysisScheduler','namespace','analysis.training.status','getTime','triggerGaitAnalysis','3CqTmrC','Verbunden','getForeignObjectsAsync','NextHours.Location_1.Day_1.current.symbol_desc','PREDICT_ENERGY','LTM.rawEventLog','system.mode','./lib/recorder','analysis.energy.insulationScore','isProVersion','keys','weatherInstance','communicate.request','sendNotification','toLowerCase','push','updateHealthVector','analysis.training.triggerTopology','analysis.health.todayVector','9217120TlXoNL','checkAndInstall','OPTIMIZE_ENERGY','devices','activityLevel','getEnums','calendarName','name','online','eventHistory','runBaselineDriftAnalysis','1056564zMqscH','now','TRAIN_ENERGY','lastAlertState','some','testContext','checkSolarCondition','cogni-living\x20adapter\x20starting\x20(v','abs','slice','Standard','LTM.triggerDailyDigest','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','rawEventLog','checkThermostats','2856764CdxNUH','klar','subscribeForeignStatesAsync','updateTopology','includes','setupModeResetScheduler','toString','ANALYZE_GAIT','dependencyInstallInProgress','Adapter','error','sort','isSolar','analysis.training.triggerHealth','.data.table','Instanz\x20nicht\x20gefunden','analysis.energy.mpcActive','simulateEnergyMPC','triggerDailyDigest','./lib/setup','join','apply','Daten\x20nicht\x20verfÃ¼gbar','briefingJob','automation.triggerAction','notifyTelegramEnabled','forecast.current.weather','sendTo','getMinutes','runPythonHealthCheck','initZombies','analysis.training.triggerComfort','Current.WeatherText','Sec-Training\x20started...','analysisInterval','testApiKey','\x20Tage)','systemConfig','TRAIN_SECURITY','getCalendarNames','startService','ANALYZE_TREND','dailyDigests','weatherunderground.0','length','generateContent','enum.rooms.*','Verbindung\x20erfolgreich!','onStateChange','Gemini\x20AI\x20initialized.','createAllObjects','abortExitTimer','analysis.triggerBriefing','537201taeFVq','sensorLastValues','parse','setHours','setupBriefingScheduler','169832uUvgsF','analysis.automation.description','startSystem','./lib/python_bridge','onUnload','find','from','instance','cancel','map','object','simulateButler','Fehler:\x20','analysis.automation.triggerAction','runAutopilot','daswetter.0','getGenerativeModel','checkWifiPresence','scanForDevices','LTM.trainingData.thermodynamics','checkLicense','subscribeStates','analysis.training.triggerSecurity','ack','Keine\x20Antwort\x20von\x20Gemini','common','system.adapter.','./lib/scheduler','getLtmData','Gesendet','getHours','./lib/ai_agent','values','exports','SYSTEM_DP_MODE','geminiModel','LTM.dailyDigests','sendMorningBriefing','notifyTelegramInstance','modeResetJob','ltmJob','inactivityThresholdHours','Kein\x20API\x20Key\x20Ã¼bergeben','Heizung\x20kann\x20','Activity-Level','getStateAsync','LTM.trainingData.sequences','getForeignStateAsync','getOutsideTemperatureNumeric','getState','testNotification','stringify','driftAnalysisTimer','command','_calName','setStateAsync','6nuoSrn','setPresence','triggerBriefing','loadSystemMode','forEach','scores','licenseKey','./lib/installer','timestamp','application/json','analysisTimer','isPresent','temperature','exitTimer','onReady','type','dismissAutomation','Aktiv\x20(','290YBcPNe','presenceDevices','updateLocation','analysis.trigger','minDaysForBaseline','./lib/scanner','./lib/automation','pop','PYTHON_EXE','WiFi\x20Presence\x20detected.','.system.mode','endsWith','SYSTEM_MODES','currentSystemMode','@iobroker/adapter-core','analysis.automation.patternDetected','setState','val','analysisHistory','split','triggerEnergyPrediction','send','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','floor','processSensorEvent','telegram','createDailyDigest','models/gemini-flash-latest','SET_TOPOLOGY','constructor','response','runGeminiAnalysis','initHistory','entries','analysis.training.triggerEnergy','7255360wSDLGc','heiter','analysis.automation.targetValue','sunny','main','Kein\x20Kalender-Adapter','fill','bind','unload','location','debug','NORMAL','analysis.topology.structure','updated'];a0_0x1838=function(){return _0xbf3b99;};return a0_0x1838();}if(require[a0_0x223d27(0x1e8)]!==module)module[a0_0x223d27(0x198)]=_0x4f1c1c=>new CogniLiving(_0x4f1c1c);else new CogniLiving();