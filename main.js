const a0_0x1c4c7a=a0_0x26af;(function(_0x4d1a78,_0x3e840c){const _0x4d3d14=a0_0x26af,_0x567827=_0x4d1a78();while(!![]){try{const _0x3f5b27=parseInt(_0x4d3d14(0x27a))/0x1*(parseInt(_0x4d3d14(0x20c))/0x2)+parseInt(_0x4d3d14(0x28f))/0x3+parseInt(_0x4d3d14(0x29c))/0x4+-parseInt(_0x4d3d14(0x29e))/0x5+parseInt(_0x4d3d14(0x20d))/0x6+-parseInt(_0x4d3d14(0x1c8))/0x7*(-parseInt(_0x4d3d14(0x1e6))/0x8)+-parseInt(_0x4d3d14(0x266))/0x9;if(_0x3f5b27===_0x3e840c)break;else _0x567827['push'](_0x567827['shift']());}catch(_0x389d85){_0x567827['push'](_0x567827['shift']());}}}(a0_0x2391,0x5b65e));const a0_0x2d9033=(function(){let _0x61365f=!![];return function(_0x4a596a,_0xf5e917){const _0x2399e2=_0x61365f?function(){const _0x211fbe=a0_0x26af;if(_0xf5e917){const _0x18fdcc=_0xf5e917[_0x211fbe(0x217)](_0x4a596a,arguments);return _0xf5e917=null,_0x18fdcc;}}:function(){};return _0x61365f=![],_0x2399e2;};}()),a0_0x49d4ce=a0_0x2d9033(this,function(){const _0x4d7455=a0_0x26af;return a0_0x49d4ce[_0x4d7455(0x1e9)]()['search']('(((.+)+)+)+$')['toString']()[_0x4d7455(0x1b2)](a0_0x49d4ce)[_0x4d7455(0x227)](_0x4d7455(0x268));});a0_0x49d4ce();'use strict';function a0_0x26af(_0x3cc8b3,_0x39e4f2){const _0x120ffc=a0_0x2391();return a0_0x26af=function(_0x49d4ce,_0x2d9033){_0x49d4ce=_0x49d4ce-0x19d;let _0x239107=_0x120ffc[_0x49d4ce];return _0x239107;},a0_0x26af(_0x3cc8b3,_0x39e4f2);}const utils=require(a0_0x1c4c7a(0x1f0)),{GoogleGenerativeAI}=require(a0_0x1c4c7a(0x29b)),path=require(a0_0x1c4c7a(0x1c5)),fs=require('fs'),installer=require('./lib/installer'),scanner=require(a0_0x1c4c7a(0x1cd)),schedulers=require(a0_0x1c4c7a(0x21f)),topology=require('./lib/topology'),setup=require(a0_0x1c4c7a(0x21c)),recorder=require('./lib/recorder'),pythonBridge=require(a0_0x1c4c7a(0x1ec)),aiAgent=require(a0_0x1c4c7a(0x1b8)),deadMan=require(a0_0x1c4c7a(0x1fb)),automation=require(a0_0x1c4c7a(0x1ba)),GEMINI_MODEL='models/gemini-flash-latest';function a0_0x2391(){const _0x253d8c=['ready','log','ðŸ“¦\x20Restored\x20','open','health','12315hzotHR','type','onMessage','ltmJob','initSystemConfig','createDailyDigest','round','analysis.health.geminiNight','callback','getEnums','licenseKey','filter','system.presenceWho','toLocaleDateString','LTM.trainingData.sequences','analysis.training.triggerTopology','LTM.trainingData.thermodynamics','NIGHT','historyJob','sendTo','date','2153298FIEgjR','version','systemConfig','join','analysis.automation.patternDetected','window','analysis.training.status','\x20Tage)','VACATION','Live\x20Event\x20Pulse','roomIntegratorTimer','Aktiv\x20(','@google/generative-ai','1404124zXDYex','{\x22history\x22:{}}','1350880xLyHkf','pop','thermostat','TRAIN_SECURITY','getOverviewData','runPythonHealthCheck','LTM.triggerDailyDigest','door','SYSTEM_MODES','General\x20Activity\x20Trend','max','state','security','initHistory','Lernphase\x20(','ack','analyzeWindowOpening','devices','appendToLog','dailyDigests','Unknown','guest','analysis.health.activityTrend','healthTrendInterval','isPresent','.venv','number','message','stateChange','abortExitTimer','onStateChange','parse','analysis.automation.description','analysis.trigger','modules','analysis.security.lastScore','name','length','lastAlertState','lastTrackerEventTime','some','node-schedule','error','SYSTEM_DP_MODE','moduleHealth','constructor','analysis.training.triggerHealth','updateTopology','subscribeStates','text','analysis.health.geminiDay','./lib/ai_agent','analysis.visualization.pulse','./lib/automation','TRAIN_HEALTH','analysis.prediction.trackerConfidence','writeFileSync','currentSystemMode','utf8','LTM.rawEventLog','automation.triggerAction','getForeignObjectsAsync','.json','TRAIN_TOPOLOGY','path','ðŸ’¾\x20Saving\x20Daily\x20History\x20for\x20','energy','105PUiupW','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','minDaysForBaseline','stringify','forEach','./lib/scanner','Corrupt','unload','createAllObjects','infrasoundLocked','runGeminiAnalysis','pulse','Warte\x20auf\x20Analyse...','integrateRoomTime','getHistoryData','Gemini\x20Report\x20Night','endsWith','party','bind','replayTodayEvents','analysis.energy.warmupTimes','briefingJob',')\x20-\x20Phase\x20E\x20(Fix\x20Restore)','59\x2023\x20*\x20*\x20*','value','triggerEnergyPrediction','\x20events\x20from\x20today...','checkWifiPresence','reduce','Init...','387496ruBPSg','moduleEnergy','cogni-living','toString','main','checkLicense','./lib/python_bridge','analysis.training.triggerSecurity','getHours','toISOString','@iobroker/adapter-core','exitTimer','command','history','setPresence','checkSolarCondition','Daily\x20Room\x20Details\x20(48x30min)','analysisHistory','analysisTimer','infrasoundSensorId','Party\x20Mode','./lib/dead_man','warn','info','Sec-Training\x20started...','setObjectNotExistsAsync','setHours','getForeignStateAsync','TRAIN_COMFORT','getMinutes','min','config','toLowerCase','Gemini\x20Init\x20Error:\x20','object','analysis.security.learningStatus','cogni-living\x20adapter\x20starting\x20(v','processSensorEvent','38zEQSys','3511326EhpGjo','common','val','existsSync','manual','motion','sensorLastValues','saveDailyHistory','Keine\x20Daten','History\x20Save\x20Error:\x20','apply','inactivityThresholdHours','eventHistory','getDate','isProVersion','./lib/setup','genAI','todayVector','./lib/scheduler','exitGraceTimer','timestamp','setState','communicate.request','fill','analysis.health.todayRoomDetails','find','search','split','LTM.baselineStatus','analysis.health.todayVector','includes','loadSystemMode','analysis.activity.roomHistory','location','startSystem','moduleComfort','...','moduleSecurity','events.history','analysis.energy.warmupSources','haustÃ¼r','setStateAsync','getAbsoluteDefaultDataDir','then','.system.mode','mkdirSync','json','âœ…\x20History\x20saved:\x20','protectAiMemory','memoryCache','driftAnalysisTimer','generateHealthReport','triggerGaitAnalysis','all','terrasse','analysis.activity.roomStats','analysis.automation.targetId','triggerBriefing','analysis.prediction.trackerTopRoom','analysis.training.triggerComfort','send','string','updateHealthVector','Room\x20History\x20(24h\x20Buckets)','from','analysis.automation.targetValue','runAutopilot','sources','dependencyInstallInProgress','now','push','scheduleJob','activeModules','Warm-Up\x20Time','pressureBuffer','getStateAsync','TRAIN_ENERGY','onUnload','onReady','Gemini\x20Report\x20Day','NORMAL','rawEventLog','subscribeForeignStates','analysis.training.triggerEnergy','geminiModel','telegram','isSolar','\x22history\x22:{}','debug','17730144qxQDUc','No\x20data','(((.+)+)+)+$','setDate','handleInfrasound','SET_LEARNING_MODE','scanThermostats','cancel','readFileSync','isGracePeriodActive','getGenerativeModel','bin','triggerInfrasoundCorrelation','isRelevantActivity','application/json'];a0_0x2391=function(){return _0x253d8c;};return a0_0x2391();}class CogniLiving extends utils['Adapter']{constructor(_0x5488b0){const _0x47fb77=a0_0x1c4c7a;super({..._0x5488b0,'name':'cogni-living'}),this[_0x47fb77(0x219)]=[],this[_0x47fb77(0x1f7)]=[],this[_0x47fb77(0x25e)]=[],this[_0x47fb77(0x2b1)]=[],this[_0x47fb77(0x213)]={},this[_0x47fb77(0x291)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x47fb77(0x19d)]=!![],this[_0x47fb77(0x1f1)]=null,this[_0x47fb77(0x220)]=null,this[_0x47fb77(0x26f)]=![],this[_0x47fb77(0x21d)]=null,this[_0x47fb77(0x261)]=null,this['currentSystemMode']=setup['SYSTEM_MODES']['NORMAL'],this['isProVersion']=![],this[_0x47fb77(0x1ab)]=![],this[_0x47fb77(0x1f8)]=null,this[_0x47fb77(0x27d)]=null,this['modeResetJob']=null,this[_0x47fb77(0x23f)]=null,this[_0x47fb77(0x1dd)]=null,this[_0x47fb77(0x28c)]=null,this['trackerHeartbeat']=null,this['healthTrendInterval']=null,this['roomIntegratorTimer']=null,this['dependencyInstallInProgress']=![],this[_0x47fb77(0x1ac)]=Date[_0x47fb77(0x252)](),this[_0x47fb77(0x23e)]=null,this['bootTime']=Date[_0x47fb77(0x252)](),this[_0x47fb77(0x1d1)]=![],this[_0x47fb77(0x257)]=[],this[_0x47fb77(0x255)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x47fb77(0x275),this[_0x47fb77(0x25b)][_0x47fb77(0x1da)](this)),this['on'](_0x47fb77(0x1a1),this[_0x47fb77(0x1a3)]['bind'](this)),this['on'](_0x47fb77(0x1cf),this[_0x47fb77(0x25a)][_0x47fb77(0x1da)](this)),this['on'](_0x47fb77(0x1a0),this[_0x47fb77(0x27c)][_0x47fb77(0x1da)](this));}async[a0_0x1c4c7a(0x25b)](){const _0x4d4cba=a0_0x1c4c7a;this['log'][_0x4d4cba(0x1fd)](_0x4d4cba(0x20a)+this[_0x4d4cba(0x290)]+_0x4d4cba(0x1de));if(this[_0x4d4cba(0x205)][_0x4d4cba(0x1b1)]!==undefined)this[_0x4d4cba(0x255)][_0x4d4cba(0x279)]=this[_0x4d4cba(0x205)][_0x4d4cba(0x1b1)];if(this[_0x4d4cba(0x205)][_0x4d4cba(0x232)]!==undefined)this[_0x4d4cba(0x255)][_0x4d4cba(0x2aa)]=this['config'][_0x4d4cba(0x232)];if(this[_0x4d4cba(0x205)][_0x4d4cba(0x1e7)]!==undefined)this[_0x4d4cba(0x255)][_0x4d4cba(0x1c7)]=this['config'][_0x4d4cba(0x1e7)];if(this[_0x4d4cba(0x205)]['moduleComfort']!==undefined)this['activeModules']['comfort']=this[_0x4d4cba(0x205)][_0x4d4cba(0x230)];if(this[_0x4d4cba(0x205)][_0x4d4cba(0x1a7)])this[_0x4d4cba(0x255)]={...this['activeModules'],...this[_0x4d4cba(0x205)][_0x4d4cba(0x1a7)]};this[_0x4d4cba(0x22f)]();}async[a0_0x1c4c7a(0x22f)](){const _0x16a1e9=a0_0x1c4c7a;await setup['initZombies'](this);try{this['isProVersion']=await setup[_0x16a1e9(0x1eb)](this['config'][_0x16a1e9(0x284)]);}catch(_0x50985f){}if(!this[_0x16a1e9(0x205)][_0x16a1e9(0x218)]||this[_0x16a1e9(0x205)][_0x16a1e9(0x218)]<0.1)this[_0x16a1e9(0x205)]['inactivityThresholdHours']=0xc;await setup[_0x16a1e9(0x2ab)](this),await setup[_0x16a1e9(0x27e)](this);try{const _0x57bb0c=await this[_0x16a1e9(0x258)]('analysis.energy.warmupTimes'),_0x281fd1=await this['getStateAsync'](_0x16a1e9(0x234));_0x57bb0c&&_0x57bb0c[_0x16a1e9(0x20f)]&&_0x281fd1&&_0x281fd1[_0x16a1e9(0x20f)]&&(Date[_0x16a1e9(0x252)]()-_0x57bb0c['ts']<0x4*0xe10*0x3e8&&(this[_0x16a1e9(0x23e)]={'times':JSON['parse'](_0x57bb0c[_0x16a1e9(0x20f)]),'sources':JSON[_0x16a1e9(0x1a4)](_0x281fd1[_0x16a1e9(0x20f)])}));}catch(_0x53e0c8){}if(this[_0x16a1e9(0x205)]['geminiApiKey'])try{this[_0x16a1e9(0x21d)]=new GoogleGenerativeAI(this['config']['geminiApiKey']),this['geminiModel']=this[_0x16a1e9(0x21d)][_0x16a1e9(0x270)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x16a1e9(0x274)}});}catch(_0x58104a){this[_0x16a1e9(0x276)][_0x16a1e9(0x1af)](_0x16a1e9(0x207)+_0x58104a['message']);}await setup[_0x16a1e9(0x1d0)](this),await this['loadSystemMode'](),await this['setObjectNotExistsAsync'](_0x16a1e9(0x1b9),{'type':_0x16a1e9(0x2a9),'common':{'name':_0x16a1e9(0x298),'type':_0x16a1e9(0x19f),'role':_0x16a1e9(0x1e0),'read':!![],'write':![]},'native':{}}),await this[_0x16a1e9(0x1ff)](_0x16a1e9(0x244),{'type':_0x16a1e9(0x2a9),'common':{'name':'Room\x20Dwell\x20Time\x20Stats','type':_0x16a1e9(0x24a),'role':_0x16a1e9(0x23b),'read':!![],'write':![],'def':'{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}'},'native':{}}),await this[_0x16a1e9(0x1ff)](_0x16a1e9(0x22d),{'type':_0x16a1e9(0x2a9),'common':{'name':_0x16a1e9(0x24c),'type':_0x16a1e9(0x24a),'role':_0x16a1e9(0x23b),'read':!![],'write':![],'def':_0x16a1e9(0x29d)},'native':{}}),await this[_0x16a1e9(0x1ff)](_0x16a1e9(0x281),{'type':_0x16a1e9(0x2a9),'common':{'name':_0x16a1e9(0x1d7),'type':_0x16a1e9(0x24a),'role':_0x16a1e9(0x1b6),'read':!![],'write':![],'def':_0x16a1e9(0x1d4)},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.geminiDay',{'type':_0x16a1e9(0x2a9),'common':{'name':_0x16a1e9(0x25c),'type':'string','role':'text','read':!![],'write':![],'def':_0x16a1e9(0x1d4)},'native':{}}),await this[_0x16a1e9(0x1ff)]('analysis.health.todayVector',{'type':_0x16a1e9(0x2a9),'common':{'name':'Daily\x20Activity\x20Vector\x20(48x30min)','type':'string','role':_0x16a1e9(0x23b),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x16a1e9(0x1ff)](_0x16a1e9(0x225),{'type':'state','common':{'name':_0x16a1e9(0x1f6),'type':_0x16a1e9(0x24a),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0x16a1e9(0x2b4),{'type':_0x16a1e9(0x2a9),'common':{'name':_0x16a1e9(0x2a7),'type':'number','role':_0x16a1e9(0x1e0),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x16a1e9(0x1ff)](_0x16a1e9(0x1dc),{'type':_0x16a1e9(0x2a9),'common':{'name':_0x16a1e9(0x256),'type':'string','role':_0x16a1e9(0x23b),'read':!![],'write':![]},'native':{}});try{const _0x3dd308=await this[_0x16a1e9(0x258)](_0x16a1e9(0x233));if(_0x3dd308&&_0x3dd308[_0x16a1e9(0x20f)]){this[_0x16a1e9(0x219)]=JSON[_0x16a1e9(0x1a4)](_0x3dd308[_0x16a1e9(0x20f)]);if(this[_0x16a1e9(0x21b)]){const _0xfc250=await this[_0x16a1e9(0x258)](_0x16a1e9(0x1c0));if(_0xfc250&&_0xfc250[_0x16a1e9(0x20f)])this[_0x16a1e9(0x25e)]=JSON['parse'](_0xfc250['val']);}this[_0x16a1e9(0x276)][_0x16a1e9(0x1fd)](_0x16a1e9(0x277)+this['eventHistory'][_0x16a1e9(0x1aa)]+'\x20events\x20from\x20standard\x20storage.');}}catch(_0x397532){this[_0x16a1e9(0x219)]=[];}try{const _0xd30c1e=await this[_0x16a1e9(0x258)]('LTM.dailyDigests');if(_0xd30c1e&&_0xd30c1e[_0x16a1e9(0x20f)])this[_0x16a1e9(0x2b1)]=JSON[_0x16a1e9(0x1a4)](_0xd30c1e['val']);}catch(_0x502942){this[_0x16a1e9(0x2b1)]=[];}const _0x24267e=this[_0x16a1e9(0x2b1)][_0x16a1e9(0x1aa)]>=(this[_0x16a1e9(0x205)][_0x16a1e9(0x1ca)]||0x7)?_0x16a1e9(0x29a)+this[_0x16a1e9(0x2b1)]['length']+_0x16a1e9(0x296):_0x16a1e9(0x2ac)+this[_0x16a1e9(0x2b1)][_0x16a1e9(0x1aa)]+'/'+(this[_0x16a1e9(0x205)]['minDaysForBaseline']||0x7)+')';await this[_0x16a1e9(0x236)](_0x16a1e9(0x229),{'val':_0x24267e,'ack':!![]}),this[_0x16a1e9(0x1b5)](_0x16a1e9(0x1a6)),this['subscribeStates'](_0x16a1e9(0x2a4)),this[_0x16a1e9(0x1b5)]('analysis.training.triggerHealth');this[_0x16a1e9(0x205)]['infrasoundEnabled']&&this[_0x16a1e9(0x205)]['infrasoundSensorId']&&this['activeModules'][_0x16a1e9(0x2aa)]&&this[_0x16a1e9(0x25f)](this[_0x16a1e9(0x205)][_0x16a1e9(0x1f9)]);const _0x53109e=this['config']['devices'];if(_0x53109e)for(const _0xf3c245 of _0x53109e){await this['subscribeForeignStatesAsync'](_0xf3c245['id']);}const _0x3eb0ca=this[_0x16a1e9(0x205)]['presenceDevices'];if(_0x3eb0ca)for(const _0x58d578 of _0x3eb0ca){await this['subscribeForeignStatesAsync'](_0x58d578);}const _0x2a2111=require(_0x16a1e9(0x1ae));if(this[_0x16a1e9(0x28c)])this[_0x16a1e9(0x28c)][_0x16a1e9(0x26d)]();this[_0x16a1e9(0x28c)]=_0x2a2111[_0x16a1e9(0x254)](_0x16a1e9(0x1df),()=>{const _0x1d9ed7=_0x16a1e9;this[_0x1d9ed7(0x214)]();}),setTimeout(()=>this[_0x16a1e9(0x1db)](),0x1388);if(this[_0x16a1e9(0x299)])clearInterval(this['roomIntegratorTimer']);this[_0x16a1e9(0x1d5)](),this[_0x16a1e9(0x299)]=setInterval(async()=>{const _0x4edb4c=_0x16a1e9;await this[_0x4edb4c(0x1d5)]();},0x3c*0x3e8);if(this[_0x16a1e9(0x2b5)])clearInterval(this[_0x16a1e9(0x2b5)]);this[_0x16a1e9(0x2b5)]=setInterval(()=>{const _0x551a03=_0x16a1e9;this[_0x551a03(0x21b)]&&this[_0x551a03(0x255)][_0x551a03(0x279)]&&this['runPythonHealthCheck']();},0x4*0x3c*0x3c*0x3e8);const _0x112831=path['join'](__dirname,_0x16a1e9(0x19e),_0x16a1e9(0x271),'python');pythonBridge['startService'](this,_0x112831);}[a0_0x1c4c7a(0x25a)](_0x4853df){const _0x4863a8=a0_0x1c4c7a;if(this[_0x4863a8(0x28c)])this[_0x4863a8(0x28c)]['cancel']();this['saveDailyHistory']()[_0x4863a8(0x238)](()=>{const _0x35b226=_0x4863a8;if(this[_0x35b226(0x1f8)])clearInterval(this[_0x35b226(0x1f8)]);if(this[_0x35b226(0x299)])clearInterval(this['roomIntegratorTimer']);recorder[_0x35b226(0x1a2)](this),pythonBridge['stopService'](this),_0x4853df();});}async[a0_0x1c4c7a(0x1db)](){const _0x1d83e6=a0_0x1c4c7a;if(!this[_0x1d83e6(0x219)]||this['eventHistory'][_0x1d83e6(0x1aa)]===0x0){this[_0x1d83e6(0x276)][_0x1d83e6(0x1fc)]('âš \x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.');return;}this[_0x1d83e6(0x276)][_0x1d83e6(0x1fd)]('â†º\x20Replaying\x20'+this[_0x1d83e6(0x219)]['length']+_0x1d83e6(0x1e2));const _0x13dfd7=new Date()[_0x1d83e6(0x200)](0x0,0x0,0x0,0x0),_0x1c0495=_0x1d83e6(0x22d);let _0xd7de29={'history':{},'date':new Date()['toLocaleDateString']()};const _0x5f3382=_0x1d83e6(0x22a),_0x3a5358=_0x1d83e6(0x225);let _0x3cf3fc=new Array(0x30)[_0x1d83e6(0x224)](0x0),_0x35ed8b=Array[_0x1d83e6(0x24d)]({'length':0x30},()=>[]);this[_0x1d83e6(0x219)][_0x1d83e6(0x1cc)](_0x157b68=>{const _0x133f22=_0x1d83e6;if(_0x157b68[_0x133f22(0x221)]>=_0x13dfd7){if(recorder[_0x133f22(0x273)](_0x157b68[_0x133f22(0x27b)],_0x157b68[_0x133f22(0x1e0)])){const _0x85b9fd=new Date(_0x157b68[_0x133f22(0x221)]),_0x2ade8b=_0x85b9fd[_0x133f22(0x1ee)]()*0x2+(_0x85b9fd[_0x133f22(0x203)]()>=0x1e?0x1:0x0);if(_0x2ade8b<0x30){_0x3cf3fc[_0x2ade8b]++;const _0xb0ac91=_0x157b68[_0x133f22(0x22e)]||_0x157b68[_0x133f22(0x1a9)]||'?';let _0x323657=_0x35ed8b[_0x2ade8b];!_0x323657[_0x133f22(0x22b)](_0xb0ac91)&&_0x323657[_0x133f22(0x253)](_0xb0ac91);}const _0x1703e9=_0x85b9fd['getHours']();let _0x1c9ae3=_0x157b68[_0x133f22(0x22e)]||_0x133f22(0x2b2);const _0x41731d=(this[_0x133f22(0x205)]['devices']||[])[_0x133f22(0x226)](_0x1ddc12=>_0x1ddc12[_0x133f22(0x22e)]===_0x1c9ae3);if(_0x41731d)_0x1c9ae3=_0x41731d[_0x133f22(0x22e)];if(!_0xd7de29[_0x133f22(0x1f3)][_0x1c9ae3])_0xd7de29[_0x133f22(0x1f3)][_0x1c9ae3]=new Array(0x18)['fill'](0x0);if(_0xd7de29['history'][_0x1c9ae3][_0x1703e9]<0x3c)_0xd7de29[_0x133f22(0x1f3)][_0x1c9ae3][_0x1703e9]++;}}});const _0x38ac87=await this[_0x1d83e6(0x258)](_0x1c0495);(!_0x38ac87||!_0x38ac87[_0x1d83e6(0x20f)]||_0x38ac87[_0x1d83e6(0x20f)]==='{}'||_0x38ac87[_0x1d83e6(0x20f)][_0x1d83e6(0x22b)](_0x1d83e6(0x264)))&&await this[_0x1d83e6(0x236)](_0x1c0495,{'val':JSON[_0x1d83e6(0x1cb)](_0xd7de29),'ack':!![]}),await this['setStateAsync'](_0x5f3382,{'val':JSON[_0x1d83e6(0x1cb)](_0x3cf3fc),'ack':!![]}),await this['setStateAsync'](_0x3a5358,{'val':JSON[_0x1d83e6(0x1cb)](_0x35ed8b),'ack':!![]}),this[_0x1d83e6(0x276)][_0x1d83e6(0x1fd)]('âœ…\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.');}async[a0_0x1c4c7a(0x214)](){const _0x5c41be=a0_0x1c4c7a;if(!this['activeModules'][_0x5c41be(0x279)])return;const _0x581d26=new Date()[_0x5c41be(0x1ef)]()[_0x5c41be(0x228)]('T')[0x0];this[_0x5c41be(0x276)][_0x5c41be(0x265)](_0x5c41be(0x1c6)+_0x581d26+_0x5c41be(0x231));try{const [_0x1f2f19,_0x1fa1df,_0xba5788,_0x16d1f2,_0x445569,_0x384755]=await Promise[_0x5c41be(0x242)]([this[_0x5c41be(0x258)](_0x5c41be(0x22d)),this[_0x5c41be(0x258)](_0x5c41be(0x281)),this[_0x5c41be(0x258)](_0x5c41be(0x1b7)),this[_0x5c41be(0x258)](_0x5c41be(0x1a8)),this[_0x5c41be(0x258)]('analysis.health.todayVector'),this[_0x5c41be(0x258)](_0x5c41be(0x2b4))]),_0xf8e296=this[_0x5c41be(0x219)][_0x5c41be(0x285)](_0x2ba214=>_0x2ba214[_0x5c41be(0x221)]>=new Date()['setHours'](0x0,0x0,0x0,0x0)&&(_0x2ba214[_0x5c41be(0x1a9)][_0x5c41be(0x206)]()[_0x5c41be(0x22b)](_0x5c41be(0x235))||_0x2ba214[_0x5c41be(0x1a9)]['toLowerCase']()[_0x5c41be(0x22b)](_0x5c41be(0x243)))&&(_0x2ba214[_0x5c41be(0x1e0)]===!![]||_0x2ba214['value']===_0x5c41be(0x278)))[_0x5c41be(0x1aa)];let _0x260fdd=0x55;if(_0x384755&&_0x384755[_0x5c41be(0x20f)]!==undefined)_0x260fdd=Math[_0x5c41be(0x204)](0x64,Math['max'](0x14,Math[_0x5c41be(0x280)](0x50+Number(_0x384755[_0x5c41be(0x20f)])*0x5)));const _0x47df0b={'date':_0x581d26,'timestamp':Date['now'](),'roomHistory':_0x1f2f19?.['val']?JSON['parse'](_0x1f2f19[_0x5c41be(0x20f)]):{},'geminiNight':_0x1fa1df?.['val']||'Keine\x20Daten','geminiDay':_0xba5788?.[_0x5c41be(0x20f)]||_0x5c41be(0x215),'anomalyScore':_0x16d1f2?.[_0x5c41be(0x20f)]||0.1,'todayVector':_0x445569?.['val']?JSON[_0x5c41be(0x1a4)](_0x445569[_0x5c41be(0x20f)]):new Array(0x30)[_0x5c41be(0x224)](0x0),'batteryLevel':_0x260fdd,'freshAirCount':_0xf8e296,'eventHistory':this[_0x5c41be(0x219)]},_0x161d0b=utils[_0x5c41be(0x237)](),_0x358fc9=path['join'](_0x161d0b,_0x5c41be(0x1e8),_0x5c41be(0x1f3));if(!fs[_0x5c41be(0x210)](_0x358fc9))fs[_0x5c41be(0x23a)](_0x358fc9,{'recursive':!![]});const _0x510798=path[_0x5c41be(0x292)](_0x358fc9,_0x581d26+_0x5c41be(0x1c3));fs[_0x5c41be(0x1bd)](_0x510798,JSON['stringify'](_0x47df0b)),this[_0x5c41be(0x276)][_0x5c41be(0x1fd)](_0x5c41be(0x23c)+_0x510798);}catch(_0x509a11){this[_0x5c41be(0x276)][_0x5c41be(0x1af)](_0x5c41be(0x216)+_0x509a11[_0x5c41be(0x1a0)]);}}async['integrateRoomTime'](){const _0x5c92d7=a0_0x1c4c7a;if(!this['isPresent'])return;try{let _0x278571=null;try{const _0x2381a4=await this[_0x5c92d7(0x258)](_0x5c92d7(0x247)),_0x11755b=await this[_0x5c92d7(0x258)](_0x5c92d7(0x1bc));if(_0x2381a4&&_0x2381a4['val']&&_0x11755b&&_0x11755b['val']&&_0x11755b[_0x5c92d7(0x20f)]>0.3){if(_0x2381a4[_0x5c92d7(0x20f)]!==_0x5c92d7(0x2b2)&&_0x2381a4['val']!==_0x5c92d7(0x1e5))_0x278571=_0x2381a4[_0x5c92d7(0x20f)];}}catch(_0x328972){}if(!_0x278571){const _0x271e0b=this[_0x5c92d7(0x205)]['devices']||[];for(const _0x436953 of _0x271e0b){if(_0x436953['type']===_0x5c92d7(0x212)&&_0x436953[_0x5c92d7(0x22e)])try{const _0x2893e0=await this[_0x5c92d7(0x201)](_0x436953['id']);if(_0x2893e0&&(_0x2893e0[_0x5c92d7(0x20f)]===!![]||_0x2893e0[_0x5c92d7(0x20f)]==='on'||_0x2893e0[_0x5c92d7(0x20f)]===0x1)){_0x278571=_0x436953['location'];break;}}catch(_0x9a42ba){}}}if(!_0x278571)return;const _0x33ee79=this[_0x5c92d7(0x205)][_0x5c92d7(0x2af)]||[];let _0x74042b=_0x278571;const _0x49f29d=_0x33ee79['find'](_0x488d0c=>_0x488d0c[_0x5c92d7(0x22e)]&&_0x488d0c[_0x5c92d7(0x22e)][_0x5c92d7(0x206)]()===_0x278571['toLowerCase']());if(_0x49f29d)_0x74042b=_0x49f29d[_0x5c92d7(0x22e)];const _0x4436f8=_0x5c92d7(0x22d),_0x39c29c=await this[_0x5c92d7(0x258)](_0x4436f8),_0x139b55=new Date()[_0x5c92d7(0x287)]();let _0x255be6={'history':{},'date':_0x139b55};if(_0x39c29c&&_0x39c29c['val'])try{_0x255be6=JSON[_0x5c92d7(0x1a4)](_0x39c29c[_0x5c92d7(0x20f)]);}catch(_0x22cac7){}_0x255be6[_0x5c92d7(0x28e)]!==_0x139b55&&(_0x255be6['history']={},_0x255be6[_0x5c92d7(0x28e)]=_0x139b55);if(!_0x255be6[_0x5c92d7(0x1f3)][_0x74042b])_0x255be6[_0x5c92d7(0x1f3)][_0x74042b]=new Array(0x18)[_0x5c92d7(0x224)](0x0);const _0x20c8e8=new Date()[_0x5c92d7(0x1ee)]();if(_0x255be6['history'][_0x74042b][_0x20c8e8]<0x3c)_0x255be6[_0x5c92d7(0x1f3)][_0x74042b][_0x20c8e8]++;await this[_0x5c92d7(0x236)](_0x4436f8,{'val':JSON['stringify'](_0x255be6),'ack':!![]});}catch(_0x3ac8ff){this['log'][_0x5c92d7(0x1fc)]('[Integrator]\x20Error:\x20'+_0x3ac8ff[_0x5c92d7(0x1a0)]);}}async[a0_0x1c4c7a(0x27c)](_0x660238){const _0x622b07=a0_0x1c4c7a;if(typeof _0x660238===_0x622b07(0x208)&&_0x660238[_0x622b07(0x1a0)]){if(_0x660238[_0x622b07(0x1f2)]===_0x622b07(0x1d6)){const _0x5ebeed=_0x660238[_0x622b07(0x1a0)][_0x622b07(0x28e)],_0x27b5a7=utils['getAbsoluteDefaultDataDir'](),_0x25b241=path['join'](_0x27b5a7,_0x622b07(0x1e8),_0x622b07(0x1f3),_0x5ebeed+_0x622b07(0x1c3));if(fs['existsSync'](_0x25b241))try{const _0x6f0187=JSON[_0x622b07(0x1a4)](fs['readFileSync'](_0x25b241,_0x622b07(0x1bf)));this[_0x622b07(0x28d)](_0x660238[_0x622b07(0x24d)],_0x660238[_0x622b07(0x1f2)],{'success':!![],'data':_0x6f0187},_0x660238[_0x622b07(0x282)]);}catch(_0x36ec17){this[_0x622b07(0x28d)](_0x660238[_0x622b07(0x24d)],_0x660238[_0x622b07(0x1f2)],{'success':![],'error':_0x622b07(0x1ce)},_0x660238['callback']);}else this[_0x622b07(0x28d)](_0x660238[_0x622b07(0x24d)],_0x660238[_0x622b07(0x1f2)],{'success':![],'error':_0x622b07(0x267)},_0x660238[_0x622b07(0x282)]);}else{if(_0x660238[_0x622b07(0x1f2)]===_0x622b07(0x2a2)){const _0xec6bfb=this[_0x622b07(0x2b1)][_0x622b07(0x1aa)];let _0x203419=new Array(0x30)[_0x622b07(0x224)](0x0),_0x46376d=Array['from']({'length':0x30},()=>[]);try{const _0x297d38=await this[_0x622b07(0x258)]('analysis.health.todayVector');if(_0x297d38&&_0x297d38[_0x622b07(0x20f)])_0x203419=JSON[_0x622b07(0x1a4)](_0x297d38['val']);const _0x2fccf1=await this['getStateAsync'](_0x622b07(0x225));if(_0x2fccf1&&_0x2fccf1['val'])_0x46376d=JSON[_0x622b07(0x1a4)](_0x2fccf1['val']);}catch(_0x505cdd){}let _0x301664=new Array(0x30)[_0x622b07(0x224)](0x0);try{const _0x1e92ec=new Date();_0x1e92ec[_0x622b07(0x269)](_0x1e92ec[_0x622b07(0x21a)]()-0x1);const _0x2c41df=_0x1e92ec[_0x622b07(0x1ef)]()[_0x622b07(0x228)]('T')[0x0],_0x591f3d=utils[_0x622b07(0x237)](),_0x4df2d9=path[_0x622b07(0x292)](_0x591f3d,_0x622b07(0x1e8),_0x622b07(0x1f3),_0x2c41df+_0x622b07(0x1c3));if(fs[_0x622b07(0x210)](_0x4df2d9)){const _0x197b57=JSON[_0x622b07(0x1a4)](fs[_0x622b07(0x26e)](_0x4df2d9,_0x622b07(0x1bf)));if(_0x197b57&&_0x197b57[_0x622b07(0x21e)])_0x301664=_0x197b57['todayVector'];}}catch(_0x15dd98){}let _0x2b114d={'today':{},'yesterday':{}};try{const _0x346e7e=await this[_0x622b07(0x258)]('analysis.activity.roomStats');if(_0x346e7e&&_0x346e7e[_0x622b07(0x20f)])_0x2b114d=JSON['parse'](_0x346e7e[_0x622b07(0x20f)]);}catch(_0x5210c0){}let _0x5e1dd7=null;try{const _0x3b39eb=await this['getStateAsync'](_0x622b07(0x2b4));if(_0x3b39eb)_0x5e1dd7=_0x3b39eb['val'];}catch(_0x5b4ab2){}if(_0x5e1dd7===undefined||_0x5e1dd7===null){const _0x156cd5=_0x203419[_0x622b07(0x1e4)]((_0x200205,_0x587433)=>_0x200205+_0x587433,0x0),_0xd1178f=Math[_0x622b07(0x204)](0x2,Math[_0x622b07(0x2a8)](-0x2,(0x64-_0x156cd5)/0x32));_0x5e1dd7=_0xd1178f;}let _0xf5144b=![],_0x1d713b='',_0x55727f='',_0x44adce='';try{const _0x1d38e8=await this[_0x622b07(0x258)](_0x622b07(0x293));if(_0x1d38e8&&_0x1d38e8[_0x622b07(0x20f)]){_0xf5144b=!![];const _0x44a2bc=await this['getStateAsync'](_0x622b07(0x1a5));_0x1d713b=_0x44a2bc?_0x44a2bc['val']:'';const _0x389a4a=await this['getStateAsync'](_0x622b07(0x245));_0x55727f=_0x389a4a?_0x389a4a[_0x622b07(0x20f)]:'';const _0x45fa86=await this[_0x622b07(0x258)](_0x622b07(0x24e));_0x44adce=_0x45fa86?_0x45fa86['val']:'';}}catch(_0x13a897){}const _0x31b2a2=await this[_0x622b07(0x1f5)](),_0x5bbb17=(this[_0x622b07(0x205)]['devices']||[])[_0x622b07(0x1ad)](_0x8ccd56=>_0x8ccd56[_0x622b07(0x263)]),_0x25aae6=_0x31b2a2&&_0x5bbb17;let _0x39aa11='';try{const _0x2503a0=await this['getStateAsync'](_0x622b07(0x286));if(_0x2503a0&&_0x2503a0[_0x622b07(0x20f)])_0x39aa11=_0x2503a0['val'];}catch(_0x1576d4){}this[_0x622b07(0x28d)](_0x660238[_0x622b07(0x24d)],_0x660238['command'],{'success':!![],'eventHistory':this['eventHistory']['slice'](0x0,0x7d0),'stats':{'digestCount':_0xec6bfb,'isPresent':this[_0x622b07(0x19d)],'hourlyActivity':_0x203419,'hourlyDetails':_0x46376d,'yesterdayActivity':_0x301664,'solarActive':_0x25aae6,'presenceWho':_0x39aa11,'roomStats':_0x2b114d,'activityTrend':_0x5e1dd7,'modules':this['activeModules']},'automation':{'detected':_0xf5144b,'description':_0x1d713b,'targetId':_0x55727f,'targetValue':_0x44adce}},_0x660238[_0x622b07(0x282)]);}else{if(_0x660238[_0x622b07(0x1f2)]==='checkThermostats')try{const _0x5d6ed7=await automation[_0x622b07(0x26c)](this);this[_0x622b07(0x28d)](_0x660238['from'],_0x660238[_0x622b07(0x1f2)],{'success':!![],'results':_0x5d6ed7},_0x660238['callback']);}catch(_0x105477){this['sendTo'](_0x660238[_0x622b07(0x24d)],_0x660238[_0x622b07(0x1f2)],{'success':![],'error':_0x105477[_0x622b07(0x1a0)]},_0x660238[_0x622b07(0x282)]);}else{if(_0x660238[_0x622b07(0x1f2)]==='scanDevices')try{const _0x21ddf2=await scanner['scanForDevices'](this,_0x660238[_0x622b07(0x1a0)]||{});this['sendTo'](_0x660238[_0x622b07(0x24d)],_0x660238[_0x622b07(0x1f2)],{'success':!![],'devices':_0x21ddf2},_0x660238['callback']);}catch(_0x4cf9d8){}else{if(_0x660238['command']===_0x622b07(0x283)){const _0x7227e6=await this['getForeignObjectsAsync']('enum.functions.*','enum'),_0x8dd81a=[];if(_0x7227e6)for(const _0x453461 in _0x7227e6){_0x8dd81a['push']({'id':_0x453461,'name':_0x7227e6[_0x453461][_0x622b07(0x20e)][_0x622b07(0x1a9)]});}const _0x1197e4=await this[_0x622b07(0x1c2)]('enum.rooms.*','enum'),_0x1177f2=[];if(_0x1197e4)for(const _0x1c8b23 in _0x1197e4){_0x1177f2['push'](_0x1197e4[_0x1c8b23][_0x622b07(0x20e)][_0x622b07(0x1a9)]||_0x1c8b23[_0x622b07(0x228)]('.')[_0x622b07(0x29f)]());}this[_0x622b07(0x28d)](_0x660238[_0x622b07(0x24d)],_0x660238['command'],{'success':!![],'enums':_0x8dd81a,'rooms':_0x1177f2},_0x660238[_0x622b07(0x282)]);}}}}}}}[a0_0x1c4c7a(0x2a3)](){const _0x3e1716=a0_0x1c4c7a;if(!this[_0x3e1716(0x255)][_0x3e1716(0x279)])return;this['log'][_0x3e1716(0x265)]('ðŸ\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...');try{const _0x42bf19=this[_0x3e1716(0x25e)]||[];pythonBridge[_0x3e1716(0x249)](this,'CALCULATE_HEALTH_TREND',{'events':_0x42bf19});}catch(_0x350806){this[_0x3e1716(0x276)]['warn'](_0x3e1716(0x1c9));}}async['onStateChange'](_0x311855,_0x393eb4){const _0x14eb27=a0_0x1c4c7a;if(!_0x393eb4||this[_0x14eb27(0x251)])return;if(_0x311855[_0x14eb27(0x22b)](_0x14eb27(0x262))&&_0x311855[_0x14eb27(0x1d8)](_0x14eb27(0x223))&&_0x393eb4['val'])return;if(this['config']['infrasoundEnabled']&&_0x311855===this[_0x14eb27(0x205)][_0x14eb27(0x1f9)]&&this[_0x14eb27(0x255)][_0x14eb27(0x2aa)]){this[_0x14eb27(0x26a)](_0x393eb4['val']);return;}if(_0x393eb4[_0x14eb27(0x2ad)]&&_0x311855['endsWith'](_0x14eb27(0x1d3)))return;if(_0x311855===this['namespace']+_0x14eb27(0x239)){if(_0x393eb4[_0x14eb27(0x20f)]&&Object['values'](setup[_0x14eb27(0x2a6)])[_0x14eb27(0x22b)](_0x393eb4[_0x14eb27(0x20f)])){this['currentSystemMode']=_0x393eb4['val'];if(_0x393eb4[_0x14eb27(0x20f)]===setup[_0x14eb27(0x2a6)][_0x14eb27(0x297)])await recorder[_0x14eb27(0x1f4)](this,![]);else await recorder[_0x14eb27(0x1f4)](this,!![]);if(this[_0x14eb27(0x21b)]){let _0x5b0e71=![],_0x4d3c3c=0x0,_0x31b2a9=_0x14eb27(0x211);if(this[_0x14eb27(0x1be)]===_0x14eb27(0x1d9))_0x5b0e71=!![],_0x4d3c3c=0x168,_0x31b2a9=_0x14eb27(0x1fa);else this[_0x14eb27(0x1be)]===_0x14eb27(0x2b3)&&(_0x5b0e71=!![],_0x4d3c3c=0x5a0,_0x31b2a9='Guest\x20Mode');pythonBridge[_0x14eb27(0x249)](this,_0x14eb27(0x26b),{'active':_0x5b0e71,'duration':_0x4d3c3c,'label':_0x31b2a9}),await this[_0x14eb27(0x236)](_0x14eb27(0x209),{'val':JSON['stringify']({'active':_0x5b0e71,'label':_0x31b2a9,'timestamp':Date[_0x14eb27(0x252)]()}),'ack':!![]});}}if(!_0x393eb4[_0x14eb27(0x2ad)])this[_0x14eb27(0x222)](_0x311855,{'val':this['currentSystemMode'],'ack':!![]});return;}if(_0x311855['endsWith']('analysis.energy.warmupSources')&&_0x393eb4['ack'])this[_0x14eb27(0x23d)](_0x393eb4[_0x14eb27(0x20f)]);if(_0x311855['endsWith'](_0x14eb27(0x1dc))&&_0x393eb4['ack']&&this[_0x14eb27(0x255)][_0x14eb27(0x1c7)])automation['checkCalendarTriggers'](this);if(!_0x393eb4['ack']){if(_0x311855[_0x14eb27(0x22b)](_0x14eb27(0x1a6))&&_0x393eb4[_0x14eb27(0x20f)]){this[_0x14eb27(0x222)](_0x311855,{'val':![],'ack':!![]}),aiAgent[_0x14eb27(0x1d2)](this);return;}if(_0x311855['includes']('triggerDailyDigest')&&_0x393eb4[_0x14eb27(0x20f)]){this['setState'](_0x311855,{'val':![],'ack':!![]});if(this[_0x14eb27(0x21b)])aiAgent[_0x14eb27(0x27f)](this,pythonBridge);return;}if(_0x311855[_0x14eb27(0x22b)](_0x14eb27(0x246))&&_0x393eb4['val']){this[_0x14eb27(0x222)](_0x311855,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this);return;}if(_0x311855[_0x14eb27(0x22b)](_0x14eb27(0x1c1))&&_0x393eb4[_0x14eb27(0x20f)]){this['setState'](_0x311855,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this);return;}if(_0x311855[_0x14eb27(0x22b)](_0x14eb27(0x1ed))&&_0x393eb4[_0x14eb27(0x20f)]){this[_0x14eb27(0x222)](_0x311855,{'val':![],'ack':!![]});if(this[_0x14eb27(0x21b)])try{const _0x15e9d5=await this['getStateAsync'](_0x14eb27(0x288));if(_0x15e9d5&&_0x15e9d5['val']){const _0x2c8a8b=JSON[_0x14eb27(0x1a4)](_0x15e9d5[_0x14eb27(0x20f)]);this[_0x14eb27(0x236)](_0x14eb27(0x295),{'val':_0x14eb27(0x1fe),'ack':!![]}),pythonBridge['send'](this,_0x14eb27(0x2a1),{'sequences':_0x2c8a8b});}}catch(_0x27e800){}return;}if(_0x311855[_0x14eb27(0x22b)](_0x14eb27(0x1b3))&&_0x393eb4['val']){this['setState'](_0x311855,{'val':![],'ack':!![]});if(this[_0x14eb27(0x21b)])try{this['runPythonHealthCheck']();const _0x49d258=await this['getStateAsync']('LTM.dailyDigests');if(_0x49d258&&_0x49d258['val'])pythonBridge[_0x14eb27(0x249)](this,_0x14eb27(0x1bb),{'digests':JSON[_0x14eb27(0x1a4)](_0x49d258['val'])});aiAgent[_0x14eb27(0x240)](this,_0x14eb27(0x28b)),setTimeout(()=>aiAgent[_0x14eb27(0x240)](this,'DAY'),0x2ee0);}catch(_0x49fff6){}return;}if(_0x311855[_0x14eb27(0x22b)](_0x14eb27(0x260))&&_0x393eb4[_0x14eb27(0x20f)]){this['setState'](_0x311855,{'val':![],'ack':!![]});if(this[_0x14eb27(0x21b)])try{const _0x4ffd46=await this['getStateAsync'](_0x14eb27(0x28a));if(_0x4ffd46&&_0x4ffd46[_0x14eb27(0x20f)])pythonBridge[_0x14eb27(0x249)](this,_0x14eb27(0x259),{'points':JSON[_0x14eb27(0x1a4)](_0x4ffd46['val'])});}catch(_0x29e6f6){}return;}if(_0x311855['includes'](_0x14eb27(0x248))&&_0x393eb4[_0x14eb27(0x20f)]){this['setState'](_0x311855,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x3d610f=await this[_0x14eb27(0x258)]('LTM.rawEventLog');if(_0x3d610f&&_0x3d610f['val']){const _0x29b36c={};if(this[_0x14eb27(0x205)][_0x14eb27(0x2af)])this['config'][_0x14eb27(0x2af)][_0x14eb27(0x1cc)](_0x498478=>{const _0x519381=_0x14eb27;if(_0x498478['id']&&_0x498478[_0x519381(0x27b)])_0x29b36c[_0x498478['id']]=_0x498478[_0x519381(0x27b)];});pythonBridge[_0x14eb27(0x249)](this,_0x14eb27(0x202),{'events':JSON[_0x14eb27(0x1a4)](_0x3d610f[_0x14eb27(0x20f)]),'deviceMap':_0x29b36c});}}catch(_0x384ee1){}return;}if(_0x311855['includes'](_0x14eb27(0x289))&&_0x393eb4[_0x14eb27(0x20f)]){this['setState'](_0x311855,{'val':![],'ack':!![]}),topology[_0x14eb27(0x1b4)](this);if(this['isProVersion'])try{const _0x163dd9=await this[_0x14eb27(0x258)](_0x14eb27(0x288));if(_0x163dd9&&_0x163dd9['val'])pythonBridge['send'](this,_0x14eb27(0x1c4),{'sequences':JSON[_0x14eb27(0x1a4)](_0x163dd9['val'])});}catch(_0xd88390){}return;}}const _0x48a5da=(this[_0x14eb27(0x205)][_0x14eb27(0x2af)]||[])[_0x14eb27(0x226)](_0x5932c8=>_0x5932c8['id']===_0x311855);if(_0x48a5da){const _0xafba1f=await recorder[_0x14eb27(0x20b)](this,_0x311855,_0x393eb4,_0x48a5da);_0xafba1f&&this['setState'](_0x14eb27(0x1b9),{'val':Date[_0x14eb27(0x252)](),'ack':!![]});_0xafba1f&&_0xafba1f['type']===_0x14eb27(0x212)&&_0xafba1f[_0x14eb27(0x22e)]&&this[_0x14eb27(0x21b)]&&deadMan['updateLocation'](this,_0xafba1f['location']);_0x393eb4[_0x14eb27(0x20f)]&&(_0x393eb4[_0x14eb27(0x20f)]===!![]||_0x393eb4[_0x14eb27(0x20f)]===0x1||String(_0x393eb4['val'])[_0x14eb27(0x206)]()===_0x14eb27(0x278))&&(_0x48a5da[_0x14eb27(0x27b)]&&(_0x48a5da[_0x14eb27(0x27b)][_0x14eb27(0x22b)](_0x14eb27(0x294))||_0x48a5da[_0x14eb27(0x27b)][_0x14eb27(0x22b)](_0x14eb27(0x2a5)))&&this[_0x14eb27(0x2ae)](_0x48a5da));if(_0x48a5da['type']==='temperature'||_0x48a5da['type']===_0x14eb27(0x2a0)){if(this[_0x14eb27(0x255)]['energy'])automation['cleanupGhostInterventions'](this);}}}async[a0_0x1c4c7a(0x23d)](_0x358b63){const _0x4abd30=a0_0x1c4c7a;if(!this[_0x4abd30(0x23e)]||Date['now']()-this['bootTime']>0x493e0)return;try{const _0x359ea3=JSON['parse'](_0x358b63),_0x2eaa25=this[_0x4abd30(0x23e)][_0x4abd30(0x250)];let _0x42aa41=![];for(const _0x45d94e in _0x2eaa25){if(_0x2eaa25[_0x45d94e][_0x4abd30(0x22b)]('AI')&&_0x359ea3[_0x45d94e]&&!_0x359ea3[_0x45d94e][_0x4abd30(0x22b)]('AI')){_0x42aa41=!![];break;}}_0x42aa41&&(await this[_0x4abd30(0x236)](_0x4abd30(0x1dc),{'val':JSON[_0x4abd30(0x1cb)](this[_0x4abd30(0x23e)]['times']),'ack':!![]}),await this[_0x4abd30(0x236)](_0x4abd30(0x234),{'val':JSON['stringify'](this[_0x4abd30(0x23e)][_0x4abd30(0x250)]),'ack':!![]}));}catch(_0x2b5f39){}}async[a0_0x1c4c7a(0x22c)](){const _0x5488a5=a0_0x1c4c7a;try{const _0x3cff90=await this[_0x5488a5(0x258)](setup[_0x5488a5(0x1b0)]);if(_0x3cff90&&_0x3cff90['val'])this['currentSystemMode']=_0x3cff90['val'];}catch(_0x449ff1){this[_0x5488a5(0x1be)]=setup['SYSTEM_MODES'][_0x5488a5(0x25d)];}}async[a0_0x1c4c7a(0x1e3)](){return![];}async[a0_0x1c4c7a(0x24f)](){const _0x163f1f=a0_0x1c4c7a;await aiAgent['runGeminiAnalysis'](this);this['activeModules'][_0x163f1f(0x279)]&&(this['updateHealthVector'](),this[_0x163f1f(0x241)]());if(this[_0x163f1f(0x255)]['energy'])this[_0x163f1f(0x1e1)]();}async[a0_0x1c4c7a(0x1f5)](){return![];}[a0_0x1c4c7a(0x241)](){const _0xfee3f6=a0_0x1c4c7a;if(!this[_0xfee3f6(0x21b)])return;}async['triggerEnergyPrediction'](){}[a0_0x1c4c7a(0x24b)](){}async[a0_0x1c4c7a(0x26a)](_0x590b13){}async[a0_0x1c4c7a(0x272)](_0xff9fce,_0x2e0d9a){}async[a0_0x1c4c7a(0x2ae)](_0x58491d){}async[a0_0x1c4c7a(0x2b0)](_0x27a82a){}['sendNotification'](_0x407c80){}}if(require[a0_0x1c4c7a(0x1ea)]!==module)module['exports']=_0x4c5f6f=>new CogniLiving(_0x4c5f6f);else new CogniLiving();