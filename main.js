function a0_0x1292(){const _0x4067d3=['analysis.energy.rlPenalties','join','Nuukanni\x20Security','slice','onUnload','getOutsideTemperatureNumeric','pop','enum.rooms.*','split','./lib/installer','scanDevices','driftAnalysisTimer','sensorLastValues','forecast.current.weather','\x20hPa\x20(Threshold:\x20','weatherunderground.0','.system.mode','ack','runPythonHealthCheck','models/gemini-flash-latest','presenceDevices','analysis.training.triggerTopology','getTime','LTM.dailyDigests','General\x20Activity\x20Trend\x20(%)','handleInfrasound','system.mode','3523655VLYVGx','info','filter','accuweather.0','./lib/dead_man','healthTrendInterval','key','[Calibration]\x20Window\x20','appendToLog','NORMAL','config','entries','response','{\x22default\x22:\x2021}','VACATION','resetRLPenalty','./lib/python_bridge','createDailyDigest','analysisInterval','apiKey','[Forensics]\x20Infrasound\x20Event\x20correlated:\x20','updateTopologyMatrix','updateTopology','analysis.security.learningStatus','minDaysForBaseline','window','setPresence','TRACK_EVENT','analysis.energy.insulationScore','getGenerativeModel','magnet','onStateChange','includes','genAI','@google/generative-ai','memoryCache','bootTime','devices','length','setState','isSolar','geminiModel','analysis.automation.description','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','isGracePeriodActive','Reinforcement\x20Learning\x20Penalties','(((.+)+)+)+$','state','LTM.baselineStatus','sensor.window','LTM.trainingData.thermodynamics','ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20','Test','analysis.security.infrasoundLog','getState','abs','Guest\x20Mode',')\x20-\x20Phase\x20D\x20(Forensic\x20Calibration)','LTM.rawEventLog','type','getEnums','SYSTEM_MODES','some','cancel','TRAIN_SECURITY','ALARM','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','SET_TOPOLOGY','activityLevel','generateContent','Aktiv\x20(','Party\x20Mode','sendMorningBriefing','geminiApiKey','LTM.triggerDailyDigest','\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).','trackerHeartbeat','TRAIN_COMFORT','common','abortExitTimer','analysis.energy.warmupTargets','system.adapter.','\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.','getHours','getForeignObjectAsync','exitTimer','getForeignStateAsync','analysis.health.gaitSensors','Heizung\x20kann\x20','sources','exports','callback','heiter','sensor.door','Notification\x20Test\x20Failed:\x20','send','scores','setupLtmScheduler','calendarInstance','ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).','eventHistory','scanThermostats','startSystem','dailyDigests','modeResetJob','location','Active\x20Calendar\x20Enforcements\x20(Locks)','communicate.request','analysis.energy.ventilationAlerts','executeAutomationAction','door','application/json','minutes_safe','triggerGaitAnalysis','_calName','ltmJob','runGeminiAnalysis','pressureBuffer','bind','triggerEnergyPrediction','analyzeWindowOpening','11679561NyyGlb','52188730PphnLi','Key\x20not\x20found\x20or\x20not\x20provided','cogni-living\x20adapter\x20starting\x20(v','onMessage','keys','licenseKey','name','error','log','LTM.trainingData.sequences','notifyTelegramInstance','object','instance','setupBriefingScheduler','getForeignObjectsAsync','\x20hPa.\x20Einbruch\x20wahrscheinlich.','now','TRAIN_ENERGY','stringify','cleanupGhostInterventions','ANALYZE_TREND','timestamp','analysis.training.status','notifyPushoverEnabled','times','search','./lib/ai_agent','3401951GghZni','updateHealthVector','analysis.training.triggerSecurity','clear','Gemini\x20AI\x20initialized.','manual','values','toLowerCase','dependencyInstallInProgress','setStateAsync','ANOMALY\x20(Real\x20Threat?)','sendNotification','\x20opened.\x20Peak\x20Pressure:\x20','parse','party','setupModeResetScheduler','analysis.automation.targetValue','json','testNotification','matrix','Adapter','36hEOUqA','briefingJob','isArray','protectAiMemory','forEach','from','Activity-Level','checkLicense','checkCalendarTriggers','runBaselineDriftAnalysis','isProVersion','startService','number','stopService','triggerBriefing','string','runAutopilot','useWeather','security.alarm_triggered','getStateAsync','triggerDailyDigest','PYTHON_EXE','getCalendarNames','add','./lib/recorder','setHours','message','\x20Tage)','Active\x20Ventilation\x20Alerts','analysisTimer','map','notifyPushoverInstance','klar','Kein\x20Wetter-Adapter','TRAIN_HEALTH','analysis.training.triggerHealth','calendarName','subscribeForeignStates','./lib/scheduler','exitGraceTimer','fill','Daten\x20nicht\x20verfÃ¼gbar','cogni-living','unload','inactivityThresholdHours','val','guest','systemConfig','analysis.health.todayVector','infrasoundSensorId','toString','loadSystemMode','ready','[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20','Fenster\x20geÃ¶ffnet:\x20','subscribeForeignStatesAsync','infrasoundThreshold','analysis.automation.targetId','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','setObjectNotExistsAsync','sonn','command','analysis.automation.patternDetected','subscribeStates','initSystemConfig','Kein\x20Kalender-Adapter','triggerInfrasoundCorrelation','Keine\x20Sensor-AktivitÃ¤t','ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20','sunny','7tQOXHO','SET_LEARNING_MODE','telegram','ANALYZE_GAIT','analysis.training.triggerEnergy','createAllObjects','analysis.automation.triggerAction','analysis.automation.autoApply','analysis.training.triggerComfort','analysis.energy.warmupSources','sendTo','analysisHistory','6wQhOEU','daswetter.0','floor','MATCH\x20(False\x20Positive)','SYSTEM_DP_MODE','./lib/scanner','./lib/automation','getOverviewData','dismissAutomation','enum','Lernphase\x20(','analysis.energy.activeEnforcements','./lib/topology','infrasoundEnabled','initHistory','push','PREDICT_ENERGY','trackerEnabled','NextHours.Location_1.Day_1.current.symbol_desc','Gemini\x20Init\x20Error:\x20','text','Gesendet','value','analysis.trigger','getMinutes','unshift','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','Current.WeatherText','[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20','7713872stRGnR','system.presenceWho','.communicate.request','OPTIMIZE_ENERGY','â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...','checkSolarCondition','reed','find','testContext','388224mTmCOP','rawEventLog','notifyTelegramEnabled','apply','temperature','stateChange','infrasoundLocked','role','currentSystemMode','analysis.energy.warmupTimes','sort','Sec-Training\x20started...','monitorEnforcements','endsWith','warn','218204BBDfKV','Warm-Up\x20Target\x20Temps\x20(JSON)','onReady'];a0_0x1292=function(){return _0x4067d3;};return a0_0x1292();}const a0_0x56b33f=a0_0x19d9;(function(_0x9e24e9,_0x18a757){const _0x42f7c8=a0_0x19d9,_0x5034bd=_0x9e24e9();while(!![]){try{const _0x103432=parseInt(_0x42f7c8(0x124))/0x1*(-parseInt(_0x42f7c8(0x165))/0x2)+parseInt(_0x42f7c8(0x156))/0x3*(-parseInt(_0x42f7c8(0xde))/0x4)+parseInt(_0x42f7c8(0x183))/0x5*(-parseInt(_0x42f7c8(0x130))/0x6)+parseInt(_0x42f7c8(0xc9))/0x7+-parseInt(_0x42f7c8(0x14d))/0x8+-parseInt(_0x42f7c8(0xad))/0x9+parseInt(_0x42f7c8(0xae))/0xa;if(_0x103432===_0x18a757)break;else _0x5034bd['push'](_0x5034bd['shift']());}catch(_0x43a617){_0x5034bd['push'](_0x5034bd['shift']());}}}(a0_0x1292,0xc5b3a));function a0_0x19d9(_0x2180ab,_0x2a85dd){const _0x2daf39=a0_0x1292();return a0_0x19d9=function(_0x2badd2,_0x374fde){_0x2badd2=_0x2badd2-0x98;let _0x129259=_0x2daf39[_0x2badd2];return _0x129259;},a0_0x19d9(_0x2180ab,_0x2a85dd);}const a0_0x374fde=(function(){let _0x1cb628=!![];return function(_0x14577f,_0x361f95){const _0x2e1f08=_0x1cb628?function(){const _0x29257d=a0_0x19d9;if(_0x361f95){const _0x5e077d=_0x361f95[_0x29257d(0x159)](_0x14577f,arguments);return _0x361f95=null,_0x5e077d;}}:function(){};return _0x1cb628=![],_0x2e1f08;};}()),a0_0x2badd2=a0_0x374fde(this,function(){const _0x201b50=a0_0x19d9;return a0_0x2badd2[_0x201b50(0x110)]()[_0x201b50(0xc7)](_0x201b50(0x1b1))[_0x201b50(0x110)]()['constructor'](a0_0x2badd2)[_0x201b50(0xc7)]('(((.+)+)+)+$');});a0_0x2badd2();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x56b33f(0x1a5)),installer=require(a0_0x56b33f(0x171)),scanner=require(a0_0x56b33f(0x135)),schedulers=require(a0_0x56b33f(0x104)),topology=require(a0_0x56b33f(0x13c)),setup=require('./lib/setup'),recorder=require(a0_0x56b33f(0xf6)),pythonBridge=require(a0_0x56b33f(0x193)),aiAgent=require(a0_0x56b33f(0xc8)),deadMan=require(a0_0x56b33f(0x187)),automation=require(a0_0x56b33f(0x136)),GEMINI_MODEL=a0_0x56b33f(0x17b),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x56b33f(0xdd)]{constructor(_0x5a20a0){const _0x3b1f2a=a0_0x56b33f;super({..._0x5a20a0,'name':_0x3b1f2a(0x108)}),this['eventHistory']=[],this[_0x3b1f2a(0x12f)]=[],this[_0x3b1f2a(0x157)]=[],this[_0x3b1f2a(0x9b)]=[],this['sensorLastValues']={},this[_0x3b1f2a(0x10d)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this['exitTimer']=null,this[_0x3b1f2a(0x105)]=null,this[_0x3b1f2a(0x1af)]=![],this[_0x3b1f2a(0x1a4)]=null,this[_0x3b1f2a(0x1ac)]=null,this[_0x3b1f2a(0x15e)]=setup['SYSTEM_MODES'][_0x3b1f2a(0x18c)],this[_0x3b1f2a(0xe8)]=![],this['lastAlertState']=![],this[_0x3b1f2a(0xfb)]=null,this[_0x3b1f2a(0xa7)]=null,this['modeResetJob']=null,this[_0x3b1f2a(0x173)]=null,this[_0x3b1f2a(0xdf)]=null,this[_0x3b1f2a(0x1cf)]=null,this[_0x3b1f2a(0x188)]=null,this['dependencyInstallInProgress']=![],this['lastTrackerEventTime']=Date['now'](),this['memoryCache']=null,this[_0x3b1f2a(0x1a7)]=Date[_0x3b1f2a(0xbe)](),this[_0x3b1f2a(0x15c)]=![],this[_0x3b1f2a(0xa9)]=[],this['on'](_0x3b1f2a(0x112),this[_0x3b1f2a(0x167)][_0x3b1f2a(0xaa)](this)),this['on'](_0x3b1f2a(0x15b),this['onStateChange']['bind'](this)),this['on'](_0x3b1f2a(0x109),this['onUnload'][_0x3b1f2a(0xaa)](this)),this['on']('message',this[_0x3b1f2a(0xb1)][_0x3b1f2a(0xaa)](this));}async[a0_0x56b33f(0x167)](){const _0x117831=a0_0x56b33f;this[_0x117831(0xb6)]['info'](_0x117831(0xb0)+this['version']+_0x117831(0x1bc));if(!installer['checkAndInstall'](this,()=>this[_0x117831(0x9a)]()))return;}async[a0_0x56b33f(0x9a)](){const _0x3d535b=a0_0x56b33f;await setup['initZombies'](this);try{this[_0x3d535b(0xe8)]=await setup[_0x3d535b(0xe5)](this[_0x3d535b(0x18d)][_0x3d535b(0xb3)]);}catch(_0x1b9d40){}if(!this[_0x3d535b(0x18d)][_0x3d535b(0x10a)]||this[_0x3d535b(0x18d)][_0x3d535b(0x10a)]<0.1)this[_0x3d535b(0x18d)][_0x3d535b(0x10a)]=0xc;await setup[_0x3d535b(0x13e)](this),await setup[_0x3d535b(0x11e)](this);try{const _0x50ed92=await this[_0x3d535b(0xf1)]('analysis.energy.warmupTimes'),_0x12da14=await this[_0x3d535b(0xf1)](_0x3d535b(0x12d));_0x50ed92&&_0x50ed92[_0x3d535b(0x10b)]&&_0x12da14&&_0x12da14[_0x3d535b(0x10b)]&&(Date[_0x3d535b(0xbe)]()-_0x50ed92['ts']<0x4*0xe10*0x3e8&&(this[_0x3d535b(0x1a6)]={'times':JSON[_0x3d535b(0xd6)](_0x50ed92['val']),'sources':JSON[_0x3d535b(0xd6)](_0x12da14['val'])},this['log'][_0x3d535b(0x184)](_0x3d535b(0x1b6)+Object[_0x3d535b(0xb2)](this['memoryCache'][_0x3d535b(0xc6)])[_0x3d535b(0x1a9)]+_0x3d535b(0x1ce))));}catch(_0x1389b5){this[_0x3d535b(0xb6)][_0x3d535b(0x164)]('Memory\x20Hydration\x20Failed:\x20'+_0x1389b5['message']);}if(this[_0x3d535b(0x18d)][_0x3d535b(0x1cc)])try{this[_0x3d535b(0x1a4)]=new GoogleGenerativeAI(this['config'][_0x3d535b(0x1cc)]),this[_0x3d535b(0x1ac)]=this[_0x3d535b(0x1a4)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x3d535b(0xa3)}}),this[_0x3d535b(0xb6)]['info'](_0x3d535b(0xcd));}catch(_0x14eec7){this[_0x3d535b(0xb6)][_0x3d535b(0xb5)](_0x3d535b(0x143)+_0x14eec7[_0x3d535b(0xf8)]);}await setup[_0x3d535b(0x129)](this),await this[_0x3d535b(0x111)](),await this[_0x3d535b(0x119)]('analysis.energy.pinnForecast',{'type':_0x3d535b(0x1b2),'common':{'name':'PINN\x20AI\x20Forecast','type':_0x3d535b(0xed),'role':_0x3d535b(0xda),'read':!![],'write':![]},'native':{}}),await this[_0x3d535b(0x119)](_0x3d535b(0xa0),{'type':_0x3d535b(0x1b2),'common':{'name':_0x3d535b(0xfa),'type':_0x3d535b(0xed),'role':_0x3d535b(0xda),'read':!![],'write':![]},'native':{}}),await this[_0x3d535b(0x119)]('analysis.energy.warmupTimes',{'type':_0x3d535b(0x1b2),'common':{'name':_0x3d535b(0x1ae),'type':_0x3d535b(0xed),'role':_0x3d535b(0xda),'read':!![],'write':![]},'native':{}}),await this[_0x3d535b(0x119)](_0x3d535b(0x1d3),{'type':_0x3d535b(0x1b2),'common':{'name':_0x3d535b(0x166),'type':_0x3d535b(0xed),'role':'json','read':!![],'write':!![],'def':_0x3d535b(0x190)},'native':{}}),await this[_0x3d535b(0x119)](_0x3d535b(0x168),{'type':'state','common':{'name':_0x3d535b(0x1b0),'type':'string','role':'json','read':!![],'write':![],'def':'{}'},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.activityTrend',{'type':_0x3d535b(0x1b2),'common':{'name':_0x3d535b(0x180),'type':_0x3d535b(0xea),'role':_0x3d535b(0x146),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x3d535b(0x119)](_0x3d535b(0x1da),{'type':_0x3d535b(0x1b2),'common':{'name':'Sensors\x20used\x20for\x20Gait\x20Analysis','type':'string','role':_0x3d535b(0x144),'read':!![],'write':![]},'native':{}}),await this[_0x3d535b(0x119)](_0x3d535b(0x13b),{'type':_0x3d535b(0x1b2),'common':{'name':_0x3d535b(0x9e),'type':_0x3d535b(0xed),'role':_0x3d535b(0xda),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0x3d535b(0x1b8),{'type':_0x3d535b(0x1b2),'common':{'name':'Forensic\x20Infrasound\x20Log','type':_0x3d535b(0xed),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x3d535b(0x119)]('analysis.health.gaitDebug',{'type':_0x3d535b(0x1b2),'common':{'name':'Gait\x20Speed\x20Calculation\x20Proof','type':_0x3d535b(0xed),'role':'text','read':!![],'write':![]},'native':{}});try{const _0x272edb=await this[_0x3d535b(0xf1)](_0x3d535b(0x1bd));if(_0x272edb&&_0x272edb[_0x3d535b(0x10b)])this[_0x3d535b(0x157)]=JSON['parse'](_0x272edb[_0x3d535b(0x10b)]);}catch(_0x32007a){this[_0x3d535b(0x157)]=[];}try{const _0x56517c=await this[_0x3d535b(0xf1)](_0x3d535b(0x17f));if(_0x56517c&&_0x56517c['val'])this['dailyDigests']=JSON[_0x3d535b(0xd6)](_0x56517c['val']);}catch(_0x145cd6){this[_0x3d535b(0x9b)]=[];}const _0x2f72d0=this['dailyDigests'][_0x3d535b(0x1a9)]>=(this[_0x3d535b(0x18d)][_0x3d535b(0x19b)]||0x7)?_0x3d535b(0x1c9)+this[_0x3d535b(0x9b)]['length']+_0x3d535b(0xf9):_0x3d535b(0x13a)+this['dailyDigests']['length']+'/'+(this[_0x3d535b(0x18d)][_0x3d535b(0x19b)]||0x7)+')';await this[_0x3d535b(0xd2)](_0x3d535b(0x1b3),{'val':_0x2f72d0,'ack':!![]}),this[_0x3d535b(0x11d)](_0x3d535b(0x147)),this['subscribeStates'](_0x3d535b(0x1cd)),this['subscribeStates'](_0x3d535b(0x182)),this[_0x3d535b(0x11d)]('analysis.triggerBriefing'),this[_0x3d535b(0x11d)](_0x3d535b(0x12a)),this[_0x3d535b(0x11d)](_0x3d535b(0x12b)),this[_0x3d535b(0x11d)](_0x3d535b(0xcb)),this[_0x3d535b(0x11d)](_0x3d535b(0x101)),this[_0x3d535b(0x11d)](_0x3d535b(0x128)),this[_0x3d535b(0x11d)]('analysis.training.triggerComfort'),this[_0x3d535b(0x11d)](_0x3d535b(0x17d)),this[_0x3d535b(0x11d)]('analysis.energy.mpcActive'),this[_0x3d535b(0x11d)]('analysis.energy.warmupSources');this[_0x3d535b(0x18d)][_0x3d535b(0x13d)]&&this[_0x3d535b(0x18d)]['infrasoundSensorId']&&(this[_0x3d535b(0xb6)]['info'](_0x3d535b(0x113)+this[_0x3d535b(0x18d)][_0x3d535b(0x10f)]),this[_0x3d535b(0x103)](this['config'][_0x3d535b(0x10f)]));const _0x388932=this[_0x3d535b(0x18d)][_0x3d535b(0x1a8)];if(_0x388932)for(const _0x14f9bf of _0x388932){await this['subscribeForeignStatesAsync'](_0x14f9bf['id']);}const _0x1480b5=this[_0x3d535b(0x18d)][_0x3d535b(0x17c)];if(_0x1480b5)for(const _0x2d2582 of _0x1480b5){await this[_0x3d535b(0x115)](_0x2d2582);}if(this[_0x3d535b(0x18d)][_0x3d535b(0x158)]&&this['config'][_0x3d535b(0xb8)])await this[_0x3d535b(0x115)](this[_0x3d535b(0x18d)][_0x3d535b(0xb8)]+_0x3d535b(0x14f));setTimeout(()=>this['checkWifiPresence'](),0x1388);if(this[_0x3d535b(0xfb)])clearInterval(this[_0x3d535b(0xfb)]);const _0x44f0cc=this[_0x3d535b(0x18d)][_0x3d535b(0x195)]||0xf;_0x44f0cc>0x0&&(this['analysisTimer']=setInterval(()=>{const _0x17ec70=_0x3d535b;this['runAutopilot'](),automation[_0x17ec70(0xe6)](this),automation[_0x17ec70(0x162)](this);},_0x44f0cc*0x3c*0x3e8));setTimeout(()=>{const _0x4e3e11=_0x3d535b;automation[_0x4e3e11(0xe6)](this),automation[_0x4e3e11(0x162)](this);},0x2710);this['config'][_0x3d535b(0x141)]!==![]&&(this['trackerHeartbeat']=setInterval(()=>{const _0x20d968=_0x3d535b;if(this[_0x20d968(0xe8)]){const _0xd56f9b=Date[_0x20d968(0xbe)](),_0x203c50=this['lastTrackerEventTime']||_0xd56f9b,_0x85a11d=(_0xd56f9b-_0x203c50)/0x3e8;_0x85a11d>0x2&&(this['lastTrackerEventTime']=_0xd56f9b,pythonBridge[_0x20d968(0x1e2)](this,_0x20d968(0x19e),{'room':null,'dt':_0x85a11d}));}},0xbb8));if(this[_0x3d535b(0x188)])clearInterval(this[_0x3d535b(0x188)]);this[_0x3d535b(0x188)]=setInterval(()=>{const _0x1cdac0=_0x3d535b;this[_0x1cdac0(0xe8)]&&(this[_0x1cdac0(0xb6)][_0x1cdac0(0x184)](_0x1cdac0(0x151)),this[_0x1cdac0(0x17a)]());},0x4*0x3c*0x3c*0x3e8),schedulers[_0x3d535b(0x1e4)](this,()=>aiAgent[_0x3d535b(0x194)](this,pythonBridge)),schedulers[_0x3d535b(0xd8)](this),schedulers['setupDriftAnalysisScheduler'](this,()=>aiAgent[_0x3d535b(0xe7)](this)),schedulers[_0x3d535b(0xbb)](this,()=>aiAgent[_0x3d535b(0x1cb)](this)),pythonBridge[_0x3d535b(0xe9)](this,installer[_0x3d535b(0xf3)]),setTimeout(async()=>{const _0x48f909=_0x3d535b;await topology['updateTopology'](this);try{const _0x35c55a=await this[_0x48f909(0xf1)]('analysis.topology.structure');if(_0x35c55a&&_0x35c55a['val'])pythonBridge[_0x48f909(0x1e2)](this,_0x48f909(0x1c6),JSON[_0x48f909(0xd6)](_0x35c55a['val']));}catch(_0x15e88e){}this['runPythonHealthCheck'](),this['triggerGaitAnalysis'](),this[_0x48f909(0xab)](),this[_0x48f909(0xca)]();},0x1388);}[a0_0x56b33f(0x16c)](_0x20112b){const _0x5523ae=a0_0x56b33f;if(this[_0x5523ae(0xfb)])clearInterval(this[_0x5523ae(0xfb)]);if(this[_0x5523ae(0x173)])clearInterval(this[_0x5523ae(0x173)]);if(this[_0x5523ae(0x1cf)])clearInterval(this[_0x5523ae(0x1cf)]);if(this[_0x5523ae(0x188)])clearInterval(this['healthTrendInterval']);if(this['ltmJob'])this[_0x5523ae(0xa7)][_0x5523ae(0x1c2)]();if(this[_0x5523ae(0x9c)])this['modeResetJob']['cancel']();if(this['briefingJob'])this[_0x5523ae(0xdf)][_0x5523ae(0x1c2)]();recorder[_0x5523ae(0x1d2)](this),pythonBridge[_0x5523ae(0xeb)](this),_0x20112b();}async[a0_0x56b33f(0x1a2)](_0x26e815,_0x5f0315){const _0x1ba79b=a0_0x56b33f;if(!_0x5f0315||this[_0x1ba79b(0xd1)])return;if(_0x26e815[_0x1ba79b(0x1a3)](_0x1ba79b(0x126))&&_0x26e815[_0x1ba79b(0x163)](_0x1ba79b(0x9f))&&_0x5f0315[_0x1ba79b(0x10b)])return;if(this[_0x1ba79b(0x18d)][_0x1ba79b(0x13d)]&&_0x26e815===this['config']['infrasoundSensorId']){this[_0x1ba79b(0x181)](_0x5f0315[_0x1ba79b(0x10b)]);return;}if(_0x26e815===this['namespace']+_0x1ba79b(0x178)){if(_0x5f0315[_0x1ba79b(0x10b)]&&Object[_0x1ba79b(0xcf)](setup[_0x1ba79b(0x1c0)])[_0x1ba79b(0x1a3)](_0x5f0315['val'])){this[_0x1ba79b(0x15e)]=_0x5f0315[_0x1ba79b(0x10b)];if(_0x5f0315[_0x1ba79b(0x10b)]===setup[_0x1ba79b(0x1c0)][_0x1ba79b(0x191)])await recorder[_0x1ba79b(0x19d)](this,![]);else await recorder[_0x1ba79b(0x19d)](this,!![]);if(this[_0x1ba79b(0xe8)]){let _0x5a739d=![],_0x2c493c=0x0,_0x4ba439=_0x1ba79b(0xce);if(this[_0x1ba79b(0x15e)]===_0x1ba79b(0xd7))_0x5a739d=!![],_0x2c493c=0x168,_0x4ba439=_0x1ba79b(0x1ca);else this['currentSystemMode']===_0x1ba79b(0x10c)&&(_0x5a739d=!![],_0x2c493c=0x5a0,_0x4ba439=_0x1ba79b(0x1bb));pythonBridge[_0x1ba79b(0x1e2)](this,_0x1ba79b(0x125),{'active':_0x5a739d,'duration':_0x2c493c,'label':_0x4ba439}),await this['setStateAsync'](_0x1ba79b(0x19a),{'val':JSON['stringify']({'active':_0x5a739d,'label':_0x4ba439,'timestamp':Date[_0x1ba79b(0xbe)]()}),'ack':!![]});}}if(!_0x5f0315['ack'])this[_0x1ba79b(0x1aa)](_0x26e815,{'val':this[_0x1ba79b(0x15e)],'ack':!![]});return;}_0x26e815['endsWith'](_0x1ba79b(0x12d))&&_0x5f0315[_0x1ba79b(0x179)]&&this['protectAiMemory'](_0x5f0315[_0x1ba79b(0x10b)]);if(!_0x5f0315[_0x1ba79b(0x179)]){if(_0x26e815['includes'](_0x1ba79b(0x147))&&_0x5f0315['val']){this[_0x1ba79b(0x1aa)](_0x26e815,{'val':![],'ack':!![]}),aiAgent[_0x1ba79b(0xa8)](this);return;}if(_0x26e815[_0x1ba79b(0x1a3)](_0x1ba79b(0xf2))&&_0x5f0315[_0x1ba79b(0x10b)]){this[_0x1ba79b(0x1aa)](_0x26e815,{'val':![],'ack':!![]});if(this[_0x1ba79b(0xe8)])aiAgent['createDailyDigest'](this,pythonBridge);return;}if(_0x26e815[_0x1ba79b(0x1a3)](_0x1ba79b(0xec))&&_0x5f0315[_0x1ba79b(0x10b)]){this['setState'](_0x26e815,{'val':![],'ack':!![]}),aiAgent[_0x1ba79b(0x1cb)](this);return;}if(_0x26e815[_0x1ba79b(0x1a3)]('automation.triggerAction')&&_0x5f0315[_0x1ba79b(0x10b)]){this[_0x1ba79b(0x1aa)](_0x26e815,{'val':![],'ack':!![]}),aiAgent[_0x1ba79b(0xa1)](this);return;}if(_0x26e815[_0x1ba79b(0x1a3)](_0x1ba79b(0xcb))&&_0x5f0315['val']){this[_0x1ba79b(0x1aa)](_0x26e815,{'val':![],'ack':!![]});if(this[_0x1ba79b(0xe8)])try{const _0x4aa8a7=await this[_0x1ba79b(0xf1)](_0x1ba79b(0xb7));if(_0x4aa8a7&&_0x4aa8a7[_0x1ba79b(0x10b)]){const _0x443d56=JSON[_0x1ba79b(0xd6)](_0x4aa8a7['val']);this[_0x1ba79b(0xd2)](_0x1ba79b(0xc4),{'val':_0x1ba79b(0x161),'ack':!![]}),pythonBridge[_0x1ba79b(0x1e2)](this,_0x1ba79b(0x1c3),{'sequences':_0x443d56});}}catch(_0x543420){}return;}if(_0x26e815[_0x1ba79b(0x1a3)](_0x1ba79b(0x101))&&_0x5f0315[_0x1ba79b(0x10b)]){this['setState'](_0x26e815,{'val':![],'ack':!![]});if(this[_0x1ba79b(0xe8)])try{const _0x52024c=await this[_0x1ba79b(0xf1)](_0x1ba79b(0x17f));if(_0x52024c&&_0x52024c[_0x1ba79b(0x10b)])pythonBridge[_0x1ba79b(0x1e2)](this,_0x1ba79b(0x100),{'digests':JSON[_0x1ba79b(0xd6)](_0x52024c[_0x1ba79b(0x10b)])});}catch(_0x2b85df){}return;}if(_0x26e815[_0x1ba79b(0x1a3)](_0x1ba79b(0x128))&&_0x5f0315[_0x1ba79b(0x10b)]){this[_0x1ba79b(0x1aa)](_0x26e815,{'val':![],'ack':!![]});if(this[_0x1ba79b(0xe8)])try{const _0x3bd245=await this[_0x1ba79b(0xf1)](_0x1ba79b(0x1b5));if(_0x3bd245&&_0x3bd245['val'])pythonBridge[_0x1ba79b(0x1e2)](this,_0x1ba79b(0xbf),{'points':JSON['parse'](_0x3bd245[_0x1ba79b(0x10b)])});}catch(_0x54b6a9){}return;}if(_0x26e815[_0x1ba79b(0x1a3)](_0x1ba79b(0x12c))&&_0x5f0315['val']){this['setState'](_0x26e815,{'val':![],'ack':!![]});if(this[_0x1ba79b(0xe8)])try{const _0x16d3a1=await this[_0x1ba79b(0xf1)](_0x1ba79b(0x1bd));if(_0x16d3a1&&_0x16d3a1[_0x1ba79b(0x10b)])pythonBridge[_0x1ba79b(0x1e2)](this,_0x1ba79b(0x1d0),{'events':JSON[_0x1ba79b(0xd6)](_0x16d3a1['val'])});}catch(_0x2dcc26){}return;}if(_0x26e815[_0x1ba79b(0x1a3)](_0x1ba79b(0x17d))&&_0x5f0315[_0x1ba79b(0x10b)]){this[_0x1ba79b(0x1aa)](_0x26e815,{'val':![],'ack':!![]}),topology[_0x1ba79b(0x199)](this);return;}}if(this['config'][_0x1ba79b(0x17c)]&&this[_0x1ba79b(0x18d)][_0x1ba79b(0x17c)][_0x1ba79b(0x1a3)](_0x26e815)){await this['checkWifiPresence']();return;}const _0x3ce596=(this[_0x1ba79b(0x18d)][_0x1ba79b(0x1a8)]||[])[_0x1ba79b(0x154)](_0x3004a3=>_0x3004a3['id']===_0x26e815);if(_0x3ce596){const _0x1d2cc1=await recorder['processSensorEvent'](this,_0x26e815,_0x5f0315,_0x3ce596);_0x1d2cc1&&_0x1d2cc1[_0x1ba79b(0x1be)]==='motion'&&_0x1d2cc1[_0x1ba79b(0x9d)]&&this[_0x1ba79b(0xe8)]&&deadMan['updateLocation'](this,_0x1d2cc1[_0x1ba79b(0x9d)]),_0x5f0315[_0x1ba79b(0x10b)]&&(_0x5f0315[_0x1ba79b(0x10b)]===!![]||_0x5f0315[_0x1ba79b(0x10b)]===0x1||String(_0x5f0315[_0x1ba79b(0x10b)])[_0x1ba79b(0xd0)]()==='open')&&(_0x3ce596['type']&&(_0x3ce596[_0x1ba79b(0x1be)][_0x1ba79b(0x1a3)](_0x1ba79b(0x19c))||_0x3ce596[_0x1ba79b(0x1be)][_0x1ba79b(0x1a3)]('door')||_0x3ce596[_0x1ba79b(0x1be)][_0x1ba79b(0x1a3)](_0x1ba79b(0x1a1)))&&this[_0x1ba79b(0xac)](_0x3ce596)),(_0x3ce596[_0x1ba79b(0x1be)]===_0x1ba79b(0x15a)||_0x3ce596[_0x1ba79b(0x1be)]==='thermostat')&&automation[_0x1ba79b(0xc1)](this);}}async[a0_0x56b33f(0xe1)](_0x1ee503){const _0x29dd4b=a0_0x56b33f;if(!this[_0x29dd4b(0x1a6)]||Date['now']()-this[_0x29dd4b(0x1a7)]>0x493e0)return;if(!this[_0x29dd4b(0x1a6)][_0x29dd4b(0x1dc)]||!this[_0x29dd4b(0x1a6)]['times'])return;try{const _0x16470e=JSON[_0x29dd4b(0xd6)](_0x1ee503),_0x5b7d77=this['memoryCache']['sources'];let _0x4e7684=![];for(const _0x450cec in _0x5b7d77){if(_0x5b7d77[_0x450cec][_0x29dd4b(0x1a3)]('AI')&&_0x16470e[_0x450cec]&&!_0x16470e[_0x450cec][_0x29dd4b(0x1a3)]('AI')){_0x4e7684=!![];break;}}_0x4e7684&&(this[_0x29dd4b(0xb6)][_0x29dd4b(0x184)](_0x29dd4b(0x1e6)),await this[_0x29dd4b(0xd2)](_0x29dd4b(0x15f),{'val':JSON[_0x29dd4b(0xc0)](this[_0x29dd4b(0x1a6)][_0x29dd4b(0xc6)]),'ack':!![]}),await this[_0x29dd4b(0xd2)](_0x29dd4b(0x12d),{'val':JSON[_0x29dd4b(0xc0)](this[_0x29dd4b(0x1a6)][_0x29dd4b(0x1dc)]),'ack':!![]}));}catch(_0xb6a63c){}}async[a0_0x56b33f(0xb1)](_0x575982){const _0x5c0a1d=a0_0x56b33f;if(typeof _0x575982===_0x5c0a1d(0xb9)&&_0x575982[_0x5c0a1d(0xf8)]){if(_0x575982[_0x5c0a1d(0x11b)]==='checkThermostats')try{const _0x56ab46=await automation[_0x5c0a1d(0x99)](this);this[_0x5c0a1d(0x12e)](_0x575982['from'],_0x575982[_0x5c0a1d(0x11b)],{'success':!![],'results':_0x56ab46},_0x575982[_0x5c0a1d(0x1de)]);}catch(_0x3b1092){this[_0x5c0a1d(0x12e)](_0x575982['from'],_0x575982[_0x5c0a1d(0x11b)],{'success':![],'error':_0x3b1092[_0x5c0a1d(0xf8)]},_0x575982[_0x5c0a1d(0x1de)]);}else{if(_0x575982[_0x5c0a1d(0x11b)]==='simulateEnergyMPC')try{const {current_temps:_0x1a47a7,t_out:_0x4a61bb,targets:_0x49af88,t_forecast:_0xc75eaf}=_0x575982[_0x5c0a1d(0xf8)],_0x75287d=[];let _0x782569={};try{const _0x1a14d1=await this[_0x5c0a1d(0xf1)](_0x5c0a1d(0x19f));if(_0x1a14d1&&_0x1a14d1[_0x5c0a1d(0x10b)]){const _0x3b2758=JSON['parse'](_0x1a14d1[_0x5c0a1d(0x10b)]);_0x782569=_0x3b2758[_0x5c0a1d(0x1e3)]||_0x3b2758;}}catch(_0x554ffb){}const _0x34e9d6=_0xc75eaf!==undefined&&_0xc75eaf!==null?(_0x4a61bb+_0xc75eaf)/0x2:_0x4a61bb;for(const [_0x1efe2f,_0x456136]of Object[_0x5c0a1d(0x18e)](_0x1a47a7)){const _0xe5821=_0x49af88[_0x1efe2f]||0x15;if(_0x456136<=_0xe5821)continue;let _0x2fc238=_0x782569[_0x1efe2f]||-0.5;if(_0x2fc238>=0x0)_0x2fc238=-0.5;const _0x1ba288=Math[_0x5c0a1d(0x1ba)](_0x2fc238),_0x5a68ff=_0x456136-_0xe5821;let _0xb78c5b=Math[_0x5c0a1d(0x132)](_0x5a68ff/_0x1ba288*0x3c);const _0x3c0dee=_0x456136-_0x4a61bb,_0x3adbb9=_0x456136-_0x34e9d6;if(_0x3adbb9!==0x0&&_0x3c0dee!==0x0){const _0x30cf1e=_0x3c0dee/_0x3adbb9;_0xb78c5b=Math['floor'](_0xb78c5b*_0x30cf1e);}if(_0xb78c5b>0xf){if(_0xb78c5b>0xf0)_0xb78c5b=0xf0;_0x75287d[_0x5c0a1d(0x13f)]({'room':_0x1efe2f,'minutes_safe':_0xb78c5b,'target':_0xe5821,'current':_0x456136,'savings_msg':_0x5c0a1d(0x1db)+_0xb78c5b+'\x20min\x20ausbleiben.'});}}_0x75287d[_0x5c0a1d(0x160)]((_0x39e92e,_0x2a445a)=>_0x2a445a[_0x5c0a1d(0xa4)]-_0x39e92e[_0x5c0a1d(0xa4)]),this[_0x5c0a1d(0x12e)](_0x575982[_0x5c0a1d(0xe3)],_0x575982[_0x5c0a1d(0x11b)],{'success':!![],'proposals':_0x75287d},_0x575982[_0x5c0a1d(0x1de)]);}catch(_0x1ce6c9){this[_0x5c0a1d(0x12e)](_0x575982[_0x5c0a1d(0xe3)],_0x575982[_0x5c0a1d(0x11b)],{'success':![],'error':_0x1ce6c9['message']},_0x575982['callback']);}else{if(_0x575982[_0x5c0a1d(0x11b)]===_0x5c0a1d(0x192))try{const _0xb7efdc=_0x575982[_0x5c0a1d(0xf8)][_0x5c0a1d(0x189)],_0x31a472=_0x5c0a1d(0x168),_0x42bfa8=await this[_0x5c0a1d(0xf1)](_0x31a472);let _0x173c10={};if(_0x42bfa8&&_0x42bfa8[_0x5c0a1d(0x10b)])try{_0x173c10=JSON[_0x5c0a1d(0xd6)](_0x42bfa8[_0x5c0a1d(0x10b)]);}catch(_0xc71340){}_0xb7efdc&&_0x173c10[_0xb7efdc]?(delete _0x173c10[_0xb7efdc],await this[_0x5c0a1d(0xd2)](_0x31a472,{'val':JSON['stringify'](_0x173c10),'ack':!![]}),this[_0x5c0a1d(0xb6)][_0x5c0a1d(0x184)](_0x5c0a1d(0x14a)+_0xb7efdc+_0x5c0a1d(0x1d5)),this[_0x5c0a1d(0x12e)](_0x575982[_0x5c0a1d(0xe3)],_0x575982[_0x5c0a1d(0x11b)],{'success':!![]},_0x575982[_0x5c0a1d(0x1de)])):this[_0x5c0a1d(0x12e)](_0x575982['from'],_0x575982[_0x5c0a1d(0x11b)],{'success':![],'error':_0x5c0a1d(0xaf)},_0x575982['callback']);}catch(_0x54ec55){this[_0x5c0a1d(0x12e)](_0x575982[_0x5c0a1d(0xe3)],_0x575982[_0x5c0a1d(0x11b)],{'success':![],'error':_0x54ec55[_0x5c0a1d(0xf8)]},_0x575982['callback']);}else{if(_0x575982[_0x5c0a1d(0x11b)]===_0x5c0a1d(0x138))await this['setStateAsync'](_0x5c0a1d(0x11c),{'val':![],'ack':!![]}),await this[_0x5c0a1d(0xd2)](_0x5c0a1d(0x1ad),{'val':'','ack':!![]}),await this[_0x5c0a1d(0xd2)](_0x5c0a1d(0x117),{'val':'','ack':!![]}),this[_0x5c0a1d(0x12e)](_0x575982[_0x5c0a1d(0xe3)],_0x575982['command'],{'success':!![]},_0x575982[_0x5c0a1d(0x1de)]);else{if(_0x575982[_0x5c0a1d(0x11b)]==='simulateButler'){const {targetId:_0x206b9f,targetValue:_0x2e1124}=_0x575982[_0x5c0a1d(0xf8)];await this[_0x5c0a1d(0xd2)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0x5c0a1d(0xd2)](_0x5c0a1d(0x1ad),{'val':'Simulation\x20durch\x20Admin\x20(Test)','ack':!![]}),await this[_0x5c0a1d(0xd2)]('analysis.automation.targetId',{'val':_0x206b9f,'ack':!![]}),await this[_0x5c0a1d(0xd2)](_0x5c0a1d(0xd9),{'val':String(_0x2e1124),'ack':!![]}),this[_0x5c0a1d(0x12e)](_0x575982[_0x5c0a1d(0xe3)],_0x575982[_0x5c0a1d(0x11b)],{'success':!![]},_0x575982[_0x5c0a1d(0x1de)]);}else{if(_0x575982[_0x5c0a1d(0x11b)]==='testApiKey')try{const _0x5c62a1=_0x575982[_0x5c0a1d(0xf8)][_0x5c0a1d(0x196)];if(!_0x5c62a1)throw new Error('Kein\x20API\x20Key\x20Ã¼bergeben');const _0x21bcb9=new GoogleGenerativeAI(_0x5c62a1),_0x1dcbb0=_0x21bcb9[_0x5c0a1d(0x1a0)]({'model':GEMINI_MODEL}),_0x486ea2=await _0x1dcbb0[_0x5c0a1d(0x1c8)](_0x5c0a1d(0x1b7)),_0x36498d=await _0x486ea2[_0x5c0a1d(0x18f)];if(_0x36498d['text']())this[_0x5c0a1d(0x12e)](_0x575982[_0x5c0a1d(0xe3)],_0x575982[_0x5c0a1d(0x11b)],{'success':!![],'message':'Verbindung\x20erfolgreich!'},_0x575982['callback']);else throw new Error('Keine\x20Antwort\x20von\x20Gemini');}catch(_0x5489e3){this[_0x5c0a1d(0x12e)](_0x575982['from'],_0x575982[_0x5c0a1d(0x11b)],{'success':![],'message':_0x5489e3[_0x5c0a1d(0xf8)]},_0x575982[_0x5c0a1d(0x1de)]);}else{if(_0x575982[_0x5c0a1d(0x11b)]===_0x5c0a1d(0x172))try{const _0x534c91=await scanner['scanForDevices'](this,_0x575982[_0x5c0a1d(0xf8)]||{});this[_0x5c0a1d(0x12e)](_0x575982['from'],_0x575982[_0x5c0a1d(0x11b)],{'success':!![],'devices':_0x534c91},_0x575982[_0x5c0a1d(0x1de)]);}catch(_0x30bf03){this[_0x5c0a1d(0x12e)](_0x575982[_0x5c0a1d(0xe3)],_0x575982[_0x5c0a1d(0x11b)],{'success':![],'error':_0x30bf03[_0x5c0a1d(0xf8)]},_0x575982[_0x5c0a1d(0x1de)]);}else{if(_0x575982[_0x5c0a1d(0x11b)]===_0x5c0a1d(0x198))try{const {matrix:_0x3b2eb5}=_0x575982[_0x5c0a1d(0xf8)],_0x12994f=await this['getStateAsync']('analysis.topology.structure');if(_0x12994f&&_0x12994f[_0x5c0a1d(0x10b)]){const _0x42404=JSON[_0x5c0a1d(0xd6)](_0x12994f['val']);_0x42404[_0x5c0a1d(0xdc)]=_0x3b2eb5,_0x42404['updated']=Date[_0x5c0a1d(0xbe)](),await this[_0x5c0a1d(0xd2)]('analysis.topology.structure',{'val':JSON[_0x5c0a1d(0xc0)](_0x42404),'ack':!![]}),pythonBridge['send'](this,_0x5c0a1d(0x1c6),_0x42404);}this['sendTo'](_0x575982['from'],_0x575982['command'],{'success':!![]},_0x575982[_0x5c0a1d(0x1de)]);}catch(_0x237876){this[_0x5c0a1d(0xb6)]['error'](_0x237876);}else{if(_0x575982[_0x5c0a1d(0x11b)]==='getLtmData')this['sendTo'](_0x575982['from'],_0x575982[_0x5c0a1d(0x11b)],{'success':!![],'dailyDigests':this[_0x5c0a1d(0x9b)]||[],'analysisHistory':this['analysisHistory']||[]},_0x575982[_0x5c0a1d(0x1de)]);else{if(_0x575982[_0x5c0a1d(0x11b)]===_0x5c0a1d(0x137)){const _0x3bde11=this['dailyDigests'][_0x5c0a1d(0x1a9)],_0x388bc4=new Array(0x18)[_0x5c0a1d(0x106)](0x0),_0xbc7414=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x5c0a1d(0x98)]&&this['eventHistory']['forEach'](_0x38ad25=>{const _0xda4870=_0x5c0a1d;if(_0x38ad25['timestamp']>=_0xbc7414){const _0x4c64f7=new Date(_0x38ad25[_0xda4870(0xc3)])[_0xda4870(0x1d6)]();if(_0x4c64f7>=0x0&&_0x4c64f7<0x18)_0x388bc4[_0x4c64f7]++;}});let _0x1b19ac=![],_0x87d29c='',_0x340fe3='',_0x58e39d='';try{const _0x52f5ab=await this[_0x5c0a1d(0xf1)]('analysis.automation.patternDetected');if(_0x52f5ab&&_0x52f5ab['val']){_0x1b19ac=!![];const _0x36bbd8=await this[_0x5c0a1d(0xf1)](_0x5c0a1d(0x1ad));_0x87d29c=_0x36bbd8?_0x36bbd8[_0x5c0a1d(0x10b)]:'';const _0x4f8ba4=await this[_0x5c0a1d(0xf1)](_0x5c0a1d(0x117));_0x340fe3=_0x4f8ba4?_0x4f8ba4[_0x5c0a1d(0x10b)]:'';const _0x2aed0f=await this[_0x5c0a1d(0xf1)](_0x5c0a1d(0xd9));_0x58e39d=_0x2aed0f?_0x2aed0f[_0x5c0a1d(0x10b)]:'';}}catch(_0x2ae337){}const _0x57fa68=await this[_0x5c0a1d(0x152)](),_0x8c26af=(this[_0x5c0a1d(0x18d)][_0x5c0a1d(0x1a8)]||[])[_0x5c0a1d(0x1c1)](_0x1c610e=>_0x1c610e[_0x5c0a1d(0x1ab)]),_0x16712a=_0x57fa68&&_0x8c26af;this[_0x5c0a1d(0x12e)](_0x575982[_0x5c0a1d(0xe3)],_0x575982[_0x5c0a1d(0x11b)],{'success':!![],'eventHistory':this[_0x5c0a1d(0x98)][_0x5c0a1d(0x16b)](0x0,0xf),'stats':{'digestCount':_0x3bde11,'isPresent':this['isPresent'],'hourlyActivity':_0x388bc4,'solarActive':_0x16712a},'automation':{'detected':_0x1b19ac,'description':_0x87d29c,'targetId':_0x340fe3,'targetValue':_0x58e39d}},_0x575982['callback']);}else{if(_0x575982[_0x5c0a1d(0x11b)]===_0x5c0a1d(0x1bf)){const _0x5d3566=await this[_0x5c0a1d(0xbc)]('enum.functions.*','enum'),_0x19f69d=[];if(_0x5d3566)for(const _0x2776a8 in _0x5d3566){const _0x3b5377=_0x5d3566[_0x2776a8],_0x31cb9f=(_0x3b5377['common']&&typeof _0x3b5377[_0x5c0a1d(0x1d1)][_0x5c0a1d(0xb4)]==='object'?_0x3b5377[_0x5c0a1d(0x1d1)][_0x5c0a1d(0xb4)]['de']:_0x3b5377[_0x5c0a1d(0x1d1)]['name'])||_0x3b5377[_0x5c0a1d(0x1d1)][_0x5c0a1d(0xb4)];_0x19f69d[_0x5c0a1d(0x13f)]({'id':_0x2776a8,'name':_0x31cb9f});}const _0x3aca97=await this['getForeignObjectsAsync'](_0x5c0a1d(0x16f),_0x5c0a1d(0x139)),_0x286d81=[];if(_0x3aca97)for(const _0x478548 in _0x3aca97){const _0x123f3a=_0x3aca97[_0x478548],_0x38e81f=(_0x123f3a[_0x5c0a1d(0x1d1)]&&typeof _0x123f3a[_0x5c0a1d(0x1d1)][_0x5c0a1d(0xb4)]===_0x5c0a1d(0xb9)?_0x123f3a[_0x5c0a1d(0x1d1)][_0x5c0a1d(0xb4)]['de']:_0x123f3a[_0x5c0a1d(0x1d1)]['name'])||_0x478548[_0x5c0a1d(0x170)]('.')[_0x5c0a1d(0x16e)]();_0x286d81[_0x5c0a1d(0x13f)](_0x38e81f);}this[_0x5c0a1d(0x12e)](_0x575982[_0x5c0a1d(0xe3)],_0x575982['command'],{'success':!![],'enums':_0x19f69d,'rooms':_0x286d81},_0x575982[_0x5c0a1d(0x1de)]);}else{if(_0x575982[_0x5c0a1d(0x11b)]===_0x5c0a1d(0x155))try{let _0x34170f=_0x5c0a1d(0xff),_0x339e9f=_0x5c0a1d(0x11f);if(this[_0x5c0a1d(0x18d)][_0x5c0a1d(0xef)]){const _0x1ba7e0=await recorder[_0x5c0a1d(0x16d)](this);_0x34170f=_0x1ba7e0!==null?_0x1ba7e0+'Â°C':_0x5c0a1d(0x107);}if(this[_0x5c0a1d(0x18d)][_0x5c0a1d(0x1e5)]){const _0x5699ad=await this[_0x5c0a1d(0x1d7)](_0x5c0a1d(0x1d4)+this[_0x5c0a1d(0x18d)][_0x5c0a1d(0x1e5)]);_0x339e9f=_0x5699ad?'Verbunden':'Instanz\x20nicht\x20gefunden';}this[_0x5c0a1d(0x12e)](_0x575982[_0x5c0a1d(0xe3)],_0x575982['command'],{'success':!![],'weather':_0x34170f,'calendar':_0x339e9f},_0x575982[_0x5c0a1d(0x1de)]);}catch(_0x4c652e){this[_0x5c0a1d(0x12e)](_0x575982[_0x5c0a1d(0xe3)],_0x575982['command'],{'success':![],'error':_0x4c652e[_0x5c0a1d(0xf8)]},_0x575982['callback']);}else{if(_0x575982[_0x5c0a1d(0x11b)]===_0x5c0a1d(0xf4))try{const _0x1a5647=_0x575982['message'][_0x5c0a1d(0xba)],_0x53e4cc=await this['getForeignStateAsync'](_0x1a5647+'.data.table');let _0x4dd626=[];if(_0x53e4cc&&_0x53e4cc[_0x5c0a1d(0x10b)]){const _0x31ae64=JSON[_0x5c0a1d(0xd6)](_0x53e4cc[_0x5c0a1d(0x10b)]),_0x562ceb=new Set();Array[_0x5c0a1d(0xe0)](_0x31ae64)&&_0x31ae64[_0x5c0a1d(0xe2)](_0x3930bc=>{const _0x3f135e=_0x5c0a1d;if(_0x3930bc['_calName'])_0x562ceb[_0x3f135e(0xf5)](_0x3930bc[_0x3f135e(0xa6)]);else{if(_0x3930bc[_0x3f135e(0x102)])_0x562ceb[_0x3f135e(0xf5)](_0x3930bc[_0x3f135e(0x102)]);}}),_0x4dd626=Array[_0x5c0a1d(0xe3)](_0x562ceb)[_0x5c0a1d(0x160)]();}if(_0x4dd626['length']===0x0)_0x4dd626=['Standard'];this['sendTo'](_0x575982[_0x5c0a1d(0xe3)],_0x575982[_0x5c0a1d(0x11b)],{'success':!![],'names':_0x4dd626},_0x575982[_0x5c0a1d(0x1de)]);}catch(_0x605c3b){this[_0x5c0a1d(0x12e)](_0x575982[_0x5c0a1d(0xe3)],_0x575982['command'],{'success':![],'error':_0x605c3b[_0x5c0a1d(0xf8)]},_0x575982['callback']);}else{if(_0x575982[_0x5c0a1d(0x11b)]===_0x5c0a1d(0xdb))try{await setup[_0x5c0a1d(0xd4)](this,_0x5c0a1d(0x118),![],![]),this[_0x5c0a1d(0x12e)](_0x575982[_0x5c0a1d(0xe3)],_0x575982[_0x5c0a1d(0x11b)],{'success':!![],'message':_0x5c0a1d(0x145)},_0x575982[_0x5c0a1d(0x1de)]);}catch(_0x108179){this[_0x5c0a1d(0xb6)][_0x5c0a1d(0xb5)](_0x5c0a1d(0x1e1)+_0x108179[_0x5c0a1d(0xf8)]),this[_0x5c0a1d(0x12e)](_0x575982[_0x5c0a1d(0xe3)],_0x575982[_0x5c0a1d(0x11b)],{'success':![],'message':'Fehler:\x20'+_0x108179[_0x5c0a1d(0xf8)]},_0x575982[_0x5c0a1d(0x1de)]);}}}}}}}}}}}}}}}}async[a0_0x56b33f(0x111)](){const _0x4516f7=a0_0x56b33f;try{const _0x5a2982=await this[_0x4516f7(0xf1)](setup[_0x4516f7(0x134)]);_0x5a2982&&_0x5a2982[_0x4516f7(0x10b)]&&Object['values'](setup[_0x4516f7(0x1c0)])[_0x4516f7(0x1a3)](_0x5a2982['val'])?this[_0x4516f7(0x15e)]=_0x5a2982[_0x4516f7(0x10b)]:(this[_0x4516f7(0x15e)]=setup[_0x4516f7(0x1c0)]['NORMAL'],await this[_0x4516f7(0xd2)](setup[_0x4516f7(0x134)],{'val':setup[_0x4516f7(0x1c0)]['NORMAL'],'ack':!![]}));}catch(_0x7419eb){this['currentSystemMode']=setup[_0x4516f7(0x1c0)][_0x4516f7(0x18c)];}}async['checkWifiPresence'](){const _0x968f2c=a0_0x56b33f;try{const _0x315733=this[_0x968f2c(0x18d)]['presenceDevices']||[];let _0x38405b=![];const _0x5c48b6=[];for(const _0x30b55f of _0x315733){try{const _0x46d0d5=await this['getForeignStateAsync'](_0x30b55f);_0x46d0d5&&(_0x46d0d5[_0x968f2c(0x10b)]===!![]||_0x46d0d5['val']==='online'||_0x46d0d5[_0x968f2c(0x10b)]===0x1)&&(_0x38405b=!![],_0x5c48b6[_0x968f2c(0x13f)](_0x30b55f));}catch(_0x171eba){}}return await this[_0x968f2c(0xd2)](_0x968f2c(0x14e),{'val':_0x5c48b6[_0x968f2c(0x169)](',\x20'),'ack':!![]}),_0x38405b&&(this[_0x968f2c(0x1d8)]&&(this['log']['info']('WiFi\x20Presence\x20detected.'),recorder[_0x968f2c(0x1d2)](this)),!this['isPresent']&&this[_0x968f2c(0x15e)]===setup['SYSTEM_MODES'][_0x968f2c(0x18c)]&&await recorder[_0x968f2c(0x19d)](this,!![])),_0x38405b;}catch(_0x5e35e8){return![];}}async[a0_0x56b33f(0xee)](){const _0x5bbe7c=a0_0x56b33f;this['log']['debug'](_0x5bbe7c(0x1c5)),await aiAgent[_0x5bbe7c(0xa8)](this),this[_0x5bbe7c(0xca)](),this[_0x5bbe7c(0xa5)](),this[_0x5bbe7c(0xab)]();}async[a0_0x56b33f(0x152)](){const _0x4758f0=a0_0x56b33f,_0x416d48=[_0x4758f0(0x177),_0x4758f0(0x186),_0x4758f0(0x131)],_0x3a69b9=[_0x4758f0(0x175),_0x4758f0(0x14b),_0x4758f0(0x142)];for(const _0x24131a of _0x416d48){for(const _0x3e1c98 of _0x3a69b9){try{const _0x340fe9=_0x24131a+'.'+_0x3e1c98,_0x2ac87c=await this[_0x4758f0(0x1d9)](_0x340fe9);if(_0x2ac87c&&_0x2ac87c['val']){const _0x4aa128=String(_0x2ac87c[_0x4758f0(0x10b)])[_0x4758f0(0xd0)]();if(_0x4aa128[_0x4758f0(0x1a3)](_0x4758f0(0x11a))||_0x4aa128[_0x4758f0(0x1a3)](_0x4758f0(0x123))||_0x4aa128[_0x4758f0(0x1a3)](_0x4758f0(0xfe))||_0x4aa128[_0x4758f0(0x1a3)](_0x4758f0(0xcc))||_0x4aa128[_0x4758f0(0x1a3)](_0x4758f0(0x1df)))return!![];}}catch(_0x9f95e5){}}}return![];}[a0_0x56b33f(0xa5)](){const _0x526d74=a0_0x56b33f;if(!this[_0x526d74(0xe8)])return;try{this[_0x526d74(0x1b9)](_0x526d74(0xb7),(_0x3e7d61,_0x5ca928)=>{const _0x20769d=_0x526d74;_0x5ca928&&_0x5ca928[_0x20769d(0x10b)]&&pythonBridge[_0x20769d(0x1e2)](this,_0x20769d(0x127),{'sequences':JSON['parse'](_0x5ca928[_0x20769d(0x10b)])});});}catch(_0x57bffe){}}async[a0_0x56b33f(0xab)](){const _0xd020c5=a0_0x56b33f;if(!this[_0xd020c5(0xe8)])return;try{const _0x444a98=await recorder[_0xd020c5(0x16d)](this);if(_0x444a98===null)return;const _0x5462ce={},_0x7c6fc8={},_0x2bc908=this[_0xd020c5(0x18d)][_0xd020c5(0x1a8)]||[];for(const _0x5857a0 of _0x2bc908){if(_0x5857a0['type']==='temperature'&&_0x5857a0[_0xd020c5(0x9d)]){const _0x17871a=this[_0xd020c5(0x174)][_0x5857a0['id']];if(_0x17871a!==undefined)_0x5462ce[_0x5857a0[_0xd020c5(0x9d)]]=_0x17871a;if(_0x5857a0['isSolar'])_0x7c6fc8[_0x5857a0[_0xd020c5(0x9d)]]=!![];}}const _0x3a8552=await this[_0xd020c5(0x152)]();let _0x36906c={};try{const _0x511daf=await this[_0xd020c5(0xf1)](_0xd020c5(0x1d3));if(_0x511daf&&_0x511daf[_0xd020c5(0x10b)])_0x36906c=JSON[_0xd020c5(0xd6)](_0x511daf[_0xd020c5(0x10b)]);}catch(_0x57615d){}Object[_0xd020c5(0xb2)](_0x5462ce)[_0xd020c5(0x1a9)]>0x0&&(pythonBridge['send'](this,_0xd020c5(0x140),{'current_temps':_0x5462ce,'t_out':_0x444a98,'is_sunny':_0x3a8552,'solar_flags':_0x7c6fc8,'warmup_targets':_0x36906c}),pythonBridge['send'](this,_0xd020c5(0x150),{'current_temps':_0x5462ce,'t_out':_0x444a98,'targets':{}}));}catch(_0x3af1ce){}}[a0_0x56b33f(0xca)](){const _0x414374=a0_0x56b33f;if(!this[_0x414374(0x157)]||this['rawEventLog'][_0x414374(0x1a9)]===0x0)return;const _0x5ec9be=new Array(0x60)[_0x414374(0x106)](0x0),_0x1a0664=new Date()[_0x414374(0xf7)](0x0,0x0,0x0,0x0);this[_0x414374(0x157)]['forEach'](_0x3d2855=>{const _0x2e5793=_0x414374,_0x2ee0d3=new Date(_0x3d2855[_0x2e5793(0xc3)]);if(_0x2ee0d3[_0x2e5793(0x17e)]()>=_0x1a0664){const _0x81bf13=_0x2ee0d3[_0x2e5793(0x1d6)](),_0x5c1d84=_0x2ee0d3[_0x2e5793(0x148)](),_0x5826fd=_0x81bf13*0x4+Math[_0x2e5793(0x132)](_0x5c1d84/0xf);if(_0x5826fd>=0x0&&_0x5826fd<0x60)_0x5ec9be[_0x5826fd]++;}}),this['setStateAsync'](_0x414374(0x10e),{'val':JSON[_0x414374(0xc0)](_0x5ec9be),'ack':!![]});}[a0_0x56b33f(0x17a)](){const _0x4edbc4=a0_0x56b33f;if(!this['dailyDigests']||this['dailyDigests'][_0x4edbc4(0x1a9)]<0x2)return;const _0x27887e=this[_0x4edbc4(0x9b)][_0x4edbc4(0xfc)](_0x3e8372=>{const _0x46ff9f=_0x4edbc4,_0x3df140=(_0x3e8372[_0x46ff9f(0x1c7)]||'')[_0x46ff9f(0xd0)]();return ACTIVITY_LEVEL_MAP[_0x3df140]||0x32;});pythonBridge['send'](this,_0x4edbc4(0xc2),{'values':_0x27887e,'tag':_0x4edbc4(0xe4)});}async[a0_0x56b33f(0x181)](_0x5b67ec){const _0x3b9e2a=a0_0x56b33f;if(_0x5b67ec==null||typeof _0x5b67ec!==_0x3b9e2a(0xea))return;const _0x1472a4=Date['now']();this[_0x3b9e2a(0xa9)][_0x3b9e2a(0x13f)]({'ts':_0x1472a4,'val':_0x5b67ec}),this[_0x3b9e2a(0xa9)]=this[_0x3b9e2a(0xa9)][_0x3b9e2a(0x185)](_0x128baf=>_0x1472a4-_0x128baf['ts']<0x1388);if(this[_0x3b9e2a(0x15c)])return;if(this['config']['infrasoundArmingId']){const _0xe897ed=await this['getForeignStateAsync'](this[_0x3b9e2a(0x18d)]['infrasoundArmingId']);if(_0xe897ed&&!_0xe897ed['val'])return;}const _0x1fe8e0=this['config']['infrasoundThreshold']||0.04;Math[_0x3b9e2a(0x1ba)](_0x5b67ec)>=_0x1fe8e0&&(this[_0x3b9e2a(0xb6)]['warn'](_0x3b9e2a(0x14c)+_0x5b67ec+'\x20hPa\x20(Limit:\x20'+_0x1fe8e0+')'),await this[_0x3b9e2a(0xd2)](_0x3b9e2a(0xf0),{'val':!![],'ack':!![]}),this[_0x3b9e2a(0x120)](_0x5b67ec),this[_0x3b9e2a(0xd4)](_0x3b9e2a(0x122)+_0x5b67ec+_0x3b9e2a(0xbd)),this[_0x3b9e2a(0x15c)]=!![],setTimeout(()=>{const _0x117838=_0x3b9e2a;this[_0x117838(0x15c)]=![];},0x2710));}async['triggerInfrasoundCorrelation'](_0x4acc79){const _0x16d207=a0_0x56b33f,_0x32b5f2=Date['now'](),_0x43a102=this[_0x16d207(0x18d)][_0x16d207(0x1a8)]||[];setTimeout(async()=>{const _0x5cbe44=_0x16d207;let _0x14a05c=null,_0x508f1a=_0x5cbe44(0x121);const _0x3ba0aa=[],_0x3aaff4=_0x43a102[_0x5cbe44(0x185)](_0x40cfc4=>_0x40cfc4[_0x5cbe44(0x1be)]&&(_0x40cfc4[_0x5cbe44(0x1be)][_0x5cbe44(0x1a3)](_0x5cbe44(0x19c))||_0x40cfc4[_0x5cbe44(0x1be)][_0x5cbe44(0x1a3)](_0x5cbe44(0xa2))||_0x40cfc4[_0x5cbe44(0x1be)][_0x5cbe44(0x1a3)](_0x5cbe44(0x1a1))||_0x40cfc4[_0x5cbe44(0x1be)][_0x5cbe44(0x1a3)](_0x5cbe44(0x153)))||_0x40cfc4[_0x5cbe44(0x15d)]&&(_0x40cfc4[_0x5cbe44(0x15d)][_0x5cbe44(0x1a3)](_0x5cbe44(0x1b4))||_0x40cfc4[_0x5cbe44(0x15d)]['includes'](_0x5cbe44(0x1e0))));for(const _0x4bffda of _0x3aaff4){try{const _0xed6003=await this['getForeignStateAsync'](_0x4bffda['id']);if(_0xed6003){if(_0xed6003['ts']>=_0x32b5f2-0x7d0){_0x14a05c=_0x4bffda['name']||_0x4bffda['id'],_0x508f1a='ErklÃ¤rt\x20durch:\x20'+_0x14a05c;break;}}}catch(_0x5e4bae){}}const _0x3d030a={'timestamp':_0x32b5f2,'pressure':_0x4acc79,'isMatch':!!_0x14a05c,'explanation':_0x508f1a,'type':_0x5cbe44(0x1c4)};await this[_0x5cbe44(0x18b)](_0x3d030a),this[_0x5cbe44(0xb6)][_0x5cbe44(0x184)](_0x5cbe44(0x197)+(!!_0x14a05c?_0x5cbe44(0x133):_0x5cbe44(0xd3)));},0x1388);}async[a0_0x56b33f(0xac)](_0x16a198){const _0x319fb1=a0_0x56b33f,_0x5b644c=Date[_0x319fb1(0xbe)](),_0x122809=_0x16a198[_0x319fb1(0xb4)]||_0x16a198['id'][_0x319fb1(0x170)]('.')[_0x319fb1(0x16e)]();let _0x54bdf=0x0;setTimeout(async()=>{const _0x2af0eb=_0x319fb1;this[_0x2af0eb(0xa9)][_0x2af0eb(0xe2)](_0x187dc8=>{const _0x2f750b=_0x2af0eb;_0x187dc8['ts']>=_0x5b644c-0xfa0&&_0x187dc8['ts']<=_0x5b644c+0x3e8&&(Math[_0x2f750b(0x1ba)](_0x187dc8[_0x2f750b(0x10b)])>Math[_0x2f750b(0x1ba)](_0x54bdf)&&(_0x54bdf=_0x187dc8[_0x2f750b(0x10b)]));});const _0x22892c=this['config'][_0x2af0eb(0x116)]||0.04,_0x5878a3=Math[_0x2af0eb(0x1ba)](_0x54bdf)>=_0x22892c,_0x4b394a={'timestamp':_0x5b644c,'pressure':_0x54bdf,'isMatch':_0x5878a3,'explanation':_0x2af0eb(0x114)+_0x122809,'type':'CALIB'};await this[_0x2af0eb(0x18b)](_0x4b394a),this['log']['debug'](_0x2af0eb(0x18a)+_0x122809+_0x2af0eb(0xd5)+_0x54bdf['toFixed'](0x4)+_0x2af0eb(0x176)+_0x22892c+')');},0x1f4);}async[a0_0x56b33f(0x18b)](_0xf0f7fe){const _0x35f40f=a0_0x56b33f;try{const _0x471d51=await this[_0x35f40f(0xf1)](_0x35f40f(0x1b8));let _0x3a258a=[];if(_0x471d51&&_0x471d51[_0x35f40f(0x10b)])_0x3a258a=JSON[_0x35f40f(0xd6)](_0x471d51['val']);_0x3a258a[_0x35f40f(0x149)](_0xf0f7fe);if(_0x3a258a[_0x35f40f(0x1a9)]>0x14)_0x3a258a=_0x3a258a[_0x35f40f(0x16b)](0x0,0x14);await this[_0x35f40f(0xd2)](_0x35f40f(0x1b8),{'val':JSON[_0x35f40f(0xc0)](_0x3a258a),'ack':!![]});}catch(_0x41ce49){this[_0x35f40f(0xb6)]['error']('[Forensics]\x20Save\x20failed:\x20'+_0x41ce49['message']);}}[a0_0x56b33f(0xd4)](_0x5ee8bc){const _0x5fe1c1=a0_0x56b33f;this[_0x5fe1c1(0x18d)][_0x5fe1c1(0xc5)]&&this['config'][_0x5fe1c1(0xfd)]&&this['sendTo'](this[_0x5fe1c1(0x18d)]['notifyPushoverInstance'],_0x5fe1c1(0x1e2),{'message':_0x5ee8bc,'title':_0x5fe1c1(0x16a),'priority':0x1}),this[_0x5fe1c1(0x18d)][_0x5fe1c1(0x158)]&&this[_0x5fe1c1(0x18d)][_0x5fe1c1(0xb8)]&&this['sendTo'](this[_0x5fe1c1(0x18d)][_0x5fe1c1(0xb8)],_0x5fe1c1(0x1e2),{'text':_0x5ee8bc});}}if(require['main']!==module)module[a0_0x56b33f(0x1dd)]=_0x3fb353=>new CogniLiving(_0x3fb353);else new CogniLiving();