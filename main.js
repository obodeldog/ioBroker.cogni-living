const a0_0x1b58d4=a0_0x1aff;function a0_0x1aff(_0x5938b7,_0xe8c454){const _0x218edb=a0_0x358b();return a0_0x1aff=function(_0x11117f,_0x5ca708){_0x11117f=_0x11117f-0x1cb;let _0x358baa=_0x218edb[_0x11117f];return _0x358baa;},a0_0x1aff(_0x5938b7,_0xe8c454);}function a0_0x358b(){const _0x4e4951=['üìù\x20Manual\x20event\x20logged:\x20','.system.mode','analysis.activity.roomHistory','unshift','‚úÖ\x20History\x20saved:\x20','date','dailyDigests','config','forEach','getStateAsync','\x20sequences','warn','Room\x20History\x20(24h\x20Buckets)','History\x20Save\x20Error:\x20','online','üö∂\x20Gait\x20Analysis\x20triggered\x20with\x20','energy','NIGHT','python','checkLicense','minDaysForBaseline','toFixed','analysis.energy.warmupSources','./lib/scanner','comfort','toLocaleDateString','slice','Guest\x20Mode','analysis.prediction.trackerConfidence','TRAIN_HEALTH','ack','bootTime','moduleComfort','triggerEnergyPrediction','triggerGaitAnalysis','moduleSecurity','analysisHistory','18TiZbqA','cogni-living','geminiModel','53699GovQVt','9qwnInK','infrasoundLocked','ltmJob','getMinutes','analysis.trigger','isSolar','\x20rooms)','events.history','scheduleJob','getAbsoluteDefaultDataDir','Gemini\x20Report\x20Night','trackerHeartbeat','runPythonHealthCheck','analysis.visualization.pulse','instance','updateLocation','onReady','system.presenceWho','threshold_exceeded','No\x20data','...','inactivityThresholdHours','timestamp','LTM.baselineStatus','20555665tRDcrA','modules','\x20(Bewohner\x20anwesend\x20-\x20normal)','./lib/scheduler','exports','\x20>\x20','Unbekannt','keys','createDailyDigest','readFileSync','analysis.energy.warmupTargets','stopService','LTM.rawEventLog','fill','analysis.energy.warmupTimes','telegram','startSystem','./lib/installer','moduleEnergy','writeFileSync','isArray','integrateRoomTime','send','getForeignObjectsAsync','NORMAL','analysis.automation.patternDetected','forecast.current.weather','Verbindung\x20erfolgreich:\x20','substring','72OamyNW','location','enum','todayVector','197454VtOcaf','apply','üîä\x20Infraschall-Alarm:\x20','¬∞C,\x20Au√üen:\x20','shift','name','¬∞C)','loadSystemMode','endsWith','processSensorEvent','\x20Kalender-Adapter\x20gefunden.','min','then','accuweather.0','info','filter','matrix','üíæ\x20Saving\x20Daily\x20History\x20for\x20','manual','setPresence','./lib/ai_agent','Manual\x20Event','LTM.trainingData.sequences','Say\x20Hello','80kDDXGW','createAllObjects','isProVersion','text','geminiApiKey','SYSTEM_MODES','string','getHours','length','setHours','analysis.ventilation.lastWindow','bin','5256544SdPnFg','guest','replayTodayEvents','includes','Init...','Room\x20Dwell\x20Time\x20Stats','temperature','thermostat','runAutopilot','Warte\x20auf\x20Analyse...','enum.functions.*','val','analysis.health.activityTrend','updateHealthVector','üì¶\x20Restored\x20','stateChange','callback','door','motion','1067VTJMjR','generateContent','dependencyInstallInProgress','Scan\x20Error:\x20','number','briefingJob','system.adapter.ical.È¶ô','ANALYZE_GAIT','useCalendar','analysis.health.todayVector','push','infrasoundThreshold','heiter','\x20events\x20from\x20today...','setObjectNotExistsAsync','presenceCheckTimer','object','SET_LEARNING_MODE','runGeminiAnalysis','window','ERROR','toISOString','VACATION','haust√ºr','open','analysis.safety.infrasoundAlert','generateHealthReport','isGracePeriodActive','historyJob','values','No\x20topology\x20data\x20found','analysis.topology.structure','de-DE','weatherunderground.0','analysis.health.todayRoomDetails','activeModules','infrasoundArmingId','Sec-Training\x20started...','@iobroker/adapter-core','81074VTvkCP','path','triggerInfrasoundCorrelation','getEnums','Warm-Up\x20Time','triggerHealth\x20error:\x20','961420QVfTvT','saveDailyHistory','join','ready','rawEventLog','‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.','weatherTempId','main','getOverviewData','custom','driftAnalysisTimer','moduleHealth','subscribeForeignStatesAsync','state','apiKey','pressureBuffer','analysis.automation.targetValue','pythonBridge\x20command\x20failed:\x20','mkdirSync','analysis.training.triggerHealth','lastAlertState','üï∏Ô∏è\x20Topology\x20Matrix\x20manually\x20updated\x20by\x20user.','floor','message','Gemini\x20Init\x20Error:\x20','59\x2023\x20*\x20*\x20*','common','json','devices','find','Daily\x20Room\x20Details\x20(48x30min)','(((.+)+)+)+$','./lib/recorder','onMessage','TRAIN_TOPOLOGY','system.adapter.ical.','üîÆ\x20Energy\x20Prediction\x20triggered\x20(','getHistoryData','analysis.training.triggerTopology','refreshCalendar\x20failed:\x20','.uptime','log','modeResetJob','sendMorningBriefing','toLowerCase','Gemini\x20Report\x20Day','abortExitTimer','üîä\x20Infraschall:\x20','DAY','getForeignStateAsync','getObjectViewAsync','infrasoundSensorId','constructor','PREDICT_ENERGY','onStateChange','analysis.training.triggerComfort','Daily\x20Activity\x20Vector\x20(48x30min)','system','./lib/setup','initSchedules','command','application/json','[PythonBridge]\x20Forwarding\x20command:\x20','üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','sensorLastValues','Aktiv\x20(','sendTo','\x22history\x22:{}','split','licenseKey','‚òÄÔ∏è\x20Solar\x20Condition:\x20SUNNY\x20detected\x20via\x20','isPresent','Adapter','round','presenceDevices','refreshCalendar','initHistory','pulse','roomIntegratorTimer','Unknown','utf8','setState','Live\x20Event\x20Pulse','./lib/automation','.last_seen',')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)','toLocaleTimeString','add','Keine\x20Daten','analysis.health.geminiNight','subscribeStates','updateTopology','version','.json','50772cXLZWI','search','from','exitTimer','max','appendToLog','bind','initZombies','triggerEnergyPrediction\x20Error:\x20','debug','health','party','stringify','unload','setStateAsync','history','Kein\x20API\x20Key\x20√ºbergeben.','rows','reduce','checkWifiPresence','analysis.security.lastScore','memoryCache','LTM.dailyDigests','enum.rooms.*','.isOnline','pop','parse','exitGraceTimer','3fIXHxb','{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}','response','./lib/dead_man','protectAiMemory','calendarName','analysis.prediction.trackerTopRoom','{\x22history\x22:{}}','toString','getGenerativeModel','analysis.automation.description','[Integrator]\x20Error:\x20','\x20(Threshold)','updateTopologyMatrix\x20failed:\x20','calendarCheckTimer','healthTrendInterval','eventHistory','models/gemini-flash-latest','analysis.activity.roomStats','analysis.health.geminiDay','analysis.training.triggerEnergy','checkSolarCondition','error','checkCalendarTriggers','value','Gute\x20L√ºftungsm√∂glichkeit!','\x20Tage)','triggerBriefing','now','CALCULATE_HEALTH_TREND','testApiKey','existsSync','genAI','cogni-living\x20adapter\x20starting\x20(v','currentSystemMode','replace','sources','scanThermostats','\x20events\x20from\x20standard\x20storage.','cancel','getTime','type','analysisTimer','infrasoundEnabled','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','L√ºften\x20empfohlen'];a0_0x358b=function(){return _0x4e4951;};return a0_0x358b();}(function(_0x219b42,_0x55cfea){const _0x25953e=a0_0x1aff,_0x40099f=_0x219b42();while(!![]){try{const _0x33d17c=parseInt(_0x25953e(0x1ea))/0x1*(-parseInt(_0x25953e(0x1e7))/0x2)+-parseInt(_0x25953e(0x302))/0x3*(parseInt(_0x25953e(0x248))/0x4)+parseInt(_0x25953e(0x23c))/0x5*(parseInt(_0x25953e(0x224))/0x6)+parseInt(_0x25953e(0x282))/0x7*(parseInt(_0x25953e(0x220))/0x8)+-parseInt(_0x25953e(0x1eb))/0x9*(parseInt(_0x25953e(0x288))/0xa)+parseInt(_0x25953e(0x25b))/0xb*(parseInt(_0x25953e(0x2e6))/0xc)+parseInt(_0x25953e(0x203))/0xd;if(_0x33d17c===_0x55cfea)break;else _0x40099f['push'](_0x40099f['shift']());}catch(_0x4492cb){_0x40099f['push'](_0x40099f['shift']());}}}(a0_0x358b,0xb1ef9));const a0_0x5ca708=(function(){let _0x3dd95d=!![];return function(_0x4d98f3,_0xb56a1e){const _0xf08ab7=_0x3dd95d?function(){const _0x57356b=a0_0x1aff;if(_0xb56a1e){const _0x3b1e1d=_0xb56a1e[_0x57356b(0x225)](_0x4d98f3,arguments);return _0xb56a1e=null,_0x3b1e1d;}}:function(){};return _0x3dd95d=![],_0xf08ab7;};}()),a0_0x11117f=a0_0x5ca708(this,function(){const _0x3b2862=a0_0x1aff;return a0_0x11117f[_0x3b2862(0x30a)]()[_0x3b2862(0x2e7)]('(((.+)+)+)+$')[_0x3b2862(0x30a)]()[_0x3b2862(0x2bc)](a0_0x11117f)[_0x3b2862(0x2e7)](_0x3b2862(0x2a7));});a0_0x11117f();'use strict';const utils=require(a0_0x1b58d4(0x281)),{GoogleGenerativeAI}=require('@google/generative-ai'),path=require(a0_0x1b58d4(0x283)),fs=require('fs'),installer=require(a0_0x1b58d4(0x214)),scanner=require(a0_0x1b58d4(0x1d9)),schedulers=require(a0_0x1b58d4(0x206)),topology=require('./lib/topology'),setup=require(a0_0x1b58d4(0x2c2)),recorder=require(a0_0x1b58d4(0x2a8)),pythonBridge=require('./lib/python_bridge'),aiAgent=require(a0_0x1b58d4(0x238)),deadMan=require(a0_0x1b58d4(0x305)),automation=require(a0_0x1b58d4(0x2db)),GEMINI_MODEL=a0_0x1b58d4(0x313);class CogniLiving extends utils[a0_0x1b58d4(0x2d0)]{constructor(_0xc75807){const _0x26f39e=a0_0x1b58d4;super({..._0xc75807,'name':_0x26f39e(0x1e8)}),this['eventHistory']=[],this[_0x26f39e(0x1e6)]=[],this[_0x26f39e(0x28c)]=[],this[_0x26f39e(0x336)]=[],this['sensorLastValues']={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x26f39e(0x2cf)]=!![],this[_0x26f39e(0x2e9)]=null,this[_0x26f39e(0x301)]=null,this[_0x26f39e(0x276)]=![],this[_0x26f39e(0x322)]=null,this[_0x26f39e(0x1e9)]=null,this[_0x26f39e(0x324)]=setup['SYSTEM_MODES'][_0x26f39e(0x21b)],this[_0x26f39e(0x23e)]=![],this[_0x26f39e(0x29c)]=![],this[_0x26f39e(0x32c)]=null,this[_0x26f39e(0x310)]=null,this[_0x26f39e(0x26a)]=null,this[_0x26f39e(0x1ed)]=null,this[_0x26f39e(0x2b2)]=null,this[_0x26f39e(0x292)]=null,this[_0x26f39e(0x260)]=null,this[_0x26f39e(0x277)]=null,this[_0x26f39e(0x1f6)]=null,this[_0x26f39e(0x311)]=null,this[_0x26f39e(0x2d6)]=null,this[_0x26f39e(0x25d)]=![],this['lastTrackerEventTime']=Date[_0x26f39e(0x31e)](),this['memoryCache']=null,this[_0x26f39e(0x1e1)]=Date[_0x26f39e(0x31e)](),this['infrasoundLocked']=![],this['pressureBuffer']=[],this[_0x26f39e(0x27e)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x26f39e(0x28b),this[_0x26f39e(0x1fb)][_0x26f39e(0x2ec)](this)),this['on'](_0x26f39e(0x257),this[_0x26f39e(0x2be)][_0x26f39e(0x2ec)](this)),this['on'](_0x26f39e(0x2f3),this['onUnload'][_0x26f39e(0x2ec)](this)),this['on'](_0x26f39e(0x29f),this[_0x26f39e(0x2a9)][_0x26f39e(0x2ec)](this));}async[a0_0x1b58d4(0x1fb)](){const _0x353699=a0_0x1b58d4;this['log'][_0x353699(0x232)](_0x353699(0x323)+this[_0x353699(0x2e4)]+_0x353699(0x2dd));if(this[_0x353699(0x337)][_0x353699(0x293)]!==undefined)this['activeModules'][_0x353699(0x2f0)]=this['config'][_0x353699(0x293)];if(this[_0x353699(0x337)][_0x353699(0x1e5)]!==undefined)this[_0x353699(0x27e)]['security']=this[_0x353699(0x337)][_0x353699(0x1e5)];if(this[_0x353699(0x337)]['moduleEnergy']!==undefined)this[_0x353699(0x27e)][_0x353699(0x1d2)]=this[_0x353699(0x337)][_0x353699(0x215)];if(this['config']['moduleComfort']!==undefined)this[_0x353699(0x27e)][_0x353699(0x1da)]=this[_0x353699(0x337)][_0x353699(0x1e2)];if(this['config'][_0x353699(0x204)])this[_0x353699(0x27e)]={...this[_0x353699(0x27e)],...this[_0x353699(0x337)][_0x353699(0x204)]};this[_0x353699(0x213)]();}async[a0_0x1b58d4(0x213)](){const _0x1b6798=a0_0x1b58d4;await setup[_0x1b6798(0x2ed)](this);try{this[_0x1b6798(0x23e)]=await setup[_0x1b6798(0x1d5)](this[_0x1b6798(0x337)][_0x1b6798(0x2cd)]);}catch(_0x4dfa2c){}if(!this[_0x1b6798(0x337)][_0x1b6798(0x200)]||this['config']['inactivityThresholdHours']<0.1)this[_0x1b6798(0x337)]['inactivityThresholdHours']=0xc;await setup[_0x1b6798(0x2d4)](this),await setup['initSystemConfig'](this),topology['updateTopology'](this);try{const _0x179593=await this[_0x1b6798(0x1cb)](_0x1b6798(0x211)),_0x11a6ef=await this[_0x1b6798(0x1cb)](_0x1b6798(0x1d8));_0x179593&&_0x179593[_0x1b6798(0x253)]&&_0x11a6ef&&_0x11a6ef['val']&&(Date[_0x1b6798(0x31e)]()-_0x179593['ts']<0x4*0xe10*0x3e8&&(this[_0x1b6798(0x2fb)]={'times':JSON['parse'](_0x179593[_0x1b6798(0x253)]),'sources':JSON['parse'](_0x11a6ef[_0x1b6798(0x253)])}));}catch(_0x2e1805){}if(this[_0x1b6798(0x337)]['geminiApiKey'])try{this[_0x1b6798(0x322)]=new GoogleGenerativeAI(this[_0x1b6798(0x337)][_0x1b6798(0x240)]),this[_0x1b6798(0x1e9)]=this['genAI'][_0x1b6798(0x30b)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x1b6798(0x2c5)}});}catch(_0xa6723f){this['log']['error'](_0x1b6798(0x2a0)+_0xa6723f[_0x1b6798(0x29f)]);}await setup[_0x1b6798(0x23d)](this),await this[_0x1b6798(0x22b)](),schedulers[_0x1b6798(0x2c3)](this),await this[_0x1b6798(0x269)](_0x1b6798(0x1f8),{'type':'state','common':{'name':_0x1b6798(0x2da),'type':_0x1b6798(0x25f),'role':'value','read':!![],'write':![]},'native':{}}),await this[_0x1b6798(0x269)](_0x1b6798(0x314),{'type':'state','common':{'name':_0x1b6798(0x24d),'type':_0x1b6798(0x242),'role':_0x1b6798(0x2a3),'read':!![],'write':![],'def':_0x1b6798(0x303)},'native':{}}),await this[_0x1b6798(0x269)]('analysis.activity.roomHistory',{'type':'state','common':{'name':_0x1b6798(0x1ce),'type':_0x1b6798(0x242),'role':_0x1b6798(0x2a3),'read':!![],'write':![],'def':_0x1b6798(0x309)},'native':{}}),await this[_0x1b6798(0x269)](_0x1b6798(0x2e1),{'type':_0x1b6798(0x295),'common':{'name':_0x1b6798(0x1f5),'type':_0x1b6798(0x242),'role':_0x1b6798(0x23f),'read':!![],'write':![],'def':_0x1b6798(0x251)},'native':{}}),await this['setObjectNotExistsAsync'](_0x1b6798(0x315),{'type':_0x1b6798(0x295),'common':{'name':_0x1b6798(0x2b5),'type':_0x1b6798(0x242),'role':_0x1b6798(0x23f),'read':!![],'write':![],'def':_0x1b6798(0x251)},'native':{}}),await this[_0x1b6798(0x269)]('analysis.health.todayVector',{'type':'state','common':{'name':_0x1b6798(0x2c0),'type':_0x1b6798(0x242),'role':_0x1b6798(0x2a3),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x1b6798(0x269)](_0x1b6798(0x27d),{'type':_0x1b6798(0x295),'common':{'name':_0x1b6798(0x2a6),'type':_0x1b6798(0x242),'role':_0x1b6798(0x2a3),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x1b6798(0x269)](_0x1b6798(0x254),{'type':'state','common':{'name':'General\x20Activity\x20Trend','type':'number','role':_0x1b6798(0x31a),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x1b6798(0x269)](_0x1b6798(0x211),{'type':_0x1b6798(0x295),'common':{'name':_0x1b6798(0x286),'type':_0x1b6798(0x242),'role':_0x1b6798(0x2a3),'read':!![],'write':![]},'native':{}});try{const _0x59a0c7=await this[_0x1b6798(0x1cb)](_0x1b6798(0x1f2));if(_0x59a0c7&&_0x59a0c7[_0x1b6798(0x253)]){this[_0x1b6798(0x312)]=JSON[_0x1b6798(0x300)](_0x59a0c7[_0x1b6798(0x253)]);if(this[_0x1b6798(0x23e)]){const _0x5aaac2=await this[_0x1b6798(0x1cb)](_0x1b6798(0x20f));if(_0x5aaac2&&_0x5aaac2[_0x1b6798(0x253)])this[_0x1b6798(0x28c)]=JSON[_0x1b6798(0x300)](_0x5aaac2[_0x1b6798(0x253)]);}this[_0x1b6798(0x2b1)][_0x1b6798(0x232)](_0x1b6798(0x256)+this['eventHistory']['length']+_0x1b6798(0x328));}}catch(_0x15adb3){this['eventHistory']=[];}try{const _0x370f8f=await this[_0x1b6798(0x1cb)](_0x1b6798(0x2fc));if(_0x370f8f&&_0x370f8f['val'])this[_0x1b6798(0x336)]=JSON[_0x1b6798(0x300)](_0x370f8f[_0x1b6798(0x253)]);}catch(_0x41fc44){this[_0x1b6798(0x336)]=[];}const _0x358273=this[_0x1b6798(0x336)][_0x1b6798(0x244)]>=(this[_0x1b6798(0x337)][_0x1b6798(0x1d6)]||0x7)?_0x1b6798(0x2c9)+this[_0x1b6798(0x336)][_0x1b6798(0x244)]+_0x1b6798(0x31c):'Lernphase\x20('+this['dailyDigests'][_0x1b6798(0x244)]+'/'+(this['config'][_0x1b6798(0x1d6)]||0x7)+')';await this[_0x1b6798(0x2f4)](_0x1b6798(0x202),{'val':_0x358273,'ack':!![]}),this[_0x1b6798(0x2e2)](_0x1b6798(0x1ef)),this['subscribeStates']('LTM.triggerDailyDigest'),this[_0x1b6798(0x2e2)](_0x1b6798(0x29b));this['config'][_0x1b6798(0x32d)]&&this[_0x1b6798(0x337)][_0x1b6798(0x2bb)]&&this[_0x1b6798(0x27e)]['security']&&this['subscribeForeignStates'](this[_0x1b6798(0x337)]['infrasoundSensorId']);const _0x5d034e=this[_0x1b6798(0x337)][_0x1b6798(0x2a4)];if(_0x5d034e)for(const _0x7cc1c3 of _0x5d034e){await this[_0x1b6798(0x294)](_0x7cc1c3['id']);}const _0x490507=this[_0x1b6798(0x337)]['presenceDevices'];if(_0x490507)for(const _0x5f0ffd of _0x490507){await this['subscribeForeignStatesAsync'](_0x5f0ffd);}const _0x204eea=require('node-schedule');if(this[_0x1b6798(0x277)])this[_0x1b6798(0x277)][_0x1b6798(0x329)]();this[_0x1b6798(0x277)]=_0x204eea[_0x1b6798(0x1f3)](_0x1b6798(0x2a1),()=>{const _0x262514=_0x1b6798;this[_0x262514(0x289)]();}),setTimeout(()=>this[_0x1b6798(0x24a)](),0x1388);if(this[_0x1b6798(0x2d6)])clearInterval(this['roomIntegratorTimer']);this['integrateRoomTime'](),this[_0x1b6798(0x2d6)]=setInterval(async()=>{const _0x29ef83=_0x1b6798;await this[_0x29ef83(0x218)]();},0x3c*0x3e8);if(this[_0x1b6798(0x311)])clearInterval(this[_0x1b6798(0x311)]);this['healthTrendInterval']=setInterval(()=>{const _0x5556f7=_0x1b6798;this[_0x5556f7(0x23e)]&&this['activeModules'][_0x5556f7(0x2f0)]&&this[_0x5556f7(0x1f7)]();},0x4*0x3c*0x3c*0x3e8);if(this['analysisTimer'])clearInterval(this['analysisTimer']);this[_0x1b6798(0x27e)][_0x1b6798(0x1d2)]&&(this[_0x1b6798(0x32c)]=setInterval(()=>{const _0x962844=_0x1b6798;this[_0x962844(0x1e3)]();},0xf*0x3c*0x3e8),setTimeout(()=>this['triggerEnergyPrediction'](),0x2710));if(this[_0x1b6798(0x310)])clearInterval(this['calendarCheckTimer']);this[_0x1b6798(0x337)][_0x1b6798(0x263)]&&this['activeModules'][_0x1b6798(0x1d2)]&&(this[_0x1b6798(0x310)]=setInterval(()=>{const _0x4a2bdd=_0x1b6798;automation[_0x4a2bdd(0x319)](this);},0x2*0x3c*0x3e8),setTimeout(()=>automation[_0x1b6798(0x319)](this),0x3a98));if(this[_0x1b6798(0x26a)])clearInterval(this[_0x1b6798(0x26a)]);this[_0x1b6798(0x337)][_0x1b6798(0x2d2)]&&this[_0x1b6798(0x337)][_0x1b6798(0x2d2)][_0x1b6798(0x244)]>0x0&&(this[_0x1b6798(0x26a)]=setInterval(async()=>{await this['checkWifiPresence']();},0x3c*0x3e8),setTimeout(async()=>await this[_0x1b6798(0x2f9)](),0x1388));const _0x3982ab=path['join'](__dirname,'.venv',_0x1b6798(0x247),_0x1b6798(0x1d4));pythonBridge['startService'](this,_0x3982ab);}['onUnload'](_0x31825b){const _0x5bda79=a0_0x1b58d4;if(this[_0x5bda79(0x277)])this[_0x5bda79(0x277)]['cancel']();this['saveDailyHistory']()[_0x5bda79(0x230)](()=>{const _0x1d09dc=_0x5bda79;if(this['analysisTimer'])clearInterval(this['analysisTimer']);if(this[_0x1d09dc(0x310)])clearInterval(this[_0x1d09dc(0x310)]);if(this[_0x1d09dc(0x26a)])clearInterval(this[_0x1d09dc(0x26a)]);if(this['roomIntegratorTimer'])clearInterval(this[_0x1d09dc(0x2d6)]);recorder[_0x1d09dc(0x2b6)](this),pythonBridge[_0x1d09dc(0x20e)](this),_0x31825b();});}async[a0_0x1b58d4(0x24a)](){const _0x508409=a0_0x1b58d4;if(!this[_0x508409(0x312)]||this[_0x508409(0x312)][_0x508409(0x244)]===0x0){this[_0x508409(0x2b1)][_0x508409(0x1cd)](_0x508409(0x28d));return;}this[_0x508409(0x2b1)][_0x508409(0x232)]('‚Ü∫\x20Replaying\x20'+this['eventHistory'][_0x508409(0x244)]+_0x508409(0x268));const _0x440f5b=new Date()[_0x508409(0x245)](0x0,0x0,0x0,0x0),_0x2f24f1=_0x508409(0x332);let _0xcd040={'history':{},'date':new Date()[_0x508409(0x1db)]()};const _0x2deac2='analysis.health.todayVector',_0x472f4a='analysis.health.todayRoomDetails';let _0x35c694=new Array(0x30)[_0x508409(0x210)](0x0),_0x1616be=Array[_0x508409(0x2e8)]({'length':0x30},()=>[]);this[_0x508409(0x312)][_0x508409(0x338)](_0x712ab9=>{const _0x4d2e46=_0x508409;if(_0x712ab9[_0x4d2e46(0x201)]>=_0x440f5b){if(recorder['isRelevantActivity'](_0x712ab9[_0x4d2e46(0x32b)],_0x712ab9[_0x4d2e46(0x31a)])){const _0x303e3f=new Date(_0x712ab9[_0x4d2e46(0x201)]),_0x468c13=_0x303e3f[_0x4d2e46(0x243)]()*0x2+(_0x303e3f[_0x4d2e46(0x1ee)]()>=0x1e?0x1:0x0);if(_0x468c13<0x30){_0x35c694[_0x468c13]++;const _0x19ce2e=_0x712ab9[_0x4d2e46(0x221)]||_0x712ab9['name']||'?';let _0x3ffc90=_0x1616be[_0x468c13];!_0x3ffc90[_0x4d2e46(0x24b)](_0x19ce2e)&&_0x3ffc90[_0x4d2e46(0x265)](_0x19ce2e);}const _0x4b778f=_0x303e3f[_0x4d2e46(0x243)]();let _0x26ef85=_0x712ab9[_0x4d2e46(0x221)]||_0x4d2e46(0x2d7);const _0x409063=(this[_0x4d2e46(0x337)][_0x4d2e46(0x2a4)]||[])[_0x4d2e46(0x2a5)](_0x4f22d5=>_0x4f22d5[_0x4d2e46(0x221)]===_0x26ef85);if(_0x409063)_0x26ef85=_0x409063[_0x4d2e46(0x221)];if(!_0xcd040[_0x4d2e46(0x2f5)][_0x26ef85])_0xcd040['history'][_0x26ef85]=new Array(0x18)[_0x4d2e46(0x210)](0x0);if(_0xcd040[_0x4d2e46(0x2f5)][_0x26ef85][_0x4b778f]<0x3c)_0xcd040[_0x4d2e46(0x2f5)][_0x26ef85][_0x4b778f]++;}}});const _0x1fd096=await this['getStateAsync'](_0x2f24f1);(!_0x1fd096||!_0x1fd096['val']||_0x1fd096['val']==='{}'||_0x1fd096[_0x508409(0x253)][_0x508409(0x24b)](_0x508409(0x2cb)))&&await this[_0x508409(0x2f4)](_0x2f24f1,{'val':JSON[_0x508409(0x2f2)](_0xcd040),'ack':!![]}),await this[_0x508409(0x2f4)](_0x2deac2,{'val':JSON[_0x508409(0x2f2)](_0x35c694),'ack':!![]}),await this[_0x508409(0x2f4)](_0x472f4a,{'val':JSON[_0x508409(0x2f2)](_0x1616be),'ack':!![]}),this[_0x508409(0x2b1)][_0x508409(0x232)]('‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.');}async[a0_0x1b58d4(0x289)](){const _0x1d3321=a0_0x1b58d4;if(!this[_0x1d3321(0x27e)][_0x1d3321(0x2f0)])return;const _0x2b4d2e=new Date()[_0x1d3321(0x270)]()['split']('T')[0x0];this[_0x1d3321(0x2b1)][_0x1d3321(0x2ef)](_0x1d3321(0x235)+_0x2b4d2e+_0x1d3321(0x1ff));try{const [_0x478df3,_0x158310,_0x1acff5,_0xa8cbf7,_0x1c7957,_0x323d74,_0x5877af]=await Promise['all']([this['getStateAsync']('analysis.activity.roomHistory'),this[_0x1d3321(0x1cb)](_0x1d3321(0x2e1)),this[_0x1d3321(0x1cb)](_0x1d3321(0x315)),this[_0x1d3321(0x1cb)](_0x1d3321(0x2fa)),this[_0x1d3321(0x1cb)](_0x1d3321(0x264)),this[_0x1d3321(0x1cb)](_0x1d3321(0x254)),this[_0x1d3321(0x1cb)]('analysis.health.gaitSpeed')]),_0x4eea69=new Date()[_0x1d3321(0x245)](0x0,0x0,0x0,0x0),_0x2fb91c=this[_0x1d3321(0x312)][_0x1d3321(0x233)](_0x13f194=>_0x13f194[_0x1d3321(0x201)]>=_0x4eea69&&(_0x13f194['name']['toLowerCase']()[_0x1d3321(0x24b)](_0x1d3321(0x272))||_0x13f194[_0x1d3321(0x229)][_0x1d3321(0x2b4)]()[_0x1d3321(0x24b)]('terrasse'))&&(_0x13f194['value']===!![]||_0x13f194['value']===_0x1d3321(0x273)))[_0x1d3321(0x244)];let _0xa560c9=0x55;if(_0x323d74&&_0x323d74['val']!==undefined)_0xa560c9=Math[_0x1d3321(0x22f)](0x64,Math[_0x1d3321(0x2ea)](0x14,Math[_0x1d3321(0x2d1)](0x50+Number(_0x323d74[_0x1d3321(0x253)])*0x5)));const _0x1d7b0c=this['eventHistory'][_0x1d3321(0x233)](_0x17d017=>_0x17d017[_0x1d3321(0x201)]>=_0x4eea69),_0x3caa1c={'date':_0x2b4d2e,'timestamp':Date['now'](),'roomHistory':_0x478df3?.[_0x1d3321(0x253)]?JSON[_0x1d3321(0x300)](_0x478df3[_0x1d3321(0x253)]):{},'geminiNight':_0x158310?.[_0x1d3321(0x253)]||'Keine\x20Daten','geminiDay':_0x1acff5?.['val']||_0x1d3321(0x2e0),'anomalyScore':_0xa8cbf7?.['val']||0.1,'todayVector':_0x1c7957?.[_0x1d3321(0x253)]?JSON[_0x1d3321(0x300)](_0x1c7957[_0x1d3321(0x253)]):new Array(0x30)['fill'](0x0),'batteryLevel':_0xa560c9,'freshAirCount':_0x2fb91c,'gaitSpeed':_0x5877af?.[_0x1d3321(0x253)]!==undefined&&_0x5877af?.[_0x1d3321(0x253)]!==null?Number(_0x5877af[_0x1d3321(0x253)]):null,'eventHistory':_0x1d7b0c},_0x31d0dd=utils['getAbsoluteDefaultDataDir'](),_0x18baa0=path['join'](_0x31d0dd,_0x1d3321(0x1e8),_0x1d3321(0x2f5));if(!fs[_0x1d3321(0x321)](_0x18baa0))fs[_0x1d3321(0x29a)](_0x18baa0,{'recursive':!![]});const _0xa84f2b=path[_0x1d3321(0x28a)](_0x18baa0,_0x2b4d2e+'.json');fs[_0x1d3321(0x216)](_0xa84f2b,JSON[_0x1d3321(0x2f2)](_0x3caa1c)),this['log'][_0x1d3321(0x232)](_0x1d3321(0x334)+_0xa84f2b);}catch(_0x76309e){this['log'][_0x1d3321(0x318)](_0x1d3321(0x1cf)+_0x76309e['message']);}}async[a0_0x1b58d4(0x218)](){const _0x58529b=a0_0x1b58d4;if(!this['isPresent'])return;try{let _0x50736a=null;try{const _0x5e48ee=await this['getStateAsync'](_0x58529b(0x308)),_0xd3cdd7=await this[_0x58529b(0x1cb)](_0x58529b(0x1de));if(_0x5e48ee&&_0x5e48ee[_0x58529b(0x253)]&&_0xd3cdd7&&_0xd3cdd7[_0x58529b(0x253)]&&_0xd3cdd7[_0x58529b(0x253)]>0.3){if(_0x5e48ee[_0x58529b(0x253)]!==_0x58529b(0x2d7)&&_0x5e48ee[_0x58529b(0x253)]!==_0x58529b(0x24c))_0x50736a=_0x5e48ee[_0x58529b(0x253)];}}catch(_0x4acea0){}if(!_0x50736a){const _0x4013f4=this[_0x58529b(0x337)][_0x58529b(0x2a4)]||[];for(const _0x37d8a5 of _0x4013f4){if(_0x37d8a5['type']===_0x58529b(0x25a)&&_0x37d8a5[_0x58529b(0x221)])try{const _0x236f03=await this['getForeignStateAsync'](_0x37d8a5['id']);if(_0x236f03&&(_0x236f03[_0x58529b(0x253)]===!![]||_0x236f03[_0x58529b(0x253)]==='on'||_0x236f03[_0x58529b(0x253)]===0x1)){_0x50736a=_0x37d8a5[_0x58529b(0x221)];break;}}catch(_0x43eebe){}}}if(!_0x50736a)return;const _0x583bd3=this[_0x58529b(0x337)]['devices']||[];let _0xb770ad=_0x50736a;const _0x5f39e0=_0x583bd3['find'](_0x23ea14=>_0x23ea14[_0x58529b(0x221)]&&_0x23ea14[_0x58529b(0x221)]['toLowerCase']()===_0x50736a['toLowerCase']());if(_0x5f39e0)_0xb770ad=_0x5f39e0['location'];const _0x3fab0e=_0x58529b(0x332),_0x1ef568=await this[_0x58529b(0x1cb)](_0x3fab0e),_0x4cfacb=new Date()[_0x58529b(0x1db)]();let _0x2f6008={'history':{},'date':_0x4cfacb};if(_0x1ef568&&_0x1ef568[_0x58529b(0x253)])try{_0x2f6008=JSON['parse'](_0x1ef568[_0x58529b(0x253)]);}catch(_0x44061d){}_0x2f6008[_0x58529b(0x335)]!==_0x4cfacb&&(_0x2f6008[_0x58529b(0x2f5)]={},_0x2f6008[_0x58529b(0x335)]=_0x4cfacb);if(!_0x2f6008[_0x58529b(0x2f5)][_0xb770ad])_0x2f6008[_0x58529b(0x2f5)][_0xb770ad]=new Array(0x18)[_0x58529b(0x210)](0x0);const _0x29e610=new Date()[_0x58529b(0x243)]();if(_0x2f6008[_0x58529b(0x2f5)][_0xb770ad][_0x29e610]<0x3c)_0x2f6008[_0x58529b(0x2f5)][_0xb770ad][_0x29e610]++;await this[_0x58529b(0x2f4)](_0x3fab0e,{'val':JSON[_0x58529b(0x2f2)](_0x2f6008),'ack':!![]});}catch(_0x36886b){this[_0x58529b(0x2b1)]['warn'](_0x58529b(0x30d)+_0x36886b[_0x58529b(0x29f)]);}}async['onMessage'](_0x307d87){const _0x2b59f1=a0_0x1b58d4;if(typeof _0x307d87===_0x2b59f1(0x26b)&&_0x307d87[_0x2b59f1(0x29f)]){if(_0x307d87[_0x2b59f1(0x2c4)]===_0x2b59f1(0x2ad)){const _0x3e864f=_0x307d87[_0x2b59f1(0x29f)]['date'],_0x5deb18=utils[_0x2b59f1(0x1f4)](),_0x5487d5=path[_0x2b59f1(0x28a)](_0x5deb18,'cogni-living',_0x2b59f1(0x2f5),_0x3e864f+'.json');if(fs[_0x2b59f1(0x321)](_0x5487d5))try{const _0x335f1a=JSON[_0x2b59f1(0x300)](fs[_0x2b59f1(0x20c)](_0x5487d5,_0x2b59f1(0x2d8)));this[_0x2b59f1(0x2ca)](_0x307d87['from'],_0x307d87[_0x2b59f1(0x2c4)],{'success':!![],'data':_0x335f1a},_0x307d87[_0x2b59f1(0x258)]);}catch(_0x2781a3){this[_0x2b59f1(0x2ca)](_0x307d87[_0x2b59f1(0x2e8)],_0x307d87[_0x2b59f1(0x2c4)],{'success':![],'error':'Corrupt'},_0x307d87[_0x2b59f1(0x258)]);}else this[_0x2b59f1(0x2ca)](_0x307d87[_0x2b59f1(0x2e8)],_0x307d87[_0x2b59f1(0x2c4)],{'success':![],'error':_0x2b59f1(0x1fe)},_0x307d87[_0x2b59f1(0x258)]);}else{if(_0x307d87['command']===_0x2b59f1(0x290)){const _0x2276db=this[_0x2b59f1(0x336)][_0x2b59f1(0x244)];let _0x2d835b=new Array(0x30)[_0x2b59f1(0x210)](0x0),_0xb98d33=Array[_0x2b59f1(0x2e8)]({'length':0x30},()=>[]);try{const _0x5485f9=await this[_0x2b59f1(0x1cb)](_0x2b59f1(0x264));if(_0x5485f9&&_0x5485f9[_0x2b59f1(0x253)])_0x2d835b=JSON[_0x2b59f1(0x300)](_0x5485f9[_0x2b59f1(0x253)]);const _0x28246e=await this[_0x2b59f1(0x1cb)]('analysis.health.todayRoomDetails');if(_0x28246e&&_0x28246e[_0x2b59f1(0x253)])_0xb98d33=JSON[_0x2b59f1(0x300)](_0x28246e[_0x2b59f1(0x253)]);}catch(_0x2b38de){}let _0x511db5=new Array(0x30)['fill'](0x0);try{const _0x299f48=new Date();_0x299f48['setDate'](_0x299f48['getDate']()-0x1);const _0x2bbabc=_0x299f48[_0x2b59f1(0x270)]()[_0x2b59f1(0x2cc)]('T')[0x0],_0x488802=utils[_0x2b59f1(0x1f4)](),_0x348ca3=path[_0x2b59f1(0x28a)](_0x488802,'cogni-living',_0x2b59f1(0x2f5),_0x2bbabc+_0x2b59f1(0x2e5));if(fs['existsSync'](_0x348ca3)){const _0x350fc8=JSON['parse'](fs[_0x2b59f1(0x20c)](_0x348ca3,'utf8'));if(_0x350fc8&&_0x350fc8[_0x2b59f1(0x223)])_0x511db5=_0x350fc8[_0x2b59f1(0x223)];}}catch(_0x1ddb81){}let _0xeb1011={'today':{},'yesterday':{}};try{const _0x2bdffe=await this[_0x2b59f1(0x1cb)]('analysis.activity.roomStats');if(_0x2bdffe&&_0x2bdffe[_0x2b59f1(0x253)])_0xeb1011=JSON['parse'](_0x2bdffe[_0x2b59f1(0x253)]);}catch(_0xece7d6){}let _0xfe9cee=null;try{const _0x4a6e17=await this[_0x2b59f1(0x1cb)](_0x2b59f1(0x254));if(_0x4a6e17)_0xfe9cee=_0x4a6e17[_0x2b59f1(0x253)];}catch(_0x487abd){}if(_0xfe9cee===undefined||_0xfe9cee===null){const _0x4317de=_0x2d835b[_0x2b59f1(0x2f8)]((_0x4f77ca,_0x34c1cb)=>_0x4f77ca+_0x34c1cb,0x0),_0x50a4d0=Math['min'](0x2,Math[_0x2b59f1(0x2ea)](-0x2,(0x64-_0x4317de)/0x32));_0xfe9cee=_0x50a4d0;}let _0x10e412=![],_0xa28c77='',_0x108668='',_0x49725c='';try{const _0x9d2622=await this[_0x2b59f1(0x1cb)](_0x2b59f1(0x21c));if(_0x9d2622&&_0x9d2622[_0x2b59f1(0x253)]){_0x10e412=!![];const _0x37dec1=await this[_0x2b59f1(0x1cb)](_0x2b59f1(0x30c));_0xa28c77=_0x37dec1?_0x37dec1[_0x2b59f1(0x253)]:'';const _0x25d726=await this['getStateAsync']('analysis.automation.targetId');_0x108668=_0x25d726?_0x25d726['val']:'';const _0x2c1e01=await this[_0x2b59f1(0x1cb)](_0x2b59f1(0x298));_0x49725c=_0x2c1e01?_0x2c1e01[_0x2b59f1(0x253)]:'';}}catch(_0x4ddc42){}const _0x9b416b=await this['checkSolarCondition'](),_0x53e021=(this[_0x2b59f1(0x337)]['devices']||[])['some'](_0x15f2c6=>_0x15f2c6[_0x2b59f1(0x1f0)]),_0x20d058=_0x9b416b&&_0x53e021;let _0x239f2='';try{const _0x23b233=await this['getStateAsync'](_0x2b59f1(0x1fc));if(_0x23b233&&_0x23b233['val'])_0x239f2=_0x23b233['val'];}catch(_0x38fa84){}this[_0x2b59f1(0x2ca)](_0x307d87[_0x2b59f1(0x2e8)],_0x307d87['command'],{'success':!![],'eventHistory':this[_0x2b59f1(0x312)][_0x2b59f1(0x1dc)](0x0,0x7d0),'stats':{'digestCount':_0x2276db,'isPresent':this[_0x2b59f1(0x2cf)],'hourlyActivity':_0x2d835b,'hourlyDetails':_0xb98d33,'yesterdayActivity':_0x511db5,'solarActive':_0x20d058,'presenceWho':_0x239f2,'roomStats':_0xeb1011,'activityTrend':_0xfe9cee,'modules':this[_0x2b59f1(0x27e)]},'automation':{'detected':_0x10e412,'description':_0xa28c77,'targetId':_0x108668,'targetValue':_0x49725c}},_0x307d87['callback']);}else{if(_0x307d87[_0x2b59f1(0x2c4)]==='checkThermostats')try{const _0x525ebe=await automation[_0x2b59f1(0x327)](this);this['sendTo'](_0x307d87[_0x2b59f1(0x2e8)],_0x307d87[_0x2b59f1(0x2c4)],{'success':!![],'results':_0x525ebe},_0x307d87[_0x2b59f1(0x258)]);}catch(_0x49afaa){this[_0x2b59f1(0x2ca)](_0x307d87['from'],_0x307d87[_0x2b59f1(0x2c4)],{'success':![],'error':_0x49afaa['message']},_0x307d87[_0x2b59f1(0x258)]);}else{if(_0x307d87[_0x2b59f1(0x2c4)]==='scanDevices')try{const _0x4bac47=await scanner['scanForDevices'](this,_0x307d87[_0x2b59f1(0x29f)]||{});this[_0x2b59f1(0x2ca)](_0x307d87[_0x2b59f1(0x2e8)],_0x307d87[_0x2b59f1(0x2c4)],{'success':!![],'devices':_0x4bac47},_0x307d87[_0x2b59f1(0x258)]);}catch(_0x4c3ac9){}else{if(_0x307d87[_0x2b59f1(0x2c4)]===_0x2b59f1(0x285)){const _0x48ea4f=await this['getForeignObjectsAsync'](_0x2b59f1(0x252),_0x2b59f1(0x222)),_0x12ccb7=[];if(_0x48ea4f)for(const _0x3f64e8 in _0x48ea4f){let _0x926f80=_0x48ea4f[_0x3f64e8][_0x2b59f1(0x2a2)][_0x2b59f1(0x229)];if(_0x926f80&&typeof _0x926f80==='object')_0x926f80=_0x926f80['de']||_0x926f80['en']||Object[_0x2b59f1(0x278)](_0x926f80)[0x0]||JSON[_0x2b59f1(0x2f2)](_0x926f80);_0x12ccb7['push']({'id':_0x3f64e8,'name':String(_0x926f80||_0x3f64e8)});}const _0x38601b=await this[_0x2b59f1(0x21a)](_0x2b59f1(0x2fd),_0x2b59f1(0x222)),_0x16cdb3=[];if(_0x38601b)for(const _0x21769e in _0x38601b){let _0x215b2f=_0x38601b[_0x21769e][_0x2b59f1(0x2a2)][_0x2b59f1(0x229)];if(_0x215b2f&&typeof _0x215b2f===_0x2b59f1(0x26b))_0x215b2f=_0x215b2f['de']||_0x215b2f['en']||Object['values'](_0x215b2f)[0x0]||JSON[_0x2b59f1(0x2f2)](_0x215b2f);_0x16cdb3[_0x2b59f1(0x265)](String(_0x215b2f||_0x21769e[_0x2b59f1(0x2cc)]('.')[_0x2b59f1(0x2ff)]()));}this[_0x2b59f1(0x2ca)](_0x307d87[_0x2b59f1(0x2e8)],_0x307d87[_0x2b59f1(0x2c4)],{'success':!![],'enums':_0x12ccb7,'rooms':_0x16cdb3},_0x307d87[_0x2b59f1(0x258)]);}else{if(_0x307d87['command']==='getCalendarNames')try{const _0x5d0751=await this[_0x2b59f1(0x2ba)]('system',_0x2b59f1(0x1f9),{'startkey':_0x2b59f1(0x2ab),'endkey':_0x2b59f1(0x261)}),_0x270c13=new Set();if(_0x5d0751&&_0x5d0751[_0x2b59f1(0x2f7)])for(const _0x4c9fbd of _0x5d0751[_0x2b59f1(0x2f7)]){const _0x4721f2=_0x4c9fbd['id'][_0x2b59f1(0x325)]('system.adapter.',''),_0x50e7c8=await this[_0x2b59f1(0x2b9)](_0x4721f2+'.data.table');let _0x923221=![];if(_0x50e7c8&&_0x50e7c8[_0x2b59f1(0x253)]){const _0x1dce59=typeof _0x50e7c8['val']===_0x2b59f1(0x242)?JSON[_0x2b59f1(0x300)](_0x50e7c8[_0x2b59f1(0x253)]):_0x50e7c8[_0x2b59f1(0x253)];Array[_0x2b59f1(0x217)](_0x1dce59)&&_0x1dce59[_0x2b59f1(0x338)](_0x5993e3=>{const _0x4a0b2d=_0x2b59f1;_0x5993e3[_0x4a0b2d(0x307)]&&(_0x270c13[_0x4a0b2d(0x2df)](_0x5993e3[_0x4a0b2d(0x307)]),_0x923221=!![]);});}!_0x923221&&_0x270c13['add'](_0x4721f2);}const _0x226cb1=Array[_0x2b59f1(0x2e8)](_0x270c13);if(_0x226cb1[_0x2b59f1(0x244)]===0x0)_0x226cb1['push']('Standard');this['sendTo'](_0x307d87['from'],_0x307d87[_0x2b59f1(0x2c4)],{'success':!![],'names':_0x226cb1},_0x307d87[_0x2b59f1(0x258)]);}catch(_0x478adb){this[_0x2b59f1(0x2ca)](_0x307d87[_0x2b59f1(0x2e8)],_0x307d87[_0x2b59f1(0x2c4)],{'success':![],'error':_0x2b59f1(0x25e)+_0x478adb['message']},_0x307d87['callback']);}else{if(_0x307d87[_0x2b59f1(0x2c4)]===_0x2b59f1(0x2d3))try{await automation['updateSchedulePreview'](this),this[_0x2b59f1(0x2ca)](_0x307d87[_0x2b59f1(0x2e8)],_0x307d87[_0x2b59f1(0x2c4)],{'success':!![]},_0x307d87['callback']);}catch(_0x4fc67d){this[_0x2b59f1(0x2b1)][_0x2b59f1(0x1cd)](_0x2b59f1(0x2af)+_0x4fc67d['message']),this[_0x2b59f1(0x2ca)](_0x307d87[_0x2b59f1(0x2e8)],_0x307d87[_0x2b59f1(0x2c4)],{'success':![],'error':_0x4fc67d[_0x2b59f1(0x29f)]},_0x307d87[_0x2b59f1(0x258)]);}else{if(_0x307d87[_0x2b59f1(0x2c4)]==='updateTopologyMatrix')try{const _0x2c6123=_0x307d87['message'][_0x2b59f1(0x234)];if(!_0x2c6123||!Array[_0x2b59f1(0x217)](_0x2c6123))throw new Error('Invalid\x20matrix\x20data');const _0x171196=await this[_0x2b59f1(0x1cb)](_0x2b59f1(0x27a));if(_0x171196&&_0x171196[_0x2b59f1(0x253)]){const _0x527e55=JSON[_0x2b59f1(0x300)](_0x171196['val']);_0x527e55[_0x2b59f1(0x234)]=_0x2c6123,_0x527e55['updated']=Date[_0x2b59f1(0x31e)](),await this['setStateAsync'](_0x2b59f1(0x27a),{'val':JSON[_0x2b59f1(0x2f2)](_0x527e55),'ack':!![]}),this[_0x2b59f1(0x2b1)][_0x2b59f1(0x2ef)](_0x2b59f1(0x29d)),this[_0x2b59f1(0x2ca)](_0x307d87[_0x2b59f1(0x2e8)],_0x307d87[_0x2b59f1(0x2c4)],{'success':!![]},_0x307d87[_0x2b59f1(0x258)]);}else throw new Error(_0x2b59f1(0x279));}catch(_0x1e1655){this[_0x2b59f1(0x2b1)][_0x2b59f1(0x1cd)](_0x2b59f1(0x30f)+_0x1e1655[_0x2b59f1(0x29f)]),this['sendTo'](_0x307d87[_0x2b59f1(0x2e8)],_0x307d87[_0x2b59f1(0x2c4)],{'success':![],'error':_0x1e1655[_0x2b59f1(0x29f)]},_0x307d87['callback']);}else{if(_0x307d87[_0x2b59f1(0x2c4)]==='pythonBridge')try{const _0x541456=_0x307d87[_0x2b59f1(0x29f)][_0x2b59f1(0x2c4)],_0x2dbe32=_0x307d87['message'];this[_0x2b59f1(0x2b1)]['debug'](_0x2b59f1(0x2c6)+_0x541456),pythonBridge[_0x2b59f1(0x219)](this,_0x541456,_0x2dbe32,_0x8b26d1=>{const _0x1cd8b8=_0x2b59f1;this['sendTo'](_0x307d87[_0x1cd8b8(0x2e8)],_0x307d87[_0x1cd8b8(0x2c4)],_0x8b26d1,_0x307d87[_0x1cd8b8(0x258)]);});}catch(_0x51e89b){this[_0x2b59f1(0x2b1)][_0x2b59f1(0x1cd)](_0x2b59f1(0x299)+_0x51e89b[_0x2b59f1(0x29f)]),this[_0x2b59f1(0x2ca)](_0x307d87[_0x2b59f1(0x2e8)],_0x307d87[_0x2b59f1(0x2c4)],{'type':_0x2b59f1(0x26f),'payload':_0x51e89b[_0x2b59f1(0x29f)]},_0x307d87[_0x2b59f1(0x258)]);}else{if(_0x307d87['command']===_0x2b59f1(0x320))try{const _0x2ea382=_0x307d87[_0x2b59f1(0x29f)]?_0x307d87[_0x2b59f1(0x29f)][_0x2b59f1(0x296)]:'';if(!_0x2ea382)throw new Error(_0x2b59f1(0x2f6));const _0x5b2953=new GoogleGenerativeAI(_0x2ea382),_0x109297=_0x5b2953[_0x2b59f1(0x30b)]({'model':GEMINI_MODEL}),_0xa8b74c=await _0x109297[_0x2b59f1(0x25c)](_0x2b59f1(0x23b)),_0x366188=await _0xa8b74c[_0x2b59f1(0x304)],_0x29b215=_0x366188[_0x2b59f1(0x23f)]();this[_0x2b59f1(0x2ca)](_0x307d87['from'],_0x307d87['command'],{'success':!![],'message':_0x2b59f1(0x21e)+_0x29b215[_0x2b59f1(0x21f)](0x0,0x14)+'...'},_0x307d87[_0x2b59f1(0x258)]);}catch(_0x1da26e){this['sendTo'](_0x307d87[_0x2b59f1(0x2e8)],_0x307d87[_0x2b59f1(0x2c4)],{'success':![],'message':_0x1da26e[_0x2b59f1(0x29f)]},_0x307d87[_0x2b59f1(0x258)]);}else{if(_0x307d87['command']==='testContext')try{const _0x1ebd1b=await this['checkSolarCondition'](),_0x564baa=await this[_0x2b59f1(0x2ba)](_0x2b59f1(0x2c1),_0x2b59f1(0x1f9),{'startkey':_0x2b59f1(0x2ab),'endkey':_0x2b59f1(0x261)}),_0x2ac5e9=_0x564baa&&_0x564baa[_0x2b59f1(0x2f7)]?_0x564baa[_0x2b59f1(0x2f7)]['length']:0x0;this['sendTo'](_0x307d87[_0x2b59f1(0x2e8)],_0x307d87[_0x2b59f1(0x2c4)],{'success':!![],'weather':'Sonne:\x20'+_0x1ebd1b+',\x20Temp:\x20'+(this[_0x2b59f1(0x2c8)][this[_0x2b59f1(0x337)]['outdoorSensorId']]||'?')+'¬∞C','calendar':_0x2ac5e9+_0x2b59f1(0x22e)},_0x307d87[_0x2b59f1(0x258)]);}catch(_0x54150a){this[_0x2b59f1(0x2ca)](_0x307d87[_0x2b59f1(0x2e8)],_0x307d87['command'],{'success':![]},_0x307d87[_0x2b59f1(0x258)]);}}}}}}}}}}}}}[a0_0x1b58d4(0x1f7)](){const _0x289e6d=a0_0x1b58d4;if(!this['activeModules'][_0x289e6d(0x2f0)])return;this[_0x289e6d(0x2b1)]['debug'](_0x289e6d(0x2c7));try{const _0x3aba8d=this[_0x289e6d(0x28c)]||[];pythonBridge['send'](this,_0x289e6d(0x31f),{'events':_0x3aba8d});}catch(_0x2b9d07){this[_0x289e6d(0x2b1)][_0x289e6d(0x1cd)](_0x289e6d(0x32e));}}async[a0_0x1b58d4(0x2be)](_0x341186,_0x59f33a){const _0x167047=a0_0x1b58d4;if(!_0x59f33a||this[_0x167047(0x25d)])return;if(_0x341186[_0x167047(0x24b)](_0x167047(0x212))&&_0x341186['endsWith']('communicate.request')&&_0x59f33a[_0x167047(0x253)])return;if(this[_0x167047(0x337)]['infrasoundEnabled']&&_0x341186===this[_0x167047(0x337)]['infrasoundSensorId']&&this[_0x167047(0x27e)]['security']){this['handleInfrasound'](_0x59f33a[_0x167047(0x253)]);return;}if(_0x59f33a[_0x167047(0x1e0)]&&_0x341186[_0x167047(0x22c)](_0x167047(0x2d5)))return;if(_0x341186===this['namespace']+_0x167047(0x331)){if(_0x59f33a[_0x167047(0x253)]&&Object[_0x167047(0x278)](setup[_0x167047(0x241)])[_0x167047(0x24b)](_0x59f33a[_0x167047(0x253)])){this[_0x167047(0x324)]=_0x59f33a[_0x167047(0x253)];if(_0x59f33a[_0x167047(0x253)]===setup[_0x167047(0x241)][_0x167047(0x271)])await recorder[_0x167047(0x237)](this,![]);else await recorder[_0x167047(0x237)](this,!![]);if(this[_0x167047(0x23e)]){let _0x1efd6c=![],_0x3c83b2=0x0,_0x37067e=_0x167047(0x236);if(this[_0x167047(0x324)]===_0x167047(0x2f1))_0x1efd6c=!![],_0x3c83b2=0x168,_0x37067e='Party\x20Mode';else this[_0x167047(0x324)]===_0x167047(0x249)&&(_0x1efd6c=!![],_0x3c83b2=0x5a0,_0x37067e=_0x167047(0x1dd));pythonBridge[_0x167047(0x219)](this,_0x167047(0x26c),{'active':_0x1efd6c,'duration':_0x3c83b2,'label':_0x37067e}),await this['setStateAsync']('analysis.security.learningStatus',{'val':JSON[_0x167047(0x2f2)]({'active':_0x1efd6c,'label':_0x37067e,'timestamp':Date['now']()}),'ack':!![]});}}if(!_0x59f33a[_0x167047(0x1e0)])this[_0x167047(0x2d9)](_0x341186,{'val':this[_0x167047(0x324)],'ack':!![]});return;}if(_0x341186[_0x167047(0x22c)](_0x167047(0x1d8))&&_0x59f33a[_0x167047(0x1e0)])this[_0x167047(0x306)](_0x59f33a['val']);if(_0x341186['endsWith']('analysis.energy.warmupTimes')&&_0x59f33a[_0x167047(0x1e0)]&&this[_0x167047(0x27e)][_0x167047(0x1d2)])automation[_0x167047(0x319)](this);if(!_0x59f33a[_0x167047(0x1e0)]){if(_0x341186['includes'](_0x167047(0x1ef))&&_0x59f33a['val']){this[_0x167047(0x2d9)](_0x341186,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this);return;}if(_0x341186[_0x167047(0x24b)]('triggerDailyDigest')&&_0x59f33a[_0x167047(0x253)]){this[_0x167047(0x2d9)](_0x341186,{'val':![],'ack':!![]});if(this[_0x167047(0x23e)])aiAgent[_0x167047(0x20b)](this,pythonBridge);return;}if(_0x341186[_0x167047(0x24b)](_0x167047(0x31d))&&_0x59f33a[_0x167047(0x253)]){this['setState'](_0x341186,{'val':![],'ack':!![]}),aiAgent[_0x167047(0x2b3)](this);return;}if(_0x341186[_0x167047(0x24b)]('automation.triggerAction')&&_0x59f33a['val']){this[_0x167047(0x2d9)](_0x341186,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this);return;}if(_0x341186[_0x167047(0x24b)]('analysis.training.triggerSecurity')&&_0x59f33a['val']){this['setState'](_0x341186,{'val':![],'ack':!![]});if(this[_0x167047(0x23e)])try{const _0x312d32=await this['getStateAsync'](_0x167047(0x23a));if(_0x312d32&&_0x312d32[_0x167047(0x253)]){const _0x8071fe=JSON[_0x167047(0x300)](_0x312d32[_0x167047(0x253)]);this[_0x167047(0x2f4)]('analysis.training.status',{'val':_0x167047(0x280),'ack':!![]}),pythonBridge[_0x167047(0x219)](this,'TRAIN_SECURITY',{'sequences':_0x8071fe});}}catch(_0x3c9358){}return;}if(_0x341186['includes'](_0x167047(0x29b))&&_0x59f33a[_0x167047(0x253)]){this['setState'](_0x341186,{'val':![],'ack':!![]});try{aiAgent[_0x167047(0x275)](this,_0x167047(0x1d3)),setTimeout(()=>aiAgent['generateHealthReport'](this,_0x167047(0x2b8)),0x2ee0);if(this[_0x167047(0x23e)]){this[_0x167047(0x1f7)]();const _0x3149df=await this[_0x167047(0x1cb)](_0x167047(0x2fc));if(_0x3149df&&_0x3149df[_0x167047(0x253)])pythonBridge[_0x167047(0x219)](this,_0x167047(0x1df),{'digests':JSON['parse'](_0x3149df['val'])});}}catch(_0x5d7796){this[_0x167047(0x2b1)][_0x167047(0x1cd)](_0x167047(0x287)+_0x5d7796[_0x167047(0x29f)]);}return;}if(_0x341186[_0x167047(0x24b)](_0x167047(0x316))&&_0x59f33a[_0x167047(0x253)]){this['setState'](_0x341186,{'val':![],'ack':!![]}),await this[_0x167047(0x1e3)]();return;}if(_0x341186[_0x167047(0x24b)](_0x167047(0x2bf))&&_0x59f33a[_0x167047(0x253)]){this['setState'](_0x341186,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x2ffa36=await this[_0x167047(0x1cb)](_0x167047(0x20f));if(_0x2ffa36&&_0x2ffa36[_0x167047(0x253)]){const _0x20c673={};if(this['config']['devices'])this[_0x167047(0x337)][_0x167047(0x2a4)][_0x167047(0x338)](_0x3ee08c=>{const _0x23ee86=_0x167047;if(_0x3ee08c['id']&&_0x3ee08c[_0x23ee86(0x32b)])_0x20c673[_0x3ee08c['id']]=_0x3ee08c[_0x23ee86(0x32b)];});pythonBridge[_0x167047(0x219)](this,'TRAIN_COMFORT',{'events':JSON[_0x167047(0x300)](_0x2ffa36[_0x167047(0x253)]),'deviceMap':_0x20c673});}}catch(_0x3a5eee){}return;}if(_0x341186[_0x167047(0x24b)](_0x167047(0x2ae))&&_0x59f33a[_0x167047(0x253)]){this[_0x167047(0x2d9)](_0x341186,{'val':![],'ack':!![]}),topology[_0x167047(0x2e3)](this);if(this[_0x167047(0x23e)])try{const _0x252844=await this[_0x167047(0x1cb)]('LTM.trainingData.sequences');if(_0x252844&&_0x252844[_0x167047(0x253)])pythonBridge[_0x167047(0x219)](this,_0x167047(0x2aa),{'sequences':JSON[_0x167047(0x300)](_0x252844[_0x167047(0x253)])});}catch(_0xf1c99){}return;}}const _0x4eaed4=(this[_0x167047(0x337)][_0x167047(0x2a4)]||[])['find'](_0x489af1=>_0x489af1['id']===_0x341186);if(_0x4eaed4){const _0x23a774=await recorder[_0x167047(0x22d)](this,_0x341186,_0x59f33a,_0x4eaed4);_0x23a774&&this[_0x167047(0x2d9)]('analysis.visualization.pulse',{'val':Date[_0x167047(0x31e)](),'ack':!![]});_0x23a774&&_0x23a774[_0x167047(0x32b)]===_0x167047(0x25a)&&_0x23a774[_0x167047(0x221)]&&this[_0x167047(0x23e)]&&deadMan[_0x167047(0x1fa)](this,_0x23a774[_0x167047(0x221)]);_0x59f33a[_0x167047(0x253)]&&(_0x59f33a[_0x167047(0x253)]===!![]||_0x59f33a['val']===0x1||String(_0x59f33a[_0x167047(0x253)])[_0x167047(0x2b4)]()===_0x167047(0x273))&&(_0x4eaed4[_0x167047(0x32b)]&&(_0x4eaed4[_0x167047(0x32b)]['includes'](_0x167047(0x26e))||_0x4eaed4[_0x167047(0x32b)][_0x167047(0x24b)](_0x167047(0x259)))&&this['analyzeWindowOpening'](_0x4eaed4));if(_0x4eaed4[_0x167047(0x32b)]===_0x167047(0x24e)||_0x4eaed4[_0x167047(0x32b)]===_0x167047(0x24f)){if(this[_0x167047(0x27e)]['energy'])automation['cleanupGhostInterventions'](this);}}}async['protectAiMemory'](_0xdda3f1){const _0x100712=a0_0x1b58d4;if(!this[_0x100712(0x2fb)]||Date[_0x100712(0x31e)]()-this[_0x100712(0x1e1)]>0x493e0)return;try{const _0x1f059b=JSON[_0x100712(0x300)](_0xdda3f1),_0x4f4b3b=this[_0x100712(0x2fb)][_0x100712(0x326)];let _0x6d0644=![];for(const _0x37bbc2 in _0x4f4b3b){if(_0x4f4b3b[_0x37bbc2][_0x100712(0x24b)]('AI')&&_0x1f059b[_0x37bbc2]&&!_0x1f059b[_0x37bbc2][_0x100712(0x24b)]('AI')){_0x6d0644=!![];break;}}_0x6d0644&&(await this[_0x100712(0x2f4)](_0x100712(0x211),{'val':JSON[_0x100712(0x2f2)](this[_0x100712(0x2fb)]['times']),'ack':!![]}),await this['setStateAsync']('analysis.energy.warmupSources',{'val':JSON[_0x100712(0x2f2)](this[_0x100712(0x2fb)][_0x100712(0x326)]),'ack':!![]}));}catch(_0x2cac45){}}async['loadSystemMode'](){const _0x50b364=a0_0x1b58d4;try{const _0x24e83a=await this['getStateAsync'](setup['SYSTEM_DP_MODE']);if(_0x24e83a&&_0x24e83a[_0x50b364(0x253)])this[_0x50b364(0x324)]=_0x24e83a[_0x50b364(0x253)];}catch(_0x26d6cd){this['currentSystemMode']=setup['SYSTEM_MODES']['NORMAL'];}}async['checkWifiPresence'](){const _0x2f4800=a0_0x1b58d4,_0x43c3ef=this[_0x2f4800(0x337)][_0x2f4800(0x2d2)]||[];if(_0x43c3ef[_0x2f4800(0x244)]===0x0)return![];const _0x421fd7=[],_0x26ecd4=Date['now'](),_0x465018=0x5*0x3c*0x3e8;for(const _0x2bdb8e of _0x43c3ef){try{let _0x3410ff=![];try{const _0xa5ea6a=await this[_0x2f4800(0x2b9)](_0x2bdb8e+_0x2f4800(0x2fe));if(_0xa5ea6a&&_0xa5ea6a[_0x2f4800(0x253)]===!![])_0x3410ff=!![];}catch(_0x3fdb32){}if(!_0x3410ff)try{const _0x6084a5=await this[_0x2f4800(0x2b9)](_0x2bdb8e+_0x2f4800(0x2dc));if(_0x6084a5&&_0x6084a5['ts']){const _0x15012a=_0x26ecd4-_0x6084a5['ts'];if(_0x15012a<_0x465018)_0x3410ff=!![];}}catch(_0x457345){}if(!_0x3410ff)try{const _0x19b152=await this[_0x2f4800(0x2b9)](_0x2bdb8e+_0x2f4800(0x2b0));if(_0x19b152&&typeof _0x19b152[_0x2f4800(0x253)]===_0x2f4800(0x25f)&&_0x19b152['val']>0x0)_0x3410ff=!![];}catch(_0x2aa941){}if(!_0x3410ff)try{const _0x540757=await this['getForeignStateAsync'](_0x2bdb8e);if(_0x540757){const _0xae558a=_0x26ecd4-(_0x540757['ts']||0x0);_0xae558a<_0x465018&&(_0x540757[_0x2f4800(0x253)]===!![]||_0x540757[_0x2f4800(0x253)]===_0x2f4800(0x1d0)||_0x540757[_0x2f4800(0x253)]===0x1)&&(_0x3410ff=!![]);}}catch(_0x10ae6b){}if(_0x3410ff){const _0x4131a6=_0x2bdb8e[_0x2f4800(0x2cc)]('.'),_0x269cbe=_0x4131a6[_0x4131a6[_0x2f4800(0x244)]-0x1]||_0x2bdb8e;_0x421fd7[_0x2f4800(0x265)](_0x269cbe);}}catch(_0x161e38){this[_0x2f4800(0x2b1)]['warn']('checkWifiPresence:\x20Error\x20checking\x20'+_0x2bdb8e+':\x20'+_0x161e38[_0x2f4800(0x29f)]);}}const _0x2bcd44=_0x421fd7[_0x2f4800(0x244)]>0x0?_0x421fd7[_0x2f4800(0x28a)](',\x20'):'Niemand';return await this[_0x2f4800(0x2f4)](_0x2f4800(0x1fc),{'val':_0x2bcd44,'ack':!![]}),_0x421fd7[_0x2f4800(0x244)]>0x0;}async[a0_0x1b58d4(0x250)](){const _0x1e8edf=a0_0x1b58d4;await aiAgent[_0x1e8edf(0x26d)](this);this[_0x1e8edf(0x27e)][_0x1e8edf(0x2f0)]&&(this[_0x1e8edf(0x255)](),this[_0x1e8edf(0x1e4)]());if(this[_0x1e8edf(0x27e)]['energy'])this[_0x1e8edf(0x1e3)]();}async[a0_0x1b58d4(0x317)](){const _0xe3b2d1=a0_0x1b58d4,_0x486bc9=[_0xe3b2d1(0x27c),_0xe3b2d1(0x231),'daswetter.0'],_0x225d42=[_0xe3b2d1(0x21d),'Current.WeatherText','NextHours.Location_1.Day_1.current.symbol_desc'];for(const _0x5ea368 of _0x486bc9){for(const _0x3a3f1e of _0x225d42){try{const _0x4206e1=_0x5ea368+'.'+_0x3a3f1e,_0x1926e4=await this[_0xe3b2d1(0x2b9)](_0x4206e1);if(_0x1926e4&&_0x1926e4['val']){const _0x34517c=String(_0x1926e4[_0xe3b2d1(0x253)])[_0xe3b2d1(0x2b4)]();if(_0x34517c[_0xe3b2d1(0x24b)]('sunny')||_0x34517c[_0xe3b2d1(0x24b)](_0xe3b2d1(0x267))||_0x34517c[_0xe3b2d1(0x24b)]('klar')||_0x34517c[_0xe3b2d1(0x24b)]('sonn')||_0x34517c[_0xe3b2d1(0x24b)]('clear'))return this[_0xe3b2d1(0x2b1)][_0xe3b2d1(0x2ef)](_0xe3b2d1(0x2ce)+_0x4206e1),!![];}}catch(_0x172385){}}}return![];}['triggerGaitAnalysis'](){const _0x4528dc=a0_0x1b58d4;if(!this[_0x4528dc(0x23e)])return;try{this[_0x4528dc(0x1cb)](_0x4528dc(0x23a),(_0x381419,_0x109143)=>{const _0x434119=_0x4528dc;if(_0x381419||!_0x109143||!_0x109143[_0x434119(0x253)])return;try{const _0x5c23e9=JSON[_0x434119(0x300)](_0x109143[_0x434119(0x253)]);if(!_0x5c23e9||_0x5c23e9[_0x434119(0x244)]===0x0)return;pythonBridge[_0x434119(0x219)](this,_0x434119(0x262),{'sequences':_0x5c23e9}),this[_0x434119(0x2b1)]['debug'](_0x434119(0x1d1)+_0x5c23e9[_0x434119(0x244)]+_0x434119(0x1cc));}catch(_0x2fde80){this[_0x434119(0x2b1)]['warn']('triggerGaitAnalysis\x20parse\x20error:\x20'+_0x2fde80[_0x434119(0x29f)]);}});}catch(_0x5e9550){this['log'][_0x4528dc(0x1cd)]('triggerGaitAnalysis\x20error:\x20'+_0x5e9550[_0x4528dc(0x29f)]);}}async[a0_0x1b58d4(0x1e3)](){const _0x192aac=a0_0x1b58d4;if(!this[_0x192aac(0x23e)]||!this[_0x192aac(0x27e)][_0x192aac(0x1d2)])return;try{const _0x53ac3d={},_0xe74efd={},_0x46dd65=this[_0x192aac(0x337)][_0x192aac(0x2a4)]||[];for(const _0x176105 of _0x46dd65){if((_0x176105[_0x192aac(0x32b)]===_0x192aac(0x24e)||_0x176105['type']==='thermostat')&&_0x176105[_0x192aac(0x221)])try{const _0x1bebb9=await this[_0x192aac(0x2b9)](_0x176105['id']);_0x1bebb9&&typeof _0x1bebb9[_0x192aac(0x253)]===_0x192aac(0x25f)&&(_0x53ac3d[_0x176105[_0x192aac(0x221)]]=_0x1bebb9[_0x192aac(0x253)],_0xe74efd[_0x176105[_0x192aac(0x221)]]=_0x176105[_0x192aac(0x1f0)]||![]);}catch(_0x7ca0bc){}}let _0x1b5b44=0xa;if(this['config'][_0x192aac(0x28e)])try{const _0x4091d0=await this['getForeignStateAsync'](this[_0x192aac(0x337)][_0x192aac(0x28e)]);if(_0x4091d0&&typeof _0x4091d0[_0x192aac(0x253)]===_0x192aac(0x25f))_0x1b5b44=_0x4091d0['val'];}catch(_0x4913e1){}const _0x2d6935=await this[_0x192aac(0x317)]();let _0x229d96={};try{const _0x180339=await this[_0x192aac(0x1cb)](_0x192aac(0x20d));if(_0x180339&&_0x180339['val'])_0x229d96=JSON[_0x192aac(0x300)](_0x180339[_0x192aac(0x253)]);}catch(_0x42320c){}pythonBridge['send'](this,_0x192aac(0x2bd),{'current_temps':_0x53ac3d,'t_out':_0x1b5b44,'is_sunny':_0x2d6935,'solar_flags':_0xe74efd,'warmup_targets':_0x229d96}),this[_0x192aac(0x2b1)]['info'](_0x192aac(0x2ac)+Object[_0x192aac(0x20a)](_0x53ac3d)[_0x192aac(0x244)]+_0x192aac(0x1f1));}catch(_0x6bda4b){this[_0x192aac(0x2b1)][_0x192aac(0x1cd)](_0x192aac(0x2ee)+_0x6bda4b['message']);}}[a0_0x1b58d4(0x255)](){const _0x4fff97=a0_0x1b58d4;if(!this[_0x4fff97(0x28c)]||this[_0x4fff97(0x28c)][_0x4fff97(0x244)]===0x0)return;const _0x57fc90=new Array(0x30)[_0x4fff97(0x210)](0x0),_0x596ef5=Array[_0x4fff97(0x2e8)]({'length':0x30},()=>[]),_0x497b2=new Date()[_0x4fff97(0x245)](0x0,0x0,0x0,0x0);this['rawEventLog']['forEach'](_0x369c04=>{const _0x4b8802=_0x4fff97,_0x3b43ea=new Date(_0x369c04['timestamp']);if(_0x3b43ea[_0x4b8802(0x32a)]()>=_0x497b2){const _0x12eec5=_0x3b43ea[_0x4b8802(0x243)](),_0x324884=_0x3b43ea[_0x4b8802(0x1ee)](),_0x65032f=_0x12eec5*0x2+Math[_0x4b8802(0x29e)](_0x324884/0x1e);_0x65032f>=0x0&&_0x65032f<0x30&&(_0x57fc90[_0x65032f]++,_0x596ef5[_0x65032f][_0x4b8802(0x265)]({'time':_0x3b43ea['toLocaleTimeString']('de-DE',{'hour':'2-digit','minute':'2-digit'}),'location':_0x369c04['location']||_0x4b8802(0x209),'type':_0x369c04['type']||'Event'}));}}),this[_0x4fff97(0x2f4)](_0x4fff97(0x264),{'val':JSON['stringify'](_0x57fc90),'ack':!![]}),this[_0x4fff97(0x2f4)](_0x4fff97(0x27d),{'val':JSON['stringify'](_0x596ef5),'ack':!![]});}async['handleInfrasound'](_0x500580){const _0x2f970c=a0_0x1b58d4;if(!this[_0x2f970c(0x337)][_0x2f970c(0x32d)]||typeof _0x500580!=='number')return;const _0x503381=this[_0x2f970c(0x337)][_0x2f970c(0x266)]||0.04;this[_0x2f970c(0x297)][_0x2f970c(0x265)]({'timestamp':Date[_0x2f970c(0x31e)](),'value':_0x500580}),this[_0x2f970c(0x297)][_0x2f970c(0x244)]>0x64&&this[_0x2f970c(0x297)][_0x2f970c(0x228)](),_0x500580>_0x503381&&!this['infrasoundLocked']&&(this[_0x2f970c(0x1ec)]=!![],this[_0x2f970c(0x2b1)][_0x2f970c(0x1cd)](_0x2f970c(0x226)+_0x500580[_0x2f970c(0x1d7)](0x4)+_0x2f970c(0x208)+_0x503381+_0x2f970c(0x30e)),await this['triggerInfrasoundCorrelation'](_0x500580,_0x2f970c(0x1fd)),setTimeout(()=>{const _0x5c34f9=_0x2f970c;this[_0x5c34f9(0x1ec)]=![];},0x5*0x3c*0x3e8));}async[a0_0x1b58d4(0x284)](_0x40b538,_0x4a0e88){const _0x160190=a0_0x1b58d4;if(!this[_0x160190(0x2cf)]){const _0x558df8=this[_0x160190(0x312)][_0x160190(0x1dc)](0x0,0xa),_0x2a303d=_0x558df8['map'](_0x5895cb=>new Date(_0x5895cb[_0x160190(0x201)])[_0x160190(0x2de)](_0x160190(0x27b))+'\x20-\x20'+(_0x5895cb[_0x160190(0x221)]||'Unknown')+':\x20'+_0x5895cb[_0x160190(0x229)])[_0x160190(0x28a)]('\x0a');this[_0x160190(0x2b1)][_0x160190(0x1cd)]('üîä\x20FORENSIC:\x20Infraschall\x20bei\x20Abwesenheit!\x20Pressure:\x20'+_0x40b538[_0x160190(0x1d7)](0x4)+',\x20Events:\x0a'+_0x2a303d);if(this[_0x160190(0x337)][_0x160190(0x27f)])try{const _0x1620b8=await this['getForeignStateAsync'](this[_0x160190(0x337)][_0x160190(0x27f)]);_0x1620b8&&_0x1620b8[_0x160190(0x253)]===!![]&&(await this[_0x160190(0x2f4)](_0x160190(0x274),{'val':JSON[_0x160190(0x2f2)]({'timestamp':Date[_0x160190(0x31e)](),'pressure':_0x40b538[_0x160190(0x1d7)](0x4),'eventType':_0x4a0e88,'recentEvents':_0x558df8[_0x160190(0x1dc)](0x0,0x3)}),'ack':!![]}),this[_0x160190(0x2b1)][_0x160190(0x318)]('üö®\x20INFRASCHALL-ALARM:\x20Anomalie\x20bei\x20Abwesenheit\x20(scharf)!'));}catch(_0x429001){}}else this[_0x160190(0x2b1)][_0x160190(0x2ef)](_0x160190(0x2b7)+_0x40b538[_0x160190(0x1d7)](0x4)+_0x160190(0x205));}async['analyzeWindowOpening'](_0xe0271b){const _0x111c60=a0_0x1b58d4;if(!_0xe0271b||!_0xe0271b[_0x111c60(0x221)])return;try{const _0x8c4a86=(this['config'][_0x111c60(0x2a4)]||[])['filter'](_0x3f3f31=>_0x3f3f31['location']===_0xe0271b[_0x111c60(0x221)]&&(_0x3f3f31[_0x111c60(0x32b)]===_0x111c60(0x24e)||_0x3f3f31['type']==='thermostat'));if(_0x8c4a86[_0x111c60(0x244)]===0x0)return;const _0xed953e=await this['getForeignStateAsync'](_0x8c4a86[0x0]['id']);if(!_0xed953e||typeof _0xed953e['val']!==_0x111c60(0x25f))return;const _0x3ae9e5=_0xed953e['val'];let _0x415fc=null;if(this[_0x111c60(0x337)][_0x111c60(0x28e)]){const _0x26d05a=await this[_0x111c60(0x2b9)](this[_0x111c60(0x337)][_0x111c60(0x28e)]);_0x26d05a&&typeof _0x26d05a['val']===_0x111c60(0x25f)&&(_0x415fc=_0x26d05a[_0x111c60(0x253)]);}if(_0x415fc!==null){const _0x1271a2=Math['abs'](_0x3ae9e5-_0x415fc);_0x1271a2>0x3&&(this[_0x111c60(0x2b1)][_0x111c60(0x2ef)]('üí®\x20L√ºftung\x20in\x20'+_0xe0271b['location']+':\x20Temp-Differenz\x20'+_0x1271a2['toFixed'](0x1)+'¬∞C\x20(Innen:\x20'+_0x3ae9e5+_0x111c60(0x227)+_0x415fc+_0x111c60(0x22a)),await this['setStateAsync'](_0x111c60(0x246),{'val':JSON[_0x111c60(0x2f2)]({'room':_0xe0271b[_0x111c60(0x221)],'timestamp':Date[_0x111c60(0x31e)](),'tempDiff':_0x1271a2[_0x111c60(0x1d7)](0x1),'recommendation':_0x1271a2>0x5?_0x111c60(0x31b):_0x111c60(0x32f)}),'ack':!![]}));}}catch(_0x5cca4d){this['log'][_0x111c60(0x1cd)]('analyzeWindowOpening\x20error:\x20'+_0x5cca4d[_0x111c60(0x29f)]);}}async[a0_0x1b58d4(0x2eb)](_0x50701c){const _0x4b251b=a0_0x1b58d4;if(!_0x50701c||typeof _0x50701c!==_0x4b251b(0x26b))return;const _0x4fa2a3={'timestamp':_0x50701c[_0x4b251b(0x201)]||Date['now'](),'id':_0x50701c['id']||Date['now']()[_0x4b251b(0x30a)](),'name':_0x50701c[_0x4b251b(0x229)]||_0x4b251b(0x239),'type':_0x50701c[_0x4b251b(0x32b)]||_0x4b251b(0x291),'location':_0x50701c[_0x4b251b(0x221)]||_0x4b251b(0x2d7),'value':_0x50701c[_0x4b251b(0x31a)]||null};this[_0x4b251b(0x312)][_0x4b251b(0x333)](_0x4fa2a3);if(this['eventHistory'][_0x4b251b(0x244)]>0x1388)this[_0x4b251b(0x312)][_0x4b251b(0x2ff)]();await this[_0x4b251b(0x2f4)](_0x4b251b(0x1f2),{'val':JSON['stringify'](this[_0x4b251b(0x312)]),'ack':!![]}),this['log'][_0x4b251b(0x2ef)](_0x4b251b(0x330)+_0x4fa2a3['name']+'\x20('+_0x4fa2a3[_0x4b251b(0x221)]+')');}['sendNotification'](_0x438a5e){}}if(require[a0_0x1b58d4(0x28f)]!==module)module[a0_0x1b58d4(0x207)]=_0x17aa71=>new CogniLiving(_0x17aa71);else new CogniLiving();