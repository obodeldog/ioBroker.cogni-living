function a0_0x48b9(){const _0x4aacad=['accuweather','checkLicense','sendToAsync','Event\x20History','‚ùå\x20INSTALL\x20FAILED:\x20','[PYTHON]\x20','round','notifyPushoverInstance','getCalendarNames','loc','scheduleJob','description','Energy\x20Intelligence','text','System\x20Mode','events.history_debug_00','üêç\x20Python\x20Pong','getForeignStateAsync','alertReason','\x22\x20install\x20--no-cache-dir\x20--force-reinstall\x20-r\x20\x22','geminiApiKey','.\x20WETTER:\x20','info','version','config','city','PRIORIT√ÑT:\x20Sicherheit.','3111750rReCxr','message','Feedback:\x20','outdoorSensorId','licenseKey','checkWifiPresence','onUnload','analysis.health','analysis.automation.targetId','val','pythonProcess','LTM.driftAnalysis.baselineDrift','isProVersion','pop','rawEventLog','Health\x20Analysis','analysis.training.triggerEnergy','ical.0','trim','515664qoLRqU','createDailyDigest','location','json','toString','Keine\x20Details.','analysis.training.triggerHealth','position','existsSync','child_process','LTM','Installing\x20packages...','exports','calendarInstance','events.lastEvent','shutter','apply','online','brightness','initPresenceSubscriptions','name','\x20Tage)','modeResetJob','üõ†Ô∏è\x20MAINTENANCE:\x20Rebuilding\x20VENV...\x20(This\x20takes\x20time)','710ePqfsU','map','ANOMALY','text.alarm','forEach','includes','activityLevel','Alarm','saveFeedback','Who\x20is\x20present?','abortExitTimer','updateBaselineStatus','send','\x20*\x20*\x20*','runBaselineDriftAnalysis','GUEST','humidity','javascript.','getHours','switch','aiPersona','notifyEmailInstance','Activity\x20Summary','ANALYZE_HEALTH','value','indexOf','TREND_RESULT','string','/100.\x20OUTPUT:\x20Text.','ltmDriftCheckIntervalHours','generateContent','handlePythonResult','indicator.alarm','light','notifyTelegramInstance','Fokus\x20auf\x20Komfort.','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','stringify','driftAnalysisTimer','.venv','0\x204\x20*\x20*\x20*','isGracePeriodActive','Description','daswetter','‚úÖ\x20Alarm\x20quittiert.\x20System\x20normal.','Success','Trend','[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20','installing','service.py','dailyDigests','boolean','energy','subscribeStates','@google/generative-ai','Target\x20ID','notifyTelegramEnabled','handleTelegramResponse','onStateChange','unknown','values','vis.','recordSequence','Start\x20Error:\x20','channel','valve','.data.table','‚ö†Ô∏è\x20Python\x20Environment\x20missing\x20or\x20broken.\x20Starting\x20repair\x20sequence...','ready','.forecast.current.temperature','Generating\x20Morning\x20Briefing...','openweathermap','normal','Briefing\x20Sched\x20Error:\x20','analysisTimer','system','toLowerCase','status','Lernphase\x20(','‚úÖ\x20Environment\x20OK.\x20Starting\x20System...','temperatur','759888vbplxG','.\x20ZUSATZ:\x20','health','Kalender:\x20Deaktiviert','subscribeForeignStatesAsync','eventHistory','notifyEmailRecipient','setpoint','system.','python3\x20-m\x20venv\x20\x22','echarts.','startPythonService','Cogni-Living','uuid','1239TqhFjE','loadDailyDigests','blind','analysis.energy.heatingScore','\x20(Length:\x20','fenster','insulation','events.history','state','LTM.baselineStatus','bin','getSystemUUID','System','unshift','‚ö†Ô∏è\x20ALARM:\x20','(((.+)+)+)+$','SECURITY_RESULT','retry','material.','TRAINING_COMPLETE','exitGraceTimer','COGNI_CONFIRM_OK','157351Hcttzi','getObjectAsync','saveDailyDigests','LTM.trainingData.sequences','analysis.isAlert','Fokus\x20auf\x20Familienroutinen.','LTM.driftAnalysis','write','Train\x20Energy','activeSequence','ltmLtbWindowDays','common','licht','isExit','[LOG]','Anomaly\x20Detected','shift','analysis.health.isAnomaly','motion','analysis.security.lastScore','üõ°Ô∏è\x20SECURITY:\x20Sending\x20sequence\x20to\x20Guard\x20for\x20analysis...','inactivityMonitoringEnabled','klima','kontakt','analysis.training.triggerSecurity','notifyPushoverEnabled','window','bind','loadRawEventLog','button','toLocaleTimeString','kill','set_temperature','analysis.automation.description','indicator','.\x20DATEN:\x20Schlaf\x20','briefingJob','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','simple-api.','KALENDER:\x20','Keine\x20Termine','toFixed','error','detected','HARD\x20WATCHDOG:\x20No\x20activity\x20for\x20','Raw\x20Log','analysis.energy.insulationScore','stateChange','\x20->\x20','win32','Auto\x20Apply','Deaktiviert\x20(Pro-Feature)','runGeminiAnalysis','analysis.health.lastCheck','@iobroker/adapter-core','push','Trigger\x20Action','loadSystemMode','saveRawEventLog','heizung','setupLtmScheduler','system.presenceWho','Invalid\x20JSON:\x20','LTM.trainingData.thermodynamics','Target\x20Value','siren','debug','parse','setupTelegramListener','updateAnalysisHistory','isAlert','presence','ltmJob','payload','initSystemConfig','‚úÖ\x20INSTALL\x20SUCCESS.\x20Restarting\x20adapter\x20to\x20load\x20new\x20system...','briefingTime','runPythonHealthCheck','3240pgKWcl','Last\x20Check','.communicate.request','analysis.activitySummary','extendObjectAsync','üêç\x20Stopping\x20Python...','üìû\x20R√ºckruf\x20anfordern','684UsrRrF','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','off','analysis.automation.targetValue','targetposition','cover','stdout','currentSystemMode','party','Skipped\x20(No\x20AI\x20or\x20Data)','Vom\x20Benutzer\x20best√§tigt\x20(OK).','Success:\x20','restart','NORMAL','[PYTHON\x20ERR]\x20','saveCompletedSequence','main','system.mode','warn','platform','Failed:\x20','genAI','ANALYZE_TREND','setPresence','latitude','LTM\x20Sched\x20Error:\x20','number','HEALTH_TRAIN_RESULT','Unbekannt','PONG','N/A','sequenceTimer','sendNotification','analysis.health.trendDiagnosis','Reset\x20Sched\x20Error:\x20','history.','Gemini\x20Init\x20Error:\x20','\x20=\x20','Gemini\x20AI\x20initialized.','python_service','useCalendar','pip.exe','substring','models/gemini-flash-latest','onReady','notifyPushoverRecipient','analysis.automation.patternDetected','minDaysForBaseline','length','setupBriefingScheduler','Thermodynamics','event','summary','targetId','contact','stdin','Drift\x20Sched\x20Error:\x20','system.config','sendToPython','analysis.triggerBriefing','LTM.driftAnalysis.lastCheck','requirements.txt','now','getGenerativeModel','Started...','automationProposal','occupancy','Train\x20Health','setObjectNotExistsAsync','door','analysis.trigger','analysisHistory','isArray','analysis.automation.autoApply','setupModeResetScheduler','118136oynvba','system.isPresent','Scripts','recordThermodynamics','initHistory','sensorLastValues','cpu_feature_guard','split','icons-mfd.','‚ö†Ô∏è\x20Python\x20Module\x20Missing\x20(','weatherInstance','node-schedule','power','.\x20KONTEXT:\x20','replace','startExitTimer','21qdrcAw','Gemini\x20Error:\x20','processSensorEvent','üêç\x20Guardian\x20Diagnosis:\x20','.\x20EVENTS:\x20','generic','LTM.triggerDailyDigest','filter','date','Training\x20Status','type','N/A\x20(Learning)','analysis.training.status','currentposition','Pattern\x20Detected','baselineDrift','createAllObjects','presenceDevices','runSecurityCheck','LTM.dailyDigests','toISOString','briefingEnabled','splice','log','notifyTelegramRecipient','schalter','timestamp','Alert\x20Status','lampe','startSystem','cancel','geminiModel','analysis.training','Alert\x20Reason','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','driftDetails','sort','Unknown','getOutsideTemperatureNumeric','join','notifyEmailEnabled','livingContext','lastAlertState','Analysiere\x20ausgewogen.','temperature','.Current.Temperature','[RESULT]','.\x20ANWESEND:\x20','search','LTM.driftAnalysis.driftDetails','executeAutomationAction','ENERGY_TRAIN_RESULT','AI\x20Training','WiFi\x20Presence\x20detected.','sound','getForeignObjectAsync','info.','sendMorningBriefing','analysis.alertReason','Last\x20raw\x20event','constructor','getWeatherContext','heating','bewegung','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','isPresent','‚úÖ\x20HEALTH\x20TRAINED:\x20','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','PARTY','analysis.security.lastCheck','exitTimer','pip','data','actual_temperature','Digest','_calName','python.exe','.forecast.current.temp','ANALYZE_SEQUENCE','analysisInterval','getStateAsync','stderr','installPythonDependencies','COGNI_REQUEST_CALL','runAutopilot','response','Anomaly\x20Score','systemConfig','setHours','some','sleepScore','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','slice','analysis.health.trendValue','BUTLER\x20Execution\x20Error:\x20','analysis.lastResult','setStateAsync','path','Insulation\x20Score'];a0_0x48b9=function(){return _0x4aacad;};return a0_0x48b9();}function a0_0x1aed(_0x3a0b78,_0xd60676){const _0x46e92c=a0_0x48b9();return a0_0x1aed=function(_0xefa1b,_0x51dc2b){_0xefa1b=_0xefa1b-0xf3;let _0x48b9ab=_0x46e92c[_0xefa1b];return _0x48b9ab;},a0_0x1aed(_0x3a0b78,_0xd60676);}const a0_0x126fab=a0_0x1aed;(function(_0x2dcfc3,_0x141f76){const _0x229a5b=a0_0x1aed,_0x2c9698=_0x2dcfc3();while(!![]){try{const _0x36a1a0=parseInt(_0x229a5b(0x148))/0x1+parseInt(_0x229a5b(0x1e8))/0x2+-parseInt(_0x229a5b(0x132))/0x3*(parseInt(_0x229a5b(0x19d))/0x4)+parseInt(_0x229a5b(0x2a1))/0x5*(-parseInt(_0x229a5b(0x196))/0x6)+-parseInt(_0x229a5b(0x1f8))/0x7*(parseInt(_0x229a5b(0x124))/0x8)+parseInt(_0x229a5b(0x289))/0x9+parseInt(_0x229a5b(0x276))/0xa;if(_0x36a1a0===_0x141f76)break;else _0x2c9698['push'](_0x2c9698['shift']());}catch(_0x315bae){_0x2c9698['push'](_0x2c9698['shift']());}}}(a0_0x48b9,0x25435));const a0_0x51dc2b=(function(){let _0x1b0cd3=!![];return function(_0xd2fc2a,_0x5f36c3){const _0x1194c4=_0x1b0cd3?function(){const _0x527327=a0_0x1aed;if(_0x5f36c3){const _0x2ae288=_0x5f36c3[_0x527327(0x299)](_0xd2fc2a,arguments);return _0x5f36c3=null,_0x2ae288;}}:function(){};return _0x1b0cd3=![],_0x1194c4;};}()),a0_0xefa1b=a0_0x51dc2b(this,function(){const _0x1b5bb7=a0_0x1aed;return a0_0xefa1b[_0x1b5bb7(0x28d)]()[_0x1b5bb7(0x228)](_0x1b5bb7(0x141))['toString']()[_0x1b5bb7(0x234)](a0_0xefa1b)[_0x1b5bb7(0x228)](_0x1b5bb7(0x141));});a0_0xefa1b();'use strict';const utils=require(a0_0x126fab(0x17e)),{GoogleGenerativeAI}=require(a0_0x126fab(0x109)),schedule=require(a0_0x126fab(0x1f3)),{spawn,exec}=require(a0_0x126fab(0x292)),path=require(a0_0x126fab(0x259)),fs=require('fs'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x126fab(0x1c8),LTM_SCHEDULE='0\x203\x20*\x20*\x20*',MODE_RESET_SCHEDULE=a0_0x126fab(0xfb),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0x126fab(0x20b),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST=a0_0x126fab(0x1fe),LTM_DP_BASELINE_STATUS=a0_0x126fab(0x13b),LTM_DP_DRIFT_CHANNEL=a0_0x126fab(0x14e),LTM_DP_DRIFT_STATUS=a0_0x126fab(0x281),LTM_DP_DRIFT_DETAILS=a0_0x126fab(0x229),LTM_DP_DRIFT_LAST_CHECK=a0_0x126fab(0x1d9),SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':a0_0x126fab(0x11b),'VACATION':'vacation','PARTY':a0_0x126fab(0x1a5),'GUEST':'guest'},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x126fab(0x23c)],SYSTEM_MODES[a0_0x126fab(0x2b0)]],PERSONA_MAPPING={'generic':a0_0x126fab(0x223),'senior_aal':'PRIORIT√ÑT:\x20Gesundheit/AAL.','family':a0_0x126fab(0x14d),'single_comfort':a0_0x126fab(0xf6),'security':a0_0x126fab(0x275)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0},BAD_NAMES=[a0_0x126fab(0x1a1),a0_0x126fab(0x205),a0_0x126fab(0x13a),'level','value',a0_0x126fab(0x29b),'on',a0_0x126fab(0x19f),'switch',a0_0x126fab(0x290),a0_0x126fab(0x298),a0_0x126fab(0x134),a0_0x126fab(0x1a2),a0_0x126fab(0x120),a0_0x126fab(0x15a),'presence',a0_0x126fab(0x1df),a0_0x126fab(0x224),a0_0x126fab(0x2b1),a0_0x126fab(0x1f4),a0_0x126fab(0x107),a0_0x126fab(0x12b),a0_0x126fab(0x114),a0_0x126fab(0x241),a0_0x126fab(0x168)],ADAPTER_BLACKLIST=[a0_0x126fab(0x12c),'admin.',a0_0x126fab(0x230),a0_0x126fab(0x110),a0_0x126fab(0x1c0),a0_0x126fab(0x144),a0_0x126fab(0x1f0),'flot.',a0_0x126fab(0x12e),a0_0x126fab(0x2b2),a0_0x126fab(0x16e)],IS_WIN=process[a0_0x126fab(0x1b0)]===a0_0x126fab(0x179),VENV_PATH=path[a0_0x126fab(0x21f)](__dirname,a0_0x126fab(0xfa)),PYTHON_EXE=IS_WIN?path[a0_0x126fab(0x21f)](VENV_PATH,a0_0x126fab(0x1ea),a0_0x126fab(0x244)):path[a0_0x126fab(0x21f)](VENV_PATH,a0_0x126fab(0x13c),'python'),PIP_EXE=IS_WIN?path[a0_0x126fab(0x21f)](VENV_PATH,a0_0x126fab(0x1ea),a0_0x126fab(0x1c6)):path['join'](VENV_PATH,a0_0x126fab(0x13c),a0_0x126fab(0x23f));class CogniLiving extends utils['Adapter']{constructor(_0x12e7e4){const _0x37bec5=a0_0x126fab;super({..._0x12e7e4,'name':'cogni-living'}),this[_0x37bec5(0x129)]=[],this['analysisHistory']=[],this[_0x37bec5(0x284)]=[],this[_0x37bec5(0x105)]=[],this['sensorLastValues']={},this[_0x37bec5(0x24f)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x37bec5(0x239)]=!![],this['exitTimer']=null,this[_0x37bec5(0x146)]=null,this[_0x37bec5(0xfc)]=![],this[_0x37bec5(0x1b2)]=null,this[_0x37bec5(0x217)]=null,this[_0x37bec5(0x1a4)]=SYSTEM_MODES[_0x37bec5(0x1aa)],this[_0x37bec5(0x282)]=![],this[_0x37bec5(0x222)]=![],this['systemUUID']=_0x37bec5(0x10e),this[_0x37bec5(0x11d)]=null,this[_0x37bec5(0x190)]=null,this[_0x37bec5(0x29f)]=null,this[_0x37bec5(0xf9)]=null,this[_0x37bec5(0x16c)]=null,this['pythonProcess']=null,this[_0x37bec5(0x103)]=![],this['activeSequence']=[],this[_0x37bec5(0x1bc)]=null,this['on'](_0x37bec5(0x117),this[_0x37bec5(0x1c9)]['bind'](this)),this['on'](_0x37bec5(0x177),this[_0x37bec5(0x10d)][_0x37bec5(0x163)](this)),this['on']('unload',this['onUnload'][_0x37bec5(0x163)](this)),this['on'](_0x37bec5(0x277),this['onMessage']['bind'](this));}async[a0_0x126fab(0x1c9)](){const _0x496ac9=a0_0x126fab;this['log'][_0x496ac9(0x271)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x496ac9(0x272)]+')\x20-\x20CLEAN\x20BOOT');if(!fs[_0x496ac9(0x291)](VENV_PATH)||!fs['existsSync'](PIP_EXE)){this['log'][_0x496ac9(0x1af)](_0x496ac9(0x116)),this[_0x496ac9(0x24a)]();return;}await this[_0x496ac9(0x215)]();}async[a0_0x126fab(0x215)](){const _0x216e2a=a0_0x126fab;this[_0x216e2a(0x20f)][_0x216e2a(0x271)](_0x216e2a(0x122)),await this['initZombies'](),this['config'][_0x216e2a(0x27a)]=this[_0x216e2a(0x273)][_0x216e2a(0x27a)]||'';try{this[_0x216e2a(0x282)]=await this[_0x216e2a(0x25c)](this[_0x216e2a(0x273)]['licenseKey']);}catch(_0x4901aa){}if(!this[_0x216e2a(0x273)]['inactivityThresholdHours']||this[_0x216e2a(0x273)]['inactivityThresholdHours']<0.1)this[_0x216e2a(0x273)]['inactivityThresholdHours']=0xc;await this[_0x216e2a(0x1ec)](),await this['initSystemConfig']();if(this[_0x216e2a(0x273)][_0x216e2a(0x26f)])try{this[_0x216e2a(0x1b2)]=new GoogleGenerativeAI(this[_0x216e2a(0x273)]['geminiApiKey']),this[_0x216e2a(0x217)]=this[_0x216e2a(0x1b2)][_0x216e2a(0x1dc)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x216e2a(0x20f)][_0x216e2a(0x271)](_0x216e2a(0x1c3));}catch(_0x5c9549){this[_0x216e2a(0x20f)][_0x216e2a(0x172)](_0x216e2a(0x1c1)+_0x5c9549[_0x216e2a(0x277)]);}await this[_0x216e2a(0x208)](),await this['loadSystemMode'](),await this[_0x216e2a(0x164)](),await this[_0x216e2a(0x133)](),this[_0x216e2a(0x108)]('analysis.trigger'),this[_0x216e2a(0x108)](LTM_DP_TRIGGER_DIGEST),this[_0x216e2a(0x108)](_0x216e2a(0x1ae)),this[_0x216e2a(0x108)](_0x216e2a(0x1d8)),this[_0x216e2a(0x108)]('analysis.automation.triggerAction'),this[_0x216e2a(0x108)](_0x216e2a(0x1e6)),this[_0x216e2a(0x108)](_0x216e2a(0x160)),this[_0x216e2a(0x108)]('analysis.training.triggerHealth'),this[_0x216e2a(0x108)](_0x216e2a(0x286)),await this['initSensorSubscriptions'](),await this[_0x216e2a(0x29c)](),await this['setupTelegramListener'](),setTimeout(()=>this[_0x216e2a(0x27b)](),0x1388);if(this[_0x216e2a(0x11d)])clearInterval(this[_0x216e2a(0x11d)]);const _0x1977f4=this[_0x216e2a(0x273)][_0x216e2a(0x247)]||0xf;_0x1977f4>0x0&&(this[_0x216e2a(0x11d)]=setInterval(()=>{this['runAutopilot']();},_0x1977f4*0x3c*0x3e8)),this[_0x216e2a(0x184)](),this[_0x216e2a(0x1e7)](),this['setupDriftAnalysisScheduler'](),this['setupBriefingScheduler'](),this['startPythonService'](),setTimeout(()=>{const _0xa1f8d5=_0x216e2a;if(this[_0xa1f8d5(0x280)])this[_0xa1f8d5(0x195)]();},0x1388);}[a0_0x126fab(0x27c)](_0x3aa906){const _0x37ed75=a0_0x126fab;if(this[_0x37ed75(0x11d)])clearInterval(this[_0x37ed75(0x11d)]);if(this[_0x37ed75(0xf9)])clearInterval(this['driftAnalysisTimer']);if(this['ltmJob'])this[_0x37ed75(0x190)][_0x37ed75(0x216)]();if(this[_0x37ed75(0x29f)])this[_0x37ed75(0x29f)][_0x37ed75(0x216)]();if(this[_0x37ed75(0x16c)])this['briefingJob']['cancel']();if(this[_0x37ed75(0x23e)])clearTimeout(this[_0x37ed75(0x23e)]);if(this[_0x37ed75(0x146)])clearTimeout(this['exitGraceTimer']);this['stopPythonService'](),_0x3aa906();}[a0_0x126fab(0x24a)](){const _0x100a3e=a0_0x126fab;if(this['installing'])return;this[_0x100a3e(0x103)]=!![];const _0x37fda0=path[_0x100a3e(0x21f)](__dirname,_0x100a3e(0x1c4),_0x100a3e(0x1da));this[_0x100a3e(0x20f)][_0x100a3e(0x271)](_0x100a3e(0x2a0));if(fs[_0x100a3e(0x291)](VENV_PATH))try{fs['rmSync'](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x36fcca){}exec(_0x100a3e(0x12d)+VENV_PATH+'\x22',_0x3dde82=>{const _0x176cfd=_0x100a3e;if(_0x3dde82){this['log'][_0x176cfd(0x172)]('‚ùå\x20VENV\x20FAILED.\x20Please\x20run:\x20sudo\x20apt\x20install\x20python3-venv'),this['installing']=![];return;}this['log'][_0x176cfd(0x271)](_0x176cfd(0x294));const _0x39f182='\x22'+PIP_EXE+_0x176cfd(0x26e)+_0x37fda0+'\x22';exec(_0x39f182,{'timeout':0x124f80},(_0x29adf2,_0x19417a,_0x55bb56)=>{const _0x4c40e6=_0x176cfd;_0x29adf2?(this[_0x4c40e6(0x20f)]['error'](_0x4c40e6(0x25f)+(_0x55bb56||_0x29adf2['message'])),this[_0x4c40e6(0x103)]=![]):(this[_0x4c40e6(0x20f)][_0x4c40e6(0x271)](_0x4c40e6(0x193)),this[_0x4c40e6(0x1a9)]());});});}[a0_0x126fab(0x12f)](){const _0x487b59=a0_0x126fab;if(this[_0x487b59(0x103)])return;if(!fs[_0x487b59(0x291)](PYTHON_EXE)){this['log'][_0x487b59(0x1af)]('Python\x20missing.\x20Restarting\x20to\x20trigger\x20install...'),this[_0x487b59(0x1a9)]();return;}try{const _0x3a9b84=path['join'](__dirname,_0x487b59(0x1c4),_0x487b59(0x104));this[_0x487b59(0x280)]=spawn(PYTHON_EXE,[_0x3a9b84]),this[_0x487b59(0x280)][_0x487b59(0x1a3)]['on'](_0x487b59(0x240),_0x327bc6=>{const _0x467205=_0x487b59,_0x3d7d87=_0x327bc6[_0x467205(0x28d)]()[_0x467205(0x1ef)]('\x0a');_0x3d7d87[_0x467205(0x2a5)](_0x31523d=>{const _0x478d33=_0x467205,_0x3316ab=_0x31523d[_0x478d33(0x288)]();if(!_0x3316ab)return;if(_0x3316ab['startsWith'](_0x478d33(0x156)))this[_0x478d33(0x20f)][_0x478d33(0x18a)](_0x478d33(0x260)+_0x3316ab[_0x478d33(0x1c7)](0x5)[_0x478d33(0x288)]());else{if(_0x3316ab['startsWith'](_0x478d33(0x226)))try{const _0x1aefb8=JSON['parse'](_0x3316ab[_0x478d33(0x1c7)](0x8)['trim']());this[_0x478d33(0x2c0)](_0x1aefb8);}catch(_0x270b2b){this[_0x478d33(0x20f)]['warn'](_0x478d33(0x186)+_0x3316ab);}}_0x3316ab[_0x478d33(0x2a6)]('No\x20module\x20named')&&(this[_0x478d33(0x20f)][_0x478d33(0x172)](_0x478d33(0x1f1)+_0x3316ab+').\x20Triggering\x20Repair...'),this['installPythonDependencies']());});}),this[_0x487b59(0x280)][_0x487b59(0x249)]['on'](_0x487b59(0x240),_0x2115f1=>{const _0x66e4a7=_0x487b59,_0x1269a8=_0x2115f1['toString']()[_0x66e4a7(0x288)]();if(!_0x1269a8[_0x66e4a7(0x2a6)](_0x66e4a7(0x1ee)))this['log']['error'](_0x66e4a7(0x1ab)+_0x1269a8);}),this['pythonProcess']['on']('close',_0x3cefca=>{const _0x48aa69=_0x487b59;this['log']['info']('[PYTHON]\x20Exited\x20'+_0x3cefca),this[_0x48aa69(0x280)]=null;});}catch(_0x1462fe){this[_0x487b59(0x20f)]['error'](_0x487b59(0x112)+_0x1462fe['message']);}}['stopPythonService'](){const _0x22a4eb=a0_0x126fab;if(this[_0x22a4eb(0x280)]){this[_0x22a4eb(0x20f)]['info'](_0x22a4eb(0x19b));try{this[_0x22a4eb(0x280)][_0x22a4eb(0x167)]();}catch(_0x56b964){}this[_0x22a4eb(0x280)]=null;}}[a0_0x126fab(0x184)](){const _0x2eca79=a0_0x126fab;try{if(this['ltmJob'])this[_0x2eca79(0x190)]['cancel']();if(!this[_0x2eca79(0x282)])return;this[_0x2eca79(0x190)]=schedule[_0x2eca79(0x265)](LTM_SCHEDULE,()=>this[_0x2eca79(0x28a)]());}catch(_0x1d8bbd){this[_0x2eca79(0x20f)][_0x2eca79(0x172)](_0x2eca79(0x1b6)+_0x1d8bbd[_0x2eca79(0x277)]);}}[a0_0x126fab(0x1e7)](){const _0x172848=a0_0x126fab;try{if(this[_0x172848(0x29f)])this[_0x172848(0x29f)][_0x172848(0x216)]();this[_0x172848(0x29f)]=schedule['scheduleJob'](MODE_RESET_SCHEDULE,async()=>{const _0xaf259e=_0x172848;await this[_0xaf259e(0x181)](),AUTO_RESET_MODES[_0xaf259e(0x2a6)](this['currentSystemMode'])&&await this['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0xaf259e(0x1aa)],'ack':![]});});}catch(_0x4f90df){this['log'][_0x172848(0x172)](_0x172848(0x1bf)+_0x4f90df[_0x172848(0x277)]);}}['setupDriftAnalysisScheduler'](){const _0x291361=a0_0x126fab;try{if(this[_0x291361(0xf9)])clearInterval(this[_0x291361(0xf9)]);if(!this[_0x291361(0x282)])return;this[_0x291361(0xf9)]=setInterval(()=>this[_0x291361(0x2af)](),(this['config'][_0x291361(0x2be)]||0x18)*0x36ee80),setTimeout(()=>this[_0x291361(0x2af)](),0x1388);}catch(_0x3a8816){this[_0x291361(0x20f)][_0x291361(0x172)](_0x291361(0x1d5)+_0x3a8816[_0x291361(0x277)]);}}[a0_0x126fab(0x1ce)](){const _0x532609=a0_0x126fab;try{if(this[_0x532609(0x16c)])this[_0x532609(0x16c)]['cancel']();if(!this[_0x532609(0x273)][_0x532609(0x20d)])return;const _0x3eb2a8=(this[_0x532609(0x273)][_0x532609(0x194)]||'08:00')[_0x532609(0x1ef)](':'),_0x4ede36=parseInt(_0x3eb2a8[0x0])||0x8,_0x4b8beb=parseInt(_0x3eb2a8[0x1])||0x0,_0x8f1ed4=_0x4b8beb+'\x20'+_0x4ede36+_0x532609(0x2ae);this[_0x532609(0x16c)]=schedule[_0x532609(0x265)](_0x8f1ed4,()=>{const _0x1b1eb3=_0x532609;this[_0x1b1eb3(0x231)]();});}catch(_0x7071b){this[_0x532609(0x20f)][_0x532609(0x172)](_0x532609(0x11c)+_0x7071b['message']);}}async[a0_0x126fab(0x1fa)](_0x37609e,_0x4164b3,_0x48aa97){const _0x2f3172=a0_0x126fab;if(!_0x48aa97)return;const _0x58acad=_0x4164b3[_0x2f3172(0x27f)],_0x5612fd=Date[_0x2f3172(0x1db)](),_0x1b7ea0=this[_0x2f3172(0x1ed)][_0x37609e];this[_0x2f3172(0x1ed)][_0x37609e]=_0x58acad;if(!_0x48aa97['logDuplicates']&&_0x1b7ea0!=undefined&&_0x1b7ea0==_0x58acad)return;const _0x1d86d6=(_0x48aa97[_0x2f3172(0x202)]||'')[_0x2f3172(0x11f)](),_0x3ed6af=_0x1d86d6[_0x2f3172(0x2a6)]('temperature')||_0x1d86d6[_0x2f3172(0x2a6)](_0x2f3172(0x123))||_0x1d86d6[_0x2f3172(0x2a6)](_0x2f3172(0x15e))||_0x1d86d6[_0x2f3172(0x2a6)](_0x2f3172(0x183));this['isProVersion']&&_0x3ed6af&&this[_0x2f3172(0x1eb)](_0x37609e,_0x58acad,_0x48aa97[_0x2f3172(0x28b)]);const _0x43c7b9={'timestamp':_0x5612fd,'id':_0x37609e,'name':_0x48aa97[_0x2f3172(0x29d)],'type':_0x48aa97['type'],'location':_0x48aa97[_0x2f3172(0x28b)],'value':_0x58acad};this[_0x2f3172(0x129)][_0x2f3172(0x13f)](_0x43c7b9);if(this['eventHistory']['length']>HISTORY_MAX_SIZE)this[_0x2f3172(0x129)][_0x2f3172(0x283)]();await this[_0x2f3172(0x258)](_0x2f3172(0x297),{'val':JSON[_0x2f3172(0xf8)](_0x43c7b9),'ack':!![]}),await this[_0x2f3172(0x258)](_0x2f3172(0x139),{'val':JSON[_0x2f3172(0xf8)](this[_0x2f3172(0x129)]),'ack':!![]});this[_0x2f3172(0x282)]&&(this[_0x2f3172(0x284)][_0x2f3172(0x17f)](_0x43c7b9),await this[_0x2f3172(0x182)](),this['recordSequence'](_0x43c7b9));if(_0x48aa97[_0x2f3172(0x155)]&&_0x58acad===!![]){if(this[_0x2f3172(0x239)]&&!this[_0x2f3172(0xfc)])this[_0x2f3172(0x1f7)]();else{if(!this[_0x2f3172(0x239)])this[_0x2f3172(0x1b4)](!![]);}}else{if(_0x48aa97['type']==='motion'&&_0x58acad===!![]){if(this[_0x2f3172(0x23e)])this[_0x2f3172(0x2ab)]();if(!this[_0x2f3172(0x239)]&&this['currentSystemMode']===SYSTEM_MODES[_0x2f3172(0x1aa)])this[_0x2f3172(0x1b4)](!![]);}}}async[a0_0x126fab(0x111)](_0x2ae468){const _0x309a93=a0_0x126fab,_0x3d8468=(_0x2ae468[_0x309a93(0x202)]||'')['toLowerCase'](),_0x2c287f=[_0x309a93(0x15a),_0x309a93(0x237),'pr√§senz',_0x309a93(0x18f),_0x309a93(0x1df),_0x309a93(0x1e2),'t√ºr',_0x309a93(0x162),_0x309a93(0x137),_0x309a93(0x1d3),_0x309a93(0x15f),_0x309a93(0xf4),_0x309a93(0x154),'switch',_0x309a93(0x211),'dimmer',_0x309a93(0x214)];if(!_0x2c287f[_0x309a93(0x251)](_0x1a3d16=>_0x3d8468[_0x309a93(0x2a6)](_0x1a3d16)))return;if(!_0x2ae468[_0x309a93(0x2b9)])return;if(this[_0x309a93(0x1bc)])clearTimeout(this[_0x309a93(0x1bc)]);this['activeSequence'][_0x309a93(0x17f)]({'loc':_0x2ae468[_0x309a93(0x28b)]||_0x309a93(0x21d),'id':_0x2ae468['id'],'ts':Date[_0x309a93(0x1db)]()}),this[_0x309a93(0x20f)][_0x309a93(0x18a)](_0x309a93(0x102)+_0x2ae468[_0x309a93(0x28b)]+_0x309a93(0x136)+this[_0x309a93(0x151)][_0x309a93(0x1cd)]+')'),this[_0x309a93(0x1bc)]=setTimeout(async()=>{const _0x2ebe92=_0x309a93;if(this[_0x2ebe92(0x151)][_0x2ebe92(0x1cd)]>0x1)await this[_0x2ebe92(0x1ac)]();this[_0x2ebe92(0x151)]=[];},SEQUENCE_TIMEOUT_MS);}async[a0_0x126fab(0x1ac)](){const _0x2239cf=a0_0x126fab;try{const _0x2f25f3=await this[_0x2239cf(0x248)]('LTM.trainingData.sequences');let _0x4cf880=[];if(_0x2f25f3&&_0x2f25f3['val'])try{_0x4cf880=JSON['parse'](_0x2f25f3[_0x2239cf(0x27f)]);}catch(_0x2ec055){}const _0x1bc7b0=this[_0x2239cf(0x151)][0x0]['ts'],_0x516506=this[_0x2239cf(0x151)][_0x2239cf(0x2a2)](_0x383351=>({'loc':_0x383351[_0x2239cf(0x264)],'t_delta':Math[_0x2239cf(0x261)]((_0x383351['ts']-_0x1bc7b0)/0x3e8)})),_0x178204={'timestamp':new Date(_0x1bc7b0)[_0x2239cf(0x20c)](),'steps':_0x516506,'duration':Math[_0x2239cf(0x261)]((this[_0x2239cf(0x151)][this[_0x2239cf(0x151)]['length']-0x1]['ts']-_0x1bc7b0)/0x3e8),'daytime':new Date(_0x1bc7b0)[_0x2239cf(0x2b3)]()};_0x4cf880[_0x2239cf(0x17f)](_0x178204);if(_0x4cf880[_0x2239cf(0x1cd)]>MAX_TRAINING_SET_SIZE)_0x4cf880[_0x2239cf(0x158)]();await this['setStateAsync'](_0x2239cf(0x14b),{'val':JSON['stringify'](_0x4cf880),'ack':!![]}),this[_0x2239cf(0x20a)](_0x178204);}catch(_0x3ab63a){this[_0x2239cf(0x20f)][_0x2239cf(0x172)]('[RECORDER]\x20Error\x20saving\x20sequence:\x20'+_0x3ab63a[_0x2239cf(0x277)]);}}[a0_0x126fab(0x20a)](_0x5de192){const _0x5b5c1b=a0_0x126fab;if(!this[_0x5b5c1b(0x282)])return;this[_0x5b5c1b(0x20f)]['debug'](_0x5b5c1b(0x15c)),this[_0x5b5c1b(0x1d7)](_0x5b5c1b(0x246),{'sequence':_0x5de192});}async[a0_0x126fab(0x1eb)](_0x3994ec,_0x1d52f7,_0x3611f9){const _0x402778=a0_0x126fab,_0x461c4e=await this[_0x402778(0x21e)](),_0xe08e43=await this[_0x402778(0x248)](_0x402778(0x187));let _0x496536=[];if(_0xe08e43&&_0xe08e43[_0x402778(0x27f)])try{_0x496536=JSON[_0x402778(0x18b)](_0xe08e43[_0x402778(0x27f)]);}catch(_0x2d53e2){}_0x496536[_0x402778(0x17f)]({'ts':Date['now'](),'room':_0x3611f9||_0x402778(0x21d),'t_in':_0x1d52f7,'t_out':_0x461c4e});if(_0x496536[_0x402778(0x1cd)]>THERMO_LOG_SIZE)_0x496536[_0x402778(0x158)]();await this[_0x402778(0x258)](_0x402778(0x187),{'val':JSON[_0x402778(0xf8)](_0x496536),'ack':!![]});}async[a0_0x126fab(0x21e)](){const _0xe03206=a0_0x126fab;if(this[_0xe03206(0x273)]['outdoorSensorId'])try{const _0x8f93ba=await this['getForeignStateAsync'](this['config'][_0xe03206(0x279)]);if(_0x8f93ba&&_0x8f93ba[_0xe03206(0x27f)]!==undefined&&_0x8f93ba[_0xe03206(0x27f)]!==null)return parseFloat(_0x8f93ba['val']);}catch(_0x9940bc){}const _0x436d86=this[_0xe03206(0x273)][_0xe03206(0x1f2)];if(!this[_0xe03206(0x273)]['useWeather']||!_0x436d86)return null;try{let _0x4c9d64='';if(_0x436d86[_0xe03206(0x2a6)](_0xe03206(0x25b)))_0x4c9d64=_0x436d86+_0xe03206(0x225);else{if(_0x436d86[_0xe03206(0x2a6)](_0xe03206(0xfe)))_0x4c9d64=_0x436d86+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x436d86[_0xe03206(0x2a6)](_0xe03206(0x11a)))_0x4c9d64=_0x436d86+_0xe03206(0x118);else{if(_0x436d86[_0xe03206(0x2a6)]('weatherunderground'))_0x4c9d64=_0x436d86+_0xe03206(0x245);}}}if(_0x4c9d64){const _0x4eb255=await this[_0xe03206(0x26c)](_0x4c9d64);if(_0x4eb255&&_0x4eb255['val']!==undefined&&_0x4eb255[_0xe03206(0x27f)]!==null)return parseFloat(_0x4eb255[_0xe03206(0x27f)]);}}catch(_0x145b2b){}return null;}[a0_0x126fab(0x2c0)](_0x1fdc9e){const _0x24d43c=a0_0x126fab;if(_0x1fdc9e[_0x24d43c(0x202)]===_0x24d43c(0x1ba))this[_0x24d43c(0x20f)]['debug'](_0x24d43c(0x26b));else{if(_0x1fdc9e[_0x24d43c(0x202)]===_0x24d43c(0x142)){const {anomaly_score:_0x512897,is_anomaly:_0x556459,threshold:_0x51ccfd}=_0x1fdc9e[_0x24d43c(0x191)];this[_0x24d43c(0x20f)][_0x24d43c(0x271)]('üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20'+_0x512897[_0x24d43c(0x171)](0x5)+_0x24d43c(0x178)+(_0x556459?_0x24d43c(0x2a3):'OK')),this[_0x24d43c(0x258)](_0x24d43c(0x15b),{'val':_0x512897,'ack':!![]}),this['setStateAsync'](_0x24d43c(0x23d),{'val':new Date()[_0x24d43c(0x20c)](),'ack':!![]});if(_0x556459){const _0x2efce8=_0x24d43c(0x23b)+_0x512897[_0x24d43c(0x171)](0x4)+')';this[_0x24d43c(0x258)](_0x24d43c(0x14c),{'val':!![],'ack':!![]}),this[_0x24d43c(0x258)](_0x24d43c(0x232),{'val':_0x2efce8,'ack':!![]}),this[_0x24d43c(0x1bd)](_0x24d43c(0x16d)+_0x2efce8,![],!![]);}}else{if(_0x1fdc9e[_0x24d43c(0x202)]===_0x24d43c(0x145)){const {success:_0x4638e5,details:_0x18357c}=_0x1fdc9e[_0x24d43c(0x191)];this[_0x24d43c(0x258)](_0x24d43c(0x204),{'val':_0x4638e5?_0x24d43c(0x1a8)+new Date()[_0x24d43c(0x166)]()+'\x20('+_0x18357c+')':_0x24d43c(0x1b1)+_0x18357c,'ack':!![]});}else{if(_0x1fdc9e[_0x24d43c(0x202)]===_0x24d43c(0x22b)){const {success:_0x3d7211,details:_0x4cdb35}=_0x1fdc9e['payload'];if(_0x3d7211)try{const _0x45a5c1=JSON['parse'](_0x4cdb35);if(_0x45a5c1[_0x24d43c(0x138)])this[_0x24d43c(0x258)](_0x24d43c(0x176),{'val':JSON['stringify'](_0x45a5c1[_0x24d43c(0x138)]),'ack':!![]});if(_0x45a5c1[_0x24d43c(0x236)])this[_0x24d43c(0x258)](_0x24d43c(0x135),{'val':JSON[_0x24d43c(0xf8)](_0x45a5c1[_0x24d43c(0x236)]),'ack':!![]});}catch(_0x1dd0db){}}else{if(_0x1fdc9e[_0x24d43c(0x202)]===_0x24d43c(0x1b8)){const {success:_0x39b36d,details:_0x57dd61}=_0x1fdc9e[_0x24d43c(0x191)];if(_0x39b36d)this[_0x24d43c(0x20f)][_0x24d43c(0x271)](_0x24d43c(0x23a)+_0x57dd61);}else{if(_0x1fdc9e[_0x24d43c(0x202)]==='HEALTH_RESULT'){const {is_anomaly:_0x1acfa4,details:_0x491ff8}=_0x1fdc9e[_0x24d43c(0x191)];this[_0x24d43c(0x258)](_0x24d43c(0x17d),{'val':new Date()['toISOString'](),'ack':!![]}),this['setStateAsync']('analysis.health.isAnomaly',{'val':_0x1acfa4,'ack':!![]});}else{if(_0x1fdc9e[_0x24d43c(0x202)]===_0x24d43c(0x2bb)){const {diagnosis:_0x27afc3,change_percent:_0x3dd264}=_0x1fdc9e[_0x24d43c(0x191)];this[_0x24d43c(0x20f)][_0x24d43c(0x271)](_0x24d43c(0x1fb)+_0x27afc3+'\x20('+_0x3dd264+'%)'),this['setStateAsync'](_0x24d43c(0x1be),{'val':_0x27afc3,'ack':!![]}),this[_0x24d43c(0x258)](_0x24d43c(0x255),{'val':_0x3dd264,'ack':!![]});}}}}}}}}[a0_0x126fab(0x1d7)](_0x4167d5,_0x300306={}){const _0x45868a=a0_0x126fab;if(!this[_0x45868a(0x280)]||!this['pythonProcess']['stdin']['writable'])return;const _0x4744a5=JSON[_0x45868a(0xf8)]({'command':_0x4167d5,..._0x300306});try{this[_0x45868a(0x280)][_0x45868a(0x1d4)][_0x45868a(0x14f)](_0x4744a5+'\x0a');}catch(_0x9116a7){}}async['initZombies'](){const _0x17dab8=a0_0x126fab;try{const _0x351e2c=['analysis.history_debug_00',_0x17dab8(0x26a)];for(const _0x51b5b7 of _0x351e2c){try{const _0x28fde8=await this[_0x17dab8(0x149)](_0x51b5b7);if(_0x28fde8)await this['delObjectAsync'](_0x51b5b7);}catch(_0x1f4baf){}}}catch(_0x11ad27){}}async[a0_0x126fab(0x25c)](_0x4c2e68){return!![];}async[a0_0x126fab(0x13d)](){const _0x1d2b02=a0_0x126fab;return _0x1d2b02(0x131);}async[a0_0x126fab(0x192)](){const _0x23fe7b=a0_0x126fab;try{const _0x5d24d9=await this[_0x23fe7b(0x22f)](_0x23fe7b(0x1d6));if(_0x5d24d9&&_0x5d24d9['common'])this[_0x23fe7b(0x24f)]={'latitude':_0x5d24d9['common'][_0x23fe7b(0x1b5)]||0x0,'longitude':_0x5d24d9[_0x23fe7b(0x153)]['longitude']||0x0,'city':_0x5d24d9[_0x23fe7b(0x153)][_0x23fe7b(0x274)]||''};}catch(_0x154232){}}async[a0_0x126fab(0x164)](){const _0xd5ff86=a0_0x126fab;try{const _0x8141bd=await this[_0xd5ff86(0x248)](LTM_DP_RAW_LOG);if(_0x8141bd&&_0x8141bd[_0xd5ff86(0x27f)])this[_0xd5ff86(0x284)]=JSON[_0xd5ff86(0x18b)](_0x8141bd[_0xd5ff86(0x27f)]);}catch(_0x1eb7c3){this[_0xd5ff86(0x284)]=[];}}async['saveRawEventLog'](){const _0x2022da=a0_0x126fab;if(this[_0x2022da(0x284)][_0x2022da(0x1cd)]>RAW_LOG_MAX_SIZE)this[_0x2022da(0x284)][_0x2022da(0x20e)](0x0,this[_0x2022da(0x284)]['length']-RAW_LOG_MAX_SIZE);await this['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x2022da(0xf8)](this[_0x2022da(0x284)]),'ack':!![]});}async[a0_0x126fab(0x133)](){const _0x1115b2=a0_0x126fab;try{const _0x3c1b05=await this[_0x1115b2(0x248)](LTM_DP_DAILY_DIGESTS);if(_0x3c1b05&&_0x3c1b05[_0x1115b2(0x27f)])this[_0x1115b2(0x105)]=JSON['parse'](_0x3c1b05[_0x1115b2(0x27f)]);}catch(_0x3172b2){this['dailyDigests']=[];}await this[_0x1115b2(0x2ac)]();}async[a0_0x126fab(0x14a)](_0x40f23f=!![]){const _0x488c30=a0_0x126fab,_0x53d095=this[_0x488c30(0x273)][_0x488c30(0x152)]||0x3c;this[_0x488c30(0x105)][_0x488c30(0x1cd)]>_0x53d095&&this['dailyDigests']['splice'](0x0,this['dailyDigests'][_0x488c30(0x1cd)]-_0x53d095);await this['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](this[_0x488c30(0x105)]),'ack':!![]});if(_0x40f23f)await this[_0x488c30(0x2ac)]();}async[a0_0x126fab(0x18d)](_0x1e2c6b){const _0x29cd13=a0_0x126fab;this['analysisHistory'][_0x29cd13(0x13f)](_0x1e2c6b);if(this[_0x29cd13(0x1e4)]['length']>ANALYSIS_HISTORY_MAX_SIZE)this[_0x29cd13(0x1e4)]['pop']();await this[_0x29cd13(0x258)]('analysis.analysisHistory',{'val':JSON[_0x29cd13(0xf8)](this[_0x29cd13(0x1e4)]),'ack':!![]});}async[a0_0x126fab(0x2ac)](){const _0x34db4c=a0_0x126fab;if(!this[_0x34db4c(0x282)]){await this['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x34db4c(0x17b),'ack':!![]});return;}const _0x4e000a=this[_0x34db4c(0x105)][_0x34db4c(0x1cd)]>=(this[_0x34db4c(0x273)][_0x34db4c(0x1cc)]||0x7)?'Aktiv\x20('+this[_0x34db4c(0x105)][_0x34db4c(0x1cd)]+_0x34db4c(0x29e):_0x34db4c(0x121)+this['dailyDigests'][_0x34db4c(0x1cd)]+'/'+(this['config'][_0x34db4c(0x1cc)]||0x7)+')';await this[_0x34db4c(0x258)](LTM_DP_BASELINE_STATUS,{'val':_0x4e000a,'ack':!![]});}async[a0_0x126fab(0x181)](){const _0x2f57ef=a0_0x126fab;try{const _0x377dc5=await this[_0x2f57ef(0x248)](SYSTEM_DP_MODE);_0x377dc5&&_0x377dc5[_0x2f57ef(0x27f)]&&Object[_0x2f57ef(0x10f)](SYSTEM_MODES)['includes'](_0x377dc5['val'])?this['currentSystemMode']=_0x377dc5[_0x2f57ef(0x27f)]:(this['currentSystemMode']=SYSTEM_MODES[_0x2f57ef(0x1aa)],await this[_0x2f57ef(0x258)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x2f57ef(0x1aa)],'ack':!![]}));}catch(_0x175144){this[_0x2f57ef(0x1a4)]=SYSTEM_MODES[_0x2f57ef(0x1aa)];}}async['createAllObjects'](){const _0x57caf9=a0_0x126fab;await this['extendObjectAsync'](_0x57caf9(0x11e),{'type':'channel','common':{'name':_0x57caf9(0x13e)},'native':{}});}async['createAllObjects'](){const _0x91ca02=a0_0x126fab;await this[_0x91ca02(0x19a)](_0x91ca02(0x11e),{'type':_0x91ca02(0x113),'common':{'name':_0x91ca02(0x13e)},'native':{}}),await this[_0x91ca02(0x19a)](SYSTEM_DP_MODE,{'type':_0x91ca02(0x13a),'common':{'name':_0x91ca02(0x269),'type':'string','role':_0x91ca02(0x13a),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x91ca02(0x1aa)]},'native':{}}),await this[_0x91ca02(0x1e1)](_0x91ca02(0x185),{'type':_0x91ca02(0x13a),'common':{'name':_0x91ca02(0x2aa),'type':_0x91ca02(0x2bc),'role':'text','read':!![],'write':![]},'native':{}}),await this[_0x91ca02(0x1e1)]('events.lastEvent',{'type':_0x91ca02(0x13a),'common':{'name':_0x91ca02(0x233),'type':'string','role':_0x91ca02(0x28c),'read':!![],'write':![]},'native':{}}),await this[_0x91ca02(0x1e1)]('events.history',{'type':_0x91ca02(0x13a),'common':{'name':_0x91ca02(0x25e),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await this[_0x91ca02(0x19a)](_0x91ca02(0x218),{'type':_0x91ca02(0x113),'common':{'name':_0x91ca02(0x22c)},'native':{}}),await this[_0x91ca02(0x1e1)](_0x91ca02(0x160),{'type':'state','common':{'name':'Train\x20Security','type':_0x91ca02(0x106),'role':_0x91ca02(0x165),'read':!![],'write':!![]},'native':{}}),await this[_0x91ca02(0x1e1)](_0x91ca02(0x28f),{'type':_0x91ca02(0x13a),'common':{'name':_0x91ca02(0x1e0),'type':_0x91ca02(0x106),'role':_0x91ca02(0x165),'read':!![],'write':!![]},'native':{}}),await this[_0x91ca02(0x1e1)](_0x91ca02(0x286),{'type':_0x91ca02(0x13a),'common':{'name':_0x91ca02(0x150),'type':_0x91ca02(0x106),'role':_0x91ca02(0x165),'read':!![],'write':!![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.training.status',{'type':'state','common':{'name':_0x91ca02(0x201),'type':_0x91ca02(0x2bc),'role':_0x91ca02(0x268),'read':!![],'write':![]},'native':{}}),await this[_0x91ca02(0x19a)]('analysis.security',{'type':_0x91ca02(0x113),'common':{'name':'Security\x20Monitor'},'native':{}}),await this[_0x91ca02(0x1e1)](_0x91ca02(0x15b),{'type':_0x91ca02(0x13a),'common':{'name':_0x91ca02(0x24e),'type':_0x91ca02(0x1b7),'role':'value','read':!![],'write':![]},'native':{}}),await this[_0x91ca02(0x1e1)](_0x91ca02(0x23d),{'type':_0x91ca02(0x13a),'common':{'name':'Last\x20Check','type':_0x91ca02(0x2bc),'role':'date','read':!![],'write':![]},'native':{}}),await this[_0x91ca02(0x19a)](_0x91ca02(0x27d),{'type':_0x91ca02(0x113),'common':{'name':_0x91ca02(0x285)},'native':{}}),await this[_0x91ca02(0x1e1)](_0x91ca02(0x17d),{'type':'state','common':{'name':_0x91ca02(0x197),'type':_0x91ca02(0x2bc),'role':_0x91ca02(0x200),'read':!![],'write':![]},'native':{}}),await this[_0x91ca02(0x1e1)](_0x91ca02(0x159),{'type':_0x91ca02(0x13a),'common':{'name':_0x91ca02(0x157),'type':_0x91ca02(0x106),'role':_0x91ca02(0x16a),'read':!![],'write':![]},'native':{}}),await this[_0x91ca02(0x1e1)](_0x91ca02(0x1be),{'type':_0x91ca02(0x13a),'common':{'name':_0x91ca02(0x101),'type':_0x91ca02(0x2bc),'role':_0x91ca02(0x268),'read':!![],'write':![]},'native':{}}),await this[_0x91ca02(0x1e1)](_0x91ca02(0x255),{'type':_0x91ca02(0x13a),'common':{'name':'Trend\x20Value','type':_0x91ca02(0x1b7),'role':_0x91ca02(0x2b9),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync']('analysis.energy',{'type':'channel','common':{'name':_0x91ca02(0x267)},'native':{}}),await this[_0x91ca02(0x1e1)](_0x91ca02(0x176),{'type':_0x91ca02(0x13a),'common':{'name':_0x91ca02(0x25a),'type':'string','role':_0x91ca02(0x268),'read':!![],'write':![]},'native':{}}),await this[_0x91ca02(0x1e1)](_0x91ca02(0x135),{'type':'state','common':{'name':'Heating\x20Score','type':_0x91ca02(0x2bc),'role':_0x91ca02(0x268),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync']('LTM',{'type':_0x91ca02(0x113),'common':{'name':_0x91ca02(0x293)},'native':{}}),await this[_0x91ca02(0x19a)](LTM_DP_RAW_LOG,{'type':_0x91ca02(0x13a),'common':{'name':_0x91ca02(0x175),'type':_0x91ca02(0x2bc),'role':_0x91ca02(0x28c),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x91ca02(0x13a),'common':{'name':'Daily\x20Digests','type':_0x91ca02(0x2bc),'role':_0x91ca02(0x28c),'read':!![],'write':![]},'native':{}}),await this[_0x91ca02(0x1e1)](_0x91ca02(0x14b),{'type':_0x91ca02(0x13a),'common':{'name':'Sequences','type':_0x91ca02(0x2bc),'role':_0x91ca02(0x28c),'read':!![],'write':![]},'native':{}}),await this[_0x91ca02(0x1e1)]('LTM.trainingData.thermodynamics',{'type':_0x91ca02(0x13a),'common':{'name':_0x91ca02(0x1cf),'type':_0x91ca02(0x2bc),'role':_0x91ca02(0x28c),'read':!![],'write':![]},'native':{}}),await this[_0x91ca02(0x1e1)](_0x91ca02(0x1e3),{'type':'state','common':{'name':'Trigger\x20Analysis','type':_0x91ca02(0x106),'role':_0x91ca02(0x165),'read':!![],'write':!![]},'native':{}}),await this[_0x91ca02(0x1e1)]('analysis.triggerBriefing',{'type':'state','common':{'name':'Trigger\x20Briefing','type':_0x91ca02(0x106),'role':_0x91ca02(0x165),'read':!![],'write':!![]},'native':{}}),await this[_0x91ca02(0x1e1)](_0x91ca02(0x14c),{'type':_0x91ca02(0x13a),'common':{'name':_0x91ca02(0x213),'type':_0x91ca02(0x106),'role':_0x91ca02(0xf3),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.alertReason',{'type':'state','common':{'name':_0x91ca02(0x219),'type':_0x91ca02(0x2bc),'role':_0x91ca02(0x2a4),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x91ca02(0x199),{'type':'state','common':{'name':_0x91ca02(0x2b7),'type':_0x91ca02(0x2bc),'role':'text','read':!![],'write':![]},'native':{}}),await this[_0x91ca02(0x1e1)](_0x91ca02(0x1cb),{'type':'state','common':{'name':_0x91ca02(0x206),'type':'boolean','role':'indicator','read':!![],'write':![]},'native':{}}),await this[_0x91ca02(0x1e1)](_0x91ca02(0x169),{'type':_0x91ca02(0x13a),'common':{'name':_0x91ca02(0xfd),'type':_0x91ca02(0x2bc),'role':_0x91ca02(0x268),'read':!![],'write':![]},'native':{}}),await this[_0x91ca02(0x1e1)](_0x91ca02(0x27e),{'type':'state','common':{'name':_0x91ca02(0x10a),'type':_0x91ca02(0x2bc),'role':_0x91ca02(0x268),'read':!![],'write':![]},'native':{}}),await this[_0x91ca02(0x1e1)](_0x91ca02(0x1a0),{'type':_0x91ca02(0x13a),'common':{'name':_0x91ca02(0x188),'type':_0x91ca02(0x2bc),'role':_0x91ca02(0x268),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.automation.autoApply',{'type':_0x91ca02(0x13a),'common':{'name':_0x91ca02(0x17a),'type':_0x91ca02(0x106),'role':_0x91ca02(0x2b4),'read':!![],'write':!![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.automation.triggerAction',{'type':_0x91ca02(0x13a),'common':{'name':_0x91ca02(0x180),'type':_0x91ca02(0x106),'role':_0x91ca02(0x165),'read':!![],'write':!![]},'native':{}});}async[a0_0x126fab(0x17c)](_0x444b32=''){const _0x308d0d=a0_0x126fab;if(!this[_0x308d0d(0x217)])return;if(this[_0x308d0d(0x129)][_0x308d0d(0x1cd)]===0x0)return;const _0xad58cb=this[_0x308d0d(0x129)]['slice'](0x0,0xf),_0x34907b=await this[_0x308d0d(0x235)](),_0x378f8e=this[_0x308d0d(0x1a4)],_0x562717=PERSONA_MAPPING[this[_0x308d0d(0x273)][_0x308d0d(0x2b5)]||_0x308d0d(0x1fd)],_0x4b4539=this[_0x308d0d(0x273)][_0x308d0d(0x221)]||_0x308d0d(0x28e);let _0x154ffc=_0x308d0d(0x1b9);try{const _0x448e14=await this[_0x308d0d(0x248)](_0x308d0d(0x185));if(_0x448e14&&_0x448e14[_0x308d0d(0x27f)])_0x154ffc=_0x448e14[_0x308d0d(0x27f)];}catch(_0x40e567){}let _0x5df46c=![];try{const _0x21fb5c=await this[_0x308d0d(0x248)](_0x308d0d(0x1e6));if(_0x21fb5c&&_0x21fb5c[_0x308d0d(0x27f)])_0x5df46c=!![];}catch(_0x2d64af){}const _0x52dd87=_0x308d0d(0x238)+_0x562717+_0x308d0d(0x1f5)+_0x4b4539+'.\x20SYSTEM_MODE:\x20'+_0x378f8e+_0x308d0d(0x270)+_0x34907b+_0x308d0d(0x227)+_0x154ffc+_0x308d0d(0x1fc)+JSON[_0x308d0d(0xf8)](_0xad58cb)+'.\x20EMERGENCY:\x20'+_0x444b32+_0x308d0d(0xf7);try{const _0x4c9030=await this[_0x308d0d(0x217)][_0x308d0d(0x2bf)](_0x52dd87),_0x4eb86c=_0x4c9030[_0x308d0d(0x24d)][_0x308d0d(0x268)]()[_0x308d0d(0x1f6)](/```json|```/g,'')[_0x308d0d(0x288)](),_0x536872=JSON[_0x308d0d(0x18b)](_0x4eb86c);await this[_0x308d0d(0x258)](_0x308d0d(0x257),{'val':JSON['stringify'](_0x536872),'ack':!![]});if(_0x536872[_0x308d0d(0x1d1)])await this[_0x308d0d(0x258)](_0x308d0d(0x199),{'val':_0x536872['summary'],'ack':!![]});const _0x3abb8a={'timestamp':Date['now'](),'id':Date[_0x308d0d(0x1db)]()['toString'](),'analysis':{'activity':{'summary':_0x536872[_0x308d0d(0x1d1)],'isAlert':_0x536872[_0x308d0d(0x18e)],'alertReason':_0x536872[_0x308d0d(0x26d)]},'comfort':{'automationProposal':_0x536872[_0x308d0d(0x1de)]}}};await this['updateAnalysisHistory'](_0x3abb8a);const _0x186cd4=_0x536872[_0x308d0d(0x18e)]||![];_0x186cd4!==this[_0x308d0d(0x222)]&&(await this[_0x308d0d(0x258)](_0x308d0d(0x14c),{'val':_0x186cd4,'ack':!![]}),this[_0x308d0d(0x222)]=_0x186cd4,_0x186cd4&&(await this[_0x308d0d(0x258)](_0x308d0d(0x232),{'val':_0x536872['alertReason'],'ack':!![]}),this[_0x308d0d(0x1bd)](_0x308d0d(0x140)+_0x536872[_0x308d0d(0x26d)],![],_0x536872['isEmergency'])));if(_0x536872['automationProposal']&&_0x536872['automationProposal'][_0x308d0d(0x173)]){await this[_0x308d0d(0x258)](_0x308d0d(0x1cb),{'val':!![],'ack':!![]}),await this[_0x308d0d(0x258)](_0x308d0d(0x169),{'val':_0x536872[_0x308d0d(0x1de)][_0x308d0d(0x266)],'ack':!![]}),await this['setStateAsync'](_0x308d0d(0x27e),{'val':_0x536872['automationProposal'][_0x308d0d(0x1d2)],'ack':!![]}),await this[_0x308d0d(0x258)](_0x308d0d(0x1a0),{'val':JSON[_0x308d0d(0xf8)](_0x536872['automationProposal']['targetValue']),'ack':!![]});if(_0x5df46c)this[_0x308d0d(0x22a)]();}}catch(_0xc27a05){this[_0x308d0d(0x20f)][_0x308d0d(0x172)](_0x308d0d(0x1f9)+_0xc27a05[_0x308d0d(0x277)]);}}async['createDailyDigest'](){const _0x256e48=a0_0x126fab;if(!this[_0x256e48(0x282)])return;await this[_0x256e48(0x258)](LTM_DP_STATUS,{'val':_0x256e48(0x1dd),'ack':!![]});if(!this['geminiModel']||this['rawEventLog'][_0x256e48(0x1cd)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await this[_0x256e48(0x258)](LTM_DP_STATUS,{'val':_0x256e48(0x1a6),'ack':!![]});return;}const _0x35b520=JSON['parse'](JSON[_0x256e48(0xf8)](this[_0x256e48(0x284)])),_0x291384=_0x35b520[_0x256e48(0x1cd)],_0x51cb22='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x256e48(0xf8)](_0x35b520);try{const _0x2068ee=await this[_0x256e48(0x217)][_0x256e48(0x2bf)](_0x51cb22),_0x3228f0=JSON[_0x256e48(0x18b)](_0x2068ee[_0x256e48(0x24d)][_0x256e48(0x268)]()[_0x256e48(0x1f6)](/```json|```/g,'')[_0x256e48(0x288)]()),_0x5c4d90={'timestamp':new Date()[_0x256e48(0x20c)](),'eventCount':_0x291384,'summary':_0x3228f0['summary']||_0x256e48(0x242),'activityLevel':_0x3228f0[_0x256e48(0x2a7)]||_0x256e48(0x11b),'systemMode':this[_0x256e48(0x1a4)]};this[_0x256e48(0x105)][_0x256e48(0x17f)](_0x5c4d90),await this[_0x256e48(0x14a)](),this[_0x256e48(0x284)]=[],await this[_0x256e48(0x182)](),await this['setStateAsync'](LTM_DP_STATUS,{'val':_0x256e48(0x100),'ack':!![]});if(this[_0x256e48(0x282)])this[_0x256e48(0x1d7)](_0x256e48(0x2b8),{'digest':_0x5c4d90});}catch(_0x3ffbe4){this[_0x256e48(0x20f)]['error'](_0x3ffbe4['message']);}}async[a0_0x126fab(0x2af)](){const _0xf9e221=a0_0x126fab;if(!this[_0xf9e221(0x282)]||!this[_0xf9e221(0x217)])return;const _0x107110=this[_0xf9e221(0x273)]['ltmStbWindowDays']||0xe;if(this[_0xf9e221(0x105)][_0xf9e221(0x1cd)]<_0x107110+0x7){await this[_0xf9e221(0x258)](LTM_DP_DRIFT_STATUS,{'val':_0xf9e221(0x203),'ack':!![]});return;}const _0x52777a=this[_0xf9e221(0x105)]['slice'](-_0x107110),_0x4eec09=this[_0xf9e221(0x105)][_0xf9e221(0x254)](0x0,this['dailyDigests'][_0xf9e221(0x1cd)]-_0x107110),_0x33c734=_0xf9e221(0x21a)+JSON[_0xf9e221(0xf8)](_0x4eec09)+'\x0aSTB:\x20'+JSON[_0xf9e221(0xf8)](_0x52777a);try{const _0x29d05d=await this[_0xf9e221(0x217)][_0xf9e221(0x2bf)](_0x33c734),_0x4558ea=JSON['parse'](_0x29d05d[_0xf9e221(0x24d)][_0xf9e221(0x268)]()[_0xf9e221(0x1f6)](/```json|```/g,'')[_0xf9e221(0x288)]());_0x4558ea[_0xf9e221(0x207)]&&(await this[_0xf9e221(0x258)](LTM_DP_DRIFT_STATUS,{'val':_0x4558ea['baselineDrift'],'ack':!![]}),await this[_0xf9e221(0x258)](LTM_DP_DRIFT_DETAILS,{'val':_0x4558ea[_0xf9e221(0x21b)],'ack':!![]}),await this[_0xf9e221(0x258)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0xf9e221(0x1db)](),'ack':!![]}));}catch(_0x8581af){}}async[a0_0x126fab(0x231)](){const _0x43eb97=a0_0x126fab;if(!this[_0x43eb97(0x217)])return;this['log'][_0x43eb97(0x271)](_0x43eb97(0x119));const _0x5edd19=this['dailyDigests'][_0x43eb97(0x1cd)]>0x0?this[_0x43eb97(0x105)][this['dailyDigests']['length']-0x1]:null,_0x2b3714=_0x5edd19&&_0x5edd19[_0x43eb97(0x126)]?_0x5edd19[_0x43eb97(0x126)][_0x43eb97(0x252)]:_0x43eb97(0x1bb),_0x44a527=new Date();_0x44a527[_0x43eb97(0x250)](0x4,0x0,0x0,0x0);const _0x45f6a6=this['eventHistory'][_0x43eb97(0x1ff)](_0x9d67a9=>new Date(_0x9d67a9['timestamp'])>_0x44a527),_0x20763b=PERSONA_MAPPING[this[_0x43eb97(0x273)][_0x43eb97(0x2b5)]||_0x43eb97(0x1fd)],_0x340dbb=this[_0x43eb97(0x273)][_0x43eb97(0x221)]||'',_0x29f0aa=await this[_0x43eb97(0x235)](),_0x274026=await this['getCalendarContext'](),_0x5c55c8='ROLLE:\x20Assistent.\x20AUFGABE:\x20Schreibe\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20'+_0x20763b+_0x43eb97(0x1f5)+_0x340dbb+_0x43eb97(0x125)+_0x29f0aa+'\x20'+_0x274026+_0x43eb97(0x16b)+_0x2b3714+_0x43eb97(0x2bd);try{const _0x5612cb=await this['geminiModel'][_0x43eb97(0x2bf)](_0x5c55c8),_0x4210e6='üåÖ\x20Daily\x20Briefing:\x0a'+_0x5612cb[_0x43eb97(0x24d)]['text']()[_0x43eb97(0x288)]();this[_0x43eb97(0x1bd)](_0x4210e6);}catch(_0x10a390){this['log']['error']('Briefing\x20Error:\x20'+_0x10a390['message']);}}async[a0_0x126fab(0x263)](_0x435c58){const _0x32e71b=a0_0x126fab;try{const _0x31e0a7=await this[_0x32e71b(0x26c)](_0x435c58+_0x32e71b(0x115));if(_0x31e0a7&&_0x31e0a7[_0x32e71b(0x27f)]){const _0x512095=JSON[_0x32e71b(0x18b)](_0x31e0a7['val']);if(Array['isArray'](_0x512095))return[...new Set(_0x512095['map'](_0x1450bc=>_0x1450bc[_0x32e71b(0x243)])['filter'](Boolean))][_0x32e71b(0x21c)]();}}catch(_0x3cb7ef){}return[];}async['getCalendarContext'](){const _0xa0ec7c=a0_0x126fab;if(!this[_0xa0ec7c(0x273)][_0xa0ec7c(0x1c5)])return _0xa0ec7c(0x127);const _0x48829a=this['config'][_0xa0ec7c(0x296)]||_0xa0ec7c(0x287);try{const _0x2d6bb5=await this[_0xa0ec7c(0x26c)](_0x48829a+'.data.table');if(_0x2d6bb5&&_0x2d6bb5[_0xa0ec7c(0x27f)]){let _0x324b9c=JSON['parse'](_0x2d6bb5['val']);if(Array[_0xa0ec7c(0x1e5)](_0x324b9c)){if(_0x324b9c[_0xa0ec7c(0x1cd)]>0x0)return _0xa0ec7c(0x16f)+_0x324b9c['slice'](0x0,0x3)[_0xa0ec7c(0x2a2)](_0x3be9f8=>_0x3be9f8[_0xa0ec7c(0x1d0)])['join'](',\x20');}}}catch(_0x32a612){}return _0xa0ec7c(0x170);}async[a0_0x126fab(0x2a9)](_0x32cabc){const _0xf5fc71=a0_0x126fab;this[_0xf5fc71(0x20f)]['info'](_0xf5fc71(0x278)+JSON['stringify'](_0x32cabc));}async['initSensorSubscriptions'](){const _0x55b390=a0_0x126fab,_0xcdb7c5=this[_0x55b390(0x273)]['devices'];if(_0xcdb7c5)for(const _0x5d426f of _0xcdb7c5){await this[_0x55b390(0x128)](_0x5d426f['id']);}}async[a0_0x126fab(0x29c)](){const _0x59dba8=a0_0x126fab,_0x576cae=this[_0x59dba8(0x273)][_0x59dba8(0x209)];if(_0x576cae)for(const _0x2e0a86 of _0x576cae){await this[_0x59dba8(0x128)](_0x2e0a86);}}async[a0_0x126fab(0x18c)](){const _0x255edb=a0_0x126fab,_0x129b8c=this[_0x255edb(0x273)][_0x255edb(0xf5)];if(this[_0x255edb(0x273)][_0x255edb(0x10b)]&&_0x129b8c)await this[_0x255edb(0x128)](_0x129b8c+_0x255edb(0x198));}async[a0_0x126fab(0x27b)](){const _0x38b4e4=a0_0x126fab;try{const _0x24572a=this[_0x38b4e4(0x273)][_0x38b4e4(0x209)]||[];let _0x246182=![];const _0x1db077=[];for(const _0x3ff4ae of _0x24572a){try{const _0x30b8b6=await this[_0x38b4e4(0x26c)](_0x3ff4ae);_0x30b8b6&&(_0x30b8b6[_0x38b4e4(0x27f)]===!![]||_0x30b8b6[_0x38b4e4(0x27f)]===_0x38b4e4(0x29a)||_0x30b8b6[_0x38b4e4(0x27f)]===0x1)&&(_0x246182=!![],_0x1db077['push'](_0x3ff4ae));}catch(_0x341524){}}return await this[_0x38b4e4(0x258)](_0x38b4e4(0x185),{'val':_0x1db077[_0x38b4e4(0x21f)](',\x20'),'ack':!![]}),_0x246182&&(this['exitTimer']&&(this[_0x38b4e4(0x20f)][_0x38b4e4(0x271)](_0x38b4e4(0x22d)),this[_0x38b4e4(0x2ab)]()),!this[_0x38b4e4(0x239)]&&this[_0x38b4e4(0x1a4)]===SYSTEM_MODES[_0x38b4e4(0x1aa)]&&await this[_0x38b4e4(0x1b4)](!![])),_0x246182;}catch(_0x1dfbbf){return![];}}['startExitTimer'](){const _0xc14a37=a0_0x126fab;this['abortExitTimer'](),this[_0xc14a37(0xfc)]=!![],this[_0xc14a37(0x146)]=setTimeout(()=>{this['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),this[_0xc14a37(0x23e)]=setTimeout(()=>{const _0xda3422=_0xc14a37;this[_0xda3422(0x1b4)](![]),this[_0xda3422(0x23e)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}[a0_0x126fab(0x2ab)](){const _0x2d1a50=a0_0x126fab;if(this['exitTimer'])clearTimeout(this['exitTimer']);if(this[_0x2d1a50(0x146)])clearTimeout(this[_0x2d1a50(0x146)]);this[_0x2d1a50(0x23e)]=null,this[_0x2d1a50(0x146)]=null,this[_0x2d1a50(0xfc)]=![];}async['setPresence'](_0x56d37f){const _0x10303a=a0_0x126fab;if(this[_0x10303a(0x239)]===_0x56d37f)return;this[_0x10303a(0x239)]=_0x56d37f,await this['setStateAsync'](_0x10303a(0x1e9),{'val':_0x56d37f,'ack':!![]});}async[a0_0x126fab(0x22a)](){const _0x46e710=a0_0x126fab;try{const _0x4153df=await this['getStateAsync'](_0x46e710(0x27e)),_0xdaed00=await this[_0x46e710(0x248)]('analysis.automation.targetValue');if(_0x4153df&&_0x4153df[_0x46e710(0x27f)]&&_0xdaed00){const _0x234781=_0x4153df[_0x46e710(0x27f)];let _0xea4652=_0xdaed00['val'];try{_0xea4652=JSON[_0x46e710(0x18b)](_0xea4652);}catch(_0x55e3a8){}this[_0x46e710(0x20f)][_0x46e710(0x271)](_0x46e710(0x19e)+_0x234781+_0x46e710(0x1c2)+_0xea4652),await this['setForeignStateAsync'](_0x234781,_0xea4652);}else this[_0x46e710(0x20f)]['warn'](_0x46e710(0x253));}catch(_0x3d96fd){this['log']['error'](_0x46e710(0x256)+_0x3d96fd[_0x46e710(0x277)]);}}async[a0_0x126fab(0x10c)](_0x129b25){const _0xcd976c=a0_0x126fab;let _0x354def=_0x129b25;_0x129b25['startsWith']('[')&&(_0x354def=_0x129b25[_0xcd976c(0x1c7)](_0x129b25[_0xcd976c(0x2ba)](']')+0x1));if(_0x354def===_0xcd976c(0x147))await this[_0xcd976c(0x258)](_0xcd976c(0x14c),{'val':![],'ack':!![]}),await this[_0xcd976c(0x258)](_0xcd976c(0x232),{'val':_0xcd976c(0x1a7),'ack':!![]}),this['lastAlertState']=![],this[_0xcd976c(0x1bd)](_0xcd976c(0xff),![]);else _0x354def==='COGNI_REQUEST_CALL'&&this[_0xcd976c(0x1bd)]('üìû\x20R√úCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20R√ºckruf-Button\x20gedr√ºckt.',![],!![]);}async[a0_0x126fab(0x1bd)](_0x468811,_0x5bf9a5=![],_0x244f77=![]){const _0x11944a=a0_0x126fab,_0x2afa31=this['config'];if(_0x2afa31[_0x11944a(0x10b)]){let _0x2ef7d3={};(_0x468811['includes'](_0x11944a(0x2a8))||_0x244f77)&&(_0x2ef7d3={'reply_markup':{'inline_keyboard':[[{'text':'‚úÖ\x20Alles\x20OK\x20(Reset)','callback_data':_0x11944a(0x147)}],[{'text':_0x11944a(0x19c),'callback_data':_0x11944a(0x24b)}]]}}),await this[_0x11944a(0x25d)](_0x2afa31[_0x11944a(0xf5)],'send',{'text':_0x468811,'user':_0x2afa31[_0x11944a(0x210)],..._0x2ef7d3});}if(_0x2afa31[_0x11944a(0x161)]){let _0x2fba94={'message':_0x468811,'title':_0x244f77?'üö®\x20EMERGENCY':_0x11944a(0x130),'priority':_0x244f77?0x2:0x1,'device':_0x2afa31[_0x11944a(0x1ca)]};_0x244f77&&(_0x2fba94[_0x11944a(0x143)]=0x1e,_0x2fba94['expire']=0xe10,_0x2fba94[_0x11944a(0x22e)]=_0x11944a(0x189)),await this[_0x11944a(0x25d)](_0x2afa31[_0x11944a(0x262)],_0x11944a(0x2ad),_0x2fba94);}_0x2afa31[_0x11944a(0x220)]&&await this['sendToAsync'](_0x2afa31[_0x11944a(0x2b6)],'send',{'text':_0x468811,'to':_0x2afa31[_0x11944a(0x12a)]});}async[a0_0x126fab(0x24c)](){const _0x428078=a0_0x126fab,_0x19377d=this[_0x428078(0x273)]['inactivityThresholdHours'],_0x4c766e=this[_0x428078(0x129)][_0x428078(0x1cd)]>0x0?this[_0x428078(0x129)][0x0][_0x428078(0x212)]:Date[_0x428078(0x1db)](),_0x1cdf06=(Date[_0x428078(0x1db)]()-_0x4c766e)/(0x3e8*0x3c*0x3c);let _0x5c8e6f='';this['config'][_0x428078(0x15d)]&&this[_0x428078(0x1a4)]===SYSTEM_MODES[_0x428078(0x1aa)]&&this['isPresent']&&(_0x1cdf06>_0x19377d&&(_0x5c8e6f=_0x428078(0x174)+_0x1cdf06[_0x428078(0x171)](0x1)+'h.')),this[_0x428078(0x17c)](_0x5c8e6f);}async['runPythonHealthCheck'](){const _0x6dadc9=a0_0x126fab;if(!this[_0x6dadc9(0x105)]||this[_0x6dadc9(0x105)][_0x6dadc9(0x1cd)]<0x2)return;const _0xa74040=this['dailyDigests'][_0x6dadc9(0x2a2)](_0x298896=>{const _0x3860d3=_0x6dadc9,_0x6b5d91=(_0x298896[_0x3860d3(0x2a7)]||'')[_0x3860d3(0x11f)]();return ACTIVITY_LEVEL_MAP[_0x6b5d91]||0x32;});this[_0x6dadc9(0x1d7)](_0x6dadc9(0x1b3),{'values':_0xa74040,'tag':'Activity-Level'});}}if(require[a0_0x126fab(0x1ad)]!==module)module[a0_0x126fab(0x295)]=_0x171c18=>new CogniLiving(_0x171c18);else new CogniLiving();