const a0_0xcb3924=a0_0x55dd;function a0_0x55dd(_0x5dfdb6,_0x429389){const _0x18bc6=a0_0x5915();return a0_0x55dd=function(_0x2d6394,_0x580b80){_0x2d6394=_0x2d6394-0x161;let _0x59152f=_0x18bc6[_0x2d6394];return _0x59152f;},a0_0x55dd(_0x5dfdb6,_0x429389);}(function(_0x4937f3,_0x2d59cb){const _0x511995=a0_0x55dd,_0x1ff9c4=_0x4937f3();while(!![]){try{const _0x57bdc9=parseInt(_0x511995(0x2bf))/0x1*(-parseInt(_0x511995(0x2ef))/0x2)+parseInt(_0x511995(0x237))/0x3*(parseInt(_0x511995(0x188))/0x4)+-parseInt(_0x511995(0x166))/0x5*(-parseInt(_0x511995(0x18c))/0x6)+-parseInt(_0x511995(0x18d))/0x7*(parseInt(_0x511995(0x1a8))/0x8)+parseInt(_0x511995(0x27d))/0x9+-parseInt(_0x511995(0x175))/0xa*(parseInt(_0x511995(0x211))/0xb)+-parseInt(_0x511995(0x2a5))/0xc;if(_0x57bdc9===_0x2d59cb)break;else _0x1ff9c4['push'](_0x1ff9c4['shift']());}catch(_0x5447c7){_0x1ff9c4['push'](_0x1ff9c4['shift']());}}}(a0_0x5915,0xe476d));const a0_0x580b80=(function(){let _0x552e34=!![];return function(_0x512fbe,_0x3758fd){const _0x3a44d5=_0x552e34?function(){const _0x375c35=a0_0x55dd;if(_0x3758fd){const _0xd14e08=_0x3758fd[_0x375c35(0x202)](_0x512fbe,arguments);return _0x3758fd=null,_0xd14e08;}}:function(){};return _0x552e34=![],_0x3a44d5;};}()),a0_0x2d6394=a0_0x580b80(this,function(){const _0x3c7942=a0_0x55dd;return a0_0x2d6394['toString']()[_0x3c7942(0x206)](_0x3c7942(0x257))[_0x3c7942(0x255)]()[_0x3c7942(0x283)](a0_0x2d6394)[_0x3c7942(0x206)]('(((.+)+)+)+$');});a0_0x2d6394();function a0_0x5915(){const _0x264499=['Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','lastCheck','icon','notifyWhatsappInstance','manufacturer','version','scriptProblem','analysis.automation.patternDetected','info.','Started\x20at\x20','sensor.motion','toLowerCase','comment','de-DE','scanDevices','checkSystemObjects','Action',',\x20Location:\x20','0\x204\x20*\x20*\x20*','apply','N/A\x20(Pro\x20Feature)','Skipped\x20(No\x20AI\x20or\x20Data)','getForeignObjectsAsync','search','object','parse','warn','STANDORT:\x20Lat\x20','OPERATING_VOLTAGE','SABOTAGE','analysis.automation.description','Activity\x20Summary','latitude','saveFeedback','4256164wrjXjI','LTM','baselineDrift','runGeminiAnalysis','scriptEnabled','Sending\x20notification:\x20\x22','wetter','loadSystemMode','geminiApiKey','debug','reachable','Pattern\x20Detected','DIRECTION','Gemini\x20AI\x20initialized.','2-digit','name','axios','isAlert','reverse','namespace','k√ºche','PROCESS','modeResetJob','colormode','longitude','Flur','battery','find','weatherunderground.','boolean','enum','Starting\x20Autopilot\x20(','Event\x20History','isProVersion','sat','pr√§senz','test','lampe','945CIjrXh','PARTY','notifySignalInstance','.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','vacation','checkLtmDriftObjects','cancel','1.\x20ANALYSE:\x20Bewerte\x20Sensor-Events.\x20deviation=\x27N/A\x27.','material.','Starting\x20Smart\x20Scan\x20with\x20filters:\x20','splice','analysis.deviationFromBaseline','Badezimmer','bad','toISOString','weather','PRIORIT√ÑT:\x20Gesundheit\x20und\x20Sicherheit\x20f√ºr\x20Senioren\x20(AAL).\x20Erkenne\x20Inaktivit√§t,\x20potenzielle\x20St√ºrze\x20(indirekt),\x20ungew√∂hnliche\x20n√§chtliche\x20Aktivit√§t.\x20Komfort\x20ist\x20sekund√§r.','error','createAllObjects','getSystemUUID','minDaysForBaseline','ROLLE:\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20KONTEXT:\x20','Automation\x20Proposals','Running\x20in\x20FREE\x20mode\x20(LTM\x20&\x20Automation\x20disabled).','dailyDigests','alert','enum.functions.*','ready','Urlaub','sendToAsync','toString','apiKey','(((.+)+)+)+$','WEEK_PROGRAM','value.temperature','text','garten','analysis.feedbackHistory','Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung\x20f√ºr\x20einen\x20einzelnen\x20Bewohner.\x20Aktivit√§tsmuster\x20sind\x20flexibel.','send','rating','Gemini\x20API\x20Key\x20missing.\x20AI\x20features\x20disabled.','subscribeStates','uniqueid','1.\x20ANALYSE\x20&\x20DEVIATION:\x20Vergleiche\x20Events\x20mit\x20STB.\x20deviation=\x27none|slight|significant|critical\x27.','Garten','GUEST','Licht','.on','diele','timestamp','genAI','analysisTimer','party','Daily\x20Digests','.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20','loadRawEventLog','N/A','loadDailyDigests','getForeignObjectAsync','notifyWhatsappRecipient','some','javascript.0.script','.\x20PERSONA:\x20','length','Alert\x20Reason','analysis.lastResult','startsWith','checkLicense','UNREACH','13006008hLIlUQ','onUnload','analysis.alertReason','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20AUTOMATION:\x20patternDetected=true/false.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20EVENTS:\x20','replace','createDailyDigest','constructor','STB\x20(Recent\x20History):\x20','info','activity','driftAnalysisTimer','cogni-living\x20adapter\x20starting\x20(v','switch.light','notifyEmailInstance','analysisHistory','temperatur','LTM.driftAnalysis.driftDetails','native','SECTION','getForeignStateAsync','endsWith','config','extendObjectAsync','LTM.processingStatus','wind','LTM.rawEventLog','ü§ñ\x20AI\x20Prompt\x20Context\x20-\x20Time:\x20','automationProposal','rauch','historyId','lastAlertState','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.\x20Erwarte\x20hohe\x20Aktivit√§tsniveaus.','log','indicator','sensorLastValues','ROLLE:\x20Data\x20Scientist.\x20VERGLEICHE:\x20Dataset\x20A\x20(Recent)\x20vs\x20B\x20(Established).\x20ZIEL:\x20Erkenne\x20Drift.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aB\x20(LTB):\x0a','state','LOWBAT','city','\x0a\x0aUSER\x20FEEDBACK\x20/\x20LERN-CONTEXT\x20(Vermeide\x20diese\x20Fehler):\x0a','20620296hKUCUe','details','icons-mfd.','-\x20User\x20Feedback:\x20Alarm\x20\x22','No\x20recent\x20activity.','LTM.dailyDigests','channel','CONFIG_PENDING','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SCHEMA:\x20{\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x22comfort\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22suggestion\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22suggestedAction\x22:\x20\x22string\x22\x20}\x20}\x20}','PRO-','.state','onReady','system.config','notifyEmailRecipient','System\x20Mode','long','leuchte','Deaktiviert\x20(Pro-Feature)','sendTo','\x22\x20at\x20','summary','application/json','string','\x20sent','Comfort\x20Suggestion','toUpperCase','7BtbenZ','AES_KEY','0\x203\x20*\x20*\x20*','Gast','common','setupLtmScheduler','now','systemConfig','\x0a\x20\x20\x20\x20\x20\x20\x20\x20MODUS:\x20','status','licenseKey','Drift\x20Details','models/gemini-flash-latest','val','subscribeForeignStatesAsync','ERROR','‚úÖ\x20Server\x20(simuliert):\x20Lizenz\x20g√ºltig.','ltmStbWindowDays','system.meta.uuid','analysis.isAlert','generic','sensor.door','getStateAsync','onMessage','LTM.driftAnalysis','mode','testNotification','events.lastEvent','ON_TIME','push','ltmDriftCheckIntervalHours','saveDailyDigests','driftDetails','scanForDevices','analysis.trigger','COMBINED_PARAMETER','Lernphase\x20(','notifyTelegramEnabled','Success','join','currentSystemMode','ack','analysis.activitySummary','Aktiv\x20(','enum.rooms.*','aiPersona','N/A\x20(No\x20Activity)','Last\x20raw\x20event','289862SxNjdO','hue','vis.','Trigger\x20Digest','Bewegung','K√ºche','ltmLtbWindowDays','detectionState','RSSI','‚úÖ\x20License\x20check\x20successful:\x20PRO\x20features\x20enabled.','checkLtmObjects','getGenerativeModel','unshift','5YZZuRm','TEST-PRO-KEY','No\x20Key','runAutopilot','Schlafzimmer','Fenster/T√ºr','updateAnalysisHistory','presence','notifySignalEnabled','logDuplicates','Subscribing\x20to\x20','signal','activityLevel','notifyTelegramRecipient','schlaf','30CvICxa','notifyPushoverRecipient','\x0a\x0aA\x20(STB):\x0a','ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AKTUELLE\x20ZEIT:\x20','Adapter','_score','fire','sendNotification','response','Drift\x20Status','members','onStateChange','type','‚ö†Ô∏è\x20DEV-MODE:\x20Lokaler\x20Test-Schl√ºssel\x20erkannt.\x20Pro-Features\x20aktiviert.','stateChange','scheduleJob','Schalter/Licht','analysis.comfortSuggestion','systemUUID','23340atWSLq','description','admin.','notifySignalRecipient','9733086lmmRWy','531174YgFEFb','AI\x20Alert\x20Status','Drift\x20Analysis','unknown','json','analysis.analysisHistory','.\x20KONTEXT:\x20','notifyPushoverEnabled','geminiModel','resetAnalysisStates','.bri','LTM.driftAnalysis.baselineDrift','toLocaleTimeString','t√ºr','pop','Party','updateBaselineStatus','temperature','command','NORMAL','stringify','notifyWhatsappEnabled','uuid','slice','Feedback\x20gespeichert:\x20','firmware','processSensorEvent','8KkJuZl','split','\x20was\x20FALSE.\x20Reason:\x20','includes','yr.','update','Processing\x20Status','system','griff','rawEventLog','Feedback\x20Log','productname','mac\x20address','Unbekannt','archetype','ltmJob','alertReason','trim','\x20min).','Last\x20Check','runBaselineDriftAnalysis','Error:\x20','link_quality','Pro\x20Feature','setupDriftAnalysisScheduler','location','callback','Wohnzimmer','saveRawEventLog','notifyTelegramInstance','Comfort\x20Summary','FAULT','value.humidity','message','comfort','selectedFunctionIds','flot.','feedbackHistory','devices','button','openweathermap.','motion','generateContent','submitFeedback','toLocaleString','bewegung','smoke','lights','setStateAsync','VIRTUAL_CHANNEL','livingContext','getLtmData','connection','filter','testApiKey','eventHistory','Rauchmelder','\x20f√ºr\x20Event\x20','number','ALARM','@iobroker/adapter-core','setObjectNotExistsAsync','notifyPushoverInstance','guest','max','setState','PRIORIT√ÑT:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungew√∂hnliche\x20Anwesenheit\x20bei\x20Abwesenheit\x20der\x20Bewohner\x20oder\x20Fehlfunktionen,\x20die\x20auf\x20ein\x20Sicherheitsrisiko\x20hindeuten.','text.alarm','@google/generative-ai','from','bind'];a0_0x5915=function(){return _0x264499;};return a0_0x5915();}'use strict';const utils=require(a0_0xcb3924(0x1e4)),{GoogleGenerativeAI}=require(a0_0xcb3924(0x1ec)),schedule=require('node-schedule'),axios=require(a0_0xcb3924(0x221)),HISTORY_MAX_SIZE=0x32,FEEDBACK_MAX_SIZE=0x14,GEMINI_MODEL='models/gemini-flash-latest',ANALYSIS_HISTORY_MAX_SIZE=0x64,RAW_LOG_MAX_SIZE=0x5dc,DAILY_DIGEST_MAX_SIZE_LIMIT=0xb4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,LTM_SCHEDULE=a0_0xcb3924(0x2c1),LTM_DP_RAW_LOG=a0_0xcb3924(0x296),LTM_DP_DAILY_DIGESTS=a0_0xcb3924(0x2aa),LTM_DP_STATUS=a0_0xcb3924(0x294),LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS='LTM.baselineStatus',LTM_DP_DRIFT_CHANNEL=a0_0xcb3924(0x2d7),LTM_DP_DRIFT_STATUS=a0_0xcb3924(0x198),LTM_DP_DRIFT_DETAILS=a0_0xcb3924(0x28d),LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE='system.mode',MODE_RESET_SCHEDULE=a0_0xcb3924(0x201),SYSTEM_MODES={'NORMAL':'normal','VACATION':a0_0xcb3924(0x23b),'PARTY':a0_0xcb3924(0x26c),'GUEST':a0_0xcb3924(0x1e7)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0xcb3924(0x238)],SYSTEM_MODES[a0_0xcb3924(0x265)]],PERSONA_MAPPING={'generic':a0_0xcb3924(0x1ef),'senior_aal':a0_0xcb3924(0x247),'family':a0_0xcb3924(0x29c),'single_comfort':a0_0xcb3924(0x25d),'security':a0_0xcb3924(0x1ea)};class CogniLiving extends utils[a0_0xcb3924(0x179)]{constructor(_0x3a7682){const _0x1eb9ec=a0_0xcb3924;super({..._0x3a7682,'name':'cogni-living'}),this[_0x1eb9ec(0x1df)]=[],this[_0x1eb9ec(0x28b)]=[],this['feedbackHistory']=[],this[_0x1eb9ec(0x1b1)]=[],this[_0x1eb9ec(0x24f)]=[],this['sensorLastValues']={},this[_0x1eb9ec(0x2c6)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x1eb9ec(0x26a)]=null,this[_0x1eb9ec(0x195)]=null,this[_0x1eb9ec(0x2e7)]=SYSTEM_MODES[_0x1eb9ec(0x1a0)],this[_0x1eb9ec(0x232)]=![],this[_0x1eb9ec(0x29b)]=![],this['systemUUID']=_0x1eb9ec(0x190),this['analysisTimer']=null,this[_0x1eb9ec(0x1b7)]=null,this[_0x1eb9ec(0x227)]=null,this[_0x1eb9ec(0x287)]=null,this['on'](_0x1eb9ec(0x252),this['onReady'][_0x1eb9ec(0x1ee)](this)),this['on'](_0x1eb9ec(0x183),this['onStateChange'][_0x1eb9ec(0x1ee)](this)),this['on']('unload',this[_0x1eb9ec(0x27e)][_0x1eb9ec(0x1ee)](this)),this['on'](_0x1eb9ec(0x1c9),this[_0x1eb9ec(0x2d6)][_0x1eb9ec(0x1ee)](this));}async[a0_0xcb3924(0x2b0)](){const _0x4476d6=a0_0xcb3924,_0x15e039=this['version']||_0x4476d6(0x190);this[_0x4476d6(0x29d)][_0x4476d6(0x285)](_0x4476d6(0x288)+_0x15e039+')'),this[_0x4476d6(0x292)][_0x4476d6(0x2c9)]=this[_0x4476d6(0x292)][_0x4476d6(0x2c9)]||'',this[_0x4476d6(0x232)]=await this[_0x4476d6(0x27b)](this[_0x4476d6(0x292)][_0x4476d6(0x2c9)]);this[_0x4476d6(0x232)]?this[_0x4476d6(0x29d)]['info'](_0x4476d6(0x162)):this[_0x4476d6(0x29d)][_0x4476d6(0x285)](_0x4476d6(0x24e));if(!this['config']['minDaysForBaseline']||this['config'][_0x4476d6(0x24b)]<0x1)this[_0x4476d6(0x292)][_0x4476d6(0x24b)]=0x7;if(!this[_0x4476d6(0x292)][_0x4476d6(0x2d0)]||this[_0x4476d6(0x292)][_0x4476d6(0x2d0)]<0x1)this[_0x4476d6(0x292)][_0x4476d6(0x2d0)]=0xe;if(!this[_0x4476d6(0x292)][_0x4476d6(0x2f5)]||this[_0x4476d6(0x292)][_0x4476d6(0x2f5)]<0x1e)this[_0x4476d6(0x292)]['ltmLtbWindowDays']=0x3c;this[_0x4476d6(0x292)]['ltmLtbWindowDays']=Math['min'](Math[_0x4476d6(0x1e8)](this[_0x4476d6(0x292)][_0x4476d6(0x2f5)],this[_0x4476d6(0x292)][_0x4476d6(0x2d0)]+0xe),DAILY_DIGEST_MAX_SIZE_LIMIT);try{const _0x3a23a3=await this[_0x4476d6(0x272)](_0x4476d6(0x2b1));_0x3a23a3&&_0x3a23a3[_0x4476d6(0x2c3)]&&(this['systemConfig'][_0x4476d6(0x20f)]=_0x3a23a3[_0x4476d6(0x2c3)][_0x4476d6(0x20f)]||0x0,this['systemConfig']['longitude']=_0x3a23a3[_0x4476d6(0x2c3)]['longitude']||0x0,this['systemConfig']['city']=_0x3a23a3[_0x4476d6(0x2c3)][_0x4476d6(0x2a3)]||'',this[_0x4476d6(0x29d)][_0x4476d6(0x285)]('üìç\x20Standort\x20geladen:\x20'+(this['systemConfig']['city']||'Unbekannt')+'\x20('+this[_0x4476d6(0x2c6)][_0x4476d6(0x20f)]+',\x20'+this[_0x4476d6(0x2c6)][_0x4476d6(0x229)]+')'));}catch(_0x2e406d){this[_0x4476d6(0x29d)][_0x4476d6(0x209)]('Konnte\x20System-Standort\x20nicht\x20laden.');}if(this[_0x4476d6(0x292)]['geminiApiKey'])try{this[_0x4476d6(0x26a)]=new GoogleGenerativeAI(this[_0x4476d6(0x292)][_0x4476d6(0x219)]),this[_0x4476d6(0x195)]=this['genAI'][_0x4476d6(0x164)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x4476d6(0x2ba)}}),this['log']['info'](_0x4476d6(0x21e));}catch(_0x3096ed){this[_0x4476d6(0x29d)]['error']('Gemini\x20Init\x20Error:\x20'+_0x3096ed[_0x4476d6(0x1c9)]);}else this[_0x4476d6(0x29d)][_0x4476d6(0x209)](_0x4476d6(0x260));await this[_0x4476d6(0x249)](),await this['loadSystemMode']();const _0x188be2=await this[_0x4476d6(0x2d5)]('analysis.isAlert');this[_0x4476d6(0x29b)]=_0x188be2?!!_0x188be2[_0x4476d6(0x2cc)]:![];try{const _0x3f71c=await this[_0x4476d6(0x2d5)]('analysis.analysisHistory');if(_0x3f71c&&_0x3f71c[_0x4476d6(0x2cc)])this[_0x4476d6(0x28b)]=JSON[_0x4476d6(0x208)](_0x3f71c[_0x4476d6(0x2cc)][_0x4476d6(0x255)]());}catch(_0x145001){this[_0x4476d6(0x28b)]=[];}try{const _0x5c4483=await this[_0x4476d6(0x2d5)](_0x4476d6(0x25c));if(_0x5c4483&&_0x5c4483['val'])this[_0x4476d6(0x1cd)]=JSON[_0x4476d6(0x208)](_0x5c4483['val'][_0x4476d6(0x255)]());}catch(_0x55f3ac){this['feedbackHistory']=[];}await this[_0x4476d6(0x26f)](),await this[_0x4476d6(0x271)](),this[_0x4476d6(0x261)](_0x4476d6(0x2e1)),this[_0x4476d6(0x261)](LTM_DP_TRIGGER_DIGEST),this['subscribeStates'](SYSTEM_DP_MODE);const _0x4afd37=this['config'][_0x4476d6(0x1ce)];if(_0x4afd37&&_0x4afd37[_0x4476d6(0x277)]>0x0){this['log'][_0x4476d6(0x285)](_0x4476d6(0x170)+_0x4afd37['length']+'\x20sensors...');for(const _0x14cffd of _0x4afd37){if(_0x14cffd['id']){await this[_0x4476d6(0x2cd)](_0x14cffd['id']);try{const _0x4a9ada=await this[_0x4476d6(0x290)](_0x14cffd['id']);if(_0x4a9ada)this[_0x4476d6(0x29f)][_0x14cffd['id']]=_0x4a9ada[_0x4476d6(0x2cc)];}catch(_0x2405d9){}}}}if(this['analysisTimer'])clearInterval(this[_0x4476d6(0x26b)]);const _0x583128=this[_0x4476d6(0x292)]['analysisInterval']||0xf;_0x583128>0x0&&(this[_0x4476d6(0x29d)][_0x4476d6(0x285)](_0x4476d6(0x230)+_0x583128+_0x4476d6(0x1ba)),this[_0x4476d6(0x26b)]=setInterval(()=>this[_0x4476d6(0x169)](),_0x583128*0x3c*0x3e8)),this[_0x4476d6(0x2c4)](),this['setupModeResetScheduler'](),this[_0x4476d6(0x1c0)]();}async[a0_0xcb3924(0x2e0)](_0x48a773={}){const _0x5a60a4=a0_0xcb3924;this[_0x5a60a4(0x29d)]['info'](_0x5a60a4(0x240)+JSON[_0x5a60a4(0x1a1)](_0x48a773));const _0xaca55c=[],_0x331f7e=_0x48a773[_0x5a60a4(0x1d1)]!==![],_0xefd4ff=_0x48a773['doors']!==![],_0x697710=_0x48a773[_0x5a60a4(0x1d7)]!==![],_0xb22a1b=_0x48a773[_0x5a60a4(0x19e)]===!![],_0x5d5d1d=_0x48a773[_0x5a60a4(0x246)]===!![],_0x27a0ad=_0x48a773[_0x5a60a4(0x1cb)]||[],_0x30193=await this[_0x5a60a4(0x205)](_0x5a60a4(0x2eb),_0x5a60a4(0x22f)),_0x2e69c6=await this['getForeignObjectsAsync'](_0x5a60a4(0x251),_0x5a60a4(0x22f)),_0x6c3b67={},_0x1b650b={},_0x36de4e={},_0x34ef5d=(_0x2e8006,_0x544caa,_0x55558a=![])=>{const _0x359b3a=_0x5a60a4;if(!_0x2e8006)return;for(const _0x3c6f33 in _0x2e8006){const _0x2ff1c6=_0x2e8006[_0x3c6f33];if(_0x2ff1c6&&_0x2ff1c6[_0x359b3a(0x2c3)]&&_0x2ff1c6[_0x359b3a(0x2c3)][_0x359b3a(0x17f)]){const _0x14f0c5=(typeof _0x2ff1c6[_0x359b3a(0x2c3)][_0x359b3a(0x220)]===_0x359b3a(0x207)?_0x2ff1c6[_0x359b3a(0x2c3)][_0x359b3a(0x220)]['de']:_0x2ff1c6[_0x359b3a(0x2c3)]['name'])||_0x2ff1c6[_0x359b3a(0x2c3)]['name'];if(_0x55558a)_0x36de4e[_0x3c6f33]=_0x14f0c5;for(const _0x240404 of _0x2ff1c6[_0x359b3a(0x2c3)][_0x359b3a(0x17f)]){if(_0x55558a){if(!_0x544caa[_0x240404])_0x544caa[_0x240404]=[];_0x544caa[_0x240404][_0x359b3a(0x2dc)](_0x3c6f33);}else _0x544caa[_0x240404]=_0x14f0c5;}}}};_0x34ef5d(_0x30193,_0x6c3b67),_0x34ef5d(_0x2e69c6,_0x1b650b,!![]);const _0x38aaa6=await this[_0x5a60a4(0x205)]('*',_0x5a60a4(0x2a1)),_0x5103e4=[_0x5a60a4(0x27c),_0x5a60a4(0x2a2),'LOW_BAT',_0x5a60a4(0x161),_0x5a60a4(0x2ce),_0x5a60a4(0x1c7),_0x5a60a4(0x20c),_0x5a60a4(0x1e3),_0x5a60a4(0x2ac),'DUTYCYCLE','DUTY_CYCLE','WORKING',_0x5a60a4(0x21d),'STICKY_UNREACH',_0x5a60a4(0x20b),_0x5a60a4(0x1d9),'INSTALL_TEST',_0x5a60a4(0x2e2),_0x5a60a4(0x258),_0x5a60a4(0x2db),_0x5a60a4(0x28f),'ERROR_CODE',_0x5a60a4(0x226),_0x5a60a4(0x2c0),'CONNECTION',_0x5a60a4(0x21b),_0x5a60a4(0x1be),_0x5a60a4(0x22b),_0x5a60a4(0x1ad),_0x5a60a4(0x1a6),_0x5a60a4(0x1f4),_0x5a60a4(0x1dc),'info',_0x5a60a4(0x171),'last_seen','last\x20action',_0x5a60a4(0x1b6),_0x5a60a4(0x250),_0x5a60a4(0x2d8),_0x5a60a4(0x228),'effect','xy','ct',_0x5a60a4(0x2f0),_0x5a60a4(0x233),_0x5a60a4(0x1b3),_0x5a60a4(0x1f3),'modelid',_0x5a60a4(0x262),_0x5a60a4(0x19f),_0x5a60a4(0x1b4),_0x5a60a4(0x189),'capabilities','process',_0x5a60a4(0x215),_0x5a60a4(0x1f5),_0x5a60a4(0x275),_0x5a60a4(0x2f6),_0x5a60a4(0x2b9),_0x5a60a4(0x1f1),'history','forecast',_0x5a60a4(0x285),'json'];if(!_0x5d5d1d)_0x5103e4[_0x5a60a4(0x2dc)](_0x5a60a4(0x217),_0x5a60a4(0x246),_0x5a60a4(0x295),'pressure','uv','rain','precip');const _0x134cf3=['system.',_0x5a60a4(0x18a),_0x5a60a4(0x1f7),_0x5a60a4(0x2f1),'history.',_0x5a60a4(0x23f),_0x5a60a4(0x2a7),_0x5a60a4(0x1cc)];if(!_0x5d5d1d)_0x134cf3['push']('daswetter.',_0x5a60a4(0x22d),'accuweather.',_0x5a60a4(0x1ac),_0x5a60a4(0x1d0));const _0x770fc5=(_0x24e9ae,_0x14e947,_0x1e689b=![])=>{const _0xb10a25=_0x5a60a4,_0x35738a=_0x24e9ae[_0xb10a25(0x1a9)]('.');if(_0x14e947[_0x24e9ae])return _0x14e947[_0x24e9ae];if(_0x35738a[_0xb10a25(0x277)]>0x2&&_0x14e947[_0x35738a[_0xb10a25(0x1a4)](0x0,-0x1)['join']('.')])return _0x14e947[_0x35738a[_0xb10a25(0x1a4)](0x0,-0x1)[_0xb10a25(0x2e6)]('.')];if(_0x35738a[_0xb10a25(0x277)]>0x3&&_0x14e947[_0x35738a[_0xb10a25(0x1a4)](0x0,-0x2)['join']('.')])return _0x14e947[_0x35738a['slice'](0x0,-0x2)[_0xb10a25(0x2e6)]('.')];return _0x1e689b?[]:null;};for(const _0x11fdec in _0x38aaa6){const _0x4a40d0=_0x38aaa6[_0x11fdec];if(!_0x4a40d0||!_0x4a40d0[_0x5a60a4(0x2c3)])continue;if(_0x134cf3[_0x5a60a4(0x274)](_0x4d4afa=>_0x11fdec['startsWith'](_0x4d4afa)))continue;const _0x17af56=_0x4a40d0[_0x5a60a4(0x2c3)]['role']||'',_0x9dddd4=(_0x4a40d0[_0x5a60a4(0x2c3)][_0x5a60a4(0x220)]&&typeof _0x4a40d0[_0x5a60a4(0x2c3)]['name']===_0x5a60a4(0x207)?_0x4a40d0[_0x5a60a4(0x2c3)][_0x5a60a4(0x220)]['de']:_0x4a40d0[_0x5a60a4(0x2c3)]['name'])||'',_0x10b69a=_0x11fdec[_0x5a60a4(0x2be)](),_0x422191=_0x9dddd4?_0x9dddd4['toLowerCase']():'',_0xb9d41a=_0x11fdec[_0x5a60a4(0x1fa)](),_0x2840a9=_0x770fc5(_0x11fdec,_0x6c3b67),_0x5a87f2=_0x770fc5(_0x11fdec,_0x1b650b,!![]);let _0x8757e8=null,_0x2be32b=![];if(_0x5a87f2&&_0x5a87f2[_0x5a60a4(0x277)]>0x0){const _0x20eaf8=_0x5a87f2[_0x5a60a4(0x22c)](_0x57d626=>_0x27a0ad['includes'](_0x57d626));if(_0x20eaf8){_0x2be32b=!![];const _0x4df920=_0x36de4e[_0x20eaf8];if(_0xb9d41a[_0x5a60a4(0x1ab)](_0x5a60a4(0x16d))||_0xb9d41a['includes']('motion'))_0x8757e8=_0x5a60a4(0x2f3);else{if(_0xb9d41a['includes'](_0x5a60a4(0x1d6))||_0xb9d41a['includes'](_0x5a60a4(0x17b))||_0x422191['includes'](_0x5a60a4(0x299)))_0x8757e8=_0x5a60a4(0x1e0);else{if(_0xb9d41a[_0x5a60a4(0x1ab)](_0x5a60a4(0x2a1))||_0xb9d41a[_0x5a60a4(0x1ab)]('level')||_0xb9d41a[_0x5a60a4(0x1ab)]('on'))_0x8757e8=_0x5a60a4(0x185);else _0x8757e8=_0x4df920;}}}}if(!_0x2be32b&&!_0x5d5d1d){if(_0x5103e4[_0x5a60a4(0x274)](_0x585500=>_0x422191[_0x5a60a4(0x1ab)](_0x585500)||_0x10b69a[_0x5a60a4(0x1ab)](_0x585500)))continue;}if(!_0x8757e8&&_0x331f7e){const _0x1c2fa3=_0x17af56[_0x5a60a4(0x1ab)](_0x5a60a4(0x1f9))||_0x17af56[_0x5a60a4(0x1ab)]('occupancy'),_0x66336f=_0x422191[_0x5a60a4(0x1ab)](_0x5a60a4(0x1d5))||_0x422191['includes'](_0x5a60a4(0x234));if(_0x1c2fa3||_0x66336f)_0x8757e8=_0x5a60a4(0x2f3);}if(!_0x8757e8&&_0xefd4ff){const _0x790918=_0xb9d41a[_0x5a60a4(0x1ab)]('shutter_contact')&&_0xb9d41a[_0x5a60a4(0x291)](_0x5a60a4(0x2af));(_0x790918||_0x17af56['includes'](_0x5a60a4(0x2d4))||_0x17af56['includes']('sensor.window')||(_0x422191[_0x5a60a4(0x1ab)]('fenster')||_0x422191['includes'](_0x5a60a4(0x19a)))&&!_0x422191[_0x5a60a4(0x1ab)]('temp')&&!_0x422191[_0x5a60a4(0x1ab)](_0x5a60a4(0x1b0))&&(_0x4a40d0['common'][_0x5a60a4(0x181)]==='boolean'||_0x4a40d0['common']['type']===_0x5a60a4(0x1e2)))&&(_0x8757e8=_0x5a60a4(0x16b));}if(!_0x8757e8&&_0x697710){const _0x315ced=_0x17af56[_0x5a60a4(0x1ab)](_0x5a60a4(0x289))||_0x17af56[_0x5a60a4(0x1ab)]('level.dimmer'),_0x398f23=_0x422191['includes']('licht')||_0x422191[_0x5a60a4(0x1ab)](_0x5a60a4(0x236))||_0x422191[_0x5a60a4(0x1ab)](_0x5a60a4(0x2b5)),_0x124b88=_0xb9d41a[_0x5a60a4(0x291)](_0x5a60a4(0x2af))||_0xb9d41a['endsWith'](_0x5a60a4(0x267))||_0xb9d41a[_0x5a60a4(0x291)]('.level')||_0xb9d41a['endsWith'](_0x5a60a4(0x197))||_0xb9d41a['endsWith']('.brightness');(_0x315ced||_0x398f23)&&_0x124b88&&_0x4a40d0['common']['write']&&(_0x8757e8=_0x5a60a4(0x266));}!_0x8757e8&&_0xb22a1b&&((_0x17af56[_0x5a60a4(0x1ab)](_0x5a60a4(0x259))||_0x17af56[_0x5a60a4(0x1ab)](_0x5a60a4(0x1c8))||_0x422191[_0x5a60a4(0x1ab)](_0x5a60a4(0x28c)))&&(_0x8757e8='Temperatur'));if(_0x8757e8){let _0x3c71dc=_0x2840a9||'';if(!_0x3c71dc){if(_0x422191['includes'](_0x5a60a4(0x244)))_0x3c71dc=_0x5a60a4(0x243);else{if(_0x422191['includes'](_0x5a60a4(0x225)))_0x3c71dc=_0x5a60a4(0x2f4);else{if(_0x422191['includes']('wohn'))_0x3c71dc=_0x5a60a4(0x1c3);else{if(_0x422191[_0x5a60a4(0x1ab)](_0x5a60a4(0x174)))_0x3c71dc=_0x5a60a4(0x16a);else{if(_0x422191[_0x5a60a4(0x1ab)]('flur')||_0x422191[_0x5a60a4(0x1ab)](_0x5a60a4(0x268)))_0x3c71dc=_0x5a60a4(0x22a);else{if(_0x422191['includes'](_0x5a60a4(0x25b)))_0x3c71dc=_0x5a60a4(0x264);}}}}}}let _0x12074f=0x0;if(_0x2be32b)_0x12074f+=0x1e;else{if(_0x2840a9)_0x12074f+=0x14;else{if(_0x3c71dc)_0x12074f+=0xa;}}_0xaca55c[_0x5a60a4(0x2dc)]({'id':_0x11fdec,'name':_0x9dddd4||_0x11fdec,'type':_0x8757e8,'location':_0x3c71dc,'logDuplicates':_0x8757e8===_0x5a60a4(0x2f3),'_score':_0x12074f});}}return _0xaca55c['sort']((_0x23cf72,_0x51f3f8)=>_0x51f3f8[_0x5a60a4(0x17a)]-_0x23cf72['_score']),_0xaca55c;}async[a0_0xcb3924(0x24a)](){const _0x192c9f=a0_0xcb3924;try{const _0x5b958b=await this[_0x192c9f(0x272)](_0x192c9f(0x2d1));if(_0x5b958b&&_0x5b958b[_0x192c9f(0x28e)]&&_0x5b958b['native']['uuid'])return _0x5b958b[_0x192c9f(0x28e)][_0x192c9f(0x1a3)];return'uuid-not-found';}catch(_0x4f4494){return'uuid-error';}}async[a0_0xcb3924(0x27b)](_0x332817){const _0xaea95=a0_0xcb3924;if(!_0x332817)return![];this[_0xaea95(0x187)]=await this[_0xaea95(0x24a)](),this[_0xaea95(0x29d)]['info']('Lizenzpr√ºfung\x20gestartet\x20f√ºr\x20System-UUID:\x20'+this[_0xaea95(0x187)]);if(_0x332817===_0xaea95(0x167))return this[_0xaea95(0x29d)][_0xaea95(0x285)](_0xaea95(0x182)),!![];if(_0x332817[_0xaea95(0x27a)](_0xaea95(0x2ae)))return this[_0xaea95(0x29d)][_0xaea95(0x285)](_0xaea95(0x2cf)),!![];return![];}async[a0_0xcb3924(0x249)](){const _0x314bb3=a0_0xcb3924;await this[_0x314bb3(0x1fe)](),await this['setObjectNotExistsAsync']('events.lastEvent',{'type':_0x314bb3(0x2a1),'common':{'name':_0x314bb3(0x2ee),'type':_0x314bb3(0x2bb),'role':_0x314bb3(0x191),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('events.history',{'type':_0x314bb3(0x2a1),'common':{'name':_0x314bb3(0x231),'type':_0x314bb3(0x2bb),'role':_0x314bb3(0x191),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x314bb3(0x2e1),{'type':_0x314bb3(0x2a1),'common':{'name':'Trigger\x20Analysis','type':'boolean','role':_0x314bb3(0x1cf),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x314bb3(0x1e5)](_0x314bb3(0x279),{'type':'state','common':{'name':'Last\x20Result','type':'string','role':_0x314bb3(0x191),'read':!![],'write':![]},'native':{}}),await this[_0x314bb3(0x1e5)](_0x314bb3(0x2d2),{'type':_0x314bb3(0x2a1),'common':{'name':_0x314bb3(0x18e),'type':_0x314bb3(0x22e),'role':'indicator.alarm','read':!![],'write':![],'def':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x314bb3(0x27f),{'type':_0x314bb3(0x2a1),'common':{'name':_0x314bb3(0x278),'type':_0x314bb3(0x2bb),'role':_0x314bb3(0x1eb),'read':!![],'write':![]},'native':{}}),await this[_0x314bb3(0x1e5)]('analysis.activitySummary',{'type':_0x314bb3(0x2a1),'common':{'name':_0x314bb3(0x20e),'type':'string','role':_0x314bb3(0x25a),'read':!![],'write':![]},'native':{}}),await this[_0x314bb3(0x1e5)](_0x314bb3(0x242),{'type':_0x314bb3(0x2a1),'common':{'name':'Deviation','type':_0x314bb3(0x2bb),'role':_0x314bb3(0x2a1),'read':!![],'write':![],'def':_0x314bb3(0x270)},'native':{}}),await this[_0x314bb3(0x1e5)]('analysis.comfortSummary',{'type':'state','common':{'name':_0x314bb3(0x1c6),'type':_0x314bb3(0x2bb),'role':_0x314bb3(0x25a),'read':!![],'write':![]},'native':{}}),await this[_0x314bb3(0x1e5)](_0x314bb3(0x186),{'type':_0x314bb3(0x2a1),'common':{'name':_0x314bb3(0x2bd),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await this[_0x314bb3(0x293)]('analysis.automation',{'type':_0x314bb3(0x2ab),'common':{'name':_0x314bb3(0x24d)},'native':{}}),await this[_0x314bb3(0x1e5)](_0x314bb3(0x1f6),{'type':'state','common':{'name':_0x314bb3(0x21c),'type':_0x314bb3(0x22e),'role':_0x314bb3(0x29e),'read':!![],'write':![],'def':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x314bb3(0x20d),{'type':_0x314bb3(0x2a1),'common':{'name':'Description','type':'string','role':'text','read':!![],'write':![]},'native':{}}),await this[_0x314bb3(0x1e5)]('analysis.automation.suggestedAction',{'type':'state','common':{'name':_0x314bb3(0x1ff),'type':'string','role':_0x314bb3(0x25a),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x314bb3(0x192),{'type':_0x314bb3(0x2a1),'common':{'name':'Logbook','type':'string','role':_0x314bb3(0x191),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x314bb3(0x1e5)](_0x314bb3(0x25c),{'type':_0x314bb3(0x2a1),'common':{'name':_0x314bb3(0x1b2),'type':_0x314bb3(0x2bb),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x314bb3(0x163)](),await this[_0x314bb3(0x23c)]();}[a0_0xcb3924(0x180)](_0x40ca7c,_0x45b400){const _0xf10ee9=a0_0xcb3924;if(!_0x45b400)return;if(_0x40ca7c===this[_0xf10ee9(0x224)]+'.'+SYSTEM_DP_MODE){_0x45b400['val']&&Object['values'](SYSTEM_MODES)[_0xf10ee9(0x1ab)](_0x45b400['val'])&&(this[_0xf10ee9(0x2e7)]=_0x45b400[_0xf10ee9(0x2cc)]);if(!_0x45b400[_0xf10ee9(0x2e8)])this[_0xf10ee9(0x1e9)](_0x40ca7c,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x45b400[_0xf10ee9(0x2e8)]){_0x40ca7c[_0xf10ee9(0x1ab)](_0xf10ee9(0x2e1))&&_0x45b400[_0xf10ee9(0x2cc)]&&(this[_0xf10ee9(0x1e9)](_0x40ca7c,{'val':![],'ack':!![]}),this[_0xf10ee9(0x214)]());if(_0x40ca7c[_0xf10ee9(0x1ab)]('triggerDailyDigest')&&_0x45b400[_0xf10ee9(0x2cc)]){this[_0xf10ee9(0x1e9)](_0x40ca7c,{'val':![],'ack':!![]});if(this[_0xf10ee9(0x232)])this[_0xf10ee9(0x282)]();}return;}const _0x2aaf0f=(this[_0xf10ee9(0x292)][_0xf10ee9(0x1ce)]||[])[_0xf10ee9(0x22c)](_0x321364=>_0x321364['id']===_0x40ca7c);if(_0x2aaf0f)this[_0xf10ee9(0x1a7)](_0x40ca7c,_0x45b400,_0x2aaf0f);}async['processSensorEvent'](_0x51f7f0,_0x250a8d,_0x4ed4e7){const _0x740ae9=a0_0xcb3924;if(!_0x4ed4e7[_0x740ae9(0x16f)]&&this[_0x740ae9(0x29f)][_0x51f7f0]===_0x250a8d[_0x740ae9(0x2cc)])return;this['sensorLastValues'][_0x51f7f0]=_0x250a8d[_0x740ae9(0x2cc)];const _0x487182={'timestamp':_0x250a8d['ts'],'id':_0x51f7f0,'name':_0x4ed4e7[_0x740ae9(0x220)],'value':_0x250a8d[_0x740ae9(0x2cc)],'location':_0x4ed4e7[_0x740ae9(0x1c1)],'type':_0x4ed4e7[_0x740ae9(0x181)]};this[_0x740ae9(0x1df)][_0x740ae9(0x165)](_0x487182);if(this['eventHistory']['length']>HISTORY_MAX_SIZE)this[_0x740ae9(0x1df)][_0x740ae9(0x19b)]();await this['setStateAsync'](_0x740ae9(0x2da),{'val':JSON[_0x740ae9(0x1a1)](_0x487182),'ack':!![]}),this[_0x740ae9(0x1b1)]['push']({'timestamp':new Date(_0x250a8d['ts'])[_0x740ae9(0x245)](),'sensorName':_0x4ed4e7[_0x740ae9(0x220)],'location':_0x4ed4e7[_0x740ae9(0x1c1)],'value':_0x250a8d['val']}),await this[_0x740ae9(0x1c4)]();}[a0_0xcb3924(0x169)](){const _0x376518=a0_0xcb3924;if(this[_0x376518(0x1df)]['length']===0x0){this[_0x376518(0x1e9)](_0x376518(0x2d2),{'val':![],'ack':!![]}),this[_0x376518(0x196)]();return;}const _0x26e4ed=Date['now']();if(_0x26e4ed-this[_0x376518(0x1df)][0x0][_0x376518(0x269)]>(this[_0x376518(0x292)]['analysisInterval']||0xf)*0x3c*0x3e8){this['setState'](_0x376518(0x2d2),{'val':![],'ack':!![]}),this[_0x376518(0x196)]();return;}this[_0x376518(0x214)]()['catch'](_0xf8a4cc=>this['log'][_0x376518(0x248)](_0xf8a4cc));}async[a0_0xcb3924(0x214)](){const _0x40c245=a0_0xcb3924;if(!this['geminiModel']||this[_0x40c245(0x1df)][_0x40c245(0x277)]===0x0)return;const _0x392042=PERSONA_MAPPING[this['config'][_0x40c245(0x2ec)]||_0x40c245(0x2d3)],_0x3ae431=this[_0x40c245(0x292)][_0x40c245(0x1da)]||'',_0x518ce1=this['currentSystemMode'],_0x3a11df=new Date(),_0x5dc293=_0x3a11df[_0x40c245(0x1d4)](_0x40c245(0x1fc),{'weekday':_0x40c245(0x2b4),'hour':_0x40c245(0x21f),'minute':_0x40c245(0x21f)}),_0x8ea5b8=this[_0x40c245(0x2c6)],_0x52d4fd=_0x40c245(0x20a)+_0x8ea5b8[_0x40c245(0x20f)]+',\x20Lon\x20'+_0x8ea5b8['longitude']+'\x20('+(_0x8ea5b8[_0x40c245(0x2a3)]||_0x40c245(0x1b5))+').\x20Nutze\x20dies\x20f√ºr\x20Sonnenstand/Lichtverh√§ltnisse.';this[_0x40c245(0x29d)][_0x40c245(0x21a)](_0x40c245(0x297)+_0x5dc293+_0x40c245(0x200)+_0x8ea5b8[_0x40c245(0x2a3)]);let _0x2de502='Baseline:\x20Inactive.',_0x34c80e=_0x40c245(0x23e);if(this[_0x40c245(0x232)]&&this[_0x40c245(0x24f)][_0x40c245(0x277)]>=(this['config'][_0x40c245(0x24b)]||0x7)&&_0x518ce1===SYSTEM_MODES['NORMAL']){const _0x259c0e=this[_0x40c245(0x24f)][_0x40c245(0x1a4)](-(this[_0x40c245(0x292)]['ltmStbWindowDays']||0xe))[_0x40c245(0x223)]();_0x2de502=_0x40c245(0x284)+JSON[_0x40c245(0x1a1)](_0x259c0e),_0x34c80e=_0x40c245(0x263);}let _0xc98d35='';if(this[_0x40c245(0x1cd)][_0x40c245(0x277)]>0x0){const _0x469218=this[_0x40c245(0x1cd)][_0x40c245(0x1dd)](_0x2b567d=>_0x2b567d[_0x40c245(0x25f)]==='false_positive'||_0x2b567d[_0x40c245(0x25f)]==='needs_improvement')[_0x40c245(0x1a4)](0x0,0x3)['map'](_0x47a4fd=>_0x40c245(0x2a8)+_0x47a4fd[_0x40c245(0x1b8)]+_0x40c245(0x2b8)+new Date(_0x47a4fd[_0x40c245(0x269)])[_0x40c245(0x199)]()+_0x40c245(0x1aa)+(_0x47a4fd[_0x40c245(0x1fb)]||'No\x20comment')+'.')[_0x40c245(0x2e6)]('\x0a');_0x469218&&(_0xc98d35=_0x40c245(0x2a4)+_0x469218+'\x0a');}const _0x2dcc99=_0x40c245(0x178)+_0x5dc293+'.\x20'+_0x52d4fd+_0x40c245(0x2c7)+_0x518ce1+_0x40c245(0x193)+_0x3ae431+_0x40c245(0x276)+_0x392042+_0x40c245(0x26e)+_0x2de502+'\x20'+_0xc98d35+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20'+_0x34c80e+_0x40c245(0x280)+JSON[_0x40c245(0x1a1)](this[_0x40c245(0x1df)])+_0x40c245(0x2ad);try{const _0x4540e8=await this[_0x40c245(0x195)][_0x40c245(0x1d2)](_0x2dcc99),_0x4447be=JSON[_0x40c245(0x208)](_0x4540e8[_0x40c245(0x17d)][_0x40c245(0x25a)]()[_0x40c245(0x281)](/```json|```/g,'')[_0x40c245(0x1b9)]());await this[_0x40c245(0x1d8)]('analysis.lastResult',{'val':JSON[_0x40c245(0x1a1)](_0x4447be),'ack':!![]}),await this[_0x40c245(0x1d8)](_0x40c245(0x2e9),{'val':_0x4447be[_0x40c245(0x286)][_0x40c245(0x2b9)]||_0x40c245(0x270),'ack':!![]}),await this[_0x40c245(0x1d8)]('analysis.deviationFromBaseline',{'val':_0x4447be[_0x40c245(0x286)]['deviationFromBaseline']||_0x40c245(0x270),'ack':!![]}),await this[_0x40c245(0x1d8)](_0x40c245(0x27f),{'val':_0x4447be['activity'][_0x40c245(0x1b8)]||'','ack':!![]});const _0x33337f=_0x4447be[_0x40c245(0x1ca)][_0x40c245(0x298)],_0x121a9a=this[_0x40c245(0x232)]?_0x33337f['patternDetected']:![];await this[_0x40c245(0x1d8)](_0x40c245(0x1f6),{'val':_0x121a9a,'ack':!![]}),await this[_0x40c245(0x1d8)](_0x40c245(0x20d),{'val':_0x121a9a?_0x33337f[_0x40c245(0x189)]:this[_0x40c245(0x232)]?'':_0x40c245(0x1bf),'ack':!![]});if(_0x4447be[_0x40c245(0x286)][_0x40c245(0x222)]){await this['setStateAsync'](_0x40c245(0x2d2),{'val':!![],'ack':!![]});if(!this[_0x40c245(0x29b)])this[_0x40c245(0x17c)]('üö®\x20Alarm:\x20'+_0x4447be[_0x40c245(0x286)][_0x40c245(0x1b8)]);}else await this['setStateAsync'](_0x40c245(0x2d2),{'val':![],'ack':!![]});this[_0x40c245(0x29b)]=_0x4447be[_0x40c245(0x286)]['isAlert'];const _0x141353={'timestamp':Date[_0x40c245(0x2c5)](),'id':Date[_0x40c245(0x2c5)]()[_0x40c245(0x255)](),'analysis':_0x4447be,'systemMode':_0x518ce1,'isPro':this[_0x40c245(0x232)]};this[_0x40c245(0x16c)](_0x141353);}catch(_0x3deec9){this[_0x40c245(0x29d)][_0x40c245(0x248)]('Analysis\x20Error:\x20'+_0x3deec9['message']);}}async[a0_0xcb3924(0x282)](){const _0x106d97=a0_0xcb3924;if(!this[_0x106d97(0x232)])return;await this[_0x106d97(0x1d8)](LTM_DP_STATUS,{'val':_0x106d97(0x1f8)+new Date()[_0x106d97(0x1d4)](),'ack':!![]});if(!this[_0x106d97(0x195)]||this[_0x106d97(0x1b1)][_0x106d97(0x277)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await this[_0x106d97(0x1d8)](LTM_DP_STATUS,{'val':_0x106d97(0x204),'ack':!![]});return;}const _0x5a17e9=JSON[_0x106d97(0x208)](JSON['stringify'](this['rawEventLog'])),_0x3d8076=(this[_0x106d97(0x292)][_0x106d97(0x1da)]||'')['substring'](0x0,0x3e8),_0xe97bdc=_0x106d97(0x24c)+_0x3d8076+_0x106d97(0x23a)+JSON[_0x106d97(0x1a1)](_0x5a17e9);try{const _0x35c87a=await this['geminiModel'][_0x106d97(0x1d2)](_0xe97bdc),_0x4d3549=JSON['parse'](_0x35c87a['response']['text']()[_0x106d97(0x281)](/```json|```/g,'')[_0x106d97(0x1b9)]());_0x4d3549[_0x106d97(0x2b9)]&&(this[_0x106d97(0x24f)][_0x106d97(0x2dc)]({'timestamp':new Date()[_0x106d97(0x245)](),'eventCount':_0x5a17e9[_0x106d97(0x277)],'summary':_0x4d3549[_0x106d97(0x2b9)],'activityLevel':_0x4d3549[_0x106d97(0x172)],'systemMode':this[_0x106d97(0x2e7)]}),await this[_0x106d97(0x2de)](),this[_0x106d97(0x1b1)]=[],await this[_0x106d97(0x1c4)](),await this[_0x106d97(0x1d8)](LTM_DP_STATUS,{'val':'Success:\x20Compressed\x20'+_0x5a17e9['length']+'\x20events','ack':!![]}));}catch(_0x5e4551){await this[_0x106d97(0x1d8)](LTM_DP_STATUS,{'val':_0x106d97(0x1bd)+_0x5e4551[_0x106d97(0x1c9)],'ack':!![]});}}async['runBaselineDriftAnalysis'](){const _0xec36f=a0_0xcb3924;if(!this['isProVersion']||!this[_0xec36f(0x195)])return;const _0x127a29=this[_0xec36f(0x292)][_0xec36f(0x2d0)]||0xe;if(this[_0xec36f(0x24f)][_0xec36f(0x277)]<_0x127a29+(this['config'][_0xec36f(0x24b)]||0x7)){await this[_0xec36f(0x1d8)](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x513d1e=this[_0xec36f(0x24f)][_0xec36f(0x1a4)](-_0x127a29),_0x5165c6=this[_0xec36f(0x24f)][_0xec36f(0x1a4)](0x0,this[_0xec36f(0x24f)][_0xec36f(0x277)]-_0x127a29),_0x5287ba=_0xec36f(0x2a0)+JSON[_0xec36f(0x1a1)](_0x5165c6)+_0xec36f(0x177)+JSON[_0xec36f(0x1a1)](_0x513d1e);try{const _0x19d0cf=await this[_0xec36f(0x195)][_0xec36f(0x1d2)](_0x5287ba),_0x572ce=JSON[_0xec36f(0x208)](_0x19d0cf[_0xec36f(0x17d)][_0xec36f(0x25a)]()[_0xec36f(0x281)](/```json|```/g,'')[_0xec36f(0x1b9)]());_0x572ce[_0xec36f(0x213)]&&(await this[_0xec36f(0x1d8)](LTM_DP_DRIFT_STATUS,{'val':_0x572ce[_0xec36f(0x213)],'ack':!![]}),await this[_0xec36f(0x1d8)](LTM_DP_DRIFT_DETAILS,{'val':_0x572ce[_0xec36f(0x2df)],'ack':!![]}),await this[_0xec36f(0x1d8)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0xec36f(0x2c5)](),'ack':!![]}));}catch(_0x4f3f4b){}}async[a0_0xcb3924(0x1fe)](){const _0x4f8507=a0_0xcb3924;await this[_0x4f8507(0x293)](_0x4f8507(0x1af),{'type':_0x4f8507(0x2ab),'common':{'name':'System\x20Status\x20&\x20Control'},'native':{}}),await this[_0x4f8507(0x293)](SYSTEM_DP_MODE,{'type':_0x4f8507(0x2a1),'common':{'name':_0x4f8507(0x2b3),'type':_0x4f8507(0x2bb),'role':_0x4f8507(0x2a1),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x4f8507(0x1a0)],'states':{[SYSTEM_MODES[_0x4f8507(0x1a0)]]:'Normal',[SYSTEM_MODES['VACATION']]:_0x4f8507(0x253),[SYSTEM_MODES[_0x4f8507(0x238)]]:_0x4f8507(0x19c),[SYSTEM_MODES[_0x4f8507(0x265)]]:_0x4f8507(0x2c2)}},'native':{}});}async[a0_0xcb3924(0x218)](){const _0x469a95=a0_0xcb3924;try{const _0x577c14=await this[_0x469a95(0x2d5)](SYSTEM_DP_MODE);_0x577c14&&_0x577c14[_0x469a95(0x2cc)]&&Object['values'](SYSTEM_MODES)[_0x469a95(0x1ab)](_0x577c14['val'])?this['currentSystemMode']=_0x577c14['val']:(this[_0x469a95(0x2e7)]=SYSTEM_MODES[_0x469a95(0x1a0)],await this['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x469a95(0x1a0)],'ack':!![]}));}catch(_0x2e2da4){this[_0x469a95(0x2e7)]=SYSTEM_MODES[_0x469a95(0x1a0)];}}['setupModeResetScheduler'](){const _0xa32d42=a0_0xcb3924;if(this[_0xa32d42(0x227)])this[_0xa32d42(0x227)]['cancel']();this[_0xa32d42(0x227)]=schedule[_0xa32d42(0x184)](MODE_RESET_SCHEDULE,async()=>{const _0x27e6d0=_0xa32d42;await this[_0x27e6d0(0x218)](),AUTO_RESET_MODES['includes'](this[_0x27e6d0(0x2e7)])&&await this[_0x27e6d0(0x1d8)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x27e6d0(0x1a0)],'ack':![]});});}async[a0_0xcb3924(0x19d)](){const _0x341ae2=a0_0xcb3924;if(!this[_0x341ae2(0x232)]){await this['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x341ae2(0x2b6),'ack':!![]});return;}const _0x221efb=this['dailyDigests'][_0x341ae2(0x277)]>=(this[_0x341ae2(0x292)][_0x341ae2(0x24b)]||0x7)?_0x341ae2(0x2ea)+this[_0x341ae2(0x24f)]['length']+'\x20Tage)':_0x341ae2(0x2e3)+this[_0x341ae2(0x24f)]['length']+'/'+(this['config']['minDaysForBaseline']||0x7)+')';await this[_0x341ae2(0x1d8)](LTM_DP_BASELINE_STATUS,{'val':_0x221efb,'ack':!![]});}async[a0_0xcb3924(0x163)](){const _0x53016a=a0_0xcb3924;await this[_0x53016a(0x293)]('LTM',{'type':_0x53016a(0x2ab),'common':{'name':_0x53016a(0x212)},'native':{}}),await this[_0x53016a(0x293)](LTM_DP_RAW_LOG,{'type':_0x53016a(0x2a1),'common':{'name':'Raw\x20Log','type':_0x53016a(0x2bb),'role':_0x53016a(0x191),'read':!![],'write':![]},'native':{}}),await this[_0x53016a(0x293)](LTM_DP_DAILY_DIGESTS,{'type':_0x53016a(0x2a1),'common':{'name':_0x53016a(0x26d),'type':_0x53016a(0x2bb),'role':_0x53016a(0x191),'read':!![],'write':![]},'native':{}}),await this[_0x53016a(0x293)](LTM_DP_STATUS,{'type':_0x53016a(0x2a1),'common':{'name':_0x53016a(0x1ae),'type':'string','role':_0x53016a(0x25a),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_TRIGGER_DIGEST,{'type':_0x53016a(0x2a1),'common':{'name':_0x53016a(0x2f2),'type':_0x53016a(0x22e),'role':_0x53016a(0x1cf),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x53016a(0x293)](LTM_DP_BASELINE_STATUS,{'type':'state','common':{'name':'Baseline\x20Status','type':_0x53016a(0x2bb),'role':'text','read':!![],'write':![]},'native':{}});}async[a0_0xcb3924(0x23c)](){const _0x68c1e0=a0_0xcb3924;await this[_0x68c1e0(0x293)](LTM_DP_DRIFT_CHANNEL,{'type':_0x68c1e0(0x2ab),'common':{'name':_0x68c1e0(0x18f)},'native':{}}),await this[_0x68c1e0(0x293)](LTM_DP_DRIFT_STATUS,{'type':_0x68c1e0(0x2a1),'common':{'name':_0x68c1e0(0x17e),'type':_0x68c1e0(0x2bb),'role':_0x68c1e0(0x2a1),'read':!![],'write':![],'def':_0x68c1e0(0x270)},'native':{}}),await this[_0x68c1e0(0x293)](LTM_DP_DRIFT_DETAILS,{'type':'state','common':{'name':_0x68c1e0(0x2ca),'type':_0x68c1e0(0x2bb),'role':'text','read':!![],'write':![]},'native':{}}),await this[_0x68c1e0(0x293)](LTM_DP_DRIFT_LAST_CHECK,{'type':'state','common':{'name':_0x68c1e0(0x1bb),'type':_0x68c1e0(0x1e2),'role':'date','read':!![],'write':![]},'native':{}});}async[a0_0xcb3924(0x26f)](){const _0x22a0bd=a0_0xcb3924;try{const _0x41e0a6=await this['getStateAsync'](LTM_DP_RAW_LOG);if(_0x41e0a6&&_0x41e0a6['val'])this[_0x22a0bd(0x1b1)]=JSON['parse'](_0x41e0a6['val']);}catch(_0x26f23e){this[_0x22a0bd(0x1b1)]=[];}}async[a0_0xcb3924(0x1c4)](){const _0x2dd1d0=a0_0xcb3924;this[_0x2dd1d0(0x1b1)]['length']>RAW_LOG_MAX_SIZE&&this[_0x2dd1d0(0x1b1)][_0x2dd1d0(0x241)](0x0,this[_0x2dd1d0(0x1b1)]['length']-RAW_LOG_MAX_SIZE),await this[_0x2dd1d0(0x1d8)](LTM_DP_RAW_LOG,{'val':JSON[_0x2dd1d0(0x1a1)](this[_0x2dd1d0(0x1b1)]),'ack':!![]});}async[a0_0xcb3924(0x271)](){const _0x189650=a0_0xcb3924;try{const _0x360c21=await this[_0x189650(0x2d5)](LTM_DP_DAILY_DIGESTS);if(_0x360c21&&_0x360c21[_0x189650(0x2cc)])this['dailyDigests']=JSON[_0x189650(0x208)](_0x360c21[_0x189650(0x2cc)]);}catch(_0x46f761){this[_0x189650(0x24f)]=[];}await this['updateBaselineStatus']();}async['saveDailyDigests'](_0x3e626f=!![]){const _0x47da69=a0_0xcb3924,_0x32b029=this[_0x47da69(0x292)]['ltmLtbWindowDays']||0x3c;this[_0x47da69(0x24f)][_0x47da69(0x277)]>_0x32b029&&this['dailyDigests']['splice'](0x0,this['dailyDigests'][_0x47da69(0x277)]-_0x32b029);await this[_0x47da69(0x1d8)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x47da69(0x1a1)](this[_0x47da69(0x24f)]),'ack':!![]});if(_0x3e626f)await this['updateBaselineStatus']();}[a0_0xcb3924(0x2c4)](){const _0x487436=a0_0xcb3924;if(this['ltmJob'])this['ltmJob'][_0x487436(0x23d)]();if(!this[_0x487436(0x232)]){this[_0x487436(0x1d8)](LTM_DP_STATUS,{'val':_0x487436(0x2b6),'ack':!![]});return;}this['ltmJob']=schedule[_0x487436(0x184)](LTM_SCHEDULE,()=>this['createDailyDigest']());}[a0_0xcb3924(0x1c0)](){const _0x5a5e5f=a0_0xcb3924;if(this[_0x5a5e5f(0x287)])clearInterval(this[_0x5a5e5f(0x287)]);if(!this[_0x5a5e5f(0x232)])return;this['driftAnalysisTimer']=setInterval(()=>this['runBaselineDriftAnalysis'](),(this['config'][_0x5a5e5f(0x2dd)]||0x18)*0x36ee80),setTimeout(()=>this[_0x5a5e5f(0x1bc)](),0x1388);}async[a0_0xcb3924(0x196)](){const _0x310867=a0_0xcb3924;await this['setStateAsync'](_0x310867(0x2e9),{'val':_0x310867(0x2a9),'ack':!![]}),await this[_0x310867(0x1d8)]('analysis.deviationFromBaseline',{'val':this[_0x310867(0x232)]?_0x310867(0x2ed):_0x310867(0x203),'ack':!![]}),await this[_0x310867(0x1d8)](_0x310867(0x2d2),{'val':![],'ack':!![]}),this[_0x310867(0x29b)]=![];}async[a0_0xcb3924(0x16c)](_0x193fac){const _0x4f3318=a0_0xcb3924;this[_0x4f3318(0x28b)][_0x4f3318(0x165)](_0x193fac);if(this['analysisHistory'][_0x4f3318(0x277)]>ANALYSIS_HISTORY_MAX_SIZE)this['analysisHistory'][_0x4f3318(0x19b)]();await this[_0x4f3318(0x1d8)](_0x4f3318(0x192),{'val':JSON[_0x4f3318(0x1a1)](this['analysisHistory']),'ack':!![]});}async[a0_0xcb3924(0x17c)](_0x504f4f,_0x3c9cdc=![]){const _0x1c8e6d=a0_0xcb3924;this[_0x1c8e6d(0x29d)][_0x1c8e6d(0x285)]((_0x3c9cdc?'[TEST]\x20':'')+_0x1c8e6d(0x216)+_0x504f4f+'\x22');const _0x4508f4=this[_0x1c8e6d(0x292)];let _0x3b363a=0x0;return _0x4508f4[_0x1c8e6d(0x2e4)]&&_0x4508f4[_0x1c8e6d(0x1c5)]&&(await this['sendToAsync'](_0x4508f4[_0x1c8e6d(0x1c5)],'send',{'text':_0x504f4f,'user':_0x4508f4[_0x1c8e6d(0x173)]}),_0x3b363a++),_0x4508f4[_0x1c8e6d(0x194)]&&_0x4508f4['notifyPushoverInstance']&&(await this['sendToAsync'](_0x4508f4[_0x1c8e6d(0x1e6)],_0x1c8e6d(0x25e),{'message':_0x504f4f,'title':'Alert','priority':0x1,'device':_0x4508f4[_0x1c8e6d(0x176)]}),_0x3b363a++),_0x4508f4['notifyEmailEnabled']&&_0x4508f4['notifyEmailInstance']&&(await this[_0x1c8e6d(0x254)](_0x4508f4[_0x1c8e6d(0x28a)],_0x1c8e6d(0x25e),{'text':_0x504f4f,'to':_0x4508f4[_0x1c8e6d(0x2b2)]}),_0x3b363a++),_0x4508f4[_0x1c8e6d(0x1a2)]&&_0x4508f4[_0x1c8e6d(0x1f2)]&&(await this[_0x1c8e6d(0x254)](_0x4508f4[_0x1c8e6d(0x1f2)],_0x1c8e6d(0x25e),{'text':_0x504f4f,'phone':_0x4508f4[_0x1c8e6d(0x273)]}),_0x3b363a++),_0x4508f4[_0x1c8e6d(0x16e)]&&_0x4508f4[_0x1c8e6d(0x239)]&&(await this[_0x1c8e6d(0x254)](_0x4508f4['notifySignalInstance'],'send',{'text':_0x504f4f,'phone':_0x4508f4[_0x1c8e6d(0x18b)]}),_0x3b363a++),_0x3b363a;}async[a0_0xcb3924(0x210)](_0x583df8){const _0x40b8b9=a0_0xcb3924;this[_0x40b8b9(0x1cd)][_0x40b8b9(0x165)](_0x583df8);if(this['feedbackHistory'][_0x40b8b9(0x277)]>FEEDBACK_MAX_SIZE)this[_0x40b8b9(0x1cd)][_0x40b8b9(0x19b)]();await this[_0x40b8b9(0x1d8)](_0x40b8b9(0x25c),{'val':JSON[_0x40b8b9(0x1a1)](this['feedbackHistory']),'ack':!![]}),this[_0x40b8b9(0x29d)][_0x40b8b9(0x285)](_0x40b8b9(0x1a5)+_0x583df8[_0x40b8b9(0x25f)]+_0x40b8b9(0x1e1)+_0x583df8[_0x40b8b9(0x29a)]);}[a0_0xcb3924(0x27e)](_0x357821){const _0x11b924=a0_0xcb3924;if(this[_0x11b924(0x26b)])clearInterval(this[_0x11b924(0x26b)]);if(this[_0x11b924(0x287)])clearInterval(this['driftAnalysisTimer']);if(this[_0x11b924(0x1b7)])this[_0x11b924(0x1b7)][_0x11b924(0x23d)]();if(this[_0x11b924(0x227)])this[_0x11b924(0x227)][_0x11b924(0x23d)]();_0x357821();}async[a0_0xcb3924(0x2d6)](_0x227918){const _0x70d486=a0_0xcb3924;if(typeof _0x227918===_0x70d486(0x207)&&_0x227918['message']){if(_0x227918['command']===_0x70d486(0x1de)){if(!_0x227918[_0x70d486(0x1c9)][_0x70d486(0x256)])return this[_0x70d486(0x2b7)](_0x227918[_0x70d486(0x1ed)],_0x227918[_0x70d486(0x19f)],{'success':![],'message':_0x70d486(0x168)},_0x227918[_0x70d486(0x1c2)]);try{const _0x2f9b54=new GoogleGenerativeAI(_0x227918[_0x70d486(0x1c9)][_0x70d486(0x256)])[_0x70d486(0x164)]({'model':_0x70d486(0x2cb)});await _0x2f9b54[_0x70d486(0x1d2)](_0x70d486(0x235)),this[_0x70d486(0x2b7)](_0x227918[_0x70d486(0x1ed)],_0x227918['command'],{'success':!![],'message':_0x70d486(0x2e5)},_0x227918[_0x70d486(0x1c2)]);}catch(_0x5d6538){this[_0x70d486(0x2b7)](_0x227918[_0x70d486(0x1ed)],_0x227918[_0x70d486(0x19f)],{'success':![],'message':_0x5d6538[_0x70d486(0x1c9)]},_0x227918['callback']);}}else{if(_0x227918['command']===_0x70d486(0x2d9)){const _0x3112bf=await this[_0x70d486(0x17c)]('[Test]\x20Notification',!![]);this[_0x70d486(0x2b7)](_0x227918[_0x70d486(0x1ed)],_0x227918[_0x70d486(0x19f)],{'success':_0x3112bf>0x0,'message':_0x3112bf+_0x70d486(0x2bc)},_0x227918['callback']);}else{if(_0x227918['command']===_0x70d486(0x1db)){if(!this[_0x70d486(0x232)])return this[_0x70d486(0x2b7)](_0x227918['from'],_0x227918[_0x70d486(0x19f)],{'success':![],'isPro':![]},_0x227918[_0x70d486(0x1c2)]);let _0x477255={'status':_0x70d486(0x270),'details':'','lastCheck':0x0};try{_0x477255[_0x70d486(0x2c8)]=(await this[_0x70d486(0x2d5)](LTM_DP_DRIFT_STATUS))[_0x70d486(0x2cc)],_0x477255[_0x70d486(0x2a6)]=(await this[_0x70d486(0x2d5)](LTM_DP_DRIFT_DETAILS))[_0x70d486(0x2cc)],_0x477255[_0x70d486(0x1f0)]=(await this[_0x70d486(0x2d5)](LTM_DP_DRIFT_LAST_CHECK))[_0x70d486(0x2cc)];}catch(_0x9556a7){}this[_0x70d486(0x2b7)](_0x227918['from'],_0x227918[_0x70d486(0x19f)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x70d486(0x24f)],'driftAnalysis':_0x477255,'analysisHistory':this['analysisHistory']},_0x227918['callback']);}else{if(_0x227918[_0x70d486(0x19f)]==='getEnums'){const _0x1b97b1=await this[_0x70d486(0x205)](_0x70d486(0x251),_0x70d486(0x22f)),_0x36c7f1=[];if(_0x1b97b1)for(const _0x2b3203 in _0x1b97b1){const _0x2a838d=_0x1b97b1[_0x2b3203],_0x270a39=(_0x2a838d[_0x70d486(0x2c3)]&&typeof _0x2a838d[_0x70d486(0x2c3)][_0x70d486(0x220)]==='object'?_0x2a838d[_0x70d486(0x2c3)]['name']['de']:_0x2a838d['common'][_0x70d486(0x220)])||_0x2a838d['common'][_0x70d486(0x220)];_0x36c7f1['push']({'id':_0x2b3203,'name':_0x270a39});}this[_0x70d486(0x2b7)](_0x227918[_0x70d486(0x1ed)],_0x227918['command'],{'success':!![],'enums':_0x36c7f1},_0x227918[_0x70d486(0x1c2)]);}else{if(_0x227918[_0x70d486(0x19f)]===_0x70d486(0x1fd)){this[_0x70d486(0x29d)]['info']('Received\x20scanDevices\x20request\x20from\x20Admin\x20UI.');const _0x420e46=_0x227918[_0x70d486(0x1c9)]||{};try{const _0x47c99f=await this[_0x70d486(0x2e0)](_0x420e46);this[_0x70d486(0x2b7)](_0x227918['from'],_0x227918[_0x70d486(0x19f)],{'success':!![],'devices':_0x47c99f},_0x227918['callback']);}catch(_0x5da972){this[_0x70d486(0x2b7)](_0x227918['from'],_0x227918[_0x70d486(0x19f)],{'success':![],'error':_0x5da972[_0x70d486(0x1c9)]},_0x227918[_0x70d486(0x1c2)]);}}else{if(_0x227918['command']===_0x70d486(0x1d3)){const {historyId:_0x3696d2,rating:_0x1079dd,comment:_0x40b2a5,alertReason:_0x38171d}=_0x227918[_0x70d486(0x1c9)];_0x3696d2&&_0x1079dd?(await this['saveFeedback']({'timestamp':Date[_0x70d486(0x2c5)](),'historyId':_0x3696d2,'rating':_0x1079dd,'comment':_0x40b2a5,'alertReason':_0x38171d}),this[_0x70d486(0x2b7)](_0x227918[_0x70d486(0x1ed)],_0x227918[_0x70d486(0x19f)],{'success':!![]},_0x227918['callback'])):this['sendTo'](_0x227918[_0x70d486(0x1ed)],_0x227918[_0x70d486(0x19f)],{'success':![],'error':'Missing\x20data'},_0x227918['callback']);}}}}}}}}}if(require['main']!==module)module['exports']=_0x27c253=>new CogniLiving(_0x27c253);else new CogniLiving();