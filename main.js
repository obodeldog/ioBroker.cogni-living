const a0_0xc0a64a=a0_0x20af;(function(_0x2397dd,_0x4dda3d){const _0x302434=a0_0x20af,_0x7114d3=_0x2397dd();while(!![]){try{const _0x5c986e=-parseInt(_0x302434(0x1e2))/0x1*(parseInt(_0x302434(0x21e))/0x2)+-parseInt(_0x302434(0x284))/0x3*(-parseInt(_0x302434(0x251))/0x4)+-parseInt(_0x302434(0x278))/0x5+parseInt(_0x302434(0x205))/0x6+parseInt(_0x302434(0x25b))/0x7*(parseInt(_0x302434(0x275))/0x8)+parseInt(_0x302434(0x28c))/0x9+parseInt(_0x302434(0x2c9))/0xa*(-parseInt(_0x302434(0x296))/0xb);if(_0x5c986e===_0x4dda3d)break;else _0x7114d3['push'](_0x7114d3['shift']());}catch(_0xcc8819){_0x7114d3['push'](_0x7114d3['shift']());}}}(a0_0x4f1a,0x282bf));function a0_0x20af(_0x2c3e6e,_0x31d607){const _0x80e72=a0_0x4f1a();return a0_0x20af=function(_0x24862a,_0x1dc3e0){_0x24862a=_0x24862a-0x1d4;let _0x4f1a6d=_0x80e72[_0x24862a];return _0x4f1a6d;},a0_0x20af(_0x2c3e6e,_0x31d607);}const a0_0x1dc3e0=(function(){let _0x550c8a=!![];return function(_0x5f5054,_0x19f282){const _0x4dd133=_0x550c8a?function(){if(_0x19f282){const _0x5a8482=_0x19f282['apply'](_0x5f5054,arguments);return _0x19f282=null,_0x5a8482;}}:function(){};return _0x550c8a=![],_0x4dd133;};}()),a0_0x24862a=a0_0x1dc3e0(this,function(){const _0x36d7b7=a0_0x20af;return a0_0x24862a[_0x36d7b7(0x1d5)]()['search']('(((.+)+)+)+$')[_0x36d7b7(0x1d5)]()[_0x36d7b7(0x286)](a0_0x24862a)[_0x36d7b7(0x2b1)](_0x36d7b7(0x21f));});function a0_0x4f1a(){const _0x5983c3=['notifyTelegramInstance','length','.data.table','enum','20643tXrjLA','getForeignObjectAsync','NORMAL','bind','analysis.automation.description','testContext','onMessage','Gemini\x20Init\x20Error:\x20','Gemini\x20AI\x20initialized.','message','Lernphase\x20(','debug','forecast.current.weather','info','initHistory','enum.rooms.*','runAutopilot','LTM.dailyDigests','ANALYZE_GAIT','SYSTEM_MODES','Reinforcement\x20Learning\x20Penalties','values','dismissAutomation','updateLocation','TRAIN_HEALTH','PREDICT_ENERGY','504dpcufW','Kein\x20Kalender-Adapter','triggerGaitAnalysis','92935Bpplyc','simulateEnergyMPC','version','calendarName','scanForDevices','setObjectNotExistsAsync','triggerEnergyPrediction','activityLevel','log','Sec-Training\x20started...','temperature','Current.WeatherText','2007PSMPeP','updateTopology','constructor','updateHealthVector','SET_TOPOLOGY','analysis.topology.structure','add','setHours','2197908NcndLV','WiFi\x20Presence\x20detected.','sunny','./lib/scheduler','runBaselineDriftAnalysis','getGenerativeModel','val','analysis.energy.insulationScore','cogni-living','Daten\x20nicht\x20verfÃ¼gbar','22385TzXzyG','cogni-living\x20adapter\x20starting\x20(v','eventHistory','pop','_calName','analysis.training.triggerHealth','manual','lastTrackerEventTime','systemConfig','ack','triggerDailyDigest','isGracePeriodActive','presenceDevices','keys','VACATION','Verbunden','subscribeForeignStatesAsync','.system.mode','telegram','Kein\x20Wetter-Adapter','updated','Adapter','command','ANALYZE_TREND','state','endsWith','./lib/setup','search','type','checkSolarCondition','analysisHistory','trackerEnabled','abortExitTimer','Fehler:\x20','subscribeStates','sensorLastValues','analysisTimer','@google/generative-ai','analysis.energy.mpcActive','error','ready','send','onUnload','runGeminiAnalysis','checkLicense','application/json','isSolar','@iobroker/adapter-core','analysis.training.status','push','entries','3310eHeSDi','stringify','checkAndInstall','getEnums','OPTIMIZE_ENERGY','getOutsideTemperatureNumeric','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','guest','lastAlertState','generateContent','object','sort','sonn','analysis.energy.warmupTimes','trackerHeartbeat','enum.functions.*','PINN\x20AI\x20Forecast','Guest\x20Mode','Warm-Up\x20Target\x20Temps\x20(JSON)','callback','find','toString','minutes_safe','forEach','getTime','parse','testApiKey','currentSystemMode','isProVersion','ltmJob','scores','exitGraceTimer','apiKey','modeResetJob','1LrXWmj','getLtmData','sendMorningBriefing','some','fill','name','sendTo','./lib/automation','calendarInstance','checkWifiPresence','toLowerCase','testNotification','getHours','checkThermostats','string','system.presenceWho','updateTopologyMatrix','communicate.request','location','includes','heiter','analysis.training.triggerTopology','scanDevices','briefingJob','onStateChange','geminiApiKey','party','thermostat','abs','TRAIN_COMFORT','TRAIN_SECURITY','startService','main','genAI','createAllObjects','1465944VeLLMY','./lib/python_bridge','split','clear','simulateButler','exports','config','analysis.automation.patternDetected','\x20min\x20ausbleiben.','map','Standard','scanThermostats','analysisInterval','weatherunderground.0','Active\x20Ventilation\x20Alerts','driftAnalysisTimer','json','loadSystemMode','LTM.rawEventLog','automation.triggerAction','stopService','setStateAsync','analysis.automation.triggerAction','dependencyInstallInProgress','getOverviewData','292174TfBIYf','(((.+)+)+)+$','getForeignObjectsAsync','Keine\x20Antwort\x20von\x20Gemini','Kein\x20API\x20Key\x20Ã¼bergeben','analysis.security.learningStatus','response','LTM.trainingData.sequences','klar','initZombies','getStateAsync','accuweather.0','SYSTEM_DP_MODE','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','minDaysForBaseline','./lib/dead_man',')\x20-\x20Phase\x20D\x20(Evolution)','checkCalendarTriggers','startSystem','analysis.automation.targetId','isPresent','\x20Tage)','geminiModel','timestamp','createDailyDigest','Instanz\x20nicht\x20gefunden','setState','.communicate.request','models/gemini-flash-latest','./lib/ai_agent','analysis.trigger','cancel','namespace','TRACK_EVENT','setupDriftAnalysisScheduler','./lib/installer','executeAutomationAction','analysis.energy.pinnForecast','exitTimer','runPythonHealthCheck','analysis.automation.targetValue','setPresence','dailyDigests','inactivityThresholdHours','analysis.triggerBriefing','floor','from','analysis.training.triggerSecurity','common','devices','isArray','1964DQtIbJ','useWeather','getForeignStateAsync','analysis.health.todayVector','now','rawEventLog'];a0_0x4f1a=function(){return _0x5983c3;};return a0_0x4f1a();}a0_0x24862a();'use strict';const utils=require(a0_0xc0a64a(0x2c5)),{GoogleGenerativeAI}=require(a0_0xc0a64a(0x2bb)),installer=require(a0_0xc0a64a(0x241)),scanner=require('./lib/scanner'),schedulers=require(a0_0xc0a64a(0x28f)),topology=require('./lib/topology'),setup=require(a0_0xc0a64a(0x2b0)),recorder=require('./lib/recorder'),pythonBridge=require(a0_0xc0a64a(0x206)),aiAgent=require(a0_0xc0a64a(0x23b)),deadMan=require(a0_0xc0a64a(0x22d)),automation=require(a0_0xc0a64a(0x1e9)),GEMINI_MODEL=a0_0xc0a64a(0x23a),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0xc0a64a(0x2ab)]{constructor(_0x5b9b07){const _0x5ef9ea=a0_0xc0a64a;super({..._0x5b9b07,'name':_0x5ef9ea(0x294)}),this[_0x5ef9ea(0x298)]=[],this[_0x5ef9ea(0x2b4)]=[],this[_0x5ef9ea(0x256)]=[],this[_0x5ef9ea(0x248)]=[],this[_0x5ef9ea(0x2b9)]={},this[_0x5ef9ea(0x29e)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x5ef9ea(0x232)]=!![],this['exitTimer']=null,this[_0x5ef9ea(0x1df)]=null,this[_0x5ef9ea(0x2a1)]=![],this['genAI']=null,this[_0x5ef9ea(0x234)]=null,this[_0x5ef9ea(0x1db)]=setup[_0x5ef9ea(0x26e)][_0x5ef9ea(0x25d)],this[_0x5ef9ea(0x1dc)]=![],this[_0x5ef9ea(0x2d1)]=![],this['analysisTimer']=null,this[_0x5ef9ea(0x1dd)]=null,this[_0x5ef9ea(0x1e1)]=null,this[_0x5ef9ea(0x214)]=null,this[_0x5ef9ea(0x1f9)]=null,this[_0x5ef9ea(0x21c)]=![],this[_0x5ef9ea(0x2d7)]=null,this[_0x5ef9ea(0x29d)]=Date[_0x5ef9ea(0x255)](),this['on'](_0x5ef9ea(0x2be),this['onReady'][_0x5ef9ea(0x25e)](this)),this['on']('stateChange',this[_0x5ef9ea(0x1fa)]['bind'](this)),this['on']('unload',this[_0x5ef9ea(0x2c0)]['bind'](this)),this['on']('message',this[_0x5ef9ea(0x261)][_0x5ef9ea(0x25e)](this));}async['onReady'](){const _0x1fee95=a0_0xc0a64a;this[_0x1fee95(0x280)][_0x1fee95(0x268)](_0x1fee95(0x297)+this[_0x1fee95(0x27a)]+_0x1fee95(0x22e));if(!installer[_0x1fee95(0x2cb)](this,()=>this[_0x1fee95(0x230)]()))return;}async['startSystem'](){const _0x4d6485=a0_0xc0a64a;await setup[_0x4d6485(0x227)](this);try{this[_0x4d6485(0x1dc)]=await setup[_0x4d6485(0x2c2)](this[_0x4d6485(0x20b)]['licenseKey']);}catch(_0x341c56){}if(!this[_0x4d6485(0x20b)][_0x4d6485(0x249)]||this[_0x4d6485(0x20b)][_0x4d6485(0x249)]<0.1)this[_0x4d6485(0x20b)]['inactivityThresholdHours']=0xc;await setup[_0x4d6485(0x269)](this),await setup['initSystemConfig'](this);if(this[_0x4d6485(0x20b)][_0x4d6485(0x1fb)])try{this['genAI']=new GoogleGenerativeAI(this[_0x4d6485(0x20b)][_0x4d6485(0x1fb)]),this[_0x4d6485(0x234)]=this[_0x4d6485(0x203)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x4d6485(0x2c3)}}),this['log']['info'](_0x4d6485(0x263));}catch(_0x34d3cf){this['log'][_0x4d6485(0x2bd)](_0x4d6485(0x262)+_0x34d3cf[_0x4d6485(0x264)]);}await setup[_0x4d6485(0x204)](this),await this['loadSystemMode'](),await this['setObjectNotExistsAsync'](_0x4d6485(0x243),{'type':_0x4d6485(0x2ae),'common':{'name':_0x4d6485(0x2d9),'type':_0x4d6485(0x1f0),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x4d6485(0x27d)]('analysis.energy.ventilationAlerts',{'type':_0x4d6485(0x2ae),'common':{'name':_0x4d6485(0x213),'type':'string','role':_0x4d6485(0x215),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x4d6485(0x2d6),{'type':'state','common':{'name':'Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','type':_0x4d6485(0x1f0),'role':_0x4d6485(0x215),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.energy.warmupTargets',{'type':_0x4d6485(0x2ae),'common':{'name':_0x4d6485(0x2db),'type':'string','role':_0x4d6485(0x215),'read':!![],'write':!![],'def':'{\x22default\x22:\x2021}'},'native':{}}),await this[_0x4d6485(0x27d)]('analysis.energy.rlPenalties',{'type':_0x4d6485(0x2ae),'common':{'name':_0x4d6485(0x26f),'type':'string','role':'json','read':!![],'write':![],'def':'{}'},'native':{}});try{const _0x38e64a=await this[_0x4d6485(0x228)](_0x4d6485(0x217));if(_0x38e64a&&_0x38e64a[_0x4d6485(0x292)])this[_0x4d6485(0x256)]=JSON[_0x4d6485(0x1d9)](_0x38e64a['val']);}catch(_0xb5701c){this['rawEventLog']=[];}try{const _0xe2f1d=await this[_0x4d6485(0x228)](_0x4d6485(0x26c));if(_0xe2f1d&&_0xe2f1d[_0x4d6485(0x292)])this['dailyDigests']=JSON[_0x4d6485(0x1d9)](_0xe2f1d[_0x4d6485(0x292)]);}catch(_0x36dd42){this[_0x4d6485(0x248)]=[];}const _0xd9b8f4=this['dailyDigests']['length']>=(this[_0x4d6485(0x20b)][_0x4d6485(0x22c)]||0x7)?'Aktiv\x20('+this['dailyDigests']['length']+_0x4d6485(0x233):_0x4d6485(0x265)+this[_0x4d6485(0x248)][_0x4d6485(0x258)]+'/'+(this[_0x4d6485(0x20b)][_0x4d6485(0x22c)]||0x7)+')';await this[_0x4d6485(0x21a)]('LTM.baselineStatus',{'val':_0xd9b8f4,'ack':!![]}),this[_0x4d6485(0x2b8)]('analysis.trigger'),this[_0x4d6485(0x2b8)]('LTM.triggerDailyDigest'),this[_0x4d6485(0x2b8)]('system.mode'),this['subscribeStates'](_0x4d6485(0x24a)),this[_0x4d6485(0x2b8)](_0x4d6485(0x21b)),this[_0x4d6485(0x2b8)]('analysis.automation.autoApply'),this[_0x4d6485(0x2b8)](_0x4d6485(0x24d)),this[_0x4d6485(0x2b8)](_0x4d6485(0x29b)),this[_0x4d6485(0x2b8)]('analysis.training.triggerEnergy'),this[_0x4d6485(0x2b8)]('analysis.training.triggerComfort'),this['subscribeStates'](_0x4d6485(0x1f7)),this['subscribeStates'](_0x4d6485(0x2bc));const _0x480fcd=this[_0x4d6485(0x20b)]['devices'];if(_0x480fcd)for(const _0x19f238 of _0x480fcd){await this['subscribeForeignStatesAsync'](_0x19f238['id']);}const _0x351a61=this[_0x4d6485(0x20b)][_0x4d6485(0x2a2)];if(_0x351a61)for(const _0x568092 of _0x351a61){await this[_0x4d6485(0x2a6)](_0x568092);}if(this[_0x4d6485(0x20b)]['notifyTelegramEnabled']&&this[_0x4d6485(0x20b)][_0x4d6485(0x257)])await this[_0x4d6485(0x2a6)](this[_0x4d6485(0x20b)][_0x4d6485(0x257)]+_0x4d6485(0x239));setTimeout(()=>this['checkWifiPresence'](),0x1388);if(this['analysisTimer'])clearInterval(this['analysisTimer']);const _0x27c2b5=this[_0x4d6485(0x20b)][_0x4d6485(0x211)]||0xf;_0x27c2b5>0x0&&(this[_0x4d6485(0x2ba)]=setInterval(()=>{const _0x36ec73=_0x4d6485;this[_0x36ec73(0x26b)](),automation[_0x36ec73(0x22f)](this);},_0x27c2b5*0x3c*0x3e8)),setTimeout(()=>automation['checkCalendarTriggers'](this),0x2710),this[_0x4d6485(0x20b)][_0x4d6485(0x2b5)]!==![]&&(this[_0x4d6485(0x2d7)]=setInterval(()=>{const _0x359722=_0x4d6485;if(this[_0x359722(0x1dc)]){const _0x20f417=Date[_0x359722(0x255)](),_0x2a2883=this[_0x359722(0x29d)]||_0x20f417,_0x1c7e78=(_0x20f417-_0x2a2883)/0x3e8;_0x1c7e78>0x2&&(this[_0x359722(0x29d)]=_0x20f417,pythonBridge[_0x359722(0x2bf)](this,_0x359722(0x23f),{'room':null,'dt':_0x1c7e78}));}},0xbb8)),schedulers['setupLtmScheduler'](this,()=>aiAgent[_0x4d6485(0x236)](this,pythonBridge)),schedulers['setupModeResetScheduler'](this),schedulers[_0x4d6485(0x240)](this,()=>aiAgent[_0x4d6485(0x290)](this)),schedulers['setupBriefingScheduler'](this,()=>aiAgent[_0x4d6485(0x1e4)](this)),pythonBridge[_0x4d6485(0x201)](this,installer['PYTHON_EXE']),setTimeout(async()=>{const _0x17fdf9=_0x4d6485;await topology[_0x17fdf9(0x285)](this);try{const _0x283b81=await this[_0x17fdf9(0x228)](_0x17fdf9(0x289));if(_0x283b81&&_0x283b81[_0x17fdf9(0x292)])pythonBridge[_0x17fdf9(0x2bf)](this,_0x17fdf9(0x288),JSON['parse'](_0x283b81['val']));}catch(_0x2c93eb){}this['runPythonHealthCheck'](),this[_0x17fdf9(0x277)](),this['triggerEnergyPrediction'](),this[_0x17fdf9(0x287)]();},0x1388);}['onUnload'](_0x4f8b9e){const _0x19c99d=a0_0xc0a64a;if(this['analysisTimer'])clearInterval(this[_0x19c99d(0x2ba)]);if(this['driftAnalysisTimer'])clearInterval(this[_0x19c99d(0x214)]);if(this[_0x19c99d(0x2d7)])clearInterval(this[_0x19c99d(0x2d7)]);if(this['ltmJob'])this[_0x19c99d(0x1dd)][_0x19c99d(0x23d)]();if(this[_0x19c99d(0x1e1)])this['modeResetJob'][_0x19c99d(0x23d)]();if(this[_0x19c99d(0x1f9)])this[_0x19c99d(0x1f9)]['cancel']();recorder['abortExitTimer'](this),pythonBridge[_0x19c99d(0x219)](this),_0x4f8b9e();}async[a0_0xc0a64a(0x1fa)](_0x4b5095,_0x2d769e){const _0x541e3d=a0_0xc0a64a;if(!_0x2d769e||this['dependencyInstallInProgress'])return;if(_0x4b5095[_0x541e3d(0x1f5)](_0x541e3d(0x2a8))&&_0x4b5095[_0x541e3d(0x2af)](_0x541e3d(0x1f3))&&_0x2d769e[_0x541e3d(0x292)])return;if(_0x4b5095===this[_0x541e3d(0x23e)]+_0x541e3d(0x2a7)){if(_0x2d769e[_0x541e3d(0x292)]&&Object['values'](setup[_0x541e3d(0x26e)])[_0x541e3d(0x1f5)](_0x2d769e[_0x541e3d(0x292)])){this[_0x541e3d(0x1db)]=_0x2d769e[_0x541e3d(0x292)];if(_0x2d769e['val']===setup[_0x541e3d(0x26e)][_0x541e3d(0x2a4)])await recorder[_0x541e3d(0x247)](this,![]);else await recorder['setPresence'](this,!![]);if(this[_0x541e3d(0x1dc)]){let _0x5d6427=![],_0x334407=0x0,_0x5603e3=_0x541e3d(0x29c);if(this[_0x541e3d(0x1db)]===_0x541e3d(0x1fc))_0x5d6427=!![],_0x334407=0x168,_0x5603e3='Party\x20Mode';else this[_0x541e3d(0x1db)]===_0x541e3d(0x2d0)&&(_0x5d6427=!![],_0x334407=0x5a0,_0x5603e3=_0x541e3d(0x2da));pythonBridge[_0x541e3d(0x2bf)](this,'SET_LEARNING_MODE',{'active':_0x5d6427,'duration':_0x334407,'label':_0x5603e3}),await this[_0x541e3d(0x21a)](_0x541e3d(0x223),{'val':JSON[_0x541e3d(0x2ca)]({'active':_0x5d6427,'label':_0x5603e3,'timestamp':Date[_0x541e3d(0x255)]()}),'ack':!![]});}}if(!_0x2d769e['ack'])this[_0x541e3d(0x238)](_0x4b5095,{'val':this[_0x541e3d(0x1db)],'ack':!![]});return;}if(!_0x2d769e[_0x541e3d(0x29f)]){if(_0x4b5095[_0x541e3d(0x1f5)](_0x541e3d(0x23c))&&_0x2d769e[_0x541e3d(0x292)]){this[_0x541e3d(0x238)](_0x4b5095,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this);return;}if(_0x4b5095[_0x541e3d(0x1f5)](_0x541e3d(0x2a0))&&_0x2d769e[_0x541e3d(0x292)]){this['setState'](_0x4b5095,{'val':![],'ack':!![]});if(this[_0x541e3d(0x1dc)])aiAgent[_0x541e3d(0x236)](this,pythonBridge);return;}if(_0x4b5095[_0x541e3d(0x1f5)]('triggerBriefing')&&_0x2d769e['val']){this[_0x541e3d(0x238)](_0x4b5095,{'val':![],'ack':!![]}),aiAgent[_0x541e3d(0x1e4)](this);return;}if(_0x4b5095[_0x541e3d(0x1f5)](_0x541e3d(0x218))&&_0x2d769e[_0x541e3d(0x292)]){this[_0x541e3d(0x238)](_0x4b5095,{'val':![],'ack':!![]}),aiAgent[_0x541e3d(0x242)](this);return;}if(_0x4b5095['includes']('analysis.training.triggerSecurity')&&_0x2d769e[_0x541e3d(0x292)]){this[_0x541e3d(0x238)](_0x4b5095,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x337023=await this['getStateAsync'](_0x541e3d(0x225));if(_0x337023&&_0x337023[_0x541e3d(0x292)]){const _0x4b69b6=JSON[_0x541e3d(0x1d9)](_0x337023[_0x541e3d(0x292)]);this['setStateAsync'](_0x541e3d(0x2c6),{'val':_0x541e3d(0x281),'ack':!![]}),pythonBridge[_0x541e3d(0x2bf)](this,_0x541e3d(0x200),{'sequences':_0x4b69b6});}}catch(_0x4962fe){}return;}if(_0x4b5095[_0x541e3d(0x1f5)](_0x541e3d(0x29b))&&_0x2d769e[_0x541e3d(0x292)]){this[_0x541e3d(0x238)](_0x4b5095,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x2b2808=await this[_0x541e3d(0x228)](_0x541e3d(0x26c));if(_0x2b2808&&_0x2b2808[_0x541e3d(0x292)])pythonBridge['send'](this,_0x541e3d(0x273),{'digests':JSON[_0x541e3d(0x1d9)](_0x2b2808[_0x541e3d(0x292)])});}catch(_0x4224cd){}return;}if(_0x4b5095[_0x541e3d(0x1f5)]('analysis.training.triggerEnergy')&&_0x2d769e[_0x541e3d(0x292)]){this['setState'](_0x4b5095,{'val':![],'ack':!![]});if(this[_0x541e3d(0x1dc)])try{const _0x48e15e=await this[_0x541e3d(0x228)]('LTM.trainingData.thermodynamics');if(_0x48e15e&&_0x48e15e[_0x541e3d(0x292)])pythonBridge[_0x541e3d(0x2bf)](this,'TRAIN_ENERGY',{'points':JSON[_0x541e3d(0x1d9)](_0x48e15e[_0x541e3d(0x292)])});}catch(_0x5d9e9c){}return;}if(_0x4b5095[_0x541e3d(0x1f5)]('analysis.training.triggerComfort')&&_0x2d769e[_0x541e3d(0x292)]){this[_0x541e3d(0x238)](_0x4b5095,{'val':![],'ack':!![]});if(this[_0x541e3d(0x1dc)])try{const _0x2fafb7=await this['getStateAsync'](_0x541e3d(0x217));if(_0x2fafb7&&_0x2fafb7[_0x541e3d(0x292)])pythonBridge[_0x541e3d(0x2bf)](this,_0x541e3d(0x1ff),{'events':JSON[_0x541e3d(0x1d9)](_0x2fafb7[_0x541e3d(0x292)])});}catch(_0x2bd32d){}return;}if(_0x4b5095['includes']('analysis.training.triggerTopology')&&_0x2d769e[_0x541e3d(0x292)]){this[_0x541e3d(0x238)](_0x4b5095,{'val':![],'ack':!![]}),topology[_0x541e3d(0x285)](this);return;}}if(this[_0x541e3d(0x20b)][_0x541e3d(0x2a2)]&&this[_0x541e3d(0x20b)]['presenceDevices'][_0x541e3d(0x1f5)](_0x4b5095)){await this[_0x541e3d(0x1eb)]();return;}const _0x4ffa71=(this['config'][_0x541e3d(0x24f)]||[])[_0x541e3d(0x1d4)](_0x454f65=>_0x454f65['id']===_0x4b5095);if(_0x4ffa71){const _0x49a4f3=await recorder['processSensorEvent'](this,_0x4b5095,_0x2d769e,_0x4ffa71);_0x49a4f3&&_0x49a4f3[_0x541e3d(0x2b2)]==='motion'&&_0x49a4f3['location']&&this[_0x541e3d(0x1dc)]&&deadMan[_0x541e3d(0x272)](this,_0x49a4f3[_0x541e3d(0x1f4)]),(_0x4ffa71[_0x541e3d(0x2b2)]==='temperature'||_0x4ffa71[_0x541e3d(0x2b2)]===_0x541e3d(0x1fd))&&automation['cleanupGhostInterventions'](this);}}async[a0_0xc0a64a(0x261)](_0x5aa7f8){const _0x1bb1fa=a0_0xc0a64a;if(typeof _0x5aa7f8===_0x1bb1fa(0x2d3)&&_0x5aa7f8['message']){if(_0x5aa7f8['command']===_0x1bb1fa(0x1ef))try{const _0x1b3f68=await automation[_0x1bb1fa(0x210)](this);this['sendTo'](_0x5aa7f8['from'],_0x5aa7f8[_0x1bb1fa(0x2ac)],{'success':!![],'results':_0x1b3f68},_0x5aa7f8[_0x1bb1fa(0x2dc)]);}catch(_0x22edcc){this[_0x1bb1fa(0x1e8)](_0x5aa7f8[_0x1bb1fa(0x24c)],_0x5aa7f8['command'],{'success':![],'error':_0x22edcc[_0x1bb1fa(0x264)]},_0x5aa7f8[_0x1bb1fa(0x2dc)]);}else{if(_0x5aa7f8[_0x1bb1fa(0x2ac)]===_0x1bb1fa(0x279))try{const {current_temps:_0x504e8b,t_out:_0xc92ecd,targets:_0x518963,t_forecast:_0x445718}=_0x5aa7f8[_0x1bb1fa(0x264)],_0x4ae32b=[];let _0x2b3f7c={};try{const _0x1c94b3=await this['getStateAsync'](_0x1bb1fa(0x293));if(_0x1c94b3&&_0x1c94b3[_0x1bb1fa(0x292)]){const _0x1a57d3=JSON[_0x1bb1fa(0x1d9)](_0x1c94b3['val']);_0x2b3f7c=_0x1a57d3[_0x1bb1fa(0x1de)]||_0x1a57d3;}}catch(_0x3375f1){}const _0x59856f=_0x445718!==undefined&&_0x445718!==null?(_0xc92ecd+_0x445718)/0x2:_0xc92ecd;for(const [_0x5add16,_0x190f79]of Object[_0x1bb1fa(0x2c8)](_0x504e8b)){const _0x16362f=_0x518963[_0x5add16]||0x15;if(_0x190f79<=_0x16362f)continue;let _0xa3ca0f=_0x2b3f7c[_0x5add16]||-0.5;if(_0xa3ca0f>=0x0)_0xa3ca0f=-0.5;const _0x145f5b=Math[_0x1bb1fa(0x1fe)](_0xa3ca0f),_0x34201a=_0x190f79-_0x16362f;let _0x12a6b5=Math['floor'](_0x34201a/_0x145f5b*0x3c);const _0xd2fa13=_0x190f79-_0xc92ecd,_0x3182c9=_0x190f79-_0x59856f;if(_0x3182c9!==0x0&&_0xd2fa13!==0x0){const _0x211e90=_0xd2fa13/_0x3182c9;_0x12a6b5=Math['floor'](_0x12a6b5*_0x211e90);}if(_0x12a6b5>0xf){if(_0x12a6b5>0xf0)_0x12a6b5=0xf0;_0x4ae32b[_0x1bb1fa(0x2c7)]({'room':_0x5add16,'minutes_safe':_0x12a6b5,'target':_0x16362f,'current':_0x190f79,'savings_msg':'Heizung\x20kann\x20'+_0x12a6b5+_0x1bb1fa(0x20d)});}}_0x4ae32b[_0x1bb1fa(0x2d4)]((_0x2a31d1,_0xd7d652)=>_0xd7d652[_0x1bb1fa(0x1d6)]-_0x2a31d1['minutes_safe']),this[_0x1bb1fa(0x1e8)](_0x5aa7f8['from'],_0x5aa7f8['command'],{'success':!![],'proposals':_0x4ae32b},_0x5aa7f8['callback']);}catch(_0x525f73){this[_0x1bb1fa(0x1e8)](_0x5aa7f8[_0x1bb1fa(0x24c)],_0x5aa7f8[_0x1bb1fa(0x2ac)],{'success':![],'error':_0x525f73[_0x1bb1fa(0x264)]},_0x5aa7f8[_0x1bb1fa(0x2dc)]);}else{if(_0x5aa7f8['command']===_0x1bb1fa(0x271))await this[_0x1bb1fa(0x21a)](_0x1bb1fa(0x20c),{'val':![],'ack':!![]}),await this[_0x1bb1fa(0x21a)](_0x1bb1fa(0x25f),{'val':'','ack':!![]}),await this[_0x1bb1fa(0x21a)](_0x1bb1fa(0x231),{'val':'','ack':!![]}),this[_0x1bb1fa(0x1e8)](_0x5aa7f8[_0x1bb1fa(0x24c)],_0x5aa7f8['command'],{'success':!![]},_0x5aa7f8[_0x1bb1fa(0x2dc)]);else{if(_0x5aa7f8['command']===_0x1bb1fa(0x209)){const {targetId:_0xdbbd87,targetValue:_0x55048c}=_0x5aa7f8[_0x1bb1fa(0x264)];await this[_0x1bb1fa(0x21a)](_0x1bb1fa(0x20c),{'val':!![],'ack':!![]}),await this[_0x1bb1fa(0x21a)]('analysis.automation.description',{'val':'Simulation\x20durch\x20Admin\x20(Test)','ack':!![]}),await this[_0x1bb1fa(0x21a)]('analysis.automation.targetId',{'val':_0xdbbd87,'ack':!![]}),await this[_0x1bb1fa(0x21a)](_0x1bb1fa(0x246),{'val':String(_0x55048c),'ack':!![]}),this[_0x1bb1fa(0x1e8)](_0x5aa7f8[_0x1bb1fa(0x24c)],_0x5aa7f8[_0x1bb1fa(0x2ac)],{'success':!![]},_0x5aa7f8[_0x1bb1fa(0x2dc)]);}else{if(_0x5aa7f8[_0x1bb1fa(0x2ac)]===_0x1bb1fa(0x1da))try{const _0x57eea2=_0x5aa7f8[_0x1bb1fa(0x264)][_0x1bb1fa(0x1e0)];if(!_0x57eea2)throw new Error(_0x1bb1fa(0x222));const _0x5b1d79=new GoogleGenerativeAI(_0x57eea2),_0x123f6d=_0x5b1d79[_0x1bb1fa(0x291)]({'model':GEMINI_MODEL}),_0x5db58c=await _0x123f6d[_0x1bb1fa(0x2d2)]('Test'),_0x258a22=await _0x5db58c[_0x1bb1fa(0x224)];if(_0x258a22['text']())this[_0x1bb1fa(0x1e8)](_0x5aa7f8[_0x1bb1fa(0x24c)],_0x5aa7f8[_0x1bb1fa(0x2ac)],{'success':!![],'message':'Verbindung\x20erfolgreich!'},_0x5aa7f8[_0x1bb1fa(0x2dc)]);else throw new Error(_0x1bb1fa(0x221));}catch(_0x36c871){this['sendTo'](_0x5aa7f8[_0x1bb1fa(0x24c)],_0x5aa7f8[_0x1bb1fa(0x2ac)],{'success':![],'message':_0x36c871[_0x1bb1fa(0x264)]},_0x5aa7f8['callback']);}else{if(_0x5aa7f8['command']===_0x1bb1fa(0x1f8))try{const _0x1c4834=await scanner[_0x1bb1fa(0x27c)](this,_0x5aa7f8[_0x1bb1fa(0x264)]||{});this[_0x1bb1fa(0x1e8)](_0x5aa7f8['from'],_0x5aa7f8[_0x1bb1fa(0x2ac)],{'success':!![],'devices':_0x1c4834},_0x5aa7f8['callback']);}catch(_0x3e776a){this[_0x1bb1fa(0x1e8)](_0x5aa7f8[_0x1bb1fa(0x24c)],_0x5aa7f8['command'],{'success':![],'error':_0x3e776a[_0x1bb1fa(0x264)]},_0x5aa7f8[_0x1bb1fa(0x2dc)]);}else{if(_0x5aa7f8['command']===_0x1bb1fa(0x1f2))try{const {matrix:_0x55a8c9}=_0x5aa7f8[_0x1bb1fa(0x264)],_0x49aeac=await this['getStateAsync'](_0x1bb1fa(0x289));if(_0x49aeac&&_0x49aeac['val']){const _0x3903e0=JSON[_0x1bb1fa(0x1d9)](_0x49aeac[_0x1bb1fa(0x292)]);_0x3903e0['matrix']=_0x55a8c9,_0x3903e0[_0x1bb1fa(0x2aa)]=Date['now'](),await this[_0x1bb1fa(0x21a)](_0x1bb1fa(0x289),{'val':JSON['stringify'](_0x3903e0),'ack':!![]}),pythonBridge[_0x1bb1fa(0x2bf)](this,'SET_TOPOLOGY',_0x3903e0);}this['sendTo'](_0x5aa7f8[_0x1bb1fa(0x24c)],_0x5aa7f8[_0x1bb1fa(0x2ac)],{'success':!![]},_0x5aa7f8['callback']);}catch(_0x2821a0){this[_0x1bb1fa(0x280)][_0x1bb1fa(0x2bd)](_0x2821a0);}else{if(_0x5aa7f8[_0x1bb1fa(0x2ac)]===_0x1bb1fa(0x1e3))this[_0x1bb1fa(0x1e8)](_0x5aa7f8[_0x1bb1fa(0x24c)],_0x5aa7f8[_0x1bb1fa(0x2ac)],{'success':!![],'dailyDigests':this[_0x1bb1fa(0x248)]||[],'analysisHistory':this[_0x1bb1fa(0x2b4)]||[]},_0x5aa7f8[_0x1bb1fa(0x2dc)]);else{if(_0x5aa7f8[_0x1bb1fa(0x2ac)]===_0x1bb1fa(0x21d)){const _0x127c86=this['dailyDigests'][_0x1bb1fa(0x258)],_0x3efa8f=new Array(0x18)[_0x1bb1fa(0x1e6)](0x0),_0x3e3132=new Date()[_0x1bb1fa(0x28b)](0x0,0x0,0x0,0x0);this['eventHistory']&&this[_0x1bb1fa(0x298)][_0x1bb1fa(0x1d7)](_0x1c5ba0=>{const _0x38fd42=_0x1bb1fa;if(_0x1c5ba0[_0x38fd42(0x235)]>=_0x3e3132){const _0x30925f=new Date(_0x1c5ba0[_0x38fd42(0x235)])[_0x38fd42(0x1ee)]();if(_0x30925f>=0x0&&_0x30925f<0x18)_0x3efa8f[_0x30925f]++;}});let _0x3c7c63=![],_0x25c996='',_0xfa630='',_0x163081='';try{const _0x34016e=await this['getStateAsync'](_0x1bb1fa(0x20c));if(_0x34016e&&_0x34016e[_0x1bb1fa(0x292)]){_0x3c7c63=!![];const _0x4b3c43=await this[_0x1bb1fa(0x228)]('analysis.automation.description');_0x25c996=_0x4b3c43?_0x4b3c43[_0x1bb1fa(0x292)]:'';const _0x22afd6=await this['getStateAsync'](_0x1bb1fa(0x231));_0xfa630=_0x22afd6?_0x22afd6[_0x1bb1fa(0x292)]:'';const _0x4917e4=await this[_0x1bb1fa(0x228)]('analysis.automation.targetValue');_0x163081=_0x4917e4?_0x4917e4[_0x1bb1fa(0x292)]:'';}}catch(_0x3ac806){}const _0x2c7ec0=await this[_0x1bb1fa(0x2b3)](),_0x114e26=(this[_0x1bb1fa(0x20b)]['devices']||[])[_0x1bb1fa(0x1e5)](_0x1d4d5a=>_0x1d4d5a[_0x1bb1fa(0x2c4)]),_0x1fce86=_0x2c7ec0&&_0x114e26;this['sendTo'](_0x5aa7f8['from'],_0x5aa7f8[_0x1bb1fa(0x2ac)],{'success':!![],'eventHistory':this[_0x1bb1fa(0x298)]['slice'](0x0,0xf),'stats':{'digestCount':_0x127c86,'isPresent':this[_0x1bb1fa(0x232)],'hourlyActivity':_0x3efa8f,'solarActive':_0x1fce86},'automation':{'detected':_0x3c7c63,'description':_0x25c996,'targetId':_0xfa630,'targetValue':_0x163081}},_0x5aa7f8[_0x1bb1fa(0x2dc)]);}else{if(_0x5aa7f8[_0x1bb1fa(0x2ac)]===_0x1bb1fa(0x2cc)){const _0x1c6d42=await this[_0x1bb1fa(0x220)](_0x1bb1fa(0x2d8),_0x1bb1fa(0x25a)),_0x1c062f=[];if(_0x1c6d42)for(const _0x3c84b0 in _0x1c6d42){const _0x8b2a3a=_0x1c6d42[_0x3c84b0],_0x4cc540=(_0x8b2a3a[_0x1bb1fa(0x24e)]&&typeof _0x8b2a3a[_0x1bb1fa(0x24e)][_0x1bb1fa(0x1e7)]===_0x1bb1fa(0x2d3)?_0x8b2a3a[_0x1bb1fa(0x24e)][_0x1bb1fa(0x1e7)]['de']:_0x8b2a3a[_0x1bb1fa(0x24e)][_0x1bb1fa(0x1e7)])||_0x8b2a3a['common'][_0x1bb1fa(0x1e7)];_0x1c062f[_0x1bb1fa(0x2c7)]({'id':_0x3c84b0,'name':_0x4cc540});}const _0x11b6a6=await this['getForeignObjectsAsync'](_0x1bb1fa(0x26a),'enum'),_0x95ca57=[];if(_0x11b6a6)for(const _0x24e374 in _0x11b6a6){const _0x302ed8=_0x11b6a6[_0x24e374],_0x395043=(_0x302ed8[_0x1bb1fa(0x24e)]&&typeof _0x302ed8[_0x1bb1fa(0x24e)][_0x1bb1fa(0x1e7)]===_0x1bb1fa(0x2d3)?_0x302ed8[_0x1bb1fa(0x24e)][_0x1bb1fa(0x1e7)]['de']:_0x302ed8[_0x1bb1fa(0x24e)][_0x1bb1fa(0x1e7)])||_0x24e374[_0x1bb1fa(0x207)]('.')[_0x1bb1fa(0x299)]();_0x95ca57['push'](_0x395043);}this[_0x1bb1fa(0x1e8)](_0x5aa7f8[_0x1bb1fa(0x24c)],_0x5aa7f8[_0x1bb1fa(0x2ac)],{'success':!![],'enums':_0x1c062f,'rooms':_0x95ca57},_0x5aa7f8['callback']);}else{if(_0x5aa7f8[_0x1bb1fa(0x2ac)]===_0x1bb1fa(0x260))try{let _0x31bbbe=_0x1bb1fa(0x2a9),_0x1b9c07=_0x1bb1fa(0x276);if(this[_0x1bb1fa(0x20b)][_0x1bb1fa(0x252)]){const _0x39ec8c=await recorder[_0x1bb1fa(0x2ce)](this);_0x31bbbe=_0x39ec8c!==null?_0x39ec8c+'Â°C':_0x1bb1fa(0x295);}if(this[_0x1bb1fa(0x20b)][_0x1bb1fa(0x1ea)]){const _0x2a0d3a=await this[_0x1bb1fa(0x25c)]('system.adapter.'+this[_0x1bb1fa(0x20b)]['calendarInstance']);_0x1b9c07=_0x2a0d3a?_0x1bb1fa(0x2a5):_0x1bb1fa(0x237);}this[_0x1bb1fa(0x1e8)](_0x5aa7f8['from'],_0x5aa7f8[_0x1bb1fa(0x2ac)],{'success':!![],'weather':_0x31bbbe,'calendar':_0x1b9c07},_0x5aa7f8[_0x1bb1fa(0x2dc)]);}catch(_0x165816){this['sendTo'](_0x5aa7f8[_0x1bb1fa(0x24c)],_0x5aa7f8[_0x1bb1fa(0x2ac)],{'success':![],'error':_0x165816[_0x1bb1fa(0x264)]},_0x5aa7f8[_0x1bb1fa(0x2dc)]);}else{if(_0x5aa7f8['command']==='getCalendarNames')try{const _0x470893=_0x5aa7f8[_0x1bb1fa(0x264)]['instance'],_0x2a4470=await this[_0x1bb1fa(0x253)](_0x470893+_0x1bb1fa(0x259));let _0x437fec=[];if(_0x2a4470&&_0x2a4470['val']){const _0x5c74c2=JSON['parse'](_0x2a4470[_0x1bb1fa(0x292)]),_0x2e5c10=new Set();Array[_0x1bb1fa(0x250)](_0x5c74c2)&&_0x5c74c2[_0x1bb1fa(0x1d7)](_0x5128d7=>{const _0x46d57d=_0x1bb1fa;if(_0x5128d7[_0x46d57d(0x29a)])_0x2e5c10['add'](_0x5128d7['_calName']);else{if(_0x5128d7['calendarName'])_0x2e5c10[_0x46d57d(0x28a)](_0x5128d7[_0x46d57d(0x27b)]);}}),_0x437fec=Array[_0x1bb1fa(0x24c)](_0x2e5c10)[_0x1bb1fa(0x2d4)]();}if(_0x437fec['length']===0x0)_0x437fec=[_0x1bb1fa(0x20f)];this['sendTo'](_0x5aa7f8[_0x1bb1fa(0x24c)],_0x5aa7f8[_0x1bb1fa(0x2ac)],{'success':!![],'names':_0x437fec},_0x5aa7f8[_0x1bb1fa(0x2dc)]);}catch(_0x40a56f){this[_0x1bb1fa(0x1e8)](_0x5aa7f8[_0x1bb1fa(0x24c)],_0x5aa7f8[_0x1bb1fa(0x2ac)],{'success':![],'error':_0x40a56f[_0x1bb1fa(0x264)]},_0x5aa7f8[_0x1bb1fa(0x2dc)]);}else{if(_0x5aa7f8[_0x1bb1fa(0x2ac)]===_0x1bb1fa(0x1ed))try{await setup['sendNotification'](this,_0x1bb1fa(0x2cf),![],![]),this[_0x1bb1fa(0x1e8)](_0x5aa7f8[_0x1bb1fa(0x24c)],_0x5aa7f8[_0x1bb1fa(0x2ac)],{'success':!![],'message':'Gesendet'},_0x5aa7f8['callback']);}catch(_0x1d2813){this['log']['error']('Notification\x20Test\x20Failed:\x20'+_0x1d2813[_0x1bb1fa(0x264)]),this[_0x1bb1fa(0x1e8)](_0x5aa7f8[_0x1bb1fa(0x24c)],_0x5aa7f8[_0x1bb1fa(0x2ac)],{'success':![],'message':_0x1bb1fa(0x2b7)+_0x1d2813[_0x1bb1fa(0x264)]},_0x5aa7f8[_0x1bb1fa(0x2dc)]);}}}}}}}}}}}}}}}async[a0_0xc0a64a(0x216)](){const _0x109e8a=a0_0xc0a64a;try{const _0x95193d=await this['getStateAsync'](setup[_0x109e8a(0x22a)]);_0x95193d&&_0x95193d[_0x109e8a(0x292)]&&Object[_0x109e8a(0x270)](setup['SYSTEM_MODES'])[_0x109e8a(0x1f5)](_0x95193d[_0x109e8a(0x292)])?this[_0x109e8a(0x1db)]=_0x95193d['val']:(this[_0x109e8a(0x1db)]=setup[_0x109e8a(0x26e)]['NORMAL'],await this['setStateAsync'](setup[_0x109e8a(0x22a)],{'val':setup['SYSTEM_MODES'][_0x109e8a(0x25d)],'ack':!![]}));}catch(_0x5ef2b7){this[_0x109e8a(0x1db)]=setup[_0x109e8a(0x26e)][_0x109e8a(0x25d)];}}async[a0_0xc0a64a(0x1eb)](){const _0x58127c=a0_0xc0a64a;try{const _0x5dbf86=this['config']['presenceDevices']||[];let _0x524841=![];const _0x3c9bdb=[];for(const _0x17f2ac of _0x5dbf86){try{const _0x591b1a=await this['getForeignStateAsync'](_0x17f2ac);_0x591b1a&&(_0x591b1a['val']===!![]||_0x591b1a[_0x58127c(0x292)]==='online'||_0x591b1a[_0x58127c(0x292)]===0x1)&&(_0x524841=!![],_0x3c9bdb[_0x58127c(0x2c7)](_0x17f2ac));}catch(_0x124aaa){}}return await this[_0x58127c(0x21a)](_0x58127c(0x1f1),{'val':_0x3c9bdb['join'](',\x20'),'ack':!![]}),_0x524841&&(this[_0x58127c(0x244)]&&(this[_0x58127c(0x280)][_0x58127c(0x268)](_0x58127c(0x28d)),recorder[_0x58127c(0x2b6)](this)),!this[_0x58127c(0x232)]&&this['currentSystemMode']===setup[_0x58127c(0x26e)][_0x58127c(0x25d)]&&await recorder[_0x58127c(0x247)](this,!![])),_0x524841;}catch(_0x46d32a){return![];}}async[a0_0xc0a64a(0x26b)](){const _0x5c045d=a0_0xc0a64a;this[_0x5c045d(0x280)][_0x5c045d(0x266)](_0x5c045d(0x22b)),await aiAgent[_0x5c045d(0x2c1)](this),this[_0x5c045d(0x287)](),this[_0x5c045d(0x277)](),this[_0x5c045d(0x27e)]();}async[a0_0xc0a64a(0x2b3)](){const _0x6348c5=a0_0xc0a64a,_0x1d1bb6=[_0x6348c5(0x212),_0x6348c5(0x229),'daswetter.0'],_0x2809a7=[_0x6348c5(0x267),_0x6348c5(0x283),'NextHours.Location_1.Day_1.current.symbol_desc'];for(const _0x15b003 of _0x1d1bb6){for(const _0x166f79 of _0x2809a7){try{const _0x57d37f=_0x15b003+'.'+_0x166f79,_0x347b0b=await this[_0x6348c5(0x253)](_0x57d37f);if(_0x347b0b&&_0x347b0b[_0x6348c5(0x292)]){const _0x2024d7=String(_0x347b0b[_0x6348c5(0x292)])[_0x6348c5(0x1ec)]();if(_0x2024d7[_0x6348c5(0x1f5)](_0x6348c5(0x2d5))||_0x2024d7[_0x6348c5(0x1f5)](_0x6348c5(0x28e))||_0x2024d7['includes'](_0x6348c5(0x226))||_0x2024d7['includes'](_0x6348c5(0x208))||_0x2024d7['includes'](_0x6348c5(0x1f6)))return!![];}}catch(_0x3b926e){}}}return![];}[a0_0xc0a64a(0x277)](){const _0x550289=a0_0xc0a64a;if(!this[_0x550289(0x1dc)])return;try{this['getState'](_0x550289(0x225),(_0x229555,_0x460bbe)=>{const _0x8b4ca=_0x550289;_0x460bbe&&_0x460bbe[_0x8b4ca(0x292)]&&pythonBridge[_0x8b4ca(0x2bf)](this,_0x8b4ca(0x26d),{'sequences':JSON['parse'](_0x460bbe[_0x8b4ca(0x292)])});});}catch(_0x1578eb){}}async['triggerEnergyPrediction'](){const _0x18ebf5=a0_0xc0a64a;if(!this[_0x18ebf5(0x1dc)])return;try{const _0x381804=await recorder[_0x18ebf5(0x2ce)](this);if(_0x381804===null)return;const _0x104f49={},_0xe67def={},_0x5e7257=this[_0x18ebf5(0x20b)][_0x18ebf5(0x24f)]||[];for(const _0x17fd7e of _0x5e7257){if(_0x17fd7e[_0x18ebf5(0x2b2)]===_0x18ebf5(0x282)&&_0x17fd7e[_0x18ebf5(0x1f4)]){const _0x2e0324=this[_0x18ebf5(0x2b9)][_0x17fd7e['id']];if(_0x2e0324!==undefined)_0x104f49[_0x17fd7e[_0x18ebf5(0x1f4)]]=_0x2e0324;if(_0x17fd7e[_0x18ebf5(0x2c4)])_0xe67def[_0x17fd7e[_0x18ebf5(0x1f4)]]=!![];}}const _0x149eb0=await this[_0x18ebf5(0x2b3)]();let _0x404f93={};try{const _0x14fd18=await this['getStateAsync']('analysis.energy.warmupTargets');if(_0x14fd18&&_0x14fd18[_0x18ebf5(0x292)])_0x404f93=JSON[_0x18ebf5(0x1d9)](_0x14fd18['val']);}catch(_0x259402){}Object[_0x18ebf5(0x2a3)](_0x104f49)[_0x18ebf5(0x258)]>0x0&&(pythonBridge[_0x18ebf5(0x2bf)](this,_0x18ebf5(0x274),{'current_temps':_0x104f49,'t_out':_0x381804,'is_sunny':_0x149eb0,'solar_flags':_0xe67def,'warmup_targets':_0x404f93}),pythonBridge[_0x18ebf5(0x2bf)](this,_0x18ebf5(0x2cd),{'current_temps':_0x104f49,'t_out':_0x381804,'targets':{}}));}catch(_0x5ba50c){}}[a0_0xc0a64a(0x287)](){const _0x23b777=a0_0xc0a64a;if(!this[_0x23b777(0x256)]||this[_0x23b777(0x256)][_0x23b777(0x258)]===0x0)return;const _0x24284b=new Array(0x60)[_0x23b777(0x1e6)](0x0),_0x3a82a5=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x23b777(0x256)][_0x23b777(0x1d7)](_0x1ef243=>{const _0x3242c2=_0x23b777,_0x10a8c4=new Date(_0x1ef243[_0x3242c2(0x235)]);if(_0x10a8c4[_0x3242c2(0x1d8)]()>=_0x3a82a5){const _0x32faa0=_0x10a8c4[_0x3242c2(0x1ee)](),_0x30cd01=_0x10a8c4['getMinutes'](),_0x258962=_0x32faa0*0x4+Math[_0x3242c2(0x24b)](_0x30cd01/0xf);if(_0x258962>=0x0&&_0x258962<0x60)_0x24284b[_0x258962]++;}}),this[_0x23b777(0x21a)](_0x23b777(0x254),{'val':JSON['stringify'](_0x24284b),'ack':!![]});}[a0_0xc0a64a(0x245)](){const _0x53e405=a0_0xc0a64a;if(!this[_0x53e405(0x248)]||this[_0x53e405(0x248)][_0x53e405(0x258)]<0x2)return;const _0x4dd4ca=this['dailyDigests'][_0x53e405(0x20e)](_0x31ead4=>{const _0x3f559f=_0x53e405,_0x2a0f70=(_0x31ead4[_0x3f559f(0x27f)]||'')[_0x3f559f(0x1ec)]();return ACTIVITY_LEVEL_MAP[_0x2a0f70]||0x32;});pythonBridge[_0x53e405(0x2bf)](this,_0x53e405(0x2ad),{'values':_0x4dd4ca,'tag':'Activity-Level'});}}if(require[a0_0xc0a64a(0x202)]!==module)module[a0_0xc0a64a(0x20a)]=_0x48e3fb=>new CogniLiving(_0x48e3fb);else new CogniLiving();