function a0_0x3d69(_0x4ce0ff,_0x204383){const _0x3019de=a0_0x1fe3();return a0_0x3d69=function(_0x410f4e,_0x3b1f2a){_0x410f4e=_0x410f4e-0x7f;let _0x1fe388=_0x3019de[_0x410f4e];return _0x1fe388;},a0_0x3d69(_0x4ce0ff,_0x204383);}const a0_0x37c99c=a0_0x3d69;(function(_0x5aac7d,_0x24ef22){const _0x580d2a=a0_0x3d69,_0x5a4864=_0x5aac7d();while(!![]){try{const _0x4e083e=parseInt(_0x580d2a(0x10c))/0x1*(-parseInt(_0x580d2a(0x126))/0x2)+parseInt(_0x580d2a(0x1c1))/0x3+-parseInt(_0x580d2a(0x1db))/0x4+-parseInt(_0x580d2a(0x168))/0x5*(-parseInt(_0x580d2a(0x124))/0x6)+-parseInt(_0x580d2a(0xda))/0x7+-parseInt(_0x580d2a(0xdb))/0x8+parseInt(_0x580d2a(0x161))/0x9;if(_0x4e083e===_0x24ef22)break;else _0x5a4864['push'](_0x5a4864['shift']());}catch(_0x3baf3c){_0x5a4864['push'](_0x5a4864['shift']());}}}(a0_0x1fe3,0x73e44));const a0_0x3b1f2a=(function(){let _0x4b9d8d=!![];return function(_0x36f7e3,_0x20d67f){const _0xae72a3=_0x4b9d8d?function(){const _0x49f24c=a0_0x3d69;if(_0x20d67f){const _0x1a85ad=_0x20d67f[_0x49f24c(0xaf)](_0x36f7e3,arguments);return _0x20d67f=null,_0x1a85ad;}}:function(){};return _0x4b9d8d=![],_0xae72a3;};}()),a0_0x410f4e=a0_0x3b1f2a(this,function(){const _0x532fe9=a0_0x3d69;return a0_0x410f4e['toString']()['search']('(((.+)+)+)+$')[_0x532fe9(0x115)]()['constructor'](a0_0x410f4e)['search'](_0x532fe9(0x1dc));});a0_0x410f4e();'use strict';const utils=require(a0_0x37c99c(0x8e)),{GoogleGenerativeAI}=require(a0_0x37c99c(0xb8)),path=require(a0_0x37c99c(0x98)),fs=require('fs'),installer=require('./lib/installer'),scanner=require(a0_0x37c99c(0xf8)),schedulers=require(a0_0x37c99c(0xc6)),topology=require('./lib/topology'),setup=require(a0_0x37c99c(0x164)),recorder=require(a0_0x37c99c(0xfe)),pythonBridge=require(a0_0x37c99c(0x1ba)),aiAgent=require(a0_0x37c99c(0x198)),deadMan=require(a0_0x37c99c(0xcc)),automation=require(a0_0x37c99c(0x1bd)),GEMINI_MODEL='models/gemini-flash-latest';function a0_0x1fe3(){const _0x157317=['analysis.safety.infrasoundAlert','analysis.training.triggerComfort','{\x22history\x22:{}}','./lib/ai_agent','enum','getStateAsync','system.presenceWho','analysis.training.triggerSecurity','error','analysis.health.todayRoomDetails','updated','getCalendarNames','üìù\x20Manual\x20event\x20logged:\x20','getDate','replayTodayEvents','haust√ºr','getOverviewData','cogni-living\x20adapter\x20starting\x20(v','times','analysisTimer','NORMAL','...','sendTo','refreshCalendar\x20failed:\x20','üîÆ\x20Energy\x20Prediction\x20triggered\x20(','common','getMinutes','\x20>\x20','health','setPresence','onUnload','motion','includes','cleanupGhostInterventions','some','scanDevices','TRAIN_SECURITY','./lib/python_bridge','SYSTEM_DP_MODE','infrasoundEnabled','./lib/automation','Warm-Up\x20Time','analysis.security.learningStatus','Say\x20Hello','1018386qHqrKy','fill','useCalendar','pythonBridge\x20command\x20failed:\x20','warn','Adapter','triggerEnergyPrediction','[PythonBridge]\x20Forwarding\x20command:\x20','custom','map','moduleSecurity','updateLocation','¬∞C\x20(Innen:\x20','cogni-living','max','eventHistory','executeAutomationAction','LTM.rawEventLog','genAI','scanThermostats','onStateChange','analysis.energy.warmupTimes','val','Unbekannt','temperature','weatherunderground.0','130992obCVWr','(((.+)+)+)+$','üîä\x20Infraschall-Alarm:\x20','exitGraceTimer','getForeignStateAsync','clear','find','push','toLocaleDateString','sonn','setStateAsync','events.history','getObjectViewAsync','weatherTempId','from','system','timestamp','sendNotification','Live\x20Event\x20Pulse','analysis.energy.warmupTargets','triggerBriefing','startService','location','online','unload','isPresent','security','üíæ\x20Saving\x20Daily\x20History\x20for\x20','Aktiv\x20(','[Integrator]\x20Error:\x20','analysisHistory','runPythonHealthCheck','calendarName','existsSync','@iobroker/adapter-core','\x20(Threshold)','response','2-digit','isProVersion','analysis.trigger','stringify','toLocaleTimeString','\x20rooms)','systemConfig','path','analysis.prediction.trackerConfidence','.uptime','pressureBuffer','analysis.topology.structure',')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)','analysis.automation.description','sendMorningBriefing','moduleHealth','createDailyDigest','updateTopology','üì¶\x20Restored\x20','memoryCache','manual','matrix','inactivityThresholdHours','CALCULATE_HEALTH_TREND','analysis.energy.warmupSources','modeResetJob','readFileSync','59\x2023\x20*\x20*\x20*','analysis.activity.roomStats','debug','apply','historyJob','thermostat','calendarCheckTimer','L√ºften\x20empfohlen','main','isGracePeriodActive','mkdirSync','handleInfrasound','@google/generative-ai','join','triggerDailyDigest','Gute\x20L√ºftungsm√∂glichkeit!','value','checkSolarCondition','LTM.dailyDigests','values','infrasoundSensorId','history','testContext','driftAnalysisTimer','substring','ANALYZE_GAIT','./lib/scheduler','Init...','then','‚Ü∫\x20Replaying\x20','Guest\x20Mode','‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.','./lib/dead_man','now','\x20(Bewohner\x20anwesend\x20-\x20normal)','Daily\x20Room\x20Details\x20(48x30min)','saveDailyHistory','system.adapter.ical.','system.adapter.ical.È¶ô','\x20events\x20from\x20today...','sources','getHistoryData','config','updateTopologyMatrix\x20failed:\x20','isArray','number','3171343AQZWPp','5172432SJjkJQ','‚úÖ\x20History\x20saved:\x20','checkWifiPresence:\x20Error\x20checking\x20','NextHours.Location_1.Day_1.current.symbol_desc','processSensorEvent','sunny','threshold_exceeded','communicate.request','appendToLog','round','protectAiMemory','{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}','analysis.health.activityTrend','briefingJob','presenceCheckTimer','min','Room\x20Dwell\x20Time\x20Stats','Daily\x20Activity\x20Vector\x20(48x30min)','.json','infrasoundLocked','analysis.automation.targetValue','floor','moduleComfort','checkCalendarTriggers','analysis.prediction.trackerTopRoom','rawEventLog','scanForDevices','analysis.training.triggerEnergy','PREDICT_ENERGY','./lib/scanner',',\x20Events:\x0a','telegram','enum.functions.*','.system.mode','Warte\x20auf\x20Analyse...','./lib/recorder','getEnums','isSolar','guest','History\x20Save\x20Error:\x20','Unknown','modules','loadSystemMode','checkWifiPresence','testApiKey','analysis.training.status','updateTopologyMatrix','bootTime','length','632629wjjEfB','analysis.training.triggerTopology','callback','.isOnline','Party\x20Mode','analysis.training.triggerHealth','onMessage','analysis.ventilation.lastWindow','devices','toString','forEach','.venv','‚òÄÔ∏è\x20Solar\x20Condition:\x20SUNNY\x20detected\x20via\x20','utf8','analysis.health.todayVector','geminiModel','analysis.health.geminiNight','getForeignObjectsAsync','open','.data.table','add','endsWith','toISOString','all','18IIkwxv','json','2owyZMA','currentSystemMode','subscribeForeignStatesAsync','dependencyInstallInProgress','No\x20topology\x20data\x20found','generateContent','onReady','reduce','application/json','subscribeStates','cancel','setObjectNotExistsAsync','ERROR','updateHealthVector','TRAIN_HEALTH','type','geminiApiKey','bind','üï∏Ô∏è\x20Topology\x20Matrix\x20manually\x20updated\x20by\x20user.','analysis.security.lastScore','info','analysis.automation.patternDetected','setHours','getTime','shift','Sec-Training\x20started...','runGeminiAnalysis','analysis.activity.roomHistory','TRAIN_COMFORT','filter','getAbsoluteDefaultDataDir','analyzeWindowOpening\x20error:\x20','forecast.current.weather','üîä\x20Infraschall:\x20','presenceDevices','enum.rooms.*','integrateRoomTime','.last_seen','send','createAllObjects','initSchedules','infrasoundArmingId','dailyDigests','No\x20data','subscribeForeignStates','comfort','startSystem','sensorLastValues','SYSTEM_MODES','todayVector','exports','outdoorSensorId','string','triggerGaitAnalysis','split','analysis.health.geminiDay','toLowerCase','pop','date','9694953pAguRT','parse','triggerInfrasoundCorrelation','./lib/setup','¬∞C,\x20Au√üen:\x20','\x20Tage)','terrasse','1371655wAUKNX','VACATION','minDaysForBaseline','setState','bin','state','text','stopService','slice','generateHealthReport','object','writeFileSync','keys','Verbindung\x20erfolgreich:\x20',':\x20Temp-Differenz\x20','ack','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','log','lastAlertState','party','roomIntegratorTimer','exitTimer','triggerGaitAnalysis\x20parse\x20error:\x20','getHours','command','analyzeWindowOpening','analysis.automation.targetId','message','name','toFixed','initHistory','instance','\x20-\x20','Keine\x20Daten','namespace','isRelevantActivity','energy','de-DE','ltmJob','healthTrendInterval','¬∞C)','rows','activeModules','Manual\x20Event','Sonne:\x20'];a0_0x1fe3=function(){return _0x157317;};return a0_0x1fe3();}class CogniLiving extends utils[a0_0x37c99c(0x1c6)]{constructor(_0x4ca838){const _0x1fc306=a0_0x37c99c;super({..._0x4ca838,'name':_0x1fc306(0x1ce)}),this[_0x1fc306(0x1d0)]=[],this[_0x1fc306(0x8a)]=[],this[_0x1fc306(0xf4)]=[],this[_0x1fc306(0x150)]=[],this[_0x1fc306(0x155)]={},this[_0x1fc306(0x97)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x1fc306(0x17d)]=null,this[_0x1fc306(0x1de)]=null,this[_0x1fc306(0xb5)]=![],this['genAI']=null,this[_0x1fc306(0x11b)]=null,this[_0x1fc306(0x127)]=setup[_0x1fc306(0x156)][_0x1fc306(0x1a9)],this['isProVersion']=![],this[_0x1fc306(0x17a)]=![],this['analysisTimer']=null,this['calendarCheckTimer']=null,this['presenceCheckTimer']=null,this[_0x1fc306(0x18e)]=null,this[_0x1fc306(0xaa)]=null,this[_0x1fc306(0xc3)]=null,this[_0x1fc306(0xe8)]=null,this[_0x1fc306(0xb0)]=null,this['trackerHeartbeat']=null,this[_0x1fc306(0x18f)]=null,this['roomIntegratorTimer']=null,this['dependencyInstallInProgress']=![],this['lastTrackerEventTime']=Date[_0x1fc306(0xcd)](),this['memoryCache']=null,this['bootTime']=Date[_0x1fc306(0xcd)](),this[_0x1fc306(0xee)]=![],this[_0x1fc306(0x9b)]=[],this[_0x1fc306(0x192)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on']('ready',this[_0x1fc306(0x12c)][_0x1fc306(0x137)](this)),this['on']('stateChange',this[_0x1fc306(0x1d5)][_0x1fc306(0x137)](this)),this['on'](_0x1fc306(0x84),this[_0x1fc306(0x1b3)][_0x1fc306(0x137)](this)),this['on']('message',this[_0x1fc306(0x112)]['bind'](this));}async['onReady'](){const _0x31b722=a0_0x37c99c;this[_0x31b722(0x179)][_0x31b722(0x13a)](_0x31b722(0x1a6)+this['version']+_0x31b722(0x9d));if(this[_0x31b722(0xd6)][_0x31b722(0xa0)]!==undefined)this[_0x31b722(0x192)][_0x31b722(0x1b1)]=this['config'][_0x31b722(0xa0)];if(this[_0x31b722(0xd6)][_0x31b722(0x1cb)]!==undefined)this[_0x31b722(0x192)]['security']=this[_0x31b722(0xd6)][_0x31b722(0x1cb)];if(this['config']['moduleEnergy']!==undefined)this['activeModules']['energy']=this[_0x31b722(0xd6)]['moduleEnergy'];if(this[_0x31b722(0xd6)][_0x31b722(0xf1)]!==undefined)this[_0x31b722(0x192)][_0x31b722(0x153)]=this[_0x31b722(0xd6)][_0x31b722(0xf1)];if(this[_0x31b722(0xd6)][_0x31b722(0x104)])this[_0x31b722(0x192)]={...this[_0x31b722(0x192)],...this[_0x31b722(0xd6)][_0x31b722(0x104)]};this[_0x31b722(0x154)]();}async[a0_0x37c99c(0x154)](){const _0xc0818=a0_0x37c99c;await setup['initZombies'](this);try{this[_0xc0818(0x92)]=await setup['checkLicense'](this['config']['licenseKey']);}catch(_0x5b2283){}if(!this[_0xc0818(0xd6)][_0xc0818(0xa7)]||this[_0xc0818(0xd6)][_0xc0818(0xa7)]<0.1)this[_0xc0818(0xd6)][_0xc0818(0xa7)]=0xc;await setup[_0xc0818(0x186)](this),await setup['initSystemConfig'](this),topology[_0xc0818(0xa2)](this);try{const _0xca4b31=await this[_0xc0818(0x19a)](_0xc0818(0x1d6)),_0x39fd7d=await this[_0xc0818(0x19a)](_0xc0818(0xa9));_0xca4b31&&_0xca4b31['val']&&_0x39fd7d&&_0x39fd7d['val']&&(Date[_0xc0818(0xcd)]()-_0xca4b31['ts']<0x4*0xe10*0x3e8&&(this[_0xc0818(0xa4)]={'times':JSON[_0xc0818(0x162)](_0xca4b31[_0xc0818(0x1d7)]),'sources':JSON[_0xc0818(0x162)](_0x39fd7d['val'])}));}catch(_0x1b82b2){}if(this[_0xc0818(0xd6)][_0xc0818(0x136)])try{this[_0xc0818(0x1d3)]=new GoogleGenerativeAI(this[_0xc0818(0xd6)]['geminiApiKey']),this[_0xc0818(0x11b)]=this[_0xc0818(0x1d3)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0xc0818(0x12e)}});}catch(_0x2ffac0){this['log'][_0xc0818(0x19d)]('Gemini\x20Init\x20Error:\x20'+_0x2ffac0['message']);}await setup[_0xc0818(0x14d)](this),await this[_0xc0818(0x105)](),schedulers[_0xc0818(0x14e)](this),await this['setObjectNotExistsAsync']('analysis.visualization.pulse',{'type':_0xc0818(0x16d),'common':{'name':_0xc0818(0x1ed),'type':'number','role':'value','read':!![],'write':![]},'native':{}}),await this[_0xc0818(0x131)](_0xc0818(0xad),{'type':_0xc0818(0x16d),'common':{'name':_0xc0818(0xeb),'type':'string','role':_0xc0818(0x125),'read':!![],'write':![],'def':_0xc0818(0xe6)},'native':{}}),await this[_0xc0818(0x131)](_0xc0818(0x141),{'type':'state','common':{'name':'Room\x20History\x20(24h\x20Buckets)','type':_0xc0818(0x15a),'role':_0xc0818(0x125),'read':!![],'write':![],'def':_0xc0818(0x197)},'native':{}}),await this[_0xc0818(0x131)]('analysis.health.geminiNight',{'type':_0xc0818(0x16d),'common':{'name':'Gemini\x20Report\x20Night','type':_0xc0818(0x15a),'role':_0xc0818(0x16e),'read':!![],'write':![],'def':_0xc0818(0xfd)},'native':{}}),await this[_0xc0818(0x131)](_0xc0818(0x15d),{'type':_0xc0818(0x16d),'common':{'name':'Gemini\x20Report\x20Day','type':_0xc0818(0x15a),'role':_0xc0818(0x16e),'read':!![],'write':![],'def':_0xc0818(0xfd)},'native':{}}),await this['setObjectNotExistsAsync'](_0xc0818(0x11a),{'type':'state','common':{'name':_0xc0818(0xec),'type':'string','role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0xc0818(0x131)]('analysis.health.todayRoomDetails',{'type':_0xc0818(0x16d),'common':{'name':_0xc0818(0xcf),'type':_0xc0818(0x15a),'role':_0xc0818(0x125),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.activityTrend',{'type':_0xc0818(0x16d),'common':{'name':'General\x20Activity\x20Trend','type':_0xc0818(0xd9),'role':_0xc0818(0xbc),'unit':'%','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.energy.warmupTimes',{'type':'state','common':{'name':_0xc0818(0x1be),'type':_0xc0818(0x15a),'role':'json','read':!![],'write':![]},'native':{}});try{const _0x341fd5=await this[_0xc0818(0x19a)](_0xc0818(0x1e6));if(_0x341fd5&&_0x341fd5[_0xc0818(0x1d7)]){this[_0xc0818(0x1d0)]=JSON['parse'](_0x341fd5[_0xc0818(0x1d7)]);if(this['isProVersion']){const _0x384c7b=await this[_0xc0818(0x19a)](_0xc0818(0x1d2));if(_0x384c7b&&_0x384c7b['val'])this['rawEventLog']=JSON['parse'](_0x384c7b[_0xc0818(0x1d7)]);}this[_0xc0818(0x179)][_0xc0818(0x13a)](_0xc0818(0xa3)+this[_0xc0818(0x1d0)][_0xc0818(0x10b)]+'\x20events\x20from\x20standard\x20storage.');}}catch(_0x4703ca){this['eventHistory']=[];}try{const _0x48449d=await this[_0xc0818(0x19a)](_0xc0818(0xbe));if(_0x48449d&&_0x48449d['val'])this[_0xc0818(0x150)]=JSON['parse'](_0x48449d[_0xc0818(0x1d7)]);}catch(_0x38bfac){this['dailyDigests']=[];}const _0x6e5955=this[_0xc0818(0x150)][_0xc0818(0x10b)]>=(this[_0xc0818(0xd6)]['minDaysForBaseline']||0x7)?_0xc0818(0x88)+this[_0xc0818(0x150)][_0xc0818(0x10b)]+_0xc0818(0x166):'Lernphase\x20('+this[_0xc0818(0x150)][_0xc0818(0x10b)]+'/'+(this['config'][_0xc0818(0x16a)]||0x7)+')';await this['setStateAsync']('LTM.baselineStatus',{'val':_0x6e5955,'ack':!![]}),this[_0xc0818(0x12f)](_0xc0818(0x93)),this[_0xc0818(0x12f)]('LTM.triggerDailyDigest'),this['subscribeStates'](_0xc0818(0x111));this[_0xc0818(0xd6)][_0xc0818(0x1bc)]&&this[_0xc0818(0xd6)]['infrasoundSensorId']&&this[_0xc0818(0x192)][_0xc0818(0x86)]&&this[_0xc0818(0x152)](this[_0xc0818(0xd6)][_0xc0818(0xc0)]);const _0x28f2bc=this[_0xc0818(0xd6)][_0xc0818(0x114)];if(_0x28f2bc)for(const _0x35e859 of _0x28f2bc){await this[_0xc0818(0x128)](_0x35e859['id']);}const _0x4ce0bd=this[_0xc0818(0xd6)][_0xc0818(0x148)];if(_0x4ce0bd)for(const _0x47e3bf of _0x4ce0bd){await this['subscribeForeignStatesAsync'](_0x47e3bf);}const _0x641b36=require('node-schedule');if(this[_0xc0818(0xb0)])this['historyJob'][_0xc0818(0x130)]();this['historyJob']=_0x641b36['scheduleJob'](_0xc0818(0xac),()=>{const _0x3aa6a2=_0xc0818;this[_0x3aa6a2(0xd0)]();}),setTimeout(()=>this[_0xc0818(0x1a3)](),0x1388);if(this['roomIntegratorTimer'])clearInterval(this['roomIntegratorTimer']);this[_0xc0818(0x14a)](),this[_0xc0818(0x17c)]=setInterval(async()=>{const _0x3446dc=_0xc0818;await this[_0x3446dc(0x14a)]();},0x3c*0x3e8);if(this[_0xc0818(0x18f)])clearInterval(this[_0xc0818(0x18f)]);this[_0xc0818(0x18f)]=setInterval(()=>{const _0x3264e3=_0xc0818;this[_0x3264e3(0x92)]&&this['activeModules'][_0x3264e3(0x1b1)]&&this['runPythonHealthCheck']();},0x4*0x3c*0x3c*0x3e8);if(this[_0xc0818(0x1a8)])clearInterval(this['analysisTimer']);this[_0xc0818(0x192)]['energy']&&(this[_0xc0818(0x1a8)]=setInterval(()=>{const _0x3d3d68=_0xc0818;this[_0x3d3d68(0x1c7)]();},0xf*0x3c*0x3e8),setTimeout(()=>this[_0xc0818(0x1c7)](),0x2710));if(this[_0xc0818(0xb2)])clearInterval(this['calendarCheckTimer']);this[_0xc0818(0xd6)][_0xc0818(0x1c3)]&&this[_0xc0818(0x192)][_0xc0818(0x18c)]&&(this[_0xc0818(0xb2)]=setInterval(()=>{const _0xfcb559=_0xc0818;automation[_0xfcb559(0xf2)](this);},0x2*0x3c*0x3e8),setTimeout(()=>automation['checkCalendarTriggers'](this),0x3a98));if(this['presenceCheckTimer'])clearInterval(this['presenceCheckTimer']);this[_0xc0818(0xd6)][_0xc0818(0x148)]&&this[_0xc0818(0xd6)]['presenceDevices'][_0xc0818(0x10b)]>0x0&&(this[_0xc0818(0xe9)]=setInterval(async()=>{const _0x40ca72=_0xc0818;await this[_0x40ca72(0x106)]();},0x3c*0x3e8),setTimeout(async()=>await this[_0xc0818(0x106)](),0x1388));const _0x2ff73f=path[_0xc0818(0xb9)](__dirname,_0xc0818(0x117),_0xc0818(0x16c),'python');pythonBridge[_0xc0818(0x81)](this,_0x2ff73f);}[a0_0x37c99c(0x1b3)](_0xf37ca){const _0x2dc22d=a0_0x37c99c;if(this[_0x2dc22d(0xb0)])this['historyJob'][_0x2dc22d(0x130)]();this['saveDailyHistory']()[_0x2dc22d(0xc8)](()=>{const _0x5d9a02=_0x2dc22d;if(this[_0x5d9a02(0x1a8)])clearInterval(this['analysisTimer']);if(this['calendarCheckTimer'])clearInterval(this[_0x5d9a02(0xb2)]);if(this['presenceCheckTimer'])clearInterval(this[_0x5d9a02(0xe9)]);if(this[_0x5d9a02(0x17c)])clearInterval(this[_0x5d9a02(0x17c)]);recorder['abortExitTimer'](this),pythonBridge[_0x5d9a02(0x16f)](this),_0xf37ca();});}async[a0_0x37c99c(0x1a3)](){const _0x17b7a6=a0_0x37c99c;if(!this['eventHistory']||this[_0x17b7a6(0x1d0)][_0x17b7a6(0x10b)]===0x0){this['log']['warn'](_0x17b7a6(0xcb));return;}this[_0x17b7a6(0x179)][_0x17b7a6(0x13a)](_0x17b7a6(0xc9)+this[_0x17b7a6(0x1d0)]['length']+_0x17b7a6(0xd3));const _0x41eff7=new Date()[_0x17b7a6(0x13c)](0x0,0x0,0x0,0x0),_0x1e828b='analysis.activity.roomHistory';let _0x5e3167={'history':{},'date':new Date()[_0x17b7a6(0x1e3)]()};const _0x46da22='analysis.health.todayVector',_0x45a9f5=_0x17b7a6(0x19e);let _0xb740bb=new Array(0x30)['fill'](0x0),_0x4d272a=Array[_0x17b7a6(0x1e9)]({'length':0x30},()=>[]);this[_0x17b7a6(0x1d0)][_0x17b7a6(0x116)](_0xb206d5=>{const _0x46d81a=_0x17b7a6;if(_0xb206d5[_0x46d81a(0x1eb)]>=_0x41eff7){if(recorder[_0x46d81a(0x18b)](_0xb206d5[_0x46d81a(0x135)],_0xb206d5[_0x46d81a(0xbc)])){const _0x281eed=new Date(_0xb206d5[_0x46d81a(0x1eb)]),_0x34f59d=_0x281eed[_0x46d81a(0x17f)]()*0x2+(_0x281eed[_0x46d81a(0x1af)]()>=0x1e?0x1:0x0);if(_0x34f59d<0x30){_0xb740bb[_0x34f59d]++;const _0x225b61=_0xb206d5[_0x46d81a(0x82)]||_0xb206d5[_0x46d81a(0x184)]||'?';let _0x55b6a9=_0x4d272a[_0x34f59d];!_0x55b6a9[_0x46d81a(0x1b5)](_0x225b61)&&_0x55b6a9[_0x46d81a(0x1e2)](_0x225b61);}const _0x12826d=_0x281eed[_0x46d81a(0x17f)]();let _0x2effff=_0xb206d5[_0x46d81a(0x82)]||_0x46d81a(0x103);const _0x51396c=(this[_0x46d81a(0xd6)][_0x46d81a(0x114)]||[])['find'](_0x54fc44=>_0x54fc44[_0x46d81a(0x82)]===_0x2effff);if(_0x51396c)_0x2effff=_0x51396c[_0x46d81a(0x82)];if(!_0x5e3167['history'][_0x2effff])_0x5e3167[_0x46d81a(0xc1)][_0x2effff]=new Array(0x18)[_0x46d81a(0x1c2)](0x0);if(_0x5e3167[_0x46d81a(0xc1)][_0x2effff][_0x12826d]<0x3c)_0x5e3167[_0x46d81a(0xc1)][_0x2effff][_0x12826d]++;}}});const _0x12f678=await this[_0x17b7a6(0x19a)](_0x1e828b);(!_0x12f678||!_0x12f678[_0x17b7a6(0x1d7)]||_0x12f678[_0x17b7a6(0x1d7)]==='{}'||_0x12f678[_0x17b7a6(0x1d7)][_0x17b7a6(0x1b5)]('\x22history\x22:{}'))&&await this['setStateAsync'](_0x1e828b,{'val':JSON[_0x17b7a6(0x94)](_0x5e3167),'ack':!![]}),await this[_0x17b7a6(0x1e5)](_0x46da22,{'val':JSON[_0x17b7a6(0x94)](_0xb740bb),'ack':!![]}),await this[_0x17b7a6(0x1e5)](_0x45a9f5,{'val':JSON[_0x17b7a6(0x94)](_0x4d272a),'ack':!![]}),this[_0x17b7a6(0x179)][_0x17b7a6(0x13a)]('‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.');}async[a0_0x37c99c(0xd0)](){const _0x2a824d=a0_0x37c99c;if(!this['activeModules']['health'])return;const _0x437c4f=new Date()[_0x2a824d(0x122)]()[_0x2a824d(0x15c)]('T')[0x0];this['log'][_0x2a824d(0xae)](_0x2a824d(0x87)+_0x437c4f+'...');try{const [_0x1115a8,_0xa2e4a3,_0x2fc974,_0x5d84e7,_0xfb4f1a,_0x1921b8]=await Promise[_0x2a824d(0x123)]([this[_0x2a824d(0x19a)](_0x2a824d(0x141)),this['getStateAsync'](_0x2a824d(0x11c)),this[_0x2a824d(0x19a)](_0x2a824d(0x15d)),this[_0x2a824d(0x19a)](_0x2a824d(0x139)),this[_0x2a824d(0x19a)](_0x2a824d(0x11a)),this[_0x2a824d(0x19a)](_0x2a824d(0xe7))]),_0xfababb=this[_0x2a824d(0x1d0)]['filter'](_0x3022c4=>_0x3022c4[_0x2a824d(0x1eb)]>=new Date()['setHours'](0x0,0x0,0x0,0x0)&&(_0x3022c4['name'][_0x2a824d(0x15e)]()[_0x2a824d(0x1b5)](_0x2a824d(0x1a4))||_0x3022c4[_0x2a824d(0x184)]['toLowerCase']()[_0x2a824d(0x1b5)](_0x2a824d(0x167)))&&(_0x3022c4[_0x2a824d(0xbc)]===!![]||_0x3022c4[_0x2a824d(0xbc)]===_0x2a824d(0x11e)))['length'];let _0x3db310=0x55;if(_0x1921b8&&_0x1921b8[_0x2a824d(0x1d7)]!==undefined)_0x3db310=Math[_0x2a824d(0xea)](0x64,Math[_0x2a824d(0x1cf)](0x14,Math[_0x2a824d(0xe4)](0x50+Number(_0x1921b8['val'])*0x5)));const _0x3035e4={'date':_0x437c4f,'timestamp':Date[_0x2a824d(0xcd)](),'roomHistory':_0x1115a8?.[_0x2a824d(0x1d7)]?JSON[_0x2a824d(0x162)](_0x1115a8['val']):{},'geminiNight':_0xa2e4a3?.[_0x2a824d(0x1d7)]||_0x2a824d(0x189),'geminiDay':_0x2fc974?.[_0x2a824d(0x1d7)]||_0x2a824d(0x189),'anomalyScore':_0x5d84e7?.[_0x2a824d(0x1d7)]||0.1,'todayVector':_0xfb4f1a?.['val']?JSON['parse'](_0xfb4f1a[_0x2a824d(0x1d7)]):new Array(0x30)[_0x2a824d(0x1c2)](0x0),'batteryLevel':_0x3db310,'freshAirCount':_0xfababb,'eventHistory':this[_0x2a824d(0x1d0)]},_0x397c6d=utils['getAbsoluteDefaultDataDir'](),_0x57b2d1=path[_0x2a824d(0xb9)](_0x397c6d,_0x2a824d(0x1ce),_0x2a824d(0xc1));if(!fs[_0x2a824d(0x8d)](_0x57b2d1))fs[_0x2a824d(0xb6)](_0x57b2d1,{'recursive':!![]});const _0x30e725=path[_0x2a824d(0xb9)](_0x57b2d1,_0x437c4f+_0x2a824d(0xed));fs[_0x2a824d(0x173)](_0x30e725,JSON[_0x2a824d(0x94)](_0x3035e4)),this[_0x2a824d(0x179)][_0x2a824d(0x13a)](_0x2a824d(0xdc)+_0x30e725);}catch(_0x5d1587){this[_0x2a824d(0x179)][_0x2a824d(0x19d)](_0x2a824d(0x102)+_0x5d1587[_0x2a824d(0x183)]);}}async[a0_0x37c99c(0x14a)](){const _0x49292c=a0_0x37c99c;if(!this[_0x49292c(0x85)])return;try{let _0x327d26=null;try{const _0x20ebcb=await this[_0x49292c(0x19a)](_0x49292c(0xf3)),_0x2bc0fb=await this[_0x49292c(0x19a)](_0x49292c(0x99));if(_0x20ebcb&&_0x20ebcb[_0x49292c(0x1d7)]&&_0x2bc0fb&&_0x2bc0fb[_0x49292c(0x1d7)]&&_0x2bc0fb[_0x49292c(0x1d7)]>0.3){if(_0x20ebcb[_0x49292c(0x1d7)]!==_0x49292c(0x103)&&_0x20ebcb['val']!==_0x49292c(0xc7))_0x327d26=_0x20ebcb['val'];}}catch(_0x35b123){}if(!_0x327d26){const _0x1df117=this[_0x49292c(0xd6)][_0x49292c(0x114)]||[];for(const _0x3f4637 of _0x1df117){if(_0x3f4637['type']===_0x49292c(0x1b4)&&_0x3f4637['location'])try{const _0x439d27=await this[_0x49292c(0x1df)](_0x3f4637['id']);if(_0x439d27&&(_0x439d27[_0x49292c(0x1d7)]===!![]||_0x439d27[_0x49292c(0x1d7)]==='on'||_0x439d27[_0x49292c(0x1d7)]===0x1)){_0x327d26=_0x3f4637[_0x49292c(0x82)];break;}}catch(_0x1e1031){}}}if(!_0x327d26)return;const _0x4293c9=this[_0x49292c(0xd6)][_0x49292c(0x114)]||[];let _0x66ad9b=_0x327d26;const _0x19435c=_0x4293c9[_0x49292c(0x1e1)](_0x267c3a=>_0x267c3a[_0x49292c(0x82)]&&_0x267c3a[_0x49292c(0x82)][_0x49292c(0x15e)]()===_0x327d26[_0x49292c(0x15e)]());if(_0x19435c)_0x66ad9b=_0x19435c[_0x49292c(0x82)];const _0x21a47f=_0x49292c(0x141),_0x37702d=await this[_0x49292c(0x19a)](_0x21a47f),_0x4e690d=new Date()[_0x49292c(0x1e3)]();let _0x9d9ffb={'history':{},'date':_0x4e690d};if(_0x37702d&&_0x37702d[_0x49292c(0x1d7)])try{_0x9d9ffb=JSON[_0x49292c(0x162)](_0x37702d[_0x49292c(0x1d7)]);}catch(_0x465253){}_0x9d9ffb[_0x49292c(0x160)]!==_0x4e690d&&(_0x9d9ffb[_0x49292c(0xc1)]={},_0x9d9ffb[_0x49292c(0x160)]=_0x4e690d);if(!_0x9d9ffb[_0x49292c(0xc1)][_0x66ad9b])_0x9d9ffb[_0x49292c(0xc1)][_0x66ad9b]=new Array(0x18)[_0x49292c(0x1c2)](0x0);const _0x4758fe=new Date()[_0x49292c(0x17f)]();if(_0x9d9ffb[_0x49292c(0xc1)][_0x66ad9b][_0x4758fe]<0x3c)_0x9d9ffb['history'][_0x66ad9b][_0x4758fe]++;await this[_0x49292c(0x1e5)](_0x21a47f,{'val':JSON[_0x49292c(0x94)](_0x9d9ffb),'ack':!![]});}catch(_0x25045d){this[_0x49292c(0x179)]['warn'](_0x49292c(0x89)+_0x25045d[_0x49292c(0x183)]);}}async[a0_0x37c99c(0x112)](_0x1459a2){const _0x5ef6ad=a0_0x37c99c;if(typeof _0x1459a2===_0x5ef6ad(0x172)&&_0x1459a2['message']){if(_0x1459a2[_0x5ef6ad(0x180)]===_0x5ef6ad(0xd5)){const _0x712709=_0x1459a2[_0x5ef6ad(0x183)][_0x5ef6ad(0x160)],_0x265d7b=utils[_0x5ef6ad(0x144)](),_0x337fd5=path[_0x5ef6ad(0xb9)](_0x265d7b,_0x5ef6ad(0x1ce),_0x5ef6ad(0xc1),_0x712709+_0x5ef6ad(0xed));if(fs[_0x5ef6ad(0x8d)](_0x337fd5))try{const _0x12dda2=JSON['parse'](fs[_0x5ef6ad(0xab)](_0x337fd5,_0x5ef6ad(0x119)));this[_0x5ef6ad(0x1ab)](_0x1459a2['from'],_0x1459a2[_0x5ef6ad(0x180)],{'success':!![],'data':_0x12dda2},_0x1459a2[_0x5ef6ad(0x10e)]);}catch(_0x34c6f5){this[_0x5ef6ad(0x1ab)](_0x1459a2[_0x5ef6ad(0x1e9)],_0x1459a2[_0x5ef6ad(0x180)],{'success':![],'error':'Corrupt'},_0x1459a2[_0x5ef6ad(0x10e)]);}else this[_0x5ef6ad(0x1ab)](_0x1459a2[_0x5ef6ad(0x1e9)],_0x1459a2['command'],{'success':![],'error':_0x5ef6ad(0x151)},_0x1459a2['callback']);}else{if(_0x1459a2[_0x5ef6ad(0x180)]===_0x5ef6ad(0x1a5)){const _0x583686=this[_0x5ef6ad(0x150)][_0x5ef6ad(0x10b)];let _0x2715d4=new Array(0x30)[_0x5ef6ad(0x1c2)](0x0),_0x4d7a8e=Array[_0x5ef6ad(0x1e9)]({'length':0x30},()=>[]);try{const _0x44edd2=await this[_0x5ef6ad(0x19a)]('analysis.health.todayVector');if(_0x44edd2&&_0x44edd2[_0x5ef6ad(0x1d7)])_0x2715d4=JSON[_0x5ef6ad(0x162)](_0x44edd2[_0x5ef6ad(0x1d7)]);const _0x7c68c1=await this['getStateAsync'](_0x5ef6ad(0x19e));if(_0x7c68c1&&_0x7c68c1[_0x5ef6ad(0x1d7)])_0x4d7a8e=JSON[_0x5ef6ad(0x162)](_0x7c68c1[_0x5ef6ad(0x1d7)]);}catch(_0xdb6596){}let _0x5ae4c4=new Array(0x30)[_0x5ef6ad(0x1c2)](0x0);try{const _0x448e19=new Date();_0x448e19['setDate'](_0x448e19[_0x5ef6ad(0x1a2)]()-0x1);const _0x1abce2=_0x448e19[_0x5ef6ad(0x122)]()[_0x5ef6ad(0x15c)]('T')[0x0],_0x3d9804=utils[_0x5ef6ad(0x144)](),_0x4e8380=path[_0x5ef6ad(0xb9)](_0x3d9804,_0x5ef6ad(0x1ce),_0x5ef6ad(0xc1),_0x1abce2+_0x5ef6ad(0xed));if(fs[_0x5ef6ad(0x8d)](_0x4e8380)){const _0x5b00f2=JSON[_0x5ef6ad(0x162)](fs[_0x5ef6ad(0xab)](_0x4e8380,'utf8'));if(_0x5b00f2&&_0x5b00f2[_0x5ef6ad(0x157)])_0x5ae4c4=_0x5b00f2[_0x5ef6ad(0x157)];}}catch(_0x27d6f5){}let _0x252f4c={'today':{},'yesterday':{}};try{const _0x1246e7=await this[_0x5ef6ad(0x19a)](_0x5ef6ad(0xad));if(_0x1246e7&&_0x1246e7[_0x5ef6ad(0x1d7)])_0x252f4c=JSON[_0x5ef6ad(0x162)](_0x1246e7[_0x5ef6ad(0x1d7)]);}catch(_0x21d65b){}let _0x1cf476=null;try{const _0x4a715c=await this[_0x5ef6ad(0x19a)](_0x5ef6ad(0xe7));if(_0x4a715c)_0x1cf476=_0x4a715c[_0x5ef6ad(0x1d7)];}catch(_0x40598d){}if(_0x1cf476===undefined||_0x1cf476===null){const _0x1ba1f2=_0x2715d4[_0x5ef6ad(0x12d)]((_0x2cca1e,_0xda419d)=>_0x2cca1e+_0xda419d,0x0),_0x129e04=Math['min'](0x2,Math[_0x5ef6ad(0x1cf)](-0x2,(0x64-_0x1ba1f2)/0x32));_0x1cf476=_0x129e04;}let _0x328fee=![],_0x52a7d9='',_0x1028bf='',_0x478dca='';try{const _0x4c8542=await this[_0x5ef6ad(0x19a)](_0x5ef6ad(0x13b));if(_0x4c8542&&_0x4c8542[_0x5ef6ad(0x1d7)]){_0x328fee=!![];const _0x2b8257=await this[_0x5ef6ad(0x19a)](_0x5ef6ad(0x9e));_0x52a7d9=_0x2b8257?_0x2b8257['val']:'';const _0x1ccbaf=await this['getStateAsync'](_0x5ef6ad(0x182));_0x1028bf=_0x1ccbaf?_0x1ccbaf[_0x5ef6ad(0x1d7)]:'';const _0x14eac9=await this[_0x5ef6ad(0x19a)](_0x5ef6ad(0xef));_0x478dca=_0x14eac9?_0x14eac9['val']:'';}}catch(_0x2fbabf){}const _0x333645=await this[_0x5ef6ad(0xbd)](),_0x92a791=(this[_0x5ef6ad(0xd6)][_0x5ef6ad(0x114)]||[])[_0x5ef6ad(0x1b7)](_0x3f2726=>_0x3f2726['isSolar']),_0x3d65f4=_0x333645&&_0x92a791;let _0x169be3='';try{const _0x3eede7=await this[_0x5ef6ad(0x19a)](_0x5ef6ad(0x19b));if(_0x3eede7&&_0x3eede7[_0x5ef6ad(0x1d7)])_0x169be3=_0x3eede7['val'];}catch(_0x4c253c){}this[_0x5ef6ad(0x1ab)](_0x1459a2[_0x5ef6ad(0x1e9)],_0x1459a2['command'],{'success':!![],'eventHistory':this[_0x5ef6ad(0x1d0)]['slice'](0x0,0x7d0),'stats':{'digestCount':_0x583686,'isPresent':this[_0x5ef6ad(0x85)],'hourlyActivity':_0x2715d4,'hourlyDetails':_0x4d7a8e,'yesterdayActivity':_0x5ae4c4,'solarActive':_0x3d65f4,'presenceWho':_0x169be3,'roomStats':_0x252f4c,'activityTrend':_0x1cf476,'modules':this['activeModules']},'automation':{'detected':_0x328fee,'description':_0x52a7d9,'targetId':_0x1028bf,'targetValue':_0x478dca}},_0x1459a2[_0x5ef6ad(0x10e)]);}else{if(_0x1459a2[_0x5ef6ad(0x180)]==='checkThermostats')try{const _0x401d1f=await automation[_0x5ef6ad(0x1d4)](this);this[_0x5ef6ad(0x1ab)](_0x1459a2[_0x5ef6ad(0x1e9)],_0x1459a2[_0x5ef6ad(0x180)],{'success':!![],'results':_0x401d1f},_0x1459a2[_0x5ef6ad(0x10e)]);}catch(_0x39f404){this[_0x5ef6ad(0x1ab)](_0x1459a2[_0x5ef6ad(0x1e9)],_0x1459a2[_0x5ef6ad(0x180)],{'success':![],'error':_0x39f404[_0x5ef6ad(0x183)]},_0x1459a2[_0x5ef6ad(0x10e)]);}else{if(_0x1459a2[_0x5ef6ad(0x180)]===_0x5ef6ad(0x1b8))try{const _0x8862ee=await scanner[_0x5ef6ad(0xf5)](this,_0x1459a2[_0x5ef6ad(0x183)]||{});this[_0x5ef6ad(0x1ab)](_0x1459a2[_0x5ef6ad(0x1e9)],_0x1459a2['command'],{'success':!![],'devices':_0x8862ee},_0x1459a2[_0x5ef6ad(0x10e)]);}catch(_0x374ae5){}else{if(_0x1459a2['command']===_0x5ef6ad(0xff)){const _0x4e5ff0=await this[_0x5ef6ad(0x11d)](_0x5ef6ad(0xfb),_0x5ef6ad(0x199)),_0x3cc6e5=[];if(_0x4e5ff0)for(const _0x29bc21 in _0x4e5ff0){let _0x485d50=_0x4e5ff0[_0x29bc21][_0x5ef6ad(0x1ae)][_0x5ef6ad(0x184)];if(_0x485d50&&typeof _0x485d50===_0x5ef6ad(0x172))_0x485d50=_0x485d50['de']||_0x485d50['en']||Object[_0x5ef6ad(0xbf)](_0x485d50)[0x0]||JSON[_0x5ef6ad(0x94)](_0x485d50);_0x3cc6e5[_0x5ef6ad(0x1e2)]({'id':_0x29bc21,'name':String(_0x485d50||_0x29bc21)});}const _0x350816=await this['getForeignObjectsAsync'](_0x5ef6ad(0x149),_0x5ef6ad(0x199)),_0x4328c6=[];if(_0x350816)for(const _0x138757 in _0x350816){let _0x33c721=_0x350816[_0x138757][_0x5ef6ad(0x1ae)][_0x5ef6ad(0x184)];if(_0x33c721&&typeof _0x33c721===_0x5ef6ad(0x172))_0x33c721=_0x33c721['de']||_0x33c721['en']||Object[_0x5ef6ad(0xbf)](_0x33c721)[0x0]||JSON[_0x5ef6ad(0x94)](_0x33c721);_0x4328c6['push'](String(_0x33c721||_0x138757['split']('.')['pop']()));}this[_0x5ef6ad(0x1ab)](_0x1459a2[_0x5ef6ad(0x1e9)],_0x1459a2['command'],{'success':!![],'enums':_0x3cc6e5,'rooms':_0x4328c6},_0x1459a2['callback']);}else{if(_0x1459a2[_0x5ef6ad(0x180)]===_0x5ef6ad(0x1a0))try{const _0x45a0fe=await this[_0x5ef6ad(0x1e7)](_0x5ef6ad(0x1ea),_0x5ef6ad(0x187),{'startkey':_0x5ef6ad(0xd1),'endkey':_0x5ef6ad(0xd2)}),_0x1a8bbe=new Set();if(_0x45a0fe&&_0x45a0fe[_0x5ef6ad(0x191)])for(const _0xe66de3 of _0x45a0fe[_0x5ef6ad(0x191)]){const _0x3618f5=_0xe66de3['id']['replace']('system.adapter.',''),_0x39cba8=await this[_0x5ef6ad(0x1df)](_0x3618f5+_0x5ef6ad(0x11f));let _0x341177=![];if(_0x39cba8&&_0x39cba8[_0x5ef6ad(0x1d7)]){const _0x2ea7a6=typeof _0x39cba8[_0x5ef6ad(0x1d7)]===_0x5ef6ad(0x15a)?JSON[_0x5ef6ad(0x162)](_0x39cba8['val']):_0x39cba8[_0x5ef6ad(0x1d7)];Array[_0x5ef6ad(0xd8)](_0x2ea7a6)&&_0x2ea7a6[_0x5ef6ad(0x116)](_0x30d20b=>{const _0x4f9861=_0x5ef6ad;_0x30d20b['calendarName']&&(_0x1a8bbe['add'](_0x30d20b[_0x4f9861(0x8c)]),_0x341177=!![]);});}!_0x341177&&_0x1a8bbe[_0x5ef6ad(0x120)](_0x3618f5);}const _0x59a2c7=Array['from'](_0x1a8bbe);if(_0x59a2c7[_0x5ef6ad(0x10b)]===0x0)_0x59a2c7[_0x5ef6ad(0x1e2)]('Standard');this['sendTo'](_0x1459a2[_0x5ef6ad(0x1e9)],_0x1459a2[_0x5ef6ad(0x180)],{'success':!![],'names':_0x59a2c7},_0x1459a2[_0x5ef6ad(0x10e)]);}catch(_0x28a954){this[_0x5ef6ad(0x1ab)](_0x1459a2['from'],_0x1459a2[_0x5ef6ad(0x180)],{'success':![],'error':'Scan\x20Error:\x20'+_0x28a954['message']},_0x1459a2[_0x5ef6ad(0x10e)]);}else{if(_0x1459a2['command']==='refreshCalendar')try{await automation['updateSchedulePreview'](this),this[_0x5ef6ad(0x1ab)](_0x1459a2[_0x5ef6ad(0x1e9)],_0x1459a2[_0x5ef6ad(0x180)],{'success':!![]},_0x1459a2[_0x5ef6ad(0x10e)]);}catch(_0x28cf22){this['log'][_0x5ef6ad(0x1c5)](_0x5ef6ad(0x1ac)+_0x28cf22[_0x5ef6ad(0x183)]),this[_0x5ef6ad(0x1ab)](_0x1459a2[_0x5ef6ad(0x1e9)],_0x1459a2['command'],{'success':![],'error':_0x28cf22[_0x5ef6ad(0x183)]},_0x1459a2[_0x5ef6ad(0x10e)]);}else{if(_0x1459a2['command']===_0x5ef6ad(0x109))try{const _0x4f6d13=_0x1459a2[_0x5ef6ad(0x183)][_0x5ef6ad(0xa6)];if(!_0x4f6d13||!Array[_0x5ef6ad(0xd8)](_0x4f6d13))throw new Error('Invalid\x20matrix\x20data');const _0x341fbc=await this[_0x5ef6ad(0x19a)](_0x5ef6ad(0x9c));if(_0x341fbc&&_0x341fbc['val']){const _0x3ae9cf=JSON[_0x5ef6ad(0x162)](_0x341fbc[_0x5ef6ad(0x1d7)]);_0x3ae9cf['matrix']=_0x4f6d13,_0x3ae9cf[_0x5ef6ad(0x19f)]=Date['now'](),await this[_0x5ef6ad(0x1e5)](_0x5ef6ad(0x9c),{'val':JSON[_0x5ef6ad(0x94)](_0x3ae9cf),'ack':!![]}),this['log'][_0x5ef6ad(0xae)](_0x5ef6ad(0x138)),this['sendTo'](_0x1459a2[_0x5ef6ad(0x1e9)],_0x1459a2['command'],{'success':!![]},_0x1459a2[_0x5ef6ad(0x10e)]);}else throw new Error(_0x5ef6ad(0x12a));}catch(_0x3662c8){this[_0x5ef6ad(0x179)][_0x5ef6ad(0x1c5)](_0x5ef6ad(0xd7)+_0x3662c8[_0x5ef6ad(0x183)]),this[_0x5ef6ad(0x1ab)](_0x1459a2[_0x5ef6ad(0x1e9)],_0x1459a2[_0x5ef6ad(0x180)],{'success':![],'error':_0x3662c8[_0x5ef6ad(0x183)]},_0x1459a2['callback']);}else{if(_0x1459a2[_0x5ef6ad(0x180)]==='pythonBridge')try{const _0x2b4fa7=_0x1459a2['message'][_0x5ef6ad(0x180)],_0x50177b=_0x1459a2[_0x5ef6ad(0x183)];this[_0x5ef6ad(0x179)]['debug'](_0x5ef6ad(0x1c8)+_0x2b4fa7),pythonBridge[_0x5ef6ad(0x14c)](this,_0x2b4fa7,_0x50177b,_0x304fba=>{const _0x401fbe=_0x5ef6ad;this[_0x401fbe(0x1ab)](_0x1459a2[_0x401fbe(0x1e9)],_0x1459a2[_0x401fbe(0x180)],_0x304fba,_0x1459a2['callback']);});}catch(_0x16629a){this[_0x5ef6ad(0x179)][_0x5ef6ad(0x1c5)](_0x5ef6ad(0x1c4)+_0x16629a['message']),this['sendTo'](_0x1459a2[_0x5ef6ad(0x1e9)],_0x1459a2['command'],{'type':_0x5ef6ad(0x132),'payload':_0x16629a[_0x5ef6ad(0x183)]},_0x1459a2[_0x5ef6ad(0x10e)]);}else{if(_0x1459a2[_0x5ef6ad(0x180)]===_0x5ef6ad(0x107))try{const _0x397b0d=_0x1459a2['message']?_0x1459a2[_0x5ef6ad(0x183)]['apiKey']:'';if(!_0x397b0d)throw new Error('Kein\x20API\x20Key\x20√ºbergeben.');const _0x3608d5=new GoogleGenerativeAI(_0x397b0d),_0xaa57e4=_0x3608d5['getGenerativeModel']({'model':GEMINI_MODEL}),_0xa73fe9=await _0xaa57e4[_0x5ef6ad(0x12b)](_0x5ef6ad(0x1c0)),_0x551f0b=await _0xa73fe9[_0x5ef6ad(0x90)],_0x48d01e=_0x551f0b[_0x5ef6ad(0x16e)]();this['sendTo'](_0x1459a2['from'],_0x1459a2['command'],{'success':!![],'message':_0x5ef6ad(0x175)+_0x48d01e[_0x5ef6ad(0xc4)](0x0,0x14)+_0x5ef6ad(0x1aa)},_0x1459a2[_0x5ef6ad(0x10e)]);}catch(_0x48122b){this['sendTo'](_0x1459a2['from'],_0x1459a2[_0x5ef6ad(0x180)],{'success':![],'message':_0x48122b[_0x5ef6ad(0x183)]},_0x1459a2[_0x5ef6ad(0x10e)]);}else{if(_0x1459a2[_0x5ef6ad(0x180)]===_0x5ef6ad(0xc2))try{const _0x2f49ba=await this['checkSolarCondition'](),_0x9b2be4=await this[_0x5ef6ad(0x1e7)](_0x5ef6ad(0x1ea),_0x5ef6ad(0x187),{'startkey':_0x5ef6ad(0xd1),'endkey':_0x5ef6ad(0xd2)}),_0x282cd1=_0x9b2be4&&_0x9b2be4[_0x5ef6ad(0x191)]?_0x9b2be4[_0x5ef6ad(0x191)]['length']:0x0;this[_0x5ef6ad(0x1ab)](_0x1459a2[_0x5ef6ad(0x1e9)],_0x1459a2[_0x5ef6ad(0x180)],{'success':!![],'weather':_0x5ef6ad(0x194)+_0x2f49ba+',\x20Temp:\x20'+(this[_0x5ef6ad(0x155)][this[_0x5ef6ad(0xd6)][_0x5ef6ad(0x159)]]||'?')+'¬∞C','calendar':_0x282cd1+'\x20Kalender-Adapter\x20gefunden.'},_0x1459a2[_0x5ef6ad(0x10e)]);}catch(_0x47f2c5){this['sendTo'](_0x1459a2['from'],_0x1459a2[_0x5ef6ad(0x180)],{'success':![]},_0x1459a2['callback']);}}}}}}}}}}}}}[a0_0x37c99c(0x8b)](){const _0x3b8fac=a0_0x37c99c;if(!this[_0x3b8fac(0x192)][_0x3b8fac(0x1b1)])return;this[_0x3b8fac(0x179)][_0x3b8fac(0xae)]('üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...');try{const _0x25b461=this['rawEventLog']||[];pythonBridge[_0x3b8fac(0x14c)](this,_0x3b8fac(0xa8),{'events':_0x25b461});}catch(_0x5565e2){this[_0x3b8fac(0x179)]['warn'](_0x3b8fac(0x178));}}async['onStateChange'](_0x5d5706,_0x46887f){const _0x25ae5e=a0_0x37c99c;if(!_0x46887f||this[_0x25ae5e(0x129)])return;if(_0x5d5706[_0x25ae5e(0x1b5)](_0x25ae5e(0xfa))&&_0x5d5706['endsWith'](_0x25ae5e(0xe2))&&_0x46887f['val'])return;if(this[_0x25ae5e(0xd6)]['infrasoundEnabled']&&_0x5d5706===this['config']['infrasoundSensorId']&&this['activeModules'][_0x25ae5e(0x86)]){this[_0x25ae5e(0xb7)](_0x46887f[_0x25ae5e(0x1d7)]);return;}if(_0x46887f[_0x25ae5e(0x177)]&&_0x5d5706[_0x25ae5e(0x121)]('pulse'))return;if(_0x5d5706===this[_0x25ae5e(0x18a)]+_0x25ae5e(0xfc)){if(_0x46887f[_0x25ae5e(0x1d7)]&&Object[_0x25ae5e(0xbf)](setup[_0x25ae5e(0x156)])[_0x25ae5e(0x1b5)](_0x46887f[_0x25ae5e(0x1d7)])){this[_0x25ae5e(0x127)]=_0x46887f[_0x25ae5e(0x1d7)];if(_0x46887f['val']===setup['SYSTEM_MODES'][_0x25ae5e(0x169)])await recorder[_0x25ae5e(0x1b2)](this,![]);else await recorder['setPresence'](this,!![]);if(this[_0x25ae5e(0x92)]){let _0x1c77c2=![],_0x13be54=0x0,_0x4c6d9c=_0x25ae5e(0xa5);if(this[_0x25ae5e(0x127)]===_0x25ae5e(0x17b))_0x1c77c2=!![],_0x13be54=0x168,_0x4c6d9c=_0x25ae5e(0x110);else this[_0x25ae5e(0x127)]===_0x25ae5e(0x101)&&(_0x1c77c2=!![],_0x13be54=0x5a0,_0x4c6d9c=_0x25ae5e(0xca));pythonBridge[_0x25ae5e(0x14c)](this,'SET_LEARNING_MODE',{'active':_0x1c77c2,'duration':_0x13be54,'label':_0x4c6d9c}),await this[_0x25ae5e(0x1e5)](_0x25ae5e(0x1bf),{'val':JSON[_0x25ae5e(0x94)]({'active':_0x1c77c2,'label':_0x4c6d9c,'timestamp':Date[_0x25ae5e(0xcd)]()}),'ack':!![]});}}if(!_0x46887f[_0x25ae5e(0x177)])this[_0x25ae5e(0x16b)](_0x5d5706,{'val':this['currentSystemMode'],'ack':!![]});return;}if(_0x5d5706[_0x25ae5e(0x121)](_0x25ae5e(0xa9))&&_0x46887f['ack'])this['protectAiMemory'](_0x46887f[_0x25ae5e(0x1d7)]);if(_0x5d5706[_0x25ae5e(0x121)](_0x25ae5e(0x1d6))&&_0x46887f[_0x25ae5e(0x177)]&&this[_0x25ae5e(0x192)][_0x25ae5e(0x18c)])automation['checkCalendarTriggers'](this);if(!_0x46887f[_0x25ae5e(0x177)]){if(_0x5d5706[_0x25ae5e(0x1b5)]('analysis.trigger')&&_0x46887f[_0x25ae5e(0x1d7)]){this[_0x25ae5e(0x16b)](_0x5d5706,{'val':![],'ack':!![]}),aiAgent[_0x25ae5e(0x140)](this);return;}if(_0x5d5706[_0x25ae5e(0x1b5)](_0x25ae5e(0xba))&&_0x46887f[_0x25ae5e(0x1d7)]){this[_0x25ae5e(0x16b)](_0x5d5706,{'val':![],'ack':!![]});if(this[_0x25ae5e(0x92)])aiAgent[_0x25ae5e(0xa1)](this,pythonBridge);return;}if(_0x5d5706[_0x25ae5e(0x1b5)](_0x25ae5e(0x80))&&_0x46887f[_0x25ae5e(0x1d7)]){this[_0x25ae5e(0x16b)](_0x5d5706,{'val':![],'ack':!![]}),aiAgent[_0x25ae5e(0x9f)](this);return;}if(_0x5d5706[_0x25ae5e(0x1b5)]('automation.triggerAction')&&_0x46887f[_0x25ae5e(0x1d7)]){this['setState'](_0x5d5706,{'val':![],'ack':!![]}),aiAgent[_0x25ae5e(0x1d1)](this);return;}if(_0x5d5706[_0x25ae5e(0x1b5)](_0x25ae5e(0x19c))&&_0x46887f[_0x25ae5e(0x1d7)]){this[_0x25ae5e(0x16b)](_0x5d5706,{'val':![],'ack':!![]});if(this[_0x25ae5e(0x92)])try{const _0x48ec16=await this['getStateAsync']('LTM.trainingData.sequences');if(_0x48ec16&&_0x48ec16['val']){const _0x558d57=JSON[_0x25ae5e(0x162)](_0x48ec16[_0x25ae5e(0x1d7)]);this['setStateAsync'](_0x25ae5e(0x108),{'val':_0x25ae5e(0x13f),'ack':!![]}),pythonBridge['send'](this,_0x25ae5e(0x1b9),{'sequences':_0x558d57});}}catch(_0x425883){}return;}if(_0x5d5706[_0x25ae5e(0x1b5)](_0x25ae5e(0x111))&&_0x46887f[_0x25ae5e(0x1d7)]){this[_0x25ae5e(0x16b)](_0x5d5706,{'val':![],'ack':!![]});try{aiAgent[_0x25ae5e(0x171)](this,'NIGHT'),setTimeout(()=>aiAgent['generateHealthReport'](this,'DAY'),0x2ee0);if(this['isProVersion']){this['runPythonHealthCheck']();const _0x51defd=await this['getStateAsync']('LTM.dailyDigests');if(_0x51defd&&_0x51defd[_0x25ae5e(0x1d7)])pythonBridge['send'](this,_0x25ae5e(0x134),{'digests':JSON[_0x25ae5e(0x162)](_0x51defd['val'])});}}catch(_0x3e7ba5){this[_0x25ae5e(0x179)]['warn']('triggerHealth\x20error:\x20'+_0x3e7ba5[_0x25ae5e(0x183)]);}return;}if(_0x5d5706[_0x25ae5e(0x1b5)](_0x25ae5e(0xf6))&&_0x46887f[_0x25ae5e(0x1d7)]){this[_0x25ae5e(0x16b)](_0x5d5706,{'val':![],'ack':!![]}),await this[_0x25ae5e(0x1c7)]();return;}if(_0x5d5706[_0x25ae5e(0x1b5)](_0x25ae5e(0x196))&&_0x46887f[_0x25ae5e(0x1d7)]){this['setState'](_0x5d5706,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x17dc84=await this[_0x25ae5e(0x19a)](_0x25ae5e(0x1d2));if(_0x17dc84&&_0x17dc84['val']){const _0x4daa6c={};if(this[_0x25ae5e(0xd6)]['devices'])this[_0x25ae5e(0xd6)][_0x25ae5e(0x114)][_0x25ae5e(0x116)](_0x4a5545=>{const _0x388e16=_0x25ae5e;if(_0x4a5545['id']&&_0x4a5545[_0x388e16(0x135)])_0x4daa6c[_0x4a5545['id']]=_0x4a5545[_0x388e16(0x135)];});pythonBridge['send'](this,_0x25ae5e(0x142),{'events':JSON[_0x25ae5e(0x162)](_0x17dc84[_0x25ae5e(0x1d7)]),'deviceMap':_0x4daa6c});}}catch(_0x1bfcec){}return;}if(_0x5d5706[_0x25ae5e(0x1b5)](_0x25ae5e(0x10d))&&_0x46887f[_0x25ae5e(0x1d7)]){this[_0x25ae5e(0x16b)](_0x5d5706,{'val':![],'ack':!![]}),topology['updateTopology'](this);if(this['isProVersion'])try{const _0x470080=await this[_0x25ae5e(0x19a)]('LTM.trainingData.sequences');if(_0x470080&&_0x470080[_0x25ae5e(0x1d7)])pythonBridge[_0x25ae5e(0x14c)](this,'TRAIN_TOPOLOGY',{'sequences':JSON[_0x25ae5e(0x162)](_0x470080['val'])});}catch(_0x35ee82){}return;}}const _0x3231cc=(this[_0x25ae5e(0xd6)][_0x25ae5e(0x114)]||[])[_0x25ae5e(0x1e1)](_0x34a2b5=>_0x34a2b5['id']===_0x5d5706);if(_0x3231cc){const _0xc10180=await recorder[_0x25ae5e(0xdf)](this,_0x5d5706,_0x46887f,_0x3231cc);_0xc10180&&this['setState']('analysis.visualization.pulse',{'val':Date[_0x25ae5e(0xcd)](),'ack':!![]});_0xc10180&&_0xc10180[_0x25ae5e(0x135)]===_0x25ae5e(0x1b4)&&_0xc10180[_0x25ae5e(0x82)]&&this[_0x25ae5e(0x92)]&&deadMan[_0x25ae5e(0x1cc)](this,_0xc10180[_0x25ae5e(0x82)]);_0x46887f[_0x25ae5e(0x1d7)]&&(_0x46887f[_0x25ae5e(0x1d7)]===!![]||_0x46887f['val']===0x1||String(_0x46887f[_0x25ae5e(0x1d7)])[_0x25ae5e(0x15e)]()===_0x25ae5e(0x11e))&&(_0x3231cc[_0x25ae5e(0x135)]&&(_0x3231cc[_0x25ae5e(0x135)][_0x25ae5e(0x1b5)]('window')||_0x3231cc[_0x25ae5e(0x135)][_0x25ae5e(0x1b5)]('door'))&&this[_0x25ae5e(0x181)](_0x3231cc));if(_0x3231cc['type']===_0x25ae5e(0x1d9)||_0x3231cc[_0x25ae5e(0x135)]===_0x25ae5e(0xb1)){if(this['activeModules'][_0x25ae5e(0x18c)])automation[_0x25ae5e(0x1b6)](this);}}}async[a0_0x37c99c(0xe5)](_0xcdb5d0){const _0x6efe10=a0_0x37c99c;if(!this['memoryCache']||Date[_0x6efe10(0xcd)]()-this[_0x6efe10(0x10a)]>0x493e0)return;try{const _0x5a7406=JSON[_0x6efe10(0x162)](_0xcdb5d0),_0x527630=this[_0x6efe10(0xa4)][_0x6efe10(0xd4)];let _0x2fce24=![];for(const _0x35842e in _0x527630){if(_0x527630[_0x35842e]['includes']('AI')&&_0x5a7406[_0x35842e]&&!_0x5a7406[_0x35842e]['includes']('AI')){_0x2fce24=!![];break;}}_0x2fce24&&(await this[_0x6efe10(0x1e5)](_0x6efe10(0x1d6),{'val':JSON['stringify'](this[_0x6efe10(0xa4)][_0x6efe10(0x1a7)]),'ack':!![]}),await this[_0x6efe10(0x1e5)](_0x6efe10(0xa9),{'val':JSON[_0x6efe10(0x94)](this[_0x6efe10(0xa4)]['sources']),'ack':!![]}));}catch(_0x3503c4){}}async[a0_0x37c99c(0x105)](){const _0x3d9f23=a0_0x37c99c;try{const _0x2b4491=await this[_0x3d9f23(0x19a)](setup[_0x3d9f23(0x1bb)]);if(_0x2b4491&&_0x2b4491[_0x3d9f23(0x1d7)])this[_0x3d9f23(0x127)]=_0x2b4491['val'];}catch(_0x48090b){this[_0x3d9f23(0x127)]=setup[_0x3d9f23(0x156)][_0x3d9f23(0x1a9)];}}async[a0_0x37c99c(0x106)](){const _0x52996d=a0_0x37c99c,_0x3a8f32=this['config']['presenceDevices']||[];if(_0x3a8f32[_0x52996d(0x10b)]===0x0)return![];const _0x2a89fc=[],_0x145ab0=Date[_0x52996d(0xcd)](),_0x2de3aa=0x5*0x3c*0x3e8;for(const _0x2cce8a of _0x3a8f32){try{let _0x428797=![];try{const _0x2b7815=await this[_0x52996d(0x1df)](_0x2cce8a+_0x52996d(0x10f));if(_0x2b7815&&_0x2b7815['val']===!![])_0x428797=!![];}catch(_0x5967a7){}if(!_0x428797)try{const _0x425fa5=await this['getForeignStateAsync'](_0x2cce8a+_0x52996d(0x14b));if(_0x425fa5&&_0x425fa5['ts']){const _0x4b8bd1=_0x145ab0-_0x425fa5['ts'];if(_0x4b8bd1<_0x2de3aa)_0x428797=!![];}}catch(_0x523e7a){}if(!_0x428797)try{const _0x418ef2=await this[_0x52996d(0x1df)](_0x2cce8a+_0x52996d(0x9a));if(_0x418ef2&&typeof _0x418ef2[_0x52996d(0x1d7)]===_0x52996d(0xd9)&&_0x418ef2['val']>0x0)_0x428797=!![];}catch(_0x1a2d69){}if(!_0x428797)try{const _0x39d7d6=await this[_0x52996d(0x1df)](_0x2cce8a);if(_0x39d7d6){const _0x4593c9=_0x145ab0-(_0x39d7d6['ts']||0x0);_0x4593c9<_0x2de3aa&&(_0x39d7d6[_0x52996d(0x1d7)]===!![]||_0x39d7d6[_0x52996d(0x1d7)]===_0x52996d(0x83)||_0x39d7d6[_0x52996d(0x1d7)]===0x1)&&(_0x428797=!![]);}}catch(_0x2d7204){}if(_0x428797){const _0x8ff7de=_0x2cce8a[_0x52996d(0x15c)]('.'),_0x286eae=_0x8ff7de[_0x8ff7de[_0x52996d(0x10b)]-0x1]||_0x2cce8a;_0x2a89fc[_0x52996d(0x1e2)](_0x286eae);}}catch(_0x25903c){this[_0x52996d(0x179)][_0x52996d(0x1c5)](_0x52996d(0xdd)+_0x2cce8a+':\x20'+_0x25903c['message']);}}const _0x454844=_0x2a89fc[_0x52996d(0x10b)]>0x0?_0x2a89fc[_0x52996d(0xb9)](',\x20'):'Niemand';return await this['setStateAsync'](_0x52996d(0x19b),{'val':_0x454844,'ack':!![]}),_0x2a89fc[_0x52996d(0x10b)]>0x0;}async['runAutopilot'](){const _0x46b8d0=a0_0x37c99c;await aiAgent[_0x46b8d0(0x140)](this);this[_0x46b8d0(0x192)][_0x46b8d0(0x1b1)]&&(this[_0x46b8d0(0x133)](),this[_0x46b8d0(0x15b)]());if(this[_0x46b8d0(0x192)][_0x46b8d0(0x18c)])this[_0x46b8d0(0x1c7)]();}async[a0_0x37c99c(0xbd)](){const _0x13dc7a=a0_0x37c99c,_0x8d9cd=[_0x13dc7a(0x1da),'accuweather.0','daswetter.0'],_0x23be30=[_0x13dc7a(0x146),'Current.WeatherText',_0x13dc7a(0xde)];for(const _0x39fe17 of _0x8d9cd){for(const _0x8312c9 of _0x23be30){try{const _0x556194=_0x39fe17+'.'+_0x8312c9,_0x31465e=await this[_0x13dc7a(0x1df)](_0x556194);if(_0x31465e&&_0x31465e[_0x13dc7a(0x1d7)]){const _0x403b97=String(_0x31465e[_0x13dc7a(0x1d7)])['toLowerCase']();if(_0x403b97[_0x13dc7a(0x1b5)](_0x13dc7a(0xe0))||_0x403b97['includes']('heiter')||_0x403b97[_0x13dc7a(0x1b5)]('klar')||_0x403b97['includes'](_0x13dc7a(0x1e4))||_0x403b97[_0x13dc7a(0x1b5)](_0x13dc7a(0x1e0)))return this[_0x13dc7a(0x179)][_0x13dc7a(0xae)](_0x13dc7a(0x118)+_0x556194),!![];}}catch(_0x236c37){}}}return![];}[a0_0x37c99c(0x15b)](){const _0x56a18f=a0_0x37c99c;if(!this[_0x56a18f(0x92)])return;try{this['getStateAsync']('LTM.trainingData.sequences',(_0x8875ca,_0x1699d0)=>{const _0x50721a=_0x56a18f;if(_0x8875ca||!_0x1699d0||!_0x1699d0[_0x50721a(0x1d7)])return;try{const _0x1d9e75=JSON['parse'](_0x1699d0[_0x50721a(0x1d7)]);if(!_0x1d9e75||_0x1d9e75[_0x50721a(0x10b)]===0x0)return;pythonBridge[_0x50721a(0x14c)](this,_0x50721a(0xc5),{'sequences':_0x1d9e75}),this['log'][_0x50721a(0xae)]('üö∂\x20Gait\x20Analysis\x20triggered\x20with\x20'+_0x1d9e75[_0x50721a(0x10b)]+'\x20sequences');}catch(_0x11e553){this['log'][_0x50721a(0x1c5)](_0x50721a(0x17e)+_0x11e553[_0x50721a(0x183)]);}});}catch(_0x33af7c){this[_0x56a18f(0x179)]['warn']('triggerGaitAnalysis\x20error:\x20'+_0x33af7c[_0x56a18f(0x183)]);}}async[a0_0x37c99c(0x1c7)](){const _0x9e8487=a0_0x37c99c;if(!this[_0x9e8487(0x92)]||!this[_0x9e8487(0x192)][_0x9e8487(0x18c)])return;try{const _0x1dc6f0={},_0x5c99d4={},_0x3e9f66=this[_0x9e8487(0xd6)][_0x9e8487(0x114)]||[];for(const _0x5c9691 of _0x3e9f66){if((_0x5c9691[_0x9e8487(0x135)]==='temperature'||_0x5c9691['type']==='thermostat')&&_0x5c9691[_0x9e8487(0x82)])try{const _0x5f4fd2=await this[_0x9e8487(0x1df)](_0x5c9691['id']);_0x5f4fd2&&typeof _0x5f4fd2[_0x9e8487(0x1d7)]===_0x9e8487(0xd9)&&(_0x1dc6f0[_0x5c9691[_0x9e8487(0x82)]]=_0x5f4fd2[_0x9e8487(0x1d7)],_0x5c99d4[_0x5c9691[_0x9e8487(0x82)]]=_0x5c9691[_0x9e8487(0x100)]||![]);}catch(_0x31390a){}}let _0x22bd6d=0xa;if(this['config'][_0x9e8487(0x1e8)])try{const _0x263786=await this[_0x9e8487(0x1df)](this[_0x9e8487(0xd6)]['weatherTempId']);if(_0x263786&&typeof _0x263786[_0x9e8487(0x1d7)]===_0x9e8487(0xd9))_0x22bd6d=_0x263786[_0x9e8487(0x1d7)];}catch(_0x14fde){}const _0x3f4fd1=await this[_0x9e8487(0xbd)]();let _0x1a9cb2={};try{const _0x1249e5=await this[_0x9e8487(0x19a)](_0x9e8487(0x7f));if(_0x1249e5&&_0x1249e5[_0x9e8487(0x1d7)])_0x1a9cb2=JSON[_0x9e8487(0x162)](_0x1249e5[_0x9e8487(0x1d7)]);}catch(_0x5ba4b6){}pythonBridge['send'](this,_0x9e8487(0xf7),{'current_temps':_0x1dc6f0,'t_out':_0x22bd6d,'is_sunny':_0x3f4fd1,'solar_flags':_0x5c99d4,'warmup_targets':_0x1a9cb2}),this[_0x9e8487(0x179)]['info'](_0x9e8487(0x1ad)+Object[_0x9e8487(0x174)](_0x1dc6f0)[_0x9e8487(0x10b)]+_0x9e8487(0x96));}catch(_0x4afb91){this['log'][_0x9e8487(0x1c5)]('triggerEnergyPrediction\x20Error:\x20'+_0x4afb91[_0x9e8487(0x183)]);}}[a0_0x37c99c(0x133)](){const _0x4ab63e=a0_0x37c99c;if(!this[_0x4ab63e(0xf4)]||this[_0x4ab63e(0xf4)][_0x4ab63e(0x10b)]===0x0)return;const _0x335cfe=new Array(0x30)[_0x4ab63e(0x1c2)](0x0),_0x58fd1c=Array[_0x4ab63e(0x1e9)]({'length':0x30},()=>[]),_0x2886f9=new Date()[_0x4ab63e(0x13c)](0x0,0x0,0x0,0x0);this[_0x4ab63e(0xf4)][_0x4ab63e(0x116)](_0x109610=>{const _0x39191c=_0x4ab63e,_0x2db0b5=new Date(_0x109610['timestamp']);if(_0x2db0b5[_0x39191c(0x13d)]()>=_0x2886f9){const _0x569d28=_0x2db0b5[_0x39191c(0x17f)](),_0x469af1=_0x2db0b5['getMinutes'](),_0x448da4=_0x569d28*0x2+Math[_0x39191c(0xf0)](_0x469af1/0x1e);_0x448da4>=0x0&&_0x448da4<0x30&&(_0x335cfe[_0x448da4]++,_0x58fd1c[_0x448da4]['push']({'time':_0x2db0b5[_0x39191c(0x95)](_0x39191c(0x18d),{'hour':_0x39191c(0x91),'minute':'2-digit'}),'location':_0x109610[_0x39191c(0x82)]||_0x39191c(0x1d8),'type':_0x109610[_0x39191c(0x135)]||'Event'}));}}),this[_0x4ab63e(0x1e5)](_0x4ab63e(0x11a),{'val':JSON[_0x4ab63e(0x94)](_0x335cfe),'ack':!![]}),this[_0x4ab63e(0x1e5)](_0x4ab63e(0x19e),{'val':JSON['stringify'](_0x58fd1c),'ack':!![]});}async[a0_0x37c99c(0xb7)](_0x38563e){const _0x3cef29=a0_0x37c99c;if(!this['config'][_0x3cef29(0x1bc)]||typeof _0x38563e!==_0x3cef29(0xd9))return;const _0x2002d3=this['config']['infrasoundThreshold']||0.04;this[_0x3cef29(0x9b)]['push']({'timestamp':Date[_0x3cef29(0xcd)](),'value':_0x38563e}),this['pressureBuffer'][_0x3cef29(0x10b)]>0x64&&this[_0x3cef29(0x9b)][_0x3cef29(0x13e)](),_0x38563e>_0x2002d3&&!this[_0x3cef29(0xee)]&&(this[_0x3cef29(0xee)]=!![],this[_0x3cef29(0x179)][_0x3cef29(0x1c5)](_0x3cef29(0x1dd)+_0x38563e[_0x3cef29(0x185)](0x4)+_0x3cef29(0x1b0)+_0x2002d3+_0x3cef29(0x8f)),await this[_0x3cef29(0x163)](_0x38563e,_0x3cef29(0xe1)),setTimeout(()=>{const _0x33662a=_0x3cef29;this[_0x33662a(0xee)]=![];},0x5*0x3c*0x3e8));}async[a0_0x37c99c(0x163)](_0x19f44f,_0x42e4d9){const _0x7eb3a6=a0_0x37c99c;if(!this[_0x7eb3a6(0x85)]){const _0x271842=this[_0x7eb3a6(0x1d0)][_0x7eb3a6(0x170)](0x0,0xa),_0x2f52df=_0x271842[_0x7eb3a6(0x1ca)](_0x40108e=>new Date(_0x40108e['timestamp'])[_0x7eb3a6(0x95)](_0x7eb3a6(0x18d))+_0x7eb3a6(0x188)+(_0x40108e[_0x7eb3a6(0x82)]||_0x7eb3a6(0x103))+':\x20'+_0x40108e['name'])[_0x7eb3a6(0xb9)]('\x0a');this[_0x7eb3a6(0x179)][_0x7eb3a6(0x1c5)]('üîä\x20FORENSIC:\x20Infraschall\x20bei\x20Abwesenheit!\x20Pressure:\x20'+_0x19f44f['toFixed'](0x4)+_0x7eb3a6(0xf9)+_0x2f52df);if(this['config'][_0x7eb3a6(0x14f)])try{const _0x19d7ef=await this[_0x7eb3a6(0x1df)](this[_0x7eb3a6(0xd6)][_0x7eb3a6(0x14f)]);_0x19d7ef&&_0x19d7ef[_0x7eb3a6(0x1d7)]===!![]&&(await this[_0x7eb3a6(0x1e5)](_0x7eb3a6(0x195),{'val':JSON[_0x7eb3a6(0x94)]({'timestamp':Date[_0x7eb3a6(0xcd)](),'pressure':_0x19f44f[_0x7eb3a6(0x185)](0x4),'eventType':_0x42e4d9,'recentEvents':_0x271842['slice'](0x0,0x3)}),'ack':!![]}),this[_0x7eb3a6(0x179)]['error']('üö®\x20INFRASCHALL-ALARM:\x20Anomalie\x20bei\x20Abwesenheit\x20(scharf)!'));}catch(_0x5d00a9){}}else this['log']['debug'](_0x7eb3a6(0x147)+_0x19f44f[_0x7eb3a6(0x185)](0x4)+_0x7eb3a6(0xce));}async['analyzeWindowOpening'](_0x44ccb2){const _0xd4a67b=a0_0x37c99c;if(!_0x44ccb2||!_0x44ccb2[_0xd4a67b(0x82)])return;try{const _0x3868a6=(this[_0xd4a67b(0xd6)][_0xd4a67b(0x114)]||[])[_0xd4a67b(0x143)](_0x213eb8=>_0x213eb8[_0xd4a67b(0x82)]===_0x44ccb2[_0xd4a67b(0x82)]&&(_0x213eb8[_0xd4a67b(0x135)]==='temperature'||_0x213eb8['type']===_0xd4a67b(0xb1)));if(_0x3868a6[_0xd4a67b(0x10b)]===0x0)return;const _0x568ae7=await this['getForeignStateAsync'](_0x3868a6[0x0]['id']);if(!_0x568ae7||typeof _0x568ae7[_0xd4a67b(0x1d7)]!=='number')return;const _0x456318=_0x568ae7[_0xd4a67b(0x1d7)];let _0x397c4b=null;if(this[_0xd4a67b(0xd6)][_0xd4a67b(0x1e8)]){const _0x1fd602=await this[_0xd4a67b(0x1df)](this[_0xd4a67b(0xd6)][_0xd4a67b(0x1e8)]);_0x1fd602&&typeof _0x1fd602['val']===_0xd4a67b(0xd9)&&(_0x397c4b=_0x1fd602[_0xd4a67b(0x1d7)]);}if(_0x397c4b!==null){const _0x2f7e21=Math['abs'](_0x456318-_0x397c4b);_0x2f7e21>0x3&&(this[_0xd4a67b(0x179)]['debug']('üí®\x20L√ºftung\x20in\x20'+_0x44ccb2[_0xd4a67b(0x82)]+_0xd4a67b(0x176)+_0x2f7e21[_0xd4a67b(0x185)](0x1)+_0xd4a67b(0x1cd)+_0x456318+_0xd4a67b(0x165)+_0x397c4b+_0xd4a67b(0x190)),await this['setStateAsync'](_0xd4a67b(0x113),{'val':JSON[_0xd4a67b(0x94)]({'room':_0x44ccb2[_0xd4a67b(0x82)],'timestamp':Date[_0xd4a67b(0xcd)](),'tempDiff':_0x2f7e21['toFixed'](0x1),'recommendation':_0x2f7e21>0x5?_0xd4a67b(0xbb):_0xd4a67b(0xb3)}),'ack':!![]}));}}catch(_0x313ad1){this[_0xd4a67b(0x179)][_0xd4a67b(0x1c5)](_0xd4a67b(0x145)+_0x313ad1[_0xd4a67b(0x183)]);}}async[a0_0x37c99c(0xe3)](_0x43bc95){const _0x5b49c7=a0_0x37c99c;if(!_0x43bc95||typeof _0x43bc95!=='object')return;const _0xc9993e={'timestamp':_0x43bc95[_0x5b49c7(0x1eb)]||Date['now'](),'id':_0x43bc95['id']||Date['now']()[_0x5b49c7(0x115)](),'name':_0x43bc95[_0x5b49c7(0x184)]||_0x5b49c7(0x193),'type':_0x43bc95[_0x5b49c7(0x135)]||_0x5b49c7(0x1c9),'location':_0x43bc95['location']||_0x5b49c7(0x103),'value':_0x43bc95[_0x5b49c7(0xbc)]||null};this[_0x5b49c7(0x1d0)]['unshift'](_0xc9993e);if(this[_0x5b49c7(0x1d0)][_0x5b49c7(0x10b)]>0x1388)this[_0x5b49c7(0x1d0)][_0x5b49c7(0x15f)]();await this[_0x5b49c7(0x1e5)](_0x5b49c7(0x1e6),{'val':JSON[_0x5b49c7(0x94)](this[_0x5b49c7(0x1d0)]),'ack':!![]}),this[_0x5b49c7(0x179)][_0x5b49c7(0xae)](_0x5b49c7(0x1a1)+_0xc9993e[_0x5b49c7(0x184)]+'\x20('+_0xc9993e['location']+')');}[a0_0x37c99c(0x1ec)](_0x540780){}}if(require[a0_0x37c99c(0xb4)]!==module)module[a0_0x37c99c(0x158)]=_0x4cadd0=>new CogniLiving(_0x4cadd0);else new CogniLiving();