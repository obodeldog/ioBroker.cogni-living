const a0_0x2d3924=a0_0x4ec3;(function(_0x23995d,_0xc73a16){const _0x5b0c31=a0_0x4ec3,_0x191961=_0x23995d();while(!![]){try{const _0x2281ac=parseInt(_0x5b0c31(0xd6))/0x1*(parseInt(_0x5b0c31(0xb1))/0x2)+parseInt(_0x5b0c31(0x19c))/0x3*(parseInt(_0x5b0c31(0xf0))/0x4)+-parseInt(_0x5b0c31(0x1e2))/0x5*(parseInt(_0x5b0c31(0x1c8))/0x6)+parseInt(_0x5b0c31(0xd7))/0x7+parseInt(_0x5b0c31(0x1da))/0x8*(parseInt(_0x5b0c31(0xea))/0x9)+-parseInt(_0x5b0c31(0x14e))/0xa+-parseInt(_0x5b0c31(0x23b))/0xb*(parseInt(_0x5b0c31(0x191))/0xc);if(_0x2281ac===_0xc73a16)break;else _0x191961['push'](_0x191961['shift']());}catch(_0x693c82){_0x191961['push'](_0x191961['shift']());}}}(a0_0x5cb5,0x2040e));const a0_0x94335b=(function(){let _0x5c0171=!![];return function(_0x908d42,_0x3596c3){const _0x3e74e6=_0x5c0171?function(){const _0x31a32b=a0_0x4ec3;if(_0x3596c3){const _0xfc948d=_0x3596c3[_0x31a32b(0x132)](_0x908d42,arguments);return _0x3596c3=null,_0xfc948d;}}:function(){};return _0x5c0171=![],_0x3e74e6;};}()),a0_0x5c3f17=a0_0x94335b(this,function(){const _0x46b9b0=a0_0x4ec3;return a0_0x5c3f17[_0x46b9b0(0x1af)]()[_0x46b9b0(0x177)](_0x46b9b0(0xce))[_0x46b9b0(0x1af)]()[_0x46b9b0(0x1eb)](a0_0x5c3f17)[_0x46b9b0(0x177)](_0x46b9b0(0xce));});a0_0x5c3f17();function a0_0x5cb5(){const _0x370bb5=['45018dRekkI','LTM.rawEventLog','\x20=\x20','models/gemini-flash-latest','dimmer','Started...','219832XKCbYo','analysis.health.gaitSpeed','LTM.driftAnalysis.lastCheck','Digest','subscribeStates','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','dismissAutomation','threshold','ack','LTM.trainingData.thermodynamics','system.isPresent','isEmergency','presenceDevices','now','[RECORDER]\x20Error:\x20','heating','\x20new\x20patterns.','Error\x20launching\x20Python:\x20','testContext','genAI','name','[LOG]','split','isGracePeriodActive','analysisTimer','includes','dailyDigests','analysis.alertReason','analysis.energy.insulationScore','PREDICT_ENERGY','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','enum.functions.*','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','./lib/installer','splice','automationProposal','analysis.isAlert','Gemini\x20AI\x20initialized.','testApiKey','TOPOLOGY_RESULT','insulation','shift','Event\x20History','analysis.training.triggerHealth','setupDriftAnalysisScheduler','briefingJob','Train\x20Security','python_service','value','Trigger\x20Analysis','is_anomaly','getGenerativeModel','Failed:\x20','analysisHistory','analysis.training.triggerEnergy','callback','geminiApiKey','analysis.security','automation.triggerAction','system','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','analysis.automation.targetId','driftAnalysisTimer','Build\x20Topology','\x20->\x20','modeResetJob','apply','setObjectNotExistsAsync','analysis.training.triggerComfort','analysis.triggerBriefing','Health\x20Analysis','WiFi\x20Presence\x20detected.','PONG','parse','ENERGY_PREDICT_RESULT','âš ï¸\x20ALARM:\x20','ðŸ§ \x20Triggering\x20Security\x20Training...','Gemini\x20Error:\x20','Kein\x20API\x20Key.','number','child_process','toLowerCase','indicator.alarm','analysis.history_debug_00','forEach','lastAlertState','fenster','Heating\x20Score','OK:\x20','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','Trend','PYTHON_EXE','ENERGY_TRAIN_RESULT','systemConfig','2302310IxgWlK','analysis.automation.patternDetected','GUEST','values','User\x20dismissed\x20automation\x20proposal.','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','system.mode','unknown','setStateAsync','schalter','BUILD_TOPOLOGY','Training\x20Status','log','LTM.baselineStatus','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','getMinutes','substring','âš ï¸\x20SECURITY\x20ALARM:\x20','diagnosis','from','kill','common','No\x20instance','stringify','Anomaly\x20Detected','.communicate.request','Sequences','ltmLtbWindowDays','error','Detected\x20Patterns','TRAIN_HEALTH','analysis.automation.autoApply','.Current.Temperature','state','enum','accuweather','currentSystemMode','triggerDailyDigest','Trend\x20Value','Unbekannt','Trigger\x20Action','search','systemUUID','message','minDaysForBaseline','cogni-living\x20adapter\x20starting\x20(v','longitude','keys','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','sensorLastValues','join','temperatur','.\x20WETTER:\x20','LTM.dailyDigests','response','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','PRIORITÃ„T:\x20Gesundheit/AAL.','bewegung','exports','communicate.request','HEALTH_TRAIN_RESULT','sendTo','getForeignStateAsync','Temperature\x20Forecast','bind','writable','TRAIN_ENERGY','164508TBRgWj','notifyTelegramInstance','analysis.energy.forecast','getMonth','setForeignStateAsync','date','analysis.health.todayVector','main','autoApply','temperature','triggerBriefing','12cPEOQC','.forecast.current.state','boolean','Regel\x20erkannt:\x20','events.history_debug_00','notifyTelegramEnabled','payload','Adapter','Â°C,\x20','analysis.security.topologyMatrix','Auto\x20Apply','normal','\x20Tage)','Target\x20Value','details','confidence','LTM.driftAnalysis.baselineDrift','isProVersion','./lib/scheduler','toString','[PYTHON]\x20','guest','push','data','Lernphase\x20(','eventHistory','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','toFixed','rawEventLog','reason','analysis.training.triggerTopology','setState','window','\x0aSTB:\x20','startsWith','status','analysis.security.lastCheck','object','slice','channel','val','Daily\x20Digests','toLocaleTimeString','apiKey','12MJEoWD','Unknown','analysis.health.trendDiagnosis','analysis.automation.targetValue','analysis.training','lampe','existsSync','fill','targetValue','summary','command','ANALYZE_TREND','events.lastEvent','find','Topology\x20Error:\x20','driftDetails','Briefing\x20Error:\x20','AI\x20Training','24wdAYWg','.\x20EVENTS:\x20','Description','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','analysis.health.isAnomaly','licht','Security\x20Monitor','delObjectAsync','572545bjirhd','version','pythonProcess','presence','getForeignObjectAsync','replace','Err:\x20','service.py','python3','constructor','light','path','openweathermap','text','getTime','ltmJob','licenseKey','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','unload','getOverviewData','logDuplicates','Last\x20Check','PARTY','COMFORT_RESULT','Kalender\x20deaktiviert.','analysis.trigger','dependencyInstallInProgress','getDate','city','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','getLtmData','Current\x20Threshold','Activity-Level','.\x20KONTEXT:\x20','simulateButler','geminiModel','Trigger\x20Briefing','Anomaly\x20Score','Alert\x20Status','some','Wetterdaten\x20deaktiviert.','PRIORITÃ„T:\x20Sicherheit.','exitGraceTimer','VACATION','scanForDevices','SECURITY_RESULT','timestamp','ANOMALY','targetId','onReady','analysis.health.lastCheck','unshift','KI-Modell\x20nicht\x20initialisiert','calendarInstance','outdoorSensorId','instance','N/A\x20(Learning)','Train\x20Comfort','useCalendar','analysis.training.triggerSecurity','detected','switch','analysis.security.currentThreshold','LTM.trainingData.sequences','Restoring\x20sensor\x20cache...','livingContext','description','@google/generative-ai','Keine\x20Details.','Fokus\x20auf\x20Familienroutinen.','vacation','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','onUnload','analysis.health.trendValue','LTM','analysisInterval','getForeignObjectsAsync','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','BUTLER\x20Execution\x20Error:\x20','isAlert','analysis.automation.description','stateChange','stdin','NORMAL','telegram','setupBriefingScheduler','exitTimer','pop','success','33GgQNuC','Sec-Training\x20started...','TREND_RESULT','system.presenceWho','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','ANALYZE_SEQUENCE','analysis.health','motion','debug','analysis.activitySummary','analysis.training.status','round','setupLtmScheduler','Training\x20Error:\x20','subscribeForeignStatesAsync','analysis.energy.heatingScore','Success','analysis.lastResult','.\x20EMERGENCY:\x20','Train\x20Health','aiPersona','Last\x20raw\x20event','ðŸ“\x20Feedback\x20received:\x20','prÃ¤senz','getStateAsync','.NextHours.Location_1.Day_1.current.temp_value','useWeather','getFullYear','Gait\x20Speed\x20Trend','2SOBujA','heizung','contact',')\x20-\x20SAFE\x20BOOT','json','analysis.analysisHistory','Analysiere\x20ausgewogen.','System','button','toISOString','enum.rooms.*','Alert\x20Reason','inactivityThresholdHours','ltmStbWindowDays','trim','location','isPresent','Keine\x20Termine.','getObjectAsync','alertReason','\x0aGrund:\x20','string','length','text.alarm','N/A','Insulation\x20Score','type','occupancy','baselineDrift','(((.+)+)+)+$','system.config','indicator','analysis.security.lastScore','@iobroker/adapter-core','cancel','Skipped\x20(No\x20AI\x20or\x20Data)','getHours','199673mmiaVJ','1385825GnPsEr','info','TRAIN_COMFORT','config','TRAINING_COMPLETE','map','extendObjectAsync','generateContent','HEALTH_RESULT','analysis.automation.triggerAction','Aktiv\x20(','submitFeedback','devices','events.history','kontakt','ðŸ\x20Python\x20Pong','.\x20SYSTEM_MODE:\x20','close','Energy\x20Intelligence'];a0_0x5cb5=function(){return _0x370bb5;};return a0_0x5cb5();}'use strict';const utils=require(a0_0x2d3924(0xd2)),{GoogleGenerativeAI}=require(a0_0x2d3924(0x225)),{spawn}=require(a0_0x2d3924(0x140)),path=require(a0_0x2d3924(0x1ed)),fs=require('fs'),installer=require(a0_0x2d3924(0x111)),scanner=require('./lib/scanner'),schedulers=require(a0_0x2d3924(0x1ae)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x2d3924(0xed),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x2d3924(0xeb),LTM_DP_DAILY_DIGESTS=a0_0x2d3924(0x183),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS=a0_0x2d3924(0x15b),LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS=a0_0x2d3924(0x1ac),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x2d3924(0xf2),SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':a0_0x2d3924(0x1a7),'VACATION':a0_0x2d3924(0x228),'PARTY':'party','GUEST':a0_0x2d3924(0x1b1)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x2d3924(0x1f8)],SYSTEM_MODES[a0_0x2d3924(0x150)]],PERSONA_MAPPING={'generic':a0_0x2d3924(0xb7),'senior_aal':a0_0x2d3924(0x186),'family':a0_0x2d3924(0x227),'single_comfort':'Fokus\x20auf\x20Komfort.','security':a0_0x2d3924(0x20b)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x41a451){const _0x1d1866=a0_0x2d3924;try{const _0x30fd21=[_0x1d1866(0x143),_0x1d1866(0x1a0)];for(const _0x358682 of _0x30fd21){try{const _0x3b4e26=await _0x41a451[_0x1d1866(0xc3)](_0x358682);if(_0x3b4e26)await _0x41a451[_0x1d1866(0x1e1)](_0x358682);}catch(_0x5c4451){}}}catch(_0x431ec9){}}async function checkLicense(_0x4d6d90){return!![];}async function initHistory(_0x89d6e4){const _0x273349=a0_0x2d3924;try{const _0x1fd118=await _0x89d6e4[_0x273349(0xac)]('events.history');_0x1fd118&&_0x1fd118[_0x273349(0x1c4)]&&(_0x89d6e4[_0x273349(0x1b5)]=JSON[_0x273349(0x139)](_0x1fd118[_0x273349(0x1c4)]['toString']()));}catch(_0x140dfd){_0x89d6e4[_0x273349(0x1b5)]=[];}try{const _0x38c19b=await _0x89d6e4[_0x273349(0xac)](_0x273349(0xb6));if(_0x38c19b&&_0x38c19b['val'])_0x89d6e4['analysisHistory']=JSON[_0x273349(0x139)](_0x38c19b[_0x273349(0x1c4)][_0x273349(0x1af)]());}catch(_0x20bc1e){_0x89d6e4[_0x273349(0x125)]=[];}if(_0x89d6e4[_0x273349(0x1b5)]&&_0x89d6e4['eventHistory'][_0x273349(0xc7)]>0x0){_0x89d6e4['log'][_0x273349(0xd8)](_0x273349(0x222));for(let _0x359b74=_0x89d6e4['eventHistory'][_0x273349(0xc7)]-0x1;_0x359b74>=0x0;_0x359b74--){const _0x38ab4f=_0x89d6e4[_0x273349(0x1b5)][_0x359b74];if(_0x38ab4f&&_0x38ab4f['id']!==undefined&&_0x38ab4f[_0x273349(0x120)]!==undefined)_0x89d6e4[_0x273349(0x17f)][_0x38ab4f['id']]=_0x38ab4f[_0x273349(0x120)];}}}async function initSystemConfig(_0x3aafa6){const _0x2c654b=a0_0x2d3924;try{const _0xf708a6=await _0x3aafa6[_0x2c654b(0x1e6)](_0x2c654b(0xcf));if(_0xf708a6&&_0xf708a6[_0x2c654b(0x163)])_0x3aafa6[_0x2c654b(0x14d)]={'latitude':_0xf708a6[_0x2c654b(0x163)]['latitude']||0x0,'longitude':_0xf708a6[_0x2c654b(0x163)][_0x2c654b(0x17c)]||0x0,'city':_0xf708a6['common'][_0x2c654b(0x1fe)]||''};}catch(_0x4532e1){}}async function createAllObjects(_0x5f4762){const _0x4ebe8d=a0_0x2d3924;await _0x5f4762[_0x4ebe8d(0xdd)](_0x4ebe8d(0x12b),{'type':_0x4ebe8d(0x1c3),'common':{'name':_0x4ebe8d(0xb8)},'native':{}}),await _0x5f4762[_0x4ebe8d(0xdd)](SYSTEM_DP_MODE,{'type':'state','common':{'name':'System\x20Mode','type':_0x4ebe8d(0xc6),'role':_0x4ebe8d(0x16f),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x4ebe8d(0x235)]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)]('system.presenceWho',{'type':'state','common':{'name':'Who\x20is\x20present?','type':_0x4ebe8d(0xc6),'role':_0x4ebe8d(0x1ef),'read':!![],'write':![]},'native':{}}),await _0x5f4762['setObjectNotExistsAsync'](_0x4ebe8d(0x1d4),{'type':_0x4ebe8d(0x16f),'common':{'name':_0x4ebe8d(0xa9),'type':_0x4ebe8d(0xc6),'role':_0x4ebe8d(0xb5),'read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0xe4),{'type':_0x4ebe8d(0x16f),'common':{'name':_0x4ebe8d(0x11a),'type':_0x4ebe8d(0xc6),'role':_0x4ebe8d(0xb5),'read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0xdd)](_0x4ebe8d(0x1cc),{'type':_0x4ebe8d(0x1c3),'common':{'name':_0x4ebe8d(0x1d9)},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)]('analysis.training.triggerSecurity',{'type':_0x4ebe8d(0x16f),'common':{'name':_0x4ebe8d(0x11e),'type':_0x4ebe8d(0x19e),'role':_0x4ebe8d(0xb9),'read':!![],'write':!![]},'native':{}}),await _0x5f4762['setObjectNotExistsAsync']('analysis.training.triggerHealth',{'type':_0x4ebe8d(0x16f),'common':{'name':_0x4ebe8d(0xa7),'type':_0x4ebe8d(0x19e),'role':_0x4ebe8d(0xb9),'read':!![],'write':!![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x126),{'type':_0x4ebe8d(0x16f),'common':{'name':'Train\x20Energy','type':_0x4ebe8d(0x19e),'role':_0x4ebe8d(0xb9),'read':!![],'write':!![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)]('analysis.training.triggerComfort',{'type':_0x4ebe8d(0x16f),'common':{'name':_0x4ebe8d(0x21b),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x1ba),{'type':_0x4ebe8d(0x16f),'common':{'name':_0x4ebe8d(0x12f),'type':'boolean','role':_0x4ebe8d(0xb9),'read':!![],'write':!![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x9e),{'type':_0x4ebe8d(0x16f),'common':{'name':_0x4ebe8d(0x159),'type':_0x4ebe8d(0xc6),'role':'text','read':!![],'write':![]},'native':{}}),await _0x5f4762['extendObjectAsync'](_0x4ebe8d(0x129),{'type':_0x4ebe8d(0x1c3),'common':{'name':_0x4ebe8d(0x1e0)},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)]('analysis.security.lastScore',{'type':'state','common':{'name':_0x4ebe8d(0x207),'type':'number','role':'value','read':!![],'write':![]},'native':{}}),await _0x5f4762['setObjectNotExistsAsync'](_0x4ebe8d(0x220),{'type':'state','common':{'name':_0x4ebe8d(0x201),'type':'number','role':'value','read':!![],'write':![],'def':0.05},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x1c0),{'type':'state','common':{'name':_0x4ebe8d(0x1f7),'type':_0x4ebe8d(0xc6),'role':_0x4ebe8d(0x196),'read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x1a5),{'type':_0x4ebe8d(0x16f),'common':{'name':'Topology\x20Matrix','type':_0x4ebe8d(0xc6),'role':_0x4ebe8d(0xb5),'read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0xdd)](_0x4ebe8d(0x9a),{'type':_0x4ebe8d(0x1c3),'common':{'name':_0x4ebe8d(0x136)},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x214),{'type':_0x4ebe8d(0x16f),'common':{'name':'Last\x20Check','type':_0x4ebe8d(0xc6),'role':_0x4ebe8d(0x196),'read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x1de),{'type':'state','common':{'name':_0x4ebe8d(0x166),'type':_0x4ebe8d(0x19e),'role':_0x4ebe8d(0xd0),'read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x1ca),{'type':'state','common':{'name':_0x4ebe8d(0x14a),'type':_0x4ebe8d(0xc6),'role':_0x4ebe8d(0x1ef),'read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x22b),{'type':_0x4ebe8d(0x16f),'common':{'name':_0x4ebe8d(0x174),'type':_0x4ebe8d(0x13f),'role':'value','read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x197),{'type':_0x4ebe8d(0x16f),'common':{'name':'Today\x20Vector\x20(15m)','type':'string','role':_0x4ebe8d(0xb5),'read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0xf1),{'type':'state','common':{'name':_0x4ebe8d(0xb0),'type':'number','role':_0x4ebe8d(0x120),'read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0xdd)]('analysis.energy',{'type':_0x4ebe8d(0x1c3),'common':{'name':_0x4ebe8d(0xe9)},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x10c),{'type':'state','common':{'name':_0x4ebe8d(0xca),'type':'string','role':_0x4ebe8d(0x1ef),'read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0xa3),{'type':_0x4ebe8d(0x16f),'common':{'name':_0x4ebe8d(0x147),'type':_0x4ebe8d(0xc6),'role':_0x4ebe8d(0x1ef),'read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x193),{'type':_0x4ebe8d(0x16f),'common':{'name':_0x4ebe8d(0x18d),'type':_0x4ebe8d(0xc6),'role':_0x4ebe8d(0xb5),'read':!![],'write':![]},'native':{}}),await _0x5f4762['extendObjectAsync'](_0x4ebe8d(0x22c),{'type':_0x4ebe8d(0x1c3),'common':{'name':_0x4ebe8d(0x22c)},'native':{}}),await _0x5f4762[_0x4ebe8d(0xdd)](LTM_DP_RAW_LOG,{'type':_0x4ebe8d(0x16f),'common':{'name':'Raw\x20Log','type':_0x4ebe8d(0xc6),'role':_0x4ebe8d(0xb5),'read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0xdd)](LTM_DP_DAILY_DIGESTS,{'type':_0x4ebe8d(0x16f),'common':{'name':_0x4ebe8d(0x1c5),'type':_0x4ebe8d(0xc6),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x221),{'type':'state','common':{'name':_0x4ebe8d(0x168),'type':_0x4ebe8d(0xc6),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5f4762['setObjectNotExistsAsync'](_0x4ebe8d(0xf9),{'type':_0x4ebe8d(0x16f),'common':{'name':'Thermodynamics','type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x1fb),{'type':_0x4ebe8d(0x16f),'common':{'name':_0x4ebe8d(0x121),'type':'boolean','role':_0x4ebe8d(0xb9),'read':!![],'write':!![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x135),{'type':_0x4ebe8d(0x16f),'common':{'name':_0x4ebe8d(0x206),'type':'boolean','role':_0x4ebe8d(0xb9),'read':!![],'write':!![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x114),{'type':'state','common':{'name':_0x4ebe8d(0x208),'type':_0x4ebe8d(0x19e),'role':_0x4ebe8d(0x142),'read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x10b),{'type':'state','common':{'name':_0x4ebe8d(0xbc),'type':'string','role':_0x4ebe8d(0xc8),'read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x9d),{'type':_0x4ebe8d(0x16f),'common':{'name':'Activity\x20Summary','type':_0x4ebe8d(0xc6),'role':_0x4ebe8d(0x1ef),'read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x14f),{'type':_0x4ebe8d(0x16f),'common':{'name':'Pattern\x20Detected','type':_0x4ebe8d(0x19e),'role':_0x4ebe8d(0xd0),'read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x232),{'type':_0x4ebe8d(0x16f),'common':{'name':_0x4ebe8d(0x1dc),'type':_0x4ebe8d(0xc6),'role':_0x4ebe8d(0x1ef),'read':!![],'write':![]},'native':{}}),await _0x5f4762['setObjectNotExistsAsync']('analysis.automation.detectedPatterns',{'type':_0x4ebe8d(0x16f),'common':{'name':_0x4ebe8d(0x16b),'type':_0x4ebe8d(0xc6),'role':_0x4ebe8d(0xb5),'read':!![],'write':![]},'native':{}}),await _0x5f4762['setObjectNotExistsAsync'](_0x4ebe8d(0x12d),{'type':_0x4ebe8d(0x16f),'common':{'name':'Target\x20ID','type':'string','role':_0x4ebe8d(0x1ef),'read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x1cb),{'type':_0x4ebe8d(0x16f),'common':{'name':_0x4ebe8d(0x1a9),'type':_0x4ebe8d(0xc6),'role':'text','read':!![],'write':![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0x16d),{'type':_0x4ebe8d(0x16f),'common':{'name':_0x4ebe8d(0x1a6),'type':_0x4ebe8d(0x19e),'role':_0x4ebe8d(0x21f),'read':!![],'write':!![]},'native':{}}),await _0x5f4762[_0x4ebe8d(0x133)](_0x4ebe8d(0xe0),{'type':'state','common':{'name':_0x4ebe8d(0x176),'type':_0x4ebe8d(0x19e),'role':_0x4ebe8d(0xb9),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x5bdd43){const _0x1d4ae3=a0_0x2d3924;try{const _0x4daeff=await _0x5bdd43[_0x1d4ae3(0xac)](SYSTEM_DP_MODE);_0x4daeff&&_0x4daeff[_0x1d4ae3(0x1c4)]&&Object[_0x1d4ae3(0x151)](SYSTEM_MODES)[_0x1d4ae3(0x109)](_0x4daeff[_0x1d4ae3(0x1c4)])?_0x5bdd43['currentSystemMode']=_0x4daeff[_0x1d4ae3(0x1c4)]:(_0x5bdd43[_0x1d4ae3(0x172)]=SYSTEM_MODES[_0x1d4ae3(0x235)],await _0x5bdd43['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x1d4ae3(0x235)],'ack':!![]}));}catch(_0x451d2a){_0x5bdd43[_0x1d4ae3(0x172)]=SYSTEM_MODES[_0x1d4ae3(0x235)];}}async function loadRawEventLog(_0x44ef56){const _0x457426=a0_0x2d3924;try{const _0x477e94=await _0x44ef56[_0x457426(0xac)](LTM_DP_RAW_LOG);if(_0x477e94&&_0x477e94[_0x457426(0x1c4)])_0x44ef56[_0x457426(0x1b8)]=JSON[_0x457426(0x139)](_0x477e94['val']);}catch(_0x19d020){_0x44ef56['rawEventLog']=[];}}async function saveRawEventLog(_0x4875a1){const _0x4453d1=a0_0x2d3924;if(_0x4875a1[_0x4453d1(0x1b8)][_0x4453d1(0xc7)]>RAW_LOG_MAX_SIZE)_0x4875a1[_0x4453d1(0x1b8)][_0x4453d1(0x112)](0x0,_0x4875a1[_0x4453d1(0x1b8)][_0x4453d1(0xc7)]-RAW_LOG_MAX_SIZE);await _0x4875a1[_0x4453d1(0x156)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x4875a1[_0x4453d1(0x1b8)]),'ack':!![]});}async function loadDailyDigests(_0x2adf52){const _0x356be4=a0_0x2d3924;try{const _0x4c1733=await _0x2adf52['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x4c1733&&_0x4c1733[_0x356be4(0x1c4)])_0x2adf52[_0x356be4(0x10a)]=JSON[_0x356be4(0x139)](_0x4c1733[_0x356be4(0x1c4)]);}catch(_0x17ea87){_0x2adf52[_0x356be4(0x10a)]=[];}await updateBaselineStatus(_0x2adf52);}async function saveDailyDigests(_0x7b897,_0x16282c=!![]){const _0x42a3e7=a0_0x2d3924,_0x26c071=_0x7b897[_0x42a3e7(0xda)][_0x42a3e7(0x169)]||0x3c;_0x7b897[_0x42a3e7(0x10a)][_0x42a3e7(0xc7)]>_0x26c071&&_0x7b897[_0x42a3e7(0x10a)][_0x42a3e7(0x112)](0x0,_0x7b897['dailyDigests'][_0x42a3e7(0xc7)]-_0x26c071);await _0x7b897[_0x42a3e7(0x156)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x42a3e7(0x165)](_0x7b897[_0x42a3e7(0x10a)]),'ack':!![]});if(_0x16282c)await updateBaselineStatus(_0x7b897);}async function updateAnalysisHistory(_0x1bdc5b,_0x47a957){const _0x3d791f=a0_0x2d3924;_0x1bdc5b[_0x3d791f(0x125)][_0x3d791f(0x215)](_0x47a957);if(_0x1bdc5b['analysisHistory'][_0x3d791f(0xc7)]>HISTORY_MAX_SIZE)_0x1bdc5b[_0x3d791f(0x125)]['pop']();await _0x1bdc5b[_0x3d791f(0x156)](_0x3d791f(0xb6),{'val':JSON[_0x3d791f(0x165)](_0x1bdc5b[_0x3d791f(0x125)]),'ack':!![]});}async function updateBaselineStatus(_0x2f7cb4){const _0x1a47de=a0_0x2d3924;if(!_0x2f7cb4[_0x1a47de(0x1ad)]){await _0x2f7cb4[_0x1a47de(0x156)](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0x20db98=_0x2f7cb4[_0x1a47de(0x10a)][_0x1a47de(0xc7)]>=(_0x2f7cb4[_0x1a47de(0xda)][_0x1a47de(0x17a)]||0x7)?_0x1a47de(0xe1)+_0x2f7cb4['dailyDigests'][_0x1a47de(0xc7)]+_0x1a47de(0x1a8):_0x1a47de(0x1b4)+_0x2f7cb4['dailyDigests'][_0x1a47de(0xc7)]+'/'+(_0x2f7cb4[_0x1a47de(0xda)]['minDaysForBaseline']||0x7)+')';await _0x2f7cb4[_0x1a47de(0x156)](LTM_DP_BASELINE_STATUS,{'val':_0x20db98,'ack':!![]});}async function initSensorSubscriptions(_0x33da8d){const _0x52b65d=a0_0x2d3924,_0x3c4886=_0x33da8d[_0x52b65d(0xda)]['devices'];if(_0x3c4886)for(const _0x1a5239 of _0x3c4886){await _0x33da8d[_0x52b65d(0xa2)](_0x1a5239['id']);}}async function initPresenceSubscriptions(_0x61f2c8){const _0x18c6ff=a0_0x2d3924,_0x3c0d00=_0x61f2c8[_0x18c6ff(0xda)][_0x18c6ff(0xfc)];if(_0x3c0d00)for(const _0x5cfdcc of _0x3c0d00){await _0x61f2c8[_0x18c6ff(0xa2)](_0x5cfdcc);}}async function setupTelegramListener(_0x2de0e7){const _0x1814c2=a0_0x2d3924,_0x521837=_0x2de0e7['config'][_0x1814c2(0x192)];if(_0x2de0e7[_0x1814c2(0xda)][_0x1814c2(0x1a1)]&&_0x521837)await _0x2de0e7[_0x1814c2(0xa2)](_0x521837+_0x1814c2(0x167));}async function checkWifiPresence(_0x3deac7){const _0x55d426=a0_0x2d3924;try{const _0x450ee5=_0x3deac7[_0x55d426(0xda)][_0x55d426(0xfc)]||[];let _0x4ac9ec=![];const _0x1ca644=[];for(const _0x1944ea of _0x450ee5){try{const _0x1f874b=await _0x3deac7[_0x55d426(0x18c)](_0x1944ea);_0x1f874b&&(_0x1f874b[_0x55d426(0x1c4)]===!![]||_0x1f874b[_0x55d426(0x1c4)]==='online'||_0x1f874b[_0x55d426(0x1c4)]===0x1)&&(_0x4ac9ec=!![],_0x1ca644['push'](_0x1944ea));}catch(_0x2d0312){}}return await _0x3deac7[_0x55d426(0x156)](_0x55d426(0x23e),{'val':_0x1ca644[_0x55d426(0x180)](',\x20'),'ack':!![]}),_0x4ac9ec&&(_0x3deac7[_0x55d426(0x238)]&&(_0x3deac7[_0x55d426(0x15a)]['info'](_0x55d426(0x137)),abortExitTimer(_0x3deac7)),!_0x3deac7[_0x55d426(0xc1)]&&_0x3deac7[_0x55d426(0x172)]===SYSTEM_MODES[_0x55d426(0x235)]&&await setPresence(_0x3deac7,!![])),_0x4ac9ec;}catch(_0xc6d776){return![];}}function startExitTimer(_0x49fc8d){const _0x210b69=a0_0x2d3924;abortExitTimer(_0x49fc8d),_0x49fc8d[_0x210b69(0x107)]=!![],_0x49fc8d['exitGraceTimer']=setTimeout(()=>{_0x49fc8d['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x49fc8d[_0x210b69(0x238)]=setTimeout(()=>{setPresence(_0x49fc8d,![]),_0x49fc8d['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x19a10d){const _0x3580ad=a0_0x2d3924;if(_0x19a10d[_0x3580ad(0x238)])clearTimeout(_0x19a10d[_0x3580ad(0x238)]);if(_0x19a10d['exitGraceTimer'])clearTimeout(_0x19a10d[_0x3580ad(0x20c)]);_0x19a10d[_0x3580ad(0x238)]=null,_0x19a10d['exitGraceTimer']=null,_0x19a10d[_0x3580ad(0x107)]=![];}async function setPresence(_0x53ce20,_0x45c723){const _0x5dc57f=a0_0x2d3924;if(_0x53ce20['isPresent']===_0x45c723)return;_0x53ce20[_0x5dc57f(0xc1)]=_0x45c723,await _0x53ce20[_0x5dc57f(0x156)](_0x5dc57f(0xfa),{'val':_0x45c723,'ack':!![]});}async function executeAutomationAction(_0x28890a){const _0x4dacf9=a0_0x2d3924;try{const _0xfa0798=await _0x28890a[_0x4dacf9(0xac)](_0x4dacf9(0x12d)),_0x23c13b=await _0x28890a['getStateAsync'](_0x4dacf9(0x1cb));if(_0xfa0798&&_0xfa0798[_0x4dacf9(0x1c4)]&&_0x23c13b){const _0xb9c9cc=_0xfa0798[_0x4dacf9(0x1c4)];let _0x38557e=_0x23c13b[_0x4dacf9(0x1c4)];try{_0x38557e=JSON[_0x4dacf9(0x139)](_0x38557e);}catch(_0x49a258){}_0x28890a['log']['info'](_0x4dacf9(0x229)+_0xb9c9cc+_0x4dacf9(0xec)+_0x38557e),await _0x28890a[_0x4dacf9(0x195)](_0xb9c9cc,_0x38557e);}else _0x28890a[_0x4dacf9(0x15a)]['warn'](_0x4dacf9(0x1f3));}catch(_0x7b010e){_0x28890a[_0x4dacf9(0x15a)][_0x4dacf9(0x16a)](_0x4dacf9(0x230)+_0x7b010e[_0x4dacf9(0x179)]);}}async function processSensorEvent(_0x347ef5,_0x1445ad,_0xd9f4fa,_0x53d351){const _0x38dc79=a0_0x2d3924;if(!_0x53d351)return;const _0x3303a8=_0xd9f4fa[_0x38dc79(0x1c4)],_0x53b3f3=Date[_0x38dc79(0xfd)](),_0xb8b3bd=_0x347ef5[_0x38dc79(0x17f)][_0x1445ad];_0x347ef5[_0x38dc79(0x17f)][_0x1445ad]=_0x3303a8;if(!_0x53d351[_0x38dc79(0x1f6)]&&_0xb8b3bd!=undefined&&_0xb8b3bd==_0x3303a8)return;const _0x21e505=(_0x53d351[_0x38dc79(0xcb)]||'')[_0x38dc79(0x141)](),_0x3e7a83=_0x21e505[_0x38dc79(0x109)](_0x38dc79(0x19a))||_0x21e505['includes'](_0x38dc79(0x181))||_0x21e505['includes']('klima')||_0x21e505[_0x38dc79(0x109)](_0x38dc79(0xb2));_0x347ef5['isProVersion']&&_0x3e7a83&&recordThermodynamics(_0x347ef5,_0x1445ad,_0x3303a8,_0x53d351[_0x38dc79(0xc0)]);const _0x146c16={'timestamp':_0x53b3f3,'id':_0x1445ad,'name':_0x53d351['name'],'type':_0x53d351[_0x38dc79(0xcb)],'location':_0x53d351[_0x38dc79(0xc0)],'value':_0x3303a8};_0x347ef5['eventHistory'][_0x38dc79(0x215)](_0x146c16);if(_0x347ef5['eventHistory'][_0x38dc79(0xc7)]>HISTORY_MAX_SIZE)_0x347ef5['eventHistory'][_0x38dc79(0x239)]();await _0x347ef5[_0x38dc79(0x156)](_0x38dc79(0x1d4),{'val':JSON[_0x38dc79(0x165)](_0x146c16),'ack':!![]}),await _0x347ef5[_0x38dc79(0x156)](_0x38dc79(0xe4),{'val':JSON[_0x38dc79(0x165)](_0x347ef5['eventHistory']),'ack':!![]});_0x347ef5['isProVersion']&&(_0x347ef5['rawEventLog'][_0x38dc79(0x1b2)](_0x146c16),await saveRawEventLog(_0x347ef5),recordSequence(_0x347ef5,_0x146c16));if(_0x53d351['isExit']&&_0x3303a8===!![]){if(_0x347ef5[_0x38dc79(0xc1)]&&!_0x347ef5[_0x38dc79(0x107)])startExitTimer(_0x347ef5);else{if(!_0x347ef5[_0x38dc79(0xc1)])setPresence(_0x347ef5,!![]);}}else{if(_0x53d351[_0x38dc79(0xcb)]===_0x38dc79(0x9b)&&_0x3303a8===!![]){if(_0x347ef5[_0x38dc79(0x238)])abortExitTimer(_0x347ef5);if(!_0x347ef5[_0x38dc79(0xc1)]&&_0x347ef5[_0x38dc79(0x172)]===SYSTEM_MODES['NORMAL'])setPresence(_0x347ef5,!![]);}}}async function recordThermodynamics(_0x1a3d30,_0x367753,_0x41f3ed,_0x399777){const _0x2eb820=a0_0x2d3924,_0x29d1e9=await getOutsideTemperatureNumeric(_0x1a3d30),_0x324e26=await _0x1a3d30[_0x2eb820(0xac)](_0x2eb820(0xf9));let _0x4a4ca4=[];if(_0x324e26&&_0x324e26[_0x2eb820(0x1c4)])try{_0x4a4ca4=JSON['parse'](_0x324e26[_0x2eb820(0x1c4)]);}catch(_0x4b4646){}_0x4a4ca4[_0x2eb820(0x1b2)]({'ts':Date[_0x2eb820(0xfd)](),'room':_0x399777||_0x2eb820(0x1c9),'t_in':_0x41f3ed,'t_out':_0x29d1e9});if(_0x4a4ca4['length']>THERMO_LOG_SIZE)_0x4a4ca4[_0x2eb820(0x119)]();await _0x1a3d30[_0x2eb820(0x156)]('LTM.trainingData.thermodynamics',{'val':JSON[_0x2eb820(0x165)](_0x4a4ca4),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x3dcd50){const _0x3c03e3=a0_0x2d3924;if(_0x3dcd50[_0x3c03e3(0xda)][_0x3c03e3(0x218)])try{const _0x5e3a7c=await _0x3dcd50[_0x3c03e3(0x18c)](_0x3dcd50[_0x3c03e3(0xda)]['outdoorSensorId']);if(_0x5e3a7c&&_0x5e3a7c['val']!==undefined&&_0x5e3a7c[_0x3c03e3(0x1c4)]!==null)return parseFloat(_0x5e3a7c[_0x3c03e3(0x1c4)]);}catch(_0x216072){}const _0xdcf68b=_0x3dcd50['config']['weatherInstance'];if(!_0x3dcd50[_0x3c03e3(0xda)][_0x3c03e3(0xae)]||!_0xdcf68b)return null;try{let _0x9c8015='';if(_0xdcf68b[_0x3c03e3(0x109)](_0x3c03e3(0x171)))_0x9c8015=_0xdcf68b+'.Current.Temperature';else{if(_0xdcf68b['includes']('daswetter'))_0x9c8015=_0xdcf68b+_0x3c03e3(0xad);else{if(_0xdcf68b[_0x3c03e3(0x109)](_0x3c03e3(0x1ee)))_0x9c8015=_0xdcf68b+'.forecast.current.temperature';else{if(_0xdcf68b['includes']('weatherunderground'))_0x9c8015=_0xdcf68b+'.forecast.current.temp';}}}if(_0x9c8015){const _0x37c8d9=await _0x3dcd50['getForeignStateAsync'](_0x9c8015);if(_0x37c8d9&&_0x37c8d9['val']!==undefined&&_0x37c8d9[_0x3c03e3(0x1c4)]!==null)return parseFloat(_0x37c8d9[_0x3c03e3(0x1c4)]);}}catch(_0x4a7783){}return null;}async function recordSequence(_0x200c9b,_0x5c3f0e){const _0x3303cc=a0_0x2d3924,_0x51c76c=(_0x5c3f0e[_0x3303cc(0xcb)]||'')[_0x3303cc(0x141)](),_0x48fb10=['motion',_0x3303cc(0x187),_0x3303cc(0xab),_0x3303cc(0x1e5),_0x3303cc(0xcc),'door','tÃ¼r',_0x3303cc(0x1bc),_0x3303cc(0x146),_0x3303cc(0xb3),_0x3303cc(0xe5),_0x3303cc(0x1ec),_0x3303cc(0x1df),'switch',_0x3303cc(0x157),_0x3303cc(0xee),_0x3303cc(0x1cd)];if(!_0x48fb10[_0x3303cc(0x209)](_0x5083e0=>_0x51c76c[_0x3303cc(0x109)](_0x5083e0)))return;if(!_0x5c3f0e[_0x3303cc(0x120)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x3303cc(0x1b2)]({'loc':_0x5c3f0e[_0x3303cc(0xc0)]||_0x3303cc(0x1c9),'id':_0x5c3f0e['id'],'ts':Date[_0x3303cc(0xfd)]()}),sequenceTimer=setTimeout(async()=>{const _0x4bfe72=_0x3303cc;if(activeSequence[_0x4bfe72(0xc7)]>0x1)await saveCompletedSequence(_0x200c9b);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x54de43){const _0x8edbb1=a0_0x2d3924;try{const _0x200bb7=await _0x54de43['getStateAsync']('LTM.trainingData.sequences');let _0x1a40e1=[];if(_0x200bb7&&_0x200bb7[_0x8edbb1(0x1c4)])try{_0x1a40e1=JSON[_0x8edbb1(0x139)](_0x200bb7[_0x8edbb1(0x1c4)]);}catch(_0x37c832){}const _0x119415=activeSequence[0x0]['ts'],_0x18ee60=activeSequence[_0x8edbb1(0xdc)](_0x5d8c5e=>({'loc':_0x5d8c5e['loc'],'t_delta':Math[_0x8edbb1(0x9f)]((_0x5d8c5e['ts']-_0x119415)/0x3e8)})),_0x2528a6={'timestamp':new Date(_0x119415)[_0x8edbb1(0xba)](),'steps':_0x18ee60,'duration':Math['round']((activeSequence[activeSequence[_0x8edbb1(0xc7)]-0x1]['ts']-_0x119415)/0x3e8),'daytime':new Date(_0x119415)[_0x8edbb1(0xd5)]()};_0x1a40e1[_0x8edbb1(0x1b2)](_0x2528a6);if(_0x1a40e1[_0x8edbb1(0xc7)]>MAX_TRAINING_SET_SIZE)_0x1a40e1[_0x8edbb1(0x119)]();await _0x54de43['setStateAsync'](_0x8edbb1(0x221),{'val':JSON[_0x8edbb1(0x165)](_0x1a40e1),'ack':!![]}),runSecurityCheck(_0x54de43,_0x2528a6);}catch(_0x40b0f3){_0x54de43[_0x8edbb1(0x15a)][_0x8edbb1(0x16a)](_0x8edbb1(0xfe)+_0x40b0f3[_0x8edbb1(0x179)]);}}function runSecurityCheck(_0x4edf75,_0x1f7342){const _0x3fd488=a0_0x2d3924;if(!_0x4edf75[_0x3fd488(0x1ad)])return;sendToPython(_0x4edf75,_0x3fd488(0x240),{'sequence':_0x1f7342});}async function createDailyDigest(_0x19c1cb){const _0x4a6865=a0_0x2d3924;if(!_0x19c1cb[_0x4a6865(0x1ad)])return;await _0x19c1cb[_0x4a6865(0x156)](LTM_DP_STATUS,{'val':_0x4a6865(0xef),'ack':!![]});if(!_0x19c1cb[_0x4a6865(0x205)]||_0x19c1cb[_0x4a6865(0x1b8)][_0x4a6865(0xc7)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x19c1cb[_0x4a6865(0x156)](LTM_DP_STATUS,{'val':_0x4a6865(0xd4),'ack':!![]});return;}const _0x2cb1a0=JSON[_0x4a6865(0x139)](JSON[_0x4a6865(0x165)](_0x19c1cb['rawEventLog'])),_0x175683=_0x2cb1a0['length'],_0x4b7194=_0x4a6865(0x17e)+JSON[_0x4a6865(0x165)](_0x2cb1a0);try{const _0x5b854e=await _0x19c1cb[_0x4a6865(0x205)]['generateContent'](_0x4b7194),_0xdb3ea0=JSON[_0x4a6865(0x139)](_0x5b854e[_0x4a6865(0x184)]['text']()['replace'](/```json|```/g,'')[_0x4a6865(0xbf)]()),_0x444dbc={'timestamp':new Date()[_0x4a6865(0xba)](),'eventCount':_0x175683,'summary':_0xdb3ea0[_0x4a6865(0x1d1)]||_0x4a6865(0xf3),'activityLevel':_0xdb3ea0['activityLevel']||_0x4a6865(0x1a7),'systemMode':_0x19c1cb[_0x4a6865(0x172)]};_0x19c1cb[_0x4a6865(0x10a)][_0x4a6865(0x1b2)](_0x444dbc),await saveDailyDigests(_0x19c1cb),_0x19c1cb['rawEventLog']=[],await saveRawEventLog(_0x19c1cb),await _0x19c1cb[_0x4a6865(0x156)](LTM_DP_STATUS,{'val':_0x4a6865(0xa4),'ack':!![]});if(_0x19c1cb[_0x4a6865(0x1ad)])sendToPython(_0x19c1cb,'ANALYZE_HEALTH',{'digest':_0x444dbc});}catch(_0x862a8d){_0x19c1cb['log'][_0x4a6865(0x16a)](_0x862a8d[_0x4a6865(0x179)]);}}async function runBaselineDriftAnalysis(_0x6fcd5f){const _0x25b937=a0_0x2d3924;if(!_0x6fcd5f[_0x25b937(0x1ad)]||!_0x6fcd5f['geminiModel'])return;const _0x554d1f=_0x6fcd5f[_0x25b937(0xda)][_0x25b937(0xbe)]||0xe;if(_0x6fcd5f['dailyDigests']['length']<_0x554d1f+0x7){await _0x6fcd5f[_0x25b937(0x156)](LTM_DP_DRIFT_STATUS,{'val':_0x25b937(0x21a),'ack':!![]});return;}const _0x2ba078=_0x6fcd5f[_0x25b937(0x10a)][_0x25b937(0x1c2)](-_0x554d1f),_0xf8384a=_0x6fcd5f[_0x25b937(0x10a)]['slice'](0x0,_0x6fcd5f['dailyDigests']['length']-_0x554d1f),_0x284e6d=_0x25b937(0x1dd)+JSON[_0x25b937(0x165)](_0xf8384a)+_0x25b937(0x1bd)+JSON[_0x25b937(0x165)](_0x2ba078);try{const _0x40b517=await _0x6fcd5f['geminiModel'][_0x25b937(0xde)](_0x284e6d),_0x3d23c8=JSON[_0x25b937(0x139)](_0x40b517[_0x25b937(0x184)][_0x25b937(0x1ef)]()[_0x25b937(0x1e7)](/```json|```/g,'')[_0x25b937(0xbf)]());_0x3d23c8['baselineDrift']&&(await _0x6fcd5f[_0x25b937(0x156)](LTM_DP_DRIFT_STATUS,{'val':_0x3d23c8[_0x25b937(0xcd)],'ack':!![]}),await _0x6fcd5f['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0x3d23c8[_0x25b937(0x1d7)],'ack':!![]}),await _0x6fcd5f['setStateAsync'](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0xa76e47){}}async function sendMorningBriefing(_0x57135f){const _0x4985c4=a0_0x2d3924;if(!_0x57135f[_0x4985c4(0x205)])return;try{const _0x2b21df=_0x4985c4(0xf5),_0x30fdd9=await _0x57135f[_0x4985c4(0x205)]['generateContent'](_0x2b21df),_0x11575f=_0x30fdd9['response'][_0x4985c4(0x1ef)]();sendNotification(_0x57135f,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x11575f);}catch(_0x49432f){_0x57135f[_0x4985c4(0x15a)]['error'](_0x4985c4(0x1d8)+_0x49432f[_0x4985c4(0x179)]);}}function stopPythonService(_0xddfd37){const _0x5e4a7b=a0_0x2d3924;if(_0xddfd37[_0x5e4a7b(0x1e4)]){try{_0xddfd37[_0x5e4a7b(0x1e4)][_0x5e4a7b(0x162)]();}catch(_0x2cf12c){}_0xddfd37[_0x5e4a7b(0x1e4)]=null;}}function sendToPython(_0x49254d,_0x457929,_0x38902={}){const _0x3ca307=a0_0x2d3924;if(!_0x49254d[_0x3ca307(0x1e4)]||!_0x49254d[_0x3ca307(0x1e4)][_0x3ca307(0x234)][_0x3ca307(0x18f)])return;const _0x4d694a=JSON[_0x3ca307(0x165)]({'command':_0x457929,..._0x38902});try{_0x49254d[_0x3ca307(0x1e4)][_0x3ca307(0x234)]['write'](_0x4d694a+'\x0a');}catch(_0x5706a5){}}function a0_0x4ec3(_0x51bf8f,_0x46f265){const _0x5da17d=a0_0x5cb5();return a0_0x4ec3=function(_0x5c3f17,_0x94335b){_0x5c3f17=_0x5c3f17-0x9a;let _0x5cb52c=_0x5da17d[_0x5c3f17];return _0x5cb52c;},a0_0x4ec3(_0x51bf8f,_0x46f265);}function runPythonHealthCheck(_0x581acf){const _0xfbd92a=a0_0x2d3924;if(!_0x581acf[_0xfbd92a(0x10a)]||_0x581acf[_0xfbd92a(0x10a)][_0xfbd92a(0xc7)]<0x2)return;const _0x896550=_0x581acf[_0xfbd92a(0x10a)][_0xfbd92a(0xdc)](_0x5e9153=>{const _0xec7d06=_0xfbd92a,_0x1e9383=(_0x5e9153['activityLevel']||'')[_0xec7d06(0x141)]();return ACTIVITY_LEVEL_MAP[_0x1e9383]||0x32;});sendToPython(_0x581acf,_0xfbd92a(0x1d3),{'values':_0x896550,'tag':_0xfbd92a(0x202)});}function handlePythonResult(_0x41c286,_0x3d9044){const _0x4889c0=a0_0x2d3924;if(_0x3d9044[_0x4889c0(0xcb)]===_0x4889c0(0x138))_0x41c286[_0x4889c0(0x15a)][_0x4889c0(0x9c)](_0x4889c0(0xe6));else{if(_0x3d9044[_0x4889c0(0xcb)]===_0x4889c0(0x20f)){const {anomaly_score:_0x4b5314,is_anomaly:_0x38c868,threshold:_0xa38c29,explanation:_0x2a5df4}=_0x3d9044['payload'];_0x41c286[_0x4889c0(0x15a)]['info'](_0x4889c0(0x149)+_0x4b5314['toFixed'](0x5)+_0x4889c0(0x130)+(_0x38c868?_0x4889c0(0x211):'OK')),_0x41c286[_0x4889c0(0x156)](_0x4889c0(0xd1),{'val':_0x4b5314,'ack':!![]}),_0x41c286[_0x4889c0(0x156)](_0x4889c0(0x1c0),{'val':new Date()[_0x4889c0(0xba)](),'ack':!![]});if(_0xa38c29)_0x41c286[_0x4889c0(0x156)]('analysis.security.currentThreshold',{'val':_0xa38c29,'ack':!![]});if(_0x38c868){let _0x3e6dd9='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x4b5314[_0x4889c0(0x1b7)](0x4)+')';if(_0x2a5df4&&_0x2a5df4!==_0x4889c0(0x1c9))_0x3e6dd9+=_0x4889c0(0xc5)+_0x2a5df4;_0x41c286[_0x4889c0(0x156)](_0x4889c0(0x114),{'val':!![],'ack':!![]}),_0x41c286[_0x4889c0(0x156)](_0x4889c0(0x10b),{'val':_0x3e6dd9,'ack':!![]}),sendNotification(_0x41c286,_0x4889c0(0x15f)+_0x3e6dd9,![],!![]);}}else{if(_0x3d9044[_0x4889c0(0xcb)]===_0x4889c0(0xdb)){const _0x24d4a8=_0x3d9044[_0x4889c0(0x1a2)]['details']||'',_0x319e61=_0x3d9044[_0x4889c0(0x1a2)][_0x4889c0(0xf7)],_0x47c141=_0x3d9044[_0x4889c0(0x1a2)]['success']?'Success:\x20'+new Date()[_0x4889c0(0x1c6)]()+'\x20('+_0x24d4a8+')':_0x4889c0(0x124)+_0x3d9044['payload'][_0x4889c0(0x1b9)];_0x41c286['setStateAsync'](_0x4889c0(0x9e),{'val':_0x47c141,'ack':!![]});if(_0x3d9044[_0x4889c0(0x1a2)]['success']&&_0x319e61)_0x41c286['setStateAsync'](_0x4889c0(0x220),{'val':_0x319e61,'ack':!![]});}else{if(_0x3d9044['type']===_0x4889c0(0x1f9)){const {patterns:_0x20cdc7}=_0x3d9044[_0x4889c0(0x1a2)];if(_0x20cdc7&&_0x20cdc7[_0x4889c0(0xc7)]>0x0){_0x41c286[_0x4889c0(0x15a)][_0x4889c0(0xd8)](_0x4889c0(0x1b6)+_0x20cdc7[_0x4889c0(0xc7)]+_0x4889c0(0x100)),_0x41c286['setStateAsync']('analysis.automation.detectedPatterns',{'val':JSON[_0x4889c0(0x165)](_0x20cdc7),'ack':!![]});const _0x3fdab8=_0x20cdc7[0x0],_0x45b454=_0x4889c0(0x19f)+_0x3fdab8['rule']+'\x20('+(_0x3fdab8[_0x4889c0(0x1ab)]*0x64)[_0x4889c0(0x1b7)](0x0)+'%)';_0x41c286[_0x4889c0(0x156)](_0x4889c0(0x14f),{'val':!![],'ack':!![]}),_0x41c286[_0x4889c0(0x156)]('analysis.automation.description',{'val':_0x45b454,'ack':!![]});}else _0x41c286[_0x4889c0(0x15a)][_0x4889c0(0xd8)](_0x4889c0(0x23f)),_0x41c286[_0x4889c0(0x156)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),_0x41c286[_0x4889c0(0x156)]('analysis.automation.detectedPatterns',{'val':'[]','ack':!![]});}else{if(_0x3d9044[_0x4889c0(0xcb)]===_0x4889c0(0x14c)){if(_0x3d9044[_0x4889c0(0x1a2)][_0x4889c0(0x23a)])try{const _0x34870c=JSON[_0x4889c0(0x139)](_0x3d9044[_0x4889c0(0x1a2)][_0x4889c0(0x1aa)]);if(_0x34870c[_0x4889c0(0x118)])_0x41c286['setStateAsync']('analysis.energy.insulationScore',{'val':JSON[_0x4889c0(0x165)](_0x34870c['insulation']),'ack':!![]});if(_0x34870c[_0x4889c0(0xff)])_0x41c286[_0x4889c0(0x156)](_0x4889c0(0xa3),{'val':JSON[_0x4889c0(0x165)](_0x34870c[_0x4889c0(0xff)]),'ack':!![]});}catch(_0x29bf27){}}else{if(_0x3d9044[_0x4889c0(0xcb)]===_0x4889c0(0x18a)){if(_0x3d9044[_0x4889c0(0x1a2)][_0x4889c0(0x23a)])_0x41c286['log']['info']('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x3d9044[_0x4889c0(0xcb)]===_0x4889c0(0xdf))_0x41c286[_0x4889c0(0x156)]('analysis.health.lastCheck',{'val':new Date()[_0x4889c0(0xba)](),'ack':!![]}),_0x41c286[_0x4889c0(0x156)](_0x4889c0(0x1de),{'val':_0x3d9044[_0x4889c0(0x1a2)][_0x4889c0(0x122)],'ack':!![]});else{if(_0x3d9044[_0x4889c0(0xcb)]===_0x4889c0(0x23d))_0x41c286[_0x4889c0(0x156)]('analysis.health.trendDiagnosis',{'val':_0x3d9044[_0x4889c0(0x1a2)][_0x4889c0(0x160)],'ack':!![]}),_0x41c286['setStateAsync'](_0x4889c0(0x22b),{'val':_0x3d9044['payload']['change_percent'],'ack':!![]});else{if(_0x3d9044[_0x4889c0(0xcb)]==='GAIT_RESULT'){const {speed_trend:_0x1c1d1e}=_0x3d9044[_0x4889c0(0x1a2)];if(_0x1c1d1e!==undefined)_0x41c286['setStateAsync']('analysis.health.gaitSpeed',{'val':_0x1c1d1e,'ack':!![]});}else{if(_0x3d9044[_0x4889c0(0xcb)]===_0x4889c0(0x13a)){const {forecast:_0xf5d819}=_0x3d9044[_0x4889c0(0x1a2)];if(_0xf5d819)_0x41c286[_0x4889c0(0x156)](_0x4889c0(0x193),{'val':JSON['stringify'](_0xf5d819),'ack':!![]});}else{if(_0x3d9044[_0x4889c0(0xcb)]===_0x4889c0(0x117)){const {data:_0x5ce842}=_0x3d9044[_0x4889c0(0x1a2)];_0x5ce842&&(_0x41c286[_0x4889c0(0x15a)][_0x4889c0(0xd8)]('ðŸ•¸ï¸\x20Topology\x20Map\x20updated.'),_0x41c286[_0x4889c0(0x156)](_0x4889c0(0x1a5),{'val':JSON[_0x4889c0(0x165)](_0x5ce842),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x2b5700){const _0x54e71b=a0_0x2d3924;let _0x30dd2c=_0x54e71b(0x1ea);if(fs[_0x54e71b(0x1ce)](installer['PYTHON_EXE']))_0x30dd2c=installer[_0x54e71b(0x14b)];try{const _0x683e54=path[_0x54e71b(0x180)](__dirname,_0x54e71b(0x11f),_0x54e71b(0x1e9));_0x2b5700[_0x54e71b(0x1e4)]=spawn(_0x30dd2c,[_0x683e54]),_0x2b5700[_0x54e71b(0x1e4)]['stdout']['on'](_0x54e71b(0x1b3),_0xc153fc=>{const _0x2cb406=_0x54e71b,_0x58de35=_0xc153fc[_0x2cb406(0x1af)]()[_0x2cb406(0x106)]('\x0a');_0x58de35[_0x2cb406(0x144)](_0x20762f=>{const _0x449e8e=_0x2cb406,_0x64eea5=_0x20762f[_0x449e8e(0xbf)]();if(!_0x64eea5)return;if(_0x64eea5[_0x449e8e(0x1be)](_0x449e8e(0x105)))_0x2b5700[_0x449e8e(0x15a)][_0x449e8e(0x9c)](_0x449e8e(0x1b0)+_0x64eea5[_0x449e8e(0x15e)](0x5)[_0x449e8e(0xbf)]());else{if(_0x64eea5[_0x449e8e(0x1be)]('[RESULT]'))try{const _0x78b9ee=JSON[_0x449e8e(0x139)](_0x64eea5[_0x449e8e(0x15e)](0x8)[_0x449e8e(0xbf)]());handlePythonResult(_0x2b5700,_0x78b9ee);}catch(_0x45c831){}}});}),_0x2b5700[_0x54e71b(0x1e4)]['on'](_0x54e71b(0xe8),_0x2b2aa1=>{const _0x3c7007=_0x54e71b;_0x2b5700[_0x3c7007(0x1e4)]=null;});}catch(_0x2e8d24){_0x2b5700[_0x54e71b(0x15a)][_0x54e71b(0x16a)](_0x54e71b(0x101)+_0x2e8d24[_0x54e71b(0x179)]);}}async function runAutopilot(_0x432339){const _0x3140d7=a0_0x2d3924;_0x432339['log'][_0x3140d7(0x9c)](_0x3140d7(0x22f)),await runGeminiAnalysis(_0x432339),updateHealthVector(_0x432339),triggerGaitAnalysis(_0x432339),triggerEnergyPrediction(_0x432339);}async function triggerGaitAnalysis(_0x30e92e){const _0x546872=a0_0x2d3924;if(!_0x30e92e['isProVersion'])return;try{const _0x578331=await _0x30e92e[_0x546872(0xac)]('LTM.trainingData.sequences');_0x578331&&_0x578331['val']&&sendToPython(_0x30e92e,'ANALYZE_GAIT',{'sequences':JSON[_0x546872(0x139)](_0x578331['val'])});}catch(_0x2558e9){}}async function triggerEnergyPrediction(_0xb0c8f7){const _0x21f1ae=a0_0x2d3924;if(!_0xb0c8f7[_0x21f1ae(0x1ad)])return;try{const _0x2237c1=await getOutsideTemperatureNumeric(_0xb0c8f7);if(_0x2237c1===null)return;const _0x2a6eb4={},_0xb07b02=_0xb0c8f7['config'][_0x21f1ae(0xe3)]||[];for(const _0x616a01 of _0xb07b02){if(_0x616a01['type']==='temperature'&&_0x616a01[_0x21f1ae(0xc0)]){const _0x55a7ca=_0xb0c8f7[_0x21f1ae(0x17f)][_0x616a01['id']];if(_0x55a7ca!==undefined)_0x2a6eb4[_0x616a01['location']]=_0x55a7ca;}}Object[_0x21f1ae(0x17d)](_0x2a6eb4)[_0x21f1ae(0xc7)]>0x0&&sendToPython(_0xb0c8f7,_0x21f1ae(0x10d),{'current_temps':_0x2a6eb4,'t_out':_0x2237c1});}catch(_0x5d04ba){}}function updateHealthVector(_0x5b0600){const _0x2ce4e6=a0_0x2d3924;if(!_0x5b0600[_0x2ce4e6(0x1b8)]||_0x5b0600['rawEventLog'][_0x2ce4e6(0xc7)]===0x0)return;const _0x41003b=new Array(0x60)[_0x2ce4e6(0x1cf)](0x0),_0x3785f2=new Date()['setHours'](0x0,0x0,0x0,0x0);_0x5b0600['rawEventLog'][_0x2ce4e6(0x144)](_0x2563fd=>{const _0x193d48=_0x2ce4e6,_0x57071a=new Date(_0x2563fd[_0x193d48(0x210)]);if(_0x57071a[_0x193d48(0x1f0)]()>=_0x3785f2){const _0x1708d8=_0x57071a[_0x193d48(0xd5)](),_0x46b85b=_0x57071a[_0x193d48(0x15d)](),_0x2e37db=_0x1708d8*0x4+Math['floor'](_0x46b85b/0xf);if(_0x2e37db>=0x0&&_0x2e37db<0x60)_0x41003b[_0x2e37db]++;}}),_0x5b0600['setStateAsync']('analysis.health.todayVector',{'val':JSON[_0x2ce4e6(0x165)](_0x41003b),'ack':!![]});}async function getWeatherContext(_0x586d90){const _0x3ade48=a0_0x2d3924;if(!_0x586d90[_0x3ade48(0xda)][_0x3ade48(0xae)]||!_0x586d90[_0x3ade48(0xda)]['weatherInstance'])return _0x3ade48(0x20a);try{const _0x18cb8b=_0x586d90['config']['weatherInstance'];let _0x36b0da=await _0x586d90[_0x3ade48(0x18c)](_0x18cb8b+_0x3ade48(0x16e));if(!_0x36b0da)_0x36b0da=await _0x586d90[_0x3ade48(0x18c)](_0x18cb8b+'.forecast.current.temperature');let _0x2dd82e=await _0x586d90['getForeignStateAsync'](_0x18cb8b+'.Current.WeatherText');if(!_0x2dd82e)_0x2dd82e=await _0x586d90[_0x3ade48(0x18c)](_0x18cb8b+_0x3ade48(0x19d));if(_0x36b0da&&_0x2dd82e)return _0x36b0da[_0x3ade48(0x1c4)]+_0x3ade48(0x1a4)+_0x2dd82e[_0x3ade48(0x1c4)];}catch(_0x13b09a){}return'Keine\x20Wetterdaten\x20verfÃ¼gbar.';}async function getCalendarContext(_0x158b93){const _0x1da6db=a0_0x2d3924;if(!_0x158b93[_0x1da6db(0xda)][_0x1da6db(0x21c)]||!_0x158b93[_0x1da6db(0xda)][_0x1da6db(0x217)])return _0x1da6db(0x1fa);return _0x1da6db(0xc2);}async function getCalendarNames(_0x243c43,_0x84843d){return[];}async function saveFeedback(_0x5f07ce,_0xc2b4d){const _0x2880bd=a0_0x2d3924;_0x5f07ce['log'][_0x2880bd(0xd8)](_0x2880bd(0xaa)+_0xc2b4d['rating']);}async function runGeminiAnalysis(_0x4b31e2,_0x1c996d=''){const _0xc05242=a0_0x2d3924;if(!_0x4b31e2['geminiModel'])return;if(_0x4b31e2[_0xc05242(0x1b5)][_0xc05242(0xc7)]===0x0)return;const _0x453dd5=_0x4b31e2[_0xc05242(0x1b5)][_0xc05242(0x1c2)](0x0,0xf),_0x30a8fa=await getWeatherContext(_0x4b31e2),_0x593d26=_0x4b31e2['currentSystemMode'],_0x4539e4=PERSONA_MAPPING[_0x4b31e2['config'][_0xc05242(0xa8)]||'generic'],_0x3e5727=_0x4b31e2[_0xc05242(0xda)][_0xc05242(0x223)]||_0xc05242(0x226);let _0x5bd621=_0xc05242(0x175);try{const _0x482024=await _0x4b31e2[_0xc05242(0xac)](_0xc05242(0x23e));if(_0x482024&&_0x482024[_0xc05242(0x1c4)])_0x5bd621=_0x482024[_0xc05242(0x1c4)];}catch(_0x3bfeaa){}let _0x40694c=![];try{const _0xe4e66e=await _0x4b31e2[_0xc05242(0xac)](_0xc05242(0x16d));if(_0xe4e66e&&_0xe4e66e[_0xc05242(0x1c4)])_0x40694c=!![];}catch(_0x20926f){}const _0x37f72c=_0xc05242(0x10e)+_0x4539e4+_0xc05242(0x203)+_0x3e5727+_0xc05242(0xe7)+_0x593d26+_0xc05242(0x182)+_0x30a8fa+'.\x20ANWESEND:\x20'+_0x5bd621+_0xc05242(0x1db)+JSON[_0xc05242(0x165)](_0x453dd5)+_0xc05242(0xa6)+_0x1c996d+_0xc05242(0x185);try{const _0x31e6ec=await _0x4b31e2[_0xc05242(0x205)]['generateContent'](_0x37f72c),_0x1a8575=JSON[_0xc05242(0x139)](_0x31e6ec[_0xc05242(0x184)][_0xc05242(0x1ef)]()[_0xc05242(0x1e7)](/```json|```/g,'')[_0xc05242(0xbf)]());await _0x4b31e2[_0xc05242(0x156)](_0xc05242(0xa5),{'val':JSON['stringify'](_0x1a8575),'ack':!![]});if(_0x1a8575[_0xc05242(0x1d1)])await _0x4b31e2['setStateAsync']('analysis.activitySummary',{'val':_0x1a8575[_0xc05242(0x1d1)],'ack':!![]});const _0x284529={'timestamp':Date[_0xc05242(0xfd)](),'id':Date[_0xc05242(0xfd)]()[_0xc05242(0x1af)](),'analysis':{'activity':{'summary':_0x1a8575[_0xc05242(0x1d1)],'isAlert':_0x1a8575['isAlert'],'alertReason':_0x1a8575[_0xc05242(0xc4)]},'comfort':{'automationProposal':_0x1a8575[_0xc05242(0x113)]}}};await updateAnalysisHistory(_0x4b31e2,_0x284529);const _0x8a16aa=_0x1a8575[_0xc05242(0x231)]||![];_0x8a16aa!==_0x4b31e2[_0xc05242(0x145)]&&(await _0x4b31e2[_0xc05242(0x156)](_0xc05242(0x114),{'val':_0x8a16aa,'ack':!![]}),_0x4b31e2[_0xc05242(0x145)]=_0x8a16aa,_0x8a16aa&&(await _0x4b31e2[_0xc05242(0x156)](_0xc05242(0x10b),{'val':_0x1a8575[_0xc05242(0xc4)],'ack':!![]}),sendNotification(_0x4b31e2,_0xc05242(0x13b)+_0x1a8575['alertReason'],![],_0x1a8575[_0xc05242(0xfb)])));if(_0x1a8575[_0xc05242(0x113)]&&_0x1a8575[_0xc05242(0x113)][_0xc05242(0x21e)]){await _0x4b31e2[_0xc05242(0x156)](_0xc05242(0x14f),{'val':!![],'ack':!![]}),await _0x4b31e2['setStateAsync']('analysis.automation.description',{'val':_0x1a8575[_0xc05242(0x113)]['description'],'ack':!![]}),await _0x4b31e2['setStateAsync'](_0xc05242(0x12d),{'val':_0x1a8575['automationProposal'][_0xc05242(0x212)],'ack':!![]}),await _0x4b31e2[_0xc05242(0x156)](_0xc05242(0x1cb),{'val':JSON[_0xc05242(0x165)](_0x1a8575[_0xc05242(0x113)][_0xc05242(0x1d0)]),'ack':!![]});if(_0x40694c)executeAutomationAction(_0x4b31e2);}}catch(_0xfd86c5){_0x4b31e2[_0xc05242(0x15a)][_0xc05242(0x16a)](_0xc05242(0x13d)+_0xfd86c5['message']);}}async function startSystem(_0x52ce7c){const _0x4e8870=a0_0x2d3924;_0x52ce7c[_0x4e8870(0x15a)][_0x4e8870(0xd8)](_0x4e8870(0x110)),await initZombies(_0x52ce7c);try{_0x52ce7c[_0x4e8870(0x1ad)]=await checkLicense(_0x52ce7c['config'][_0x4e8870(0x1f2)]);}catch(_0x552170){}if(!_0x52ce7c['config'][_0x4e8870(0xbd)]||_0x52ce7c[_0x4e8870(0xda)][_0x4e8870(0xbd)]<0.1)_0x52ce7c[_0x4e8870(0xda)][_0x4e8870(0xbd)]=0xc;await initHistory(_0x52ce7c),await initSystemConfig(_0x52ce7c);if(_0x52ce7c[_0x4e8870(0xda)][_0x4e8870(0x128)])try{_0x52ce7c[_0x4e8870(0x103)]=new GoogleGenerativeAI(_0x52ce7c[_0x4e8870(0xda)]['geminiApiKey']),_0x52ce7c[_0x4e8870(0x205)]=_0x52ce7c[_0x4e8870(0x103)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),_0x52ce7c['log']['info'](_0x4e8870(0x115));}catch(_0x397395){_0x52ce7c[_0x4e8870(0x15a)][_0x4e8870(0x16a)]('Gemini\x20Init\x20Error:\x20'+_0x397395[_0x4e8870(0x179)]);}await createAllObjects(_0x52ce7c),await loadSystemMode(_0x52ce7c),await loadRawEventLog(_0x52ce7c),await loadDailyDigests(_0x52ce7c),_0x52ce7c[_0x4e8870(0xf4)](_0x4e8870(0x1fb)),_0x52ce7c[_0x4e8870(0xf4)](LTM_DP_TRIGGER_DIGEST),_0x52ce7c[_0x4e8870(0xf4)](_0x4e8870(0x154)),_0x52ce7c[_0x4e8870(0xf4)](_0x4e8870(0x135)),_0x52ce7c[_0x4e8870(0xf4)](_0x4e8870(0xe0)),_0x52ce7c['subscribeStates'](_0x4e8870(0x16d)),_0x52ce7c[_0x4e8870(0xf4)](_0x4e8870(0x21d)),_0x52ce7c[_0x4e8870(0xf4)](_0x4e8870(0x11b)),_0x52ce7c['subscribeStates'](_0x4e8870(0x126)),_0x52ce7c[_0x4e8870(0xf4)]('analysis.training.triggerComfort'),_0x52ce7c[_0x4e8870(0xf4)](_0x4e8870(0x1ba)),await initSensorSubscriptions(_0x52ce7c),await initPresenceSubscriptions(_0x52ce7c),await setupTelegramListener(_0x52ce7c),setTimeout(()=>checkWifiPresence(_0x52ce7c),0x1388);if(_0x52ce7c[_0x4e8870(0x108)])clearInterval(_0x52ce7c[_0x4e8870(0x108)]);const _0x452a2c=_0x52ce7c['config'][_0x4e8870(0x22d)]||0xf;_0x452a2c>0x0&&(_0x52ce7c[_0x4e8870(0x108)]=setInterval(()=>{runAutopilot(_0x52ce7c);},_0x452a2c*0x3c*0x3e8)),schedulers[_0x4e8870(0xa0)](_0x52ce7c,()=>createDailyDigest(_0x52ce7c)),schedulers['setupModeResetScheduler'](_0x52ce7c),schedulers[_0x4e8870(0x11c)](_0x52ce7c,()=>runBaselineDriftAnalysis(_0x52ce7c)),schedulers[_0x4e8870(0x237)](_0x52ce7c,()=>sendMorningBriefing(_0x52ce7c)),startPythonService(_0x52ce7c),setTimeout(()=>{_0x52ce7c['pythonProcess']&&(runPythonHealthCheck(_0x52ce7c),triggerGaitAnalysis(_0x52ce7c),triggerEnergyPrediction(_0x52ce7c)),updateHealthVector(_0x52ce7c);},0x1388);}class CogniLiving extends utils[a0_0x2d3924(0x1a3)]{constructor(_0x2ea114){const _0x3d76cd=a0_0x2d3924;super({..._0x2ea114,'name':'cogni-living'}),this[_0x3d76cd(0x1b5)]=[],this['analysisHistory']=[],this[_0x3d76cd(0x1b8)]=[],this[_0x3d76cd(0x10a)]=[],this[_0x3d76cd(0x17f)]={},this[_0x3d76cd(0x14d)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x3d76cd(0x238)]=null,this[_0x3d76cd(0x20c)]=null,this['isGracePeriodActive']=![],this['genAI']=null,this['geminiModel']=null,this[_0x3d76cd(0x172)]=SYSTEM_MODES[_0x3d76cd(0x235)],this[_0x3d76cd(0x1ad)]=![],this[_0x3d76cd(0x145)]=![],this[_0x3d76cd(0x178)]=_0x3d76cd(0x155),this['analysisTimer']=null,this[_0x3d76cd(0x1f1)]=null,this[_0x3d76cd(0x131)]=null,this[_0x3d76cd(0x12e)]=null,this['briefingJob']=null,this[_0x3d76cd(0x1e4)]=null,this[_0x3d76cd(0x1fc)]=![],this['on']('ready',this['onReady'][_0x3d76cd(0x18e)](this)),this['on'](_0x3d76cd(0x233),this['onStateChange']['bind'](this)),this['on'](_0x3d76cd(0x1f4),this[_0x3d76cd(0x22a)]['bind'](this)),this['on'](_0x3d76cd(0x179),this['onMessage']['bind'](this));}async[a0_0x2d3924(0x213)](){const _0x47ceb6=a0_0x2d3924;this['log'][_0x47ceb6(0xd8)](_0x47ceb6(0x17b)+this[_0x47ceb6(0x1e3)]+_0x47ceb6(0xb4));if(!installer['checkAndInstall'](this,()=>startSystem(this)))return;}[a0_0x2d3924(0x22a)](_0x300e21){const _0xbbf04=a0_0x2d3924;if(this[_0xbbf04(0x108)])clearInterval(this['analysisTimer']);if(this['driftAnalysisTimer'])clearInterval(this['driftAnalysisTimer']);if(this['ltmJob'])this[_0xbbf04(0x1f1)][_0xbbf04(0xd3)]();if(this[_0xbbf04(0x131)])this['modeResetJob'][_0xbbf04(0xd3)]();if(this[_0xbbf04(0x11d)])this[_0xbbf04(0x11d)][_0xbbf04(0xd3)]();if(this[_0xbbf04(0x238)])clearTimeout(this['exitTimer']);if(this[_0xbbf04(0x20c)])clearTimeout(this[_0xbbf04(0x20c)]);stopPythonService(this),_0x300e21();}async['onStateChange'](_0x332c6f,_0x32990b){const _0x51de79=a0_0x2d3924;if(!_0x32990b||this[_0x51de79(0x1fc)])return;if(_0x332c6f[_0x51de79(0x109)](_0x51de79(0x236))&&_0x332c6f['endsWith'](_0x51de79(0x189))&&_0x32990b['val']){await handleTelegramResponse(this,_0x32990b[_0x51de79(0x1c4)]);return;}if(_0x332c6f===this['namespace']+'.'+SYSTEM_DP_MODE){if(_0x32990b[_0x51de79(0x1c4)]&&Object[_0x51de79(0x151)](SYSTEM_MODES)['includes'](_0x32990b['val'])){this[_0x51de79(0x172)]=_0x32990b[_0x51de79(0x1c4)];if(_0x32990b[_0x51de79(0x1c4)]===SYSTEM_MODES[_0x51de79(0x20d)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x32990b['ack'])this[_0x51de79(0x1bb)](_0x332c6f,{'val':this[_0x51de79(0x172)],'ack':!![]});return;}if(!_0x32990b[_0x51de79(0xf8)]){_0x332c6f[_0x51de79(0x109)](_0x51de79(0x1fb))&&_0x32990b[_0x51de79(0x1c4)]&&(this[_0x51de79(0x1bb)](_0x332c6f,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x332c6f[_0x51de79(0x109)](_0x51de79(0x173))&&_0x32990b[_0x51de79(0x1c4)]){this[_0x51de79(0x1bb)](_0x332c6f,{'val':![],'ack':!![]});if(this[_0x51de79(0x1ad)])createDailyDigest(this);}_0x332c6f[_0x51de79(0x109)](_0x51de79(0x19b))&&_0x32990b['val']&&(this[_0x51de79(0x1bb)](_0x332c6f,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x332c6f[_0x51de79(0x109)](_0x51de79(0x12a))&&_0x32990b[_0x51de79(0x1c4)]&&(this[_0x51de79(0x1bb)](_0x332c6f,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x332c6f[_0x51de79(0x109)](_0x51de79(0x21d))&&_0x32990b[_0x51de79(0x1c4)]){this[_0x51de79(0x1bb)](_0x332c6f,{'val':![],'ack':!![]});if(this[_0x51de79(0x1ad)])try{const _0x2f6082=await this[_0x51de79(0xac)](_0x51de79(0x221));if(_0x2f6082&&_0x2f6082['val']){const _0x534db8=JSON['parse'](_0x2f6082['val']);this[_0x51de79(0x15a)]['info'](_0x51de79(0x13c)),this['setStateAsync'](_0x51de79(0x9e),{'val':_0x51de79(0x23c),'ack':!![]}),sendToPython(this,'TRAIN_SECURITY',{'sequences':_0x534db8});}}catch(_0x27e0cc){this[_0x51de79(0x15a)][_0x51de79(0x16a)](_0x51de79(0xa1)+_0x27e0cc[_0x51de79(0x179)]);}}if(_0x332c6f[_0x51de79(0x109)](_0x51de79(0x11b))&&_0x32990b[_0x51de79(0x1c4)]){this[_0x51de79(0x1bb)](_0x332c6f,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x3c77f8=await this[_0x51de79(0xac)](LTM_DP_DAILY_DIGESTS);if(_0x3c77f8&&_0x3c77f8[_0x51de79(0x1c4)])sendToPython(this,_0x51de79(0x16c),{'digests':JSON['parse'](_0x3c77f8[_0x51de79(0x1c4)])});}catch(_0x282bfa){}}if(_0x332c6f['includes']('analysis.training.triggerEnergy')&&_0x32990b['val']){this['setState'](_0x332c6f,{'val':![],'ack':!![]});if(this[_0x51de79(0x1ad)])try{const _0x26ddf1=await this[_0x51de79(0xac)](_0x51de79(0xf9));if(_0x26ddf1&&_0x26ddf1[_0x51de79(0x1c4)])sendToPython(this,_0x51de79(0x190),{'points':JSON['parse'](_0x26ddf1[_0x51de79(0x1c4)])});}catch(_0x5b936f){}}if(_0x332c6f[_0x51de79(0x109)](_0x51de79(0x134))&&_0x32990b['val']){this[_0x51de79(0x1bb)](_0x332c6f,{'val':![],'ack':!![]});if(this[_0x51de79(0x1ad)])try{const _0x180217=await this[_0x51de79(0xac)](LTM_DP_RAW_LOG);_0x180217&&_0x180217[_0x51de79(0x1c4)]&&(this['log']['info'](_0x51de79(0x1ff)),sendToPython(this,_0x51de79(0xd9),{'events':JSON[_0x51de79(0x139)](_0x180217['val'])}));}catch(_0x14f6f2){}}if(_0x332c6f[_0x51de79(0x109)]('analysis.training.triggerTopology')&&_0x32990b[_0x51de79(0x1c4)]){this[_0x51de79(0x1bb)](_0x332c6f,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x5f1fda=await this[_0x51de79(0xac)](_0x51de79(0x221));if(_0x5f1fda&&_0x5f1fda[_0x51de79(0x1c4)]){const _0x135bc6=JSON[_0x51de79(0x139)](_0x5f1fda[_0x51de79(0x1c4)]);this[_0x51de79(0x15a)][_0x51de79(0xd8)](_0x51de79(0x12c)),sendToPython(this,_0x51de79(0x158),{'sequences':_0x135bc6});}}catch(_0x3eea0d){this[_0x51de79(0x15a)][_0x51de79(0x16a)](_0x51de79(0x1d6)+_0x3eea0d[_0x51de79(0x179)]);}}return;}if(this[_0x51de79(0xda)][_0x51de79(0xfc)]&&this[_0x51de79(0xda)]['presenceDevices'][_0x51de79(0x109)](_0x332c6f)){await checkWifiPresence(this);return;}const _0x3e5be8=(this[_0x51de79(0xda)][_0x51de79(0xe3)]||[])[_0x51de79(0x1d5)](_0x712f45=>_0x712f45['id']===_0x332c6f);if(_0x3e5be8)processSensorEvent(this,_0x332c6f,_0x32990b,_0x3e5be8);}async['onMessage'](_0x25b859){const _0x5ac6c6=a0_0x2d3924;if(typeof _0x25b859==='object'&&_0x25b859['message']){if(_0x25b859['command']===_0x5ac6c6(0x116)){const _0xa45314=_0x25b859['message'][_0x5ac6c6(0x1c7)]||this[_0x5ac6c6(0xda)][_0x5ac6c6(0x128)];if(!_0xa45314)return this[_0x5ac6c6(0x18b)](_0x25b859[_0x5ac6c6(0x161)],_0x25b859[_0x5ac6c6(0x1d2)],{'success':![],'message':_0x5ac6c6(0x13e)},_0x25b859[_0x5ac6c6(0x127)]);try{const _0x3783ee=new GoogleGenerativeAI(_0xa45314),_0x56d081=_0x3783ee[_0x5ac6c6(0x123)]({'model':GEMINI_MODEL}),_0x2fafdb=await _0x56d081[_0x5ac6c6(0xde)]('Hi');this[_0x5ac6c6(0x18b)](_0x25b859[_0x5ac6c6(0x161)],_0x25b859[_0x5ac6c6(0x1d2)],{'success':!![],'message':_0x5ac6c6(0x148)+_0x2fafdb['response'][_0x5ac6c6(0x1ef)]()},_0x25b859[_0x5ac6c6(0x127)]);}catch(_0x44e769){this[_0x5ac6c6(0x18b)](_0x25b859[_0x5ac6c6(0x161)],_0x25b859[_0x5ac6c6(0x1d2)],{'success':![],'message':_0x5ac6c6(0x1e8)+_0x44e769[_0x5ac6c6(0x179)]},_0x25b859['callback']);}}else{if(_0x25b859[_0x5ac6c6(0x1d2)]===_0x5ac6c6(0x102)){const _0x4d510b=await getWeatherContext(this),_0x386bd0=await getCalendarContext(this);this['sendTo'](_0x25b859[_0x5ac6c6(0x161)],_0x25b859[_0x5ac6c6(0x1d2)],{'success':!![],'weather':_0x4d510b,'calendar':_0x386bd0},_0x25b859[_0x5ac6c6(0x127)]);}else{if(_0x25b859[_0x5ac6c6(0x1d2)]===_0x5ac6c6(0x200)){if(!this['isProVersion'])return this[_0x5ac6c6(0x18b)](_0x25b859[_0x5ac6c6(0x161)],_0x25b859[_0x5ac6c6(0x1d2)],{'success':![],'isPro':![]},_0x25b859[_0x5ac6c6(0x127)]);let _0x46f3ba={'status':_0x5ac6c6(0xc9)};try{const _0x5c9750=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x46f3ba['status']=_0x5c9750?_0x5c9750[_0x5ac6c6(0x1c4)]:'N/A';}catch(_0x5e31c8){}this[_0x5ac6c6(0x18b)](_0x25b859[_0x5ac6c6(0x161)],_0x25b859[_0x5ac6c6(0x1d2)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x46f3ba,'analysisHistory':this[_0x5ac6c6(0x125)]},_0x25b859[_0x5ac6c6(0x127)]);}else{if(_0x25b859[_0x5ac6c6(0x1d2)]===_0x5ac6c6(0x1f5)){const _0x3cd4e9=this[_0x5ac6c6(0x10a)][_0x5ac6c6(0xc7)],_0x31bce9=new Date(),_0x2730a8=new Date(_0x31bce9[_0x5ac6c6(0xaf)](),_0x31bce9[_0x5ac6c6(0x194)](),_0x31bce9[_0x5ac6c6(0x1fd)]())['getTime'](),_0x364136=this[_0x5ac6c6(0x1b8)]['filter'](_0x34ca55=>new Date(_0x34ca55[_0x5ac6c6(0x210)])[_0x5ac6c6(0x1f0)]()>_0x2730a8)[_0x5ac6c6(0xc7)],_0x12fb43=new Array(0x18)[_0x5ac6c6(0x1cf)](0x0);this['rawEventLog'][_0x5ac6c6(0x144)](_0x38ac3d=>{const _0x8324b5=_0x5ac6c6,_0x333c12=new Date(_0x38ac3d[_0x8324b5(0x210)]);if(_0x333c12['getTime']()>_0x2730a8)_0x12fb43[_0x333c12[_0x8324b5(0xd5)]()]++;});let _0x3b1759={'status':'N/A'};try{const _0xfacfde=await this[_0x5ac6c6(0xac)](LTM_DP_DRIFT_STATUS);_0x3b1759[_0x5ac6c6(0x1bf)]=_0xfacfde?_0xfacfde[_0x5ac6c6(0x1c4)]:_0x5ac6c6(0xc9);}catch(_0x403497){}let _0x3b6393='';try{const _0x1004ce=await this[_0x5ac6c6(0xac)](_0x5ac6c6(0x23e));_0x3b6393=_0x1004ce?_0x1004ce[_0x5ac6c6(0x1c4)]:'';}catch(_0x1b695d){}let _0x453e0d=null;!this[_0x5ac6c6(0x205)]&&(_0x453e0d=this[_0x5ac6c6(0xda)][_0x5ac6c6(0x128)]?_0x5ac6c6(0x216):'Kein\x20API\x20Key!');let _0x2b68a9={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x55a5cb=await this[_0x5ac6c6(0xac)](_0x5ac6c6(0x14f));if(_0x55a5cb&&_0x55a5cb[_0x5ac6c6(0x1c4)]){_0x2b68a9[_0x5ac6c6(0x21e)]=!![];const _0x441ed7=await this[_0x5ac6c6(0xac)]('analysis.automation.description');_0x2b68a9[_0x5ac6c6(0x224)]=_0x441ed7?_0x441ed7[_0x5ac6c6(0x1c4)]:'';const _0x4865be=await this[_0x5ac6c6(0xac)](_0x5ac6c6(0x12d));_0x2b68a9[_0x5ac6c6(0x212)]=_0x4865be?_0x4865be[_0x5ac6c6(0x1c4)]:'';const _0x3e71b3=await this[_0x5ac6c6(0xac)](_0x5ac6c6(0x1cb));_0x2b68a9[_0x5ac6c6(0x1d0)]=_0x3e71b3?_0x3e71b3[_0x5ac6c6(0x1c4)]:'';}const _0xd645b6=await this[_0x5ac6c6(0xac)](_0x5ac6c6(0x16d));_0x2b68a9[_0x5ac6c6(0x199)]=_0xd645b6?!!_0xd645b6['val']:![];}catch(_0x518064){}this[_0x5ac6c6(0x18b)](_0x25b859[_0x5ac6c6(0x161)],_0x25b859[_0x5ac6c6(0x1d2)],{'success':!![],'eventHistory':this[_0x5ac6c6(0x1b5)][_0x5ac6c6(0x1c2)](0x0,0xf),'stats':{'digestCount':_0x3cd4e9,'eventCountToday':_0x364136,'hourlyActivity':_0x12fb43,'driftStatus':_0x3b1759[_0x5ac6c6(0x1bf)],'isPresent':this[_0x5ac6c6(0xc1)],'presenceWho':_0x3b6393,'minDays':this[_0x5ac6c6(0xda)]['minDaysForBaseline']||0x7,'stbDays':this[_0x5ac6c6(0xda)]['ltmStbWindowDays']||0xe,'ltbDays':this[_0x5ac6c6(0xda)][_0x5ac6c6(0x169)]||0x3c,'systemError':_0x453e0d},'automation':_0x2b68a9},_0x25b859[_0x5ac6c6(0x127)]);}else{if(_0x25b859[_0x5ac6c6(0x1d2)]==='scanDevices')try{const _0x3f500e=await scanner[_0x5ac6c6(0x20e)](this,_0x25b859[_0x5ac6c6(0x179)]||{});this[_0x5ac6c6(0x18b)](_0x25b859[_0x5ac6c6(0x161)],_0x25b859['command'],{'success':!![],'devices':_0x3f500e},_0x25b859[_0x5ac6c6(0x127)]);}catch(_0x2a9197){this['sendTo'](_0x25b859[_0x5ac6c6(0x161)],_0x25b859[_0x5ac6c6(0x1d2)],{'success':![],'error':_0x2a9197['message']},_0x25b859['callback']);}else{if(_0x25b859['command']==='getEnums'){const _0x4c907c=await this[_0x5ac6c6(0x22e)](_0x5ac6c6(0x10f),_0x5ac6c6(0x170)),_0x1519c3=[];if(_0x4c907c)for(const _0xd43d06 in _0x4c907c){const _0x27fa05=_0x4c907c[_0xd43d06],_0x5c1e56=(_0x27fa05['common']&&typeof _0x27fa05[_0x5ac6c6(0x163)]['name']==='object'?_0x27fa05[_0x5ac6c6(0x163)][_0x5ac6c6(0x104)]['de']:_0x27fa05['common'][_0x5ac6c6(0x104)])||_0x27fa05[_0x5ac6c6(0x163)][_0x5ac6c6(0x104)];_0x1519c3[_0x5ac6c6(0x1b2)]({'id':_0xd43d06,'name':_0x5c1e56});}const _0xf47319=await this['getForeignObjectsAsync'](_0x5ac6c6(0xbb),_0x5ac6c6(0x170)),_0x8a3ecc=[];if(_0xf47319)for(const _0x725fd5 in _0xf47319){const _0xde52b7=_0xf47319[_0x725fd5],_0x3deed6=(_0xde52b7[_0x5ac6c6(0x163)]&&typeof _0xde52b7[_0x5ac6c6(0x163)][_0x5ac6c6(0x104)]===_0x5ac6c6(0x1c1)?_0xde52b7[_0x5ac6c6(0x163)][_0x5ac6c6(0x104)]['de']:_0xde52b7['common']['name'])||_0x725fd5['split']('.')['pop']();_0x8a3ecc[_0x5ac6c6(0x1b2)](_0x3deed6);}this[_0x5ac6c6(0x18b)](_0x25b859[_0x5ac6c6(0x161)],_0x25b859[_0x5ac6c6(0x1d2)],{'success':!![],'enums':_0x1519c3,'rooms':_0x8a3ecc},_0x25b859[_0x5ac6c6(0x127)]);}else{if(_0x25b859[_0x5ac6c6(0x1d2)]==='getCalendarNames'){const _0x394596=_0x25b859[_0x5ac6c6(0x179)][_0x5ac6c6(0x219)];if(!_0x394596)return this[_0x5ac6c6(0x18b)](_0x25b859[_0x5ac6c6(0x161)],_0x25b859['command'],{'success':![],'error':_0x5ac6c6(0x164)},_0x25b859[_0x5ac6c6(0x127)]);const _0x14c61d=await getCalendarNames(this,_0x394596);this[_0x5ac6c6(0x18b)](_0x25b859[_0x5ac6c6(0x161)],_0x25b859[_0x5ac6c6(0x1d2)],{'success':!![],'names':_0x14c61d},_0x25b859[_0x5ac6c6(0x127)]);}else{if(_0x25b859[_0x5ac6c6(0x1d2)]===_0x5ac6c6(0x204)){const {targetId:_0x2766ba,targetValue:_0x52ec6c}=_0x25b859[_0x5ac6c6(0x179)];this[_0x5ac6c6(0x15a)]['info'](_0x5ac6c6(0x15c)+_0x2766ba+'\x20=\x20'+_0x52ec6c),await this[_0x5ac6c6(0x156)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this['setStateAsync'](_0x5ac6c6(0x232),{'val':_0x5ac6c6(0x153)+_0x2766ba,'ack':!![]}),await this[_0x5ac6c6(0x156)](_0x5ac6c6(0x12d),{'val':_0x2766ba,'ack':!![]}),await this[_0x5ac6c6(0x156)](_0x5ac6c6(0x1cb),{'val':_0x52ec6c,'ack':!![]}),this[_0x5ac6c6(0x18b)](_0x25b859[_0x5ac6c6(0x161)],_0x25b859[_0x5ac6c6(0x1d2)],{'success':!![]},_0x25b859[_0x5ac6c6(0x127)]);}else{if(_0x25b859[_0x5ac6c6(0x1d2)]===_0x5ac6c6(0xe2)){const {historyId:_0x4703b5,rating:_0x18212d,comment:_0x18e4b8,alertReason:_0x57ed67}=_0x25b859[_0x5ac6c6(0x179)];_0x4703b5&&_0x18212d?(await saveFeedback(this,{'timestamp':Date['now'](),'historyId':_0x4703b5,'rating':_0x18212d,'comment':_0x18e4b8,'alertReason':_0x57ed67}),this[_0x5ac6c6(0x18b)](_0x25b859['from'],_0x25b859['command'],{'success':!![]},_0x25b859[_0x5ac6c6(0x127)])):this[_0x5ac6c6(0x18b)](_0x25b859[_0x5ac6c6(0x161)],_0x25b859[_0x5ac6c6(0x1d2)],{'success':![],'error':'Missing\x20data'},_0x25b859['callback']);}else _0x25b859['command']===_0x5ac6c6(0xf6)&&(this['log'][_0x5ac6c6(0xd8)](_0x5ac6c6(0x152)),await this[_0x5ac6c6(0x156)](_0x5ac6c6(0x14f),{'val':![],'ack':!![]}),await this[_0x5ac6c6(0x156)]('analysis.automation.description',{'val':'','ack':!![]}),this[_0x5ac6c6(0x18b)](_0x25b859[_0x5ac6c6(0x161)],_0x25b859[_0x5ac6c6(0x1d2)],{'success':!![]},_0x25b859[_0x5ac6c6(0x127)]));}}}}}}}}}}}if(require[a0_0x2d3924(0x198)]!==module)module[a0_0x2d3924(0x188)]=_0x3acfa7=>new CogniLiving(_0x3acfa7);else new CogniLiving();