function a0_0x43eb(_0x1bb49f,_0xc9f322){const _0x11a37d=a0_0xf66f();return a0_0x43eb=function(_0xe4ed4b,_0x94ff1c){_0xe4ed4b=_0xe4ed4b-0xbc;let _0xf66f8f=_0x11a37d[_0xe4ed4b];return _0xf66f8f;},a0_0x43eb(_0x1bb49f,_0xc9f322);}const a0_0x1fe281=a0_0x43eb;(function(_0x249e5f,_0x41d245){const _0x3431d4=a0_0x43eb,_0x315c29=_0x249e5f();while(!![]){try{const _0xf6179f=-parseInt(_0x3431d4(0x15f))/0x1*(-parseInt(_0x3431d4(0x120))/0x2)+parseInt(_0x3431d4(0xbf))/0x3+parseInt(_0x3431d4(0xd4))/0x4+parseInt(_0x3431d4(0xe1))/0x5*(parseInt(_0x3431d4(0x11b))/0x6)+-parseInt(_0x3431d4(0xc1))/0x7+parseInt(_0x3431d4(0x151))/0x8*(parseInt(_0x3431d4(0xda))/0x9)+parseInt(_0x3431d4(0x172))/0xa*(-parseInt(_0x3431d4(0x188))/0xb);if(_0xf6179f===_0x41d245)break;else _0x315c29['push'](_0x315c29['shift']());}catch(_0x56e982){_0x315c29['push'](_0x315c29['shift']());}}}(a0_0xf66f,0x5b7dd));const a0_0x94ff1c=(function(){let _0x537bea=!![];return function(_0x36c726,_0x2165f4){const _0x41ebd3=_0x537bea?function(){if(_0x2165f4){const _0x369ca2=_0x2165f4['apply'](_0x36c726,arguments);return _0x2165f4=null,_0x369ca2;}}:function(){};return _0x537bea=![],_0x41ebd3;};}()),a0_0xe4ed4b=a0_0x94ff1c(this,function(){const _0xb917f8=a0_0x43eb;return a0_0xe4ed4b[_0xb917f8(0xe2)]()[_0xb917f8(0x1a7)](_0xb917f8(0x128))['toString']()[_0xb917f8(0x187)](a0_0xe4ed4b)[_0xb917f8(0x1a7)](_0xb917f8(0x128));});a0_0xe4ed4b();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x1fe281(0x15d)),installer=require(a0_0x1fe281(0x13c)),scanner=require(a0_0x1fe281(0x161)),schedulers=require(a0_0x1fe281(0xf6)),topology=require(a0_0x1fe281(0xdb)),setup=require(a0_0x1fe281(0x119)),recorder=require(a0_0x1fe281(0xbc)),pythonBridge=require(a0_0x1fe281(0x197)),aiAgent=require(a0_0x1fe281(0x18e)),deadMan=require(a0_0x1fe281(0x101)),automation=require(a0_0x1fe281(0x159)),GEMINI_MODEL='models/gemini-flash-latest',ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils['Adapter']{constructor(_0x635ea0){const _0x846c85=a0_0x1fe281;super({..._0x635ea0,'name':_0x846c85(0xce)}),this[_0x846c85(0x12d)]=[],this[_0x846c85(0x138)]=[],this[_0x846c85(0x14d)]=[],this[_0x846c85(0x191)]=[],this[_0x846c85(0xe9)]={},this[_0x846c85(0x16f)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x846c85(0xef)]=!![],this[_0x846c85(0x127)]=null,this[_0x846c85(0x142)]=null,this[_0x846c85(0xbe)]=![],this[_0x846c85(0xdc)]=null,this[_0x846c85(0x1a8)]=null,this[_0x846c85(0x177)]=setup[_0x846c85(0x173)]['NORMAL'],this[_0x846c85(0x109)]=![],this[_0x846c85(0x183)]=![],this[_0x846c85(0x1b1)]=null,this[_0x846c85(0xe0)]=null,this[_0x846c85(0xea)]=null,this[_0x846c85(0x13d)]=null,this['briefingJob']=null,this['dependencyInstallInProgress']=![],this['on'](_0x846c85(0xd8),this[_0x846c85(0x1b3)][_0x846c85(0xc4)](this)),this['on']('stateChange',this[_0x846c85(0x132)][_0x846c85(0xc4)](this)),this['on'](_0x846c85(0x11c),this[_0x846c85(0x1b0)][_0x846c85(0xc4)](this)),this['on']('message',this[_0x846c85(0xe3)][_0x846c85(0xc4)](this));}async['onReady'](){const _0x37235c=a0_0x1fe281;this[_0x37235c(0x1af)]['info'](_0x37235c(0x1a1)+this[_0x37235c(0x15e)]+_0x37235c(0xf2));if(!installer['checkAndInstall'](this,()=>this[_0x37235c(0xc8)]()))return;}async['startSystem'](){const _0x142548=a0_0x1fe281;await setup[_0x142548(0x139)](this);try{this[_0x142548(0x109)]=await setup['checkLicense'](this[_0x142548(0x18c)][_0x142548(0x113)]);}catch(_0x4455ea){}if(!this[_0x142548(0x18c)][_0x142548(0xf1)]||this[_0x142548(0x18c)][_0x142548(0xf1)]<0.1)this[_0x142548(0x18c)][_0x142548(0xf1)]=0xc;await setup[_0x142548(0xeb)](this),await setup[_0x142548(0x170)](this);if(this[_0x142548(0x18c)]['geminiApiKey'])try{this[_0x142548(0xdc)]=new GoogleGenerativeAI(this[_0x142548(0x18c)][_0x142548(0x13e)]),this['geminiModel']=this[_0x142548(0xdc)][_0x142548(0x123)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x142548(0x1af)][_0x142548(0x182)](_0x142548(0x176));}catch(_0x4c94d7){this[_0x142548(0x1af)]['error'](_0x142548(0xd3)+_0x4c94d7[_0x142548(0x133)]);}await setup['createAllObjects'](this),await this[_0x142548(0x1b5)](),await this[_0x142548(0x171)](_0x142548(0x107),{'type':'state','common':{'name':_0x142548(0x148),'type':_0x142548(0x15b),'role':_0x142548(0xf7),'read':!![],'write':![]},'native':{}}),await this[_0x142548(0x171)](_0x142548(0x102),{'type':_0x142548(0x14f),'common':{'name':_0x142548(0x10c),'type':_0x142548(0x15b),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x142548(0x171)](_0x142548(0x18a),{'type':_0x142548(0x14f),'common':{'name':_0x142548(0xca),'type':'string','role':'json','read':!![],'write':![]},'native':{}});try{const _0x4e664f=await this[_0x142548(0xe6)](_0x142548(0xf0));if(_0x4e664f&&_0x4e664f['val'])this['rawEventLog']=JSON['parse'](_0x4e664f['val']);}catch(_0x3a5922){this['rawEventLog']=[];}try{const _0x3a8409=await this[_0x142548(0xe6)](_0x142548(0x1b7));if(_0x3a8409&&_0x3a8409['val'])this[_0x142548(0x191)]=JSON[_0x142548(0x154)](_0x3a8409[_0x142548(0x164)]);}catch(_0x360ec7){this['dailyDigests']=[];}const _0x3e7d1c=this[_0x142548(0x191)][_0x142548(0x14e)]>=(this[_0x142548(0x18c)]['minDaysForBaseline']||0x7)?'Aktiv\x20('+this[_0x142548(0x191)][_0x142548(0x14e)]+_0x142548(0xec):_0x142548(0xee)+this[_0x142548(0x191)][_0x142548(0x14e)]+'/'+(this[_0x142548(0x18c)]['minDaysForBaseline']||0x7)+')';await this[_0x142548(0x19b)]('LTM.baselineStatus',{'val':_0x3e7d1c,'ack':!![]}),this['subscribeStates'](_0x142548(0x18d)),this[_0x142548(0x118)]('LTM.triggerDailyDigest'),this[_0x142548(0x118)](_0x142548(0xdf)),this[_0x142548(0x118)]('analysis.triggerBriefing'),this[_0x142548(0x118)](_0x142548(0x106)),this['subscribeStates'](_0x142548(0x184)),this[_0x142548(0x118)](_0x142548(0x199)),this['subscribeStates']('analysis.training.triggerHealth'),this[_0x142548(0x118)](_0x142548(0x129)),this[_0x142548(0x118)](_0x142548(0xbd)),this[_0x142548(0x118)]('analysis.training.triggerTopology'),this[_0x142548(0x118)]('analysis.energy.mpcActive');const _0x21b989=this[_0x142548(0x18c)][_0x142548(0x158)];if(_0x21b989)for(const _0x3d0c8e of _0x21b989){await this['subscribeForeignStatesAsync'](_0x3d0c8e['id']);}const _0x2d0ba0=this['config'][_0x142548(0x195)];if(_0x2d0ba0)for(const _0x16d2fc of _0x2d0ba0){await this[_0x142548(0xd6)](_0x16d2fc);}if(this[_0x142548(0x18c)][_0x142548(0xf4)]&&this[_0x142548(0x18c)][_0x142548(0x17e)])await this[_0x142548(0xd6)](this[_0x142548(0x18c)]['notifyTelegramInstance']+_0x142548(0x192));setTimeout(()=>this[_0x142548(0xe4)](),0x1388);if(this[_0x142548(0x1b1)])clearInterval(this['analysisTimer']);const _0x4232e7=this[_0x142548(0x18c)][_0x142548(0x167)]||0xf;_0x4232e7>0x0&&(this[_0x142548(0x1b1)]=setInterval(()=>{const _0x3c4aa5=_0x142548;this[_0x3c4aa5(0xd0)](),automation[_0x3c4aa5(0x196)](this);},_0x4232e7*0x3c*0x3e8)),setTimeout(()=>automation[_0x142548(0x196)](this),0x2710),schedulers[_0x142548(0xf8)](this,()=>aiAgent[_0x142548(0x130)](this,pythonBridge)),schedulers['setupModeResetScheduler'](this),schedulers['setupDriftAnalysisScheduler'](this,()=>aiAgent[_0x142548(0x1ab)](this)),schedulers[_0x142548(0x193)](this,()=>aiAgent[_0x142548(0xdd)](this)),pythonBridge['startService'](this,installer['PYTHON_EXE']),setTimeout(async()=>{const _0x50b96d=_0x142548;await topology[_0x50b96d(0xcf)](this);try{const _0x308449=await this[_0x50b96d(0xe6)]('analysis.topology.structure');if(_0x308449&&_0x308449[_0x50b96d(0x164)])pythonBridge[_0x50b96d(0x1b8)](this,_0x50b96d(0x17c),JSON[_0x50b96d(0x154)](_0x308449[_0x50b96d(0x164)]));}catch(_0x29820a){}this[_0x50b96d(0x174)](),this['triggerGaitAnalysis'](),this[_0x50b96d(0x19f)](),this['updateHealthVector']();},0x1388);}['onUnload'](_0x302969){const _0x33d769=a0_0x1fe281;if(this['analysisTimer'])clearInterval(this['analysisTimer']);if(this[_0x33d769(0x13d)])clearInterval(this[_0x33d769(0x13d)]);if(this[_0x33d769(0xe0)])this[_0x33d769(0xe0)]['cancel']();if(this[_0x33d769(0xea)])this[_0x33d769(0xea)][_0x33d769(0x136)]();if(this['briefingJob'])this[_0x33d769(0x153)]['cancel']();recorder['abortExitTimer'](this),pythonBridge[_0x33d769(0x16e)](this),_0x302969();}async[a0_0x1fe281(0x132)](_0x2abd20,_0x460fab){const _0x23b827=a0_0x1fe281;if(!_0x460fab||this['dependencyInstallInProgress'])return;if(_0x2abd20[_0x23b827(0x178)]('telegram')&&_0x2abd20['endsWith'](_0x23b827(0x15c))&&_0x460fab[_0x23b827(0x164)])return;if(_0x2abd20===this[_0x23b827(0x157)]+_0x23b827(0x143)){if(_0x460fab[_0x23b827(0x164)]&&Object[_0x23b827(0x10d)](setup[_0x23b827(0x173)])[_0x23b827(0x178)](_0x460fab[_0x23b827(0x164)])){this[_0x23b827(0x177)]=_0x460fab[_0x23b827(0x164)];if(_0x460fab['val']===setup[_0x23b827(0x173)][_0x23b827(0x14a)])await recorder[_0x23b827(0x13a)](this,![]);else await recorder[_0x23b827(0x13a)](this,!![]);if(this['isProVersion']){let _0x543f89=![],_0x3d5464=0x0,_0x4d43ef='manual';if(this[_0x23b827(0x177)]===_0x23b827(0xed))_0x543f89=!![],_0x3d5464=0x168,_0x4d43ef=_0x23b827(0x19e);else this[_0x23b827(0x177)]===_0x23b827(0x156)&&(_0x543f89=!![],_0x3d5464=0x5a0,_0x4d43ef=_0x23b827(0xc2));pythonBridge['send'](this,_0x23b827(0x17b),{'active':_0x543f89,'duration':_0x3d5464,'label':_0x4d43ef}),await this[_0x23b827(0x19b)](_0x23b827(0x180),{'val':JSON[_0x23b827(0x104)]({'active':_0x543f89,'label':_0x4d43ef,'timestamp':Date[_0x23b827(0x11f)]()}),'ack':!![]});}}if(!_0x460fab[_0x23b827(0x19d)])this[_0x23b827(0xd7)](_0x2abd20,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x460fab[_0x23b827(0x19d)]){_0x2abd20['includes'](_0x23b827(0x18d))&&_0x460fab[_0x23b827(0x164)]&&(this['setState'](_0x2abd20,{'val':![],'ack':!![]}),aiAgent[_0x23b827(0x15a)](this));if(_0x2abd20[_0x23b827(0x178)](_0x23b827(0x125))&&_0x460fab[_0x23b827(0x164)]){this[_0x23b827(0xd7)](_0x2abd20,{'val':![],'ack':!![]});if(this[_0x23b827(0x109)])aiAgent[_0x23b827(0x130)](this,pythonBridge);}_0x2abd20[_0x23b827(0x178)](_0x23b827(0x149))&&_0x460fab['val']&&(this['setState'](_0x2abd20,{'val':![],'ack':!![]}),aiAgent[_0x23b827(0xdd)](this));_0x2abd20['includes'](_0x23b827(0x103))&&_0x460fab['val']&&(this[_0x23b827(0xd7)](_0x2abd20,{'val':![],'ack':!![]}),aiAgent[_0x23b827(0x126)](this));if(_0x2abd20[_0x23b827(0x178)](_0x23b827(0x199))&&_0x460fab[_0x23b827(0x164)]){this[_0x23b827(0xd7)](_0x2abd20,{'val':![],'ack':!![]});if(this[_0x23b827(0x109)])try{const _0x43a3c0=await this['getStateAsync'](_0x23b827(0x1a9));if(_0x43a3c0&&_0x43a3c0[_0x23b827(0x164)]){const _0x3ff8c5=JSON[_0x23b827(0x154)](_0x43a3c0[_0x23b827(0x164)]);this[_0x23b827(0x19b)](_0x23b827(0x1b4),{'val':_0x23b827(0xc5),'ack':!![]}),pythonBridge[_0x23b827(0x1b8)](this,_0x23b827(0xc3),{'sequences':_0x3ff8c5});}}catch(_0xbdbf7f){}}if(_0x2abd20[_0x23b827(0x178)]('analysis.training.triggerHealth')&&_0x460fab[_0x23b827(0x164)]){this[_0x23b827(0xd7)](_0x2abd20,{'val':![],'ack':!![]});if(this[_0x23b827(0x109)])try{const _0x46e560=await this['getStateAsync'](_0x23b827(0x1b7));if(_0x46e560&&_0x46e560[_0x23b827(0x164)])pythonBridge['send'](this,_0x23b827(0x134),{'digests':JSON['parse'](_0x46e560[_0x23b827(0x164)])});}catch(_0x9a8cd2){}}if(_0x2abd20['includes'](_0x23b827(0x129))&&_0x460fab[_0x23b827(0x164)]){this[_0x23b827(0xd7)](_0x2abd20,{'val':![],'ack':!![]});if(this[_0x23b827(0x109)])try{const _0x2d3cf4=await this['getStateAsync'](_0x23b827(0x1a5));if(_0x2d3cf4&&_0x2d3cf4[_0x23b827(0x164)])pythonBridge[_0x23b827(0x1b8)](this,_0x23b827(0xf5),{'points':JSON[_0x23b827(0x154)](_0x2d3cf4[_0x23b827(0x164)])});}catch(_0x29f1a1){}}if(_0x2abd20['includes']('analysis.training.triggerComfort')&&_0x460fab['val']){this[_0x23b827(0xd7)](_0x2abd20,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x4911ef=await this[_0x23b827(0xe6)](_0x23b827(0xf0));if(_0x4911ef&&_0x4911ef[_0x23b827(0x164)])pythonBridge[_0x23b827(0x1b8)](this,_0x23b827(0x13b),{'events':JSON[_0x23b827(0x154)](_0x4911ef['val'])});}catch(_0x9564ec){}}_0x2abd20[_0x23b827(0x178)]('analysis.training.triggerTopology')&&_0x460fab[_0x23b827(0x164)]&&(this[_0x23b827(0xd7)](_0x2abd20,{'val':![],'ack':!![]}),topology['updateTopology'](this));return;}if(this[_0x23b827(0x18c)][_0x23b827(0x195)]&&this['config'][_0x23b827(0x195)][_0x23b827(0x178)](_0x2abd20)){await this[_0x23b827(0xe4)]();return;}const _0x52a6ff=(this['config'][_0x23b827(0x158)]||[])['find'](_0x3bee4f=>_0x3bee4f['id']===_0x2abd20);if(_0x52a6ff){const _0x43695f=await recorder[_0x23b827(0xcd)](this,_0x2abd20,_0x460fab,_0x52a6ff);_0x43695f&&_0x43695f[_0x23b827(0x185)]===_0x23b827(0x100)&&_0x43695f[_0x23b827(0xc7)]&&this[_0x23b827(0x109)]&&deadMan['updateLocation'](this,_0x43695f[_0x23b827(0xc7)]);}}async['onMessage'](_0x360dd6){const _0x51aba2=a0_0x1fe281;if(typeof _0x360dd6===_0x51aba2(0x190)&&_0x360dd6['message']){if(_0x360dd6[_0x51aba2(0x14b)]===_0x51aba2(0x1b6))try{const _0x4ca8e0=await automation[_0x51aba2(0xd9)](this);this[_0x51aba2(0x179)](_0x360dd6[_0x51aba2(0xff)],_0x360dd6['command'],{'success':!![],'results':_0x4ca8e0},_0x360dd6[_0x51aba2(0x17a)]);}catch(_0x391bbf){this[_0x51aba2(0x179)](_0x360dd6[_0x51aba2(0xff)],_0x360dd6[_0x51aba2(0x14b)],{'success':![],'error':_0x391bbf[_0x51aba2(0x133)]},_0x360dd6['callback']);}else{if(_0x360dd6[_0x51aba2(0x14b)]===_0x51aba2(0x168))try{const {current_temps:_0x3729e7,t_out:_0x8f529,targets:_0x1798b5,t_forecast:_0x2d7871}=_0x360dd6[_0x51aba2(0x133)],_0x5b7c10=[];let _0x12d3b9={};try{const _0x1782f4=await this[_0x51aba2(0xe6)](_0x51aba2(0xe7));if(_0x1782f4&&_0x1782f4[_0x51aba2(0x164)]){const _0x33cfb6=JSON[_0x51aba2(0x154)](_0x1782f4['val']);_0x12d3b9=_0x33cfb6[_0x51aba2(0x12f)]||_0x33cfb6;}}catch(_0x102a2d){}const _0x2bf936=_0x2d7871!==undefined&&_0x2d7871!==null?(_0x8f529+_0x2d7871)/0x2:_0x8f529;for(const [_0x4560d3,_0x338969]of Object['entries'](_0x3729e7)){const _0x2131cb=_0x1798b5[_0x4560d3]||0x15;if(_0x338969<=_0x2131cb)continue;let _0x2de08b=_0x12d3b9[_0x4560d3]||-0.5;if(_0x2de08b>=0x0)_0x2de08b=-0.5;const _0x4d89b4=Math['abs'](_0x2de08b),_0x47557a=_0x338969-_0x2131cb;let _0x24398e=Math[_0x51aba2(0xcb)](_0x47557a/_0x4d89b4*0x3c);const _0x9dc22d=_0x338969-_0x8f529,_0x3b5a72=_0x338969-_0x2bf936;if(_0x3b5a72!==0x0&&_0x9dc22d!==0x0){const _0x1588c2=_0x9dc22d/_0x3b5a72;_0x24398e=Math['floor'](_0x24398e*_0x1588c2);}if(_0x24398e>0xf){if(_0x24398e>0xf0)_0x24398e=0xf0;_0x5b7c10[_0x51aba2(0x198)]({'room':_0x4560d3,'minutes_safe':_0x24398e,'target':_0x2131cb,'current':_0x338969,'savings_msg':_0x51aba2(0x163)+_0x24398e+_0x51aba2(0x1ae)});}}_0x5b7c10[_0x51aba2(0x12c)]((_0x2872b5,_0x4ecfa3)=>_0x4ecfa3[_0x51aba2(0x12a)]-_0x2872b5[_0x51aba2(0x12a)]),this[_0x51aba2(0x179)](_0x360dd6['from'],_0x360dd6['command'],{'success':!![],'proposals':_0x5b7c10},_0x360dd6[_0x51aba2(0x17a)]);}catch(_0x3198d7){this['sendTo'](_0x360dd6['from'],_0x360dd6[_0x51aba2(0x14b)],{'success':![],'error':_0x3198d7['message']},_0x360dd6['callback']);}else{if(_0x360dd6['command']===_0x51aba2(0x11e))await this[_0x51aba2(0x19b)](_0x51aba2(0x169),{'val':![],'ack':!![]}),await this['setStateAsync'](_0x51aba2(0x16c),{'val':'','ack':!![]}),await this[_0x51aba2(0x19b)](_0x51aba2(0x1ba),{'val':'','ack':!![]}),this['sendTo'](_0x360dd6[_0x51aba2(0xff)],_0x360dd6[_0x51aba2(0x14b)],{'success':!![]},_0x360dd6[_0x51aba2(0x17a)]);else{if(_0x360dd6[_0x51aba2(0x14b)]===_0x51aba2(0x18f)){const {targetId:_0x26276a,targetValue:_0x2a0c3b}=_0x360dd6[_0x51aba2(0x133)];await this[_0x51aba2(0x19b)](_0x51aba2(0x169),{'val':!![],'ack':!![]}),await this['setStateAsync']('analysis.automation.description',{'val':_0x51aba2(0x1ac),'ack':!![]}),await this[_0x51aba2(0x19b)](_0x51aba2(0x1ba),{'val':_0x26276a,'ack':!![]}),await this[_0x51aba2(0x19b)](_0x51aba2(0x11d),{'val':String(_0x2a0c3b),'ack':!![]}),this[_0x51aba2(0x179)](_0x360dd6['from'],_0x360dd6[_0x51aba2(0x14b)],{'success':!![]},_0x360dd6[_0x51aba2(0x17a)]);}else{if(_0x360dd6['command']===_0x51aba2(0x147))try{const _0x2c9042=_0x360dd6[_0x51aba2(0x133)]['apiKey'];if(!_0x2c9042)throw new Error(_0x51aba2(0xf3));const _0x42a27b=new GoogleGenerativeAI(_0x2c9042),_0x4ab34d=_0x42a27b[_0x51aba2(0x123)]({'model':GEMINI_MODEL}),_0x39443f=await _0x4ab34d[_0x51aba2(0xfb)](_0x51aba2(0x145)),_0x412570=await _0x39443f[_0x51aba2(0x105)];if(_0x412570[_0x51aba2(0x110)]())this[_0x51aba2(0x179)](_0x360dd6['from'],_0x360dd6['command'],{'success':!![],'message':'Verbindung\x20erfolgreich!'},_0x360dd6[_0x51aba2(0x17a)]);else throw new Error('Keine\x20Antwort\x20von\x20Gemini');}catch(_0x28e5f9){this[_0x51aba2(0x179)](_0x360dd6[_0x51aba2(0xff)],_0x360dd6[_0x51aba2(0x14b)],{'success':![],'message':_0x28e5f9[_0x51aba2(0x133)]},_0x360dd6[_0x51aba2(0x17a)]);}else{if(_0x360dd6[_0x51aba2(0x14b)]==='scanDevices')try{const _0x4a5769=await scanner[_0x51aba2(0x16b)](this,_0x360dd6[_0x51aba2(0x133)]||{});this[_0x51aba2(0x179)](_0x360dd6[_0x51aba2(0xff)],_0x360dd6[_0x51aba2(0x14b)],{'success':!![],'devices':_0x4a5769},_0x360dd6['callback']);}catch(_0x88f218){this[_0x51aba2(0x179)](_0x360dd6[_0x51aba2(0xff)],_0x360dd6[_0x51aba2(0x14b)],{'success':![],'error':_0x88f218[_0x51aba2(0x133)]},_0x360dd6['callback']);}else{if(_0x360dd6[_0x51aba2(0x14b)]===_0x51aba2(0x194))try{const {matrix:_0x228ede}=_0x360dd6['message'],_0x2a4958=await this[_0x51aba2(0xe6)](_0x51aba2(0x122));if(_0x2a4958&&_0x2a4958['val']){const _0x43cfa9=JSON['parse'](_0x2a4958[_0x51aba2(0x164)]);_0x43cfa9[_0x51aba2(0xfc)]=_0x228ede,_0x43cfa9[_0x51aba2(0x114)]=Date[_0x51aba2(0x11f)](),await this[_0x51aba2(0x19b)](_0x51aba2(0x122),{'val':JSON[_0x51aba2(0x104)](_0x43cfa9),'ack':!![]}),pythonBridge['send'](this,_0x51aba2(0x17c),_0x43cfa9);}this[_0x51aba2(0x179)](_0x360dd6[_0x51aba2(0xff)],_0x360dd6[_0x51aba2(0x14b)],{'success':!![]},_0x360dd6['callback']);}catch(_0x5dffa6){this[_0x51aba2(0x1af)]['error'](_0x5dffa6);}else{if(_0x360dd6[_0x51aba2(0x14b)]===_0x51aba2(0x16a))this[_0x51aba2(0x179)](_0x360dd6[_0x51aba2(0xff)],_0x360dd6['command'],{'success':!![],'dailyDigests':this[_0x51aba2(0x191)]||[],'analysisHistory':this[_0x51aba2(0x138)]||[]},_0x360dd6[_0x51aba2(0x17a)]);else{if(_0x360dd6[_0x51aba2(0x14b)]===_0x51aba2(0x1b9)){const _0x1af9f7=this[_0x51aba2(0x191)][_0x51aba2(0x14e)],_0x25be6a=new Array(0x18)[_0x51aba2(0x10f)](0x0),_0x2c39c4=new Date()[_0x51aba2(0x108)](0x0,0x0,0x0,0x0);this['eventHistory']&&this[_0x51aba2(0x12d)][_0x51aba2(0x144)](_0x739935=>{const _0x511f05=_0x51aba2;if(_0x739935[_0x511f05(0x10e)]>=_0x2c39c4){const _0x190a31=new Date(_0x739935[_0x511f05(0x10e)])['getHours']();if(_0x190a31>=0x0&&_0x190a31<0x18)_0x25be6a[_0x190a31]++;}});let _0x465c3e=![],_0x1bd7fb='',_0x3cc4cb='',_0x1ad606='';try{const _0x10666a=await this[_0x51aba2(0xe6)](_0x51aba2(0x169));if(_0x10666a&&_0x10666a[_0x51aba2(0x164)]){_0x465c3e=!![];const _0x3556b0=await this[_0x51aba2(0xe6)](_0x51aba2(0x16c));_0x1bd7fb=_0x3556b0?_0x3556b0[_0x51aba2(0x164)]:'';const _0x3f0e57=await this[_0x51aba2(0xe6)]('analysis.automation.targetId');_0x3cc4cb=_0x3f0e57?_0x3f0e57[_0x51aba2(0x164)]:'';const _0x33c055=await this[_0x51aba2(0xe6)](_0x51aba2(0x11d));_0x1ad606=_0x33c055?_0x33c055[_0x51aba2(0x164)]:'';}}catch(_0x3ed099){}const _0x9692c4=await this[_0x51aba2(0x124)](),_0x4b9901=(this[_0x51aba2(0x18c)][_0x51aba2(0x158)]||[])[_0x51aba2(0x155)](_0x2c4a89=>_0x2c4a89[_0x51aba2(0x1a2)]),_0x404bb5=_0x9692c4&&_0x4b9901;this[_0x51aba2(0x179)](_0x360dd6[_0x51aba2(0xff)],_0x360dd6[_0x51aba2(0x14b)],{'success':!![],'eventHistory':this[_0x51aba2(0x12d)][_0x51aba2(0x18b)](0x0,0xf),'stats':{'digestCount':_0x1af9f7,'isPresent':this['isPresent'],'hourlyActivity':_0x25be6a,'solarActive':_0x404bb5},'automation':{'detected':_0x465c3e,'description':_0x1bd7fb,'targetId':_0x3cc4cb,'targetValue':_0x1ad606}},_0x360dd6[_0x51aba2(0x17a)]);}else{if(_0x360dd6['command']===_0x51aba2(0x140)){const _0x538f15=await this[_0x51aba2(0x111)](_0x51aba2(0x150),_0x51aba2(0x175)),_0x624ce0=[];if(_0x538f15)for(const _0x3fc583 in _0x538f15){const _0x292526=_0x538f15[_0x3fc583],_0x4f9718=(_0x292526['common']&&typeof _0x292526[_0x51aba2(0x1bb)]['name']===_0x51aba2(0x190)?_0x292526['common']['name']['de']:_0x292526['common'][_0x51aba2(0x112)])||_0x292526[_0x51aba2(0x1bb)]['name'];_0x624ce0['push']({'id':_0x3fc583,'name':_0x4f9718});}const _0x172d4b=await this[_0x51aba2(0x111)](_0x51aba2(0xcc),_0x51aba2(0x175)),_0x5e5a72=[];if(_0x172d4b)for(const _0x1cba41 in _0x172d4b){const _0x1fe7f8=_0x172d4b[_0x1cba41],_0x2757fc=(_0x1fe7f8[_0x51aba2(0x1bb)]&&typeof _0x1fe7f8[_0x51aba2(0x1bb)]['name']===_0x51aba2(0x190)?_0x1fe7f8['common'][_0x51aba2(0x112)]['de']:_0x1fe7f8[_0x51aba2(0x1bb)][_0x51aba2(0x112)])||_0x1cba41['split']('.')[_0x51aba2(0xd5)]();_0x5e5a72[_0x51aba2(0x198)](_0x2757fc);}this[_0x51aba2(0x179)](_0x360dd6[_0x51aba2(0xff)],_0x360dd6['command'],{'success':!![],'enums':_0x624ce0,'rooms':_0x5e5a72},_0x360dd6[_0x51aba2(0x17a)]);}else{if(_0x360dd6['command']==='testContext')try{let _0x5b2a7a=_0x51aba2(0x189),_0x33e948=_0x51aba2(0x17f);if(this[_0x51aba2(0x18c)][_0x51aba2(0x19a)]){const _0x24db16=await recorder[_0x51aba2(0xc6)](this);_0x5b2a7a=_0x24db16!==null?_0x24db16+'Â°C':_0x51aba2(0x1a4);}if(this[_0x51aba2(0x18c)][_0x51aba2(0x13f)]){const _0x3a39e8=await this[_0x51aba2(0x1a3)](_0x51aba2(0x135)+this[_0x51aba2(0x18c)][_0x51aba2(0x13f)]);_0x33e948=_0x3a39e8?_0x51aba2(0x1a0):_0x51aba2(0xc0);}this['sendTo'](_0x360dd6['from'],_0x360dd6[_0x51aba2(0x14b)],{'success':!![],'weather':_0x5b2a7a,'calendar':_0x33e948},_0x360dd6[_0x51aba2(0x17a)]);}catch(_0x1ec15e){this[_0x51aba2(0x179)](_0x360dd6[_0x51aba2(0xff)],_0x360dd6[_0x51aba2(0x14b)],{'success':![],'error':_0x1ec15e[_0x51aba2(0x133)]},_0x360dd6[_0x51aba2(0x17a)]);}else{if(_0x360dd6[_0x51aba2(0x14b)]===_0x51aba2(0x115))try{const _0xce1a95=_0x360dd6[_0x51aba2(0x133)][_0x51aba2(0x14c)],_0x4abda1=await this[_0x51aba2(0x165)](_0xce1a95+_0x51aba2(0xfe));let _0x4c874d=[];if(_0x4abda1&&_0x4abda1['val']){const _0x440a38=JSON[_0x51aba2(0x154)](_0x4abda1['val']),_0x331eac=new Set();Array['isArray'](_0x440a38)&&_0x440a38[_0x51aba2(0x144)](_0x3db1d8=>{const _0x13111a=_0x51aba2;if(_0x3db1d8[_0x13111a(0x121)])_0x331eac[_0x13111a(0x1b2)](_0x3db1d8[_0x13111a(0x121)]);else{if(_0x3db1d8[_0x13111a(0x16d)])_0x331eac[_0x13111a(0x1b2)](_0x3db1d8[_0x13111a(0x16d)]);}}),_0x4c874d=Array[_0x51aba2(0xff)](_0x331eac)[_0x51aba2(0x12c)]();}if(_0x4c874d['length']===0x0)_0x4c874d=[_0x51aba2(0xfa)];this['sendTo'](_0x360dd6['from'],_0x360dd6['command'],{'success':!![],'names':_0x4c874d},_0x360dd6[_0x51aba2(0x17a)]);}catch(_0x366cd4){this[_0x51aba2(0x179)](_0x360dd6[_0x51aba2(0xff)],_0x360dd6['command'],{'success':![],'error':_0x366cd4['message']},_0x360dd6[_0x51aba2(0x17a)]);}else{if(_0x360dd6[_0x51aba2(0x14b)]===_0x51aba2(0x160))try{await setup[_0x51aba2(0x137)](this,_0x51aba2(0x162),![],![]),this[_0x51aba2(0x179)](_0x360dd6[_0x51aba2(0xff)],_0x360dd6['command'],{'success':!![],'message':_0x51aba2(0x17d)},_0x360dd6[_0x51aba2(0x17a)]);}catch(_0x2119a0){this[_0x51aba2(0x1af)][_0x51aba2(0xc9)](_0x51aba2(0x10b)+_0x2119a0[_0x51aba2(0x133)]),this['sendTo'](_0x360dd6[_0x51aba2(0xff)],_0x360dd6['command'],{'success':![],'message':_0x51aba2(0x181)+_0x2119a0['message']},_0x360dd6[_0x51aba2(0x17a)]);}}}}}}}}}}}}}}}async['loadSystemMode'](){const _0x37ef8f=a0_0x1fe281;try{const _0x319717=await this[_0x37ef8f(0xe6)](setup[_0x37ef8f(0x166)]);_0x319717&&_0x319717[_0x37ef8f(0x164)]&&Object['values'](setup['SYSTEM_MODES'])[_0x37ef8f(0x178)](_0x319717[_0x37ef8f(0x164)])?this[_0x37ef8f(0x177)]=_0x319717[_0x37ef8f(0x164)]:(this[_0x37ef8f(0x177)]=setup[_0x37ef8f(0x173)][_0x37ef8f(0x186)],await this[_0x37ef8f(0x19b)](setup[_0x37ef8f(0x166)],{'val':setup['SYSTEM_MODES']['NORMAL'],'ack':!![]}));}catch(_0x4a8d5a){this[_0x37ef8f(0x177)]=setup['SYSTEM_MODES'][_0x37ef8f(0x186)];}}async[a0_0x1fe281(0xe4)](){const _0x649f3c=a0_0x1fe281;try{const _0x2e9c1d=this[_0x649f3c(0x18c)][_0x649f3c(0x195)]||[];let _0x53123e=![];const _0xeb88fc=[];for(const _0x1e6b41 of _0x2e9c1d){try{const _0x37848b=await this['getForeignStateAsync'](_0x1e6b41);_0x37848b&&(_0x37848b[_0x649f3c(0x164)]===!![]||_0x37848b[_0x649f3c(0x164)]===_0x649f3c(0xf9)||_0x37848b[_0x649f3c(0x164)]===0x1)&&(_0x53123e=!![],_0xeb88fc[_0x649f3c(0x198)](_0x1e6b41));}catch(_0x1a404f){}}return await this[_0x649f3c(0x19b)](_0x649f3c(0xe5),{'val':_0xeb88fc[_0x649f3c(0xe8)](',\x20'),'ack':!![]}),_0x53123e&&(this['exitTimer']&&(this[_0x649f3c(0x1af)][_0x649f3c(0x182)](_0x649f3c(0xfd)),recorder['abortExitTimer'](this)),!this['isPresent']&&this[_0x649f3c(0x177)]===setup[_0x649f3c(0x173)][_0x649f3c(0x186)]&&await recorder[_0x649f3c(0x13a)](this,!![])),_0x53123e;}catch(_0x3b3642){return![];}}async[a0_0x1fe281(0xd0)](){const _0x281b15=a0_0x1fe281;this[_0x281b15(0x1af)][_0x281b15(0x12b)](_0x281b15(0x19c)),await aiAgent[_0x281b15(0x15a)](this),this[_0x281b15(0x12e)](),this[_0x281b15(0xd2)](),this[_0x281b15(0x19f)]();}async['checkSolarCondition'](){const _0x49a4fc=a0_0x1fe281,_0x49d082=['weatherunderground.0','accuweather.0',_0x49a4fc(0x11a)],_0x2c57c7=['forecast.current.weather',_0x49a4fc(0x117),'NextHours.Location_1.Day_1.current.symbol_desc'];for(const _0x202952 of _0x49d082){for(const _0x26de80 of _0x2c57c7){try{const _0x167d1f=_0x202952+'.'+_0x26de80,_0x1a6fce=await this[_0x49a4fc(0x165)](_0x167d1f);if(_0x1a6fce&&_0x1a6fce[_0x49a4fc(0x164)]){const _0x1ef0ea=String(_0x1a6fce[_0x49a4fc(0x164)])['toLowerCase']();if(_0x1ef0ea[_0x49a4fc(0x178)]('sonn')||_0x1ef0ea[_0x49a4fc(0x178)](_0x49a4fc(0x1a6))||_0x1ef0ea[_0x49a4fc(0x178)]('klar')||_0x1ef0ea['includes']('clear')||_0x1ef0ea[_0x49a4fc(0x178)]('heiter'))return!![];}}catch(_0x2b541b){}}}return![];}[a0_0x1fe281(0xd2)](){const _0xef5771=a0_0x1fe281;if(!this['isProVersion'])return;try{this[_0xef5771(0x1ad)](_0xef5771(0x1a9),(_0x5765eb,_0x40e58a)=>{const _0x57999a=_0xef5771;_0x40e58a&&_0x40e58a[_0x57999a(0x164)]&&pythonBridge['send'](this,'ANALYZE_GAIT',{'sequences':JSON[_0x57999a(0x154)](_0x40e58a['val'])});});}catch(_0x245b89){}}async['triggerEnergyPrediction'](){const _0x217062=a0_0x1fe281;if(!this['isProVersion'])return;try{const _0x47fd9f=await recorder[_0x217062(0xc6)](this);if(_0x47fd9f===null)return;const _0x42e129={},_0x4799d3={},_0x1f9055=this[_0x217062(0x18c)][_0x217062(0x158)]||[];for(const _0x202a79 of _0x1f9055){if(_0x202a79['type']===_0x217062(0x146)&&_0x202a79[_0x217062(0xc7)]){const _0x42f55c=this['sensorLastValues'][_0x202a79['id']];if(_0x42f55c!==undefined)_0x42e129[_0x202a79[_0x217062(0xc7)]]=_0x42f55c;if(_0x202a79[_0x217062(0x1a2)])_0x4799d3[_0x202a79[_0x217062(0xc7)]]=!![];}}const _0x18e87c=await this[_0x217062(0x124)]();Object['keys'](_0x42e129)['length']>0x0&&(pythonBridge[_0x217062(0x1b8)](this,'PREDICT_ENERGY',{'current_temps':_0x42e129,'t_out':_0x47fd9f,'is_sunny':_0x18e87c,'solar_flags':_0x4799d3}),pythonBridge['send'](this,'OPTIMIZE_ENERGY',{'current_temps':_0x42e129,'t_out':_0x47fd9f,'targets':{}}));}catch(_0x272c0c){}}[a0_0x1fe281(0x12e)](){const _0x18d139=a0_0x1fe281;if(!this['rawEventLog']||this[_0x18d139(0x14d)][_0x18d139(0x14e)]===0x0)return;const _0x5ebb13=new Array(0x60)[_0x18d139(0x10f)](0x0),_0x122e95=new Date()[_0x18d139(0x108)](0x0,0x0,0x0,0x0);this[_0x18d139(0x14d)][_0x18d139(0x144)](_0x594447=>{const _0x16c2aa=_0x18d139,_0x4d4390=new Date(_0x594447[_0x16c2aa(0x10e)]);if(_0x4d4390['getTime']()>=_0x122e95){const _0x131cdb=_0x4d4390[_0x16c2aa(0xde)](),_0x5bb77b=_0x4d4390[_0x16c2aa(0x131)](),_0x1b76f4=_0x131cdb*0x4+Math[_0x16c2aa(0xcb)](_0x5bb77b/0xf);if(_0x1b76f4>=0x0&&_0x1b76f4<0x60)_0x5ebb13[_0x1b76f4]++;}}),this[_0x18d139(0x19b)](_0x18d139(0x116),{'val':JSON['stringify'](_0x5ebb13),'ack':!![]});}['runPythonHealthCheck'](){const _0x20ccfb=a0_0x1fe281;if(!this['dailyDigests']||this[_0x20ccfb(0x191)][_0x20ccfb(0x14e)]<0x2)return;const _0x1d53cb=this[_0x20ccfb(0x191)][_0x20ccfb(0xd1)](_0x4eb814=>{const _0x4891b9=_0x20ccfb,_0x55bdc2=(_0x4eb814[_0x4891b9(0x152)]||'')[_0x4891b9(0x10a)]();return ACTIVITY_LEVEL_MAP[_0x55bdc2]||0x32;});pythonBridge[_0x20ccfb(0x1b8)](this,_0x20ccfb(0x141),{'values':_0x1d53cb,'tag':'Activity-Level'});}}if(require['main']!==module)module[a0_0x1fe281(0x1aa)]=_0x21e8f5=>new CogniLiving(_0x21e8f5);else new CogniLiving();function a0_0xf66f(){const _0x3164bc=['isSolar','getForeignObjectAsync','Daten\x20nicht\x20verfÃ¼gbar','LTM.trainingData.thermodynamics','sunny','search','geminiModel','LTM.trainingData.sequences','exports','runBaselineDriftAnalysis','Simulation\x20durch\x20Admin\x20(Test)','getState','\x20min\x20ausbleiben.','log','onUnload','analysisTimer','add','onReady','analysis.training.status','loadSystemMode','checkThermostats','LTM.dailyDigests','send','getOverviewData','analysis.automation.targetId','common','./lib/recorder','analysis.training.triggerComfort','isGracePeriodActive','690156vgWGJK','Instanz\x20nicht\x20gefunden','1540931Pcoykg','Guest\x20Mode','TRAIN_SECURITY','bind','Sec-Training\x20started...','getOutsideTemperatureNumeric','location','startSystem','error','Warm-Up\x20Time\x20(Minutes\x20to\x2021Â°C)','floor','enum.rooms.*','processSensorEvent','cogni-living','updateTopology','runAutopilot','map','triggerGaitAnalysis','Gemini\x20Init\x20Error:\x20','2096708wGceuj','pop','subscribeForeignStatesAsync','setState','ready','scanThermostats','2051271KAptuz','./lib/topology','genAI','sendMorningBriefing','getHours','system.mode','ltmJob','117160gKTYaV','toString','onMessage','checkWifiPresence','system.presenceWho','getStateAsync','analysis.energy.insulationScore','join','sensorLastValues','modeResetJob','initHistory','\x20Tage)','party','Lernphase\x20(','isPresent','LTM.rawEventLog','inactivityThresholdHours',')\x20-\x20Phase\x20C\x20(Adaptive\x20Security\x20&\x20Smart\x20Schedule)','Kein\x20API\x20Key\x20Ã¼bergeben','notifyTelegramEnabled','TRAIN_ENERGY','./lib/scheduler','json','setupLtmScheduler','online','Standard','generateContent','matrix','WiFi\x20Presence\x20detected.','.data.table','from','motion','./lib/dead_man','analysis.energy.ventilationAlerts','automation.triggerAction','stringify','response','analysis.automation.triggerAction','analysis.energy.pinnForecast','setHours','isProVersion','toLowerCase','Notification\x20Test\x20Failed:\x20','Active\x20Ventilation\x20Alerts','values','timestamp','fill','text','getForeignObjectsAsync','name','licenseKey','updated','getCalendarNames','analysis.health.todayVector','Current.WeatherText','subscribeStates','./lib/setup','daswetter.0','36LhiOxJ','unload','analysis.automation.targetValue','dismissAutomation','now','608510BQPFUI','_calName','analysis.topology.structure','getGenerativeModel','checkSolarCondition','triggerDailyDigest','executeAutomationAction','exitTimer','(((.+)+)+)+$','analysis.training.triggerEnergy','minutes_safe','debug','sort','eventHistory','updateHealthVector','scores','createDailyDigest','getMinutes','onStateChange','message','TRAIN_HEALTH','system.adapter.','cancel','sendNotification','analysisHistory','initZombies','setPresence','TRAIN_COMFORT','./lib/installer','driftAnalysisTimer','geminiApiKey','calendarInstance','getEnums','ANALYZE_TREND','exitGraceTimer','.system.mode','forEach','Test','temperature','testApiKey','PINN\x20AI\x20Forecast','triggerBriefing','VACATION','command','instance','rawEventLog','length','state','enum.functions.*','24hgnuqB','activityLevel','briefingJob','parse','some','guest','namespace','devices','./lib/automation','runGeminiAnalysis','string','communicate.request','@google/generative-ai','version','1XNGryc','testNotification','./lib/scanner','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','Heizung\x20kann\x20','val','getForeignStateAsync','SYSTEM_DP_MODE','analysisInterval','simulateEnergyMPC','analysis.automation.patternDetected','getLtmData','scanForDevices','analysis.automation.description','calendarName','stopService','systemConfig','initSystemConfig','setObjectNotExistsAsync','30gDmcGZ','SYSTEM_MODES','runPythonHealthCheck','enum','Gemini\x20AI\x20initialized.','currentSystemMode','includes','sendTo','callback','SET_LEARNING_MODE','SET_TOPOLOGY','Gesendet','notifyTelegramInstance','Kein\x20Kalender-Adapter','analysis.security.learningStatus','Fehler:\x20','info','lastAlertState','analysis.automation.autoApply','type','NORMAL','constructor','4722487DDlePM','Kein\x20Wetter-Adapter','analysis.energy.warmupTimes','slice','config','analysis.trigger','./lib/ai_agent','simulateButler','object','dailyDigests','.communicate.request','setupBriefingScheduler','updateTopologyMatrix','presenceDevices','checkCalendarTriggers','./lib/python_bridge','push','analysis.training.triggerSecurity','useWeather','setStateAsync','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','ack','Party\x20Mode','triggerEnergyPrediction','Verbunden','cogni-living\x20adapter\x20starting\x20(v'];a0_0xf66f=function(){return _0x3164bc;};return a0_0xf66f();}