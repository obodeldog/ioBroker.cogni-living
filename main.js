const a0_0x160a1b=a0_0x3f10;(function(_0x29aa6a,_0x41d9c9){const _0x3d012a=a0_0x3f10,_0x316c20=_0x29aa6a();while(!![]){try{const _0x3db4b9=parseInt(_0x3d012a(0x1e9))/0x1+parseInt(_0x3d012a(0x2a3))/0x2*(-parseInt(_0x3d012a(0x263))/0x3)+parseInt(_0x3d012a(0x2ac))/0x4*(parseInt(_0x3d012a(0x30c))/0x5)+-parseInt(_0x3d012a(0x1ff))/0x6*(-parseInt(_0x3d012a(0x27a))/0x7)+parseInt(_0x3d012a(0x229))/0x8+-parseInt(_0x3d012a(0x297))/0x9+parseInt(_0x3d012a(0x28e))/0xa;if(_0x3db4b9===_0x41d9c9)break;else _0x316c20['push'](_0x316c20['shift']());}catch(_0x3c6519){_0x316c20['push'](_0x316c20['shift']());}}}(a0_0x3eae,0x63af7));const a0_0x3eb828=(function(){let _0x21f373=!![];return function(_0xc6ca0f,_0x3bf3b2){const _0xde0482=_0x21f373?function(){const _0x292e1e=a0_0x3f10;if(_0x3bf3b2){const _0x2e5bf9=_0x3bf3b2[_0x292e1e(0x252)](_0xc6ca0f,arguments);return _0x3bf3b2=null,_0x2e5bf9;}}:function(){};return _0x21f373=![],_0xde0482;};}()),a0_0x48d75d=a0_0x3eb828(this,function(){const _0x298a4f=a0_0x3f10;return a0_0x48d75d['toString']()[_0x298a4f(0x1d0)]('(((.+)+)+)+$')[_0x298a4f(0x29e)]()[_0x298a4f(0x1a3)](a0_0x48d75d)[_0x298a4f(0x1d0)](_0x298a4f(0x298));});a0_0x48d75d();function a0_0x3eae(){const _0x1f212b=['bind','getCalendarContext','notifyPushoverEnabled','Gemini\x20Init\x20Error:\x20','log','N/A','boolean','setupLtmScheduler','handleTelegramResponse','analysis.training.status','Trend\x20Value','.\x20ANWESEND:\x20','geminiApiKey','apply','analysis.automation.targetValue','stdin','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','Unknown','TRAIN_HEALTH','saveDailyDigests','from','Description','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','targetValue','runSecurityCheck','enum.rooms.*','map','state','System','isEmergency','6459wgicLN','Fokus\x20auf\x20Komfort.','analysis.triggerBriefing','initSystemConfig','version','summary','Keine\x20Details.','details','checkWifiPresence','saveCompletedSequence','sendMorningBriefing','exports','useCalendar','extendObjectAsync','getCalendarNames','No\x20module\x20named','\x20Tage)','Analysiere\x20ausgewogen.','notifyTelegramInstance','AI\x20Training','Pattern\x20Detected','.Current.Temperature','Installing\x20pip\x20packages...','11487bEQWmR','substring','rawEventLog','modeResetJob','executeAutomationAction','Unbekannt','Activity-Level','bewegung','loadDailyDigests','.\x20WETTER:\x20','VACATION','Kalender:\x20Deaktiviert','getSystemUUID','panicMode','livingContext','triggerDailyDigest','PONG','.\x20EVENTS:\x20','[LOG]','HARD\x20WATCHDOG:\x20No\x20activity\x20for\x20','3854810LbRJup','Trigger\x20Analysis','klima','isProVersion','analysis.history_debug_00','analysisTimer','initHistory','recordThermodynamics','status','7184682ntkGuG','(((.+)+)+)+$','NORMAL','info','python','path','setStateAsync','toString','08:00','Sec-Training\x20started...','number','online','254RgFSqA','party','accuweather','aiPersona','warn','members','üêç\x20Python\x20Pong','events.history','sendTo','361848CgVjPf','notifyEmailInstance','forEach','analysis.security.lastCheck','PARTY','setObjectNotExistsAsync','close','weatherInstance','replace','@iobroker/adapter-core','cogni-living','analysis.security.lastScore','Digest','useWeather','schalter','Anomaly\x20Detected','analysis.security','getMonth','command','LTM.driftAnalysis','unknown','driftAnalysisTimer','cancel','trim','length','licht','presenceDevices','runPythonHealthCheck','detected','ical.0','.communicate.request','Err:\x20','analysis.automation.description','licenseKey','initSensorSubscriptions','devices','doors','Started...','Security\x20Monitor','string','Event\x20History','cpu_feature_guard','ack','initZombies','onMessage','pr√§senz','stopPythonService','getWeatherContext',')\x20-\x20MONOLITHIC','ANALYZE_SEQUENCE','installRequirementsInVenv','pip.exe','isArray','weather','some','ENERGY_TRAIN_RESULT','Train\x20Health','setPresence','Trend','[RECORDER]\x20Error\x20saving\x20sequence:\x20','lampe','isAlert','inactivityThresholdHours','main','notifyTelegramRecipient','value','Who\x20is\x20present?','message','.data.table','HEALTH_TRAIN_RESULT','subscribeForeignStatesAsync','getTime','longitude','win32','Sequences','shift','\x20sequences...','getStateAsync','activeSequence','now','‚úÖ\x20Alarm\x20quittiert.\x20System\x20normal.','text.alarm','LTM.trainingData.thermodynamics','initPresenceSubscriptions','door','stringify','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','handlePythonResult','OK:\x20','analysis.health.trendDiagnosis','sendToAsync','analysis.energy.insulationScore','insulation','channel','üìû\x20R√ºckruf\x20anfordern','temperature','40fdzUHP','retry','window','analysis.health','LTM\x20Sched\x20Error:\x20','contact','notifyEmailEnabled','ltmStbWindowDays','kontakt','error','activityLevel','Feedback:\x20','onReady','TRAIN_ENERGY','debug','LTM.trainingData.sequences','triggerBriefing','\x20->\x20','setState','heizung','minDaysForBaseline','system','enum','service.py','node-schedule','find','Error\x20launching\x20Python:\x20','light','LTM.driftAnalysis.baselineDrift','üõ†Ô∏è\x20MAINTENANCE\x20MODE:\x20Reinstalling\x20Python\x20environment.\x20DO\x20NOT\x20RESTART.','response','.venv','getDate','selectedFunctionIds','city','scheduleJob','toFixed','alertReason','.NextHours.Location_1.Day_1.current.temp_value','sendToPython','exitTimer','expire','toLowerCase','notifyPushoverRecipient','GUEST','setupTelegramListener','saveFeedback','Lernphase\x20(','dependencyInstallInProgress','briefingEnabled','humidity','round','startExitTimer','apiKey','dailyDigests','Fokus\x20auf\x20Familienroutinen.','sensorLastValues','subscribeStates','val','analysis.energy','sendNotification','button','slice','runBaselineDriftAnalysis','LTM','Invalid\x20JSON:\x20','Vom\x20Benutzer\x20best√§tigt\x20(OK).','motion','COGNI_REQUEST_CALL','ANOMALY','updateAnalysisHistory','filter','updateBaselineStatus','scanForDevices','analysis.alertReason','Trigger\x20Briefing','Briefing\x20Sched\x20Error:\x20','Insulation\x20Score','data','LTM.driftAnalysis.driftDetails','analysis.health.isAnomaly','pythonProcess','Scripts','Restoring\x20sensor\x20cache...','Thermodynamics','events.lastEvent','‚ùå\x20VENV\x20FAILED.\x20Please\x20run:\x20sudo\x20apt\x20install\x20python3-venv','temperatur','includes','timestamp','Aktiv\x20(','.\x20SYSTEM_MODE:\x20','[RESULT]','automation.triggerAction','analysis.training.triggerHealth','indicator','pop','setupModeResetScheduler','analysis.energy.heatingScore','splice','\x20=\x20','LTM.processingStatus','processSensorEvent','push','events.history_debug_00','location','startsWith','models/gemini-flash-latest','vacation','unload','notifyEmailRecipient','Last\x20raw\x20event','‚ö†Ô∏è\x20Missing\x20Libs.\x20Panic\x20Mode.','Training\x20Status','python3','constructor','common','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','isPresent','runGeminiAnalysis','loadRawEventLog','getHours','targetId','system.mode','Raw\x20Log','geminiModel','analysis.health.trendValue','onStateChange','createAllObjects','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','automationProposal','ltmJob','occupancy','Scanning\x20for\x20devices...','lastIndexOf','event','stdout','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','KI-Modell\x20nicht\x20initialisiert','Training\x20Error:\x20','LTM.triggerDailyDigest','payload','join','checkLicense','startPythonService','installPythonDependencies','normal','ANALYZE_TREND','Success:\x20','.\x20EMERGENCY:\x20','Auto\x20Apply','object','getGenerativeModel','generateContent','getOverviewData','isGracePeriodActive','‚ùå\x20VERIFICATION\x20FAILED.\x20Panic\x20Mode.','setupBriefingScheduler','KALENDER:\x20','recordSequence','search','genAI','TRAIN_SECURITY','COGNI_CONFIRM_OK','exitGraceTimer','analysis.training.triggerEnergy','runAutopilot','Activity\x20Summary','indexOf','‚ö†Ô∏è\x20VENV\x20missing.\x20Reinstalling...','communicate.request','ltmDriftCheckIntervalHours','analysis.isAlert','setForeignStateAsync','Target\x20ID','lights','parse','notifyPushoverInstance','generic','LTM.dailyDigests','callback','rmSync','fill','Success','Skipped\x20(No\x20AI\x20or\x20Data)','134209Sfiupq','loadSystemMode','guest','date','getOutsideTemperatureNumeric','isExit','üõ°Ô∏è\x20SECURITY:\x20Sending\x20sequence\x20to\x20Guard\x20for\x20analysis...','sort','eventHistory','_calName','Cogni-Living','getForeignObjectsAsync','systemConfig','abortExitTimer','üö®\x20EMERGENCY','role','üß†\x20Triggering\x20Security\x20Training\x20with\x20','platform','PRIORIT√ÑT:\x20Sicherheit.','loc','‚úÖ\x20VERIFIED.','Health\x20Analysis','768ikYqfg','pip','analysisHistory','analysis.trigger','LTM.baselineStatus','analysis.automation.triggerAction','ANALYZE_HEALTH','analysis.health.lastCheck','toISOString','‚úÖ\x20INSTALL\x20SUCCESS.\x20Verifying...','currentSystemMode','analysis.automation.patternDetected','analysis.automation.targetId','Drift\x20Sched\x20Error:\x20','systemUUID','briefingTime','name','analysis.training','No\x20instance','analysis.automation.autoApply','Anomaly\x20Score','üêç\x20Using\x20VENV:\x20','kill','requirements.txt','bin','createDailyDigest','WiFi\x20Presence\x20detected.','getForeignStateAsync','Adapter','existsSync','Last\x20Check','unshift','outdoorSensorId','text','python_service','weatherunderground','Target\x20Value','‚ö†Ô∏è\x20ALARM:\x20','config','type','analysis.activitySummary','system.presenceWho','212848TzQIWu','briefingJob','saveRawEventLog','heating','Heating\x20Score','PRIORIT√ÑT:\x20Gesundheit/AAL.','lastAlertState','setupDriftAnalysisScheduler','json','Daily\x20Digests','calendarInstance','python3\x20-m\x20venv\x20\x22','switch','enum.functions.*','presence','sequenceTimer','analysis.training.triggerSecurity','notifyTelegramEnabled','Train\x20Security','autoApply','openweathermap','.\x20KONTEXT:\x20','ltmLtbWindowDays','values','indicator.alarm','‚úÖ\x20HEALTH\x20TRAINED:\x20','split','analysis.analysisHistory'];a0_0x3eae=function(){return _0x1f212b;};return a0_0x3eae();}function a0_0x3f10(_0x1f7453,_0x43b19d){const _0x1a1cca=a0_0x3eae();return a0_0x3f10=function(_0x48d75d,_0x3eb828){_0x48d75d=_0x48d75d-0x184;let _0x3eaeac=_0x1a1cca[_0x48d75d];return _0x3eaeac;},a0_0x3f10(_0x1f7453,_0x43b19d);}'use strict';const utils=require(a0_0x160a1b(0x2b5)),{GoogleGenerativeAI}=require('@google/generative-ai'),schedule=require(a0_0x160a1b(0x324)),{spawn,exec}=require('child_process'),path=require(a0_0x160a1b(0x29c)),fs=require('fs'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x160a1b(0x19b),LTM_SCHEDULE='0\x203\x20*\x20*\x20*',MODE_RESET_SCHEDULE='0\x204\x20*\x20*\x20*',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0x160a1b(0x1e3),LTM_DP_STATUS=a0_0x160a1b(0x195),LTM_DP_TRIGGER_DIGEST=a0_0x160a1b(0x1bc),LTM_DP_BASELINE_STATUS=a0_0x160a1b(0x203),LTM_DP_DRIFT_CHANNEL=a0_0x160a1b(0x2bf),LTM_DP_DRIFT_STATUS=a0_0x160a1b(0x328),LTM_DP_DRIFT_DETAILS=a0_0x160a1b(0x35b),LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':'normal','VACATION':a0_0x160a1b(0x19c),'PARTY':a0_0x160a1b(0x2a4),'GUEST':a0_0x160a1b(0x1eb)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x160a1b(0x2b0)],SYSTEM_MODES[a0_0x160a1b(0x338)]],PERSONA_MAPPING={'generic':a0_0x160a1b(0x274),'senior_aal':a0_0x160a1b(0x22e),'family':a0_0x160a1b(0x343),'single_comfort':a0_0x160a1b(0x264),'security':a0_0x160a1b(0x1fb)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0},IS_WIN=process[a0_0x160a1b(0x1fa)]===a0_0x160a1b(0x2f5),VENV_PATH=path[a0_0x160a1b(0x1be)](__dirname,a0_0x160a1b(0x32b)),PYTHON_EXE=IS_WIN?path[a0_0x160a1b(0x1be)](VENV_PATH,a0_0x160a1b(0x35e),'python.exe'):path[a0_0x160a1b(0x1be)](VENV_PATH,'bin',a0_0x160a1b(0x29b)),PIP_EXE=IS_WIN?path[a0_0x160a1b(0x1be)](VENV_PATH,a0_0x160a1b(0x35e),a0_0x160a1b(0x2df)):path[a0_0x160a1b(0x1be)](VENV_PATH,a0_0x160a1b(0x217),a0_0x160a1b(0x200));class CogniLiving extends utils[a0_0x160a1b(0x21b)]{constructor(_0x4372f1){const _0x473237=a0_0x160a1b;super({..._0x4372f1,'name':_0x473237(0x2b6)}),this[_0x473237(0x1f1)]=[],this[_0x473237(0x201)]=[],this['rawEventLog']=[],this[_0x473237(0x342)]=[],this[_0x473237(0x344)]={},this[_0x473237(0x1f5)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x473237(0x1a6)]=!![],this[_0x473237(0x334)]=null,this[_0x473237(0x1d4)]=null,this['isGracePeriodActive']=![],this[_0x473237(0x1d1)]=null,this['geminiModel']=null,this[_0x473237(0x209)]=SYSTEM_MODES['NORMAL'],this[_0x473237(0x291)]=![],this[_0x473237(0x22f)]=![],this[_0x473237(0x20d)]=_0x473237(0x2c0),this[_0x473237(0x293)]=null,this[_0x473237(0x1b3)]=null,this['modeResetJob']=null,this[_0x473237(0x2c1)]=null,this[_0x473237(0x22a)]=null,this[_0x473237(0x35d)]=null,this[_0x473237(0x33c)]=![],this['panicMode']=![],this[_0x473237(0x2fa)]=[],this[_0x473237(0x238)]=null,this['on']('ready',this[_0x473237(0x318)]['bind'](this)),this['on']('stateChange',this['onStateChange'][_0x473237(0x245)](this)),this['on'](_0x473237(0x19d),this['onUnload'][_0x473237(0x245)](this)),this['on'](_0x473237(0x2ef),this[_0x473237(0x2d8)][_0x473237(0x245)](this));}async['onReady'](){const _0x5a0420=a0_0x160a1b;this[_0x5a0420(0x249)][_0x5a0420(0x29a)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x5a0420(0x267)]+_0x5a0420(0x2dc)),await this[_0x5a0420(0x2d7)](),this[_0x5a0420(0x225)][_0x5a0420(0x2cd)]=this[_0x5a0420(0x225)][_0x5a0420(0x2cd)]||'';try{this[_0x5a0420(0x291)]=await this[_0x5a0420(0x1bf)](this['config'][_0x5a0420(0x2cd)]);}catch(_0x374b93){}if(!this[_0x5a0420(0x225)]['inactivityThresholdHours']||this[_0x5a0420(0x225)]['inactivityThresholdHours']<0.1)this[_0x5a0420(0x225)][_0x5a0420(0x2ea)]=0xc;await this[_0x5a0420(0x294)](),await this[_0x5a0420(0x266)]();if(this[_0x5a0420(0x225)][_0x5a0420(0x251)])try{this[_0x5a0420(0x1d1)]=new GoogleGenerativeAI(this[_0x5a0420(0x225)][_0x5a0420(0x251)]),this['geminiModel']=this[_0x5a0420(0x1d1)][_0x5a0420(0x1c8)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this['log'][_0x5a0420(0x29a)]('Gemini\x20AI\x20initialized.');}catch(_0x50b348){this[_0x5a0420(0x249)][_0x5a0420(0x315)](_0x5a0420(0x248)+_0x50b348[_0x5a0420(0x2ef)]);}await this[_0x5a0420(0x1b0)](),await this[_0x5a0420(0x1ea)](),await this[_0x5a0420(0x1a8)](),await this['loadDailyDigests'](),this[_0x5a0420(0x345)](_0x5a0420(0x202)),this[_0x5a0420(0x345)](LTM_DP_TRIGGER_DIGEST),this[_0x5a0420(0x345)](_0x5a0420(0x1ab)),this['subscribeStates'](_0x5a0420(0x265)),this[_0x5a0420(0x345)](_0x5a0420(0x204)),this[_0x5a0420(0x345)](_0x5a0420(0x212)),this[_0x5a0420(0x345)](_0x5a0420(0x239)),this['subscribeStates'](_0x5a0420(0x18e)),this[_0x5a0420(0x345)](_0x5a0420(0x1d5)),await this[_0x5a0420(0x2ce)](),await this['initPresenceSubscriptions'](),await this[_0x5a0420(0x339)](),setTimeout(()=>this[_0x5a0420(0x26b)](),0x1388);if(this[_0x5a0420(0x293)])clearInterval(this[_0x5a0420(0x293)]);const _0xeae3ab=this[_0x5a0420(0x225)]['analysisInterval']||0xf;_0xeae3ab>0x0&&(this[_0x5a0420(0x293)]=setInterval(()=>{const _0xc1ba18=_0x5a0420;this[_0xc1ba18(0x1d6)]();},_0xeae3ab*0x3c*0x3e8)),this[_0x5a0420(0x24c)](),this[_0x5a0420(0x191)](),this['setupDriftAnalysisScheduler'](),this[_0x5a0420(0x1cd)](),this[_0x5a0420(0x1c0)](),setTimeout(()=>{const _0x3b6268=_0x5a0420;if(this[_0x3b6268(0x35d)])this[_0x3b6268(0x2c7)]();},0x1388);}['onUnload'](_0x252093){const _0x3ca232=a0_0x160a1b;if(this[_0x3ca232(0x293)])clearInterval(this[_0x3ca232(0x293)]);if(this[_0x3ca232(0x2c1)])clearInterval(this['driftAnalysisTimer']);if(this['ltmJob'])this[_0x3ca232(0x1b3)][_0x3ca232(0x2c2)]();if(this[_0x3ca232(0x27d)])this[_0x3ca232(0x27d)]['cancel']();if(this[_0x3ca232(0x22a)])this[_0x3ca232(0x22a)][_0x3ca232(0x2c2)]();if(this[_0x3ca232(0x334)])clearTimeout(this[_0x3ca232(0x334)]);if(this['exitGraceTimer'])clearTimeout(this[_0x3ca232(0x1d4)]);this[_0x3ca232(0x2da)](),_0x252093();}async[a0_0x160a1b(0x1af)](_0x57ce43,_0x23bf39){const _0x42966c=a0_0x160a1b;if(!_0x23bf39)return;if(this[_0x42966c(0x33c)]||this[_0x42966c(0x287)])return;if(_0x57ce43[_0x42966c(0x188)]('telegram')&&_0x57ce43['endsWith'](_0x42966c(0x1da))&&_0x23bf39[_0x42966c(0x346)]){await this[_0x42966c(0x24d)](_0x23bf39[_0x42966c(0x346)]);return;}if(_0x57ce43===this['namespace']+'.'+SYSTEM_DP_MODE){_0x23bf39[_0x42966c(0x346)]&&Object[_0x42966c(0x240)](SYSTEM_MODES)[_0x42966c(0x188)](_0x23bf39[_0x42966c(0x346)])&&(this[_0x42966c(0x209)]=_0x23bf39[_0x42966c(0x346)],_0x23bf39[_0x42966c(0x346)]===SYSTEM_MODES[_0x42966c(0x284)]?await this[_0x42966c(0x2e5)](![]):await this[_0x42966c(0x2e5)](!![]));if(!_0x23bf39[_0x42966c(0x2d6)])this[_0x42966c(0x31e)](_0x57ce43,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x23bf39[_0x42966c(0x2d6)]){_0x57ce43[_0x42966c(0x188)](_0x42966c(0x202))&&_0x23bf39[_0x42966c(0x346)]&&(this[_0x42966c(0x31e)](_0x57ce43,{'val':![],'ack':!![]}),this[_0x42966c(0x1a7)]());if(_0x57ce43[_0x42966c(0x188)](_0x42966c(0x289))&&_0x23bf39[_0x42966c(0x346)]){this[_0x42966c(0x31e)](_0x57ce43,{'val':![],'ack':!![]});if(this[_0x42966c(0x291)])this[_0x42966c(0x218)]();}_0x57ce43['includes'](_0x42966c(0x31c))&&_0x23bf39[_0x42966c(0x346)]&&(this['setState'](_0x57ce43,{'val':![],'ack':!![]}),this[_0x42966c(0x26d)]());_0x57ce43[_0x42966c(0x188)](_0x42966c(0x18d))&&_0x23bf39['val']&&(this[_0x42966c(0x31e)](_0x57ce43,{'val':![],'ack':!![]}),this['executeAutomationAction']());if(_0x57ce43[_0x42966c(0x188)](_0x42966c(0x239))&&_0x23bf39[_0x42966c(0x346)]){this[_0x42966c(0x31e)](_0x57ce43,{'val':![],'ack':!![]});if(!this[_0x42966c(0x291)])return;try{const _0x5b7d85=await this[_0x42966c(0x2f9)](_0x42966c(0x31b));if(_0x5b7d85&&_0x5b7d85[_0x42966c(0x346)]){const _0x4dd960=JSON[_0x42966c(0x1e0)](_0x5b7d85['val']);this[_0x42966c(0x249)][_0x42966c(0x29a)](_0x42966c(0x1f9)+_0x4dd960[_0x42966c(0x2c4)]+_0x42966c(0x2f8)),this['setStateAsync'](_0x42966c(0x24e),{'val':_0x42966c(0x2a0),'ack':!![]}),this[_0x42966c(0x333)](_0x42966c(0x1d2),{'sequences':_0x4dd960});}}catch(_0xc5b325){this[_0x42966c(0x249)][_0x42966c(0x315)](_0x42966c(0x1bb)+_0xc5b325['message']);}}if(_0x57ce43[_0x42966c(0x188)]('analysis.training.triggerHealth')&&_0x23bf39['val']){this['setState'](_0x57ce43,{'val':![],'ack':!![]});if(!this['isProVersion'])return;try{const _0x17907e=await this[_0x42966c(0x2f9)](LTM_DP_DAILY_DIGESTS);_0x17907e&&_0x17907e['val']&&this[_0x42966c(0x333)](_0x42966c(0x257),{'digests':JSON[_0x42966c(0x1e0)](_0x17907e['val'])});}catch(_0xefe23e){}}if(_0x57ce43[_0x42966c(0x188)](_0x42966c(0x1d5))&&_0x23bf39['val']){this['setState'](_0x57ce43,{'val':![],'ack':!![]});if(!this[_0x42966c(0x291)])return;try{const _0x1d1096=await this['getStateAsync']('LTM.trainingData.thermodynamics');_0x1d1096&&_0x1d1096[_0x42966c(0x346)]&&this['sendToPython'](_0x42966c(0x319),{'points':JSON[_0x42966c(0x1e0)](_0x1d1096[_0x42966c(0x346)])});}catch(_0x44999a){}}return;}if(this['config'][_0x42966c(0x2c6)]&&this[_0x42966c(0x225)][_0x42966c(0x2c6)]['includes'](_0x57ce43)){await this[_0x42966c(0x26b)]();return;}const _0x2581cb=(this[_0x42966c(0x225)][_0x42966c(0x2cf)]||[])[_0x42966c(0x325)](_0x1d66e0=>_0x1d66e0['id']===_0x57ce43);if(_0x2581cb)this[_0x42966c(0x196)](_0x57ce43,_0x23bf39,_0x2581cb);}async[a0_0x160a1b(0x2d8)](_0x14d208){const _0x24d52a=a0_0x160a1b;if(typeof _0x14d208===_0x24d52a(0x1c7)&&_0x14d208[_0x24d52a(0x2ef)]){if(_0x14d208[_0x24d52a(0x2be)]==='testApiKey'){const _0x2bf8ff=_0x14d208[_0x24d52a(0x2ef)][_0x24d52a(0x341)]||this['config']['geminiApiKey'];if(!_0x2bf8ff)return this[_0x24d52a(0x2ab)](_0x14d208[_0x24d52a(0x259)],_0x14d208[_0x24d52a(0x2be)],{'success':![],'message':'Kein\x20API\x20Key.'},_0x14d208['callback']);try{const _0x31f7ff=new GoogleGenerativeAI(_0x2bf8ff),_0x17e4f7=_0x31f7ff[_0x24d52a(0x1c8)]({'model':GEMINI_MODEL}),_0xb32845=await _0x17e4f7[_0x24d52a(0x1c9)]('Hi');this[_0x24d52a(0x2ab)](_0x14d208[_0x24d52a(0x259)],_0x14d208[_0x24d52a(0x2be)],{'success':!![],'message':_0x24d52a(0x304)+_0xb32845[_0x24d52a(0x32a)][_0x24d52a(0x220)]()},_0x14d208[_0x24d52a(0x1e4)]);}catch(_0x39ad49){this[_0x24d52a(0x2ab)](_0x14d208[_0x24d52a(0x259)],_0x14d208[_0x24d52a(0x2be)],{'success':![],'message':_0x24d52a(0x2cb)+_0x39ad49[_0x24d52a(0x2ef)]},_0x14d208[_0x24d52a(0x1e4)]);}}else{if(_0x14d208[_0x24d52a(0x2be)]==='getLtmData'){if(!this[_0x24d52a(0x291)])return this[_0x24d52a(0x2ab)](_0x14d208[_0x24d52a(0x259)],_0x14d208[_0x24d52a(0x2be)],{'success':![],'isPro':![]},_0x14d208[_0x24d52a(0x1e4)]);let _0x7ebcbf={'status':_0x24d52a(0x24a),'details':''};try{const _0x2285b8=await this['getStateAsync'](LTM_DP_DRIFT_STATUS),_0x13e21b=await this[_0x24d52a(0x2f9)](LTM_DP_DRIFT_DETAILS);_0x7ebcbf[_0x24d52a(0x296)]=_0x2285b8?_0x2285b8[_0x24d52a(0x346)]:'N/A',_0x7ebcbf[_0x24d52a(0x26a)]=_0x13e21b?_0x13e21b[_0x24d52a(0x346)]:'';}catch(_0x5ad2dc){}this['sendTo'](_0x14d208[_0x24d52a(0x259)],_0x14d208['command'],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x7ebcbf,'analysisHistory':this['analysisHistory']},_0x14d208[_0x24d52a(0x1e4)]);}else{if(_0x14d208[_0x24d52a(0x2be)]===_0x24d52a(0x1ca)){const _0x22ee3f=this[_0x24d52a(0x342)][_0x24d52a(0x2c4)],_0x9e54f0=new Date(),_0x5bcab9=new Date(_0x9e54f0['getFullYear'](),_0x9e54f0[_0x24d52a(0x2bd)](),_0x9e54f0[_0x24d52a(0x32c)]())[_0x24d52a(0x2f3)](),_0x3d8657=this['rawEventLog']['filter'](_0x14640f=>new Date(_0x14640f[_0x24d52a(0x189)])['getTime']()>_0x5bcab9)[_0x24d52a(0x2c4)],_0x1ca07a=new Array(0x18)[_0x24d52a(0x1e6)](0x0);this[_0x24d52a(0x27c)][_0x24d52a(0x2ae)](_0x4550e3=>{const _0xa0736e=_0x24d52a,_0x42d530=new Date(_0x4550e3[_0xa0736e(0x189)]);if(_0x42d530[_0xa0736e(0x2f3)]()>_0x5bcab9)_0x1ca07a[_0x42d530[_0xa0736e(0x1a9)]()]++;});let _0x39fa3a={'status':_0x24d52a(0x24a)};try{const _0x19d891=await this[_0x24d52a(0x2f9)](LTM_DP_DRIFT_STATUS);_0x39fa3a[_0x24d52a(0x296)]=_0x19d891?_0x19d891['val']:_0x24d52a(0x24a);}catch(_0x359cd5){}let _0x244c3a='';try{const _0x54c64c=await this['getStateAsync'](_0x24d52a(0x228));_0x244c3a=_0x54c64c?_0x54c64c[_0x24d52a(0x346)]:'';}catch(_0x13a762){}let _0x13fb23=null;!this[_0x24d52a(0x1ad)]&&(_0x13fb23=this['config'][_0x24d52a(0x251)]?_0x24d52a(0x1ba):'Kein\x20API\x20Key!');let _0xab0203={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x588964=await this[_0x24d52a(0x2f9)](_0x24d52a(0x20a));if(_0x588964&&_0x588964[_0x24d52a(0x346)]){_0xab0203[_0x24d52a(0x2c8)]=!![];const _0x294a20=await this[_0x24d52a(0x2f9)](_0x24d52a(0x2cc));_0xab0203['description']=_0x294a20?_0x294a20[_0x24d52a(0x346)]:'';const _0x21501f=await this[_0x24d52a(0x2f9)](_0x24d52a(0x20b));_0xab0203[_0x24d52a(0x1aa)]=_0x21501f?_0x21501f[_0x24d52a(0x346)]:'';const _0x3ed5ce=await this[_0x24d52a(0x2f9)]('analysis.automation.targetValue');_0xab0203[_0x24d52a(0x25c)]=_0x3ed5ce?_0x3ed5ce['val']:'';}const _0x45d7b6=await this[_0x24d52a(0x2f9)]('analysis.automation.autoApply');_0xab0203[_0x24d52a(0x23c)]=_0x45d7b6?!!_0x45d7b6['val']:![];}catch(_0x238746){}this['sendTo'](_0x14d208[_0x24d52a(0x259)],_0x14d208['command'],{'success':!![],'eventHistory':this[_0x24d52a(0x1f1)][_0x24d52a(0x34a)](0x0,0xf),'stats':{'digestCount':_0x22ee3f,'eventCountToday':_0x3d8657,'hourlyActivity':_0x1ca07a,'driftStatus':_0x39fa3a[_0x24d52a(0x296)],'isPresent':this[_0x24d52a(0x1a6)],'presenceWho':_0x244c3a,'minDays':this[_0x24d52a(0x225)]['minDaysForBaseline']||0x7,'stbDays':this[_0x24d52a(0x225)][_0x24d52a(0x313)]||0xe,'ltbDays':this[_0x24d52a(0x225)][_0x24d52a(0x23f)]||0x3c,'systemError':_0x13fb23},'automation':_0xab0203},_0x14d208[_0x24d52a(0x1e4)]);}else{if(_0x14d208[_0x24d52a(0x2be)]==='scanDevices')try{const _0x1e5327=await this[_0x24d52a(0x355)](_0x14d208[_0x24d52a(0x2ef)]||{});this[_0x24d52a(0x2ab)](_0x14d208['from'],_0x14d208[_0x24d52a(0x2be)],{'success':!![],'devices':_0x1e5327},_0x14d208[_0x24d52a(0x1e4)]);}catch(_0x46bc7c){this[_0x24d52a(0x2ab)](_0x14d208[_0x24d52a(0x259)],_0x14d208[_0x24d52a(0x2be)],{'success':![],'error':_0x46bc7c['message']},_0x14d208[_0x24d52a(0x1e4)]);}else{if(_0x14d208[_0x24d52a(0x2be)]==='getEnums'){const _0x1781a8=await this[_0x24d52a(0x1f4)]('enum.functions.*',_0x24d52a(0x322)),_0x2f1356=[];if(_0x1781a8)for(const _0x1d4fea in _0x1781a8){const _0x467885=_0x1781a8[_0x1d4fea],_0x233d1d=(_0x467885[_0x24d52a(0x1a4)]&&typeof _0x467885[_0x24d52a(0x1a4)][_0x24d52a(0x20f)]==='object'?_0x467885[_0x24d52a(0x1a4)][_0x24d52a(0x20f)]['de']:_0x467885[_0x24d52a(0x1a4)]['name'])||_0x467885[_0x24d52a(0x1a4)][_0x24d52a(0x20f)];_0x2f1356['push']({'id':_0x1d4fea,'name':_0x233d1d});}this[_0x24d52a(0x2ab)](_0x14d208[_0x24d52a(0x259)],_0x14d208[_0x24d52a(0x2be)],{'success':!![],'enums':_0x2f1356},_0x14d208[_0x24d52a(0x1e4)]);}else{if(_0x14d208[_0x24d52a(0x2be)]===_0x24d52a(0x271)){const _0x4f4ee2=_0x14d208['message']['instance'];if(!_0x4f4ee2)return this['sendTo'](_0x14d208[_0x24d52a(0x259)],_0x14d208['command'],{'success':![],'error':_0x24d52a(0x211)},_0x14d208[_0x24d52a(0x1e4)]);const _0x120866=await this['getCalendarNames'](_0x4f4ee2);this[_0x24d52a(0x2ab)](_0x14d208[_0x24d52a(0x259)],_0x14d208[_0x24d52a(0x2be)],{'success':!![],'names':_0x120866},_0x14d208['callback']);}}}}}}}}async[a0_0x160a1b(0x2d7)](){const _0x53f28c=a0_0x160a1b;try{const _0x36fc27=[_0x53f28c(0x292),_0x53f28c(0x198)];for(const _0x416feb of _0x36fc27){try{const _0x546729=await this['getObjectAsync'](_0x416feb);if(_0x546729)await this['delObjectAsync'](_0x416feb);}catch(_0x439789){}}}catch(_0x376658){}}async[a0_0x160a1b(0x1bf)](_0x1c534f){return!![];}async[a0_0x160a1b(0x286)](){return'uuid';}async[a0_0x160a1b(0x294)](){const _0xc853d7=a0_0x160a1b;try{const _0x5e6136=await this[_0xc853d7(0x2f9)](_0xc853d7(0x2aa));_0x5e6136&&_0x5e6136['val']&&(this[_0xc853d7(0x1f1)]=JSON[_0xc853d7(0x1e0)](_0x5e6136[_0xc853d7(0x346)][_0xc853d7(0x29e)]()));}catch(_0x1ef6ec){this[_0xc853d7(0x1f1)]=[];}try{const _0x161b49=await this[_0xc853d7(0x2f9)](_0xc853d7(0x244));if(_0x161b49&&_0x161b49[_0xc853d7(0x346)])this[_0xc853d7(0x201)]=JSON[_0xc853d7(0x1e0)](_0x161b49[_0xc853d7(0x346)]['toString']());}catch(_0x1b17fd){this[_0xc853d7(0x201)]=[];}if(this['eventHistory']&&this[_0xc853d7(0x1f1)]['length']>0x0){this['log'][_0xc853d7(0x29a)](_0xc853d7(0x35f));for(let _0x1cfcad=this['eventHistory'][_0xc853d7(0x2c4)]-0x1;_0x1cfcad>=0x0;_0x1cfcad--){const _0xcddc0b=this['eventHistory'][_0x1cfcad];if(_0xcddc0b&&_0xcddc0b['id']!==undefined&&_0xcddc0b[_0xc853d7(0x2ed)]!==undefined)this['sensorLastValues'][_0xcddc0b['id']]=_0xcddc0b['value'];}}}async[a0_0x160a1b(0x266)](){const _0x506f84=a0_0x160a1b;try{const _0x562cf2=await this['getForeignObjectAsync']('system.config');if(_0x562cf2&&_0x562cf2[_0x506f84(0x1a4)])this[_0x506f84(0x1f5)]={'latitude':_0x562cf2['common']['latitude']||0x0,'longitude':_0x562cf2[_0x506f84(0x1a4)][_0x506f84(0x2f4)]||0x0,'city':_0x562cf2[_0x506f84(0x1a4)][_0x506f84(0x32e)]||''};}catch(_0x37e229){}}async['loadRawEventLog'](){const _0xfb60ed=a0_0x160a1b;try{const _0x17c0d9=await this['getStateAsync'](LTM_DP_RAW_LOG);if(_0x17c0d9&&_0x17c0d9['val'])this['rawEventLog']=JSON[_0xfb60ed(0x1e0)](_0x17c0d9[_0xfb60ed(0x346)]);}catch(_0x2a9578){this[_0xfb60ed(0x27c)]=[];}}async['saveRawEventLog'](){const _0x418056=a0_0x160a1b;if(this['rawEventLog']['length']>RAW_LOG_MAX_SIZE)this[_0x418056(0x27c)][_0x418056(0x193)](0x0,this['rawEventLog'][_0x418056(0x2c4)]-RAW_LOG_MAX_SIZE);await this[_0x418056(0x29d)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](this[_0x418056(0x27c)]),'ack':!![]});}async[a0_0x160a1b(0x282)](){const _0x569a45=a0_0x160a1b;try{const _0xbb98d9=await this[_0x569a45(0x2f9)](LTM_DP_DAILY_DIGESTS);if(_0xbb98d9&&_0xbb98d9[_0x569a45(0x346)])this['dailyDigests']=JSON[_0x569a45(0x1e0)](_0xbb98d9['val']);}catch(_0x49cbb0){this[_0x569a45(0x342)]=[];}await this[_0x569a45(0x354)]();}async[a0_0x160a1b(0x258)](_0x1fe4a5=!![]){const _0x3e151e=a0_0x160a1b,_0x284088=this['config'][_0x3e151e(0x23f)]||0x3c;this[_0x3e151e(0x342)][_0x3e151e(0x2c4)]>_0x284088&&this[_0x3e151e(0x342)][_0x3e151e(0x193)](0x0,this[_0x3e151e(0x342)][_0x3e151e(0x2c4)]-_0x284088);await this['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x3e151e(0x301)](this[_0x3e151e(0x342)]),'ack':!![]});if(_0x1fe4a5)await this['updateBaselineStatus']();}async[a0_0x160a1b(0x352)](_0x4b421b){const _0x4eb564=a0_0x160a1b;this[_0x4eb564(0x201)][_0x4eb564(0x21e)](_0x4b421b);if(this[_0x4eb564(0x201)]['length']>ANALYSIS_HISTORY_MAX_SIZE)this[_0x4eb564(0x201)][_0x4eb564(0x190)]();await this['setStateAsync']('analysis.analysisHistory',{'val':JSON[_0x4eb564(0x301)](this[_0x4eb564(0x201)]),'ack':!![]});}async[a0_0x160a1b(0x354)](){const _0x4928f6=a0_0x160a1b;if(!this[_0x4928f6(0x291)]){await this['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0x1182ec=this[_0x4928f6(0x342)][_0x4928f6(0x2c4)]>=(this['config']['minDaysForBaseline']||0x7)?_0x4928f6(0x18a)+this['dailyDigests'][_0x4928f6(0x2c4)]+_0x4928f6(0x273):_0x4928f6(0x33b)+this[_0x4928f6(0x342)][_0x4928f6(0x2c4)]+'/'+(this['config'][_0x4928f6(0x320)]||0x7)+')';await this[_0x4928f6(0x29d)](LTM_DP_BASELINE_STATUS,{'val':_0x1182ec,'ack':!![]});}async[a0_0x160a1b(0x1ea)](){const _0x397bd6=a0_0x160a1b;try{const _0x17a34a=await this[_0x397bd6(0x2f9)](SYSTEM_DP_MODE);_0x17a34a&&_0x17a34a[_0x397bd6(0x346)]&&Object[_0x397bd6(0x240)](SYSTEM_MODES)[_0x397bd6(0x188)](_0x17a34a[_0x397bd6(0x346)])?this[_0x397bd6(0x209)]=_0x17a34a[_0x397bd6(0x346)]:(this['currentSystemMode']=SYSTEM_MODES[_0x397bd6(0x299)],await this[_0x397bd6(0x29d)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x397bd6(0x299)],'ack':!![]}));}catch(_0x6a4975){this[_0x397bd6(0x209)]=SYSTEM_MODES[_0x397bd6(0x299)];}}async[a0_0x160a1b(0x1b0)](){const _0x331a4a=a0_0x160a1b;await this[_0x331a4a(0x270)](_0x331a4a(0x321),{'type':_0x331a4a(0x309),'common':{'name':_0x331a4a(0x261)},'native':{}}),await this[_0x331a4a(0x270)](SYSTEM_DP_MODE,{'type':_0x331a4a(0x260),'common':{'name':'System\x20Mode','type':'string','role':_0x331a4a(0x260),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x331a4a(0x299)]},'native':{}}),await this[_0x331a4a(0x2b1)]('system.presenceWho',{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x2ee),'type':_0x331a4a(0x2d3),'role':'text','read':!![],'write':![]},'native':{}}),await this[_0x331a4a(0x2b1)]('events.lastEvent',{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x19f),'type':_0x331a4a(0x2d3),'role':_0x331a4a(0x231),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x331a4a(0x2aa),{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x2d4),'type':_0x331a4a(0x2d3),'role':_0x331a4a(0x231),'read':!![],'write':![]},'native':{}}),await this[_0x331a4a(0x270)](_0x331a4a(0x210),{'type':_0x331a4a(0x309),'common':{'name':_0x331a4a(0x276)},'native':{}}),await this['setObjectNotExistsAsync'](_0x331a4a(0x239),{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x23b),'type':'boolean','role':_0x331a4a(0x349),'read':!![],'write':!![]},'native':{}}),await this[_0x331a4a(0x2b1)](_0x331a4a(0x18e),{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x2e4),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await this[_0x331a4a(0x2b1)]('analysis.training.triggerEnergy',{'type':_0x331a4a(0x260),'common':{'name':'Train\x20Energy','type':'boolean','role':_0x331a4a(0x349),'read':!![],'write':!![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x331a4a(0x24e),{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x1a1),'type':_0x331a4a(0x2d3),'role':'text','read':!![],'write':![]},'native':{}}),await this[_0x331a4a(0x270)](_0x331a4a(0x2bc),{'type':_0x331a4a(0x309),'common':{'name':_0x331a4a(0x2d2)},'native':{}}),await this['setObjectNotExistsAsync'](_0x331a4a(0x2b7),{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x213),'type':_0x331a4a(0x2a1),'role':_0x331a4a(0x2ed),'read':!![],'write':![]},'native':{}}),await this[_0x331a4a(0x2b1)](_0x331a4a(0x2af),{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x21d),'type':'string','role':_0x331a4a(0x1ec),'read':!![],'write':![]},'native':{}}),await this[_0x331a4a(0x270)](_0x331a4a(0x30f),{'type':'channel','common':{'name':_0x331a4a(0x1fe)},'native':{}}),await this['setObjectNotExistsAsync'](_0x331a4a(0x206),{'type':'state','common':{'name':_0x331a4a(0x21d),'type':_0x331a4a(0x2d3),'role':_0x331a4a(0x1ec),'read':!![],'write':![]},'native':{}}),await this[_0x331a4a(0x2b1)]('analysis.health.isAnomaly',{'type':'state','common':{'name':_0x331a4a(0x2bb),'type':'boolean','role':_0x331a4a(0x18f),'read':!![],'write':![]},'native':{}}),await this[_0x331a4a(0x2b1)](_0x331a4a(0x305),{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x2e6),'type':_0x331a4a(0x2d3),'role':_0x331a4a(0x220),'read':!![],'write':![]},'native':{}}),await this[_0x331a4a(0x2b1)](_0x331a4a(0x1ae),{'type':'state','common':{'name':_0x331a4a(0x24f),'type':_0x331a4a(0x2a1),'role':_0x331a4a(0x2ed),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](_0x331a4a(0x347),{'type':_0x331a4a(0x309),'common':{'name':'Energy\x20Intelligence'},'native':{}}),await this['setObjectNotExistsAsync'](_0x331a4a(0x307),{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x359),'type':_0x331a4a(0x2d3),'role':_0x331a4a(0x220),'read':!![],'write':![]},'native':{}}),await this[_0x331a4a(0x2b1)]('analysis.energy.heatingScore',{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x22d),'type':_0x331a4a(0x2d3),'role':_0x331a4a(0x220),'read':!![],'write':![]},'native':{}}),await this[_0x331a4a(0x270)]('LTM',{'type':'channel','common':{'name':_0x331a4a(0x34c)},'native':{}}),await this[_0x331a4a(0x270)](LTM_DP_RAW_LOG,{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x1ac),'type':'string','role':_0x331a4a(0x231),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x232),'type':_0x331a4a(0x2d3),'role':_0x331a4a(0x231),'read':!![],'write':![]},'native':{}}),await this[_0x331a4a(0x2b1)](_0x331a4a(0x31b),{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x2f6),'type':_0x331a4a(0x2d3),'role':'json','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x331a4a(0x2fe),{'type':'state','common':{'name':_0x331a4a(0x184),'type':'string','role':_0x331a4a(0x231),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x331a4a(0x202),{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x28f),'type':'boolean','role':_0x331a4a(0x349),'read':!![],'write':!![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x331a4a(0x265),{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x357),'type':_0x331a4a(0x24b),'role':_0x331a4a(0x349),'read':!![],'write':!![]},'native':{}}),await this[_0x331a4a(0x2b1)]('analysis.isAlert',{'type':_0x331a4a(0x260),'common':{'name':'Alert\x20Status','type':_0x331a4a(0x24b),'role':_0x331a4a(0x241),'read':!![],'write':![]},'native':{}}),await this[_0x331a4a(0x2b1)](_0x331a4a(0x356),{'type':_0x331a4a(0x260),'common':{'name':'Alert\x20Reason','type':_0x331a4a(0x2d3),'role':_0x331a4a(0x2fd),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x331a4a(0x227),{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x1d7),'type':_0x331a4a(0x2d3),'role':_0x331a4a(0x220),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.automation.patternDetected',{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x277),'type':_0x331a4a(0x24b),'role':_0x331a4a(0x18f),'read':!![],'write':![]},'native':{}}),await this[_0x331a4a(0x2b1)](_0x331a4a(0x2cc),{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x25a),'type':_0x331a4a(0x2d3),'role':_0x331a4a(0x220),'read':!![],'write':![]},'native':{}}),await this[_0x331a4a(0x2b1)](_0x331a4a(0x20b),{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x1de),'type':'string','role':_0x331a4a(0x220),'read':!![],'write':![]},'native':{}}),await this[_0x331a4a(0x2b1)]('analysis.automation.targetValue',{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x223),'type':_0x331a4a(0x2d3),'role':'text','read':!![],'write':![]},'native':{}}),await this[_0x331a4a(0x2b1)]('analysis.automation.autoApply',{'type':_0x331a4a(0x260),'common':{'name':_0x331a4a(0x1c6),'type':_0x331a4a(0x24b),'role':_0x331a4a(0x235),'read':!![],'write':!![]},'native':{}}),await this[_0x331a4a(0x2b1)](_0x331a4a(0x204),{'type':_0x331a4a(0x260),'common':{'name':'Trigger\x20Action','type':'boolean','role':_0x331a4a(0x349),'read':!![],'write':!![]},'native':{}});}async['processSensorEvent'](_0x2c250b,_0x308c27,_0x84b1e0){const _0x1deb12=a0_0x160a1b;if(!_0x84b1e0)return;const _0x3ea6c2=_0x308c27['val'],_0x54f428=Date[_0x1deb12(0x2fb)](),_0x487431=this['sensorLastValues'][_0x2c250b];this[_0x1deb12(0x344)][_0x2c250b]=_0x3ea6c2;if(!_0x84b1e0['logDuplicates']&&_0x487431!=undefined&&_0x487431==_0x3ea6c2)return;const _0x40b787=(_0x84b1e0[_0x1deb12(0x226)]||'')[_0x1deb12(0x336)](),_0x403a42=_0x40b787[_0x1deb12(0x188)]('temperature')||_0x40b787[_0x1deb12(0x188)](_0x1deb12(0x187))||_0x40b787['includes'](_0x1deb12(0x290))||_0x40b787[_0x1deb12(0x188)](_0x1deb12(0x31f));this[_0x1deb12(0x291)]&&_0x403a42&&this['recordThermodynamics'](_0x2c250b,_0x3ea6c2,_0x84b1e0[_0x1deb12(0x199)]);const _0x309d64={'timestamp':_0x54f428,'id':_0x2c250b,'name':_0x84b1e0[_0x1deb12(0x20f)],'type':_0x84b1e0[_0x1deb12(0x226)],'location':_0x84b1e0['location'],'value':_0x3ea6c2};this[_0x1deb12(0x1f1)][_0x1deb12(0x21e)](_0x309d64);if(this['eventHistory'][_0x1deb12(0x2c4)]>HISTORY_MAX_SIZE)this[_0x1deb12(0x1f1)][_0x1deb12(0x190)]();await this[_0x1deb12(0x29d)](_0x1deb12(0x185),{'val':JSON[_0x1deb12(0x301)](_0x309d64),'ack':!![]}),await this[_0x1deb12(0x29d)](_0x1deb12(0x2aa),{'val':JSON[_0x1deb12(0x301)](this[_0x1deb12(0x1f1)]),'ack':!![]});this[_0x1deb12(0x291)]&&(this[_0x1deb12(0x27c)][_0x1deb12(0x197)](_0x309d64),await this[_0x1deb12(0x22b)](),this[_0x1deb12(0x1cf)](_0x309d64));if(_0x84b1e0[_0x1deb12(0x1ee)]&&_0x3ea6c2===!![]){if(this[_0x1deb12(0x1a6)]&&!this[_0x1deb12(0x1cb)])this[_0x1deb12(0x340)]();else{if(!this['isPresent'])this[_0x1deb12(0x2e5)](!![]);}}else{if(_0x84b1e0[_0x1deb12(0x226)]==='motion'&&_0x3ea6c2===!![]){if(this['exitTimer'])this[_0x1deb12(0x1f6)]();if(!this[_0x1deb12(0x1a6)]&&this['currentSystemMode']===SYSTEM_MODES['NORMAL'])this[_0x1deb12(0x2e5)](!![]);}}}async[a0_0x160a1b(0x1cf)](_0x50d842){const _0x161d3e=a0_0x160a1b,_0x5dac1a=(_0x50d842['type']||'')[_0x161d3e(0x336)](),_0x152937=[_0x161d3e(0x34f),_0x161d3e(0x281),_0x161d3e(0x2d9),_0x161d3e(0x237),_0x161d3e(0x1b4),_0x161d3e(0x300),'t√ºr',_0x161d3e(0x30e),'fenster',_0x161d3e(0x311),_0x161d3e(0x314),_0x161d3e(0x327),_0x161d3e(0x2c5),_0x161d3e(0x235),_0x161d3e(0x2ba),'dimmer',_0x161d3e(0x2e8)];if(!_0x152937['some'](_0x953add=>_0x5dac1a[_0x161d3e(0x188)](_0x953add)))return;if(!_0x50d842[_0x161d3e(0x2ed)])return;if(this[_0x161d3e(0x238)])clearTimeout(this[_0x161d3e(0x238)]);this[_0x161d3e(0x2fa)]['push']({'loc':_0x50d842['location']||_0x161d3e(0x256),'id':_0x50d842['id'],'ts':Date[_0x161d3e(0x2fb)]()}),this['sequenceTimer']=setTimeout(async()=>{const _0x544fc0=_0x161d3e;if(this[_0x544fc0(0x2fa)]['length']>0x1)await this[_0x544fc0(0x26c)]();this[_0x544fc0(0x2fa)]=[];},SEQUENCE_TIMEOUT_MS);}async[a0_0x160a1b(0x26c)](){const _0x1890d6=a0_0x160a1b;try{const _0x325322=await this[_0x1890d6(0x2f9)](_0x1890d6(0x31b));let _0x23c079=[];if(_0x325322&&_0x325322[_0x1890d6(0x346)])try{_0x23c079=JSON[_0x1890d6(0x1e0)](_0x325322[_0x1890d6(0x346)]);}catch(_0x4d8e47){}const _0x155ba7=this[_0x1890d6(0x2fa)][0x0]['ts'],_0x377d12=this['activeSequence'][_0x1890d6(0x25f)](_0x5d5e85=>({'loc':_0x5d5e85[_0x1890d6(0x1fc)],'t_delta':Math[_0x1890d6(0x33f)]((_0x5d5e85['ts']-_0x155ba7)/0x3e8)})),_0xeb4ab4={'timestamp':new Date(_0x155ba7)[_0x1890d6(0x207)](),'steps':_0x377d12,'duration':Math['round']((this[_0x1890d6(0x2fa)][this['activeSequence'][_0x1890d6(0x2c4)]-0x1]['ts']-_0x155ba7)/0x3e8),'daytime':new Date(_0x155ba7)[_0x1890d6(0x1a9)]()};_0x23c079[_0x1890d6(0x197)](_0xeb4ab4);if(_0x23c079[_0x1890d6(0x2c4)]>MAX_TRAINING_SET_SIZE)_0x23c079['shift']();await this[_0x1890d6(0x29d)](_0x1890d6(0x31b),{'val':JSON[_0x1890d6(0x301)](_0x23c079),'ack':!![]}),this[_0x1890d6(0x25d)](_0xeb4ab4);}catch(_0x18b986){this[_0x1890d6(0x249)]['error'](_0x1890d6(0x2e7)+_0x18b986[_0x1890d6(0x2ef)]);}}async[a0_0x160a1b(0x295)](_0x152ab3,_0x55848f,_0x133843){const _0x222807=a0_0x160a1b,_0x40e33d=await this['getOutsideTemperatureNumeric'](),_0x5c3421=await this[_0x222807(0x2f9)](_0x222807(0x2fe));let _0xff8a45=[];if(_0x5c3421&&_0x5c3421['val'])try{_0xff8a45=JSON[_0x222807(0x1e0)](_0x5c3421[_0x222807(0x346)]);}catch(_0x2c0236){}_0xff8a45['push']({'ts':Date[_0x222807(0x2fb)](),'room':_0x133843||_0x222807(0x256),'t_in':_0x55848f,'t_out':_0x40e33d});if(_0xff8a45[_0x222807(0x2c4)]>THERMO_LOG_SIZE)_0xff8a45[_0x222807(0x2f7)]();await this['setStateAsync']('LTM.trainingData.thermodynamics',{'val':JSON['stringify'](_0xff8a45),'ack':!![]});}async[a0_0x160a1b(0x1ed)](){const _0x131952=a0_0x160a1b;if(this['config'][_0x131952(0x21f)])try{const _0x5edaef=await this[_0x131952(0x21a)](this['config']['outdoorSensorId']);if(_0x5edaef&&_0x5edaef[_0x131952(0x346)]!==undefined&&_0x5edaef[_0x131952(0x346)]!==null)return parseFloat(_0x5edaef[_0x131952(0x346)]);}catch(_0x5bc1e9){}const _0x230efc=this[_0x131952(0x225)][_0x131952(0x2b3)];if(!this[_0x131952(0x225)][_0x131952(0x2b9)]||!_0x230efc)return null;try{let _0x401106='';if(_0x230efc[_0x131952(0x188)](_0x131952(0x2a5)))_0x401106=_0x230efc+_0x131952(0x278);else{if(_0x230efc['includes']('daswetter'))_0x401106=_0x230efc+_0x131952(0x332);else{if(_0x230efc['includes'](_0x131952(0x23d)))_0x401106=_0x230efc+'.forecast.current.temperature';else{if(_0x230efc['includes'](_0x131952(0x222)))_0x401106=_0x230efc+'.forecast.current.temp';}}}if(_0x401106){const _0x299434=await this[_0x131952(0x21a)](_0x401106);if(_0x299434&&_0x299434['val']!==undefined&&_0x299434[_0x131952(0x346)]!==null)return parseFloat(_0x299434[_0x131952(0x346)]);}}catch(_0x90228c){}return null;}async[a0_0x160a1b(0x355)](_0x5829d9){const _0x52a1ed=a0_0x160a1b;this[_0x52a1ed(0x249)]['info'](_0x52a1ed(0x1b5));const _0x40a3c6=[],_0x31dd39=await this[_0x52a1ed(0x1f4)]('*'),_0x616063=await this[_0x52a1ed(0x1f4)](_0x52a1ed(0x236),'enum'),_0x441a59=await this[_0x52a1ed(0x1f4)](_0x52a1ed(0x25e),'enum'),_0x214eeb={};if(_0x616063)for(const _0x32822f in _0x616063){const _0x1e7c29=_0x616063[_0x32822f][_0x52a1ed(0x1a4)][_0x52a1ed(0x2a8)]||[];_0x1e7c29['forEach'](_0xb9cb0c=>{const _0x3665c5=_0x52a1ed;if(!_0x214eeb[_0xb9cb0c])_0x214eeb[_0xb9cb0c]=[];_0x214eeb[_0xb9cb0c][_0x3665c5(0x197)](_0x32822f);});}const _0x2ba4cc={};if(_0x441a59)for(const _0x83e2af in _0x441a59){const _0x5fd271=_0x441a59[_0x83e2af]['common'][_0x52a1ed(0x2a8)]||[],_0x411c37=typeof _0x441a59[_0x83e2af][_0x52a1ed(0x1a4)]['name']==='object'?_0x441a59[_0x83e2af][_0x52a1ed(0x1a4)][_0x52a1ed(0x20f)]['de']:_0x441a59[_0x83e2af][_0x52a1ed(0x1a4)]['name'];_0x5fd271[_0x52a1ed(0x2ae)](_0x37542c=>_0x2ba4cc[_0x37542c]=_0x411c37);}for(const _0xc18a17 in _0x31dd39){const _0x30d02d=_0x31dd39[_0xc18a17];if(_0x30d02d[_0x52a1ed(0x226)]!==_0x52a1ed(0x260)||!_0x30d02d[_0x52a1ed(0x1a4)])continue;if(ADAPTER_BLACKLIST[_0x52a1ed(0x2e2)](_0x5c3669=>_0xc18a17[_0x52a1ed(0x19a)](_0x5c3669))&&!_0x5829d9['weather'])continue;const _0x10192e=(_0x30d02d[_0x52a1ed(0x1a4)][_0x52a1ed(0x1f8)]||'')[_0x52a1ed(0x336)]();let _0x417c80=(typeof _0x30d02d[_0x52a1ed(0x1a4)]['name']===_0x52a1ed(0x1c7)?_0x30d02d[_0x52a1ed(0x1a4)][_0x52a1ed(0x20f)]['de']:_0x30d02d[_0x52a1ed(0x1a4)][_0x52a1ed(0x20f)])||_0xc18a17;const _0xce6afa=_0x417c80['toLowerCase']();let _0xb1a5c3=![];if(_0x5829d9[_0x52a1ed(0x32d)]&&_0x5829d9[_0x52a1ed(0x32d)]['length']>0x0){const _0x443e89=_0x214eeb[_0xc18a17]||[],_0x5979bd=_0xc18a17[_0x52a1ed(0x243)]('.')[_0x52a1ed(0x34a)](0x0,-0x1)['join']('.'),_0x81be80=_0x214eeb[_0x5979bd]||[];(_0x443e89['some'](_0x1441f9=>_0x5829d9[_0x52a1ed(0x32d)]['includes'](_0x1441f9))||_0x81be80['some'](_0x5b1614=>_0x5829d9[_0x52a1ed(0x32d)]['includes'](_0x5b1614)))&&(_0xb1a5c3=!![]);}if(_0x5829d9[_0x52a1ed(0x2e1)]&&_0xc18a17['includes'](_0x52a1ed(0x30b)))_0xb1a5c3=!![];if(!_0xb1a5c3&&!_0x5829d9['weather']){if(HARD_IGNORE_TERMS['some'](_0x848035=>_0xc18a17[_0x52a1ed(0x188)](_0x848035)||_0xce6afa[_0x52a1ed(0x188)](_0x848035[_0x52a1ed(0x336)]())))continue;}let _0x5cb07f='';if(_0x5829d9[_0x52a1ed(0x34f)]&&(_0x10192e[_0x52a1ed(0x188)](_0x52a1ed(0x34f))||_0x10192e[_0x52a1ed(0x188)]('occupancy')))_0x5cb07f=_0x52a1ed(0x34f);else{if(_0x5829d9[_0x52a1ed(0x2d0)]&&(_0x10192e[_0x52a1ed(0x188)]('door')||_0x10192e['includes'](_0x52a1ed(0x30e))))_0x5cb07f=_0x52a1ed(0x300);else{if(_0x5829d9[_0x52a1ed(0x1df)]&&(_0x10192e[_0x52a1ed(0x188)](_0x52a1ed(0x327))||_0x10192e[_0x52a1ed(0x188)](_0x52a1ed(0x235))))_0x5cb07f=_0x52a1ed(0x327);else{if(_0x5829d9[_0x52a1ed(0x30b)]&&(_0x10192e['includes'](_0x52a1ed(0x30b))||_0x10192e[_0x52a1ed(0x188)](_0x52a1ed(0x33e))))_0x5cb07f=_0x52a1ed(0x30b);}}}if(_0x5cb07f){let _0x48b9b4=_0x2ba4cc[_0xc18a17]||'';if(!_0x48b9b4){let _0x5eeba3=_0xc18a17;for(let _0x173d6d=0x0;_0x173d6d<0x3;_0x173d6d++){const _0xd7b436=_0x5eeba3[_0x52a1ed(0x1b6)]('.');if(_0xd7b436===-0x1)break;_0x5eeba3=_0x5eeba3[_0x52a1ed(0x27b)](0x0,_0xd7b436);if(_0x2ba4cc[_0x5eeba3]){_0x48b9b4=_0x2ba4cc[_0x5eeba3];break;}}}_0x40a3c6[_0x52a1ed(0x197)]({'id':_0xc18a17,'name':_0x417c80,'location':_0x48b9b4,'type':_0x5cb07f,'logDuplicates':_0x5cb07f==='motion','isExit':![],'_score':_0x48b9b4?0x50:0x28});}}return _0x40a3c6;}['installPythonDependencies'](){const _0x2e9dff=a0_0x160a1b;if(this[_0x2e9dff(0x33c)]||this['panicMode'])return;this[_0x2e9dff(0x33c)]=!![];const _0x448731=path[_0x2e9dff(0x1be)](__dirname,'python_service',_0x2e9dff(0x216));this['log'][_0x2e9dff(0x29a)](_0x2e9dff(0x329)),this[_0x2e9dff(0x2da)]();if(fs[_0x2e9dff(0x21c)](VENV_PATH))try{fs[_0x2e9dff(0x1e5)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x21a87b){}exec(_0x2e9dff(0x234)+VENV_PATH+'\x22',_0x51caed=>{const _0x446f29=_0x2e9dff;if(_0x51caed){this[_0x446f29(0x249)][_0x446f29(0x315)](_0x446f29(0x186)),this[_0x446f29(0x33c)]=![],this[_0x446f29(0x287)]=!![];return;}this[_0x446f29(0x2de)](_0x448731);});}[a0_0x160a1b(0x2de)](_0x1ee5a8){const _0x2150e6=a0_0x160a1b;this[_0x2150e6(0x249)][_0x2150e6(0x29a)](_0x2150e6(0x279));const _0x5918eb='\x22'+PIP_EXE+'\x22\x20install\x20--no-cache-dir\x20--force-reinstall\x20-r\x20\x22'+_0x1ee5a8+'\x22';exec(_0x5918eb,{'timeout':0x124f80},(_0xb54bf4,_0x28f97d,_0x44ce49)=>{const _0xd1df36=_0x2150e6;this[_0xd1df36(0x33c)]=![],_0xb54bf4?(this[_0xd1df36(0x249)][_0xd1df36(0x315)]('‚ùå\x20INSTALL\x20FAILED:\x20'+(_0x44ce49||_0xb54bf4[_0xd1df36(0x2ef)])),this['panicMode']=!![]):(this['log']['info'](_0xd1df36(0x208)),exec('\x22'+PYTHON_EXE+'\x22\x20-c\x20\x22import\x20tensorflow;\x20print(\x27OK\x27)\x22',(_0x4b26d5,_0x112ef7)=>{const _0x54e360=_0xd1df36;_0x112ef7&&_0x112ef7[_0x54e360(0x188)]('OK')?(this[_0x54e360(0x249)][_0x54e360(0x29a)](_0x54e360(0x1fd)),this[_0x54e360(0x1c0)]()):(this[_0x54e360(0x249)][_0x54e360(0x315)](_0x54e360(0x1cc)),this[_0x54e360(0x287)]=!![]);}));});}[a0_0x160a1b(0x1c0)](){const _0x278b1e=a0_0x160a1b;if(this['dependencyInstallInProgress']||this[_0x278b1e(0x287)])return;let _0x444524=_0x278b1e(0x1a2);if(fs[_0x278b1e(0x21c)](PYTHON_EXE))this['log'][_0x278b1e(0x29a)](_0x278b1e(0x214)+PYTHON_EXE),_0x444524=PYTHON_EXE;else{this[_0x278b1e(0x249)][_0x278b1e(0x2a7)](_0x278b1e(0x1d9)),this[_0x278b1e(0x1c1)]();return;}try{const _0x3223de=path[_0x278b1e(0x1be)](__dirname,_0x278b1e(0x221),_0x278b1e(0x323));this['pythonProcess']=spawn(_0x444524,[_0x3223de]),this[_0x278b1e(0x35d)][_0x278b1e(0x1b8)]['on'](_0x278b1e(0x35a),_0x20da9b=>{const _0x387da2=_0x278b1e,_0x19b916=_0x20da9b[_0x387da2(0x29e)]()[_0x387da2(0x243)]('\x0a');_0x19b916[_0x387da2(0x2ae)](_0x1dea17=>{const _0x46baba=_0x387da2,_0x133cb9=_0x1dea17['trim']();if(!_0x133cb9)return;if(_0x133cb9[_0x46baba(0x19a)](_0x46baba(0x28c)))this[_0x46baba(0x249)]['debug']('[PYTHON]\x20'+_0x133cb9[_0x46baba(0x27b)](0x5)[_0x46baba(0x2c3)]());else{if(_0x133cb9[_0x46baba(0x19a)](_0x46baba(0x18c)))try{const _0x1ea042=JSON[_0x46baba(0x1e0)](_0x133cb9[_0x46baba(0x27b)](0x8)[_0x46baba(0x2c3)]());this[_0x46baba(0x303)](_0x1ea042);}catch(_0x23360a){this[_0x46baba(0x249)][_0x46baba(0x2a7)](_0x46baba(0x34d)+_0x133cb9);}}_0x133cb9[_0x46baba(0x188)](_0x46baba(0x272))&&(this[_0x46baba(0x249)]['error'](_0x46baba(0x1a0)),this[_0x46baba(0x287)]=!![],this[_0x46baba(0x2da)]());});}),this[_0x278b1e(0x35d)]['stderr']['on'](_0x278b1e(0x35a),_0x32f31c=>{const _0x1e2015=_0x278b1e,_0x43246d=_0x32f31c[_0x1e2015(0x29e)]()[_0x1e2015(0x2c3)]();if(!_0x43246d[_0x1e2015(0x188)](_0x1e2015(0x2d5)))this['log']['error']('[PYTHON\x20ERR]\x20'+_0x43246d);}),this[_0x278b1e(0x35d)]['on'](_0x278b1e(0x2b2),_0x441050=>{const _0x30f622=_0x278b1e;this['log']['info']('[PYTHON]\x20Exited\x20'+_0x441050),this['pythonProcess']=null;if(_0x441050!==0x0&&!this[_0x30f622(0x287)])setTimeout(()=>this[_0x30f622(0x1c0)](),0x7530);});}catch(_0x290715){this[_0x278b1e(0x249)][_0x278b1e(0x315)](_0x278b1e(0x326)+_0x290715[_0x278b1e(0x2ef)]);}}[a0_0x160a1b(0x2da)](){const _0x35ae32=a0_0x160a1b;if(this[_0x35ae32(0x35d)]){this[_0x35ae32(0x249)][_0x35ae32(0x29a)]('üêç\x20Stopping\x20Python...');try{this[_0x35ae32(0x35d)][_0x35ae32(0x215)]();}catch(_0x3da1b3){}this['pythonProcess']=null;}}[a0_0x160a1b(0x333)](_0x438d15,_0x30a31c={}){const _0x4aa9e0=a0_0x160a1b;if(!this[_0x4aa9e0(0x35d)]||!this[_0x4aa9e0(0x35d)][_0x4aa9e0(0x254)]['writable'])return;const _0x345f21=JSON['stringify']({'command':_0x438d15,..._0x30a31c});try{this[_0x4aa9e0(0x35d)]['stdin']['write'](_0x345f21+'\x0a');}catch(_0x1e1af3){}}[a0_0x160a1b(0x303)](_0xaf42d3){const _0x4032ed=a0_0x160a1b;if(_0xaf42d3[_0x4032ed(0x226)]===_0x4032ed(0x28a))this[_0x4032ed(0x249)][_0x4032ed(0x31a)](_0x4032ed(0x2a9));else{if(_0xaf42d3[_0x4032ed(0x226)]==='SECURITY_RESULT'){const {anomaly_score:_0x5515eb,is_anomaly:_0x36f575}=_0xaf42d3['payload'];this[_0x4032ed(0x249)][_0x4032ed(0x29a)](_0x4032ed(0x255)+_0x5515eb[_0x4032ed(0x330)](0x5)+_0x4032ed(0x31d)+(_0x36f575?_0x4032ed(0x351):'OK')),this[_0x4032ed(0x29d)](_0x4032ed(0x2b7),{'val':_0x5515eb,'ack':!![]}),this[_0x4032ed(0x29d)]('analysis.security.lastCheck',{'val':new Date()[_0x4032ed(0x207)](),'ack':!![]});if(_0x36f575){const _0x3ad03e='Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x5515eb[_0x4032ed(0x330)](0x4)+')';this[_0x4032ed(0x29d)](_0x4032ed(0x1dc),{'val':!![],'ack':!![]}),this[_0x4032ed(0x29d)](_0x4032ed(0x356),{'val':_0x3ad03e,'ack':!![]}),this[_0x4032ed(0x348)](_0x4032ed(0x1a5)+_0x3ad03e,![],!![]);}}else{if(_0xaf42d3['type']==='TRAINING_COMPLETE'){const {success:_0x459009,details:_0x587add}=_0xaf42d3[_0x4032ed(0x1bd)];this[_0x4032ed(0x29d)]('analysis.training.status',{'val':_0x459009?_0x4032ed(0x1c4)+new Date()['toLocaleTimeString']()+'\x20('+_0x587add+')':'Failed:\x20'+_0x587add,'ack':!![]});}else{if(_0xaf42d3[_0x4032ed(0x226)]===_0x4032ed(0x2e3)){const {success:_0x674230,details:_0x49010f}=_0xaf42d3['payload'];if(_0x674230)try{const _0x2d21f4=JSON[_0x4032ed(0x1e0)](_0x49010f);if(_0x2d21f4[_0x4032ed(0x308)])this[_0x4032ed(0x29d)](_0x4032ed(0x307),{'val':JSON[_0x4032ed(0x301)](_0x2d21f4[_0x4032ed(0x308)]),'ack':!![]});if(_0x2d21f4[_0x4032ed(0x22c)])this[_0x4032ed(0x29d)](_0x4032ed(0x192),{'val':JSON[_0x4032ed(0x301)](_0x2d21f4[_0x4032ed(0x22c)]),'ack':!![]});}catch(_0x50ba71){}}else{if(_0xaf42d3['type']===_0x4032ed(0x2f1)){const {success:_0x4537f7,details:_0x2da3e1}=_0xaf42d3[_0x4032ed(0x1bd)];if(_0x4537f7)this[_0x4032ed(0x249)]['info'](_0x4032ed(0x242)+_0x2da3e1);}else{if(_0xaf42d3[_0x4032ed(0x226)]==='HEALTH_RESULT'){const {is_anomaly:_0x34b75d}=_0xaf42d3[_0x4032ed(0x1bd)];this['setStateAsync']('analysis.health.lastCheck',{'val':new Date()[_0x4032ed(0x207)](),'ack':!![]}),this['setStateAsync'](_0x4032ed(0x35c),{'val':_0x34b75d,'ack':!![]});}else{if(_0xaf42d3[_0x4032ed(0x226)]==='TREND_RESULT'){const {diagnosis:_0x1fd73e,change_percent:_0x1fb788}=_0xaf42d3[_0x4032ed(0x1bd)];this[_0x4032ed(0x249)][_0x4032ed(0x29a)]('üêç\x20Guardian\x20Diagnosis:\x20'+_0x1fd73e+'\x20('+_0x1fb788+'%)'),this[_0x4032ed(0x29d)](_0x4032ed(0x305),{'val':_0x1fd73e,'ack':!![]}),this[_0x4032ed(0x29d)](_0x4032ed(0x1ae),{'val':_0x1fb788,'ack':!![]});}}}}}}}}[a0_0x160a1b(0x24c)](){const _0x591e18=a0_0x160a1b;try{if(this[_0x591e18(0x1b3)])this['ltmJob'][_0x591e18(0x2c2)]();if(!this['isProVersion'])return;this[_0x591e18(0x1b3)]=schedule[_0x591e18(0x32f)](LTM_SCHEDULE,()=>this[_0x591e18(0x218)]());}catch(_0x2e3291){this[_0x591e18(0x249)][_0x591e18(0x315)](_0x591e18(0x310)+_0x2e3291[_0x591e18(0x2ef)]);}}[a0_0x160a1b(0x191)](){const _0x30fd82=a0_0x160a1b;try{if(this[_0x30fd82(0x27d)])this['modeResetJob'][_0x30fd82(0x2c2)]();this[_0x30fd82(0x27d)]=schedule[_0x30fd82(0x32f)](MODE_RESET_SCHEDULE,async()=>{const _0x5d9198=_0x30fd82;await this[_0x5d9198(0x1ea)](),AUTO_RESET_MODES[_0x5d9198(0x188)](this[_0x5d9198(0x209)])&&await this[_0x5d9198(0x29d)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x5d9198(0x299)],'ack':![]});});}catch(_0x486ccf){this[_0x30fd82(0x249)][_0x30fd82(0x315)]('Reset\x20Sched\x20Error:\x20'+_0x486ccf[_0x30fd82(0x2ef)]);}}[a0_0x160a1b(0x230)](){const _0x40dcd1=a0_0x160a1b;try{if(this[_0x40dcd1(0x2c1)])clearInterval(this['driftAnalysisTimer']);if(!this['isProVersion'])return;this[_0x40dcd1(0x2c1)]=setInterval(()=>this[_0x40dcd1(0x34b)](),(this[_0x40dcd1(0x225)][_0x40dcd1(0x1db)]||0x18)*0x36ee80),setTimeout(()=>this[_0x40dcd1(0x34b)](),0x1388);}catch(_0x1fd472){this['log'][_0x40dcd1(0x315)](_0x40dcd1(0x20c)+_0x1fd472[_0x40dcd1(0x2ef)]);}}['setupBriefingScheduler'](){const _0x16f4bf=a0_0x160a1b;try{if(this['briefingJob'])this[_0x16f4bf(0x22a)]['cancel']();if(!this[_0x16f4bf(0x225)][_0x16f4bf(0x33d)])return;const _0x47a1f2=(this['config'][_0x16f4bf(0x20e)]||_0x16f4bf(0x29f))[_0x16f4bf(0x243)](':'),_0x5be526=parseInt(_0x47a1f2[0x0])||0x8,_0x14c358=parseInt(_0x47a1f2[0x1])||0x0,_0x4f3a61=_0x14c358+'\x20'+_0x5be526+'\x20*\x20*\x20*';this[_0x16f4bf(0x22a)]=schedule[_0x16f4bf(0x32f)](_0x4f3a61,()=>{const _0x563024=_0x16f4bf;this[_0x563024(0x26d)]();});}catch(_0x4954f7){this[_0x16f4bf(0x249)][_0x16f4bf(0x315)](_0x16f4bf(0x358)+_0x4954f7['message']);}}async[a0_0x160a1b(0x2c7)](){const _0xbf2180=a0_0x160a1b;if(!this[_0xbf2180(0x342)]||this['dailyDigests'][_0xbf2180(0x2c4)]<0x2)return;const _0x41321d=this[_0xbf2180(0x342)][_0xbf2180(0x25f)](_0x15a5a6=>{const _0x2a9d9c=_0xbf2180,_0x1960f6=(_0x15a5a6[_0x2a9d9c(0x316)]||'')[_0x2a9d9c(0x336)]();return ACTIVITY_LEVEL_MAP[_0x1960f6]||0x32;});this[_0xbf2180(0x333)](_0xbf2180(0x1c3),{'values':_0x41321d,'tag':_0xbf2180(0x280)});}['runSecurityCheck'](_0x5b2276){const _0x268d77=a0_0x160a1b;if(!this[_0x268d77(0x291)])return;this[_0x268d77(0x249)][_0x268d77(0x31a)](_0x268d77(0x1ef)),this['sendToPython'](_0x268d77(0x2dd),{'sequence':_0x5b2276});}async[a0_0x160a1b(0x1a7)](_0x30a2ba=''){const _0x3d8cf6=a0_0x160a1b;if(!this['geminiModel'])return;if(this['eventHistory'][_0x3d8cf6(0x2c4)]===0x0)return;const _0x218e27=this[_0x3d8cf6(0x1f1)][_0x3d8cf6(0x34a)](0x0,0xf),_0x21d335=await this[_0x3d8cf6(0x2db)](),_0x17f81c=this[_0x3d8cf6(0x209)],_0x519702=PERSONA_MAPPING[this['config'][_0x3d8cf6(0x2a6)]||_0x3d8cf6(0x1e2)],_0x34799e=this[_0x3d8cf6(0x225)][_0x3d8cf6(0x288)]||_0x3d8cf6(0x269);let _0xd9fc61=_0x3d8cf6(0x27f);try{const _0x2f48b8=await this[_0x3d8cf6(0x2f9)](_0x3d8cf6(0x228));if(_0x2f48b8&&_0x2f48b8['val'])_0xd9fc61=_0x2f48b8['val'];}catch(_0x421c7c){}let _0x6cc0b1=![];try{const _0x4c771f=await this[_0x3d8cf6(0x2f9)]('analysis.automation.autoApply');if(_0x4c771f&&_0x4c771f[_0x3d8cf6(0x346)])_0x6cc0b1=!![];}catch(_0x24b861){}const _0x42e186=_0x3d8cf6(0x1b9)+_0x519702+_0x3d8cf6(0x23e)+_0x34799e+_0x3d8cf6(0x18b)+_0x17f81c+_0x3d8cf6(0x283)+_0x21d335+_0x3d8cf6(0x250)+_0xd9fc61+_0x3d8cf6(0x28b)+JSON['stringify'](_0x218e27)+_0x3d8cf6(0x1c5)+_0x30a2ba+_0x3d8cf6(0x25b);try{const _0x36460e=await this[_0x3d8cf6(0x1ad)][_0x3d8cf6(0x1c9)](_0x42e186),_0x47869e=_0x36460e['response']['text']()[_0x3d8cf6(0x2b4)](/```json|```/g,'')[_0x3d8cf6(0x2c3)](),_0x4cce80=JSON[_0x3d8cf6(0x1e0)](_0x47869e);await this[_0x3d8cf6(0x29d)]('analysis.lastResult',{'val':JSON[_0x3d8cf6(0x301)](_0x4cce80),'ack':!![]});if(_0x4cce80[_0x3d8cf6(0x268)])await this[_0x3d8cf6(0x29d)](_0x3d8cf6(0x227),{'val':_0x4cce80[_0x3d8cf6(0x268)],'ack':!![]});const _0x4c1f2a={'timestamp':Date['now'](),'id':Date['now']()[_0x3d8cf6(0x29e)](),'analysis':{'activity':{'summary':_0x4cce80[_0x3d8cf6(0x268)],'isAlert':_0x4cce80['isAlert'],'alertReason':_0x4cce80[_0x3d8cf6(0x331)]},'comfort':{'automationProposal':_0x4cce80[_0x3d8cf6(0x1b2)]}}};await this['updateAnalysisHistory'](_0x4c1f2a);const _0x36faec=_0x4cce80[_0x3d8cf6(0x2e9)]||![];_0x36faec!==this[_0x3d8cf6(0x22f)]&&(await this[_0x3d8cf6(0x29d)](_0x3d8cf6(0x1dc),{'val':_0x36faec,'ack':!![]}),this[_0x3d8cf6(0x22f)]=_0x36faec,_0x36faec&&(await this[_0x3d8cf6(0x29d)](_0x3d8cf6(0x356),{'val':_0x4cce80[_0x3d8cf6(0x331)],'ack':!![]}),this[_0x3d8cf6(0x348)](_0x3d8cf6(0x224)+_0x4cce80['alertReason'],![],_0x4cce80[_0x3d8cf6(0x262)])));if(_0x4cce80['automationProposal']&&_0x4cce80['automationProposal']['detected']){await this[_0x3d8cf6(0x29d)](_0x3d8cf6(0x20a),{'val':!![],'ack':!![]}),await this['setStateAsync'](_0x3d8cf6(0x2cc),{'val':_0x4cce80[_0x3d8cf6(0x1b2)]['description'],'ack':!![]}),await this[_0x3d8cf6(0x29d)](_0x3d8cf6(0x20b),{'val':_0x4cce80[_0x3d8cf6(0x1b2)][_0x3d8cf6(0x1aa)],'ack':!![]}),await this[_0x3d8cf6(0x29d)]('analysis.automation.targetValue',{'val':JSON[_0x3d8cf6(0x301)](_0x4cce80[_0x3d8cf6(0x1b2)]['targetValue']),'ack':!![]});if(_0x6cc0b1)this[_0x3d8cf6(0x27e)]();}}catch(_0x522611){this[_0x3d8cf6(0x249)]['error']('Gemini\x20Error:\x20'+_0x522611[_0x3d8cf6(0x2ef)]);}}async['createDailyDigest'](){const _0x1d7db4=a0_0x160a1b;if(!this[_0x1d7db4(0x291)])return;await this[_0x1d7db4(0x29d)](LTM_DP_STATUS,{'val':_0x1d7db4(0x2d1),'ack':!![]});if(!this['geminiModel']||this[_0x1d7db4(0x27c)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await this[_0x1d7db4(0x29d)](LTM_DP_STATUS,{'val':_0x1d7db4(0x1e8),'ack':!![]});return;}const _0x2d98db=JSON[_0x1d7db4(0x1e0)](JSON[_0x1d7db4(0x301)](this[_0x1d7db4(0x27c)])),_0x559621=_0x2d98db[_0x1d7db4(0x2c4)],_0xece8cd='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON['stringify'](_0x2d98db);try{const _0x3f1789=await this[_0x1d7db4(0x1ad)][_0x1d7db4(0x1c9)](_0xece8cd),_0x18aaa2=JSON[_0x1d7db4(0x1e0)](_0x3f1789[_0x1d7db4(0x32a)]['text']()[_0x1d7db4(0x2b4)](/```json|```/g,'')['trim']()),_0x1c5d6e={'timestamp':new Date()[_0x1d7db4(0x207)](),'eventCount':_0x559621,'summary':_0x18aaa2[_0x1d7db4(0x268)]||_0x1d7db4(0x2b8),'activityLevel':_0x18aaa2[_0x1d7db4(0x316)]||_0x1d7db4(0x1c2),'systemMode':this[_0x1d7db4(0x209)]};this[_0x1d7db4(0x342)]['push'](_0x1c5d6e),await this[_0x1d7db4(0x258)](),this[_0x1d7db4(0x27c)]=[],await this['saveRawEventLog'](),await this[_0x1d7db4(0x29d)](LTM_DP_STATUS,{'val':_0x1d7db4(0x1e7),'ack':!![]});if(this[_0x1d7db4(0x291)])this[_0x1d7db4(0x333)](_0x1d7db4(0x205),{'digest':_0x1c5d6e});}catch(_0x57f980){this['log'][_0x1d7db4(0x315)](_0x57f980[_0x1d7db4(0x2ef)]);}}async[a0_0x160a1b(0x26b)](){const _0x32c0f4=a0_0x160a1b;try{const _0xffcea0=this['config']['presenceDevices']||[];let _0x442067=![];const _0x2f0f89=[];for(const _0x4017cc of _0xffcea0){try{const _0x13418e=await this['getForeignStateAsync'](_0x4017cc);_0x13418e&&(_0x13418e[_0x32c0f4(0x346)]===!![]||_0x13418e[_0x32c0f4(0x346)]===_0x32c0f4(0x2a2)||_0x13418e[_0x32c0f4(0x346)]===0x1)&&(_0x442067=!![],_0x2f0f89['push'](_0x4017cc));}catch(_0x50c333){}}return await this[_0x32c0f4(0x29d)](_0x32c0f4(0x228),{'val':_0x2f0f89[_0x32c0f4(0x1be)](',\x20'),'ack':!![]}),_0x442067&&(this['exitTimer']&&(this['log'][_0x32c0f4(0x29a)](_0x32c0f4(0x219)),this[_0x32c0f4(0x1f6)]()),!this[_0x32c0f4(0x1a6)]&&this[_0x32c0f4(0x209)]===SYSTEM_MODES[_0x32c0f4(0x299)]&&await this[_0x32c0f4(0x2e5)](!![])),_0x442067;}catch(_0x139b83){return![];}}[a0_0x160a1b(0x340)](){const _0x11b40e=a0_0x160a1b;this['abortExitTimer'](),this[_0x11b40e(0x1cb)]=!![],this[_0x11b40e(0x1d4)]=setTimeout(()=>{const _0x38f962=_0x11b40e;this[_0x38f962(0x1cb)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),this[_0x11b40e(0x334)]=setTimeout(()=>{const _0x32bf32=_0x11b40e;this[_0x32bf32(0x2e5)](![]),this[_0x32bf32(0x334)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}['abortExitTimer'](){const _0x369a47=a0_0x160a1b;if(this[_0x369a47(0x334)])clearTimeout(this[_0x369a47(0x334)]);if(this[_0x369a47(0x1d4)])clearTimeout(this['exitGraceTimer']);this[_0x369a47(0x334)]=null,this['exitGraceTimer']=null,this['isGracePeriodActive']=![];}async[a0_0x160a1b(0x2e5)](_0x19e267){const _0x468485=a0_0x160a1b;if(this[_0x468485(0x1a6)]===_0x19e267)return;this[_0x468485(0x1a6)]=_0x19e267,await this[_0x468485(0x29d)]('system.isPresent',{'val':_0x19e267,'ack':!![]});}async[a0_0x160a1b(0x27e)](){const _0x17c9b4=a0_0x160a1b;try{const _0x169e87=await this[_0x17c9b4(0x2f9)](_0x17c9b4(0x20b)),_0x40ccf0=await this[_0x17c9b4(0x2f9)](_0x17c9b4(0x253));if(_0x169e87&&_0x169e87[_0x17c9b4(0x346)]&&_0x40ccf0){const _0x214534=_0x169e87['val'];let _0x26571d=_0x40ccf0[_0x17c9b4(0x346)];try{_0x26571d=JSON['parse'](_0x26571d);}catch(_0x5b7654){}this['log'][_0x17c9b4(0x29a)](_0x17c9b4(0x1b1)+_0x214534+_0x17c9b4(0x194)+_0x26571d),await this[_0x17c9b4(0x1dd)](_0x214534,_0x26571d);}else this[_0x17c9b4(0x249)][_0x17c9b4(0x2a7)](_0x17c9b4(0x302));}catch(_0x16fbce){this[_0x17c9b4(0x249)][_0x17c9b4(0x315)]('BUTLER\x20Execution\x20Error:\x20'+_0x16fbce['message']);}}async[a0_0x160a1b(0x24d)](_0x48050e){const _0x170426=a0_0x160a1b;let _0x2c8764=_0x48050e;_0x48050e[_0x170426(0x19a)]('[')&&(_0x2c8764=_0x48050e[_0x170426(0x27b)](_0x48050e[_0x170426(0x1d8)](']')+0x1));if(_0x2c8764===_0x170426(0x1d3))await this[_0x170426(0x29d)](_0x170426(0x1dc),{'val':![],'ack':!![]}),await this[_0x170426(0x29d)](_0x170426(0x356),{'val':_0x170426(0x34e),'ack':!![]}),this['lastAlertState']=![],this[_0x170426(0x348)](_0x170426(0x2fc),![]);else _0x2c8764===_0x170426(0x350)&&this[_0x170426(0x348)]('üìû\x20R√úCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20R√ºckruf-Button\x20gedr√ºckt.',![],!![]);}async[a0_0x160a1b(0x348)](_0x325100,_0xd3ac5d=![],_0x596d44=![]){const _0x1016d7=a0_0x160a1b,_0x18f2a0=this[_0x1016d7(0x225)];if(_0x18f2a0[_0x1016d7(0x23a)]){let _0x3b8d4b={};(_0x325100[_0x1016d7(0x188)]('Alarm')||_0x596d44)&&(_0x3b8d4b={'reply_markup':{'inline_keyboard':[[{'text':'‚úÖ\x20Alles\x20OK\x20(Reset)','callback_data':'COGNI_CONFIRM_OK'}],[{'text':_0x1016d7(0x30a),'callback_data':_0x1016d7(0x350)}]]}}),await this[_0x1016d7(0x306)](_0x18f2a0[_0x1016d7(0x275)],'send',{'text':_0x325100,'user':_0x18f2a0[_0x1016d7(0x2ec)],..._0x3b8d4b});}if(_0x18f2a0[_0x1016d7(0x247)]){let _0x36de27={'message':_0x325100,'title':_0x596d44?_0x1016d7(0x1f7):_0x1016d7(0x1f3),'priority':_0x596d44?0x2:0x1,'device':_0x18f2a0[_0x1016d7(0x337)]};_0x596d44&&(_0x36de27[_0x1016d7(0x30d)]=0x1e,_0x36de27[_0x1016d7(0x335)]=0xe10,_0x36de27['sound']='siren'),await this[_0x1016d7(0x306)](_0x18f2a0[_0x1016d7(0x1e1)],'send',_0x36de27);}_0x18f2a0[_0x1016d7(0x312)]&&await this[_0x1016d7(0x306)](_0x18f2a0[_0x1016d7(0x2ad)],'send',{'text':_0x325100,'to':_0x18f2a0[_0x1016d7(0x19e)]});}async[a0_0x160a1b(0x1d6)](){const _0x51930e=a0_0x160a1b,_0x4785c1=this[_0x51930e(0x225)][_0x51930e(0x2ea)],_0x1104ec=this['eventHistory'][_0x51930e(0x2c4)]>0x0?this['eventHistory'][0x0][_0x51930e(0x189)]:Date[_0x51930e(0x2fb)](),_0x49166a=(Date[_0x51930e(0x2fb)]()-_0x1104ec)/(0x3e8*0x3c*0x3c);let _0x1fcf7a='';this[_0x51930e(0x225)]['inactivityMonitoringEnabled']&&this['currentSystemMode']===SYSTEM_MODES[_0x51930e(0x299)]&&this[_0x51930e(0x1a6)]&&(_0x49166a>_0x4785c1&&(_0x1fcf7a=_0x51930e(0x28d)+_0x49166a[_0x51930e(0x330)](0x1)+'h.')),this[_0x51930e(0x1a7)](_0x1fcf7a);}async[a0_0x160a1b(0x33a)](_0x1eb473){const _0x138bee=a0_0x160a1b;this[_0x138bee(0x249)][_0x138bee(0x29a)](_0x138bee(0x317)+JSON[_0x138bee(0x301)](_0x1eb473));}async['getCalendarNames'](_0x449c7d){const _0x43ffe1=a0_0x160a1b;try{const _0x2721cf=await this[_0x43ffe1(0x21a)](_0x449c7d+_0x43ffe1(0x2f0));if(_0x2721cf&&_0x2721cf[_0x43ffe1(0x346)]){const _0x3baccb=JSON['parse'](_0x2721cf['val']);if(Array[_0x43ffe1(0x2e0)](_0x3baccb))return[...new Set(_0x3baccb[_0x43ffe1(0x25f)](_0x10287c=>_0x10287c[_0x43ffe1(0x1f2)])[_0x43ffe1(0x353)](Boolean))][_0x43ffe1(0x1f0)]();}}catch(_0x317a6c){}return[];}async[a0_0x160a1b(0x246)](){const _0x7d75f3=a0_0x160a1b;if(!this[_0x7d75f3(0x225)][_0x7d75f3(0x26f)])return _0x7d75f3(0x285);const _0x512804=this[_0x7d75f3(0x225)][_0x7d75f3(0x233)]||_0x7d75f3(0x2c9);try{const _0x58c69b=await this[_0x7d75f3(0x21a)](_0x512804+_0x7d75f3(0x2f0));if(_0x58c69b&&_0x58c69b['val']){let _0x3baa61=JSON[_0x7d75f3(0x1e0)](_0x58c69b[_0x7d75f3(0x346)]);if(Array[_0x7d75f3(0x2e0)](_0x3baa61)){if(_0x3baa61[_0x7d75f3(0x2c4)]>0x0)return _0x7d75f3(0x1ce)+_0x3baa61[_0x7d75f3(0x34a)](0x0,0x3)[_0x7d75f3(0x25f)](_0x1f307d=>_0x1f307d[_0x7d75f3(0x1b7)])[_0x7d75f3(0x1be)](',\x20');}}}catch(_0x55da5e){}return'Keine\x20Termine';}async['setupTelegramListener'](){const _0x12d830=a0_0x160a1b,_0x32769e=this['config'][_0x12d830(0x275)];if(this[_0x12d830(0x225)][_0x12d830(0x23a)]&&_0x32769e)await this[_0x12d830(0x2f2)](_0x32769e+_0x12d830(0x2ca));}async[a0_0x160a1b(0x2ce)](){const _0x5ef1b2=a0_0x160a1b,_0x5758dc=this[_0x5ef1b2(0x225)][_0x5ef1b2(0x2cf)];if(_0x5758dc)for(const _0x17aeb6 of _0x5758dc){await this[_0x5ef1b2(0x2f2)](_0x17aeb6['id']);}}async[a0_0x160a1b(0x2ff)](){const _0x2aa09a=a0_0x160a1b,_0x961a65=this['config'][_0x2aa09a(0x2c6)];if(_0x961a65)for(const _0xdd72f9 of _0x961a65){await this[_0x2aa09a(0x2f2)](_0xdd72f9);}}}if(require[a0_0x160a1b(0x2eb)]!==module)module[a0_0x160a1b(0x26e)]=_0xb4580d=>new CogniLiving(_0xb4580d);else new CogniLiving();