const a0_0x1cddbe=a0_0x1514;(function(_0x12d371,_0x4bfcf8){const _0x2028a1=a0_0x1514,_0x3f4333=_0x12d371();while(!![]){try{const _0x373eb3=parseInt(_0x2028a1(0x358))/0x1*(-parseInt(_0x2028a1(0x1e2))/0x2)+-parseInt(_0x2028a1(0x202))/0x3+parseInt(_0x2028a1(0x309))/0x4*(-parseInt(_0x2028a1(0x300))/0x5)+parseInt(_0x2028a1(0x327))/0x6*(-parseInt(_0x2028a1(0x2d9))/0x7)+-parseInt(_0x2028a1(0x182))/0x8+-parseInt(_0x2028a1(0x344))/0x9+-parseInt(_0x2028a1(0x277))/0xa*(-parseInt(_0x2028a1(0x26d))/0xb);if(_0x373eb3===_0x4bfcf8)break;else _0x3f4333['push'](_0x3f4333['shift']());}catch(_0x1eee3c){_0x3f4333['push'](_0x3f4333['shift']());}}}(a0_0x2b36,0xd810f));const a0_0x2d1f2e=(function(){let _0x4b6ed9=!![];return function(_0x4599f7,_0x21efaf){const _0x12cbc6=_0x4b6ed9?function(){const _0x1129d2=a0_0x1514;if(_0x21efaf){const _0x30459c=_0x21efaf[_0x1129d2(0x1fe)](_0x4599f7,arguments);return _0x21efaf=null,_0x30459c;}}:function(){};return _0x4b6ed9=![],_0x12cbc6;};}()),a0_0x991395=a0_0x2d1f2e(this,function(){const _0x545119=a0_0x1514;return a0_0x991395[_0x545119(0x1c7)]()[_0x545119(0x291)](_0x545119(0x33b))['toString']()[_0x545119(0x218)](a0_0x991395)[_0x545119(0x291)]('(((.+)+)+)+$');});a0_0x991395();'use strict';const utils=require(a0_0x1cddbe(0x332)),{GoogleGenerativeAI}=require(a0_0x1cddbe(0x179)),schedule=require(a0_0x1cddbe(0x1f3)),{spawn,exec}=require('child_process'),path=require(a0_0x1cddbe(0x38f)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x1cddbe(0x2d7),LTM_SCHEDULE=a0_0x1cddbe(0x250),MODE_RESET_SCHEDULE=a0_0x1cddbe(0x37e),ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,LTM_DP_RAW_LOG=a0_0x1cddbe(0x379),LTM_DP_DAILY_DIGESTS=a0_0x1cddbe(0x335),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS='LTM.baselineStatus',LTM_DP_DRIFT_CHANNEL=a0_0x1cddbe(0x28b),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS=a0_0x1cddbe(0x214),LTM_DP_DRIFT_LAST_CHECK=a0_0x1cddbe(0x166),SYSTEM_DP_MODE=a0_0x1cddbe(0x23d),HARD_IGNORE_TERMS=[a0_0x1cddbe(0x258),a0_0x1cddbe(0x2aa),a0_0x1cddbe(0x30d),a0_0x1cddbe(0x293),a0_0x1cddbe(0x1b6),a0_0x1cddbe(0x1df),'connection',a0_0x1cddbe(0x20a),a0_0x1cddbe(0x180),a0_0x1cddbe(0x188),a0_0x1cddbe(0x2d4),a0_0x1cddbe(0x266),a0_0x1cddbe(0x1f6),'config_pending',a0_0x1cddbe(0x1c2),a0_0x1cddbe(0x246),a0_0x1cddbe(0x330),'link_quality'],BAD_NAMES=[a0_0x1cddbe(0x395),a0_0x1cddbe(0x1f2),'state',a0_0x1cddbe(0x24a),a0_0x1cddbe(0x315),a0_0x1cddbe(0x319),'on',a0_0x1cddbe(0x340),'switch',a0_0x1cddbe(0x1ea),a0_0x1cddbe(0x31d),a0_0x1cddbe(0x199),'cover',a0_0x1cddbe(0x352),'motion',a0_0x1cddbe(0x1ac),a0_0x1cddbe(0x2ab),'temperature',a0_0x1cddbe(0x27f),'power',a0_0x1cddbe(0x28a),a0_0x1cddbe(0x323),'valve',a0_0x1cddbe(0x1eb),a0_0x1cddbe(0x1b1)],ADAPTER_BLACKLIST=[a0_0x1cddbe(0x1f8),a0_0x1cddbe(0x1ca),a0_0x1cddbe(0x389),a0_0x1cddbe(0x385),'history.','material.',a0_0x1cddbe(0x222),'flot.',a0_0x1cddbe(0x384),'javascript.',a0_0x1cddbe(0x1cf)],SYSTEM_MODES={'NORMAL':a0_0x1cddbe(0x33c),'VACATION':a0_0x1cddbe(0x24f),'PARTY':'party','GUEST':a0_0x1cddbe(0x308)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x1cddbe(0x346)],SYSTEM_MODES[a0_0x1cddbe(0x1bf)]],PERSONA_MAPPING={'generic':a0_0x1cddbe(0x173),'senior_aal':'PRIORIT√ÑT:\x20Gesundheit/AAL.','family':a0_0x1cddbe(0x1b5),'single_comfort':a0_0x1cddbe(0x294),'security':'PRIORIT√ÑT:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x4596fe){const _0x15f939=a0_0x1cddbe;try{const _0x1d4aa0=[_0x15f939(0x298),_0x15f939(0x269)];for(const _0x30d22b of _0x1d4aa0){try{const _0x849eee=await _0x4596fe[_0x15f939(0x375)](_0x30d22b);_0x849eee&&await _0x4596fe[_0x15f939(0x2ca)](_0x30d22b);}catch(_0x5353d9){}}}catch(_0x5194f5){}}async function initHistory(_0x34fcd1){const _0x458fe6=a0_0x1cddbe;try{const _0x5c1b33=await _0x34fcd1[_0x458fe6(0x349)](_0x458fe6(0x208));_0x5c1b33&&_0x5c1b33[_0x458fe6(0x2a1)]&&(_0x34fcd1['eventHistory']=JSON[_0x458fe6(0x1ad)](_0x5c1b33['val'][_0x458fe6(0x1c7)]()));}catch(_0x58f545){_0x34fcd1[_0x458fe6(0x2d2)]=[];}try{const _0x436e73=await _0x34fcd1['getStateAsync']('analysis.analysisHistory');if(_0x436e73&&_0x436e73[_0x458fe6(0x2a1)])_0x34fcd1[_0x458fe6(0x316)]=JSON['parse'](_0x436e73[_0x458fe6(0x2a1)][_0x458fe6(0x1c7)]());}catch(_0x328751){_0x34fcd1[_0x458fe6(0x316)]=[];}if(_0x34fcd1['eventHistory']&&_0x34fcd1[_0x458fe6(0x2d2)][_0x458fe6(0x32e)]>0x0){_0x34fcd1[_0x458fe6(0x25a)][_0x458fe6(0x23c)](_0x458fe6(0x281)+_0x34fcd1[_0x458fe6(0x2d2)][_0x458fe6(0x32e)]+_0x458fe6(0x2a3));for(let _0x58e5ee=_0x34fcd1[_0x458fe6(0x2d2)][_0x458fe6(0x32e)]-0x1;_0x58e5ee>=0x0;_0x58e5ee--){const _0x4eb4db=_0x34fcd1[_0x458fe6(0x2d2)][_0x58e5ee];_0x4eb4db&&_0x4eb4db['id']!==undefined&&_0x4eb4db[_0x458fe6(0x315)]!==undefined&&(_0x34fcd1[_0x458fe6(0x30b)][_0x4eb4db['id']]=_0x4eb4db[_0x458fe6(0x315)]);}}}async function initSystemConfig(_0x24aa2d){const _0x1f8be4=a0_0x1cddbe;try{const _0x110c0d=await _0x24aa2d['getForeignObjectAsync'](_0x1f8be4(0x393));_0x110c0d&&_0x110c0d['common']&&(_0x24aa2d[_0x1f8be4(0x1cc)]={'latitude':_0x110c0d[_0x1f8be4(0x278)][_0x1f8be4(0x38e)]||0x0,'longitude':_0x110c0d[_0x1f8be4(0x278)][_0x1f8be4(0x1aa)]||0x0,'city':_0x110c0d[_0x1f8be4(0x278)][_0x1f8be4(0x19f)]||''});}catch(_0x479468){}}async function checkLicense(_0x48efb0,_0x3415a6){const _0x5f3d1e=a0_0x1cddbe;if(!_0x3415a6)return![];_0x48efb0[_0x5f3d1e(0x2b6)]=await getSystemUUID(_0x48efb0);if(_0x3415a6==='TEST-PRO-KEY'||_0x3415a6[_0x5f3d1e(0x249)](_0x5f3d1e(0x1b8)))return!![];return![];}async function getSystemUUID(_0x2a2fcc){const _0x547279=a0_0x1cddbe;try{const _0x812588=await _0x2a2fcc[_0x547279(0x1fc)](_0x547279(0x186));if(_0x812588&&_0x812588[_0x547279(0x160)]&&_0x812588[_0x547279(0x160)][_0x547279(0x260)])return _0x812588[_0x547279(0x160)]['uuid'];return _0x547279(0x1fd);}catch(_0x157ada){return _0x547279(0x2d3);}}async function createAllObjects(_0x179c8a){const _0x190cdf=a0_0x1cddbe;await checkSystemObjects(_0x179c8a),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x378),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x22a),'type':_0x190cdf(0x172),'role':'text','read':!![],'write':![],'def':''},'native':{}}),await _0x179c8a['setObjectNotExistsAsync'](_0x190cdf(0x386),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x310),'type':_0x190cdf(0x172),'role':'json','read':!![],'write':![]},'native':{}}),await _0x179c8a['setObjectNotExistsAsync'](_0x190cdf(0x208),{'type':'state','common':{'name':'Event\x20History','type':_0x190cdf(0x172),'role':_0x190cdf(0x2bb),'read':!![],'write':![]},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x262),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x360),'type':'boolean','role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x36b),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x2c3),'type':'boolean','role':_0x190cdf(0x311),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x179c8a[_0x190cdf(0x367)](_0x190cdf(0x26c),{'type':_0x190cdf(0x28d),'common':{'name':_0x190cdf(0x20e)},'native':{}}),await _0x179c8a['setObjectNotExistsAsync'](_0x190cdf(0x235),{'type':_0x190cdf(0x2ff),'common':{'name':'Train\x20Security\x20Model\x20(LSTM)','type':_0x190cdf(0x1ed),'role':_0x190cdf(0x311),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x1bc),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x15a),'type':_0x190cdf(0x1ed),'role':_0x190cdf(0x311),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x2f1),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x2e1),'type':_0x190cdf(0x1ed),'role':_0x190cdf(0x311),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x179c8a['setObjectNotExistsAsync']('analysis.training.status',{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x18f),'type':_0x190cdf(0x172),'role':_0x190cdf(0x321),'read':!![],'write':![],'def':'Idle'},'native':{}}),await _0x179c8a[_0x190cdf(0x367)](_0x190cdf(0x2d5),{'type':_0x190cdf(0x28d),'common':{'name':_0x190cdf(0x32f)},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x2e9),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x1e6),'type':'number','role':_0x190cdf(0x315),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x179c8a['setObjectNotExistsAsync'](_0x190cdf(0x37b),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x20d),'type':'string','role':_0x190cdf(0x36c),'read':!![],'write':![],'def':''},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x1be),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x1c8),'type':_0x190cdf(0x172),'role':'date','read':!![],'write':![],'def':''},'native':{}}),await _0x179c8a['setObjectNotExistsAsync'](_0x190cdf(0x394),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x279),'type':'boolean','role':_0x190cdf(0x207),'read':!![],'write':![],'def':![]},'native':{}}),await _0x179c8a[_0x190cdf(0x367)]('analysis.energy',{'type':_0x190cdf(0x28d),'common':{'name':_0x190cdf(0x19b)},'native':{}}),await _0x179c8a[_0x190cdf(0x343)]('analysis.energy.insulationScore',{'type':_0x190cdf(0x2ff),'common':{'name':'Building\x20Insulation\x20Score','type':'string','role':_0x190cdf(0x321),'read':!![],'write':![],'def':_0x190cdf(0x19e)},'native':{}}),await _0x179c8a[_0x190cdf(0x343)]('analysis.lastResult',{'type':'state','common':{'name':'Last\x20Result','type':_0x190cdf(0x172),'role':_0x190cdf(0x2bb),'read':!![],'write':![]},'native':{}}),await _0x179c8a['setObjectNotExistsAsync'](_0x190cdf(0x307),{'type':'state','common':{'name':_0x190cdf(0x1f4),'type':_0x190cdf(0x1ed),'role':_0x190cdf(0x2ac),'read':!![],'write':![],'def':![]},'native':{}}),await _0x179c8a['setObjectNotExistsAsync'](_0x190cdf(0x1a7),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x241),'type':_0x190cdf(0x1ed),'role':_0x190cdf(0x2b9),'read':!![],'write':![],'def':![]},'native':{}}),await _0x179c8a['setObjectNotExistsAsync'](_0x190cdf(0x18c),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x392),'type':_0x190cdf(0x172),'role':'text.alarm','read':!![],'write':![]},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x32c),{'type':'state','common':{'name':'Activity\x20Summary','type':_0x190cdf(0x172),'role':_0x190cdf(0x321),'read':!![],'write':![]},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x38d),{'type':'state','common':{'name':_0x190cdf(0x2e4),'type':_0x190cdf(0x172),'role':_0x190cdf(0x2ff),'read':!![],'write':![],'def':_0x190cdf(0x19e)},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x2fc),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x26f),'type':_0x190cdf(0x172),'role':_0x190cdf(0x321),'read':!![],'write':![]},'native':{}}),await _0x179c8a['setObjectNotExistsAsync'](_0x190cdf(0x382),{'type':'state','common':{'name':_0x190cdf(0x2b8),'type':_0x190cdf(0x172),'role':_0x190cdf(0x321),'read':!![],'write':![]},'native':{}}),await _0x179c8a[_0x190cdf(0x367)](_0x190cdf(0x15c),{'type':_0x190cdf(0x28d),'common':{'name':_0x190cdf(0x275)},'native':{}}),await _0x179c8a['setObjectNotExistsAsync'](_0x190cdf(0x370),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x243),'type':_0x190cdf(0x1ed),'role':'indicator','read':!![],'write':![],'def':![]},'native':{}}),await _0x179c8a['setObjectNotExistsAsync']('analysis.automation.description',{'type':'state','common':{'name':_0x190cdf(0x1d8),'type':'string','role':_0x190cdf(0x321),'read':!![],'write':![]},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x22e),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x228),'type':_0x190cdf(0x172),'role':_0x190cdf(0x321),'read':!![],'write':![]},'native':{}}),await _0x179c8a['setObjectNotExistsAsync'](_0x190cdf(0x288),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x1d3),'type':_0x190cdf(0x172),'role':_0x190cdf(0x321),'read':!![],'write':![]},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x1a3),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x15e),'type':_0x190cdf(0x172),'role':'text','read':!![],'write':![]},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x30c),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x194),'type':'boolean','role':_0x190cdf(0x2c9),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x179c8a[_0x190cdf(0x343)]('analysis.automation.triggerAction',{'type':'state','common':{'name':'Trigger\x20Action\x20Now','type':_0x190cdf(0x1ed),'role':_0x190cdf(0x311),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x2ea),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x2bc),'type':_0x190cdf(0x172),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x2fe),{'type':'state','common':{'name':_0x190cdf(0x1dc),'type':_0x190cdf(0x172),'role':_0x190cdf(0x2bb),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x179c8a['extendObjectAsync']('analysis.health',{'type':_0x190cdf(0x28d),'common':{'name':_0x190cdf(0x2b2)},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x324),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x257),'type':_0x190cdf(0x2af),'role':_0x190cdf(0x33a),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x2eb),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x350),'type':'string','role':_0x190cdf(0x321),'read':!![],'write':![],'def':'none'},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x22d),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x26e),'type':_0x190cdf(0x172),'role':_0x190cdf(0x321),'read':!![],'write':![],'def':''},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x25e),{'type':'state','common':{'name':_0x190cdf(0x200),'type':_0x190cdf(0x172),'role':_0x190cdf(0x321),'read':!![],'write':![],'def':_0x190cdf(0x19e)},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x21b),{'type':'state','common':{'name':_0x190cdf(0x27b),'type':_0x190cdf(0x2af),'role':'value','read':!![],'write':![],'def':0x0},'native':{}}),await _0x179c8a['extendObjectAsync']('LTM.trainingData',{'type':_0x190cdf(0x28d),'common':{'name':'Training\x20Data\x20Sets'},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x312),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x22f),'type':_0x190cdf(0x172),'role':_0x190cdf(0x2bb),'read':!![],'write':![],'def':'[]','desc':_0x190cdf(0x388)},'native':{}}),await _0x179c8a[_0x190cdf(0x343)](_0x190cdf(0x2c2),{'type':_0x190cdf(0x2ff),'common':{'name':_0x190cdf(0x34b),'type':'string','role':_0x190cdf(0x2bb),'read':!![],'write':![],'def':'[]','desc':_0x190cdf(0x248)},'native':{}}),await checkLtmObjects(_0x179c8a),await checkLtmDriftObjects(_0x179c8a);}async function checkSystemObjects(_0x206dba){const _0x2d19b3=a0_0x1cddbe;await _0x206dba[_0x2d19b3(0x367)](_0x2d19b3(0x1b3),{'type':_0x2d19b3(0x28d),'common':{'name':_0x2d19b3(0x23a)},'native':{}}),await _0x206dba[_0x2d19b3(0x367)](SYSTEM_DP_MODE,{'type':_0x2d19b3(0x2ff),'common':{'name':_0x2d19b3(0x167),'type':_0x2d19b3(0x172),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES[_0x2d19b3(0x245)],'states':{[SYSTEM_MODES[_0x2d19b3(0x245)]]:_0x2d19b3(0x33e),[SYSTEM_MODES['VACATION']]:_0x2d19b3(0x284),[SYSTEM_MODES[_0x2d19b3(0x346)]]:_0x2d19b3(0x196),[SYSTEM_MODES[_0x2d19b3(0x1bf)]]:'Gast'}},'native':{}});}async function checkLtmObjects(_0x4a8745){const _0x441727=a0_0x1cddbe;await _0x4a8745['extendObjectAsync']('LTM',{'type':'channel','common':{'name':_0x441727(0x204)},'native':{}}),await _0x4a8745[_0x441727(0x367)](LTM_DP_RAW_LOG,{'type':_0x441727(0x2ff),'common':{'name':_0x441727(0x27e),'type':_0x441727(0x172),'role':_0x441727(0x2bb),'read':!![],'write':![]},'native':{}}),await _0x4a8745[_0x441727(0x367)](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':_0x441727(0x32a),'type':'string','role':_0x441727(0x2bb),'read':!![],'write':![]},'native':{}}),await _0x4a8745['extendObjectAsync'](LTM_DP_STATUS,{'type':'state','common':{'name':'Processing\x20Status','type':_0x441727(0x172),'role':_0x441727(0x321),'read':!![],'write':![]},'native':{}}),await _0x4a8745[_0x441727(0x367)](LTM_DP_TRIGGER_DIGEST,{'type':_0x441727(0x2ff),'common':{'name':_0x441727(0x2d6),'type':_0x441727(0x1ed),'role':_0x441727(0x311),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x4a8745[_0x441727(0x367)](LTM_DP_BASELINE_STATUS,{'type':_0x441727(0x2ff),'common':{'name':_0x441727(0x341),'type':_0x441727(0x172),'role':_0x441727(0x321),'read':!![],'write':![]},'native':{}});}async function checkLtmDriftObjects(_0x1aea7a){const _0x510e85=a0_0x1cddbe;await _0x1aea7a['extendObjectAsync'](LTM_DP_DRIFT_CHANNEL,{'type':_0x510e85(0x28d),'common':{'name':_0x510e85(0x203)},'native':{}}),await _0x1aea7a[_0x510e85(0x367)](LTM_DP_DRIFT_STATUS,{'type':'state','common':{'name':'Drift\x20Status','type':_0x510e85(0x172),'role':_0x510e85(0x2ff),'read':!![],'write':![],'def':_0x510e85(0x19e)},'native':{}}),await _0x1aea7a[_0x510e85(0x367)](LTM_DP_DRIFT_DETAILS,{'type':'state','common':{'name':_0x510e85(0x272),'type':'string','role':_0x510e85(0x321),'read':!![],'write':![]},'native':{}}),await _0x1aea7a[_0x510e85(0x367)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x510e85(0x2ff),'common':{'name':_0x510e85(0x175),'type':_0x510e85(0x2af),'role':_0x510e85(0x36c),'read':!![],'write':![]},'native':{}});}async function loadSystemMode(_0x50f37b){const _0x46e50b=a0_0x1cddbe;try{const _0x1dcb79=await _0x50f37b[_0x46e50b(0x349)](SYSTEM_DP_MODE);_0x1dcb79&&_0x1dcb79[_0x46e50b(0x2a1)]&&Object[_0x46e50b(0x18e)](SYSTEM_MODES)[_0x46e50b(0x20c)](_0x1dcb79[_0x46e50b(0x2a1)])?_0x50f37b['currentSystemMode']=_0x1dcb79[_0x46e50b(0x2a1)]:(_0x50f37b['currentSystemMode']=SYSTEM_MODES[_0x46e50b(0x245)],await _0x50f37b[_0x46e50b(0x236)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x46e50b(0x245)],'ack':!![]}));}catch(_0x30b07e){_0x50f37b['currentSystemMode']=SYSTEM_MODES[_0x46e50b(0x245)];}}async function loadRawEventLog(_0x43c38a){const _0x563b76=a0_0x1cddbe;try{const _0x1d35d8=await _0x43c38a[_0x563b76(0x349)](LTM_DP_RAW_LOG);if(_0x1d35d8&&_0x1d35d8[_0x563b76(0x2a1)])_0x43c38a[_0x563b76(0x21a)]=JSON[_0x563b76(0x1ad)](_0x1d35d8[_0x563b76(0x2a1)]);}catch(_0x22c93d){_0x43c38a[_0x563b76(0x21a)]=[];}}async function saveRawEventLog(_0x26f58a){const _0x4c51d0=a0_0x1cddbe;_0x26f58a[_0x4c51d0(0x21a)][_0x4c51d0(0x32e)]>RAW_LOG_MAX_SIZE&&_0x26f58a['rawEventLog']['splice'](0x0,_0x26f58a['rawEventLog']['length']-RAW_LOG_MAX_SIZE),await _0x26f58a[_0x4c51d0(0x236)](LTM_DP_RAW_LOG,{'val':JSON[_0x4c51d0(0x2f0)](_0x26f58a[_0x4c51d0(0x21a)]),'ack':!![]});}async function loadDailyDigests(_0x3cdc36){const _0xc7c68e=a0_0x1cddbe;try{const _0x5bc934=await _0x3cdc36[_0xc7c68e(0x349)](LTM_DP_DAILY_DIGESTS);if(_0x5bc934&&_0x5bc934[_0xc7c68e(0x2a1)])_0x3cdc36['dailyDigests']=JSON[_0xc7c68e(0x1ad)](_0x5bc934[_0xc7c68e(0x2a1)]);}catch(_0x1f7f5d){_0x3cdc36[_0xc7c68e(0x31a)]=[];}await updateBaselineStatus(_0x3cdc36);}async function saveDailyDigests(_0x5ee65c,_0x10aa65=!![]){const _0x4ac975=a0_0x1cddbe,_0x40d9dd=_0x5ee65c[_0x4ac975(0x1b7)][_0x4ac975(0x253)]||0x3c;_0x5ee65c[_0x4ac975(0x31a)][_0x4ac975(0x32e)]>_0x40d9dd&&_0x5ee65c[_0x4ac975(0x31a)][_0x4ac975(0x29f)](0x0,_0x5ee65c[_0x4ac975(0x31a)]['length']-_0x40d9dd);await _0x5ee65c['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x4ac975(0x2f0)](_0x5ee65c[_0x4ac975(0x31a)]),'ack':!![]});if(_0x10aa65)await updateBaselineStatus(_0x5ee65c);}async function updateAnalysisHistory(_0x129e0d,_0x294ee0){const _0x21c4dc=a0_0x1cddbe;_0x129e0d[_0x21c4dc(0x316)][_0x21c4dc(0x238)](_0x294ee0);if(_0x129e0d[_0x21c4dc(0x316)][_0x21c4dc(0x32e)]>ANALYSIS_HISTORY_MAX_SIZE)_0x129e0d[_0x21c4dc(0x316)][_0x21c4dc(0x1a2)]();await _0x129e0d[_0x21c4dc(0x236)](_0x21c4dc(0x2ea),{'val':JSON[_0x21c4dc(0x2f0)](_0x129e0d[_0x21c4dc(0x316)]),'ack':!![]});}async function updateBaselineStatus(_0x4ab800){const _0x4311f0=a0_0x1cddbe;if(!_0x4ab800['isProVersion']){await _0x4ab800[_0x4311f0(0x236)](LTM_DP_BASELINE_STATUS,{'val':_0x4311f0(0x232),'ack':!![]});return;}const _0x4bc34e=_0x4ab800['dailyDigests'][_0x4311f0(0x32e)]>=(_0x4ab800[_0x4311f0(0x1b7)]['minDaysForBaseline']||0x7)?_0x4311f0(0x30a)+_0x4ab800[_0x4311f0(0x31a)][_0x4311f0(0x32e)]+_0x4311f0(0x336):_0x4311f0(0x2b0)+_0x4ab800[_0x4311f0(0x31a)][_0x4311f0(0x32e)]+'/'+(_0x4ab800[_0x4311f0(0x1b7)][_0x4311f0(0x361)]||0x7)+')';await _0x4ab800[_0x4311f0(0x236)](LTM_DP_BASELINE_STATUS,{'val':_0x4bc34e,'ack':!![]});}async function initSensorSubscriptions(_0x37225d){const _0x2ddc04=a0_0x1cddbe,_0x416696=_0x37225d['config'][_0x2ddc04(0x215)];if(_0x416696&&_0x416696[_0x2ddc04(0x32e)]>0x0){_0x37225d['log']['info']('Subscribing\x20to\x20'+_0x416696['length']+_0x2ddc04(0x184));for(const _0xf0431a of _0x416696){if(_0xf0431a['id']){await _0x37225d[_0x2ddc04(0x1c6)](_0xf0431a['id']);try{const _0x3ad2c4=await _0x37225d[_0x2ddc04(0x2f5)](_0xf0431a['id']);if(_0x3ad2c4)_0x37225d[_0x2ddc04(0x30b)][_0xf0431a['id']]=_0x3ad2c4[_0x2ddc04(0x2a1)];}catch(_0x2af4c7){}}}}}async function initPresenceSubscriptions(_0x74396){const _0x4ec1a6=a0_0x1cddbe,_0x500bd8=_0x74396[_0x4ec1a6(0x1b7)][_0x4ec1a6(0x224)]||[];if(_0x500bd8['length']>0x0){_0x74396[_0x4ec1a6(0x25a)][_0x4ec1a6(0x23c)](_0x4ec1a6(0x271)+_0x500bd8[_0x4ec1a6(0x32e)]+_0x4ec1a6(0x16e));for(const _0x142cef of _0x500bd8){await _0x74396[_0x4ec1a6(0x1c6)](_0x142cef);}try{await checkWifiPresence(_0x74396);}catch(_0x1679b8){}}}async function getWeatherContext(_0x75f28b){const _0x6a1f45=a0_0x1cddbe;try{if(!_0x75f28b[_0x6a1f45(0x1b7)][_0x6a1f45(0x1a1)])return _0x6a1f45(0x22b);let _0x269545='';const _0x3caa66=_0x75f28b[_0x6a1f45(0x1b7)][_0x6a1f45(0x334)];if(_0x3caa66)try{if(_0x3caa66[_0x6a1f45(0x20c)](_0x6a1f45(0x25f))){const _0x11d779=await _0x75f28b[_0x6a1f45(0x2f5)](_0x3caa66+_0x6a1f45(0x38c));if(_0x11d779&&_0x11d779[_0x6a1f45(0x2a1)])_0x269545=_0x11d779[_0x6a1f45(0x2a1)];}else{if(_0x3caa66['includes']('daswetter')){const _0x155c54=await _0x75f28b[_0x6a1f45(0x2f5)](_0x3caa66+_0x6a1f45(0x36d));if(_0x155c54&&_0x155c54[_0x6a1f45(0x2a1)])_0x269545=_0x155c54[_0x6a1f45(0x2a1)];}else{if(_0x3caa66['includes'](_0x6a1f45(0x177))){const _0x457804=await _0x75f28b[_0x6a1f45(0x2f5)](_0x3caa66+'.forecast.current.state');if(_0x457804&&_0x457804[_0x6a1f45(0x2a1)])_0x269545=_0x457804[_0x6a1f45(0x2a1)];}}}}catch(_0x35bec1){}if(!_0x269545){const _0x43dfd2=[_0x6a1f45(0x38b),_0x6a1f45(0x1fa),_0x6a1f45(0x267),_0x6a1f45(0x17c)];for(const _0x2a8300 of _0x43dfd2){try{const _0x5a9861=await _0x75f28b[_0x6a1f45(0x1fc)](_0x2a8300);if(_0x5a9861){if(_0x2a8300[_0x6a1f45(0x20c)](_0x6a1f45(0x25f))){const _0x515456=await _0x75f28b[_0x6a1f45(0x2f5)](_0x2a8300+'.Summary.Current');if(_0x515456&&_0x515456[_0x6a1f45(0x2a1)]){_0x269545=_0x515456[_0x6a1f45(0x2a1)];break;}}}}catch(_0x1020e6){}}}return _0x269545?'WETTER:\x20'+_0x269545:_0x6a1f45(0x1e5);}catch(_0xa86110){return'WETTER\x20ERROR:\x20'+_0xa86110[_0x6a1f45(0x29e)];}}async function getCalendarContext(_0x4c52f1){const _0x4c30ca=a0_0x1cddbe;try{if(!_0x4c52f1[_0x4c30ca(0x1b7)][_0x4c30ca(0x171)])return'Kalender:\x20Deaktiviert';let _0x21e895=_0x4c52f1[_0x4c30ca(0x1b7)][_0x4c30ca(0x296)]||_0x4c30ca(0x183),_0x36fa4f=_0x4c52f1[_0x4c30ca(0x1b7)]['calendarSelection']||[];if(typeof _0x36fa4f===_0x4c30ca(0x172))_0x36fa4f=_0x36fa4f[_0x4c30ca(0x1a4)](',');try{const _0x4d3930=await _0x4c52f1[_0x4c30ca(0x2f5)](_0x21e895+_0x4c30ca(0x35f));if(_0x4d3930&&_0x4d3930[_0x4c30ca(0x2a1)]){let _0x2c6f29=tryParse(_0x4d3930[_0x4c30ca(0x2a1)]);if(_0x2c6f29&&Array[_0x4c30ca(0x297)](_0x2c6f29)){if(_0x36fa4f['length']>0x0)_0x2c6f29=_0x2c6f29['filter'](_0x586cf2=>_0x36fa4f[_0x4c30ca(0x20c)](_0x586cf2[_0x4c30ca(0x221)]||''));else return _0x4c30ca(0x21c);if(_0x2c6f29[_0x4c30ca(0x32e)]>0x0){const _0x127982=_0x2c6f29['slice'](0x0,0x3)[_0x4c30ca(0x25c)](_0x5ecee3=>{const _0x333ac9=_0x4c30ca;let _0x18ce8a=_0x5ecee3[_0x333ac9(0x36c)];if(_0x5ecee3[_0x333ac9(0x206)])_0x18ce8a+='\x20'+_0x5ecee3['time'];return _0x18ce8a+':\x20'+_0x5ecee3[_0x333ac9(0x1d2)]+'\x20('+_0x5ecee3[_0x333ac9(0x221)]+')';});return _0x4c30ca(0x2fd)+_0x127982['join']('\x20|\x20');}else return'KALENDER:\x20Keine\x20relevanten\x20Termine';}}}catch(_0x4d1612){_0x4c52f1['log']['warn'](_0x4c30ca(0x37c)+_0x4d1612['message']);}return _0x4c30ca(0x32d);}catch(_0x326ecb){return'KALENDER\x20ERROR:\x20'+_0x326ecb['message'];}}async function getCalendarNames(_0x3d59e8,_0x4b70bb){const _0x28d2d0=a0_0x1cddbe;try{const _0xb7871c=await _0x3d59e8[_0x28d2d0(0x2f5)](_0x4b70bb+'.data.table');if(_0xb7871c&&_0xb7871c[_0x28d2d0(0x2a1)]){const _0x14f7c4=tryParse(_0xb7871c[_0x28d2d0(0x2a1)]);if(_0x14f7c4&&Array[_0x28d2d0(0x297)](_0x14f7c4)){const _0x5692ff=[...new Set(_0x14f7c4[_0x28d2d0(0x25c)](_0x41123b=>_0x41123b[_0x28d2d0(0x221)])['filter'](Boolean))];return _0x5692ff[_0x28d2d0(0x25d)]();}}return[];}catch(_0x5b987f){return _0x3d59e8['log'][_0x28d2d0(0x180)](_0x28d2d0(0x1ec)+_0x5b987f['message']),[];}}async function checkWifiPresence(_0x2d5d72){const _0x6b6dd7=a0_0x1cddbe;try{const _0x353117=_0x2d5d72[_0x6b6dd7(0x1b7)][_0x6b6dd7(0x224)]||[];let _0x2d944e=![];const _0x5f5134=[];for(const _0xc93856 of _0x353117){try{const _0x443501=await _0x2d5d72['getForeignStateAsync'](_0xc93856);if(_0x443501&&(_0x443501['val']===!![]||_0x443501['val']==='online'||_0x443501[_0x6b6dd7(0x2a1)]===0x1)){_0x2d944e=!![];const _0x559ffc=await _0x2d5d72['getForeignObjectAsync'](_0xc93856);let _0x3a5b0b=_0xc93856;_0x559ffc&&_0x559ffc[_0x6b6dd7(0x278)]&&_0x559ffc[_0x6b6dd7(0x278)][_0x6b6dd7(0x2cd)]&&(_0x3a5b0b=typeof _0x559ffc[_0x6b6dd7(0x278)][_0x6b6dd7(0x2cd)]===_0x6b6dd7(0x27c)?_0x559ffc[_0x6b6dd7(0x278)][_0x6b6dd7(0x2cd)]['de']||_0x559ffc['common'][_0x6b6dd7(0x2cd)]['en']:_0x559ffc['common'][_0x6b6dd7(0x2cd)]),_0x5f5134['push'](_0x3a5b0b);}}catch(_0x59c826){}}return await _0x2d5d72[_0x6b6dd7(0x236)](_0x6b6dd7(0x378),{'val':_0x5f5134[_0x6b6dd7(0x38a)](',\x20'),'ack':!![]}),_0x2d944e&&(_0x2d5d72[_0x6b6dd7(0x2c5)]&&(_0x2d5d72[_0x6b6dd7(0x25a)]['info'](_0x6b6dd7(0x2dc)),abortExitTimer(_0x2d5d72)),!_0x2d5d72[_0x6b6dd7(0x20b)]&&_0x2d5d72[_0x6b6dd7(0x22c)]===SYSTEM_MODES['NORMAL']&&await setPresence(_0x2d5d72,!![])),_0x2d944e;}catch(_0x568415){return _0x2d5d72['log'][_0x6b6dd7(0x180)]('Error\x20checking\x20WiFi:\x20'+_0x568415[_0x6b6dd7(0x29e)]),![];}}function startExitTimer(_0x266220){const _0x4d2908=a0_0x1cddbe;abortExitTimer(_0x266220),_0x266220[_0x4d2908(0x314)]=!![],_0x266220[_0x4d2908(0x274)]=setTimeout(()=>{const _0xfe4880=_0x4d2908;_0x266220[_0xfe4880(0x314)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x266220[_0x4d2908(0x2c5)]=setTimeout(()=>{const _0x7721fe=_0x4d2908;setPresence(_0x266220,![]),_0x266220[_0x7721fe(0x2c5)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x1074e9){const _0x48e73f=a0_0x1cddbe;if(_0x1074e9[_0x48e73f(0x2c5)])clearTimeout(_0x1074e9[_0x48e73f(0x2c5)]);if(_0x1074e9[_0x48e73f(0x274)])clearTimeout(_0x1074e9[_0x48e73f(0x274)]);_0x1074e9[_0x48e73f(0x2c5)]=null,_0x1074e9[_0x48e73f(0x274)]=null,_0x1074e9[_0x48e73f(0x314)]=![];}async function setPresence(_0xec2ead,_0x5ea942){const _0x425cee=a0_0x1cddbe;if(_0xec2ead[_0x425cee(0x20b)]===_0x5ea942)return;_0xec2ead[_0x425cee(0x20b)]=_0x5ea942,await _0xec2ead[_0x425cee(0x236)](_0x425cee(0x2c7),{'val':_0x5ea942,'ack':!![]});}async function saveFeedback(_0x4fc2f7,_0x26ab3c){const _0x3cb679=a0_0x1cddbe;_0x4fc2f7[_0x3cb679(0x25a)][_0x3cb679(0x23c)](_0x3cb679(0x301)+JSON[_0x3cb679(0x2f0)](_0x26ab3c));}async function runBaselineDriftAnalysis(_0x180831){const _0x5a93fc=a0_0x1cddbe;if(!_0x180831[_0x5a93fc(0x1a9)]||!_0x180831['geminiModel'])return;const _0xca9d51=_0x180831[_0x5a93fc(0x1b7)][_0x5a93fc(0x362)]||0xe;if(_0x180831[_0x5a93fc(0x31a)][_0x5a93fc(0x32e)]<_0xca9d51+(_0x180831[_0x5a93fc(0x1b7)]['minDaysForBaseline']||0x7)){await _0x180831[_0x5a93fc(0x236)](LTM_DP_DRIFT_STATUS,{'val':_0x5a93fc(0x30f),'ack':!![]});return;}const _0x39c056=_0x180831[_0x5a93fc(0x31a)][_0x5a93fc(0x1c4)](-_0xca9d51),_0x46531a=_0x180831[_0x5a93fc(0x31a)]['slice'](0x0,_0x180831[_0x5a93fc(0x31a)]['length']-_0xca9d51),_0x4ee4da=_0x5a93fc(0x354)+JSON['stringify'](_0x46531a)+'\x0aSTB:\x20'+JSON[_0x5a93fc(0x2f0)](_0x39c056);try{const _0x5ac2d4=await _0x180831[_0x5a93fc(0x25b)][_0x5a93fc(0x1ce)](_0x4ee4da),_0x52bdbb=JSON[_0x5a93fc(0x1ad)](_0x5ac2d4[_0x5a93fc(0x29c)][_0x5a93fc(0x321)]()[_0x5a93fc(0x35e)](/```json|```/g,'')[_0x5a93fc(0x256)]());_0x52bdbb[_0x5a93fc(0x17e)]&&(await _0x180831['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x52bdbb[_0x5a93fc(0x17e)],'ack':!![]}),await _0x180831[_0x5a93fc(0x236)](LTM_DP_DRIFT_DETAILS,{'val':_0x52bdbb[_0x5a93fc(0x198)],'ack':!![]}),await _0x180831[_0x5a93fc(0x236)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x5a93fc(0x36f)](),'ack':!![]}));}catch(_0x53aefe){}}function setupLtmScheduler(_0x2bbf45){const _0x3481b=a0_0x1cddbe;try{if(_0x2bbf45['ltmJob'])_0x2bbf45[_0x3481b(0x176)]['cancel']();if(!_0x2bbf45[_0x3481b(0x1a9)]){_0x2bbf45[_0x3481b(0x236)](LTM_DP_STATUS,{'val':_0x3481b(0x232),'ack':!![]});return;}_0x2bbf45[_0x3481b(0x176)]=schedule[_0x3481b(0x1d7)](LTM_SCHEDULE,()=>createDailyDigest(_0x2bbf45));}catch(_0x5d3df3){_0x2bbf45['log'][_0x3481b(0x180)](_0x3481b(0x396)+_0x5d3df3[_0x3481b(0x29e)]);}}function setupModeResetScheduler(_0x4ed285){const _0x2d283c=a0_0x1cddbe;try{if(_0x4ed285[_0x2d283c(0x348)])_0x4ed285[_0x2d283c(0x348)]['cancel']();_0x4ed285['modeResetJob']=schedule[_0x2d283c(0x1d7)](MODE_RESET_SCHEDULE,async()=>{const _0x40f8e3=_0x2d283c;await loadSystemMode(_0x4ed285),AUTO_RESET_MODES['includes'](_0x4ed285[_0x40f8e3(0x22c)])&&await _0x4ed285[_0x40f8e3(0x236)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x40f8e3(0x245)],'ack':![]});});}catch(_0x470923){_0x4ed285[_0x2d283c(0x25a)][_0x2d283c(0x180)](_0x2d283c(0x390)+_0x470923[_0x2d283c(0x29e)]);}}function setupDriftAnalysisScheduler(_0x17ffbf){const _0x1b0c78=a0_0x1cddbe;try{if(_0x17ffbf['driftAnalysisTimer'])clearInterval(_0x17ffbf[_0x1b0c78(0x2c1)]);if(!_0x17ffbf[_0x1b0c78(0x1a9)])return;_0x17ffbf[_0x1b0c78(0x2c1)]=setInterval(()=>runBaselineDriftAnalysis(_0x17ffbf),(_0x17ffbf['config'][_0x1b0c78(0x27a)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x17ffbf),0x1388);}catch(_0x370323){_0x17ffbf['log'][_0x1b0c78(0x180)](_0x1b0c78(0x273)+_0x370323[_0x1b0c78(0x29e)]);}}function setupBriefingScheduler(_0x2111e6){const _0x2793a4=a0_0x1cddbe;try{if(_0x2111e6['briefingJob'])_0x2111e6['briefingJob'][_0x2793a4(0x1b4)]();if(!_0x2111e6[_0x2793a4(0x1b7)][_0x2793a4(0x292)])return;const _0x4e782a=(_0x2111e6['config'][_0x2793a4(0x33f)]||_0x2793a4(0x24d))['split'](':'),_0x4ce004=parseInt(_0x4e782a[0x0])||0x8,_0x49501b=parseInt(_0x4e782a[0x1])||0x0,_0x510f9b=_0x49501b+'\x20'+_0x4ce004+_0x2793a4(0x1d5);_0x2111e6[_0x2793a4(0x25a)][_0x2793a4(0x23c)](_0x2793a4(0x1ba)+_0x4ce004+':'+(_0x49501b<0xa?'0'+_0x49501b:_0x49501b)),_0x2111e6[_0x2793a4(0x351)]=schedule[_0x2793a4(0x1d7)](_0x510f9b,()=>{sendMorningBriefing(_0x2111e6);});}catch(_0xba9b70){_0x2111e6[_0x2793a4(0x25a)]['error'](_0x2793a4(0x1c1)+_0xba9b70[_0x2793a4(0x29e)]);}}async function sendNotification(_0x47930a,_0x2a1971,_0x5c4ead=![],_0x560e2b=![]){const _0x402342=a0_0x1cddbe;_0x47930a[_0x402342(0x25a)][_0x402342(0x23c)]((_0x5c4ead?_0x402342(0x2de):'')+'Sending\x20notification:\x20\x22'+_0x2a1971+'\x22');const _0x146568=_0x47930a[_0x402342(0x1b7)];let _0x361043=0x0;if(_0x146568['notifyTelegramEnabled']){let _0x49b762={};(_0x2a1971[_0x402342(0x20c)](_0x402342(0x34d))||_0x560e2b)&&(_0x49b762={'reply_markup':{'inline_keyboard':[[{'text':_0x402342(0x356),'callback_data':_0x402342(0x17f)}],[{'text':_0x402342(0x373),'callback_data':'COGNI_REQUEST_CALL'}]]}}),await _0x47930a[_0x402342(0x2a2)](_0x146568['notifyTelegramInstance'],'send',{'text':_0x2a1971,'user':_0x146568[_0x402342(0x381)],..._0x49b762}),_0x361043++;}if(_0x146568['notifyPushoverEnabled']){let _0x2fd006={'message':_0x2a1971,'title':_0x560e2b?'üö®\x20EMERGENCY':_0x402342(0x237),'priority':_0x560e2b?0x2:0x1,'device':_0x146568[_0x402342(0x229)]};_0x560e2b&&(_0x2fd006['retry']=0x1e,_0x2fd006[_0x402342(0x2f8)]=0xe10,_0x2fd006['sound']='siren'),await _0x47930a['sendToAsync'](_0x146568[_0x402342(0x162)],_0x402342(0x318),_0x2fd006),_0x361043++;}return _0x146568[_0x402342(0x15d)]&&(await _0x47930a[_0x402342(0x2a2)](_0x146568[_0x402342(0x1e7)],_0x402342(0x318),{'text':_0x2a1971,'to':_0x146568['notifyEmailRecipient']}),_0x361043++),_0x361043;}async function setupTelegramListener(_0x2ad428){const _0x1583b2=a0_0x1cddbe,_0x54e365=_0x2ad428[_0x1583b2(0x1b7)][_0x1583b2(0x1b0)];_0x2ad428[_0x1583b2(0x1b7)][_0x1583b2(0x31f)]&&_0x54e365&&(_0x2ad428['log']['info'](_0x1583b2(0x2c6)+_0x54e365+'\x20for\x20interactive\x20buttons...'),await _0x2ad428[_0x1583b2(0x1c6)](_0x54e365+_0x1583b2(0x1e1)));}async function handleTelegramResponse(_0x43da36,_0x37e6ee){const _0x281492=a0_0x1cddbe;let _0x52b0cc=_0x37e6ee;_0x37e6ee[_0x281492(0x249)]('[')&&(_0x52b0cc=_0x37e6ee[_0x281492(0x168)](_0x37e6ee[_0x281492(0x304)](']')+0x1));if(_0x52b0cc===_0x281492(0x17f))_0x43da36['log']['info'](_0x281492(0x2f7)),await _0x43da36['setStateAsync'](_0x281492(0x307),{'val':![],'ack':!![]}),await _0x43da36[_0x281492(0x236)](_0x281492(0x18c),{'val':_0x281492(0x242),'ack':!![]}),_0x43da36[_0x281492(0x2b7)]=![],sendNotification(_0x43da36,_0x281492(0x165),![]);else _0x52b0cc===_0x281492(0x280)&&(_0x43da36[_0x281492(0x25a)][_0x281492(0x16d)](_0x281492(0x1d1)),sendNotification(_0x43da36,_0x281492(0x37a),![],!![]));}async function runAutopilot(_0xdc201){const _0x5d5f51=a0_0x1cddbe,_0x4c329c=_0xdc201['config'][_0x5d5f51(0x254)],_0xca7006=_0xdc201[_0x5d5f51(0x2d2)][_0x5d5f51(0x32e)]>0x0?_0xdc201['eventHistory'][0x0][_0x5d5f51(0x2a9)]:Date['now'](),_0x5d66e0=(Date[_0x5d5f51(0x36f)]()-_0xca7006)/(0x3e8*0x3c*0x3c);let _0x1baecf='';_0xdc201[_0x5d5f51(0x1b7)]['inactivityMonitoringEnabled']&&_0xdc201[_0x5d5f51(0x22c)]===SYSTEM_MODES[_0x5d5f51(0x245)]&&_0xdc201[_0x5d5f51(0x20b)]&&(_0x5d66e0>_0x4c329c&&(_0x1baecf='HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20'+_0x5d66e0[_0x5d5f51(0x2ef)](0x1)+_0x5d5f51(0x31c))),runGeminiAnalysis(_0xdc201,_0x1baecf)['catch'](_0x46ffb5=>_0xdc201[_0x5d5f51(0x25a)][_0x5d5f51(0x180)](_0x46ffb5));}async function createDailyDigest(_0x2ee1fe){const _0x266aaa=a0_0x1cddbe;if(!_0x2ee1fe['isProVersion'])return;await _0x2ee1fe[_0x266aaa(0x236)](LTM_DP_STATUS,{'val':_0x266aaa(0x226)+new Date()[_0x266aaa(0x17a)](),'ack':!![]});if(!_0x2ee1fe[_0x266aaa(0x25b)]||_0x2ee1fe[_0x266aaa(0x21a)][_0x266aaa(0x32e)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x2ee1fe[_0x266aaa(0x236)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x49ff6c=JSON[_0x266aaa(0x1ad)](JSON[_0x266aaa(0x2f0)](_0x2ee1fe[_0x266aaa(0x21a)])),_0x415388=_0x49ff6c[_0x266aaa(0x32e)],_0x2dcc95=_0x266aaa(0x2b3)+JSON['stringify'](_0x49ff6c);try{const _0x9bade3=await _0x2ee1fe[_0x266aaa(0x25b)][_0x266aaa(0x1ce)](_0x2dcc95),_0x54a00f=JSON[_0x266aaa(0x1ad)](_0x9bade3['response']['text']()['replace'](/```json|```/g,'')[_0x266aaa(0x256)]());if(_0x54a00f[_0x266aaa(0x2f3)]){const _0x352aac={'timestamp':new Date()['toISOString'](),'eventCount':_0x415388,'summary':_0x54a00f[_0x266aaa(0x2f3)],'activityLevel':_0x54a00f[_0x266aaa(0x2a0)],'systemMode':_0x2ee1fe[_0x266aaa(0x22c)]};_0x2ee1fe[_0x266aaa(0x31a)][_0x266aaa(0x325)](_0x352aac),await saveDailyDigests(_0x2ee1fe),_0x2ee1fe[_0x266aaa(0x21a)]=[],await saveRawEventLog(_0x2ee1fe),await _0x2ee1fe[_0x266aaa(0x236)](LTM_DP_STATUS,{'val':'Success:\x20Compressed\x20'+_0x415388+_0x266aaa(0x1dd),'ack':!![]}),_0x2ee1fe['isProVersion']&&(_0x2ee1fe[_0x266aaa(0x25a)][_0x266aaa(0x23c)](_0x266aaa(0x1a6)),sendToPython(_0x2ee1fe,_0x266aaa(0x195),{'digest':_0x352aac}));}}catch(_0x59f894){await _0x2ee1fe['setStateAsync'](LTM_DP_STATUS,{'val':'Error:\x20'+_0x59f894[_0x266aaa(0x29e)],'ack':!![]});}}async function sendMorningBriefing(_0x2f1125){const _0x4f09d1=a0_0x1cddbe;if(!_0x2f1125[_0x4f09d1(0x25b)])return;_0x2f1125['log']['info']('Generating\x20Morning\x20Briefing...');const _0x3e8f15=_0x2f1125['dailyDigests'][_0x4f09d1(0x32e)]>0x0?_0x2f1125[_0x4f09d1(0x31a)][_0x2f1125['dailyDigests'][_0x4f09d1(0x32e)]-0x1]:null,_0x317393=_0x3e8f15&&_0x3e8f15[_0x4f09d1(0x23e)]?_0x3e8f15[_0x4f09d1(0x23e)][_0x4f09d1(0x345)]:_0x4f09d1(0x19e),_0x39a8b0=new Date();_0x39a8b0[_0x4f09d1(0x1e0)](0x4,0x0,0x0,0x0);const _0x62363=_0x2f1125[_0x4f09d1(0x2d2)][_0x4f09d1(0x2ba)](_0x174735=>new Date(_0x174735['timestamp'])>_0x39a8b0),_0x2c3e67=PERSONA_MAPPING[_0x2f1125[_0x4f09d1(0x1b7)][_0x4f09d1(0x32b)]||'generic'],_0x4a3d7f=_0x2f1125[_0x4f09d1(0x1b7)]['livingContext']||'',_0x26fb70=await getWeatherContext(_0x2f1125),_0x4affea=await getCalendarContext(_0x2f1125),_0x5e33de=_0x4f09d1(0x353)+_0x2c3e67+_0x4f09d1(0x31b)+_0x4a3d7f+'.\x20ZUSATZ:\x20'+_0x26fb70+'\x20'+_0x4affea+_0x4f09d1(0x210)+_0x317393+_0x4f09d1(0x331)+JSON[_0x4f09d1(0x2f0)](_0x62363['slice'](0x0,0xa))+_0x4f09d1(0x317);try{const _0x188e39=await _0x2f1125[_0x4f09d1(0x25b)][_0x4f09d1(0x1ce)](_0x5e33de),_0x519603=_0x4f09d1(0x33d)+_0x188e39[_0x4f09d1(0x29c)]['text']()[_0x4f09d1(0x256)]();sendNotification(_0x2f1125,_0x519603),_0x2f1125[_0x4f09d1(0x25a)][_0x4f09d1(0x23c)]('Morning\x20Briefing\x20sent.');}catch(_0x216da0){_0x2f1125['log'][_0x4f09d1(0x180)](_0x4f09d1(0x16f)+_0x216da0[_0x4f09d1(0x29e)]);}}async function scanForDevices(_0x1d48e9,_0xd308c3){const _0x2d1745=a0_0x1cddbe;_0x1d48e9[_0x2d1745(0x25a)][_0x2d1745(0x23c)]('Scanning\x20for\x20devices\x20(V8:\x20Whitelist\x20Priority)...');const _0x29b561=[],_0x855f82=await _0x1d48e9[_0x2d1745(0x1db)]('*'),_0x13597a=await _0x1d48e9[_0x2d1745(0x1db)](_0x2d1745(0x380),_0x2d1745(0x2ad)),_0x51a4ea=await _0x1d48e9[_0x2d1745(0x1db)](_0x2d1745(0x36a),'enum'),_0x2aba2d={};if(_0x13597a)for(const _0x16012c in _0x13597a){const _0x5e2dd7=_0x13597a[_0x16012c][_0x2d1745(0x278)][_0x2d1745(0x35b)]||[];_0x5e2dd7[_0x2d1745(0x2c0)](_0x490400=>{const _0x59f247=_0x2d1745;if(!_0x2aba2d[_0x490400])_0x2aba2d[_0x490400]=[];_0x2aba2d[_0x490400][_0x59f247(0x325)](_0x16012c);});}const _0x23e4e4={};if(_0x51a4ea)for(const _0x364d88 in _0x51a4ea){const _0x3da84e=_0x51a4ea[_0x364d88][_0x2d1745(0x278)][_0x2d1745(0x35b)]||[],_0x56b05=typeof _0x51a4ea[_0x364d88]['common'][_0x2d1745(0x2cd)]==='object'?_0x51a4ea[_0x364d88][_0x2d1745(0x278)][_0x2d1745(0x2cd)]['de']:_0x51a4ea[_0x364d88]['common'][_0x2d1745(0x2cd)];_0x3da84e[_0x2d1745(0x2c0)](_0x2157ff=>_0x23e4e4[_0x2157ff]=_0x56b05);}const _0x456229=_0xd308c3['selectedFunctionIds']||[],_0x17f28c=_0xd308c3[_0x2d1745(0x2be)]!==![],_0x465d7d=_0xd308c3[_0x2d1745(0x1c3)]!==![],_0x9dd2b1=_0xd308c3['lights']!==![],_0x3d0921=_0xd308c3[_0x2d1745(0x181)]===!![],_0x4003e1=_0xd308c3[_0x2d1745(0x263)]===!![];for(const _0x15cd40 in _0x855f82){const _0x5e45e1=_0x855f82[_0x15cd40];if(_0x5e45e1['type']!==_0x2d1745(0x2ff)||!_0x5e45e1[_0x2d1745(0x278)])continue;if(ADAPTER_BLACKLIST['some'](_0x3af7a7=>_0x15cd40[_0x2d1745(0x249)](_0x3af7a7))&&!_0x4003e1)continue;const _0x41083c=(_0x5e45e1['common'][_0x2d1745(0x2b4)]||'')[_0x2d1745(0x19a)]();let _0x2bae1c=(typeof _0x5e45e1[_0x2d1745(0x278)][_0x2d1745(0x2cd)]===_0x2d1745(0x27c)?_0x5e45e1[_0x2d1745(0x278)][_0x2d1745(0x2cd)]['de']:_0x5e45e1[_0x2d1745(0x278)][_0x2d1745(0x2cd)])||_0x15cd40;const _0x2161f3=_0x2bae1c[_0x2d1745(0x19a)]();let _0x573994=![],_0x5cffb8=![];if(_0x456229['length']>0x0){const _0xcb6146=_0x2aba2d[_0x15cd40]||[],_0x29c10b=_0x15cd40[_0x2d1745(0x1a4)]('.')[_0x2d1745(0x1c4)](0x0,-0x1)[_0x2d1745(0x38a)]('.'),_0x464983=_0x2aba2d[_0x29c10b]||[];(_0xcb6146['some'](_0x4c31c7=>_0x456229[_0x2d1745(0x20c)](_0x4c31c7))||_0x464983[_0x2d1745(0x299)](_0x1cfd08=>_0x456229['includes'](_0x1cfd08)))&&(_0x573994=!![],_0x5cffb8=!![]);}if(!_0x573994&&!_0x4003e1){if(HARD_IGNORE_TERMS[_0x2d1745(0x299)](_0x4b9253=>_0x15cd40[_0x2d1745(0x20c)](_0x4b9253)||_0x2161f3['includes'](_0x4b9253[_0x2d1745(0x19a)]())))continue;}if(BAD_NAMES['some'](_0x757234=>_0x2161f3===_0x757234||_0x2161f3[_0x2d1745(0x264)]('.'+_0x757234))){const _0x3c89d0=_0x15cd40[_0x2d1745(0x1a4)]('.');if(_0x3c89d0['length']>0x2){const _0x1b7d30=_0x3c89d0[_0x2d1745(0x1c4)](0x0,-0x1)[_0x2d1745(0x38a)]('.'),_0x3decc3=_0x855f82[_0x1b7d30];if(_0x3decc3&&_0x3decc3[_0x2d1745(0x278)]&&_0x3decc3[_0x2d1745(0x278)]['name']){const _0x1933a2=typeof _0x3decc3[_0x2d1745(0x278)][_0x2d1745(0x2cd)]==='object'?_0x3decc3['common'][_0x2d1745(0x2cd)]['de']:_0x3decc3[_0x2d1745(0x278)][_0x2d1745(0x2cd)];_0x1933a2&&!_0x2bae1c['includes'](_0x1933a2)&&(_0x2bae1c=_0x1933a2+'\x20'+_0x2bae1c);}}}let _0x5bd8a4='';if(_0x17f28c&&(_0x41083c['includes']('motion')||_0x41083c['includes'](_0x2d1745(0x2ab))||_0x2161f3[_0x2d1745(0x20c)](_0x2d1745(0x1f5))||_0x2161f3['includes'](_0x2d1745(0x383))))_0x5bd8a4=_0x2d1745(0x2be);else{if(!_0x5bd8a4&&_0x465d7d&&(_0x41083c[_0x2d1745(0x20c)]('door')||_0x41083c[_0x2d1745(0x20c)]('window')||_0x41083c[_0x2d1745(0x20c)](_0x2d1745(0x169))||_0x41083c[_0x2d1745(0x20c)](_0x2d1745(0x199))||_0x41083c[_0x2d1745(0x20c)](_0x2d1745(0x31d))||_0x2161f3['includes'](_0x2d1745(0x371))||_0x2161f3['includes'](_0x2d1745(0x338))||_0x2161f3[_0x2d1745(0x20c)]('rollladen')))_0x5bd8a4=_0x2d1745(0x1c5);else{if(!_0x5bd8a4&&_0x9dd2b1&&(_0x41083c[_0x2d1745(0x20c)]('light')||_0x41083c[_0x2d1745(0x20c)](_0x2d1745(0x2c9))||_0x41083c[_0x2d1745(0x20c)]('dimmer')||_0x2161f3[_0x2d1745(0x20c)](_0x2d1745(0x34c))||_0x2161f3[_0x2d1745(0x20c)]('lampe')||_0x2161f3[_0x2d1745(0x20c)](_0x2d1745(0x2cc)))){if(_0x5e45e1[_0x2d1745(0x278)][_0x2d1745(0x377)]||_0x41083c['includes'](_0x2d1745(0x2dd)))_0x5bd8a4=_0x2d1745(0x20f);}else{if(!_0x5bd8a4&&_0x3d0921&&(_0x41083c[_0x2d1745(0x20c)]('temperature')||_0x41083c[_0x2d1745(0x20c)](_0x2d1745(0x27f))||_0x41083c[_0x2d1745(0x20c)](_0x2d1745(0x23b))||_0x2161f3['includes'](_0x2d1745(0x17b))||_0x2161f3[_0x2d1745(0x20c)](_0x2d1745(0x283))||_0x2161f3[_0x2d1745(0x20c)]('heizung')))_0x5bd8a4=_0x2d1745(0x181);else{if(!_0x5bd8a4&&_0x5cffb8)_0x5bd8a4='custom';}}}}if(_0x5bd8a4){let _0x44c342=_0x23e4e4[_0x15cd40]||'';if(!_0x44c342){let _0x3b6472=_0x15cd40;for(let _0x15a5c1=0x0;_0x15a5c1<0x3;_0x15a5c1++){const _0x5e5361=_0x3b6472[_0x2d1745(0x35d)]('.');if(_0x5e5361===-0x1)break;_0x3b6472=_0x3b6472[_0x2d1745(0x168)](0x0,_0x5e5361);if(_0x23e4e4[_0x3b6472]){_0x44c342=_0x23e4e4[_0x3b6472];break;}}}_0x29b561[_0x2d1745(0x325)]({'id':_0x15cd40,'name':_0x2bae1c,'location':_0x44c342,'type':_0x5bd8a4,'logDuplicates':_0x5bd8a4===_0x2d1745(0x2be),'isExit':![],'_score':_0x44c342?0x50:_0x5bd8a4===_0x2d1745(0x34f)?0x5a:0x28});}}return _0x29b561[_0x2d1745(0x25d)]((_0x32c953,_0x2032c5)=>_0x2032c5[_0x2d1745(0x303)]-_0x32c953[_0x2d1745(0x303)]),_0x29b561;}function a0_0x1514(_0x462263,_0xa9edd5){const _0x40732a=a0_0x2b36();return a0_0x1514=function(_0x991395,_0x2d1f2e){_0x991395=_0x991395-0x159;let _0x2b3651=_0x40732a[_0x991395];return _0x2b3651;},a0_0x1514(_0x462263,_0xa9edd5);}async function executeAutomationAction(_0x229f02){const _0xbf495b=a0_0x1cddbe;try{const _0x306b92=await _0x229f02['getStateAsync'](_0xbf495b(0x288)),_0x4d3b21=await _0x229f02['getStateAsync']('analysis.automation.targetValue');if(_0x306b92&&_0x306b92[_0xbf495b(0x2a1)]&&_0x4d3b21){const _0x300739=_0x306b92['val'];let _0x289f60=_0x4d3b21[_0xbf495b(0x2a1)];try{_0x289f60=JSON[_0xbf495b(0x1ad)](_0x289f60);}catch(_0x1588a8){}_0x229f02[_0xbf495b(0x25a)][_0xbf495b(0x23c)](_0xbf495b(0x28f)+_0x300739+_0xbf495b(0x2db)+_0x289f60),await _0x229f02[_0xbf495b(0x355)](_0x300739,_0x289f60);}else _0x229f02[_0xbf495b(0x25a)][_0xbf495b(0x16d)](_0xbf495b(0x1da));}catch(_0x362d21){_0x229f02[_0xbf495b(0x25a)][_0xbf495b(0x180)](_0xbf495b(0x1fb)+_0x362d21[_0xbf495b(0x29e)]);}}function a0_0x2b36(){const _0x509791=['analysis.energy.insulationScore','üìû\x20User\x20requested\x20CALL\x20via\x20Telegram!','event','Target\x20ID','dependencyInstallInProgress','\x20*\x20*\x20*','...','scheduleJob','Description','onReady','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','getForeignObjectsAsync','Feedback\x20Log','\x20events','feedbackHistory','rssi','setHours','.communicate.request','18thudiS','Error\x20in\x20onMessage\x20command\x20','testApiKey','WETTER:\x20Keine\x20Daten\x20gefunden','Last\x20Anomaly\x20Score','notifyEmailInstance','\x20(Value\x20is\x20falsy:\x20','round','position','actual_temperature','getCalendarNames\x20Error:\x20','boolean','getOverviewData','Missing\x20data','heizung','No\x20module\x20named\x20pip','currentposition','node-schedule','AI\x20Alert\x20Status','bewegung','stick_unreach','onMessage','system.','[PYTHON]\x20Failed\x20to\x20start:\x20','daswetter.0','BUTLER\x20Execution\x20Error:\x20','getForeignObjectAsync','uuid-not-found','apply','analysisInterval','Trend\x20Diagnosis\x20(Python)','Gemini\x20Analysis\x20Error:\x20','4026075rnOQrG','Drift\x20Analysis','LTM','\x20(Length:\x20','time','indicator.health','events.history','dimmer','maintenance','isPresent','includes','Last\x20Check\x20Time','AI\x20Training\x20Control','light','.\x20DATEN:\x20Schlaf\x20','generic','üõ†Ô∏è\x20AUTO-FIX:\x20Installing\x20Python\x20dependencies\x20from\x20','Verbindung\x20erfolgreich!\x20Antwort:\x20','LTM.driftAnalysis.driftDetails','devices','SECURITY_RESULT','close','constructor','loc','rawEventLog','analysis.health.trendValue','KALENDER:\x20Keine\x20Kalender\x20ausgew√§hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)','getGenerativeModel','shift','.forecast.current.temperature','daswetter','_calName','icons-mfd.','unknown','presenceDevices','Training\x20Error:\x20','Started\x20at\x20','onUnload','Action','notifyPushoverRecipient','Who\x20is\x20present?','Wetter:\x20Deaktiviert','currentSystemMode','analysis.health.notes','analysis.automation.suggestedAction','Recorded\x20Motion\x20Sequences','python_service','testNotification','Deaktiviert\x20(Pro-Feature)','from','[RECORDER]\x20Sequence\x20finished\x20(Steps:\x20','analysis.training.triggerSecurity','setStateAsync','Cogni-Living','unshift','üêç\x20Python\x20Pong\x20received!','System\x20Status\x20&\x20Control','thermostat','info','system.mode','health','debug','outdoorSensorId','AI\x20Emergency\x20Status','Vom\x20Benutzer\x20best√§tigt\x20(OK).','Pattern\x20Detected','main','NORMAL','firmware','Activity-Level','Correlation\x20between\x20Inside\x20Temp,\x20Outside\x20Temp\x20and\x20Time','startsWith','level','genAI','automationProposal','08:00','payload','vacation','0\x203\x20*\x20*\x20*','Could\x20not\x20kill\x20Python\x20process:\x20','python3','ltmLtbWindowDays','inactivityThresholdHours','isAlert','trim','Sleep\x20Score\x20(0-100)','scriptProblem','‚ùå\x20Health\x20Training\x20Failed:\x20','log','geminiModel','map','sort','analysis.health.trendDiagnosis','accuweather','uuid','lastCheck','analysis.trigger','weather','endsWith','getTime','direction','weatherunderground.0','weatherunderground','events.history_debug_00','analysis.lastResult','command','analysis.training','737TEBKVg','Health\x20Notes','Comfort\x20Summary','Failed\x20to\x20send\x20to\x20Python:\x20','Subscribing\x20to\x20','Drift\x20Details','Drift\x20Sched\x20Error:\x20','exitGraceTimer','Automation\x20Proposals','‚ö†Ô∏è\x20ALARM:\x20','1267570hFzDds','common','Health\x20Anomaly\x20Detected','ltmDriftCheckIntervalHours','Trend\x20Value\x20(%)','object','dismissAutomation','Raw\x20Log','humidity','COGNI_REQUEST_CALL','Restoring\x20sensor\x20cache\x20from\x20history\x20(','TRAIN_ENERGY','klima','Urlaub','subscribeStates','getLtmData','application/json','analysis.automation.targetId','.\x20ANWESENDE_GERAETE:\x20','energy','LTM.driftAnalysis','.\x20NOTFALL-KONTEXT:\x20','channel','‚úÖ\x20PIP\x20bootstrapped.\x20Retrying\x20installation...','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','python3\x20-m\x20pip\x20install\x20-r\x20\x22','search','briefingEnabled','unreach','Fokus\x20auf\x20Komfort.','ROLLE:\x20KI-Hausverwalter\x20&\x20Gesundheits-Assistent.\x20PERSONA:\x20','calendarInstance','isArray','analysis.history_debug_00','some','toISOString','‚ùå\x20Installation\x20failed:\x20','response','analysis.automation.description','message','splice','activityLevel','val','sendToAsync','\x20events)...','autoApply','ANOMALY','targetId','[RESULT]','location','timestamp','scriptEnabled','occupancy','indicator.alarm','enum','üß†\x20Triggering\x20Security\x20Training...','number','Lernphase\x20(','ANALYZE_TREND','Health\x20&\x20Sleep\x20Analysis','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','role','geminiApiKey','systemUUID','lastAlertState','Comfort\x20Suggestion','indicator.alarm.fire','filter','json','Logbook','Unknown','motion','.forecast.current.temp','forEach','driftAnalysisTimer','LTM.trainingData.thermodynamics','Trigger\x20Briefing\x20(Test)','stateChange','exitTimer','üì°\x20Hooking\x20into\x20','system.isPresent','analysis.automation.triggerAction','switch','delObjectAsync',').\x20Saving\x20to\x20Training\x20Data.','schalter','name','setState','automation.triggerAction','details','ack','eventHistory','uuid-error','working','analysis.security','Trigger\x20Digest','models/gemini-flash-latest','getDate','872417jQYdWT','writable','\x20=\x20','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','sensor','[TEST]\x20','PONG','‚úÖ\x20SUCCESS.\x20Dependencies\x20installed.','Train\x20Energy\x20Model\x20(Regression)','alertReason','Unbekannt','Deviation','[RECORDER]\x20Error\x20saving\x20sequence:\x20','targetValue','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','onStateChange','analysis.security.lastScore','analysis.analysisHistory','analysis.health.restlessness','[LOG]','[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20','stdin','toFixed','stringify','analysis.training.triggerEnergy','callback','summary','‚ùå\x20Energy\x20Training\x20Failed:\x20','getForeignStateAsync','exports','‚úÖ\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.','expire','data','\x22\x20--break-system-packages\x20--user','.\x20INPUT\x20DATEN\x20(Letzte\x20Events):\x20','analysis.comfortSummary','KALENDER:\x20','analysis.feedbackHistory','state','30cuABvd','Feedback\x20saved:\x20','licenseKey','_score','indexOf','getCalendarNames','scanDevices','analysis.isAlert','guest','1120892NatHNU','Aktiv\x20(','sensorLastValues','analysis.automation.autoApply','update','isEmergency','N/A\x20(Learning)','Last\x20raw\x20event','button','LTM.trainingData.sequences','\x20(Threshold:\x20','isGracePeriodActive','value','analysisHistory','.\x20OUTPUT:\x20Nur\x20Text.','send','brightness','dailyDigests','.\x20KONTEXT:\x20','\x20hours.\x20Potential\x20incapacitation.','shutter','[RECORDER\x20DEBUG]\x20Accepting\x20Event\x20','notifyTelegramEnabled','Guardian:\x20Sending\x20','text','Keine\x20Details.','setpoint','analysis.health.sleepScore','push','communicate.request','30JDlMsm','SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20','ü©∫\x20Triggering\x20Health\x20Training...','Daily\x20Digests','aiPersona','analysis.activitySummary','KALENDER:\x20Keine\x20Daten','length','Live\x20Security\x20Monitor','reachable','/100,\x20Aktivit√§t\x20seit\x2004:00:\x20','@iobroker/adapter-core','No\x20instance','weatherInstance','LTM.dailyDigests','\x20Tage)','üêç\x20Guardian\x20Diagnosis\x20(','t√ºr','Gemini\x20AI\x20initialized.','value.health','(((.+)+)+)+$','normal','üåÖ\x20Daily\x20Briefing:\x0a','Normal','briefingTime','off','Baseline\x20Status','apiKey','setObjectNotExistsAsync','12628260zfcepY','sleepScore','PARTY','.NextHours.Location_1.Day_1.current.temp_value','modeResetJob','getStateAsync','getHours','Thermodynamic\x20Data\x20Points','licht','Alarm','Sec-Training\x20started...','custom','Restlessness\x20Level','briefingJob','status','ROLLE:\x20F√ºrsorglicher\x20Assistent.\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','setForeignStateAsync','‚úÖ\x20Alles\x20OK\x20(Reset)]','Kein\x20API\x20Key!','132623vcAPKV','getEnums','\x20AUFGABE:\x201.\x20Analysiere\x20auf\x20Gesundheitsrisiken.\x202.\x20Analysiere\x20auf\x20Komfort.\x20FORMAT\x20(JSON\x20Only):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','members','Adapter','lastIndexOf','replace','.data.table','Trigger\x20Analysis','minDaysForBaseline','ltmStbWindowDays','üçÉ\x20Triggering\x20Energy\x20Training...','cogni-living','namespace','ü©∫\x20HEALTH\x20WARNING:\x20','extendObjectAsync','getMonth','bind','enum.rooms.*','analysis.triggerBriefing','date','.NextHours.Location_1.Day_1.current.symbol_desc','Say\x20Hello','now','analysis.automation.patternDetected','fenster','testContext','üìû\x20R√ºckruf\x20anfordern','sendTo','getObjectAsync','.\x20WETTER:\x20','write','system.presenceWho','LTM.rawEventLog','üìû\x20R√úCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20R√ºckruf-Button\x20gedr√ºckt.','analysis.security.lastCheck','Error\x20reading\x20calendar\x20table:\x20','TRAINING_COMPLETE','0\x204\x20*\x20*\x20*','HEALTH_RESULT','enum.functions.*','notifyTelegramRecipient','analysis.comfortSuggestion','pr√§senz','echarts.','vis.','events.lastEvent','instance','Array\x20of\x20completed\x20movement\x20paths\x20for\x20ML\x20training','info.','join','accuweather.0','.Summary.Current','analysis.deviationFromBaseline','latitude','path','Reset\x20Sched\x20Error:\x20','Keine\x20Analyse.','Alert\x20Reason','system.config','analysis.health.isAnomaly','targetposition','LTM\x20Sched\x20Error:\x20','python3\x20-m\x20ensurepip\x20--default-pip\x20--user','Train\x20Health\x20Model\x20(IsoForest)','version','analysis.automation','notifyEmailEnabled','Target\x20Value','üêç\x20Stopping\x20Python\x20Sidecar...','native','VACATION','notifyPushoverInstance','toLocaleTimeString','analysis.training.status','‚úÖ\x20Alarm\x20quittiert.\x20System\x20normal.','LTM.driftAnalysis.lastCheck','System\x20Mode','substring','lock','service.py','Error\x20launching\x20Python\x20service:\x20','cogni-living\x20adapter\x20starting\x20(v','warn','\x20presence\x20devices...','Briefing\x20Error:\x20','Gemini\x20Init\x20Error:\x20','useCalendar','string','Analysiere\x20ausgewogen.','.\x20ANWESENHEITS_STATUS:\x20','Last\x20Check','ltmJob','openweathermap','analysisTimer','@google/generative-ai','toLocaleString','temp','openweathermap.0','telegram','baselineDrift','COGNI_CONFIRM_OK','error','temperature','10915576nyvZLs','ical.0','\x20sensors...','window','system.meta.uuid','[PYTHON]\x20','fault','pythonProcess','kontakt','getFullYear','analysis.alertReason','Health\x20Train\x20Error:\x20','values','Training\x20Status','Ungew√∂hnliches\x20Bewegungsmuster\x20erkannt!\x20(Score:\x20','TREND_RESULT','\x20days\x20of\x20activity\x20data\x20to\x20Python...','Keiner','Auto\x20Apply\x20Rule','ANALYZE_HEALTH','Party','Success:\x20','driftDetails','blind','toLowerCase','Energy\x20Intelligence','No\x20module\x20named','ABWESEND','N/A','city','[PYTHON\x20ERR]\x20','useWeather','pop','analysis.automation.targetValue','split','\x22\x20--break-system-packages','ü©∫\x20Triggering\x20Health\x20Analysis\x20on\x20new\x20Digest...','analysis.isEmergency','User\x20dismissed\x20automation\x20proposal.','isProVersion','longitude','stderr','presence','parse','triggerBriefing','Anwesend','notifyTelegramInstance','set_temperature','description','system','cancel','Fokus\x20auf\x20Familienroutinen.','lowbat','config','PRO-','type','Scheduling\x20Morning\x20Briefing\x20for\x20','HEALTH_TRAIN_RESULT','analysis.training.triggerHealth','simulateButler','analysis.health.lastCheck','GUEST','):\x20','Briefing\x20Sched\x20Error:\x20','dutycycle','doors','slice','door','subscribeForeignStatesAsync','toString','Health\x20Last\x20Check','[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20','admin.','‚úÖ\x20AUTO-FIX\x20SUCCESS.','systemConfig','lampe','generateContent','simple-api.'];a0_0x2b36=function(){return _0x509791;};return a0_0x2b36();}function tryParse(_0x38aeac){const _0x3f52db=a0_0x1cddbe;try{return JSON[_0x3f52db(0x1ad)](_0x38aeac);}catch(_0xc782a7){return null;}}async function recordSequence(_0x44ca73,_0x230bbc){const _0x7a9842=a0_0x1cddbe,_0x17002d=(_0x230bbc[_0x7a9842(0x1b9)]||'')[_0x7a9842(0x19a)](),_0x32ab50=[_0x7a9842(0x2be),_0x7a9842(0x1f5),_0x7a9842(0x383),_0x7a9842(0x1ac),_0x7a9842(0x2ab),_0x7a9842(0x1c5),'t√ºr',_0x7a9842(0x185),'fenster','contact',_0x7a9842(0x18a),_0x7a9842(0x20f),_0x7a9842(0x34c),_0x7a9842(0x2c9),'schalter',_0x7a9842(0x209),_0x7a9842(0x1cd)];if(!_0x32ab50[_0x7a9842(0x299)](_0x460dae=>_0x17002d[_0x7a9842(0x20c)](_0x460dae))){_0x44ca73[_0x7a9842(0x25a)]['debug']('[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20'+_0x230bbc['id']+'\x20(Type\x20\x27'+_0x230bbc[_0x7a9842(0x1b9)]+'\x27\x20not\x20in\x20allowed\x20list)');return;}if(!_0x230bbc[_0x7a9842(0x315)]){_0x44ca73[_0x7a9842(0x25a)][_0x7a9842(0x23f)](_0x7a9842(0x2ed)+_0x230bbc['id']+_0x7a9842(0x1e8)+_0x230bbc[_0x7a9842(0x315)]+')');return;}_0x44ca73[_0x7a9842(0x25a)]['debug'](_0x7a9842(0x31e)+_0x230bbc['id']+'\x20('+_0x230bbc[_0x7a9842(0x2a8)]+')');if(sequenceTimer)clearTimeout(sequenceTimer);const _0x246f01={'loc':_0x230bbc[_0x7a9842(0x2a8)]||_0x7a9842(0x2bd),'id':_0x230bbc['id'],'ts':Date[_0x7a9842(0x36f)]()};activeSequence[_0x7a9842(0x325)](_0x246f01),_0x44ca73['log'][_0x7a9842(0x23f)](_0x7a9842(0x1c9)+_0x246f01[_0x7a9842(0x219)]+_0x7a9842(0x205)+activeSequence[_0x7a9842(0x32e)]+')'),sequenceTimer=setTimeout(async()=>{const _0x12755f=_0x7a9842;activeSequence[_0x12755f(0x32e)]>0x1?await saveCompletedSequence(_0x44ca73):(_0x44ca73[_0x12755f(0x25a)][_0x12755f(0x23f)]('[RECORDER]\x20Discarding\x20short\x20sequence\x20(Length:\x20'+activeSequence[_0x12755f(0x32e)]+')'),activeSequence=[]);},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x4ed37e){const _0x2c6968=a0_0x1cddbe;try{_0x4ed37e[_0x2c6968(0x25a)][_0x2c6968(0x23c)](_0x2c6968(0x234)+activeSequence[_0x2c6968(0x32e)]+_0x2c6968(0x2cb));const _0x1ea08e=await _0x4ed37e[_0x2c6968(0x349)](_0x2c6968(0x312));let _0x441826=[];if(_0x1ea08e&&_0x1ea08e['val'])try{_0x441826=JSON[_0x2c6968(0x1ad)](_0x1ea08e[_0x2c6968(0x2a1)]);}catch(_0x4b497f){}const _0x217ec2=activeSequence[0x0]['ts'],_0x52ed2c=activeSequence[_0x2c6968(0x25c)](_0x48ea0a=>({'loc':_0x48ea0a[_0x2c6968(0x219)],'t_delta':Math[_0x2c6968(0x1e9)]((_0x48ea0a['ts']-_0x217ec2)/0x3e8)})),_0x16feae={'timestamp':new Date(_0x217ec2)['toISOString'](),'steps':_0x52ed2c,'duration':Math[_0x2c6968(0x1e9)]((activeSequence[activeSequence[_0x2c6968(0x32e)]-0x1]['ts']-_0x217ec2)/0x3e8),'daytime':new Date(_0x217ec2)['getHours']()};_0x441826[_0x2c6968(0x325)](_0x16feae),_0x441826['length']>MAX_TRAINING_SET_SIZE&&_0x441826[_0x2c6968(0x21e)](),await _0x4ed37e['setStateAsync'](_0x2c6968(0x312),{'val':JSON[_0x2c6968(0x2f0)](_0x441826),'ack':!![]}),runSecurityCheck(_0x4ed37e,_0x16feae),activeSequence=[],sequenceTimer=null;}catch(_0x17ecb8){_0x4ed37e[_0x2c6968(0x25a)][_0x2c6968(0x180)](_0x2c6968(0x2e5)+_0x17ecb8[_0x2c6968(0x29e)]);}}function runSecurityCheck(_0x2b76e2,_0x3d6158){const _0x2b9732=a0_0x1cddbe;if(!_0x2b76e2[_0x2b9732(0x1a9)])return;_0x2b76e2[_0x2b9732(0x25a)][_0x2b9732(0x23f)]('üõ°Ô∏è\x20SECURITY:\x20Sending\x20sequence\x20to\x20Guard\x20for\x20analysis...'),sendToPython(_0x2b76e2,'ANALYZE_SEQUENCE',{'sequence':_0x3d6158});}async function getOutsideTemperatureNumeric(_0x1fc2be){const _0x150462=a0_0x1cddbe;if(_0x1fc2be[_0x150462(0x1b7)]['outdoorSensorId'])try{const _0x28c7ea=await _0x1fc2be['getForeignStateAsync'](_0x1fc2be[_0x150462(0x1b7)][_0x150462(0x240)]);if(_0x28c7ea&&_0x28c7ea['val']!==undefined&&_0x28c7ea[_0x150462(0x2a1)]!==null){const _0x4cd4fa=parseFloat(_0x28c7ea[_0x150462(0x2a1)]);if(!isNaN(_0x4cd4fa))return _0x4cd4fa;}}catch(_0x17cf2b){}const _0x2ae355=_0x1fc2be[_0x150462(0x1b7)][_0x150462(0x334)];if(!_0x1fc2be[_0x150462(0x1b7)][_0x150462(0x1a1)]||!_0x2ae355)return null;try{let _0x23281f='';if(_0x2ae355[_0x150462(0x20c)](_0x150462(0x25f)))_0x23281f=_0x2ae355+'.Current.Temperature';else{if(_0x2ae355[_0x150462(0x20c)](_0x150462(0x220)))_0x23281f=_0x2ae355+_0x150462(0x347);else{if(_0x2ae355[_0x150462(0x20c)](_0x150462(0x177)))_0x23281f=_0x2ae355+_0x150462(0x21f);else{if(_0x2ae355['includes'](_0x150462(0x268)))_0x23281f=_0x2ae355+_0x150462(0x2bf);}}}if(_0x23281f){const _0x2b3cd3=await _0x1fc2be['getForeignStateAsync'](_0x23281f);if(_0x2b3cd3&&_0x2b3cd3[_0x150462(0x2a1)]!==undefined&&_0x2b3cd3['val']!==null)return parseFloat(_0x2b3cd3[_0x150462(0x2a1)]);}}catch(_0x18558f){}return null;}async function recordThermodynamics(_0x203f63,_0x590c5d,_0x580358,_0xc01c94){const _0x44a5f1=a0_0x1cddbe,_0x3b3290=await getOutsideTemperatureNumeric(_0x203f63),_0x4772ba=await _0x203f63[_0x44a5f1(0x349)](_0x44a5f1(0x2c2));let _0x2bb0d3=[];if(_0x4772ba&&_0x4772ba[_0x44a5f1(0x2a1)])try{_0x2bb0d3=JSON[_0x44a5f1(0x1ad)](_0x4772ba['val']);}catch(_0x301db8){}_0x2bb0d3[_0x44a5f1(0x325)]({'ts':Date[_0x44a5f1(0x36f)](),'room':_0xc01c94||'Unknown','t_in':_0x580358,'t_out':_0x3b3290});if(_0x2bb0d3[_0x44a5f1(0x32e)]>THERMO_LOG_SIZE)_0x2bb0d3[_0x44a5f1(0x21e)]();await _0x203f63[_0x44a5f1(0x236)](_0x44a5f1(0x2c2),{'val':JSON['stringify'](_0x2bb0d3),'ack':!![]});}async function processSensorEvent(_0x3ee76b,_0xc920d2,_0x473d2f,_0x1ef9af){const _0x549188=a0_0x1cddbe;if(!_0x1ef9af)return;const _0x5789e8=_0x473d2f[_0x549188(0x2a1)],_0x366705=Date[_0x549188(0x36f)](),_0xabc0ca=_0x3ee76b['sensorLastValues'][_0xc920d2];_0x3ee76b[_0x549188(0x30b)][_0xc920d2]=_0x5789e8;if(!_0x1ef9af['logDuplicates']&&_0xabc0ca!=undefined&&_0xabc0ca==_0x5789e8)return;const _0x3ed841=(_0x1ef9af[_0x549188(0x1b9)]||'')[_0x549188(0x19a)](),_0x219be9=_0x3ed841[_0x549188(0x20c)](_0x549188(0x181))||_0x3ed841[_0x549188(0x20c)]('temperatur')||_0x3ed841[_0x549188(0x20c)](_0x549188(0x283))||_0x3ed841['includes'](_0x549188(0x1f0));_0x3ee76b[_0x549188(0x1a9)]&&_0x219be9&&recordThermodynamics(_0x3ee76b,_0xc920d2,_0x5789e8,_0x1ef9af[_0x549188(0x2a8)]);const _0x104a74={'timestamp':_0x366705,'id':_0xc920d2,'name':_0x1ef9af[_0x549188(0x2cd)],'type':_0x1ef9af[_0x549188(0x1b9)],'location':_0x1ef9af[_0x549188(0x2a8)],'value':_0x5789e8};_0x3ee76b[_0x549188(0x2d2)][_0x549188(0x238)](_0x104a74);if(_0x3ee76b[_0x549188(0x2d2)][_0x549188(0x32e)]>HISTORY_MAX_SIZE)_0x3ee76b[_0x549188(0x2d2)][_0x549188(0x1a2)]();await _0x3ee76b[_0x549188(0x236)](_0x549188(0x386),{'val':JSON['stringify'](_0x104a74),'ack':!![]}),await _0x3ee76b['setStateAsync'](_0x549188(0x208),{'val':JSON['stringify'](_0x3ee76b[_0x549188(0x2d2)]),'ack':!![]});_0x3ee76b[_0x549188(0x1a9)]&&(_0x3ee76b[_0x549188(0x21a)]['push'](_0x104a74),await saveRawEventLog(_0x3ee76b),recordSequence(_0x3ee76b,_0x104a74));if(_0x1ef9af['isExit']&&_0x5789e8===!![]){if(_0x3ee76b['isPresent']&&!_0x3ee76b['isGracePeriodActive'])startExitTimer(_0x3ee76b);else{if(!_0x3ee76b['isPresent'])setPresence(_0x3ee76b,!![]);}}else{if(_0x1ef9af['type']===_0x549188(0x2be)&&_0x5789e8===!![]){if(_0x3ee76b[_0x549188(0x2c5)])abortExitTimer(_0x3ee76b);if(!_0x3ee76b[_0x549188(0x20b)]&&_0x3ee76b[_0x549188(0x22c)]===SYSTEM_MODES[_0x549188(0x245)])setPresence(_0x3ee76b,!![]);}}}async function runGeminiAnalysis(_0x5d1eb6,_0x3e0808=''){const _0x324e5d=a0_0x1cddbe;if(!_0x5d1eb6['geminiModel'])return;if(_0x5d1eb6[_0x324e5d(0x2d2)]['length']===0x0)return;const _0x492c41=_0x5d1eb6[_0x324e5d(0x2d2)][_0x324e5d(0x1c4)](0x0,0xf),_0x4fc030=await getWeatherContext(_0x5d1eb6),_0x5d9c35=_0x5d1eb6['currentSystemMode'],_0x430094=PERSONA_MAPPING[_0x5d1eb6[_0x324e5d(0x1b7)]['aiPersona']||_0x324e5d(0x211)],_0x1734e2=_0x5d1eb6[_0x324e5d(0x1b7)]['livingContext']||_0x324e5d(0x322);let _0x87aaf6=_0x324e5d(0x2e3);try{const _0x21aa7f=await _0x5d1eb6[_0x324e5d(0x349)](_0x324e5d(0x378));if(_0x21aa7f&&_0x21aa7f[_0x324e5d(0x2a1)])_0x87aaf6=_0x21aa7f[_0x324e5d(0x2a1)];}catch(_0x5bc789){}let _0x19781c=![];try{const _0x1e3e99=await _0x5d1eb6[_0x324e5d(0x349)](_0x324e5d(0x30c));if(_0x1e3e99&&_0x1e3e99['val'])_0x19781c=!![];}catch(_0x3150ea){}const _0x34b8ef=_0x324e5d(0x295)+_0x430094+_0x324e5d(0x31b)+_0x1734e2+'.\x20SYSTEM_MODE:\x20'+_0x5d9c35+_0x324e5d(0x376)+_0x4fc030+_0x324e5d(0x28c)+(_0x3e0808||_0x324e5d(0x193))+_0x324e5d(0x174)+(_0x5d1eb6[_0x324e5d(0x20b)]?_0x324e5d(0x1af):_0x324e5d(0x19d))+_0x324e5d(0x289)+_0x87aaf6+_0x324e5d(0x2fb)+JSON[_0x324e5d(0x2f0)](_0x492c41)+_0x324e5d(0x35a);try{const _0x39effb=await _0x5d1eb6['geminiModel'][_0x324e5d(0x1ce)](_0x34b8ef),_0x14a4a5=_0x39effb[_0x324e5d(0x29c)]['text']()[_0x324e5d(0x35e)](/```json|```/g,'')[_0x324e5d(0x256)](),_0x3cfef8=JSON['parse'](_0x14a4a5);await _0x5d1eb6['setStateAsync'](_0x324e5d(0x26a),{'val':JSON[_0x324e5d(0x2f0)](_0x3cfef8),'ack':!![]});if(_0x3cfef8[_0x324e5d(0x2f3)])await _0x5d1eb6['setStateAsync']('analysis.activitySummary',{'val':_0x3cfef8[_0x324e5d(0x2f3)],'ack':!![]});const _0x32dcfc={'timestamp':Date['now'](),'id':Date[_0x324e5d(0x36f)]()[_0x324e5d(0x1c7)](),'analysis':{'activity':{'summary':_0x3cfef8['summary']||_0x324e5d(0x391),'isAlert':_0x3cfef8['isAlert']||![],'alertReason':_0x3cfef8['alertReason']},'comfort':{'automationProposal':_0x3cfef8[_0x324e5d(0x24c)]}}};await updateAnalysisHistory(_0x5d1eb6,_0x32dcfc);const _0x146d6d=_0x3cfef8[_0x324e5d(0x255)]||![];_0x146d6d!==_0x5d1eb6[_0x324e5d(0x2b7)]&&(await _0x5d1eb6[_0x324e5d(0x236)]('analysis.isAlert',{'val':_0x146d6d,'ack':!![]}),_0x5d1eb6['lastAlertState']=_0x146d6d,_0x146d6d&&(await _0x5d1eb6['setStateAsync'](_0x324e5d(0x18c),{'val':_0x3cfef8[_0x324e5d(0x2e2)],'ack':!![]}),sendNotification(_0x5d1eb6,_0x324e5d(0x276)+_0x3cfef8[_0x324e5d(0x2e2)],![],_0x3cfef8[_0x324e5d(0x30e)]))),_0x3cfef8[_0x324e5d(0x24c)]&&_0x3cfef8['automationProposal']['detected']&&_0x3cfef8[_0x324e5d(0x24c)][_0x324e5d(0x2a6)]&&(await _0x5d1eb6[_0x324e5d(0x236)](_0x324e5d(0x370),{'val':!![],'ack':!![]}),await _0x5d1eb6['setStateAsync']('analysis.automation.description',{'val':_0x3cfef8[_0x324e5d(0x24c)][_0x324e5d(0x1b2)],'ack':!![]}),await _0x5d1eb6[_0x324e5d(0x236)]('analysis.automation.targetId',{'val':_0x3cfef8[_0x324e5d(0x24c)][_0x324e5d(0x2a6)],'ack':!![]}),await _0x5d1eb6['setStateAsync'](_0x324e5d(0x1a3),{'val':JSON[_0x324e5d(0x2f0)](_0x3cfef8['automationProposal']['targetValue']),'ack':!![]}),_0x19781c&&await executeAutomationAction(_0x5d1eb6));}catch(_0x5dd08e){_0x5d1eb6[_0x324e5d(0x25a)][_0x324e5d(0x180)](_0x324e5d(0x201)+_0x5dd08e['message']);}}function installPythonDependencies(_0x220450){const _0x25a618=a0_0x1cddbe;if(_0x220450['dependencyInstallInProgress'])return;_0x220450[_0x25a618(0x1d4)]=!![];const _0x575ded=path[_0x25a618(0x38a)](__dirname,_0x25a618(0x230),'requirements.txt');_0x220450[_0x25a618(0x25a)][_0x25a618(0x23c)](_0x25a618(0x212)+_0x575ded+'...'),stopPythonService(_0x220450);const _0x407ab7=_0x25a618(0x290)+_0x575ded+_0x25a618(0x1a5);exec(_0x407ab7,(_0x32fc6f,_0x1df741,_0x406290)=>{const _0x5be19a=_0x25a618,_0x431477=_0x406290&&_0x406290[_0x5be19a(0x20c)](_0x5be19a(0x1f1))||_0x32fc6f&&_0x32fc6f[_0x5be19a(0x29e)]['includes'](_0x5be19a(0x1f1));if(_0x431477){_0x220450[_0x5be19a(0x25a)][_0x5be19a(0x16d)]('‚ö†Ô∏è\x20PIP\x20is\x20missing.\x20Attempting\x20self-healing...'),exec(_0x5be19a(0x159),(_0x309201,_0x127dde,_0x52f5f1)=>{const _0x46e758=_0x5be19a;_0x309201?(_0x220450[_0x46e758(0x25a)]['error']('‚ùå\x20CRITICAL:\x20Self-healing\x20failed.'),_0x220450['dependencyInstallInProgress']=![]):(_0x220450[_0x46e758(0x25a)]['info'](_0x46e758(0x28e)),exec(_0x46e758(0x290)+_0x575ded+_0x46e758(0x2fa),(_0x4f5331,_0x431c9f,_0x41b879)=>{const _0x466cf4=_0x46e758;_0x4f5331?_0x220450[_0x466cf4(0x25a)][_0x466cf4(0x180)](_0x466cf4(0x29b)+_0x4f5331[_0x466cf4(0x29e)]):(_0x220450[_0x466cf4(0x25a)]['info'](_0x466cf4(0x2e0)),startPythonService(_0x220450)),_0x220450[_0x466cf4(0x1d4)]=![];}));});return;}_0x220450[_0x5be19a(0x1d4)]=![],_0x32fc6f?_0x220450[_0x5be19a(0x25a)][_0x5be19a(0x180)]('‚ùå\x20AUTO-FIX\x20FAILED:\x20'+(_0x406290||_0x32fc6f[_0x5be19a(0x29e)])):(_0x220450[_0x5be19a(0x25a)][_0x5be19a(0x23c)](_0x5be19a(0x1cb)),startPythonService(_0x220450));});}function sendToPython(_0x3d255e,_0x4f7506,_0x2728b2={}){const _0x2e2490=a0_0x1cddbe;if(!_0x3d255e[_0x2e2490(0x189)]||!_0x3d255e['pythonProcess'][_0x2e2490(0x2ee)][_0x2e2490(0x2da)])return;const _0x5d8e12=JSON[_0x2e2490(0x2f0)]({'command':_0x4f7506,..._0x2728b2});try{_0x3d255e[_0x2e2490(0x189)][_0x2e2490(0x2ee)][_0x2e2490(0x377)](_0x5d8e12+'\x0a');}catch(_0x256688){_0x3d255e[_0x2e2490(0x25a)][_0x2e2490(0x180)](_0x2e2490(0x270)+_0x256688['message']);}}function runPythonHealthCheck(_0x559f1c){const _0x4d2798=a0_0x1cddbe;if(!_0x559f1c[_0x4d2798(0x31a)]||_0x559f1c['dailyDigests'][_0x4d2798(0x32e)]<0x2)return;const _0x273760=_0x559f1c[_0x4d2798(0x31a)][_0x4d2798(0x25c)](_0xf856d=>{const _0x382dd1=_0x4d2798,_0x2050b4=(_0xf856d[_0x382dd1(0x2a0)]||'')[_0x382dd1(0x19a)]();return ACTIVITY_LEVEL_MAP[_0x2050b4]||0x32;});_0x559f1c[_0x4d2798(0x25a)][_0x4d2798(0x23c)](_0x4d2798(0x320)+_0x273760[_0x4d2798(0x32e)]+_0x4d2798(0x192)),sendToPython(_0x559f1c,_0x4d2798(0x2b1),{'values':_0x273760,'tag':_0x4d2798(0x247)});}function handlePythonResult(_0x18a51f,_0x25ceb5){const _0xa8079e=a0_0x1cddbe;if(_0x25ceb5['type']===_0xa8079e(0x2df))_0x18a51f[_0xa8079e(0x25a)][_0xa8079e(0x23f)](_0xa8079e(0x239));else{if(_0x25ceb5[_0xa8079e(0x1b9)]===_0xa8079e(0x191)){const {tag:_0x394ea2,diagnosis:_0x53b068,change_percent:_0x53572b}=_0x25ceb5[_0xa8079e(0x24e)];_0x18a51f['log'][_0xa8079e(0x23c)](_0xa8079e(0x337)+_0x394ea2+_0xa8079e(0x1c0)+_0x53b068+'\x20('+_0x53572b+'%)'),_0x18a51f[_0xa8079e(0x236)](_0xa8079e(0x25e),{'val':_0x53b068,'ack':!![]}),_0x18a51f[_0xa8079e(0x236)](_0xa8079e(0x21b),{'val':_0x53572b,'ack':!![]});}else{if(_0x25ceb5['type']===_0xa8079e(0x37d)){const {success:_0x23cf32,details:_0x4de04b}=_0x25ceb5['payload'];_0x23cf32?(_0x18a51f[_0xa8079e(0x25a)]['info']('‚úÖ\x20SECURITY\x20MODEL\x20TRAINED!\x20Details:\x20'+_0x4de04b),_0x18a51f[_0xa8079e(0x236)](_0xa8079e(0x164),{'val':_0xa8079e(0x197)+new Date()[_0xa8079e(0x163)]()+'\x20('+_0x4de04b+')','ack':!![]})):(_0x18a51f['log'][_0xa8079e(0x180)]('‚ùå\x20Training\x20failed:\x20'+(_0x4de04b||'Unknown\x20error')),_0x18a51f[_0xa8079e(0x236)]('analysis.training.status',{'val':'Failed:\x20'+_0x4de04b,'ack':!![]}));}else{if(_0x25ceb5[_0xa8079e(0x1b9)]===_0xa8079e(0x1bb)){const {success:_0x4ca8e3,details:_0x455d92}=_0x25ceb5[_0xa8079e(0x24e)];if(_0x4ca8e3)_0x18a51f[_0xa8079e(0x25a)][_0xa8079e(0x23c)]('‚úÖ\x20HEALTH\x20MODEL\x20TRAINED!\x20'+_0x455d92);else _0x18a51f['log'][_0xa8079e(0x180)](_0xa8079e(0x259)+_0x455d92);}else{if(_0x25ceb5[_0xa8079e(0x1b9)]===_0xa8079e(0x37f)){const {is_anomaly:_0x5e2ae8,details:_0x554bb3}=_0x25ceb5['payload'];_0x18a51f['setStateAsync'](_0xa8079e(0x1be),{'val':new Date()[_0xa8079e(0x29a)](),'ack':!![]}),_0x18a51f[_0xa8079e(0x236)]('analysis.health.isAnomaly',{'val':_0x5e2ae8,'ack':!![]});if(_0x5e2ae8)_0x18a51f['log'][_0xa8079e(0x16d)](_0xa8079e(0x366)+_0x554bb3);}else{if(_0x25ceb5[_0xa8079e(0x1b9)]==='ENERGY_TRAIN_RESULT'){const {success:_0x522338,details:_0x39c7ed}=_0x25ceb5['payload'];_0x522338?(_0x18a51f[_0xa8079e(0x25a)]['info']('‚úÖ\x20ENERGY\x20MODEL\x20TRAINED!\x20'+_0x39c7ed),_0x18a51f[_0xa8079e(0x236)](_0xa8079e(0x1d0),{'val':_0x39c7ed,'ack':!![]})):_0x18a51f['log'][_0xa8079e(0x180)](_0xa8079e(0x2f4)+_0x39c7ed);}else{if(_0x25ceb5[_0xa8079e(0x1b9)]===_0xa8079e(0x216)){const {anomaly_score:_0x2a3ba2,is_anomaly:_0x2e9669,threshold:_0x4f2882}=_0x25ceb5[_0xa8079e(0x24e)];_0x18a51f[_0xa8079e(0x25a)][_0xa8079e(0x23c)](_0xa8079e(0x2e7)+_0x2a3ba2[_0xa8079e(0x2ef)](0x5)+_0xa8079e(0x313)+_0x4f2882+')\x20->\x20'+(_0x2e9669?_0xa8079e(0x2a5):'OK')),_0x18a51f[_0xa8079e(0x236)](_0xa8079e(0x2e9),{'val':_0x2a3ba2,'ack':!![]}),_0x18a51f['setStateAsync'](_0xa8079e(0x37b),{'val':new Date()[_0xa8079e(0x29a)](),'ack':!![]});if(_0x2e9669){const _0x3a44f6=_0xa8079e(0x190)+_0x2a3ba2[_0xa8079e(0x2ef)](0x4)+')';_0x18a51f[_0xa8079e(0x236)](_0xa8079e(0x307),{'val':!![],'ack':!![]}),_0x18a51f[_0xa8079e(0x236)]('analysis.alertReason',{'val':_0x3a44f6,'ack':!![]}),sendNotification(_0x18a51f,'‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20'+_0x3a44f6,![],!![]);}}}}}}}}}function startPythonService(_0xfbf4ad){const _0xb6f062=a0_0x1cddbe;try{const _0x576bc5=path[_0xb6f062(0x38a)](__dirname,_0xb6f062(0x230),_0xb6f062(0x16a));_0xfbf4ad[_0xb6f062(0x25a)][_0xb6f062(0x23c)]('üêç\x20Starting\x20Python\x20Sidecar:\x20'+_0x576bc5),_0xfbf4ad[_0xb6f062(0x189)]=spawn(_0xb6f062(0x252),[_0x576bc5]),_0xfbf4ad[_0xb6f062(0x189)]['stdout']['on'](_0xb6f062(0x2f9),_0x2c362d=>{const _0x6af65b=_0xb6f062,_0x518332=_0x2c362d[_0x6af65b(0x1c7)]()[_0x6af65b(0x1a4)]('\x0a');_0x518332[_0x6af65b(0x2c0)](_0x4a6a85=>{const _0x2f0515=_0x6af65b,_0x57e444=_0x4a6a85[_0x2f0515(0x256)]();if(!_0x57e444)return;if(_0x57e444[_0x2f0515(0x249)](_0x2f0515(0x2ec)))_0xfbf4ad['log']['debug'](_0x2f0515(0x187)+_0x57e444[_0x2f0515(0x168)](0x5)['trim']());else{if(_0x57e444['startsWith'](_0x2f0515(0x2a7)))try{const _0xa4f853=JSON['parse'](_0x57e444[_0x2f0515(0x168)](0x8)[_0x2f0515(0x256)]());handlePythonResult(_0xfbf4ad,_0xa4f853);}catch(_0x4f0b2f){_0xfbf4ad['log'][_0x2f0515(0x16d)]('Invalid\x20JSON\x20from\x20Python:\x20'+_0x57e444);}}(_0x57e444[_0x2f0515(0x20c)](_0x2f0515(0x19c))||_0x57e444[_0x2f0515(0x20c)]('Bibliotheken\x20nicht\x20gefunden'))&&(_0xfbf4ad[_0x2f0515(0x25a)]['warn']('‚ö†Ô∏è\x20Python\x20missing\x20dependencies.\x20Triggering\x20Auto-Install...'),installPythonDependencies(_0xfbf4ad));});}),_0xfbf4ad[_0xb6f062(0x189)][_0xb6f062(0x1ab)]['on'](_0xb6f062(0x2f9),_0x18cc5d=>{const _0x387930=_0xb6f062,_0x5b0941=_0x18cc5d[_0x387930(0x1c7)]()[_0x387930(0x256)]();_0xfbf4ad[_0x387930(0x25a)]['error'](_0x387930(0x1a0)+_0x5b0941);}),_0xfbf4ad['pythonProcess']['on'](_0xb6f062(0x217),_0x40bb49=>{const _0xecc910=_0xb6f062;_0xfbf4ad['log'][_0xecc910(0x23c)]('[PYTHON]\x20Service\x20exited\x20with\x20code\x20'+_0x40bb49),_0xfbf4ad['pythonProcess']=null;}),_0xfbf4ad[_0xb6f062(0x189)]['on'](_0xb6f062(0x180),_0x498f5e=>{const _0x2159c4=_0xb6f062;_0xfbf4ad[_0x2159c4(0x25a)][_0x2159c4(0x16d)](_0x2159c4(0x1f9)+_0x498f5e[_0x2159c4(0x29e)]);});}catch(_0x25d25a){_0xfbf4ad[_0xb6f062(0x25a)][_0xb6f062(0x180)](_0xb6f062(0x16b)+_0x25d25a['message']);}}function stopPythonService(_0x2b05de){const _0x311323=a0_0x1cddbe;if(_0x2b05de[_0x311323(0x189)]){_0x2b05de['log']['info'](_0x311323(0x15f));try{_0x2b05de['pythonProcess']['kill']();}catch(_0x84049a){_0x2b05de[_0x311323(0x25a)]['warn'](_0x311323(0x251)+_0x84049a[_0x311323(0x29e)]);}_0x2b05de[_0x311323(0x189)]=null;}}class CogniLiving extends utils[a0_0x1cddbe(0x35c)]{constructor(_0x33d5f2){const _0x57cccb=a0_0x1cddbe;super({..._0x33d5f2,'name':_0x57cccb(0x364)}),this['eventHistory']=[],this[_0x57cccb(0x316)]=[],this[_0x57cccb(0x1de)]=[],this[_0x57cccb(0x21a)]=[],this[_0x57cccb(0x31a)]=[],this[_0x57cccb(0x30b)]={},this[_0x57cccb(0x1cc)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x57cccb(0x20b)]=!![],this[_0x57cccb(0x2c5)]=null,this['exitGraceTimer']=null,this[_0x57cccb(0x314)]=![],this['genAI']=null,this[_0x57cccb(0x25b)]=null,this[_0x57cccb(0x22c)]=SYSTEM_MODES[_0x57cccb(0x245)],this[_0x57cccb(0x1a9)]=![],this[_0x57cccb(0x2b7)]=![],this[_0x57cccb(0x2b6)]=_0x57cccb(0x223),this[_0x57cccb(0x178)]=null,this[_0x57cccb(0x176)]=null,this[_0x57cccb(0x348)]=null,this['driftAnalysisTimer']=null,this[_0x57cccb(0x351)]=null,this['pythonProcess']=null,this[_0x57cccb(0x1d4)]=![],this['on']('ready',this[_0x57cccb(0x1d9)][_0x57cccb(0x369)](this)),this['on'](_0x57cccb(0x2c4),this[_0x57cccb(0x2e8)][_0x57cccb(0x369)](this)),this['on']('unload',this[_0x57cccb(0x227)][_0x57cccb(0x369)](this)),this['on'](_0x57cccb(0x29e),this[_0x57cccb(0x1f7)][_0x57cccb(0x369)](this));}async[a0_0x1cddbe(0x1d9)](){const _0x412e2b=a0_0x1cddbe;this[_0x412e2b(0x25a)]['info'](_0x412e2b(0x16c)+this[_0x412e2b(0x15b)]+')'),await initZombies(this),this['config']['licenseKey']=this[_0x412e2b(0x1b7)][_0x412e2b(0x302)]||'';try{this[_0x412e2b(0x1a9)]=await checkLicense(this,this[_0x412e2b(0x1b7)][_0x412e2b(0x302)]);}catch(_0x1ee778){}if(!this[_0x412e2b(0x1b7)][_0x412e2b(0x254)]||this['config'][_0x412e2b(0x254)]<0.1)this[_0x412e2b(0x1b7)][_0x412e2b(0x254)]=0xc;await initHistory(this),await initSystemConfig(this);if(this[_0x412e2b(0x1b7)][_0x412e2b(0x2b5)])try{this['genAI']=new GoogleGenerativeAI(this[_0x412e2b(0x1b7)][_0x412e2b(0x2b5)]),this[_0x412e2b(0x25b)]=this[_0x412e2b(0x24b)][_0x412e2b(0x21d)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x412e2b(0x287)}}),this[_0x412e2b(0x25a)][_0x412e2b(0x23c)](_0x412e2b(0x339));}catch(_0x2225e1){this[_0x412e2b(0x25a)]['error'](_0x412e2b(0x170)+_0x2225e1['message']);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this[_0x412e2b(0x285)](_0x412e2b(0x262)),this['subscribeStates'](LTM_DP_TRIGGER_DIGEST),this[_0x412e2b(0x285)](_0x412e2b(0x23d)),this[_0x412e2b(0x285)]('analysis.triggerBriefing'),this['subscribeStates'](_0x412e2b(0x2c8)),this[_0x412e2b(0x285)](_0x412e2b(0x30c)),this[_0x412e2b(0x285)](_0x412e2b(0x235)),this[_0x412e2b(0x285)]('analysis.training.triggerHealth'),this[_0x412e2b(0x285)](_0x412e2b(0x2f1)),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this),setTimeout(()=>checkWifiPresence(this),0x1388);if(this['analysisTimer'])clearInterval(this[_0x412e2b(0x178)]);const _0x489069=this['config'][_0x412e2b(0x1ff)]||0xf;_0x489069>0x0&&(this['analysisTimer']=setInterval(()=>{runAutopilot(this);},_0x489069*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this),startPythonService(this),setTimeout(()=>{const _0x251caf=_0x412e2b;if(this[_0x251caf(0x189)])runPythonHealthCheck(this);},0x1388);}[a0_0x1cddbe(0x227)](_0x132eba){const _0x3a1be4=a0_0x1cddbe;if(this['analysisTimer'])clearInterval(this[_0x3a1be4(0x178)]);if(this[_0x3a1be4(0x2c1)])clearInterval(this[_0x3a1be4(0x2c1)]);if(this[_0x3a1be4(0x176)])this[_0x3a1be4(0x176)][_0x3a1be4(0x1b4)]();if(this[_0x3a1be4(0x348)])this[_0x3a1be4(0x348)][_0x3a1be4(0x1b4)]();if(this[_0x3a1be4(0x351)])this[_0x3a1be4(0x351)]['cancel']();if(this[_0x3a1be4(0x2c5)])clearTimeout(this[_0x3a1be4(0x2c5)]);if(this[_0x3a1be4(0x274)])clearTimeout(this[_0x3a1be4(0x274)]);stopPythonService(this),_0x132eba();}async['onStateChange'](_0x18304d,_0x986e23){const _0x41f659=a0_0x1cddbe;if(!_0x986e23)return;if(_0x18304d[_0x41f659(0x20c)](_0x41f659(0x17d))&&_0x18304d[_0x41f659(0x264)](_0x41f659(0x326))&&_0x986e23[_0x41f659(0x2a1)]){await handleTelegramResponse(this,_0x986e23[_0x41f659(0x2a1)]);return;}if(_0x18304d===this[_0x41f659(0x365)]+'.'+SYSTEM_DP_MODE){if(_0x986e23[_0x41f659(0x2a1)]&&Object[_0x41f659(0x18e)](SYSTEM_MODES)['includes'](_0x986e23[_0x41f659(0x2a1)])){this[_0x41f659(0x22c)]=_0x986e23[_0x41f659(0x2a1)];if(_0x986e23[_0x41f659(0x2a1)]===SYSTEM_MODES[_0x41f659(0x161)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x986e23[_0x41f659(0x2d1)])this[_0x41f659(0x2ce)](_0x18304d,{'val':this[_0x41f659(0x22c)],'ack':!![]});return;}if(!_0x986e23[_0x41f659(0x2d1)]){_0x18304d[_0x41f659(0x20c)](_0x41f659(0x262))&&_0x986e23[_0x41f659(0x2a1)]&&(this['setState'](_0x18304d,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x18304d[_0x41f659(0x20c)]('triggerDailyDigest')&&_0x986e23['val']){this[_0x41f659(0x2ce)](_0x18304d,{'val':![],'ack':!![]});if(this[_0x41f659(0x1a9)])createDailyDigest(this);}_0x18304d[_0x41f659(0x20c)](_0x41f659(0x1ae))&&_0x986e23[_0x41f659(0x2a1)]&&(this['setState'](_0x18304d,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x18304d[_0x41f659(0x20c)](_0x41f659(0x2cf))&&_0x986e23[_0x41f659(0x2a1)]&&(this[_0x41f659(0x2ce)](_0x18304d,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x18304d[_0x41f659(0x20c)]('analysis.training.triggerSecurity')&&_0x986e23['val']){this[_0x41f659(0x2ce)](_0x18304d,{'val':![],'ack':!![]});if(!this[_0x41f659(0x1a9)])return;try{const _0x3bcbf4=await this['getStateAsync'](_0x41f659(0x312));if(_0x3bcbf4&&_0x3bcbf4[_0x41f659(0x2a1)]){const _0x55fc51=JSON[_0x41f659(0x1ad)](_0x3bcbf4[_0x41f659(0x2a1)]);this[_0x41f659(0x25a)][_0x41f659(0x23c)](_0x41f659(0x2ae)),this[_0x41f659(0x236)](_0x41f659(0x164),{'val':_0x41f659(0x34e),'ack':!![]}),sendToPython(this,'TRAIN_SECURITY',{'sequences':_0x55fc51});}}catch(_0x44de1b){this[_0x41f659(0x25a)][_0x41f659(0x180)](_0x41f659(0x225)+_0x44de1b[_0x41f659(0x29e)]);}}if(_0x18304d[_0x41f659(0x20c)](_0x41f659(0x1bc))&&_0x986e23['val']){this[_0x41f659(0x2ce)](_0x18304d,{'val':![],'ack':!![]});if(!this[_0x41f659(0x1a9)])return;try{const _0x4b6415=await this[_0x41f659(0x349)](LTM_DP_DAILY_DIGESTS);if(_0x4b6415&&_0x4b6415[_0x41f659(0x2a1)]){const _0xd15545=JSON[_0x41f659(0x1ad)](_0x4b6415[_0x41f659(0x2a1)]);this['log'][_0x41f659(0x23c)](_0x41f659(0x329)),sendToPython(this,'TRAIN_HEALTH',{'digests':_0xd15545});}}catch(_0x1d58bf){this['log']['error'](_0x41f659(0x18d)+_0x1d58bf[_0x41f659(0x29e)]);}}if(_0x18304d[_0x41f659(0x20c)](_0x41f659(0x2f1))&&_0x986e23['val']){this[_0x41f659(0x2ce)](_0x18304d,{'val':![],'ack':!![]});if(!this['isProVersion'])return;try{const _0x21fecd=await this['getStateAsync'](_0x41f659(0x2c2));if(_0x21fecd&&_0x21fecd[_0x41f659(0x2a1)]){const _0x21aeb5=JSON['parse'](_0x21fecd[_0x41f659(0x2a1)]);this[_0x41f659(0x25a)][_0x41f659(0x23c)](_0x41f659(0x363)),sendToPython(this,_0x41f659(0x282),{'points':_0x21aeb5});}}catch(_0x2ff4f3){this['log']['error']('Energy\x20Train\x20Error:\x20'+_0x2ff4f3[_0x41f659(0x29e)]);}}return;}if(this['config']['presenceDevices']&&this[_0x41f659(0x1b7)][_0x41f659(0x224)][_0x41f659(0x20c)](_0x18304d)){await checkWifiPresence(this);return;}const _0x567793=(this[_0x41f659(0x1b7)]['devices']||[])['find'](_0x1a32ba=>_0x1a32ba['id']===_0x18304d);if(_0x567793)processSensorEvent(this,_0x18304d,_0x986e23,_0x567793);}async[a0_0x1cddbe(0x1f7)](_0x326170){const _0x38aa44=a0_0x1cddbe;if(typeof _0x326170===_0x38aa44(0x27c)&&_0x326170[_0x38aa44(0x29e)])try{if(_0x326170[_0x38aa44(0x26b)]===_0x38aa44(0x1e4)){const _0x771f1e=_0x326170[_0x38aa44(0x29e)][_0x38aa44(0x342)]||this[_0x38aa44(0x1b7)][_0x38aa44(0x2b5)];if(!_0x771f1e)return this[_0x38aa44(0x374)](_0x326170[_0x38aa44(0x233)],_0x326170[_0x38aa44(0x26b)],{'success':![],'message':'Kein\x20API\x20Key\x20eingegeben.'},_0x326170[_0x38aa44(0x2f2)]);try{const _0x43e58f=new GoogleGenerativeAI(_0x771f1e),_0x30eec8=_0x43e58f[_0x38aa44(0x21d)]({'model':GEMINI_MODEL}),_0x3c2495=await _0x30eec8[_0x38aa44(0x1ce)](_0x38aa44(0x36e)),_0x25dcbf=await _0x3c2495[_0x38aa44(0x29c)],_0x29838a=_0x25dcbf[_0x38aa44(0x321)]();this[_0x38aa44(0x374)](_0x326170['from'],_0x326170['command'],{'success':!![],'message':_0x38aa44(0x213)+_0x29838a[_0x38aa44(0x168)](0x0,0x14)+_0x38aa44(0x1d6)},_0x326170['callback']);}catch(_0x4387e1){this[_0x38aa44(0x374)](_0x326170[_0x38aa44(0x233)],_0x326170[_0x38aa44(0x26b)],{'success':![],'message':'Fehler:\x20'+_0x4387e1[_0x38aa44(0x29e)]},_0x326170[_0x38aa44(0x2f2)]);}}else{if(_0x326170[_0x38aa44(0x26b)]===_0x38aa44(0x372)){const _0x1866ca=await getWeatherContext(this),_0x5de477=await getCalendarContext(this);this[_0x38aa44(0x374)](_0x326170['from'],_0x326170[_0x38aa44(0x26b)],{'success':!![],'weather':_0x1866ca,'calendar':_0x5de477},_0x326170[_0x38aa44(0x2f2)]);}else{if(_0x326170[_0x38aa44(0x26b)]===_0x38aa44(0x231)){}else{if(_0x326170[_0x38aa44(0x26b)]===_0x38aa44(0x286)){if(!this[_0x38aa44(0x1a9)])return this[_0x38aa44(0x374)](_0x326170[_0x38aa44(0x233)],_0x326170[_0x38aa44(0x26b)],{'success':![],'isPro':![]},_0x326170[_0x38aa44(0x2f2)]);let _0x59cfcd={'status':_0x38aa44(0x19e),'details':'','lastCheck':0x0};try{_0x59cfcd['status']=(await this[_0x38aa44(0x349)](LTM_DP_DRIFT_STATUS))[_0x38aa44(0x2a1)],_0x59cfcd[_0x38aa44(0x2d0)]=(await this[_0x38aa44(0x349)](LTM_DP_DRIFT_DETAILS))['val'],_0x59cfcd[_0x38aa44(0x261)]=(await this[_0x38aa44(0x349)](LTM_DP_DRIFT_LAST_CHECK))[_0x38aa44(0x2a1)];}catch(_0x4f9eb4){}const _0x5db7ca=this[_0x38aa44(0x316)]||[];this[_0x38aa44(0x374)](_0x326170['from'],_0x326170[_0x38aa44(0x26b)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x59cfcd,'analysisHistory':_0x5db7ca},_0x326170[_0x38aa44(0x2f2)]);}else{if(_0x326170['command']===_0x38aa44(0x1ee)){const _0x5d8bd4=this[_0x38aa44(0x31a)][_0x38aa44(0x32e)],_0xcde1a3=new Date(),_0x1ed226=new Date(_0xcde1a3[_0x38aa44(0x18b)](),_0xcde1a3[_0x38aa44(0x368)](),_0xcde1a3[_0x38aa44(0x2d8)]())[_0x38aa44(0x265)](),_0x221004=this['rawEventLog'][_0x38aa44(0x2ba)](_0x41cb34=>new Date(_0x41cb34[_0x38aa44(0x2a9)])[_0x38aa44(0x265)]()>_0x1ed226)[_0x38aa44(0x32e)],_0x2c60bc=new Array(0x18)['fill'](0x0);this[_0x38aa44(0x21a)][_0x38aa44(0x2c0)](_0x1ff6a2=>{const _0x590ff7=_0x38aa44,_0x2926bf=new Date(_0x1ff6a2['timestamp']);if(_0x2926bf[_0x590ff7(0x265)]()>_0x1ed226)_0x2c60bc[_0x2926bf[_0x590ff7(0x34a)]()]++;});let _0x152737={'status':_0x38aa44(0x19e)};try{_0x152737['status']=(await this[_0x38aa44(0x349)](LTM_DP_DRIFT_STATUS))[_0x38aa44(0x2a1)];}catch(_0x20dcde){}let _0x2d43bd='';try{const _0x20585c=await this[_0x38aa44(0x349)](_0x38aa44(0x378));_0x2d43bd=_0x20585c?_0x20585c[_0x38aa44(0x2a1)]:'';}catch(_0x582656){}let _0x2efda6=null;!this[_0x38aa44(0x25b)]&&(_0x2efda6=this[_0x38aa44(0x1b7)]['geminiApiKey']?'KI-Modell\x20nicht\x20initialisiert':_0x38aa44(0x357));let _0x4317fa={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x597d23=await this[_0x38aa44(0x349)]('analysis.automation.patternDetected'),_0x59d1ee=await this[_0x38aa44(0x349)](_0x38aa44(0x29d)),_0x133855=await this[_0x38aa44(0x349)](_0x38aa44(0x288)),_0x10a597=await this[_0x38aa44(0x349)](_0x38aa44(0x1a3)),_0x5f9097=await this['getStateAsync']('analysis.automation.autoApply');_0x597d23&&_0x597d23[_0x38aa44(0x2a1)]&&(_0x4317fa['detected']=!![],_0x4317fa[_0x38aa44(0x1b2)]=_0x59d1ee?_0x59d1ee['val']:'',_0x4317fa['targetId']=_0x133855?_0x133855[_0x38aa44(0x2a1)]:'',_0x4317fa[_0x38aa44(0x2e6)]=_0x10a597?_0x10a597[_0x38aa44(0x2a1)]:''),_0x4317fa[_0x38aa44(0x2a4)]=_0x5f9097?!!_0x5f9097[_0x38aa44(0x2a1)]:![];}catch(_0x1d7c72){}this['sendTo'](_0x326170[_0x38aa44(0x233)],_0x326170[_0x38aa44(0x26b)],{'success':!![],'eventHistory':this[_0x38aa44(0x2d2)][_0x38aa44(0x1c4)](0x0,0xf),'stats':{'digestCount':_0x5d8bd4,'eventCountToday':_0x221004,'hourlyActivity':_0x2c60bc,'driftStatus':_0x152737['status'],'isPresent':this[_0x38aa44(0x20b)],'presenceWho':_0x2d43bd,'minDays':this[_0x38aa44(0x1b7)][_0x38aa44(0x361)]||0x7,'stbDays':this[_0x38aa44(0x1b7)][_0x38aa44(0x362)]||0xe,'ltbDays':this[_0x38aa44(0x1b7)]['ltmLtbWindowDays']||0x3c,'systemError':_0x2efda6},'automation':_0x4317fa},_0x326170['callback']);}else{if(_0x326170[_0x38aa44(0x26b)]===_0x38aa44(0x359)){const _0x3241b1=await this[_0x38aa44(0x1db)](_0x38aa44(0x380),'enum'),_0x381e90=[];if(_0x3241b1)for(const _0x12c803 in _0x3241b1){const _0x5b3454=_0x3241b1[_0x12c803],_0x9a3241=(_0x5b3454[_0x38aa44(0x278)]&&typeof _0x5b3454[_0x38aa44(0x278)][_0x38aa44(0x2cd)]===_0x38aa44(0x27c)?_0x5b3454[_0x38aa44(0x278)][_0x38aa44(0x2cd)]['de']:_0x5b3454[_0x38aa44(0x278)][_0x38aa44(0x2cd)])||_0x5b3454['common'][_0x38aa44(0x2cd)];_0x381e90[_0x38aa44(0x325)]({'id':_0x12c803,'name':_0x9a3241});}this[_0x38aa44(0x374)](_0x326170['from'],_0x326170['command'],{'success':!![],'enums':_0x381e90},_0x326170['callback']);}else{if(_0x326170[_0x38aa44(0x26b)]===_0x38aa44(0x306))try{const _0x5e1716=await scanForDevices(this,_0x326170[_0x38aa44(0x29e)]||{});this[_0x38aa44(0x374)](_0x326170[_0x38aa44(0x233)],_0x326170[_0x38aa44(0x26b)],{'success':!![],'devices':_0x5e1716},_0x326170[_0x38aa44(0x2f2)]);}catch(_0x57d1c5){this['sendTo'](_0x326170[_0x38aa44(0x233)],_0x326170[_0x38aa44(0x26b)],{'success':![],'error':_0x57d1c5[_0x38aa44(0x29e)]},_0x326170[_0x38aa44(0x2f2)]);}else{if(_0x326170['command']===_0x38aa44(0x305)){const _0x149854=_0x326170[_0x38aa44(0x29e)][_0x38aa44(0x387)];if(!_0x149854)return this[_0x38aa44(0x374)](_0x326170[_0x38aa44(0x233)],_0x326170[_0x38aa44(0x26b)],{'success':![],'error':_0x38aa44(0x333)},_0x326170[_0x38aa44(0x2f2)]);const _0x4d6b2d=await getCalendarNames(this,_0x149854);this[_0x38aa44(0x374)](_0x326170[_0x38aa44(0x233)],_0x326170['command'],{'success':!![],'names':_0x4d6b2d},_0x326170[_0x38aa44(0x2f2)]);}else{if(_0x326170[_0x38aa44(0x26b)]===_0x38aa44(0x1bd)){const {targetId:_0x4e89bd,targetValue:_0x43cb0d}=_0x326170[_0x38aa44(0x29e)];this[_0x38aa44(0x25a)][_0x38aa44(0x23c)]('üß™\x20Simulating\x20Butler\x20Proposal:\x20'+_0x4e89bd+'\x20=\x20'+_0x43cb0d),await this[_0x38aa44(0x236)](_0x38aa44(0x370),{'val':!![],'ack':!![]}),await this[_0x38aa44(0x236)](_0x38aa44(0x29d),{'val':_0x38aa44(0x328)+_0x4e89bd,'ack':!![]}),await this[_0x38aa44(0x236)]('analysis.automation.targetId',{'val':_0x4e89bd,'ack':!![]}),await this[_0x38aa44(0x236)](_0x38aa44(0x1a3),{'val':_0x43cb0d,'ack':!![]}),this[_0x38aa44(0x374)](_0x326170['from'],_0x326170[_0x38aa44(0x26b)],{'success':!![]},_0x326170[_0x38aa44(0x2f2)]);}else{if(_0x326170[_0x38aa44(0x26b)]==='submitFeedback'){const {historyId:_0x5a84e1,rating:_0x4e63b8,comment:_0x230972,alertReason:_0x50cfd8}=_0x326170['message'];_0x5a84e1&&_0x4e63b8?(await saveFeedback(this,{'timestamp':Date['now'](),'historyId':_0x5a84e1,'rating':_0x4e63b8,'comment':_0x230972,'alertReason':_0x50cfd8}),this[_0x38aa44(0x374)](_0x326170[_0x38aa44(0x233)],_0x326170[_0x38aa44(0x26b)],{'success':!![]},_0x326170[_0x38aa44(0x2f2)])):this['sendTo'](_0x326170[_0x38aa44(0x233)],_0x326170[_0x38aa44(0x26b)],{'success':![],'error':_0x38aa44(0x1ef)},_0x326170['callback']);}else _0x326170[_0x38aa44(0x26b)]===_0x38aa44(0x27d)&&(this[_0x38aa44(0x25a)][_0x38aa44(0x23c)](_0x38aa44(0x1a8)),await this[_0x38aa44(0x236)](_0x38aa44(0x370),{'val':![],'ack':!![]}),await this[_0x38aa44(0x236)](_0x38aa44(0x29d),{'val':'','ack':!![]}),this['sendTo'](_0x326170['from'],_0x326170[_0x38aa44(0x26b)],{'success':!![]},_0x326170[_0x38aa44(0x2f2)]));}}}}}}}}}}catch(_0x2fe342){this['log'][_0x38aa44(0x180)](_0x38aa44(0x1e3)+_0x326170[_0x38aa44(0x26b)]+':\x20'+_0x2fe342[_0x38aa44(0x29e)]);if(_0x326170['callback'])this[_0x38aa44(0x374)](_0x326170['from'],_0x326170[_0x38aa44(0x26b)],{'success':![],'error':_0x2fe342[_0x38aa44(0x29e)]},_0x326170[_0x38aa44(0x2f2)]);}}}if(require[a0_0x1cddbe(0x244)]!==module)module[a0_0x1cddbe(0x2f6)]=_0x9b854a=>new CogniLiving(_0x9b854a);else new CogniLiving();