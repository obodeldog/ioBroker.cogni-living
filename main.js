const a0_0x10e4de=a0_0x3590;(function(_0x4c2a1e,_0x1cc788){const _0x55639e=a0_0x3590,_0x5cb5df=_0x4c2a1e();while(!![]){try{const _0x452490=parseInt(_0x55639e(0x17d))/0x1*(-parseInt(_0x55639e(0x16c))/0x2)+parseInt(_0x55639e(0x122))/0x3+parseInt(_0x55639e(0x179))/0x4*(parseInt(_0x55639e(0x1c3))/0x5)+-parseInt(_0x55639e(0x18c))/0x6*(-parseInt(_0x55639e(0x120))/0x7)+-parseInt(_0x55639e(0x1b2))/0x8*(-parseInt(_0x55639e(0x249))/0x9)+parseInt(_0x55639e(0x163))/0xa*(-parseInt(_0x55639e(0x177))/0xb)+-parseInt(_0x55639e(0x21d))/0xc;if(_0x452490===_0x1cc788)break;else _0x5cb5df['push'](_0x5cb5df['shift']());}catch(_0x69a0f){_0x5cb5df['push'](_0x5cb5df['shift']());}}}(a0_0x4d6d,0x81e15));const a0_0x458ccb=(function(){let _0x2c6e90=!![];return function(_0x30b37e,_0x1d3f83){const _0x2b875a=_0x2c6e90?function(){const _0x1f090f=a0_0x3590;if(_0x1d3f83){const _0x2ff7a6=_0x1d3f83[_0x1f090f(0x12d)](_0x30b37e,arguments);return _0x1d3f83=null,_0x2ff7a6;}}:function(){};return _0x2c6e90=![],_0x2b875a;};}()),a0_0x94018b=a0_0x458ccb(this,function(){const _0x147d61=a0_0x3590;return a0_0x94018b[_0x147d61(0x243)]()[_0x147d61(0x24b)]('(((.+)+)+)+$')[_0x147d61(0x243)]()[_0x147d61(0x216)](a0_0x94018b)[_0x147d61(0x24b)](_0x147d61(0x1a4));});a0_0x94018b();'use strict';function a0_0x3590(_0xd40a97,_0x3ebc5b){const _0x4349ee=a0_0x4d6d();return a0_0x3590=function(_0x94018b,_0x458ccb){_0x94018b=_0x94018b-0x11d;let _0x4d6d3d=_0x4349ee[_0x94018b];return _0x4d6d3d;},a0_0x3590(_0xd40a97,_0x3ebc5b);}function a0_0x4d6d(){const _0x2dd266=['üõãÔ∏è\x20BUTLER:\x20Found\x20','LTM.driftAnalysis.baselineDrift','‚ö†Ô∏è\x20Fast-Boot\x20failed.\x20Triggering\x20Self-Healing...','telegram','replace','¬∞C,\x20','NORMAL','toFixed','GUEST','length','Missing\x20data','Installing\x20pip\x20packages...\x20(Caching\x20enabled)','info','apiKey','object','inactivityThresholdHours','lastAlertState','analysis.health.isAnomaly','python.exe','python_service','Reset\x20Sched\x20Error:\x20','threshold','HEALTH_TRAIN_RESULT','pip','cancel','sensorLastValues','\x20=\x20','type','rule','üõë\x20PERMISSION\x20ERROR:\x20Der\x20Adapter\x20darf\x20das\x20VENV\x20nicht\x20anlegen.','map','level.dimmer','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','onStateChange','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','constructor','heizung','TRAIN_COMFORT','analysis.security.topologyMatrix','ANALYZE_TREND','dependencyInstallInProgress','analysis.energy.forecast','14245980cfdqNK','slice','modeResetJob','briefingTime','Briefing\x20Error:\x20','Fokus\x20auf\x20Familienroutinen.','enum.functions.*','analysis.training.status','door','Delete\x20failed:\x20','dismissAutomation','values','getCalendarNames','toISOString','thermostat','presenceDevices','PREDICT_ENERGY','analysis.training.triggerHealth','TRAINING_COMPLETE','Scripts','TRAIN_HEALTH','ltmStbWindowDays','analysis.energy.insulationScore','Heuristic','.forecast.current.temperature','motion','dailyDigests','\x20new\x20patterns.','.Current.WeatherText','üß™\x20Simulating\x20Butler\x20Proposal:\x20','debug','.\x20(Is\x20\x27python3-venv\x27\x20installed?\x20\x27sudo\x20apt\x20install\x20python3-venv\x27)','.venv','trim','Regel\x20erkannt:\x20','service.py','üõãÔ∏è\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','response','toString','Kein\x20API\x20Key.','exitTimer','stringify','floor','write','27tQsoBQ','channel','search','exitGraceTimer','Success:\x20','briefingJob','filter','setState','analysis.training.triggerTopology','split','getMonth','temperature','presence','getStateAsync','detected','data','Topology\x20Error:\x20','guest','callback','text','log','parse','name','analysis.automation.autoApply','analysis.automation.detectedPatterns','onUnload','payload','7pXBmjm','activityLevel','585543NPkJpE','error','licht','[LOG]','PARTY','unknown','ready','Keine\x20Wetterdaten\x20verf√ºgbar.','analysis.training.triggerEnergy','N/A\x20(Learning)','ack','apply','pip.exe','ltmJob','LTM.rawEventLog','python3','ANALYZE_GAIT','minDaysForBaseline','Error\x20launching\x20Python:\x20','\x20candidates.','Enum','includes','analysis.trigger','Keine\x20Termine.','calendarInstance','\x0aGrund:\x20','getOverviewData','‚ùå\x20VENV\x20CREATION\x20FAILED:\x20','Fokus\x20auf\x20Komfort.','‚úÖ\x20HEALTH\x20TRAINED.','devices','VACATION','requirements.txt','analysis.health.trendValue','LTM.triggerDailyDigest','TREND_RESULT','join','common','analysis.alertReason','pop','command','genAI','sendTo','bin','confidence','analysis.triggerBriefing','testContext','LTM.driftAnalysis.driftDetails','weatherInstance','üï∏Ô∏è\x20Topology\x20Map\x20updated.','Unknown','üîç\x20Scanning\x20for\x20devices\x20(Aggressive\x20Parent\x20Lookup)...','insulation','platform','analysisHistory','analysisInterval','analysis.security.lastScore','analysis.security.currentThreshold','LTM.baselineStatus','geminiModel','No\x20instance','\x22\x20-c\x20\x22import\x20tensorflow;\x20print(\x27libs_ok\x27)\x22','getEnums','triggerDailyDigest','getForeignStateAsync','200OWWfSM','instance','eventHistory','getMinutes','timestamp','bind','fenster','change_percent','rmSync','2qxFFZo','isPresent','üõãÔ∏è\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','has','rawEventLog','PRIORIT√ÑT:\x20Sicherheit.','analysis.health.trendDiagnosis','warn','scanDevices','undefined','getDate','162613aIwYrR','TRAIN_SECURITY','188vWCDPR','N/A','push','python','21341yaAJiJ','enum','substring','enum.rooms.*','isProVersion','licenseKey','\x20*\x20*\x20*','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','system.presenceWho','LTM.driftAnalysis','currentSystemMode','cogni-living','KI-Modell\x20nicht\x20initialisiert','subscribeStates','triggerBriefing','5960316xyLCch','analysis.automation.patternDetected','getFullYear','testApiKey','üåÖ\x20Morning\x20Briefing:\x0a','message','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','geminiApiKey','getForeignObjectsAsync','application/json','scheduleJob','ltmLtbWindowDays','briefingEnabled','LTM.processingStatus','Gemini\x20AI\x20initialized.','driftAnalysisTimer','simulateButler','fill','BUILD_TOPOLOGY','from','main','Sec-Training\x20started...','ü§ñ\x20Autopilot:\x20Running\x20periodic\x20analysis...','startsWith','(((.+)+)+)+$','details','selectedFunctionIds','analysis.health.lastCheck','temperatur','HEALTH_RESULT','node-schedule','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','members','toLowerCase','Err:\x20','stdout','val','description','184088rnfAFD','pythonProcess','SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20','Could\x20not\x20load\x20rooms:\x20','\x22\x20install\x20-r\x20\x22','light','analysis.training.triggerSecurity','add','onReady','EACCES','systemUUID','LTM.dailyDigests','t√ºr','driftDetails','analysis.energy.heatingScore','analysis.automation.targetValue','Failed:\x20','82825ZxdWrw','config','ANOMALY',')\x20-\x20SAFE\x20BOOT','@google/generative-ai','setHours','getHours','window','analysis.automation.description','LTM.trainingData.sequences','[PYTHON]\x20','submitFeedback','rating','TRAIN_ENERGY','‚ôªÔ∏è\x20Found\x20broken\x20VENV\x20(no\x20pip).\x20Deleting\x20and\x20recreating...','‚ö†Ô∏è\x20Python\x20VENV\x20or\x20PIP\x20missing.\x20Installing...','PONG','üìù\x20Feedback\x20received:\x20','exports','\x20->\x20','existsSync','now','location','forEach','heating','generateContent','reason','stdin','Analysiere\x20ausgewogen.','analysis.training.triggerComfort','isGracePeriodActive','status','getGenerativeModel','getLtmData','onMessage','find','automation.triggerAction','close','setStateAsync','\x0aSTB:\x20','Drift\x20Sched\x20Error:\x20','getTime','contact','COMFORT_RESULT','success','path','analysisTimer','üëâ\x20L√ñSUNG\x20(SSH):\x20sudo\x20chown\x20-R\x20iobroker:iobroker\x20'];a0_0x4d6d=function(){return _0x2dd266;};return a0_0x4d6d();}const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x10e4de(0x1c7)),schedule=require(a0_0x10e4de(0x1aa)),{spawn,exec,execSync}=require('child_process'),path=require(a0_0x10e4de(0x1f0)),fs=require('fs'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',LTM_SCHEDULE='0\x203\x20*\x20*\x20*',MODE_RESET_SCHEDULE='0\x204\x20*\x20*\x20*',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x10e4de(0x130),LTM_DP_DAILY_DIGESTS=a0_0x10e4de(0x1bd),LTM_DP_STATUS=a0_0x10e4de(0x199),LTM_DP_TRIGGER_DIGEST=a0_0x10e4de(0x144),LTM_DP_BASELINE_STATUS=a0_0x10e4de(0x15c),LTM_DP_DRIFT_CHANNEL=a0_0x10e4de(0x186),LTM_DP_DRIFT_STATUS=a0_0x10e4de(0x1f4),LTM_DP_DRIFT_DETAILS=a0_0x10e4de(0x151),LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':'normal','VACATION':'vacation','PARTY':'party','GUEST':a0_0x10e4de(0x25a)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x10e4de(0x126)],SYSTEM_MODES[a0_0x10e4de(0x1fb)]],PERSONA_MAPPING={'generic':a0_0x10e4de(0x1df),'senior_aal':'PRIORIT√ÑT:\x20Gesundheit/AAL.','family':a0_0x10e4de(0x222),'single_comfort':a0_0x10e4de(0x13e),'security':a0_0x10e4de(0x171)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0},IS_WIN=process[a0_0x10e4de(0x157)]==='win32',PERSISTENT_DIR=path['join'](__dirname,a0_0x10e4de(0x23d)),VENV_PATH=PERSISTENT_DIR,PYTHON_EXE=IS_WIN?path[a0_0x10e4de(0x146)](VENV_PATH,a0_0x10e4de(0x230),a0_0x10e4de(0x205)):path[a0_0x10e4de(0x146)](VENV_PATH,'bin',a0_0x10e4de(0x17c)),PIP_EXE=IS_WIN?path[a0_0x10e4de(0x146)](VENV_PATH,a0_0x10e4de(0x230),a0_0x10e4de(0x12e)):path[a0_0x10e4de(0x146)](VENV_PATH,a0_0x10e4de(0x14d),a0_0x10e4de(0x20a));let activeSequence=[],sequenceTimer=null;function stopPythonService(_0x66c835){const _0x1d0f46=a0_0x10e4de;if(_0x66c835[_0x1d0f46(0x1b3)]){try{_0x66c835[_0x1d0f46(0x1b3)]['kill']();}catch(_0x3378b5){}_0x66c835['pythonProcess']=null;}}function sendToPython(_0x48d70d,_0x11088c,_0xe6068c={}){const _0x3d06df=a0_0x10e4de;if(!_0x48d70d[_0x3d06df(0x1b3)]||!_0x48d70d[_0x3d06df(0x1b3)][_0x3d06df(0x1de)]['writable'])return;const _0x3d4de0=JSON[_0x3d06df(0x246)]({'command':_0x11088c,..._0xe6068c});try{_0x48d70d[_0x3d06df(0x1b3)][_0x3d06df(0x1de)][_0x3d06df(0x248)](_0x3d4de0+'\x0a');}catch(_0x1a6ffb){}}function runPythonHealthCheck(_0x2711df){const _0x55d30d=a0_0x10e4de;if(!_0x2711df['dailyDigests']||_0x2711df[_0x55d30d(0x237)]['length']<0x2)return;const _0x2506fb=_0x2711df['dailyDigests'][_0x55d30d(0x211)](_0x8647b3=>{const _0x3e390d=_0x55d30d,_0x2321d3=(_0x8647b3[_0x3e390d(0x121)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x2321d3]||0x32;});sendToPython(_0x2711df,_0x55d30d(0x21a),{'values':_0x2506fb,'tag':'Activity-Level'});}function handlePythonResult(_0x268975,_0xf7bc3){const _0x19b212=a0_0x10e4de;if(_0xf7bc3[_0x19b212(0x20e)]===_0x19b212(0x1d3))_0x268975[_0x19b212(0x25d)][_0x19b212(0x23b)]('üêç\x20Python\x20Pong');else{if(_0xf7bc3[_0x19b212(0x20e)]==='SECURITY_RESULT'){const {anomaly_score:_0x4937da,is_anomaly:_0x4b6e9e,threshold:_0x5cda75,explanation:_0x340b1c}=_0xf7bc3['payload'];_0x268975[_0x19b212(0x25d)]['info'](_0x19b212(0x184)+_0x4937da['toFixed'](0x5)+_0x19b212(0x1d6)+(_0x4b6e9e?_0x19b212(0x1c5):'OK')),_0x268975[_0x19b212(0x1e9)](_0x19b212(0x15a),{'val':_0x4937da,'ack':!![]}),_0x268975[_0x19b212(0x1e9)]('analysis.security.lastCheck',{'val':new Date()['toISOString'](),'ack':!![]});if(_0x5cda75)_0x268975['setStateAsync'](_0x19b212(0x15b),{'val':_0x5cda75,'ack':!![]});if(_0x4b6e9e){let _0x3e59f8=_0x19b212(0x192)+_0x4937da['toFixed'](0x4)+')';if(_0x340b1c&&_0x340b1c!==_0x19b212(0x154))_0x3e59f8+=_0x19b212(0x13b)+_0x340b1c;_0x268975['setStateAsync']('analysis.isAlert',{'val':!![],'ack':!![]}),_0x268975[_0x19b212(0x1e9)](_0x19b212(0x148),{'val':_0x3e59f8,'ack':!![]}),sendNotification(_0x268975,_0x19b212(0x213)+_0x3e59f8,![],!![]);}}else{if(_0xf7bc3[_0x19b212(0x20e)]===_0x19b212(0x22f)){const _0x1e2cdd=_0xf7bc3[_0x19b212(0x11f)][_0x19b212(0x1a5)]||'',_0x25e50d=_0xf7bc3[_0x19b212(0x11f)][_0x19b212(0x208)],_0x782cf6=_0xf7bc3[_0x19b212(0x11f)][_0x19b212(0x1ef)]?_0x19b212(0x24d)+new Date()['toLocaleTimeString']()+'\x20('+_0x1e2cdd+')':_0x19b212(0x1c2)+_0xf7bc3[_0x19b212(0x11f)][_0x19b212(0x1dd)];_0x268975[_0x19b212(0x1e9)]('analysis.training.status',{'val':_0x782cf6,'ack':!![]});if(_0xf7bc3[_0x19b212(0x11f)][_0x19b212(0x1ef)]&&_0x25e50d)_0x268975['setStateAsync'](_0x19b212(0x15b),{'val':_0x25e50d,'ack':!![]});}else{if(_0xf7bc3[_0x19b212(0x20e)]===_0x19b212(0x1ee)){const {patterns:_0x4e39ec}=_0xf7bc3['payload'];if(_0x4e39ec&&_0x4e39ec['length']>0x0){_0x268975[_0x19b212(0x25d)][_0x19b212(0x1ff)](_0x19b212(0x1f3)+_0x4e39ec[_0x19b212(0x1fc)]+_0x19b212(0x238)),_0x268975[_0x19b212(0x1e9)](_0x19b212(0x11d),{'val':JSON['stringify'](_0x4e39ec),'ack':!![]});const _0x171fb4=_0x4e39ec[0x0],_0x6c02e8=_0x19b212(0x23f)+_0x171fb4[_0x19b212(0x20f)]+'\x20('+(_0x171fb4[_0x19b212(0x14e)]*0x64)[_0x19b212(0x1fa)](0x0)+'%)';_0x268975['setStateAsync'](_0x19b212(0x18d),{'val':!![],'ack':!![]}),_0x268975[_0x19b212(0x1e9)](_0x19b212(0x1cb),{'val':_0x6c02e8,'ack':!![]});}else _0x268975['log'][_0x19b212(0x1ff)](_0x19b212(0x241)),_0x268975[_0x19b212(0x1e9)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),_0x268975[_0x19b212(0x1e9)](_0x19b212(0x11d),{'val':'[]','ack':!![]});}else{if(_0xf7bc3['type']==='ENERGY_TRAIN_RESULT'){if(_0xf7bc3[_0x19b212(0x11f)][_0x19b212(0x1ef)])try{const _0x227fac=JSON[_0x19b212(0x25e)](_0xf7bc3[_0x19b212(0x11f)]['details']);if(_0x227fac[_0x19b212(0x156)])_0x268975[_0x19b212(0x1e9)](_0x19b212(0x233),{'val':JSON['stringify'](_0x227fac[_0x19b212(0x156)]),'ack':!![]});if(_0x227fac[_0x19b212(0x1db)])_0x268975[_0x19b212(0x1e9)](_0x19b212(0x1c0),{'val':JSON[_0x19b212(0x246)](_0x227fac[_0x19b212(0x1db)]),'ack':!![]});}catch(_0x10984e){}}else{if(_0xf7bc3[_0x19b212(0x20e)]===_0x19b212(0x209)){if(_0xf7bc3[_0x19b212(0x11f)]['success'])_0x268975[_0x19b212(0x25d)][_0x19b212(0x1ff)](_0x19b212(0x13f));}else{if(_0xf7bc3[_0x19b212(0x20e)]===_0x19b212(0x1a9))_0x268975['setStateAsync'](_0x19b212(0x1a7),{'val':new Date()[_0x19b212(0x22a)](),'ack':!![]}),_0x268975[_0x19b212(0x1e9)](_0x19b212(0x204),{'val':_0xf7bc3['payload']['is_anomaly'],'ack':!![]});else{if(_0xf7bc3[_0x19b212(0x20e)]===_0x19b212(0x145))_0x268975[_0x19b212(0x1e9)](_0x19b212(0x172),{'val':_0xf7bc3[_0x19b212(0x11f)]['diagnosis'],'ack':!![]}),_0x268975['setStateAsync'](_0x19b212(0x143),{'val':_0xf7bc3[_0x19b212(0x11f)][_0x19b212(0x16a)],'ack':!![]});else{if(_0xf7bc3['type']==='GAIT_RESULT'){const {speed_trend:_0x5b0f83}=_0xf7bc3[_0x19b212(0x11f)];if(_0x5b0f83!==undefined)_0x268975[_0x19b212(0x1e9)]('analysis.health.gaitSpeed',{'val':_0x5b0f83,'ack':!![]});}else{if(_0xf7bc3[_0x19b212(0x20e)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x39b118}=_0xf7bc3[_0x19b212(0x11f)];if(_0x39b118)_0x268975[_0x19b212(0x1e9)](_0x19b212(0x21c),{'val':JSON['stringify'](_0x39b118),'ack':!![]});}else{if(_0xf7bc3['type']==='TOPOLOGY_RESULT'){const {data:_0x3d0ce4}=_0xf7bc3['payload'];_0x3d0ce4&&(_0x268975[_0x19b212(0x25d)]['info'](_0x19b212(0x153)),_0x268975[_0x19b212(0x1e9)](_0x19b212(0x219),{'val':JSON['stringify'](_0x3d0ce4),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x2ece27){const _0x2d89ea=a0_0x10e4de;let _0x51812f=_0x2d89ea(0x131);if(fs[_0x2d89ea(0x1d7)](PYTHON_EXE))_0x51812f=PYTHON_EXE;try{const _0x1c6755=path[_0x2d89ea(0x146)](__dirname,_0x2d89ea(0x206),_0x2d89ea(0x240));_0x2ece27['pythonProcess']=spawn(_0x51812f,[_0x1c6755]),_0x2ece27[_0x2d89ea(0x1b3)][_0x2d89ea(0x1af)]['on'](_0x2d89ea(0x258),_0x2736be=>{const _0x208240=_0x2d89ea,_0x1b5bde=_0x2736be[_0x208240(0x243)]()['split']('\x0a');_0x1b5bde[_0x208240(0x1da)](_0x1bf2e0=>{const _0x47bd86=_0x208240,_0xbc4150=_0x1bf2e0[_0x47bd86(0x23e)]();if(!_0xbc4150)return;if(_0xbc4150[_0x47bd86(0x1a3)](_0x47bd86(0x125)))_0x2ece27[_0x47bd86(0x25d)][_0x47bd86(0x23b)](_0x47bd86(0x1cd)+_0xbc4150[_0x47bd86(0x17f)](0x5)[_0x47bd86(0x23e)]());else{if(_0xbc4150[_0x47bd86(0x1a3)]('[RESULT]'))try{const _0x5ce6db=JSON['parse'](_0xbc4150[_0x47bd86(0x17f)](0x8)[_0x47bd86(0x23e)]());handlePythonResult(_0x2ece27,_0x5ce6db);}catch(_0x39ad09){}}});}),_0x2ece27['pythonProcess']['on'](_0x2d89ea(0x1e8),_0x51cd02=>{const _0x5f380a=_0x2d89ea;_0x2ece27[_0x5f380a(0x1b3)]=null;});}catch(_0x3eb0af){_0x2ece27[_0x2d89ea(0x25d)][_0x2d89ea(0x123)](_0x2d89ea(0x134)+_0x3eb0af[_0x2d89ea(0x191)]);}}function installRequirementsInVenv(_0x127694,_0x48b5a2){const _0x3fe379=a0_0x10e4de;_0x127694[_0x3fe379(0x25d)][_0x3fe379(0x1ff)](_0x3fe379(0x1fe));const _0x65719c='\x22'+PIP_EXE+_0x3fe379(0x1b6)+_0x48b5a2+'\x22';exec(_0x65719c,{'timeout':0x1b7740},(_0x120fd2,_0x1ad6b4,_0x31712e)=>{const _0x6eb1da=_0x3fe379;_0x127694[_0x6eb1da(0x21b)]=![];if(_0x120fd2){_0x127694[_0x6eb1da(0x25d)][_0x6eb1da(0x123)]('‚ùå\x20INSTALL\x20FAILED:\x20'+(_0x31712e||_0x120fd2[_0x6eb1da(0x191)]));try{fs['rmSync'](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x2a4e93){}}else _0x127694[_0x6eb1da(0x25d)]['info']('‚úÖ\x20INSTALL\x20SUCCESS.'),startSystem(_0x127694);});}function installPythonDependencies(_0x134035){const _0x6e0916=a0_0x10e4de;if(_0x134035['dependencyInstallInProgress'])return;_0x134035[_0x6e0916(0x21b)]=!![];const _0x2d7db8=path[_0x6e0916(0x146)](__dirname,_0x6e0916(0x206),_0x6e0916(0x142));stopPythonService(_0x134035);if(fs['existsSync'](VENV_PATH)&&!fs[_0x6e0916(0x1d7)](PIP_EXE)){_0x134035[_0x6e0916(0x25d)]['warn'](_0x6e0916(0x1d1));try{fs[_0x6e0916(0x16b)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0xbc2688){_0x134035[_0x6e0916(0x25d)][_0x6e0916(0x123)](_0x6e0916(0x226)+_0xbc2688[_0x6e0916(0x191)]);}}if(!fs[_0x6e0916(0x1d7)](VENV_PATH))try{_0x134035[_0x6e0916(0x25d)][_0x6e0916(0x1ff)]('Creating\x20new\x20VENV...'),execSync('python3\x20-m\x20venv\x20\x22'+VENV_PATH+'\x22');}catch(_0x342f50){_0x134035[_0x6e0916(0x21b)]=![];_0x342f50[_0x6e0916(0x191)]['includes'](_0x6e0916(0x1bb))||_0x342f50[_0x6e0916(0x191)][_0x6e0916(0x137)]('Permission\x20denied')?(_0x134035['log'][_0x6e0916(0x123)](_0x6e0916(0x210)),_0x134035[_0x6e0916(0x25d)][_0x6e0916(0x123)](_0x6e0916(0x1f2)+path[_0x6e0916(0x146)](__dirname))):_0x134035[_0x6e0916(0x25d)][_0x6e0916(0x123)](_0x6e0916(0x13d)+_0x342f50[_0x6e0916(0x191)]+_0x6e0916(0x23c));return;}installRequirementsInVenv(_0x134035,_0x2d7db8);}function checkAndInstall(_0x52f37d){const _0x4ff074=a0_0x10e4de;if(fs[_0x4ff074(0x1d7)](PYTHON_EXE)&&fs[_0x4ff074(0x1d7)](PIP_EXE))try{return _0x52f37d[_0x4ff074(0x25d)][_0x4ff074(0x1ff)]('üêç\x20Checking\x20Python\x20environment...'),execSync('\x22'+PYTHON_EXE+_0x4ff074(0x15f),{'timeout':0x3a98}),_0x52f37d[_0x4ff074(0x25d)][_0x4ff074(0x1ff)]('‚úÖ\x20Fast-Boot:\x20Environment\x20healthy.\x20Skipping\x20installation.'),!![];}catch(_0x5472a9){_0x52f37d[_0x4ff074(0x25d)][_0x4ff074(0x173)](_0x4ff074(0x1f5));}else _0x52f37d['log']['warn'](_0x4ff074(0x1d2));return installPythonDependencies(_0x52f37d),![];}async function startSystem(_0x18074f){const _0x2c8328=a0_0x10e4de;_0x18074f[_0x2c8328(0x25d)][_0x2c8328(0x1ff)]('üöÄ\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.7)...'),await initZombies(_0x18074f);try{_0x18074f['isProVersion']=await checkLicense(_0x18074f[_0x2c8328(0x1c4)][_0x2c8328(0x182)]);}catch(_0x4b244b){}if(!_0x18074f[_0x2c8328(0x1c4)][_0x2c8328(0x202)]||_0x18074f[_0x2c8328(0x1c4)][_0x2c8328(0x202)]<0.1)_0x18074f[_0x2c8328(0x1c4)][_0x2c8328(0x202)]=0xc;await initHistory(_0x18074f),await initSystemConfig(_0x18074f);if(_0x18074f['config'][_0x2c8328(0x193)])try{_0x18074f['genAI']=new GoogleGenerativeAI(_0x18074f[_0x2c8328(0x1c4)][_0x2c8328(0x193)]),_0x18074f[_0x2c8328(0x15d)]=_0x18074f[_0x2c8328(0x14b)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x2c8328(0x195)}}),_0x18074f['log'][_0x2c8328(0x1ff)](_0x2c8328(0x19a));}catch(_0x38736f){_0x18074f[_0x2c8328(0x25d)][_0x2c8328(0x123)]('Gemini\x20Init\x20Error:\x20'+_0x38736f[_0x2c8328(0x191)]);}await createAllObjects(_0x18074f),await loadSystemMode(_0x18074f),await loadRawEventLog(_0x18074f),await loadDailyDigests(_0x18074f),_0x18074f[_0x2c8328(0x18a)](_0x2c8328(0x138)),_0x18074f['subscribeStates'](LTM_DP_TRIGGER_DIGEST),_0x18074f[_0x2c8328(0x18a)]('system.mode'),_0x18074f['subscribeStates'](_0x2c8328(0x14f)),_0x18074f[_0x2c8328(0x18a)]('analysis.automation.triggerAction'),_0x18074f[_0x2c8328(0x18a)](_0x2c8328(0x260)),_0x18074f[_0x2c8328(0x18a)](_0x2c8328(0x1b8)),_0x18074f['subscribeStates'](_0x2c8328(0x22e)),_0x18074f['subscribeStates']('analysis.training.triggerEnergy'),_0x18074f[_0x2c8328(0x18a)]('analysis.training.triggerComfort'),_0x18074f['subscribeStates'](_0x2c8328(0x251)),await initSensorSubscriptions(_0x18074f),await initPresenceSubscriptions(_0x18074f),await setupTelegramListener(_0x18074f),setTimeout(()=>checkWifiPresence(_0x18074f),0x1388);if(_0x18074f[_0x2c8328(0x1f1)])clearInterval(_0x18074f[_0x2c8328(0x1f1)]);const _0x16ed6a=_0x18074f['config'][_0x2c8328(0x159)]||0xf;_0x16ed6a>0x0&&(_0x18074f[_0x2c8328(0x1f1)]=setInterval(()=>{runAutopilot(_0x18074f);},_0x16ed6a*0x3c*0x3e8)),setupLtmScheduler(_0x18074f),setupModeResetScheduler(_0x18074f),setupDriftAnalysisScheduler(_0x18074f),setupBriefingScheduler(_0x18074f),startPythonService(_0x18074f),setTimeout(()=>{_0x18074f['pythonProcess']&&(runPythonHealthCheck(_0x18074f),triggerGaitAnalysis(_0x18074f),triggerEnergyPrediction(_0x18074f)),updateHealthVector(_0x18074f);},0x1388);}async function runAutopilot(_0x471bc3){const _0x2caaf5=a0_0x10e4de;_0x471bc3[_0x2caaf5(0x25d)][_0x2caaf5(0x23b)](_0x2caaf5(0x1a2)),await runGeminiAnalysis(_0x471bc3),updateHealthVector(_0x471bc3),triggerGaitAnalysis(_0x471bc3),triggerEnergyPrediction(_0x471bc3);}async function triggerGaitAnalysis(_0x388338){const _0x265d2a=a0_0x10e4de;if(!_0x388338[_0x265d2a(0x181)])return;try{const _0x5bef37=await _0x388338[_0x265d2a(0x256)]('LTM.trainingData.sequences');_0x5bef37&&_0x5bef37[_0x265d2a(0x1b0)]&&sendToPython(_0x388338,_0x265d2a(0x132),{'sequences':JSON[_0x265d2a(0x25e)](_0x5bef37[_0x265d2a(0x1b0)])});}catch(_0x57dcf1){}}async function triggerEnergyPrediction(_0x14c658){const _0x5051e1=a0_0x10e4de;if(!_0x14c658[_0x5051e1(0x181)])return;try{const _0x341c21=await getOutsideTemperatureNumeric(_0x14c658);if(_0x341c21===null)return;const _0x53b312={},_0xba9fd7=_0x14c658[_0x5051e1(0x1c4)][_0x5051e1(0x140)]||[];for(const _0x2dc623 of _0xba9fd7){if(_0x2dc623[_0x5051e1(0x20e)]===_0x5051e1(0x254)&&_0x2dc623['location']){const _0x511b64=_0x14c658[_0x5051e1(0x20c)][_0x2dc623['id']];if(_0x511b64!==undefined)_0x53b312[_0x2dc623[_0x5051e1(0x1d9)]]=_0x511b64;}}Object['keys'](_0x53b312)['length']>0x0&&sendToPython(_0x14c658,_0x5051e1(0x22d),{'current_temps':_0x53b312,'t_out':_0x341c21});}catch(_0x3b025e){}}function updateHealthVector(_0x365757){const _0x28c284=a0_0x10e4de;if(!_0x365757[_0x28c284(0x170)]||_0x365757[_0x28c284(0x170)][_0x28c284(0x1fc)]===0x0)return;const _0x2bd306=new Array(0x60)[_0x28c284(0x19d)](0x0),_0x565228=new Date()[_0x28c284(0x1c8)](0x0,0x0,0x0,0x0);_0x365757[_0x28c284(0x170)]['forEach'](_0x2a7e06=>{const _0x267787=_0x28c284,_0x142c6e=new Date(_0x2a7e06[_0x267787(0x167)]);if(_0x142c6e[_0x267787(0x1ec)]()>=_0x565228){const _0x402a97=_0x142c6e[_0x267787(0x1c9)](),_0x40b400=_0x142c6e[_0x267787(0x166)](),_0x1b049a=_0x402a97*0x4+Math[_0x267787(0x247)](_0x40b400/0xf);if(_0x1b049a>=0x0&&_0x1b049a<0x60)_0x2bd306[_0x1b049a]++;}}),_0x365757[_0x28c284(0x1e9)]('analysis.health.todayVector',{'val':JSON[_0x28c284(0x246)](_0x2bd306),'ack':!![]});}async function scanForDevices(_0x56da28,_0x46c8a9){const _0x4c8e26=a0_0x10e4de;_0x56da28[_0x4c8e26(0x25d)][_0x4c8e26(0x1ff)](_0x4c8e26(0x155));const _0x597832=[],_0xa7c3cb=await _0x56da28[_0x4c8e26(0x194)]('*'),_0x301005={};try{const _0x4c717f=await _0x56da28[_0x4c8e26(0x194)](_0x4c8e26(0x180),'enum');for(const _0x411678 in _0x4c717f){const _0x26ed2b=_0x4c717f[_0x411678],_0x3c271d=(_0x26ed2b[_0x4c8e26(0x147)]&&typeof _0x26ed2b[_0x4c8e26(0x147)][_0x4c8e26(0x25f)]===_0x4c8e26(0x201)?_0x26ed2b[_0x4c8e26(0x147)][_0x4c8e26(0x25f)]['de']:_0x26ed2b['common']['name'])||_0x26ed2b[_0x4c8e26(0x147)][_0x4c8e26(0x25f)];if(_0x26ed2b['common']&&_0x26ed2b[_0x4c8e26(0x147)]['members'])for(const _0x5eeef9 of _0x26ed2b[_0x4c8e26(0x147)][_0x4c8e26(0x1ac)]){_0x301005[_0x5eeef9]=_0x3c271d;}}}catch(_0x300e97){_0x56da28[_0x4c8e26(0x25d)][_0x4c8e26(0x173)](_0x4c8e26(0x1b5)+_0x300e97[_0x4c8e26(0x191)]);}let _0x56574e=null,_0x437a3d={};if(_0x46c8a9[_0x4c8e26(0x1a6)]&&_0x46c8a9[_0x4c8e26(0x1a6)][_0x4c8e26(0x1fc)]>0x0){_0x56574e=new Set();for(const _0x555fc2 of _0x46c8a9[_0x4c8e26(0x1a6)]){const _0x32241a=await _0x56da28['getForeignObjectAsync'](_0x555fc2);if(_0x32241a&&_0x32241a[_0x4c8e26(0x147)]&&_0x32241a[_0x4c8e26(0x147)][_0x4c8e26(0x1ac)]){let _0x257641=null;const _0xcd846f=_0x555fc2[_0x4c8e26(0x1ad)]();if(_0xcd846f[_0x4c8e26(0x137)](_0x4c8e26(0x1b7))||_0xcd846f['includes'](_0x4c8e26(0x124)))_0x257641=_0x4c8e26(0x1b7);else{if(_0xcd846f[_0x4c8e26(0x137)](_0x4c8e26(0x1db))||_0xcd846f[_0x4c8e26(0x137)](_0x4c8e26(0x217)))_0x257641=_0x4c8e26(0x254);else{if(_0xcd846f[_0x4c8e26(0x137)]('window')||_0xcd846f[_0x4c8e26(0x137)](_0x4c8e26(0x169)))_0x257641=_0x4c8e26(0x225);}}for(const _0x8528d7 of _0x32241a[_0x4c8e26(0x147)]['members']){_0x56574e[_0x4c8e26(0x1b9)](_0x8528d7);if(_0x257641)_0x437a3d[_0x8528d7]=_0x257641;}}}}for(const _0x14438f in _0xa7c3cb){const _0x401112=_0xa7c3cb[_0x14438f];if(_0x401112&&_0x401112['common']&&_0x401112[_0x4c8e26(0x20e)]==='state'){let _0x349d0a=![],_0x5cef9a=null;if(_0x56574e){if(_0x56574e[_0x4c8e26(0x16f)](_0x14438f))_0x349d0a=!![];else{const _0x24304b=_0x14438f[_0x4c8e26(0x252)]('.'),_0x53270c=_0x24304b['slice'](0x0,-0x1)[_0x4c8e26(0x146)]('.'),_0x398284=_0x24304b[_0x4c8e26(0x21e)](0x0,-0x2)[_0x4c8e26(0x146)]('.');if(_0x56574e['has'](_0x53270c)){_0x349d0a=!![];if(_0x437a3d[_0x53270c])_0x5cef9a=_0x437a3d[_0x53270c];}else{if(_0x56574e[_0x4c8e26(0x16f)](_0x398284)){_0x349d0a=!![];if(_0x437a3d[_0x398284])_0x5cef9a=_0x437a3d[_0x398284];}}}}if(_0x5cef9a)_0x437a3d[_0x14438f]=_0x5cef9a;const _0x92acf9=(_0x401112[_0x4c8e26(0x147)][_0x4c8e26(0x25f)]&&typeof _0x401112['common']['name']===_0x4c8e26(0x201)?_0x401112[_0x4c8e26(0x147)][_0x4c8e26(0x25f)]['de']:_0x401112[_0x4c8e26(0x147)][_0x4c8e26(0x25f)])||'',_0x46d1e9=(_0x401112[_0x4c8e26(0x147)]['role']||'')[_0x4c8e26(0x1ad)](),_0x4e3f77=_0x92acf9['toLowerCase']();if(!_0x5cef9a){if(_0x46c8a9[_0x4c8e26(0x236)]&&(_0x46d1e9['includes'](_0x4c8e26(0x236))||_0x4e3f77[_0x4c8e26(0x137)]('bewegung')||_0x46d1e9[_0x4c8e26(0x137)](_0x4c8e26(0x255))))_0x5cef9a=_0x4c8e26(0x236);else{if(_0x46c8a9['doors']&&(_0x46d1e9[_0x4c8e26(0x137)](_0x4c8e26(0x225))||_0x46d1e9[_0x4c8e26(0x137)](_0x4c8e26(0x1ca))||_0x4e3f77['includes'](_0x4c8e26(0x1be))||_0x4e3f77['includes']('fenster')||_0x46d1e9['includes'](_0x4c8e26(0x1ed))))_0x5cef9a=_0x4c8e26(0x225);else{if(_0x46c8a9['lights']&&(_0x46d1e9['includes'](_0x4c8e26(0x1b7))||_0x46d1e9[_0x4c8e26(0x137)]('switch')||_0x4e3f77['includes'](_0x4c8e26(0x124))||_0x46d1e9['includes'](_0x4c8e26(0x212))))_0x5cef9a=_0x4c8e26(0x1b7);else{if(_0x46c8a9[_0x4c8e26(0x254)]&&(_0x46d1e9[_0x4c8e26(0x137)]('temperature')||_0x4e3f77[_0x4c8e26(0x137)](_0x4c8e26(0x1a8))||_0x46d1e9[_0x4c8e26(0x137)](_0x4c8e26(0x22b))))_0x5cef9a=_0x4c8e26(0x254);}}}}if((_0x349d0a||_0x5cef9a)&&_0x5cef9a){let _0x34fad3=_0x92acf9||_0x14438f;const _0x5222f0=_0x14438f[_0x4c8e26(0x252)]('.');let _0x334e14=![];const _0x309343=_0x5222f0['slice'](0x0,-0x1)[_0x4c8e26(0x146)]('.'),_0x400551=_0xa7c3cb[_0x309343];if(_0x400551&&_0x400551[_0x4c8e26(0x147)]&&_0x400551[_0x4c8e26(0x147)][_0x4c8e26(0x25f)]){let _0x3013f2=(typeof _0x400551[_0x4c8e26(0x147)][_0x4c8e26(0x25f)]===_0x4c8e26(0x201)?_0x400551[_0x4c8e26(0x147)][_0x4c8e26(0x25f)]['de']:_0x400551[_0x4c8e26(0x147)]['name'])||'';_0x3013f2&&_0x3013f2!==_0x4c8e26(0x175)&&(!_0x3013f2[_0x4c8e26(0x1ad)]()[_0x4c8e26(0x137)](_0x4c8e26(0x24a))&&_0x3013f2!==_0x309343['split']('.')[_0x4c8e26(0x149)]()&&(_0x34fad3=_0x3013f2+'\x20('+(_0x92acf9||_0x14438f['split']('.')[_0x4c8e26(0x149)]())+')',_0x334e14=!![]));}if(!_0x334e14){const _0x152569=_0x5222f0['slice'](0x0,-0x2)[_0x4c8e26(0x146)]('.'),_0x44d690=_0xa7c3cb[_0x152569];if(_0x44d690&&_0x44d690[_0x4c8e26(0x147)]&&_0x44d690[_0x4c8e26(0x147)][_0x4c8e26(0x25f)]){let _0x11b38e=(typeof _0x44d690[_0x4c8e26(0x147)][_0x4c8e26(0x25f)]===_0x4c8e26(0x201)?_0x44d690['common'][_0x4c8e26(0x25f)]['de']:_0x44d690[_0x4c8e26(0x147)][_0x4c8e26(0x25f)])||'';_0x11b38e&&_0x11b38e!==_0x4c8e26(0x175)&&(_0x34fad3=_0x11b38e+'\x20('+(_0x92acf9||_0x14438f[_0x4c8e26(0x252)]('.')[_0x4c8e26(0x149)]())+')');}}let _0x4b478d=_0x301005[_0x14438f];if(!_0x4b478d){const _0x4c859a=_0x14438f[_0x4c8e26(0x252)]('.')[_0x4c8e26(0x21e)](0x0,-0x1)[_0x4c8e26(0x146)]('.');_0x4b478d=_0x301005[_0x4c859a];}if(!_0x4b478d){const _0x449115=_0x14438f[_0x4c8e26(0x252)]('.')[_0x4c8e26(0x21e)](0x0,-0x2)[_0x4c8e26(0x146)]('.');_0x4b478d=_0x301005[_0x449115];}if(!_0x4b478d){if(_0x5222f0[_0x4c8e26(0x1fc)]>0x2)_0x4b478d=_0x5222f0[0x2];}const _0x5dafb3=_0x349d0a?0x5a:0x32,_0x5c91a9=_0x349d0a?_0x4c8e26(0x136):_0x4c8e26(0x234);_0x597832[_0x4c8e26(0x17b)]({'id':_0x14438f,'name':_0x34fad3,'type':_0x5cef9a,'location':_0x4b478d||'','_score':_0x5dafb3,'_source':_0x5c91a9});}}}return _0x56da28['log'][_0x4c8e26(0x1ff)]('üîç\x20Scan\x20finished.\x20Found\x20'+_0x597832[_0x4c8e26(0x1fc)]+_0x4c8e26(0x135)),_0x597832;}async function getWeatherContext(_0x47d6d6){const _0x4ce861=a0_0x10e4de;if(!_0x47d6d6[_0x4ce861(0x1c4)]['useWeather']||!_0x47d6d6[_0x4ce861(0x1c4)]['weatherInstance'])return'Wetterdaten\x20deaktiviert.';try{const _0x3467fb=_0x47d6d6[_0x4ce861(0x1c4)][_0x4ce861(0x152)];let _0x1f6654=await _0x47d6d6[_0x4ce861(0x162)](_0x3467fb+'.Current.Temperature');if(!_0x1f6654)_0x1f6654=await _0x47d6d6['getForeignStateAsync'](_0x3467fb+_0x4ce861(0x235));let _0x5bfd98=await _0x47d6d6[_0x4ce861(0x162)](_0x3467fb+_0x4ce861(0x239));if(!_0x5bfd98)_0x5bfd98=await _0x47d6d6[_0x4ce861(0x162)](_0x3467fb+'.forecast.current.state');if(_0x1f6654&&_0x5bfd98)return _0x1f6654[_0x4ce861(0x1b0)]+_0x4ce861(0x1f8)+_0x5bfd98['val'];}catch(_0x9ee35c){}return _0x4ce861(0x129);}async function getCalendarContext(_0x2d4548){const _0x4e252c=a0_0x10e4de;if(!_0x2d4548[_0x4e252c(0x1c4)]['useCalendar']||!_0x2d4548['config'][_0x4e252c(0x13a)])return'Kalender\x20deaktiviert.';return _0x4e252c(0x139);}async function getCalendarNames(_0x5d36dd,_0x151697){return[];}async function saveFeedback(_0x33837f,_0x376ba8){const _0x1f86dc=a0_0x10e4de;_0x33837f[_0x1f86dc(0x25d)][_0x1f86dc(0x1ff)](_0x1f86dc(0x1d4)+_0x376ba8[_0x1f86dc(0x1cf)]);}async function sendMorningBriefing(_0x2f51b3){const _0x4e4f67=a0_0x10e4de;if(!_0x2f51b3['geminiModel'])return;try{const _0x3e3690=_0x4e4f67(0x1ab),_0x507258=await _0x2f51b3[_0x4e4f67(0x15d)][_0x4e4f67(0x1dc)](_0x3e3690),_0x1732f9=_0x507258[_0x4e4f67(0x242)][_0x4e4f67(0x25c)]();sendNotification(_0x2f51b3,_0x4e4f67(0x190)+_0x1732f9);}catch(_0x2e2b72){_0x2f51b3[_0x4e4f67(0x25d)]['error'](_0x4e4f67(0x221)+_0x2e2b72[_0x4e4f67(0x191)]);}}function setupLtmScheduler(_0x2b7046){const _0x493dd8=a0_0x10e4de;try{if(_0x2b7046[_0x493dd8(0x12f)])_0x2b7046[_0x493dd8(0x12f)][_0x493dd8(0x20b)]();if(!_0x2b7046[_0x493dd8(0x181)])return;_0x2b7046[_0x493dd8(0x12f)]=schedule['scheduleJob'](LTM_SCHEDULE,()=>createDailyDigest(_0x2b7046));}catch(_0xd996b1){_0x2b7046[_0x493dd8(0x25d)][_0x493dd8(0x123)]('LTM\x20Sched\x20Error:\x20'+_0xd996b1['message']);}}function setupModeResetScheduler(_0x304729){const _0x14531a=a0_0x10e4de;try{if(_0x304729[_0x14531a(0x21f)])_0x304729['modeResetJob']['cancel']();_0x304729[_0x14531a(0x21f)]=schedule[_0x14531a(0x196)](MODE_RESET_SCHEDULE,async()=>{const _0x57da4d=_0x14531a;await loadSystemMode(_0x304729),AUTO_RESET_MODES[_0x57da4d(0x137)](_0x304729[_0x57da4d(0x187)])&&await _0x304729[_0x57da4d(0x1e9)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x57da4d(0x1f9)],'ack':![]});});}catch(_0x35f323){_0x304729['log'][_0x14531a(0x123)](_0x14531a(0x207)+_0x35f323['message']);}}function setupDriftAnalysisScheduler(_0x3e1ab5){const _0x4a2f9e=a0_0x10e4de;try{if(_0x3e1ab5[_0x4a2f9e(0x19b)])clearInterval(_0x3e1ab5[_0x4a2f9e(0x19b)]);if(!_0x3e1ab5[_0x4a2f9e(0x181)])return;_0x3e1ab5[_0x4a2f9e(0x19b)]=setInterval(()=>runBaselineDriftAnalysis(_0x3e1ab5),(_0x3e1ab5[_0x4a2f9e(0x1c4)]['ltmDriftCheckIntervalHours']||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x3e1ab5),0x1388);}catch(_0x206845){_0x3e1ab5[_0x4a2f9e(0x25d)][_0x4a2f9e(0x123)](_0x4a2f9e(0x1eb)+_0x206845['message']);}}function setupBriefingScheduler(_0x2f79d5){const _0x15ab4e=a0_0x10e4de;try{if(_0x2f79d5['briefingJob'])_0x2f79d5['briefingJob'][_0x15ab4e(0x20b)]();if(!_0x2f79d5['config'][_0x15ab4e(0x198)])return;const _0x4f2b21=(_0x2f79d5[_0x15ab4e(0x1c4)][_0x15ab4e(0x220)]||'08:00')[_0x15ab4e(0x252)](':'),_0x1ed477=parseInt(_0x4f2b21[0x0])||0x8,_0x4536cf=parseInt(_0x4f2b21[0x1])||0x0,_0x50fec8=_0x4536cf+'\x20'+_0x1ed477+_0x15ab4e(0x183);_0x2f79d5['briefingJob']=schedule[_0x15ab4e(0x196)](_0x50fec8,()=>{sendMorningBriefing(_0x2f79d5);});}catch(_0x17a82e){_0x2f79d5[_0x15ab4e(0x25d)]['error']('Briefing\x20Sched\x20Error:\x20'+_0x17a82e[_0x15ab4e(0x191)]);}}async function runBaselineDriftAnalysis(_0x17ff65){const _0x47c437=a0_0x10e4de;if(!_0x17ff65[_0x47c437(0x181)]||!_0x17ff65[_0x47c437(0x15d)])return;const _0x343dc2=_0x17ff65['config'][_0x47c437(0x232)]||0xe;if(_0x17ff65[_0x47c437(0x237)]['length']<_0x343dc2+0x7){await _0x17ff65[_0x47c437(0x1e9)](LTM_DP_DRIFT_STATUS,{'val':_0x47c437(0x12b),'ack':!![]});return;}const _0x44cb1b=_0x17ff65[_0x47c437(0x237)][_0x47c437(0x21e)](-_0x343dc2),_0x3c6f4f=_0x17ff65['dailyDigests'][_0x47c437(0x21e)](0x0,_0x17ff65[_0x47c437(0x237)]['length']-_0x343dc2),_0x85ebdd=_0x47c437(0x215)+JSON[_0x47c437(0x246)](_0x3c6f4f)+_0x47c437(0x1ea)+JSON[_0x47c437(0x246)](_0x44cb1b);try{const _0x4fa840=await _0x17ff65['geminiModel'][_0x47c437(0x1dc)](_0x85ebdd),_0x3dcbc9=JSON[_0x47c437(0x25e)](_0x4fa840[_0x47c437(0x242)]['text']()[_0x47c437(0x1f7)](/```json|```/g,'')[_0x47c437(0x23e)]());_0x3dcbc9['baselineDrift']&&(await _0x17ff65['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x3dcbc9['baselineDrift'],'ack':!![]}),await _0x17ff65[_0x47c437(0x1e9)](LTM_DP_DRIFT_DETAILS,{'val':_0x3dcbc9[_0x47c437(0x1bf)],'ack':!![]}),await _0x17ff65[_0x47c437(0x1e9)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x47c437(0x1d8)](),'ack':!![]}));}catch(_0x2622fb){}}class CogniLiving extends utils['Adapter']{constructor(_0x1901bb){const _0x42b0fa=a0_0x10e4de;super({..._0x1901bb,'name':_0x42b0fa(0x188)}),this[_0x42b0fa(0x165)]=[],this[_0x42b0fa(0x158)]=[],this['rawEventLog']=[],this[_0x42b0fa(0x237)]=[],this[_0x42b0fa(0x20c)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x42b0fa(0x16d)]=!![],this[_0x42b0fa(0x245)]=null,this[_0x42b0fa(0x24c)]=null,this[_0x42b0fa(0x1e1)]=![],this[_0x42b0fa(0x14b)]=null,this['geminiModel']=null,this[_0x42b0fa(0x187)]=SYSTEM_MODES[_0x42b0fa(0x1f9)],this[_0x42b0fa(0x181)]=![],this[_0x42b0fa(0x203)]=![],this[_0x42b0fa(0x1bc)]=_0x42b0fa(0x127),this[_0x42b0fa(0x1f1)]=null,this[_0x42b0fa(0x12f)]=null,this[_0x42b0fa(0x21f)]=null,this[_0x42b0fa(0x19b)]=null,this[_0x42b0fa(0x24e)]=null,this['pythonProcess']=null,this[_0x42b0fa(0x21b)]=![],this['on'](_0x42b0fa(0x128),this[_0x42b0fa(0x1ba)]['bind'](this)),this['on']('stateChange',this['onStateChange'][_0x42b0fa(0x168)](this)),this['on']('unload',this[_0x42b0fa(0x11e)][_0x42b0fa(0x168)](this)),this['on'](_0x42b0fa(0x191),this[_0x42b0fa(0x1e5)][_0x42b0fa(0x168)](this));}async[a0_0x10e4de(0x1ba)](){const _0x93165e=a0_0x10e4de;this['log'][_0x93165e(0x1ff)]('cogni-living\x20adapter\x20starting\x20(v'+this['version']+_0x93165e(0x1c6));if(!checkAndInstall(this))return;await startSystem(this);}['onUnload'](_0x314cb1){const _0x1e61a7=a0_0x10e4de;if(this[_0x1e61a7(0x1f1)])clearInterval(this['analysisTimer']);if(this['driftAnalysisTimer'])clearInterval(this[_0x1e61a7(0x19b)]);if(this['ltmJob'])this[_0x1e61a7(0x12f)][_0x1e61a7(0x20b)]();if(this[_0x1e61a7(0x21f)])this[_0x1e61a7(0x21f)][_0x1e61a7(0x20b)]();if(this[_0x1e61a7(0x24e)])this['briefingJob'][_0x1e61a7(0x20b)]();if(this[_0x1e61a7(0x245)])clearTimeout(this[_0x1e61a7(0x245)]);if(this['exitGraceTimer'])clearTimeout(this[_0x1e61a7(0x24c)]);stopPythonService(this),_0x314cb1();}async[a0_0x10e4de(0x214)](_0x5d4570,_0x5eb3c2){const _0x386613=a0_0x10e4de;if(!_0x5eb3c2||this[_0x386613(0x21b)])return;if(_0x5d4570[_0x386613(0x137)](_0x386613(0x1f6))&&_0x5d4570['endsWith']('communicate.request')&&_0x5eb3c2[_0x386613(0x1b0)]){await handleTelegramResponse(this,_0x5eb3c2['val']);return;}if(_0x5d4570===this['namespace']+'.'+SYSTEM_DP_MODE){if(_0x5eb3c2['val']&&Object[_0x386613(0x228)](SYSTEM_MODES)['includes'](_0x5eb3c2[_0x386613(0x1b0)])){this['currentSystemMode']=_0x5eb3c2[_0x386613(0x1b0)];if(_0x5eb3c2['val']===SYSTEM_MODES[_0x386613(0x141)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x5eb3c2[_0x386613(0x12c)])this[_0x386613(0x250)](_0x5d4570,{'val':this[_0x386613(0x187)],'ack':!![]});return;}if(!_0x5eb3c2[_0x386613(0x12c)]){_0x5d4570[_0x386613(0x137)](_0x386613(0x138))&&_0x5eb3c2[_0x386613(0x1b0)]&&(this['setState'](_0x5d4570,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x5d4570[_0x386613(0x137)](_0x386613(0x161))&&_0x5eb3c2[_0x386613(0x1b0)]){this[_0x386613(0x250)](_0x5d4570,{'val':![],'ack':!![]});if(this[_0x386613(0x181)])createDailyDigest(this);}_0x5d4570['includes'](_0x386613(0x18b))&&_0x5eb3c2[_0x386613(0x1b0)]&&(this[_0x386613(0x250)](_0x5d4570,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x5d4570[_0x386613(0x137)](_0x386613(0x1e7))&&_0x5eb3c2['val']&&(this[_0x386613(0x250)](_0x5d4570,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x5d4570['includes'](_0x386613(0x1b8))&&_0x5eb3c2[_0x386613(0x1b0)]){this[_0x386613(0x250)](_0x5d4570,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x18b943=await this[_0x386613(0x256)](_0x386613(0x1cc));if(_0x18b943&&_0x18b943[_0x386613(0x1b0)]){const _0x5b9586=JSON[_0x386613(0x25e)](_0x18b943[_0x386613(0x1b0)]);this[_0x386613(0x25d)][_0x386613(0x1ff)]('üß†\x20Triggering\x20Security\x20Training...'),this['setStateAsync'](_0x386613(0x224),{'val':_0x386613(0x1a1),'ack':!![]}),sendToPython(this,_0x386613(0x178),{'sequences':_0x5b9586});}}catch(_0x288f93){this['log']['error']('Training\x20Error:\x20'+_0x288f93['message']);}}if(_0x5d4570['includes'](_0x386613(0x22e))&&_0x5eb3c2[_0x386613(0x1b0)]){this[_0x386613(0x250)](_0x5d4570,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x3b44ee=await this[_0x386613(0x256)](LTM_DP_DAILY_DIGESTS);if(_0x3b44ee&&_0x3b44ee[_0x386613(0x1b0)])sendToPython(this,_0x386613(0x231),{'digests':JSON[_0x386613(0x25e)](_0x3b44ee[_0x386613(0x1b0)])});}catch(_0x1bc218){}}if(_0x5d4570['includes'](_0x386613(0x12a))&&_0x5eb3c2[_0x386613(0x1b0)]){this['setState'](_0x5d4570,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x3a1cd6=await this['getStateAsync']('LTM.trainingData.thermodynamics');if(_0x3a1cd6&&_0x3a1cd6[_0x386613(0x1b0)])sendToPython(this,_0x386613(0x1d0),{'points':JSON[_0x386613(0x25e)](_0x3a1cd6[_0x386613(0x1b0)])});}catch(_0x5022ac){}}if(_0x5d4570[_0x386613(0x137)](_0x386613(0x1e0))&&_0x5eb3c2[_0x386613(0x1b0)]){this[_0x386613(0x250)](_0x5d4570,{'val':![],'ack':!![]});if(this[_0x386613(0x181)])try{const _0x3a6ed5=await this[_0x386613(0x256)](LTM_DP_RAW_LOG);_0x3a6ed5&&_0x3a6ed5[_0x386613(0x1b0)]&&(this[_0x386613(0x25d)][_0x386613(0x1ff)](_0x386613(0x16e)),sendToPython(this,_0x386613(0x218),{'events':JSON[_0x386613(0x25e)](_0x3a6ed5[_0x386613(0x1b0)])}));}catch(_0x3bf0a0){}}if(_0x5d4570[_0x386613(0x137)]('analysis.training.triggerTopology')&&_0x5eb3c2[_0x386613(0x1b0)]){this['setState'](_0x5d4570,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x29634c=await this[_0x386613(0x256)](_0x386613(0x1cc));if(_0x29634c&&_0x29634c[_0x386613(0x1b0)]){const _0x4408e5=JSON[_0x386613(0x25e)](_0x29634c['val']);this[_0x386613(0x25d)][_0x386613(0x1ff)]('üï∏Ô∏è\x20Building\x20Topology\x20Matrix...'),sendToPython(this,_0x386613(0x19e),{'sequences':_0x4408e5});}}catch(_0x5d2bdb){this['log']['error'](_0x386613(0x259)+_0x5d2bdb[_0x386613(0x191)]);}}return;}if(this['config'][_0x386613(0x22c)]&&this[_0x386613(0x1c4)]['presenceDevices'][_0x386613(0x137)](_0x5d4570)){await checkWifiPresence(this);return;}const _0x11034e=(this[_0x386613(0x1c4)][_0x386613(0x140)]||[])[_0x386613(0x1e6)](_0x3ad515=>_0x3ad515['id']===_0x5d4570);if(_0x11034e)processSensorEvent(this,_0x5d4570,_0x5eb3c2,_0x11034e);}async['onMessage'](_0x42c0db){const _0x56c477=a0_0x10e4de;if(typeof _0x42c0db==='object'&&_0x42c0db[_0x56c477(0x191)]){if(_0x42c0db[_0x56c477(0x14a)]===_0x56c477(0x18f)){const _0xdfb4fa=_0x42c0db[_0x56c477(0x191)][_0x56c477(0x200)]||this[_0x56c477(0x1c4)][_0x56c477(0x193)];if(!_0xdfb4fa)return this['sendTo'](_0x42c0db[_0x56c477(0x19f)],_0x42c0db[_0x56c477(0x14a)],{'success':![],'message':_0x56c477(0x244)},_0x42c0db['callback']);try{const _0x21b3d9=new GoogleGenerativeAI(_0xdfb4fa),_0x7c7291=_0x21b3d9[_0x56c477(0x1e3)]({'model':GEMINI_MODEL}),_0x4a0f85=await _0x7c7291[_0x56c477(0x1dc)]('Hi');this[_0x56c477(0x14c)](_0x42c0db[_0x56c477(0x19f)],_0x42c0db[_0x56c477(0x14a)],{'success':!![],'message':'OK:\x20'+_0x4a0f85[_0x56c477(0x242)][_0x56c477(0x25c)]()},_0x42c0db[_0x56c477(0x25b)]);}catch(_0x1dfee4){this[_0x56c477(0x14c)](_0x42c0db[_0x56c477(0x19f)],_0x42c0db['command'],{'success':![],'message':_0x56c477(0x1ae)+_0x1dfee4[_0x56c477(0x191)]},_0x42c0db[_0x56c477(0x25b)]);}}else{if(_0x42c0db[_0x56c477(0x14a)]===_0x56c477(0x150)){const _0x6eb379=await getWeatherContext(this),_0x42e36a=await getCalendarContext(this);this[_0x56c477(0x14c)](_0x42c0db[_0x56c477(0x19f)],_0x42c0db[_0x56c477(0x14a)],{'success':!![],'weather':_0x6eb379,'calendar':_0x42e36a},_0x42c0db[_0x56c477(0x25b)]);}else{if(_0x42c0db[_0x56c477(0x14a)]===_0x56c477(0x1e4)){if(!this[_0x56c477(0x181)])return this[_0x56c477(0x14c)](_0x42c0db['from'],_0x42c0db[_0x56c477(0x14a)],{'success':![],'isPro':![]},_0x42c0db['callback']);let _0x22d94f={'status':_0x56c477(0x17a)};try{const _0x386b96=await this[_0x56c477(0x256)](LTM_DP_DRIFT_STATUS);_0x22d94f[_0x56c477(0x1e2)]=_0x386b96?_0x386b96[_0x56c477(0x1b0)]:_0x56c477(0x17a);}catch(_0x13beb8){}this[_0x56c477(0x14c)](_0x42c0db[_0x56c477(0x19f)],_0x42c0db[_0x56c477(0x14a)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x56c477(0x237)],'driftAnalysis':_0x22d94f,'analysisHistory':this[_0x56c477(0x158)]},_0x42c0db[_0x56c477(0x25b)]);}else{if(_0x42c0db[_0x56c477(0x14a)]===_0x56c477(0x13c)){const _0x4db9a7=this[_0x56c477(0x237)][_0x56c477(0x1fc)],_0x201aab=new Date(),_0x507f27=new Date(_0x201aab[_0x56c477(0x18e)](),_0x201aab[_0x56c477(0x253)](),_0x201aab[_0x56c477(0x176)]())[_0x56c477(0x1ec)](),_0x1104b9=this[_0x56c477(0x170)][_0x56c477(0x24f)](_0x47b183=>new Date(_0x47b183['timestamp'])[_0x56c477(0x1ec)]()>_0x507f27)['length'],_0x97f68b=new Array(0x18)[_0x56c477(0x19d)](0x0);this[_0x56c477(0x170)]['forEach'](_0x402d7e=>{const _0x1da687=_0x56c477,_0x1f3399=new Date(_0x402d7e[_0x1da687(0x167)]);if(_0x1f3399[_0x1da687(0x1ec)]()>_0x507f27)_0x97f68b[_0x1f3399[_0x1da687(0x1c9)]()]++;});let _0x5933eb={'status':_0x56c477(0x17a)};try{const _0xa4f3d3=await this[_0x56c477(0x256)](LTM_DP_DRIFT_STATUS);_0x5933eb[_0x56c477(0x1e2)]=_0xa4f3d3?_0xa4f3d3[_0x56c477(0x1b0)]:_0x56c477(0x17a);}catch(_0x1d3490){}let _0x3e585d='';try{const _0x119651=await this[_0x56c477(0x256)](_0x56c477(0x185));_0x3e585d=_0x119651?_0x119651[_0x56c477(0x1b0)]:'';}catch(_0xa38208){}let _0xd5c9ab=null;!this[_0x56c477(0x15d)]&&(_0xd5c9ab=this['config'][_0x56c477(0x193)]?_0x56c477(0x189):'Kein\x20API\x20Key!');let _0x508619={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x395773=await this[_0x56c477(0x256)](_0x56c477(0x18d));if(_0x395773&&_0x395773[_0x56c477(0x1b0)]){_0x508619[_0x56c477(0x257)]=!![];const _0x1285f4=await this[_0x56c477(0x256)]('analysis.automation.description');_0x508619[_0x56c477(0x1b1)]=_0x1285f4?_0x1285f4[_0x56c477(0x1b0)]:'';const _0x2ae86f=await this[_0x56c477(0x256)]('analysis.automation.targetId');_0x508619['targetId']=_0x2ae86f?_0x2ae86f[_0x56c477(0x1b0)]:'';const _0x253884=await this[_0x56c477(0x256)](_0x56c477(0x1c1));_0x508619['targetValue']=_0x253884?_0x253884[_0x56c477(0x1b0)]:'';}const _0x2f4a62=await this[_0x56c477(0x256)]('analysis.automation.autoApply');_0x508619['autoApply']=_0x2f4a62?!!_0x2f4a62['val']:![];}catch(_0x2eb1fe){}this[_0x56c477(0x14c)](_0x42c0db[_0x56c477(0x19f)],_0x42c0db[_0x56c477(0x14a)],{'success':!![],'eventHistory':this[_0x56c477(0x165)]['slice'](0x0,0xf),'stats':{'digestCount':_0x4db9a7,'eventCountToday':_0x1104b9,'hourlyActivity':_0x97f68b,'driftStatus':_0x5933eb[_0x56c477(0x1e2)],'isPresent':this[_0x56c477(0x16d)],'presenceWho':_0x3e585d,'minDays':this[_0x56c477(0x1c4)][_0x56c477(0x133)]||0x7,'stbDays':this[_0x56c477(0x1c4)]['ltmStbWindowDays']||0xe,'ltbDays':this[_0x56c477(0x1c4)][_0x56c477(0x197)]||0x3c,'systemError':_0xd5c9ab},'automation':_0x508619},_0x42c0db[_0x56c477(0x25b)]);}else{if(_0x42c0db[_0x56c477(0x14a)]===_0x56c477(0x174))try{const _0x24f8c1=await scanForDevices(this,_0x42c0db[_0x56c477(0x191)]||{});this[_0x56c477(0x14c)](_0x42c0db['from'],_0x42c0db[_0x56c477(0x14a)],{'success':!![],'devices':_0x24f8c1},_0x42c0db[_0x56c477(0x25b)]);}catch(_0x2fe7d7){this[_0x56c477(0x14c)](_0x42c0db[_0x56c477(0x19f)],_0x42c0db[_0x56c477(0x14a)],{'success':![],'error':_0x2fe7d7[_0x56c477(0x191)]},_0x42c0db['callback']);}else{if(_0x42c0db['command']===_0x56c477(0x160)){const _0x5aa2c1=await this[_0x56c477(0x194)](_0x56c477(0x223),_0x56c477(0x17e)),_0x5bf2a6=[];if(_0x5aa2c1)for(const _0x52f9f5 in _0x5aa2c1){const _0x2e36ea=_0x5aa2c1[_0x52f9f5],_0x4d0315=(_0x2e36ea[_0x56c477(0x147)]&&typeof _0x2e36ea['common'][_0x56c477(0x25f)]===_0x56c477(0x201)?_0x2e36ea[_0x56c477(0x147)][_0x56c477(0x25f)]['de']:_0x2e36ea[_0x56c477(0x147)][_0x56c477(0x25f)])||_0x2e36ea['common'][_0x56c477(0x25f)];_0x5bf2a6[_0x56c477(0x17b)]({'id':_0x52f9f5,'name':_0x4d0315});}const _0x222744=await this['getForeignObjectsAsync']('enum.rooms.*',_0x56c477(0x17e)),_0x580205=[];if(_0x222744)for(const _0x442150 in _0x222744){const _0x1875e2=_0x222744[_0x442150],_0x17c741=(_0x1875e2[_0x56c477(0x147)]&&typeof _0x1875e2[_0x56c477(0x147)][_0x56c477(0x25f)]===_0x56c477(0x201)?_0x1875e2[_0x56c477(0x147)]['name']['de']:_0x1875e2['common'][_0x56c477(0x25f)])||_0x442150[_0x56c477(0x252)]('.')[_0x56c477(0x149)]();_0x580205['push'](_0x17c741);}this[_0x56c477(0x14c)](_0x42c0db[_0x56c477(0x19f)],_0x42c0db['command'],{'success':!![],'enums':_0x5bf2a6,'rooms':_0x580205},_0x42c0db[_0x56c477(0x25b)]);}else{if(_0x42c0db[_0x56c477(0x14a)]===_0x56c477(0x229)){const _0x54b69c=_0x42c0db[_0x56c477(0x191)][_0x56c477(0x164)];if(!_0x54b69c)return this[_0x56c477(0x14c)](_0x42c0db[_0x56c477(0x19f)],_0x42c0db[_0x56c477(0x14a)],{'success':![],'error':_0x56c477(0x15e)},_0x42c0db['callback']);const _0x433fb8=await getCalendarNames(this,_0x54b69c);this['sendTo'](_0x42c0db[_0x56c477(0x19f)],_0x42c0db['command'],{'success':!![],'names':_0x433fb8},_0x42c0db[_0x56c477(0x25b)]);}else{if(_0x42c0db[_0x56c477(0x14a)]===_0x56c477(0x19c)){const {targetId:_0x4902be,targetValue:_0x71a54a}=_0x42c0db[_0x56c477(0x191)];this[_0x56c477(0x25d)][_0x56c477(0x1ff)](_0x56c477(0x23a)+_0x4902be+_0x56c477(0x20d)+_0x71a54a),await this['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0x56c477(0x1e9)](_0x56c477(0x1cb),{'val':_0x56c477(0x1b4)+_0x4902be,'ack':!![]}),await this['setStateAsync']('analysis.automation.targetId',{'val':_0x4902be,'ack':!![]}),await this[_0x56c477(0x1e9)]('analysis.automation.targetValue',{'val':_0x71a54a,'ack':!![]}),this[_0x56c477(0x14c)](_0x42c0db[_0x56c477(0x19f)],_0x42c0db[_0x56c477(0x14a)],{'success':!![]},_0x42c0db[_0x56c477(0x25b)]);}else{if(_0x42c0db[_0x56c477(0x14a)]===_0x56c477(0x1ce)){const {historyId:_0x260ad4,rating:_0x2995a0,comment:_0x5bc2d4,alertReason:_0x3cb5c4}=_0x42c0db[_0x56c477(0x191)];_0x260ad4&&_0x2995a0?(await saveFeedback(this,{'timestamp':Date[_0x56c477(0x1d8)](),'historyId':_0x260ad4,'rating':_0x2995a0,'comment':_0x5bc2d4,'alertReason':_0x3cb5c4}),this[_0x56c477(0x14c)](_0x42c0db['from'],_0x42c0db['command'],{'success':!![]},_0x42c0db[_0x56c477(0x25b)])):this[_0x56c477(0x14c)](_0x42c0db[_0x56c477(0x19f)],_0x42c0db[_0x56c477(0x14a)],{'success':![],'error':_0x56c477(0x1fd)},_0x42c0db[_0x56c477(0x25b)]);}else _0x42c0db[_0x56c477(0x14a)]===_0x56c477(0x227)&&(this[_0x56c477(0x25d)][_0x56c477(0x1ff)]('User\x20dismissed\x20automation\x20proposal.'),await this[_0x56c477(0x1e9)](_0x56c477(0x18d),{'val':![],'ack':!![]}),await this[_0x56c477(0x1e9)](_0x56c477(0x1cb),{'val':'','ack':!![]}),this['sendTo'](_0x42c0db[_0x56c477(0x19f)],_0x42c0db[_0x56c477(0x14a)],{'success':!![]},_0x42c0db[_0x56c477(0x25b)]));}}}}}}}}}}}if(require[a0_0x10e4de(0x1a0)]!==module)module[a0_0x10e4de(0x1d5)]=_0x10a403=>new CogniLiving(_0x10a403);else new CogniLiving();