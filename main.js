const a0_0x13fe7d=a0_0x3613;(function(_0x4aa22e,_0x6314f1){const _0x4558ed=a0_0x3613,_0x330cf4=_0x4aa22e();while(!![]){try{const _0x29bb39=-parseInt(_0x4558ed(0x103))/0x1*(parseInt(_0x4558ed(0x1d4))/0x2)+-parseInt(_0x4558ed(0x1b5))/0x3+-parseInt(_0x4558ed(0x14e))/0x4*(-parseInt(_0x4558ed(0xd5))/0x5)+parseInt(_0x4558ed(0x1ca))/0x6*(-parseInt(_0x4558ed(0x1a2))/0x7)+parseInt(_0x4558ed(0x208))/0x8+-parseInt(_0x4558ed(0x191))/0x9+-parseInt(_0x4558ed(0x136))/0xa*(-parseInt(_0x4558ed(0xda))/0xb);if(_0x29bb39===_0x6314f1)break;else _0x330cf4['push'](_0x330cf4['shift']());}catch(_0x933d2e){_0x330cf4['push'](_0x330cf4['shift']());}}}(a0_0x329f,0x908bb));const a0_0x52884f=(function(){let _0x21ac16=!![];return function(_0x2c4656,_0x389577){const _0x3f5af8=_0x21ac16?function(){const _0x46aa19=a0_0x3613;if(_0x389577){const _0x5c4294=_0x389577[_0x46aa19(0x261)](_0x2c4656,arguments);return _0x389577=null,_0x5c4294;}}:function(){};return _0x21ac16=![],_0x3f5af8;};}()),a0_0x5eebac=a0_0x52884f(this,function(){const _0x9ef56b=a0_0x3613;return a0_0x5eebac['toString']()[_0x9ef56b(0xc1)](_0x9ef56b(0x204))[_0x9ef56b(0x112)]()['constructor'](a0_0x5eebac)[_0x9ef56b(0xc1)](_0x9ef56b(0x204));});a0_0x5eebac();'use strict';const utils=require(a0_0x13fe7d(0x1e4)),{GoogleGenerativeAI}=require(a0_0x13fe7d(0x116)),{spawn}=require('child_process'),path=require(a0_0x13fe7d(0x139)),fs=require('fs'),installer=require('./lib/installer'),scanner=require(a0_0x13fe7d(0x218)),schedulers=require(a0_0x13fe7d(0x181)),topology=require(a0_0x13fe7d(0x171)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x13fe7d(0x1c9),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x13fe7d(0x18a),LTM_DP_DAILY_DIGESTS=a0_0x13fe7d(0x162),LTM_DP_STATUS=a0_0x13fe7d(0xed),LTM_DP_TRIGGER_DIGEST=a0_0x13fe7d(0x15b),LTM_DP_BASELINE_STATUS=a0_0x13fe7d(0xd9),LTM_DP_DRIFT_CHANNEL=a0_0x13fe7d(0x241),LTM_DP_DRIFT_STATUS=a0_0x13fe7d(0xbc),LTM_DP_DRIFT_DETAILS=a0_0x13fe7d(0xdd),LTM_DP_DRIFT_LAST_CHECK=a0_0x13fe7d(0x17b),SYSTEM_DP_MODE=a0_0x13fe7d(0x240),SYSTEM_MODES={'NORMAL':a0_0x13fe7d(0x249),'VACATION':'vacation','PARTY':a0_0x13fe7d(0x1fc),'GUEST':'guest'},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x13fe7d(0xf4)],SYSTEM_MODES[a0_0x13fe7d(0x18c)]],PERSONA_MAPPING={'generic':a0_0x13fe7d(0x263),'senior_aal':a0_0x13fe7d(0xe5),'family':a0_0x13fe7d(0x13f),'single_comfort':a0_0x13fe7d(0xf0),'security':a0_0x13fe7d(0x1b6)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x493d84){const _0x565ce8=a0_0x13fe7d;try{const _0x16d401=['analysis.history_debug_00',_0x565ce8(0x148)];for(const _0x2c7780 of _0x16d401){try{const _0x4389a4=await _0x493d84[_0x565ce8(0x1b7)](_0x2c7780);if(_0x4389a4)await _0x493d84[_0x565ce8(0x247)](_0x2c7780);}catch(_0x525de8){}}}catch(_0x27e36c){}}async function checkLicense(_0x2eedff){return!![];}async function initHistory(_0x542258){const _0x37ada4=a0_0x13fe7d;try{const _0x2be378=await _0x542258['getStateAsync'](_0x37ada4(0x134));_0x2be378&&_0x2be378[_0x37ada4(0x111)]&&(_0x542258[_0x37ada4(0xe3)]=JSON[_0x37ada4(0x120)](_0x2be378['val'][_0x37ada4(0x112)]()));}catch(_0x1a63d9){_0x542258[_0x37ada4(0xe3)]=[];}try{const _0x542476=await _0x542258[_0x37ada4(0xc3)]('analysis.analysisHistory');if(_0x542476&&_0x542476[_0x37ada4(0x111)])_0x542258[_0x37ada4(0x14b)]=JSON[_0x37ada4(0x120)](_0x542476[_0x37ada4(0x111)][_0x37ada4(0x112)]());}catch(_0x333bad){_0x542258[_0x37ada4(0x14b)]=[];}if(_0x542258[_0x37ada4(0xe3)]&&_0x542258[_0x37ada4(0xe3)]['length']>0x0){_0x542258['log'][_0x37ada4(0x1ad)](_0x37ada4(0x22c));for(let _0x3f237b=_0x542258[_0x37ada4(0xe3)][_0x37ada4(0x1a1)]-0x1;_0x3f237b>=0x0;_0x3f237b--){const _0x4189b2=_0x542258[_0x37ada4(0xe3)][_0x3f237b];if(_0x4189b2&&_0x4189b2['id']!==undefined&&_0x4189b2[_0x37ada4(0x1d3)]!==undefined)_0x542258[_0x37ada4(0xfe)][_0x4189b2['id']]=_0x4189b2['value'];}}}function a0_0x3613(_0x2df144,_0x3b609d){const _0x38b73f=a0_0x329f();return a0_0x3613=function(_0x5eebac,_0x52884f){_0x5eebac=_0x5eebac-0xbb;let _0x329f4f=_0x38b73f[_0x5eebac];return _0x329f4f;},a0_0x3613(_0x2df144,_0x3b609d);}async function initSystemConfig(_0x36be3d){const _0x498208=a0_0x13fe7d;try{const _0x38ec56=await _0x36be3d[_0x498208(0x21d)](_0x498208(0xc6));if(_0x38ec56&&_0x38ec56[_0x498208(0x125)])_0x36be3d[_0x498208(0x167)]={'latitude':_0x38ec56[_0x498208(0x125)][_0x498208(0x15c)]||0x0,'longitude':_0x38ec56[_0x498208(0x125)][_0x498208(0x201)]||0x0,'city':_0x38ec56[_0x498208(0x125)][_0x498208(0x100)]||''};}catch(_0x33ef63){}}async function createAllObjects(_0x5b1a59){const _0x178023=a0_0x13fe7d;await _0x5b1a59['extendObjectAsync'](_0x178023(0x256),{'type':_0x178023(0xeb),'common':{'name':_0x178023(0x16e)},'native':{}}),await _0x5b1a59[_0x178023(0x1a9)](SYSTEM_DP_MODE,{'type':_0x178023(0x17d),'common':{'name':_0x178023(0x12b),'type':'string','role':'state','read':!![],'write':!![],'def':SYSTEM_MODES[_0x178023(0x1a3)]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x1c6),{'type':_0x178023(0x17d),'common':{'name':_0x178023(0x1e9),'type':_0x178023(0xc0),'role':_0x178023(0x1dd),'read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x1c5),{'type':'state','common':{'name':'Last\x20raw\x20event','type':_0x178023(0xc0),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)]('events.history',{'type':_0x178023(0x17d),'common':{'name':'Event\x20History','type':_0x178023(0xc0),'role':_0x178023(0x199),'read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x1a9)](_0x178023(0x24e),{'type':_0x178023(0xeb),'common':{'name':_0x178023(0xe9)},'native':{}}),await _0x5b1a59['setObjectNotExistsAsync'](_0x178023(0x1fd),{'type':_0x178023(0x17d),'common':{'name':_0x178023(0xdc),'type':'boolean','role':_0x178023(0x25f),'read':!![],'write':!![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x185),{'type':_0x178023(0x17d),'common':{'name':'Train\x20Health','type':_0x178023(0x13a),'role':_0x178023(0x25f),'read':!![],'write':!![]},'native':{}}),await _0x5b1a59['setObjectNotExistsAsync'](_0x178023(0x1ed),{'type':_0x178023(0x17d),'common':{'name':'Train\x20Energy','type':_0x178023(0x13a),'role':_0x178023(0x25f),'read':!![],'write':!![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x193),{'type':'state','common':{'name':_0x178023(0x23b),'type':_0x178023(0x13a),'role':_0x178023(0x25f),'read':!![],'write':!![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x239),{'type':'state','common':{'name':_0x178023(0x228),'type':_0x178023(0x13a),'role':_0x178023(0x25f),'read':!![],'write':!![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x1b9),{'type':'state','common':{'name':'Training\x20Status','type':_0x178023(0xc0),'role':'text','read':!![],'write':![]},'native':{}}),await _0x5b1a59['extendObjectAsync']('analysis.security',{'type':_0x178023(0xeb),'common':{'name':_0x178023(0x11f)},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x223),{'type':'state','common':{'name':_0x178023(0x202),'type':_0x178023(0x18e),'role':_0x178023(0x1d3),'read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x150),{'type':_0x178023(0x17d),'common':{'name':_0x178023(0x14c),'type':'number','role':'value','read':!![],'write':![],'def':0.05},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x1a4),{'type':'state','common':{'name':_0x178023(0x1c7),'type':_0x178023(0xc0),'role':_0x178023(0xdf),'read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x1a9)](_0x178023(0x230),{'type':_0x178023(0xeb),'common':{'name':'Graph\x20Topology'},'native':{}}),await _0x5b1a59[_0x178023(0x18f)]('analysis.topology.structure',{'type':_0x178023(0x17d),'common':{'name':_0x178023(0x164),'type':'string','role':_0x178023(0x199),'read':!![],'write':![],'def':_0x178023(0x1ba)},'native':{}}),await _0x5b1a59[_0x178023(0x18f)]('analysis.security.topologyMatrix',{'type':'state','common':{'name':_0x178023(0x21a),'type':_0x178023(0xc0),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x1a9)](_0x178023(0x16f),{'type':'channel','common':{'name':'Health\x20Analysis'},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x114),{'type':_0x178023(0x17d),'common':{'name':'Last\x20Check','type':_0x178023(0xc0),'role':'date','read':!![],'write':![]},'native':{}}),await _0x5b1a59['setObjectNotExistsAsync'](_0x178023(0x21e),{'type':_0x178023(0x17d),'common':{'name':_0x178023(0xf3),'type':_0x178023(0x13a),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x126),{'type':_0x178023(0x17d),'common':{'name':_0x178023(0x1a7),'type':_0x178023(0xc0),'role':'text','read':!![],'write':![]},'native':{}}),await _0x5b1a59['setObjectNotExistsAsync']('analysis.health.trendValue',{'type':'state','common':{'name':_0x178023(0x1e0),'type':_0x178023(0x18e),'role':_0x178023(0x1d3),'read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)]('analysis.health.todayVector',{'type':_0x178023(0x17d),'common':{'name':_0x178023(0xd4),'type':_0x178023(0xc0),'role':_0x178023(0x199),'read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)]('analysis.health.gaitSpeed',{'type':_0x178023(0x17d),'common':{'name':_0x178023(0x13e),'type':'number','role':_0x178023(0x1d3),'read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x1a9)]('analysis.energy',{'type':_0x178023(0xeb),'common':{'name':_0x178023(0x192)},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x23d),{'type':_0x178023(0x17d),'common':{'name':_0x178023(0x24f),'type':_0x178023(0xc0),'role':_0x178023(0x1dd),'read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x20d),{'type':_0x178023(0x17d),'common':{'name':_0x178023(0x20a),'type':_0x178023(0xc0),'role':'text','read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x101),{'type':_0x178023(0x17d),'common':{'name':_0x178023(0xf1),'type':_0x178023(0xc0),'role':_0x178023(0x199),'read':!![],'write':![]},'native':{}}),await _0x5b1a59['extendObjectAsync']('LTM',{'type':_0x178023(0xeb),'common':{'name':'LTM'},'native':{}}),await _0x5b1a59[_0x178023(0x1a9)](LTM_DP_RAW_LOG,{'type':'state','common':{'name':'Raw\x20Log','type':_0x178023(0xc0),'role':_0x178023(0x199),'read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x1a9)](LTM_DP_DAILY_DIGESTS,{'type':_0x178023(0x17d),'common':{'name':'Daily\x20Digests','type':_0x178023(0xc0),'role':_0x178023(0x199),'read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x10d),{'type':_0x178023(0x17d),'common':{'name':_0x178023(0xd7),'type':_0x178023(0xc0),'role':_0x178023(0x199),'read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)]('LTM.trainingData.thermodynamics',{'type':_0x178023(0x17d),'common':{'name':'Thermodynamics','type':_0x178023(0xc0),'role':_0x178023(0x199),'read':!![],'write':![]},'native':{}}),await _0x5b1a59['setObjectNotExistsAsync'](_0x178023(0x19a),{'type':_0x178023(0x17d),'common':{'name':_0x178023(0x10b),'type':_0x178023(0x13a),'role':_0x178023(0x25f),'read':!![],'write':!![]},'native':{}}),await _0x5b1a59['setObjectNotExistsAsync'](_0x178023(0x13b),{'type':'state','common':{'name':_0x178023(0x1e6),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x5b1a59['setObjectNotExistsAsync']('analysis.isAlert',{'type':'state','common':{'name':_0x178023(0x25e),'type':'boolean','role':'indicator.alarm','read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x1eb),{'type':_0x178023(0x17d),'common':{'name':_0x178023(0xc2),'type':'string','role':'text.alarm','read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0xd0),{'type':_0x178023(0x17d),'common':{'name':'Activity\x20Summary','type':_0x178023(0xc0),'role':'text','read':!![],'write':![]},'native':{}}),await _0x5b1a59['setObjectNotExistsAsync'](_0x178023(0xe2),{'type':'state','common':{'name':_0x178023(0x1cc),'type':_0x178023(0x13a),'role':_0x178023(0x1be),'read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x158),{'type':_0x178023(0x17d),'common':{'name':'Description','type':_0x178023(0xc0),'role':_0x178023(0x1dd),'read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x233),{'type':_0x178023(0x17d),'common':{'name':_0x178023(0x188),'type':_0x178023(0xc0),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0xfa),{'type':_0x178023(0x17d),'common':{'name':'Target\x20ID','type':_0x178023(0xc0),'role':_0x178023(0x1dd),'read':!![],'write':![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x1b1),{'type':'state','common':{'name':_0x178023(0xce),'type':'string','role':_0x178023(0x1dd),'read':!![],'write':![]},'native':{}}),await _0x5b1a59['setObjectNotExistsAsync'](_0x178023(0x127),{'type':_0x178023(0x17d),'common':{'name':_0x178023(0xe0),'type':_0x178023(0x13a),'role':_0x178023(0x1d8),'read':!![],'write':!![]},'native':{}}),await _0x5b1a59[_0x178023(0x18f)](_0x178023(0x206),{'type':_0x178023(0x17d),'common':{'name':_0x178023(0x23a),'type':_0x178023(0x13a),'role':_0x178023(0x25f),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x345635){const _0x52863e=a0_0x13fe7d;try{const _0x4a26c2=await _0x345635[_0x52863e(0xc3)](SYSTEM_DP_MODE);_0x4a26c2&&_0x4a26c2[_0x52863e(0x111)]&&Object[_0x52863e(0x182)](SYSTEM_MODES)[_0x52863e(0x144)](_0x4a26c2[_0x52863e(0x111)])?_0x345635[_0x52863e(0x237)]=_0x4a26c2[_0x52863e(0x111)]:(_0x345635[_0x52863e(0x237)]=SYSTEM_MODES[_0x52863e(0x1a3)],await _0x345635[_0x52863e(0x1ce)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x52863e(0x1a3)],'ack':!![]}));}catch(_0x4632f5){_0x345635['currentSystemMode']=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0x5b7be7){const _0x234ef4=a0_0x13fe7d;try{const _0x8a381b=await _0x5b7be7[_0x234ef4(0xc3)](LTM_DP_RAW_LOG);if(_0x8a381b&&_0x8a381b[_0x234ef4(0x111)])_0x5b7be7[_0x234ef4(0x255)]=JSON[_0x234ef4(0x120)](_0x8a381b['val']);}catch(_0x802b5b){_0x5b7be7[_0x234ef4(0x255)]=[];}}async function saveRawEventLog(_0x3175db){const _0x283115=a0_0x13fe7d;if(_0x3175db[_0x283115(0x255)][_0x283115(0x1a1)]>RAW_LOG_MAX_SIZE)_0x3175db['rawEventLog'][_0x283115(0x122)](0x0,_0x3175db[_0x283115(0x255)][_0x283115(0x1a1)]-RAW_LOG_MAX_SIZE);await _0x3175db[_0x283115(0x1ce)](LTM_DP_RAW_LOG,{'val':JSON[_0x283115(0x113)](_0x3175db[_0x283115(0x255)]),'ack':!![]});}async function loadDailyDigests(_0xd3cba){const _0x176b99=a0_0x13fe7d;try{const _0x8400bf=await _0xd3cba[_0x176b99(0xc3)](LTM_DP_DAILY_DIGESTS);if(_0x8400bf&&_0x8400bf['val'])_0xd3cba[_0x176b99(0x1d2)]=JSON[_0x176b99(0x120)](_0x8400bf[_0x176b99(0x111)]);}catch(_0x23278d){_0xd3cba['dailyDigests']=[];}await updateBaselineStatus(_0xd3cba);}async function saveDailyDigests(_0x19d474,_0x115b62=!![]){const _0x33c4bb=a0_0x13fe7d,_0x13cc49=_0x19d474['config'][_0x33c4bb(0x129)]||0x3c;_0x19d474[_0x33c4bb(0x1d2)]['length']>_0x13cc49&&_0x19d474[_0x33c4bb(0x1d2)]['splice'](0x0,_0x19d474['dailyDigests']['length']-_0x13cc49);await _0x19d474['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x33c4bb(0x113)](_0x19d474[_0x33c4bb(0x1d2)]),'ack':!![]});if(_0x115b62)await updateBaselineStatus(_0x19d474);}async function updateAnalysisHistory(_0x1807ac,_0xe4a919){const _0x42db58=a0_0x13fe7d;_0x1807ac[_0x42db58(0x14b)]['unshift'](_0xe4a919);if(_0x1807ac[_0x42db58(0x14b)]['length']>HISTORY_MAX_SIZE)_0x1807ac[_0x42db58(0x14b)][_0x42db58(0xbb)]();await _0x1807ac[_0x42db58(0x1ce)](_0x42db58(0x245),{'val':JSON[_0x42db58(0x113)](_0x1807ac[_0x42db58(0x14b)]),'ack':!![]});}async function updateBaselineStatus(_0x171972){const _0x2085f5=a0_0x13fe7d;if(!_0x171972[_0x2085f5(0xfd)]){await _0x171972[_0x2085f5(0x1ce)](LTM_DP_BASELINE_STATUS,{'val':_0x2085f5(0x219),'ack':!![]});return;}const _0x4a3cc2=_0x171972['dailyDigests']['length']>=(_0x171972['config'][_0x2085f5(0x1ff)]||0x7)?_0x2085f5(0x189)+_0x171972['dailyDigests'][_0x2085f5(0x1a1)]+_0x2085f5(0x231):_0x2085f5(0x17a)+_0x171972[_0x2085f5(0x1d2)][_0x2085f5(0x1a1)]+'/'+(_0x171972[_0x2085f5(0x16a)][_0x2085f5(0x1ff)]||0x7)+')';await _0x171972[_0x2085f5(0x1ce)](LTM_DP_BASELINE_STATUS,{'val':_0x4a3cc2,'ack':!![]});}async function initSensorSubscriptions(_0x3c93c6){const _0x356baa=_0x3c93c6['config']['devices'];if(_0x356baa)for(const _0x5227fd of _0x356baa){await _0x3c93c6['subscribeForeignStatesAsync'](_0x5227fd['id']);}}async function initPresenceSubscriptions(_0xbc5dd9){const _0x1c41d8=a0_0x13fe7d,_0x472faa=_0xbc5dd9[_0x1c41d8(0x16a)][_0x1c41d8(0xea)];if(_0x472faa)for(const _0x135b4d of _0x472faa){await _0xbc5dd9[_0x1c41d8(0x25c)](_0x135b4d);}}async function setupTelegramListener(_0x5cab3e){const _0x290e8e=a0_0x13fe7d,_0x405cba=_0x5cab3e['config'][_0x290e8e(0x1b3)];if(_0x5cab3e[_0x290e8e(0x16a)][_0x290e8e(0x260)]&&_0x405cba)await _0x5cab3e[_0x290e8e(0x25c)](_0x405cba+_0x290e8e(0x132));}async function checkWifiPresence(_0x54f188){const _0x4311ee=a0_0x13fe7d;try{const _0x8f77ae=_0x54f188[_0x4311ee(0x16a)][_0x4311ee(0xea)]||[];let _0xacfe2f=![];const _0x1db037=[];for(const _0x1057c6 of _0x8f77ae){try{const _0x172e34=await _0x54f188[_0x4311ee(0xbd)](_0x1057c6);_0x172e34&&(_0x172e34['val']===!![]||_0x172e34[_0x4311ee(0x111)]==='online'||_0x172e34['val']===0x1)&&(_0xacfe2f=!![],_0x1db037['push'](_0x1057c6));}catch(_0xaaf2a5){}}return await _0x54f188['setStateAsync'](_0x4311ee(0x1c6),{'val':_0x1db037[_0x4311ee(0x253)](',\x20'),'ack':!![]}),_0xacfe2f&&(_0x54f188[_0x4311ee(0x20f)]&&(_0x54f188[_0x4311ee(0x102)][_0x4311ee(0x1ad)](_0x4311ee(0x252)),abortExitTimer(_0x54f188)),!_0x54f188[_0x4311ee(0x23f)]&&_0x54f188['currentSystemMode']===SYSTEM_MODES[_0x4311ee(0x1a3)]&&await setPresence(_0x54f188,!![])),_0xacfe2f;}catch(_0x19116c){return![];}}function startExitTimer(_0x3f2417){const _0x12aece=a0_0x13fe7d;abortExitTimer(_0x3f2417),_0x3f2417[_0x12aece(0x105)]=!![],_0x3f2417[_0x12aece(0x159)]=setTimeout(()=>{const _0x1a3f5e=_0x12aece;_0x3f2417[_0x1a3f5e(0x105)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x3f2417[_0x12aece(0x20f)]=setTimeout(()=>{const _0x43533e=_0x12aece;setPresence(_0x3f2417,![]),_0x3f2417[_0x43533e(0x20f)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x11ee8c){const _0x39c2f5=a0_0x13fe7d;if(_0x11ee8c[_0x39c2f5(0x20f)])clearTimeout(_0x11ee8c[_0x39c2f5(0x20f)]);if(_0x11ee8c[_0x39c2f5(0x159)])clearTimeout(_0x11ee8c[_0x39c2f5(0x159)]);_0x11ee8c[_0x39c2f5(0x20f)]=null,_0x11ee8c[_0x39c2f5(0x159)]=null,_0x11ee8c[_0x39c2f5(0x105)]=![];}async function setPresence(_0x1f3ea3,_0x359972){const _0x4646b8=a0_0x13fe7d;if(_0x1f3ea3[_0x4646b8(0x23f)]===_0x359972)return;_0x1f3ea3[_0x4646b8(0x23f)]=_0x359972,await _0x1f3ea3['setStateAsync'](_0x4646b8(0x22e),{'val':_0x359972,'ack':!![]});}async function executeAutomationAction(_0xeccd00){const _0x2ef508=a0_0x13fe7d;try{const _0x4a1318=await _0xeccd00['getStateAsync']('analysis.automation.targetId'),_0x23061c=await _0xeccd00[_0x2ef508(0xc3)](_0x2ef508(0x1b1));if(_0x4a1318&&_0x4a1318[_0x2ef508(0x111)]&&_0x23061c){const _0x729116=_0x4a1318[_0x2ef508(0x111)];let _0x5e784c=_0x23061c[_0x2ef508(0x111)];try{_0x5e784c=JSON['parse'](_0x5e784c);}catch(_0x5de138){}_0xeccd00[_0x2ef508(0x102)]['info'](_0x2ef508(0x1e1)+_0x729116+_0x2ef508(0x11a)+_0x5e784c),await _0xeccd00[_0x2ef508(0xca)](_0x729116,_0x5e784c);}else _0xeccd00['log'][_0x2ef508(0x211)](_0x2ef508(0x186));}catch(_0x79ec84){_0xeccd00[_0x2ef508(0x102)][_0x2ef508(0x180)]('BUTLER\x20Execution\x20Error:\x20'+_0x79ec84[_0x2ef508(0x215)]);}}async function processSensorEvent(_0x4c7d21,_0x4005db,_0x24837f,_0x5b5cb5){const _0x2a7aee=a0_0x13fe7d;if(!_0x5b5cb5)return;const _0x99d25f=_0x24837f[_0x2a7aee(0x111)],_0x334124=Date[_0x2a7aee(0x1b4)](),_0x4f9d42=_0x4c7d21[_0x2a7aee(0xfe)][_0x4005db];_0x4c7d21[_0x2a7aee(0xfe)][_0x4005db]=_0x99d25f;if(!_0x5b5cb5['logDuplicates']&&_0x4f9d42!=undefined&&_0x4f9d42==_0x99d25f)return;const _0x5de5bb=(_0x5b5cb5[_0x2a7aee(0xe8)]||'')[_0x2a7aee(0xdb)](),_0x287299=_0x5de5bb['includes'](_0x2a7aee(0xfb))||_0x5de5bb[_0x2a7aee(0x144)]('temperatur')||_0x5de5bb[_0x2a7aee(0x144)](_0x2a7aee(0x173))||_0x5de5bb[_0x2a7aee(0x144)](_0x2a7aee(0xd1));_0x4c7d21[_0x2a7aee(0xfd)]&&_0x287299&&recordThermodynamics(_0x4c7d21,_0x4005db,_0x99d25f,_0x5b5cb5['location']);const _0x9f8284={'timestamp':_0x334124,'id':_0x4005db,'name':_0x5b5cb5[_0x2a7aee(0x1a6)],'type':_0x5b5cb5[_0x2a7aee(0xe8)],'location':_0x5b5cb5['location'],'value':_0x99d25f};_0x4c7d21['eventHistory']['unshift'](_0x9f8284);if(_0x4c7d21[_0x2a7aee(0xe3)][_0x2a7aee(0x1a1)]>HISTORY_MAX_SIZE)_0x4c7d21[_0x2a7aee(0xe3)][_0x2a7aee(0xbb)]();await _0x4c7d21[_0x2a7aee(0x1ce)](_0x2a7aee(0x1c5),{'val':JSON[_0x2a7aee(0x113)](_0x9f8284),'ack':!![]}),await _0x4c7d21[_0x2a7aee(0x1ce)](_0x2a7aee(0x134),{'val':JSON['stringify'](_0x4c7d21[_0x2a7aee(0xe3)]),'ack':!![]});_0x4c7d21[_0x2a7aee(0xfd)]&&(_0x4c7d21[_0x2a7aee(0x255)][_0x2a7aee(0xd6)](_0x9f8284),await saveRawEventLog(_0x4c7d21),recordSequence(_0x4c7d21,_0x9f8284));if(_0x5b5cb5[_0x2a7aee(0x119)]&&_0x99d25f===!![]){if(_0x4c7d21[_0x2a7aee(0x23f)]&&!_0x4c7d21['isGracePeriodActive'])startExitTimer(_0x4c7d21);else{if(!_0x4c7d21['isPresent'])setPresence(_0x4c7d21,!![]);}}else{if(_0x5b5cb5[_0x2a7aee(0xe8)]==='motion'&&_0x99d25f===!![]){if(_0x4c7d21[_0x2a7aee(0x20f)])abortExitTimer(_0x4c7d21);if(!_0x4c7d21[_0x2a7aee(0x23f)]&&_0x4c7d21[_0x2a7aee(0x237)]===SYSTEM_MODES['NORMAL'])setPresence(_0x4c7d21,!![]);}}}async function recordThermodynamics(_0x12e899,_0x3aacb5,_0xe1552a,_0x4cdd3f){const _0x218488=a0_0x13fe7d,_0x37f950=await getOutsideTemperatureNumeric(_0x12e899),_0x415dc3=await _0x12e899['getStateAsync']('LTM.trainingData.thermodynamics');let _0x2661ed=[];if(_0x415dc3&&_0x415dc3['val'])try{_0x2661ed=JSON['parse'](_0x415dc3[_0x218488(0x111)]);}catch(_0x40a024){}_0x2661ed[_0x218488(0xd6)]({'ts':Date[_0x218488(0x1b4)](),'room':_0x4cdd3f||_0x218488(0x140),'t_in':_0xe1552a,'t_out':_0x37f950});if(_0x2661ed[_0x218488(0x1a1)]>THERMO_LOG_SIZE)_0x2661ed[_0x218488(0x1d5)]();await _0x12e899[_0x218488(0x1ce)](_0x218488(0x12a),{'val':JSON[_0x218488(0x113)](_0x2661ed),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x139cfb){const _0x439677=a0_0x13fe7d;if(_0x139cfb['config'][_0x439677(0x1d0)])try{const _0x212a30=await _0x139cfb[_0x439677(0xbd)](_0x139cfb[_0x439677(0x16a)][_0x439677(0x1d0)]);if(_0x212a30&&_0x212a30[_0x439677(0x111)]!==undefined&&_0x212a30[_0x439677(0x111)]!==null)return parseFloat(_0x212a30[_0x439677(0x111)]);}catch(_0x3ad17a){}const _0x39947a=_0x139cfb[_0x439677(0x16a)]['weatherInstance'];if(!_0x139cfb['config'][_0x439677(0x20b)]||!_0x39947a)return null;try{let _0x47a169='';if(_0x39947a[_0x439677(0x144)](_0x439677(0x25a)))_0x47a169=_0x39947a+_0x439677(0x11e);else{if(_0x39947a[_0x439677(0x144)]('daswetter'))_0x47a169=_0x39947a+_0x439677(0x234);else{if(_0x39947a[_0x439677(0x144)](_0x439677(0x1f0)))_0x47a169=_0x39947a+_0x439677(0x178);else{if(_0x39947a[_0x439677(0x144)]('weatherunderground'))_0x47a169=_0x39947a+_0x439677(0x226);}}}if(_0x47a169){const _0xdb5cbb=await _0x139cfb['getForeignStateAsync'](_0x47a169);if(_0xdb5cbb&&_0xdb5cbb[_0x439677(0x111)]!==undefined&&_0xdb5cbb[_0x439677(0x111)]!==null)return parseFloat(_0xdb5cbb[_0x439677(0x111)]);}}catch(_0x53a628){}return null;}async function recordSequence(_0xb52e4c,_0x57aca0){const _0x5914fa=a0_0x13fe7d,_0x423ba2=(_0x57aca0[_0x5914fa(0xe8)]||'')[_0x5914fa(0xdb)](),_0x167fc8=[_0x5914fa(0x153),_0x5914fa(0x1f9),'pr√§senz',_0x5914fa(0x190),'occupancy',_0x5914fa(0x157),'t√ºr',_0x5914fa(0xf7),_0x5914fa(0x1ac),_0x5914fa(0xf6),_0x5914fa(0x12e),'light',_0x5914fa(0x1cb),_0x5914fa(0x1d8),'schalter',_0x5914fa(0xff),_0x5914fa(0x161)];if(!_0x167fc8[_0x5914fa(0xee)](_0x53eabc=>_0x423ba2[_0x5914fa(0x144)](_0x53eabc)))return;if(!_0x57aca0[_0x5914fa(0x1d3)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x5914fa(0xd6)]({'loc':_0x57aca0['location']||_0x5914fa(0x140),'id':_0x57aca0['id'],'ts':Date[_0x5914fa(0x1b4)]()}),sequenceTimer=setTimeout(async()=>{const _0x2c2bbe=_0x5914fa;if(activeSequence[_0x2c2bbe(0x1a1)]>0x1)await saveCompletedSequence(_0xb52e4c);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x397f24){const _0xc7cdfc=a0_0x13fe7d;try{const _0x2135a2=await _0x397f24['getStateAsync'](_0xc7cdfc(0x10d));let _0x58dfd6=[];if(_0x2135a2&&_0x2135a2[_0xc7cdfc(0x111)])try{_0x58dfd6=JSON[_0xc7cdfc(0x120)](_0x2135a2[_0xc7cdfc(0x111)]);}catch(_0x2c3ea6){}const _0x2ae4a5=activeSequence[0x0]['ts'],_0x58b8ba=activeSequence[_0xc7cdfc(0x194)](_0x5d5143=>({'loc':_0x5d5143['loc'],'t_delta':Math['round']((_0x5d5143['ts']-_0x2ae4a5)/0x3e8)})),_0x511d4a={'timestamp':new Date(_0x2ae4a5)[_0xc7cdfc(0x13d)](),'steps':_0x58b8ba,'duration':Math[_0xc7cdfc(0xde)]((activeSequence[activeSequence[_0xc7cdfc(0x1a1)]-0x1]['ts']-_0x2ae4a5)/0x3e8),'daytime':new Date(_0x2ae4a5)[_0xc7cdfc(0x12c)]()};_0x58dfd6[_0xc7cdfc(0xd6)](_0x511d4a);if(_0x58dfd6[_0xc7cdfc(0x1a1)]>MAX_TRAINING_SET_SIZE)_0x58dfd6[_0xc7cdfc(0x1d5)]();await _0x397f24[_0xc7cdfc(0x1ce)](_0xc7cdfc(0x10d),{'val':JSON[_0xc7cdfc(0x113)](_0x58dfd6),'ack':!![]}),runSecurityCheck(_0x397f24,_0x511d4a);}catch(_0x17e964){_0x397f24[_0xc7cdfc(0x102)][_0xc7cdfc(0x180)]('[RECORDER]\x20Error:\x20'+_0x17e964[_0xc7cdfc(0x215)]);}}function runSecurityCheck(_0x421c87,_0x13a651){const _0x50ba47=a0_0x13fe7d;if(!_0x421c87['isProVersion'])return;sendToPython(_0x421c87,_0x50ba47(0x22d),{'sequence':_0x13a651});}async function createDailyDigest(_0x24657a){const _0x204c76=a0_0x13fe7d;if(!_0x24657a['isProVersion'])return;await _0x24657a[_0x204c76(0x1ce)](LTM_DP_STATUS,{'val':_0x204c76(0x242),'ack':!![]});if(!_0x24657a[_0x204c76(0x225)]||_0x24657a['rawEventLog'][_0x204c76(0x1a1)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x24657a[_0x204c76(0x1ce)](LTM_DP_STATUS,{'val':_0x204c76(0x24a),'ack':!![]});return;}const _0x5af9fa=JSON[_0x204c76(0x120)](JSON[_0x204c76(0x113)](_0x24657a['rawEventLog'])),_0x5e2907=_0x5af9fa[_0x204c76(0x1a1)],_0x714e4='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON['stringify'](_0x5af9fa);try{const _0x62ab3f=await _0x24657a[_0x204c76(0x225)][_0x204c76(0x246)](_0x714e4),_0xa966d1=JSON[_0x204c76(0x120)](_0x62ab3f['response'][_0x204c76(0x1dd)]()[_0x204c76(0xbe)](/```json|```/g,'')[_0x204c76(0x11d)]()),_0xa4a29f={'timestamp':new Date()[_0x204c76(0x13d)](),'eventCount':_0x5e2907,'summary':_0xa966d1[_0x204c76(0x1e2)]||'Digest','activityLevel':_0xa966d1[_0x204c76(0x19d)]||_0x204c76(0x249),'systemMode':_0x24657a[_0x204c76(0x237)]};_0x24657a[_0x204c76(0x1d2)][_0x204c76(0xd6)](_0xa4a29f),await saveDailyDigests(_0x24657a),_0x24657a['rawEventLog']=[],await saveRawEventLog(_0x24657a),await _0x24657a[_0x204c76(0x1ce)](LTM_DP_STATUS,{'val':_0x204c76(0x130),'ack':!![]});if(_0x24657a[_0x204c76(0xfd)])sendToPython(_0x24657a,_0x204c76(0x21b),{'digest':_0xa4a29f});}catch(_0x5737db){_0x24657a[_0x204c76(0x102)]['error'](_0x5737db[_0x204c76(0x215)]);}}async function runBaselineDriftAnalysis(_0x186602){const _0x58fd13=a0_0x13fe7d;if(!_0x186602[_0x58fd13(0xfd)]||!_0x186602[_0x58fd13(0x225)])return;const _0x553f6a=_0x186602[_0x58fd13(0x16a)]['ltmStbWindowDays']||0xe;if(_0x186602[_0x58fd13(0x1d2)][_0x58fd13(0x1a1)]<_0x553f6a+0x7){await _0x186602[_0x58fd13(0x1ce)](LTM_DP_DRIFT_STATUS,{'val':_0x58fd13(0x1ee),'ack':!![]});return;}const _0x467131=_0x186602[_0x58fd13(0x1d2)]['slice'](-_0x553f6a),_0x9f2e98=_0x186602[_0x58fd13(0x1d2)]['slice'](0x0,_0x186602[_0x58fd13(0x1d2)][_0x58fd13(0x1a1)]-_0x553f6a),_0x3e3992=_0x58fd13(0x19b)+JSON[_0x58fd13(0x113)](_0x9f2e98)+_0x58fd13(0x210)+JSON[_0x58fd13(0x113)](_0x467131);try{const _0x4e1eb1=await _0x186602[_0x58fd13(0x225)][_0x58fd13(0x246)](_0x3e3992),_0x41d8c7=JSON[_0x58fd13(0x120)](_0x4e1eb1[_0x58fd13(0x19e)][_0x58fd13(0x1dd)]()['replace'](/```json|```/g,'')[_0x58fd13(0x11d)]());_0x41d8c7[_0x58fd13(0x149)]&&(await _0x186602[_0x58fd13(0x1ce)](LTM_DP_DRIFT_STATUS,{'val':_0x41d8c7[_0x58fd13(0x149)],'ack':!![]}),await _0x186602['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0x41d8c7[_0x58fd13(0x217)],'ack':!![]}),await _0x186602[_0x58fd13(0x1ce)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0x54c235){}}async function sendMorningBriefing(_0x417845){const _0x277233=a0_0x13fe7d;if(!_0x417845[_0x277233(0x225)])return;try{const _0x2e8d80=_0x277233(0x1c1),_0x16a943=await _0x417845[_0x277233(0x225)]['generateContent'](_0x2e8d80),_0x5a01ef=_0x16a943[_0x277233(0x19e)][_0x277233(0x1dd)]();sendNotification(_0x417845,_0x277233(0x175)+_0x5a01ef);}catch(_0x5e62eb){_0x417845[_0x277233(0x102)][_0x277233(0x180)]('Briefing\x20Error:\x20'+_0x5e62eb['message']);}}function stopPythonService(_0x54cb6e){const _0x477d4b=a0_0x13fe7d;if(_0x54cb6e['pythonProcess']){try{_0x54cb6e[_0x477d4b(0x23e)]['kill']();}catch(_0xd712dc){}_0x54cb6e[_0x477d4b(0x23e)]=null;}}function a0_0x329f(){const _0x25b34b=['analysis.health.gaitSpeed','ANALYZE_TREND','error','./lib/scheduler','values','getGenerativeModel','.\x20EVENTS:\x20','analysis.training.triggerHealth','ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','TRAIN_SECURITY','Detected\x20Patterns','Aktiv\x20(','LTM.rawEventLog','updateTopologyMatrix','GUEST','substring','number','setObjectNotExistsAsync','presence','235071VUxCfR','Energy\x20Intelligence','analysis.training.triggerComfort','map','communicate.request','subscribeStates','Keine\x20Details.','dependencyInstallInProgress','json','analysis.trigger','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','briefingJob','activityLevel','response','ü§ñ\x20Autopilot:\x20Running\x20periodic\x20analysis...','slice','length','224182rcwiaq','NORMAL','analysis.security.lastCheck','description','name','Trend','ltmStbWindowDays','extendObjectAsync','Activity-Level','enum','fenster','info','VACATION','submitFeedback','üß™\x20Simulating\x20Butler\x20Proposal:\x20','analysis.automation.targetValue','heating','notifyTelegramInstance','now','820950uurVkE','PRIORIT√ÑT:\x20Sicherheit.','getObjectAsync','split','analysis.training.status','{\x22rooms\x22:[],\x20\x22matrix\x22:[]}','analysis.health.trendValue','onReady','üï∏Ô∏è\x20Manually\x20triggering\x20Topology\x20Update...','indicator','setupLtmScheduler','isEmergency','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','stdin','‚ö†Ô∏è\x20ALARM:\x20','forEach','events.lastEvent','system.presenceWho','Last\x20Check','TREND_RESULT','models/gemini-flash-latest','18xyMGmN','licht','Pattern\x20Detected','confidence','setStateAsync','setupBriefingScheduler','outdoorSensorId','writable','dailyDigests','value','451258ABSNPw','shift','Regel\x20erkannt:\x20','cogni-living\x20adapter\x20starting\x20(v','switch','üõãÔ∏è\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','scanDevices','onMessage','timestamp','text','getTime','[RESULT]','Trend\x20Value','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','summary','Error\x20launching\x20Python:\x20','@iobroker/adapter-core','lastAlertState','Trigger\x20Briefing','üï∏Ô∏è\x20Topology\x20Map\x20updated\x20by\x20Python.','details','Who\x20is\x20present?','keys','analysis.alertReason','automation.triggerAction','analysis.training.triggerEnergy','N/A\x20(Learning)','setHours','openweathermap','dismissAutomation','licenseKey','getMonth','data','cancel','Sec-Training\x20started...','namespace','genAI','bewegung','aiPersona','python3','party','analysis.training.triggerSecurity','isAlert','minDaysForBaseline','Keine\x20Termine.','longitude','Anomaly\x20Score','Adapter','(((.+)+)+)+$','setupModeResetScheduler','analysis.automation.triggerAction','toLocaleTimeString','6770720eYxfvr','version','Heating\x20Score','useWeather','getMinutes','analysis.energy.heatingScore','N/A','exitTimer','\x0aSTB:\x20','warn','SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20','filter','callback','message','triggerBriefing','driftDetails','./lib/scanner','Deaktiviert\x20(Pro-Feature)','Topology\x20Matrix\x20(Legacy)','ANALYZE_HEALTH','toFixed','getForeignObjectAsync','analysis.health.isAnomaly','Keine\x20Wetterdaten\x20verf√ºgbar.','stateChange','location','Topology\x20Update\x20Error:\x20','analysis.security.lastScore','reason','geminiModel','.forecast.current.temp','endsWith','Build\x20Topology','generic','üöÄ\x20Starting\x20NUUKANNI\x20Logic\x20(v0.14.0)...','scanForDevices','Restoring\x20sensor\x20cache...','ANALYZE_SEQUENCE','system.isPresent','service.py','analysis.topology','\x20Tage)','ENERGY_TRAIN_RESULT','analysis.automation.detectedPatterns','.NextHours.Location_1.Day_1.current.temp_value','threshold','\x20new\x20patterns.','currentSystemMode','HEALTH_RESULT','analysis.training.triggerTopology','Trigger\x20Action','Train\x20Comfort','python_service','analysis.energy.insulationScore','pythonProcess','isPresent','system.mode','LTM.driftAnalysis','Started...','devices','üï∏Ô∏è\x20Topology\x20Graph\x20manually\x20updated\x20by\x20user.','analysis.analysisHistory','generateContent','delObjectAsync','cogni-living','normal','Skipped\x20(No\x20AI\x20or\x20Data)','enum.rooms.*','Success:\x20','ANOMALY','analysis.training','Insulation\x20Score','inactivityThresholdHours','.\x20WETTER:\x20','WiFi\x20Presence\x20detected.','join','matrix','rawEventLog','system','Wetterdaten\x20deaktiviert.','getCalendarNames','status','accuweather','targetId','subscribeForeignStatesAsync','object','Alert\x20Status','button','notifyTelegramEnabled','apply','automationProposal','Analysiere\x20ausgewogen.','insulation','pop','LTM.driftAnalysis.baselineDrift','getForeignStateAsync','replace','.Current.WeatherText','string','search','Alert\x20Reason','getStateAsync','Training\x20Error:\x20','ack','system.config','üêç\x20Python\x20Pong','¬∞C,\x20','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','setForeignStateAsync','telegram','KI-Modell\x20nicht\x20initialisiert','checkAndInstall','Target\x20Value','geminiApiKey','analysis.activitySummary','heizung','.\x20ANWESEND:\x20','ready','Today\x20Vector\x20(15m)','5iZbPko','push','Sequences','fill','LTM.baselineStatus','55XSbkvx','toLowerCase','Train\x20Security','LTM.driftAnalysis.driftDetails','round','date','Auto\x20Apply','COMFORT_RESULT','analysis.automation.patternDetected','eventHistory','onStateChange','PRIORIT√ÑT:\x20Gesundheit/AAL.','.\x20KONTEXT:\x20','TRAIN_HEALTH','type','AI\x20Training','presenceDevices','channel','sendTo','LTM.processingStatus','some','driftAnalysisTimer','Fokus\x20auf\x20Komfort.','Temperature\x20Forecast','Gemini\x20Error:\x20','Anomaly\x20Detected','PARTY','is_anomaly','contact','window','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','getOverviewData','analysis.automation.targetId','temperature','.\x20SYSTEM_MODE:\x20','isProVersion','sensorLastValues','dimmer','city','analysis.energy.forecast','log','5DhdgKf','testApiKey','isGracePeriodActive','PONG','rating','stdout','PYTHON_EXE','close','Trigger\x20Analysis','[PYTHON]\x20','LTM.trainingData.sequences','exports','existsSync','alertReason','val','toString','stringify','analysis.health.lastCheck','Missing\x20data','@google/generative-ai','unload','analysisInterval','isExit','\x20=\x20','setState','PREDICT_ENERGY','trim','.Current.Temperature','Security\x20Monitor','parse','.forecast.current.state','splice','SECURITY_RESULT','Unbekannt','common','analysis.health.trendDiagnosis','analysis.automation.autoApply','üìù\x20Feedback\x20received:\x20','ltmLtbWindowDays','LTM.trainingData.thermodynamics','System\x20Mode','getHours','TOPOLOGY_RESULT','kontakt','targetValue','Success','modeResetJob','.communicate.request','detected','events.history','User\x20dismissed\x20automation\x20proposal.','2532730TJffKI','.\x20EMERGENCY:\x20','getDate','path','boolean','analysis.triggerBriefing','bind','toISOString','Gait\x20Speed\x20Trend','Fokus\x20auf\x20Familienroutinen.','Unknown','command','success','analysis.topology.structure','includes','useCalendar','‚úÖ\x20HEALTH\x20TRAINED.','find','events.history_debug_00','baselineDrift','setupDriftAnalysisScheduler','analysisHistory','Current\x20Threshold','getForeignObjectsAsync','13384cRDkjW','rule','analysis.security.currentThreshold','updateTopology','payload','motion','getFullYear','apiKey','OK:\x20','door','analysis.automation.description','exitGraceTimer','from','LTM.triggerDailyDigest','latitude',')\x20-\x20SAFE\x20BOOT','analysisTimer','weatherInstance','ENERGY_PREDICT_RESULT','lampe','LTM.dailyDigests','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','Graph\x20Structure\x20(Adjacency\x20Matrix)','ltmJob','triggerDailyDigest','systemConfig','\x20->\x20','TRAIN_ENERGY','config','üß†\x20Triggering\x20Security\x20Training...','unknown','testContext','System','analysis.health','Kein\x20API\x20Key!','./lib/topology','debug','klima','Kalender\x20deaktiviert.','üåÖ\x20Morning\x20Briefing:\x0a','floor','onUnload','.forecast.current.temperature','üõãÔ∏è\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','Lernphase\x20(','LTM.driftAnalysis.lastCheck','Err:\x20','state'];a0_0x329f=function(){return _0x25b34b;};return a0_0x329f();}function sendToPython(_0x4043fd,_0x5e641c,_0x21df3f={}){const _0x430def=a0_0x13fe7d;if(!_0x4043fd[_0x430def(0x23e)]||!_0x4043fd['pythonProcess'][_0x430def(0x1c2)][_0x430def(0x1d1)])return;const _0x2513f8=JSON[_0x430def(0x113)]({'command':_0x5e641c,..._0x21df3f});try{_0x4043fd[_0x430def(0x23e)][_0x430def(0x1c2)]['write'](_0x2513f8+'\x0a');}catch(_0x191d13){}}function runPythonHealthCheck(_0x3834ff){const _0x3486c7=a0_0x13fe7d;if(!_0x3834ff[_0x3486c7(0x1d2)]||_0x3834ff[_0x3486c7(0x1d2)]['length']<0x2)return;const _0x341060=_0x3834ff[_0x3486c7(0x1d2)]['map'](_0x4ab71f=>{const _0x8b8393=_0x3486c7,_0x251a28=(_0x4ab71f[_0x8b8393(0x19d)]||'')[_0x8b8393(0xdb)]();return ACTIVITY_LEVEL_MAP[_0x251a28]||0x32;});sendToPython(_0x3834ff,_0x3486c7(0x17f),{'values':_0x341060,'tag':_0x3486c7(0x1aa)});}function handlePythonResult(_0x3b54bd,_0x5669de){const _0x1e2f99=a0_0x13fe7d;if(_0x5669de[_0x1e2f99(0xe8)]===_0x1e2f99(0x106))_0x3b54bd[_0x1e2f99(0x102)][_0x1e2f99(0x172)](_0x1e2f99(0xc7));else{if(_0x5669de[_0x1e2f99(0xe8)]===_0x1e2f99(0x123)){const {anomaly_score:_0x1f274d,is_anomaly:_0x2c2fcf,threshold:_0xcd63be,explanation:_0x36d00b}=_0x5669de[_0x1e2f99(0x152)];_0x3b54bd[_0x1e2f99(0x102)][_0x1e2f99(0x1ad)](_0x1e2f99(0xf8)+_0x1f274d[_0x1e2f99(0x21c)](0x5)+_0x1e2f99(0x168)+(_0x2c2fcf?_0x1e2f99(0x24d):'OK')),_0x3b54bd[_0x1e2f99(0x1ce)](_0x1e2f99(0x223),{'val':_0x1f274d,'ack':!![]}),_0x3b54bd[_0x1e2f99(0x1ce)](_0x1e2f99(0x1a4),{'val':new Date()[_0x1e2f99(0x13d)](),'ack':!![]});if(_0xcd63be)_0x3b54bd[_0x1e2f99(0x1ce)]('analysis.security.currentThreshold',{'val':_0xcd63be,'ack':!![]});if(_0x2c2fcf){let _0x554950=_0x1e2f99(0xc9)+_0x1f274d[_0x1e2f99(0x21c)](0x4)+')';if(_0x36d00b&&_0x36d00b!==_0x1e2f99(0x140))_0x554950+='\x0aGrund:\x20'+_0x36d00b;_0x3b54bd[_0x1e2f99(0x1ce)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0x3b54bd['setStateAsync'](_0x1e2f99(0x1eb),{'val':_0x554950,'ack':!![]}),sendNotification(_0x3b54bd,'‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20'+_0x554950,![],!![]);}}else{if(_0x5669de[_0x1e2f99(0xe8)]==='TRAINING_COMPLETE'){const _0x1f6025=_0x5669de[_0x1e2f99(0x152)][_0x1e2f99(0x1e8)]||'',_0x1429e4=_0x5669de[_0x1e2f99(0x152)][_0x1e2f99(0x235)],_0x17b776=_0x5669de[_0x1e2f99(0x152)][_0x1e2f99(0x142)]?_0x1e2f99(0x24c)+new Date()[_0x1e2f99(0x207)]()+'\x20('+_0x1f6025+')':'Failed:\x20'+_0x5669de[_0x1e2f99(0x152)][_0x1e2f99(0x224)];_0x3b54bd[_0x1e2f99(0x1ce)](_0x1e2f99(0x1b9),{'val':_0x17b776,'ack':!![]});if(_0x5669de[_0x1e2f99(0x152)][_0x1e2f99(0x142)]&&_0x1429e4)_0x3b54bd[_0x1e2f99(0x1ce)]('analysis.security.currentThreshold',{'val':_0x1429e4,'ack':!![]});}else{if(_0x5669de['type']===_0x1e2f99(0xe1)){const {patterns:_0x383bf8}=_0x5669de[_0x1e2f99(0x152)];if(_0x383bf8&&_0x383bf8['length']>0x0){_0x3b54bd[_0x1e2f99(0x102)][_0x1e2f99(0x1ad)]('üõãÔ∏è\x20BUTLER:\x20Found\x20'+_0x383bf8[_0x1e2f99(0x1a1)]+_0x1e2f99(0x236)),_0x3b54bd[_0x1e2f99(0x1ce)](_0x1e2f99(0x233),{'val':JSON[_0x1e2f99(0x113)](_0x383bf8),'ack':!![]});const _0x3b5c2d=_0x383bf8[0x0],_0x375fac=_0x1e2f99(0x1d6)+_0x3b5c2d[_0x1e2f99(0x14f)]+'\x20('+(_0x3b5c2d[_0x1e2f99(0x1cd)]*0x64)['toFixed'](0x0)+'%)';_0x3b54bd[_0x1e2f99(0x1ce)](_0x1e2f99(0xe2),{'val':!![],'ack':!![]}),_0x3b54bd[_0x1e2f99(0x1ce)](_0x1e2f99(0x158),{'val':_0x375fac,'ack':!![]});}else _0x3b54bd[_0x1e2f99(0x102)][_0x1e2f99(0x1ad)](_0x1e2f99(0x1d9)),_0x3b54bd[_0x1e2f99(0x1ce)](_0x1e2f99(0xe2),{'val':![],'ack':!![]}),_0x3b54bd[_0x1e2f99(0x1ce)]('analysis.automation.detectedPatterns',{'val':'[]','ack':!![]});}else{if(_0x5669de[_0x1e2f99(0xe8)]===_0x1e2f99(0x232)){if(_0x5669de[_0x1e2f99(0x152)]['success'])try{const _0x5571cc=JSON[_0x1e2f99(0x120)](_0x5669de[_0x1e2f99(0x152)][_0x1e2f99(0x1e8)]);if(_0x5571cc[_0x1e2f99(0x264)])_0x3b54bd[_0x1e2f99(0x1ce)](_0x1e2f99(0x23d),{'val':JSON[_0x1e2f99(0x113)](_0x5571cc[_0x1e2f99(0x264)]),'ack':!![]});if(_0x5571cc['heating'])_0x3b54bd[_0x1e2f99(0x1ce)](_0x1e2f99(0x20d),{'val':JSON[_0x1e2f99(0x113)](_0x5571cc[_0x1e2f99(0x1b2)]),'ack':!![]});}catch(_0x5085c2){}}else{if(_0x5669de[_0x1e2f99(0xe8)]==='HEALTH_TRAIN_RESULT'){if(_0x5669de[_0x1e2f99(0x152)]['success'])_0x3b54bd[_0x1e2f99(0x102)][_0x1e2f99(0x1ad)](_0x1e2f99(0x146));}else{if(_0x5669de[_0x1e2f99(0xe8)]===_0x1e2f99(0x238))_0x3b54bd[_0x1e2f99(0x1ce)]('analysis.health.lastCheck',{'val':new Date()[_0x1e2f99(0x13d)](),'ack':!![]}),_0x3b54bd[_0x1e2f99(0x1ce)]('analysis.health.isAnomaly',{'val':_0x5669de['payload'][_0x1e2f99(0xf5)],'ack':!![]});else{if(_0x5669de[_0x1e2f99(0xe8)]===_0x1e2f99(0x1c8))_0x3b54bd['setStateAsync'](_0x1e2f99(0x126),{'val':_0x5669de[_0x1e2f99(0x152)]['diagnosis'],'ack':!![]}),_0x3b54bd['setStateAsync'](_0x1e2f99(0x1bb),{'val':_0x5669de[_0x1e2f99(0x152)]['change_percent'],'ack':!![]});else{if(_0x5669de[_0x1e2f99(0xe8)]==='GAIT_RESULT'){const {speed_trend:_0xae213e}=_0x5669de['payload'];if(_0xae213e!==undefined)_0x3b54bd[_0x1e2f99(0x1ce)](_0x1e2f99(0x17e),{'val':_0xae213e,'ack':!![]});}else{if(_0x5669de['type']===_0x1e2f99(0x160)){const {forecast:_0x3bc422}=_0x5669de[_0x1e2f99(0x152)];if(_0x3bc422)_0x3b54bd[_0x1e2f99(0x1ce)](_0x1e2f99(0x101),{'val':JSON[_0x1e2f99(0x113)](_0x3bc422),'ack':!![]});}else{if(_0x5669de[_0x1e2f99(0xe8)]===_0x1e2f99(0x12d)){const {data:_0xa1c095}=_0x5669de[_0x1e2f99(0x152)];_0xa1c095&&(_0x3b54bd[_0x1e2f99(0x102)][_0x1e2f99(0x1ad)](_0x1e2f99(0x1e7)),_0x3b54bd[_0x1e2f99(0x1ce)]('analysis.security.topologyMatrix',{'val':JSON[_0x1e2f99(0x113)](_0xa1c095),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x5d8dfd){const _0x481229=a0_0x13fe7d;let _0x35d30b=_0x481229(0x1fb);if(fs[_0x481229(0x10f)](installer['PYTHON_EXE']))_0x35d30b=installer[_0x481229(0x109)];try{const _0x5aa0f8=path['join'](__dirname,_0x481229(0x23c),_0x481229(0x22f));_0x5d8dfd[_0x481229(0x23e)]=spawn(_0x35d30b,[_0x5aa0f8]),_0x5d8dfd[_0x481229(0x23e)][_0x481229(0x108)]['on'](_0x481229(0x1f4),_0x648ae4=>{const _0x5bbecc=_0x481229,_0x484ccd=_0x648ae4[_0x5bbecc(0x112)]()['split']('\x0a');_0x484ccd[_0x5bbecc(0x1c4)](_0x31fc06=>{const _0x46eea0=_0x5bbecc,_0x53c96d=_0x31fc06[_0x46eea0(0x11d)]();if(!_0x53c96d)return;if(_0x53c96d['startsWith']('[LOG]'))_0x5d8dfd[_0x46eea0(0x102)]['debug'](_0x46eea0(0x10c)+_0x53c96d[_0x46eea0(0x18d)](0x5)[_0x46eea0(0x11d)]());else{if(_0x53c96d['startsWith'](_0x46eea0(0x1df)))try{const _0xdde25a=JSON['parse'](_0x53c96d[_0x46eea0(0x18d)](0x8)[_0x46eea0(0x11d)]());handlePythonResult(_0x5d8dfd,_0xdde25a);}catch(_0x5c328f){}}});}),_0x5d8dfd[_0x481229(0x23e)]['on'](_0x481229(0x10a),_0x5a36eb=>{const _0x5d1541=_0x481229;_0x5d8dfd[_0x5d1541(0x23e)]=null;});}catch(_0x580f08){_0x5d8dfd[_0x481229(0x102)][_0x481229(0x180)](_0x481229(0x1e3)+_0x580f08[_0x481229(0x215)]);}}async function runAutopilot(_0x1c6e43){const _0x21a5f7=a0_0x13fe7d;_0x1c6e43[_0x21a5f7(0x102)][_0x21a5f7(0x172)](_0x21a5f7(0x19f)),await runGeminiAnalysis(_0x1c6e43),updateHealthVector(_0x1c6e43),triggerGaitAnalysis(_0x1c6e43),triggerEnergyPrediction(_0x1c6e43);}async function triggerGaitAnalysis(_0x28caf7){const _0x16f0ab=a0_0x13fe7d;if(!_0x28caf7[_0x16f0ab(0xfd)])return;try{const _0x5cf46a=await _0x28caf7[_0x16f0ab(0xc3)](_0x16f0ab(0x10d));_0x5cf46a&&_0x5cf46a['val']&&sendToPython(_0x28caf7,'ANALYZE_GAIT',{'sequences':JSON[_0x16f0ab(0x120)](_0x5cf46a['val'])});}catch(_0x36d098){}}async function triggerEnergyPrediction(_0x32b48b){const _0x2a45f3=a0_0x13fe7d;if(!_0x32b48b['isProVersion'])return;try{const _0x2f8b97=await getOutsideTemperatureNumeric(_0x32b48b);if(_0x2f8b97===null)return;const _0x1ac817={},_0x539418=_0x32b48b['config'][_0x2a45f3(0x243)]||[];for(const _0xd6cfdb of _0x539418){if(_0xd6cfdb[_0x2a45f3(0xe8)]===_0x2a45f3(0xfb)&&_0xd6cfdb[_0x2a45f3(0x221)]){const _0x296e97=_0x32b48b['sensorLastValues'][_0xd6cfdb['id']];if(_0x296e97!==undefined)_0x1ac817[_0xd6cfdb[_0x2a45f3(0x221)]]=_0x296e97;}}Object[_0x2a45f3(0x1ea)](_0x1ac817)['length']>0x0&&sendToPython(_0x32b48b,_0x2a45f3(0x11c),{'current_temps':_0x1ac817,'t_out':_0x2f8b97});}catch(_0xbe74bb){}}function updateHealthVector(_0x4a07f3){const _0x22890e=a0_0x13fe7d;if(!_0x4a07f3['rawEventLog']||_0x4a07f3['rawEventLog']['length']===0x0)return;const _0x5a8146=new Array(0x60)[_0x22890e(0xd8)](0x0),_0x33bc0b=new Date()[_0x22890e(0x1ef)](0x0,0x0,0x0,0x0);_0x4a07f3[_0x22890e(0x255)]['forEach'](_0x5509b0=>{const _0x57ff20=_0x22890e,_0x480a1b=new Date(_0x5509b0['timestamp']);if(_0x480a1b['getTime']()>=_0x33bc0b){const _0x327857=_0x480a1b['getHours'](),_0x3a01d5=_0x480a1b[_0x57ff20(0x20c)](),_0x85e4f8=_0x327857*0x4+Math[_0x57ff20(0x176)](_0x3a01d5/0xf);if(_0x85e4f8>=0x0&&_0x85e4f8<0x60)_0x5a8146[_0x85e4f8]++;}}),_0x4a07f3[_0x22890e(0x1ce)]('analysis.health.todayVector',{'val':JSON[_0x22890e(0x113)](_0x5a8146),'ack':!![]});}async function getWeatherContext(_0x1f5e44){const _0x4a8f06=a0_0x13fe7d;if(!_0x1f5e44[_0x4a8f06(0x16a)][_0x4a8f06(0x20b)]||!_0x1f5e44[_0x4a8f06(0x16a)][_0x4a8f06(0x15f)])return _0x4a8f06(0x257);try{const _0x299ed9=_0x1f5e44['config'][_0x4a8f06(0x15f)];let _0x168d7d=await _0x1f5e44[_0x4a8f06(0xbd)](_0x299ed9+'.Current.Temperature');if(!_0x168d7d)_0x168d7d=await _0x1f5e44[_0x4a8f06(0xbd)](_0x299ed9+_0x4a8f06(0x178));let _0x366252=await _0x1f5e44[_0x4a8f06(0xbd)](_0x299ed9+_0x4a8f06(0xbf));if(!_0x366252)_0x366252=await _0x1f5e44[_0x4a8f06(0xbd)](_0x299ed9+_0x4a8f06(0x121));if(_0x168d7d&&_0x366252)return _0x168d7d[_0x4a8f06(0x111)]+_0x4a8f06(0xc8)+_0x366252[_0x4a8f06(0x111)];}catch(_0x2a57b2){}return _0x4a8f06(0x21f);}async function getCalendarContext(_0x5bbbfd){const _0x5c361b=a0_0x13fe7d;if(!_0x5bbbfd[_0x5c361b(0x16a)][_0x5c361b(0x145)]||!_0x5bbbfd[_0x5c361b(0x16a)]['calendarInstance'])return _0x5c361b(0x174);return _0x5c361b(0x200);}async function getCalendarNames(_0x4ae1c0,_0x5d4812){return[];}async function saveFeedback(_0x5900f7,_0x10e602){const _0x34306c=a0_0x13fe7d;_0x5900f7[_0x34306c(0x102)]['info'](_0x34306c(0x128)+_0x10e602[_0x34306c(0x107)]);}async function runGeminiAnalysis(_0xe435e3,_0x1e8493=''){const _0x3b80a1=a0_0x13fe7d;if(!_0xe435e3[_0x3b80a1(0x225)])return;if(_0xe435e3[_0x3b80a1(0xe3)]['length']===0x0)return;const _0x18d547=_0xe435e3[_0x3b80a1(0xe3)][_0x3b80a1(0x1a0)](0x0,0xf),_0x3b1c19=await getWeatherContext(_0xe435e3),_0x5818e4=_0xe435e3[_0x3b80a1(0x237)],_0x4d86cf=PERSONA_MAPPING[_0xe435e3['config'][_0x3b80a1(0x1fa)]||_0x3b80a1(0x229)],_0x2abacb=_0xe435e3['config']['livingContext']||_0x3b80a1(0x197);let _0x5c2afd=_0x3b80a1(0x124);try{const _0x47bdad=await _0xe435e3[_0x3b80a1(0xc3)](_0x3b80a1(0x1c6));if(_0x47bdad&&_0x47bdad[_0x3b80a1(0x111)])_0x5c2afd=_0x47bdad[_0x3b80a1(0x111)];}catch(_0x1eb226){}let _0x1bd71e=![];try{const _0x1de97c=await _0xe435e3[_0x3b80a1(0xc3)](_0x3b80a1(0x127));if(_0x1de97c&&_0x1de97c[_0x3b80a1(0x111)])_0x1bd71e=!![];}catch(_0x37d544){}const _0x3bcd2c=_0x3b80a1(0x163)+_0x4d86cf+_0x3b80a1(0xe6)+_0x2abacb+_0x3b80a1(0xfc)+_0x5818e4+_0x3b80a1(0x251)+_0x3b1c19+_0x3b80a1(0xd2)+_0x5c2afd+_0x3b80a1(0x184)+JSON[_0x3b80a1(0x113)](_0x18d547)+_0x3b80a1(0x137)+_0x1e8493+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0xb15cbd=await _0xe435e3[_0x3b80a1(0x225)][_0x3b80a1(0x246)](_0x3bcd2c),_0x2f8a85=JSON[_0x3b80a1(0x120)](_0xb15cbd[_0x3b80a1(0x19e)][_0x3b80a1(0x1dd)]()['replace'](/```json|```/g,'')['trim']());await _0xe435e3['setStateAsync']('analysis.lastResult',{'val':JSON[_0x3b80a1(0x113)](_0x2f8a85),'ack':!![]});if(_0x2f8a85[_0x3b80a1(0x1e2)])await _0xe435e3[_0x3b80a1(0x1ce)](_0x3b80a1(0xd0),{'val':_0x2f8a85[_0x3b80a1(0x1e2)],'ack':!![]});const _0x2ddf20={'timestamp':Date[_0x3b80a1(0x1b4)](),'id':Date[_0x3b80a1(0x1b4)]()['toString'](),'analysis':{'activity':{'summary':_0x2f8a85[_0x3b80a1(0x1e2)],'isAlert':_0x2f8a85[_0x3b80a1(0x1fe)],'alertReason':_0x2f8a85[_0x3b80a1(0x110)]},'comfort':{'automationProposal':_0x2f8a85[_0x3b80a1(0x262)]}}};await updateAnalysisHistory(_0xe435e3,_0x2ddf20);const _0x57a82b=_0x2f8a85[_0x3b80a1(0x1fe)]||![];_0x57a82b!==_0xe435e3['lastAlertState']&&(await _0xe435e3[_0x3b80a1(0x1ce)]('analysis.isAlert',{'val':_0x57a82b,'ack':!![]}),_0xe435e3[_0x3b80a1(0x1e5)]=_0x57a82b,_0x57a82b&&(await _0xe435e3[_0x3b80a1(0x1ce)]('analysis.alertReason',{'val':_0x2f8a85[_0x3b80a1(0x110)],'ack':!![]}),sendNotification(_0xe435e3,_0x3b80a1(0x1c3)+_0x2f8a85['alertReason'],![],_0x2f8a85[_0x3b80a1(0x1c0)])));if(_0x2f8a85[_0x3b80a1(0x262)]&&_0x2f8a85[_0x3b80a1(0x262)][_0x3b80a1(0x133)]){await _0xe435e3['setStateAsync'](_0x3b80a1(0xe2),{'val':!![],'ack':!![]}),await _0xe435e3[_0x3b80a1(0x1ce)](_0x3b80a1(0x158),{'val':_0x2f8a85[_0x3b80a1(0x262)][_0x3b80a1(0x1a5)],'ack':!![]}),await _0xe435e3[_0x3b80a1(0x1ce)](_0x3b80a1(0xfa),{'val':_0x2f8a85[_0x3b80a1(0x262)][_0x3b80a1(0x25b)],'ack':!![]}),await _0xe435e3[_0x3b80a1(0x1ce)]('analysis.automation.targetValue',{'val':JSON[_0x3b80a1(0x113)](_0x2f8a85[_0x3b80a1(0x262)]['targetValue']),'ack':!![]});if(_0x1bd71e)executeAutomationAction(_0xe435e3);}}catch(_0x47704e){_0xe435e3[_0x3b80a1(0x102)][_0x3b80a1(0x180)](_0x3b80a1(0xf2)+_0x47704e[_0x3b80a1(0x215)]);}}async function startSystem(_0x578f24){const _0x300bf5=a0_0x13fe7d;_0x578f24[_0x300bf5(0x102)]['info'](_0x300bf5(0x22a)),await initZombies(_0x578f24);try{_0x578f24[_0x300bf5(0xfd)]=await checkLicense(_0x578f24['config'][_0x300bf5(0x1f2)]);}catch(_0x113575){}if(!_0x578f24[_0x300bf5(0x16a)][_0x300bf5(0x250)]||_0x578f24['config'][_0x300bf5(0x250)]<0.1)_0x578f24[_0x300bf5(0x16a)][_0x300bf5(0x250)]=0xc;await initHistory(_0x578f24),await initSystemConfig(_0x578f24);if(_0x578f24[_0x300bf5(0x16a)][_0x300bf5(0xcf)])try{_0x578f24[_0x300bf5(0x1f8)]=new GoogleGenerativeAI(_0x578f24[_0x300bf5(0x16a)][_0x300bf5(0xcf)]),_0x578f24['geminiModel']=_0x578f24[_0x300bf5(0x1f8)][_0x300bf5(0x183)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),_0x578f24[_0x300bf5(0x102)]['info']('Gemini\x20AI\x20initialized.');}catch(_0x5e2dc9){_0x578f24['log']['error']('Gemini\x20Init\x20Error:\x20'+_0x5e2dc9[_0x300bf5(0x215)]);}await createAllObjects(_0x578f24),await loadSystemMode(_0x578f24),await loadRawEventLog(_0x578f24),await loadDailyDigests(_0x578f24),_0x578f24[_0x300bf5(0x196)]('analysis.trigger'),_0x578f24['subscribeStates'](LTM_DP_TRIGGER_DIGEST),_0x578f24['subscribeStates'](_0x300bf5(0x240)),_0x578f24['subscribeStates'](_0x300bf5(0x13b)),_0x578f24[_0x300bf5(0x196)]('analysis.automation.triggerAction'),_0x578f24['subscribeStates'](_0x300bf5(0x127)),_0x578f24[_0x300bf5(0x196)](_0x300bf5(0x1fd)),_0x578f24[_0x300bf5(0x196)](_0x300bf5(0x185)),_0x578f24[_0x300bf5(0x196)](_0x300bf5(0x1ed)),_0x578f24[_0x300bf5(0x196)](_0x300bf5(0x193)),_0x578f24[_0x300bf5(0x196)]('analysis.training.triggerTopology'),await initSensorSubscriptions(_0x578f24),await initPresenceSubscriptions(_0x578f24),await setupTelegramListener(_0x578f24),setTimeout(()=>checkWifiPresence(_0x578f24),0x1388);if(_0x578f24[_0x300bf5(0x15e)])clearInterval(_0x578f24['analysisTimer']);const _0x14dd9c=_0x578f24['config'][_0x300bf5(0x118)]||0xf;_0x14dd9c>0x0&&(_0x578f24[_0x300bf5(0x15e)]=setInterval(()=>{runAutopilot(_0x578f24);},_0x14dd9c*0x3c*0x3e8)),schedulers[_0x300bf5(0x1bf)](_0x578f24,()=>createDailyDigest(_0x578f24)),schedulers[_0x300bf5(0x205)](_0x578f24),schedulers[_0x300bf5(0x14a)](_0x578f24,()=>runBaselineDriftAnalysis(_0x578f24)),schedulers[_0x300bf5(0x1cf)](_0x578f24,()=>sendMorningBriefing(_0x578f24)),startPythonService(_0x578f24),setTimeout(()=>{const _0x846560=_0x300bf5;topology[_0x846560(0x151)](_0x578f24),_0x578f24[_0x846560(0x23e)]&&(runPythonHealthCheck(_0x578f24),triggerGaitAnalysis(_0x578f24),triggerEnergyPrediction(_0x578f24)),updateHealthVector(_0x578f24);},0x1388);}class CogniLiving extends utils[a0_0x13fe7d(0x203)]{constructor(_0xf19aaf){const _0x4b9afe=a0_0x13fe7d;super({..._0xf19aaf,'name':_0x4b9afe(0x248)}),this['eventHistory']=[],this[_0x4b9afe(0x14b)]=[],this[_0x4b9afe(0x255)]=[],this['dailyDigests']=[],this[_0x4b9afe(0xfe)]={},this[_0x4b9afe(0x167)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x4b9afe(0x23f)]=!![],this[_0x4b9afe(0x20f)]=null,this[_0x4b9afe(0x159)]=null,this[_0x4b9afe(0x105)]=![],this[_0x4b9afe(0x1f8)]=null,this[_0x4b9afe(0x225)]=null,this[_0x4b9afe(0x237)]=SYSTEM_MODES[_0x4b9afe(0x1a3)],this[_0x4b9afe(0xfd)]=![],this[_0x4b9afe(0x1e5)]=![],this['systemUUID']=_0x4b9afe(0x16c),this[_0x4b9afe(0x15e)]=null,this['ltmJob']=null,this['modeResetJob']=null,this[_0x4b9afe(0xef)]=null,this[_0x4b9afe(0x19c)]=null,this[_0x4b9afe(0x23e)]=null,this[_0x4b9afe(0x198)]=![],this['on'](_0x4b9afe(0xd3),this[_0x4b9afe(0x1bc)]['bind'](this)),this['on'](_0x4b9afe(0x220),this[_0x4b9afe(0xe4)]['bind'](this)),this['on'](_0x4b9afe(0x117),this[_0x4b9afe(0x177)][_0x4b9afe(0x13c)](this)),this['on']('message',this[_0x4b9afe(0x1db)][_0x4b9afe(0x13c)](this));}async[a0_0x13fe7d(0x1bc)](){const _0x52224d=a0_0x13fe7d;this[_0x52224d(0x102)][_0x52224d(0x1ad)](_0x52224d(0x1d7)+this[_0x52224d(0x209)]+_0x52224d(0x15d));if(!installer[_0x52224d(0xcd)](this,()=>startSystem(this)))return;}[a0_0x13fe7d(0x177)](_0x366e0d){const _0x31729d=a0_0x13fe7d;if(this[_0x31729d(0x15e)])clearInterval(this['analysisTimer']);if(this[_0x31729d(0xef)])clearInterval(this[_0x31729d(0xef)]);if(this['ltmJob'])this[_0x31729d(0x165)][_0x31729d(0x1f5)]();if(this[_0x31729d(0x131)])this[_0x31729d(0x131)]['cancel']();if(this[_0x31729d(0x19c)])this['briefingJob'][_0x31729d(0x1f5)]();if(this[_0x31729d(0x20f)])clearTimeout(this[_0x31729d(0x20f)]);if(this[_0x31729d(0x159)])clearTimeout(this['exitGraceTimer']);stopPythonService(this),_0x366e0d();}async[a0_0x13fe7d(0xe4)](_0x1a8e35,_0x5b7ad3){const _0x14a07d=a0_0x13fe7d;if(!_0x5b7ad3||this['dependencyInstallInProgress'])return;if(_0x1a8e35[_0x14a07d(0x144)](_0x14a07d(0xcb))&&_0x1a8e35[_0x14a07d(0x227)](_0x14a07d(0x195))&&_0x5b7ad3['val']){await handleTelegramResponse(this,_0x5b7ad3[_0x14a07d(0x111)]);return;}if(_0x1a8e35===this[_0x14a07d(0x1f7)]+'.'+SYSTEM_DP_MODE){if(_0x5b7ad3[_0x14a07d(0x111)]&&Object[_0x14a07d(0x182)](SYSTEM_MODES)[_0x14a07d(0x144)](_0x5b7ad3[_0x14a07d(0x111)])){this['currentSystemMode']=_0x5b7ad3[_0x14a07d(0x111)];if(_0x5b7ad3[_0x14a07d(0x111)]===SYSTEM_MODES[_0x14a07d(0x1ae)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x5b7ad3[_0x14a07d(0xc5)])this[_0x14a07d(0x11b)](_0x1a8e35,{'val':this[_0x14a07d(0x237)],'ack':!![]});return;}if(!_0x5b7ad3[_0x14a07d(0xc5)]){_0x1a8e35['includes'](_0x14a07d(0x19a))&&_0x5b7ad3[_0x14a07d(0x111)]&&(this[_0x14a07d(0x11b)](_0x1a8e35,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x1a8e35[_0x14a07d(0x144)](_0x14a07d(0x166))&&_0x5b7ad3[_0x14a07d(0x111)]){this[_0x14a07d(0x11b)](_0x1a8e35,{'val':![],'ack':!![]});if(this['isProVersion'])createDailyDigest(this);}_0x1a8e35[_0x14a07d(0x144)](_0x14a07d(0x216))&&_0x5b7ad3[_0x14a07d(0x111)]&&(this[_0x14a07d(0x11b)](_0x1a8e35,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x1a8e35[_0x14a07d(0x144)](_0x14a07d(0x1ec))&&_0x5b7ad3[_0x14a07d(0x111)]&&(this[_0x14a07d(0x11b)](_0x1a8e35,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x1a8e35['includes'](_0x14a07d(0x1fd))&&_0x5b7ad3['val']){this[_0x14a07d(0x11b)](_0x1a8e35,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0xd739d7=await this['getStateAsync'](_0x14a07d(0x10d));if(_0xd739d7&&_0xd739d7['val']){const _0x2457a0=JSON['parse'](_0xd739d7[_0x14a07d(0x111)]);this['log'][_0x14a07d(0x1ad)](_0x14a07d(0x16b)),this[_0x14a07d(0x1ce)](_0x14a07d(0x1b9),{'val':_0x14a07d(0x1f6),'ack':!![]}),sendToPython(this,_0x14a07d(0x187),{'sequences':_0x2457a0});}}catch(_0x366c59){this['log']['error'](_0x14a07d(0xc4)+_0x366c59[_0x14a07d(0x215)]);}}if(_0x1a8e35[_0x14a07d(0x144)](_0x14a07d(0x185))&&_0x5b7ad3[_0x14a07d(0x111)]){this[_0x14a07d(0x11b)](_0x1a8e35,{'val':![],'ack':!![]});if(this[_0x14a07d(0xfd)])try{const _0x4d291a=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x4d291a&&_0x4d291a['val'])sendToPython(this,_0x14a07d(0xe7),{'digests':JSON['parse'](_0x4d291a[_0x14a07d(0x111)])});}catch(_0x198666){}}if(_0x1a8e35[_0x14a07d(0x144)](_0x14a07d(0x1ed))&&_0x5b7ad3[_0x14a07d(0x111)]){this[_0x14a07d(0x11b)](_0x1a8e35,{'val':![],'ack':!![]});if(this[_0x14a07d(0xfd)])try{const _0x32420c=await this[_0x14a07d(0xc3)](_0x14a07d(0x12a));if(_0x32420c&&_0x32420c[_0x14a07d(0x111)])sendToPython(this,_0x14a07d(0x169),{'points':JSON[_0x14a07d(0x120)](_0x32420c[_0x14a07d(0x111)])});}catch(_0x1dc0e5){}}if(_0x1a8e35[_0x14a07d(0x144)](_0x14a07d(0x193))&&_0x5b7ad3[_0x14a07d(0x111)]){this[_0x14a07d(0x11b)](_0x1a8e35,{'val':![],'ack':!![]});if(this[_0x14a07d(0xfd)])try{const _0x24a4e8=await this['getStateAsync'](LTM_DP_RAW_LOG);_0x24a4e8&&_0x24a4e8[_0x14a07d(0x111)]&&(this['log'][_0x14a07d(0x1ad)](_0x14a07d(0x179)),sendToPython(this,'TRAIN_COMFORT',{'events':JSON[_0x14a07d(0x120)](_0x24a4e8['val'])}));}catch(_0x46386e){}}_0x1a8e35[_0x14a07d(0x144)](_0x14a07d(0x239))&&_0x5b7ad3['val']&&(this[_0x14a07d(0x11b)](_0x1a8e35,{'val':![],'ack':!![]}),this[_0x14a07d(0x102)][_0x14a07d(0x1ad)](_0x14a07d(0x1bd)),topology[_0x14a07d(0x151)](this));return;}if(this[_0x14a07d(0x16a)]['presenceDevices']&&this[_0x14a07d(0x16a)][_0x14a07d(0xea)]['includes'](_0x1a8e35)){await checkWifiPresence(this);return;}const _0x2dd5f2=(this[_0x14a07d(0x16a)][_0x14a07d(0x243)]||[])[_0x14a07d(0x147)](_0x213049=>_0x213049['id']===_0x1a8e35);if(_0x2dd5f2)processSensorEvent(this,_0x1a8e35,_0x5b7ad3,_0x2dd5f2);}async[a0_0x13fe7d(0x1db)](_0x5bcb7a){const _0x26e7a6=a0_0x13fe7d;if(typeof _0x5bcb7a===_0x26e7a6(0x25d)&&_0x5bcb7a[_0x26e7a6(0x215)]){if(_0x5bcb7a[_0x26e7a6(0x141)]===_0x26e7a6(0x104)){const _0x33d9e4=_0x5bcb7a[_0x26e7a6(0x215)][_0x26e7a6(0x155)]||this[_0x26e7a6(0x16a)][_0x26e7a6(0xcf)];if(!_0x33d9e4)return this['sendTo'](_0x5bcb7a[_0x26e7a6(0x15a)],_0x5bcb7a[_0x26e7a6(0x141)],{'success':![],'message':'Kein\x20API\x20Key.'},_0x5bcb7a[_0x26e7a6(0x214)]);try{const _0x59b1ac=new GoogleGenerativeAI(_0x33d9e4),_0x1b9d38=_0x59b1ac[_0x26e7a6(0x183)]({'model':GEMINI_MODEL}),_0x2a11c1=await _0x1b9d38[_0x26e7a6(0x246)]('Hi');this[_0x26e7a6(0xec)](_0x5bcb7a['from'],_0x5bcb7a[_0x26e7a6(0x141)],{'success':!![],'message':_0x26e7a6(0x156)+_0x2a11c1[_0x26e7a6(0x19e)][_0x26e7a6(0x1dd)]()},_0x5bcb7a[_0x26e7a6(0x214)]);}catch(_0x113f59){this['sendTo'](_0x5bcb7a[_0x26e7a6(0x15a)],_0x5bcb7a[_0x26e7a6(0x141)],{'success':![],'message':_0x26e7a6(0x17c)+_0x113f59[_0x26e7a6(0x215)]},_0x5bcb7a[_0x26e7a6(0x214)]);}}else{if(_0x5bcb7a[_0x26e7a6(0x141)]===_0x26e7a6(0x16d)){const _0x327e6e=await getWeatherContext(this),_0x35b4e2=await getCalendarContext(this);this[_0x26e7a6(0xec)](_0x5bcb7a[_0x26e7a6(0x15a)],_0x5bcb7a['command'],{'success':!![],'weather':_0x327e6e,'calendar':_0x35b4e2},_0x5bcb7a[_0x26e7a6(0x214)]);}else{if(_0x5bcb7a[_0x26e7a6(0x141)]==='getLtmData'){if(!this[_0x26e7a6(0xfd)])return this['sendTo'](_0x5bcb7a[_0x26e7a6(0x15a)],_0x5bcb7a[_0x26e7a6(0x141)],{'success':![],'isPro':![]},_0x5bcb7a[_0x26e7a6(0x214)]);let _0x1a0d4c={'status':'N/A'};try{const _0x407cc4=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x1a0d4c['status']=_0x407cc4?_0x407cc4[_0x26e7a6(0x111)]:_0x26e7a6(0x20e);}catch(_0x5e1fa8){}this[_0x26e7a6(0xec)](_0x5bcb7a['from'],_0x5bcb7a[_0x26e7a6(0x141)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x26e7a6(0x1d2)],'driftAnalysis':_0x1a0d4c,'analysisHistory':this['analysisHistory']},_0x5bcb7a[_0x26e7a6(0x214)]);}else{if(_0x5bcb7a[_0x26e7a6(0x141)]===_0x26e7a6(0xf9)){const _0x382ee1=this[_0x26e7a6(0x1d2)][_0x26e7a6(0x1a1)],_0x549b8b=new Date(),_0x4df6dd=new Date(_0x549b8b[_0x26e7a6(0x154)](),_0x549b8b[_0x26e7a6(0x1f3)](),_0x549b8b[_0x26e7a6(0x138)]())[_0x26e7a6(0x1de)](),_0x4a89c0=this[_0x26e7a6(0x255)][_0x26e7a6(0x213)](_0x4c0d3f=>new Date(_0x4c0d3f[_0x26e7a6(0x1dc)])[_0x26e7a6(0x1de)]()>_0x4df6dd)['length'],_0x56e7e1=new Array(0x18)['fill'](0x0);this[_0x26e7a6(0x255)][_0x26e7a6(0x1c4)](_0x5c0557=>{const _0x4d8acf=_0x26e7a6,_0x5530d9=new Date(_0x5c0557[_0x4d8acf(0x1dc)]);if(_0x5530d9['getTime']()>_0x4df6dd)_0x56e7e1[_0x5530d9[_0x4d8acf(0x12c)]()]++;});let _0x483eb6={'status':_0x26e7a6(0x20e)};try{const _0x40fbfa=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x483eb6[_0x26e7a6(0x259)]=_0x40fbfa?_0x40fbfa['val']:_0x26e7a6(0x20e);}catch(_0x5d72ee){}let _0x580f9f='';try{const _0x2277c6=await this[_0x26e7a6(0xc3)]('system.presenceWho');_0x580f9f=_0x2277c6?_0x2277c6['val']:'';}catch(_0x297131){}let _0x3f7c02=null;!this[_0x26e7a6(0x225)]&&(_0x3f7c02=this[_0x26e7a6(0x16a)][_0x26e7a6(0xcf)]?_0x26e7a6(0xcc):_0x26e7a6(0x170));let _0x38f92e={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x1d65d1=await this[_0x26e7a6(0xc3)](_0x26e7a6(0xe2));if(_0x1d65d1&&_0x1d65d1[_0x26e7a6(0x111)]){_0x38f92e[_0x26e7a6(0x133)]=!![];const _0x2e2a01=await this[_0x26e7a6(0xc3)](_0x26e7a6(0x158));_0x38f92e['description']=_0x2e2a01?_0x2e2a01[_0x26e7a6(0x111)]:'';const _0x518561=await this[_0x26e7a6(0xc3)]('analysis.automation.targetId');_0x38f92e[_0x26e7a6(0x25b)]=_0x518561?_0x518561[_0x26e7a6(0x111)]:'';const _0x39cc22=await this[_0x26e7a6(0xc3)]('analysis.automation.targetValue');_0x38f92e[_0x26e7a6(0x12f)]=_0x39cc22?_0x39cc22[_0x26e7a6(0x111)]:'';}const _0x13cd1a=await this['getStateAsync'](_0x26e7a6(0x127));_0x38f92e['autoApply']=_0x13cd1a?!!_0x13cd1a['val']:![];}catch(_0x344c2c){}this['sendTo'](_0x5bcb7a[_0x26e7a6(0x15a)],_0x5bcb7a[_0x26e7a6(0x141)],{'success':!![],'eventHistory':this[_0x26e7a6(0xe3)][_0x26e7a6(0x1a0)](0x0,0xf),'stats':{'digestCount':_0x382ee1,'eventCountToday':_0x4a89c0,'hourlyActivity':_0x56e7e1,'driftStatus':_0x483eb6[_0x26e7a6(0x259)],'isPresent':this[_0x26e7a6(0x23f)],'presenceWho':_0x580f9f,'minDays':this[_0x26e7a6(0x16a)][_0x26e7a6(0x1ff)]||0x7,'stbDays':this['config'][_0x26e7a6(0x1a8)]||0xe,'ltbDays':this[_0x26e7a6(0x16a)][_0x26e7a6(0x129)]||0x3c,'systemError':_0x3f7c02},'automation':_0x38f92e},_0x5bcb7a[_0x26e7a6(0x214)]);}else{if(_0x5bcb7a[_0x26e7a6(0x141)]===_0x26e7a6(0x1da))try{const _0x1945d7=await scanner[_0x26e7a6(0x22b)](this,_0x5bcb7a[_0x26e7a6(0x215)]||{});this['sendTo'](_0x5bcb7a[_0x26e7a6(0x15a)],_0x5bcb7a[_0x26e7a6(0x141)],{'success':!![],'devices':_0x1945d7},_0x5bcb7a[_0x26e7a6(0x214)]);}catch(_0x87291a){this[_0x26e7a6(0xec)](_0x5bcb7a[_0x26e7a6(0x15a)],_0x5bcb7a[_0x26e7a6(0x141)],{'success':![],'error':_0x87291a[_0x26e7a6(0x215)]},_0x5bcb7a[_0x26e7a6(0x214)]);}else{if(_0x5bcb7a[_0x26e7a6(0x141)]==='getEnums'){const _0x51e256=await this[_0x26e7a6(0x14d)]('enum.functions.*','enum'),_0xf44197=[];if(_0x51e256)for(const _0x25174f in _0x51e256){const _0x4915d0=_0x51e256[_0x25174f],_0x2482a3=(_0x4915d0['common']&&typeof _0x4915d0[_0x26e7a6(0x125)][_0x26e7a6(0x1a6)]==='object'?_0x4915d0['common'][_0x26e7a6(0x1a6)]['de']:_0x4915d0[_0x26e7a6(0x125)][_0x26e7a6(0x1a6)])||_0x4915d0['common'][_0x26e7a6(0x1a6)];_0xf44197[_0x26e7a6(0xd6)]({'id':_0x25174f,'name':_0x2482a3});}const _0x5a037f=await this['getForeignObjectsAsync'](_0x26e7a6(0x24b),_0x26e7a6(0x1ab)),_0x4e0bfd=[];if(_0x5a037f)for(const _0x433e6e in _0x5a037f){const _0x97ab6d=_0x5a037f[_0x433e6e],_0x547c75=(_0x97ab6d[_0x26e7a6(0x125)]&&typeof _0x97ab6d[_0x26e7a6(0x125)]['name']==='object'?_0x97ab6d['common'][_0x26e7a6(0x1a6)]['de']:_0x97ab6d['common'][_0x26e7a6(0x1a6)])||_0x433e6e[_0x26e7a6(0x1b8)]('.')[_0x26e7a6(0xbb)]();_0x4e0bfd[_0x26e7a6(0xd6)](_0x547c75);}this['sendTo'](_0x5bcb7a['from'],_0x5bcb7a[_0x26e7a6(0x141)],{'success':!![],'enums':_0xf44197,'rooms':_0x4e0bfd},_0x5bcb7a['callback']);}else{if(_0x5bcb7a[_0x26e7a6(0x141)]===_0x26e7a6(0x258)){const _0x4d3185=_0x5bcb7a[_0x26e7a6(0x215)]['instance'];if(!_0x4d3185)return this[_0x26e7a6(0xec)](_0x5bcb7a[_0x26e7a6(0x15a)],_0x5bcb7a['command'],{'success':![],'error':'No\x20instance'},_0x5bcb7a[_0x26e7a6(0x214)]);const _0x44b6aa=await getCalendarNames(this,_0x4d3185);this[_0x26e7a6(0xec)](_0x5bcb7a[_0x26e7a6(0x15a)],_0x5bcb7a[_0x26e7a6(0x141)],{'success':!![],'names':_0x44b6aa},_0x5bcb7a[_0x26e7a6(0x214)]);}else{if(_0x5bcb7a[_0x26e7a6(0x141)]==='simulateButler'){const {targetId:_0x32d325,targetValue:_0xc0e150}=_0x5bcb7a[_0x26e7a6(0x215)];this[_0x26e7a6(0x102)][_0x26e7a6(0x1ad)](_0x26e7a6(0x1b0)+_0x32d325+'\x20=\x20'+_0xc0e150),await this[_0x26e7a6(0x1ce)](_0x26e7a6(0xe2),{'val':!![],'ack':!![]}),await this[_0x26e7a6(0x1ce)](_0x26e7a6(0x158),{'val':_0x26e7a6(0x212)+_0x32d325,'ack':!![]}),await this[_0x26e7a6(0x1ce)](_0x26e7a6(0xfa),{'val':_0x32d325,'ack':!![]}),await this['setStateAsync'](_0x26e7a6(0x1b1),{'val':_0xc0e150,'ack':!![]}),this[_0x26e7a6(0xec)](_0x5bcb7a[_0x26e7a6(0x15a)],_0x5bcb7a[_0x26e7a6(0x141)],{'success':!![]},_0x5bcb7a[_0x26e7a6(0x214)]);}else{if(_0x5bcb7a[_0x26e7a6(0x141)]===_0x26e7a6(0x1af)){const {historyId:_0x1a1f8b,rating:_0x88b4d4,comment:_0x23b528,alertReason:_0x581fc4}=_0x5bcb7a[_0x26e7a6(0x215)];_0x1a1f8b&&_0x88b4d4?(await saveFeedback(this,{'timestamp':Date[_0x26e7a6(0x1b4)](),'historyId':_0x1a1f8b,'rating':_0x88b4d4,'comment':_0x23b528,'alertReason':_0x581fc4}),this[_0x26e7a6(0xec)](_0x5bcb7a['from'],_0x5bcb7a['command'],{'success':!![]},_0x5bcb7a['callback'])):this['sendTo'](_0x5bcb7a[_0x26e7a6(0x15a)],_0x5bcb7a[_0x26e7a6(0x141)],{'success':![],'error':_0x26e7a6(0x115)},_0x5bcb7a[_0x26e7a6(0x214)]);}else{if(_0x5bcb7a[_0x26e7a6(0x141)]===_0x26e7a6(0x1f1))this[_0x26e7a6(0x102)]['info'](_0x26e7a6(0x135)),await this[_0x26e7a6(0x1ce)](_0x26e7a6(0xe2),{'val':![],'ack':!![]}),await this['setStateAsync']('analysis.automation.description',{'val':'','ack':!![]}),this['sendTo'](_0x5bcb7a['from'],_0x5bcb7a[_0x26e7a6(0x141)],{'success':!![]},_0x5bcb7a[_0x26e7a6(0x214)]);else{if(_0x5bcb7a[_0x26e7a6(0x141)]===_0x26e7a6(0x18b)){const {matrix:_0x2394f8}=_0x5bcb7a['message'];try{const _0x1ea504=await this[_0x26e7a6(0xc3)](_0x26e7a6(0x143));if(_0x1ea504&&_0x1ea504[_0x26e7a6(0x111)]){const _0x447c5c=JSON[_0x26e7a6(0x120)](_0x1ea504[_0x26e7a6(0x111)]);_0x447c5c[_0x26e7a6(0x254)]=_0x2394f8,_0x447c5c['updated']=Date[_0x26e7a6(0x1b4)](),await this[_0x26e7a6(0x1ce)](_0x26e7a6(0x143),{'val':JSON[_0x26e7a6(0x113)](_0x447c5c),'ack':!![]}),this[_0x26e7a6(0x102)][_0x26e7a6(0x1ad)](_0x26e7a6(0x244));}this[_0x26e7a6(0xec)](_0x5bcb7a['from'],_0x5bcb7a[_0x26e7a6(0x141)],{'success':!![]},_0x5bcb7a[_0x26e7a6(0x214)]);}catch(_0x1847c6){this['log'][_0x26e7a6(0x180)](_0x26e7a6(0x222)+_0x1847c6[_0x26e7a6(0x215)]);}}}}}}}}}}}}}}}if(require['main']!==module)module[a0_0x13fe7d(0x10e)]=_0x7956f3=>new CogniLiving(_0x7956f3);else new CogniLiving();