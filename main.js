const a0_0x19b867=a0_0x260c;(function(_0x21bcb7,_0x50561c){const _0x324fd8=a0_0x260c,_0x3f5b67=_0x21bcb7();while(!![]){try{const _0x28fa17=-parseInt(_0x324fd8(0x23a))/0x1*(-parseInt(_0x324fd8(0x2f5))/0x2)+-parseInt(_0x324fd8(0x193))/0x3+-parseInt(_0x324fd8(0x2da))/0x4+parseInt(_0x324fd8(0x26d))/0x5*(-parseInt(_0x324fd8(0x25e))/0x6)+parseInt(_0x324fd8(0x2ea))/0x7+-parseInt(_0x324fd8(0x219))/0x8*(-parseInt(_0x324fd8(0x2e0))/0x9)+-parseInt(_0x324fd8(0x304))/0xa;if(_0x28fa17===_0x50561c)break;else _0x3f5b67['push'](_0x3f5b67['shift']());}catch(_0x2b77a8){_0x3f5b67['push'](_0x3f5b67['shift']());}}}(a0_0x56af,0x6107a));const a0_0x5a7546=(function(){let _0x2b1c96=!![];return function(_0x4f371e,_0x824a58){const _0x42c15b=_0x2b1c96?function(){const _0x1bc796=a0_0x260c;if(_0x824a58){const _0x418b17=_0x824a58[_0x1bc796(0x2ad)](_0x4f371e,arguments);return _0x824a58=null,_0x418b17;}}:function(){};return _0x2b1c96=![],_0x42c15b;};}()),a0_0x5b9d0a=a0_0x5a7546(this,function(){const _0x3d35a9=a0_0x260c;return a0_0x5b9d0a[_0x3d35a9(0x278)]()[_0x3d35a9(0x29c)](_0x3d35a9(0x1ff))[_0x3d35a9(0x278)]()[_0x3d35a9(0x1bb)](a0_0x5b9d0a)[_0x3d35a9(0x29c)](_0x3d35a9(0x1ff));});a0_0x5b9d0a();'use strict';const utils=require(a0_0x19b867(0x1b2)),{GoogleGenerativeAI}=require('@google/generative-ai'),{spawn}=require(a0_0x19b867(0x198)),path=require(a0_0x19b867(0x21e)),fs=require('fs'),installer=require(a0_0x19b867(0x2af)),scanner=require(a0_0x19b867(0x23e)),schedulers=require(a0_0x19b867(0x1c3)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x19b867(0x209),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x19b867(0x1df),LTM_DP_DAILY_DIGESTS=a0_0x19b867(0x1b9),LTM_DP_STATUS=a0_0x19b867(0x28e),LTM_DP_TRIGGER_DIGEST=a0_0x19b867(0x1ef),LTM_DP_BASELINE_STATUS=a0_0x19b867(0x21a),LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS=a0_0x19b867(0x24c),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x19b867(0x23c),SYSTEM_DP_MODE=a0_0x19b867(0x1d9),SYSTEM_MODES={'NORMAL':a0_0x19b867(0x239),'VACATION':a0_0x19b867(0x1bf),'PARTY':a0_0x19b867(0x25f),'GUEST':a0_0x19b867(0x1d8)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x19b867(0x2c6)],SYSTEM_MODES[a0_0x19b867(0x1c2)]],PERSONA_MAPPING={'generic':a0_0x19b867(0x2a0),'senior_aal':a0_0x19b867(0x207),'family':a0_0x19b867(0x1e7),'single_comfort':'Fokus\x20auf\x20Komfort.','security':a0_0x19b867(0x30e)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x3175c2){const _0x47fa6a=a0_0x19b867;try{const _0x5ed94a=[_0x47fa6a(0x17d),_0x47fa6a(0x18e)];for(const _0x42906d of _0x5ed94a){try{const _0x3e00a6=await _0x3175c2[_0x47fa6a(0x2bc)](_0x42906d);if(_0x3e00a6)await _0x3175c2[_0x47fa6a(0x203)](_0x42906d);}catch(_0x2a33fe){}}}catch(_0x549919){}}async function checkLicense(_0x2677d8){return!![];}function a0_0x260c(_0x592e05,_0x11f9d7){const _0x16f4b3=a0_0x56af();return a0_0x260c=function(_0x5b9d0a,_0x5a7546){_0x5b9d0a=_0x5b9d0a-0x178;let _0x56af37=_0x16f4b3[_0x5b9d0a];return _0x56af37;},a0_0x260c(_0x592e05,_0x11f9d7);}async function initHistory(_0x519e91){const _0x2d0776=a0_0x19b867;try{const _0x4a5a01=await _0x519e91['getStateAsync']('events.history');_0x4a5a01&&_0x4a5a01[_0x2d0776(0x17c)]&&(_0x519e91[_0x2d0776(0x240)]=JSON[_0x2d0776(0x25a)](_0x4a5a01[_0x2d0776(0x17c)][_0x2d0776(0x278)]()));}catch(_0x58370c){_0x519e91[_0x2d0776(0x240)]=[];}try{const _0x2c2455=await _0x519e91[_0x2d0776(0x187)](_0x2d0776(0x247));if(_0x2c2455&&_0x2c2455[_0x2d0776(0x17c)])_0x519e91['analysisHistory']=JSON['parse'](_0x2c2455[_0x2d0776(0x17c)]['toString']());}catch(_0x40fb9a){_0x519e91[_0x2d0776(0x295)]=[];}if(_0x519e91[_0x2d0776(0x240)]&&_0x519e91['eventHistory']['length']>0x0){_0x519e91[_0x2d0776(0x190)][_0x2d0776(0x29f)](_0x2d0776(0x2ce));for(let _0x4ca1e0=_0x519e91['eventHistory']['length']-0x1;_0x4ca1e0>=0x0;_0x4ca1e0--){const _0xa3f53f=_0x519e91['eventHistory'][_0x4ca1e0];if(_0xa3f53f&&_0xa3f53f['id']!==undefined&&_0xa3f53f[_0x2d0776(0x229)]!==undefined)_0x519e91['sensorLastValues'][_0xa3f53f['id']]=_0xa3f53f[_0x2d0776(0x229)];}}}async function initSystemConfig(_0x5d59e2){const _0x4c4f99=a0_0x19b867;try{const _0x174fed=await _0x5d59e2['getForeignObjectAsync'](_0x4c4f99(0x205));if(_0x174fed&&_0x174fed['common'])_0x5d59e2[_0x4c4f99(0x2fa)]={'latitude':_0x174fed[_0x4c4f99(0x196)][_0x4c4f99(0x288)]||0x0,'longitude':_0x174fed[_0x4c4f99(0x196)][_0x4c4f99(0x2d9)]||0x0,'city':_0x174fed['common'][_0x4c4f99(0x204)]||''};}catch(_0x5bff17){}}async function createAllObjects(_0x392937){const _0x178f1c=a0_0x19b867;await _0x392937['extendObjectAsync'](_0x178f1c(0x22d),{'type':_0x178f1c(0x22b),'common':{'name':_0x178f1c(0x23f)},'native':{}}),await _0x392937[_0x178f1c(0x2c3)](SYSTEM_DP_MODE,{'type':_0x178f1c(0x22e),'common':{'name':_0x178f1c(0x179),'type':_0x178f1c(0x230),'role':_0x178f1c(0x22e),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x178f1c(0x243)]},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x234),{'type':'state','common':{'name':_0x178f1c(0x1dc),'type':_0x178f1c(0x230),'role':_0x178f1c(0x2b1),'read':!![],'write':![]},'native':{}}),await _0x392937['setObjectNotExistsAsync'](_0x178f1c(0x2c2),{'type':_0x178f1c(0x22e),'common':{'name':'Last\x20raw\x20event','type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x392937['setObjectNotExistsAsync']('events.history',{'type':_0x178f1c(0x22e),'common':{'name':'Event\x20History','type':_0x178f1c(0x230),'role':_0x178f1c(0x2e3),'read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x2c3)](_0x178f1c(0x2a9),{'type':_0x178f1c(0x22b),'common':{'name':_0x178f1c(0x289)},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x225),{'type':_0x178f1c(0x22e),'common':{'name':'Train\x20Security','type':_0x178f1c(0x311),'role':_0x178f1c(0x301),'read':!![],'write':!![]},'native':{}}),await _0x392937['setObjectNotExistsAsync'](_0x178f1c(0x1d7),{'type':'state','common':{'name':_0x178f1c(0x2ff),'type':_0x178f1c(0x311),'role':_0x178f1c(0x301),'read':!![],'write':!![]},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x24b),{'type':'state','common':{'name':_0x178f1c(0x2a4),'type':_0x178f1c(0x311),'role':_0x178f1c(0x301),'read':!![],'write':!![]},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x28f),{'type':_0x178f1c(0x22e),'common':{'name':_0x178f1c(0x2b7),'type':_0x178f1c(0x311),'role':_0x178f1c(0x301),'read':!![],'write':!![]},'native':{}}),await _0x392937[_0x178f1c(0x283)]('analysis.training.triggerTopology',{'type':'state','common':{'name':_0x178f1c(0x250),'type':_0x178f1c(0x311),'role':_0x178f1c(0x301),'read':!![],'write':!![]},'native':{}}),await _0x392937['setObjectNotExistsAsync']('analysis.training.status',{'type':_0x178f1c(0x22e),'common':{'name':'Training\x20Status','type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x2c3)](_0x178f1c(0x25c),{'type':_0x178f1c(0x22b),'common':{'name':_0x178f1c(0x2b4)},'native':{}}),await _0x392937['setObjectNotExistsAsync'](_0x178f1c(0x245),{'type':_0x178f1c(0x22e),'common':{'name':'Anomaly\x20Score','type':_0x178f1c(0x242),'role':_0x178f1c(0x229),'read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x2c1),{'type':_0x178f1c(0x22e),'common':{'name':'Current\x20Threshold','type':_0x178f1c(0x242),'role':_0x178f1c(0x229),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x1e5),{'type':_0x178f1c(0x22e),'common':{'name':'Last\x20Check','type':'string','role':_0x178f1c(0x199),'read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x1d3),{'type':_0x178f1c(0x22e),'common':{'name':_0x178f1c(0x1c0),'type':_0x178f1c(0x230),'role':_0x178f1c(0x2e3),'read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x2c3)]('analysis.health',{'type':_0x178f1c(0x22b),'common':{'name':'Health\x20Analysis'},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x2f3),{'type':'state','common':{'name':'Last\x20Check','type':'string','role':'date','read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x283)]('analysis.health.isAnomaly',{'type':'state','common':{'name':_0x178f1c(0x1e4),'type':_0x178f1c(0x311),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x392937['setObjectNotExistsAsync'](_0x178f1c(0x1ec),{'type':_0x178f1c(0x22e),'common':{'name':_0x178f1c(0x27b),'type':_0x178f1c(0x230),'role':_0x178f1c(0x2b1),'read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x244),{'type':'state','common':{'name':'Trend\x20Value','type':'number','role':'value','read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x1c9),{'type':_0x178f1c(0x22e),'common':{'name':_0x178f1c(0x1a4),'type':_0x178f1c(0x230),'role':_0x178f1c(0x2e3),'read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x18f),{'type':_0x178f1c(0x22e),'common':{'name':'Gait\x20Speed\x20Trend','type':'number','role':_0x178f1c(0x229),'read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x2c3)](_0x178f1c(0x2ec),{'type':'channel','common':{'name':_0x178f1c(0x248)},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x1a3),{'type':_0x178f1c(0x22e),'common':{'name':'Insulation\x20Score','type':_0x178f1c(0x230),'role':_0x178f1c(0x2b1),'read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x283)]('analysis.energy.heatingScore',{'type':_0x178f1c(0x22e),'common':{'name':_0x178f1c(0x1f3),'type':_0x178f1c(0x230),'role':_0x178f1c(0x2b1),'read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x2b3),{'type':_0x178f1c(0x22e),'common':{'name':_0x178f1c(0x2bd),'type':_0x178f1c(0x230),'role':'json','read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x2c3)](_0x178f1c(0x268),{'type':_0x178f1c(0x22b),'common':{'name':'LTM'},'native':{}}),await _0x392937[_0x178f1c(0x2c3)](LTM_DP_RAW_LOG,{'type':_0x178f1c(0x22e),'common':{'name':'Raw\x20Log','type':_0x178f1c(0x230),'role':_0x178f1c(0x2e3),'read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x2c3)](LTM_DP_DAILY_DIGESTS,{'type':_0x178f1c(0x22e),'common':{'name':_0x178f1c(0x2f9),'type':'string','role':_0x178f1c(0x2e3),'read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x24e),{'type':_0x178f1c(0x22e),'common':{'name':'Sequences','type':_0x178f1c(0x230),'role':'json','read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x22a),{'type':_0x178f1c(0x22e),'common':{'name':_0x178f1c(0x30a),'type':_0x178f1c(0x230),'role':_0x178f1c(0x2e3),'read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x2b0),{'type':_0x178f1c(0x22e),'common':{'name':_0x178f1c(0x2ca),'type':_0x178f1c(0x311),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x20f),{'type':_0x178f1c(0x22e),'common':{'name':_0x178f1c(0x1a8),'type':_0x178f1c(0x311),'role':_0x178f1c(0x301),'read':!![],'write':!![]},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x266),{'type':_0x178f1c(0x22e),'common':{'name':'Alert\x20Status','type':_0x178f1c(0x311),'role':_0x178f1c(0x25b),'read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x2d7),{'type':_0x178f1c(0x22e),'common':{'name':'Alert\x20Reason','type':_0x178f1c(0x230),'role':_0x178f1c(0x1da),'read':!![],'write':![]},'native':{}}),await _0x392937['setObjectNotExistsAsync'](_0x178f1c(0x1ae),{'type':'state','common':{'name':_0x178f1c(0x1e0),'type':_0x178f1c(0x230),'role':'text','read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x283)]('analysis.automation.patternDetected',{'type':'state','common':{'name':'Pattern\x20Detected','type':_0x178f1c(0x311),'role':_0x178f1c(0x2a2),'read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x283)]('analysis.automation.description',{'type':_0x178f1c(0x22e),'common':{'name':_0x178f1c(0x2de),'type':_0x178f1c(0x230),'role':_0x178f1c(0x2b1),'read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x2aa),{'type':'state','common':{'name':_0x178f1c(0x2b8),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x392937['setObjectNotExistsAsync'](_0x178f1c(0x1d5),{'type':_0x178f1c(0x22e),'common':{'name':_0x178f1c(0x2b5),'type':_0x178f1c(0x230),'role':_0x178f1c(0x2b1),'read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x283)]('analysis.automation.targetValue',{'type':'state','common':{'name':'Target\x20Value','type':_0x178f1c(0x230),'role':_0x178f1c(0x2b1),'read':!![],'write':![]},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x30d),{'type':_0x178f1c(0x22e),'common':{'name':_0x178f1c(0x1f5),'type':_0x178f1c(0x311),'role':_0x178f1c(0x2fc),'read':!![],'write':!![]},'native':{}}),await _0x392937[_0x178f1c(0x283)](_0x178f1c(0x1e2),{'type':_0x178f1c(0x22e),'common':{'name':'Trigger\x20Action','type':_0x178f1c(0x311),'role':'button','read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x5eee1a){const _0x281470=a0_0x19b867;try{const _0xac9cbf=await _0x5eee1a[_0x281470(0x187)](SYSTEM_DP_MODE);_0xac9cbf&&_0xac9cbf[_0x281470(0x17c)]&&Object[_0x281470(0x19e)](SYSTEM_MODES)[_0x281470(0x294)](_0xac9cbf['val'])?_0x5eee1a['currentSystemMode']=_0xac9cbf[_0x281470(0x17c)]:(_0x5eee1a[_0x281470(0x236)]=SYSTEM_MODES[_0x281470(0x243)],await _0x5eee1a[_0x281470(0x28b)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x45ae0a){_0x5eee1a['currentSystemMode']=SYSTEM_MODES[_0x281470(0x243)];}}async function loadRawEventLog(_0x3d79c9){const _0x14d60f=a0_0x19b867;try{const _0x428823=await _0x3d79c9[_0x14d60f(0x187)](LTM_DP_RAW_LOG);if(_0x428823&&_0x428823[_0x14d60f(0x17c)])_0x3d79c9[_0x14d60f(0x2cb)]=JSON[_0x14d60f(0x25a)](_0x428823[_0x14d60f(0x17c)]);}catch(_0x50ad61){_0x3d79c9[_0x14d60f(0x2cb)]=[];}}async function saveRawEventLog(_0x2e0f16){const _0x15bbe3=a0_0x19b867;if(_0x2e0f16['rawEventLog'][_0x15bbe3(0x2fd)]>RAW_LOG_MAX_SIZE)_0x2e0f16[_0x15bbe3(0x2cb)][_0x15bbe3(0x195)](0x0,_0x2e0f16['rawEventLog']['length']-RAW_LOG_MAX_SIZE);await _0x2e0f16[_0x15bbe3(0x28b)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x2e0f16[_0x15bbe3(0x2cb)]),'ack':!![]});}async function loadDailyDigests(_0x65ca5a){const _0x45daba=a0_0x19b867;try{const _0x537121=await _0x65ca5a[_0x45daba(0x187)](LTM_DP_DAILY_DIGESTS);if(_0x537121&&_0x537121['val'])_0x65ca5a[_0x45daba(0x1e3)]=JSON['parse'](_0x537121[_0x45daba(0x17c)]);}catch(_0x28fa23){_0x65ca5a[_0x45daba(0x1e3)]=[];}await updateBaselineStatus(_0x65ca5a);}async function saveDailyDigests(_0x301af9,_0x172251=!![]){const _0x53b135=a0_0x19b867,_0x266ba3=_0x301af9[_0x53b135(0x2f1)]['ltmLtbWindowDays']||0x3c;_0x301af9[_0x53b135(0x1e3)][_0x53b135(0x2fd)]>_0x266ba3&&_0x301af9[_0x53b135(0x1e3)][_0x53b135(0x195)](0x0,_0x301af9[_0x53b135(0x1e3)][_0x53b135(0x2fd)]-_0x266ba3);await _0x301af9['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x53b135(0x27e)](_0x301af9[_0x53b135(0x1e3)]),'ack':!![]});if(_0x172251)await updateBaselineStatus(_0x301af9);}async function updateAnalysisHistory(_0xd523dd,_0x4a7250){const _0x4f635d=a0_0x19b867;_0xd523dd['analysisHistory'][_0x4f635d(0x2cc)](_0x4a7250);if(_0xd523dd['analysisHistory'][_0x4f635d(0x2fd)]>HISTORY_MAX_SIZE)_0xd523dd[_0x4f635d(0x295)]['pop']();await _0xd523dd[_0x4f635d(0x28b)](_0x4f635d(0x247),{'val':JSON['stringify'](_0xd523dd[_0x4f635d(0x295)]),'ack':!![]});}async function updateBaselineStatus(_0x15e04e){const _0x8d9003=a0_0x19b867;if(!_0x15e04e[_0x8d9003(0x210)]){await _0x15e04e[_0x8d9003(0x28b)](LTM_DP_BASELINE_STATUS,{'val':_0x8d9003(0x24d),'ack':!![]});return;}const _0x48c5d0=_0x15e04e['dailyDigests'][_0x8d9003(0x2fd)]>=(_0x15e04e[_0x8d9003(0x2f1)][_0x8d9003(0x1bc)]||0x7)?'Aktiv\x20('+_0x15e04e['dailyDigests'][_0x8d9003(0x2fd)]+_0x8d9003(0x2b6):_0x8d9003(0x272)+_0x15e04e[_0x8d9003(0x1e3)][_0x8d9003(0x2fd)]+'/'+(_0x15e04e[_0x8d9003(0x2f1)][_0x8d9003(0x1bc)]||0x7)+')';await _0x15e04e[_0x8d9003(0x28b)](LTM_DP_BASELINE_STATUS,{'val':_0x48c5d0,'ack':!![]});}async function initSensorSubscriptions(_0x11db07){const _0x450eb9=a0_0x19b867,_0x3a91da=_0x11db07[_0x450eb9(0x2f1)][_0x450eb9(0x264)];if(_0x3a91da)for(const _0x577e83 of _0x3a91da){await _0x11db07[_0x450eb9(0x184)](_0x577e83['id']);}}async function initPresenceSubscriptions(_0x2ed8f2){const _0x4a6e1e=a0_0x19b867,_0xf16eb9=_0x2ed8f2[_0x4a6e1e(0x2f1)][_0x4a6e1e(0x306)];if(_0xf16eb9)for(const _0xb97869 of _0xf16eb9){await _0x2ed8f2[_0x4a6e1e(0x184)](_0xb97869);}}async function setupTelegramListener(_0x261ef8){const _0x2bf16b=a0_0x19b867,_0x5b117c=_0x261ef8[_0x2bf16b(0x2f1)]['notifyTelegramInstance'];if(_0x261ef8[_0x2bf16b(0x2f1)][_0x2bf16b(0x221)]&&_0x5b117c)await _0x261ef8[_0x2bf16b(0x184)](_0x5b117c+_0x2bf16b(0x235));}async function checkWifiPresence(_0xbd294b){const _0x27eda1=a0_0x19b867;try{const _0x4e435a=_0xbd294b[_0x27eda1(0x2f1)][_0x27eda1(0x306)]||[];let _0x5c4e18=![];const _0x514c7a=[];for(const _0x4fa6bf of _0x4e435a){try{const _0x84cc0c=await _0xbd294b['getForeignStateAsync'](_0x4fa6bf);_0x84cc0c&&(_0x84cc0c[_0x27eda1(0x17c)]===!![]||_0x84cc0c[_0x27eda1(0x17c)]===_0x27eda1(0x2ee)||_0x84cc0c['val']===0x1)&&(_0x5c4e18=!![],_0x514c7a['push'](_0x4fa6bf));}catch(_0x235f4c){}}return await _0xbd294b['setStateAsync'](_0x27eda1(0x234),{'val':_0x514c7a[_0x27eda1(0x267)](',\x20'),'ack':!![]}),_0x5c4e18&&(_0xbd294b[_0x27eda1(0x18c)]&&(_0xbd294b['log']['info'](_0x27eda1(0x30c)),abortExitTimer(_0xbd294b)),!_0xbd294b['isPresent']&&_0xbd294b[_0x27eda1(0x236)]===SYSTEM_MODES[_0x27eda1(0x243)]&&await setPresence(_0xbd294b,!![])),_0x5c4e18;}catch(_0x1b3f4b){return![];}}function startExitTimer(_0xeb3b30){const _0x108ae3=a0_0x19b867;abortExitTimer(_0xeb3b30),_0xeb3b30[_0x108ae3(0x1f8)]=!![],_0xeb3b30['exitGraceTimer']=setTimeout(()=>{const _0x3abfce=_0x108ae3;_0xeb3b30[_0x3abfce(0x1f8)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0xeb3b30['exitTimer']=setTimeout(()=>{const _0x544fa2=_0x108ae3;setPresence(_0xeb3b30,![]),_0xeb3b30[_0x544fa2(0x18c)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x2060d8){const _0x2833ff=a0_0x19b867;if(_0x2060d8[_0x2833ff(0x18c)])clearTimeout(_0x2060d8[_0x2833ff(0x18c)]);if(_0x2060d8['exitGraceTimer'])clearTimeout(_0x2060d8[_0x2833ff(0x1fa)]);_0x2060d8[_0x2833ff(0x18c)]=null,_0x2060d8['exitGraceTimer']=null,_0x2060d8['isGracePeriodActive']=![];}async function setPresence(_0x3058f2,_0x3a0265){const _0x31d449=a0_0x19b867;if(_0x3058f2[_0x31d449(0x309)]===_0x3a0265)return;_0x3058f2[_0x31d449(0x309)]=_0x3a0265,await _0x3058f2['setStateAsync']('system.isPresent',{'val':_0x3a0265,'ack':!![]});}async function executeAutomationAction(_0x20c3c4){const _0x4b2475=a0_0x19b867;try{const _0x3574f5=await _0x20c3c4[_0x4b2475(0x187)](_0x4b2475(0x1d5)),_0xac5a1=await _0x20c3c4['getStateAsync']('analysis.automation.targetValue');if(_0x3574f5&&_0x3574f5[_0x4b2475(0x17c)]&&_0xac5a1){const _0x2babdc=_0x3574f5[_0x4b2475(0x17c)];let _0x3340b4=_0xac5a1['val'];try{_0x3340b4=JSON[_0x4b2475(0x25a)](_0x3340b4);}catch(_0x580bd4){}_0x20c3c4[_0x4b2475(0x190)][_0x4b2475(0x29f)](_0x4b2475(0x303)+_0x2babdc+_0x4b2475(0x2d8)+_0x3340b4),await _0x20c3c4[_0x4b2475(0x1a6)](_0x2babdc,_0x3340b4);}else _0x20c3c4[_0x4b2475(0x190)]['warn']('ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x5d7ccb){_0x20c3c4[_0x4b2475(0x190)][_0x4b2475(0x218)](_0x4b2475(0x293)+_0x5d7ccb[_0x4b2475(0x1fd)]);}}async function processSensorEvent(_0x571666,_0xe6b30a,_0x2d5dee,_0x78d575){const _0x5f2f72=a0_0x19b867;if(!_0x78d575)return;const _0x36df43=_0x2d5dee['val'],_0x28e1ae=Date[_0x5f2f72(0x182)](),_0x159dba=_0x571666[_0x5f2f72(0x1c4)][_0xe6b30a];_0x571666[_0x5f2f72(0x1c4)][_0xe6b30a]=_0x36df43;if(!_0x78d575['logDuplicates']&&_0x159dba!=undefined&&_0x159dba==_0x36df43)return;const _0xa1fbb7=(_0x78d575[_0x5f2f72(0x254)]||'')['toLowerCase'](),_0x2275de=_0xa1fbb7[_0x5f2f72(0x294)](_0x5f2f72(0x26f))||_0xa1fbb7[_0x5f2f72(0x294)](_0x5f2f72(0x29b))||_0xa1fbb7[_0x5f2f72(0x294)](_0x5f2f72(0x21f))||_0xa1fbb7['includes'](_0x5f2f72(0x2c8));_0x571666[_0x5f2f72(0x210)]&&_0x2275de&&recordThermodynamics(_0x571666,_0xe6b30a,_0x36df43,_0x78d575[_0x5f2f72(0x1cc)]);const _0x31726a={'timestamp':_0x28e1ae,'id':_0xe6b30a,'name':_0x78d575[_0x5f2f72(0x29a)],'type':_0x78d575[_0x5f2f72(0x254)],'location':_0x78d575[_0x5f2f72(0x1cc)],'value':_0x36df43};_0x571666[_0x5f2f72(0x240)][_0x5f2f72(0x2cc)](_0x31726a);if(_0x571666[_0x5f2f72(0x240)][_0x5f2f72(0x2fd)]>HISTORY_MAX_SIZE)_0x571666[_0x5f2f72(0x240)][_0x5f2f72(0x1b0)]();await _0x571666[_0x5f2f72(0x28b)](_0x5f2f72(0x2c2),{'val':JSON[_0x5f2f72(0x27e)](_0x31726a),'ack':!![]}),await _0x571666[_0x5f2f72(0x28b)](_0x5f2f72(0x2be),{'val':JSON[_0x5f2f72(0x27e)](_0x571666[_0x5f2f72(0x240)]),'ack':!![]});_0x571666[_0x5f2f72(0x210)]&&(_0x571666[_0x5f2f72(0x2cb)][_0x5f2f72(0x241)](_0x31726a),await saveRawEventLog(_0x571666),recordSequence(_0x571666,_0x31726a));if(_0x78d575[_0x5f2f72(0x227)]&&_0x36df43===!![]){if(_0x571666[_0x5f2f72(0x309)]&&!_0x571666[_0x5f2f72(0x1f8)])startExitTimer(_0x571666);else{if(!_0x571666[_0x5f2f72(0x309)])setPresence(_0x571666,!![]);}}else{if(_0x78d575['type']===_0x5f2f72(0x1cf)&&_0x36df43===!![]){if(_0x571666['exitTimer'])abortExitTimer(_0x571666);if(!_0x571666[_0x5f2f72(0x309)]&&_0x571666[_0x5f2f72(0x236)]===SYSTEM_MODES[_0x5f2f72(0x243)])setPresence(_0x571666,!![]);}}}async function recordThermodynamics(_0x511970,_0x37379b,_0x133261,_0x30015b){const _0x2484e6=a0_0x19b867,_0x1ce1af=await getOutsideTemperatureNumeric(_0x511970),_0x30a45c=await _0x511970[_0x2484e6(0x187)](_0x2484e6(0x22a));let _0x41b727=[];if(_0x30a45c&&_0x30a45c['val'])try{_0x41b727=JSON['parse'](_0x30a45c[_0x2484e6(0x17c)]);}catch(_0x38b221){}_0x41b727[_0x2484e6(0x241)]({'ts':Date[_0x2484e6(0x182)](),'room':_0x30015b||_0x2484e6(0x257),'t_in':_0x133261,'t_out':_0x1ce1af});if(_0x41b727[_0x2484e6(0x2fd)]>THERMO_LOG_SIZE)_0x41b727['shift']();await _0x511970[_0x2484e6(0x28b)](_0x2484e6(0x22a),{'val':JSON[_0x2484e6(0x27e)](_0x41b727),'ack':!![]});}function a0_0x56af(){const _0x3780ed=['ENERGY_PREDICT_RESULT','lampe',')\x20-\x20SAFE\x20BOOT','analysis.training','analysis.automation.detectedPatterns','lastAlertState','onUnload','apply','payload','./lib/installer','analysis.trigger','text','[RECORDER]\x20Error:\x20','analysis.energy.forecast','Security\x20Monitor','Target\x20ID','\x20Tage)','Train\x20Comfort','Detected\x20Patterns','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','[RESULT]','ENERGY_TRAIN_RESULT','getObjectAsync','Temperature\x20Forecast','events.history','ANOMALY','door','analysis.security.currentThreshold','events.lastEvent','extendObjectAsync','Kein\x20API\x20Key.','simulateButler','PARTY','python3','heizung','targetId','Trigger\x20Analysis','rawEventLog','unshift','Adapter','Restoring\x20sensor\x20cache...','telegram','ltmLtbWindowDays','OK:\x20','detected','âš ï¸\x20SECURITY\x20ALARM:\x20','.\x20ANWESEND:\x20','isAlert','COMFORT_RESULT','analysis.alertReason','\x20=\x20','longitude','1119080jJgBKK','scanForDevices','toISOString','enum.functions.*','Description','\x20->\x20','9CBGfke','\x0aGrund:\x20','N/A','json','setupDriftAnalysisScheduler','dependencyInstallInProgress','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','startsWith','geminiApiKey','setupBriefingScheduler','4188968ebbwri','.\x20EMERGENCY:\x20','analysis.energy','trim','online','Gemini\x20AI\x20initialized.','automationProposal','config','useWeather','analysis.health.lastCheck','is_anomaly','70tJBYws','object','TREND_RESULT','scanDevices','Daily\x20Digests','systemConfig','PREDICT_ENERGY','switch','length','toLocaleTimeString','Train\x20Health','getHours','button','tÃ¼r','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','4760780JNWAax','map','presenceDevices','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','fenster','isPresent','Thermodynamics','replace','WiFi\x20Presence\x20detected.','analysis.automation.autoApply','PRIORITÃ„T:\x20Sicherheit.','analysis.automation.patternDetected','[LOG]','boolean','version','cogni-living\x20adapter\x20starting\x20(v','weatherunderground','occupancy','KI-Modell\x20nicht\x20initialisiert','targetValue','cancel','description','System\x20Mode','analysis.health.isAnomaly','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','val','analysis.history_debug_00','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','[PYTHON]\x20','alertReason','outdoorSensorId','now','onReady','subscribeForeignStatesAsync','instance','fill','getStateAsync','openweathermap','stdout','N/A\x20(Learning)','HEALTH_TRAIN_RESULT','exitTimer','PONG','events.history_debug_00','analysis.health.gaitSpeed','log','.NextHours.Location_1.Day_1.current.temp_value','toLowerCase','927003FJhYzZ','change_percent','splice','common','accuweather','child_process','date','licenseKey','from','existsSync','bewegung','values','round','.forecast.current.state','loc','slice','analysis.energy.insulationScore','Today\x20Vector\x20(15m)','ANALYZE_GAIT','setForeignStateAsync','setState','Trigger\x20Briefing','insulation','Training\x20Error:\x20','callback','âš ï¸\x20ALARM:\x20','Sec-Training\x20started...','analysis.activitySummary','calendarInstance','pop','analysisInterval','@iobroker/adapter-core','.\x20SYSTEM_MODE:\x20','application/json','TRAINING_COMPLETE','ðŸ\x20Python\x20Pong','debug','Keine\x20Wetterdaten\x20verfÃ¼gbar.','LTM.dailyDigests','subscribeStates','constructor','minDaysForBaseline','modeResetJob','useCalendar','vacation','Topology\x20Matrix','getGenerativeModel','GUEST','./lib/scheduler','sensorLastValues','generateContent','Wetterdaten\x20deaktiviert.','getOverviewData','getForeignObjectsAsync','analysis.health.todayVector','heating','BUILD_TOPOLOGY','location','kill','onStateChange','motion','triggerDailyDigest','cogni-living','livingContext','analysis.security.topologyMatrix','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','analysis.automation.targetId','TRAIN_COMFORT','analysis.training.triggerHealth','guest','system.mode','text.alarm','command','Who\x20is\x20present?','setHours','getTime','LTM.rawEventLog','Activity\x20Summary','.Current.WeatherText','analysis.automation.triggerAction','dailyDigests','Anomaly\x20Detected','analysis.security.lastCheck','HEALTH_RESULT','Fokus\x20auf\x20Familienroutinen.','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','driftAnalysisTimer','getMinutes','analysis.health.trendDiagnosis','ready','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','LTM.triggerDailyDigest','ltmStbWindowDays','namespace','bind','Heating\x20Score','response','Auto\x20Apply','Gemini\x20Error:\x20','analysis.lastResult','isGracePeriodActive','enum','exitGraceTimer','inactivityThresholdHours','TRAIN_ENERGY','message','rule','(((.+)+)+)+$','some','Skipped\x20(No\x20AI\x20or\x20Data)','Keine\x20Termine.','delObjectAsync','city','system.config','Missing\x20data','PRIORITÃ„T:\x20Gesundheit/AAL.','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','models/gemini-flash-latest','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','No\x20instance','service.py','.\x20WETTER:\x20','\x20new\x20patterns.','analysis.triggerBriefing','isProVersion','split','ANALYZE_SEQUENCE','data','success','write','analysis.training.status','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','error','5132872WohmMP','LTM.baselineStatus','systemUUID','unknown','.forecast.current.temperature','path','klima','Success','notifyTelegramEnabled','checkAndInstall','sendTo','ltmJob','analysis.training.triggerSecurity','summary','isExit','apiKey','value','LTM.trainingData.thermodynamics','channel','Keine\x20Details.','system','state','window','string','dimmer','ðŸŒ…\x20Morning\x20Briefing:\x0a','genAI','system.presenceWho','.communicate.request','currentSystemMode','Err:\x20','analysis.training.triggerTopology','normal','11533Owedsv','writable','LTM.driftAnalysis.lastCheck','Gemini\x20Init\x20Error:\x20','./lib/scanner','System','eventHistory','push','number','NORMAL','analysis.health.trendValue','analysis.security.lastScore','testApiKey','analysis.analysisHistory','Energy\x20Intelligence','Success:\x20','forEach','analysis.training.triggerEnergy','LTM.driftAnalysis.baselineDrift','Deaktiviert\x20(Pro-Feature)','LTM.trainingData.sequences','stateChange','Build\x20Topology','substring','kontakt','details','type','Kalender\x20deaktiviert.','Started...','Unknown','presence','analysisTimer','parse','indicator.alarm','analysis.security','.forecast.current.temp','3066GaNmLC','party','Briefing\x20Error:\x20','rating','geminiModel','analysis.automation.targetValue','devices','âœ…\x20HEALTH\x20TRAINED.','analysis.isAlert','join','LTM','ðŸ“\x20Feedback\x20received:\x20','status','getFullYear','analysis.energy.heatingScore','1775UdKGxY','light','temperature','schalter','weatherInstance','Lernphase\x20(','TRAIN_SECURITY','python_service','pythonProcess','GAIT_RESULT','.Current.Temperature','toString','timestamp','prÃ¤senz','Trend','VACATION','baselineDrift','stringify','endsWith','analysis.automation.description','TRAIN_HEALTH','activityLevel','setObjectNotExistsAsync','floor','briefingJob','stdin','close','latitude','AI\x20Training','PYTHON_EXE','setStateAsync','ack','main','LTM.processingStatus','analysis.training.triggerComfort','onMessage','\x0aSTB:\x20','getEnums','BUTLER\x20Execution\x20Error:\x20','includes','analysisHistory','Â°C,\x20','find','getForeignStateAsync','setupLtmScheduler','name','temperatur','search','toFixed','autoApply','info','Analysiere\x20ausgewogen.','getDate','indicator','unload','Train\x20Energy','Kein\x20API\x20Key!'];a0_0x56af=function(){return _0x3780ed;};return a0_0x56af();}async function getOutsideTemperatureNumeric(_0x84f851){const _0x38ffe9=a0_0x19b867;if(_0x84f851[_0x38ffe9(0x2f1)][_0x38ffe9(0x181)])try{const _0xb70458=await _0x84f851[_0x38ffe9(0x298)](_0x84f851[_0x38ffe9(0x2f1)][_0x38ffe9(0x181)]);if(_0xb70458&&_0xb70458['val']!==undefined&&_0xb70458[_0x38ffe9(0x17c)]!==null)return parseFloat(_0xb70458['val']);}catch(_0x41a5cf){}const _0x6ecdf9=_0x84f851[_0x38ffe9(0x2f1)]['weatherInstance'];if(!_0x84f851[_0x38ffe9(0x2f1)][_0x38ffe9(0x2f2)]||!_0x6ecdf9)return null;try{let _0x12d376='';if(_0x6ecdf9[_0x38ffe9(0x294)](_0x38ffe9(0x197)))_0x12d376=_0x6ecdf9+_0x38ffe9(0x277);else{if(_0x6ecdf9['includes']('daswetter'))_0x12d376=_0x6ecdf9+_0x38ffe9(0x191);else{if(_0x6ecdf9[_0x38ffe9(0x294)](_0x38ffe9(0x188)))_0x12d376=_0x6ecdf9+_0x38ffe9(0x21d);else{if(_0x6ecdf9[_0x38ffe9(0x294)](_0x38ffe9(0x314)))_0x12d376=_0x6ecdf9+_0x38ffe9(0x25d);}}}if(_0x12d376){const _0x52112a=await _0x84f851['getForeignStateAsync'](_0x12d376);if(_0x52112a&&_0x52112a['val']!==undefined&&_0x52112a['val']!==null)return parseFloat(_0x52112a['val']);}}catch(_0x36264c){}return null;}async function recordSequence(_0x4b74ca,_0x1ef70c){const _0x384b8f=a0_0x19b867,_0x3fceb1=(_0x1ef70c[_0x384b8f(0x254)]||'')[_0x384b8f(0x192)](),_0x52775d=[_0x384b8f(0x1cf),_0x384b8f(0x19d),_0x384b8f(0x27a),_0x384b8f(0x258),_0x384b8f(0x315),_0x384b8f(0x2c0),_0x384b8f(0x302),_0x384b8f(0x22f),_0x384b8f(0x308),'contact',_0x384b8f(0x252),_0x384b8f(0x26e),'licht',_0x384b8f(0x2fc),_0x384b8f(0x270),_0x384b8f(0x231),_0x384b8f(0x2a7)];if(!_0x52775d[_0x384b8f(0x200)](_0x1025e8=>_0x3fceb1[_0x384b8f(0x294)](_0x1025e8)))return;if(!_0x1ef70c[_0x384b8f(0x229)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x384b8f(0x241)]({'loc':_0x1ef70c['location']||_0x384b8f(0x257),'id':_0x1ef70c['id'],'ts':Date[_0x384b8f(0x182)]()}),sequenceTimer=setTimeout(async()=>{if(activeSequence['length']>0x1)await saveCompletedSequence(_0x4b74ca);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x52db2b){const _0x1e31d0=a0_0x19b867;try{const _0x4d87cf=await _0x52db2b['getStateAsync']('LTM.trainingData.sequences');let _0x4e61e2=[];if(_0x4d87cf&&_0x4d87cf[_0x1e31d0(0x17c)])try{_0x4e61e2=JSON['parse'](_0x4d87cf[_0x1e31d0(0x17c)]);}catch(_0x406963){}const _0x46ff77=activeSequence[0x0]['ts'],_0x32b671=activeSequence[_0x1e31d0(0x305)](_0x4b25cb=>({'loc':_0x4b25cb[_0x1e31d0(0x1a1)],'t_delta':Math[_0x1e31d0(0x19f)]((_0x4b25cb['ts']-_0x46ff77)/0x3e8)})),_0x80b3e3={'timestamp':new Date(_0x46ff77)[_0x1e31d0(0x2dc)](),'steps':_0x32b671,'duration':Math['round']((activeSequence[activeSequence[_0x1e31d0(0x2fd)]-0x1]['ts']-_0x46ff77)/0x3e8),'daytime':new Date(_0x46ff77)['getHours']()};_0x4e61e2[_0x1e31d0(0x241)](_0x80b3e3);if(_0x4e61e2[_0x1e31d0(0x2fd)]>MAX_TRAINING_SET_SIZE)_0x4e61e2['shift']();await _0x52db2b[_0x1e31d0(0x28b)](_0x1e31d0(0x24e),{'val':JSON['stringify'](_0x4e61e2),'ack':!![]}),runSecurityCheck(_0x52db2b,_0x80b3e3);}catch(_0x185606){_0x52db2b['log'][_0x1e31d0(0x218)](_0x1e31d0(0x2b2)+_0x185606[_0x1e31d0(0x1fd)]);}}function runSecurityCheck(_0x582e99,_0x58a633){const _0x435556=a0_0x19b867;if(!_0x582e99[_0x435556(0x210)])return;sendToPython(_0x582e99,_0x435556(0x212),{'sequence':_0x58a633});}async function createDailyDigest(_0x53e065){const _0x4d1836=a0_0x19b867;if(!_0x53e065[_0x4d1836(0x210)])return;await _0x53e065[_0x4d1836(0x28b)](LTM_DP_STATUS,{'val':_0x4d1836(0x256),'ack':!![]});if(!_0x53e065['geminiModel']||_0x53e065[_0x4d1836(0x2cb)][_0x4d1836(0x2fd)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x53e065['setStateAsync'](LTM_DP_STATUS,{'val':_0x4d1836(0x201),'ack':!![]});return;}const _0x23c419=JSON[_0x4d1836(0x25a)](JSON[_0x4d1836(0x27e)](_0x53e065[_0x4d1836(0x2cb)])),_0x11093c=_0x23c419[_0x4d1836(0x2fd)],_0x104574='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0x4d1836(0x27e)](_0x23c419);try{const _0x4fde7d=await _0x53e065[_0x4d1836(0x262)][_0x4d1836(0x1c5)](_0x104574),_0x162440=JSON[_0x4d1836(0x25a)](_0x4fde7d['response'][_0x4d1836(0x2b1)]()[_0x4d1836(0x30b)](/```json|```/g,'')[_0x4d1836(0x2ed)]()),_0x579d5e={'timestamp':new Date()[_0x4d1836(0x2dc)](),'eventCount':_0x11093c,'summary':_0x162440[_0x4d1836(0x226)]||'Digest','activityLevel':_0x162440[_0x4d1836(0x282)]||_0x4d1836(0x239),'systemMode':_0x53e065[_0x4d1836(0x236)]};_0x53e065['dailyDigests']['push'](_0x579d5e),await saveDailyDigests(_0x53e065),_0x53e065[_0x4d1836(0x2cb)]=[],await saveRawEventLog(_0x53e065),await _0x53e065['setStateAsync'](LTM_DP_STATUS,{'val':_0x4d1836(0x220),'ack':!![]});if(_0x53e065[_0x4d1836(0x210)])sendToPython(_0x53e065,'ANALYZE_HEALTH',{'digest':_0x579d5e});}catch(_0x56a8b0){_0x53e065['log']['error'](_0x56a8b0[_0x4d1836(0x1fd)]);}}async function runBaselineDriftAnalysis(_0x166727){const _0x373f38=a0_0x19b867;if(!_0x166727[_0x373f38(0x210)]||!_0x166727['geminiModel'])return;const _0x23c394=_0x166727[_0x373f38(0x2f1)][_0x373f38(0x1f0)]||0xe;if(_0x166727[_0x373f38(0x1e3)][_0x373f38(0x2fd)]<_0x23c394+0x7){await _0x166727[_0x373f38(0x28b)](LTM_DP_DRIFT_STATUS,{'val':_0x373f38(0x18a),'ack':!![]});return;}const _0x37e161=_0x166727[_0x373f38(0x1e3)][_0x373f38(0x1a2)](-_0x23c394),_0x2afc98=_0x166727['dailyDigests'][_0x373f38(0x1a2)](0x0,_0x166727[_0x373f38(0x1e3)][_0x373f38(0x2fd)]-_0x23c394),_0x35a98e=_0x373f38(0x1d4)+JSON[_0x373f38(0x27e)](_0x2afc98)+_0x373f38(0x291)+JSON[_0x373f38(0x27e)](_0x37e161);try{const _0x3e983a=await _0x166727[_0x373f38(0x262)]['generateContent'](_0x35a98e),_0x1415b3=JSON[_0x373f38(0x25a)](_0x3e983a['response'][_0x373f38(0x2b1)]()[_0x373f38(0x30b)](/```json|```/g,'')['trim']());_0x1415b3[_0x373f38(0x27d)]&&(await _0x166727[_0x373f38(0x28b)](LTM_DP_DRIFT_STATUS,{'val':_0x1415b3[_0x373f38(0x27d)],'ack':!![]}),await _0x166727[_0x373f38(0x28b)](LTM_DP_DRIFT_DETAILS,{'val':_0x1415b3['driftDetails'],'ack':!![]}),await _0x166727['setStateAsync'](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x373f38(0x182)](),'ack':!![]}));}catch(_0x19f770){}}async function sendMorningBriefing(_0x345430){const _0x2c7353=a0_0x19b867;if(!_0x345430[_0x2c7353(0x262)])return;try{const _0x5b009d=_0x2c7353(0x17b),_0xf53320=await _0x345430['geminiModel'][_0x2c7353(0x1c5)](_0x5b009d),_0x39037a=_0xf53320[_0x2c7353(0x1f4)][_0x2c7353(0x2b1)]();sendNotification(_0x345430,_0x2c7353(0x232)+_0x39037a);}catch(_0x325f59){_0x345430[_0x2c7353(0x190)]['error'](_0x2c7353(0x260)+_0x325f59[_0x2c7353(0x1fd)]);}}function stopPythonService(_0x30d00d){const _0x265e5e=a0_0x19b867;if(_0x30d00d[_0x265e5e(0x275)]){try{_0x30d00d[_0x265e5e(0x275)][_0x265e5e(0x1cd)]();}catch(_0x40a40a){}_0x30d00d[_0x265e5e(0x275)]=null;}}function sendToPython(_0x1619a0,_0x358b6d,_0x19c49c={}){const _0x59d861=a0_0x19b867;if(!_0x1619a0[_0x59d861(0x275)]||!_0x1619a0[_0x59d861(0x275)][_0x59d861(0x286)][_0x59d861(0x23b)])return;const _0x4e953d=JSON[_0x59d861(0x27e)]({'command':_0x358b6d,..._0x19c49c});try{_0x1619a0[_0x59d861(0x275)]['stdin'][_0x59d861(0x215)](_0x4e953d+'\x0a');}catch(_0x3626b0){}}function runPythonHealthCheck(_0x2864fb){const _0x90d152=a0_0x19b867;if(!_0x2864fb[_0x90d152(0x1e3)]||_0x2864fb[_0x90d152(0x1e3)][_0x90d152(0x2fd)]<0x2)return;const _0x46637c=_0x2864fb['dailyDigests'][_0x90d152(0x305)](_0x21ac76=>{const _0x2b7838=_0x90d152,_0x53f20c=(_0x21ac76[_0x2b7838(0x282)]||'')[_0x2b7838(0x192)]();return ACTIVITY_LEVEL_MAP[_0x53f20c]||0x32;});sendToPython(_0x2864fb,'ANALYZE_TREND',{'values':_0x46637c,'tag':'Activity-Level'});}function handlePythonResult(_0x165554,_0x37e72a){const _0x453075=a0_0x19b867;if(_0x37e72a[_0x453075(0x254)]===_0x453075(0x18d))_0x165554[_0x453075(0x190)][_0x453075(0x1b7)](_0x453075(0x1b6));else{if(_0x37e72a['type']==='SECURITY_RESULT'){const {anomaly_score:_0x284a01,is_anomaly:_0x3efb55,threshold:_0x7f0793,explanation:_0x132331}=_0x37e72a[_0x453075(0x2ae)];_0x165554[_0x453075(0x190)][_0x453075(0x29f)](_0x453075(0x17e)+_0x284a01['toFixed'](0x5)+_0x453075(0x2df)+(_0x3efb55?_0x453075(0x2bf):'OK')),_0x165554[_0x453075(0x28b)](_0x453075(0x245),{'val':_0x284a01,'ack':!![]}),_0x165554[_0x453075(0x28b)](_0x453075(0x1e5),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x7f0793)_0x165554['setStateAsync']('analysis.security.currentThreshold',{'val':_0x7f0793,'ack':!![]});if(_0x3efb55){let _0xc8a57d=_0x453075(0x2b9)+_0x284a01[_0x453075(0x29d)](0x4)+')';if(_0x132331&&_0x132331!==_0x453075(0x257))_0xc8a57d+=_0x453075(0x2e1)+_0x132331;_0x165554[_0x453075(0x28b)](_0x453075(0x266),{'val':!![],'ack':!![]}),_0x165554[_0x453075(0x28b)]('analysis.alertReason',{'val':_0xc8a57d,'ack':!![]}),sendNotification(_0x165554,_0x453075(0x2d3)+_0xc8a57d,![],!![]);}}else{if(_0x37e72a[_0x453075(0x254)]===_0x453075(0x1b5)){const _0x1d2086=_0x37e72a[_0x453075(0x2ae)][_0x453075(0x253)]||'',_0x3ce924=_0x37e72a['payload']['threshold'],_0x4ad267=_0x37e72a[_0x453075(0x2ae)][_0x453075(0x214)]?_0x453075(0x249)+new Date()[_0x453075(0x2fe)]()+'\x20('+_0x1d2086+')':'Failed:\x20'+_0x37e72a['payload']['reason'];_0x165554[_0x453075(0x28b)](_0x453075(0x216),{'val':_0x4ad267,'ack':!![]});if(_0x37e72a[_0x453075(0x2ae)][_0x453075(0x214)]&&_0x3ce924)_0x165554[_0x453075(0x28b)](_0x453075(0x2c1),{'val':_0x3ce924,'ack':!![]});}else{if(_0x37e72a[_0x453075(0x254)]===_0x453075(0x2d6)){const {patterns:_0xa9c14e}=_0x37e72a['payload'];if(_0xa9c14e&&_0xa9c14e[_0x453075(0x2fd)]>0x0){_0x165554['log'][_0x453075(0x29f)]('ðŸ›‹ï¸\x20BUTLER:\x20Found\x20'+_0xa9c14e[_0x453075(0x2fd)]+_0x453075(0x20e)),_0x165554[_0x453075(0x28b)](_0x453075(0x2aa),{'val':JSON[_0x453075(0x27e)](_0xa9c14e),'ack':!![]});const _0x14078e=_0xa9c14e[0x0],_0x20be46='Regel\x20erkannt:\x20'+_0x14078e[_0x453075(0x1fe)]+'\x20('+(_0x14078e['confidence']*0x64)[_0x453075(0x29d)](0x0)+'%)';_0x165554[_0x453075(0x28b)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x165554[_0x453075(0x28b)]('analysis.automation.description',{'val':_0x20be46,'ack':!![]});}else _0x165554[_0x453075(0x190)][_0x453075(0x29f)]('ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.'),_0x165554['setStateAsync'](_0x453075(0x30f),{'val':![],'ack':!![]}),_0x165554[_0x453075(0x28b)](_0x453075(0x2aa),{'val':'[]','ack':!![]});}else{if(_0x37e72a[_0x453075(0x254)]===_0x453075(0x2bb)){if(_0x37e72a['payload'][_0x453075(0x214)])try{const _0x2305a4=JSON[_0x453075(0x25a)](_0x37e72a[_0x453075(0x2ae)]['details']);if(_0x2305a4[_0x453075(0x1a9)])_0x165554[_0x453075(0x28b)]('analysis.energy.insulationScore',{'val':JSON[_0x453075(0x27e)](_0x2305a4['insulation']),'ack':!![]});if(_0x2305a4[_0x453075(0x1ca)])_0x165554[_0x453075(0x28b)](_0x453075(0x26c),{'val':JSON['stringify'](_0x2305a4[_0x453075(0x1ca)]),'ack':!![]});}catch(_0x313db9){}}else{if(_0x37e72a['type']===_0x453075(0x18b)){if(_0x37e72a[_0x453075(0x2ae)][_0x453075(0x214)])_0x165554[_0x453075(0x190)][_0x453075(0x29f)](_0x453075(0x265));}else{if(_0x37e72a[_0x453075(0x254)]===_0x453075(0x1e6))_0x165554[_0x453075(0x28b)](_0x453075(0x2f3),{'val':new Date()[_0x453075(0x2dc)](),'ack':!![]}),_0x165554[_0x453075(0x28b)](_0x453075(0x17a),{'val':_0x37e72a[_0x453075(0x2ae)][_0x453075(0x2f4)],'ack':!![]});else{if(_0x37e72a['type']===_0x453075(0x2f7))_0x165554[_0x453075(0x28b)](_0x453075(0x1ec),{'val':_0x37e72a['payload']['diagnosis'],'ack':!![]}),_0x165554[_0x453075(0x28b)](_0x453075(0x244),{'val':_0x37e72a[_0x453075(0x2ae)][_0x453075(0x194)],'ack':!![]});else{if(_0x37e72a[_0x453075(0x254)]===_0x453075(0x276)){const {speed_trend:_0x31dbd3}=_0x37e72a[_0x453075(0x2ae)];if(_0x31dbd3!==undefined)_0x165554[_0x453075(0x28b)](_0x453075(0x18f),{'val':_0x31dbd3,'ack':!![]});}else{if(_0x37e72a['type']===_0x453075(0x2a6)){const {forecast:_0x518e91}=_0x37e72a['payload'];if(_0x518e91)_0x165554[_0x453075(0x28b)]('analysis.energy.forecast',{'val':JSON['stringify'](_0x518e91),'ack':!![]});}else{if(_0x37e72a[_0x453075(0x254)]==='TOPOLOGY_RESULT'){const {data:_0x568a4f}=_0x37e72a[_0x453075(0x2ae)];_0x568a4f&&(_0x165554[_0x453075(0x190)]['info'](_0x453075(0x307)),_0x165554[_0x453075(0x28b)](_0x453075(0x1d3),{'val':JSON['stringify'](_0x568a4f),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x20e509){const _0x31ddf5=a0_0x19b867;let _0x26a738=_0x31ddf5(0x2c7);if(fs[_0x31ddf5(0x19c)](installer['PYTHON_EXE']))_0x26a738=installer[_0x31ddf5(0x28a)];try{const _0x2fba25=path[_0x31ddf5(0x267)](__dirname,_0x31ddf5(0x274),_0x31ddf5(0x20c));_0x20e509['pythonProcess']=spawn(_0x26a738,[_0x2fba25]),_0x20e509[_0x31ddf5(0x275)][_0x31ddf5(0x189)]['on'](_0x31ddf5(0x213),_0xe11327=>{const _0x401b98=_0x31ddf5,_0x499c03=_0xe11327[_0x401b98(0x278)]()['split']('\x0a');_0x499c03[_0x401b98(0x24a)](_0x13b79e=>{const _0x431984=_0x401b98,_0x4b28d0=_0x13b79e[_0x431984(0x2ed)]();if(!_0x4b28d0)return;if(_0x4b28d0[_0x431984(0x2e7)](_0x431984(0x310)))_0x20e509[_0x431984(0x190)][_0x431984(0x1b7)](_0x431984(0x17f)+_0x4b28d0[_0x431984(0x251)](0x5)[_0x431984(0x2ed)]());else{if(_0x4b28d0[_0x431984(0x2e7)](_0x431984(0x2ba)))try{const _0x3d6596=JSON[_0x431984(0x25a)](_0x4b28d0['substring'](0x8)[_0x431984(0x2ed)]());handlePythonResult(_0x20e509,_0x3d6596);}catch(_0x11eb61){}}});}),_0x20e509[_0x31ddf5(0x275)]['on'](_0x31ddf5(0x287),_0x124cf4=>{_0x20e509['pythonProcess']=null;});}catch(_0x5a8048){_0x20e509['log'][_0x31ddf5(0x218)]('Error\x20launching\x20Python:\x20'+_0x5a8048[_0x31ddf5(0x1fd)]);}}async function runAutopilot(_0xbd155d){const _0x13b0dd=a0_0x19b867;_0xbd155d[_0x13b0dd(0x190)][_0x13b0dd(0x1b7)](_0x13b0dd(0x217)),await runGeminiAnalysis(_0xbd155d),updateHealthVector(_0xbd155d),triggerGaitAnalysis(_0xbd155d),triggerEnergyPrediction(_0xbd155d);}async function triggerGaitAnalysis(_0x558f63){const _0x3d811e=a0_0x19b867;if(!_0x558f63[_0x3d811e(0x210)])return;try{const _0x4b31db=await _0x558f63[_0x3d811e(0x187)](_0x3d811e(0x24e));_0x4b31db&&_0x4b31db[_0x3d811e(0x17c)]&&sendToPython(_0x558f63,_0x3d811e(0x1a5),{'sequences':JSON[_0x3d811e(0x25a)](_0x4b31db[_0x3d811e(0x17c)])});}catch(_0x1b9030){}}async function triggerEnergyPrediction(_0x30a45f){const _0x4e12f5=a0_0x19b867;if(!_0x30a45f[_0x4e12f5(0x210)])return;try{const _0x3f988f=await getOutsideTemperatureNumeric(_0x30a45f);if(_0x3f988f===null)return;const _0x10faa5={},_0x16e41b=_0x30a45f[_0x4e12f5(0x2f1)]['devices']||[];for(const _0x3c27bf of _0x16e41b){if(_0x3c27bf[_0x4e12f5(0x254)]===_0x4e12f5(0x26f)&&_0x3c27bf[_0x4e12f5(0x1cc)]){const _0x524970=_0x30a45f['sensorLastValues'][_0x3c27bf['id']];if(_0x524970!==undefined)_0x10faa5[_0x3c27bf[_0x4e12f5(0x1cc)]]=_0x524970;}}Object['keys'](_0x10faa5)[_0x4e12f5(0x2fd)]>0x0&&sendToPython(_0x30a45f,_0x4e12f5(0x2fb),{'current_temps':_0x10faa5,'t_out':_0x3f988f});}catch(_0x50c6b5){}}function updateHealthVector(_0x54ad93){const _0x2ee997=a0_0x19b867;if(!_0x54ad93['rawEventLog']||_0x54ad93[_0x2ee997(0x2cb)][_0x2ee997(0x2fd)]===0x0)return;const _0x2d6377=new Array(0x60)[_0x2ee997(0x186)](0x0),_0x1b7980=new Date()[_0x2ee997(0x1dd)](0x0,0x0,0x0,0x0);_0x54ad93[_0x2ee997(0x2cb)]['forEach'](_0x4773d3=>{const _0x64988f=_0x2ee997,_0x4c9a5d=new Date(_0x4773d3[_0x64988f(0x279)]);if(_0x4c9a5d['getTime']()>=_0x1b7980){const _0x109670=_0x4c9a5d[_0x64988f(0x300)](),_0x3106ec=_0x4c9a5d[_0x64988f(0x1eb)](),_0x78c77f=_0x109670*0x4+Math[_0x64988f(0x284)](_0x3106ec/0xf);if(_0x78c77f>=0x0&&_0x78c77f<0x60)_0x2d6377[_0x78c77f]++;}}),_0x54ad93[_0x2ee997(0x28b)](_0x2ee997(0x1c9),{'val':JSON[_0x2ee997(0x27e)](_0x2d6377),'ack':!![]});}async function getWeatherContext(_0x31c200){const _0x296dcd=a0_0x19b867;if(!_0x31c200[_0x296dcd(0x2f1)][_0x296dcd(0x2f2)]||!_0x31c200[_0x296dcd(0x2f1)]['weatherInstance'])return _0x296dcd(0x1c6);try{const _0x19adf4=_0x31c200[_0x296dcd(0x2f1)][_0x296dcd(0x271)];let _0x54987e=await _0x31c200[_0x296dcd(0x298)](_0x19adf4+_0x296dcd(0x277));if(!_0x54987e)_0x54987e=await _0x31c200[_0x296dcd(0x298)](_0x19adf4+_0x296dcd(0x21d));let _0x2fa1cf=await _0x31c200[_0x296dcd(0x298)](_0x19adf4+_0x296dcd(0x1e1));if(!_0x2fa1cf)_0x2fa1cf=await _0x31c200[_0x296dcd(0x298)](_0x19adf4+_0x296dcd(0x1a0));if(_0x54987e&&_0x2fa1cf)return _0x54987e[_0x296dcd(0x17c)]+_0x296dcd(0x296)+_0x2fa1cf[_0x296dcd(0x17c)];}catch(_0x2dcbab){}return _0x296dcd(0x1b8);}async function getCalendarContext(_0x1af4a4){const _0x887c43=a0_0x19b867;if(!_0x1af4a4[_0x887c43(0x2f1)][_0x887c43(0x1be)]||!_0x1af4a4[_0x887c43(0x2f1)][_0x887c43(0x1af)])return _0x887c43(0x255);return _0x887c43(0x202);}async function getCalendarNames(_0x353396,_0x20bc12){return[];}async function saveFeedback(_0x46bacf,_0x2b8d3f){const _0x2e1053=a0_0x19b867;_0x46bacf[_0x2e1053(0x190)][_0x2e1053(0x29f)](_0x2e1053(0x269)+_0x2b8d3f[_0x2e1053(0x261)]);}async function runGeminiAnalysis(_0x27132e,_0x595e84=''){const _0x5eebe5=a0_0x19b867;if(!_0x27132e[_0x5eebe5(0x262)])return;if(_0x27132e[_0x5eebe5(0x240)][_0x5eebe5(0x2fd)]===0x0)return;const _0x5acfb6=_0x27132e[_0x5eebe5(0x240)]['slice'](0x0,0xf),_0x44413f=await getWeatherContext(_0x27132e),_0x20dc44=_0x27132e[_0x5eebe5(0x236)],_0x32307b=PERSONA_MAPPING[_0x27132e['config']['aiPersona']||'generic'],_0x196205=_0x27132e[_0x5eebe5(0x2f1)][_0x5eebe5(0x1d2)]||_0x5eebe5(0x22c);let _0x9c2b3b='Unbekannt';try{const _0x4c3c0c=await _0x27132e[_0x5eebe5(0x187)](_0x5eebe5(0x234));if(_0x4c3c0c&&_0x4c3c0c['val'])_0x9c2b3b=_0x4c3c0c[_0x5eebe5(0x17c)];}catch(_0x6dc422){}let _0x403bf0=![];try{const _0x319dfe=await _0x27132e[_0x5eebe5(0x187)]('analysis.automation.autoApply');if(_0x319dfe&&_0x319dfe[_0x5eebe5(0x17c)])_0x403bf0=!![];}catch(_0x34aa79){}const _0x3f645f=_0x5eebe5(0x20a)+_0x32307b+'.\x20KONTEXT:\x20'+_0x196205+_0x5eebe5(0x1b3)+_0x20dc44+_0x5eebe5(0x20d)+_0x44413f+_0x5eebe5(0x2d4)+_0x9c2b3b+'.\x20EVENTS:\x20'+JSON['stringify'](_0x5acfb6)+_0x5eebe5(0x2eb)+_0x595e84+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0x5bc462=await _0x27132e[_0x5eebe5(0x262)][_0x5eebe5(0x1c5)](_0x3f645f),_0x369f00=JSON[_0x5eebe5(0x25a)](_0x5bc462[_0x5eebe5(0x1f4)][_0x5eebe5(0x2b1)]()[_0x5eebe5(0x30b)](/```json|```/g,'')['trim']());await _0x27132e[_0x5eebe5(0x28b)](_0x5eebe5(0x1f7),{'val':JSON['stringify'](_0x369f00),'ack':!![]});if(_0x369f00[_0x5eebe5(0x226)])await _0x27132e[_0x5eebe5(0x28b)](_0x5eebe5(0x1ae),{'val':_0x369f00['summary'],'ack':!![]});const _0x1d017d={'timestamp':Date[_0x5eebe5(0x182)](),'id':Date[_0x5eebe5(0x182)]()['toString'](),'analysis':{'activity':{'summary':_0x369f00['summary'],'isAlert':_0x369f00[_0x5eebe5(0x2d5)],'alertReason':_0x369f00[_0x5eebe5(0x180)]},'comfort':{'automationProposal':_0x369f00[_0x5eebe5(0x2f0)]}}};await updateAnalysisHistory(_0x27132e,_0x1d017d);const _0x9b1202=_0x369f00['isAlert']||![];_0x9b1202!==_0x27132e[_0x5eebe5(0x2ab)]&&(await _0x27132e[_0x5eebe5(0x28b)](_0x5eebe5(0x266),{'val':_0x9b1202,'ack':!![]}),_0x27132e[_0x5eebe5(0x2ab)]=_0x9b1202,_0x9b1202&&(await _0x27132e[_0x5eebe5(0x28b)](_0x5eebe5(0x2d7),{'val':_0x369f00['alertReason'],'ack':!![]}),sendNotification(_0x27132e,_0x5eebe5(0x1ac)+_0x369f00['alertReason'],![],_0x369f00['isEmergency'])));if(_0x369f00[_0x5eebe5(0x2f0)]&&_0x369f00[_0x5eebe5(0x2f0)][_0x5eebe5(0x2d2)]){await _0x27132e[_0x5eebe5(0x28b)](_0x5eebe5(0x30f),{'val':!![],'ack':!![]}),await _0x27132e['setStateAsync'](_0x5eebe5(0x280),{'val':_0x369f00['automationProposal']['description'],'ack':!![]}),await _0x27132e['setStateAsync'](_0x5eebe5(0x1d5),{'val':_0x369f00[_0x5eebe5(0x2f0)]['targetId'],'ack':!![]}),await _0x27132e[_0x5eebe5(0x28b)](_0x5eebe5(0x263),{'val':JSON[_0x5eebe5(0x27e)](_0x369f00[_0x5eebe5(0x2f0)][_0x5eebe5(0x317)]),'ack':!![]});if(_0x403bf0)executeAutomationAction(_0x27132e);}}catch(_0x49b3db){_0x27132e[_0x5eebe5(0x190)][_0x5eebe5(0x218)](_0x5eebe5(0x1f6)+_0x49b3db['message']);}}async function startSystem(_0x3a2137){const _0x5e94d0=a0_0x19b867;_0x3a2137[_0x5e94d0(0x190)][_0x5e94d0(0x29f)](_0x5e94d0(0x1ee)),await initZombies(_0x3a2137);try{_0x3a2137[_0x5e94d0(0x210)]=await checkLicense(_0x3a2137['config'][_0x5e94d0(0x19a)]);}catch(_0xa0874b){}if(!_0x3a2137[_0x5e94d0(0x2f1)][_0x5e94d0(0x1fb)]||_0x3a2137[_0x5e94d0(0x2f1)][_0x5e94d0(0x1fb)]<0.1)_0x3a2137[_0x5e94d0(0x2f1)][_0x5e94d0(0x1fb)]=0xc;await initHistory(_0x3a2137),await initSystemConfig(_0x3a2137);if(_0x3a2137['config'][_0x5e94d0(0x2e8)])try{_0x3a2137[_0x5e94d0(0x233)]=new GoogleGenerativeAI(_0x3a2137[_0x5e94d0(0x2f1)]['geminiApiKey']),_0x3a2137[_0x5e94d0(0x262)]=_0x3a2137['genAI'][_0x5e94d0(0x1c1)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x5e94d0(0x1b4)}}),_0x3a2137[_0x5e94d0(0x190)][_0x5e94d0(0x29f)](_0x5e94d0(0x2ef));}catch(_0xc6ea5f){_0x3a2137[_0x5e94d0(0x190)][_0x5e94d0(0x218)](_0x5e94d0(0x23d)+_0xc6ea5f['message']);}await createAllObjects(_0x3a2137),await loadSystemMode(_0x3a2137),await loadRawEventLog(_0x3a2137),await loadDailyDigests(_0x3a2137),_0x3a2137[_0x5e94d0(0x1ba)](_0x5e94d0(0x2b0)),_0x3a2137[_0x5e94d0(0x1ba)](LTM_DP_TRIGGER_DIGEST),_0x3a2137['subscribeStates'](_0x5e94d0(0x1d9)),_0x3a2137[_0x5e94d0(0x1ba)](_0x5e94d0(0x20f)),_0x3a2137[_0x5e94d0(0x1ba)](_0x5e94d0(0x1e2)),_0x3a2137['subscribeStates'](_0x5e94d0(0x30d)),_0x3a2137[_0x5e94d0(0x1ba)]('analysis.training.triggerSecurity'),_0x3a2137['subscribeStates'](_0x5e94d0(0x1d7)),_0x3a2137[_0x5e94d0(0x1ba)](_0x5e94d0(0x24b)),_0x3a2137[_0x5e94d0(0x1ba)](_0x5e94d0(0x28f)),_0x3a2137['subscribeStates'](_0x5e94d0(0x238)),await initSensorSubscriptions(_0x3a2137),await initPresenceSubscriptions(_0x3a2137),await setupTelegramListener(_0x3a2137),setTimeout(()=>checkWifiPresence(_0x3a2137),0x1388);if(_0x3a2137[_0x5e94d0(0x259)])clearInterval(_0x3a2137['analysisTimer']);const _0x12bc52=_0x3a2137[_0x5e94d0(0x2f1)][_0x5e94d0(0x1b1)]||0xf;_0x12bc52>0x0&&(_0x3a2137[_0x5e94d0(0x259)]=setInterval(()=>{runAutopilot(_0x3a2137);},_0x12bc52*0x3c*0x3e8)),schedulers[_0x5e94d0(0x299)](_0x3a2137,()=>createDailyDigest(_0x3a2137)),schedulers['setupModeResetScheduler'](_0x3a2137),schedulers[_0x5e94d0(0x2e4)](_0x3a2137,()=>runBaselineDriftAnalysis(_0x3a2137)),schedulers[_0x5e94d0(0x2e9)](_0x3a2137,()=>sendMorningBriefing(_0x3a2137)),startPythonService(_0x3a2137),setTimeout(()=>{const _0x55b89d=_0x5e94d0;_0x3a2137[_0x55b89d(0x275)]&&(runPythonHealthCheck(_0x3a2137),triggerGaitAnalysis(_0x3a2137),triggerEnergyPrediction(_0x3a2137)),updateHealthVector(_0x3a2137);},0x1388);}class CogniLiving extends utils[a0_0x19b867(0x2cd)]{constructor(_0x565dc1){const _0xcb6b41=a0_0x19b867;super({..._0x565dc1,'name':_0xcb6b41(0x1d1)}),this[_0xcb6b41(0x240)]=[],this[_0xcb6b41(0x295)]=[],this[_0xcb6b41(0x2cb)]=[],this[_0xcb6b41(0x1e3)]=[],this['sensorLastValues']={},this[_0xcb6b41(0x2fa)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0xcb6b41(0x309)]=!![],this[_0xcb6b41(0x18c)]=null,this['exitGraceTimer']=null,this[_0xcb6b41(0x1f8)]=![],this[_0xcb6b41(0x233)]=null,this['geminiModel']=null,this[_0xcb6b41(0x236)]=SYSTEM_MODES[_0xcb6b41(0x243)],this[_0xcb6b41(0x210)]=![],this[_0xcb6b41(0x2ab)]=![],this[_0xcb6b41(0x21b)]=_0xcb6b41(0x21c),this[_0xcb6b41(0x259)]=null,this[_0xcb6b41(0x224)]=null,this[_0xcb6b41(0x1bd)]=null,this['driftAnalysisTimer']=null,this[_0xcb6b41(0x285)]=null,this[_0xcb6b41(0x275)]=null,this['dependencyInstallInProgress']=![],this['on'](_0xcb6b41(0x1ed),this[_0xcb6b41(0x183)][_0xcb6b41(0x1f2)](this)),this['on'](_0xcb6b41(0x24f),this[_0xcb6b41(0x1ce)][_0xcb6b41(0x1f2)](this)),this['on'](_0xcb6b41(0x2a3),this[_0xcb6b41(0x2ac)][_0xcb6b41(0x1f2)](this)),this['on'](_0xcb6b41(0x1fd),this['onMessage'][_0xcb6b41(0x1f2)](this));}async[a0_0x19b867(0x183)](){const _0xab1805=a0_0x19b867;this[_0xab1805(0x190)]['info'](_0xab1805(0x313)+this[_0xab1805(0x312)]+_0xab1805(0x2a8));if(!installer[_0xab1805(0x222)](this,()=>startSystem(this)))return;}[a0_0x19b867(0x2ac)](_0x4793da){const _0x1456c4=a0_0x19b867;if(this[_0x1456c4(0x259)])clearInterval(this['analysisTimer']);if(this[_0x1456c4(0x1ea)])clearInterval(this[_0x1456c4(0x1ea)]);if(this['ltmJob'])this[_0x1456c4(0x224)][_0x1456c4(0x318)]();if(this[_0x1456c4(0x1bd)])this[_0x1456c4(0x1bd)][_0x1456c4(0x318)]();if(this[_0x1456c4(0x285)])this[_0x1456c4(0x285)][_0x1456c4(0x318)]();if(this[_0x1456c4(0x18c)])clearTimeout(this[_0x1456c4(0x18c)]);if(this[_0x1456c4(0x1fa)])clearTimeout(this[_0x1456c4(0x1fa)]);stopPythonService(this),_0x4793da();}async[a0_0x19b867(0x1ce)](_0x5425eb,_0x3caa10){const _0x5c1673=a0_0x19b867;if(!_0x3caa10||this[_0x5c1673(0x2e5)])return;if(_0x5425eb[_0x5c1673(0x294)](_0x5c1673(0x2cf))&&_0x5425eb[_0x5c1673(0x27f)]('communicate.request')&&_0x3caa10[_0x5c1673(0x17c)]){await handleTelegramResponse(this,_0x3caa10['val']);return;}if(_0x5425eb===this[_0x5c1673(0x1f1)]+'.'+SYSTEM_DP_MODE){if(_0x3caa10[_0x5c1673(0x17c)]&&Object[_0x5c1673(0x19e)](SYSTEM_MODES)[_0x5c1673(0x294)](_0x3caa10[_0x5c1673(0x17c)])){this['currentSystemMode']=_0x3caa10['val'];if(_0x3caa10[_0x5c1673(0x17c)]===SYSTEM_MODES[_0x5c1673(0x27c)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x3caa10['ack'])this['setState'](_0x5425eb,{'val':this[_0x5c1673(0x236)],'ack':!![]});return;}if(!_0x3caa10[_0x5c1673(0x28c)]){_0x5425eb['includes'](_0x5c1673(0x2b0))&&_0x3caa10[_0x5c1673(0x17c)]&&(this[_0x5c1673(0x1a7)](_0x5425eb,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x5425eb[_0x5c1673(0x294)](_0x5c1673(0x1d0))&&_0x3caa10[_0x5c1673(0x17c)]){this[_0x5c1673(0x1a7)](_0x5425eb,{'val':![],'ack':!![]});if(this['isProVersion'])createDailyDigest(this);}_0x5425eb['includes']('triggerBriefing')&&_0x3caa10[_0x5c1673(0x17c)]&&(this[_0x5c1673(0x1a7)](_0x5425eb,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x5425eb[_0x5c1673(0x294)]('automation.triggerAction')&&_0x3caa10[_0x5c1673(0x17c)]&&(this[_0x5c1673(0x1a7)](_0x5425eb,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x5425eb[_0x5c1673(0x294)]('analysis.training.triggerSecurity')&&_0x3caa10[_0x5c1673(0x17c)]){this[_0x5c1673(0x1a7)](_0x5425eb,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x3f9d8f=await this['getStateAsync'](_0x5c1673(0x24e));if(_0x3f9d8f&&_0x3f9d8f[_0x5c1673(0x17c)]){const _0x505bfb=JSON[_0x5c1673(0x25a)](_0x3f9d8f[_0x5c1673(0x17c)]);this[_0x5c1673(0x190)]['info']('ðŸ§ \x20Triggering\x20Security\x20Training...'),this[_0x5c1673(0x28b)](_0x5c1673(0x216),{'val':_0x5c1673(0x1ad),'ack':!![]}),sendToPython(this,_0x5c1673(0x273),{'sequences':_0x505bfb});}}catch(_0x4a9036){this[_0x5c1673(0x190)][_0x5c1673(0x218)](_0x5c1673(0x1aa)+_0x4a9036['message']);}}if(_0x5425eb[_0x5c1673(0x294)](_0x5c1673(0x1d7))&&_0x3caa10['val']){this[_0x5c1673(0x1a7)](_0x5425eb,{'val':![],'ack':!![]});if(this[_0x5c1673(0x210)])try{const _0x32cf12=await this[_0x5c1673(0x187)](LTM_DP_DAILY_DIGESTS);if(_0x32cf12&&_0x32cf12[_0x5c1673(0x17c)])sendToPython(this,_0x5c1673(0x281),{'digests':JSON[_0x5c1673(0x25a)](_0x32cf12['val'])});}catch(_0x34e5d7){}}if(_0x5425eb[_0x5c1673(0x294)](_0x5c1673(0x24b))&&_0x3caa10[_0x5c1673(0x17c)]){this['setState'](_0x5425eb,{'val':![],'ack':!![]});if(this[_0x5c1673(0x210)])try{const _0x4ec303=await this[_0x5c1673(0x187)](_0x5c1673(0x22a));if(_0x4ec303&&_0x4ec303[_0x5c1673(0x17c)])sendToPython(this,_0x5c1673(0x1fc),{'points':JSON['parse'](_0x4ec303['val'])});}catch(_0x38e2cc){}}if(_0x5425eb[_0x5c1673(0x294)](_0x5c1673(0x28f))&&_0x3caa10['val']){this[_0x5c1673(0x1a7)](_0x5425eb,{'val':![],'ack':!![]});if(this[_0x5c1673(0x210)])try{const _0x238e45=await this[_0x5c1673(0x187)](LTM_DP_RAW_LOG);_0x238e45&&_0x238e45[_0x5c1673(0x17c)]&&(this[_0x5c1673(0x190)][_0x5c1673(0x29f)](_0x5c1673(0x1e9)),sendToPython(this,_0x5c1673(0x1d6),{'events':JSON[_0x5c1673(0x25a)](_0x238e45['val'])}));}catch(_0x32dd78){}}if(_0x5425eb[_0x5c1673(0x294)](_0x5c1673(0x238))&&_0x3caa10['val']){this[_0x5c1673(0x1a7)](_0x5425eb,{'val':![],'ack':!![]});if(this[_0x5c1673(0x210)])try{const _0x5d59fe=await this[_0x5c1673(0x187)](_0x5c1673(0x24e));if(_0x5d59fe&&_0x5d59fe[_0x5c1673(0x17c)]){const _0x1bb84a=JSON[_0x5c1673(0x25a)](_0x5d59fe[_0x5c1673(0x17c)]);this[_0x5c1673(0x190)]['info'](_0x5c1673(0x1e8)),sendToPython(this,_0x5c1673(0x1cb),{'sequences':_0x1bb84a});}}catch(_0x5d7a78){this[_0x5c1673(0x190)]['error']('Topology\x20Error:\x20'+_0x5d7a78[_0x5c1673(0x1fd)]);}}return;}if(this['config'][_0x5c1673(0x306)]&&this[_0x5c1673(0x2f1)][_0x5c1673(0x306)]['includes'](_0x5425eb)){await checkWifiPresence(this);return;}const _0x34a02e=(this[_0x5c1673(0x2f1)][_0x5c1673(0x264)]||[])[_0x5c1673(0x297)](_0x48f1a1=>_0x48f1a1['id']===_0x5425eb);if(_0x34a02e)processSensorEvent(this,_0x5425eb,_0x3caa10,_0x34a02e);}async[a0_0x19b867(0x290)](_0x4edd3){const _0x496e3c=a0_0x19b867;if(typeof _0x4edd3===_0x496e3c(0x2f6)&&_0x4edd3[_0x496e3c(0x1fd)]){if(_0x4edd3[_0x496e3c(0x1db)]===_0x496e3c(0x246)){const _0x39dbe3=_0x4edd3['message'][_0x496e3c(0x228)]||this['config']['geminiApiKey'];if(!_0x39dbe3)return this[_0x496e3c(0x223)](_0x4edd3[_0x496e3c(0x19b)],_0x4edd3[_0x496e3c(0x1db)],{'success':![],'message':_0x496e3c(0x2c4)},_0x4edd3['callback']);try{const _0x292e72=new GoogleGenerativeAI(_0x39dbe3),_0x207432=_0x292e72[_0x496e3c(0x1c1)]({'model':GEMINI_MODEL}),_0x65bef5=await _0x207432[_0x496e3c(0x1c5)]('Hi');this[_0x496e3c(0x223)](_0x4edd3[_0x496e3c(0x19b)],_0x4edd3['command'],{'success':!![],'message':_0x496e3c(0x2d1)+_0x65bef5[_0x496e3c(0x1f4)][_0x496e3c(0x2b1)]()},_0x4edd3['callback']);}catch(_0x23e9de){this[_0x496e3c(0x223)](_0x4edd3['from'],_0x4edd3[_0x496e3c(0x1db)],{'success':![],'message':_0x496e3c(0x237)+_0x23e9de['message']},_0x4edd3[_0x496e3c(0x1ab)]);}}else{if(_0x4edd3['command']==='testContext'){const _0x424552=await getWeatherContext(this),_0x163723=await getCalendarContext(this);this[_0x496e3c(0x223)](_0x4edd3[_0x496e3c(0x19b)],_0x4edd3[_0x496e3c(0x1db)],{'success':!![],'weather':_0x424552,'calendar':_0x163723},_0x4edd3['callback']);}else{if(_0x4edd3['command']==='getLtmData'){if(!this[_0x496e3c(0x210)])return this[_0x496e3c(0x223)](_0x4edd3[_0x496e3c(0x19b)],_0x4edd3[_0x496e3c(0x1db)],{'success':![],'isPro':![]},_0x4edd3[_0x496e3c(0x1ab)]);let _0x370546={'status':_0x496e3c(0x2e2)};try{const _0x23f0a1=await this[_0x496e3c(0x187)](LTM_DP_DRIFT_STATUS);_0x370546[_0x496e3c(0x26a)]=_0x23f0a1?_0x23f0a1[_0x496e3c(0x17c)]:_0x496e3c(0x2e2);}catch(_0x20945a){}this[_0x496e3c(0x223)](_0x4edd3[_0x496e3c(0x19b)],_0x4edd3[_0x496e3c(0x1db)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x496e3c(0x1e3)],'driftAnalysis':_0x370546,'analysisHistory':this[_0x496e3c(0x295)]},_0x4edd3[_0x496e3c(0x1ab)]);}else{if(_0x4edd3[_0x496e3c(0x1db)]===_0x496e3c(0x1c7)){const _0x54198e=this[_0x496e3c(0x1e3)][_0x496e3c(0x2fd)],_0x427bfe=new Date(),_0x490c84=new Date(_0x427bfe[_0x496e3c(0x26b)](),_0x427bfe['getMonth'](),_0x427bfe[_0x496e3c(0x2a1)]())[_0x496e3c(0x1de)](),_0xa3d868=this[_0x496e3c(0x2cb)]['filter'](_0x5c78bd=>new Date(_0x5c78bd[_0x496e3c(0x279)])[_0x496e3c(0x1de)]()>_0x490c84)['length'],_0x588740=new Array(0x18)['fill'](0x0);this[_0x496e3c(0x2cb)][_0x496e3c(0x24a)](_0x58a0ee=>{const _0x4e23af=_0x496e3c,_0x5c31a3=new Date(_0x58a0ee[_0x4e23af(0x279)]);if(_0x5c31a3[_0x4e23af(0x1de)]()>_0x490c84)_0x588740[_0x5c31a3['getHours']()]++;});let _0x2a7418={'status':_0x496e3c(0x2e2)};try{const _0x52f440=await this[_0x496e3c(0x187)](LTM_DP_DRIFT_STATUS);_0x2a7418['status']=_0x52f440?_0x52f440[_0x496e3c(0x17c)]:'N/A';}catch(_0x104dcd){}let _0x534170='';try{const _0x595059=await this[_0x496e3c(0x187)](_0x496e3c(0x234));_0x534170=_0x595059?_0x595059[_0x496e3c(0x17c)]:'';}catch(_0xfc7d81){}let _0x3149fd=null;!this[_0x496e3c(0x262)]&&(_0x3149fd=this[_0x496e3c(0x2f1)]['geminiApiKey']?_0x496e3c(0x316):_0x496e3c(0x2a5));let _0x5a9333={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x351a42=await this[_0x496e3c(0x187)](_0x496e3c(0x30f));if(_0x351a42&&_0x351a42['val']){_0x5a9333[_0x496e3c(0x2d2)]=!![];const _0x3d20b0=await this['getStateAsync']('analysis.automation.description');_0x5a9333[_0x496e3c(0x178)]=_0x3d20b0?_0x3d20b0[_0x496e3c(0x17c)]:'';const _0x26b8f8=await this[_0x496e3c(0x187)](_0x496e3c(0x1d5));_0x5a9333[_0x496e3c(0x2c9)]=_0x26b8f8?_0x26b8f8[_0x496e3c(0x17c)]:'';const _0x58ef3e=await this[_0x496e3c(0x187)]('analysis.automation.targetValue');_0x5a9333[_0x496e3c(0x317)]=_0x58ef3e?_0x58ef3e[_0x496e3c(0x17c)]:'';}const _0x14ead4=await this[_0x496e3c(0x187)](_0x496e3c(0x30d));_0x5a9333[_0x496e3c(0x29e)]=_0x14ead4?!!_0x14ead4[_0x496e3c(0x17c)]:![];}catch(_0x36060c){}this['sendTo'](_0x4edd3['from'],_0x4edd3[_0x496e3c(0x1db)],{'success':!![],'eventHistory':this[_0x496e3c(0x240)][_0x496e3c(0x1a2)](0x0,0xf),'stats':{'digestCount':_0x54198e,'eventCountToday':_0xa3d868,'hourlyActivity':_0x588740,'driftStatus':_0x2a7418[_0x496e3c(0x26a)],'isPresent':this[_0x496e3c(0x309)],'presenceWho':_0x534170,'minDays':this[_0x496e3c(0x2f1)][_0x496e3c(0x1bc)]||0x7,'stbDays':this[_0x496e3c(0x2f1)]['ltmStbWindowDays']||0xe,'ltbDays':this[_0x496e3c(0x2f1)][_0x496e3c(0x2d0)]||0x3c,'systemError':_0x3149fd},'automation':_0x5a9333},_0x4edd3['callback']);}else{if(_0x4edd3[_0x496e3c(0x1db)]===_0x496e3c(0x2f8))try{const _0x3cc956=await scanner[_0x496e3c(0x2db)](this,_0x4edd3[_0x496e3c(0x1fd)]||{});this[_0x496e3c(0x223)](_0x4edd3[_0x496e3c(0x19b)],_0x4edd3[_0x496e3c(0x1db)],{'success':!![],'devices':_0x3cc956},_0x4edd3[_0x496e3c(0x1ab)]);}catch(_0x31349d){this[_0x496e3c(0x223)](_0x4edd3[_0x496e3c(0x19b)],_0x4edd3[_0x496e3c(0x1db)],{'success':![],'error':_0x31349d['message']},_0x4edd3[_0x496e3c(0x1ab)]);}else{if(_0x4edd3[_0x496e3c(0x1db)]===_0x496e3c(0x292)){const _0x1ab9bf=await this[_0x496e3c(0x1c8)](_0x496e3c(0x2dd),_0x496e3c(0x1f9)),_0x5e40ac=[];if(_0x1ab9bf)for(const _0x2bb656 in _0x1ab9bf){const _0x18e76e=_0x1ab9bf[_0x2bb656],_0x1c0960=(_0x18e76e['common']&&typeof _0x18e76e[_0x496e3c(0x196)][_0x496e3c(0x29a)]==='object'?_0x18e76e['common'][_0x496e3c(0x29a)]['de']:_0x18e76e[_0x496e3c(0x196)][_0x496e3c(0x29a)])||_0x18e76e[_0x496e3c(0x196)][_0x496e3c(0x29a)];_0x5e40ac[_0x496e3c(0x241)]({'id':_0x2bb656,'name':_0x1c0960});}const _0x2ca105=await this['getForeignObjectsAsync']('enum.rooms.*',_0x496e3c(0x1f9)),_0x352786=[];if(_0x2ca105)for(const _0x3ff1a7 in _0x2ca105){const _0x23aa09=_0x2ca105[_0x3ff1a7],_0x338c82=(_0x23aa09[_0x496e3c(0x196)]&&typeof _0x23aa09[_0x496e3c(0x196)][_0x496e3c(0x29a)]==='object'?_0x23aa09[_0x496e3c(0x196)][_0x496e3c(0x29a)]['de']:_0x23aa09[_0x496e3c(0x196)][_0x496e3c(0x29a)])||_0x3ff1a7[_0x496e3c(0x211)]('.')[_0x496e3c(0x1b0)]();_0x352786['push'](_0x338c82);}this[_0x496e3c(0x223)](_0x4edd3[_0x496e3c(0x19b)],_0x4edd3[_0x496e3c(0x1db)],{'success':!![],'enums':_0x5e40ac,'rooms':_0x352786},_0x4edd3['callback']);}else{if(_0x4edd3[_0x496e3c(0x1db)]==='getCalendarNames'){const _0x4d7501=_0x4edd3['message'][_0x496e3c(0x185)];if(!_0x4d7501)return this[_0x496e3c(0x223)](_0x4edd3['from'],_0x4edd3[_0x496e3c(0x1db)],{'success':![],'error':_0x496e3c(0x20b)},_0x4edd3[_0x496e3c(0x1ab)]);const _0x1c587c=await getCalendarNames(this,_0x4d7501);this[_0x496e3c(0x223)](_0x4edd3['from'],_0x4edd3['command'],{'success':!![],'names':_0x1c587c},_0x4edd3[_0x496e3c(0x1ab)]);}else{if(_0x4edd3[_0x496e3c(0x1db)]===_0x496e3c(0x2c5)){const {targetId:_0x18875c,targetValue:_0xf1d21f}=_0x4edd3[_0x496e3c(0x1fd)];this[_0x496e3c(0x190)][_0x496e3c(0x29f)](_0x496e3c(0x2e6)+_0x18875c+_0x496e3c(0x2d8)+_0xf1d21f),await this[_0x496e3c(0x28b)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0x496e3c(0x28b)](_0x496e3c(0x280),{'val':_0x496e3c(0x208)+_0x18875c,'ack':!![]}),await this['setStateAsync'](_0x496e3c(0x1d5),{'val':_0x18875c,'ack':!![]}),await this[_0x496e3c(0x28b)](_0x496e3c(0x263),{'val':_0xf1d21f,'ack':!![]}),this[_0x496e3c(0x223)](_0x4edd3[_0x496e3c(0x19b)],_0x4edd3['command'],{'success':!![]},_0x4edd3[_0x496e3c(0x1ab)]);}else{if(_0x4edd3[_0x496e3c(0x1db)]==='submitFeedback'){const {historyId:_0x1d6a8d,rating:_0x63926e,comment:_0x303131,alertReason:_0x902c7}=_0x4edd3['message'];_0x1d6a8d&&_0x63926e?(await saveFeedback(this,{'timestamp':Date[_0x496e3c(0x182)](),'historyId':_0x1d6a8d,'rating':_0x63926e,'comment':_0x303131,'alertReason':_0x902c7}),this[_0x496e3c(0x223)](_0x4edd3[_0x496e3c(0x19b)],_0x4edd3[_0x496e3c(0x1db)],{'success':!![]},_0x4edd3[_0x496e3c(0x1ab)])):this['sendTo'](_0x4edd3[_0x496e3c(0x19b)],_0x4edd3['command'],{'success':![],'error':_0x496e3c(0x206)},_0x4edd3[_0x496e3c(0x1ab)]);}else _0x4edd3[_0x496e3c(0x1db)]==='dismissAutomation'&&(this['log'][_0x496e3c(0x29f)]('User\x20dismissed\x20automation\x20proposal.'),await this[_0x496e3c(0x28b)](_0x496e3c(0x30f),{'val':![],'ack':!![]}),await this[_0x496e3c(0x28b)](_0x496e3c(0x280),{'val':'','ack':!![]}),this[_0x496e3c(0x223)](_0x4edd3[_0x496e3c(0x19b)],_0x4edd3['command'],{'success':!![]},_0x4edd3[_0x496e3c(0x1ab)]));}}}}}}}}}}}if(require[a0_0x19b867(0x28d)]!==module)module['exports']=_0x323693=>new CogniLiving(_0x323693);else new CogniLiving();