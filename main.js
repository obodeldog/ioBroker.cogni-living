const a0_0x8b98da=a0_0x97cf;(function(_0x5a5245,_0x2765fb){const _0xcd228f=a0_0x97cf,_0x27acc7=_0x5a5245();while(!![]){try{const _0xe827b2=-parseInt(_0xcd228f(0xff))/0x1*(parseInt(_0xcd228f(0xae))/0x2)+-parseInt(_0xcd228f(0xc0))/0x3*(parseInt(_0xcd228f(0x194))/0x4)+parseInt(_0xcd228f(0x21b))/0x5+-parseInt(_0xcd228f(0x18d))/0x6*(-parseInt(_0xcd228f(0x190))/0x7)+parseInt(_0xcd228f(0x206))/0x8+parseInt(_0xcd228f(0x1b2))/0x9+-parseInt(_0xcd228f(0x1ef))/0xa*(parseInt(_0xcd228f(0x219))/0xb);if(_0xe827b2===_0x2765fb)break;else _0x27acc7['push'](_0x27acc7['shift']());}catch(_0x436dc2){_0x27acc7['push'](_0x27acc7['shift']());}}}(a0_0x1874,0x62d2f));const a0_0x442309=(function(){let _0x398af3=!![];return function(_0xb42378,_0x1aa0a2){const _0x3c78e3=_0x398af3?function(){const _0x1ed0a3=a0_0x97cf;if(_0x1aa0a2){const _0x55e520=_0x1aa0a2[_0x1ed0a3(0xe6)](_0xb42378,arguments);return _0x1aa0a2=null,_0x55e520;}}:function(){};return _0x398af3=![],_0x3c78e3;};}()),a0_0x49d998=a0_0x442309(this,function(){const _0x497446=a0_0x97cf;return a0_0x49d998[_0x497446(0x181)]()['search'](_0x497446(0xab))[_0x497446(0x181)]()[_0x497446(0xf7)](a0_0x49d998)[_0x497446(0x14c)](_0x497446(0xab));});a0_0x49d998();'use strict';const utils=require(a0_0x8b98da(0xbd)),{GoogleGenerativeAI}=require(a0_0x8b98da(0x15d)),{spawn}=require(a0_0x8b98da(0x1c2)),path=require('path'),fs=require('fs'),installer=require(a0_0x8b98da(0x15e)),scanner=require(a0_0x8b98da(0x143)),schedulers=require(a0_0x8b98da(0x116)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x8b98da(0xa2),LTM_DP_DAILY_DIGESTS=a0_0x8b98da(0x1ec),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS=a0_0x8b98da(0x8d),LTM_DP_DRIFT_CHANNEL=a0_0x8b98da(0xf8),LTM_DP_DRIFT_STATUS=a0_0x8b98da(0x1fa),LTM_DP_DRIFT_DETAILS=a0_0x8b98da(0xf4),LTM_DP_DRIFT_LAST_CHECK=a0_0x8b98da(0x18c),SYSTEM_DP_MODE=a0_0x8b98da(0x17c),SYSTEM_MODES={'NORMAL':'normal','VACATION':a0_0x8b98da(0x10c),'PARTY':a0_0x8b98da(0x1b5),'GUEST':a0_0x8b98da(0x1ae)},AUTO_RESET_MODES=[SYSTEM_MODES['PARTY'],SYSTEM_MODES[a0_0x8b98da(0x18a)]],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0x8b98da(0x8c),'family':a0_0x8b98da(0x13c),'single_comfort':'Fokus\x20auf\x20Komfort.','security':'PRIORIT√ÑT:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x15480b){const _0xdde55b=a0_0x8b98da;try{const _0x52d6c1=[_0xdde55b(0xf6),_0xdde55b(0x18e)];for(const _0x477cad of _0x52d6c1){try{const _0x1ddac8=await _0x15480b[_0xdde55b(0x203)](_0x477cad);if(_0x1ddac8)await _0x15480b[_0xdde55b(0x208)](_0x477cad);}catch(_0x26a8bd){}}}catch(_0xa0ace4){}}async function checkLicense(_0x381385){return!![];}async function initHistory(_0x504725){const _0x512018=a0_0x8b98da;try{const _0x276e78=await _0x504725[_0x512018(0x13a)](_0x512018(0x1fe));_0x276e78&&_0x276e78[_0x512018(0xa4)]&&(_0x504725['eventHistory']=JSON['parse'](_0x276e78[_0x512018(0xa4)]['toString']()));}catch(_0x25c19c){_0x504725[_0x512018(0x1cf)]=[];}try{const _0x40ccf8=await _0x504725[_0x512018(0x13a)]('analysis.analysisHistory');if(_0x40ccf8&&_0x40ccf8['val'])_0x504725[_0x512018(0x1d8)]=JSON[_0x512018(0x127)](_0x40ccf8[_0x512018(0xa4)][_0x512018(0x181)]());}catch(_0x3cad6e){_0x504725[_0x512018(0x1d8)]=[];}if(_0x504725[_0x512018(0x1cf)]&&_0x504725[_0x512018(0x1cf)][_0x512018(0x10e)]>0x0){_0x504725['log']['info']('Restoring\x20sensor\x20cache...');for(let _0xe4b3b3=_0x504725['eventHistory']['length']-0x1;_0xe4b3b3>=0x0;_0xe4b3b3--){const _0x4a375d=_0x504725['eventHistory'][_0xe4b3b3];if(_0x4a375d&&_0x4a375d['id']!==undefined&&_0x4a375d[_0x512018(0x15f)]!==undefined)_0x504725[_0x512018(0x117)][_0x4a375d['id']]=_0x4a375d[_0x512018(0x15f)];}}}async function initSystemConfig(_0x46cdf6){const _0x26651d=a0_0x8b98da;try{const _0x343c9f=await _0x46cdf6[_0x26651d(0x1e8)](_0x26651d(0xc9));if(_0x343c9f&&_0x343c9f[_0x26651d(0xeb)])_0x46cdf6[_0x26651d(0xe5)]={'latitude':_0x343c9f[_0x26651d(0xeb)][_0x26651d(0xd5)]||0x0,'longitude':_0x343c9f['common']['longitude']||0x0,'city':_0x343c9f[_0x26651d(0xeb)][_0x26651d(0x11c)]||''};}catch(_0x4c03cd){}}async function createAllObjects(_0x57344d){const _0x50a9e0=a0_0x8b98da;await _0x57344d[_0x50a9e0(0xd7)]('system',{'type':_0x50a9e0(0x224),'common':{'name':'System'},'native':{}}),await _0x57344d[_0x50a9e0(0xd7)](SYSTEM_DP_MODE,{'type':'state','common':{'name':_0x50a9e0(0x8e),'type':_0x50a9e0(0x1d7),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES[_0x50a9e0(0xe2)]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0x1d3),{'type':_0x50a9e0(0x93),'common':{'name':_0x50a9e0(0x1f5),'type':_0x50a9e0(0x1d7),'role':'text','read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)]('events.lastEvent',{'type':_0x50a9e0(0x93),'common':{'name':_0x50a9e0(0x107),'type':_0x50a9e0(0x1d7),'role':_0x50a9e0(0xc4),'read':!![],'write':![]},'native':{}}),await _0x57344d['setObjectNotExistsAsync']('events.history',{'type':_0x50a9e0(0x93),'common':{'name':'Event\x20History','type':_0x50a9e0(0x1d7),'role':'json','read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0xd7)](_0x50a9e0(0x108),{'type':_0x50a9e0(0x224),'common':{'name':_0x50a9e0(0x218)},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0x16b),{'type':_0x50a9e0(0x93),'common':{'name':_0x50a9e0(0x1ed),'type':_0x50a9e0(0x1dc),'role':_0x50a9e0(0x95),'read':!![],'write':!![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)]('analysis.training.triggerHealth',{'type':_0x50a9e0(0x93),'common':{'name':_0x50a9e0(0x1ce),'type':_0x50a9e0(0x1dc),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0x1f4),{'type':'state','common':{'name':_0x50a9e0(0x130),'type':_0x50a9e0(0x1dc),'role':_0x50a9e0(0x95),'read':!![],'write':!![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0xe1),{'type':_0x50a9e0(0x93),'common':{'name':_0x50a9e0(0x165),'type':_0x50a9e0(0x1dc),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x57344d['setObjectNotExistsAsync'](_0x50a9e0(0x1c0),{'type':_0x50a9e0(0x93),'common':{'name':'Build\x20Topology','type':_0x50a9e0(0x1dc),'role':_0x50a9e0(0x95),'read':!![],'write':!![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0x1e5),{'type':'state','common':{'name':_0x50a9e0(0x20b),'type':_0x50a9e0(0x1d7),'role':'text','read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0xd7)](_0x50a9e0(0x211),{'type':'channel','common':{'name':_0x50a9e0(0x10b)},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0xa1),{'type':_0x50a9e0(0x93),'common':{'name':'Anomaly\x20Score','type':_0x50a9e0(0x11a),'role':_0x50a9e0(0x15f),'read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0xa6),{'type':_0x50a9e0(0x93),'common':{'name':_0x50a9e0(0x13b),'type':_0x50a9e0(0x11a),'role':_0x50a9e0(0x15f),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0x129),{'type':_0x50a9e0(0x93),'common':{'name':_0x50a9e0(0x1bb),'type':_0x50a9e0(0x1d7),'role':_0x50a9e0(0x1d9),'read':!![],'write':![]},'native':{}}),await _0x57344d['setObjectNotExistsAsync']('analysis.security.topologyMatrix',{'type':_0x50a9e0(0x93),'common':{'name':'Topology\x20Matrix','type':_0x50a9e0(0x1d7),'role':_0x50a9e0(0xc4),'read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0xd7)](_0x50a9e0(0x157),{'type':'channel','common':{'name':_0x50a9e0(0x1bd)},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0xb4),{'type':_0x50a9e0(0x93),'common':{'name':'Last\x20Check','type':_0x50a9e0(0x1d7),'role':_0x50a9e0(0x1d9),'read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0xf1),{'type':_0x50a9e0(0x93),'common':{'name':_0x50a9e0(0x158),'type':'boolean','role':_0x50a9e0(0x11d),'read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0x19c),{'type':_0x50a9e0(0x93),'common':{'name':_0x50a9e0(0x174),'type':_0x50a9e0(0x1d7),'role':_0x50a9e0(0xa5),'read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)]('analysis.health.trendValue',{'type':'state','common':{'name':_0x50a9e0(0x136),'type':_0x50a9e0(0x11a),'role':_0x50a9e0(0x15f),'read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)]('analysis.health.todayVector',{'type':'state','common':{'name':_0x50a9e0(0x137),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0x1ad),{'type':_0x50a9e0(0x93),'common':{'name':'Gait\x20Speed\x20Trend','type':_0x50a9e0(0x11a),'role':_0x50a9e0(0x15f),'read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0xd7)](_0x50a9e0(0xdd),{'type':_0x50a9e0(0x224),'common':{'name':_0x50a9e0(0x159)},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0x177),{'type':'state','common':{'name':_0x50a9e0(0x96),'type':'string','role':_0x50a9e0(0xa5),'read':!![],'write':![]},'native':{}}),await _0x57344d['setObjectNotExistsAsync']('analysis.energy.heatingScore',{'type':_0x50a9e0(0x93),'common':{'name':_0x50a9e0(0x199),'type':_0x50a9e0(0x1d7),'role':'text','read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0x12a),{'type':_0x50a9e0(0x93),'common':{'name':'Temperature\x20Forecast','type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0xd7)]('LTM',{'type':_0x50a9e0(0x224),'common':{'name':_0x50a9e0(0x1e6)},'native':{}}),await _0x57344d['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':_0x50a9e0(0x93),'common':{'name':_0x50a9e0(0xba),'type':_0x50a9e0(0x1d7),'role':_0x50a9e0(0xc4),'read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0xd7)](LTM_DP_DAILY_DIGESTS,{'type':_0x50a9e0(0x93),'common':{'name':_0x50a9e0(0x1dd),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0xdf),{'type':'state','common':{'name':_0x50a9e0(0x1a9),'type':'string','role':_0x50a9e0(0xc4),'read':!![],'write':![]},'native':{}}),await _0x57344d['setObjectNotExistsAsync'](_0x50a9e0(0xe8),{'type':'state','common':{'name':'Thermodynamics','type':_0x50a9e0(0x1d7),'role':_0x50a9e0(0xc4),'read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0x210),{'type':_0x50a9e0(0x93),'common':{'name':'Trigger\x20Analysis','type':_0x50a9e0(0x1dc),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x57344d['setObjectNotExistsAsync'](_0x50a9e0(0x21e),{'type':_0x50a9e0(0x93),'common':{'name':_0x50a9e0(0x121),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)]('analysis.isAlert',{'type':'state','common':{'name':_0x50a9e0(0x155),'type':'boolean','role':_0x50a9e0(0xda),'read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0x1fb),{'type':_0x50a9e0(0x93),'common':{'name':_0x50a9e0(0xb0),'type':'string','role':'text.alarm','read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0x120),{'type':_0x50a9e0(0x93),'common':{'name':_0x50a9e0(0xe7),'type':_0x50a9e0(0x1d7),'role':_0x50a9e0(0xa5),'read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0xcc),{'type':_0x50a9e0(0x93),'common':{'name':_0x50a9e0(0xfa),'type':_0x50a9e0(0x1dc),'role':_0x50a9e0(0x11d),'read':!![],'write':![]},'native':{}}),await _0x57344d['setObjectNotExistsAsync'](_0x50a9e0(0x184),{'type':_0x50a9e0(0x93),'common':{'name':_0x50a9e0(0x1a6),'type':'string','role':_0x50a9e0(0xa5),'read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)]('analysis.automation.detectedPatterns',{'type':'state','common':{'name':_0x50a9e0(0xa9),'type':'string','role':_0x50a9e0(0xc4),'read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)]('analysis.automation.targetId',{'type':'state','common':{'name':_0x50a9e0(0x217),'type':_0x50a9e0(0x1d7),'role':_0x50a9e0(0xa5),'read':!![],'write':![]},'native':{}}),await _0x57344d['setObjectNotExistsAsync'](_0x50a9e0(0x183),{'type':_0x50a9e0(0x93),'common':{'name':'Target\x20Value','type':_0x50a9e0(0x1d7),'role':_0x50a9e0(0xa5),'read':!![],'write':![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0x1cc),{'type':_0x50a9e0(0x93),'common':{'name':_0x50a9e0(0x204),'type':_0x50a9e0(0x1dc),'role':_0x50a9e0(0x1ac),'read':!![],'write':!![]},'native':{}}),await _0x57344d[_0x50a9e0(0x94)](_0x50a9e0(0xc2),{'type':_0x50a9e0(0x93),'common':{'name':_0x50a9e0(0xce),'type':_0x50a9e0(0x1dc),'role':_0x50a9e0(0x95),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x3f5a86){const _0x5a22b7=a0_0x8b98da;try{const _0x216637=await _0x3f5a86['getStateAsync'](SYSTEM_DP_MODE);_0x216637&&_0x216637['val']&&Object['values'](SYSTEM_MODES)[_0x5a22b7(0x14b)](_0x216637[_0x5a22b7(0xa4)])?_0x3f5a86[_0x5a22b7(0x1b8)]=_0x216637['val']:(_0x3f5a86[_0x5a22b7(0x1b8)]=SYSTEM_MODES[_0x5a22b7(0xe2)],await _0x3f5a86['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x5a22b7(0xe2)],'ack':!![]}));}catch(_0x3cbc8c){_0x3f5a86[_0x5a22b7(0x1b8)]=SYSTEM_MODES[_0x5a22b7(0xe2)];}}function a0_0x97cf(_0xdb7dc6,_0x245c7b){const _0x45ccad=a0_0x1874();return a0_0x97cf=function(_0x49d998,_0x442309){_0x49d998=_0x49d998-0x8c;let _0x1874d1=_0x45ccad[_0x49d998];return _0x1874d1;},a0_0x97cf(_0xdb7dc6,_0x245c7b);}async function loadRawEventLog(_0x523e60){const _0x156c9b=a0_0x8b98da;try{const _0x24eeda=await _0x523e60['getStateAsync'](LTM_DP_RAW_LOG);if(_0x24eeda&&_0x24eeda[_0x156c9b(0xa4)])_0x523e60[_0x156c9b(0x9b)]=JSON['parse'](_0x24eeda['val']);}catch(_0x46b3b9){_0x523e60[_0x156c9b(0x9b)]=[];}}async function saveRawEventLog(_0x3b4e85){const _0x395323=a0_0x8b98da;if(_0x3b4e85[_0x395323(0x9b)]['length']>RAW_LOG_MAX_SIZE)_0x3b4e85['rawEventLog'][_0x395323(0x13e)](0x0,_0x3b4e85[_0x395323(0x9b)][_0x395323(0x10e)]-RAW_LOG_MAX_SIZE);await _0x3b4e85[_0x395323(0xfb)](LTM_DP_RAW_LOG,{'val':JSON[_0x395323(0x225)](_0x3b4e85['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x4fe6b3){const _0x57e416=a0_0x8b98da;try{const _0x323d34=await _0x4fe6b3[_0x57e416(0x13a)](LTM_DP_DAILY_DIGESTS);if(_0x323d34&&_0x323d34[_0x57e416(0xa4)])_0x4fe6b3[_0x57e416(0xbf)]=JSON['parse'](_0x323d34[_0x57e416(0xa4)]);}catch(_0x3fb70b){_0x4fe6b3[_0x57e416(0xbf)]=[];}await updateBaselineStatus(_0x4fe6b3);}async function saveDailyDigests(_0x4f39e3,_0xbc3bee=!![]){const _0x4b16c8=a0_0x8b98da,_0x2636cb=_0x4f39e3[_0x4b16c8(0xf3)][_0x4b16c8(0x1a4)]||0x3c;_0x4f39e3[_0x4b16c8(0xbf)][_0x4b16c8(0x10e)]>_0x2636cb&&_0x4f39e3[_0x4b16c8(0xbf)]['splice'](0x0,_0x4f39e3['dailyDigests'][_0x4b16c8(0x10e)]-_0x2636cb);await _0x4f39e3[_0x4b16c8(0xfb)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x4b16c8(0x225)](_0x4f39e3[_0x4b16c8(0xbf)]),'ack':!![]});if(_0xbc3bee)await updateBaselineStatus(_0x4f39e3);}async function updateAnalysisHistory(_0x47603a,_0x5b7ffb){const _0x997085=a0_0x8b98da;_0x47603a[_0x997085(0x1d8)][_0x997085(0x20c)](_0x5b7ffb);if(_0x47603a[_0x997085(0x1d8)][_0x997085(0x10e)]>HISTORY_MAX_SIZE)_0x47603a[_0x997085(0x1d8)][_0x997085(0xa8)]();await _0x47603a['setStateAsync'](_0x997085(0x1a5),{'val':JSON[_0x997085(0x225)](_0x47603a[_0x997085(0x1d8)]),'ack':!![]});}async function updateBaselineStatus(_0x33b7fd){const _0x2f4ce9=a0_0x8b98da;if(!_0x33b7fd[_0x2f4ce9(0x153)]){await _0x33b7fd['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x2f4ce9(0x99),'ack':!![]});return;}const _0x23189a=_0x33b7fd[_0x2f4ce9(0xbf)][_0x2f4ce9(0x10e)]>=(_0x33b7fd[_0x2f4ce9(0xf3)]['minDaysForBaseline']||0x7)?_0x2f4ce9(0xe4)+_0x33b7fd['dailyDigests'][_0x2f4ce9(0x10e)]+_0x2f4ce9(0x169):'Lernphase\x20('+_0x33b7fd[_0x2f4ce9(0xbf)][_0x2f4ce9(0x10e)]+'/'+(_0x33b7fd['config']['minDaysForBaseline']||0x7)+')';await _0x33b7fd[_0x2f4ce9(0xfb)](LTM_DP_BASELINE_STATUS,{'val':_0x23189a,'ack':!![]});}async function initSensorSubscriptions(_0x132b37){const _0x53d02e=a0_0x8b98da,_0x3c8a46=_0x132b37[_0x53d02e(0xf3)]['devices'];if(_0x3c8a46)for(const _0x114942 of _0x3c8a46){await _0x132b37[_0x53d02e(0x195)](_0x114942['id']);}}async function initPresenceSubscriptions(_0x46b05c){const _0x3fc5e6=a0_0x8b98da,_0x3e1da6=_0x46b05c[_0x3fc5e6(0xf3)][_0x3fc5e6(0xcd)];if(_0x3e1da6)for(const _0x41aac4 of _0x3e1da6){await _0x46b05c[_0x3fc5e6(0x195)](_0x41aac4);}}async function setupTelegramListener(_0x5408ad){const _0xa092ed=a0_0x8b98da,_0x54d479=_0x5408ad['config']['notifyTelegramInstance'];if(_0x5408ad['config'][_0xa092ed(0xfd)]&&_0x54d479)await _0x5408ad['subscribeForeignStatesAsync'](_0x54d479+_0xa092ed(0x18b));}async function checkWifiPresence(_0x3fdd18){const _0x122777=a0_0x8b98da;try{const _0x57a3ed=_0x3fdd18['config']['presenceDevices']||[];let _0x18cdbb=![];const _0x2d0837=[];for(const _0x4ae4f4 of _0x57a3ed){try{const _0x4170a1=await _0x3fdd18[_0x122777(0x1e1)](_0x4ae4f4);_0x4170a1&&(_0x4170a1[_0x122777(0xa4)]===!![]||_0x4170a1[_0x122777(0xa4)]==='online'||_0x4170a1[_0x122777(0xa4)]===0x1)&&(_0x18cdbb=!![],_0x2d0837['push'](_0x4ae4f4));}catch(_0x33c50c){}}return await _0x3fdd18['setStateAsync'](_0x122777(0x1d3),{'val':_0x2d0837[_0x122777(0x135)](',\x20'),'ack':!![]}),_0x18cdbb&&(_0x3fdd18[_0x122777(0xd1)]&&(_0x3fdd18['log'][_0x122777(0x1fd)](_0x122777(0x14a)),abortExitTimer(_0x3fdd18)),!_0x3fdd18[_0x122777(0x113)]&&_0x3fdd18[_0x122777(0x1b8)]===SYSTEM_MODES[_0x122777(0xe2)]&&await setPresence(_0x3fdd18,!![])),_0x18cdbb;}catch(_0x1a3c88){return![];}}function startExitTimer(_0x1c6e07){const _0x5d8c0b=a0_0x8b98da;abortExitTimer(_0x1c6e07),_0x1c6e07[_0x5d8c0b(0x1d1)]=!![],_0x1c6e07['exitGraceTimer']=setTimeout(()=>{const _0x229b36=_0x5d8c0b;_0x1c6e07[_0x229b36(0x1d1)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x1c6e07[_0x5d8c0b(0xd1)]=setTimeout(()=>{const _0x41fb91=_0x5d8c0b;setPresence(_0x1c6e07,![]),_0x1c6e07[_0x41fb91(0xd1)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x6d992f){const _0x32477d=a0_0x8b98da;if(_0x6d992f[_0x32477d(0xd1)])clearTimeout(_0x6d992f[_0x32477d(0xd1)]);if(_0x6d992f['exitGraceTimer'])clearTimeout(_0x6d992f['exitGraceTimer']);_0x6d992f[_0x32477d(0xd1)]=null,_0x6d992f['exitGraceTimer']=null,_0x6d992f['isGracePeriodActive']=![];}async function setPresence(_0x417543,_0x595fa8){const _0xde897=a0_0x8b98da;if(_0x417543[_0xde897(0x113)]===_0x595fa8)return;_0x417543['isPresent']=_0x595fa8,await _0x417543['setStateAsync'](_0xde897(0x19f),{'val':_0x595fa8,'ack':!![]});}async function executeAutomationAction(_0x13351b){const _0x45d96b=a0_0x8b98da;try{const _0x9aa36c=await _0x13351b[_0x45d96b(0x13a)](_0x45d96b(0x175)),_0x2d2fa5=await _0x13351b[_0x45d96b(0x13a)](_0x45d96b(0x183));if(_0x9aa36c&&_0x9aa36c[_0x45d96b(0xa4)]&&_0x2d2fa5){const _0x2e21e9=_0x9aa36c[_0x45d96b(0xa4)];let _0x23bf01=_0x2d2fa5['val'];try{_0x23bf01=JSON['parse'](_0x23bf01);}catch(_0x25ce84){}_0x13351b[_0x45d96b(0x12e)][_0x45d96b(0x1fd)](_0x45d96b(0x185)+_0x2e21e9+'\x20=\x20'+_0x23bf01),await _0x13351b[_0x45d96b(0x1bc)](_0x2e21e9,_0x23bf01);}else _0x13351b[_0x45d96b(0x12e)]['warn']('ü§ñ\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x1efa7b){_0x13351b['log'][_0x45d96b(0x12f)](_0x45d96b(0x1c8)+_0x1efa7b[_0x45d96b(0xd9)]);}}async function processSensorEvent(_0x129a23,_0x46275f,_0x597702,_0x22d8b7){const _0x1a10aa=a0_0x8b98da;if(!_0x22d8b7)return;const _0x3f679a=_0x597702['val'],_0x495339=Date['now'](),_0x5738a6=_0x129a23[_0x1a10aa(0x117)][_0x46275f];_0x129a23['sensorLastValues'][_0x46275f]=_0x3f679a;if(!_0x22d8b7[_0x1a10aa(0xec)]&&_0x5738a6!=undefined&&_0x5738a6==_0x3f679a)return;const _0x49c0b5=(_0x22d8b7[_0x1a10aa(0x15c)]||'')[_0x1a10aa(0xb2)](),_0x56751e=_0x49c0b5['includes'](_0x1a10aa(0x20f))||_0x49c0b5[_0x1a10aa(0x14b)](_0x1a10aa(0xa7))||_0x49c0b5['includes'](_0x1a10aa(0x126))||_0x49c0b5[_0x1a10aa(0x14b)](_0x1a10aa(0x160));_0x129a23['isProVersion']&&_0x56751e&&recordThermodynamics(_0x129a23,_0x46275f,_0x3f679a,_0x22d8b7[_0x1a10aa(0x122)]);const _0x19879c={'timestamp':_0x495339,'id':_0x46275f,'name':_0x22d8b7['name'],'type':_0x22d8b7[_0x1a10aa(0x15c)],'location':_0x22d8b7[_0x1a10aa(0x122)],'value':_0x3f679a};_0x129a23['eventHistory']['unshift'](_0x19879c);if(_0x129a23[_0x1a10aa(0x1cf)][_0x1a10aa(0x10e)]>HISTORY_MAX_SIZE)_0x129a23['eventHistory']['pop']();await _0x129a23['setStateAsync']('events.lastEvent',{'val':JSON[_0x1a10aa(0x225)](_0x19879c),'ack':!![]}),await _0x129a23[_0x1a10aa(0xfb)](_0x1a10aa(0x1fe),{'val':JSON[_0x1a10aa(0x225)](_0x129a23[_0x1a10aa(0x1cf)]),'ack':!![]});_0x129a23['isProVersion']&&(_0x129a23['rawEventLog'][_0x1a10aa(0x1ff)](_0x19879c),await saveRawEventLog(_0x129a23),recordSequence(_0x129a23,_0x19879c));if(_0x22d8b7[_0x1a10aa(0x1f6)]&&_0x3f679a===!![]){if(_0x129a23[_0x1a10aa(0x113)]&&!_0x129a23[_0x1a10aa(0x1d1)])startExitTimer(_0x129a23);else{if(!_0x129a23[_0x1a10aa(0x113)])setPresence(_0x129a23,!![]);}}else{if(_0x22d8b7[_0x1a10aa(0x15c)]==='motion'&&_0x3f679a===!![]){if(_0x129a23[_0x1a10aa(0xd1)])abortExitTimer(_0x129a23);if(!_0x129a23[_0x1a10aa(0x113)]&&_0x129a23[_0x1a10aa(0x1b8)]===SYSTEM_MODES[_0x1a10aa(0xe2)])setPresence(_0x129a23,!![]);}}}async function recordThermodynamics(_0x3bf37a,_0x36bafe,_0x57ecea,_0x38d389){const _0x33348a=a0_0x8b98da,_0x23e404=await getOutsideTemperatureNumeric(_0x3bf37a),_0x4fc137=await _0x3bf37a[_0x33348a(0x13a)]('LTM.trainingData.thermodynamics');let _0x221689=[];if(_0x4fc137&&_0x4fc137['val'])try{_0x221689=JSON[_0x33348a(0x127)](_0x4fc137[_0x33348a(0xa4)]);}catch(_0x48aa25){}_0x221689[_0x33348a(0x1ff)]({'ts':Date[_0x33348a(0xf2)](),'room':_0x38d389||_0x33348a(0x182),'t_in':_0x57ecea,'t_out':_0x23e404});if(_0x221689['length']>THERMO_LOG_SIZE)_0x221689[_0x33348a(0xbc)]();await _0x3bf37a[_0x33348a(0xfb)](_0x33348a(0xe8),{'val':JSON[_0x33348a(0x225)](_0x221689),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x420a35){const _0x5d8d06=a0_0x8b98da;if(_0x420a35['config'][_0x5d8d06(0x9f)])try{const _0x3cc2b6=await _0x420a35[_0x5d8d06(0x1e1)](_0x420a35[_0x5d8d06(0xf3)]['outdoorSensorId']);if(_0x3cc2b6&&_0x3cc2b6[_0x5d8d06(0xa4)]!==undefined&&_0x3cc2b6[_0x5d8d06(0xa4)]!==null)return parseFloat(_0x3cc2b6[_0x5d8d06(0xa4)]);}catch(_0x6d1581){}const _0x1d0eea=_0x420a35[_0x5d8d06(0xf3)][_0x5d8d06(0x200)];if(!_0x420a35[_0x5d8d06(0xf3)][_0x5d8d06(0x214)]||!_0x1d0eea)return null;try{let _0x430905='';if(_0x1d0eea[_0x5d8d06(0x14b)]('accuweather'))_0x430905=_0x1d0eea+_0x5d8d06(0x17d);else{if(_0x1d0eea[_0x5d8d06(0x14b)](_0x5d8d06(0x9a)))_0x430905=_0x1d0eea+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x1d0eea[_0x5d8d06(0x14b)](_0x5d8d06(0x16c)))_0x430905=_0x1d0eea+'.forecast.current.temperature';else{if(_0x1d0eea[_0x5d8d06(0x14b)](_0x5d8d06(0x17b)))_0x430905=_0x1d0eea+_0x5d8d06(0x97);}}}if(_0x430905){const _0x49c244=await _0x420a35[_0x5d8d06(0x1e1)](_0x430905);if(_0x49c244&&_0x49c244['val']!==undefined&&_0x49c244[_0x5d8d06(0xa4)]!==null)return parseFloat(_0x49c244[_0x5d8d06(0xa4)]);}}catch(_0x494d54){}return null;}async function recordSequence(_0x5e56d2,_0x23ffc2){const _0x484715=a0_0x8b98da,_0x4abef5=(_0x23ffc2[_0x484715(0x15c)]||'')[_0x484715(0xb2)](),_0x3bacd8=[_0x484715(0x19b),_0x484715(0x118),_0x484715(0x1b3),_0x484715(0x1db),'occupancy',_0x484715(0x1a3),_0x484715(0x138),'window',_0x484715(0x1f9),_0x484715(0x205),_0x484715(0x1ca),_0x484715(0x1f8),'licht','switch',_0x484715(0x1d0),_0x484715(0xd8),'lampe'];if(!_0x3bacd8[_0x484715(0x1df)](_0x53fa50=>_0x4abef5[_0x484715(0x14b)](_0x53fa50)))return;if(!_0x23ffc2['value'])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x484715(0x1ff)]({'loc':_0x23ffc2[_0x484715(0x122)]||_0x484715(0x182),'id':_0x23ffc2['id'],'ts':Date[_0x484715(0xf2)]()}),sequenceTimer=setTimeout(async()=>{if(activeSequence['length']>0x1)await saveCompletedSequence(_0x5e56d2);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x549157){const _0x4fab70=a0_0x8b98da;try{const _0x2652ec=await _0x549157[_0x4fab70(0x13a)](_0x4fab70(0xdf));let _0x141106=[];if(_0x2652ec&&_0x2652ec[_0x4fab70(0xa4)])try{_0x141106=JSON['parse'](_0x2652ec['val']);}catch(_0x48989e){}const _0x279f53=activeSequence[0x0]['ts'],_0x524f94=activeSequence[_0x4fab70(0x1c5)](_0x4a1e1b=>({'loc':_0x4a1e1b[_0x4fab70(0x1e7)],'t_delta':Math['round']((_0x4a1e1b['ts']-_0x279f53)/0x3e8)})),_0x24e487={'timestamp':new Date(_0x279f53)['toISOString'](),'steps':_0x524f94,'duration':Math[_0x4fab70(0x196)]((activeSequence[activeSequence[_0x4fab70(0x10e)]-0x1]['ts']-_0x279f53)/0x3e8),'daytime':new Date(_0x279f53)[_0x4fab70(0x167)]()};_0x141106[_0x4fab70(0x1ff)](_0x24e487);if(_0x141106['length']>MAX_TRAINING_SET_SIZE)_0x141106[_0x4fab70(0xbc)]();await _0x549157[_0x4fab70(0xfb)](_0x4fab70(0xdf),{'val':JSON[_0x4fab70(0x225)](_0x141106),'ack':!![]}),runSecurityCheck(_0x549157,_0x24e487);}catch(_0x398ec4){_0x549157[_0x4fab70(0x12e)][_0x4fab70(0x12f)]('[RECORDER]\x20Error:\x20'+_0x398ec4[_0x4fab70(0xd9)]);}}function runSecurityCheck(_0x32bd96,_0x210c41){const _0x3620d0=a0_0x8b98da;if(!_0x32bd96[_0x3620d0(0x153)])return;sendToPython(_0x32bd96,_0x3620d0(0x176),{'sequence':_0x210c41});}async function createDailyDigest(_0xcb098){const _0x256471=a0_0x8b98da;if(!_0xcb098[_0x256471(0x153)])return;await _0xcb098[_0x256471(0xfb)](LTM_DP_STATUS,{'val':_0x256471(0x1b1),'ack':!![]});if(!_0xcb098[_0x256471(0x147)]||_0xcb098[_0x256471(0x9b)][_0x256471(0x10e)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0xcb098[_0x256471(0xfb)](LTM_DP_STATUS,{'val':_0x256471(0x163),'ack':!![]});return;}const _0x33c3c7=JSON[_0x256471(0x127)](JSON[_0x256471(0x225)](_0xcb098[_0x256471(0x9b)])),_0x3bb6ae=_0x33c3c7[_0x256471(0x10e)],_0x3463e1=_0x256471(0x188)+JSON['stringify'](_0x33c3c7);try{const _0x151635=await _0xcb098[_0x256471(0x147)][_0x256471(0x1f1)](_0x3463e1),_0xb24dcb=JSON[_0x256471(0x127)](_0x151635[_0x256471(0xcb)]['text']()[_0x256471(0xfe)](/```json|```/g,'')[_0x256471(0xdb)]()),_0x1f297f={'timestamp':new Date()[_0x256471(0x13d)](),'eventCount':_0x3bb6ae,'summary':_0xb24dcb['summary']||_0x256471(0x1d4),'activityLevel':_0xb24dcb['activityLevel']||_0x256471(0x201),'systemMode':_0xcb098[_0x256471(0x1b8)]};_0xcb098[_0x256471(0xbf)][_0x256471(0x1ff)](_0x1f297f),await saveDailyDigests(_0xcb098),_0xcb098[_0x256471(0x9b)]=[],await saveRawEventLog(_0xcb098),await _0xcb098[_0x256471(0xfb)](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0xcb098['isProVersion'])sendToPython(_0xcb098,'ANALYZE_HEALTH',{'digest':_0x1f297f});}catch(_0x5bf9c5){_0xcb098[_0x256471(0x12e)][_0x256471(0x12f)](_0x5bf9c5[_0x256471(0xd9)]);}}async function runBaselineDriftAnalysis(_0xf8c0b8){const _0x14afea=a0_0x8b98da;if(!_0xf8c0b8[_0x14afea(0x153)]||!_0xf8c0b8[_0x14afea(0x147)])return;const _0x5a8850=_0xf8c0b8['config'][_0x14afea(0x166)]||0xe;if(_0xf8c0b8[_0x14afea(0xbf)][_0x14afea(0x10e)]<_0x5a8850+0x7){await _0xf8c0b8['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x14afea(0x168),'ack':!![]});return;}const _0x241787=_0xf8c0b8[_0x14afea(0xbf)][_0x14afea(0x189)](-_0x5a8850),_0x12427b=_0xf8c0b8[_0x14afea(0xbf)][_0x14afea(0x189)](0x0,_0xf8c0b8[_0x14afea(0xbf)][_0x14afea(0x10e)]-_0x5a8850),_0x24f5f4=_0x14afea(0xd3)+JSON[_0x14afea(0x225)](_0x12427b)+_0x14afea(0x11f)+JSON[_0x14afea(0x225)](_0x241787);try{const _0x4e1917=await _0xf8c0b8[_0x14afea(0x147)][_0x14afea(0x1f1)](_0x24f5f4),_0x408807=JSON[_0x14afea(0x127)](_0x4e1917[_0x14afea(0xcb)][_0x14afea(0xa5)]()[_0x14afea(0xfe)](/```json|```/g,'')[_0x14afea(0xdb)]());_0x408807[_0x14afea(0x1ba)]&&(await _0xf8c0b8[_0x14afea(0xfb)](LTM_DP_DRIFT_STATUS,{'val':_0x408807[_0x14afea(0x1ba)],'ack':!![]}),await _0xf8c0b8[_0x14afea(0xfb)](LTM_DP_DRIFT_DETAILS,{'val':_0x408807['driftDetails'],'ack':!![]}),await _0xf8c0b8['setStateAsync'](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x14afea(0xf2)](),'ack':!![]}));}catch(_0x2aff11){}}function a0_0x1874(){const _0x99e49=['info','events.history','push','weatherInstance','normal','data','getObjectAsync','Auto\x20Apply','contact','3905416fyKbeD','python_service','delObjectAsync','Gemini\x20AI\x20initialized.','reason','Training\x20Status','unshift','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','getFullYear','temperature','analysis.trigger','analysis.security','callback','lastAlertState','useWeather','inactivityThresholdHours','useCalendar','Target\x20ID','AI\x20Training','110LPvDkY','details','1505665XCVwyW','apiKey','onUnload','analysis.triggerBriefing','Missing\x20data','setupModeResetScheduler','analysis.health.todayVector','Wetterdaten\x20deaktiviert.','success','channel','stringify','ltmJob','object','PRIORIT√ÑT:\x20Gesundheit/AAL.','LTM.baselineStatus','System\x20Mode','from','targetId','üöÄ\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','endsWith','state','setObjectNotExistsAsync','button','Insulation\x20Score','.forecast.current.temp','values','Deaktiviert\x20(Pro-Feature)','daswetter','rawEventLog','isEmergency','python3','timestamp','outdoorSensorId','startsWith','analysis.security.lastScore','LTM.rawEventLog','close','val','text','analysis.security.currentThreshold','temperatur','pop','Detected\x20Patterns','toLocaleTimeString','(((.+)+)+)+$','forEach','Err:\x20','17806ddtDKW','üï∏Ô∏è\x20Topology\x20Map\x20updated.','Alert\x20Reason','\x20new\x20patterns.','toLowerCase','.\x20SYSTEM_MODE:\x20','analysis.health.lastCheck','substring','ü§ñ\x20Autopilot:\x20Running\x20periodic\x20analysis...','pythonProcess','dismissAutomation','devices','Raw\x20Log','OK:\x20','shift','@iobroker/adapter-core','kill','dailyDigests','33FWIAsL','\x0aGrund:\x20','analysis.automation.triggerAction','ANALYZE_TREND','json','submitFeedback','getForeignObjectsAsync','cogni-living\x20adapter\x20starting\x20(v','TRAIN_ENERGY','system.config','toFixed','response','analysis.automation.patternDetected','presenceDevices','Trigger\x20Action','analysis.training.triggerHealth','getMonth','exitTimer','autoApply','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','analysisTimer','latitude','setState','extendObjectAsync','dimmer','message','indicator.alarm','trim','exports','analysis.energy','üõãÔ∏è\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','LTM.trainingData.sequences','Keine\x20Details.','analysis.training.triggerComfort','NORMAL','write','Aktiv\x20(','systemConfig','apply','Activity\x20Summary','LTM.trainingData.thermodynamics','confidence','‚ö†Ô∏è\x20SECURITY\x20ALARM:\x20','common','logDuplicates','Gemini\x20Init\x20Error:\x20','subscribeStates','TREND_RESULT','stdin','analysis.health.isAnomaly','now','config','LTM.driftAnalysis.driftDetails','analysis.isAlert','analysis.history_debug_00','constructor','LTM.driftAnalysis','livingContext','Pattern\x20Detected','setStateAsync','üêç\x20Python\x20Pong','notifyTelegramEnabled','replace','1eWDoHx','Adapter','üõ°Ô∏è\x20SECURITY\x20CHECK:\x20Score\x20','getDate','telegram','driftAnalysisTimer','Ungew√∂hnliches\x20Bewegungsmuster!\x20(Score:\x20','is_anomaly','Last\x20raw\x20event','analysis.training','Kein\x20API\x20Key!','HEALTH_TRAIN_RESULT','Security\x20Monitor','vacation','.\x20EVENTS:\x20','length','name','licenseKey','rating','activityLevel','isPresent','rule','modeResetJob','./lib/scheduler','sensorLastValues','bewegung','getOverviewData','number','split','city','indicator','getTime','\x0aSTB:\x20','analysis.activitySummary','Trigger\x20Briefing','location','Training\x20Error:\x20','HEALTH_RESULT','onReady','klima','parse','status','analysis.security.lastCheck','analysis.energy.forecast','ENERGY_TRAIN_RESULT','ANALYZE_GAIT','analysis.security.topologyMatrix','log','error','Train\x20Energy','enum','automationProposal','alertReason','üß™\x20Simulating\x20Butler\x20Proposal:\x20','join','Trend\x20Value','Today\x20Vector\x20(15m)','t√ºr','\x20=\x20','getStateAsync','Current\x20Threshold','Fokus\x20auf\x20Familienroutinen.','toISOString','splice','üåÖ\x20Morning\x20Briefing:\x0a','getEnums','exitGraceTimer','floor','./lib/scanner','KI-Modell\x20nicht\x20initialisiert','simulateButler','üõãÔ∏è\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','geminiModel','debug','User\x20dismissed\x20automation\x20proposal.','WiFi\x20Presence\x20detected.','includes','search','scanDevices','minDaysForBaseline','triggerDailyDigest','TOPOLOGY_RESULT','summary','detected','isProVersion','genAI','Alert\x20Status','Kein\x20API\x20Key.','analysis.health','Anomaly\x20Detected','Energy\x20Intelligence','analysis.energy.heatingScore','onMessage','type','@google/generative-ai','./lib/installer','value','heizung','PYTHON_EXE','üß†\x20Triggering\x20Security\x20Training...','Skipped\x20(No\x20AI\x20or\x20Data)','Sec-Training\x20started...','Train\x20Comfort','ltmStbWindowDays','getHours','N/A\x20(Learning)','\x20Tage)','change_percent','analysis.training.triggerSecurity','openweathermap','SIMULATION:\x20Test-Vorschlag\x20f√ºr\x20','briefingJob','analysis.automation.detectedPatterns','getGenerativeModel','‚ö†Ô∏è\x20ALARM:\x20','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','application/json','Trend','analysis.automation.targetId','ANALYZE_SEQUENCE','analysis.energy.insulationScore','PONG','bind','ENERGY_PREDICT_RESULT','weatherunderground','system.mode','.Current.Temperature','.Current.WeatherText','Regel\x20erkannt:\x20','\x20->\x20','toString','Unknown','analysis.automation.targetValue','analysis.automation.description','ü§ñ\x20BUTLER:\x20Executing\x20Action\x20->\x20','calendarInstance','triggerBriefing','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','slice','GUEST','.communicate.request','LTM.driftAnalysis.lastCheck','5646DqkmAz','events.history_debug_00','Topology\x20Error:\x20','4893ttUTuu','checkAndInstall','existsSync','TRAINING_COMPLETE','93140hGsJiC','subscribeForeignStatesAsync','round','¬∞C,\x20','cancel','Heating\x20Score','payload','motion','analysis.health.trendDiagnosis','filter','enum.functions.*','system.isPresent',')\x20-\x20SAFE\x20BOOT','analysis.lastResult','ANOMALY','door','ltmLtbWindowDays','analysis.analysisHistory','Description','main','Error\x20launching\x20Python:\x20','Sequences','sendTo','.forecast.current.temperature','switch','analysis.health.gaitSpeed','guest','isAlert','Keine\x20Termine.','Started...','4182138MPjpEC','pr√§senz','TRAIN_COMFORT','party','heating','command','currentSystemMode','[RESULT]','baselineDrift','Last\x20Check','setForeignStateAsync','Health\x20Analysis','VACATION','.\x20EMERGENCY:\x20','analysis.training.triggerTopology','fill','child_process','PREDICT_ENERGY','testApiKey','map','communicate.request','üìù\x20Feedback\x20received:\x20','BUTLER\x20Execution\x20Error:\x20','setupBriefingScheduler','kontakt','aiPersona','analysis.automation.autoApply','scanForDevices','Train\x20Health','eventHistory','schalter','isGracePeriodActive','COMFORT_RESULT','system.presenceWho','Digest','targetValue','analysisInterval','string','analysisHistory','date','automation.triggerAction','presence','boolean','Daily\x20Digests','keys','some','geminiApiKey','getForeignStateAsync','insulation','setupLtmScheduler','stdout','analysis.training.status','LTM','loc','getForeignObjectAsync','unknown','N/A','‚úÖ\x20HEALTH\x20TRAINED.','LTM.dailyDigests','Train\x20Security','onStateChange','1241930SeiCXv','.\x20ANWESEND:\x20','generateContent','üï∏Ô∏è\x20Building\x20Topology\x20Matrix...','.forecast.current.state','analysis.training.triggerEnergy','Who\x20is\x20present?','isExit','writable','light','fenster','LTM.driftAnalysis.baselineDrift','analysis.alertReason','[LOG]'];a0_0x1874=function(){return _0x99e49;};return a0_0x1874();}async function sendMorningBriefing(_0x284cb1){const _0x1a5ce7=a0_0x8b98da;if(!_0x284cb1[_0x1a5ce7(0x147)])return;try{const _0x390152=_0x1a5ce7(0x20d),_0x8d7fdd=await _0x284cb1[_0x1a5ce7(0x147)]['generateContent'](_0x390152),_0x4ddc1b=_0x8d7fdd['response'][_0x1a5ce7(0xa5)]();sendNotification(_0x284cb1,_0x1a5ce7(0x13f)+_0x4ddc1b);}catch(_0x588f80){_0x284cb1['log'][_0x1a5ce7(0x12f)]('Briefing\x20Error:\x20'+_0x588f80[_0x1a5ce7(0xd9)]);}}function stopPythonService(_0x9cd357){const _0x5ca784=a0_0x8b98da;if(_0x9cd357[_0x5ca784(0xb7)]){try{_0x9cd357[_0x5ca784(0xb7)][_0x5ca784(0xbe)]();}catch(_0x12724c){}_0x9cd357[_0x5ca784(0xb7)]=null;}}function sendToPython(_0x379fb5,_0x7b800c,_0x20bd78={}){const _0x159992=a0_0x8b98da;if(!_0x379fb5[_0x159992(0xb7)]||!_0x379fb5[_0x159992(0xb7)][_0x159992(0xf0)][_0x159992(0x1f7)])return;const _0x2c3743=JSON[_0x159992(0x225)]({'command':_0x7b800c,..._0x20bd78});try{_0x379fb5[_0x159992(0xb7)][_0x159992(0xf0)][_0x159992(0xe3)](_0x2c3743+'\x0a');}catch(_0x54daa3){}}function runPythonHealthCheck(_0x37933c){const _0x11a1dc=a0_0x8b98da;if(!_0x37933c[_0x11a1dc(0xbf)]||_0x37933c[_0x11a1dc(0xbf)][_0x11a1dc(0x10e)]<0x2)return;const _0xc94851=_0x37933c[_0x11a1dc(0xbf)][_0x11a1dc(0x1c5)](_0xf98664=>{const _0x16df4f=_0x11a1dc,_0x4224bf=(_0xf98664[_0x16df4f(0x112)]||'')[_0x16df4f(0xb2)]();return ACTIVITY_LEVEL_MAP[_0x4224bf]||0x32;});sendToPython(_0x37933c,_0x11a1dc(0xc3),{'values':_0xc94851,'tag':'Activity-Level'});}function handlePythonResult(_0x5e7695,_0x4a47f4){const _0x281abd=a0_0x8b98da;if(_0x4a47f4[_0x281abd(0x15c)]===_0x281abd(0x178))_0x5e7695[_0x281abd(0x12e)][_0x281abd(0x148)](_0x281abd(0xfc));else{if(_0x4a47f4[_0x281abd(0x15c)]==='SECURITY_RESULT'){const {anomaly_score:_0x5025e7,is_anomaly:_0x462a35,threshold:_0x13820f,explanation:_0x1bc36c}=_0x4a47f4[_0x281abd(0x19a)];_0x5e7695[_0x281abd(0x12e)]['info'](_0x281abd(0x101)+_0x5025e7['toFixed'](0x5)+_0x281abd(0x180)+(_0x462a35?_0x281abd(0x1a2):'OK')),_0x5e7695[_0x281abd(0xfb)](_0x281abd(0xa1),{'val':_0x5025e7,'ack':!![]}),_0x5e7695['setStateAsync'](_0x281abd(0x129),{'val':new Date()[_0x281abd(0x13d)](),'ack':!![]});if(_0x13820f)_0x5e7695[_0x281abd(0xfb)]('analysis.security.currentThreshold',{'val':_0x13820f,'ack':!![]});if(_0x462a35){let _0x5d0e18=_0x281abd(0x105)+_0x5025e7[_0x281abd(0xca)](0x4)+')';if(_0x1bc36c&&_0x1bc36c!=='Unknown')_0x5d0e18+=_0x281abd(0xc1)+_0x1bc36c;_0x5e7695['setStateAsync'](_0x281abd(0xf5),{'val':!![],'ack':!![]}),_0x5e7695[_0x281abd(0xfb)]('analysis.alertReason',{'val':_0x5d0e18,'ack':!![]}),sendNotification(_0x5e7695,_0x281abd(0xea)+_0x5d0e18,![],!![]);}}else{if(_0x4a47f4['type']===_0x281abd(0x193)){const _0x44aaba=_0x4a47f4[_0x281abd(0x19a)][_0x281abd(0x21a)]||'',_0x5a8b44=_0x4a47f4[_0x281abd(0x19a)]['threshold'],_0x4bfea5=_0x4a47f4['payload']['success']?'Success:\x20'+new Date()[_0x281abd(0xaa)]()+'\x20('+_0x44aaba+')':'Failed:\x20'+_0x4a47f4['payload'][_0x281abd(0x20a)];_0x5e7695[_0x281abd(0xfb)](_0x281abd(0x1e5),{'val':_0x4bfea5,'ack':!![]});if(_0x4a47f4[_0x281abd(0x19a)][_0x281abd(0x223)]&&_0x5a8b44)_0x5e7695[_0x281abd(0xfb)]('analysis.security.currentThreshold',{'val':_0x5a8b44,'ack':!![]});}else{if(_0x4a47f4[_0x281abd(0x15c)]===_0x281abd(0x1d2)){const {patterns:_0x370442}=_0x4a47f4[_0x281abd(0x19a)];if(_0x370442&&_0x370442[_0x281abd(0x10e)]>0x0){_0x5e7695[_0x281abd(0x12e)][_0x281abd(0x1fd)]('üõãÔ∏è\x20BUTLER:\x20Found\x20'+_0x370442[_0x281abd(0x10e)]+_0x281abd(0xb1)),_0x5e7695['setStateAsync'](_0x281abd(0x16f),{'val':JSON[_0x281abd(0x225)](_0x370442),'ack':!![]});const _0xeac636=_0x370442[0x0],_0x4c7a9e=_0x281abd(0x17f)+_0xeac636[_0x281abd(0x114)]+'\x20('+(_0xeac636[_0x281abd(0xe9)]*0x64)['toFixed'](0x0)+'%)';_0x5e7695[_0x281abd(0xfb)](_0x281abd(0xcc),{'val':!![],'ack':!![]}),_0x5e7695[_0x281abd(0xfb)](_0x281abd(0x184),{'val':_0x4c7a9e,'ack':!![]});}else _0x5e7695['log'][_0x281abd(0x1fd)](_0x281abd(0x146)),_0x5e7695[_0x281abd(0xfb)](_0x281abd(0xcc),{'val':![],'ack':!![]}),_0x5e7695[_0x281abd(0xfb)](_0x281abd(0x16f),{'val':'[]','ack':!![]});}else{if(_0x4a47f4[_0x281abd(0x15c)]===_0x281abd(0x12b)){if(_0x4a47f4[_0x281abd(0x19a)]['success'])try{const _0x4923ca=JSON['parse'](_0x4a47f4[_0x281abd(0x19a)][_0x281abd(0x21a)]);if(_0x4923ca[_0x281abd(0x1e2)])_0x5e7695[_0x281abd(0xfb)]('analysis.energy.insulationScore',{'val':JSON[_0x281abd(0x225)](_0x4923ca[_0x281abd(0x1e2)]),'ack':!![]});if(_0x4923ca['heating'])_0x5e7695['setStateAsync'](_0x281abd(0x15a),{'val':JSON[_0x281abd(0x225)](_0x4923ca[_0x281abd(0x1b6)]),'ack':!![]});}catch(_0x2955a3){}}else{if(_0x4a47f4[_0x281abd(0x15c)]===_0x281abd(0x10a)){if(_0x4a47f4[_0x281abd(0x19a)][_0x281abd(0x223)])_0x5e7695[_0x281abd(0x12e)][_0x281abd(0x1fd)](_0x281abd(0x1eb));}else{if(_0x4a47f4[_0x281abd(0x15c)]===_0x281abd(0x124))_0x5e7695[_0x281abd(0xfb)](_0x281abd(0xb4),{'val':new Date()[_0x281abd(0x13d)](),'ack':!![]}),_0x5e7695['setStateAsync'](_0x281abd(0xf1),{'val':_0x4a47f4[_0x281abd(0x19a)][_0x281abd(0x106)],'ack':!![]});else{if(_0x4a47f4[_0x281abd(0x15c)]===_0x281abd(0xef))_0x5e7695[_0x281abd(0xfb)](_0x281abd(0x19c),{'val':_0x4a47f4[_0x281abd(0x19a)]['diagnosis'],'ack':!![]}),_0x5e7695[_0x281abd(0xfb)]('analysis.health.trendValue',{'val':_0x4a47f4['payload'][_0x281abd(0x16a)],'ack':!![]});else{if(_0x4a47f4[_0x281abd(0x15c)]==='GAIT_RESULT'){const {speed_trend:_0x3021ee}=_0x4a47f4[_0x281abd(0x19a)];if(_0x3021ee!==undefined)_0x5e7695[_0x281abd(0xfb)]('analysis.health.gaitSpeed',{'val':_0x3021ee,'ack':!![]});}else{if(_0x4a47f4[_0x281abd(0x15c)]===_0x281abd(0x17a)){const {forecast:_0x54d6b1}=_0x4a47f4[_0x281abd(0x19a)];if(_0x54d6b1)_0x5e7695[_0x281abd(0xfb)](_0x281abd(0x12a),{'val':JSON[_0x281abd(0x225)](_0x54d6b1),'ack':!![]});}else{if(_0x4a47f4['type']===_0x281abd(0x150)){const {data:_0x52d8dc}=_0x4a47f4['payload'];_0x52d8dc&&(_0x5e7695['log'][_0x281abd(0x1fd)](_0x281abd(0xaf)),_0x5e7695[_0x281abd(0xfb)](_0x281abd(0x12d),{'val':JSON[_0x281abd(0x225)](_0x52d8dc),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x238874){const _0x55ae53=a0_0x8b98da;let _0x552abe=_0x55ae53(0x9d);if(fs[_0x55ae53(0x192)](installer[_0x55ae53(0x161)]))_0x552abe=installer['PYTHON_EXE'];try{const _0x53bb40=path[_0x55ae53(0x135)](__dirname,_0x55ae53(0x207),'service.py');_0x238874[_0x55ae53(0xb7)]=spawn(_0x552abe,[_0x53bb40]),_0x238874[_0x55ae53(0xb7)][_0x55ae53(0x1e4)]['on'](_0x55ae53(0x202),_0x1ee013=>{const _0x4156ed=_0x55ae53,_0x277d03=_0x1ee013[_0x4156ed(0x181)]()['split']('\x0a');_0x277d03[_0x4156ed(0xac)](_0x4aeb4a=>{const _0x5b76b6=_0x4156ed,_0x5c56c9=_0x4aeb4a[_0x5b76b6(0xdb)]();if(!_0x5c56c9)return;if(_0x5c56c9[_0x5b76b6(0xa0)](_0x5b76b6(0x1fc)))_0x238874[_0x5b76b6(0x12e)][_0x5b76b6(0x148)]('[PYTHON]\x20'+_0x5c56c9[_0x5b76b6(0xb5)](0x5)[_0x5b76b6(0xdb)]());else{if(_0x5c56c9[_0x5b76b6(0xa0)](_0x5b76b6(0x1b9)))try{const _0x424ce4=JSON[_0x5b76b6(0x127)](_0x5c56c9[_0x5b76b6(0xb5)](0x8)['trim']());handlePythonResult(_0x238874,_0x424ce4);}catch(_0x287ef3){}}});}),_0x238874[_0x55ae53(0xb7)]['on'](_0x55ae53(0xa3),_0x1b44c3=>{_0x238874['pythonProcess']=null;});}catch(_0x14c5b0){_0x238874[_0x55ae53(0x12e)][_0x55ae53(0x12f)](_0x55ae53(0x1a8)+_0x14c5b0['message']);}}async function runAutopilot(_0x47d520){const _0x1d9195=a0_0x8b98da;_0x47d520[_0x1d9195(0x12e)]['debug'](_0x1d9195(0xb6)),await runGeminiAnalysis(_0x47d520),updateHealthVector(_0x47d520),triggerGaitAnalysis(_0x47d520),triggerEnergyPrediction(_0x47d520);}async function triggerGaitAnalysis(_0x40bb79){const _0x11c4e5=a0_0x8b98da;if(!_0x40bb79[_0x11c4e5(0x153)])return;try{const _0x1229ff=await _0x40bb79[_0x11c4e5(0x13a)]('LTM.trainingData.sequences');_0x1229ff&&_0x1229ff['val']&&sendToPython(_0x40bb79,_0x11c4e5(0x12c),{'sequences':JSON[_0x11c4e5(0x127)](_0x1229ff['val'])});}catch(_0x32d556){}}async function triggerEnergyPrediction(_0x1486ea){const _0x502b6a=a0_0x8b98da;if(!_0x1486ea['isProVersion'])return;try{const _0x1a0c95=await getOutsideTemperatureNumeric(_0x1486ea);if(_0x1a0c95===null)return;const _0xe92e90={},_0x1b8fa5=_0x1486ea['config'][_0x502b6a(0xb9)]||[];for(const _0x26ca57 of _0x1b8fa5){if(_0x26ca57['type']==='temperature'&&_0x26ca57[_0x502b6a(0x122)]){const _0x14d334=_0x1486ea[_0x502b6a(0x117)][_0x26ca57['id']];if(_0x14d334!==undefined)_0xe92e90[_0x26ca57['location']]=_0x14d334;}}Object[_0x502b6a(0x1de)](_0xe92e90)[_0x502b6a(0x10e)]>0x0&&sendToPython(_0x1486ea,_0x502b6a(0x1c3),{'current_temps':_0xe92e90,'t_out':_0x1a0c95});}catch(_0x5d7708){}}function updateHealthVector(_0x362d0b){const _0x17fa5e=a0_0x8b98da;if(!_0x362d0b[_0x17fa5e(0x9b)]||_0x362d0b[_0x17fa5e(0x9b)]['length']===0x0)return;const _0x3d880c=new Array(0x60)[_0x17fa5e(0x1c1)](0x0),_0x1eb772=new Date()['setHours'](0x0,0x0,0x0,0x0);_0x362d0b[_0x17fa5e(0x9b)]['forEach'](_0x3a06b1=>{const _0x227259=_0x17fa5e,_0xdadff8=new Date(_0x3a06b1[_0x227259(0x9e)]);if(_0xdadff8[_0x227259(0x11e)]()>=_0x1eb772){const _0x2571d9=_0xdadff8[_0x227259(0x167)](),_0xacff01=_0xdadff8['getMinutes'](),_0x4a53e1=_0x2571d9*0x4+Math[_0x227259(0x142)](_0xacff01/0xf);if(_0x4a53e1>=0x0&&_0x4a53e1<0x60)_0x3d880c[_0x4a53e1]++;}}),_0x362d0b[_0x17fa5e(0xfb)](_0x17fa5e(0x221),{'val':JSON['stringify'](_0x3d880c),'ack':!![]});}async function getWeatherContext(_0x364a45){const _0x3f4221=a0_0x8b98da;if(!_0x364a45[_0x3f4221(0xf3)][_0x3f4221(0x214)]||!_0x364a45[_0x3f4221(0xf3)][_0x3f4221(0x200)])return _0x3f4221(0x222);try{const _0x536483=_0x364a45[_0x3f4221(0xf3)]['weatherInstance'];let _0xf99697=await _0x364a45[_0x3f4221(0x1e1)](_0x536483+_0x3f4221(0x17d));if(!_0xf99697)_0xf99697=await _0x364a45[_0x3f4221(0x1e1)](_0x536483+_0x3f4221(0x1ab));let _0x4c2644=await _0x364a45[_0x3f4221(0x1e1)](_0x536483+_0x3f4221(0x17e));if(!_0x4c2644)_0x4c2644=await _0x364a45[_0x3f4221(0x1e1)](_0x536483+_0x3f4221(0x1f3));if(_0xf99697&&_0x4c2644)return _0xf99697[_0x3f4221(0xa4)]+_0x3f4221(0x197)+_0x4c2644[_0x3f4221(0xa4)];}catch(_0x1bfea9){}return'Keine\x20Wetterdaten\x20verf√ºgbar.';}async function getCalendarContext(_0x4333cb){const _0x3b66d4=a0_0x8b98da;if(!_0x4333cb[_0x3b66d4(0xf3)][_0x3b66d4(0x216)]||!_0x4333cb[_0x3b66d4(0xf3)][_0x3b66d4(0x186)])return'Kalender\x20deaktiviert.';return _0x3b66d4(0x1b0);}async function getCalendarNames(_0x3517b5,_0x49b850){return[];}async function saveFeedback(_0x160e03,_0x39a860){const _0x401aba=a0_0x8b98da;_0x160e03[_0x401aba(0x12e)][_0x401aba(0x1fd)](_0x401aba(0x1c7)+_0x39a860[_0x401aba(0x111)]);}async function runGeminiAnalysis(_0x211219,_0x3e9595=''){const _0x208ad3=a0_0x8b98da;if(!_0x211219['geminiModel'])return;if(_0x211219[_0x208ad3(0x1cf)][_0x208ad3(0x10e)]===0x0)return;const _0x177fc6=_0x211219[_0x208ad3(0x1cf)][_0x208ad3(0x189)](0x0,0xf),_0x4b1d40=await getWeatherContext(_0x211219),_0xbd985f=_0x211219['currentSystemMode'],_0x2a80bb=PERSONA_MAPPING[_0x211219[_0x208ad3(0xf3)][_0x208ad3(0x1cb)]||'generic'],_0x4a7ff5=_0x211219[_0x208ad3(0xf3)][_0x208ad3(0xf9)]||_0x208ad3(0xe0);let _0x57661f='Unbekannt';try{const _0x35d661=await _0x211219[_0x208ad3(0x13a)](_0x208ad3(0x1d3));if(_0x35d661&&_0x35d661[_0x208ad3(0xa4)])_0x57661f=_0x35d661[_0x208ad3(0xa4)];}catch(_0xccfdf2){}let _0x2944b5=![];try{const _0x301366=await _0x211219[_0x208ad3(0x13a)](_0x208ad3(0x1cc));if(_0x301366&&_0x301366[_0x208ad3(0xa4)])_0x2944b5=!![];}catch(_0x428a26){}const _0x128ff2=_0x208ad3(0x172)+_0x2a80bb+'.\x20KONTEXT:\x20'+_0x4a7ff5+_0x208ad3(0xb3)+_0xbd985f+'.\x20WETTER:\x20'+_0x4b1d40+_0x208ad3(0x1f0)+_0x57661f+_0x208ad3(0x10d)+JSON[_0x208ad3(0x225)](_0x177fc6)+_0x208ad3(0x1bf)+_0x3e9595+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0x41f35b=await _0x211219['geminiModel'][_0x208ad3(0x1f1)](_0x128ff2),_0x44643a=JSON[_0x208ad3(0x127)](_0x41f35b['response']['text']()[_0x208ad3(0xfe)](/```json|```/g,'')[_0x208ad3(0xdb)]());await _0x211219['setStateAsync'](_0x208ad3(0x1a1),{'val':JSON[_0x208ad3(0x225)](_0x44643a),'ack':!![]});if(_0x44643a[_0x208ad3(0x151)])await _0x211219[_0x208ad3(0xfb)](_0x208ad3(0x120),{'val':_0x44643a['summary'],'ack':!![]});const _0x13d1ca={'timestamp':Date[_0x208ad3(0xf2)](),'id':Date[_0x208ad3(0xf2)]()[_0x208ad3(0x181)](),'analysis':{'activity':{'summary':_0x44643a[_0x208ad3(0x151)],'isAlert':_0x44643a[_0x208ad3(0x1af)],'alertReason':_0x44643a[_0x208ad3(0x133)]},'comfort':{'automationProposal':_0x44643a[_0x208ad3(0x132)]}}};await updateAnalysisHistory(_0x211219,_0x13d1ca);const _0xf445ea=_0x44643a[_0x208ad3(0x1af)]||![];_0xf445ea!==_0x211219[_0x208ad3(0x213)]&&(await _0x211219[_0x208ad3(0xfb)](_0x208ad3(0xf5),{'val':_0xf445ea,'ack':!![]}),_0x211219[_0x208ad3(0x213)]=_0xf445ea,_0xf445ea&&(await _0x211219['setStateAsync']('analysis.alertReason',{'val':_0x44643a['alertReason'],'ack':!![]}),sendNotification(_0x211219,_0x208ad3(0x171)+_0x44643a[_0x208ad3(0x133)],![],_0x44643a[_0x208ad3(0x9c)])));if(_0x44643a[_0x208ad3(0x132)]&&_0x44643a[_0x208ad3(0x132)][_0x208ad3(0x152)]){await _0x211219[_0x208ad3(0xfb)](_0x208ad3(0xcc),{'val':!![],'ack':!![]}),await _0x211219['setStateAsync'](_0x208ad3(0x184),{'val':_0x44643a[_0x208ad3(0x132)]['description'],'ack':!![]}),await _0x211219[_0x208ad3(0xfb)](_0x208ad3(0x175),{'val':_0x44643a[_0x208ad3(0x132)]['targetId'],'ack':!![]}),await _0x211219['setStateAsync'](_0x208ad3(0x183),{'val':JSON['stringify'](_0x44643a[_0x208ad3(0x132)]['targetValue']),'ack':!![]});if(_0x2944b5)executeAutomationAction(_0x211219);}}catch(_0x18a1f6){_0x211219[_0x208ad3(0x12e)][_0x208ad3(0x12f)]('Gemini\x20Error:\x20'+_0x18a1f6[_0x208ad3(0xd9)]);}}async function startSystem(_0x3f257c){const _0x31dd06=a0_0x8b98da;_0x3f257c[_0x31dd06(0x12e)][_0x31dd06(0x1fd)](_0x31dd06(0x91)),await initZombies(_0x3f257c);try{_0x3f257c[_0x31dd06(0x153)]=await checkLicense(_0x3f257c[_0x31dd06(0xf3)][_0x31dd06(0x110)]);}catch(_0xff1737){}if(!_0x3f257c[_0x31dd06(0xf3)][_0x31dd06(0x215)]||_0x3f257c[_0x31dd06(0xf3)][_0x31dd06(0x215)]<0.1)_0x3f257c[_0x31dd06(0xf3)][_0x31dd06(0x215)]=0xc;await initHistory(_0x3f257c),await initSystemConfig(_0x3f257c);if(_0x3f257c[_0x31dd06(0xf3)][_0x31dd06(0x1e0)])try{_0x3f257c[_0x31dd06(0x154)]=new GoogleGenerativeAI(_0x3f257c[_0x31dd06(0xf3)][_0x31dd06(0x1e0)]),_0x3f257c[_0x31dd06(0x147)]=_0x3f257c[_0x31dd06(0x154)][_0x31dd06(0x170)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x31dd06(0x173)}}),_0x3f257c[_0x31dd06(0x12e)][_0x31dd06(0x1fd)](_0x31dd06(0x209));}catch(_0x3490d7){_0x3f257c[_0x31dd06(0x12e)][_0x31dd06(0x12f)](_0x31dd06(0xed)+_0x3490d7[_0x31dd06(0xd9)]);}await createAllObjects(_0x3f257c),await loadSystemMode(_0x3f257c),await loadRawEventLog(_0x3f257c),await loadDailyDigests(_0x3f257c),_0x3f257c[_0x31dd06(0xee)](_0x31dd06(0x210)),_0x3f257c['subscribeStates'](LTM_DP_TRIGGER_DIGEST),_0x3f257c[_0x31dd06(0xee)](_0x31dd06(0x17c)),_0x3f257c[_0x31dd06(0xee)](_0x31dd06(0x21e)),_0x3f257c[_0x31dd06(0xee)]('analysis.automation.triggerAction'),_0x3f257c[_0x31dd06(0xee)](_0x31dd06(0x1cc)),_0x3f257c['subscribeStates']('analysis.training.triggerSecurity'),_0x3f257c[_0x31dd06(0xee)](_0x31dd06(0xcf)),_0x3f257c['subscribeStates'](_0x31dd06(0x1f4)),_0x3f257c[_0x31dd06(0xee)](_0x31dd06(0xe1)),_0x3f257c[_0x31dd06(0xee)](_0x31dd06(0x1c0)),await initSensorSubscriptions(_0x3f257c),await initPresenceSubscriptions(_0x3f257c),await setupTelegramListener(_0x3f257c),setTimeout(()=>checkWifiPresence(_0x3f257c),0x1388);if(_0x3f257c[_0x31dd06(0xd4)])clearInterval(_0x3f257c[_0x31dd06(0xd4)]);const _0x325878=_0x3f257c[_0x31dd06(0xf3)][_0x31dd06(0x1d6)]||0xf;_0x325878>0x0&&(_0x3f257c[_0x31dd06(0xd4)]=setInterval(()=>{runAutopilot(_0x3f257c);},_0x325878*0x3c*0x3e8)),schedulers[_0x31dd06(0x1e3)](_0x3f257c,()=>createDailyDigest(_0x3f257c)),schedulers[_0x31dd06(0x220)](_0x3f257c),schedulers['setupDriftAnalysisScheduler'](_0x3f257c,()=>runBaselineDriftAnalysis(_0x3f257c)),schedulers[_0x31dd06(0x1c9)](_0x3f257c,()=>sendMorningBriefing(_0x3f257c)),startPythonService(_0x3f257c),setTimeout(()=>{_0x3f257c['pythonProcess']&&(runPythonHealthCheck(_0x3f257c),triggerGaitAnalysis(_0x3f257c),triggerEnergyPrediction(_0x3f257c)),updateHealthVector(_0x3f257c);},0x1388);}class CogniLiving extends utils[a0_0x8b98da(0x100)]{constructor(_0x7b8044){const _0x2965ae=a0_0x8b98da;super({..._0x7b8044,'name':'cogni-living'}),this[_0x2965ae(0x1cf)]=[],this['analysisHistory']=[],this[_0x2965ae(0x9b)]=[],this[_0x2965ae(0xbf)]=[],this['sensorLastValues']={},this[_0x2965ae(0xe5)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x2965ae(0x113)]=!![],this['exitTimer']=null,this[_0x2965ae(0x141)]=null,this[_0x2965ae(0x1d1)]=![],this['genAI']=null,this[_0x2965ae(0x147)]=null,this[_0x2965ae(0x1b8)]=SYSTEM_MODES[_0x2965ae(0xe2)],this[_0x2965ae(0x153)]=![],this[_0x2965ae(0x213)]=![],this['systemUUID']=_0x2965ae(0x1e9),this['analysisTimer']=null,this[_0x2965ae(0x226)]=null,this[_0x2965ae(0x115)]=null,this[_0x2965ae(0x104)]=null,this[_0x2965ae(0x16e)]=null,this[_0x2965ae(0xb7)]=null,this['dependencyInstallInProgress']=![],this['on']('ready',this[_0x2965ae(0x125)][_0x2965ae(0x179)](this)),this['on']('stateChange',this[_0x2965ae(0x1ee)][_0x2965ae(0x179)](this)),this['on']('unload',this[_0x2965ae(0x21d)][_0x2965ae(0x179)](this)),this['on'](_0x2965ae(0xd9),this[_0x2965ae(0x15b)]['bind'](this));}async['onReady'](){const _0x5da09c=a0_0x8b98da;this[_0x5da09c(0x12e)][_0x5da09c(0x1fd)](_0x5da09c(0xc7)+this['version']+_0x5da09c(0x1a0));if(!installer[_0x5da09c(0x191)](this,()=>startSystem(this)))return;}[a0_0x8b98da(0x21d)](_0x28f107){const _0x514913=a0_0x8b98da;if(this[_0x514913(0xd4)])clearInterval(this[_0x514913(0xd4)]);if(this[_0x514913(0x104)])clearInterval(this[_0x514913(0x104)]);if(this['ltmJob'])this[_0x514913(0x226)]['cancel']();if(this[_0x514913(0x115)])this[_0x514913(0x115)][_0x514913(0x198)]();if(this['briefingJob'])this[_0x514913(0x16e)][_0x514913(0x198)]();if(this[_0x514913(0xd1)])clearTimeout(this[_0x514913(0xd1)]);if(this['exitGraceTimer'])clearTimeout(this[_0x514913(0x141)]);stopPythonService(this),_0x28f107();}async[a0_0x8b98da(0x1ee)](_0x319f5d,_0x5b733a){const _0x2d947f=a0_0x8b98da;if(!_0x5b733a||this['dependencyInstallInProgress'])return;if(_0x319f5d[_0x2d947f(0x14b)](_0x2d947f(0x103))&&_0x319f5d[_0x2d947f(0x92)](_0x2d947f(0x1c6))&&_0x5b733a['val']){await handleTelegramResponse(this,_0x5b733a['val']);return;}if(_0x319f5d===this['namespace']+'.'+SYSTEM_DP_MODE){if(_0x5b733a[_0x2d947f(0xa4)]&&Object[_0x2d947f(0x98)](SYSTEM_MODES)[_0x2d947f(0x14b)](_0x5b733a[_0x2d947f(0xa4)])){this['currentSystemMode']=_0x5b733a['val'];if(_0x5b733a[_0x2d947f(0xa4)]===SYSTEM_MODES[_0x2d947f(0x1be)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x5b733a['ack'])this[_0x2d947f(0xd6)](_0x319f5d,{'val':this[_0x2d947f(0x1b8)],'ack':!![]});return;}if(!_0x5b733a['ack']){_0x319f5d[_0x2d947f(0x14b)](_0x2d947f(0x210))&&_0x5b733a[_0x2d947f(0xa4)]&&(this[_0x2d947f(0xd6)](_0x319f5d,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x319f5d[_0x2d947f(0x14b)](_0x2d947f(0x14f))&&_0x5b733a[_0x2d947f(0xa4)]){this['setState'](_0x319f5d,{'val':![],'ack':!![]});if(this[_0x2d947f(0x153)])createDailyDigest(this);}_0x319f5d[_0x2d947f(0x14b)](_0x2d947f(0x187))&&_0x5b733a['val']&&(this[_0x2d947f(0xd6)](_0x319f5d,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x319f5d[_0x2d947f(0x14b)](_0x2d947f(0x1da))&&_0x5b733a[_0x2d947f(0xa4)]&&(this[_0x2d947f(0xd6)](_0x319f5d,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x319f5d[_0x2d947f(0x14b)]('analysis.training.triggerSecurity')&&_0x5b733a['val']){this[_0x2d947f(0xd6)](_0x319f5d,{'val':![],'ack':!![]});if(this[_0x2d947f(0x153)])try{const _0x3f4c18=await this[_0x2d947f(0x13a)](_0x2d947f(0xdf));if(_0x3f4c18&&_0x3f4c18[_0x2d947f(0xa4)]){const _0xbb5411=JSON[_0x2d947f(0x127)](_0x3f4c18[_0x2d947f(0xa4)]);this['log'][_0x2d947f(0x1fd)](_0x2d947f(0x162)),this[_0x2d947f(0xfb)](_0x2d947f(0x1e5),{'val':_0x2d947f(0x164),'ack':!![]}),sendToPython(this,'TRAIN_SECURITY',{'sequences':_0xbb5411});}}catch(_0x13cb68){this[_0x2d947f(0x12e)][_0x2d947f(0x12f)](_0x2d947f(0x123)+_0x13cb68['message']);}}if(_0x319f5d[_0x2d947f(0x14b)](_0x2d947f(0xcf))&&_0x5b733a['val']){this[_0x2d947f(0xd6)](_0x319f5d,{'val':![],'ack':!![]});if(this[_0x2d947f(0x153)])try{const _0x3c9e10=await this[_0x2d947f(0x13a)](LTM_DP_DAILY_DIGESTS);if(_0x3c9e10&&_0x3c9e10['val'])sendToPython(this,'TRAIN_HEALTH',{'digests':JSON['parse'](_0x3c9e10[_0x2d947f(0xa4)])});}catch(_0x1fe667){}}if(_0x319f5d[_0x2d947f(0x14b)]('analysis.training.triggerEnergy')&&_0x5b733a['val']){this[_0x2d947f(0xd6)](_0x319f5d,{'val':![],'ack':!![]});if(this[_0x2d947f(0x153)])try{const _0xcff19c=await this[_0x2d947f(0x13a)](_0x2d947f(0xe8));if(_0xcff19c&&_0xcff19c[_0x2d947f(0xa4)])sendToPython(this,_0x2d947f(0xc8),{'points':JSON['parse'](_0xcff19c[_0x2d947f(0xa4)])});}catch(_0x201eae){}}if(_0x319f5d[_0x2d947f(0x14b)](_0x2d947f(0xe1))&&_0x5b733a[_0x2d947f(0xa4)]){this[_0x2d947f(0xd6)](_0x319f5d,{'val':![],'ack':!![]});if(this[_0x2d947f(0x153)])try{const _0x1ef60d=await this[_0x2d947f(0x13a)](LTM_DP_RAW_LOG);_0x1ef60d&&_0x1ef60d[_0x2d947f(0xa4)]&&(this[_0x2d947f(0x12e)][_0x2d947f(0x1fd)](_0x2d947f(0xde)),sendToPython(this,_0x2d947f(0x1b4),{'events':JSON['parse'](_0x1ef60d[_0x2d947f(0xa4)])}));}catch(_0x3318ad){}}if(_0x319f5d[_0x2d947f(0x14b)](_0x2d947f(0x1c0))&&_0x5b733a[_0x2d947f(0xa4)]){this[_0x2d947f(0xd6)](_0x319f5d,{'val':![],'ack':!![]});if(this[_0x2d947f(0x153)])try{const _0x2c28f3=await this['getStateAsync'](_0x2d947f(0xdf));if(_0x2c28f3&&_0x2c28f3[_0x2d947f(0xa4)]){const _0x37c8cb=JSON['parse'](_0x2c28f3['val']);this['log'][_0x2d947f(0x1fd)](_0x2d947f(0x1f2)),sendToPython(this,'BUILD_TOPOLOGY',{'sequences':_0x37c8cb});}}catch(_0x222087){this[_0x2d947f(0x12e)][_0x2d947f(0x12f)](_0x2d947f(0x18f)+_0x222087[_0x2d947f(0xd9)]);}}return;}if(this[_0x2d947f(0xf3)]['presenceDevices']&&this['config'][_0x2d947f(0xcd)][_0x2d947f(0x14b)](_0x319f5d)){await checkWifiPresence(this);return;}const _0x417ae2=(this[_0x2d947f(0xf3)][_0x2d947f(0xb9)]||[])['find'](_0x26b834=>_0x26b834['id']===_0x319f5d);if(_0x417ae2)processSensorEvent(this,_0x319f5d,_0x5b733a,_0x417ae2);}async[a0_0x8b98da(0x15b)](_0x2ee0df){const _0x27c6dc=a0_0x8b98da;if(typeof _0x2ee0df===_0x27c6dc(0x227)&&_0x2ee0df['message']){if(_0x2ee0df[_0x27c6dc(0x1b7)]===_0x27c6dc(0x1c4)){const _0x8cbf24=_0x2ee0df[_0x27c6dc(0xd9)][_0x27c6dc(0x21c)]||this[_0x27c6dc(0xf3)][_0x27c6dc(0x1e0)];if(!_0x8cbf24)return this[_0x27c6dc(0x1aa)](_0x2ee0df[_0x27c6dc(0x8f)],_0x2ee0df['command'],{'success':![],'message':_0x27c6dc(0x156)},_0x2ee0df[_0x27c6dc(0x212)]);try{const _0x2982de=new GoogleGenerativeAI(_0x8cbf24),_0x5c736e=_0x2982de[_0x27c6dc(0x170)]({'model':GEMINI_MODEL}),_0x4a44cc=await _0x5c736e[_0x27c6dc(0x1f1)]('Hi');this[_0x27c6dc(0x1aa)](_0x2ee0df[_0x27c6dc(0x8f)],_0x2ee0df[_0x27c6dc(0x1b7)],{'success':!![],'message':_0x27c6dc(0xbb)+_0x4a44cc[_0x27c6dc(0xcb)][_0x27c6dc(0xa5)]()},_0x2ee0df[_0x27c6dc(0x212)]);}catch(_0x4f516c){this[_0x27c6dc(0x1aa)](_0x2ee0df[_0x27c6dc(0x8f)],_0x2ee0df[_0x27c6dc(0x1b7)],{'success':![],'message':_0x27c6dc(0xad)+_0x4f516c[_0x27c6dc(0xd9)]},_0x2ee0df['callback']);}}else{if(_0x2ee0df[_0x27c6dc(0x1b7)]==='testContext'){const _0x5c6399=await getWeatherContext(this),_0x418b25=await getCalendarContext(this);this[_0x27c6dc(0x1aa)](_0x2ee0df[_0x27c6dc(0x8f)],_0x2ee0df[_0x27c6dc(0x1b7)],{'success':!![],'weather':_0x5c6399,'calendar':_0x418b25},_0x2ee0df['callback']);}else{if(_0x2ee0df[_0x27c6dc(0x1b7)]==='getLtmData'){if(!this[_0x27c6dc(0x153)])return this[_0x27c6dc(0x1aa)](_0x2ee0df['from'],_0x2ee0df[_0x27c6dc(0x1b7)],{'success':![],'isPro':![]},_0x2ee0df[_0x27c6dc(0x212)]);let _0x5e7c44={'status':_0x27c6dc(0x1ea)};try{const _0x233a17=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x5e7c44[_0x27c6dc(0x128)]=_0x233a17?_0x233a17['val']:_0x27c6dc(0x1ea);}catch(_0x20d1d7){}this['sendTo'](_0x2ee0df[_0x27c6dc(0x8f)],_0x2ee0df[_0x27c6dc(0x1b7)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x5e7c44,'analysisHistory':this[_0x27c6dc(0x1d8)]},_0x2ee0df[_0x27c6dc(0x212)]);}else{if(_0x2ee0df['command']===_0x27c6dc(0x119)){const _0x530dd0=this[_0x27c6dc(0xbf)][_0x27c6dc(0x10e)],_0x5020a7=new Date(),_0x1abe6=new Date(_0x5020a7[_0x27c6dc(0x20e)](),_0x5020a7[_0x27c6dc(0xd0)](),_0x5020a7[_0x27c6dc(0x102)]())[_0x27c6dc(0x11e)](),_0x31ebcc=this[_0x27c6dc(0x9b)][_0x27c6dc(0x19d)](_0x4ad155=>new Date(_0x4ad155[_0x27c6dc(0x9e)])[_0x27c6dc(0x11e)]()>_0x1abe6)['length'],_0x1bf87a=new Array(0x18)[_0x27c6dc(0x1c1)](0x0);this[_0x27c6dc(0x9b)][_0x27c6dc(0xac)](_0x1d2b27=>{const _0x1089f6=_0x27c6dc,_0x2ff0ef=new Date(_0x1d2b27[_0x1089f6(0x9e)]);if(_0x2ff0ef[_0x1089f6(0x11e)]()>_0x1abe6)_0x1bf87a[_0x2ff0ef[_0x1089f6(0x167)]()]++;});let _0x1b6821={'status':_0x27c6dc(0x1ea)};try{const _0x5c9c10=await this[_0x27c6dc(0x13a)](LTM_DP_DRIFT_STATUS);_0x1b6821[_0x27c6dc(0x128)]=_0x5c9c10?_0x5c9c10[_0x27c6dc(0xa4)]:_0x27c6dc(0x1ea);}catch(_0x579ce2){}let _0x19cb12='';try{const _0x192290=await this[_0x27c6dc(0x13a)]('system.presenceWho');_0x19cb12=_0x192290?_0x192290[_0x27c6dc(0xa4)]:'';}catch(_0x5f4bfa){}let _0x18aac2=null;!this[_0x27c6dc(0x147)]&&(_0x18aac2=this[_0x27c6dc(0xf3)]['geminiApiKey']?_0x27c6dc(0x144):_0x27c6dc(0x109));let _0x2291a2={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0xecd509=await this[_0x27c6dc(0x13a)](_0x27c6dc(0xcc));if(_0xecd509&&_0xecd509[_0x27c6dc(0xa4)]){_0x2291a2['detected']=!![];const _0x4aa22b=await this[_0x27c6dc(0x13a)]('analysis.automation.description');_0x2291a2['description']=_0x4aa22b?_0x4aa22b[_0x27c6dc(0xa4)]:'';const _0x35ebfc=await this[_0x27c6dc(0x13a)](_0x27c6dc(0x175));_0x2291a2[_0x27c6dc(0x90)]=_0x35ebfc?_0x35ebfc['val']:'';const _0x59d3ca=await this[_0x27c6dc(0x13a)](_0x27c6dc(0x183));_0x2291a2[_0x27c6dc(0x1d5)]=_0x59d3ca?_0x59d3ca['val']:'';}const _0x10b250=await this[_0x27c6dc(0x13a)](_0x27c6dc(0x1cc));_0x2291a2[_0x27c6dc(0xd2)]=_0x10b250?!!_0x10b250['val']:![];}catch(_0x28333d){}this[_0x27c6dc(0x1aa)](_0x2ee0df[_0x27c6dc(0x8f)],_0x2ee0df['command'],{'success':!![],'eventHistory':this[_0x27c6dc(0x1cf)]['slice'](0x0,0xf),'stats':{'digestCount':_0x530dd0,'eventCountToday':_0x31ebcc,'hourlyActivity':_0x1bf87a,'driftStatus':_0x1b6821[_0x27c6dc(0x128)],'isPresent':this[_0x27c6dc(0x113)],'presenceWho':_0x19cb12,'minDays':this[_0x27c6dc(0xf3)][_0x27c6dc(0x14e)]||0x7,'stbDays':this[_0x27c6dc(0xf3)]['ltmStbWindowDays']||0xe,'ltbDays':this[_0x27c6dc(0xf3)][_0x27c6dc(0x1a4)]||0x3c,'systemError':_0x18aac2},'automation':_0x2291a2},_0x2ee0df['callback']);}else{if(_0x2ee0df[_0x27c6dc(0x1b7)]===_0x27c6dc(0x14d))try{const _0x1a748a=await scanner[_0x27c6dc(0x1cd)](this,_0x2ee0df['message']||{});this['sendTo'](_0x2ee0df[_0x27c6dc(0x8f)],_0x2ee0df[_0x27c6dc(0x1b7)],{'success':!![],'devices':_0x1a748a},_0x2ee0df[_0x27c6dc(0x212)]);}catch(_0x547d01){this[_0x27c6dc(0x1aa)](_0x2ee0df['from'],_0x2ee0df[_0x27c6dc(0x1b7)],{'success':![],'error':_0x547d01[_0x27c6dc(0xd9)]},_0x2ee0df[_0x27c6dc(0x212)]);}else{if(_0x2ee0df[_0x27c6dc(0x1b7)]===_0x27c6dc(0x140)){const _0xce832f=await this[_0x27c6dc(0xc6)](_0x27c6dc(0x19e),_0x27c6dc(0x131)),_0x6d37d7=[];if(_0xce832f)for(const _0x312a34 in _0xce832f){const _0x2962f3=_0xce832f[_0x312a34],_0x39611a=(_0x2962f3[_0x27c6dc(0xeb)]&&typeof _0x2962f3['common'][_0x27c6dc(0x10f)]===_0x27c6dc(0x227)?_0x2962f3['common']['name']['de']:_0x2962f3[_0x27c6dc(0xeb)][_0x27c6dc(0x10f)])||_0x2962f3['common']['name'];_0x6d37d7['push']({'id':_0x312a34,'name':_0x39611a});}const _0x5ae8a7=await this['getForeignObjectsAsync']('enum.rooms.*',_0x27c6dc(0x131)),_0x2e9445=[];if(_0x5ae8a7)for(const _0x2b1421 in _0x5ae8a7){const _0x349b84=_0x5ae8a7[_0x2b1421],_0x457281=(_0x349b84[_0x27c6dc(0xeb)]&&typeof _0x349b84[_0x27c6dc(0xeb)][_0x27c6dc(0x10f)]===_0x27c6dc(0x227)?_0x349b84[_0x27c6dc(0xeb)][_0x27c6dc(0x10f)]['de']:_0x349b84[_0x27c6dc(0xeb)][_0x27c6dc(0x10f)])||_0x2b1421[_0x27c6dc(0x11b)]('.')[_0x27c6dc(0xa8)]();_0x2e9445[_0x27c6dc(0x1ff)](_0x457281);}this['sendTo'](_0x2ee0df[_0x27c6dc(0x8f)],_0x2ee0df['command'],{'success':!![],'enums':_0x6d37d7,'rooms':_0x2e9445},_0x2ee0df[_0x27c6dc(0x212)]);}else{if(_0x2ee0df[_0x27c6dc(0x1b7)]==='getCalendarNames'){const _0x10f44a=_0x2ee0df[_0x27c6dc(0xd9)]['instance'];if(!_0x10f44a)return this[_0x27c6dc(0x1aa)](_0x2ee0df[_0x27c6dc(0x8f)],_0x2ee0df['command'],{'success':![],'error':'No\x20instance'},_0x2ee0df[_0x27c6dc(0x212)]);const _0x25dc1e=await getCalendarNames(this,_0x10f44a);this['sendTo'](_0x2ee0df['from'],_0x2ee0df[_0x27c6dc(0x1b7)],{'success':!![],'names':_0x25dc1e},_0x2ee0df[_0x27c6dc(0x212)]);}else{if(_0x2ee0df['command']===_0x27c6dc(0x145)){const {targetId:_0x3a9069,targetValue:_0x10233d}=_0x2ee0df[_0x27c6dc(0xd9)];this[_0x27c6dc(0x12e)][_0x27c6dc(0x1fd)](_0x27c6dc(0x134)+_0x3a9069+_0x27c6dc(0x139)+_0x10233d),await this[_0x27c6dc(0xfb)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this['setStateAsync'](_0x27c6dc(0x184),{'val':_0x27c6dc(0x16d)+_0x3a9069,'ack':!![]}),await this[_0x27c6dc(0xfb)](_0x27c6dc(0x175),{'val':_0x3a9069,'ack':!![]}),await this['setStateAsync']('analysis.automation.targetValue',{'val':_0x10233d,'ack':!![]}),this[_0x27c6dc(0x1aa)](_0x2ee0df[_0x27c6dc(0x8f)],_0x2ee0df[_0x27c6dc(0x1b7)],{'success':!![]},_0x2ee0df[_0x27c6dc(0x212)]);}else{if(_0x2ee0df[_0x27c6dc(0x1b7)]===_0x27c6dc(0xc5)){const {historyId:_0x3ae6bb,rating:_0x188cde,comment:_0x3ef87c,alertReason:_0x5b987f}=_0x2ee0df[_0x27c6dc(0xd9)];_0x3ae6bb&&_0x188cde?(await saveFeedback(this,{'timestamp':Date[_0x27c6dc(0xf2)](),'historyId':_0x3ae6bb,'rating':_0x188cde,'comment':_0x3ef87c,'alertReason':_0x5b987f}),this[_0x27c6dc(0x1aa)](_0x2ee0df[_0x27c6dc(0x8f)],_0x2ee0df[_0x27c6dc(0x1b7)],{'success':!![]},_0x2ee0df[_0x27c6dc(0x212)])):this[_0x27c6dc(0x1aa)](_0x2ee0df['from'],_0x2ee0df[_0x27c6dc(0x1b7)],{'success':![],'error':_0x27c6dc(0x21f)},_0x2ee0df[_0x27c6dc(0x212)]);}else _0x2ee0df[_0x27c6dc(0x1b7)]===_0x27c6dc(0xb8)&&(this[_0x27c6dc(0x12e)][_0x27c6dc(0x1fd)](_0x27c6dc(0x149)),await this[_0x27c6dc(0xfb)](_0x27c6dc(0xcc),{'val':![],'ack':!![]}),await this[_0x27c6dc(0xfb)](_0x27c6dc(0x184),{'val':'','ack':!![]}),this[_0x27c6dc(0x1aa)](_0x2ee0df[_0x27c6dc(0x8f)],_0x2ee0df[_0x27c6dc(0x1b7)],{'success':!![]},_0x2ee0df[_0x27c6dc(0x212)]));}}}}}}}}}}}if(require[a0_0x8b98da(0x1a7)]!==module)module[a0_0x8b98da(0xdc)]=_0x92f419=>new CogniLiving(_0x92f419);else new CogniLiving();