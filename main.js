const a0_0x15b889=a0_0x1e14;(function(_0x2a6e0f,_0x4d664f){const _0x5569ba=a0_0x1e14,_0x54953e=_0x2a6e0f();while(!![]){try{const _0x27ee5b=parseInt(_0x5569ba(0x202))/0x1*(-parseInt(_0x5569ba(0x25f))/0x2)+parseInt(_0x5569ba(0x148))/0x3+parseInt(_0x5569ba(0x225))/0x4+parseInt(_0x5569ba(0x1fc))/0x5*(parseInt(_0x5569ba(0x111))/0x6)+parseInt(_0x5569ba(0x241))/0x7+parseInt(_0x5569ba(0x1c9))/0x8*(parseInt(_0x5569ba(0x1c8))/0x9)+-parseInt(_0x5569ba(0x288))/0xa*(parseInt(_0x5569ba(0x19a))/0xb);if(_0x27ee5b===_0x4d664f)break;else _0x54953e['push'](_0x54953e['shift']());}catch(_0x464675){_0x54953e['push'](_0x54953e['shift']());}}}(a0_0x4c66,0xace17));const a0_0x595352=(function(){let _0x4eb91a=!![];return function(_0xa69bc0,_0x31fdb0){const _0x1e3706=_0x4eb91a?function(){const _0x5941bd=a0_0x1e14;if(_0x31fdb0){const _0x3a440b=_0x31fdb0[_0x5941bd(0x1bf)](_0xa69bc0,arguments);return _0x31fdb0=null,_0x3a440b;}}:function(){};return _0x4eb91a=![],_0x1e3706;};}()),a0_0x36bc00=a0_0x595352(this,function(){const _0x303b5d=a0_0x1e14;return a0_0x36bc00[_0x303b5d(0x17c)]()[_0x303b5d(0x12a)](_0x303b5d(0x279))['toString']()[_0x303b5d(0x11b)](a0_0x36bc00)[_0x303b5d(0x12a)](_0x303b5d(0x279));});a0_0x36bc00();'use strict';const utils=require(a0_0x15b889(0x201)),{GoogleGenerativeAI}=require(a0_0x15b889(0x1cc)),{spawn}=require(a0_0x15b889(0x137)),path=require('path'),fs=require('fs'),installer=require(a0_0x15b889(0x130)),scanner=require(a0_0x15b889(0x263)),schedulers=require(a0_0x15b889(0x27d)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x15b889(0x15c),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x15b889(0x196),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST=a0_0x15b889(0x1f8),LTM_DP_BASELINE_STATUS=a0_0x15b889(0x17b),LTM_DP_DRIFT_CHANNEL=a0_0x15b889(0x260),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x15b889(0x271),SYSTEM_DP_MODE=a0_0x15b889(0x1e3),SYSTEM_MODES={'NORMAL':a0_0x15b889(0x261),'VACATION':a0_0x15b889(0x243),'PARTY':'party','GUEST':a0_0x15b889(0x173)},AUTO_RESET_MODES=[SYSTEM_MODES['PARTY'],SYSTEM_MODES[a0_0x15b889(0x21b)]],PERSONA_MAPPING={'generic':a0_0x15b889(0x19d),'senior_aal':a0_0x15b889(0x1bc),'family':a0_0x15b889(0x25c),'single_comfort':a0_0x15b889(0x25b),'security':'PRIORITÃ„T:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;function a0_0x1e14(_0x117bd4,_0x468791){const _0x15b735=a0_0x4c66();return a0_0x1e14=function(_0x36bc00,_0x595352){_0x36bc00=_0x36bc00-0x104;let _0x4c66f3=_0x15b735[_0x36bc00];return _0x4c66f3;},a0_0x1e14(_0x117bd4,_0x468791);}async function initZombies(_0x117b5e){const _0x582c2d=a0_0x15b889;try{const _0xe0d293=[_0x582c2d(0x14e),_0x582c2d(0x1b2)];for(const _0x476545 of _0xe0d293){try{const _0x29f435=await _0x117b5e[_0x582c2d(0x29d)](_0x476545);if(_0x29f435)await _0x117b5e[_0x582c2d(0x28e)](_0x476545);}catch(_0x2274c9){}}}catch(_0x3ab773){}}async function checkLicense(_0x1cc81){return!![];}function a0_0x4c66(){const _0x1a5566=['vacation','devices','Success:\x20','ltmJob','Daily\x20Digests','sensorLastValues','Kein\x20API\x20Key!','.Current.WeatherText','subscribeForeignStatesAsync','lastAlertState','ANALYZE_TREND','aiPersona','.forecast.current.temperature','unshift','inactivityThresholdHours','licenseKey','analysis.automation.targetValue','command','splice','analysis.health.trendDiagnosis','Err:\x20','analysis.automation.description','slice','setObjectNotExistsAsync','Fokus\x20auf\x20Komfort.','Fokus\x20auf\x20Familienroutinen.','.\x20KONTEXT:\x20','PYTHON_EXE','494ghFuVt','LTM.driftAnalysis','normal','Training\x20Error:\x20','./lib/scanner','Skipped\x20(No\x20AI\x20or\x20Data)','analysis.security.lastScore','logDuplicates','Topology\x20Error:\x20','getStateAsync','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','\x20new\x20patterns.','\x0aSTB:\x20','toISOString','info','Current\x20Threshold','config','generateContent','LTM.driftAnalysis.lastCheck','motion','Alert\x20Status','status','ANALYZE_GAIT','Activity\x20Summary','getMinutes','analysis.security.lastCheck','(((.+)+)+)+$','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','ltmLtbWindowDays','triggerBriefing','./lib/scheduler','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','location','getEnums','Â°C,\x20','Who\x20is\x20present?','insulation','onReady','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','presenceDevices','summary','135390secmha','systemUUID','cancel','floor','includes','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','delObjectAsync','boolean','getDate','ðŸ“\x20Feedback\x20received:\x20','is_anomaly','Topology\x20Matrix','analysis.isAlert','object','ack','Adapter','window','setupDriftAnalysisScheduler','ðŸŒ…\x20Morning\x20Briefing:\x0a','callback','stringify','getObjectAsync','pop','analysis.health','N/A\x20(Learning)','Trend\x20Value','livingContext','Detected\x20Patterns','BUTLER\x20Execution\x20Error:\x20','N/A','onStateChange','analysis.lastResult','namespace','change_percent','âš ï¸\x20ALARM:\x20','onMessage','state','getFullYear','AI\x20Training','unknown','dailyDigests','analysis.training.triggerEnergy','weatherInstance','.Current.Temperature','ANALYZE_SEQUENCE','toLocaleTimeString','Sec-Training\x20started...','1971366yTcukL','isProVersion','endsWith','baselineDrift','threshold','heizung','accuweather','analysis.health.trendValue','enum.rooms.*','.forecast.current.temp','constructor','analysis.automation.triggerAction','Heating\x20Score','toFixed','getCalendarNames','geminiModel','warn','analysis.security','unload','events.lastEvent','substring','Insulation\x20Score','targetValue','dependencyInstallInProgress','Activity-Level','search','response','outdoorSensorId','common','telegram','extendObjectAsync','./lib/installer','Gait\x20Speed\x20Trend','analysis.activitySummary','notifyTelegramInstance','briefingJob','Auto\x20Apply','application/json','child_process','val','isPresent','length','payload','Deaktiviert\x20(Pro-Feature)','Trend','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','toLowerCase','.\x20SYSTEM_MODE:\x20','temperature','Started...','getForeignObjectsAsync','ðŸ\x20Python\x20Pong','isAlert','python3','currentSystemMode','452886XaSOIy','error','genAI','minDaysForBaseline','Target\x20ID','date','analysis.history_debug_00','data','analysis.training.triggerTopology','from','eventHistory','geminiApiKey','prÃ¤senz','channel','communicate.request','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','Regel\x20erkannt:\x20','Trigger\x20Action','ANALYZE_HEALTH','testApiKey','models/gemini-flash-latest','success','cogni-living','HEALTH_RESULT','forEach','log','confidence','getForeignObjectAsync','alertReason','LTM','analysis.automation.targetId','ENERGY_TRAIN_RESULT','now','main','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','isEmergency','analysis.security.topologyMatrix','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','onUnload','getHours','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','contact','Train\x20Comfort','guest','isExit','.communicate.request','[LOG]','automationProposal','getTime','Missing\x20data','.\x20ANWESEND:\x20','LTM.baselineStatus','toString','driftAnalysisTimer','scanDevices','calendarInstance','driftDetails','temperatur','WiFi\x20Presence\x20detected.','cogni-living\x20adapter\x20starting\x20(v','trim','system.presenceWho','exitGraceTimer','rule','push','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','[RESULT]','analysis.energy.forecast','kontakt','activityLevel','Failed:\x20','PONG','door','Success','heating','analysisHistory','Aktiv\x20(','timestamp','LTM.rawEventLog','startsWith','setupBriefingScheduler','Train\x20Security','935AxsOnZ','Pattern\x20Detected','Trigger\x20Briefing','Analysiere\x20ausgewogen.','Security\x20Monitor','getLtmData','fill','round','automation.triggerAction','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','autoApply','NORMAL',')\x20-\x20SAFE\x20BOOT','filter','setForeignStateAsync','Keine\x20Details.','python_service','analysis.security.currentThreshold','System','analysis.training.status','kill','analysis.triggerBriefing','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','analysis.trigger','events.history_debug_00','TRAINING_COMPLETE','longitude','shift','analysis.automation.detectedPatterns','parse','Keine\x20Termine.','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','stateChange','âš ï¸\x20SECURITY\x20ALARM:\x20','PRIORITÃ„T:\x20Gesundheit/AAL.','indicator.alarm','replace','apply','Unknown','close','keys','Last\x20raw\x20event','subscribeStates','writable','analysis.health.isAnomaly','analysisTimer','9ZppCCH','3491704EiIaPP','LTM.trainingData.sequences','exitTimer','@google/generative-ai','analysis.training.triggerComfort','Anomaly\x20Detected','city','KI-Modell\x20nicht\x20initialisiert','reason','button','Gemini\x20Error:\x20','SECURITY_RESULT','switch','sendTo','analysis.automation.patternDetected','modeResetJob','analysis.training.triggerSecurity','System\x20Mode','ENERGY_PREDICT_RESULT','message','value','map','Unbekannt','useCalendar','loc','Gemini\x20AI\x20initialized.','system.mode','User\x20dismissed\x20automation\x20proposal.','presence','getForeignStateAsync','weatherunderground','Sequences','stdin','system.config','some','analysis.alertReason','analysis.automation.autoApply','licht','pythonProcess','Keine\x20Wetterdaten\x20verfÃ¼gbar.','bewegung','LTM.trainingData.thermodynamics','write','values','analysis.energy','setStateAsync','\x20=\x20','LTM.triggerDailyDigest','targetId','json','number','15PFHGcg','description','events.history','debug','Lernphase\x20(','@iobroker/adapter-core','4243HguNfG','\x0aGrund:\x20','triggerDailyDigest','type','analysis.energy.insulationScore','diagnosis','detected','service.py','light','latitude','setState','join','Trigger\x20Analysis','details','isGracePeriodActive','indicator','Restoring\x20sensor\x20cache...','split','.NextHours.Location_1.Day_1.current.temp_value','BUILD_TOPOLOGY','Kein\x20API\x20Key.','Last\x20Check','string','Event\x20History','text.alarm','GUEST','bind','enum.functions.*','Build\x20Topology','Train\x20Energy','ltmStbWindowDays','.forecast.current.state','find','Today\x20Vector\x20(15m)','analysis.training.triggerHealth','1776988cjMNlH','TREND_RESULT','Gemini\x20Init\x20Error:\x20','ANOMALY','analysis.health.lastCheck','rawEventLog','stdout','checkAndInstall','No\x20instance','existsSync','rating','setHours','[RECORDER]\x20Error:\x20','text','occupancy','useWeather','name','Thermodynamics','system.isPresent','Raw\x20Log','Anomaly\x20Score','notifyTelegramEnabled','analysis.health.gaitSpeed','generic','OK:\x20','COMFORT_RESULT','Briefing\x20Error:\x20','online','6227200qnxlJW','TRAIN_HEALTH'];a0_0x4c66=function(){return _0x1a5566;};return a0_0x4c66();}async function initHistory(_0x26c5ca){const _0x2dba0b=a0_0x15b889;try{const _0x53f64c=await _0x26c5ca[_0x2dba0b(0x268)](_0x2dba0b(0x1fe));_0x53f64c&&_0x53f64c[_0x2dba0b(0x138)]&&(_0x26c5ca['eventHistory']=JSON['parse'](_0x53f64c[_0x2dba0b(0x138)][_0x2dba0b(0x17c)]()));}catch(_0x4b4c70){_0x26c5ca[_0x2dba0b(0x152)]=[];}try{const _0xd6c68d=await _0x26c5ca[_0x2dba0b(0x268)]('analysis.analysisHistory');if(_0xd6c68d&&_0xd6c68d['val'])_0x26c5ca['analysisHistory']=JSON['parse'](_0xd6c68d[_0x2dba0b(0x138)][_0x2dba0b(0x17c)]());}catch(_0x5c9454){_0x26c5ca[_0x2dba0b(0x193)]=[];}if(_0x26c5ca[_0x2dba0b(0x152)]&&_0x26c5ca['eventHistory'][_0x2dba0b(0x13a)]>0x0){_0x26c5ca[_0x2dba0b(0x161)][_0x2dba0b(0x26d)](_0x2dba0b(0x212));for(let _0x1caa46=_0x26c5ca['eventHistory']['length']-0x1;_0x1caa46>=0x0;_0x1caa46--){const _0x48508b=_0x26c5ca[_0x2dba0b(0x152)][_0x1caa46];if(_0x48508b&&_0x48508b['id']!==undefined&&_0x48508b[_0x2dba0b(0x1dd)]!==undefined)_0x26c5ca[_0x2dba0b(0x248)][_0x48508b['id']]=_0x48508b[_0x2dba0b(0x1dd)];}}}async function initSystemConfig(_0x4ec60b){const _0x45997c=a0_0x15b889;try{const _0x15e799=await _0x4ec60b[_0x45997c(0x163)](_0x45997c(0x1ea));if(_0x15e799&&_0x15e799[_0x45997c(0x12d)])_0x4ec60b['systemConfig']={'latitude':_0x15e799[_0x45997c(0x12d)][_0x45997c(0x20b)]||0x0,'longitude':_0x15e799['common'][_0x45997c(0x1b4)]||0x0,'city':_0x15e799['common'][_0x45997c(0x1cf)]||''};}catch(_0x401c43){}}async function createAllObjects(_0x2c92c2){const _0x7dc50a=a0_0x15b889;await _0x2c92c2[_0x7dc50a(0x12f)]('system',{'type':_0x7dc50a(0x155),'common':{'name':_0x7dc50a(0x1ac)},'native':{}}),await _0x2c92c2[_0x7dc50a(0x12f)](SYSTEM_DP_MODE,{'type':'state','common':{'name':_0x7dc50a(0x1da),'type':_0x7dc50a(0x218),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES[_0x7dc50a(0x1a5)]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x185),{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x282),'type':_0x7dc50a(0x218),'role':_0x7dc50a(0x232),'read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x124),{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x1c3),'type':_0x7dc50a(0x218),'role':'json','read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x1fe),{'type':'state','common':{'name':_0x7dc50a(0x219),'type':_0x7dc50a(0x218),'role':'json','read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x12f)]('analysis.training',{'type':'channel','common':{'name':_0x7dc50a(0x108)},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x1d9),{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x199),'type':_0x7dc50a(0x28f),'role':_0x7dc50a(0x1d2),'read':!![],'write':!![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x224),{'type':'state','common':{'name':'Train\x20Health','type':_0x7dc50a(0x28f),'role':_0x7dc50a(0x1d2),'read':!![],'write':!![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x10b),{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x21f),'type':_0x7dc50a(0x28f),'role':_0x7dc50a(0x1d2),'read':!![],'write':!![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x1cd),{'type':'state','common':{'name':_0x7dc50a(0x172),'type':_0x7dc50a(0x28f),'role':_0x7dc50a(0x1d2),'read':!![],'write':!![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)]('analysis.training.triggerTopology',{'type':'state','common':{'name':_0x7dc50a(0x21e),'type':'boolean','role':_0x7dc50a(0x1d2),'read':!![],'write':!![]},'native':{}}),await _0x2c92c2['setObjectNotExistsAsync']('analysis.training.status',{'type':_0x7dc50a(0x106),'common':{'name':'Training\x20Status','type':_0x7dc50a(0x218),'role':_0x7dc50a(0x232),'read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x12f)](_0x7dc50a(0x122),{'type':_0x7dc50a(0x155),'common':{'name':_0x7dc50a(0x19e)},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x265),{'type':'state','common':{'name':_0x7dc50a(0x239),'type':_0x7dc50a(0x1fb),'role':_0x7dc50a(0x1dd),'read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x1ab),{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x26e),'type':_0x7dc50a(0x1fb),'role':'value','read':!![],'write':![],'def':0.05},'native':{}}),await _0x2c92c2['setObjectNotExistsAsync'](_0x7dc50a(0x278),{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x217),'type':_0x7dc50a(0x218),'role':_0x7dc50a(0x14d),'read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x16c),{'type':'state','common':{'name':_0x7dc50a(0x293),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x12f)](_0x7dc50a(0x29f),{'type':'channel','common':{'name':'Health\x20Analysis'},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x229),{'type':_0x7dc50a(0x106),'common':{'name':'Last\x20Check','type':_0x7dc50a(0x218),'role':_0x7dc50a(0x14d),'read':!![],'write':![]},'native':{}}),await _0x2c92c2['setObjectNotExistsAsync'](_0x7dc50a(0x1c6),{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x1ce),'type':_0x7dc50a(0x28f),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x256),{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x13d),'type':_0x7dc50a(0x218),'role':'text','read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x118),{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x2a1),'type':_0x7dc50a(0x1fb),'role':'value','read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)]('analysis.health.todayVector',{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x223),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x2c92c2['setObjectNotExistsAsync'](_0x7dc50a(0x23b),{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x131),'type':_0x7dc50a(0x1fb),'role':_0x7dc50a(0x1dd),'read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x12f)](_0x7dc50a(0x1f5),{'type':_0x7dc50a(0x155),'common':{'name':'Energy\x20Intelligence'},'native':{}}),await _0x2c92c2['setObjectNotExistsAsync']('analysis.energy.insulationScore',{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x126),'type':_0x7dc50a(0x218),'role':_0x7dc50a(0x232),'read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)]('analysis.energy.heatingScore',{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x11d),'type':_0x7dc50a(0x218),'role':'text','read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x18b),{'type':_0x7dc50a(0x106),'common':{'name':'Temperature\x20Forecast','type':'string','role':_0x7dc50a(0x1fa),'read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x12f)](_0x7dc50a(0x165),{'type':_0x7dc50a(0x155),'common':{'name':'LTM'},'native':{}}),await _0x2c92c2[_0x7dc50a(0x12f)](LTM_DP_RAW_LOG,{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x238),'type':_0x7dc50a(0x218),'role':_0x7dc50a(0x1fa),'read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x12f)](LTM_DP_DAILY_DIGESTS,{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x247),'type':_0x7dc50a(0x218),'role':_0x7dc50a(0x1fa),'read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x1ca),{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x1e8),'type':_0x7dc50a(0x218),'role':_0x7dc50a(0x1fa),'read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x1f2),{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x236),'type':_0x7dc50a(0x218),'role':'json','read':!![],'write':![]},'native':{}}),await _0x2c92c2['setObjectNotExistsAsync'](_0x7dc50a(0x1b1),{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x20e),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x2c92c2['setObjectNotExistsAsync']('analysis.triggerBriefing',{'type':'state','common':{'name':_0x7dc50a(0x19c),'type':_0x7dc50a(0x28f),'role':_0x7dc50a(0x1d2),'read':!![],'write':!![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x294),{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x273),'type':'boolean','role':_0x7dc50a(0x1bd),'read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x1ec),{'type':_0x7dc50a(0x106),'common':{'name':'Alert\x20Reason','type':_0x7dc50a(0x218),'role':_0x7dc50a(0x21a),'read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)]('analysis.activitySummary',{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x276),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x1d7),{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x19b),'type':'boolean','role':_0x7dc50a(0x211),'read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x258),{'type':_0x7dc50a(0x106),'common':{'name':'Description','type':'string','role':_0x7dc50a(0x232),'read':!![],'write':![]},'native':{}}),await _0x2c92c2['setObjectNotExistsAsync'](_0x7dc50a(0x1b6),{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x2a3),'type':_0x7dc50a(0x218),'role':_0x7dc50a(0x1fa),'read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x166),{'type':_0x7dc50a(0x106),'common':{'name':_0x7dc50a(0x14c),'type':_0x7dc50a(0x218),'role':_0x7dc50a(0x232),'read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x253),{'type':_0x7dc50a(0x106),'common':{'name':'Target\x20Value','type':_0x7dc50a(0x218),'role':_0x7dc50a(0x232),'read':!![],'write':![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)]('analysis.automation.autoApply',{'type':'state','common':{'name':_0x7dc50a(0x135),'type':'boolean','role':_0x7dc50a(0x1d5),'read':!![],'write':!![]},'native':{}}),await _0x2c92c2[_0x7dc50a(0x25a)](_0x7dc50a(0x11c),{'type':'state','common':{'name':_0x7dc50a(0x159),'type':_0x7dc50a(0x28f),'role':_0x7dc50a(0x1d2),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x56fd56){const _0x29234f=a0_0x15b889;try{const _0x4d925d=await _0x56fd56[_0x29234f(0x268)](SYSTEM_DP_MODE);_0x4d925d&&_0x4d925d['val']&&Object[_0x29234f(0x1f4)](SYSTEM_MODES)['includes'](_0x4d925d[_0x29234f(0x138)])?_0x56fd56[_0x29234f(0x147)]=_0x4d925d[_0x29234f(0x138)]:(_0x56fd56[_0x29234f(0x147)]=SYSTEM_MODES[_0x29234f(0x1a5)],await _0x56fd56[_0x29234f(0x1f6)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x29234f(0x1a5)],'ack':!![]}));}catch(_0x456bc0){_0x56fd56[_0x29234f(0x147)]=SYSTEM_MODES[_0x29234f(0x1a5)];}}async function loadRawEventLog(_0x428cfc){const _0x479e0e=a0_0x15b889;try{const _0x489614=await _0x428cfc[_0x479e0e(0x268)](LTM_DP_RAW_LOG);if(_0x489614&&_0x489614['val'])_0x428cfc[_0x479e0e(0x22a)]=JSON[_0x479e0e(0x1b7)](_0x489614[_0x479e0e(0x138)]);}catch(_0x5597c5){_0x428cfc[_0x479e0e(0x22a)]=[];}}async function saveRawEventLog(_0x1f34fc){const _0x277c00=a0_0x15b889;if(_0x1f34fc['rawEventLog'][_0x277c00(0x13a)]>RAW_LOG_MAX_SIZE)_0x1f34fc[_0x277c00(0x22a)]['splice'](0x0,_0x1f34fc[_0x277c00(0x22a)][_0x277c00(0x13a)]-RAW_LOG_MAX_SIZE);await _0x1f34fc[_0x277c00(0x1f6)](LTM_DP_RAW_LOG,{'val':JSON[_0x277c00(0x29c)](_0x1f34fc[_0x277c00(0x22a)]),'ack':!![]});}async function loadDailyDigests(_0x42ce97){const _0x7f9483=a0_0x15b889;try{const _0x3e2020=await _0x42ce97['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x3e2020&&_0x3e2020[_0x7f9483(0x138)])_0x42ce97['dailyDigests']=JSON['parse'](_0x3e2020['val']);}catch(_0x388739){_0x42ce97[_0x7f9483(0x10a)]=[];}await updateBaselineStatus(_0x42ce97);}async function saveDailyDigests(_0x2e66fc,_0x26139c=!![]){const _0x13180e=a0_0x15b889,_0x2ae887=_0x2e66fc[_0x13180e(0x26f)]['ltmLtbWindowDays']||0x3c;_0x2e66fc[_0x13180e(0x10a)]['length']>_0x2ae887&&_0x2e66fc[_0x13180e(0x10a)][_0x13180e(0x255)](0x0,_0x2e66fc[_0x13180e(0x10a)][_0x13180e(0x13a)]-_0x2ae887);await _0x2e66fc[_0x13180e(0x1f6)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x13180e(0x29c)](_0x2e66fc[_0x13180e(0x10a)]),'ack':!![]});if(_0x26139c)await updateBaselineStatus(_0x2e66fc);}async function updateAnalysisHistory(_0x5f229e,_0x222465){const _0x2c603d=a0_0x15b889;_0x5f229e[_0x2c603d(0x193)][_0x2c603d(0x250)](_0x222465);if(_0x5f229e[_0x2c603d(0x193)]['length']>HISTORY_MAX_SIZE)_0x5f229e[_0x2c603d(0x193)][_0x2c603d(0x29e)]();await _0x5f229e['setStateAsync']('analysis.analysisHistory',{'val':JSON[_0x2c603d(0x29c)](_0x5f229e[_0x2c603d(0x193)]),'ack':!![]});}async function updateBaselineStatus(_0x269449){const _0x14f0cc=a0_0x15b889;if(!_0x269449[_0x14f0cc(0x112)]){await _0x269449[_0x14f0cc(0x1f6)](LTM_DP_BASELINE_STATUS,{'val':_0x14f0cc(0x13c),'ack':!![]});return;}const _0x551076=_0x269449['dailyDigests'][_0x14f0cc(0x13a)]>=(_0x269449[_0x14f0cc(0x26f)]['minDaysForBaseline']||0x7)?_0x14f0cc(0x194)+_0x269449[_0x14f0cc(0x10a)][_0x14f0cc(0x13a)]+'\x20Tage)':_0x14f0cc(0x200)+_0x269449[_0x14f0cc(0x10a)][_0x14f0cc(0x13a)]+'/'+(_0x269449[_0x14f0cc(0x26f)][_0x14f0cc(0x14b)]||0x7)+')';await _0x269449[_0x14f0cc(0x1f6)](LTM_DP_BASELINE_STATUS,{'val':_0x551076,'ack':!![]});}async function initSensorSubscriptions(_0x12f2e1){const _0x4cc410=a0_0x15b889,_0x1dd6ac=_0x12f2e1[_0x4cc410(0x26f)][_0x4cc410(0x244)];if(_0x1dd6ac)for(const _0x49e40 of _0x1dd6ac){await _0x12f2e1['subscribeForeignStatesAsync'](_0x49e40['id']);}}async function initPresenceSubscriptions(_0x219991){const _0x41317b=a0_0x15b889,_0x462a9c=_0x219991[_0x41317b(0x26f)][_0x41317b(0x286)];if(_0x462a9c)for(const _0x37c54d of _0x462a9c){await _0x219991[_0x41317b(0x24b)](_0x37c54d);}}async function setupTelegramListener(_0x1cb4fc){const _0x4747f3=a0_0x15b889,_0x356c59=_0x1cb4fc['config'][_0x4747f3(0x133)];if(_0x1cb4fc[_0x4747f3(0x26f)][_0x4747f3(0x23a)]&&_0x356c59)await _0x1cb4fc['subscribeForeignStatesAsync'](_0x356c59+_0x4747f3(0x175));}async function checkWifiPresence(_0x43a0d){const _0x3b0fd2=a0_0x15b889;try{const _0x169aad=_0x43a0d[_0x3b0fd2(0x26f)][_0x3b0fd2(0x286)]||[];let _0x160559=![];const _0x20c8a5=[];for(const _0x57a38a of _0x169aad){try{const _0x3c04bd=await _0x43a0d[_0x3b0fd2(0x1e6)](_0x57a38a);_0x3c04bd&&(_0x3c04bd['val']===!![]||_0x3c04bd[_0x3b0fd2(0x138)]===_0x3b0fd2(0x240)||_0x3c04bd[_0x3b0fd2(0x138)]===0x1)&&(_0x160559=!![],_0x20c8a5['push'](_0x57a38a));}catch(_0x3ed141){}}return await _0x43a0d['setStateAsync'](_0x3b0fd2(0x185),{'val':_0x20c8a5[_0x3b0fd2(0x20d)](',\x20'),'ack':!![]}),_0x160559&&(_0x43a0d['exitTimer']&&(_0x43a0d['log'][_0x3b0fd2(0x26d)](_0x3b0fd2(0x182)),abortExitTimer(_0x43a0d)),!_0x43a0d['isPresent']&&_0x43a0d[_0x3b0fd2(0x147)]===SYSTEM_MODES[_0x3b0fd2(0x1a5)]&&await setPresence(_0x43a0d,!![])),_0x160559;}catch(_0x1515dc){return![];}}function startExitTimer(_0x2682a7){const _0x3c4c39=a0_0x15b889;abortExitTimer(_0x2682a7),_0x2682a7[_0x3c4c39(0x210)]=!![],_0x2682a7[_0x3c4c39(0x186)]=setTimeout(()=>{_0x2682a7['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x2682a7['exitTimer']=setTimeout(()=>{setPresence(_0x2682a7,![]),_0x2682a7['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x4c5090){const _0x40c05f=a0_0x15b889;if(_0x4c5090[_0x40c05f(0x1cb)])clearTimeout(_0x4c5090[_0x40c05f(0x1cb)]);if(_0x4c5090[_0x40c05f(0x186)])clearTimeout(_0x4c5090[_0x40c05f(0x186)]);_0x4c5090[_0x40c05f(0x1cb)]=null,_0x4c5090[_0x40c05f(0x186)]=null,_0x4c5090[_0x40c05f(0x210)]=![];}async function setPresence(_0x36d9d0,_0x4166d9){const _0x1d7a3a=a0_0x15b889;if(_0x36d9d0[_0x1d7a3a(0x139)]===_0x4166d9)return;_0x36d9d0[_0x1d7a3a(0x139)]=_0x4166d9,await _0x36d9d0['setStateAsync'](_0x1d7a3a(0x237),{'val':_0x4166d9,'ack':!![]});}async function executeAutomationAction(_0xca3625){const _0x530283=a0_0x15b889;try{const _0x33e8da=await _0xca3625[_0x530283(0x268)](_0x530283(0x166)),_0x532cb2=await _0xca3625[_0x530283(0x268)]('analysis.automation.targetValue');if(_0x33e8da&&_0x33e8da[_0x530283(0x138)]&&_0x532cb2){const _0x1d1678=_0x33e8da['val'];let _0x53b9fc=_0x532cb2[_0x530283(0x138)];try{_0x53b9fc=JSON[_0x530283(0x1b7)](_0x53b9fc);}catch(_0x4a5a66){}_0xca3625[_0x530283(0x161)]['info'](_0x530283(0x189)+_0x1d1678+'\x20=\x20'+_0x53b9fc),await _0xca3625[_0x530283(0x1a8)](_0x1d1678,_0x53b9fc);}else _0xca3625[_0x530283(0x161)][_0x530283(0x121)](_0x530283(0x1b0));}catch(_0x3a1634){_0xca3625['log'][_0x530283(0x149)](_0x530283(0x2a4)+_0x3a1634[_0x530283(0x1dc)]);}}async function processSensorEvent(_0x4ddda2,_0x1e0e03,_0x1fb718,_0x1a580e){const _0xee0198=a0_0x15b889;if(!_0x1a580e)return;const _0x45c704=_0x1fb718[_0xee0198(0x138)],_0x24c67d=Date[_0xee0198(0x168)](),_0x362037=_0x4ddda2[_0xee0198(0x248)][_0x1e0e03];_0x4ddda2[_0xee0198(0x248)][_0x1e0e03]=_0x45c704;if(!_0x1a580e[_0xee0198(0x266)]&&_0x362037!=undefined&&_0x362037==_0x45c704)return;const _0x502d23=(_0x1a580e[_0xee0198(0x205)]||'')[_0xee0198(0x13f)](),_0x1f20b6=_0x502d23[_0xee0198(0x28c)](_0xee0198(0x141))||_0x502d23[_0xee0198(0x28c)](_0xee0198(0x181))||_0x502d23[_0xee0198(0x28c)]('klima')||_0x502d23[_0xee0198(0x28c)](_0xee0198(0x116));_0x4ddda2[_0xee0198(0x112)]&&_0x1f20b6&&recordThermodynamics(_0x4ddda2,_0x1e0e03,_0x45c704,_0x1a580e['location']);const _0x4a3b6a={'timestamp':_0x24c67d,'id':_0x1e0e03,'name':_0x1a580e[_0xee0198(0x235)],'type':_0x1a580e[_0xee0198(0x205)],'location':_0x1a580e[_0xee0198(0x27f)],'value':_0x45c704};_0x4ddda2[_0xee0198(0x152)][_0xee0198(0x250)](_0x4a3b6a);if(_0x4ddda2[_0xee0198(0x152)][_0xee0198(0x13a)]>HISTORY_MAX_SIZE)_0x4ddda2['eventHistory'][_0xee0198(0x29e)]();await _0x4ddda2[_0xee0198(0x1f6)](_0xee0198(0x124),{'val':JSON['stringify'](_0x4a3b6a),'ack':!![]}),await _0x4ddda2[_0xee0198(0x1f6)](_0xee0198(0x1fe),{'val':JSON[_0xee0198(0x29c)](_0x4ddda2[_0xee0198(0x152)]),'ack':!![]});_0x4ddda2[_0xee0198(0x112)]&&(_0x4ddda2[_0xee0198(0x22a)][_0xee0198(0x188)](_0x4a3b6a),await saveRawEventLog(_0x4ddda2),recordSequence(_0x4ddda2,_0x4a3b6a));if(_0x1a580e[_0xee0198(0x174)]&&_0x45c704===!![]){if(_0x4ddda2['isPresent']&&!_0x4ddda2[_0xee0198(0x210)])startExitTimer(_0x4ddda2);else{if(!_0x4ddda2[_0xee0198(0x139)])setPresence(_0x4ddda2,!![]);}}else{if(_0x1a580e['type']==='motion'&&_0x45c704===!![]){if(_0x4ddda2[_0xee0198(0x1cb)])abortExitTimer(_0x4ddda2);if(!_0x4ddda2[_0xee0198(0x139)]&&_0x4ddda2[_0xee0198(0x147)]===SYSTEM_MODES[_0xee0198(0x1a5)])setPresence(_0x4ddda2,!![]);}}}async function recordThermodynamics(_0x4e13e2,_0x95f35a,_0x1bfe01,_0x2afa3b){const _0x4bab8d=a0_0x15b889,_0x3e7fa5=await getOutsideTemperatureNumeric(_0x4e13e2),_0x4a1113=await _0x4e13e2[_0x4bab8d(0x268)](_0x4bab8d(0x1f2));let _0x196411=[];if(_0x4a1113&&_0x4a1113['val'])try{_0x196411=JSON[_0x4bab8d(0x1b7)](_0x4a1113[_0x4bab8d(0x138)]);}catch(_0x4545ab){}_0x196411[_0x4bab8d(0x188)]({'ts':Date[_0x4bab8d(0x168)](),'room':_0x2afa3b||_0x4bab8d(0x1c0),'t_in':_0x1bfe01,'t_out':_0x3e7fa5});if(_0x196411['length']>THERMO_LOG_SIZE)_0x196411[_0x4bab8d(0x1b5)]();await _0x4e13e2[_0x4bab8d(0x1f6)](_0x4bab8d(0x1f2),{'val':JSON[_0x4bab8d(0x29c)](_0x196411),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x47fe73){const _0x1c5dca=a0_0x15b889;if(_0x47fe73[_0x1c5dca(0x26f)][_0x1c5dca(0x12c)])try{const _0x4803a2=await _0x47fe73[_0x1c5dca(0x1e6)](_0x47fe73[_0x1c5dca(0x26f)][_0x1c5dca(0x12c)]);if(_0x4803a2&&_0x4803a2['val']!==undefined&&_0x4803a2[_0x1c5dca(0x138)]!==null)return parseFloat(_0x4803a2[_0x1c5dca(0x138)]);}catch(_0x11f7a3){}const _0x39a513=_0x47fe73[_0x1c5dca(0x26f)][_0x1c5dca(0x10c)];if(!_0x47fe73[_0x1c5dca(0x26f)][_0x1c5dca(0x234)]||!_0x39a513)return null;try{let _0x8c04af='';if(_0x39a513[_0x1c5dca(0x28c)](_0x1c5dca(0x117)))_0x8c04af=_0x39a513+_0x1c5dca(0x10d);else{if(_0x39a513[_0x1c5dca(0x28c)]('daswetter'))_0x8c04af=_0x39a513+_0x1c5dca(0x214);else{if(_0x39a513[_0x1c5dca(0x28c)]('openweathermap'))_0x8c04af=_0x39a513+_0x1c5dca(0x24f);else{if(_0x39a513[_0x1c5dca(0x28c)](_0x1c5dca(0x1e7)))_0x8c04af=_0x39a513+_0x1c5dca(0x11a);}}}if(_0x8c04af){const _0x31ad7f=await _0x47fe73[_0x1c5dca(0x1e6)](_0x8c04af);if(_0x31ad7f&&_0x31ad7f[_0x1c5dca(0x138)]!==undefined&&_0x31ad7f[_0x1c5dca(0x138)]!==null)return parseFloat(_0x31ad7f['val']);}}catch(_0x5637c9){}return null;}async function recordSequence(_0x307303,_0x57adb8){const _0x119c0c=a0_0x15b889,_0x1af6bb=(_0x57adb8['type']||'')[_0x119c0c(0x13f)](),_0x56c4f1=[_0x119c0c(0x272),_0x119c0c(0x1f1),_0x119c0c(0x154),_0x119c0c(0x1e5),_0x119c0c(0x233),_0x119c0c(0x190),'tÃ¼r',_0x119c0c(0x298),'fenster',_0x119c0c(0x171),_0x119c0c(0x18c),_0x119c0c(0x20a),_0x119c0c(0x1ee),_0x119c0c(0x1d5),'schalter','dimmer','lampe'];if(!_0x56c4f1[_0x119c0c(0x1eb)](_0x649bb5=>_0x1af6bb['includes'](_0x649bb5)))return;if(!_0x57adb8[_0x119c0c(0x1dd)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x119c0c(0x188)]({'loc':_0x57adb8[_0x119c0c(0x27f)]||_0x119c0c(0x1c0),'id':_0x57adb8['id'],'ts':Date[_0x119c0c(0x168)]()}),sequenceTimer=setTimeout(async()=>{const _0x2f4045=_0x119c0c;if(activeSequence[_0x2f4045(0x13a)]>0x1)await saveCompletedSequence(_0x307303);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x5eed69){const _0x34c3f1=a0_0x15b889;try{const _0x28c867=await _0x5eed69[_0x34c3f1(0x268)](_0x34c3f1(0x1ca));let _0x3500f7=[];if(_0x28c867&&_0x28c867[_0x34c3f1(0x138)])try{_0x3500f7=JSON[_0x34c3f1(0x1b7)](_0x28c867[_0x34c3f1(0x138)]);}catch(_0x29b59d){}const _0x3691a4=activeSequence[0x0]['ts'],_0x1ebb5a=activeSequence[_0x34c3f1(0x1de)](_0x1ab52f=>({'loc':_0x1ab52f[_0x34c3f1(0x1e1)],'t_delta':Math[_0x34c3f1(0x1a1)]((_0x1ab52f['ts']-_0x3691a4)/0x3e8)})),_0xb52606={'timestamp':new Date(_0x3691a4)[_0x34c3f1(0x26c)](),'steps':_0x1ebb5a,'duration':Math['round']((activeSequence[activeSequence[_0x34c3f1(0x13a)]-0x1]['ts']-_0x3691a4)/0x3e8),'daytime':new Date(_0x3691a4)[_0x34c3f1(0x16f)]()};_0x3500f7['push'](_0xb52606);if(_0x3500f7[_0x34c3f1(0x13a)]>MAX_TRAINING_SET_SIZE)_0x3500f7[_0x34c3f1(0x1b5)]();await _0x5eed69[_0x34c3f1(0x1f6)](_0x34c3f1(0x1ca),{'val':JSON[_0x34c3f1(0x29c)](_0x3500f7),'ack':!![]}),runSecurityCheck(_0x5eed69,_0xb52606);}catch(_0x364c3f){_0x5eed69[_0x34c3f1(0x161)][_0x34c3f1(0x149)](_0x34c3f1(0x231)+_0x364c3f[_0x34c3f1(0x1dc)]);}}function runSecurityCheck(_0x388b5f,_0x48fde8){const _0x1b8dab=a0_0x15b889;if(!_0x388b5f[_0x1b8dab(0x112)])return;sendToPython(_0x388b5f,_0x1b8dab(0x10e),{'sequence':_0x48fde8});}async function createDailyDigest(_0x311f9f){const _0xc56490=a0_0x15b889;if(!_0x311f9f[_0xc56490(0x112)])return;await _0x311f9f[_0xc56490(0x1f6)](LTM_DP_STATUS,{'val':_0xc56490(0x142),'ack':!![]});if(!_0x311f9f[_0xc56490(0x120)]||_0x311f9f[_0xc56490(0x22a)][_0xc56490(0x13a)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x311f9f[_0xc56490(0x1f6)](LTM_DP_STATUS,{'val':_0xc56490(0x264),'ack':!![]});return;}const _0x2da8ed=JSON['parse'](JSON[_0xc56490(0x29c)](_0x311f9f[_0xc56490(0x22a)])),_0x2a4203=_0x2da8ed[_0xc56490(0x13a)],_0x2bf2eb=_0xc56490(0x16a)+JSON[_0xc56490(0x29c)](_0x2da8ed);try{const _0x2cb6a0=await _0x311f9f[_0xc56490(0x120)][_0xc56490(0x270)](_0x2bf2eb),_0x59f4b5=JSON[_0xc56490(0x1b7)](_0x2cb6a0['response']['text']()['replace'](/```json|```/g,'')['trim']()),_0x3f72b3={'timestamp':new Date()[_0xc56490(0x26c)](),'eventCount':_0x2a4203,'summary':_0x59f4b5[_0xc56490(0x287)]||'Digest','activityLevel':_0x59f4b5[_0xc56490(0x18d)]||_0xc56490(0x261),'systemMode':_0x311f9f[_0xc56490(0x147)]};_0x311f9f['dailyDigests']['push'](_0x3f72b3),await saveDailyDigests(_0x311f9f),_0x311f9f[_0xc56490(0x22a)]=[],await saveRawEventLog(_0x311f9f),await _0x311f9f[_0xc56490(0x1f6)](LTM_DP_STATUS,{'val':_0xc56490(0x191),'ack':!![]});if(_0x311f9f[_0xc56490(0x112)])sendToPython(_0x311f9f,_0xc56490(0x15a),{'digest':_0x3f72b3});}catch(_0x4b4f46){_0x311f9f[_0xc56490(0x161)][_0xc56490(0x149)](_0x4b4f46[_0xc56490(0x1dc)]);}}async function runBaselineDriftAnalysis(_0x20e3d3){const _0xdd68d=a0_0x15b889;if(!_0x20e3d3[_0xdd68d(0x112)]||!_0x20e3d3[_0xdd68d(0x120)])return;const _0x136c34=_0x20e3d3[_0xdd68d(0x26f)][_0xdd68d(0x220)]||0xe;if(_0x20e3d3['dailyDigests']['length']<_0x136c34+0x7){await _0x20e3d3[_0xdd68d(0x1f6)](LTM_DP_DRIFT_STATUS,{'val':_0xdd68d(0x2a0),'ack':!![]});return;}const _0x573892=_0x20e3d3[_0xdd68d(0x10a)]['slice'](-_0x136c34),_0x4cfd42=_0x20e3d3[_0xdd68d(0x10a)][_0xdd68d(0x259)](0x0,_0x20e3d3[_0xdd68d(0x10a)][_0xdd68d(0x13a)]-_0x136c34),_0x2e1994=_0xdd68d(0x1a3)+JSON[_0xdd68d(0x29c)](_0x4cfd42)+_0xdd68d(0x26b)+JSON[_0xdd68d(0x29c)](_0x573892);try{const _0x57729b=await _0x20e3d3[_0xdd68d(0x120)]['generateContent'](_0x2e1994),_0x1b045f=JSON[_0xdd68d(0x1b7)](_0x57729b['response'][_0xdd68d(0x232)]()['replace'](/```json|```/g,'')[_0xdd68d(0x184)]());_0x1b045f[_0xdd68d(0x114)]&&(await _0x20e3d3[_0xdd68d(0x1f6)](LTM_DP_DRIFT_STATUS,{'val':_0x1b045f['baselineDrift'],'ack':!![]}),await _0x20e3d3['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0x1b045f[_0xdd68d(0x180)],'ack':!![]}),await _0x20e3d3['setStateAsync'](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0xdd68d(0x168)](),'ack':!![]}));}catch(_0x20d1b0){}}async function sendMorningBriefing(_0x2caa15){const _0x54cdde=a0_0x15b889;if(!_0x2caa15[_0x54cdde(0x120)])return;try{const _0x2e5d40=_0x54cdde(0x13e),_0x3bc9bf=await _0x2caa15['geminiModel']['generateContent'](_0x2e5d40),_0x42441c=_0x3bc9bf['response'][_0x54cdde(0x232)]();sendNotification(_0x2caa15,_0x54cdde(0x29a)+_0x42441c);}catch(_0x497915){_0x2caa15[_0x54cdde(0x161)][_0x54cdde(0x149)](_0x54cdde(0x23f)+_0x497915[_0x54cdde(0x1dc)]);}}function stopPythonService(_0x1d413f){const _0x4fef59=a0_0x15b889;if(_0x1d413f[_0x4fef59(0x1ef)]){try{_0x1d413f['pythonProcess'][_0x4fef59(0x1ae)]();}catch(_0x24725c){}_0x1d413f[_0x4fef59(0x1ef)]=null;}}function sendToPython(_0x5e141b,_0x48a5b7,_0x5e588d={}){const _0x26917e=a0_0x15b889;if(!_0x5e141b[_0x26917e(0x1ef)]||!_0x5e141b['pythonProcess'][_0x26917e(0x1e9)][_0x26917e(0x1c5)])return;const _0xa905fa=JSON[_0x26917e(0x29c)]({'command':_0x48a5b7,..._0x5e588d});try{_0x5e141b['pythonProcess']['stdin'][_0x26917e(0x1f3)](_0xa905fa+'\x0a');}catch(_0xacc98b){}}function runPythonHealthCheck(_0x3b6a80){const _0x122c45=a0_0x15b889;if(!_0x3b6a80[_0x122c45(0x10a)]||_0x3b6a80[_0x122c45(0x10a)][_0x122c45(0x13a)]<0x2)return;const _0x32fe0c=_0x3b6a80[_0x122c45(0x10a)][_0x122c45(0x1de)](_0x180947=>{const _0x52336e=_0x122c45,_0x3a7eee=(_0x180947[_0x52336e(0x18d)]||'')[_0x52336e(0x13f)]();return ACTIVITY_LEVEL_MAP[_0x3a7eee]||0x32;});sendToPython(_0x3b6a80,_0x122c45(0x24d),{'values':_0x32fe0c,'tag':_0x122c45(0x129)});}function handlePythonResult(_0xe15663,_0x97efbd){const _0x1ec33c=a0_0x15b889;if(_0x97efbd[_0x1ec33c(0x205)]===_0x1ec33c(0x18f))_0xe15663[_0x1ec33c(0x161)][_0x1ec33c(0x1ff)](_0x1ec33c(0x144));else{if(_0x97efbd[_0x1ec33c(0x205)]===_0x1ec33c(0x1d4)){const {anomaly_score:_0x5d8ecf,is_anomaly:_0x2b1715,threshold:_0x29070,explanation:_0x317bc6}=_0x97efbd[_0x1ec33c(0x13b)];_0xe15663['log'][_0x1ec33c(0x26d)](_0x1ec33c(0x27a)+_0x5d8ecf[_0x1ec33c(0x11e)](0x5)+'\x20->\x20'+(_0x2b1715?_0x1ec33c(0x228):'OK')),_0xe15663[_0x1ec33c(0x1f6)](_0x1ec33c(0x265),{'val':_0x5d8ecf,'ack':!![]}),_0xe15663['setStateAsync'](_0x1ec33c(0x278),{'val':new Date()[_0x1ec33c(0x26c)](),'ack':!![]});if(_0x29070)_0xe15663[_0x1ec33c(0x1f6)]('analysis.security.currentThreshold',{'val':_0x29070,'ack':!![]});if(_0x2b1715){let _0x5b64af=_0x1ec33c(0x16d)+_0x5d8ecf[_0x1ec33c(0x11e)](0x4)+')';if(_0x317bc6&&_0x317bc6!==_0x1ec33c(0x1c0))_0x5b64af+=_0x1ec33c(0x203)+_0x317bc6;_0xe15663[_0x1ec33c(0x1f6)](_0x1ec33c(0x294),{'val':!![],'ack':!![]}),_0xe15663[_0x1ec33c(0x1f6)](_0x1ec33c(0x1ec),{'val':_0x5b64af,'ack':!![]}),sendNotification(_0xe15663,_0x1ec33c(0x1bb)+_0x5b64af,![],!![]);}}else{if(_0x97efbd['type']===_0x1ec33c(0x1b3)){const _0x2ef5e0=_0x97efbd[_0x1ec33c(0x13b)][_0x1ec33c(0x20f)]||'',_0x5205d0=_0x97efbd[_0x1ec33c(0x13b)][_0x1ec33c(0x115)],_0x301977=_0x97efbd[_0x1ec33c(0x13b)]['success']?_0x1ec33c(0x245)+new Date()[_0x1ec33c(0x10f)]()+'\x20('+_0x2ef5e0+')':_0x1ec33c(0x18e)+_0x97efbd['payload'][_0x1ec33c(0x1d1)];_0xe15663[_0x1ec33c(0x1f6)]('analysis.training.status',{'val':_0x301977,'ack':!![]});if(_0x97efbd[_0x1ec33c(0x13b)][_0x1ec33c(0x15d)]&&_0x5205d0)_0xe15663['setStateAsync'](_0x1ec33c(0x1ab),{'val':_0x5205d0,'ack':!![]});}else{if(_0x97efbd['type']===_0x1ec33c(0x23e)){const {patterns:_0x48d2f9}=_0x97efbd['payload'];if(_0x48d2f9&&_0x48d2f9[_0x1ec33c(0x13a)]>0x0){_0xe15663['log'][_0x1ec33c(0x26d)](_0x1ec33c(0x170)+_0x48d2f9[_0x1ec33c(0x13a)]+_0x1ec33c(0x26a)),_0xe15663[_0x1ec33c(0x1f6)](_0x1ec33c(0x1b6),{'val':JSON['stringify'](_0x48d2f9),'ack':!![]});const _0x3669aa=_0x48d2f9[0x0],_0x4e89a3=_0x1ec33c(0x158)+_0x3669aa[_0x1ec33c(0x187)]+'\x20('+(_0x3669aa[_0x1ec33c(0x162)]*0x64)[_0x1ec33c(0x11e)](0x0)+'%)';_0xe15663[_0x1ec33c(0x1f6)](_0x1ec33c(0x1d7),{'val':!![],'ack':!![]}),_0xe15663[_0x1ec33c(0x1f6)](_0x1ec33c(0x258),{'val':_0x4e89a3,'ack':!![]});}else _0xe15663[_0x1ec33c(0x161)][_0x1ec33c(0x26d)](_0x1ec33c(0x157)),_0xe15663[_0x1ec33c(0x1f6)](_0x1ec33c(0x1d7),{'val':![],'ack':!![]}),_0xe15663[_0x1ec33c(0x1f6)]('analysis.automation.detectedPatterns',{'val':'[]','ack':!![]});}else{if(_0x97efbd['type']===_0x1ec33c(0x167)){if(_0x97efbd[_0x1ec33c(0x13b)]['success'])try{const _0x428134=JSON[_0x1ec33c(0x1b7)](_0x97efbd[_0x1ec33c(0x13b)][_0x1ec33c(0x20f)]);if(_0x428134[_0x1ec33c(0x283)])_0xe15663['setStateAsync'](_0x1ec33c(0x206),{'val':JSON[_0x1ec33c(0x29c)](_0x428134[_0x1ec33c(0x283)]),'ack':!![]});if(_0x428134[_0x1ec33c(0x192)])_0xe15663['setStateAsync']('analysis.energy.heatingScore',{'val':JSON[_0x1ec33c(0x29c)](_0x428134[_0x1ec33c(0x192)]),'ack':!![]});}catch(_0x279ea7){}}else{if(_0x97efbd[_0x1ec33c(0x205)]==='HEALTH_TRAIN_RESULT'){if(_0x97efbd[_0x1ec33c(0x13b)]['success'])_0xe15663[_0x1ec33c(0x161)][_0x1ec33c(0x26d)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x97efbd[_0x1ec33c(0x205)]===_0x1ec33c(0x15f))_0xe15663[_0x1ec33c(0x1f6)](_0x1ec33c(0x229),{'val':new Date()[_0x1ec33c(0x26c)](),'ack':!![]}),_0xe15663[_0x1ec33c(0x1f6)](_0x1ec33c(0x1c6),{'val':_0x97efbd[_0x1ec33c(0x13b)][_0x1ec33c(0x292)],'ack':!![]});else{if(_0x97efbd['type']===_0x1ec33c(0x226))_0xe15663[_0x1ec33c(0x1f6)]('analysis.health.trendDiagnosis',{'val':_0x97efbd[_0x1ec33c(0x13b)][_0x1ec33c(0x207)],'ack':!![]}),_0xe15663['setStateAsync']('analysis.health.trendValue',{'val':_0x97efbd[_0x1ec33c(0x13b)][_0x1ec33c(0x2a9)],'ack':!![]});else{if(_0x97efbd['type']==='GAIT_RESULT'){const {speed_trend:_0x1a7226}=_0x97efbd[_0x1ec33c(0x13b)];if(_0x1a7226!==undefined)_0xe15663[_0x1ec33c(0x1f6)]('analysis.health.gaitSpeed',{'val':_0x1a7226,'ack':!![]});}else{if(_0x97efbd[_0x1ec33c(0x205)]===_0x1ec33c(0x1db)){const {forecast:_0x53de46}=_0x97efbd[_0x1ec33c(0x13b)];if(_0x53de46)_0xe15663['setStateAsync'](_0x1ec33c(0x18b),{'val':JSON[_0x1ec33c(0x29c)](_0x53de46),'ack':!![]});}else{if(_0x97efbd[_0x1ec33c(0x205)]==='TOPOLOGY_RESULT'){const {data:_0x1ff243}=_0x97efbd['payload'];_0x1ff243&&(_0xe15663['log'][_0x1ec33c(0x26d)]('ðŸ•¸ï¸\x20Topology\x20Map\x20updated.'),_0xe15663['setStateAsync']('analysis.security.topologyMatrix',{'val':JSON['stringify'](_0x1ff243),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x2ed2ce){const _0x39c434=a0_0x15b889;let _0x992221=_0x39c434(0x146);if(fs[_0x39c434(0x22e)](installer[_0x39c434(0x25e)]))_0x992221=installer[_0x39c434(0x25e)];try{const _0x3129f2=path['join'](__dirname,_0x39c434(0x1aa),_0x39c434(0x209));_0x2ed2ce['pythonProcess']=spawn(_0x992221,[_0x3129f2]),_0x2ed2ce['pythonProcess'][_0x39c434(0x22b)]['on'](_0x39c434(0x14f),_0x398e36=>{const _0x4f1f1d=_0x39c434,_0xed45e2=_0x398e36[_0x4f1f1d(0x17c)]()[_0x4f1f1d(0x213)]('\x0a');_0xed45e2['forEach'](_0x41cf73=>{const _0x411832=_0x4f1f1d,_0x2a3bff=_0x41cf73[_0x411832(0x184)]();if(!_0x2a3bff)return;if(_0x2a3bff[_0x411832(0x197)](_0x411832(0x176)))_0x2ed2ce[_0x411832(0x161)][_0x411832(0x1ff)]('[PYTHON]\x20'+_0x2a3bff[_0x411832(0x125)](0x5)[_0x411832(0x184)]());else{if(_0x2a3bff[_0x411832(0x197)](_0x411832(0x18a)))try{const _0x485042=JSON['parse'](_0x2a3bff[_0x411832(0x125)](0x8)[_0x411832(0x184)]());handlePythonResult(_0x2ed2ce,_0x485042);}catch(_0x5cd898){}}});}),_0x2ed2ce[_0x39c434(0x1ef)]['on'](_0x39c434(0x1c1),_0xb276c7=>{_0x2ed2ce['pythonProcess']=null;});}catch(_0x5d4c21){_0x2ed2ce['log'][_0x39c434(0x149)]('Error\x20launching\x20Python:\x20'+_0x5d4c21['message']);}}async function runAutopilot(_0x53ce3a){const _0x562782=a0_0x15b889;_0x53ce3a[_0x562782(0x161)][_0x562782(0x1ff)](_0x562782(0x1b9)),await runGeminiAnalysis(_0x53ce3a),updateHealthVector(_0x53ce3a),triggerGaitAnalysis(_0x53ce3a),triggerEnergyPrediction(_0x53ce3a);}async function triggerGaitAnalysis(_0x1bed4b){const _0x51bd1a=a0_0x15b889;if(!_0x1bed4b[_0x51bd1a(0x112)])return;try{const _0x3c9471=await _0x1bed4b[_0x51bd1a(0x268)](_0x51bd1a(0x1ca));_0x3c9471&&_0x3c9471[_0x51bd1a(0x138)]&&sendToPython(_0x1bed4b,_0x51bd1a(0x275),{'sequences':JSON[_0x51bd1a(0x1b7)](_0x3c9471[_0x51bd1a(0x138)])});}catch(_0xee86d){}}async function triggerEnergyPrediction(_0x30327c){const _0x442fbb=a0_0x15b889;if(!_0x30327c['isProVersion'])return;try{const _0x268cdb=await getOutsideTemperatureNumeric(_0x30327c);if(_0x268cdb===null)return;const _0x18a5b7={},_0x1b467c=_0x30327c[_0x442fbb(0x26f)][_0x442fbb(0x244)]||[];for(const _0x2f864c of _0x1b467c){if(_0x2f864c[_0x442fbb(0x205)]===_0x442fbb(0x141)&&_0x2f864c[_0x442fbb(0x27f)]){const _0x3b801b=_0x30327c[_0x442fbb(0x248)][_0x2f864c['id']];if(_0x3b801b!==undefined)_0x18a5b7[_0x2f864c[_0x442fbb(0x27f)]]=_0x3b801b;}}Object[_0x442fbb(0x1c2)](_0x18a5b7)[_0x442fbb(0x13a)]>0x0&&sendToPython(_0x30327c,'PREDICT_ENERGY',{'current_temps':_0x18a5b7,'t_out':_0x268cdb});}catch(_0xc6f0){}}function updateHealthVector(_0x52977a){const _0xca8579=a0_0x15b889;if(!_0x52977a[_0xca8579(0x22a)]||_0x52977a[_0xca8579(0x22a)]['length']===0x0)return;const _0x1542ed=new Array(0x60)[_0xca8579(0x1a0)](0x0),_0x1ab69e=new Date()[_0xca8579(0x230)](0x0,0x0,0x0,0x0);_0x52977a['rawEventLog'][_0xca8579(0x160)](_0x4b5ee7=>{const _0x1487fa=_0xca8579,_0x4fe6e6=new Date(_0x4b5ee7[_0x1487fa(0x195)]);if(_0x4fe6e6[_0x1487fa(0x178)]()>=_0x1ab69e){const _0x1f5f85=_0x4fe6e6[_0x1487fa(0x16f)](),_0x11c84c=_0x4fe6e6[_0x1487fa(0x277)](),_0x185c2a=_0x1f5f85*0x4+Math[_0x1487fa(0x28b)](_0x11c84c/0xf);if(_0x185c2a>=0x0&&_0x185c2a<0x60)_0x1542ed[_0x185c2a]++;}}),_0x52977a[_0xca8579(0x1f6)]('analysis.health.todayVector',{'val':JSON[_0xca8579(0x29c)](_0x1542ed),'ack':!![]});}async function getWeatherContext(_0x1f1c37){const _0xa0e8cc=a0_0x15b889;if(!_0x1f1c37[_0xa0e8cc(0x26f)][_0xa0e8cc(0x234)]||!_0x1f1c37[_0xa0e8cc(0x26f)][_0xa0e8cc(0x10c)])return'Wetterdaten\x20deaktiviert.';try{const _0x2cecd6=_0x1f1c37[_0xa0e8cc(0x26f)][_0xa0e8cc(0x10c)];let _0x361475=await _0x1f1c37[_0xa0e8cc(0x1e6)](_0x2cecd6+_0xa0e8cc(0x10d));if(!_0x361475)_0x361475=await _0x1f1c37[_0xa0e8cc(0x1e6)](_0x2cecd6+_0xa0e8cc(0x24f));let _0x5a3933=await _0x1f1c37[_0xa0e8cc(0x1e6)](_0x2cecd6+_0xa0e8cc(0x24a));if(!_0x5a3933)_0x5a3933=await _0x1f1c37[_0xa0e8cc(0x1e6)](_0x2cecd6+_0xa0e8cc(0x221));if(_0x361475&&_0x5a3933)return _0x361475[_0xa0e8cc(0x138)]+_0xa0e8cc(0x281)+_0x5a3933['val'];}catch(_0x2e9a28){}return _0xa0e8cc(0x1f0);}async function getCalendarContext(_0x58cc5d){const _0x43b322=a0_0x15b889;if(!_0x58cc5d[_0x43b322(0x26f)][_0x43b322(0x1e0)]||!_0x58cc5d['config'][_0x43b322(0x17f)])return'Kalender\x20deaktiviert.';return _0x43b322(0x1b8);}async function getCalendarNames(_0x47e1eb,_0x5bba22){return[];}async function saveFeedback(_0x521fca,_0x5e7085){const _0x512448=a0_0x15b889;_0x521fca[_0x512448(0x161)][_0x512448(0x26d)](_0x512448(0x291)+_0x5e7085[_0x512448(0x22f)]);}async function runGeminiAnalysis(_0x53fb52,_0x28aa5d=''){const _0x456fe6=a0_0x15b889;if(!_0x53fb52[_0x456fe6(0x120)])return;if(_0x53fb52[_0x456fe6(0x152)][_0x456fe6(0x13a)]===0x0)return;const _0x3d3c5f=_0x53fb52['eventHistory']['slice'](0x0,0xf),_0x7cd6ae=await getWeatherContext(_0x53fb52),_0x159ca7=_0x53fb52[_0x456fe6(0x147)],_0x576b05=PERSONA_MAPPING[_0x53fb52['config'][_0x456fe6(0x24e)]||_0x456fe6(0x23c)],_0x36f1e9=_0x53fb52[_0x456fe6(0x26f)][_0x456fe6(0x2a2)]||_0x456fe6(0x1a9);let _0x543f42=_0x456fe6(0x1df);try{const _0x2ec9b4=await _0x53fb52[_0x456fe6(0x268)](_0x456fe6(0x185));if(_0x2ec9b4&&_0x2ec9b4[_0x456fe6(0x138)])_0x543f42=_0x2ec9b4[_0x456fe6(0x138)];}catch(_0x2abb60){}let _0x32ff2a=![];try{const _0x51f82b=await _0x53fb52['getStateAsync'](_0x456fe6(0x1ed));if(_0x51f82b&&_0x51f82b[_0x456fe6(0x138)])_0x32ff2a=!![];}catch(_0x435f43){}const _0xb897a1=_0x456fe6(0x27e)+_0x576b05+_0x456fe6(0x25d)+_0x36f1e9+_0x456fe6(0x140)+_0x159ca7+'.\x20WETTER:\x20'+_0x7cd6ae+_0x456fe6(0x17a)+_0x543f42+'.\x20EVENTS:\x20'+JSON['stringify'](_0x3d3c5f)+'.\x20EMERGENCY:\x20'+_0x28aa5d+_0x456fe6(0x269);try{const _0x20348f=await _0x53fb52['geminiModel']['generateContent'](_0xb897a1),_0x2653cd=JSON['parse'](_0x20348f['response'][_0x456fe6(0x232)]()[_0x456fe6(0x1be)](/```json|```/g,'')[_0x456fe6(0x184)]());await _0x53fb52[_0x456fe6(0x1f6)](_0x456fe6(0x2a7),{'val':JSON[_0x456fe6(0x29c)](_0x2653cd),'ack':!![]});if(_0x2653cd[_0x456fe6(0x287)])await _0x53fb52['setStateAsync'](_0x456fe6(0x132),{'val':_0x2653cd[_0x456fe6(0x287)],'ack':!![]});const _0x18a609={'timestamp':Date[_0x456fe6(0x168)](),'id':Date[_0x456fe6(0x168)]()[_0x456fe6(0x17c)](),'analysis':{'activity':{'summary':_0x2653cd['summary'],'isAlert':_0x2653cd[_0x456fe6(0x145)],'alertReason':_0x2653cd[_0x456fe6(0x164)]},'comfort':{'automationProposal':_0x2653cd['automationProposal']}}};await updateAnalysisHistory(_0x53fb52,_0x18a609);const _0x82efe7=_0x2653cd['isAlert']||![];_0x82efe7!==_0x53fb52[_0x456fe6(0x24c)]&&(await _0x53fb52['setStateAsync'](_0x456fe6(0x294),{'val':_0x82efe7,'ack':!![]}),_0x53fb52[_0x456fe6(0x24c)]=_0x82efe7,_0x82efe7&&(await _0x53fb52[_0x456fe6(0x1f6)](_0x456fe6(0x1ec),{'val':_0x2653cd['alertReason'],'ack':!![]}),sendNotification(_0x53fb52,_0x456fe6(0x104)+_0x2653cd['alertReason'],![],_0x2653cd[_0x456fe6(0x16b)])));if(_0x2653cd[_0x456fe6(0x177)]&&_0x2653cd[_0x456fe6(0x177)]['detected']){await _0x53fb52[_0x456fe6(0x1f6)](_0x456fe6(0x1d7),{'val':!![],'ack':!![]}),await _0x53fb52[_0x456fe6(0x1f6)](_0x456fe6(0x258),{'val':_0x2653cd[_0x456fe6(0x177)][_0x456fe6(0x1fd)],'ack':!![]}),await _0x53fb52['setStateAsync'](_0x456fe6(0x166),{'val':_0x2653cd[_0x456fe6(0x177)][_0x456fe6(0x1f9)],'ack':!![]}),await _0x53fb52[_0x456fe6(0x1f6)](_0x456fe6(0x253),{'val':JSON[_0x456fe6(0x29c)](_0x2653cd[_0x456fe6(0x177)][_0x456fe6(0x127)]),'ack':!![]});if(_0x32ff2a)executeAutomationAction(_0x53fb52);}}catch(_0x198b05){_0x53fb52[_0x456fe6(0x161)][_0x456fe6(0x149)](_0x456fe6(0x1d3)+_0x198b05[_0x456fe6(0x1dc)]);}}async function startSystem(_0x32733e){const _0x5dc177=a0_0x15b889;_0x32733e['log'][_0x5dc177(0x26d)]('ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...'),await initZombies(_0x32733e);try{_0x32733e[_0x5dc177(0x112)]=await checkLicense(_0x32733e['config'][_0x5dc177(0x252)]);}catch(_0x1c599a){}if(!_0x32733e[_0x5dc177(0x26f)][_0x5dc177(0x251)]||_0x32733e[_0x5dc177(0x26f)][_0x5dc177(0x251)]<0.1)_0x32733e[_0x5dc177(0x26f)]['inactivityThresholdHours']=0xc;await initHistory(_0x32733e),await initSystemConfig(_0x32733e);if(_0x32733e[_0x5dc177(0x26f)][_0x5dc177(0x153)])try{_0x32733e[_0x5dc177(0x14a)]=new GoogleGenerativeAI(_0x32733e[_0x5dc177(0x26f)]['geminiApiKey']),_0x32733e[_0x5dc177(0x120)]=_0x32733e[_0x5dc177(0x14a)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x5dc177(0x136)}}),_0x32733e['log'][_0x5dc177(0x26d)](_0x5dc177(0x1e2));}catch(_0x4f1f1f){_0x32733e[_0x5dc177(0x161)][_0x5dc177(0x149)](_0x5dc177(0x227)+_0x4f1f1f[_0x5dc177(0x1dc)]);}await createAllObjects(_0x32733e),await loadSystemMode(_0x32733e),await loadRawEventLog(_0x32733e),await loadDailyDigests(_0x32733e),_0x32733e[_0x5dc177(0x1c4)]('analysis.trigger'),_0x32733e[_0x5dc177(0x1c4)](LTM_DP_TRIGGER_DIGEST),_0x32733e[_0x5dc177(0x1c4)]('system.mode'),_0x32733e['subscribeStates'](_0x5dc177(0x1af)),_0x32733e[_0x5dc177(0x1c4)](_0x5dc177(0x11c)),_0x32733e[_0x5dc177(0x1c4)](_0x5dc177(0x1ed)),_0x32733e[_0x5dc177(0x1c4)](_0x5dc177(0x1d9)),_0x32733e['subscribeStates']('analysis.training.triggerHealth'),_0x32733e['subscribeStates']('analysis.training.triggerEnergy'),_0x32733e[_0x5dc177(0x1c4)](_0x5dc177(0x1cd)),_0x32733e[_0x5dc177(0x1c4)](_0x5dc177(0x150)),await initSensorSubscriptions(_0x32733e),await initPresenceSubscriptions(_0x32733e),await setupTelegramListener(_0x32733e),setTimeout(()=>checkWifiPresence(_0x32733e),0x1388);if(_0x32733e['analysisTimer'])clearInterval(_0x32733e[_0x5dc177(0x1c7)]);const _0x131273=_0x32733e[_0x5dc177(0x26f)]['analysisInterval']||0xf;_0x131273>0x0&&(_0x32733e[_0x5dc177(0x1c7)]=setInterval(()=>{runAutopilot(_0x32733e);},_0x131273*0x3c*0x3e8)),schedulers['setupLtmScheduler'](_0x32733e,()=>createDailyDigest(_0x32733e)),schedulers['setupModeResetScheduler'](_0x32733e),schedulers[_0x5dc177(0x299)](_0x32733e,()=>runBaselineDriftAnalysis(_0x32733e)),schedulers[_0x5dc177(0x198)](_0x32733e,()=>sendMorningBriefing(_0x32733e)),startPythonService(_0x32733e),setTimeout(()=>{const _0x22486c=_0x5dc177;_0x32733e[_0x22486c(0x1ef)]&&(runPythonHealthCheck(_0x32733e),triggerGaitAnalysis(_0x32733e),triggerEnergyPrediction(_0x32733e)),updateHealthVector(_0x32733e);},0x1388);}class CogniLiving extends utils[a0_0x15b889(0x297)]{constructor(_0x39edc5){const _0x47d62d=a0_0x15b889;super({..._0x39edc5,'name':_0x47d62d(0x15e)}),this[_0x47d62d(0x152)]=[],this[_0x47d62d(0x193)]=[],this[_0x47d62d(0x22a)]=[],this[_0x47d62d(0x10a)]=[],this[_0x47d62d(0x248)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x47d62d(0x139)]=!![],this[_0x47d62d(0x1cb)]=null,this[_0x47d62d(0x186)]=null,this['isGracePeriodActive']=![],this['genAI']=null,this[_0x47d62d(0x120)]=null,this[_0x47d62d(0x147)]=SYSTEM_MODES['NORMAL'],this['isProVersion']=![],this[_0x47d62d(0x24c)]=![],this[_0x47d62d(0x289)]=_0x47d62d(0x109),this[_0x47d62d(0x1c7)]=null,this[_0x47d62d(0x246)]=null,this[_0x47d62d(0x1d8)]=null,this['driftAnalysisTimer']=null,this['briefingJob']=null,this[_0x47d62d(0x1ef)]=null,this[_0x47d62d(0x128)]=![],this['on']('ready',this[_0x47d62d(0x284)][_0x47d62d(0x21c)](this)),this['on'](_0x47d62d(0x1ba),this[_0x47d62d(0x2a6)][_0x47d62d(0x21c)](this)),this['on'](_0x47d62d(0x123),this[_0x47d62d(0x16e)]['bind'](this)),this['on'](_0x47d62d(0x1dc),this[_0x47d62d(0x105)]['bind'](this));}async['onReady'](){const _0x9d8e22=a0_0x15b889;this[_0x9d8e22(0x161)][_0x9d8e22(0x26d)](_0x9d8e22(0x183)+this['version']+_0x9d8e22(0x1a6));if(!installer[_0x9d8e22(0x22c)](this,()=>startSystem(this)))return;}['onUnload'](_0xb4acc){const _0x2f13c6=a0_0x15b889;if(this[_0x2f13c6(0x1c7)])clearInterval(this[_0x2f13c6(0x1c7)]);if(this[_0x2f13c6(0x17d)])clearInterval(this['driftAnalysisTimer']);if(this['ltmJob'])this[_0x2f13c6(0x246)]['cancel']();if(this['modeResetJob'])this['modeResetJob'][_0x2f13c6(0x28a)]();if(this[_0x2f13c6(0x134)])this[_0x2f13c6(0x134)]['cancel']();if(this[_0x2f13c6(0x1cb)])clearTimeout(this[_0x2f13c6(0x1cb)]);if(this[_0x2f13c6(0x186)])clearTimeout(this['exitGraceTimer']);stopPythonService(this),_0xb4acc();}async[a0_0x15b889(0x2a6)](_0x3fcfe7,_0x4e0eda){const _0x2c2f60=a0_0x15b889;if(!_0x4e0eda||this[_0x2c2f60(0x128)])return;if(_0x3fcfe7[_0x2c2f60(0x28c)](_0x2c2f60(0x12e))&&_0x3fcfe7[_0x2c2f60(0x113)](_0x2c2f60(0x156))&&_0x4e0eda[_0x2c2f60(0x138)]){await handleTelegramResponse(this,_0x4e0eda[_0x2c2f60(0x138)]);return;}if(_0x3fcfe7===this[_0x2c2f60(0x2a8)]+'.'+SYSTEM_DP_MODE){if(_0x4e0eda[_0x2c2f60(0x138)]&&Object[_0x2c2f60(0x1f4)](SYSTEM_MODES)[_0x2c2f60(0x28c)](_0x4e0eda['val'])){this[_0x2c2f60(0x147)]=_0x4e0eda[_0x2c2f60(0x138)];if(_0x4e0eda['val']===SYSTEM_MODES['VACATION'])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x4e0eda[_0x2c2f60(0x296)])this[_0x2c2f60(0x20c)](_0x3fcfe7,{'val':this[_0x2c2f60(0x147)],'ack':!![]});return;}if(!_0x4e0eda[_0x2c2f60(0x296)]){_0x3fcfe7[_0x2c2f60(0x28c)](_0x2c2f60(0x1b1))&&_0x4e0eda[_0x2c2f60(0x138)]&&(this[_0x2c2f60(0x20c)](_0x3fcfe7,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x3fcfe7[_0x2c2f60(0x28c)](_0x2c2f60(0x204))&&_0x4e0eda[_0x2c2f60(0x138)]){this[_0x2c2f60(0x20c)](_0x3fcfe7,{'val':![],'ack':!![]});if(this[_0x2c2f60(0x112)])createDailyDigest(this);}_0x3fcfe7['includes'](_0x2c2f60(0x27c))&&_0x4e0eda['val']&&(this['setState'](_0x3fcfe7,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x3fcfe7[_0x2c2f60(0x28c)](_0x2c2f60(0x1a2))&&_0x4e0eda[_0x2c2f60(0x138)]&&(this['setState'](_0x3fcfe7,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x3fcfe7[_0x2c2f60(0x28c)](_0x2c2f60(0x1d9))&&_0x4e0eda[_0x2c2f60(0x138)]){this['setState'](_0x3fcfe7,{'val':![],'ack':!![]});if(this[_0x2c2f60(0x112)])try{const _0x10b715=await this[_0x2c2f60(0x268)](_0x2c2f60(0x1ca));if(_0x10b715&&_0x10b715[_0x2c2f60(0x138)]){const _0x2ee6a8=JSON['parse'](_0x10b715['val']);this[_0x2c2f60(0x161)][_0x2c2f60(0x26d)]('ðŸ§ \x20Triggering\x20Security\x20Training...'),this[_0x2c2f60(0x1f6)](_0x2c2f60(0x1ad),{'val':_0x2c2f60(0x110),'ack':!![]}),sendToPython(this,'TRAIN_SECURITY',{'sequences':_0x2ee6a8});}}catch(_0x54092c){this['log']['error'](_0x2c2f60(0x262)+_0x54092c[_0x2c2f60(0x1dc)]);}}if(_0x3fcfe7[_0x2c2f60(0x28c)]('analysis.training.triggerHealth')&&_0x4e0eda[_0x2c2f60(0x138)]){this[_0x2c2f60(0x20c)](_0x3fcfe7,{'val':![],'ack':!![]});if(this[_0x2c2f60(0x112)])try{const _0x1531ad=await this[_0x2c2f60(0x268)](LTM_DP_DAILY_DIGESTS);if(_0x1531ad&&_0x1531ad['val'])sendToPython(this,_0x2c2f60(0x242),{'digests':JSON[_0x2c2f60(0x1b7)](_0x1531ad[_0x2c2f60(0x138)])});}catch(_0x3003fc){}}if(_0x3fcfe7[_0x2c2f60(0x28c)](_0x2c2f60(0x10b))&&_0x4e0eda['val']){this['setState'](_0x3fcfe7,{'val':![],'ack':!![]});if(this[_0x2c2f60(0x112)])try{const _0x2a0e0f=await this[_0x2c2f60(0x268)](_0x2c2f60(0x1f2));if(_0x2a0e0f&&_0x2a0e0f[_0x2c2f60(0x138)])sendToPython(this,'TRAIN_ENERGY',{'points':JSON['parse'](_0x2a0e0f['val'])});}catch(_0x4721d3){}}if(_0x3fcfe7[_0x2c2f60(0x28c)]('analysis.training.triggerComfort')&&_0x4e0eda[_0x2c2f60(0x138)]){this['setState'](_0x3fcfe7,{'val':![],'ack':!![]});if(this[_0x2c2f60(0x112)])try{const _0x3c4a0e=await this[_0x2c2f60(0x268)](LTM_DP_RAW_LOG);_0x3c4a0e&&_0x3c4a0e[_0x2c2f60(0x138)]&&(this[_0x2c2f60(0x161)][_0x2c2f60(0x26d)]('ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...'),sendToPython(this,'TRAIN_COMFORT',{'events':JSON[_0x2c2f60(0x1b7)](_0x3c4a0e[_0x2c2f60(0x138)])}));}catch(_0xd8db36){}}if(_0x3fcfe7[_0x2c2f60(0x28c)]('analysis.training.triggerTopology')&&_0x4e0eda[_0x2c2f60(0x138)]){this[_0x2c2f60(0x20c)](_0x3fcfe7,{'val':![],'ack':!![]});if(this[_0x2c2f60(0x112)])try{const _0x133e29=await this[_0x2c2f60(0x268)](_0x2c2f60(0x1ca));if(_0x133e29&&_0x133e29[_0x2c2f60(0x138)]){const _0x8a2480=JSON[_0x2c2f60(0x1b7)](_0x133e29[_0x2c2f60(0x138)]);this[_0x2c2f60(0x161)]['info'](_0x2c2f60(0x285)),sendToPython(this,_0x2c2f60(0x215),{'sequences':_0x8a2480});}}catch(_0x101467){this[_0x2c2f60(0x161)]['error'](_0x2c2f60(0x267)+_0x101467[_0x2c2f60(0x1dc)]);}}return;}if(this[_0x2c2f60(0x26f)]['presenceDevices']&&this['config'][_0x2c2f60(0x286)][_0x2c2f60(0x28c)](_0x3fcfe7)){await checkWifiPresence(this);return;}const _0x258a5e=(this[_0x2c2f60(0x26f)][_0x2c2f60(0x244)]||[])[_0x2c2f60(0x222)](_0x273a2b=>_0x273a2b['id']===_0x3fcfe7);if(_0x258a5e)processSensorEvent(this,_0x3fcfe7,_0x4e0eda,_0x258a5e);}async[a0_0x15b889(0x105)](_0x3fd471){const _0x466896=a0_0x15b889;if(typeof _0x3fd471===_0x466896(0x295)&&_0x3fd471[_0x466896(0x1dc)]){if(_0x3fd471[_0x466896(0x254)]===_0x466896(0x15b)){const _0x19282a=_0x3fd471[_0x466896(0x1dc)]['apiKey']||this['config'][_0x466896(0x153)];if(!_0x19282a)return this[_0x466896(0x1d6)](_0x3fd471[_0x466896(0x151)],_0x3fd471[_0x466896(0x254)],{'success':![],'message':_0x466896(0x216)},_0x3fd471[_0x466896(0x29b)]);try{const _0x21529e=new GoogleGenerativeAI(_0x19282a),_0x3e77e=_0x21529e['getGenerativeModel']({'model':GEMINI_MODEL}),_0x1b7cee=await _0x3e77e['generateContent']('Hi');this[_0x466896(0x1d6)](_0x3fd471['from'],_0x3fd471[_0x466896(0x254)],{'success':!![],'message':_0x466896(0x23d)+_0x1b7cee[_0x466896(0x12b)][_0x466896(0x232)]()},_0x3fd471[_0x466896(0x29b)]);}catch(_0x3b6b0e){this[_0x466896(0x1d6)](_0x3fd471[_0x466896(0x151)],_0x3fd471[_0x466896(0x254)],{'success':![],'message':_0x466896(0x257)+_0x3b6b0e[_0x466896(0x1dc)]},_0x3fd471[_0x466896(0x29b)]);}}else{if(_0x3fd471[_0x466896(0x254)]==='testContext'){const _0x394c1a=await getWeatherContext(this),_0x4c9b56=await getCalendarContext(this);this[_0x466896(0x1d6)](_0x3fd471[_0x466896(0x151)],_0x3fd471[_0x466896(0x254)],{'success':!![],'weather':_0x394c1a,'calendar':_0x4c9b56},_0x3fd471[_0x466896(0x29b)]);}else{if(_0x3fd471[_0x466896(0x254)]===_0x466896(0x19f)){if(!this[_0x466896(0x112)])return this[_0x466896(0x1d6)](_0x3fd471[_0x466896(0x151)],_0x3fd471['command'],{'success':![],'isPro':![]},_0x3fd471[_0x466896(0x29b)]);let _0x20871d={'status':'N/A'};try{const _0x410ec8=await this[_0x466896(0x268)](LTM_DP_DRIFT_STATUS);_0x20871d[_0x466896(0x274)]=_0x410ec8?_0x410ec8[_0x466896(0x138)]:_0x466896(0x2a5);}catch(_0x553658){}this[_0x466896(0x1d6)](_0x3fd471[_0x466896(0x151)],_0x3fd471[_0x466896(0x254)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x20871d,'analysisHistory':this[_0x466896(0x193)]},_0x3fd471['callback']);}else{if(_0x3fd471[_0x466896(0x254)]==='getOverviewData'){const _0x22259e=this[_0x466896(0x10a)][_0x466896(0x13a)],_0x3b4e6e=new Date(),_0xfd9f99=new Date(_0x3b4e6e[_0x466896(0x107)](),_0x3b4e6e['getMonth'](),_0x3b4e6e[_0x466896(0x290)]())[_0x466896(0x178)](),_0x2042f3=this[_0x466896(0x22a)][_0x466896(0x1a7)](_0x1e97d4=>new Date(_0x1e97d4['timestamp'])[_0x466896(0x178)]()>_0xfd9f99)[_0x466896(0x13a)],_0x310aac=new Array(0x18)[_0x466896(0x1a0)](0x0);this[_0x466896(0x22a)][_0x466896(0x160)](_0x15f9f5=>{const _0x29341d=_0x466896,_0x153e7a=new Date(_0x15f9f5['timestamp']);if(_0x153e7a[_0x29341d(0x178)]()>_0xfd9f99)_0x310aac[_0x153e7a[_0x29341d(0x16f)]()]++;});let _0x4edcd0={'status':'N/A'};try{const _0x44f9fd=await this[_0x466896(0x268)](LTM_DP_DRIFT_STATUS);_0x4edcd0[_0x466896(0x274)]=_0x44f9fd?_0x44f9fd[_0x466896(0x138)]:'N/A';}catch(_0x395cad){}let _0x11a7e5='';try{const _0x58b2be=await this['getStateAsync'](_0x466896(0x185));_0x11a7e5=_0x58b2be?_0x58b2be['val']:'';}catch(_0x440f79){}let _0x49d6d8=null;!this['geminiModel']&&(_0x49d6d8=this[_0x466896(0x26f)]['geminiApiKey']?_0x466896(0x1d0):_0x466896(0x249));let _0x10affd={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x552318=await this[_0x466896(0x268)](_0x466896(0x1d7));if(_0x552318&&_0x552318['val']){_0x10affd[_0x466896(0x208)]=!![];const _0x273eca=await this[_0x466896(0x268)](_0x466896(0x258));_0x10affd[_0x466896(0x1fd)]=_0x273eca?_0x273eca[_0x466896(0x138)]:'';const _0x55c276=await this[_0x466896(0x268)](_0x466896(0x166));_0x10affd[_0x466896(0x1f9)]=_0x55c276?_0x55c276[_0x466896(0x138)]:'';const _0x154f92=await this['getStateAsync'](_0x466896(0x253));_0x10affd[_0x466896(0x127)]=_0x154f92?_0x154f92[_0x466896(0x138)]:'';}const _0x8340ea=await this[_0x466896(0x268)](_0x466896(0x1ed));_0x10affd[_0x466896(0x1a4)]=_0x8340ea?!!_0x8340ea[_0x466896(0x138)]:![];}catch(_0x114e9e){}this[_0x466896(0x1d6)](_0x3fd471['from'],_0x3fd471[_0x466896(0x254)],{'success':!![],'eventHistory':this[_0x466896(0x152)][_0x466896(0x259)](0x0,0xf),'stats':{'digestCount':_0x22259e,'eventCountToday':_0x2042f3,'hourlyActivity':_0x310aac,'driftStatus':_0x4edcd0[_0x466896(0x274)],'isPresent':this[_0x466896(0x139)],'presenceWho':_0x11a7e5,'minDays':this[_0x466896(0x26f)][_0x466896(0x14b)]||0x7,'stbDays':this[_0x466896(0x26f)][_0x466896(0x220)]||0xe,'ltbDays':this[_0x466896(0x26f)][_0x466896(0x27b)]||0x3c,'systemError':_0x49d6d8},'automation':_0x10affd},_0x3fd471['callback']);}else{if(_0x3fd471[_0x466896(0x254)]===_0x466896(0x17e))try{const _0x50d4aa=await scanner['scanForDevices'](this,_0x3fd471['message']||{});this[_0x466896(0x1d6)](_0x3fd471[_0x466896(0x151)],_0x3fd471['command'],{'success':!![],'devices':_0x50d4aa},_0x3fd471['callback']);}catch(_0x51f4f5){this[_0x466896(0x1d6)](_0x3fd471[_0x466896(0x151)],_0x3fd471[_0x466896(0x254)],{'success':![],'error':_0x51f4f5['message']},_0x3fd471[_0x466896(0x29b)]);}else{if(_0x3fd471[_0x466896(0x254)]===_0x466896(0x280)){const _0x281f6e=await this[_0x466896(0x143)](_0x466896(0x21d),'enum'),_0x4af454=[];if(_0x281f6e)for(const _0x535e16 in _0x281f6e){const _0x11cbf9=_0x281f6e[_0x535e16],_0x5221a1=(_0x11cbf9[_0x466896(0x12d)]&&typeof _0x11cbf9['common']['name']===_0x466896(0x295)?_0x11cbf9[_0x466896(0x12d)][_0x466896(0x235)]['de']:_0x11cbf9[_0x466896(0x12d)][_0x466896(0x235)])||_0x11cbf9[_0x466896(0x12d)][_0x466896(0x235)];_0x4af454[_0x466896(0x188)]({'id':_0x535e16,'name':_0x5221a1});}const _0x391d45=await this[_0x466896(0x143)](_0x466896(0x119),'enum'),_0x137930=[];if(_0x391d45)for(const _0x595b38 in _0x391d45){const _0x5e4af7=_0x391d45[_0x595b38],_0xd17a0b=(_0x5e4af7[_0x466896(0x12d)]&&typeof _0x5e4af7[_0x466896(0x12d)][_0x466896(0x235)]===_0x466896(0x295)?_0x5e4af7['common'][_0x466896(0x235)]['de']:_0x5e4af7[_0x466896(0x12d)]['name'])||_0x595b38[_0x466896(0x213)]('.')['pop']();_0x137930[_0x466896(0x188)](_0xd17a0b);}this[_0x466896(0x1d6)](_0x3fd471[_0x466896(0x151)],_0x3fd471[_0x466896(0x254)],{'success':!![],'enums':_0x4af454,'rooms':_0x137930},_0x3fd471[_0x466896(0x29b)]);}else{if(_0x3fd471[_0x466896(0x254)]===_0x466896(0x11f)){const _0x4c7514=_0x3fd471[_0x466896(0x1dc)]['instance'];if(!_0x4c7514)return this[_0x466896(0x1d6)](_0x3fd471[_0x466896(0x151)],_0x3fd471['command'],{'success':![],'error':_0x466896(0x22d)},_0x3fd471[_0x466896(0x29b)]);const _0x2b60d2=await getCalendarNames(this,_0x4c7514);this['sendTo'](_0x3fd471[_0x466896(0x151)],_0x3fd471[_0x466896(0x254)],{'success':!![],'names':_0x2b60d2},_0x3fd471[_0x466896(0x29b)]);}else{if(_0x3fd471[_0x466896(0x254)]==='simulateButler'){const {targetId:_0x46fb3a,targetValue:_0x4e5469}=_0x3fd471[_0x466896(0x1dc)];this[_0x466896(0x161)][_0x466896(0x26d)](_0x466896(0x28d)+_0x46fb3a+_0x466896(0x1f7)+_0x4e5469),await this[_0x466896(0x1f6)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0x466896(0x1f6)]('analysis.automation.description',{'val':'SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20'+_0x46fb3a,'ack':!![]}),await this['setStateAsync'](_0x466896(0x166),{'val':_0x46fb3a,'ack':!![]}),await this['setStateAsync']('analysis.automation.targetValue',{'val':_0x4e5469,'ack':!![]}),this[_0x466896(0x1d6)](_0x3fd471[_0x466896(0x151)],_0x3fd471[_0x466896(0x254)],{'success':!![]},_0x3fd471[_0x466896(0x29b)]);}else{if(_0x3fd471['command']==='submitFeedback'){const {historyId:_0x55d0fe,rating:_0x11e70b,comment:_0x366162,alertReason:_0xbb09dd}=_0x3fd471['message'];_0x55d0fe&&_0x11e70b?(await saveFeedback(this,{'timestamp':Date[_0x466896(0x168)](),'historyId':_0x55d0fe,'rating':_0x11e70b,'comment':_0x366162,'alertReason':_0xbb09dd}),this[_0x466896(0x1d6)](_0x3fd471[_0x466896(0x151)],_0x3fd471['command'],{'success':!![]},_0x3fd471[_0x466896(0x29b)])):this['sendTo'](_0x3fd471['from'],_0x3fd471['command'],{'success':![],'error':_0x466896(0x179)},_0x3fd471[_0x466896(0x29b)]);}else _0x3fd471[_0x466896(0x254)]==='dismissAutomation'&&(this['log'][_0x466896(0x26d)](_0x466896(0x1e4)),await this[_0x466896(0x1f6)](_0x466896(0x1d7),{'val':![],'ack':!![]}),await this[_0x466896(0x1f6)](_0x466896(0x258),{'val':'','ack':!![]}),this['sendTo'](_0x3fd471['from'],_0x3fd471[_0x466896(0x254)],{'success':!![]},_0x3fd471['callback']));}}}}}}}}}}}if(require[a0_0x15b889(0x169)]!==module)module['exports']=_0x514bec=>new CogniLiving(_0x514bec);else new CogniLiving();