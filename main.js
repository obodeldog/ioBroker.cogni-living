const a0_0x160a19=a0_0xf982;(function(_0xb504b5,_0x5b95fb){const _0x548b02=a0_0xf982,_0xb4688a=_0xb504b5();while(!![]){try{const _0x18ae41=-parseInt(_0x548b02(0x16c))/0x1*(-parseInt(_0x548b02(0x1fb))/0x2)+-parseInt(_0x548b02(0x26c))/0x3*(parseInt(_0x548b02(0x18e))/0x4)+parseInt(_0x548b02(0x133))/0x5*(-parseInt(_0x548b02(0x20c))/0x6)+-parseInt(_0x548b02(0x2a1))/0x7*(-parseInt(_0x548b02(0x177))/0x8)+parseInt(_0x548b02(0x17d))/0x9*(parseInt(_0x548b02(0x19f))/0xa)+parseInt(_0x548b02(0x26d))/0xb*(-parseInt(_0x548b02(0x216))/0xc)+parseInt(_0x548b02(0x21d))/0xd;if(_0x18ae41===_0x5b95fb)break;else _0xb4688a['push'](_0xb4688a['shift']());}catch(_0x2aa794){_0xb4688a['push'](_0xb4688a['shift']());}}}(a0_0x14f6,0xc325f));const a0_0xea0217=(function(){let _0x1b728d=!![];return function(_0x46a887,_0x118661){const _0xa23899=_0x1b728d?function(){const _0x5a2fb1=a0_0xf982;if(_0x118661){const _0x502805=_0x118661[_0x5a2fb1(0x155)](_0x46a887,arguments);return _0x118661=null,_0x502805;}}:function(){};return _0x1b728d=![],_0xa23899;};}()),a0_0x41be97=a0_0xea0217(this,function(){const _0x10f0c2=a0_0xf982;return a0_0x41be97['toString']()[_0x10f0c2(0x2bf)](_0x10f0c2(0x135))[_0x10f0c2(0x17f)]()[_0x10f0c2(0x294)](a0_0x41be97)[_0x10f0c2(0x2bf)](_0x10f0c2(0x135));});a0_0x41be97();'use strict';const utils=require(a0_0x160a19(0x1f8)),{GoogleGenerativeAI}=require(a0_0x160a19(0x2a4)),{spawn}=require(a0_0x160a19(0x191)),path=require(a0_0x160a19(0x165)),fs=require('fs'),installer=require(a0_0x160a19(0x293)),scanner=require(a0_0x160a19(0x256)),schedulers=require(a0_0x160a19(0x1a5)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x160a19(0x15c),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x160a19(0x283),LTM_DP_DAILY_DIGESTS=a0_0x160a19(0x21f),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST=a0_0x160a19(0x209),LTM_DP_BASELINE_STATUS=a0_0x160a19(0x176),LTM_DP_DRIFT_CHANNEL=a0_0x160a19(0x236),LTM_DP_DRIFT_STATUS=a0_0x160a19(0x201),LTM_DP_DRIFT_DETAILS=a0_0x160a19(0x127),LTM_DP_DRIFT_LAST_CHECK=a0_0x160a19(0x1a9),SYSTEM_DP_MODE=a0_0x160a19(0x2ab),SYSTEM_MODES={'NORMAL':a0_0x160a19(0x14c),'VACATION':a0_0x160a19(0x152),'PARTY':a0_0x160a19(0x181),'GUEST':a0_0x160a19(0x2af)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x160a19(0x189)],SYSTEM_MODES['GUEST']],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0x160a19(0x24d),'family':a0_0x160a19(0x1da),'single_comfort':'Fokus\x20auf\x20Komfort.','security':a0_0x160a19(0x1b8)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x14f6(){const _0x2e2cff=['isPresent','onMessage','PARTY','TRAIN_COMFORT','loc','json','getStateAsync','92uynhFq','heizung','change_percent','child_process','dependencyInstallInProgress','main','window','Success','systemConfig','kill','extendObjectAsync','ANALYZE_SEQUENCE','Train\x20Comfort','analysis.automation.patternDetected','Trend','HEALTH_TRAIN_RESULT','getForeignObjectsAsync','3173670MJUMNl','licenseKey','pythonProcess','getTime','Keine\x20Details.','N/A\x20(Learning)','./lib/scheduler','now','Digest','switch','LTM.driftAnalysis.lastCheck','analysis.automation.targetValue','testContext','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','namespace','toFixed','geminiModel','unload','Gemini\x20AI\x20initialized.','ðŸ\x20Python\x20Pong','events.history','Unknown','number','analysis.training.triggerEnergy','existsSync','PRIORITÃ„T:\x20Sicherheit.','ready','includes','analysis.security.topologyMatrix','online','.\x20ANWESEND:\x20','dailyDigests','cancel','tÃ¼r','PONG','calendarInstance','analysis.automation.description','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','delObjectAsync','triggerBriefing','inactivityThresholdHours','Gait\x20Speed\x20Trend','analysis.security.lastScore','automationProposal','getEnums','âœ…\x20HEALTH\x20TRAINED.','.NextHours.Location_1.Day_1.current.temp_value','\x20->\x20','Unbekannt','.Current.WeatherText','analysisHistory','alertReason','analysis.analysisHistory','apiKey','setStateAsync','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','User\x20dismissed\x20automation\x20proposal.','ANALYZE_HEALTH','heating','Fokus\x20auf\x20Familienroutinen.','weatherInstance','analysis.training.triggerComfort','value','kontakt','toLowerCase','baselineDrift','map','TREND_RESULT','motion','onStateChange','Auto\x20Apply','text.alarm','logDuplicates','ðŸŒ…\x20Morning\x20Briefing:\x0a','analysis.health.trendDiagnosis','Â°C,\x20','status','.\x20WETTER:\x20','sensorLastValues','Event\x20History','latitude','[LOG]','minDaysForBaseline','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','system.config','ack','sendTo','object','cogni-living','@iobroker/adapter-core','ltmStbWindowDays','name','8XtPamc','getForeignStateAsync','rating','type','bewegung','location','LTM.driftAnalysis.baselineDrift','[RECORDER]\x20Error:\x20','analysisInterval','trim','summary','log','analysis.isAlert','KI-Modell\x20nicht\x20initialisiert','LTM.triggerDailyDigest','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','val','739338xlylIz','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','analysis.energy','Current\x20Threshold','Trend\x20Value','getObjectAsync','TRAIN_ENERGY','OK:\x20','Regel\x20erkannt:\x20','getLtmData','12KmvOqZ','length','Insulation\x20Score','PREDICT_ENERGY','common','temperatur','events.lastEvent','14034137pkmVSY','Heating\x20Score','LTM.dailyDigests','error','genAI','close','subscribeStates','currentSystemMode','split','write','setupBriefingScheduler','longitude','.forecast.current.temperature','Lernphase\x20(','NORMAL','occupancy','Training\x20Status','Pattern\x20Detected','Started...','forEach','temperature','stringify','ðŸ§ \x20Triggering\x20Security\x20Training...','targetId','analysis.automation.triggerAction','LTM.driftAnalysis','isProVersion','getOverviewData','Activity-Level','analysis.alertReason','exitGraceTimer','setForeignStateAsync','ANALYZE_GAIT','getHours','prÃ¤senz','analysis.energy.heatingScore','lastAlertState','Err:\x20','autoApply','Security\x20Monitor','application/json','modeResetJob','analysis.training.triggerHealth','System','insulation','setupLtmScheduler','slice','Target\x20Value','PRIORITÃ„T:\x20Gesundheit/AAL.','warn','is_anomaly','accuweather','text','LTM','contact','from','Anomaly\x20Score','./lib/scanner','description','aiPersona','Skipped\x20(No\x20AI\x20or\x20Data)',')\x20-\x20SAFE\x20BOOT','exitTimer','\x0aSTB:\x20','payload','analysis.health.gaitSpeed','\x20=\x20','getCalendarNames','unknown','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','useWeather','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','analysis.training.triggerSecurity','Trigger\x20Action','onUnload','LTM.trainingData.sequences','N/A','splice','205461gdjNgs','7931825QCnvhG','scanDevices','stateChange','toLocaleTimeString','presenceDevices','Kein\x20API\x20Key.','generateContent','COMFORT_RESULT','details','version','.forecast.current.temp','Train\x20Health','Sec-Training\x20started...','GAIT_RESULT','Activity\x20Summary','analysis.health.lastCheck','Temperature\x20Forecast','find','date','diagnosis','klima','.Current.Temperature','LTM.rawEventLog','PYTHON_EXE','isExit','success','VACATION','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','.\x20SYSTEM_MODE:\x20','livingContext','âš ï¸\x20SECURITY\x20ALARM:\x20','rule','message','system','Error\x20launching\x20Python:\x20','TRAINING_COMPLETE','Anomaly\x20Detected','callback','./lib/installer','constructor','Thermodynamics','config','python3','Target\x20ID','getForeignObjectAsync','Alert\x20Status','analysis.automation.targetId','weatherunderground','activityLevel','analysis.security.lastCheck','devices','analysis.triggerBriefing','791JxzHcU','system.presenceWho','setupDriftAnalysisScheduler','@google/generative-ai','âš ï¸\x20ALARM:\x20','analysis.training.triggerTopology','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','daswetter','eventHistory','Who\x20is\x20present?','system.mode','response','simulateButler','stdin','guest','getMonth','ltmLtbWindowDays','Adapter','outdoorSensorId','filter','reason','city','python_service','analysis.history_debug_00','fenster','analysis.automation.detectedPatterns','ltmJob','briefingJob','data','LTM.trainingData.thermodynamics','search','targetValue','analysisTimer','\x20Tage)','Energy\x20Intelligence','generic','indicator.alarm','writable','.\x20EVENTS:\x20','SECURITY_RESULT','push','LTM.driftAnalysis.driftDetails','analysis.activitySummary','testApiKey','debug','Topology\x20Error:\x20','enum','analysis.training.status','\x0aGrund:\x20','join','isGracePeriodActive','\x20new\x20patterns.','setObjectNotExistsAsync','45KSMnUJ','exports','(((.+)+)+)+$','checkAndInstall','Missing\x20data','door','geminiApiKey','channel','replace','startsWith','rawEventLog','unshift','string','analysis.health.isAnomaly','analysis.training','confidence','Last\x20Check','presence','licht','timestamp','Aktiv\x20(','parse','subscribeForeignStatesAsync','dimmer','Kein\x20API\x20Key!','normal','schalter','shift','Wetterdaten\x20deaktiviert.','ðŸ“\x20Feedback\x20received:\x20','state','vacation','button','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','apply','enum.functions.*','[PYTHON]\x20','analysis.energy.insulationScore','enum.rooms.*','Detected\x20Patterns','info','models/gemini-flash-latest','scanForDevices','analysis.trigger','indicator','cogni-living\x20adapter\x20starting\x20(v','analysis.health.trendValue','pop','endsWith','BUTLER\x20Execution\x20Error:\x20','path','setState','openweathermap','bind','ENERGY_TRAIN_RESULT','command','isEmergency','271387IdTRtY','substring','toISOString','fill','Topology\x20Matrix','Health\x20Analysis','getGenerativeModel','analysis.lastResult','analysis.energy.forecast','boolean','LTM.baselineStatus','32048olUifz','analysis.automation.autoApply','Deaktiviert\x20(Pro-Feature)','values','keys','Kalender\x20deaktiviert.','45gzQwLT','analysis.security','toString','Raw\x20Log','party','[RESULT]','driftAnalysisTimer','Briefing\x20Error:\x20','Keine\x20Wetterdaten\x20verfÃ¼gbar.','Gemini\x20Init\x20Error:\x20'];a0_0x14f6=function(){return _0x2e2cff;};return a0_0x14f6();}let activeSequence=[],sequenceTimer=null;async function initZombies(_0x1a54f0){const _0x9ef5e4=a0_0x160a19;try{const _0x32c8c9=[_0x9ef5e4(0x2b8),'events.history_debug_00'];for(const _0x1fd0d0 of _0x32c8c9){try{const _0x37fd65=await _0x1a54f0[_0x9ef5e4(0x211)](_0x1fd0d0);if(_0x37fd65)await _0x1a54f0[_0x9ef5e4(0x1c5)](_0x1fd0d0);}catch(_0x2d3535){}}}catch(_0x6d6b9a){}}async function checkLicense(_0x3d63f0){return!![];}async function initHistory(_0x552aad){const _0x54f5f8=a0_0x160a19;try{const _0x4843aa=await _0x552aad['getStateAsync'](_0x54f5f8(0x1b3));_0x4843aa&&_0x4843aa[_0x54f5f8(0x20b)]&&(_0x552aad[_0x54f5f8(0x2a9)]=JSON[_0x54f5f8(0x148)](_0x4843aa['val'][_0x54f5f8(0x17f)]()));}catch(_0x412709){_0x552aad[_0x54f5f8(0x2a9)]=[];}try{const _0x588d20=await _0x552aad['getStateAsync'](_0x54f5f8(0x1d3));if(_0x588d20&&_0x588d20[_0x54f5f8(0x20b)])_0x552aad[_0x54f5f8(0x1d1)]=JSON[_0x54f5f8(0x148)](_0x588d20[_0x54f5f8(0x20b)][_0x54f5f8(0x17f)]());}catch(_0x22494d){_0x552aad[_0x54f5f8(0x1d1)]=[];}if(_0x552aad['eventHistory']&&_0x552aad[_0x54f5f8(0x2a9)][_0x54f5f8(0x217)]>0x0){_0x552aad[_0x54f5f8(0x206)]['info']('Restoring\x20sensor\x20cache...');for(let _0x547622=_0x552aad[_0x54f5f8(0x2a9)][_0x54f5f8(0x217)]-0x1;_0x547622>=0x0;_0x547622--){const _0x1503e5=_0x552aad['eventHistory'][_0x547622];if(_0x1503e5&&_0x1503e5['id']!==undefined&&_0x1503e5[_0x54f5f8(0x1dd)]!==undefined)_0x552aad['sensorLastValues'][_0x1503e5['id']]=_0x1503e5[_0x54f5f8(0x1dd)];}}}async function initSystemConfig(_0x1b5ee5){const _0x2802c2=a0_0x160a19;try{const _0x48f107=await _0x1b5ee5[_0x2802c2(0x299)](_0x2802c2(0x1f3));if(_0x48f107&&_0x48f107[_0x2802c2(0x21a)])_0x1b5ee5['systemConfig']={'latitude':_0x48f107[_0x2802c2(0x21a)][_0x2802c2(0x1ef)]||0x0,'longitude':_0x48f107[_0x2802c2(0x21a)][_0x2802c2(0x228)]||0x0,'city':_0x48f107['common'][_0x2802c2(0x2b6)]||''};}catch(_0x48937f){}}async function createAllObjects(_0x28d092){const _0x173804=a0_0x160a19;await _0x28d092[_0x173804(0x198)](_0x173804(0x28e),{'type':_0x173804(0x13a),'common':{'name':_0x173804(0x248)},'native':{}}),await _0x28d092['extendObjectAsync'](SYSTEM_DP_MODE,{'type':'state','common':{'name':'System\x20Mode','type':_0x173804(0x13f),'role':_0x173804(0x151),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x173804(0x22b)]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x2a2),{'type':'state','common':{'name':_0x173804(0x2aa),'type':_0x173804(0x13f),'role':_0x173804(0x251),'read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x21c),{'type':_0x173804(0x151),'common':{'name':'Last\x20raw\x20event','type':_0x173804(0x13f),'role':_0x173804(0x18c),'read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x1b3),{'type':'state','common':{'name':_0x173804(0x1ee),'type':_0x173804(0x13f),'role':'json','read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x198)](_0x173804(0x141),{'type':_0x173804(0x13a),'common':{'name':'AI\x20Training'},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x266),{'type':_0x173804(0x151),'common':{'name':'Train\x20Security','type':_0x173804(0x175),'role':_0x173804(0x153),'read':!![],'write':!![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x247),{'type':'state','common':{'name':_0x173804(0x278),'type':'boolean','role':_0x173804(0x153),'read':!![],'write':!![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x1b6),{'type':'state','common':{'name':'Train\x20Energy','type':_0x173804(0x175),'role':_0x173804(0x153),'read':!![],'write':!![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x1dc),{'type':_0x173804(0x151),'common':{'name':_0x173804(0x19a),'type':'boolean','role':_0x173804(0x153),'read':!![],'write':!![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x2a6),{'type':_0x173804(0x151),'common':{'name':'Build\x20Topology','type':_0x173804(0x175),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x12d),{'type':'state','common':{'name':_0x173804(0x22d),'type':_0x173804(0x13f),'role':_0x173804(0x251),'read':!![],'write':![]},'native':{}}),await _0x28d092['extendObjectAsync'](_0x173804(0x17e),{'type':_0x173804(0x13a),'common':{'name':_0x173804(0x244)},'native':{}}),await _0x28d092['setObjectNotExistsAsync'](_0x173804(0x1c9),{'type':_0x173804(0x151),'common':{'name':_0x173804(0x255),'type':_0x173804(0x1b5),'role':'value','read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x132)]('analysis.security.currentThreshold',{'type':'state','common':{'name':_0x173804(0x20f),'type':_0x173804(0x1b5),'role':_0x173804(0x1dd),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x29e),{'type':_0x173804(0x151),'common':{'name':_0x173804(0x143),'type':_0x173804(0x13f),'role':_0x173804(0x27f),'read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x1bb),{'type':_0x173804(0x151),'common':{'name':_0x173804(0x170),'type':_0x173804(0x13f),'role':_0x173804(0x18c),'read':!![],'write':![]},'native':{}}),await _0x28d092['extendObjectAsync']('analysis.health',{'type':_0x173804(0x13a),'common':{'name':_0x173804(0x171)},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x27c),{'type':_0x173804(0x151),'common':{'name':_0x173804(0x143),'type':_0x173804(0x13f),'role':_0x173804(0x27f),'read':!![],'write':![]},'native':{}}),await _0x28d092['setObjectNotExistsAsync'](_0x173804(0x140),{'type':_0x173804(0x151),'common':{'name':_0x173804(0x291),'type':_0x173804(0x175),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x1e9),{'type':'state','common':{'name':_0x173804(0x19c),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x161),{'type':_0x173804(0x151),'common':{'name':_0x173804(0x210),'type':'number','role':'value','read':!![],'write':![]},'native':{}}),await _0x28d092['setObjectNotExistsAsync']('analysis.health.todayVector',{'type':_0x173804(0x151),'common':{'name':'Today\x20Vector\x20(15m)','type':_0x173804(0x13f),'role':_0x173804(0x18c),'read':!![],'write':![]},'native':{}}),await _0x28d092['setObjectNotExistsAsync'](_0x173804(0x25e),{'type':_0x173804(0x151),'common':{'name':_0x173804(0x1c8),'type':_0x173804(0x1b5),'role':_0x173804(0x1dd),'read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x198)](_0x173804(0x20e),{'type':_0x173804(0x13a),'common':{'name':_0x173804(0x120)},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x158),{'type':_0x173804(0x151),'common':{'name':_0x173804(0x218),'type':'string','role':_0x173804(0x251),'read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x240),{'type':_0x173804(0x151),'common':{'name':_0x173804(0x21e),'type':_0x173804(0x13f),'role':_0x173804(0x251),'read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x174),{'type':_0x173804(0x151),'common':{'name':_0x173804(0x27d),'type':_0x173804(0x13f),'role':_0x173804(0x18c),'read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x198)](_0x173804(0x252),{'type':_0x173804(0x13a),'common':{'name':_0x173804(0x252)},'native':{}}),await _0x28d092[_0x173804(0x198)](LTM_DP_RAW_LOG,{'type':_0x173804(0x151),'common':{'name':_0x173804(0x180),'type':'string','role':_0x173804(0x18c),'read':!![],'write':![]},'native':{}}),await _0x28d092['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':'Daily\x20Digests','type':_0x173804(0x13f),'role':_0x173804(0x18c),'read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x132)]('LTM.trainingData.sequences',{'type':_0x173804(0x151),'common':{'name':'Sequences','type':_0x173804(0x13f),'role':'json','read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x132)]('LTM.trainingData.thermodynamics',{'type':_0x173804(0x151),'common':{'name':_0x173804(0x295),'type':_0x173804(0x13f),'role':_0x173804(0x18c),'read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x15e),{'type':_0x173804(0x151),'common':{'name':'Trigger\x20Analysis','type':_0x173804(0x175),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x28d092['setObjectNotExistsAsync'](_0x173804(0x2a0),{'type':_0x173804(0x151),'common':{'name':'Trigger\x20Briefing','type':'boolean','role':_0x173804(0x153),'read':!![],'write':!![]},'native':{}}),await _0x28d092[_0x173804(0x132)]('analysis.isAlert',{'type':_0x173804(0x151),'common':{'name':_0x173804(0x29a),'type':_0x173804(0x175),'role':_0x173804(0x122),'read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x23a),{'type':_0x173804(0x151),'common':{'name':'Alert\x20Reason','type':_0x173804(0x13f),'role':_0x173804(0x1e6),'read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x132)]('analysis.activitySummary',{'type':_0x173804(0x151),'common':{'name':_0x173804(0x27b),'type':_0x173804(0x13f),'role':_0x173804(0x251),'read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x19b),{'type':_0x173804(0x151),'common':{'name':_0x173804(0x22e),'type':_0x173804(0x175),'role':_0x173804(0x15f),'read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x1c3),{'type':_0x173804(0x151),'common':{'name':'Description','type':_0x173804(0x13f),'role':_0x173804(0x251),'read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x2ba),{'type':_0x173804(0x151),'common':{'name':_0x173804(0x15a),'type':_0x173804(0x13f),'role':'json','read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x29b),{'type':_0x173804(0x151),'common':{'name':_0x173804(0x298),'type':_0x173804(0x13f),'role':_0x173804(0x251),'read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x132)]('analysis.automation.targetValue',{'type':'state','common':{'name':_0x173804(0x24c),'type':_0x173804(0x13f),'role':'text','read':!![],'write':![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x178),{'type':'state','common':{'name':_0x173804(0x1e5),'type':_0x173804(0x175),'role':_0x173804(0x1a8),'read':!![],'write':!![]},'native':{}}),await _0x28d092[_0x173804(0x132)](_0x173804(0x235),{'type':_0x173804(0x151),'common':{'name':_0x173804(0x267),'type':_0x173804(0x175),'role':_0x173804(0x153),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x23c1af){const _0x2ad966=a0_0x160a19;try{const _0x307bbd=await _0x23c1af[_0x2ad966(0x18d)](SYSTEM_DP_MODE);_0x307bbd&&_0x307bbd[_0x2ad966(0x20b)]&&Object[_0x2ad966(0x17a)](SYSTEM_MODES)[_0x2ad966(0x1ba)](_0x307bbd[_0x2ad966(0x20b)])?_0x23c1af[_0x2ad966(0x224)]=_0x307bbd[_0x2ad966(0x20b)]:(_0x23c1af[_0x2ad966(0x224)]=SYSTEM_MODES['NORMAL'],await _0x23c1af[_0x2ad966(0x1d5)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x2ad966(0x22b)],'ack':!![]}));}catch(_0x23bfce){_0x23c1af[_0x2ad966(0x224)]=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0x1b059f){const _0xe0b39f=a0_0x160a19;try{const _0x235646=await _0x1b059f[_0xe0b39f(0x18d)](LTM_DP_RAW_LOG);if(_0x235646&&_0x235646['val'])_0x1b059f[_0xe0b39f(0x13d)]=JSON['parse'](_0x235646[_0xe0b39f(0x20b)]);}catch(_0x15c478){_0x1b059f[_0xe0b39f(0x13d)]=[];}}async function saveRawEventLog(_0x3e811a){const _0xc2819=a0_0x160a19;if(_0x3e811a[_0xc2819(0x13d)][_0xc2819(0x217)]>RAW_LOG_MAX_SIZE)_0x3e811a[_0xc2819(0x13d)]['splice'](0x0,_0x3e811a[_0xc2819(0x13d)][_0xc2819(0x217)]-RAW_LOG_MAX_SIZE);await _0x3e811a['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0xc2819(0x232)](_0x3e811a['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x351f1c){const _0x2edfa1=a0_0x160a19;try{const _0x1d6431=await _0x351f1c[_0x2edfa1(0x18d)](LTM_DP_DAILY_DIGESTS);if(_0x1d6431&&_0x1d6431['val'])_0x351f1c['dailyDigests']=JSON[_0x2edfa1(0x148)](_0x1d6431[_0x2edfa1(0x20b)]);}catch(_0x5f985a){_0x351f1c['dailyDigests']=[];}await updateBaselineStatus(_0x351f1c);}async function saveDailyDigests(_0x5de453,_0x492892=!![]){const _0x306c7a=a0_0x160a19,_0x46128d=_0x5de453['config'][_0x306c7a(0x2b1)]||0x3c;_0x5de453[_0x306c7a(0x1be)][_0x306c7a(0x217)]>_0x46128d&&_0x5de453[_0x306c7a(0x1be)][_0x306c7a(0x26b)](0x0,_0x5de453[_0x306c7a(0x1be)][_0x306c7a(0x217)]-_0x46128d);await _0x5de453[_0x306c7a(0x1d5)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x306c7a(0x232)](_0x5de453[_0x306c7a(0x1be)]),'ack':!![]});if(_0x492892)await updateBaselineStatus(_0x5de453);}async function updateAnalysisHistory(_0x117a33,_0x37c057){const _0x46e6ec=a0_0x160a19;_0x117a33[_0x46e6ec(0x1d1)]['unshift'](_0x37c057);if(_0x117a33[_0x46e6ec(0x1d1)][_0x46e6ec(0x217)]>HISTORY_MAX_SIZE)_0x117a33[_0x46e6ec(0x1d1)][_0x46e6ec(0x162)]();await _0x117a33['setStateAsync']('analysis.analysisHistory',{'val':JSON[_0x46e6ec(0x232)](_0x117a33[_0x46e6ec(0x1d1)]),'ack':!![]});}async function updateBaselineStatus(_0x4e2778){const _0x2a039a=a0_0x160a19;if(!_0x4e2778[_0x2a039a(0x237)]){await _0x4e2778['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x2a039a(0x179),'ack':!![]});return;}const _0x52a3e4=_0x4e2778[_0x2a039a(0x1be)][_0x2a039a(0x217)]>=(_0x4e2778[_0x2a039a(0x296)]['minDaysForBaseline']||0x7)?_0x2a039a(0x147)+_0x4e2778[_0x2a039a(0x1be)]['length']+_0x2a039a(0x11f):_0x2a039a(0x22a)+_0x4e2778['dailyDigests'][_0x2a039a(0x217)]+'/'+(_0x4e2778[_0x2a039a(0x296)][_0x2a039a(0x1f1)]||0x7)+')';await _0x4e2778[_0x2a039a(0x1d5)](LTM_DP_BASELINE_STATUS,{'val':_0x52a3e4,'ack':!![]});}async function initSensorSubscriptions(_0x3b3037){const _0x231844=a0_0x160a19,_0x306135=_0x3b3037[_0x231844(0x296)][_0x231844(0x29f)];if(_0x306135)for(const _0x196aad of _0x306135){await _0x3b3037['subscribeForeignStatesAsync'](_0x196aad['id']);}}async function initPresenceSubscriptions(_0x3eed7a){const _0x5f0dfc=a0_0x160a19,_0x241c1f=_0x3eed7a[_0x5f0dfc(0x296)][_0x5f0dfc(0x271)];if(_0x241c1f)for(const _0x5e8781 of _0x241c1f){await _0x3eed7a[_0x5f0dfc(0x149)](_0x5e8781);}}async function setupTelegramListener(_0x56b3ba){const _0x1a7636=a0_0x160a19,_0x2d6f74=_0x56b3ba[_0x1a7636(0x296)]['notifyTelegramInstance'];if(_0x56b3ba['config']['notifyTelegramEnabled']&&_0x2d6f74)await _0x56b3ba[_0x1a7636(0x149)](_0x2d6f74+'.communicate.request');}async function checkWifiPresence(_0x3b3c1b){const _0x3dd35c=a0_0x160a19;try{const _0x22dc27=_0x3b3c1b[_0x3dd35c(0x296)][_0x3dd35c(0x271)]||[];let _0x4fd275=![];const _0x1a4caf=[];for(const _0x303e2f of _0x22dc27){try{const _0x80a9e=await _0x3b3c1b[_0x3dd35c(0x1fc)](_0x303e2f);_0x80a9e&&(_0x80a9e[_0x3dd35c(0x20b)]===!![]||_0x80a9e['val']===_0x3dd35c(0x1bc)||_0x80a9e[_0x3dd35c(0x20b)]===0x1)&&(_0x4fd275=!![],_0x1a4caf[_0x3dd35c(0x126)](_0x303e2f));}catch(_0x47c30b){}}return await _0x3b3c1b[_0x3dd35c(0x1d5)](_0x3dd35c(0x2a2),{'val':_0x1a4caf[_0x3dd35c(0x12f)](',\x20'),'ack':!![]}),_0x4fd275&&(_0x3b3c1b[_0x3dd35c(0x25b)]&&(_0x3b3c1b['log']['info']('WiFi\x20Presence\x20detected.'),abortExitTimer(_0x3b3c1b)),!_0x3b3c1b['isPresent']&&_0x3b3c1b[_0x3dd35c(0x224)]===SYSTEM_MODES[_0x3dd35c(0x22b)]&&await setPresence(_0x3b3c1b,!![])),_0x4fd275;}catch(_0x34c9e6){return![];}}function startExitTimer(_0x17559c){const _0x13fc9e=a0_0x160a19;abortExitTimer(_0x17559c),_0x17559c['isGracePeriodActive']=!![],_0x17559c['exitGraceTimer']=setTimeout(()=>{const _0x13b1fd=a0_0xf982;_0x17559c[_0x13b1fd(0x130)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x17559c[_0x13fc9e(0x25b)]=setTimeout(()=>{setPresence(_0x17559c,![]),_0x17559c['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function a0_0xf982(_0x2fc596,_0x3dfb2d){const _0x465540=a0_0x14f6();return a0_0xf982=function(_0x41be97,_0xea0217){_0x41be97=_0x41be97-0x11d;let _0x14f614=_0x465540[_0x41be97];return _0x14f614;},a0_0xf982(_0x2fc596,_0x3dfb2d);}function abortExitTimer(_0x476bec){const _0x1f4b5c=a0_0x160a19;if(_0x476bec[_0x1f4b5c(0x25b)])clearTimeout(_0x476bec[_0x1f4b5c(0x25b)]);if(_0x476bec[_0x1f4b5c(0x23b)])clearTimeout(_0x476bec[_0x1f4b5c(0x23b)]);_0x476bec[_0x1f4b5c(0x25b)]=null,_0x476bec[_0x1f4b5c(0x23b)]=null,_0x476bec[_0x1f4b5c(0x130)]=![];}async function setPresence(_0x3fab58,_0x4b0cdb){const _0x3a9304=a0_0x160a19;if(_0x3fab58[_0x3a9304(0x187)]===_0x4b0cdb)return;_0x3fab58[_0x3a9304(0x187)]=_0x4b0cdb,await _0x3fab58[_0x3a9304(0x1d5)]('system.isPresent',{'val':_0x4b0cdb,'ack':!![]});}async function executeAutomationAction(_0xd6eb89){const _0x46a9e3=a0_0x160a19;try{const _0x2f6286=await _0xd6eb89[_0x46a9e3(0x18d)](_0x46a9e3(0x29b)),_0x69f37a=await _0xd6eb89[_0x46a9e3(0x18d)](_0x46a9e3(0x1aa));if(_0x2f6286&&_0x2f6286[_0x46a9e3(0x20b)]&&_0x69f37a){const _0x226c62=_0x2f6286[_0x46a9e3(0x20b)];let _0x40d5b4=_0x69f37a[_0x46a9e3(0x20b)];try{_0x40d5b4=JSON['parse'](_0x40d5b4);}catch(_0x54febd){}_0xd6eb89[_0x46a9e3(0x206)]['info']('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x226c62+'\x20=\x20'+_0x40d5b4),await _0xd6eb89[_0x46a9e3(0x23c)](_0x226c62,_0x40d5b4);}else _0xd6eb89[_0x46a9e3(0x206)][_0x46a9e3(0x24e)](_0x46a9e3(0x2a7));}catch(_0x56b40f){_0xd6eb89[_0x46a9e3(0x206)]['error'](_0x46a9e3(0x164)+_0x56b40f['message']);}}async function processSensorEvent(_0x77d0d5,_0x1289bc,_0xd8e315,_0x4f1ad2){const _0x1a5fa7=a0_0x160a19;if(!_0x4f1ad2)return;const _0x5bd4bc=_0xd8e315[_0x1a5fa7(0x20b)],_0x452363=Date[_0x1a5fa7(0x1a6)](),_0x3e2125=_0x77d0d5[_0x1a5fa7(0x1ed)][_0x1289bc];_0x77d0d5['sensorLastValues'][_0x1289bc]=_0x5bd4bc;if(!_0x4f1ad2[_0x1a5fa7(0x1e7)]&&_0x3e2125!=undefined&&_0x3e2125==_0x5bd4bc)return;const _0x1eda1c=(_0x4f1ad2[_0x1a5fa7(0x1fe)]||'')[_0x1a5fa7(0x1df)](),_0x218868=_0x1eda1c[_0x1a5fa7(0x1ba)](_0x1a5fa7(0x231))||_0x1eda1c[_0x1a5fa7(0x1ba)](_0x1a5fa7(0x21b))||_0x1eda1c[_0x1a5fa7(0x1ba)](_0x1a5fa7(0x281))||_0x1eda1c[_0x1a5fa7(0x1ba)](_0x1a5fa7(0x18f));_0x77d0d5[_0x1a5fa7(0x237)]&&_0x218868&&recordThermodynamics(_0x77d0d5,_0x1289bc,_0x5bd4bc,_0x4f1ad2[_0x1a5fa7(0x200)]);const _0xf1e399={'timestamp':_0x452363,'id':_0x1289bc,'name':_0x4f1ad2[_0x1a5fa7(0x1fa)],'type':_0x4f1ad2[_0x1a5fa7(0x1fe)],'location':_0x4f1ad2[_0x1a5fa7(0x200)],'value':_0x5bd4bc};_0x77d0d5['eventHistory'][_0x1a5fa7(0x13e)](_0xf1e399);if(_0x77d0d5['eventHistory'][_0x1a5fa7(0x217)]>HISTORY_MAX_SIZE)_0x77d0d5[_0x1a5fa7(0x2a9)][_0x1a5fa7(0x162)]();await _0x77d0d5[_0x1a5fa7(0x1d5)](_0x1a5fa7(0x21c),{'val':JSON[_0x1a5fa7(0x232)](_0xf1e399),'ack':!![]}),await _0x77d0d5[_0x1a5fa7(0x1d5)](_0x1a5fa7(0x1b3),{'val':JSON[_0x1a5fa7(0x232)](_0x77d0d5[_0x1a5fa7(0x2a9)]),'ack':!![]});_0x77d0d5[_0x1a5fa7(0x237)]&&(_0x77d0d5[_0x1a5fa7(0x13d)][_0x1a5fa7(0x126)](_0xf1e399),await saveRawEventLog(_0x77d0d5),recordSequence(_0x77d0d5,_0xf1e399));if(_0x4f1ad2[_0x1a5fa7(0x285)]&&_0x5bd4bc===!![]){if(_0x77d0d5[_0x1a5fa7(0x187)]&&!_0x77d0d5[_0x1a5fa7(0x130)])startExitTimer(_0x77d0d5);else{if(!_0x77d0d5[_0x1a5fa7(0x187)])setPresence(_0x77d0d5,!![]);}}else{if(_0x4f1ad2[_0x1a5fa7(0x1fe)]===_0x1a5fa7(0x1e3)&&_0x5bd4bc===!![]){if(_0x77d0d5['exitTimer'])abortExitTimer(_0x77d0d5);if(!_0x77d0d5[_0x1a5fa7(0x187)]&&_0x77d0d5[_0x1a5fa7(0x224)]===SYSTEM_MODES[_0x1a5fa7(0x22b)])setPresence(_0x77d0d5,!![]);}}}async function recordThermodynamics(_0x1d28a5,_0x320d89,_0x5c7c54,_0x52b627){const _0x17fa2a=a0_0x160a19,_0x41270d=await getOutsideTemperatureNumeric(_0x1d28a5),_0x481370=await _0x1d28a5['getStateAsync']('LTM.trainingData.thermodynamics');let _0x5e916f=[];if(_0x481370&&_0x481370['val'])try{_0x5e916f=JSON[_0x17fa2a(0x148)](_0x481370[_0x17fa2a(0x20b)]);}catch(_0x4ba7d1){}_0x5e916f[_0x17fa2a(0x126)]({'ts':Date[_0x17fa2a(0x1a6)](),'room':_0x52b627||_0x17fa2a(0x1b4),'t_in':_0x5c7c54,'t_out':_0x41270d});if(_0x5e916f['length']>THERMO_LOG_SIZE)_0x5e916f[_0x17fa2a(0x14e)]();await _0x1d28a5[_0x17fa2a(0x1d5)](_0x17fa2a(0x2be),{'val':JSON[_0x17fa2a(0x232)](_0x5e916f),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x3c55e6){const _0x2452a7=a0_0x160a19;if(_0x3c55e6[_0x2452a7(0x296)][_0x2452a7(0x2b3)])try{const _0x48898c=await _0x3c55e6[_0x2452a7(0x1fc)](_0x3c55e6[_0x2452a7(0x296)][_0x2452a7(0x2b3)]);if(_0x48898c&&_0x48898c['val']!==undefined&&_0x48898c['val']!==null)return parseFloat(_0x48898c['val']);}catch(_0x769536){}const _0x57444f=_0x3c55e6[_0x2452a7(0x296)][_0x2452a7(0x1db)];if(!_0x3c55e6[_0x2452a7(0x296)][_0x2452a7(0x264)]||!_0x57444f)return null;try{let _0x555f97='';if(_0x57444f[_0x2452a7(0x1ba)](_0x2452a7(0x250)))_0x555f97=_0x57444f+'.Current.Temperature';else{if(_0x57444f[_0x2452a7(0x1ba)](_0x2452a7(0x2a8)))_0x555f97=_0x57444f+_0x2452a7(0x1cd);else{if(_0x57444f[_0x2452a7(0x1ba)](_0x2452a7(0x167)))_0x555f97=_0x57444f+_0x2452a7(0x229);else{if(_0x57444f['includes'](_0x2452a7(0x29c)))_0x555f97=_0x57444f+_0x2452a7(0x277);}}}if(_0x555f97){const _0x571dcf=await _0x3c55e6[_0x2452a7(0x1fc)](_0x555f97);if(_0x571dcf&&_0x571dcf[_0x2452a7(0x20b)]!==undefined&&_0x571dcf['val']!==null)return parseFloat(_0x571dcf['val']);}}catch(_0x406144){}return null;}async function recordSequence(_0x50e9f7,_0x41f1d7){const _0x294f3f=a0_0x160a19,_0x127fce=(_0x41f1d7['type']||'')['toLowerCase'](),_0x1175f5=[_0x294f3f(0x1e3),_0x294f3f(0x1ff),_0x294f3f(0x23f),_0x294f3f(0x144),_0x294f3f(0x22c),_0x294f3f(0x138),_0x294f3f(0x1c0),_0x294f3f(0x194),_0x294f3f(0x2b9),_0x294f3f(0x253),_0x294f3f(0x1de),'light',_0x294f3f(0x145),'switch',_0x294f3f(0x14d),_0x294f3f(0x14a),'lampe'];if(!_0x1175f5['some'](_0x25bfbd=>_0x127fce['includes'](_0x25bfbd)))return;if(!_0x41f1d7[_0x294f3f(0x1dd)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence['push']({'loc':_0x41f1d7[_0x294f3f(0x200)]||'Unknown','id':_0x41f1d7['id'],'ts':Date[_0x294f3f(0x1a6)]()}),sequenceTimer=setTimeout(async()=>{const _0x4c5f8f=_0x294f3f;if(activeSequence[_0x4c5f8f(0x217)]>0x1)await saveCompletedSequence(_0x50e9f7);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x3d01ff){const _0x3df036=a0_0x160a19;try{const _0x114757=await _0x3d01ff[_0x3df036(0x18d)](_0x3df036(0x269));let _0x46da70=[];if(_0x114757&&_0x114757[_0x3df036(0x20b)])try{_0x46da70=JSON[_0x3df036(0x148)](_0x114757[_0x3df036(0x20b)]);}catch(_0xfdd30b){}const _0xf6bc6f=activeSequence[0x0]['ts'],_0x44abe4=activeSequence[_0x3df036(0x1e1)](_0x2e9579=>({'loc':_0x2e9579[_0x3df036(0x18b)],'t_delta':Math['round']((_0x2e9579['ts']-_0xf6bc6f)/0x3e8)})),_0x2ca577={'timestamp':new Date(_0xf6bc6f)[_0x3df036(0x16e)](),'steps':_0x44abe4,'duration':Math['round']((activeSequence[activeSequence[_0x3df036(0x217)]-0x1]['ts']-_0xf6bc6f)/0x3e8),'daytime':new Date(_0xf6bc6f)['getHours']()};_0x46da70[_0x3df036(0x126)](_0x2ca577);if(_0x46da70[_0x3df036(0x217)]>MAX_TRAINING_SET_SIZE)_0x46da70['shift']();await _0x3d01ff[_0x3df036(0x1d5)]('LTM.trainingData.sequences',{'val':JSON['stringify'](_0x46da70),'ack':!![]}),runSecurityCheck(_0x3d01ff,_0x2ca577);}catch(_0x4c9cb3){_0x3d01ff[_0x3df036(0x206)]['error'](_0x3df036(0x202)+_0x4c9cb3['message']);}}function runSecurityCheck(_0x5b3870,_0x40c2a0){const _0x7372f0=a0_0x160a19;if(!_0x5b3870[_0x7372f0(0x237)])return;sendToPython(_0x5b3870,_0x7372f0(0x199),{'sequence':_0x40c2a0});}async function createDailyDigest(_0x7e9244){const _0x264905=a0_0x160a19;if(!_0x7e9244[_0x264905(0x237)])return;await _0x7e9244[_0x264905(0x1d5)](LTM_DP_STATUS,{'val':_0x264905(0x22f),'ack':!![]});if(!_0x7e9244[_0x264905(0x1af)]||_0x7e9244[_0x264905(0x13d)][_0x264905(0x217)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x7e9244[_0x264905(0x1d5)](LTM_DP_STATUS,{'val':_0x264905(0x259),'ack':!![]});return;}const _0x43dc6f=JSON['parse'](JSON[_0x264905(0x232)](_0x7e9244[_0x264905(0x13d)])),_0x2bce3f=_0x43dc6f['length'],_0x5816d8=_0x264905(0x262)+JSON[_0x264905(0x232)](_0x43dc6f);try{const _0x5b8431=await _0x7e9244[_0x264905(0x1af)][_0x264905(0x273)](_0x5816d8),_0x1d40dc=JSON[_0x264905(0x148)](_0x5b8431[_0x264905(0x2ac)][_0x264905(0x251)]()[_0x264905(0x13b)](/```json|```/g,'')[_0x264905(0x204)]()),_0xbd78f8={'timestamp':new Date()['toISOString'](),'eventCount':_0x2bce3f,'summary':_0x1d40dc[_0x264905(0x205)]||_0x264905(0x1a7),'activityLevel':_0x1d40dc['activityLevel']||_0x264905(0x14c),'systemMode':_0x7e9244['currentSystemMode']};_0x7e9244[_0x264905(0x1be)][_0x264905(0x126)](_0xbd78f8),await saveDailyDigests(_0x7e9244),_0x7e9244['rawEventLog']=[],await saveRawEventLog(_0x7e9244),await _0x7e9244[_0x264905(0x1d5)](LTM_DP_STATUS,{'val':_0x264905(0x195),'ack':!![]});if(_0x7e9244[_0x264905(0x237)])sendToPython(_0x7e9244,_0x264905(0x1d8),{'digest':_0xbd78f8});}catch(_0x25e22e){_0x7e9244[_0x264905(0x206)][_0x264905(0x220)](_0x25e22e[_0x264905(0x28d)]);}}async function runBaselineDriftAnalysis(_0xc50580){const _0x2c96eb=a0_0x160a19;if(!_0xc50580[_0x2c96eb(0x237)]||!_0xc50580[_0x2c96eb(0x1af)])return;const _0x2817a9=_0xc50580[_0x2c96eb(0x296)][_0x2c96eb(0x1f9)]||0xe;if(_0xc50580[_0x2c96eb(0x1be)]['length']<_0x2817a9+0x7){await _0xc50580['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x2c96eb(0x1a4),'ack':!![]});return;}const _0x1326d0=_0xc50580['dailyDigests'][_0x2c96eb(0x24b)](-_0x2817a9),_0x106802=_0xc50580['dailyDigests'][_0x2c96eb(0x24b)](0x0,_0xc50580[_0x2c96eb(0x1be)]['length']-_0x2817a9),_0x4510ec=_0x2c96eb(0x1d6)+JSON[_0x2c96eb(0x232)](_0x106802)+_0x2c96eb(0x25c)+JSON[_0x2c96eb(0x232)](_0x1326d0);try{const _0xfa02b5=await _0xc50580['geminiModel'][_0x2c96eb(0x273)](_0x4510ec),_0x437e62=JSON[_0x2c96eb(0x148)](_0xfa02b5[_0x2c96eb(0x2ac)]['text']()[_0x2c96eb(0x13b)](/```json|```/g,'')[_0x2c96eb(0x204)]());_0x437e62[_0x2c96eb(0x1e0)]&&(await _0xc50580['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x437e62[_0x2c96eb(0x1e0)],'ack':!![]}),await _0xc50580[_0x2c96eb(0x1d5)](LTM_DP_DRIFT_DETAILS,{'val':_0x437e62['driftDetails'],'ack':!![]}),await _0xc50580[_0x2c96eb(0x1d5)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x2c96eb(0x1a6)](),'ack':!![]}));}catch(_0x2d4f41){}}async function sendMorningBriefing(_0x259d89){const _0x162110=a0_0x160a19;if(!_0x259d89['geminiModel'])return;try{const _0x24f5f3='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x25109f=await _0x259d89[_0x162110(0x1af)]['generateContent'](_0x24f5f3),_0x3d6c58=_0x25109f[_0x162110(0x2ac)][_0x162110(0x251)]();sendNotification(_0x259d89,_0x162110(0x1e8)+_0x3d6c58);}catch(_0x3b53d8){_0x259d89[_0x162110(0x206)][_0x162110(0x220)](_0x162110(0x184)+_0x3b53d8[_0x162110(0x28d)]);}}function stopPythonService(_0x481842){const _0x5d41d5=a0_0x160a19;if(_0x481842[_0x5d41d5(0x1a1)]){try{_0x481842[_0x5d41d5(0x1a1)][_0x5d41d5(0x197)]();}catch(_0x1d319c){}_0x481842[_0x5d41d5(0x1a1)]=null;}}function sendToPython(_0x5a075e,_0x8f3a8a,_0x478397={}){const _0x5ec950=a0_0x160a19;if(!_0x5a075e['pythonProcess']||!_0x5a075e['pythonProcess'][_0x5ec950(0x2ae)][_0x5ec950(0x123)])return;const _0x174851=JSON[_0x5ec950(0x232)]({'command':_0x8f3a8a,..._0x478397});try{_0x5a075e[_0x5ec950(0x1a1)][_0x5ec950(0x2ae)][_0x5ec950(0x226)](_0x174851+'\x0a');}catch(_0x2ba2c6){}}function runPythonHealthCheck(_0x580e34){const _0x3e7910=a0_0x160a19;if(!_0x580e34[_0x3e7910(0x1be)]||_0x580e34['dailyDigests'][_0x3e7910(0x217)]<0x2)return;const _0xc64f80=_0x580e34[_0x3e7910(0x1be)][_0x3e7910(0x1e1)](_0x88a232=>{const _0x1ca3a7=_0x3e7910,_0xf6bbd1=(_0x88a232[_0x1ca3a7(0x29d)]||'')[_0x1ca3a7(0x1df)]();return ACTIVITY_LEVEL_MAP[_0xf6bbd1]||0x32;});sendToPython(_0x580e34,'ANALYZE_TREND',{'values':_0xc64f80,'tag':_0x3e7910(0x239)});}function handlePythonResult(_0x137372,_0x1aa357){const _0x27b9bb=a0_0x160a19;if(_0x1aa357[_0x27b9bb(0x1fe)]===_0x27b9bb(0x1c1))_0x137372[_0x27b9bb(0x206)][_0x27b9bb(0x12a)](_0x27b9bb(0x1b2));else{if(_0x1aa357['type']===_0x27b9bb(0x125)){const {anomaly_score:_0x4e02b7,is_anomaly:_0x41669d,threshold:_0x7a5fa2,explanation:_0x55857a}=_0x1aa357[_0x27b9bb(0x25d)];_0x137372[_0x27b9bb(0x206)][_0x27b9bb(0x15b)](_0x27b9bb(0x20a)+_0x4e02b7[_0x27b9bb(0x1ae)](0x5)+_0x27b9bb(0x1ce)+(_0x41669d?'ANOMALY':'OK')),_0x137372['setStateAsync'](_0x27b9bb(0x1c9),{'val':_0x4e02b7,'ack':!![]}),_0x137372['setStateAsync'](_0x27b9bb(0x29e),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x7a5fa2)_0x137372['setStateAsync']('analysis.security.currentThreshold',{'val':_0x7a5fa2,'ack':!![]});if(_0x41669d){let _0x37f403=_0x27b9bb(0x265)+_0x4e02b7[_0x27b9bb(0x1ae)](0x4)+')';if(_0x55857a&&_0x55857a!==_0x27b9bb(0x1b4))_0x37f403+=_0x27b9bb(0x12e)+_0x55857a;_0x137372[_0x27b9bb(0x1d5)](_0x27b9bb(0x207),{'val':!![],'ack':!![]}),_0x137372[_0x27b9bb(0x1d5)](_0x27b9bb(0x23a),{'val':_0x37f403,'ack':!![]}),sendNotification(_0x137372,_0x27b9bb(0x28b)+_0x37f403,![],!![]);}}else{if(_0x1aa357[_0x27b9bb(0x1fe)]===_0x27b9bb(0x290)){const _0x49bba5=_0x1aa357[_0x27b9bb(0x25d)][_0x27b9bb(0x275)]||'',_0x5995c1=_0x1aa357['payload']['threshold'],_0x3f11c2=_0x1aa357[_0x27b9bb(0x25d)][_0x27b9bb(0x286)]?'Success:\x20'+new Date()[_0x27b9bb(0x270)]()+'\x20('+_0x49bba5+')':'Failed:\x20'+_0x1aa357['payload'][_0x27b9bb(0x2b5)];_0x137372[_0x27b9bb(0x1d5)](_0x27b9bb(0x12d),{'val':_0x3f11c2,'ack':!![]});if(_0x1aa357[_0x27b9bb(0x25d)][_0x27b9bb(0x286)]&&_0x5995c1)_0x137372[_0x27b9bb(0x1d5)]('analysis.security.currentThreshold',{'val':_0x5995c1,'ack':!![]});}else{if(_0x1aa357['type']===_0x27b9bb(0x274)){const {patterns:_0x16e93e}=_0x1aa357[_0x27b9bb(0x25d)];if(_0x16e93e&&_0x16e93e[_0x27b9bb(0x217)]>0x0){_0x137372[_0x27b9bb(0x206)][_0x27b9bb(0x15b)](_0x27b9bb(0x263)+_0x16e93e[_0x27b9bb(0x217)]+_0x27b9bb(0x131)),_0x137372['setStateAsync']('analysis.automation.detectedPatterns',{'val':JSON[_0x27b9bb(0x232)](_0x16e93e),'ack':!![]});const _0x57b75d=_0x16e93e[0x0],_0x2902a8=_0x27b9bb(0x214)+_0x57b75d[_0x27b9bb(0x28c)]+'\x20('+(_0x57b75d[_0x27b9bb(0x142)]*0x64)[_0x27b9bb(0x1ae)](0x0)+'%)';_0x137372['setStateAsync'](_0x27b9bb(0x19b),{'val':!![],'ack':!![]}),_0x137372[_0x27b9bb(0x1d5)](_0x27b9bb(0x1c3),{'val':_0x2902a8,'ack':!![]});}else _0x137372[_0x27b9bb(0x206)][_0x27b9bb(0x15b)](_0x27b9bb(0x1ac)),_0x137372[_0x27b9bb(0x1d5)](_0x27b9bb(0x19b),{'val':![],'ack':!![]}),_0x137372[_0x27b9bb(0x1d5)](_0x27b9bb(0x2ba),{'val':'[]','ack':!![]});}else{if(_0x1aa357['type']===_0x27b9bb(0x169)){if(_0x1aa357[_0x27b9bb(0x25d)][_0x27b9bb(0x286)])try{const _0x5c8aa6=JSON[_0x27b9bb(0x148)](_0x1aa357['payload'][_0x27b9bb(0x275)]);if(_0x5c8aa6[_0x27b9bb(0x249)])_0x137372[_0x27b9bb(0x1d5)](_0x27b9bb(0x158),{'val':JSON[_0x27b9bb(0x232)](_0x5c8aa6[_0x27b9bb(0x249)]),'ack':!![]});if(_0x5c8aa6[_0x27b9bb(0x1d9)])_0x137372[_0x27b9bb(0x1d5)](_0x27b9bb(0x240),{'val':JSON['stringify'](_0x5c8aa6[_0x27b9bb(0x1d9)]),'ack':!![]});}catch(_0x14f90a){}}else{if(_0x1aa357['type']===_0x27b9bb(0x19d)){if(_0x1aa357['payload'][_0x27b9bb(0x286)])_0x137372[_0x27b9bb(0x206)][_0x27b9bb(0x15b)](_0x27b9bb(0x1cc));}else{if(_0x1aa357[_0x27b9bb(0x1fe)]==='HEALTH_RESULT')_0x137372[_0x27b9bb(0x1d5)](_0x27b9bb(0x27c),{'val':new Date()[_0x27b9bb(0x16e)](),'ack':!![]}),_0x137372[_0x27b9bb(0x1d5)]('analysis.health.isAnomaly',{'val':_0x1aa357[_0x27b9bb(0x25d)][_0x27b9bb(0x24f)],'ack':!![]});else{if(_0x1aa357[_0x27b9bb(0x1fe)]===_0x27b9bb(0x1e2))_0x137372['setStateAsync'](_0x27b9bb(0x1e9),{'val':_0x1aa357[_0x27b9bb(0x25d)][_0x27b9bb(0x280)],'ack':!![]}),_0x137372[_0x27b9bb(0x1d5)]('analysis.health.trendValue',{'val':_0x1aa357[_0x27b9bb(0x25d)][_0x27b9bb(0x190)],'ack':!![]});else{if(_0x1aa357[_0x27b9bb(0x1fe)]===_0x27b9bb(0x27a)){const {speed_trend:_0x31aedb}=_0x1aa357['payload'];if(_0x31aedb!==undefined)_0x137372['setStateAsync'](_0x27b9bb(0x25e),{'val':_0x31aedb,'ack':!![]});}else{if(_0x1aa357[_0x27b9bb(0x1fe)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x5910a8}=_0x1aa357[_0x27b9bb(0x25d)];if(_0x5910a8)_0x137372[_0x27b9bb(0x1d5)](_0x27b9bb(0x174),{'val':JSON['stringify'](_0x5910a8),'ack':!![]});}else{if(_0x1aa357[_0x27b9bb(0x1fe)]==='TOPOLOGY_RESULT'){const {data:_0x4243a1}=_0x1aa357[_0x27b9bb(0x25d)];_0x4243a1&&(_0x137372[_0x27b9bb(0x206)][_0x27b9bb(0x15b)]('ðŸ•¸ï¸\x20Topology\x20Map\x20updated.'),_0x137372[_0x27b9bb(0x1d5)]('analysis.security.topologyMatrix',{'val':JSON[_0x27b9bb(0x232)](_0x4243a1),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x1a92f2){const _0x47b928=a0_0x160a19;let _0x453082=_0x47b928(0x297);if(fs[_0x47b928(0x1b7)](installer[_0x47b928(0x284)]))_0x453082=installer['PYTHON_EXE'];try{const _0x537063=path['join'](__dirname,_0x47b928(0x2b7),'service.py');_0x1a92f2['pythonProcess']=spawn(_0x453082,[_0x537063]),_0x1a92f2[_0x47b928(0x1a1)]['stdout']['on'](_0x47b928(0x2bd),_0x359d59=>{const _0x27954d=_0x47b928,_0x1b6c14=_0x359d59['toString']()['split']('\x0a');_0x1b6c14[_0x27954d(0x230)](_0x1eb0d1=>{const _0x33b88b=_0x27954d,_0x41f03d=_0x1eb0d1['trim']();if(!_0x41f03d)return;if(_0x41f03d[_0x33b88b(0x13c)](_0x33b88b(0x1f0)))_0x1a92f2[_0x33b88b(0x206)][_0x33b88b(0x12a)](_0x33b88b(0x157)+_0x41f03d[_0x33b88b(0x16d)](0x5)[_0x33b88b(0x204)]());else{if(_0x41f03d[_0x33b88b(0x13c)](_0x33b88b(0x182)))try{const _0x47e93e=JSON[_0x33b88b(0x148)](_0x41f03d[_0x33b88b(0x16d)](0x8)[_0x33b88b(0x204)]());handlePythonResult(_0x1a92f2,_0x47e93e);}catch(_0xe54006){}}});}),_0x1a92f2[_0x47b928(0x1a1)]['on'](_0x47b928(0x222),_0x49b978=>{const _0x4922fa=_0x47b928;_0x1a92f2[_0x4922fa(0x1a1)]=null;});}catch(_0x265b9a){_0x1a92f2[_0x47b928(0x206)]['error'](_0x47b928(0x28f)+_0x265b9a[_0x47b928(0x28d)]);}}async function runAutopilot(_0x3aae54){const _0x3735eb=a0_0x160a19;_0x3aae54[_0x3735eb(0x206)][_0x3735eb(0x12a)]('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await runGeminiAnalysis(_0x3aae54),updateHealthVector(_0x3aae54),triggerGaitAnalysis(_0x3aae54),triggerEnergyPrediction(_0x3aae54);}async function triggerGaitAnalysis(_0x4598ac){const _0x3ca95d=a0_0x160a19;if(!_0x4598ac[_0x3ca95d(0x237)])return;try{const _0x33ada4=await _0x4598ac['getStateAsync']('LTM.trainingData.sequences');_0x33ada4&&_0x33ada4[_0x3ca95d(0x20b)]&&sendToPython(_0x4598ac,_0x3ca95d(0x23d),{'sequences':JSON[_0x3ca95d(0x148)](_0x33ada4[_0x3ca95d(0x20b)])});}catch(_0xa2e7d6){}}async function triggerEnergyPrediction(_0x4502dd){const _0x3a9864=a0_0x160a19;if(!_0x4502dd[_0x3a9864(0x237)])return;try{const _0x23943a=await getOutsideTemperatureNumeric(_0x4502dd);if(_0x23943a===null)return;const _0x33cf5a={},_0x25e104=_0x4502dd['config']['devices']||[];for(const _0x3a1766 of _0x25e104){if(_0x3a1766['type']==='temperature'&&_0x3a1766[_0x3a9864(0x200)]){const _0x13b8f4=_0x4502dd['sensorLastValues'][_0x3a1766['id']];if(_0x13b8f4!==undefined)_0x33cf5a[_0x3a1766['location']]=_0x13b8f4;}}Object[_0x3a9864(0x17b)](_0x33cf5a)['length']>0x0&&sendToPython(_0x4502dd,_0x3a9864(0x219),{'current_temps':_0x33cf5a,'t_out':_0x23943a});}catch(_0x417bb4){}}function updateHealthVector(_0x195d7d){const _0x580bf4=a0_0x160a19;if(!_0x195d7d[_0x580bf4(0x13d)]||_0x195d7d['rawEventLog']['length']===0x0)return;const _0x4eea49=new Array(0x60)[_0x580bf4(0x16f)](0x0),_0x484d39=new Date()['setHours'](0x0,0x0,0x0,0x0);_0x195d7d['rawEventLog'][_0x580bf4(0x230)](_0x59ae9c=>{const _0x4e516d=_0x580bf4,_0x338015=new Date(_0x59ae9c[_0x4e516d(0x146)]);if(_0x338015[_0x4e516d(0x1a2)]()>=_0x484d39){const _0x4fce98=_0x338015[_0x4e516d(0x23e)](),_0x147e9a=_0x338015['getMinutes'](),_0x2cf438=_0x4fce98*0x4+Math['floor'](_0x147e9a/0xf);if(_0x2cf438>=0x0&&_0x2cf438<0x60)_0x4eea49[_0x2cf438]++;}}),_0x195d7d[_0x580bf4(0x1d5)]('analysis.health.todayVector',{'val':JSON[_0x580bf4(0x232)](_0x4eea49),'ack':!![]});}async function getWeatherContext(_0x5672a9){const _0x2a2a97=a0_0x160a19;if(!_0x5672a9[_0x2a2a97(0x296)]['useWeather']||!_0x5672a9[_0x2a2a97(0x296)]['weatherInstance'])return _0x2a2a97(0x14f);try{const _0x1f7882=_0x5672a9[_0x2a2a97(0x296)][_0x2a2a97(0x1db)];let _0x2f2820=await _0x5672a9[_0x2a2a97(0x1fc)](_0x1f7882+_0x2a2a97(0x282));if(!_0x2f2820)_0x2f2820=await _0x5672a9[_0x2a2a97(0x1fc)](_0x1f7882+_0x2a2a97(0x229));let _0xa0e293=await _0x5672a9[_0x2a2a97(0x1fc)](_0x1f7882+_0x2a2a97(0x1d0));if(!_0xa0e293)_0xa0e293=await _0x5672a9['getForeignStateAsync'](_0x1f7882+'.forecast.current.state');if(_0x2f2820&&_0xa0e293)return _0x2f2820[_0x2a2a97(0x20b)]+_0x2a2a97(0x1ea)+_0xa0e293[_0x2a2a97(0x20b)];}catch(_0x3965dd){}return _0x2a2a97(0x185);}async function getCalendarContext(_0x46b381){const _0x4fb75b=a0_0x160a19;if(!_0x46b381['config']['useCalendar']||!_0x46b381['config'][_0x4fb75b(0x1c2)])return _0x4fb75b(0x17c);return'Keine\x20Termine.';}async function getCalendarNames(_0x5e8860,_0xb6a5fd){return[];}async function saveFeedback(_0x332a2a,_0x2a3f9d){const _0x3ea362=a0_0x160a19;_0x332a2a[_0x3ea362(0x206)][_0x3ea362(0x15b)](_0x3ea362(0x150)+_0x2a3f9d[_0x3ea362(0x1fd)]);}async function runGeminiAnalysis(_0x4b99f8,_0x4c96db=''){const _0x56f045=a0_0x160a19;if(!_0x4b99f8[_0x56f045(0x1af)])return;if(_0x4b99f8['eventHistory'][_0x56f045(0x217)]===0x0)return;const _0x11806e=_0x4b99f8[_0x56f045(0x2a9)][_0x56f045(0x24b)](0x0,0xf),_0x26f3df=await getWeatherContext(_0x4b99f8),_0xfb42be=_0x4b99f8[_0x56f045(0x224)],_0x44d307=PERSONA_MAPPING[_0x4b99f8[_0x56f045(0x296)][_0x56f045(0x258)]||_0x56f045(0x121)],_0x2dc84a=_0x4b99f8['config'][_0x56f045(0x28a)]||_0x56f045(0x1a3);let _0x463041=_0x56f045(0x1cf);try{const _0x3a1136=await _0x4b99f8[_0x56f045(0x18d)]('system.presenceWho');if(_0x3a1136&&_0x3a1136[_0x56f045(0x20b)])_0x463041=_0x3a1136[_0x56f045(0x20b)];}catch(_0x4ae3e0){}let _0x3565cf=![];try{const _0x5811b3=await _0x4b99f8[_0x56f045(0x18d)](_0x56f045(0x178));if(_0x5811b3&&_0x5811b3[_0x56f045(0x20b)])_0x3565cf=!![];}catch(_0x385d8a){}const _0x2a3861=_0x56f045(0x20d)+_0x44d307+'.\x20KONTEXT:\x20'+_0x2dc84a+_0x56f045(0x289)+_0xfb42be+_0x56f045(0x1ec)+_0x26f3df+_0x56f045(0x1bd)+_0x463041+_0x56f045(0x124)+JSON['stringify'](_0x11806e)+'.\x20EMERGENCY:\x20'+_0x4c96db+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0x509f5b=await _0x4b99f8[_0x56f045(0x1af)][_0x56f045(0x273)](_0x2a3861),_0x1f27eb=JSON[_0x56f045(0x148)](_0x509f5b['response'][_0x56f045(0x251)]()[_0x56f045(0x13b)](/```json|```/g,'')[_0x56f045(0x204)]());await _0x4b99f8[_0x56f045(0x1d5)](_0x56f045(0x173),{'val':JSON[_0x56f045(0x232)](_0x1f27eb),'ack':!![]});if(_0x1f27eb[_0x56f045(0x205)])await _0x4b99f8[_0x56f045(0x1d5)](_0x56f045(0x128),{'val':_0x1f27eb[_0x56f045(0x205)],'ack':!![]});const _0xa4414d={'timestamp':Date[_0x56f045(0x1a6)](),'id':Date[_0x56f045(0x1a6)]()[_0x56f045(0x17f)](),'analysis':{'activity':{'summary':_0x1f27eb[_0x56f045(0x205)],'isAlert':_0x1f27eb['isAlert'],'alertReason':_0x1f27eb[_0x56f045(0x1d2)]},'comfort':{'automationProposal':_0x1f27eb['automationProposal']}}};await updateAnalysisHistory(_0x4b99f8,_0xa4414d);const _0x2e06bb=_0x1f27eb['isAlert']||![];_0x2e06bb!==_0x4b99f8[_0x56f045(0x241)]&&(await _0x4b99f8[_0x56f045(0x1d5)](_0x56f045(0x207),{'val':_0x2e06bb,'ack':!![]}),_0x4b99f8[_0x56f045(0x241)]=_0x2e06bb,_0x2e06bb&&(await _0x4b99f8[_0x56f045(0x1d5)](_0x56f045(0x23a),{'val':_0x1f27eb['alertReason'],'ack':!![]}),sendNotification(_0x4b99f8,_0x56f045(0x2a5)+_0x1f27eb['alertReason'],![],_0x1f27eb[_0x56f045(0x16b)])));if(_0x1f27eb['automationProposal']&&_0x1f27eb[_0x56f045(0x1ca)]['detected']){await _0x4b99f8['setStateAsync'](_0x56f045(0x19b),{'val':!![],'ack':!![]}),await _0x4b99f8[_0x56f045(0x1d5)](_0x56f045(0x1c3),{'val':_0x1f27eb[_0x56f045(0x1ca)][_0x56f045(0x257)],'ack':!![]}),await _0x4b99f8['setStateAsync'](_0x56f045(0x29b),{'val':_0x1f27eb[_0x56f045(0x1ca)][_0x56f045(0x234)],'ack':!![]}),await _0x4b99f8[_0x56f045(0x1d5)](_0x56f045(0x1aa),{'val':JSON[_0x56f045(0x232)](_0x1f27eb[_0x56f045(0x1ca)]['targetValue']),'ack':!![]});if(_0x3565cf)executeAutomationAction(_0x4b99f8);}}catch(_0x3f972f){_0x4b99f8[_0x56f045(0x206)][_0x56f045(0x220)]('Gemini\x20Error:\x20'+_0x3f972f[_0x56f045(0x28d)]);}}async function startSystem(_0x307be6){const _0x22b94d=a0_0x160a19;_0x307be6['log'][_0x22b94d(0x15b)](_0x22b94d(0x288)),await initZombies(_0x307be6);try{_0x307be6[_0x22b94d(0x237)]=await checkLicense(_0x307be6[_0x22b94d(0x296)][_0x22b94d(0x1a0)]);}catch(_0x2aac5f){}if(!_0x307be6[_0x22b94d(0x296)][_0x22b94d(0x1c7)]||_0x307be6['config'][_0x22b94d(0x1c7)]<0.1)_0x307be6['config'][_0x22b94d(0x1c7)]=0xc;await initHistory(_0x307be6),await initSystemConfig(_0x307be6);if(_0x307be6[_0x22b94d(0x296)][_0x22b94d(0x139)])try{_0x307be6[_0x22b94d(0x221)]=new GoogleGenerativeAI(_0x307be6[_0x22b94d(0x296)][_0x22b94d(0x139)]),_0x307be6[_0x22b94d(0x1af)]=_0x307be6[_0x22b94d(0x221)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x22b94d(0x245)}}),_0x307be6['log']['info'](_0x22b94d(0x1b1));}catch(_0x59f449){_0x307be6[_0x22b94d(0x206)][_0x22b94d(0x220)](_0x22b94d(0x186)+_0x59f449[_0x22b94d(0x28d)]);}await createAllObjects(_0x307be6),await loadSystemMode(_0x307be6),await loadRawEventLog(_0x307be6),await loadDailyDigests(_0x307be6),_0x307be6['subscribeStates'](_0x22b94d(0x15e)),_0x307be6[_0x22b94d(0x223)](LTM_DP_TRIGGER_DIGEST),_0x307be6[_0x22b94d(0x223)](_0x22b94d(0x2ab)),_0x307be6['subscribeStates'](_0x22b94d(0x2a0)),_0x307be6['subscribeStates'](_0x22b94d(0x235)),_0x307be6[_0x22b94d(0x223)](_0x22b94d(0x178)),_0x307be6[_0x22b94d(0x223)](_0x22b94d(0x266)),_0x307be6[_0x22b94d(0x223)](_0x22b94d(0x247)),_0x307be6[_0x22b94d(0x223)](_0x22b94d(0x1b6)),_0x307be6[_0x22b94d(0x223)](_0x22b94d(0x1dc)),_0x307be6[_0x22b94d(0x223)](_0x22b94d(0x2a6)),await initSensorSubscriptions(_0x307be6),await initPresenceSubscriptions(_0x307be6),await setupTelegramListener(_0x307be6),setTimeout(()=>checkWifiPresence(_0x307be6),0x1388);if(_0x307be6[_0x22b94d(0x11e)])clearInterval(_0x307be6[_0x22b94d(0x11e)]);const _0x55ea90=_0x307be6[_0x22b94d(0x296)][_0x22b94d(0x203)]||0xf;_0x55ea90>0x0&&(_0x307be6[_0x22b94d(0x11e)]=setInterval(()=>{runAutopilot(_0x307be6);},_0x55ea90*0x3c*0x3e8)),schedulers[_0x22b94d(0x24a)](_0x307be6,()=>createDailyDigest(_0x307be6)),schedulers['setupModeResetScheduler'](_0x307be6),schedulers[_0x22b94d(0x2a3)](_0x307be6,()=>runBaselineDriftAnalysis(_0x307be6)),schedulers[_0x22b94d(0x227)](_0x307be6,()=>sendMorningBriefing(_0x307be6)),startPythonService(_0x307be6),setTimeout(()=>{_0x307be6['pythonProcess']&&(runPythonHealthCheck(_0x307be6),triggerGaitAnalysis(_0x307be6),triggerEnergyPrediction(_0x307be6)),updateHealthVector(_0x307be6);},0x1388);}class CogniLiving extends utils[a0_0x160a19(0x2b2)]{constructor(_0x16580c){const _0x2001d2=a0_0x160a19;super({..._0x16580c,'name':_0x2001d2(0x1f7)}),this[_0x2001d2(0x2a9)]=[],this[_0x2001d2(0x1d1)]=[],this[_0x2001d2(0x13d)]=[],this[_0x2001d2(0x1be)]=[],this['sensorLastValues']={},this[_0x2001d2(0x196)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x2001d2(0x187)]=!![],this[_0x2001d2(0x25b)]=null,this[_0x2001d2(0x23b)]=null,this['isGracePeriodActive']=![],this[_0x2001d2(0x221)]=null,this[_0x2001d2(0x1af)]=null,this['currentSystemMode']=SYSTEM_MODES['NORMAL'],this[_0x2001d2(0x237)]=![],this[_0x2001d2(0x241)]=![],this['systemUUID']=_0x2001d2(0x261),this[_0x2001d2(0x11e)]=null,this[_0x2001d2(0x2bb)]=null,this[_0x2001d2(0x246)]=null,this['driftAnalysisTimer']=null,this[_0x2001d2(0x2bc)]=null,this[_0x2001d2(0x1a1)]=null,this[_0x2001d2(0x192)]=![],this['on'](_0x2001d2(0x1b9),this['onReady']['bind'](this)),this['on'](_0x2001d2(0x26f),this[_0x2001d2(0x1e4)][_0x2001d2(0x168)](this)),this['on'](_0x2001d2(0x1b0),this['onUnload']['bind'](this)),this['on'](_0x2001d2(0x28d),this[_0x2001d2(0x188)][_0x2001d2(0x168)](this));}async['onReady'](){const _0x213cc3=a0_0x160a19;this[_0x213cc3(0x206)][_0x213cc3(0x15b)](_0x213cc3(0x160)+this[_0x213cc3(0x276)]+_0x213cc3(0x25a));if(!installer[_0x213cc3(0x136)](this,()=>startSystem(this)))return;}[a0_0x160a19(0x268)](_0x75a31e){const _0x3c5862=a0_0x160a19;if(this['analysisTimer'])clearInterval(this[_0x3c5862(0x11e)]);if(this[_0x3c5862(0x183)])clearInterval(this[_0x3c5862(0x183)]);if(this[_0x3c5862(0x2bb)])this[_0x3c5862(0x2bb)][_0x3c5862(0x1bf)]();if(this[_0x3c5862(0x246)])this[_0x3c5862(0x246)][_0x3c5862(0x1bf)]();if(this[_0x3c5862(0x2bc)])this['briefingJob']['cancel']();if(this[_0x3c5862(0x25b)])clearTimeout(this[_0x3c5862(0x25b)]);if(this['exitGraceTimer'])clearTimeout(this[_0x3c5862(0x23b)]);stopPythonService(this),_0x75a31e();}async['onStateChange'](_0x3c6f03,_0x463192){const _0x18a98a=a0_0x160a19;if(!_0x463192||this[_0x18a98a(0x192)])return;if(_0x3c6f03[_0x18a98a(0x1ba)]('telegram')&&_0x3c6f03[_0x18a98a(0x163)]('communicate.request')&&_0x463192[_0x18a98a(0x20b)]){await handleTelegramResponse(this,_0x463192['val']);return;}if(_0x3c6f03===this[_0x18a98a(0x1ad)]+'.'+SYSTEM_DP_MODE){if(_0x463192[_0x18a98a(0x20b)]&&Object[_0x18a98a(0x17a)](SYSTEM_MODES)[_0x18a98a(0x1ba)](_0x463192[_0x18a98a(0x20b)])){this[_0x18a98a(0x224)]=_0x463192[_0x18a98a(0x20b)];if(_0x463192['val']===SYSTEM_MODES[_0x18a98a(0x287)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x463192[_0x18a98a(0x1f4)])this['setState'](_0x3c6f03,{'val':this[_0x18a98a(0x224)],'ack':!![]});return;}if(!_0x463192[_0x18a98a(0x1f4)]){_0x3c6f03['includes'](_0x18a98a(0x15e))&&_0x463192[_0x18a98a(0x20b)]&&(this[_0x18a98a(0x166)](_0x3c6f03,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x3c6f03[_0x18a98a(0x1ba)]('triggerDailyDigest')&&_0x463192[_0x18a98a(0x20b)]){this[_0x18a98a(0x166)](_0x3c6f03,{'val':![],'ack':!![]});if(this[_0x18a98a(0x237)])createDailyDigest(this);}_0x3c6f03[_0x18a98a(0x1ba)](_0x18a98a(0x1c6))&&_0x463192[_0x18a98a(0x20b)]&&(this[_0x18a98a(0x166)](_0x3c6f03,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x3c6f03[_0x18a98a(0x1ba)]('automation.triggerAction')&&_0x463192['val']&&(this['setState'](_0x3c6f03,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x3c6f03['includes'](_0x18a98a(0x266))&&_0x463192[_0x18a98a(0x20b)]){this[_0x18a98a(0x166)](_0x3c6f03,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0xa13835=await this[_0x18a98a(0x18d)]('LTM.trainingData.sequences');if(_0xa13835&&_0xa13835[_0x18a98a(0x20b)]){const _0x3ef873=JSON[_0x18a98a(0x148)](_0xa13835['val']);this[_0x18a98a(0x206)]['info'](_0x18a98a(0x233)),this[_0x18a98a(0x1d5)](_0x18a98a(0x12d),{'val':_0x18a98a(0x279),'ack':!![]}),sendToPython(this,'TRAIN_SECURITY',{'sequences':_0x3ef873});}}catch(_0x13a2cf){this[_0x18a98a(0x206)]['error']('Training\x20Error:\x20'+_0x13a2cf[_0x18a98a(0x28d)]);}}if(_0x3c6f03[_0x18a98a(0x1ba)](_0x18a98a(0x247))&&_0x463192[_0x18a98a(0x20b)]){this[_0x18a98a(0x166)](_0x3c6f03,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x15dc78=await this[_0x18a98a(0x18d)](LTM_DP_DAILY_DIGESTS);if(_0x15dc78&&_0x15dc78['val'])sendToPython(this,'TRAIN_HEALTH',{'digests':JSON[_0x18a98a(0x148)](_0x15dc78[_0x18a98a(0x20b)])});}catch(_0x5a126b){}}if(_0x3c6f03['includes'](_0x18a98a(0x1b6))&&_0x463192[_0x18a98a(0x20b)]){this[_0x18a98a(0x166)](_0x3c6f03,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x23309b=await this[_0x18a98a(0x18d)]('LTM.trainingData.thermodynamics');if(_0x23309b&&_0x23309b[_0x18a98a(0x20b)])sendToPython(this,_0x18a98a(0x212),{'points':JSON['parse'](_0x23309b['val'])});}catch(_0x404173){}}if(_0x3c6f03[_0x18a98a(0x1ba)](_0x18a98a(0x1dc))&&_0x463192[_0x18a98a(0x20b)]){this[_0x18a98a(0x166)](_0x3c6f03,{'val':![],'ack':!![]});if(this[_0x18a98a(0x237)])try{const _0x19d261=await this[_0x18a98a(0x18d)](LTM_DP_RAW_LOG);_0x19d261&&_0x19d261['val']&&(this[_0x18a98a(0x206)][_0x18a98a(0x15b)](_0x18a98a(0x1c4)),sendToPython(this,_0x18a98a(0x18a),{'events':JSON['parse'](_0x19d261[_0x18a98a(0x20b)])}));}catch(_0x3ffee1){}}if(_0x3c6f03['includes']('analysis.training.triggerTopology')&&_0x463192['val']){this[_0x18a98a(0x166)](_0x3c6f03,{'val':![],'ack':!![]});if(this[_0x18a98a(0x237)])try{const _0x2c7f8e=await this['getStateAsync'](_0x18a98a(0x269));if(_0x2c7f8e&&_0x2c7f8e['val']){const _0x2dbf42=JSON[_0x18a98a(0x148)](_0x2c7f8e[_0x18a98a(0x20b)]);this[_0x18a98a(0x206)][_0x18a98a(0x15b)](_0x18a98a(0x1f2)),sendToPython(this,'BUILD_TOPOLOGY',{'sequences':_0x2dbf42});}}catch(_0x472fb0){this['log'][_0x18a98a(0x220)](_0x18a98a(0x12b)+_0x472fb0[_0x18a98a(0x28d)]);}}return;}if(this[_0x18a98a(0x296)][_0x18a98a(0x271)]&&this['config']['presenceDevices'][_0x18a98a(0x1ba)](_0x3c6f03)){await checkWifiPresence(this);return;}const _0x1a529f=(this[_0x18a98a(0x296)][_0x18a98a(0x29f)]||[])[_0x18a98a(0x27e)](_0x2d7f8f=>_0x2d7f8f['id']===_0x3c6f03);if(_0x1a529f)processSensorEvent(this,_0x3c6f03,_0x463192,_0x1a529f);}async['onMessage'](_0x52bebd){const _0x4e8502=a0_0x160a19;if(typeof _0x52bebd===_0x4e8502(0x1f6)&&_0x52bebd[_0x4e8502(0x28d)]){if(_0x52bebd[_0x4e8502(0x16a)]===_0x4e8502(0x129)){const _0x467b8a=_0x52bebd['message'][_0x4e8502(0x1d4)]||this['config'][_0x4e8502(0x139)];if(!_0x467b8a)return this[_0x4e8502(0x1f5)](_0x52bebd['from'],_0x52bebd[_0x4e8502(0x16a)],{'success':![],'message':_0x4e8502(0x272)},_0x52bebd[_0x4e8502(0x292)]);try{const _0x283cbe=new GoogleGenerativeAI(_0x467b8a),_0x36cce2=_0x283cbe[_0x4e8502(0x172)]({'model':GEMINI_MODEL}),_0x2a3346=await _0x36cce2[_0x4e8502(0x273)]('Hi');this['sendTo'](_0x52bebd[_0x4e8502(0x254)],_0x52bebd[_0x4e8502(0x16a)],{'success':!![],'message':_0x4e8502(0x213)+_0x2a3346['response'][_0x4e8502(0x251)]()},_0x52bebd[_0x4e8502(0x292)]);}catch(_0xc5a5c6){this[_0x4e8502(0x1f5)](_0x52bebd[_0x4e8502(0x254)],_0x52bebd[_0x4e8502(0x16a)],{'success':![],'message':_0x4e8502(0x242)+_0xc5a5c6[_0x4e8502(0x28d)]},_0x52bebd[_0x4e8502(0x292)]);}}else{if(_0x52bebd[_0x4e8502(0x16a)]===_0x4e8502(0x1ab)){const _0x54a953=await getWeatherContext(this),_0x550542=await getCalendarContext(this);this[_0x4e8502(0x1f5)](_0x52bebd[_0x4e8502(0x254)],_0x52bebd[_0x4e8502(0x16a)],{'success':!![],'weather':_0x54a953,'calendar':_0x550542},_0x52bebd[_0x4e8502(0x292)]);}else{if(_0x52bebd[_0x4e8502(0x16a)]===_0x4e8502(0x215)){if(!this['isProVersion'])return this[_0x4e8502(0x1f5)](_0x52bebd['from'],_0x52bebd[_0x4e8502(0x16a)],{'success':![],'isPro':![]},_0x52bebd['callback']);let _0x1ca7ec={'status':_0x4e8502(0x26a)};try{const _0x347414=await this[_0x4e8502(0x18d)](LTM_DP_DRIFT_STATUS);_0x1ca7ec[_0x4e8502(0x1eb)]=_0x347414?_0x347414[_0x4e8502(0x20b)]:_0x4e8502(0x26a);}catch(_0x3b7857){}this[_0x4e8502(0x1f5)](_0x52bebd['from'],_0x52bebd[_0x4e8502(0x16a)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x4e8502(0x1be)],'driftAnalysis':_0x1ca7ec,'analysisHistory':this[_0x4e8502(0x1d1)]},_0x52bebd[_0x4e8502(0x292)]);}else{if(_0x52bebd[_0x4e8502(0x16a)]===_0x4e8502(0x238)){const _0x4a4128=this[_0x4e8502(0x1be)]['length'],_0x630a81=new Date(),_0x130a43=new Date(_0x630a81['getFullYear'](),_0x630a81[_0x4e8502(0x2b0)](),_0x630a81['getDate']())[_0x4e8502(0x1a2)](),_0x26c6a4=this[_0x4e8502(0x13d)][_0x4e8502(0x2b4)](_0x5996bf=>new Date(_0x5996bf[_0x4e8502(0x146)])[_0x4e8502(0x1a2)]()>_0x130a43)[_0x4e8502(0x217)],_0x5288ad=new Array(0x18)[_0x4e8502(0x16f)](0x0);this[_0x4e8502(0x13d)][_0x4e8502(0x230)](_0x322f93=>{const _0x40ebd6=_0x4e8502,_0x45f3dc=new Date(_0x322f93[_0x40ebd6(0x146)]);if(_0x45f3dc['getTime']()>_0x130a43)_0x5288ad[_0x45f3dc['getHours']()]++;});let _0x7481ea={'status':'N/A'};try{const _0x81f3e8=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x7481ea[_0x4e8502(0x1eb)]=_0x81f3e8?_0x81f3e8['val']:'N/A';}catch(_0x1348b1){}let _0x87f49d='';try{const _0x7d0ea0=await this['getStateAsync'](_0x4e8502(0x2a2));_0x87f49d=_0x7d0ea0?_0x7d0ea0[_0x4e8502(0x20b)]:'';}catch(_0x355860){}let _0x200eef=null;!this['geminiModel']&&(_0x200eef=this[_0x4e8502(0x296)][_0x4e8502(0x139)]?_0x4e8502(0x208):_0x4e8502(0x14b));let _0x934a2c={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x5a6d55=await this['getStateAsync']('analysis.automation.patternDetected');if(_0x5a6d55&&_0x5a6d55[_0x4e8502(0x20b)]){_0x934a2c['detected']=!![];const _0x401361=await this[_0x4e8502(0x18d)](_0x4e8502(0x1c3));_0x934a2c[_0x4e8502(0x257)]=_0x401361?_0x401361[_0x4e8502(0x20b)]:'';const _0x2ab7f7=await this['getStateAsync'](_0x4e8502(0x29b));_0x934a2c[_0x4e8502(0x234)]=_0x2ab7f7?_0x2ab7f7[_0x4e8502(0x20b)]:'';const _0x22ba6e=await this[_0x4e8502(0x18d)](_0x4e8502(0x1aa));_0x934a2c[_0x4e8502(0x11d)]=_0x22ba6e?_0x22ba6e['val']:'';}const _0x256dd5=await this['getStateAsync'](_0x4e8502(0x178));_0x934a2c[_0x4e8502(0x243)]=_0x256dd5?!!_0x256dd5[_0x4e8502(0x20b)]:![];}catch(_0x4a4fb5){}this['sendTo'](_0x52bebd[_0x4e8502(0x254)],_0x52bebd[_0x4e8502(0x16a)],{'success':!![],'eventHistory':this[_0x4e8502(0x2a9)][_0x4e8502(0x24b)](0x0,0xf),'stats':{'digestCount':_0x4a4128,'eventCountToday':_0x26c6a4,'hourlyActivity':_0x5288ad,'driftStatus':_0x7481ea[_0x4e8502(0x1eb)],'isPresent':this[_0x4e8502(0x187)],'presenceWho':_0x87f49d,'minDays':this['config'][_0x4e8502(0x1f1)]||0x7,'stbDays':this[_0x4e8502(0x296)]['ltmStbWindowDays']||0xe,'ltbDays':this['config']['ltmLtbWindowDays']||0x3c,'systemError':_0x200eef},'automation':_0x934a2c},_0x52bebd['callback']);}else{if(_0x52bebd[_0x4e8502(0x16a)]===_0x4e8502(0x26e))try{const _0x54b2f5=await scanner[_0x4e8502(0x15d)](this,_0x52bebd['message']||{});this[_0x4e8502(0x1f5)](_0x52bebd[_0x4e8502(0x254)],_0x52bebd[_0x4e8502(0x16a)],{'success':!![],'devices':_0x54b2f5},_0x52bebd[_0x4e8502(0x292)]);}catch(_0x37086f){this[_0x4e8502(0x1f5)](_0x52bebd['from'],_0x52bebd[_0x4e8502(0x16a)],{'success':![],'error':_0x37086f['message']},_0x52bebd[_0x4e8502(0x292)]);}else{if(_0x52bebd[_0x4e8502(0x16a)]===_0x4e8502(0x1cb)){const _0x1fc19b=await this[_0x4e8502(0x19e)](_0x4e8502(0x156),_0x4e8502(0x12c)),_0xe8c3c5=[];if(_0x1fc19b)for(const _0x35764f in _0x1fc19b){const _0x321229=_0x1fc19b[_0x35764f],_0x41f1dd=(_0x321229[_0x4e8502(0x21a)]&&typeof _0x321229[_0x4e8502(0x21a)]['name']==='object'?_0x321229['common']['name']['de']:_0x321229['common'][_0x4e8502(0x1fa)])||_0x321229[_0x4e8502(0x21a)][_0x4e8502(0x1fa)];_0xe8c3c5['push']({'id':_0x35764f,'name':_0x41f1dd});}const _0x5d13f7=await this['getForeignObjectsAsync'](_0x4e8502(0x159),_0x4e8502(0x12c)),_0x292924=[];if(_0x5d13f7)for(const _0x25b20d in _0x5d13f7){const _0x4fac5a=_0x5d13f7[_0x25b20d],_0x3575c3=(_0x4fac5a[_0x4e8502(0x21a)]&&typeof _0x4fac5a[_0x4e8502(0x21a)]['name']===_0x4e8502(0x1f6)?_0x4fac5a[_0x4e8502(0x21a)][_0x4e8502(0x1fa)]['de']:_0x4fac5a[_0x4e8502(0x21a)][_0x4e8502(0x1fa)])||_0x25b20d[_0x4e8502(0x225)]('.')[_0x4e8502(0x162)]();_0x292924['push'](_0x3575c3);}this['sendTo'](_0x52bebd[_0x4e8502(0x254)],_0x52bebd[_0x4e8502(0x16a)],{'success':!![],'enums':_0xe8c3c5,'rooms':_0x292924},_0x52bebd[_0x4e8502(0x292)]);}else{if(_0x52bebd[_0x4e8502(0x16a)]===_0x4e8502(0x260)){const _0x39e81d=_0x52bebd[_0x4e8502(0x28d)]['instance'];if(!_0x39e81d)return this[_0x4e8502(0x1f5)](_0x52bebd['from'],_0x52bebd[_0x4e8502(0x16a)],{'success':![],'error':'No\x20instance'},_0x52bebd[_0x4e8502(0x292)]);const _0x313b6b=await getCalendarNames(this,_0x39e81d);this[_0x4e8502(0x1f5)](_0x52bebd[_0x4e8502(0x254)],_0x52bebd[_0x4e8502(0x16a)],{'success':!![],'names':_0x313b6b},_0x52bebd[_0x4e8502(0x292)]);}else{if(_0x52bebd[_0x4e8502(0x16a)]===_0x4e8502(0x2ad)){const {targetId:_0x2651a8,targetValue:_0x5751a7}=_0x52bebd[_0x4e8502(0x28d)];this[_0x4e8502(0x206)][_0x4e8502(0x15b)]('ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20'+_0x2651a8+_0x4e8502(0x25f)+_0x5751a7),await this[_0x4e8502(0x1d5)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this['setStateAsync'](_0x4e8502(0x1c3),{'val':_0x4e8502(0x154)+_0x2651a8,'ack':!![]}),await this[_0x4e8502(0x1d5)](_0x4e8502(0x29b),{'val':_0x2651a8,'ack':!![]}),await this['setStateAsync'](_0x4e8502(0x1aa),{'val':_0x5751a7,'ack':!![]}),this[_0x4e8502(0x1f5)](_0x52bebd['from'],_0x52bebd['command'],{'success':!![]},_0x52bebd[_0x4e8502(0x292)]);}else{if(_0x52bebd[_0x4e8502(0x16a)]==='submitFeedback'){const {historyId:_0x26f65c,rating:_0x5af73f,comment:_0x42a25b,alertReason:_0x36839a}=_0x52bebd[_0x4e8502(0x28d)];_0x26f65c&&_0x5af73f?(await saveFeedback(this,{'timestamp':Date[_0x4e8502(0x1a6)](),'historyId':_0x26f65c,'rating':_0x5af73f,'comment':_0x42a25b,'alertReason':_0x36839a}),this[_0x4e8502(0x1f5)](_0x52bebd[_0x4e8502(0x254)],_0x52bebd['command'],{'success':!![]},_0x52bebd['callback'])):this['sendTo'](_0x52bebd['from'],_0x52bebd[_0x4e8502(0x16a)],{'success':![],'error':_0x4e8502(0x137)},_0x52bebd[_0x4e8502(0x292)]);}else _0x52bebd['command']==='dismissAutomation'&&(this[_0x4e8502(0x206)][_0x4e8502(0x15b)](_0x4e8502(0x1d7)),await this['setStateAsync'](_0x4e8502(0x19b),{'val':![],'ack':!![]}),await this[_0x4e8502(0x1d5)](_0x4e8502(0x1c3),{'val':'','ack':!![]}),this[_0x4e8502(0x1f5)](_0x52bebd['from'],_0x52bebd[_0x4e8502(0x16a)],{'success':!![]},_0x52bebd[_0x4e8502(0x292)]));}}}}}}}}}}}if(require[a0_0x160a19(0x193)]!==module)module[a0_0x160a19(0x134)]=_0x1848fa=>new CogniLiving(_0x1848fa);else new CogniLiving();