const a0_0xe07aa0=a0_0x54ad;(function(_0x106cc6,_0x1ca530){const _0x159dc2=a0_0x54ad,_0x4187d9=_0x106cc6();while(!![]){try{const _0xac7c81=-parseInt(_0x159dc2(0x275))/0x1*(parseInt(_0x159dc2(0x32a))/0x2)+parseInt(_0x159dc2(0x35d))/0x3*(-parseInt(_0x159dc2(0x2be))/0x4)+-parseInt(_0x159dc2(0x2dd))/0x5*(parseInt(_0x159dc2(0x374))/0x6)+parseInt(_0x159dc2(0x32f))/0x7*(parseInt(_0x159dc2(0x2f1))/0x8)+-parseInt(_0x159dc2(0x341))/0x9+-parseInt(_0x159dc2(0x379))/0xa*(parseInt(_0x159dc2(0x23b))/0xb)+parseInt(_0x159dc2(0x342))/0xc;if(_0xac7c81===_0x1ca530)break;else _0x4187d9['push'](_0x4187d9['shift']());}catch(_0x4d6911){_0x4187d9['push'](_0x4187d9['shift']());}}}(a0_0x29e5,0x2d9b5));const a0_0x37c242=(function(){let _0x2cbcb9=!![];return function(_0x5942b7,_0x5611b3){const _0x2e2a2e=_0x2cbcb9?function(){const _0x3f8acd=a0_0x54ad;if(_0x5611b3){const _0x1cc8af=_0x5611b3[_0x3f8acd(0x264)](_0x5942b7,arguments);return _0x5611b3=null,_0x1cc8af;}}:function(){};return _0x2cbcb9=![],_0x2e2a2e;};}()),a0_0x478fce=a0_0x37c242(this,function(){const _0x2c4349=a0_0x54ad;return a0_0x478fce[_0x2c4349(0x2b6)]()[_0x2c4349(0x2f9)](_0x2c4349(0x37d))['toString']()[_0x2c4349(0x346)](a0_0x478fce)[_0x2c4349(0x2f9)]('(((.+)+)+)+$');});a0_0x478fce();function a0_0x54ad(_0x3affe0,_0x16b49e){const _0x1c70f9=a0_0x29e5();return a0_0x54ad=function(_0x478fce,_0x37c242){_0x478fce=_0x478fce-0x1ce;let _0x29e5b5=_0x1c70f9[_0x478fce];return _0x29e5b5;},a0_0x54ad(_0x3affe0,_0x16b49e);}'use strict';const utils=require(a0_0xe07aa0(0x2f2)),{GoogleGenerativeAI}=require(a0_0xe07aa0(0x34a)),schedule=require('node-schedule'),HISTORY_MAX_SIZE=0x32,FEEDBACK_MAX_SIZE=0x14,GEMINI_MODEL=a0_0xe07aa0(0x1d1),ANALYSIS_HISTORY_MAX_SIZE=0x64,RAW_LOG_MAX_SIZE=0x5dc,DAILY_DIGEST_MAX_SIZE_LIMIT=0xb4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,LTM_SCHEDULE='0\x203\x20*\x20*\x20*',LTM_DP_RAW_LOG=a0_0xe07aa0(0x2ed),LTM_DP_DAILY_DIGESTS=a0_0xe07aa0(0x267),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST=a0_0xe07aa0(0x34c),LTM_DP_BASELINE_STATUS=a0_0xe07aa0(0x269),LTM_DP_DRIFT_CHANNEL=a0_0xe07aa0(0x1ea),LTM_DP_DRIFT_STATUS=a0_0xe07aa0(0x368),LTM_DP_DRIFT_DETAILS=a0_0xe07aa0(0x244),LTM_DP_DRIFT_LAST_CHECK=a0_0xe07aa0(0x21b),SYSTEM_DP_MODE=a0_0xe07aa0(0x1f6),MODE_RESET_SCHEDULE=a0_0xe07aa0(0x2c7),SYSTEM_MODES={'NORMAL':a0_0xe07aa0(0x2fb),'VACATION':a0_0xe07aa0(0x2d1),'PARTY':a0_0xe07aa0(0x215),'GUEST':a0_0xe07aa0(0x378)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0xe07aa0(0x30e)],SYSTEM_MODES[a0_0xe07aa0(0x337)]],EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,PERSONA_MAPPING={'generic':a0_0xe07aa0(0x1ce),'senior_aal':'PRIORIT√ÑT:\x20Gesundheit\x20und\x20Sicherheit\x20f√ºr\x20Senioren\x20(AAL).\x20Erkenne\x20Inaktivit√§t,\x20potenzielle\x20St√ºrze\x20(indirekt),\x20Schlafunterbrechungen\x20und\x20n√§chtliche\x20Unruhe.','family':a0_0xe07aa0(0x214),'single_comfort':'Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung.','security':'PRIORIT√ÑT:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungew√∂hnliche\x20Anwesenheit.'};function a0_0x29e5(){const _0x4e7c84=['analysis.lastResult','normal','level.dimmer','briefingTime','values','weather','08:00','lampe','Sleep\x20Score\x20(0-100)','AI\x20Emergency\x20Status','generateContent','rating','includes','createDailyDigest','timestamp','analysis.analysisHistory','length','k√ºche','json','notifyPushoverEnabled','PARTY','geminiModel','\x0a!!!\x20END\x20WARNING\x20!!!\x0a','text.alarm','haust√ºr','main','occupancy','javascript.0.script','CONNECTION','dailyDigests','extendObjectAsync','DIRECTION','setupDriftAnalysisScheduler','analysis.automation','baselineDrift','STICKY_UNREACH','presence','Sending\x20notification:\x20\x22','N/A\x20(Learning)','getStateAsync','toISOString','cancel','currentSystemMode','analysisInterval','object','analysis.health','inactivityThresholdHours','link_quality','2hPuleJ','stateChange','checkSystemObjects','activity','mode','224kOUCOa','selectedFunctionIds','Starting\x20Smart\x20Scan\x20with\x20filters:\x20','Garten','analysis.trigger','Action','Licht','retry','GUEST','N/A','updateAnalysisHistory','LTM','capabilities','members','Restlessness\x20Level','\x20hours.\x20The\x20resident\x20might\x20be\x20incapacitated.\x20Risk\x20level:\x20HIGH.','effect','icon','198441niZBzN','13845540boMtlF','uniqueid','events.history','material.','constructor','patternDetected','Rauchmelder','Schlafzimmer','@google/generative-ai','\x20sent','LTM.triggerDailyDigest','WORKING','notifyPushoverInstance','some','analysis.isEmergency','val','systemConfig','replace','admin.','sound','common','wohnungst√ºr','temp','Subscribing\x20to\x20','ltmLtbWindowDays','saveDailyDigests','analysis.alertReason','915891aucGds','summary','cogni-living\x20adapter\x20starting\x20(v','N/A\x20(Pro\x20Feature)','User\x20Feedback:\x20Alarm\x20\x22','notes','automationProposal','livingContext','presenceDevices','processSensorEvent','number','LTM.driftAnalysis.baselineDrift','Trigger\x20Analysis','setupLtmScheduler','slice','loadHistoryFromState','notifyPushoverRecipient','K√ºche','Gemini\x20AI\x20initialized.','getSystemUUID','onUnload','generic','VACATION','3840qZwZUz','triggerBriefing','string','unknown','guest','30KyyuyC','loadDailyDigests','Raw\x20Log','detectionState','(((.+)+)+)+$','Flur','analysis.activitySummary','rain','scheduleJob','trim','briefingJob','\x20min).\x20Watchdog\x20Limit:\x20','Adapter','LOWBAT','\x0a\x20\x20\x20\x20\x20\x20\x20\x20EVENTS:\x20','location','indicator.alarm','Party','boolean','Aktiv\x20(','Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','sendTo','t√ºr','models/gemini-flash-latest','System\x20Mode','ready','sleepScore','onMessage','saveRawEventLog','suggestedAction','firmware','Generating\x20Morning\x20Briefing...','precip','temperatur','Normal','map','[TEST]\x20','find','ltmDriftCheckIntervalHours','details','split','openweathermap.','now','info','Processing\x20Status','events.history_debug_00','sendNotification','toLowerCase','LTM.driftAnalysis','briefingEnabled','value.humidity','getForeignObjectAsync','analysis.automation.suggestedAction','ltmJob','motion','subscribeForeignStatesAsync','stringify','Logbook','push','\x0aFEEDBACK:\x0a','system.mode','createAllObjects','OPERATING_VOLTAGE','enum.rooms.*','analysisHistory','No\x20Key','getForeignObjectsAsync','Cogni-Living\x20Alert','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','restlessness','none','smoke','.\x0a\x20\x20\x20\x20\x20\x20\x20\x20','runGeminiAnalysis','feedbackHistory','scriptEnabled','runAutopilot','Deaktiviert\x20(Pro-Feature)','setPresence','notifyTelegramInstance','health','native','DUTYCYCLE','isGracePeriodActive','eventHistory','application/json','analysis.triggerBriefing','process','hue','log','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.','party','notifyWhatsappInstance','alert','system.','events.lastEvent','startExitTimer','LTM.driftAnalysis.lastCheck','Activity\x20Summary','setHours','config','online','Lernphase\x20(','logDuplicates','eingang','system.isPresent','notifyEmailInstance','rauch','analysis.health.notes','catch','toLocaleString','ALARM','SECTION','licenseKey','analysis.deviationFromBaseline','temperature','/100\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Aktivit√§t\x20seit\x2004:00\x20Uhr:\x20','Baseline:\x20Inactive\x20(Pro\x20Feature).','channel','checkLtmObjects','setupBriefingScheduler','Gast','modelid','getForeignStateAsync','uuid','Daily\x20Digests','analysis.isAlert','lastAlertState','state','1199737rGIFbj','fire','switch.light','diele','daswetter.','analysis.history_debug_02','analysis.health.sleepScore','weatherunderground.','Urlaub','LTM.driftAnalysis.driftDetails','comfort','driftAnalysisTimer','productname','test','\x0a\x20\x20\x20\x20\x20\x20\x20\x20INPUT:\x20','bind','ROLLE:\x20F√ºrsorglicher\x20Familien-Assistent.\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht\x20an\x20die\x20Angeh√∂rigen.\x0a\x20\x20\x20\x20\x20\x20\x20\x20TON:\x20Freundlich,\x20professionell,\x20kurz.\x0a\x20\x20\x20\x20\x20\x20\x20\x20PERSONA:\x20','rawEventLog','alertReason','[Test]\x20Notification','message','enum','callback','setState','genAI','Daily\x20Digest\x20Error:\x20','button','text','startsWith','devices','sendMorningBriefing','parse','sensor.door','mac\x20address','checkLtmDriftObjects','lastCheck','Briefing\x20Error:\x20','enum.functions.*','ltmStbWindowDays','Success','manufacturer','apply','siren','isPresent','LTM.dailyDigests','Missing\x20data','LTM.baselineStatus','notifySignalInstance','ack','wind','schlaf','setupModeResetScheduler','analysis.history_debug_04','Last\x20raw\x20event','analysis.health.restlessness','splice','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20OUTPUT:\x20Nur\x20der\x20Nachrichtentext\x20(kein\x20JSON).\x20Z.B.\x20\x22Guten\x20Morgen!\x20Die\x20Nacht\x20war\x20ruhig...\x22','onReady','306587JEhDZS','status','archetype','analysis.comfortSummary','flot.','\x0a\x0aA\x20(STB):\x0a','sensor.window','Presence\x20Status','Bewegung','Fehler:\x20','checkWifiPresence','licht','\x20presence\x20devices...','isProVersion','analysis.automation.patternDetected','loadRawEventLog','Feedback\x20Log','Badezimmer','UNREACH','Creating\x20Daily\x20Digest\x20from\x20','analysis.feedbackHistory','\x20sensors...','deviationFromBaseline','level','history','testApiKey','driftDetails','isExit','griff','system.meta.uuid','yr.','getObjectAsync','history.','TEST-PRO-KEY','Description','submitFeedback','analysisTimer','CONFIG_PENDING','ON_TIME','exitGraceTimer','\x20Tage)','systemUUID','geminiApiKey','üö®üö®\x20NOTFALL','last_seen','minDaysForBaseline','Health\x20&\x20Sleep\x20Analysis','notifyTelegramRecipient','Pattern\x20Detected','updateBaselineStatus','update','inactivityMonitoringEnabled','sensorLastValues','ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AKTUELLE\x20ZEIT:\x20','setObjectNotExistsAsync','Morning\x20Briefing\x20sent.','Bewegung\x20w√§hrend\x20Exit-Timer\x20erkannt\x20->\x20Bewohner\x20ist\x20noch\x20da.','Trigger\x20Digest','getGenerativeModel','Alert\x20Reason','flur','events.history_debug_04','.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20KONTEXT:\x20','uuid-error','lights','toString','onStateChange','loadSystemMode','Last\x20Result','name','FAULT','join','connection','4GPUelp','wohn','exitTimer','2-digit','\x22\x20was\x20','Fenster/T√ºr','uuid-not-found','icons-mfd.','response','0\x204\x20*\x20*\x20*','sendToAsync','error','pressure','delObjectAsync','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20DATEN:\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Schlafqualit√§t\x20letzte\x20Nacht:\x20','pop','Health\x20Notes','subscribeStates','Drift\x20Status','vacation','_score','city','Deviation','ERROR_CODE','Gemini\x20Init\x20Error:\x20','checkLicense','Schalter/Licht','send','analysis.automation.description','command','indicator','545cjoxgm','suggestion','analysis.comfortSuggestion','value.health','Nein','Analysis\x20Error:\x20','Zu\x20wenig\x20Daten\x20f√ºr\x20Daily\x20Digest.','aiPersona','AES_KEY','AI\x20Alert\x20Status','Daily\x20Digest\x20created\x20successfully.','NORMAL','latitude','long','type','shutter_contact','LTM.rawEventLog','setStateAsync','reachable','modeResetJob','15976kSUCMt','@iobroker/adapter-core','isEmergency','from','ROLLE:\x20Data\x20Analyst.\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20Fasse\x20den\x20heutigen\x20Tag\x20basierend\x20auf\x20den\x20Sensor-Logs\x20zusammen.\x0a\x20\x20\x20\x20\x20\x20\x20\x20PERSONA:\x20','notifyEmailEnabled','version','role','search'];a0_0x29e5=function(){return _0x4e7c84;};return a0_0x29e5();}class CogniLiving extends utils[a0_0xe07aa0(0x385)]{constructor(_0x5a46a6){const _0x1971d3=a0_0xe07aa0;super({..._0x5a46a6,'name':'cogni-living'}),this[_0x1971d3(0x20e)]=[],this[_0x1971d3(0x1fa)]=[],this[_0x1971d3(0x204)]=[],this['rawEventLog']=[],this[_0x1971d3(0x317)]=[],this[_0x1971d3(0x2a9)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x1971d3(0x2c0)]=null,this[_0x1971d3(0x29c)]=null,this[_0x1971d3(0x20d)]=![],this[_0x1971d3(0x253)]=null,this[_0x1971d3(0x30f)]=null,this[_0x1971d3(0x324)]=SYSTEM_MODES[_0x1971d3(0x2e8)],this[_0x1971d3(0x282)]=![],this[_0x1971d3(0x239)]=![],this[_0x1971d3(0x29e)]=_0x1971d3(0x377),this[_0x1971d3(0x299)]=null,this[_0x1971d3(0x1ef)]=null,this[_0x1971d3(0x2f0)]=null,this[_0x1971d3(0x246)]=null,this[_0x1971d3(0x383)]=null,this['on'](_0x1971d3(0x1d3),this[_0x1971d3(0x274)][_0x1971d3(0x24a)](this)),this['on'](_0x1971d3(0x32b),this['onStateChange']['bind'](this)),this['on']('unload',this[_0x1971d3(0x371)][_0x1971d3(0x24a)](this)),this['on'](_0x1971d3(0x24f),this[_0x1971d3(0x1d5)][_0x1971d3(0x24a)](this));}async[a0_0xe07aa0(0x274)](){const _0x3877cb=a0_0xe07aa0;this[_0x3877cb(0x213)]['info'](_0x3877cb(0x35f)+this[_0x3877cb(0x2f7)]+')');const _0x463d6e=['analysis.history_debug_00','analysis.history_debug_01',_0x3877cb(0x240),'analysis.history_debug_03',_0x3877cb(0x26f),_0x3877cb(0x1e7),'events.history_debug_01','events.history_debug_02','events.history_debug_03',_0x3877cb(0x2b2)];for(const _0x5b09b3 of _0x463d6e){try{const _0x26c1cd=await this[_0x3877cb(0x294)](_0x5b09b3);_0x26c1cd&&await this[_0x3877cb(0x2cb)](_0x5b09b3);}catch(_0x1769d2){}}this[_0x3877cb(0x21e)][_0x3877cb(0x22b)]=this[_0x3877cb(0x21e)][_0x3877cb(0x22b)]||'',this[_0x3877cb(0x282)]=await this[_0x3877cb(0x2d7)](this[_0x3877cb(0x21e)][_0x3877cb(0x22b)]);if(!this['config'][_0x3877cb(0x328)]||this[_0x3877cb(0x21e)]['inactivityThresholdHours']<0.1)this['config']['inactivityThresholdHours']=0xc;await this[_0x3877cb(0x36c)]();try{const _0x19d645=await this['getForeignObjectAsync']('system.config');_0x19d645&&_0x19d645[_0x3877cb(0x356)]&&(this[_0x3877cb(0x352)]={'latitude':_0x19d645['common'][_0x3877cb(0x2e9)]||0x0,'longitude':_0x19d645['common']['longitude']||0x0,'city':_0x19d645['common']['city']||''});}catch(_0x4c7041){}if(this[_0x3877cb(0x21e)]['geminiApiKey'])try{this[_0x3877cb(0x253)]=new GoogleGenerativeAI(this[_0x3877cb(0x21e)][_0x3877cb(0x29f)]),this[_0x3877cb(0x30f)]=this[_0x3877cb(0x253)][_0x3877cb(0x2af)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x3877cb(0x20f)}}),this[_0x3877cb(0x213)]['info'](_0x3877cb(0x36f));}catch(_0x1a1507){this[_0x3877cb(0x213)][_0x3877cb(0x2c9)](_0x3877cb(0x2d6)+_0x1a1507[_0x3877cb(0x24f)]);}await this[_0x3877cb(0x1f7)](),await this[_0x3877cb(0x2b8)](),await this[_0x3877cb(0x284)](),await this[_0x3877cb(0x37a)](),this[_0x3877cb(0x2cf)]('analysis.trigger'),this[_0x3877cb(0x2cf)](LTM_DP_TRIGGER_DIGEST),this[_0x3877cb(0x2cf)](_0x3877cb(0x1f6)),this['subscribeStates'](_0x3877cb(0x210));const _0x23b230=this[_0x3877cb(0x21e)][_0x3877cb(0x258)];if(_0x23b230&&_0x23b230[_0x3877cb(0x30a)]>0x0){this[_0x3877cb(0x213)]['info']('Subscribing\x20to\x20'+_0x23b230[_0x3877cb(0x30a)]+_0x3877cb(0x28a));for(const _0x464f87 of _0x23b230){if(_0x464f87['id']){await this[_0x3877cb(0x1f1)](_0x464f87['id']);try{const _0xeb032b=await this[_0x3877cb(0x235)](_0x464f87['id']);if(_0xeb032b)this[_0x3877cb(0x2a9)][_0x464f87['id']]=_0xeb032b[_0x3877cb(0x351)];}catch(_0x37f3ca){}}}}const _0x56bd78=this['config'][_0x3877cb(0x365)]||[];if(_0x56bd78['length']>0x0){this['log'][_0x3877cb(0x1e5)](_0x3877cb(0x359)+_0x56bd78['length']+_0x3877cb(0x281));for(const _0x50a309 of _0x56bd78){await this[_0x3877cb(0x1f1)](_0x50a309);}await this[_0x3877cb(0x27f)]();}if(this[_0x3877cb(0x299)])clearInterval(this[_0x3877cb(0x299)]);const _0x6ed39d=this[_0x3877cb(0x21e)][_0x3877cb(0x325)]||0xf;_0x6ed39d>0x0&&(this[_0x3877cb(0x213)][_0x3877cb(0x1e5)]('Starting\x20Autopilot\x20('+_0x6ed39d+_0x3877cb(0x384)+this[_0x3877cb(0x21e)][_0x3877cb(0x328)]+'h.'),this[_0x3877cb(0x299)]=setInterval(()=>this[_0x3877cb(0x206)](),_0x6ed39d*0x3c*0x3e8)),this[_0x3877cb(0x36a)](),this[_0x3877cb(0x26e)](),this['setupDriftAnalysisScheduler'](),this[_0x3877cb(0x232)]();}async['scanForDevices'](_0x28d57f={}){const _0x12cce8=a0_0xe07aa0;this[_0x12cce8(0x213)]['info'](_0x12cce8(0x331)+JSON[_0x12cce8(0x1f2)](_0x28d57f));const _0x31d9b3=[],_0x5b3bf5=_0x28d57f[_0x12cce8(0x1f0)]!==![],_0x186ed4=_0x28d57f['doors']!==![],_0x3848ee=_0x28d57f[_0x12cce8(0x2b5)]!==![],_0x107702=_0x28d57f[_0x12cce8(0x22d)]===!![],_0xaf1261=_0x28d57f[_0x12cce8(0x2ff)]===!![],_0x8588f0=_0x28d57f[_0x12cce8(0x330)]||[],_0xbf2a46=await this[_0x12cce8(0x1fc)](_0x12cce8(0x1f9),_0x12cce8(0x250)),_0x2d98f5=await this[_0x12cce8(0x1fc)](_0x12cce8(0x260),_0x12cce8(0x250)),_0x7e637a={},_0x16782e={},_0x2ab5df={},_0xec7965=(_0x37a8f5,_0x641fba,_0x3c5d99=![])=>{const _0x358bfe=_0x12cce8;if(!_0x37a8f5)return;for(const _0x18a4a3 in _0x37a8f5){const _0x302bb2=_0x37a8f5[_0x18a4a3];if(_0x302bb2&&_0x302bb2['common']&&_0x302bb2['common'][_0x358bfe(0x33c)]){const _0x19a269=(typeof _0x302bb2[_0x358bfe(0x356)]['name']===_0x358bfe(0x326)?_0x302bb2[_0x358bfe(0x356)][_0x358bfe(0x2ba)]['de']:_0x302bb2[_0x358bfe(0x356)][_0x358bfe(0x2ba)])||_0x302bb2[_0x358bfe(0x356)][_0x358bfe(0x2ba)];if(_0x3c5d99)_0x2ab5df[_0x18a4a3]=_0x19a269;for(const _0x21c2bd of _0x302bb2['common'][_0x358bfe(0x33c)]){if(_0x3c5d99){if(!_0x641fba[_0x21c2bd])_0x641fba[_0x21c2bd]=[];_0x641fba[_0x21c2bd]['push'](_0x18a4a3);}else _0x641fba[_0x21c2bd]=_0x19a269;}}}};_0xec7965(_0xbf2a46,_0x7e637a),_0xec7965(_0x2d98f5,_0x16782e,!![]);const _0x2740c2=await this[_0x12cce8(0x1fc)]('*',_0x12cce8(0x23a)),_0x128265=[_0x12cce8(0x287),_0x12cce8(0x386),'RSSI','ERROR',_0x12cce8(0x2bb),'SABOTAGE',_0x12cce8(0x229),_0x12cce8(0x29a),_0x12cce8(0x20c),_0x12cce8(0x34d),_0x12cce8(0x319),_0x12cce8(0x31d),_0x12cce8(0x1f8),'VIRTUAL_CHANNEL','INSTALL_TEST','COMBINED_PARAMETER','WEEK_PROGRAM',_0x12cce8(0x29b),_0x12cce8(0x22a),_0x12cce8(0x2d5),'PROCESS',_0x12cce8(0x2e5),_0x12cce8(0x316),_0x12cce8(0x2ef),_0x12cce8(0x329),'battery',_0x12cce8(0x2a7),_0x12cce8(0x1d8),_0x12cce8(0x2f7),_0x12cce8(0x2bd),_0x12cce8(0x1e5),'signal',_0x12cce8(0x2a1),'last\x20action',_0x12cce8(0x277),_0x12cce8(0x217),_0x12cce8(0x32e),'colormode',_0x12cce8(0x33f),'xy','ct',_0x12cce8(0x212),'sat',_0x12cce8(0x247),_0x12cce8(0x263),_0x12cce8(0x234),_0x12cce8(0x343),'command',_0x12cce8(0x25c),'description',_0x12cce8(0x33b),_0x12cce8(0x211),_0x12cce8(0x205),'scriptProblem',_0x12cce8(0x315),_0x12cce8(0x37c),_0x12cce8(0x35e),_0x12cce8(0x340),_0x12cce8(0x28d),'forecast',_0x12cce8(0x1e5),_0x12cce8(0x30c)];if(!_0xaf1261)_0x128265['push']('wetter',_0x12cce8(0x2ff),_0x12cce8(0x26c),_0x12cce8(0x2ca),'uv',_0x12cce8(0x380),_0x12cce8(0x1da));const _0x2cf4c4=[_0x12cce8(0x218),_0x12cce8(0x354),'info.','vis.',_0x12cce8(0x295),_0x12cce8(0x345),_0x12cce8(0x2c5),_0x12cce8(0x279)];if(!_0xaf1261)_0x2cf4c4[_0x12cce8(0x1f4)](_0x12cce8(0x23f),_0x12cce8(0x242),'accuweather.',_0x12cce8(0x293),_0x12cce8(0x1e3));const _0x50f2c2=(_0xc5f7b5,_0x1cde8c,_0xa6df72=![])=>{const _0x56a6ab=_0x12cce8,_0xace75e=_0xc5f7b5[_0x56a6ab(0x1e2)]('.');if(_0x1cde8c[_0xc5f7b5])return _0x1cde8c[_0xc5f7b5];if(_0xace75e[_0x56a6ab(0x30a)]>0x2&&_0x1cde8c[_0xace75e[_0x56a6ab(0x36b)](0x0,-0x1)[_0x56a6ab(0x2bc)]('.')])return _0x1cde8c[_0xace75e[_0x56a6ab(0x36b)](0x0,-0x1)[_0x56a6ab(0x2bc)]('.')];if(_0xace75e['length']>0x3&&_0x1cde8c[_0xace75e[_0x56a6ab(0x36b)](0x0,-0x2)[_0x56a6ab(0x2bc)]('.')])return _0x1cde8c[_0xace75e[_0x56a6ab(0x36b)](0x0,-0x2)[_0x56a6ab(0x2bc)]('.')];return _0xa6df72?[]:null;};for(const _0x2ddf1b in _0x2740c2){const _0x1ba542=_0x2740c2[_0x2ddf1b];if(!_0x1ba542||!_0x1ba542['common'])continue;if(_0x2cf4c4[_0x12cce8(0x34f)](_0x13d568=>_0x2ddf1b[_0x12cce8(0x257)](_0x13d568)))continue;const _0x10c49b=_0x1ba542[_0x12cce8(0x356)][_0x12cce8(0x2f8)]||'',_0xb997f1=(_0x1ba542['common']['name']&&typeof _0x1ba542['common'][_0x12cce8(0x2ba)]===_0x12cce8(0x326)?_0x1ba542['common'][_0x12cce8(0x2ba)]['de']:_0x1ba542[_0x12cce8(0x356)]['name'])||'',_0x1a48df=_0xb997f1?_0xb997f1['toLowerCase']():'',_0x5dd923=_0x2ddf1b[_0x12cce8(0x1e9)](),_0x2a3d8c=_0x50f2c2(_0x2ddf1b,_0x7e637a),_0x135def=_0x50f2c2(_0x2ddf1b,_0x16782e,!![]);let _0x186a8f=null,_0x2bc9b3=![];if(_0x135def&&_0x135def['length']>0x0){const _0x2ec6b5=_0x135def[_0x12cce8(0x1df)](_0x565e29=>_0x8588f0[_0x12cce8(0x306)](_0x565e29));if(_0x2ec6b5){_0x2bc9b3=!![];const _0xb5a92c=_0x2ab5df[_0x2ec6b5];if(_0x5dd923[_0x12cce8(0x306)](_0x12cce8(0x31e))||_0x5dd923['includes']('motion'))_0x186a8f=_0x12cce8(0x27d);else{if(_0x5dd923[_0x12cce8(0x306)](_0x12cce8(0x201))||_0x5dd923[_0x12cce8(0x306)](_0x12cce8(0x23c))||_0x1a48df[_0x12cce8(0x306)](_0x12cce8(0x225)))_0x186a8f=_0x12cce8(0x348);else{if(_0x5dd923[_0x12cce8(0x306)](_0x12cce8(0x23a))||_0x5dd923[_0x12cce8(0x306)](_0x12cce8(0x28c))||_0x5dd923[_0x12cce8(0x306)]('on'))_0x186a8f=_0x12cce8(0x2d8);else _0x186a8f=_0xb5a92c;}}}}if(!_0x2bc9b3&&!_0xaf1261){if(_0x128265[_0x12cce8(0x34f)](_0x2ab3e3=>_0x1a48df['includes'](_0x2ab3e3)||_0x2ddf1b['toUpperCase']()[_0x12cce8(0x306)](_0x2ab3e3)))continue;}if(!_0x186a8f&&_0x5b3bf5){if(_0x10c49b[_0x12cce8(0x306)]('sensor.motion')||_0x10c49b[_0x12cce8(0x306)](_0x12cce8(0x314))||_0x1a48df[_0x12cce8(0x306)]('bewegung')||_0x1a48df[_0x12cce8(0x306)]('pr√§senz'))_0x186a8f=_0x12cce8(0x27d);}!_0x186a8f&&_0x186ed4&&((_0x5dd923[_0x12cce8(0x306)](_0x12cce8(0x2ec))||_0x10c49b['includes'](_0x12cce8(0x25b))||_0x10c49b['includes'](_0x12cce8(0x27b))||(_0x1a48df[_0x12cce8(0x306)]('fenster')||_0x1a48df[_0x12cce8(0x306)](_0x12cce8(0x1d0)))&&!_0x1a48df[_0x12cce8(0x306)](_0x12cce8(0x358))&&!_0x1a48df[_0x12cce8(0x306)](_0x12cce8(0x291))&&(_0x1ba542[_0x12cce8(0x356)][_0x12cce8(0x2eb)]===_0x12cce8(0x38b)||_0x1ba542[_0x12cce8(0x356)][_0x12cce8(0x2eb)]==='number'))&&(_0x186a8f=_0x12cce8(0x2c3)));if(!_0x186a8f&&_0x3848ee){if((_0x10c49b['includes'](_0x12cce8(0x23d))||_0x10c49b[_0x12cce8(0x306)](_0x12cce8(0x2fc))||_0x1a48df[_0x12cce8(0x306)](_0x12cce8(0x280))||_0x1a48df[_0x12cce8(0x306)](_0x12cce8(0x301)))&&_0x1ba542['common']['write'])_0x186a8f=_0x12cce8(0x335);}if(!_0x186a8f&&_0x107702){if(_0x10c49b[_0x12cce8(0x306)]('value.temperature')||_0x10c49b[_0x12cce8(0x306)](_0x12cce8(0x1ec))||_0x1a48df['includes'](_0x12cce8(0x1db)))_0x186a8f='Temperatur';}if(_0x186a8f){let _0x56467e=_0x2a3d8c||'';if(!_0x56467e){if(_0x1a48df[_0x12cce8(0x306)]('bad'))_0x56467e=_0x12cce8(0x286);else{if(_0x1a48df[_0x12cce8(0x306)](_0x12cce8(0x30b)))_0x56467e=_0x12cce8(0x36e);else{if(_0x1a48df[_0x12cce8(0x306)](_0x12cce8(0x2bf)))_0x56467e='Wohnzimmer';else{if(_0x1a48df[_0x12cce8(0x306)](_0x12cce8(0x26d)))_0x56467e=_0x12cce8(0x349);else{if(_0x1a48df[_0x12cce8(0x306)](_0x12cce8(0x2b1))||_0x1a48df[_0x12cce8(0x306)](_0x12cce8(0x23e)))_0x56467e=_0x12cce8(0x37e);else{if(_0x1a48df['includes']('garten'))_0x56467e=_0x12cce8(0x332);}}}}}}let _0x39aa6c=![];_0x186a8f===_0x12cce8(0x2c3)&&((_0x1a48df[_0x12cce8(0x306)](_0x12cce8(0x312))||_0x1a48df[_0x12cce8(0x306)](_0x12cce8(0x222))||_0x1a48df['includes'](_0x12cce8(0x357))||_0x56467e&&_0x56467e[_0x12cce8(0x1e9)]()[_0x12cce8(0x306)](_0x12cce8(0x2b1))&&_0x1a48df['includes'](_0x12cce8(0x1d0)))&&(_0x39aa6c=!![]));let _0x1b2abb=0x0;if(_0x2bc9b3)_0x1b2abb+=0x1e;else{if(_0x2a3d8c)_0x1b2abb+=0x14;else{if(_0x56467e)_0x1b2abb+=0xa;}}if(_0x39aa6c)_0x1b2abb+=0x5;_0x31d9b3[_0x12cce8(0x1f4)]({'id':_0x2ddf1b,'name':_0xb997f1||_0x2ddf1b,'type':_0x186a8f,'location':_0x56467e,'logDuplicates':_0x186a8f==='Bewegung','isExit':_0x39aa6c,'_score':_0x1b2abb});}}return _0x31d9b3['sort']((_0x29b214,_0x4b13eb)=>_0x4b13eb['_score']-_0x29b214[_0x12cce8(0x2d2)]),_0x31d9b3;}async[a0_0xe07aa0(0x27f)](){const _0x6e5c5f=a0_0xe07aa0,_0x13fb37=this[_0x6e5c5f(0x21e)][_0x6e5c5f(0x365)]||[];let _0x1aebdd=![];for(const _0x380cdf of _0x13fb37){try{const _0xdadedf=await this[_0x6e5c5f(0x235)](_0x380cdf);if(_0xdadedf&&(_0xdadedf[_0x6e5c5f(0x351)]===!![]||_0xdadedf[_0x6e5c5f(0x351)]===_0x6e5c5f(0x21f)||_0xdadedf[_0x6e5c5f(0x351)]===0x1)){_0x1aebdd=!![];break;}}catch(_0x5d967e){}}return _0x1aebdd&&(this[_0x6e5c5f(0x2c0)]&&(this[_0x6e5c5f(0x213)][_0x6e5c5f(0x1e5)](_0x6e5c5f(0x1fe)),this['abortExitTimer']()),!this[_0x6e5c5f(0x266)]&&this[_0x6e5c5f(0x324)]===SYSTEM_MODES['NORMAL']&&this[_0x6e5c5f(0x208)](!![])),_0x1aebdd;}async[a0_0xe07aa0(0x2b7)](_0x42d4a4,_0x246362){const _0x32ae3b=a0_0xe07aa0;if(!_0x246362)return;if(_0x42d4a4===this['namespace']+'.'+SYSTEM_DP_MODE){_0x246362[_0x32ae3b(0x351)]&&Object[_0x32ae3b(0x2fe)](SYSTEM_MODES)['includes'](_0x246362[_0x32ae3b(0x351)])&&(this[_0x32ae3b(0x324)]=_0x246362[_0x32ae3b(0x351)],_0x246362[_0x32ae3b(0x351)]===SYSTEM_MODES[_0x32ae3b(0x373)]?this[_0x32ae3b(0x208)](![]):this[_0x32ae3b(0x208)](!![]));if(!_0x246362['ack'])this[_0x32ae3b(0x252)](_0x42d4a4,{'val':this[_0x32ae3b(0x324)],'ack':!![]});return;}if(!_0x246362[_0x32ae3b(0x26b)]){_0x42d4a4[_0x32ae3b(0x306)]('analysis.trigger')&&_0x246362[_0x32ae3b(0x351)]&&(this[_0x32ae3b(0x252)](_0x42d4a4,{'val':![],'ack':!![]}),this[_0x32ae3b(0x203)]());if(_0x42d4a4[_0x32ae3b(0x306)]('triggerDailyDigest')&&_0x246362[_0x32ae3b(0x351)]){this[_0x32ae3b(0x252)](_0x42d4a4,{'val':![],'ack':!![]});if(this[_0x32ae3b(0x282)])this[_0x32ae3b(0x307)]();}_0x42d4a4['includes'](_0x32ae3b(0x375))&&_0x246362[_0x32ae3b(0x351)]&&(this[_0x32ae3b(0x252)](_0x42d4a4,{'val':![],'ack':!![]}),this['sendMorningBriefing']());return;}if(this[_0x32ae3b(0x21e)][_0x32ae3b(0x365)]&&this[_0x32ae3b(0x21e)][_0x32ae3b(0x365)]['includes'](_0x42d4a4)){await this[_0x32ae3b(0x27f)]();return;}const _0x37c2bb=(this[_0x32ae3b(0x21e)][_0x32ae3b(0x258)]||[])['find'](_0x4d4af1=>_0x4d4af1['id']===_0x42d4a4);if(_0x37c2bb)this['processSensorEvent'](_0x42d4a4,_0x246362,_0x37c2bb);}async[a0_0xe07aa0(0x366)](_0xa1a582,_0x3e73d9,_0x894328){const _0x521ae2=a0_0xe07aa0;if(!_0x894328[_0x521ae2(0x221)]&&this['sensorLastValues'][_0xa1a582]===_0x3e73d9[_0x521ae2(0x351)])return;this[_0x521ae2(0x2a9)][_0xa1a582]=_0x3e73d9['val'];if(this[_0x521ae2(0x20d)])return;const _0x1aeb10=await this[_0x521ae2(0x27f)]();if(_0x1aeb10){if(!this[_0x521ae2(0x266)])this[_0x521ae2(0x208)](!![]);}else{const _0x93037a=_0x894328[_0x521ae2(0x290)]===!![];_0x93037a?this[_0x521ae2(0x21a)]():(this['exitTimer']&&(this[_0x521ae2(0x213)][_0x521ae2(0x1e5)](_0x521ae2(0x2ad)),this['abortExitTimer']()),!this[_0x521ae2(0x266)]&&this[_0x521ae2(0x324)]===SYSTEM_MODES[_0x521ae2(0x2e8)]&&this[_0x521ae2(0x208)](!![]));}const _0x4e0020={'timestamp':_0x3e73d9['ts'],'id':_0xa1a582,'name':_0x894328[_0x521ae2(0x2ba)],'value':_0x3e73d9[_0x521ae2(0x351)],'location':_0x894328[_0x521ae2(0x388)],'type':_0x894328['type']};this[_0x521ae2(0x20e)]['unshift'](_0x4e0020);if(this[_0x521ae2(0x20e)]['length']>HISTORY_MAX_SIZE)this[_0x521ae2(0x20e)][_0x521ae2(0x2cd)]();await this[_0x521ae2(0x2ee)](_0x521ae2(0x219),{'val':JSON[_0x521ae2(0x1f2)](_0x4e0020),'ack':!![]}),await this[_0x521ae2(0x2ee)](_0x521ae2(0x344),{'val':JSON['stringify'](this[_0x521ae2(0x20e)]),'ack':!![]}),this['rawEventLog']['push']({'timestamp':new Date(_0x3e73d9['ts'])['toISOString'](),'sensorName':_0x894328[_0x521ae2(0x2ba)],'location':_0x894328['location'],'value':_0x3e73d9[_0x521ae2(0x351)]}),await this[_0x521ae2(0x1d6)]();}[a0_0xe07aa0(0x21a)](){const _0x2e28a5=a0_0xe07aa0;this['abortExitTimer'](),this[_0x2e28a5(0x20d)]=!![],this[_0x2e28a5(0x29c)]=setTimeout(()=>{this['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),this[_0x2e28a5(0x2c0)]=setTimeout(()=>{const _0x355275=_0x2e28a5;this[_0x355275(0x208)](![]),this[_0x355275(0x2c0)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}['abortExitTimer'](){const _0x31aece=a0_0xe07aa0;if(this[_0x31aece(0x2c0)])clearTimeout(this['exitTimer']);if(this[_0x31aece(0x29c)])clearTimeout(this[_0x31aece(0x29c)]);this[_0x31aece(0x2c0)]=null,this[_0x31aece(0x29c)]=null,this[_0x31aece(0x20d)]=![];}async[a0_0xe07aa0(0x208)](_0x3cbd09){const _0x533e0a=a0_0xe07aa0;if(this[_0x533e0a(0x266)]===_0x3cbd09)return;this[_0x533e0a(0x266)]=_0x3cbd09,await this['setStateAsync'](_0x533e0a(0x223),{'val':_0x3cbd09,'ack':!![]});}[a0_0xe07aa0(0x206)](){const _0x227144=a0_0xe07aa0,_0x20b741=this[_0x227144(0x21e)][_0x227144(0x328)],_0x57700c=this[_0x227144(0x21e)][_0x227144(0x2a8)],_0xbf3b76=this['eventHistory']['length']>0x0?this[_0x227144(0x20e)][0x0][_0x227144(0x308)]:Date['now'](),_0xf59fed=(Date['now']()-_0xbf3b76)/(0x3e8*0x3c*0x3c);let _0x71af27='';_0x57700c&&this[_0x227144(0x324)]===SYSTEM_MODES[_0x227144(0x2e8)]&&this['isPresent']&&(_0xf59fed>_0x20b741&&(_0x71af27='CRITICAL\x20WARNING:\x20No\x20sensor\x20activity\x20detected\x20for\x20'+_0xf59fed['toFixed'](0x1)+_0x227144(0x33e)));if(_0x71af27){this[_0x227144(0x203)](_0x71af27)['catch'](_0x14c3a9=>this[_0x227144(0x213)][_0x227144(0x2c9)](_0x14c3a9));return;}const _0x5096d6=Date[_0x227144(0x1e4)](),_0x20d637=_0x5096d6-_0xbf3b76,_0x3bc0d9=(this[_0x227144(0x21e)][_0x227144(0x325)]||0xf)*0x3c*0x3e8;this[_0x227144(0x20e)][_0x227144(0x30a)]>0x0&&_0x20d637<=_0x3bc0d9?this[_0x227144(0x203)]()[_0x227144(0x227)](_0x33f60f=>this['log'][_0x227144(0x2c9)](_0x33f60f)):!this[_0x227144(0x239)]&&(this[_0x227144(0x252)](_0x227144(0x238),{'val':![],'ack':!![]}),this[_0x227144(0x252)](_0x227144(0x350),{'val':![],'ack':!![]}));}async[a0_0xe07aa0(0x203)](_0x15d65f=''){const _0xac515b=a0_0xe07aa0;if(!this[_0xac515b(0x30f)])return;const _0x271603=this['eventHistory'][_0xac515b(0x30a)]>0x0?this[_0xac515b(0x20e)]:[{'note':'No\x20recorded\x20events\x20yet.'}],_0x23db05=PERSONA_MAPPING[this['config'][_0xac515b(0x2e4)]||_0xac515b(0x372)],_0x588bfd=this[_0xac515b(0x21e)][_0xac515b(0x364)]||'',_0x1f9804=this['currentSystemMode'],_0x3d200d=new Date(),_0x82db0e=_0x3d200d[_0xac515b(0x228)]('de-DE',{'weekday':_0xac515b(0x2ea),'hour':_0xac515b(0x2c1),'minute':_0xac515b(0x2c1)}),_0x3a0aae=this[_0xac515b(0x352)];let _0x2b71d3='';if(this['feedbackHistory'][_0xac515b(0x30a)]>0x0){const _0xd4e241=this[_0xac515b(0x204)]['slice'](0x0,0x3)[_0xac515b(0x1dd)](_0x5b5acb=>_0xac515b(0x361)+_0x5b5acb[_0xac515b(0x24d)]+_0xac515b(0x2c2)+_0x5b5acb[_0xac515b(0x305)]+'.')[_0xac515b(0x2bc)]('\x0a');_0x2b71d3=_0xac515b(0x1f5)+_0xd4e241+'\x0a';}const _0xbf34b6=_0x15d65f?'\x0a!!!\x20EXTERNAL\x20SYSTEM\x20WARNING\x20!!!\x0a'+_0x15d65f+_0xac515b(0x310):'',_0x50ec03=_0xac515b(0x22f),_0x1af593=_0xac515b(0x2aa)+_0x82db0e+'.\x20ORT:\x20'+_0x3a0aae[_0xac515b(0x2d3)]+'.\x0a\x20\x20\x20\x20\x20\x20\x20\x20MODUS:\x20'+_0x1f9804+'.\x20PR√ÑSENZ:\x20'+(this[_0xac515b(0x266)]?'Ja':_0xac515b(0x2e1))+_0xac515b(0x2b3)+_0x588bfd+'.\x20PERSONA:\x20'+_0x23db05+_0xac515b(0x202)+_0x50ec03+'\x20'+_0x2b71d3+'\x20'+_0xbf34b6+_0xac515b(0x387)+JSON['stringify'](_0x271603)+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20Analysiere\x20die\x20Events\x20auf\x20Aktivit√§t,\x20Komfort\x20und\x20GESUNDHEIT\x20(Schlaf/Unruhe).\x0a\x20\x20\x20\x20\x20\x20\x20\x20SCHEMA:\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22isEmergency\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22comfort\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22suggestion\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22suggestedAction\x22:\x20\x22string\x22\x20}\x20},\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22health\x22:\x20{\x20\x22sleepScore\x22:\x20number\x20(0-100,\x20100=perfekt,\x20sch√§tze\x20bei\x20Nachtdaten),\x20\x22restlessness\x22:\x20\x22none|low|medium|high\x22,\x20\x22notes\x22:\x20\x22string\x22\x20}\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20}';try{const _0xbada06=await this[_0xac515b(0x30f)][_0xac515b(0x304)](_0x1af593),_0x4baa02=_0xbada06['response']['text']()[_0xac515b(0x353)](/```json|```/g,'')['trim'](),_0x37ca3b=JSON[_0xac515b(0x25a)](_0x4baa02);await this['setStateAsync']('analysis.lastResult',{'val':_0x4baa02,'ack':!![]}),await this[_0xac515b(0x2ee)](_0xac515b(0x35c),{'val':_0x37ca3b[_0xac515b(0x32d)][_0xac515b(0x24d)]||'','ack':!![]}),await this['setStateAsync'](_0xac515b(0x37f),{'val':_0x37ca3b['activity'][_0xac515b(0x35e)]||_0xac515b(0x338),'ack':!![]}),await this['setStateAsync']('analysis.deviationFromBaseline',{'val':_0x37ca3b[_0xac515b(0x32d)][_0xac515b(0x28b)]||'N/A','ack':!![]});_0x37ca3b[_0xac515b(0x245)]&&(await this['setStateAsync'](_0xac515b(0x278),{'val':_0x37ca3b[_0xac515b(0x245)][_0xac515b(0x35e)]||'','ack':!![]}),await this[_0xac515b(0x2ee)](_0xac515b(0x2df),{'val':_0x37ca3b['comfort'][_0xac515b(0x2de)]||'','ack':!![]}),_0x37ca3b['comfort'][_0xac515b(0x363)]&&(await this[_0xac515b(0x2ee)](_0xac515b(0x283),{'val':_0x37ca3b[_0xac515b(0x245)][_0xac515b(0x363)][_0xac515b(0x347)]||![],'ack':!![]}),await this['setStateAsync'](_0xac515b(0x2da),{'val':_0x37ca3b[_0xac515b(0x245)]['automationProposal']['description']||'','ack':!![]}),await this[_0xac515b(0x2ee)](_0xac515b(0x1ee),{'val':_0x37ca3b[_0xac515b(0x245)][_0xac515b(0x363)][_0xac515b(0x1d7)]||'','ack':!![]})));_0x37ca3b[_0xac515b(0x20a)]&&(await this['setStateAsync'](_0xac515b(0x241),{'val':typeof _0x37ca3b[_0xac515b(0x20a)][_0xac515b(0x1d4)]===_0xac515b(0x367)?_0x37ca3b[_0xac515b(0x20a)][_0xac515b(0x1d4)]:0x0,'ack':!![]}),await this['setStateAsync'](_0xac515b(0x271),{'val':_0x37ca3b[_0xac515b(0x20a)][_0xac515b(0x1ff)]||'none','ack':!![]}),await this['setStateAsync'](_0xac515b(0x226),{'val':_0x37ca3b[_0xac515b(0x20a)][_0xac515b(0x362)]||'','ack':!![]}));const _0x35ec3f=_0x37ca3b[_0xac515b(0x32d)]['isAlert']||![],_0x5a9054=_0x37ca3b[_0xac515b(0x32d)][_0xac515b(0x2f3)]||![];if(_0x35ec3f||_0x5a9054){await this['setStateAsync']('analysis.isAlert',{'val':!![],'ack':!![]}),await this[_0xac515b(0x2ee)](_0xac515b(0x350),{'val':_0x5a9054,'ack':!![]});if(!this['lastAlertState']||_0x5a9054){const _0x4c87fa=_0x5a9054?_0xac515b(0x2a0):'‚ö†Ô∏è\x20Alarm';this[_0xac515b(0x1e8)](_0x4c87fa+':\x20'+_0x37ca3b[_0xac515b(0x32d)][_0xac515b(0x24d)],![],_0x5a9054);}}else await this[_0xac515b(0x2ee)](_0xac515b(0x238),{'val':![],'ack':!![]}),await this[_0xac515b(0x2ee)]('analysis.isEmergency',{'val':![],'ack':!![]});this['lastAlertState']=_0x35ec3f||_0x5a9054;const _0x445d6f={'timestamp':Date[_0xac515b(0x1e4)](),'id':Date[_0xac515b(0x1e4)]()[_0xac515b(0x2b6)](),'analysis':_0x37ca3b,'systemMode':_0x1f9804,'isPro':this[_0xac515b(0x282)]};this[_0xac515b(0x339)](_0x445d6f);}catch(_0x50e884){this[_0xac515b(0x213)][_0xac515b(0x2c9)](_0xac515b(0x2e2)+_0x50e884['message']);}}async[a0_0xe07aa0(0x307)](){const _0x4252f6=a0_0xe07aa0;if(!this[_0x4252f6(0x30f)]||this[_0x4252f6(0x24c)][_0x4252f6(0x30a)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await this['setStateAsync'](LTM_DP_STATUS,{'val':_0x4252f6(0x2e3),'ack':!![]});return;}this['log']['info'](_0x4252f6(0x288)+this['rawEventLog'][_0x4252f6(0x30a)]+'\x20raw\x20events...'),await this[_0x4252f6(0x2ee)](LTM_DP_STATUS,{'val':'Analysiere\x20Tag...','ack':!![]});const _0x37de2d=this[_0x4252f6(0x24c)]['length']>0x320?this['rawEventLog']['slice'](this['rawEventLog']['length']-0x320):this['rawEventLog'],_0xb50b6e=PERSONA_MAPPING[this[_0x4252f6(0x21e)]['aiPersona']||_0x4252f6(0x372)],_0x3c4656=_0x4252f6(0x2f5)+_0xb50b6e+_0x4252f6(0x249)+JSON['stringify'](_0x37de2d)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20OUTPUT\x20SCHEMA:\x0a\x20\x20\x20\x20\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22summary\x22:\x20\x22Pr√§gnante\x20Zusammenfassung\x20des\x20Tages\x20(max\x202\x20S√§tze).\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22activityLevel\x22:\x20\x22sehr\x20niedrig|niedrig|normal|hoch|sehr\x20hoch\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22health\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22sleepScore\x22:\x20number\x20(0-100,\x20Gesamtbewertung\x20der\x20Nachtruhe/Schlafqualit√§t\x20des\x20vergangenen\x2024h\x20Zyklus),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22restlessness\x22:\x20\x22none|low|medium|high\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}';try{const _0x13e9bd=await this[_0x4252f6(0x30f)][_0x4252f6(0x304)](_0x3c4656),_0x328144=_0x13e9bd[_0x4252f6(0x2c6)][_0x4252f6(0x256)]()[_0x4252f6(0x353)](/```json|```/g,'')[_0x4252f6(0x382)](),_0x401ff5=JSON[_0x4252f6(0x25a)](_0x328144),_0x348e63={'timestamp':new Date()[_0x4252f6(0x322)](),'eventCount':this[_0x4252f6(0x24c)][_0x4252f6(0x30a)],'summary':_0x401ff5['summary'],'activityLevel':_0x401ff5['activityLevel'],'health':{'sleepScore':_0x401ff5[_0x4252f6(0x20a)]?_0x401ff5['health']['sleepScore']:0x0,'restlessness':_0x401ff5[_0x4252f6(0x20a)]?_0x401ff5[_0x4252f6(0x20a)][_0x4252f6(0x1ff)]:'none'},'systemMode':this[_0x4252f6(0x324)]};this[_0x4252f6(0x317)]['push'](_0x348e63),await this['saveDailyDigests'](),this[_0x4252f6(0x24c)]=[],await this[_0x4252f6(0x1d6)](),await this[_0x4252f6(0x2ee)](LTM_DP_STATUS,{'val':'Daily\x20Digest\x20erstellt\x20&\x20gespeichert.','ack':!![]}),this[_0x4252f6(0x213)]['info'](_0x4252f6(0x2e7));}catch(_0x551b3d){this[_0x4252f6(0x213)][_0x4252f6(0x2c9)](_0x4252f6(0x254)+_0x551b3d[_0x4252f6(0x24f)]),await this[_0x4252f6(0x2ee)](LTM_DP_STATUS,{'val':_0x4252f6(0x27e)+_0x551b3d[_0x4252f6(0x24f)],'ack':!![]});}}[a0_0xe07aa0(0x232)](){const _0x5edccc=a0_0xe07aa0;if(this[_0x5edccc(0x383)])this[_0x5edccc(0x383)]['cancel']();if(!this[_0x5edccc(0x21e)][_0x5edccc(0x1eb)])return;const _0x48f2cb=(this[_0x5edccc(0x21e)][_0x5edccc(0x2fd)]||_0x5edccc(0x300))[_0x5edccc(0x1e2)](':'),_0x440e89=parseInt(_0x48f2cb[0x0])||0x8,_0x5567ad=parseInt(_0x48f2cb[0x1])||0x0,_0xd521a1=_0x5567ad+'\x20'+_0x440e89+'\x20*\x20*\x20*';this[_0x5edccc(0x213)][_0x5edccc(0x1e5)]('Scheduling\x20Morning\x20Briefing\x20for\x20'+_0x440e89+':'+(_0x5567ad<0xa?'0'+_0x5567ad:_0x5567ad)),this[_0x5edccc(0x383)]=schedule[_0x5edccc(0x381)](_0xd521a1,()=>{this['sendMorningBriefing']();});}async[a0_0xe07aa0(0x259)](){const _0x231ea3=a0_0xe07aa0;if(!this['geminiModel'])return;this['log'][_0x231ea3(0x1e5)](_0x231ea3(0x1d9));const _0x3ec71f=this[_0x231ea3(0x317)][_0x231ea3(0x30a)]>0x0?this[_0x231ea3(0x317)][this[_0x231ea3(0x317)]['length']-0x1]:null,_0x298ff5=_0x3ec71f&&_0x3ec71f[_0x231ea3(0x20a)]?_0x3ec71f['health'][_0x231ea3(0x1d4)]:_0x231ea3(0x338),_0x41ed81=new Date();_0x41ed81[_0x231ea3(0x21d)](0x4,0x0,0x0,0x0);const _0x970772=this[_0x231ea3(0x20e)]['filter'](_0x522ee9=>new Date(_0x522ee9[_0x231ea3(0x308)])>_0x41ed81),_0x1cad4f=PERSONA_MAPPING[this[_0x231ea3(0x21e)][_0x231ea3(0x2e4)]||_0x231ea3(0x372)],_0x4ef510=_0x231ea3(0x24b)+_0x1cad4f+_0x231ea3(0x2cc)+_0x298ff5+_0x231ea3(0x22e)+JSON[_0x231ea3(0x1f2)](_0x970772[_0x231ea3(0x36b)](0x0,0xa))+_0x231ea3(0x273);try{const _0x251999=await this[_0x231ea3(0x30f)][_0x231ea3(0x304)](_0x4ef510),_0x26d6cd='üåÖ\x20Daily\x20Briefing:\x0a'+_0x251999[_0x231ea3(0x2c6)][_0x231ea3(0x256)]()[_0x231ea3(0x382)]();this['sendNotification'](_0x26d6cd),this[_0x231ea3(0x213)]['info'](_0x231ea3(0x2ac));}catch(_0x4a4e26){this[_0x231ea3(0x213)][_0x231ea3(0x2c9)](_0x231ea3(0x25f)+_0x4a4e26[_0x231ea3(0x24f)]);}}async[a0_0xe07aa0(0x36c)](){const _0x4bca06=a0_0xe07aa0;try{const _0x36a0fa=await this[_0x4bca06(0x321)](_0x4bca06(0x344));_0x36a0fa&&_0x36a0fa[_0x4bca06(0x351)]&&(this['eventHistory']=JSON[_0x4bca06(0x25a)](_0x36a0fa[_0x4bca06(0x351)][_0x4bca06(0x2b6)]()));}catch(_0x3728ac){this['eventHistory']=[];}try{const _0x2b0e92=await this['getStateAsync'](_0x4bca06(0x309));if(_0x2b0e92&&_0x2b0e92['val'])this[_0x4bca06(0x1fa)]=JSON[_0x4bca06(0x25a)](_0x2b0e92[_0x4bca06(0x351)][_0x4bca06(0x2b6)]());}catch(_0x39101e){this[_0x4bca06(0x1fa)]=[];}}async[a0_0xe07aa0(0x1f7)](){const _0x3c8be3=a0_0xe07aa0;await this[_0x3c8be3(0x32c)](),await this[_0x3c8be3(0x2ab)](_0x3c8be3(0x223),{'type':'state','common':{'name':_0x3c8be3(0x27c),'type':'boolean','role':_0x3c8be3(0x2dc),'read':!![],'write':![],'def':!![]},'native':{}}),await this[_0x3c8be3(0x2ab)](_0x3c8be3(0x219),{'type':_0x3c8be3(0x23a),'common':{'name':_0x3c8be3(0x270),'type':_0x3c8be3(0x376),'role':_0x3c8be3(0x30c),'read':!![],'write':![]},'native':{}}),await this[_0x3c8be3(0x2ab)]('events.history',{'type':_0x3c8be3(0x23a),'common':{'name':'Event\x20History','type':_0x3c8be3(0x376),'role':_0x3c8be3(0x30c),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x3c8be3(0x333),{'type':_0x3c8be3(0x23a),'common':{'name':_0x3c8be3(0x369),'type':_0x3c8be3(0x38b),'role':_0x3c8be3(0x255),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x3c8be3(0x2ab)](_0x3c8be3(0x210),{'type':_0x3c8be3(0x23a),'common':{'name':'Trigger\x20Briefing\x20(Test)','type':_0x3c8be3(0x38b),'role':_0x3c8be3(0x255),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x3c8be3(0x2ab)](_0x3c8be3(0x2fa),{'type':_0x3c8be3(0x23a),'common':{'name':_0x3c8be3(0x2b9),'type':_0x3c8be3(0x376),'role':'json','read':!![],'write':![]},'native':{}}),await this[_0x3c8be3(0x2ab)](_0x3c8be3(0x238),{'type':_0x3c8be3(0x23a),'common':{'name':_0x3c8be3(0x2e6),'type':'boolean','role':_0x3c8be3(0x389),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x3c8be3(0x2ab)](_0x3c8be3(0x350),{'type':_0x3c8be3(0x23a),'common':{'name':_0x3c8be3(0x303),'type':_0x3c8be3(0x38b),'role':'indicator.alarm.fire','read':!![],'write':![],'def':![]},'native':{}}),await this[_0x3c8be3(0x2ab)]('analysis.alertReason',{'type':_0x3c8be3(0x23a),'common':{'name':_0x3c8be3(0x2b0),'type':_0x3c8be3(0x376),'role':_0x3c8be3(0x311),'read':!![],'write':![]},'native':{}}),await this[_0x3c8be3(0x2ab)](_0x3c8be3(0x37f),{'type':_0x3c8be3(0x23a),'common':{'name':_0x3c8be3(0x21c),'type':_0x3c8be3(0x376),'role':_0x3c8be3(0x256),'read':!![],'write':![]},'native':{}}),await this[_0x3c8be3(0x2ab)]('analysis.deviationFromBaseline',{'type':'state','common':{'name':_0x3c8be3(0x2d4),'type':_0x3c8be3(0x376),'role':_0x3c8be3(0x23a),'read':!![],'write':![],'def':'N/A'},'native':{}}),await this[_0x3c8be3(0x2ab)](_0x3c8be3(0x278),{'type':_0x3c8be3(0x23a),'common':{'name':'Comfort\x20Summary','type':'string','role':'text','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x3c8be3(0x2df),{'type':_0x3c8be3(0x23a),'common':{'name':'Comfort\x20Suggestion','type':'string','role':'text','read':!![],'write':![]},'native':{}}),await this[_0x3c8be3(0x318)](_0x3c8be3(0x31b),{'type':_0x3c8be3(0x230),'common':{'name':'Automation\x20Proposals'},'native':{}}),await this['setObjectNotExistsAsync']('analysis.automation.patternDetected',{'type':_0x3c8be3(0x23a),'common':{'name':_0x3c8be3(0x2a5),'type':_0x3c8be3(0x38b),'role':_0x3c8be3(0x2dc),'read':!![],'write':![],'def':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x3c8be3(0x2da),{'type':_0x3c8be3(0x23a),'common':{'name':_0x3c8be3(0x297),'type':_0x3c8be3(0x376),'role':_0x3c8be3(0x256),'read':!![],'write':![]},'native':{}}),await this[_0x3c8be3(0x2ab)](_0x3c8be3(0x1ee),{'type':_0x3c8be3(0x23a),'common':{'name':_0x3c8be3(0x334),'type':_0x3c8be3(0x376),'role':_0x3c8be3(0x256),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x3c8be3(0x309),{'type':_0x3c8be3(0x23a),'common':{'name':_0x3c8be3(0x1f3),'type':_0x3c8be3(0x376),'role':_0x3c8be3(0x30c),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x3c8be3(0x2ab)](_0x3c8be3(0x289),{'type':_0x3c8be3(0x23a),'common':{'name':_0x3c8be3(0x285),'type':_0x3c8be3(0x376),'role':_0x3c8be3(0x30c),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['extendObjectAsync'](_0x3c8be3(0x327),{'type':_0x3c8be3(0x230),'common':{'name':_0x3c8be3(0x2a3)},'native':{}}),await this[_0x3c8be3(0x2ab)](_0x3c8be3(0x241),{'type':_0x3c8be3(0x23a),'common':{'name':_0x3c8be3(0x302),'type':_0x3c8be3(0x367),'role':_0x3c8be3(0x2e0),'read':!![],'write':![],'def':0x0},'native':{}}),await this[_0x3c8be3(0x2ab)]('analysis.health.restlessness',{'type':'state','common':{'name':_0x3c8be3(0x33d),'type':'string','role':_0x3c8be3(0x256),'read':!![],'write':![],'def':_0x3c8be3(0x200)},'native':{}}),await this[_0x3c8be3(0x2ab)]('analysis.health.notes',{'type':_0x3c8be3(0x23a),'common':{'name':_0x3c8be3(0x2ce),'type':_0x3c8be3(0x376),'role':'text','read':!![],'write':![],'def':''},'native':{}}),await this[_0x3c8be3(0x231)](),await this[_0x3c8be3(0x25d)]();}async[a0_0xe07aa0(0x32c)](){const _0x452670=a0_0xe07aa0;await this[_0x452670(0x318)]('system',{'type':_0x452670(0x230),'common':{'name':'System\x20Status\x20&\x20Control'},'native':{}}),await this[_0x452670(0x318)](SYSTEM_DP_MODE,{'type':_0x452670(0x23a),'common':{'name':_0x452670(0x1d2),'type':_0x452670(0x376),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL'],'states':{[SYSTEM_MODES[_0x452670(0x2e8)]]:_0x452670(0x1dc),[SYSTEM_MODES['VACATION']]:_0x452670(0x243),[SYSTEM_MODES[_0x452670(0x30e)]]:_0x452670(0x38a),[SYSTEM_MODES['GUEST']]:_0x452670(0x233)}},'native':{}});}async[a0_0xe07aa0(0x1e8)](_0x152a97,_0x23d517=![],_0x7e5a00=![]){const _0x6a427=a0_0xe07aa0;this[_0x6a427(0x213)][_0x6a427(0x1e5)]((_0x23d517?_0x6a427(0x1de):'')+_0x6a427(0x31f)+_0x152a97+'\x22'+(_0x7e5a00?'\x20(EMERGENCY)':''));const _0x52e883=this[_0x6a427(0x21e)];let _0x15ea7e=0x0;_0x52e883['notifyTelegramEnabled']&&_0x52e883['notifyTelegramInstance']&&(await this[_0x6a427(0x2c8)](_0x52e883[_0x6a427(0x209)],_0x6a427(0x2d9),{'text':_0x152a97,'user':_0x52e883[_0x6a427(0x2a4)]}),_0x15ea7e++);if(_0x52e883[_0x6a427(0x30d)]&&_0x52e883[_0x6a427(0x34e)]){let _0x37035f={'message':_0x152a97,'title':_0x7e5a00?'üö®\x20EMERGENCY':_0x6a427(0x1fd),'priority':_0x7e5a00?0x2:0x1,'device':_0x52e883[_0x6a427(0x36d)]};_0x7e5a00&&(_0x37035f[_0x6a427(0x336)]=0x1e,_0x37035f['expire']=0xe10,_0x37035f[_0x6a427(0x355)]=_0x6a427(0x265)),await this[_0x6a427(0x2c8)](_0x52e883['notifyPushoverInstance'],'send',_0x37035f),_0x15ea7e++;}return _0x52e883[_0x6a427(0x2f6)]&&_0x52e883[_0x6a427(0x224)]&&(await this[_0x6a427(0x2c8)](_0x52e883['notifyEmailInstance'],_0x6a427(0x2d9),{'text':_0x152a97,'to':_0x52e883['notifyEmailRecipient']}),_0x15ea7e++),_0x52e883['notifyWhatsappEnabled']&&_0x52e883[_0x6a427(0x216)]&&(await this[_0x6a427(0x2c8)](_0x52e883[_0x6a427(0x216)],'send',{'text':_0x152a97,'phone':_0x52e883['notifyWhatsappRecipient']}),_0x15ea7e++),_0x52e883['notifySignalEnabled']&&_0x52e883[_0x6a427(0x26a)]&&(await this[_0x6a427(0x2c8)](_0x52e883[_0x6a427(0x26a)],_0x6a427(0x2d9),{'text':_0x152a97,'phone':_0x52e883['notifySignalRecipient']}),_0x15ea7e++),_0x15ea7e;}async[a0_0xe07aa0(0x284)](){const _0x155987=a0_0xe07aa0;try{const _0x39fc07=await this[_0x155987(0x321)](LTM_DP_RAW_LOG);if(_0x39fc07&&_0x39fc07[_0x155987(0x351)])this[_0x155987(0x24c)]=JSON[_0x155987(0x25a)](_0x39fc07[_0x155987(0x351)]);}catch(_0x4d6c46){this[_0x155987(0x24c)]=[];}}async['saveRawEventLog'](){const _0x49a2fc=a0_0xe07aa0;this[_0x49a2fc(0x24c)][_0x49a2fc(0x30a)]>RAW_LOG_MAX_SIZE&&this[_0x49a2fc(0x24c)][_0x49a2fc(0x272)](0x0,this[_0x49a2fc(0x24c)][_0x49a2fc(0x30a)]-RAW_LOG_MAX_SIZE),await this[_0x49a2fc(0x2ee)](LTM_DP_RAW_LOG,{'val':JSON[_0x49a2fc(0x1f2)](this[_0x49a2fc(0x24c)]),'ack':!![]});}async['loadDailyDigests'](){const _0x168610=a0_0xe07aa0;try{const _0x1823f9=await this[_0x168610(0x321)](LTM_DP_DAILY_DIGESTS);if(_0x1823f9&&_0x1823f9[_0x168610(0x351)])this['dailyDigests']=JSON[_0x168610(0x25a)](_0x1823f9[_0x168610(0x351)]);}catch(_0x4e8055){this['dailyDigests']=[];}await this[_0x168610(0x2a6)]();}async[a0_0xe07aa0(0x35b)](_0x25617c=!![]){const _0xbb3fe2=a0_0xe07aa0,_0x5751ef=this[_0xbb3fe2(0x21e)][_0xbb3fe2(0x35a)]||0x3c;this['dailyDigests'][_0xbb3fe2(0x30a)]>_0x5751ef&&this['dailyDigests'][_0xbb3fe2(0x272)](0x0,this[_0xbb3fe2(0x317)][_0xbb3fe2(0x30a)]-_0x5751ef);await this['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0xbb3fe2(0x1f2)](this['dailyDigests']),'ack':!![]});if(_0x25617c)await this[_0xbb3fe2(0x2a6)]();}[a0_0xe07aa0(0x36a)](){const _0x616256=a0_0xe07aa0;if(this[_0x616256(0x1ef)])this[_0x616256(0x1ef)][_0x616256(0x323)]();if(!this[_0x616256(0x282)]){this[_0x616256(0x2ee)](LTM_DP_STATUS,{'val':_0x616256(0x207),'ack':!![]});return;}this['ltmJob']=schedule[_0x616256(0x381)](LTM_SCHEDULE,()=>this[_0x616256(0x307)]());}[a0_0xe07aa0(0x31a)](){const _0x1c5409=a0_0xe07aa0;if(this[_0x1c5409(0x246)])clearInterval(this[_0x1c5409(0x246)]);if(!this[_0x1c5409(0x282)])return;this[_0x1c5409(0x246)]=setInterval(()=>this['runBaselineDriftAnalysis'](),(this[_0x1c5409(0x21e)][_0x1c5409(0x1e0)]||0x18)*0x36ee80),setTimeout(()=>this['runBaselineDriftAnalysis'](),0x1388);}async['resetAnalysisStates'](){const _0x51dd9c=a0_0xe07aa0;await this[_0x51dd9c(0x2ee)](_0x51dd9c(0x37f),{'val':'No\x20recent\x20activity.','ack':!![]}),await this[_0x51dd9c(0x2ee)](_0x51dd9c(0x22c),{'val':this[_0x51dd9c(0x282)]?'N/A\x20(No\x20Activity)':_0x51dd9c(0x360),'ack':!![]}),await this[_0x51dd9c(0x2ee)](_0x51dd9c(0x238),{'val':![],'ack':!![]}),await this[_0x51dd9c(0x2ee)](_0x51dd9c(0x350),{'val':![],'ack':!![]}),this[_0x51dd9c(0x239)]=![];}async['updateAnalysisHistory'](_0x19bba5){const _0xa3b77a=a0_0xe07aa0;this[_0xa3b77a(0x1fa)]['unshift'](_0x19bba5);if(this[_0xa3b77a(0x1fa)][_0xa3b77a(0x30a)]>ANALYSIS_HISTORY_MAX_SIZE)this[_0xa3b77a(0x1fa)]['pop']();await this[_0xa3b77a(0x2ee)]('analysis.analysisHistory',{'val':JSON[_0xa3b77a(0x1f2)](this['analysisHistory']),'ack':!![]});}[a0_0xe07aa0(0x26e)](){const _0x23fb0c=a0_0xe07aa0;if(this[_0x23fb0c(0x2f0)])this[_0x23fb0c(0x2f0)]['cancel']();this['modeResetJob']=schedule[_0x23fb0c(0x381)](MODE_RESET_SCHEDULE,async()=>{const _0x6cc0a6=_0x23fb0c;await this[_0x6cc0a6(0x2b8)](),AUTO_RESET_MODES[_0x6cc0a6(0x306)](this['currentSystemMode'])&&await this[_0x6cc0a6(0x2ee)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x6cc0a6(0x2e8)],'ack':![]});});}async[a0_0xe07aa0(0x2a6)](){const _0x3e6b2b=a0_0xe07aa0;if(!this[_0x3e6b2b(0x282)]){await this[_0x3e6b2b(0x2ee)](LTM_DP_BASELINE_STATUS,{'val':_0x3e6b2b(0x207),'ack':!![]});return;}const _0x44606f=this['dailyDigests'][_0x3e6b2b(0x30a)]>=(this[_0x3e6b2b(0x21e)][_0x3e6b2b(0x2a2)]||0x7)?_0x3e6b2b(0x38c)+this[_0x3e6b2b(0x317)]['length']+_0x3e6b2b(0x29d):_0x3e6b2b(0x220)+this[_0x3e6b2b(0x317)][_0x3e6b2b(0x30a)]+'/'+(this[_0x3e6b2b(0x21e)][_0x3e6b2b(0x2a2)]||0x7)+')';await this[_0x3e6b2b(0x2ee)](LTM_DP_BASELINE_STATUS,{'val':_0x44606f,'ack':!![]});}async[a0_0xe07aa0(0x231)](){const _0xa5289c=a0_0xe07aa0;await this['extendObjectAsync'](_0xa5289c(0x33a),{'type':_0xa5289c(0x230),'common':{'name':_0xa5289c(0x33a)},'native':{}}),await this['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':'state','common':{'name':_0xa5289c(0x37b),'type':_0xa5289c(0x376),'role':_0xa5289c(0x30c),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0xa5289c(0x23a),'common':{'name':_0xa5289c(0x237),'type':_0xa5289c(0x376),'role':_0xa5289c(0x30c),'read':!![],'write':![]},'native':{}}),await this[_0xa5289c(0x318)](LTM_DP_STATUS,{'type':_0xa5289c(0x23a),'common':{'name':_0xa5289c(0x1e6),'type':_0xa5289c(0x376),'role':'text','read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_TRIGGER_DIGEST,{'type':'state','common':{'name':_0xa5289c(0x2ae),'type':_0xa5289c(0x38b),'role':_0xa5289c(0x255),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0xa5289c(0x318)](LTM_DP_BASELINE_STATUS,{'type':_0xa5289c(0x23a),'common':{'name':'Baseline\x20Status','type':_0xa5289c(0x376),'role':_0xa5289c(0x256),'read':!![],'write':![]},'native':{}});}async[a0_0xe07aa0(0x25d)](){const _0x8532c8=a0_0xe07aa0;await this['extendObjectAsync'](LTM_DP_DRIFT_CHANNEL,{'type':_0x8532c8(0x230),'common':{'name':'Drift\x20Analysis'},'native':{}}),await this[_0x8532c8(0x318)](LTM_DP_DRIFT_STATUS,{'type':'state','common':{'name':_0x8532c8(0x2d0),'type':_0x8532c8(0x376),'role':_0x8532c8(0x23a),'read':!![],'write':![],'def':_0x8532c8(0x338)},'native':{}}),await this[_0x8532c8(0x318)](LTM_DP_DRIFT_DETAILS,{'type':_0x8532c8(0x23a),'common':{'name':'Drift\x20Details','type':_0x8532c8(0x376),'role':'text','read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x8532c8(0x23a),'common':{'name':'Last\x20Check','type':_0x8532c8(0x367),'role':'date','read':!![],'write':![]},'native':{}});}async['runBaselineDriftAnalysis'](){const _0x4d46e1=a0_0xe07aa0;if(!this[_0x4d46e1(0x282)]||!this[_0x4d46e1(0x30f)])return;const _0x55acf2=this[_0x4d46e1(0x21e)][_0x4d46e1(0x261)]||0xe;if(this[_0x4d46e1(0x317)][_0x4d46e1(0x30a)]<_0x55acf2+(this[_0x4d46e1(0x21e)][_0x4d46e1(0x2a2)]||0x7)){await this[_0x4d46e1(0x2ee)](LTM_DP_DRIFT_STATUS,{'val':_0x4d46e1(0x320),'ack':!![]});return;}const _0x32a6c2=this['dailyDigests'][_0x4d46e1(0x36b)](-_0x55acf2),_0x16624d=this['dailyDigests']['slice'](0x0,this[_0x4d46e1(0x317)][_0x4d46e1(0x30a)]-_0x55acf2),_0x259eab='ROLLE:\x20Data\x20Scientist.\x20VERGLEICHE:\x20Dataset\x20A\x20(Recent)\x20vs\x20B\x20(Established).\x20ZIEL:\x20Erkenne\x20Drift.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aB\x20(LTB):\x0a'+JSON[_0x4d46e1(0x1f2)](_0x16624d)+_0x4d46e1(0x27a)+JSON[_0x4d46e1(0x1f2)](_0x32a6c2);try{const _0x215104=await this[_0x4d46e1(0x30f)]['generateContent'](_0x259eab),_0x457bbe=JSON[_0x4d46e1(0x25a)](_0x215104[_0x4d46e1(0x2c6)][_0x4d46e1(0x256)]()[_0x4d46e1(0x353)](/```json|```/g,'')[_0x4d46e1(0x382)]());_0x457bbe['baselineDrift']&&(await this[_0x4d46e1(0x2ee)](LTM_DP_DRIFT_STATUS,{'val':_0x457bbe[_0x4d46e1(0x31c)],'ack':!![]}),await this[_0x4d46e1(0x2ee)](LTM_DP_DRIFT_DETAILS,{'val':_0x457bbe[_0x4d46e1(0x28f)],'ack':!![]}),await this[_0x4d46e1(0x2ee)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x4d46e1(0x1e4)](),'ack':!![]}));}catch(_0x192d1d){}}async[a0_0xe07aa0(0x2b8)](){const _0x1380c9=a0_0xe07aa0;try{const _0x2c5112=await this[_0x1380c9(0x321)](SYSTEM_DP_MODE);_0x2c5112&&_0x2c5112[_0x1380c9(0x351)]&&Object[_0x1380c9(0x2fe)](SYSTEM_MODES)['includes'](_0x2c5112[_0x1380c9(0x351)])?this[_0x1380c9(0x324)]=_0x2c5112[_0x1380c9(0x351)]:(this[_0x1380c9(0x324)]=SYSTEM_MODES['NORMAL'],await this[_0x1380c9(0x2ee)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x1380c9(0x2e8)],'ack':!![]}));}catch(_0x27a6f2){this[_0x1380c9(0x324)]=SYSTEM_MODES[_0x1380c9(0x2e8)];}}async['getSystemUUID'](){const _0x599865=a0_0xe07aa0;try{const _0x1d11dd=await this[_0x599865(0x1ed)](_0x599865(0x292));if(_0x1d11dd&&_0x1d11dd['native']&&_0x1d11dd['native'][_0x599865(0x236)])return _0x1d11dd[_0x599865(0x20b)]['uuid'];return _0x599865(0x2c4);}catch(_0x757c0a){return _0x599865(0x2b4);}}async[a0_0xe07aa0(0x2d7)](_0x1a4bc9){const _0x231015=a0_0xe07aa0;if(!_0x1a4bc9)return![];this[_0x231015(0x29e)]=await this[_0x231015(0x370)]();if(_0x1a4bc9===_0x231015(0x296)||_0x1a4bc9['startsWith']('PRO-'))return!![];return![];}[a0_0xe07aa0(0x371)](_0x224160){const _0x5eea58=a0_0xe07aa0;if(this['analysisTimer'])clearInterval(this['analysisTimer']);if(this[_0x5eea58(0x246)])clearInterval(this[_0x5eea58(0x246)]);if(this[_0x5eea58(0x1ef)])this[_0x5eea58(0x1ef)][_0x5eea58(0x323)]();if(this[_0x5eea58(0x2f0)])this['modeResetJob'][_0x5eea58(0x323)]();if(this['briefingJob'])this['briefingJob'][_0x5eea58(0x323)]();if(this[_0x5eea58(0x2c0)])clearTimeout(this['exitTimer']);if(this[_0x5eea58(0x29c)])clearTimeout(this[_0x5eea58(0x29c)]);_0x224160();}async['onMessage'](_0x1061e1){const _0x184b39=a0_0xe07aa0;if(typeof _0x1061e1===_0x184b39(0x326)&&_0x1061e1[_0x184b39(0x24f)]){if(_0x1061e1[_0x184b39(0x2db)]===_0x184b39(0x28e)){if(!_0x1061e1[_0x184b39(0x24f)]['apiKey'])return this[_0x184b39(0x1cf)](_0x1061e1[_0x184b39(0x2f4)],_0x1061e1['command'],{'success':![],'message':_0x184b39(0x1fb)},_0x1061e1[_0x184b39(0x251)]);try{const _0x2089f2=new GoogleGenerativeAI(_0x1061e1[_0x184b39(0x24f)]['apiKey'])[_0x184b39(0x2af)]({'model':_0x184b39(0x1d1)});await _0x2089f2[_0x184b39(0x304)](_0x184b39(0x248)),this['sendTo'](_0x1061e1[_0x184b39(0x2f4)],_0x1061e1['command'],{'success':!![],'message':_0x184b39(0x262)},_0x1061e1[_0x184b39(0x251)]);}catch(_0x342687){this['sendTo'](_0x1061e1[_0x184b39(0x2f4)],_0x1061e1[_0x184b39(0x2db)],{'success':![],'message':_0x342687[_0x184b39(0x24f)]},_0x1061e1['callback']);}}else{if(_0x1061e1['command']==='testNotification'){const _0x36fe14=await this[_0x184b39(0x1e8)](_0x184b39(0x24e),!![]);this[_0x184b39(0x1cf)](_0x1061e1[_0x184b39(0x2f4)],_0x1061e1['command'],{'success':_0x36fe14>0x0,'message':_0x36fe14+_0x184b39(0x34b)},_0x1061e1[_0x184b39(0x251)]);}else{if(_0x1061e1['command']==='getLtmData'){if(!this[_0x184b39(0x282)])return this[_0x184b39(0x1cf)](_0x1061e1[_0x184b39(0x2f4)],_0x1061e1[_0x184b39(0x2db)],{'success':![],'isPro':![]},_0x1061e1[_0x184b39(0x251)]);let _0x536b70={'status':_0x184b39(0x338),'details':'','lastCheck':0x0};try{_0x536b70[_0x184b39(0x276)]=(await this['getStateAsync'](LTM_DP_DRIFT_STATUS))[_0x184b39(0x351)],_0x536b70[_0x184b39(0x1e1)]=(await this[_0x184b39(0x321)](LTM_DP_DRIFT_DETAILS))['val'],_0x536b70[_0x184b39(0x25e)]=(await this['getStateAsync'](LTM_DP_DRIFT_LAST_CHECK))[_0x184b39(0x351)];}catch(_0x30a755){}this[_0x184b39(0x1cf)](_0x1061e1[_0x184b39(0x2f4)],_0x1061e1[_0x184b39(0x2db)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x536b70,'analysisHistory':this[_0x184b39(0x1fa)]},_0x1061e1[_0x184b39(0x251)]);}else{if(_0x1061e1['command']==='getEnums'){const _0x404329=await this['getForeignObjectsAsync'](_0x184b39(0x260),_0x184b39(0x250)),_0xd6973b=[];if(_0x404329)for(const _0x310227 in _0x404329){const _0x32e776=_0x404329[_0x310227],_0x2e8d34=(_0x32e776[_0x184b39(0x356)]&&typeof _0x32e776['common'][_0x184b39(0x2ba)]===_0x184b39(0x326)?_0x32e776[_0x184b39(0x356)][_0x184b39(0x2ba)]['de']:_0x32e776['common'][_0x184b39(0x2ba)])||_0x32e776['common']['name'];_0xd6973b[_0x184b39(0x1f4)]({'id':_0x310227,'name':_0x2e8d34});}this[_0x184b39(0x1cf)](_0x1061e1['from'],_0x1061e1['command'],{'success':!![],'enums':_0xd6973b},_0x1061e1[_0x184b39(0x251)]);}else{if(_0x1061e1[_0x184b39(0x2db)]==='scanDevices')try{const _0x5a500a=await this['scanForDevices'](_0x1061e1[_0x184b39(0x24f)]||{});this['sendTo'](_0x1061e1[_0x184b39(0x2f4)],_0x1061e1[_0x184b39(0x2db)],{'success':!![],'devices':_0x5a500a},_0x1061e1[_0x184b39(0x251)]);}catch(_0x1dc5ab){this[_0x184b39(0x1cf)](_0x1061e1[_0x184b39(0x2f4)],_0x1061e1[_0x184b39(0x2db)],{'success':![],'error':_0x1dc5ab[_0x184b39(0x24f)]},_0x1061e1[_0x184b39(0x251)]);}else{if(_0x1061e1[_0x184b39(0x2db)]===_0x184b39(0x298)){const {historyId:_0x5109b5,rating:_0x41dc40,comment:_0x49bef8,alertReason:_0x2619e9}=_0x1061e1[_0x184b39(0x24f)];_0x5109b5&&_0x41dc40?(await this['saveFeedback']({'timestamp':Date['now'](),'historyId':_0x5109b5,'rating':_0x41dc40,'comment':_0x49bef8,'alertReason':_0x2619e9}),this['sendTo'](_0x1061e1[_0x184b39(0x2f4)],_0x1061e1[_0x184b39(0x2db)],{'success':!![]},_0x1061e1['callback'])):this[_0x184b39(0x1cf)](_0x1061e1['from'],_0x1061e1[_0x184b39(0x2db)],{'success':![],'error':_0x184b39(0x268)},_0x1061e1[_0x184b39(0x251)]);}}}}}}}}}if(require[a0_0xe07aa0(0x313)]!==module)module['exports']=_0x55015f=>new CogniLiving(_0x55015f);else new CogniLiving();