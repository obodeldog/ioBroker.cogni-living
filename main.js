const a0_0xfe3f22=a0_0x31a7;(function(_0x28dd1c,_0x402bc5){const _0x3fa90d=a0_0x31a7,_0x5e5813=_0x28dd1c();while(!![]){try{const _0x5c7bfb=-parseInt(_0x3fa90d(0x1ca))/0x1+parseInt(_0x3fa90d(0x253))/0x2+parseInt(_0x3fa90d(0x1c0))/0x3*(parseInt(_0x3fa90d(0x1fc))/0x4)+parseInt(_0x3fa90d(0x1a6))/0x5*(-parseInt(_0x3fa90d(0x1e5))/0x6)+parseInt(_0x3fa90d(0x18d))/0x7+parseInt(_0x3fa90d(0x20b))/0x8*(parseInt(_0x3fa90d(0x1be))/0x9)+-parseInt(_0x3fa90d(0x1d5))/0xa;if(_0x5c7bfb===_0x402bc5)break;else _0x5e5813['push'](_0x5e5813['shift']());}catch(_0x1dff24){_0x5e5813['push'](_0x5e5813['shift']());}}}(a0_0x48e9,0x4d1b7));const a0_0x44b83a=(function(){let _0x1b4420=!![];return function(_0x5d80c0,_0x16a8fe){const _0x2fec04=_0x1b4420?function(){if(_0x16a8fe){const _0x27ce17=_0x16a8fe['apply'](_0x5d80c0,arguments);return _0x16a8fe=null,_0x27ce17;}}:function(){};return _0x1b4420=![],_0x2fec04;};}()),a0_0x55d808=a0_0x44b83a(this,function(){const _0x4eeea3=a0_0x31a7;return a0_0x55d808[_0x4eeea3(0x22d)]()[_0x4eeea3(0x249)](_0x4eeea3(0x1f1))[_0x4eeea3(0x22d)]()[_0x4eeea3(0x18f)](a0_0x55d808)[_0x4eeea3(0x249)](_0x4eeea3(0x1f1));});a0_0x55d808();function a0_0x31a7(_0x1ced4b,_0x2be9ca){const _0x3b315c=a0_0x48e9();return a0_0x31a7=function(_0x55d808,_0x44b83a){_0x55d808=_0x55d808-0x182;let _0x48e9ff=_0x3b315c[_0x55d808];return _0x48e9ff;},a0_0x31a7(_0x1ced4b,_0x2be9ca);}'use strict';function a0_0x48e9(){const _0x1e8bfe=['location','checkWifiPresence','scanForDevices','createAllObjects','driftAnalysisTimer','analysis.triggerBriefing','178914mairty','LTM.triggerDailyDigest','message','setupDriftAnalysisScheduler','ANALYZE_GAIT','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','exitGraceTimer','Kein\x20Kalender-Adapter','Daten\x20nicht\x20verfÃ¼gbar','dependencyInstallInProgress','licenseKey','sort','(((.+)+)+)+$','triggerDailyDigest','name','\x20Tage)','getHours','from','triggerGaitAnalysis','weatherInstance','dailyDigests','analysis.topology.structure','main','128mOzjcj','analysis.automation.autoApply','exports','Sec-Training\x20started...','exitTimer','stateChange','testNotification','Gesendet','push','geminiApiKey','version','analysisTimer','getOutsideTemperatureNumeric','sensorLastValues','subscribeStates','16yxOcll','inactivityThresholdHours','ANALYZE_TREND','briefingJob','apiKey','runPythonHealthCheck','TRAIN_HEALTH','genAI','modeResetJob','LTM.trainingData.sequences','text','Verbunden','enum.rooms.*','updateTopologyMatrix','ltmJob','.data.table','updateTopology','LTM.trainingData.thermodynamics','Fehler:\x20','abortExitTimer','updateHealthVector','Test','sendMorningBriefing','now','getStateAsync','analysisInterval','getGenerativeModel','automation.triggerAction','error','Gemini\x20AI\x20initialized.','WiFi\x20Presence\x20detected.','sendTo','onUnload','analysis.health.todayVector','toString','send','ack','parse','isArray','setPresence','cancel','system.mode','NORMAL','SYSTEM_MODES','getEnums','stringify','cogni-living\x20adapter\x20starting\x20(v','floor','onReady','subscribeForeignStatesAsync','runAutopilot','initHistory','PYTHON_EXE','onStateChange','isProVersion','enum.functions.*','LTM.rawEventLog','telegram','endsWith','SYSTEM_DP_MODE','presenceDevices','analysisHistory','search','find','getMinutes','notifyTelegramInstance','SET_TOPOLOGY','includes','rawEventLog','config','scanDevices','currentSystemMode','908422WUKqWh','calendarName','startSystem','./lib/ai_agent','startService','getLtmData','triggerEnergyPrediction','generateContent','debug','ready','analysis.training.status','instance','1226981FzgYrj','./lib/python_bridge','constructor','getForeignStateAsync','object','toLowerCase','log','initZombies','VACATION','analysis.training.triggerHealth','values','analysis.training.triggerTopology','isPresent','analysis.training.triggerComfort','./lib/setup','testContext','checkAndInstall','enum','bind',')\x20-\x20Phase\x20C\x20(Hardened)','setHours','./lib/topology','analysis.automation.triggerAction','slice','minDaysForBaseline','25skUXhB','setStateAsync','stopService','Kein\x20Wetter-Adapter','geminiModel','system.presenceWho','isGracePeriodActive','runGeminiAnalysis','info','setupLtmScheduler','timestamp','Aktiv\x20(','./lib/scanner','getForeignObjectsAsync','loadSystemMode','system.adapter.','runBaselineDriftAnalysis','setupModeResetScheduler','type','online','onMessage','fill','length','checkLicense','401535UYQYpZ','calendarInstance','51870IcwUNu','callback','command','devices','unload','common','_calName','updated','Lernphase\x20(','matrix','50259EHYPjd','temperature','getForeignObjectAsync','forEach','analysis.trigger','createDailyDigest','processSensorEvent','Standard','val','@iobroker/adapter-core','eventHistory','7568190lScEHU','.communicate.request','LTM.dailyDigests','getState','executeAutomationAction','pop','split','analysis.training.triggerSecurity','setState','Keine\x20Antwort\x20von\x20Gemini'];a0_0x48e9=function(){return _0x1e8bfe;};return a0_0x48e9();}const utils=require(a0_0xfe3f22(0x1d3)),{GoogleGenerativeAI}=require('@google/generative-ai'),installer=require('./lib/installer'),scanner=require(a0_0xfe3f22(0x1b2)),schedulers=require('./lib/scheduler'),topology=require(a0_0xfe3f22(0x1a2)),setup=require(a0_0xfe3f22(0x19b)),recorder=require('./lib/recorder'),pythonBridge=require(a0_0xfe3f22(0x18e)),aiAgent=require(a0_0xfe3f22(0x184)),deadMan=require('./lib/dead_man'),GEMINI_MODEL='models/gemini-flash-latest',ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils['Adapter']{constructor(_0x3e4e86){const _0x5453ba=a0_0xfe3f22;super({..._0x3e4e86,'name':'cogni-living'}),this[_0x5453ba(0x1d4)]=[],this[_0x5453ba(0x248)]=[],this[_0x5453ba(0x24f)]=[],this['dailyDigests']=[],this[_0x5453ba(0x209)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x5453ba(0x199)]=!![],this['exitTimer']=null,this[_0x5453ba(0x1eb)]=null,this[_0x5453ba(0x1ac)]=![],this['genAI']=null,this[_0x5453ba(0x1aa)]=null,this[_0x5453ba(0x252)]=setup[_0x5453ba(0x236)][_0x5453ba(0x235)],this[_0x5453ba(0x241)]=![],this['lastAlertState']=![],this[_0x5453ba(0x207)]=null,this[_0x5453ba(0x219)]=null,this['modeResetJob']=null,this[_0x5453ba(0x1e3)]=null,this['briefingJob']=null,this[_0x5453ba(0x1ee)]=![],this['on'](_0x5453ba(0x18a),this[_0x5453ba(0x23b)][_0x5453ba(0x19f)](this)),this['on'](_0x5453ba(0x201),this[_0x5453ba(0x240)][_0x5453ba(0x19f)](this)),this['on'](_0x5453ba(0x1c4),this[_0x5453ba(0x22b)][_0x5453ba(0x19f)](this)),this['on'](_0x5453ba(0x1e7),this[_0x5453ba(0x1ba)][_0x5453ba(0x19f)](this));}async[a0_0xfe3f22(0x23b)](){const _0x4f3228=a0_0xfe3f22;this['log'][_0x4f3228(0x1ae)](_0x4f3228(0x239)+this[_0x4f3228(0x206)]+_0x4f3228(0x1a0));if(!installer[_0x4f3228(0x19d)](this,()=>this[_0x4f3228(0x183)]()))return;}async['startSystem'](){const _0x502e9a=a0_0xfe3f22;await setup[_0x502e9a(0x194)](this);try{this[_0x502e9a(0x241)]=await setup[_0x502e9a(0x1bd)](this[_0x502e9a(0x250)][_0x502e9a(0x1ef)]);}catch(_0x49410a){}if(!this['config']['inactivityThresholdHours']||this[_0x502e9a(0x250)][_0x502e9a(0x20c)]<0.1)this[_0x502e9a(0x250)][_0x502e9a(0x20c)]=0xc;await setup[_0x502e9a(0x23e)](this),await setup['initSystemConfig'](this);if(this[_0x502e9a(0x250)][_0x502e9a(0x205)])try{this[_0x502e9a(0x212)]=new GoogleGenerativeAI(this['config'][_0x502e9a(0x205)]),this[_0x502e9a(0x1aa)]=this[_0x502e9a(0x212)][_0x502e9a(0x225)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x502e9a(0x193)][_0x502e9a(0x1ae)](_0x502e9a(0x228));}catch(_0x4186ea){this[_0x502e9a(0x193)][_0x502e9a(0x227)]('Gemini\x20Init\x20Error:\x20'+_0x4186ea[_0x502e9a(0x1e7)]);}await setup[_0x502e9a(0x1e2)](this),await this['loadSystemMode']();try{const _0x2fae62=await this['getStateAsync']('LTM.rawEventLog');if(_0x2fae62&&_0x2fae62[_0x502e9a(0x1d2)])this[_0x502e9a(0x24f)]=JSON[_0x502e9a(0x230)](_0x2fae62[_0x502e9a(0x1d2)]);}catch(_0x2dfdb8){this[_0x502e9a(0x24f)]=[];}try{const _0x532643=await this[_0x502e9a(0x223)](_0x502e9a(0x1d7));if(_0x532643&&_0x532643['val'])this[_0x502e9a(0x1f9)]=JSON['parse'](_0x532643['val']);}catch(_0x50a8c0){this[_0x502e9a(0x1f9)]=[];}const _0x42e82b=this[_0x502e9a(0x1f9)]['length']>=(this[_0x502e9a(0x250)][_0x502e9a(0x1a5)]||0x7)?_0x502e9a(0x1b1)+this['dailyDigests']['length']+_0x502e9a(0x1f4):_0x502e9a(0x1c8)+this[_0x502e9a(0x1f9)][_0x502e9a(0x1bc)]+'/'+(this['config'][_0x502e9a(0x1a5)]||0x7)+')';await this[_0x502e9a(0x1a7)]('LTM.baselineStatus',{'val':_0x42e82b,'ack':!![]}),this[_0x502e9a(0x20a)](_0x502e9a(0x1ce)),this[_0x502e9a(0x20a)](_0x502e9a(0x1e6)),this[_0x502e9a(0x20a)](_0x502e9a(0x234)),this['subscribeStates'](_0x502e9a(0x1e4)),this[_0x502e9a(0x20a)](_0x502e9a(0x1a3)),this[_0x502e9a(0x20a)](_0x502e9a(0x1fd)),this[_0x502e9a(0x20a)](_0x502e9a(0x1dc)),this[_0x502e9a(0x20a)]('analysis.training.triggerHealth'),this[_0x502e9a(0x20a)]('analysis.training.triggerEnergy'),this['subscribeStates'](_0x502e9a(0x19a)),this[_0x502e9a(0x20a)](_0x502e9a(0x198));const _0xb71001=this[_0x502e9a(0x250)][_0x502e9a(0x1c3)];if(_0xb71001)for(const _0x54e7ec of _0xb71001){await this[_0x502e9a(0x23c)](_0x54e7ec['id']);}const _0x1f2c3e=this[_0x502e9a(0x250)][_0x502e9a(0x247)];if(_0x1f2c3e)for(const _0x403f52 of _0x1f2c3e){await this[_0x502e9a(0x23c)](_0x403f52);}if(this[_0x502e9a(0x250)]['notifyTelegramEnabled']&&this['config']['notifyTelegramInstance'])await this[_0x502e9a(0x23c)](this['config'][_0x502e9a(0x24c)]+_0x502e9a(0x1d6));setTimeout(()=>this[_0x502e9a(0x1e0)](),0x1388);if(this[_0x502e9a(0x207)])clearInterval(this['analysisTimer']);const _0xe2b84d=this[_0x502e9a(0x250)][_0x502e9a(0x224)]||0xf;_0xe2b84d>0x0&&(this[_0x502e9a(0x207)]=setInterval(()=>{const _0x22c731=_0x502e9a;this[_0x22c731(0x23d)]();},_0xe2b84d*0x3c*0x3e8)),schedulers[_0x502e9a(0x1af)](this,()=>aiAgent[_0x502e9a(0x1cf)](this,pythonBridge)),schedulers[_0x502e9a(0x1b7)](this),schedulers[_0x502e9a(0x1e8)](this,()=>aiAgent[_0x502e9a(0x1b6)](this)),schedulers['setupBriefingScheduler'](this,()=>aiAgent[_0x502e9a(0x221)](this)),pythonBridge[_0x502e9a(0x185)](this,installer[_0x502e9a(0x23f)]),setTimeout(async()=>{const _0x38c259=_0x502e9a;await topology[_0x38c259(0x21b)](this);try{const _0x4ca668=await this[_0x38c259(0x223)](_0x38c259(0x1fa));if(_0x4ca668&&_0x4ca668['val'])pythonBridge[_0x38c259(0x22e)](this,'SET_TOPOLOGY',JSON['parse'](_0x4ca668[_0x38c259(0x1d2)]));}catch(_0x4ffdeb){}this['runPythonHealthCheck'](),this[_0x38c259(0x1f7)](),this[_0x38c259(0x187)](),this['updateHealthVector']();},0x1388);}[a0_0xfe3f22(0x22b)](_0xc21b04){const _0x4032f4=a0_0xfe3f22;if(this['analysisTimer'])clearInterval(this[_0x4032f4(0x207)]);if(this[_0x4032f4(0x1e3)])clearInterval(this[_0x4032f4(0x1e3)]);if(this[_0x4032f4(0x219)])this[_0x4032f4(0x219)][_0x4032f4(0x233)]();if(this[_0x4032f4(0x213)])this[_0x4032f4(0x213)]['cancel']();if(this[_0x4032f4(0x20e)])this[_0x4032f4(0x20e)][_0x4032f4(0x233)]();recorder[_0x4032f4(0x21e)](this),pythonBridge[_0x4032f4(0x1a8)](this),_0xc21b04();}async[a0_0xfe3f22(0x240)](_0x506aa4,_0x2c1c86){const _0x57a985=a0_0xfe3f22;if(!_0x2c1c86||this['dependencyInstallInProgress'])return;if(_0x506aa4[_0x57a985(0x24e)](_0x57a985(0x244))&&_0x506aa4[_0x57a985(0x245)]('communicate.request')&&_0x2c1c86['val'])return;if(_0x506aa4===this['namespace']+'.system.mode'){if(_0x2c1c86[_0x57a985(0x1d2)]&&Object[_0x57a985(0x197)](setup[_0x57a985(0x236)])['includes'](_0x2c1c86[_0x57a985(0x1d2)])){this[_0x57a985(0x252)]=_0x2c1c86[_0x57a985(0x1d2)];if(_0x2c1c86[_0x57a985(0x1d2)]===setup[_0x57a985(0x236)][_0x57a985(0x195)])await recorder['setPresence'](this,![]);else await recorder[_0x57a985(0x232)](this,!![]);}if(!_0x2c1c86[_0x57a985(0x22f)])this[_0x57a985(0x1dd)](_0x506aa4,{'val':this[_0x57a985(0x252)],'ack':!![]});return;}if(!_0x2c1c86['ack']){_0x506aa4[_0x57a985(0x24e)]('analysis.trigger')&&_0x2c1c86[_0x57a985(0x1d2)]&&(this[_0x57a985(0x1dd)](_0x506aa4,{'val':![],'ack':!![]}),aiAgent[_0x57a985(0x1ad)](this));if(_0x506aa4['includes'](_0x57a985(0x1f2))&&_0x2c1c86['val']){this[_0x57a985(0x1dd)](_0x506aa4,{'val':![],'ack':!![]});if(this['isProVersion'])aiAgent[_0x57a985(0x1cf)](this,pythonBridge);}_0x506aa4[_0x57a985(0x24e)]('triggerBriefing')&&_0x2c1c86[_0x57a985(0x1d2)]&&(this['setState'](_0x506aa4,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this));_0x506aa4['includes'](_0x57a985(0x226))&&_0x2c1c86[_0x57a985(0x1d2)]&&(this[_0x57a985(0x1dd)](_0x506aa4,{'val':![],'ack':!![]}),aiAgent[_0x57a985(0x1d9)](this));if(_0x506aa4[_0x57a985(0x24e)](_0x57a985(0x1dc))&&_0x2c1c86[_0x57a985(0x1d2)]){this[_0x57a985(0x1dd)](_0x506aa4,{'val':![],'ack':!![]});if(this[_0x57a985(0x241)])try{const _0x5e1a1a=await this[_0x57a985(0x223)](_0x57a985(0x214));if(_0x5e1a1a&&_0x5e1a1a[_0x57a985(0x1d2)]){const _0x343e29=JSON['parse'](_0x5e1a1a[_0x57a985(0x1d2)]);this[_0x57a985(0x1a7)](_0x57a985(0x18b),{'val':_0x57a985(0x1ff),'ack':!![]}),pythonBridge[_0x57a985(0x22e)](this,'TRAIN_SECURITY',{'sequences':_0x343e29});}}catch(_0x2a624f){}}if(_0x506aa4[_0x57a985(0x24e)](_0x57a985(0x196))&&_0x2c1c86['val']){this[_0x57a985(0x1dd)](_0x506aa4,{'val':![],'ack':!![]});if(this[_0x57a985(0x241)])try{const _0x296fb7=await this['getStateAsync'](_0x57a985(0x1d7));if(_0x296fb7&&_0x296fb7[_0x57a985(0x1d2)])pythonBridge[_0x57a985(0x22e)](this,_0x57a985(0x211),{'digests':JSON[_0x57a985(0x230)](_0x296fb7['val'])});}catch(_0x409787){}}if(_0x506aa4[_0x57a985(0x24e)]('analysis.training.triggerEnergy')&&_0x2c1c86['val']){this[_0x57a985(0x1dd)](_0x506aa4,{'val':![],'ack':!![]});if(this[_0x57a985(0x241)])try{const _0x3903e5=await this[_0x57a985(0x223)](_0x57a985(0x21c));if(_0x3903e5&&_0x3903e5[_0x57a985(0x1d2)])pythonBridge[_0x57a985(0x22e)](this,'TRAIN_ENERGY',{'points':JSON[_0x57a985(0x230)](_0x3903e5[_0x57a985(0x1d2)])});}catch(_0xf40e1c){}}if(_0x506aa4['includes']('analysis.training.triggerComfort')&&_0x2c1c86['val']){this['setState'](_0x506aa4,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x352205=await this[_0x57a985(0x223)](_0x57a985(0x243));if(_0x352205&&_0x352205[_0x57a985(0x1d2)])pythonBridge[_0x57a985(0x22e)](this,'TRAIN_COMFORT',{'events':JSON[_0x57a985(0x230)](_0x352205[_0x57a985(0x1d2)])});}catch(_0x4b7e18){}}_0x506aa4['includes'](_0x57a985(0x198))&&_0x2c1c86[_0x57a985(0x1d2)]&&(this[_0x57a985(0x1dd)](_0x506aa4,{'val':![],'ack':!![]}),topology[_0x57a985(0x21b)](this));return;}if(this[_0x57a985(0x250)][_0x57a985(0x247)]&&this[_0x57a985(0x250)][_0x57a985(0x247)]['includes'](_0x506aa4)){await this['checkWifiPresence']();return;}const _0x38feed=(this[_0x57a985(0x250)]['devices']||[])[_0x57a985(0x24a)](_0x31ab5e=>_0x31ab5e['id']===_0x506aa4);if(_0x38feed){const _0xcfefb2=await recorder[_0x57a985(0x1d0)](this,_0x506aa4,_0x2c1c86,_0x38feed);_0xcfefb2&&_0xcfefb2[_0x57a985(0x1b8)]==='motion'&&_0xcfefb2[_0x57a985(0x1df)]&&this['isProVersion']&&deadMan['updateLocation'](this,_0xcfefb2[_0x57a985(0x1df)]);}}async[a0_0xfe3f22(0x1ba)](_0x5b0474){const _0x4ca604=a0_0xfe3f22;if(typeof _0x5b0474===_0x4ca604(0x191)&&_0x5b0474[_0x4ca604(0x1e7)]){if(_0x5b0474[_0x4ca604(0x1c2)]==='testApiKey')try{const _0x51998b=_0x5b0474[_0x4ca604(0x1e7)][_0x4ca604(0x20f)];if(!_0x51998b)throw new Error('Kein\x20API\x20Key\x20Ã¼bergeben');const _0x3cbfb0=new GoogleGenerativeAI(_0x51998b),_0x5c1942=_0x3cbfb0['getGenerativeModel']({'model':GEMINI_MODEL}),_0xd7057a=await _0x5c1942[_0x4ca604(0x188)](_0x4ca604(0x220)),_0x2982b0=await _0xd7057a['response'];if(_0x2982b0[_0x4ca604(0x215)]())this['sendTo'](_0x5b0474[_0x4ca604(0x1f6)],_0x5b0474[_0x4ca604(0x1c2)],{'success':!![],'message':'Verbindung\x20erfolgreich!'},_0x5b0474[_0x4ca604(0x1c1)]);else throw new Error(_0x4ca604(0x1de));}catch(_0x1dc49d){this['sendTo'](_0x5b0474[_0x4ca604(0x1f6)],_0x5b0474[_0x4ca604(0x1c2)],{'success':![],'message':_0x1dc49d[_0x4ca604(0x1e7)]},_0x5b0474[_0x4ca604(0x1c1)]);}else{if(_0x5b0474[_0x4ca604(0x1c2)]===_0x4ca604(0x251))try{const _0x49a39a=await scanner[_0x4ca604(0x1e1)](this,_0x5b0474['message']||{});this[_0x4ca604(0x22a)](_0x5b0474[_0x4ca604(0x1f6)],_0x5b0474[_0x4ca604(0x1c2)],{'success':!![],'devices':_0x49a39a},_0x5b0474['callback']);}catch(_0x65c3b8){this[_0x4ca604(0x22a)](_0x5b0474['from'],_0x5b0474[_0x4ca604(0x1c2)],{'success':![],'error':_0x65c3b8[_0x4ca604(0x1e7)]},_0x5b0474[_0x4ca604(0x1c1)]);}else{if(_0x5b0474[_0x4ca604(0x1c2)]===_0x4ca604(0x218))try{const {matrix:_0x31d713}=_0x5b0474[_0x4ca604(0x1e7)],_0xd90aad=await this['getStateAsync']('analysis.topology.structure');if(_0xd90aad&&_0xd90aad[_0x4ca604(0x1d2)]){const _0x41264b=JSON[_0x4ca604(0x230)](_0xd90aad[_0x4ca604(0x1d2)]);_0x41264b[_0x4ca604(0x1c9)]=_0x31d713,_0x41264b[_0x4ca604(0x1c7)]=Date[_0x4ca604(0x222)](),await this[_0x4ca604(0x1a7)](_0x4ca604(0x1fa),{'val':JSON['stringify'](_0x41264b),'ack':!![]}),pythonBridge['send'](this,_0x4ca604(0x24d),_0x41264b);}this[_0x4ca604(0x22a)](_0x5b0474['from'],_0x5b0474['command'],{'success':!![]},_0x5b0474[_0x4ca604(0x1c1)]);}catch(_0x1eaaf7){this['log'][_0x4ca604(0x227)](_0x1eaaf7);}else{if(_0x5b0474[_0x4ca604(0x1c2)]===_0x4ca604(0x186))this['sendTo'](_0x5b0474[_0x4ca604(0x1f6)],_0x5b0474[_0x4ca604(0x1c2)],{'success':!![],'dailyDigests':this['dailyDigests']||[],'analysisHistory':this[_0x4ca604(0x248)]||[]},_0x5b0474[_0x4ca604(0x1c1)]);else{if(_0x5b0474['command']==='getOverviewData'){const _0x4ab032=this[_0x4ca604(0x1f9)][_0x4ca604(0x1bc)],_0x23b962=new Array(0x18)[_0x4ca604(0x1bb)](0x0),_0x1be01f=new Date()[_0x4ca604(0x1a1)](0x0,0x0,0x0,0x0);this['eventHistory']&&this[_0x4ca604(0x1d4)][_0x4ca604(0x1cd)](_0x303b9f=>{const _0x3b72c7=_0x4ca604;if(_0x303b9f[_0x3b72c7(0x1b0)]>=_0x1be01f){const _0x12fc9d=new Date(_0x303b9f['timestamp'])[_0x3b72c7(0x1f5)]();if(_0x12fc9d>=0x0&&_0x12fc9d<0x18)_0x23b962[_0x12fc9d]++;}}),this[_0x4ca604(0x22a)](_0x5b0474[_0x4ca604(0x1f6)],_0x5b0474[_0x4ca604(0x1c2)],{'success':!![],'eventHistory':this[_0x4ca604(0x1d4)][_0x4ca604(0x1a4)](0x0,0xf),'stats':{'digestCount':_0x4ab032,'isPresent':this[_0x4ca604(0x199)],'hourlyActivity':_0x23b962},'automation':{'detected':![]}},_0x5b0474[_0x4ca604(0x1c1)]);}else{if(_0x5b0474[_0x4ca604(0x1c2)]===_0x4ca604(0x237)){const _0x34bae5=await this[_0x4ca604(0x1b3)](_0x4ca604(0x242),_0x4ca604(0x19e)),_0x359bdd=[];if(_0x34bae5)for(const _0x1833c4 in _0x34bae5){const _0x4c08ee=_0x34bae5[_0x1833c4],_0x4529b9=(_0x4c08ee[_0x4ca604(0x1c5)]&&typeof _0x4c08ee[_0x4ca604(0x1c5)][_0x4ca604(0x1f3)]===_0x4ca604(0x191)?_0x4c08ee['common'][_0x4ca604(0x1f3)]['de']:_0x4c08ee[_0x4ca604(0x1c5)][_0x4ca604(0x1f3)])||_0x4c08ee[_0x4ca604(0x1c5)][_0x4ca604(0x1f3)];_0x359bdd[_0x4ca604(0x204)]({'id':_0x1833c4,'name':_0x4529b9});}const _0x6cdef2=await this[_0x4ca604(0x1b3)](_0x4ca604(0x217),_0x4ca604(0x19e)),_0x1ab961=[];if(_0x6cdef2)for(const _0xfab9fb in _0x6cdef2){const _0x5c0654=_0x6cdef2[_0xfab9fb],_0x4f9ca4=(_0x5c0654[_0x4ca604(0x1c5)]&&typeof _0x5c0654[_0x4ca604(0x1c5)]['name']===_0x4ca604(0x191)?_0x5c0654[_0x4ca604(0x1c5)][_0x4ca604(0x1f3)]['de']:_0x5c0654[_0x4ca604(0x1c5)][_0x4ca604(0x1f3)])||_0xfab9fb[_0x4ca604(0x1db)]('.')[_0x4ca604(0x1da)]();_0x1ab961[_0x4ca604(0x204)](_0x4f9ca4);}this[_0x4ca604(0x22a)](_0x5b0474['from'],_0x5b0474[_0x4ca604(0x1c2)],{'success':!![],'enums':_0x359bdd,'rooms':_0x1ab961},_0x5b0474[_0x4ca604(0x1c1)]);}else{if(_0x5b0474[_0x4ca604(0x1c2)]===_0x4ca604(0x19c))try{let _0xc4a457=_0x4ca604(0x1a9),_0x49f632=_0x4ca604(0x1ec);if(this[_0x4ca604(0x250)][_0x4ca604(0x1f8)]){const _0x28e225=await recorder[_0x4ca604(0x208)](this);_0xc4a457=_0x28e225!==null?_0x28e225+'Â°C':_0x4ca604(0x1ed);}if(this[_0x4ca604(0x250)][_0x4ca604(0x1bf)]){const _0x9ab896=await this[_0x4ca604(0x1cc)](_0x4ca604(0x1b5)+this['config'][_0x4ca604(0x1bf)]);_0x49f632=_0x9ab896?_0x4ca604(0x216):'Instanz\x20nicht\x20gefunden';}this[_0x4ca604(0x22a)](_0x5b0474[_0x4ca604(0x1f6)],_0x5b0474['command'],{'success':!![],'weather':_0xc4a457,'calendar':_0x49f632},_0x5b0474['callback']);}catch(_0x1ad55e){this[_0x4ca604(0x22a)](_0x5b0474['from'],_0x5b0474[_0x4ca604(0x1c2)],{'success':![],'error':_0x1ad55e[_0x4ca604(0x1e7)]},_0x5b0474['callback']);}else{if(_0x5b0474[_0x4ca604(0x1c2)]==='getCalendarNames')try{const _0x37da8e=_0x5b0474[_0x4ca604(0x1e7)][_0x4ca604(0x18c)],_0x1d0e98=await this[_0x4ca604(0x190)](_0x37da8e+_0x4ca604(0x21a));let _0x116594=[];if(_0x1d0e98&&_0x1d0e98[_0x4ca604(0x1d2)]){const _0x1461fd=JSON['parse'](_0x1d0e98[_0x4ca604(0x1d2)]),_0x5e13d0=new Set();Array[_0x4ca604(0x231)](_0x1461fd)&&_0x1461fd[_0x4ca604(0x1cd)](_0x23d1de=>{const _0x51e0ed=_0x4ca604;if(_0x23d1de[_0x51e0ed(0x1c6)])_0x5e13d0['add'](_0x23d1de[_0x51e0ed(0x1c6)]);else{if(_0x23d1de[_0x51e0ed(0x182)])_0x5e13d0['add'](_0x23d1de[_0x51e0ed(0x182)]);}}),_0x116594=Array[_0x4ca604(0x1f6)](_0x5e13d0)[_0x4ca604(0x1f0)]();}if(_0x116594[_0x4ca604(0x1bc)]===0x0)_0x116594=[_0x4ca604(0x1d1)];this[_0x4ca604(0x22a)](_0x5b0474['from'],_0x5b0474[_0x4ca604(0x1c2)],{'success':!![],'names':_0x116594},_0x5b0474['callback']);}catch(_0x204b70){this[_0x4ca604(0x22a)](_0x5b0474[_0x4ca604(0x1f6)],_0x5b0474[_0x4ca604(0x1c2)],{'success':![],'error':_0x204b70['message']},_0x5b0474[_0x4ca604(0x1c1)]);}else{if(_0x5b0474[_0x4ca604(0x1c2)]===_0x4ca604(0x202))try{await setup['sendNotification'](this,'ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.',![],![]),this[_0x4ca604(0x22a)](_0x5b0474[_0x4ca604(0x1f6)],_0x5b0474[_0x4ca604(0x1c2)],{'success':!![],'message':_0x4ca604(0x203)},_0x5b0474[_0x4ca604(0x1c1)]);}catch(_0x4ad123){this['log'][_0x4ca604(0x227)]('Notification\x20Test\x20Failed:\x20'+_0x4ad123[_0x4ca604(0x1e7)]),this[_0x4ca604(0x22a)](_0x5b0474[_0x4ca604(0x1f6)],_0x5b0474[_0x4ca604(0x1c2)],{'success':![],'message':_0x4ca604(0x21d)+_0x4ad123['message']},_0x5b0474[_0x4ca604(0x1c1)]);}}}}}}}}}}}async[a0_0xfe3f22(0x1b4)](){const _0x14ee8a=a0_0xfe3f22;try{const _0x12a498=await this[_0x14ee8a(0x223)](setup[_0x14ee8a(0x246)]);_0x12a498&&_0x12a498[_0x14ee8a(0x1d2)]&&Object['values'](setup[_0x14ee8a(0x236)])[_0x14ee8a(0x24e)](_0x12a498[_0x14ee8a(0x1d2)])?this[_0x14ee8a(0x252)]=_0x12a498[_0x14ee8a(0x1d2)]:(this[_0x14ee8a(0x252)]=setup['SYSTEM_MODES'][_0x14ee8a(0x235)],await this[_0x14ee8a(0x1a7)](setup[_0x14ee8a(0x246)],{'val':setup[_0x14ee8a(0x236)][_0x14ee8a(0x235)],'ack':!![]}));}catch(_0x558cf8){this['currentSystemMode']=setup[_0x14ee8a(0x236)][_0x14ee8a(0x235)];}}async[a0_0xfe3f22(0x1e0)](){const _0x605426=a0_0xfe3f22;try{const _0x33b818=this[_0x605426(0x250)][_0x605426(0x247)]||[];let _0x4af975=![];const _0x2b5a73=[];for(const _0x1b40b2 of _0x33b818){try{const _0x2dd2e9=await this[_0x605426(0x190)](_0x1b40b2);_0x2dd2e9&&(_0x2dd2e9[_0x605426(0x1d2)]===!![]||_0x2dd2e9[_0x605426(0x1d2)]===_0x605426(0x1b9)||_0x2dd2e9[_0x605426(0x1d2)]===0x1)&&(_0x4af975=!![],_0x2b5a73[_0x605426(0x204)](_0x1b40b2));}catch(_0x350e30){}}return await this[_0x605426(0x1a7)](_0x605426(0x1ab),{'val':_0x2b5a73['join'](',\x20'),'ack':!![]}),_0x4af975&&(this[_0x605426(0x200)]&&(this[_0x605426(0x193)][_0x605426(0x1ae)](_0x605426(0x229)),recorder[_0x605426(0x21e)](this)),!this['isPresent']&&this[_0x605426(0x252)]===setup[_0x605426(0x236)][_0x605426(0x235)]&&await recorder[_0x605426(0x232)](this,!![])),_0x4af975;}catch(_0x2be293){return![];}}async[a0_0xfe3f22(0x23d)](){const _0x2d3872=a0_0xfe3f22;this[_0x2d3872(0x193)][_0x2d3872(0x189)](_0x2d3872(0x1ea)),await aiAgent['runGeminiAnalysis'](this),this['updateHealthVector'](),this['triggerGaitAnalysis'](),this[_0x2d3872(0x187)]();}['triggerGaitAnalysis'](){const _0x546cf7=a0_0xfe3f22;if(!this[_0x546cf7(0x241)])return;try{this[_0x546cf7(0x1d8)](_0x546cf7(0x214),(_0x39095d,_0x37de03)=>{const _0x422273=_0x546cf7;_0x37de03&&_0x37de03[_0x422273(0x1d2)]&&pythonBridge[_0x422273(0x22e)](this,_0x422273(0x1e9),{'sequences':JSON['parse'](_0x37de03['val'])});});}catch(_0x1094df){}}async[a0_0xfe3f22(0x187)](){const _0x98e764=a0_0xfe3f22;if(!this[_0x98e764(0x241)])return;try{const _0x2d8feb=await recorder['getOutsideTemperatureNumeric'](this);if(_0x2d8feb===null)return;const _0x50a05e={},_0x27270e=this[_0x98e764(0x250)][_0x98e764(0x1c3)]||[];for(const _0x5e584a of _0x27270e){if(_0x5e584a['type']===_0x98e764(0x1cb)&&_0x5e584a[_0x98e764(0x1df)]){const _0x400b81=this[_0x98e764(0x209)][_0x5e584a['id']];if(_0x400b81!==undefined)_0x50a05e[_0x5e584a[_0x98e764(0x1df)]]=_0x400b81;}}Object['keys'](_0x50a05e)[_0x98e764(0x1bc)]>0x0&&pythonBridge[_0x98e764(0x22e)](this,'PREDICT_ENERGY',{'current_temps':_0x50a05e,'t_out':_0x2d8feb});}catch(_0x254e85){}}[a0_0xfe3f22(0x21f)](){const _0x4e3f3a=a0_0xfe3f22;if(!this['rawEventLog']||this[_0x4e3f3a(0x24f)][_0x4e3f3a(0x1bc)]===0x0)return;const _0x5cf526=new Array(0x60)['fill'](0x0),_0x206160=new Date()[_0x4e3f3a(0x1a1)](0x0,0x0,0x0,0x0);this[_0x4e3f3a(0x24f)][_0x4e3f3a(0x1cd)](_0x20dd6b=>{const _0x8107c2=_0x4e3f3a,_0x211b27=new Date(_0x20dd6b[_0x8107c2(0x1b0)]);if(_0x211b27['getTime']()>=_0x206160){const _0x14e21f=_0x211b27[_0x8107c2(0x1f5)](),_0x25db8b=_0x211b27[_0x8107c2(0x24b)](),_0x112abb=_0x14e21f*0x4+Math[_0x8107c2(0x23a)](_0x25db8b/0xf);if(_0x112abb>=0x0&&_0x112abb<0x60)_0x5cf526[_0x112abb]++;}}),this[_0x4e3f3a(0x1a7)](_0x4e3f3a(0x22c),{'val':JSON[_0x4e3f3a(0x238)](_0x5cf526),'ack':!![]});}[a0_0xfe3f22(0x210)](){const _0x4da65d=a0_0xfe3f22;if(!this[_0x4da65d(0x1f9)]||this[_0x4da65d(0x1f9)][_0x4da65d(0x1bc)]<0x2)return;const _0x2fdeea=this[_0x4da65d(0x1f9)]['map'](_0x5ec002=>{const _0x4771c7=_0x4da65d,_0x15c0ae=(_0x5ec002['activityLevel']||'')[_0x4771c7(0x192)]();return ACTIVITY_LEVEL_MAP[_0x15c0ae]||0x32;});pythonBridge['send'](this,_0x4da65d(0x20d),{'values':_0x2fdeea,'tag':'Activity-Level'});}}if(require[a0_0xfe3f22(0x1fb)]!==module)module[a0_0xfe3f22(0x1fe)]=_0x20deb=>new CogniLiving(_0x20deb);else new CogniLiving();