const a0_0xabbc9d=a0_0x32a4;(function(_0x333a03,_0x4f6975){const _0x4aeb43=a0_0x32a4,_0x16ad51=_0x333a03();while(!![]){try{const _0x35c041=parseInt(_0x4aeb43(0x168))/0x1+-parseInt(_0x4aeb43(0x1c6))/0x2*(-parseInt(_0x4aeb43(0xd5))/0x3)+-parseInt(_0x4aeb43(0x1a3))/0x4+parseInt(_0x4aeb43(0x190))/0x5*(parseInt(_0x4aeb43(0xe6))/0x6)+parseInt(_0x4aeb43(0xb4))/0x7*(-parseInt(_0x4aeb43(0x19f))/0x8)+parseInt(_0x4aeb43(0x166))/0x9+parseInt(_0x4aeb43(0x152))/0xa*(-parseInt(_0x4aeb43(0x87))/0xb);if(_0x35c041===_0x4f6975)break;else _0x16ad51['push'](_0x16ad51['shift']());}catch(_0x10bd9a){_0x16ad51['push'](_0x16ad51['shift']());}}}(a0_0x9a6d,0x7d062));const a0_0x59e3e9=(function(){let _0x4b2c35=!![];return function(_0x56ba5c,_0x45b336){const _0x28fc49=_0x4b2c35?function(){const _0x2412bf=a0_0x32a4;if(_0x45b336){const _0x33a034=_0x45b336[_0x2412bf(0xf6)](_0x56ba5c,arguments);return _0x45b336=null,_0x33a034;}}:function(){};return _0x4b2c35=![],_0x28fc49;};}()),a0_0x409836=a0_0x59e3e9(this,function(){const _0x33f431=a0_0x32a4;return a0_0x409836[_0x33f431(0x169)]()['search'](_0x33f431(0x1b8))[_0x33f431(0x169)]()[_0x33f431(0x70)](a0_0x409836)[_0x33f431(0x173)](_0x33f431(0x1b8));});a0_0x409836();'use strict';const utils=require(a0_0xabbc9d(0x7d)),{GoogleGenerativeAI}=require(a0_0xabbc9d(0x12b)),{spawn}=require('child_process'),path=require(a0_0xabbc9d(0x73)),fs=require('fs'),installer=require(a0_0xabbc9d(0x215)),scanner=require(a0_0xabbc9d(0xca)),schedulers=require(a0_0xabbc9d(0x1c1)),topology=require(a0_0xabbc9d(0x147)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0xabbc9d(0x19d),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0xabbc9d(0xf1),LTM_DP_STATUS=a0_0xabbc9d(0x9c),LTM_DP_TRIGGER_DIGEST=a0_0xabbc9d(0x100),LTM_DP_BASELINE_STATUS=a0_0xabbc9d(0x146),LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS=a0_0xabbc9d(0x11d),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0xabbc9d(0x81),SYSTEM_DP_MODE=a0_0xabbc9d(0x205),SYSTEM_MODES={'NORMAL':a0_0xabbc9d(0x1f8),'VACATION':'vacation','PARTY':a0_0xabbc9d(0x144),'GUEST':a0_0xabbc9d(0x1d9)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0xabbc9d(0xb2)],SYSTEM_MODES['GUEST']],PERSONA_MAPPING={'generic':a0_0xabbc9d(0xcc),'senior_aal':a0_0xabbc9d(0x76),'family':a0_0xabbc9d(0x149),'single_comfort':a0_0xabbc9d(0x1bd),'security':a0_0xabbc9d(0x209)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x2bfd96){const _0x4c2367=a0_0xabbc9d;try{const _0x8dc5c6=[_0x4c2367(0x14c),_0x4c2367(0x1e8)];for(const _0x44652e of _0x8dc5c6){try{const _0x375842=await _0x2bfd96[_0x4c2367(0x13a)](_0x44652e);if(_0x375842)await _0x2bfd96['delObjectAsync'](_0x44652e);}catch(_0x33374f){}}}catch(_0x1e0bcd){}}async function checkLicense(_0xdb0caa){return!![];}async function initHistory(_0x319497){const _0x43ef19=a0_0xabbc9d;try{const _0x114116=await _0x319497[_0x43ef19(0x1ca)](_0x43ef19(0x107));_0x114116&&_0x114116[_0x43ef19(0x211)]&&(_0x319497['eventHistory']=JSON[_0x43ef19(0x15c)](_0x114116[_0x43ef19(0x211)][_0x43ef19(0x169)]()));}catch(_0x119f95){_0x319497['eventHistory']=[];}try{const _0x4951d8=await _0x319497['getStateAsync'](_0x43ef19(0x171));if(_0x4951d8&&_0x4951d8['val'])_0x319497[_0x43ef19(0x217)]=JSON[_0x43ef19(0x15c)](_0x4951d8[_0x43ef19(0x211)][_0x43ef19(0x169)]());}catch(_0x3342f7){_0x319497[_0x43ef19(0x217)]=[];}if(_0x319497['eventHistory']&&_0x319497['eventHistory'][_0x43ef19(0x1db)]>0x0){_0x319497[_0x43ef19(0x1ee)][_0x43ef19(0x1f4)](_0x43ef19(0xf5));for(let _0x4c7418=_0x319497[_0x43ef19(0xfb)][_0x43ef19(0x1db)]-0x1;_0x4c7418>=0x0;_0x4c7418--){const _0x92d2c3=_0x319497['eventHistory'][_0x4c7418];if(_0x92d2c3&&_0x92d2c3['id']!==undefined&&_0x92d2c3[_0x43ef19(0xc0)]!==undefined)_0x319497[_0x43ef19(0x1fd)][_0x92d2c3['id']]=_0x92d2c3[_0x43ef19(0xc0)];}}}async function initSystemConfig(_0x542fd5){const _0x20a778=a0_0xabbc9d;try{const _0x19801d=await _0x542fd5[_0x20a778(0x1d6)](_0x20a778(0x142));if(_0x19801d&&_0x19801d[_0x20a778(0x1ec)])_0x542fd5['systemConfig']={'latitude':_0x19801d[_0x20a778(0x1ec)][_0x20a778(0x1be)]||0x0,'longitude':_0x19801d[_0x20a778(0x1ec)][_0x20a778(0x145)]||0x0,'city':_0x19801d[_0x20a778(0x1ec)][_0x20a778(0x8f)]||''};}catch(_0x5b0d96){}}async function createAllObjects(_0x47e0f5){const _0x2910e4=a0_0xabbc9d;await _0x47e0f5[_0x2910e4(0x14e)](_0x2910e4(0x186),{'type':'channel','common':{'name':_0x2910e4(0x14d)},'native':{}}),await _0x47e0f5[_0x2910e4(0x14e)](SYSTEM_DP_MODE,{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0x1a6),'type':_0x2910e4(0x1af),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES[_0x2910e4(0x207)]},'native':{}}),await _0x47e0f5['setObjectNotExistsAsync'](_0x2910e4(0xc7),{'type':_0x2910e4(0x12c),'common':{'name':'Who\x20is\x20present?','type':_0x2910e4(0x1af),'role':_0x2910e4(0x220),'read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)]('events.lastEvent',{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0x12e),'type':'string','role':_0x2910e4(0x1e4),'read':!![],'write':![]},'native':{}}),await _0x47e0f5['setObjectNotExistsAsync'](_0x2910e4(0x107),{'type':'state','common':{'name':_0x2910e4(0x121),'type':_0x2910e4(0x1af),'role':'json','read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x14e)](_0x2910e4(0x221),{'type':_0x2910e4(0x1cf),'common':{'name':_0x2910e4(0xc8)},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)](_0x2910e4(0x1ce),{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0x1b5),'type':_0x2910e4(0xf8),'role':_0x2910e4(0x1e9),'read':!![],'write':!![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)](_0x2910e4(0x15a),{'type':'state','common':{'name':_0x2910e4(0x213),'type':_0x2910e4(0xf8),'role':_0x2910e4(0x1e9),'read':!![],'write':!![]},'native':{}}),await _0x47e0f5['setObjectNotExistsAsync'](_0x2910e4(0x130),{'type':'state','common':{'name':_0x2910e4(0x17d),'type':_0x2910e4(0xf8),'role':_0x2910e4(0x1e9),'read':!![],'write':!![]},'native':{}}),await _0x47e0f5['setObjectNotExistsAsync']('analysis.training.triggerComfort',{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0xb5),'type':_0x2910e4(0xf8),'role':_0x2910e4(0x1e9),'read':!![],'write':!![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)]('analysis.training.triggerTopology',{'type':'state','common':{'name':'Build\x20Topology','type':_0x2910e4(0xf8),'role':_0x2910e4(0x1e9),'read':!![],'write':!![]},'native':{}}),await _0x47e0f5['setObjectNotExistsAsync'](_0x2910e4(0xec),{'type':'state','common':{'name':_0x2910e4(0x199),'type':_0x2910e4(0x1af),'role':_0x2910e4(0x220),'read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x14e)](_0x2910e4(0x12d),{'type':_0x2910e4(0x1cf),'common':{'name':'Security\x20Monitor'},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)](_0x2910e4(0x126),{'type':'state','common':{'name':_0x2910e4(0x1d5),'type':_0x2910e4(0x82),'role':_0x2910e4(0xc0),'read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)](_0x2910e4(0x1de),{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0x1f6),'type':_0x2910e4(0x82),'role':_0x2910e4(0xc0),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)](_0x2910e4(0x10c),{'type':_0x2910e4(0x12c),'common':{'name':'Last\x20Check','type':'string','role':'date','read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x14e)](_0x2910e4(0xb8),{'type':_0x2910e4(0x1cf),'common':{'name':_0x2910e4(0xaf)},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)]('analysis.topology.structure',{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0x9e),'type':_0x2910e4(0x1af),'role':'json','read':!![],'write':![],'def':_0x2910e4(0x20e)},'native':{}}),await _0x47e0f5['setObjectNotExistsAsync']('analysis.security.topologyMatrix',{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0xa6),'type':_0x2910e4(0x1af),'role':'json','read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x14e)](_0x2910e4(0xde),{'type':'channel','common':{'name':_0x2910e4(0x17a)},'native':{}}),await _0x47e0f5['setObjectNotExistsAsync'](_0x2910e4(0x9d),{'type':_0x2910e4(0x12c),'common':{'name':'Last\x20Check','type':'string','role':_0x2910e4(0xd2),'read':!![],'write':![]},'native':{}}),await _0x47e0f5['setObjectNotExistsAsync'](_0x2910e4(0x1e2),{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0x14f),'type':_0x2910e4(0xf8),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)]('analysis.health.trendDiagnosis',{'type':_0x2910e4(0x12c),'common':{'name':'Trend','type':_0x2910e4(0x1af),'role':_0x2910e4(0x220),'read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)](_0x2910e4(0x178),{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0x1d0),'type':_0x2910e4(0x82),'role':'value','read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)](_0x2910e4(0xc4),{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0x1e1),'type':_0x2910e4(0x1af),'role':'json','read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)]('analysis.health.gaitSpeed',{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0x137),'type':_0x2910e4(0x82),'role':_0x2910e4(0xc0),'read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x14e)]('analysis.energy',{'type':'channel','common':{'name':_0x2910e4(0x198)},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)](_0x2910e4(0x108),{'type':'state','common':{'name':_0x2910e4(0x132),'type':_0x2910e4(0x1af),'role':_0x2910e4(0x220),'read':!![],'write':![]},'native':{}}),await _0x47e0f5['setObjectNotExistsAsync'](_0x2910e4(0x208),{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0x17e),'type':'string','role':_0x2910e4(0x220),'read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)](_0x2910e4(0x95),{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0xdf),'type':'string','role':_0x2910e4(0x1e4),'read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x14e)](_0x2910e4(0x188),{'type':_0x2910e4(0x1cf),'common':{'name':_0x2910e4(0x188)},'native':{}}),await _0x47e0f5[_0x2910e4(0x14e)](LTM_DP_RAW_LOG,{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0x1dd),'type':_0x2910e4(0x1af),'role':_0x2910e4(0x1e4),'read':!![],'write':![]},'native':{}}),await _0x47e0f5['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0x212),'type':_0x2910e4(0x1af),'role':_0x2910e4(0x1e4),'read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)](_0x2910e4(0xab),{'type':'state','common':{'name':_0x2910e4(0xdd),'type':_0x2910e4(0x1af),'role':_0x2910e4(0x1e4),'read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)]('LTM.trainingData.thermodynamics',{'type':_0x2910e4(0x12c),'common':{'name':'Thermodynamics','type':'string','role':_0x2910e4(0x1e4),'read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)](_0x2910e4(0xcd),{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0xe4),'type':_0x2910e4(0xf8),'role':_0x2910e4(0x1e9),'read':!![],'write':!![]},'native':{}}),await _0x47e0f5['setObjectNotExistsAsync'](_0x2910e4(0x8d),{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0x85),'type':_0x2910e4(0xf8),'role':_0x2910e4(0x1e9),'read':!![],'write':!![]},'native':{}}),await _0x47e0f5['setObjectNotExistsAsync'](_0x2910e4(0xe3),{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0x102),'type':_0x2910e4(0xf8),'role':'indicator.alarm','read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)](_0x2910e4(0x13b),{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0xb0),'type':'string','role':_0x2910e4(0xf7),'read':!![],'write':![]},'native':{}}),await _0x47e0f5['setObjectNotExistsAsync']('analysis.activitySummary',{'type':_0x2910e4(0x12c),'common':{'name':'Activity\x20Summary','type':_0x2910e4(0x1af),'role':'text','read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)](_0x2910e4(0x117),{'type':_0x2910e4(0x12c),'common':{'name':'Pattern\x20Detected','type':_0x2910e4(0xf8),'role':_0x2910e4(0x18d),'read':!![],'write':![]},'native':{}}),await _0x47e0f5['setObjectNotExistsAsync'](_0x2910e4(0x1e3),{'type':'state','common':{'name':_0x2910e4(0xa8),'type':_0x2910e4(0x1af),'role':'text','read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)](_0x2910e4(0x214),{'type':_0x2910e4(0x12c),'common':{'name':_0x2910e4(0x125),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)](_0x2910e4(0x20a),{'type':'state','common':{'name':_0x2910e4(0x16e),'type':_0x2910e4(0x1af),'role':_0x2910e4(0x220),'read':!![],'write':![]},'native':{}}),await _0x47e0f5['setObjectNotExistsAsync']('analysis.automation.targetValue',{'type':_0x2910e4(0x12c),'common':{'name':'Target\x20Value','type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x47e0f5['setObjectNotExistsAsync'](_0x2910e4(0x114),{'type':_0x2910e4(0x12c),'common':{'name':'Auto\x20Apply','type':'boolean','role':'switch','read':!![],'write':!![]},'native':{}}),await _0x47e0f5[_0x2910e4(0x1b6)](_0x2910e4(0x1cb),{'type':_0x2910e4(0x12c),'common':{'name':'Trigger\x20Action','type':_0x2910e4(0xf8),'role':_0x2910e4(0x1e9),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x3ea4b7){const _0x1c25fd=a0_0xabbc9d;try{const _0x5e99d9=await _0x3ea4b7[_0x1c25fd(0x1ca)](SYSTEM_DP_MODE);_0x5e99d9&&_0x5e99d9[_0x1c25fd(0x211)]&&Object[_0x1c25fd(0x131)](SYSTEM_MODES)[_0x1c25fd(0x21e)](_0x5e99d9[_0x1c25fd(0x211)])?_0x3ea4b7[_0x1c25fd(0x195)]=_0x5e99d9[_0x1c25fd(0x211)]:(_0x3ea4b7[_0x1c25fd(0x195)]=SYSTEM_MODES['NORMAL'],await _0x3ea4b7[_0x1c25fd(0x1b7)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x1c25fd(0x207)],'ack':!![]}));}catch(_0x537fba){_0x3ea4b7[_0x1c25fd(0x195)]=SYSTEM_MODES[_0x1c25fd(0x207)];}}async function loadRawEventLog(_0x3eebef){const _0x22cb6f=a0_0xabbc9d;try{const _0x17d00d=await _0x3eebef[_0x22cb6f(0x1ca)](LTM_DP_RAW_LOG);if(_0x17d00d&&_0x17d00d[_0x22cb6f(0x211)])_0x3eebef[_0x22cb6f(0x7f)]=JSON[_0x22cb6f(0x15c)](_0x17d00d['val']);}catch(_0x40499d){_0x3eebef[_0x22cb6f(0x7f)]=[];}}async function saveRawEventLog(_0x3a7b0b){const _0x52c4d0=a0_0xabbc9d;if(_0x3a7b0b['rawEventLog']['length']>RAW_LOG_MAX_SIZE)_0x3a7b0b[_0x52c4d0(0x7f)]['splice'](0x0,_0x3a7b0b[_0x52c4d0(0x7f)][_0x52c4d0(0x1db)]-RAW_LOG_MAX_SIZE);await _0x3a7b0b[_0x52c4d0(0x1b7)](LTM_DP_RAW_LOG,{'val':JSON[_0x52c4d0(0x123)](_0x3a7b0b[_0x52c4d0(0x7f)]),'ack':!![]});}async function loadDailyDigests(_0x426d02){const _0x18b58c=a0_0xabbc9d;try{const _0xbecb97=await _0x426d02[_0x18b58c(0x1ca)](LTM_DP_DAILY_DIGESTS);if(_0xbecb97&&_0xbecb97[_0x18b58c(0x211)])_0x426d02[_0x18b58c(0xee)]=JSON[_0x18b58c(0x15c)](_0xbecb97[_0x18b58c(0x211)]);}catch(_0x3a47fd){_0x426d02[_0x18b58c(0xee)]=[];}await updateBaselineStatus(_0x426d02);}async function saveDailyDigests(_0x45341b,_0x23bf26=!![]){const _0x52ef7b=a0_0xabbc9d,_0x484460=_0x45341b[_0x52ef7b(0x93)][_0x52ef7b(0x1dc)]||0x3c;_0x45341b[_0x52ef7b(0xee)]['length']>_0x484460&&_0x45341b[_0x52ef7b(0xee)][_0x52ef7b(0xd8)](0x0,_0x45341b[_0x52ef7b(0xee)][_0x52ef7b(0x1db)]-_0x484460);await _0x45341b[_0x52ef7b(0x1b7)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x52ef7b(0x123)](_0x45341b['dailyDigests']),'ack':!![]});if(_0x23bf26)await updateBaselineStatus(_0x45341b);}async function updateAnalysisHistory(_0x81110e,_0x2fbd02){const _0x1a4580=a0_0xabbc9d;_0x81110e[_0x1a4580(0x217)]['unshift'](_0x2fbd02);if(_0x81110e[_0x1a4580(0x217)][_0x1a4580(0x1db)]>HISTORY_MAX_SIZE)_0x81110e[_0x1a4580(0x217)][_0x1a4580(0x15d)]();await _0x81110e[_0x1a4580(0x1b7)](_0x1a4580(0x171),{'val':JSON[_0x1a4580(0x123)](_0x81110e['analysisHistory']),'ack':!![]});}async function updateBaselineStatus(_0xd4896d){const _0x8675f7=a0_0xabbc9d;if(!_0xd4896d['isProVersion']){await _0xd4896d[_0x8675f7(0x1b7)](LTM_DP_BASELINE_STATUS,{'val':_0x8675f7(0xad),'ack':!![]});return;}const _0x21eacc=_0xd4896d[_0x8675f7(0xee)][_0x8675f7(0x1db)]>=(_0xd4896d[_0x8675f7(0x93)][_0x8675f7(0xd6)]||0x7)?_0x8675f7(0x167)+_0xd4896d[_0x8675f7(0xee)][_0x8675f7(0x1db)]+_0x8675f7(0xc1):_0x8675f7(0xf0)+_0xd4896d['dailyDigests'][_0x8675f7(0x1db)]+'/'+(_0xd4896d[_0x8675f7(0x93)][_0x8675f7(0xd6)]||0x7)+')';await _0xd4896d['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x21eacc,'ack':!![]});}async function initSensorSubscriptions(_0x2204be){const _0x570184=a0_0xabbc9d,_0x555451=_0x2204be[_0x570184(0x93)][_0x570184(0x15b)];if(_0x555451)for(const _0x3a94ef of _0x555451){await _0x2204be[_0x570184(0x72)](_0x3a94ef['id']);}}async function initPresenceSubscriptions(_0x41a92f){const _0x2d626b=a0_0xabbc9d,_0x350aaa=_0x41a92f[_0x2d626b(0x93)][_0x2d626b(0x19c)];if(_0x350aaa)for(const _0x53185e of _0x350aaa){await _0x41a92f[_0x2d626b(0x72)](_0x53185e);}}async function setupTelegramListener(_0x25335a){const _0x22214d=a0_0xabbc9d,_0x54f822=_0x25335a[_0x22214d(0x93)]['notifyTelegramInstance'];if(_0x25335a[_0x22214d(0x93)][_0x22214d(0x119)]&&_0x54f822)await _0x25335a[_0x22214d(0x72)](_0x54f822+_0x22214d(0x10a));}function a0_0x32a4(_0x2a2096,_0x264fa0){const _0x17e023=a0_0x9a6d();return a0_0x32a4=function(_0x409836,_0x59e3e9){_0x409836=_0x409836-0x6d;let _0x9a6d9c=_0x17e023[_0x409836];return _0x9a6d9c;},a0_0x32a4(_0x2a2096,_0x264fa0);}async function checkWifiPresence(_0x3f86a0){const _0x51e61a=a0_0xabbc9d;try{const _0x4fe4e9=_0x3f86a0[_0x51e61a(0x93)][_0x51e61a(0x19c)]||[];let _0x54f818=![];const _0x48da9b=[];for(const _0x52ed8f of _0x4fe4e9){try{const _0x42034c=await _0x3f86a0[_0x51e61a(0xd0)](_0x52ed8f);_0x42034c&&(_0x42034c['val']===!![]||_0x42034c['val']===_0x51e61a(0xae)||_0x42034c[_0x51e61a(0x211)]===0x1)&&(_0x54f818=!![],_0x48da9b[_0x51e61a(0x183)](_0x52ed8f));}catch(_0x3957ec){}}return await _0x3f86a0[_0x51e61a(0x1b7)]('system.presenceWho',{'val':_0x48da9b[_0x51e61a(0x1ed)](',\x20'),'ack':!![]}),_0x54f818&&(_0x3f86a0[_0x51e61a(0x13c)]&&(_0x3f86a0[_0x51e61a(0x1ee)][_0x51e61a(0x1f4)](_0x51e61a(0xe2)),abortExitTimer(_0x3f86a0)),!_0x3f86a0[_0x51e61a(0x140)]&&_0x3f86a0[_0x51e61a(0x195)]===SYSTEM_MODES[_0x51e61a(0x207)]&&await setPresence(_0x3f86a0,!![])),_0x54f818;}catch(_0x70f091){return![];}}function startExitTimer(_0x3c9e47){const _0x147fb1=a0_0xabbc9d;abortExitTimer(_0x3c9e47),_0x3c9e47[_0x147fb1(0xfd)]=!![],_0x3c9e47[_0x147fb1(0xb6)]=setTimeout(()=>{const _0x4bc6e0=_0x147fb1;_0x3c9e47[_0x4bc6e0(0xfd)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x3c9e47[_0x147fb1(0x13c)]=setTimeout(()=>{setPresence(_0x3c9e47,![]),_0x3c9e47['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x5f6582){const _0x3d7564=a0_0xabbc9d;if(_0x5f6582['exitTimer'])clearTimeout(_0x5f6582['exitTimer']);if(_0x5f6582[_0x3d7564(0xb6)])clearTimeout(_0x5f6582[_0x3d7564(0xb6)]);_0x5f6582[_0x3d7564(0x13c)]=null,_0x5f6582['exitGraceTimer']=null,_0x5f6582[_0x3d7564(0xfd)]=![];}async function setPresence(_0x295179,_0x373397){const _0x4af5b6=a0_0xabbc9d;if(_0x295179[_0x4af5b6(0x140)]===_0x373397)return;_0x295179[_0x4af5b6(0x140)]=_0x373397,await _0x295179['setStateAsync'](_0x4af5b6(0x71),{'val':_0x373397,'ack':!![]});}async function executeAutomationAction(_0xf637e6){const _0x5573aa=a0_0xabbc9d;try{const _0x1de1ae=await _0xf637e6[_0x5573aa(0x1ca)](_0x5573aa(0x20a)),_0x1ae7cf=await _0xf637e6[_0x5573aa(0x1ca)]('analysis.automation.targetValue');if(_0x1de1ae&&_0x1de1ae[_0x5573aa(0x211)]&&_0x1ae7cf){const _0x439cb0=_0x1de1ae['val'];let _0x36d339=_0x1ae7cf[_0x5573aa(0x211)];try{_0x36d339=JSON['parse'](_0x36d339);}catch(_0x2d2b11){}_0xf637e6[_0x5573aa(0x1ee)][_0x5573aa(0x1f4)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x439cb0+_0x5573aa(0x1e7)+_0x36d339),await _0xf637e6['setForeignStateAsync'](_0x439cb0,_0x36d339);}else _0xf637e6['log'][_0x5573aa(0xd3)](_0x5573aa(0xd7));}catch(_0xfa4ae4){_0xf637e6[_0x5573aa(0x1ee)][_0x5573aa(0xa3)](_0x5573aa(0x77)+_0xfa4ae4[_0x5573aa(0xf4)]);}}async function processSensorEvent(_0x58f2a4,_0xa41b98,_0x1a47db,_0x20b0bc){const _0x4c71e3=a0_0xabbc9d;if(!_0x20b0bc)return;const _0x26841e=_0x1a47db[_0x4c71e3(0x211)],_0x1eaed0=Date[_0x4c71e3(0x196)](),_0x3fdd83=_0x58f2a4[_0x4c71e3(0x1fd)][_0xa41b98];_0x58f2a4[_0x4c71e3(0x1fd)][_0xa41b98]=_0x26841e;if(!_0x20b0bc[_0x4c71e3(0x115)]&&_0x3fdd83!=undefined&&_0x3fdd83==_0x26841e)return;const _0x9877e1=(_0x20b0bc[_0x4c71e3(0x158)]||'')[_0x4c71e3(0x189)](),_0x294b94=_0x9877e1[_0x4c71e3(0x21e)]('temperature')||_0x9877e1['includes'](_0x4c71e3(0x1f7))||_0x9877e1[_0x4c71e3(0x21e)]('klima')||_0x9877e1['includes'](_0x4c71e3(0x110));_0x58f2a4['isProVersion']&&_0x294b94&&recordThermodynamics(_0x58f2a4,_0xa41b98,_0x26841e,_0x20b0bc[_0x4c71e3(0x98)]);const _0x30fb33={'timestamp':_0x1eaed0,'id':_0xa41b98,'name':_0x20b0bc['name'],'type':_0x20b0bc[_0x4c71e3(0x158)],'location':_0x20b0bc[_0x4c71e3(0x98)],'value':_0x26841e};_0x58f2a4[_0x4c71e3(0xfb)][_0x4c71e3(0x10f)](_0x30fb33);if(_0x58f2a4[_0x4c71e3(0xfb)]['length']>HISTORY_MAX_SIZE)_0x58f2a4[_0x4c71e3(0xfb)][_0x4c71e3(0x15d)]();await _0x58f2a4['setStateAsync'](_0x4c71e3(0xc5),{'val':JSON[_0x4c71e3(0x123)](_0x30fb33),'ack':!![]}),await _0x58f2a4[_0x4c71e3(0x1b7)](_0x4c71e3(0x107),{'val':JSON[_0x4c71e3(0x123)](_0x58f2a4['eventHistory']),'ack':!![]});_0x58f2a4[_0x4c71e3(0xdb)]&&(_0x58f2a4[_0x4c71e3(0x7f)][_0x4c71e3(0x183)](_0x30fb33),await saveRawEventLog(_0x58f2a4),recordSequence(_0x58f2a4,_0x30fb33));if(_0x20b0bc[_0x4c71e3(0x162)]&&_0x26841e===!![]){if(_0x58f2a4['isPresent']&&!_0x58f2a4[_0x4c71e3(0xfd)])startExitTimer(_0x58f2a4);else{if(!_0x58f2a4[_0x4c71e3(0x140)])setPresence(_0x58f2a4,!![]);}}else{if(_0x20b0bc[_0x4c71e3(0x158)]===_0x4c71e3(0xbd)&&_0x26841e===!![]){if(_0x58f2a4[_0x4c71e3(0x13c)])abortExitTimer(_0x58f2a4);if(!_0x58f2a4['isPresent']&&_0x58f2a4[_0x4c71e3(0x195)]===SYSTEM_MODES[_0x4c71e3(0x207)])setPresence(_0x58f2a4,!![]);}}}async function recordThermodynamics(_0xc1809,_0x3c21ad,_0x21bb94,_0x426e3e){const _0x5d3542=a0_0xabbc9d,_0xe7e620=await getOutsideTemperatureNumeric(_0xc1809),_0x4e4b51=await _0xc1809[_0x5d3542(0x1ca)](_0x5d3542(0x1c7));let _0x128d53=[];if(_0x4e4b51&&_0x4e4b51['val'])try{_0x128d53=JSON[_0x5d3542(0x15c)](_0x4e4b51[_0x5d3542(0x211)]);}catch(_0x1056a9){}_0x128d53[_0x5d3542(0x183)]({'ts':Date[_0x5d3542(0x196)](),'room':_0x426e3e||'Unknown','t_in':_0x21bb94,'t_out':_0xe7e620});if(_0x128d53[_0x5d3542(0x1db)]>THERMO_LOG_SIZE)_0x128d53[_0x5d3542(0x16b)]();await _0xc1809[_0x5d3542(0x1b7)](_0x5d3542(0x1c7),{'val':JSON[_0x5d3542(0x123)](_0x128d53),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x245ca2){const _0x20af2c=a0_0xabbc9d;if(_0x245ca2[_0x20af2c(0x93)]['outdoorSensorId'])try{const _0x8baf48=await _0x245ca2['getForeignStateAsync'](_0x245ca2[_0x20af2c(0x93)][_0x20af2c(0x187)]);if(_0x8baf48&&_0x8baf48[_0x20af2c(0x211)]!==undefined&&_0x8baf48[_0x20af2c(0x211)]!==null)return parseFloat(_0x8baf48[_0x20af2c(0x211)]);}catch(_0xd528b8){}const _0x386b05=_0x245ca2[_0x20af2c(0x93)][_0x20af2c(0x104)];if(!_0x245ca2[_0x20af2c(0x93)][_0x20af2c(0xcf)]||!_0x386b05)return null;try{let _0x9ba103='';if(_0x386b05[_0x20af2c(0x21e)](_0x20af2c(0xaa)))_0x9ba103=_0x386b05+_0x20af2c(0x14a);else{if(_0x386b05[_0x20af2c(0x21e)](_0x20af2c(0x1bf)))_0x9ba103=_0x386b05+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x386b05[_0x20af2c(0x21e)](_0x20af2c(0x11e)))_0x9ba103=_0x386b05+'.forecast.current.temperature';else{if(_0x386b05['includes']('weatherunderground'))_0x9ba103=_0x386b05+_0x20af2c(0xe0);}}}if(_0x9ba103){const _0x2466bc=await _0x245ca2['getForeignStateAsync'](_0x9ba103);if(_0x2466bc&&_0x2466bc[_0x20af2c(0x211)]!==undefined&&_0x2466bc[_0x20af2c(0x211)]!==null)return parseFloat(_0x2466bc[_0x20af2c(0x211)]);}}catch(_0x25aa09){}return null;}async function recordSequence(_0x7faf5e,_0x124145){const _0x2c03c5=a0_0xabbc9d,_0x5de793=(_0x124145['type']||'')[_0x2c03c5(0x189)](),_0x419c63=[_0x2c03c5(0xbd),_0x2c03c5(0x118),_0x2c03c5(0xc6),'presence',_0x2c03c5(0x154),_0x2c03c5(0x1a9),_0x2c03c5(0x19e),_0x2c03c5(0x201),_0x2c03c5(0x96),_0x2c03c5(0x15e),_0x2c03c5(0x139),_0x2c03c5(0x8c),'licht',_0x2c03c5(0x18c),_0x2c03c5(0x203),_0x2c03c5(0xd9),_0x2c03c5(0x18b)];if(!_0x419c63[_0x2c03c5(0x101)](_0x4cc313=>_0x5de793[_0x2c03c5(0x21e)](_0x4cc313)))return;if(!_0x124145[_0x2c03c5(0xc0)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x2c03c5(0x183)]({'loc':_0x124145[_0x2c03c5(0x98)]||_0x2c03c5(0x13d),'id':_0x124145['id'],'ts':Date[_0x2c03c5(0x196)]()}),sequenceTimer=setTimeout(async()=>{const _0x4ab148=_0x2c03c5;if(activeSequence[_0x4ab148(0x1db)]>0x1)await saveCompletedSequence(_0x7faf5e);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x4a0544){const _0x39d506=a0_0xabbc9d;try{const _0x5bd3d7=await _0x4a0544[_0x39d506(0x1ca)](_0x39d506(0xab));let _0x4c5f09=[];if(_0x5bd3d7&&_0x5bd3d7[_0x39d506(0x211)])try{_0x4c5f09=JSON[_0x39d506(0x15c)](_0x5bd3d7['val']);}catch(_0x276fdc){}const _0x38aa02=activeSequence[0x0]['ts'],_0x20fbd8=activeSequence['map'](_0x4ab999=>({'loc':_0x4ab999[_0x39d506(0x1d3)],'t_delta':Math['round']((_0x4ab999['ts']-_0x38aa02)/0x3e8)})),_0x4511b2={'timestamp':new Date(_0x38aa02)[_0x39d506(0x206)](),'steps':_0x20fbd8,'duration':Math['round']((activeSequence[activeSequence[_0x39d506(0x1db)]-0x1]['ts']-_0x38aa02)/0x3e8),'daytime':new Date(_0x38aa02)[_0x39d506(0x109)]()};_0x4c5f09[_0x39d506(0x183)](_0x4511b2);if(_0x4c5f09['length']>MAX_TRAINING_SET_SIZE)_0x4c5f09[_0x39d506(0x16b)]();await _0x4a0544['setStateAsync'](_0x39d506(0xab),{'val':JSON[_0x39d506(0x123)](_0x4c5f09),'ack':!![]}),runSecurityCheck(_0x4a0544,_0x4511b2);}catch(_0x1dbf3c){_0x4a0544['log'][_0x39d506(0xa3)](_0x39d506(0xf9)+_0x1dbf3c[_0x39d506(0xf4)]);}}function runSecurityCheck(_0x5d42f5,_0x3cee73){const _0x47bb10=a0_0xabbc9d;if(!_0x5d42f5[_0x47bb10(0xdb)])return;sendToPython(_0x5d42f5,_0x47bb10(0x133),{'sequence':_0x3cee73});}async function createDailyDigest(_0x57f89e){const _0x56eea3=a0_0xabbc9d;if(!_0x57f89e[_0x56eea3(0xdb)])return;await _0x57f89e[_0x56eea3(0x1b7)](LTM_DP_STATUS,{'val':_0x56eea3(0x7a),'ack':!![]});if(!_0x57f89e[_0x56eea3(0x1ba)]||_0x57f89e[_0x56eea3(0x7f)][_0x56eea3(0x1db)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x57f89e[_0x56eea3(0x1b7)](LTM_DP_STATUS,{'val':_0x56eea3(0x1a4),'ack':!![]});return;}const _0x1b30cd=JSON[_0x56eea3(0x15c)](JSON[_0x56eea3(0x123)](_0x57f89e[_0x56eea3(0x7f)])),_0x2ecae4=_0x1b30cd[_0x56eea3(0x1db)],_0x1df081=_0x56eea3(0x86)+JSON[_0x56eea3(0x123)](_0x1b30cd);try{const _0x4a71db=await _0x57f89e[_0x56eea3(0x1ba)][_0x56eea3(0x1fa)](_0x1df081),_0x427055=JSON[_0x56eea3(0x15c)](_0x4a71db[_0x56eea3(0x12a)][_0x56eea3(0x220)]()[_0x56eea3(0x1b3)](/```json|```/g,'')[_0x56eea3(0x8b)]()),_0x4c69e1={'timestamp':new Date()[_0x56eea3(0x206)](),'eventCount':_0x2ecae4,'summary':_0x427055[_0x56eea3(0x192)]||_0x56eea3(0x1f1),'activityLevel':_0x427055[_0x56eea3(0x1a0)]||_0x56eea3(0x1f8),'systemMode':_0x57f89e['currentSystemMode']};_0x57f89e[_0x56eea3(0xee)]['push'](_0x4c69e1),await saveDailyDigests(_0x57f89e),_0x57f89e['rawEventLog']=[],await saveRawEventLog(_0x57f89e),await _0x57f89e['setStateAsync'](LTM_DP_STATUS,{'val':_0x56eea3(0xa4),'ack':!![]});if(_0x57f89e[_0x56eea3(0xdb)])sendToPython(_0x57f89e,'ANALYZE_HEALTH',{'digest':_0x4c69e1});}catch(_0xa1e827){_0x57f89e[_0x56eea3(0x1ee)][_0x56eea3(0xa3)](_0xa1e827[_0x56eea3(0xf4)]);}}async function runBaselineDriftAnalysis(_0x1a1683){const _0x184ba9=a0_0xabbc9d;if(!_0x1a1683['isProVersion']||!_0x1a1683['geminiModel'])return;const _0x2a5b75=_0x1a1683[_0x184ba9(0x93)][_0x184ba9(0x160)]||0xe;if(_0x1a1683['dailyDigests'][_0x184ba9(0x1db)]<_0x2a5b75+0x7){await _0x1a1683[_0x184ba9(0x1b7)](LTM_DP_DRIFT_STATUS,{'val':_0x184ba9(0x164),'ack':!![]});return;}const _0x58d59f=_0x1a1683[_0x184ba9(0xee)]['slice'](-_0x2a5b75),_0x302d6c=_0x1a1683[_0x184ba9(0xee)][_0x184ba9(0x1e5)](0x0,_0x1a1683[_0x184ba9(0xee)]['length']-_0x2a5b75),_0x1755a7=_0x184ba9(0x202)+JSON[_0x184ba9(0x123)](_0x302d6c)+_0x184ba9(0x1f2)+JSON['stringify'](_0x58d59f);try{const _0x1304f9=await _0x1a1683['geminiModel'][_0x184ba9(0x1fa)](_0x1755a7),_0x20b25a=JSON[_0x184ba9(0x15c)](_0x1304f9['response'][_0x184ba9(0x220)]()[_0x184ba9(0x1b3)](/```json|```/g,'')[_0x184ba9(0x8b)]());_0x20b25a[_0x184ba9(0x1b1)]&&(await _0x1a1683['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x20b25a[_0x184ba9(0x1b1)],'ack':!![]}),await _0x1a1683[_0x184ba9(0x1b7)](LTM_DP_DRIFT_DETAILS,{'val':_0x20b25a['driftDetails'],'ack':!![]}),await _0x1a1683[_0x184ba9(0x1b7)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0x25b9eb){}}async function sendMorningBriefing(_0x404de6){const _0x405c02=a0_0xabbc9d;if(!_0x404de6[_0x405c02(0x1ba)])return;try{const _0x496a52='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x587c94=await _0x404de6[_0x405c02(0x1ba)][_0x405c02(0x1fa)](_0x496a52),_0x31e4d2=_0x587c94[_0x405c02(0x12a)]['text']();sendNotification(_0x404de6,_0x405c02(0x116)+_0x31e4d2);}catch(_0x202465){_0x404de6['log'][_0x405c02(0xa3)](_0x405c02(0x14b)+_0x202465[_0x405c02(0xf4)]);}}function stopPythonService(_0x51c317){const _0x3c97cc=a0_0xabbc9d;if(_0x51c317[_0x3c97cc(0x175)]){try{_0x51c317[_0x3c97cc(0x175)][_0x3c97cc(0x1aa)]();}catch(_0x4e7a6c){}_0x51c317[_0x3c97cc(0x175)]=null;}}function sendToPython(_0x116032,_0x140397,_0x639271={}){const _0x42209a=a0_0xabbc9d;if(!_0x116032['pythonProcess']||!_0x116032['pythonProcess'][_0x42209a(0x10e)][_0x42209a(0x8e)])return;const _0x41d440=JSON[_0x42209a(0x123)]({'command':_0x140397,..._0x639271});try{_0x116032[_0x42209a(0x175)][_0x42209a(0x10e)][_0x42209a(0x19b)](_0x41d440+'\x0a');}catch(_0x262462){}}function runPythonHealthCheck(_0x24b51e){const _0x135d0c=a0_0xabbc9d;if(!_0x24b51e[_0x135d0c(0xee)]||_0x24b51e[_0x135d0c(0xee)][_0x135d0c(0x1db)]<0x2)return;const _0x219352=_0x24b51e[_0x135d0c(0xee)][_0x135d0c(0xe1)](_0x58b9d2=>{const _0x25ed29=_0x135d0c,_0x52f7c9=(_0x58b9d2[_0x25ed29(0x1a0)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x52f7c9]||0x32;});sendToPython(_0x24b51e,_0x135d0c(0x161),{'values':_0x219352,'tag':_0x135d0c(0x94)});}function a0_0x9a6d(){const _0x3890a4=['getFullYear','Gait\x20Speed\x20Trend','.\x20EVENTS:\x20','kontakt','getObjectAsync','analysis.alertReason','exitTimer','Unknown','Keine\x20Termine.','existsSync','isPresent','telegram','system.config','SECURITY_RESULT','party','longitude','LTM.baselineStatus','./lib/topology','Gemini\x20Init\x20Error:\x20','Fokus\x20auf\x20Familienroutinen.','.Current.Temperature','Briefing\x20Error:\x20','analysis.history_debug_00','System','extendObjectAsync','Anomaly\x20Detected','analysis.health.gaitSpeed','filter','400TmqPiy','toLocaleTimeString','occupancy','success','ðŸ“\x20Feedback\x20received:\x20','change_percent','type','rule','analysis.training.triggerHealth','devices','parse','pop','contact','Kein\x20API\x20Key!','ltmStbWindowDays','ANALYZE_TREND','isExit','Kein\x20API\x20Key.','N/A\x20(Learning)','instance','8713971qMfZLe','Aktiv\x20(','25871kpvUdm','toString','genAI','shift','isAlert','Keine\x20Details.','Target\x20ID','User\x20dismissed\x20automation\x20proposal.','version','analysis.analysisHistory','.Current.WeatherText','search','endsWith','pythonProcess','checkAndInstall','getGenerativeModel','analysis.health.trendValue','Gemini\x20Error:\x20','Health\x20Analysis','Failed:\x20','getOverviewData','Train\x20Energy','Heating\x20Score',')\x20-\x20SAFE\x20BOOT','diagnosis','VACATION','is_anomaly','push','[LOG]','briefingJob','system','outdoorSensorId','LTM','toLowerCase','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','lampe','switch','indicator','enum','apiKey','260UTvFEw','ANALYZE_GAIT','summary','automation.triggerAction','analysisTimer','currentSystemMode','now','updateTopology','Energy\x20Intelligence','Training\x20Status','name','write','presenceDevices','models/gemini-flash-latest','tÃ¼r','7462112ddnQXT','activityLevel','dismissAutomation','.forecast.current.temperature','2806120yzNLsP','Skipped\x20(No\x20AI\x20or\x20Data)','onReady','System\x20Mode','.\x20EMERGENCY:\x20','setupLtmScheduler','door','kill','TRAIN_HEALTH','analysisInterval','close','analysis.lastResult','string','ltmJob','baselineDrift','useCalendar','replace','calendarInstance','Train\x20Security','setObjectNotExistsAsync','setStateAsync','(((.+)+)+)+$','licenseKey','geminiModel','service.py','simulateButler','Fokus\x20auf\x20Komfort.','latitude','daswetter','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','./lib/scheduler','ENERGY_TRAIN_RESULT','inactivityThresholdHours','analysis.training.triggerComfort','Missing\x20data','14xEDtzO','LTM.trainingData.thermodynamics','floor','aiPersona','getStateAsync','analysis.automation.triggerAction','PREDICT_ENERGY','alertReason','analysis.training.triggerSecurity','channel','Trend\x20Value','analysis.health.trendDiagnosis','onStateChange','loc','targetId','Anomaly\x20Score','getForeignObjectAsync','sendTo','livingContext','guest','insulation','length','ltmLtbWindowDays','Raw\x20Log','analysis.security.currentThreshold','ENERGY_PREDICT_RESULT','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','Today\x20Vector\x20(15m)','analysis.health.isAnomaly','analysis.automation.description','json','slice','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','\x20=\x20','events.history_debug_00','button','Adapter','unknown','common','join','log','automationProposal','analysis.activitySummary','Digest','\x0aSTB:\x20','description','info','N/A','Current\x20Threshold','temperatur','normal','Error\x20launching\x20Python:\x20','generateContent','Gemini\x20AI\x20initialized.','ready','sensorLastValues','systemUUID','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','Â°C,\x20','window','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','schalter','timestamp','system.mode','toISOString','NORMAL','analysis.energy.heatingScore','PRIORITÃ„T:\x20Sicherheit.','analysis.automation.targetId','testApiKey','Wetterdaten\x20deaktiviert.','keys','{\x22rooms\x22:[],\x20\x22matrix\x22:[]}','cancel','onMessage','val','Daily\x20Digests','Train\x20Health','analysis.automation.detectedPatterns','./lib/installer','dependencyInstallInProgress','analysisHistory','HEALTH_TRAIN_RESULT','enum.rooms.*','No\x20instance','ðŸ•¸ï¸\x20Topology\x20Graph\x20manually\x20updated\x20by\x20user.','triggerDailyDigest','analysis.topology.structure','includes','ANOMALY','text','analysis.training','substring','KI-Modell\x20nicht\x20initialisiert','Regel\x20erkannt:\x20','analysis.automation.targetValue','constructor','system.isPresent','subscribeForeignStatesAsync','path','ðŸ§ \x20Triggering\x20Security\x20Training...','getForeignObjectsAsync','PRIORITÃ„T:\x20Gesundheit/AAL.','BUTLER\x20Execution\x20Error:\x20','TRAIN_SECURITY','cogni-living\x20adapter\x20starting\x20(v','Started...','object','âš ï¸\x20ALARM:\x20','@iobroker/adapter-core','setupBriefingScheduler','rawEventLog','data','LTM.driftAnalysis.lastCheck','number','setState','temperature','Trigger\x20Briefing','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','200288UcUJGv','toFixed','Kalender\x20deaktiviert.','bind','trim','light','analysis.triggerBriefing','writable','city','status','âš ï¸\x20SECURITY\x20ALARM:\x20','Sec-Training\x20started...','config','Activity-Level','analysis.energy.forecast','fenster','geminiApiKey','location','isEmergency','command','stdout','LTM.processingStatus','analysis.health.lastCheck','Graph\x20Structure\x20(Adjacency\x20Matrix)','from','OK:\x20','communicate.request','PYTHON_EXE','error','Success','forEach','Topology\x20Matrix\x20(Legacy)','triggerBriefing','Description','analysis.training.triggerTopology','accuweather','LTM.trainingData.sequences','.\x20WETTER:\x20','Deaktiviert\x20(Pro-Feature)','online','Graph\x20Topology','Alert\x20Reason','.forecast.current.state','PARTY','TRAINING_COMPLETE','7TJmQRS','Train\x20Comfort','exitGraceTimer','targetValue','analysis.topology','GAIT_RESULT','generic','reason','payload','motion','âœ…\x20HEALTH\x20TRAINED.','lastAlertState','value','\x20Tage)','Success:\x20','exports','analysis.health.todayVector','events.lastEvent','prÃ¤senz','system.presenceWho','AI\x20Training','find','./lib/scanner','debug','Analysiere\x20ausgewogen.','analysis.trigger','fill','useWeather','getForeignStateAsync','systemConfig','date','warn','getEnums','389706InBaln','minDaysForBaseline','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','splice','dimmer','matrix','isProVersion','analysis.security.topologyMatrix','Sequences','analysis.health','Temperature\x20Forecast','.forecast.current.temp','map','WiFi\x20Presence\x20detected.','analysis.isAlert','Trigger\x20Analysis','ðŸ\x20Python\x20Pong','112074HTIHFk','getCalendarNames','Unbekannt','startsWith','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','application/json','analysis.training.status','onUnload','dailyDigests','rating','Lernphase\x20(','LTM.dailyDigests','.\x20SYSTEM_MODE:\x20','getTime','message','Restoring\x20sensor\x20cache...','apply','text.alarm','boolean','[RECORDER]\x20Error:\x20','ack','eventHistory','stateChange','isGracePeriodActive','getLtmData','namespace','LTM.triggerDailyDigest','some','Alert\x20Status','\x20new\x20patterns.','weatherInstance','heating','HEALTH_RESULT','events.history','analysis.energy.insulationScore','getHours','.communicate.request','main','analysis.security.lastCheck','Topology\x20Update\x20Error:\x20','stdin','unshift','heizung','subscribeStates','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','python_service','analysis.automation.autoApply','logDuplicates','ðŸŒ…\x20Morning\x20Briefing:\x0a','analysis.automation.patternDetected','bewegung','notifyTelegramEnabled','python3','modeResetJob','detected','LTM.driftAnalysis.baselineDrift','openweathermap','Training\x20Error:\x20','[RESULT]','Event\x20History','ðŸ•¸ï¸\x20Manually\x20triggering\x20Topology\x20Update...','stringify','callback','Detected\x20Patterns','analysis.security.lastScore','driftAnalysisTimer','details','TREND_RESULT','response','@google/generative-ai','state','analysis.security','Last\x20raw\x20event','testContext','analysis.training.triggerEnergy','values','Insulation\x20Score','ANALYZE_SEQUENCE','threshold','.\x20KONTEXT:\x20'];a0_0x9a6d=function(){return _0x3890a4;};return a0_0x9a6d();}function handlePythonResult(_0xd7801c,_0xb922bd){const _0x5cb8cc=a0_0xabbc9d;if(_0xb922bd[_0x5cb8cc(0x158)]==='PONG')_0xd7801c[_0x5cb8cc(0x1ee)][_0x5cb8cc(0xcb)](_0x5cb8cc(0xe5));else{if(_0xb922bd[_0x5cb8cc(0x158)]===_0x5cb8cc(0x143)){const {anomaly_score:_0x2e7674,is_anomaly:_0x590190,threshold:_0xd00540,explanation:_0x1410e4}=_0xb922bd[_0x5cb8cc(0xbc)];_0xd7801c[_0x5cb8cc(0x1ee)][_0x5cb8cc(0x1f4)](_0x5cb8cc(0x1c0)+_0x2e7674[_0x5cb8cc(0x88)](0x5)+'\x20->\x20'+(_0x590190?_0x5cb8cc(0x21f):'OK')),_0xd7801c[_0x5cb8cc(0x1b7)](_0x5cb8cc(0x126),{'val':_0x2e7674,'ack':!![]}),_0xd7801c[_0x5cb8cc(0x1b7)](_0x5cb8cc(0x10c),{'val':new Date()[_0x5cb8cc(0x206)](),'ack':!![]});if(_0xd00540)_0xd7801c[_0x5cb8cc(0x1b7)](_0x5cb8cc(0x1de),{'val':_0xd00540,'ack':!![]});if(_0x590190){let _0x151cb4=_0x5cb8cc(0xea)+_0x2e7674[_0x5cb8cc(0x88)](0x4)+')';if(_0x1410e4&&_0x1410e4!==_0x5cb8cc(0x13d))_0x151cb4+='\x0aGrund:\x20'+_0x1410e4;_0xd7801c[_0x5cb8cc(0x1b7)](_0x5cb8cc(0xe3),{'val':!![],'ack':!![]}),_0xd7801c[_0x5cb8cc(0x1b7)]('analysis.alertReason',{'val':_0x151cb4,'ack':!![]}),sendNotification(_0xd7801c,_0x5cb8cc(0x91)+_0x151cb4,![],!![]);}}else{if(_0xb922bd[_0x5cb8cc(0x158)]===_0x5cb8cc(0xb3)){const _0x597422=_0xb922bd[_0x5cb8cc(0xbc)][_0x5cb8cc(0x128)]||'',_0x33f400=_0xb922bd[_0x5cb8cc(0xbc)][_0x5cb8cc(0x134)],_0x3348ae=_0xb922bd[_0x5cb8cc(0xbc)][_0x5cb8cc(0x155)]?_0x5cb8cc(0xc2)+new Date()[_0x5cb8cc(0x153)]()+'\x20('+_0x597422+')':_0x5cb8cc(0x17b)+_0xb922bd[_0x5cb8cc(0xbc)][_0x5cb8cc(0xbb)];_0xd7801c[_0x5cb8cc(0x1b7)](_0x5cb8cc(0xec),{'val':_0x3348ae,'ack':!![]});if(_0xb922bd['payload'][_0x5cb8cc(0x155)]&&_0x33f400)_0xd7801c[_0x5cb8cc(0x1b7)]('analysis.security.currentThreshold',{'val':_0x33f400,'ack':!![]});}else{if(_0xb922bd[_0x5cb8cc(0x158)]==='COMFORT_RESULT'){const {patterns:_0x51400f}=_0xb922bd[_0x5cb8cc(0xbc)];if(_0x51400f&&_0x51400f[_0x5cb8cc(0x1db)]>0x0){_0xd7801c[_0x5cb8cc(0x1ee)]['info'](_0x5cb8cc(0x1ff)+_0x51400f[_0x5cb8cc(0x1db)]+_0x5cb8cc(0x103)),_0xd7801c['setStateAsync'](_0x5cb8cc(0x214),{'val':JSON[_0x5cb8cc(0x123)](_0x51400f),'ack':!![]});const _0x2f0c21=_0x51400f[0x0],_0x17eb33=_0x5cb8cc(0x6e)+_0x2f0c21[_0x5cb8cc(0x159)]+'\x20('+(_0x2f0c21['confidence']*0x64)['toFixed'](0x0)+'%)';_0xd7801c[_0x5cb8cc(0x1b7)](_0x5cb8cc(0x117),{'val':!![],'ack':!![]}),_0xd7801c[_0x5cb8cc(0x1b7)](_0x5cb8cc(0x1e3),{'val':_0x17eb33,'ack':!![]});}else _0xd7801c[_0x5cb8cc(0x1ee)][_0x5cb8cc(0x1f4)](_0x5cb8cc(0x1e0)),_0xd7801c[_0x5cb8cc(0x1b7)](_0x5cb8cc(0x117),{'val':![],'ack':!![]}),_0xd7801c[_0x5cb8cc(0x1b7)](_0x5cb8cc(0x214),{'val':'[]','ack':!![]});}else{if(_0xb922bd[_0x5cb8cc(0x158)]===_0x5cb8cc(0x1c2)){if(_0xb922bd[_0x5cb8cc(0xbc)][_0x5cb8cc(0x155)])try{const _0x48c7e5=JSON[_0x5cb8cc(0x15c)](_0xb922bd[_0x5cb8cc(0xbc)][_0x5cb8cc(0x128)]);if(_0x48c7e5['insulation'])_0xd7801c[_0x5cb8cc(0x1b7)](_0x5cb8cc(0x108),{'val':JSON['stringify'](_0x48c7e5[_0x5cb8cc(0x1da)]),'ack':!![]});if(_0x48c7e5['heating'])_0xd7801c['setStateAsync'](_0x5cb8cc(0x208),{'val':JSON[_0x5cb8cc(0x123)](_0x48c7e5[_0x5cb8cc(0x105)]),'ack':!![]});}catch(_0x5980b6){}}else{if(_0xb922bd[_0x5cb8cc(0x158)]===_0x5cb8cc(0x218)){if(_0xb922bd[_0x5cb8cc(0xbc)][_0x5cb8cc(0x155)])_0xd7801c[_0x5cb8cc(0x1ee)][_0x5cb8cc(0x1f4)](_0x5cb8cc(0xbe));}else{if(_0xb922bd[_0x5cb8cc(0x158)]===_0x5cb8cc(0x106))_0xd7801c[_0x5cb8cc(0x1b7)](_0x5cb8cc(0x9d),{'val':new Date()[_0x5cb8cc(0x206)](),'ack':!![]}),_0xd7801c[_0x5cb8cc(0x1b7)](_0x5cb8cc(0x1e2),{'val':_0xb922bd['payload'][_0x5cb8cc(0x182)],'ack':!![]});else{if(_0xb922bd['type']===_0x5cb8cc(0x129))_0xd7801c[_0x5cb8cc(0x1b7)](_0x5cb8cc(0x1d1),{'val':_0xb922bd[_0x5cb8cc(0xbc)][_0x5cb8cc(0x180)],'ack':!![]}),_0xd7801c[_0x5cb8cc(0x1b7)](_0x5cb8cc(0x178),{'val':_0xb922bd[_0x5cb8cc(0xbc)][_0x5cb8cc(0x157)],'ack':!![]});else{if(_0xb922bd[_0x5cb8cc(0x158)]===_0x5cb8cc(0xb9)){const {speed_trend:_0x4563c9}=_0xb922bd[_0x5cb8cc(0xbc)];if(_0x4563c9!==undefined)_0xd7801c[_0x5cb8cc(0x1b7)](_0x5cb8cc(0x150),{'val':_0x4563c9,'ack':!![]});}else{if(_0xb922bd[_0x5cb8cc(0x158)]===_0x5cb8cc(0x1df)){const {forecast:_0xc6a264}=_0xb922bd[_0x5cb8cc(0xbc)];if(_0xc6a264)_0xd7801c[_0x5cb8cc(0x1b7)]('analysis.energy.forecast',{'val':JSON[_0x5cb8cc(0x123)](_0xc6a264),'ack':!![]});}else{if(_0xb922bd[_0x5cb8cc(0x158)]==='TOPOLOGY_RESULT'){const {data:_0x26fa09}=_0xb922bd[_0x5cb8cc(0xbc)];_0x26fa09&&(_0xd7801c['log'][_0x5cb8cc(0x1f4)]('ðŸ•¸ï¸\x20Topology\x20Map\x20updated\x20by\x20Python.'),_0xd7801c[_0x5cb8cc(0x1b7)](_0x5cb8cc(0xdc),{'val':JSON[_0x5cb8cc(0x123)](_0x26fa09),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x322817){const _0x122130=a0_0xabbc9d;let _0x1886a4=_0x122130(0x11a);if(fs[_0x122130(0x13f)](installer[_0x122130(0xa2)]))_0x1886a4=installer[_0x122130(0xa2)];try{const _0x52d657=path[_0x122130(0x1ed)](__dirname,_0x122130(0x113),_0x122130(0x1bb));_0x322817[_0x122130(0x175)]=spawn(_0x1886a4,[_0x52d657]),_0x322817[_0x122130(0x175)][_0x122130(0x9b)]['on'](_0x122130(0x80),_0xb37d21=>{const _0x3831c8=_0x122130,_0x506f8e=_0xb37d21['toString']()['split']('\x0a');_0x506f8e[_0x3831c8(0xa5)](_0xda8f97=>{const _0x35613c=_0x3831c8,_0x22288a=_0xda8f97[_0x35613c(0x8b)]();if(!_0x22288a)return;if(_0x22288a[_0x35613c(0xe9)](_0x35613c(0x184)))_0x322817[_0x35613c(0x1ee)][_0x35613c(0xcb)]('[PYTHON]\x20'+_0x22288a['substring'](0x5)[_0x35613c(0x8b)]());else{if(_0x22288a[_0x35613c(0xe9)](_0x35613c(0x120)))try{const _0x3ef901=JSON[_0x35613c(0x15c)](_0x22288a[_0x35613c(0x222)](0x8)[_0x35613c(0x8b)]());handlePythonResult(_0x322817,_0x3ef901);}catch(_0x1438df){}}});}),_0x322817[_0x122130(0x175)]['on'](_0x122130(0x1ad),_0x149ad5=>{_0x322817['pythonProcess']=null;});}catch(_0x2afed7){_0x322817[_0x122130(0x1ee)][_0x122130(0xa3)](_0x122130(0x1f9)+_0x2afed7[_0x122130(0xf4)]);}}async function runAutopilot(_0x4bc6e9){const _0x2d45df=a0_0xabbc9d;_0x4bc6e9[_0x2d45df(0x1ee)]['debug'](_0x2d45df(0x18a)),await runGeminiAnalysis(_0x4bc6e9),updateHealthVector(_0x4bc6e9),triggerGaitAnalysis(_0x4bc6e9),triggerEnergyPrediction(_0x4bc6e9);}async function triggerGaitAnalysis(_0x3f6d0a){const _0x55bef6=a0_0xabbc9d;if(!_0x3f6d0a[_0x55bef6(0xdb)])return;try{const _0x2e533c=await _0x3f6d0a['getStateAsync'](_0x55bef6(0xab));_0x2e533c&&_0x2e533c[_0x55bef6(0x211)]&&sendToPython(_0x3f6d0a,_0x55bef6(0x191),{'sequences':JSON[_0x55bef6(0x15c)](_0x2e533c[_0x55bef6(0x211)])});}catch(_0x5b1428){}}async function triggerEnergyPrediction(_0x4ed546){const _0x4ed157=a0_0xabbc9d;if(!_0x4ed546['isProVersion'])return;try{const _0x4d3fd4=await getOutsideTemperatureNumeric(_0x4ed546);if(_0x4d3fd4===null)return;const _0x31fb08={},_0x13a616=_0x4ed546[_0x4ed157(0x93)]['devices']||[];for(const _0x590962 of _0x13a616){if(_0x590962['type']===_0x4ed157(0x84)&&_0x590962[_0x4ed157(0x98)]){const _0x33d260=_0x4ed546[_0x4ed157(0x1fd)][_0x590962['id']];if(_0x33d260!==undefined)_0x31fb08[_0x590962[_0x4ed157(0x98)]]=_0x33d260;}}Object[_0x4ed157(0x20d)](_0x31fb08)['length']>0x0&&sendToPython(_0x4ed546,_0x4ed157(0x1cc),{'current_temps':_0x31fb08,'t_out':_0x4d3fd4});}catch(_0x469abe){}}function updateHealthVector(_0x436d97){const _0x198ea8=a0_0xabbc9d;if(!_0x436d97[_0x198ea8(0x7f)]||_0x436d97[_0x198ea8(0x7f)][_0x198ea8(0x1db)]===0x0)return;const _0x1ef2e2=new Array(0x60)[_0x198ea8(0xce)](0x0),_0x178224=new Date()['setHours'](0x0,0x0,0x0,0x0);_0x436d97[_0x198ea8(0x7f)][_0x198ea8(0xa5)](_0x3e935a=>{const _0x48906f=_0x198ea8,_0x4653fa=new Date(_0x3e935a[_0x48906f(0x204)]);if(_0x4653fa[_0x48906f(0xf3)]()>=_0x178224){const _0x5d8f2c=_0x4653fa['getHours'](),_0x18e1e0=_0x4653fa['getMinutes'](),_0x5d9ce4=_0x5d8f2c*0x4+Math[_0x48906f(0x1c8)](_0x18e1e0/0xf);if(_0x5d9ce4>=0x0&&_0x5d9ce4<0x60)_0x1ef2e2[_0x5d9ce4]++;}}),_0x436d97[_0x198ea8(0x1b7)](_0x198ea8(0xc4),{'val':JSON[_0x198ea8(0x123)](_0x1ef2e2),'ack':!![]});}async function getWeatherContext(_0x4686cd){const _0x1cb752=a0_0xabbc9d;if(!_0x4686cd[_0x1cb752(0x93)]['useWeather']||!_0x4686cd[_0x1cb752(0x93)][_0x1cb752(0x104)])return _0x1cb752(0x20c);try{const _0x563342=_0x4686cd['config']['weatherInstance'];let _0x1880e5=await _0x4686cd[_0x1cb752(0xd0)](_0x563342+_0x1cb752(0x14a));if(!_0x1880e5)_0x1880e5=await _0x4686cd[_0x1cb752(0xd0)](_0x563342+_0x1cb752(0x1a2));let _0x3f9dc2=await _0x4686cd[_0x1cb752(0xd0)](_0x563342+_0x1cb752(0x172));if(!_0x3f9dc2)_0x3f9dc2=await _0x4686cd[_0x1cb752(0xd0)](_0x563342+_0x1cb752(0xb1));if(_0x1880e5&&_0x3f9dc2)return _0x1880e5['val']+_0x1cb752(0x200)+_0x3f9dc2[_0x1cb752(0x211)];}catch(_0x6e31eb){}return'Keine\x20Wetterdaten\x20verfÃ¼gbar.';}async function getCalendarContext(_0x4d8f1b){const _0x5e3776=a0_0xabbc9d;if(!_0x4d8f1b[_0x5e3776(0x93)][_0x5e3776(0x1b2)]||!_0x4d8f1b['config'][_0x5e3776(0x1b4)])return _0x5e3776(0x89);return _0x5e3776(0x13e);}async function getCalendarNames(_0x1b27b8,_0x269e89){return[];}async function saveFeedback(_0x4719ce,_0x36fc39){const _0x1c8be8=a0_0xabbc9d;_0x4719ce[_0x1c8be8(0x1ee)][_0x1c8be8(0x1f4)](_0x1c8be8(0x156)+_0x36fc39[_0x1c8be8(0xef)]);}async function runGeminiAnalysis(_0x7e89c4,_0x3c80d1=''){const _0x293261=a0_0xabbc9d;if(!_0x7e89c4[_0x293261(0x1ba)])return;if(_0x7e89c4[_0x293261(0xfb)][_0x293261(0x1db)]===0x0)return;const _0x556869=_0x7e89c4[_0x293261(0xfb)][_0x293261(0x1e5)](0x0,0xf),_0x545f70=await getWeatherContext(_0x7e89c4),_0x153bc6=_0x7e89c4[_0x293261(0x195)],_0x1da9db=PERSONA_MAPPING[_0x7e89c4['config'][_0x293261(0x1c9)]||_0x293261(0xba)],_0x4bc3c1=_0x7e89c4[_0x293261(0x93)][_0x293261(0x1d8)]||_0x293261(0x16d);let _0x182aa1=_0x293261(0xe8);try{const _0x2ffdc7=await _0x7e89c4['getStateAsync'](_0x293261(0xc7));if(_0x2ffdc7&&_0x2ffdc7[_0x293261(0x211)])_0x182aa1=_0x2ffdc7[_0x293261(0x211)];}catch(_0x3ffd4b){}let _0x2eb2ae=![];try{const _0x270a5b=await _0x7e89c4[_0x293261(0x1ca)](_0x293261(0x114));if(_0x270a5b&&_0x270a5b[_0x293261(0x211)])_0x2eb2ae=!![];}catch(_0x53497c){}const _0xcd2b62='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x1da9db+_0x293261(0x135)+_0x4bc3c1+_0x293261(0xf2)+_0x153bc6+_0x293261(0xac)+_0x545f70+'.\x20ANWESEND:\x20'+_0x182aa1+_0x293261(0x138)+JSON[_0x293261(0x123)](_0x556869)+_0x293261(0x1a7)+_0x3c80d1+_0x293261(0x112);try{const _0x2fb268=await _0x7e89c4['geminiModel'][_0x293261(0x1fa)](_0xcd2b62),_0x56cc08=JSON[_0x293261(0x15c)](_0x2fb268[_0x293261(0x12a)][_0x293261(0x220)]()[_0x293261(0x1b3)](/```json|```/g,'')['trim']());await _0x7e89c4[_0x293261(0x1b7)](_0x293261(0x1ae),{'val':JSON['stringify'](_0x56cc08),'ack':!![]});if(_0x56cc08[_0x293261(0x192)])await _0x7e89c4['setStateAsync'](_0x293261(0x1f0),{'val':_0x56cc08['summary'],'ack':!![]});const _0x39bb69={'timestamp':Date[_0x293261(0x196)](),'id':Date[_0x293261(0x196)]()[_0x293261(0x169)](),'analysis':{'activity':{'summary':_0x56cc08['summary'],'isAlert':_0x56cc08['isAlert'],'alertReason':_0x56cc08[_0x293261(0x1cd)]},'comfort':{'automationProposal':_0x56cc08[_0x293261(0x1ef)]}}};await updateAnalysisHistory(_0x7e89c4,_0x39bb69);const _0x433f2e=_0x56cc08[_0x293261(0x16c)]||![];_0x433f2e!==_0x7e89c4[_0x293261(0xbf)]&&(await _0x7e89c4['setStateAsync'](_0x293261(0xe3),{'val':_0x433f2e,'ack':!![]}),_0x7e89c4[_0x293261(0xbf)]=_0x433f2e,_0x433f2e&&(await _0x7e89c4[_0x293261(0x1b7)](_0x293261(0x13b),{'val':_0x56cc08[_0x293261(0x1cd)],'ack':!![]}),sendNotification(_0x7e89c4,_0x293261(0x7c)+_0x56cc08[_0x293261(0x1cd)],![],_0x56cc08[_0x293261(0x99)])));if(_0x56cc08[_0x293261(0x1ef)]&&_0x56cc08['automationProposal'][_0x293261(0x11c)]){await _0x7e89c4['setStateAsync'](_0x293261(0x117),{'val':!![],'ack':!![]}),await _0x7e89c4[_0x293261(0x1b7)](_0x293261(0x1e3),{'val':_0x56cc08[_0x293261(0x1ef)][_0x293261(0x1f3)],'ack':!![]}),await _0x7e89c4[_0x293261(0x1b7)](_0x293261(0x20a),{'val':_0x56cc08[_0x293261(0x1ef)][_0x293261(0x1d4)],'ack':!![]}),await _0x7e89c4[_0x293261(0x1b7)]('analysis.automation.targetValue',{'val':JSON[_0x293261(0x123)](_0x56cc08[_0x293261(0x1ef)]['targetValue']),'ack':!![]});if(_0x2eb2ae)executeAutomationAction(_0x7e89c4);}}catch(_0x323039){_0x7e89c4['log'][_0x293261(0xa3)](_0x293261(0x179)+_0x323039[_0x293261(0xf4)]);}}async function startSystem(_0x451ae){const _0x2d6558=a0_0xabbc9d;_0x451ae[_0x2d6558(0x1ee)][_0x2d6558(0x1f4)]('ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.14.1)...'),await initZombies(_0x451ae);try{_0x451ae['isProVersion']=await checkLicense(_0x451ae[_0x2d6558(0x93)][_0x2d6558(0x1b9)]);}catch(_0xc009eb){}if(!_0x451ae[_0x2d6558(0x93)][_0x2d6558(0x1c3)]||_0x451ae[_0x2d6558(0x93)][_0x2d6558(0x1c3)]<0.1)_0x451ae[_0x2d6558(0x93)][_0x2d6558(0x1c3)]=0xc;await initHistory(_0x451ae),await initSystemConfig(_0x451ae);if(_0x451ae[_0x2d6558(0x93)][_0x2d6558(0x97)])try{_0x451ae[_0x2d6558(0x16a)]=new GoogleGenerativeAI(_0x451ae[_0x2d6558(0x93)][_0x2d6558(0x97)]),_0x451ae[_0x2d6558(0x1ba)]=_0x451ae[_0x2d6558(0x16a)][_0x2d6558(0x177)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x2d6558(0xeb)}}),_0x451ae[_0x2d6558(0x1ee)][_0x2d6558(0x1f4)](_0x2d6558(0x1fb));}catch(_0x5f56b2){_0x451ae[_0x2d6558(0x1ee)][_0x2d6558(0xa3)](_0x2d6558(0x148)+_0x5f56b2[_0x2d6558(0xf4)]);}await createAllObjects(_0x451ae),await loadSystemMode(_0x451ae),await loadRawEventLog(_0x451ae),await loadDailyDigests(_0x451ae),_0x451ae['subscribeStates']('analysis.trigger'),_0x451ae[_0x2d6558(0x111)](LTM_DP_TRIGGER_DIGEST),_0x451ae[_0x2d6558(0x111)](_0x2d6558(0x205)),_0x451ae[_0x2d6558(0x111)](_0x2d6558(0x8d)),_0x451ae[_0x2d6558(0x111)](_0x2d6558(0x1cb)),_0x451ae[_0x2d6558(0x111)]('analysis.automation.autoApply'),_0x451ae[_0x2d6558(0x111)](_0x2d6558(0x1ce)),_0x451ae[_0x2d6558(0x111)]('analysis.training.triggerHealth'),_0x451ae['subscribeStates'](_0x2d6558(0x130)),_0x451ae['subscribeStates']('analysis.training.triggerComfort'),_0x451ae[_0x2d6558(0x111)](_0x2d6558(0xa9)),await initSensorSubscriptions(_0x451ae),await initPresenceSubscriptions(_0x451ae),await setupTelegramListener(_0x451ae),setTimeout(()=>checkWifiPresence(_0x451ae),0x1388);if(_0x451ae[_0x2d6558(0x194)])clearInterval(_0x451ae[_0x2d6558(0x194)]);const _0x150fca=_0x451ae[_0x2d6558(0x93)][_0x2d6558(0x1ac)]||0xf;_0x150fca>0x0&&(_0x451ae['analysisTimer']=setInterval(()=>{runAutopilot(_0x451ae);},_0x150fca*0x3c*0x3e8)),schedulers[_0x2d6558(0x1a8)](_0x451ae,()=>createDailyDigest(_0x451ae)),schedulers['setupModeResetScheduler'](_0x451ae),schedulers['setupDriftAnalysisScheduler'](_0x451ae,()=>runBaselineDriftAnalysis(_0x451ae)),schedulers[_0x2d6558(0x7e)](_0x451ae,()=>sendMorningBriefing(_0x451ae)),startPythonService(_0x451ae),setTimeout(()=>{const _0x4271b6=_0x2d6558;topology['updateTopology'](_0x451ae),_0x451ae[_0x4271b6(0x175)]&&(runPythonHealthCheck(_0x451ae),triggerGaitAnalysis(_0x451ae),triggerEnergyPrediction(_0x451ae)),updateHealthVector(_0x451ae);},0x1388);}class CogniLiving extends utils[a0_0xabbc9d(0x1ea)]{constructor(_0x13dd3e){const _0x17c148=a0_0xabbc9d;super({..._0x13dd3e,'name':'cogni-living'}),this[_0x17c148(0xfb)]=[],this[_0x17c148(0x217)]=[],this[_0x17c148(0x7f)]=[],this[_0x17c148(0xee)]=[],this[_0x17c148(0x1fd)]={},this[_0x17c148(0xd1)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x17c148(0x13c)]=null,this[_0x17c148(0xb6)]=null,this[_0x17c148(0xfd)]=![],this[_0x17c148(0x16a)]=null,this['geminiModel']=null,this['currentSystemMode']=SYSTEM_MODES[_0x17c148(0x207)],this['isProVersion']=![],this[_0x17c148(0xbf)]=![],this[_0x17c148(0x1fe)]=_0x17c148(0x1eb),this[_0x17c148(0x194)]=null,this['ltmJob']=null,this[_0x17c148(0x11b)]=null,this[_0x17c148(0x127)]=null,this[_0x17c148(0x185)]=null,this['pythonProcess']=null,this[_0x17c148(0x216)]=![],this['on'](_0x17c148(0x1fc),this[_0x17c148(0x1a5)][_0x17c148(0x8a)](this)),this['on'](_0x17c148(0xfc),this[_0x17c148(0x1d2)]['bind'](this)),this['on']('unload',this[_0x17c148(0xed)][_0x17c148(0x8a)](this)),this['on']('message',this[_0x17c148(0x210)]['bind'](this));}async['onReady'](){const _0x4d33ba=a0_0xabbc9d;this['log'][_0x4d33ba(0x1f4)](_0x4d33ba(0x79)+this[_0x4d33ba(0x170)]+_0x4d33ba(0x17f));if(!installer[_0x4d33ba(0x176)](this,()=>startSystem(this)))return;}[a0_0xabbc9d(0xed)](_0x4aa4b4){const _0x4d6a87=a0_0xabbc9d;if(this['analysisTimer'])clearInterval(this[_0x4d6a87(0x194)]);if(this[_0x4d6a87(0x127)])clearInterval(this[_0x4d6a87(0x127)]);if(this[_0x4d6a87(0x1b0)])this[_0x4d6a87(0x1b0)][_0x4d6a87(0x20f)]();if(this[_0x4d6a87(0x11b)])this[_0x4d6a87(0x11b)]['cancel']();if(this[_0x4d6a87(0x185)])this[_0x4d6a87(0x185)][_0x4d6a87(0x20f)]();if(this[_0x4d6a87(0x13c)])clearTimeout(this['exitTimer']);if(this['exitGraceTimer'])clearTimeout(this['exitGraceTimer']);stopPythonService(this),_0x4aa4b4();}async[a0_0xabbc9d(0x1d2)](_0x1f2641,_0x1233db){const _0x462e78=a0_0xabbc9d;if(!_0x1233db||this[_0x462e78(0x216)])return;if(_0x1f2641[_0x462e78(0x21e)](_0x462e78(0x141))&&_0x1f2641[_0x462e78(0x174)](_0x462e78(0xa1))&&_0x1233db[_0x462e78(0x211)]){await handleTelegramResponse(this,_0x1233db[_0x462e78(0x211)]);return;}if(_0x1f2641===this[_0x462e78(0xff)]+'.'+SYSTEM_DP_MODE){if(_0x1233db[_0x462e78(0x211)]&&Object[_0x462e78(0x131)](SYSTEM_MODES)[_0x462e78(0x21e)](_0x1233db[_0x462e78(0x211)])){this[_0x462e78(0x195)]=_0x1233db[_0x462e78(0x211)];if(_0x1233db['val']===SYSTEM_MODES[_0x462e78(0x181)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x1233db[_0x462e78(0xfa)])this[_0x462e78(0x83)](_0x1f2641,{'val':this[_0x462e78(0x195)],'ack':!![]});return;}if(!_0x1233db[_0x462e78(0xfa)]){_0x1f2641[_0x462e78(0x21e)](_0x462e78(0xcd))&&_0x1233db['val']&&(this[_0x462e78(0x83)](_0x1f2641,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x1f2641[_0x462e78(0x21e)](_0x462e78(0x21c))&&_0x1233db[_0x462e78(0x211)]){this[_0x462e78(0x83)](_0x1f2641,{'val':![],'ack':!![]});if(this[_0x462e78(0xdb)])createDailyDigest(this);}_0x1f2641[_0x462e78(0x21e)](_0x462e78(0xa7))&&_0x1233db[_0x462e78(0x211)]&&(this[_0x462e78(0x83)](_0x1f2641,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x1f2641[_0x462e78(0x21e)](_0x462e78(0x193))&&_0x1233db['val']&&(this[_0x462e78(0x83)](_0x1f2641,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x1f2641[_0x462e78(0x21e)](_0x462e78(0x1ce))&&_0x1233db['val']){this[_0x462e78(0x83)](_0x1f2641,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x59c050=await this['getStateAsync']('LTM.trainingData.sequences');if(_0x59c050&&_0x59c050['val']){const _0x56577c=JSON['parse'](_0x59c050[_0x462e78(0x211)]);this[_0x462e78(0x1ee)][_0x462e78(0x1f4)](_0x462e78(0x74)),this[_0x462e78(0x1b7)]('analysis.training.status',{'val':_0x462e78(0x92),'ack':!![]}),sendToPython(this,_0x462e78(0x78),{'sequences':_0x56577c});}}catch(_0x55663c){this['log'][_0x462e78(0xa3)](_0x462e78(0x11f)+_0x55663c[_0x462e78(0xf4)]);}}if(_0x1f2641[_0x462e78(0x21e)](_0x462e78(0x15a))&&_0x1233db['val']){this[_0x462e78(0x83)](_0x1f2641,{'val':![],'ack':!![]});if(this[_0x462e78(0xdb)])try{const _0xa5867f=await this[_0x462e78(0x1ca)](LTM_DP_DAILY_DIGESTS);if(_0xa5867f&&_0xa5867f[_0x462e78(0x211)])sendToPython(this,_0x462e78(0x1ab),{'digests':JSON['parse'](_0xa5867f[_0x462e78(0x211)])});}catch(_0x494bde){}}if(_0x1f2641[_0x462e78(0x21e)](_0x462e78(0x130))&&_0x1233db['val']){this[_0x462e78(0x83)](_0x1f2641,{'val':![],'ack':!![]});if(this[_0x462e78(0xdb)])try{const _0x396b9d=await this[_0x462e78(0x1ca)](_0x462e78(0x1c7));if(_0x396b9d&&_0x396b9d['val'])sendToPython(this,'TRAIN_ENERGY',{'points':JSON[_0x462e78(0x15c)](_0x396b9d['val'])});}catch(_0x36d20e){}}if(_0x1f2641[_0x462e78(0x21e)](_0x462e78(0x1c4))&&_0x1233db[_0x462e78(0x211)]){this[_0x462e78(0x83)](_0x1f2641,{'val':![],'ack':!![]});if(this[_0x462e78(0xdb)])try{const _0x447dc2=await this[_0x462e78(0x1ca)](LTM_DP_RAW_LOG);_0x447dc2&&_0x447dc2[_0x462e78(0x211)]&&(this['log'][_0x462e78(0x1f4)](_0x462e78(0x1e6)),sendToPython(this,'TRAIN_COMFORT',{'events':JSON[_0x462e78(0x15c)](_0x447dc2[_0x462e78(0x211)])}));}catch(_0x44a5fe){}}_0x1f2641['includes'](_0x462e78(0xa9))&&_0x1233db['val']&&(this[_0x462e78(0x83)](_0x1f2641,{'val':![],'ack':!![]}),this[_0x462e78(0x1ee)][_0x462e78(0x1f4)](_0x462e78(0x122)),topology[_0x462e78(0x197)](this));return;}if(this[_0x462e78(0x93)][_0x462e78(0x19c)]&&this[_0x462e78(0x93)]['presenceDevices'][_0x462e78(0x21e)](_0x1f2641)){await checkWifiPresence(this);return;}const _0x309889=(this[_0x462e78(0x93)][_0x462e78(0x15b)]||[])[_0x462e78(0xc9)](_0x5e74c1=>_0x5e74c1['id']===_0x1f2641);if(_0x309889)processSensorEvent(this,_0x1f2641,_0x1233db,_0x309889);}async['onMessage'](_0x52773a){const _0x28c912=a0_0xabbc9d;if(typeof _0x52773a===_0x28c912(0x7b)&&_0x52773a[_0x28c912(0xf4)]){if(_0x52773a[_0x28c912(0x9a)]===_0x28c912(0x20b)){const _0x49a92c=_0x52773a[_0x28c912(0xf4)][_0x28c912(0x18f)]||this[_0x28c912(0x93)][_0x28c912(0x97)];if(!_0x49a92c)return this[_0x28c912(0x1d7)](_0x52773a[_0x28c912(0x9f)],_0x52773a[_0x28c912(0x9a)],{'success':![],'message':_0x28c912(0x163)},_0x52773a['callback']);try{const _0x639c3f=new GoogleGenerativeAI(_0x49a92c),_0x584513=_0x639c3f['getGenerativeModel']({'model':GEMINI_MODEL}),_0x52df6d=await _0x584513['generateContent']('Hi');this[_0x28c912(0x1d7)](_0x52773a[_0x28c912(0x9f)],_0x52773a[_0x28c912(0x9a)],{'success':!![],'message':_0x28c912(0xa0)+_0x52df6d[_0x28c912(0x12a)][_0x28c912(0x220)]()},_0x52773a['callback']);}catch(_0x22eee8){this['sendTo'](_0x52773a['from'],_0x52773a[_0x28c912(0x9a)],{'success':![],'message':'Err:\x20'+_0x22eee8[_0x28c912(0xf4)]},_0x52773a[_0x28c912(0x124)]);}}else{if(_0x52773a[_0x28c912(0x9a)]===_0x28c912(0x12f)){const _0x31e83a=await getWeatherContext(this),_0x4afbf6=await getCalendarContext(this);this['sendTo'](_0x52773a[_0x28c912(0x9f)],_0x52773a['command'],{'success':!![],'weather':_0x31e83a,'calendar':_0x4afbf6},_0x52773a[_0x28c912(0x124)]);}else{if(_0x52773a[_0x28c912(0x9a)]===_0x28c912(0xfe)){if(!this[_0x28c912(0xdb)])return this[_0x28c912(0x1d7)](_0x52773a[_0x28c912(0x9f)],_0x52773a['command'],{'success':![],'isPro':![]},_0x52773a[_0x28c912(0x124)]);let _0x534ebe={'status':'N/A'};try{const _0x2c5ce9=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x534ebe[_0x28c912(0x90)]=_0x2c5ce9?_0x2c5ce9[_0x28c912(0x211)]:_0x28c912(0x1f5);}catch(_0x5de02d){}this['sendTo'](_0x52773a['from'],_0x52773a[_0x28c912(0x9a)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x28c912(0xee)],'driftAnalysis':_0x534ebe,'analysisHistory':this['analysisHistory']},_0x52773a[_0x28c912(0x124)]);}else{if(_0x52773a[_0x28c912(0x9a)]===_0x28c912(0x17c)){const _0x1f7876=this[_0x28c912(0xee)]['length'],_0x660fe7=new Date(),_0x3569b6=new Date(_0x660fe7[_0x28c912(0x136)](),_0x660fe7['getMonth'](),_0x660fe7['getDate']())[_0x28c912(0xf3)](),_0x4ff100=this[_0x28c912(0x7f)][_0x28c912(0x151)](_0x42eca0=>new Date(_0x42eca0[_0x28c912(0x204)])[_0x28c912(0xf3)]()>_0x3569b6)[_0x28c912(0x1db)],_0x535224=new Array(0x18)[_0x28c912(0xce)](0x0);this['rawEventLog'][_0x28c912(0xa5)](_0x403f1e=>{const _0x31837c=_0x28c912,_0x33b972=new Date(_0x403f1e[_0x31837c(0x204)]);if(_0x33b972[_0x31837c(0xf3)]()>_0x3569b6)_0x535224[_0x33b972[_0x31837c(0x109)]()]++;});let _0x220181={'status':_0x28c912(0x1f5)};try{const _0x103c94=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x220181[_0x28c912(0x90)]=_0x103c94?_0x103c94[_0x28c912(0x211)]:_0x28c912(0x1f5);}catch(_0x2404d6){}let _0x589c47='';try{const _0x56e7b0=await this[_0x28c912(0x1ca)](_0x28c912(0xc7));_0x589c47=_0x56e7b0?_0x56e7b0[_0x28c912(0x211)]:'';}catch(_0x2931a6){}let _0x353515=null;!this['geminiModel']&&(_0x353515=this[_0x28c912(0x93)][_0x28c912(0x97)]?_0x28c912(0x6d):_0x28c912(0x15f));let _0x9dba35={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x1cd7c8=await this[_0x28c912(0x1ca)](_0x28c912(0x117));if(_0x1cd7c8&&_0x1cd7c8[_0x28c912(0x211)]){_0x9dba35[_0x28c912(0x11c)]=!![];const _0x179866=await this['getStateAsync'](_0x28c912(0x1e3));_0x9dba35[_0x28c912(0x1f3)]=_0x179866?_0x179866['val']:'';const _0x58cf9b=await this[_0x28c912(0x1ca)]('analysis.automation.targetId');_0x9dba35[_0x28c912(0x1d4)]=_0x58cf9b?_0x58cf9b[_0x28c912(0x211)]:'';const _0x357873=await this[_0x28c912(0x1ca)](_0x28c912(0x6f));_0x9dba35[_0x28c912(0xb7)]=_0x357873?_0x357873[_0x28c912(0x211)]:'';}const _0x2317fb=await this['getStateAsync'](_0x28c912(0x114));_0x9dba35['autoApply']=_0x2317fb?!!_0x2317fb[_0x28c912(0x211)]:![];}catch(_0x1762f8){}this[_0x28c912(0x1d7)](_0x52773a['from'],_0x52773a[_0x28c912(0x9a)],{'success':!![],'eventHistory':this[_0x28c912(0xfb)][_0x28c912(0x1e5)](0x0,0xf),'stats':{'digestCount':_0x1f7876,'eventCountToday':_0x4ff100,'hourlyActivity':_0x535224,'driftStatus':_0x220181[_0x28c912(0x90)],'isPresent':this[_0x28c912(0x140)],'presenceWho':_0x589c47,'minDays':this['config']['minDaysForBaseline']||0x7,'stbDays':this[_0x28c912(0x93)][_0x28c912(0x160)]||0xe,'ltbDays':this[_0x28c912(0x93)][_0x28c912(0x1dc)]||0x3c,'systemError':_0x353515},'automation':_0x9dba35},_0x52773a['callback']);}else{if(_0x52773a[_0x28c912(0x9a)]==='scanDevices')try{const _0x39fb5e=await scanner['scanForDevices'](this,_0x52773a[_0x28c912(0xf4)]||{});this[_0x28c912(0x1d7)](_0x52773a[_0x28c912(0x9f)],_0x52773a['command'],{'success':!![],'devices':_0x39fb5e},_0x52773a[_0x28c912(0x124)]);}catch(_0x23ba7d){this['sendTo'](_0x52773a[_0x28c912(0x9f)],_0x52773a['command'],{'success':![],'error':_0x23ba7d[_0x28c912(0xf4)]},_0x52773a['callback']);}else{if(_0x52773a[_0x28c912(0x9a)]===_0x28c912(0xd4)){const _0x55508c=await this[_0x28c912(0x75)]('enum.functions.*',_0x28c912(0x18e)),_0x5d3086=[];if(_0x55508c)for(const _0x29f0a2 in _0x55508c){const _0x380c40=_0x55508c[_0x29f0a2],_0x2f644d=(_0x380c40[_0x28c912(0x1ec)]&&typeof _0x380c40[_0x28c912(0x1ec)]['name']==='object'?_0x380c40[_0x28c912(0x1ec)][_0x28c912(0x19a)]['de']:_0x380c40[_0x28c912(0x1ec)][_0x28c912(0x19a)])||_0x380c40[_0x28c912(0x1ec)][_0x28c912(0x19a)];_0x5d3086['push']({'id':_0x29f0a2,'name':_0x2f644d});}const _0x4d3d51=await this[_0x28c912(0x75)](_0x28c912(0x219),_0x28c912(0x18e)),_0xde2841=[];if(_0x4d3d51)for(const _0x378d57 in _0x4d3d51){const _0x599cd0=_0x4d3d51[_0x378d57],_0x3c0df2=(_0x599cd0['common']&&typeof _0x599cd0[_0x28c912(0x1ec)][_0x28c912(0x19a)]==='object'?_0x599cd0['common'][_0x28c912(0x19a)]['de']:_0x599cd0[_0x28c912(0x1ec)][_0x28c912(0x19a)])||_0x378d57['split']('.')[_0x28c912(0x15d)]();_0xde2841['push'](_0x3c0df2);}this[_0x28c912(0x1d7)](_0x52773a[_0x28c912(0x9f)],_0x52773a['command'],{'success':!![],'enums':_0x5d3086,'rooms':_0xde2841},_0x52773a[_0x28c912(0x124)]);}else{if(_0x52773a[_0x28c912(0x9a)]===_0x28c912(0xe7)){const _0xf9351b=_0x52773a[_0x28c912(0xf4)][_0x28c912(0x165)];if(!_0xf9351b)return this[_0x28c912(0x1d7)](_0x52773a[_0x28c912(0x9f)],_0x52773a['command'],{'success':![],'error':_0x28c912(0x21a)},_0x52773a[_0x28c912(0x124)]);const _0x5c8a2d=await getCalendarNames(this,_0xf9351b);this[_0x28c912(0x1d7)](_0x52773a[_0x28c912(0x9f)],_0x52773a[_0x28c912(0x9a)],{'success':!![],'names':_0x5c8a2d},_0x52773a['callback']);}else{if(_0x52773a[_0x28c912(0x9a)]===_0x28c912(0x1bc)){const {targetId:_0x47b4ac,targetValue:_0x50eab6}=_0x52773a[_0x28c912(0xf4)];this[_0x28c912(0x1ee)]['info']('ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20'+_0x47b4ac+_0x28c912(0x1e7)+_0x50eab6),await this[_0x28c912(0x1b7)](_0x28c912(0x117),{'val':!![],'ack':!![]}),await this[_0x28c912(0x1b7)](_0x28c912(0x1e3),{'val':'SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20'+_0x47b4ac,'ack':!![]}),await this[_0x28c912(0x1b7)](_0x28c912(0x20a),{'val':_0x47b4ac,'ack':!![]}),await this[_0x28c912(0x1b7)](_0x28c912(0x6f),{'val':_0x50eab6,'ack':!![]}),this[_0x28c912(0x1d7)](_0x52773a['from'],_0x52773a[_0x28c912(0x9a)],{'success':!![]},_0x52773a[_0x28c912(0x124)]);}else{if(_0x52773a[_0x28c912(0x9a)]==='submitFeedback'){const {historyId:_0x1a0d5a,rating:_0x3bbd62,comment:_0x1d41fa,alertReason:_0x16e116}=_0x52773a[_0x28c912(0xf4)];_0x1a0d5a&&_0x3bbd62?(await saveFeedback(this,{'timestamp':Date[_0x28c912(0x196)](),'historyId':_0x1a0d5a,'rating':_0x3bbd62,'comment':_0x1d41fa,'alertReason':_0x16e116}),this[_0x28c912(0x1d7)](_0x52773a[_0x28c912(0x9f)],_0x52773a[_0x28c912(0x9a)],{'success':!![]},_0x52773a[_0x28c912(0x124)])):this[_0x28c912(0x1d7)](_0x52773a[_0x28c912(0x9f)],_0x52773a[_0x28c912(0x9a)],{'success':![],'error':_0x28c912(0x1c5)},_0x52773a['callback']);}else{if(_0x52773a['command']===_0x28c912(0x1a1))this[_0x28c912(0x1ee)]['info'](_0x28c912(0x16f)),await this[_0x28c912(0x1b7)](_0x28c912(0x117),{'val':![],'ack':!![]}),await this['setStateAsync'](_0x28c912(0x1e3),{'val':'','ack':!![]}),this['sendTo'](_0x52773a[_0x28c912(0x9f)],_0x52773a[_0x28c912(0x9a)],{'success':!![]},_0x52773a[_0x28c912(0x124)]);else{if(_0x52773a[_0x28c912(0x9a)]==='updateTopologyMatrix'){const {matrix:_0x193b3a}=_0x52773a[_0x28c912(0xf4)];try{const _0x4cdf43=await this[_0x28c912(0x1ca)](_0x28c912(0x21d));if(_0x4cdf43&&_0x4cdf43[_0x28c912(0x211)]){const _0x162919=JSON[_0x28c912(0x15c)](_0x4cdf43['val']);_0x162919[_0x28c912(0xda)]=_0x193b3a,_0x162919['updated']=Date[_0x28c912(0x196)](),await this[_0x28c912(0x1b7)](_0x28c912(0x21d),{'val':JSON[_0x28c912(0x123)](_0x162919),'ack':!![]}),this[_0x28c912(0x1ee)][_0x28c912(0x1f4)](_0x28c912(0x21b));}this[_0x28c912(0x1d7)](_0x52773a[_0x28c912(0x9f)],_0x52773a[_0x28c912(0x9a)],{'success':!![]},_0x52773a[_0x28c912(0x124)]);}catch(_0x5f3fff){this['log'][_0x28c912(0xa3)](_0x28c912(0x10d)+_0x5f3fff[_0x28c912(0xf4)]);}}}}}}}}}}}}}}}if(require[a0_0xabbc9d(0x10b)]!==module)module[a0_0xabbc9d(0xc3)]=_0x4b1192=>new CogniLiving(_0x4b1192);else new CogniLiving();