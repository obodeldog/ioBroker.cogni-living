const a0_0xac12c8=a0_0x1ac7;(function(_0x363082,_0x82b2e1){const _0x3923d2=a0_0x1ac7,_0x4c0976=_0x363082();while(!![]){try{const _0x70a5ae=-parseInt(_0x3923d2(0x232))/0x1*(-parseInt(_0x3923d2(0x225))/0x2)+parseInt(_0x3923d2(0x148))/0x3+parseInt(_0x3923d2(0x192))/0x4+parseInt(_0x3923d2(0x1f9))/0x5+-parseInt(_0x3923d2(0x144))/0x6*(parseInt(_0x3923d2(0x12b))/0x7)+-parseInt(_0x3923d2(0x137))/0x8*(parseInt(_0x3923d2(0x20b))/0x9)+-parseInt(_0x3923d2(0x285))/0xa*(parseInt(_0x3923d2(0x165))/0xb);if(_0x70a5ae===_0x82b2e1)break;else _0x4c0976['push'](_0x4c0976['shift']());}catch(_0x34966a){_0x4c0976['push'](_0x4c0976['shift']());}}}(a0_0x5af4,0xb44e0));const a0_0x4aa089=(function(){let _0x16bd36=!![];return function(_0xc91eac,_0x83c856){const _0x236128=_0x16bd36?function(){const _0x2bfed9=a0_0x1ac7;if(_0x83c856){const _0x2413e7=_0x83c856[_0x2bfed9(0x206)](_0xc91eac,arguments);return _0x83c856=null,_0x2413e7;}}:function(){};return _0x16bd36=![],_0x236128;};}()),a0_0xe060d7=a0_0x4aa089(this,function(){const _0x22c184=a0_0x1ac7;return a0_0xe060d7[_0x22c184(0x175)]()[_0x22c184(0x27a)](_0x22c184(0x13b))[_0x22c184(0x175)]()[_0x22c184(0x281)](a0_0xe060d7)[_0x22c184(0x27a)](_0x22c184(0x13b));});a0_0xe060d7();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0xac12c8(0x1e1)),installer=require(a0_0xac12c8(0x274)),scanner=require(a0_0xac12c8(0x1ed)),schedulers=require(a0_0xac12c8(0x246)),topology=require(a0_0xac12c8(0x186)),setup=require(a0_0xac12c8(0x26c)),recorder=require(a0_0xac12c8(0x20d)),pythonBridge=require(a0_0xac12c8(0x17c)),aiAgent=require(a0_0xac12c8(0x160)),deadMan=require(a0_0xac12c8(0x135)),automation=require(a0_0xac12c8(0x23d)),GEMINI_MODEL=a0_0xac12c8(0x223),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x5af4(){const _0x1c4fb0=['ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20','cancel','enum','ANALYZE_GAIT','namespace','ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20','analysis.health.gaitSensors','createAllObjects','lastTrackerEventTime','Sensors\x20used\x20for\x20Gait\x20Analysis','find','analysis.triggerBriefing','eventHistory','./lib/ai_agent','\x20devices.','ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).','forecast.current.weather','isSolar','3751UPSUUc','toFixed','checkAndInstall','TRAIN_COMFORT','text','debug','PYTHON_EXE','activityLevel','values','sensor.door','notifyPushoverEnabled','sunny','Kein\x20Wetter-Adapter','ANALYZE_TREND','analysis.energy.warmupTimes','Lernphase\x20(','toString','INTERNAL','analysis.automation.targetValue','times','thermostat','analysis.training.triggerComfort','startSystem','./lib/python_bridge','Instanz\x20nicht\x20gefunden','triggerInfrasoundCorrelation','isProVersion','parse','includes','number','Verbindung\x20erfolgreich!','LTM.rawEventLog','createDailyDigest','./lib/topology','â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...','bootTime','checkSolarCondition','infrasoundLocked','Fehler:\x20','manual','testNotification','common','json','slice','getForeignStateAsync','394876SlZEeJ','getForeignObjectsAsync','[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20','onStateChange','genAI','updated','[Forensics]\x20Save\x20failed:\x20','object','ErklÃ¤rt\x20durch:\x20','role','bind','accuweather.0','infrasoundArmingId','isArray','setupModeResetScheduler','\x20hPa.\x20Einbruch\x20wahrscheinlich.','Graph-Brain\x20Train\x20Error:\x20','analysis.automation.targetId','notifyTelegramInstance','stringify','isPresent','checkWifiPresence','window','sensor.window','abs','Keine\x20Sensor-AktivitÃ¤t','subscribeForeignStatesAsync','analysis.energy.warmupSources','toLowerCase','handleInfrasound','briefingJob','memoryCache','refreshCalendar','stopService','message','instance','Fenster\x20geÃ¶ffnet:\x20','SYSTEM_MODES','driftAnalysisTimer','enum.rooms.*','magnet','push','analysis.automation.description','onUnload','sources','analysis.energy.rlPenalties','analysis.topology.structure','name','length','currentSystemMode','guest','infrasoundSensorId','\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.','scanThermostats','state','SYSTEM_DP_MODE','LTM.trainingData.sequences','[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20','_calName','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','unshift','getEnums','setStateAsync','getTime','getOverviewData','isGracePeriodActive','value','simulateEnergyMPC','dailyDigests','modeResetJob','Keine\x20Antwort\x20von\x20Gemini','Party\x20Mode','filter','string','LTM.dailyDigests','weatherunderground.0','appendToLog','runBaselineDriftAnalysis','log','@google/generative-ai','\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).','Aktiv\x20(','minDaysForBaseline','setHours','join','onReady','onMessage','runPythonHealthCheck','scores','analysisInterval','getOutsideTemperatureNumeric','./lib/scanner','runAutopilot','klar','analysis.training.triggerSecurity','updateTopologyMatrix','add','Adapter','Heizung\x20kann\x20','monitorEnforcements','ALARM','.system.mode','Daten\x20nicht\x20verfÃ¼gbar','6638960wAffeZ','initZombies','setupBriefingScheduler','Active\x20Calendar\x20Enforcements\x20(Locks)','abortExitTimer','system.mode','getHours','notifyPushoverInstance','cogni-living','exitTimer','triggerBriefing','sendTo','Gait\x20Speed\x20Calculation\x20Proof','apply','TRAIN_SECURITY','enum.functions.*','Guest\x20Mode','notifyTelegramEnabled','9bspziT','\x20sequences...','./lib/recorder','exitGraceTimer','SET_LEARNING_MODE','now','geminiModel','ðŸ§ \x20Graph-Brain:\x20Training\x20Behaviour\x20Matrix\x20based\x20on\x20','analysis.automation.autoApply','analysis.security.infrasoundLog','.communicate.request','PREDICT_ENERGY','NORMAL','licenseKey','some','info','generateContent','getCalendarNames','runGeminiAnalysis','inactivityThresholdHours','automation.triggerAction','executeAutomationAction','presenceDevices','clear','models/gemini-flash-latest','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','53260ULwdPl','telegram','analysis.training.triggerHealth','sendNotification','WiFi\x20Presence\x20detected.','door','online','\x20Tage)','calendarName','Nuukanni\x20Security','\x20hPa\x20(Limit:\x20','ANOMALY\x20(Real\x20Threat?)','response','17hefDGF','sensorLastValues','config','startService','devices','from','location','cleanupGhostInterventions','healthTrendInterval','unload','subscribeStates','./lib/automation','application/json','initHistory','OPTIMIZE_ENERGY','updateHealthVector','temperature','simulateButler','LTM.triggerDailyDigest','reed','./lib/scheduler','analysis.security.learningStatus','Standard','getLtmData','triggerGaitAnalysis','Sec-Training\x20started...','TRACK_EVENT','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','TRAIN_HEALTH','val','analysis.energy.ventilationAlerts','infrasoundThreshold','analyzeWindowOpening','updateLocation','Kein\x20Kalender-Adapter','exports','analysis.energy.activeEnforcements','Key\x20not\x20found\x20or\x20not\x20provided','forEach','setObjectNotExistsAsync','heiter','TRAIN_ENERGY','ðŸ¤–\x20Butler\x20Training\x20started.\x20Injecting\x20knowledge\x20about\x20','[Infrasound]\x20ðŸŸ¡\x20Debug-Mode:\x20Alarm\x20detected\x20but\x20suppressed\x20because\x20presence=true.','security.alarm_triggered','getStateAsync','version','warn','analysis.trigger','Gemini\x20AI\x20initialized.','sendMorningBriefing','setPresence','loadSystemMode','analysis.training.triggerTopology','command','analysis.health.todayVector','pressureBuffer','party','./lib/setup','checkLicense','callback','setupDriftAnalysisScheduler','SET_TOPOLOGY','analysis.energy.pinnForecast',')\x20-\x20Phase\x20D\x20(Comfort\x20Refinement)','type','./lib/installer','send','lastAlertState','triggerDailyDigest','pop','key','search','MATCH\x20(False\x20Positive)','General\x20Activity\x20Trend\x20(%)','setState','analysisHistory','communicate.request','âš ï¸\x20Graph-Brain:\x20No\x20training\x20sequences\x20found\x20in\x20LTM.','constructor','Active\x20Ventilation\x20Alerts','NextHours.Location_1.Day_1.current.symbol_desc','ack','26970VMueiT','getGenerativeModel','CALIB','[Calibration]\x20Window\x20','getState','analysis.energy.insulationScore','geminiApiKey','endsWith','trackerHeartbeat','infrasoundEnabled','checkThermostats','minutes_safe','timestamp','442477MYYwwC','processSensorEvent','error','VACATION','rawEventLog','dependencyInstallInProgress','apiKey','dismissAutomation','analysis.automation.patternDetected','checkCalendarTriggers','./lib/dead_man','triggerEnergyPrediction','8016616gEURdA','keys','fill','\x20min\x20ausbleiben.','(((.+)+)+)+$','sort','Current.WeatherText','scanForDevices','\x20opened.\x20Peak\x20Pressure:\x20','analysis.training.status','TRAIN_TOPOLOGY','analysis.energy.warmupTargets','getForeignObjectAsync','6myEUPF','.data.table','ltmJob','Gemini\x20Init\x20Error:\x20','2532816IGWmUf','analysisTimer','entries','floor','motion','system.presenceWho','calendarInstance','sonn','analysis.training.triggerEnergy','updateSchedulePreview','updateTopology'];a0_0x5af4=function(){return _0x1c4fb0;};return a0_0x5af4();}class CogniLiving extends utils[a0_0xac12c8(0x1f3)]{constructor(_0x35a66e){const _0x44d18a=a0_0xac12c8;super({..._0x35a66e,'name':_0x44d18a(0x201)}),this[_0x44d18a(0x15f)]=[],this[_0x44d18a(0x27e)]=[],this[_0x44d18a(0x12f)]=[],this['dailyDigests']=[],this[_0x44d18a(0x233)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x44d18a(0x202)]=null,this[_0x44d18a(0x20e)]=null,this[_0x44d18a(0x1d3)]=![],this[_0x44d18a(0x196)]=null,this[_0x44d18a(0x211)]=null,this[_0x44d18a(0x1c3)]=setup[_0x44d18a(0x1b7)][_0x44d18a(0x217)],this[_0x44d18a(0x17f)]=![],this[_0x44d18a(0x276)]=![],this['analysisTimer']=null,this[_0x44d18a(0x146)]=null,this[_0x44d18a(0x1d7)]=null,this[_0x44d18a(0x1b8)]=null,this[_0x44d18a(0x1b0)]=null,this[_0x44d18a(0x126)]=null,this[_0x44d18a(0x23a)]=null,this[_0x44d18a(0x130)]=![],this['lastTrackerEventTime']=Date['now'](),this['memoryCache']=null,this[_0x44d18a(0x188)]=Date[_0x44d18a(0x210)](),this[_0x44d18a(0x18a)]=![],this[_0x44d18a(0x26a)]=[],this['on']('ready',this[_0x44d18a(0x1e7)][_0x44d18a(0x19c)](this)),this['on']('stateChange',this[_0x44d18a(0x195)]['bind'](this)),this['on'](_0x44d18a(0x23b),this[_0x44d18a(0x1bd)]['bind'](this)),this['on']('message',this[_0x44d18a(0x1e8)][_0x44d18a(0x19c)](this));}async['onReady'](){const _0x2ac320=a0_0xac12c8;this[_0x2ac320(0x1e0)]['info']('cogni-living\x20adapter\x20starting\x20(v'+this[_0x2ac320(0x260)]+_0x2ac320(0x272));if(!installer[_0x2ac320(0x167)](this,()=>this[_0x2ac320(0x17b)]()))return;}async[a0_0xac12c8(0x17b)](){const _0x400bda=a0_0xac12c8;await setup[_0x400bda(0x1fa)](this);try{this[_0x400bda(0x17f)]=await setup[_0x400bda(0x26d)](this[_0x400bda(0x234)][_0x400bda(0x218)]);}catch(_0xb98ca8){}if(!this[_0x400bda(0x234)]['inactivityThresholdHours']||this[_0x400bda(0x234)][_0x400bda(0x21e)]<0.1)this['config'][_0x400bda(0x21e)]=0xc;await setup[_0x400bda(0x23f)](this),await setup['initSystemConfig'](this);try{const _0x2ac1ca=await this[_0x400bda(0x25f)]('analysis.energy.warmupTimes'),_0x1802d1=await this[_0x400bda(0x25f)]('analysis.energy.warmupSources');_0x2ac1ca&&_0x2ac1ca[_0x400bda(0x24f)]&&_0x1802d1&&_0x1802d1[_0x400bda(0x24f)]&&(Date['now']()-_0x2ac1ca['ts']<0x4*0xe10*0x3e8&&(this[_0x400bda(0x1b1)]={'times':JSON['parse'](_0x2ac1ca[_0x400bda(0x24f)]),'sources':JSON['parse'](_0x1802d1[_0x400bda(0x24f)])},this[_0x400bda(0x1e0)]['info'](_0x400bda(0x158)+Object[_0x400bda(0x138)](this[_0x400bda(0x1b1)][_0x400bda(0x178)])[_0x400bda(0x1c2)]+_0x400bda(0x1e2))));}catch(_0x5001b7){this[_0x400bda(0x1e0)][_0x400bda(0x261)]('Memory\x20Hydration\x20Failed:\x20'+_0x5001b7[_0x400bda(0x1b4)]);}if(this[_0x400bda(0x234)][_0x400bda(0x124)])try{this[_0x400bda(0x196)]=new GoogleGenerativeAI(this[_0x400bda(0x234)][_0x400bda(0x124)]),this[_0x400bda(0x211)]=this[_0x400bda(0x196)][_0x400bda(0x286)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x400bda(0x23e)}}),this['log'][_0x400bda(0x21a)](_0x400bda(0x263));}catch(_0x1093c0){this[_0x400bda(0x1e0)][_0x400bda(0x12d)](_0x400bda(0x147)+_0x1093c0[_0x400bda(0x1b4)]);}await setup[_0x400bda(0x15a)](this),await this[_0x400bda(0x266)](),await this[_0x400bda(0x259)](_0x400bda(0x271),{'type':_0x400bda(0x1c8),'common':{'name':'PINN\x20AI\x20Forecast','type':_0x400bda(0x1db),'role':_0x400bda(0x18f),'read':!![],'write':![]},'native':{}}),await this[_0x400bda(0x259)](_0x400bda(0x250),{'type':'state','common':{'name':_0x400bda(0x282),'type':_0x400bda(0x1db),'role':_0x400bda(0x18f),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x400bda(0x173),{'type':_0x400bda(0x1c8),'common':{'name':_0x400bda(0x224),'type':_0x400bda(0x1db),'role':_0x400bda(0x18f),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x400bda(0x142),{'type':_0x400bda(0x1c8),'common':{'name':'Warm-Up\x20Target\x20Temps\x20(JSON)','type':_0x400bda(0x1db),'role':_0x400bda(0x18f),'read':!![],'write':!![],'def':'{\x22default\x22:\x2021}'},'native':{}}),await this[_0x400bda(0x259)](_0x400bda(0x1bf),{'type':_0x400bda(0x1c8),'common':{'name':'Reinforcement\x20Learning\x20Penalties','type':_0x400bda(0x1db),'role':'json','read':!![],'write':![],'def':'{}'},'native':{}}),await this[_0x400bda(0x259)]('analysis.health.activityTrend',{'type':_0x400bda(0x1c8),'common':{'name':_0x400bda(0x27c),'type':'number','role':_0x400bda(0x1d4),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x400bda(0x259)](_0x400bda(0x159),{'type':_0x400bda(0x1c8),'common':{'name':_0x400bda(0x15c),'type':_0x400bda(0x1db),'role':_0x400bda(0x169),'read':!![],'write':![]},'native':{}}),await this[_0x400bda(0x259)](_0x400bda(0x256),{'type':_0x400bda(0x1c8),'common':{'name':_0x400bda(0x1fc),'type':'string','role':_0x400bda(0x18f),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x400bda(0x259)](_0x400bda(0x214),{'type':_0x400bda(0x1c8),'common':{'name':'Forensic\x20Infrasound\x20Log','type':_0x400bda(0x1db),'role':_0x400bda(0x18f),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x400bda(0x259)]('analysis.health.gaitDebug',{'type':_0x400bda(0x1c8),'common':{'name':_0x400bda(0x205),'type':'string','role':'text','read':!![],'write':![]},'native':{}});try{const _0x208952=await this[_0x400bda(0x25f)](_0x400bda(0x184));if(_0x208952&&_0x208952['val'])this[_0x400bda(0x12f)]=JSON[_0x400bda(0x180)](_0x208952['val']);}catch(_0xc1b28f){this[_0x400bda(0x12f)]=[];}try{const _0x385674=await this[_0x400bda(0x25f)](_0x400bda(0x1dc));if(_0x385674&&_0x385674[_0x400bda(0x24f)])this[_0x400bda(0x1d6)]=JSON[_0x400bda(0x180)](_0x385674['val']);}catch(_0x19abb4){this[_0x400bda(0x1d6)]=[];}const _0x3f0f29=this[_0x400bda(0x1d6)][_0x400bda(0x1c2)]>=(this[_0x400bda(0x234)][_0x400bda(0x1e4)]||0x7)?_0x400bda(0x1e3)+this[_0x400bda(0x1d6)]['length']+_0x400bda(0x22c):_0x400bda(0x174)+this[_0x400bda(0x1d6)]['length']+'/'+(this['config'][_0x400bda(0x1e4)]||0x7)+')';await this[_0x400bda(0x1d0)]('LTM.baselineStatus',{'val':_0x3f0f29,'ack':!![]}),this[_0x400bda(0x23c)](_0x400bda(0x262)),this['subscribeStates'](_0x400bda(0x244)),this[_0x400bda(0x23c)](_0x400bda(0x1fe)),this[_0x400bda(0x23c)](_0x400bda(0x15e)),this[_0x400bda(0x23c)]('analysis.automation.triggerAction'),this[_0x400bda(0x23c)](_0x400bda(0x213)),this[_0x400bda(0x23c)](_0x400bda(0x1f0)),this[_0x400bda(0x23c)](_0x400bda(0x227)),this['subscribeStates'](_0x400bda(0x150)),this['subscribeStates'](_0x400bda(0x17a)),this[_0x400bda(0x23c)]('analysis.training.triggerTopology'),this[_0x400bda(0x23c)]('analysis.energy.mpcActive'),this[_0x400bda(0x23c)](_0x400bda(0x1ad));this[_0x400bda(0x234)][_0x400bda(0x127)]&&this[_0x400bda(0x234)][_0x400bda(0x1c5)]&&(this['log'][_0x400bda(0x21a)](_0x400bda(0x194)+this[_0x400bda(0x234)][_0x400bda(0x1c5)]),this['subscribeForeignStates'](this[_0x400bda(0x234)][_0x400bda(0x1c5)]));const _0x3ee18e=this['config'][_0x400bda(0x236)];if(_0x3ee18e)for(const _0x3dd616 of _0x3ee18e){await this['subscribeForeignStatesAsync'](_0x3dd616['id']);}const _0x39e2b3=this[_0x400bda(0x234)][_0x400bda(0x221)];if(_0x39e2b3)for(const _0x225680 of _0x39e2b3){await this[_0x400bda(0x1ac)](_0x225680);}if(this[_0x400bda(0x234)][_0x400bda(0x20a)]&&this[_0x400bda(0x234)][_0x400bda(0x1a4)])await this[_0x400bda(0x1ac)](this[_0x400bda(0x234)][_0x400bda(0x1a4)]+_0x400bda(0x215));setTimeout(()=>this[_0x400bda(0x1a7)](),0x1388);if(this[_0x400bda(0x149)])clearInterval(this[_0x400bda(0x149)]);const _0x25c1d9=this[_0x400bda(0x234)][_0x400bda(0x1eb)]||0xf;_0x25c1d9>0x0&&(this[_0x400bda(0x149)]=setInterval(()=>{const _0x43645b=_0x400bda;this[_0x43645b(0x1ee)](),automation[_0x43645b(0x134)](this),automation[_0x43645b(0x1f5)](this);},_0x25c1d9*0x3c*0x3e8));setTimeout(()=>{const _0x34bd3f=_0x400bda;automation[_0x34bd3f(0x134)](this),automation['monitorEnforcements'](this);},0x2710);this['config']['trackerEnabled']!==![]&&(this['trackerHeartbeat']=setInterval(()=>{const _0x1fbe36=_0x400bda;if(this[_0x1fbe36(0x17f)]){const _0x2f694c=Date[_0x1fbe36(0x210)](),_0x283d8f=this[_0x1fbe36(0x15b)]||_0x2f694c,_0x3d7890=(_0x2f694c-_0x283d8f)/0x3e8;_0x3d7890>0x2&&(this[_0x1fbe36(0x15b)]=_0x2f694c,pythonBridge['send'](this,_0x1fbe36(0x24c),{'room':null,'dt':_0x3d7890}));}},0xbb8));if(this[_0x400bda(0x23a)])clearInterval(this[_0x400bda(0x23a)]);this[_0x400bda(0x23a)]=setInterval(()=>{const _0x2109f1=_0x400bda;this[_0x2109f1(0x17f)]&&(this[_0x2109f1(0x1e0)][_0x2109f1(0x21a)](_0x2109f1(0x187)),this['runPythonHealthCheck']());},0x4*0x3c*0x3c*0x3e8),schedulers['setupLtmScheduler'](this,()=>aiAgent[_0x400bda(0x185)](this,pythonBridge)),schedulers[_0x400bda(0x1a0)](this),schedulers[_0x400bda(0x26f)](this,()=>aiAgent[_0x400bda(0x1df)](this)),schedulers[_0x400bda(0x1fb)](this,()=>aiAgent[_0x400bda(0x264)](this)),pythonBridge[_0x400bda(0x235)](this,installer[_0x400bda(0x16b)]),setTimeout(async()=>{const _0x4cd6b2=_0x400bda;await topology[_0x4cd6b2(0x152)](this);try{const _0x326732=await this[_0x4cd6b2(0x25f)](_0x4cd6b2(0x1c0));if(_0x326732&&_0x326732[_0x4cd6b2(0x24f)])pythonBridge[_0x4cd6b2(0x275)](this,_0x4cd6b2(0x270),JSON[_0x4cd6b2(0x180)](_0x326732[_0x4cd6b2(0x24f)]));}catch(_0x58c4a9){}this[_0x4cd6b2(0x1e9)](),this[_0x4cd6b2(0x24a)](),this[_0x4cd6b2(0x136)](),this['updateHealthVector']();},0x1388);}['onUnload'](_0x984cdd){const _0x25edfa=a0_0xac12c8;if(this['analysisTimer'])clearInterval(this['analysisTimer']);if(this[_0x25edfa(0x1b8)])clearInterval(this[_0x25edfa(0x1b8)]);if(this[_0x25edfa(0x126)])clearInterval(this['trackerHeartbeat']);if(this[_0x25edfa(0x23a)])clearInterval(this['healthTrendInterval']);if(this[_0x25edfa(0x146)])this[_0x25edfa(0x146)][_0x25edfa(0x154)]();if(this[_0x25edfa(0x1d7)])this[_0x25edfa(0x1d7)][_0x25edfa(0x154)]();if(this[_0x25edfa(0x1b0)])this[_0x25edfa(0x1b0)]['cancel']();recorder[_0x25edfa(0x1fd)](this),pythonBridge[_0x25edfa(0x1b3)](this),_0x984cdd();}async[a0_0xac12c8(0x195)](_0x8e1ad7,_0x2aa12c){const _0x41ae70=a0_0xac12c8;if(!_0x2aa12c||this[_0x41ae70(0x130)])return;if(_0x8e1ad7[_0x41ae70(0x181)](_0x41ae70(0x226))&&_0x8e1ad7[_0x41ae70(0x125)](_0x41ae70(0x27f))&&_0x2aa12c[_0x41ae70(0x24f)])return;if(this['config'][_0x41ae70(0x127)]&&_0x8e1ad7===this[_0x41ae70(0x234)][_0x41ae70(0x1c5)]){this[_0x41ae70(0x1af)](_0x2aa12c[_0x41ae70(0x24f)]);return;}if(_0x8e1ad7===this[_0x41ae70(0x157)]+_0x41ae70(0x1f7)){if(_0x2aa12c[_0x41ae70(0x24f)]&&Object[_0x41ae70(0x16d)](setup[_0x41ae70(0x1b7)])['includes'](_0x2aa12c[_0x41ae70(0x24f)])){this[_0x41ae70(0x1c3)]=_0x2aa12c['val'];if(_0x2aa12c[_0x41ae70(0x24f)]===setup[_0x41ae70(0x1b7)][_0x41ae70(0x12e)])await recorder['setPresence'](this,![]);else await recorder[_0x41ae70(0x265)](this,!![]);if(this[_0x41ae70(0x17f)]){let _0x8687fa=![],_0x5f5131=0x0,_0x4f58ac=_0x41ae70(0x18c);if(this[_0x41ae70(0x1c3)]===_0x41ae70(0x26b))_0x8687fa=!![],_0x5f5131=0x168,_0x4f58ac=_0x41ae70(0x1d9);else this[_0x41ae70(0x1c3)]===_0x41ae70(0x1c4)&&(_0x8687fa=!![],_0x5f5131=0x5a0,_0x4f58ac=_0x41ae70(0x209));pythonBridge['send'](this,_0x41ae70(0x20f),{'active':_0x8687fa,'duration':_0x5f5131,'label':_0x4f58ac}),await this[_0x41ae70(0x1d0)](_0x41ae70(0x247),{'val':JSON[_0x41ae70(0x1a5)]({'active':_0x8687fa,'label':_0x4f58ac,'timestamp':Date[_0x41ae70(0x210)]()}),'ack':!![]});}}if(!_0x2aa12c[_0x41ae70(0x284)])this['setState'](_0x8e1ad7,{'val':this[_0x41ae70(0x1c3)],'ack':!![]});return;}_0x8e1ad7['endsWith'](_0x41ae70(0x1ad))&&_0x2aa12c[_0x41ae70(0x284)]&&this['protectAiMemory'](_0x2aa12c['val']);if(!_0x2aa12c[_0x41ae70(0x284)]){if(_0x8e1ad7[_0x41ae70(0x181)](_0x41ae70(0x262))&&_0x2aa12c[_0x41ae70(0x24f)]){this['setState'](_0x8e1ad7,{'val':![],'ack':!![]}),aiAgent[_0x41ae70(0x21d)](this);return;}if(_0x8e1ad7[_0x41ae70(0x181)](_0x41ae70(0x277))&&_0x2aa12c['val']){this[_0x41ae70(0x27d)](_0x8e1ad7,{'val':![],'ack':!![]});if(this[_0x41ae70(0x17f)])aiAgent[_0x41ae70(0x185)](this,pythonBridge);return;}if(_0x8e1ad7[_0x41ae70(0x181)](_0x41ae70(0x203))&&_0x2aa12c[_0x41ae70(0x24f)]){this[_0x41ae70(0x27d)](_0x8e1ad7,{'val':![],'ack':!![]}),aiAgent[_0x41ae70(0x264)](this);return;}if(_0x8e1ad7['includes'](_0x41ae70(0x21f))&&_0x2aa12c[_0x41ae70(0x24f)]){this[_0x41ae70(0x27d)](_0x8e1ad7,{'val':![],'ack':!![]}),aiAgent[_0x41ae70(0x220)](this);return;}if(_0x8e1ad7[_0x41ae70(0x181)](_0x41ae70(0x1f0))&&_0x2aa12c['val']){this['setState'](_0x8e1ad7,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x221ad7=await this[_0x41ae70(0x25f)]('LTM.trainingData.sequences');if(_0x221ad7&&_0x221ad7['val']){const _0x48387f=JSON[_0x41ae70(0x180)](_0x221ad7[_0x41ae70(0x24f)]);this[_0x41ae70(0x1d0)](_0x41ae70(0x140),{'val':_0x41ae70(0x24b),'ack':!![]}),pythonBridge[_0x41ae70(0x275)](this,_0x41ae70(0x207),{'sequences':_0x48387f});}}catch(_0x5416fe){}return;}if(_0x8e1ad7['includes'](_0x41ae70(0x227))&&_0x2aa12c['val']){this['setState'](_0x8e1ad7,{'val':![],'ack':!![]});if(this[_0x41ae70(0x17f)])try{const _0x2409bb=await this[_0x41ae70(0x25f)](_0x41ae70(0x1dc));if(_0x2409bb&&_0x2409bb[_0x41ae70(0x24f)])pythonBridge[_0x41ae70(0x275)](this,_0x41ae70(0x24e),{'digests':JSON[_0x41ae70(0x180)](_0x2409bb[_0x41ae70(0x24f)])});}catch(_0x438de2){}return;}if(_0x8e1ad7[_0x41ae70(0x181)]('analysis.training.triggerEnergy')&&_0x2aa12c[_0x41ae70(0x24f)]){this[_0x41ae70(0x27d)](_0x8e1ad7,{'val':![],'ack':!![]});if(this[_0x41ae70(0x17f)])try{const _0x45037e=await this[_0x41ae70(0x25f)]('LTM.trainingData.thermodynamics');if(_0x45037e&&_0x45037e['val'])pythonBridge[_0x41ae70(0x275)](this,_0x41ae70(0x25b),{'points':JSON[_0x41ae70(0x180)](_0x45037e[_0x41ae70(0x24f)])});}catch(_0x303b88){}return;}if(_0x8e1ad7['includes'](_0x41ae70(0x17a))&&_0x2aa12c[_0x41ae70(0x24f)]){this[_0x41ae70(0x27d)](_0x8e1ad7,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x56e808=await this['getStateAsync']('LTM.rawEventLog');if(_0x56e808&&_0x56e808['val']){const _0x4fcf34={};this[_0x41ae70(0x234)][_0x41ae70(0x236)]&&Array[_0x41ae70(0x19f)](this[_0x41ae70(0x234)][_0x41ae70(0x236)])&&this['config'][_0x41ae70(0x236)]['forEach'](_0x582d7d=>{const _0x154a5d=_0x41ae70;if(_0x582d7d['id']&&_0x582d7d[_0x154a5d(0x273)])_0x4fcf34[_0x582d7d['id']]=_0x582d7d['type'];}),this[_0x41ae70(0x1e0)]['info'](_0x41ae70(0x25c)+Object[_0x41ae70(0x138)](_0x4fcf34)[_0x41ae70(0x1c2)]+_0x41ae70(0x161)),pythonBridge['send'](this,_0x41ae70(0x168),{'events':JSON[_0x41ae70(0x180)](_0x56e808[_0x41ae70(0x24f)]),'deviceMap':_0x4fcf34});}}catch(_0x2a5dcb){this['log'][_0x41ae70(0x12d)]('Comfort\x20Train\x20Error:\x20'+_0x2a5dcb[_0x41ae70(0x1b4)]);}return;}if(_0x8e1ad7[_0x41ae70(0x181)](_0x41ae70(0x267))&&_0x2aa12c[_0x41ae70(0x24f)]){this['setState'](_0x8e1ad7,{'val':![],'ack':!![]}),topology[_0x41ae70(0x152)](this);if(this['isProVersion'])try{const _0xcba7b8=await this[_0x41ae70(0x25f)](_0x41ae70(0x1ca));if(_0xcba7b8&&_0xcba7b8[_0x41ae70(0x24f)]){const _0x44ed73=JSON[_0x41ae70(0x180)](_0xcba7b8['val']);this[_0x41ae70(0x1e0)][_0x41ae70(0x21a)](_0x41ae70(0x212)+_0x44ed73[_0x41ae70(0x1c2)]+_0x41ae70(0x20c)),pythonBridge['send'](this,_0x41ae70(0x141),{'sequences':_0x44ed73});}else this[_0x41ae70(0x1e0)][_0x41ae70(0x261)](_0x41ae70(0x280));}catch(_0x5b14e3){this['log'][_0x41ae70(0x12d)](_0x41ae70(0x1a2)+_0x5b14e3[_0x41ae70(0x1b4)]);}return;}}if(this[_0x41ae70(0x234)]['presenceDevices']&&this[_0x41ae70(0x234)][_0x41ae70(0x221)][_0x41ae70(0x181)](_0x8e1ad7)){await this[_0x41ae70(0x1a7)]();return;}const _0x1e1217=(this['config']['devices']||[])[_0x41ae70(0x15d)](_0x366ca1=>_0x366ca1['id']===_0x8e1ad7);if(_0x1e1217){const _0x48029e=await recorder[_0x41ae70(0x12c)](this,_0x8e1ad7,_0x2aa12c,_0x1e1217);_0x48029e&&_0x48029e[_0x41ae70(0x273)]===_0x41ae70(0x14c)&&_0x48029e[_0x41ae70(0x238)]&&this[_0x41ae70(0x17f)]&&deadMan[_0x41ae70(0x253)](this,_0x48029e[_0x41ae70(0x238)]),_0x2aa12c[_0x41ae70(0x24f)]&&(_0x2aa12c['val']===!![]||_0x2aa12c[_0x41ae70(0x24f)]===0x1||String(_0x2aa12c[_0x41ae70(0x24f)])['toLowerCase']()==='open')&&(_0x1e1217[_0x41ae70(0x273)]&&(_0x1e1217[_0x41ae70(0x273)][_0x41ae70(0x181)](_0x41ae70(0x1a8))||_0x1e1217[_0x41ae70(0x273)]['includes']('door')||_0x1e1217['type']['includes'](_0x41ae70(0x1ba)))&&this[_0x41ae70(0x252)](_0x1e1217)),(_0x1e1217[_0x41ae70(0x273)]===_0x41ae70(0x242)||_0x1e1217[_0x41ae70(0x273)]===_0x41ae70(0x179))&&automation[_0x41ae70(0x239)](this);}}async['protectAiMemory'](_0x588e54){const _0x59580b=a0_0xac12c8;if(!this[_0x59580b(0x1b1)]||Date[_0x59580b(0x210)]()-this[_0x59580b(0x188)]>0x493e0)return;if(!this[_0x59580b(0x1b1)]['sources']||!this[_0x59580b(0x1b1)]['times'])return;try{const _0x2631e5=JSON[_0x59580b(0x180)](_0x588e54),_0x542a2e=this[_0x59580b(0x1b1)][_0x59580b(0x1be)];let _0x2c5dfc=![];for(const _0x155b85 in _0x542a2e){if(_0x542a2e[_0x155b85][_0x59580b(0x181)]('AI')&&_0x2631e5[_0x155b85]&&!_0x2631e5[_0x155b85][_0x59580b(0x181)]('AI')){_0x2c5dfc=!![];break;}}_0x2c5dfc&&(this[_0x59580b(0x1e0)]['info'](_0x59580b(0x162)),await this[_0x59580b(0x1d0)](_0x59580b(0x173),{'val':JSON[_0x59580b(0x1a5)](this[_0x59580b(0x1b1)]['times']),'ack':!![]}),await this['setStateAsync'](_0x59580b(0x1ad),{'val':JSON['stringify'](this['memoryCache']['sources']),'ack':!![]}));}catch(_0x36b44a){}}async[a0_0xac12c8(0x1e8)](_0x297f2d){const _0x3d9633=a0_0xac12c8;if(typeof _0x297f2d===_0x3d9633(0x199)&&_0x297f2d[_0x3d9633(0x1b4)]){if(_0x297f2d[_0x3d9633(0x268)]===_0x3d9633(0x128))try{const _0x4a621d=await automation[_0x3d9633(0x1c7)](this);this[_0x3d9633(0x204)](_0x297f2d['from'],_0x297f2d['command'],{'success':!![],'results':_0x4a621d},_0x297f2d[_0x3d9633(0x26e)]);}catch(_0x36ea19){this['sendTo'](_0x297f2d[_0x3d9633(0x237)],_0x297f2d[_0x3d9633(0x268)],{'success':![],'error':_0x36ea19[_0x3d9633(0x1b4)]},_0x297f2d['callback']);}else{if(_0x297f2d['command']===_0x3d9633(0x1d5))try{const {current_temps:_0x561910,t_out:_0x3a2264,targets:_0x58aae6,t_forecast:_0x45d91a}=_0x297f2d[_0x3d9633(0x1b4)],_0x2e6184=[];let _0x1877e9={};try{const _0x25d51b=await this[_0x3d9633(0x25f)](_0x3d9633(0x123));if(_0x25d51b&&_0x25d51b['val']){const _0x47a63d=JSON[_0x3d9633(0x180)](_0x25d51b[_0x3d9633(0x24f)]);_0x1877e9=_0x47a63d[_0x3d9633(0x1ea)]||_0x47a63d;}}catch(_0x357b49){}const _0x113661=_0x45d91a!==undefined&&_0x45d91a!==null?(_0x3a2264+_0x45d91a)/0x2:_0x3a2264;for(const [_0x1d3b27,_0x2f030e]of Object[_0x3d9633(0x14a)](_0x561910)){const _0x3ff9e6=_0x58aae6[_0x1d3b27]||0x15;if(_0x2f030e<=_0x3ff9e6)continue;let _0x3f6b3b=_0x1877e9[_0x1d3b27]||-0.5;if(_0x3f6b3b>=0x0)_0x3f6b3b=-0.5;const _0x17c6a3=Math[_0x3d9633(0x1aa)](_0x3f6b3b),_0x167fe2=_0x2f030e-_0x3ff9e6;let _0x2095e2=Math[_0x3d9633(0x14b)](_0x167fe2/_0x17c6a3*0x3c);const _0x1f2ef9=_0x2f030e-_0x3a2264,_0x17a128=_0x2f030e-_0x113661;if(_0x17a128!==0x0&&_0x1f2ef9!==0x0){const _0x3cd5af=_0x1f2ef9/_0x17a128;_0x2095e2=Math[_0x3d9633(0x14b)](_0x2095e2*_0x3cd5af);}if(_0x2095e2>0xf){if(_0x2095e2>0xf0)_0x2095e2=0xf0;_0x2e6184[_0x3d9633(0x1bb)]({'room':_0x1d3b27,'minutes_safe':_0x2095e2,'target':_0x3ff9e6,'current':_0x2f030e,'savings_msg':_0x3d9633(0x1f4)+_0x2095e2+_0x3d9633(0x13a)});}}_0x2e6184['sort']((_0x12b2f6,_0xfd96c9)=>_0xfd96c9[_0x3d9633(0x129)]-_0x12b2f6[_0x3d9633(0x129)]),this[_0x3d9633(0x204)](_0x297f2d['from'],_0x297f2d[_0x3d9633(0x268)],{'success':!![],'proposals':_0x2e6184},_0x297f2d['callback']);}catch(_0x437098){this[_0x3d9633(0x204)](_0x297f2d['from'],_0x297f2d['command'],{'success':![],'error':_0x437098[_0x3d9633(0x1b4)]},_0x297f2d[_0x3d9633(0x26e)]);}else{if(_0x297f2d[_0x3d9633(0x268)]===_0x3d9633(0x1b2))try{await automation[_0x3d9633(0x151)](this),this[_0x3d9633(0x204)](_0x297f2d[_0x3d9633(0x237)],_0x297f2d['command'],{'success':!![]},_0x297f2d[_0x3d9633(0x26e)]);}catch(_0x6d188){this[_0x3d9633(0x204)](_0x297f2d['from'],_0x297f2d[_0x3d9633(0x268)],{'success':![],'error':_0x6d188['message']},_0x297f2d[_0x3d9633(0x26e)]);}else{if(_0x297f2d[_0x3d9633(0x268)]==='resetRLPenalty')try{const _0x120767=_0x297f2d[_0x3d9633(0x1b4)][_0x3d9633(0x279)],_0x4562d0='analysis.energy.rlPenalties',_0x29e9a8=await this[_0x3d9633(0x25f)](_0x4562d0);let _0x27500e={};if(_0x29e9a8&&_0x29e9a8['val'])try{_0x27500e=JSON['parse'](_0x29e9a8['val']);}catch(_0x1741ee){}_0x120767&&_0x27500e[_0x120767]?(delete _0x27500e[_0x120767],await this[_0x3d9633(0x1d0)](_0x4562d0,{'val':JSON[_0x3d9633(0x1a5)](_0x27500e),'ack':!![]}),this[_0x3d9633(0x1e0)]['info']('ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27'+_0x120767+_0x3d9633(0x1c6)),this[_0x3d9633(0x204)](_0x297f2d['from'],_0x297f2d[_0x3d9633(0x268)],{'success':!![]},_0x297f2d[_0x3d9633(0x26e)])):this[_0x3d9633(0x204)](_0x297f2d[_0x3d9633(0x237)],_0x297f2d['command'],{'success':![],'error':_0x3d9633(0x257)},_0x297f2d['callback']);}catch(_0x2e0d80){this[_0x3d9633(0x204)](_0x297f2d['from'],_0x297f2d[_0x3d9633(0x268)],{'success':![],'error':_0x2e0d80[_0x3d9633(0x1b4)]},_0x297f2d[_0x3d9633(0x26e)]);}else{if(_0x297f2d[_0x3d9633(0x268)]===_0x3d9633(0x132))await this[_0x3d9633(0x1d0)](_0x3d9633(0x133),{'val':![],'ack':!![]}),await this[_0x3d9633(0x1d0)](_0x3d9633(0x1bc),{'val':'','ack':!![]}),await this[_0x3d9633(0x1d0)]('analysis.automation.targetId',{'val':'','ack':!![]}),this[_0x3d9633(0x204)](_0x297f2d['from'],_0x297f2d[_0x3d9633(0x268)],{'success':!![]},_0x297f2d[_0x3d9633(0x26e)]);else{if(_0x297f2d[_0x3d9633(0x268)]===_0x3d9633(0x243)){const {targetId:_0x239901,targetValue:_0x47fea5}=_0x297f2d[_0x3d9633(0x1b4)];await this[_0x3d9633(0x1d0)](_0x3d9633(0x133),{'val':!![],'ack':!![]}),await this[_0x3d9633(0x1d0)](_0x3d9633(0x1bc),{'val':'Simulation\x20durch\x20Admin\x20(Test)','ack':!![]}),await this[_0x3d9633(0x1d0)](_0x3d9633(0x1a3),{'val':_0x239901,'ack':!![]}),await this[_0x3d9633(0x1d0)](_0x3d9633(0x177),{'val':String(_0x47fea5),'ack':!![]}),this[_0x3d9633(0x204)](_0x297f2d[_0x3d9633(0x237)],_0x297f2d[_0x3d9633(0x268)],{'success':!![]},_0x297f2d['callback']);}else{if(_0x297f2d['command']==='testApiKey')try{const _0x305574=_0x297f2d[_0x3d9633(0x1b4)][_0x3d9633(0x131)];if(!_0x305574)throw new Error('Kein\x20API\x20Key\x20Ã¼bergeben');const _0x4a5d6c=new GoogleGenerativeAI(_0x305574),_0x4547f3=_0x4a5d6c['getGenerativeModel']({'model':GEMINI_MODEL}),_0x25d246=await _0x4547f3[_0x3d9633(0x21b)]('Test'),_0x45843b=await _0x25d246[_0x3d9633(0x231)];if(_0x45843b[_0x3d9633(0x169)]())this[_0x3d9633(0x204)](_0x297f2d['from'],_0x297f2d[_0x3d9633(0x268)],{'success':!![],'message':_0x3d9633(0x183)},_0x297f2d[_0x3d9633(0x26e)]);else throw new Error(_0x3d9633(0x1d8));}catch(_0xf8373d){this[_0x3d9633(0x204)](_0x297f2d[_0x3d9633(0x237)],_0x297f2d[_0x3d9633(0x268)],{'success':![],'message':_0xf8373d[_0x3d9633(0x1b4)]},_0x297f2d[_0x3d9633(0x26e)]);}else{if(_0x297f2d[_0x3d9633(0x268)]==='scanDevices')try{const _0x11d3d2=await scanner[_0x3d9633(0x13e)](this,_0x297f2d[_0x3d9633(0x1b4)]||{});this[_0x3d9633(0x204)](_0x297f2d[_0x3d9633(0x237)],_0x297f2d['command'],{'success':!![],'devices':_0x11d3d2},_0x297f2d[_0x3d9633(0x26e)]);}catch(_0x39e968){this[_0x3d9633(0x204)](_0x297f2d['from'],_0x297f2d[_0x3d9633(0x268)],{'success':![],'error':_0x39e968[_0x3d9633(0x1b4)]},_0x297f2d['callback']);}else{if(_0x297f2d['command']===_0x3d9633(0x1f1))try{const {matrix:_0x1d7f3c}=_0x297f2d[_0x3d9633(0x1b4)],_0xe40caf=await this['getStateAsync'](_0x3d9633(0x1c0));if(_0xe40caf&&_0xe40caf['val']){const _0x8b1349=JSON[_0x3d9633(0x180)](_0xe40caf[_0x3d9633(0x24f)]);_0x8b1349['matrix']=_0x1d7f3c,_0x8b1349[_0x3d9633(0x197)]=Date['now'](),await this[_0x3d9633(0x1d0)]('analysis.topology.structure',{'val':JSON['stringify'](_0x8b1349),'ack':!![]}),pythonBridge[_0x3d9633(0x275)](this,'SET_TOPOLOGY',_0x8b1349);}this[_0x3d9633(0x204)](_0x297f2d['from'],_0x297f2d[_0x3d9633(0x268)],{'success':!![]},_0x297f2d[_0x3d9633(0x26e)]);}catch(_0x209b2d){this[_0x3d9633(0x1e0)][_0x3d9633(0x12d)](_0x209b2d);}else{if(_0x297f2d['command']===_0x3d9633(0x249))this[_0x3d9633(0x204)](_0x297f2d['from'],_0x297f2d[_0x3d9633(0x268)],{'success':!![],'dailyDigests':this[_0x3d9633(0x1d6)]||[],'analysisHistory':this[_0x3d9633(0x27e)]||[]},_0x297f2d['callback']);else{if(_0x297f2d[_0x3d9633(0x268)]===_0x3d9633(0x1d2)){const _0x1b6438=this[_0x3d9633(0x1d6)][_0x3d9633(0x1c2)],_0x59ba81=new Array(0x18)[_0x3d9633(0x139)](0x0),_0x26cabd=new Date()[_0x3d9633(0x1e5)](0x0,0x0,0x0,0x0);this[_0x3d9633(0x15f)]&&this[_0x3d9633(0x15f)][_0x3d9633(0x258)](_0x321dc5=>{const _0x7b2343=_0x3d9633;if(_0x321dc5[_0x7b2343(0x12a)]>=_0x26cabd){const _0x4d7014=new Date(_0x321dc5[_0x7b2343(0x12a)])[_0x7b2343(0x1ff)]();if(_0x4d7014>=0x0&&_0x4d7014<0x18)_0x59ba81[_0x4d7014]++;}});let _0x2c381f=![],_0x35921b='',_0x2b3f36='',_0x82fbcc='';try{const _0x387034=await this[_0x3d9633(0x25f)](_0x3d9633(0x133));if(_0x387034&&_0x387034[_0x3d9633(0x24f)]){_0x2c381f=!![];const _0x99e7ce=await this[_0x3d9633(0x25f)](_0x3d9633(0x1bc));_0x35921b=_0x99e7ce?_0x99e7ce[_0x3d9633(0x24f)]:'';const _0x2a0294=await this[_0x3d9633(0x25f)](_0x3d9633(0x1a3));_0x2b3f36=_0x2a0294?_0x2a0294[_0x3d9633(0x24f)]:'';const _0x19a6de=await this[_0x3d9633(0x25f)](_0x3d9633(0x177));_0x82fbcc=_0x19a6de?_0x19a6de[_0x3d9633(0x24f)]:'';}}catch(_0x4dd42c){}const _0x1ae06b=await this[_0x3d9633(0x189)](),_0x5426fb=(this[_0x3d9633(0x234)][_0x3d9633(0x236)]||[])[_0x3d9633(0x219)](_0x40ad80=>_0x40ad80[_0x3d9633(0x164)]),_0x4d2d7c=_0x1ae06b&&_0x5426fb;let _0x33ebe4='';try{const _0x195bc5=await this[_0x3d9633(0x25f)]('system.presenceWho');if(_0x195bc5&&_0x195bc5[_0x3d9633(0x24f)])_0x33ebe4=_0x195bc5['val'];}catch(_0x41cf50){}this[_0x3d9633(0x204)](_0x297f2d[_0x3d9633(0x237)],_0x297f2d[_0x3d9633(0x268)],{'success':!![],'eventHistory':this['eventHistory'][_0x3d9633(0x190)](0x0,0xf),'stats':{'digestCount':_0x1b6438,'isPresent':this[_0x3d9633(0x1a6)],'hourlyActivity':_0x59ba81,'solarActive':_0x4d2d7c,'presenceWho':_0x33ebe4},'automation':{'detected':_0x2c381f,'description':_0x35921b,'targetId':_0x2b3f36,'targetValue':_0x82fbcc}},_0x297f2d['callback']);}else{if(_0x297f2d[_0x3d9633(0x268)]===_0x3d9633(0x1cf)){const _0x54fc4c=await this[_0x3d9633(0x193)](_0x3d9633(0x208),_0x3d9633(0x155)),_0x568965=[];if(_0x54fc4c)for(const _0x52e8c1 in _0x54fc4c){const _0x2ea0c4=_0x54fc4c[_0x52e8c1],_0x2709bd=(_0x2ea0c4['common']&&typeof _0x2ea0c4[_0x3d9633(0x18e)]['name']==='object'?_0x2ea0c4[_0x3d9633(0x18e)]['name']['de']:_0x2ea0c4['common']['name'])||_0x2ea0c4[_0x3d9633(0x18e)][_0x3d9633(0x1c1)];_0x568965['push']({'id':_0x52e8c1,'name':_0x2709bd});}const _0x584806=await this[_0x3d9633(0x193)](_0x3d9633(0x1b9),_0x3d9633(0x155)),_0x56de7f=[];if(_0x584806)for(const _0x50b857 in _0x584806){const _0x47427d=_0x584806[_0x50b857],_0x528431=(_0x47427d[_0x3d9633(0x18e)]&&typeof _0x47427d[_0x3d9633(0x18e)][_0x3d9633(0x1c1)]===_0x3d9633(0x199)?_0x47427d[_0x3d9633(0x18e)][_0x3d9633(0x1c1)]['de']:_0x47427d[_0x3d9633(0x18e)][_0x3d9633(0x1c1)])||_0x50b857['split']('.')[_0x3d9633(0x278)]();_0x56de7f[_0x3d9633(0x1bb)](_0x528431);}this['sendTo'](_0x297f2d['from'],_0x297f2d[_0x3d9633(0x268)],{'success':!![],'enums':_0x568965,'rooms':_0x56de7f},_0x297f2d[_0x3d9633(0x26e)]);}else{if(_0x297f2d['command']==='testContext')try{let _0x542e71=_0x3d9633(0x171),_0x1dde81=_0x3d9633(0x254);if(this[_0x3d9633(0x234)]['useWeather']){const _0x367a78=await recorder[_0x3d9633(0x1ec)](this);_0x542e71=_0x367a78!==null?_0x367a78+'Â°C':_0x3d9633(0x1f8);}if(this[_0x3d9633(0x234)]['calendarInstance']){const _0x1ef655=await this[_0x3d9633(0x143)]('system.adapter.'+this[_0x3d9633(0x234)][_0x3d9633(0x14e)]);_0x1dde81=_0x1ef655?'Verbunden':_0x3d9633(0x17d);}this[_0x3d9633(0x204)](_0x297f2d[_0x3d9633(0x237)],_0x297f2d[_0x3d9633(0x268)],{'success':!![],'weather':_0x542e71,'calendar':_0x1dde81},_0x297f2d[_0x3d9633(0x26e)]);}catch(_0x72b0e3){this[_0x3d9633(0x204)](_0x297f2d[_0x3d9633(0x237)],_0x297f2d['command'],{'success':![],'error':_0x72b0e3[_0x3d9633(0x1b4)]},_0x297f2d['callback']);}else{if(_0x297f2d[_0x3d9633(0x268)]===_0x3d9633(0x21c))try{const _0x2a773e=_0x297f2d['message'][_0x3d9633(0x1b5)],_0x4508c6=await this[_0x3d9633(0x191)](_0x2a773e+_0x3d9633(0x145));let _0x2c5608=[];if(_0x4508c6&&_0x4508c6[_0x3d9633(0x24f)]){const _0x3202f9=JSON[_0x3d9633(0x180)](_0x4508c6[_0x3d9633(0x24f)]),_0x403133=new Set();Array['isArray'](_0x3202f9)&&_0x3202f9['forEach'](_0x584ad9=>{const _0xf3c575=_0x3d9633;if(_0x584ad9[_0xf3c575(0x1cc)])_0x403133[_0xf3c575(0x1f2)](_0x584ad9[_0xf3c575(0x1cc)]);else{if(_0x584ad9[_0xf3c575(0x22d)])_0x403133['add'](_0x584ad9[_0xf3c575(0x22d)]);}}),_0x2c5608=Array[_0x3d9633(0x237)](_0x403133)[_0x3d9633(0x13c)]();}if(_0x2c5608[_0x3d9633(0x1c2)]===0x0)_0x2c5608=[_0x3d9633(0x248)];this[_0x3d9633(0x204)](_0x297f2d['from'],_0x297f2d[_0x3d9633(0x268)],{'success':!![],'names':_0x2c5608},_0x297f2d[_0x3d9633(0x26e)]);}catch(_0x358801){this[_0x3d9633(0x204)](_0x297f2d['from'],_0x297f2d['command'],{'success':![],'error':_0x358801['message']},_0x297f2d[_0x3d9633(0x26e)]);}else{if(_0x297f2d[_0x3d9633(0x268)]===_0x3d9633(0x18d))try{await setup[_0x3d9633(0x228)](this,_0x3d9633(0x1cd),![],![]),this[_0x3d9633(0x204)](_0x297f2d[_0x3d9633(0x237)],_0x297f2d[_0x3d9633(0x268)],{'success':!![],'message':'Gesendet'},_0x297f2d[_0x3d9633(0x26e)]);}catch(_0x16a88d){this['log']['error']('Notification\x20Test\x20Failed:\x20'+_0x16a88d[_0x3d9633(0x1b4)]),this[_0x3d9633(0x204)](_0x297f2d['from'],_0x297f2d[_0x3d9633(0x268)],{'success':![],'message':_0x3d9633(0x18b)+_0x16a88d[_0x3d9633(0x1b4)]},_0x297f2d[_0x3d9633(0x26e)]);}}}}}}}}}}}}}}}}}async[a0_0xac12c8(0x266)](){const _0x217c75=a0_0xac12c8;try{const _0x443b62=await this['getStateAsync'](setup['SYSTEM_DP_MODE']);_0x443b62&&_0x443b62[_0x217c75(0x24f)]&&Object[_0x217c75(0x16d)](setup['SYSTEM_MODES'])[_0x217c75(0x181)](_0x443b62[_0x217c75(0x24f)])?this['currentSystemMode']=_0x443b62['val']:(this[_0x217c75(0x1c3)]=setup[_0x217c75(0x1b7)][_0x217c75(0x217)],await this[_0x217c75(0x1d0)](setup[_0x217c75(0x1c9)],{'val':setup[_0x217c75(0x1b7)][_0x217c75(0x217)],'ack':!![]}));}catch(_0x52c4b2){this[_0x217c75(0x1c3)]=setup[_0x217c75(0x1b7)][_0x217c75(0x217)];}}async[a0_0xac12c8(0x1a7)](){const _0x17dc07=a0_0xac12c8;try{const _0x44b58b=this[_0x17dc07(0x234)][_0x17dc07(0x221)]||[];let _0x3ade0d=![];const _0x1811cd=[];for(const _0x5c82af of _0x44b58b){try{const _0xee6c24=await this[_0x17dc07(0x191)](_0x5c82af);_0xee6c24&&(_0xee6c24[_0x17dc07(0x24f)]===!![]||_0xee6c24['val']===_0x17dc07(0x22b)||_0xee6c24['val']===0x1)&&(_0x3ade0d=!![],_0x1811cd[_0x17dc07(0x1bb)](_0x5c82af));}catch(_0x2fa824){}}return await this['setStateAsync'](_0x17dc07(0x14d),{'val':_0x1811cd[_0x17dc07(0x1e6)](',\x20'),'ack':!![]}),_0x3ade0d&&(this[_0x17dc07(0x202)]&&(this[_0x17dc07(0x1e0)]['info'](_0x17dc07(0x229)),recorder[_0x17dc07(0x1fd)](this)),!this[_0x17dc07(0x1a6)]&&this[_0x17dc07(0x1c3)]===setup[_0x17dc07(0x1b7)][_0x17dc07(0x217)]&&await recorder[_0x17dc07(0x265)](this,!![])),_0x3ade0d;}catch(_0x535f58){return![];}}async[a0_0xac12c8(0x1ee)](){const _0x59e375=a0_0xac12c8;this[_0x59e375(0x1e0)][_0x59e375(0x16a)](_0x59e375(0x24d)),await aiAgent['runGeminiAnalysis'](this),this['updateHealthVector'](),this[_0x59e375(0x24a)](),this[_0x59e375(0x136)]();}async[a0_0xac12c8(0x189)](){const _0x2774f3=a0_0xac12c8,_0x23b980=[_0x2774f3(0x1dd),_0x2774f3(0x19d),'daswetter.0'],_0x2ead87=[_0x2774f3(0x163),_0x2774f3(0x13d),_0x2774f3(0x283)];for(const _0x10b519 of _0x23b980){for(const _0x3eb798 of _0x2ead87){try{const _0x4183ef=_0x10b519+'.'+_0x3eb798,_0x1ca4af=await this[_0x2774f3(0x191)](_0x4183ef);if(_0x1ca4af&&_0x1ca4af[_0x2774f3(0x24f)]){const _0x12ced0=String(_0x1ca4af[_0x2774f3(0x24f)])[_0x2774f3(0x1ae)]();if(_0x12ced0[_0x2774f3(0x181)](_0x2774f3(0x14f))||_0x12ced0[_0x2774f3(0x181)](_0x2774f3(0x170))||_0x12ced0['includes'](_0x2774f3(0x1ef))||_0x12ced0[_0x2774f3(0x181)](_0x2774f3(0x222))||_0x12ced0[_0x2774f3(0x181)](_0x2774f3(0x25a)))return!![];}}catch(_0x1c06e8){}}}return![];}[a0_0xac12c8(0x24a)](){const _0x38c479=a0_0xac12c8;if(!this['isProVersion'])return;try{this[_0x38c479(0x289)]('LTM.trainingData.sequences',(_0x16bc1a,_0x3ab10e)=>{const _0x3a5802=_0x38c479;_0x3ab10e&&_0x3ab10e['val']&&pythonBridge[_0x3a5802(0x275)](this,_0x3a5802(0x156),{'sequences':JSON[_0x3a5802(0x180)](_0x3ab10e[_0x3a5802(0x24f)])});});}catch(_0x427ac5){}}async['triggerEnergyPrediction'](){const _0x350fe7=a0_0xac12c8;if(!this[_0x350fe7(0x17f)])return;try{const _0x4768ed=await recorder[_0x350fe7(0x1ec)](this);if(_0x4768ed===null)return;const _0x1602d3={},_0x464cd1={},_0x567e72=this[_0x350fe7(0x234)][_0x350fe7(0x236)]||[];for(const _0x5bbe83 of _0x567e72){if(_0x5bbe83['type']==='temperature'&&_0x5bbe83['location']){const _0x2fcf1f=this['sensorLastValues'][_0x5bbe83['id']];if(_0x2fcf1f!==undefined)_0x1602d3[_0x5bbe83[_0x350fe7(0x238)]]=_0x2fcf1f;if(_0x5bbe83['isSolar'])_0x464cd1[_0x5bbe83['location']]=!![];}}const _0x22f5bf=await this['checkSolarCondition']();let _0x547813={};try{const _0x341a1d=await this[_0x350fe7(0x25f)]('analysis.energy.warmupTargets');if(_0x341a1d&&_0x341a1d[_0x350fe7(0x24f)])_0x547813=JSON['parse'](_0x341a1d[_0x350fe7(0x24f)]);}catch(_0x3047af){}Object[_0x350fe7(0x138)](_0x1602d3)[_0x350fe7(0x1c2)]>0x0&&(pythonBridge[_0x350fe7(0x275)](this,_0x350fe7(0x216),{'current_temps':_0x1602d3,'t_out':_0x4768ed,'is_sunny':_0x22f5bf,'solar_flags':_0x464cd1,'warmup_targets':_0x547813}),pythonBridge[_0x350fe7(0x275)](this,_0x350fe7(0x240),{'current_temps':_0x1602d3,'t_out':_0x4768ed,'targets':{}}));}catch(_0x3f0ebe){}}[a0_0xac12c8(0x241)](){const _0x10f3f5=a0_0xac12c8;if(!this[_0x10f3f5(0x12f)]||this['rawEventLog']['length']===0x0)return;const _0x11a6fc=new Array(0x60)[_0x10f3f5(0x139)](0x0),_0x5721d3=new Date()['setHours'](0x0,0x0,0x0,0x0);this['rawEventLog'][_0x10f3f5(0x258)](_0x2209f1=>{const _0x577b7a=_0x10f3f5,_0x4616e8=new Date(_0x2209f1[_0x577b7a(0x12a)]);if(_0x4616e8[_0x577b7a(0x1d1)]()>=_0x5721d3){const _0x1d776b=_0x4616e8[_0x577b7a(0x1ff)](),_0x57b919=_0x4616e8['getMinutes'](),_0x5dc45a=_0x1d776b*0x4+Math['floor'](_0x57b919/0xf);if(_0x5dc45a>=0x0&&_0x5dc45a<0x60)_0x11a6fc[_0x5dc45a]++;}}),this[_0x10f3f5(0x1d0)](_0x10f3f5(0x269),{'val':JSON['stringify'](_0x11a6fc),'ack':!![]});}[a0_0xac12c8(0x1e9)](){const _0x2e0715=a0_0xac12c8;if(!this['dailyDigests']||this[_0x2e0715(0x1d6)]['length']<0x2)return;const _0x247ae1=this[_0x2e0715(0x1d6)]['map'](_0x461e95=>{const _0x395658=_0x2e0715,_0x585189=(_0x461e95[_0x395658(0x16c)]||'')[_0x395658(0x1ae)]();return ACTIVITY_LEVEL_MAP[_0x585189]||0x32;});pythonBridge[_0x2e0715(0x275)](this,_0x2e0715(0x172),{'values':_0x247ae1,'tag':'Activity-Level'});}async[a0_0xac12c8(0x1af)](_0xe0cb12){const _0x16a7d2=a0_0xac12c8;if(_0xe0cb12==null||typeof _0xe0cb12!==_0x16a7d2(0x182))return;const _0x3f965f=Date[_0x16a7d2(0x210)]();this[_0x16a7d2(0x26a)][_0x16a7d2(0x1bb)]({'ts':_0x3f965f,'val':_0xe0cb12}),this[_0x16a7d2(0x26a)]=this[_0x16a7d2(0x26a)]['filter'](_0x3d4ca=>_0x3f965f-_0x3d4ca['ts']<0x1388);if(this['infrasoundLocked'])return;if(this[_0x16a7d2(0x234)][_0x16a7d2(0x19e)]){const _0x496ce9=await this[_0x16a7d2(0x191)](this[_0x16a7d2(0x234)][_0x16a7d2(0x19e)]);if(_0x496ce9&&!_0x496ce9['val'])return;}const _0x149b24=this[_0x16a7d2(0x234)]['infrasoundThreshold']||0.04;if(Math['abs'](_0xe0cb12)>=_0x149b24){this['log'][_0x16a7d2(0x261)](_0x16a7d2(0x1cb)+_0xe0cb12+_0x16a7d2(0x22f)+_0x149b24+')'),await this['setStateAsync'](_0x16a7d2(0x25e),{'val':!![],'ack':!![]});const _0x11b8f2=this[_0x16a7d2(0x1a6)];_0x11b8f2?(this[_0x16a7d2(0x1e0)][_0x16a7d2(0x21a)](_0x16a7d2(0x25d)),this[_0x16a7d2(0x17e)](_0xe0cb12,_0x16a7d2(0x176))):(this[_0x16a7d2(0x17e)](_0xe0cb12,_0x16a7d2(0x1f6)),this[_0x16a7d2(0x228)](_0x16a7d2(0x153)+_0xe0cb12+_0x16a7d2(0x1a1))),this[_0x16a7d2(0x18a)]=!![],setTimeout(()=>{const _0x39f6ac=_0x16a7d2;this[_0x39f6ac(0x18a)]=![];},0x2710);}}async[a0_0xac12c8(0x17e)](_0x65430e,_0x25c294=a0_0xac12c8(0x1f6)){const _0x576283=a0_0xac12c8,_0x806cb5=Date[_0x576283(0x210)](),_0x16e76b=this['config'][_0x576283(0x236)]||[];setTimeout(async()=>{const _0x206067=_0x576283;let _0x56d916=null,_0x37b07f=_0x206067(0x1ab);const _0x5d5409=_0x16e76b[_0x206067(0x1da)](_0x5b17cf=>_0x5b17cf[_0x206067(0x273)]&&(_0x5b17cf['type'][_0x206067(0x181)]('window')||_0x5b17cf['type'][_0x206067(0x181)](_0x206067(0x22a))||_0x5b17cf['type'][_0x206067(0x181)](_0x206067(0x1ba))||_0x5b17cf[_0x206067(0x273)]['includes'](_0x206067(0x245)))||_0x5b17cf[_0x206067(0x19b)]&&(_0x5b17cf['role']['includes'](_0x206067(0x1a9))||_0x5b17cf[_0x206067(0x19b)][_0x206067(0x181)](_0x206067(0x16e))));for(const _0x1dd6e8 of _0x5d5409){try{const _0x4d9363=await this[_0x206067(0x191)](_0x1dd6e8['id']);if(_0x4d9363){if(_0x4d9363['ts']>=_0x806cb5-0x7d0){_0x56d916=_0x1dd6e8[_0x206067(0x1c1)]||_0x1dd6e8['id'],_0x37b07f=_0x206067(0x19a)+_0x56d916;break;}}}catch(_0x7a57ca){}}const _0x5f1993={'timestamp':_0x806cb5,'pressure':_0x65430e,'isMatch':!!_0x56d916,'explanation':_0x37b07f,'type':_0x25c294};await this['appendToLog'](_0x5f1993),this[_0x206067(0x1e0)][_0x206067(0x21a)]('[Forensics]\x20Infrasound\x20Event\x20correlated:\x20'+(!!_0x56d916?_0x206067(0x27b):_0x206067(0x230)));},0x1388);}async['analyzeWindowOpening'](_0x2daa17){const _0x31276d=Date['now'](),_0x90b78f=_0x2daa17['name']||_0x2daa17['id']['split']('.')['pop']();let _0xe96658=0x0;setTimeout(async()=>{const _0x2e3526=a0_0x1ac7;this['pressureBuffer'][_0x2e3526(0x258)](_0x4072d8=>{const _0x19034e=_0x2e3526;_0x4072d8['ts']>=_0x31276d-0xfa0&&_0x4072d8['ts']<=_0x31276d+0x3e8&&(Math[_0x19034e(0x1aa)](_0x4072d8[_0x19034e(0x24f)])>Math[_0x19034e(0x1aa)](_0xe96658)&&(_0xe96658=_0x4072d8[_0x19034e(0x24f)]));});const _0xd93f25=this['config'][_0x2e3526(0x251)]||0.04,_0x268582=Math[_0x2e3526(0x1aa)](_0xe96658)>=_0xd93f25,_0x36de50={'timestamp':_0x31276d,'pressure':_0xe96658,'isMatch':_0x268582,'explanation':_0x2e3526(0x1b6)+_0x90b78f,'type':_0x2e3526(0x287)};await this['appendToLog'](_0x36de50),this[_0x2e3526(0x1e0)][_0x2e3526(0x16a)](_0x2e3526(0x288)+_0x90b78f+_0x2e3526(0x13f)+_0xe96658[_0x2e3526(0x166)](0x4)+'\x20hPa\x20(Threshold:\x20'+_0xd93f25+')');},0x1f4);}async[a0_0xac12c8(0x1de)](_0x119dd3){const _0x530d28=a0_0xac12c8;try{const _0x2c5d11=await this['getStateAsync'](_0x530d28(0x214));let _0x2ccb25=[];if(_0x2c5d11&&_0x2c5d11[_0x530d28(0x24f)])_0x2ccb25=JSON[_0x530d28(0x180)](_0x2c5d11['val']);_0x2ccb25[_0x530d28(0x1ce)](_0x119dd3);if(_0x2ccb25[_0x530d28(0x1c2)]>0x14)_0x2ccb25=_0x2ccb25['slice'](0x0,0x14);await this[_0x530d28(0x1d0)](_0x530d28(0x214),{'val':JSON['stringify'](_0x2ccb25),'ack':!![]});}catch(_0x4f04f4){this[_0x530d28(0x1e0)][_0x530d28(0x12d)](_0x530d28(0x198)+_0x4f04f4['message']);}}[a0_0xac12c8(0x228)](_0x5925f0){const _0x2d07a8=a0_0xac12c8;this[_0x2d07a8(0x234)][_0x2d07a8(0x16f)]&&this['config'][_0x2d07a8(0x200)]&&this[_0x2d07a8(0x204)](this[_0x2d07a8(0x234)][_0x2d07a8(0x200)],_0x2d07a8(0x275),{'message':_0x5925f0,'title':_0x2d07a8(0x22e),'priority':0x1}),this[_0x2d07a8(0x234)][_0x2d07a8(0x20a)]&&this['config']['notifyTelegramInstance']&&this[_0x2d07a8(0x204)](this['config'][_0x2d07a8(0x1a4)],_0x2d07a8(0x275),{'text':_0x5925f0});}}function a0_0x1ac7(_0x2c82a3,_0x4fa45b){const _0x3b90a6=a0_0x5af4();return a0_0x1ac7=function(_0xe060d7,_0x4aa089){_0xe060d7=_0xe060d7-0x123;let _0x5af4db=_0x3b90a6[_0xe060d7];return _0x5af4db;},a0_0x1ac7(_0x2c82a3,_0x4fa45b);}if(require['main']!==module)module[a0_0xac12c8(0x255)]=_0x7b60c8=>new CogniLiving(_0x7b60c8);else new CogniLiving();