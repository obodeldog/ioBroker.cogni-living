const a0_0x33a4b5=a0_0x188e;(function(_0x5a4281,_0x2e4f6c){const _0x57fdb3=a0_0x188e,_0x33a0fc=_0x5a4281();while(!![]){try{const _0x238e6a=-parseInt(_0x57fdb3(0x198))/0x1*(-parseInt(_0x57fdb3(0x185))/0x2)+parseInt(_0x57fdb3(0x1ab))/0x3+-parseInt(_0x57fdb3(0x1b8))/0x4+-parseInt(_0x57fdb3(0x17b))/0x5+-parseInt(_0x57fdb3(0x1d6))/0x6+-parseInt(_0x57fdb3(0x19b))/0x7+parseInt(_0x57fdb3(0x24f))/0x8;if(_0x238e6a===_0x2e4f6c)break;else _0x33a0fc['push'](_0x33a0fc['shift']());}catch(_0x23bf58){_0x33a0fc['push'](_0x33a0fc['shift']());}}}(a0_0x1257,0x2133c));const a0_0x580d3e=(function(){let _0x3b8131=!![];return function(_0x3b92ff,_0x23433b){const _0x569a04=_0x3b8131?function(){const _0x185f31=a0_0x188e;if(_0x23433b){const _0x49aac1=_0x23433b[_0x185f31(0x20f)](_0x3b92ff,arguments);return _0x23433b=null,_0x49aac1;}}:function(){};return _0x3b8131=![],_0x569a04;};}()),a0_0x182ed2=a0_0x580d3e(this,function(){const _0x4298de=a0_0x188e;return a0_0x182ed2[_0x4298de(0x251)]()['search'](_0x4298de(0x231))[_0x4298de(0x251)]()[_0x4298de(0x17d)](a0_0x182ed2)[_0x4298de(0x266)](_0x4298de(0x231));});a0_0x182ed2();'use strict';function a0_0x188e(_0x4058e8,_0x1a731f){const _0x561908=a0_0x1257();return a0_0x188e=function(_0x182ed2,_0x580d3e){_0x182ed2=_0x182ed2-0x166;let _0x1257eb=_0x561908[_0x182ed2];return _0x1257eb;},a0_0x188e(_0x4058e8,_0x1a731f);}const utils=require(a0_0x33a4b5(0x1a6)),{GoogleGenerativeAI}=require(a0_0x33a4b5(0x20d)),installer=require(a0_0x33a4b5(0x2a5)),scanner=require(a0_0x33a4b5(0x173)),schedulers=require('./lib/scheduler'),topology=require(a0_0x33a4b5(0x167)),setup=require(a0_0x33a4b5(0x217)),recorder=require(a0_0x33a4b5(0x18e)),pythonBridge=require(a0_0x33a4b5(0x210)),aiAgent=require('./lib/ai_agent'),deadMan=require(a0_0x33a4b5(0x168)),automation=require('./lib/automation'),GEMINI_MODEL=a0_0x33a4b5(0x21d),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils['Adapter']{constructor(_0x5d32d8){const _0x179754=a0_0x33a4b5;super({..._0x5d32d8,'name':'cogni-living'}),this[_0x179754(0x1cb)]=[],this[_0x179754(0x261)]=[],this[_0x179754(0x1ed)]=[],this[_0x179754(0x175)]=[],this[_0x179754(0x178)]={},this[_0x179754(0x1d7)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x179754(0x1ca)]=!![],this['exitTimer']=null,this[_0x179754(0x1f2)]=null,this[_0x179754(0x1da)]=![],this[_0x179754(0x172)]=null,this[_0x179754(0x270)]=null,this[_0x179754(0x1ff)]=setup[_0x179754(0x242)][_0x179754(0x262)],this['isProVersion']=![],this['lastAlertState']=![],this[_0x179754(0x2a3)]=null,this[_0x179754(0x192)]=null,this[_0x179754(0x1c4)]=null,this['driftAnalysisTimer']=null,this[_0x179754(0x1cc)]=null,this[_0x179754(0x1b6)]=null,this[_0x179754(0x232)]=null,this[_0x179754(0x27d)]=![],this['lastTrackerEventTime']=Date[_0x179754(0x176)](),this[_0x179754(0x1d9)]=null,this[_0x179754(0x19a)]=Date['now'](),this['infrasoundLocked']=![],this[_0x179754(0x1b5)]=[],this['on'](_0x179754(0x196),this[_0x179754(0x26e)][_0x179754(0x225)](this)),this['on'](_0x179754(0x28c),this['onStateChange'][_0x179754(0x225)](this)),this['on'](_0x179754(0x23a),this[_0x179754(0x282)][_0x179754(0x225)](this)),this['on']('message',this[_0x179754(0x213)]['bind'](this));}async[a0_0x33a4b5(0x26e)](){const _0x4f196f=a0_0x33a4b5;this[_0x4f196f(0x22e)]['info'](_0x4f196f(0x205)+this[_0x4f196f(0x166)]+_0x4f196f(0x19e));if(!installer[_0x4f196f(0x23b)](this,()=>this[_0x4f196f(0x250)]()))return;}async[a0_0x33a4b5(0x250)](){const _0xd280ca=a0_0x33a4b5;await setup[_0xd280ca(0x181)](this);try{this['isProVersion']=await setup[_0xd280ca(0x29d)](this[_0xd280ca(0x1ad)]['licenseKey']);}catch(_0x546656){}if(!this['config'][_0xd280ca(0x245)]||this[_0xd280ca(0x1ad)][_0xd280ca(0x245)]<0.1)this[_0xd280ca(0x1ad)][_0xd280ca(0x245)]=0xc;await setup[_0xd280ca(0x285)](this),await setup['initSystemConfig'](this);try{const _0x6ac2f9=await this[_0xd280ca(0x291)](_0xd280ca(0x18d)),_0x4a595b=await this['getStateAsync'](_0xd280ca(0x180));_0x6ac2f9&&_0x6ac2f9[_0xd280ca(0x25e)]&&_0x4a595b&&_0x4a595b[_0xd280ca(0x25e)]&&(Date['now']()-_0x6ac2f9['ts']<0x4*0xe10*0x3e8&&(this[_0xd280ca(0x1d9)]={'times':JSON[_0xd280ca(0x21a)](_0x6ac2f9[_0xd280ca(0x25e)]),'sources':JSON[_0xd280ca(0x21a)](_0x4a595b[_0xd280ca(0x25e)])},this[_0xd280ca(0x22e)][_0xd280ca(0x1e6)](_0xd280ca(0x1c7)+Object['keys'](this[_0xd280ca(0x1d9)][_0xd280ca(0x1bb)])[_0xd280ca(0x1c3)]+_0xd280ca(0x276))));}catch(_0x28e699){this[_0xd280ca(0x22e)][_0xd280ca(0x25d)](_0xd280ca(0x1f5)+_0x28e699[_0xd280ca(0x170)]);}if(this[_0xd280ca(0x1ad)][_0xd280ca(0x295)])try{this[_0xd280ca(0x172)]=new GoogleGenerativeAI(this['config'][_0xd280ca(0x295)]),this[_0xd280ca(0x270)]=this['genAI']['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0xd280ca(0x273)}}),this[_0xd280ca(0x22e)][_0xd280ca(0x1e6)](_0xd280ca(0x284));}catch(_0x8f0988){this[_0xd280ca(0x22e)][_0xd280ca(0x229)]('Gemini\x20Init\x20Error:\x20'+_0x8f0988[_0xd280ca(0x170)]);}await setup[_0xd280ca(0x21b)](this),await this[_0xd280ca(0x184)](),await this[_0xd280ca(0x267)](_0xd280ca(0x1be),{'type':'state','common':{'name':_0xd280ca(0x226),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0xd280ca(0x1b1),{'type':_0xd280ca(0x1e2),'common':{'name':_0xd280ca(0x1ef),'type':_0xd280ca(0x243),'role':_0xd280ca(0x28b),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0xd280ca(0x18d),{'type':'state','common':{'name':_0xd280ca(0x1f8),'type':_0xd280ca(0x243),'role':_0xd280ca(0x28b),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0xd280ca(0x1c8),{'type':_0xd280ca(0x1e2),'common':{'name':_0xd280ca(0x179),'type':_0xd280ca(0x243),'role':_0xd280ca(0x28b),'read':!![],'write':!![],'def':_0xd280ca(0x269)},'native':{}}),await this['setObjectNotExistsAsync'](_0xd280ca(0x1bc),{'type':_0xd280ca(0x1e2),'common':{'name':_0xd280ca(0x24e),'type':'string','role':_0xd280ca(0x28b),'read':!![],'write':![],'def':'{}'},'native':{}}),await this['setObjectNotExistsAsync'](_0xd280ca(0x1df),{'type':_0xd280ca(0x1e2),'common':{'name':_0xd280ca(0x206),'type':_0xd280ca(0x29f),'role':_0xd280ca(0x26c),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0xd280ca(0x267)](_0xd280ca(0x23e),{'type':_0xd280ca(0x1e2),'common':{'name':_0xd280ca(0x1db),'type':_0xd280ca(0x243),'role':'text','read':!![],'write':![]},'native':{}}),await this[_0xd280ca(0x267)](_0xd280ca(0x263),{'type':'state','common':{'name':'Active\x20Calendar\x20Enforcements\x20(Locks)','type':_0xd280ca(0x243),'role':_0xd280ca(0x28b),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0xd280ca(0x267)]('analysis.security.infrasoundLog',{'type':_0xd280ca(0x1e2),'common':{'name':_0xd280ca(0x216),'type':_0xd280ca(0x243),'role':_0xd280ca(0x28b),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0xd280ca(0x267)](_0xd280ca(0x1ea),{'type':'state','common':{'name':_0xd280ca(0x1f9),'type':_0xd280ca(0x243),'role':_0xd280ca(0x1bf),'read':!![],'write':![]},'native':{}});try{const _0x51edd9=await this[_0xd280ca(0x291)]('LTM.rawEventLog');if(_0x51edd9&&_0x51edd9[_0xd280ca(0x25e)])this['rawEventLog']=JSON[_0xd280ca(0x21a)](_0x51edd9[_0xd280ca(0x25e)]);}catch(_0x13735e){this[_0xd280ca(0x1ed)]=[];}try{const _0x321225=await this['getStateAsync'](_0xd280ca(0x1dd));if(_0x321225&&_0x321225[_0xd280ca(0x25e)])this[_0xd280ca(0x175)]=JSON[_0xd280ca(0x21a)](_0x321225[_0xd280ca(0x25e)]);}catch(_0x4e3b4b){this['dailyDigests']=[];}const _0x4408da=this[_0xd280ca(0x175)]['length']>=(this[_0xd280ca(0x1ad)][_0xd280ca(0x244)]||0x7)?'Aktiv\x20('+this[_0xd280ca(0x175)][_0xd280ca(0x1c3)]+'\x20Tage)':_0xd280ca(0x16e)+this[_0xd280ca(0x175)][_0xd280ca(0x1c3)]+'/'+(this['config'][_0xd280ca(0x244)]||0x7)+')';await this[_0xd280ca(0x1ba)]('LTM.baselineStatus',{'val':_0x4408da,'ack':!![]}),this['subscribeStates'](_0xd280ca(0x254)),this[_0xd280ca(0x260)](_0xd280ca(0x236)),this[_0xd280ca(0x260)]('system.mode'),this['subscribeStates'](_0xd280ca(0x16b)),this[_0xd280ca(0x260)](_0xd280ca(0x1b2)),this[_0xd280ca(0x260)](_0xd280ca(0x1a8)),this['subscribeStates'](_0xd280ca(0x26b)),this[_0xd280ca(0x260)](_0xd280ca(0x200)),this[_0xd280ca(0x260)](_0xd280ca(0x286)),this[_0xd280ca(0x260)](_0xd280ca(0x272)),this[_0xd280ca(0x260)](_0xd280ca(0x297)),this[_0xd280ca(0x260)](_0xd280ca(0x21c)),this[_0xd280ca(0x260)](_0xd280ca(0x180));this[_0xd280ca(0x1ad)][_0xd280ca(0x1e3)]&&this[_0xd280ca(0x1ad)][_0xd280ca(0x16f)]&&(this[_0xd280ca(0x22e)]['info'](_0xd280ca(0x264)+this[_0xd280ca(0x1ad)][_0xd280ca(0x16f)]),this[_0xd280ca(0x293)](this['config'][_0xd280ca(0x16f)]));const _0x573132=this[_0xd280ca(0x1ad)][_0xd280ca(0x188)];if(_0x573132)for(const _0x2ce0f0 of _0x573132){await this['subscribeForeignStatesAsync'](_0x2ce0f0['id']);}const _0x189cef=this[_0xd280ca(0x1ad)]['presenceDevices'];if(_0x189cef)for(const _0x24ec84 of _0x189cef){await this[_0xd280ca(0x240)](_0x24ec84);}if(this[_0xd280ca(0x1ad)][_0xd280ca(0x247)]&&this[_0xd280ca(0x1ad)][_0xd280ca(0x1d4)])await this['subscribeForeignStatesAsync'](this['config']['notifyTelegramInstance']+'.communicate.request');setTimeout(()=>this[_0xd280ca(0x1fd)](),0x1388);if(this['analysisTimer'])clearInterval(this[_0xd280ca(0x2a3)]);const _0x4f1812=this['config']['analysisInterval']||0xf;_0x4f1812>0x0&&(this[_0xd280ca(0x2a3)]=setInterval(()=>{const _0x2786ce=_0xd280ca;this[_0x2786ce(0x283)](),automation[_0x2786ce(0x221)](this),automation[_0x2786ce(0x1e0)](this);},_0x4f1812*0x3c*0x3e8));setTimeout(()=>{const _0x3568c7=_0xd280ca;automation[_0x3568c7(0x221)](this),automation[_0x3568c7(0x1e0)](this);},0x2710);this[_0xd280ca(0x1ad)]['trackerEnabled']!==![]&&(this['trackerHeartbeat']=setInterval(()=>{const _0x42aa24=_0xd280ca;if(this['isProVersion']){const _0x11864f=Date[_0x42aa24(0x176)](),_0x3cfaef=this['lastTrackerEventTime']||_0x11864f,_0x11711a=(_0x11864f-_0x3cfaef)/0x3e8;_0x11711a>0x2&&(this[_0x42aa24(0x171)]=_0x11864f,pythonBridge['send'](this,'TRACK_EVENT',{'room':null,'dt':_0x11711a}));}},0xbb8));if(this[_0xd280ca(0x232)])clearInterval(this[_0xd280ca(0x232)]);this['healthTrendInterval']=setInterval(()=>{const _0x25e6d4=_0xd280ca;this['isProVersion']&&(this[_0x25e6d4(0x22e)][_0x25e6d4(0x1e6)]('â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...'),this[_0x25e6d4(0x25a)]());},0x4*0x3c*0x3c*0x3e8),schedulers['setupLtmScheduler'](this,()=>aiAgent[_0xd280ca(0x278)](this,pythonBridge)),schedulers['setupModeResetScheduler'](this),schedulers[_0xd280ca(0x1e5)](this,()=>aiAgent[_0xd280ca(0x194)](this)),schedulers[_0xd280ca(0x17e)](this,()=>aiAgent[_0xd280ca(0x290)](this)),pythonBridge[_0xd280ca(0x271)](this,installer['PYTHON_EXE']),setTimeout(async()=>{const _0x2cadbb=_0xd280ca;await topology[_0x2cadbb(0x1a7)](this);try{const _0x57d246=await this[_0x2cadbb(0x291)](_0x2cadbb(0x23d));if(_0x57d246&&_0x57d246[_0x2cadbb(0x25e)])pythonBridge[_0x2cadbb(0x28d)](this,_0x2cadbb(0x289),JSON['parse'](_0x57d246[_0x2cadbb(0x25e)]));}catch(_0xe1d720){}this[_0x2cadbb(0x25a)](),this[_0x2cadbb(0x22f)](),this['triggerEnergyPrediction'](),this[_0x2cadbb(0x212)]();},0x1388);}[a0_0x33a4b5(0x282)](_0x3fed49){const _0x440818=a0_0x33a4b5;if(this[_0x440818(0x2a3)])clearInterval(this[_0x440818(0x2a3)]);if(this[_0x440818(0x2a2)])clearInterval(this[_0x440818(0x2a2)]);if(this[_0x440818(0x1b6)])clearInterval(this['trackerHeartbeat']);if(this[_0x440818(0x232)])clearInterval(this[_0x440818(0x232)]);if(this['ltmJob'])this[_0x440818(0x192)]['cancel']();if(this[_0x440818(0x1c4)])this[_0x440818(0x1c4)]['cancel']();if(this[_0x440818(0x1cc)])this['briefingJob']['cancel']();recorder[_0x440818(0x1a2)](this),pythonBridge[_0x440818(0x183)](this),_0x3fed49();}async['onStateChange'](_0x126174,_0x5b8fd1){const _0x388a11=a0_0x33a4b5;if(!_0x5b8fd1||this[_0x388a11(0x27d)])return;if(_0x126174[_0x388a11(0x193)]('telegram')&&_0x126174[_0x388a11(0x1ae)](_0x388a11(0x21f))&&_0x5b8fd1[_0x388a11(0x25e)])return;if(this[_0x388a11(0x1ad)][_0x388a11(0x1e3)]&&_0x126174===this['config'][_0x388a11(0x16f)]){this['handleInfrasound'](_0x5b8fd1[_0x388a11(0x25e)]);return;}if(_0x126174===this['namespace']+_0x388a11(0x1c1)){if(_0x5b8fd1[_0x388a11(0x25e)]&&Object['values'](setup[_0x388a11(0x242)])[_0x388a11(0x193)](_0x5b8fd1[_0x388a11(0x25e)])){this['currentSystemMode']=_0x5b8fd1[_0x388a11(0x25e)];if(_0x5b8fd1[_0x388a11(0x25e)]===setup[_0x388a11(0x242)][_0x388a11(0x24a)])await recorder[_0x388a11(0x1b9)](this,![]);else await recorder[_0x388a11(0x1b9)](this,!![]);if(this[_0x388a11(0x1e7)]){let _0x31ec76=![],_0x26d071=0x0,_0x21dc19='manual';if(this[_0x388a11(0x1ff)]==='party')_0x31ec76=!![],_0x26d071=0x168,_0x21dc19=_0x388a11(0x208);else this[_0x388a11(0x1ff)]===_0x388a11(0x1a9)&&(_0x31ec76=!![],_0x26d071=0x5a0,_0x21dc19=_0x388a11(0x287));pythonBridge[_0x388a11(0x28d)](this,'SET_LEARNING_MODE',{'active':_0x31ec76,'duration':_0x26d071,'label':_0x21dc19}),await this[_0x388a11(0x1ba)](_0x388a11(0x1f7),{'val':JSON[_0x388a11(0x18b)]({'active':_0x31ec76,'label':_0x21dc19,'timestamp':Date[_0x388a11(0x176)]()}),'ack':!![]});}}if(!_0x5b8fd1[_0x388a11(0x26f)])this[_0x388a11(0x1a3)](_0x126174,{'val':this['currentSystemMode'],'ack':!![]});return;}_0x126174['endsWith']('analysis.energy.warmupSources')&&_0x5b8fd1[_0x388a11(0x26f)]&&this[_0x388a11(0x19c)](_0x5b8fd1['val']);if(!_0x5b8fd1[_0x388a11(0x26f)]){if(_0x126174[_0x388a11(0x193)](_0x388a11(0x254))&&_0x5b8fd1['val']){this['setState'](_0x126174,{'val':![],'ack':!![]}),aiAgent[_0x388a11(0x25b)](this);return;}if(_0x126174[_0x388a11(0x193)]('triggerDailyDigest')&&_0x5b8fd1[_0x388a11(0x25e)]){this[_0x388a11(0x1a3)](_0x126174,{'val':![],'ack':!![]});if(this[_0x388a11(0x1e7)])aiAgent[_0x388a11(0x278)](this,pythonBridge);return;}if(_0x126174[_0x388a11(0x193)](_0x388a11(0x258))&&_0x5b8fd1[_0x388a11(0x25e)]){this['setState'](_0x126174,{'val':![],'ack':!![]}),aiAgent[_0x388a11(0x290)](this);return;}if(_0x126174[_0x388a11(0x193)](_0x388a11(0x2a1))&&_0x5b8fd1['val']){this[_0x388a11(0x1a3)](_0x126174,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this);return;}if(_0x126174['includes'](_0x388a11(0x26b))&&_0x5b8fd1[_0x388a11(0x25e)]){this[_0x388a11(0x1a3)](_0x126174,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x29eff2=await this[_0x388a11(0x291)]('LTM.trainingData.sequences');if(_0x29eff2&&_0x29eff2[_0x388a11(0x25e)]){const _0x33cb0e=JSON['parse'](_0x29eff2[_0x388a11(0x25e)]);this['setStateAsync']('analysis.training.status',{'val':_0x388a11(0x24d),'ack':!![]}),pythonBridge['send'](this,_0x388a11(0x29c),{'sequences':_0x33cb0e});}}catch(_0x6e9def){}return;}if(_0x126174[_0x388a11(0x193)](_0x388a11(0x200))&&_0x5b8fd1[_0x388a11(0x25e)]){this['setState'](_0x126174,{'val':![],'ack':!![]});if(this[_0x388a11(0x1e7)])try{const _0x54a324=await this[_0x388a11(0x291)](_0x388a11(0x1dd));if(_0x54a324&&_0x54a324[_0x388a11(0x25e)])pythonBridge['send'](this,_0x388a11(0x1f3),{'digests':JSON[_0x388a11(0x21a)](_0x54a324[_0x388a11(0x25e)])});}catch(_0x2388fe){}return;}if(_0x126174[_0x388a11(0x193)](_0x388a11(0x286))&&_0x5b8fd1['val']){this[_0x388a11(0x1a3)](_0x126174,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x31c75b=await this[_0x388a11(0x291)](_0x388a11(0x235));if(_0x31c75b&&_0x31c75b[_0x388a11(0x25e)])pythonBridge[_0x388a11(0x28d)](this,'TRAIN_ENERGY',{'points':JSON[_0x388a11(0x21a)](_0x31c75b[_0x388a11(0x25e)])});}catch(_0x80bafe){}return;}if(_0x126174[_0x388a11(0x193)]('analysis.training.triggerComfort')&&_0x5b8fd1['val']){this[_0x388a11(0x1a3)](_0x126174,{'val':![],'ack':!![]});if(this[_0x388a11(0x1e7)])try{const _0x283179=await this[_0x388a11(0x291)](_0x388a11(0x1cd));if(_0x283179&&_0x283179['val'])pythonBridge[_0x388a11(0x28d)](this,_0x388a11(0x202),{'events':JSON[_0x388a11(0x21a)](_0x283179[_0x388a11(0x25e)])});}catch(_0x780d76){}return;}if(_0x126174[_0x388a11(0x193)](_0x388a11(0x297))&&_0x5b8fd1[_0x388a11(0x25e)]){this['setState'](_0x126174,{'val':![],'ack':!![]}),topology['updateTopology'](this);if(this[_0x388a11(0x1e7)])try{const _0x3bb6cc=await this[_0x388a11(0x291)](_0x388a11(0x257));if(_0x3bb6cc&&_0x3bb6cc['val']){const _0x2d7a6c=JSON[_0x388a11(0x21a)](_0x3bb6cc[_0x388a11(0x25e)]);this[_0x388a11(0x22e)][_0x388a11(0x1e6)]('ðŸ§ \x20Graph-Brain:\x20Training\x20Behaviour\x20Matrix\x20based\x20on\x20'+_0x2d7a6c['length']+_0x388a11(0x274)),pythonBridge[_0x388a11(0x28d)](this,_0x388a11(0x1e1),{'sequences':_0x2d7a6c});}else this[_0x388a11(0x22e)]['warn'](_0x388a11(0x248));}catch(_0x50ed27){this['log'][_0x388a11(0x229)](_0x388a11(0x1d1)+_0x50ed27[_0x388a11(0x170)]);}return;}}if(this[_0x388a11(0x1ad)]['presenceDevices']&&this[_0x388a11(0x1ad)][_0x388a11(0x177)]['includes'](_0x126174)){await this[_0x388a11(0x1fd)]();return;}const _0x12cc87=(this[_0x388a11(0x1ad)][_0x388a11(0x188)]||[])[_0x388a11(0x1b4)](_0x1834cc=>_0x1834cc['id']===_0x126174);if(_0x12cc87){const _0x4ad187=await recorder[_0x388a11(0x1d3)](this,_0x126174,_0x5b8fd1,_0x12cc87);_0x4ad187&&_0x4ad187[_0x388a11(0x1c9)]==='motion'&&_0x4ad187[_0x388a11(0x28a)]&&this[_0x388a11(0x1e7)]&&deadMan[_0x388a11(0x21e)](this,_0x4ad187[_0x388a11(0x28a)]),_0x5b8fd1[_0x388a11(0x25e)]&&(_0x5b8fd1[_0x388a11(0x25e)]===!![]||_0x5b8fd1[_0x388a11(0x25e)]===0x1||String(_0x5b8fd1['val'])[_0x388a11(0x1aa)]()===_0x388a11(0x220))&&(_0x12cc87[_0x388a11(0x1c9)]&&(_0x12cc87[_0x388a11(0x1c9)][_0x388a11(0x193)](_0x388a11(0x1f4))||_0x12cc87['type'][_0x388a11(0x193)]('door')||_0x12cc87['type'][_0x388a11(0x193)]('magnet'))&&this[_0x388a11(0x296)](_0x12cc87)),(_0x12cc87[_0x388a11(0x1c9)]==='temperature'||_0x12cc87[_0x388a11(0x1c9)]==='thermostat')&&automation[_0x388a11(0x233)](this);}}async[a0_0x33a4b5(0x19c)](_0x427977){const _0x12b800=a0_0x33a4b5;if(!this[_0x12b800(0x1d9)]||Date['now']()-this[_0x12b800(0x19a)]>0x493e0)return;if(!this[_0x12b800(0x1d9)]['sources']||!this['memoryCache']['times'])return;try{const _0x2eeeb8=JSON[_0x12b800(0x21a)](_0x427977),_0x375485=this[_0x12b800(0x1d9)][_0x12b800(0x197)];let _0x46bf3b=![];for(const _0x338f01 in _0x375485){if(_0x375485[_0x338f01][_0x12b800(0x193)]('AI')&&_0x2eeeb8[_0x338f01]&&!_0x2eeeb8[_0x338f01][_0x12b800(0x193)]('AI')){_0x46bf3b=!![];break;}}_0x46bf3b&&(this[_0x12b800(0x22e)][_0x12b800(0x1e6)](_0x12b800(0x20b)),await this['setStateAsync']('analysis.energy.warmupTimes',{'val':JSON[_0x12b800(0x18b)](this[_0x12b800(0x1d9)][_0x12b800(0x1bb)]),'ack':!![]}),await this[_0x12b800(0x1ba)](_0x12b800(0x180),{'val':JSON[_0x12b800(0x18b)](this[_0x12b800(0x1d9)]['sources']),'ack':!![]}));}catch(_0x102cd8){}}async[a0_0x33a4b5(0x213)](_0x4f0a44){const _0x3eaf3f=a0_0x33a4b5;if(typeof _0x4f0a44===_0x3eaf3f(0x1ee)&&_0x4f0a44[_0x3eaf3f(0x170)]){if(_0x4f0a44[_0x3eaf3f(0x18f)]===_0x3eaf3f(0x22d))try{const _0x20ec79=await automation['scanThermostats'](this);this['sendTo'](_0x4f0a44[_0x3eaf3f(0x22b)],_0x4f0a44['command'],{'success':!![],'results':_0x20ec79},_0x4f0a44[_0x3eaf3f(0x24b)]);}catch(_0x3342e1){this[_0x3eaf3f(0x241)](_0x4f0a44[_0x3eaf3f(0x22b)],_0x4f0a44['command'],{'success':![],'error':_0x3342e1['message']},_0x4f0a44['callback']);}else{if(_0x4f0a44[_0x3eaf3f(0x18f)]==='simulateEnergyMPC')try{const {current_temps:_0x1b02f2,t_out:_0x4c70fc,targets:_0x5ea69f,t_forecast:_0x5b3cd5}=_0x4f0a44[_0x3eaf3f(0x170)],_0x364861=[];let _0x3486d1={};try{const _0x18d682=await this['getStateAsync'](_0x3eaf3f(0x223));if(_0x18d682&&_0x18d682[_0x3eaf3f(0x25e)]){const _0x1be44d=JSON['parse'](_0x18d682[_0x3eaf3f(0x25e)]);_0x3486d1=_0x1be44d['scores']||_0x1be44d;}}catch(_0x2410a0){}const _0x51582b=_0x5b3cd5!==undefined&&_0x5b3cd5!==null?(_0x4c70fc+_0x5b3cd5)/0x2:_0x4c70fc;for(const [_0x2dc523,_0x2cb955]of Object[_0x3eaf3f(0x27b)](_0x1b02f2)){const _0x5e42e9=_0x5ea69f[_0x2dc523]||0x15;if(_0x2cb955<=_0x5e42e9)continue;let _0x44fa59=_0x3486d1[_0x2dc523]||-0.5;if(_0x44fa59>=0x0)_0x44fa59=-0.5;const _0x490481=Math[_0x3eaf3f(0x1a1)](_0x44fa59),_0x52a35b=_0x2cb955-_0x5e42e9;let _0x44f8a7=Math['floor'](_0x52a35b/_0x490481*0x3c);const _0x23f789=_0x2cb955-_0x4c70fc,_0x38324c=_0x2cb955-_0x51582b;if(_0x38324c!==0x0&&_0x23f789!==0x0){const _0xa11074=_0x23f789/_0x38324c;_0x44f8a7=Math[_0x3eaf3f(0x252)](_0x44f8a7*_0xa11074);}if(_0x44f8a7>0xf){if(_0x44f8a7>0xf0)_0x44f8a7=0xf0;_0x364861[_0x3eaf3f(0x201)]({'room':_0x2dc523,'minutes_safe':_0x44f8a7,'target':_0x5e42e9,'current':_0x2cb955,'savings_msg':'Heizung\x20kann\x20'+_0x44f8a7+'\x20min\x20ausbleiben.'});}}_0x364861[_0x3eaf3f(0x292)]((_0xb134eb,_0x146f8e)=>_0x146f8e[_0x3eaf3f(0x1a4)]-_0xb134eb[_0x3eaf3f(0x1a4)]),this[_0x3eaf3f(0x241)](_0x4f0a44[_0x3eaf3f(0x22b)],_0x4f0a44[_0x3eaf3f(0x18f)],{'success':!![],'proposals':_0x364861},_0x4f0a44[_0x3eaf3f(0x24b)]);}catch(_0xdc6935){this[_0x3eaf3f(0x241)](_0x4f0a44[_0x3eaf3f(0x22b)],_0x4f0a44[_0x3eaf3f(0x18f)],{'success':![],'error':_0xdc6935['message']},_0x4f0a44[_0x3eaf3f(0x24b)]);}else{if(_0x4f0a44[_0x3eaf3f(0x18f)]===_0x3eaf3f(0x23c))try{await automation[_0x3eaf3f(0x299)](this),this[_0x3eaf3f(0x241)](_0x4f0a44[_0x3eaf3f(0x22b)],_0x4f0a44[_0x3eaf3f(0x18f)],{'success':!![]},_0x4f0a44[_0x3eaf3f(0x24b)]);}catch(_0x45b54b){this[_0x3eaf3f(0x241)](_0x4f0a44[_0x3eaf3f(0x22b)],_0x4f0a44[_0x3eaf3f(0x18f)],{'success':![],'error':_0x45b54b['message']},_0x4f0a44[_0x3eaf3f(0x24b)]);}else{if(_0x4f0a44['command']===_0x3eaf3f(0x29e))try{const _0x3039d8=_0x4f0a44[_0x3eaf3f(0x170)]['key'],_0x1ccb01=_0x3eaf3f(0x1bc),_0x86eeae=await this['getStateAsync'](_0x1ccb01);let _0x3ea528={};if(_0x86eeae&&_0x86eeae['val'])try{_0x3ea528=JSON['parse'](_0x86eeae[_0x3eaf3f(0x25e)]);}catch(_0x4f427d){}_0x3039d8&&_0x3ea528[_0x3039d8]?(delete _0x3ea528[_0x3039d8],await this['setStateAsync'](_0x1ccb01,{'val':JSON[_0x3eaf3f(0x18b)](_0x3ea528),'ack':!![]}),this[_0x3eaf3f(0x22e)][_0x3eaf3f(0x1e6)](_0x3eaf3f(0x22a)+_0x3039d8+_0x3eaf3f(0x298)),this[_0x3eaf3f(0x241)](_0x4f0a44[_0x3eaf3f(0x22b)],_0x4f0a44[_0x3eaf3f(0x18f)],{'success':!![]},_0x4f0a44[_0x3eaf3f(0x24b)])):this[_0x3eaf3f(0x241)](_0x4f0a44[_0x3eaf3f(0x22b)],_0x4f0a44[_0x3eaf3f(0x18f)],{'success':![],'error':'Key\x20not\x20found\x20or\x20not\x20provided'},_0x4f0a44[_0x3eaf3f(0x24b)]);}catch(_0x355630){this['sendTo'](_0x4f0a44[_0x3eaf3f(0x22b)],_0x4f0a44[_0x3eaf3f(0x18f)],{'success':![],'error':_0x355630[_0x3eaf3f(0x170)]},_0x4f0a44[_0x3eaf3f(0x24b)]);}else{if(_0x4f0a44[_0x3eaf3f(0x18f)]===_0x3eaf3f(0x1dc))await this[_0x3eaf3f(0x1ba)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),await this['setStateAsync'](_0x3eaf3f(0x169),{'val':'','ack':!![]}),await this['setStateAsync']('analysis.automation.targetId',{'val':'','ack':!![]}),this[_0x3eaf3f(0x241)](_0x4f0a44[_0x3eaf3f(0x22b)],_0x4f0a44[_0x3eaf3f(0x18f)],{'success':!![]},_0x4f0a44[_0x3eaf3f(0x24b)]);else{if(_0x4f0a44[_0x3eaf3f(0x18f)]==='simulateButler'){const {targetId:_0x159c8b,targetValue:_0x5da388}=_0x4f0a44['message'];await this[_0x3eaf3f(0x1ba)](_0x3eaf3f(0x1c0),{'val':!![],'ack':!![]}),await this['setStateAsync'](_0x3eaf3f(0x169),{'val':_0x3eaf3f(0x279),'ack':!![]}),await this[_0x3eaf3f(0x1ba)](_0x3eaf3f(0x28e),{'val':_0x159c8b,'ack':!![]}),await this[_0x3eaf3f(0x1ba)]('analysis.automation.targetValue',{'val':String(_0x5da388),'ack':!![]}),this['sendTo'](_0x4f0a44[_0x3eaf3f(0x22b)],_0x4f0a44[_0x3eaf3f(0x18f)],{'success':!![]},_0x4f0a44['callback']);}else{if(_0x4f0a44[_0x3eaf3f(0x18f)]===_0x3eaf3f(0x230))try{const _0x48ef50=_0x4f0a44[_0x3eaf3f(0x170)]['apiKey'];if(!_0x48ef50)throw new Error(_0x3eaf3f(0x27a));const _0x11cdcf=new GoogleGenerativeAI(_0x48ef50),_0x2bac4e=_0x11cdcf['getGenerativeModel']({'model':GEMINI_MODEL}),_0x34df0d=await _0x2bac4e[_0x3eaf3f(0x17a)](_0x3eaf3f(0x1fb)),_0x16c993=await _0x34df0d['response'];if(_0x16c993['text']())this[_0x3eaf3f(0x241)](_0x4f0a44[_0x3eaf3f(0x22b)],_0x4f0a44[_0x3eaf3f(0x18f)],{'success':!![],'message':_0x3eaf3f(0x238)},_0x4f0a44[_0x3eaf3f(0x24b)]);else throw new Error(_0x3eaf3f(0x294));}catch(_0x35433c){this[_0x3eaf3f(0x241)](_0x4f0a44['from'],_0x4f0a44[_0x3eaf3f(0x18f)],{'success':![],'message':_0x35433c[_0x3eaf3f(0x170)]},_0x4f0a44[_0x3eaf3f(0x24b)]);}else{if(_0x4f0a44[_0x3eaf3f(0x18f)]===_0x3eaf3f(0x182))try{const _0xf92e5d=await scanner[_0x3eaf3f(0x239)](this,_0x4f0a44['message']||{});this[_0x3eaf3f(0x241)](_0x4f0a44['from'],_0x4f0a44['command'],{'success':!![],'devices':_0xf92e5d},_0x4f0a44[_0x3eaf3f(0x24b)]);}catch(_0x55ef0a){this['sendTo'](_0x4f0a44['from'],_0x4f0a44['command'],{'success':![],'error':_0x55ef0a[_0x3eaf3f(0x170)]},_0x4f0a44[_0x3eaf3f(0x24b)]);}else{if(_0x4f0a44[_0x3eaf3f(0x18f)]==='updateTopologyMatrix')try{const {matrix:_0xa2aa9c}=_0x4f0a44['message'],_0x1345ee=await this[_0x3eaf3f(0x291)]('analysis.topology.structure');if(_0x1345ee&&_0x1345ee[_0x3eaf3f(0x25e)]){const _0x29b344=JSON['parse'](_0x1345ee[_0x3eaf3f(0x25e)]);_0x29b344[_0x3eaf3f(0x195)]=_0xa2aa9c,_0x29b344['updated']=Date['now'](),await this[_0x3eaf3f(0x1ba)](_0x3eaf3f(0x23d),{'val':JSON[_0x3eaf3f(0x18b)](_0x29b344),'ack':!![]}),pythonBridge[_0x3eaf3f(0x28d)](this,_0x3eaf3f(0x289),_0x29b344);}this[_0x3eaf3f(0x241)](_0x4f0a44['from'],_0x4f0a44[_0x3eaf3f(0x18f)],{'success':!![]},_0x4f0a44['callback']);}catch(_0x4723f5){this[_0x3eaf3f(0x22e)][_0x3eaf3f(0x229)](_0x4723f5);}else{if(_0x4f0a44['command']===_0x3eaf3f(0x186))this[_0x3eaf3f(0x241)](_0x4f0a44['from'],_0x4f0a44['command'],{'success':!![],'dailyDigests':this[_0x3eaf3f(0x175)]||[],'analysisHistory':this[_0x3eaf3f(0x261)]||[]},_0x4f0a44[_0x3eaf3f(0x24b)]);else{if(_0x4f0a44[_0x3eaf3f(0x18f)]===_0x3eaf3f(0x27c)){const _0x2a28e8=this[_0x3eaf3f(0x175)][_0x3eaf3f(0x1c3)],_0x43afcb=new Array(0x18)[_0x3eaf3f(0x288)](0x0),_0x26a06c=new Date()[_0x3eaf3f(0x209)](0x0,0x0,0x0,0x0);this['eventHistory']&&this[_0x3eaf3f(0x1cb)]['forEach'](_0x2bbefb=>{const _0x4b5ea4=_0x3eaf3f;if(_0x2bbefb[_0x4b5ea4(0x29b)]>=_0x26a06c){const _0x451319=new Date(_0x2bbefb['timestamp'])['getHours']();if(_0x451319>=0x0&&_0x451319<0x18)_0x43afcb[_0x451319]++;}});let _0x17eb2e=![],_0x2e3d0a='',_0x156942='',_0x25f684='';try{const _0x5ad9bd=await this[_0x3eaf3f(0x291)](_0x3eaf3f(0x1c0));if(_0x5ad9bd&&_0x5ad9bd[_0x3eaf3f(0x25e)]){_0x17eb2e=!![];const _0xba532e=await this[_0x3eaf3f(0x291)]('analysis.automation.description');_0x2e3d0a=_0xba532e?_0xba532e[_0x3eaf3f(0x25e)]:'';const _0x293905=await this['getStateAsync']('analysis.automation.targetId');_0x156942=_0x293905?_0x293905[_0x3eaf3f(0x25e)]:'';const _0x54534f=await this[_0x3eaf3f(0x291)](_0x3eaf3f(0x19d));_0x25f684=_0x54534f?_0x54534f[_0x3eaf3f(0x25e)]:'';}}catch(_0x1732f5){}const _0x343a7d=await this[_0x3eaf3f(0x189)](),_0x45eda3=(this[_0x3eaf3f(0x1ad)]['devices']||[])[_0x3eaf3f(0x256)](_0x47b3c1=>_0x47b3c1['isSolar']),_0xe609d1=_0x343a7d&&_0x45eda3;let _0x38c07f='';try{const _0x372379=await this[_0x3eaf3f(0x291)](_0x3eaf3f(0x211));if(_0x372379&&_0x372379['val'])_0x38c07f=_0x372379['val'];}catch(_0x2fe70f){}this[_0x3eaf3f(0x241)](_0x4f0a44[_0x3eaf3f(0x22b)],_0x4f0a44[_0x3eaf3f(0x18f)],{'success':!![],'eventHistory':this[_0x3eaf3f(0x1cb)]['slice'](0x0,0xf),'stats':{'digestCount':_0x2a28e8,'isPresent':this[_0x3eaf3f(0x1ca)],'hourlyActivity':_0x43afcb,'solarActive':_0xe609d1,'presenceWho':_0x38c07f},'automation':{'detected':_0x17eb2e,'description':_0x2e3d0a,'targetId':_0x156942,'targetValue':_0x25f684}},_0x4f0a44['callback']);}else{if(_0x4f0a44['command']===_0x3eaf3f(0x24c)){const _0xb6880e=await this[_0x3eaf3f(0x1bd)](_0x3eaf3f(0x18a),_0x3eaf3f(0x1af)),_0x5708d5=[];if(_0xb6880e)for(const _0x5aca93 in _0xb6880e){const _0x16c5f2=_0xb6880e[_0x5aca93],_0x2fff9b=(_0x16c5f2[_0x3eaf3f(0x199)]&&typeof _0x16c5f2[_0x3eaf3f(0x199)][_0x3eaf3f(0x16a)]==='object'?_0x16c5f2[_0x3eaf3f(0x199)]['name']['de']:_0x16c5f2[_0x3eaf3f(0x199)][_0x3eaf3f(0x16a)])||_0x16c5f2[_0x3eaf3f(0x199)][_0x3eaf3f(0x16a)];_0x5708d5[_0x3eaf3f(0x201)]({'id':_0x5aca93,'name':_0x2fff9b});}const _0x1b80c8=await this['getForeignObjectsAsync'](_0x3eaf3f(0x187),'enum'),_0x1c17c6=[];if(_0x1b80c8)for(const _0x18cf57 in _0x1b80c8){const _0x38a25c=_0x1b80c8[_0x18cf57],_0x172347=(_0x38a25c[_0x3eaf3f(0x199)]&&typeof _0x38a25c[_0x3eaf3f(0x199)][_0x3eaf3f(0x16a)]==='object'?_0x38a25c[_0x3eaf3f(0x199)]['name']['de']:_0x38a25c[_0x3eaf3f(0x199)][_0x3eaf3f(0x16a)])||_0x18cf57[_0x3eaf3f(0x2a4)]('.')[_0x3eaf3f(0x246)]();_0x1c17c6['push'](_0x172347);}this['sendTo'](_0x4f0a44['from'],_0x4f0a44[_0x3eaf3f(0x18f)],{'success':!![],'enums':_0x5708d5,'rooms':_0x1c17c6},_0x4f0a44['callback']);}else{if(_0x4f0a44[_0x3eaf3f(0x18f)]==='testContext')try{let _0x3082b=_0x3eaf3f(0x19f),_0xd9a36b=_0x3eaf3f(0x29a);if(this[_0x3eaf3f(0x1ad)]['useWeather']){const _0x5ae168=await recorder['getOutsideTemperatureNumeric'](this);_0x3082b=_0x5ae168!==null?_0x5ae168+'Â°C':_0x3eaf3f(0x1d2);}if(this[_0x3eaf3f(0x1ad)][_0x3eaf3f(0x203)]){const _0x402d21=await this['getForeignObjectAsync']('system.adapter.'+this[_0x3eaf3f(0x1ad)][_0x3eaf3f(0x203)]);_0xd9a36b=_0x402d21?_0x3eaf3f(0x219):'Instanz\x20nicht\x20gefunden';}this[_0x3eaf3f(0x241)](_0x4f0a44[_0x3eaf3f(0x22b)],_0x4f0a44[_0x3eaf3f(0x18f)],{'success':!![],'weather':_0x3082b,'calendar':_0xd9a36b},_0x4f0a44[_0x3eaf3f(0x24b)]);}catch(_0x4c66e4){this['sendTo'](_0x4f0a44[_0x3eaf3f(0x22b)],_0x4f0a44['command'],{'success':![],'error':_0x4c66e4['message']},_0x4f0a44[_0x3eaf3f(0x24b)]);}else{if(_0x4f0a44[_0x3eaf3f(0x18f)]==='getCalendarNames')try{const _0x3fd217=_0x4f0a44[_0x3eaf3f(0x170)][_0x3eaf3f(0x268)],_0x8be731=await this[_0x3eaf3f(0x1fa)](_0x3fd217+_0x3eaf3f(0x25c));let _0x4bce20=[];if(_0x8be731&&_0x8be731[_0x3eaf3f(0x25e)]){const _0x31f120=JSON[_0x3eaf3f(0x21a)](_0x8be731[_0x3eaf3f(0x25e)]),_0x5788d2=new Set();Array['isArray'](_0x31f120)&&_0x31f120['forEach'](_0x290bfd=>{const _0x319194=_0x3eaf3f;if(_0x290bfd[_0x319194(0x214)])_0x5788d2[_0x319194(0x27e)](_0x290bfd[_0x319194(0x214)]);else{if(_0x290bfd[_0x319194(0x1c2)])_0x5788d2[_0x319194(0x27e)](_0x290bfd[_0x319194(0x1c2)]);}}),_0x4bce20=Array[_0x3eaf3f(0x22b)](_0x5788d2)['sort']();}if(_0x4bce20['length']===0x0)_0x4bce20=[_0x3eaf3f(0x16d)];this['sendTo'](_0x4f0a44[_0x3eaf3f(0x22b)],_0x4f0a44['command'],{'success':!![],'names':_0x4bce20},_0x4f0a44[_0x3eaf3f(0x24b)]);}catch(_0x15ff0d){this[_0x3eaf3f(0x241)](_0x4f0a44[_0x3eaf3f(0x22b)],_0x4f0a44['command'],{'success':![],'error':_0x15ff0d[_0x3eaf3f(0x170)]},_0x4f0a44[_0x3eaf3f(0x24b)]);}else{if(_0x4f0a44[_0x3eaf3f(0x18f)]===_0x3eaf3f(0x222))try{await setup[_0x3eaf3f(0x26a)](this,_0x3eaf3f(0x20e),![],![]),this[_0x3eaf3f(0x241)](_0x4f0a44[_0x3eaf3f(0x22b)],_0x4f0a44[_0x3eaf3f(0x18f)],{'success':!![],'message':'Gesendet'},_0x4f0a44[_0x3eaf3f(0x24b)]);}catch(_0x3e687f){this[_0x3eaf3f(0x22e)][_0x3eaf3f(0x229)](_0x3eaf3f(0x1d5)+_0x3e687f[_0x3eaf3f(0x170)]),this['sendTo'](_0x4f0a44['from'],_0x4f0a44['command'],{'success':![],'message':_0x3eaf3f(0x26d)+_0x3e687f[_0x3eaf3f(0x170)]},_0x4f0a44[_0x3eaf3f(0x24b)]);}}}}}}}}}}}}}}}}}async[a0_0x33a4b5(0x184)](){const _0x5949c9=a0_0x33a4b5;try{const _0x45acd5=await this[_0x5949c9(0x291)](setup['SYSTEM_DP_MODE']);_0x45acd5&&_0x45acd5[_0x5949c9(0x25e)]&&Object[_0x5949c9(0x25f)](setup[_0x5949c9(0x242)])[_0x5949c9(0x193)](_0x45acd5[_0x5949c9(0x25e)])?this[_0x5949c9(0x1ff)]=_0x45acd5[_0x5949c9(0x25e)]:(this[_0x5949c9(0x1ff)]=setup[_0x5949c9(0x242)][_0x5949c9(0x262)],await this[_0x5949c9(0x1ba)](setup[_0x5949c9(0x224)],{'val':setup[_0x5949c9(0x242)][_0x5949c9(0x262)],'ack':!![]}));}catch(_0xeae86b){this[_0x5949c9(0x1ff)]=setup[_0x5949c9(0x242)]['NORMAL'];}}async[a0_0x33a4b5(0x1fd)](){const _0xc024c6=a0_0x33a4b5;try{const _0x1cc0c2=this[_0xc024c6(0x1ad)][_0xc024c6(0x177)]||[];let _0x33cc5b=![];const _0x4d5c6c=[];for(const _0xf65ec2 of _0x1cc0c2){try{const _0x3d19ff=await this[_0xc024c6(0x1fa)](_0xf65ec2);_0x3d19ff&&(_0x3d19ff[_0xc024c6(0x25e)]===!![]||_0x3d19ff[_0xc024c6(0x25e)]===_0xc024c6(0x23f)||_0x3d19ff[_0xc024c6(0x25e)]===0x1)&&(_0x33cc5b=!![],_0x4d5c6c[_0xc024c6(0x201)](_0xf65ec2));}catch(_0x1996c5){}}return await this[_0xc024c6(0x1ba)](_0xc024c6(0x211),{'val':_0x4d5c6c['join'](',\x20'),'ack':!![]}),_0x33cc5b&&(this[_0xc024c6(0x1e8)]&&(this['log'][_0xc024c6(0x1e6)](_0xc024c6(0x1e4)),recorder[_0xc024c6(0x1a2)](this)),!this[_0xc024c6(0x1ca)]&&this[_0xc024c6(0x1ff)]===setup[_0xc024c6(0x242)]['NORMAL']&&await recorder[_0xc024c6(0x1b9)](this,!![])),_0x33cc5b;}catch(_0x21cca2){return![];}}async[a0_0x33a4b5(0x283)](){const _0x3affae=a0_0x33a4b5;this[_0x3affae(0x22e)]['debug'](_0x3affae(0x277)),await aiAgent[_0x3affae(0x25b)](this),this[_0x3affae(0x212)](),this[_0x3affae(0x22f)](),this[_0x3affae(0x20a)]();}async['checkSolarCondition'](){const _0x3c3172=a0_0x33a4b5,_0x11398d=['weatherunderground.0',_0x3c3172(0x280),_0x3c3172(0x18c)],_0x141705=[_0x3c3172(0x1ac),'Current.WeatherText',_0x3c3172(0x1b7)];for(const _0x55d9a of _0x11398d){for(const _0x28d3f4 of _0x141705){try{const _0x44856a=_0x55d9a+'.'+_0x28d3f4,_0xd8917=await this[_0x3c3172(0x1fa)](_0x44856a);if(_0xd8917&&_0xd8917[_0x3c3172(0x25e)]){const _0x22f2fc=String(_0xd8917[_0x3c3172(0x25e)])['toLowerCase']();if(_0x22f2fc['includes'](_0x3c3172(0x215))||_0x22f2fc[_0x3c3172(0x193)](_0x3c3172(0x1d0))||_0x22f2fc[_0x3c3172(0x193)]('klar')||_0x22f2fc[_0x3c3172(0x193)](_0x3c3172(0x190))||_0x22f2fc[_0x3c3172(0x193)](_0x3c3172(0x227)))return!![];}}catch(_0x594ef4){}}}return![];}['triggerGaitAnalysis'](){if(!this['isProVersion'])return;try{this['getState']('LTM.trainingData.sequences',(_0x291983,_0x421db4)=>{const _0x48a247=a0_0x188e;_0x421db4&&_0x421db4[_0x48a247(0x25e)]&&pythonBridge[_0x48a247(0x28d)](this,_0x48a247(0x1a5),{'sequences':JSON[_0x48a247(0x21a)](_0x421db4[_0x48a247(0x25e)])});});}catch(_0x1a0ca0){}}async['triggerEnergyPrediction'](){const _0xa4a5b0=a0_0x33a4b5;if(!this[_0xa4a5b0(0x1e7)])return;try{const _0x34fbce=await recorder[_0xa4a5b0(0x234)](this);if(_0x34fbce===null)return;const _0x2411f5={},_0x28729e={},_0x56bd98=this[_0xa4a5b0(0x1ad)]['devices']||[];for(const _0x123928 of _0x56bd98){if(_0x123928['type']==='temperature'&&_0x123928['location']){const _0x308be4=this[_0xa4a5b0(0x178)][_0x123928['id']];if(_0x308be4!==undefined)_0x2411f5[_0x123928[_0xa4a5b0(0x28a)]]=_0x308be4;if(_0x123928[_0xa4a5b0(0x1ec)])_0x28729e[_0x123928[_0xa4a5b0(0x28a)]]=!![];}}const _0x363e59=await this[_0xa4a5b0(0x189)]();let _0x3b7a27={};try{const _0x460004=await this[_0xa4a5b0(0x291)](_0xa4a5b0(0x1c8));if(_0x460004&&_0x460004[_0xa4a5b0(0x25e)])_0x3b7a27=JSON[_0xa4a5b0(0x21a)](_0x460004[_0xa4a5b0(0x25e)]);}catch(_0x3bd5d6){}Object[_0xa4a5b0(0x1de)](_0x2411f5)[_0xa4a5b0(0x1c3)]>0x0&&(pythonBridge['send'](this,'PREDICT_ENERGY',{'current_temps':_0x2411f5,'t_out':_0x34fbce,'is_sunny':_0x363e59,'solar_flags':_0x28729e,'warmup_targets':_0x3b7a27}),pythonBridge[_0xa4a5b0(0x28d)](this,_0xa4a5b0(0x1b0),{'current_temps':_0x2411f5,'t_out':_0x34fbce,'targets':{}}));}catch(_0x32f982){}}[a0_0x33a4b5(0x212)](){const _0x273669=a0_0x33a4b5;if(!this[_0x273669(0x1ed)]||this['rawEventLog'][_0x273669(0x1c3)]===0x0)return;const _0x2524dc=new Array(0x60)['fill'](0x0),_0x1382ec=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x273669(0x1ed)][_0x273669(0x1a0)](_0xb63cce=>{const _0x2ee71e=_0x273669,_0x1bd622=new Date(_0xb63cce[_0x2ee71e(0x29b)]);if(_0x1bd622['getTime']()>=_0x1382ec){const _0x2f974c=_0x1bd622['getHours'](),_0x2d15da=_0x1bd622[_0x2ee71e(0x237)](),_0x1214b4=_0x2f974c*0x4+Math[_0x2ee71e(0x252)](_0x2d15da/0xf);if(_0x1214b4>=0x0&&_0x1214b4<0x60)_0x2524dc[_0x1214b4]++;}}),this[_0x273669(0x1ba)](_0x273669(0x228),{'val':JSON[_0x273669(0x18b)](_0x2524dc),'ack':!![]});}['runPythonHealthCheck'](){const _0x3fe552=a0_0x33a4b5;if(!this[_0x3fe552(0x175)]||this[_0x3fe552(0x175)][_0x3fe552(0x1c3)]<0x2)return;const _0x5b9473=this['dailyDigests'][_0x3fe552(0x1cf)](_0x2179b9=>{const _0x495610=(_0x2179b9['activityLevel']||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x495610]||0x32;});pythonBridge['send'](this,_0x3fe552(0x2a0),{'values':_0x5b9473,'tag':'Activity-Level'});}async[a0_0x33a4b5(0x1c5)](_0x1d0679){const _0x3ad329=a0_0x33a4b5;if(_0x1d0679==null||typeof _0x1d0679!==_0x3ad329(0x29f))return;const _0x544d2f=Date[_0x3ad329(0x176)]();this[_0x3ad329(0x1b5)][_0x3ad329(0x201)]({'ts':_0x544d2f,'val':_0x1d0679}),this['pressureBuffer']=this[_0x3ad329(0x1b5)][_0x3ad329(0x255)](_0x41ac31=>_0x544d2f-_0x41ac31['ts']<0x1388);if(this[_0x3ad329(0x1e9)])return;if(this[_0x3ad329(0x1ad)][_0x3ad329(0x253)]){const _0x2ba26c=await this['getForeignStateAsync'](this['config'][_0x3ad329(0x253)]);if(_0x2ba26c&&!_0x2ba26c[_0x3ad329(0x25e)])return;}const _0x1ca612=this[_0x3ad329(0x1ad)][_0x3ad329(0x218)]||0.04;if(Math[_0x3ad329(0x1a1)](_0x1d0679)>=_0x1ca612){this[_0x3ad329(0x22e)][_0x3ad329(0x25d)](_0x3ad329(0x28f)+_0x1d0679+_0x3ad329(0x17c)+_0x1ca612+')'),await this[_0x3ad329(0x1ba)]('security.alarm_triggered',{'val':!![],'ack':!![]});const _0x9e33fc=this['isPresent'];_0x9e33fc?(this['log'][_0x3ad329(0x1e6)]('[Infrasound]\x20ðŸŸ¡\x20Debug-Mode:\x20Alarm\x20detected\x20but\x20suppressed\x20because\x20presence=true.'),this[_0x3ad329(0x17f)](_0x1d0679,'INTERNAL')):(this[_0x3ad329(0x17f)](_0x1d0679,_0x3ad329(0x27f)),this['sendNotification']('ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20'+_0x1d0679+_0x3ad329(0x204))),this[_0x3ad329(0x1e9)]=!![],setTimeout(()=>{const _0x11a611=_0x3ad329;this[_0x11a611(0x1e9)]=![];},0x2710);}}async[a0_0x33a4b5(0x17f)](_0x2f1a79,_0x5bf59b=a0_0x33a4b5(0x27f)){const _0x1bea6e=a0_0x33a4b5,_0x68a102=Date[_0x1bea6e(0x176)](),_0x274ca3=this[_0x1bea6e(0x1ad)][_0x1bea6e(0x188)]||[];setTimeout(async()=>{const _0x37c206=_0x1bea6e;let _0x29a578=null,_0x11718a=_0x37c206(0x259);const _0xb56b9c=[],_0x53ee67=_0x274ca3[_0x37c206(0x255)](_0x5062fe=>_0x5062fe[_0x37c206(0x1c9)]&&(_0x5062fe[_0x37c206(0x1c9)][_0x37c206(0x193)]('window')||_0x5062fe['type'][_0x37c206(0x193)]('door')||_0x5062fe[_0x37c206(0x1c9)][_0x37c206(0x193)](_0x37c206(0x1fc))||_0x5062fe[_0x37c206(0x1c9)][_0x37c206(0x193)]('reed'))||_0x5062fe[_0x37c206(0x281)]&&(_0x5062fe['role'][_0x37c206(0x193)](_0x37c206(0x191))||_0x5062fe['role'][_0x37c206(0x193)]('sensor.door')));for(const _0x5d3233 of _0x53ee67){try{const _0x435d9a=await this[_0x37c206(0x1fa)](_0x5d3233['id']);if(_0x435d9a){if(_0x435d9a['ts']>=_0x68a102-0x7d0){_0x29a578=_0x5d3233[_0x37c206(0x16a)]||_0x5d3233['id'],_0x11718a='ErklÃ¤rt\x20durch:\x20'+_0x29a578;break;}}}catch(_0x21589f){}}const _0x108081={'timestamp':_0x68a102,'pressure':_0x2f1a79,'isMatch':!!_0x29a578,'explanation':_0x11718a,'type':_0x5bf59b};await this[_0x37c206(0x1b3)](_0x108081),this[_0x37c206(0x22e)]['info'](_0x37c206(0x1d8)+(!!_0x29a578?_0x37c206(0x1ce):_0x37c206(0x249)));},0x1388);}async[a0_0x33a4b5(0x296)](_0x35a18d){const _0x58fb4b=a0_0x33a4b5,_0x4644e2=Date['now'](),_0x4f2df6=_0x35a18d[_0x58fb4b(0x16a)]||_0x35a18d['id'][_0x58fb4b(0x2a4)]('.')[_0x58fb4b(0x246)]();let _0x3896e0=0x0;setTimeout(async()=>{const _0x5445b5=_0x58fb4b;this[_0x5445b5(0x1b5)][_0x5445b5(0x1a0)](_0x318273=>{const _0x469156=_0x5445b5;_0x318273['ts']>=_0x4644e2-0xfa0&&_0x318273['ts']<=_0x4644e2+0x3e8&&(Math[_0x469156(0x1a1)](_0x318273[_0x469156(0x25e)])>Math[_0x469156(0x1a1)](_0x3896e0)&&(_0x3896e0=_0x318273['val']));});const _0x5c5a1f=this[_0x5445b5(0x1ad)]['infrasoundThreshold']||0.04,_0x37b2f2=Math[_0x5445b5(0x1a1)](_0x3896e0)>=_0x5c5a1f,_0x135b40={'timestamp':_0x4644e2,'pressure':_0x3896e0,'isMatch':_0x37b2f2,'explanation':_0x5445b5(0x1c6)+_0x4f2df6,'type':_0x5445b5(0x20c)};await this[_0x5445b5(0x1b3)](_0x135b40),this[_0x5445b5(0x22e)][_0x5445b5(0x174)](_0x5445b5(0x265)+_0x4f2df6+_0x5445b5(0x22c)+_0x3896e0[_0x5445b5(0x207)](0x4)+_0x5445b5(0x1fe)+_0x5c5a1f+')');},0x1f4);}async[a0_0x33a4b5(0x1b3)](_0x20dc82){const _0x98c45f=a0_0x33a4b5;try{const _0x23aa49=await this['getStateAsync']('analysis.security.infrasoundLog');let _0x2a1cb1=[];if(_0x23aa49&&_0x23aa49[_0x98c45f(0x25e)])_0x2a1cb1=JSON['parse'](_0x23aa49[_0x98c45f(0x25e)]);_0x2a1cb1['unshift'](_0x20dc82);if(_0x2a1cb1[_0x98c45f(0x1c3)]>0x14)_0x2a1cb1=_0x2a1cb1['slice'](0x0,0x14);await this[_0x98c45f(0x1ba)]('analysis.security.infrasoundLog',{'val':JSON[_0x98c45f(0x18b)](_0x2a1cb1),'ack':!![]});}catch(_0x3dad7a){this[_0x98c45f(0x22e)][_0x98c45f(0x229)](_0x98c45f(0x16c)+_0x3dad7a[_0x98c45f(0x170)]);}}[a0_0x33a4b5(0x26a)](_0x273e28){const _0x508a93=a0_0x33a4b5;this[_0x508a93(0x1ad)][_0x508a93(0x1f1)]&&this[_0x508a93(0x1ad)][_0x508a93(0x1f0)]&&this[_0x508a93(0x241)](this[_0x508a93(0x1ad)][_0x508a93(0x1f0)],_0x508a93(0x28d),{'message':_0x273e28,'title':_0x508a93(0x1f6),'priority':0x1}),this[_0x508a93(0x1ad)][_0x508a93(0x247)]&&this[_0x508a93(0x1ad)]['notifyTelegramInstance']&&this[_0x508a93(0x241)](this[_0x508a93(0x1ad)]['notifyTelegramInstance'],_0x508a93(0x28d),{'text':_0x273e28});}}function a0_0x1257(){const _0xa270e4=['Forensic\x20Infrasound\x20Log','./lib/setup','infrasoundThreshold','Verbunden','parse','createAllObjects','analysis.energy.mpcActive','models/gemini-flash-latest','updateLocation','communicate.request','open','checkCalendarTriggers','testNotification','analysis.energy.insulationScore','SYSTEM_DP_MODE','bind','PINN\x20AI\x20Forecast','heiter','analysis.health.todayVector','error','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','from','\x20opened.\x20Peak\x20Pressure:\x20','checkThermostats','log','triggerGaitAnalysis','testApiKey','(((.+)+)+)+$','healthTrendInterval','cleanupGhostInterventions','getOutsideTemperatureNumeric','LTM.trainingData.thermodynamics','LTM.triggerDailyDigest','getMinutes','Verbindung\x20erfolgreich!','scanForDevices','unload','checkAndInstall','refreshCalendar','analysis.topology.structure','analysis.health.gaitSensors','online','subscribeForeignStatesAsync','sendTo','SYSTEM_MODES','string','minDaysForBaseline','inactivityThresholdHours','pop','notifyTelegramEnabled','âš ï¸\x20Graph-Brain:\x20No\x20training\x20sequences\x20found\x20in\x20LTM.','ANOMALY\x20(Real\x20Threat?)','VACATION','callback','getEnums','Sec-Training\x20started...','Reinforcement\x20Learning\x20Penalties','3557336AUHbKC','startSystem','toString','floor','infrasoundArmingId','analysis.trigger','filter','some','LTM.trainingData.sequences','triggerBriefing','Keine\x20Sensor-AktivitÃ¤t','runPythonHealthCheck','runGeminiAnalysis','.data.table','warn','val','values','subscribeStates','analysisHistory','NORMAL','analysis.energy.activeEnforcements','[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20','[Calibration]\x20Window\x20','search','setObjectNotExistsAsync','instance','{\x22default\x22:\x2021}','sendNotification','analysis.training.triggerSecurity','value','Fehler:\x20','onReady','ack','geminiModel','startService','analysis.training.triggerComfort','application/json','\x20sequences...','main','\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','createDailyDigest','Simulation\x20durch\x20Admin\x20(Test)','Kein\x20API\x20Key\x20Ã¼bergeben','entries','getOverviewData','dependencyInstallInProgress','add','ALARM','accuweather.0','role','onUnload','runAutopilot','Gemini\x20AI\x20initialized.','initHistory','analysis.training.triggerEnergy','Guest\x20Mode','fill','SET_TOPOLOGY','location','json','stateChange','send','analysis.automation.targetId','[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20','sendMorningBriefing','getStateAsync','sort','subscribeForeignStates','Keine\x20Antwort\x20von\x20Gemini','geminiApiKey','analyzeWindowOpening','analysis.training.triggerTopology','\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.','updateSchedulePreview','Kein\x20Kalender-Adapter','timestamp','TRAIN_SECURITY','checkLicense','resetRLPenalty','number','ANALYZE_TREND','automation.triggerAction','driftAnalysisTimer','analysisTimer','split','./lib/installer','version','./lib/topology','./lib/dead_man','analysis.automation.description','name','analysis.triggerBriefing','[Forensics]\x20Save\x20failed:\x20','Standard','Lernphase\x20(','infrasoundSensorId','message','lastTrackerEventTime','genAI','./lib/scanner','debug','dailyDigests','now','presenceDevices','sensorLastValues','Warm-Up\x20Target\x20Temps\x20(JSON)','generateContent','895810rQZAFB','\x20hPa\x20(Limit:\x20','constructor','setupBriefingScheduler','triggerInfrasoundCorrelation','analysis.energy.warmupSources','initZombies','scanDevices','stopService','loadSystemMode','22QRcIKA','getLtmData','enum.rooms.*','devices','checkSolarCondition','enum.functions.*','stringify','daswetter.0','analysis.energy.warmupTimes','./lib/recorder','command','clear','sensor.window','ltmJob','includes','runBaselineDriftAnalysis','matrix','ready','sources','5556gFNMdW','common','bootTime','1416667mUSNCv','protectAiMemory','analysis.automation.targetValue',')\x20-\x20Phase\x20D\x20(Forensic\x20Calibration)','Kein\x20Wetter-Adapter','forEach','abs','abortExitTimer','setState','minutes_safe','ANALYZE_GAIT','@iobroker/adapter-core','updateTopology','analysis.automation.autoApply','guest','toLowerCase','93873nhmrcN','forecast.current.weather','config','endsWith','enum','OPTIMIZE_ENERGY','analysis.energy.ventilationAlerts','analysis.automation.triggerAction','appendToLog','find','pressureBuffer','trackerHeartbeat','NextHours.Location_1.Day_1.current.symbol_desc','43412eUnqNP','setPresence','setStateAsync','times','analysis.energy.rlPenalties','getForeignObjectsAsync','analysis.energy.pinnForecast','text','analysis.automation.patternDetected','.system.mode','calendarName','length','modeResetJob','handleInfrasound','Fenster\x20geÃ¶ffnet:\x20','ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20','analysis.energy.warmupTargets','type','isPresent','eventHistory','briefingJob','LTM.rawEventLog','MATCH\x20(False\x20Positive)','map','sunny','Graph-Brain\x20Train\x20Error:\x20','Daten\x20nicht\x20verfÃ¼gbar','processSensorEvent','notifyTelegramInstance','Notification\x20Test\x20Failed:\x20','52092KTmQYx','systemConfig','[Forensics]\x20Infrasound\x20Event\x20correlated:\x20','memoryCache','isGracePeriodActive','Sensors\x20used\x20for\x20Gait\x20Analysis','dismissAutomation','LTM.dailyDigests','keys','analysis.health.activityTrend','monitorEnforcements','TRAIN_TOPOLOGY','state','infrasoundEnabled','WiFi\x20Presence\x20detected.','setupDriftAnalysisScheduler','info','isProVersion','exitTimer','infrasoundLocked','analysis.health.gaitDebug','exports','isSolar','rawEventLog','object','Active\x20Ventilation\x20Alerts','notifyPushoverInstance','notifyPushoverEnabled','exitGraceTimer','TRAIN_HEALTH','window','Memory\x20Hydration\x20Failed:\x20','Nuukanni\x20Security','analysis.security.learningStatus','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','Gait\x20Speed\x20Calculation\x20Proof','getForeignStateAsync','Test','magnet','checkWifiPresence','\x20hPa\x20(Threshold:\x20','currentSystemMode','analysis.training.triggerHealth','push','TRAIN_COMFORT','calendarInstance','\x20hPa.\x20Einbruch\x20wahrscheinlich.','cogni-living\x20adapter\x20starting\x20(v','General\x20Activity\x20Trend\x20(%)','toFixed','Party\x20Mode','setHours','triggerEnergyPrediction','ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).','CALIB','@google/generative-ai','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','apply','./lib/python_bridge','system.presenceWho','updateHealthVector','onMessage','_calName','sonn'];a0_0x1257=function(){return _0xa270e4;};return a0_0x1257();}if(require[a0_0x33a4b5(0x275)]!==module)module[a0_0x33a4b5(0x1eb)]=_0x2365ad=>new CogniLiving(_0x2365ad);else new CogniLiving();