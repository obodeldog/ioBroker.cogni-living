const a0_0x716c8=a0_0x3687;function a0_0x3687(_0xfbe77c,_0x50808f){const _0x1f5909=a0_0xba75();return a0_0x3687=function(_0x3c8338,_0x3a2d6e){_0x3c8338=_0x3c8338-0xf3;let _0xba7569=_0x1f5909[_0x3c8338];return _0xba7569;},a0_0x3687(_0xfbe77c,_0x50808f);}(function(_0x16d1a1,_0xebc8){const _0x251f5d=a0_0x3687,_0x55ac31=_0x16d1a1();while(!![]){try{const _0x17cebd=parseInt(_0x251f5d(0x1c2))/0x1+parseInt(_0x251f5d(0x1a7))/0x2+-parseInt(_0x251f5d(0x156))/0x3*(-parseInt(_0x251f5d(0x17e))/0x4)+parseInt(_0x251f5d(0xff))/0x5+parseInt(_0x251f5d(0x1d5))/0x6*(-parseInt(_0x251f5d(0x16b))/0x7)+-parseInt(_0x251f5d(0x111))/0x8*(-parseInt(_0x251f5d(0x190))/0x9)+-parseInt(_0x251f5d(0x1a6))/0xa;if(_0x17cebd===_0xebc8)break;else _0x55ac31['push'](_0x55ac31['shift']());}catch(_0x5a9b57){_0x55ac31['push'](_0x55ac31['shift']());}}}(a0_0xba75,0x61af1));const a0_0x3a2d6e=(function(){let _0x2bc60d=!![];return function(_0x50752a,_0x58f59a){const _0x38610e=_0x2bc60d?function(){const _0x16594f=a0_0x3687;if(_0x58f59a){const _0x391428=_0x58f59a[_0x16594f(0x1b9)](_0x50752a,arguments);return _0x58f59a=null,_0x391428;}}:function(){};return _0x2bc60d=![],_0x38610e;};}()),a0_0x3c8338=a0_0x3a2d6e(this,function(){const _0x2dea99=a0_0x3687;return a0_0x3c8338[_0x2dea99(0x176)]()[_0x2dea99(0x1a8)](_0x2dea99(0x1ad))[_0x2dea99(0x176)]()[_0x2dea99(0x174)](a0_0x3c8338)[_0x2dea99(0x1a8)](_0x2dea99(0x1ad));});a0_0x3c8338();'use strict';const utils=require(a0_0x716c8(0x179)),{GoogleGenerativeAI}=require(a0_0x716c8(0x114)),installer=require(a0_0x716c8(0x11e)),scanner=require(a0_0x716c8(0x1c8)),schedulers=require(a0_0x716c8(0x130)),topology=require('./lib/topology'),setup=require('./lib/setup'),recorder=require(a0_0x716c8(0x140)),pythonBridge=require(a0_0x716c8(0x127)),aiAgent=require(a0_0x716c8(0x1ae)),deadMan=require(a0_0x716c8(0x173)),automation=require(a0_0x716c8(0x1a2)),GEMINI_MODEL='models/gemini-flash-latest',ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x716c8(0x166)]{constructor(_0x31edda){const _0x41cb67=a0_0x716c8;super({..._0x31edda,'name':_0x41cb67(0x15c)}),this[_0x41cb67(0x121)]=[],this[_0x41cb67(0x16c)]=[],this['rawEventLog']=[],this[_0x41cb67(0x177)]=[],this[_0x41cb67(0x12e)]={},this[_0x41cb67(0x13f)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this['exitTimer']=null,this[_0x41cb67(0x1da)]=null,this[_0x41cb67(0x18c)]=![],this[_0x41cb67(0x11f)]=null,this[_0x41cb67(0x136)]=null,this['currentSystemMode']=setup[_0x41cb67(0x1df)][_0x41cb67(0x14f)],this['isProVersion']=![],this[_0x41cb67(0x143)]=![],this['analysisTimer']=null,this['ltmJob']=null,this[_0x41cb67(0x17a)]=null,this[_0x41cb67(0x1ba)]=null,this[_0x41cb67(0x1d6)]=null,this[_0x41cb67(0x1de)]=![],this['on']('ready',this[_0x41cb67(0x19c)][_0x41cb67(0x172)](this)),this['on']('stateChange',this['onStateChange'][_0x41cb67(0x172)](this)),this['on'](_0x41cb67(0x195),this[_0x41cb67(0x10d)][_0x41cb67(0x172)](this)),this['on'](_0x41cb67(0x1cf),this[_0x41cb67(0x1e0)]['bind'](this));}async[a0_0x716c8(0x19c)](){const _0x34d377=a0_0x716c8;this[_0x34d377(0x15b)]['info'](_0x34d377(0x13e)+this[_0x34d377(0x109)]+_0x34d377(0x187));if(!installer['checkAndInstall'](this,()=>this[_0x34d377(0x103)]()))return;}async['startSystem'](){const _0x463042=a0_0x716c8;await setup[_0x463042(0x129)](this);try{this[_0x463042(0x10b)]=await setup['checkLicense'](this['config'][_0x463042(0x14d)]);}catch(_0x27fd09){}if(!this[_0x463042(0x146)]['inactivityThresholdHours']||this[_0x463042(0x146)][_0x463042(0x1c4)]<0.1)this[_0x463042(0x146)][_0x463042(0x1c4)]=0xc;await setup[_0x463042(0x1ac)](this),await setup[_0x463042(0xf9)](this);if(this[_0x463042(0x146)][_0x463042(0x1b6)])try{this[_0x463042(0x11f)]=new GoogleGenerativeAI(this[_0x463042(0x146)]['geminiApiKey']),this[_0x463042(0x136)]=this[_0x463042(0x11f)][_0x463042(0x126)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x463042(0x1b4)}}),this[_0x463042(0x15b)][_0x463042(0x1e5)]('Gemini\x20AI\x20initialized.');}catch(_0x107b0c){this[_0x463042(0x15b)][_0x463042(0x183)](_0x463042(0x158)+_0x107b0c[_0x463042(0x1cf)]);}await setup[_0x463042(0x170)](this),await this[_0x463042(0x196)](),await this[_0x463042(0x16e)](_0x463042(0x165),{'type':_0x463042(0x116),'common':{'name':'PINN\x20AI\x20Forecast','type':'string','role':_0x463042(0x101),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync']('analysis.energy.ventilationAlerts',{'type':_0x463042(0x116),'common':{'name':'Active\x20Ventilation\x20Alerts','type':_0x463042(0x132),'role':_0x463042(0x101),'read':!![],'write':![]},'native':{}}),await this[_0x463042(0x16e)]('analysis.energy.warmupTimes',{'type':_0x463042(0x116),'common':{'name':_0x463042(0x115),'type':_0x463042(0x132),'role':_0x463042(0x101),'read':!![],'write':![]},'native':{}});try{const _0x48d92c=await this[_0x463042(0x14a)](_0x463042(0x1dc));if(_0x48d92c&&_0x48d92c[_0x463042(0x1e4)])this['rawEventLog']=JSON[_0x463042(0x1b1)](_0x48d92c[_0x463042(0x1e4)]);}catch(_0x38cdd5){this[_0x463042(0x18e)]=[];}try{const _0x597cba=await this[_0x463042(0x14a)](_0x463042(0x107));if(_0x597cba&&_0x597cba[_0x463042(0x1e4)])this[_0x463042(0x177)]=JSON[_0x463042(0x1b1)](_0x597cba[_0x463042(0x1e4)]);}catch(_0x9a38db){this[_0x463042(0x177)]=[];}const _0xf33b55=this[_0x463042(0x177)][_0x463042(0x133)]>=(this['config'][_0x463042(0x19a)]||0x7)?'Aktiv\x20('+this[_0x463042(0x177)][_0x463042(0x133)]+_0x463042(0x1ea):_0x463042(0x164)+this[_0x463042(0x177)]['length']+'/'+(this[_0x463042(0x146)]['minDaysForBaseline']||0x7)+')';await this[_0x463042(0x171)](_0x463042(0x1e7),{'val':_0xf33b55,'ack':!![]}),this[_0x463042(0x1d1)](_0x463042(0x110)),this[_0x463042(0x1d1)]('LTM.triggerDailyDigest'),this[_0x463042(0x1d1)](_0x463042(0x17f)),this[_0x463042(0x1d1)](_0x463042(0x135)),this[_0x463042(0x1d1)](_0x463042(0x1a9)),this['subscribeStates'](_0x463042(0x1d9)),this[_0x463042(0x1d1)](_0x463042(0x184)),this[_0x463042(0x1d1)](_0x463042(0x150)),this[_0x463042(0x1d1)]('analysis.training.triggerEnergy'),this[_0x463042(0x1d1)](_0x463042(0x145)),this[_0x463042(0x1d1)]('analysis.training.triggerTopology'),this[_0x463042(0x1d1)]('analysis.energy.mpcActive');const _0x219237=this[_0x463042(0x146)][_0x463042(0x1a5)];if(_0x219237)for(const _0x2ca741 of _0x219237){await this['subscribeForeignStatesAsync'](_0x2ca741['id']);}const _0x364da6=this['config']['presenceDevices'];if(_0x364da6)for(const _0x2dffad of _0x364da6){await this[_0x463042(0x1c1)](_0x2dffad);}if(this[_0x463042(0x146)]['notifyTelegramEnabled']&&this[_0x463042(0x146)][_0x463042(0x18f)])await this['subscribeForeignStatesAsync'](this['config'][_0x463042(0x18f)]+_0x463042(0x15e));setTimeout(()=>this[_0x463042(0x14e)](),0x1388);if(this[_0x463042(0xf3)])clearInterval(this[_0x463042(0xf3)]);const _0x4c8150=this[_0x463042(0x146)][_0x463042(0x13b)]||0xf;_0x4c8150>0x0&&(this['analysisTimer']=setInterval(()=>{this['runAutopilot']();},_0x4c8150*0x3c*0x3e8)),schedulers[_0x463042(0x1c9)](this,()=>aiAgent['createDailyDigest'](this,pythonBridge)),schedulers[_0x463042(0x1ca)](this),schedulers['setupDriftAnalysisScheduler'](this,()=>aiAgent['runBaselineDriftAnalysis'](this)),schedulers[_0x463042(0x161)](this,()=>aiAgent[_0x463042(0x1ce)](this)),pythonBridge[_0x463042(0x162)](this,installer[_0x463042(0x1c7)]),setTimeout(async()=>{const _0x3fd7bb=_0x463042;await topology[_0x3fd7bb(0x138)](this);try{const _0x351741=await this[_0x3fd7bb(0x14a)](_0x3fd7bb(0x105));if(_0x351741&&_0x351741[_0x3fd7bb(0x1e4)])pythonBridge[_0x3fd7bb(0x197)](this,_0x3fd7bb(0x104),JSON[_0x3fd7bb(0x1b1)](_0x351741[_0x3fd7bb(0x1e4)]));}catch(_0x372b85){}this[_0x3fd7bb(0x1b0)](),this[_0x3fd7bb(0x18a)](),this['triggerEnergyPrediction'](),this[_0x3fd7bb(0x186)]();},0x1388);}['onUnload'](_0x30b224){const _0xda6bb=a0_0x716c8;if(this[_0xda6bb(0xf3)])clearInterval(this[_0xda6bb(0xf3)]);if(this[_0xda6bb(0x1ba)])clearInterval(this['driftAnalysisTimer']);if(this[_0xda6bb(0x11c)])this[_0xda6bb(0x11c)][_0xda6bb(0x1e8)]();if(this[_0xda6bb(0x17a)])this[_0xda6bb(0x17a)][_0xda6bb(0x1e8)]();if(this[_0xda6bb(0x1d6)])this[_0xda6bb(0x1d6)][_0xda6bb(0x1e8)]();recorder['abortExitTimer'](this),pythonBridge['stopService'](this),_0x30b224();}async[a0_0x716c8(0xf6)](_0xa03397,_0x25ad5e){const _0xf89b2a=a0_0x716c8;if(!_0x25ad5e||this[_0xf89b2a(0x1de)])return;if(_0xa03397[_0xf89b2a(0x178)](_0xf89b2a(0x12f))&&_0xa03397[_0xf89b2a(0x144)](_0xf89b2a(0x1db))&&_0x25ad5e[_0xf89b2a(0x1e4)])return;if(_0xa03397===this[_0xf89b2a(0x10e)]+_0xf89b2a(0x122)){if(_0x25ad5e[_0xf89b2a(0x1e4)]&&Object[_0xf89b2a(0x113)](setup[_0xf89b2a(0x1df)])[_0xf89b2a(0x178)](_0x25ad5e['val'])){this[_0xf89b2a(0x106)]=_0x25ad5e[_0xf89b2a(0x1e4)];if(_0x25ad5e[_0xf89b2a(0x1e4)]===setup[_0xf89b2a(0x1df)]['VACATION'])await recorder['setPresence'](this,![]);else await recorder['setPresence'](this,!![]);}if(!_0x25ad5e['ack'])this[_0xf89b2a(0x1eb)](_0xa03397,{'val':this[_0xf89b2a(0x106)],'ack':!![]});return;}if(!_0x25ad5e[_0xf89b2a(0x147)]){_0xa03397[_0xf89b2a(0x178)]('analysis.trigger')&&_0x25ad5e['val']&&(this['setState'](_0xa03397,{'val':![],'ack':!![]}),aiAgent[_0xf89b2a(0x11b)](this));if(_0xa03397[_0xf89b2a(0x178)](_0xf89b2a(0x16d))&&_0x25ad5e[_0xf89b2a(0x1e4)]){this['setState'](_0xa03397,{'val':![],'ack':!![]});if(this[_0xf89b2a(0x10b)])aiAgent[_0xf89b2a(0x141)](this,pythonBridge);}_0xa03397[_0xf89b2a(0x178)](_0xf89b2a(0x198))&&_0x25ad5e[_0xf89b2a(0x1e4)]&&(this[_0xf89b2a(0x1eb)](_0xa03397,{'val':![],'ack':!![]}),aiAgent[_0xf89b2a(0x1ce)](this));_0xa03397[_0xf89b2a(0x178)](_0xf89b2a(0x1b7))&&_0x25ad5e['val']&&(this[_0xf89b2a(0x1eb)](_0xa03397,{'val':![],'ack':!![]}),aiAgent[_0xf89b2a(0x163)](this));if(_0xa03397[_0xf89b2a(0x178)]('analysis.training.triggerSecurity')&&_0x25ad5e['val']){this[_0xf89b2a(0x1eb)](_0xa03397,{'val':![],'ack':!![]});if(this[_0xf89b2a(0x10b)])try{const _0x32f100=await this[_0xf89b2a(0x14a)](_0xf89b2a(0x181));if(_0x32f100&&_0x32f100[_0xf89b2a(0x1e4)]){const _0xebff7=JSON[_0xf89b2a(0x1b1)](_0x32f100[_0xf89b2a(0x1e4)]);this[_0xf89b2a(0x171)](_0xf89b2a(0x1cc),{'val':_0xf89b2a(0x137),'ack':!![]}),pythonBridge[_0xf89b2a(0x197)](this,_0xf89b2a(0xfe),{'sequences':_0xebff7});}}catch(_0x35d295){}}if(_0xa03397[_0xf89b2a(0x178)]('analysis.training.triggerHealth')&&_0x25ad5e[_0xf89b2a(0x1e4)]){this[_0xf89b2a(0x1eb)](_0xa03397,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x418354=await this[_0xf89b2a(0x14a)](_0xf89b2a(0x107));if(_0x418354&&_0x418354[_0xf89b2a(0x1e4)])pythonBridge[_0xf89b2a(0x197)](this,'TRAIN_HEALTH',{'digests':JSON[_0xf89b2a(0x1b1)](_0x418354['val'])});}catch(_0x6094de){}}if(_0xa03397[_0xf89b2a(0x178)]('analysis.training.triggerEnergy')&&_0x25ad5e[_0xf89b2a(0x1e4)]){this['setState'](_0xa03397,{'val':![],'ack':!![]});if(this[_0xf89b2a(0x10b)])try{const _0x5a2e25=await this['getStateAsync'](_0xf89b2a(0x19e));if(_0x5a2e25&&_0x5a2e25[_0xf89b2a(0x1e4)])pythonBridge[_0xf89b2a(0x197)](this,'TRAIN_ENERGY',{'points':JSON['parse'](_0x5a2e25[_0xf89b2a(0x1e4)])});}catch(_0x1c329e){}}if(_0xa03397[_0xf89b2a(0x178)](_0xf89b2a(0x145))&&_0x25ad5e['val']){this[_0xf89b2a(0x1eb)](_0xa03397,{'val':![],'ack':!![]});if(this[_0xf89b2a(0x10b)])try{const _0x177405=await this[_0xf89b2a(0x14a)]('LTM.rawEventLog');if(_0x177405&&_0x177405[_0xf89b2a(0x1e4)])pythonBridge[_0xf89b2a(0x197)](this,'TRAIN_COMFORT',{'events':JSON[_0xf89b2a(0x1b1)](_0x177405['val'])});}catch(_0x54ab66){}}_0xa03397[_0xf89b2a(0x178)](_0xf89b2a(0x117))&&_0x25ad5e[_0xf89b2a(0x1e4)]&&(this[_0xf89b2a(0x1eb)](_0xa03397,{'val':![],'ack':!![]}),topology[_0xf89b2a(0x138)](this));return;}if(this[_0xf89b2a(0x146)]['presenceDevices']&&this[_0xf89b2a(0x146)][_0xf89b2a(0x1a3)][_0xf89b2a(0x178)](_0xa03397)){await this[_0xf89b2a(0x14e)]();return;}const _0x6bdeb6=(this[_0xf89b2a(0x146)][_0xf89b2a(0x1a5)]||[])[_0xf89b2a(0x123)](_0x1259b4=>_0x1259b4['id']===_0xa03397);if(_0x6bdeb6){const _0x468433=await recorder[_0xf89b2a(0x10a)](this,_0xa03397,_0x25ad5e,_0x6bdeb6);_0x468433&&_0x468433[_0xf89b2a(0x112)]===_0xf89b2a(0x11a)&&_0x468433[_0xf89b2a(0x1bf)]&&this[_0xf89b2a(0x10b)]&&deadMan[_0xf89b2a(0x16a)](this,_0x468433[_0xf89b2a(0x1bf)]);}}async[a0_0x716c8(0x1e0)](_0x95faf7){const _0xf17996=a0_0x716c8;if(typeof _0x95faf7==='object'&&_0x95faf7[_0xf17996(0x1cf)]){if(_0x95faf7[_0xf17996(0xfd)]===_0xf17996(0x1e1))try{const _0x2ec311=await automation['scanThermostats'](this);this['sendTo'](_0x95faf7[_0xf17996(0x189)],_0x95faf7[_0xf17996(0xfd)],{'success':!![],'results':_0x2ec311},_0x95faf7[_0xf17996(0x1dd)]);}catch(_0x21313d){this[_0xf17996(0x1d0)](_0x95faf7[_0xf17996(0x189)],_0x95faf7[_0xf17996(0xfd)],{'success':![],'error':_0x21313d[_0xf17996(0x1cf)]},_0x95faf7['callback']);}else{if(_0x95faf7[_0xf17996(0xfd)]===_0xf17996(0x15a))try{const {current_temps:_0x4b682c,t_out:_0x4b5aac,targets:_0x472f75,t_forecast:_0x4860c5}=_0x95faf7[_0xf17996(0x1cf)],_0x507ad7=[];let _0x9ec8e8={};try{const _0x48a826=await this[_0xf17996(0x14a)](_0xf17996(0x151));if(_0x48a826&&_0x48a826[_0xf17996(0x1e4)]){const _0x50778=JSON['parse'](_0x48a826['val']);_0x9ec8e8=_0x50778['scores']||_0x50778;}}catch(_0x4b7880){}const _0x27f644=_0x4860c5!==undefined&&_0x4860c5!==null?(_0x4b5aac+_0x4860c5)/0x2:_0x4b5aac;for(const [_0x4e9218,_0x5aae31]of Object[_0xf17996(0x1d2)](_0x4b682c)){const _0x492b70=_0x472f75[_0x4e9218]||0x15;if(_0x5aae31<=_0x492b70)continue;let _0x40d923=_0x9ec8e8[_0x4e9218]||-0.5;if(_0x40d923>=0x0)_0x40d923=-0.5;const _0x51d5b1=Math[_0xf17996(0x19f)](_0x40d923),_0x245fb2=_0x5aae31-_0x492b70;let _0x2c6173=Math['floor'](_0x245fb2/_0x51d5b1*0x3c);const _0x13d73d=_0x5aae31-_0x4b5aac,_0x164168=_0x5aae31-_0x27f644;if(_0x164168!==0x0&&_0x13d73d!==0x0){const _0x3deaac=_0x13d73d/_0x164168;_0x2c6173=Math[_0xf17996(0x1b3)](_0x2c6173*_0x3deaac);}if(_0x2c6173>0xf){if(_0x2c6173>0xf0)_0x2c6173=0xf0;_0x507ad7[_0xf17996(0x1c3)]({'room':_0x4e9218,'minutes_safe':_0x2c6173,'target':_0x492b70,'current':_0x5aae31,'savings_msg':_0xf17996(0x1a4)+_0x2c6173+_0xf17996(0x1e3)});}}_0x507ad7[_0xf17996(0x119)]((_0x37ed8e,_0x3eb8b7)=>_0x3eb8b7[_0xf17996(0x1af)]-_0x37ed8e[_0xf17996(0x1af)]),this['sendTo'](_0x95faf7[_0xf17996(0x189)],_0x95faf7['command'],{'success':!![],'proposals':_0x507ad7},_0x95faf7[_0xf17996(0x1dd)]);}catch(_0x476238){this[_0xf17996(0x1d0)](_0x95faf7[_0xf17996(0x189)],_0x95faf7['command'],{'success':![],'error':_0x476238[_0xf17996(0x1cf)]},_0x95faf7[_0xf17996(0x1dd)]);}else{if(_0x95faf7[_0xf17996(0xfd)]==='dismissAutomation')await this[_0xf17996(0x171)](_0xf17996(0x13a),{'val':![],'ack':!![]}),await this[_0xf17996(0x171)]('analysis.automation.description',{'val':'','ack':!![]}),await this['setStateAsync'](_0xf17996(0x17d),{'val':'','ack':!![]}),this[_0xf17996(0x1d0)](_0x95faf7[_0xf17996(0x189)],_0x95faf7[_0xf17996(0xfd)],{'success':!![]},_0x95faf7[_0xf17996(0x1dd)]);else{if(_0x95faf7[_0xf17996(0xfd)]===_0xf17996(0x159)){const {targetId:_0x281117,targetValue:_0x546463}=_0x95faf7[_0xf17996(0x1cf)];await this[_0xf17996(0x171)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0xf17996(0x171)]('analysis.automation.description',{'val':_0xf17996(0xf4),'ack':!![]}),await this[_0xf17996(0x171)](_0xf17996(0x17d),{'val':_0x281117,'ack':!![]}),await this[_0xf17996(0x171)](_0xf17996(0x12b),{'val':String(_0x546463),'ack':!![]}),this[_0xf17996(0x1d0)](_0x95faf7['from'],_0x95faf7['command'],{'success':!![]},_0x95faf7[_0xf17996(0x1dd)]);}else{if(_0x95faf7['command']===_0xf17996(0x160))try{const _0x3fd753=_0x95faf7[_0xf17996(0x1cf)][_0xf17996(0x124)];if(!_0x3fd753)throw new Error('Kein\x20API\x20Key\x20Ã¼bergeben');const _0x3bc4fc=new GoogleGenerativeAI(_0x3fd753),_0x46977f=_0x3bc4fc[_0xf17996(0x126)]({'model':GEMINI_MODEL}),_0x569ac2=await _0x46977f[_0xf17996(0x125)](_0xf17996(0x1a1)),_0x5a48f4=await _0x569ac2['response'];if(_0x5a48f4[_0xf17996(0x102)]())this[_0xf17996(0x1d0)](_0x95faf7[_0xf17996(0x189)],_0x95faf7[_0xf17996(0xfd)],{'success':!![],'message':_0xf17996(0x199)},_0x95faf7[_0xf17996(0x1dd)]);else throw new Error(_0xf17996(0x12c));}catch(_0x3fcd00){this[_0xf17996(0x1d0)](_0x95faf7['from'],_0x95faf7[_0xf17996(0xfd)],{'success':![],'message':_0x3fcd00['message']},_0x95faf7[_0xf17996(0x1dd)]);}else{if(_0x95faf7['command']===_0xf17996(0x180))try{const _0x38be20=await scanner[_0xf17996(0x100)](this,_0x95faf7[_0xf17996(0x1cf)]||{});this[_0xf17996(0x1d0)](_0x95faf7[_0xf17996(0x189)],_0x95faf7[_0xf17996(0xfd)],{'success':!![],'devices':_0x38be20},_0x95faf7['callback']);}catch(_0x54a0ac){this[_0xf17996(0x1d0)](_0x95faf7[_0xf17996(0x189)],_0x95faf7[_0xf17996(0xfd)],{'success':![],'error':_0x54a0ac[_0xf17996(0x1cf)]},_0x95faf7['callback']);}else{if(_0x95faf7['command']===_0xf17996(0x1cd))try{const {matrix:_0x522566}=_0x95faf7[_0xf17996(0x1cf)],_0x38648f=await this[_0xf17996(0x14a)](_0xf17996(0x105));if(_0x38648f&&_0x38648f[_0xf17996(0x1e4)]){const _0x53cc28=JSON['parse'](_0x38648f[_0xf17996(0x1e4)]);_0x53cc28['matrix']=_0x522566,_0x53cc28[_0xf17996(0xf5)]=Date['now'](),await this[_0xf17996(0x171)]('analysis.topology.structure',{'val':JSON['stringify'](_0x53cc28),'ack':!![]}),pythonBridge['send'](this,_0xf17996(0x104),_0x53cc28);}this[_0xf17996(0x1d0)](_0x95faf7[_0xf17996(0x189)],_0x95faf7[_0xf17996(0xfd)],{'success':!![]},_0x95faf7[_0xf17996(0x1dd)]);}catch(_0x302f90){this['log'][_0xf17996(0x183)](_0x302f90);}else{if(_0x95faf7[_0xf17996(0xfd)]===_0xf17996(0x1c6))this[_0xf17996(0x1d0)](_0x95faf7['from'],_0x95faf7[_0xf17996(0xfd)],{'success':!![],'dailyDigests':this[_0xf17996(0x177)]||[],'analysisHistory':this[_0xf17996(0x16c)]||[]},_0x95faf7[_0xf17996(0x1dd)]);else{if(_0x95faf7[_0xf17996(0xfd)]===_0xf17996(0x142)){const _0x216661=this['dailyDigests'][_0xf17996(0x133)],_0x3f87a4=new Array(0x18)[_0xf17996(0x12a)](0x0),_0x24e0c2=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0xf17996(0x121)]&&this[_0xf17996(0x121)][_0xf17996(0x1be)](_0x18045a=>{const _0x40f5dd=_0xf17996;if(_0x18045a[_0x40f5dd(0x148)]>=_0x24e0c2){const _0x2ff5c0=new Date(_0x18045a[_0x40f5dd(0x148)])['getHours']();if(_0x2ff5c0>=0x0&&_0x2ff5c0<0x18)_0x3f87a4[_0x2ff5c0]++;}});let _0x1ba5c7=![],_0x1ea9d5='',_0x4787e7='',_0x1e7f5d='';try{const _0x1f4a40=await this[_0xf17996(0x14a)]('analysis.automation.patternDetected');if(_0x1f4a40&&_0x1f4a40['val']){_0x1ba5c7=!![];const _0x248864=await this[_0xf17996(0x14a)](_0xf17996(0x1e6));_0x1ea9d5=_0x248864?_0x248864[_0xf17996(0x1e4)]:'';const _0x354182=await this[_0xf17996(0x14a)](_0xf17996(0x17d));_0x4787e7=_0x354182?_0x354182[_0xf17996(0x1e4)]:'';const _0x116bc8=await this[_0xf17996(0x14a)](_0xf17996(0x12b));_0x1e7f5d=_0x116bc8?_0x116bc8['val']:'';}}catch(_0x34f0f5){}const _0x2d45f0=await this['checkSolarCondition'](),_0x5eef27=(this[_0xf17996(0x146)][_0xf17996(0x1a5)]||[])['some'](_0x16d52a=>_0x16d52a['isSolar']),_0x553bf0=_0x2d45f0&&_0x5eef27;this[_0xf17996(0x1d0)](_0x95faf7['from'],_0x95faf7[_0xf17996(0xfd)],{'success':!![],'eventHistory':this['eventHistory'][_0xf17996(0x1cb)](0x0,0xf),'stats':{'digestCount':_0x216661,'isPresent':this[_0xf17996(0x10f)],'hourlyActivity':_0x3f87a4,'solarActive':_0x553bf0},'automation':{'detected':_0x1ba5c7,'description':_0x1ea9d5,'targetId':_0x4787e7,'targetValue':_0x1e7f5d}},_0x95faf7[_0xf17996(0x1dd)]);}else{if(_0x95faf7['command']==='getEnums'){const _0x597c19=await this[_0xf17996(0x1c0)]('enum.functions.*','enum'),_0x48dc7a=[];if(_0x597c19)for(const _0x43d4ed in _0x597c19){const _0x344bc4=_0x597c19[_0x43d4ed],_0x252340=(_0x344bc4[_0xf17996(0x1d8)]&&typeof _0x344bc4[_0xf17996(0x1d8)][_0xf17996(0x14c)]===_0xf17996(0x185)?_0x344bc4[_0xf17996(0x1d8)]['name']['de']:_0x344bc4[_0xf17996(0x1d8)][_0xf17996(0x14c)])||_0x344bc4[_0xf17996(0x1d8)]['name'];_0x48dc7a[_0xf17996(0x1c3)]({'id':_0x43d4ed,'name':_0x252340});}const _0x255d0e=await this[_0xf17996(0x1c0)](_0xf17996(0x193),_0xf17996(0x1d4)),_0x2af230=[];if(_0x255d0e)for(const _0x3d38f8 in _0x255d0e){const _0x281f1c=_0x255d0e[_0x3d38f8],_0x4641a0=(_0x281f1c[_0xf17996(0x1d8)]&&typeof _0x281f1c[_0xf17996(0x1d8)]['name']===_0xf17996(0x185)?_0x281f1c[_0xf17996(0x1d8)][_0xf17996(0x14c)]['de']:_0x281f1c[_0xf17996(0x1d8)]['name'])||_0x3d38f8[_0xf17996(0x16f)]('.')[_0xf17996(0x1bd)]();_0x2af230['push'](_0x4641a0);}this[_0xf17996(0x1d0)](_0x95faf7['from'],_0x95faf7[_0xf17996(0xfd)],{'success':!![],'enums':_0x48dc7a,'rooms':_0x2af230},_0x95faf7[_0xf17996(0x1dd)]);}else{if(_0x95faf7[_0xf17996(0xfd)]===_0xf17996(0x15f))try{let _0x511bd9=_0xf17996(0x13d),_0x296bd9=_0xf17996(0x169);if(this[_0xf17996(0x146)][_0xf17996(0xfb)]){const _0x133bfd=await recorder['getOutsideTemperatureNumeric'](this);_0x511bd9=_0x133bfd!==null?_0x133bfd+'Â°C':_0xf17996(0x13c);}if(this[_0xf17996(0x146)][_0xf17996(0x157)]){const _0x1325be=await this[_0xf17996(0x1d7)](_0xf17996(0x120)+this[_0xf17996(0x146)][_0xf17996(0x157)]);_0x296bd9=_0x1325be?'Verbunden':_0xf17996(0x1a0);}this[_0xf17996(0x1d0)](_0x95faf7[_0xf17996(0x189)],_0x95faf7[_0xf17996(0xfd)],{'success':!![],'weather':_0x511bd9,'calendar':_0x296bd9},_0x95faf7['callback']);}catch(_0x3a2d34){this[_0xf17996(0x1d0)](_0x95faf7[_0xf17996(0x189)],_0x95faf7[_0xf17996(0xfd)],{'success':![],'error':_0x3a2d34['message']},_0x95faf7[_0xf17996(0x1dd)]);}else{if(_0x95faf7[_0xf17996(0xfd)]===_0xf17996(0x17c))try{const _0x2d2aa5=_0x95faf7[_0xf17996(0x1cf)][_0xf17996(0x18b)],_0x3b6273=await this[_0xf17996(0x18d)](_0x2d2aa5+_0xf17996(0x134));let _0x3f5eb3=[];if(_0x3b6273&&_0x3b6273[_0xf17996(0x1e4)]){const _0x16a681=JSON['parse'](_0x3b6273[_0xf17996(0x1e4)]),_0x416964=new Set();Array[_0xf17996(0x10c)](_0x16a681)&&_0x16a681['forEach'](_0x3aabf7=>{const _0x39abae=_0xf17996;if(_0x3aabf7[_0x39abae(0x1c5)])_0x416964[_0x39abae(0x154)](_0x3aabf7[_0x39abae(0x1c5)]);else{if(_0x3aabf7['calendarName'])_0x416964[_0x39abae(0x154)](_0x3aabf7[_0x39abae(0xf8)]);}}),_0x3f5eb3=Array[_0xf17996(0x189)](_0x416964)[_0xf17996(0x119)]();}if(_0x3f5eb3['length']===0x0)_0x3f5eb3=['Standard'];this[_0xf17996(0x1d0)](_0x95faf7[_0xf17996(0x189)],_0x95faf7[_0xf17996(0xfd)],{'success':!![],'names':_0x3f5eb3},_0x95faf7[_0xf17996(0x1dd)]);}catch(_0x45e143){this['sendTo'](_0x95faf7[_0xf17996(0x189)],_0x95faf7[_0xf17996(0xfd)],{'success':![],'error':_0x45e143['message']},_0x95faf7[_0xf17996(0x1dd)]);}else{if(_0x95faf7[_0xf17996(0xfd)]==='testNotification')try{await setup['sendNotification'](this,_0xf17996(0x175),![],![]),this[_0xf17996(0x1d0)](_0x95faf7[_0xf17996(0x189)],_0x95faf7[_0xf17996(0xfd)],{'success':!![],'message':_0xf17996(0x167)},_0x95faf7['callback']);}catch(_0x154027){this[_0xf17996(0x15b)]['error'](_0xf17996(0x194)+_0x154027[_0xf17996(0x1cf)]),this['sendTo'](_0x95faf7[_0xf17996(0x189)],_0x95faf7[_0xf17996(0xfd)],{'success':![],'message':'Fehler:\x20'+_0x154027['message']},_0x95faf7['callback']);}}}}}}}}}}}}}}}async['loadSystemMode'](){const _0x5ac80b=a0_0x716c8;try{const _0x334b27=await this[_0x5ac80b(0x14a)](setup['SYSTEM_DP_MODE']);_0x334b27&&_0x334b27[_0x5ac80b(0x1e4)]&&Object['values'](setup[_0x5ac80b(0x1df)])[_0x5ac80b(0x178)](_0x334b27['val'])?this[_0x5ac80b(0x106)]=_0x334b27[_0x5ac80b(0x1e4)]:(this[_0x5ac80b(0x106)]=setup['SYSTEM_MODES'][_0x5ac80b(0x14f)],await this[_0x5ac80b(0x171)](setup[_0x5ac80b(0x1b5)],{'val':setup[_0x5ac80b(0x1df)][_0x5ac80b(0x14f)],'ack':!![]}));}catch(_0x44a812){this[_0x5ac80b(0x106)]=setup[_0x5ac80b(0x1df)][_0x5ac80b(0x14f)];}}async['checkWifiPresence'](){const _0x2d0c58=a0_0x716c8;try{const _0x3c44d9=this['config'][_0x2d0c58(0x1a3)]||[];let _0xbe2c83=![];const _0x4909aa=[];for(const _0x4ee531 of _0x3c44d9){try{const _0x1ac737=await this[_0x2d0c58(0x18d)](_0x4ee531);_0x1ac737&&(_0x1ac737[_0x2d0c58(0x1e4)]===!![]||_0x1ac737[_0x2d0c58(0x1e4)]===_0x2d0c58(0x149)||_0x1ac737['val']===0x1)&&(_0xbe2c83=!![],_0x4909aa[_0x2d0c58(0x1c3)](_0x4ee531));}catch(_0x2e8474){}}return await this[_0x2d0c58(0x171)](_0x2d0c58(0x11d),{'val':_0x4909aa[_0x2d0c58(0xfc)](',\x20'),'ack':!![]}),_0xbe2c83&&(this[_0x2d0c58(0x168)]&&(this[_0x2d0c58(0x15b)][_0x2d0c58(0x1e5)](_0x2d0c58(0x155)),recorder[_0x2d0c58(0x191)](this)),!this[_0x2d0c58(0x10f)]&&this[_0x2d0c58(0x106)]===setup['SYSTEM_MODES'][_0x2d0c58(0x14f)]&&await recorder[_0x2d0c58(0x1e9)](this,!![])),_0xbe2c83;}catch(_0x29c132){return![];}}async[a0_0x716c8(0x153)](){const _0x44a3aa=a0_0x716c8;this[_0x44a3aa(0x15b)][_0x44a3aa(0x19d)]('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await aiAgent[_0x44a3aa(0x11b)](this),this['updateHealthVector'](),this[_0x44a3aa(0x18a)](),this['triggerEnergyPrediction']();}async['checkSolarCondition'](){const _0x4816fd=a0_0x716c8,_0x306c52=[_0x4816fd(0x1d3),'accuweather.0',_0x4816fd(0x1b8)],_0x1c2192=[_0x4816fd(0x12d),_0x4816fd(0xf7),_0x4816fd(0x139)];for(const _0x5893fc of _0x306c52){for(const _0x3d6315 of _0x1c2192){try{const _0x144b28=_0x5893fc+'.'+_0x3d6315,_0x52d58a=await this[_0x4816fd(0x18d)](_0x144b28);if(_0x52d58a&&_0x52d58a[_0x4816fd(0x1e4)]){const _0x2dc017=String(_0x52d58a[_0x4816fd(0x1e4)])[_0x4816fd(0x1ab)]();if(_0x2dc017[_0x4816fd(0x178)]('sonn')||_0x2dc017[_0x4816fd(0x178)](_0x4816fd(0x1aa))||_0x2dc017[_0x4816fd(0x178)]('klar')||_0x2dc017[_0x4816fd(0x178)]('clear')||_0x2dc017[_0x4816fd(0x178)](_0x4816fd(0x192)))return!![];}}catch(_0x20ebf8){}}}return![];}['triggerGaitAnalysis'](){const _0x4116dc=a0_0x716c8;if(!this[_0x4116dc(0x10b)])return;try{this[_0x4116dc(0x1bc)](_0x4116dc(0x181),(_0x6f5101,_0x12cd17)=>{const _0x3f5d70=_0x4116dc;_0x12cd17&&_0x12cd17[_0x3f5d70(0x1e4)]&&pythonBridge[_0x3f5d70(0x197)](this,_0x3f5d70(0x15d),{'sequences':JSON[_0x3f5d70(0x1b1)](_0x12cd17[_0x3f5d70(0x1e4)])});});}catch(_0x494d34){}}async['triggerEnergyPrediction'](){const _0x283ffb=a0_0x716c8;if(!this[_0x283ffb(0x10b)])return;try{const _0xe689e5=await recorder[_0x283ffb(0x17b)](this);if(_0xe689e5===null)return;const _0x541ef7={},_0x246b90={},_0x32c749=this[_0x283ffb(0x146)][_0x283ffb(0x1a5)]||[];for(const _0x573dde of _0x32c749){if(_0x573dde['type']===_0x283ffb(0x14b)&&_0x573dde[_0x283ffb(0x1bf)]){const _0x534850=this[_0x283ffb(0x12e)][_0x573dde['id']];if(_0x534850!==undefined)_0x541ef7[_0x573dde[_0x283ffb(0x1bf)]]=_0x534850;if(_0x573dde[_0x283ffb(0x128)])_0x246b90[_0x573dde['location']]=!![];}}const _0x5367e6=await this['checkSolarCondition']();Object[_0x283ffb(0x152)](_0x541ef7)[_0x283ffb(0x133)]>0x0&&(pythonBridge['send'](this,_0x283ffb(0xfa),{'current_temps':_0x541ef7,'t_out':_0xe689e5,'is_sunny':_0x5367e6,'solar_flags':_0x246b90}),pythonBridge[_0x283ffb(0x197)](this,'OPTIMIZE_ENERGY',{'current_temps':_0x541ef7,'t_out':_0xe689e5,'targets':{}}));}catch(_0x414578){}}['updateHealthVector'](){const _0x5aa2a4=a0_0x716c8;if(!this['rawEventLog']||this[_0x5aa2a4(0x18e)][_0x5aa2a4(0x133)]===0x0)return;const _0x4d7454=new Array(0x60)['fill'](0x0),_0x21abe0=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x5aa2a4(0x18e)]['forEach'](_0x4aa847=>{const _0x359de7=_0x5aa2a4,_0x8c928c=new Date(_0x4aa847[_0x359de7(0x148)]);if(_0x8c928c[_0x359de7(0x1b2)]()>=_0x21abe0){const _0x19029e=_0x8c928c[_0x359de7(0x118)](),_0x56044c=_0x8c928c['getMinutes'](),_0x25d03a=_0x19029e*0x4+Math[_0x359de7(0x1b3)](_0x56044c/0xf);if(_0x25d03a>=0x0&&_0x25d03a<0x60)_0x4d7454[_0x25d03a]++;}}),this['setStateAsync']('analysis.health.todayVector',{'val':JSON[_0x5aa2a4(0x188)](_0x4d7454),'ack':!![]});}[a0_0x716c8(0x1b0)](){const _0x27d2ac=a0_0x716c8;if(!this[_0x27d2ac(0x177)]||this[_0x27d2ac(0x177)][_0x27d2ac(0x133)]<0x2)return;const _0x4f8a2d=this[_0x27d2ac(0x177)][_0x27d2ac(0x1bb)](_0x3be4c5=>{const _0x4c12f3=_0x27d2ac,_0x261b46=(_0x3be4c5[_0x4c12f3(0x131)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x261b46]||0x32;});pythonBridge[_0x27d2ac(0x197)](this,_0x27d2ac(0x1e2),{'values':_0x4f8a2d,'tag':_0x27d2ac(0x182)});}}if(require[a0_0x716c8(0x108)]!==module)module[a0_0x716c8(0x19b)]=_0x23faca=>new CogniLiving(_0x23faca);else new CogniLiving();function a0_0xba75(){const _0x15b7b4=['Kein\x20Wetter-Adapter','cogni-living\x20adapter\x20starting\x20(v','systemConfig','./lib/recorder','createDailyDigest','getOverviewData','lastAlertState','endsWith','analysis.training.triggerComfort','config','ack','timestamp','online','getStateAsync','temperature','name','licenseKey','checkWifiPresence','NORMAL','analysis.training.triggerHealth','analysis.energy.insulationScore','keys','runAutopilot','add','WiFi\x20Presence\x20detected.','6jhPWtk','calendarInstance','Gemini\x20Init\x20Error:\x20','simulateButler','simulateEnergyMPC','log','cogni-living','ANALYZE_GAIT','.communicate.request','testContext','testApiKey','setupBriefingScheduler','startService','executeAutomationAction','Lernphase\x20(','analysis.energy.pinnForecast','Adapter','Gesendet','exitTimer','Kein\x20Kalender-Adapter','updateLocation','14VYINik','analysisHistory','triggerDailyDigest','setObjectNotExistsAsync','split','createAllObjects','setStateAsync','bind','./lib/dead_man','constructor','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','toString','dailyDigests','includes','@iobroker/adapter-core','modeResetJob','getOutsideTemperatureNumeric','getCalendarNames','analysis.automation.targetId','276492uKLlhy','system.mode','scanDevices','LTM.trainingData.sequences','Activity-Level','error','analysis.training.triggerSecurity','object','updateHealthVector',')\x20-\x20Phase\x20C\x20(Ventilation\x20&\x20Warmup)','stringify','from','triggerGaitAnalysis','instance','isGracePeriodActive','getForeignStateAsync','rawEventLog','notifyTelegramInstance','1233qtXVJw','abortExitTimer','heiter','enum.rooms.*','Notification\x20Test\x20Failed:\x20','unload','loadSystemMode','send','triggerBriefing','Verbindung\x20erfolgreich!','minDaysForBaseline','exports','onReady','debug','LTM.trainingData.thermodynamics','abs','Instanz\x20nicht\x20gefunden','Test','./lib/automation','presenceDevices','Heizung\x20kann\x20','devices','5304500pRzFEH','82906rDImqE','search','analysis.automation.triggerAction','sunny','toLowerCase','initHistory','(((.+)+)+)+$','./lib/ai_agent','minutes_safe','runPythonHealthCheck','parse','getTime','floor','application/json','SYSTEM_DP_MODE','geminiApiKey','automation.triggerAction','daswetter.0','apply','driftAnalysisTimer','map','getState','pop','forEach','location','getForeignObjectsAsync','subscribeForeignStatesAsync','178732TUdUDe','push','inactivityThresholdHours','_calName','getLtmData','PYTHON_EXE','./lib/scanner','setupLtmScheduler','setupModeResetScheduler','slice','analysis.training.status','updateTopologyMatrix','sendMorningBriefing','message','sendTo','subscribeStates','entries','weatherunderground.0','enum','1685676ZbBRSw','briefingJob','getForeignObjectAsync','common','analysis.automation.autoApply','exitGraceTimer','communicate.request','LTM.rawEventLog','callback','dependencyInstallInProgress','SYSTEM_MODES','onMessage','checkThermostats','ANALYZE_TREND','\x20min\x20ausbleiben.','val','info','analysis.automation.description','LTM.baselineStatus','cancel','setPresence','\x20Tage)','setState','analysisTimer','Simulation\x20durch\x20Admin\x20(Test)','updated','onStateChange','Current.WeatherText','calendarName','initSystemConfig','PREDICT_ENERGY','weatherInstance','join','command','TRAIN_SECURITY','1693010zbXxBH','scanForDevices','json','text','startSystem','SET_TOPOLOGY','analysis.topology.structure','currentSystemMode','LTM.dailyDigests','main','version','processSensorEvent','isProVersion','isArray','onUnload','namespace','isPresent','analysis.trigger','46448GaryhU','type','values','@google/generative-ai','Warm-Up\x20Time\x20(Minutes\x20to\x2021Â°C)','state','analysis.training.triggerTopology','getHours','sort','motion','runGeminiAnalysis','ltmJob','system.presenceWho','./lib/installer','genAI','system.adapter.','eventHistory','.system.mode','find','apiKey','generateContent','getGenerativeModel','./lib/python_bridge','isSolar','initZombies','fill','analysis.automation.targetValue','Keine\x20Antwort\x20von\x20Gemini','forecast.current.weather','sensorLastValues','telegram','./lib/scheduler','activityLevel','string','length','.data.table','analysis.triggerBriefing','geminiModel','Sec-Training\x20started...','updateTopology','NextHours.Location_1.Day_1.current.symbol_desc','analysis.automation.patternDetected','analysisInterval','Daten\x20nicht\x20verfÃ¼gbar'];a0_0xba75=function(){return _0x15b7b4;};return a0_0xba75();}