const a0_0x21bcbf=a0_0x2852;function a0_0x2852(_0x36d90b,_0xd10e3e){const _0x30272e=a0_0x10c5();return a0_0x2852=function(_0x3901dd,_0x3d79a3){_0x3901dd=_0x3901dd-0x135;let _0x10c5d9=_0x30272e[_0x3901dd];return _0x10c5d9;},a0_0x2852(_0x36d90b,_0xd10e3e);}(function(_0x3fa942,_0x4dc2ee){const _0xf36f06=a0_0x2852,_0x4888c7=_0x3fa942();while(!![]){try{const _0x12011c=-parseInt(_0xf36f06(0x2ca))/0x1+-parseInt(_0xf36f06(0x275))/0x2*(-parseInt(_0xf36f06(0x155))/0x3)+parseInt(_0xf36f06(0x24c))/0x4*(parseInt(_0xf36f06(0x220))/0x5)+parseInt(_0xf36f06(0x29b))/0x6+-parseInt(_0xf36f06(0x297))/0x7+-parseInt(_0xf36f06(0x1df))/0x8+parseInt(_0xf36f06(0x1d5))/0x9;if(_0x12011c===_0x4dc2ee)break;else _0x4888c7['push'](_0x4888c7['shift']());}catch(_0x266069){_0x4888c7['push'](_0x4888c7['shift']());}}}(a0_0x10c5,0xc10f9));const a0_0x3d79a3=(function(){let _0x342675=!![];return function(_0x3a658d,_0x50fcae){const _0x555019=_0x342675?function(){const _0x51a37a=a0_0x2852;if(_0x50fcae){const _0x2e1cca=_0x50fcae[_0x51a37a(0x29f)](_0x3a658d,arguments);return _0x50fcae=null,_0x2e1cca;}}:function(){};return _0x342675=![],_0x555019;};}()),a0_0x3901dd=a0_0x3d79a3(this,function(){const _0x38a117=a0_0x2852;return a0_0x3901dd[_0x38a117(0x18c)]()[_0x38a117(0x149)]('(((.+)+)+)+$')[_0x38a117(0x18c)]()[_0x38a117(0x13e)](a0_0x3901dd)[_0x38a117(0x149)](_0x38a117(0x268));});a0_0x3901dd();'use strict';const utils=require(a0_0x21bcbf(0x2d2)),{GoogleGenerativeAI}=require(a0_0x21bcbf(0x184)),{spawn}=require(a0_0x21bcbf(0x218)),path=require('path'),fs=require('fs'),installer=require(a0_0x21bcbf(0x18a)),scanner=require(a0_0x21bcbf(0x174)),schedulers=require(a0_0x21bcbf(0x2cb)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x21bcbf(0x1c8),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST=a0_0x21bcbf(0x1e2),LTM_DP_BASELINE_STATUS=a0_0x21bcbf(0x1f7),LTM_DP_DRIFT_CHANNEL=a0_0x21bcbf(0x2ac),LTM_DP_DRIFT_STATUS=a0_0x21bcbf(0x282),LTM_DP_DRIFT_DETAILS=a0_0x21bcbf(0x238),LTM_DP_DRIFT_LAST_CHECK=a0_0x21bcbf(0x1e1),SYSTEM_DP_MODE=a0_0x21bcbf(0x206),SYSTEM_MODES={'NORMAL':a0_0x21bcbf(0x24e),'VACATION':a0_0x21bcbf(0x148),'PARTY':a0_0x21bcbf(0x281),'GUEST':a0_0x21bcbf(0x1ba)},AUTO_RESET_MODES=[SYSTEM_MODES['PARTY'],SYSTEM_MODES[a0_0x21bcbf(0x1ad)]],PERSONA_MAPPING={'generic':a0_0x21bcbf(0x295),'senior_aal':a0_0x21bcbf(0x23a),'family':a0_0x21bcbf(0x2c0),'single_comfort':'Fokus\x20auf\x20Komfort.','security':a0_0x21bcbf(0x22f)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0xbd9671){const _0x5e1c0e=a0_0x21bcbf;try{const _0x31f8c5=[_0x5e1c0e(0x23c),_0x5e1c0e(0x1a3)];for(const _0x542e46 of _0x31f8c5){try{const _0x4c8b50=await _0xbd9671[_0x5e1c0e(0x16f)](_0x542e46);if(_0x4c8b50)await _0xbd9671[_0x5e1c0e(0x17c)](_0x542e46);}catch(_0x1b070a){}}}catch(_0x1d6898){}}async function checkLicense(_0x13a96c){return!![];}async function initHistory(_0x1b5f71){const _0x5e43bd=a0_0x21bcbf;try{const _0x57ee8f=await _0x1b5f71[_0x5e43bd(0x135)]('events.history');_0x57ee8f&&_0x57ee8f[_0x5e43bd(0x19c)]&&(_0x1b5f71[_0x5e43bd(0x2b4)]=JSON[_0x5e43bd(0x280)](_0x57ee8f[_0x5e43bd(0x19c)][_0x5e43bd(0x18c)]()));}catch(_0x525042){_0x1b5f71['eventHistory']=[];}try{const _0x342f70=await _0x1b5f71['getStateAsync'](_0x5e43bd(0x21f));if(_0x342f70&&_0x342f70[_0x5e43bd(0x19c)])_0x1b5f71['analysisHistory']=JSON[_0x5e43bd(0x280)](_0x342f70['val'][_0x5e43bd(0x18c)]());}catch(_0x1a3121){_0x1b5f71[_0x5e43bd(0x161)]=[];}if(_0x1b5f71[_0x5e43bd(0x2b4)]&&_0x1b5f71[_0x5e43bd(0x2b4)]['length']>0x0){_0x1b5f71[_0x5e43bd(0x236)][_0x5e43bd(0x22e)]('Restoring\x20sensor\x20cache...');for(let _0x36c059=_0x1b5f71[_0x5e43bd(0x2b4)][_0x5e43bd(0x299)]-0x1;_0x36c059>=0x0;_0x36c059--){const _0x60a06b=_0x1b5f71['eventHistory'][_0x36c059];if(_0x60a06b&&_0x60a06b['id']!==undefined&&_0x60a06b[_0x5e43bd(0x26e)]!==undefined)_0x1b5f71['sensorLastValues'][_0x60a06b['id']]=_0x60a06b['value'];}}}async function initSystemConfig(_0x4f8ad6){const _0x9a1ba3=a0_0x21bcbf;try{const _0x343499=await _0x4f8ad6[_0x9a1ba3(0x175)](_0x9a1ba3(0x1bd));if(_0x343499&&_0x343499[_0x9a1ba3(0x1d9)])_0x4f8ad6[_0x9a1ba3(0x1b8)]={'latitude':_0x343499['common'][_0x9a1ba3(0x212)]||0x0,'longitude':_0x343499[_0x9a1ba3(0x1d9)][_0x9a1ba3(0x14c)]||0x0,'city':_0x343499[_0x9a1ba3(0x1d9)][_0x9a1ba3(0x235)]||''};}catch(_0x5700f0){}}async function createAllObjects(_0x4428b4){const _0x21c560=a0_0x21bcbf;await _0x4428b4[_0x21c560(0x279)](_0x21c560(0x14f),{'type':_0x21c560(0x18f),'common':{'name':_0x21c560(0x276)},'native':{}}),await _0x4428b4[_0x21c560(0x279)](SYSTEM_DP_MODE,{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x21a),'type':'string','role':_0x21c560(0x20f),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x21c560(0x14d)]},'native':{}}),await _0x4428b4['setObjectNotExistsAsync'](_0x21c560(0x273),{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x2b5),'type':_0x21c560(0x265),'role':_0x21c560(0x14b),'read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)]('events.lastEvent',{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x256),'type':_0x21c560(0x265),'role':_0x21c560(0x260),'read':!![],'write':![]},'native':{}}),await _0x4428b4['setObjectNotExistsAsync']('events.history',{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x17d),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x4428b4['extendObjectAsync'](_0x21c560(0x1ef),{'type':_0x21c560(0x18f),'common':{'name':_0x21c560(0x2b9)},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)]('analysis.training.triggerSecurity',{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x1e4),'type':'boolean','role':_0x21c560(0x1ce),'read':!![],'write':!![]},'native':{}}),await _0x4428b4['setObjectNotExistsAsync'](_0x21c560(0x262),{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x2c5),'type':_0x21c560(0x289),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x4428b4['setObjectNotExistsAsync'](_0x21c560(0x267),{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x254),'type':_0x21c560(0x289),'role':_0x21c560(0x1ce),'read':!![],'write':!![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x2bb),{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x248),'type':_0x21c560(0x289),'role':_0x21c560(0x1ce),'read':!![],'write':!![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x26a),{'type':_0x21c560(0x20f),'common':{'name':'Build\x20Topology','type':_0x21c560(0x289),'role':_0x21c560(0x1ce),'read':!![],'write':!![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x16a),{'type':_0x21c560(0x20f),'common':{'name':'Training\x20Status','type':_0x21c560(0x265),'role':_0x21c560(0x14b),'read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x279)](_0x21c560(0x298),{'type':'channel','common':{'name':_0x21c560(0x21e)},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x213),{'type':'state','common':{'name':_0x21c560(0x2c8),'type':'number','role':'value','read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x188),{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x2b8),'type':_0x21c560(0x1b2),'role':'value','read':!![],'write':![],'def':0.05},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x1a7),{'type':_0x21c560(0x20f),'common':{'name':'Last\x20Check','type':_0x21c560(0x265),'role':_0x21c560(0x2a1),'read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)]('analysis.security.topologyMatrix',{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x16c),'type':_0x21c560(0x265),'role':_0x21c560(0x260),'read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x279)](_0x21c560(0x1cf),{'type':_0x21c560(0x18f),'common':{'name':'Health\x20Analysis'},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)]('analysis.health.lastCheck',{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x257),'type':_0x21c560(0x265),'role':_0x21c560(0x2a1),'read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x242),{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x1dc),'type':_0x21c560(0x289),'role':_0x21c560(0x191),'read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x163),{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x271),'type':_0x21c560(0x265),'role':_0x21c560(0x14b),'read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x22c),{'type':'state','common':{'name':_0x21c560(0x13d),'type':_0x21c560(0x1b2),'role':_0x21c560(0x26e),'read':!![],'write':![]},'native':{}}),await _0x4428b4['setObjectNotExistsAsync']('analysis.health.todayVector',{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x195),'type':_0x21c560(0x265),'role':_0x21c560(0x260),'read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x1c7),{'type':'state','common':{'name':'Gait\x20Speed\x20Trend','type':_0x21c560(0x1b2),'role':_0x21c560(0x26e),'read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x279)](_0x21c560(0x1ec),{'type':_0x21c560(0x18f),'common':{'name':_0x21c560(0x28d)},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)]('analysis.energy.insulationScore',{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x204),'type':_0x21c560(0x265),'role':_0x21c560(0x14b),'read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)]('analysis.energy.heatingScore',{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x1d7),'type':_0x21c560(0x265),'role':_0x21c560(0x14b),'read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x2c1),{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x1ed),'type':_0x21c560(0x265),'role':'json','read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x279)](_0x21c560(0x28a),{'type':_0x21c560(0x18f),'common':{'name':_0x21c560(0x28a)},'native':{}}),await _0x4428b4[_0x21c560(0x279)](LTM_DP_RAW_LOG,{'type':_0x21c560(0x20f),'common':{'name':'Raw\x20Log','type':_0x21c560(0x265),'role':_0x21c560(0x260),'read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x279)](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':_0x21c560(0x154),'type':'string','role':_0x21c560(0x260),'read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x292),{'type':'state','common':{'name':_0x21c560(0x180),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x4428b4['setObjectNotExistsAsync'](_0x21c560(0x19d),{'type':'state','common':{'name':_0x21c560(0x2a7),'type':'string','role':_0x21c560(0x260),'read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x140),{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x203),'type':_0x21c560(0x289),'role':_0x21c560(0x1ce),'read':!![],'write':!![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x1ca),{'type':'state','common':{'name':_0x21c560(0x1d3),'type':_0x21c560(0x289),'role':_0x21c560(0x1ce),'read':!![],'write':!![]},'native':{}}),await _0x4428b4['setObjectNotExistsAsync'](_0x21c560(0x224),{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x1a9),'type':_0x21c560(0x289),'role':'indicator.alarm','read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x230),{'type':_0x21c560(0x20f),'common':{'name':'Alert\x20Reason','type':_0x21c560(0x265),'role':'text.alarm','read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x15f),{'type':'state','common':{'name':_0x21c560(0x1d2),'type':_0x21c560(0x265),'role':'text','read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x200),{'type':'state','common':{'name':_0x21c560(0x1a4),'type':_0x21c560(0x289),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x4428b4['setObjectNotExistsAsync']('analysis.automation.description',{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x138),'type':_0x21c560(0x265),'role':_0x21c560(0x14b),'read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x270),{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x274),'type':_0x21c560(0x265),'role':_0x21c560(0x260),'read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x15e),{'type':_0x21c560(0x20f),'common':{'name':'Target\x20ID','type':_0x21c560(0x265),'role':_0x21c560(0x14b),'read':!![],'write':![]},'native':{}}),await _0x4428b4['setObjectNotExistsAsync'](_0x21c560(0x1a2),{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x26c),'type':_0x21c560(0x265),'role':_0x21c560(0x14b),'read':!![],'write':![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)]('analysis.automation.autoApply',{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x21c),'type':_0x21c560(0x289),'role':'switch','read':!![],'write':!![]},'native':{}}),await _0x4428b4[_0x21c560(0x1c2)](_0x21c560(0x19a),{'type':_0x21c560(0x20f),'common':{'name':_0x21c560(0x1b0),'type':'boolean','role':_0x21c560(0x1ce),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x431c3a){const _0x5d4d27=a0_0x21bcbf;try{const _0x1a51e6=await _0x431c3a[_0x5d4d27(0x135)](SYSTEM_DP_MODE);_0x1a51e6&&_0x1a51e6[_0x5d4d27(0x19c)]&&Object['values'](SYSTEM_MODES)[_0x5d4d27(0x143)](_0x1a51e6[_0x5d4d27(0x19c)])?_0x431c3a[_0x5d4d27(0x24d)]=_0x1a51e6[_0x5d4d27(0x19c)]:(_0x431c3a[_0x5d4d27(0x24d)]=SYSTEM_MODES[_0x5d4d27(0x14d)],await _0x431c3a[_0x5d4d27(0x18b)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x5d4d27(0x14d)],'ack':!![]}));}catch(_0x412a8e){_0x431c3a['currentSystemMode']=SYSTEM_MODES[_0x5d4d27(0x14d)];}}async function loadRawEventLog(_0x20158f){const _0x51faf9=a0_0x21bcbf;try{const _0x284bd9=await _0x20158f[_0x51faf9(0x135)](LTM_DP_RAW_LOG);if(_0x284bd9&&_0x284bd9[_0x51faf9(0x19c)])_0x20158f[_0x51faf9(0x1d4)]=JSON[_0x51faf9(0x280)](_0x284bd9[_0x51faf9(0x19c)]);}catch(_0x10c7ed){_0x20158f[_0x51faf9(0x1d4)]=[];}}async function saveRawEventLog(_0x5df026){const _0x2e3b28=a0_0x21bcbf;if(_0x5df026[_0x2e3b28(0x1d4)][_0x2e3b28(0x299)]>RAW_LOG_MAX_SIZE)_0x5df026['rawEventLog']['splice'](0x0,_0x5df026[_0x2e3b28(0x1d4)][_0x2e3b28(0x299)]-RAW_LOG_MAX_SIZE);await _0x5df026[_0x2e3b28(0x18b)](LTM_DP_RAW_LOG,{'val':JSON[_0x2e3b28(0x253)](_0x5df026[_0x2e3b28(0x1d4)]),'ack':!![]});}async function loadDailyDigests(_0x1bee5c){const _0x467228=a0_0x21bcbf;try{const _0x30b335=await _0x1bee5c[_0x467228(0x135)](LTM_DP_DAILY_DIGESTS);if(_0x30b335&&_0x30b335['val'])_0x1bee5c[_0x467228(0x169)]=JSON[_0x467228(0x280)](_0x30b335[_0x467228(0x19c)]);}catch(_0x5b9952){_0x1bee5c['dailyDigests']=[];}await updateBaselineStatus(_0x1bee5c);}async function saveDailyDigests(_0x47dca8,_0x409e9d=!![]){const _0x12ff4a=a0_0x21bcbf,_0x5588bb=_0x47dca8['config'][_0x12ff4a(0x221)]||0x3c;_0x47dca8[_0x12ff4a(0x169)][_0x12ff4a(0x299)]>_0x5588bb&&_0x47dca8[_0x12ff4a(0x169)][_0x12ff4a(0x1f3)](0x0,_0x47dca8['dailyDigests']['length']-_0x5588bb);await _0x47dca8[_0x12ff4a(0x18b)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x47dca8['dailyDigests']),'ack':!![]});if(_0x409e9d)await updateBaselineStatus(_0x47dca8);}async function updateAnalysisHistory(_0x1f7dbf,_0x5858bb){const _0x4e3867=a0_0x21bcbf;_0x1f7dbf['analysisHistory']['unshift'](_0x5858bb);if(_0x1f7dbf[_0x4e3867(0x161)][_0x4e3867(0x299)]>HISTORY_MAX_SIZE)_0x1f7dbf[_0x4e3867(0x161)][_0x4e3867(0x16d)]();await _0x1f7dbf[_0x4e3867(0x18b)](_0x4e3867(0x21f),{'val':JSON[_0x4e3867(0x253)](_0x1f7dbf[_0x4e3867(0x161)]),'ack':!![]});}async function updateBaselineStatus(_0x366a26){const _0x4207cc=a0_0x21bcbf;if(!_0x366a26['isProVersion']){await _0x366a26[_0x4207cc(0x18b)](LTM_DP_BASELINE_STATUS,{'val':'Deaktiviert\x20(Pro-Feature)','ack':!![]});return;}const _0x1f0468=_0x366a26['dailyDigests'][_0x4207cc(0x299)]>=(_0x366a26[_0x4207cc(0x2af)][_0x4207cc(0x142)]||0x7)?'Aktiv\x20('+_0x366a26[_0x4207cc(0x169)][_0x4207cc(0x299)]+'\x20Tage)':_0x4207cc(0x25a)+_0x366a26[_0x4207cc(0x169)][_0x4207cc(0x299)]+'/'+(_0x366a26['config'][_0x4207cc(0x142)]||0x7)+')';await _0x366a26['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x1f0468,'ack':!![]});}async function initSensorSubscriptions(_0x3f82e6){const _0xa06ccf=a0_0x21bcbf,_0x142f56=_0x3f82e6[_0xa06ccf(0x2af)][_0xa06ccf(0x2b2)];if(_0x142f56)for(const _0x3e9fba of _0x142f56){await _0x3f82e6[_0xa06ccf(0x2a3)](_0x3e9fba['id']);}}async function initPresenceSubscriptions(_0x4de9b6){const _0x20a7dd=a0_0x21bcbf,_0x4fde5b=_0x4de9b6[_0x20a7dd(0x2af)]['presenceDevices'];if(_0x4fde5b)for(const _0x2074f9 of _0x4fde5b){await _0x4de9b6[_0x20a7dd(0x2a3)](_0x2074f9);}}async function setupTelegramListener(_0x372405){const _0x8516c2=a0_0x21bcbf,_0xbaab9d=_0x372405[_0x8516c2(0x2af)][_0x8516c2(0x1e5)];if(_0x372405[_0x8516c2(0x2af)]['notifyTelegramEnabled']&&_0xbaab9d)await _0x372405['subscribeForeignStatesAsync'](_0xbaab9d+_0x8516c2(0x170));}async function checkWifiPresence(_0x33a63d){const _0x23f1b1=a0_0x21bcbf;try{const _0x4489f0=_0x33a63d[_0x23f1b1(0x2af)][_0x23f1b1(0x2b1)]||[];let _0x374828=![];const _0x21dd39=[];for(const _0x1683fc of _0x4489f0){try{const _0x1ba4ad=await _0x33a63d[_0x23f1b1(0x1e9)](_0x1683fc);_0x1ba4ad&&(_0x1ba4ad[_0x23f1b1(0x19c)]===!![]||_0x1ba4ad[_0x23f1b1(0x19c)]===_0x23f1b1(0x2aa)||_0x1ba4ad[_0x23f1b1(0x19c)]===0x1)&&(_0x374828=!![],_0x21dd39[_0x23f1b1(0x19b)](_0x1683fc));}catch(_0x3db361){}}return await _0x33a63d['setStateAsync'](_0x23f1b1(0x273),{'val':_0x21dd39[_0x23f1b1(0x1b9)](',\x20'),'ack':!![]}),_0x374828&&(_0x33a63d[_0x23f1b1(0x216)]&&(_0x33a63d[_0x23f1b1(0x236)][_0x23f1b1(0x22e)]('WiFi\x20Presence\x20detected.'),abortExitTimer(_0x33a63d)),!_0x33a63d[_0x23f1b1(0x1ae)]&&_0x33a63d[_0x23f1b1(0x24d)]===SYSTEM_MODES[_0x23f1b1(0x14d)]&&await setPresence(_0x33a63d,!![])),_0x374828;}catch(_0x16cac8){return![];}}function startExitTimer(_0x304026){const _0x278a26=a0_0x21bcbf;abortExitTimer(_0x304026),_0x304026['isGracePeriodActive']=!![],_0x304026[_0x278a26(0x28e)]=setTimeout(()=>{const _0x2ad8d6=_0x278a26;_0x304026[_0x2ad8d6(0x17a)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x304026[_0x278a26(0x216)]=setTimeout(()=>{const _0x557a50=_0x278a26;setPresence(_0x304026,![]),_0x304026[_0x557a50(0x216)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function a0_0x10c5(){const _0x448ee0=['Train\x20Comfort','service.py','TRAIN_SECURITY','bewegung','72DzpaFT','currentSystemMode','normal','GAIT_RESULT','licht','baselineDrift','Keine\x20Termine.','stringify','Train\x20Energy','ðŸŒ…\x20Morning\x20Briefing:\x0a','Last\x20raw\x20event','Last\x20Check','dimmer','briefingJob','Lernphase\x20(','error','Err:\x20','generateContent','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','debug','json','\x20->\x20','analysis.training.triggerHealth','getHours','geminiModel','string','.\x20WETTER:\x20','analysis.training.triggerEnergy','(((.+)+)+)+$','.Current.WeatherText','analysis.training.triggerTopology','useCalendar','Target\x20Value','checkAndInstall','value','onReady','analysis.automation.detectedPatterns','Trend','loc','system.presenceWho','Detected\x20Patterns','625814fwuHHe','System','setupLtmScheduler','setupBriefingScheduler','extendObjectAsync','substring','onMessage','Gemini\x20Init\x20Error:\x20','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','automation.triggerAction','isEmergency','parse','party','LTM.driftAnalysis.baselineDrift','Gemini\x20AI\x20initialized.','switch','stateChange','livingContext','fenster','Success','boolean','LTM','analysis.health.todayVector','ltmStbWindowDays','Energy\x20Intelligence','exitGraceTimer','values','targetValue','now','LTM.trainingData.sequences','\x0aSTB:\x20','floor','Analysiere\x20ausgewogen.','.\x20EMERGENCY:\x20','10357781EpEZDo','analysis.security','length','trim','1769706teELUa','getLtmData','round','analysis.automation.description','apply','ANALYZE_HEALTH','date','lampe','subscribeForeignStatesAsync','KI-Modell\x20nicht\x20initialisiert','.\x20KONTEXT:\x20','SECURITY_RESULT','Thermodynamics','aiPersona','simulateButler','online','inactivityThresholdHours','LTM.driftAnalysis',')\x20-\x20SAFE\x20BOOT','BUILD_TOPOLOGY','config','getFullYear','presenceDevices','devices','enum','eventHistory','Who\x20is\x20present?','BUTLER\x20Execution\x20Error:\x20','onStateChange','Current\x20Threshold','AI\x20Training','forEach','analysis.training.triggerComfort','getForeignObjectsAsync','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','testContext','cogni-living\x20adapter\x20starting\x20(v','Fokus\x20auf\x20Familienroutinen.','analysis.energy.forecast','communicate.request','subscribeStates','telegram','Train\x20Health','triggerDailyDigest','Adapter','Anomaly\x20Score','VACATION','1528415nyegEI','./lib/scheduler','TOPOLOGY_RESULT','getDate','[LOG]','status','analysis.health.lastCheck','getMinutes','@iobroker/adapter-core','split','getStateAsync','toISOString','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','Description','dependencyInstallInProgress','threshold','PONG','.Current.Temperature','Trend\x20Value','constructor','fill','analysis.trigger','data','minDaysForBaseline','includes','temperatur','sendTo','Skipped\x20(No\x20AI\x20or\x20Data)','HEALTH_TRAIN_RESULT','vacation','search','slice','text','longitude','NORMAL','instance','system','scanDevices','type','exports','.\x20SYSTEM_MODE:\x20','Daily\x20Digests','9skjvsP','filter','dismissAutomation','automationProposal','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','success','confidence','setState','is_anomaly','analysis.automation.targetId','analysis.activitySummary','description','analysisHistory','details','analysis.health.trendDiagnosis','python3','OK:\x20','ready','summary','.NextHours.Location_1.Day_1.current.temp_value','dailyDigests','analysis.training.status','command','Topology\x20Matrix','pop','logDuplicates','getObjectAsync','.communicate.request','outdoorSensorId','Sec-Training\x20started...','existsSync','./lib/scanner','getForeignObjectAsync','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','geminiApiKey','alertReason','N/A\x20(Learning)','isGracePeriodActive','Unbekannt','delObjectAsync','Event\x20History','targetId','analysis.automation.autoApply','Sequences','PYTHON_EXE','message','PREDICT_ENERGY','@google/generative-ai','prÃ¤senz','ack','version','analysis.security.currentThreshold','TRAIN_COMFORT','./lib/installer','setStateAsync','toString','from','activityLevel','channel','kontakt','indicator','licenseKey','object','Kein\x20API\x20Key!','Today\x20Vector\x20(15m)','pythonProcess','isExit','application/json','analysisInterval','analysis.automation.triggerAction','push','val','LTM.trainingData.thermodynamics','daswetter','lastAlertState','analysis.lastResult','getOverviewData','analysis.automation.targetValue','events.history_debug_00','Pattern\x20Detected','driftDetails','write','analysis.security.lastCheck','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','Alert\x20Status','ltmJob','replace','callback','GUEST','isPresent','ðŸ§ \x20Triggering\x20Security\x20Training...','Trigger\x20Action','Success:\x20','number','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','getTime','enum.functions.*','\x0aGrund:\x20','stdin','systemConfig','join','guest','reason','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','system.config','system.isPresent','TRAIN_HEALTH','analysisTimer','toLowerCase','setObjectNotExistsAsync','toFixed','location','map','enum.rooms.*','analysis.health.gaitSpeed','LTM.rawEventLog','.\x20EVENTS:\x20','analysis.triggerBriefing','heating','startsWith','analysis.security.topologyMatrix','button','analysis.health','tÃ¼r','shift','Activity\x20Summary','Trigger\x20Briefing','rawEventLog','26192268CpGTal','setupModeResetScheduler','Heating\x20Score','TRAINING_COMPLETE','common','Kalender\x20deaktiviert.','ðŸ\x20Python\x20Pong','Anomaly\x20Detected','submitFeedback','Wetterdaten\x20deaktiviert.','9636968sGOdsy','unshift','LTM.driftAnalysis.lastCheck','LTM.triggerDailyDigest','getCalendarNames','Train\x20Security','notifyTelegramInstance','name','heizung','find','getForeignStateAsync','cancel','setupDriftAnalysisScheduler','analysis.energy','Temperature\x20Forecast','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','analysis.training','Topology\x20Error:\x20','modeResetJob','events.lastEvent','splice','driftAnalysisTimer','getGenerativeModel','.forecast.current.state','LTM.baselineStatus','genAI','Briefing\x20Error:\x20','âš ï¸\x20SECURITY\x20ALARM:\x20','weatherInstance','Unknown','payload','bind','temperature','analysis.automation.patternDetected','\x20=\x20','Gemini\x20Error:\x20','Trigger\x20Analysis','Insulation\x20Score','âš ï¸\x20ALARM:\x20','system.mode','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','toLocaleTimeString','ANALYZE_TREND','analysis.energy.insulationScore','detected','[PYTHON]\x20','cogni-living','N/A','state','some','Error\x20launching\x20Python:\x20','latitude','analysis.security.lastScore','analysis.training.triggerSecurity','unknown','exitTimer','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','child_process','Â°C,\x20','System\x20Mode','getEnums','Auto\x20Apply','HEALTH_RESULT','Security\x20Monitor','analysis.analysisHistory','238770aUyiPN','ltmLtbWindowDays','.forecast.current.temperature','.\x20ANWESEND:\x20','analysis.isAlert','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','timestamp','close','Started...','warn','Activity-Level','insulation','analysis.health.trendValue','rule','info','PRIORITÃ„T:\x20Sicherheit.','analysis.alertReason','motion','ðŸ“\x20Feedback\x20received:\x20','âœ…\x20HEALTH\x20TRAINED.','analysis.energy.heatingScore','city','log','User\x20dismissed\x20automation\x20proposal.','LTM.driftAnalysis.driftDetails','Training\x20Error:\x20','PRIORITÃ„T:\x20Gesundheit/AAL.','isAlert','analysis.history_debug_00','isProVersion','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','response','sensorLastValues','window','analysis.health.isAnomaly','Keine\x20Wetterdaten\x20verfÃ¼gbar.','occupancy','contact','openweathermap','schalter'];a0_0x10c5=function(){return _0x448ee0;};return a0_0x10c5();}function abortExitTimer(_0x3fbbb2){const _0x153a65=a0_0x21bcbf;if(_0x3fbbb2['exitTimer'])clearTimeout(_0x3fbbb2[_0x153a65(0x216)]);if(_0x3fbbb2[_0x153a65(0x28e)])clearTimeout(_0x3fbbb2[_0x153a65(0x28e)]);_0x3fbbb2[_0x153a65(0x216)]=null,_0x3fbbb2[_0x153a65(0x28e)]=null,_0x3fbbb2[_0x153a65(0x17a)]=![];}async function setPresence(_0x5295f6,_0x16e026){const _0x5442ef=a0_0x21bcbf;if(_0x5295f6['isPresent']===_0x16e026)return;_0x5295f6[_0x5442ef(0x1ae)]=_0x16e026,await _0x5295f6['setStateAsync'](_0x5442ef(0x1be),{'val':_0x16e026,'ack':!![]});}async function executeAutomationAction(_0x56582d){const _0xec6a6d=a0_0x21bcbf;try{const _0x11ab8b=await _0x56582d[_0xec6a6d(0x135)](_0xec6a6d(0x15e)),_0x3c1b7b=await _0x56582d[_0xec6a6d(0x135)]('analysis.automation.targetValue');if(_0x11ab8b&&_0x11ab8b[_0xec6a6d(0x19c)]&&_0x3c1b7b){const _0x37346e=_0x11ab8b['val'];let _0x5e07b0=_0x3c1b7b[_0xec6a6d(0x19c)];try{_0x5e07b0=JSON['parse'](_0x5e07b0);}catch(_0x1adfff){}_0x56582d[_0xec6a6d(0x236)][_0xec6a6d(0x22e)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x37346e+_0xec6a6d(0x201)+_0x5e07b0),await _0x56582d['setForeignStateAsync'](_0x37346e,_0x5e07b0);}else _0x56582d[_0xec6a6d(0x236)][_0xec6a6d(0x229)](_0xec6a6d(0x137));}catch(_0x53a44b){_0x56582d['log'][_0xec6a6d(0x25b)](_0xec6a6d(0x2b6)+_0x53a44b[_0xec6a6d(0x182)]);}}async function processSensorEvent(_0x45a68b,_0x59d3ac,_0x26e1aa,_0x2cd541){const _0x19ce0f=a0_0x21bcbf;if(!_0x2cd541)return;const _0x5f2c7c=_0x26e1aa[_0x19ce0f(0x19c)],_0x4d961f=Date[_0x19ce0f(0x291)](),_0x513201=_0x45a68b[_0x19ce0f(0x240)][_0x59d3ac];_0x45a68b[_0x19ce0f(0x240)][_0x59d3ac]=_0x5f2c7c;if(!_0x2cd541[_0x19ce0f(0x16e)]&&_0x513201!=undefined&&_0x513201==_0x5f2c7c)return;const _0x40f920=(_0x2cd541[_0x19ce0f(0x151)]||'')[_0x19ce0f(0x1c1)](),_0x19868d=_0x40f920[_0x19ce0f(0x143)](_0x19ce0f(0x1ff))||_0x40f920['includes'](_0x19ce0f(0x144))||_0x40f920[_0x19ce0f(0x143)]('klima')||_0x40f920[_0x19ce0f(0x143)](_0x19ce0f(0x1e7));_0x45a68b['isProVersion']&&_0x19868d&&recordThermodynamics(_0x45a68b,_0x59d3ac,_0x5f2c7c,_0x2cd541[_0x19ce0f(0x1c4)]);const _0x333d13={'timestamp':_0x4d961f,'id':_0x59d3ac,'name':_0x2cd541[_0x19ce0f(0x1e6)],'type':_0x2cd541['type'],'location':_0x2cd541[_0x19ce0f(0x1c4)],'value':_0x5f2c7c};_0x45a68b['eventHistory'][_0x19ce0f(0x1e0)](_0x333d13);if(_0x45a68b[_0x19ce0f(0x2b4)][_0x19ce0f(0x299)]>HISTORY_MAX_SIZE)_0x45a68b[_0x19ce0f(0x2b4)][_0x19ce0f(0x16d)]();await _0x45a68b[_0x19ce0f(0x18b)](_0x19ce0f(0x1f2),{'val':JSON[_0x19ce0f(0x253)](_0x333d13),'ack':!![]}),await _0x45a68b['setStateAsync']('events.history',{'val':JSON[_0x19ce0f(0x253)](_0x45a68b[_0x19ce0f(0x2b4)]),'ack':!![]});_0x45a68b[_0x19ce0f(0x23d)]&&(_0x45a68b[_0x19ce0f(0x1d4)]['push'](_0x333d13),await saveRawEventLog(_0x45a68b),recordSequence(_0x45a68b,_0x333d13));if(_0x2cd541[_0x19ce0f(0x197)]&&_0x5f2c7c===!![]){if(_0x45a68b[_0x19ce0f(0x1ae)]&&!_0x45a68b[_0x19ce0f(0x17a)])startExitTimer(_0x45a68b);else{if(!_0x45a68b['isPresent'])setPresence(_0x45a68b,!![]);}}else{if(_0x2cd541[_0x19ce0f(0x151)]===_0x19ce0f(0x231)&&_0x5f2c7c===!![]){if(_0x45a68b[_0x19ce0f(0x216)])abortExitTimer(_0x45a68b);if(!_0x45a68b[_0x19ce0f(0x1ae)]&&_0x45a68b[_0x19ce0f(0x24d)]===SYSTEM_MODES[_0x19ce0f(0x14d)])setPresence(_0x45a68b,!![]);}}}async function recordThermodynamics(_0x529018,_0x34a88a,_0x2d146f,_0x159e3a){const _0x5ad68c=a0_0x21bcbf,_0x4fceff=await getOutsideTemperatureNumeric(_0x529018),_0x58d1ea=await _0x529018[_0x5ad68c(0x135)](_0x5ad68c(0x19d));let _0x49f3cc=[];if(_0x58d1ea&&_0x58d1ea[_0x5ad68c(0x19c)])try{_0x49f3cc=JSON[_0x5ad68c(0x280)](_0x58d1ea[_0x5ad68c(0x19c)]);}catch(_0x5ab3e4){}_0x49f3cc[_0x5ad68c(0x19b)]({'ts':Date[_0x5ad68c(0x291)](),'room':_0x159e3a||_0x5ad68c(0x1fc),'t_in':_0x2d146f,'t_out':_0x4fceff});if(_0x49f3cc[_0x5ad68c(0x299)]>THERMO_LOG_SIZE)_0x49f3cc[_0x5ad68c(0x1d1)]();await _0x529018[_0x5ad68c(0x18b)](_0x5ad68c(0x19d),{'val':JSON['stringify'](_0x49f3cc),'ack':!![]});}async function getOutsideTemperatureNumeric(_0xf2b5cc){const _0x5757ec=a0_0x21bcbf;if(_0xf2b5cc['config'][_0x5757ec(0x171)])try{const _0x36ed7e=await _0xf2b5cc[_0x5757ec(0x1e9)](_0xf2b5cc[_0x5757ec(0x2af)]['outdoorSensorId']);if(_0x36ed7e&&_0x36ed7e['val']!==undefined&&_0x36ed7e[_0x5757ec(0x19c)]!==null)return parseFloat(_0x36ed7e[_0x5757ec(0x19c)]);}catch(_0xa79de2){}const _0x2af8f9=_0xf2b5cc[_0x5757ec(0x2af)][_0x5757ec(0x1fb)];if(!_0xf2b5cc[_0x5757ec(0x2af)]['useWeather']||!_0x2af8f9)return null;try{let _0xf2c57b='';if(_0x2af8f9['includes']('accuweather'))_0xf2c57b=_0x2af8f9+_0x5757ec(0x13c);else{if(_0x2af8f9[_0x5757ec(0x143)](_0x5757ec(0x19e)))_0xf2c57b=_0x2af8f9+_0x5757ec(0x168);else{if(_0x2af8f9[_0x5757ec(0x143)](_0x5757ec(0x246)))_0xf2c57b=_0x2af8f9+'.forecast.current.temperature';else{if(_0x2af8f9['includes']('weatherunderground'))_0xf2c57b=_0x2af8f9+'.forecast.current.temp';}}}if(_0xf2c57b){const _0xdc0a1=await _0xf2b5cc['getForeignStateAsync'](_0xf2c57b);if(_0xdc0a1&&_0xdc0a1[_0x5757ec(0x19c)]!==undefined&&_0xdc0a1[_0x5757ec(0x19c)]!==null)return parseFloat(_0xdc0a1[_0x5757ec(0x19c)]);}}catch(_0x273b82){}return null;}async function recordSequence(_0x11eefd,_0x103eea){const _0x16fc77=a0_0x21bcbf,_0xec3c3=(_0x103eea[_0x16fc77(0x151)]||'')[_0x16fc77(0x1c1)](),_0x4aeac9=['motion',_0x16fc77(0x24b),_0x16fc77(0x185),'presence',_0x16fc77(0x244),'door',_0x16fc77(0x1d0),_0x16fc77(0x241),_0x16fc77(0x287),_0x16fc77(0x245),_0x16fc77(0x190),'light',_0x16fc77(0x250),_0x16fc77(0x284),_0x16fc77(0x247),_0x16fc77(0x258),_0x16fc77(0x2a2)];if(!_0x4aeac9[_0x16fc77(0x210)](_0x81bd84=>_0xec3c3['includes'](_0x81bd84)))return;if(!_0x103eea[_0x16fc77(0x26e)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x16fc77(0x19b)]({'loc':_0x103eea[_0x16fc77(0x1c4)]||'Unknown','id':_0x103eea['id'],'ts':Date[_0x16fc77(0x291)]()}),sequenceTimer=setTimeout(async()=>{const _0x4c6f8c=_0x16fc77;if(activeSequence[_0x4c6f8c(0x299)]>0x1)await saveCompletedSequence(_0x11eefd);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x4cd565){const _0x11d6b2=a0_0x21bcbf;try{const _0x46deea=await _0x4cd565[_0x11d6b2(0x135)](_0x11d6b2(0x292));let _0xd8ce94=[];if(_0x46deea&&_0x46deea[_0x11d6b2(0x19c)])try{_0xd8ce94=JSON[_0x11d6b2(0x280)](_0x46deea[_0x11d6b2(0x19c)]);}catch(_0x2e1787){}const _0x58383f=activeSequence[0x0]['ts'],_0x3f7135=activeSequence['map'](_0x35a337=>({'loc':_0x35a337[_0x11d6b2(0x272)],'t_delta':Math[_0x11d6b2(0x29d)]((_0x35a337['ts']-_0x58383f)/0x3e8)})),_0x55775d={'timestamp':new Date(_0x58383f)[_0x11d6b2(0x136)](),'steps':_0x3f7135,'duration':Math[_0x11d6b2(0x29d)]((activeSequence[activeSequence['length']-0x1]['ts']-_0x58383f)/0x3e8),'daytime':new Date(_0x58383f)[_0x11d6b2(0x263)]()};_0xd8ce94[_0x11d6b2(0x19b)](_0x55775d);if(_0xd8ce94[_0x11d6b2(0x299)]>MAX_TRAINING_SET_SIZE)_0xd8ce94['shift']();await _0x4cd565['setStateAsync']('LTM.trainingData.sequences',{'val':JSON[_0x11d6b2(0x253)](_0xd8ce94),'ack':!![]}),runSecurityCheck(_0x4cd565,_0x55775d);}catch(_0x9a9778){_0x4cd565[_0x11d6b2(0x236)]['error']('[RECORDER]\x20Error:\x20'+_0x9a9778['message']);}}function runSecurityCheck(_0x30d1a6,_0x56bc08){const _0x59c281=a0_0x21bcbf;if(!_0x30d1a6[_0x59c281(0x23d)])return;sendToPython(_0x30d1a6,'ANALYZE_SEQUENCE',{'sequence':_0x56bc08});}async function createDailyDigest(_0x13c480){const _0xdc9558=a0_0x21bcbf;if(!_0x13c480[_0xdc9558(0x23d)])return;await _0x13c480[_0xdc9558(0x18b)](LTM_DP_STATUS,{'val':_0xdc9558(0x228),'ack':!![]});if(!_0x13c480[_0xdc9558(0x264)]||_0x13c480[_0xdc9558(0x1d4)][_0xdc9558(0x299)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x13c480[_0xdc9558(0x18b)](LTM_DP_STATUS,{'val':_0xdc9558(0x146),'ack':!![]});return;}const _0x5bc07c=JSON[_0xdc9558(0x280)](JSON[_0xdc9558(0x253)](_0x13c480['rawEventLog'])),_0x2d822d=_0x5bc07c[_0xdc9558(0x299)],_0xc4836a=_0xdc9558(0x159)+JSON[_0xdc9558(0x253)](_0x5bc07c);try{const _0xa9b1c6=await _0x13c480[_0xdc9558(0x264)][_0xdc9558(0x25d)](_0xc4836a),_0x1cc0c9=JSON['parse'](_0xa9b1c6[_0xdc9558(0x23f)]['text']()['replace'](/```json|```/g,'')[_0xdc9558(0x29a)]()),_0x53b780={'timestamp':new Date()[_0xdc9558(0x136)](),'eventCount':_0x2d822d,'summary':_0x1cc0c9[_0xdc9558(0x167)]||'Digest','activityLevel':_0x1cc0c9[_0xdc9558(0x18e)]||_0xdc9558(0x24e),'systemMode':_0x13c480['currentSystemMode']};_0x13c480[_0xdc9558(0x169)][_0xdc9558(0x19b)](_0x53b780),await saveDailyDigests(_0x13c480),_0x13c480['rawEventLog']=[],await saveRawEventLog(_0x13c480),await _0x13c480['setStateAsync'](LTM_DP_STATUS,{'val':_0xdc9558(0x288),'ack':!![]});if(_0x13c480['isProVersion'])sendToPython(_0x13c480,_0xdc9558(0x2a0),{'digest':_0x53b780});}catch(_0x5614a2){_0x13c480[_0xdc9558(0x236)][_0xdc9558(0x25b)](_0x5614a2[_0xdc9558(0x182)]);}}async function runBaselineDriftAnalysis(_0x905471){const _0x11113f=a0_0x21bcbf;if(!_0x905471[_0x11113f(0x23d)]||!_0x905471[_0x11113f(0x264)])return;const _0x3578ca=_0x905471['config'][_0x11113f(0x28c)]||0xe;if(_0x905471['dailyDigests'][_0x11113f(0x299)]<_0x3578ca+0x7){await _0x905471['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x11113f(0x179),'ack':!![]});return;}const _0xbe0f2c=_0x905471[_0x11113f(0x169)][_0x11113f(0x14a)](-_0x3578ca),_0x4411ea=_0x905471['dailyDigests'][_0x11113f(0x14a)](0x0,_0x905471[_0x11113f(0x169)][_0x11113f(0x299)]-_0x3578ca),_0x5ef0d4=_0x11113f(0x217)+JSON[_0x11113f(0x253)](_0x4411ea)+_0x11113f(0x293)+JSON[_0x11113f(0x253)](_0xbe0f2c);try{const _0x10ca19=await _0x905471[_0x11113f(0x264)][_0x11113f(0x25d)](_0x5ef0d4),_0x4f5b98=JSON['parse'](_0x10ca19[_0x11113f(0x23f)][_0x11113f(0x14b)]()[_0x11113f(0x1ab)](/```json|```/g,'')[_0x11113f(0x29a)]());_0x4f5b98['baselineDrift']&&(await _0x905471[_0x11113f(0x18b)](LTM_DP_DRIFT_STATUS,{'val':_0x4f5b98[_0x11113f(0x251)],'ack':!![]}),await _0x905471[_0x11113f(0x18b)](LTM_DP_DRIFT_DETAILS,{'val':_0x4f5b98[_0x11113f(0x1a5)],'ack':!![]}),await _0x905471[_0x11113f(0x18b)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x11113f(0x291)](),'ack':!![]}));}catch(_0x295166){}}async function sendMorningBriefing(_0x469329){const _0x347da4=a0_0x21bcbf;if(!_0x469329['geminiModel'])return;try{const _0x547267='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x604315=await _0x469329[_0x347da4(0x264)][_0x347da4(0x25d)](_0x547267),_0x47c70c=_0x604315[_0x347da4(0x23f)][_0x347da4(0x14b)]();sendNotification(_0x469329,_0x347da4(0x255)+_0x47c70c);}catch(_0x540813){_0x469329['log'][_0x347da4(0x25b)](_0x347da4(0x1f9)+_0x540813[_0x347da4(0x182)]);}}function stopPythonService(_0x3a878e){if(_0x3a878e['pythonProcess']){try{_0x3a878e['pythonProcess']['kill']();}catch(_0x3949a8){}_0x3a878e['pythonProcess']=null;}}function sendToPython(_0x563ce6,_0x40e038,_0x227143={}){const _0x56e13b=a0_0x21bcbf;if(!_0x563ce6[_0x56e13b(0x196)]||!_0x563ce6[_0x56e13b(0x196)][_0x56e13b(0x1b7)]['writable'])return;const _0x435712=JSON[_0x56e13b(0x253)]({'command':_0x40e038,..._0x227143});try{_0x563ce6[_0x56e13b(0x196)][_0x56e13b(0x1b7)][_0x56e13b(0x1a6)](_0x435712+'\x0a');}catch(_0x4e7de4){}}function runPythonHealthCheck(_0x2dc388){const _0x44d191=a0_0x21bcbf;if(!_0x2dc388[_0x44d191(0x169)]||_0x2dc388[_0x44d191(0x169)]['length']<0x2)return;const _0x3ae5ed=_0x2dc388[_0x44d191(0x169)][_0x44d191(0x1c5)](_0x57e1b1=>{const _0x4f4e0d=_0x44d191,_0x3190d6=(_0x57e1b1[_0x4f4e0d(0x18e)]||'')[_0x4f4e0d(0x1c1)]();return ACTIVITY_LEVEL_MAP[_0x3190d6]||0x32;});sendToPython(_0x2dc388,_0x44d191(0x209),{'values':_0x3ae5ed,'tag':_0x44d191(0x22a)});}function handlePythonResult(_0x37333f,_0x53c5aa){const _0x565b38=a0_0x21bcbf;if(_0x53c5aa[_0x565b38(0x151)]===_0x565b38(0x13b))_0x37333f['log'][_0x565b38(0x25f)](_0x565b38(0x1db));else{if(_0x53c5aa[_0x565b38(0x151)]===_0x565b38(0x2a6)){const {anomaly_score:_0x36dcd9,is_anomaly:_0x5eef47,threshold:_0x1ac596,explanation:_0x13f0a3}=_0x53c5aa['payload'];_0x37333f[_0x565b38(0x236)]['info'](_0x565b38(0x1b3)+_0x36dcd9[_0x565b38(0x1c3)](0x5)+_0x565b38(0x261)+(_0x5eef47?'ANOMALY':'OK')),_0x37333f['setStateAsync']('analysis.security.lastScore',{'val':_0x36dcd9,'ack':!![]}),_0x37333f[_0x565b38(0x18b)]('analysis.security.lastCheck',{'val':new Date()[_0x565b38(0x136)](),'ack':!![]});if(_0x1ac596)_0x37333f['setStateAsync'](_0x565b38(0x188),{'val':_0x1ac596,'ack':!![]});if(_0x5eef47){let _0x1691e6='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x36dcd9[_0x565b38(0x1c3)](0x4)+')';if(_0x13f0a3&&_0x13f0a3!=='Unknown')_0x1691e6+=_0x565b38(0x1b6)+_0x13f0a3;_0x37333f[_0x565b38(0x18b)](_0x565b38(0x224),{'val':!![],'ack':!![]}),_0x37333f[_0x565b38(0x18b)](_0x565b38(0x230),{'val':_0x1691e6,'ack':!![]}),sendNotification(_0x37333f,_0x565b38(0x1fa)+_0x1691e6,![],!![]);}}else{if(_0x53c5aa['type']===_0x565b38(0x1d8)){const _0x290778=_0x53c5aa[_0x565b38(0x1fd)][_0x565b38(0x162)]||'',_0x4ed4a5=_0x53c5aa[_0x565b38(0x1fd)][_0x565b38(0x13a)],_0x2aef72=_0x53c5aa[_0x565b38(0x1fd)][_0x565b38(0x15a)]?_0x565b38(0x1b1)+new Date()[_0x565b38(0x208)]()+'\x20('+_0x290778+')':'Failed:\x20'+_0x53c5aa[_0x565b38(0x1fd)][_0x565b38(0x1bb)];_0x37333f[_0x565b38(0x18b)](_0x565b38(0x16a),{'val':_0x2aef72,'ack':!![]});if(_0x53c5aa[_0x565b38(0x1fd)][_0x565b38(0x15a)]&&_0x4ed4a5)_0x37333f[_0x565b38(0x18b)](_0x565b38(0x188),{'val':_0x4ed4a5,'ack':!![]});}else{if(_0x53c5aa[_0x565b38(0x151)]==='COMFORT_RESULT'){const {patterns:_0x3b7e53}=_0x53c5aa[_0x565b38(0x1fd)];if(_0x3b7e53&&_0x3b7e53[_0x565b38(0x299)]>0x0){_0x37333f[_0x565b38(0x236)][_0x565b38(0x22e)](_0x565b38(0x207)+_0x3b7e53[_0x565b38(0x299)]+'\x20new\x20patterns.'),_0x37333f[_0x565b38(0x18b)]('analysis.automation.detectedPatterns',{'val':JSON['stringify'](_0x3b7e53),'ack':!![]});const _0x7cb5c7=_0x3b7e53[0x0],_0x28a285='Regel\x20erkannt:\x20'+_0x7cb5c7[_0x565b38(0x22d)]+'\x20('+(_0x7cb5c7[_0x565b38(0x15b)]*0x64)[_0x565b38(0x1c3)](0x0)+'%)';_0x37333f[_0x565b38(0x18b)](_0x565b38(0x200),{'val':!![],'ack':!![]}),_0x37333f['setStateAsync'](_0x565b38(0x29e),{'val':_0x28a285,'ack':!![]});}else _0x37333f[_0x565b38(0x236)][_0x565b38(0x22e)](_0x565b38(0x27d)),_0x37333f['setStateAsync']('analysis.automation.patternDetected',{'val':![],'ack':!![]}),_0x37333f[_0x565b38(0x18b)](_0x565b38(0x270),{'val':'[]','ack':!![]});}else{if(_0x53c5aa[_0x565b38(0x151)]==='ENERGY_TRAIN_RESULT'){if(_0x53c5aa[_0x565b38(0x1fd)]['success'])try{const _0x5c4b50=JSON[_0x565b38(0x280)](_0x53c5aa[_0x565b38(0x1fd)][_0x565b38(0x162)]);if(_0x5c4b50[_0x565b38(0x22b)])_0x37333f[_0x565b38(0x18b)](_0x565b38(0x20a),{'val':JSON[_0x565b38(0x253)](_0x5c4b50[_0x565b38(0x22b)]),'ack':!![]});if(_0x5c4b50[_0x565b38(0x1cb)])_0x37333f[_0x565b38(0x18b)](_0x565b38(0x234),{'val':JSON[_0x565b38(0x253)](_0x5c4b50[_0x565b38(0x1cb)]),'ack':!![]});}catch(_0x4d9cf1){}}else{if(_0x53c5aa[_0x565b38(0x151)]===_0x565b38(0x147)){if(_0x53c5aa['payload']['success'])_0x37333f[_0x565b38(0x236)][_0x565b38(0x22e)](_0x565b38(0x233));}else{if(_0x53c5aa['type']===_0x565b38(0x21d))_0x37333f[_0x565b38(0x18b)](_0x565b38(0x2d0),{'val':new Date()[_0x565b38(0x136)](),'ack':!![]}),_0x37333f['setStateAsync'](_0x565b38(0x242),{'val':_0x53c5aa[_0x565b38(0x1fd)][_0x565b38(0x15d)],'ack':!![]});else{if(_0x53c5aa[_0x565b38(0x151)]==='TREND_RESULT')_0x37333f[_0x565b38(0x18b)](_0x565b38(0x163),{'val':_0x53c5aa[_0x565b38(0x1fd)]['diagnosis'],'ack':!![]}),_0x37333f['setStateAsync'](_0x565b38(0x22c),{'val':_0x53c5aa[_0x565b38(0x1fd)]['change_percent'],'ack':!![]});else{if(_0x53c5aa[_0x565b38(0x151)]===_0x565b38(0x24f)){const {speed_trend:_0x5cc5e7}=_0x53c5aa['payload'];if(_0x5cc5e7!==undefined)_0x37333f['setStateAsync'](_0x565b38(0x1c7),{'val':_0x5cc5e7,'ack':!![]});}else{if(_0x53c5aa[_0x565b38(0x151)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x46390f}=_0x53c5aa[_0x565b38(0x1fd)];if(_0x46390f)_0x37333f[_0x565b38(0x18b)](_0x565b38(0x2c1),{'val':JSON['stringify'](_0x46390f),'ack':!![]});}else{if(_0x53c5aa['type']===_0x565b38(0x2cc)){const {data:_0x1eb958}=_0x53c5aa[_0x565b38(0x1fd)];_0x1eb958&&(_0x37333f[_0x565b38(0x236)][_0x565b38(0x22e)](_0x565b38(0x1ee)),_0x37333f[_0x565b38(0x18b)](_0x565b38(0x1cd),{'val':JSON['stringify'](_0x1eb958),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x18efd4){const _0x556e20=a0_0x21bcbf;let _0x2536d9=_0x556e20(0x164);if(fs[_0x556e20(0x173)](installer[_0x556e20(0x181)]))_0x2536d9=installer[_0x556e20(0x181)];try{const _0x240580=path[_0x556e20(0x1b9)](__dirname,'python_service',_0x556e20(0x249));_0x18efd4[_0x556e20(0x196)]=spawn(_0x2536d9,[_0x240580]),_0x18efd4[_0x556e20(0x196)]['stdout']['on'](_0x556e20(0x141),_0x4f4c14=>{const _0x52aa81=_0x556e20,_0x690d41=_0x4f4c14[_0x52aa81(0x18c)]()['split']('\x0a');_0x690d41['forEach'](_0x1c7e85=>{const _0x48093e=_0x52aa81,_0x3887d5=_0x1c7e85[_0x48093e(0x29a)]();if(!_0x3887d5)return;if(_0x3887d5[_0x48093e(0x1cc)](_0x48093e(0x2ce)))_0x18efd4[_0x48093e(0x236)][_0x48093e(0x25f)](_0x48093e(0x20c)+_0x3887d5[_0x48093e(0x27a)](0x5)['trim']());else{if(_0x3887d5[_0x48093e(0x1cc)]('[RESULT]'))try{const _0x3891d3=JSON[_0x48093e(0x280)](_0x3887d5[_0x48093e(0x27a)](0x8)[_0x48093e(0x29a)]());handlePythonResult(_0x18efd4,_0x3891d3);}catch(_0x1e079b){}}});}),_0x18efd4[_0x556e20(0x196)]['on'](_0x556e20(0x227),_0xc0355b=>{_0x18efd4['pythonProcess']=null;});}catch(_0x1b2710){_0x18efd4['log'][_0x556e20(0x25b)](_0x556e20(0x211)+_0x1b2710[_0x556e20(0x182)]);}}async function runAutopilot(_0x2f1a13){const _0x7da2db=a0_0x21bcbf;_0x2f1a13['log'][_0x7da2db(0x25f)](_0x7da2db(0x176)),await runGeminiAnalysis(_0x2f1a13),updateHealthVector(_0x2f1a13),triggerGaitAnalysis(_0x2f1a13),triggerEnergyPrediction(_0x2f1a13);}async function triggerGaitAnalysis(_0x204c68){const _0x50970f=a0_0x21bcbf;if(!_0x204c68['isProVersion'])return;try{const _0x4b13bd=await _0x204c68['getStateAsync'](_0x50970f(0x292));_0x4b13bd&&_0x4b13bd['val']&&sendToPython(_0x204c68,'ANALYZE_GAIT',{'sequences':JSON[_0x50970f(0x280)](_0x4b13bd[_0x50970f(0x19c)])});}catch(_0x22caa1){}}async function triggerEnergyPrediction(_0x14e270){const _0x2a6009=a0_0x21bcbf;if(!_0x14e270[_0x2a6009(0x23d)])return;try{const _0xffe04f=await getOutsideTemperatureNumeric(_0x14e270);if(_0xffe04f===null)return;const _0x1a04ee={},_0x3d2440=_0x14e270[_0x2a6009(0x2af)][_0x2a6009(0x2b2)]||[];for(const _0x1894af of _0x3d2440){if(_0x1894af[_0x2a6009(0x151)]===_0x2a6009(0x1ff)&&_0x1894af[_0x2a6009(0x1c4)]){const _0x10d631=_0x14e270[_0x2a6009(0x240)][_0x1894af['id']];if(_0x10d631!==undefined)_0x1a04ee[_0x1894af['location']]=_0x10d631;}}Object['keys'](_0x1a04ee)[_0x2a6009(0x299)]>0x0&&sendToPython(_0x14e270,_0x2a6009(0x183),{'current_temps':_0x1a04ee,'t_out':_0xffe04f});}catch(_0x7eed1f){}}function updateHealthVector(_0x37b3ab){const _0x2eeadb=a0_0x21bcbf;if(!_0x37b3ab[_0x2eeadb(0x1d4)]||_0x37b3ab[_0x2eeadb(0x1d4)][_0x2eeadb(0x299)]===0x0)return;const _0x2b72db=new Array(0x60)[_0x2eeadb(0x13f)](0x0),_0x3bf4a3=new Date()['setHours'](0x0,0x0,0x0,0x0);_0x37b3ab[_0x2eeadb(0x1d4)][_0x2eeadb(0x2ba)](_0x14e584=>{const _0x478fa5=_0x2eeadb,_0x257152=new Date(_0x14e584[_0x478fa5(0x226)]);if(_0x257152['getTime']()>=_0x3bf4a3){const _0x57c450=_0x257152['getHours'](),_0x48eb00=_0x257152[_0x478fa5(0x2d1)](),_0x400966=_0x57c450*0x4+Math[_0x478fa5(0x294)](_0x48eb00/0xf);if(_0x400966>=0x0&&_0x400966<0x60)_0x2b72db[_0x400966]++;}}),_0x37b3ab[_0x2eeadb(0x18b)](_0x2eeadb(0x28b),{'val':JSON['stringify'](_0x2b72db),'ack':!![]});}async function getWeatherContext(_0x16e70f){const _0x28b58a=a0_0x21bcbf;if(!_0x16e70f[_0x28b58a(0x2af)]['useWeather']||!_0x16e70f[_0x28b58a(0x2af)][_0x28b58a(0x1fb)])return _0x28b58a(0x1de);try{const _0x34ee30=_0x16e70f[_0x28b58a(0x2af)][_0x28b58a(0x1fb)];let _0x4d70d9=await _0x16e70f[_0x28b58a(0x1e9)](_0x34ee30+_0x28b58a(0x13c));if(!_0x4d70d9)_0x4d70d9=await _0x16e70f['getForeignStateAsync'](_0x34ee30+_0x28b58a(0x222));let _0x3d0847=await _0x16e70f[_0x28b58a(0x1e9)](_0x34ee30+_0x28b58a(0x269));if(!_0x3d0847)_0x3d0847=await _0x16e70f[_0x28b58a(0x1e9)](_0x34ee30+_0x28b58a(0x1f6));if(_0x4d70d9&&_0x3d0847)return _0x4d70d9[_0x28b58a(0x19c)]+_0x28b58a(0x219)+_0x3d0847[_0x28b58a(0x19c)];}catch(_0x5348e2){}return _0x28b58a(0x243);}async function getCalendarContext(_0x16d3de){const _0xa684aa=a0_0x21bcbf;if(!_0x16d3de['config'][_0xa684aa(0x26b)]||!_0x16d3de['config']['calendarInstance'])return _0xa684aa(0x1da);return _0xa684aa(0x252);}async function getCalendarNames(_0x1d4a41,_0xa63179){return[];}async function saveFeedback(_0x3e5c0a,_0x37a31f){const _0x27f80e=a0_0x21bcbf;_0x3e5c0a[_0x27f80e(0x236)][_0x27f80e(0x22e)](_0x27f80e(0x232)+_0x37a31f['rating']);}async function runGeminiAnalysis(_0x57b2f0,_0x30085d=''){const _0x17c7dc=a0_0x21bcbf;if(!_0x57b2f0[_0x17c7dc(0x264)])return;if(_0x57b2f0[_0x17c7dc(0x2b4)][_0x17c7dc(0x299)]===0x0)return;const _0x30012b=_0x57b2f0[_0x17c7dc(0x2b4)][_0x17c7dc(0x14a)](0x0,0xf),_0x134718=await getWeatherContext(_0x57b2f0),_0x482284=_0x57b2f0[_0x17c7dc(0x24d)],_0x445ac8=PERSONA_MAPPING[_0x57b2f0[_0x17c7dc(0x2af)][_0x17c7dc(0x2a8)]||'generic'],_0x9ba968=_0x57b2f0[_0x17c7dc(0x2af)][_0x17c7dc(0x286)]||'Keine\x20Details.';let _0xbf7123=_0x17c7dc(0x17b);try{const _0xddcb68=await _0x57b2f0['getStateAsync'](_0x17c7dc(0x273));if(_0xddcb68&&_0xddcb68['val'])_0xbf7123=_0xddcb68['val'];}catch(_0x5083ca){}let _0x2fff87=![];try{const _0x2b6dbb=await _0x57b2f0['getStateAsync'](_0x17c7dc(0x17f));if(_0x2b6dbb&&_0x2b6dbb[_0x17c7dc(0x19c)])_0x2fff87=!![];}catch(_0x49f2c4){}const _0x51858e=_0x17c7dc(0x225)+_0x445ac8+_0x17c7dc(0x2a5)+_0x9ba968+_0x17c7dc(0x153)+_0x482284+_0x17c7dc(0x266)+_0x134718+_0x17c7dc(0x223)+_0xbf7123+_0x17c7dc(0x1c9)+JSON[_0x17c7dc(0x253)](_0x30012b)+_0x17c7dc(0x296)+_0x30085d+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0x274d50=await _0x57b2f0[_0x17c7dc(0x264)][_0x17c7dc(0x25d)](_0x51858e),_0x2e79e7=JSON[_0x17c7dc(0x280)](_0x274d50[_0x17c7dc(0x23f)][_0x17c7dc(0x14b)]()[_0x17c7dc(0x1ab)](/```json|```/g,'')[_0x17c7dc(0x29a)]());await _0x57b2f0[_0x17c7dc(0x18b)](_0x17c7dc(0x1a0),{'val':JSON[_0x17c7dc(0x253)](_0x2e79e7),'ack':!![]});if(_0x2e79e7['summary'])await _0x57b2f0[_0x17c7dc(0x18b)]('analysis.activitySummary',{'val':_0x2e79e7[_0x17c7dc(0x167)],'ack':!![]});const _0x234961={'timestamp':Date[_0x17c7dc(0x291)](),'id':Date[_0x17c7dc(0x291)]()[_0x17c7dc(0x18c)](),'analysis':{'activity':{'summary':_0x2e79e7['summary'],'isAlert':_0x2e79e7['isAlert'],'alertReason':_0x2e79e7[_0x17c7dc(0x178)]},'comfort':{'automationProposal':_0x2e79e7[_0x17c7dc(0x158)]}}};await updateAnalysisHistory(_0x57b2f0,_0x234961);const _0x2f6fd3=_0x2e79e7[_0x17c7dc(0x23b)]||![];_0x2f6fd3!==_0x57b2f0[_0x17c7dc(0x19f)]&&(await _0x57b2f0[_0x17c7dc(0x18b)](_0x17c7dc(0x224),{'val':_0x2f6fd3,'ack':!![]}),_0x57b2f0[_0x17c7dc(0x19f)]=_0x2f6fd3,_0x2f6fd3&&(await _0x57b2f0['setStateAsync'](_0x17c7dc(0x230),{'val':_0x2e79e7[_0x17c7dc(0x178)],'ack':!![]}),sendNotification(_0x57b2f0,_0x17c7dc(0x205)+_0x2e79e7[_0x17c7dc(0x178)],![],_0x2e79e7[_0x17c7dc(0x27f)])));if(_0x2e79e7[_0x17c7dc(0x158)]&&_0x2e79e7[_0x17c7dc(0x158)][_0x17c7dc(0x20b)]){await _0x57b2f0['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x57b2f0[_0x17c7dc(0x18b)](_0x17c7dc(0x29e),{'val':_0x2e79e7[_0x17c7dc(0x158)][_0x17c7dc(0x160)],'ack':!![]}),await _0x57b2f0[_0x17c7dc(0x18b)](_0x17c7dc(0x15e),{'val':_0x2e79e7[_0x17c7dc(0x158)][_0x17c7dc(0x17e)],'ack':!![]}),await _0x57b2f0[_0x17c7dc(0x18b)](_0x17c7dc(0x1a2),{'val':JSON[_0x17c7dc(0x253)](_0x2e79e7[_0x17c7dc(0x158)][_0x17c7dc(0x290)]),'ack':!![]});if(_0x2fff87)executeAutomationAction(_0x57b2f0);}}catch(_0x5d8d2d){_0x57b2f0[_0x17c7dc(0x236)][_0x17c7dc(0x25b)](_0x17c7dc(0x202)+_0x5d8d2d[_0x17c7dc(0x182)]);}}async function startSystem(_0x5bfe16){const _0x242dc6=a0_0x21bcbf;_0x5bfe16['log'][_0x242dc6(0x22e)](_0x242dc6(0x1a8)),await initZombies(_0x5bfe16);try{_0x5bfe16[_0x242dc6(0x23d)]=await checkLicense(_0x5bfe16['config'][_0x242dc6(0x192)]);}catch(_0x4a3b79){}if(!_0x5bfe16[_0x242dc6(0x2af)][_0x242dc6(0x2ab)]||_0x5bfe16[_0x242dc6(0x2af)][_0x242dc6(0x2ab)]<0.1)_0x5bfe16['config'][_0x242dc6(0x2ab)]=0xc;await initHistory(_0x5bfe16),await initSystemConfig(_0x5bfe16);if(_0x5bfe16[_0x242dc6(0x2af)][_0x242dc6(0x177)])try{_0x5bfe16[_0x242dc6(0x1f8)]=new GoogleGenerativeAI(_0x5bfe16['config']['geminiApiKey']),_0x5bfe16[_0x242dc6(0x264)]=_0x5bfe16[_0x242dc6(0x1f8)][_0x242dc6(0x1f5)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x242dc6(0x198)}}),_0x5bfe16[_0x242dc6(0x236)][_0x242dc6(0x22e)](_0x242dc6(0x283));}catch(_0x447a45){_0x5bfe16[_0x242dc6(0x236)]['error'](_0x242dc6(0x27c)+_0x447a45[_0x242dc6(0x182)]);}await createAllObjects(_0x5bfe16),await loadSystemMode(_0x5bfe16),await loadRawEventLog(_0x5bfe16),await loadDailyDigests(_0x5bfe16),_0x5bfe16[_0x242dc6(0x2c3)]('analysis.trigger'),_0x5bfe16['subscribeStates'](LTM_DP_TRIGGER_DIGEST),_0x5bfe16[_0x242dc6(0x2c3)](_0x242dc6(0x206)),_0x5bfe16[_0x242dc6(0x2c3)](_0x242dc6(0x1ca)),_0x5bfe16[_0x242dc6(0x2c3)]('analysis.automation.triggerAction'),_0x5bfe16[_0x242dc6(0x2c3)]('analysis.automation.autoApply'),_0x5bfe16[_0x242dc6(0x2c3)]('analysis.training.triggerSecurity'),_0x5bfe16[_0x242dc6(0x2c3)](_0x242dc6(0x262)),_0x5bfe16[_0x242dc6(0x2c3)]('analysis.training.triggerEnergy'),_0x5bfe16[_0x242dc6(0x2c3)](_0x242dc6(0x2bb)),_0x5bfe16[_0x242dc6(0x2c3)](_0x242dc6(0x26a)),await initSensorSubscriptions(_0x5bfe16),await initPresenceSubscriptions(_0x5bfe16),await setupTelegramListener(_0x5bfe16),setTimeout(()=>checkWifiPresence(_0x5bfe16),0x1388);if(_0x5bfe16[_0x242dc6(0x1c0)])clearInterval(_0x5bfe16[_0x242dc6(0x1c0)]);const _0x2c2139=_0x5bfe16[_0x242dc6(0x2af)][_0x242dc6(0x199)]||0xf;_0x2c2139>0x0&&(_0x5bfe16[_0x242dc6(0x1c0)]=setInterval(()=>{runAutopilot(_0x5bfe16);},_0x2c2139*0x3c*0x3e8)),schedulers[_0x242dc6(0x277)](_0x5bfe16,()=>createDailyDigest(_0x5bfe16)),schedulers[_0x242dc6(0x1d6)](_0x5bfe16),schedulers[_0x242dc6(0x1eb)](_0x5bfe16,()=>runBaselineDriftAnalysis(_0x5bfe16)),schedulers[_0x242dc6(0x278)](_0x5bfe16,()=>sendMorningBriefing(_0x5bfe16)),startPythonService(_0x5bfe16),setTimeout(()=>{const _0x432adc=_0x242dc6;_0x5bfe16[_0x432adc(0x196)]&&(runPythonHealthCheck(_0x5bfe16),triggerGaitAnalysis(_0x5bfe16),triggerEnergyPrediction(_0x5bfe16)),updateHealthVector(_0x5bfe16);},0x1388);}class CogniLiving extends utils[a0_0x21bcbf(0x2c7)]{constructor(_0x1af3fd){const _0xd0809e=a0_0x21bcbf;super({..._0x1af3fd,'name':_0xd0809e(0x20d)}),this['eventHistory']=[],this[_0xd0809e(0x161)]=[],this[_0xd0809e(0x1d4)]=[],this[_0xd0809e(0x169)]=[],this[_0xd0809e(0x240)]={},this[_0xd0809e(0x1b8)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0xd0809e(0x1ae)]=!![],this[_0xd0809e(0x216)]=null,this['exitGraceTimer']=null,this[_0xd0809e(0x17a)]=![],this[_0xd0809e(0x1f8)]=null,this[_0xd0809e(0x264)]=null,this[_0xd0809e(0x24d)]=SYSTEM_MODES[_0xd0809e(0x14d)],this['isProVersion']=![],this[_0xd0809e(0x19f)]=![],this['systemUUID']=_0xd0809e(0x215),this[_0xd0809e(0x1c0)]=null,this['ltmJob']=null,this[_0xd0809e(0x1f1)]=null,this['driftAnalysisTimer']=null,this[_0xd0809e(0x259)]=null,this['pythonProcess']=null,this[_0xd0809e(0x139)]=![],this['on'](_0xd0809e(0x166),this[_0xd0809e(0x26f)]['bind'](this)),this['on'](_0xd0809e(0x285),this[_0xd0809e(0x2b7)]['bind'](this)),this['on']('unload',this['onUnload'][_0xd0809e(0x1fe)](this)),this['on']('message',this['onMessage'][_0xd0809e(0x1fe)](this));}async[a0_0x21bcbf(0x26f)](){const _0x242093=a0_0x21bcbf;this[_0x242093(0x236)]['info'](_0x242093(0x2bf)+this[_0x242093(0x187)]+_0x242093(0x2ad));if(!installer[_0x242093(0x26d)](this,()=>startSystem(this)))return;}['onUnload'](_0x4ad9ac){const _0xce261b=a0_0x21bcbf;if(this[_0xce261b(0x1c0)])clearInterval(this[_0xce261b(0x1c0)]);if(this['driftAnalysisTimer'])clearInterval(this[_0xce261b(0x1f4)]);if(this['ltmJob'])this[_0xce261b(0x1aa)][_0xce261b(0x1ea)]();if(this[_0xce261b(0x1f1)])this[_0xce261b(0x1f1)]['cancel']();if(this['briefingJob'])this['briefingJob'][_0xce261b(0x1ea)]();if(this[_0xce261b(0x216)])clearTimeout(this['exitTimer']);if(this['exitGraceTimer'])clearTimeout(this['exitGraceTimer']);stopPythonService(this),_0x4ad9ac();}async[a0_0x21bcbf(0x2b7)](_0x7d48a1,_0x369525){const _0x23629d=a0_0x21bcbf;if(!_0x369525||this[_0x23629d(0x139)])return;if(_0x7d48a1[_0x23629d(0x143)](_0x23629d(0x2c4))&&_0x7d48a1['endsWith'](_0x23629d(0x2c2))&&_0x369525[_0x23629d(0x19c)]){await handleTelegramResponse(this,_0x369525[_0x23629d(0x19c)]);return;}if(_0x7d48a1===this['namespace']+'.'+SYSTEM_DP_MODE){if(_0x369525[_0x23629d(0x19c)]&&Object[_0x23629d(0x28f)](SYSTEM_MODES)[_0x23629d(0x143)](_0x369525[_0x23629d(0x19c)])){this[_0x23629d(0x24d)]=_0x369525[_0x23629d(0x19c)];if(_0x369525[_0x23629d(0x19c)]===SYSTEM_MODES[_0x23629d(0x2c9)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x369525[_0x23629d(0x186)])this['setState'](_0x7d48a1,{'val':this[_0x23629d(0x24d)],'ack':!![]});return;}if(!_0x369525[_0x23629d(0x186)]){_0x7d48a1[_0x23629d(0x143)](_0x23629d(0x140))&&_0x369525['val']&&(this[_0x23629d(0x15c)](_0x7d48a1,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x7d48a1[_0x23629d(0x143)](_0x23629d(0x2c6))&&_0x369525['val']){this[_0x23629d(0x15c)](_0x7d48a1,{'val':![],'ack':!![]});if(this['isProVersion'])createDailyDigest(this);}_0x7d48a1[_0x23629d(0x143)]('triggerBriefing')&&_0x369525[_0x23629d(0x19c)]&&(this[_0x23629d(0x15c)](_0x7d48a1,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x7d48a1[_0x23629d(0x143)](_0x23629d(0x27e))&&_0x369525[_0x23629d(0x19c)]&&(this['setState'](_0x7d48a1,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x7d48a1[_0x23629d(0x143)](_0x23629d(0x214))&&_0x369525[_0x23629d(0x19c)]){this[_0x23629d(0x15c)](_0x7d48a1,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x4e691f=await this[_0x23629d(0x135)](_0x23629d(0x292));if(_0x4e691f&&_0x4e691f[_0x23629d(0x19c)]){const _0x4d57c7=JSON[_0x23629d(0x280)](_0x4e691f[_0x23629d(0x19c)]);this['log'][_0x23629d(0x22e)](_0x23629d(0x1af)),this[_0x23629d(0x18b)](_0x23629d(0x16a),{'val':_0x23629d(0x172),'ack':!![]}),sendToPython(this,_0x23629d(0x24a),{'sequences':_0x4d57c7});}}catch(_0xe1646c){this[_0x23629d(0x236)][_0x23629d(0x25b)](_0x23629d(0x239)+_0xe1646c['message']);}}if(_0x7d48a1[_0x23629d(0x143)](_0x23629d(0x262))&&_0x369525[_0x23629d(0x19c)]){this[_0x23629d(0x15c)](_0x7d48a1,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x31a721=await this[_0x23629d(0x135)](LTM_DP_DAILY_DIGESTS);if(_0x31a721&&_0x31a721['val'])sendToPython(this,_0x23629d(0x1bf),{'digests':JSON['parse'](_0x31a721[_0x23629d(0x19c)])});}catch(_0x357c22){}}if(_0x7d48a1[_0x23629d(0x143)](_0x23629d(0x267))&&_0x369525['val']){this[_0x23629d(0x15c)](_0x7d48a1,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x119d25=await this[_0x23629d(0x135)](_0x23629d(0x19d));if(_0x119d25&&_0x119d25[_0x23629d(0x19c)])sendToPython(this,'TRAIN_ENERGY',{'points':JSON[_0x23629d(0x280)](_0x119d25['val'])});}catch(_0x45b7d9){}}if(_0x7d48a1['includes'](_0x23629d(0x2bb))&&_0x369525[_0x23629d(0x19c)]){this['setState'](_0x7d48a1,{'val':![],'ack':!![]});if(this[_0x23629d(0x23d)])try{const _0x1e29f4=await this[_0x23629d(0x135)](LTM_DP_RAW_LOG);_0x1e29f4&&_0x1e29f4[_0x23629d(0x19c)]&&(this[_0x23629d(0x236)][_0x23629d(0x22e)](_0x23629d(0x23e)),sendToPython(this,_0x23629d(0x189),{'events':JSON['parse'](_0x1e29f4[_0x23629d(0x19c)])}));}catch(_0x25b32d){}}if(_0x7d48a1['includes']('analysis.training.triggerTopology')&&_0x369525[_0x23629d(0x19c)]){this[_0x23629d(0x15c)](_0x7d48a1,{'val':![],'ack':!![]});if(this[_0x23629d(0x23d)])try{const _0x1b64fe=await this['getStateAsync'](_0x23629d(0x292));if(_0x1b64fe&&_0x1b64fe[_0x23629d(0x19c)]){const _0x289e3a=JSON[_0x23629d(0x280)](_0x1b64fe[_0x23629d(0x19c)]);this[_0x23629d(0x236)][_0x23629d(0x22e)](_0x23629d(0x25e)),sendToPython(this,_0x23629d(0x2ae),{'sequences':_0x289e3a});}}catch(_0x30f2d6){this[_0x23629d(0x236)][_0x23629d(0x25b)](_0x23629d(0x1f0)+_0x30f2d6[_0x23629d(0x182)]);}}return;}if(this['config'][_0x23629d(0x2b1)]&&this[_0x23629d(0x2af)]['presenceDevices'][_0x23629d(0x143)](_0x7d48a1)){await checkWifiPresence(this);return;}const _0x291d37=(this[_0x23629d(0x2af)][_0x23629d(0x2b2)]||[])[_0x23629d(0x1e8)](_0x2452bc=>_0x2452bc['id']===_0x7d48a1);if(_0x291d37)processSensorEvent(this,_0x7d48a1,_0x369525,_0x291d37);}async[a0_0x21bcbf(0x27b)](_0xa760fe){const _0x1b0759=a0_0x21bcbf;if(typeof _0xa760fe===_0x1b0759(0x193)&&_0xa760fe[_0x1b0759(0x182)]){if(_0xa760fe[_0x1b0759(0x16b)]==='testApiKey'){const _0x2b6e14=_0xa760fe[_0x1b0759(0x182)]['apiKey']||this[_0x1b0759(0x2af)][_0x1b0759(0x177)];if(!_0x2b6e14)return this[_0x1b0759(0x145)](_0xa760fe['from'],_0xa760fe[_0x1b0759(0x16b)],{'success':![],'message':'Kein\x20API\x20Key.'},_0xa760fe['callback']);try{const _0x189381=new GoogleGenerativeAI(_0x2b6e14),_0x7a4f81=_0x189381[_0x1b0759(0x1f5)]({'model':GEMINI_MODEL}),_0x1d5f00=await _0x7a4f81['generateContent']('Hi');this[_0x1b0759(0x145)](_0xa760fe['from'],_0xa760fe['command'],{'success':!![],'message':_0x1b0759(0x165)+_0x1d5f00[_0x1b0759(0x23f)][_0x1b0759(0x14b)]()},_0xa760fe[_0x1b0759(0x1ac)]);}catch(_0x5d6be8){this[_0x1b0759(0x145)](_0xa760fe[_0x1b0759(0x18d)],_0xa760fe[_0x1b0759(0x16b)],{'success':![],'message':_0x1b0759(0x25c)+_0x5d6be8['message']},_0xa760fe['callback']);}}else{if(_0xa760fe['command']===_0x1b0759(0x2be)){const _0x16b6a8=await getWeatherContext(this),_0x5e637a=await getCalendarContext(this);this[_0x1b0759(0x145)](_0xa760fe[_0x1b0759(0x18d)],_0xa760fe[_0x1b0759(0x16b)],{'success':!![],'weather':_0x16b6a8,'calendar':_0x5e637a},_0xa760fe[_0x1b0759(0x1ac)]);}else{if(_0xa760fe[_0x1b0759(0x16b)]===_0x1b0759(0x29c)){if(!this[_0x1b0759(0x23d)])return this['sendTo'](_0xa760fe['from'],_0xa760fe[_0x1b0759(0x16b)],{'success':![],'isPro':![]},_0xa760fe[_0x1b0759(0x1ac)]);let _0x200273={'status':'N/A'};try{const _0x243a6e=await this[_0x1b0759(0x135)](LTM_DP_DRIFT_STATUS);_0x200273[_0x1b0759(0x2cf)]=_0x243a6e?_0x243a6e['val']:_0x1b0759(0x20e);}catch(_0x33e979){}this['sendTo'](_0xa760fe[_0x1b0759(0x18d)],_0xa760fe['command'],{'success':!![],'isPro':!![],'dailyDigests':this[_0x1b0759(0x169)],'driftAnalysis':_0x200273,'analysisHistory':this[_0x1b0759(0x161)]},_0xa760fe['callback']);}else{if(_0xa760fe[_0x1b0759(0x16b)]===_0x1b0759(0x1a1)){const _0x34b3ee=this[_0x1b0759(0x169)][_0x1b0759(0x299)],_0x450faa=new Date(),_0x46a0b2=new Date(_0x450faa[_0x1b0759(0x2b0)](),_0x450faa['getMonth'](),_0x450faa[_0x1b0759(0x2cd)]())[_0x1b0759(0x1b4)](),_0x447ee6=this['rawEventLog'][_0x1b0759(0x156)](_0x1ba7e2=>new Date(_0x1ba7e2[_0x1b0759(0x226)])['getTime']()>_0x46a0b2)[_0x1b0759(0x299)],_0x2f8d48=new Array(0x18)['fill'](0x0);this[_0x1b0759(0x1d4)][_0x1b0759(0x2ba)](_0x2ba53c=>{const _0x22dd74=_0x1b0759,_0xedc33f=new Date(_0x2ba53c[_0x22dd74(0x226)]);if(_0xedc33f[_0x22dd74(0x1b4)]()>_0x46a0b2)_0x2f8d48[_0xedc33f[_0x22dd74(0x263)]()]++;});let _0x56d22c={'status':'N/A'};try{const _0xf859a6=await this[_0x1b0759(0x135)](LTM_DP_DRIFT_STATUS);_0x56d22c[_0x1b0759(0x2cf)]=_0xf859a6?_0xf859a6[_0x1b0759(0x19c)]:'N/A';}catch(_0x1056b3){}let _0x276791='';try{const _0x490989=await this[_0x1b0759(0x135)](_0x1b0759(0x273));_0x276791=_0x490989?_0x490989[_0x1b0759(0x19c)]:'';}catch(_0x5564ed){}let _0x19ce7b=null;!this[_0x1b0759(0x264)]&&(_0x19ce7b=this[_0x1b0759(0x2af)][_0x1b0759(0x177)]?_0x1b0759(0x2a4):_0x1b0759(0x194));let _0x5df3e0={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x367d60=await this[_0x1b0759(0x135)]('analysis.automation.patternDetected');if(_0x367d60&&_0x367d60['val']){_0x5df3e0[_0x1b0759(0x20b)]=!![];const _0x2c9481=await this[_0x1b0759(0x135)](_0x1b0759(0x29e));_0x5df3e0[_0x1b0759(0x160)]=_0x2c9481?_0x2c9481['val']:'';const _0x3bb966=await this['getStateAsync'](_0x1b0759(0x15e));_0x5df3e0['targetId']=_0x3bb966?_0x3bb966[_0x1b0759(0x19c)]:'';const _0x1fe6a4=await this[_0x1b0759(0x135)](_0x1b0759(0x1a2));_0x5df3e0['targetValue']=_0x1fe6a4?_0x1fe6a4[_0x1b0759(0x19c)]:'';}const _0x1a3cd8=await this[_0x1b0759(0x135)](_0x1b0759(0x17f));_0x5df3e0['autoApply']=_0x1a3cd8?!!_0x1a3cd8[_0x1b0759(0x19c)]:![];}catch(_0x9beef8){}this[_0x1b0759(0x145)](_0xa760fe[_0x1b0759(0x18d)],_0xa760fe[_0x1b0759(0x16b)],{'success':!![],'eventHistory':this[_0x1b0759(0x2b4)][_0x1b0759(0x14a)](0x0,0xf),'stats':{'digestCount':_0x34b3ee,'eventCountToday':_0x447ee6,'hourlyActivity':_0x2f8d48,'driftStatus':_0x56d22c['status'],'isPresent':this[_0x1b0759(0x1ae)],'presenceWho':_0x276791,'minDays':this[_0x1b0759(0x2af)][_0x1b0759(0x142)]||0x7,'stbDays':this[_0x1b0759(0x2af)][_0x1b0759(0x28c)]||0xe,'ltbDays':this['config'][_0x1b0759(0x221)]||0x3c,'systemError':_0x19ce7b},'automation':_0x5df3e0},_0xa760fe[_0x1b0759(0x1ac)]);}else{if(_0xa760fe[_0x1b0759(0x16b)]===_0x1b0759(0x150))try{const _0x3cf5af=await scanner['scanForDevices'](this,_0xa760fe[_0x1b0759(0x182)]||{});this[_0x1b0759(0x145)](_0xa760fe[_0x1b0759(0x18d)],_0xa760fe[_0x1b0759(0x16b)],{'success':!![],'devices':_0x3cf5af},_0xa760fe[_0x1b0759(0x1ac)]);}catch(_0x233674){this[_0x1b0759(0x145)](_0xa760fe[_0x1b0759(0x18d)],_0xa760fe[_0x1b0759(0x16b)],{'success':![],'error':_0x233674[_0x1b0759(0x182)]},_0xa760fe['callback']);}else{if(_0xa760fe[_0x1b0759(0x16b)]===_0x1b0759(0x21b)){const _0x5b98bf=await this[_0x1b0759(0x2bc)](_0x1b0759(0x1b5),_0x1b0759(0x2b3)),_0x1bce69=[];if(_0x5b98bf)for(const _0x3bc3be in _0x5b98bf){const _0x2e3f9f=_0x5b98bf[_0x3bc3be],_0x1d51ab=(_0x2e3f9f['common']&&typeof _0x2e3f9f[_0x1b0759(0x1d9)]['name']===_0x1b0759(0x193)?_0x2e3f9f[_0x1b0759(0x1d9)][_0x1b0759(0x1e6)]['de']:_0x2e3f9f['common'][_0x1b0759(0x1e6)])||_0x2e3f9f['common'][_0x1b0759(0x1e6)];_0x1bce69['push']({'id':_0x3bc3be,'name':_0x1d51ab});}const _0x2534c8=await this[_0x1b0759(0x2bc)](_0x1b0759(0x1c6),_0x1b0759(0x2b3)),_0x125eec=[];if(_0x2534c8)for(const _0x249796 in _0x2534c8){const _0x2d2d0c=_0x2534c8[_0x249796],_0xf18577=(_0x2d2d0c[_0x1b0759(0x1d9)]&&typeof _0x2d2d0c[_0x1b0759(0x1d9)][_0x1b0759(0x1e6)]===_0x1b0759(0x193)?_0x2d2d0c[_0x1b0759(0x1d9)][_0x1b0759(0x1e6)]['de']:_0x2d2d0c[_0x1b0759(0x1d9)][_0x1b0759(0x1e6)])||_0x249796[_0x1b0759(0x2d3)]('.')[_0x1b0759(0x16d)]();_0x125eec[_0x1b0759(0x19b)](_0xf18577);}this[_0x1b0759(0x145)](_0xa760fe['from'],_0xa760fe[_0x1b0759(0x16b)],{'success':!![],'enums':_0x1bce69,'rooms':_0x125eec},_0xa760fe[_0x1b0759(0x1ac)]);}else{if(_0xa760fe[_0x1b0759(0x16b)]===_0x1b0759(0x1e3)){const _0x509f26=_0xa760fe[_0x1b0759(0x182)][_0x1b0759(0x14e)];if(!_0x509f26)return this['sendTo'](_0xa760fe['from'],_0xa760fe['command'],{'success':![],'error':'No\x20instance'},_0xa760fe[_0x1b0759(0x1ac)]);const _0x164051=await getCalendarNames(this,_0x509f26);this['sendTo'](_0xa760fe[_0x1b0759(0x18d)],_0xa760fe['command'],{'success':!![],'names':_0x164051},_0xa760fe[_0x1b0759(0x1ac)]);}else{if(_0xa760fe['command']===_0x1b0759(0x2a9)){const {targetId:_0x32fd25,targetValue:_0xaf8d06}=_0xa760fe[_0x1b0759(0x182)];this[_0x1b0759(0x236)][_0x1b0759(0x22e)](_0x1b0759(0x2bd)+_0x32fd25+'\x20=\x20'+_0xaf8d06),await this[_0x1b0759(0x18b)](_0x1b0759(0x200),{'val':!![],'ack':!![]}),await this[_0x1b0759(0x18b)](_0x1b0759(0x29e),{'val':_0x1b0759(0x1bc)+_0x32fd25,'ack':!![]}),await this[_0x1b0759(0x18b)]('analysis.automation.targetId',{'val':_0x32fd25,'ack':!![]}),await this[_0x1b0759(0x18b)]('analysis.automation.targetValue',{'val':_0xaf8d06,'ack':!![]}),this[_0x1b0759(0x145)](_0xa760fe[_0x1b0759(0x18d)],_0xa760fe[_0x1b0759(0x16b)],{'success':!![]},_0xa760fe[_0x1b0759(0x1ac)]);}else{if(_0xa760fe[_0x1b0759(0x16b)]===_0x1b0759(0x1dd)){const {historyId:_0x30114d,rating:_0x319350,comment:_0xae45bc,alertReason:_0x2018b1}=_0xa760fe[_0x1b0759(0x182)];_0x30114d&&_0x319350?(await saveFeedback(this,{'timestamp':Date[_0x1b0759(0x291)](),'historyId':_0x30114d,'rating':_0x319350,'comment':_0xae45bc,'alertReason':_0x2018b1}),this['sendTo'](_0xa760fe[_0x1b0759(0x18d)],_0xa760fe['command'],{'success':!![]},_0xa760fe[_0x1b0759(0x1ac)])):this[_0x1b0759(0x145)](_0xa760fe[_0x1b0759(0x18d)],_0xa760fe[_0x1b0759(0x16b)],{'success':![],'error':'Missing\x20data'},_0xa760fe[_0x1b0759(0x1ac)]);}else _0xa760fe[_0x1b0759(0x16b)]===_0x1b0759(0x157)&&(this[_0x1b0759(0x236)][_0x1b0759(0x22e)](_0x1b0759(0x237)),await this[_0x1b0759(0x18b)](_0x1b0759(0x200),{'val':![],'ack':!![]}),await this[_0x1b0759(0x18b)](_0x1b0759(0x29e),{'val':'','ack':!![]}),this[_0x1b0759(0x145)](_0xa760fe[_0x1b0759(0x18d)],_0xa760fe[_0x1b0759(0x16b)],{'success':!![]},_0xa760fe[_0x1b0759(0x1ac)]));}}}}}}}}}}}if(require['main']!==module)module[a0_0x21bcbf(0x152)]=_0x44ac0c=>new CogniLiving(_0x44ac0c);else new CogniLiving();