const a0_0x2f9ec1=a0_0x2dc9;function a0_0x2dc9(_0x476692,_0x55f506){const _0x1bec71=a0_0x4081();return a0_0x2dc9=function(_0x13133d,_0x1f27ad){_0x13133d=_0x13133d-0x71;let _0x4081fd=_0x1bec71[_0x13133d];return _0x4081fd;},a0_0x2dc9(_0x476692,_0x55f506);}(function(_0x5f25e8,_0x16eff7){const _0x497815=a0_0x2dc9,_0x4acdd2=_0x5f25e8();while(!![]){try{const _0x64ef32=parseInt(_0x497815(0x1fd))/0x1+-parseInt(_0x497815(0x1e4))/0x2+parseInt(_0x497815(0xe5))/0x3+parseInt(_0x497815(0x13f))/0x4*(parseInt(_0x497815(0x151))/0x5)+parseInt(_0x497815(0x130))/0x6*(parseInt(_0x497815(0x1c2))/0x7)+-parseInt(_0x497815(0x1f1))/0x8*(parseInt(_0x497815(0xdc))/0x9)+-parseInt(_0x497815(0xe3))/0xa*(parseInt(_0x497815(0x1f8))/0xb);if(_0x64ef32===_0x16eff7)break;else _0x4acdd2['push'](_0x4acdd2['shift']());}catch(_0x5d1605){_0x4acdd2['push'](_0x4acdd2['shift']());}}}(a0_0x4081,0x33ba3));const a0_0x1f27ad=(function(){let _0x4e5cdd=!![];return function(_0x3ce453,_0x6c7447){const _0x40b322=_0x4e5cdd?function(){if(_0x6c7447){const _0x163e0e=_0x6c7447['apply'](_0x3ce453,arguments);return _0x6c7447=null,_0x163e0e;}}:function(){};return _0x4e5cdd=![],_0x40b322;};}()),a0_0x13133d=a0_0x1f27ad(this,function(){const _0x3bd156=a0_0x2dc9;return a0_0x13133d[_0x3bd156(0xd7)]()[_0x3bd156(0x198)](_0x3bd156(0x1d6))[_0x3bd156(0xd7)]()[_0x3bd156(0x174)](a0_0x13133d)[_0x3bd156(0x198)](_0x3bd156(0x1d6));});a0_0x13133d();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x2f9ec1(0x127)),{spawn}=require(a0_0x2f9ec1(0xae)),path=require(a0_0x2f9ec1(0x1fa)),fs=require('fs'),installer=require(a0_0x2f9ec1(0x190)),scanner=require(a0_0x2f9ec1(0xb8)),schedulers=require(a0_0x2f9ec1(0x19c)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x2f9ec1(0xeb),LTM_DP_DAILY_DIGESTS=a0_0x2f9ec1(0x16b),LTM_DP_STATUS=a0_0x2f9ec1(0x88),LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS=a0_0x2f9ec1(0x1ea),LTM_DP_DRIFT_CHANNEL=a0_0x2f9ec1(0x1e2),LTM_DP_DRIFT_STATUS=a0_0x2f9ec1(0x1e6),LTM_DP_DRIFT_DETAILS=a0_0x2f9ec1(0x1ad),LTM_DP_DRIFT_LAST_CHECK=a0_0x2f9ec1(0xbe),SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':a0_0x2f9ec1(0xc7),'VACATION':a0_0x2f9ec1(0x1c7),'PARTY':a0_0x2f9ec1(0x179),'GUEST':a0_0x2f9ec1(0x199)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x2f9ec1(0x1bc)],SYSTEM_MODES[a0_0x2f9ec1(0x200)]],PERSONA_MAPPING={'generic':a0_0x2f9ec1(0xb3),'senior_aal':'PRIORITÃ„T:\x20Gesundheit/AAL.','family':a0_0x2f9ec1(0x19e),'single_comfort':a0_0x2f9ec1(0x145),'security':a0_0x2f9ec1(0x1ac)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x873d13){const _0x37ecb0=a0_0x2f9ec1;try{const _0x53e77a=[_0x37ecb0(0x15c),_0x37ecb0(0x74)];for(const _0x274727 of _0x53e77a){try{const _0x526298=await _0x873d13['getObjectAsync'](_0x274727);if(_0x526298)await _0x873d13[_0x37ecb0(0x192)](_0x274727);}catch(_0xe9fe70){}}}catch(_0x24ba76){}}async function checkLicense(_0x3163ae){return!![];}async function initHistory(_0x293b37){const _0x501bf8=a0_0x2f9ec1;try{const _0x1b3922=await _0x293b37[_0x501bf8(0x156)](_0x501bf8(0x182));_0x1b3922&&_0x1b3922['val']&&(_0x293b37[_0x501bf8(0xc0)]=JSON[_0x501bf8(0x1ed)](_0x1b3922[_0x501bf8(0xd0)]['toString']()));}catch(_0x2b0d0d){_0x293b37[_0x501bf8(0xc0)]=[];}try{const _0xeaaa59=await _0x293b37[_0x501bf8(0x156)](_0x501bf8(0xbd));if(_0xeaaa59&&_0xeaaa59[_0x501bf8(0xd0)])_0x293b37[_0x501bf8(0x126)]=JSON['parse'](_0xeaaa59[_0x501bf8(0xd0)]['toString']());}catch(_0x34ba52){_0x293b37[_0x501bf8(0x126)]=[];}if(_0x293b37[_0x501bf8(0xc0)]&&_0x293b37['eventHistory']['length']>0x0){_0x293b37[_0x501bf8(0xe4)][_0x501bf8(0xb2)]('Restoring\x20sensor\x20cache...');for(let _0x46c616=_0x293b37[_0x501bf8(0xc0)][_0x501bf8(0x178)]-0x1;_0x46c616>=0x0;_0x46c616--){const _0x295001=_0x293b37[_0x501bf8(0xc0)][_0x46c616];if(_0x295001&&_0x295001['id']!==undefined&&_0x295001[_0x501bf8(0x171)]!==undefined)_0x293b37[_0x501bf8(0xca)][_0x295001['id']]=_0x295001[_0x501bf8(0x171)];}}}function a0_0x4081(){const _0x4dce08=['[RESULT]','.\x20EVENTS:\x20','namespace','analysis.automation.triggerAction','Last\x20Check','indicator','toString','analysis.health.trendValue','Security\x20Monitor','data','main','63GDlvHy','analysis.automation.autoApply','Gemini\x20AI\x20initialized.','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','weatherInstance','response','Insulation\x20Score','1918330Itppyo','log','6711sDYgwt','boolean','replace','Keine\x20Termine.','[PYTHON]\x20','setupLtmScheduler','LTM.rawEventLog','Build\x20Topology','automation.triggerAction','payload','Description','analysis.training.status','TOPOLOGY_RESULT','dependencyInstallInProgress','date','LTM.trainingData.sequences','write','object','subscribeStates','triggerBriefing','switch','briefingJob','Train\x20Energy','driftAnalysisTimer','analysis.energy.forecast','targetId','enum.functions.*','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','description','Unbekannt','NORMAL','ltmJob','stateChange','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','toISOString','common','getGenerativeModel','isAlert','analysis.security.currentThreshold','analysis.training.triggerHealth','ANALYZE_SEQUENCE','isEmergency','debug','activityLevel','insulation','ack','analysis.health.todayVector','Success:\x20','setStateAsync','geminiApiKey','openweathermap','is_anomaly','analysis.security.topologyMatrix','Error\x20launching\x20Python:\x20','command','writable','analysis.security.lastScore','modeResetJob','livingContext','âš ï¸\x20SECURITY\x20ALARM:\x20','onReady','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','diagnosis','useCalendar','.\x20EMERGENCY:\x20','analysisHistory','@google/generative-ai','cogni-living\x20adapter\x20starting\x20(v','bind','Lernphase\x20(','startsWith','Missing\x20data','setupDriftAnalysisScheduler','.forecast.current.temperature','round','4548ZIdbKo','LTM.trainingData.thermodynamics','ðŸ“\x20Feedback\x20received:\x20','analysis.training','\x20Tage)','analysis.energy.insulationScore','.\x20KONTEXT:\x20','setObjectNotExistsAsync','analysis.automation.targetValue','ready','from','Alert\x20Status','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','error','confidence','26984ezPpcv','kontakt','door','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','Current\x20Threshold','analysis.training.triggerEnergy','Fokus\x20auf\x20Komfort.','temperature','analysis.security.lastCheck','getMonth','city','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','details','scanForDevices','Who\x20is\x20present?','analysis.automation.targetId','Gemini\x20Error:\x20','fenster','95xDSYLo','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','splice','text.alarm','pop','getStateAsync','now','[LOG]','analysisInterval','motion','Daily\x20Digests','analysis.history_debug_00','\x0aGrund:\x20','.NextHours.Location_1.Day_1.current.temp_value','Train\x20Comfort','toLowerCase','No\x20instance','dismissAutomation','subscribeForeignStatesAsync','rawEventLog','push','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','generateContent','currentSystemMode','Gait\x20Speed\x20Trend','getCalendarNames','LTM.dailyDigests','bewegung','Trigger\x20Analysis','online','VACATION','geminiModel','value','klima','name','constructor','latitude','Energy\x20Intelligence','onMessage','length','party','.Current.WeatherText','Â°C,\x20','HEALTH_RESULT','[RECORDER]\x20Error:\x20','onStateChange','Wetterdaten\x20deaktiviert.','Err:\x20','prÃ¤senz','events.history','enum.rooms.*','scanDevices','automationProposal','outdoorSensorId','alertReason','GAIT_RESULT','Kalender\x20deaktiviert.','lampe','aiPersona','baselineDrift','trim','rule','ANOMALY','./lib/installer','getOverviewData','delObjectAsync','Failed:\x20','analysis.health.gaitSpeed','join','Trend\x20Value','Unknown','search','guest','presenceDevices','pythonProcess','./lib/scheduler','setHours','Fokus\x20auf\x20Familienroutinen.','exitGraceTimer','unknown','extendObjectAsync','.forecast.current.temp','system','isProVersion','getEnums','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','keys','isGracePeriodActive','state','Skipped\x20(No\x20AI\x20or\x20Data)','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','PRIORITÃ„T:\x20Sicherheit.','LTM.driftAnalysis.driftDetails','unload','getFullYear','analysis.health.isAnomaly','analysis.security','Anomaly\x20Detected','enum','service.py','TREND_RESULT','ðŸ\x20Python\x20Pong','Activity-Level','kill','Briefing\x20Error:\x20','telegram','minDaysForBaseline','PARTY','daswetter','logDuplicates','Aktiv\x20(','triggerDailyDigest','devices','1029JKoobP','exports','inactivityThresholdHours','driftDetails','OK:\x20','vacation','floor','dimmer','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','Last\x20raw\x20event','TRAIN_ENERGY','licenseKey','setForeignStateAsync','light','indicator.alarm','message','accuweather','string','analysis.triggerBriefing','status','(((.+)+)+)+$','analysis.automation.description','heating','ltmStbWindowDays','Heating\x20Score','LTM','temperatur','existsSync','analysis.training.triggerTopology','ANALYZE_HEALTH','ANALYZE_TREND','forEach','LTM.driftAnalysis','analysis.lastResult','111622lzdYVK','stringify','LTM.driftAnalysis.baselineDrift','stdout','ENERGY_PREDICT_RESULT','getTime','LTM.baselineStatus','substring','âœ…\x20HEALTH\x20TRAINED.','parse','System\x20Mode','getForeignStateAsync','analysis.automation.patternDetected','25912OIjWOt','onUnload','getForeignObjectsAsync','system.isPresent','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','threshold','json','11gUHxpI','Training\x20Error:\x20','path','N/A','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','240355WwmUZN','.forecast.current.state','summary','GUEST','Raw\x20Log','setupModeResetScheduler','type','filter','isPresent','analysis.alertReason','âš ï¸\x20ALARM:\x20','Today\x20Vector\x20(15m)','analysis.trigger','presence','Trigger\x20Action','events.history_debug_00','values','.communicate.request','unshift','weatherunderground','Trigger\x20Briefing','TRAINING_COMPLETE','lastAlertState','events.lastEvent','cogni-living','communicate.request','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','TRAIN_COMFORT','.Current.Temperature','Auto\x20Apply','channel','config','analysis.training.triggerComfort','analysis.isAlert','toFixed','LTM.processingStatus','testContext','ENERGY_TRAIN_RESULT','shift','python3','TRAIN_SECURITY','ðŸ§ \x20Triggering\x20Security\x20Training...','stdin','Adapter','AI\x20Training','setState','location','success','map','Topology\x20Matrix','reason','window','Detected\x20Patterns','number','Trend','fill','cancel','sendTo','button','Gemini\x20Init\x20Error:\x20','PYTHON_EXE','callback','analysis.training.triggerSecurity','\x20=\x20','exitTimer','getMinutes','detected','analysisTimer','Kein\x20API\x20Key.','systemConfig','analysis.energy.heatingScore','.\x20SYSTEM_MODE:\x20','Temperature\x20Forecast','child_process','Health\x20Analysis','Thermodynamics','getDate','info','Analysiere\x20ausgewogen.','Event\x20History','genAI','analysis.health','Deaktiviert\x20(Pro-Feature)','./lib/scanner','system.presenceWho','text','BUTLER\x20Execution\x20Error:\x20','Anomaly\x20Score','analysis.analysisHistory','LTM.driftAnalysis.lastCheck','Success','eventHistory','calendarInstance','heizung','timestamp','ltmLtbWindowDays','KI-Modell\x20nicht\x20initialisiert','includes','normal','dailyDigests','Training\x20Status','sensorLastValues','endsWith','analysis.activitySummary','getHours','analysis.health.lastCheck','contact','val'];a0_0x4081=function(){return _0x4dce08;};return a0_0x4081();}async function initSystemConfig(_0x549f7e){const _0x1b5ab4=a0_0x2f9ec1;try{const _0x217a89=await _0x549f7e['getForeignObjectAsync']('system.config');if(_0x217a89&&_0x217a89['common'])_0x549f7e[_0x1b5ab4(0xaa)]={'latitude':_0x217a89[_0x1b5ab4(0x108)][_0x1b5ab4(0x175)]||0x0,'longitude':_0x217a89[_0x1b5ab4(0x108)]['longitude']||0x0,'city':_0x217a89[_0x1b5ab4(0x108)][_0x1b5ab4(0x149)]||''};}catch(_0x4c1b9b){}}async function createAllObjects(_0x5dabc4){const _0x585b8a=a0_0x2f9ec1;await _0x5dabc4['extendObjectAsync'](_0x585b8a(0x1a3),{'type':'channel','common':{'name':'System'},'native':{}}),await _0x5dabc4[_0x585b8a(0x1a1)](SYSTEM_DP_MODE,{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0x1ee),'type':_0x585b8a(0x1d3),'role':_0x585b8a(0x1a9),'read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL']},'native':{}}),await _0x5dabc4['setObjectNotExistsAsync'](_0x585b8a(0xb9),{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0x14d),'type':'string','role':_0x585b8a(0xba),'read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)]('events.lastEvent',{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0x1cb),'type':_0x585b8a(0x1d3),'role':_0x585b8a(0x1f7),'read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0x182),{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0xb4),'type':'string','role':_0x585b8a(0x1f7),'read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x1a1)](_0x585b8a(0x133),{'type':_0x585b8a(0x83),'common':{'name':_0x585b8a(0x91)},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0xa3),{'type':_0x585b8a(0x1a9),'common':{'name':'Train\x20Security','type':'boolean','role':_0x585b8a(0x9f),'read':!![],'write':!![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0x10c),{'type':'state','common':{'name':'Train\x20Health','type':_0x585b8a(0xe6),'role':_0x585b8a(0x9f),'read':!![],'write':!![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)]('analysis.training.triggerEnergy',{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0xfb),'type':_0x585b8a(0xe6),'role':_0x585b8a(0x9f),'read':!![],'write':!![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0x85),{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0x15f),'type':_0x585b8a(0xe6),'role':_0x585b8a(0x9f),'read':!![],'write':!![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)]('analysis.training.triggerTopology',{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0xec),'type':_0x585b8a(0xe6),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0xf0),{'type':'state','common':{'name':_0x585b8a(0xc9),'type':_0x585b8a(0x1d3),'role':_0x585b8a(0xba),'read':!![],'write':![]},'native':{}}),await _0x5dabc4['extendObjectAsync'](_0x585b8a(0x1b1),{'type':_0x585b8a(0x83),'common':{'name':_0x585b8a(0xd9)},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0x11d),{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0xbc),'type':_0x585b8a(0x9a),'role':_0x585b8a(0x171),'read':!![],'write':![]},'native':{}}),await _0x5dabc4['setObjectNotExistsAsync'](_0x585b8a(0x10b),{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0x143),'type':_0x585b8a(0x9a),'role':_0x585b8a(0x171),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x5dabc4['setObjectNotExistsAsync'](_0x585b8a(0x147),{'type':'state','common':{'name':_0x585b8a(0xd5),'type':_0x585b8a(0x1d3),'role':_0x585b8a(0xf3),'read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0x119),{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0x96),'type':_0x585b8a(0x1d3),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x1a1)](_0x585b8a(0xb6),{'type':'channel','common':{'name':_0x585b8a(0xaf)},'native':{}}),await _0x5dabc4['setObjectNotExistsAsync'](_0x585b8a(0xce),{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0xd5),'type':_0x585b8a(0x1d3),'role':_0x585b8a(0xf3),'read':!![],'write':![]},'native':{}}),await _0x5dabc4['setObjectNotExistsAsync'](_0x585b8a(0x1b0),{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0x1b2),'type':_0x585b8a(0xe6),'role':_0x585b8a(0xd6),'read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)]('analysis.health.trendDiagnosis',{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0x9b),'type':_0x585b8a(0x1d3),'role':'text','read':!![],'write':![]},'native':{}}),await _0x5dabc4['setObjectNotExistsAsync']('analysis.health.trendValue',{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0x196),'type':_0x585b8a(0x9a),'role':_0x585b8a(0x171),'read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0x113),{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0x208),'type':_0x585b8a(0x1d3),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0x194),{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0x169),'type':_0x585b8a(0x9a),'role':_0x585b8a(0x171),'read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x1a1)]('analysis.energy',{'type':'channel','common':{'name':_0x585b8a(0x176)},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0x135),{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0xe2),'type':_0x585b8a(0x1d3),'role':'text','read':!![],'write':![]},'native':{}}),await _0x5dabc4['setObjectNotExistsAsync']('analysis.energy.heatingScore',{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0x1da),'type':'string','role':_0x585b8a(0xba),'read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0xfd),{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0xad),'type':_0x585b8a(0x1d3),'role':_0x585b8a(0x1f7),'read':!![],'write':![]},'native':{}}),await _0x5dabc4['extendObjectAsync'](_0x585b8a(0x1db),{'type':_0x585b8a(0x83),'common':{'name':'LTM'},'native':{}}),await _0x5dabc4['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0x201),'type':_0x585b8a(0x1d3),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5dabc4['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0x15b),'type':'string','role':_0x585b8a(0x1f7),'read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0xf4),{'type':_0x585b8a(0x1a9),'common':{'name':'Sequences','type':_0x585b8a(0x1d3),'role':_0x585b8a(0x1f7),'read':!![],'write':![]},'native':{}}),await _0x5dabc4['setObjectNotExistsAsync']('LTM.trainingData.thermodynamics',{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0xb0),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0x71),{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0x16d),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0x1d4),{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0x79),'type':_0x585b8a(0xe6),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0x86),{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0x13b),'type':_0x585b8a(0xe6),'role':_0x585b8a(0x1d0),'read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0x206),{'type':'state','common':{'name':'Alert\x20Reason','type':_0x585b8a(0x1d3),'role':_0x585b8a(0x154),'read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)]('analysis.activitySummary',{'type':_0x585b8a(0x1a9),'common':{'name':'Activity\x20Summary','type':'string','role':_0x585b8a(0xba),'read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)]('analysis.automation.patternDetected',{'type':_0x585b8a(0x1a9),'common':{'name':'Pattern\x20Detected','type':_0x585b8a(0xe6),'role':_0x585b8a(0xd6),'read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0x1d7),{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0xef),'type':_0x585b8a(0x1d3),'role':_0x585b8a(0xba),'read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)]('analysis.automation.detectedPatterns',{'type':'state','common':{'name':_0x585b8a(0x99),'type':_0x585b8a(0x1d3),'role':_0x585b8a(0x1f7),'read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0x14e),{'type':'state','common':{'name':'Target\x20ID','type':_0x585b8a(0x1d3),'role':'text','read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0x138),{'type':_0x585b8a(0x1a9),'common':{'name':'Target\x20Value','type':'string','role':_0x585b8a(0xba),'read':!![],'write':![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0xdd),{'type':'state','common':{'name':_0x585b8a(0x82),'type':_0x585b8a(0xe6),'role':_0x585b8a(0xf9),'read':!![],'write':!![]},'native':{}}),await _0x5dabc4[_0x585b8a(0x137)](_0x585b8a(0xd4),{'type':_0x585b8a(0x1a9),'common':{'name':_0x585b8a(0x73),'type':_0x585b8a(0xe6),'role':'button','read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x5da67b){const _0x210e5b=a0_0x2f9ec1;try{const _0x22253a=await _0x5da67b[_0x210e5b(0x156)](SYSTEM_DP_MODE);_0x22253a&&_0x22253a[_0x210e5b(0xd0)]&&Object[_0x210e5b(0x75)](SYSTEM_MODES)[_0x210e5b(0xc6)](_0x22253a[_0x210e5b(0xd0)])?_0x5da67b[_0x210e5b(0x168)]=_0x22253a['val']:(_0x5da67b[_0x210e5b(0x168)]=SYSTEM_MODES[_0x210e5b(0x103)],await _0x5da67b[_0x210e5b(0x115)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x358d6e){_0x5da67b['currentSystemMode']=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0x2868ac){const _0x2f50e2=a0_0x2f9ec1;try{const _0xb175d2=await _0x2868ac[_0x2f50e2(0x156)](LTM_DP_RAW_LOG);if(_0xb175d2&&_0xb175d2[_0x2f50e2(0xd0)])_0x2868ac[_0x2f50e2(0x164)]=JSON[_0x2f50e2(0x1ed)](_0xb175d2[_0x2f50e2(0xd0)]);}catch(_0x32e14e){_0x2868ac[_0x2f50e2(0x164)]=[];}}async function saveRawEventLog(_0x13a2b1){const _0x1a6e9e=a0_0x2f9ec1;if(_0x13a2b1[_0x1a6e9e(0x164)][_0x1a6e9e(0x178)]>RAW_LOG_MAX_SIZE)_0x13a2b1[_0x1a6e9e(0x164)][_0x1a6e9e(0x153)](0x0,_0x13a2b1['rawEventLog'][_0x1a6e9e(0x178)]-RAW_LOG_MAX_SIZE);await _0x13a2b1['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x1a6e9e(0x1e5)](_0x13a2b1['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x5c5fc8){const _0x4f66f9=a0_0x2f9ec1;try{const _0x5bc392=await _0x5c5fc8[_0x4f66f9(0x156)](LTM_DP_DAILY_DIGESTS);if(_0x5bc392&&_0x5bc392['val'])_0x5c5fc8['dailyDigests']=JSON[_0x4f66f9(0x1ed)](_0x5bc392[_0x4f66f9(0xd0)]);}catch(_0x5023f){_0x5c5fc8[_0x4f66f9(0xc8)]=[];}await updateBaselineStatus(_0x5c5fc8);}async function saveDailyDigests(_0x73303f,_0x30fc02=!![]){const _0x2f4a98=a0_0x2f9ec1,_0x2ae870=_0x73303f[_0x2f4a98(0x84)][_0x2f4a98(0xc4)]||0x3c;_0x73303f[_0x2f4a98(0xc8)][_0x2f4a98(0x178)]>_0x2ae870&&_0x73303f[_0x2f4a98(0xc8)][_0x2f4a98(0x153)](0x0,_0x73303f[_0x2f4a98(0xc8)][_0x2f4a98(0x178)]-_0x2ae870);await _0x73303f[_0x2f4a98(0x115)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x2f4a98(0x1e5)](_0x73303f[_0x2f4a98(0xc8)]),'ack':!![]});if(_0x30fc02)await updateBaselineStatus(_0x73303f);}async function updateAnalysisHistory(_0x1c15bb,_0x6329b1){const _0x16bad4=a0_0x2f9ec1;_0x1c15bb[_0x16bad4(0x126)]['unshift'](_0x6329b1);if(_0x1c15bb[_0x16bad4(0x126)][_0x16bad4(0x178)]>HISTORY_MAX_SIZE)_0x1c15bb[_0x16bad4(0x126)][_0x16bad4(0x155)]();await _0x1c15bb['setStateAsync']('analysis.analysisHistory',{'val':JSON[_0x16bad4(0x1e5)](_0x1c15bb['analysisHistory']),'ack':!![]});}async function updateBaselineStatus(_0x43ed65){const _0x247299=a0_0x2f9ec1;if(!_0x43ed65[_0x247299(0x1a4)]){await _0x43ed65['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x247299(0xb7),'ack':!![]});return;}const _0x5e47c0=_0x43ed65[_0x247299(0xc8)]['length']>=(_0x43ed65[_0x247299(0x84)][_0x247299(0x1bb)]||0x7)?_0x247299(0x1bf)+_0x43ed65[_0x247299(0xc8)][_0x247299(0x178)]+_0x247299(0x134):_0x247299(0x12a)+_0x43ed65[_0x247299(0xc8)]['length']+'/'+(_0x43ed65[_0x247299(0x84)]['minDaysForBaseline']||0x7)+')';await _0x43ed65[_0x247299(0x115)](LTM_DP_BASELINE_STATUS,{'val':_0x5e47c0,'ack':!![]});}async function initSensorSubscriptions(_0x5e9bd8){const _0x4c0b3c=a0_0x2f9ec1,_0x4e8f6a=_0x5e9bd8[_0x4c0b3c(0x84)][_0x4c0b3c(0x1c1)];if(_0x4e8f6a)for(const _0x3c65b6 of _0x4e8f6a){await _0x5e9bd8[_0x4c0b3c(0x163)](_0x3c65b6['id']);}}async function initPresenceSubscriptions(_0x249fef){const _0x151963=a0_0x2f9ec1,_0x5964ce=_0x249fef['config'][_0x151963(0x19a)];if(_0x5964ce)for(const _0xe2e2c4 of _0x5964ce){await _0x249fef[_0x151963(0x163)](_0xe2e2c4);}}async function setupTelegramListener(_0x5761e4){const _0x26cb39=a0_0x2f9ec1,_0x15ba38=_0x5761e4[_0x26cb39(0x84)]['notifyTelegramInstance'];if(_0x5761e4[_0x26cb39(0x84)]['notifyTelegramEnabled']&&_0x15ba38)await _0x5761e4['subscribeForeignStatesAsync'](_0x15ba38+_0x26cb39(0x76));}async function checkWifiPresence(_0xbb3a2e){const _0x45673e=a0_0x2f9ec1;try{const _0x1bfac6=_0xbb3a2e[_0x45673e(0x84)]['presenceDevices']||[];let _0x210755=![];const _0x50318c=[];for(const _0x462349 of _0x1bfac6){try{const _0x3859b3=await _0xbb3a2e['getForeignStateAsync'](_0x462349);_0x3859b3&&(_0x3859b3[_0x45673e(0xd0)]===!![]||_0x3859b3['val']===_0x45673e(0x16e)||_0x3859b3[_0x45673e(0xd0)]===0x1)&&(_0x210755=!![],_0x50318c['push'](_0x462349));}catch(_0x4fe784){}}return await _0xbb3a2e[_0x45673e(0x115)](_0x45673e(0xb9),{'val':_0x50318c[_0x45673e(0x195)](',\x20'),'ack':!![]}),_0x210755&&(_0xbb3a2e[_0x45673e(0xa5)]&&(_0xbb3a2e[_0x45673e(0xe4)][_0x45673e(0xb2)]('WiFi\x20Presence\x20detected.'),abortExitTimer(_0xbb3a2e)),!_0xbb3a2e['isPresent']&&_0xbb3a2e['currentSystemMode']===SYSTEM_MODES['NORMAL']&&await setPresence(_0xbb3a2e,!![])),_0x210755;}catch(_0x530ff1){return![];}}function startExitTimer(_0x568980){const _0x2ce6ee=a0_0x2f9ec1;abortExitTimer(_0x568980),_0x568980[_0x2ce6ee(0x1a8)]=!![],_0x568980['exitGraceTimer']=setTimeout(()=>{_0x568980['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x568980[_0x2ce6ee(0xa5)]=setTimeout(()=>{setPresence(_0x568980,![]),_0x568980['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x1863e1){const _0x4da736=a0_0x2f9ec1;if(_0x1863e1[_0x4da736(0xa5)])clearTimeout(_0x1863e1['exitTimer']);if(_0x1863e1[_0x4da736(0x19f)])clearTimeout(_0x1863e1[_0x4da736(0x19f)]);_0x1863e1[_0x4da736(0xa5)]=null,_0x1863e1[_0x4da736(0x19f)]=null,_0x1863e1[_0x4da736(0x1a8)]=![];}async function setPresence(_0x1c8012,_0x1baba2){const _0x2857a7=a0_0x2f9ec1;if(_0x1c8012[_0x2857a7(0x205)]===_0x1baba2)return;_0x1c8012['isPresent']=_0x1baba2,await _0x1c8012[_0x2857a7(0x115)](_0x2857a7(0x1f4),{'val':_0x1baba2,'ack':!![]});}async function executeAutomationAction(_0x156428){const _0x356052=a0_0x2f9ec1;try{const _0x42dc91=await _0x156428[_0x356052(0x156)](_0x356052(0x14e)),_0x44cd59=await _0x156428[_0x356052(0x156)]('analysis.automation.targetValue');if(_0x42dc91&&_0x42dc91[_0x356052(0xd0)]&&_0x44cd59){const _0x5ba82e=_0x42dc91[_0x356052(0xd0)];let _0x6ebc30=_0x44cd59[_0x356052(0xd0)];try{_0x6ebc30=JSON[_0x356052(0x1ed)](_0x6ebc30);}catch(_0x4c60d8){}_0x156428[_0x356052(0xe4)][_0x356052(0xb2)](_0x356052(0x106)+_0x5ba82e+_0x356052(0xa4)+_0x6ebc30),await _0x156428[_0x356052(0x1ce)](_0x5ba82e,_0x6ebc30);}else _0x156428['log']['warn'](_0x356052(0x1a6));}catch(_0xf08b5f){_0x156428[_0x356052(0xe4)][_0x356052(0x13d)](_0x356052(0xbb)+_0xf08b5f[_0x356052(0x1d1)]);}}async function processSensorEvent(_0x59ea05,_0x510406,_0x524623,_0x5b35e4){const _0x25a50d=a0_0x2f9ec1;if(!_0x5b35e4)return;const _0x56b675=_0x524623[_0x25a50d(0xd0)],_0x3edfda=Date[_0x25a50d(0x157)](),_0xe02a5e=_0x59ea05[_0x25a50d(0xca)][_0x510406];_0x59ea05['sensorLastValues'][_0x510406]=_0x56b675;if(!_0x5b35e4[_0x25a50d(0x1be)]&&_0xe02a5e!=undefined&&_0xe02a5e==_0x56b675)return;const _0x4fa144=(_0x5b35e4[_0x25a50d(0x203)]||'')['toLowerCase'](),_0x2d3793=_0x4fa144[_0x25a50d(0xc6)](_0x25a50d(0x146))||_0x4fa144[_0x25a50d(0xc6)](_0x25a50d(0x1dc))||_0x4fa144[_0x25a50d(0xc6)](_0x25a50d(0x172))||_0x4fa144[_0x25a50d(0xc6)](_0x25a50d(0xc2));_0x59ea05[_0x25a50d(0x1a4)]&&_0x2d3793&&recordThermodynamics(_0x59ea05,_0x510406,_0x56b675,_0x5b35e4['location']);const _0x25a83a={'timestamp':_0x3edfda,'id':_0x510406,'name':_0x5b35e4[_0x25a50d(0x173)],'type':_0x5b35e4[_0x25a50d(0x203)],'location':_0x5b35e4[_0x25a50d(0x93)],'value':_0x56b675};_0x59ea05[_0x25a50d(0xc0)][_0x25a50d(0x77)](_0x25a83a);if(_0x59ea05['eventHistory']['length']>HISTORY_MAX_SIZE)_0x59ea05[_0x25a50d(0xc0)][_0x25a50d(0x155)]();await _0x59ea05[_0x25a50d(0x115)](_0x25a50d(0x7c),{'val':JSON['stringify'](_0x25a83a),'ack':!![]}),await _0x59ea05['setStateAsync']('events.history',{'val':JSON[_0x25a50d(0x1e5)](_0x59ea05[_0x25a50d(0xc0)]),'ack':!![]});_0x59ea05[_0x25a50d(0x1a4)]&&(_0x59ea05[_0x25a50d(0x164)][_0x25a50d(0x165)](_0x25a83a),await saveRawEventLog(_0x59ea05),recordSequence(_0x59ea05,_0x25a83a));if(_0x5b35e4['isExit']&&_0x56b675===!![]){if(_0x59ea05[_0x25a50d(0x205)]&&!_0x59ea05['isGracePeriodActive'])startExitTimer(_0x59ea05);else{if(!_0x59ea05[_0x25a50d(0x205)])setPresence(_0x59ea05,!![]);}}else{if(_0x5b35e4[_0x25a50d(0x203)]===_0x25a50d(0x15a)&&_0x56b675===!![]){if(_0x59ea05[_0x25a50d(0xa5)])abortExitTimer(_0x59ea05);if(!_0x59ea05[_0x25a50d(0x205)]&&_0x59ea05[_0x25a50d(0x168)]===SYSTEM_MODES[_0x25a50d(0x103)])setPresence(_0x59ea05,!![]);}}}async function recordThermodynamics(_0x105416,_0x33444e,_0x2d9d18,_0xc1e17a){const _0x578326=a0_0x2f9ec1,_0x106685=await getOutsideTemperatureNumeric(_0x105416),_0x147229=await _0x105416[_0x578326(0x156)]('LTM.trainingData.thermodynamics');let _0x2014b5=[];if(_0x147229&&_0x147229[_0x578326(0xd0)])try{_0x2014b5=JSON[_0x578326(0x1ed)](_0x147229[_0x578326(0xd0)]);}catch(_0x597336){}_0x2014b5[_0x578326(0x165)]({'ts':Date[_0x578326(0x157)](),'room':_0xc1e17a||_0x578326(0x197),'t_in':_0x2d9d18,'t_out':_0x106685});if(_0x2014b5[_0x578326(0x178)]>THERMO_LOG_SIZE)_0x2014b5[_0x578326(0x8b)]();await _0x105416[_0x578326(0x115)]('LTM.trainingData.thermodynamics',{'val':JSON['stringify'](_0x2014b5),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x3b397b){const _0x55430b=a0_0x2f9ec1;if(_0x3b397b['config'][_0x55430b(0x186)])try{const _0x357007=await _0x3b397b[_0x55430b(0x1ef)](_0x3b397b[_0x55430b(0x84)]['outdoorSensorId']);if(_0x357007&&_0x357007[_0x55430b(0xd0)]!==undefined&&_0x357007['val']!==null)return parseFloat(_0x357007[_0x55430b(0xd0)]);}catch(_0xf8f965){}const _0x114287=_0x3b397b['config']['weatherInstance'];if(!_0x3b397b[_0x55430b(0x84)]['useWeather']||!_0x114287)return null;try{let _0x29a3ba='';if(_0x114287[_0x55430b(0xc6)](_0x55430b(0x1d2)))_0x29a3ba=_0x114287+_0x55430b(0x81);else{if(_0x114287[_0x55430b(0xc6)](_0x55430b(0x1bd)))_0x29a3ba=_0x114287+_0x55430b(0x15e);else{if(_0x114287['includes'](_0x55430b(0x117)))_0x29a3ba=_0x114287+_0x55430b(0x12e);else{if(_0x114287[_0x55430b(0xc6)](_0x55430b(0x78)))_0x29a3ba=_0x114287+_0x55430b(0x1a2);}}}if(_0x29a3ba){const _0x11fa31=await _0x3b397b['getForeignStateAsync'](_0x29a3ba);if(_0x11fa31&&_0x11fa31[_0x55430b(0xd0)]!==undefined&&_0x11fa31['val']!==null)return parseFloat(_0x11fa31[_0x55430b(0xd0)]);}}catch(_0x845c59){}return null;}async function recordSequence(_0x417c4a,_0x4dc110){const _0x4addf7=a0_0x2f9ec1,_0x28e25c=(_0x4dc110[_0x4addf7(0x203)]||'')['toLowerCase'](),_0x5ea581=[_0x4addf7(0x15a),_0x4addf7(0x16c),_0x4addf7(0x181),_0x4addf7(0x72),'occupancy',_0x4addf7(0x141),'tÃ¼r',_0x4addf7(0x98),_0x4addf7(0x150),_0x4addf7(0xcf),_0x4addf7(0x140),_0x4addf7(0x1cf),'licht',_0x4addf7(0xf9),'schalter',_0x4addf7(0x1c9),_0x4addf7(0x18a)];if(!_0x5ea581['some'](_0x2af72d=>_0x28e25c[_0x4addf7(0xc6)](_0x2af72d)))return;if(!_0x4dc110[_0x4addf7(0x171)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x4addf7(0x165)]({'loc':_0x4dc110[_0x4addf7(0x93)]||_0x4addf7(0x197),'id':_0x4dc110['id'],'ts':Date[_0x4addf7(0x157)]()}),sequenceTimer=setTimeout(async()=>{const _0x26ad2b=_0x4addf7;if(activeSequence[_0x26ad2b(0x178)]>0x1)await saveCompletedSequence(_0x417c4a);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x17ae55){const _0x2fbd61=a0_0x2f9ec1;try{const _0x1acba7=await _0x17ae55['getStateAsync'](_0x2fbd61(0xf4));let _0x190043=[];if(_0x1acba7&&_0x1acba7['val'])try{_0x190043=JSON[_0x2fbd61(0x1ed)](_0x1acba7['val']);}catch(_0x157f70){}const _0x213386=activeSequence[0x0]['ts'],_0x6e8e11=activeSequence['map'](_0x2b0bb0=>({'loc':_0x2b0bb0['loc'],'t_delta':Math[_0x2fbd61(0x12f)]((_0x2b0bb0['ts']-_0x213386)/0x3e8)})),_0x45df9c={'timestamp':new Date(_0x213386)[_0x2fbd61(0x107)](),'steps':_0x6e8e11,'duration':Math['round']((activeSequence[activeSequence[_0x2fbd61(0x178)]-0x1]['ts']-_0x213386)/0x3e8),'daytime':new Date(_0x213386)[_0x2fbd61(0xcd)]()};_0x190043['push'](_0x45df9c);if(_0x190043[_0x2fbd61(0x178)]>MAX_TRAINING_SET_SIZE)_0x190043[_0x2fbd61(0x8b)]();await _0x17ae55[_0x2fbd61(0x115)](_0x2fbd61(0xf4),{'val':JSON['stringify'](_0x190043),'ack':!![]}),runSecurityCheck(_0x17ae55,_0x45df9c);}catch(_0x57d6bb){_0x17ae55[_0x2fbd61(0xe4)][_0x2fbd61(0x13d)](_0x2fbd61(0x17d)+_0x57d6bb[_0x2fbd61(0x1d1)]);}}function runSecurityCheck(_0x17cf2f,_0x4db1f){const _0x18d619=a0_0x2f9ec1;if(!_0x17cf2f[_0x18d619(0x1a4)])return;sendToPython(_0x17cf2f,_0x18d619(0x10d),{'sequence':_0x4db1f});}async function createDailyDigest(_0x2223dd){const _0x620c9d=a0_0x2f9ec1;if(!_0x2223dd[_0x620c9d(0x1a4)])return;await _0x2223dd[_0x620c9d(0x115)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x2223dd[_0x620c9d(0x170)]||_0x2223dd[_0x620c9d(0x164)][_0x620c9d(0x178)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x2223dd[_0x620c9d(0x115)](LTM_DP_STATUS,{'val':_0x620c9d(0x1aa),'ack':!![]});return;}const _0x15bbc8=JSON[_0x620c9d(0x1ed)](JSON[_0x620c9d(0x1e5)](_0x2223dd[_0x620c9d(0x164)])),_0x4f19a0=_0x15bbc8[_0x620c9d(0x178)],_0x115f6d=_0x620c9d(0x122)+JSON[_0x620c9d(0x1e5)](_0x15bbc8);try{const _0x23a1fc=await _0x2223dd['geminiModel'][_0x620c9d(0x167)](_0x115f6d),_0x678a29=JSON[_0x620c9d(0x1ed)](_0x23a1fc['response'][_0x620c9d(0xba)]()[_0x620c9d(0xe7)](/```json|```/g,'')[_0x620c9d(0x18d)]()),_0xc2e22a={'timestamp':new Date()[_0x620c9d(0x107)](),'eventCount':_0x4f19a0,'summary':_0x678a29[_0x620c9d(0x1ff)]||'Digest','activityLevel':_0x678a29[_0x620c9d(0x110)]||'normal','systemMode':_0x2223dd[_0x620c9d(0x168)]};_0x2223dd[_0x620c9d(0xc8)]['push'](_0xc2e22a),await saveDailyDigests(_0x2223dd),_0x2223dd['rawEventLog']=[],await saveRawEventLog(_0x2223dd),await _0x2223dd[_0x620c9d(0x115)](LTM_DP_STATUS,{'val':_0x620c9d(0xbf),'ack':!![]});if(_0x2223dd[_0x620c9d(0x1a4)])sendToPython(_0x2223dd,_0x620c9d(0x1df),{'digest':_0xc2e22a});}catch(_0x36191c){_0x2223dd[_0x620c9d(0xe4)][_0x620c9d(0x13d)](_0x36191c[_0x620c9d(0x1d1)]);}}async function runBaselineDriftAnalysis(_0x5da0e5){const _0xe85a9d=a0_0x2f9ec1;if(!_0x5da0e5[_0xe85a9d(0x1a4)]||!_0x5da0e5['geminiModel'])return;const _0x2c8b50=_0x5da0e5[_0xe85a9d(0x84)][_0xe85a9d(0x1d9)]||0xe;if(_0x5da0e5[_0xe85a9d(0xc8)]['length']<_0x2c8b50+0x7){await _0x5da0e5[_0xe85a9d(0x115)](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x4c3162=_0x5da0e5[_0xe85a9d(0xc8)]['slice'](-_0x2c8b50),_0x530c2a=_0x5da0e5[_0xe85a9d(0xc8)]['slice'](0x0,_0x5da0e5[_0xe85a9d(0xc8)][_0xe85a9d(0x178)]-_0x2c8b50),_0x10ffaa='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON[_0xe85a9d(0x1e5)](_0x530c2a)+'\x0aSTB:\x20'+JSON[_0xe85a9d(0x1e5)](_0x4c3162);try{const _0x5b579a=await _0x5da0e5[_0xe85a9d(0x170)][_0xe85a9d(0x167)](_0x10ffaa),_0x39dfff=JSON['parse'](_0x5b579a['response'][_0xe85a9d(0xba)]()[_0xe85a9d(0xe7)](/```json|```/g,'')[_0xe85a9d(0x18d)]());_0x39dfff[_0xe85a9d(0x18c)]&&(await _0x5da0e5['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x39dfff['baselineDrift'],'ack':!![]}),await _0x5da0e5[_0xe85a9d(0x115)](LTM_DP_DRIFT_DETAILS,{'val':_0x39dfff[_0xe85a9d(0x1c5)],'ack':!![]}),await _0x5da0e5[_0xe85a9d(0x115)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0xe85a9d(0x157)](),'ack':!![]}));}catch(_0x20d6c6){}}async function sendMorningBriefing(_0x29678c){const _0xad769=a0_0x2f9ec1;if(!_0x29678c[_0xad769(0x170)])return;try{const _0xa579ee=_0xad769(0x100),_0x51ef4a=await _0x29678c['geminiModel'][_0xad769(0x167)](_0xa579ee),_0x2964d4=_0x51ef4a[_0xad769(0xe1)][_0xad769(0xba)]();sendNotification(_0x29678c,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x2964d4);}catch(_0x31af34){_0x29678c[_0xad769(0xe4)]['error'](_0xad769(0x1b9)+_0x31af34[_0xad769(0x1d1)]);}}function stopPythonService(_0x1bdd9e){const _0xe7806a=a0_0x2f9ec1;if(_0x1bdd9e[_0xe7806a(0x19b)]){try{_0x1bdd9e['pythonProcess'][_0xe7806a(0x1b8)]();}catch(_0x1203e0){}_0x1bdd9e[_0xe7806a(0x19b)]=null;}}function sendToPython(_0x522a25,_0x3e6ad4,_0x49f787={}){const _0x548ba1=a0_0x2f9ec1;if(!_0x522a25['pythonProcess']||!_0x522a25['pythonProcess'][_0x548ba1(0x8f)][_0x548ba1(0x11c)])return;const _0x403c4b=JSON[_0x548ba1(0x1e5)]({'command':_0x3e6ad4,..._0x49f787});try{_0x522a25[_0x548ba1(0x19b)][_0x548ba1(0x8f)][_0x548ba1(0xf5)](_0x403c4b+'\x0a');}catch(_0x1ac69d){}}function runPythonHealthCheck(_0x161693){const _0x1042d0=a0_0x2f9ec1;if(!_0x161693[_0x1042d0(0xc8)]||_0x161693['dailyDigests'][_0x1042d0(0x178)]<0x2)return;const _0x2667ee=_0x161693[_0x1042d0(0xc8)][_0x1042d0(0x95)](_0x3aa413=>{const _0xa275=_0x1042d0,_0x294a42=(_0x3aa413[_0xa275(0x110)]||'')[_0xa275(0x160)]();return ACTIVITY_LEVEL_MAP[_0x294a42]||0x32;});sendToPython(_0x161693,_0x1042d0(0x1e0),{'values':_0x2667ee,'tag':_0x1042d0(0x1b7)});}function handlePythonResult(_0xd1586f,_0x4ecf91){const _0x838ff5=a0_0x2f9ec1;if(_0x4ecf91[_0x838ff5(0x203)]==='PONG')_0xd1586f[_0x838ff5(0xe4)][_0x838ff5(0x10f)](_0x838ff5(0x1b6));else{if(_0x4ecf91['type']==='SECURITY_RESULT'){const {anomaly_score:_0x1171d6,is_anomaly:_0x303934,threshold:_0x34b43c,explanation:_0xafb74c}=_0x4ecf91[_0x838ff5(0xee)];_0xd1586f['log'][_0x838ff5(0xb2)](_0x838ff5(0x1f5)+_0x1171d6[_0x838ff5(0x87)](0x5)+'\x20->\x20'+(_0x303934?_0x838ff5(0x18f):'OK')),_0xd1586f[_0x838ff5(0x115)]('analysis.security.lastScore',{'val':_0x1171d6,'ack':!![]}),_0xd1586f['setStateAsync'](_0x838ff5(0x147),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x34b43c)_0xd1586f[_0x838ff5(0x115)](_0x838ff5(0x10b),{'val':_0x34b43c,'ack':!![]});if(_0x303934){let _0x67d117=_0x838ff5(0x166)+_0x1171d6['toFixed'](0x4)+')';if(_0xafb74c&&_0xafb74c!==_0x838ff5(0x197))_0x67d117+=_0x838ff5(0x15d)+_0xafb74c;_0xd1586f[_0x838ff5(0x115)]('analysis.isAlert',{'val':!![],'ack':!![]}),_0xd1586f[_0x838ff5(0x115)](_0x838ff5(0x206),{'val':_0x67d117,'ack':!![]}),sendNotification(_0xd1586f,_0x838ff5(0x120)+_0x67d117,![],!![]);}}else{if(_0x4ecf91[_0x838ff5(0x203)]===_0x838ff5(0x7a)){const _0x4b3fc4=_0x4ecf91[_0x838ff5(0xee)][_0x838ff5(0x14b)]||'',_0x1b5318=_0x4ecf91[_0x838ff5(0xee)][_0x838ff5(0x1f6)],_0x3b2b17=_0x4ecf91[_0x838ff5(0xee)][_0x838ff5(0x94)]?_0x838ff5(0x114)+new Date()['toLocaleTimeString']()+'\x20('+_0x4b3fc4+')':_0x838ff5(0x193)+_0x4ecf91['payload'][_0x838ff5(0x97)];_0xd1586f['setStateAsync'](_0x838ff5(0xf0),{'val':_0x3b2b17,'ack':!![]});if(_0x4ecf91['payload']['success']&&_0x1b5318)_0xd1586f[_0x838ff5(0x115)](_0x838ff5(0x10b),{'val':_0x1b5318,'ack':!![]});}else{if(_0x4ecf91['type']==='COMFORT_RESULT'){const {patterns:_0x27a4a3}=_0x4ecf91['payload'];if(_0x27a4a3&&_0x27a4a3[_0x838ff5(0x178)]>0x0){_0xd1586f[_0x838ff5(0xe4)]['info'](_0x838ff5(0x7f)+_0x27a4a3[_0x838ff5(0x178)]+'\x20new\x20patterns.'),_0xd1586f['setStateAsync']('analysis.automation.detectedPatterns',{'val':JSON['stringify'](_0x27a4a3),'ack':!![]});const _0x34481c=_0x27a4a3[0x0],_0x258c4e='Regel\x20erkannt:\x20'+_0x34481c[_0x838ff5(0x18e)]+'\x20('+(_0x34481c[_0x838ff5(0x13e)]*0x64)[_0x838ff5(0x87)](0x0)+'%)';_0xd1586f[_0x838ff5(0x115)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0xd1586f['setStateAsync']('analysis.automation.description',{'val':_0x258c4e,'ack':!![]});}else _0xd1586f[_0x838ff5(0xe4)][_0x838ff5(0xb2)](_0x838ff5(0x14a)),_0xd1586f[_0x838ff5(0x115)](_0x838ff5(0x1f0),{'val':![],'ack':!![]}),_0xd1586f[_0x838ff5(0x115)]('analysis.automation.detectedPatterns',{'val':'[]','ack':!![]});}else{if(_0x4ecf91[_0x838ff5(0x203)]===_0x838ff5(0x8a)){if(_0x4ecf91['payload']['success'])try{const _0x739132=JSON[_0x838ff5(0x1ed)](_0x4ecf91[_0x838ff5(0xee)][_0x838ff5(0x14b)]);if(_0x739132[_0x838ff5(0x111)])_0xd1586f['setStateAsync'](_0x838ff5(0x135),{'val':JSON['stringify'](_0x739132[_0x838ff5(0x111)]),'ack':!![]});if(_0x739132[_0x838ff5(0x1d8)])_0xd1586f[_0x838ff5(0x115)](_0x838ff5(0xab),{'val':JSON[_0x838ff5(0x1e5)](_0x739132[_0x838ff5(0x1d8)]),'ack':!![]});}catch(_0x2a2c6b){}}else{if(_0x4ecf91[_0x838ff5(0x203)]==='HEALTH_TRAIN_RESULT'){if(_0x4ecf91['payload'][_0x838ff5(0x94)])_0xd1586f[_0x838ff5(0xe4)]['info'](_0x838ff5(0x1ec));}else{if(_0x4ecf91[_0x838ff5(0x203)]===_0x838ff5(0x17c))_0xd1586f[_0x838ff5(0x115)](_0x838ff5(0xce),{'val':new Date()[_0x838ff5(0x107)](),'ack':!![]}),_0xd1586f[_0x838ff5(0x115)](_0x838ff5(0x1b0),{'val':_0x4ecf91[_0x838ff5(0xee)][_0x838ff5(0x118)],'ack':!![]});else{if(_0x4ecf91['type']===_0x838ff5(0x1b5))_0xd1586f[_0x838ff5(0x115)]('analysis.health.trendDiagnosis',{'val':_0x4ecf91[_0x838ff5(0xee)][_0x838ff5(0x123)],'ack':!![]}),_0xd1586f[_0x838ff5(0x115)](_0x838ff5(0xd8),{'val':_0x4ecf91[_0x838ff5(0xee)]['change_percent'],'ack':!![]});else{if(_0x4ecf91[_0x838ff5(0x203)]===_0x838ff5(0x188)){const {speed_trend:_0x1de281}=_0x4ecf91[_0x838ff5(0xee)];if(_0x1de281!==undefined)_0xd1586f[_0x838ff5(0x115)](_0x838ff5(0x194),{'val':_0x1de281,'ack':!![]});}else{if(_0x4ecf91['type']===_0x838ff5(0x1e8)){const {forecast:_0x32cbf7}=_0x4ecf91[_0x838ff5(0xee)];if(_0x32cbf7)_0xd1586f['setStateAsync'](_0x838ff5(0xfd),{'val':JSON[_0x838ff5(0x1e5)](_0x32cbf7),'ack':!![]});}else{if(_0x4ecf91[_0x838ff5(0x203)]===_0x838ff5(0xf1)){const {data:_0x39df33}=_0x4ecf91['payload'];_0x39df33&&(_0xd1586f[_0x838ff5(0xe4)][_0x838ff5(0xb2)]('ðŸ•¸ï¸\x20Topology\x20Map\x20updated.'),_0xd1586f[_0x838ff5(0x115)]('analysis.security.topologyMatrix',{'val':JSON[_0x838ff5(0x1e5)](_0x39df33),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0xb1e341){const _0x4c397a=a0_0x2f9ec1;let _0x30aad3=_0x4c397a(0x8c);if(fs[_0x4c397a(0x1dd)](installer[_0x4c397a(0xa1)]))_0x30aad3=installer[_0x4c397a(0xa1)];try{const _0x3a37a9=path[_0x4c397a(0x195)](__dirname,'python_service',_0x4c397a(0x1b4));_0xb1e341[_0x4c397a(0x19b)]=spawn(_0x30aad3,[_0x3a37a9]),_0xb1e341['pythonProcess'][_0x4c397a(0x1e7)]['on'](_0x4c397a(0xda),_0x54ff5a=>{const _0x26ced7=_0x4c397a,_0x406b02=_0x54ff5a[_0x26ced7(0xd7)]()['split']('\x0a');_0x406b02[_0x26ced7(0x1e1)](_0x293f40=>{const _0x774ced=_0x26ced7,_0x7f5f12=_0x293f40['trim']();if(!_0x7f5f12)return;if(_0x7f5f12[_0x774ced(0x12b)](_0x774ced(0x158)))_0xb1e341[_0x774ced(0xe4)][_0x774ced(0x10f)](_0x774ced(0xe9)+_0x7f5f12[_0x774ced(0x1eb)](0x5)['trim']());else{if(_0x7f5f12[_0x774ced(0x12b)](_0x774ced(0xd1)))try{const _0x3789f4=JSON[_0x774ced(0x1ed)](_0x7f5f12['substring'](0x8)[_0x774ced(0x18d)]());handlePythonResult(_0xb1e341,_0x3789f4);}catch(_0x3379d1){}}});}),_0xb1e341[_0x4c397a(0x19b)]['on']('close',_0x51e318=>{const _0x37f39c=_0x4c397a;_0xb1e341[_0x37f39c(0x19b)]=null;});}catch(_0x60b57b){_0xb1e341[_0x4c397a(0xe4)]['error'](_0x4c397a(0x11a)+_0x60b57b['message']);}}async function runAutopilot(_0x25e066){const _0x340b81=a0_0x2f9ec1;_0x25e066[_0x340b81(0xe4)]['debug'](_0x340b81(0x1ca)),await runGeminiAnalysis(_0x25e066),updateHealthVector(_0x25e066),triggerGaitAnalysis(_0x25e066),triggerEnergyPrediction(_0x25e066);}async function triggerGaitAnalysis(_0x4bef79){const _0x19cd31=a0_0x2f9ec1;if(!_0x4bef79[_0x19cd31(0x1a4)])return;try{const _0x2d6fe4=await _0x4bef79[_0x19cd31(0x156)]('LTM.trainingData.sequences');_0x2d6fe4&&_0x2d6fe4[_0x19cd31(0xd0)]&&sendToPython(_0x4bef79,'ANALYZE_GAIT',{'sequences':JSON[_0x19cd31(0x1ed)](_0x2d6fe4[_0x19cd31(0xd0)])});}catch(_0x500b97){}}async function triggerEnergyPrediction(_0x313f90){const _0x15a914=a0_0x2f9ec1;if(!_0x313f90['isProVersion'])return;try{const _0x46a9f1=await getOutsideTemperatureNumeric(_0x313f90);if(_0x46a9f1===null)return;const _0x262fd5={},_0x57946a=_0x313f90[_0x15a914(0x84)]['devices']||[];for(const _0x32c22d of _0x57946a){if(_0x32c22d['type']===_0x15a914(0x146)&&_0x32c22d[_0x15a914(0x93)]){const _0x5db9ca=_0x313f90[_0x15a914(0xca)][_0x32c22d['id']];if(_0x5db9ca!==undefined)_0x262fd5[_0x32c22d[_0x15a914(0x93)]]=_0x5db9ca;}}Object[_0x15a914(0x1a7)](_0x262fd5)['length']>0x0&&sendToPython(_0x313f90,'PREDICT_ENERGY',{'current_temps':_0x262fd5,'t_out':_0x46a9f1});}catch(_0x2a8c63){}}function updateHealthVector(_0x148694){const _0x1c14e0=a0_0x2f9ec1;if(!_0x148694['rawEventLog']||_0x148694['rawEventLog']['length']===0x0)return;const _0x2c6cfb=new Array(0x60)[_0x1c14e0(0x9c)](0x0),_0x1c8b57=new Date()[_0x1c14e0(0x19d)](0x0,0x0,0x0,0x0);_0x148694['rawEventLog'][_0x1c14e0(0x1e1)](_0x5be6f9=>{const _0x25dda3=_0x1c14e0,_0x3d8ce2=new Date(_0x5be6f9[_0x25dda3(0xc3)]);if(_0x3d8ce2[_0x25dda3(0x1e9)]()>=_0x1c8b57){const _0x34906b=_0x3d8ce2['getHours'](),_0x30dcf9=_0x3d8ce2[_0x25dda3(0xa6)](),_0x4cc039=_0x34906b*0x4+Math[_0x25dda3(0x1c8)](_0x30dcf9/0xf);if(_0x4cc039>=0x0&&_0x4cc039<0x60)_0x2c6cfb[_0x4cc039]++;}}),_0x148694[_0x1c14e0(0x115)](_0x1c14e0(0x113),{'val':JSON[_0x1c14e0(0x1e5)](_0x2c6cfb),'ack':!![]});}async function getWeatherContext(_0x1bec33){const _0xfd5cf5=a0_0x2f9ec1;if(!_0x1bec33[_0xfd5cf5(0x84)]['useWeather']||!_0x1bec33[_0xfd5cf5(0x84)][_0xfd5cf5(0xe0)])return _0xfd5cf5(0x17f);try{const _0x2621b8=_0x1bec33[_0xfd5cf5(0x84)][_0xfd5cf5(0xe0)];let _0x3edb5f=await _0x1bec33['getForeignStateAsync'](_0x2621b8+_0xfd5cf5(0x81));if(!_0x3edb5f)_0x3edb5f=await _0x1bec33[_0xfd5cf5(0x1ef)](_0x2621b8+_0xfd5cf5(0x12e));let _0x2a0e1a=await _0x1bec33['getForeignStateAsync'](_0x2621b8+_0xfd5cf5(0x17a));if(!_0x2a0e1a)_0x2a0e1a=await _0x1bec33[_0xfd5cf5(0x1ef)](_0x2621b8+_0xfd5cf5(0x1fe));if(_0x3edb5f&&_0x2a0e1a)return _0x3edb5f[_0xfd5cf5(0xd0)]+_0xfd5cf5(0x17b)+_0x2a0e1a['val'];}catch(_0x1430f0){}return'Keine\x20Wetterdaten\x20verfÃ¼gbar.';}async function getCalendarContext(_0x85f8fc){const _0x39cd1f=a0_0x2f9ec1;if(!_0x85f8fc[_0x39cd1f(0x84)][_0x39cd1f(0x124)]||!_0x85f8fc[_0x39cd1f(0x84)][_0x39cd1f(0xc1)])return _0x39cd1f(0x189);return _0x39cd1f(0xe8);}async function getCalendarNames(_0x1c2ddd,_0x30ea93){return[];}async function saveFeedback(_0x40ae5b,_0x26ef8a){const _0x2d06e1=a0_0x2f9ec1;_0x40ae5b[_0x2d06e1(0xe4)][_0x2d06e1(0xb2)](_0x2d06e1(0x132)+_0x26ef8a['rating']);}async function runGeminiAnalysis(_0x3524e3,_0x249123=''){const _0x19d54d=a0_0x2f9ec1;if(!_0x3524e3['geminiModel'])return;if(_0x3524e3[_0x19d54d(0xc0)][_0x19d54d(0x178)]===0x0)return;const _0x533937=_0x3524e3['eventHistory']['slice'](0x0,0xf),_0x3b84aa=await getWeatherContext(_0x3524e3),_0x5389e4=_0x3524e3['currentSystemMode'],_0x35422e=PERSONA_MAPPING[_0x3524e3[_0x19d54d(0x84)][_0x19d54d(0x18b)]||'generic'],_0xa40ba0=_0x3524e3[_0x19d54d(0x84)][_0x19d54d(0x11f)]||'Keine\x20Details.';let _0x46f894=_0x19d54d(0x102);try{const _0x3889e9=await _0x3524e3['getStateAsync'](_0x19d54d(0xb9));if(_0x3889e9&&_0x3889e9[_0x19d54d(0xd0)])_0x46f894=_0x3889e9['val'];}catch(_0x4c595c){}let _0x5889e5=![];try{const _0x23d38d=await _0x3524e3['getStateAsync'](_0x19d54d(0xdd));if(_0x23d38d&&_0x23d38d['val'])_0x5889e5=!![];}catch(_0x3157d9){}const _0x42ef09=_0x19d54d(0x13c)+_0x35422e+_0x19d54d(0x136)+_0xa40ba0+_0x19d54d(0xac)+_0x5389e4+'.\x20WETTER:\x20'+_0x3b84aa+'.\x20ANWESEND:\x20'+_0x46f894+_0x19d54d(0xd2)+JSON[_0x19d54d(0x1e5)](_0x533937)+_0x19d54d(0x125)+_0x249123+_0x19d54d(0x142);try{const _0x26bba4=await _0x3524e3[_0x19d54d(0x170)][_0x19d54d(0x167)](_0x42ef09),_0x455602=JSON[_0x19d54d(0x1ed)](_0x26bba4[_0x19d54d(0xe1)]['text']()['replace'](/```json|```/g,'')[_0x19d54d(0x18d)]());await _0x3524e3[_0x19d54d(0x115)](_0x19d54d(0x1e3),{'val':JSON[_0x19d54d(0x1e5)](_0x455602),'ack':!![]});if(_0x455602['summary'])await _0x3524e3[_0x19d54d(0x115)](_0x19d54d(0xcc),{'val':_0x455602[_0x19d54d(0x1ff)],'ack':!![]});const _0x57ee26={'timestamp':Date[_0x19d54d(0x157)](),'id':Date['now']()[_0x19d54d(0xd7)](),'analysis':{'activity':{'summary':_0x455602[_0x19d54d(0x1ff)],'isAlert':_0x455602[_0x19d54d(0x10a)],'alertReason':_0x455602[_0x19d54d(0x187)]},'comfort':{'automationProposal':_0x455602[_0x19d54d(0x185)]}}};await updateAnalysisHistory(_0x3524e3,_0x57ee26);const _0x117a64=_0x455602[_0x19d54d(0x10a)]||![];_0x117a64!==_0x3524e3[_0x19d54d(0x7b)]&&(await _0x3524e3['setStateAsync']('analysis.isAlert',{'val':_0x117a64,'ack':!![]}),_0x3524e3[_0x19d54d(0x7b)]=_0x117a64,_0x117a64&&(await _0x3524e3[_0x19d54d(0x115)]('analysis.alertReason',{'val':_0x455602[_0x19d54d(0x187)],'ack':!![]}),sendNotification(_0x3524e3,_0x19d54d(0x207)+_0x455602[_0x19d54d(0x187)],![],_0x455602[_0x19d54d(0x10e)])));if(_0x455602[_0x19d54d(0x185)]&&_0x455602[_0x19d54d(0x185)][_0x19d54d(0xa7)]){await _0x3524e3['setStateAsync'](_0x19d54d(0x1f0),{'val':!![],'ack':!![]}),await _0x3524e3[_0x19d54d(0x115)](_0x19d54d(0x1d7),{'val':_0x455602[_0x19d54d(0x185)][_0x19d54d(0x101)],'ack':!![]}),await _0x3524e3['setStateAsync'](_0x19d54d(0x14e),{'val':_0x455602[_0x19d54d(0x185)]['targetId'],'ack':!![]}),await _0x3524e3[_0x19d54d(0x115)](_0x19d54d(0x138),{'val':JSON[_0x19d54d(0x1e5)](_0x455602[_0x19d54d(0x185)]['targetValue']),'ack':!![]});if(_0x5889e5)executeAutomationAction(_0x3524e3);}}catch(_0x37d2ec){_0x3524e3['log'][_0x19d54d(0x13d)](_0x19d54d(0x14f)+_0x37d2ec[_0x19d54d(0x1d1)]);}}async function startSystem(_0xaa2a91){const _0x3c6dba=a0_0x2f9ec1;_0xaa2a91['log'][_0x3c6dba(0xb2)](_0x3c6dba(0x152)),await initZombies(_0xaa2a91);try{_0xaa2a91[_0x3c6dba(0x1a4)]=await checkLicense(_0xaa2a91[_0x3c6dba(0x84)][_0x3c6dba(0x1cd)]);}catch(_0x2da459){}if(!_0xaa2a91[_0x3c6dba(0x84)][_0x3c6dba(0x1c4)]||_0xaa2a91[_0x3c6dba(0x84)][_0x3c6dba(0x1c4)]<0.1)_0xaa2a91[_0x3c6dba(0x84)][_0x3c6dba(0x1c4)]=0xc;await initHistory(_0xaa2a91),await initSystemConfig(_0xaa2a91);if(_0xaa2a91[_0x3c6dba(0x84)][_0x3c6dba(0x116)])try{_0xaa2a91[_0x3c6dba(0xb5)]=new GoogleGenerativeAI(_0xaa2a91[_0x3c6dba(0x84)][_0x3c6dba(0x116)]),_0xaa2a91[_0x3c6dba(0x170)]=_0xaa2a91[_0x3c6dba(0xb5)][_0x3c6dba(0x109)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),_0xaa2a91[_0x3c6dba(0xe4)][_0x3c6dba(0xb2)](_0x3c6dba(0xde));}catch(_0x3113df){_0xaa2a91[_0x3c6dba(0xe4)][_0x3c6dba(0x13d)](_0x3c6dba(0xa0)+_0x3113df[_0x3c6dba(0x1d1)]);}await createAllObjects(_0xaa2a91),await loadSystemMode(_0xaa2a91),await loadRawEventLog(_0xaa2a91),await loadDailyDigests(_0xaa2a91),_0xaa2a91[_0x3c6dba(0xf7)]('analysis.trigger'),_0xaa2a91[_0x3c6dba(0xf7)](LTM_DP_TRIGGER_DIGEST),_0xaa2a91[_0x3c6dba(0xf7)]('system.mode'),_0xaa2a91['subscribeStates']('analysis.triggerBriefing'),_0xaa2a91['subscribeStates'](_0x3c6dba(0xd4)),_0xaa2a91['subscribeStates'](_0x3c6dba(0xdd)),_0xaa2a91[_0x3c6dba(0xf7)](_0x3c6dba(0xa3)),_0xaa2a91[_0x3c6dba(0xf7)](_0x3c6dba(0x10c)),_0xaa2a91['subscribeStates'](_0x3c6dba(0x144)),_0xaa2a91[_0x3c6dba(0xf7)](_0x3c6dba(0x85)),_0xaa2a91[_0x3c6dba(0xf7)]('analysis.training.triggerTopology'),await initSensorSubscriptions(_0xaa2a91),await initPresenceSubscriptions(_0xaa2a91),await setupTelegramListener(_0xaa2a91),setTimeout(()=>checkWifiPresence(_0xaa2a91),0x1388);if(_0xaa2a91['analysisTimer'])clearInterval(_0xaa2a91[_0x3c6dba(0xa8)]);const _0x298b7b=_0xaa2a91['config'][_0x3c6dba(0x159)]||0xf;_0x298b7b>0x0&&(_0xaa2a91[_0x3c6dba(0xa8)]=setInterval(()=>{runAutopilot(_0xaa2a91);},_0x298b7b*0x3c*0x3e8)),schedulers[_0x3c6dba(0xea)](_0xaa2a91,()=>createDailyDigest(_0xaa2a91)),schedulers[_0x3c6dba(0x202)](_0xaa2a91),schedulers[_0x3c6dba(0x12d)](_0xaa2a91,()=>runBaselineDriftAnalysis(_0xaa2a91)),schedulers['setupBriefingScheduler'](_0xaa2a91,()=>sendMorningBriefing(_0xaa2a91)),startPythonService(_0xaa2a91),setTimeout(()=>{const _0x367ac2=_0x3c6dba;_0xaa2a91[_0x367ac2(0x19b)]&&(runPythonHealthCheck(_0xaa2a91),triggerGaitAnalysis(_0xaa2a91),triggerEnergyPrediction(_0xaa2a91)),updateHealthVector(_0xaa2a91);},0x1388);}class CogniLiving extends utils[a0_0x2f9ec1(0x90)]{constructor(_0x4a7a59){const _0x286c06=a0_0x2f9ec1;super({..._0x4a7a59,'name':_0x286c06(0x7d)}),this[_0x286c06(0xc0)]=[],this[_0x286c06(0x126)]=[],this[_0x286c06(0x164)]=[],this[_0x286c06(0xc8)]=[],this[_0x286c06(0xca)]={},this[_0x286c06(0xaa)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x286c06(0x205)]=!![],this['exitTimer']=null,this[_0x286c06(0x19f)]=null,this['isGracePeriodActive']=![],this[_0x286c06(0xb5)]=null,this[_0x286c06(0x170)]=null,this['currentSystemMode']=SYSTEM_MODES[_0x286c06(0x103)],this[_0x286c06(0x1a4)]=![],this[_0x286c06(0x7b)]=![],this['systemUUID']=_0x286c06(0x1a0),this[_0x286c06(0xa8)]=null,this[_0x286c06(0x104)]=null,this[_0x286c06(0x11e)]=null,this['driftAnalysisTimer']=null,this['briefingJob']=null,this[_0x286c06(0x19b)]=null,this[_0x286c06(0xf2)]=![],this['on'](_0x286c06(0x139),this['onReady'][_0x286c06(0x129)](this)),this['on'](_0x286c06(0x105),this[_0x286c06(0x17e)]['bind'](this)),this['on'](_0x286c06(0x1ae),this['onUnload'][_0x286c06(0x129)](this)),this['on']('message',this[_0x286c06(0x177)][_0x286c06(0x129)](this));}async[a0_0x2f9ec1(0x121)](){const _0x576d2f=a0_0x2f9ec1;this['log']['info'](_0x576d2f(0x128)+this['version']+')\x20-\x20SAFE\x20BOOT');if(!installer['checkAndInstall'](this,()=>startSystem(this)))return;}[a0_0x2f9ec1(0x1f2)](_0x45e1dc){const _0x32b6e9=a0_0x2f9ec1;if(this[_0x32b6e9(0xa8)])clearInterval(this[_0x32b6e9(0xa8)]);if(this[_0x32b6e9(0xfc)])clearInterval(this[_0x32b6e9(0xfc)]);if(this[_0x32b6e9(0x104)])this[_0x32b6e9(0x104)][_0x32b6e9(0x9d)]();if(this[_0x32b6e9(0x11e)])this[_0x32b6e9(0x11e)]['cancel']();if(this[_0x32b6e9(0xfa)])this['briefingJob']['cancel']();if(this['exitTimer'])clearTimeout(this[_0x32b6e9(0xa5)]);if(this['exitGraceTimer'])clearTimeout(this[_0x32b6e9(0x19f)]);stopPythonService(this),_0x45e1dc();}async[a0_0x2f9ec1(0x17e)](_0x17f5cf,_0x9a8af){const _0x59a5d6=a0_0x2f9ec1;if(!_0x9a8af||this[_0x59a5d6(0xf2)])return;if(_0x17f5cf[_0x59a5d6(0xc6)](_0x59a5d6(0x1ba))&&_0x17f5cf[_0x59a5d6(0xcb)](_0x59a5d6(0x7e))&&_0x9a8af['val']){await handleTelegramResponse(this,_0x9a8af[_0x59a5d6(0xd0)]);return;}if(_0x17f5cf===this[_0x59a5d6(0xd3)]+'.'+SYSTEM_DP_MODE){if(_0x9a8af[_0x59a5d6(0xd0)]&&Object[_0x59a5d6(0x75)](SYSTEM_MODES)[_0x59a5d6(0xc6)](_0x9a8af[_0x59a5d6(0xd0)])){this['currentSystemMode']=_0x9a8af[_0x59a5d6(0xd0)];if(_0x9a8af[_0x59a5d6(0xd0)]===SYSTEM_MODES[_0x59a5d6(0x16f)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x9a8af[_0x59a5d6(0x112)])this['setState'](_0x17f5cf,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x9a8af[_0x59a5d6(0x112)]){_0x17f5cf[_0x59a5d6(0xc6)](_0x59a5d6(0x71))&&_0x9a8af[_0x59a5d6(0xd0)]&&(this['setState'](_0x17f5cf,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x17f5cf['includes'](_0x59a5d6(0x1c0))&&_0x9a8af['val']){this[_0x59a5d6(0x92)](_0x17f5cf,{'val':![],'ack':!![]});if(this[_0x59a5d6(0x1a4)])createDailyDigest(this);}_0x17f5cf[_0x59a5d6(0xc6)](_0x59a5d6(0xf8))&&_0x9a8af[_0x59a5d6(0xd0)]&&(this[_0x59a5d6(0x92)](_0x17f5cf,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x17f5cf[_0x59a5d6(0xc6)](_0x59a5d6(0xed))&&_0x9a8af['val']&&(this[_0x59a5d6(0x92)](_0x17f5cf,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x17f5cf[_0x59a5d6(0xc6)](_0x59a5d6(0xa3))&&_0x9a8af['val']){this[_0x59a5d6(0x92)](_0x17f5cf,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x1d9bd6=await this['getStateAsync'](_0x59a5d6(0xf4));if(_0x1d9bd6&&_0x1d9bd6['val']){const _0x4fa14e=JSON['parse'](_0x1d9bd6['val']);this[_0x59a5d6(0xe4)][_0x59a5d6(0xb2)](_0x59a5d6(0x8e)),this[_0x59a5d6(0x115)](_0x59a5d6(0xf0),{'val':'Sec-Training\x20started...','ack':!![]}),sendToPython(this,_0x59a5d6(0x8d),{'sequences':_0x4fa14e});}}catch(_0x2ab5ed){this[_0x59a5d6(0xe4)][_0x59a5d6(0x13d)](_0x59a5d6(0x1f9)+_0x2ab5ed['message']);}}if(_0x17f5cf[_0x59a5d6(0xc6)]('analysis.training.triggerHealth')&&_0x9a8af[_0x59a5d6(0xd0)]){this[_0x59a5d6(0x92)](_0x17f5cf,{'val':![],'ack':!![]});if(this[_0x59a5d6(0x1a4)])try{const _0x1ddd72=await this[_0x59a5d6(0x156)](LTM_DP_DAILY_DIGESTS);if(_0x1ddd72&&_0x1ddd72[_0x59a5d6(0xd0)])sendToPython(this,'TRAIN_HEALTH',{'digests':JSON['parse'](_0x1ddd72[_0x59a5d6(0xd0)])});}catch(_0x41d638){}}if(_0x17f5cf[_0x59a5d6(0xc6)](_0x59a5d6(0x144))&&_0x9a8af[_0x59a5d6(0xd0)]){this[_0x59a5d6(0x92)](_0x17f5cf,{'val':![],'ack':!![]});if(this[_0x59a5d6(0x1a4)])try{const _0x4da519=await this[_0x59a5d6(0x156)](_0x59a5d6(0x131));if(_0x4da519&&_0x4da519[_0x59a5d6(0xd0)])sendToPython(this,_0x59a5d6(0x1cc),{'points':JSON[_0x59a5d6(0x1ed)](_0x4da519[_0x59a5d6(0xd0)])});}catch(_0x6ac86a){}}if(_0x17f5cf[_0x59a5d6(0xc6)](_0x59a5d6(0x85))&&_0x9a8af['val']){this[_0x59a5d6(0x92)](_0x17f5cf,{'val':![],'ack':!![]});if(this[_0x59a5d6(0x1a4)])try{const _0x72c80f=await this[_0x59a5d6(0x156)](LTM_DP_RAW_LOG);_0x72c80f&&_0x72c80f[_0x59a5d6(0xd0)]&&(this[_0x59a5d6(0xe4)][_0x59a5d6(0xb2)](_0x59a5d6(0xdf)),sendToPython(this,_0x59a5d6(0x80),{'events':JSON['parse'](_0x72c80f[_0x59a5d6(0xd0)])}));}catch(_0x21f657){}}if(_0x17f5cf['includes'](_0x59a5d6(0x1de))&&_0x9a8af[_0x59a5d6(0xd0)]){this[_0x59a5d6(0x92)](_0x17f5cf,{'val':![],'ack':!![]});if(this[_0x59a5d6(0x1a4)])try{const _0x203e7d=await this[_0x59a5d6(0x156)](_0x59a5d6(0xf4));if(_0x203e7d&&_0x203e7d[_0x59a5d6(0xd0)]){const _0x24de1c=JSON[_0x59a5d6(0x1ed)](_0x203e7d[_0x59a5d6(0xd0)]);this[_0x59a5d6(0xe4)][_0x59a5d6(0xb2)](_0x59a5d6(0x1fc)),sendToPython(this,'BUILD_TOPOLOGY',{'sequences':_0x24de1c});}}catch(_0x5a00b0){this['log'][_0x59a5d6(0x13d)]('Topology\x20Error:\x20'+_0x5a00b0[_0x59a5d6(0x1d1)]);}}return;}if(this[_0x59a5d6(0x84)][_0x59a5d6(0x19a)]&&this[_0x59a5d6(0x84)][_0x59a5d6(0x19a)][_0x59a5d6(0xc6)](_0x17f5cf)){await checkWifiPresence(this);return;}const _0x475c8c=(this[_0x59a5d6(0x84)]['devices']||[])['find'](_0x37c656=>_0x37c656['id']===_0x17f5cf);if(_0x475c8c)processSensorEvent(this,_0x17f5cf,_0x9a8af,_0x475c8c);}async[a0_0x2f9ec1(0x177)](_0x4da5bb){const _0x2cb7c1=a0_0x2f9ec1;if(typeof _0x4da5bb===_0x2cb7c1(0xf6)&&_0x4da5bb['message']){if(_0x4da5bb[_0x2cb7c1(0x11b)]==='testApiKey'){const _0x161377=_0x4da5bb['message']['apiKey']||this['config'][_0x2cb7c1(0x116)];if(!_0x161377)return this[_0x2cb7c1(0x9e)](_0x4da5bb[_0x2cb7c1(0x13a)],_0x4da5bb[_0x2cb7c1(0x11b)],{'success':![],'message':_0x2cb7c1(0xa9)},_0x4da5bb[_0x2cb7c1(0xa2)]);try{const _0x342675=new GoogleGenerativeAI(_0x161377),_0xa60a5b=_0x342675['getGenerativeModel']({'model':GEMINI_MODEL}),_0x5ea90b=await _0xa60a5b[_0x2cb7c1(0x167)]('Hi');this[_0x2cb7c1(0x9e)](_0x4da5bb['from'],_0x4da5bb[_0x2cb7c1(0x11b)],{'success':!![],'message':_0x2cb7c1(0x1c6)+_0x5ea90b[_0x2cb7c1(0xe1)][_0x2cb7c1(0xba)]()},_0x4da5bb[_0x2cb7c1(0xa2)]);}catch(_0x23f51a){this[_0x2cb7c1(0x9e)](_0x4da5bb[_0x2cb7c1(0x13a)],_0x4da5bb[_0x2cb7c1(0x11b)],{'success':![],'message':_0x2cb7c1(0x180)+_0x23f51a['message']},_0x4da5bb[_0x2cb7c1(0xa2)]);}}else{if(_0x4da5bb[_0x2cb7c1(0x11b)]===_0x2cb7c1(0x89)){const _0x1c5607=await getWeatherContext(this),_0x3382df=await getCalendarContext(this);this[_0x2cb7c1(0x9e)](_0x4da5bb['from'],_0x4da5bb['command'],{'success':!![],'weather':_0x1c5607,'calendar':_0x3382df},_0x4da5bb[_0x2cb7c1(0xa2)]);}else{if(_0x4da5bb[_0x2cb7c1(0x11b)]==='getLtmData'){if(!this[_0x2cb7c1(0x1a4)])return this[_0x2cb7c1(0x9e)](_0x4da5bb[_0x2cb7c1(0x13a)],_0x4da5bb['command'],{'success':![],'isPro':![]},_0x4da5bb['callback']);let _0x1da133={'status':_0x2cb7c1(0x1fb)};try{const _0x14068f=await this[_0x2cb7c1(0x156)](LTM_DP_DRIFT_STATUS);_0x1da133[_0x2cb7c1(0x1d5)]=_0x14068f?_0x14068f['val']:_0x2cb7c1(0x1fb);}catch(_0x467074){}this['sendTo'](_0x4da5bb['from'],_0x4da5bb[_0x2cb7c1(0x11b)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x1da133,'analysisHistory':this['analysisHistory']},_0x4da5bb[_0x2cb7c1(0xa2)]);}else{if(_0x4da5bb['command']===_0x2cb7c1(0x191)){const _0x39f243=this[_0x2cb7c1(0xc8)][_0x2cb7c1(0x178)],_0xfe8ee2=new Date(),_0x3d3085=new Date(_0xfe8ee2[_0x2cb7c1(0x1af)](),_0xfe8ee2[_0x2cb7c1(0x148)](),_0xfe8ee2[_0x2cb7c1(0xb1)]())[_0x2cb7c1(0x1e9)](),_0x44b83a=this['rawEventLog'][_0x2cb7c1(0x204)](_0x3b8872=>new Date(_0x3b8872[_0x2cb7c1(0xc3)])[_0x2cb7c1(0x1e9)]()>_0x3d3085)['length'],_0x242245=new Array(0x18)[_0x2cb7c1(0x9c)](0x0);this[_0x2cb7c1(0x164)][_0x2cb7c1(0x1e1)](_0x1fa78f=>{const _0x522b39=_0x2cb7c1,_0x41a26f=new Date(_0x1fa78f[_0x522b39(0xc3)]);if(_0x41a26f[_0x522b39(0x1e9)]()>_0x3d3085)_0x242245[_0x41a26f[_0x522b39(0xcd)]()]++;});let _0x151856={'status':_0x2cb7c1(0x1fb)};try{const _0x2a62ec=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x151856['status']=_0x2a62ec?_0x2a62ec[_0x2cb7c1(0xd0)]:_0x2cb7c1(0x1fb);}catch(_0x34d289){}let _0x2ae384='';try{const _0x250cf4=await this[_0x2cb7c1(0x156)]('system.presenceWho');_0x2ae384=_0x250cf4?_0x250cf4[_0x2cb7c1(0xd0)]:'';}catch(_0x3e9ced){}let _0x11203b=null;!this[_0x2cb7c1(0x170)]&&(_0x11203b=this['config'][_0x2cb7c1(0x116)]?_0x2cb7c1(0xc5):'Kein\x20API\x20Key!');let _0x1efca4={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x2cf942=await this[_0x2cb7c1(0x156)]('analysis.automation.patternDetected');if(_0x2cf942&&_0x2cf942[_0x2cb7c1(0xd0)]){_0x1efca4[_0x2cb7c1(0xa7)]=!![];const _0x55177c=await this['getStateAsync'](_0x2cb7c1(0x1d7));_0x1efca4[_0x2cb7c1(0x101)]=_0x55177c?_0x55177c[_0x2cb7c1(0xd0)]:'';const _0x183e30=await this[_0x2cb7c1(0x156)](_0x2cb7c1(0x14e));_0x1efca4[_0x2cb7c1(0xfe)]=_0x183e30?_0x183e30[_0x2cb7c1(0xd0)]:'';const _0x26e174=await this['getStateAsync'](_0x2cb7c1(0x138));_0x1efca4['targetValue']=_0x26e174?_0x26e174[_0x2cb7c1(0xd0)]:'';}const _0xc08aa9=await this[_0x2cb7c1(0x156)](_0x2cb7c1(0xdd));_0x1efca4['autoApply']=_0xc08aa9?!!_0xc08aa9[_0x2cb7c1(0xd0)]:![];}catch(_0x32eba0){}this[_0x2cb7c1(0x9e)](_0x4da5bb[_0x2cb7c1(0x13a)],_0x4da5bb[_0x2cb7c1(0x11b)],{'success':!![],'eventHistory':this['eventHistory']['slice'](0x0,0xf),'stats':{'digestCount':_0x39f243,'eventCountToday':_0x44b83a,'hourlyActivity':_0x242245,'driftStatus':_0x151856[_0x2cb7c1(0x1d5)],'isPresent':this[_0x2cb7c1(0x205)],'presenceWho':_0x2ae384,'minDays':this['config']['minDaysForBaseline']||0x7,'stbDays':this[_0x2cb7c1(0x84)][_0x2cb7c1(0x1d9)]||0xe,'ltbDays':this[_0x2cb7c1(0x84)][_0x2cb7c1(0xc4)]||0x3c,'systemError':_0x11203b},'automation':_0x1efca4},_0x4da5bb[_0x2cb7c1(0xa2)]);}else{if(_0x4da5bb[_0x2cb7c1(0x11b)]===_0x2cb7c1(0x184))try{const _0x2651bc=await scanner[_0x2cb7c1(0x14c)](this,_0x4da5bb['message']||{});this['sendTo'](_0x4da5bb[_0x2cb7c1(0x13a)],_0x4da5bb['command'],{'success':!![],'devices':_0x2651bc},_0x4da5bb[_0x2cb7c1(0xa2)]);}catch(_0x139cca){this['sendTo'](_0x4da5bb['from'],_0x4da5bb[_0x2cb7c1(0x11b)],{'success':![],'error':_0x139cca['message']},_0x4da5bb['callback']);}else{if(_0x4da5bb['command']===_0x2cb7c1(0x1a5)){const _0x45afc1=await this[_0x2cb7c1(0x1f3)](_0x2cb7c1(0xff),_0x2cb7c1(0x1b3)),_0x5635ea=[];if(_0x45afc1)for(const _0x35eed4 in _0x45afc1){const _0x5ab719=_0x45afc1[_0x35eed4],_0x983a5f=(_0x5ab719['common']&&typeof _0x5ab719[_0x2cb7c1(0x108)][_0x2cb7c1(0x173)]==='object'?_0x5ab719[_0x2cb7c1(0x108)][_0x2cb7c1(0x173)]['de']:_0x5ab719[_0x2cb7c1(0x108)][_0x2cb7c1(0x173)])||_0x5ab719[_0x2cb7c1(0x108)][_0x2cb7c1(0x173)];_0x5635ea[_0x2cb7c1(0x165)]({'id':_0x35eed4,'name':_0x983a5f});}const _0x4bc01a=await this['getForeignObjectsAsync'](_0x2cb7c1(0x183),_0x2cb7c1(0x1b3)),_0x524bbc=[];if(_0x4bc01a)for(const _0x1093bc in _0x4bc01a){const _0x2e9bef=_0x4bc01a[_0x1093bc],_0x123cdb=(_0x2e9bef[_0x2cb7c1(0x108)]&&typeof _0x2e9bef[_0x2cb7c1(0x108)][_0x2cb7c1(0x173)]==='object'?_0x2e9bef[_0x2cb7c1(0x108)][_0x2cb7c1(0x173)]['de']:_0x2e9bef['common'][_0x2cb7c1(0x173)])||_0x1093bc['split']('.')[_0x2cb7c1(0x155)]();_0x524bbc['push'](_0x123cdb);}this[_0x2cb7c1(0x9e)](_0x4da5bb['from'],_0x4da5bb[_0x2cb7c1(0x11b)],{'success':!![],'enums':_0x5635ea,'rooms':_0x524bbc},_0x4da5bb[_0x2cb7c1(0xa2)]);}else{if(_0x4da5bb['command']===_0x2cb7c1(0x16a)){const _0x2b18dc=_0x4da5bb[_0x2cb7c1(0x1d1)]['instance'];if(!_0x2b18dc)return this[_0x2cb7c1(0x9e)](_0x4da5bb[_0x2cb7c1(0x13a)],_0x4da5bb[_0x2cb7c1(0x11b)],{'success':![],'error':_0x2cb7c1(0x161)},_0x4da5bb[_0x2cb7c1(0xa2)]);const _0x3428a5=await getCalendarNames(this,_0x2b18dc);this['sendTo'](_0x4da5bb[_0x2cb7c1(0x13a)],_0x4da5bb['command'],{'success':!![],'names':_0x3428a5},_0x4da5bb[_0x2cb7c1(0xa2)]);}else{if(_0x4da5bb[_0x2cb7c1(0x11b)]==='simulateButler'){const {targetId:_0x447211,targetValue:_0x2f1fe6}=_0x4da5bb[_0x2cb7c1(0x1d1)];this[_0x2cb7c1(0xe4)][_0x2cb7c1(0xb2)](_0x2cb7c1(0x1ab)+_0x447211+_0x2cb7c1(0xa4)+_0x2f1fe6),await this['setStateAsync'](_0x2cb7c1(0x1f0),{'val':!![],'ack':!![]}),await this[_0x2cb7c1(0x115)](_0x2cb7c1(0x1d7),{'val':'SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20'+_0x447211,'ack':!![]}),await this[_0x2cb7c1(0x115)](_0x2cb7c1(0x14e),{'val':_0x447211,'ack':!![]}),await this[_0x2cb7c1(0x115)](_0x2cb7c1(0x138),{'val':_0x2f1fe6,'ack':!![]}),this[_0x2cb7c1(0x9e)](_0x4da5bb['from'],_0x4da5bb[_0x2cb7c1(0x11b)],{'success':!![]},_0x4da5bb['callback']);}else{if(_0x4da5bb['command']==='submitFeedback'){const {historyId:_0x5bb924,rating:_0x3eec0f,comment:_0x59913e,alertReason:_0x566f47}=_0x4da5bb[_0x2cb7c1(0x1d1)];_0x5bb924&&_0x3eec0f?(await saveFeedback(this,{'timestamp':Date['now'](),'historyId':_0x5bb924,'rating':_0x3eec0f,'comment':_0x59913e,'alertReason':_0x566f47}),this['sendTo'](_0x4da5bb[_0x2cb7c1(0x13a)],_0x4da5bb[_0x2cb7c1(0x11b)],{'success':!![]},_0x4da5bb['callback'])):this['sendTo'](_0x4da5bb[_0x2cb7c1(0x13a)],_0x4da5bb[_0x2cb7c1(0x11b)],{'success':![],'error':_0x2cb7c1(0x12c)},_0x4da5bb[_0x2cb7c1(0xa2)]);}else _0x4da5bb['command']===_0x2cb7c1(0x162)&&(this[_0x2cb7c1(0xe4)]['info']('User\x20dismissed\x20automation\x20proposal.'),await this[_0x2cb7c1(0x115)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),await this['setStateAsync'](_0x2cb7c1(0x1d7),{'val':'','ack':!![]}),this['sendTo'](_0x4da5bb[_0x2cb7c1(0x13a)],_0x4da5bb[_0x2cb7c1(0x11b)],{'success':!![]},_0x4da5bb['callback']));}}}}}}}}}}}if(require[a0_0x2f9ec1(0xdb)]!==module)module[a0_0x2f9ec1(0x1c3)]=_0xcb3b59=>new CogniLiving(_0xcb3b59);else new CogniLiving();