const a0_0x3c60d5=a0_0x5468;(function(_0x425197,_0x25b40f){const _0x478e59=a0_0x5468,_0x4e8520=_0x425197();while(!![]){try{const _0x5f9409=parseInt(_0x478e59(0x10c))/0x1*(parseInt(_0x478e59(0x108))/0x2)+parseInt(_0x478e59(0xcb))/0x3+parseInt(_0x478e59(0xf1))/0x4+-parseInt(_0x478e59(0x123))/0x5*(parseInt(_0x478e59(0x90))/0x6)+-parseInt(_0x478e59(0x11b))/0x7+-parseInt(_0x478e59(0x12e))/0x8*(parseInt(_0x478e59(0xd9))/0x9)+-parseInt(_0x478e59(0xb4))/0xa*(-parseInt(_0x478e59(0xbd))/0xb);if(_0x5f9409===_0x25b40f)break;else _0x4e8520['push'](_0x4e8520['shift']());}catch(_0x5f3f86){_0x4e8520['push'](_0x4e8520['shift']());}}}(a0_0x33dc,0x20c49));const a0_0x5f4c6e=(function(){let _0x11f494=!![];return function(_0x52f716,_0x2555d2){const _0x39bd5d=_0x11f494?function(){const _0x403b00=a0_0x5468;if(_0x2555d2){const _0x569019=_0x2555d2[_0x403b00(0x8c)](_0x52f716,arguments);return _0x2555d2=null,_0x569019;}}:function(){};return _0x11f494=![],_0x39bd5d;};}()),a0_0x102835=a0_0x5f4c6e(this,function(){const _0xe3fd9f=a0_0x5468;return a0_0x102835[_0xe3fd9f(0x125)]()[_0xe3fd9f(0xd0)](_0xe3fd9f(0x100))[_0xe3fd9f(0x125)]()[_0xe3fd9f(0xcc)](a0_0x102835)[_0xe3fd9f(0xd0)](_0xe3fd9f(0x100));});a0_0x102835();'use strict';function a0_0x5468(_0x404191,_0x3a7b8d){const _0x1ba97a=a0_0x33dc();return a0_0x5468=function(_0x102835,_0x5f4c6e){_0x102835=_0x102835-0x7a;let _0x33dc91=_0x1ba97a[_0x102835];return _0x33dc91;},a0_0x5468(_0x404191,_0x3a7b8d);}const utils=require(a0_0x3c60d5(0xf0)),{GoogleGenerativeAI}=require(a0_0x3c60d5(0x102)),installer=require('./lib/installer'),scanner=require('./lib/scanner'),schedulers=require(a0_0x3c60d5(0x13c)),topology=require('./lib/topology'),setup=require('./lib/setup'),recorder=require(a0_0x3c60d5(0xb2)),pythonBridge=require('./lib/python_bridge'),aiAgent=require('./lib/ai_agent'),deadMan=require(a0_0x3c60d5(0x120)),GEMINI_MODEL=a0_0x3c60d5(0x139),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x33dc(){const _0x44b897=['lastAlertState','analysis.health.todayVector','exports','.communicate.request','onUnload','matrix','message','slice','telegram','analysisHistory','getEnums','pop','ack','setState','setPresence','WiFi\x20Presence\x20detected.','onStateChange','analysis.training.triggerSecurity','name','send','application/json','runBaselineDriftAnalysis','Activity-Level','find','./lib/recorder','checkWifiPresence','2336630mRBeXV','\x20Tage)','fill','startSystem','runGeminiAnalysis','val','config','Sec-Training\x20started...','temperature','11clflBH','subscribeStates','analysis.training.triggerHealth','getGenerativeModel','info','updateLocation','isProVersion','testNotification','loadSystemMode','dailyDigests','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','callback','dependencyInstallInProgress','main','157812OEbkmx','constructor','forEach','executeAutomationAction','triggerBriefing','search','push','geminiModel','ltmJob','sendMorningBriefing','isPresent','getCalendarNames','namespace','analysis.topology.structure','86949YmUZOX','VACATION','PYTHON_EXE','timestamp','endsWith','scanDevices','Standard','calendarInstance','getHours','Gemini\x20AI\x20initialized.','SYSTEM_DP_MODE','NORMAL','.system.mode','ANALYZE_GAIT','location','analysis.trigger','sendNotification','log','analysis.triggerBriefing','Daten\x20nicht\x20verfÃ¼gbar','instance','unload','createAllObjects','@iobroker/adapter-core','333652UKDjGx','getForeignObjectsAsync','onReady','getStateAsync','version','activityLevel','floor','map','getTime','ready','.data.table','from','bind','isGracePeriodActive','weatherInstance','(((.+)+)+)+$','getLtmData','@google/generative-ai','LTM.dailyDigests','LTM.trainingData.sequences','stateChange','exitGraceTimer','LTM.triggerDailyDigest','4NsvhYy','enum.functions.*','analysisTimer','notifyTelegramInstance','34757GdwEBi','toLowerCase','updateHealthVector','motion','createDailyDigest','length','cancel','system.adapter.','briefingJob','getForeignStateAsync','setupDriftAnalysisScheduler','error','triggerDailyDigest','analysis.automation.triggerAction','Kein\x20Wetter-Adapter','847889HRuBhS','Lernphase\x20(','TRAIN_COMFORT','exitTimer','analysis.training.triggerComfort','./lib/dead_man','abortExitTimer','stringify','8915onONCj','setupLtmScheduler','toString','triggerGaitAnalysis','initZombies','rawEventLog','includes','minDaysForBaseline','driftAnalysisTimer','eventHistory','inactivityThresholdHours','136rsjfEf','enum.rooms.*','systemConfig','values','event','scanForDevices','parse','setStateAsync','getOutsideTemperatureNumeric','licenseKey','checkAndInstall','models/gemini-flash-latest','sendTo','currentSystemMode','./lib/scheduler','Gemini\x20Init\x20Error:\x20','LTM.trainingData.thermodynamics','SYSTEM_MODES','getState','setHours','now','triggerEnergyPrediction','devices','TRAIN_HEALTH','startService','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','ANALYZE_TREND','TRAIN_SECURITY','SET_TOPOLOGY','runAutopilot','presenceDevices','LTM.baselineStatus','analysis.training.triggerEnergy','keys','testContext','setupBriefingScheduler','updateTopologyMatrix','LTM.rawEventLog','geminiApiKey','TRAIN_ENERGY','common','getMinutes','apply','sensorLastValues','Verbunden','object','66RNSSBm','subscribeForeignStatesAsync','runPythonHealthCheck','enum','updateTopology','genAI','onMessage','command',')\x20-\x20Phase\x20C\x20(Context\x20Fix)','type'];a0_0x33dc=function(){return _0x44b897;};return a0_0x33dc();}class CogniLiving extends utils['Adapter']{constructor(_0x3c3726){const _0x542537=a0_0x3c60d5;super({..._0x3c3726,'name':'cogni-living'}),this['eventHistory']=[],this['analysisHistory']=[],this['rawEventLog']=[],this['dailyDigests']=[],this[_0x542537(0x8d)]={},this[_0x542537(0x130)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x542537(0xd5)]=!![],this[_0x542537(0x11e)]=null,this[_0x542537(0x106)]=null,this[_0x542537(0xfe)]=![],this[_0x542537(0x95)]=null,this[_0x542537(0xd2)]=null,this['currentSystemMode']=setup[_0x542537(0x13f)][_0x542537(0xe4)],this[_0x542537(0xc3)]=![],this[_0x542537(0x9a)]=![],this['analysisTimer']=null,this[_0x542537(0xd3)]=null,this['modeResetJob']=null,this[_0x542537(0x12b)]=null,this[_0x542537(0x114)]=null,this['dependencyInstallInProgress']=![],this['on'](_0x542537(0xfa),this[_0x542537(0xf3)][_0x542537(0xfd)](this)),this['on'](_0x542537(0x105),this[_0x542537(0xaa)]['bind'](this)),this['on'](_0x542537(0xee),this[_0x542537(0x9e)][_0x542537(0xfd)](this)),this['on']('message',this[_0x542537(0x96)]['bind'](this));}async[a0_0x3c60d5(0xf3)](){const _0x171aa5=a0_0x3c60d5;this[_0x171aa5(0xea)][_0x171aa5(0xc1)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x171aa5(0xf5)]+_0x171aa5(0x98));if(!installer[_0x171aa5(0x138)](this,()=>this['startSystem']()))return;}async[a0_0x3c60d5(0xb7)](){const _0x1a80cd=a0_0x3c60d5;await setup[_0x1a80cd(0x127)](this);try{this[_0x1a80cd(0xc3)]=await setup['checkLicense'](this[_0x1a80cd(0xba)][_0x1a80cd(0x137)]);}catch(_0x1b9dc4){}if(!this['config'][_0x1a80cd(0x12d)]||this[_0x1a80cd(0xba)]['inactivityThresholdHours']<0.1)this[_0x1a80cd(0xba)][_0x1a80cd(0x12d)]=0xc;await setup['initHistory'](this),await setup['initSystemConfig'](this);if(this[_0x1a80cd(0xba)][_0x1a80cd(0x88)])try{this[_0x1a80cd(0x95)]=new GoogleGenerativeAI(this[_0x1a80cd(0xba)][_0x1a80cd(0x88)]),this['geminiModel']=this['genAI'][_0x1a80cd(0xc0)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x1a80cd(0xae)}}),this[_0x1a80cd(0xea)][_0x1a80cd(0xc1)](_0x1a80cd(0xe2));}catch(_0x78f6f){this[_0x1a80cd(0xea)][_0x1a80cd(0x117)](_0x1a80cd(0x13d)+_0x78f6f[_0x1a80cd(0xa0)]);}await setup[_0x1a80cd(0xef)](this),await this['loadSystemMode']();try{const _0x39c8ba=await this[_0x1a80cd(0xf4)]('LTM.rawEventLog');if(_0x39c8ba&&_0x39c8ba[_0x1a80cd(0xb9)])this[_0x1a80cd(0x128)]=JSON[_0x1a80cd(0x134)](_0x39c8ba[_0x1a80cd(0xb9)]);}catch(_0x3889c2){this[_0x1a80cd(0x128)]=[];}try{const _0x45d59d=await this[_0x1a80cd(0xf4)](_0x1a80cd(0x103));if(_0x45d59d&&_0x45d59d[_0x1a80cd(0xb9)])this[_0x1a80cd(0xc6)]=JSON[_0x1a80cd(0x134)](_0x45d59d['val']);}catch(_0x147d8b){this[_0x1a80cd(0xc6)]=[];}const _0x4686d7=this[_0x1a80cd(0xc6)][_0x1a80cd(0x111)]>=(this[_0x1a80cd(0xba)][_0x1a80cd(0x12a)]||0x7)?'Aktiv\x20('+this['dailyDigests']['length']+_0x1a80cd(0xb5):_0x1a80cd(0x11c)+this['dailyDigests'][_0x1a80cd(0x111)]+'/'+(this[_0x1a80cd(0xba)][_0x1a80cd(0x12a)]||0x7)+')';await this[_0x1a80cd(0x135)](_0x1a80cd(0x81),{'val':_0x4686d7,'ack':!![]}),this[_0x1a80cd(0xbe)](_0x1a80cd(0xe8)),this[_0x1a80cd(0xbe)](_0x1a80cd(0x107)),this[_0x1a80cd(0xbe)]('system.mode'),this['subscribeStates'](_0x1a80cd(0xeb)),this[_0x1a80cd(0xbe)](_0x1a80cd(0x119)),this[_0x1a80cd(0xbe)]('analysis.automation.autoApply'),this[_0x1a80cd(0xbe)](_0x1a80cd(0xab)),this[_0x1a80cd(0xbe)]('analysis.training.triggerHealth'),this['subscribeStates']('analysis.training.triggerEnergy'),this[_0x1a80cd(0xbe)](_0x1a80cd(0x11f)),this[_0x1a80cd(0xbe)]('analysis.training.triggerTopology');const _0x5de236=this['config']['devices'];if(_0x5de236)for(const _0x11bd68 of _0x5de236){await this[_0x1a80cd(0x91)](_0x11bd68['id']);}const _0x370fc2=this[_0x1a80cd(0xba)][_0x1a80cd(0x80)];if(_0x370fc2)for(const _0x28a605 of _0x370fc2){await this['subscribeForeignStatesAsync'](_0x28a605);}if(this['config']['notifyTelegramEnabled']&&this['config'][_0x1a80cd(0x10b)])await this['subscribeForeignStatesAsync'](this[_0x1a80cd(0xba)][_0x1a80cd(0x10b)]+_0x1a80cd(0x9d));setTimeout(()=>this['checkWifiPresence'](),0x1388);if(this['analysisTimer'])clearInterval(this['analysisTimer']);const _0xbc387e=this[_0x1a80cd(0xba)]['analysisInterval']||0xf;_0xbc387e>0x0&&(this[_0x1a80cd(0x10a)]=setInterval(()=>{const _0x251586=_0x1a80cd;this[_0x251586(0x7f)]();},_0xbc387e*0x3c*0x3e8)),schedulers[_0x1a80cd(0x124)](this,()=>aiAgent[_0x1a80cd(0x110)](this,pythonBridge)),schedulers['setupModeResetScheduler'](this),schedulers[_0x1a80cd(0x116)](this,()=>aiAgent[_0x1a80cd(0xaf)](this)),schedulers[_0x1a80cd(0x85)](this,()=>aiAgent[_0x1a80cd(0xd4)](this)),pythonBridge[_0x1a80cd(0x7a)](this,installer[_0x1a80cd(0xdb)]),setTimeout(async()=>{const _0x13900d=_0x1a80cd;await topology['updateTopology'](this);try{const _0x8a8a64=await this['getStateAsync']('analysis.topology.structure');if(_0x8a8a64&&_0x8a8a64['val'])pythonBridge['send'](this,_0x13900d(0x7e),JSON[_0x13900d(0x134)](_0x8a8a64[_0x13900d(0xb9)]));}catch(_0x460478){}this[_0x13900d(0x92)](),this[_0x13900d(0x126)](),this[_0x13900d(0x143)](),this[_0x13900d(0x10e)]();},0x1388);}[a0_0x3c60d5(0x9e)](_0x5e3436){const _0x2ae9d5=a0_0x3c60d5;if(this[_0x2ae9d5(0x10a)])clearInterval(this[_0x2ae9d5(0x10a)]);if(this[_0x2ae9d5(0x12b)])clearInterval(this[_0x2ae9d5(0x12b)]);if(this[_0x2ae9d5(0xd3)])this['ltmJob']['cancel']();if(this['modeResetJob'])this['modeResetJob'][_0x2ae9d5(0x112)]();if(this[_0x2ae9d5(0x114)])this[_0x2ae9d5(0x114)][_0x2ae9d5(0x112)]();recorder[_0x2ae9d5(0x121)](this),pythonBridge['stopService'](this),_0x5e3436();}async[a0_0x3c60d5(0xaa)](_0x58a726,_0x3f5f38){const _0x3adff3=a0_0x3c60d5;if(!_0x3f5f38||this[_0x3adff3(0xc9)])return;if(_0x58a726[_0x3adff3(0x129)](_0x3adff3(0xa2))&&_0x58a726[_0x3adff3(0xdd)]('communicate.request')&&_0x3f5f38[_0x3adff3(0xb9)])return;if(_0x58a726===this[_0x3adff3(0xd7)]+_0x3adff3(0xe5)){if(_0x3f5f38[_0x3adff3(0xb9)]&&Object[_0x3adff3(0x131)](setup[_0x3adff3(0x13f)])[_0x3adff3(0x129)](_0x3f5f38[_0x3adff3(0xb9)])){this['currentSystemMode']=_0x3f5f38[_0x3adff3(0xb9)];if(_0x3f5f38[_0x3adff3(0xb9)]===setup[_0x3adff3(0x13f)][_0x3adff3(0xda)])await recorder[_0x3adff3(0xa8)](this,![]);else await recorder['setPresence'](this,!![]);}if(!_0x3f5f38[_0x3adff3(0xa6)])this[_0x3adff3(0xa7)](_0x58a726,{'val':this[_0x3adff3(0x13b)],'ack':!![]});return;}if(!_0x3f5f38[_0x3adff3(0xa6)]){_0x58a726[_0x3adff3(0x129)](_0x3adff3(0xe8))&&_0x3f5f38[_0x3adff3(0xb9)]&&(this['setState'](_0x58a726,{'val':![],'ack':!![]}),aiAgent[_0x3adff3(0xb8)](this));if(_0x58a726[_0x3adff3(0x129)](_0x3adff3(0x118))&&_0x3f5f38[_0x3adff3(0xb9)]){this[_0x3adff3(0xa7)](_0x58a726,{'val':![],'ack':!![]});if(this[_0x3adff3(0xc3)])aiAgent[_0x3adff3(0x110)](this,pythonBridge);}_0x58a726[_0x3adff3(0x129)](_0x3adff3(0xcf))&&_0x3f5f38['val']&&(this[_0x3adff3(0xa7)](_0x58a726,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this));_0x58a726[_0x3adff3(0x129)]('automation.triggerAction')&&_0x3f5f38[_0x3adff3(0xb9)]&&(this[_0x3adff3(0xa7)](_0x58a726,{'val':![],'ack':!![]}),aiAgent[_0x3adff3(0xce)](this));if(_0x58a726[_0x3adff3(0x129)]('analysis.training.triggerSecurity')&&_0x3f5f38[_0x3adff3(0xb9)]){this[_0x3adff3(0xa7)](_0x58a726,{'val':![],'ack':!![]});if(this[_0x3adff3(0xc3)])try{const _0x4cc5fb=await this[_0x3adff3(0xf4)](_0x3adff3(0x104));if(_0x4cc5fb&&_0x4cc5fb[_0x3adff3(0xb9)]){const _0x2a69fd=JSON[_0x3adff3(0x134)](_0x4cc5fb[_0x3adff3(0xb9)]);this[_0x3adff3(0x135)]('analysis.training.status',{'val':_0x3adff3(0xbb),'ack':!![]}),pythonBridge[_0x3adff3(0xad)](this,_0x3adff3(0x7d),{'sequences':_0x2a69fd});}}catch(_0x14283f){}}if(_0x58a726[_0x3adff3(0x129)](_0x3adff3(0xbf))&&_0x3f5f38['val']){this[_0x3adff3(0xa7)](_0x58a726,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x4c6008=await this[_0x3adff3(0xf4)]('LTM.dailyDigests');if(_0x4c6008&&_0x4c6008[_0x3adff3(0xb9)])pythonBridge[_0x3adff3(0xad)](this,_0x3adff3(0x145),{'digests':JSON[_0x3adff3(0x134)](_0x4c6008['val'])});}catch(_0x3eb71a){}}if(_0x58a726[_0x3adff3(0x129)](_0x3adff3(0x82))&&_0x3f5f38['val']){this[_0x3adff3(0xa7)](_0x58a726,{'val':![],'ack':!![]});if(this[_0x3adff3(0xc3)])try{const _0xd0b791=await this[_0x3adff3(0xf4)](_0x3adff3(0x13e));if(_0xd0b791&&_0xd0b791[_0x3adff3(0xb9)])pythonBridge['send'](this,_0x3adff3(0x89),{'points':JSON['parse'](_0xd0b791['val'])});}catch(_0xd0c6d){}}if(_0x58a726['includes'](_0x3adff3(0x11f))&&_0x3f5f38[_0x3adff3(0xb9)]){this[_0x3adff3(0xa7)](_0x58a726,{'val':![],'ack':!![]});if(this[_0x3adff3(0xc3)])try{const _0xcbea1f=await this[_0x3adff3(0xf4)](_0x3adff3(0x87));if(_0xcbea1f&&_0xcbea1f['val'])pythonBridge[_0x3adff3(0xad)](this,_0x3adff3(0x11d),{'events':JSON['parse'](_0xcbea1f[_0x3adff3(0xb9)])});}catch(_0x406f94){}}_0x58a726[_0x3adff3(0x129)]('analysis.training.triggerTopology')&&_0x3f5f38[_0x3adff3(0xb9)]&&(this[_0x3adff3(0xa7)](_0x58a726,{'val':![],'ack':!![]}),topology[_0x3adff3(0x94)](this));return;}if(this[_0x3adff3(0xba)]['presenceDevices']&&this['config']['presenceDevices'][_0x3adff3(0x129)](_0x58a726)){await this[_0x3adff3(0xb3)]();return;}const _0x909d93=(this[_0x3adff3(0xba)]['devices']||[])[_0x3adff3(0xb1)](_0x5195a2=>_0x5195a2['id']===_0x58a726);if(_0x909d93){const _0x2d09a1=await recorder['processSensorEvent'](this,_0x58a726,_0x3f5f38,_0x909d93);_0x2d09a1&&_0x2d09a1[_0x3adff3(0x99)]===_0x3adff3(0x10f)&&_0x2d09a1['location']&&this[_0x3adff3(0xc3)]&&deadMan[_0x3adff3(0xc2)](this,_0x2d09a1['location']);}}async[a0_0x3c60d5(0x96)](_0x305e85){const _0x27b878=a0_0x3c60d5;if(typeof _0x305e85==='object'&&_0x305e85[_0x27b878(0xa0)]){if(_0x305e85[_0x27b878(0x97)]==='testApiKey'){}else{if(_0x305e85[_0x27b878(0x97)]===_0x27b878(0xde))try{const _0x1c19c4=await scanner[_0x27b878(0x133)](this,_0x305e85[_0x27b878(0xa0)]||{});this[_0x27b878(0x13a)](_0x305e85['from'],_0x305e85[_0x27b878(0x97)],{'success':!![],'devices':_0x1c19c4},_0x305e85[_0x27b878(0xc8)]);}catch(_0x2bf3f4){this['sendTo'](_0x305e85[_0x27b878(0xfc)],_0x305e85['command'],{'success':![],'error':_0x2bf3f4[_0x27b878(0xa0)]},_0x305e85[_0x27b878(0xc8)]);}else{if(_0x305e85[_0x27b878(0x97)]===_0x27b878(0x86)){const {matrix:_0x2a3a42}=_0x305e85[_0x27b878(0xa0)];try{const _0x21a82e=await this[_0x27b878(0xf4)](_0x27b878(0xd8));if(_0x21a82e&&_0x21a82e[_0x27b878(0xb9)]){const _0xda5ae4=JSON[_0x27b878(0x134)](_0x21a82e[_0x27b878(0xb9)]);_0xda5ae4[_0x27b878(0x9f)]=_0x2a3a42,_0xda5ae4['updated']=Date[_0x27b878(0x142)](),await this['setStateAsync'](_0x27b878(0xd8),{'val':JSON[_0x27b878(0x122)](_0xda5ae4),'ack':!![]}),pythonBridge[_0x27b878(0xad)](this,_0x27b878(0x7e),_0xda5ae4);}this[_0x27b878(0x13a)](_0x305e85['from'],_0x305e85[_0x27b878(0x97)],{'success':!![]},_0x305e85[_0x27b878(0xc8)]);}catch(_0x3169e0){}}else{if(_0x305e85['command']===_0x27b878(0x101))this[_0x27b878(0x13a)](_0x305e85[_0x27b878(0xfc)],_0x305e85[_0x27b878(0x97)],{'success':!![],'dailyDigests':this[_0x27b878(0xc6)]||[],'analysisHistory':this[_0x27b878(0xa3)]||[]},_0x305e85['callback']);else{if(_0x305e85[_0x27b878(0x97)]==='getOverviewData'){const _0x581f00=this[_0x27b878(0xc6)]['length'],_0x198340=new Array(0x18)[_0x27b878(0xb6)](0x0),_0x494842=new Date()[_0x27b878(0x141)](0x0,0x0,0x0,0x0);this[_0x27b878(0x12c)]&&this[_0x27b878(0x12c)][_0x27b878(0xcd)](_0x35275a=>{if(_0x35275a['timestamp']>=_0x494842){const _0x4974ce=new Date(_0x35275a['timestamp'])['getHours']();if(_0x4974ce>=0x0&&_0x4974ce<0x18)_0x198340[_0x4974ce]++;}}),this[_0x27b878(0x13a)](_0x305e85[_0x27b878(0xfc)],_0x305e85[_0x27b878(0x97)],{'success':!![],'eventHistory':this[_0x27b878(0x12c)][_0x27b878(0xa1)](0x0,0xf),'stats':{'digestCount':_0x581f00,'isPresent':this['isPresent'],'hourlyActivity':_0x198340},'automation':{'detected':![]}},_0x305e85[_0x27b878(0xc8)]);}else{if(_0x305e85['command']===_0x27b878(0xa4)){const _0xdc1136=await this[_0x27b878(0xf2)](_0x27b878(0x109),'enum'),_0x465da4=[];if(_0xdc1136)for(const _0x3fec5c in _0xdc1136){const _0x2388c3=_0xdc1136[_0x3fec5c],_0x8d80b9=(_0x2388c3['common']&&typeof _0x2388c3[_0x27b878(0x8a)]['name']===_0x27b878(0x8f)?_0x2388c3['common'][_0x27b878(0xac)]['de']:_0x2388c3[_0x27b878(0x8a)][_0x27b878(0xac)])||_0x2388c3[_0x27b878(0x8a)][_0x27b878(0xac)];_0x465da4[_0x27b878(0xd1)]({'id':_0x3fec5c,'name':_0x8d80b9});}const _0x49be04=await this[_0x27b878(0xf2)](_0x27b878(0x12f),_0x27b878(0x93)),_0x41b33f=[];if(_0x49be04)for(const _0x2ee3a5 in _0x49be04){const _0x91634b=_0x49be04[_0x2ee3a5],_0x51b1e8=(_0x91634b[_0x27b878(0x8a)]&&typeof _0x91634b[_0x27b878(0x8a)][_0x27b878(0xac)]===_0x27b878(0x8f)?_0x91634b[_0x27b878(0x8a)][_0x27b878(0xac)]['de']:_0x91634b[_0x27b878(0x8a)][_0x27b878(0xac)])||_0x2ee3a5['split']('.')[_0x27b878(0xa5)]();_0x41b33f[_0x27b878(0xd1)](_0x51b1e8);}this[_0x27b878(0x13a)](_0x305e85[_0x27b878(0xfc)],_0x305e85[_0x27b878(0x97)],{'success':!![],'enums':_0x465da4,'rooms':_0x41b33f},_0x305e85[_0x27b878(0xc8)]);}else{if(_0x305e85[_0x27b878(0x97)]===_0x27b878(0x84)){let _0x4bc8f9=_0x27b878(0x11a),_0x3c4ca2='Kein\x20Kalender-Adapter';try{if(this[_0x27b878(0xba)][_0x27b878(0xff)]){const _0x521155=await recorder[_0x27b878(0x136)](this);_0x4bc8f9=_0x521155!==null?_0x521155+'Â°C':_0x27b878(0xec);}if(this[_0x27b878(0xba)][_0x27b878(0xe0)]){const _0x51b158=await this['getForeignObjectAsync'](_0x27b878(0x113)+this['config'][_0x27b878(0xe0)]);_0x3c4ca2=_0x51b158?_0x27b878(0x8e):'Instanz\x20nicht\x20gefunden';}}catch(_0x59d2e9){_0x4bc8f9=_0x59d2e9[_0x27b878(0xa0)];}this[_0x27b878(0x13a)](_0x305e85[_0x27b878(0xfc)],_0x305e85[_0x27b878(0x97)],{'success':!![],'weather':_0x4bc8f9,'calendar':_0x3c4ca2},_0x305e85['callback']);}else{if(_0x305e85['command']===_0x27b878(0xd6)){const _0x33ae74=_0x305e85[_0x27b878(0xa0)][_0x27b878(0xed)];try{const _0x405c4c=await this[_0x27b878(0x115)](_0x33ae74+_0x27b878(0xfb));let _0x350dc8=[];if(_0x405c4c&&_0x405c4c[_0x27b878(0xb9)]){const _0x1e08e8=JSON['parse'](_0x405c4c['val']);_0x350dc8=_0x1e08e8['slice'](0x0,0x5)[_0x27b878(0xf8)](_0x2e2997=>_0x2e2997[_0x27b878(0x132)]);}this['sendTo'](_0x305e85[_0x27b878(0xfc)],_0x305e85[_0x27b878(0x97)],{'success':!![],'names':_0x350dc8[_0x27b878(0x111)]?_0x350dc8:[_0x27b878(0xdf)]},_0x305e85[_0x27b878(0xc8)]);}catch(_0x300166){this[_0x27b878(0x13a)](_0x305e85[_0x27b878(0xfc)],_0x305e85[_0x27b878(0x97)],{'success':![],'error':_0x300166[_0x27b878(0xa0)]},_0x305e85[_0x27b878(0xc8)]);}}else _0x305e85['command']===_0x27b878(0xc4)&&(await setup[_0x27b878(0xe9)](this,_0x27b878(0xc7),![],![]),this['sendTo'](_0x305e85[_0x27b878(0xfc)],_0x305e85['command'],{'success':!![],'message':'Gesendet'},_0x305e85[_0x27b878(0xc8)]));}}}}}}}}}async[a0_0x3c60d5(0xc5)](){const _0x11ee41=a0_0x3c60d5;try{const _0xd30793=await this[_0x11ee41(0xf4)](setup[_0x11ee41(0xe3)]);_0xd30793&&_0xd30793[_0x11ee41(0xb9)]&&Object[_0x11ee41(0x131)](setup[_0x11ee41(0x13f)])[_0x11ee41(0x129)](_0xd30793['val'])?this[_0x11ee41(0x13b)]=_0xd30793['val']:(this[_0x11ee41(0x13b)]=setup[_0x11ee41(0x13f)][_0x11ee41(0xe4)],await this[_0x11ee41(0x135)](setup[_0x11ee41(0xe3)],{'val':setup['SYSTEM_MODES'][_0x11ee41(0xe4)],'ack':!![]}));}catch(_0xa8a1b7){this[_0x11ee41(0x13b)]=setup[_0x11ee41(0x13f)][_0x11ee41(0xe4)];}}async['checkWifiPresence'](){const _0xec6ee4=a0_0x3c60d5;try{const _0x3dacea=this[_0xec6ee4(0xba)][_0xec6ee4(0x80)]||[];let _0xf790d3=![];const _0x3ccd13=[];for(const _0x2aa342 of _0x3dacea){try{const _0x2e36dd=await this[_0xec6ee4(0x115)](_0x2aa342);_0x2e36dd&&(_0x2e36dd[_0xec6ee4(0xb9)]===!![]||_0x2e36dd[_0xec6ee4(0xb9)]==='online'||_0x2e36dd['val']===0x1)&&(_0xf790d3=!![],_0x3ccd13['push'](_0x2aa342));}catch(_0x4a08e7){}}return await this[_0xec6ee4(0x135)]('system.presenceWho',{'val':_0x3ccd13['join'](',\x20'),'ack':!![]}),_0xf790d3&&(this['exitTimer']&&(this['log'][_0xec6ee4(0xc1)](_0xec6ee4(0xa9)),recorder[_0xec6ee4(0x121)](this)),!this[_0xec6ee4(0xd5)]&&this[_0xec6ee4(0x13b)]===setup['SYSTEM_MODES']['NORMAL']&&await recorder[_0xec6ee4(0xa8)](this,!![])),_0xf790d3;}catch(_0x1c3dc9){return![];}}async['runAutopilot'](){const _0x299ba0=a0_0x3c60d5;this['log']['debug'](_0x299ba0(0x7b)),await aiAgent[_0x299ba0(0xb8)](this),this[_0x299ba0(0x10e)](),this[_0x299ba0(0x126)](),this['triggerEnergyPrediction']();}[a0_0x3c60d5(0x126)](){const _0x89b459=a0_0x3c60d5;if(!this[_0x89b459(0xc3)])return;try{this[_0x89b459(0x140)]('LTM.trainingData.sequences',(_0x4cd3f0,_0x476103)=>{const _0x571b14=_0x89b459;_0x476103&&_0x476103[_0x571b14(0xb9)]&&pythonBridge[_0x571b14(0xad)](this,_0x571b14(0xe6),{'sequences':JSON[_0x571b14(0x134)](_0x476103[_0x571b14(0xb9)])});});}catch(_0xc6f12d){}}async[a0_0x3c60d5(0x143)](){const _0x29fa0e=a0_0x3c60d5;if(!this['isProVersion'])return;try{const _0x5e2b96=await recorder[_0x29fa0e(0x136)](this);if(_0x5e2b96===null)return;const _0x3fb1d9={},_0x28abd5=this['config'][_0x29fa0e(0x144)]||[];for(const _0x1a7e12 of _0x28abd5){if(_0x1a7e12[_0x29fa0e(0x99)]===_0x29fa0e(0xbc)&&_0x1a7e12[_0x29fa0e(0xe7)]){const _0x1640e8=this[_0x29fa0e(0x8d)][_0x1a7e12['id']];if(_0x1640e8!==undefined)_0x3fb1d9[_0x1a7e12[_0x29fa0e(0xe7)]]=_0x1640e8;}}Object[_0x29fa0e(0x83)](_0x3fb1d9)[_0x29fa0e(0x111)]>0x0&&pythonBridge[_0x29fa0e(0xad)](this,'PREDICT_ENERGY',{'current_temps':_0x3fb1d9,'t_out':_0x5e2b96});}catch(_0x31269d){}}['updateHealthVector'](){const _0x5980ea=a0_0x3c60d5;if(!this[_0x5980ea(0x128)]||this[_0x5980ea(0x128)][_0x5980ea(0x111)]===0x0)return;const _0x4ab323=new Array(0x60)[_0x5980ea(0xb6)](0x0),_0x4bf748=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x5980ea(0x128)][_0x5980ea(0xcd)](_0x24908e=>{const _0x550b64=_0x5980ea,_0x615b30=new Date(_0x24908e[_0x550b64(0xdc)]);if(_0x615b30[_0x550b64(0xf9)]()>=_0x4bf748){const _0x2d9424=_0x615b30[_0x550b64(0xe1)](),_0x3071ea=_0x615b30[_0x550b64(0x8b)](),_0x1685bd=_0x2d9424*0x4+Math[_0x550b64(0xf7)](_0x3071ea/0xf);if(_0x1685bd>=0x0&&_0x1685bd<0x60)_0x4ab323[_0x1685bd]++;}}),this[_0x5980ea(0x135)](_0x5980ea(0x9b),{'val':JSON['stringify'](_0x4ab323),'ack':!![]});}[a0_0x3c60d5(0x92)](){const _0x42d125=a0_0x3c60d5;if(!this['dailyDigests']||this[_0x42d125(0xc6)]['length']<0x2)return;const _0x1f6ccc=this['dailyDigests'][_0x42d125(0xf8)](_0x53cea5=>{const _0x358b51=_0x42d125,_0x42bb31=(_0x53cea5[_0x358b51(0xf6)]||'')[_0x358b51(0x10d)]();return ACTIVITY_LEVEL_MAP[_0x42bb31]||0x32;});pythonBridge[_0x42d125(0xad)](this,_0x42d125(0x7c),{'values':_0x1f6ccc,'tag':_0x42d125(0xb0)});}}if(require[a0_0x3c60d5(0xca)]!==module)module[a0_0x3c60d5(0x9c)]=_0x489e22=>new CogniLiving(_0x489e22);else new CogniLiving();