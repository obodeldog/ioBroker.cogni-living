const a0_0x754b41=a0_0x5711;(function(_0x641c16,_0x51edf3){const _0x252e5d=a0_0x5711,_0x5e3885=_0x641c16();while(!![]){try{const _0x25af08=parseInt(_0x252e5d(0x294))/0x1*(parseInt(_0x252e5d(0x18c))/0x2)+parseInt(_0x252e5d(0x156))/0x3*(parseInt(_0x252e5d(0x20d))/0x4)+parseInt(_0x252e5d(0x190))/0x5*(parseInt(_0x252e5d(0x1ba))/0x6)+parseInt(_0x252e5d(0x1c4))/0x7*(parseInt(_0x252e5d(0x266))/0x8)+parseInt(_0x252e5d(0x1bf))/0x9*(-parseInt(_0x252e5d(0x12d))/0xa)+-parseInt(_0x252e5d(0x25f))/0xb*(parseInt(_0x252e5d(0x1ac))/0xc)+parseInt(_0x252e5d(0x17a))/0xd;if(_0x25af08===_0x51edf3)break;else _0x5e3885['push'](_0x5e3885['shift']());}catch(_0x1f8d19){_0x5e3885['push'](_0x5e3885['shift']());}}}(a0_0x4a9e,0x94290));const a0_0x19a815=(function(){let _0x19242b=!![];return function(_0x39049e,_0x3aca52){const _0x483ac8=_0x19242b?function(){const _0x279216=a0_0x5711;if(_0x3aca52){const _0xc824a1=_0x3aca52[_0x279216(0x1a9)](_0x39049e,arguments);return _0x3aca52=null,_0xc824a1;}}:function(){};return _0x19242b=![],_0x483ac8;};}()),a0_0x4e10a7=a0_0x19a815(this,function(){const _0x207b89=a0_0x5711;return a0_0x4e10a7[_0x207b89(0x1a3)]()['search'](_0x207b89(0x21b))[_0x207b89(0x1a3)]()[_0x207b89(0x28e)](a0_0x4e10a7)['search'](_0x207b89(0x21b));});a0_0x4e10a7();'use strict';const utils=require(a0_0x754b41(0x290)),{GoogleGenerativeAI}=require(a0_0x754b41(0x1e7)),{spawn}=require(a0_0x754b41(0x1f5)),path=require(a0_0x754b41(0x288)),fs=require('fs'),installer=require('./lib/installer'),scanner=require(a0_0x754b41(0x267)),schedulers=require(a0_0x754b41(0x176)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x754b41(0x26f),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0x754b41(0x29b),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST=a0_0x754b41(0x1a0),LTM_DP_BASELINE_STATUS=a0_0x754b41(0x24f),LTM_DP_DRIFT_CHANNEL=a0_0x754b41(0x13e),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS=a0_0x754b41(0x17c),LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':a0_0x754b41(0x13f),'VACATION':a0_0x754b41(0x263),'PARTY':a0_0x754b41(0x29d),'GUEST':'guest'},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x754b41(0x22f)],SYSTEM_MODES[a0_0x754b41(0x153)]],PERSONA_MAPPING={'generic':a0_0x754b41(0x236),'senior_aal':'PRIORITÃ„T:\x20Gesundheit/AAL.','family':'Fokus\x20auf\x20Familienroutinen.','single_comfort':a0_0x754b41(0x131),'security':a0_0x754b41(0x1c6)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x1a4379){const _0x50d220=a0_0x754b41;try{const _0x162a04=[_0x50d220(0x1e1),'events.history_debug_00'];for(const _0x1cec05 of _0x162a04){try{const _0x12d9cd=await _0x1a4379[_0x50d220(0x1a6)](_0x1cec05);if(_0x12d9cd)await _0x1a4379[_0x50d220(0x157)](_0x1cec05);}catch(_0x31c298){}}}catch(_0x3bdca7){}}async function checkLicense(_0x50d93a){return!![];}async function initHistory(_0x3c3da9){const _0x3a0302=a0_0x754b41;try{const _0x4e596b=await _0x3c3da9['getStateAsync'](_0x3a0302(0x1be));_0x4e596b&&_0x4e596b['val']&&(_0x3c3da9[_0x3a0302(0x1e3)]=JSON[_0x3a0302(0x1c7)](_0x4e596b[_0x3a0302(0x12b)][_0x3a0302(0x1a3)]()));}catch(_0x28834a){_0x3c3da9[_0x3a0302(0x1e3)]=[];}try{const _0x4fc89e=await _0x3c3da9[_0x3a0302(0x26b)](_0x3a0302(0x2a3));if(_0x4fc89e&&_0x4fc89e['val'])_0x3c3da9[_0x3a0302(0x141)]=JSON[_0x3a0302(0x1c7)](_0x4fc89e[_0x3a0302(0x12b)][_0x3a0302(0x1a3)]());}catch(_0x387315){_0x3c3da9['analysisHistory']=[];}if(_0x3c3da9['eventHistory']&&_0x3c3da9[_0x3a0302(0x1e3)][_0x3a0302(0x1a1)]>0x0){_0x3c3da9[_0x3a0302(0x21e)][_0x3a0302(0x1da)](_0x3a0302(0x12f));for(let _0x39b78d=_0x3c3da9[_0x3a0302(0x1e3)][_0x3a0302(0x1a1)]-0x1;_0x39b78d>=0x0;_0x39b78d--){const _0x188e85=_0x3c3da9[_0x3a0302(0x1e3)][_0x39b78d];if(_0x188e85&&_0x188e85['id']!==undefined&&_0x188e85[_0x3a0302(0x212)]!==undefined)_0x3c3da9[_0x3a0302(0x272)][_0x188e85['id']]=_0x188e85[_0x3a0302(0x212)];}}}async function initSystemConfig(_0x3c4011){const _0x3e6cb0=a0_0x754b41;try{const _0x10f3ca=await _0x3c4011[_0x3e6cb0(0x144)](_0x3e6cb0(0x275));if(_0x10f3ca&&_0x10f3ca[_0x3e6cb0(0x14f)])_0x3c4011[_0x3e6cb0(0x2ba)]={'latitude':_0x10f3ca[_0x3e6cb0(0x14f)][_0x3e6cb0(0x281)]||0x0,'longitude':_0x10f3ca['common'][_0x3e6cb0(0x26d)]||0x0,'city':_0x10f3ca[_0x3e6cb0(0x14f)][_0x3e6cb0(0x1e4)]||''};}catch(_0x272800){}}async function createAllObjects(_0x5b619d){const _0x443513=a0_0x754b41;await _0x5b619d[_0x443513(0x240)](_0x443513(0x165),{'type':_0x443513(0x12a),'common':{'name':_0x443513(0x28b)},'native':{}}),await _0x5b619d[_0x443513(0x240)](SYSTEM_DP_MODE,{'type':_0x443513(0x1a5),'common':{'name':'System\x20Mode','type':_0x443513(0x27e),'role':_0x443513(0x1a5),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x443513(0x18a)]},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x27f),{'type':'state','common':{'name':'Who\x20is\x20present?','type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x5b619d['setObjectNotExistsAsync'](_0x443513(0x2a9),{'type':_0x443513(0x1a5),'common':{'name':_0x443513(0x28d),'type':_0x443513(0x27e),'role':_0x443513(0x158),'read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x1be),{'type':_0x443513(0x1a5),'common':{'name':_0x443513(0x18f),'type':_0x443513(0x27e),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5b619d['extendObjectAsync'](_0x443513(0x149),{'type':'channel','common':{'name':_0x443513(0x24b)},'native':{}}),await _0x5b619d['setObjectNotExistsAsync'](_0x443513(0x15e),{'type':_0x443513(0x1a5),'common':{'name':_0x443513(0x197),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x5b619d['setObjectNotExistsAsync']('analysis.training.triggerHealth',{'type':_0x443513(0x1a5),'common':{'name':_0x443513(0x1f0),'type':_0x443513(0x205),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x1f8),{'type':'state','common':{'name':_0x443513(0x22a),'type':'boolean','role':_0x443513(0x21a),'read':!![],'write':!![]},'native':{}}),await _0x5b619d['setObjectNotExistsAsync'](_0x443513(0x15a),{'type':'state','common':{'name':_0x443513(0x13c),'type':_0x443513(0x205),'role':_0x443513(0x21a),'read':!![],'write':!![]},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x1f4),{'type':_0x443513(0x1a5),'common':{'name':'Build\x20Topology','type':_0x443513(0x205),'role':_0x443513(0x21a),'read':!![],'write':!![]},'native':{}}),await _0x5b619d['setObjectNotExistsAsync'](_0x443513(0x1fc),{'type':_0x443513(0x1a5),'common':{'name':'Training\x20Status','type':'string','role':_0x443513(0x19d),'read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x240)](_0x443513(0x22b),{'type':'channel','common':{'name':_0x443513(0x1a2)},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x18b),{'type':_0x443513(0x1a5),'common':{'name':'Anomaly\x20Score','type':'number','role':_0x443513(0x212),'read':!![],'write':![]},'native':{}}),await _0x5b619d['setObjectNotExistsAsync'](_0x443513(0x1dc),{'type':_0x443513(0x1a5),'common':{'name':_0x443513(0x291),'type':_0x443513(0x2a2),'role':_0x443513(0x212),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x1bb),{'type':_0x443513(0x1a5),'common':{'name':_0x443513(0x195),'type':_0x443513(0x27e),'role':_0x443513(0x16c),'read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x1c1),{'type':'state','common':{'name':'Topology\x20Matrix','type':_0x443513(0x27e),'role':_0x443513(0x158),'read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x240)](_0x443513(0x16b),{'type':'channel','common':{'name':'Health\x20Analysis'},'native':{}}),await _0x5b619d[_0x443513(0x261)]('analysis.health.lastCheck',{'type':_0x443513(0x1a5),'common':{'name':'Last\x20Check','type':_0x443513(0x27e),'role':_0x443513(0x16c),'read':!![],'write':![]},'native':{}}),await _0x5b619d['setObjectNotExistsAsync'](_0x443513(0x248),{'type':'state','common':{'name':_0x443513(0x17f),'type':_0x443513(0x205),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x1f2),{'type':'state','common':{'name':_0x443513(0x1b0),'type':_0x443513(0x27e),'role':'text','read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x1ca),{'type':_0x443513(0x1a5),'common':{'name':_0x443513(0x142),'type':_0x443513(0x2a2),'role':_0x443513(0x212),'read':!![],'write':![]},'native':{}}),await _0x5b619d['setObjectNotExistsAsync'](_0x443513(0x29c),{'type':_0x443513(0x1a5),'common':{'name':_0x443513(0x1c3),'type':_0x443513(0x27e),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x12e),{'type':'state','common':{'name':_0x443513(0x25a),'type':_0x443513(0x2a2),'role':'value','read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x240)](_0x443513(0x14e),{'type':_0x443513(0x12a),'common':{'name':_0x443513(0x295)},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x14a),{'type':_0x443513(0x1a5),'common':{'name':'Insulation\x20Score','type':_0x443513(0x27e),'role':_0x443513(0x19d),'read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x1cf),{'type':'state','common':{'name':_0x443513(0x21d),'type':_0x443513(0x27e),'role':'text','read':!![],'write':![]},'native':{}}),await _0x5b619d['setObjectNotExistsAsync'](_0x443513(0x1e0),{'type':_0x443513(0x1a5),'common':{'name':'Temperature\x20Forecast','type':_0x443513(0x27e),'role':_0x443513(0x158),'read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x240)](_0x443513(0x1d3),{'type':_0x443513(0x12a),'common':{'name':'LTM'},'native':{}}),await _0x5b619d[_0x443513(0x240)](LTM_DP_RAW_LOG,{'type':_0x443513(0x1a5),'common':{'name':_0x443513(0x201),'type':'string','role':_0x443513(0x158),'read':!![],'write':![]},'native':{}}),await _0x5b619d['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x443513(0x1a5),'common':{'name':_0x443513(0x23d),'type':_0x443513(0x27e),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x261)]('LTM.trainingData.sequences',{'type':_0x443513(0x1a5),'common':{'name':'Sequences','type':_0x443513(0x27e),'role':_0x443513(0x158),'read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x261)]('LTM.trainingData.thermodynamics',{'type':_0x443513(0x1a5),'common':{'name':_0x443513(0x24e),'type':_0x443513(0x27e),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5b619d['setObjectNotExistsAsync'](_0x443513(0x19a),{'type':_0x443513(0x1a5),'common':{'name':_0x443513(0x208),'type':_0x443513(0x205),'role':_0x443513(0x21a),'read':!![],'write':!![]},'native':{}}),await _0x5b619d['setObjectNotExistsAsync'](_0x443513(0x147),{'type':'state','common':{'name':'Trigger\x20Briefing','type':_0x443513(0x205),'role':_0x443513(0x21a),'read':!![],'write':!![]},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x1f7),{'type':_0x443513(0x1a5),'common':{'name':_0x443513(0x254),'type':'boolean','role':'indicator.alarm','read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x186),{'type':_0x443513(0x1a5),'common':{'name':'Alert\x20Reason','type':_0x443513(0x27e),'role':_0x443513(0x203),'read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x199),{'type':_0x443513(0x1a5),'common':{'name':_0x443513(0x1a4),'type':_0x443513(0x27e),'role':_0x443513(0x19d),'read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x261)]('analysis.automation.patternDetected',{'type':_0x443513(0x1a5),'common':{'name':_0x443513(0x221),'type':_0x443513(0x205),'role':_0x443513(0x1ae),'read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x161),{'type':_0x443513(0x1a5),'common':{'name':_0x443513(0x181),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x296),{'type':'state','common':{'name':_0x443513(0x1ff),'type':_0x443513(0x27e),'role':_0x443513(0x158),'read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x17b),{'type':'state','common':{'name':_0x443513(0x15d),'type':_0x443513(0x27e),'role':_0x443513(0x19d),'read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x273),{'type':_0x443513(0x1a5),'common':{'name':_0x443513(0x225),'type':'string','role':_0x443513(0x19d),'read':!![],'write':![]},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x187),{'type':'state','common':{'name':'Auto\x20Apply','type':_0x443513(0x205),'role':_0x443513(0x140),'read':!![],'write':!![]},'native':{}}),await _0x5b619d[_0x443513(0x261)](_0x443513(0x229),{'type':'state','common':{'name':'Trigger\x20Action','type':_0x443513(0x205),'role':_0x443513(0x21a),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x39b0e2){const _0x2f6987=a0_0x754b41;try{const _0x2f8bb8=await _0x39b0e2[_0x2f6987(0x26b)](SYSTEM_DP_MODE);_0x2f8bb8&&_0x2f8bb8[_0x2f6987(0x12b)]&&Object[_0x2f6987(0x135)](SYSTEM_MODES)['includes'](_0x2f8bb8['val'])?_0x39b0e2[_0x2f6987(0x206)]=_0x2f8bb8[_0x2f6987(0x12b)]:(_0x39b0e2[_0x2f6987(0x206)]=SYSTEM_MODES[_0x2f6987(0x18a)],await _0x39b0e2['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x2f6987(0x18a)],'ack':!![]}));}catch(_0x13ecc7){_0x39b0e2[_0x2f6987(0x206)]=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0x49fb8f){const _0x27c5dd=a0_0x754b41;try{const _0x4a9572=await _0x49fb8f[_0x27c5dd(0x26b)](LTM_DP_RAW_LOG);if(_0x4a9572&&_0x4a9572[_0x27c5dd(0x12b)])_0x49fb8f[_0x27c5dd(0x200)]=JSON[_0x27c5dd(0x1c7)](_0x4a9572[_0x27c5dd(0x12b)]);}catch(_0x1ae6d8){_0x49fb8f[_0x27c5dd(0x200)]=[];}}async function saveRawEventLog(_0x4f3c0c){const _0x2c7cbc=a0_0x754b41;if(_0x4f3c0c['rawEventLog']['length']>RAW_LOG_MAX_SIZE)_0x4f3c0c[_0x2c7cbc(0x200)][_0x2c7cbc(0x1c0)](0x0,_0x4f3c0c[_0x2c7cbc(0x200)]['length']-RAW_LOG_MAX_SIZE);await _0x4f3c0c['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x2c7cbc(0x1b6)](_0x4f3c0c[_0x2c7cbc(0x200)]),'ack':!![]});}async function loadDailyDigests(_0x2d45c0){const _0x3e7b22=a0_0x754b41;try{const _0x344cf7=await _0x2d45c0[_0x3e7b22(0x26b)](LTM_DP_DAILY_DIGESTS);if(_0x344cf7&&_0x344cf7[_0x3e7b22(0x12b)])_0x2d45c0[_0x3e7b22(0x17d)]=JSON[_0x3e7b22(0x1c7)](_0x344cf7[_0x3e7b22(0x12b)]);}catch(_0x55ed24){_0x2d45c0['dailyDigests']=[];}await updateBaselineStatus(_0x2d45c0);}async function saveDailyDigests(_0x6b3f03,_0x5b728c=!![]){const _0x2c314f=a0_0x754b41,_0x2baa1c=_0x6b3f03[_0x2c314f(0x219)][_0x2c314f(0x1eb)]||0x3c;_0x6b3f03[_0x2c314f(0x17d)][_0x2c314f(0x1a1)]>_0x2baa1c&&_0x6b3f03['dailyDigests']['splice'](0x0,_0x6b3f03[_0x2c314f(0x17d)]['length']-_0x2baa1c);await _0x6b3f03['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x2c314f(0x1b6)](_0x6b3f03[_0x2c314f(0x17d)]),'ack':!![]});if(_0x5b728c)await updateBaselineStatus(_0x6b3f03);}async function updateAnalysisHistory(_0x3478b7,_0xd36139){const _0x5220c9=a0_0x754b41;_0x3478b7[_0x5220c9(0x141)][_0x5220c9(0x2ac)](_0xd36139);if(_0x3478b7[_0x5220c9(0x141)][_0x5220c9(0x1a1)]>HISTORY_MAX_SIZE)_0x3478b7['analysisHistory'][_0x5220c9(0x204)]();await _0x3478b7[_0x5220c9(0x23e)]('analysis.analysisHistory',{'val':JSON['stringify'](_0x3478b7[_0x5220c9(0x141)]),'ack':!![]});}async function updateBaselineStatus(_0x11aa03){const _0x14c0cb=a0_0x754b41;if(!_0x11aa03[_0x14c0cb(0x27d)]){await _0x11aa03[_0x14c0cb(0x23e)](LTM_DP_BASELINE_STATUS,{'val':_0x14c0cb(0x1cc),'ack':!![]});return;}const _0x110d56=_0x11aa03[_0x14c0cb(0x17d)][_0x14c0cb(0x1a1)]>=(_0x11aa03[_0x14c0cb(0x219)][_0x14c0cb(0x23a)]||0x7)?_0x14c0cb(0x174)+_0x11aa03[_0x14c0cb(0x17d)]['length']+_0x14c0cb(0x270):_0x14c0cb(0x1fb)+_0x11aa03[_0x14c0cb(0x17d)][_0x14c0cb(0x1a1)]+'/'+(_0x11aa03[_0x14c0cb(0x219)][_0x14c0cb(0x23a)]||0x7)+')';await _0x11aa03['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x110d56,'ack':!![]});}function a0_0x4a9e(){const _0x33b142=['analysis.health.todayVector','party','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','Kein\x20API\x20Key.','includes','\x0aGrund:\x20','number','analysis.analysisHistory','join','callback','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','sendTo','debug','events.lastEvent','ANALYZE_TREND','Regel\x20erkannt:\x20','unshift','cogni-living\x20adapter\x20starting\x20(v','useCalendar','generic','TRAINING_COMPLETE','LTM.trainingData.thermodynamics','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','licenseKey','geminiModel','TOPOLOGY_RESULT','threshold','cogni-living','.Current.Temperature','object','systemConfig','status','light','Adapter','communicate.request','Gemini\x20Error:\x20','Gemini\x20AI\x20initialized.','channel','val','TRAIN_HEALTH','10lSoAyQ','analysis.health.gaitSpeed','Restoring\x20sensor\x20cache...','details','Fokus\x20auf\x20Komfort.','ack','system.isPresent','.forecast.current.state','values','automationProposal','now','getCalendarNames','enum','scanDevices','is_anomaly','Train\x20Comfort','version','LTM.driftAnalysis','normal','switch','analysisHistory','Trend\x20Value','ltmStbWindowDays','getForeignObjectAsync','isPresent','heating','analysis.triggerBriefing','floor','analysis.training','analysis.energy.insulationScore','map','N/A','diagnosis','analysis.energy','common','isAlert','description','toFixed','GUEST','WiFi\x20Presence\x20detected.','Success:\x20','81369JQKrIs','delObjectAsync','json','analysis.automation.patternDetected','analysis.training.triggerComfort','telegram','âš ï¸\x20SECURITY\x20ALARM:\x20','Target\x20ID','analysis.training.triggerSecurity','motion','PONG','analysis.automation.description','Kalender\x20deaktiviert.','alertReason','Activity-Level','system','stateChange','rating','notifyTelegramEnabled','stdout','âš ï¸\x20ALARM:\x20','analysis.health','date','[LOG]','triggerBriefing','calendarInstance','write','VACATION','temperatur','writable','Aktiv\x20(','from','./lib/scheduler','timestamp','toLowerCase','[PYTHON]\x20','8857069SndCqD','analysis.automation.targetId','LTM.driftAnalysis.driftDetails','dailyDigests','Briefing\x20Error:\x20','Anomaly\x20Detected','\x20=\x20','Description','Unknown','analysis.health.lastCheck','keys','scanForDevices','analysis.alertReason','analysis.automation.autoApply','close','getFullYear','NORMAL','analysis.security.lastScore','3768SpmjcD','.communicate.request','\x20new\x20patterns.','Event\x20History','87220HalunQ','location','.\x20ANWESEND:\x20','startsWith','getEnums','Last\x20Check','PYTHON_EXE','Train\x20Security','getGenerativeModel','analysis.activitySummary','analysis.trigger','some','testContext','text','subscribeStates','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','LTM.triggerDailyDigest','length','Security\x20Monitor','toString','Activity\x20Summary','state','getObjectAsync','lastAlertState','Sec-Training\x20started...','apply','testApiKey','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','3708BavDsi','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','indicator','subscribeForeignStatesAsync','Trend','setupLtmScheduler','OK:\x20','enum.rooms.*','toLocaleTimeString','getTime','stringify','genAI','onMessage','\x20->\x20','102ucuzYc','analysis.security.lastCheck','fenster','HEALTH_TRAIN_RESULT','events.history','9843435yuESBo','splice','analysis.security.topologyMatrix','weatherunderground','Today\x20Vector\x20(15m)','90426cCdoZf','BUTLER\x20Execution\x20Error:\x20','PRIORITÃ„T:\x20Sicherheit.','parse','stdin','error','analysis.health.trendValue','briefingJob','Deaktiviert\x20(Pro-Feature)','round','triggerDailyDigest','analysis.energy.heatingScore','targetId','tÃ¼r','summary','LTM','dismissAutomation','python3','Err:\x20','loc','getLtmData','useWeather','info','analysisTimer','analysis.security.currentThreshold','setupDriftAnalysisScheduler','No\x20instance','generateContent','analysis.energy.forecast','analysis.history_debug_00','substring','eventHistory','city','unload','presenceDevices','@google/generative-ai','split','getForeignStateAsync','onReady','ltmLtbWindowDays','cancel','KI-Modell\x20nicht\x20initialisiert','driftAnalysisTimer','Gemini\x20Init\x20Error:\x20','Train\x20Health','ltmJob','analysis.health.trendDiagnosis','contact','analysis.training.triggerTopology','child_process','system.mode','analysis.isAlert','analysis.training.triggerEnergy','fill','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','Lernphase\x20(','analysis.training.status','.\x20EMERGENCY:\x20','modeResetJob','Detected\x20Patterns','rawEventLog','Raw\x20Log','Wetterdaten\x20deaktiviert.','text.alarm','pop','boolean','currentSystemMode','success','Trigger\x20Analysis','getHours','change_percent','autoApply','Training\x20Error:\x20','36QLgsmz','.forecast.current.temp','simulateButler','LTM.trainingData.sequences','setupModeResetScheduler','value','ENERGY_TRAIN_RESULT','kill','isEmergency','prÃ¤senz','Keine\x20Wetterdaten\x20verfÃ¼gbar.','geminiApiKey','config','button','(((.+)+)+)+$','TREND_RESULT','Heating\x20Score','log','.\x20EVENTS:\x20','setForeignStateAsync','Pattern\x20Detected','Error\x20launching\x20Python:\x20','livingContext','endsWith','Target\x20Value','onUnload','insulation','forEach','analysis.automation.triggerAction','Train\x20Energy','analysis.security','accuweather','shift','baselineDrift','PARTY','N/A\x20(Learning)','temperature','ready','trim','.Current.WeatherText','weatherInstance','Analysiere\x20ausgewogen.','ANOMALY','enum.functions.*','onStateChange','minDaysForBaseline','\x0aSTB:\x20','Digest','Daily\x20Digests','setStateAsync','Topology\x20Error:\x20','extendObjectAsync','activityLevel','exitTimer','existsSync','exitGraceTimer','getForeignObjectsAsync','window','ðŸ§ \x20Triggering\x20Security\x20Training...','analysis.health.isAnomaly','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','door','AI\x20Training','command','message','Thermodynamics','LTM.baselineStatus','.forecast.current.temperature','isExit','pythonProcess','response','Alert\x20Status','PREDICT_ENERGY','targetValue','ENERGY_PREDICT_RESULT','name','push','Gait\x20Speed\x20Trend','slice','ANALYZE_SEQUENCE','replace','lampe','16533onpZIQ','setState','setObjectNotExistsAsync','openweathermap','vacation','systemUUID','reason','360eidZsr','./lib/scanner','SECURITY_RESULT','toISOString','confidence','getStateAsync','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','longitude','logDuplicates','models/gemini-flash-latest','\x20Tage)','.\x20WETTER:\x20','sensorLastValues','analysis.automation.targetValue','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','system.config','dependencyInstallInProgress','User\x20dismissed\x20automation\x20proposal.','[RECORDER]\x20Error:\x20','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','isGracePeriodActive','unknown','devices','isProVersion','string','system.presenceWho','.\x20KONTEXT:\x20','latitude','data','type','Keine\x20Details.','payload','Â°C,\x20','outdoorSensorId','path','getMonth','COMFORT_RESULT','System','ðŸ\x20Python\x20Pong','Last\x20raw\x20event','constructor','bind','@iobroker/adapter-core','Current\x20Threshold','TRAIN_COMFORT','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','192vIoGwS','Energy\x20Intelligence','analysis.automation.detectedPatterns','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','getMinutes','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','analysis.training.triggerHealth','LTM.dailyDigests'];a0_0x4a9e=function(){return _0x33b142;};return a0_0x4a9e();}async function initSensorSubscriptions(_0x5c2ac6){const _0x263079=a0_0x754b41,_0x18bc75=_0x5c2ac6[_0x263079(0x219)][_0x263079(0x27c)];if(_0x18bc75)for(const _0x3d5f67 of _0x18bc75){await _0x5c2ac6[_0x263079(0x1af)](_0x3d5f67['id']);}}async function initPresenceSubscriptions(_0x1b4a54){const _0x4263cf=a0_0x754b41,_0x5154a6=_0x1b4a54[_0x4263cf(0x219)][_0x4263cf(0x1e6)];if(_0x5154a6)for(const _0x3f7e1f of _0x5154a6){await _0x1b4a54[_0x4263cf(0x1af)](_0x3f7e1f);}}async function setupTelegramListener(_0x4fda39){const _0xf58743=a0_0x754b41,_0xa19cb6=_0x4fda39['config']['notifyTelegramInstance'];if(_0x4fda39[_0xf58743(0x219)][_0xf58743(0x168)]&&_0xa19cb6)await _0x4fda39['subscribeForeignStatesAsync'](_0xa19cb6+_0xf58743(0x18d));}async function checkWifiPresence(_0x515037){const _0x519f81=a0_0x754b41;try{const _0x287cdd=_0x515037['config'][_0x519f81(0x1e6)]||[];let _0x917724=![];const _0xf4a5b3=[];for(const _0x31027e of _0x287cdd){try{const _0x582ade=await _0x515037['getForeignStateAsync'](_0x31027e);_0x582ade&&(_0x582ade['val']===!![]||_0x582ade[_0x519f81(0x12b)]==='online'||_0x582ade[_0x519f81(0x12b)]===0x1)&&(_0x917724=!![],_0xf4a5b3[_0x519f81(0x259)](_0x31027e));}catch(_0x7a688d){}}return await _0x515037[_0x519f81(0x23e)](_0x519f81(0x27f),{'val':_0xf4a5b3[_0x519f81(0x2a4)](',\x20'),'ack':!![]}),_0x917724&&(_0x515037['exitTimer']&&(_0x515037[_0x519f81(0x21e)][_0x519f81(0x1da)](_0x519f81(0x154)),abortExitTimer(_0x515037)),!_0x515037[_0x519f81(0x145)]&&_0x515037['currentSystemMode']===SYSTEM_MODES[_0x519f81(0x18a)]&&await setPresence(_0x515037,!![])),_0x917724;}catch(_0x28a778){return![];}}function startExitTimer(_0x268a34){const _0x27f91c=a0_0x754b41;abortExitTimer(_0x268a34),_0x268a34[_0x27f91c(0x27a)]=!![],_0x268a34['exitGraceTimer']=setTimeout(()=>{const _0x38782f=_0x27f91c;_0x268a34[_0x38782f(0x27a)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x268a34[_0x27f91c(0x242)]=setTimeout(()=>{const _0x279c96=_0x27f91c;setPresence(_0x268a34,![]),_0x268a34[_0x279c96(0x242)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x1d3bfa){const _0x14d8e7=a0_0x754b41;if(_0x1d3bfa['exitTimer'])clearTimeout(_0x1d3bfa[_0x14d8e7(0x242)]);if(_0x1d3bfa['exitGraceTimer'])clearTimeout(_0x1d3bfa['exitGraceTimer']);_0x1d3bfa[_0x14d8e7(0x242)]=null,_0x1d3bfa['exitGraceTimer']=null,_0x1d3bfa[_0x14d8e7(0x27a)]=![];}async function setPresence(_0x460c32,_0x3a721d){const _0xdfa424=a0_0x754b41;if(_0x460c32[_0xdfa424(0x145)]===_0x3a721d)return;_0x460c32[_0xdfa424(0x145)]=_0x3a721d,await _0x460c32[_0xdfa424(0x23e)](_0xdfa424(0x133),{'val':_0x3a721d,'ack':!![]});}async function executeAutomationAction(_0xa3f8b9){const _0xf218cb=a0_0x754b41;try{const _0x2c0278=await _0xa3f8b9[_0xf218cb(0x26b)]('analysis.automation.targetId'),_0x4c43af=await _0xa3f8b9['getStateAsync'](_0xf218cb(0x273));if(_0x2c0278&&_0x2c0278['val']&&_0x4c43af){const _0x3110c3=_0x2c0278[_0xf218cb(0x12b)];let _0x3c6219=_0x4c43af[_0xf218cb(0x12b)];try{_0x3c6219=JSON[_0xf218cb(0x1c7)](_0x3c6219);}catch(_0xdc012a){}_0xa3f8b9['log'][_0xf218cb(0x1da)](_0xf218cb(0x279)+_0x3110c3+_0xf218cb(0x180)+_0x3c6219),await _0xa3f8b9[_0xf218cb(0x220)](_0x3110c3,_0x3c6219);}else _0xa3f8b9[_0xf218cb(0x21e)]['warn'](_0xf218cb(0x299));}catch(_0x3289a3){_0xa3f8b9[_0xf218cb(0x21e)]['error'](_0xf218cb(0x1c5)+_0x3289a3[_0xf218cb(0x24d)]);}}async function processSensorEvent(_0x33bb34,_0x446560,_0x20696b,_0x2b14db){const _0x1be79a=a0_0x754b41;if(!_0x2b14db)return;const _0x2e7efb=_0x20696b['val'],_0x4d4fe4=Date[_0x1be79a(0x137)](),_0x2e411a=_0x33bb34['sensorLastValues'][_0x446560];_0x33bb34[_0x1be79a(0x272)][_0x446560]=_0x2e7efb;if(!_0x2b14db[_0x1be79a(0x26e)]&&_0x2e411a!=undefined&&_0x2e411a==_0x2e7efb)return;const _0x1b7747=(_0x2b14db['type']||'')[_0x1be79a(0x178)](),_0x2c1b7f=_0x1b7747[_0x1be79a(0x2a0)](_0x1be79a(0x231))||_0x1b7747['includes'](_0x1be79a(0x172))||_0x1b7747[_0x1be79a(0x2a0)]('klima')||_0x1b7747[_0x1be79a(0x2a0)]('heizung');_0x33bb34['isProVersion']&&_0x2c1b7f&&recordThermodynamics(_0x33bb34,_0x446560,_0x2e7efb,_0x2b14db[_0x1be79a(0x191)]);const _0x5ee95a={'timestamp':_0x4d4fe4,'id':_0x446560,'name':_0x2b14db[_0x1be79a(0x258)],'type':_0x2b14db[_0x1be79a(0x283)],'location':_0x2b14db[_0x1be79a(0x191)],'value':_0x2e7efb};_0x33bb34[_0x1be79a(0x1e3)][_0x1be79a(0x2ac)](_0x5ee95a);if(_0x33bb34[_0x1be79a(0x1e3)]['length']>HISTORY_MAX_SIZE)_0x33bb34[_0x1be79a(0x1e3)][_0x1be79a(0x204)]();await _0x33bb34[_0x1be79a(0x23e)](_0x1be79a(0x2a9),{'val':JSON['stringify'](_0x5ee95a),'ack':!![]}),await _0x33bb34[_0x1be79a(0x23e)](_0x1be79a(0x1be),{'val':JSON['stringify'](_0x33bb34[_0x1be79a(0x1e3)]),'ack':!![]});_0x33bb34[_0x1be79a(0x27d)]&&(_0x33bb34[_0x1be79a(0x200)][_0x1be79a(0x259)](_0x5ee95a),await saveRawEventLog(_0x33bb34),recordSequence(_0x33bb34,_0x5ee95a));if(_0x2b14db[_0x1be79a(0x251)]&&_0x2e7efb===!![]){if(_0x33bb34[_0x1be79a(0x145)]&&!_0x33bb34[_0x1be79a(0x27a)])startExitTimer(_0x33bb34);else{if(!_0x33bb34['isPresent'])setPresence(_0x33bb34,!![]);}}else{if(_0x2b14db[_0x1be79a(0x283)]===_0x1be79a(0x15f)&&_0x2e7efb===!![]){if(_0x33bb34[_0x1be79a(0x242)])abortExitTimer(_0x33bb34);if(!_0x33bb34[_0x1be79a(0x145)]&&_0x33bb34[_0x1be79a(0x206)]===SYSTEM_MODES['NORMAL'])setPresence(_0x33bb34,!![]);}}}async function recordThermodynamics(_0x44e186,_0x1b8b62,_0x19473a,_0x5442dd){const _0x412701=a0_0x754b41,_0x86eb6e=await getOutsideTemperatureNumeric(_0x44e186),_0x33f34c=await _0x44e186[_0x412701(0x26b)](_0x412701(0x2b1));let _0x3054e9=[];if(_0x33f34c&&_0x33f34c[_0x412701(0x12b)])try{_0x3054e9=JSON[_0x412701(0x1c7)](_0x33f34c[_0x412701(0x12b)]);}catch(_0x2359df){}_0x3054e9[_0x412701(0x259)]({'ts':Date['now'](),'room':_0x5442dd||_0x412701(0x182),'t_in':_0x19473a,'t_out':_0x86eb6e});if(_0x3054e9[_0x412701(0x1a1)]>THERMO_LOG_SIZE)_0x3054e9['shift']();await _0x44e186[_0x412701(0x23e)](_0x412701(0x2b1),{'val':JSON[_0x412701(0x1b6)](_0x3054e9),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x6d0f4e){const _0x39e010=a0_0x754b41;if(_0x6d0f4e[_0x39e010(0x219)][_0x39e010(0x287)])try{const _0xf6adda=await _0x6d0f4e[_0x39e010(0x1e9)](_0x6d0f4e[_0x39e010(0x219)][_0x39e010(0x287)]);if(_0xf6adda&&_0xf6adda[_0x39e010(0x12b)]!==undefined&&_0xf6adda['val']!==null)return parseFloat(_0xf6adda['val']);}catch(_0x552490){}const _0x2fad52=_0x6d0f4e['config'][_0x39e010(0x235)];if(!_0x6d0f4e[_0x39e010(0x219)][_0x39e010(0x1d9)]||!_0x2fad52)return null;try{let _0x1f16a9='';if(_0x2fad52['includes'](_0x39e010(0x22c)))_0x1f16a9=_0x2fad52+'.Current.Temperature';else{if(_0x2fad52['includes']('daswetter'))_0x1f16a9=_0x2fad52+'.NextHours.Location_1.Day_1.current.temp_value';else{if(_0x2fad52[_0x39e010(0x2a0)](_0x39e010(0x262)))_0x1f16a9=_0x2fad52+_0x39e010(0x250);else{if(_0x2fad52[_0x39e010(0x2a0)](_0x39e010(0x1c2)))_0x1f16a9=_0x2fad52+_0x39e010(0x20e);}}}if(_0x1f16a9){const _0x1a1090=await _0x6d0f4e[_0x39e010(0x1e9)](_0x1f16a9);if(_0x1a1090&&_0x1a1090[_0x39e010(0x12b)]!==undefined&&_0x1a1090['val']!==null)return parseFloat(_0x1a1090[_0x39e010(0x12b)]);}}catch(_0xc18e36){}return null;}async function recordSequence(_0x4efc33,_0x2aed61){const _0x3f69fe=a0_0x754b41,_0x42b746=(_0x2aed61[_0x3f69fe(0x283)]||'')['toLowerCase'](),_0x5f50fb=[_0x3f69fe(0x15f),'bewegung',_0x3f69fe(0x216),'presence','occupancy',_0x3f69fe(0x24a),_0x3f69fe(0x1d1),_0x3f69fe(0x246),_0x3f69fe(0x1bc),_0x3f69fe(0x1f3),'kontakt',_0x3f69fe(0x2bc),'licht',_0x3f69fe(0x140),'schalter','dimmer',_0x3f69fe(0x25e)];if(!_0x5f50fb[_0x3f69fe(0x19b)](_0xd8dc1c=>_0x42b746['includes'](_0xd8dc1c)))return;if(!_0x2aed61[_0x3f69fe(0x212)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x3f69fe(0x259)]({'loc':_0x2aed61[_0x3f69fe(0x191)]||_0x3f69fe(0x182),'id':_0x2aed61['id'],'ts':Date['now']()}),sequenceTimer=setTimeout(async()=>{const _0x1680c1=_0x3f69fe;if(activeSequence[_0x1680c1(0x1a1)]>0x1)await saveCompletedSequence(_0x4efc33);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x5682b2){const _0x483318=a0_0x754b41;try{const _0x549bf6=await _0x5682b2[_0x483318(0x26b)](_0x483318(0x210));let _0x54495c=[];if(_0x549bf6&&_0x549bf6['val'])try{_0x54495c=JSON['parse'](_0x549bf6[_0x483318(0x12b)]);}catch(_0x33c9ec){}const _0x47eb8b=activeSequence[0x0]['ts'],_0x5734fb=activeSequence[_0x483318(0x14b)](_0x369a0a=>({'loc':_0x369a0a[_0x483318(0x1d7)],'t_delta':Math[_0x483318(0x1cd)]((_0x369a0a['ts']-_0x47eb8b)/0x3e8)})),_0x132524={'timestamp':new Date(_0x47eb8b)[_0x483318(0x269)](),'steps':_0x5734fb,'duration':Math[_0x483318(0x1cd)]((activeSequence[activeSequence['length']-0x1]['ts']-_0x47eb8b)/0x3e8),'daytime':new Date(_0x47eb8b)[_0x483318(0x209)]()};_0x54495c['push'](_0x132524);if(_0x54495c[_0x483318(0x1a1)]>MAX_TRAINING_SET_SIZE)_0x54495c[_0x483318(0x22d)]();await _0x5682b2[_0x483318(0x23e)](_0x483318(0x210),{'val':JSON['stringify'](_0x54495c),'ack':!![]}),runSecurityCheck(_0x5682b2,_0x132524);}catch(_0x1b1a0b){_0x5682b2[_0x483318(0x21e)][_0x483318(0x1c9)](_0x483318(0x278)+_0x1b1a0b[_0x483318(0x24d)]);}}function runSecurityCheck(_0x36e49a,_0x254997){const _0x2307be=a0_0x754b41;if(!_0x36e49a[_0x2307be(0x27d)])return;sendToPython(_0x36e49a,_0x2307be(0x25c),{'sequence':_0x254997});}async function createDailyDigest(_0x15a56a){const _0x15e171=a0_0x754b41;if(!_0x15a56a['isProVersion'])return;await _0x15a56a[_0x15e171(0x23e)](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x15a56a[_0x15e171(0x2b4)]||_0x15a56a['rawEventLog'][_0x15e171(0x1a1)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x15a56a['setStateAsync'](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x373bef=JSON['parse'](JSON[_0x15e171(0x1b6)](_0x15a56a[_0x15e171(0x200)])),_0x2bced0=_0x373bef[_0x15e171(0x1a1)],_0x49a461=_0x15e171(0x293)+JSON[_0x15e171(0x1b6)](_0x373bef);try{const _0x296a3f=await _0x15a56a[_0x15e171(0x2b4)][_0x15e171(0x1df)](_0x49a461),_0x336733=JSON[_0x15e171(0x1c7)](_0x296a3f['response'][_0x15e171(0x19d)]()['replace'](/```json|```/g,'')[_0x15e171(0x233)]()),_0x54bf58={'timestamp':new Date()['toISOString'](),'eventCount':_0x2bced0,'summary':_0x336733[_0x15e171(0x1d2)]||_0x15e171(0x23c),'activityLevel':_0x336733['activityLevel']||_0x15e171(0x13f),'systemMode':_0x15a56a[_0x15e171(0x206)]};_0x15a56a[_0x15e171(0x17d)][_0x15e171(0x259)](_0x54bf58),await saveDailyDigests(_0x15a56a),_0x15a56a['rawEventLog']=[],await saveRawEventLog(_0x15a56a),await _0x15a56a['setStateAsync'](LTM_DP_STATUS,{'val':'Success','ack':!![]});if(_0x15a56a[_0x15e171(0x27d)])sendToPython(_0x15a56a,'ANALYZE_HEALTH',{'digest':_0x54bf58});}catch(_0x108e08){_0x15a56a[_0x15e171(0x21e)][_0x15e171(0x1c9)](_0x108e08[_0x15e171(0x24d)]);}}async function runBaselineDriftAnalysis(_0x323c5d){const _0x2e7f83=a0_0x754b41;if(!_0x323c5d['isProVersion']||!_0x323c5d[_0x2e7f83(0x2b4)])return;const _0x47b980=_0x323c5d[_0x2e7f83(0x219)][_0x2e7f83(0x143)]||0xe;if(_0x323c5d[_0x2e7f83(0x17d)][_0x2e7f83(0x1a1)]<_0x47b980+0x7){await _0x323c5d['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x2e7f83(0x230),'ack':!![]});return;}const _0x223ff3=_0x323c5d['dailyDigests'][_0x2e7f83(0x25b)](-_0x47b980),_0x26d926=_0x323c5d[_0x2e7f83(0x17d)][_0x2e7f83(0x25b)](0x0,_0x323c5d[_0x2e7f83(0x17d)][_0x2e7f83(0x1a1)]-_0x47b980),_0x4a99cd=_0x2e7f83(0x297)+JSON['stringify'](_0x26d926)+_0x2e7f83(0x23b)+JSON[_0x2e7f83(0x1b6)](_0x223ff3);try{const _0x747d6a=await _0x323c5d[_0x2e7f83(0x2b4)]['generateContent'](_0x4a99cd),_0x3929b3=JSON[_0x2e7f83(0x1c7)](_0x747d6a[_0x2e7f83(0x253)][_0x2e7f83(0x19d)]()[_0x2e7f83(0x25d)](/```json|```/g,'')[_0x2e7f83(0x233)]());_0x3929b3[_0x2e7f83(0x22e)]&&(await _0x323c5d[_0x2e7f83(0x23e)](LTM_DP_DRIFT_STATUS,{'val':_0x3929b3[_0x2e7f83(0x22e)],'ack':!![]}),await _0x323c5d[_0x2e7f83(0x23e)](LTM_DP_DRIFT_DETAILS,{'val':_0x3929b3['driftDetails'],'ack':!![]}),await _0x323c5d['setStateAsync'](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x2e7f83(0x137)](),'ack':!![]}));}catch(_0x518d7e){}}async function sendMorningBriefing(_0x4cda80){const _0x4c34f7=a0_0x754b41;if(!_0x4cda80[_0x4c34f7(0x2b4)])return;try{const _0xa28a6d=_0x4c34f7(0x1ab),_0x28b269=await _0x4cda80[_0x4c34f7(0x2b4)][_0x4c34f7(0x1df)](_0xa28a6d),_0x55a7c9=_0x28b269[_0x4c34f7(0x253)]['text']();sendNotification(_0x4cda80,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x55a7c9);}catch(_0x140e06){_0x4cda80[_0x4c34f7(0x21e)][_0x4c34f7(0x1c9)](_0x4c34f7(0x17e)+_0x140e06[_0x4c34f7(0x24d)]);}}function stopPythonService(_0x2f12ce){const _0x3cf331=a0_0x754b41;if(_0x2f12ce[_0x3cf331(0x252)]){try{_0x2f12ce['pythonProcess'][_0x3cf331(0x214)]();}catch(_0x59902c){}_0x2f12ce[_0x3cf331(0x252)]=null;}}function sendToPython(_0x32ccfc,_0x22bdd4,_0x5bed71={}){const _0x1a211e=a0_0x754b41;if(!_0x32ccfc[_0x1a211e(0x252)]||!_0x32ccfc[_0x1a211e(0x252)]['stdin'][_0x1a211e(0x173)])return;const _0x4230cf=JSON[_0x1a211e(0x1b6)]({'command':_0x22bdd4,..._0x5bed71});try{_0x32ccfc[_0x1a211e(0x252)][_0x1a211e(0x1c8)][_0x1a211e(0x170)](_0x4230cf+'\x0a');}catch(_0x80ae42){}}function runPythonHealthCheck(_0x18c4c5){const _0x18e970=a0_0x754b41;if(!_0x18c4c5[_0x18e970(0x17d)]||_0x18c4c5[_0x18e970(0x17d)][_0x18e970(0x1a1)]<0x2)return;const _0x29be71=_0x18c4c5['dailyDigests'][_0x18e970(0x14b)](_0x48c9e9=>{const _0x61ccbd=_0x18e970,_0x806a77=(_0x48c9e9[_0x61ccbd(0x241)]||'')[_0x61ccbd(0x178)]();return ACTIVITY_LEVEL_MAP[_0x806a77]||0x32;});sendToPython(_0x18c4c5,_0x18e970(0x2aa),{'values':_0x29be71,'tag':_0x18e970(0x164)});}function handlePythonResult(_0x1c6957,_0x264602){const _0x1e4810=a0_0x754b41;if(_0x264602[_0x1e4810(0x283)]===_0x1e4810(0x160))_0x1c6957[_0x1e4810(0x21e)][_0x1e4810(0x2a8)](_0x1e4810(0x28c));else{if(_0x264602[_0x1e4810(0x283)]===_0x1e4810(0x268)){const {anomaly_score:_0x187b81,is_anomaly:_0x1b1b6a,threshold:_0x4a2eb9,explanation:_0x2bd1a2}=_0x264602[_0x1e4810(0x285)];_0x1c6957['log'][_0x1e4810(0x1da)]('ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20'+_0x187b81['toFixed'](0x5)+_0x1e4810(0x1b9)+(_0x1b1b6a?_0x1e4810(0x237):'OK')),_0x1c6957['setStateAsync'](_0x1e4810(0x18b),{'val':_0x187b81,'ack':!![]}),_0x1c6957[_0x1e4810(0x23e)](_0x1e4810(0x1bb),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x4a2eb9)_0x1c6957[_0x1e4810(0x23e)](_0x1e4810(0x1dc),{'val':_0x4a2eb9,'ack':!![]});if(_0x1b1b6a){let _0x304b20=_0x1e4810(0x1fa)+_0x187b81[_0x1e4810(0x152)](0x4)+')';if(_0x2bd1a2&&_0x2bd1a2!=='Unknown')_0x304b20+=_0x1e4810(0x2a1)+_0x2bd1a2;_0x1c6957['setStateAsync'](_0x1e4810(0x1f7),{'val':!![],'ack':!![]}),_0x1c6957['setStateAsync'](_0x1e4810(0x186),{'val':_0x304b20,'ack':!![]}),sendNotification(_0x1c6957,_0x1e4810(0x15c)+_0x304b20,![],!![]);}}else{if(_0x264602[_0x1e4810(0x283)]===_0x1e4810(0x2b0)){const _0x17b666=_0x264602[_0x1e4810(0x285)][_0x1e4810(0x130)]||'',_0x12f010=_0x264602[_0x1e4810(0x285)][_0x1e4810(0x2b6)],_0x1607ab=_0x264602['payload']['success']?_0x1e4810(0x155)+new Date()[_0x1e4810(0x1b4)]()+'\x20('+_0x17b666+')':'Failed:\x20'+_0x264602[_0x1e4810(0x285)][_0x1e4810(0x265)];_0x1c6957[_0x1e4810(0x23e)](_0x1e4810(0x1fc),{'val':_0x1607ab,'ack':!![]});if(_0x264602[_0x1e4810(0x285)][_0x1e4810(0x207)]&&_0x12f010)_0x1c6957['setStateAsync'](_0x1e4810(0x1dc),{'val':_0x12f010,'ack':!![]});}else{if(_0x264602[_0x1e4810(0x283)]===_0x1e4810(0x28a)){const {patterns:_0x2ef075}=_0x264602[_0x1e4810(0x285)];if(_0x2ef075&&_0x2ef075[_0x1e4810(0x1a1)]>0x0){_0x1c6957[_0x1e4810(0x21e)][_0x1e4810(0x1da)](_0x1e4810(0x2b2)+_0x2ef075[_0x1e4810(0x1a1)]+_0x1e4810(0x18e)),_0x1c6957[_0x1e4810(0x23e)]('analysis.automation.detectedPatterns',{'val':JSON[_0x1e4810(0x1b6)](_0x2ef075),'ack':!![]});const _0x44daf9=_0x2ef075[0x0],_0x3e8e31=_0x1e4810(0x2ab)+_0x44daf9['rule']+'\x20('+(_0x44daf9[_0x1e4810(0x26a)]*0x64)['toFixed'](0x0)+'%)';_0x1c6957[_0x1e4810(0x23e)](_0x1e4810(0x159),{'val':!![],'ack':!![]}),_0x1c6957['setStateAsync'](_0x1e4810(0x161),{'val':_0x3e8e31,'ack':!![]});}else _0x1c6957['log'][_0x1e4810(0x1da)](_0x1e4810(0x274)),_0x1c6957[_0x1e4810(0x23e)](_0x1e4810(0x159),{'val':![],'ack':!![]}),_0x1c6957[_0x1e4810(0x23e)](_0x1e4810(0x296),{'val':'[]','ack':!![]});}else{if(_0x264602[_0x1e4810(0x283)]===_0x1e4810(0x213)){if(_0x264602[_0x1e4810(0x285)][_0x1e4810(0x207)])try{const _0x197e81=JSON[_0x1e4810(0x1c7)](_0x264602[_0x1e4810(0x285)][_0x1e4810(0x130)]);if(_0x197e81[_0x1e4810(0x227)])_0x1c6957[_0x1e4810(0x23e)](_0x1e4810(0x14a),{'val':JSON[_0x1e4810(0x1b6)](_0x197e81[_0x1e4810(0x227)]),'ack':!![]});if(_0x197e81[_0x1e4810(0x146)])_0x1c6957[_0x1e4810(0x23e)](_0x1e4810(0x1cf),{'val':JSON[_0x1e4810(0x1b6)](_0x197e81[_0x1e4810(0x146)]),'ack':!![]});}catch(_0x28d862){}}else{if(_0x264602[_0x1e4810(0x283)]===_0x1e4810(0x1bd)){if(_0x264602[_0x1e4810(0x285)]['success'])_0x1c6957[_0x1e4810(0x21e)]['info']('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x264602[_0x1e4810(0x283)]==='HEALTH_RESULT')_0x1c6957[_0x1e4810(0x23e)](_0x1e4810(0x183),{'val':new Date()[_0x1e4810(0x269)](),'ack':!![]}),_0x1c6957[_0x1e4810(0x23e)](_0x1e4810(0x248),{'val':_0x264602['payload'][_0x1e4810(0x13b)],'ack':!![]});else{if(_0x264602[_0x1e4810(0x283)]===_0x1e4810(0x21c))_0x1c6957[_0x1e4810(0x23e)](_0x1e4810(0x1f2),{'val':_0x264602['payload'][_0x1e4810(0x14d)],'ack':!![]}),_0x1c6957[_0x1e4810(0x23e)](_0x1e4810(0x1ca),{'val':_0x264602[_0x1e4810(0x285)][_0x1e4810(0x20a)],'ack':!![]});else{if(_0x264602[_0x1e4810(0x283)]==='GAIT_RESULT'){const {speed_trend:_0x16b54f}=_0x264602[_0x1e4810(0x285)];if(_0x16b54f!==undefined)_0x1c6957[_0x1e4810(0x23e)](_0x1e4810(0x12e),{'val':_0x16b54f,'ack':!![]});}else{if(_0x264602[_0x1e4810(0x283)]===_0x1e4810(0x257)){const {forecast:_0x364dd6}=_0x264602[_0x1e4810(0x285)];if(_0x364dd6)_0x1c6957[_0x1e4810(0x23e)](_0x1e4810(0x1e0),{'val':JSON[_0x1e4810(0x1b6)](_0x364dd6),'ack':!![]});}else{if(_0x264602[_0x1e4810(0x283)]===_0x1e4810(0x2b5)){const {data:_0x48524f}=_0x264602[_0x1e4810(0x285)];_0x48524f&&(_0x1c6957['log'][_0x1e4810(0x1da)](_0x1e4810(0x2a6)),_0x1c6957['setStateAsync'](_0x1e4810(0x1c1),{'val':JSON[_0x1e4810(0x1b6)](_0x48524f),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x2ab639){const _0x24d4be=a0_0x754b41;let _0x133828=_0x24d4be(0x1d5);if(fs[_0x24d4be(0x243)](installer[_0x24d4be(0x196)]))_0x133828=installer[_0x24d4be(0x196)];try{const _0x146b0b=path['join'](__dirname,'python_service','service.py');_0x2ab639[_0x24d4be(0x252)]=spawn(_0x133828,[_0x146b0b]),_0x2ab639[_0x24d4be(0x252)][_0x24d4be(0x169)]['on'](_0x24d4be(0x282),_0x5762ef=>{const _0x4f6734=_0x24d4be,_0x10841c=_0x5762ef[_0x4f6734(0x1a3)]()[_0x4f6734(0x1e8)]('\x0a');_0x10841c[_0x4f6734(0x228)](_0x597462=>{const _0x26554e=_0x4f6734,_0x4f2fe2=_0x597462[_0x26554e(0x233)]();if(!_0x4f2fe2)return;if(_0x4f2fe2[_0x26554e(0x193)](_0x26554e(0x16d)))_0x2ab639[_0x26554e(0x21e)][_0x26554e(0x2a8)](_0x26554e(0x179)+_0x4f2fe2[_0x26554e(0x1e2)](0x5)[_0x26554e(0x233)]());else{if(_0x4f2fe2['startsWith']('[RESULT]'))try{const _0xc0dd5d=JSON[_0x26554e(0x1c7)](_0x4f2fe2['substring'](0x8)[_0x26554e(0x233)]());handlePythonResult(_0x2ab639,_0xc0dd5d);}catch(_0x262f39){}}});}),_0x2ab639['pythonProcess']['on'](_0x24d4be(0x188),_0x37037c=>{_0x2ab639['pythonProcess']=null;});}catch(_0x3e23f1){_0x2ab639[_0x24d4be(0x21e)][_0x24d4be(0x1c9)](_0x24d4be(0x222)+_0x3e23f1[_0x24d4be(0x24d)]);}}async function runAutopilot(_0x575f52){const _0x559f90=a0_0x754b41;_0x575f52[_0x559f90(0x21e)][_0x559f90(0x2a8)]('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await runGeminiAnalysis(_0x575f52),updateHealthVector(_0x575f52),triggerGaitAnalysis(_0x575f52),triggerEnergyPrediction(_0x575f52);}async function triggerGaitAnalysis(_0x4c033b){const _0x5dfde5=a0_0x754b41;if(!_0x4c033b[_0x5dfde5(0x27d)])return;try{const _0xb15a0f=await _0x4c033b[_0x5dfde5(0x26b)]('LTM.trainingData.sequences');_0xb15a0f&&_0xb15a0f[_0x5dfde5(0x12b)]&&sendToPython(_0x4c033b,'ANALYZE_GAIT',{'sequences':JSON[_0x5dfde5(0x1c7)](_0xb15a0f['val'])});}catch(_0x54845b){}}async function triggerEnergyPrediction(_0x11de1d){const _0x23a1e2=a0_0x754b41;if(!_0x11de1d['isProVersion'])return;try{const _0x3f996d=await getOutsideTemperatureNumeric(_0x11de1d);if(_0x3f996d===null)return;const _0x4c9f96={},_0x2202ce=_0x11de1d['config'][_0x23a1e2(0x27c)]||[];for(const _0x458bd1 of _0x2202ce){if(_0x458bd1[_0x23a1e2(0x283)]===_0x23a1e2(0x231)&&_0x458bd1[_0x23a1e2(0x191)]){const _0x1fefaf=_0x11de1d[_0x23a1e2(0x272)][_0x458bd1['id']];if(_0x1fefaf!==undefined)_0x4c9f96[_0x458bd1[_0x23a1e2(0x191)]]=_0x1fefaf;}}Object[_0x23a1e2(0x184)](_0x4c9f96)[_0x23a1e2(0x1a1)]>0x0&&sendToPython(_0x11de1d,_0x23a1e2(0x255),{'current_temps':_0x4c9f96,'t_out':_0x3f996d});}catch(_0x516bff){}}function updateHealthVector(_0x171067){const _0x552df0=a0_0x754b41;if(!_0x171067['rawEventLog']||_0x171067[_0x552df0(0x200)][_0x552df0(0x1a1)]===0x0)return;const _0x54f575=new Array(0x60)[_0x552df0(0x1f9)](0x0),_0x501e69=new Date()['setHours'](0x0,0x0,0x0,0x0);_0x171067[_0x552df0(0x200)][_0x552df0(0x228)](_0x688ee6=>{const _0x5f3d6c=_0x552df0,_0x33cf6b=new Date(_0x688ee6[_0x5f3d6c(0x177)]);if(_0x33cf6b[_0x5f3d6c(0x1b5)]()>=_0x501e69){const _0x22d632=_0x33cf6b[_0x5f3d6c(0x209)](),_0x435a06=_0x33cf6b[_0x5f3d6c(0x298)](),_0x29e422=_0x22d632*0x4+Math[_0x5f3d6c(0x148)](_0x435a06/0xf);if(_0x29e422>=0x0&&_0x29e422<0x60)_0x54f575[_0x29e422]++;}}),_0x171067[_0x552df0(0x23e)]('analysis.health.todayVector',{'val':JSON[_0x552df0(0x1b6)](_0x54f575),'ack':!![]});}async function getWeatherContext(_0x409b18){const _0x4b25f4=a0_0x754b41;if(!_0x409b18[_0x4b25f4(0x219)]['useWeather']||!_0x409b18[_0x4b25f4(0x219)][_0x4b25f4(0x235)])return _0x4b25f4(0x202);try{const _0x4304ea=_0x409b18[_0x4b25f4(0x219)]['weatherInstance'];let _0x2c0703=await _0x409b18['getForeignStateAsync'](_0x4304ea+_0x4b25f4(0x2b8));if(!_0x2c0703)_0x2c0703=await _0x409b18[_0x4b25f4(0x1e9)](_0x4304ea+_0x4b25f4(0x250));let _0x10c9b7=await _0x409b18[_0x4b25f4(0x1e9)](_0x4304ea+_0x4b25f4(0x234));if(!_0x10c9b7)_0x10c9b7=await _0x409b18[_0x4b25f4(0x1e9)](_0x4304ea+_0x4b25f4(0x134));if(_0x2c0703&&_0x10c9b7)return _0x2c0703['val']+_0x4b25f4(0x286)+_0x10c9b7['val'];}catch(_0x1178e2){}return _0x4b25f4(0x217);}async function getCalendarContext(_0x315d5e){const _0xfe8ab7=a0_0x754b41;if(!_0x315d5e[_0xfe8ab7(0x219)][_0xfe8ab7(0x2ae)]||!_0x315d5e[_0xfe8ab7(0x219)][_0xfe8ab7(0x16f)])return _0xfe8ab7(0x162);return'Keine\x20Termine.';}async function getCalendarNames(_0x25c193,_0x2e38ba){return[];}async function saveFeedback(_0x4d3db3,_0x206d2f){const _0x1e5a0b=a0_0x754b41;_0x4d3db3[_0x1e5a0b(0x21e)]['info']('ðŸ“\x20Feedback\x20received:\x20'+_0x206d2f[_0x1e5a0b(0x167)]);}function a0_0x5711(_0x2826fb,_0xb7a234){const _0x211a38=a0_0x4a9e();return a0_0x5711=function(_0x4e10a7,_0x19a815){_0x4e10a7=_0x4e10a7-0x129;let _0x4a9efe=_0x211a38[_0x4e10a7];return _0x4a9efe;},a0_0x5711(_0x2826fb,_0xb7a234);}async function runGeminiAnalysis(_0x1b4ef7,_0x34cdd2=''){const _0x27c5e2=a0_0x754b41;if(!_0x1b4ef7[_0x27c5e2(0x2b4)])return;if(_0x1b4ef7[_0x27c5e2(0x1e3)]['length']===0x0)return;const _0x40ab5d=_0x1b4ef7[_0x27c5e2(0x1e3)][_0x27c5e2(0x25b)](0x0,0xf),_0x55a09c=await getWeatherContext(_0x1b4ef7),_0x4dd312=_0x1b4ef7[_0x27c5e2(0x206)],_0xf66b9d=PERSONA_MAPPING[_0x1b4ef7['config']['aiPersona']||_0x27c5e2(0x2af)],_0x50076b=_0x1b4ef7[_0x27c5e2(0x219)][_0x27c5e2(0x223)]||_0x27c5e2(0x284);let _0x249bd7='Unbekannt';try{const _0x25b9b6=await _0x1b4ef7[_0x27c5e2(0x26b)](_0x27c5e2(0x27f));if(_0x25b9b6&&_0x25b9b6[_0x27c5e2(0x12b)])_0x249bd7=_0x25b9b6[_0x27c5e2(0x12b)];}catch(_0x26fd01){}let _0x3dca3b=![];try{const _0x208608=await _0x1b4ef7[_0x27c5e2(0x26b)](_0x27c5e2(0x187));if(_0x208608&&_0x208608[_0x27c5e2(0x12b)])_0x3dca3b=!![];}catch(_0x195f3f){}const _0xd2c2f='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0xf66b9d+_0x27c5e2(0x280)+_0x50076b+'.\x20SYSTEM_MODE:\x20'+_0x4dd312+_0x27c5e2(0x271)+_0x55a09c+_0x27c5e2(0x192)+_0x249bd7+_0x27c5e2(0x21f)+JSON[_0x27c5e2(0x1b6)](_0x40ab5d)+_0x27c5e2(0x1fd)+_0x34cdd2+_0x27c5e2(0x26c);try{const _0x40d9fe=await _0x1b4ef7[_0x27c5e2(0x2b4)]['generateContent'](_0xd2c2f),_0x383c35=JSON[_0x27c5e2(0x1c7)](_0x40d9fe[_0x27c5e2(0x253)][_0x27c5e2(0x19d)]()[_0x27c5e2(0x25d)](/```json|```/g,'')[_0x27c5e2(0x233)]());await _0x1b4ef7[_0x27c5e2(0x23e)]('analysis.lastResult',{'val':JSON[_0x27c5e2(0x1b6)](_0x383c35),'ack':!![]});if(_0x383c35[_0x27c5e2(0x1d2)])await _0x1b4ef7[_0x27c5e2(0x23e)](_0x27c5e2(0x199),{'val':_0x383c35[_0x27c5e2(0x1d2)],'ack':!![]});const _0x5be52d={'timestamp':Date[_0x27c5e2(0x137)](),'id':Date['now']()[_0x27c5e2(0x1a3)](),'analysis':{'activity':{'summary':_0x383c35[_0x27c5e2(0x1d2)],'isAlert':_0x383c35[_0x27c5e2(0x150)],'alertReason':_0x383c35[_0x27c5e2(0x163)]},'comfort':{'automationProposal':_0x383c35[_0x27c5e2(0x136)]}}};await updateAnalysisHistory(_0x1b4ef7,_0x5be52d);const _0x41c7ee=_0x383c35['isAlert']||![];_0x41c7ee!==_0x1b4ef7['lastAlertState']&&(await _0x1b4ef7[_0x27c5e2(0x23e)](_0x27c5e2(0x1f7),{'val':_0x41c7ee,'ack':!![]}),_0x1b4ef7[_0x27c5e2(0x1a7)]=_0x41c7ee,_0x41c7ee&&(await _0x1b4ef7[_0x27c5e2(0x23e)](_0x27c5e2(0x186),{'val':_0x383c35['alertReason'],'ack':!![]}),sendNotification(_0x1b4ef7,_0x27c5e2(0x16a)+_0x383c35['alertReason'],![],_0x383c35[_0x27c5e2(0x215)])));if(_0x383c35[_0x27c5e2(0x136)]&&_0x383c35[_0x27c5e2(0x136)]['detected']){await _0x1b4ef7['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x1b4ef7[_0x27c5e2(0x23e)](_0x27c5e2(0x161),{'val':_0x383c35[_0x27c5e2(0x136)]['description'],'ack':!![]}),await _0x1b4ef7[_0x27c5e2(0x23e)](_0x27c5e2(0x17b),{'val':_0x383c35[_0x27c5e2(0x136)]['targetId'],'ack':!![]}),await _0x1b4ef7[_0x27c5e2(0x23e)]('analysis.automation.targetValue',{'val':JSON[_0x27c5e2(0x1b6)](_0x383c35[_0x27c5e2(0x136)][_0x27c5e2(0x256)]),'ack':!![]});if(_0x3dca3b)executeAutomationAction(_0x1b4ef7);}}catch(_0x553569){_0x1b4ef7[_0x27c5e2(0x21e)][_0x27c5e2(0x1c9)](_0x27c5e2(0x2bf)+_0x553569[_0x27c5e2(0x24d)]);}}async function startSystem(_0x803ef2){const _0x2c574c=a0_0x754b41;_0x803ef2['log']['info'](_0x2c574c(0x29e)),await initZombies(_0x803ef2);try{_0x803ef2['isProVersion']=await checkLicense(_0x803ef2['config'][_0x2c574c(0x2b3)]);}catch(_0x3de1e3){}if(!_0x803ef2[_0x2c574c(0x219)]['inactivityThresholdHours']||_0x803ef2[_0x2c574c(0x219)]['inactivityThresholdHours']<0.1)_0x803ef2[_0x2c574c(0x219)]['inactivityThresholdHours']=0xc;await initHistory(_0x803ef2),await initSystemConfig(_0x803ef2);if(_0x803ef2[_0x2c574c(0x219)][_0x2c574c(0x218)])try{_0x803ef2[_0x2c574c(0x1b7)]=new GoogleGenerativeAI(_0x803ef2[_0x2c574c(0x219)][_0x2c574c(0x218)]),_0x803ef2[_0x2c574c(0x2b4)]=_0x803ef2[_0x2c574c(0x1b7)][_0x2c574c(0x198)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),_0x803ef2[_0x2c574c(0x21e)]['info'](_0x2c574c(0x129));}catch(_0x56030e){_0x803ef2['log'][_0x2c574c(0x1c9)](_0x2c574c(0x1ef)+_0x56030e[_0x2c574c(0x24d)]);}await createAllObjects(_0x803ef2),await loadSystemMode(_0x803ef2),await loadRawEventLog(_0x803ef2),await loadDailyDigests(_0x803ef2),_0x803ef2[_0x2c574c(0x19e)](_0x2c574c(0x19a)),_0x803ef2[_0x2c574c(0x19e)](LTM_DP_TRIGGER_DIGEST),_0x803ef2[_0x2c574c(0x19e)](_0x2c574c(0x1f6)),_0x803ef2[_0x2c574c(0x19e)](_0x2c574c(0x147)),_0x803ef2['subscribeStates'](_0x2c574c(0x229)),_0x803ef2[_0x2c574c(0x19e)](_0x2c574c(0x187)),_0x803ef2['subscribeStates'](_0x2c574c(0x15e)),_0x803ef2[_0x2c574c(0x19e)]('analysis.training.triggerHealth'),_0x803ef2[_0x2c574c(0x19e)]('analysis.training.triggerEnergy'),_0x803ef2[_0x2c574c(0x19e)]('analysis.training.triggerComfort'),_0x803ef2[_0x2c574c(0x19e)](_0x2c574c(0x1f4)),await initSensorSubscriptions(_0x803ef2),await initPresenceSubscriptions(_0x803ef2),await setupTelegramListener(_0x803ef2),setTimeout(()=>checkWifiPresence(_0x803ef2),0x1388);if(_0x803ef2[_0x2c574c(0x1db)])clearInterval(_0x803ef2[_0x2c574c(0x1db)]);const _0x36400e=_0x803ef2['config']['analysisInterval']||0xf;_0x36400e>0x0&&(_0x803ef2[_0x2c574c(0x1db)]=setInterval(()=>{runAutopilot(_0x803ef2);},_0x36400e*0x3c*0x3e8)),schedulers[_0x2c574c(0x1b1)](_0x803ef2,()=>createDailyDigest(_0x803ef2)),schedulers[_0x2c574c(0x211)](_0x803ef2),schedulers[_0x2c574c(0x1dd)](_0x803ef2,()=>runBaselineDriftAnalysis(_0x803ef2)),schedulers['setupBriefingScheduler'](_0x803ef2,()=>sendMorningBriefing(_0x803ef2)),startPythonService(_0x803ef2),setTimeout(()=>{_0x803ef2['pythonProcess']&&(runPythonHealthCheck(_0x803ef2),triggerGaitAnalysis(_0x803ef2),triggerEnergyPrediction(_0x803ef2)),updateHealthVector(_0x803ef2);},0x1388);}class CogniLiving extends utils[a0_0x754b41(0x2bd)]{constructor(_0x3b8394){const _0x1ecb40=a0_0x754b41;super({..._0x3b8394,'name':_0x1ecb40(0x2b7)}),this[_0x1ecb40(0x1e3)]=[],this[_0x1ecb40(0x141)]=[],this[_0x1ecb40(0x200)]=[],this['dailyDigests']=[],this[_0x1ecb40(0x272)]={},this[_0x1ecb40(0x2ba)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x1ecb40(0x145)]=!![],this[_0x1ecb40(0x242)]=null,this[_0x1ecb40(0x244)]=null,this[_0x1ecb40(0x27a)]=![],this[_0x1ecb40(0x1b7)]=null,this['geminiModel']=null,this[_0x1ecb40(0x206)]=SYSTEM_MODES[_0x1ecb40(0x18a)],this['isProVersion']=![],this[_0x1ecb40(0x1a7)]=![],this[_0x1ecb40(0x264)]=_0x1ecb40(0x27b),this[_0x1ecb40(0x1db)]=null,this[_0x1ecb40(0x1f1)]=null,this[_0x1ecb40(0x1fe)]=null,this[_0x1ecb40(0x1ee)]=null,this[_0x1ecb40(0x1cb)]=null,this['pythonProcess']=null,this[_0x1ecb40(0x276)]=![],this['on'](_0x1ecb40(0x232),this[_0x1ecb40(0x1ea)][_0x1ecb40(0x28f)](this)),this['on'](_0x1ecb40(0x166),this[_0x1ecb40(0x239)]['bind'](this)),this['on'](_0x1ecb40(0x1e5),this[_0x1ecb40(0x226)][_0x1ecb40(0x28f)](this)),this['on']('message',this[_0x1ecb40(0x1b8)][_0x1ecb40(0x28f)](this));}async[a0_0x754b41(0x1ea)](){const _0x378cf8=a0_0x754b41;this[_0x378cf8(0x21e)]['info'](_0x378cf8(0x2ad)+this[_0x378cf8(0x13d)]+')\x20-\x20SAFE\x20BOOT');if(!installer['checkAndInstall'](this,()=>startSystem(this)))return;}[a0_0x754b41(0x226)](_0x454915){const _0x51a1de=a0_0x754b41;if(this[_0x51a1de(0x1db)])clearInterval(this[_0x51a1de(0x1db)]);if(this['driftAnalysisTimer'])clearInterval(this[_0x51a1de(0x1ee)]);if(this[_0x51a1de(0x1f1)])this[_0x51a1de(0x1f1)][_0x51a1de(0x1ec)]();if(this[_0x51a1de(0x1fe)])this[_0x51a1de(0x1fe)][_0x51a1de(0x1ec)]();if(this[_0x51a1de(0x1cb)])this[_0x51a1de(0x1cb)][_0x51a1de(0x1ec)]();if(this[_0x51a1de(0x242)])clearTimeout(this[_0x51a1de(0x242)]);if(this[_0x51a1de(0x244)])clearTimeout(this['exitGraceTimer']);stopPythonService(this),_0x454915();}async[a0_0x754b41(0x239)](_0x221886,_0x42bc9b){const _0x3b1913=a0_0x754b41;if(!_0x42bc9b||this['dependencyInstallInProgress'])return;if(_0x221886['includes'](_0x3b1913(0x15b))&&_0x221886[_0x3b1913(0x224)](_0x3b1913(0x2be))&&_0x42bc9b[_0x3b1913(0x12b)]){await handleTelegramResponse(this,_0x42bc9b['val']);return;}if(_0x221886===this['namespace']+'.'+SYSTEM_DP_MODE){if(_0x42bc9b[_0x3b1913(0x12b)]&&Object[_0x3b1913(0x135)](SYSTEM_MODES)[_0x3b1913(0x2a0)](_0x42bc9b[_0x3b1913(0x12b)])){this['currentSystemMode']=_0x42bc9b['val'];if(_0x42bc9b[_0x3b1913(0x12b)]===SYSTEM_MODES[_0x3b1913(0x171)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x42bc9b[_0x3b1913(0x132)])this[_0x3b1913(0x260)](_0x221886,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x42bc9b[_0x3b1913(0x132)]){_0x221886[_0x3b1913(0x2a0)]('analysis.trigger')&&_0x42bc9b[_0x3b1913(0x12b)]&&(this[_0x3b1913(0x260)](_0x221886,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x221886[_0x3b1913(0x2a0)](_0x3b1913(0x1ce))&&_0x42bc9b[_0x3b1913(0x12b)]){this[_0x3b1913(0x260)](_0x221886,{'val':![],'ack':!![]});if(this['isProVersion'])createDailyDigest(this);}_0x221886['includes'](_0x3b1913(0x16e))&&_0x42bc9b['val']&&(this['setState'](_0x221886,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x221886[_0x3b1913(0x2a0)]('automation.triggerAction')&&_0x42bc9b[_0x3b1913(0x12b)]&&(this[_0x3b1913(0x260)](_0x221886,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x221886[_0x3b1913(0x2a0)](_0x3b1913(0x15e))&&_0x42bc9b[_0x3b1913(0x12b)]){this['setState'](_0x221886,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x3f5ed7=await this[_0x3b1913(0x26b)](_0x3b1913(0x210));if(_0x3f5ed7&&_0x3f5ed7['val']){const _0x26d6f4=JSON[_0x3b1913(0x1c7)](_0x3f5ed7[_0x3b1913(0x12b)]);this[_0x3b1913(0x21e)][_0x3b1913(0x1da)](_0x3b1913(0x247)),this[_0x3b1913(0x23e)](_0x3b1913(0x1fc),{'val':_0x3b1913(0x1a8),'ack':!![]}),sendToPython(this,'TRAIN_SECURITY',{'sequences':_0x26d6f4});}}catch(_0x26be55){this[_0x3b1913(0x21e)][_0x3b1913(0x1c9)](_0x3b1913(0x20c)+_0x26be55['message']);}}if(_0x221886[_0x3b1913(0x2a0)](_0x3b1913(0x29a))&&_0x42bc9b[_0x3b1913(0x12b)]){this[_0x3b1913(0x260)](_0x221886,{'val':![],'ack':!![]});if(this[_0x3b1913(0x27d)])try{const _0x13ce57=await this[_0x3b1913(0x26b)](LTM_DP_DAILY_DIGESTS);if(_0x13ce57&&_0x13ce57[_0x3b1913(0x12b)])sendToPython(this,_0x3b1913(0x12c),{'digests':JSON['parse'](_0x13ce57[_0x3b1913(0x12b)])});}catch(_0x3ae853){}}if(_0x221886[_0x3b1913(0x2a0)](_0x3b1913(0x1f8))&&_0x42bc9b[_0x3b1913(0x12b)]){this['setState'](_0x221886,{'val':![],'ack':!![]});if(this[_0x3b1913(0x27d)])try{const _0x446084=await this['getStateAsync']('LTM.trainingData.thermodynamics');if(_0x446084&&_0x446084[_0x3b1913(0x12b)])sendToPython(this,'TRAIN_ENERGY',{'points':JSON[_0x3b1913(0x1c7)](_0x446084[_0x3b1913(0x12b)])});}catch(_0x4f7fb8){}}if(_0x221886[_0x3b1913(0x2a0)](_0x3b1913(0x15a))&&_0x42bc9b['val']){this[_0x3b1913(0x260)](_0x221886,{'val':![],'ack':!![]});if(this[_0x3b1913(0x27d)])try{const _0x235962=await this[_0x3b1913(0x26b)](LTM_DP_RAW_LOG);_0x235962&&_0x235962[_0x3b1913(0x12b)]&&(this['log'][_0x3b1913(0x1da)](_0x3b1913(0x1ad)),sendToPython(this,_0x3b1913(0x292),{'events':JSON[_0x3b1913(0x1c7)](_0x235962[_0x3b1913(0x12b)])}));}catch(_0x2db627){}}if(_0x221886[_0x3b1913(0x2a0)](_0x3b1913(0x1f4))&&_0x42bc9b[_0x3b1913(0x12b)]){this[_0x3b1913(0x260)](_0x221886,{'val':![],'ack':!![]});if(this[_0x3b1913(0x27d)])try{const _0x7442c5=await this[_0x3b1913(0x26b)](_0x3b1913(0x210));if(_0x7442c5&&_0x7442c5['val']){const _0x4a0b4b=JSON[_0x3b1913(0x1c7)](_0x7442c5['val']);this[_0x3b1913(0x21e)][_0x3b1913(0x1da)]('ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...'),sendToPython(this,'BUILD_TOPOLOGY',{'sequences':_0x4a0b4b});}}catch(_0x157033){this[_0x3b1913(0x21e)]['error'](_0x3b1913(0x23f)+_0x157033['message']);}}return;}if(this[_0x3b1913(0x219)]['presenceDevices']&&this['config']['presenceDevices'][_0x3b1913(0x2a0)](_0x221886)){await checkWifiPresence(this);return;}const _0x9a56e9=(this['config'][_0x3b1913(0x27c)]||[])['find'](_0x179db0=>_0x179db0['id']===_0x221886);if(_0x9a56e9)processSensorEvent(this,_0x221886,_0x42bc9b,_0x9a56e9);}async['onMessage'](_0x10dc05){const _0x1b46d9=a0_0x754b41;if(typeof _0x10dc05===_0x1b46d9(0x2b9)&&_0x10dc05[_0x1b46d9(0x24d)]){if(_0x10dc05[_0x1b46d9(0x24c)]===_0x1b46d9(0x1aa)){const _0x521422=_0x10dc05[_0x1b46d9(0x24d)]['apiKey']||this[_0x1b46d9(0x219)]['geminiApiKey'];if(!_0x521422)return this['sendTo'](_0x10dc05[_0x1b46d9(0x175)],_0x10dc05['command'],{'success':![],'message':_0x1b46d9(0x29f)},_0x10dc05[_0x1b46d9(0x2a5)]);try{const _0x2f0a98=new GoogleGenerativeAI(_0x521422),_0x4e470b=_0x2f0a98['getGenerativeModel']({'model':GEMINI_MODEL}),_0x936401=await _0x4e470b['generateContent']('Hi');this['sendTo'](_0x10dc05['from'],_0x10dc05['command'],{'success':!![],'message':_0x1b46d9(0x1b2)+_0x936401[_0x1b46d9(0x253)][_0x1b46d9(0x19d)]()},_0x10dc05[_0x1b46d9(0x2a5)]);}catch(_0x52c178){this[_0x1b46d9(0x2a7)](_0x10dc05[_0x1b46d9(0x175)],_0x10dc05[_0x1b46d9(0x24c)],{'success':![],'message':_0x1b46d9(0x1d6)+_0x52c178[_0x1b46d9(0x24d)]},_0x10dc05[_0x1b46d9(0x2a5)]);}}else{if(_0x10dc05['command']===_0x1b46d9(0x19c)){const _0x43163a=await getWeatherContext(this),_0x25193e=await getCalendarContext(this);this[_0x1b46d9(0x2a7)](_0x10dc05[_0x1b46d9(0x175)],_0x10dc05['command'],{'success':!![],'weather':_0x43163a,'calendar':_0x25193e},_0x10dc05[_0x1b46d9(0x2a5)]);}else{if(_0x10dc05[_0x1b46d9(0x24c)]===_0x1b46d9(0x1d8)){if(!this[_0x1b46d9(0x27d)])return this['sendTo'](_0x10dc05[_0x1b46d9(0x175)],_0x10dc05[_0x1b46d9(0x24c)],{'success':![],'isPro':![]},_0x10dc05[_0x1b46d9(0x2a5)]);let _0x518342={'status':_0x1b46d9(0x14c)};try{const _0x4f9fc7=await this[_0x1b46d9(0x26b)](LTM_DP_DRIFT_STATUS);_0x518342[_0x1b46d9(0x2bb)]=_0x4f9fc7?_0x4f9fc7['val']:_0x1b46d9(0x14c);}catch(_0xd65e7f){}this[_0x1b46d9(0x2a7)](_0x10dc05[_0x1b46d9(0x175)],_0x10dc05[_0x1b46d9(0x24c)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x1b46d9(0x17d)],'driftAnalysis':_0x518342,'analysisHistory':this[_0x1b46d9(0x141)]},_0x10dc05[_0x1b46d9(0x2a5)]);}else{if(_0x10dc05[_0x1b46d9(0x24c)]==='getOverviewData'){const _0x4a0bf9=this[_0x1b46d9(0x17d)]['length'],_0x60eaf7=new Date(),_0x588c28=new Date(_0x60eaf7[_0x1b46d9(0x189)](),_0x60eaf7[_0x1b46d9(0x289)](),_0x60eaf7['getDate']())[_0x1b46d9(0x1b5)](),_0xf47fa0=this[_0x1b46d9(0x200)]['filter'](_0x5c0f24=>new Date(_0x5c0f24[_0x1b46d9(0x177)])[_0x1b46d9(0x1b5)]()>_0x588c28)[_0x1b46d9(0x1a1)],_0x4f95a9=new Array(0x18)['fill'](0x0);this[_0x1b46d9(0x200)]['forEach'](_0x369925=>{const _0xaadc7=_0x1b46d9,_0x42ff91=new Date(_0x369925[_0xaadc7(0x177)]);if(_0x42ff91[_0xaadc7(0x1b5)]()>_0x588c28)_0x4f95a9[_0x42ff91[_0xaadc7(0x209)]()]++;});let _0x3e8e12={'status':_0x1b46d9(0x14c)};try{const _0x34dfe5=await this[_0x1b46d9(0x26b)](LTM_DP_DRIFT_STATUS);_0x3e8e12[_0x1b46d9(0x2bb)]=_0x34dfe5?_0x34dfe5[_0x1b46d9(0x12b)]:_0x1b46d9(0x14c);}catch(_0x588570){}let _0x1de408='';try{const _0x6a66e8=await this[_0x1b46d9(0x26b)](_0x1b46d9(0x27f));_0x1de408=_0x6a66e8?_0x6a66e8['val']:'';}catch(_0x1e0741){}let _0x622e3f=null;!this[_0x1b46d9(0x2b4)]&&(_0x622e3f=this[_0x1b46d9(0x219)][_0x1b46d9(0x218)]?_0x1b46d9(0x1ed):'Kein\x20API\x20Key!');let _0x1529fb={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x32831e=await this['getStateAsync'](_0x1b46d9(0x159));if(_0x32831e&&_0x32831e[_0x1b46d9(0x12b)]){_0x1529fb['detected']=!![];const _0x35bac9=await this[_0x1b46d9(0x26b)](_0x1b46d9(0x161));_0x1529fb[_0x1b46d9(0x151)]=_0x35bac9?_0x35bac9[_0x1b46d9(0x12b)]:'';const _0x30cc86=await this['getStateAsync'](_0x1b46d9(0x17b));_0x1529fb[_0x1b46d9(0x1d0)]=_0x30cc86?_0x30cc86[_0x1b46d9(0x12b)]:'';const _0x3ec9fc=await this[_0x1b46d9(0x26b)](_0x1b46d9(0x273));_0x1529fb[_0x1b46d9(0x256)]=_0x3ec9fc?_0x3ec9fc['val']:'';}const _0x24d6b6=await this['getStateAsync'](_0x1b46d9(0x187));_0x1529fb[_0x1b46d9(0x20b)]=_0x24d6b6?!!_0x24d6b6[_0x1b46d9(0x12b)]:![];}catch(_0x4409ef){}this[_0x1b46d9(0x2a7)](_0x10dc05[_0x1b46d9(0x175)],_0x10dc05['command'],{'success':!![],'eventHistory':this[_0x1b46d9(0x1e3)][_0x1b46d9(0x25b)](0x0,0xf),'stats':{'digestCount':_0x4a0bf9,'eventCountToday':_0xf47fa0,'hourlyActivity':_0x4f95a9,'driftStatus':_0x3e8e12['status'],'isPresent':this['isPresent'],'presenceWho':_0x1de408,'minDays':this[_0x1b46d9(0x219)][_0x1b46d9(0x23a)]||0x7,'stbDays':this[_0x1b46d9(0x219)][_0x1b46d9(0x143)]||0xe,'ltbDays':this['config'][_0x1b46d9(0x1eb)]||0x3c,'systemError':_0x622e3f},'automation':_0x1529fb},_0x10dc05['callback']);}else{if(_0x10dc05[_0x1b46d9(0x24c)]===_0x1b46d9(0x13a))try{const _0x24f786=await scanner[_0x1b46d9(0x185)](this,_0x10dc05[_0x1b46d9(0x24d)]||{});this['sendTo'](_0x10dc05[_0x1b46d9(0x175)],_0x10dc05[_0x1b46d9(0x24c)],{'success':!![],'devices':_0x24f786},_0x10dc05['callback']);}catch(_0x4166a5){this[_0x1b46d9(0x2a7)](_0x10dc05[_0x1b46d9(0x175)],_0x10dc05[_0x1b46d9(0x24c)],{'success':![],'error':_0x4166a5[_0x1b46d9(0x24d)]},_0x10dc05['callback']);}else{if(_0x10dc05['command']===_0x1b46d9(0x194)){const _0x2fec08=await this[_0x1b46d9(0x245)](_0x1b46d9(0x238),_0x1b46d9(0x139)),_0x11a9f6=[];if(_0x2fec08)for(const _0x47b985 in _0x2fec08){const _0x288bd4=_0x2fec08[_0x47b985],_0x544605=(_0x288bd4['common']&&typeof _0x288bd4[_0x1b46d9(0x14f)][_0x1b46d9(0x258)]===_0x1b46d9(0x2b9)?_0x288bd4[_0x1b46d9(0x14f)][_0x1b46d9(0x258)]['de']:_0x288bd4[_0x1b46d9(0x14f)]['name'])||_0x288bd4[_0x1b46d9(0x14f)]['name'];_0x11a9f6['push']({'id':_0x47b985,'name':_0x544605});}const _0x1cb71b=await this[_0x1b46d9(0x245)](_0x1b46d9(0x1b3),_0x1b46d9(0x139)),_0x163ebc=[];if(_0x1cb71b)for(const _0x41f156 in _0x1cb71b){const _0x3900e6=_0x1cb71b[_0x41f156],_0x23ec64=(_0x3900e6[_0x1b46d9(0x14f)]&&typeof _0x3900e6['common'][_0x1b46d9(0x258)]===_0x1b46d9(0x2b9)?_0x3900e6['common']['name']['de']:_0x3900e6[_0x1b46d9(0x14f)][_0x1b46d9(0x258)])||_0x41f156[_0x1b46d9(0x1e8)]('.')['pop']();_0x163ebc[_0x1b46d9(0x259)](_0x23ec64);}this['sendTo'](_0x10dc05[_0x1b46d9(0x175)],_0x10dc05[_0x1b46d9(0x24c)],{'success':!![],'enums':_0x11a9f6,'rooms':_0x163ebc},_0x10dc05['callback']);}else{if(_0x10dc05[_0x1b46d9(0x24c)]===_0x1b46d9(0x138)){const _0x175387=_0x10dc05[_0x1b46d9(0x24d)]['instance'];if(!_0x175387)return this[_0x1b46d9(0x2a7)](_0x10dc05[_0x1b46d9(0x175)],_0x10dc05[_0x1b46d9(0x24c)],{'success':![],'error':_0x1b46d9(0x1de)},_0x10dc05[_0x1b46d9(0x2a5)]);const _0x105f14=await getCalendarNames(this,_0x175387);this[_0x1b46d9(0x2a7)](_0x10dc05['from'],_0x10dc05[_0x1b46d9(0x24c)],{'success':!![],'names':_0x105f14},_0x10dc05[_0x1b46d9(0x2a5)]);}else{if(_0x10dc05[_0x1b46d9(0x24c)]===_0x1b46d9(0x20f)){const {targetId:_0x1ba420,targetValue:_0x4b6293}=_0x10dc05[_0x1b46d9(0x24d)];this['log'][_0x1b46d9(0x1da)](_0x1b46d9(0x19f)+_0x1ba420+_0x1b46d9(0x180)+_0x4b6293),await this[_0x1b46d9(0x23e)](_0x1b46d9(0x159),{'val':!![],'ack':!![]}),await this[_0x1b46d9(0x23e)](_0x1b46d9(0x161),{'val':_0x1b46d9(0x249)+_0x1ba420,'ack':!![]}),await this[_0x1b46d9(0x23e)]('analysis.automation.targetId',{'val':_0x1ba420,'ack':!![]}),await this[_0x1b46d9(0x23e)](_0x1b46d9(0x273),{'val':_0x4b6293,'ack':!![]}),this['sendTo'](_0x10dc05[_0x1b46d9(0x175)],_0x10dc05[_0x1b46d9(0x24c)],{'success':!![]},_0x10dc05[_0x1b46d9(0x2a5)]);}else{if(_0x10dc05[_0x1b46d9(0x24c)]==='submitFeedback'){const {historyId:_0x48bd3a,rating:_0x371a5f,comment:_0x3abb61,alertReason:_0x114ab2}=_0x10dc05['message'];_0x48bd3a&&_0x371a5f?(await saveFeedback(this,{'timestamp':Date[_0x1b46d9(0x137)](),'historyId':_0x48bd3a,'rating':_0x371a5f,'comment':_0x3abb61,'alertReason':_0x114ab2}),this['sendTo'](_0x10dc05[_0x1b46d9(0x175)],_0x10dc05[_0x1b46d9(0x24c)],{'success':!![]},_0x10dc05[_0x1b46d9(0x2a5)])):this['sendTo'](_0x10dc05['from'],_0x10dc05['command'],{'success':![],'error':'Missing\x20data'},_0x10dc05[_0x1b46d9(0x2a5)]);}else _0x10dc05[_0x1b46d9(0x24c)]===_0x1b46d9(0x1d4)&&(this['log']['info'](_0x1b46d9(0x277)),await this[_0x1b46d9(0x23e)](_0x1b46d9(0x159),{'val':![],'ack':!![]}),await this['setStateAsync'](_0x1b46d9(0x161),{'val':'','ack':!![]}),this[_0x1b46d9(0x2a7)](_0x10dc05['from'],_0x10dc05[_0x1b46d9(0x24c)],{'success':!![]},_0x10dc05[_0x1b46d9(0x2a5)]));}}}}}}}}}}}if(require['main']!==module)module['exports']=_0x1e753b=>new CogniLiving(_0x1e753b);else new CogniLiving();