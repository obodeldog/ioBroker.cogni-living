const a0_0x5f1c76=a0_0x2305;(function(_0x25646c,_0x17e0d1){const _0xbfc3f0=a0_0x2305,_0x329268=_0x25646c();while(!![]){try{const _0xfda40=parseInt(_0xbfc3f0(0xdb))/0x1*(-parseInt(_0xbfc3f0(0x183))/0x2)+parseInt(_0xbfc3f0(0x13f))/0x3*(-parseInt(_0xbfc3f0(0x16f))/0x4)+-parseInt(_0xbfc3f0(0x197))/0x5+-parseInt(_0xbfc3f0(0x176))/0x6*(parseInt(_0xbfc3f0(0x114))/0x7)+parseInt(_0xbfc3f0(0xda))/0x8*(-parseInt(_0xbfc3f0(0x1cf))/0x9)+-parseInt(_0xbfc3f0(0x12e))/0xa*(parseInt(_0xbfc3f0(0x130))/0xb)+parseInt(_0xbfc3f0(0x12f))/0xc;if(_0xfda40===_0x17e0d1)break;else _0x329268['push'](_0x329268['shift']());}catch(_0x596152){_0x329268['push'](_0x329268['shift']());}}}(a0_0x4f26,0x7ca3b));const a0_0x59427d=(function(){let _0x164953=!![];return function(_0x4c7392,_0x1d7da8){const _0x13eb0=_0x164953?function(){const _0xa739b=a0_0x2305;if(_0x1d7da8){const _0x1496cc=_0x1d7da8[_0xa739b(0x1c7)](_0x4c7392,arguments);return _0x1d7da8=null,_0x1496cc;}}:function(){};return _0x164953=![],_0x13eb0;};}()),a0_0x5b139e=a0_0x59427d(this,function(){const _0x4bfa62=a0_0x2305;return a0_0x5b139e[_0x4bfa62(0xec)]()[_0x4bfa62(0x18c)](_0x4bfa62(0xc4))[_0x4bfa62(0xec)]()['constructor'](a0_0x5b139e)[_0x4bfa62(0x18c)](_0x4bfa62(0xc4));});a0_0x5b139e();'use strict';const utils=require(a0_0x5f1c76(0x1b1)),{GoogleGenerativeAI}=require('@google/generative-ai'),path=require(a0_0x5f1c76(0x105)),fs=require('fs'),installer=require('./lib/installer'),scanner=require(a0_0x5f1c76(0x1d4)),schedulers=require(a0_0x5f1c76(0x1b6)),topology=require('./lib/topology'),setup=require('./lib/setup'),recorder=require(a0_0x5f1c76(0xe0)),pythonBridge=require('./lib/python_bridge'),aiAgent=require(a0_0x5f1c76(0x152)),deadMan=require('./lib/dead_man'),automation=require('./lib/automation'),GEMINI_MODEL=a0_0x5f1c76(0x1c3);function a0_0x2305(_0xaad481,_0x11ab63){const _0x42953a=a0_0x4f26();return a0_0x2305=function(_0x5b139e,_0x59427d){_0x5b139e=_0x5b139e-0xbf;let _0x4f2657=_0x42953a[_0x5b139e];return _0x4f2657;},a0_0x2305(_0xaad481,_0x11ab63);}function a0_0x4f26(){const _0x17352a=['from','all','analysis.activity.roomStats','presenceDevices','exitGraceTimer','toISOString','triggerInfrasoundCorrelation','location','CALCULATE_HEALTH_TREND','object','Room\x20Dwell\x20Time\x20Stats','analysis.activity.roomHistory','sensorLastValues','triggerBriefing','type','infrasoundLocked','onMessage','bind','infrasoundEnabled','fill','checkCalendarTriggers','trackerHeartbeat','energy','text','analysis.prediction.trackerConfidence','\x20events\x20from\x20today...','scheduleJob','17364AUIxFg','then','message','lastAlertState','executeAutomationAction','Gemini\x20Init\x20Error:\x20','toLowerCase','24ZzwxMS','find','LTM.trainingData.thermodynamics','door','getForeignObjectsAsync','moduleEnergy','healthTrendInterval','val','triggerEnergyPrediction','DAY','‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.','moduleSecurity','briefingJob','166406QJDRDx','{\x22history\x22:{}}','haust√ºr','dependencyInstallInProgress','Lernphase\x20(','analysisTimer','todayVector','createDailyDigest','analysis.training.status','search','analysis.security.learningStatus','setPresence','generateHealthReport','analysis.health.geminiNight','createAllObjects','historyJob','isPresent','analysis.trigger','toLocaleDateString','analysis.visualization.pulse','3724245lgxqbd','\x20events\x20from\x20storage\x20to\x20memory.','initHistory','protectAiMemory','Gemini\x20Report\x20Night','üíæ\x20Saving\x20Daily\x20History\x20for\x20','health','getHistoryData','values','checkSolarCondition','setStateAsync','node-schedule','licenseKey','analysis.automation.targetValue','devices','setObjectNotExistsAsync','includes','checkLicense','checkWifiPresence','existsSync','startSystem','getAbsoluteDefaultDataDir','activeModules','modeResetJob','LTM.rawEventLog','triggerGaitAnalysis','@iobroker/adapter-core','onReady','name','infrasoundSensorId','info','./lib/scheduler','dailyDigests','saveDailyHistory','analysis.training.triggerTopology','LTM.dailyDigests','Sec-Training\x20started...','runAutopilot','state','enum','command','analyzeWindowOpening','exitTimer','getHours','models/gemini-flash-latest','Init...','open','window','apply','59\x2023\x20*\x20*\x20*','timestamp','error','replayTodayEvents','exports','getDate','cleanupGhostInterventions','9KPKwDl','party','runPythonHealthCheck','analysis.automation.targetId','analysis.health.todayVector','./lib/scanner','ltmJob','checkThermostats','SYSTEM_MODES','Gemini\x20Report\x20Day','thermostat','(((.+)+)+)+$','sources','.system.mode','isRelevantActivity','guest','TRAIN_TOPOLOGY','minDaysForBaseline','bootTime','parse','SET_LEARNING_MODE','config','analysis.training.triggerEnergy','pulse','üì¶\x20Restored\x20','length','cogni-living','setState','inactivityThresholdHours','onUnload','setHours','getMinutes','Live\x20Event\x20Pulse','1178016GCqMEg','1nIhOFw','analysisHistory','analysis.training.triggerHealth','push','Daily\x20Room\x20Details\x20(48x30min)','./lib/recorder','utf8','Unknown','system.presenceWho','Warte\x20auf\x20Analyse...','enum.functions.*','{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}','moduleHealth','systemConfig','setDate','sendNotification','sendTo','toString','appendToLog','Warm-Up\x20Time','Room\x20History\x20(24h\x20Buckets)','analysis.prediction.trackerTopRoom','analysis.energy.warmupSources','stateChange','security','cancel','driftAnalysisTimer','application/json','...','communicate.request','SYSTEM_DP_MODE','endsWith','.venv','common','üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','analysis.automation.patternDetected','max','scanDevices','temperature','json','startService','updateLocation','path','Guest\x20Mode','analysis.health.activityTrend','handleInfrasound','currentSystemMode','getStateAsync','telegram','moduleComfort','Daily\x20Activity\x20Vector\x20(48x30min)','history','now','filter','string','slice','analysis.health.todayRoomDetails','1084097BRwTjB','bin','ack','subscribeForeignStates','some','modules','stringify','analysis.health.geminiDay','motion','geminiModel','updateTopology','subscribeStates','Party\x20Mode','readFileSync','abortExitTimer','terrasse','geminiApiKey','analysis.energy.warmupTimes','triggerDailyDigest','send','eventHistory','value','split','getGenerativeModel','isGracePeriodActive','integrateRoomTime','10rFxglv','38646924RzkqvP','2096963haNhct','scanThermostats','lastTrackerEventTime','memoryCache','LTM.trainingData.sequences','processSensorEvent','[Integrator]\x20Error:\x20','General\x20Activity\x20Trend','times','min','callback','isSolar','rawEventLog','manual','getEnums','639aedKLc','‚úÖ\x20History\x20saved:\x20','comfort','genAI','updateHealthVector','warn','.json','analysis.security.lastScore','NORMAL','Keine\x20Daten','LTM.triggerDailyDigest','‚Ü∫\x20Replaying\x20','\x20Tage)','isProVersion','loadSystemMode','log','date','roomIntegratorTimer','analysis.automation.description','./lib/ai_agent','join'];a0_0x4f26=function(){return _0x17352a;};return a0_0x4f26();}class CogniLiving extends utils['Adapter']{constructor(_0x50c6ca){const _0x526ae8=a0_0x5f1c76;super({..._0x50c6ca,'name':_0x526ae8(0xd3)}),this['eventHistory']=[],this[_0x526ae8(0xdc)]=[],this[_0x526ae8(0x13c)]=[],this[_0x526ae8(0x1b7)]=[],this[_0x526ae8(0x160)]={},this[_0x526ae8(0xe8)]={'latitude':0x0,'longitude':0x0,'city':''},this['isPresent']=!![],this[_0x526ae8(0x1c1)]=null,this[_0x526ae8(0x158)]=null,this[_0x526ae8(0x12c)]=![],this['genAI']=null,this['geminiModel']=null,this[_0x526ae8(0x109)]=setup[_0x526ae8(0xc1)][_0x526ae8(0x147)],this['isProVersion']=![],this[_0x526ae8(0x172)]=![],this[_0x526ae8(0x188)]=null,this[_0x526ae8(0xbf)]=null,this[_0x526ae8(0x1ae)]=null,this[_0x526ae8(0xf5)]=null,this[_0x526ae8(0x182)]=null,this[_0x526ae8(0x192)]=null,this[_0x526ae8(0x169)]=null,this[_0x526ae8(0x17c)]=null,this['roomIntegratorTimer']=null,this[_0x526ae8(0x186)]=![],this[_0x526ae8(0x132)]=Date[_0x526ae8(0x10f)](),this['memoryCache']=null,this[_0x526ae8(0xcb)]=Date[_0x526ae8(0x10f)](),this[_0x526ae8(0x163)]=![],this['pressureBuffer']=[],this['activeModules']={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on']('ready',this[_0x526ae8(0x1b2)][_0x526ae8(0x165)](this)),this['on'](_0x526ae8(0xf2),this['onStateChange'][_0x526ae8(0x165)](this)),this['on']('unload',this['onUnload']['bind'](this)),this['on'](_0x526ae8(0x171),this[_0x526ae8(0x164)]['bind'](this));}async['onReady'](){const _0x78eff1=a0_0x5f1c76;this[_0x78eff1(0x14e)]['info']('cogni-living\x20adapter\x20starting\x20(v'+this['version']+')\x20-\x20Phase\x20E\x20(Full\x20Fix)');if(this[_0x78eff1(0xce)][_0x78eff1(0xe7)]!==undefined)this['activeModules'][_0x78eff1(0x19d)]=this[_0x78eff1(0xce)][_0x78eff1(0xe7)];if(this['config'][_0x78eff1(0x181)]!==undefined)this[_0x78eff1(0x1ad)][_0x78eff1(0xf3)]=this['config'][_0x78eff1(0x181)];if(this[_0x78eff1(0xce)][_0x78eff1(0x17b)]!==undefined)this[_0x78eff1(0x1ad)]['energy']=this['config']['moduleEnergy'];if(this[_0x78eff1(0xce)][_0x78eff1(0x10c)]!==undefined)this[_0x78eff1(0x1ad)][_0x78eff1(0x141)]=this[_0x78eff1(0xce)][_0x78eff1(0x10c)];if(this[_0x78eff1(0xce)]['modules'])this[_0x78eff1(0x1ad)]={...this[_0x78eff1(0x1ad)],...this['config'][_0x78eff1(0x119)]};this[_0x78eff1(0x1ab)]();}async[a0_0x5f1c76(0x1ab)](){const _0x4850cc=a0_0x5f1c76;await setup['initZombies'](this);try{this[_0x4850cc(0x14c)]=await setup[_0x4850cc(0x1a8)](this[_0x4850cc(0xce)][_0x4850cc(0x1a3)]);}catch(_0x26f188){}if(!this[_0x4850cc(0xce)][_0x4850cc(0xd5)]||this['config'][_0x4850cc(0xd5)]<0.1)this[_0x4850cc(0xce)][_0x4850cc(0xd5)]=0xc;await setup[_0x4850cc(0x199)](this),await setup['initSystemConfig'](this);try{const _0x11a023=await this[_0x4850cc(0x10a)](_0x4850cc(0x125)),_0x3a4aec=await this[_0x4850cc(0x10a)](_0x4850cc(0xf1));_0x11a023&&_0x11a023[_0x4850cc(0x17d)]&&_0x3a4aec&&_0x3a4aec[_0x4850cc(0x17d)]&&(Date['now']()-_0x11a023['ts']<0x4*0xe10*0x3e8&&(this[_0x4850cc(0x133)]={'times':JSON[_0x4850cc(0xcc)](_0x11a023[_0x4850cc(0x17d)]),'sources':JSON['parse'](_0x3a4aec[_0x4850cc(0x17d)])}));}catch(_0x246436){}if(this['config'][_0x4850cc(0x124)])try{this[_0x4850cc(0x142)]=new GoogleGenerativeAI(this[_0x4850cc(0xce)][_0x4850cc(0x124)]),this[_0x4850cc(0x11d)]=this[_0x4850cc(0x142)][_0x4850cc(0x12b)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x4850cc(0xf6)}});}catch(_0x3a3938){this['log']['error'](_0x4850cc(0x174)+_0x3a3938[_0x4850cc(0x171)]);}await setup[_0x4850cc(0x191)](this),await this[_0x4850cc(0x14d)](),await this[_0x4850cc(0x1a6)](_0x4850cc(0x196),{'type':_0x4850cc(0x1bd),'common':{'name':_0x4850cc(0xd9),'type':'number','role':_0x4850cc(0x129),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x4850cc(0x156),{'type':_0x4850cc(0x1bd),'common':{'name':_0x4850cc(0x15e),'type':_0x4850cc(0x111),'role':_0x4850cc(0x102),'read':!![],'write':![],'def':_0x4850cc(0xe6)},'native':{}}),await this[_0x4850cc(0x1a6)](_0x4850cc(0x15f),{'type':_0x4850cc(0x1bd),'common':{'name':_0x4850cc(0xef),'type':_0x4850cc(0x111),'role':'json','read':!![],'write':![],'def':_0x4850cc(0x184)},'native':{}}),await this[_0x4850cc(0x1a6)]('analysis.health.geminiNight',{'type':_0x4850cc(0x1bd),'common':{'name':_0x4850cc(0x19b),'type':_0x4850cc(0x111),'role':'text','read':!![],'write':![],'def':_0x4850cc(0xe4)},'native':{}}),await this[_0x4850cc(0x1a6)](_0x4850cc(0x11b),{'type':_0x4850cc(0x1bd),'common':{'name':_0x4850cc(0xc2),'type':_0x4850cc(0x111),'role':_0x4850cc(0x16b),'read':!![],'write':![],'def':_0x4850cc(0xe4)},'native':{}}),await this[_0x4850cc(0x1a6)](_0x4850cc(0x1d3),{'type':_0x4850cc(0x1bd),'common':{'name':_0x4850cc(0x10d),'type':'string','role':_0x4850cc(0x102),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x4850cc(0x1a6)]('analysis.health.todayRoomDetails',{'type':_0x4850cc(0x1bd),'common':{'name':_0x4850cc(0xdf),'type':_0x4850cc(0x111),'role':_0x4850cc(0x102),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x4850cc(0x1a6)](_0x4850cc(0x107),{'type':_0x4850cc(0x1bd),'common':{'name':_0x4850cc(0x137),'type':'number','role':_0x4850cc(0x129),'unit':'%','read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x4850cc(0x125),{'type':_0x4850cc(0x1bd),'common':{'name':_0x4850cc(0xee),'type':_0x4850cc(0x111),'role':_0x4850cc(0x102),'read':!![],'write':![]},'native':{}});try{const _0x31535b=await this[_0x4850cc(0x10a)]('LTM.rawEventLog');_0x31535b&&_0x31535b[_0x4850cc(0x17d)]&&(this[_0x4850cc(0x13c)]=JSON[_0x4850cc(0xcc)](_0x31535b['val']),this[_0x4850cc(0x128)]=[...this[_0x4850cc(0x13c)]],this[_0x4850cc(0x14e)][_0x4850cc(0x1b5)](_0x4850cc(0xd1)+this[_0x4850cc(0x128)][_0x4850cc(0xd2)]+_0x4850cc(0x198)));}catch(_0x147635){this[_0x4850cc(0x13c)]=[],this[_0x4850cc(0x128)]=[];}try{const _0x383b26=await this[_0x4850cc(0x10a)](_0x4850cc(0x1ba));if(_0x383b26&&_0x383b26['val'])this[_0x4850cc(0x1b7)]=JSON[_0x4850cc(0xcc)](_0x383b26[_0x4850cc(0x17d)]);}catch(_0x166a4d){this[_0x4850cc(0x1b7)]=[];}const _0x1b0270=this[_0x4850cc(0x1b7)][_0x4850cc(0xd2)]>=(this[_0x4850cc(0xce)]['minDaysForBaseline']||0x7)?'Aktiv\x20('+this[_0x4850cc(0x1b7)][_0x4850cc(0xd2)]+_0x4850cc(0x14b):_0x4850cc(0x187)+this['dailyDigests'][_0x4850cc(0xd2)]+'/'+(this[_0x4850cc(0xce)][_0x4850cc(0xca)]||0x7)+')';await this[_0x4850cc(0x1a1)]('LTM.baselineStatus',{'val':_0x1b0270,'ack':!![]}),this[_0x4850cc(0x11f)](_0x4850cc(0x194)),this[_0x4850cc(0x11f)](_0x4850cc(0x149)),this[_0x4850cc(0x11f)]('analysis.training.triggerHealth');this['config'][_0x4850cc(0x166)]&&this['config'][_0x4850cc(0x1b4)]&&this[_0x4850cc(0x1ad)][_0x4850cc(0xf3)]&&this[_0x4850cc(0x117)](this['config']['infrasoundSensorId']);const _0x4d8feb=this['config']['devices'];if(_0x4d8feb)for(const _0x2fa6a7 of _0x4d8feb){await this['subscribeForeignStatesAsync'](_0x2fa6a7['id']);}const _0x4dc535=this[_0x4850cc(0xce)][_0x4850cc(0x157)];if(_0x4dc535)for(const _0x288a64 of _0x4dc535){await this['subscribeForeignStatesAsync'](_0x288a64);}const _0x4a6ace=require(_0x4850cc(0x1a2));if(this[_0x4850cc(0x192)])this[_0x4850cc(0x192)][_0x4850cc(0xf4)]();this[_0x4850cc(0x192)]=_0x4a6ace[_0x4850cc(0x16e)](_0x4850cc(0x1c8),()=>{const _0x5218fc=_0x4850cc;this[_0x5218fc(0x1b8)]();}),setTimeout(()=>this[_0x4850cc(0x1cb)](),0x1388);if(this[_0x4850cc(0x150)])clearInterval(this[_0x4850cc(0x150)]);this[_0x4850cc(0x12d)](),this[_0x4850cc(0x150)]=setInterval(async()=>{const _0x323ff1=_0x4850cc;await this[_0x323ff1(0x12d)]();},0x3c*0x3e8);if(this[_0x4850cc(0x17c)])clearInterval(this[_0x4850cc(0x17c)]);this[_0x4850cc(0x17c)]=setInterval(()=>{const _0x23429e=_0x4850cc;this[_0x23429e(0x14c)]&&this[_0x23429e(0x1ad)][_0x23429e(0x19d)]&&this['runPythonHealthCheck']();},0x4*0x3c*0x3c*0x3e8);const _0x24a46f=path['join'](__dirname,_0x4850cc(0xfb),_0x4850cc(0x115),'python');pythonBridge[_0x4850cc(0x103)](this,_0x24a46f);}[a0_0x5f1c76(0xd6)](_0x7d9185){const _0x11c220=a0_0x5f1c76;if(this[_0x11c220(0x192)])this['historyJob'][_0x11c220(0xf4)]();this[_0x11c220(0x1b8)]()[_0x11c220(0x170)](()=>{const _0x204603=_0x11c220;if(this['analysisTimer'])clearInterval(this[_0x204603(0x188)]);if(this[_0x204603(0x150)])clearInterval(this[_0x204603(0x150)]);recorder[_0x204603(0x122)](this),pythonBridge['stopService'](this),_0x7d9185();});}async['replayTodayEvents'](){const _0x58ba56=a0_0x5f1c76;if(!this[_0x58ba56(0x128)]||this['eventHistory'][_0x58ba56(0xd2)]===0x0){this[_0x58ba56(0x14e)]['warn']('‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.');return;}this['log'][_0x58ba56(0x1b5)](_0x58ba56(0x14a)+this[_0x58ba56(0x128)][_0x58ba56(0xd2)]+_0x58ba56(0x16d));const _0x53e1e1=new Date()['setHours'](0x0,0x0,0x0,0x0),_0x54b139=_0x58ba56(0x15f);let _0x4c5cb6={'history':{},'date':new Date()[_0x58ba56(0x195)]()};const _0x1bca39=_0x58ba56(0x1d3),_0x2aa042=_0x58ba56(0x113);let _0x4eabb1=new Array(0x30)[_0x58ba56(0x167)](0x0),_0x3f5bcc=Array[_0x58ba56(0x154)]({'length':0x30},()=>[]);this[_0x58ba56(0x128)]['forEach'](_0x3d57d8=>{const _0x46519e=_0x58ba56;if(_0x3d57d8[_0x46519e(0x1c9)]>=_0x53e1e1){if(recorder[_0x46519e(0xc7)](_0x3d57d8['type'],_0x3d57d8[_0x46519e(0x129)])){const _0x2ca565=new Date(_0x3d57d8[_0x46519e(0x1c9)]),_0x33c4d4=_0x2ca565['getHours']()*0x2+(_0x2ca565[_0x46519e(0xd8)]()>=0x1e?0x1:0x0);if(_0x33c4d4<0x30){_0x4eabb1[_0x33c4d4]++;const _0x3bfb9b=_0x3d57d8[_0x46519e(0x15b)]||_0x3d57d8['name']||'?';let _0x2160e0=_0x3f5bcc[_0x33c4d4];!_0x2160e0[_0x46519e(0x1a7)](_0x3bfb9b)&&_0x2160e0[_0x46519e(0xde)](_0x3bfb9b);}const _0x31e1ae=_0x2ca565[_0x46519e(0x1c2)]();let _0x5b63e4=_0x3d57d8['location']||_0x46519e(0xe2);const _0x3acb60=(this['config'][_0x46519e(0x1a5)]||[])[_0x46519e(0x177)](_0x5f1e16=>_0x5f1e16['location']===_0x5b63e4);if(_0x3acb60)_0x5b63e4=_0x3acb60[_0x46519e(0x15b)];if(!_0x4c5cb6[_0x46519e(0x10e)][_0x5b63e4])_0x4c5cb6[_0x46519e(0x10e)][_0x5b63e4]=new Array(0x18)['fill'](0x0);if(_0x4c5cb6[_0x46519e(0x10e)][_0x5b63e4][_0x31e1ae]<0x3c)_0x4c5cb6[_0x46519e(0x10e)][_0x5b63e4][_0x31e1ae]++;}}});const _0x22f364=await this[_0x58ba56(0x10a)](_0x54b139);(!_0x22f364||!_0x22f364['val']||_0x22f364[_0x58ba56(0x17d)]==='{}'||_0x22f364[_0x58ba56(0x17d)][_0x58ba56(0x1a7)]('\x22history\x22:{}'))&&await this[_0x58ba56(0x1a1)](_0x54b139,{'val':JSON[_0x58ba56(0x11a)](_0x4c5cb6),'ack':!![]}),await this[_0x58ba56(0x1a1)](_0x1bca39,{'val':JSON['stringify'](_0x4eabb1),'ack':!![]}),await this[_0x58ba56(0x1a1)](_0x2aa042,{'val':JSON[_0x58ba56(0x11a)](_0x3f5bcc),'ack':!![]}),this[_0x58ba56(0x14e)][_0x58ba56(0x1b5)](_0x58ba56(0x180));}async[a0_0x5f1c76(0x1b8)](){const _0x1e8237=a0_0x5f1c76;if(!this[_0x1e8237(0x1ad)][_0x1e8237(0x19d)])return;const _0x288095=new Date()[_0x1e8237(0x159)]()[_0x1e8237(0x12a)]('T')[0x0];this[_0x1e8237(0x14e)]['debug'](_0x1e8237(0x19c)+_0x288095+_0x1e8237(0xf7));try{const [_0x1b14bc,_0x3ee5e3,_0x4816ce,_0x4c1a27,_0x4a5e49,_0x55cca4]=await Promise[_0x1e8237(0x155)]([this[_0x1e8237(0x10a)](_0x1e8237(0x15f)),this[_0x1e8237(0x10a)](_0x1e8237(0x190)),this[_0x1e8237(0x10a)](_0x1e8237(0x11b)),this[_0x1e8237(0x10a)](_0x1e8237(0x146)),this[_0x1e8237(0x10a)]('analysis.health.todayVector'),this[_0x1e8237(0x10a)](_0x1e8237(0x107))]),_0x513a91=this[_0x1e8237(0x128)][_0x1e8237(0x110)](_0x2ef681=>_0x2ef681[_0x1e8237(0x1c9)]>=new Date()[_0x1e8237(0xd7)](0x0,0x0,0x0,0x0)&&(_0x2ef681[_0x1e8237(0x1b3)][_0x1e8237(0x175)]()[_0x1e8237(0x1a7)](_0x1e8237(0x185))||_0x2ef681[_0x1e8237(0x1b3)][_0x1e8237(0x175)]()[_0x1e8237(0x1a7)](_0x1e8237(0x123)))&&(_0x2ef681[_0x1e8237(0x129)]===!![]||_0x2ef681['value']===_0x1e8237(0x1c5)))[_0x1e8237(0xd2)];let _0x479e3f=0x55;if(_0x55cca4&&_0x55cca4[_0x1e8237(0x17d)]!==undefined)_0x479e3f=Math[_0x1e8237(0x139)](0x64,Math[_0x1e8237(0xff)](0x14,Math['round'](0x50+Number(_0x55cca4[_0x1e8237(0x17d)])*0x5)));const _0x4c26ef={'date':_0x288095,'timestamp':Date[_0x1e8237(0x10f)](),'roomHistory':_0x1b14bc?.['val']?JSON[_0x1e8237(0xcc)](_0x1b14bc[_0x1e8237(0x17d)]):{},'geminiNight':_0x3ee5e3?.[_0x1e8237(0x17d)]||'Keine\x20Daten','geminiDay':_0x4816ce?.['val']||_0x1e8237(0x148),'anomalyScore':_0x4c1a27?.[_0x1e8237(0x17d)]||0.1,'todayVector':_0x4a5e49?.[_0x1e8237(0x17d)]?JSON[_0x1e8237(0xcc)](_0x4a5e49[_0x1e8237(0x17d)]):new Array(0x30)[_0x1e8237(0x167)](0x0),'batteryLevel':_0x479e3f,'freshAirCount':_0x513a91,'eventHistory':this[_0x1e8237(0x128)]},_0x47e272=utils[_0x1e8237(0x1ac)](),_0x36d5bb=path[_0x1e8237(0x153)](_0x47e272,_0x1e8237(0xd3),_0x1e8237(0x10e));if(!fs['existsSync'](_0x36d5bb))fs['mkdirSync'](_0x36d5bb,{'recursive':!![]});const _0x211cee=path[_0x1e8237(0x153)](_0x36d5bb,_0x288095+'.json');fs['writeFileSync'](_0x211cee,JSON[_0x1e8237(0x11a)](_0x4c26ef)),this[_0x1e8237(0x14e)][_0x1e8237(0x1b5)](_0x1e8237(0x140)+_0x211cee);}catch(_0x1e63f8){this[_0x1e8237(0x14e)][_0x1e8237(0x1ca)]('History\x20Save\x20Error:\x20'+_0x1e63f8['message']);}}async['integrateRoomTime'](){const _0x46fd94=a0_0x5f1c76;if(!this[_0x46fd94(0x193)])return;try{let _0x4b5e41=null;try{const _0x3e5838=await this[_0x46fd94(0x10a)](_0x46fd94(0xf0)),_0x53fed0=await this[_0x46fd94(0x10a)](_0x46fd94(0x16c));if(_0x3e5838&&_0x3e5838[_0x46fd94(0x17d)]&&_0x53fed0&&_0x53fed0[_0x46fd94(0x17d)]&&_0x53fed0[_0x46fd94(0x17d)]>0.3){if(_0x3e5838[_0x46fd94(0x17d)]!==_0x46fd94(0xe2)&&_0x3e5838['val']!==_0x46fd94(0x1c4))_0x4b5e41=_0x3e5838[_0x46fd94(0x17d)];}}catch(_0x2c4b4a){}if(!_0x4b5e41){const _0x2931ee=this[_0x46fd94(0xce)][_0x46fd94(0x1a5)]||[];for(const _0x19045f of _0x2931ee){if(_0x19045f['type']===_0x46fd94(0x11c)&&_0x19045f[_0x46fd94(0x15b)])try{const _0x5155ee=await this['getForeignStateAsync'](_0x19045f['id']);if(_0x5155ee&&(_0x5155ee[_0x46fd94(0x17d)]===!![]||_0x5155ee[_0x46fd94(0x17d)]==='on'||_0x5155ee[_0x46fd94(0x17d)]===0x1)){_0x4b5e41=_0x19045f[_0x46fd94(0x15b)];break;}}catch(_0x20fafd){}}}if(!_0x4b5e41)return;const _0xe715c8=this[_0x46fd94(0xce)][_0x46fd94(0x1a5)]||[];let _0x5ace3c=_0x4b5e41;const _0x1e80c4=_0xe715c8[_0x46fd94(0x177)](_0x23241d=>_0x23241d[_0x46fd94(0x15b)]&&_0x23241d['location'][_0x46fd94(0x175)]()===_0x4b5e41[_0x46fd94(0x175)]());if(_0x1e80c4)_0x5ace3c=_0x1e80c4[_0x46fd94(0x15b)];const _0x41d872=_0x46fd94(0x15f),_0x35b84b=await this[_0x46fd94(0x10a)](_0x41d872),_0x4535e3=new Date()[_0x46fd94(0x195)]();let _0x333c14={'history':{},'date':_0x4535e3};if(_0x35b84b&&_0x35b84b[_0x46fd94(0x17d)])try{_0x333c14=JSON[_0x46fd94(0xcc)](_0x35b84b['val']);}catch(_0x471d32){}_0x333c14[_0x46fd94(0x14f)]!==_0x4535e3&&(_0x333c14[_0x46fd94(0x10e)]={},_0x333c14['date']=_0x4535e3);if(!_0x333c14[_0x46fd94(0x10e)][_0x5ace3c])_0x333c14['history'][_0x5ace3c]=new Array(0x18)['fill'](0x0);const _0x58eba0=new Date()[_0x46fd94(0x1c2)]();if(_0x333c14[_0x46fd94(0x10e)][_0x5ace3c][_0x58eba0]<0x3c)_0x333c14[_0x46fd94(0x10e)][_0x5ace3c][_0x58eba0]++;await this[_0x46fd94(0x1a1)](_0x41d872,{'val':JSON[_0x46fd94(0x11a)](_0x333c14),'ack':!![]});}catch(_0x15a946){this[_0x46fd94(0x14e)][_0x46fd94(0x144)](_0x46fd94(0x136)+_0x15a946[_0x46fd94(0x171)]);}}async['onMessage'](_0x5d8ee){const _0x29d7c1=a0_0x5f1c76;if(typeof _0x5d8ee===_0x29d7c1(0x15d)&&_0x5d8ee[_0x29d7c1(0x171)]){if(_0x5d8ee[_0x29d7c1(0x1bf)]===_0x29d7c1(0x19e)){const _0x2cd810=_0x5d8ee[_0x29d7c1(0x171)][_0x29d7c1(0x14f)],_0x42f49b=utils['getAbsoluteDefaultDataDir'](),_0x5d1267=path[_0x29d7c1(0x153)](_0x42f49b,_0x29d7c1(0xd3),'history',_0x2cd810+'.json');if(fs[_0x29d7c1(0x1aa)](_0x5d1267))try{const _0x79ead3=JSON[_0x29d7c1(0xcc)](fs[_0x29d7c1(0x121)](_0x5d1267,_0x29d7c1(0xe1)));this[_0x29d7c1(0xeb)](_0x5d8ee[_0x29d7c1(0x154)],_0x5d8ee['command'],{'success':!![],'data':_0x79ead3},_0x5d8ee['callback']);}catch(_0x3b90b4){this[_0x29d7c1(0xeb)](_0x5d8ee[_0x29d7c1(0x154)],_0x5d8ee[_0x29d7c1(0x1bf)],{'success':![],'error':'Corrupt'},_0x5d8ee[_0x29d7c1(0x13a)]);}else this[_0x29d7c1(0xeb)](_0x5d8ee[_0x29d7c1(0x154)],_0x5d8ee[_0x29d7c1(0x1bf)],{'success':![],'error':'No\x20data'},_0x5d8ee[_0x29d7c1(0x13a)]);}else{if(_0x5d8ee['command']==='getOverviewData'){const _0x3cbcbd=this['dailyDigests'][_0x29d7c1(0xd2)];let _0x5c64ed=new Array(0x30)[_0x29d7c1(0x167)](0x0),_0x1f48de=Array[_0x29d7c1(0x154)]({'length':0x30},()=>[]);try{const _0x20b1b3=await this[_0x29d7c1(0x10a)]('analysis.health.todayVector');if(_0x20b1b3&&_0x20b1b3[_0x29d7c1(0x17d)])_0x5c64ed=JSON[_0x29d7c1(0xcc)](_0x20b1b3['val']);const _0xb4d1ed=await this['getStateAsync'](_0x29d7c1(0x113));if(_0xb4d1ed&&_0xb4d1ed[_0x29d7c1(0x17d)])_0x1f48de=JSON[_0x29d7c1(0xcc)](_0xb4d1ed[_0x29d7c1(0x17d)]);}catch(_0x547b24){}let _0x1968f0=new Array(0x30)['fill'](0x0);try{const _0x1a06a8=new Date();_0x1a06a8[_0x29d7c1(0xe9)](_0x1a06a8[_0x29d7c1(0x1cd)]()-0x1);const _0x2ba587=_0x1a06a8['toISOString']()[_0x29d7c1(0x12a)]('T')[0x0],_0x5e48c1=utils[_0x29d7c1(0x1ac)](),_0x2fa12f=path['join'](_0x5e48c1,_0x29d7c1(0xd3),_0x29d7c1(0x10e),_0x2ba587+_0x29d7c1(0x145));if(fs[_0x29d7c1(0x1aa)](_0x2fa12f)){const _0x5a9158=JSON[_0x29d7c1(0xcc)](fs['readFileSync'](_0x2fa12f,_0x29d7c1(0xe1)));if(_0x5a9158&&_0x5a9158[_0x29d7c1(0x189)])_0x1968f0=_0x5a9158[_0x29d7c1(0x189)];}}catch(_0xb998e6){}let _0x1dfe3b={'today':{},'yesterday':{}};try{const _0x23ec43=await this[_0x29d7c1(0x10a)](_0x29d7c1(0x156));if(_0x23ec43&&_0x23ec43[_0x29d7c1(0x17d)])_0x1dfe3b=JSON[_0x29d7c1(0xcc)](_0x23ec43[_0x29d7c1(0x17d)]);}catch(_0x863ebc){}let _0x1d6ec5=![],_0x5b9e9c='',_0x21ca96='',_0x1759d8='';try{const _0x3965ee=await this[_0x29d7c1(0x10a)](_0x29d7c1(0xfe));if(_0x3965ee&&_0x3965ee[_0x29d7c1(0x17d)]){_0x1d6ec5=!![];const _0x526b03=await this['getStateAsync'](_0x29d7c1(0x151));_0x5b9e9c=_0x526b03?_0x526b03[_0x29d7c1(0x17d)]:'';const _0x1768a7=await this['getStateAsync'](_0x29d7c1(0x1d2));_0x21ca96=_0x1768a7?_0x1768a7[_0x29d7c1(0x17d)]:'';const _0x179614=await this[_0x29d7c1(0x10a)](_0x29d7c1(0x1a4));_0x1759d8=_0x179614?_0x179614['val']:'';}}catch(_0x1a5d80){}const _0x30fdb6=await this[_0x29d7c1(0x1a0)](),_0x48595f=(this['config']['devices']||[])[_0x29d7c1(0x118)](_0x5c488f=>_0x5c488f[_0x29d7c1(0x13b)]),_0x4bb38e=_0x30fdb6&&_0x48595f;let _0x32dac7='';try{const _0xd3141d=await this['getStateAsync'](_0x29d7c1(0xe3));if(_0xd3141d&&_0xd3141d[_0x29d7c1(0x17d)])_0x32dac7=_0xd3141d[_0x29d7c1(0x17d)];}catch(_0xcdd301){}this[_0x29d7c1(0xeb)](_0x5d8ee['from'],_0x5d8ee[_0x29d7c1(0x1bf)],{'success':!![],'eventHistory':this[_0x29d7c1(0x128)][_0x29d7c1(0x112)](0x0,0x7d0),'stats':{'digestCount':_0x3cbcbd,'isPresent':this[_0x29d7c1(0x193)],'hourlyActivity':_0x5c64ed,'hourlyDetails':_0x1f48de,'yesterdayActivity':_0x1968f0,'solarActive':_0x4bb38e,'presenceWho':_0x32dac7,'roomStats':_0x1dfe3b,'modules':this[_0x29d7c1(0x1ad)]},'automation':{'detected':_0x1d6ec5,'description':_0x5b9e9c,'targetId':_0x21ca96,'targetValue':_0x1759d8}},_0x5d8ee['callback']);}else{if(_0x5d8ee['command']===_0x29d7c1(0xc0))try{const _0x4c6533=await automation[_0x29d7c1(0x131)](this);this['sendTo'](_0x5d8ee[_0x29d7c1(0x154)],_0x5d8ee[_0x29d7c1(0x1bf)],{'success':!![],'results':_0x4c6533},_0x5d8ee[_0x29d7c1(0x13a)]);}catch(_0x543ec9){this[_0x29d7c1(0xeb)](_0x5d8ee[_0x29d7c1(0x154)],_0x5d8ee[_0x29d7c1(0x1bf)],{'success':![],'error':_0x543ec9[_0x29d7c1(0x171)]},_0x5d8ee[_0x29d7c1(0x13a)]);}else{if(_0x5d8ee['command']===_0x29d7c1(0x100))try{const _0x7b55b8=await scanner['scanForDevices'](this,_0x5d8ee[_0x29d7c1(0x171)]||{});this[_0x29d7c1(0xeb)](_0x5d8ee['from'],_0x5d8ee[_0x29d7c1(0x1bf)],{'success':!![],'devices':_0x7b55b8},_0x5d8ee[_0x29d7c1(0x13a)]);}catch(_0x11e59f){}else{if(_0x5d8ee[_0x29d7c1(0x1bf)]===_0x29d7c1(0x13e)){const _0x5d0cb2=await this[_0x29d7c1(0x17a)](_0x29d7c1(0xe5),_0x29d7c1(0x1be)),_0x3aa681=[];if(_0x5d0cb2)for(const _0x20081b in _0x5d0cb2){_0x3aa681[_0x29d7c1(0xde)]({'id':_0x20081b,'name':_0x5d0cb2[_0x20081b][_0x29d7c1(0xfc)]['name']});}const _0x1cfe9e=await this[_0x29d7c1(0x17a)]('enum.rooms.*',_0x29d7c1(0x1be)),_0x17f57f=[];if(_0x1cfe9e)for(const _0x1dd85e in _0x1cfe9e){_0x17f57f['push'](_0x1cfe9e[_0x1dd85e][_0x29d7c1(0xfc)]['name']||_0x1dd85e[_0x29d7c1(0x12a)]('.')['pop']());}this[_0x29d7c1(0xeb)](_0x5d8ee['from'],_0x5d8ee[_0x29d7c1(0x1bf)],{'success':!![],'enums':_0x3aa681,'rooms':_0x17f57f},_0x5d8ee[_0x29d7c1(0x13a)]);}}}}}}}[a0_0x5f1c76(0x1d1)](){const _0x24936e=a0_0x5f1c76;if(!this[_0x24936e(0x1ad)]['health'])return;this['log']['debug'](_0x24936e(0xfd));try{const _0x2bcbec=this['rawEventLog']||[];pythonBridge[_0x24936e(0x127)](this,_0x24936e(0x15c),{'events':_0x2bcbec});}catch(_0xbbea78){this[_0x24936e(0x14e)][_0x24936e(0x144)]('Failed\x20to\x20trigger\x20Python\x20Health\x20Check');}}async['onStateChange'](_0x589fea,_0xdc0c8e){const _0x539ad0=a0_0x5f1c76;if(!_0xdc0c8e||this[_0x539ad0(0x186)])return;if(_0x589fea['includes'](_0x539ad0(0x10b))&&_0x589fea[_0x539ad0(0xfa)](_0x539ad0(0xf8))&&_0xdc0c8e[_0x539ad0(0x17d)])return;if(this[_0x539ad0(0xce)][_0x539ad0(0x166)]&&_0x589fea===this[_0x539ad0(0xce)][_0x539ad0(0x1b4)]&&this[_0x539ad0(0x1ad)][_0x539ad0(0xf3)]){this[_0x539ad0(0x108)](_0xdc0c8e[_0x539ad0(0x17d)]);return;}if(_0xdc0c8e[_0x539ad0(0x116)]&&_0x589fea['endsWith'](_0x539ad0(0xd0)))return;if(_0x589fea===this['namespace']+_0x539ad0(0xc6)){if(_0xdc0c8e[_0x539ad0(0x17d)]&&Object[_0x539ad0(0x19f)](setup[_0x539ad0(0xc1)])['includes'](_0xdc0c8e[_0x539ad0(0x17d)])){this[_0x539ad0(0x109)]=_0xdc0c8e[_0x539ad0(0x17d)];if(_0xdc0c8e['val']===setup[_0x539ad0(0xc1)]['VACATION'])await recorder[_0x539ad0(0x18e)](this,![]);else await recorder['setPresence'](this,!![]);if(this[_0x539ad0(0x14c)]){let _0x1fbf47=![],_0x23692d=0x0,_0x5ad068=_0x539ad0(0x13d);if(this[_0x539ad0(0x109)]===_0x539ad0(0x1d0))_0x1fbf47=!![],_0x23692d=0x168,_0x5ad068=_0x539ad0(0x120);else this[_0x539ad0(0x109)]===_0x539ad0(0xc8)&&(_0x1fbf47=!![],_0x23692d=0x5a0,_0x5ad068=_0x539ad0(0x106));pythonBridge[_0x539ad0(0x127)](this,_0x539ad0(0xcd),{'active':_0x1fbf47,'duration':_0x23692d,'label':_0x5ad068}),await this[_0x539ad0(0x1a1)](_0x539ad0(0x18d),{'val':JSON[_0x539ad0(0x11a)]({'active':_0x1fbf47,'label':_0x5ad068,'timestamp':Date[_0x539ad0(0x10f)]()}),'ack':!![]});}}if(!_0xdc0c8e[_0x539ad0(0x116)])this[_0x539ad0(0xd4)](_0x589fea,{'val':this[_0x539ad0(0x109)],'ack':!![]});return;}if(_0x589fea[_0x539ad0(0xfa)]('analysis.energy.warmupSources')&&_0xdc0c8e[_0x539ad0(0x116)])this[_0x539ad0(0x19a)](_0xdc0c8e[_0x539ad0(0x17d)]);if(_0x589fea[_0x539ad0(0xfa)](_0x539ad0(0x125))&&_0xdc0c8e['ack']&&this['activeModules']['energy'])automation[_0x539ad0(0x168)](this);if(!_0xdc0c8e[_0x539ad0(0x116)]){if(_0x589fea[_0x539ad0(0x1a7)](_0x539ad0(0x194))&&_0xdc0c8e[_0x539ad0(0x17d)]){this[_0x539ad0(0xd4)](_0x589fea,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this);return;}if(_0x589fea[_0x539ad0(0x1a7)](_0x539ad0(0x126))&&_0xdc0c8e[_0x539ad0(0x17d)]){this[_0x539ad0(0xd4)](_0x589fea,{'val':![],'ack':!![]});if(this[_0x539ad0(0x14c)])aiAgent[_0x539ad0(0x18a)](this,pythonBridge);return;}if(_0x589fea[_0x539ad0(0x1a7)](_0x539ad0(0x161))&&_0xdc0c8e[_0x539ad0(0x17d)]){this[_0x539ad0(0xd4)](_0x589fea,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this);return;}if(_0x589fea[_0x539ad0(0x1a7)]('automation.triggerAction')&&_0xdc0c8e['val']){this['setState'](_0x589fea,{'val':![],'ack':!![]}),aiAgent[_0x539ad0(0x173)](this);return;}if(_0x589fea[_0x539ad0(0x1a7)]('analysis.training.triggerSecurity')&&_0xdc0c8e[_0x539ad0(0x17d)]){this['setState'](_0x589fea,{'val':![],'ack':!![]});if(this[_0x539ad0(0x14c)])try{const _0x199a92=await this['getStateAsync'](_0x539ad0(0x134));if(_0x199a92&&_0x199a92[_0x539ad0(0x17d)]){const _0x55283e=JSON[_0x539ad0(0xcc)](_0x199a92[_0x539ad0(0x17d)]);this[_0x539ad0(0x1a1)](_0x539ad0(0x18b),{'val':_0x539ad0(0x1bb),'ack':!![]}),pythonBridge[_0x539ad0(0x127)](this,'TRAIN_SECURITY',{'sequences':_0x55283e});}}catch(_0xc39587){}return;}if(_0x589fea['includes'](_0x539ad0(0xdd))&&_0xdc0c8e[_0x539ad0(0x17d)]){this[_0x539ad0(0xd4)](_0x589fea,{'val':![],'ack':!![]});if(this[_0x539ad0(0x14c)])try{this[_0x539ad0(0x1d1)]();const _0x2b2035=await this[_0x539ad0(0x10a)]('LTM.dailyDigests');if(_0x2b2035&&_0x2b2035[_0x539ad0(0x17d)])pythonBridge['send'](this,'TRAIN_HEALTH',{'digests':JSON[_0x539ad0(0xcc)](_0x2b2035[_0x539ad0(0x17d)])});aiAgent[_0x539ad0(0x18f)](this,'NIGHT'),setTimeout(()=>aiAgent[_0x539ad0(0x18f)](this,_0x539ad0(0x17f)),0x2ee0);}catch(_0x2c9886){}return;}if(_0x589fea[_0x539ad0(0x1a7)](_0x539ad0(0xcf))&&_0xdc0c8e[_0x539ad0(0x17d)]){this[_0x539ad0(0xd4)](_0x589fea,{'val':![],'ack':!![]});if(this[_0x539ad0(0x14c)])try{const _0x2a8845=await this[_0x539ad0(0x10a)](_0x539ad0(0x178));if(_0x2a8845&&_0x2a8845[_0x539ad0(0x17d)])pythonBridge[_0x539ad0(0x127)](this,'TRAIN_ENERGY',{'points':JSON[_0x539ad0(0xcc)](_0x2a8845[_0x539ad0(0x17d)])});}catch(_0x31fd61){}return;}if(_0x589fea[_0x539ad0(0x1a7)]('analysis.training.triggerComfort')&&_0xdc0c8e[_0x539ad0(0x17d)]){this[_0x539ad0(0xd4)](_0x589fea,{'val':![],'ack':!![]});if(this[_0x539ad0(0x14c)])try{const _0x3b1f28=await this[_0x539ad0(0x10a)](_0x539ad0(0x1af));if(_0x3b1f28&&_0x3b1f28[_0x539ad0(0x17d)]){const _0x200f69={};if(this[_0x539ad0(0xce)][_0x539ad0(0x1a5)])this[_0x539ad0(0xce)][_0x539ad0(0x1a5)]['forEach'](_0x3b7ab0=>{const _0x2937fc=_0x539ad0;if(_0x3b7ab0['id']&&_0x3b7ab0[_0x2937fc(0x162)])_0x200f69[_0x3b7ab0['id']]=_0x3b7ab0['type'];});pythonBridge[_0x539ad0(0x127)](this,'TRAIN_COMFORT',{'events':JSON['parse'](_0x3b1f28[_0x539ad0(0x17d)]),'deviceMap':_0x200f69});}}catch(_0x24d3ea){}return;}if(_0x589fea[_0x539ad0(0x1a7)](_0x539ad0(0x1b9))&&_0xdc0c8e[_0x539ad0(0x17d)]){this[_0x539ad0(0xd4)](_0x589fea,{'val':![],'ack':!![]}),topology[_0x539ad0(0x11e)](this);if(this[_0x539ad0(0x14c)])try{const _0x50d812=await this[_0x539ad0(0x10a)]('LTM.trainingData.sequences');if(_0x50d812&&_0x50d812[_0x539ad0(0x17d)])pythonBridge[_0x539ad0(0x127)](this,_0x539ad0(0xc9),{'sequences':JSON[_0x539ad0(0xcc)](_0x50d812['val'])});}catch(_0x37bc00){}return;}}const _0x11246e=(this[_0x539ad0(0xce)][_0x539ad0(0x1a5)]||[])[_0x539ad0(0x177)](_0x54152e=>_0x54152e['id']===_0x589fea);if(_0x11246e){const _0x9d2c95=await recorder[_0x539ad0(0x135)](this,_0x589fea,_0xdc0c8e,_0x11246e);_0x9d2c95&&this['setState']('analysis.visualization.pulse',{'val':Date[_0x539ad0(0x10f)](),'ack':!![]});_0x9d2c95&&_0x9d2c95[_0x539ad0(0x162)]===_0x539ad0(0x11c)&&_0x9d2c95[_0x539ad0(0x15b)]&&this[_0x539ad0(0x14c)]&&deadMan[_0x539ad0(0x104)](this,_0x9d2c95[_0x539ad0(0x15b)]);_0xdc0c8e[_0x539ad0(0x17d)]&&(_0xdc0c8e[_0x539ad0(0x17d)]===!![]||_0xdc0c8e[_0x539ad0(0x17d)]===0x1||String(_0xdc0c8e[_0x539ad0(0x17d)])[_0x539ad0(0x175)]()==='open')&&(_0x11246e['type']&&(_0x11246e[_0x539ad0(0x162)][_0x539ad0(0x1a7)](_0x539ad0(0x1c6))||_0x11246e['type'][_0x539ad0(0x1a7)](_0x539ad0(0x179)))&&this[_0x539ad0(0x1c0)](_0x11246e));if(_0x11246e[_0x539ad0(0x162)]===_0x539ad0(0x101)||_0x11246e[_0x539ad0(0x162)]===_0x539ad0(0xc3)){if(this[_0x539ad0(0x1ad)]['energy'])automation[_0x539ad0(0x1ce)](this);}}}async[a0_0x5f1c76(0x19a)](_0x5d1670){const _0x1e02b1=a0_0x5f1c76;if(!this[_0x1e02b1(0x133)]||Date['now']()-this[_0x1e02b1(0xcb)]>0x493e0)return;try{const _0x4c4e6a=JSON[_0x1e02b1(0xcc)](_0x5d1670),_0x20287=this[_0x1e02b1(0x133)]['sources'];let _0x34e885=![];for(const _0x4b0fda in _0x20287){if(_0x20287[_0x4b0fda][_0x1e02b1(0x1a7)]('AI')&&_0x4c4e6a[_0x4b0fda]&&!_0x4c4e6a[_0x4b0fda][_0x1e02b1(0x1a7)]('AI')){_0x34e885=!![];break;}}_0x34e885&&(await this[_0x1e02b1(0x1a1)](_0x1e02b1(0x125),{'val':JSON['stringify'](this[_0x1e02b1(0x133)][_0x1e02b1(0x138)]),'ack':!![]}),await this[_0x1e02b1(0x1a1)](_0x1e02b1(0xf1),{'val':JSON[_0x1e02b1(0x11a)](this['memoryCache'][_0x1e02b1(0xc5)]),'ack':!![]}));}catch(_0x2521fe){}}async['loadSystemMode'](){const _0x1cf14d=a0_0x5f1c76;try{const _0x272500=await this[_0x1cf14d(0x10a)](setup[_0x1cf14d(0xf9)]);if(_0x272500&&_0x272500['val'])this[_0x1cf14d(0x109)]=_0x272500['val'];}catch(_0x233535){this[_0x1cf14d(0x109)]=setup[_0x1cf14d(0xc1)][_0x1cf14d(0x147)];}}async[a0_0x5f1c76(0x1a9)](){return![];}async[a0_0x5f1c76(0x1bc)](){const _0x4408ba=a0_0x5f1c76;await aiAgent['runGeminiAnalysis'](this);this['activeModules'][_0x4408ba(0x19d)]&&(this[_0x4408ba(0x143)](),this[_0x4408ba(0x1b0)]());if(this[_0x4408ba(0x1ad)][_0x4408ba(0x16a)])this[_0x4408ba(0x17e)]();}async[a0_0x5f1c76(0x1a0)](){return![];}[a0_0x5f1c76(0x1b0)](){const _0x43780f=a0_0x5f1c76;if(!this[_0x43780f(0x14c)])return;}async[a0_0x5f1c76(0x17e)](){}[a0_0x5f1c76(0x143)](){}async[a0_0x5f1c76(0x108)](_0x7221ea){}async[a0_0x5f1c76(0x15a)](_0x422345,_0x38cec7){}async[a0_0x5f1c76(0x1c0)](_0x4f5196){}async[a0_0x5f1c76(0xed)](_0x626b37){}[a0_0x5f1c76(0xea)](_0x14ee31){}}if(require['main']!==module)module[a0_0x5f1c76(0x1cc)]=_0x15fd75=>new CogniLiving(_0x15fd75);else new CogniLiving();