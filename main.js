function a0_0x46f0(){const _0x1b0b82=['analysis.automation.patternDetected','LTM.trainingData.sequences','state','Gemini\x20Init\x20Error:\x20','system.mode','trackerHeartbeat','setHours','location','executeAutomationAction','enum.functions.*','Adapter','4080hiNrfD','Verbindung\x20erfolgreich!','callback','json','Reinforcement\x20Learning\x20Penalties','activityLevel','type','Sec-Training\x20started...','testContext','ANOMALY\x20(Real\x20Threat?)','role','analysis.energy.warmupSources','application/json','dailyDigests','setState','getForeignObjectsAsync','TRAIN_COMFORT','protectAiMemory','resetRLPenalty','ANALYZE_TREND','getForeignObjectAsync','fill','./lib/dead_man','cancel','monitorEnforcements','triggerDailyDigest','apply','exports','analysis.security.learningStatus','setupDriftAnalysisScheduler',')\x20-\x20Phase\x20D\x20(Forensic\x20Calibration)','currentSystemMode','getEnums','./lib/recorder','genAI','enum','stringify','isPresent','unshift','infrasoundSensorId','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','entries','getGenerativeModel','string','rawEventLog','subscribeStates','analyzeWindowOpening','updateSchedulePreview','onReady','infrasoundArmingId','warn','value','NORMAL','TRAIN_ENERGY','startService','274LIFywE','namespace','timestamp','length','info','getLtmData','TRAIN_SECURITY','slice','Nuukanni\x20Security','analysisInterval','[Infrasound]\x20ðŸŸ¡\x20Debug-Mode:\x20Alarm\x20detected\x20but\x20suppressed\x20because\x20presence=true.','daswetter.0','main','\x20opened.\x20Peak\x20Pressure:\x20','getOverviewData','analysis.energy.warmupTimes','send','setupLtmScheduler','cleanupGhostInterventions','sonn','magnet','driftAnalysisTimer','./lib/python_bridge','onStateChange','analysis.training.triggerSecurity','from','appendToLog','@google/generative-ai','8385839exbLQE','briefingJob','ltmJob','5179684WIyZwt','analysis.energy.warmupTargets','eventHistory','sensor.door','updated','\x20hPa\x20(Threshold:\x20','analysis.automation.triggerAction','_calName','analysisHistory','[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20','runBaselineDriftAnalysis','val','SYSTEM_DP_MODE','getForeignStateAsync','healthTrendInterval','simulateButler','\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).','analysis.automation.targetValue','keys','./lib/automation','constructor','motion','setupModeResetScheduler','includes','forEach','sendMorningBriefing','instance','error','log','Key\x20not\x20found\x20or\x20not\x20provided','join','onMessage','matrix','analysis.health.gaitDebug','Test','Daten\x20nicht\x20verfÃ¼gbar','VACATION','Sensors\x20used\x20for\x20Gait\x20Analysis','analysis.automation.targetId','runPythonHealthCheck','guest','WiFi\x20Presence\x20detected.','ack','key','5598aVkEnH','abs','dismissAutomation','command','simulateEnergyMPC','Gesendet','sensor.window','infrasoundThreshold','sensorLastValues','sunny','endsWith','getStateAsync','handleInfrasound','getMinutes','33876vCvkQl','Forensic\x20Infrasound\x20Log','getOutsideTemperatureNumeric','triggerBriefing','1429155xGqFOz','sources','Kein\x20Wetter-Adapter','refreshCalendar','ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20','add','LTM.baselineStatus','isProVersion','push','name','@iobroker/adapter-core','notifyTelegramEnabled','memoryCache','infrasoundEnabled','getHours','now','bind','window','ALARM','debug','unload','Instanz\x20nicht\x20gefunden','loadSystemMode','devices','analysis.health.activityTrend','INTERNAL','updateTopologyMatrix','Current.WeatherText','some','floor','LTM.dailyDigests','setStateAsync','filter','notifyPushoverEnabled','ANALYZE_GAIT','Activity-Level','dependencyInstallInProgress','inactivityThresholdHours','text','updateHealthVector','TRACK_EVENT','CALIB','trackerEnabled','analysis.security.infrasoundLog','ready','subscribeForeignStatesAsync','triggerInfrasoundCorrelation','exitGraceTimer','MATCH\x20(False\x20Positive)','licenseKey','createDailyDigest','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','analysis.energy.mpcActive','map','âš ï¸\x20Graph-Brain:\x20No\x20training\x20sequences\x20found\x20in\x20LTM.','TRAIN_HEALTH','checkSolarCondition','number','parse','\x20sequences...','toLowerCase','.communicate.request','â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...','ðŸ§ \x20Graph-Brain:\x20Training\x20Behaviour\x20Matrix\x20based\x20on\x20','onUnload','config','.system.mode','values','cogni-living','./lib/topology','startSystem','calendarInstance','notifyTelegramInstance','models/gemini-flash-latest','geminiModel','analysis.training.triggerEnergy','PYTHON_EXE','checkThermostats','testNotification','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','abortExitTimer','\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.','checkCalendarTriggers','Notification\x20Test\x20Failed:\x20','infrasoundLocked','system.adapter.','klar','toString','2425002kvqpnP','triggerGaitAnalysis','ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20','5VQtzcs','sendTo','initZombies','minutes_safe','bootTime','times','triggerEnergyPrediction','getCalendarNames','reed','analysis.training.status','analysis.training.triggerTopology','telegram','[Forensics]\x20Infrasound\x20Event\x20correlated:\x20','{\x22default\x22:\x2021}','\x20min\x20ausbleiben.','Memory\x20Hydration\x20Failed:\x20','analysis.energy.rlPenalties','sendNotification','find','ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).','split','[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20','calendarName','SET_TOPOLOGY','analysis.training.triggerHealth','message','common','setObjectNotExistsAsync','analysis.automation.description','Party\x20Mode','(((.+)+)+)+$','analysis.energy.activeEnforcements','scanForDevices','Fenster\x20geÃ¶ffnet:\x20','Aktiv\x20(','SYSTEM_MODES','LTM.trainingData.thermodynamics','[Forensics]\x20Save\x20failed:\x20','runGeminiAnalysis','system.presenceWho','[Calibration]\x20Window\x20','ErklÃ¤rt\x20durch:\x20','geminiApiKey','modeResetJob','scanThermostats','updateTopology','pop','pressureBuffer','isSolar','cogni-living\x20adapter\x20starting\x20(v','analysis.trigger','analysisTimer','notifyPushoverInstance','response','\x20Tage)','isGracePeriodActive','analysis.topology.structure','generateContent','door','Gemini\x20AI\x20initialized.','presenceDevices','subscribeForeignStates','7485624nHdvQy','Fehler:\x20','setPresence','getState','object','exitTimer','search','./lib/scheduler','checkWifiPresence','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.'];a0_0x46f0=function(){return _0x1b0b82;};return a0_0x46f0();}const a0_0x52a79b=a0_0xccda;(function(_0x39a9b8,_0x2b00dd){const _0x5bea8a=a0_0xccda,_0x43c946=_0x39a9b8();while(!![]){try{const _0x25d680=parseInt(_0x5bea8a(0x196))/0x1*(parseInt(_0x5bea8a(0x14b))/0x2)+-parseInt(_0x5bea8a(0x1a8))/0x3+parseInt(_0x5bea8a(0x16a))/0x4+parseInt(_0x5bea8a(0xc1))/0x5*(parseInt(_0x5bea8a(0xbe))/0x6)+parseInt(_0x5bea8a(0x167))/0x7+-parseInt(_0x5bea8a(0xff))/0x8+-parseInt(_0x5bea8a(0x1a4))/0x9*(parseInt(_0x5bea8a(0x114))/0xa);if(_0x25d680===_0x2b00dd)break;else _0x43c946['push'](_0x43c946['shift']());}catch(_0x4949e9){_0x43c946['push'](_0x43c946['shift']());}}}(a0_0x46f0,0xaed9f));const a0_0x3dafce=(function(){let _0x1b14f6=!![];return function(_0x272efc,_0xa5c4d5){const _0x3dc5f7=_0x1b14f6?function(){const _0x33852a=a0_0xccda;if(_0xa5c4d5){const _0x15f882=_0xa5c4d5[_0x33852a(0x12e)](_0x272efc,arguments);return _0xa5c4d5=null,_0x15f882;}}:function(){};return _0x1b14f6=![],_0x3dc5f7;};}()),a0_0x1054bf=a0_0x3dafce(this,function(){const _0x2ec57d=a0_0xccda;return a0_0x1054bf['toString']()[_0x2ec57d(0x105)](_0x2ec57d(0xdf))[_0x2ec57d(0xbd)]()[_0x2ec57d(0x17e)](a0_0x1054bf)[_0x2ec57d(0x105)](_0x2ec57d(0xdf));});a0_0x1054bf();'use strict';function a0_0xccda(_0x5a6c6e,_0x3b8f31){const _0x5adfdf=a0_0x46f0();return a0_0xccda=function(_0x1054bf,_0x3dafce){_0x1054bf=_0x1054bf-0xb3;let _0x46f067=_0x5adfdf[_0x1054bf];return _0x46f067;},a0_0xccda(_0x5a6c6e,_0x3b8f31);}const utils=require(a0_0x52a79b(0x1b2)),{GoogleGenerativeAI}=require(a0_0x52a79b(0x166)),installer=require('./lib/installer'),scanner=require('./lib/scanner'),schedulers=require(a0_0x52a79b(0x106)),topology=require(a0_0x52a79b(0x1ed)),setup=require('./lib/setup'),recorder=require(a0_0x52a79b(0x135)),pythonBridge=require(a0_0x52a79b(0x161)),aiAgent=require('./lib/ai_agent'),deadMan=require(a0_0x52a79b(0x12a)),automation=require(a0_0x52a79b(0x17d)),GEMINI_MODEL=a0_0x52a79b(0x1f1),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x52a79b(0x113)]{constructor(_0x1db605){const _0x322479=a0_0x52a79b;super({..._0x1db605,'name':_0x322479(0x1ec)}),this[_0x322479(0x16c)]=[],this[_0x322479(0x172)]=[],this['rawEventLog']=[],this[_0x322479(0x121)]=[],this[_0x322479(0x19e)]={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x322479(0x139)]=!![],this[_0x322479(0x104)]=null,this[_0x322479(0x1d7)]=null,this[_0x322479(0xf8)]=![],this['genAI']=null,this[_0x322479(0x1f2)]=null,this[_0x322479(0x133)]=setup[_0x322479(0xe4)][_0x322479(0x148)],this['isProVersion']=![],this['lastAlertState']=![],this[_0x322479(0xf4)]=null,this[_0x322479(0x169)]=null,this[_0x322479(0xec)]=null,this[_0x322479(0x160)]=null,this[_0x322479(0x168)]=null,this[_0x322479(0x10e)]=null,this[_0x322479(0x178)]=null,this[_0x322479(0x1cc)]=![],this['lastTrackerEventTime']=Date['now'](),this[_0x322479(0x1b4)]=null,this['bootTime']=Date['now'](),this[_0x322479(0xba)]=![],this[_0x322479(0xf0)]=[],this['on'](_0x322479(0x1d4),this[_0x322479(0x144)]['bind'](this)),this['on']('stateChange',this[_0x322479(0x162)][_0x322479(0x1b8)](this)),this['on'](_0x322479(0x1bc),this[_0x322479(0x1e8)][_0x322479(0x1b8)](this)),this['on'](_0x322479(0xda),this[_0x322479(0x189)][_0x322479(0x1b8)](this));}async['onReady'](){const _0xa69960=a0_0x52a79b;this[_0xa69960(0x186)][_0xa69960(0x14f)](_0xa69960(0xf2)+this['version']+_0xa69960(0x132));if(!installer['checkAndInstall'](this,()=>this[_0xa69960(0x1ee)]()))return;}async[a0_0x52a79b(0x1ee)](){const _0x39aef7=a0_0x52a79b;await setup[_0x39aef7(0xc3)](this);try{this[_0x39aef7(0x1af)]=await setup['checkLicense'](this[_0x39aef7(0x1e9)][_0x39aef7(0x1d9)]);}catch(_0x22182c){}if(!this[_0x39aef7(0x1e9)][_0x39aef7(0x1cd)]||this[_0x39aef7(0x1e9)][_0x39aef7(0x1cd)]<0.1)this[_0x39aef7(0x1e9)][_0x39aef7(0x1cd)]=0xc;await setup['initHistory'](this),await setup['initSystemConfig'](this);try{const _0x11b794=await this[_0x39aef7(0x1a1)](_0x39aef7(0x15a)),_0x10896f=await this['getStateAsync']('analysis.energy.warmupSources');_0x11b794&&_0x11b794[_0x39aef7(0x175)]&&_0x10896f&&_0x10896f[_0x39aef7(0x175)]&&(Date[_0x39aef7(0x1b7)]()-_0x11b794['ts']<0x4*0xe10*0x3e8&&(this['memoryCache']={'times':JSON['parse'](_0x11b794[_0x39aef7(0x175)]),'sources':JSON[_0x39aef7(0x1e2)](_0x10896f[_0x39aef7(0x175)])},this[_0x39aef7(0x186)][_0x39aef7(0x14f)](_0x39aef7(0xc0)+Object[_0x39aef7(0x17c)](this[_0x39aef7(0x1b4)][_0x39aef7(0xc6)])[_0x39aef7(0x14e)]+_0x39aef7(0x17a))));}catch(_0x91b0a6){this[_0x39aef7(0x186)][_0x39aef7(0x146)](_0x39aef7(0xd0)+_0x91b0a6[_0x39aef7(0xda)]);}if(this[_0x39aef7(0x1e9)][_0x39aef7(0xeb)])try{this[_0x39aef7(0x136)]=new GoogleGenerativeAI(this[_0x39aef7(0x1e9)][_0x39aef7(0xeb)]),this['geminiModel']=this[_0x39aef7(0x136)][_0x39aef7(0x13e)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x39aef7(0x120)}}),this[_0x39aef7(0x186)][_0x39aef7(0x14f)](_0x39aef7(0xfc));}catch(_0x13dd6f){this[_0x39aef7(0x186)]['error'](_0x39aef7(0x10c)+_0x13dd6f[_0x39aef7(0xda)]);}await setup['createAllObjects'](this),await this[_0x39aef7(0x1be)](),await this['setObjectNotExistsAsync']('analysis.energy.pinnForecast',{'type':'state','common':{'name':'PINN\x20AI\x20Forecast','type':_0x39aef7(0x13f),'role':_0x39aef7(0x117),'read':!![],'write':![]},'native':{}}),await this[_0x39aef7(0xdc)]('analysis.energy.ventilationAlerts',{'type':_0x39aef7(0x10b),'common':{'name':'Active\x20Ventilation\x20Alerts','type':_0x39aef7(0x13f),'role':_0x39aef7(0x117),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x39aef7(0x15a),{'type':'state','common':{'name':_0x39aef7(0xb5),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await this[_0x39aef7(0xdc)]('analysis.energy.warmupTargets',{'type':_0x39aef7(0x10b),'common':{'name':'Warm-Up\x20Target\x20Temps\x20(JSON)','type':_0x39aef7(0x13f),'role':_0x39aef7(0x117),'read':!![],'write':!![],'def':_0x39aef7(0xce)},'native':{}}),await this[_0x39aef7(0xdc)](_0x39aef7(0xd1),{'type':'state','common':{'name':_0x39aef7(0x118),'type':_0x39aef7(0x13f),'role':'json','read':!![],'write':![],'def':'{}'},'native':{}}),await this[_0x39aef7(0xdc)](_0x39aef7(0x1c0),{'type':_0x39aef7(0x10b),'common':{'name':'General\x20Activity\x20Trend\x20(%)','type':_0x39aef7(0x1e1),'role':_0x39aef7(0x147),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x39aef7(0xdc)]('analysis.health.gaitSensors',{'type':'state','common':{'name':_0x39aef7(0x18f),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await this[_0x39aef7(0xdc)](_0x39aef7(0xe0),{'type':'state','common':{'name':'Active\x20Calendar\x20Enforcements\x20(Locks)','type':_0x39aef7(0x13f),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x39aef7(0xdc)](_0x39aef7(0x1d3),{'type':_0x39aef7(0x10b),'common':{'name':_0x39aef7(0x1a5),'type':_0x39aef7(0x13f),'role':_0x39aef7(0x117),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x39aef7(0xdc)](_0x39aef7(0x18b),{'type':'state','common':{'name':'Gait\x20Speed\x20Calculation\x20Proof','type':_0x39aef7(0x13f),'role':'text','read':!![],'write':![]},'native':{}});try{const _0x4bede3=await this['getStateAsync']('LTM.rawEventLog');if(_0x4bede3&&_0x4bede3[_0x39aef7(0x175)])this[_0x39aef7(0x140)]=JSON['parse'](_0x4bede3['val']);}catch(_0xaf683c){this[_0x39aef7(0x140)]=[];}try{const _0x8a5682=await this['getStateAsync'](_0x39aef7(0x1c6));if(_0x8a5682&&_0x8a5682[_0x39aef7(0x175)])this[_0x39aef7(0x121)]=JSON['parse'](_0x8a5682['val']);}catch(_0x24f65a){this[_0x39aef7(0x121)]=[];}const _0x1aac31=this[_0x39aef7(0x121)][_0x39aef7(0x14e)]>=(this[_0x39aef7(0x1e9)]['minDaysForBaseline']||0x7)?_0x39aef7(0xe3)+this[_0x39aef7(0x121)][_0x39aef7(0x14e)]+_0x39aef7(0xf7):'Lernphase\x20('+this[_0x39aef7(0x121)][_0x39aef7(0x14e)]+'/'+(this[_0x39aef7(0x1e9)]['minDaysForBaseline']||0x7)+')';await this[_0x39aef7(0x1c7)](_0x39aef7(0x1ae),{'val':_0x1aac31,'ack':!![]}),this['subscribeStates'](_0x39aef7(0xf3)),this[_0x39aef7(0x141)]('LTM.triggerDailyDigest'),this['subscribeStates'](_0x39aef7(0x10d)),this[_0x39aef7(0x141)]('analysis.triggerBriefing'),this[_0x39aef7(0x141)](_0x39aef7(0x170)),this[_0x39aef7(0x141)]('analysis.automation.autoApply'),this[_0x39aef7(0x141)](_0x39aef7(0x163)),this[_0x39aef7(0x141)](_0x39aef7(0xd9)),this['subscribeStates'](_0x39aef7(0x1f3)),this[_0x39aef7(0x141)]('analysis.training.triggerComfort'),this[_0x39aef7(0x141)](_0x39aef7(0xcb)),this[_0x39aef7(0x141)](_0x39aef7(0x1dc)),this[_0x39aef7(0x141)]('analysis.energy.warmupSources');this['config'][_0x39aef7(0x1b5)]&&this[_0x39aef7(0x1e9)][_0x39aef7(0x13b)]&&(this[_0x39aef7(0x186)][_0x39aef7(0x14f)](_0x39aef7(0xd6)+this[_0x39aef7(0x1e9)][_0x39aef7(0x13b)]),this[_0x39aef7(0xfe)](this['config'][_0x39aef7(0x13b)]));const _0x5c44eb=this[_0x39aef7(0x1e9)]['devices'];if(_0x5c44eb)for(const _0xe5114e of _0x5c44eb){await this[_0x39aef7(0x1d5)](_0xe5114e['id']);}const _0x11eff4=this['config'][_0x39aef7(0xfd)];if(_0x11eff4)for(const _0x55b7ed of _0x11eff4){await this[_0x39aef7(0x1d5)](_0x55b7ed);}if(this['config'][_0x39aef7(0x1b3)]&&this[_0x39aef7(0x1e9)][_0x39aef7(0x1f0)])await this[_0x39aef7(0x1d5)](this['config'][_0x39aef7(0x1f0)]+_0x39aef7(0x1e5));setTimeout(()=>this[_0x39aef7(0x107)](),0x1388);if(this[_0x39aef7(0xf4)])clearInterval(this[_0x39aef7(0xf4)]);const _0x3e6a4c=this[_0x39aef7(0x1e9)][_0x39aef7(0x154)]||0xf;_0x3e6a4c>0x0&&(this[_0x39aef7(0xf4)]=setInterval(()=>{const _0x38871c=_0x39aef7;this['runAutopilot'](),automation[_0x38871c(0xb8)](this),automation[_0x38871c(0x12c)](this);},_0x3e6a4c*0x3c*0x3e8));setTimeout(()=>{const _0x3d86bc=_0x39aef7;automation[_0x3d86bc(0xb8)](this),automation['monitorEnforcements'](this);},0x2710);this[_0x39aef7(0x1e9)][_0x39aef7(0x1d2)]!==![]&&(this['trackerHeartbeat']=setInterval(()=>{const _0x54416c=_0x39aef7;if(this['isProVersion']){const _0x41f1d6=Date['now'](),_0x7c2d18=this['lastTrackerEventTime']||_0x41f1d6,_0x571924=(_0x41f1d6-_0x7c2d18)/0x3e8;_0x571924>0x2&&(this['lastTrackerEventTime']=_0x41f1d6,pythonBridge['send'](this,_0x54416c(0x1d0),{'room':null,'dt':_0x571924}));}},0xbb8));if(this[_0x39aef7(0x178)])clearInterval(this['healthTrendInterval']);this[_0x39aef7(0x178)]=setInterval(()=>{const _0x3a2fd8=_0x39aef7;this[_0x3a2fd8(0x1af)]&&(this[_0x3a2fd8(0x186)]['info'](_0x3a2fd8(0x1e6)),this[_0x3a2fd8(0x191)]());},0x4*0x3c*0x3c*0x3e8),schedulers[_0x39aef7(0x15c)](this,()=>aiAgent[_0x39aef7(0x1da)](this,pythonBridge)),schedulers[_0x39aef7(0x180)](this),schedulers[_0x39aef7(0x131)](this,()=>aiAgent[_0x39aef7(0x174)](this)),schedulers['setupBriefingScheduler'](this,()=>aiAgent[_0x39aef7(0x183)](this)),pythonBridge[_0x39aef7(0x14a)](this,installer[_0x39aef7(0x1f4)]),setTimeout(async()=>{const _0x303023=_0x39aef7;await topology[_0x303023(0xee)](this);try{const _0xc995bd=await this[_0x303023(0x1a1)](_0x303023(0xf9));if(_0xc995bd&&_0xc995bd[_0x303023(0x175)])pythonBridge[_0x303023(0x15b)](this,_0x303023(0xd8),JSON['parse'](_0xc995bd[_0x303023(0x175)]));}catch(_0x446e8e){}this[_0x303023(0x191)](),this[_0x303023(0xbf)](),this[_0x303023(0xc7)](),this['updateHealthVector']();},0x1388);}[a0_0x52a79b(0x1e8)](_0x2fcde9){const _0x114635=a0_0x52a79b;if(this[_0x114635(0xf4)])clearInterval(this[_0x114635(0xf4)]);if(this[_0x114635(0x160)])clearInterval(this[_0x114635(0x160)]);if(this[_0x114635(0x10e)])clearInterval(this[_0x114635(0x10e)]);if(this[_0x114635(0x178)])clearInterval(this[_0x114635(0x178)]);if(this[_0x114635(0x169)])this[_0x114635(0x169)][_0x114635(0x12b)]();if(this[_0x114635(0xec)])this['modeResetJob'][_0x114635(0x12b)]();if(this[_0x114635(0x168)])this[_0x114635(0x168)][_0x114635(0x12b)]();recorder['abortExitTimer'](this),pythonBridge['stopService'](this),_0x2fcde9();}async[a0_0x52a79b(0x162)](_0x7d48ba,_0x251907){const _0x5d0e18=a0_0x52a79b;if(!_0x251907||this['dependencyInstallInProgress'])return;if(_0x7d48ba[_0x5d0e18(0x181)](_0x5d0e18(0xcc))&&_0x7d48ba[_0x5d0e18(0x1a0)]('communicate.request')&&_0x251907[_0x5d0e18(0x175)])return;if(this['config'][_0x5d0e18(0x1b5)]&&_0x7d48ba===this[_0x5d0e18(0x1e9)]['infrasoundSensorId']){this[_0x5d0e18(0x1a2)](_0x251907['val']);return;}if(_0x7d48ba===this[_0x5d0e18(0x14c)]+_0x5d0e18(0x1ea)){if(_0x251907[_0x5d0e18(0x175)]&&Object[_0x5d0e18(0x1eb)](setup['SYSTEM_MODES'])['includes'](_0x251907[_0x5d0e18(0x175)])){this[_0x5d0e18(0x133)]=_0x251907['val'];if(_0x251907[_0x5d0e18(0x175)]===setup['SYSTEM_MODES'][_0x5d0e18(0x18e)])await recorder[_0x5d0e18(0x101)](this,![]);else await recorder['setPresence'](this,!![]);if(this['isProVersion']){let _0x217e61=![],_0x2ff652=0x0,_0x49df68='manual';if(this['currentSystemMode']==='party')_0x217e61=!![],_0x2ff652=0x168,_0x49df68=_0x5d0e18(0xde);else this[_0x5d0e18(0x133)]===_0x5d0e18(0x192)&&(_0x217e61=!![],_0x2ff652=0x5a0,_0x49df68='Guest\x20Mode');pythonBridge[_0x5d0e18(0x15b)](this,'SET_LEARNING_MODE',{'active':_0x217e61,'duration':_0x2ff652,'label':_0x49df68}),await this[_0x5d0e18(0x1c7)](_0x5d0e18(0x130),{'val':JSON[_0x5d0e18(0x138)]({'active':_0x217e61,'label':_0x49df68,'timestamp':Date[_0x5d0e18(0x1b7)]()}),'ack':!![]});}}if(!_0x251907[_0x5d0e18(0x194)])this[_0x5d0e18(0x122)](_0x7d48ba,{'val':this['currentSystemMode'],'ack':!![]});return;}_0x7d48ba[_0x5d0e18(0x1a0)](_0x5d0e18(0x11f))&&_0x251907[_0x5d0e18(0x194)]&&this[_0x5d0e18(0x125)](_0x251907[_0x5d0e18(0x175)]);if(!_0x251907[_0x5d0e18(0x194)]){if(_0x7d48ba[_0x5d0e18(0x181)](_0x5d0e18(0xf3))&&_0x251907[_0x5d0e18(0x175)]){this[_0x5d0e18(0x122)](_0x7d48ba,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this);return;}if(_0x7d48ba[_0x5d0e18(0x181)](_0x5d0e18(0x12d))&&_0x251907[_0x5d0e18(0x175)]){this[_0x5d0e18(0x122)](_0x7d48ba,{'val':![],'ack':!![]});if(this[_0x5d0e18(0x1af)])aiAgent[_0x5d0e18(0x1da)](this,pythonBridge);return;}if(_0x7d48ba[_0x5d0e18(0x181)](_0x5d0e18(0x1a7))&&_0x251907[_0x5d0e18(0x175)]){this['setState'](_0x7d48ba,{'val':![],'ack':!![]}),aiAgent[_0x5d0e18(0x183)](this);return;}if(_0x7d48ba['includes']('automation.triggerAction')&&_0x251907[_0x5d0e18(0x175)]){this[_0x5d0e18(0x122)](_0x7d48ba,{'val':![],'ack':!![]}),aiAgent[_0x5d0e18(0x111)](this);return;}if(_0x7d48ba['includes']('analysis.training.triggerSecurity')&&_0x251907['val']){this[_0x5d0e18(0x122)](_0x7d48ba,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x80b1f7=await this[_0x5d0e18(0x1a1)]('LTM.trainingData.sequences');if(_0x80b1f7&&_0x80b1f7[_0x5d0e18(0x175)]){const _0x3272b1=JSON[_0x5d0e18(0x1e2)](_0x80b1f7[_0x5d0e18(0x175)]);this[_0x5d0e18(0x1c7)](_0x5d0e18(0xca),{'val':_0x5d0e18(0x11b),'ack':!![]}),pythonBridge[_0x5d0e18(0x15b)](this,_0x5d0e18(0x151),{'sequences':_0x3272b1});}}catch(_0x561d41){}return;}if(_0x7d48ba[_0x5d0e18(0x181)](_0x5d0e18(0xd9))&&_0x251907[_0x5d0e18(0x175)]){this[_0x5d0e18(0x122)](_0x7d48ba,{'val':![],'ack':!![]});if(this[_0x5d0e18(0x1af)])try{const _0x22a5c4=await this['getStateAsync'](_0x5d0e18(0x1c6));if(_0x22a5c4&&_0x22a5c4['val'])pythonBridge[_0x5d0e18(0x15b)](this,_0x5d0e18(0x1df),{'digests':JSON[_0x5d0e18(0x1e2)](_0x22a5c4['val'])});}catch(_0x201a9d){}return;}if(_0x7d48ba['includes'](_0x5d0e18(0x1f3))&&_0x251907['val']){this['setState'](_0x7d48ba,{'val':![],'ack':!![]});if(this[_0x5d0e18(0x1af)])try{const _0x2392c1=await this[_0x5d0e18(0x1a1)](_0x5d0e18(0xe5));if(_0x2392c1&&_0x2392c1[_0x5d0e18(0x175)])pythonBridge[_0x5d0e18(0x15b)](this,_0x5d0e18(0x149),{'points':JSON[_0x5d0e18(0x1e2)](_0x2392c1[_0x5d0e18(0x175)])});}catch(_0x503c7d){}return;}if(_0x7d48ba[_0x5d0e18(0x181)]('analysis.training.triggerComfort')&&_0x251907['val']){this['setState'](_0x7d48ba,{'val':![],'ack':!![]});if(this[_0x5d0e18(0x1af)])try{const _0x534cfe=await this[_0x5d0e18(0x1a1)]('LTM.rawEventLog');if(_0x534cfe&&_0x534cfe[_0x5d0e18(0x175)])pythonBridge['send'](this,_0x5d0e18(0x124),{'events':JSON['parse'](_0x534cfe['val'])});}catch(_0x564e5e){}return;}if(_0x7d48ba[_0x5d0e18(0x181)](_0x5d0e18(0xcb))&&_0x251907[_0x5d0e18(0x175)]){this['setState'](_0x7d48ba,{'val':![],'ack':!![]}),topology[_0x5d0e18(0xee)](this);if(this[_0x5d0e18(0x1af)])try{const _0x27802e=await this['getStateAsync'](_0x5d0e18(0x10a));if(_0x27802e&&_0x27802e[_0x5d0e18(0x175)]){const _0x3a4eed=JSON[_0x5d0e18(0x1e2)](_0x27802e[_0x5d0e18(0x175)]);this[_0x5d0e18(0x186)][_0x5d0e18(0x14f)](_0x5d0e18(0x1e7)+_0x3a4eed[_0x5d0e18(0x14e)]+_0x5d0e18(0x1e3)),pythonBridge['send'](this,'TRAIN_TOPOLOGY',{'sequences':_0x3a4eed});}else this[_0x5d0e18(0x186)][_0x5d0e18(0x146)](_0x5d0e18(0x1de));}catch(_0x49fede){this[_0x5d0e18(0x186)][_0x5d0e18(0x185)]('Graph-Brain\x20Train\x20Error:\x20'+_0x49fede['message']);}return;}}if(this[_0x5d0e18(0x1e9)][_0x5d0e18(0xfd)]&&this[_0x5d0e18(0x1e9)][_0x5d0e18(0xfd)][_0x5d0e18(0x181)](_0x7d48ba)){await this['checkWifiPresence']();return;}const _0x4edd6e=(this[_0x5d0e18(0x1e9)][_0x5d0e18(0x1bf)]||[])[_0x5d0e18(0xd3)](_0x2ba589=>_0x2ba589['id']===_0x7d48ba);if(_0x4edd6e){const _0x45f22b=await recorder['processSensorEvent'](this,_0x7d48ba,_0x251907,_0x4edd6e);_0x45f22b&&_0x45f22b[_0x5d0e18(0x11a)]===_0x5d0e18(0x17f)&&_0x45f22b[_0x5d0e18(0x110)]&&this[_0x5d0e18(0x1af)]&&deadMan['updateLocation'](this,_0x45f22b[_0x5d0e18(0x110)]),_0x251907['val']&&(_0x251907[_0x5d0e18(0x175)]===!![]||_0x251907['val']===0x1||String(_0x251907[_0x5d0e18(0x175)])[_0x5d0e18(0x1e4)]()==='open')&&(_0x4edd6e[_0x5d0e18(0x11a)]&&(_0x4edd6e[_0x5d0e18(0x11a)][_0x5d0e18(0x181)](_0x5d0e18(0x1b9))||_0x4edd6e[_0x5d0e18(0x11a)][_0x5d0e18(0x181)](_0x5d0e18(0xfb))||_0x4edd6e[_0x5d0e18(0x11a)][_0x5d0e18(0x181)](_0x5d0e18(0x15f)))&&this[_0x5d0e18(0x142)](_0x4edd6e)),(_0x4edd6e[_0x5d0e18(0x11a)]==='temperature'||_0x4edd6e[_0x5d0e18(0x11a)]==='thermostat')&&automation[_0x5d0e18(0x15d)](this);}}async[a0_0x52a79b(0x125)](_0x52367b){const _0x3b34c6=a0_0x52a79b;if(!this[_0x3b34c6(0x1b4)]||Date[_0x3b34c6(0x1b7)]()-this[_0x3b34c6(0xc5)]>0x493e0)return;if(!this[_0x3b34c6(0x1b4)]['sources']||!this[_0x3b34c6(0x1b4)][_0x3b34c6(0xc6)])return;try{const _0x4ad324=JSON[_0x3b34c6(0x1e2)](_0x52367b),_0x1f52a9=this[_0x3b34c6(0x1b4)][_0x3b34c6(0x1a9)];let _0x4af84e=![];for(const _0x2a8ff7 in _0x1f52a9){if(_0x1f52a9[_0x2a8ff7][_0x3b34c6(0x181)]('AI')&&_0x4ad324[_0x2a8ff7]&&!_0x4ad324[_0x2a8ff7][_0x3b34c6(0x181)]('AI')){_0x4af84e=!![];break;}}_0x4af84e&&(this[_0x3b34c6(0x186)]['info'](_0x3b34c6(0xd4)),await this[_0x3b34c6(0x1c7)](_0x3b34c6(0x15a),{'val':JSON[_0x3b34c6(0x138)](this[_0x3b34c6(0x1b4)][_0x3b34c6(0xc6)]),'ack':!![]}),await this[_0x3b34c6(0x1c7)](_0x3b34c6(0x11f),{'val':JSON['stringify'](this['memoryCache'][_0x3b34c6(0x1a9)]),'ack':!![]}));}catch(_0x19580b){}}async[a0_0x52a79b(0x189)](_0x546213){const _0x3890de=a0_0x52a79b;if(typeof _0x546213===_0x3890de(0x103)&&_0x546213[_0x3890de(0xda)]){if(_0x546213[_0x3890de(0x199)]===_0x3890de(0xb3))try{const _0x178420=await automation[_0x3890de(0xed)](this);this[_0x3890de(0xc2)](_0x546213[_0x3890de(0x164)],_0x546213[_0x3890de(0x199)],{'success':!![],'results':_0x178420},_0x546213[_0x3890de(0x116)]);}catch(_0x26bf13){this[_0x3890de(0xc2)](_0x546213[_0x3890de(0x164)],_0x546213[_0x3890de(0x199)],{'success':![],'error':_0x26bf13['message']},_0x546213[_0x3890de(0x116)]);}else{if(_0x546213[_0x3890de(0x199)]===_0x3890de(0x19a))try{const {current_temps:_0x515361,t_out:_0x46af65,targets:_0x2baa0d,t_forecast:_0x46aa51}=_0x546213[_0x3890de(0xda)],_0x2b630d=[];let _0x8bface={};try{const _0x2a6d9c=await this['getStateAsync']('analysis.energy.insulationScore');if(_0x2a6d9c&&_0x2a6d9c[_0x3890de(0x175)]){const _0x2339aa=JSON[_0x3890de(0x1e2)](_0x2a6d9c[_0x3890de(0x175)]);_0x8bface=_0x2339aa['scores']||_0x2339aa;}}catch(_0x299b08){}const _0x1916c3=_0x46aa51!==undefined&&_0x46aa51!==null?(_0x46af65+_0x46aa51)/0x2:_0x46af65;for(const [_0x59595a,_0x3754a1]of Object[_0x3890de(0x13d)](_0x515361)){const _0x4d693c=_0x2baa0d[_0x59595a]||0x15;if(_0x3754a1<=_0x4d693c)continue;let _0x3ec3b2=_0x8bface[_0x59595a]||-0.5;if(_0x3ec3b2>=0x0)_0x3ec3b2=-0.5;const _0x4b7154=Math[_0x3890de(0x197)](_0x3ec3b2),_0x252ee8=_0x3754a1-_0x4d693c;let _0x489d46=Math[_0x3890de(0x1c5)](_0x252ee8/_0x4b7154*0x3c);const _0x42d5c4=_0x3754a1-_0x46af65,_0x404985=_0x3754a1-_0x1916c3;if(_0x404985!==0x0&&_0x42d5c4!==0x0){const _0x7c4bba=_0x42d5c4/_0x404985;_0x489d46=Math[_0x3890de(0x1c5)](_0x489d46*_0x7c4bba);}if(_0x489d46>0xf){if(_0x489d46>0xf0)_0x489d46=0xf0;_0x2b630d[_0x3890de(0x1b0)]({'room':_0x59595a,'minutes_safe':_0x489d46,'target':_0x4d693c,'current':_0x3754a1,'savings_msg':'Heizung\x20kann\x20'+_0x489d46+_0x3890de(0xcf)});}}_0x2b630d['sort']((_0x335372,_0x23f205)=>_0x23f205[_0x3890de(0xc4)]-_0x335372[_0x3890de(0xc4)]),this[_0x3890de(0xc2)](_0x546213[_0x3890de(0x164)],_0x546213[_0x3890de(0x199)],{'success':!![],'proposals':_0x2b630d},_0x546213[_0x3890de(0x116)]);}catch(_0x40a6ec){this[_0x3890de(0xc2)](_0x546213[_0x3890de(0x164)],_0x546213[_0x3890de(0x199)],{'success':![],'error':_0x40a6ec['message']},_0x546213[_0x3890de(0x116)]);}else{if(_0x546213[_0x3890de(0x199)]===_0x3890de(0x1ab))try{await automation[_0x3890de(0x143)](this),this[_0x3890de(0xc2)](_0x546213[_0x3890de(0x164)],_0x546213[_0x3890de(0x199)],{'success':!![]},_0x546213['callback']);}catch(_0x48c15e){this[_0x3890de(0xc2)](_0x546213[_0x3890de(0x164)],_0x546213[_0x3890de(0x199)],{'success':![],'error':_0x48c15e[_0x3890de(0xda)]},_0x546213['callback']);}else{if(_0x546213[_0x3890de(0x199)]===_0x3890de(0x126))try{const _0x418b3f=_0x546213['message'][_0x3890de(0x195)],_0x237600=_0x3890de(0xd1),_0x524c11=await this[_0x3890de(0x1a1)](_0x237600);let _0x597166={};if(_0x524c11&&_0x524c11['val'])try{_0x597166=JSON['parse'](_0x524c11['val']);}catch(_0x220bf7){}_0x418b3f&&_0x597166[_0x418b3f]?(delete _0x597166[_0x418b3f],await this[_0x3890de(0x1c7)](_0x237600,{'val':JSON[_0x3890de(0x138)](_0x597166),'ack':!![]}),this[_0x3890de(0x186)][_0x3890de(0x14f)](_0x3890de(0x1db)+_0x418b3f+_0x3890de(0xb7)),this['sendTo'](_0x546213[_0x3890de(0x164)],_0x546213[_0x3890de(0x199)],{'success':!![]},_0x546213[_0x3890de(0x116)])):this[_0x3890de(0xc2)](_0x546213[_0x3890de(0x164)],_0x546213[_0x3890de(0x199)],{'success':![],'error':_0x3890de(0x187)},_0x546213['callback']);}catch(_0x432ae4){this[_0x3890de(0xc2)](_0x546213[_0x3890de(0x164)],_0x546213[_0x3890de(0x199)],{'success':![],'error':_0x432ae4[_0x3890de(0xda)]},_0x546213[_0x3890de(0x116)]);}else{if(_0x546213[_0x3890de(0x199)]===_0x3890de(0x198))await this[_0x3890de(0x1c7)](_0x3890de(0x109),{'val':![],'ack':!![]}),await this[_0x3890de(0x1c7)](_0x3890de(0xdd),{'val':'','ack':!![]}),await this[_0x3890de(0x1c7)](_0x3890de(0x190),{'val':'','ack':!![]}),this['sendTo'](_0x546213['from'],_0x546213[_0x3890de(0x199)],{'success':!![]},_0x546213[_0x3890de(0x116)]);else{if(_0x546213['command']===_0x3890de(0x179)){const {targetId:_0x46fb14,targetValue:_0x10d3b0}=_0x546213[_0x3890de(0xda)];await this[_0x3890de(0x1c7)](_0x3890de(0x109),{'val':!![],'ack':!![]}),await this['setStateAsync'](_0x3890de(0xdd),{'val':'Simulation\x20durch\x20Admin\x20(Test)','ack':!![]}),await this['setStateAsync'](_0x3890de(0x190),{'val':_0x46fb14,'ack':!![]}),await this[_0x3890de(0x1c7)]('analysis.automation.targetValue',{'val':String(_0x10d3b0),'ack':!![]}),this['sendTo'](_0x546213[_0x3890de(0x164)],_0x546213['command'],{'success':!![]},_0x546213['callback']);}else{if(_0x546213[_0x3890de(0x199)]==='testApiKey')try{const _0x41db3b=_0x546213[_0x3890de(0xda)]['apiKey'];if(!_0x41db3b)throw new Error('Kein\x20API\x20Key\x20Ã¼bergeben');const _0x471ef1=new GoogleGenerativeAI(_0x41db3b),_0x4a287c=_0x471ef1['getGenerativeModel']({'model':GEMINI_MODEL}),_0x28389d=await _0x4a287c[_0x3890de(0xfa)](_0x3890de(0x18c)),_0x12a92b=await _0x28389d[_0x3890de(0xf6)];if(_0x12a92b[_0x3890de(0x1ce)]())this['sendTo'](_0x546213['from'],_0x546213['command'],{'success':!![],'message':_0x3890de(0x115)},_0x546213['callback']);else throw new Error('Keine\x20Antwort\x20von\x20Gemini');}catch(_0xe8ebb8){this[_0x3890de(0xc2)](_0x546213[_0x3890de(0x164)],_0x546213['command'],{'success':![],'message':_0xe8ebb8['message']},_0x546213[_0x3890de(0x116)]);}else{if(_0x546213[_0x3890de(0x199)]==='scanDevices')try{const _0x4879ed=await scanner[_0x3890de(0xe1)](this,_0x546213[_0x3890de(0xda)]||{});this['sendTo'](_0x546213[_0x3890de(0x164)],_0x546213[_0x3890de(0x199)],{'success':!![],'devices':_0x4879ed},_0x546213[_0x3890de(0x116)]);}catch(_0x167c4a){this[_0x3890de(0xc2)](_0x546213['from'],_0x546213[_0x3890de(0x199)],{'success':![],'error':_0x167c4a['message']},_0x546213[_0x3890de(0x116)]);}else{if(_0x546213['command']===_0x3890de(0x1c2))try{const {matrix:_0x5c8c7a}=_0x546213[_0x3890de(0xda)],_0x5128e4=await this['getStateAsync'](_0x3890de(0xf9));if(_0x5128e4&&_0x5128e4[_0x3890de(0x175)]){const _0x42ba0e=JSON['parse'](_0x5128e4[_0x3890de(0x175)]);_0x42ba0e[_0x3890de(0x18a)]=_0x5c8c7a,_0x42ba0e[_0x3890de(0x16e)]=Date[_0x3890de(0x1b7)](),await this[_0x3890de(0x1c7)]('analysis.topology.structure',{'val':JSON[_0x3890de(0x138)](_0x42ba0e),'ack':!![]}),pythonBridge[_0x3890de(0x15b)](this,_0x3890de(0xd8),_0x42ba0e);}this['sendTo'](_0x546213[_0x3890de(0x164)],_0x546213[_0x3890de(0x199)],{'success':!![]},_0x546213['callback']);}catch(_0x4fb741){this['log'][_0x3890de(0x185)](_0x4fb741);}else{if(_0x546213[_0x3890de(0x199)]===_0x3890de(0x150))this[_0x3890de(0xc2)](_0x546213['from'],_0x546213['command'],{'success':!![],'dailyDigests':this['dailyDigests']||[],'analysisHistory':this['analysisHistory']||[]},_0x546213[_0x3890de(0x116)]);else{if(_0x546213[_0x3890de(0x199)]===_0x3890de(0x159)){const _0x28ac85=this[_0x3890de(0x121)][_0x3890de(0x14e)],_0x83df0b=new Array(0x18)[_0x3890de(0x129)](0x0),_0x5f3921=new Date()['setHours'](0x0,0x0,0x0,0x0);this['eventHistory']&&this[_0x3890de(0x16c)][_0x3890de(0x182)](_0x39aa40=>{const _0x304a43=_0x3890de;if(_0x39aa40[_0x304a43(0x14d)]>=_0x5f3921){const _0x489983=new Date(_0x39aa40['timestamp'])[_0x304a43(0x1b6)]();if(_0x489983>=0x0&&_0x489983<0x18)_0x83df0b[_0x489983]++;}});let _0xf22f56=![],_0x28b6ce='',_0xb3d430='',_0x464b13='';try{const _0x51f017=await this[_0x3890de(0x1a1)](_0x3890de(0x109));if(_0x51f017&&_0x51f017[_0x3890de(0x175)]){_0xf22f56=!![];const _0x3fe36a=await this[_0x3890de(0x1a1)](_0x3890de(0xdd));_0x28b6ce=_0x3fe36a?_0x3fe36a[_0x3890de(0x175)]:'';const _0x4bbe7a=await this[_0x3890de(0x1a1)](_0x3890de(0x190));_0xb3d430=_0x4bbe7a?_0x4bbe7a[_0x3890de(0x175)]:'';const _0x240b9e=await this[_0x3890de(0x1a1)](_0x3890de(0x17b));_0x464b13=_0x240b9e?_0x240b9e[_0x3890de(0x175)]:'';}}catch(_0x5455eb){}const _0x4bbad0=await this[_0x3890de(0x1e0)](),_0x5e07c4=(this[_0x3890de(0x1e9)]['devices']||[])[_0x3890de(0x1c4)](_0x17ac51=>_0x17ac51[_0x3890de(0xf1)]),_0x1e9fbe=_0x4bbad0&&_0x5e07c4;let _0x28cc3b='';try{const _0x3cb107=await this[_0x3890de(0x1a1)](_0x3890de(0xe8));if(_0x3cb107&&_0x3cb107[_0x3890de(0x175)])_0x28cc3b=_0x3cb107[_0x3890de(0x175)];}catch(_0x10435c){}this['sendTo'](_0x546213[_0x3890de(0x164)],_0x546213[_0x3890de(0x199)],{'success':!![],'eventHistory':this['eventHistory'][_0x3890de(0x152)](0x0,0xf),'stats':{'digestCount':_0x28ac85,'isPresent':this[_0x3890de(0x139)],'hourlyActivity':_0x83df0b,'solarActive':_0x1e9fbe,'presenceWho':_0x28cc3b},'automation':{'detected':_0xf22f56,'description':_0x28b6ce,'targetId':_0xb3d430,'targetValue':_0x464b13}},_0x546213['callback']);}else{if(_0x546213['command']===_0x3890de(0x134)){const _0x4e18a2=await this[_0x3890de(0x123)](_0x3890de(0x112),_0x3890de(0x137)),_0x5277d0=[];if(_0x4e18a2)for(const _0x3ebce5 in _0x4e18a2){const _0x48bc08=_0x4e18a2[_0x3ebce5],_0x43d34c=(_0x48bc08['common']&&typeof _0x48bc08[_0x3890de(0xdb)][_0x3890de(0x1b1)]===_0x3890de(0x103)?_0x48bc08[_0x3890de(0xdb)][_0x3890de(0x1b1)]['de']:_0x48bc08[_0x3890de(0xdb)][_0x3890de(0x1b1)])||_0x48bc08[_0x3890de(0xdb)][_0x3890de(0x1b1)];_0x5277d0[_0x3890de(0x1b0)]({'id':_0x3ebce5,'name':_0x43d34c});}const _0x255d2c=await this[_0x3890de(0x123)]('enum.rooms.*',_0x3890de(0x137)),_0x4661f9=[];if(_0x255d2c)for(const _0x3c9f8e in _0x255d2c){const _0x36c727=_0x255d2c[_0x3c9f8e],_0xc694ad=(_0x36c727[_0x3890de(0xdb)]&&typeof _0x36c727[_0x3890de(0xdb)][_0x3890de(0x1b1)]===_0x3890de(0x103)?_0x36c727[_0x3890de(0xdb)]['name']['de']:_0x36c727[_0x3890de(0xdb)][_0x3890de(0x1b1)])||_0x3c9f8e[_0x3890de(0xd5)]('.')[_0x3890de(0xef)]();_0x4661f9[_0x3890de(0x1b0)](_0xc694ad);}this[_0x3890de(0xc2)](_0x546213[_0x3890de(0x164)],_0x546213['command'],{'success':!![],'enums':_0x5277d0,'rooms':_0x4661f9},_0x546213[_0x3890de(0x116)]);}else{if(_0x546213[_0x3890de(0x199)]===_0x3890de(0x11c))try{let _0x5e0694=_0x3890de(0x1aa),_0x201aaa='Kein\x20Kalender-Adapter';if(this[_0x3890de(0x1e9)]['useWeather']){const _0x267b7c=await recorder[_0x3890de(0x1a6)](this);_0x5e0694=_0x267b7c!==null?_0x267b7c+'Â°C':_0x3890de(0x18d);}if(this[_0x3890de(0x1e9)][_0x3890de(0x1ef)]){const _0x45eecf=await this[_0x3890de(0x128)](_0x3890de(0xbb)+this['config'][_0x3890de(0x1ef)]);_0x201aaa=_0x45eecf?'Verbunden':_0x3890de(0x1bd);}this['sendTo'](_0x546213['from'],_0x546213[_0x3890de(0x199)],{'success':!![],'weather':_0x5e0694,'calendar':_0x201aaa},_0x546213['callback']);}catch(_0x511a86){this[_0x3890de(0xc2)](_0x546213[_0x3890de(0x164)],_0x546213['command'],{'success':![],'error':_0x511a86[_0x3890de(0xda)]},_0x546213[_0x3890de(0x116)]);}else{if(_0x546213['command']===_0x3890de(0xc8))try{const _0x2e65d1=_0x546213['message'][_0x3890de(0x184)],_0x4df047=await this[_0x3890de(0x177)](_0x2e65d1+'.data.table');let _0x4598ae=[];if(_0x4df047&&_0x4df047[_0x3890de(0x175)]){const _0x233cc1=JSON[_0x3890de(0x1e2)](_0x4df047[_0x3890de(0x175)]),_0x28452c=new Set();Array['isArray'](_0x233cc1)&&_0x233cc1['forEach'](_0x253edf=>{const _0x44cd79=_0x3890de;if(_0x253edf[_0x44cd79(0x171)])_0x28452c[_0x44cd79(0x1ad)](_0x253edf[_0x44cd79(0x171)]);else{if(_0x253edf[_0x44cd79(0xd7)])_0x28452c['add'](_0x253edf[_0x44cd79(0xd7)]);}}),_0x4598ae=Array[_0x3890de(0x164)](_0x28452c)['sort']();}if(_0x4598ae['length']===0x0)_0x4598ae=['Standard'];this[_0x3890de(0xc2)](_0x546213[_0x3890de(0x164)],_0x546213[_0x3890de(0x199)],{'success':!![],'names':_0x4598ae},_0x546213['callback']);}catch(_0x465f94){this['sendTo'](_0x546213['from'],_0x546213[_0x3890de(0x199)],{'success':![],'error':_0x465f94[_0x3890de(0xda)]},_0x546213[_0x3890de(0x116)]);}else{if(_0x546213[_0x3890de(0x199)]===_0x3890de(0xb4))try{await setup[_0x3890de(0xd2)](this,_0x3890de(0x108),![],![]),this[_0x3890de(0xc2)](_0x546213['from'],_0x546213[_0x3890de(0x199)],{'success':!![],'message':_0x3890de(0x19b)},_0x546213[_0x3890de(0x116)]);}catch(_0x205dd5){this[_0x3890de(0x186)][_0x3890de(0x185)](_0x3890de(0xb9)+_0x205dd5[_0x3890de(0xda)]),this[_0x3890de(0xc2)](_0x546213[_0x3890de(0x164)],_0x546213[_0x3890de(0x199)],{'success':![],'message':_0x3890de(0x100)+_0x205dd5[_0x3890de(0xda)]},_0x546213['callback']);}}}}}}}}}}}}}}}}}async[a0_0x52a79b(0x1be)](){const _0x43f133=a0_0x52a79b;try{const _0x4756dd=await this[_0x43f133(0x1a1)](setup[_0x43f133(0x176)]);_0x4756dd&&_0x4756dd[_0x43f133(0x175)]&&Object['values'](setup[_0x43f133(0xe4)])['includes'](_0x4756dd[_0x43f133(0x175)])?this[_0x43f133(0x133)]=_0x4756dd[_0x43f133(0x175)]:(this[_0x43f133(0x133)]=setup[_0x43f133(0xe4)][_0x43f133(0x148)],await this[_0x43f133(0x1c7)](setup[_0x43f133(0x176)],{'val':setup['SYSTEM_MODES'][_0x43f133(0x148)],'ack':!![]}));}catch(_0x2a4bf9){this['currentSystemMode']=setup['SYSTEM_MODES'][_0x43f133(0x148)];}}async['checkWifiPresence'](){const _0x30d881=a0_0x52a79b;try{const _0x2fe39c=this[_0x30d881(0x1e9)][_0x30d881(0xfd)]||[];let _0x178ebd=![];const _0x3e804e=[];for(const _0x82708a of _0x2fe39c){try{const _0x24d68f=await this[_0x30d881(0x177)](_0x82708a);_0x24d68f&&(_0x24d68f[_0x30d881(0x175)]===!![]||_0x24d68f[_0x30d881(0x175)]==='online'||_0x24d68f[_0x30d881(0x175)]===0x1)&&(_0x178ebd=!![],_0x3e804e[_0x30d881(0x1b0)](_0x82708a));}catch(_0x2b19a8){}}return await this['setStateAsync'](_0x30d881(0xe8),{'val':_0x3e804e[_0x30d881(0x188)](',\x20'),'ack':!![]}),_0x178ebd&&(this[_0x30d881(0x104)]&&(this[_0x30d881(0x186)][_0x30d881(0x14f)](_0x30d881(0x193)),recorder[_0x30d881(0xb6)](this)),!this[_0x30d881(0x139)]&&this[_0x30d881(0x133)]===setup[_0x30d881(0xe4)][_0x30d881(0x148)]&&await recorder[_0x30d881(0x101)](this,!![])),_0x178ebd;}catch(_0x5c3ccc){return![];}}async['runAutopilot'](){const _0x1ae58f=a0_0x52a79b;this[_0x1ae58f(0x186)][_0x1ae58f(0x1bb)](_0x1ae58f(0x13c)),await aiAgent[_0x1ae58f(0xe7)](this),this[_0x1ae58f(0x1cf)](),this[_0x1ae58f(0xbf)](),this[_0x1ae58f(0xc7)]();}async[a0_0x52a79b(0x1e0)](){const _0x58c445=a0_0x52a79b,_0x5d7996=['weatherunderground.0','accuweather.0',_0x58c445(0x156)],_0x20f980=['forecast.current.weather',_0x58c445(0x1c3),'NextHours.Location_1.Day_1.current.symbol_desc'];for(const _0x550eae of _0x5d7996){for(const _0x355a33 of _0x20f980){try{const _0x8e3aa4=_0x550eae+'.'+_0x355a33,_0x5b739c=await this[_0x58c445(0x177)](_0x8e3aa4);if(_0x5b739c&&_0x5b739c[_0x58c445(0x175)]){const _0x851753=String(_0x5b739c[_0x58c445(0x175)])[_0x58c445(0x1e4)]();if(_0x851753[_0x58c445(0x181)](_0x58c445(0x15e))||_0x851753[_0x58c445(0x181)](_0x58c445(0x19f))||_0x851753['includes'](_0x58c445(0xbc))||_0x851753[_0x58c445(0x181)]('clear')||_0x851753[_0x58c445(0x181)]('heiter'))return!![];}}catch(_0x210dce){}}}return![];}[a0_0x52a79b(0xbf)](){const _0x367120=a0_0x52a79b;if(!this[_0x367120(0x1af)])return;try{this[_0x367120(0x102)](_0x367120(0x10a),(_0x5bbbab,_0x2812d9)=>{const _0x2e61f3=_0x367120;_0x2812d9&&_0x2812d9[_0x2e61f3(0x175)]&&pythonBridge['send'](this,_0x2e61f3(0x1ca),{'sequences':JSON[_0x2e61f3(0x1e2)](_0x2812d9[_0x2e61f3(0x175)])});});}catch(_0x4b97e4){}}async['triggerEnergyPrediction'](){const _0x3a06c0=a0_0x52a79b;if(!this['isProVersion'])return;try{const _0x2fff32=await recorder[_0x3a06c0(0x1a6)](this);if(_0x2fff32===null)return;const _0x1950a0={},_0x5667ff={},_0x53a7f3=this[_0x3a06c0(0x1e9)]['devices']||[];for(const _0x19cc2e of _0x53a7f3){if(_0x19cc2e[_0x3a06c0(0x11a)]==='temperature'&&_0x19cc2e['location']){const _0x2c0232=this['sensorLastValues'][_0x19cc2e['id']];if(_0x2c0232!==undefined)_0x1950a0[_0x19cc2e['location']]=_0x2c0232;if(_0x19cc2e[_0x3a06c0(0xf1)])_0x5667ff[_0x19cc2e[_0x3a06c0(0x110)]]=!![];}}const _0x49b9a8=await this[_0x3a06c0(0x1e0)]();let _0x418461={};try{const _0x17b960=await this['getStateAsync'](_0x3a06c0(0x16b));if(_0x17b960&&_0x17b960[_0x3a06c0(0x175)])_0x418461=JSON['parse'](_0x17b960[_0x3a06c0(0x175)]);}catch(_0xe155ef){}Object[_0x3a06c0(0x17c)](_0x1950a0)['length']>0x0&&(pythonBridge[_0x3a06c0(0x15b)](this,'PREDICT_ENERGY',{'current_temps':_0x1950a0,'t_out':_0x2fff32,'is_sunny':_0x49b9a8,'solar_flags':_0x5667ff,'warmup_targets':_0x418461}),pythonBridge[_0x3a06c0(0x15b)](this,'OPTIMIZE_ENERGY',{'current_temps':_0x1950a0,'t_out':_0x2fff32,'targets':{}}));}catch(_0x15cf46){}}['updateHealthVector'](){const _0x385a0f=a0_0x52a79b;if(!this[_0x385a0f(0x140)]||this['rawEventLog'][_0x385a0f(0x14e)]===0x0)return;const _0x4140bd=new Array(0x60)[_0x385a0f(0x129)](0x0),_0x57c009=new Date()[_0x385a0f(0x10f)](0x0,0x0,0x0,0x0);this[_0x385a0f(0x140)][_0x385a0f(0x182)](_0x49d4e3=>{const _0x4398cb=_0x385a0f,_0x12bafc=new Date(_0x49d4e3[_0x4398cb(0x14d)]);if(_0x12bafc['getTime']()>=_0x57c009){const _0x4166d7=_0x12bafc[_0x4398cb(0x1b6)](),_0x1ad521=_0x12bafc[_0x4398cb(0x1a3)](),_0x4c3cc4=_0x4166d7*0x4+Math[_0x4398cb(0x1c5)](_0x1ad521/0xf);if(_0x4c3cc4>=0x0&&_0x4c3cc4<0x60)_0x4140bd[_0x4c3cc4]++;}}),this['setStateAsync']('analysis.health.todayVector',{'val':JSON[_0x385a0f(0x138)](_0x4140bd),'ack':!![]});}[a0_0x52a79b(0x191)](){const _0x258ab4=a0_0x52a79b;if(!this[_0x258ab4(0x121)]||this[_0x258ab4(0x121)][_0x258ab4(0x14e)]<0x2)return;const _0x324d07=this['dailyDigests'][_0x258ab4(0x1dd)](_0x5e3a5e=>{const _0x3f620a=_0x258ab4,_0x14c34f=(_0x5e3a5e[_0x3f620a(0x119)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x14c34f]||0x32;});pythonBridge['send'](this,_0x258ab4(0x127),{'values':_0x324d07,'tag':_0x258ab4(0x1cb)});}async[a0_0x52a79b(0x1a2)](_0x5c77f4){const _0x36e430=a0_0x52a79b;if(_0x5c77f4==null||typeof _0x5c77f4!==_0x36e430(0x1e1))return;const _0x3f9efa=Date['now']();this[_0x36e430(0xf0)][_0x36e430(0x1b0)]({'ts':_0x3f9efa,'val':_0x5c77f4}),this['pressureBuffer']=this['pressureBuffer'][_0x36e430(0x1c8)](_0x899b83=>_0x3f9efa-_0x899b83['ts']<0x1388);if(this['infrasoundLocked'])return;if(this[_0x36e430(0x1e9)][_0x36e430(0x145)]){const _0x43f065=await this['getForeignStateAsync'](this['config'][_0x36e430(0x145)]);if(_0x43f065&&!_0x43f065[_0x36e430(0x175)])return;}const _0x121de0=this[_0x36e430(0x1e9)][_0x36e430(0x19d)]||0.04;if(Math[_0x36e430(0x197)](_0x5c77f4)>=_0x121de0){this[_0x36e430(0x186)][_0x36e430(0x146)](_0x36e430(0x173)+_0x5c77f4+'\x20hPa\x20(Limit:\x20'+_0x121de0+')'),await this[_0x36e430(0x1c7)]('security.alarm_triggered',{'val':!![],'ack':!![]});const _0x2cbca4=this[_0x36e430(0x139)];_0x2cbca4?(this['log']['info'](_0x36e430(0x155)),this['triggerInfrasoundCorrelation'](_0x5c77f4,_0x36e430(0x1c1))):(this[_0x36e430(0x1d6)](_0x5c77f4,_0x36e430(0x1ba)),this[_0x36e430(0xd2)](_0x36e430(0x1ac)+_0x5c77f4+'\x20hPa.\x20Einbruch\x20wahrscheinlich.')),this['infrasoundLocked']=!![],setTimeout(()=>{const _0x482802=_0x36e430;this[_0x482802(0xba)]=![];},0x2710);}}async[a0_0x52a79b(0x1d6)](_0x6b0adb,_0x5be371=a0_0x52a79b(0x1ba)){const _0x453fcf=a0_0x52a79b,_0x359bc5=Date[_0x453fcf(0x1b7)](),_0x5314b5=this[_0x453fcf(0x1e9)][_0x453fcf(0x1bf)]||[];setTimeout(async()=>{const _0x15e0ef=_0x453fcf;let _0xe73e81=null,_0x319a97='Keine\x20Sensor-AktivitÃ¤t';const _0x5b9c7e=[],_0x3073ad=_0x5314b5[_0x15e0ef(0x1c8)](_0x38f3c5=>_0x38f3c5[_0x15e0ef(0x11a)]&&(_0x38f3c5[_0x15e0ef(0x11a)]['includes']('window')||_0x38f3c5[_0x15e0ef(0x11a)][_0x15e0ef(0x181)](_0x15e0ef(0xfb))||_0x38f3c5[_0x15e0ef(0x11a)][_0x15e0ef(0x181)](_0x15e0ef(0x15f))||_0x38f3c5[_0x15e0ef(0x11a)][_0x15e0ef(0x181)](_0x15e0ef(0xc9)))||_0x38f3c5[_0x15e0ef(0x11e)]&&(_0x38f3c5[_0x15e0ef(0x11e)][_0x15e0ef(0x181)](_0x15e0ef(0x19c))||_0x38f3c5[_0x15e0ef(0x11e)][_0x15e0ef(0x181)](_0x15e0ef(0x16d))));for(const _0x461c09 of _0x3073ad){try{const _0x372f89=await this[_0x15e0ef(0x177)](_0x461c09['id']);if(_0x372f89){if(_0x372f89['ts']>=_0x359bc5-0x7d0){_0xe73e81=_0x461c09[_0x15e0ef(0x1b1)]||_0x461c09['id'],_0x319a97=_0x15e0ef(0xea)+_0xe73e81;break;}}}catch(_0x553a91){}}const _0x41a772={'timestamp':_0x359bc5,'pressure':_0x6b0adb,'isMatch':!!_0xe73e81,'explanation':_0x319a97,'type':_0x5be371};await this[_0x15e0ef(0x165)](_0x41a772),this['log']['info'](_0x15e0ef(0xcd)+(!!_0xe73e81?_0x15e0ef(0x1d8):_0x15e0ef(0x11d)));},0x1388);}async[a0_0x52a79b(0x142)](_0x84ade3){const _0xeaf26f=a0_0x52a79b,_0x38c727=Date[_0xeaf26f(0x1b7)](),_0x1b9106=_0x84ade3[_0xeaf26f(0x1b1)]||_0x84ade3['id'][_0xeaf26f(0xd5)]('.')[_0xeaf26f(0xef)]();let _0x542335=0x0;setTimeout(async()=>{const _0x2810f6=_0xeaf26f;this['pressureBuffer'][_0x2810f6(0x182)](_0x59c6e6=>{const _0x41ae65=_0x2810f6;_0x59c6e6['ts']>=_0x38c727-0xfa0&&_0x59c6e6['ts']<=_0x38c727+0x3e8&&(Math[_0x41ae65(0x197)](_0x59c6e6[_0x41ae65(0x175)])>Math[_0x41ae65(0x197)](_0x542335)&&(_0x542335=_0x59c6e6[_0x41ae65(0x175)]));});const _0x3c8e7e=this[_0x2810f6(0x1e9)][_0x2810f6(0x19d)]||0.04,_0x313d7f=Math[_0x2810f6(0x197)](_0x542335)>=_0x3c8e7e,_0x243ae0={'timestamp':_0x38c727,'pressure':_0x542335,'isMatch':_0x313d7f,'explanation':_0x2810f6(0xe2)+_0x1b9106,'type':_0x2810f6(0x1d1)};await this[_0x2810f6(0x165)](_0x243ae0),this[_0x2810f6(0x186)]['debug'](_0x2810f6(0xe9)+_0x1b9106+_0x2810f6(0x158)+_0x542335['toFixed'](0x4)+_0x2810f6(0x16f)+_0x3c8e7e+')');},0x1f4);}async[a0_0x52a79b(0x165)](_0x26191d){const _0x157f9d=a0_0x52a79b;try{const _0x85604b=await this[_0x157f9d(0x1a1)]('analysis.security.infrasoundLog');let _0x2a8cbb=[];if(_0x85604b&&_0x85604b[_0x157f9d(0x175)])_0x2a8cbb=JSON[_0x157f9d(0x1e2)](_0x85604b[_0x157f9d(0x175)]);_0x2a8cbb[_0x157f9d(0x13a)](_0x26191d);if(_0x2a8cbb[_0x157f9d(0x14e)]>0x14)_0x2a8cbb=_0x2a8cbb['slice'](0x0,0x14);await this[_0x157f9d(0x1c7)](_0x157f9d(0x1d3),{'val':JSON[_0x157f9d(0x138)](_0x2a8cbb),'ack':!![]});}catch(_0x30c859){this[_0x157f9d(0x186)][_0x157f9d(0x185)](_0x157f9d(0xe6)+_0x30c859[_0x157f9d(0xda)]);}}[a0_0x52a79b(0xd2)](_0x70d64f){const _0x3d649f=a0_0x52a79b;this['config'][_0x3d649f(0x1c9)]&&this[_0x3d649f(0x1e9)][_0x3d649f(0xf5)]&&this[_0x3d649f(0xc2)](this[_0x3d649f(0x1e9)][_0x3d649f(0xf5)],_0x3d649f(0x15b),{'message':_0x70d64f,'title':_0x3d649f(0x153),'priority':0x1}),this[_0x3d649f(0x1e9)]['notifyTelegramEnabled']&&this['config']['notifyTelegramInstance']&&this[_0x3d649f(0xc2)](this[_0x3d649f(0x1e9)]['notifyTelegramInstance'],_0x3d649f(0x15b),{'text':_0x70d64f});}}if(require[a0_0x52a79b(0x157)]!==module)module[a0_0x52a79b(0x12f)]=_0x488706=>new CogniLiving(_0x488706);else new CogniLiving();