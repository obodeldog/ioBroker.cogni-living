const a0_0x3140d7=a0_0x5e81;(function(_0x18d92e,_0x5da0a8){const _0x14f3c9=a0_0x5e81,_0x50cd96=_0x18d92e();while(!![]){try{const _0x5f2252=-parseInt(_0x14f3c9(0x19b))/0x1*(parseInt(_0x14f3c9(0x17b))/0x2)+-parseInt(_0x14f3c9(0xb9))/0x3*(-parseInt(_0x14f3c9(0x14e))/0x4)+-parseInt(_0x14f3c9(0xd8))/0x5*(-parseInt(_0x14f3c9(0xe4))/0x6)+-parseInt(_0x14f3c9(0x1d1))/0x7+parseInt(_0x14f3c9(0xb5))/0x8+parseInt(_0x14f3c9(0xeb))/0x9+-parseInt(_0x14f3c9(0x1e0))/0xa;if(_0x5f2252===_0x5da0a8)break;else _0x50cd96['push'](_0x50cd96['shift']());}catch(_0x5477f4){_0x50cd96['push'](_0x50cd96['shift']());}}}(a0_0x2432,0xc916f));const a0_0x26a866=(function(){let _0x298bea=!![];return function(_0x18150d,_0x26586a){const _0x204d11=_0x298bea?function(){const _0x130d51=a0_0x5e81;if(_0x26586a){const _0x57d42d=_0x26586a[_0x130d51(0x16b)](_0x18150d,arguments);return _0x26586a=null,_0x57d42d;}}:function(){};return _0x298bea=![],_0x204d11;};}()),a0_0x3f31f3=a0_0x26a866(this,function(){const _0x40aa72=a0_0x5e81;return a0_0x3f31f3['toString']()[_0x40aa72(0x85)](_0x40aa72(0x1ea))[_0x40aa72(0x1f3)]()[_0x40aa72(0x161)](a0_0x3f31f3)['search'](_0x40aa72(0x1ea));});a0_0x3f31f3();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x3140d7(0xc3)),{spawn}=require(a0_0x3140d7(0x1ac)),path=require(a0_0x3140d7(0x88)),fs=require('fs'),installer=require(a0_0x3140d7(0x1fa)),scanner=require(a0_0x3140d7(0x1a3)),schedulers=require('./lib/scheduler'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x3140d7(0xcc),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0x3140d7(0x7f),LTM_DP_STATUS='LTM.processingStatus',LTM_DP_TRIGGER_DIGEST=a0_0x3140d7(0x1fe),LTM_DP_BASELINE_STATUS=a0_0x3140d7(0xde),LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS=a0_0x3140d7(0x1a4),LTM_DP_DRIFT_DETAILS=a0_0x3140d7(0x1b7),LTM_DP_DRIFT_LAST_CHECK=a0_0x3140d7(0x100),SYSTEM_DP_MODE=a0_0x3140d7(0xfb),SYSTEM_MODES={'NORMAL':a0_0x3140d7(0x121),'VACATION':a0_0x3140d7(0x1f7),'PARTY':'party','GUEST':'guest'},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x3140d7(0xa0)],SYSTEM_MODES['GUEST']],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0x3140d7(0xd2),'family':'Fokus\x20auf\x20Familienroutinen.','single_comfort':'Fokus\x20auf\x20Komfort.','security':a0_0x3140d7(0x12f)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x2bdd98){const _0xb771be=a0_0x3140d7;try{const _0x2cb819=[_0xb771be(0x105),_0xb771be(0x16d)];for(const _0x2a9d00 of _0x2cb819){try{const _0x3d4fa6=await _0x2bdd98[_0xb771be(0x104)](_0x2a9d00);if(_0x3d4fa6)await _0x2bdd98[_0xb771be(0xda)](_0x2a9d00);}catch(_0x17d2dd){}}}catch(_0x50a965){}}async function checkLicense(_0x31de5f){return!![];}async function initHistory(_0x58545b){const _0x4a40f9=a0_0x3140d7;try{const _0x1aef8a=await _0x58545b['getStateAsync'](_0x4a40f9(0x9c));_0x1aef8a&&_0x1aef8a['val']&&(_0x58545b[_0x4a40f9(0x1ca)]=JSON[_0x4a40f9(0x7a)](_0x1aef8a[_0x4a40f9(0x171)][_0x4a40f9(0x1f3)]()));}catch(_0x296e49){_0x58545b[_0x4a40f9(0x1ca)]=[];}try{const _0x18b517=await _0x58545b[_0x4a40f9(0xe5)]('analysis.analysisHistory');if(_0x18b517&&_0x18b517[_0x4a40f9(0x171)])_0x58545b['analysisHistory']=JSON['parse'](_0x18b517[_0x4a40f9(0x171)][_0x4a40f9(0x1f3)]());}catch(_0x4dd31c){_0x58545b[_0x4a40f9(0x12b)]=[];}if(_0x58545b[_0x4a40f9(0x1ca)]&&_0x58545b['eventHistory']['length']>0x0){_0x58545b[_0x4a40f9(0x12a)][_0x4a40f9(0x1b9)](_0x4a40f9(0x1fc));for(let _0x432f3d=_0x58545b[_0x4a40f9(0x1ca)][_0x4a40f9(0x106)]-0x1;_0x432f3d>=0x0;_0x432f3d--){const _0x267825=_0x58545b[_0x4a40f9(0x1ca)][_0x432f3d];if(_0x267825&&_0x267825['id']!==undefined&&_0x267825[_0x4a40f9(0x146)]!==undefined)_0x58545b['sensorLastValues'][_0x267825['id']]=_0x267825[_0x4a40f9(0x146)];}}}async function initSystemConfig(_0x11ff32){const _0x14a81e=a0_0x3140d7;try{const _0x17139a=await _0x11ff32['getForeignObjectAsync'](_0x14a81e(0x77));if(_0x17139a&&_0x17139a[_0x14a81e(0x10d)])_0x11ff32[_0x14a81e(0x12e)]={'latitude':_0x17139a['common'][_0x14a81e(0x1ae)]||0x0,'longitude':_0x17139a[_0x14a81e(0x10d)]['longitude']||0x0,'city':_0x17139a[_0x14a81e(0x10d)][_0x14a81e(0x1a2)]||''};}catch(_0x1be588){}}async function createAllObjects(_0x4dee83){const _0x2cbc40=a0_0x3140d7;await _0x4dee83[_0x2cbc40(0xed)]('system',{'type':_0x2cbc40(0x81),'common':{'name':_0x2cbc40(0x102)},'native':{}}),await _0x4dee83[_0x2cbc40(0xed)](SYSTEM_DP_MODE,{'type':_0x2cbc40(0x179),'common':{'name':'System\x20Mode','type':'string','role':_0x2cbc40(0x179),'read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL']},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0x19a),{'type':_0x2cbc40(0x179),'common':{'name':'Who\x20is\x20present?','type':_0x2cbc40(0x18b),'role':_0x2cbc40(0xc6),'read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0x1a7),{'type':_0x2cbc40(0x179),'common':{'name':'Last\x20raw\x20event','type':'string','role':_0x2cbc40(0x199),'read':!![],'write':![]},'native':{}}),await _0x4dee83['setObjectNotExistsAsync']('events.history',{'type':'state','common':{'name':_0x2cbc40(0x158),'type':_0x2cbc40(0x18b),'role':_0x2cbc40(0x199),'read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0xed)](_0x2cbc40(0x8f),{'type':_0x2cbc40(0x81),'common':{'name':'AI\x20Training'},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0x1cf),{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x127),'type':'boolean','role':_0x2cbc40(0xec),'read':!![],'write':!![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0x19d),{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x1e1),'type':'boolean','role':_0x2cbc40(0xec),'read':!![],'write':!![]},'native':{}}),await _0x4dee83['setObjectNotExistsAsync'](_0x2cbc40(0x83),{'type':'state','common':{'name':_0x2cbc40(0x130),'type':'boolean','role':_0x2cbc40(0xec),'read':!![],'write':!![]},'native':{}}),await _0x4dee83['setObjectNotExistsAsync'](_0x2cbc40(0xaa),{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x9b),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0x167),{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x108),'type':_0x2cbc40(0xb3),'role':_0x2cbc40(0xec),'read':!![],'write':!![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0x1b1),{'type':'state','common':{'name':_0x2cbc40(0xe8),'type':_0x2cbc40(0x18b),'role':_0x2cbc40(0xc6),'read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0xed)](_0x2cbc40(0x14a),{'type':'channel','common':{'name':_0x2cbc40(0xd0)},'native':{}}),await _0x4dee83['setObjectNotExistsAsync']('analysis.security.lastScore',{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x1cc),'type':_0x2cbc40(0x165),'role':_0x2cbc40(0x146),'read':!![],'write':![]},'native':{}}),await _0x4dee83['setObjectNotExistsAsync'](_0x2cbc40(0xd3),{'type':'state','common':{'name':_0x2cbc40(0x1da),'type':_0x2cbc40(0x165),'role':_0x2cbc40(0x146),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0x89),{'type':_0x2cbc40(0x179),'common':{'name':'Last\x20Check','type':'string','role':_0x2cbc40(0x1a0),'read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)]('analysis.security.topologyMatrix',{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x133),'type':_0x2cbc40(0x18b),'role':'json','read':!![],'write':![]},'native':{}}),await _0x4dee83['extendObjectAsync']('analysis.health',{'type':'channel','common':{'name':'Health\x20Analysis'},'native':{}}),await _0x4dee83['setObjectNotExistsAsync'](_0x2cbc40(0x1bc),{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x15e),'type':_0x2cbc40(0x18b),'role':'date','read':!![],'write':![]},'native':{}}),await _0x4dee83['setObjectNotExistsAsync'](_0x2cbc40(0x172),{'type':_0x2cbc40(0x179),'common':{'name':'Anomaly\x20Detected','type':_0x2cbc40(0xb3),'role':_0x2cbc40(0x110),'read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)]('analysis.health.trendDiagnosis',{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x160),'type':_0x2cbc40(0x18b),'role':_0x2cbc40(0xc6),'read':!![],'write':![]},'native':{}}),await _0x4dee83['setObjectNotExistsAsync'](_0x2cbc40(0x154),{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x1e8),'type':_0x2cbc40(0x165),'role':_0x2cbc40(0x146),'read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0x11d),{'type':'state','common':{'name':_0x2cbc40(0x9f),'type':_0x2cbc40(0x18b),'role':_0x2cbc40(0x199),'read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0x159),{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0xb4),'type':_0x2cbc40(0x165),'role':_0x2cbc40(0x146),'read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0xed)]('analysis.energy',{'type':_0x2cbc40(0x81),'common':{'name':'Energy\x20Intelligence'},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0x11e),{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x91),'type':_0x2cbc40(0x18b),'role':_0x2cbc40(0xc6),'read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0x92),{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x1ec),'type':_0x2cbc40(0x18b),'role':'text','read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0x147),{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x132),'type':_0x2cbc40(0x18b),'role':_0x2cbc40(0x199),'read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0xed)](_0x2cbc40(0x13f),{'type':_0x2cbc40(0x81),'common':{'name':_0x2cbc40(0x13f)},'native':{}}),await _0x4dee83[_0x2cbc40(0xed)](LTM_DP_RAW_LOG,{'type':_0x2cbc40(0x179),'common':{'name':'Raw\x20Log','type':_0x2cbc40(0x18b),'role':_0x2cbc40(0x199),'read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0xed)](LTM_DP_DAILY_DIGESTS,{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x13d),'type':_0x2cbc40(0x18b),'role':_0x2cbc40(0x199),'read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0xb1),{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0xcd),'type':_0x2cbc40(0x18b),'role':'json','read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0x1dc),{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0xd5),'type':'string','role':_0x2cbc40(0x199),'read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0x157),{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x125),'type':_0x2cbc40(0xb3),'role':_0x2cbc40(0xec),'read':!![],'write':!![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0x18d),{'type':_0x2cbc40(0x179),'common':{'name':'Trigger\x20Briefing','type':_0x2cbc40(0xb3),'role':_0x2cbc40(0xec),'read':!![],'write':!![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)]('analysis.isAlert',{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0xc7),'type':_0x2cbc40(0xb3),'role':'indicator.alarm','read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0x119),{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x1fb),'type':_0x2cbc40(0x18b),'role':'text.alarm','read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0x1a8),{'type':'state','common':{'name':_0x2cbc40(0xd7),'type':_0x2cbc40(0x18b),'role':_0x2cbc40(0xc6),'read':!![],'write':![]},'native':{}}),await _0x4dee83['setObjectNotExistsAsync'](_0x2cbc40(0xc0),{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x126),'type':_0x2cbc40(0xb3),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x4dee83['setObjectNotExistsAsync'](_0x2cbc40(0x15b),{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x140),'type':_0x2cbc40(0x18b),'role':_0x2cbc40(0xc6),'read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)]('analysis.automation.detectedPatterns',{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x129),'type':_0x2cbc40(0x18b),'role':_0x2cbc40(0x199),'read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0x1d4),{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x13e),'type':_0x2cbc40(0x18b),'role':_0x2cbc40(0xc6),'read':!![],'write':![]},'native':{}}),await _0x4dee83[_0x2cbc40(0x192)](_0x2cbc40(0xc2),{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0xae),'type':_0x2cbc40(0x18b),'role':'text','read':!![],'write':![]},'native':{}}),await _0x4dee83['setObjectNotExistsAsync'](_0x2cbc40(0xf4),{'type':_0x2cbc40(0x179),'common':{'name':'Auto\x20Apply','type':_0x2cbc40(0xb3),'role':'switch','read':!![],'write':!![]},'native':{}}),await _0x4dee83['setObjectNotExistsAsync']('analysis.automation.triggerAction',{'type':_0x2cbc40(0x179),'common':{'name':_0x2cbc40(0x10e),'type':_0x2cbc40(0xb3),'role':_0x2cbc40(0xec),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x1f0e42){const _0x135bf2=a0_0x3140d7;try{const _0x175c46=await _0x1f0e42[_0x135bf2(0xe5)](SYSTEM_DP_MODE);_0x175c46&&_0x175c46[_0x135bf2(0x171)]&&Object[_0x135bf2(0x143)](SYSTEM_MODES)[_0x135bf2(0x1c9)](_0x175c46['val'])?_0x1f0e42[_0x135bf2(0xf0)]=_0x175c46[_0x135bf2(0x171)]:(_0x1f0e42[_0x135bf2(0xf0)]=SYSTEM_MODES[_0x135bf2(0xdd)],await _0x1f0e42[_0x135bf2(0xba)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x4e653f){_0x1f0e42[_0x135bf2(0xf0)]=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0xad7d80){const _0x4b1e53=a0_0x3140d7;try{const _0x69166=await _0xad7d80['getStateAsync'](LTM_DP_RAW_LOG);if(_0x69166&&_0x69166[_0x4b1e53(0x171)])_0xad7d80['rawEventLog']=JSON[_0x4b1e53(0x7a)](_0x69166[_0x4b1e53(0x171)]);}catch(_0x487e9f){_0xad7d80[_0x4b1e53(0x180)]=[];}}async function saveRawEventLog(_0x1c3901){const _0x20af73=a0_0x3140d7;if(_0x1c3901[_0x20af73(0x180)][_0x20af73(0x106)]>RAW_LOG_MAX_SIZE)_0x1c3901[_0x20af73(0x180)][_0x20af73(0x8e)](0x0,_0x1c3901[_0x20af73(0x180)]['length']-RAW_LOG_MAX_SIZE);await _0x1c3901[_0x20af73(0xba)](LTM_DP_RAW_LOG,{'val':JSON[_0x20af73(0xdb)](_0x1c3901[_0x20af73(0x180)]),'ack':!![]});}async function loadDailyDigests(_0x981481){const _0x1262f3=a0_0x3140d7;try{const _0x185f65=await _0x981481[_0x1262f3(0xe5)](LTM_DP_DAILY_DIGESTS);if(_0x185f65&&_0x185f65[_0x1262f3(0x171)])_0x981481[_0x1262f3(0x19f)]=JSON[_0x1262f3(0x7a)](_0x185f65['val']);}catch(_0x59f259){_0x981481[_0x1262f3(0x19f)]=[];}await updateBaselineStatus(_0x981481);}async function saveDailyDigests(_0xc101e6,_0x4ba5de=!![]){const _0xcffc8a=a0_0x3140d7,_0x49e366=_0xc101e6[_0xcffc8a(0x1c6)]['ltmLtbWindowDays']||0x3c;_0xc101e6[_0xcffc8a(0x19f)][_0xcffc8a(0x106)]>_0x49e366&&_0xc101e6[_0xcffc8a(0x19f)][_0xcffc8a(0x8e)](0x0,_0xc101e6[_0xcffc8a(0x19f)]['length']-_0x49e366);await _0xc101e6[_0xcffc8a(0xba)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0xc101e6[_0xcffc8a(0x19f)]),'ack':!![]});if(_0x4ba5de)await updateBaselineStatus(_0xc101e6);}async function updateAnalysisHistory(_0x285a85,_0x2569b3){const _0x331fdb=a0_0x3140d7;_0x285a85[_0x331fdb(0x12b)]['unshift'](_0x2569b3);if(_0x285a85[_0x331fdb(0x12b)][_0x331fdb(0x106)]>HISTORY_MAX_SIZE)_0x285a85[_0x331fdb(0x12b)]['pop']();await _0x285a85['setStateAsync'](_0x331fdb(0xa4),{'val':JSON[_0x331fdb(0xdb)](_0x285a85[_0x331fdb(0x12b)]),'ack':!![]});}async function updateBaselineStatus(_0x17e9fc){const _0x51bcf0=a0_0x3140d7;if(!_0x17e9fc['isProVersion']){await _0x17e9fc[_0x51bcf0(0xba)](LTM_DP_BASELINE_STATUS,{'val':_0x51bcf0(0x145),'ack':!![]});return;}const _0x9781ec=_0x17e9fc[_0x51bcf0(0x19f)][_0x51bcf0(0x106)]>=(_0x17e9fc[_0x51bcf0(0x1c6)][_0x51bcf0(0x1ad)]||0x7)?'Aktiv\x20('+_0x17e9fc[_0x51bcf0(0x19f)][_0x51bcf0(0x106)]+'\x20Tage)':_0x51bcf0(0x1a6)+_0x17e9fc['dailyDigests'][_0x51bcf0(0x106)]+'/'+(_0x17e9fc[_0x51bcf0(0x1c6)][_0x51bcf0(0x1ad)]||0x7)+')';await _0x17e9fc[_0x51bcf0(0xba)](LTM_DP_BASELINE_STATUS,{'val':_0x9781ec,'ack':!![]});}async function initSensorSubscriptions(_0x2e78e4){const _0x2ee986=a0_0x3140d7,_0x284def=_0x2e78e4[_0x2ee986(0x1c6)][_0x2ee986(0xaf)];if(_0x284def)for(const _0x30cd71 of _0x284def){await _0x2e78e4['subscribeForeignStatesAsync'](_0x30cd71['id']);}}async function initPresenceSubscriptions(_0xade0fe){const _0x25ea14=a0_0x3140d7,_0x4d429e=_0xade0fe['config']['presenceDevices'];if(_0x4d429e)for(const _0x566148 of _0x4d429e){await _0xade0fe[_0x25ea14(0x107)](_0x566148);}}async function setupTelegramListener(_0x90e9b1){const _0x33f037=a0_0x3140d7,_0x5158e7=_0x90e9b1['config']['notifyTelegramInstance'];if(_0x90e9b1[_0x33f037(0x1c6)][_0x33f037(0x82)]&&_0x5158e7)await _0x90e9b1['subscribeForeignStatesAsync'](_0x5158e7+_0x33f037(0xd1));}async function checkWifiPresence(_0x457fb3){const _0x6b6079=a0_0x3140d7;try{const _0x4263f4=_0x457fb3[_0x6b6079(0x1c6)]['presenceDevices']||[];let _0x4925a8=![];const _0x12259e=[];for(const _0x382734 of _0x4263f4){try{const _0x3132e5=await _0x457fb3['getForeignStateAsync'](_0x382734);_0x3132e5&&(_0x3132e5[_0x6b6079(0x171)]===!![]||_0x3132e5[_0x6b6079(0x171)]===_0x6b6079(0x1b3)||_0x3132e5[_0x6b6079(0x171)]===0x1)&&(_0x4925a8=!![],_0x12259e[_0x6b6079(0x128)](_0x382734));}catch(_0x58440d){}}return await _0x457fb3['setStateAsync'](_0x6b6079(0x19a),{'val':_0x12259e[_0x6b6079(0x1db)](',\x20'),'ack':!![]}),_0x4925a8&&(_0x457fb3[_0x6b6079(0x1b2)]&&(_0x457fb3[_0x6b6079(0x12a)]['info'](_0x6b6079(0x19c)),abortExitTimer(_0x457fb3)),!_0x457fb3[_0x6b6079(0x1b6)]&&_0x457fb3['currentSystemMode']===SYSTEM_MODES[_0x6b6079(0xdd)]&&await setPresence(_0x457fb3,!![])),_0x4925a8;}catch(_0x4bae95){return![];}}function startExitTimer(_0x40bf6c){const _0x7589cb=a0_0x3140d7;abortExitTimer(_0x40bf6c),_0x40bf6c[_0x7589cb(0x1bd)]=!![],_0x40bf6c[_0x7589cb(0xea)]=setTimeout(()=>{const _0x157008=_0x7589cb;_0x40bf6c[_0x157008(0x1bd)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x40bf6c[_0x7589cb(0x1b2)]=setTimeout(()=>{const _0x109019=_0x7589cb;setPresence(_0x40bf6c,![]),_0x40bf6c[_0x109019(0x1b2)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x557dca){const _0x49e39e=a0_0x3140d7;if(_0x557dca[_0x49e39e(0x1b2)])clearTimeout(_0x557dca[_0x49e39e(0x1b2)]);if(_0x557dca['exitGraceTimer'])clearTimeout(_0x557dca['exitGraceTimer']);_0x557dca[_0x49e39e(0x1b2)]=null,_0x557dca[_0x49e39e(0xea)]=null,_0x557dca[_0x49e39e(0x1bd)]=![];}async function setPresence(_0x4d1180,_0xe7511f){const _0x3ef269=a0_0x3140d7;if(_0x4d1180[_0x3ef269(0x1b6)]===_0xe7511f)return;_0x4d1180['isPresent']=_0xe7511f,await _0x4d1180[_0x3ef269(0xba)](_0x3ef269(0x73),{'val':_0xe7511f,'ack':!![]});}async function executeAutomationAction(_0x30cd11){const _0x28115e=a0_0x3140d7;try{const _0x5b8386=await _0x30cd11[_0x28115e(0xe5)](_0x28115e(0x1d4)),_0x3312dd=await _0x30cd11[_0x28115e(0xe5)](_0x28115e(0xc2));if(_0x5b8386&&_0x5b8386[_0x28115e(0x171)]&&_0x3312dd){const _0x4a8ef5=_0x5b8386[_0x28115e(0x171)];let _0x41c931=_0x3312dd[_0x28115e(0x171)];try{_0x41c931=JSON['parse'](_0x41c931);}catch(_0x1ed1dc){}_0x30cd11['log'][_0x28115e(0x1b9)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x4a8ef5+_0x28115e(0xbe)+_0x41c931),await _0x30cd11[_0x28115e(0x14d)](_0x4a8ef5,_0x41c931);}else _0x30cd11['log'][_0x28115e(0xff)](_0x28115e(0x163));}catch(_0x447e1b){_0x30cd11[_0x28115e(0x12a)][_0x28115e(0x175)](_0x28115e(0xfd)+_0x447e1b['message']);}}async function processSensorEvent(_0x2d1ac4,_0x451563,_0x1f4d0f,_0x196cbe){const _0x310c5c=a0_0x3140d7;if(!_0x196cbe)return;const _0x31cee5=_0x1f4d0f[_0x310c5c(0x171)],_0x2cdbb6=Date[_0x310c5c(0xad)](),_0x2fd153=_0x2d1ac4[_0x310c5c(0x1c0)][_0x451563];_0x2d1ac4[_0x310c5c(0x1c0)][_0x451563]=_0x31cee5;if(!_0x196cbe[_0x310c5c(0x1d7)]&&_0x2fd153!=undefined&&_0x2fd153==_0x31cee5)return;const _0x126162=(_0x196cbe['type']||'')['toLowerCase'](),_0x5ac842=_0x126162['includes'](_0x310c5c(0xd9))||_0x126162[_0x310c5c(0x1c9)](_0x310c5c(0xc5))||_0x126162[_0x310c5c(0x1c9)](_0x310c5c(0x114))||_0x126162[_0x310c5c(0x1c9)]('heizung');_0x2d1ac4[_0x310c5c(0x189)]&&_0x5ac842&&recordThermodynamics(_0x2d1ac4,_0x451563,_0x31cee5,_0x196cbe[_0x310c5c(0x1dd)]);const _0x2e422d={'timestamp':_0x2cdbb6,'id':_0x451563,'name':_0x196cbe['name'],'type':_0x196cbe[_0x310c5c(0xbd)],'location':_0x196cbe['location'],'value':_0x31cee5};_0x2d1ac4[_0x310c5c(0x1ca)][_0x310c5c(0x1f0)](_0x2e422d);if(_0x2d1ac4['eventHistory'][_0x310c5c(0x106)]>HISTORY_MAX_SIZE)_0x2d1ac4[_0x310c5c(0x1ca)][_0x310c5c(0x1ba)]();await _0x2d1ac4[_0x310c5c(0xba)]('events.lastEvent',{'val':JSON[_0x310c5c(0xdb)](_0x2e422d),'ack':!![]}),await _0x2d1ac4[_0x310c5c(0xba)](_0x310c5c(0x9c),{'val':JSON[_0x310c5c(0xdb)](_0x2d1ac4[_0x310c5c(0x1ca)]),'ack':!![]});_0x2d1ac4[_0x310c5c(0x189)]&&(_0x2d1ac4['rawEventLog'][_0x310c5c(0x128)](_0x2e422d),await saveRawEventLog(_0x2d1ac4),recordSequence(_0x2d1ac4,_0x2e422d));if(_0x196cbe[_0x310c5c(0x10a)]&&_0x31cee5===!![]){if(_0x2d1ac4[_0x310c5c(0x1b6)]&&!_0x2d1ac4[_0x310c5c(0x1bd)])startExitTimer(_0x2d1ac4);else{if(!_0x2d1ac4[_0x310c5c(0x1b6)])setPresence(_0x2d1ac4,!![]);}}else{if(_0x196cbe[_0x310c5c(0xbd)]==='motion'&&_0x31cee5===!![]){if(_0x2d1ac4[_0x310c5c(0x1b2)])abortExitTimer(_0x2d1ac4);if(!_0x2d1ac4[_0x310c5c(0x1b6)]&&_0x2d1ac4[_0x310c5c(0xf0)]===SYSTEM_MODES[_0x310c5c(0xdd)])setPresence(_0x2d1ac4,!![]);}}}async function recordThermodynamics(_0x54447c,_0x5ec6d9,_0x38b491,_0x2d1e83){const _0x3008ef=a0_0x3140d7,_0x2c738e=await getOutsideTemperatureNumeric(_0x54447c),_0x187c46=await _0x54447c['getStateAsync'](_0x3008ef(0x1dc));let _0x22b9f0=[];if(_0x187c46&&_0x187c46[_0x3008ef(0x171)])try{_0x22b9f0=JSON[_0x3008ef(0x7a)](_0x187c46[_0x3008ef(0x171)]);}catch(_0x4926d4){}_0x22b9f0[_0x3008ef(0x128)]({'ts':Date[_0x3008ef(0xad)](),'room':_0x2d1e83||_0x3008ef(0x99),'t_in':_0x38b491,'t_out':_0x2c738e});if(_0x22b9f0['length']>THERMO_LOG_SIZE)_0x22b9f0[_0x3008ef(0x115)]();await _0x54447c[_0x3008ef(0xba)]('LTM.trainingData.thermodynamics',{'val':JSON['stringify'](_0x22b9f0),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x109bd2){const _0x20e5e1=a0_0x3140d7;if(_0x109bd2['config'][_0x20e5e1(0x1cb)])try{const _0x9841ef=await _0x109bd2[_0x20e5e1(0x117)](_0x109bd2[_0x20e5e1(0x1c6)][_0x20e5e1(0x1cb)]);if(_0x9841ef&&_0x9841ef[_0x20e5e1(0x171)]!==undefined&&_0x9841ef['val']!==null)return parseFloat(_0x9841ef['val']);}catch(_0x4534ea){}const _0x22330e=_0x109bd2[_0x20e5e1(0x1c6)][_0x20e5e1(0x1d0)];if(!_0x109bd2['config'][_0x20e5e1(0x11b)]||!_0x22330e)return null;try{let _0x451076='';if(_0x22330e[_0x20e5e1(0x1c9)](_0x20e5e1(0x14c)))_0x451076=_0x22330e+'.Current.Temperature';else{if(_0x22330e[_0x20e5e1(0x1c9)](_0x20e5e1(0xce)))_0x451076=_0x22330e+_0x20e5e1(0xa9);else{if(_0x22330e['includes'](_0x20e5e1(0x109)))_0x451076=_0x22330e+_0x20e5e1(0x178);else{if(_0x22330e[_0x20e5e1(0x1c9)](_0x20e5e1(0x84)))_0x451076=_0x22330e+_0x20e5e1(0x13b);}}}if(_0x451076){const _0xf27e67=await _0x109bd2['getForeignStateAsync'](_0x451076);if(_0xf27e67&&_0xf27e67[_0x20e5e1(0x171)]!==undefined&&_0xf27e67[_0x20e5e1(0x171)]!==null)return parseFloat(_0xf27e67[_0x20e5e1(0x171)]);}}catch(_0x24efa1){}return null;}async function recordSequence(_0x24ad22,_0x5c4055){const _0x354e88=a0_0x3140d7,_0x5593ae=(_0x5c4055['type']||'')['toLowerCase'](),_0x3bb987=[_0x354e88(0x137),_0x354e88(0x18e),'prÃ¤senz',_0x354e88(0x194),_0x354e88(0x1de),_0x354e88(0x16c),'tÃ¼r','window',_0x354e88(0x1c7),_0x354e88(0x1f8),'kontakt',_0x354e88(0x16a),_0x354e88(0x71),_0x354e88(0x176),'schalter','dimmer',_0x354e88(0x184)];if(!_0x3bb987['some'](_0x120e0c=>_0x5593ae[_0x354e88(0x1c9)](_0x120e0c)))return;if(!_0x5c4055[_0x354e88(0x146)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x354e88(0x128)]({'loc':_0x5c4055[_0x354e88(0x1dd)]||_0x354e88(0x99),'id':_0x5c4055['id'],'ts':Date[_0x354e88(0xad)]()}),sequenceTimer=setTimeout(async()=>{const _0x4d8f37=_0x354e88;if(activeSequence[_0x4d8f37(0x106)]>0x1)await saveCompletedSequence(_0x24ad22);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x34b4bf){const _0x1e881a=a0_0x3140d7;try{const _0xc5ad49=await _0x34b4bf[_0x1e881a(0xe5)]('LTM.trainingData.sequences');let _0x1bb5f4=[];if(_0xc5ad49&&_0xc5ad49[_0x1e881a(0x171)])try{_0x1bb5f4=JSON['parse'](_0xc5ad49[_0x1e881a(0x171)]);}catch(_0x417fac){}const _0x54055b=activeSequence[0x0]['ts'],_0x2221d2=activeSequence[_0x1e881a(0xe1)](_0x4b46a9=>({'loc':_0x4b46a9[_0x1e881a(0x1d9)],'t_delta':Math[_0x1e881a(0x164)]((_0x4b46a9['ts']-_0x54055b)/0x3e8)})),_0x5904f4={'timestamp':new Date(_0x54055b)[_0x1e881a(0xdf)](),'steps':_0x2221d2,'duration':Math['round']((activeSequence[activeSequence[_0x1e881a(0x106)]-0x1]['ts']-_0x54055b)/0x3e8),'daytime':new Date(_0x54055b)[_0x1e881a(0x150)]()};_0x1bb5f4['push'](_0x5904f4);if(_0x1bb5f4[_0x1e881a(0x106)]>MAX_TRAINING_SET_SIZE)_0x1bb5f4['shift']();await _0x34b4bf[_0x1e881a(0xba)](_0x1e881a(0xb1),{'val':JSON[_0x1e881a(0xdb)](_0x1bb5f4),'ack':!![]}),runSecurityCheck(_0x34b4bf,_0x5904f4);}catch(_0x502451){_0x34b4bf[_0x1e881a(0x12a)][_0x1e881a(0x175)](_0x1e881a(0x1c1)+_0x502451['message']);}}function runSecurityCheck(_0x585c4c,_0x4859e1){const _0x2d6865=a0_0x3140d7;if(!_0x585c4c[_0x2d6865(0x189)])return;sendToPython(_0x585c4c,_0x2d6865(0x1aa),{'sequence':_0x4859e1});}async function createDailyDigest(_0x531edf){const _0xd0e925=a0_0x3140d7;if(!_0x531edf['isProVersion'])return;await _0x531edf[_0xd0e925(0xba)](LTM_DP_STATUS,{'val':_0xd0e925(0x13a),'ack':!![]});if(!_0x531edf[_0xd0e925(0x1e4)]||_0x531edf[_0xd0e925(0x180)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x531edf[_0xd0e925(0xba)](LTM_DP_STATUS,{'val':'Skipped\x20(No\x20AI\x20or\x20Data)','ack':!![]});return;}const _0x2a4690=JSON['parse'](JSON['stringify'](_0x531edf[_0xd0e925(0x180)])),_0x19ddcd=_0x2a4690[_0xd0e925(0x106)],_0x67bf2b='ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a'+JSON[_0xd0e925(0xdb)](_0x2a4690);try{const _0x59a5e4=await _0x531edf[_0xd0e925(0x1e4)]['generateContent'](_0x67bf2b),_0x99b1cf=JSON[_0xd0e925(0x7a)](_0x59a5e4[_0xd0e925(0x144)][_0xd0e925(0xc6)]()['replace'](/```json|```/g,'')[_0xd0e925(0x113)]()),_0x3c0326={'timestamp':new Date()[_0xd0e925(0xdf)](),'eventCount':_0x19ddcd,'summary':_0x99b1cf[_0xd0e925(0x111)]||'Digest','activityLevel':_0x99b1cf['activityLevel']||'normal','systemMode':_0x531edf['currentSystemMode']};_0x531edf[_0xd0e925(0x19f)]['push'](_0x3c0326),await saveDailyDigests(_0x531edf),_0x531edf[_0xd0e925(0x180)]=[],await saveRawEventLog(_0x531edf),await _0x531edf['setStateAsync'](LTM_DP_STATUS,{'val':_0xd0e925(0x1f9),'ack':!![]});if(_0x531edf[_0xd0e925(0x189)])sendToPython(_0x531edf,_0xd0e925(0xcb),{'digest':_0x3c0326});}catch(_0x21137a){_0x531edf[_0xd0e925(0x12a)]['error'](_0x21137a[_0xd0e925(0xa5)]);}}async function runBaselineDriftAnalysis(_0x277d9c){const _0x240baa=a0_0x3140d7;if(!_0x277d9c[_0x240baa(0x189)]||!_0x277d9c[_0x240baa(0x1e4)])return;const _0x55d008=_0x277d9c['config'][_0x240baa(0x15c)]||0xe;if(_0x277d9c[_0x240baa(0x19f)]['length']<_0x55d008+0x7){await _0x277d9c[_0x240baa(0xba)](LTM_DP_DRIFT_STATUS,{'val':_0x240baa(0x162),'ack':!![]});return;}const _0x16ab49=_0x277d9c[_0x240baa(0x19f)]['slice'](-_0x55d008),_0x2ddf6e=_0x277d9c[_0x240baa(0x19f)][_0x240baa(0x18a)](0x0,_0x277d9c[_0x240baa(0x19f)][_0x240baa(0x106)]-_0x55d008),_0x48e91e='ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20'+JSON['stringify'](_0x2ddf6e)+_0x240baa(0x1c4)+JSON[_0x240baa(0xdb)](_0x16ab49);try{const _0x414c47=await _0x277d9c[_0x240baa(0x1e4)][_0x240baa(0x1e6)](_0x48e91e),_0x55f2a0=JSON['parse'](_0x414c47['response'][_0x240baa(0xc6)]()[_0x240baa(0xf6)](/```json|```/g,'')[_0x240baa(0x113)]());_0x55f2a0[_0x240baa(0xf7)]&&(await _0x277d9c[_0x240baa(0xba)](LTM_DP_DRIFT_STATUS,{'val':_0x55f2a0[_0x240baa(0xf7)],'ack':!![]}),await _0x277d9c['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0x55f2a0[_0x240baa(0xa1)],'ack':!![]}),await _0x277d9c['setStateAsync'](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x240baa(0xad)](),'ack':!![]}));}catch(_0x10c215){}}async function sendMorningBriefing(_0x28e442){const _0x3147b6=a0_0x3140d7;if(!_0x28e442[_0x3147b6(0x1e4)])return;try{const _0x147d12='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x4ec0bb=await _0x28e442['geminiModel'][_0x3147b6(0x1e6)](_0x147d12),_0x477eec=_0x4ec0bb['response'][_0x3147b6(0xc6)]();sendNotification(_0x28e442,_0x3147b6(0x131)+_0x477eec);}catch(_0x53d283){_0x28e442[_0x3147b6(0x12a)][_0x3147b6(0x175)](_0x3147b6(0x17a)+_0x53d283[_0x3147b6(0xa5)]);}}function stopPythonService(_0x141139){const _0x1b48bf=a0_0x3140d7;if(_0x141139['pythonProcess']){try{_0x141139[_0x1b48bf(0x17e)][_0x1b48bf(0xf5)]();}catch(_0x3a1883){}_0x141139[_0x1b48bf(0x17e)]=null;}}function sendToPython(_0x3c5051,_0x4c38f3,_0x1832e3={}){const _0x31510d=a0_0x3140d7;if(!_0x3c5051['pythonProcess']||!_0x3c5051['pythonProcess'][_0x31510d(0xc8)]['writable'])return;const _0x272a9b=JSON[_0x31510d(0xdb)]({'command':_0x4c38f3,..._0x1832e3});try{_0x3c5051[_0x31510d(0x17e)][_0x31510d(0xc8)]['write'](_0x272a9b+'\x0a');}catch(_0xee4dbb){}}function runPythonHealthCheck(_0x3c67ff){const _0x46592b=a0_0x3140d7;if(!_0x3c67ff[_0x46592b(0x19f)]||_0x3c67ff[_0x46592b(0x19f)]['length']<0x2)return;const _0x15c9ad=_0x3c67ff[_0x46592b(0x19f)]['map'](_0x2ef9e9=>{const _0x5df2a0=_0x46592b,_0x4fc594=(_0x2ef9e9['activityLevel']||'')[_0x5df2a0(0x16f)]();return ACTIVITY_LEVEL_MAP[_0x4fc594]||0x32;});sendToPython(_0x3c67ff,'ANALYZE_TREND',{'values':_0x15c9ad,'tag':'Activity-Level'});}function a0_0x5e81(_0x6f6c1,_0x3cd53a){const _0x58844d=a0_0x2432();return a0_0x5e81=function(_0x3f31f3,_0x26a866){_0x3f31f3=_0x3f31f3-0x71;let _0x24323c=_0x58844d[_0x3f31f3];return _0x24323c;},a0_0x5e81(_0x6f6c1,_0x3cd53a);}function handlePythonResult(_0x56d99a,_0x2fbb19){const _0x56037b=a0_0x3140d7;if(_0x2fbb19[_0x56037b(0xbd)]===_0x56037b(0x18f))_0x56d99a[_0x56037b(0x12a)]['debug'](_0x56037b(0xd6));else{if(_0x2fbb19[_0x56037b(0xbd)]===_0x56037b(0xcf)){const {anomaly_score:_0x209705,is_anomaly:_0x358467,threshold:_0x589400,explanation:_0x10cf0c}=_0x2fbb19[_0x56037b(0x1c8)];_0x56d99a['log']['info'](_0x56037b(0x1e7)+_0x209705['toFixed'](0x5)+'\x20->\x20'+(_0x358467?_0x56037b(0x118):'OK')),_0x56d99a[_0x56037b(0xba)](_0x56037b(0x122),{'val':_0x209705,'ack':!![]}),_0x56d99a[_0x56037b(0xba)]('analysis.security.lastCheck',{'val':new Date()[_0x56037b(0xdf)](),'ack':!![]});if(_0x589400)_0x56d99a[_0x56037b(0xba)](_0x56037b(0xd3),{'val':_0x589400,'ack':!![]});if(_0x358467){let _0x178677='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x209705[_0x56037b(0x11a)](0x4)+')';if(_0x10cf0c&&_0x10cf0c!==_0x56037b(0x99))_0x178677+=_0x56037b(0x13c)+_0x10cf0c;_0x56d99a[_0x56037b(0xba)](_0x56037b(0x170),{'val':!![],'ack':!![]}),_0x56d99a[_0x56037b(0xba)](_0x56037b(0x119),{'val':_0x178677,'ack':!![]}),sendNotification(_0x56d99a,_0x56037b(0xfc)+_0x178677,![],!![]);}}else{if(_0x2fbb19['type']===_0x56037b(0xe3)){const _0x18cfe1=_0x2fbb19[_0x56037b(0x1c8)][_0x56037b(0x94)]||'',_0x17da42=_0x2fbb19[_0x56037b(0x1c8)]['threshold'],_0x3be9fc=_0x2fbb19['payload'][_0x56037b(0x79)]?_0x56037b(0x169)+new Date()[_0x56037b(0x196)]()+'\x20('+_0x18cfe1+')':_0x56037b(0x86)+_0x2fbb19['payload'][_0x56037b(0x1e2)];_0x56d99a[_0x56037b(0xba)](_0x56037b(0x1b1),{'val':_0x3be9fc,'ack':!![]});if(_0x2fbb19[_0x56037b(0x1c8)]['success']&&_0x17da42)_0x56d99a[_0x56037b(0xba)](_0x56037b(0xd3),{'val':_0x17da42,'ack':!![]});}else{if(_0x2fbb19[_0x56037b(0xbd)]===_0x56037b(0x10c)){const {patterns:_0xa79770}=_0x2fbb19['payload'];if(_0xa79770&&_0xa79770[_0x56037b(0x106)]>0x0){_0x56d99a[_0x56037b(0x12a)]['info'](_0x56037b(0x11c)+_0xa79770['length']+_0x56037b(0xe6)),_0x56d99a[_0x56037b(0xba)](_0x56037b(0x151),{'val':JSON[_0x56037b(0xdb)](_0xa79770),'ack':!![]});const _0x216af4=_0xa79770[0x0],_0x122f2d=_0x56037b(0x7b)+_0x216af4[_0x56037b(0x1f1)]+'\x20('+(_0x216af4[_0x56037b(0x17f)]*0x64)[_0x56037b(0x11a)](0x0)+'%)';_0x56d99a[_0x56037b(0xba)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x56d99a[_0x56037b(0xba)](_0x56037b(0x15b),{'val':_0x122f2d,'ack':!![]});}else _0x56d99a[_0x56037b(0x12a)]['info']('ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.'),_0x56d99a[_0x56037b(0xba)](_0x56037b(0xc0),{'val':![],'ack':!![]}),_0x56d99a[_0x56037b(0xba)]('analysis.automation.detectedPatterns',{'val':'[]','ack':!![]});}else{if(_0x2fbb19[_0x56037b(0xbd)]===_0x56037b(0xe7)){if(_0x2fbb19[_0x56037b(0x1c8)]['success'])try{const _0xe75bcd=JSON[_0x56037b(0x7a)](_0x2fbb19[_0x56037b(0x1c8)][_0x56037b(0x94)]);if(_0xe75bcd[_0x56037b(0x93)])_0x56d99a[_0x56037b(0xba)](_0x56037b(0x11e),{'val':JSON[_0x56037b(0xdb)](_0xe75bcd[_0x56037b(0x93)]),'ack':!![]});if(_0xe75bcd['heating'])_0x56d99a[_0x56037b(0xba)](_0x56037b(0x92),{'val':JSON[_0x56037b(0xdb)](_0xe75bcd[_0x56037b(0x14f)]),'ack':!![]});}catch(_0x57994c){}}else{if(_0x2fbb19[_0x56037b(0xbd)]===_0x56037b(0x1ee)){if(_0x2fbb19['payload'][_0x56037b(0x79)])_0x56d99a[_0x56037b(0x12a)][_0x56037b(0x1b9)]('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x2fbb19[_0x56037b(0xbd)]===_0x56037b(0x7c))_0x56d99a[_0x56037b(0xba)](_0x56037b(0x1bc),{'val':new Date()[_0x56037b(0xdf)](),'ack':!![]}),_0x56d99a[_0x56037b(0xba)](_0x56037b(0x172),{'val':_0x2fbb19['payload'][_0x56037b(0x1c3)],'ack':!![]});else{if(_0x2fbb19[_0x56037b(0xbd)]==='TREND_RESULT')_0x56d99a[_0x56037b(0xba)](_0x56037b(0x74),{'val':_0x2fbb19[_0x56037b(0x1c8)][_0x56037b(0xa3)],'ack':!![]}),_0x56d99a[_0x56037b(0xba)](_0x56037b(0x154),{'val':_0x2fbb19[_0x56037b(0x1c8)]['change_percent'],'ack':!![]});else{if(_0x2fbb19[_0x56037b(0xbd)]===_0x56037b(0x1e5)){const {speed_trend:_0x82ad8}=_0x2fbb19[_0x56037b(0x1c8)];if(_0x82ad8!==undefined)_0x56d99a['setStateAsync']('analysis.health.gaitSpeed',{'val':_0x82ad8,'ack':!![]});}else{if(_0x2fbb19[_0x56037b(0xbd)]===_0x56037b(0x191)){const {forecast:_0x2e9f9c}=_0x2fbb19[_0x56037b(0x1c8)];if(_0x2e9f9c)_0x56d99a[_0x56037b(0xba)]('analysis.energy.forecast',{'val':JSON[_0x56037b(0xdb)](_0x2e9f9c),'ack':!![]});}else{if(_0x2fbb19['type']==='TOPOLOGY_RESULT'){const {data:_0x450363}=_0x2fbb19[_0x56037b(0x1c8)];_0x450363&&(_0x56d99a['log'][_0x56037b(0x1b9)](_0x56037b(0x148)),_0x56d99a[_0x56037b(0xba)](_0x56037b(0x19e),{'val':JSON[_0x56037b(0xdb)](_0x450363),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x579097){const _0x1c341c=a0_0x3140d7;let _0x2e94e9=_0x1c341c(0x95);if(fs['existsSync'](installer[_0x1c341c(0x1a9)]))_0x2e94e9=installer[_0x1c341c(0x1a9)];try{const _0x3461bb=path[_0x1c341c(0x1db)](__dirname,_0x1c341c(0xac),'service.py');_0x579097[_0x1c341c(0x17e)]=spawn(_0x2e94e9,[_0x3461bb]),_0x579097[_0x1c341c(0x17e)][_0x1c341c(0x1ab)]['on'](_0x1c341c(0x1f5),_0x5e997f=>{const _0x2085b7=_0x1c341c,_0x4f0382=_0x5e997f[_0x2085b7(0x1f3)]()[_0x2085b7(0x1bb)]('\x0a');_0x4f0382[_0x2085b7(0x1ce)](_0x3a789c=>{const _0x3d8683=_0x2085b7,_0xa980af=_0x3a789c['trim']();if(!_0xa980af)return;if(_0xa980af[_0x3d8683(0x120)](_0x3d8683(0xa6)))_0x579097[_0x3d8683(0x12a)][_0x3d8683(0x16e)](_0x3d8683(0x116)+_0xa980af[_0x3d8683(0x1af)](0x5)[_0x3d8683(0x113)]());else{if(_0xa980af[_0x3d8683(0x120)](_0x3d8683(0x80)))try{const _0x3cf4de=JSON['parse'](_0xa980af[_0x3d8683(0x1af)](0x8)['trim']());handlePythonResult(_0x579097,_0x3cf4de);}catch(_0x315227){}}});}),_0x579097[_0x1c341c(0x17e)]['on'](_0x1c341c(0x75),_0x16a0e9=>{const _0x11aa02=_0x1c341c;_0x579097[_0x11aa02(0x17e)]=null;});}catch(_0x3c4983){_0x579097[_0x1c341c(0x12a)][_0x1c341c(0x175)](_0x1c341c(0x173)+_0x3c4983['message']);}}async function runAutopilot(_0x860f05){const _0x18361f=a0_0x3140d7;_0x860f05[_0x18361f(0x12a)][_0x18361f(0x16e)](_0x18361f(0xe9)),await runGeminiAnalysis(_0x860f05),updateHealthVector(_0x860f05),triggerGaitAnalysis(_0x860f05),triggerEnergyPrediction(_0x860f05);}function a0_0x2432(){const _0x4b9181=['.\x20SYSTEM_MODE:\x20','is_anomaly','\x0aSTB:\x20','enum.rooms.*','config','fenster','payload','includes','eventHistory','outdoorSensorId','Anomaly\x20Score','Err:\x20','forEach','analysis.training.triggerSecurity','weatherInstance','1819713fcntLw','setupModeResetScheduler','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','analysis.automation.targetId','inactivityThresholdHours','subscribeStates','logDuplicates','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','loc','Current\x20Threshold','join','LTM.trainingData.thermodynamics','location','occupancy','simulateButler','17701090wNcsLt','Train\x20Health','reason','object','geminiModel','GAIT_RESULT','generateContent','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','Trend\x20Value','alertReason','(((.+)+)+)+$','telegram','Heating\x20Score','.\x20EMERGENCY:\x20','HEALTH_TRAIN_RESULT','fill','unshift','rule','cogni-living','toString','triggerDailyDigest','data','namespace','vacation','contact','Success','./lib/installer','Alert\x20Reason','Restoring\x20sensor\x20cache...','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','LTM.triggerDailyDigest','description','licht','bind','system.isPresent','analysis.health.trendDiagnosis','close','targetValue','system.config','testApiKey','success','parse','Regel\x20erkannt:\x20','HEALTH_RESULT','useCalendar','isAlert','LTM.dailyDigests','[RESULT]','channel','notifyTelegramEnabled','analysis.training.triggerEnergy','weatherunderground','search','Failed:\x20','getMonth','path','analysis.security.lastCheck','.\x20KONTEXT:\x20','No\x20instance','onMessage','detected','splice','analysis.training','targetId','Insulation\x20Score','analysis.energy.heatingScore','insulation','details','python3','genAI','BUILD_TOPOLOGY','N/A','Unknown','sendTo','Train\x20Comfort','events.history','automationProposal','checkAndInstall','Today\x20Vector\x20(15m)','PARTY','driftDetails','exports','diagnosis','analysis.analysisHistory','message','[LOG]','briefingJob','callback','.NextHours.Location_1.Day_1.current.temp_value','analysis.training.triggerComfort','onReady','python_service','now','Target\x20Value','devices','communicate.request','LTM.trainingData.sequences','floor','boolean','Gait\x20Speed\x20Trend','6487808aesuKn','name','Topology\x20Error:\x20','OK:\x20','1647cSVkOk','setStateAsync','keys','setupLtmScheduler','type','\x20=\x20','modeResetJob','analysis.automation.patternDetected','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','analysis.automation.targetValue','@google/generative-ai','ltmLtbWindowDays','temperatur','text','Alert\x20Status','stdin','setupBriefingScheduler','analysis.lastResult','ANALYZE_HEALTH','models/gemini-flash-latest','Sequences','daswetter','SECURITY_RESULT','Security\x20Monitor','.communicate.request','PRIORITÃ„T:\x20Gesundheit/AAL.','analysis.security.currentThreshold','enum','Thermodynamics','ðŸ\x20Python\x20Pong','Activity\x20Summary','5905210krEjKh','temperature','delObjectAsync','stringify','getCalendarNames','NORMAL','LTM.baselineStatus','toISOString','Â°C,\x20','map','generic','TRAINING_COMPLETE','6ZXPEcu','getStateAsync','\x20new\x20patterns.','ENERGY_TRAIN_RESULT','Training\x20Status','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','exitGraceTimer','9092421fYWsdr','button','extendObjectAsync','Training\x20Error:\x20','dismissAutomation','currentSystemMode','testContext','setHours','getMinutes','analysis.automation.autoApply','kill','replace','baselineDrift','getTime','licenseKey','enum.functions.*','system.mode','âš ï¸\x20SECURITY\x20ALARM:\x20','BUTLER\x20Execution\x20Error:\x20','scanDevices','warn','LTM.driftAnalysis.lastCheck','driftAnalysisTimer','System','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','getObjectAsync','analysis.history_debug_00','length','subscribeForeignStatesAsync','Build\x20Topology','openweathermap','isExit','.\x20EVENTS:\x20','COMFORT_RESULT','common','Trigger\x20Action',')\x20-\x20SAFE\x20BOOT','indicator','summary','getEnums','trim','klima','shift','[PYTHON]\x20','getForeignStateAsync','ANOMALY','analysis.alertReason','toFixed','useWeather','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','analysis.health.todayVector','analysis.energy.insulationScore','onStateChange','startsWith','normal','analysis.security.lastScore','autoApply','geminiApiKey','Trigger\x20Analysis','Pattern\x20Detected','Train\x20Security','push','Detected\x20Patterns','log','analysisHistory','ack','getGenerativeModel','systemConfig','PRIORITÃ„T:\x20Sicherheit.','Train\x20Energy','ðŸŒ…\x20Morning\x20Briefing:\x0a','Temperature\x20Forecast','Topology\x20Matrix','getFullYear','ðŸ§ \x20Triggering\x20Security\x20Training...','lastAlertState','motion','Missing\x20data','Unbekannt','Started...','.forecast.current.temp','\x0aGrund:\x20','Daily\x20Digests','Target\x20ID','LTM','Description','onUnload','timestamp','values','response','Deaktiviert\x20(Pro-Feature)','value','analysis.energy.forecast','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','analysis.automation.triggerAction','analysis.security','application/json','accuweather','setForeignStateAsync','9556fdKuzE','heating','getHours','analysis.automation.detectedPatterns','livingContext','ltmJob','analysis.health.trendValue','dependencyInstallInProgress','getDate','analysis.trigger','Event\x20History','analysis.health.gaitSpeed','analysisInterval','analysis.automation.description','ltmStbWindowDays','ANALYZE_GAIT','Last\x20Check','PREDICT_ENERGY','Trend','constructor','N/A\x20(Learning)','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','round','number','status','analysis.training.triggerTopology','Sec-Training\x20started...','Success:\x20','light','apply','door','events.history_debug_00','debug','toLowerCase','analysis.isAlert','val','analysis.health.isAnomaly','Error\x20launching\x20Python:\x20','cogni-living\x20adapter\x20starting\x20(v','error','switch','.Current.WeatherText','.forecast.current.temperature','state','Briefing\x20Error:\x20','2uocpll','getLtmData','systemUUID','pythonProcess','confidence','rawEventLog','triggerBriefing','Gemini\x20Error:\x20','.Current.Temperature','lampe','from','Kein\x20API\x20Key!','Adapter','Gemini\x20Init\x20Error:\x20','isProVersion','slice','string','filter','analysis.triggerBriefing','bewegung','PONG','command','ENERGY_PREDICT_RESULT','setObjectNotExistsAsync','setupDriftAnalysisScheduler','presence','presenceDevices','toLocaleTimeString','apiKey','getForeignObjectsAsync','json','system.presenceWho','1460117JGiZXU','WiFi\x20Presence\x20detected.','analysis.training.triggerHealth','analysis.security.topologyMatrix','dailyDigests','date','endsWith','city','./lib/scanner','LTM.driftAnalysis.baselineDrift','analysisTimer','Lernphase\x20(','events.lastEvent','analysis.activitySummary','PYTHON_EXE','ANALYZE_SEQUENCE','stdout','child_process','minDaysForBaseline','latitude','substring','Kein\x20API\x20Key.','analysis.training.status','exitTimer','online','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','setState','isPresent','LTM.driftAnalysis.driftDetails','cancel','info','pop','split','analysis.health.lastCheck','isGracePeriodActive','scanForDevices','main','sensorLastValues','[RECORDER]\x20Error:\x20'];a0_0x2432=function(){return _0x4b9181;};return a0_0x2432();}async function triggerGaitAnalysis(_0x3036db){const _0x471c21=a0_0x3140d7;if(!_0x3036db[_0x471c21(0x189)])return;try{const _0x57cf68=await _0x3036db[_0x471c21(0xe5)](_0x471c21(0xb1));_0x57cf68&&_0x57cf68[_0x471c21(0x171)]&&sendToPython(_0x3036db,_0x471c21(0x15d),{'sequences':JSON[_0x471c21(0x7a)](_0x57cf68[_0x471c21(0x171)])});}catch(_0x2e5fba){}}async function triggerEnergyPrediction(_0x2b7354){const _0x140cb2=a0_0x3140d7;if(!_0x2b7354[_0x140cb2(0x189)])return;try{const _0xf6817c=await getOutsideTemperatureNumeric(_0x2b7354);if(_0xf6817c===null)return;const _0x1a6f26={},_0x3c1318=_0x2b7354[_0x140cb2(0x1c6)][_0x140cb2(0xaf)]||[];for(const _0x353f5e of _0x3c1318){if(_0x353f5e['type']===_0x140cb2(0xd9)&&_0x353f5e[_0x140cb2(0x1dd)]){const _0x49a8e1=_0x2b7354[_0x140cb2(0x1c0)][_0x353f5e['id']];if(_0x49a8e1!==undefined)_0x1a6f26[_0x353f5e[_0x140cb2(0x1dd)]]=_0x49a8e1;}}Object[_0x140cb2(0xbb)](_0x1a6f26)['length']>0x0&&sendToPython(_0x2b7354,_0x140cb2(0x15f),{'current_temps':_0x1a6f26,'t_out':_0xf6817c});}catch(_0x2a9d55){}}function updateHealthVector(_0x267be9){const _0x49e5ab=a0_0x3140d7;if(!_0x267be9['rawEventLog']||_0x267be9[_0x49e5ab(0x180)][_0x49e5ab(0x106)]===0x0)return;const _0x4db1c3=new Array(0x60)[_0x49e5ab(0x1ef)](0x0),_0x2df2c8=new Date()[_0x49e5ab(0xf2)](0x0,0x0,0x0,0x0);_0x267be9['rawEventLog'][_0x49e5ab(0x1ce)](_0x54a632=>{const _0x55b64d=_0x49e5ab,_0x447166=new Date(_0x54a632[_0x55b64d(0x142)]);if(_0x447166['getTime']()>=_0x2df2c8){const _0x335d7f=_0x447166[_0x55b64d(0x150)](),_0x378add=_0x447166[_0x55b64d(0xf3)](),_0x147d02=_0x335d7f*0x4+Math[_0x55b64d(0xb2)](_0x378add/0xf);if(_0x147d02>=0x0&&_0x147d02<0x60)_0x4db1c3[_0x147d02]++;}}),_0x267be9[_0x49e5ab(0xba)]('analysis.health.todayVector',{'val':JSON[_0x49e5ab(0xdb)](_0x4db1c3),'ack':!![]});}async function getWeatherContext(_0x2a44a5){const _0x521fd7=a0_0x3140d7;if(!_0x2a44a5[_0x521fd7(0x1c6)][_0x521fd7(0x11b)]||!_0x2a44a5[_0x521fd7(0x1c6)][_0x521fd7(0x1d0)])return'Wetterdaten\x20deaktiviert.';try{const _0x5eaef5=_0x2a44a5[_0x521fd7(0x1c6)]['weatherInstance'];let _0x150f35=await _0x2a44a5[_0x521fd7(0x117)](_0x5eaef5+_0x521fd7(0x183));if(!_0x150f35)_0x150f35=await _0x2a44a5['getForeignStateAsync'](_0x5eaef5+'.forecast.current.temperature');let _0x19ae07=await _0x2a44a5[_0x521fd7(0x117)](_0x5eaef5+_0x521fd7(0x177));if(!_0x19ae07)_0x19ae07=await _0x2a44a5['getForeignStateAsync'](_0x5eaef5+'.forecast.current.state');if(_0x150f35&&_0x19ae07)return _0x150f35[_0x521fd7(0x171)]+_0x521fd7(0xe0)+_0x19ae07['val'];}catch(_0x41cbf3){}return'Keine\x20Wetterdaten\x20verfÃ¼gbar.';}async function getCalendarContext(_0x244254){const _0x3c8b75=a0_0x3140d7;if(!_0x244254['config'][_0x3c8b75(0x7d)]||!_0x244254[_0x3c8b75(0x1c6)]['calendarInstance'])return'Kalender\x20deaktiviert.';return'Keine\x20Termine.';}async function getCalendarNames(_0x1227fd,_0xba36d8){return[];}async function saveFeedback(_0x2af893,_0x4409fa){const _0x20bb1a=a0_0x3140d7;_0x2af893[_0x20bb1a(0x12a)][_0x20bb1a(0x1b9)]('ðŸ“\x20Feedback\x20received:\x20'+_0x4409fa['rating']);}async function runGeminiAnalysis(_0x124890,_0x2856f9=''){const _0x39c65b=a0_0x3140d7;if(!_0x124890[_0x39c65b(0x1e4)])return;if(_0x124890[_0x39c65b(0x1ca)][_0x39c65b(0x106)]===0x0)return;const _0x5b60e7=_0x124890[_0x39c65b(0x1ca)][_0x39c65b(0x18a)](0x0,0xf),_0x1fb3ab=await getWeatherContext(_0x124890),_0x5a2add=_0x124890[_0x39c65b(0xf0)],_0x2ae14e=PERSONA_MAPPING[_0x124890['config']['aiPersona']||_0x39c65b(0xe2)],_0x1b1024=_0x124890[_0x39c65b(0x1c6)][_0x39c65b(0x152)]||'Keine\x20Details.';let _0x1facd2=_0x39c65b(0x139);try{const _0x23a553=await _0x124890[_0x39c65b(0xe5)](_0x39c65b(0x19a));if(_0x23a553&&_0x23a553[_0x39c65b(0x171)])_0x1facd2=_0x23a553[_0x39c65b(0x171)];}catch(_0x14e8d1){}let _0x275299=![];try{const _0x13a9da=await _0x124890['getStateAsync'](_0x39c65b(0xf4));if(_0x13a9da&&_0x13a9da[_0x39c65b(0x171)])_0x275299=!![];}catch(_0x511e00){}const _0x2db25c=_0x39c65b(0x1d8)+_0x2ae14e+_0x39c65b(0x8a)+_0x1b1024+_0x39c65b(0x1c2)+_0x5a2add+'.\x20WETTER:\x20'+_0x1fb3ab+'.\x20ANWESEND:\x20'+_0x1facd2+_0x39c65b(0x10b)+JSON[_0x39c65b(0xdb)](_0x5b60e7)+_0x39c65b(0x1ed)+_0x2856f9+_0x39c65b(0x1fd);try{const _0x48d495=await _0x124890[_0x39c65b(0x1e4)][_0x39c65b(0x1e6)](_0x2db25c),_0x35b412=JSON[_0x39c65b(0x7a)](_0x48d495['response'][_0x39c65b(0xc6)]()[_0x39c65b(0xf6)](/```json|```/g,'')[_0x39c65b(0x113)]());await _0x124890['setStateAsync'](_0x39c65b(0xca),{'val':JSON[_0x39c65b(0xdb)](_0x35b412),'ack':!![]});if(_0x35b412[_0x39c65b(0x111)])await _0x124890['setStateAsync'](_0x39c65b(0x1a8),{'val':_0x35b412[_0x39c65b(0x111)],'ack':!![]});const _0x5aea07={'timestamp':Date[_0x39c65b(0xad)](),'id':Date[_0x39c65b(0xad)]()[_0x39c65b(0x1f3)](),'analysis':{'activity':{'summary':_0x35b412[_0x39c65b(0x111)],'isAlert':_0x35b412[_0x39c65b(0x7e)],'alertReason':_0x35b412[_0x39c65b(0x1e9)]},'comfort':{'automationProposal':_0x35b412['automationProposal']}}};await updateAnalysisHistory(_0x124890,_0x5aea07);const _0x20a572=_0x35b412[_0x39c65b(0x7e)]||![];_0x20a572!==_0x124890[_0x39c65b(0x136)]&&(await _0x124890[_0x39c65b(0xba)](_0x39c65b(0x170),{'val':_0x20a572,'ack':!![]}),_0x124890[_0x39c65b(0x136)]=_0x20a572,_0x20a572&&(await _0x124890[_0x39c65b(0xba)](_0x39c65b(0x119),{'val':_0x35b412[_0x39c65b(0x1e9)],'ack':!![]}),sendNotification(_0x124890,'âš ï¸\x20ALARM:\x20'+_0x35b412[_0x39c65b(0x1e9)],![],_0x35b412['isEmergency'])));if(_0x35b412['automationProposal']&&_0x35b412[_0x39c65b(0x9d)][_0x39c65b(0x8d)]){await _0x124890[_0x39c65b(0xba)](_0x39c65b(0xc0),{'val':!![],'ack':!![]}),await _0x124890['setStateAsync'](_0x39c65b(0x15b),{'val':_0x35b412[_0x39c65b(0x9d)][_0x39c65b(0x1ff)],'ack':!![]}),await _0x124890[_0x39c65b(0xba)](_0x39c65b(0x1d4),{'val':_0x35b412[_0x39c65b(0x9d)][_0x39c65b(0x90)],'ack':!![]}),await _0x124890[_0x39c65b(0xba)](_0x39c65b(0xc2),{'val':JSON['stringify'](_0x35b412[_0x39c65b(0x9d)][_0x39c65b(0x76)]),'ack':!![]});if(_0x275299)executeAutomationAction(_0x124890);}}catch(_0x54ebbe){_0x124890['log'][_0x39c65b(0x175)](_0x39c65b(0x182)+_0x54ebbe['message']);}}async function startSystem(_0x184cf1){const _0x150415=a0_0x3140d7;_0x184cf1[_0x150415(0x12a)]['info'](_0x150415(0xc1)),await initZombies(_0x184cf1);try{_0x184cf1['isProVersion']=await checkLicense(_0x184cf1[_0x150415(0x1c6)][_0x150415(0xf9)]);}catch(_0x1d1bb2){}if(!_0x184cf1[_0x150415(0x1c6)][_0x150415(0x1d5)]||_0x184cf1[_0x150415(0x1c6)][_0x150415(0x1d5)]<0.1)_0x184cf1[_0x150415(0x1c6)][_0x150415(0x1d5)]=0xc;await initHistory(_0x184cf1),await initSystemConfig(_0x184cf1);if(_0x184cf1[_0x150415(0x1c6)][_0x150415(0x124)])try{_0x184cf1[_0x150415(0x96)]=new GoogleGenerativeAI(_0x184cf1[_0x150415(0x1c6)]['geminiApiKey']),_0x184cf1[_0x150415(0x1e4)]=_0x184cf1[_0x150415(0x96)][_0x150415(0x12d)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x150415(0x14b)}}),_0x184cf1[_0x150415(0x12a)][_0x150415(0x1b9)]('Gemini\x20AI\x20initialized.');}catch(_0x49d306){_0x184cf1[_0x150415(0x12a)]['error'](_0x150415(0x188)+_0x49d306[_0x150415(0xa5)]);}await createAllObjects(_0x184cf1),await loadSystemMode(_0x184cf1),await loadRawEventLog(_0x184cf1),await loadDailyDigests(_0x184cf1),_0x184cf1[_0x150415(0x1d6)](_0x150415(0x157)),_0x184cf1[_0x150415(0x1d6)](LTM_DP_TRIGGER_DIGEST),_0x184cf1[_0x150415(0x1d6)]('system.mode'),_0x184cf1['subscribeStates'](_0x150415(0x18d)),_0x184cf1[_0x150415(0x1d6)](_0x150415(0x149)),_0x184cf1[_0x150415(0x1d6)]('analysis.automation.autoApply'),_0x184cf1[_0x150415(0x1d6)](_0x150415(0x1cf)),_0x184cf1[_0x150415(0x1d6)]('analysis.training.triggerHealth'),_0x184cf1['subscribeStates'](_0x150415(0x83)),_0x184cf1['subscribeStates'](_0x150415(0xaa)),_0x184cf1[_0x150415(0x1d6)](_0x150415(0x167)),await initSensorSubscriptions(_0x184cf1),await initPresenceSubscriptions(_0x184cf1),await setupTelegramListener(_0x184cf1),setTimeout(()=>checkWifiPresence(_0x184cf1),0x1388);if(_0x184cf1[_0x150415(0x1a5)])clearInterval(_0x184cf1[_0x150415(0x1a5)]);const _0x4c2cda=_0x184cf1[_0x150415(0x1c6)][_0x150415(0x15a)]||0xf;_0x4c2cda>0x0&&(_0x184cf1['analysisTimer']=setInterval(()=>{runAutopilot(_0x184cf1);},_0x4c2cda*0x3c*0x3e8)),schedulers[_0x150415(0xbc)](_0x184cf1,()=>createDailyDigest(_0x184cf1)),schedulers[_0x150415(0x1d2)](_0x184cf1),schedulers[_0x150415(0x193)](_0x184cf1,()=>runBaselineDriftAnalysis(_0x184cf1)),schedulers[_0x150415(0xc9)](_0x184cf1,()=>sendMorningBriefing(_0x184cf1)),startPythonService(_0x184cf1),setTimeout(()=>{_0x184cf1['pythonProcess']&&(runPythonHealthCheck(_0x184cf1),triggerGaitAnalysis(_0x184cf1),triggerEnergyPrediction(_0x184cf1)),updateHealthVector(_0x184cf1);},0x1388);}class CogniLiving extends utils[a0_0x3140d7(0x187)]{constructor(_0x3846b2){const _0x1d4bcd=a0_0x3140d7;super({..._0x3846b2,'name':_0x1d4bcd(0x1f2)}),this['eventHistory']=[],this[_0x1d4bcd(0x12b)]=[],this[_0x1d4bcd(0x180)]=[],this[_0x1d4bcd(0x19f)]=[],this['sensorLastValues']={},this[_0x1d4bcd(0x12e)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x1d4bcd(0x1b6)]=!![],this[_0x1d4bcd(0x1b2)]=null,this[_0x1d4bcd(0xea)]=null,this[_0x1d4bcd(0x1bd)]=![],this['genAI']=null,this[_0x1d4bcd(0x1e4)]=null,this['currentSystemMode']=SYSTEM_MODES[_0x1d4bcd(0xdd)],this['isProVersion']=![],this[_0x1d4bcd(0x136)]=![],this[_0x1d4bcd(0x17d)]='unknown',this['analysisTimer']=null,this[_0x1d4bcd(0x153)]=null,this[_0x1d4bcd(0xbf)]=null,this['driftAnalysisTimer']=null,this[_0x1d4bcd(0xa7)]=null,this[_0x1d4bcd(0x17e)]=null,this[_0x1d4bcd(0x155)]=![],this['on']('ready',this[_0x1d4bcd(0xab)][_0x1d4bcd(0x72)](this)),this['on']('stateChange',this[_0x1d4bcd(0x11f)][_0x1d4bcd(0x72)](this)),this['on']('unload',this[_0x1d4bcd(0x141)][_0x1d4bcd(0x72)](this)),this['on'](_0x1d4bcd(0xa5),this[_0x1d4bcd(0x8c)][_0x1d4bcd(0x72)](this));}async[a0_0x3140d7(0xab)](){const _0x3418be=a0_0x3140d7;this[_0x3418be(0x12a)][_0x3418be(0x1b9)](_0x3418be(0x174)+this['version']+_0x3418be(0x10f));if(!installer[_0x3418be(0x9e)](this,()=>startSystem(this)))return;}[a0_0x3140d7(0x141)](_0x6a83aa){const _0x2cd7d7=a0_0x3140d7;if(this['analysisTimer'])clearInterval(this['analysisTimer']);if(this['driftAnalysisTimer'])clearInterval(this[_0x2cd7d7(0x101)]);if(this[_0x2cd7d7(0x153)])this[_0x2cd7d7(0x153)][_0x2cd7d7(0x1b8)]();if(this[_0x2cd7d7(0xbf)])this[_0x2cd7d7(0xbf)][_0x2cd7d7(0x1b8)]();if(this[_0x2cd7d7(0xa7)])this[_0x2cd7d7(0xa7)][_0x2cd7d7(0x1b8)]();if(this[_0x2cd7d7(0x1b2)])clearTimeout(this[_0x2cd7d7(0x1b2)]);if(this[_0x2cd7d7(0xea)])clearTimeout(this[_0x2cd7d7(0xea)]);stopPythonService(this),_0x6a83aa();}async['onStateChange'](_0xdd4318,_0x1e8484){const _0x5a602f=a0_0x3140d7;if(!_0x1e8484||this[_0x5a602f(0x155)])return;if(_0xdd4318[_0x5a602f(0x1c9)](_0x5a602f(0x1eb))&&_0xdd4318[_0x5a602f(0x1a1)](_0x5a602f(0xb0))&&_0x1e8484['val']){await handleTelegramResponse(this,_0x1e8484[_0x5a602f(0x171)]);return;}if(_0xdd4318===this[_0x5a602f(0x1f6)]+'.'+SYSTEM_DP_MODE){if(_0x1e8484['val']&&Object[_0x5a602f(0x143)](SYSTEM_MODES)['includes'](_0x1e8484[_0x5a602f(0x171)])){this[_0x5a602f(0xf0)]=_0x1e8484[_0x5a602f(0x171)];if(_0x1e8484[_0x5a602f(0x171)]===SYSTEM_MODES['VACATION'])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x1e8484[_0x5a602f(0x12c)])this['setState'](_0xdd4318,{'val':this[_0x5a602f(0xf0)],'ack':!![]});return;}if(!_0x1e8484[_0x5a602f(0x12c)]){_0xdd4318['includes']('analysis.trigger')&&_0x1e8484[_0x5a602f(0x171)]&&(this[_0x5a602f(0x1b5)](_0xdd4318,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0xdd4318['includes'](_0x5a602f(0x1f4))&&_0x1e8484[_0x5a602f(0x171)]){this[_0x5a602f(0x1b5)](_0xdd4318,{'val':![],'ack':!![]});if(this['isProVersion'])createDailyDigest(this);}_0xdd4318[_0x5a602f(0x1c9)](_0x5a602f(0x181))&&_0x1e8484['val']&&(this[_0x5a602f(0x1b5)](_0xdd4318,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0xdd4318['includes']('automation.triggerAction')&&_0x1e8484[_0x5a602f(0x171)]&&(this[_0x5a602f(0x1b5)](_0xdd4318,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0xdd4318[_0x5a602f(0x1c9)](_0x5a602f(0x1cf))&&_0x1e8484[_0x5a602f(0x171)]){this[_0x5a602f(0x1b5)](_0xdd4318,{'val':![],'ack':!![]});if(this[_0x5a602f(0x189)])try{const _0x5567b5=await this[_0x5a602f(0xe5)]('LTM.trainingData.sequences');if(_0x5567b5&&_0x5567b5[_0x5a602f(0x171)]){const _0x45d2c2=JSON[_0x5a602f(0x7a)](_0x5567b5[_0x5a602f(0x171)]);this[_0x5a602f(0x12a)]['info'](_0x5a602f(0x135)),this['setStateAsync'](_0x5a602f(0x1b1),{'val':_0x5a602f(0x168),'ack':!![]}),sendToPython(this,'TRAIN_SECURITY',{'sequences':_0x45d2c2});}}catch(_0x47fca9){this[_0x5a602f(0x12a)]['error'](_0x5a602f(0xee)+_0x47fca9[_0x5a602f(0xa5)]);}}if(_0xdd4318[_0x5a602f(0x1c9)]('analysis.training.triggerHealth')&&_0x1e8484[_0x5a602f(0x171)]){this['setState'](_0xdd4318,{'val':![],'ack':!![]});if(this[_0x5a602f(0x189)])try{const _0x4de42a=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x4de42a&&_0x4de42a[_0x5a602f(0x171)])sendToPython(this,'TRAIN_HEALTH',{'digests':JSON[_0x5a602f(0x7a)](_0x4de42a['val'])});}catch(_0x756bd1){}}if(_0xdd4318[_0x5a602f(0x1c9)](_0x5a602f(0x83))&&_0x1e8484[_0x5a602f(0x171)]){this[_0x5a602f(0x1b5)](_0xdd4318,{'val':![],'ack':!![]});if(this[_0x5a602f(0x189)])try{const _0x560cc9=await this[_0x5a602f(0xe5)]('LTM.trainingData.thermodynamics');if(_0x560cc9&&_0x560cc9[_0x5a602f(0x171)])sendToPython(this,'TRAIN_ENERGY',{'points':JSON['parse'](_0x560cc9['val'])});}catch(_0x297e52){}}if(_0xdd4318[_0x5a602f(0x1c9)](_0x5a602f(0xaa))&&_0x1e8484[_0x5a602f(0x171)]){this[_0x5a602f(0x1b5)](_0xdd4318,{'val':![],'ack':!![]});if(this[_0x5a602f(0x189)])try{const _0x101bb7=await this[_0x5a602f(0xe5)](LTM_DP_RAW_LOG);_0x101bb7&&_0x101bb7['val']&&(this['log'][_0x5a602f(0x1b9)](_0x5a602f(0x1b4)),sendToPython(this,'TRAIN_COMFORT',{'events':JSON[_0x5a602f(0x7a)](_0x101bb7[_0x5a602f(0x171)])}));}catch(_0x1c5cf2){}}if(_0xdd4318[_0x5a602f(0x1c9)]('analysis.training.triggerTopology')&&_0x1e8484[_0x5a602f(0x171)]){this['setState'](_0xdd4318,{'val':![],'ack':!![]});if(this[_0x5a602f(0x189)])try{const _0xba9d38=await this[_0x5a602f(0xe5)](_0x5a602f(0xb1));if(_0xba9d38&&_0xba9d38[_0x5a602f(0x171)]){const _0x310519=JSON[_0x5a602f(0x7a)](_0xba9d38[_0x5a602f(0x171)]);this[_0x5a602f(0x12a)][_0x5a602f(0x1b9)](_0x5a602f(0x1d3)),sendToPython(this,_0x5a602f(0x97),{'sequences':_0x310519});}}catch(_0x193914){this['log'][_0x5a602f(0x175)](_0x5a602f(0xb7)+_0x193914[_0x5a602f(0xa5)]);}}return;}if(this[_0x5a602f(0x1c6)][_0x5a602f(0x195)]&&this[_0x5a602f(0x1c6)]['presenceDevices'][_0x5a602f(0x1c9)](_0xdd4318)){await checkWifiPresence(this);return;}const _0x5c6365=(this[_0x5a602f(0x1c6)][_0x5a602f(0xaf)]||[])['find'](_0x87ca8e=>_0x87ca8e['id']===_0xdd4318);if(_0x5c6365)processSensorEvent(this,_0xdd4318,_0x1e8484,_0x5c6365);}async[a0_0x3140d7(0x8c)](_0x29905f){const _0x76fa2a=a0_0x3140d7;if(typeof _0x29905f===_0x76fa2a(0x1e3)&&_0x29905f['message']){if(_0x29905f[_0x76fa2a(0x190)]===_0x76fa2a(0x78)){const _0x200924=_0x29905f[_0x76fa2a(0xa5)][_0x76fa2a(0x197)]||this['config'][_0x76fa2a(0x124)];if(!_0x200924)return this['sendTo'](_0x29905f[_0x76fa2a(0x185)],_0x29905f['command'],{'success':![],'message':_0x76fa2a(0x1b0)},_0x29905f[_0x76fa2a(0xa8)]);try{const _0x7fb9ff=new GoogleGenerativeAI(_0x200924),_0x2cc008=_0x7fb9ff[_0x76fa2a(0x12d)]({'model':GEMINI_MODEL}),_0x197813=await _0x2cc008['generateContent']('Hi');this['sendTo'](_0x29905f[_0x76fa2a(0x185)],_0x29905f[_0x76fa2a(0x190)],{'success':!![],'message':_0x76fa2a(0xb8)+_0x197813[_0x76fa2a(0x144)][_0x76fa2a(0xc6)]()},_0x29905f[_0x76fa2a(0xa8)]);}catch(_0x4f9749){this[_0x76fa2a(0x9a)](_0x29905f['from'],_0x29905f[_0x76fa2a(0x190)],{'success':![],'message':_0x76fa2a(0x1cd)+_0x4f9749[_0x76fa2a(0xa5)]},_0x29905f[_0x76fa2a(0xa8)]);}}else{if(_0x29905f['command']===_0x76fa2a(0xf1)){const _0x51f79b=await getWeatherContext(this),_0x4042e6=await getCalendarContext(this);this[_0x76fa2a(0x9a)](_0x29905f[_0x76fa2a(0x185)],_0x29905f['command'],{'success':!![],'weather':_0x51f79b,'calendar':_0x4042e6},_0x29905f[_0x76fa2a(0xa8)]);}else{if(_0x29905f[_0x76fa2a(0x190)]===_0x76fa2a(0x17c)){if(!this['isProVersion'])return this['sendTo'](_0x29905f[_0x76fa2a(0x185)],_0x29905f[_0x76fa2a(0x190)],{'success':![],'isPro':![]},_0x29905f[_0x76fa2a(0xa8)]);let _0x5340fb={'status':_0x76fa2a(0x98)};try{const _0x569f91=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x5340fb['status']=_0x569f91?_0x569f91['val']:_0x76fa2a(0x98);}catch(_0xaa15f2){}this[_0x76fa2a(0x9a)](_0x29905f[_0x76fa2a(0x185)],_0x29905f[_0x76fa2a(0x190)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x5340fb,'analysisHistory':this[_0x76fa2a(0x12b)]},_0x29905f[_0x76fa2a(0xa8)]);}else{if(_0x29905f[_0x76fa2a(0x190)]==='getOverviewData'){const _0x3f341b=this[_0x76fa2a(0x19f)][_0x76fa2a(0x106)],_0x588f24=new Date(),_0x1a96e8=new Date(_0x588f24[_0x76fa2a(0x134)](),_0x588f24[_0x76fa2a(0x87)](),_0x588f24[_0x76fa2a(0x156)]())['getTime'](),_0x340687=this[_0x76fa2a(0x180)][_0x76fa2a(0x18c)](_0x487263=>new Date(_0x487263[_0x76fa2a(0x142)])['getTime']()>_0x1a96e8)['length'],_0x2d8801=new Array(0x18)[_0x76fa2a(0x1ef)](0x0);this['rawEventLog'][_0x76fa2a(0x1ce)](_0xd7d6fb=>{const _0x3d2cb3=_0x76fa2a,_0x3efbcb=new Date(_0xd7d6fb['timestamp']);if(_0x3efbcb[_0x3d2cb3(0xf8)]()>_0x1a96e8)_0x2d8801[_0x3efbcb[_0x3d2cb3(0x150)]()]++;});let _0x4a6e19={'status':_0x76fa2a(0x98)};try{const _0x57c552=await this[_0x76fa2a(0xe5)](LTM_DP_DRIFT_STATUS);_0x4a6e19[_0x76fa2a(0x166)]=_0x57c552?_0x57c552[_0x76fa2a(0x171)]:_0x76fa2a(0x98);}catch(_0x32cc2a){}let _0xda3a7='';try{const _0x30619a=await this[_0x76fa2a(0xe5)](_0x76fa2a(0x19a));_0xda3a7=_0x30619a?_0x30619a['val']:'';}catch(_0x4ddb63){}let _0x4ed37c=null;!this['geminiModel']&&(_0x4ed37c=this[_0x76fa2a(0x1c6)][_0x76fa2a(0x124)]?'KI-Modell\x20nicht\x20initialisiert':_0x76fa2a(0x186));let _0x2c0640={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x495dae=await this[_0x76fa2a(0xe5)](_0x76fa2a(0xc0));if(_0x495dae&&_0x495dae['val']){_0x2c0640[_0x76fa2a(0x8d)]=!![];const _0x2285d6=await this[_0x76fa2a(0xe5)](_0x76fa2a(0x15b));_0x2c0640[_0x76fa2a(0x1ff)]=_0x2285d6?_0x2285d6[_0x76fa2a(0x171)]:'';const _0x53e4f6=await this[_0x76fa2a(0xe5)]('analysis.automation.targetId');_0x2c0640[_0x76fa2a(0x90)]=_0x53e4f6?_0x53e4f6[_0x76fa2a(0x171)]:'';const _0x5ebd85=await this[_0x76fa2a(0xe5)](_0x76fa2a(0xc2));_0x2c0640[_0x76fa2a(0x76)]=_0x5ebd85?_0x5ebd85[_0x76fa2a(0x171)]:'';}const _0xc2c0c8=await this['getStateAsync'](_0x76fa2a(0xf4));_0x2c0640[_0x76fa2a(0x123)]=_0xc2c0c8?!!_0xc2c0c8['val']:![];}catch(_0x55f867){}this['sendTo'](_0x29905f[_0x76fa2a(0x185)],_0x29905f[_0x76fa2a(0x190)],{'success':!![],'eventHistory':this[_0x76fa2a(0x1ca)][_0x76fa2a(0x18a)](0x0,0xf),'stats':{'digestCount':_0x3f341b,'eventCountToday':_0x340687,'hourlyActivity':_0x2d8801,'driftStatus':_0x4a6e19['status'],'isPresent':this[_0x76fa2a(0x1b6)],'presenceWho':_0xda3a7,'minDays':this[_0x76fa2a(0x1c6)][_0x76fa2a(0x1ad)]||0x7,'stbDays':this[_0x76fa2a(0x1c6)][_0x76fa2a(0x15c)]||0xe,'ltbDays':this[_0x76fa2a(0x1c6)][_0x76fa2a(0xc4)]||0x3c,'systemError':_0x4ed37c},'automation':_0x2c0640},_0x29905f[_0x76fa2a(0xa8)]);}else{if(_0x29905f[_0x76fa2a(0x190)]===_0x76fa2a(0xfe))try{const _0x34cecc=await scanner[_0x76fa2a(0x1be)](this,_0x29905f[_0x76fa2a(0xa5)]||{});this[_0x76fa2a(0x9a)](_0x29905f[_0x76fa2a(0x185)],_0x29905f[_0x76fa2a(0x190)],{'success':!![],'devices':_0x34cecc},_0x29905f[_0x76fa2a(0xa8)]);}catch(_0x374932){this['sendTo'](_0x29905f[_0x76fa2a(0x185)],_0x29905f[_0x76fa2a(0x190)],{'success':![],'error':_0x374932[_0x76fa2a(0xa5)]},_0x29905f[_0x76fa2a(0xa8)]);}else{if(_0x29905f[_0x76fa2a(0x190)]===_0x76fa2a(0x112)){const _0x4f3e78=await this[_0x76fa2a(0x198)](_0x76fa2a(0xfa),'enum'),_0x1ade28=[];if(_0x4f3e78)for(const _0x3bcd10 in _0x4f3e78){const _0x7b7fcd=_0x4f3e78[_0x3bcd10],_0x37f679=(_0x7b7fcd[_0x76fa2a(0x10d)]&&typeof _0x7b7fcd[_0x76fa2a(0x10d)][_0x76fa2a(0xb6)]===_0x76fa2a(0x1e3)?_0x7b7fcd[_0x76fa2a(0x10d)][_0x76fa2a(0xb6)]['de']:_0x7b7fcd[_0x76fa2a(0x10d)][_0x76fa2a(0xb6)])||_0x7b7fcd[_0x76fa2a(0x10d)][_0x76fa2a(0xb6)];_0x1ade28[_0x76fa2a(0x128)]({'id':_0x3bcd10,'name':_0x37f679});}const _0x3a7812=await this['getForeignObjectsAsync'](_0x76fa2a(0x1c5),_0x76fa2a(0xd4)),_0x1a8e66=[];if(_0x3a7812)for(const _0x5506aa in _0x3a7812){const _0x3c23e0=_0x3a7812[_0x5506aa],_0x1ca181=(_0x3c23e0['common']&&typeof _0x3c23e0[_0x76fa2a(0x10d)][_0x76fa2a(0xb6)]===_0x76fa2a(0x1e3)?_0x3c23e0[_0x76fa2a(0x10d)][_0x76fa2a(0xb6)]['de']:_0x3c23e0[_0x76fa2a(0x10d)][_0x76fa2a(0xb6)])||_0x5506aa['split']('.')[_0x76fa2a(0x1ba)]();_0x1a8e66[_0x76fa2a(0x128)](_0x1ca181);}this[_0x76fa2a(0x9a)](_0x29905f[_0x76fa2a(0x185)],_0x29905f[_0x76fa2a(0x190)],{'success':!![],'enums':_0x1ade28,'rooms':_0x1a8e66},_0x29905f[_0x76fa2a(0xa8)]);}else{if(_0x29905f[_0x76fa2a(0x190)]===_0x76fa2a(0xdc)){const _0x514d41=_0x29905f[_0x76fa2a(0xa5)]['instance'];if(!_0x514d41)return this['sendTo'](_0x29905f[_0x76fa2a(0x185)],_0x29905f['command'],{'success':![],'error':_0x76fa2a(0x8b)},_0x29905f['callback']);const _0x15ba87=await getCalendarNames(this,_0x514d41);this[_0x76fa2a(0x9a)](_0x29905f['from'],_0x29905f['command'],{'success':!![],'names':_0x15ba87},_0x29905f['callback']);}else{if(_0x29905f[_0x76fa2a(0x190)]===_0x76fa2a(0x1df)){const {targetId:_0x29112f,targetValue:_0x3a0e32}=_0x29905f[_0x76fa2a(0xa5)];this[_0x76fa2a(0x12a)]['info'](_0x76fa2a(0x103)+_0x29112f+'\x20=\x20'+_0x3a0e32),await this[_0x76fa2a(0xba)](_0x76fa2a(0xc0),{'val':!![],'ack':!![]}),await this[_0x76fa2a(0xba)](_0x76fa2a(0x15b),{'val':'SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20'+_0x29112f,'ack':!![]}),await this['setStateAsync'](_0x76fa2a(0x1d4),{'val':_0x29112f,'ack':!![]}),await this['setStateAsync'](_0x76fa2a(0xc2),{'val':_0x3a0e32,'ack':!![]}),this[_0x76fa2a(0x9a)](_0x29905f[_0x76fa2a(0x185)],_0x29905f['command'],{'success':!![]},_0x29905f[_0x76fa2a(0xa8)]);}else{if(_0x29905f['command']==='submitFeedback'){const {historyId:_0x1e8cee,rating:_0xd23e80,comment:_0x3b7c49,alertReason:_0x16f5a4}=_0x29905f[_0x76fa2a(0xa5)];_0x1e8cee&&_0xd23e80?(await saveFeedback(this,{'timestamp':Date[_0x76fa2a(0xad)](),'historyId':_0x1e8cee,'rating':_0xd23e80,'comment':_0x3b7c49,'alertReason':_0x16f5a4}),this[_0x76fa2a(0x9a)](_0x29905f[_0x76fa2a(0x185)],_0x29905f[_0x76fa2a(0x190)],{'success':!![]},_0x29905f[_0x76fa2a(0xa8)])):this[_0x76fa2a(0x9a)](_0x29905f[_0x76fa2a(0x185)],_0x29905f[_0x76fa2a(0x190)],{'success':![],'error':_0x76fa2a(0x138)},_0x29905f['callback']);}else _0x29905f[_0x76fa2a(0x190)]===_0x76fa2a(0xef)&&(this[_0x76fa2a(0x12a)][_0x76fa2a(0x1b9)]('User\x20dismissed\x20automation\x20proposal.'),await this[_0x76fa2a(0xba)](_0x76fa2a(0xc0),{'val':![],'ack':!![]}),await this[_0x76fa2a(0xba)](_0x76fa2a(0x15b),{'val':'','ack':!![]}),this[_0x76fa2a(0x9a)](_0x29905f['from'],_0x29905f['command'],{'success':!![]},_0x29905f[_0x76fa2a(0xa8)]));}}}}}}}}}}}if(require[a0_0x3140d7(0x1bf)]!==module)module[a0_0x3140d7(0xa2)]=_0x264e97=>new CogniLiving(_0x264e97);else new CogniLiving();