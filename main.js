const a0_0x1ce94d=a0_0x5531;(function(_0x2d2c48,_0x1605da){const _0xceb31a=a0_0x5531,_0xbab6b1=_0x2d2c48();while(!![]){try{const _0xae633d=parseInt(_0xceb31a(0x1ee))/0x1+-parseInt(_0xceb31a(0x377))/0x2*(-parseInt(_0xceb31a(0x1f9))/0x3)+parseInt(_0xceb31a(0x2e9))/0x4+-parseInt(_0xceb31a(0x16d))/0x5*(-parseInt(_0xceb31a(0x184))/0x6)+parseInt(_0xceb31a(0x180))/0x7+-parseInt(_0xceb31a(0x1c4))/0x8+-parseInt(_0xceb31a(0x2ae))/0x9;if(_0xae633d===_0x1605da)break;else _0xbab6b1['push'](_0xbab6b1['shift']());}catch(_0x154e25){_0xbab6b1['push'](_0xbab6b1['shift']());}}}(a0_0x4920,0x5855d));const a0_0x3d3d4c=(function(){let _0x4c5d2d=!![];return function(_0x3d8c13,_0x1d4a17){const _0x45a1ea=_0x4c5d2d?function(){const _0x501340=a0_0x5531;if(_0x1d4a17){const _0x5e8cad=_0x1d4a17[_0x501340(0x37e)](_0x3d8c13,arguments);return _0x1d4a17=null,_0x5e8cad;}}:function(){};return _0x4c5d2d=![],_0x45a1ea;};}()),a0_0x40575c=a0_0x3d3d4c(this,function(){const _0x23fc36=a0_0x5531;return a0_0x40575c['toString']()[_0x23fc36(0x214)](_0x23fc36(0x2ab))[_0x23fc36(0x18e)]()[_0x23fc36(0x243)](a0_0x40575c)[_0x23fc36(0x214)](_0x23fc36(0x2ab));});a0_0x40575c();'use strict';const utils=require(a0_0x1ce94d(0x1b8)),{GoogleGenerativeAI}=require(a0_0x1ce94d(0x2ad)),schedule=require(a0_0x1ce94d(0x290)),{spawn,exec}=require(a0_0x1ce94d(0x2c1)),path=require(a0_0x1ce94d(0x30b)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x1ce94d(0x2d4),LTM_SCHEDULE=a0_0x1ce94d(0x16e),MODE_RESET_SCHEDULE=a0_0x1ce94d(0x2b4),ANALYSIS_HISTORY_MAX_SIZE=0x64,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,LTM_DP_RAW_LOG=a0_0x1ce94d(0x197),LTM_DP_DAILY_DIGESTS=a0_0x1ce94d(0x1a4),LTM_DP_STATUS=a0_0x1ce94d(0x321),LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS=a0_0x1ce94d(0x1f4),LTM_DP_DRIFT_CHANNEL=a0_0x1ce94d(0x1de),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS=a0_0x1ce94d(0x1c1),LTM_DP_DRIFT_LAST_CHECK=a0_0x1ce94d(0x2e0),SYSTEM_DP_MODE='system.mode',HARD_IGNORE_TERMS=[a0_0x1ce94d(0x203),a0_0x1ce94d(0x343),a0_0x1ce94d(0x1d8),a0_0x1ce94d(0x32e),a0_0x1ce94d(0x231),'rssi',a0_0x1ce94d(0x16a),'maintenance',a0_0x1ce94d(0x1d7),a0_0x1ce94d(0x2d3),a0_0x1ce94d(0x29f),a0_0x1ce94d(0x261),a0_0x1ce94d(0x265),a0_0x1ce94d(0x246),a0_0x1ce94d(0x2dc),'firmware',a0_0x1ce94d(0x2ba),a0_0x1ce94d(0x389)],BAD_NAMES=[a0_0x1ce94d(0x25c),a0_0x1ce94d(0x2c3),a0_0x1ce94d(0x35b),a0_0x1ce94d(0x326),a0_0x1ce94d(0x330),a0_0x1ce94d(0x1b4),'on','off','switch',a0_0x1ce94d(0x211),a0_0x1ce94d(0x227),a0_0x1ce94d(0x1d5),a0_0x1ce94d(0x304),a0_0x1ce94d(0x182),'motion',a0_0x1ce94d(0x38a),'occupancy','temperature',a0_0x1ce94d(0x20c),a0_0x1ce94d(0x1a0),a0_0x1ce94d(0x299),a0_0x1ce94d(0x285),'valve',a0_0x1ce94d(0x30a),'set_temperature'],ADAPTER_BLACKLIST=[a0_0x1ce94d(0x34f),'admin.',a0_0x1ce94d(0x21a),a0_0x1ce94d(0x308),a0_0x1ce94d(0x33f),a0_0x1ce94d(0x27f),a0_0x1ce94d(0x2cc),'flot.',a0_0x1ce94d(0x1b9),'javascript.',a0_0x1ce94d(0x1b6)],SYSTEM_MODES={'NORMAL':a0_0x1ce94d(0x262),'VACATION':a0_0x1ce94d(0x1f2),'PARTY':a0_0x1ce94d(0x2d8),'GUEST':a0_0x1ce94d(0x32c)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x1ce94d(0x2d7)],SYSTEM_MODES[a0_0x1ce94d(0x225)]],PERSONA_MAPPING={'generic':a0_0x1ce94d(0x18b),'senior_aal':'PRIORITÃ„T:\x20Gesundheit/AAL.','family':'Fokus\x20auf\x20Familienroutinen.','single_comfort':'Fokus\x20auf\x20Komfort.','security':a0_0x1ce94d(0x2f5)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x825c9c){const _0xbfa203=a0_0x1ce94d;try{const _0x315726=[_0xbfa203(0x23e),_0xbfa203(0x17b)];for(const _0x2e0c3d of _0x315726){try{const _0xbb0f57=await _0x825c9c[_0xbfa203(0x1cb)](_0x2e0c3d);_0xbb0f57&&await _0x825c9c['delObjectAsync'](_0x2e0c3d);}catch(_0x505c5d){}}}catch(_0x3f959d){}}async function initHistory(_0x22c3c7){const _0x55c27a=a0_0x1ce94d;try{const _0x910966=await _0x22c3c7[_0x55c27a(0x2e7)]('events.history');_0x910966&&_0x910966[_0x55c27a(0x332)]&&(_0x22c3c7[_0x55c27a(0x17d)]=JSON[_0x55c27a(0x19a)](_0x910966['val'][_0x55c27a(0x18e)]()));}catch(_0x2a7f7e){_0x22c3c7[_0x55c27a(0x17d)]=[];}try{const _0xfc22c=await _0x22c3c7[_0x55c27a(0x2e7)]('analysis.analysisHistory');if(_0xfc22c&&_0xfc22c[_0x55c27a(0x332)])_0x22c3c7[_0x55c27a(0x2ee)]=JSON[_0x55c27a(0x19a)](_0xfc22c['val']['toString']());}catch(_0x4ecbc6){_0x22c3c7[_0x55c27a(0x2ee)]=[];}if(_0x22c3c7[_0x55c27a(0x17d)]&&_0x22c3c7[_0x55c27a(0x17d)][_0x55c27a(0x20a)]>0x0){_0x22c3c7[_0x55c27a(0x2c7)]['info'](_0x55c27a(0x188)+_0x22c3c7['eventHistory'][_0x55c27a(0x20a)]+'\x20events)...');for(let _0x3083ad=_0x22c3c7[_0x55c27a(0x17d)][_0x55c27a(0x20a)]-0x1;_0x3083ad>=0x0;_0x3083ad--){const _0x5f311a=_0x22c3c7[_0x55c27a(0x17d)][_0x3083ad];_0x5f311a&&_0x5f311a['id']!==undefined&&_0x5f311a[_0x55c27a(0x330)]!==undefined&&(_0x22c3c7[_0x55c27a(0x2b0)][_0x5f311a['id']]=_0x5f311a[_0x55c27a(0x330)]);}}}async function initSystemConfig(_0x95aff1){const _0x399055=a0_0x1ce94d;try{const _0x3c8df3=await _0x95aff1['getForeignObjectAsync'](_0x399055(0x362));_0x3c8df3&&_0x3c8df3[_0x399055(0x37f)]&&(_0x95aff1[_0x399055(0x254)]={'latitude':_0x3c8df3['common'][_0x399055(0x1bc)]||0x0,'longitude':_0x3c8df3[_0x399055(0x37f)][_0x399055(0x366)]||0x0,'city':_0x3c8df3['common'][_0x399055(0x28b)]||''});}catch(_0x234d22){}}async function checkLicense(_0x11b8c9,_0x24a1ef){const _0x40537a=a0_0x1ce94d;if(!_0x24a1ef)return![];_0x11b8c9['systemUUID']=await getSystemUUID(_0x11b8c9);if(_0x24a1ef==='TEST-PRO-KEY'||_0x24a1ef['startsWith'](_0x40537a(0x1e4)))return!![];return![];}async function getSystemUUID(_0x1c2c50){const _0x4cf7d5=a0_0x1ce94d;try{const _0xfa0898=await _0x1c2c50[_0x4cf7d5(0x1b7)](_0x4cf7d5(0x313));if(_0xfa0898&&_0xfa0898[_0x4cf7d5(0x342)]&&_0xfa0898['native'][_0x4cf7d5(0x269)])return _0xfa0898[_0x4cf7d5(0x342)][_0x4cf7d5(0x269)];return _0x4cf7d5(0x26a);}catch(_0x39a7ef){return _0x4cf7d5(0x206);}}async function createAllObjects(_0xf7a893){const _0x4f5c35=a0_0x1ce94d;await checkSystemObjects(_0xf7a893),await _0xf7a893['setObjectNotExistsAsync']('system.presenceWho',{'type':_0x4f5c35(0x35b),'common':{'name':_0x4f5c35(0x1ec),'type':_0x4f5c35(0x34b),'role':_0x4f5c35(0x259),'read':!![],'write':![],'def':''},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)]('events.lastEvent',{'type':_0x4f5c35(0x35b),'common':{'name':_0x4f5c35(0x1bb),'type':_0x4f5c35(0x34b),'role':_0x4f5c35(0x1a9),'read':!![],'write':![]},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x36b),{'type':_0x4f5c35(0x35b),'common':{'name':_0x4f5c35(0x30f),'type':'string','role':_0x4f5c35(0x1a9),'read':!![],'write':![]},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x239),{'type':_0x4f5c35(0x35b),'common':{'name':_0x4f5c35(0x33d),'type':_0x4f5c35(0x324),'role':_0x4f5c35(0x35e),'read':!![],'write':!![],'def':![]},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)]('analysis.triggerBriefing',{'type':_0x4f5c35(0x35b),'common':{'name':'Trigger\x20Briefing\x20(Test)','type':_0x4f5c35(0x324),'role':_0x4f5c35(0x35e),'read':!![],'write':!![],'def':![]},'native':{}}),await _0xf7a893[_0x4f5c35(0x303)](_0x4f5c35(0x1e0),{'type':'channel','common':{'name':_0x4f5c35(0x2e2)},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)]('analysis.training.triggerSecurity',{'type':_0x4f5c35(0x35b),'common':{'name':_0x4f5c35(0x207),'type':_0x4f5c35(0x324),'role':_0x4f5c35(0x35e),'read':!![],'write':!![],'def':![]},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x374),{'type':_0x4f5c35(0x35b),'common':{'name':'Training\x20Status','type':_0x4f5c35(0x34b),'role':_0x4f5c35(0x259),'read':!![],'write':![],'def':_0x4f5c35(0x199)},'native':{}}),await _0xf7a893[_0x4f5c35(0x303)](_0x4f5c35(0x28d),{'type':'channel','common':{'name':_0x4f5c35(0x215)},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x2e6),{'type':'state','common':{'name':_0x4f5c35(0x363),'type':_0x4f5c35(0x2e3),'role':_0x4f5c35(0x330),'read':!![],'write':![],'def':0x0},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x35d),{'type':_0x4f5c35(0x35b),'common':{'name':'Last\x20Check\x20Time','type':_0x4f5c35(0x34b),'role':'date','read':!![],'write':![],'def':''},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)]('analysis.lastResult',{'type':_0x4f5c35(0x35b),'common':{'name':'Last\x20Result','type':_0x4f5c35(0x34b),'role':_0x4f5c35(0x1a9),'read':!![],'write':![]},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x21e),{'type':_0x4f5c35(0x35b),'common':{'name':_0x4f5c35(0x253),'type':'boolean','role':_0x4f5c35(0x16b),'read':!![],'write':![],'def':![]},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x1e5),{'type':'state','common':{'name':_0x4f5c35(0x16c),'type':_0x4f5c35(0x324),'role':_0x4f5c35(0x2b5),'read':!![],'write':![],'def':![]},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x30c),{'type':_0x4f5c35(0x35b),'common':{'name':_0x4f5c35(0x37b),'type':_0x4f5c35(0x34b),'role':_0x4f5c35(0x2df),'read':!![],'write':![]},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x2f2),{'type':_0x4f5c35(0x35b),'common':{'name':_0x4f5c35(0x24b),'type':_0x4f5c35(0x34b),'role':_0x4f5c35(0x259),'read':!![],'write':![]},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x1a3),{'type':_0x4f5c35(0x35b),'common':{'name':_0x4f5c35(0x2ec),'type':_0x4f5c35(0x34b),'role':_0x4f5c35(0x35b),'read':!![],'write':![],'def':_0x4f5c35(0x19c)},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x2aa),{'type':_0x4f5c35(0x35b),'common':{'name':'Comfort\x20Summary','type':'string','role':_0x4f5c35(0x259),'read':!![],'write':![]},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x386),{'type':_0x4f5c35(0x35b),'common':{'name':_0x4f5c35(0x2dd),'type':'string','role':_0x4f5c35(0x259),'read':!![],'write':![]},'native':{}}),await _0xf7a893[_0x4f5c35(0x303)](_0x4f5c35(0x351),{'type':'channel','common':{'name':'Automation\x20Proposals'},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)]('analysis.automation.patternDetected',{'type':_0x4f5c35(0x35b),'common':{'name':_0x4f5c35(0x26b),'type':_0x4f5c35(0x324),'role':_0x4f5c35(0x21d),'read':!![],'write':![],'def':![]},'native':{}}),await _0xf7a893['setObjectNotExistsAsync'](_0x4f5c35(0x28f),{'type':_0x4f5c35(0x35b),'common':{'name':'Description','type':_0x4f5c35(0x34b),'role':_0x4f5c35(0x259),'read':!![],'write':![]},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x347),{'type':_0x4f5c35(0x35b),'common':{'name':'Action','type':_0x4f5c35(0x34b),'role':'text','read':!![],'write':![]},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x27b),{'type':'state','common':{'name':'Target\x20ID','type':'string','role':_0x4f5c35(0x259),'read':!![],'write':![]},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x314),{'type':_0x4f5c35(0x35b),'common':{'name':_0x4f5c35(0x209),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)]('analysis.automation.autoApply',{'type':_0x4f5c35(0x35b),'common':{'name':'Auto\x20Apply\x20Rule','type':_0x4f5c35(0x324),'role':'switch','read':!![],'write':!![],'def':![]},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x33b),{'type':_0x4f5c35(0x35b),'common':{'name':_0x4f5c35(0x221),'type':_0x4f5c35(0x324),'role':_0x4f5c35(0x35e),'read':!![],'write':!![],'def':![]},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x175),{'type':'state','common':{'name':_0x4f5c35(0x255),'type':_0x4f5c35(0x34b),'role':_0x4f5c35(0x1a9),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x339),{'type':_0x4f5c35(0x35b),'common':{'name':_0x4f5c35(0x1db),'type':_0x4f5c35(0x34b),'role':_0x4f5c35(0x1a9),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0xf7a893['extendObjectAsync'](_0x4f5c35(0x365),{'type':_0x4f5c35(0x1c7),'common':{'name':'Health\x20&\x20Sleep\x20Analysis'},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x1aa),{'type':_0x4f5c35(0x35b),'common':{'name':_0x4f5c35(0x275),'type':_0x4f5c35(0x2e3),'role':'value.health','read':!![],'write':![],'def':0x0},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x202),{'type':'state','common':{'name':'Restlessness\x20Level','type':'string','role':'text','read':!![],'write':![],'def':'none'},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x1cc),{'type':_0x4f5c35(0x35b),'common':{'name':_0x4f5c35(0x277),'type':_0x4f5c35(0x34b),'role':'text','read':!![],'write':![],'def':''},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x1a6),{'type':'state','common':{'name':_0x4f5c35(0x345),'type':_0x4f5c35(0x34b),'role':_0x4f5c35(0x259),'read':!![],'write':![],'def':_0x4f5c35(0x19c)},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)]('analysis.health.trendValue',{'type':_0x4f5c35(0x35b),'common':{'name':_0x4f5c35(0x353),'type':'number','role':'value','read':!![],'write':![],'def':0x0},'native':{}}),await _0xf7a893[_0x4f5c35(0x303)](_0x4f5c35(0x245),{'type':_0x4f5c35(0x1c7),'common':{'name':'Training\x20Data\x20Sets'},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x288),{'type':_0x4f5c35(0x35b),'common':{'name':_0x4f5c35(0x2b3),'type':_0x4f5c35(0x34b),'role':_0x4f5c35(0x1a9),'read':!![],'write':![],'def':'[]','desc':_0x4f5c35(0x1a2)},'native':{}}),await _0xf7a893[_0x4f5c35(0x1ef)](_0x4f5c35(0x286),{'type':_0x4f5c35(0x35b),'common':{'name':_0x4f5c35(0x205),'type':_0x4f5c35(0x34b),'role':_0x4f5c35(0x1a9),'read':!![],'write':![],'def':'[]','desc':_0x4f5c35(0x2cd)},'native':{}}),await checkLtmObjects(_0xf7a893),await checkLtmDriftObjects(_0xf7a893);}async function checkSystemObjects(_0xccc549){const _0x404467=a0_0x1ce94d;await _0xccc549[_0x404467(0x303)](_0x404467(0x2f9),{'type':'channel','common':{'name':_0x404467(0x29b)},'native':{}}),await _0xccc549['extendObjectAsync'](SYSTEM_DP_MODE,{'type':_0x404467(0x35b),'common':{'name':_0x404467(0x315),'type':_0x404467(0x34b),'role':_0x404467(0x35b),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x404467(0x279)],'states':{[SYSTEM_MODES[_0x404467(0x279)]]:_0x404467(0x379),[SYSTEM_MODES['VACATION']]:_0x404467(0x2a8),[SYSTEM_MODES['PARTY']]:_0x404467(0x1ba),[SYSTEM_MODES[_0x404467(0x225)]]:_0x404467(0x2b9)}},'native':{}});}async function checkLtmObjects(_0x4e40c0){const _0x5e2262=a0_0x1ce94d;await _0x4e40c0[_0x5e2262(0x303)](_0x5e2262(0x1f5),{'type':'channel','common':{'name':_0x5e2262(0x1f5)},'native':{}}),await _0x4e40c0[_0x5e2262(0x303)](LTM_DP_RAW_LOG,{'type':_0x5e2262(0x35b),'common':{'name':_0x5e2262(0x1fa),'type':_0x5e2262(0x34b),'role':_0x5e2262(0x1a9),'read':!![],'write':![]},'native':{}}),await _0x4e40c0[_0x5e2262(0x303)](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':_0x5e2262(0x31d),'type':_0x5e2262(0x34b),'role':'json','read':!![],'write':![]},'native':{}}),await _0x4e40c0[_0x5e2262(0x303)](LTM_DP_STATUS,{'type':_0x5e2262(0x35b),'common':{'name':'Processing\x20Status','type':'string','role':_0x5e2262(0x259),'read':!![],'write':![]},'native':{}}),await _0x4e40c0[_0x5e2262(0x303)](LTM_DP_TRIGGER_DIGEST,{'type':_0x5e2262(0x35b),'common':{'name':'Trigger\x20Digest','type':_0x5e2262(0x324),'role':_0x5e2262(0x35e),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x4e40c0[_0x5e2262(0x303)](LTM_DP_BASELINE_STATUS,{'type':_0x5e2262(0x35b),'common':{'name':_0x5e2262(0x325),'type':_0x5e2262(0x34b),'role':'text','read':!![],'write':![]},'native':{}});}async function checkLtmDriftObjects(_0x3dbf4d){const _0x32038c=a0_0x1ce94d;await _0x3dbf4d['extendObjectAsync'](LTM_DP_DRIFT_CHANNEL,{'type':_0x32038c(0x1c7),'common':{'name':_0x32038c(0x361)},'native':{}}),await _0x3dbf4d[_0x32038c(0x303)](LTM_DP_DRIFT_STATUS,{'type':_0x32038c(0x35b),'common':{'name':_0x32038c(0x31a),'type':_0x32038c(0x34b),'role':_0x32038c(0x35b),'read':!![],'write':![],'def':_0x32038c(0x19c)},'native':{}}),await _0x3dbf4d[_0x32038c(0x303)](LTM_DP_DRIFT_DETAILS,{'type':_0x32038c(0x35b),'common':{'name':_0x32038c(0x29d),'type':_0x32038c(0x34b),'role':'text','read':!![],'write':![]},'native':{}}),await _0x3dbf4d[_0x32038c(0x303)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0x32038c(0x35b),'common':{'name':_0x32038c(0x29a),'type':_0x32038c(0x2e3),'role':_0x32038c(0x384),'read':!![],'write':![]},'native':{}});}async function loadSystemMode(_0x2df12b){const _0x332418=a0_0x1ce94d;try{const _0x537554=await _0x2df12b[_0x332418(0x2e7)](SYSTEM_DP_MODE);_0x537554&&_0x537554[_0x332418(0x332)]&&Object[_0x332418(0x338)](SYSTEM_MODES)['includes'](_0x537554['val'])?_0x2df12b['currentSystemMode']=_0x537554[_0x332418(0x332)]:(_0x2df12b[_0x332418(0x317)]=SYSTEM_MODES['NORMAL'],await _0x2df12b[_0x332418(0x2bb)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x332418(0x279)],'ack':!![]}));}catch(_0x903144){_0x2df12b[_0x332418(0x317)]=SYSTEM_MODES[_0x332418(0x279)];}}async function loadRawEventLog(_0x3479bd){const _0x9fa3de=a0_0x1ce94d;try{const _0x45083e=await _0x3479bd[_0x9fa3de(0x2e7)](LTM_DP_RAW_LOG);if(_0x45083e&&_0x45083e['val'])_0x3479bd[_0x9fa3de(0x32b)]=JSON[_0x9fa3de(0x19a)](_0x45083e[_0x9fa3de(0x332)]);}catch(_0x4e755f){_0x3479bd['rawEventLog']=[];}}async function saveRawEventLog(_0x5cd224){const _0x71526a=a0_0x1ce94d;_0x5cd224[_0x71526a(0x32b)][_0x71526a(0x20a)]>RAW_LOG_MAX_SIZE&&_0x5cd224[_0x71526a(0x32b)]['splice'](0x0,_0x5cd224['rawEventLog'][_0x71526a(0x20a)]-RAW_LOG_MAX_SIZE),await _0x5cd224[_0x71526a(0x2bb)](LTM_DP_RAW_LOG,{'val':JSON[_0x71526a(0x295)](_0x5cd224[_0x71526a(0x32b)]),'ack':!![]});}async function loadDailyDigests(_0x507ac0){const _0x29364c=a0_0x1ce94d;try{const _0x51ad90=await _0x507ac0[_0x29364c(0x2e7)](LTM_DP_DAILY_DIGESTS);if(_0x51ad90&&_0x51ad90[_0x29364c(0x332)])_0x507ac0[_0x29364c(0x33a)]=JSON[_0x29364c(0x19a)](_0x51ad90['val']);}catch(_0x5f3b67){_0x507ac0['dailyDigests']=[];}await updateBaselineStatus(_0x507ac0);}async function saveDailyDigests(_0x28ace3,_0x5d260d=!![]){const _0x38f2d4=a0_0x1ce94d,_0x5e6489=_0x28ace3['config']['ltmLtbWindowDays']||0x3c;_0x28ace3[_0x38f2d4(0x33a)]['length']>_0x5e6489&&_0x28ace3[_0x38f2d4(0x33a)][_0x38f2d4(0x318)](0x0,_0x28ace3[_0x38f2d4(0x33a)][_0x38f2d4(0x20a)]-_0x5e6489);await _0x28ace3[_0x38f2d4(0x2bb)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x38f2d4(0x295)](_0x28ace3[_0x38f2d4(0x33a)]),'ack':!![]});if(_0x5d260d)await updateBaselineStatus(_0x28ace3);}async function updateAnalysisHistory(_0xf49a8e,_0xd465d9){const _0x3b3577=a0_0x1ce94d;_0xf49a8e[_0x3b3577(0x2ee)]['unshift'](_0xd465d9);if(_0xf49a8e[_0x3b3577(0x2ee)][_0x3b3577(0x20a)]>ANALYSIS_HISTORY_MAX_SIZE)_0xf49a8e[_0x3b3577(0x2ee)][_0x3b3577(0x36c)]();await _0xf49a8e[_0x3b3577(0x2bb)](_0x3b3577(0x175),{'val':JSON[_0x3b3577(0x295)](_0xf49a8e[_0x3b3577(0x2ee)]),'ack':!![]});}async function updateBaselineStatus(_0x1a0b99){const _0x21a648=a0_0x1ce94d;if(!_0x1a0b99['isProVersion']){await _0x1a0b99[_0x21a648(0x2bb)](LTM_DP_BASELINE_STATUS,{'val':_0x21a648(0x371),'ack':!![]});return;}const _0x103b84=_0x1a0b99[_0x21a648(0x33a)][_0x21a648(0x20a)]>=(_0x1a0b99[_0x21a648(0x22a)][_0x21a648(0x213)]||0x7)?_0x21a648(0x323)+_0x1a0b99[_0x21a648(0x33a)][_0x21a648(0x20a)]+_0x21a648(0x172):_0x21a648(0x352)+_0x1a0b99[_0x21a648(0x33a)][_0x21a648(0x20a)]+'/'+(_0x1a0b99[_0x21a648(0x22a)][_0x21a648(0x213)]||0x7)+')';await _0x1a0b99['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x103b84,'ack':!![]});}async function initSensorSubscriptions(_0x1ea138){const _0xf90ae7=a0_0x1ce94d,_0x2167ba=_0x1ea138[_0xf90ae7(0x22a)][_0xf90ae7(0x1f1)];if(_0x2167ba&&_0x2167ba['length']>0x0){_0x1ea138[_0xf90ae7(0x2c7)][_0xf90ae7(0x28a)](_0xf90ae7(0x1cf)+_0x2167ba['length']+_0xf90ae7(0x2a4));for(const _0x511d83 of _0x2167ba){if(_0x511d83['id']){await _0x1ea138['subscribeForeignStatesAsync'](_0x511d83['id']);try{const _0x35ce9e=await _0x1ea138['getForeignStateAsync'](_0x511d83['id']);if(_0x35ce9e)_0x1ea138[_0xf90ae7(0x2b0)][_0x511d83['id']]=_0x35ce9e[_0xf90ae7(0x332)];}catch(_0x33d1f4){}}}}}async function initPresenceSubscriptions(_0x44207e){const _0x12d6e0=a0_0x1ce94d,_0x50bb1c=_0x44207e[_0x12d6e0(0x22a)]['presenceDevices']||[];if(_0x50bb1c[_0x12d6e0(0x20a)]>0x0){_0x44207e['log']['info'](_0x12d6e0(0x1cf)+_0x50bb1c['length']+_0x12d6e0(0x2bc));for(const _0x33ca5b of _0x50bb1c){await _0x44207e[_0x12d6e0(0x2be)](_0x33ca5b);}try{await checkWifiPresence(_0x44207e);}catch(_0x1cb946){}}}async function getWeatherContext(_0x40a0e9){const _0x46bfa6=a0_0x1ce94d;try{if(!_0x40a0e9[_0x46bfa6(0x22a)][_0x46bfa6(0x309)])return'Wetter:\x20Deaktiviert';let _0x20d16f='';const _0x99ebb2=_0x40a0e9[_0x46bfa6(0x22a)][_0x46bfa6(0x356)];if(_0x99ebb2)try{if(_0x99ebb2[_0x46bfa6(0x322)]('accuweather')){const _0x5ec5a4=await _0x40a0e9[_0x46bfa6(0x32f)](_0x99ebb2+_0x46bfa6(0x1e9));if(_0x5ec5a4&&_0x5ec5a4[_0x46bfa6(0x332)])_0x20d16f=_0x5ec5a4[_0x46bfa6(0x332)];}else{if(_0x99ebb2[_0x46bfa6(0x322)]('daswetter')){const _0x5d0416=await _0x40a0e9['getForeignStateAsync'](_0x99ebb2+_0x46bfa6(0x1c5));if(_0x5d0416&&_0x5d0416[_0x46bfa6(0x332)])_0x20d16f=_0x5d0416[_0x46bfa6(0x332)];}else{if(_0x99ebb2[_0x46bfa6(0x322)]('openweathermap')){const _0x236d1a=await _0x40a0e9[_0x46bfa6(0x32f)](_0x99ebb2+_0x46bfa6(0x25a));if(_0x236d1a&&_0x236d1a[_0x46bfa6(0x332)])_0x20d16f=_0x236d1a['val'];}}}}catch(_0x16ceb9){}if(!_0x20d16f){const _0xc8a17e=[_0x46bfa6(0x292),'daswetter.0',_0x46bfa6(0x2da),_0x46bfa6(0x1bd)];for(const _0x47320e of _0xc8a17e){try{const _0x2390ed=await _0x40a0e9['getForeignObjectAsync'](_0x47320e);if(_0x2390ed){if(_0x47320e[_0x46bfa6(0x322)]('accuweather')){const _0x3a5684=await _0x40a0e9[_0x46bfa6(0x32f)](_0x47320e+_0x46bfa6(0x1e9));if(_0x3a5684&&_0x3a5684[_0x46bfa6(0x332)]){_0x20d16f=_0x3a5684[_0x46bfa6(0x332)];break;}}}}catch(_0x26316a){}}}return _0x20d16f?_0x46bfa6(0x17f)+_0x20d16f:_0x46bfa6(0x282);}catch(_0x36884e){return _0x46bfa6(0x2e8)+_0x36884e[_0x46bfa6(0x1f8)];}}async function getCalendarContext(_0x193c54){const _0x53af5b=a0_0x1ce94d;try{if(!_0x193c54[_0x53af5b(0x22a)][_0x53af5b(0x20e)])return _0x53af5b(0x316);let _0x2f77aa=_0x193c54[_0x53af5b(0x22a)][_0x53af5b(0x266)]||_0x53af5b(0x2eb),_0x1e9778=_0x193c54[_0x53af5b(0x22a)][_0x53af5b(0x194)]||[];if(typeof _0x1e9778===_0x53af5b(0x34b))_0x1e9778=_0x1e9778[_0x53af5b(0x2db)](',');try{const _0x210ac9=await _0x193c54[_0x53af5b(0x32f)](_0x2f77aa+'.data.table');if(_0x210ac9&&_0x210ac9['val']){let _0x2aa174=tryParse(_0x210ac9[_0x53af5b(0x332)]);if(_0x2aa174&&Array[_0x53af5b(0x170)](_0x2aa174)){if(_0x1e9778[_0x53af5b(0x20a)]>0x0)_0x2aa174=_0x2aa174[_0x53af5b(0x359)](_0x56447c=>_0x1e9778[_0x53af5b(0x322)](_0x56447c[_0x53af5b(0x237)]||''));else return'KALENDER:\x20Keine\x20Kalender\x20ausgewÃ¤hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)';if(_0x2aa174[_0x53af5b(0x20a)]>0x0){const _0x1f2409=_0x2aa174[_0x53af5b(0x171)](0x0,0x3)[_0x53af5b(0x185)](_0x5b0ec0=>{const _0xd80fda=_0x53af5b;let _0x1357c4=_0x5b0ec0[_0xd80fda(0x384)];if(_0x5b0ec0['time'])_0x1357c4+='\x20'+_0x5b0ec0[_0xd80fda(0x1df)];return _0x1357c4+':\x20'+_0x5b0ec0[_0xd80fda(0x1b0)]+'\x20('+_0x5b0ec0[_0xd80fda(0x237)]+')';});return'KALENDER:\x20'+_0x1f2409[_0x53af5b(0x37c)](_0x53af5b(0x1eb));}else return'KALENDER:\x20Keine\x20relevanten\x20Termine';}}}catch(_0x16153f){_0x193c54[_0x53af5b(0x2c7)][_0x53af5b(0x2fb)](_0x53af5b(0x219)+_0x16153f[_0x53af5b(0x1f8)]);}return'KALENDER:\x20Keine\x20Daten';}catch(_0x513bfa){return'KALENDER\x20ERROR:\x20'+_0x513bfa[_0x53af5b(0x1f8)];}}async function getCalendarNames(_0x562c23,_0x4b6343){const _0x18ad41=a0_0x1ce94d;try{const _0x1f0c22=await _0x562c23[_0x18ad41(0x32f)](_0x4b6343+_0x18ad41(0x258));if(_0x1f0c22&&_0x1f0c22['val']){const _0x563c6f=tryParse(_0x1f0c22[_0x18ad41(0x332)]);if(_0x563c6f&&Array['isArray'](_0x563c6f)){const _0x93973=[...new Set(_0x563c6f[_0x18ad41(0x185)](_0x51ec3e=>_0x51ec3e['_calName'])['filter'](Boolean))];return _0x93973[_0x18ad41(0x37a)]();}}return[];}catch(_0x5773ad){return _0x562c23[_0x18ad41(0x2c7)][_0x18ad41(0x1d7)](_0x18ad41(0x1b2)+_0x5773ad['message']),[];}}async function checkWifiPresence(_0x4be659){const _0x40d9f1=a0_0x1ce94d;try{const _0xcddaf3=_0x4be659[_0x40d9f1(0x22a)][_0x40d9f1(0x348)]||[];let _0x5c8fd3=![];const _0xe7d758=[];for(const _0x5ce0f8 of _0xcddaf3){try{const _0x3fd48d=await _0x4be659[_0x40d9f1(0x32f)](_0x5ce0f8);if(_0x3fd48d&&(_0x3fd48d['val']===!![]||_0x3fd48d[_0x40d9f1(0x332)]==='online'||_0x3fd48d[_0x40d9f1(0x332)]===0x1)){_0x5c8fd3=!![];const _0x3fc191=await _0x4be659['getForeignObjectAsync'](_0x5ce0f8);let _0x8eb1c=_0x5ce0f8;_0x3fc191&&_0x3fc191[_0x40d9f1(0x37f)]&&_0x3fc191['common']['name']&&(_0x8eb1c=typeof _0x3fc191['common'][_0x40d9f1(0x340)]===_0x40d9f1(0x283)?_0x3fc191[_0x40d9f1(0x37f)][_0x40d9f1(0x340)]['de']||_0x3fc191[_0x40d9f1(0x37f)]['name']['en']:_0x3fc191[_0x40d9f1(0x37f)][_0x40d9f1(0x340)]),_0xe7d758[_0x40d9f1(0x22c)](_0x8eb1c);}}catch(_0x39a743){}}return await _0x4be659[_0x40d9f1(0x2bb)]('system.presenceWho',{'val':_0xe7d758['join'](',\x20'),'ack':!![]}),_0x5c8fd3&&(_0x4be659[_0x40d9f1(0x249)]&&(_0x4be659[_0x40d9f1(0x2c7)][_0x40d9f1(0x28a)](_0x40d9f1(0x305)),abortExitTimer(_0x4be659)),!_0x4be659['isPresent']&&_0x4be659['currentSystemMode']===SYSTEM_MODES[_0x40d9f1(0x279)]&&await setPresence(_0x4be659,!![])),_0x5c8fd3;}catch(_0x4fd098){return _0x4be659[_0x40d9f1(0x2c7)]['error']('Error\x20checking\x20WiFi:\x20'+_0x4fd098['message']),![];}}function startExitTimer(_0x35de8b){const _0x1f9242=a0_0x1ce94d;abortExitTimer(_0x35de8b),_0x35de8b[_0x1f9242(0x1f0)]=!![],_0x35de8b[_0x1f9242(0x2d1)]=setTimeout(()=>{const _0x8d125e=_0x1f9242;_0x35de8b[_0x8d125e(0x1f0)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x35de8b[_0x1f9242(0x249)]=setTimeout(()=>{const _0x3d5923=_0x1f9242;setPresence(_0x35de8b,![]),_0x35de8b[_0x3d5923(0x249)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x10149a){const _0x28963d=a0_0x1ce94d;if(_0x10149a[_0x28963d(0x249)])clearTimeout(_0x10149a[_0x28963d(0x249)]);if(_0x10149a[_0x28963d(0x2d1)])clearTimeout(_0x10149a['exitGraceTimer']);_0x10149a['exitTimer']=null,_0x10149a[_0x28963d(0x2d1)]=null,_0x10149a[_0x28963d(0x1f0)]=![];}async function setPresence(_0x379ef7,_0x47f498){const _0x5943e5=a0_0x1ce94d;if(_0x379ef7[_0x5943e5(0x1f3)]===_0x47f498)return;_0x379ef7['isPresent']=_0x47f498,await _0x379ef7[_0x5943e5(0x2bb)](_0x5943e5(0x1e2),{'val':_0x47f498,'ack':!![]});}async function saveFeedback(_0x1ef76f,_0x4f9c5e){const _0x561e2b=a0_0x1ce94d;_0x1ef76f[_0x561e2b(0x2c7)][_0x561e2b(0x28a)](_0x561e2b(0x1ac)+JSON[_0x561e2b(0x295)](_0x4f9c5e));}async function runBaselineDriftAnalysis(_0x17826b){const _0x12b7c4=a0_0x1ce94d;if(!_0x17826b[_0x12b7c4(0x287)]||!_0x17826b[_0x12b7c4(0x240)])return;const _0x4ed864=_0x17826b[_0x12b7c4(0x22a)][_0x12b7c4(0x18a)]||0xe;if(_0x17826b[_0x12b7c4(0x33a)][_0x12b7c4(0x20a)]<_0x4ed864+(_0x17826b[_0x12b7c4(0x22a)][_0x12b7c4(0x213)]||0x7)){await _0x17826b[_0x12b7c4(0x2bb)](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x5aefc3=_0x17826b[_0x12b7c4(0x33a)]['slice'](-_0x4ed864),_0x5722f1=_0x17826b['dailyDigests']['slice'](0x0,_0x17826b[_0x12b7c4(0x33a)][_0x12b7c4(0x20a)]-_0x4ed864),_0x3ff14e=_0x12b7c4(0x192)+JSON['stringify'](_0x5722f1)+_0x12b7c4(0x244)+JSON[_0x12b7c4(0x295)](_0x5aefc3);try{const _0x1f0136=await _0x17826b['geminiModel']['generateContent'](_0x3ff14e),_0x53a270=JSON[_0x12b7c4(0x19a)](_0x1f0136[_0x12b7c4(0x284)][_0x12b7c4(0x259)]()[_0x12b7c4(0x2c9)](/```json|```/g,'')['trim']());_0x53a270[_0x12b7c4(0x336)]&&(await _0x17826b[_0x12b7c4(0x2bb)](LTM_DP_DRIFT_STATUS,{'val':_0x53a270['baselineDrift'],'ack':!![]}),await _0x17826b[_0x12b7c4(0x2bb)](LTM_DP_DRIFT_DETAILS,{'val':_0x53a270[_0x12b7c4(0x236)],'ack':!![]}),await _0x17826b[_0x12b7c4(0x2bb)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x12b7c4(0x179)](),'ack':!![]}));}catch(_0x1d8927){}}function setupLtmScheduler(_0x5cc609){const _0x272bcb=a0_0x1ce94d;try{if(_0x5cc609[_0x272bcb(0x27a)])_0x5cc609['ltmJob'][_0x272bcb(0x298)]();if(!_0x5cc609[_0x272bcb(0x287)]){_0x5cc609[_0x272bcb(0x2bb)](LTM_DP_STATUS,{'val':_0x272bcb(0x371),'ack':!![]});return;}_0x5cc609['ltmJob']=schedule[_0x272bcb(0x196)](LTM_SCHEDULE,()=>createDailyDigest(_0x5cc609));}catch(_0xa1cce1){_0x5cc609[_0x272bcb(0x2c7)]['error']('LTM\x20Sched\x20Error:\x20'+_0xa1cce1['message']);}}function setupModeResetScheduler(_0x5e0605){const _0x52398b=a0_0x1ce94d;try{if(_0x5e0605[_0x52398b(0x27e)])_0x5e0605[_0x52398b(0x27e)][_0x52398b(0x298)]();_0x5e0605[_0x52398b(0x27e)]=schedule['scheduleJob'](MODE_RESET_SCHEDULE,async()=>{const _0x224eb1=_0x52398b;await loadSystemMode(_0x5e0605),AUTO_RESET_MODES[_0x224eb1(0x322)](_0x5e0605[_0x224eb1(0x317)])&&await _0x5e0605['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x224eb1(0x279)],'ack':![]});});}catch(_0x890367){_0x5e0605[_0x52398b(0x2c7)]['error']('Reset\x20Sched\x20Error:\x20'+_0x890367['message']);}}function setupDriftAnalysisScheduler(_0x3bc73b){const _0x1d876d=a0_0x1ce94d;try{if(_0x3bc73b[_0x1d876d(0x1d9)])clearInterval(_0x3bc73b[_0x1d876d(0x1d9)]);if(!_0x3bc73b['isProVersion'])return;_0x3bc73b[_0x1d876d(0x1d9)]=setInterval(()=>runBaselineDriftAnalysis(_0x3bc73b),(_0x3bc73b[_0x1d876d(0x22a)][_0x1d876d(0x257)]||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x3bc73b),0x1388);}catch(_0x43020a){_0x3bc73b[_0x1d876d(0x2c7)][_0x1d876d(0x1d7)](_0x1d876d(0x31e)+_0x43020a[_0x1d876d(0x1f8)]);}}function setupBriefingScheduler(_0x485b64){const _0x2a8bd5=a0_0x1ce94d;try{if(_0x485b64[_0x2a8bd5(0x2a2)])_0x485b64['briefingJob']['cancel']();if(!_0x485b64[_0x2a8bd5(0x22a)][_0x2a8bd5(0x2e1)])return;const _0x59bb0c=(_0x485b64['config']['briefingTime']||_0x2a8bd5(0x18d))[_0x2a8bd5(0x2db)](':'),_0x14c137=parseInt(_0x59bb0c[0x0])||0x8,_0xe9bec6=parseInt(_0x59bb0c[0x1])||0x0,_0x40d2f3=_0xe9bec6+'\x20'+_0x14c137+_0x2a8bd5(0x2f6);_0x485b64[_0x2a8bd5(0x2c7)][_0x2a8bd5(0x28a)]('Scheduling\x20Morning\x20Briefing\x20for\x20'+_0x14c137+':'+(_0xe9bec6<0xa?'0'+_0xe9bec6:_0xe9bec6)),_0x485b64['briefingJob']=schedule[_0x2a8bd5(0x196)](_0x40d2f3,()=>{sendMorningBriefing(_0x485b64);});}catch(_0x39f182){_0x485b64[_0x2a8bd5(0x2c7)][_0x2a8bd5(0x1d7)]('Briefing\x20Sched\x20Error:\x20'+_0x39f182[_0x2a8bd5(0x1f8)]);}}async function sendNotification(_0x4af68a,_0x49e8b8,_0x346189=![],_0xf4f137=![]){const _0x482e06=a0_0x1ce94d;_0x4af68a[_0x482e06(0x2c7)]['info']((_0x346189?_0x482e06(0x307):'')+_0x482e06(0x20d)+_0x49e8b8+'\x22');const _0xf5d1d4=_0x4af68a[_0x482e06(0x22a)];let _0x161c25=0x0;if(_0xf5d1d4[_0x482e06(0x2f8)]){let _0x5a7b4a={};(_0x49e8b8[_0x482e06(0x322)](_0x482e06(0x2c8))||_0xf4f137)&&(_0x5a7b4a={'reply_markup':{'inline_keyboard':[[{'text':'âœ…\x20Alles\x20OK\x20(Reset)]','callback_data':'COGNI_CONFIRM_OK'}],[{'text':'ðŸ“ž\x20RÃ¼ckruf\x20anfordern','callback_data':_0x482e06(0x1fc)}]]}}),await _0x4af68a[_0x482e06(0x267)](_0xf5d1d4['notifyTelegramInstance'],_0x482e06(0x216),{'text':_0x49e8b8,'user':_0xf5d1d4[_0x482e06(0x344)],..._0x5a7b4a}),_0x161c25++;}if(_0xf5d1d4[_0x482e06(0x177)]){let _0x40d439={'message':_0x49e8b8,'title':_0xf4f137?'ðŸš¨\x20EMERGENCY':_0x482e06(0x212),'priority':_0xf4f137?0x2:0x1,'device':_0xf5d1d4[_0x482e06(0x223)]};_0xf4f137&&(_0x40d439['retry']=0x1e,_0x40d439[_0x482e06(0x1c2)]=0xe10,_0x40d439['sound']=_0x482e06(0x23b)),await _0x4af68a[_0x482e06(0x267)](_0xf5d1d4[_0x482e06(0x22f)],_0x482e06(0x216),_0x40d439),_0x161c25++;}return _0xf5d1d4['notifyEmailEnabled']&&(await _0x4af68a[_0x482e06(0x267)](_0xf5d1d4[_0x482e06(0x302)],'send',{'text':_0x49e8b8,'to':_0xf5d1d4[_0x482e06(0x2a0)]}),_0x161c25++),_0x161c25;}async function setupTelegramListener(_0x1e20ab){const _0x53fb21=a0_0x1ce94d,_0x18239a=_0x1e20ab[_0x53fb21(0x22a)][_0x53fb21(0x235)];_0x1e20ab[_0x53fb21(0x22a)][_0x53fb21(0x2f8)]&&_0x18239a&&(_0x1e20ab['log']['info']('ðŸ“¡\x20Hooking\x20into\x20'+_0x18239a+_0x53fb21(0x35c)),await _0x1e20ab[_0x53fb21(0x2be)](_0x18239a+_0x53fb21(0x273)));}async function handleTelegramResponse(_0x18d270,_0x3dc7e7){const _0xd7a021=a0_0x1ce94d;let _0xcd7bd=_0x3dc7e7;_0x3dc7e7['startsWith']('[')&&(_0xcd7bd=_0x3dc7e7[_0xd7a021(0x294)](_0x3dc7e7[_0xd7a021(0x29e)](']')+0x1));if(_0xcd7bd==='COGNI_CONFIRM_OK')_0x18d270['log'][_0xd7a021(0x28a)](_0xd7a021(0x23c)),await _0x18d270[_0xd7a021(0x2bb)](_0xd7a021(0x21e),{'val':![],'ack':!![]}),await _0x18d270[_0xd7a021(0x2bb)](_0xd7a021(0x30c),{'val':'Vom\x20Benutzer\x20bestÃ¤tigt\x20(OK).','ack':!![]}),_0x18d270[_0xd7a021(0x2fc)]=![],sendNotification(_0x18d270,_0xd7a021(0x2ef),![]);else _0xcd7bd===_0xd7a021(0x1fc)&&(_0x18d270[_0xd7a021(0x2c7)][_0xd7a021(0x2fb)]('ðŸ“ž\x20User\x20requested\x20CALL\x20via\x20Telegram!'),sendNotification(_0x18d270,_0xd7a021(0x19e),![],!![]));}async function runAutopilot(_0x3c525f){const _0x3cbcba=a0_0x1ce94d,_0x597f50=_0x3c525f[_0x3cbcba(0x22a)][_0x3cbcba(0x17a)],_0x3a21aa=_0x3c525f[_0x3cbcba(0x17d)][_0x3cbcba(0x20a)]>0x0?_0x3c525f[_0x3cbcba(0x17d)][0x0]['timestamp']:Date['now'](),_0x1bf952=(Date[_0x3cbcba(0x179)]()-_0x3a21aa)/(0x3e8*0x3c*0x3c);let _0x2f07af='';_0x3c525f[_0x3cbcba(0x22a)][_0x3cbcba(0x369)]&&_0x3c525f[_0x3cbcba(0x317)]===SYSTEM_MODES[_0x3cbcba(0x279)]&&_0x3c525f[_0x3cbcba(0x1f3)]&&(_0x1bf952>_0x597f50&&(_0x2f07af=_0x3cbcba(0x189)+_0x1bf952[_0x3cbcba(0x2a9)](0x1)+'\x20hours.\x20Potential\x20incapacitation.')),runGeminiAnalysis(_0x3c525f,_0x2f07af)['catch'](_0x432b40=>_0x3c525f[_0x3cbcba(0x2c7)]['error'](_0x432b40));}async function createDailyDigest(_0x2752b3){const _0x26f07e=a0_0x1ce94d;if(!_0x2752b3['isProVersion'])return;await _0x2752b3['setStateAsync'](LTM_DP_STATUS,{'val':_0x26f07e(0x333)+new Date()[_0x26f07e(0x248)](),'ack':!![]});if(!_0x2752b3[_0x26f07e(0x240)]||_0x2752b3[_0x26f07e(0x32b)][_0x26f07e(0x20a)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x2752b3[_0x26f07e(0x2bb)](LTM_DP_STATUS,{'val':_0x26f07e(0x252),'ack':!![]});return;}const _0x39a2d7=JSON['parse'](JSON[_0x26f07e(0x295)](_0x2752b3[_0x26f07e(0x32b)])),_0x391c2c=_0x39a2d7[_0x26f07e(0x20a)],_0x5944fd=_0x26f07e(0x2a6)+JSON[_0x26f07e(0x295)](_0x39a2d7);try{const _0x5bbef7=await _0x2752b3[_0x26f07e(0x240)][_0x26f07e(0x297)](_0x5944fd),_0x2119f5=JSON[_0x26f07e(0x19a)](_0x5bbef7[_0x26f07e(0x284)][_0x26f07e(0x259)]()[_0x26f07e(0x2c9)](/```json|```/g,'')[_0x26f07e(0x169)]());_0x2119f5['summary']&&(_0x2752b3[_0x26f07e(0x33a)][_0x26f07e(0x22c)]({'timestamp':new Date()[_0x26f07e(0x168)](),'eventCount':_0x391c2c,'summary':_0x2119f5[_0x26f07e(0x173)],'activityLevel':_0x2119f5['activityLevel'],'systemMode':_0x2752b3[_0x26f07e(0x317)]}),await saveDailyDigests(_0x2752b3),_0x2752b3[_0x26f07e(0x32b)]=[],await saveRawEventLog(_0x2752b3),await _0x2752b3[_0x26f07e(0x2bb)](LTM_DP_STATUS,{'val':_0x26f07e(0x2f0)+_0x391c2c+_0x26f07e(0x22b),'ack':!![]}),runPythonHealthCheck(_0x2752b3));}catch(_0x12e439){await _0x2752b3[_0x26f07e(0x2bb)](LTM_DP_STATUS,{'val':_0x26f07e(0x251)+_0x12e439[_0x26f07e(0x1f8)],'ack':!![]});}}async function sendMorningBriefing(_0x376db8){const _0x134905=a0_0x1ce94d;if(!_0x376db8[_0x134905(0x240)])return;_0x376db8[_0x134905(0x2c7)]['info'](_0x134905(0x2c4));const _0x4953ff=_0x376db8[_0x134905(0x33a)]['length']>0x0?_0x376db8[_0x134905(0x33a)][_0x376db8['dailyDigests'][_0x134905(0x20a)]-0x1]:null,_0x2ee062=_0x4953ff&&_0x4953ff[_0x134905(0x224)]?_0x4953ff[_0x134905(0x224)]['sleepScore']:_0x134905(0x19c),_0x296803=new Date();_0x296803[_0x134905(0x380)](0x4,0x0,0x0,0x0);const _0x43af5e=_0x376db8[_0x134905(0x17d)][_0x134905(0x359)](_0x301f07=>new Date(_0x301f07[_0x134905(0x1b3)])>_0x296803),_0x38f37f=PERSONA_MAPPING[_0x376db8[_0x134905(0x22a)][_0x134905(0x1c3)]||_0x134905(0x2d6)],_0x22004d=_0x376db8[_0x134905(0x22a)]['livingContext']||'',_0x26ae04=await getWeatherContext(_0x376db8),_0x2082d4=await getCalendarContext(_0x376db8),_0x41bcfd='ROLLE:\x20FÃ¼rsorglicher\x20Assistent.\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht.\x20PERSONA:\x20'+_0x38f37f+_0x134905(0x201)+_0x22004d+_0x134905(0x247)+_0x26ae04+'\x20'+_0x2082d4+_0x134905(0x1d1)+_0x2ee062+_0x134905(0x34a)+JSON[_0x134905(0x295)](_0x43af5e['slice'](0x0,0xa))+_0x134905(0x1d0);try{const _0x50c4fe=await _0x376db8[_0x134905(0x240)]['generateContent'](_0x41bcfd),_0x492184=_0x134905(0x198)+_0x50c4fe[_0x134905(0x284)]['text']()[_0x134905(0x169)]();sendNotification(_0x376db8,_0x492184),_0x376db8[_0x134905(0x2c7)][_0x134905(0x28a)]('Morning\x20Briefing\x20sent.');}catch(_0x1dc925){_0x376db8[_0x134905(0x2c7)]['error'](_0x134905(0x346)+_0x1dc925[_0x134905(0x1f8)]);}}async function scanForDevices(_0x1c914e,_0x297c2b){const _0x265ff7=a0_0x1ce94d;_0x1c914e[_0x265ff7(0x2c7)][_0x265ff7(0x28a)](_0x265ff7(0x27d));const _0x516743=[],_0x26ad06=await _0x1c914e[_0x265ff7(0x2a7)]('*'),_0x2ed131=await _0x1c914e[_0x265ff7(0x2a7)]('enum.functions.*',_0x265ff7(0x2e4)),_0x2a0062=await _0x1c914e['getForeignObjectsAsync'](_0x265ff7(0x256),_0x265ff7(0x2e4)),_0x23dd01={};if(_0x2ed131)for(const _0x24f07f in _0x2ed131){const _0x419a78=_0x2ed131[_0x24f07f][_0x265ff7(0x37f)][_0x265ff7(0x17c)]||[];_0x419a78[_0x265ff7(0x181)](_0xfbaaad=>{const _0x46c043=_0x265ff7;if(!_0x23dd01[_0xfbaaad])_0x23dd01[_0xfbaaad]=[];_0x23dd01[_0xfbaaad][_0x46c043(0x22c)](_0x24f07f);});}const _0x335cc3={};if(_0x2a0062)for(const _0x303bea in _0x2a0062){const _0x1c137c=_0x2a0062[_0x303bea][_0x265ff7(0x37f)][_0x265ff7(0x17c)]||[],_0x5653f7=typeof _0x2a0062[_0x303bea][_0x265ff7(0x37f)][_0x265ff7(0x340)]===_0x265ff7(0x283)?_0x2a0062[_0x303bea][_0x265ff7(0x37f)]['name']['de']:_0x2a0062[_0x303bea][_0x265ff7(0x37f)]['name'];_0x1c137c[_0x265ff7(0x181)](_0x258f79=>_0x335cc3[_0x258f79]=_0x5653f7);}const _0x1b0a6a=_0x297c2b[_0x265ff7(0x1e3)]||[],_0x293531=_0x297c2b[_0x265ff7(0x2d0)]!==![],_0x2fff1b=_0x297c2b['doors']!==![],_0x46d729=_0x297c2b[_0x265ff7(0x2bd)]!==![],_0xd76671=_0x297c2b['temperature']===!![],_0x2a44d2=_0x297c2b[_0x265ff7(0x29c)]===!![];for(const _0x17af36 in _0x26ad06){const _0x3aabe4=_0x26ad06[_0x17af36];if(_0x3aabe4['type']!=='state'||!_0x3aabe4['common'])continue;if(ADAPTER_BLACKLIST['some'](_0x4e4a35=>_0x17af36[_0x265ff7(0x2ff)](_0x4e4a35))&&!_0x2a44d2)continue;const _0xaaa1fe=(_0x3aabe4[_0x265ff7(0x37f)][_0x265ff7(0x1f6)]||'')[_0x265ff7(0x222)]();let _0x1533cb=(typeof _0x3aabe4[_0x265ff7(0x37f)][_0x265ff7(0x340)]==='object'?_0x3aabe4[_0x265ff7(0x37f)][_0x265ff7(0x340)]['de']:_0x3aabe4[_0x265ff7(0x37f)][_0x265ff7(0x340)])||_0x17af36;const _0x37aea5=_0x1533cb[_0x265ff7(0x222)]();let _0x1c394c=![],_0x1a89e0=![];if(_0x1b0a6a[_0x265ff7(0x20a)]>0x0){const _0x1b8cef=_0x23dd01[_0x17af36]||[],_0x2cbd20=_0x17af36['split']('.')['slice'](0x0,-0x1)[_0x265ff7(0x37c)]('.'),_0x5445f1=_0x23dd01[_0x2cbd20]||[];(_0x1b8cef['some'](_0x518a05=>_0x1b0a6a['includes'](_0x518a05))||_0x5445f1[_0x265ff7(0x2a5)](_0x2b7f69=>_0x1b0a6a[_0x265ff7(0x322)](_0x2b7f69)))&&(_0x1c394c=!![],_0x1a89e0=!![]);}if(!_0x1c394c&&!_0x2a44d2){if(HARD_IGNORE_TERMS[_0x265ff7(0x2a5)](_0x1848a4=>_0x17af36[_0x265ff7(0x322)](_0x1848a4)||_0x37aea5['includes'](_0x1848a4[_0x265ff7(0x222)]())))continue;}if(BAD_NAMES[_0x265ff7(0x2a5)](_0x4c8407=>_0x37aea5===_0x4c8407||_0x37aea5['endsWith']('.'+_0x4c8407))){const _0x2d038e=_0x17af36[_0x265ff7(0x2db)]('.');if(_0x2d038e[_0x265ff7(0x20a)]>0x2){const _0x2ec464=_0x2d038e[_0x265ff7(0x171)](0x0,-0x1)[_0x265ff7(0x37c)]('.'),_0x35fd30=_0x26ad06[_0x2ec464];if(_0x35fd30&&_0x35fd30[_0x265ff7(0x37f)]&&_0x35fd30[_0x265ff7(0x37f)][_0x265ff7(0x340)]){const _0x54187f=typeof _0x35fd30[_0x265ff7(0x37f)][_0x265ff7(0x340)]===_0x265ff7(0x283)?_0x35fd30[_0x265ff7(0x37f)][_0x265ff7(0x340)]['de']:_0x35fd30['common'][_0x265ff7(0x340)];_0x54187f&&!_0x1533cb[_0x265ff7(0x322)](_0x54187f)&&(_0x1533cb=_0x54187f+'\x20'+_0x1533cb);}}}let _0x244f3e='';if(_0x293531&&(_0xaaa1fe[_0x265ff7(0x322)](_0x265ff7(0x2d0))||_0xaaa1fe[_0x265ff7(0x322)]('occupancy')||_0x37aea5[_0x265ff7(0x322)](_0x265ff7(0x25b))||_0x37aea5[_0x265ff7(0x322)](_0x265ff7(0x274))))_0x244f3e=_0x265ff7(0x2d0);else{if(!_0x244f3e&&_0x2fff1b&&(_0xaaa1fe[_0x265ff7(0x322)]('door')||_0xaaa1fe[_0x265ff7(0x322)](_0x265ff7(0x18c))||_0xaaa1fe[_0x265ff7(0x322)](_0x265ff7(0x26c))||_0xaaa1fe['includes'](_0x265ff7(0x1d5))||_0xaaa1fe[_0x265ff7(0x322)](_0x265ff7(0x227))||_0x37aea5[_0x265ff7(0x322)](_0x265ff7(0x280))||_0x37aea5[_0x265ff7(0x322)](_0x265ff7(0x34d))||_0x37aea5[_0x265ff7(0x322)](_0x265ff7(0x2fe))))_0x244f3e=_0x265ff7(0x25e);else{if(!_0x244f3e&&_0x46d729&&(_0xaaa1fe[_0x265ff7(0x322)](_0x265ff7(0x328))||_0xaaa1fe[_0x265ff7(0x322)](_0x265ff7(0x354))||_0xaaa1fe[_0x265ff7(0x322)]('dimmer')||_0x37aea5[_0x265ff7(0x322)]('licht')||_0x37aea5[_0x265ff7(0x322)](_0x265ff7(0x2f3))||_0x37aea5[_0x265ff7(0x322)]('schalter'))){if(_0x3aabe4['common'][_0x265ff7(0x17e)]||_0xaaa1fe[_0x265ff7(0x322)](_0x265ff7(0x2fd)))_0x244f3e=_0x265ff7(0x328);}else{if(!_0x244f3e&&_0xd76671&&(_0xaaa1fe[_0x265ff7(0x322)](_0x265ff7(0x2a3))||_0xaaa1fe[_0x265ff7(0x322)](_0x265ff7(0x20c))||_0xaaa1fe[_0x265ff7(0x322)](_0x265ff7(0x2d9))||_0x37aea5['includes'](_0x265ff7(0x24c))||_0x37aea5[_0x265ff7(0x322)](_0x265ff7(0x1ab))||_0x37aea5[_0x265ff7(0x322)]('heizung')))_0x244f3e=_0x265ff7(0x2a3);else{if(!_0x244f3e&&_0x1a89e0)_0x244f3e=_0x265ff7(0x195);}}}}if(_0x244f3e){let _0x48a26b=_0x335cc3[_0x17af36]||'';if(!_0x48a26b){let _0x34b97c=_0x17af36;for(let _0x2d75cd=0x0;_0x2d75cd<0x3;_0x2d75cd++){const _0x574cbe=_0x34b97c[_0x265ff7(0x331)]('.');if(_0x574cbe===-0x1)break;_0x34b97c=_0x34b97c[_0x265ff7(0x294)](0x0,_0x574cbe);if(_0x335cc3[_0x34b97c]){_0x48a26b=_0x335cc3[_0x34b97c];break;}}}_0x516743[_0x265ff7(0x22c)]({'id':_0x17af36,'name':_0x1533cb,'location':_0x48a26b,'type':_0x244f3e,'logDuplicates':_0x244f3e==='motion','isExit':![],'_score':_0x48a26b?0x50:_0x244f3e===_0x265ff7(0x195)?0x5a:0x28});}}return _0x516743[_0x265ff7(0x37a)]((_0x29bbae,_0x3095e5)=>_0x3095e5['_score']-_0x29bbae[_0x265ff7(0x2af)]),_0x516743;}async function executeAutomationAction(_0xa3187c){const _0x28a69a=a0_0x1ce94d;try{const _0x5b3b0e=await _0xa3187c[_0x28a69a(0x2e7)](_0x28a69a(0x27b)),_0xf3da15=await _0xa3187c[_0x28a69a(0x2e7)](_0x28a69a(0x314));if(_0x5b3b0e&&_0x5b3b0e['val']&&_0xf3da15){const _0xf7cd97=_0x5b3b0e['val'];let _0x5156b4=_0xf3da15[_0x28a69a(0x332)];try{_0x5156b4=JSON['parse'](_0x5156b4);}catch(_0x42ef20){}_0xa3187c[_0x28a69a(0x2c7)][_0x28a69a(0x28a)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0xf7cd97+_0x28a69a(0x2c2)+_0x5156b4),await _0xa3187c[_0x28a69a(0x2d5)](_0xf7cd97,_0x5156b4);}else _0xa3187c['log'][_0x28a69a(0x2fb)](_0x28a69a(0x2b2));}catch(_0x469ece){_0xa3187c[_0x28a69a(0x2c7)][_0x28a69a(0x1d7)](_0x28a69a(0x281)+_0x469ece['message']);}}function tryParse(_0x5f327b){const _0x10c4e1=a0_0x1ce94d;try{return JSON[_0x10c4e1(0x19a)](_0x5f327b);}catch(_0x4c8167){return null;}}async function recordSequence(_0x14521d,_0x5edea7){const _0xf26d42=a0_0x1ce94d,_0x21d5c4=(_0x5edea7[_0xf26d42(0x30d)]||'')[_0xf26d42(0x222)](),_0x2f4615=[_0xf26d42(0x2d0),_0xf26d42(0x25b),_0xf26d42(0x274),_0xf26d42(0x38a),'occupancy',_0xf26d42(0x25e),_0xf26d42(0x34d),_0xf26d42(0x18c),_0xf26d42(0x280),_0xf26d42(0x271),'kontakt',_0xf26d42(0x328),_0xf26d42(0x2f4),_0xf26d42(0x354),_0xf26d42(0x229),_0xf26d42(0x2ed),'lampe'];if(!_0x2f4615[_0xf26d42(0x2a5)](_0x125789=>_0x21d5c4[_0xf26d42(0x322)](_0x125789))){_0x14521d[_0xf26d42(0x2c7)][_0xf26d42(0x1fb)]('[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20'+_0x5edea7['id']+'\x20(Type\x20\x27'+_0x5edea7[_0xf26d42(0x30d)]+'\x27\x20not\x20in\x20allowed\x20list)');return;}if(!_0x5edea7['value']){_0x14521d[_0xf26d42(0x2c7)][_0xf26d42(0x1fb)]('[RECORDER\x20DEBUG]\x20Ignored\x20Event\x20'+_0x5edea7['id']+_0xf26d42(0x293)+_0x5edea7[_0xf26d42(0x330)]+')');return;}_0x14521d[_0xf26d42(0x2c7)]['debug']('[RECORDER\x20DEBUG]\x20Accepting\x20Event\x20'+_0x5edea7['id']+'\x20('+_0x5edea7['location']+')');if(sequenceTimer)clearTimeout(sequenceTimer);const _0x347477={'loc':_0x5edea7['location']||_0xf26d42(0x35a),'id':_0x5edea7['id'],'ts':Date[_0xf26d42(0x179)]()};activeSequence[_0xf26d42(0x22c)](_0x347477),_0x14521d[_0xf26d42(0x2c7)]['debug'](_0xf26d42(0x26d)+_0x347477['loc']+_0xf26d42(0x23a)+activeSequence['length']+')'),sequenceTimer=setTimeout(async()=>{const _0x3f267e=_0xf26d42;activeSequence['length']>0x1?await saveCompletedSequence(_0x14521d):(_0x14521d[_0x3f267e(0x2c7)][_0x3f267e(0x1fb)](_0x3f267e(0x242)+activeSequence['length']+')'),activeSequence=[]);},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x184e90){const _0x5285ea=a0_0x1ce94d;try{_0x184e90[_0x5285ea(0x2c7)]['info']('[RECORDER]\x20Sequence\x20finished\x20(Steps:\x20'+activeSequence['length']+_0x5285ea(0x385));const _0x301e18=await _0x184e90[_0x5285ea(0x2e7)](_0x5285ea(0x288));let _0x49cf0c=[];if(_0x301e18&&_0x301e18[_0x5285ea(0x332)])try{_0x49cf0c=JSON['parse'](_0x301e18[_0x5285ea(0x332)]);}catch(_0x429ec7){}const _0x4ce004=activeSequence[0x0]['ts'],_0x4c3266=activeSequence[_0x5285ea(0x185)](_0x4698bf=>({'loc':_0x4698bf['loc'],'t_delta':Math[_0x5285ea(0x289)]((_0x4698bf['ts']-_0x4ce004)/0x3e8)})),_0x14dd33={'timestamp':new Date(_0x4ce004)[_0x5285ea(0x168)](),'steps':_0x4c3266,'duration':Math['round']((activeSequence[activeSequence[_0x5285ea(0x20a)]-0x1]['ts']-_0x4ce004)/0x3e8),'daytime':new Date(_0x4ce004)['getHours']()};_0x49cf0c[_0x5285ea(0x22c)](_0x14dd33),_0x49cf0c[_0x5285ea(0x20a)]>MAX_TRAINING_SET_SIZE&&_0x49cf0c[_0x5285ea(0x276)](),await _0x184e90[_0x5285ea(0x2bb)](_0x5285ea(0x288),{'val':JSON['stringify'](_0x49cf0c),'ack':!![]}),runSecurityCheck(_0x184e90,_0x14dd33),activeSequence=[],sequenceTimer=null;}catch(_0x346b3f){_0x184e90[_0x5285ea(0x2c7)][_0x5285ea(0x1d7)](_0x5285ea(0x16f)+_0x346b3f[_0x5285ea(0x1f8)]);}}function runSecurityCheck(_0x77ef4f,_0x320a11){const _0x1dceb0=a0_0x1ce94d;if(!_0x77ef4f[_0x1dceb0(0x287)])return;_0x77ef4f[_0x1dceb0(0x2c7)][_0x1dceb0(0x1fb)](_0x1dceb0(0x37d)),sendToPython(_0x77ef4f,_0x1dceb0(0x19d),{'sequence':_0x320a11});}async function getOutsideTemperatureNumeric(_0x4be607){const _0x2b3148=a0_0x1ce94d;if(_0x4be607['config'][_0x2b3148(0x387)])try{const _0x460ffb=await _0x4be607[_0x2b3148(0x32f)](_0x4be607['config'][_0x2b3148(0x387)]);if(_0x460ffb&&_0x460ffb[_0x2b3148(0x332)]!==undefined&&_0x460ffb[_0x2b3148(0x332)]!==null){const _0xd1ff81=parseFloat(_0x460ffb['val']);if(!isNaN(_0xd1ff81))return _0xd1ff81;}}catch(_0x5a9bf9){_0x4be607[_0x2b3148(0x2c7)][_0x2b3148(0x2fb)](_0x2b3148(0x1dd)+_0x4be607['config'][_0x2b3148(0x387)]+':\x20'+_0x5a9bf9[_0x2b3148(0x1f8)]);}const _0x5cb97e=_0x4be607[_0x2b3148(0x22a)][_0x2b3148(0x356)];if(!_0x4be607['config'][_0x2b3148(0x309)]||!_0x5cb97e)return null;try{let _0x4f715e='';if(_0x5cb97e[_0x2b3148(0x322)](_0x2b3148(0x226)))_0x4f715e=_0x5cb97e+'.Current.Temperature';else{if(_0x5cb97e['includes'](_0x2b3148(0x33e)))_0x4f715e=_0x5cb97e+_0x2b3148(0x2de);else{if(_0x5cb97e[_0x2b3148(0x322)](_0x2b3148(0x2ac)))_0x4f715e=_0x5cb97e+_0x2b3148(0x1ca);else{if(_0x5cb97e[_0x2b3148(0x322)](_0x2b3148(0x263)))_0x4f715e=_0x5cb97e+'.forecast.current.temp';}}}if(_0x4f715e){const _0x2bd7b2=await _0x4be607[_0x2b3148(0x32f)](_0x4f715e);if(_0x2bd7b2&&_0x2bd7b2[_0x2b3148(0x332)]!==undefined&&_0x2bd7b2['val']!==null)return parseFloat(_0x2bd7b2[_0x2b3148(0x332)]);}}catch(_0x2ba972){}return null;}async function recordThermodynamics(_0x30705e,_0x5c56e4,_0x5f2b24,_0x12b0e3){const _0x40dfff=a0_0x1ce94d,_0x60d3d6=await getOutsideTemperatureNumeric(_0x30705e),_0x5b29d8=await _0x30705e[_0x40dfff(0x2e7)]('LTM.trainingData.thermodynamics');let _0x15bfd8=[];if(_0x5b29d8&&_0x5b29d8[_0x40dfff(0x332)])try{_0x15bfd8=JSON[_0x40dfff(0x19a)](_0x5b29d8[_0x40dfff(0x332)]);}catch(_0x1cb888){}_0x15bfd8['push']({'ts':Date['now'](),'room':_0x12b0e3||_0x40dfff(0x35a),'t_in':_0x5f2b24,'t_out':_0x60d3d6});if(_0x15bfd8[_0x40dfff(0x20a)]>THERMO_LOG_SIZE)_0x15bfd8['shift']();await _0x30705e[_0x40dfff(0x2bb)](_0x40dfff(0x286),{'val':JSON[_0x40dfff(0x295)](_0x15bfd8),'ack':!![]});}async function processSensorEvent(_0x324fbd,_0x1f4ced,_0xa3fc82,_0x168d0d){const _0x2c4bd5=a0_0x1ce94d;if(!_0x168d0d)return;const _0x2225ff=_0xa3fc82['val'],_0x2b860b=Date[_0x2c4bd5(0x179)]();_0x324fbd[_0x2c4bd5(0x2c7)][_0x2c4bd5(0x1fb)](_0x2c4bd5(0x2c0)+_0x1f4ced+_0x2c4bd5(0x2c2)+_0x2225ff);const _0x30d1bf=_0x324fbd['sensorLastValues'][_0x1f4ced];_0x324fbd['sensorLastValues'][_0x1f4ced]=_0x2225ff;if(!_0x168d0d[_0x2c4bd5(0x193)]&&_0x30d1bf!=undefined&&_0x30d1bf==_0x2225ff){_0x324fbd[_0x2c4bd5(0x2c7)][_0x2c4bd5(0x1fb)]('IGNORING\x20DUPLICATE\x20(Cached):\x20'+_0x168d0d[_0x2c4bd5(0x340)]+'\x20(Value:\x20'+_0x2225ff+')');return;}const _0x52fde0=(_0x168d0d[_0x2c4bd5(0x30d)]||'')[_0x2c4bd5(0x222)](),_0x112c72=_0x52fde0[_0x2c4bd5(0x322)](_0x2c4bd5(0x2a3))||_0x52fde0[_0x2c4bd5(0x322)](_0x2c4bd5(0x372))||_0x52fde0[_0x2c4bd5(0x322)](_0x2c4bd5(0x1ab))||_0x52fde0[_0x2c4bd5(0x322)](_0x2c4bd5(0x260));_0x324fbd[_0x2c4bd5(0x287)]&&_0x112c72&&recordThermodynamics(_0x324fbd,_0x1f4ced,_0x2225ff,_0x168d0d[_0x2c4bd5(0x373)]);const _0x1c1bc8={'timestamp':_0x2b860b,'id':_0x1f4ced,'name':_0x168d0d[_0x2c4bd5(0x340)],'type':_0x168d0d[_0x2c4bd5(0x30d)],'location':_0x168d0d[_0x2c4bd5(0x373)],'value':_0x2225ff};_0x324fbd[_0x2c4bd5(0x17d)][_0x2c4bd5(0x301)](_0x1c1bc8);if(_0x324fbd[_0x2c4bd5(0x17d)][_0x2c4bd5(0x20a)]>HISTORY_MAX_SIZE)_0x324fbd[_0x2c4bd5(0x17d)][_0x2c4bd5(0x36c)]();await _0x324fbd[_0x2c4bd5(0x2bb)](_0x2c4bd5(0x2f1),{'val':JSON[_0x2c4bd5(0x295)](_0x1c1bc8),'ack':!![]}),await _0x324fbd['setStateAsync'](_0x2c4bd5(0x36b),{'val':JSON[_0x2c4bd5(0x295)](_0x324fbd[_0x2c4bd5(0x17d)]),'ack':!![]});_0x324fbd[_0x2c4bd5(0x287)]&&(_0x324fbd['rawEventLog'][_0x2c4bd5(0x22c)](_0x1c1bc8),await saveRawEventLog(_0x324fbd),recordSequence(_0x324fbd,_0x1c1bc8));if(_0x168d0d[_0x2c4bd5(0x228)]&&_0x2225ff===!![]){if(_0x324fbd[_0x2c4bd5(0x1f3)]&&!_0x324fbd[_0x2c4bd5(0x1f0)])_0x324fbd[_0x2c4bd5(0x2c7)][_0x2c4bd5(0x28a)]('Exit\x20Sensor\x20triggered\x20('+_0x168d0d[_0x2c4bd5(0x340)]+_0x2c4bd5(0x28c)),startExitTimer(_0x324fbd);else!_0x324fbd[_0x2c4bd5(0x1f3)]&&(_0x324fbd[_0x2c4bd5(0x2c7)][_0x2c4bd5(0x28a)](_0x2c4bd5(0x1c9)+_0x168d0d[_0x2c4bd5(0x340)]+'.\x20Welcome\x20home.'),await setPresence(_0x324fbd,!![]));}else _0x168d0d[_0x2c4bd5(0x30d)]==='motion'&&_0x2225ff===!![]&&(_0x324fbd[_0x2c4bd5(0x249)]&&(_0x324fbd[_0x2c4bd5(0x2c7)]['info'](_0x2c4bd5(0x1d6)),abortExitTimer(_0x324fbd)),!_0x324fbd[_0x2c4bd5(0x1f3)]&&_0x324fbd[_0x2c4bd5(0x317)]===SYSTEM_MODES[_0x2c4bd5(0x279)]&&await setPresence(_0x324fbd,!![]));}async function runGeminiAnalysis(_0x3d792f,_0x5a7633=''){const _0x6531de=a0_0x1ce94d;if(!_0x3d792f[_0x6531de(0x240)])return;if(_0x3d792f[_0x6531de(0x17d)][_0x6531de(0x20a)]===0x0)return;const _0x499d35=_0x3d792f[_0x6531de(0x17d)][_0x6531de(0x171)](0x0,0xf),_0x573512=await getWeatherContext(_0x3d792f),_0x20e03e=_0x3d792f[_0x6531de(0x317)],_0x12b329=PERSONA_MAPPING[_0x3d792f[_0x6531de(0x22a)][_0x6531de(0x1c3)]||_0x6531de(0x2d6)],_0x593cb0=_0x3d792f['config']['livingContext']||'Keine\x20Details.';let _0x3b8fe4=_0x6531de(0x341);try{const _0x4de1c9=await _0x3d792f[_0x6531de(0x2e7)]('system.presenceWho');if(_0x4de1c9&&_0x4de1c9[_0x6531de(0x332)])_0x3b8fe4=_0x4de1c9[_0x6531de(0x332)];}catch(_0x1288f8){}let _0x581844=![];try{const _0x28ac18=await _0x3d792f[_0x6531de(0x2e7)](_0x6531de(0x20b));if(_0x28ac18&&_0x28ac18['val'])_0x581844=!![];}catch(_0x84a353){}const _0x4a0a24=_0x6531de(0x36d)+_0x12b329+'.\x0a\x20\x20\x20\x20KONTEXT:\x20'+_0x593cb0+_0x6531de(0x21c)+_0x20e03e+'.\x0a\x20\x20\x20\x20WETTER:\x20'+_0x573512+_0x6531de(0x272)+(_0x5a7633||_0x6531de(0x2a1))+_0x6531de(0x36a)+(_0x3d792f[_0x6531de(0x1f3)]?'Anwesend':_0x6531de(0x1cd))+_0x6531de(0x26f)+_0x3b8fe4+'.\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20INPUT\x20DATEN\x20(Letzte\x20Events):\x0a\x20\x20\x20\x20'+JSON[_0x6531de(0x295)](_0x499d35)+_0x6531de(0x183);try{const _0x215bdc=await _0x3d792f['geminiModel'][_0x6531de(0x297)](_0x4a0a24),_0x2145da=_0x215bdc[_0x6531de(0x284)][_0x6531de(0x259)]()['replace'](/```json|```/g,'')[_0x6531de(0x169)](),_0x4240be=JSON[_0x6531de(0x19a)](_0x2145da);await _0x3d792f[_0x6531de(0x2bb)](_0x6531de(0x2c6),{'val':JSON[_0x6531de(0x295)](_0x4240be),'ack':!![]});_0x4240be['summary']&&await _0x3d792f[_0x6531de(0x2bb)](_0x6531de(0x2f2),{'val':_0x4240be['summary'],'ack':!![]});const _0x18db4f={'timestamp':Date['now'](),'id':Date[_0x6531de(0x179)]()[_0x6531de(0x18e)](),'analysis':{'activity':{'summary':_0x4240be[_0x6531de(0x173)]||_0x6531de(0x178),'isAlert':_0x4240be[_0x6531de(0x1af)]||![],'alertReason':_0x4240be[_0x6531de(0x337)]},'comfort':{'automationProposal':_0x4240be[_0x6531de(0x22d)]}}};await updateAnalysisHistory(_0x3d792f,_0x18db4f);const _0x324660=_0x4240be['isAlert']||![];_0x324660!==_0x3d792f[_0x6531de(0x2fc)]&&(await _0x3d792f['setStateAsync']('analysis.isAlert',{'val':_0x324660,'ack':!![]}),_0x3d792f['lastAlertState']=_0x324660,_0x324660&&(await _0x3d792f[_0x6531de(0x2bb)](_0x6531de(0x30c),{'val':_0x4240be[_0x6531de(0x337)],'ack':!![]}),sendNotification(_0x3d792f,_0x6531de(0x2cb)+_0x4240be[_0x6531de(0x337)],![],_0x4240be[_0x6531de(0x18f)]))),_0x4240be[_0x6531de(0x22d)]&&_0x4240be[_0x6531de(0x22d)][_0x6531de(0x364)]&&_0x4240be[_0x6531de(0x22d)][_0x6531de(0x23d)]&&(_0x3d792f['log'][_0x6531de(0x28a)](_0x6531de(0x31b)+_0x4240be[_0x6531de(0x22d)][_0x6531de(0x30e)]),await _0x3d792f[_0x6531de(0x2bb)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x3d792f[_0x6531de(0x2bb)](_0x6531de(0x28f),{'val':_0x4240be['automationProposal'][_0x6531de(0x30e)],'ack':!![]}),await _0x3d792f[_0x6531de(0x2bb)](_0x6531de(0x27b),{'val':_0x4240be['automationProposal'][_0x6531de(0x23d)],'ack':!![]}),await _0x3d792f[_0x6531de(0x2bb)](_0x6531de(0x314),{'val':JSON[_0x6531de(0x295)](_0x4240be[_0x6531de(0x22d)][_0x6531de(0x21b)]),'ack':!![]}),_0x581844&&(_0x3d792f[_0x6531de(0x2c7)][_0x6531de(0x28a)]('ðŸ¤–\x20BUTLER\x20AUTO-APPLY:\x20Executing\x20'+_0x4240be[_0x6531de(0x22d)][_0x6531de(0x23d)]+_0x6531de(0x381)),await executeAutomationAction(_0x3d792f)));}catch(_0x524573){_0x3d792f[_0x6531de(0x2c7)][_0x6531de(0x1d7)](_0x6531de(0x2c5)+_0x524573[_0x6531de(0x1f8)]);}}function installPythonDependencies(_0x3a9779){const _0x5e7ec8=a0_0x1ce94d;if(_0x3a9779[_0x5e7ec8(0x32a)])return;_0x3a9779[_0x5e7ec8(0x32a)]=!![];const _0x5443e0=path['join'](__dirname,'python_service',_0x5e7ec8(0x2ce));_0x3a9779[_0x5e7ec8(0x2c7)][_0x5e7ec8(0x28a)](_0x5e7ec8(0x1b5)+_0x5443e0+_0x5e7ec8(0x381)),stopPythonService(_0x3a9779);const _0x3a4e22='python3\x20-m\x20pip\x20install\x20-r\x20\x22'+_0x5443e0+_0x5e7ec8(0x187);exec(_0x3a4e22,(_0x4ee8ed,_0x545103,_0x583a2e)=>{const _0xa30e7b=_0x5e7ec8,_0x502133=_0x583a2e&&_0x583a2e[_0xa30e7b(0x322)](_0xa30e7b(0x220))||_0x4ee8ed&&_0x4ee8ed['message'][_0xa30e7b(0x322)]('No\x20module\x20named\x20pip');if(_0x502133){_0x3a9779[_0xa30e7b(0x2c7)][_0xa30e7b(0x2fb)]('âš ï¸\x20PIP\x20is\x20missing.\x20Attempting\x20self-healing\x20via\x20ensurepip\x20(User\x20Mode)...'),exec(_0xa30e7b(0x311),(_0x56e1b9,_0x3ebb05,_0x5907f8)=>{const _0x2a2e73=_0xa30e7b;_0x56e1b9?(_0x3a9779['log'][_0x2a2e73(0x1d7)](_0x2a2e73(0x22e)),_0x3a9779[_0x2a2e73(0x2c7)]['error'](_0x2a2e73(0x349)),_0x3a9779[_0x2a2e73(0x32a)]=![]):(_0x3a9779[_0x2a2e73(0x2c7)][_0x2a2e73(0x28a)](_0x2a2e73(0x278)),exec(_0x2a2e73(0x1a1)+_0x5443e0+'\x22\x20--break-system-packages\x20--user',(_0x1d5cda,_0xa1b8b6,_0x4eb745)=>{const _0x35c80f=_0x2a2e73;_0x1d5cda?_0x3a9779[_0x35c80f(0x2c7)][_0x35c80f(0x1d7)](_0x35c80f(0x25f)+_0x1d5cda[_0x35c80f(0x1f8)]):(_0x3a9779[_0x35c80f(0x2c7)]['info'](_0x35c80f(0x38b)),startPythonService(_0x3a9779)),_0x3a9779[_0x35c80f(0x32a)]=![];}));});return;}_0x3a9779[_0xa30e7b(0x32a)]=![],_0x4ee8ed?(_0x3a9779['log'][_0xa30e7b(0x1d7)](_0xa30e7b(0x35f)),_0x3a9779[_0xa30e7b(0x2c7)][_0xa30e7b(0x1d7)](_0xa30e7b(0x28e)+(_0x583a2e||_0x4ee8ed['message']))):(_0x3a9779['log'][_0xa30e7b(0x28a)]('âœ…\x20AUTO-FIX\x20SUCCESS.\x20Dependencies\x20installed.\x20Restarting\x20Service...'),startPythonService(_0x3a9779));});}function a0_0x5531(_0x590cd4,_0x16d29c){const _0x110fd7=a0_0x4920();return a0_0x5531=function(_0x40575c,_0x3d3d4c){_0x40575c=_0x40575c-0x168;let _0x492028=_0x110fd7[_0x40575c];return _0x492028;},a0_0x5531(_0x590cd4,_0x16d29c);}function sendToPython(_0x32c013,_0x3429e7,_0x18d10a={}){const _0x3da8ba=a0_0x1ce94d;if(!_0x32c013['pythonProcess']||!_0x32c013[_0x3da8ba(0x388)][_0x3da8ba(0x350)]['writable'])return;const _0x3c5663=JSON[_0x3da8ba(0x295)]({'command':_0x3429e7,..._0x18d10a});try{_0x32c013[_0x3da8ba(0x388)][_0x3da8ba(0x350)]['write'](_0x3c5663+'\x0a');}catch(_0x174f03){_0x32c013[_0x3da8ba(0x2c7)][_0x3da8ba(0x1d7)](_0x3da8ba(0x1dc)+_0x174f03[_0x3da8ba(0x1f8)]);}}function runPythonHealthCheck(_0xdb73c7){const _0x13e1ef=a0_0x1ce94d;if(!_0xdb73c7[_0x13e1ef(0x33a)]||_0xdb73c7[_0x13e1ef(0x33a)]['length']<0x2){_0xdb73c7['log'][_0x13e1ef(0x28a)](_0x13e1ef(0x1be));return;}const _0x54132=_0xdb73c7['dailyDigests']['map'](_0x4cc598=>{const _0x1b493f=_0x13e1ef,_0x4a518d=(_0x4cc598[_0x1b493f(0x241)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x4a518d]||0x32;});_0xdb73c7[_0x13e1ef(0x2c7)][_0x13e1ef(0x28a)](_0x13e1ef(0x33c)+_0x54132[_0x13e1ef(0x20a)]+_0x13e1ef(0x233)),sendToPython(_0xdb73c7,_0x13e1ef(0x27c),{'values':_0x54132,'tag':'Activity-Level'});}function handlePythonResult(_0x4a9d31,_0x404927){const _0x34659b=a0_0x1ce94d;if(_0x404927[_0x34659b(0x30d)]===_0x34659b(0x217))_0x4a9d31['log']['debug'](_0x34659b(0x370));else{if(_0x404927['type']==='TREND_RESULT'){const {tag:_0x1bae17,diagnosis:_0x17cd60,change_percent:_0xd51083}=_0x404927[_0x34659b(0x1ae)];_0x4a9d31[_0x34659b(0x2c7)][_0x34659b(0x28a)](_0x34659b(0x2bf)+_0x1bae17+'):\x20'+_0x17cd60+'\x20('+_0xd51083+'%)'),_0x4a9d31[_0x34659b(0x2bb)](_0x34659b(0x1a6),{'val':_0x17cd60,'ack':!![]}),_0x4a9d31[_0x34659b(0x2bb)]('analysis.health.trendValue',{'val':_0xd51083,'ack':!![]});}else{if(_0x404927[_0x34659b(0x30d)]==='TRAINING_COMPLETE'){const {success:_0x286928,details:_0x27f0e4}=_0x404927[_0x34659b(0x1ae)];_0x286928?(_0x4a9d31[_0x34659b(0x2c7)][_0x34659b(0x28a)](_0x34659b(0x310)+_0x27f0e4),_0x4a9d31[_0x34659b(0x2bb)](_0x34659b(0x374),{'val':_0x34659b(0x34c)+new Date()[_0x34659b(0x1c8)]()+'\x20('+_0x27f0e4+')','ack':!![]})):(_0x4a9d31[_0x34659b(0x2c7)]['error'](_0x34659b(0x378)+(_0x27f0e4||_0x34659b(0x200))),_0x4a9d31[_0x34659b(0x2bb)]('analysis.training.status',{'val':'Failed:\x20'+_0x27f0e4,'ack':!![]}));}else{if(_0x404927[_0x34659b(0x30d)]==='SECURITY_RESULT'){const {anomaly_score:_0x5dbca7,is_anomaly:_0x4e2fdd,threshold:_0x3e2db6}=_0x404927[_0x34659b(0x1ae)];_0x4a9d31[_0x34659b(0x2c7)][_0x34659b(0x28a)]('ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20'+_0x5dbca7[_0x34659b(0x2a9)](0x5)+'\x20(Threshold:\x20'+_0x3e2db6+_0x34659b(0x24d)+(_0x4e2fdd?_0x34659b(0x319):'OK')),_0x4a9d31[_0x34659b(0x2bb)](_0x34659b(0x2e6),{'val':_0x5dbca7,'ack':!![]}),_0x4a9d31[_0x34659b(0x2bb)](_0x34659b(0x35d),{'val':new Date()[_0x34659b(0x168)](),'ack':!![]});if(_0x4e2fdd){const _0xc3a520=_0x34659b(0x24f)+_0x5dbca7[_0x34659b(0x2a9)](0x4)+')';_0x4a9d31[_0x34659b(0x2bb)](_0x34659b(0x21e),{'val':!![],'ack':!![]}),_0x4a9d31[_0x34659b(0x2bb)]('analysis.alertReason',{'val':_0xc3a520,'ack':!![]}),sendNotification(_0x4a9d31,_0x34659b(0x2b1)+_0xc3a520,![],!![]);}}}}}}function startPythonService(_0x34dad6){const _0x237f5c=a0_0x1ce94d;try{const _0x165892=path['join'](__dirname,_0x237f5c(0x1ad),_0x237f5c(0x204));_0x34dad6[_0x237f5c(0x2c7)]['info'](_0x237f5c(0x1a5)+_0x165892),_0x34dad6[_0x237f5c(0x388)]=spawn(_0x237f5c(0x1ea),[_0x165892]),_0x34dad6['pythonProcess'][_0x237f5c(0x19b)]['on']('data',_0x108449=>{const _0x5809d8=_0x237f5c,_0x72e6fe=_0x108449[_0x5809d8(0x18e)]()[_0x5809d8(0x2db)]('\x0a');_0x72e6fe[_0x5809d8(0x181)](_0x148544=>{const _0x149d19=_0x5809d8,_0x5c904b=_0x148544['trim']();if(!_0x5c904b)return;if(_0x5c904b[_0x149d19(0x2ff)](_0x149d19(0x1ff)))_0x34dad6[_0x149d19(0x2c7)]['debug']('[PYTHON]\x20'+_0x5c904b[_0x149d19(0x294)](0x5)[_0x149d19(0x169)]());else{if(_0x5c904b[_0x149d19(0x2ff)](_0x149d19(0x31f)))try{const _0x28f4cb=JSON[_0x149d19(0x19a)](_0x5c904b['substring'](0x8)[_0x149d19(0x169)]());handlePythonResult(_0x34dad6,_0x28f4cb);}catch(_0x368351){_0x34dad6['log'][_0x149d19(0x2fb)](_0x149d19(0x312)+_0x5c904b);}}(_0x5c904b[_0x149d19(0x322)]('No\x20module\x20named')||_0x5c904b[_0x149d19(0x322)](_0x149d19(0x238))||_0x5c904b[_0x149d19(0x322)](_0x149d19(0x355)))&&(_0x34dad6[_0x149d19(0x2c7)]['warn']('âš ï¸\x20Python\x20missing\x20dependencies.\x20Triggering\x20Auto-Install...'),installPythonDependencies(_0x34dad6));});}),_0x34dad6[_0x237f5c(0x388)]['stderr']['on'](_0x237f5c(0x2d2),_0x5e81d6=>{const _0xd574cf=_0x237f5c,_0x9c180a=_0x5e81d6[_0xd574cf(0x18e)]()[_0xd574cf(0x169)]();_0x34dad6[_0xd574cf(0x2c7)][_0xd574cf(0x1d7)](_0xd574cf(0x306)+_0x9c180a);}),_0x34dad6[_0x237f5c(0x388)]['on'](_0x237f5c(0x232),_0x56cff7=>{const _0x1d7711=_0x237f5c;_0x34dad6[_0x1d7711(0x2c7)][_0x1d7711(0x28a)]('[PYTHON]\x20Service\x20exited\x20with\x20code\x20'+_0x56cff7),_0x34dad6[_0x1d7711(0x388)]=null;}),_0x34dad6[_0x237f5c(0x388)]['on'](_0x237f5c(0x1d7),_0x2f9bdb=>{const _0x4aa6f4=_0x237f5c;_0x34dad6[_0x4aa6f4(0x2c7)][_0x4aa6f4(0x2fb)]('[PYTHON]\x20Failed\x20to\x20start\x20(is\x20python3\x20installed?):\x20'+_0x2f9bdb[_0x4aa6f4(0x1f8)]);});}catch(_0x42103c){_0x34dad6[_0x237f5c(0x2c7)]['error']('Error\x20launching\x20Python\x20service:\x20'+_0x42103c[_0x237f5c(0x1f8)]);}}function stopPythonService(_0xf2face){const _0x3a1e88=a0_0x1ce94d;if(_0xf2face[_0x3a1e88(0x388)]){_0xf2face[_0x3a1e88(0x2c7)][_0x3a1e88(0x28a)]('ðŸ\x20Stopping\x20Python\x20Sidecar...');try{_0xf2face['pythonProcess'][_0x3a1e88(0x23f)]();}catch(_0x5c08bc){_0xf2face['log'][_0x3a1e88(0x2fb)](_0x3a1e88(0x1da)+_0x5c08bc[_0x3a1e88(0x1f8)]);}_0xf2face[_0x3a1e88(0x388)]=null;}}class CogniLiving extends utils[a0_0x1ce94d(0x383)]{constructor(_0x536ba1){const _0x5a965d=a0_0x1ce94d;super({..._0x536ba1,'name':'cogni-living'}),this['eventHistory']=[],this['analysisHistory']=[],this[_0x5a965d(0x24a)]=[],this[_0x5a965d(0x32b)]=[],this[_0x5a965d(0x33a)]=[],this[_0x5a965d(0x2b0)]={},this[_0x5a965d(0x254)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x5a965d(0x1f3)]=!![],this['exitTimer']=null,this[_0x5a965d(0x2d1)]=null,this[_0x5a965d(0x1f0)]=![],this['genAI']=null,this[_0x5a965d(0x240)]=null,this['currentSystemMode']=SYSTEM_MODES[_0x5a965d(0x279)],this['isProVersion']=![],this[_0x5a965d(0x2fc)]=![],this['systemUUID']=_0x5a965d(0x174),this['analysisTimer']=null,this[_0x5a965d(0x27a)]=null,this['modeResetJob']=null,this[_0x5a965d(0x1d9)]=null,this[_0x5a965d(0x2a2)]=null,this[_0x5a965d(0x388)]=null,this[_0x5a965d(0x32a)]=![],this['on']('ready',this[_0x5a965d(0x1fd)][_0x5a965d(0x36f)](this)),this['on']('stateChange',this[_0x5a965d(0x1a8)][_0x5a965d(0x36f)](this)),this['on'](_0x5a965d(0x2b7),this[_0x5a965d(0x327)][_0x5a965d(0x36f)](this)),this['on'](_0x5a965d(0x1f8),this[_0x5a965d(0x264)][_0x5a965d(0x36f)](this));}async[a0_0x1ce94d(0x1fd)](){const _0x35d898=a0_0x1ce94d;this[_0x35d898(0x2c7)][_0x35d898(0x28a)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x35d898(0x300)]+_0x35d898(0x1e6)),await initZombies(this),this[_0x35d898(0x22a)][_0x35d898(0x368)]=this[_0x35d898(0x22a)]['licenseKey']||'';try{this['isProVersion']=await checkLicense(this,this[_0x35d898(0x22a)]['licenseKey']);}catch(_0x3e61fa){}if(!this[_0x35d898(0x22a)][_0x35d898(0x17a)]||this[_0x35d898(0x22a)][_0x35d898(0x17a)]<0.1)this[_0x35d898(0x22a)]['inactivityThresholdHours']=0xc;await initHistory(this),await initSystemConfig(this);if(this[_0x35d898(0x22a)][_0x35d898(0x382)])try{this[_0x35d898(0x270)]=new GoogleGenerativeAI(this['config'][_0x35d898(0x382)]),this[_0x35d898(0x240)]=this[_0x35d898(0x270)][_0x35d898(0x1bf)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x35d898(0x2c7)][_0x35d898(0x28a)](_0x35d898(0x2ca));}catch(_0x55588f){this[_0x35d898(0x2c7)][_0x35d898(0x1d7)](_0x35d898(0x218)+_0x55588f[_0x35d898(0x1f8)]);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this['subscribeStates'](_0x35d898(0x239)),this['subscribeStates'](LTM_DP_TRIGGER_DIGEST),this['subscribeStates']('system.mode'),this[_0x35d898(0x291)](_0x35d898(0x367)),this[_0x35d898(0x291)]('analysis.automation.triggerAction'),this['subscribeStates'](_0x35d898(0x20b)),this[_0x35d898(0x291)]('analysis.training.triggerSecurity'),await initSensorSubscriptions(this),await initPresenceSubscriptions(this),await setupTelegramListener(this),setTimeout(()=>checkWifiPresence(this),0x1388);if(this[_0x35d898(0x176)])clearInterval(this[_0x35d898(0x176)]);const _0xfb3d28=this[_0x35d898(0x22a)]['analysisInterval']||0xf;_0xfb3d28>0x0&&(this[_0x35d898(0x2c7)][_0x35d898(0x28a)]('Starting\x20Autopilot\x20('+_0xfb3d28+'\x20min).'),this[_0x35d898(0x176)]=setInterval(()=>{runAutopilot(this);},_0xfb3d28*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this),startPythonService(this),setTimeout(()=>{const _0x1f5f9f=_0x35d898;this[_0x1f5f9f(0x388)]&&runPythonHealthCheck(this);},0x1388);}['onUnload'](_0x342b5a){const _0x12deae=a0_0x1ce94d;if(this['analysisTimer'])clearInterval(this[_0x12deae(0x176)]);if(this[_0x12deae(0x1d9)])clearInterval(this[_0x12deae(0x1d9)]);if(this['ltmJob'])this[_0x12deae(0x27a)][_0x12deae(0x298)]();if(this['modeResetJob'])this[_0x12deae(0x27e)]['cancel']();if(this[_0x12deae(0x2a2)])this[_0x12deae(0x2a2)][_0x12deae(0x298)]();if(this[_0x12deae(0x249)])clearTimeout(this[_0x12deae(0x249)]);if(this[_0x12deae(0x2d1)])clearTimeout(this[_0x12deae(0x2d1)]);stopPythonService(this),_0x342b5a();}async['onStateChange'](_0xbbe34,_0x1c7fd9){const _0x2cd2bd=a0_0x1ce94d;if(!_0x1c7fd9)return;if(_0xbbe34[_0x2cd2bd(0x322)](_0x2cd2bd(0x34e))&&_0xbbe34[_0x2cd2bd(0x2f7)]('communicate.request')&&_0x1c7fd9[_0x2cd2bd(0x332)]){await handleTelegramResponse(this,_0x1c7fd9['val']);return;}if(_0xbbe34===this[_0x2cd2bd(0x210)]+'.'+SYSTEM_DP_MODE){_0x1c7fd9['val']&&Object[_0x2cd2bd(0x338)](SYSTEM_MODES)[_0x2cd2bd(0x322)](_0x1c7fd9[_0x2cd2bd(0x332)])&&(this[_0x2cd2bd(0x317)]=_0x1c7fd9['val'],_0x1c7fd9[_0x2cd2bd(0x332)]===SYSTEM_MODES['VACATION']?await setPresence(this,![]):await setPresence(this,!![]));if(!_0x1c7fd9[_0x2cd2bd(0x358)])this[_0x2cd2bd(0x1a7)](_0xbbe34,{'val':this[_0x2cd2bd(0x317)],'ack':!![]});return;}if(!_0x1c7fd9[_0x2cd2bd(0x358)]){_0xbbe34[_0x2cd2bd(0x322)](_0x2cd2bd(0x239))&&_0x1c7fd9[_0x2cd2bd(0x332)]&&(this[_0x2cd2bd(0x1a7)](_0xbbe34,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0xbbe34[_0x2cd2bd(0x322)](_0x2cd2bd(0x268))&&_0x1c7fd9['val']){this['setState'](_0xbbe34,{'val':![],'ack':!![]});if(this[_0x2cd2bd(0x287)])createDailyDigest(this);}_0xbbe34[_0x2cd2bd(0x322)](_0x2cd2bd(0x24e))&&_0x1c7fd9[_0x2cd2bd(0x332)]&&(this['setState'](_0xbbe34,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0xbbe34[_0x2cd2bd(0x322)]('automation.triggerAction')&&_0x1c7fd9[_0x2cd2bd(0x332)]&&(this[_0x2cd2bd(0x1a7)](_0xbbe34,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0xbbe34[_0x2cd2bd(0x322)]('analysis.training.triggerSecurity')&&_0x1c7fd9[_0x2cd2bd(0x332)]){this[_0x2cd2bd(0x1a7)](_0xbbe34,{'val':![],'ack':!![]});if(!this[_0x2cd2bd(0x287)]){this[_0x2cd2bd(0x2c7)][_0x2cd2bd(0x2fb)](_0x2cd2bd(0x2e5));return;}try{const _0x3b48bd=await this[_0x2cd2bd(0x2e7)](_0x2cd2bd(0x288));if(_0x3b48bd&&_0x3b48bd['val']){const _0x434381=JSON[_0x2cd2bd(0x19a)](_0x3b48bd[_0x2cd2bd(0x332)]);this['log']['info'](_0x2cd2bd(0x1d3)+_0x434381[_0x2cd2bd(0x20a)]+_0x2cd2bd(0x360)),this[_0x2cd2bd(0x2bb)](_0x2cd2bd(0x374),{'val':_0x2cd2bd(0x1b1),'ack':!![]}),sendToPython(this,'TRAIN_SECURITY',{'sequences':_0x434381});}else this[_0x2cd2bd(0x2c7)][_0x2cd2bd(0x2fb)](_0x2cd2bd(0x2cf)),this[_0x2cd2bd(0x2bb)](_0x2cd2bd(0x374),{'val':_0x2cd2bd(0x208),'ack':!![]});}catch(_0x56eca6){this[_0x2cd2bd(0x2c7)][_0x2cd2bd(0x1d7)]('Training\x20Error:\x20'+_0x56eca6['message']);}}return;}if(this[_0x2cd2bd(0x22a)][_0x2cd2bd(0x348)]&&this[_0x2cd2bd(0x22a)][_0x2cd2bd(0x348)][_0x2cd2bd(0x322)](_0xbbe34)){await checkWifiPresence(this);return;}const _0x2c7bda=(this[_0x2cd2bd(0x22a)][_0x2cd2bd(0x1f1)]||[])[_0x2cd2bd(0x334)](_0x5a2cd5=>_0x5a2cd5['id']===_0xbbe34);if(_0x2c7bda)processSensorEvent(this,_0xbbe34,_0x1c7fd9,_0x2c7bda);}async['onMessage'](_0x25efbe){const _0x19e876=a0_0x1ce94d;if(typeof _0x25efbe==='object'&&_0x25efbe[_0x19e876(0x1f8)])try{if(_0x25efbe[_0x19e876(0x31c)]===_0x19e876(0x1e8)){const _0x4eb651=_0x25efbe[_0x19e876(0x1f8)][_0x19e876(0x1c6)]||this[_0x19e876(0x22a)][_0x19e876(0x382)];if(!_0x4eb651)return this['sendTo'](_0x25efbe[_0x19e876(0x234)],_0x25efbe['command'],{'success':![],'message':_0x19e876(0x190)},_0x25efbe['callback']);try{const _0x2b37f0=new GoogleGenerativeAI(_0x4eb651),_0x2dafae=_0x2b37f0[_0x19e876(0x1bf)]({'model':GEMINI_MODEL}),_0x4a131f=await _0x2dafae[_0x19e876(0x297)]('Say\x20Hello'),_0x38c49b=await _0x4a131f[_0x19e876(0x284)],_0x317479=_0x38c49b[_0x19e876(0x259)]();this[_0x19e876(0x250)](_0x25efbe[_0x19e876(0x234)],_0x25efbe[_0x19e876(0x31c)],{'success':!![],'message':_0x19e876(0x2b6)+_0x317479[_0x19e876(0x294)](0x0,0x14)+_0x19e876(0x381)},_0x25efbe[_0x19e876(0x36e)]);}catch(_0x179c10){this[_0x19e876(0x250)](_0x25efbe[_0x19e876(0x234)],_0x25efbe[_0x19e876(0x31c)],{'success':![],'message':'Fehler:\x20'+_0x179c10[_0x19e876(0x1f8)]},_0x25efbe[_0x19e876(0x36e)]);}}else{if(_0x25efbe[_0x19e876(0x31c)]==='testContext'){const _0x3bdf7a=await getWeatherContext(this),_0x46dd1a=await getCalendarContext(this);this[_0x19e876(0x250)](_0x25efbe[_0x19e876(0x234)],_0x25efbe[_0x19e876(0x31c)],{'success':!![],'weather':_0x3bdf7a,'calendar':_0x46dd1a},_0x25efbe[_0x19e876(0x36e)]);}else{if(_0x25efbe[_0x19e876(0x31c)]===_0x19e876(0x1c0)){}else{if(_0x25efbe[_0x19e876(0x31c)]===_0x19e876(0x230)){if(!this[_0x19e876(0x287)])return this[_0x19e876(0x250)](_0x25efbe[_0x19e876(0x234)],_0x25efbe[_0x19e876(0x31c)],{'success':![],'isPro':![]},_0x25efbe['callback']);let _0x1fb3e6={'status':'N/A','details':'','lastCheck':0x0};try{_0x1fb3e6[_0x19e876(0x182)]=(await this[_0x19e876(0x2e7)](LTM_DP_DRIFT_STATUS))[_0x19e876(0x332)],_0x1fb3e6[_0x19e876(0x21f)]=(await this[_0x19e876(0x2e7)](LTM_DP_DRIFT_DETAILS))['val'],_0x1fb3e6[_0x19e876(0x376)]=(await this[_0x19e876(0x2e7)](LTM_DP_DRIFT_LAST_CHECK))['val'];}catch(_0xe06fb8){}const _0x4c3c17=this[_0x19e876(0x2ee)]||[];this[_0x19e876(0x250)](_0x25efbe[_0x19e876(0x234)],_0x25efbe[_0x19e876(0x31c)],{'success':!![],'isPro':!![],'dailyDigests':this['dailyDigests'],'driftAnalysis':_0x1fb3e6,'analysisHistory':_0x4c3c17},_0x25efbe[_0x19e876(0x36e)]);}else{if(_0x25efbe[_0x19e876(0x31c)]===_0x19e876(0x335)){const _0x50f231=this['dailyDigests'][_0x19e876(0x20a)],_0x1b6d22=new Date(),_0xa406d2=new Date(_0x1b6d22[_0x19e876(0x19f)](),_0x1b6d22[_0x19e876(0x186)](),_0x1b6d22[_0x19e876(0x2ea)]())[_0x19e876(0x1e1)](),_0x325853=this['rawEventLog'][_0x19e876(0x359)](_0x585d9d=>new Date(_0x585d9d[_0x19e876(0x1b3)])[_0x19e876(0x1e1)]()>_0xa406d2)[_0x19e876(0x20a)],_0x5b3a78=new Array(0x18)[_0x19e876(0x2b8)](0x0);this[_0x19e876(0x32b)][_0x19e876(0x181)](_0x15cd4d=>{const _0x711b58=_0x19e876,_0x42e71b=new Date(_0x15cd4d[_0x711b58(0x1b3)]);if(_0x42e71b[_0x711b58(0x1e1)]()>_0xa406d2)_0x5b3a78[_0x42e71b[_0x711b58(0x329)]()]++;});let _0x420e44={'status':_0x19e876(0x19c)};try{_0x420e44[_0x19e876(0x182)]=(await this['getStateAsync'](LTM_DP_DRIFT_STATUS))[_0x19e876(0x332)];}catch(_0x360d09){}let _0x3238f4='';try{const _0x18c7d4=await this[_0x19e876(0x2e7)](_0x19e876(0x191));_0x3238f4=_0x18c7d4?_0x18c7d4[_0x19e876(0x332)]:'';}catch(_0x557424){}let _0x3f4b34=null;!this[_0x19e876(0x240)]&&(_0x3f4b34=this['config']['geminiApiKey']?'KI-Modell\x20nicht\x20initialisiert':'Kein\x20API\x20Key!');let _0x1b63d8={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x199e8e=await this[_0x19e876(0x2e7)](_0x19e876(0x1d4)),_0xe30a06=await this[_0x19e876(0x2e7)](_0x19e876(0x28f)),_0x27166b=await this[_0x19e876(0x2e7)](_0x19e876(0x27b)),_0x3c5f3f=await this['getStateAsync']('analysis.automation.targetValue'),_0x3aab3f=await this[_0x19e876(0x2e7)](_0x19e876(0x20b));_0x199e8e&&_0x199e8e[_0x19e876(0x332)]&&(_0x1b63d8[_0x19e876(0x364)]=!![],_0x1b63d8[_0x19e876(0x30e)]=_0xe30a06?_0xe30a06[_0x19e876(0x332)]:'',_0x1b63d8[_0x19e876(0x23d)]=_0x27166b?_0x27166b['val']:'',_0x1b63d8['targetValue']=_0x3c5f3f?_0x3c5f3f[_0x19e876(0x332)]:''),_0x1b63d8[_0x19e876(0x1fe)]=_0x3aab3f?!!_0x3aab3f[_0x19e876(0x332)]:![];}catch(_0x415bd9){}this['sendTo'](_0x25efbe[_0x19e876(0x234)],_0x25efbe[_0x19e876(0x31c)],{'success':!![],'eventHistory':this[_0x19e876(0x17d)][_0x19e876(0x171)](0x0,0xf),'stats':{'digestCount':_0x50f231,'eventCountToday':_0x325853,'hourlyActivity':_0x5b3a78,'driftStatus':_0x420e44[_0x19e876(0x182)],'isPresent':this[_0x19e876(0x1f3)],'presenceWho':_0x3238f4,'minDays':this[_0x19e876(0x22a)]['minDaysForBaseline']||0x7,'stbDays':this[_0x19e876(0x22a)][_0x19e876(0x18a)]||0xe,'ltbDays':this[_0x19e876(0x22a)][_0x19e876(0x1e7)]||0x3c,'systemError':_0x3f4b34},'automation':_0x1b63d8},_0x25efbe[_0x19e876(0x36e)]);}else{if(_0x25efbe[_0x19e876(0x31c)]==='getEnums'){const _0x4633bc=await this[_0x19e876(0x2a7)](_0x19e876(0x20f),_0x19e876(0x2e4)),_0x334aff=[];if(_0x4633bc)for(const _0x49bb96 in _0x4633bc){const _0x3b87a5=_0x4633bc[_0x49bb96],_0x4a4bbd=(_0x3b87a5[_0x19e876(0x37f)]&&typeof _0x3b87a5['common'][_0x19e876(0x340)]===_0x19e876(0x283)?_0x3b87a5[_0x19e876(0x37f)][_0x19e876(0x340)]['de']:_0x3b87a5['common']['name'])||_0x3b87a5[_0x19e876(0x37f)][_0x19e876(0x340)];_0x334aff[_0x19e876(0x22c)]({'id':_0x49bb96,'name':_0x4a4bbd});}this[_0x19e876(0x250)](_0x25efbe[_0x19e876(0x234)],_0x25efbe[_0x19e876(0x31c)],{'success':!![],'enums':_0x334aff},_0x25efbe[_0x19e876(0x36e)]);}else{if(_0x25efbe[_0x19e876(0x31c)]===_0x19e876(0x1ce))try{const _0x5a2de7=await scanForDevices(this,_0x25efbe[_0x19e876(0x1f8)]||{});this[_0x19e876(0x250)](_0x25efbe[_0x19e876(0x234)],_0x25efbe[_0x19e876(0x31c)],{'success':!![],'devices':_0x5a2de7},_0x25efbe[_0x19e876(0x36e)]);}catch(_0x4a08dc){this[_0x19e876(0x250)](_0x25efbe[_0x19e876(0x234)],_0x25efbe['command'],{'success':![],'error':_0x4a08dc[_0x19e876(0x1f8)]},_0x25efbe[_0x19e876(0x36e)]);}else{if(_0x25efbe[_0x19e876(0x31c)]===_0x19e876(0x1f7)){const _0x59b8f4=_0x25efbe['message'][_0x19e876(0x2fa)];if(!_0x59b8f4)return this[_0x19e876(0x250)](_0x25efbe[_0x19e876(0x234)],_0x25efbe[_0x19e876(0x31c)],{'success':![],'error':_0x19e876(0x375)},_0x25efbe[_0x19e876(0x36e)]);const _0xe38ac2=await getCalendarNames(this,_0x59b8f4);this[_0x19e876(0x250)](_0x25efbe[_0x19e876(0x234)],_0x25efbe[_0x19e876(0x31c)],{'success':!![],'names':_0xe38ac2},_0x25efbe[_0x19e876(0x36e)]);}else{if(_0x25efbe['command']===_0x19e876(0x25d)){const {targetId:_0x2d7dad,targetValue:_0x40447c}=_0x25efbe['message'];this[_0x19e876(0x2c7)][_0x19e876(0x28a)](_0x19e876(0x357)+_0x2d7dad+_0x19e876(0x2c2)+_0x40447c),await this['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0x19e876(0x2bb)]('analysis.automation.description',{'val':_0x19e876(0x320)+_0x2d7dad,'ack':!![]}),await this[_0x19e876(0x2bb)](_0x19e876(0x27b),{'val':_0x2d7dad,'ack':!![]}),await this[_0x19e876(0x2bb)]('analysis.automation.targetValue',{'val':_0x40447c,'ack':!![]}),this[_0x19e876(0x250)](_0x25efbe[_0x19e876(0x234)],_0x25efbe[_0x19e876(0x31c)],{'success':!![]},_0x25efbe[_0x19e876(0x36e)]);}else{if(_0x25efbe[_0x19e876(0x31c)]===_0x19e876(0x1d2)){const {historyId:_0x341188,rating:_0x2d642a,comment:_0x25206b,alertReason:_0xef6be3}=_0x25efbe[_0x19e876(0x1f8)];_0x341188&&_0x2d642a?(await saveFeedback(this,{'timestamp':Date[_0x19e876(0x179)](),'historyId':_0x341188,'rating':_0x2d642a,'comment':_0x25206b,'alertReason':_0xef6be3}),this[_0x19e876(0x250)](_0x25efbe[_0x19e876(0x234)],_0x25efbe[_0x19e876(0x31c)],{'success':!![]},_0x25efbe['callback'])):this[_0x19e876(0x250)](_0x25efbe['from'],_0x25efbe[_0x19e876(0x31c)],{'success':![],'error':_0x19e876(0x26e)},_0x25efbe[_0x19e876(0x36e)]);}else _0x25efbe[_0x19e876(0x31c)]===_0x19e876(0x296)&&(this['log'][_0x19e876(0x28a)](_0x19e876(0x32d)),await this[_0x19e876(0x2bb)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),await this[_0x19e876(0x2bb)](_0x19e876(0x28f),{'val':'','ack':!![]}),this[_0x19e876(0x250)](_0x25efbe['from'],_0x25efbe['command'],{'success':!![]},_0x25efbe[_0x19e876(0x36e)]));}}}}}}}}}}catch(_0x20e0d0){this[_0x19e876(0x2c7)][_0x19e876(0x1d7)]('Error\x20in\x20onMessage\x20command\x20'+_0x25efbe['command']+':\x20'+_0x20e0d0[_0x19e876(0x1f8)]);if(_0x25efbe[_0x19e876(0x36e)])this[_0x19e876(0x250)](_0x25efbe[_0x19e876(0x234)],_0x25efbe[_0x19e876(0x31c)],{'success':![],'error':_0x20e0d0[_0x19e876(0x1f8)]},_0x25efbe[_0x19e876(0x36e)]);}}}function a0_0x4920(){const _0x31b35c=['level','onUnload','light','getHours','dependencyInstallInProgress','rawEventLog','guest','User\x20dismissed\x20automation\x20proposal.','unreach','getForeignStateAsync','value','lastIndexOf','val','Started\x20at\x20','find','getOverviewData','baselineDrift','alertReason','values','analysis.feedbackHistory','dailyDigests','analysis.automation.triggerAction','Guardian:\x20Sending\x20','Trigger\x20Analysis','daswetter','history.','name','Unbekannt','native','scriptEnabled','notifyTelegramRecipient','Trend\x20Diagnosis\x20(Python)','Briefing\x20Error:\x20','analysis.automation.suggestedAction','presenceDevices','Please\x20run\x20this\x20MANUALLY\x20in\x20the\x20console\x20(as\x20root/sudo):\x20apt\x20install\x20python3-pip','/100,\x20AktivitÃ¤t\x20seit\x2004:00:\x20','string','Success:\x20','tÃ¼r','telegram','system.','stdin','analysis.automation','Lernphase\x20(','Trend\x20Value\x20(%)','switch','ML-Libs\x20fehlen','weatherInstance','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','ack','filter','Unknown','state','\x20for\x20interactive\x20buttons...','analysis.security.lastCheck','button','âŒ\x20AUTO-FIX\x20FAILED.\x20Please\x20check\x20permissions.','\x20sequences...','Drift\x20Analysis','system.config','Last\x20Anomaly\x20Score','detected','analysis.health','longitude','analysis.triggerBriefing','licenseKey','inactivityMonitoringEnabled','.\x0a\x20\x20\x20\x20ANWESENHEITS_STATUS:\x20','events.history','pop','\x0a\x20\x20\x20\x20ROLLE:\x20KI-Hausverwalter\x20&\x20Gesundheits-Assistent.\x0a\x20\x20\x20\x20PERSONA:\x20','callback','bind','ðŸ\x20Python\x20Pong\x20received!\x20Latency\x20check\x20passed.','Deaktiviert\x20(Pro-Feature)','temperatur','location','analysis.training.status','No\x20instance','lastCheck','8018kewdud','âŒ\x20Training\x20failed:\x20','Normal','sort','Alert\x20Reason','join','ðŸ›¡ï¸\x20SECURITY:\x20Sending\x20sequence\x20to\x20Guard\x20for\x20analysis...','apply','common','setHours','...','geminiApiKey','Adapter','date',').\x20Saving\x20to\x20Training\x20Data.','analysis.comfortSuggestion','outdoorSensorId','pythonProcess','link_quality','presence','âœ…\x20SUCCESS.\x20Dependencies\x20installed.\x20Restarting\x20Service...','toISOString','trim','connection','indicator.alarm','AI\x20Emergency\x20Status','2308595kVFdnH','0\x203\x20*\x20*\x20*','[RECORDER]\x20Error\x20saving\x20sequence:\x20','isArray','slice','\x20Tage)','summary','unknown','analysis.analysisHistory','analysisTimer','notifyPushoverEnabled','Keine\x20Analyse.','now','inactivityThresholdHours','events.history_debug_00','members','eventHistory','write','WETTER:\x20','765961vtoJke','forEach','status','\x0a\x0a\x20\x20\x20\x20AUFGABE:\x0a\x20\x20\x20\x201.\x20Analysiere\x20auf\x20Gesundheitsrisiken\x20(Sturz,\x20InaktivitÃ¤t).\x0a\x20\x20\x20\x202.\x20Analysiere\x20auf\x20Komfort/Automatisierung\x20(\x22Butler\x22).\x20Erkennst\x20du\x20ein\x20Muster?\x20(z.B.\x20\x22Wenn\x20Bewegung\x20Flur,\x20dann\x20Licht\x20an\x22).\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20FORMAT\x20(JSON\x20Only!):\x0a\x20\x20\x20\x20{\x0a\x20\x20\x20\x20\x20\x20\x22isAlert\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22alertReason\x22:\x20\x22string\x20(kurz)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22isEmergency\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x22summary\x22:\x20\x22string\x20(Was\x20passiert\x20gerade?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x22automationProposal\x22:\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22detected\x22:\x20boolean,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22description\x22:\x20\x22string\x20(Was\x20soll\x20automatisiert\x20werden?)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetId\x22:\x20\x22string\x20(ioBroker\x20ID,\x20z.B.\x200_userdata.0.light)\x22,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x22targetValue\x22:\x20\x22any\x20(Wert,\x20z.B.\x20true\x20oder\x2050)\x22\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20','6IPIzYa','map','getMonth','\x22\x20--break-system-packages','Restoring\x20sensor\x20cache\x20from\x20history\x20(','HARD\x20WATCHDOG:\x20No\x20sensor\x20activity\x20detected\x20for\x20','ltmStbWindowDays','Analysiere\x20ausgewogen.','window','08:00','toString','isEmergency','Kein\x20API\x20Key\x20eingegeben.','system.presenceWho','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','logDuplicates','calendarSelection','custom','scheduleJob','LTM.rawEventLog','ðŸŒ…\x20Daily\x20Briefing:\x0a','Idle','parse','stdout','N/A','ANALYZE_SEQUENCE','ðŸ“ž\x20RÃœCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20RÃ¼ckruf-Button\x20gedrÃ¼ckt.','getFullYear','power','python3\x20-m\x20pip\x20install\x20-r\x20\x22','Array\x20of\x20completed\x20movement\x20paths\x20for\x20ML\x20training','analysis.deviationFromBaseline','LTM.dailyDigests','ðŸ\x20Starting\x20Python\x20Sidecar:\x20','analysis.health.trendDiagnosis','setState','onStateChange','json','analysis.health.sleepScore','klima','Feedback\x20saved:\x20','python_service','payload','isAlert','event','Training\x20started...','getCalendarNames\x20Error:\x20','timestamp','brightness','ðŸ› ï¸\x20AUTO-FIX:\x20Installing\x20Python\x20dependencies\x20from\x20','simple-api.','getForeignObjectAsync','@iobroker/adapter-core','echarts.','Party','Last\x20raw\x20event','latitude','openweathermap.0','Guardian:\x20Not\x20enough\x20history\x20data\x20for\x20trend\x20analysis\x20yet.','getGenerativeModel','testNotification','LTM.driftAnalysis.driftDetails','expire','aiPersona','4726104JSgXgS','.NextHours.Location_1.Day_1.current.symbol_desc','apiKey','channel','toLocaleTimeString','Entry\x20detected\x20via\x20','.forecast.current.temperature','getObjectAsync','analysis.health.notes','ABWESEND','scanDevices','Subscribing\x20to\x20','.\x20OUTPUT:\x20Nur\x20Text.','.\x20DATEN:\x20Schlaf\x20','submitFeedback','ðŸ§ \x20Triggering\x20Security\x20Training\x20with\x20','analysis.automation.patternDetected','blind','Motion\x20detected\x20inside.\x20Aborting\x20Exit\x20Timer.','error','update','driftAnalysisTimer','Could\x20not\x20kill\x20Python\x20process:\x20','Feedback\x20Log','Failed\x20to\x20send\x20to\x20Python:\x20','Error\x20reading\x20outdoor\x20sensor\x20','LTM.driftAnalysis','time','analysis.training','getTime','system.isPresent','selectedFunctionIds','PRO-','analysis.isEmergency',')\x20-\x20FUNCTIONS\x20FIRST\x20ARCHITECTURE','ltmLtbWindowDays','testApiKey','.Summary.Current','python3','\x20|\x20','Who\x20is\x20present?','main','548627OqIglO','setObjectNotExistsAsync','isGracePeriodActive','devices','vacation','isPresent','LTM.baselineStatus','LTM','role','getCalendarNames','message','306OSdiIq','Raw\x20Log','debug','COGNI_REQUEST_CALL','onReady','autoApply','[LOG]','Unknown\x20error','.\x20KONTEXT:\x20','analysis.health.restlessness','scriptProblem','service.py','Thermodynamic\x20Data\x20Points','uuid-error','Train\x20Security\x20Model\x20(LSTM)','No\x20Data','Target\x20Value','length','analysis.automation.autoApply','humidity','Sending\x20notification:\x20\x22','useCalendar','enum.functions.*','namespace','position','Cogni-Living','minDaysForBaseline','search','Live\x20Security\x20Monitor','send','PONG','Gemini\x20Init\x20Error:\x20','Error\x20reading\x20calendar\x20table:\x20','info.','targetValue','.\x0a\x20\x20\x20\x20SYSTEM_MODE:\x20','indicator','analysis.isAlert','details','No\x20module\x20named\x20pip','Trigger\x20Action\x20Now','toLowerCase','notifyPushoverRecipient','health','GUEST','accuweather','shutter','isExit','schalter','config','\x20events','push','automationProposal','âŒ\x20CRITICAL:\x20Self-healing\x20failed.\x20The\x20system\x20is\x20locked\x20down.','notifyPushoverInstance','getLtmData','lowbat','close','\x20days\x20of\x20activity\x20data\x20to\x20Python...','from','notifyTelegramInstance','driftDetails','_calName','Bibliotheken\x20nicht\x20gefunden','analysis.trigger','\x20(Length:\x20','siren','âœ…\x20User\x20confirmed\x20ALARM\x20via\x20Telegram.\x20Resetting\x20system.','targetId','analysis.history_debug_00','kill','geminiModel','activityLevel','[RECORDER]\x20Discarding\x20short\x20sequence\x20(Length:\x20','constructor','\x0aSTB:\x20','LTM.trainingData','config_pending','.\x20ZUSATZ:\x20','toLocaleString','exitTimer','feedbackHistory','Activity\x20Summary','temp',')\x20->\x20','triggerBriefing','UngewÃ¶hnliches\x20Bewegungsmuster\x20erkannt!\x20(Score:\x20','sendTo','Error:\x20','Skipped\x20(No\x20AI\x20or\x20Data)','AI\x20Alert\x20Status','systemConfig','Logbook','enum.rooms.*','ltmDriftCheckIntervalHours','.data.table','text','.forecast.current.state','bewegung','targetposition','simulateButler','door','âŒ\x20Installation\x20failed\x20even\x20after\x20bootstrap:\x20','heizung','direction','normal','weatherunderground','onMessage','stick_unreach','calendarInstance','sendToAsync','triggerDailyDigest','uuid','uuid-not-found','Pattern\x20Detected','lock','[RECORDER]\x20Added\x20step\x20to\x20sequence:\x20','Missing\x20data','.\x0a\x20\x20\x20\x20ANWESENDE_GERAETE:\x20','genAI','contact','.\x0a\x20\x20\x20\x20NOTFALL-KONTEXT:\x20','.communicate.request','prÃ¤senz','Sleep\x20Score\x20(0-100)','shift','Health\x20Notes','âœ…\x20PIP\x20bootstrapped\x20successfully.\x20Retrying\x20installation...','NORMAL','ltmJob','analysis.automation.targetId','ANALYZE_TREND','Scanning\x20for\x20devices\x20(V8:\x20Whitelist\x20Priority)...','modeResetJob','material.','fenster','BUTLER\x20Execution\x20Error:\x20','WETTER:\x20Keine\x20Daten\x20gefunden','object','response','setpoint','LTM.trainingData.thermodynamics','isProVersion','LTM.trainingData.sequences','round','info','city',').\x20Starting\x20Timer.','analysis.security','Details:\x20','analysis.automation.description','node-schedule','subscribeStates','accuweather.0','\x20(Value\x20is\x20falsy:\x20','substring','stringify','dismissAutomation','generateContent','cancel','energy','Last\x20Check','System\x20Status\x20&\x20Control','weather','Drift\x20Details','indexOf','working','notifyEmailRecipient','Keiner','briefingJob','temperature','\x20sensors...','some','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','getForeignObjectsAsync','Urlaub','toFixed','analysis.comfortSummary','(((.+)+)+)+$','openweathermap','@google/generative-ai','8946252xRJAov','_score','sensorLastValues','âš ï¸\x20SECURITY\x20ALARM:\x20','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','Recorded\x20Motion\x20Sequences','0\x204\x20*\x20*\x20*','indicator.alarm.fire','Verbindung\x20erfolgreich!\x20Antwort:\x20','unload','fill','Gast','reachable','setStateAsync','\x20presence\x20devices...','lights','subscribeForeignStatesAsync','ðŸ\x20Guardian\x20Diagnosis\x20(','Event\x20received:\x20','child_process','\x20=\x20','currentposition','Generating\x20Morning\x20Briefing...','Gemini\x20Analysis\x20Error:\x20','analysis.lastResult','log','Alarm','replace','Gemini\x20AI\x20initialized.','âš ï¸\x20ALARM:\x20','icons-mfd.','Correlation\x20between\x20Inside\x20Temp,\x20Outside\x20Temp\x20and\x20Time','requirements.txt','No\x20training\x20sequences\x20found.','motion','exitGraceTimer','data','fault','models/gemini-flash-latest','setForeignStateAsync','generic','PARTY','party','thermostat','weatherunderground.0','split','dutycycle','Comfort\x20Suggestion','.NextHours.Location_1.Day_1.current.temp_value','text.alarm','LTM.driftAnalysis.lastCheck','briefingEnabled','AI\x20Training\x20Control','number','enum','Training\x20only\x20available\x20in\x20Pro\x20Version.','analysis.security.lastScore','getStateAsync','WETTER\x20ERROR:\x20','1671700eofCDg','getDate','ical.0','Deviation','dimmer','analysisHistory','âœ…\x20Alarm\x20quittiert.\x20System\x20normal.','Success:\x20Compressed\x20','events.lastEvent','analysis.activitySummary','lampe','licht','PRIORITÃ„T:\x20Sicherheit.','\x20*\x20*\x20*','endsWith','notifyTelegramEnabled','system','instance','warn','lastAlertState','sensor','rollladen','startsWith','version','unshift','notifyEmailInstance','extendObjectAsync','cover','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','[PYTHON\x20ERR]\x20','[TEST]\x20','vis.','useWeather','actual_temperature','path','analysis.alertReason','type','description','Event\x20History','âœ…\x20SECURITY\x20MODEL\x20TRAINED!\x20Details:\x20','python3\x20-m\x20ensurepip\x20--default-pip\x20--user','Invalid\x20JSON\x20from\x20Python:\x20','system.meta.uuid','analysis.automation.targetValue','System\x20Mode','Kalender:\x20Deaktiviert','currentSystemMode','splice','ANOMALY','Drift\x20Status','ðŸ¤–\x20BUTLER\x20PROPOSAL:\x20','command','Daily\x20Digests','Drift\x20Sched\x20Error:\x20','[RESULT]','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','LTM.processingStatus','includes','Aktiv\x20(','boolean','Baseline\x20Status'];a0_0x4920=function(){return _0x31b35c;};return a0_0x4920();}if(require[a0_0x1ce94d(0x1ed)]!==module)module['exports']=_0x320460=>new CogniLiving(_0x320460);else new CogniLiving();