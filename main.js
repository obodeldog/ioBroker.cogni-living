const a0_0x4c9066=a0_0x56a0;(function(_0x15c17f,_0x44ba32){const _0x305836=a0_0x56a0,_0xfb324=_0x15c17f();while(!![]){try{const _0x355fbf=parseInt(_0x305836(0xb7))/0x1*(parseInt(_0x305836(0xc7))/0x2)+parseInt(_0x305836(0x180))/0x3+parseInt(_0x305836(0xd6))/0x4+parseInt(_0x305836(0x196))/0x5*(parseInt(_0x305836(0x1c6))/0x6)+-parseInt(_0x305836(0xc1))/0x7+-parseInt(_0x305836(0xd8))/0x8*(parseInt(_0x305836(0xd5))/0x9)+-parseInt(_0x305836(0x15f))/0xa;if(_0x355fbf===_0x44ba32)break;else _0xfb324['push'](_0xfb324['shift']());}catch(_0x2f7c2b){_0xfb324['push'](_0xfb324['shift']());}}}(a0_0x42c7,0xd5490));const a0_0x109c54=(function(){let _0xaca1db=!![];return function(_0x5b4591,_0x9c8dda){const _0x21aff2=_0xaca1db?function(){if(_0x9c8dda){const _0x2fc6aa=_0x9c8dda['apply'](_0x5b4591,arguments);return _0x9c8dda=null,_0x2fc6aa;}}:function(){};return _0xaca1db=![],_0x21aff2;};}()),a0_0x4663ee=a0_0x109c54(this,function(){const _0x1c1fbf=a0_0x56a0;return a0_0x4663ee['toString']()['search']('(((.+)+)+)+$')[_0x1c1fbf(0x187)]()['constructor'](a0_0x4663ee)[_0x1c1fbf(0x147)]('(((.+)+)+)+$');});function a0_0x56a0(_0x30a71a,_0x358d98){const _0x242e63=a0_0x42c7();return a0_0x56a0=function(_0x4663ee,_0x109c54){_0x4663ee=_0x4663ee-0x6b;let _0x42c788=_0x242e63[_0x4663ee];return _0x42c788;},a0_0x56a0(_0x30a71a,_0x358d98);}a0_0x4663ee();'use strict';function a0_0x42c7(){const _0x150e58=['Lernphase\x20(','inactivityThresholdHours','./lib/dead_man','initHistory','...','initZombies','analysis.training.triggerEnergy','exitGraceTimer','\x20Kalender-Adapter\x20gefunden.','cogni-living','üö∂\x20Gait\x20Analysis\x20triggered\x20with\x20','getObjectViewAsync','checkWifiPresence','communicate.request','enum','./lib/setup','dependencyInstallInProgress','getCalendarNames','refreshCalendar\x20failed:\x20','accuweather.0','healthTrendInterval','door','triggerEnergyPrediction','Kein\x20API\x20Key\x20√ºbergeben.','ready','temperature','ANALYZE_GAIT','L√ºften\x20empfohlen','date','substring','analysis.topology.structure','find','\x20events\x20from\x20today...','ltmJob','subscribeForeignStatesAsync','open','replayTodayEvents','keys','analysis.security.lastScore','command','.json','getDate','analysis.automation.targetId','@google/generative-ai','\x20Tage)','round','Guest\x20Mode','calendarCheckTimer','apiKey','LTM.dailyDigests','.isOnline','stateChange','subscribeStates','getForeignStateAsync','initSchedules','system.adapter.','times','sunny','Sonne:\x20','bootTime','parse','SYSTEM_DP_MODE','VACATION','fill','readFileSync','scanThermostats','modules','geminiApiKey','infrasoundLocked','analysis.training.status',')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)','health','join','handleInfrasound','triggerInfrasoundCorrelation','./lib/ai_agent','[Integrator]\x20Error:\x20','runPythonHealthCheck','search','\x20rooms)','setStateAsync','getAbsoluteDefaultDataDir','haust√ºr','moduleSecurity','isSolar','Niemand','59\x2023\x20*\x20*\x20*','guest','system','thermostat','PREDICT_ENERGY','DAY','setState','value','getOverviewData','rows','moduleComfort','version','updateSchedulePreview','üîä\x20Infraschall-Alarm:\x20','Daily\x20Room\x20Details\x20(48x30min)','Event','2201640ZvPkJl','warn','getGenerativeModel','üîÆ\x20Energy\x20Prediction\x20triggered\x20(','onMessage','memoryCache','values','genAI','telegram','minDaysForBaseline','isRelevantActivity','moduleEnergy','log','./lib/recorder','analysis.automation.patternDetected','Keine\x20Daten','getHistoryData','motion','bind','Say\x20Hello','NORMAL','runAutopilot',',\x20Temp:\x20','analysis.energy.warmupSources','isProVersion','filter','setHours','toLocaleDateString','Gemini\x20Init\x20Error:\x20','¬∞C\x20(Innen:\x20','triggerEnergyPrediction\x20Error:\x20','config','runGeminiAnalysis','748602gcrCJI','analyzeWindowOpening\x20error:\x20','üîä\x20Infraschall:\x20','Unbekannt','‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.','system.adapter.ical.È¶ô','analysis.training.triggerHealth','toString','activeModules','response','.uptime','scanDevices','üìù\x20Manual\x20event\x20logged:\x20','push','callback','roomIntegratorTimer','namespace','Gemini\x20Report\x20Night','scanForDevices','main','analysis.energy.warmupTimes','node-schedule','5tdTfpY','pop','bin','loadSystemMode','infrasoundEnabled','analysis.training.triggerComfort','pressureBuffer','2-digit','setPresence','\x20events\x20from\x20standard\x20storage.','python','presenceCheckTimer','generateHealthReport','all','string','sources','unshift','briefingJob','No\x20data',',\x20Events:\x0a','\x20>\x20','includes','analysis.health.todayVector','toLowerCase','system.adapter.ical.','rawEventLog','\x20-\x20','triggerGaitAnalysis\x20parse\x20error:\x20','online','models/gemini-flash-latest','manual','analysis.trigger','now','LTM.trainingData.sequences','unload','LTM.baselineStatus','subscribeForeignStates','pulse','analysis.health.todayRoomDetails','debug','General\x20Activity\x20Trend','updateTopologyMatrix','./lib/installer','add','min','from','some','infrasoundSensorId','2447670FeijWB','getHours','\x20(Bewohner\x20anwesend\x20-\x20normal)','cleanupGhostInterventions','exports','isArray','analysis.automation.targetValue','weatherTempId','instance','eventHistory','object','cancel','moduleHealth','common','max','analyzeWindowOpening','dailyDigests','slice','json','updateTopologyMatrix\x20failed:\x20','SYSTEM_MODES','then','Manual\x20Event','analysis.health.activityTrend','events.history','‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.','TRAIN_HEALTH','‚òÄÔ∏è\x20Solar\x20Condition:\x20SUNNY\x20detected\x20via\x20','Sec-Training\x20started...','Standard','\x20sequences','type','refreshCalendar','saveDailyHistory','Warm-Up\x20Time','infrasoundThreshold','stopService','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','analysis.training.triggerSecurity','checkCalendarTriggers','Scan\x20Error:\x20','CALCULATE_HEALTH_TREND','val','toISOString','updated','energy','timestamp','analysis.activity.roomStats','mkdirSync','name','map','üì¶\x20Restored\x20','initSystemConfig','executeAutomationAction','isGracePeriodActive','No\x20topology\x20data\x20found','triggerBriefing','TRAIN_SECURITY','historyJob','devices','forecast.current.weather','info','presenceDevices','triggerHealth\x20error:\x20','üö®\x20INFRASCHALL-ALARM:\x20Anomalie\x20bei\x20Abwesenheit\x20(scharf)!','clear','isPresent','Warte\x20auf\x20Analyse...','location','error','reduce','trackerHeartbeat','Daily\x20Activity\x20Vector\x20(48x30min)','existsSync','setObjectNotExistsAsync','onStateChange','‚Ü∫\x20Replaying\x20','ERROR','replace','utf8','daswetter.0','testContext','matrix','‚úÖ\x20History\x20saved:\x20','security','NIGHT','text','Gute\x20L√ºftungsm√∂glichkeit!','updateHealthVector','integrateRoomTime','startService','send','system.presenceWho','üí®\x20L√ºftung\x20in\x20','triggerGaitAnalysis\x20error:\x20','ack','currentSystemMode','LTM.rawEventLog','klar','path','startSystem','1281000VijLUR','calendarName','Verbindung\x20erfolgreich:\x20','todayVector','Live\x20Event\x20Pulse','Adapter','NextHours.Location_1.Day_1.current.symbol_desc','./lib/scheduler',':\x20Temp-Differenz\x20','checkSolarCondition','2440319ppevXQ','toFixed','updateLocation','threshold_exceeded','sendTo','getForeignObjectsAsync','2ZRkoBC','checkWifiPresence:\x20Error\x20checking\x20','getStateAsync','geminiModel','Unknown','enum.rooms.*','Invalid\x20matrix\x20data','systemConfig','¬∞C,\x20Au√üen:\x20','toLocaleTimeString','length','pythonBridge','forEach','TRAIN_TOPOLOGY','9pTpMOS','1207124VSKsUP','stringify','6382904aIayKp','analysisTimer','analysis.visualization.pulse','abs','application/json','analysis.health.geminiDay','analysis.safety.infrasoundAlert','processSensorEvent','writeFileSync','¬∞C)','.data.table','./lib/python_bridge','@iobroker/adapter-core','Room\x20Dwell\x20Time\x20Stats','infrasoundArmingId','automation.triggerAction','üíæ\x20Saving\x20Daily\x20History\x20for\x20','sendNotification','analysis.training.triggerTopology','analysis.health.geminiNight','number','history','message','comfort','endsWith','getMinutes','analysis.activity.roomHistory','onUnload','state','sensorLastValues','Current.WeatherText','lastTrackerEventTime','LTM.triggerDailyDigest'];a0_0x42c7=function(){return _0x150e58;};return a0_0x42c7();}const utils=require(a0_0x4c9066(0xe4)),{GoogleGenerativeAI}=require(a0_0x4c9066(0x124)),path=require(a0_0x4c9066(0xb5)),fs=require('fs'),installer=require(a0_0x4c9066(0x1c0)),scanner=require('./lib/scanner'),schedulers=require(a0_0x4c9066(0xbe)),topology=require('./lib/topology'),setup=require(a0_0x4c9066(0x108)),recorder=require(a0_0x4c9066(0x16c)),pythonBridge=require(a0_0x4c9066(0xe3)),aiAgent=require(a0_0x4c9066(0x144)),deadMan=require(a0_0x4c9066(0xfb)),automation=require('./lib/automation'),GEMINI_MODEL=a0_0x4c9066(0x1b3);class CogniLiving extends utils[a0_0x4c9066(0xbc)]{constructor(_0x325b89){const _0x476893=a0_0x4c9066;super({..._0x325b89,'name':_0x476893(0x102)}),this[_0x476893(0x1cf)]=[],this['analysisHistory']=[],this[_0x476893(0x1af)]=[],this[_0x476893(0x1d6)]=[],this['sensorLastValues']={},this[_0x476893(0xce)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x476893(0x94)]=!![],this['exitTimer']=null,this[_0x476893(0x100)]=null,this[_0x476893(0x88)]=![],this[_0x476893(0x166)]=null,this[_0x476893(0xca)]=null,this[_0x476893(0xb2)]=setup[_0x476893(0x1da)][_0x476893(0x173)],this['isProVersion']=![],this['lastAlertState']=![],this[_0x476893(0xd9)]=null,this[_0x476893(0x128)]=null,this[_0x476893(0x1a1)]=null,this[_0x476893(0x11a)]=null,this['modeResetJob']=null,this['driftAnalysisTimer']=null,this[_0x476893(0x1a7)]=null,this[_0x476893(0x8c)]=null,this[_0x476893(0x99)]=null,this[_0x476893(0x10d)]=null,this[_0x476893(0x18f)]=null,this[_0x476893(0x109)]=![],this[_0x476893(0xf7)]=Date['now'](),this[_0x476893(0x164)]=null,this[_0x476893(0x134)]=Date[_0x476893(0x1b6)](),this[_0x476893(0x13d)]=![],this[_0x476893(0x19c)]=[],this['activeModules']={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x476893(0x111),this['onReady'][_0x476893(0x171)](this)),this['on'](_0x476893(0x12c),this['onStateChange'][_0x476893(0x171)](this)),this['on'](_0x476893(0x1b8),this[_0x476893(0xf3)][_0x476893(0x171)](this)),this['on'](_0x476893(0xee),this[_0x476893(0x163)][_0x476893(0x171)](this));}async['onReady'](){const _0x2a0a31=a0_0x4c9066;this['log'][_0x2a0a31(0x8f)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x2a0a31(0x15a)]+_0x2a0a31(0x13f));if(this[_0x2a0a31(0x17e)][_0x2a0a31(0x1d2)]!==undefined)this[_0x2a0a31(0x188)][_0x2a0a31(0x140)]=this[_0x2a0a31(0x17e)]['moduleHealth'];if(this['config'][_0x2a0a31(0x14c)]!==undefined)this['activeModules'][_0x2a0a31(0xa6)]=this[_0x2a0a31(0x17e)]['moduleSecurity'];if(this[_0x2a0a31(0x17e)]['moduleEnergy']!==undefined)this[_0x2a0a31(0x188)][_0x2a0a31(0x7f)]=this['config'][_0x2a0a31(0x16a)];if(this[_0x2a0a31(0x17e)][_0x2a0a31(0x159)]!==undefined)this[_0x2a0a31(0x188)][_0x2a0a31(0xef)]=this[_0x2a0a31(0x17e)][_0x2a0a31(0x159)];if(this[_0x2a0a31(0x17e)][_0x2a0a31(0x13b)])this[_0x2a0a31(0x188)]={...this['activeModules'],...this[_0x2a0a31(0x17e)][_0x2a0a31(0x13b)]};this[_0x2a0a31(0xb6)]();}async[a0_0x4c9066(0xb6)](){const _0x492bcf=a0_0x4c9066;await setup[_0x492bcf(0xfe)](this);try{this[_0x492bcf(0x177)]=await setup['checkLicense'](this['config']['licenseKey']);}catch(_0x2b260b){}if(!this[_0x492bcf(0x17e)][_0x492bcf(0xfa)]||this[_0x492bcf(0x17e)][_0x492bcf(0xfa)]<0.1)this[_0x492bcf(0x17e)][_0x492bcf(0xfa)]=0xc;await setup[_0x492bcf(0xfc)](this),await setup[_0x492bcf(0x86)](this),topology['updateTopology'](this);try{const _0x2d21ab=await this['getStateAsync'](_0x492bcf(0x194)),_0xafb037=await this[_0x492bcf(0xc9)](_0x492bcf(0x176));_0x2d21ab&&_0x2d21ab[_0x492bcf(0x7c)]&&_0xafb037&&_0xafb037[_0x492bcf(0x7c)]&&(Date[_0x492bcf(0x1b6)]()-_0x2d21ab['ts']<0x4*0xe10*0x3e8&&(this[_0x492bcf(0x164)]={'times':JSON[_0x492bcf(0x135)](_0x2d21ab[_0x492bcf(0x7c)]),'sources':JSON['parse'](_0xafb037['val'])}));}catch(_0x2a255c){}if(this[_0x492bcf(0x17e)][_0x492bcf(0x13c)])try{this[_0x492bcf(0x166)]=new GoogleGenerativeAI(this[_0x492bcf(0x17e)]['geminiApiKey']),this['geminiModel']=this[_0x492bcf(0x166)][_0x492bcf(0x161)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x492bcf(0xdc)}});}catch(_0x3b29eb){this[_0x492bcf(0x16b)][_0x492bcf(0x97)](_0x492bcf(0x17b)+_0x3b29eb['message']);}await setup['createAllObjects'](this),await this['loadSystemMode'](),schedulers[_0x492bcf(0x12f)](this),await this[_0x492bcf(0x9c)](_0x492bcf(0xda),{'type':_0x492bcf(0xf4),'common':{'name':_0x492bcf(0xbb),'type':_0x492bcf(0xec),'role':_0x492bcf(0x156),'read':!![],'write':![]},'native':{}}),await this[_0x492bcf(0x9c)](_0x492bcf(0x81),{'type':_0x492bcf(0xf4),'common':{'name':_0x492bcf(0xe5),'type':'string','role':'json','read':!![],'write':![],'def':'{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}'},'native':{}}),await this[_0x492bcf(0x9c)]('analysis.activity.roomHistory',{'type':_0x492bcf(0xf4),'common':{'name':'Room\x20History\x20(24h\x20Buckets)','type':_0x492bcf(0x1a4),'role':_0x492bcf(0x1d8),'read':!![],'write':![],'def':'{\x22history\x22:{}}'},'native':{}}),await this[_0x492bcf(0x9c)](_0x492bcf(0xeb),{'type':_0x492bcf(0xf4),'common':{'name':_0x492bcf(0x191),'type':_0x492bcf(0x1a4),'role':'text','read':!![],'write':![],'def':_0x492bcf(0x95)},'native':{}}),await this[_0x492bcf(0x9c)](_0x492bcf(0xdd),{'type':_0x492bcf(0xf4),'common':{'name':'Gemini\x20Report\x20Day','type':_0x492bcf(0x1a4),'role':_0x492bcf(0xa8),'read':!![],'write':![],'def':_0x492bcf(0x95)},'native':{}}),await this[_0x492bcf(0x9c)](_0x492bcf(0x1ac),{'type':'state','common':{'name':_0x492bcf(0x9a),'type':_0x492bcf(0x1a4),'role':_0x492bcf(0x1d8),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0x492bcf(0x1bc),{'type':_0x492bcf(0xf4),'common':{'name':_0x492bcf(0x15d),'type':_0x492bcf(0x1a4),'role':_0x492bcf(0x1d8),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x492bcf(0x9c)](_0x492bcf(0x1dd),{'type':'state','common':{'name':_0x492bcf(0x1be),'type':_0x492bcf(0xec),'role':_0x492bcf(0x156),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x492bcf(0x9c)](_0x492bcf(0x194),{'type':_0x492bcf(0xf4),'common':{'name':_0x492bcf(0x74),'type':_0x492bcf(0x1a4),'role':_0x492bcf(0x1d8),'read':!![],'write':![]},'native':{}});try{const _0x4cc301=await this[_0x492bcf(0xc9)](_0x492bcf(0x1de));if(_0x4cc301&&_0x4cc301['val']){this[_0x492bcf(0x1cf)]=JSON[_0x492bcf(0x135)](_0x4cc301[_0x492bcf(0x7c)]);if(this[_0x492bcf(0x177)]){const _0x47e366=await this['getStateAsync'](_0x492bcf(0xb3));if(_0x47e366&&_0x47e366[_0x492bcf(0x7c)])this[_0x492bcf(0x1af)]=JSON[_0x492bcf(0x135)](_0x47e366['val']);}this[_0x492bcf(0x16b)][_0x492bcf(0x8f)](_0x492bcf(0x85)+this[_0x492bcf(0x1cf)][_0x492bcf(0xd1)]+_0x492bcf(0x19f));}}catch(_0x38e1fc){this[_0x492bcf(0x1cf)]=[];}try{const _0x2d8c46=await this['getStateAsync']('LTM.dailyDigests');if(_0x2d8c46&&_0x2d8c46[_0x492bcf(0x7c)])this[_0x492bcf(0x1d6)]=JSON[_0x492bcf(0x135)](_0x2d8c46[_0x492bcf(0x7c)]);}catch(_0x446737){this[_0x492bcf(0x1d6)]=[];}const _0x4c0507=this[_0x492bcf(0x1d6)][_0x492bcf(0xd1)]>=(this[_0x492bcf(0x17e)][_0x492bcf(0x168)]||0x7)?'Aktiv\x20('+this[_0x492bcf(0x1d6)]['length']+_0x492bcf(0x125):_0x492bcf(0xf9)+this[_0x492bcf(0x1d6)][_0x492bcf(0xd1)]+'/'+(this[_0x492bcf(0x17e)]['minDaysForBaseline']||0x7)+')';await this[_0x492bcf(0x149)](_0x492bcf(0x1b9),{'val':_0x4c0507,'ack':!![]}),this[_0x492bcf(0x12d)]('analysis.trigger'),this['subscribeStates'](_0x492bcf(0xf8)),this['subscribeStates'](_0x492bcf(0x186));this[_0x492bcf(0x17e)][_0x492bcf(0x19a)]&&this[_0x492bcf(0x17e)][_0x492bcf(0x1c5)]&&this[_0x492bcf(0x188)]['security']&&this[_0x492bcf(0x1ba)](this[_0x492bcf(0x17e)][_0x492bcf(0x1c5)]);const _0x150e5c=this[_0x492bcf(0x17e)][_0x492bcf(0x8d)];if(_0x150e5c)for(const _0x3cbd3d of _0x150e5c){await this[_0x492bcf(0x11b)](_0x3cbd3d['id']);}const _0x51b9d=this[_0x492bcf(0x17e)][_0x492bcf(0x90)];if(_0x51b9d)for(const _0x349387 of _0x51b9d){await this[_0x492bcf(0x11b)](_0x349387);}const _0x334757=require(_0x492bcf(0x195));if(this['historyJob'])this[_0x492bcf(0x8c)][_0x492bcf(0x1d1)]();this['historyJob']=_0x334757['scheduleJob'](_0x492bcf(0x14f),()=>{const _0x589c63=_0x492bcf;this[_0x589c63(0x73)]();}),setTimeout(()=>this[_0x492bcf(0x11d)](),0x1388);if(this[_0x492bcf(0x18f)])clearInterval(this['roomIntegratorTimer']);this[_0x492bcf(0xab)](),this[_0x492bcf(0x18f)]=setInterval(async()=>{const _0x2045b8=_0x492bcf;await this[_0x2045b8(0xab)]();},0x3c*0x3e8);if(this[_0x492bcf(0x10d)])clearInterval(this['healthTrendInterval']);this[_0x492bcf(0x10d)]=setInterval(()=>{const _0x1e69e3=_0x492bcf;this[_0x1e69e3(0x177)]&&this[_0x1e69e3(0x188)][_0x1e69e3(0x140)]&&this[_0x1e69e3(0x146)]();},0x4*0x3c*0x3c*0x3e8);if(this[_0x492bcf(0xd9)])clearInterval(this[_0x492bcf(0xd9)]);this[_0x492bcf(0x188)][_0x492bcf(0x7f)]&&(this['analysisTimer']=setInterval(()=>{const _0x5290d4=_0x492bcf;this[_0x5290d4(0x10f)]();},0xf*0x3c*0x3e8),setTimeout(()=>this['triggerEnergyPrediction'](),0x2710));if(this[_0x492bcf(0x128)])clearInterval(this[_0x492bcf(0x128)]);this[_0x492bcf(0x17e)]['useCalendar']&&this[_0x492bcf(0x188)]['energy']&&(this[_0x492bcf(0x128)]=setInterval(()=>{automation['checkCalendarTriggers'](this);},0x2*0x3c*0x3e8),setTimeout(()=>automation[_0x492bcf(0x79)](this),0x3a98));if(this[_0x492bcf(0x1a1)])clearInterval(this[_0x492bcf(0x1a1)]);this[_0x492bcf(0x17e)][_0x492bcf(0x90)]&&this[_0x492bcf(0x17e)][_0x492bcf(0x90)]['length']>0x0&&(this[_0x492bcf(0x1a1)]=setInterval(async()=>{const _0x5a6a97=_0x492bcf;await this[_0x5a6a97(0x105)]();},0x3c*0x3e8),setTimeout(async()=>await this[_0x492bcf(0x105)](),0x1388));const _0x19397c=path[_0x492bcf(0x141)](__dirname,'.venv',_0x492bcf(0x198),_0x492bcf(0x1a0));pythonBridge[_0x492bcf(0xac)](this,_0x19397c);}[a0_0x4c9066(0xf3)](_0x142b56){const _0x140108=a0_0x4c9066;if(this[_0x140108(0x8c)])this[_0x140108(0x8c)]['cancel']();this[_0x140108(0x73)]()[_0x140108(0x1db)](()=>{const _0x577a7f=_0x140108;if(this[_0x577a7f(0xd9)])clearInterval(this['analysisTimer']);if(this[_0x577a7f(0x128)])clearInterval(this[_0x577a7f(0x128)]);if(this[_0x577a7f(0x1a1)])clearInterval(this[_0x577a7f(0x1a1)]);if(this[_0x577a7f(0x18f)])clearInterval(this[_0x577a7f(0x18f)]);recorder['abortExitTimer'](this),pythonBridge[_0x577a7f(0x76)](this),_0x142b56();});}async[a0_0x4c9066(0x11d)](){const _0x2b1bc9=a0_0x4c9066;if(!this['eventHistory']||this[_0x2b1bc9(0x1cf)][_0x2b1bc9(0xd1)]===0x0){this[_0x2b1bc9(0x16b)][_0x2b1bc9(0x160)](_0x2b1bc9(0x184));return;}this[_0x2b1bc9(0x16b)][_0x2b1bc9(0x8f)](_0x2b1bc9(0x9e)+this['eventHistory'][_0x2b1bc9(0xd1)]+_0x2b1bc9(0x119));const _0x5a6c62=new Date()['setHours'](0x0,0x0,0x0,0x0),_0x56b7bb=_0x2b1bc9(0xf2);let _0x47e0cc={'history':{},'date':new Date()['toLocaleDateString']()};const _0x20e29b=_0x2b1bc9(0x1ac),_0x585046=_0x2b1bc9(0x1bc);let _0x59d1e1=new Array(0x30)[_0x2b1bc9(0x138)](0x0),_0x3abda6=Array[_0x2b1bc9(0x1c3)]({'length':0x30},()=>[]);this['eventHistory'][_0x2b1bc9(0xd3)](_0x5851fd=>{const _0x39b6e0=_0x2b1bc9;if(_0x5851fd[_0x39b6e0(0x80)]>=_0x5a6c62){if(recorder[_0x39b6e0(0x169)](_0x5851fd[_0x39b6e0(0x71)],_0x5851fd['value'])){const _0x2a669a=new Date(_0x5851fd['timestamp']),_0x4eabef=_0x2a669a['getHours']()*0x2+(_0x2a669a['getMinutes']()>=0x1e?0x1:0x0);if(_0x4eabef<0x30){_0x59d1e1[_0x4eabef]++;const _0x2f2d43=_0x5851fd['location']||_0x5851fd[_0x39b6e0(0x83)]||'?';let _0x5452b5=_0x3abda6[_0x4eabef];!_0x5452b5[_0x39b6e0(0x1ab)](_0x2f2d43)&&_0x5452b5[_0x39b6e0(0x18d)](_0x2f2d43);}const _0x18f427=_0x2a669a[_0x39b6e0(0x1c7)]();let _0x2fd79b=_0x5851fd[_0x39b6e0(0x96)]||_0x39b6e0(0xcb);const _0x5a4589=(this[_0x39b6e0(0x17e)]['devices']||[])['find'](_0x50f906=>_0x50f906[_0x39b6e0(0x96)]===_0x2fd79b);if(_0x5a4589)_0x2fd79b=_0x5a4589[_0x39b6e0(0x96)];if(!_0x47e0cc['history'][_0x2fd79b])_0x47e0cc[_0x39b6e0(0xed)][_0x2fd79b]=new Array(0x18)[_0x39b6e0(0x138)](0x0);if(_0x47e0cc[_0x39b6e0(0xed)][_0x2fd79b][_0x18f427]<0x3c)_0x47e0cc[_0x39b6e0(0xed)][_0x2fd79b][_0x18f427]++;}}});const _0x370d38=await this['getStateAsync'](_0x56b7bb);(!_0x370d38||!_0x370d38[_0x2b1bc9(0x7c)]||_0x370d38[_0x2b1bc9(0x7c)]==='{}'||_0x370d38['val'][_0x2b1bc9(0x1ab)]('\x22history\x22:{}'))&&await this['setStateAsync'](_0x56b7bb,{'val':JSON['stringify'](_0x47e0cc),'ack':!![]}),await this['setStateAsync'](_0x20e29b,{'val':JSON['stringify'](_0x59d1e1),'ack':!![]}),await this['setStateAsync'](_0x585046,{'val':JSON[_0x2b1bc9(0xd7)](_0x3abda6),'ack':!![]}),this[_0x2b1bc9(0x16b)]['info'](_0x2b1bc9(0x6b));}async[a0_0x4c9066(0x73)](){const _0x5af172=a0_0x4c9066;if(!this[_0x5af172(0x188)]['health'])return;const _0x41a119=new Date()[_0x5af172(0x7d)]()['split']('T')[0x0];this[_0x5af172(0x16b)][_0x5af172(0x1bd)](_0x5af172(0xe8)+_0x41a119+'...');try{const [_0x3b3cfd,_0x162b8a,_0x13ac86,_0xe8f808,_0x43fc95,_0x49826e]=await Promise[_0x5af172(0x1a3)]([this[_0x5af172(0xc9)]('analysis.activity.roomHistory'),this[_0x5af172(0xc9)](_0x5af172(0xeb)),this[_0x5af172(0xc9)]('analysis.health.geminiDay'),this[_0x5af172(0xc9)](_0x5af172(0x11f)),this[_0x5af172(0xc9)](_0x5af172(0x1ac)),this[_0x5af172(0xc9)](_0x5af172(0x1dd))]),_0x49e2c9=new Date()[_0x5af172(0x179)](0x0,0x0,0x0,0x0),_0x11b74a=this['eventHistory'][_0x5af172(0x178)](_0x815e49=>_0x815e49[_0x5af172(0x80)]>=_0x49e2c9&&(_0x815e49[_0x5af172(0x83)][_0x5af172(0x1ad)]()[_0x5af172(0x1ab)](_0x5af172(0x14b))||_0x815e49[_0x5af172(0x83)]['toLowerCase']()[_0x5af172(0x1ab)]('terrasse'))&&(_0x815e49['value']===!![]||_0x815e49['value']===_0x5af172(0x11c)))['length'];let _0x557c80=0x55;if(_0x49826e&&_0x49826e[_0x5af172(0x7c)]!==undefined)_0x557c80=Math[_0x5af172(0x1c2)](0x64,Math[_0x5af172(0x1d4)](0x14,Math[_0x5af172(0x126)](0x50+Number(_0x49826e['val'])*0x5)));const _0x57d4d4=this['eventHistory']['filter'](_0x136f74=>_0x136f74[_0x5af172(0x80)]>=_0x49e2c9),_0x597ecd={'date':_0x41a119,'timestamp':Date[_0x5af172(0x1b6)](),'roomHistory':_0x3b3cfd?.['val']?JSON[_0x5af172(0x135)](_0x3b3cfd[_0x5af172(0x7c)]):{},'geminiNight':_0x162b8a?.[_0x5af172(0x7c)]||_0x5af172(0x16e),'geminiDay':_0x13ac86?.[_0x5af172(0x7c)]||_0x5af172(0x16e),'anomalyScore':_0xe8f808?.[_0x5af172(0x7c)]||0.1,'todayVector':_0x43fc95?.[_0x5af172(0x7c)]?JSON['parse'](_0x43fc95[_0x5af172(0x7c)]):new Array(0x30)[_0x5af172(0x138)](0x0),'batteryLevel':_0x557c80,'freshAirCount':_0x11b74a,'eventHistory':_0x57d4d4},_0x3bc760=utils[_0x5af172(0x14a)](),_0x22bc5f=path[_0x5af172(0x141)](_0x3bc760,_0x5af172(0x102),'history');if(!fs[_0x5af172(0x9b)](_0x22bc5f))fs[_0x5af172(0x82)](_0x22bc5f,{'recursive':!![]});const _0x35fca7=path[_0x5af172(0x141)](_0x22bc5f,_0x41a119+_0x5af172(0x121));fs[_0x5af172(0xe0)](_0x35fca7,JSON[_0x5af172(0xd7)](_0x597ecd)),this[_0x5af172(0x16b)][_0x5af172(0x8f)](_0x5af172(0xa5)+_0x35fca7);}catch(_0x24daab){this[_0x5af172(0x16b)][_0x5af172(0x97)]('History\x20Save\x20Error:\x20'+_0x24daab[_0x5af172(0xee)]);}}async[a0_0x4c9066(0xab)](){const _0x34eec2=a0_0x4c9066;if(!this['isPresent'])return;try{let _0x4bb096=null;try{const _0x2daa70=await this[_0x34eec2(0xc9)]('analysis.prediction.trackerTopRoom'),_0x2ce19b=await this[_0x34eec2(0xc9)]('analysis.prediction.trackerConfidence');if(_0x2daa70&&_0x2daa70[_0x34eec2(0x7c)]&&_0x2ce19b&&_0x2ce19b[_0x34eec2(0x7c)]&&_0x2ce19b['val']>0.3){if(_0x2daa70[_0x34eec2(0x7c)]!=='Unknown'&&_0x2daa70[_0x34eec2(0x7c)]!=='Init...')_0x4bb096=_0x2daa70['val'];}}catch(_0x526b73){}if(!_0x4bb096){const _0x198b49=this[_0x34eec2(0x17e)][_0x34eec2(0x8d)]||[];for(const _0x4f90f9 of _0x198b49){if(_0x4f90f9[_0x34eec2(0x71)]===_0x34eec2(0x170)&&_0x4f90f9[_0x34eec2(0x96)])try{const _0x14558c=await this[_0x34eec2(0x12e)](_0x4f90f9['id']);if(_0x14558c&&(_0x14558c[_0x34eec2(0x7c)]===!![]||_0x14558c['val']==='on'||_0x14558c[_0x34eec2(0x7c)]===0x1)){_0x4bb096=_0x4f90f9[_0x34eec2(0x96)];break;}}catch(_0x2404ec){}}}if(!_0x4bb096)return;const _0x2a38ce=this['config'][_0x34eec2(0x8d)]||[];let _0x2a5fba=_0x4bb096;const _0x5bd63a=_0x2a38ce[_0x34eec2(0x118)](_0x534140=>_0x534140['location']&&_0x534140[_0x34eec2(0x96)][_0x34eec2(0x1ad)]()===_0x4bb096[_0x34eec2(0x1ad)]());if(_0x5bd63a)_0x2a5fba=_0x5bd63a['location'];const _0xe5d413=_0x34eec2(0xf2),_0x4e3820=await this['getStateAsync'](_0xe5d413),_0xc17615=new Date()[_0x34eec2(0x17a)]();let _0x11fb77={'history':{},'date':_0xc17615};if(_0x4e3820&&_0x4e3820[_0x34eec2(0x7c)])try{_0x11fb77=JSON[_0x34eec2(0x135)](_0x4e3820[_0x34eec2(0x7c)]);}catch(_0x2900a9){}_0x11fb77[_0x34eec2(0x115)]!==_0xc17615&&(_0x11fb77[_0x34eec2(0xed)]={},_0x11fb77[_0x34eec2(0x115)]=_0xc17615);if(!_0x11fb77[_0x34eec2(0xed)][_0x2a5fba])_0x11fb77[_0x34eec2(0xed)][_0x2a5fba]=new Array(0x18)['fill'](0x0);const _0x446621=new Date()['getHours']();if(_0x11fb77[_0x34eec2(0xed)][_0x2a5fba][_0x446621]<0x3c)_0x11fb77[_0x34eec2(0xed)][_0x2a5fba][_0x446621]++;await this[_0x34eec2(0x149)](_0xe5d413,{'val':JSON[_0x34eec2(0xd7)](_0x11fb77),'ack':!![]});}catch(_0x412f8d){this[_0x34eec2(0x16b)][_0x34eec2(0x160)](_0x34eec2(0x145)+_0x412f8d[_0x34eec2(0xee)]);}}async[a0_0x4c9066(0x163)](_0x422f38){const _0x3f6978=a0_0x4c9066;if(typeof _0x422f38===_0x3f6978(0x1d0)&&_0x422f38[_0x3f6978(0xee)]){if(_0x422f38[_0x3f6978(0x120)]===_0x3f6978(0x16f)){const _0x2168b9=_0x422f38[_0x3f6978(0xee)][_0x3f6978(0x115)],_0x49726e=utils[_0x3f6978(0x14a)](),_0x105b1d=path[_0x3f6978(0x141)](_0x49726e,'cogni-living',_0x3f6978(0xed),_0x2168b9+_0x3f6978(0x121));if(fs[_0x3f6978(0x9b)](_0x105b1d))try{const _0x250244=JSON[_0x3f6978(0x135)](fs[_0x3f6978(0x139)](_0x105b1d,_0x3f6978(0xa1)));this[_0x3f6978(0xc5)](_0x422f38['from'],_0x422f38[_0x3f6978(0x120)],{'success':!![],'data':_0x250244},_0x422f38[_0x3f6978(0x18e)]);}catch(_0x13cbd0){this[_0x3f6978(0xc5)](_0x422f38[_0x3f6978(0x1c3)],_0x422f38['command'],{'success':![],'error':'Corrupt'},_0x422f38[_0x3f6978(0x18e)]);}else this[_0x3f6978(0xc5)](_0x422f38[_0x3f6978(0x1c3)],_0x422f38['command'],{'success':![],'error':_0x3f6978(0x1a8)},_0x422f38[_0x3f6978(0x18e)]);}else{if(_0x422f38[_0x3f6978(0x120)]===_0x3f6978(0x157)){const _0x22dbdb=this[_0x3f6978(0x1d6)][_0x3f6978(0xd1)];let _0x545e0b=new Array(0x30)['fill'](0x0),_0x5bb2e2=Array[_0x3f6978(0x1c3)]({'length':0x30},()=>[]);try{const _0x25dc3c=await this[_0x3f6978(0xc9)](_0x3f6978(0x1ac));if(_0x25dc3c&&_0x25dc3c['val'])_0x545e0b=JSON[_0x3f6978(0x135)](_0x25dc3c[_0x3f6978(0x7c)]);const _0x16befa=await this[_0x3f6978(0xc9)](_0x3f6978(0x1bc));if(_0x16befa&&_0x16befa[_0x3f6978(0x7c)])_0x5bb2e2=JSON[_0x3f6978(0x135)](_0x16befa[_0x3f6978(0x7c)]);}catch(_0x23b0c5){}let _0x42be34=new Array(0x30)['fill'](0x0);try{const _0x549959=new Date();_0x549959['setDate'](_0x549959[_0x3f6978(0x122)]()-0x1);const _0x3f6878=_0x549959[_0x3f6978(0x7d)]()['split']('T')[0x0],_0x3ee05d=utils[_0x3f6978(0x14a)](),_0x65cb0a=path[_0x3f6978(0x141)](_0x3ee05d,_0x3f6978(0x102),_0x3f6978(0xed),_0x3f6878+_0x3f6978(0x121));if(fs[_0x3f6978(0x9b)](_0x65cb0a)){const _0xf38f87=JSON[_0x3f6978(0x135)](fs[_0x3f6978(0x139)](_0x65cb0a,_0x3f6978(0xa1)));if(_0xf38f87&&_0xf38f87[_0x3f6978(0xba)])_0x42be34=_0xf38f87['todayVector'];}}catch(_0x5141cd){}let _0x2f1e1b={'today':{},'yesterday':{}};try{const _0x7a7506=await this['getStateAsync'](_0x3f6978(0x81));if(_0x7a7506&&_0x7a7506['val'])_0x2f1e1b=JSON[_0x3f6978(0x135)](_0x7a7506[_0x3f6978(0x7c)]);}catch(_0x1c3dab){}let _0x1d6a4a=null;try{const _0x3ea151=await this[_0x3f6978(0xc9)](_0x3f6978(0x1dd));if(_0x3ea151)_0x1d6a4a=_0x3ea151[_0x3f6978(0x7c)];}catch(_0x189074){}if(_0x1d6a4a===undefined||_0x1d6a4a===null){const _0x48504f=_0x545e0b[_0x3f6978(0x98)]((_0xf6cb1e,_0x207181)=>_0xf6cb1e+_0x207181,0x0),_0x6c94db=Math[_0x3f6978(0x1c2)](0x2,Math['max'](-0x2,(0x64-_0x48504f)/0x32));_0x1d6a4a=_0x6c94db;}let _0x3a83a8=![],_0x29b351='',_0x51772e='',_0x55ae7f='';try{const _0x214bb1=await this[_0x3f6978(0xc9)](_0x3f6978(0x16d));if(_0x214bb1&&_0x214bb1[_0x3f6978(0x7c)]){_0x3a83a8=!![];const _0x3745d4=await this[_0x3f6978(0xc9)]('analysis.automation.description');_0x29b351=_0x3745d4?_0x3745d4[_0x3f6978(0x7c)]:'';const _0x2445de=await this[_0x3f6978(0xc9)](_0x3f6978(0x123));_0x51772e=_0x2445de?_0x2445de[_0x3f6978(0x7c)]:'';const _0x4aa97b=await this[_0x3f6978(0xc9)](_0x3f6978(0x1cc));_0x55ae7f=_0x4aa97b?_0x4aa97b[_0x3f6978(0x7c)]:'';}}catch(_0x41ff54){}const _0x11de18=await this[_0x3f6978(0xc0)](),_0x41a70d=(this[_0x3f6978(0x17e)][_0x3f6978(0x8d)]||[])[_0x3f6978(0x1c4)](_0x19a247=>_0x19a247[_0x3f6978(0x14d)]),_0x39320e=_0x11de18&&_0x41a70d;let _0x4e1d08='';try{const _0x1c575b=await this['getStateAsync'](_0x3f6978(0xae));if(_0x1c575b&&_0x1c575b[_0x3f6978(0x7c)])_0x4e1d08=_0x1c575b['val'];}catch(_0x158127){}this[_0x3f6978(0xc5)](_0x422f38[_0x3f6978(0x1c3)],_0x422f38[_0x3f6978(0x120)],{'success':!![],'eventHistory':this[_0x3f6978(0x1cf)]['slice'](0x0,0x7d0),'stats':{'digestCount':_0x22dbdb,'isPresent':this[_0x3f6978(0x94)],'hourlyActivity':_0x545e0b,'hourlyDetails':_0x5bb2e2,'yesterdayActivity':_0x42be34,'solarActive':_0x39320e,'presenceWho':_0x4e1d08,'roomStats':_0x2f1e1b,'activityTrend':_0x1d6a4a,'modules':this[_0x3f6978(0x188)]},'automation':{'detected':_0x3a83a8,'description':_0x29b351,'targetId':_0x51772e,'targetValue':_0x55ae7f}},_0x422f38[_0x3f6978(0x18e)]);}else{if(_0x422f38[_0x3f6978(0x120)]==='checkThermostats')try{const _0x21c72e=await automation[_0x3f6978(0x13a)](this);this[_0x3f6978(0xc5)](_0x422f38['from'],_0x422f38[_0x3f6978(0x120)],{'success':!![],'results':_0x21c72e},_0x422f38[_0x3f6978(0x18e)]);}catch(_0xbeb38c){this[_0x3f6978(0xc5)](_0x422f38[_0x3f6978(0x1c3)],_0x422f38[_0x3f6978(0x120)],{'success':![],'error':_0xbeb38c['message']},_0x422f38[_0x3f6978(0x18e)]);}else{if(_0x422f38[_0x3f6978(0x120)]===_0x3f6978(0x18b))try{const _0x162bcc=await scanner[_0x3f6978(0x192)](this,_0x422f38[_0x3f6978(0xee)]||{});this[_0x3f6978(0xc5)](_0x422f38[_0x3f6978(0x1c3)],_0x422f38[_0x3f6978(0x120)],{'success':!![],'devices':_0x162bcc},_0x422f38['callback']);}catch(_0x158ae3){}else{if(_0x422f38[_0x3f6978(0x120)]==='getEnums'){const _0x2904db=await this[_0x3f6978(0xc6)]('enum.functions.*','enum'),_0x54596b=[];if(_0x2904db)for(const _0xd57987 in _0x2904db){let _0x3998e7=_0x2904db[_0xd57987][_0x3f6978(0x1d3)]['name'];if(_0x3998e7&&typeof _0x3998e7===_0x3f6978(0x1d0))_0x3998e7=_0x3998e7['de']||_0x3998e7['en']||Object[_0x3f6978(0x165)](_0x3998e7)[0x0]||JSON['stringify'](_0x3998e7);_0x54596b[_0x3f6978(0x18d)]({'id':_0xd57987,'name':String(_0x3998e7||_0xd57987)});}const _0x2c59cf=await this[_0x3f6978(0xc6)](_0x3f6978(0xcc),_0x3f6978(0x107)),_0x3cb996=[];if(_0x2c59cf)for(const _0x2fd45b in _0x2c59cf){let _0x367c03=_0x2c59cf[_0x2fd45b][_0x3f6978(0x1d3)][_0x3f6978(0x83)];if(_0x367c03&&typeof _0x367c03===_0x3f6978(0x1d0))_0x367c03=_0x367c03['de']||_0x367c03['en']||Object[_0x3f6978(0x165)](_0x367c03)[0x0]||JSON[_0x3f6978(0xd7)](_0x367c03);_0x3cb996[_0x3f6978(0x18d)](String(_0x367c03||_0x2fd45b['split']('.')['pop']()));}this[_0x3f6978(0xc5)](_0x422f38[_0x3f6978(0x1c3)],_0x422f38[_0x3f6978(0x120)],{'success':!![],'enums':_0x54596b,'rooms':_0x3cb996},_0x422f38[_0x3f6978(0x18e)]);}else{if(_0x422f38[_0x3f6978(0x120)]===_0x3f6978(0x10a))try{const _0x3a3627=await this[_0x3f6978(0x104)](_0x3f6978(0x151),'instance',{'startkey':_0x3f6978(0x1ae),'endkey':'system.adapter.ical.È¶ô'}),_0x30310f=new Set();if(_0x3a3627&&_0x3a3627[_0x3f6978(0x158)])for(const _0x3b0d58 of _0x3a3627[_0x3f6978(0x158)]){const _0x287cd2=_0x3b0d58['id'][_0x3f6978(0xa0)](_0x3f6978(0x130),''),_0x5f2530=await this['getForeignStateAsync'](_0x287cd2+_0x3f6978(0xe2));let _0x20e767=![];if(_0x5f2530&&_0x5f2530[_0x3f6978(0x7c)]){const _0x45557c=typeof _0x5f2530['val']===_0x3f6978(0x1a4)?JSON[_0x3f6978(0x135)](_0x5f2530[_0x3f6978(0x7c)]):_0x5f2530[_0x3f6978(0x7c)];Array[_0x3f6978(0x1cb)](_0x45557c)&&_0x45557c['forEach'](_0x1643c7=>{const _0x28646f=_0x3f6978;_0x1643c7[_0x28646f(0xb8)]&&(_0x30310f[_0x28646f(0x1c1)](_0x1643c7['calendarName']),_0x20e767=!![]);});}!_0x20e767&&_0x30310f[_0x3f6978(0x1c1)](_0x287cd2);}const _0x12554a=Array[_0x3f6978(0x1c3)](_0x30310f);if(_0x12554a['length']===0x0)_0x12554a[_0x3f6978(0x18d)](_0x3f6978(0x6f));this[_0x3f6978(0xc5)](_0x422f38[_0x3f6978(0x1c3)],_0x422f38[_0x3f6978(0x120)],{'success':!![],'names':_0x12554a},_0x422f38['callback']);}catch(_0x5e76f6){this[_0x3f6978(0xc5)](_0x422f38[_0x3f6978(0x1c3)],_0x422f38[_0x3f6978(0x120)],{'success':![],'error':_0x3f6978(0x7a)+_0x5e76f6[_0x3f6978(0xee)]},_0x422f38[_0x3f6978(0x18e)]);}else{if(_0x422f38[_0x3f6978(0x120)]===_0x3f6978(0x72))try{await automation[_0x3f6978(0x15b)](this),this[_0x3f6978(0xc5)](_0x422f38[_0x3f6978(0x1c3)],_0x422f38[_0x3f6978(0x120)],{'success':!![]},_0x422f38[_0x3f6978(0x18e)]);}catch(_0x3e21a2){this[_0x3f6978(0x16b)][_0x3f6978(0x160)](_0x3f6978(0x10b)+_0x3e21a2[_0x3f6978(0xee)]),this[_0x3f6978(0xc5)](_0x422f38[_0x3f6978(0x1c3)],_0x422f38['command'],{'success':![],'error':_0x3e21a2[_0x3f6978(0xee)]},_0x422f38[_0x3f6978(0x18e)]);}else{if(_0x422f38[_0x3f6978(0x120)]===_0x3f6978(0x1bf))try{const _0x851e04=_0x422f38[_0x3f6978(0xee)][_0x3f6978(0xa4)];if(!_0x851e04||!Array[_0x3f6978(0x1cb)](_0x851e04))throw new Error(_0x3f6978(0xcd));const _0x2080a5=await this[_0x3f6978(0xc9)]('analysis.topology.structure');if(_0x2080a5&&_0x2080a5[_0x3f6978(0x7c)]){const _0x5a8af0=JSON[_0x3f6978(0x135)](_0x2080a5[_0x3f6978(0x7c)]);_0x5a8af0[_0x3f6978(0xa4)]=_0x851e04,_0x5a8af0[_0x3f6978(0x7e)]=Date['now'](),await this['setStateAsync'](_0x3f6978(0x117),{'val':JSON[_0x3f6978(0xd7)](_0x5a8af0),'ack':!![]}),this[_0x3f6978(0x16b)][_0x3f6978(0x1bd)]('üï∏Ô∏è\x20Topology\x20Matrix\x20manually\x20updated\x20by\x20user.'),this['sendTo'](_0x422f38['from'],_0x422f38[_0x3f6978(0x120)],{'success':!![]},_0x422f38[_0x3f6978(0x18e)]);}else throw new Error(_0x3f6978(0x89));}catch(_0x57921e){this[_0x3f6978(0x16b)]['warn'](_0x3f6978(0x1d9)+_0x57921e[_0x3f6978(0xee)]),this[_0x3f6978(0xc5)](_0x422f38['from'],_0x422f38[_0x3f6978(0x120)],{'success':![],'error':_0x57921e[_0x3f6978(0xee)]},_0x422f38[_0x3f6978(0x18e)]);}else{if(_0x422f38[_0x3f6978(0x120)]===_0x3f6978(0xd2))try{const _0x1bbf8a=_0x422f38[_0x3f6978(0xee)][_0x3f6978(0x120)],_0xe11c04=_0x422f38[_0x3f6978(0xee)];this[_0x3f6978(0x16b)][_0x3f6978(0x1bd)]('[PythonBridge]\x20Forwarding\x20command:\x20'+_0x1bbf8a),pythonBridge[_0x3f6978(0xad)](this,_0x1bbf8a,_0xe11c04,_0x30b283=>{const _0x655293=_0x3f6978;this['sendTo'](_0x422f38[_0x655293(0x1c3)],_0x422f38[_0x655293(0x120)],_0x30b283,_0x422f38[_0x655293(0x18e)]);});}catch(_0x222aaf){this[_0x3f6978(0x16b)][_0x3f6978(0x160)]('pythonBridge\x20command\x20failed:\x20'+_0x222aaf['message']),this[_0x3f6978(0xc5)](_0x422f38['from'],_0x422f38['command'],{'type':_0x3f6978(0x9f),'payload':_0x222aaf[_0x3f6978(0xee)]},_0x422f38[_0x3f6978(0x18e)]);}else{if(_0x422f38[_0x3f6978(0x120)]==='testApiKey')try{const _0x27cc24=_0x422f38[_0x3f6978(0xee)]?_0x422f38[_0x3f6978(0xee)][_0x3f6978(0x129)]:'';if(!_0x27cc24)throw new Error(_0x3f6978(0x110));const _0x1cec12=new GoogleGenerativeAI(_0x27cc24),_0x116319=_0x1cec12[_0x3f6978(0x161)]({'model':GEMINI_MODEL}),_0x37d50f=await _0x116319['generateContent'](_0x3f6978(0x172)),_0x386838=await _0x37d50f[_0x3f6978(0x189)],_0x47a4d8=_0x386838[_0x3f6978(0xa8)]();this['sendTo'](_0x422f38[_0x3f6978(0x1c3)],_0x422f38[_0x3f6978(0x120)],{'success':!![],'message':_0x3f6978(0xb9)+_0x47a4d8[_0x3f6978(0x116)](0x0,0x14)+_0x3f6978(0xfd)},_0x422f38[_0x3f6978(0x18e)]);}catch(_0x2ed5a7){this[_0x3f6978(0xc5)](_0x422f38[_0x3f6978(0x1c3)],_0x422f38[_0x3f6978(0x120)],{'success':![],'message':_0x2ed5a7[_0x3f6978(0xee)]},_0x422f38[_0x3f6978(0x18e)]);}else{if(_0x422f38[_0x3f6978(0x120)]===_0x3f6978(0xa3))try{const _0xc0d87=await this[_0x3f6978(0xc0)](),_0x24651e=await this[_0x3f6978(0x104)](_0x3f6978(0x151),_0x3f6978(0x1ce),{'startkey':'system.adapter.ical.','endkey':_0x3f6978(0x185)}),_0x520d7d=_0x24651e&&_0x24651e['rows']?_0x24651e[_0x3f6978(0x158)]['length']:0x0;this[_0x3f6978(0xc5)](_0x422f38[_0x3f6978(0x1c3)],_0x422f38[_0x3f6978(0x120)],{'success':!![],'weather':_0x3f6978(0x133)+_0xc0d87+_0x3f6978(0x175)+(this[_0x3f6978(0xf5)][this[_0x3f6978(0x17e)]['outdoorSensorId']]||'?')+'¬∞C','calendar':_0x520d7d+_0x3f6978(0x101)},_0x422f38[_0x3f6978(0x18e)]);}catch(_0x315204){this[_0x3f6978(0xc5)](_0x422f38[_0x3f6978(0x1c3)],_0x422f38[_0x3f6978(0x120)],{'success':![]},_0x422f38[_0x3f6978(0x18e)]);}}}}}}}}}}}}}[a0_0x4c9066(0x146)](){const _0x50bec4=a0_0x4c9066;if(!this[_0x50bec4(0x188)][_0x50bec4(0x140)])return;this[_0x50bec4(0x16b)][_0x50bec4(0x1bd)]('üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...');try{const _0x27f936=this['rawEventLog']||[];pythonBridge[_0x50bec4(0xad)](this,_0x50bec4(0x7b),{'events':_0x27f936});}catch(_0x8cb969){this['log']['warn'](_0x50bec4(0x77));}}async[a0_0x4c9066(0x9d)](_0x1a4ef0,_0x202707){const _0x49e4ee=a0_0x4c9066;if(!_0x202707||this['dependencyInstallInProgress'])return;if(_0x1a4ef0['includes'](_0x49e4ee(0x167))&&_0x1a4ef0['endsWith'](_0x49e4ee(0x106))&&_0x202707[_0x49e4ee(0x7c)])return;if(this[_0x49e4ee(0x17e)]['infrasoundEnabled']&&_0x1a4ef0===this['config'][_0x49e4ee(0x1c5)]&&this[_0x49e4ee(0x188)][_0x49e4ee(0xa6)]){this[_0x49e4ee(0x142)](_0x202707['val']);return;}if(_0x202707[_0x49e4ee(0xb1)]&&_0x1a4ef0[_0x49e4ee(0xf0)](_0x49e4ee(0x1bb)))return;if(_0x1a4ef0===this[_0x49e4ee(0x190)]+'.system.mode'){if(_0x202707[_0x49e4ee(0x7c)]&&Object[_0x49e4ee(0x165)](setup[_0x49e4ee(0x1da)])[_0x49e4ee(0x1ab)](_0x202707['val'])){this[_0x49e4ee(0xb2)]=_0x202707[_0x49e4ee(0x7c)];if(_0x202707[_0x49e4ee(0x7c)]===setup[_0x49e4ee(0x1da)][_0x49e4ee(0x137)])await recorder[_0x49e4ee(0x19e)](this,![]);else await recorder[_0x49e4ee(0x19e)](this,!![]);if(this[_0x49e4ee(0x177)]){let _0x40b1ac=![],_0x5d87c4=0x0,_0x4fc1c9=_0x49e4ee(0x1b4);if(this[_0x49e4ee(0xb2)]==='party')_0x40b1ac=!![],_0x5d87c4=0x168,_0x4fc1c9='Party\x20Mode';else this[_0x49e4ee(0xb2)]===_0x49e4ee(0x150)&&(_0x40b1ac=!![],_0x5d87c4=0x5a0,_0x4fc1c9=_0x49e4ee(0x127));pythonBridge['send'](this,'SET_LEARNING_MODE',{'active':_0x40b1ac,'duration':_0x5d87c4,'label':_0x4fc1c9}),await this[_0x49e4ee(0x149)]('analysis.security.learningStatus',{'val':JSON['stringify']({'active':_0x40b1ac,'label':_0x4fc1c9,'timestamp':Date[_0x49e4ee(0x1b6)]()}),'ack':!![]});}}if(!_0x202707[_0x49e4ee(0xb1)])this[_0x49e4ee(0x155)](_0x1a4ef0,{'val':this[_0x49e4ee(0xb2)],'ack':!![]});return;}if(_0x1a4ef0[_0x49e4ee(0xf0)](_0x49e4ee(0x176))&&_0x202707[_0x49e4ee(0xb1)])this['protectAiMemory'](_0x202707['val']);if(_0x1a4ef0[_0x49e4ee(0xf0)]('analysis.energy.warmupTimes')&&_0x202707['ack']&&this[_0x49e4ee(0x188)][_0x49e4ee(0x7f)])automation[_0x49e4ee(0x79)](this);if(!_0x202707[_0x49e4ee(0xb1)]){if(_0x1a4ef0[_0x49e4ee(0x1ab)](_0x49e4ee(0x1b5))&&_0x202707['val']){this[_0x49e4ee(0x155)](_0x1a4ef0,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this);return;}if(_0x1a4ef0[_0x49e4ee(0x1ab)]('triggerDailyDigest')&&_0x202707[_0x49e4ee(0x7c)]){this[_0x49e4ee(0x155)](_0x1a4ef0,{'val':![],'ack':!![]});if(this[_0x49e4ee(0x177)])aiAgent['createDailyDigest'](this,pythonBridge);return;}if(_0x1a4ef0[_0x49e4ee(0x1ab)](_0x49e4ee(0x8a))&&_0x202707[_0x49e4ee(0x7c)]){this[_0x49e4ee(0x155)](_0x1a4ef0,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this);return;}if(_0x1a4ef0['includes'](_0x49e4ee(0xe7))&&_0x202707[_0x49e4ee(0x7c)]){this['setState'](_0x1a4ef0,{'val':![],'ack':!![]}),aiAgent[_0x49e4ee(0x87)](this);return;}if(_0x1a4ef0[_0x49e4ee(0x1ab)](_0x49e4ee(0x78))&&_0x202707[_0x49e4ee(0x7c)]){this[_0x49e4ee(0x155)](_0x1a4ef0,{'val':![],'ack':!![]});if(this[_0x49e4ee(0x177)])try{const _0x131a1e=await this[_0x49e4ee(0xc9)](_0x49e4ee(0x1b7));if(_0x131a1e&&_0x131a1e['val']){const _0x131508=JSON[_0x49e4ee(0x135)](_0x131a1e[_0x49e4ee(0x7c)]);this['setStateAsync'](_0x49e4ee(0x13e),{'val':_0x49e4ee(0x6e),'ack':!![]}),pythonBridge[_0x49e4ee(0xad)](this,_0x49e4ee(0x8b),{'sequences':_0x131508});}}catch(_0x29c7c4){}return;}if(_0x1a4ef0['includes'](_0x49e4ee(0x186))&&_0x202707[_0x49e4ee(0x7c)]){this[_0x49e4ee(0x155)](_0x1a4ef0,{'val':![],'ack':!![]});try{aiAgent[_0x49e4ee(0x1a2)](this,_0x49e4ee(0xa7)),setTimeout(()=>aiAgent[_0x49e4ee(0x1a2)](this,_0x49e4ee(0x154)),0x2ee0);if(this[_0x49e4ee(0x177)]){this[_0x49e4ee(0x146)]();const _0x3629de=await this[_0x49e4ee(0xc9)](_0x49e4ee(0x12a));if(_0x3629de&&_0x3629de[_0x49e4ee(0x7c)])pythonBridge[_0x49e4ee(0xad)](this,_0x49e4ee(0x6c),{'digests':JSON[_0x49e4ee(0x135)](_0x3629de[_0x49e4ee(0x7c)])});}}catch(_0x2616bb){this[_0x49e4ee(0x16b)][_0x49e4ee(0x160)](_0x49e4ee(0x91)+_0x2616bb[_0x49e4ee(0xee)]);}return;}if(_0x1a4ef0['includes'](_0x49e4ee(0xff))&&_0x202707[_0x49e4ee(0x7c)]){this[_0x49e4ee(0x155)](_0x1a4ef0,{'val':![],'ack':!![]}),await this[_0x49e4ee(0x10f)]();return;}if(_0x1a4ef0[_0x49e4ee(0x1ab)](_0x49e4ee(0x19b))&&_0x202707[_0x49e4ee(0x7c)]){this[_0x49e4ee(0x155)](_0x1a4ef0,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x22a1ca=await this[_0x49e4ee(0xc9)]('LTM.rawEventLog');if(_0x22a1ca&&_0x22a1ca[_0x49e4ee(0x7c)]){const _0x36e1a3={};if(this[_0x49e4ee(0x17e)]['devices'])this['config'][_0x49e4ee(0x8d)][_0x49e4ee(0xd3)](_0xbe7bd0=>{const _0x44c751=_0x49e4ee;if(_0xbe7bd0['id']&&_0xbe7bd0['type'])_0x36e1a3[_0xbe7bd0['id']]=_0xbe7bd0[_0x44c751(0x71)];});pythonBridge['send'](this,'TRAIN_COMFORT',{'events':JSON[_0x49e4ee(0x135)](_0x22a1ca[_0x49e4ee(0x7c)]),'deviceMap':_0x36e1a3});}}catch(_0x6e27bc){}return;}if(_0x1a4ef0[_0x49e4ee(0x1ab)](_0x49e4ee(0xea))&&_0x202707['val']){this[_0x49e4ee(0x155)](_0x1a4ef0,{'val':![],'ack':!![]}),topology['updateTopology'](this);if(this[_0x49e4ee(0x177)])try{const _0x1173a9=await this[_0x49e4ee(0xc9)](_0x49e4ee(0x1b7));if(_0x1173a9&&_0x1173a9[_0x49e4ee(0x7c)])pythonBridge[_0x49e4ee(0xad)](this,_0x49e4ee(0xd4),{'sequences':JSON[_0x49e4ee(0x135)](_0x1173a9[_0x49e4ee(0x7c)])});}catch(_0xd73d11){}return;}}const _0x2adf9d=(this[_0x49e4ee(0x17e)][_0x49e4ee(0x8d)]||[])['find'](_0x3ffa48=>_0x3ffa48['id']===_0x1a4ef0);if(_0x2adf9d){const _0x120215=await recorder[_0x49e4ee(0xdf)](this,_0x1a4ef0,_0x202707,_0x2adf9d);_0x120215&&this[_0x49e4ee(0x155)](_0x49e4ee(0xda),{'val':Date[_0x49e4ee(0x1b6)](),'ack':!![]});_0x120215&&_0x120215[_0x49e4ee(0x71)]==='motion'&&_0x120215[_0x49e4ee(0x96)]&&this['isProVersion']&&deadMan[_0x49e4ee(0xc3)](this,_0x120215[_0x49e4ee(0x96)]);_0x202707['val']&&(_0x202707[_0x49e4ee(0x7c)]===!![]||_0x202707[_0x49e4ee(0x7c)]===0x1||String(_0x202707[_0x49e4ee(0x7c)])['toLowerCase']()===_0x49e4ee(0x11c))&&(_0x2adf9d[_0x49e4ee(0x71)]&&(_0x2adf9d[_0x49e4ee(0x71)][_0x49e4ee(0x1ab)]('window')||_0x2adf9d['type'][_0x49e4ee(0x1ab)](_0x49e4ee(0x10e)))&&this[_0x49e4ee(0x1d5)](_0x2adf9d));if(_0x2adf9d[_0x49e4ee(0x71)]===_0x49e4ee(0x112)||_0x2adf9d[_0x49e4ee(0x71)]===_0x49e4ee(0x152)){if(this[_0x49e4ee(0x188)][_0x49e4ee(0x7f)])automation[_0x49e4ee(0x1c9)](this);}}}async['protectAiMemory'](_0x2371e8){const _0x49cac5=a0_0x4c9066;if(!this[_0x49cac5(0x164)]||Date[_0x49cac5(0x1b6)]()-this[_0x49cac5(0x134)]>0x493e0)return;try{const _0x588911=JSON['parse'](_0x2371e8),_0x32e06f=this[_0x49cac5(0x164)][_0x49cac5(0x1a5)];let _0x1d8bac=![];for(const _0x2c1e29 in _0x32e06f){if(_0x32e06f[_0x2c1e29][_0x49cac5(0x1ab)]('AI')&&_0x588911[_0x2c1e29]&&!_0x588911[_0x2c1e29][_0x49cac5(0x1ab)]('AI')){_0x1d8bac=!![];break;}}_0x1d8bac&&(await this[_0x49cac5(0x149)]('analysis.energy.warmupTimes',{'val':JSON[_0x49cac5(0xd7)](this['memoryCache'][_0x49cac5(0x131)]),'ack':!![]}),await this[_0x49cac5(0x149)](_0x49cac5(0x176),{'val':JSON['stringify'](this[_0x49cac5(0x164)][_0x49cac5(0x1a5)]),'ack':!![]}));}catch(_0x57fb9e){}}async[a0_0x4c9066(0x199)](){const _0x5840eb=a0_0x4c9066;try{const _0x1ab317=await this[_0x5840eb(0xc9)](setup[_0x5840eb(0x136)]);if(_0x1ab317&&_0x1ab317[_0x5840eb(0x7c)])this[_0x5840eb(0xb2)]=_0x1ab317[_0x5840eb(0x7c)];}catch(_0x171eac){this[_0x5840eb(0xb2)]=setup[_0x5840eb(0x1da)][_0x5840eb(0x173)];}}async[a0_0x4c9066(0x105)](){const _0x34cdc7=a0_0x4c9066,_0x1b9487=this['config'][_0x34cdc7(0x90)]||[];if(_0x1b9487[_0x34cdc7(0xd1)]===0x0)return![];const _0x57c618=[],_0x18478d=Date[_0x34cdc7(0x1b6)](),_0x5c1d94=0x5*0x3c*0x3e8;for(const _0x14a6a1 of _0x1b9487){try{let _0x1233fc=![];try{const _0x605645=await this[_0x34cdc7(0x12e)](_0x14a6a1+_0x34cdc7(0x12b));if(_0x605645&&_0x605645[_0x34cdc7(0x7c)]===!![])_0x1233fc=!![];}catch(_0x40af30){}if(!_0x1233fc)try{const _0x441a7f=await this[_0x34cdc7(0x12e)](_0x14a6a1+'.last_seen');if(_0x441a7f&&_0x441a7f['ts']){const _0x540c1b=_0x18478d-_0x441a7f['ts'];if(_0x540c1b<_0x5c1d94)_0x1233fc=!![];}}catch(_0x15a1e8){}if(!_0x1233fc)try{const _0x46ccc4=await this[_0x34cdc7(0x12e)](_0x14a6a1+_0x34cdc7(0x18a));if(_0x46ccc4&&typeof _0x46ccc4[_0x34cdc7(0x7c)]===_0x34cdc7(0xec)&&_0x46ccc4[_0x34cdc7(0x7c)]>0x0)_0x1233fc=!![];}catch(_0x219f40){}if(!_0x1233fc)try{const _0x349b8e=await this[_0x34cdc7(0x12e)](_0x14a6a1);if(_0x349b8e){const _0x2a204=_0x18478d-(_0x349b8e['ts']||0x0);_0x2a204<_0x5c1d94&&(_0x349b8e[_0x34cdc7(0x7c)]===!![]||_0x349b8e['val']===_0x34cdc7(0x1b2)||_0x349b8e['val']===0x1)&&(_0x1233fc=!![]);}}catch(_0x415215){}if(_0x1233fc){const _0x10c0b5=_0x14a6a1['split']('.'),_0x59d435=_0x10c0b5[_0x10c0b5[_0x34cdc7(0xd1)]-0x1]||_0x14a6a1;_0x57c618[_0x34cdc7(0x18d)](_0x59d435);}}catch(_0x1b5c1d){this[_0x34cdc7(0x16b)][_0x34cdc7(0x160)](_0x34cdc7(0xc8)+_0x14a6a1+':\x20'+_0x1b5c1d[_0x34cdc7(0xee)]);}}const _0x223274=_0x57c618['length']>0x0?_0x57c618['join'](',\x20'):_0x34cdc7(0x14e);return await this['setStateAsync'](_0x34cdc7(0xae),{'val':_0x223274,'ack':!![]}),_0x57c618[_0x34cdc7(0xd1)]>0x0;}async[a0_0x4c9066(0x174)](){const _0x3b7e2f=a0_0x4c9066;await aiAgent[_0x3b7e2f(0x17f)](this);this[_0x3b7e2f(0x188)][_0x3b7e2f(0x140)]&&(this[_0x3b7e2f(0xaa)](),this['triggerGaitAnalysis']());if(this[_0x3b7e2f(0x188)]['energy'])this['triggerEnergyPrediction']();}async['checkSolarCondition'](){const _0x165032=a0_0x4c9066,_0x229b7a=['weatherunderground.0',_0x165032(0x10c),_0x165032(0xa2)],_0x5160fe=[_0x165032(0x8e),_0x165032(0xf6),_0x165032(0xbd)];for(const _0x56dc86 of _0x229b7a){for(const _0x59c9bc of _0x5160fe){try{const _0x40a14e=_0x56dc86+'.'+_0x59c9bc,_0x4c1aab=await this['getForeignStateAsync'](_0x40a14e);if(_0x4c1aab&&_0x4c1aab[_0x165032(0x7c)]){const _0x3cc2ee=String(_0x4c1aab['val'])[_0x165032(0x1ad)]();if(_0x3cc2ee[_0x165032(0x1ab)](_0x165032(0x132))||_0x3cc2ee[_0x165032(0x1ab)]('heiter')||_0x3cc2ee['includes'](_0x165032(0xb4))||_0x3cc2ee[_0x165032(0x1ab)]('sonn')||_0x3cc2ee[_0x165032(0x1ab)](_0x165032(0x93)))return this[_0x165032(0x16b)][_0x165032(0x1bd)](_0x165032(0x6d)+_0x40a14e),!![];}}catch(_0x4bbfef){}}}return![];}['triggerGaitAnalysis'](){const _0xa9426d=a0_0x4c9066;if(!this['isProVersion'])return;try{this['getStateAsync'](_0xa9426d(0x1b7),(_0x2107f5,_0x5fcac)=>{const _0x3089e2=_0xa9426d;if(_0x2107f5||!_0x5fcac||!_0x5fcac[_0x3089e2(0x7c)])return;try{const _0x37e614=JSON['parse'](_0x5fcac[_0x3089e2(0x7c)]);if(!_0x37e614||_0x37e614[_0x3089e2(0xd1)]===0x0)return;pythonBridge['send'](this,_0x3089e2(0x113),{'sequences':_0x37e614}),this[_0x3089e2(0x16b)][_0x3089e2(0x1bd)](_0x3089e2(0x103)+_0x37e614['length']+_0x3089e2(0x70));}catch(_0x2fe623){this[_0x3089e2(0x16b)][_0x3089e2(0x160)](_0x3089e2(0x1b1)+_0x2fe623[_0x3089e2(0xee)]);}});}catch(_0x252751){this[_0xa9426d(0x16b)]['warn'](_0xa9426d(0xb0)+_0x252751[_0xa9426d(0xee)]);}}async[a0_0x4c9066(0x10f)](){const _0xcc0bd8=a0_0x4c9066;if(!this[_0xcc0bd8(0x177)]||!this[_0xcc0bd8(0x188)]['energy'])return;try{const _0x2d35d5={},_0x14110f={},_0x1c7af4=this[_0xcc0bd8(0x17e)]['devices']||[];for(const _0x185a3c of _0x1c7af4){if((_0x185a3c[_0xcc0bd8(0x71)]===_0xcc0bd8(0x112)||_0x185a3c['type']===_0xcc0bd8(0x152))&&_0x185a3c['location'])try{const _0x58eba4=await this[_0xcc0bd8(0x12e)](_0x185a3c['id']);_0x58eba4&&typeof _0x58eba4[_0xcc0bd8(0x7c)]===_0xcc0bd8(0xec)&&(_0x2d35d5[_0x185a3c[_0xcc0bd8(0x96)]]=_0x58eba4[_0xcc0bd8(0x7c)],_0x14110f[_0x185a3c[_0xcc0bd8(0x96)]]=_0x185a3c[_0xcc0bd8(0x14d)]||![]);}catch(_0x36ef34){}}let _0xce8618=0xa;if(this[_0xcc0bd8(0x17e)]['weatherTempId'])try{const _0x1404f2=await this[_0xcc0bd8(0x12e)](this[_0xcc0bd8(0x17e)][_0xcc0bd8(0x1cd)]);if(_0x1404f2&&typeof _0x1404f2[_0xcc0bd8(0x7c)]==='number')_0xce8618=_0x1404f2[_0xcc0bd8(0x7c)];}catch(_0x23da9c){}const _0x1d74ee=await this[_0xcc0bd8(0xc0)]();let _0x242cb4={};try{const _0x102966=await this[_0xcc0bd8(0xc9)]('analysis.energy.warmupTargets');if(_0x102966&&_0x102966[_0xcc0bd8(0x7c)])_0x242cb4=JSON['parse'](_0x102966['val']);}catch(_0x4efd50){}pythonBridge[_0xcc0bd8(0xad)](this,_0xcc0bd8(0x153),{'current_temps':_0x2d35d5,'t_out':_0xce8618,'is_sunny':_0x1d74ee,'solar_flags':_0x14110f,'warmup_targets':_0x242cb4}),this['log'][_0xcc0bd8(0x8f)](_0xcc0bd8(0x162)+Object[_0xcc0bd8(0x11e)](_0x2d35d5)['length']+_0xcc0bd8(0x148));}catch(_0x16828){this[_0xcc0bd8(0x16b)][_0xcc0bd8(0x160)](_0xcc0bd8(0x17d)+_0x16828[_0xcc0bd8(0xee)]);}}[a0_0x4c9066(0xaa)](){const _0x166109=a0_0x4c9066;if(!this[_0x166109(0x1af)]||this['rawEventLog'][_0x166109(0xd1)]===0x0)return;const _0x51f687=new Array(0x30)[_0x166109(0x138)](0x0),_0x5c0ee3=Array[_0x166109(0x1c3)]({'length':0x30},()=>[]),_0x51a38b=new Date()[_0x166109(0x179)](0x0,0x0,0x0,0x0);this['rawEventLog'][_0x166109(0xd3)](_0x2574ee=>{const _0x208757=_0x166109,_0x4257e0=new Date(_0x2574ee['timestamp']);if(_0x4257e0['getTime']()>=_0x51a38b){const _0x1d2b3e=_0x4257e0[_0x208757(0x1c7)](),_0x3b0f95=_0x4257e0[_0x208757(0xf1)](),_0x30c330=_0x1d2b3e*0x2+Math['floor'](_0x3b0f95/0x1e);_0x30c330>=0x0&&_0x30c330<0x30&&(_0x51f687[_0x30c330]++,_0x5c0ee3[_0x30c330][_0x208757(0x18d)]({'time':_0x4257e0[_0x208757(0xd0)]('de-DE',{'hour':_0x208757(0x19d),'minute':_0x208757(0x19d)}),'location':_0x2574ee[_0x208757(0x96)]||_0x208757(0x183),'type':_0x2574ee[_0x208757(0x71)]||_0x208757(0x15e)}));}}),this[_0x166109(0x149)](_0x166109(0x1ac),{'val':JSON[_0x166109(0xd7)](_0x51f687),'ack':!![]}),this[_0x166109(0x149)]('analysis.health.todayRoomDetails',{'val':JSON[_0x166109(0xd7)](_0x5c0ee3),'ack':!![]});}async['handleInfrasound'](_0x1e71ad){const _0x398534=a0_0x4c9066;if(!this[_0x398534(0x17e)]['infrasoundEnabled']||typeof _0x1e71ad!=='number')return;const _0x321e54=this[_0x398534(0x17e)][_0x398534(0x75)]||0.04;this[_0x398534(0x19c)][_0x398534(0x18d)]({'timestamp':Date[_0x398534(0x1b6)](),'value':_0x1e71ad}),this['pressureBuffer'][_0x398534(0xd1)]>0x64&&this['pressureBuffer']['shift'](),_0x1e71ad>_0x321e54&&!this['infrasoundLocked']&&(this['infrasoundLocked']=!![],this[_0x398534(0x16b)][_0x398534(0x160)](_0x398534(0x15c)+_0x1e71ad[_0x398534(0xc2)](0x4)+_0x398534(0x1aa)+_0x321e54+'\x20(Threshold)'),await this[_0x398534(0x143)](_0x1e71ad,_0x398534(0xc4)),setTimeout(()=>{const _0x5a151d=_0x398534;this[_0x5a151d(0x13d)]=![];},0x5*0x3c*0x3e8));}async[a0_0x4c9066(0x143)](_0x46ffe1,_0x32cadb){const _0x5df9c6=a0_0x4c9066;if(!this['isPresent']){const _0x3190cd=this['eventHistory']['slice'](0x0,0xa),_0x4b58e9=_0x3190cd[_0x5df9c6(0x84)](_0x40f276=>new Date(_0x40f276[_0x5df9c6(0x80)])[_0x5df9c6(0xd0)]('de-DE')+_0x5df9c6(0x1b0)+(_0x40f276['location']||_0x5df9c6(0xcb))+':\x20'+_0x40f276['name'])[_0x5df9c6(0x141)]('\x0a');this[_0x5df9c6(0x16b)]['warn']('üîä\x20FORENSIC:\x20Infraschall\x20bei\x20Abwesenheit!\x20Pressure:\x20'+_0x46ffe1[_0x5df9c6(0xc2)](0x4)+_0x5df9c6(0x1a9)+_0x4b58e9);if(this[_0x5df9c6(0x17e)]['infrasoundArmingId'])try{const _0x3ee7d7=await this['getForeignStateAsync'](this['config'][_0x5df9c6(0xe6)]);_0x3ee7d7&&_0x3ee7d7[_0x5df9c6(0x7c)]===!![]&&(await this[_0x5df9c6(0x149)](_0x5df9c6(0xde),{'val':JSON[_0x5df9c6(0xd7)]({'timestamp':Date['now'](),'pressure':_0x46ffe1[_0x5df9c6(0xc2)](0x4),'eventType':_0x32cadb,'recentEvents':_0x3190cd[_0x5df9c6(0x1d7)](0x0,0x3)}),'ack':!![]}),this['log'][_0x5df9c6(0x97)](_0x5df9c6(0x92)));}catch(_0x29f317){}}else this['log'][_0x5df9c6(0x1bd)](_0x5df9c6(0x182)+_0x46ffe1[_0x5df9c6(0xc2)](0x4)+_0x5df9c6(0x1c8));}async[a0_0x4c9066(0x1d5)](_0x34e8fa){const _0x5a447a=a0_0x4c9066;if(!_0x34e8fa||!_0x34e8fa[_0x5a447a(0x96)])return;try{const _0x47d064=(this['config'][_0x5a447a(0x8d)]||[])[_0x5a447a(0x178)](_0x4a3c3f=>_0x4a3c3f[_0x5a447a(0x96)]===_0x34e8fa[_0x5a447a(0x96)]&&(_0x4a3c3f['type']==='temperature'||_0x4a3c3f[_0x5a447a(0x71)]===_0x5a447a(0x152)));if(_0x47d064[_0x5a447a(0xd1)]===0x0)return;const _0x4c2670=await this[_0x5a447a(0x12e)](_0x47d064[0x0]['id']);if(!_0x4c2670||typeof _0x4c2670[_0x5a447a(0x7c)]!==_0x5a447a(0xec))return;const _0x1b2fa7=_0x4c2670[_0x5a447a(0x7c)];let _0xe53fec=null;if(this['config'][_0x5a447a(0x1cd)]){const _0x419568=await this[_0x5a447a(0x12e)](this['config']['weatherTempId']);_0x419568&&typeof _0x419568[_0x5a447a(0x7c)]===_0x5a447a(0xec)&&(_0xe53fec=_0x419568[_0x5a447a(0x7c)]);}if(_0xe53fec!==null){const _0x4a4664=Math[_0x5a447a(0xdb)](_0x1b2fa7-_0xe53fec);_0x4a4664>0x3&&(this[_0x5a447a(0x16b)][_0x5a447a(0x1bd)](_0x5a447a(0xaf)+_0x34e8fa[_0x5a447a(0x96)]+_0x5a447a(0xbf)+_0x4a4664[_0x5a447a(0xc2)](0x1)+_0x5a447a(0x17c)+_0x1b2fa7+_0x5a447a(0xcf)+_0xe53fec+_0x5a447a(0xe1)),await this[_0x5a447a(0x149)]('analysis.ventilation.lastWindow',{'val':JSON['stringify']({'room':_0x34e8fa[_0x5a447a(0x96)],'timestamp':Date[_0x5a447a(0x1b6)](),'tempDiff':_0x4a4664[_0x5a447a(0xc2)](0x1),'recommendation':_0x4a4664>0x5?_0x5a447a(0xa9):_0x5a447a(0x114)}),'ack':!![]}));}}catch(_0x453c1d){this[_0x5a447a(0x16b)][_0x5a447a(0x160)](_0x5a447a(0x181)+_0x453c1d[_0x5a447a(0xee)]);}}async['appendToLog'](_0x22df5f){const _0x59d5ad=a0_0x4c9066;if(!_0x22df5f||typeof _0x22df5f!==_0x59d5ad(0x1d0))return;const _0x3a9a63={'timestamp':_0x22df5f['timestamp']||Date[_0x59d5ad(0x1b6)](),'id':_0x22df5f['id']||Date[_0x59d5ad(0x1b6)]()[_0x59d5ad(0x187)](),'name':_0x22df5f[_0x59d5ad(0x83)]||_0x59d5ad(0x1dc),'type':_0x22df5f[_0x59d5ad(0x71)]||'custom','location':_0x22df5f['location']||_0x59d5ad(0xcb),'value':_0x22df5f[_0x59d5ad(0x156)]||null};this['eventHistory'][_0x59d5ad(0x1a6)](_0x3a9a63);if(this[_0x59d5ad(0x1cf)][_0x59d5ad(0xd1)]>0x1388)this[_0x59d5ad(0x1cf)][_0x59d5ad(0x197)]();await this[_0x59d5ad(0x149)](_0x59d5ad(0x1de),{'val':JSON['stringify'](this[_0x59d5ad(0x1cf)]),'ack':!![]}),this[_0x59d5ad(0x16b)][_0x59d5ad(0x1bd)](_0x59d5ad(0x18c)+_0x3a9a63[_0x59d5ad(0x83)]+'\x20('+_0x3a9a63[_0x59d5ad(0x96)]+')');}[a0_0x4c9066(0xe9)](_0x5dc5ac){}}if(require[a0_0x4c9066(0x193)]!==module)module[a0_0x4c9066(0x1ca)]=_0x588248=>new CogniLiving(_0x588248);else new CogniLiving();