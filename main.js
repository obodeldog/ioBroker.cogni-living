const a0_0x356808=a0_0x3a27;(function(_0x3350c6,_0x434869){const _0x279e3c=a0_0x3a27,_0x24be98=_0x3350c6();while(!![]){try{const _0x2d76f9=-parseInt(_0x279e3c(0x17f))/0x1+parseInt(_0x279e3c(0x14b))/0x2+parseInt(_0x279e3c(0x22c))/0x3+parseInt(_0x279e3c(0x1d5))/0x4*(parseInt(_0x279e3c(0x1f4))/0x5)+-parseInt(_0x279e3c(0xd1))/0x6+parseInt(_0x279e3c(0x171))/0x7*(-parseInt(_0x279e3c(0x17a))/0x8)+-parseInt(_0x279e3c(0x209))/0x9;if(_0x2d76f9===_0x434869)break;else _0x24be98['push'](_0x24be98['shift']());}catch(_0x44da19){_0x24be98['push'](_0x24be98['shift']());}}}(a0_0x2ba6,0x9b563));const a0_0x199f19=(function(){let _0x57e095=!![];return function(_0x59a185,_0x56f86d){const _0x1b4f6e=_0x57e095?function(){const _0x3299a6=a0_0x3a27;if(_0x56f86d){const _0x5bd8a0=_0x56f86d[_0x3299a6(0x1eb)](_0x59a185,arguments);return _0x56f86d=null,_0x5bd8a0;}}:function(){};return _0x57e095=![],_0x1b4f6e;};}()),a0_0x254303=a0_0x199f19(this,function(){const _0xb9717f=a0_0x3a27;return a0_0x254303['toString']()['search'](_0xb9717f(0x18e))[_0xb9717f(0x151)]()['constructor'](a0_0x254303)['search'](_0xb9717f(0x18e));});a0_0x254303();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x356808(0x216)),{spawn}=require(a0_0x356808(0x198)),path=require(a0_0x356808(0x11d)),fs=require('fs'),installer=require(a0_0x356808(0x1f9)),scanner=require(a0_0x356808(0x110)),schedulers=require(a0_0x356808(0xda)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x356808(0x1b0),SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x356808(0x106),LTM_DP_DAILY_DIGESTS=a0_0x356808(0x1a7),LTM_DP_STATUS=a0_0x356808(0x196),LTM_DP_TRIGGER_DIGEST=a0_0x356808(0x1a5),LTM_DP_BASELINE_STATUS=a0_0x356808(0xc7),LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS=a0_0x356808(0x201),LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE=a0_0x356808(0x150),SYSTEM_MODES={'NORMAL':a0_0x356808(0xe6),'VACATION':a0_0x356808(0xf9),'PARTY':a0_0x356808(0x220),'GUEST':a0_0x356808(0x21c)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x356808(0x18c)],SYSTEM_MODES[a0_0x356808(0x1a8)]],PERSONA_MAPPING={'generic':a0_0x356808(0xbc),'senior_aal':a0_0x356808(0x11b),'family':a0_0x356808(0x128),'single_comfort':a0_0x356808(0x14e),'security':a0_0x356808(0x1e9)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x2563ed){const _0x3779aa=a0_0x356808;try{const _0x1bdcb8=[_0x3779aa(0x214),'events.history_debug_00'];for(const _0x1c25e6 of _0x1bdcb8){try{const _0x524640=await _0x2563ed['getObjectAsync'](_0x1c25e6);if(_0x524640)await _0x2563ed[_0x3779aa(0x213)](_0x1c25e6);}catch(_0x2d7baa){}}}catch(_0x18cb26){}}async function checkLicense(_0x1f3786){return!![];}async function initHistory(_0x43bc0a){const _0x8e0649=a0_0x356808;try{const _0x2cd166=await _0x43bc0a['getStateAsync'](_0x8e0649(0xa5));_0x2cd166&&_0x2cd166[_0x8e0649(0x231)]&&(_0x43bc0a[_0x8e0649(0x20c)]=JSON[_0x8e0649(0xd2)](_0x2cd166[_0x8e0649(0x231)]['toString']()));}catch(_0x5ad83e){_0x43bc0a[_0x8e0649(0x20c)]=[];}try{const _0x82e882=await _0x43bc0a['getStateAsync'](_0x8e0649(0x1a2));if(_0x82e882&&_0x82e882['val'])_0x43bc0a[_0x8e0649(0x157)]=JSON['parse'](_0x82e882[_0x8e0649(0x231)][_0x8e0649(0x151)]());}catch(_0xc4ec26){_0x43bc0a['analysisHistory']=[];}if(_0x43bc0a[_0x8e0649(0x20c)]&&_0x43bc0a['eventHistory']['length']>0x0){_0x43bc0a[_0x8e0649(0x187)][_0x8e0649(0x1bb)](_0x8e0649(0x153));for(let _0x116eeb=_0x43bc0a[_0x8e0649(0x20c)][_0x8e0649(0x21a)]-0x1;_0x116eeb>=0x0;_0x116eeb--){const _0x15b737=_0x43bc0a['eventHistory'][_0x116eeb];if(_0x15b737&&_0x15b737['id']!==undefined&&_0x15b737['value']!==undefined)_0x43bc0a['sensorLastValues'][_0x15b737['id']]=_0x15b737[_0x8e0649(0xf7)];}}}async function initSystemConfig(_0x238215){const _0x122ec4=a0_0x356808;try{const _0x405d95=await _0x238215[_0x122ec4(0x117)](_0x122ec4(0x236));if(_0x405d95&&_0x405d95[_0x122ec4(0xcb)])_0x238215[_0x122ec4(0xfd)]={'latitude':_0x405d95['common'][_0x122ec4(0x1c5)]||0x0,'longitude':_0x405d95[_0x122ec4(0xcb)]['longitude']||0x0,'city':_0x405d95[_0x122ec4(0xcb)]['city']||''};}catch(_0x2fb8d9){}}function a0_0x2ba6(){const _0x26d8f1=['submitFeedback','ack','LTM.baselineStatus','Daily\x20Digests','useWeather','getHours','common','ANALYZE_GAIT','temperature','getMinutes','window','detected','123834UTZkaP','parse','enum','testApiKey','motion','Gemini\x20Error:\x20','System\x20Mode','ANALYZE_SEQUENCE','now','./lib/scheduler','getGenerativeModel','subscribeStates','forEach','analysis.security.lastScore','indicator','light','round','analysis.health.trendValue','find','licht','bind','normal','confidence','alertReason','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','notifyTelegramInstance','targetValue','bewegung','analysis.automation.detectedPatterns','online','Insulation\x20Score','setupLtmScheduler','message','analysis.energy.forecast','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','âœ…\x20HEALTH\x20TRAINED.','briefingJob','Topology\x20Matrix','value','string','vacation','timestamp','exports','Kalender\x20deaktiviert.','systemConfig','events.lastEvent','analysis.automation.targetValue','details','cancel','Anomaly\x20Score','substring','location','state','LTM.rawEventLog','config','Keine\x20Termine.','response','extendObjectAsync','Current\x20Threshold','presence','push','analysis.automation.patternDetected','rule','./lib/scanner','lampe','Deaktiviert\x20(Pro-Feature)','Activity\x20Summary','Unbekannt','setObjectNotExistsAsync','system','getForeignObjectAsync','endsWith','analysis.training.triggerTopology','kill','PRIORITÃ„T:\x20Gesundheit/AAL.','triggerDailyDigest','path','status','Health\x20Analysis','ENERGY_PREDICT_RESULT','toFixed','System','description','Today\x20Vector\x20(15m)','LTM.trainingData.sequences','TRAIN_HEALTH','automationProposal','Fokus\x20auf\x20Familienroutinen.','checkAndInstall','map','main','\x20=\x20','.\x20ANWESEND:\x20','Thermodynamics','onStateChange','Security\x20Monitor','analysis.health.todayVector','analysis.security.currentThreshold','NORMAL','analysis.training.status','system.isPresent','Err:\x20','analysis.energy.heatingScore','text','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','command','openweathermap','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','inactivityThresholdHours','Lernphase\x20(','pop','analysisTimer','Missing\x20data','analysis.triggerBriefing','analysis.alertReason','Raw\x20Log',')\x20-\x20SAFE\x20BOOT','isProVersion','system.presenceWho','scanDevices','\x0aSTB:\x20','rawEventLog','913904tRjZpb','analysis.training.triggerEnergy','PREDICT_ENERGY','Fokus\x20auf\x20Komfort.','Description','system.mode','toString','occupancy','Restoring\x20sensor\x20cache...','TRAIN_ENERGY','Success','Who\x20is\x20present?','analysisHistory','fenster','ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...','floor','weatherInstance','enum.functions.*','geminiModel','Skipped\x20(No\x20AI\x20or\x20Data)','getFullYear','analysis.automation.targetId','Error\x20launching\x20Python:\x20','data','analysis.security.topologyMatrix','python3','pythonProcess','HEALTH_RESULT','threshold','.Current.Temperature','rating','logDuplicates','geminiApiKey','toISOString','analysis.health','WiFi\x20Presence\x20detected.','analysis.health.gaitSpeed','PYTHON_EXE','499282zCmfSN','enum.rooms.*','splice','minDaysForBaseline','object','namespace','baselineDrift','User\x20dismissed\x20automation\x20proposal.','error','104XRNOXl','KI-Modell\x20nicht\x20initialisiert','analysis.automation.description','.NextHours.Location_1.Day_1.current.temp_value','getOverviewData','870319LsOTdL','communicate.request','ltmStbWindowDays','.\x20KONTEXT:\x20','kontakt','isAlert','callback','analysis.health.isAnomaly','log','ANOMALY','ltmJob','change_percent','Alert\x20Status','PARTY','generic','(((.+)+)+)+$','getForeignObjectsAsync','Success:\x20','trim','getEnums','exitTimer','split','setHours','LTM.processingStatus','setForeignStateAsync','child_process','onUnload','\x20->\x20','Unknown','ENERGY_TRAIN_RESULT','analysis.trigger','Gemini\x20AI\x20initialized.','genAI','payload','setupBriefingScheduler','analysis.analysisHistory','generateContent','N/A','LTM.triggerDailyDigest','analysis.isAlert','LTM.dailyDigests','GUEST','unshift','door','modeResetJob','BUTLER\x20Execution\x20Error:\x20','analysis.security','getDate','analysis.automation.triggerAction','models/gemini-flash-latest','PONG','Digest','success','COMFORT_RESULT','âš ï¸\x20SECURITY\x20ALARM:\x20','application/json','presenceDevices','Adapter','isGracePeriodActive','.\x20WETTER:\x20','info','testContext','lastAlertState','\x0aGrund:\x20','unknown','driftDetails','insulation','schalter','activityLevel','channel','latitude','some','analysis.health.lastCheck','type','simulateButler','âš ï¸\x20ALARM:\x20','cogni-living\x20adapter\x20starting\x20(v','analysis.security.lastCheck','onReady','currentSystemMode','triggerBriefing','write','devices','close','number','json','1209792spawFQ','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','existsSync','ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20','TRAIN_SECURITY','targetId','onMessage','ANALYZE_TREND','ðŸŒ…\x20Morning\x20Briefing:\x0a','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','Keine\x20Details.','analysis.training.triggerSecurity','toLowerCase','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','Training\x20Status','Build\x20Topology','includes','licenseKey','useCalendar','Trigger\x20Briefing','PRIORITÃ„T:\x20Sicherheit.','getCalendarNames','apply','LTM.trainingData.thermodynamics','.forecast.current.temperature','summary','klima','BUILD_TOPOLOGY','stringify','reason','\x20Tage)','20uXPNxu','keys','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','TRAIN_COMFORT','name','./lib/installer','is_anomaly','Train\x20Security','warn','date','ltmLtbWindowDays','automation.triggerAction','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','LTM.driftAnalysis.baselineDrift','switch','analysis.activitySummary','setupModeResetScheduler','getStateAsync','instance','diagnosis','fill','1086516THdASo','.\x20EVENTS:\x20','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','eventHistory','button','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','cogni-living','autoApply','isPresent','unload','delObjectAsync','analysis.history_debug_00','dailyDigests','@google/generative-ai','.forecast.current.state','stdin','analysis.health.trendDiagnosis','length','Gemini\x20Init\x20Error:\x20','guest','from','prÃ¤senz','boolean','party','getForeignStateAsync','setupDriftAnalysisScheduler','slice','notifyTelegramEnabled','getTime','dependencyInstallInProgress','Â°C,\x20','sendTo','SECURITY_RESULT','outdoorSensorId','join','2725305hrILax','Topology\x20Error:\x20','subscribeForeignStatesAsync','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','Train\x20Energy','val','replace','getLtmData','Temperature\x20Forecast','getMonth','system.config','heating','driftAnalysisTimer','scanForDevices','TOPOLOGY_RESULT','.forecast.current.temp','Alert\x20Reason','ready','temperatur','HEALTH_TRAIN_RESULT','analysis.training.triggerComfort','events.history','debug','Activity-Level','[RECORDER]\x20Error:\x20','analysis.training','exitGraceTimer','shift','analysis.automation.autoApply','Keine\x20Wetterdaten\x20verfÃ¼gbar.','Last\x20Check','VACATION','GAIT_RESULT','\x20new\x20patterns.','version','dimmer','LTM','Kein\x20API\x20Key!','weatherunderground','setState','Trend\x20Value','Failed:\x20','Regel\x20erkannt:\x20','service.py','Analysiere\x20ausgewogen.','[RESULT]','sensorLastValues','systemUUID','accuweather','setStateAsync','.communicate.request','ðŸ\x20Python\x20Pong','analysisInterval'];a0_0x2ba6=function(){return _0x26d8f1;};return a0_0x2ba6();}async function createAllObjects(_0x14a359){const _0x1f5f7c=a0_0x356808;await _0x14a359[_0x1f5f7c(0x10a)](_0x1f5f7c(0x116),{'type':_0x1f5f7c(0x1c4),'common':{'name':_0x1f5f7c(0x122)},'native':{}}),await _0x14a359[_0x1f5f7c(0x10a)](SYSTEM_DP_MODE,{'type':_0x1f5f7c(0x105),'common':{'name':_0x1f5f7c(0xd7),'type':_0x1f5f7c(0xf8),'role':'state','read':!![],'write':!![],'def':SYSTEM_MODES[_0x1f5f7c(0x133)]},'native':{}}),await _0x14a359['setObjectNotExistsAsync'](_0x1f5f7c(0x147),{'type':_0x1f5f7c(0x105),'common':{'name':_0x1f5f7c(0x156),'type':_0x1f5f7c(0xf8),'role':_0x1f5f7c(0x138),'read':!![],'write':![]},'native':{}}),await _0x14a359['setObjectNotExistsAsync'](_0x1f5f7c(0xfe),{'type':'state','common':{'name':'Last\x20raw\x20event','type':_0x1f5f7c(0xf8),'role':_0x1f5f7c(0x1d4),'read':!![],'write':![]},'native':{}}),await _0x14a359['setObjectNotExistsAsync'](_0x1f5f7c(0xa5),{'type':_0x1f5f7c(0x105),'common':{'name':'Event\x20History','type':_0x1f5f7c(0xf8),'role':'json','read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x10a)](_0x1f5f7c(0xa9),{'type':'channel','common':{'name':'AI\x20Training'},'native':{}}),await _0x14a359['setObjectNotExistsAsync'](_0x1f5f7c(0x1e0),{'type':'state','common':{'name':_0x1f5f7c(0x1fb),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x14a359['setObjectNotExistsAsync']('analysis.training.triggerHealth',{'type':_0x1f5f7c(0x105),'common':{'name':'Train\x20Health','type':_0x1f5f7c(0x21f),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x14a359['setObjectNotExistsAsync'](_0x1f5f7c(0x14c),{'type':_0x1f5f7c(0x105),'common':{'name':_0x1f5f7c(0x230),'type':_0x1f5f7c(0x21f),'role':_0x1f5f7c(0x20d),'read':!![],'write':!![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)]('analysis.training.triggerComfort',{'type':_0x1f5f7c(0x105),'common':{'name':'Train\x20Comfort','type':_0x1f5f7c(0x21f),'role':_0x1f5f7c(0x20d),'read':!![],'write':!![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)]('analysis.training.triggerTopology',{'type':_0x1f5f7c(0x105),'common':{'name':_0x1f5f7c(0x1e4),'type':_0x1f5f7c(0x21f),'role':_0x1f5f7c(0x20d),'read':!![],'write':!![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)](_0x1f5f7c(0x134),{'type':_0x1f5f7c(0x105),'common':{'name':_0x1f5f7c(0x1e3),'type':_0x1f5f7c(0xf8),'role':_0x1f5f7c(0x138),'read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x10a)](_0x1f5f7c(0x1ad),{'type':_0x1f5f7c(0x1c4),'common':{'name':_0x1f5f7c(0x130)},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)]('analysis.security.lastScore',{'type':_0x1f5f7c(0x105),'common':{'name':_0x1f5f7c(0x102),'type':_0x1f5f7c(0x1d3),'role':_0x1f5f7c(0xf7),'read':!![],'write':![]},'native':{}}),await _0x14a359['setObjectNotExistsAsync'](_0x1f5f7c(0x132),{'type':_0x1f5f7c(0x105),'common':{'name':_0x1f5f7c(0x10b),'type':_0x1f5f7c(0x1d3),'role':_0x1f5f7c(0xf7),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)](_0x1f5f7c(0x1cc),{'type':'state','common':{'name':_0x1f5f7c(0xae),'type':_0x1f5f7c(0xf8),'role':_0x1f5f7c(0x1fd),'read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)](_0x1f5f7c(0x163),{'type':_0x1f5f7c(0x105),'common':{'name':_0x1f5f7c(0xf6),'type':_0x1f5f7c(0xf8),'role':'json','read':!![],'write':![]},'native':{}}),await _0x14a359['extendObjectAsync'](_0x1f5f7c(0x16d),{'type':'channel','common':{'name':_0x1f5f7c(0x11f)},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)](_0x1f5f7c(0x1c7),{'type':_0x1f5f7c(0x105),'common':{'name':_0x1f5f7c(0xae),'type':'string','role':'date','read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)](_0x1f5f7c(0x186),{'type':_0x1f5f7c(0x105),'common':{'name':'Anomaly\x20Detected','type':_0x1f5f7c(0x21f),'role':_0x1f5f7c(0xdf),'read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)]('analysis.health.trendDiagnosis',{'type':_0x1f5f7c(0x105),'common':{'name':'Trend','type':'string','role':_0x1f5f7c(0x138),'read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)](_0x1f5f7c(0xe2),{'type':'state','common':{'name':_0x1f5f7c(0xb8),'type':'number','role':_0x1f5f7c(0xf7),'read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)](_0x1f5f7c(0x131),{'type':_0x1f5f7c(0x105),'common':{'name':_0x1f5f7c(0x124),'type':'string','role':_0x1f5f7c(0x1d4),'read':!![],'write':![]},'native':{}}),await _0x14a359['setObjectNotExistsAsync'](_0x1f5f7c(0x16f),{'type':_0x1f5f7c(0x105),'common':{'name':'Gait\x20Speed\x20Trend','type':_0x1f5f7c(0x1d3),'role':'value','read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x10a)]('analysis.energy',{'type':'channel','common':{'name':'Energy\x20Intelligence'},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)]('analysis.energy.insulationScore',{'type':_0x1f5f7c(0x105),'common':{'name':_0x1f5f7c(0xef),'type':_0x1f5f7c(0xf8),'role':_0x1f5f7c(0x138),'read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)]('analysis.energy.heatingScore',{'type':_0x1f5f7c(0x105),'common':{'name':'Heating\x20Score','type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)](_0x1f5f7c(0xf2),{'type':_0x1f5f7c(0x105),'common':{'name':_0x1f5f7c(0x234),'type':_0x1f5f7c(0xf8),'role':_0x1f5f7c(0x1d4),'read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x10a)](_0x1f5f7c(0xb4),{'type':_0x1f5f7c(0x1c4),'common':{'name':'LTM'},'native':{}}),await _0x14a359[_0x1f5f7c(0x10a)](LTM_DP_RAW_LOG,{'type':_0x1f5f7c(0x105),'common':{'name':_0x1f5f7c(0x144),'type':_0x1f5f7c(0xf8),'role':_0x1f5f7c(0x1d4),'read':!![],'write':![]},'native':{}}),await _0x14a359['extendObjectAsync'](LTM_DP_DAILY_DIGESTS,{'type':_0x1f5f7c(0x105),'common':{'name':_0x1f5f7c(0xc8),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x14a359['setObjectNotExistsAsync']('LTM.trainingData.sequences',{'type':_0x1f5f7c(0x105),'common':{'name':'Sequences','type':_0x1f5f7c(0xf8),'role':_0x1f5f7c(0x1d4),'read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)](_0x1f5f7c(0x1ec),{'type':'state','common':{'name':_0x1f5f7c(0x12e),'type':_0x1f5f7c(0xf8),'role':_0x1f5f7c(0x1d4),'read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)](_0x1f5f7c(0x19d),{'type':_0x1f5f7c(0x105),'common':{'name':'Trigger\x20Analysis','type':_0x1f5f7c(0x21f),'role':_0x1f5f7c(0x20d),'read':!![],'write':!![]},'native':{}}),await _0x14a359['setObjectNotExistsAsync']('analysis.triggerBriefing',{'type':_0x1f5f7c(0x105),'common':{'name':_0x1f5f7c(0x1e8),'type':_0x1f5f7c(0x21f),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x14a359['setObjectNotExistsAsync'](_0x1f5f7c(0x1a6),{'type':'state','common':{'name':_0x1f5f7c(0x18b),'type':_0x1f5f7c(0x21f),'role':'indicator.alarm','read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)](_0x1f5f7c(0x143),{'type':_0x1f5f7c(0x105),'common':{'name':_0x1f5f7c(0xa0),'type':_0x1f5f7c(0xf8),'role':'text.alarm','read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)]('analysis.activitySummary',{'type':_0x1f5f7c(0x105),'common':{'name':_0x1f5f7c(0x113),'type':_0x1f5f7c(0xf8),'role':_0x1f5f7c(0x138),'read':!![],'write':![]},'native':{}}),await _0x14a359['setObjectNotExistsAsync'](_0x1f5f7c(0x10e),{'type':_0x1f5f7c(0x105),'common':{'name':'Pattern\x20Detected','type':'boolean','role':'indicator','read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)](_0x1f5f7c(0x17c),{'type':_0x1f5f7c(0x105),'common':{'name':_0x1f5f7c(0x14f),'type':_0x1f5f7c(0xf8),'role':_0x1f5f7c(0x138),'read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)](_0x1f5f7c(0xed),{'type':'state','common':{'name':'Detected\x20Patterns','type':'string','role':_0x1f5f7c(0x1d4),'read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)](_0x1f5f7c(0x160),{'type':_0x1f5f7c(0x105),'common':{'name':'Target\x20ID','type':_0x1f5f7c(0xf8),'role':'text','read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)]('analysis.automation.targetValue',{'type':'state','common':{'name':'Target\x20Value','type':_0x1f5f7c(0xf8),'role':_0x1f5f7c(0x138),'read':!![],'write':![]},'native':{}}),await _0x14a359[_0x1f5f7c(0x115)]('analysis.automation.autoApply',{'type':_0x1f5f7c(0x105),'common':{'name':'Auto\x20Apply','type':_0x1f5f7c(0x21f),'role':'switch','read':!![],'write':!![]},'native':{}}),await _0x14a359['setObjectNotExistsAsync'](_0x1f5f7c(0x1af),{'type':'state','common':{'name':'Trigger\x20Action','type':_0x1f5f7c(0x21f),'role':_0x1f5f7c(0x20d),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x104aab){const _0x2bf614=a0_0x356808;try{const _0x451409=await _0x104aab['getStateAsync'](SYSTEM_DP_MODE);_0x451409&&_0x451409[_0x2bf614(0x231)]&&Object['values'](SYSTEM_MODES)[_0x2bf614(0x1e5)](_0x451409[_0x2bf614(0x231)])?_0x104aab[_0x2bf614(0x1ce)]=_0x451409[_0x2bf614(0x231)]:(_0x104aab[_0x2bf614(0x1ce)]=SYSTEM_MODES[_0x2bf614(0x133)],await _0x104aab[_0x2bf614(0xc1)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x2bf614(0x133)],'ack':!![]}));}catch(_0x2f0b67){_0x104aab[_0x2bf614(0x1ce)]=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0x1e45ed){const _0x2de32a=a0_0x356808;try{const _0x350558=await _0x1e45ed['getStateAsync'](LTM_DP_RAW_LOG);if(_0x350558&&_0x350558['val'])_0x1e45ed[_0x2de32a(0x14a)]=JSON[_0x2de32a(0xd2)](_0x350558[_0x2de32a(0x231)]);}catch(_0x33054c){_0x1e45ed[_0x2de32a(0x14a)]=[];}}async function saveRawEventLog(_0x287626){const _0x55c4f2=a0_0x356808;if(_0x287626['rawEventLog'][_0x55c4f2(0x21a)]>RAW_LOG_MAX_SIZE)_0x287626[_0x55c4f2(0x14a)][_0x55c4f2(0x173)](0x0,_0x287626[_0x55c4f2(0x14a)][_0x55c4f2(0x21a)]-RAW_LOG_MAX_SIZE);await _0x287626['setStateAsync'](LTM_DP_RAW_LOG,{'val':JSON[_0x55c4f2(0x1f1)](_0x287626[_0x55c4f2(0x14a)]),'ack':!![]});}async function loadDailyDigests(_0x533c35){const _0x5852a4=a0_0x356808;try{const _0x4ff84a=await _0x533c35[_0x5852a4(0x205)](LTM_DP_DAILY_DIGESTS);if(_0x4ff84a&&_0x4ff84a[_0x5852a4(0x231)])_0x533c35[_0x5852a4(0x215)]=JSON['parse'](_0x4ff84a[_0x5852a4(0x231)]);}catch(_0x1628eb){_0x533c35[_0x5852a4(0x215)]=[];}await updateBaselineStatus(_0x533c35);}async function saveDailyDigests(_0x29214b,_0x35e3cb=!![]){const _0x133686=a0_0x356808,_0x1ba6c9=_0x29214b['config'][_0x133686(0x1fe)]||0x3c;_0x29214b[_0x133686(0x215)][_0x133686(0x21a)]>_0x1ba6c9&&_0x29214b[_0x133686(0x215)][_0x133686(0x173)](0x0,_0x29214b[_0x133686(0x215)][_0x133686(0x21a)]-_0x1ba6c9);await _0x29214b[_0x133686(0xc1)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x29214b[_0x133686(0x215)]),'ack':!![]});if(_0x35e3cb)await updateBaselineStatus(_0x29214b);}async function updateAnalysisHistory(_0x447e1f,_0x504468){const _0x26cb0c=a0_0x356808;_0x447e1f[_0x26cb0c(0x157)]['unshift'](_0x504468);if(_0x447e1f['analysisHistory'][_0x26cb0c(0x21a)]>HISTORY_MAX_SIZE)_0x447e1f['analysisHistory']['pop']();await _0x447e1f[_0x26cb0c(0xc1)](_0x26cb0c(0x1a2),{'val':JSON[_0x26cb0c(0x1f1)](_0x447e1f[_0x26cb0c(0x157)]),'ack':!![]});}async function updateBaselineStatus(_0x22565d){const _0x5dacd5=a0_0x356808;if(!_0x22565d[_0x5dacd5(0x146)]){await _0x22565d['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x5dacd5(0x112),'ack':!![]});return;}const _0x1ff941=_0x22565d[_0x5dacd5(0x215)]['length']>=(_0x22565d['config'][_0x5dacd5(0x174)]||0x7)?'Aktiv\x20('+_0x22565d[_0x5dacd5(0x215)][_0x5dacd5(0x21a)]+_0x5dacd5(0x1f3):_0x5dacd5(0x13e)+_0x22565d[_0x5dacd5(0x215)][_0x5dacd5(0x21a)]+'/'+(_0x22565d[_0x5dacd5(0x107)]['minDaysForBaseline']||0x7)+')';await _0x22565d[_0x5dacd5(0xc1)](LTM_DP_BASELINE_STATUS,{'val':_0x1ff941,'ack':!![]});}async function initSensorSubscriptions(_0x553cd8){const _0x19cab2=a0_0x356808,_0x38f57d=_0x553cd8[_0x19cab2(0x107)][_0x19cab2(0x1d1)];if(_0x38f57d)for(const _0x72d944 of _0x38f57d){await _0x553cd8['subscribeForeignStatesAsync'](_0x72d944['id']);}}async function initPresenceSubscriptions(_0x544ed1){const _0xa63543=a0_0x356808,_0x32e0e6=_0x544ed1[_0xa63543(0x107)][_0xa63543(0x1b7)];if(_0x32e0e6)for(const _0x467e8d of _0x32e0e6){await _0x544ed1[_0xa63543(0x22e)](_0x467e8d);}}async function setupTelegramListener(_0x222c48){const _0x2cd8a8=a0_0x356808,_0x137c79=_0x222c48[_0x2cd8a8(0x107)][_0x2cd8a8(0xea)];if(_0x222c48[_0x2cd8a8(0x107)][_0x2cd8a8(0x224)]&&_0x137c79)await _0x222c48[_0x2cd8a8(0x22e)](_0x137c79+_0x2cd8a8(0xc2));}function a0_0x3a27(_0x1ec713,_0x2f1c2d){const _0x128b93=a0_0x2ba6();return a0_0x3a27=function(_0x254303,_0x199f19){_0x254303=_0x254303-0x9f;let _0x2ba6ec=_0x128b93[_0x254303];return _0x2ba6ec;},a0_0x3a27(_0x1ec713,_0x2f1c2d);}async function checkWifiPresence(_0x2a8950){const _0x36114c=a0_0x356808;try{const _0xd1268a=_0x2a8950[_0x36114c(0x107)][_0x36114c(0x1b7)]||[];let _0x356e7a=![];const _0x1328d9=[];for(const _0x244cf2 of _0xd1268a){try{const _0x301a52=await _0x2a8950[_0x36114c(0x221)](_0x244cf2);_0x301a52&&(_0x301a52[_0x36114c(0x231)]===!![]||_0x301a52[_0x36114c(0x231)]===_0x36114c(0xee)||_0x301a52[_0x36114c(0x231)]===0x1)&&(_0x356e7a=!![],_0x1328d9[_0x36114c(0x10d)](_0x244cf2));}catch(_0x20b3b0){}}return await _0x2a8950['setStateAsync'](_0x36114c(0x147),{'val':_0x1328d9[_0x36114c(0x22b)](',\x20'),'ack':!![]}),_0x356e7a&&(_0x2a8950[_0x36114c(0x193)]&&(_0x2a8950[_0x36114c(0x187)][_0x36114c(0x1bb)](_0x36114c(0x16e)),abortExitTimer(_0x2a8950)),!_0x2a8950[_0x36114c(0x211)]&&_0x2a8950[_0x36114c(0x1ce)]===SYSTEM_MODES[_0x36114c(0x133)]&&await setPresence(_0x2a8950,!![])),_0x356e7a;}catch(_0x299446){return![];}}function startExitTimer(_0x4f13e8){const _0x552729=a0_0x356808;abortExitTimer(_0x4f13e8),_0x4f13e8[_0x552729(0x1b9)]=!![],_0x4f13e8[_0x552729(0xaa)]=setTimeout(()=>{_0x4f13e8['isGracePeriodActive']=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x4f13e8[_0x552729(0x193)]=setTimeout(()=>{const _0x32363a=_0x552729;setPresence(_0x4f13e8,![]),_0x4f13e8[_0x32363a(0x193)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x599fc7){const _0x349cf5=a0_0x356808;if(_0x599fc7['exitTimer'])clearTimeout(_0x599fc7[_0x349cf5(0x193)]);if(_0x599fc7['exitGraceTimer'])clearTimeout(_0x599fc7[_0x349cf5(0xaa)]);_0x599fc7['exitTimer']=null,_0x599fc7[_0x349cf5(0xaa)]=null,_0x599fc7[_0x349cf5(0x1b9)]=![];}async function setPresence(_0x1f32ff,_0x395b46){const _0x105515=a0_0x356808;if(_0x1f32ff['isPresent']===_0x395b46)return;_0x1f32ff[_0x105515(0x211)]=_0x395b46,await _0x1f32ff[_0x105515(0xc1)](_0x105515(0x135),{'val':_0x395b46,'ack':!![]});}async function executeAutomationAction(_0x2310fc){const _0x332e25=a0_0x356808;try{const _0x822f10=await _0x2310fc[_0x332e25(0x205)](_0x332e25(0x160)),_0x35924f=await _0x2310fc['getStateAsync']('analysis.automation.targetValue');if(_0x822f10&&_0x822f10['val']&&_0x35924f){const _0x36b706=_0x822f10[_0x332e25(0x231)];let _0x382400=_0x35924f['val'];try{_0x382400=JSON[_0x332e25(0xd2)](_0x382400);}catch(_0x5d868a){}_0x2310fc[_0x332e25(0x187)][_0x332e25(0x1bb)]('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x36b706+_0x332e25(0x12c)+_0x382400),await _0x2310fc[_0x332e25(0x197)](_0x36b706,_0x382400);}else _0x2310fc['log'][_0x332e25(0x1fc)](_0x332e25(0x22f));}catch(_0x1e8968){_0x2310fc['log'][_0x332e25(0x179)](_0x332e25(0x1ac)+_0x1e8968[_0x332e25(0xf1)]);}}async function processSensorEvent(_0x4277f6,_0x3623f2,_0x2790fe,_0x22ac05){const _0x447bef=a0_0x356808;if(!_0x22ac05)return;const _0x2b7004=_0x2790fe[_0x447bef(0x231)],_0x555274=Date[_0x447bef(0xd9)](),_0x2e5032=_0x4277f6['sensorLastValues'][_0x3623f2];_0x4277f6['sensorLastValues'][_0x3623f2]=_0x2b7004;if(!_0x22ac05[_0x447bef(0x16a)]&&_0x2e5032!=undefined&&_0x2e5032==_0x2b7004)return;const _0x388dae=(_0x22ac05[_0x447bef(0x1c8)]||'')[_0x447bef(0x1e1)](),_0x1b8e5e=_0x388dae[_0x447bef(0x1e5)]('temperature')||_0x388dae['includes'](_0x447bef(0xa2))||_0x388dae[_0x447bef(0x1e5)](_0x447bef(0x1ef))||_0x388dae['includes']('heizung');_0x4277f6[_0x447bef(0x146)]&&_0x1b8e5e&&recordThermodynamics(_0x4277f6,_0x3623f2,_0x2b7004,_0x22ac05['location']);const _0x4d9adf={'timestamp':_0x555274,'id':_0x3623f2,'name':_0x22ac05[_0x447bef(0x1f8)],'type':_0x22ac05[_0x447bef(0x1c8)],'location':_0x22ac05['location'],'value':_0x2b7004};_0x4277f6[_0x447bef(0x20c)][_0x447bef(0x1a9)](_0x4d9adf);if(_0x4277f6['eventHistory'][_0x447bef(0x21a)]>HISTORY_MAX_SIZE)_0x4277f6[_0x447bef(0x20c)][_0x447bef(0x13f)]();await _0x4277f6[_0x447bef(0xc1)](_0x447bef(0xfe),{'val':JSON[_0x447bef(0x1f1)](_0x4d9adf),'ack':!![]}),await _0x4277f6['setStateAsync'](_0x447bef(0xa5),{'val':JSON[_0x447bef(0x1f1)](_0x4277f6[_0x447bef(0x20c)]),'ack':!![]});_0x4277f6[_0x447bef(0x146)]&&(_0x4277f6[_0x447bef(0x14a)][_0x447bef(0x10d)](_0x4d9adf),await saveRawEventLog(_0x4277f6),recordSequence(_0x4277f6,_0x4d9adf));if(_0x22ac05['isExit']&&_0x2b7004===!![]){if(_0x4277f6[_0x447bef(0x211)]&&!_0x4277f6['isGracePeriodActive'])startExitTimer(_0x4277f6);else{if(!_0x4277f6[_0x447bef(0x211)])setPresence(_0x4277f6,!![]);}}else{if(_0x22ac05[_0x447bef(0x1c8)]===_0x447bef(0xd5)&&_0x2b7004===!![]){if(_0x4277f6['exitTimer'])abortExitTimer(_0x4277f6);if(!_0x4277f6[_0x447bef(0x211)]&&_0x4277f6['currentSystemMode']===SYSTEM_MODES['NORMAL'])setPresence(_0x4277f6,!![]);}}}async function recordThermodynamics(_0x4e14ad,_0x3e4f24,_0x6b52af,_0x28b228){const _0x371d4a=a0_0x356808,_0x272462=await getOutsideTemperatureNumeric(_0x4e14ad),_0x14e78f=await _0x4e14ad[_0x371d4a(0x205)](_0x371d4a(0x1ec));let _0x3fd4a5=[];if(_0x14e78f&&_0x14e78f[_0x371d4a(0x231)])try{_0x3fd4a5=JSON[_0x371d4a(0xd2)](_0x14e78f[_0x371d4a(0x231)]);}catch(_0x590b0b){}_0x3fd4a5[_0x371d4a(0x10d)]({'ts':Date[_0x371d4a(0xd9)](),'room':_0x28b228||_0x371d4a(0x19b),'t_in':_0x6b52af,'t_out':_0x272462});if(_0x3fd4a5[_0x371d4a(0x21a)]>THERMO_LOG_SIZE)_0x3fd4a5[_0x371d4a(0xab)]();await _0x4e14ad[_0x371d4a(0xc1)](_0x371d4a(0x1ec),{'val':JSON['stringify'](_0x3fd4a5),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x557f66){const _0x2cce6d=a0_0x356808;if(_0x557f66[_0x2cce6d(0x107)][_0x2cce6d(0x22a)])try{const _0x27d9a8=await _0x557f66[_0x2cce6d(0x221)](_0x557f66[_0x2cce6d(0x107)][_0x2cce6d(0x22a)]);if(_0x27d9a8&&_0x27d9a8[_0x2cce6d(0x231)]!==undefined&&_0x27d9a8[_0x2cce6d(0x231)]!==null)return parseFloat(_0x27d9a8[_0x2cce6d(0x231)]);}catch(_0x21ab9b){}const _0x1db98e=_0x557f66[_0x2cce6d(0x107)][_0x2cce6d(0x15b)];if(!_0x557f66[_0x2cce6d(0x107)][_0x2cce6d(0xc9)]||!_0x1db98e)return null;try{let _0x30d5bf='';if(_0x1db98e[_0x2cce6d(0x1e5)](_0x2cce6d(0xc0)))_0x30d5bf=_0x1db98e+_0x2cce6d(0x168);else{if(_0x1db98e[_0x2cce6d(0x1e5)]('daswetter'))_0x30d5bf=_0x1db98e+_0x2cce6d(0x17d);else{if(_0x1db98e[_0x2cce6d(0x1e5)](_0x2cce6d(0x13b)))_0x30d5bf=_0x1db98e+_0x2cce6d(0x1ed);else{if(_0x1db98e[_0x2cce6d(0x1e5)](_0x2cce6d(0xb6)))_0x30d5bf=_0x1db98e+_0x2cce6d(0x9f);}}}if(_0x30d5bf){const _0x426836=await _0x557f66[_0x2cce6d(0x221)](_0x30d5bf);if(_0x426836&&_0x426836['val']!==undefined&&_0x426836[_0x2cce6d(0x231)]!==null)return parseFloat(_0x426836[_0x2cce6d(0x231)]);}}catch(_0x3065e7){}return null;}async function recordSequence(_0x12b9ae,_0x172f83){const _0x1ff68f=a0_0x356808,_0x47a408=(_0x172f83['type']||'')['toLowerCase'](),_0x198bb8=[_0x1ff68f(0xd5),_0x1ff68f(0xec),_0x1ff68f(0x21e),_0x1ff68f(0x10c),_0x1ff68f(0x152),_0x1ff68f(0x1aa),'tÃ¼r',_0x1ff68f(0xcf),_0x1ff68f(0x158),'contact',_0x1ff68f(0x183),_0x1ff68f(0xe0),_0x1ff68f(0xe4),_0x1ff68f(0x202),_0x1ff68f(0x1c2),_0x1ff68f(0xb3),_0x1ff68f(0x111)];if(!_0x198bb8[_0x1ff68f(0x1c6)](_0x5f1425=>_0x47a408['includes'](_0x5f1425)))return;if(!_0x172f83[_0x1ff68f(0xf7)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence['push']({'loc':_0x172f83[_0x1ff68f(0x104)]||_0x1ff68f(0x19b),'id':_0x172f83['id'],'ts':Date[_0x1ff68f(0xd9)]()}),sequenceTimer=setTimeout(async()=>{const _0x3f7159=_0x1ff68f;if(activeSequence[_0x3f7159(0x21a)]>0x1)await saveCompletedSequence(_0x12b9ae);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x2fa3a2){const _0x2760ae=a0_0x356808;try{const _0x107b01=await _0x2fa3a2[_0x2760ae(0x205)]('LTM.trainingData.sequences');let _0x3bf478=[];if(_0x107b01&&_0x107b01[_0x2760ae(0x231)])try{_0x3bf478=JSON[_0x2760ae(0xd2)](_0x107b01[_0x2760ae(0x231)]);}catch(_0x516c69){}const _0x298dc8=activeSequence[0x0]['ts'],_0x4e062e=activeSequence['map'](_0x208ae4=>({'loc':_0x208ae4['loc'],'t_delta':Math['round']((_0x208ae4['ts']-_0x298dc8)/0x3e8)})),_0xc87ac1={'timestamp':new Date(_0x298dc8)[_0x2760ae(0x16c)](),'steps':_0x4e062e,'duration':Math[_0x2760ae(0xe1)]((activeSequence[activeSequence['length']-0x1]['ts']-_0x298dc8)/0x3e8),'daytime':new Date(_0x298dc8)[_0x2760ae(0xca)]()};_0x3bf478[_0x2760ae(0x10d)](_0xc87ac1);if(_0x3bf478['length']>MAX_TRAINING_SET_SIZE)_0x3bf478[_0x2760ae(0xab)]();await _0x2fa3a2[_0x2760ae(0xc1)]('LTM.trainingData.sequences',{'val':JSON[_0x2760ae(0x1f1)](_0x3bf478),'ack':!![]}),runSecurityCheck(_0x2fa3a2,_0xc87ac1);}catch(_0x513c16){_0x2fa3a2['log']['error'](_0x2760ae(0xa8)+_0x513c16[_0x2760ae(0xf1)]);}}function runSecurityCheck(_0x55caf2,_0xbcec99){const _0x294946=a0_0x356808;if(!_0x55caf2[_0x294946(0x146)])return;sendToPython(_0x55caf2,_0x294946(0xd8),{'sequence':_0xbcec99});}async function createDailyDigest(_0x14b3de){const _0x2903a0=a0_0x356808;if(!_0x14b3de[_0x2903a0(0x146)])return;await _0x14b3de['setStateAsync'](LTM_DP_STATUS,{'val':'Started...','ack':!![]});if(!_0x14b3de['geminiModel']||_0x14b3de[_0x2903a0(0x14a)][_0x2903a0(0x21a)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x14b3de[_0x2903a0(0xc1)](LTM_DP_STATUS,{'val':_0x2903a0(0x15e),'ack':!![]});return;}const _0x95a249=JSON[_0x2903a0(0xd2)](JSON[_0x2903a0(0x1f1)](_0x14b3de[_0x2903a0(0x14a)])),_0x5c6d65=_0x95a249[_0x2903a0(0x21a)],_0x4ff87b=_0x2903a0(0x1de)+JSON[_0x2903a0(0x1f1)](_0x95a249);try{const _0x398c08=await _0x14b3de[_0x2903a0(0x15d)]['generateContent'](_0x4ff87b),_0x512337=JSON[_0x2903a0(0xd2)](_0x398c08['response'][_0x2903a0(0x138)]()[_0x2903a0(0x232)](/```json|```/g,'')[_0x2903a0(0x191)]()),_0x11e561={'timestamp':new Date()['toISOString'](),'eventCount':_0x5c6d65,'summary':_0x512337[_0x2903a0(0x1ee)]||_0x2903a0(0x1b2),'activityLevel':_0x512337['activityLevel']||'normal','systemMode':_0x14b3de['currentSystemMode']};_0x14b3de[_0x2903a0(0x215)][_0x2903a0(0x10d)](_0x11e561),await saveDailyDigests(_0x14b3de),_0x14b3de[_0x2903a0(0x14a)]=[],await saveRawEventLog(_0x14b3de),await _0x14b3de[_0x2903a0(0xc1)](LTM_DP_STATUS,{'val':_0x2903a0(0x155),'ack':!![]});if(_0x14b3de[_0x2903a0(0x146)])sendToPython(_0x14b3de,'ANALYZE_HEALTH',{'digest':_0x11e561});}catch(_0x4657ad){_0x14b3de['log']['error'](_0x4657ad[_0x2903a0(0xf1)]);}}async function runBaselineDriftAnalysis(_0x38b3a6){const _0x8ea251=a0_0x356808;if(!_0x38b3a6[_0x8ea251(0x146)]||!_0x38b3a6['geminiModel'])return;const _0x5e56ba=_0x38b3a6[_0x8ea251(0x107)][_0x8ea251(0x181)]||0xe;if(_0x38b3a6[_0x8ea251(0x215)][_0x8ea251(0x21a)]<_0x5e56ba+0x7){await _0x38b3a6[_0x8ea251(0xc1)](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x560cca=_0x38b3a6[_0x8ea251(0x215)][_0x8ea251(0x223)](-_0x5e56ba),_0x423a63=_0x38b3a6['dailyDigests'][_0x8ea251(0x223)](0x0,_0x38b3a6[_0x8ea251(0x215)]['length']-_0x5e56ba),_0x387541=_0x8ea251(0xe9)+JSON['stringify'](_0x423a63)+_0x8ea251(0x149)+JSON[_0x8ea251(0x1f1)](_0x560cca);try{const _0x47f255=await _0x38b3a6[_0x8ea251(0x15d)]['generateContent'](_0x387541),_0x3c7cd2=JSON[_0x8ea251(0xd2)](_0x47f255[_0x8ea251(0x109)]['text']()[_0x8ea251(0x232)](/```json|```/g,'')[_0x8ea251(0x191)]());_0x3c7cd2[_0x8ea251(0x177)]&&(await _0x38b3a6['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x3c7cd2[_0x8ea251(0x177)],'ack':!![]}),await _0x38b3a6['setStateAsync'](LTM_DP_DRIFT_DETAILS,{'val':_0x3c7cd2[_0x8ea251(0x1c0)],'ack':!![]}),await _0x38b3a6[_0x8ea251(0xc1)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x8ea251(0xd9)](),'ack':!![]}));}catch(_0x433149){}}async function sendMorningBriefing(_0x5f37ac){const _0x4c88b9=a0_0x356808;if(!_0x5f37ac['geminiModel'])return;try{const _0x4e69ab=_0x4c88b9(0x1f6),_0x55e293=await _0x5f37ac[_0x4c88b9(0x15d)]['generateContent'](_0x4e69ab),_0x5b12cc=_0x55e293[_0x4c88b9(0x109)]['text']();sendNotification(_0x5f37ac,_0x4c88b9(0x1dd)+_0x5b12cc);}catch(_0x422115){_0x5f37ac[_0x4c88b9(0x187)][_0x4c88b9(0x179)]('Briefing\x20Error:\x20'+_0x422115[_0x4c88b9(0xf1)]);}}function stopPythonService(_0x314520){const _0x5a917e=a0_0x356808;if(_0x314520[_0x5a917e(0x165)]){try{_0x314520[_0x5a917e(0x165)][_0x5a917e(0x11a)]();}catch(_0xae7ae){}_0x314520[_0x5a917e(0x165)]=null;}}function sendToPython(_0x1f6107,_0x8b35d1,_0x45c026={}){const _0x5191ca=a0_0x356808;if(!_0x1f6107[_0x5191ca(0x165)]||!_0x1f6107[_0x5191ca(0x165)][_0x5191ca(0x218)]['writable'])return;const _0x8a54ca=JSON[_0x5191ca(0x1f1)]({'command':_0x8b35d1,..._0x45c026});try{_0x1f6107[_0x5191ca(0x165)][_0x5191ca(0x218)][_0x5191ca(0x1d0)](_0x8a54ca+'\x0a');}catch(_0x1738f4){}}function runPythonHealthCheck(_0x500349){const _0x23e6ab=a0_0x356808;if(!_0x500349[_0x23e6ab(0x215)]||_0x500349[_0x23e6ab(0x215)][_0x23e6ab(0x21a)]<0x2)return;const _0x4ca9be=_0x500349['dailyDigests'][_0x23e6ab(0x12a)](_0x517850=>{const _0x15a3cc=_0x23e6ab,_0x590a67=(_0x517850[_0x15a3cc(0x1c3)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x590a67]||0x32;});sendToPython(_0x500349,_0x23e6ab(0x1dc),{'values':_0x4ca9be,'tag':_0x23e6ab(0xa7)});}function handlePythonResult(_0x19a769,_0x3f097){const _0x116a56=a0_0x356808;if(_0x3f097[_0x116a56(0x1c8)]===_0x116a56(0x1b1))_0x19a769[_0x116a56(0x187)][_0x116a56(0xa6)](_0x116a56(0xc3));else{if(_0x3f097[_0x116a56(0x1c8)]===_0x116a56(0x229)){const {anomaly_score:_0x56b401,is_anomaly:_0xc0c2b0,threshold:_0x98ec09,explanation:_0x19f88b}=_0x3f097[_0x116a56(0x1a0)];_0x19a769[_0x116a56(0x187)][_0x116a56(0x1bb)](_0x116a56(0x13c)+_0x56b401[_0x116a56(0x121)](0x5)+_0x116a56(0x19a)+(_0xc0c2b0?_0x116a56(0x188):'OK')),_0x19a769[_0x116a56(0xc1)](_0x116a56(0xde),{'val':_0x56b401,'ack':!![]}),_0x19a769[_0x116a56(0xc1)](_0x116a56(0x1cc),{'val':new Date()['toISOString'](),'ack':!![]});if(_0x98ec09)_0x19a769[_0x116a56(0xc1)](_0x116a56(0x132),{'val':_0x98ec09,'ack':!![]});if(_0xc0c2b0){let _0x25b4c4=_0x116a56(0x1d6)+_0x56b401[_0x116a56(0x121)](0x4)+')';if(_0x19f88b&&_0x19f88b!==_0x116a56(0x19b))_0x25b4c4+=_0x116a56(0x1be)+_0x19f88b;_0x19a769[_0x116a56(0xc1)](_0x116a56(0x1a6),{'val':!![],'ack':!![]}),_0x19a769[_0x116a56(0xc1)]('analysis.alertReason',{'val':_0x25b4c4,'ack':!![]}),sendNotification(_0x19a769,_0x116a56(0x1b5)+_0x25b4c4,![],!![]);}}else{if(_0x3f097[_0x116a56(0x1c8)]==='TRAINING_COMPLETE'){const _0x458005=_0x3f097['payload'][_0x116a56(0x100)]||'',_0x53e3f5=_0x3f097[_0x116a56(0x1a0)][_0x116a56(0x167)],_0x113759=_0x3f097[_0x116a56(0x1a0)][_0x116a56(0x1b3)]?_0x116a56(0x190)+new Date()['toLocaleTimeString']()+'\x20('+_0x458005+')':_0x116a56(0xb9)+_0x3f097[_0x116a56(0x1a0)][_0x116a56(0x1f2)];_0x19a769['setStateAsync']('analysis.training.status',{'val':_0x113759,'ack':!![]});if(_0x3f097[_0x116a56(0x1a0)][_0x116a56(0x1b3)]&&_0x53e3f5)_0x19a769['setStateAsync'](_0x116a56(0x132),{'val':_0x53e3f5,'ack':!![]});}else{if(_0x3f097[_0x116a56(0x1c8)]===_0x116a56(0x1b4)){const {patterns:_0xd75ba3}=_0x3f097[_0x116a56(0x1a0)];if(_0xd75ba3&&_0xd75ba3[_0x116a56(0x21a)]>0x0){_0x19a769[_0x116a56(0x187)]['info']('ðŸ›‹ï¸\x20BUTLER:\x20Found\x20'+_0xd75ba3['length']+_0x116a56(0xb1)),_0x19a769[_0x116a56(0xc1)](_0x116a56(0xed),{'val':JSON[_0x116a56(0x1f1)](_0xd75ba3),'ack':!![]});const _0x3bf5f5=_0xd75ba3[0x0],_0xa5156f=_0x116a56(0xba)+_0x3bf5f5[_0x116a56(0x10f)]+'\x20('+(_0x3bf5f5[_0x116a56(0xe7)]*0x64)[_0x116a56(0x121)](0x0)+'%)';_0x19a769[_0x116a56(0xc1)](_0x116a56(0x10e),{'val':!![],'ack':!![]}),_0x19a769[_0x116a56(0xc1)](_0x116a56(0x17c),{'val':_0xa5156f,'ack':!![]});}else _0x19a769[_0x116a56(0x187)]['info']('ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.'),_0x19a769[_0x116a56(0xc1)]('analysis.automation.patternDetected',{'val':![],'ack':!![]}),_0x19a769[_0x116a56(0xc1)](_0x116a56(0xed),{'val':'[]','ack':!![]});}else{if(_0x3f097[_0x116a56(0x1c8)]===_0x116a56(0x19c)){if(_0x3f097[_0x116a56(0x1a0)][_0x116a56(0x1b3)])try{const _0x4aa54e=JSON[_0x116a56(0xd2)](_0x3f097['payload']['details']);if(_0x4aa54e[_0x116a56(0x1c1)])_0x19a769[_0x116a56(0xc1)]('analysis.energy.insulationScore',{'val':JSON[_0x116a56(0x1f1)](_0x4aa54e[_0x116a56(0x1c1)]),'ack':!![]});if(_0x4aa54e[_0x116a56(0x237)])_0x19a769[_0x116a56(0xc1)](_0x116a56(0x137),{'val':JSON[_0x116a56(0x1f1)](_0x4aa54e[_0x116a56(0x237)]),'ack':!![]});}catch(_0x7bf90a){}}else{if(_0x3f097[_0x116a56(0x1c8)]===_0x116a56(0xa3)){if(_0x3f097['payload'][_0x116a56(0x1b3)])_0x19a769[_0x116a56(0x187)][_0x116a56(0x1bb)](_0x116a56(0xf4));}else{if(_0x3f097[_0x116a56(0x1c8)]===_0x116a56(0x166))_0x19a769[_0x116a56(0xc1)]('analysis.health.lastCheck',{'val':new Date()['toISOString'](),'ack':!![]}),_0x19a769['setStateAsync']('analysis.health.isAnomaly',{'val':_0x3f097['payload'][_0x116a56(0x1fa)],'ack':!![]});else{if(_0x3f097['type']==='TREND_RESULT')_0x19a769['setStateAsync'](_0x116a56(0x219),{'val':_0x3f097['payload'][_0x116a56(0x207)],'ack':!![]}),_0x19a769[_0x116a56(0xc1)](_0x116a56(0xe2),{'val':_0x3f097['payload'][_0x116a56(0x18a)],'ack':!![]});else{if(_0x3f097[_0x116a56(0x1c8)]===_0x116a56(0xb0)){const {speed_trend:_0x31cca0}=_0x3f097[_0x116a56(0x1a0)];if(_0x31cca0!==undefined)_0x19a769['setStateAsync']('analysis.health.gaitSpeed',{'val':_0x31cca0,'ack':!![]});}else{if(_0x3f097['type']===_0x116a56(0x120)){const {forecast:_0x238cc1}=_0x3f097[_0x116a56(0x1a0)];if(_0x238cc1)_0x19a769[_0x116a56(0xc1)]('analysis.energy.forecast',{'val':JSON[_0x116a56(0x1f1)](_0x238cc1),'ack':!![]});}else{if(_0x3f097['type']===_0x116a56(0x23a)){const {data:_0x39d480}=_0x3f097[_0x116a56(0x1a0)];_0x39d480&&(_0x19a769[_0x116a56(0x187)][_0x116a56(0x1bb)](_0x116a56(0xf3)),_0x19a769['setStateAsync']('analysis.security.topologyMatrix',{'val':JSON[_0x116a56(0x1f1)](_0x39d480),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x56fdeb){const _0x54751b=a0_0x356808;let _0x453110=_0x54751b(0x164);if(fs[_0x54751b(0x1d7)](installer[_0x54751b(0x170)]))_0x453110=installer['PYTHON_EXE'];try{const _0x3e6d9a=path['join'](__dirname,'python_service',_0x54751b(0xbb));_0x56fdeb[_0x54751b(0x165)]=spawn(_0x453110,[_0x3e6d9a]),_0x56fdeb['pythonProcess']['stdout']['on'](_0x54751b(0x162),_0x1d0867=>{const _0x46e4b9=_0x54751b,_0xfb8aec=_0x1d0867[_0x46e4b9(0x151)]()['split']('\x0a');_0xfb8aec['forEach'](_0x543991=>{const _0x582a5f=_0x46e4b9,_0x25cd6c=_0x543991[_0x582a5f(0x191)]();if(!_0x25cd6c)return;if(_0x25cd6c['startsWith']('[LOG]'))_0x56fdeb[_0x582a5f(0x187)][_0x582a5f(0xa6)]('[PYTHON]\x20'+_0x25cd6c['substring'](0x5)[_0x582a5f(0x191)]());else{if(_0x25cd6c['startsWith'](_0x582a5f(0xbd)))try{const _0x2b8e70=JSON['parse'](_0x25cd6c[_0x582a5f(0x103)](0x8)['trim']());handlePythonResult(_0x56fdeb,_0x2b8e70);}catch(_0x56fad2){}}});}),_0x56fdeb['pythonProcess']['on'](_0x54751b(0x1d2),_0x5219ee=>{const _0x3a0b14=_0x54751b;_0x56fdeb[_0x3a0b14(0x165)]=null;});}catch(_0xce4645){_0x56fdeb[_0x54751b(0x187)][_0x54751b(0x179)](_0x54751b(0x161)+_0xce4645[_0x54751b(0xf1)]);}}async function runAutopilot(_0x1e8d40){const _0x2b60d1=a0_0x356808;_0x1e8d40[_0x2b60d1(0x187)]['debug'](_0x2b60d1(0x139)),await runGeminiAnalysis(_0x1e8d40),updateHealthVector(_0x1e8d40),triggerGaitAnalysis(_0x1e8d40),triggerEnergyPrediction(_0x1e8d40);}async function triggerGaitAnalysis(_0x27ca91){const _0x253308=a0_0x356808;if(!_0x27ca91[_0x253308(0x146)])return;try{const _0x2acf8f=await _0x27ca91['getStateAsync'](_0x253308(0x125));_0x2acf8f&&_0x2acf8f[_0x253308(0x231)]&&sendToPython(_0x27ca91,_0x253308(0xcc),{'sequences':JSON[_0x253308(0xd2)](_0x2acf8f[_0x253308(0x231)])});}catch(_0x2116d4){}}async function triggerEnergyPrediction(_0x441cae){const _0x4681ee=a0_0x356808;if(!_0x441cae[_0x4681ee(0x146)])return;try{const _0x5b6e98=await getOutsideTemperatureNumeric(_0x441cae);if(_0x5b6e98===null)return;const _0x20d605={},_0x4159c1=_0x441cae[_0x4681ee(0x107)]['devices']||[];for(const _0x15e2b1 of _0x4159c1){if(_0x15e2b1[_0x4681ee(0x1c8)]===_0x4681ee(0xcd)&&_0x15e2b1[_0x4681ee(0x104)]){const _0x3ff2ae=_0x441cae[_0x4681ee(0xbe)][_0x15e2b1['id']];if(_0x3ff2ae!==undefined)_0x20d605[_0x15e2b1['location']]=_0x3ff2ae;}}Object[_0x4681ee(0x1f5)](_0x20d605)[_0x4681ee(0x21a)]>0x0&&sendToPython(_0x441cae,_0x4681ee(0x14d),{'current_temps':_0x20d605,'t_out':_0x5b6e98});}catch(_0x11030d){}}function updateHealthVector(_0xef1e35){const _0x1ce022=a0_0x356808;if(!_0xef1e35[_0x1ce022(0x14a)]||_0xef1e35[_0x1ce022(0x14a)]['length']===0x0)return;const _0x553b45=new Array(0x60)['fill'](0x0),_0x54cadc=new Date()[_0x1ce022(0x195)](0x0,0x0,0x0,0x0);_0xef1e35[_0x1ce022(0x14a)][_0x1ce022(0xdd)](_0x52ef37=>{const _0x4f8a72=_0x1ce022,_0x15fc3e=new Date(_0x52ef37[_0x4f8a72(0xfa)]);if(_0x15fc3e[_0x4f8a72(0x225)]()>=_0x54cadc){const _0x7a6944=_0x15fc3e['getHours'](),_0x5da5b4=_0x15fc3e[_0x4f8a72(0xce)](),_0x4d3d1e=_0x7a6944*0x4+Math[_0x4f8a72(0x15a)](_0x5da5b4/0xf);if(_0x4d3d1e>=0x0&&_0x4d3d1e<0x60)_0x553b45[_0x4d3d1e]++;}}),_0xef1e35[_0x1ce022(0xc1)](_0x1ce022(0x131),{'val':JSON['stringify'](_0x553b45),'ack':!![]});}async function getWeatherContext(_0x588c79){const _0x1bf572=a0_0x356808;if(!_0x588c79[_0x1bf572(0x107)][_0x1bf572(0xc9)]||!_0x588c79[_0x1bf572(0x107)][_0x1bf572(0x15b)])return'Wetterdaten\x20deaktiviert.';try{const _0x24ca59=_0x588c79['config'][_0x1bf572(0x15b)];let _0xe308e7=await _0x588c79['getForeignStateAsync'](_0x24ca59+'.Current.Temperature');if(!_0xe308e7)_0xe308e7=await _0x588c79[_0x1bf572(0x221)](_0x24ca59+_0x1bf572(0x1ed));let _0xdcc64=await _0x588c79[_0x1bf572(0x221)](_0x24ca59+'.Current.WeatherText');if(!_0xdcc64)_0xdcc64=await _0x588c79['getForeignStateAsync'](_0x24ca59+_0x1bf572(0x217));if(_0xe308e7&&_0xdcc64)return _0xe308e7['val']+_0x1bf572(0x227)+_0xdcc64['val'];}catch(_0x4499b5){}return _0x1bf572(0xad);}async function getCalendarContext(_0x2e6372){const _0x5eabe9=a0_0x356808;if(!_0x2e6372[_0x5eabe9(0x107)][_0x5eabe9(0x1e7)]||!_0x2e6372['config']['calendarInstance'])return _0x5eabe9(0xfc);return _0x5eabe9(0x108);}async function getCalendarNames(_0x205e08,_0x42c530){return[];}async function saveFeedback(_0x42f0fe,_0x498c09){const _0xfc4040=a0_0x356808;_0x42f0fe[_0xfc4040(0x187)][_0xfc4040(0x1bb)]('ðŸ“\x20Feedback\x20received:\x20'+_0x498c09[_0xfc4040(0x169)]);}async function runGeminiAnalysis(_0x58f48f,_0x1a2d30=''){const _0x49cd46=a0_0x356808;if(!_0x58f48f[_0x49cd46(0x15d)])return;if(_0x58f48f[_0x49cd46(0x20c)]['length']===0x0)return;const _0x4eff88=_0x58f48f[_0x49cd46(0x20c)][_0x49cd46(0x223)](0x0,0xf),_0x549db2=await getWeatherContext(_0x58f48f),_0x2a6ebc=_0x58f48f[_0x49cd46(0x1ce)],_0x1c5185=PERSONA_MAPPING[_0x58f48f[_0x49cd46(0x107)]['aiPersona']||_0x49cd46(0x18d)],_0xbf7a77=_0x58f48f[_0x49cd46(0x107)]['livingContext']||_0x49cd46(0x1df);let _0x27ae2d=_0x49cd46(0x114);try{const _0x5e1694=await _0x58f48f[_0x49cd46(0x205)](_0x49cd46(0x147));if(_0x5e1694&&_0x5e1694['val'])_0x27ae2d=_0x5e1694['val'];}catch(_0x12ab95){}let _0x446bde=![];try{const _0x546bb1=await _0x58f48f[_0x49cd46(0x205)](_0x49cd46(0xac));if(_0x546bb1&&_0x546bb1[_0x49cd46(0x231)])_0x446bde=!![];}catch(_0x45a52b){}const _0x25c1f3=_0x49cd46(0x1d8)+_0x1c5185+_0x49cd46(0x182)+_0xbf7a77+'.\x20SYSTEM_MODE:\x20'+_0x2a6ebc+_0x49cd46(0x1ba)+_0x549db2+_0x49cd46(0x12d)+_0x27ae2d+_0x49cd46(0x20a)+JSON[_0x49cd46(0x1f1)](_0x4eff88)+'.\x20EMERGENCY:\x20'+_0x1a2d30+_0x49cd46(0x20b);try{const _0x49ee8e=await _0x58f48f[_0x49cd46(0x15d)][_0x49cd46(0x1a3)](_0x25c1f3),_0x148e3a=JSON[_0x49cd46(0xd2)](_0x49ee8e[_0x49cd46(0x109)][_0x49cd46(0x138)]()[_0x49cd46(0x232)](/```json|```/g,'')['trim']());await _0x58f48f[_0x49cd46(0xc1)]('analysis.lastResult',{'val':JSON[_0x49cd46(0x1f1)](_0x148e3a),'ack':!![]});if(_0x148e3a['summary'])await _0x58f48f[_0x49cd46(0xc1)](_0x49cd46(0x203),{'val':_0x148e3a[_0x49cd46(0x1ee)],'ack':!![]});const _0x581fe1={'timestamp':Date[_0x49cd46(0xd9)](),'id':Date[_0x49cd46(0xd9)]()['toString'](),'analysis':{'activity':{'summary':_0x148e3a[_0x49cd46(0x1ee)],'isAlert':_0x148e3a[_0x49cd46(0x184)],'alertReason':_0x148e3a[_0x49cd46(0xe8)]},'comfort':{'automationProposal':_0x148e3a[_0x49cd46(0x127)]}}};await updateAnalysisHistory(_0x58f48f,_0x581fe1);const _0x27f7f2=_0x148e3a[_0x49cd46(0x184)]||![];_0x27f7f2!==_0x58f48f[_0x49cd46(0x1bd)]&&(await _0x58f48f[_0x49cd46(0xc1)]('analysis.isAlert',{'val':_0x27f7f2,'ack':!![]}),_0x58f48f[_0x49cd46(0x1bd)]=_0x27f7f2,_0x27f7f2&&(await _0x58f48f['setStateAsync'](_0x49cd46(0x143),{'val':_0x148e3a['alertReason'],'ack':!![]}),sendNotification(_0x58f48f,_0x49cd46(0x1ca)+_0x148e3a[_0x49cd46(0xe8)],![],_0x148e3a['isEmergency'])));if(_0x148e3a[_0x49cd46(0x127)]&&_0x148e3a[_0x49cd46(0x127)]['detected']){await _0x58f48f[_0x49cd46(0xc1)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x58f48f[_0x49cd46(0xc1)](_0x49cd46(0x17c),{'val':_0x148e3a[_0x49cd46(0x127)][_0x49cd46(0x123)],'ack':!![]}),await _0x58f48f[_0x49cd46(0xc1)](_0x49cd46(0x160),{'val':_0x148e3a['automationProposal']['targetId'],'ack':!![]}),await _0x58f48f[_0x49cd46(0xc1)](_0x49cd46(0xff),{'val':JSON[_0x49cd46(0x1f1)](_0x148e3a[_0x49cd46(0x127)][_0x49cd46(0xeb)]),'ack':!![]});if(_0x446bde)executeAutomationAction(_0x58f48f);}}catch(_0x38eeba){_0x58f48f['log'][_0x49cd46(0x179)](_0x49cd46(0xd6)+_0x38eeba['message']);}}async function startSystem(_0x291306){const _0x10fa5b=a0_0x356808;_0x291306[_0x10fa5b(0x187)][_0x10fa5b(0x1bb)](_0x10fa5b(0x159)),await initZombies(_0x291306);try{_0x291306[_0x10fa5b(0x146)]=await checkLicense(_0x291306[_0x10fa5b(0x107)][_0x10fa5b(0x1e6)]);}catch(_0x538a96){}if(!_0x291306[_0x10fa5b(0x107)][_0x10fa5b(0x13d)]||_0x291306[_0x10fa5b(0x107)]['inactivityThresholdHours']<0.1)_0x291306[_0x10fa5b(0x107)][_0x10fa5b(0x13d)]=0xc;await initHistory(_0x291306),await initSystemConfig(_0x291306);if(_0x291306[_0x10fa5b(0x107)]['geminiApiKey'])try{_0x291306['genAI']=new GoogleGenerativeAI(_0x291306[_0x10fa5b(0x107)][_0x10fa5b(0x16b)]),_0x291306[_0x10fa5b(0x15d)]=_0x291306[_0x10fa5b(0x19f)][_0x10fa5b(0xdb)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x10fa5b(0x1b6)}}),_0x291306[_0x10fa5b(0x187)][_0x10fa5b(0x1bb)](_0x10fa5b(0x19e));}catch(_0x202b37){_0x291306[_0x10fa5b(0x187)]['error'](_0x10fa5b(0x21b)+_0x202b37[_0x10fa5b(0xf1)]);}await createAllObjects(_0x291306),await loadSystemMode(_0x291306),await loadRawEventLog(_0x291306),await loadDailyDigests(_0x291306),_0x291306[_0x10fa5b(0xdc)]('analysis.trigger'),_0x291306[_0x10fa5b(0xdc)](LTM_DP_TRIGGER_DIGEST),_0x291306[_0x10fa5b(0xdc)]('system.mode'),_0x291306[_0x10fa5b(0xdc)](_0x10fa5b(0x142)),_0x291306[_0x10fa5b(0xdc)](_0x10fa5b(0x1af)),_0x291306['subscribeStates'](_0x10fa5b(0xac)),_0x291306[_0x10fa5b(0xdc)](_0x10fa5b(0x1e0)),_0x291306[_0x10fa5b(0xdc)]('analysis.training.triggerHealth'),_0x291306['subscribeStates'](_0x10fa5b(0x14c)),_0x291306[_0x10fa5b(0xdc)](_0x10fa5b(0xa4)),_0x291306[_0x10fa5b(0xdc)]('analysis.training.triggerTopology'),await initSensorSubscriptions(_0x291306),await initPresenceSubscriptions(_0x291306),await setupTelegramListener(_0x291306),setTimeout(()=>checkWifiPresence(_0x291306),0x1388);if(_0x291306['analysisTimer'])clearInterval(_0x291306['analysisTimer']);const _0x33c6d8=_0x291306['config'][_0x10fa5b(0xc4)]||0xf;_0x33c6d8>0x0&&(_0x291306[_0x10fa5b(0x140)]=setInterval(()=>{runAutopilot(_0x291306);},_0x33c6d8*0x3c*0x3e8)),schedulers[_0x10fa5b(0xf0)](_0x291306,()=>createDailyDigest(_0x291306)),schedulers[_0x10fa5b(0x204)](_0x291306),schedulers[_0x10fa5b(0x222)](_0x291306,()=>runBaselineDriftAnalysis(_0x291306)),schedulers[_0x10fa5b(0x1a1)](_0x291306,()=>sendMorningBriefing(_0x291306)),startPythonService(_0x291306),setTimeout(()=>{const _0xcd36ba=_0x10fa5b;_0x291306[_0xcd36ba(0x165)]&&(runPythonHealthCheck(_0x291306),triggerGaitAnalysis(_0x291306),triggerEnergyPrediction(_0x291306)),updateHealthVector(_0x291306);},0x1388);}class CogniLiving extends utils[a0_0x356808(0x1b8)]{constructor(_0x40d34c){const _0x1bd1b8=a0_0x356808;super({..._0x40d34c,'name':_0x1bd1b8(0x20f)}),this[_0x1bd1b8(0x20c)]=[],this[_0x1bd1b8(0x157)]=[],this['rawEventLog']=[],this[_0x1bd1b8(0x215)]=[],this[_0x1bd1b8(0xbe)]={},this[_0x1bd1b8(0xfd)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x1bd1b8(0x211)]=!![],this[_0x1bd1b8(0x193)]=null,this[_0x1bd1b8(0xaa)]=null,this[_0x1bd1b8(0x1b9)]=![],this['genAI']=null,this[_0x1bd1b8(0x15d)]=null,this[_0x1bd1b8(0x1ce)]=SYSTEM_MODES[_0x1bd1b8(0x133)],this[_0x1bd1b8(0x146)]=![],this[_0x1bd1b8(0x1bd)]=![],this[_0x1bd1b8(0xbf)]=_0x1bd1b8(0x1bf),this[_0x1bd1b8(0x140)]=null,this[_0x1bd1b8(0x189)]=null,this[_0x1bd1b8(0x1ab)]=null,this[_0x1bd1b8(0x238)]=null,this['briefingJob']=null,this[_0x1bd1b8(0x165)]=null,this['dependencyInstallInProgress']=![],this['on'](_0x1bd1b8(0xa1),this['onReady'][_0x1bd1b8(0xe5)](this)),this['on']('stateChange',this[_0x1bd1b8(0x12f)][_0x1bd1b8(0xe5)](this)),this['on'](_0x1bd1b8(0x212),this[_0x1bd1b8(0x199)][_0x1bd1b8(0xe5)](this)),this['on'](_0x1bd1b8(0xf1),this[_0x1bd1b8(0x1db)]['bind'](this));}async[a0_0x356808(0x1cd)](){const _0x57e340=a0_0x356808;this['log']['info'](_0x57e340(0x1cb)+this[_0x57e340(0xb2)]+_0x57e340(0x145));if(!installer[_0x57e340(0x129)](this,()=>startSystem(this)))return;}[a0_0x356808(0x199)](_0x18c6d7){const _0x286f9d=a0_0x356808;if(this[_0x286f9d(0x140)])clearInterval(this[_0x286f9d(0x140)]);if(this['driftAnalysisTimer'])clearInterval(this[_0x286f9d(0x238)]);if(this[_0x286f9d(0x189)])this[_0x286f9d(0x189)][_0x286f9d(0x101)]();if(this[_0x286f9d(0x1ab)])this[_0x286f9d(0x1ab)]['cancel']();if(this['briefingJob'])this[_0x286f9d(0xf5)][_0x286f9d(0x101)]();if(this[_0x286f9d(0x193)])clearTimeout(this[_0x286f9d(0x193)]);if(this[_0x286f9d(0xaa)])clearTimeout(this['exitGraceTimer']);stopPythonService(this),_0x18c6d7();}async['onStateChange'](_0x2c1ff8,_0x2a9a7e){const _0x571ada=a0_0x356808;if(!_0x2a9a7e||this[_0x571ada(0x226)])return;if(_0x2c1ff8[_0x571ada(0x1e5)]('telegram')&&_0x2c1ff8[_0x571ada(0x118)](_0x571ada(0x180))&&_0x2a9a7e[_0x571ada(0x231)]){await handleTelegramResponse(this,_0x2a9a7e[_0x571ada(0x231)]);return;}if(_0x2c1ff8===this[_0x571ada(0x176)]+'.'+SYSTEM_DP_MODE){if(_0x2a9a7e['val']&&Object['values'](SYSTEM_MODES)[_0x571ada(0x1e5)](_0x2a9a7e[_0x571ada(0x231)])){this['currentSystemMode']=_0x2a9a7e[_0x571ada(0x231)];if(_0x2a9a7e[_0x571ada(0x231)]===SYSTEM_MODES[_0x571ada(0xaf)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x2a9a7e['ack'])this['setState'](_0x2c1ff8,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x2a9a7e[_0x571ada(0xc6)]){_0x2c1ff8[_0x571ada(0x1e5)](_0x571ada(0x19d))&&_0x2a9a7e['val']&&(this['setState'](_0x2c1ff8,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x2c1ff8['includes'](_0x571ada(0x11c))&&_0x2a9a7e[_0x571ada(0x231)]){this[_0x571ada(0xb7)](_0x2c1ff8,{'val':![],'ack':!![]});if(this[_0x571ada(0x146)])createDailyDigest(this);}_0x2c1ff8[_0x571ada(0x1e5)](_0x571ada(0x1cf))&&_0x2a9a7e[_0x571ada(0x231)]&&(this['setState'](_0x2c1ff8,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x2c1ff8[_0x571ada(0x1e5)](_0x571ada(0x1ff))&&_0x2a9a7e[_0x571ada(0x231)]&&(this[_0x571ada(0xb7)](_0x2c1ff8,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x2c1ff8[_0x571ada(0x1e5)](_0x571ada(0x1e0))&&_0x2a9a7e[_0x571ada(0x231)]){this[_0x571ada(0xb7)](_0x2c1ff8,{'val':![],'ack':!![]});if(this[_0x571ada(0x146)])try{const _0xa5e7cd=await this[_0x571ada(0x205)](_0x571ada(0x125));if(_0xa5e7cd&&_0xa5e7cd[_0x571ada(0x231)]){const _0x257483=JSON['parse'](_0xa5e7cd['val']);this[_0x571ada(0x187)][_0x571ada(0x1bb)]('ðŸ§ \x20Triggering\x20Security\x20Training...'),this[_0x571ada(0xc1)]('analysis.training.status',{'val':'Sec-Training\x20started...','ack':!![]}),sendToPython(this,_0x571ada(0x1d9),{'sequences':_0x257483});}}catch(_0xf726a){this[_0x571ada(0x187)]['error']('Training\x20Error:\x20'+_0xf726a[_0x571ada(0xf1)]);}}if(_0x2c1ff8[_0x571ada(0x1e5)]('analysis.training.triggerHealth')&&_0x2a9a7e[_0x571ada(0x231)]){this[_0x571ada(0xb7)](_0x2c1ff8,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0xdbf0e=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0xdbf0e&&_0xdbf0e['val'])sendToPython(this,_0x571ada(0x126),{'digests':JSON[_0x571ada(0xd2)](_0xdbf0e[_0x571ada(0x231)])});}catch(_0x5e89f1){}}if(_0x2c1ff8[_0x571ada(0x1e5)](_0x571ada(0x14c))&&_0x2a9a7e[_0x571ada(0x231)]){this[_0x571ada(0xb7)](_0x2c1ff8,{'val':![],'ack':!![]});if(this[_0x571ada(0x146)])try{const _0x24f481=await this[_0x571ada(0x205)]('LTM.trainingData.thermodynamics');if(_0x24f481&&_0x24f481['val'])sendToPython(this,_0x571ada(0x154),{'points':JSON[_0x571ada(0xd2)](_0x24f481[_0x571ada(0x231)])});}catch(_0x468310){}}if(_0x2c1ff8['includes'](_0x571ada(0xa4))&&_0x2a9a7e[_0x571ada(0x231)]){this[_0x571ada(0xb7)](_0x2c1ff8,{'val':![],'ack':!![]});if(this[_0x571ada(0x146)])try{const _0x49b730=await this['getStateAsync'](LTM_DP_RAW_LOG);_0x49b730&&_0x49b730[_0x571ada(0x231)]&&(this[_0x571ada(0x187)][_0x571ada(0x1bb)]('ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...'),sendToPython(this,_0x571ada(0x1f7),{'events':JSON[_0x571ada(0xd2)](_0x49b730[_0x571ada(0x231)])}));}catch(_0x2760e7){}}if(_0x2c1ff8[_0x571ada(0x1e5)](_0x571ada(0x119))&&_0x2a9a7e[_0x571ada(0x231)]){this[_0x571ada(0xb7)](_0x2c1ff8,{'val':![],'ack':!![]});if(this[_0x571ada(0x146)])try{const _0x4c93be=await this[_0x571ada(0x205)](_0x571ada(0x125));if(_0x4c93be&&_0x4c93be[_0x571ada(0x231)]){const _0x67e4ca=JSON[_0x571ada(0xd2)](_0x4c93be['val']);this['log'][_0x571ada(0x1bb)](_0x571ada(0x20e)),sendToPython(this,_0x571ada(0x1f0),{'sequences':_0x67e4ca});}}catch(_0x18bf26){this[_0x571ada(0x187)]['error'](_0x571ada(0x22d)+_0x18bf26[_0x571ada(0xf1)]);}}return;}if(this[_0x571ada(0x107)]['presenceDevices']&&this[_0x571ada(0x107)][_0x571ada(0x1b7)][_0x571ada(0x1e5)](_0x2c1ff8)){await checkWifiPresence(this);return;}const _0x401972=(this['config'][_0x571ada(0x1d1)]||[])[_0x571ada(0xe3)](_0x36b58c=>_0x36b58c['id']===_0x2c1ff8);if(_0x401972)processSensorEvent(this,_0x2c1ff8,_0x2a9a7e,_0x401972);}async[a0_0x356808(0x1db)](_0x4a3151){const _0x4045c9=a0_0x356808;if(typeof _0x4a3151==='object'&&_0x4a3151[_0x4045c9(0xf1)]){if(_0x4a3151['command']===_0x4045c9(0xd4)){const _0x2e72d4=_0x4a3151[_0x4045c9(0xf1)]['apiKey']||this['config']['geminiApiKey'];if(!_0x2e72d4)return this[_0x4045c9(0x228)](_0x4a3151[_0x4045c9(0x21d)],_0x4a3151[_0x4045c9(0x13a)],{'success':![],'message':'Kein\x20API\x20Key.'},_0x4a3151[_0x4045c9(0x185)]);try{const _0x44a9d9=new GoogleGenerativeAI(_0x2e72d4),_0x5294f8=_0x44a9d9['getGenerativeModel']({'model':GEMINI_MODEL}),_0x2a3a35=await _0x5294f8[_0x4045c9(0x1a3)]('Hi');this[_0x4045c9(0x228)](_0x4a3151[_0x4045c9(0x21d)],_0x4a3151[_0x4045c9(0x13a)],{'success':!![],'message':'OK:\x20'+_0x2a3a35[_0x4045c9(0x109)][_0x4045c9(0x138)]()},_0x4a3151['callback']);}catch(_0x1cc8b7){this['sendTo'](_0x4a3151[_0x4045c9(0x21d)],_0x4a3151[_0x4045c9(0x13a)],{'success':![],'message':_0x4045c9(0x136)+_0x1cc8b7[_0x4045c9(0xf1)]},_0x4a3151[_0x4045c9(0x185)]);}}else{if(_0x4a3151[_0x4045c9(0x13a)]===_0x4045c9(0x1bc)){const _0x8b9b7e=await getWeatherContext(this),_0x4fbde9=await getCalendarContext(this);this['sendTo'](_0x4a3151['from'],_0x4a3151[_0x4045c9(0x13a)],{'success':!![],'weather':_0x8b9b7e,'calendar':_0x4fbde9},_0x4a3151[_0x4045c9(0x185)]);}else{if(_0x4a3151[_0x4045c9(0x13a)]===_0x4045c9(0x233)){if(!this['isProVersion'])return this[_0x4045c9(0x228)](_0x4a3151[_0x4045c9(0x21d)],_0x4a3151[_0x4045c9(0x13a)],{'success':![],'isPro':![]},_0x4a3151[_0x4045c9(0x185)]);let _0x145f65={'status':_0x4045c9(0x1a4)};try{const _0x1002b8=await this[_0x4045c9(0x205)](LTM_DP_DRIFT_STATUS);_0x145f65[_0x4045c9(0x11e)]=_0x1002b8?_0x1002b8[_0x4045c9(0x231)]:'N/A';}catch(_0x596f03){}this[_0x4045c9(0x228)](_0x4a3151['from'],_0x4a3151[_0x4045c9(0x13a)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x4045c9(0x215)],'driftAnalysis':_0x145f65,'analysisHistory':this['analysisHistory']},_0x4a3151['callback']);}else{if(_0x4a3151[_0x4045c9(0x13a)]===_0x4045c9(0x17e)){const _0x3cc232=this[_0x4045c9(0x215)]['length'],_0x329afb=new Date(),_0x2948ef=new Date(_0x329afb[_0x4045c9(0x15f)](),_0x329afb[_0x4045c9(0x235)](),_0x329afb[_0x4045c9(0x1ae)]())[_0x4045c9(0x225)](),_0x163ef2=this[_0x4045c9(0x14a)]['filter'](_0x35a5b8=>new Date(_0x35a5b8[_0x4045c9(0xfa)])[_0x4045c9(0x225)]()>_0x2948ef)['length'],_0x926ec7=new Array(0x18)[_0x4045c9(0x208)](0x0);this[_0x4045c9(0x14a)][_0x4045c9(0xdd)](_0x5e57f0=>{const _0x38bcd1=_0x4045c9,_0x361752=new Date(_0x5e57f0[_0x38bcd1(0xfa)]);if(_0x361752[_0x38bcd1(0x225)]()>_0x2948ef)_0x926ec7[_0x361752[_0x38bcd1(0xca)]()]++;});let _0x2b0d98={'status':_0x4045c9(0x1a4)};try{const _0x49664d=await this['getStateAsync'](LTM_DP_DRIFT_STATUS);_0x2b0d98['status']=_0x49664d?_0x49664d[_0x4045c9(0x231)]:'N/A';}catch(_0x3cf789){}let _0x37183d='';try{const _0x4b30e6=await this['getStateAsync'](_0x4045c9(0x147));_0x37183d=_0x4b30e6?_0x4b30e6[_0x4045c9(0x231)]:'';}catch(_0x418795){}let _0x49206b=null;!this[_0x4045c9(0x15d)]&&(_0x49206b=this['config'][_0x4045c9(0x16b)]?_0x4045c9(0x17b):_0x4045c9(0xb5));let _0x3df0a5={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x4679e6=await this['getStateAsync'](_0x4045c9(0x10e));if(_0x4679e6&&_0x4679e6['val']){_0x3df0a5[_0x4045c9(0xd0)]=!![];const _0xe82f06=await this[_0x4045c9(0x205)](_0x4045c9(0x17c));_0x3df0a5[_0x4045c9(0x123)]=_0xe82f06?_0xe82f06['val']:'';const _0x17dc8f=await this[_0x4045c9(0x205)](_0x4045c9(0x160));_0x3df0a5[_0x4045c9(0x1da)]=_0x17dc8f?_0x17dc8f[_0x4045c9(0x231)]:'';const _0x21dd61=await this[_0x4045c9(0x205)]('analysis.automation.targetValue');_0x3df0a5[_0x4045c9(0xeb)]=_0x21dd61?_0x21dd61['val']:'';}const _0x15bb53=await this[_0x4045c9(0x205)](_0x4045c9(0xac));_0x3df0a5[_0x4045c9(0x210)]=_0x15bb53?!!_0x15bb53[_0x4045c9(0x231)]:![];}catch(_0x5e363a){}this[_0x4045c9(0x228)](_0x4a3151[_0x4045c9(0x21d)],_0x4a3151['command'],{'success':!![],'eventHistory':this[_0x4045c9(0x20c)][_0x4045c9(0x223)](0x0,0xf),'stats':{'digestCount':_0x3cc232,'eventCountToday':_0x163ef2,'hourlyActivity':_0x926ec7,'driftStatus':_0x2b0d98[_0x4045c9(0x11e)],'isPresent':this['isPresent'],'presenceWho':_0x37183d,'minDays':this[_0x4045c9(0x107)]['minDaysForBaseline']||0x7,'stbDays':this[_0x4045c9(0x107)][_0x4045c9(0x181)]||0xe,'ltbDays':this[_0x4045c9(0x107)]['ltmLtbWindowDays']||0x3c,'systemError':_0x49206b},'automation':_0x3df0a5},_0x4a3151['callback']);}else{if(_0x4a3151[_0x4045c9(0x13a)]===_0x4045c9(0x148))try{const _0x231e51=await scanner[_0x4045c9(0x239)](this,_0x4a3151[_0x4045c9(0xf1)]||{});this[_0x4045c9(0x228)](_0x4a3151[_0x4045c9(0x21d)],_0x4a3151[_0x4045c9(0x13a)],{'success':!![],'devices':_0x231e51},_0x4a3151['callback']);}catch(_0x1e0871){this[_0x4045c9(0x228)](_0x4a3151[_0x4045c9(0x21d)],_0x4a3151['command'],{'success':![],'error':_0x1e0871[_0x4045c9(0xf1)]},_0x4a3151['callback']);}else{if(_0x4a3151['command']===_0x4045c9(0x192)){const _0x1de455=await this['getForeignObjectsAsync'](_0x4045c9(0x15c),_0x4045c9(0xd3)),_0x2d76b1=[];if(_0x1de455)for(const _0x54df54 in _0x1de455){const _0x55af8e=_0x1de455[_0x54df54],_0x298b98=(_0x55af8e[_0x4045c9(0xcb)]&&typeof _0x55af8e[_0x4045c9(0xcb)][_0x4045c9(0x1f8)]===_0x4045c9(0x175)?_0x55af8e['common'][_0x4045c9(0x1f8)]['de']:_0x55af8e[_0x4045c9(0xcb)][_0x4045c9(0x1f8)])||_0x55af8e['common']['name'];_0x2d76b1['push']({'id':_0x54df54,'name':_0x298b98});}const _0x39a9a4=await this[_0x4045c9(0x18f)](_0x4045c9(0x172),_0x4045c9(0xd3)),_0x39a1e2=[];if(_0x39a9a4)for(const _0x2ca833 in _0x39a9a4){const _0xcebfef=_0x39a9a4[_0x2ca833],_0x29a4b6=(_0xcebfef[_0x4045c9(0xcb)]&&typeof _0xcebfef['common']['name']===_0x4045c9(0x175)?_0xcebfef['common'][_0x4045c9(0x1f8)]['de']:_0xcebfef[_0x4045c9(0xcb)][_0x4045c9(0x1f8)])||_0x2ca833[_0x4045c9(0x194)]('.')[_0x4045c9(0x13f)]();_0x39a1e2[_0x4045c9(0x10d)](_0x29a4b6);}this['sendTo'](_0x4a3151[_0x4045c9(0x21d)],_0x4a3151[_0x4045c9(0x13a)],{'success':!![],'enums':_0x2d76b1,'rooms':_0x39a1e2},_0x4a3151[_0x4045c9(0x185)]);}else{if(_0x4a3151[_0x4045c9(0x13a)]===_0x4045c9(0x1ea)){const _0xef5f72=_0x4a3151[_0x4045c9(0xf1)][_0x4045c9(0x206)];if(!_0xef5f72)return this[_0x4045c9(0x228)](_0x4a3151[_0x4045c9(0x21d)],_0x4a3151['command'],{'success':![],'error':'No\x20instance'},_0x4a3151[_0x4045c9(0x185)]);const _0x12cca5=await getCalendarNames(this,_0xef5f72);this[_0x4045c9(0x228)](_0x4a3151[_0x4045c9(0x21d)],_0x4a3151[_0x4045c9(0x13a)],{'success':!![],'names':_0x12cca5},_0x4a3151[_0x4045c9(0x185)]);}else{if(_0x4a3151[_0x4045c9(0x13a)]===_0x4045c9(0x1c9)){const {targetId:_0x2b36de,targetValue:_0x341cb9}=_0x4a3151[_0x4045c9(0xf1)];this['log']['info'](_0x4045c9(0x1e2)+_0x2b36de+_0x4045c9(0x12c)+_0x341cb9),await this[_0x4045c9(0xc1)](_0x4045c9(0x10e),{'val':!![],'ack':!![]}),await this[_0x4045c9(0xc1)](_0x4045c9(0x17c),{'val':_0x4045c9(0x200)+_0x2b36de,'ack':!![]}),await this[_0x4045c9(0xc1)]('analysis.automation.targetId',{'val':_0x2b36de,'ack':!![]}),await this['setStateAsync']('analysis.automation.targetValue',{'val':_0x341cb9,'ack':!![]}),this[_0x4045c9(0x228)](_0x4a3151[_0x4045c9(0x21d)],_0x4a3151[_0x4045c9(0x13a)],{'success':!![]},_0x4a3151[_0x4045c9(0x185)]);}else{if(_0x4a3151[_0x4045c9(0x13a)]===_0x4045c9(0xc5)){const {historyId:_0x2a6119,rating:_0x5484e1,comment:_0x4d98ad,alertReason:_0x4c68e4}=_0x4a3151[_0x4045c9(0xf1)];_0x2a6119&&_0x5484e1?(await saveFeedback(this,{'timestamp':Date[_0x4045c9(0xd9)](),'historyId':_0x2a6119,'rating':_0x5484e1,'comment':_0x4d98ad,'alertReason':_0x4c68e4}),this[_0x4045c9(0x228)](_0x4a3151['from'],_0x4a3151[_0x4045c9(0x13a)],{'success':!![]},_0x4a3151[_0x4045c9(0x185)])):this[_0x4045c9(0x228)](_0x4a3151['from'],_0x4a3151[_0x4045c9(0x13a)],{'success':![],'error':_0x4045c9(0x141)},_0x4a3151[_0x4045c9(0x185)]);}else _0x4a3151['command']==='dismissAutomation'&&(this['log'][_0x4045c9(0x1bb)](_0x4045c9(0x178)),await this[_0x4045c9(0xc1)](_0x4045c9(0x10e),{'val':![],'ack':!![]}),await this[_0x4045c9(0xc1)]('analysis.automation.description',{'val':'','ack':!![]}),this[_0x4045c9(0x228)](_0x4a3151[_0x4045c9(0x21d)],_0x4a3151[_0x4045c9(0x13a)],{'success':!![]},_0x4a3151[_0x4045c9(0x185)]));}}}}}}}}}}}if(require[a0_0x356808(0x12b)]!==module)module[a0_0x356808(0xfb)]=_0x2453a3=>new CogniLiving(_0x2453a3);else new CogniLiving();