const a0_0x1a3bd1=a0_0x1137;(function(_0x2ad8a4,_0x4c833c){const _0x71dc8a=a0_0x1137,_0x2a34ed=_0x2ad8a4();while(!![]){try{const _0x337712=parseInt(_0x71dc8a(0x11e))/0x1*(-parseInt(_0x71dc8a(0x123))/0x2)+parseInt(_0x71dc8a(0xe4))/0x3*(-parseInt(_0x71dc8a(0xfe))/0x4)+-parseInt(_0x71dc8a(0xc9))/0x5*(parseInt(_0x71dc8a(0x100))/0x6)+parseInt(_0x71dc8a(0x105))/0x7+-parseInt(_0x71dc8a(0xbd))/0x8*(-parseInt(_0x71dc8a(0x13f))/0x9)+parseInt(_0x71dc8a(0x124))/0xa*(-parseInt(_0x71dc8a(0x140))/0xb)+parseInt(_0x71dc8a(0xf5))/0xc*(parseInt(_0x71dc8a(0x9b))/0xd);if(_0x337712===_0x4c833c)break;else _0x2a34ed['push'](_0x2a34ed['shift']());}catch(_0x42e0fc){_0x2a34ed['push'](_0x2a34ed['shift']());}}}(a0_0x2686,0x5d537));const a0_0x29fe34=(function(){let _0x4358fb=!![];return function(_0x397048,_0x4df8ca){const _0xe5d3c0=_0x4358fb?function(){const _0x16e349=a0_0x1137;if(_0x4df8ca){const _0x59f97e=_0x4df8ca[_0x16e349(0xb8)](_0x397048,arguments);return _0x4df8ca=null,_0x59f97e;}}:function(){};return _0x4358fb=![],_0xe5d3c0;};}()),a0_0x419ad7=a0_0x29fe34(this,function(){const _0x517773=a0_0x1137;return a0_0x419ad7['toString']()['search'](_0x517773(0x14e))[_0x517773(0xb4)]()[_0x517773(0x9e)](a0_0x419ad7)['search']('(((.+)+)+)+$');});function a0_0x2686(){const _0x30da38=['getEnums','Activity-Level','loadSystemMode','Daten\x20nicht\x20verfÃ¼gbar','SET_TOPOLOGY','Sec-Training\x20started...','sensorLastValues','enum','genAI','setStateAsync','updateHealthVector','geminiApiKey','minDaysForBaseline','onStateChange','isGracePeriodActive','automation.triggerAction','NORMAL','ANALYZE_GAIT','_calName','analysis.health.todayVector','getTime','27aLtlWd','467566mugjcb','isProVersion','Adapter','text','activityLevel','stopService','devices','system.adapter.','config','find','timestamp','sendMorningBriefing','notifyTelegramInstance','Keine\x20Antwort\x20von\x20Gemini','(((.+)+)+)+$','triggerBriefing','sendTo','log','analysis.training.triggerComfort','exitTimer','SYSTEM_MODES','triggerDailyDigest','checkWifiPresence','apiKey','endsWith','startService','response','onUnload','debug','./lib/scanner','info','./lib/scheduler','object','getState','notifyTelegramEnabled','ltmJob','analysis.training.status','forEach','initZombies','getOutsideTemperatureNumeric','bind','testContext','updateTopology','Gesendet','getForeignObjectsAsync','checkAndInstall','300703BDHoAn','Verbunden','testApiKey','constructor','floor','setupModeResetScheduler','ready','communicate.request','message','split','briefingJob','analysis.training.triggerTopology','isArray','TRAIN_SECURITY','command','length','checkLicense','LTM.dailyDigests','runAutopilot','executeAutomationAction','Gemini\x20Init\x20Error:\x20','online','sendNotification','Standard','system.mode','toString','geminiModel','subscribeForeignStatesAsync','inactivityThresholdHours','apply','common','setupLtmScheduler','dailyDigests','send','311248qOKuMf','enum.functions.*','runPythonHealthCheck','analysisTimer','join','abortExitTimer','cancel','rawEventLog','./lib/ai_agent','cogni-living\x20adapter\x20starting\x20(v','./lib/setup','instance','3170xkTyYW','@iobroker/adapter-core','triggerEnergyPrediction','scanForDevices','val','onReady','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','.communicate.request','fill','keys','analysis.training.triggerEnergy','initHistory','presenceDevices',')\x20-\x20Phase\x20C\x20(Hardened)','slice','calendarName','analysis.automation.autoApply','Kein\x20Wetter-Adapter','createAllObjects','getForeignStateAsync','processSensorEvent','Kein\x20Kalender-Adapter','analysis.trigger','eventHistory','parse','setState','testNotification','969162qlNgQV','setupBriefingScheduler','Aktiv\x20(','motion','error','createDailyDigest','enum.rooms.*','pop','onMessage','callback','runBaselineDriftAnalysis','getGenerativeModel','Verbindung\x20erfolgreich!','stringify','systemConfig','analysis.automation.triggerAction','modeResetJob','660GHsCUL','includes','analysisHistory','getStateAsync','exports','analysis.training.triggerSecurity','setPresence','SYSTEM_DP_MODE','values','4gFqoSI','dependencyInstallInProgress','1890uzbnsW','triggerGaitAnalysis','weatherInstance','analysis.topology.structure','LTM.trainingData.sequences','668738vikZtH','LTM.rawEventLog','temperature','sort','scanDevices','getCalendarNames','ack','ANALYZE_TREND','models/gemini-flash-latest','getForeignObjectAsync','currentSystemMode','analysisInterval','getOverviewData','telegram','calendarInstance','isPresent','getHours','system.presenceWho','name','from','type','exitGraceTimer','TRAIN_HEALTH','./lib/installer','subscribeStates','3sHyXTt','\x20Tage)','Lernphase\x20(','driftAnalysisTimer','initSystemConfig','329612UfzJIS','20WymPwe','location','cogni-living','generateContent','push','getLtmData'];a0_0x2686=function(){return _0x30da38;};return a0_0x2686();}function a0_0x1137(_0x4bf5f2,_0x35d96e){const _0x40c60d=a0_0x2686();return a0_0x1137=function(_0x419ad7,_0x29fe34){_0x419ad7=_0x419ad7-0x9a;let _0x26864e=_0x40c60d[_0x419ad7];return _0x26864e;},a0_0x1137(_0x4bf5f2,_0x35d96e);}a0_0x419ad7();'use strict';const utils=require(a0_0x1a3bd1(0xca)),{GoogleGenerativeAI}=require('@google/generative-ai'),installer=require(a0_0x1a3bd1(0x11c)),scanner=require(a0_0x1a3bd1(0x15d)),schedulers=require(a0_0x1a3bd1(0x15f)),topology=require('./lib/topology'),setup=require(a0_0x1a3bd1(0xc7)),recorder=require('./lib/recorder'),pythonBridge=require('./lib/python_bridge'),aiAgent=require(a0_0x1a3bd1(0xc5)),deadMan=require('./lib/dead_man'),GEMINI_MODEL=a0_0x1a3bd1(0x10d),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x1a3bd1(0x142)]{constructor(_0x377951){const _0x5f3502=a0_0x1a3bd1;super({..._0x377951,'name':_0x5f3502(0x126)}),this['eventHistory']=[],this[_0x5f3502(0xf7)]=[],this[_0x5f3502(0xc4)]=[],this[_0x5f3502(0xbb)]=[],this[_0x5f3502(0x130)]={},this[_0x5f3502(0xf2)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x5f3502(0x114)]=!![],this[_0x5f3502(0x153)]=null,this[_0x5f3502(0x11a)]=null,this[_0x5f3502(0x138)]=![],this[_0x5f3502(0x132)]=null,this[_0x5f3502(0xb5)]=null,this['currentSystemMode']=setup[_0x5f3502(0x154)]['NORMAL'],this['isProVersion']=![],this['lastAlertState']=![],this[_0x5f3502(0xc0)]=null,this['ltmJob']=null,this[_0x5f3502(0xf4)]=null,this[_0x5f3502(0x121)]=null,this[_0x5f3502(0xa5)]=null,this[_0x5f3502(0xff)]=![],this['on'](_0x5f3502(0xa1),this[_0x5f3502(0xce)][_0x5f3502(0x168)](this)),this['on']('stateChange',this['onStateChange'][_0x5f3502(0x168)](this)),this['on']('unload',this[_0x5f3502(0x15b)][_0x5f3502(0x168)](this)),this['on'](_0x5f3502(0xa3),this[_0x5f3502(0xec)][_0x5f3502(0x168)](this));}async['onReady'](){const _0x252213=a0_0x1a3bd1;this[_0x252213(0x151)]['info'](_0x252213(0xc6)+this['version']+_0x252213(0xd6));if(!installer[_0x252213(0x9a)](this,()=>this['startSystem']()))return;}async['startSystem'](){const _0x2778e8=a0_0x1a3bd1;await setup[_0x2778e8(0x166)](this);try{this[_0x2778e8(0x141)]=await setup[_0x2778e8(0xab)](this[_0x2778e8(0x148)]['licenseKey']);}catch(_0x31bf74){}if(!this[_0x2778e8(0x148)][_0x2778e8(0xb7)]||this[_0x2778e8(0x148)][_0x2778e8(0xb7)]<0.1)this[_0x2778e8(0x148)][_0x2778e8(0xb7)]=0xc;await setup[_0x2778e8(0xd4)](this),await setup[_0x2778e8(0x122)](this);if(this[_0x2778e8(0x148)][_0x2778e8(0x135)])try{this[_0x2778e8(0x132)]=new GoogleGenerativeAI(this[_0x2778e8(0x148)]['geminiApiKey']),this[_0x2778e8(0xb5)]=this['genAI']['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x2778e8(0x151)][_0x2778e8(0x15e)]('Gemini\x20AI\x20initialized.');}catch(_0xf6a5c9){this[_0x2778e8(0x151)][_0x2778e8(0xe8)](_0x2778e8(0xaf)+_0xf6a5c9[_0x2778e8(0xa3)]);}await setup[_0x2778e8(0xdb)](this),await this[_0x2778e8(0x12c)]();try{const _0x5967c2=await this['getStateAsync'](_0x2778e8(0x106));if(_0x5967c2&&_0x5967c2[_0x2778e8(0xcd)])this[_0x2778e8(0xc4)]=JSON[_0x2778e8(0xe1)](_0x5967c2[_0x2778e8(0xcd)]);}catch(_0x171d4d){this['rawEventLog']=[];}try{const _0x759519=await this[_0x2778e8(0xf8)](_0x2778e8(0xac));if(_0x759519&&_0x759519['val'])this['dailyDigests']=JSON[_0x2778e8(0xe1)](_0x759519[_0x2778e8(0xcd)]);}catch(_0xa13c8e){this[_0x2778e8(0xbb)]=[];}const _0x1803bd=this['dailyDigests']['length']>=(this[_0x2778e8(0x148)]['minDaysForBaseline']||0x7)?_0x2778e8(0xe6)+this[_0x2778e8(0xbb)]['length']+_0x2778e8(0x11f):_0x2778e8(0x120)+this[_0x2778e8(0xbb)][_0x2778e8(0xaa)]+'/'+(this['config'][_0x2778e8(0x136)]||0x7)+')';await this[_0x2778e8(0x133)]('LTM.baselineStatus',{'val':_0x1803bd,'ack':!![]}),this[_0x2778e8(0x11d)]('analysis.trigger'),this[_0x2778e8(0x11d)]('LTM.triggerDailyDigest'),this[_0x2778e8(0x11d)](_0x2778e8(0xb3)),this[_0x2778e8(0x11d)]('analysis.triggerBriefing'),this['subscribeStates'](_0x2778e8(0xf3)),this[_0x2778e8(0x11d)](_0x2778e8(0xd9)),this[_0x2778e8(0x11d)](_0x2778e8(0xfa)),this[_0x2778e8(0x11d)]('analysis.training.triggerHealth'),this[_0x2778e8(0x11d)](_0x2778e8(0xd3)),this[_0x2778e8(0x11d)]('analysis.training.triggerComfort'),this['subscribeStates'](_0x2778e8(0xa6));const _0xd7d957=this[_0x2778e8(0x148)][_0x2778e8(0x146)];if(_0xd7d957)for(const _0x56cff8 of _0xd7d957){await this[_0x2778e8(0xb6)](_0x56cff8['id']);}const _0x429218=this[_0x2778e8(0x148)][_0x2778e8(0xd5)];if(_0x429218)for(const _0x567c00 of _0x429218){await this[_0x2778e8(0xb6)](_0x567c00);}if(this[_0x2778e8(0x148)][_0x2778e8(0x162)]&&this['config']['notifyTelegramInstance'])await this['subscribeForeignStatesAsync'](this[_0x2778e8(0x148)][_0x2778e8(0x14c)]+_0x2778e8(0xd0));setTimeout(()=>this[_0x2778e8(0x156)](),0x1388);if(this[_0x2778e8(0xc0)])clearInterval(this[_0x2778e8(0xc0)]);const _0x223a21=this['config'][_0x2778e8(0x110)]||0xf;_0x223a21>0x0&&(this['analysisTimer']=setInterval(()=>{const _0x50d6b8=_0x2778e8;this[_0x50d6b8(0xad)]();},_0x223a21*0x3c*0x3e8)),schedulers[_0x2778e8(0xba)](this,()=>aiAgent[_0x2778e8(0xe9)](this,pythonBridge)),schedulers[_0x2778e8(0xa0)](this),schedulers['setupDriftAnalysisScheduler'](this,()=>aiAgent[_0x2778e8(0xee)](this)),schedulers[_0x2778e8(0xe5)](this,()=>aiAgent[_0x2778e8(0x14b)](this)),pythonBridge[_0x2778e8(0x159)](this,installer['PYTHON_EXE']),setTimeout(async()=>{const _0x5c1f17=_0x2778e8;await topology[_0x5c1f17(0x16a)](this);try{const _0x1089c0=await this[_0x5c1f17(0xf8)](_0x5c1f17(0x103));if(_0x1089c0&&_0x1089c0[_0x5c1f17(0xcd)])pythonBridge['send'](this,_0x5c1f17(0x12e),JSON[_0x5c1f17(0xe1)](_0x1089c0[_0x5c1f17(0xcd)]));}catch(_0x3f88c2){}this[_0x5c1f17(0xbf)](),this[_0x5c1f17(0x101)](),this[_0x5c1f17(0xcb)](),this['updateHealthVector']();},0x1388);}['onUnload'](_0x286a9f){const _0x5e8297=a0_0x1a3bd1;if(this[_0x5e8297(0xc0)])clearInterval(this['analysisTimer']);if(this[_0x5e8297(0x121)])clearInterval(this[_0x5e8297(0x121)]);if(this[_0x5e8297(0x163)])this[_0x5e8297(0x163)][_0x5e8297(0xc3)]();if(this[_0x5e8297(0xf4)])this[_0x5e8297(0xf4)][_0x5e8297(0xc3)]();if(this['briefingJob'])this[_0x5e8297(0xa5)][_0x5e8297(0xc3)]();recorder['abortExitTimer'](this),pythonBridge[_0x5e8297(0x145)](this),_0x286a9f();}async[a0_0x1a3bd1(0x137)](_0xbd54c9,_0x5e56bf){const _0x2afcd7=a0_0x1a3bd1;if(!_0x5e56bf||this[_0x2afcd7(0xff)])return;if(_0xbd54c9[_0x2afcd7(0xf6)](_0x2afcd7(0x112))&&_0xbd54c9[_0x2afcd7(0x158)](_0x2afcd7(0xa2))&&_0x5e56bf[_0x2afcd7(0xcd)])return;if(_0xbd54c9===this['namespace']+'.system.mode'){if(_0x5e56bf[_0x2afcd7(0xcd)]&&Object[_0x2afcd7(0xfd)](setup['SYSTEM_MODES'])[_0x2afcd7(0xf6)](_0x5e56bf[_0x2afcd7(0xcd)])){this[_0x2afcd7(0x10f)]=_0x5e56bf['val'];if(_0x5e56bf['val']===setup[_0x2afcd7(0x154)]['VACATION'])await recorder[_0x2afcd7(0xfb)](this,![]);else await recorder[_0x2afcd7(0xfb)](this,!![]);}if(!_0x5e56bf[_0x2afcd7(0x10b)])this['setState'](_0xbd54c9,{'val':this[_0x2afcd7(0x10f)],'ack':!![]});return;}if(!_0x5e56bf[_0x2afcd7(0x10b)]){_0xbd54c9[_0x2afcd7(0xf6)](_0x2afcd7(0xdf))&&_0x5e56bf[_0x2afcd7(0xcd)]&&(this[_0x2afcd7(0xe2)](_0xbd54c9,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this));if(_0xbd54c9['includes'](_0x2afcd7(0x155))&&_0x5e56bf[_0x2afcd7(0xcd)]){this[_0x2afcd7(0xe2)](_0xbd54c9,{'val':![],'ack':!![]});if(this[_0x2afcd7(0x141)])aiAgent['createDailyDigest'](this,pythonBridge);}_0xbd54c9['includes'](_0x2afcd7(0x14f))&&_0x5e56bf[_0x2afcd7(0xcd)]&&(this[_0x2afcd7(0xe2)](_0xbd54c9,{'val':![],'ack':!![]}),aiAgent[_0x2afcd7(0x14b)](this));_0xbd54c9['includes'](_0x2afcd7(0x139))&&_0x5e56bf[_0x2afcd7(0xcd)]&&(this[_0x2afcd7(0xe2)](_0xbd54c9,{'val':![],'ack':!![]}),aiAgent[_0x2afcd7(0xae)](this));if(_0xbd54c9[_0x2afcd7(0xf6)](_0x2afcd7(0xfa))&&_0x5e56bf['val']){this[_0x2afcd7(0xe2)](_0xbd54c9,{'val':![],'ack':!![]});if(this[_0x2afcd7(0x141)])try{const _0x5c4c4c=await this[_0x2afcd7(0xf8)](_0x2afcd7(0x104));if(_0x5c4c4c&&_0x5c4c4c[_0x2afcd7(0xcd)]){const _0x35a60a=JSON[_0x2afcd7(0xe1)](_0x5c4c4c['val']);this[_0x2afcd7(0x133)](_0x2afcd7(0x164),{'val':_0x2afcd7(0x12f),'ack':!![]}),pythonBridge[_0x2afcd7(0xbc)](this,_0x2afcd7(0xa8),{'sequences':_0x35a60a});}}catch(_0x4e7b66){}}if(_0xbd54c9['includes']('analysis.training.triggerHealth')&&_0x5e56bf[_0x2afcd7(0xcd)]){this['setState'](_0xbd54c9,{'val':![],'ack':!![]});if(this[_0x2afcd7(0x141)])try{const _0x5c5670=await this['getStateAsync']('LTM.dailyDigests');if(_0x5c5670&&_0x5c5670[_0x2afcd7(0xcd)])pythonBridge[_0x2afcd7(0xbc)](this,_0x2afcd7(0x11b),{'digests':JSON[_0x2afcd7(0xe1)](_0x5c5670[_0x2afcd7(0xcd)])});}catch(_0x2865d0){}}if(_0xbd54c9['includes'](_0x2afcd7(0xd3))&&_0x5e56bf[_0x2afcd7(0xcd)]){this[_0x2afcd7(0xe2)](_0xbd54c9,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x59cab1=await this[_0x2afcd7(0xf8)]('LTM.trainingData.thermodynamics');if(_0x59cab1&&_0x59cab1['val'])pythonBridge[_0x2afcd7(0xbc)](this,'TRAIN_ENERGY',{'points':JSON[_0x2afcd7(0xe1)](_0x59cab1[_0x2afcd7(0xcd)])});}catch(_0xa12456){}}if(_0xbd54c9[_0x2afcd7(0xf6)](_0x2afcd7(0x152))&&_0x5e56bf['val']){this[_0x2afcd7(0xe2)](_0xbd54c9,{'val':![],'ack':!![]});if(this[_0x2afcd7(0x141)])try{const _0x49abe5=await this[_0x2afcd7(0xf8)](_0x2afcd7(0x106));if(_0x49abe5&&_0x49abe5['val'])pythonBridge[_0x2afcd7(0xbc)](this,'TRAIN_COMFORT',{'events':JSON[_0x2afcd7(0xe1)](_0x49abe5[_0x2afcd7(0xcd)])});}catch(_0x454a91){}}_0xbd54c9[_0x2afcd7(0xf6)](_0x2afcd7(0xa6))&&_0x5e56bf[_0x2afcd7(0xcd)]&&(this['setState'](_0xbd54c9,{'val':![],'ack':!![]}),topology[_0x2afcd7(0x16a)](this));return;}if(this[_0x2afcd7(0x148)][_0x2afcd7(0xd5)]&&this[_0x2afcd7(0x148)][_0x2afcd7(0xd5)][_0x2afcd7(0xf6)](_0xbd54c9)){await this[_0x2afcd7(0x156)]();return;}const _0x4810a1=(this[_0x2afcd7(0x148)][_0x2afcd7(0x146)]||[])[_0x2afcd7(0x149)](_0x5cb692=>_0x5cb692['id']===_0xbd54c9);if(_0x4810a1){const _0x10f0b4=await recorder[_0x2afcd7(0xdd)](this,_0xbd54c9,_0x5e56bf,_0x4810a1);_0x10f0b4&&_0x10f0b4[_0x2afcd7(0x119)]===_0x2afcd7(0xe7)&&_0x10f0b4[_0x2afcd7(0x125)]&&this[_0x2afcd7(0x141)]&&deadMan['updateLocation'](this,_0x10f0b4[_0x2afcd7(0x125)]);}}async[a0_0x1a3bd1(0xec)](_0x417a92){const _0x282233=a0_0x1a3bd1;if(typeof _0x417a92===_0x282233(0x160)&&_0x417a92[_0x282233(0xa3)]){if(_0x417a92[_0x282233(0xa9)]===_0x282233(0x9d))try{const _0x2924c0=_0x417a92[_0x282233(0xa3)][_0x282233(0x157)];if(!_0x2924c0)throw new Error('Kein\x20API\x20Key\x20Ã¼bergeben');const _0x4e9f30=new GoogleGenerativeAI(_0x2924c0),_0x325865=_0x4e9f30[_0x282233(0xef)]({'model':GEMINI_MODEL}),_0x2c2894=await _0x325865[_0x282233(0x127)]('Test'),_0x22ab37=await _0x2c2894[_0x282233(0x15a)];if(_0x22ab37[_0x282233(0x143)]())this[_0x282233(0x150)](_0x417a92[_0x282233(0x118)],_0x417a92[_0x282233(0xa9)],{'success':!![],'message':_0x282233(0xf0)},_0x417a92[_0x282233(0xed)]);else throw new Error(_0x282233(0x14d));}catch(_0x537e3e){this[_0x282233(0x150)](_0x417a92[_0x282233(0x118)],_0x417a92[_0x282233(0xa9)],{'success':![],'message':_0x537e3e['message']},_0x417a92[_0x282233(0xed)]);}else{if(_0x417a92[_0x282233(0xa9)]===_0x282233(0x109))try{const _0x440c61=await scanner[_0x282233(0xcc)](this,_0x417a92[_0x282233(0xa3)]||{});this[_0x282233(0x150)](_0x417a92[_0x282233(0x118)],_0x417a92[_0x282233(0xa9)],{'success':!![],'devices':_0x440c61},_0x417a92[_0x282233(0xed)]);}catch(_0xf99a8b){this[_0x282233(0x150)](_0x417a92[_0x282233(0x118)],_0x417a92[_0x282233(0xa9)],{'success':![],'error':_0xf99a8b[_0x282233(0xa3)]},_0x417a92[_0x282233(0xed)]);}else{if(_0x417a92[_0x282233(0xa9)]==='updateTopologyMatrix')try{const {matrix:_0x5ab17}=_0x417a92[_0x282233(0xa3)],_0x3561a8=await this[_0x282233(0xf8)]('analysis.topology.structure');if(_0x3561a8&&_0x3561a8[_0x282233(0xcd)]){const _0x2732be=JSON[_0x282233(0xe1)](_0x3561a8[_0x282233(0xcd)]);_0x2732be['matrix']=_0x5ab17,_0x2732be['updated']=Date['now'](),await this[_0x282233(0x133)](_0x282233(0x103),{'val':JSON[_0x282233(0xf1)](_0x2732be),'ack':!![]}),pythonBridge[_0x282233(0xbc)](this,'SET_TOPOLOGY',_0x2732be);}this[_0x282233(0x150)](_0x417a92['from'],_0x417a92[_0x282233(0xa9)],{'success':!![]},_0x417a92[_0x282233(0xed)]);}catch(_0x182da4){this[_0x282233(0x151)]['error'](_0x182da4);}else{if(_0x417a92[_0x282233(0xa9)]===_0x282233(0x129))this['sendTo'](_0x417a92[_0x282233(0x118)],_0x417a92[_0x282233(0xa9)],{'success':!![],'dailyDigests':this[_0x282233(0xbb)]||[],'analysisHistory':this[_0x282233(0xf7)]||[]},_0x417a92[_0x282233(0xed)]);else{if(_0x417a92[_0x282233(0xa9)]===_0x282233(0x111)){const _0x305c14=this[_0x282233(0xbb)]['length'],_0x1134b6=new Array(0x18)[_0x282233(0xd1)](0x0),_0x5bccff=new Date()['setHours'](0x0,0x0,0x0,0x0);this['eventHistory']&&this[_0x282233(0xe0)]['forEach'](_0x244f6d=>{const _0x4ca4ce=_0x282233;if(_0x244f6d[_0x4ca4ce(0x14a)]>=_0x5bccff){const _0x494012=new Date(_0x244f6d[_0x4ca4ce(0x14a)])[_0x4ca4ce(0x115)]();if(_0x494012>=0x0&&_0x494012<0x18)_0x1134b6[_0x494012]++;}}),this[_0x282233(0x150)](_0x417a92[_0x282233(0x118)],_0x417a92[_0x282233(0xa9)],{'success':!![],'eventHistory':this[_0x282233(0xe0)][_0x282233(0xd7)](0x0,0xf),'stats':{'digestCount':_0x305c14,'isPresent':this[_0x282233(0x114)],'hourlyActivity':_0x1134b6},'automation':{'detected':![]}},_0x417a92['callback']);}else{if(_0x417a92[_0x282233(0xa9)]===_0x282233(0x12a)){const _0x34f480=await this[_0x282233(0x16c)](_0x282233(0xbe),_0x282233(0x131)),_0x3eabf4=[];if(_0x34f480)for(const _0x22ce24 in _0x34f480){const _0x5993d1=_0x34f480[_0x22ce24],_0x2459a4=(_0x5993d1[_0x282233(0xb9)]&&typeof _0x5993d1[_0x282233(0xb9)]['name']===_0x282233(0x160)?_0x5993d1[_0x282233(0xb9)]['name']['de']:_0x5993d1[_0x282233(0xb9)][_0x282233(0x117)])||_0x5993d1[_0x282233(0xb9)][_0x282233(0x117)];_0x3eabf4[_0x282233(0x128)]({'id':_0x22ce24,'name':_0x2459a4});}const _0x5787bd=await this['getForeignObjectsAsync'](_0x282233(0xea),_0x282233(0x131)),_0xdbfd1f=[];if(_0x5787bd)for(const _0x2cd6c9 in _0x5787bd){const _0x5a9ef4=_0x5787bd[_0x2cd6c9],_0x1314f4=(_0x5a9ef4[_0x282233(0xb9)]&&typeof _0x5a9ef4[_0x282233(0xb9)]['name']===_0x282233(0x160)?_0x5a9ef4[_0x282233(0xb9)][_0x282233(0x117)]['de']:_0x5a9ef4[_0x282233(0xb9)][_0x282233(0x117)])||_0x2cd6c9[_0x282233(0xa4)]('.')[_0x282233(0xeb)]();_0xdbfd1f['push'](_0x1314f4);}this[_0x282233(0x150)](_0x417a92[_0x282233(0x118)],_0x417a92[_0x282233(0xa9)],{'success':!![],'enums':_0x3eabf4,'rooms':_0xdbfd1f},_0x417a92['callback']);}else{if(_0x417a92[_0x282233(0xa9)]===_0x282233(0x169))try{let _0x4b1e84=_0x282233(0xda),_0x2d9319=_0x282233(0xde);if(this[_0x282233(0x148)][_0x282233(0x102)]){const _0x328867=await recorder[_0x282233(0x167)](this);_0x4b1e84=_0x328867!==null?_0x328867+'Â°C':_0x282233(0x12d);}if(this[_0x282233(0x148)][_0x282233(0x113)]){const _0x265b3f=await this[_0x282233(0x10e)](_0x282233(0x147)+this[_0x282233(0x148)][_0x282233(0x113)]);_0x2d9319=_0x265b3f?_0x282233(0x9c):'Instanz\x20nicht\x20gefunden';}this[_0x282233(0x150)](_0x417a92[_0x282233(0x118)],_0x417a92[_0x282233(0xa9)],{'success':!![],'weather':_0x4b1e84,'calendar':_0x2d9319},_0x417a92[_0x282233(0xed)]);}catch(_0x37d890){this[_0x282233(0x150)](_0x417a92[_0x282233(0x118)],_0x417a92[_0x282233(0xa9)],{'success':![],'error':_0x37d890[_0x282233(0xa3)]},_0x417a92['callback']);}else{if(_0x417a92[_0x282233(0xa9)]===_0x282233(0x10a))try{const _0x16c543=_0x417a92[_0x282233(0xa3)][_0x282233(0xc8)],_0xd74f90=await this['getForeignStateAsync'](_0x16c543+'.data.table');let _0x4f975a=[];if(_0xd74f90&&_0xd74f90[_0x282233(0xcd)]){const _0x22fe9a=JSON[_0x282233(0xe1)](_0xd74f90[_0x282233(0xcd)]),_0x10eb2d=new Set();Array[_0x282233(0xa7)](_0x22fe9a)&&_0x22fe9a[_0x282233(0x165)](_0x191813=>{const _0x4c8f09=_0x282233;if(_0x191813[_0x4c8f09(0x13c)])_0x10eb2d['add'](_0x191813[_0x4c8f09(0x13c)]);else{if(_0x191813[_0x4c8f09(0xd8)])_0x10eb2d['add'](_0x191813[_0x4c8f09(0xd8)]);}}),_0x4f975a=Array['from'](_0x10eb2d)[_0x282233(0x108)]();}if(_0x4f975a['length']===0x0)_0x4f975a=[_0x282233(0xb2)];this['sendTo'](_0x417a92[_0x282233(0x118)],_0x417a92[_0x282233(0xa9)],{'success':!![],'names':_0x4f975a},_0x417a92['callback']);}catch(_0x231c32){this[_0x282233(0x150)](_0x417a92[_0x282233(0x118)],_0x417a92[_0x282233(0xa9)],{'success':![],'error':_0x231c32[_0x282233(0xa3)]},_0x417a92[_0x282233(0xed)]);}else{if(_0x417a92[_0x282233(0xa9)]===_0x282233(0xe3))try{await setup[_0x282233(0xb1)](this,'ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.',![],![]),this[_0x282233(0x150)](_0x417a92[_0x282233(0x118)],_0x417a92[_0x282233(0xa9)],{'success':!![],'message':_0x282233(0x16b)},_0x417a92[_0x282233(0xed)]);}catch(_0x3c7d09){this[_0x282233(0x151)][_0x282233(0xe8)]('Notification\x20Test\x20Failed:\x20'+_0x3c7d09[_0x282233(0xa3)]),this[_0x282233(0x150)](_0x417a92[_0x282233(0x118)],_0x417a92[_0x282233(0xa9)],{'success':![],'message':'Fehler:\x20'+_0x3c7d09['message']},_0x417a92[_0x282233(0xed)]);}}}}}}}}}}}async[a0_0x1a3bd1(0x12c)](){const _0xf0fe49=a0_0x1a3bd1;try{const _0x22f11d=await this[_0xf0fe49(0xf8)](setup[_0xf0fe49(0xfc)]);_0x22f11d&&_0x22f11d[_0xf0fe49(0xcd)]&&Object['values'](setup['SYSTEM_MODES'])[_0xf0fe49(0xf6)](_0x22f11d['val'])?this[_0xf0fe49(0x10f)]=_0x22f11d['val']:(this[_0xf0fe49(0x10f)]=setup[_0xf0fe49(0x154)][_0xf0fe49(0x13a)],await this[_0xf0fe49(0x133)](setup[_0xf0fe49(0xfc)],{'val':setup[_0xf0fe49(0x154)][_0xf0fe49(0x13a)],'ack':!![]}));}catch(_0x1989b5){this[_0xf0fe49(0x10f)]=setup[_0xf0fe49(0x154)][_0xf0fe49(0x13a)];}}async[a0_0x1a3bd1(0x156)](){const _0x182a40=a0_0x1a3bd1;try{const _0x280e4b=this[_0x182a40(0x148)]['presenceDevices']||[];let _0x45549f=![];const _0x502e05=[];for(const _0x598163 of _0x280e4b){try{const _0x5b3408=await this[_0x182a40(0xdc)](_0x598163);_0x5b3408&&(_0x5b3408[_0x182a40(0xcd)]===!![]||_0x5b3408[_0x182a40(0xcd)]===_0x182a40(0xb0)||_0x5b3408[_0x182a40(0xcd)]===0x1)&&(_0x45549f=!![],_0x502e05['push'](_0x598163));}catch(_0x4733ee){}}return await this[_0x182a40(0x133)](_0x182a40(0x116),{'val':_0x502e05[_0x182a40(0xc1)](',\x20'),'ack':!![]}),_0x45549f&&(this[_0x182a40(0x153)]&&(this[_0x182a40(0x151)][_0x182a40(0x15e)]('WiFi\x20Presence\x20detected.'),recorder[_0x182a40(0xc2)](this)),!this[_0x182a40(0x114)]&&this[_0x182a40(0x10f)]===setup[_0x182a40(0x154)][_0x182a40(0x13a)]&&await recorder[_0x182a40(0xfb)](this,!![])),_0x45549f;}catch(_0xa0bc1b){return![];}}async[a0_0x1a3bd1(0xad)](){const _0x427195=a0_0x1a3bd1;this[_0x427195(0x151)][_0x427195(0x15c)](_0x427195(0xcf)),await aiAgent['runGeminiAnalysis'](this),this['updateHealthVector'](),this[_0x427195(0x101)](),this[_0x427195(0xcb)]();}[a0_0x1a3bd1(0x101)](){const _0x4492bd=a0_0x1a3bd1;if(!this[_0x4492bd(0x141)])return;try{this[_0x4492bd(0x161)]('LTM.trainingData.sequences',(_0x52c357,_0x1dcd69)=>{const _0x3feb90=_0x4492bd;_0x1dcd69&&_0x1dcd69['val']&&pythonBridge['send'](this,_0x3feb90(0x13b),{'sequences':JSON[_0x3feb90(0xe1)](_0x1dcd69[_0x3feb90(0xcd)])});});}catch(_0x3b57ed){}}async['triggerEnergyPrediction'](){const _0x8c9d8d=a0_0x1a3bd1;if(!this[_0x8c9d8d(0x141)])return;try{const _0x5ce5f0=await recorder[_0x8c9d8d(0x167)](this);if(_0x5ce5f0===null)return;const _0x1b9db3={},_0x1e2eb9=this[_0x8c9d8d(0x148)][_0x8c9d8d(0x146)]||[];for(const _0x557297 of _0x1e2eb9){if(_0x557297[_0x8c9d8d(0x119)]===_0x8c9d8d(0x107)&&_0x557297['location']){const _0x27eb43=this[_0x8c9d8d(0x130)][_0x557297['id']];if(_0x27eb43!==undefined)_0x1b9db3[_0x557297[_0x8c9d8d(0x125)]]=_0x27eb43;}}Object[_0x8c9d8d(0xd2)](_0x1b9db3)[_0x8c9d8d(0xaa)]>0x0&&pythonBridge[_0x8c9d8d(0xbc)](this,'PREDICT_ENERGY',{'current_temps':_0x1b9db3,'t_out':_0x5ce5f0});}catch(_0x3f12d6){}}[a0_0x1a3bd1(0x134)](){const _0x4ec946=a0_0x1a3bd1;if(!this[_0x4ec946(0xc4)]||this[_0x4ec946(0xc4)][_0x4ec946(0xaa)]===0x0)return;const _0x5cacd8=new Array(0x60)[_0x4ec946(0xd1)](0x0),_0x804231=new Date()['setHours'](0x0,0x0,0x0,0x0);this[_0x4ec946(0xc4)][_0x4ec946(0x165)](_0x3d0b7f=>{const _0x9b8847=_0x4ec946,_0x106e15=new Date(_0x3d0b7f['timestamp']);if(_0x106e15[_0x9b8847(0x13e)]()>=_0x804231){const _0x4e557f=_0x106e15[_0x9b8847(0x115)](),_0x142ee3=_0x106e15['getMinutes'](),_0x1a6e43=_0x4e557f*0x4+Math[_0x9b8847(0x9f)](_0x142ee3/0xf);if(_0x1a6e43>=0x0&&_0x1a6e43<0x60)_0x5cacd8[_0x1a6e43]++;}}),this[_0x4ec946(0x133)](_0x4ec946(0x13d),{'val':JSON[_0x4ec946(0xf1)](_0x5cacd8),'ack':!![]});}[a0_0x1a3bd1(0xbf)](){const _0x12fe6c=a0_0x1a3bd1;if(!this[_0x12fe6c(0xbb)]||this[_0x12fe6c(0xbb)]['length']<0x2)return;const _0x297ce5=this[_0x12fe6c(0xbb)]['map'](_0xeebf5f=>{const _0x9e9f8c=_0x12fe6c,_0x4c704f=(_0xeebf5f[_0x9e9f8c(0x144)]||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x4c704f]||0x32;});pythonBridge[_0x12fe6c(0xbc)](this,_0x12fe6c(0x10c),{'values':_0x297ce5,'tag':_0x12fe6c(0x12b)});}}if(require['main']!==module)module[a0_0x1a3bd1(0xf9)]=_0x256f00=>new CogniLiving(_0x256f00);else new CogniLiving();