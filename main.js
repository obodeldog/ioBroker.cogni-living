const a0_0x1f2e1b=a0_0x21f7;(function(_0x2ceb8f,_0x3f9160){const _0x15b5eb=a0_0x21f7,_0x11da15=_0x2ceb8f();while(!![]){try{const _0x4fb3d7=-parseInt(_0x15b5eb(0x157))/0x1+-parseInt(_0x15b5eb(0x143))/0x2*(parseInt(_0x15b5eb(0x1ae))/0x3)+parseInt(_0x15b5eb(0xef))/0x4+parseInt(_0x15b5eb(0x1b1))/0x5*(-parseInt(_0x15b5eb(0x148))/0x6)+parseInt(_0x15b5eb(0x18d))/0x7*(-parseInt(_0x15b5eb(0x12c))/0x8)+-parseInt(_0x15b5eb(0x10d))/0x9*(-parseInt(_0x15b5eb(0x131))/0xa)+parseInt(_0x15b5eb(0x178))/0xb*(parseInt(_0x15b5eb(0xfe))/0xc);if(_0x4fb3d7===_0x3f9160)break;else _0x11da15['push'](_0x11da15['shift']());}catch(_0x208d89){_0x11da15['push'](_0x11da15['shift']());}}}(a0_0x1db9,0x47de4));const a0_0x56a383=(function(){let _0x1b1984=!![];return function(_0x5876d3,_0x38eb1a){const _0x1098ce=_0x1b1984?function(){const _0x5c9b2e=a0_0x21f7;if(_0x38eb1a){const _0x330bde=_0x38eb1a[_0x5c9b2e(0x177)](_0x5876d3,arguments);return _0x38eb1a=null,_0x330bde;}}:function(){};return _0x1b1984=![],_0x1098ce;};}()),a0_0x3739fd=a0_0x56a383(this,function(){const _0x4d6a88=a0_0x21f7;return a0_0x3739fd[_0x4d6a88(0x14e)]()[_0x4d6a88(0x136)](_0x4d6a88(0x15c))[_0x4d6a88(0x14e)]()[_0x4d6a88(0x1b3)](a0_0x3739fd)[_0x4d6a88(0x136)](_0x4d6a88(0x15c));});a0_0x3739fd();function a0_0x21f7(_0x211671,_0x5f5845){const _0x20b06f=a0_0x1db9();return a0_0x21f7=function(_0x3739fd,_0x56a383){_0x3739fd=_0x3739fd-0xda;let _0x1db9a8=_0x20b06f[_0x3739fd];return _0x1db9a8;},a0_0x21f7(_0x211671,_0x5f5845);}'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x1f2e1b(0x1b4)),installer=require(a0_0x1f2e1b(0x132)),scanner=require(a0_0x1f2e1b(0xe4)),schedulers=require('./lib/scheduler'),topology=require(a0_0x1f2e1b(0xe0)),setup=require(a0_0x1f2e1b(0x181)),recorder=require(a0_0x1f2e1b(0x189)),pythonBridge=require('./lib/python_bridge'),aiAgent=require(a0_0x1f2e1b(0xe9)),deadMan=require('./lib/dead_man'),GEMINI_MODEL=a0_0x1f2e1b(0x196),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};function a0_0x1db9(){const _0x37cc39=['send','Sec-Training\x20started...','geminiModel','analysis.training.status','4808TUyPth',')\x20-\x20Phase\x20C\x20(Hardened)','setHours','length','checkLicense','4497690ypWNbw','./lib/installer','scanForDevices','LTM.triggerDailyDigest','forEach','search','SYSTEM_MODES','val','stopService','scanDevices','type','onMessage','onReady','dependencyInstallInProgress','VACATION','Gemini\x20AI\x20initialized.','stringify','Fehler:\x20','6hDUbMN','Gesendet','error','Activity-Level','.communicate.request','31986uZdjzU','map','common','system.adapter.','exitTimer','getState','toString','runPythonHealthCheck','TRAIN_ENERGY','split','name','pop','analysis.trigger','config','analysis.automation.triggerAction','207177nvFzLs','setupModeResetScheduler','debug','updateTopology','apiKey','(((.+)+)+)+$','Notification\x20Test\x20Failed:\x20','triggerBriefing','LTM.rawEventLog','Adapter','TRAIN_SECURITY','from','getOutsideTemperatureNumeric','timestamp','LTM.dailyDigests','values','subscribeForeignStatesAsync','driftAnalysisTimer','text','temperature','LTM.trainingData.thermodynamics','getGenerativeModel','telegram','LTM.trainingData.sequences','enum.rooms.*','isGracePeriodActive','join','command','info','location','parse','object','apply','473gezgdE','Test','_calName','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','updated','analysisHistory','fill','exitGraceTimer','find','./lib/setup','Kein\x20Wetter-Adapter','response','lastAlertState','includes','getLtmData','application/json','analysis.health.todayVector','./lib/recorder','sendNotification','minDaysForBaseline','ltmJob','2814iCornx','isProVersion','runGeminiAnalysis','subscribeStates','getForeignObjectAsync','notifyTelegramInstance','analysisInterval','SET_TOPOLOGY','communicate.request','models/gemini-flash-latest','Lernphase\x20(','setupDriftAnalysisScheduler','motion','analysis.training.triggerSecurity','abortExitTimer','checkAndInstall','onStateChange','geminiApiKey','PYTHON_EXE','loadSystemMode','.data.table','Gemini\x20Init\x20Error:\x20','NORMAL','modeResetJob','exports','getStateAsync','automation.triggerAction','analysis.training.triggerComfort','runBaselineDriftAnalysis','initHistory','now','cancel','generateContent','469323BVxpLQ','checkWifiPresence','setPresence','305EuetSQ','endsWith','constructor','@google/generative-ai','getMinutes','calendarName','floor','triggerGaitAnalysis','ANALYZE_TREND','processSensorEvent','currentSystemMode','sendMorningBriefing','./lib/topology','keys','sensorLastValues','dailyDigests','./lib/scanner','getForeignObjectsAsync','push','TRAIN_HEALTH','Instanz\x20nicht\x20gefunden','./lib/ai_agent','getHours','add','analysis.training.triggerEnergy','log','setState','1329372ibZIHv','.system.mode','executeAutomationAction','analysis.training.triggerTopology','updateHealthVector','bind','calendarInstance','slice','system.mode','initSystemConfig','runAutopilot','analysis.training.triggerHealth','unload','WiFi\x20Presence\x20detected.','SYSTEM_DP_MODE','210852JIznWb','analysisTimer','startSystem','sendTo','eventHistory','ANALYZE_GAIT','isPresent','testNotification','Daten\x20nicht\x20verfÃ¼gbar','setupBriefingScheduler','system.presenceWho','triggerEnergyPrediction','Verbindung\x20erfolgreich!','getEnums','getOverviewData','9YKaNjc','genAI','Standard','inactivityThresholdHours','getForeignStateAsync','onUnload','getCalendarNames','toLowerCase','Aktiv\x20(','version','LTM.baselineStatus','analysis.topology.structure','initZombies','updateTopologyMatrix','main','rawEventLog','systemConfig','sort','callback','setStateAsync','createDailyDigest','Kein\x20Kalender-Adapter','Verbunden','PREDICT_ENERGY','message','updateLocation','presenceDevices'];a0_0x1db9=function(){return _0x37cc39;};return a0_0x1db9();}class CogniLiving extends utils[a0_0x1f2e1b(0x160)]{constructor(_0x4dcbd2){const _0x277808=a0_0x1f2e1b;super({..._0x4dcbd2,'name':'cogni-living'}),this[_0x277808(0x102)]=[],this['analysisHistory']=[],this[_0x277808(0x11c)]=[],this[_0x277808(0xe3)]=[],this[_0x277808(0xe2)]={},this[_0x277808(0x11d)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x277808(0x104)]=!![],this[_0x277808(0x14c)]=null,this[_0x277808(0x17f)]=null,this[_0x277808(0x170)]=![],this['genAI']=null,this[_0x277808(0x12a)]=null,this[_0x277808(0xde)]=setup['SYSTEM_MODES']['NORMAL'],this['isProVersion']=![],this[_0x277808(0x184)]=![],this[_0x277808(0xff)]=null,this['ltmJob']=null,this[_0x277808(0x1a4)]=null,this[_0x277808(0x168)]=null,this['briefingJob']=null,this['dependencyInstallInProgress']=![],this['on']('ready',this[_0x277808(0x13d)][_0x277808(0xf4)](this)),this['on']('stateChange',this[_0x277808(0x19d)][_0x277808(0xf4)](this)),this['on'](_0x277808(0xfb),this[_0x277808(0x112)]['bind'](this)),this['on'](_0x277808(0x125),this[_0x277808(0x13c)][_0x277808(0xf4)](this));}async[a0_0x1f2e1b(0x13d)](){const _0x447e36=a0_0x1f2e1b;this[_0x447e36(0xed)]['info']('cogni-living\x20adapter\x20starting\x20(v'+this[_0x447e36(0x116)]+_0x447e36(0x12d));if(!installer[_0x447e36(0x19c)](this,()=>this[_0x447e36(0x100)]()))return;}async[a0_0x1f2e1b(0x100)](){const _0x5f07b=a0_0x1f2e1b;await setup[_0x5f07b(0x119)](this);try{this[_0x5f07b(0x18e)]=await setup[_0x5f07b(0x130)](this['config']['licenseKey']);}catch(_0x2b38ce){}if(!this[_0x5f07b(0x155)][_0x5f07b(0x110)]||this[_0x5f07b(0x155)]['inactivityThresholdHours']<0.1)this[_0x5f07b(0x155)][_0x5f07b(0x110)]=0xc;await setup[_0x5f07b(0x1aa)](this),await setup[_0x5f07b(0xf8)](this);if(this[_0x5f07b(0x155)]['geminiApiKey'])try{this['genAI']=new GoogleGenerativeAI(this[_0x5f07b(0x155)][_0x5f07b(0x19e)]),this['geminiModel']=this[_0x5f07b(0x10e)][_0x5f07b(0x16c)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x5f07b(0x187)}}),this[_0x5f07b(0xed)][_0x5f07b(0x173)](_0x5f07b(0x140));}catch(_0x23f9d){this[_0x5f07b(0xed)][_0x5f07b(0x145)](_0x5f07b(0x1a2)+_0x23f9d[_0x5f07b(0x125)]);}await setup['createAllObjects'](this),await this[_0x5f07b(0x1a0)]();try{const _0x48db02=await this['getStateAsync'](_0x5f07b(0x15f));if(_0x48db02&&_0x48db02['val'])this[_0x5f07b(0x11c)]=JSON[_0x5f07b(0x175)](_0x48db02[_0x5f07b(0x138)]);}catch(_0x1a9812){this[_0x5f07b(0x11c)]=[];}try{const _0x326852=await this['getStateAsync']('LTM.dailyDigests');if(_0x326852&&_0x326852['val'])this[_0x5f07b(0xe3)]=JSON['parse'](_0x326852[_0x5f07b(0x138)]);}catch(_0x494c39){this[_0x5f07b(0xe3)]=[];}const _0x50dca5=this[_0x5f07b(0xe3)][_0x5f07b(0x12f)]>=(this['config'][_0x5f07b(0x18b)]||0x7)?_0x5f07b(0x115)+this[_0x5f07b(0xe3)][_0x5f07b(0x12f)]+'\x20Tage)':_0x5f07b(0x197)+this[_0x5f07b(0xe3)][_0x5f07b(0x12f)]+'/'+(this['config'][_0x5f07b(0x18b)]||0x7)+')';await this[_0x5f07b(0x120)](_0x5f07b(0x117),{'val':_0x50dca5,'ack':!![]}),this[_0x5f07b(0x190)](_0x5f07b(0x154)),this[_0x5f07b(0x190)](_0x5f07b(0x134)),this[_0x5f07b(0x190)](_0x5f07b(0xf7)),this[_0x5f07b(0x190)]('analysis.triggerBriefing'),this['subscribeStates'](_0x5f07b(0x156)),this[_0x5f07b(0x190)]('analysis.automation.autoApply'),this[_0x5f07b(0x190)](_0x5f07b(0x19a)),this[_0x5f07b(0x190)](_0x5f07b(0xfa)),this[_0x5f07b(0x190)](_0x5f07b(0xec)),this[_0x5f07b(0x190)](_0x5f07b(0x1a8)),this[_0x5f07b(0x190)](_0x5f07b(0xf2));const _0x4e149a=this[_0x5f07b(0x155)]['devices'];if(_0x4e149a)for(const _0x452e71 of _0x4e149a){await this[_0x5f07b(0x167)](_0x452e71['id']);}const _0x1e2cb4=this[_0x5f07b(0x155)][_0x5f07b(0x127)];if(_0x1e2cb4)for(const _0x23984d of _0x1e2cb4){await this[_0x5f07b(0x167)](_0x23984d);}if(this[_0x5f07b(0x155)]['notifyTelegramEnabled']&&this[_0x5f07b(0x155)]['notifyTelegramInstance'])await this['subscribeForeignStatesAsync'](this[_0x5f07b(0x155)][_0x5f07b(0x192)]+_0x5f07b(0x147));setTimeout(()=>this[_0x5f07b(0x1af)](),0x1388);if(this['analysisTimer'])clearInterval(this[_0x5f07b(0xff)]);const _0x2769e9=this[_0x5f07b(0x155)][_0x5f07b(0x193)]||0xf;_0x2769e9>0x0&&(this[_0x5f07b(0xff)]=setInterval(()=>{const _0x1fe779=_0x5f07b;this[_0x1fe779(0xf9)]();},_0x2769e9*0x3c*0x3e8)),schedulers['setupLtmScheduler'](this,()=>aiAgent[_0x5f07b(0x121)](this,pythonBridge)),schedulers[_0x5f07b(0x158)](this),schedulers[_0x5f07b(0x198)](this,()=>aiAgent[_0x5f07b(0x1a9)](this)),schedulers[_0x5f07b(0x107)](this,()=>aiAgent[_0x5f07b(0xdf)](this)),pythonBridge['startService'](this,installer[_0x5f07b(0x19f)]),setTimeout(async()=>{const _0x415d8e=_0x5f07b;await topology['updateTopology'](this);try{const _0x56d23f=await this[_0x415d8e(0x1a6)](_0x415d8e(0x118));if(_0x56d23f&&_0x56d23f[_0x415d8e(0x138)])pythonBridge['send'](this,_0x415d8e(0x194),JSON[_0x415d8e(0x175)](_0x56d23f[_0x415d8e(0x138)]));}catch(_0x9ddd0){}this['runPythonHealthCheck'](),this[_0x415d8e(0xdb)](),this['triggerEnergyPrediction'](),this['updateHealthVector']();},0x1388);}['onUnload'](_0x234115){const _0x1cc6a8=a0_0x1f2e1b;if(this[_0x1cc6a8(0xff)])clearInterval(this[_0x1cc6a8(0xff)]);if(this[_0x1cc6a8(0x168)])clearInterval(this[_0x1cc6a8(0x168)]);if(this[_0x1cc6a8(0x18c)])this['ltmJob'][_0x1cc6a8(0x1ac)]();if(this[_0x1cc6a8(0x1a4)])this['modeResetJob'][_0x1cc6a8(0x1ac)]();if(this['briefingJob'])this['briefingJob'][_0x1cc6a8(0x1ac)]();recorder[_0x1cc6a8(0x19b)](this),pythonBridge[_0x1cc6a8(0x139)](this),_0x234115();}async[a0_0x1f2e1b(0x19d)](_0x1c1a4f,_0x50834f){const _0xce00ed=a0_0x1f2e1b;if(!_0x50834f||this[_0xce00ed(0x13e)])return;if(_0x1c1a4f['includes'](_0xce00ed(0x16d))&&_0x1c1a4f[_0xce00ed(0x1b2)](_0xce00ed(0x195))&&_0x50834f[_0xce00ed(0x138)])return;if(_0x1c1a4f===this['namespace']+_0xce00ed(0xf0)){if(_0x50834f[_0xce00ed(0x138)]&&Object[_0xce00ed(0x166)](setup[_0xce00ed(0x137)])[_0xce00ed(0x185)](_0x50834f[_0xce00ed(0x138)])){this['currentSystemMode']=_0x50834f[_0xce00ed(0x138)];if(_0x50834f[_0xce00ed(0x138)]===setup[_0xce00ed(0x137)][_0xce00ed(0x13f)])await recorder[_0xce00ed(0x1b0)](this,![]);else await recorder[_0xce00ed(0x1b0)](this,!![]);}if(!_0x50834f['ack'])this[_0xce00ed(0xee)](_0x1c1a4f,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x50834f['ack']){_0x1c1a4f[_0xce00ed(0x185)](_0xce00ed(0x154))&&_0x50834f['val']&&(this[_0xce00ed(0xee)](_0x1c1a4f,{'val':![],'ack':!![]}),aiAgent[_0xce00ed(0x18f)](this));if(_0x1c1a4f[_0xce00ed(0x185)]('triggerDailyDigest')&&_0x50834f[_0xce00ed(0x138)]){this[_0xce00ed(0xee)](_0x1c1a4f,{'val':![],'ack':!![]});if(this[_0xce00ed(0x18e)])aiAgent['createDailyDigest'](this,pythonBridge);}_0x1c1a4f['includes'](_0xce00ed(0x15e))&&_0x50834f[_0xce00ed(0x138)]&&(this[_0xce00ed(0xee)](_0x1c1a4f,{'val':![],'ack':!![]}),aiAgent[_0xce00ed(0xdf)](this));_0x1c1a4f['includes'](_0xce00ed(0x1a7))&&_0x50834f[_0xce00ed(0x138)]&&(this[_0xce00ed(0xee)](_0x1c1a4f,{'val':![],'ack':!![]}),aiAgent[_0xce00ed(0xf1)](this));if(_0x1c1a4f[_0xce00ed(0x185)](_0xce00ed(0x19a))&&_0x50834f['val']){this['setState'](_0x1c1a4f,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x31cd13=await this[_0xce00ed(0x1a6)](_0xce00ed(0x16e));if(_0x31cd13&&_0x31cd13[_0xce00ed(0x138)]){const _0x14812a=JSON[_0xce00ed(0x175)](_0x31cd13[_0xce00ed(0x138)]);this['setStateAsync'](_0xce00ed(0x12b),{'val':_0xce00ed(0x129),'ack':!![]}),pythonBridge[_0xce00ed(0x128)](this,_0xce00ed(0x161),{'sequences':_0x14812a});}}catch(_0x15e0b4){}}if(_0x1c1a4f[_0xce00ed(0x185)](_0xce00ed(0xfa))&&_0x50834f[_0xce00ed(0x138)]){this[_0xce00ed(0xee)](_0x1c1a4f,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x5d8223=await this['getStateAsync'](_0xce00ed(0x165));if(_0x5d8223&&_0x5d8223[_0xce00ed(0x138)])pythonBridge[_0xce00ed(0x128)](this,_0xce00ed(0xe7),{'digests':JSON[_0xce00ed(0x175)](_0x5d8223['val'])});}catch(_0x1bad6c){}}if(_0x1c1a4f['includes'](_0xce00ed(0xec))&&_0x50834f[_0xce00ed(0x138)]){this[_0xce00ed(0xee)](_0x1c1a4f,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x4d977d=await this[_0xce00ed(0x1a6)](_0xce00ed(0x16b));if(_0x4d977d&&_0x4d977d[_0xce00ed(0x138)])pythonBridge[_0xce00ed(0x128)](this,_0xce00ed(0x150),{'points':JSON[_0xce00ed(0x175)](_0x4d977d[_0xce00ed(0x138)])});}catch(_0x267052){}}if(_0x1c1a4f[_0xce00ed(0x185)](_0xce00ed(0x1a8))&&_0x50834f['val']){this[_0xce00ed(0xee)](_0x1c1a4f,{'val':![],'ack':!![]});if(this[_0xce00ed(0x18e)])try{const _0x46fea1=await this[_0xce00ed(0x1a6)]('LTM.rawEventLog');if(_0x46fea1&&_0x46fea1['val'])pythonBridge[_0xce00ed(0x128)](this,'TRAIN_COMFORT',{'events':JSON['parse'](_0x46fea1[_0xce00ed(0x138)])});}catch(_0xa03df5){}}_0x1c1a4f[_0xce00ed(0x185)](_0xce00ed(0xf2))&&_0x50834f[_0xce00ed(0x138)]&&(this[_0xce00ed(0xee)](_0x1c1a4f,{'val':![],'ack':!![]}),topology[_0xce00ed(0x15a)](this));return;}if(this[_0xce00ed(0x155)][_0xce00ed(0x127)]&&this['config']['presenceDevices'][_0xce00ed(0x185)](_0x1c1a4f)){await this[_0xce00ed(0x1af)]();return;}const _0x5b9267=(this[_0xce00ed(0x155)]['devices']||[])[_0xce00ed(0x180)](_0x5370b7=>_0x5370b7['id']===_0x1c1a4f);if(_0x5b9267){const _0x246e82=await recorder[_0xce00ed(0xdd)](this,_0x1c1a4f,_0x50834f,_0x5b9267);_0x246e82&&_0x246e82['type']===_0xce00ed(0x199)&&_0x246e82[_0xce00ed(0x174)]&&this['isProVersion']&&deadMan[_0xce00ed(0x126)](this,_0x246e82[_0xce00ed(0x174)]);}}async['onMessage'](_0x1227ba){const _0x28f803=a0_0x1f2e1b;if(typeof _0x1227ba===_0x28f803(0x176)&&_0x1227ba[_0x28f803(0x125)]){if(_0x1227ba[_0x28f803(0x172)]==='testApiKey')try{const _0x1f4463=_0x1227ba['message'][_0x28f803(0x15b)];if(!_0x1f4463)throw new Error('Kein\x20API\x20Key\x20Ã¼bergeben');const _0x254fa6=new GoogleGenerativeAI(_0x1f4463),_0x97c112=_0x254fa6[_0x28f803(0x16c)]({'model':GEMINI_MODEL}),_0x791a5b=await _0x97c112[_0x28f803(0x1ad)](_0x28f803(0x179)),_0x4fdd60=await _0x791a5b[_0x28f803(0x183)];if(_0x4fdd60[_0x28f803(0x169)]())this[_0x28f803(0x101)](_0x1227ba[_0x28f803(0x162)],_0x1227ba[_0x28f803(0x172)],{'success':!![],'message':_0x28f803(0x10a)},_0x1227ba[_0x28f803(0x11f)]);else throw new Error('Keine\x20Antwort\x20von\x20Gemini');}catch(_0x19718d){this['sendTo'](_0x1227ba[_0x28f803(0x162)],_0x1227ba[_0x28f803(0x172)],{'success':![],'message':_0x19718d[_0x28f803(0x125)]},_0x1227ba['callback']);}else{if(_0x1227ba[_0x28f803(0x172)]===_0x28f803(0x13a))try{const _0x1fcb2c=await scanner[_0x28f803(0x133)](this,_0x1227ba[_0x28f803(0x125)]||{});this['sendTo'](_0x1227ba[_0x28f803(0x162)],_0x1227ba[_0x28f803(0x172)],{'success':!![],'devices':_0x1fcb2c},_0x1227ba[_0x28f803(0x11f)]);}catch(_0x2d788e){this['sendTo'](_0x1227ba[_0x28f803(0x162)],_0x1227ba[_0x28f803(0x172)],{'success':![],'error':_0x2d788e[_0x28f803(0x125)]},_0x1227ba[_0x28f803(0x11f)]);}else{if(_0x1227ba['command']===_0x28f803(0x11a))try{const {matrix:_0x18b3e0}=_0x1227ba[_0x28f803(0x125)],_0x1eef93=await this[_0x28f803(0x1a6)]('analysis.topology.structure');if(_0x1eef93&&_0x1eef93['val']){const _0x2a06fa=JSON[_0x28f803(0x175)](_0x1eef93['val']);_0x2a06fa['matrix']=_0x18b3e0,_0x2a06fa[_0x28f803(0x17c)]=Date[_0x28f803(0x1ab)](),await this[_0x28f803(0x120)]('analysis.topology.structure',{'val':JSON[_0x28f803(0x141)](_0x2a06fa),'ack':!![]}),pythonBridge[_0x28f803(0x128)](this,_0x28f803(0x194),_0x2a06fa);}this[_0x28f803(0x101)](_0x1227ba[_0x28f803(0x162)],_0x1227ba[_0x28f803(0x172)],{'success':!![]},_0x1227ba[_0x28f803(0x11f)]);}catch(_0xd1c872){this[_0x28f803(0xed)][_0x28f803(0x145)](_0xd1c872);}else{if(_0x1227ba[_0x28f803(0x172)]===_0x28f803(0x186))this['sendTo'](_0x1227ba[_0x28f803(0x162)],_0x1227ba['command'],{'success':!![],'dailyDigests':this['dailyDigests']||[],'analysisHistory':this[_0x28f803(0x17d)]||[]},_0x1227ba[_0x28f803(0x11f)]);else{if(_0x1227ba[_0x28f803(0x172)]===_0x28f803(0x10c)){const _0x10b890=this[_0x28f803(0xe3)]['length'],_0x3273c4=new Array(0x18)[_0x28f803(0x17e)](0x0),_0x4155c7=new Date()[_0x28f803(0x12e)](0x0,0x0,0x0,0x0);this[_0x28f803(0x102)]&&this['eventHistory']['forEach'](_0x3c02c5=>{const _0x4377ac=_0x28f803;if(_0x3c02c5['timestamp']>=_0x4155c7){const _0x418eba=new Date(_0x3c02c5[_0x4377ac(0x164)])[_0x4377ac(0xea)]();if(_0x418eba>=0x0&&_0x418eba<0x18)_0x3273c4[_0x418eba]++;}}),this[_0x28f803(0x101)](_0x1227ba[_0x28f803(0x162)],_0x1227ba[_0x28f803(0x172)],{'success':!![],'eventHistory':this[_0x28f803(0x102)][_0x28f803(0xf6)](0x0,0xf),'stats':{'digestCount':_0x10b890,'isPresent':this['isPresent'],'hourlyActivity':_0x3273c4},'automation':{'detected':![]}},_0x1227ba[_0x28f803(0x11f)]);}else{if(_0x1227ba[_0x28f803(0x172)]===_0x28f803(0x10b)){const _0x2b8d44=await this['getForeignObjectsAsync']('enum.functions.*','enum'),_0x1afb76=[];if(_0x2b8d44)for(const _0x3fdf11 in _0x2b8d44){const _0x59eeb0=_0x2b8d44[_0x3fdf11],_0x5e63d9=(_0x59eeb0[_0x28f803(0x14a)]&&typeof _0x59eeb0[_0x28f803(0x14a)][_0x28f803(0x152)]==='object'?_0x59eeb0[_0x28f803(0x14a)][_0x28f803(0x152)]['de']:_0x59eeb0['common'][_0x28f803(0x152)])||_0x59eeb0[_0x28f803(0x14a)][_0x28f803(0x152)];_0x1afb76[_0x28f803(0xe6)]({'id':_0x3fdf11,'name':_0x5e63d9});}const _0x7d0b7b=await this[_0x28f803(0xe5)](_0x28f803(0x16f),'enum'),_0x117959=[];if(_0x7d0b7b)for(const _0xb9e265 in _0x7d0b7b){const _0x3243b5=_0x7d0b7b[_0xb9e265],_0x559f7d=(_0x3243b5['common']&&typeof _0x3243b5[_0x28f803(0x14a)][_0x28f803(0x152)]===_0x28f803(0x176)?_0x3243b5[_0x28f803(0x14a)][_0x28f803(0x152)]['de']:_0x3243b5[_0x28f803(0x14a)][_0x28f803(0x152)])||_0xb9e265[_0x28f803(0x151)]('.')[_0x28f803(0x153)]();_0x117959[_0x28f803(0xe6)](_0x559f7d);}this[_0x28f803(0x101)](_0x1227ba[_0x28f803(0x162)],_0x1227ba['command'],{'success':!![],'enums':_0x1afb76,'rooms':_0x117959},_0x1227ba[_0x28f803(0x11f)]);}else{if(_0x1227ba[_0x28f803(0x172)]==='testContext')try{let _0x293b82=_0x28f803(0x182),_0x26a562=_0x28f803(0x122);if(this['config']['weatherInstance']){const _0x4048d7=await recorder[_0x28f803(0x163)](this);_0x293b82=_0x4048d7!==null?_0x4048d7+'Â°C':_0x28f803(0x106);}if(this[_0x28f803(0x155)][_0x28f803(0xf5)]){const _0x5acda9=await this[_0x28f803(0x191)](_0x28f803(0x14b)+this[_0x28f803(0x155)][_0x28f803(0xf5)]);_0x26a562=_0x5acda9?_0x28f803(0x123):_0x28f803(0xe8);}this[_0x28f803(0x101)](_0x1227ba['from'],_0x1227ba[_0x28f803(0x172)],{'success':!![],'weather':_0x293b82,'calendar':_0x26a562},_0x1227ba[_0x28f803(0x11f)]);}catch(_0x361123){this[_0x28f803(0x101)](_0x1227ba['from'],_0x1227ba[_0x28f803(0x172)],{'success':![],'error':_0x361123['message']},_0x1227ba[_0x28f803(0x11f)]);}else{if(_0x1227ba[_0x28f803(0x172)]===_0x28f803(0x113))try{const _0x39c9c7=_0x1227ba[_0x28f803(0x125)]['instance'],_0x57fc6b=await this[_0x28f803(0x111)](_0x39c9c7+_0x28f803(0x1a1));let _0x1f85aa=[];if(_0x57fc6b&&_0x57fc6b[_0x28f803(0x138)]){const _0x35003a=JSON[_0x28f803(0x175)](_0x57fc6b[_0x28f803(0x138)]),_0xd3a2bb=new Set();Array['isArray'](_0x35003a)&&_0x35003a['forEach'](_0x3bd522=>{const _0x448931=_0x28f803;if(_0x3bd522[_0x448931(0x17a)])_0xd3a2bb[_0x448931(0xeb)](_0x3bd522[_0x448931(0x17a)]);else{if(_0x3bd522[_0x448931(0x1b6)])_0xd3a2bb[_0x448931(0xeb)](_0x3bd522['calendarName']);}}),_0x1f85aa=Array[_0x28f803(0x162)](_0xd3a2bb)[_0x28f803(0x11e)]();}if(_0x1f85aa[_0x28f803(0x12f)]===0x0)_0x1f85aa=[_0x28f803(0x10f)];this[_0x28f803(0x101)](_0x1227ba['from'],_0x1227ba['command'],{'success':!![],'names':_0x1f85aa},_0x1227ba[_0x28f803(0x11f)]);}catch(_0x5c387e){this[_0x28f803(0x101)](_0x1227ba['from'],_0x1227ba[_0x28f803(0x172)],{'success':![],'error':_0x5c387e[_0x28f803(0x125)]},_0x1227ba[_0x28f803(0x11f)]);}else{if(_0x1227ba['command']===_0x28f803(0x105))try{await setup[_0x28f803(0x18a)](this,'ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.',![],![]),this[_0x28f803(0x101)](_0x1227ba[_0x28f803(0x162)],_0x1227ba[_0x28f803(0x172)],{'success':!![],'message':_0x28f803(0x144)},_0x1227ba[_0x28f803(0x11f)]);}catch(_0xd7c8c){this[_0x28f803(0xed)]['error'](_0x28f803(0x15d)+_0xd7c8c[_0x28f803(0x125)]),this[_0x28f803(0x101)](_0x1227ba[_0x28f803(0x162)],_0x1227ba[_0x28f803(0x172)],{'success':![],'message':_0x28f803(0x142)+_0xd7c8c[_0x28f803(0x125)]},_0x1227ba[_0x28f803(0x11f)]);}}}}}}}}}}}async[a0_0x1f2e1b(0x1a0)](){const _0x2d304c=a0_0x1f2e1b;try{const _0x3db6a8=await this[_0x2d304c(0x1a6)](setup[_0x2d304c(0xfd)]);_0x3db6a8&&_0x3db6a8[_0x2d304c(0x138)]&&Object[_0x2d304c(0x166)](setup[_0x2d304c(0x137)])[_0x2d304c(0x185)](_0x3db6a8[_0x2d304c(0x138)])?this[_0x2d304c(0xde)]=_0x3db6a8[_0x2d304c(0x138)]:(this[_0x2d304c(0xde)]=setup[_0x2d304c(0x137)][_0x2d304c(0x1a3)],await this[_0x2d304c(0x120)](setup[_0x2d304c(0xfd)],{'val':setup['SYSTEM_MODES'][_0x2d304c(0x1a3)],'ack':!![]}));}catch(_0x3425f3){this[_0x2d304c(0xde)]=setup['SYSTEM_MODES']['NORMAL'];}}async[a0_0x1f2e1b(0x1af)](){const _0x381856=a0_0x1f2e1b;try{const _0x1552bb=this[_0x381856(0x155)][_0x381856(0x127)]||[];let _0x186696=![];const _0x506d2d=[];for(const _0x36fc6d of _0x1552bb){try{const _0x3a2111=await this[_0x381856(0x111)](_0x36fc6d);_0x3a2111&&(_0x3a2111[_0x381856(0x138)]===!![]||_0x3a2111[_0x381856(0x138)]==='online'||_0x3a2111['val']===0x1)&&(_0x186696=!![],_0x506d2d[_0x381856(0xe6)](_0x36fc6d));}catch(_0x465fdf){}}return await this[_0x381856(0x120)](_0x381856(0x108),{'val':_0x506d2d[_0x381856(0x171)](',\x20'),'ack':!![]}),_0x186696&&(this[_0x381856(0x14c)]&&(this[_0x381856(0xed)]['info'](_0x381856(0xfc)),recorder[_0x381856(0x19b)](this)),!this[_0x381856(0x104)]&&this[_0x381856(0xde)]===setup[_0x381856(0x137)]['NORMAL']&&await recorder[_0x381856(0x1b0)](this,!![])),_0x186696;}catch(_0x5b0273){return![];}}async[a0_0x1f2e1b(0xf9)](){const _0x5494a4=a0_0x1f2e1b;this[_0x5494a4(0xed)][_0x5494a4(0x159)](_0x5494a4(0x17b)),await aiAgent[_0x5494a4(0x18f)](this),this[_0x5494a4(0xf3)](),this[_0x5494a4(0xdb)](),this[_0x5494a4(0x109)]();}[a0_0x1f2e1b(0xdb)](){const _0x2f9a08=a0_0x1f2e1b;if(!this[_0x2f9a08(0x18e)])return;try{this[_0x2f9a08(0x14d)](_0x2f9a08(0x16e),(_0x4767d3,_0x346fb2)=>{const _0xc1f626=_0x2f9a08;_0x346fb2&&_0x346fb2[_0xc1f626(0x138)]&&pythonBridge[_0xc1f626(0x128)](this,_0xc1f626(0x103),{'sequences':JSON[_0xc1f626(0x175)](_0x346fb2[_0xc1f626(0x138)])});});}catch(_0x7859e4){}}async[a0_0x1f2e1b(0x109)](){const _0x552d07=a0_0x1f2e1b;if(!this[_0x552d07(0x18e)])return;try{const _0x279f67=await recorder[_0x552d07(0x163)](this);if(_0x279f67===null)return;const _0x327afa={},_0x1df93c=this[_0x552d07(0x155)]['devices']||[];for(const _0x292202 of _0x1df93c){if(_0x292202[_0x552d07(0x13b)]===_0x552d07(0x16a)&&_0x292202[_0x552d07(0x174)]){const _0x1670b8=this[_0x552d07(0xe2)][_0x292202['id']];if(_0x1670b8!==undefined)_0x327afa[_0x292202[_0x552d07(0x174)]]=_0x1670b8;}}Object[_0x552d07(0xe1)](_0x327afa)[_0x552d07(0x12f)]>0x0&&pythonBridge[_0x552d07(0x128)](this,_0x552d07(0x124),{'current_temps':_0x327afa,'t_out':_0x279f67});}catch(_0x4ed2f6){}}['updateHealthVector'](){const _0xeed978=a0_0x1f2e1b;if(!this[_0xeed978(0x11c)]||this[_0xeed978(0x11c)][_0xeed978(0x12f)]===0x0)return;const _0x592ed7=new Array(0x60)[_0xeed978(0x17e)](0x0),_0x2388c4=new Date()[_0xeed978(0x12e)](0x0,0x0,0x0,0x0);this['rawEventLog'][_0xeed978(0x135)](_0x790d2a=>{const _0x29a41e=_0xeed978,_0x14087f=new Date(_0x790d2a[_0x29a41e(0x164)]);if(_0x14087f['getTime']()>=_0x2388c4){const _0x208e64=_0x14087f[_0x29a41e(0xea)](),_0x1fbbee=_0x14087f[_0x29a41e(0x1b5)](),_0x3be3cd=_0x208e64*0x4+Math[_0x29a41e(0xda)](_0x1fbbee/0xf);if(_0x3be3cd>=0x0&&_0x3be3cd<0x60)_0x592ed7[_0x3be3cd]++;}}),this[_0xeed978(0x120)](_0xeed978(0x188),{'val':JSON['stringify'](_0x592ed7),'ack':!![]});}[a0_0x1f2e1b(0x14f)](){const _0x4b3d2b=a0_0x1f2e1b;if(!this[_0x4b3d2b(0xe3)]||this[_0x4b3d2b(0xe3)][_0x4b3d2b(0x12f)]<0x2)return;const _0x5130f3=this[_0x4b3d2b(0xe3)][_0x4b3d2b(0x149)](_0x2b196f=>{const _0x37bdf6=_0x4b3d2b,_0x2503c3=(_0x2b196f['activityLevel']||'')[_0x37bdf6(0x114)]();return ACTIVITY_LEVEL_MAP[_0x2503c3]||0x32;});pythonBridge['send'](this,_0x4b3d2b(0xdc),{'values':_0x5130f3,'tag':_0x4b3d2b(0x146)});}}if(require[a0_0x1f2e1b(0x11b)]!==module)module[a0_0x1f2e1b(0x1a5)]=_0x221daa=>new CogniLiving(_0x221daa);else new CogniLiving();