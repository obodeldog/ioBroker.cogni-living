const a0_0xc4dd52=a0_0x4298;(function(_0x113cb5,_0x18cfe9){const _0x429e6e=a0_0x4298,_0x309db9=_0x113cb5();while(!![]){try{const _0x5b4130=-parseInt(_0x429e6e(0xfa))/0x1*(parseInt(_0x429e6e(0x145))/0x2)+-parseInt(_0x429e6e(0x1e6))/0x3+-parseInt(_0x429e6e(0x147))/0x4*(-parseInt(_0x429e6e(0x10f))/0x5)+parseInt(_0x429e6e(0x1bc))/0x6*(parseInt(_0x429e6e(0x1e4))/0x7)+-parseInt(_0x429e6e(0x113))/0x8*(-parseInt(_0x429e6e(0xf1))/0x9)+parseInt(_0x429e6e(0x1d8))/0xa+-parseInt(_0x429e6e(0x1ff))/0xb*(parseInt(_0x429e6e(0x1d3))/0xc);if(_0x5b4130===_0x18cfe9)break;else _0x309db9['push'](_0x309db9['shift']());}catch(_0x37b46b){_0x309db9['push'](_0x309db9['shift']());}}}(a0_0x59ac,0xe247a));const a0_0x4918e2=(function(){let _0x3c67d3=!![];return function(_0x4caa65,_0x391148){const _0x1aef8d=_0x3c67d3?function(){if(_0x391148){const _0x552c78=_0x391148['apply'](_0x4caa65,arguments);return _0x391148=null,_0x552c78;}}:function(){};return _0x3c67d3=![],_0x1aef8d;};}()),a0_0x1ab3a7=a0_0x4918e2(this,function(){const _0x1f16c7=a0_0x4298;return a0_0x1ab3a7['toString']()[_0x1f16c7(0x175)](_0x1f16c7(0xc2))[_0x1f16c7(0xad)]()[_0x1f16c7(0x1c6)](a0_0x1ab3a7)[_0x1f16c7(0x175)](_0x1f16c7(0xc2));});a0_0x1ab3a7();function a0_0x59ac(){const _0x41f57f=['PREDICT_ENERGY','door','TRAIN_TOPOLOGY','string','json','timestamp','Say\x20Hello','./lib/dead_man','infrasoundThreshold','exports','Current.WeatherText','send','main','{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}','sources','loadSystemMode','processSensorEvent','toLowerCase','Daily\x20Room\x20Details\x20(48x30min)','pythonBridge\x20command\x20failed:\x20','bootTime','scheduleJob','security','health','find','moduleEnergy','object','clear','now','keys','LTM.triggerDailyDigest','inactivityThresholdHours','.json','analysis.training.triggerSecurity','getGenerativeModel','LTM.trainingData.sequences','./lib/setup','ack','times','\x22history\x22:{}','Unknown','triggerBriefing','bin','models/gemini-flash-latest','from','246glvRJS','üíæ\x20Saving\x20Daily\x20History\x20for\x20','¬∞C,\x20Au√üen:\x20','calendarName','setObjectNotExistsAsync','setStateAsync','saveDailyHistory','instance','motion','üì¶\x20Restored\x20','constructor','.isOnline','üï∏Ô∏è\x20Topology\x20Matrix\x20manually\x20updated\x20by\x20user.','analysis.training.triggerEnergy','max','protectAiMemory','toISOString','./lib/python_bridge','substring','date','guest','‚úÖ\x20History\x20saved:\x20','moduleSecurity','156OtUzus','debug','analysis.health.geminiNight','LTM.rawEventLog','üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','17132010uvPzVV','floor','onReady','analysis.trigger','Event','CALCULATE_HEALTH_TREND','integrateRoomTime','analysis.activity.roomStats','roomIntegratorTimer','infrasoundEnabled','analysis.safety.infrasoundAlert','type','248360LSSvgH','utf8','1545963vAhXHB',',\x20Temp:\x20','eventHistory','appendToLog','Gemini\x20Report\x20Night','analysis.health.geminiDay','analysis.prediction.trackerTopRoom','open','analysis.health.todayVector','heiter','subscribeForeignStatesAsync','sensorLastValues','sendNotification','initHistory','\x20Kalender-Adapter\x20gefunden.','driftAnalysisTimer','healthTrendInterval','onMessage','Standard','scanForDevices','LTM.baselineStatus','\x20(Bewohner\x20anwesend\x20-\x20normal)','de-DE','üîä\x20FORENSIC:\x20Infraschall\x20bei\x20Abwesenheit!\x20Pressure:\x20','sunny','2553606yRqPtK','sendMorningBriefing','events.history','analyzeWindowOpening','Scan\x20Error:\x20','analysisTimer','filter','abs','pythonBridge','getEnums','val','Live\x20Event\x20Pulse','üîä\x20Infraschall:\x20','enum.rooms.*','command','¬∞C\x20(Innen:\x20','automation.triggerAction','ltmJob','system','infrasoundLocked','system.presenceWho','geminiApiKey','analysis.health.todayRoomDetails','Init...','online','common','presenceCheckTimer','.venv','subscribeStates','forecast.current.weather','.system.mode','push','modules','DAY','custom','toString','value','rows','analysis.topology.structure','runGeminiAnalysis','updateTopology','warn','setState','values','./lib/recorder','systemConfig','currentSystemMode','matrix','isProVersion','toFixed','toLocaleDateString','triggerGaitAnalysis','callback','history','üìù\x20Manual\x20event\x20logged:\x20','readFileSync','(((.+)+)+)+$','triggerInfrasoundCorrelation','checkCalendarTriggers','accuweather.0','checkWifiPresence','analysis.training.status','ERROR','getMinutes','setHours','map','temperature','Party\x20Mode','Niemand','system.adapter.ical.','Keine\x20Daten','window','pressureBuffer','üö∂\x20Gait\x20Analysis\x20triggered\x20with\x20','Sec-Training\x20started...','geminiModel','analysis.automation.targetValue','length','TRAIN_COMFORT','pulse','cancel','Aktiv\x20(','triggerHealth\x20error:\x20','round','VACATION','updateTopologyMatrix','thermostat','unshift','ANALYZE_GAIT','NextHours.Location_1.Day_1.current.symbol_desc','writeFileSync','moduleHealth','dailyDigests','split','then','runPythonHealthCheck','haust√ºr','ready','Gemini\x20Report\x20Day','updateLocation','analysis.visualization.pulse','onStateChange','checkThermostats','240075ZVnRBv','[Integrator]\x20Error:\x20','add','activeModules','analyzeWindowOpening\x20error:\x20','triggerGaitAnalysis\x20error:\x20','dependencyInstallInProgress','triggerEnergyPrediction','abortExitTimer','11584NULMYS','all','¬∞C)','trackerHeartbeat','devices','location','analysis.training.triggerHealth','NORMAL','version','handleInfrasound','weatherunderground.0','genAI','endsWith','getHours','updateSchedulePreview','./lib/scheduler','analysis.energy.warmupTimes','\x20sequences','presenceDevices','threshold_exceeded','toLocaleTimeString','5KEaWVX','info','parse','üîä\x20Infraschall-Alarm:\x20','200fjkjfp','getStateAsync','weatherTempId','‚Ü∫\x20Replaying\x20','getOverviewData','\x20events\x20from\x20standard\x20storage.','getForeignStateAsync','./lib/automation','checkSolarCondition','name','getForeignObjectsAsync','log','Gemini\x20Init\x20Error:\x20','fill','enum.functions.*','bind','analysis.security.learningStatus','mkdirSync','./lib/scanner','.uptime','SET_LEARNING_MODE','Corrupt','updateHealthVector','memoryCache','replayTodayEvents','initSchedules','generateContent','rawEventLog','isRelevantActivity','telegram','getObjectViewAsync','checkWifiPresence:\x20Error\x20checking\x20','getAbsoluteDefaultDataDir','Manual\x20Event','comfort','analysis.energy.warmupTargets','‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.','includes','./lib/topology','unload','isArray','analysis.activity.roomHistory','state','analysis.security.lastScore','replace','existsSync','analysis.energy.warmupSources','LTM.dailyDigests','\x20(Threshold)','executeAutomationAction','26zuhdfQ','Warte\x20auf\x20Analyse...','3103588kDPecz','minDaysForBaseline','analysis.automation.patternDetected','@iobroker/adapter-core','testContext','scanThermostats','generateHealthReport','lastAlertState','namespace','useCalendar','join','cogni-living','klar','calendarCheckTimer','config','setDate',')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)','historyJob','setPresence','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','todayVector','getTime','isGracePeriodActive','analysis.automation.targetId','text','{\x22history\x22:{}}','analysis.health.activityTrend','onUnload','energy','üîÆ\x20Energy\x20Prediction\x20triggered\x20(','node-schedule','forEach','.data.table','runAutopilot','message','number','manual','getHistoryData','startSystem','\x20-\x20','scanDevices','enum','Daily\x20Activity\x20Vector\x20(48x30min)','analysis.training.triggerTopology','59\x2023\x20*\x20*\x20*','system.adapter.ical.È¶ô','search','analysis.ventilation.lastWindow','slice','sendTo','infrasoundSensorId','General\x20Activity\x20Trend','analysisHistory','party','getDate','SYSTEM_MODES','infrasoundArmingId','briefingJob','refreshCalendar\x20failed:\x20','./lib/installer','Unbekannt','lastTrackerEventTime','error','Sonne:\x20','isPresent','cleanupGhostInterventions','communicate.request','modeResetJob','NIGHT','TRAIN_HEALTH','stringify','getCalendarNames'];a0_0x59ac=function(){return _0x41f57f;};return a0_0x59ac();}'use strict';const utils=require(a0_0xc4dd52(0x14a)),{GoogleGenerativeAI}=require('@google/generative-ai'),path=require('path'),fs=require('fs'),installer=require(a0_0xc4dd52(0x182)),scanner=require(a0_0xc4dd52(0x125)),schedulers=require(a0_0xc4dd52(0x109)),topology=require(a0_0xc4dd52(0x139)),setup=require(a0_0xc4dd52(0x1b3)),recorder=require(a0_0xc4dd52(0xb6)),pythonBridge=require(a0_0xc4dd52(0x1cd)),aiAgent=require('./lib/ai_agent'),deadMan=require(a0_0xc4dd52(0x196)),automation=require(a0_0xc4dd52(0x11a)),GEMINI_MODEL=a0_0xc4dd52(0x1ba);class CogniLiving extends utils['Adapter']{constructor(_0x5338e0){const _0x5580a3=a0_0xc4dd52;super({..._0x5338e0,'name':'cogni-living'}),this[_0x5580a3(0x1e8)]=[],this[_0x5580a3(0x17b)]=[],this[_0x5580a3(0x12e)]=[],this[_0x5580a3(0xe6)]=[],this[_0x5580a3(0x1f1)]={},this[_0x5580a3(0xb7)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x5580a3(0x187)]=!![],this['exitTimer']=null,this['exitGraceTimer']=null,this[_0x5580a3(0x15d)]=![],this[_0x5580a3(0x105)]=null,this[_0x5580a3(0xd5)]=null,this['currentSystemMode']=setup['SYSTEM_MODES'][_0x5580a3(0x101)],this[_0x5580a3(0xba)]=![],this[_0x5580a3(0x14e)]=![],this[_0x5580a3(0x204)]=null,this[_0x5580a3(0x154)]=null,this[_0x5580a3(0x219)]=null,this[_0x5580a3(0x210)]=null,this[_0x5580a3(0x18a)]=null,this[_0x5580a3(0x1f5)]=null,this[_0x5580a3(0x180)]=null,this['historyJob']=null,this[_0x5580a3(0xfd)]=null,this[_0x5580a3(0x1f6)]=null,this['roomIntegratorTimer']=null,this['dependencyInstallInProgress']=![],this[_0x5580a3(0x184)]=Date[_0x5580a3(0x1ab)](),this[_0x5580a3(0x12a)]=null,this[_0x5580a3(0x1a3)]=Date[_0x5580a3(0x1ab)](),this[_0x5580a3(0x212)]=![],this[_0x5580a3(0xd2)]=[],this[_0x5580a3(0xf4)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x5580a3(0xeb),this[_0x5580a3(0x1da)]['bind'](this)),this['on']('stateChange',this[_0x5580a3(0xef)][_0x5580a3(0x122)](this)),this['on'](_0x5580a3(0x13a),this[_0x5580a3(0x162)][_0x5580a3(0x122)](this)),this['on'](_0x5580a3(0x169),this[_0x5580a3(0x1f7)]['bind'](this));}async[a0_0xc4dd52(0x1da)](){const _0x3a9e08=a0_0xc4dd52;this[_0x3a9e08(0x11e)][_0x3a9e08(0x110)]('cogni-living\x20adapter\x20starting\x20(v'+this[_0x3a9e08(0x102)]+_0x3a9e08(0x157));if(this[_0x3a9e08(0x155)][_0x3a9e08(0xe5)]!==undefined)this[_0x3a9e08(0xf4)][_0x3a9e08(0x1a6)]=this[_0x3a9e08(0x155)][_0x3a9e08(0xe5)];if(this[_0x3a9e08(0x155)][_0x3a9e08(0x1d2)]!==undefined)this[_0x3a9e08(0xf4)][_0x3a9e08(0x1a5)]=this['config'][_0x3a9e08(0x1d2)];if(this[_0x3a9e08(0x155)][_0x3a9e08(0x1a8)]!==undefined)this[_0x3a9e08(0xf4)][_0x3a9e08(0x163)]=this[_0x3a9e08(0x155)][_0x3a9e08(0x1a8)];if(this[_0x3a9e08(0x155)]['moduleComfort']!==undefined)this[_0x3a9e08(0xf4)][_0x3a9e08(0x135)]=this[_0x3a9e08(0x155)]['moduleComfort'];if(this['config'][_0x3a9e08(0xaa)])this['activeModules']={...this[_0x3a9e08(0xf4)],...this['config'][_0x3a9e08(0xaa)]};this[_0x3a9e08(0x16d)]();}async['startSystem'](){const _0x7b5f19=a0_0xc4dd52;await setup['initZombies'](this);try{this['isProVersion']=await setup['checkLicense'](this[_0x7b5f19(0x155)]['licenseKey']);}catch(_0x824f43){}if(!this[_0x7b5f19(0x155)][_0x7b5f19(0x1ae)]||this[_0x7b5f19(0x155)][_0x7b5f19(0x1ae)]<0.1)this[_0x7b5f19(0x155)][_0x7b5f19(0x1ae)]=0xc;await setup[_0x7b5f19(0x1f3)](this),await setup['initSystemConfig'](this),topology[_0x7b5f19(0xb2)](this);try{const _0x3149ee=await this[_0x7b5f19(0x114)](_0x7b5f19(0x10a)),_0x4c1a86=await this['getStateAsync'](_0x7b5f19(0x141));_0x3149ee&&_0x3149ee[_0x7b5f19(0x209)]&&_0x4c1a86&&_0x4c1a86[_0x7b5f19(0x209)]&&(Date[_0x7b5f19(0x1ab)]()-_0x3149ee['ts']<0x4*0xe10*0x3e8&&(this['memoryCache']={'times':JSON[_0x7b5f19(0x111)](_0x3149ee[_0x7b5f19(0x209)]),'sources':JSON[_0x7b5f19(0x111)](_0x4c1a86[_0x7b5f19(0x209)])}));}catch(_0x5dc9f2){}if(this[_0x7b5f19(0x155)]['geminiApiKey'])try{this['genAI']=new GoogleGenerativeAI(this[_0x7b5f19(0x155)][_0x7b5f19(0x214)]),this['geminiModel']=this[_0x7b5f19(0x105)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}});}catch(_0x3d1de8){this[_0x7b5f19(0x11e)]['error'](_0x7b5f19(0x11f)+_0x3d1de8['message']);}await setup['createAllObjects'](this),await this[_0x7b5f19(0x19e)](),schedulers[_0x7b5f19(0x12c)](this),await this[_0x7b5f19(0x1c0)](_0x7b5f19(0xee),{'type':_0x7b5f19(0x13d),'common':{'name':_0x7b5f19(0x20a),'type':_0x7b5f19(0x16a),'role':'value','read':!![],'write':![]},'native':{}}),await this[_0x7b5f19(0x1c0)](_0x7b5f19(0x1df),{'type':'state','common':{'name':'Room\x20Dwell\x20Time\x20Stats','type':_0x7b5f19(0x192),'role':_0x7b5f19(0x193),'read':!![],'write':![],'def':_0x7b5f19(0x19c)},'native':{}}),await this[_0x7b5f19(0x1c0)](_0x7b5f19(0x13c),{'type':_0x7b5f19(0x13d),'common':{'name':'Room\x20History\x20(24h\x20Buckets)','type':_0x7b5f19(0x192),'role':_0x7b5f19(0x193),'read':!![],'write':![],'def':_0x7b5f19(0x160)},'native':{}}),await this[_0x7b5f19(0x1c0)](_0x7b5f19(0x1d5),{'type':_0x7b5f19(0x13d),'common':{'name':_0x7b5f19(0x1ea),'type':_0x7b5f19(0x192),'role':'text','read':!![],'write':![],'def':_0x7b5f19(0x146)},'native':{}}),await this[_0x7b5f19(0x1c0)](_0x7b5f19(0x1eb),{'type':'state','common':{'name':_0x7b5f19(0xec),'type':'string','role':_0x7b5f19(0x15f),'read':!![],'write':![],'def':_0x7b5f19(0x146)},'native':{}}),await this[_0x7b5f19(0x1c0)](_0x7b5f19(0x1ee),{'type':_0x7b5f19(0x13d),'common':{'name':_0x7b5f19(0x171),'type':_0x7b5f19(0x192),'role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x7b5f19(0x1c0)](_0x7b5f19(0x215),{'type':'state','common':{'name':_0x7b5f19(0x1a1),'type':'string','role':'json','read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x7b5f19(0x1c0)](_0x7b5f19(0x161),{'type':_0x7b5f19(0x13d),'common':{'name':_0x7b5f19(0x17a),'type':_0x7b5f19(0x16a),'role':_0x7b5f19(0xae),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x7b5f19(0x1c0)](_0x7b5f19(0x10a),{'type':_0x7b5f19(0x13d),'common':{'name':'Warm-Up\x20Time','type':_0x7b5f19(0x192),'role':_0x7b5f19(0x193),'read':!![],'write':![]},'native':{}});try{const _0x5088e1=await this['getStateAsync'](_0x7b5f19(0x201));if(_0x5088e1&&_0x5088e1[_0x7b5f19(0x209)]){this[_0x7b5f19(0x1e8)]=JSON[_0x7b5f19(0x111)](_0x5088e1[_0x7b5f19(0x209)]);if(this['isProVersion']){const _0x234ba4=await this['getStateAsync']('LTM.rawEventLog');if(_0x234ba4&&_0x234ba4[_0x7b5f19(0x209)])this['rawEventLog']=JSON[_0x7b5f19(0x111)](_0x234ba4[_0x7b5f19(0x209)]);}this[_0x7b5f19(0x11e)]['info'](_0x7b5f19(0x1c5)+this[_0x7b5f19(0x1e8)][_0x7b5f19(0xd7)]+_0x7b5f19(0x118));}}catch(_0x42517){this[_0x7b5f19(0x1e8)]=[];}try{const _0x530a65=await this[_0x7b5f19(0x114)]('LTM.dailyDigests');if(_0x530a65&&_0x530a65['val'])this[_0x7b5f19(0xe6)]=JSON[_0x7b5f19(0x111)](_0x530a65['val']);}catch(_0x7e5e8a){this['dailyDigests']=[];}const _0x3d383f=this[_0x7b5f19(0xe6)][_0x7b5f19(0xd7)]>=(this['config'][_0x7b5f19(0x148)]||0x7)?_0x7b5f19(0xdb)+this[_0x7b5f19(0xe6)][_0x7b5f19(0xd7)]+'\x20Tage)':'Lernphase\x20('+this[_0x7b5f19(0xe6)][_0x7b5f19(0xd7)]+'/'+(this['config'][_0x7b5f19(0x148)]||0x7)+')';await this[_0x7b5f19(0x1c1)](_0x7b5f19(0x1fa),{'val':_0x3d383f,'ack':!![]}),this['subscribeStates'](_0x7b5f19(0x1db)),this['subscribeStates'](_0x7b5f19(0x1ad)),this[_0x7b5f19(0xa6)](_0x7b5f19(0x100));this[_0x7b5f19(0x155)]['infrasoundEnabled']&&this[_0x7b5f19(0x155)]['infrasoundSensorId']&&this[_0x7b5f19(0xf4)][_0x7b5f19(0x1a5)]&&this['subscribeForeignStates'](this[_0x7b5f19(0x155)][_0x7b5f19(0x179)]);const _0x354dae=this[_0x7b5f19(0x155)][_0x7b5f19(0xfe)];if(_0x354dae)for(const _0x3d95eb of _0x354dae){await this[_0x7b5f19(0x1f0)](_0x3d95eb['id']);}const _0x39a0fb=this[_0x7b5f19(0x155)][_0x7b5f19(0x10c)];if(_0x39a0fb)for(const _0x3c514d of _0x39a0fb){await this[_0x7b5f19(0x1f0)](_0x3c514d);}const _0x883748=require(_0x7b5f19(0x165));if(this[_0x7b5f19(0x158)])this[_0x7b5f19(0x158)]['cancel']();this[_0x7b5f19(0x158)]=_0x883748[_0x7b5f19(0x1a4)](_0x7b5f19(0x173),()=>{this['saveDailyHistory']();}),setTimeout(()=>this[_0x7b5f19(0x12b)](),0x1388);if(this['roomIntegratorTimer'])clearInterval(this[_0x7b5f19(0x1e0)]);this['integrateRoomTime'](),this[_0x7b5f19(0x1e0)]=setInterval(async()=>{await this['integrateRoomTime']();},0x3c*0x3e8);if(this[_0x7b5f19(0x1f6)])clearInterval(this['healthTrendInterval']);this[_0x7b5f19(0x1f6)]=setInterval(()=>{const _0x266c54=_0x7b5f19;this[_0x266c54(0xba)]&&this[_0x266c54(0xf4)][_0x266c54(0x1a6)]&&this['runPythonHealthCheck']();},0x4*0x3c*0x3c*0x3e8);if(this['analysisTimer'])clearInterval(this[_0x7b5f19(0x204)]);this['activeModules'][_0x7b5f19(0x163)]&&(this['analysisTimer']=setInterval(()=>{const _0x2bbffe=_0x7b5f19;this[_0x2bbffe(0xf8)]();},0xf*0x3c*0x3e8),setTimeout(()=>this['triggerEnergyPrediction'](),0x2710));if(this[_0x7b5f19(0x154)])clearInterval(this['calendarCheckTimer']);this['config'][_0x7b5f19(0x150)]&&this['activeModules'][_0x7b5f19(0x163)]&&(this[_0x7b5f19(0x154)]=setInterval(()=>{automation['checkCalendarTriggers'](this);},0x2*0x3c*0x3e8),setTimeout(()=>automation[_0x7b5f19(0xc4)](this),0x3a98));if(this[_0x7b5f19(0x219)])clearInterval(this[_0x7b5f19(0x219)]);this[_0x7b5f19(0x155)][_0x7b5f19(0x10c)]&&this[_0x7b5f19(0x155)][_0x7b5f19(0x10c)]['length']>0x0&&(this['presenceCheckTimer']=setInterval(async()=>{const _0x163e92=_0x7b5f19;await this[_0x163e92(0xc6)]();},0x3c*0x3e8),setTimeout(async()=>await this[_0x7b5f19(0xc6)](),0x1388));const _0x4b4a52=path['join'](__dirname,_0x7b5f19(0x21a),_0x7b5f19(0x1b9),'python');pythonBridge['startService'](this,_0x4b4a52);}[a0_0xc4dd52(0x162)](_0x4866bb){const _0x7a811d=a0_0xc4dd52;if(this[_0x7a811d(0x158)])this[_0x7a811d(0x158)][_0x7a811d(0xda)]();this[_0x7a811d(0x1c2)]()[_0x7a811d(0xe8)](()=>{const _0xe532cf=_0x7a811d;if(this[_0xe532cf(0x204)])clearInterval(this[_0xe532cf(0x204)]);if(this['calendarCheckTimer'])clearInterval(this[_0xe532cf(0x154)]);if(this[_0xe532cf(0x219)])clearInterval(this[_0xe532cf(0x219)]);if(this[_0xe532cf(0x1e0)])clearInterval(this[_0xe532cf(0x1e0)]);recorder[_0xe532cf(0xf9)](this),pythonBridge['stopService'](this),_0x4866bb();});}async[a0_0xc4dd52(0x12b)](){const _0x302b66=a0_0xc4dd52;if(!this[_0x302b66(0x1e8)]||this[_0x302b66(0x1e8)]['length']===0x0){this['log']['warn']('‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.');return;}this[_0x302b66(0x11e)]['info'](_0x302b66(0x116)+this[_0x302b66(0x1e8)][_0x302b66(0xd7)]+'\x20events\x20from\x20today...');const _0x52187f=new Date()[_0x302b66(0xca)](0x0,0x0,0x0,0x0),_0x5ed034=_0x302b66(0x13c);let _0x39ee3b={'history':{},'date':new Date()[_0x302b66(0xbc)]()};const _0x343364=_0x302b66(0x1ee),_0x3356bc='analysis.health.todayRoomDetails';let _0x1dbfc2=new Array(0x30)[_0x302b66(0x120)](0x0),_0x159fbd=Array[_0x302b66(0x1bb)]({'length':0x30},()=>[]);this[_0x302b66(0x1e8)][_0x302b66(0x166)](_0x31db11=>{const _0x4d4a81=_0x302b66;if(_0x31db11[_0x4d4a81(0x194)]>=_0x52187f){if(recorder[_0x4d4a81(0x12f)](_0x31db11[_0x4d4a81(0x1e3)],_0x31db11['value'])){const _0x9725a6=new Date(_0x31db11[_0x4d4a81(0x194)]),_0x9cb48f=_0x9725a6[_0x4d4a81(0x107)]()*0x2+(_0x9725a6[_0x4d4a81(0xc9)]()>=0x1e?0x1:0x0);if(_0x9cb48f<0x30){_0x1dbfc2[_0x9cb48f]++;const _0x42c30f=_0x31db11['location']||_0x31db11[_0x4d4a81(0x11c)]||'?';let _0x4e67ef=_0x159fbd[_0x9cb48f];!_0x4e67ef['includes'](_0x42c30f)&&_0x4e67ef[_0x4d4a81(0xa9)](_0x42c30f);}const _0x23b493=_0x9725a6[_0x4d4a81(0x107)]();let _0x3f29a9=_0x31db11[_0x4d4a81(0xff)]||_0x4d4a81(0x1b7);const _0x34085a=(this[_0x4d4a81(0x155)][_0x4d4a81(0xfe)]||[])[_0x4d4a81(0x1a7)](_0x2deb24=>_0x2deb24[_0x4d4a81(0xff)]===_0x3f29a9);if(_0x34085a)_0x3f29a9=_0x34085a[_0x4d4a81(0xff)];if(!_0x39ee3b[_0x4d4a81(0xbf)][_0x3f29a9])_0x39ee3b[_0x4d4a81(0xbf)][_0x3f29a9]=new Array(0x18)[_0x4d4a81(0x120)](0x0);if(_0x39ee3b['history'][_0x3f29a9][_0x23b493]<0x3c)_0x39ee3b[_0x4d4a81(0xbf)][_0x3f29a9][_0x23b493]++;}}});const _0x5241c7=await this[_0x302b66(0x114)](_0x5ed034);(!_0x5241c7||!_0x5241c7[_0x302b66(0x209)]||_0x5241c7['val']==='{}'||_0x5241c7[_0x302b66(0x209)]['includes'](_0x302b66(0x1b6)))&&await this[_0x302b66(0x1c1)](_0x5ed034,{'val':JSON[_0x302b66(0x18d)](_0x39ee3b),'ack':!![]}),await this[_0x302b66(0x1c1)](_0x343364,{'val':JSON[_0x302b66(0x18d)](_0x1dbfc2),'ack':!![]}),await this[_0x302b66(0x1c1)](_0x3356bc,{'val':JSON[_0x302b66(0x18d)](_0x159fbd),'ack':!![]}),this[_0x302b66(0x11e)][_0x302b66(0x110)](_0x302b66(0x137));}async[a0_0xc4dd52(0x1c2)](){const _0x2d28a3=a0_0xc4dd52;if(!this[_0x2d28a3(0xf4)]['health'])return;const _0x31a290=new Date()[_0x2d28a3(0x1cc)]()[_0x2d28a3(0xe7)]('T')[0x0];this['log'][_0x2d28a3(0x1d4)](_0x2d28a3(0x1bd)+_0x31a290+'...');try{const [_0x4288c7,_0x226830,_0x24d0c3,_0x3737f6,_0x55f7d7,_0x469f11]=await Promise[_0x2d28a3(0xfb)]([this[_0x2d28a3(0x114)](_0x2d28a3(0x13c)),this[_0x2d28a3(0x114)](_0x2d28a3(0x1d5)),this[_0x2d28a3(0x114)]('analysis.health.geminiDay'),this[_0x2d28a3(0x114)](_0x2d28a3(0x13e)),this['getStateAsync'](_0x2d28a3(0x1ee)),this['getStateAsync']('analysis.health.activityTrend')]),_0x5e4e4f=new Date()[_0x2d28a3(0xca)](0x0,0x0,0x0,0x0),_0x3f55c0=this[_0x2d28a3(0x1e8)][_0x2d28a3(0x205)](_0x1291bf=>_0x1291bf[_0x2d28a3(0x194)]>=_0x5e4e4f&&(_0x1291bf[_0x2d28a3(0x11c)][_0x2d28a3(0x1a0)]()[_0x2d28a3(0x138)](_0x2d28a3(0xea))||_0x1291bf[_0x2d28a3(0x11c)]['toLowerCase']()[_0x2d28a3(0x138)]('terrasse'))&&(_0x1291bf[_0x2d28a3(0xae)]===!![]||_0x1291bf[_0x2d28a3(0xae)]==='open'))[_0x2d28a3(0xd7)];let _0x1a31be=0x55;if(_0x469f11&&_0x469f11[_0x2d28a3(0x209)]!==undefined)_0x1a31be=Math['min'](0x64,Math[_0x2d28a3(0x1ca)](0x14,Math[_0x2d28a3(0xdd)](0x50+Number(_0x469f11[_0x2d28a3(0x209)])*0x5)));const _0x5119ac=this['eventHistory'][_0x2d28a3(0x205)](_0x4c87a7=>_0x4c87a7[_0x2d28a3(0x194)]>=_0x5e4e4f),_0x594510={'date':_0x31a290,'timestamp':Date[_0x2d28a3(0x1ab)](),'roomHistory':_0x4288c7?.[_0x2d28a3(0x209)]?JSON['parse'](_0x4288c7[_0x2d28a3(0x209)]):{},'geminiNight':_0x226830?.[_0x2d28a3(0x209)]||'Keine\x20Daten','geminiDay':_0x24d0c3?.[_0x2d28a3(0x209)]||_0x2d28a3(0xd0),'anomalyScore':_0x3737f6?.[_0x2d28a3(0x209)]||0.1,'todayVector':_0x55f7d7?.[_0x2d28a3(0x209)]?JSON[_0x2d28a3(0x111)](_0x55f7d7[_0x2d28a3(0x209)]):new Array(0x30)[_0x2d28a3(0x120)](0x0),'batteryLevel':_0x1a31be,'freshAirCount':_0x3f55c0,'eventHistory':_0x5119ac},_0x160f50=utils['getAbsoluteDefaultDataDir'](),_0x334c37=path[_0x2d28a3(0x151)](_0x160f50,'cogni-living',_0x2d28a3(0xbf));if(!fs[_0x2d28a3(0x140)](_0x334c37))fs[_0x2d28a3(0x124)](_0x334c37,{'recursive':!![]});const _0x4e4d8b=path['join'](_0x334c37,_0x31a290+_0x2d28a3(0x1af));fs[_0x2d28a3(0xe4)](_0x4e4d8b,JSON[_0x2d28a3(0x18d)](_0x594510)),this['log'][_0x2d28a3(0x110)](_0x2d28a3(0x1d1)+_0x4e4d8b);}catch(_0x381287){this[_0x2d28a3(0x11e)]['error']('History\x20Save\x20Error:\x20'+_0x381287[_0x2d28a3(0x169)]);}}async[a0_0xc4dd52(0x1de)](){const _0x22b83a=a0_0xc4dd52;if(!this['isPresent'])return;try{let _0x252489=null;try{const _0x4628d7=await this[_0x22b83a(0x114)](_0x22b83a(0x1ec)),_0x302d3e=await this['getStateAsync']('analysis.prediction.trackerConfidence');if(_0x4628d7&&_0x4628d7[_0x22b83a(0x209)]&&_0x302d3e&&_0x302d3e['val']&&_0x302d3e[_0x22b83a(0x209)]>0.3){if(_0x4628d7[_0x22b83a(0x209)]!==_0x22b83a(0x1b7)&&_0x4628d7['val']!==_0x22b83a(0x216))_0x252489=_0x4628d7[_0x22b83a(0x209)];}}catch(_0x4d5ff7){}if(!_0x252489){const _0x19f4a6=this[_0x22b83a(0x155)][_0x22b83a(0xfe)]||[];for(const _0x5200a2 of _0x19f4a6){if(_0x5200a2[_0x22b83a(0x1e3)]==='motion'&&_0x5200a2[_0x22b83a(0xff)])try{const _0x38ff9b=await this[_0x22b83a(0x119)](_0x5200a2['id']);if(_0x38ff9b&&(_0x38ff9b[_0x22b83a(0x209)]===!![]||_0x38ff9b[_0x22b83a(0x209)]==='on'||_0x38ff9b['val']===0x1)){_0x252489=_0x5200a2[_0x22b83a(0xff)];break;}}catch(_0x3889ca){}}}if(!_0x252489)return;const _0x5e5b23=this['config'][_0x22b83a(0xfe)]||[];let _0x49e553=_0x252489;const _0x206980=_0x5e5b23[_0x22b83a(0x1a7)](_0x21bf6e=>_0x21bf6e['location']&&_0x21bf6e['location'][_0x22b83a(0x1a0)]()===_0x252489[_0x22b83a(0x1a0)]());if(_0x206980)_0x49e553=_0x206980[_0x22b83a(0xff)];const _0x170ac9=_0x22b83a(0x13c),_0x39bb92=await this[_0x22b83a(0x114)](_0x170ac9),_0x5d2ee0=new Date()[_0x22b83a(0xbc)]();let _0x2a3489={'history':{},'date':_0x5d2ee0};if(_0x39bb92&&_0x39bb92[_0x22b83a(0x209)])try{_0x2a3489=JSON[_0x22b83a(0x111)](_0x39bb92[_0x22b83a(0x209)]);}catch(_0x3a4e00){}_0x2a3489[_0x22b83a(0x1cf)]!==_0x5d2ee0&&(_0x2a3489[_0x22b83a(0xbf)]={},_0x2a3489['date']=_0x5d2ee0);if(!_0x2a3489['history'][_0x49e553])_0x2a3489[_0x22b83a(0xbf)][_0x49e553]=new Array(0x18)[_0x22b83a(0x120)](0x0);const _0x31ef43=new Date()[_0x22b83a(0x107)]();if(_0x2a3489['history'][_0x49e553][_0x31ef43]<0x3c)_0x2a3489[_0x22b83a(0xbf)][_0x49e553][_0x31ef43]++;await this['setStateAsync'](_0x170ac9,{'val':JSON['stringify'](_0x2a3489),'ack':!![]});}catch(_0x3300ba){this[_0x22b83a(0x11e)][_0x22b83a(0xb3)](_0x22b83a(0xf2)+_0x3300ba[_0x22b83a(0x169)]);}}async[a0_0xc4dd52(0x1f7)](_0x15b3a7){const _0x2d9fd8=a0_0xc4dd52;if(typeof _0x15b3a7==='object'&&_0x15b3a7[_0x2d9fd8(0x169)]){if(_0x15b3a7[_0x2d9fd8(0x20d)]===_0x2d9fd8(0x16c)){const _0x490524=_0x15b3a7[_0x2d9fd8(0x169)][_0x2d9fd8(0x1cf)],_0x1cd2d7=utils[_0x2d9fd8(0x133)](),_0x5d9406=path['join'](_0x1cd2d7,_0x2d9fd8(0x152),_0x2d9fd8(0xbf),_0x490524+_0x2d9fd8(0x1af));if(fs[_0x2d9fd8(0x140)](_0x5d9406))try{const _0x115378=JSON[_0x2d9fd8(0x111)](fs[_0x2d9fd8(0xc1)](_0x5d9406,_0x2d9fd8(0x1e5)));this['sendTo'](_0x15b3a7[_0x2d9fd8(0x1bb)],_0x15b3a7[_0x2d9fd8(0x20d)],{'success':!![],'data':_0x115378},_0x15b3a7[_0x2d9fd8(0xbe)]);}catch(_0x2a6494){this['sendTo'](_0x15b3a7[_0x2d9fd8(0x1bb)],_0x15b3a7['command'],{'success':![],'error':_0x2d9fd8(0x128)},_0x15b3a7[_0x2d9fd8(0xbe)]);}else this[_0x2d9fd8(0x178)](_0x15b3a7[_0x2d9fd8(0x1bb)],_0x15b3a7[_0x2d9fd8(0x20d)],{'success':![],'error':'No\x20data'},_0x15b3a7[_0x2d9fd8(0xbe)]);}else{if(_0x15b3a7[_0x2d9fd8(0x20d)]===_0x2d9fd8(0x117)){const _0x2652a9=this['dailyDigests']['length'];let _0x32dff4=new Array(0x30)[_0x2d9fd8(0x120)](0x0),_0x44321d=Array['from']({'length':0x30},()=>[]);try{const _0x93b858=await this[_0x2d9fd8(0x114)](_0x2d9fd8(0x1ee));if(_0x93b858&&_0x93b858[_0x2d9fd8(0x209)])_0x32dff4=JSON[_0x2d9fd8(0x111)](_0x93b858[_0x2d9fd8(0x209)]);const _0x4c855b=await this[_0x2d9fd8(0x114)](_0x2d9fd8(0x215));if(_0x4c855b&&_0x4c855b[_0x2d9fd8(0x209)])_0x44321d=JSON[_0x2d9fd8(0x111)](_0x4c855b[_0x2d9fd8(0x209)]);}catch(_0x1918d6){}let _0x26980c=new Array(0x30)[_0x2d9fd8(0x120)](0x0);try{const _0x510372=new Date();_0x510372[_0x2d9fd8(0x156)](_0x510372[_0x2d9fd8(0x17d)]()-0x1);const _0x1109a0=_0x510372['toISOString']()[_0x2d9fd8(0xe7)]('T')[0x0],_0x23cfd3=utils['getAbsoluteDefaultDataDir'](),_0x3fd644=path[_0x2d9fd8(0x151)](_0x23cfd3,_0x2d9fd8(0x152),'history',_0x1109a0+_0x2d9fd8(0x1af));if(fs[_0x2d9fd8(0x140)](_0x3fd644)){const _0x5aca6a=JSON[_0x2d9fd8(0x111)](fs['readFileSync'](_0x3fd644,_0x2d9fd8(0x1e5)));if(_0x5aca6a&&_0x5aca6a[_0x2d9fd8(0x15b)])_0x26980c=_0x5aca6a[_0x2d9fd8(0x15b)];}}catch(_0x425d26){}let _0x38f30d={'today':{},'yesterday':{}};try{const _0x26209d=await this['getStateAsync'](_0x2d9fd8(0x1df));if(_0x26209d&&_0x26209d[_0x2d9fd8(0x209)])_0x38f30d=JSON[_0x2d9fd8(0x111)](_0x26209d[_0x2d9fd8(0x209)]);}catch(_0x1eb302){}let _0x3bd3f4=null;try{const _0x478602=await this[_0x2d9fd8(0x114)](_0x2d9fd8(0x161));if(_0x478602)_0x3bd3f4=_0x478602['val'];}catch(_0x369650){}if(_0x3bd3f4===undefined||_0x3bd3f4===null){const _0x31ebad=_0x32dff4['reduce']((_0x13a250,_0x642112)=>_0x13a250+_0x642112,0x0),_0x4445f2=Math['min'](0x2,Math[_0x2d9fd8(0x1ca)](-0x2,(0x64-_0x31ebad)/0x32));_0x3bd3f4=_0x4445f2;}let _0x9ebdea=![],_0x3722eb='',_0x53c5bf='',_0x42623d='';try{const _0x459d6a=await this[_0x2d9fd8(0x114)](_0x2d9fd8(0x149));if(_0x459d6a&&_0x459d6a[_0x2d9fd8(0x209)]){_0x9ebdea=!![];const _0xa8bff9=await this['getStateAsync']('analysis.automation.description');_0x3722eb=_0xa8bff9?_0xa8bff9[_0x2d9fd8(0x209)]:'';const _0x14ad7b=await this[_0x2d9fd8(0x114)](_0x2d9fd8(0x15e));_0x53c5bf=_0x14ad7b?_0x14ad7b['val']:'';const _0x16911d=await this['getStateAsync'](_0x2d9fd8(0xd6));_0x42623d=_0x16911d?_0x16911d[_0x2d9fd8(0x209)]:'';}}catch(_0x159fe2){}const _0x553948=await this[_0x2d9fd8(0x11b)](),_0xe1349=(this[_0x2d9fd8(0x155)][_0x2d9fd8(0xfe)]||[])['some'](_0x34e9f4=>_0x34e9f4['isSolar']),_0x3e7aa7=_0x553948&&_0xe1349;let _0x519ada='';try{const _0x2541a7=await this[_0x2d9fd8(0x114)](_0x2d9fd8(0x213));if(_0x2541a7&&_0x2541a7[_0x2d9fd8(0x209)])_0x519ada=_0x2541a7[_0x2d9fd8(0x209)];}catch(_0x30328e){}this[_0x2d9fd8(0x178)](_0x15b3a7[_0x2d9fd8(0x1bb)],_0x15b3a7[_0x2d9fd8(0x20d)],{'success':!![],'eventHistory':this['eventHistory'][_0x2d9fd8(0x177)](0x0,0x7d0),'stats':{'digestCount':_0x2652a9,'isPresent':this[_0x2d9fd8(0x187)],'hourlyActivity':_0x32dff4,'hourlyDetails':_0x44321d,'yesterdayActivity':_0x26980c,'solarActive':_0x3e7aa7,'presenceWho':_0x519ada,'roomStats':_0x38f30d,'activityTrend':_0x3bd3f4,'modules':this['activeModules']},'automation':{'detected':_0x9ebdea,'description':_0x3722eb,'targetId':_0x53c5bf,'targetValue':_0x42623d}},_0x15b3a7['callback']);}else{if(_0x15b3a7['command']===_0x2d9fd8(0xf0))try{const _0x5b6b87=await automation[_0x2d9fd8(0x14c)](this);this[_0x2d9fd8(0x178)](_0x15b3a7[_0x2d9fd8(0x1bb)],_0x15b3a7[_0x2d9fd8(0x20d)],{'success':!![],'results':_0x5b6b87},_0x15b3a7[_0x2d9fd8(0xbe)]);}catch(_0x2276f9){this[_0x2d9fd8(0x178)](_0x15b3a7['from'],_0x15b3a7[_0x2d9fd8(0x20d)],{'success':![],'error':_0x2276f9[_0x2d9fd8(0x169)]},_0x15b3a7[_0x2d9fd8(0xbe)]);}else{if(_0x15b3a7[_0x2d9fd8(0x20d)]===_0x2d9fd8(0x16f))try{const _0x50b837=await scanner[_0x2d9fd8(0x1f9)](this,_0x15b3a7[_0x2d9fd8(0x169)]||{});this['sendTo'](_0x15b3a7[_0x2d9fd8(0x1bb)],_0x15b3a7[_0x2d9fd8(0x20d)],{'success':!![],'devices':_0x50b837},_0x15b3a7['callback']);}catch(_0x20968d){}else{if(_0x15b3a7[_0x2d9fd8(0x20d)]===_0x2d9fd8(0x208)){const _0x1231bb=await this['getForeignObjectsAsync'](_0x2d9fd8(0x121),_0x2d9fd8(0x170)),_0xf00443=[];if(_0x1231bb)for(const _0x4deeba in _0x1231bb){let _0x1c2569=_0x1231bb[_0x4deeba][_0x2d9fd8(0x218)][_0x2d9fd8(0x11c)];if(_0x1c2569&&typeof _0x1c2569==='object')_0x1c2569=_0x1c2569['de']||_0x1c2569['en']||Object[_0x2d9fd8(0xb5)](_0x1c2569)[0x0]||JSON[_0x2d9fd8(0x18d)](_0x1c2569);_0xf00443[_0x2d9fd8(0xa9)]({'id':_0x4deeba,'name':String(_0x1c2569||_0x4deeba)});}const _0x4d9ce0=await this[_0x2d9fd8(0x11d)](_0x2d9fd8(0x20c),_0x2d9fd8(0x170)),_0x241faf=[];if(_0x4d9ce0)for(const _0x10e747 in _0x4d9ce0){let _0x41b5ce=_0x4d9ce0[_0x10e747][_0x2d9fd8(0x218)][_0x2d9fd8(0x11c)];if(_0x41b5ce&&typeof _0x41b5ce===_0x2d9fd8(0x1a9))_0x41b5ce=_0x41b5ce['de']||_0x41b5ce['en']||Object[_0x2d9fd8(0xb5)](_0x41b5ce)[0x0]||JSON[_0x2d9fd8(0x18d)](_0x41b5ce);_0x241faf[_0x2d9fd8(0xa9)](String(_0x41b5ce||_0x10e747['split']('.')['pop']()));}this[_0x2d9fd8(0x178)](_0x15b3a7['from'],_0x15b3a7[_0x2d9fd8(0x20d)],{'success':!![],'enums':_0xf00443,'rooms':_0x241faf},_0x15b3a7[_0x2d9fd8(0xbe)]);}else{if(_0x15b3a7[_0x2d9fd8(0x20d)]===_0x2d9fd8(0x18e))try{const _0x54c61d=await this[_0x2d9fd8(0x131)](_0x2d9fd8(0x211),_0x2d9fd8(0x1c3),{'startkey':_0x2d9fd8(0xcf),'endkey':_0x2d9fd8(0x174)}),_0x2fc2f3=new Set();if(_0x54c61d&&_0x54c61d[_0x2d9fd8(0xaf)])for(const _0x6d09b7 of _0x54c61d['rows']){const _0x530f7d=_0x6d09b7['id'][_0x2d9fd8(0x13f)]('system.adapter.',''),_0x5144a9=await this['getForeignStateAsync'](_0x530f7d+_0x2d9fd8(0x167));let _0x29639c=![];if(_0x5144a9&&_0x5144a9[_0x2d9fd8(0x209)]){const _0x3bd502=typeof _0x5144a9['val']==='string'?JSON[_0x2d9fd8(0x111)](_0x5144a9[_0x2d9fd8(0x209)]):_0x5144a9[_0x2d9fd8(0x209)];Array[_0x2d9fd8(0x13b)](_0x3bd502)&&_0x3bd502['forEach'](_0x5cca5c=>{const _0x2e5263=_0x2d9fd8;_0x5cca5c[_0x2e5263(0x1bf)]&&(_0x2fc2f3[_0x2e5263(0xf3)](_0x5cca5c[_0x2e5263(0x1bf)]),_0x29639c=!![]);});}!_0x29639c&&_0x2fc2f3['add'](_0x530f7d);}const _0x2e82cd=Array['from'](_0x2fc2f3);if(_0x2e82cd[_0x2d9fd8(0xd7)]===0x0)_0x2e82cd[_0x2d9fd8(0xa9)](_0x2d9fd8(0x1f8));this[_0x2d9fd8(0x178)](_0x15b3a7['from'],_0x15b3a7[_0x2d9fd8(0x20d)],{'success':!![],'names':_0x2e82cd},_0x15b3a7[_0x2d9fd8(0xbe)]);}catch(_0x2c469a){this['sendTo'](_0x15b3a7['from'],_0x15b3a7[_0x2d9fd8(0x20d)],{'success':![],'error':_0x2d9fd8(0x203)+_0x2c469a[_0x2d9fd8(0x169)]},_0x15b3a7[_0x2d9fd8(0xbe)]);}else{if(_0x15b3a7['command']==='refreshCalendar')try{await automation[_0x2d9fd8(0x108)](this),this['sendTo'](_0x15b3a7[_0x2d9fd8(0x1bb)],_0x15b3a7[_0x2d9fd8(0x20d)],{'success':!![]},_0x15b3a7[_0x2d9fd8(0xbe)]);}catch(_0x535d2b){this[_0x2d9fd8(0x11e)][_0x2d9fd8(0xb3)](_0x2d9fd8(0x181)+_0x535d2b[_0x2d9fd8(0x169)]),this[_0x2d9fd8(0x178)](_0x15b3a7[_0x2d9fd8(0x1bb)],_0x15b3a7['command'],{'success':![],'error':_0x535d2b[_0x2d9fd8(0x169)]},_0x15b3a7[_0x2d9fd8(0xbe)]);}else{if(_0x15b3a7[_0x2d9fd8(0x20d)]===_0x2d9fd8(0xdf))try{const _0x2f0fd4=_0x15b3a7['message'][_0x2d9fd8(0xb9)];if(!_0x2f0fd4||!Array[_0x2d9fd8(0x13b)](_0x2f0fd4))throw new Error('Invalid\x20matrix\x20data');const _0x376516=await this[_0x2d9fd8(0x114)](_0x2d9fd8(0xb0));if(_0x376516&&_0x376516[_0x2d9fd8(0x209)]){const _0x27e856=JSON[_0x2d9fd8(0x111)](_0x376516[_0x2d9fd8(0x209)]);_0x27e856[_0x2d9fd8(0xb9)]=_0x2f0fd4,_0x27e856['updated']=Date['now'](),await this[_0x2d9fd8(0x1c1)](_0x2d9fd8(0xb0),{'val':JSON['stringify'](_0x27e856),'ack':!![]}),this[_0x2d9fd8(0x11e)]['debug'](_0x2d9fd8(0x1c8)),this[_0x2d9fd8(0x178)](_0x15b3a7[_0x2d9fd8(0x1bb)],_0x15b3a7[_0x2d9fd8(0x20d)],{'success':!![]},_0x15b3a7[_0x2d9fd8(0xbe)]);}else throw new Error('No\x20topology\x20data\x20found');}catch(_0x1df676){this[_0x2d9fd8(0x11e)][_0x2d9fd8(0xb3)]('updateTopologyMatrix\x20failed:\x20'+_0x1df676['message']),this[_0x2d9fd8(0x178)](_0x15b3a7[_0x2d9fd8(0x1bb)],_0x15b3a7['command'],{'success':![],'error':_0x1df676[_0x2d9fd8(0x169)]},_0x15b3a7[_0x2d9fd8(0xbe)]);}else{if(_0x15b3a7[_0x2d9fd8(0x20d)]===_0x2d9fd8(0x207))try{const _0x2b9378=_0x15b3a7[_0x2d9fd8(0x169)]['command'],_0x553516=_0x15b3a7[_0x2d9fd8(0x169)];this[_0x2d9fd8(0x11e)]['debug']('[PythonBridge]\x20Forwarding\x20command:\x20'+_0x2b9378),pythonBridge[_0x2d9fd8(0x19a)](this,_0x2b9378,_0x553516,_0x19dea0=>{const _0xf18e7e=_0x2d9fd8;this['sendTo'](_0x15b3a7[_0xf18e7e(0x1bb)],_0x15b3a7[_0xf18e7e(0x20d)],_0x19dea0,_0x15b3a7[_0xf18e7e(0xbe)]);});}catch(_0x56b8c4){this['log'][_0x2d9fd8(0xb3)](_0x2d9fd8(0x1a2)+_0x56b8c4[_0x2d9fd8(0x169)]),this['sendTo'](_0x15b3a7[_0x2d9fd8(0x1bb)],_0x15b3a7[_0x2d9fd8(0x20d)],{'type':_0x2d9fd8(0xc8),'payload':_0x56b8c4[_0x2d9fd8(0x169)]},_0x15b3a7[_0x2d9fd8(0xbe)]);}else{if(_0x15b3a7[_0x2d9fd8(0x20d)]==='testApiKey')try{const _0x1613b7=_0x15b3a7[_0x2d9fd8(0x169)]?_0x15b3a7[_0x2d9fd8(0x169)]['apiKey']:'';if(!_0x1613b7)throw new Error('Kein\x20API\x20Key\x20√ºbergeben.');const _0x270df0=new GoogleGenerativeAI(_0x1613b7),_0x4d0fa6=_0x270df0[_0x2d9fd8(0x1b1)]({'model':GEMINI_MODEL}),_0x42374e=await _0x4d0fa6[_0x2d9fd8(0x12d)](_0x2d9fd8(0x195)),_0x4ddafe=await _0x42374e['response'],_0x18e45f=_0x4ddafe[_0x2d9fd8(0x15f)]();this[_0x2d9fd8(0x178)](_0x15b3a7[_0x2d9fd8(0x1bb)],_0x15b3a7[_0x2d9fd8(0x20d)],{'success':!![],'message':'Verbindung\x20erfolgreich:\x20'+_0x18e45f[_0x2d9fd8(0x1ce)](0x0,0x14)+'...'},_0x15b3a7['callback']);}catch(_0x166679){this[_0x2d9fd8(0x178)](_0x15b3a7[_0x2d9fd8(0x1bb)],_0x15b3a7['command'],{'success':![],'message':_0x166679[_0x2d9fd8(0x169)]},_0x15b3a7[_0x2d9fd8(0xbe)]);}else{if(_0x15b3a7[_0x2d9fd8(0x20d)]===_0x2d9fd8(0x14b))try{const _0x3993d4=await this['checkSolarCondition'](),_0x212741=await this[_0x2d9fd8(0x131)]('system',_0x2d9fd8(0x1c3),{'startkey':_0x2d9fd8(0xcf),'endkey':_0x2d9fd8(0x174)}),_0x2129ff=_0x212741&&_0x212741[_0x2d9fd8(0xaf)]?_0x212741[_0x2d9fd8(0xaf)][_0x2d9fd8(0xd7)]:0x0;this[_0x2d9fd8(0x178)](_0x15b3a7[_0x2d9fd8(0x1bb)],_0x15b3a7[_0x2d9fd8(0x20d)],{'success':!![],'weather':_0x2d9fd8(0x186)+_0x3993d4+_0x2d9fd8(0x1e7)+(this[_0x2d9fd8(0x1f1)][this[_0x2d9fd8(0x155)]['outdoorSensorId']]||'?')+'¬∞C','calendar':_0x2129ff+_0x2d9fd8(0x1f4)},_0x15b3a7[_0x2d9fd8(0xbe)]);}catch(_0x10e4bf){this[_0x2d9fd8(0x178)](_0x15b3a7[_0x2d9fd8(0x1bb)],_0x15b3a7[_0x2d9fd8(0x20d)],{'success':![]},_0x15b3a7[_0x2d9fd8(0xbe)]);}}}}}}}}}}}}}['runPythonHealthCheck'](){const _0x545a23=a0_0xc4dd52;if(!this['activeModules'][_0x545a23(0x1a6)])return;this[_0x545a23(0x11e)]['debug'](_0x545a23(0x1d7));try{const _0x4e058=this[_0x545a23(0x12e)]||[];pythonBridge['send'](this,_0x545a23(0x1dd),{'events':_0x4e058});}catch(_0x46d255){this[_0x545a23(0x11e)]['warn'](_0x545a23(0x15a));}}async['onStateChange'](_0x17a7a1,_0x1e46b6){const _0x31e3e7=a0_0xc4dd52;if(!_0x1e46b6||this[_0x31e3e7(0xf7)])return;if(_0x17a7a1['includes'](_0x31e3e7(0x130))&&_0x17a7a1[_0x31e3e7(0x106)](_0x31e3e7(0x189))&&_0x1e46b6[_0x31e3e7(0x209)])return;if(this[_0x31e3e7(0x155)]['infrasoundEnabled']&&_0x17a7a1===this['config'][_0x31e3e7(0x179)]&&this[_0x31e3e7(0xf4)][_0x31e3e7(0x1a5)]){this['handleInfrasound'](_0x1e46b6[_0x31e3e7(0x209)]);return;}if(_0x1e46b6[_0x31e3e7(0x1b4)]&&_0x17a7a1[_0x31e3e7(0x106)](_0x31e3e7(0xd9)))return;if(_0x17a7a1===this[_0x31e3e7(0x14f)]+_0x31e3e7(0xa8)){if(_0x1e46b6[_0x31e3e7(0x209)]&&Object['values'](setup[_0x31e3e7(0x17e)])[_0x31e3e7(0x138)](_0x1e46b6[_0x31e3e7(0x209)])){this[_0x31e3e7(0xb8)]=_0x1e46b6[_0x31e3e7(0x209)];if(_0x1e46b6['val']===setup['SYSTEM_MODES'][_0x31e3e7(0xde)])await recorder[_0x31e3e7(0x159)](this,![]);else await recorder[_0x31e3e7(0x159)](this,!![]);if(this['isProVersion']){let _0x138ab9=![],_0x18c41e=0x0,_0x5a85bf=_0x31e3e7(0x16b);if(this['currentSystemMode']===_0x31e3e7(0x17c))_0x138ab9=!![],_0x18c41e=0x168,_0x5a85bf=_0x31e3e7(0xcd);else this[_0x31e3e7(0xb8)]===_0x31e3e7(0x1d0)&&(_0x138ab9=!![],_0x18c41e=0x5a0,_0x5a85bf='Guest\x20Mode');pythonBridge[_0x31e3e7(0x19a)](this,_0x31e3e7(0x127),{'active':_0x138ab9,'duration':_0x18c41e,'label':_0x5a85bf}),await this['setStateAsync'](_0x31e3e7(0x123),{'val':JSON[_0x31e3e7(0x18d)]({'active':_0x138ab9,'label':_0x5a85bf,'timestamp':Date['now']()}),'ack':!![]});}}if(!_0x1e46b6[_0x31e3e7(0x1b4)])this['setState'](_0x17a7a1,{'val':this['currentSystemMode'],'ack':!![]});return;}if(_0x17a7a1[_0x31e3e7(0x106)](_0x31e3e7(0x141))&&_0x1e46b6[_0x31e3e7(0x1b4)])this[_0x31e3e7(0x1cb)](_0x1e46b6[_0x31e3e7(0x209)]);if(_0x17a7a1[_0x31e3e7(0x106)](_0x31e3e7(0x10a))&&_0x1e46b6['ack']&&this['activeModules'][_0x31e3e7(0x163)])automation[_0x31e3e7(0xc4)](this);if(!_0x1e46b6['ack']){if(_0x17a7a1['includes'](_0x31e3e7(0x1db))&&_0x1e46b6['val']){this['setState'](_0x17a7a1,{'val':![],'ack':!![]}),aiAgent[_0x31e3e7(0xb1)](this);return;}if(_0x17a7a1[_0x31e3e7(0x138)]('triggerDailyDigest')&&_0x1e46b6[_0x31e3e7(0x209)]){this[_0x31e3e7(0xb4)](_0x17a7a1,{'val':![],'ack':!![]});if(this[_0x31e3e7(0xba)])aiAgent['createDailyDigest'](this,pythonBridge);return;}if(_0x17a7a1['includes'](_0x31e3e7(0x1b8))&&_0x1e46b6[_0x31e3e7(0x209)]){this['setState'](_0x17a7a1,{'val':![],'ack':!![]}),aiAgent[_0x31e3e7(0x200)](this);return;}if(_0x17a7a1[_0x31e3e7(0x138)](_0x31e3e7(0x20f))&&_0x1e46b6[_0x31e3e7(0x209)]){this[_0x31e3e7(0xb4)](_0x17a7a1,{'val':![],'ack':!![]}),aiAgent[_0x31e3e7(0x144)](this);return;}if(_0x17a7a1[_0x31e3e7(0x138)](_0x31e3e7(0x1b0))&&_0x1e46b6[_0x31e3e7(0x209)]){this[_0x31e3e7(0xb4)](_0x17a7a1,{'val':![],'ack':!![]});if(this[_0x31e3e7(0xba)])try{const _0x383258=await this[_0x31e3e7(0x114)](_0x31e3e7(0x1b2));if(_0x383258&&_0x383258[_0x31e3e7(0x209)]){const _0x1d3298=JSON[_0x31e3e7(0x111)](_0x383258['val']);this[_0x31e3e7(0x1c1)](_0x31e3e7(0xc7),{'val':_0x31e3e7(0xd4),'ack':!![]}),pythonBridge['send'](this,'TRAIN_SECURITY',{'sequences':_0x1d3298});}}catch(_0x2cb653){}return;}if(_0x17a7a1[_0x31e3e7(0x138)](_0x31e3e7(0x100))&&_0x1e46b6[_0x31e3e7(0x209)]){this['setState'](_0x17a7a1,{'val':![],'ack':!![]});try{aiAgent[_0x31e3e7(0x14d)](this,_0x31e3e7(0x18b)),setTimeout(()=>aiAgent['generateHealthReport'](this,_0x31e3e7(0xab)),0x2ee0);if(this[_0x31e3e7(0xba)]){this[_0x31e3e7(0xe9)]();const _0x4b3bf6=await this['getStateAsync'](_0x31e3e7(0x142));if(_0x4b3bf6&&_0x4b3bf6[_0x31e3e7(0x209)])pythonBridge[_0x31e3e7(0x19a)](this,_0x31e3e7(0x18c),{'digests':JSON[_0x31e3e7(0x111)](_0x4b3bf6[_0x31e3e7(0x209)])});}}catch(_0x868044){this[_0x31e3e7(0x11e)][_0x31e3e7(0xb3)](_0x31e3e7(0xdc)+_0x868044[_0x31e3e7(0x169)]);}return;}if(_0x17a7a1[_0x31e3e7(0x138)](_0x31e3e7(0x1c9))&&_0x1e46b6[_0x31e3e7(0x209)]){this[_0x31e3e7(0xb4)](_0x17a7a1,{'val':![],'ack':!![]}),await this['triggerEnergyPrediction']();return;}if(_0x17a7a1[_0x31e3e7(0x138)]('analysis.training.triggerComfort')&&_0x1e46b6['val']){this[_0x31e3e7(0xb4)](_0x17a7a1,{'val':![],'ack':!![]});if(this[_0x31e3e7(0xba)])try{const _0x43a57f=await this[_0x31e3e7(0x114)](_0x31e3e7(0x1d6));if(_0x43a57f&&_0x43a57f[_0x31e3e7(0x209)]){const _0x2a3cee={};if(this[_0x31e3e7(0x155)][_0x31e3e7(0xfe)])this['config'][_0x31e3e7(0xfe)][_0x31e3e7(0x166)](_0x3b49ce=>{const _0x43e4b6=_0x31e3e7;if(_0x3b49ce['id']&&_0x3b49ce[_0x43e4b6(0x1e3)])_0x2a3cee[_0x3b49ce['id']]=_0x3b49ce['type'];});pythonBridge[_0x31e3e7(0x19a)](this,_0x31e3e7(0xd8),{'events':JSON['parse'](_0x43a57f[_0x31e3e7(0x209)]),'deviceMap':_0x2a3cee});}}catch(_0x310b99){}return;}if(_0x17a7a1[_0x31e3e7(0x138)](_0x31e3e7(0x172))&&_0x1e46b6[_0x31e3e7(0x209)]){this[_0x31e3e7(0xb4)](_0x17a7a1,{'val':![],'ack':!![]}),topology[_0x31e3e7(0xb2)](this);if(this[_0x31e3e7(0xba)])try{const _0x58a9e0=await this[_0x31e3e7(0x114)]('LTM.trainingData.sequences');if(_0x58a9e0&&_0x58a9e0['val'])pythonBridge['send'](this,_0x31e3e7(0x191),{'sequences':JSON['parse'](_0x58a9e0['val'])});}catch(_0x1446d1){}return;}}const _0x47d16d=(this[_0x31e3e7(0x155)][_0x31e3e7(0xfe)]||[])[_0x31e3e7(0x1a7)](_0x49168f=>_0x49168f['id']===_0x17a7a1);if(_0x47d16d){const _0x210402=await recorder[_0x31e3e7(0x19f)](this,_0x17a7a1,_0x1e46b6,_0x47d16d);_0x210402&&this[_0x31e3e7(0xb4)](_0x31e3e7(0xee),{'val':Date[_0x31e3e7(0x1ab)](),'ack':!![]});_0x210402&&_0x210402[_0x31e3e7(0x1e3)]===_0x31e3e7(0x1c4)&&_0x210402[_0x31e3e7(0xff)]&&this[_0x31e3e7(0xba)]&&deadMan[_0x31e3e7(0xed)](this,_0x210402[_0x31e3e7(0xff)]);_0x1e46b6['val']&&(_0x1e46b6['val']===!![]||_0x1e46b6['val']===0x1||String(_0x1e46b6[_0x31e3e7(0x209)])[_0x31e3e7(0x1a0)]()===_0x31e3e7(0x1ed))&&(_0x47d16d[_0x31e3e7(0x1e3)]&&(_0x47d16d[_0x31e3e7(0x1e3)][_0x31e3e7(0x138)](_0x31e3e7(0xd1))||_0x47d16d[_0x31e3e7(0x1e3)][_0x31e3e7(0x138)](_0x31e3e7(0x190)))&&this[_0x31e3e7(0x202)](_0x47d16d));if(_0x47d16d[_0x31e3e7(0x1e3)]===_0x31e3e7(0xcc)||_0x47d16d[_0x31e3e7(0x1e3)]===_0x31e3e7(0xe0)){if(this[_0x31e3e7(0xf4)][_0x31e3e7(0x163)])automation[_0x31e3e7(0x188)](this);}}}async[a0_0xc4dd52(0x1cb)](_0x4a87fb){const _0x2a6652=a0_0xc4dd52;if(!this['memoryCache']||Date['now']()-this[_0x2a6652(0x1a3)]>0x493e0)return;try{const _0xc4df13=JSON['parse'](_0x4a87fb),_0x58dddb=this[_0x2a6652(0x12a)][_0x2a6652(0x19d)];let _0x9c9331=![];for(const _0x24cfa1 in _0x58dddb){if(_0x58dddb[_0x24cfa1][_0x2a6652(0x138)]('AI')&&_0xc4df13[_0x24cfa1]&&!_0xc4df13[_0x24cfa1]['includes']('AI')){_0x9c9331=!![];break;}}_0x9c9331&&(await this['setStateAsync'](_0x2a6652(0x10a),{'val':JSON[_0x2a6652(0x18d)](this[_0x2a6652(0x12a)][_0x2a6652(0x1b5)]),'ack':!![]}),await this[_0x2a6652(0x1c1)](_0x2a6652(0x141),{'val':JSON[_0x2a6652(0x18d)](this[_0x2a6652(0x12a)]['sources']),'ack':!![]}));}catch(_0x2f3d78){}}async[a0_0xc4dd52(0x19e)](){const _0x5ec060=a0_0xc4dd52;try{const _0x4ba968=await this[_0x5ec060(0x114)](setup['SYSTEM_DP_MODE']);if(_0x4ba968&&_0x4ba968['val'])this[_0x5ec060(0xb8)]=_0x4ba968['val'];}catch(_0x40d36f){this[_0x5ec060(0xb8)]=setup[_0x5ec060(0x17e)][_0x5ec060(0x101)];}}async[a0_0xc4dd52(0xc6)](){const _0x3b5c68=a0_0xc4dd52,_0x1ed3d2=this[_0x3b5c68(0x155)][_0x3b5c68(0x10c)]||[];if(_0x1ed3d2[_0x3b5c68(0xd7)]===0x0)return![];const _0x4d1069=[],_0x22f261=Date[_0x3b5c68(0x1ab)](),_0x844eff=0x5*0x3c*0x3e8;for(const _0x4c2a2b of _0x1ed3d2){try{let _0x12a797=![];try{const _0x325b9a=await this['getForeignStateAsync'](_0x4c2a2b+_0x3b5c68(0x1c7));if(_0x325b9a&&_0x325b9a[_0x3b5c68(0x209)]===!![])_0x12a797=!![];}catch(_0x4ff7a5){}if(!_0x12a797)try{const _0x5db3da=await this['getForeignStateAsync'](_0x4c2a2b+'.last_seen');if(_0x5db3da&&_0x5db3da['ts']){const _0x53d3ac=_0x22f261-_0x5db3da['ts'];if(_0x53d3ac<_0x844eff)_0x12a797=!![];}}catch(_0x61bc0a){}if(!_0x12a797)try{const _0x4ce03f=await this['getForeignStateAsync'](_0x4c2a2b+_0x3b5c68(0x126));if(_0x4ce03f&&typeof _0x4ce03f['val']===_0x3b5c68(0x16a)&&_0x4ce03f[_0x3b5c68(0x209)]>0x0)_0x12a797=!![];}catch(_0x13e93d){}if(!_0x12a797)try{const _0x121f8b=await this[_0x3b5c68(0x119)](_0x4c2a2b);if(_0x121f8b){const _0xe31e0b=_0x22f261-(_0x121f8b['ts']||0x0);_0xe31e0b<_0x844eff&&(_0x121f8b[_0x3b5c68(0x209)]===!![]||_0x121f8b['val']===_0x3b5c68(0x217)||_0x121f8b[_0x3b5c68(0x209)]===0x1)&&(_0x12a797=!![]);}}catch(_0x3a76d3){}if(_0x12a797){const _0x4bba96=_0x4c2a2b[_0x3b5c68(0xe7)]('.'),_0x4e8988=_0x4bba96[_0x4bba96[_0x3b5c68(0xd7)]-0x1]||_0x4c2a2b;_0x4d1069[_0x3b5c68(0xa9)](_0x4e8988);}}catch(_0x39e3d8){this[_0x3b5c68(0x11e)][_0x3b5c68(0xb3)](_0x3b5c68(0x132)+_0x4c2a2b+':\x20'+_0x39e3d8['message']);}}const _0x5df8ee=_0x4d1069[_0x3b5c68(0xd7)]>0x0?_0x4d1069[_0x3b5c68(0x151)](',\x20'):_0x3b5c68(0xce);return await this['setStateAsync'](_0x3b5c68(0x213),{'val':_0x5df8ee,'ack':!![]}),_0x4d1069[_0x3b5c68(0xd7)]>0x0;}async[a0_0xc4dd52(0x168)](){const _0x356539=a0_0xc4dd52;await aiAgent[_0x356539(0xb1)](this);this[_0x356539(0xf4)][_0x356539(0x1a6)]&&(this[_0x356539(0x129)](),this['triggerGaitAnalysis']());if(this[_0x356539(0xf4)][_0x356539(0x163)])this[_0x356539(0xf8)]();}async[a0_0xc4dd52(0x11b)](){const _0x20e6e9=a0_0xc4dd52,_0xb06b9=[_0x20e6e9(0x104),_0x20e6e9(0xc5),'daswetter.0'],_0x4a51ff=[_0x20e6e9(0xa7),_0x20e6e9(0x199),_0x20e6e9(0xe3)];for(const _0x38bc3d of _0xb06b9){for(const _0x397f91 of _0x4a51ff){try{const _0xb4b8fa=_0x38bc3d+'.'+_0x397f91,_0x525af1=await this[_0x20e6e9(0x119)](_0xb4b8fa);if(_0x525af1&&_0x525af1[_0x20e6e9(0x209)]){const _0x292f33=String(_0x525af1['val'])['toLowerCase']();if(_0x292f33[_0x20e6e9(0x138)](_0x20e6e9(0x1fe))||_0x292f33[_0x20e6e9(0x138)](_0x20e6e9(0x1ef))||_0x292f33['includes'](_0x20e6e9(0x153))||_0x292f33[_0x20e6e9(0x138)]('sonn')||_0x292f33['includes'](_0x20e6e9(0x1aa)))return this[_0x20e6e9(0x11e)][_0x20e6e9(0x1d4)]('‚òÄÔ∏è\x20Solar\x20Condition:\x20SUNNY\x20detected\x20via\x20'+_0xb4b8fa),!![];}}catch(_0x34bd61){}}}return![];}[a0_0xc4dd52(0xbd)](){const _0x3c97a6=a0_0xc4dd52;if(!this['isProVersion'])return;try{this[_0x3c97a6(0x114)](_0x3c97a6(0x1b2),(_0xa34dbd,_0x332943)=>{const _0x4fb6df=_0x3c97a6;if(_0xa34dbd||!_0x332943||!_0x332943[_0x4fb6df(0x209)])return;try{const _0x28a013=JSON[_0x4fb6df(0x111)](_0x332943['val']);if(!_0x28a013||_0x28a013[_0x4fb6df(0xd7)]===0x0)return;pythonBridge[_0x4fb6df(0x19a)](this,_0x4fb6df(0xe2),{'sequences':_0x28a013}),this['log'][_0x4fb6df(0x1d4)](_0x4fb6df(0xd3)+_0x28a013[_0x4fb6df(0xd7)]+_0x4fb6df(0x10b));}catch(_0x1fb880){this[_0x4fb6df(0x11e)][_0x4fb6df(0xb3)]('triggerGaitAnalysis\x20parse\x20error:\x20'+_0x1fb880[_0x4fb6df(0x169)]);}});}catch(_0x16a3fc){this[_0x3c97a6(0x11e)][_0x3c97a6(0xb3)](_0x3c97a6(0xf6)+_0x16a3fc[_0x3c97a6(0x169)]);}}async['triggerEnergyPrediction'](){const _0x2d4442=a0_0xc4dd52;if(!this[_0x2d4442(0xba)]||!this[_0x2d4442(0xf4)]['energy'])return;try{const _0x380753={},_0x8414fc={},_0x517eb1=this[_0x2d4442(0x155)]['devices']||[];for(const _0x242458 of _0x517eb1){if((_0x242458['type']==='temperature'||_0x242458[_0x2d4442(0x1e3)]===_0x2d4442(0xe0))&&_0x242458[_0x2d4442(0xff)])try{const _0x5d53b8=await this['getForeignStateAsync'](_0x242458['id']);_0x5d53b8&&typeof _0x5d53b8[_0x2d4442(0x209)]===_0x2d4442(0x16a)&&(_0x380753[_0x242458['location']]=_0x5d53b8[_0x2d4442(0x209)],_0x8414fc[_0x242458[_0x2d4442(0xff)]]=_0x242458['isSolar']||![]);}catch(_0x5e348b){}}let _0x53857e=0xa;if(this['config'][_0x2d4442(0x115)])try{const _0x22cd5d=await this[_0x2d4442(0x119)](this[_0x2d4442(0x155)][_0x2d4442(0x115)]);if(_0x22cd5d&&typeof _0x22cd5d['val']==='number')_0x53857e=_0x22cd5d[_0x2d4442(0x209)];}catch(_0x3da1ff){}const _0x5d1a12=await this['checkSolarCondition']();let _0x26ab17={};try{const _0x9ea5ed=await this[_0x2d4442(0x114)](_0x2d4442(0x136));if(_0x9ea5ed&&_0x9ea5ed[_0x2d4442(0x209)])_0x26ab17=JSON[_0x2d4442(0x111)](_0x9ea5ed[_0x2d4442(0x209)]);}catch(_0x33895c){}pythonBridge[_0x2d4442(0x19a)](this,_0x2d4442(0x18f),{'current_temps':_0x380753,'t_out':_0x53857e,'is_sunny':_0x5d1a12,'solar_flags':_0x8414fc,'warmup_targets':_0x26ab17}),this[_0x2d4442(0x11e)]['info'](_0x2d4442(0x164)+Object[_0x2d4442(0x1ac)](_0x380753)[_0x2d4442(0xd7)]+'\x20rooms)');}catch(_0x21046a){this[_0x2d4442(0x11e)][_0x2d4442(0xb3)]('triggerEnergyPrediction\x20Error:\x20'+_0x21046a[_0x2d4442(0x169)]);}}[a0_0xc4dd52(0x129)](){const _0x361687=a0_0xc4dd52;if(!this[_0x361687(0x12e)]||this['rawEventLog']['length']===0x0)return;const _0x214a51=new Array(0x30)[_0x361687(0x120)](0x0),_0x4b713c=Array[_0x361687(0x1bb)]({'length':0x30},()=>[]),_0x10e232=new Date()[_0x361687(0xca)](0x0,0x0,0x0,0x0);this[_0x361687(0x12e)][_0x361687(0x166)](_0x2495c6=>{const _0x3f2c74=_0x361687,_0x522101=new Date(_0x2495c6[_0x3f2c74(0x194)]);if(_0x522101[_0x3f2c74(0x15c)]()>=_0x10e232){const _0x34486d=_0x522101[_0x3f2c74(0x107)](),_0x571130=_0x522101[_0x3f2c74(0xc9)](),_0x357f96=_0x34486d*0x2+Math[_0x3f2c74(0x1d9)](_0x571130/0x1e);_0x357f96>=0x0&&_0x357f96<0x30&&(_0x214a51[_0x357f96]++,_0x4b713c[_0x357f96][_0x3f2c74(0xa9)]({'time':_0x522101[_0x3f2c74(0x10e)](_0x3f2c74(0x1fc),{'hour':'2-digit','minute':'2-digit'}),'location':_0x2495c6[_0x3f2c74(0xff)]||_0x3f2c74(0x183),'type':_0x2495c6['type']||_0x3f2c74(0x1dc)}));}}),this['setStateAsync'](_0x361687(0x1ee),{'val':JSON[_0x361687(0x18d)](_0x214a51),'ack':!![]}),this[_0x361687(0x1c1)](_0x361687(0x215),{'val':JSON['stringify'](_0x4b713c),'ack':!![]});}async[a0_0xc4dd52(0x103)](_0x324f82){const _0x5f131b=a0_0xc4dd52;if(!this[_0x5f131b(0x155)][_0x5f131b(0x1e1)]||typeof _0x324f82!=='number')return;const _0x2c8e2d=this[_0x5f131b(0x155)][_0x5f131b(0x197)]||0.04;this[_0x5f131b(0xd2)]['push']({'timestamp':Date[_0x5f131b(0x1ab)](),'value':_0x324f82}),this[_0x5f131b(0xd2)][_0x5f131b(0xd7)]>0x64&&this[_0x5f131b(0xd2)]['shift'](),_0x324f82>_0x2c8e2d&&!this[_0x5f131b(0x212)]&&(this['infrasoundLocked']=!![],this[_0x5f131b(0x11e)]['warn'](_0x5f131b(0x112)+_0x324f82[_0x5f131b(0xbb)](0x4)+'\x20>\x20'+_0x2c8e2d+_0x5f131b(0x143)),await this[_0x5f131b(0xc3)](_0x324f82,_0x5f131b(0x10d)),setTimeout(()=>{const _0x529c2f=_0x5f131b;this[_0x529c2f(0x212)]=![];},0x5*0x3c*0x3e8));}async[a0_0xc4dd52(0xc3)](_0x5decf3,_0x2f6cf1){const _0xc18749=a0_0xc4dd52;if(!this[_0xc18749(0x187)]){const _0x5570cd=this[_0xc18749(0x1e8)]['slice'](0x0,0xa),_0x37f874=_0x5570cd[_0xc18749(0xcb)](_0x2e551b=>new Date(_0x2e551b[_0xc18749(0x194)])[_0xc18749(0x10e)](_0xc18749(0x1fc))+_0xc18749(0x16e)+(_0x2e551b[_0xc18749(0xff)]||_0xc18749(0x1b7))+':\x20'+_0x2e551b['name'])[_0xc18749(0x151)]('\x0a');this['log'][_0xc18749(0xb3)](_0xc18749(0x1fd)+_0x5decf3['toFixed'](0x4)+',\x20Events:\x0a'+_0x37f874);if(this[_0xc18749(0x155)][_0xc18749(0x17f)])try{const _0x19611f=await this['getForeignStateAsync'](this[_0xc18749(0x155)][_0xc18749(0x17f)]);_0x19611f&&_0x19611f[_0xc18749(0x209)]===!![]&&(await this[_0xc18749(0x1c1)](_0xc18749(0x1e2),{'val':JSON[_0xc18749(0x18d)]({'timestamp':Date[_0xc18749(0x1ab)](),'pressure':_0x5decf3[_0xc18749(0xbb)](0x4),'eventType':_0x2f6cf1,'recentEvents':_0x5570cd[_0xc18749(0x177)](0x0,0x3)}),'ack':!![]}),this[_0xc18749(0x11e)][_0xc18749(0x185)]('üö®\x20INFRASCHALL-ALARM:\x20Anomalie\x20bei\x20Abwesenheit\x20(scharf)!'));}catch(_0x3e7748){}}else this['log'][_0xc18749(0x1d4)](_0xc18749(0x20b)+_0x5decf3[_0xc18749(0xbb)](0x4)+_0xc18749(0x1fb));}async[a0_0xc4dd52(0x202)](_0x19e970){const _0x4ecc21=a0_0xc4dd52;if(!_0x19e970||!_0x19e970[_0x4ecc21(0xff)])return;try{const _0x55d0d0=(this[_0x4ecc21(0x155)][_0x4ecc21(0xfe)]||[])[_0x4ecc21(0x205)](_0x1211c3=>_0x1211c3[_0x4ecc21(0xff)]===_0x19e970['location']&&(_0x1211c3[_0x4ecc21(0x1e3)]===_0x4ecc21(0xcc)||_0x1211c3[_0x4ecc21(0x1e3)]==='thermostat'));if(_0x55d0d0[_0x4ecc21(0xd7)]===0x0)return;const _0x31818e=await this[_0x4ecc21(0x119)](_0x55d0d0[0x0]['id']);if(!_0x31818e||typeof _0x31818e[_0x4ecc21(0x209)]!==_0x4ecc21(0x16a))return;const _0x35f178=_0x31818e[_0x4ecc21(0x209)];let _0x4c39f4=null;if(this[_0x4ecc21(0x155)][_0x4ecc21(0x115)]){const _0x16c307=await this[_0x4ecc21(0x119)](this[_0x4ecc21(0x155)]['weatherTempId']);_0x16c307&&typeof _0x16c307[_0x4ecc21(0x209)]===_0x4ecc21(0x16a)&&(_0x4c39f4=_0x16c307[_0x4ecc21(0x209)]);}if(_0x4c39f4!==null){const _0x50eb49=Math[_0x4ecc21(0x206)](_0x35f178-_0x4c39f4);_0x50eb49>0x3&&(this[_0x4ecc21(0x11e)]['debug']('üí®\x20L√ºftung\x20in\x20'+_0x19e970['location']+':\x20Temp-Differenz\x20'+_0x50eb49[_0x4ecc21(0xbb)](0x1)+_0x4ecc21(0x20e)+_0x35f178+_0x4ecc21(0x1be)+_0x4c39f4+_0x4ecc21(0xfc)),await this[_0x4ecc21(0x1c1)](_0x4ecc21(0x176),{'val':JSON[_0x4ecc21(0x18d)]({'room':_0x19e970[_0x4ecc21(0xff)],'timestamp':Date[_0x4ecc21(0x1ab)](),'tempDiff':_0x50eb49[_0x4ecc21(0xbb)](0x1),'recommendation':_0x50eb49>0x5?'Gute\x20L√ºftungsm√∂glichkeit!':'L√ºften\x20empfohlen'}),'ack':!![]}));}}catch(_0x53ea4a){this[_0x4ecc21(0x11e)][_0x4ecc21(0xb3)](_0x4ecc21(0xf5)+_0x53ea4a[_0x4ecc21(0x169)]);}}async[a0_0xc4dd52(0x1e9)](_0x25cdb1){const _0x4495e9=a0_0xc4dd52;if(!_0x25cdb1||typeof _0x25cdb1!==_0x4495e9(0x1a9))return;const _0x2a45dd={'timestamp':_0x25cdb1[_0x4495e9(0x194)]||Date['now'](),'id':_0x25cdb1['id']||Date[_0x4495e9(0x1ab)]()['toString'](),'name':_0x25cdb1[_0x4495e9(0x11c)]||_0x4495e9(0x134),'type':_0x25cdb1[_0x4495e9(0x1e3)]||_0x4495e9(0xac),'location':_0x25cdb1[_0x4495e9(0xff)]||_0x4495e9(0x1b7),'value':_0x25cdb1['value']||null};this[_0x4495e9(0x1e8)][_0x4495e9(0xe1)](_0x2a45dd);if(this[_0x4495e9(0x1e8)][_0x4495e9(0xd7)]>0x1388)this[_0x4495e9(0x1e8)]['pop']();await this[_0x4495e9(0x1c1)]('events.history',{'val':JSON[_0x4495e9(0x18d)](this[_0x4495e9(0x1e8)]),'ack':!![]}),this['log'][_0x4495e9(0x1d4)](_0x4495e9(0xc0)+_0x2a45dd[_0x4495e9(0x11c)]+'\x20('+_0x2a45dd[_0x4495e9(0xff)]+')');}[a0_0xc4dd52(0x1f2)](_0x42cc80){}}function a0_0x4298(_0x94a52b,_0x3a9920){const _0x16530f=a0_0x59ac();return a0_0x4298=function(_0x1ab3a7,_0x4918e2){_0x1ab3a7=_0x1ab3a7-0xa6;let _0x59acfe=_0x16530f[_0x1ab3a7];return _0x59acfe;},a0_0x4298(_0x94a52b,_0x3a9920);}if(require[a0_0xc4dd52(0x19b)]!==module)module[a0_0xc4dd52(0x198)]=_0x57bbdd=>new CogniLiving(_0x57bbdd);else new CogniLiving();