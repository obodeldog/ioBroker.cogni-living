const a0_0xc0a47e=a0_0x153f;(function(_0x29ff41,_0x4fefb2){const _0x18938f=a0_0x153f,_0x5a7f43=_0x29ff41();while(!![]){try{const _0x37cc24=-parseInt(_0x18938f(0x269))/0x1+-parseInt(_0x18938f(0x18c))/0x2*(-parseInt(_0x18938f(0x229))/0x3)+-parseInt(_0x18938f(0x1c7))/0x4*(parseInt(_0x18938f(0x210))/0x5)+-parseInt(_0x18938f(0x232))/0x6*(-parseInt(_0x18938f(0x1bf))/0x7)+parseInt(_0x18938f(0x20b))/0x8+-parseInt(_0x18938f(0x262))/0x9*(-parseInt(_0x18938f(0x185))/0xa)+parseInt(_0x18938f(0x250))/0xb*(-parseInt(_0x18938f(0x25b))/0xc);if(_0x37cc24===_0x4fefb2)break;else _0x5a7f43['push'](_0x5a7f43['shift']());}catch(_0x58a3bc){_0x5a7f43['push'](_0x5a7f43['shift']());}}}(a0_0x3a7f,0xa5257));const a0_0x4c9d9f=(function(){let _0x42c5be=!![];return function(_0x2adce7,_0x216a18){const _0x658c8d=_0x42c5be?function(){const _0x178892=a0_0x153f;if(_0x216a18){const _0xcbb40a=_0x216a18[_0x178892(0x1e8)](_0x2adce7,arguments);return _0x216a18=null,_0xcbb40a;}}:function(){};return _0x42c5be=![],_0x658c8d;};}()),a0_0x5435bd=a0_0x4c9d9f(this,function(){const _0x49d52e=a0_0x153f;return a0_0x5435bd[_0x49d52e(0x26c)]()[_0x49d52e(0x24c)](_0x49d52e(0x237))[_0x49d52e(0x26c)]()['constructor'](a0_0x5435bd)[_0x49d52e(0x24c)]('(((.+)+)+)+$');});a0_0x5435bd();'use strict';const utils=require(a0_0xc0a47e(0x1a0)),{GoogleGenerativeAI}=require(a0_0xc0a47e(0x25a)),schedule=require('node-schedule'),HISTORY_MAX_SIZE=0x32,ANALYSIS_HISTORY_MAX_SIZE=0x64,RAW_LOG_MAX_SIZE=0x5dc,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0xc0a47e(0x165),LTM_SCHEDULE=a0_0xc0a47e(0x13c),MODE_RESET_SCHEDULE='0\x204\x20*\x20*\x20*',LTM_DP_RAW_LOG='LTM.rawEventLog',LTM_DP_DAILY_DIGESTS=a0_0xc0a47e(0x1f2),LTM_DP_STATUS=a0_0xc0a47e(0x280),LTM_DP_TRIGGER_DIGEST=a0_0xc0a47e(0x199),LTM_DP_BASELINE_STATUS=a0_0xc0a47e(0x152),LTM_DP_DRIFT_CHANNEL=a0_0xc0a47e(0x16e),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS=a0_0xc0a47e(0x164),LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE=a0_0xc0a47e(0x16f),SYSTEM_MODES={'NORMAL':'normal','VACATION':a0_0xc0a47e(0x1e1),'PARTY':a0_0xc0a47e(0x12a),'GUEST':'guest'},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0xc0a47e(0x1b9)],SYSTEM_MODES[a0_0xc0a47e(0x196)]],EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,PERSONA_MAPPING={'generic':a0_0xc0a47e(0x19a),'senior_aal':a0_0xc0a47e(0x236),'family':a0_0xc0a47e(0x15d),'single_comfort':a0_0xc0a47e(0x253),'security':a0_0xc0a47e(0x184)};class CogniLiving extends utils[a0_0xc0a47e(0x263)]{constructor(_0x364334){const _0x45dc16=a0_0xc0a47e;super({..._0x364334,'name':_0x45dc16(0x1f6)}),this[_0x45dc16(0x18b)]=[],this[_0x45dc16(0x235)]=[],this['feedbackHistory']=[],this[_0x45dc16(0x209)]=[],this[_0x45dc16(0x146)]=[],this[_0x45dc16(0x21a)]={},this[_0x45dc16(0x1a8)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x45dc16(0x251)]=!![],this[_0x45dc16(0x201)]=null,this[_0x45dc16(0x1ee)]=null,this[_0x45dc16(0x1fa)]=![],this['genAI']=null,this[_0x45dc16(0x134)]=null,this[_0x45dc16(0x274)]=SYSTEM_MODES[_0x45dc16(0x1c0)],this['isProVersion']=![],this[_0x45dc16(0x22c)]=![],this[_0x45dc16(0x1ce)]='unknown',this['analysisTimer']=null,this[_0x45dc16(0x1e5)]=null,this[_0x45dc16(0x15c)]=null,this[_0x45dc16(0x238)]=null,this[_0x45dc16(0x169)]=null,this['on']('ready',this[_0x45dc16(0x15a)][_0x45dc16(0x1b8)](this)),this['on'](_0x45dc16(0x25f),this[_0x45dc16(0x203)][_0x45dc16(0x1b8)](this)),this['on'](_0x45dc16(0x268),this[_0x45dc16(0x21b)]['bind'](this)),this['on'](_0x45dc16(0x1e3),this[_0x45dc16(0x153)][_0x45dc16(0x1b8)](this));}async[a0_0xc0a47e(0x15a)](){const _0x3d69b5=a0_0xc0a47e;this['log']['info'](_0x3d69b5(0x226)+this['version']+_0x3d69b5(0x20f)),await initZombies(this),this[_0x3d69b5(0x178)][_0x3d69b5(0x23e)]=this['config']['licenseKey']||'';try{this[_0x3d69b5(0x20d)]=await checkLicense(this,this['config'][_0x3d69b5(0x23e)]);}catch(_0x3d8214){this[_0x3d69b5(0x1b2)][_0x3d69b5(0x1ba)](_0x3d69b5(0x1bb)+_0x3d8214['message']);}if(!this[_0x3d69b5(0x178)][_0x3d69b5(0x22a)]||this[_0x3d69b5(0x178)][_0x3d69b5(0x22a)]<0.1)this[_0x3d69b5(0x178)]['inactivityThresholdHours']=0xc;await initHistory(this),await initSystemConfig(this);if(this['config'][_0x3d69b5(0x1a5)])try{this[_0x3d69b5(0x216)]=new GoogleGenerativeAI(this[_0x3d69b5(0x178)]['geminiApiKey']),this[_0x3d69b5(0x134)]=this['genAI'][_0x3d69b5(0x14b)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x3d69b5(0x1ad)}}),this[_0x3d69b5(0x1b2)][_0x3d69b5(0x217)](_0x3d69b5(0x170));}catch(_0x4c080e){this['log'][_0x3d69b5(0x1ba)](_0x3d69b5(0x12d)+_0x4c080e[_0x3d69b5(0x1e3)]);}await createAllObjects(this),await loadSystemMode(this),await loadRawEventLog(this),await loadDailyDigests(this),this['subscribeStates'](_0x3d69b5(0x247)),this[_0x3d69b5(0x24e)](LTM_DP_TRIGGER_DIGEST),this[_0x3d69b5(0x24e)](_0x3d69b5(0x16f)),this[_0x3d69b5(0x24e)](_0x3d69b5(0x231));const _0x434ce7=this[_0x3d69b5(0x178)][_0x3d69b5(0x227)];if(_0x434ce7&&_0x434ce7[_0x3d69b5(0x219)]>0x0){this[_0x3d69b5(0x1b2)]['info']('Subscribing\x20to\x20'+_0x434ce7['length']+_0x3d69b5(0x1a9));for(const _0x4bfb63 of _0x434ce7){if(_0x4bfb63['id']){await this[_0x3d69b5(0x190)](_0x4bfb63['id']);try{const _0x52f589=await this['getForeignStateAsync'](_0x4bfb63['id']);if(_0x52f589)this[_0x3d69b5(0x21a)][_0x4bfb63['id']]=_0x52f589[_0x3d69b5(0x228)];}catch(_0x11b847){}}}}const _0x476529=this['config'][_0x3d69b5(0x139)]||[];if(_0x476529[_0x3d69b5(0x219)]>0x0){this[_0x3d69b5(0x1b2)][_0x3d69b5(0x217)]('Subscribing\x20to\x20'+_0x476529[_0x3d69b5(0x219)]+_0x3d69b5(0x25c));for(const _0x1d7854 of _0x476529){await this[_0x3d69b5(0x190)](_0x1d7854);}try{await checkWifiPresence(this);}catch(_0x141be5){}}if(this['analysisTimer'])clearInterval(this[_0x3d69b5(0x1c2)]);const _0x20b54a=this[_0x3d69b5(0x178)][_0x3d69b5(0x1ac)]||0xf;_0x20b54a>0x0&&(this[_0x3d69b5(0x1b2)][_0x3d69b5(0x217)](_0x3d69b5(0x19c)+_0x20b54a+_0x3d69b5(0x179)+this[_0x3d69b5(0x178)]['inactivityThresholdHours']+'h.'),this[_0x3d69b5(0x1c2)]=setInterval(()=>{const _0x22893a=_0x3d69b5;try{runAutopilot(this);}catch(_0x1253fa){this['log']['error']('Autopilot\x20error:\x20'+_0x1253fa[_0x22893a(0x1e3)]);}},_0x20b54a*0x3c*0x3e8)),setupLtmScheduler(this),setupModeResetScheduler(this),setupDriftAnalysisScheduler(this),setupBriefingScheduler(this);}[a0_0xc0a47e(0x21b)](_0x469eb8){const _0x254e7a=a0_0xc0a47e;if(this[_0x254e7a(0x1c2)])clearInterval(this[_0x254e7a(0x1c2)]);if(this[_0x254e7a(0x238)])clearInterval(this['driftAnalysisTimer']);if(this[_0x254e7a(0x1e5)])this[_0x254e7a(0x1e5)][_0x254e7a(0x1aa)]();if(this['modeResetJob'])this['modeResetJob'][_0x254e7a(0x1aa)]();if(this[_0x254e7a(0x169)])this['briefingJob'][_0x254e7a(0x1aa)]();if(this[_0x254e7a(0x201)])clearTimeout(this['exitTimer']);if(this[_0x254e7a(0x1ee)])clearTimeout(this[_0x254e7a(0x1ee)]);_0x469eb8();}async[a0_0xc0a47e(0x203)](_0x39782e,_0x27ffd1){const _0x19556a=a0_0xc0a47e;if(!_0x27ffd1)return;if(_0x39782e===this[_0x19556a(0x14f)]+'.'+SYSTEM_DP_MODE){_0x27ffd1[_0x19556a(0x228)]&&Object[_0x19556a(0x1a2)](SYSTEM_MODES)[_0x19556a(0x173)](_0x27ffd1[_0x19556a(0x228)])&&(this['currentSystemMode']=_0x27ffd1[_0x19556a(0x228)],_0x27ffd1[_0x19556a(0x228)]===SYSTEM_MODES['VACATION']?await setPresence(this,![]):await setPresence(this,!![]));if(!_0x27ffd1[_0x19556a(0x12e)])this[_0x19556a(0x254)](_0x39782e,{'val':this[_0x19556a(0x274)],'ack':!![]});return;}if(!_0x27ffd1['ack']){_0x39782e[_0x19556a(0x173)]('analysis.trigger')&&_0x27ffd1['val']&&(this[_0x19556a(0x254)](_0x39782e,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x39782e[_0x19556a(0x173)](_0x19556a(0x1f8))&&_0x27ffd1[_0x19556a(0x228)]){this[_0x19556a(0x254)](_0x39782e,{'val':![],'ack':!![]});if(this[_0x19556a(0x20d)])createDailyDigest(this);}_0x39782e['includes'](_0x19556a(0x270))&&_0x27ffd1[_0x19556a(0x228)]&&(this['setState'](_0x39782e,{'val':![],'ack':!![]}),sendMorningBriefing(this));return;}if(this[_0x19556a(0x178)][_0x19556a(0x139)]&&this['config'][_0x19556a(0x139)][_0x19556a(0x173)](_0x39782e)){await checkWifiPresence(this);return;}const _0x260f7c=(this[_0x19556a(0x178)]['devices']||[])['find'](_0x292b48=>_0x292b48['id']===_0x39782e);if(_0x260f7c)processSensorEvent(this,_0x39782e,_0x27ffd1,_0x260f7c);}async[a0_0xc0a47e(0x153)](_0x1308ef){const _0x1c1d93=a0_0xc0a47e;if(typeof _0x1308ef===_0x1c1d93(0x163)&&_0x1308ef[_0x1c1d93(0x1e3)])try{if(_0x1308ef['command']===_0x1c1d93(0x1ab)){if(!_0x1308ef[_0x1c1d93(0x1e3)][_0x1c1d93(0x140)])return this[_0x1c1d93(0x149)](_0x1308ef[_0x1c1d93(0x1bc)],_0x1308ef[_0x1c1d93(0x1eb)],{'success':![],'message':_0x1c1d93(0x191)},_0x1308ef[_0x1c1d93(0x21e)]);try{const _0x5b134d=new GoogleGenerativeAI(_0x1308ef[_0x1c1d93(0x1e3)][_0x1c1d93(0x140)])[_0x1c1d93(0x14b)]({'model':'models/gemini-flash-latest'});await _0x5b134d['generateContent'](_0x1c1d93(0x204)),this['sendTo'](_0x1308ef[_0x1c1d93(0x1bc)],_0x1308ef[_0x1c1d93(0x1eb)],{'success':!![],'message':'Success'},_0x1308ef[_0x1c1d93(0x21e)]);}catch(_0x202948){this['sendTo'](_0x1308ef[_0x1c1d93(0x1bc)],_0x1308ef[_0x1c1d93(0x1eb)],{'success':![],'message':_0x202948[_0x1c1d93(0x1e3)]},_0x1308ef[_0x1c1d93(0x21e)]);}}else{if(_0x1308ef[_0x1c1d93(0x1eb)]==='testNotification'){const _0x5352e4=await sendNotification(this,_0x1c1d93(0x150),!![]);this[_0x1c1d93(0x149)](_0x1308ef['from'],_0x1308ef[_0x1c1d93(0x1eb)],{'success':_0x5352e4>0x0,'message':_0x5352e4+_0x1c1d93(0x211)},_0x1308ef['callback']);}else{if(_0x1308ef[_0x1c1d93(0x1eb)]===_0x1c1d93(0x271)){if(!this[_0x1c1d93(0x20d)])return this[_0x1c1d93(0x149)](_0x1308ef[_0x1c1d93(0x1bc)],_0x1308ef[_0x1c1d93(0x1eb)],{'success':![],'isPro':![]},_0x1308ef[_0x1c1d93(0x21e)]);let _0xdca973={'status':_0x1c1d93(0x22f),'details':'','lastCheck':0x0};try{_0xdca973[_0x1c1d93(0x266)]=(await this[_0x1c1d93(0x176)](LTM_DP_DRIFT_STATUS))[_0x1c1d93(0x228)],_0xdca973['details']=(await this[_0x1c1d93(0x176)](LTM_DP_DRIFT_DETAILS))[_0x1c1d93(0x228)],_0xdca973[_0x1c1d93(0x245)]=(await this[_0x1c1d93(0x176)](LTM_DP_DRIFT_LAST_CHECK))[_0x1c1d93(0x228)];}catch(_0x58c21e){}this['sendTo'](_0x1308ef[_0x1c1d93(0x1bc)],_0x1308ef[_0x1c1d93(0x1eb)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x1c1d93(0x146)],'driftAnalysis':_0xdca973,'analysisHistory':this[_0x1c1d93(0x235)]},_0x1308ef['callback']);}else{if(_0x1308ef['command']===_0x1c1d93(0x17f)){const _0x22d3cb=await this[_0x1c1d93(0x249)]('enum.functions.*','enum'),_0x32193f=[];if(_0x22d3cb)for(const _0x2afb67 in _0x22d3cb){const _0x107fc9=_0x22d3cb[_0x2afb67],_0x6be59=(_0x107fc9[_0x1c1d93(0x154)]&&typeof _0x107fc9[_0x1c1d93(0x154)]['name']===_0x1c1d93(0x163)?_0x107fc9[_0x1c1d93(0x154)]['name']['de']:_0x107fc9['common']['name'])||_0x107fc9['common'][_0x1c1d93(0x192)];_0x32193f[_0x1c1d93(0x168)]({'id':_0x2afb67,'name':_0x6be59});}this['sendTo'](_0x1308ef[_0x1c1d93(0x1bc)],_0x1308ef[_0x1c1d93(0x1eb)],{'success':!![],'enums':_0x32193f},_0x1308ef[_0x1c1d93(0x21e)]);}else{if(_0x1308ef[_0x1c1d93(0x1eb)]==='scanDevices')try{const _0x45c0a0=await scanForDevices(this,_0x1308ef['message']||{});this[_0x1c1d93(0x149)](_0x1308ef[_0x1c1d93(0x1bc)],_0x1308ef[_0x1c1d93(0x1eb)],{'success':!![],'devices':_0x45c0a0},_0x1308ef[_0x1c1d93(0x21e)]);}catch(_0x543cb4){this[_0x1c1d93(0x149)](_0x1308ef[_0x1c1d93(0x1bc)],_0x1308ef[_0x1c1d93(0x1eb)],{'success':![],'error':_0x543cb4['message']},_0x1308ef[_0x1c1d93(0x21e)]);}else{if(_0x1308ef[_0x1c1d93(0x1eb)]===_0x1c1d93(0x181)){const {historyId:_0x18a26,rating:_0x191e0d,comment:_0x2ba19b,alertReason:_0x3fef00}=_0x1308ef[_0x1c1d93(0x1e3)];_0x18a26&&_0x191e0d?(await saveFeedback(this,{'timestamp':Date[_0x1c1d93(0x162)](),'historyId':_0x18a26,'rating':_0x191e0d,'comment':_0x2ba19b,'alertReason':_0x3fef00}),this['sendTo'](_0x1308ef['from'],_0x1308ef['command'],{'success':!![]},_0x1308ef[_0x1c1d93(0x21e)])):this[_0x1c1d93(0x149)](_0x1308ef[_0x1c1d93(0x1bc)],_0x1308ef[_0x1c1d93(0x1eb)],{'success':![],'error':_0x1c1d93(0x151)},_0x1308ef[_0x1c1d93(0x21e)]);}else{if(_0x1308ef['command']===_0x1c1d93(0x1d1)){const _0x1f2f7e=await getWeatherContext(this),_0xd70203=await getCalendarContext(this);this[_0x1c1d93(0x149)](_0x1308ef[_0x1c1d93(0x1bc)],_0x1308ef[_0x1c1d93(0x1eb)],{'success':!![],'weather':_0x1f2f7e,'calendar':_0xd70203},_0x1308ef[_0x1c1d93(0x21e)]);}else{if(_0x1308ef[_0x1c1d93(0x1eb)]===_0x1c1d93(0x212)){const _0xe04b3a=_0x1308ef[_0x1c1d93(0x1e3)][_0x1c1d93(0x19d)];if(!_0xe04b3a)return this[_0x1c1d93(0x149)](_0x1308ef[_0x1c1d93(0x1bc)],_0x1308ef[_0x1c1d93(0x1eb)],{'success':![],'error':_0x1c1d93(0x13d)},_0x1308ef['callback']);const _0x29d906=await getCalendarNames(this,_0xe04b3a);this[_0x1c1d93(0x149)](_0x1308ef[_0x1c1d93(0x1bc)],_0x1308ef['command'],{'success':!![],'names':_0x29d906},_0x1308ef[_0x1c1d93(0x21e)]);}}}}}}}}}catch(_0x39a772){this[_0x1c1d93(0x1b2)][_0x1c1d93(0x1ba)](_0x1c1d93(0x259)+_0x1308ef['command']+':\x20'+_0x39a772['message']);if(_0x1308ef['callback'])this['sendTo'](_0x1308ef[_0x1c1d93(0x1bc)],_0x1308ef['command'],{'success':![],'error':_0x39a772[_0x1c1d93(0x1e3)]},_0x1308ef[_0x1c1d93(0x21e)]);}}}async function initZombies(_0x506682){const _0x4751d1=a0_0xc0a47e;try{const _0x345236=[_0x4751d1(0x12c),'analysis.history_debug_01',_0x4751d1(0x243),_0x4751d1(0x20a),'analysis.history_debug_04','events.history_debug_00',_0x4751d1(0x198),_0x4751d1(0x166),_0x4751d1(0x128),_0x4751d1(0x261)];for(const _0x26e406 of _0x345236){try{const _0x4cab39=await _0x506682[_0x4751d1(0x21f)](_0x26e406);_0x4cab39&&await _0x506682[_0x4751d1(0x27b)](_0x26e406);}catch(_0x38c9f1){}}}catch(_0x2ae25d){}}async function initSystemConfig(_0xc869ef){const _0x2471d3=a0_0xc0a47e;try{const _0x401241=await _0xc869ef[_0x2471d3(0x21d)](_0x2471d3(0x25e));_0x401241&&_0x401241['common']&&(_0xc869ef[_0x2471d3(0x1a8)]={'latitude':_0x401241[_0x2471d3(0x154)][_0x2471d3(0x213)]||0x0,'longitude':_0x401241['common']['longitude']||0x0,'city':_0x401241[_0x2471d3(0x154)][_0x2471d3(0x14c)]||''});}catch(_0xad5cd8){}}async function initHistory(_0x49a895){const _0x2f464b=a0_0xc0a47e;try{const _0x165db5=await _0x49a895[_0x2f464b(0x176)]('events.history');_0x165db5&&_0x165db5[_0x2f464b(0x228)]&&(_0x49a895[_0x2f464b(0x18b)]=JSON[_0x2f464b(0x1d4)](_0x165db5[_0x2f464b(0x228)][_0x2f464b(0x26c)]()));}catch(_0x779681){_0x49a895['eventHistory']=[];}try{const _0xe1e228=await _0x49a895[_0x2f464b(0x176)](_0x2f464b(0x1da));if(_0xe1e228&&_0xe1e228['val'])_0x49a895[_0x2f464b(0x235)]=JSON[_0x2f464b(0x1d4)](_0xe1e228[_0x2f464b(0x228)][_0x2f464b(0x26c)]());}catch(_0x44a9bd){_0x49a895[_0x2f464b(0x235)]=[];}}async function loadRawEventLog(_0x223f8a){const _0x56f227=a0_0xc0a47e;try{const _0xd11aa9=await _0x223f8a['getStateAsync'](LTM_DP_RAW_LOG);if(_0xd11aa9&&_0xd11aa9[_0x56f227(0x228)])_0x223f8a[_0x56f227(0x209)]=JSON['parse'](_0xd11aa9[_0x56f227(0x228)]);}catch(_0x2e4522){_0x223f8a['rawEventLog']=[];}}async function saveRawEventLog(_0x34191a){const _0x44a130=a0_0xc0a47e;_0x34191a[_0x44a130(0x209)]['length']>RAW_LOG_MAX_SIZE&&_0x34191a[_0x44a130(0x209)]['splice'](0x0,_0x34191a['rawEventLog'][_0x44a130(0x219)]-RAW_LOG_MAX_SIZE),await _0x34191a[_0x44a130(0x273)](LTM_DP_RAW_LOG,{'val':JSON[_0x44a130(0x1e6)](_0x34191a[_0x44a130(0x209)]),'ack':!![]});}function a0_0x3a7f(){const _0x546ffa=['Morning\x20Briefing\x20sent.','KALENDER:\x20Keine\x20Kalender\x20ausgew√§hlt\x20(Bitte\x20in\x20Settings\x20konfigurieren)','notes','Cogni-Living\x20Alert','KALENDER\x20ERROR:\x20','Generating\x20Morning\x20Briefing...','exitTimer','channel','onStateChange','test','analysis.deviationFromBaseline','Kalender:\x20Deaktiviert','type','rating','rawEventLog','analysis.history_debug_03','9417080mXaRbV','WETTER:\x20','isProVersion','send',')\x20-\x20SAFE\x20MODE','305iDmCaG','\x20sent','getCalendarNames','latitude','openweathermap','setObjectNotExistsAsync','genAI','info','analysis.health.notes','length','sensorLastValues','onUnload','exports','getForeignObjectAsync','callback','getObjectAsync','analysis.health.sleepScore','Comfort\x20Summary','Activity\x20Summary','timestamp','events.lastEvent','join','cogni-living\x20adapter\x20starting\x20(v','devices','val','49326XAZyyP','inactivityThresholdHours','.\x20\x0a\x20\x20\x20\x20KONTEXT\x20(Wohnen):\x20','lastAlertState','boolean','Last\x20Result','N/A','activity','analysis.triggerBriefing','2992914pyvcTT','2-digit','Trigger\x20Briefing\x20(Test)','analysisHistory','PRIORIT√ÑT:\x20Gesundheit\x20und\x20Sicherheit\x20f√ºr\x20Senioren\x20(AAL).\x20Erkenne\x20Inaktivit√§t,\x20potenzielle\x20St√ºrze\x20(indirekt),\x20Schlafunterbrechungen\x20und\x20n√§chtliche\x20Unruhe.','(((.+)+)+)+$','driftAnalysisTimer','Wetter:\x20Deaktiviert','accuweather','pop','\x0a\x20\x20\x20\x20ZUSATZ-KONTEXT:\x20','Event\x20History','licenseKey','toISOString','text','\x0aFEEDBACK:\x0a','AI\x20Alert\x20Status','analysis.history_debug_02','minDaysForBaseline','lastCheck','useCalendar','analysis.trigger','AI\x20Emergency\x20Status','getForeignObjectsAsync','.forecast.current.state','Fehler:\x20','search','\x20Tage)','subscribeStates','TEST-PRO-KEY','10669109hOPBQN','isPresent','sort','Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung.','setState','system.isPresent','notifySignalRecipient','suggestedAction','analysis.lastResult','Error\x20in\x20onMessage\x20command\x20','@google/generative-ai','24KNGETF','\x20presence\x20devices...','deviationFromBaseline','system.config','stateChange','WETTER\x20ERROR:\x20','events.history_debug_04','5646357QTpVeN','Adapter','Daily\x20Digest\x20erstellt\x20&\x20gespeichert.','08:00','status','analysis.automation.description','unload','964351iVxVsG','Presence\x20Status','\x20*\x20*\x20*','toString','comfort','warn','\x20|\x20','triggerBriefing','getLtmData','restlessness','setStateAsync','currentSystemMode','Baseline:\x20Inactive\x20(Pro\x20Feature).','siren','de-DE','number','Lernphase\x20(','calendarInstance','delObjectAsync','trim','map','json','Daily\x20Digest\x20created\x20successfully.','LTM.processingStatus','indicator','Error\x20checking\x20WiFi:\x20','events.history_debug_03','isArray','party','WETTER:\x20Keine\x20Daten\x20gefunden','analysis.history_debug_00','Gemini\x20Init\x20Error:\x20','ack','none','notifyPushoverInstance','\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20DATEN:\x0a\x20\x20\x20\x20-\x20Schlafqualit√§t\x20letzte\x20Nacht:\x20','scheduleJob','Restlessness\x20Level','geminiModel','Action','\x22\x20was\x20','value.health','inactivityMonitoringEnabled','presenceDevices','Bewegung\x20w√§hrend\x20Exit-Timer\x20erkannt\x20->\x20Bewohner\x20ist\x20noch\x20da.','notifyEmailInstance','0\x203\x20*\x20*\x20*','No\x20instance','üö®üö®\x20NOTFALL','native','apiKey','retry','health','notifySignalInstance','time','Deaktiviert\x20(Pro-Feature)','dailyDigests','Alert\x20Reason','weatherunderground.0','sendTo','_calName','getGenerativeModel','city','response','splice','namespace','[Test]\x20Notification','Missing\x20data','LTM.baselineStatus','onMessage','common','button','analysis.comfortSuggestion','string','\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20OUTPUT:\x20Nur\x20der\x20Nachrichtentext\x20(kein\x20JSON).\x20Integriere\x20den\x20Kontext\x20(Wetter/Kalender)\x20nur\x20wenn\x20relevant.','notifyTelegramRecipient','onReady','Trigger\x20Analysis','modeResetJob','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.','LTM\x20Sched\x20Error:\x20','toLocaleString','No\x20recorded\x20events\x20yet.','\x0a!!!\x20END\x20WARNING\x20!!!\x0a','now','object','LTM.driftAnalysis.driftDetails','models/gemini-flash-latest','events.history_debug_02','.data.table','push','briefingJob','Error\x20reading\x20calendar\x20table:\x20','replace','.\x20PR√ÑSENZ:\x20','Creating\x20Daily\x20Digest\x20from\x20','LTM.driftAnalysis','system.mode','Gemini\x20AI\x20initialized.','analysis.alertReason','livingContext','includes','daswetter','notifyPushoverEnabled','getStateAsync','uuid-error','config','\x20min).\x20Watchdog\x20Limit:\x20','suggestion','uuid-not-found','Reset\x20Sched\x20Error:\x20','automationProposal','KALENDER:\x20','getEnums','analysis.isEmergency','submitFeedback','Aktiv\x20(','.\x20ORT:\x20','PRIORIT√ÑT:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungew√∂hnliche\x20Anwesenheit.','10UPBXel','generateContent','.\x0a\x20\x20\x20\x20MODUS:\x20','.Summary.Current','Nein','notifyTelegramInstance','eventHistory','164AqDrFF','notifyEmailRecipient','Comfort\x20Suggestion','daswetter.0','subscribeForeignStatesAsync','No\x20Key','name','analysis.feedbackHistory','\x0a!!!\x20EXTERNAL\x20SYSTEM\x20WARNING\x20!!!\x0a','Deviation','GUEST','isExit','events.history_debug_01','LTM.triggerDailyDigest','Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','aiPersona','Starting\x20Autopilot\x20(','instance','getForeignStateAsync','feedbackHistory','@iobroker/adapter-core','notifyEmailEnabled','values','system.meta.uuid','slice','geminiApiKey','analysis.activitySummary','getCalendarNames\x20Error:\x20','systemConfig','\x20sensors...','cancel','testApiKey','analysisInterval','application/json','ical.0','sound','briefingEnabled','Feedback\x20Log','log','events.history','ltmLtbWindowDays','startsWith','alertReason','.NextHours.Location_1.Day_1.current.symbol_desc','bind','PARTY','error','License\x20Check\x20failed:\x20','from','Zu\x20wenig\x20Daten\x20f√ºr\x20Daily\x20Digest.','analysis.health','7BUTMWu','NORMAL','isEmergency','analysisTimer','unshift','sendToAsync','analysis.automation.suggestedAction','analysis.isAlert','4652WefrZG','\x0a\x20\x20\x20\x20INPUT:\x20','Pattern\x20Detected','state','briefingTime','PRO-','User\x20Feedback:\x20Alarm\x20\x22','systemUUID','ROLLE:\x20Data\x20Analyst.\x20AUFGABE:\x20Fasse\x20den\x20heutigen\x20Tag\x20basierend\x20auf\x20den\x20Sensor-Logs\x20zusammen.\x0a\x20\x20\x20\x20PERSONA:\x20','üåÖ\x20Daily\x20Briefing:\x0a','testContext','\x0a\x20\x20\x20\x20KONTEXT\x20(Wer\x20wohnt\x20hier?):\x20','activityLevel','parse','Automation\x20Proposals','Description','online','WiFi\x20Presence\x20detected\x20->\x20Aborting\x20Exit\x20Timer.\x20User\x20is\x20present.','\x20hours.\x20The\x20resident\x20might\x20be\x20incapacitated.\x20Risk\x20level:\x20HIGH.','analysis.analysisHistory','notifySignalEnabled','analysis.health.restlessness','indicator.alarm.fire','catch','generic','extendObjectAsync','vacation','analysis.automation','message','uuid','ltmJob','stringify','notifyWhatsappInstance','apply','split','summary','command','Scheduling\x20Morning\x20Briefing\x20for\x20','üö®\x20EMERGENCY','exitGraceTimer','\x0a\x20\x20\x20\x20EVENTS:\x20','text.alarm','sleepScore','LTM.dailyDigests','ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20\x0a\x20\x20\x20\x20AKTUELLE\x20ZEIT:\x20','\x20(EMERGENCY)','filter','cogni-living','toFixed','triggerDailyDigest','\x20raw\x20events...','isGracePeriodActive'];a0_0x3a7f=function(){return _0x546ffa;};return a0_0x3a7f();}async function loadDailyDigests(_0x2a59fa){const _0xbac42b=a0_0xc0a47e;try{const _0x16dad9=await _0x2a59fa[_0xbac42b(0x176)](LTM_DP_DAILY_DIGESTS);if(_0x16dad9&&_0x16dad9[_0xbac42b(0x228)])_0x2a59fa['dailyDigests']=JSON['parse'](_0x16dad9[_0xbac42b(0x228)]);}catch(_0x54f896){_0x2a59fa[_0xbac42b(0x146)]=[];}await updateBaselineStatus(_0x2a59fa);}async function saveDailyDigests(_0x3c61d5,_0x55e7a3=!![]){const _0x458875=a0_0xc0a47e,_0xe2f5b7=_0x3c61d5[_0x458875(0x178)][_0x458875(0x1b4)]||0x3c;_0x3c61d5[_0x458875(0x146)][_0x458875(0x219)]>_0xe2f5b7&&_0x3c61d5[_0x458875(0x146)][_0x458875(0x14e)](0x0,_0x3c61d5['dailyDigests'][_0x458875(0x219)]-_0xe2f5b7);await _0x3c61d5[_0x458875(0x273)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](_0x3c61d5[_0x458875(0x146)]),'ack':!![]});if(_0x55e7a3)await updateBaselineStatus(_0x3c61d5);}async function updateBaselineStatus(_0x511b41){const _0x330907=a0_0xc0a47e;if(!_0x511b41[_0x330907(0x20d)]){await _0x511b41[_0x330907(0x273)](LTM_DP_BASELINE_STATUS,{'val':_0x330907(0x145),'ack':!![]});return;}const _0x4df851=_0x511b41[_0x330907(0x146)][_0x330907(0x219)]>=(_0x511b41['config'][_0x330907(0x244)]||0x7)?_0x330907(0x182)+_0x511b41['dailyDigests'][_0x330907(0x219)]+_0x330907(0x24d):_0x330907(0x279)+_0x511b41[_0x330907(0x146)][_0x330907(0x219)]+'/'+(_0x511b41[_0x330907(0x178)]['minDaysForBaseline']||0x7)+')';await _0x511b41[_0x330907(0x273)](LTM_DP_BASELINE_STATUS,{'val':_0x4df851,'ack':!![]});}async function updateAnalysisHistory(_0x32ce29,_0x3df5a9){const _0x3dd012=a0_0xc0a47e;_0x32ce29[_0x3dd012(0x235)][_0x3dd012(0x1c3)](_0x3df5a9);if(_0x32ce29[_0x3dd012(0x235)][_0x3dd012(0x219)]>ANALYSIS_HISTORY_MAX_SIZE)_0x32ce29[_0x3dd012(0x235)]['pop']();await _0x32ce29[_0x3dd012(0x273)](_0x3dd012(0x1da),{'val':JSON[_0x3dd012(0x1e6)](_0x32ce29[_0x3dd012(0x235)]),'ack':!![]});}async function getSystemUUID(_0x462eba){const _0x1c10a9=a0_0xc0a47e;try{const _0xa0f48c=await _0x462eba['getForeignObjectAsync'](_0x1c10a9(0x1a3));if(_0xa0f48c&&_0xa0f48c['native']&&_0xa0f48c[_0x1c10a9(0x13f)][_0x1c10a9(0x1e4)])return _0xa0f48c[_0x1c10a9(0x13f)][_0x1c10a9(0x1e4)];return _0x1c10a9(0x17b);}catch(_0x450009){return _0x1c10a9(0x177);}}async function checkLicense(_0x3a1aa4,_0x10be2f){const _0x4e9613=a0_0xc0a47e;if(!_0x10be2f)return![];_0x3a1aa4[_0x4e9613(0x1ce)]=await getSystemUUID(_0x3a1aa4);if(_0x10be2f===_0x4e9613(0x24f)||_0x10be2f[_0x4e9613(0x1b5)](_0x4e9613(0x1cc)))return!![];return![];}async function loadSystemMode(_0x4ae926){const _0x154c1e=a0_0xc0a47e;try{const _0x2c3617=await _0x4ae926['getStateAsync'](SYSTEM_DP_MODE);_0x2c3617&&_0x2c3617['val']&&Object['values'](SYSTEM_MODES)[_0x154c1e(0x173)](_0x2c3617['val'])?_0x4ae926[_0x154c1e(0x274)]=_0x2c3617[_0x154c1e(0x228)]:(_0x4ae926['currentSystemMode']=SYSTEM_MODES['NORMAL'],await _0x4ae926[_0x154c1e(0x273)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x154c1e(0x1c0)],'ack':!![]}));}catch(_0x35b8ae){_0x4ae926[_0x154c1e(0x274)]=SYSTEM_MODES[_0x154c1e(0x1c0)];}}async function setPresence(_0x405f65,_0x46ed9d){const _0x29e9ca=a0_0xc0a47e;if(_0x405f65[_0x29e9ca(0x251)]===_0x46ed9d)return;_0x405f65['isPresent']=_0x46ed9d,await _0x405f65[_0x29e9ca(0x273)](_0x29e9ca(0x255),{'val':_0x46ed9d,'ack':!![]});}function startExitTimer(_0x5e3097){const _0x246608=a0_0xc0a47e;abortExitTimer(_0x5e3097),_0x5e3097[_0x246608(0x1fa)]=!![],_0x5e3097[_0x246608(0x1ee)]=setTimeout(()=>{const _0x3a78c6=_0x246608;_0x5e3097[_0x3a78c6(0x1fa)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x5e3097[_0x246608(0x201)]=setTimeout(()=>{const _0x3f0b27=_0x246608;setPresence(_0x5e3097,![]),_0x5e3097[_0x3f0b27(0x201)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0xbfe088){const _0x2e36ad=a0_0xc0a47e;if(_0xbfe088[_0x2e36ad(0x201)])clearTimeout(_0xbfe088['exitTimer']);if(_0xbfe088['exitGraceTimer'])clearTimeout(_0xbfe088[_0x2e36ad(0x1ee)]);_0xbfe088[_0x2e36ad(0x201)]=null,_0xbfe088[_0x2e36ad(0x1ee)]=null,_0xbfe088['isGracePeriodActive']=![];}async function checkWifiPresence(_0x4c14a4){const _0x490437=a0_0xc0a47e;try{const _0x24929f=_0x4c14a4[_0x490437(0x178)][_0x490437(0x139)]||[];let _0x204411=![];for(const _0x1a6e82 of _0x24929f){try{const _0x5b6618=await _0x4c14a4[_0x490437(0x19e)](_0x1a6e82);if(_0x5b6618&&(_0x5b6618['val']===!![]||_0x5b6618[_0x490437(0x228)]===_0x490437(0x1d7)||_0x5b6618[_0x490437(0x228)]===0x1)){_0x204411=!![];break;}}catch(_0x3e69db){}}return _0x204411&&(_0x4c14a4[_0x490437(0x201)]&&(_0x4c14a4['log'][_0x490437(0x217)](_0x490437(0x1d8)),abortExitTimer(_0x4c14a4)),!_0x4c14a4['isPresent']&&_0x4c14a4[_0x490437(0x274)]===SYSTEM_MODES['NORMAL']&&await setPresence(_0x4c14a4,!![])),_0x204411;}catch(_0x954513){return _0x4c14a4['log'][_0x490437(0x1ba)](_0x490437(0x282)+_0x954513[_0x490437(0x1e3)]),![];}}async function processSensorEvent(_0x2952ed,_0x2609d0,_0x4c39d1,_0x232acc){const _0x585850=a0_0xc0a47e;if(!_0x232acc['logDuplicates']&&_0x2952ed[_0x585850(0x21a)][_0x2609d0]===_0x4c39d1['val'])return;_0x2952ed[_0x585850(0x21a)][_0x2609d0]=_0x4c39d1[_0x585850(0x228)];if(_0x2952ed[_0x585850(0x1fa)])return;const _0x50a171=await checkWifiPresence(_0x2952ed);if(_0x50a171){if(!_0x2952ed[_0x585850(0x251)])await setPresence(_0x2952ed,!![]);}else{const _0x229de=_0x232acc[_0x585850(0x197)]===!![];_0x229de?startExitTimer(_0x2952ed):(_0x2952ed[_0x585850(0x201)]&&(_0x2952ed[_0x585850(0x1b2)]['info'](_0x585850(0x13a)),abortExitTimer(_0x2952ed)),!_0x2952ed[_0x585850(0x251)]&&_0x2952ed[_0x585850(0x274)]===SYSTEM_MODES[_0x585850(0x1c0)]&&await setPresence(_0x2952ed,!![]));}const _0x479040={'timestamp':_0x4c39d1['ts'],'id':_0x2609d0,'name':_0x232acc['name'],'value':_0x4c39d1[_0x585850(0x228)],'location':_0x232acc['location'],'type':_0x232acc[_0x585850(0x207)]};_0x2952ed[_0x585850(0x18b)]['unshift'](_0x479040);if(_0x2952ed[_0x585850(0x18b)][_0x585850(0x219)]>HISTORY_MAX_SIZE)_0x2952ed['eventHistory'][_0x585850(0x23b)]();await _0x2952ed[_0x585850(0x273)](_0x585850(0x224),{'val':JSON[_0x585850(0x1e6)](_0x479040),'ack':!![]}),await _0x2952ed[_0x585850(0x273)](_0x585850(0x1b3),{'val':JSON['stringify'](_0x2952ed['eventHistory']),'ack':!![]}),_0x2952ed[_0x585850(0x209)][_0x585850(0x168)]({'timestamp':new Date(_0x4c39d1['ts'])[_0x585850(0x23f)](),'sensorName':_0x232acc[_0x585850(0x192)],'location':_0x232acc['location'],'value':_0x4c39d1[_0x585850(0x228)]}),await saveRawEventLog(_0x2952ed);}async function runAutopilot(_0x402a2c){const _0x51855b=a0_0xc0a47e,_0x2ca5a6=_0x402a2c['config']['inactivityThresholdHours'],_0x541358=_0x402a2c[_0x51855b(0x178)][_0x51855b(0x138)],_0x485645=_0x402a2c[_0x51855b(0x18b)][_0x51855b(0x219)]>0x0?_0x402a2c[_0x51855b(0x18b)][0x0]['timestamp']:Date[_0x51855b(0x162)](),_0x446125=(Date['now']()-_0x485645)/(0x3e8*0x3c*0x3c);let _0x403880='';_0x541358&&_0x402a2c[_0x51855b(0x274)]===SYSTEM_MODES[_0x51855b(0x1c0)]&&_0x402a2c[_0x51855b(0x251)]&&(_0x446125>_0x2ca5a6&&(_0x403880='CRITICAL\x20WARNING:\x20No\x20sensor\x20activity\x20detected\x20for\x20'+_0x446125[_0x51855b(0x1f7)](0x1)+_0x51855b(0x1d9)));if(_0x403880){runGeminiAnalysis(_0x402a2c,_0x403880)[_0x51855b(0x1de)](_0x26503e=>_0x402a2c[_0x51855b(0x1b2)]['error'](_0x26503e));return;}const _0x2abca1=Date[_0x51855b(0x162)](),_0x35ea34=_0x2abca1-_0x485645,_0x3952cf=(_0x402a2c[_0x51855b(0x178)][_0x51855b(0x1ac)]||0xf)*0x3c*0x3e8;_0x402a2c[_0x51855b(0x18b)][_0x51855b(0x219)]>0x0&&_0x35ea34<=_0x3952cf?runGeminiAnalysis(_0x402a2c)[_0x51855b(0x1de)](_0x6eef3f=>_0x402a2c[_0x51855b(0x1b2)][_0x51855b(0x1ba)](_0x6eef3f)):!_0x402a2c[_0x51855b(0x22c)]&&(_0x402a2c[_0x51855b(0x254)]('analysis.isAlert',{'val':![],'ack':!![]}),_0x402a2c[_0x51855b(0x254)](_0x51855b(0x180),{'val':![],'ack':!![]}));}async function sendNotification(_0x5e5854,_0x3628a5,_0x25f0a7=![],_0x3d3166=![]){const _0x5c0ac7=a0_0xc0a47e;_0x5e5854[_0x5c0ac7(0x1b2)]['info']((_0x25f0a7?'[TEST]\x20':'')+'Sending\x20notification:\x20\x22'+_0x3628a5+'\x22'+(_0x3d3166?_0x5c0ac7(0x1f4):''));const _0x2966b7=_0x5e5854[_0x5c0ac7(0x178)];let _0x3da9c6=0x0;_0x2966b7['notifyTelegramEnabled']&&_0x2966b7[_0x5c0ac7(0x18a)]&&(await _0x5e5854[_0x5c0ac7(0x1c4)](_0x2966b7[_0x5c0ac7(0x18a)],_0x5c0ac7(0x20e),{'text':_0x3628a5,'user':_0x2966b7[_0x5c0ac7(0x159)]}),_0x3da9c6++);if(_0x2966b7[_0x5c0ac7(0x175)]&&_0x2966b7[_0x5c0ac7(0x130)]){let _0x4be9a9={'message':_0x3628a5,'title':_0x3d3166?_0x5c0ac7(0x1ed):_0x5c0ac7(0x1fe),'priority':_0x3d3166?0x2:0x1,'device':_0x2966b7['notifyPushoverRecipient']};_0x3d3166&&(_0x4be9a9[_0x5c0ac7(0x141)]=0x1e,_0x4be9a9['expire']=0xe10,_0x4be9a9[_0x5c0ac7(0x1af)]=_0x5c0ac7(0x276)),await _0x5e5854['sendToAsync'](_0x2966b7[_0x5c0ac7(0x130)],_0x5c0ac7(0x20e),_0x4be9a9),_0x3da9c6++;}return _0x2966b7[_0x5c0ac7(0x1a1)]&&_0x2966b7['notifyEmailInstance']&&(await _0x5e5854[_0x5c0ac7(0x1c4)](_0x2966b7[_0x5c0ac7(0x13b)],_0x5c0ac7(0x20e),{'text':_0x3628a5,'to':_0x2966b7[_0x5c0ac7(0x18d)]}),_0x3da9c6++),_0x2966b7['notifyWhatsappEnabled']&&_0x2966b7[_0x5c0ac7(0x1e7)]&&(await _0x5e5854[_0x5c0ac7(0x1c4)](_0x2966b7['notifyWhatsappInstance'],_0x5c0ac7(0x20e),{'text':_0x3628a5,'phone':_0x2966b7['notifyWhatsappRecipient']}),_0x3da9c6++),_0x2966b7[_0x5c0ac7(0x1db)]&&_0x2966b7['notifySignalInstance']&&(await _0x5e5854['sendToAsync'](_0x2966b7[_0x5c0ac7(0x143)],_0x5c0ac7(0x20e),{'text':_0x3628a5,'phone':_0x2966b7[_0x5c0ac7(0x256)]}),_0x3da9c6++),_0x3da9c6;}function tryParse(_0x48f742){const _0x9203dc=a0_0xc0a47e;if(typeof _0x48f742===_0x9203dc(0x163))return _0x48f742;try{return JSON['parse'](_0x48f742);}catch(_0x1ea837){return null;}}async function getWeatherContext(_0x3767ee){const _0x385b09=a0_0xc0a47e;try{if(!_0x3767ee[_0x385b09(0x178)]['useWeather'])return _0x385b09(0x239);let _0x4cfbf0='';const _0x2188eb=_0x3767ee['config']['weatherInstance'];if(_0x2188eb)try{if(_0x2188eb[_0x385b09(0x173)](_0x385b09(0x23a))){const _0x3a534c=await _0x3767ee[_0x385b09(0x19e)](_0x2188eb+_0x385b09(0x188));if(_0x3a534c&&_0x3a534c[_0x385b09(0x228)])_0x4cfbf0=_0x3a534c[_0x385b09(0x228)];}else{if(_0x2188eb[_0x385b09(0x173)](_0x385b09(0x174))){const _0x44e22c=await _0x3767ee['getForeignStateAsync'](_0x2188eb+_0x385b09(0x1b7));if(_0x44e22c&&_0x44e22c[_0x385b09(0x228)])_0x4cfbf0=_0x44e22c['val'];}else{if(_0x2188eb[_0x385b09(0x173)](_0x385b09(0x214))){const _0x2be434=await _0x3767ee[_0x385b09(0x19e)](_0x2188eb+_0x385b09(0x24a));if(_0x2be434&&_0x2be434[_0x385b09(0x228)])_0x4cfbf0=_0x2be434[_0x385b09(0x228)];}}}}catch(_0xc579d3){}if(!_0x4cfbf0){const _0x5a9efa=['accuweather.0',_0x385b09(0x18f),_0x385b09(0x148),'openweathermap.0'];for(const _0x51ee9f of _0x5a9efa){try{const _0x579cae=await _0x3767ee[_0x385b09(0x21d)](_0x51ee9f);if(_0x579cae){if(_0x51ee9f['includes'](_0x385b09(0x23a))){const _0x4d78f1=await _0x3767ee[_0x385b09(0x19e)](_0x51ee9f+_0x385b09(0x188));if(_0x4d78f1&&_0x4d78f1[_0x385b09(0x228)]){_0x4cfbf0=_0x4d78f1[_0x385b09(0x228)];break;}}}}catch(_0x5059e9){}}}return _0x4cfbf0?_0x385b09(0x20c)+_0x4cfbf0:_0x385b09(0x12b);}catch(_0x45441a){return _0x385b09(0x260)+_0x45441a[_0x385b09(0x1e3)];}}async function getCalendarContext(_0x304a38){const _0xe6e13c=a0_0xc0a47e;try{if(!_0x304a38['config'][_0xe6e13c(0x246)])return _0xe6e13c(0x206);let _0x176bd9=_0x304a38[_0xe6e13c(0x178)][_0xe6e13c(0x27a)]||_0xe6e13c(0x1ae),_0x481ac1=_0x304a38[_0xe6e13c(0x178)]['calendarSelection']||[];if(typeof _0x481ac1===_0xe6e13c(0x157))_0x481ac1=_0x481ac1[_0xe6e13c(0x1e9)](',');try{const _0x2244c3=await _0x304a38[_0xe6e13c(0x19e)](_0x176bd9+_0xe6e13c(0x167));if(_0x2244c3&&_0x2244c3[_0xe6e13c(0x228)]){let _0x334235=tryParse(_0x2244c3['val']);if(_0x334235&&Array['isArray'](_0x334235)){if(_0x481ac1[_0xe6e13c(0x219)]>0x0)_0x334235=_0x334235[_0xe6e13c(0x1f5)](_0x3122cb=>_0x481ac1['includes'](_0x3122cb[_0xe6e13c(0x14a)]||''));else return _0xe6e13c(0x1fc);if(_0x334235[_0xe6e13c(0x219)]>0x0){const _0x791311=_0x334235[_0xe6e13c(0x1a4)](0x0,0x3)[_0xe6e13c(0x27d)](_0x168f3b=>{const _0x78e9=_0xe6e13c;let _0x2a2bc8=_0x168f3b['date'];if(_0x168f3b[_0x78e9(0x144)])_0x2a2bc8+='\x20'+_0x168f3b[_0x78e9(0x144)];return _0x2a2bc8+':\x20'+_0x168f3b['event']+'\x20('+_0x168f3b[_0x78e9(0x14a)]+')';});return _0xe6e13c(0x17e)+_0x791311[_0xe6e13c(0x225)](_0xe6e13c(0x26f));}else return'KALENDER:\x20Keine\x20relevanten\x20Termine';}}}catch(_0x266f53){_0x304a38[_0xe6e13c(0x1b2)][_0xe6e13c(0x26e)](_0xe6e13c(0x16a)+_0x266f53[_0xe6e13c(0x1e3)]);}return'KALENDER:\x20Keine\x20Daten';}catch(_0x37c92d){return _0xe6e13c(0x1ff)+_0x37c92d[_0xe6e13c(0x1e3)];}}async function getCalendarNames(_0x5905f8,_0x506514){const _0x176004=a0_0xc0a47e;try{const _0x23cd2d=await _0x5905f8['getForeignStateAsync'](_0x506514+'.data.table');if(_0x23cd2d&&_0x23cd2d[_0x176004(0x228)]){const _0x2975ac=tryParse(_0x23cd2d['val']);if(_0x2975ac&&Array[_0x176004(0x129)](_0x2975ac)){const _0x32fba6=[...new Set(_0x2975ac['map'](_0x355324=>_0x355324['_calName'])[_0x176004(0x1f5)](Boolean))];return _0x32fba6[_0x176004(0x252)]();}}return[];}catch(_0x35e5fb){return _0x5905f8[_0x176004(0x1b2)][_0x176004(0x1ba)](_0x176004(0x1a7)+_0x35e5fb['message']),[];}}async function runGeminiAnalysis(_0x51d1ed,_0x34e8a7=''){const _0x2019cb=a0_0xc0a47e;if(!_0x51d1ed[_0x2019cb(0x134)])return;const _0x207d67=_0x51d1ed[_0x2019cb(0x18b)]['length']>0x0?_0x51d1ed['eventHistory']:[{'note':_0x2019cb(0x160)}],_0x375cc1=PERSONA_MAPPING[_0x51d1ed[_0x2019cb(0x178)][_0x2019cb(0x19b)]||'generic'],_0x4fc49d=_0x51d1ed[_0x2019cb(0x178)]['livingContext']||'',_0x4a7c62=_0x51d1ed[_0x2019cb(0x274)],_0x572c4a=await getWeatherContext(_0x51d1ed),_0x5463a5=await getCalendarContext(_0x51d1ed),_0x42eae2=(_0x572c4a+'\x20'+_0x5463a5)[_0x2019cb(0x27c)](),_0x2137f5=new Date(),_0xf98896=_0x2137f5[_0x2019cb(0x15f)](_0x2019cb(0x277),{'weekday':'long','hour':_0x2019cb(0x233),'minute':_0x2019cb(0x233)}),_0x593830=_0x51d1ed[_0x2019cb(0x1a8)];let _0x16f0dd='';if(_0x51d1ed[_0x2019cb(0x19f)][_0x2019cb(0x219)]>0x0){const _0x25f644=_0x51d1ed[_0x2019cb(0x19f)][_0x2019cb(0x1a4)](0x0,0x3)['map'](_0x3c379c=>_0x2019cb(0x1cd)+_0x3c379c[_0x2019cb(0x1b6)]+_0x2019cb(0x136)+_0x3c379c[_0x2019cb(0x208)]+'.')['join']('\x0a');_0x16f0dd=_0x2019cb(0x241)+_0x25f644+'\x0a';}const _0x247047=_0x34e8a7?_0x2019cb(0x194)+_0x34e8a7+_0x2019cb(0x161):'',_0x3992a5=_0x2019cb(0x275),_0x100d97=_0x2019cb(0x1f3)+_0xf98896+_0x2019cb(0x183)+_0x593830[_0x2019cb(0x14c)]+_0x2019cb(0x187)+_0x4a7c62+_0x2019cb(0x16c)+(_0x51d1ed['isPresent']?'Ja':_0x2019cb(0x189))+_0x2019cb(0x22b)+_0x4fc49d+'.\x20PERSONA:\x20'+_0x375cc1+'.\x0a\x20\x20\x20\x20EXTERNER\x20KONTEXT\x20(WICHTIG):\x20'+_0x42eae2+'\x0a\x20\x20\x20\x20'+_0x3992a5+'\x20'+_0x16f0dd+'\x20'+_0x247047+_0x2019cb(0x1ef)+JSON[_0x2019cb(0x1e6)](_0x207d67)+'\x20\x0a\x20\x20\x20\x20AUFGABE:\x20Analysiere\x20die\x20Events\x20auf\x20Aktivit√§t,\x20Komfort\x20und\x20GESUNDHEIT.\x20\x0a\x20\x20\x20\x20Nutze\x20den\x20EXTERNEN\x20KONTEXT\x20(Wetter/Kalender)\x20um\x20Fehlalarme\x20zu\x20vermeiden\x20(z.B.\x20Regen\x20=\x20keine\x20Gartenaktivit√§t,\x20Termin\x20=\x20Abwesend).\x0a\x20\x20\x20\x20SCHEMA:\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22isEmergency\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x0a\x20\x20\x20\x20\x20\x20\x22comfort\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22suggestion\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22suggestedAction\x22:\x20\x22string\x22\x20}\x20},\x0a\x20\x20\x20\x20\x20\x20\x22health\x22:\x20{\x20\x22sleepScore\x22:\x20number\x20(0-100),\x20\x22restlessness\x22:\x20\x22none|low|medium|high\x22,\x20\x22notes\x22:\x20\x22string\x22\x20}\x20\x0a\x20\x20\x20\x20}';try{const _0x2d7caa=await _0x51d1ed[_0x2019cb(0x134)][_0x2019cb(0x186)](_0x100d97),_0x4486cd=_0x2d7caa['response'][_0x2019cb(0x240)]()[_0x2019cb(0x16b)](/```json|```/g,'')[_0x2019cb(0x27c)](),_0x4e543e=JSON[_0x2019cb(0x1d4)](_0x4486cd);await _0x51d1ed['setStateAsync'](_0x2019cb(0x258),{'val':_0x4486cd,'ack':!![]}),await _0x51d1ed[_0x2019cb(0x273)]('analysis.alertReason',{'val':_0x4e543e[_0x2019cb(0x230)][_0x2019cb(0x1b6)]||'','ack':!![]}),await _0x51d1ed[_0x2019cb(0x273)](_0x2019cb(0x1a6),{'val':_0x4e543e[_0x2019cb(0x230)][_0x2019cb(0x1ea)]||_0x2019cb(0x22f),'ack':!![]}),await _0x51d1ed['setStateAsync'](_0x2019cb(0x205),{'val':_0x4e543e[_0x2019cb(0x230)][_0x2019cb(0x25d)]||_0x2019cb(0x22f),'ack':!![]});_0x4e543e[_0x2019cb(0x26d)]&&(await _0x51d1ed['setStateAsync']('analysis.comfortSummary',{'val':_0x4e543e[_0x2019cb(0x26d)]['summary']||'','ack':!![]}),await _0x51d1ed[_0x2019cb(0x273)](_0x2019cb(0x156),{'val':_0x4e543e[_0x2019cb(0x26d)][_0x2019cb(0x17a)]||'','ack':!![]}),_0x4e543e['comfort'][_0x2019cb(0x17d)]&&(await _0x51d1ed['setStateAsync']('analysis.automation.patternDetected',{'val':_0x4e543e[_0x2019cb(0x26d)][_0x2019cb(0x17d)]['patternDetected']||![],'ack':!![]}),await _0x51d1ed[_0x2019cb(0x273)](_0x2019cb(0x267),{'val':_0x4e543e[_0x2019cb(0x26d)][_0x2019cb(0x17d)]['description']||'','ack':!![]}),await _0x51d1ed[_0x2019cb(0x273)](_0x2019cb(0x1c5),{'val':_0x4e543e['comfort'][_0x2019cb(0x17d)][_0x2019cb(0x257)]||'','ack':!![]})));_0x4e543e['health']&&(await _0x51d1ed['setStateAsync']('analysis.health.sleepScore',{'val':typeof _0x4e543e[_0x2019cb(0x142)][_0x2019cb(0x1f1)]===_0x2019cb(0x278)?_0x4e543e[_0x2019cb(0x142)][_0x2019cb(0x1f1)]:0x0,'ack':!![]}),await _0x51d1ed[_0x2019cb(0x273)](_0x2019cb(0x1dc),{'val':_0x4e543e[_0x2019cb(0x142)][_0x2019cb(0x272)]||_0x2019cb(0x12f),'ack':!![]}),await _0x51d1ed[_0x2019cb(0x273)](_0x2019cb(0x218),{'val':_0x4e543e[_0x2019cb(0x142)][_0x2019cb(0x1fd)]||'','ack':!![]}));const _0x3d0843=_0x4e543e[_0x2019cb(0x230)]['isAlert']||![],_0x22c606=_0x4e543e[_0x2019cb(0x230)][_0x2019cb(0x1c1)]||![];if(_0x3d0843||_0x22c606){await _0x51d1ed[_0x2019cb(0x273)](_0x2019cb(0x1c6),{'val':!![],'ack':!![]}),await _0x51d1ed[_0x2019cb(0x273)](_0x2019cb(0x180),{'val':_0x22c606,'ack':!![]});if(!_0x51d1ed[_0x2019cb(0x22c)]||_0x22c606){const _0x4dd66b=_0x22c606?_0x2019cb(0x13e):'‚ö†Ô∏è\x20Alarm';sendNotification(_0x51d1ed,_0x4dd66b+':\x20'+_0x4e543e[_0x2019cb(0x230)][_0x2019cb(0x1b6)],![],_0x22c606);}}else await _0x51d1ed[_0x2019cb(0x273)](_0x2019cb(0x1c6),{'val':![],'ack':!![]}),await _0x51d1ed['setStateAsync'](_0x2019cb(0x180),{'val':![],'ack':!![]});_0x51d1ed[_0x2019cb(0x22c)]=_0x3d0843||_0x22c606;const _0x51f1cb={'timestamp':Date['now'](),'id':Date['now']()[_0x2019cb(0x26c)](),'analysis':_0x4e543e,'systemMode':_0x4a7c62,'isPro':_0x51d1ed[_0x2019cb(0x20d)]};updateAnalysisHistory(_0x51d1ed,_0x51f1cb);}catch(_0x40647f){_0x51d1ed[_0x2019cb(0x1b2)][_0x2019cb(0x1ba)]('Analysis\x20Error:\x20'+_0x40647f[_0x2019cb(0x1e3)]);}}async function createDailyDigest(_0xacb6ed){const _0x70113e=a0_0xc0a47e;if(!_0xacb6ed[_0x70113e(0x134)]||_0xacb6ed[_0x70113e(0x209)]['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0xacb6ed['setStateAsync'](LTM_DP_STATUS,{'val':_0x70113e(0x1bd),'ack':!![]});return;}_0xacb6ed['log'][_0x70113e(0x217)](_0x70113e(0x16d)+_0xacb6ed[_0x70113e(0x209)][_0x70113e(0x219)]+_0x70113e(0x1f9)),await _0xacb6ed[_0x70113e(0x273)](LTM_DP_STATUS,{'val':'Analysiere\x20Tag...','ack':!![]});const _0x1afd85=_0xacb6ed['rawEventLog']['length']>0x320?_0xacb6ed[_0x70113e(0x209)][_0x70113e(0x1a4)](_0xacb6ed[_0x70113e(0x209)][_0x70113e(0x219)]-0x320):_0xacb6ed[_0x70113e(0x209)],_0x1ad808=PERSONA_MAPPING[_0xacb6ed[_0x70113e(0x178)]['aiPersona']||_0x70113e(0x1df)],_0x4c857c=_0x70113e(0x1cf)+_0x1ad808+_0x70113e(0x1c8)+JSON[_0x70113e(0x1e6)](_0x1afd85)+'\x0a\x20\x20\x20\x20OUTPUT\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22,\x20\x22health\x22:\x20{\x20\x22sleepScore\x22:\x20number,\x20\x22restlessness\x22:\x20\x22string\x22\x20}\x20}';try{const _0x22bdb2=await _0xacb6ed[_0x70113e(0x134)][_0x70113e(0x186)](_0x4c857c),_0x16f25d=_0x22bdb2[_0x70113e(0x14d)][_0x70113e(0x240)]()[_0x70113e(0x16b)](/```json|```/g,'')[_0x70113e(0x27c)](),_0x106e78=JSON[_0x70113e(0x1d4)](_0x16f25d),_0x890332={'timestamp':new Date()[_0x70113e(0x23f)](),'eventCount':_0xacb6ed[_0x70113e(0x209)][_0x70113e(0x219)],'summary':_0x106e78[_0x70113e(0x1ea)],'activityLevel':_0x106e78[_0x70113e(0x1d3)],'health':{'sleepScore':_0x106e78[_0x70113e(0x142)]?_0x106e78[_0x70113e(0x142)][_0x70113e(0x1f1)]:0x0,'restlessness':_0x106e78[_0x70113e(0x142)]?_0x106e78[_0x70113e(0x142)]['restlessness']:_0x70113e(0x12f)},'systemMode':_0xacb6ed[_0x70113e(0x274)]};_0xacb6ed['dailyDigests'][_0x70113e(0x168)](_0x890332),await saveDailyDigests(_0xacb6ed),_0xacb6ed['rawEventLog']=[],await saveRawEventLog(_0xacb6ed),await _0xacb6ed['setStateAsync'](LTM_DP_STATUS,{'val':_0x70113e(0x264),'ack':!![]}),_0xacb6ed[_0x70113e(0x1b2)]['info'](_0x70113e(0x27f));}catch(_0x464bbb){_0xacb6ed['log'][_0x70113e(0x1ba)]('Daily\x20Digest\x20Error:\x20'+_0x464bbb[_0x70113e(0x1e3)]),await _0xacb6ed[_0x70113e(0x273)](LTM_DP_STATUS,{'val':_0x70113e(0x24b)+_0x464bbb[_0x70113e(0x1e3)],'ack':!![]});}}async function sendMorningBriefing(_0x256fc1){const _0x1630fb=a0_0xc0a47e;if(!_0x256fc1[_0x1630fb(0x134)])return;_0x256fc1['log'][_0x1630fb(0x217)](_0x1630fb(0x200));const _0x4f32af=_0x256fc1[_0x1630fb(0x146)][_0x1630fb(0x219)]>0x0?_0x256fc1[_0x1630fb(0x146)][_0x256fc1['dailyDigests'][_0x1630fb(0x219)]-0x1]:null,_0x1f348e=_0x4f32af&&_0x4f32af[_0x1630fb(0x142)]?_0x4f32af[_0x1630fb(0x142)][_0x1630fb(0x1f1)]:_0x1630fb(0x22f),_0x280fdf=new Date();_0x280fdf['setHours'](0x4,0x0,0x0,0x0);const _0x558bdc=_0x256fc1[_0x1630fb(0x18b)][_0x1630fb(0x1f5)](_0x577284=>new Date(_0x577284[_0x1630fb(0x223)])>_0x280fdf),_0x54a787=PERSONA_MAPPING[_0x256fc1[_0x1630fb(0x178)][_0x1630fb(0x19b)]||_0x1630fb(0x1df)],_0xc00be2=_0x256fc1[_0x1630fb(0x178)][_0x1630fb(0x172)]||'',_0x493436=await getWeatherContext(_0x256fc1),_0x456f09=await getCalendarContext(_0x256fc1),_0x2929f0='ROLLE:\x20F√ºrsorglicher\x20Assistent.\x0a\x20\x20\x20\x20AUFGABE:\x20Schreibe\x20eine\x20kurze,\x20beruhigende\x20\x22Guten\x20Morgen\x22-Nachricht\x20an\x20die\x20Angeh√∂rigen/Bewohner.\x0a\x20\x20\x20\x20TON:\x20Freundlich,\x20professionell,\x20kurz.\x0a\x20\x20\x20\x20PERSONA\x20(Fokus):\x20'+_0x54a787+_0x1630fb(0x1d2)+_0xc00be2+_0x1630fb(0x23c)+_0x493436+'\x20'+_0x456f09+_0x1630fb(0x131)+_0x1f348e+'/100\x0a\x20\x20\x20\x20-\x20Aktivit√§t\x20seit\x2004:00\x20Uhr:\x20'+JSON[_0x1630fb(0x1e6)](_0x558bdc[_0x1630fb(0x1a4)](0x0,0xa))+_0x1630fb(0x158);try{const _0x4072b5=await _0x256fc1[_0x1630fb(0x134)]['generateContent'](_0x2929f0),_0x3cb380=_0x1630fb(0x1d0)+_0x4072b5[_0x1630fb(0x14d)][_0x1630fb(0x240)]()[_0x1630fb(0x27c)]();sendNotification(_0x256fc1,_0x3cb380),_0x256fc1[_0x1630fb(0x1b2)][_0x1630fb(0x217)](_0x1630fb(0x1fb));}catch(_0x6cbc12){_0x256fc1[_0x1630fb(0x1b2)][_0x1630fb(0x1ba)]('Briefing\x20Error:\x20'+_0x6cbc12[_0x1630fb(0x1e3)]);}}function setupLtmScheduler(_0x35986f){const _0x4a5064=a0_0xc0a47e;try{if(_0x35986f[_0x4a5064(0x1e5)])_0x35986f['ltmJob'][_0x4a5064(0x1aa)]();if(!_0x35986f[_0x4a5064(0x20d)]){_0x35986f[_0x4a5064(0x273)](LTM_DP_STATUS,{'val':_0x4a5064(0x145),'ack':!![]});return;}_0x35986f[_0x4a5064(0x1e5)]=schedule['scheduleJob'](LTM_SCHEDULE,()=>createDailyDigest(_0x35986f));}catch(_0x10e0fa){_0x35986f[_0x4a5064(0x1b2)][_0x4a5064(0x1ba)](_0x4a5064(0x15e)+_0x10e0fa[_0x4a5064(0x1e3)]);}}function setupModeResetScheduler(_0x3beeac){const _0x58b524=a0_0xc0a47e;try{if(_0x3beeac[_0x58b524(0x15c)])_0x3beeac[_0x58b524(0x15c)]['cancel']();_0x3beeac[_0x58b524(0x15c)]=schedule['scheduleJob'](MODE_RESET_SCHEDULE,async()=>{const _0x1a1a00=_0x58b524;await loadSystemMode(_0x3beeac),AUTO_RESET_MODES[_0x1a1a00(0x173)](_0x3beeac['currentSystemMode'])&&await _0x3beeac[_0x1a1a00(0x273)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x1a1a00(0x1c0)],'ack':![]});});}catch(_0x1ba4ca){_0x3beeac[_0x58b524(0x1b2)][_0x58b524(0x1ba)](_0x58b524(0x17c)+_0x1ba4ca[_0x58b524(0x1e3)]);}}function setupDriftAnalysisScheduler(_0x394418){const _0x47fd37=a0_0xc0a47e;try{if(_0x394418[_0x47fd37(0x238)])clearInterval(_0x394418[_0x47fd37(0x238)]);if(!_0x394418['isProVersion'])return;_0x394418[_0x47fd37(0x238)]=setInterval(()=>runBaselineDriftAnalysis(_0x394418),(_0x394418[_0x47fd37(0x178)]['ltmDriftCheckIntervalHours']||0x18)*0x36ee80),setTimeout(()=>runBaselineDriftAnalysis(_0x394418),0x1388);}catch(_0x49fd84){_0x394418['log'][_0x47fd37(0x1ba)]('Drift\x20Sched\x20Error:\x20'+_0x49fd84['message']);}}function setupBriefingScheduler(_0x29b4bb){const _0x21b939=a0_0xc0a47e;try{if(_0x29b4bb['briefingJob'])_0x29b4bb[_0x21b939(0x169)][_0x21b939(0x1aa)]();if(!_0x29b4bb[_0x21b939(0x178)][_0x21b939(0x1b0)])return;const _0x358bd2=(_0x29b4bb[_0x21b939(0x178)][_0x21b939(0x1cb)]||_0x21b939(0x265))['split'](':'),_0x423ba8=parseInt(_0x358bd2[0x0])||0x8,_0x43c41e=parseInt(_0x358bd2[0x1])||0x0,_0x500ae8=_0x43c41e+'\x20'+_0x423ba8+_0x21b939(0x26b);_0x29b4bb['log'][_0x21b939(0x217)](_0x21b939(0x1ec)+_0x423ba8+':'+(_0x43c41e<0xa?'0'+_0x43c41e:_0x43c41e)),_0x29b4bb[_0x21b939(0x169)]=schedule[_0x21b939(0x132)](_0x500ae8,()=>{sendMorningBriefing(_0x29b4bb);});}catch(_0x259502){_0x29b4bb[_0x21b939(0x1b2)][_0x21b939(0x1ba)]('Briefing\x20Sched\x20Error:\x20'+_0x259502[_0x21b939(0x1e3)]);}}async function saveFeedback(_0x304c0b,_0x3ba160){const _0x327120=a0_0xc0a47e;_0x304c0b[_0x327120(0x1b2)][_0x327120(0x217)]('Feedback\x20saved:\x20'+JSON[_0x327120(0x1e6)](_0x3ba160));}function a0_0x153f(_0x5e8b23,_0x285116){const _0x5ad856=a0_0x3a7f();return a0_0x153f=function(_0x5435bd,_0x4c9d9f){_0x5435bd=_0x5435bd-0x128;let _0x3a7f28=_0x5ad856[_0x5435bd];return _0x3a7f28;},a0_0x153f(_0x5e8b23,_0x285116);}async function createAllObjects(_0x399370){const _0x5a80b0=a0_0xc0a47e;try{await checkSystemObjects(_0x399370),await _0x399370[_0x5a80b0(0x215)](_0x5a80b0(0x255),{'type':'state','common':{'name':_0x5a80b0(0x26a),'type':'boolean','role':_0x5a80b0(0x281),'read':!![],'write':![],'def':!![]},'native':{}}),await _0x399370[_0x5a80b0(0x215)](_0x5a80b0(0x224),{'type':_0x5a80b0(0x1ca),'common':{'name':'Last\x20raw\x20event','type':_0x5a80b0(0x157),'role':_0x5a80b0(0x27e),'read':!![],'write':![]},'native':{}}),await _0x399370[_0x5a80b0(0x215)]('events.history',{'type':_0x5a80b0(0x1ca),'common':{'name':_0x5a80b0(0x23d),'type':_0x5a80b0(0x157),'role':_0x5a80b0(0x27e),'read':!![],'write':![]},'native':{}}),await _0x399370[_0x5a80b0(0x215)]('analysis.trigger',{'type':'state','common':{'name':_0x5a80b0(0x15b),'type':_0x5a80b0(0x22d),'role':_0x5a80b0(0x155),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x399370[_0x5a80b0(0x215)](_0x5a80b0(0x231),{'type':_0x5a80b0(0x1ca),'common':{'name':_0x5a80b0(0x234),'type':_0x5a80b0(0x22d),'role':_0x5a80b0(0x155),'read':!![],'write':!![],'def':![]},'native':{}}),await _0x399370[_0x5a80b0(0x215)]('analysis.lastResult',{'type':_0x5a80b0(0x1ca),'common':{'name':_0x5a80b0(0x22e),'type':_0x5a80b0(0x157),'role':_0x5a80b0(0x27e),'read':!![],'write':![]},'native':{}}),await _0x399370[_0x5a80b0(0x215)](_0x5a80b0(0x1c6),{'type':_0x5a80b0(0x1ca),'common':{'name':_0x5a80b0(0x242),'type':_0x5a80b0(0x22d),'role':'indicator.alarm','read':!![],'write':![],'def':![]},'native':{}}),await _0x399370[_0x5a80b0(0x215)](_0x5a80b0(0x180),{'type':'state','common':{'name':_0x5a80b0(0x248),'type':'boolean','role':_0x5a80b0(0x1dd),'read':!![],'write':![],'def':![]},'native':{}}),await _0x399370[_0x5a80b0(0x215)](_0x5a80b0(0x171),{'type':'state','common':{'name':_0x5a80b0(0x147),'type':_0x5a80b0(0x157),'role':_0x5a80b0(0x1f0),'read':!![],'write':![]},'native':{}}),await _0x399370[_0x5a80b0(0x215)](_0x5a80b0(0x1a6),{'type':_0x5a80b0(0x1ca),'common':{'name':_0x5a80b0(0x222),'type':_0x5a80b0(0x157),'role':_0x5a80b0(0x240),'read':!![],'write':![]},'native':{}}),await _0x399370[_0x5a80b0(0x215)](_0x5a80b0(0x205),{'type':_0x5a80b0(0x1ca),'common':{'name':_0x5a80b0(0x195),'type':_0x5a80b0(0x157),'role':_0x5a80b0(0x1ca),'read':!![],'write':![],'def':'N/A'},'native':{}}),await _0x399370[_0x5a80b0(0x215)]('analysis.comfortSummary',{'type':_0x5a80b0(0x1ca),'common':{'name':_0x5a80b0(0x221),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await _0x399370[_0x5a80b0(0x215)](_0x5a80b0(0x156),{'type':_0x5a80b0(0x1ca),'common':{'name':_0x5a80b0(0x18e),'type':_0x5a80b0(0x157),'role':'text','read':!![],'write':![]},'native':{}}),await _0x399370[_0x5a80b0(0x1e0)](_0x5a80b0(0x1e2),{'type':_0x5a80b0(0x202),'common':{'name':_0x5a80b0(0x1d5)},'native':{}}),await _0x399370[_0x5a80b0(0x215)]('analysis.automation.patternDetected',{'type':_0x5a80b0(0x1ca),'common':{'name':_0x5a80b0(0x1c9),'type':'boolean','role':_0x5a80b0(0x281),'read':!![],'write':![],'def':![]},'native':{}}),await _0x399370['setObjectNotExistsAsync']('analysis.automation.description',{'type':_0x5a80b0(0x1ca),'common':{'name':_0x5a80b0(0x1d6),'type':_0x5a80b0(0x157),'role':'text','read':!![],'write':![]},'native':{}}),await _0x399370[_0x5a80b0(0x215)]('analysis.automation.suggestedAction',{'type':_0x5a80b0(0x1ca),'common':{'name':_0x5a80b0(0x135),'type':_0x5a80b0(0x157),'role':'text','read':!![],'write':![]},'native':{}}),await _0x399370[_0x5a80b0(0x215)](_0x5a80b0(0x1da),{'type':_0x5a80b0(0x1ca),'common':{'name':'Logbook','type':_0x5a80b0(0x157),'role':_0x5a80b0(0x27e),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x399370[_0x5a80b0(0x215)](_0x5a80b0(0x193),{'type':_0x5a80b0(0x1ca),'common':{'name':_0x5a80b0(0x1b1),'type':'string','role':_0x5a80b0(0x27e),'read':!![],'write':![],'def':'[]'},'native':{}}),await _0x399370[_0x5a80b0(0x1e0)](_0x5a80b0(0x1be),{'type':_0x5a80b0(0x202),'common':{'name':'Health\x20&\x20Sleep\x20Analysis'},'native':{}}),await _0x399370['setObjectNotExistsAsync'](_0x5a80b0(0x220),{'type':_0x5a80b0(0x1ca),'common':{'name':'Sleep\x20Score\x20(0-100)','type':_0x5a80b0(0x278),'role':_0x5a80b0(0x137),'read':!![],'write':![],'def':0x0},'native':{}}),await _0x399370[_0x5a80b0(0x215)](_0x5a80b0(0x1dc),{'type':'state','common':{'name':_0x5a80b0(0x133),'type':_0x5a80b0(0x157),'role':_0x5a80b0(0x240),'read':!![],'write':![],'def':_0x5a80b0(0x12f)},'native':{}}),await _0x399370[_0x5a80b0(0x215)](_0x5a80b0(0x218),{'type':_0x5a80b0(0x1ca),'common':{'name':'Health\x20Notes','type':_0x5a80b0(0x157),'role':_0x5a80b0(0x240),'read':!![],'write':![],'def':''},'native':{}}),await checkLtmObjects(_0x399370),await checkLtmDriftObjects(_0x399370);}catch(_0x5db956){_0x399370[_0x5a80b0(0x1b2)][_0x5a80b0(0x1ba)]('Error\x20creating\x20objects:\x20'+_0x5db956['message']);}}if(require['main']!==module)module[a0_0xc0a47e(0x21c)]=_0x480ed8=>new CogniLiving(_0x480ed8);else new CogniLiving();