const a0_0x23a865=a0_0x2f17;(function(_0x24e727,_0xc3d018){const _0x165621=a0_0x2f17,_0x45d197=_0x24e727();while(!![]){try{const _0x482374=parseInt(_0x165621(0x32c))/0x1+-parseInt(_0x165621(0x27a))/0x2+-parseInt(_0x165621(0x2e7))/0x3+-parseInt(_0x165621(0x24a))/0x4+parseInt(_0x165621(0x2e9))/0x5+parseInt(_0x165621(0x2f1))/0x6+parseInt(_0x165621(0x299))/0x7*(-parseInt(_0x165621(0x225))/0x8);if(_0x482374===_0xc3d018)break;else _0x45d197['push'](_0x45d197['shift']());}catch(_0x205881){_0x45d197['push'](_0x45d197['shift']());}}}(a0_0x5cdb,0x9a0c2));const a0_0x3bf3cc=(function(){let _0x1ec99a=!![];return function(_0x2c56c1,_0x3d6ce4){const _0x57ae77=_0x1ec99a?function(){const _0x126e77=a0_0x2f17;if(_0x3d6ce4){const _0x4c341c=_0x3d6ce4[_0x126e77(0x269)](_0x2c56c1,arguments);return _0x3d6ce4=null,_0x4c341c;}}:function(){};return _0x1ec99a=![],_0x57ae77;};}()),a0_0x1632ee=a0_0x3bf3cc(this,function(){const _0x4d7171=a0_0x2f17;return a0_0x1632ee[_0x4d7171(0x2af)]()[_0x4d7171(0x1c5)](_0x4d7171(0x255))[_0x4d7171(0x2af)]()['constructor'](a0_0x1632ee)[_0x4d7171(0x1c5)]('(((.+)+)+)+$');});a0_0x1632ee();'use strict';const utils=require(a0_0x23a865(0x2a1)),{GoogleGenerativeAI}=require(a0_0x23a865(0x239)),schedule=require(a0_0x23a865(0x2a2)),{spawn,exec,execSync}=require(a0_0x23a865(0x332)),path=require(a0_0x23a865(0x1a5)),fs=require('fs'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL=a0_0x23a865(0x333),LTM_SCHEDULE=a0_0x23a865(0x311),MODE_RESET_SCHEDULE='0\x204\x20*\x20*\x20*',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x23a865(0x25a),LTM_DP_DAILY_DIGESTS=a0_0x23a865(0x271),LTM_DP_STATUS=a0_0x23a865(0x2db),LTM_DP_TRIGGER_DIGEST=a0_0x23a865(0x250),LTM_DP_BASELINE_STATUS=a0_0x23a865(0x221),LTM_DP_DRIFT_CHANNEL=a0_0x23a865(0x31d),LTM_DP_DRIFT_STATUS=a0_0x23a865(0x245),LTM_DP_DRIFT_DETAILS=a0_0x23a865(0x274),LTM_DP_DRIFT_LAST_CHECK='LTM.driftAnalysis.lastCheck',SYSTEM_DP_MODE=a0_0x23a865(0x1d8),SYSTEM_MODES={'NORMAL':'normal','VACATION':'vacation','PARTY':a0_0x23a865(0x2cf),'GUEST':a0_0x23a865(0x181)},AUTO_RESET_MODES=[SYSTEM_MODES['PARTY'],SYSTEM_MODES[a0_0x23a865(0x329)]],PERSONA_MAPPING={'generic':a0_0x23a865(0x19d),'senior_aal':a0_0x23a865(0x192),'family':a0_0x23a865(0x303),'single_comfort':a0_0x23a865(0x1f5),'security':a0_0x23a865(0x1af)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0},IS_WIN=process[a0_0x23a865(0x2fc)]==='win32',PERSISTENT_DIR=path['join'](__dirname,a0_0x23a865(0x2bf)),VENV_PATH=PERSISTENT_DIR,PYTHON_EXE=IS_WIN?path[a0_0x23a865(0x1a0)](VENV_PATH,a0_0x23a865(0x1c3),a0_0x23a865(0x2d5)):path[a0_0x23a865(0x1a0)](VENV_PATH,'bin','python'),PIP_EXE=IS_WIN?path[a0_0x23a865(0x1a0)](VENV_PATH,a0_0x23a865(0x1c3),a0_0x23a865(0x1d9)):path[a0_0x23a865(0x1a0)](VENV_PATH,a0_0x23a865(0x1fd),a0_0x23a865(0x261));let activeSequence=[],sequenceTimer=null;async function startSystem(_0x36b2ad){const _0x19601b=a0_0x23a865;_0x36b2ad[_0x19601b(0x1fe)][_0x19601b(0x268)]('ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.2)...'),await initZombies(_0x36b2ad);try{_0x36b2ad['isProVersion']=await checkLicense(_0x36b2ad[_0x19601b(0x320)][_0x19601b(0x266)]);}catch(_0x1df180){}if(!_0x36b2ad[_0x19601b(0x320)]['inactivityThresholdHours']||_0x36b2ad[_0x19601b(0x320)][_0x19601b(0x28f)]<0.1)_0x36b2ad[_0x19601b(0x320)][_0x19601b(0x28f)]=0xc;await initHistory(_0x36b2ad),await initSystemConfig(_0x36b2ad);if(_0x36b2ad[_0x19601b(0x320)]['geminiApiKey'])try{_0x36b2ad[_0x19601b(0x264)]=new GoogleGenerativeAI(_0x36b2ad[_0x19601b(0x320)][_0x19601b(0x22d)]),_0x36b2ad[_0x19601b(0x2aa)]=_0x36b2ad[_0x19601b(0x264)][_0x19601b(0x29b)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x19601b(0x17c)}}),_0x36b2ad[_0x19601b(0x1fe)]['info'](_0x19601b(0x2ac));}catch(_0x1514d2){_0x36b2ad['log'][_0x19601b(0x2f8)](_0x19601b(0x336)+_0x1514d2[_0x19601b(0x23d)]);}await createAllObjects(_0x36b2ad),await loadSystemMode(_0x36b2ad),await loadRawEventLog(_0x36b2ad),await loadDailyDigests(_0x36b2ad),_0x36b2ad[_0x19601b(0x22b)]('analysis.trigger'),_0x36b2ad[_0x19601b(0x22b)](LTM_DP_TRIGGER_DIGEST),_0x36b2ad[_0x19601b(0x22b)](_0x19601b(0x1d8)),_0x36b2ad['subscribeStates'](_0x19601b(0x2b3)),_0x36b2ad[_0x19601b(0x22b)](_0x19601b(0x307)),_0x36b2ad[_0x19601b(0x22b)](_0x19601b(0x1ce)),_0x36b2ad[_0x19601b(0x22b)](_0x19601b(0x328)),_0x36b2ad[_0x19601b(0x22b)]('analysis.training.triggerHealth'),_0x36b2ad['subscribeStates']('analysis.training.triggerEnergy'),_0x36b2ad[_0x19601b(0x22b)](_0x19601b(0x270)),_0x36b2ad[_0x19601b(0x22b)](_0x19601b(0x226)),await initSensorSubscriptions(_0x36b2ad),await initPresenceSubscriptions(_0x36b2ad),await setupTelegramListener(_0x36b2ad),setTimeout(()=>checkWifiPresence(_0x36b2ad),0x1388);if(_0x36b2ad['analysisTimer'])clearInterval(_0x36b2ad[_0x19601b(0x2fd)]);const _0x1018c2=_0x36b2ad[_0x19601b(0x320)][_0x19601b(0x228)]||0xf;_0x1018c2>0x0&&(_0x36b2ad[_0x19601b(0x2fd)]=setInterval(()=>{runAutopilot(_0x36b2ad);},_0x1018c2*0x3c*0x3e8)),setupLtmScheduler(_0x36b2ad),setupModeResetScheduler(_0x36b2ad),setupDriftAnalysisScheduler(_0x36b2ad),setupBriefingScheduler(_0x36b2ad),startPythonService(_0x36b2ad),setTimeout(()=>{_0x36b2ad['pythonProcess']&&(runPythonHealthCheck(_0x36b2ad),triggerGaitAnalysis(_0x36b2ad),triggerEnergyPrediction(_0x36b2ad)),updateHealthVector(_0x36b2ad);},0x1388);}async function runAutopilot(_0x3c4b98){const _0x47c54a=a0_0x23a865;_0x3c4b98[_0x47c54a(0x1fe)][_0x47c54a(0x2a3)]('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await runGeminiAnalysis(_0x3c4b98),updateHealthVector(_0x3c4b98),triggerGaitAnalysis(_0x3c4b98),triggerEnergyPrediction(_0x3c4b98);}async function triggerGaitAnalysis(_0x32de41){const _0x3f2e60=a0_0x23a865;if(!_0x32de41['isProVersion'])return;try{const _0x5acff8=await _0x32de41[_0x3f2e60(0x210)]('LTM.trainingData.sequences');_0x5acff8&&_0x5acff8[_0x3f2e60(0x204)]&&sendToPython(_0x32de41,_0x3f2e60(0x263),{'sequences':JSON[_0x3f2e60(0x1ec)](_0x5acff8[_0x3f2e60(0x204)])});}catch(_0x5abb06){}}async function triggerEnergyPrediction(_0x3d9407){const _0x57ebba=a0_0x23a865;if(!_0x3d9407[_0x57ebba(0x242)])return;try{const _0x399520=await getOutsideTemperatureNumeric(_0x3d9407);if(_0x399520===null)return;const _0x56d7f9={},_0x35a496=_0x3d9407['config'][_0x57ebba(0x209)]||[];for(const _0x4ac44b of _0x35a496){if(_0x4ac44b[_0x57ebba(0x2b6)]==='temperature'&&_0x4ac44b[_0x57ebba(0x284)]){const _0x5b00df=_0x3d9407[_0x57ebba(0x2cd)][_0x4ac44b['id']];if(_0x5b00df!==undefined)_0x56d7f9[_0x4ac44b[_0x57ebba(0x284)]]=_0x5b00df;}}Object[_0x57ebba(0x1cc)](_0x56d7f9)[_0x57ebba(0x195)]>0x0&&sendToPython(_0x3d9407,_0x57ebba(0x1f4),{'current_temps':_0x56d7f9,'t_out':_0x399520});}catch(_0x14758d){}}function updateHealthVector(_0x57ad8e){const _0x23820f=a0_0x23a865;if(!_0x57ad8e[_0x23820f(0x200)]||_0x57ad8e[_0x23820f(0x200)][_0x23820f(0x195)]===0x0)return;const _0x2c845c=new Array(0x60)['fill'](0x0),_0x2e8bf0=new Date()['setHours'](0x0,0x0,0x0,0x0);_0x57ad8e[_0x23820f(0x200)][_0x23820f(0x2e8)](_0x5904a7=>{const _0x1be749=_0x23820f,_0x801a82=new Date(_0x5904a7[_0x1be749(0x2c5)]);if(_0x801a82[_0x1be749(0x21e)]()>=_0x2e8bf0){const _0x2753d1=_0x801a82['getHours'](),_0x4a2def=_0x801a82[_0x1be749(0x2bb)](),_0x592afc=_0x2753d1*0x4+Math[_0x1be749(0x2bc)](_0x4a2def/0xf);if(_0x592afc>=0x0&&_0x592afc<0x60)_0x2c845c[_0x592afc]++;}}),_0x57ad8e[_0x23820f(0x1b4)](_0x23820f(0x2d9),{'val':JSON['stringify'](_0x2c845c),'ack':!![]});}async function scanForDevices(_0xdb33c5,_0x3ff0c5){const _0x228a97=a0_0x23a865;_0xdb33c5[_0x228a97(0x1fe)][_0x228a97(0x268)](_0x228a97(0x1d7));const _0x307d75=[],_0x21d1af=await _0xdb33c5['getForeignObjectsAsync']('*'),_0x4694d3={};try{const _0x211e9d=await _0xdb33c5['getForeignObjectsAsync'](_0x228a97(0x294),_0x228a97(0x22e));for(const _0xb595c6 in _0x211e9d){const _0x25f508=_0x211e9d[_0xb595c6],_0x1fcd92=(_0x25f508[_0x228a97(0x24f)]&&typeof _0x25f508['common']['name']===_0x228a97(0x199)?_0x25f508[_0x228a97(0x24f)][_0x228a97(0x27e)]['de']:_0x25f508[_0x228a97(0x24f)][_0x228a97(0x27e)])||_0x25f508[_0x228a97(0x24f)][_0x228a97(0x27e)];if(_0x25f508[_0x228a97(0x24f)]&&_0x25f508[_0x228a97(0x24f)][_0x228a97(0x2f4)])for(const _0x526b5a of _0x25f508[_0x228a97(0x24f)][_0x228a97(0x2f4)]){_0x4694d3[_0x526b5a]=_0x1fcd92;}}}catch(_0x25dccf){_0xdb33c5[_0x228a97(0x1fe)]['warn'](_0x228a97(0x19f)+_0x25dccf['message']);}let _0x3ded39=null,_0x2daa12={};if(_0x3ff0c5[_0x228a97(0x316)]&&_0x3ff0c5[_0x228a97(0x316)]['length']>0x0){_0x3ded39=new Set();for(const _0x358f3e of _0x3ff0c5['selectedFunctionIds']){const _0x61a63f=await _0xdb33c5['getForeignObjectAsync'](_0x358f3e);if(_0x61a63f&&_0x61a63f['common']&&_0x61a63f[_0x228a97(0x24f)][_0x228a97(0x2f4)]){let _0x2d850e=null;const _0xfb098f=_0x358f3e[_0x228a97(0x283)]();if(_0xfb098f['includes']('light')||_0xfb098f[_0x228a97(0x18c)](_0x228a97(0x1dc)))_0x2d850e='light';else{if(_0xfb098f['includes']('heating')||_0xfb098f[_0x228a97(0x18c)]('heizung'))_0x2d850e=_0x228a97(0x2dc);else{if(_0xfb098f[_0x228a97(0x18c)](_0x228a97(0x215))||_0xfb098f[_0x228a97(0x18c)](_0x228a97(0x206)))_0x2d850e='door';}}for(const _0x289ddb of _0x61a63f[_0x228a97(0x24f)]['members']){_0x3ded39[_0x228a97(0x1bf)](_0x289ddb);if(_0x2d850e)_0x2daa12[_0x289ddb]=_0x2d850e;}}}}for(const _0x142fe4 in _0x21d1af){const _0x44ab90=_0x21d1af[_0x142fe4];if(_0x44ab90&&_0x44ab90[_0x228a97(0x24f)]&&_0x44ab90[_0x228a97(0x2b6)]===_0x228a97(0x28e)){if(_0x3ded39){let _0x5b9dee=_0x3ded39[_0x228a97(0x1d4)](_0x142fe4);if(!_0x5b9dee){const _0x49ae5a=_0x142fe4[_0x228a97(0x20a)]('.'),_0xc89214=_0x49ae5a['slice'](0x0,-0x1)[_0x228a97(0x1a0)]('.'),_0x5d27b5=_0x49ae5a[_0x228a97(0x2a8)](0x0,-0x2)[_0x228a97(0x1a0)]('.');if(_0x3ded39[_0x228a97(0x1d4)](_0xc89214)){_0x5b9dee=!![];if(_0x2daa12[_0xc89214])_0x2daa12[_0x142fe4]=_0x2daa12[_0xc89214];}else{if(_0x3ded39['has'](_0x5d27b5)){_0x5b9dee=!![];if(_0x2daa12[_0x5d27b5])_0x2daa12[_0x142fe4]=_0x2daa12[_0x5d27b5];}}}if(!_0x5b9dee)continue;}let _0x6f8981=(_0x44ab90[_0x228a97(0x24f)][_0x228a97(0x27e)]&&typeof _0x44ab90[_0x228a97(0x24f)]['name']===_0x228a97(0x199)?_0x44ab90[_0x228a97(0x24f)][_0x228a97(0x27e)]['de']:_0x44ab90[_0x228a97(0x24f)][_0x228a97(0x27e)])||'';const _0x4ca51a=(_0x44ab90[_0x228a97(0x24f)][_0x228a97(0x324)]||'')[_0x228a97(0x283)](),_0x5a6bf1=_0x6f8981[_0x228a97(0x283)]();let _0x2ec83a=_0x2daa12[_0x142fe4]||null;if(!_0x2ec83a){if(_0x3ff0c5[_0x228a97(0x30b)]&&(_0x4ca51a['includes']('motion')||_0x5a6bf1[_0x228a97(0x18c)](_0x228a97(0x1ea))||_0x4ca51a[_0x228a97(0x18c)]('presence')))_0x2ec83a=_0x228a97(0x30b);else{if(_0x3ff0c5[_0x228a97(0x32f)]&&(_0x4ca51a[_0x228a97(0x18c)](_0x228a97(0x1b1))||_0x4ca51a[_0x228a97(0x18c)](_0x228a97(0x215))||_0x5a6bf1['includes'](_0x228a97(0x28c))||_0x5a6bf1[_0x228a97(0x18c)](_0x228a97(0x206))||_0x4ca51a[_0x228a97(0x18c)](_0x228a97(0x1c4))))_0x2ec83a=_0x228a97(0x1b1);else{if(_0x3ff0c5[_0x228a97(0x1dd)]&&(_0x4ca51a[_0x228a97(0x18c)](_0x228a97(0x315))||_0x4ca51a['includes'](_0x228a97(0x296))||_0x5a6bf1[_0x228a97(0x18c)]('licht')||_0x4ca51a[_0x228a97(0x18c)]('level.dimmer')))_0x2ec83a=_0x228a97(0x315);else{if(_0x3ff0c5[_0x228a97(0x2dc)]&&(_0x4ca51a['includes'](_0x228a97(0x2dc))||_0x5a6bf1['includes'](_0x228a97(0x248))||_0x4ca51a[_0x228a97(0x18c)](_0x228a97(0x1bb))))_0x2ec83a=_0x228a97(0x2dc);}}}}if(_0x2ec83a){const _0x285880=[_0x228a97(0x1a1),_0x228a97(0x28e),_0x228a97(0x2ca),_0x228a97(0x1f3),'on','off',_0x228a97(0x28d),_0x228a97(0x2c3),'status',_0x228a97(0x1e4),'temperature','setpoint','presence'],_0x2778e1=!_0x6f8981||_0x285880[_0x228a97(0x20e)](_0x37ef30=>_0x5a6bf1===_0x37ef30||_0x5a6bf1[_0x228a97(0x18c)](_0x37ef30));if(_0x2778e1){const _0x594d90=_0x142fe4[_0x228a97(0x20a)]('.'),_0xdbeefe=_0x594d90[_0x228a97(0x2a8)](0x0,-0x1)['join']('.'),_0x2b4667=_0x21d1af[_0xdbeefe];if(_0x2b4667&&_0x2b4667['common']&&_0x2b4667['common'][_0x228a97(0x27e)]){let _0x46bc11=(typeof _0x2b4667[_0x228a97(0x24f)][_0x228a97(0x27e)]===_0x228a97(0x199)?_0x2b4667[_0x228a97(0x24f)][_0x228a97(0x27e)]['de']:_0x2b4667[_0x228a97(0x24f)][_0x228a97(0x27e)])||'';if(!_0x46bc11||_0x46bc11[_0x228a97(0x283)]()[_0x228a97(0x18c)](_0x228a97(0x229))||_0x46bc11===_0xdbeefe[_0x228a97(0x20a)]('.')[_0x228a97(0x2a4)]()){const _0x2f88cd=_0x594d90['slice'](0x0,-0x2)['join']('.'),_0x149412=_0x21d1af[_0x2f88cd];_0x149412&&_0x149412[_0x228a97(0x24f)]&&_0x149412[_0x228a97(0x24f)][_0x228a97(0x27e)]&&(_0x46bc11=(typeof _0x149412[_0x228a97(0x24f)]['name']==='object'?_0x149412[_0x228a97(0x24f)]['name']['de']:_0x149412[_0x228a97(0x24f)][_0x228a97(0x27e)])||'');}_0x46bc11&&(_0x6f8981=_0x46bc11+'\x20('+(_0x6f8981||_0x142fe4[_0x228a97(0x20a)]('.')[_0x228a97(0x2a4)]())+')');}}let _0x142085=_0x4694d3[_0x142fe4];if(!_0x142085){const _0x5c8602=_0x142fe4[_0x228a97(0x20a)]('.')[_0x228a97(0x2a8)](0x0,-0x1)[_0x228a97(0x1a0)]('.');_0x142085=_0x4694d3[_0x5c8602];}if(!_0x142085){const _0x2d4ecc=_0x142fe4[_0x228a97(0x20a)]('.')[_0x228a97(0x2a8)](0x0,-0x2)[_0x228a97(0x1a0)]('.');_0x142085=_0x4694d3[_0x2d4ecc];}if(!_0x142085){const _0xeacf0e=_0x142fe4['split']('.');if(_0xeacf0e[_0x228a97(0x195)]>0x2)_0x142085=_0xeacf0e[0x2];}_0x307d75[_0x228a97(0x1c0)]({'id':_0x142fe4,'name':_0x6f8981||_0x142fe4,'type':_0x2ec83a,'location':_0x142085||'','_score':_0x3ded39?0x5a:0x32});}}}return _0xdb33c5['log'][_0x228a97(0x268)](_0x228a97(0x18a)+_0x307d75[_0x228a97(0x195)]+'\x20candidates.'),_0x307d75;}async function getWeatherContext(_0x3192ff){const _0x278a31=a0_0x23a865;if(!_0x3192ff[_0x278a31(0x320)][_0x278a31(0x249)]||!_0x3192ff[_0x278a31(0x320)]['weatherInstance'])return _0x278a31(0x208);try{const _0x3e2007=_0x3192ff['config'][_0x278a31(0x2ea)];let _0x4f4ea1=await _0x3192ff[_0x278a31(0x237)](_0x3e2007+_0x278a31(0x30c));if(!_0x4f4ea1)_0x4f4ea1=await _0x3192ff['getForeignStateAsync'](_0x3e2007+'.forecast.current.temperature');let _0x2ed5b7=await _0x3192ff['getForeignStateAsync'](_0x3e2007+'.Current.WeatherText');if(!_0x2ed5b7)_0x2ed5b7=await _0x3192ff['getForeignStateAsync'](_0x3e2007+_0x278a31(0x232));if(_0x4f4ea1&&_0x2ed5b7)return _0x4f4ea1[_0x278a31(0x204)]+_0x278a31(0x310)+_0x2ed5b7[_0x278a31(0x204)];}catch(_0x2c2db7){}return _0x278a31(0x272);}async function getCalendarContext(_0x4162c9){const _0x5d441c=a0_0x23a865;if(!_0x4162c9[_0x5d441c(0x320)][_0x5d441c(0x2be)]||!_0x4162c9[_0x5d441c(0x320)][_0x5d441c(0x197)])return'Kalender\x20deaktiviert.';return _0x5d441c(0x305);}async function getCalendarNames(_0x247698,_0x4b4dd2){return[];}async function saveFeedback(_0x5d540e,_0x315e07){const _0x186a2d=a0_0x23a865;_0x5d540e[_0x186a2d(0x1fe)][_0x186a2d(0x268)](_0x186a2d(0x1c8)+_0x315e07['rating']);}async function sendMorningBriefing(_0xc65b4){const _0x3190d7=a0_0x23a865;if(!_0xc65b4[_0x3190d7(0x2aa)])return;try{const _0x222a31='Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.',_0x132bc6=await _0xc65b4[_0x3190d7(0x2aa)][_0x3190d7(0x26f)](_0x222a31),_0xc5db4b=_0x132bc6[_0x3190d7(0x1f6)][_0x3190d7(0x227)]();sendNotification(_0xc65b4,_0x3190d7(0x2ec)+_0xc5db4b);}catch(_0xb69c18){_0xc65b4['log'][_0x3190d7(0x2f8)](_0x3190d7(0x25e)+_0xb69c18['message']);}}function checkAndInstall(_0xc3abd2){const _0x460586=a0_0x23a865;if(fs[_0x460586(0x1b2)](PYTHON_EXE)&&fs['existsSync'](PIP_EXE))try{return _0xc3abd2[_0x460586(0x1fe)][_0x460586(0x268)](_0x460586(0x17b)),execSync('\x22'+PYTHON_EXE+_0x460586(0x24d),{'timeout':0x3a98}),_0xc3abd2[_0x460586(0x1fe)][_0x460586(0x268)](_0x460586(0x1e9)),!![];}catch(_0x125e98){_0xc3abd2[_0x460586(0x1fe)][_0x460586(0x26d)]('âš ï¸\x20Fast-Boot\x20failed\x20(Broken\x20VENV\x20or\x20Missing\x20Libs).\x20Triggering\x20Self-Healing...');}else _0xc3abd2[_0x460586(0x1fe)][_0x460586(0x26d)](_0x460586(0x1fb));return installPythonDependencies(_0xc3abd2),![];}function installPythonDependencies(_0x393876){const _0x2b238=a0_0x23a865;if(_0x393876[_0x2b238(0x233)])return;_0x393876['dependencyInstallInProgress']=!![];const _0x4b3aed=path[_0x2b238(0x1a0)](__dirname,_0x2b238(0x22f),_0x2b238(0x29a));stopPythonService(_0x393876);if(fs[_0x2b238(0x1b2)](VENV_PATH)&&!fs[_0x2b238(0x1b2)](PIP_EXE)){_0x393876[_0x2b238(0x1fe)][_0x2b238(0x26d)](_0x2b238(0x278));try{fs[_0x2b238(0x188)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x18ce47){_0x393876[_0x2b238(0x1fe)][_0x2b238(0x2f8)](_0x2b238(0x28b)+_0x18ce47[_0x2b238(0x23d)]);}}if(!fs['existsSync'](VENV_PATH))try{_0x393876[_0x2b238(0x1fe)][_0x2b238(0x268)](_0x2b238(0x244)),execSync('python3\x20-m\x20venv\x20\x22'+VENV_PATH+'\x22');}catch(_0x2d5147){_0x393876[_0x2b238(0x233)]=![];_0x2d5147[_0x2b238(0x23d)][_0x2b238(0x18c)](_0x2b238(0x262))||_0x2d5147[_0x2b238(0x23d)][_0x2b238(0x18c)](_0x2b238(0x223))?(_0x393876[_0x2b238(0x1fe)][_0x2b238(0x2f8)]('ðŸ›‘\x20PERMISSION\x20ERROR:\x20Der\x20Adapter\x20darf\x20das\x20VENV\x20nicht\x20anlegen.'),_0x393876[_0x2b238(0x1fe)][_0x2b238(0x2f8)](_0x2b238(0x1f7)+path[_0x2b238(0x1a0)](__dirname))):_0x393876[_0x2b238(0x1fe)][_0x2b238(0x2f8)](_0x2b238(0x287)+_0x2d5147[_0x2b238(0x23d)]+_0x2b238(0x2a6));return;}installRequirementsInVenv(_0x393876,_0x4b3aed);}function installRequirementsInVenv(_0x4b2550,_0x2be7bc){const _0x498a72=a0_0x23a865;_0x4b2550[_0x498a72(0x1fe)][_0x498a72(0x268)](_0x498a72(0x31e));const _0x57508f='\x22'+PIP_EXE+'\x22\x20install\x20-r\x20\x22'+_0x2be7bc+'\x22';exec(_0x57508f,{'timeout':0x1b7740},(_0x3c384f,_0x4827e7,_0x50b7fa)=>{const _0xfe114=_0x498a72;_0x4b2550[_0xfe114(0x233)]=![];if(_0x3c384f){_0x4b2550[_0xfe114(0x1fe)][_0xfe114(0x2f8)](_0xfe114(0x186)+(_0x50b7fa||_0x3c384f['message']));try{fs[_0xfe114(0x188)](VENV_PATH,{'recursive':!![],'force':!![]});}catch(_0x57deac){}}else _0x4b2550[_0xfe114(0x1fe)][_0xfe114(0x268)](_0xfe114(0x2f7)),startSystem(_0x4b2550);});}async function initZombies(_0x46c788){const _0x1bce46=a0_0x23a865;try{const _0x8e82a5=['analysis.history_debug_00',_0x1bce46(0x213)];for(const _0x2de20d of _0x8e82a5){try{const _0x260c83=await _0x46c788[_0x1bce46(0x2f2)](_0x2de20d);if(_0x260c83)await _0x46c788[_0x1bce46(0x31a)](_0x2de20d);}catch(_0x273f69){}}}catch(_0x4840a6){}}async function checkLicense(_0x15117e){return!![];}async function initHistory(_0x4eaf12){const _0x8a5c8f=a0_0x23a865;try{const _0x2fdde9=await _0x4eaf12[_0x8a5c8f(0x210)](_0x8a5c8f(0x1b7));_0x2fdde9&&_0x2fdde9['val']&&(_0x4eaf12[_0x8a5c8f(0x1c2)]=JSON[_0x8a5c8f(0x1ec)](_0x2fdde9['val']['toString']()));}catch(_0x1c9002){_0x4eaf12[_0x8a5c8f(0x1c2)]=[];}try{const _0x2d5464=await _0x4eaf12[_0x8a5c8f(0x210)](_0x8a5c8f(0x282));if(_0x2d5464&&_0x2d5464[_0x8a5c8f(0x204)])_0x4eaf12[_0x8a5c8f(0x230)]=JSON[_0x8a5c8f(0x1ec)](_0x2d5464[_0x8a5c8f(0x204)][_0x8a5c8f(0x2af)]());}catch(_0x58961f){_0x4eaf12[_0x8a5c8f(0x230)]=[];}if(_0x4eaf12['eventHistory']&&_0x4eaf12[_0x8a5c8f(0x1c2)][_0x8a5c8f(0x195)]>0x0){_0x4eaf12['log']['info'](_0x8a5c8f(0x33a));for(let _0x23921f=_0x4eaf12[_0x8a5c8f(0x1c2)][_0x8a5c8f(0x195)]-0x1;_0x23921f>=0x0;_0x23921f--){const _0x4cb3e5=_0x4eaf12[_0x8a5c8f(0x1c2)][_0x23921f];if(_0x4cb3e5&&_0x4cb3e5['id']!==undefined&&_0x4cb3e5[_0x8a5c8f(0x1f3)]!==undefined)_0x4eaf12[_0x8a5c8f(0x2cd)][_0x4cb3e5['id']]=_0x4cb3e5[_0x8a5c8f(0x1f3)];}}}async function initSystemConfig(_0x2aed65){const _0x452f1e=a0_0x23a865;try{const _0x14b8db=await _0x2aed65[_0x452f1e(0x258)](_0x452f1e(0x2b4));if(_0x14b8db&&_0x14b8db['common'])_0x2aed65[_0x452f1e(0x26a)]={'latitude':_0x14b8db[_0x452f1e(0x24f)][_0x452f1e(0x292)]||0x0,'longitude':_0x14b8db[_0x452f1e(0x24f)][_0x452f1e(0x19b)]||0x0,'city':_0x14b8db[_0x452f1e(0x24f)]['city']||''};}catch(_0x1ff643){}}function a0_0x5cdb(){const _0x295fa4=['boolean','scanDevices','âš ï¸\x20Python\x20VENV\x20or\x20PIP\x20missing.\x20Installing...','System\x20Mode','bin','log','[LOG]','rawEventLog','system','Sec-Training\x20started...','PONG','val','ltmLtbWindowDays','fenster','Trend','Wetterdaten\x20deaktiviert.','devices','split','details','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','splice','some','isPresent','getStateAsync','outdoorSensorId','accuweather','events.history_debug_00','Description','window','ltmStbWindowDays','lastAlertState','apiKey','sendToAsync','Target\x20ID','Regel\x20erkannt:\x20','âœ…\x20Alles\x20OK\x20(Reset)','System','getTime','heating','ENERGY_TRAIN_RESULT','LTM.baselineStatus','TRAINING_COMPLETE','Permission\x20denied','indexOf','8RBXtBZ','analysis.training.triggerTopology','text','analysisInterval','channel','analysis.energy','subscribeStates','dailyDigests','geminiApiKey','enum','python_service','analysisHistory','filter','.forecast.current.state','dependencyInstallInProgress','analysis.automation.targetId','setForeignStateAsync','threshold','getForeignStateAsync','COGNI_CONFIRM_OK','@google/generative-ai','ready','unshift','kontakt','message','startsWith','TREND_RESULT','testApiKey','Build\x20Topology','isProVersion','Heating\x20Score','Creating\x20new\x20VENV...','LTM.driftAnalysis.baselineDrift','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','analysis.health.gaitSpeed','temperatur','useWeather','1761160GyhRpo','bind','modeResetJob','\x22\x20-c\x20\x22import\x20tensorflow;\x20print(\x27libs_ok\x27)\x22','json','common','LTM.triggerDailyDigest','notifyTelegramInstance','analysis.training.triggerHealth','Activity\x20Summary','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','(((.+)+)+)+$','\x20=\x20','\x20new\x20patterns.','getForeignObjectAsync','analysis.energy.forecast','LTM.rawEventLog','Security\x20Monitor','analysis.alertReason','ðŸ§ \x20Triggering\x20Security\x20Training...','Briefing\x20Error:\x20','main','stdout','pip','EACCES','ANALYZE_GAIT','genAI','logDuplicates','licenseKey','analysis.health.lastCheck','info','apply','systemConfig','AI\x20Training','Kein\x20API\x20Key.','warn','Who\x20is\x20present?','generateContent','analysis.training.triggerComfort','LTM.dailyDigests','Keine\x20Wetterdaten\x20verfÃ¼gbar.','description','LTM.driftAnalysis.driftDetails','version','analysis.training.status','.NextHours.Location_1.Day_1.current.temp_value','â™»ï¸\x20Found\x20broken\x20VENV\x20(no\x20pip).\x20Deleting\x20and\x20recreating...','\x20Tage)','1122116QfJeAD','BUTLER\x20Execution\x20Error:\x20','Event\x20History','setObjectNotExistsAsync','name','ðŸš¨\x20EMERGENCY','values','Missing\x20data','analysis.analysisHistory','toLowerCase','location','Train\x20Energy','analysis.health.isAnomaly','âŒ\x20VENV\x20CREATION\x20FAILED:\x20','LTM.trainingData.thermodynamics','getForeignObjectsAsync','kill','Delete\x20failed:\x20','tÃ¼r','power','state','inactivityThresholdHours','service.py','Last\x20Check','latitude','exitGraceTimer','enum.rooms.*','openweathermap','switch','systemUUID','substring','1624959hzhjkV','requirements.txt','getGenerativeModel','Target\x20Value','presenceDevices','\x20->\x20','analysis.health','Temperature\x20Forecast','@iobroker/adapter-core','node-schedule','debug','pop','communicate.request','.\x20(Is\x20\x27python3-venv\x27\x20installed?\x20\x27sudo\x20apt\x20install\x20python3-venv\x27)','HEALTH_TRAIN_RESULT','slice','testContext','geminiModel','number','Gemini\x20AI\x20initialized.','activityLevel','indicator','toString','map','extendObjectAsync','cancel','analysis.triggerBriefing','system.config','lampe','type','write','ðŸ\x20Python\x20Pong','targetValue','notifyPushoverEnabled','getMinutes','floor','rule','useCalendar','.venv','Alert\x20Status','getHours','Activity-Level','brightness','isExit','timestamp','Train\x20Comfort','find','analysis.energy.heatingScore','diagnosis','level','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','shift','sensorLastValues','Topology\x20Error:\x20','party','analysis.automation.targetValue','Failed:\x20','LTM','string','Trigger\x20Analysis','python.exe','Trend\x20Value','SECURITY_RESULT','dismissAutomation','analysis.health.todayVector','ðŸ“ž\x20RÃœCKRUF\x20BITTE!\x20Der\x20Bewohner\x20hat\x20den\x20RÃ¼ckruf-Button\x20gedrÃ¼ckt.','LTM.processingStatus','temperature','enum.functions.*','Deaktiviert\x20(Pro-Feature)','cogni-living','analysis.trigger','Training\x20Error:\x20','date','Sequences','notifyEmailRecipient','analysis.security.lastCheck','system.presenceWho','644016DUZPCW','forEach','5517570KuRSNl','weatherInstance','Error\x20launching\x20Python:\x20','ðŸŒ…\x20Morning\x20Briefing:\x0a','getOverviewData','COMFORT_RESULT','toISOString','toLocaleTimeString','3324864vskhTb','getObjectAsync','onUnload','members','command','analysis.security','âœ…\x20INSTALL\x20SUCCESS.','error','targetId','unknown',')\x20-\x20SAFE\x20BOOT','platform','analysisTimer','instance','[RESULT]','briefingJob','system.isPresent','OK:\x20','Fokus\x20auf\x20Familienroutinen.','weatherunderground','Keine\x20Termine.','simulateButler','analysis.automation.triggerAction','triggerDailyDigest','payload','getFullYear','motion','.Current.Temperature','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','LTM.trainingData.sequences','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','Â°C,\x20','0\x203\x20*\x20*\x20*','indicator.alarm','sendTo','Topology\x20Matrix','light','selectedFunctionIds','submitFeedback','toFixed','analysis.isAlert','delObjectAsync','schalter','insulation','LTM.driftAnalysis','Installing\x20pip\x20packages...\x20(Caching\x20enabled)','Last\x20raw\x20event','config','endsWith','unload','siren','role','subscribeForeignStatesAsync','status','getLtmData','analysis.training.triggerSecurity','GUEST','[RECORDER]\x20Error:\x20','namespace','421477OfAyhJ','detected','ANALYZE_TREND','doors','analysis.energy.insulationScore','analysis.health.trendValue','child_process','models/gemini-flash-latest','Daily\x20Digests','analysis.security.topologyMatrix','Gemini\x20Init\x20Error:\x20','GAIT_RESULT','getCalendarNames','pythonProcess','Restoring\x20sensor\x20cache...','fill','Gait\x20Speed\x20Trend','expire','onMessage','ðŸ\x20Checking\x20Python\x20environment...','application/json','User\x20dismissed\x20automation\x20proposal.','isGracePeriodActive','exitTimer','events.lastEvent','guest','retry','WiFi\x20Presence\x20detected.','analysis.automation.description','analysis.security.currentThreshold','âŒ\x20INSTALL\x20FAILED:\x20','HEALTH_RESULT','rmSync','cogni-living\x20adapter\x20starting\x20(v','ðŸ”\x20Scan\x20finished.\x20Found\x20','onReady','includes','âœ…\x20Alarm\x20quittiert.\x20System\x20normal.','Trigger\x20Action','triggerBriefing','analysis.training','getDate','PRIORITÃ„T:\x20Gesundheit/AAL.','analysis.automation.detectedPatterns','analysis.security.lastScore','length','minDaysForBaseline','calendarInstance','Trigger\x20Briefing','object','from','longitude','notifyTelegramEnabled','Analysiere\x20ausgewogen.','exports','Could\x20not\x20load\x20rooms:\x20','join','occupancy','Kein\x20API\x20Key!','.forecast.current.temp','UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20','path','trim','driftAnalysisTimer','.forecast.current.temperature','notifyPushoverInstance','N/A','notifyPushoverRecipient','autoApply','change_percent','VACATION','PRIORITÃ„T:\x20Sicherheit.','Thermodynamics','door','existsSync','stringify','setStateAsync','analysis.automation.patternDetected','send','events.history','button','Pattern\x20Detected','Health\x20Analysis','thermostat','Train\x20Health','No\x20instance','Anomaly\x20Score','add','push','reason','eventHistory','Scripts','contact','search','Unknown','callback','ðŸ“\x20Feedback\x20received:\x20','TRAIN_ENERGY','COGNI_REQUEST_CALL','currentSystemMode','keys','Alert\x20Reason','analysis.automation.autoApply','âœ…\x20HEALTH\x20TRAINED.','round','setState','Train\x20Security','Current\x20Threshold','has','âš ï¸\x20SECURITY\x20ALARM:\x20','analysis.activitySummary','ðŸ”\x20Scanning\x20for\x20devices\x20(Smart\x20Strategy)...','system.mode','pip.exe','notifyTelegramRecipient','python3','licht','lights','daswetter','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','confidence','success','getEnums','BUILD_TOPOLOGY','temp','Adapter','dimmer','now','KI-Modell\x20nicht\x20initialisiert','âœ…\x20Fast-Boot:\x20Environment\x20healthy.\x20Skipping\x20installation.','bewegung','stdin','parse','Detected\x20Patterns','notifyEmailInstance','NORMAL','ltmJob','klima','ack','value','PREDICT_ENERGY','Fokus\x20auf\x20Komfort.','response','ðŸ‘‰\x20LÃ–SUNG\x20(SSH):\x20sudo\x20chown\x20-R\x20iobroker:iobroker\x20','TRAIN_SECURITY'];a0_0x5cdb=function(){return _0x295fa4;};return a0_0x5cdb();}async function createAllObjects(_0x56a2ce){const _0x9be2ac=a0_0x23a865;await _0x56a2ce[_0x9be2ac(0x2b1)](_0x9be2ac(0x201),{'type':_0x9be2ac(0x229),'common':{'name':_0x9be2ac(0x21d)},'native':{}}),await _0x56a2ce[_0x9be2ac(0x2b1)](SYSTEM_DP_MODE,{'type':'state','common':{'name':_0x9be2ac(0x1fc),'type':_0x9be2ac(0x2d3),'role':_0x9be2ac(0x28e),'read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL']},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x2e6),{'type':'state','common':{'name':_0x9be2ac(0x26e),'type':'string','role':_0x9be2ac(0x227),'read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x180),{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x31f),'type':'string','role':_0x9be2ac(0x24e),'read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x1b7),{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x27c),'type':_0x9be2ac(0x2d3),'role':_0x9be2ac(0x24e),'read':!![],'write':![]},'native':{}}),await _0x56a2ce['extendObjectAsync'](_0x9be2ac(0x190),{'type':_0x9be2ac(0x229),'common':{'name':_0x9be2ac(0x26b)},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x328),{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x1d2),'type':_0x9be2ac(0x1f9),'role':_0x9be2ac(0x1b8),'read':!![],'write':!![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x252),{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x1bc),'type':_0x9be2ac(0x1f9),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)]('analysis.training.triggerEnergy',{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x285),'type':_0x9be2ac(0x1f9),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x270),{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x2c6),'type':_0x9be2ac(0x1f9),'role':_0x9be2ac(0x1b8),'read':!![],'write':!![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x226),{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x241),'type':_0x9be2ac(0x1f9),'role':_0x9be2ac(0x1b8),'read':!![],'write':!![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x276),{'type':_0x9be2ac(0x28e),'common':{'name':'Training\x20Status','type':_0x9be2ac(0x2d3),'role':'text','read':!![],'write':![]},'native':{}}),await _0x56a2ce['extendObjectAsync'](_0x9be2ac(0x2f6),{'type':_0x9be2ac(0x229),'common':{'name':_0x9be2ac(0x25b)},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x194),{'type':'state','common':{'name':_0x9be2ac(0x1be),'type':_0x9be2ac(0x2ab),'role':_0x9be2ac(0x1f3),'read':!![],'write':![]},'native':{}}),await _0x56a2ce['setObjectNotExistsAsync'](_0x9be2ac(0x185),{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x1d3),'type':_0x9be2ac(0x2ab),'role':_0x9be2ac(0x1f3),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x2e5),{'type':'state','common':{'name':_0x9be2ac(0x291),'type':_0x9be2ac(0x2d3),'role':_0x9be2ac(0x2e2),'read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x335),{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x314),'type':_0x9be2ac(0x2d3),'role':_0x9be2ac(0x24e),'read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x2b1)](_0x9be2ac(0x29f),{'type':_0x9be2ac(0x229),'common':{'name':_0x9be2ac(0x1ba)},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x267),{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x291),'type':'string','role':_0x9be2ac(0x2e2),'read':!![],'write':![]},'native':{}}),await _0x56a2ce['setObjectNotExistsAsync'](_0x9be2ac(0x286),{'type':_0x9be2ac(0x28e),'common':{'name':'Anomaly\x20Detected','type':_0x9be2ac(0x1f9),'role':'indicator','read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)]('analysis.health.trendDiagnosis',{'type':'state','common':{'name':_0x9be2ac(0x207),'type':'string','role':_0x9be2ac(0x227),'read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)]('analysis.health.trendValue',{'type':'state','common':{'name':_0x9be2ac(0x2d6),'type':'number','role':_0x9be2ac(0x1f3),'read':!![],'write':![]},'native':{}}),await _0x56a2ce['setObjectNotExistsAsync'](_0x9be2ac(0x2d9),{'type':_0x9be2ac(0x28e),'common':{'name':'Today\x20Vector\x20(15m)','type':_0x9be2ac(0x2d3),'role':_0x9be2ac(0x24e),'read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)]('analysis.health.gaitSpeed',{'type':'state','common':{'name':_0x9be2ac(0x33c),'type':_0x9be2ac(0x2ab),'role':'value','read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x2b1)](_0x9be2ac(0x22a),{'type':_0x9be2ac(0x229),'common':{'name':'Energy\x20Intelligence'},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x330),{'type':_0x9be2ac(0x28e),'common':{'name':'Insulation\x20Score','type':_0x9be2ac(0x2d3),'role':_0x9be2ac(0x227),'read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x2c8),{'type':'state','common':{'name':_0x9be2ac(0x243),'type':_0x9be2ac(0x2d3),'role':_0x9be2ac(0x227),'read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)]('analysis.energy.forecast',{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x2a0),'type':'string','role':_0x9be2ac(0x24e),'read':!![],'write':![]},'native':{}}),await _0x56a2ce['extendObjectAsync'](_0x9be2ac(0x2d2),{'type':_0x9be2ac(0x229),'common':{'name':_0x9be2ac(0x2d2)},'native':{}}),await _0x56a2ce[_0x9be2ac(0x2b1)](LTM_DP_RAW_LOG,{'type':_0x9be2ac(0x28e),'common':{'name':'Raw\x20Log','type':_0x9be2ac(0x2d3),'role':'json','read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x2b1)](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':_0x9be2ac(0x334),'type':_0x9be2ac(0x2d3),'role':_0x9be2ac(0x24e),'read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x30e),{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x2e3),'type':_0x9be2ac(0x2d3),'role':_0x9be2ac(0x24e),'read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x288),{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x1b0),'type':_0x9be2ac(0x2d3),'role':_0x9be2ac(0x24e),'read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x2e0),{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x2d4),'type':_0x9be2ac(0x1f9),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x2b3),{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x198),'type':_0x9be2ac(0x1f9),'role':_0x9be2ac(0x1b8),'read':!![],'write':!![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x319),{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x2c0),'type':_0x9be2ac(0x1f9),'role':_0x9be2ac(0x312),'read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)]('analysis.alertReason',{'type':'state','common':{'name':_0x9be2ac(0x1cd),'type':'string','role':'text.alarm','read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x1d6),{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x253),'type':_0x9be2ac(0x2d3),'role':_0x9be2ac(0x227),'read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)]('analysis.automation.patternDetected',{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x1b9),'type':'boolean','role':_0x9be2ac(0x2ae),'read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)]('analysis.automation.description',{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x214),'type':_0x9be2ac(0x2d3),'role':_0x9be2ac(0x227),'read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x193),{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x1ed),'type':_0x9be2ac(0x2d3),'role':_0x9be2ac(0x24e),'read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x234),{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x21a),'type':_0x9be2ac(0x2d3),'role':_0x9be2ac(0x227),'read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)]('analysis.automation.targetValue',{'type':'state','common':{'name':_0x9be2ac(0x29c),'type':_0x9be2ac(0x2d3),'role':_0x9be2ac(0x227),'read':!![],'write':![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)](_0x9be2ac(0x1ce),{'type':_0x9be2ac(0x28e),'common':{'name':'Auto\x20Apply','type':_0x9be2ac(0x1f9),'role':_0x9be2ac(0x296),'read':!![],'write':!![]},'native':{}}),await _0x56a2ce[_0x9be2ac(0x27d)]('analysis.automation.triggerAction',{'type':_0x9be2ac(0x28e),'common':{'name':_0x9be2ac(0x18e),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x23d46c){const _0x2cfe89=a0_0x23a865;try{const _0x137e39=await _0x23d46c['getStateAsync'](SYSTEM_DP_MODE);_0x137e39&&_0x137e39[_0x2cfe89(0x204)]&&Object[_0x2cfe89(0x280)](SYSTEM_MODES)['includes'](_0x137e39[_0x2cfe89(0x204)])?_0x23d46c['currentSystemMode']=_0x137e39[_0x2cfe89(0x204)]:(_0x23d46c[_0x2cfe89(0x1cb)]=SYSTEM_MODES['NORMAL'],await _0x23d46c[_0x2cfe89(0x1b4)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0xfac7a8){_0x23d46c['currentSystemMode']=SYSTEM_MODES['NORMAL'];}}async function loadRawEventLog(_0x480b99){const _0x23bee7=a0_0x23a865;try{const _0x164f9d=await _0x480b99['getStateAsync'](LTM_DP_RAW_LOG);if(_0x164f9d&&_0x164f9d[_0x23bee7(0x204)])_0x480b99['rawEventLog']=JSON[_0x23bee7(0x1ec)](_0x164f9d['val']);}catch(_0xe74dec){_0x480b99[_0x23bee7(0x200)]=[];}}async function saveRawEventLog(_0x5527aa){const _0x204a96=a0_0x23a865;if(_0x5527aa['rawEventLog'][_0x204a96(0x195)]>RAW_LOG_MAX_SIZE)_0x5527aa['rawEventLog']['splice'](0x0,_0x5527aa[_0x204a96(0x200)][_0x204a96(0x195)]-RAW_LOG_MAX_SIZE);await _0x5527aa[_0x204a96(0x1b4)](LTM_DP_RAW_LOG,{'val':JSON['stringify'](_0x5527aa['rawEventLog']),'ack':!![]});}async function loadDailyDigests(_0x4edb87){const _0x134ba8=a0_0x23a865;try{const _0x3d0b41=await _0x4edb87['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x3d0b41&&_0x3d0b41[_0x134ba8(0x204)])_0x4edb87[_0x134ba8(0x22c)]=JSON[_0x134ba8(0x1ec)](_0x3d0b41[_0x134ba8(0x204)]);}catch(_0x199992){_0x4edb87[_0x134ba8(0x22c)]=[];}await updateBaselineStatus(_0x4edb87);}async function saveDailyDigests(_0x5add89,_0x46653d=!![]){const _0x3e9fa4=a0_0x23a865,_0x2779f7=_0x5add89['config']['ltmLtbWindowDays']||0x3c;_0x5add89[_0x3e9fa4(0x22c)][_0x3e9fa4(0x195)]>_0x2779f7&&_0x5add89[_0x3e9fa4(0x22c)][_0x3e9fa4(0x20d)](0x0,_0x5add89[_0x3e9fa4(0x22c)][_0x3e9fa4(0x195)]-_0x2779f7);await _0x5add89[_0x3e9fa4(0x1b4)](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x3e9fa4(0x1b3)](_0x5add89[_0x3e9fa4(0x22c)]),'ack':!![]});if(_0x46653d)await updateBaselineStatus(_0x5add89);}async function updateAnalysisHistory(_0x2f735e,_0x23544d){const _0x2186d5=a0_0x23a865;_0x2f735e[_0x2186d5(0x230)][_0x2186d5(0x23b)](_0x23544d);if(_0x2f735e[_0x2186d5(0x230)][_0x2186d5(0x195)]>HISTORY_MAX_SIZE)_0x2f735e[_0x2186d5(0x230)][_0x2186d5(0x2a4)]();await _0x2f735e[_0x2186d5(0x1b4)](_0x2186d5(0x282),{'val':JSON[_0x2186d5(0x1b3)](_0x2f735e['analysisHistory']),'ack':!![]});}async function updateBaselineStatus(_0x235baf){const _0x92a684=a0_0x23a865;if(!_0x235baf[_0x92a684(0x242)]){await _0x235baf[_0x92a684(0x1b4)](LTM_DP_BASELINE_STATUS,{'val':_0x92a684(0x2de),'ack':!![]});return;}const _0x4b4dd3=_0x235baf[_0x92a684(0x22c)][_0x92a684(0x195)]>=(_0x235baf[_0x92a684(0x320)][_0x92a684(0x196)]||0x7)?'Aktiv\x20('+_0x235baf[_0x92a684(0x22c)]['length']+_0x92a684(0x279):'Lernphase\x20('+_0x235baf[_0x92a684(0x22c)][_0x92a684(0x195)]+'/'+(_0x235baf[_0x92a684(0x320)][_0x92a684(0x196)]||0x7)+')';await _0x235baf[_0x92a684(0x1b4)](LTM_DP_BASELINE_STATUS,{'val':_0x4b4dd3,'ack':!![]});}async function initSensorSubscriptions(_0x3521c3){const _0x1a3768=a0_0x23a865,_0x439566=_0x3521c3[_0x1a3768(0x320)][_0x1a3768(0x209)];if(_0x439566)for(const _0x29d223 of _0x439566){await _0x3521c3[_0x1a3768(0x325)](_0x29d223['id']);}}async function initPresenceSubscriptions(_0x790ad4){const _0x2f2f39=a0_0x23a865,_0x4a3f90=_0x790ad4[_0x2f2f39(0x320)][_0x2f2f39(0x29d)];if(_0x4a3f90)for(const _0x1d1673 of _0x4a3f90){await _0x790ad4['subscribeForeignStatesAsync'](_0x1d1673);}}async function setupTelegramListener(_0x761f66){const _0x46a350=a0_0x23a865,_0x2b0279=_0x761f66[_0x46a350(0x320)][_0x46a350(0x251)];if(_0x761f66[_0x46a350(0x320)][_0x46a350(0x19c)]&&_0x2b0279)await _0x761f66[_0x46a350(0x325)](_0x2b0279+'.communicate.request');}async function checkWifiPresence(_0x593d64){const _0xd30274=a0_0x23a865;try{const _0x993cd4=_0x593d64[_0xd30274(0x320)][_0xd30274(0x29d)]||[];let _0x2c9272=![];const _0x451484=[];for(const _0x2d23fd of _0x993cd4){try{const _0x514ad1=await _0x593d64['getForeignStateAsync'](_0x2d23fd);_0x514ad1&&(_0x514ad1[_0xd30274(0x204)]===!![]||_0x514ad1[_0xd30274(0x204)]==='online'||_0x514ad1[_0xd30274(0x204)]===0x1)&&(_0x2c9272=!![],_0x451484[_0xd30274(0x1c0)](_0x2d23fd));}catch(_0x1735a0){}}return await _0x593d64[_0xd30274(0x1b4)](_0xd30274(0x2e6),{'val':_0x451484[_0xd30274(0x1a0)](',\x20'),'ack':!![]}),_0x2c9272&&(_0x593d64[_0xd30274(0x17f)]&&(_0x593d64[_0xd30274(0x1fe)][_0xd30274(0x268)](_0xd30274(0x183)),abortExitTimer(_0x593d64)),!_0x593d64[_0xd30274(0x20f)]&&_0x593d64['currentSystemMode']===SYSTEM_MODES[_0xd30274(0x1ef)]&&await setPresence(_0x593d64,!![])),_0x2c9272;}catch(_0x3fa323){return![];}}function startExitTimer(_0x10c347){const _0xdd8bad=a0_0x23a865;abortExitTimer(_0x10c347),_0x10c347[_0xdd8bad(0x17e)]=!![],_0x10c347[_0xdd8bad(0x293)]=setTimeout(()=>{const _0x259738=_0xdd8bad;_0x10c347[_0x259738(0x17e)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x10c347['exitTimer']=setTimeout(()=>{const _0x37e186=_0xdd8bad;setPresence(_0x10c347,![]),_0x10c347[_0x37e186(0x17f)]=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x22045f){const _0x1d089c=a0_0x23a865;if(_0x22045f[_0x1d089c(0x17f)])clearTimeout(_0x22045f[_0x1d089c(0x17f)]);if(_0x22045f[_0x1d089c(0x293)])clearTimeout(_0x22045f[_0x1d089c(0x293)]);_0x22045f['exitTimer']=null,_0x22045f[_0x1d089c(0x293)]=null,_0x22045f[_0x1d089c(0x17e)]=![];}async function setPresence(_0x80d50c,_0x520e29){const _0x55772c=a0_0x23a865;if(_0x80d50c[_0x55772c(0x20f)]===_0x520e29)return;_0x80d50c[_0x55772c(0x20f)]=_0x520e29,await _0x80d50c[_0x55772c(0x1b4)](_0x55772c(0x301),{'val':_0x520e29,'ack':!![]});}async function executeAutomationAction(_0x7dd78e){const _0x14af4f=a0_0x23a865;try{const _0x5a6e5c=await _0x7dd78e[_0x14af4f(0x210)](_0x14af4f(0x234)),_0x55441a=await _0x7dd78e[_0x14af4f(0x210)](_0x14af4f(0x2d0));if(_0x5a6e5c&&_0x5a6e5c[_0x14af4f(0x204)]&&_0x55441a){const _0x281095=_0x5a6e5c[_0x14af4f(0x204)];let _0x3f213a=_0x55441a[_0x14af4f(0x204)];try{_0x3f213a=JSON[_0x14af4f(0x1ec)](_0x3f213a);}catch(_0x2f4e6e){}_0x7dd78e[_0x14af4f(0x1fe)]['info']('ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20'+_0x281095+_0x14af4f(0x256)+_0x3f213a),await _0x7dd78e[_0x14af4f(0x235)](_0x281095,_0x3f213a);}else _0x7dd78e['log'][_0x14af4f(0x26d)](_0x14af4f(0x30f));}catch(_0x3f3222){_0x7dd78e['log']['error'](_0x14af4f(0x27b)+_0x3f3222[_0x14af4f(0x23d)]);}}async function processSensorEvent(_0x3af7af,_0x2960b8,_0x45ba0e,_0x1c1250){const _0x348a70=a0_0x23a865;if(!_0x1c1250)return;const _0x5ea1d7=_0x45ba0e[_0x348a70(0x204)],_0x1ead31=Date[_0x348a70(0x1e7)](),_0x206aa0=_0x3af7af['sensorLastValues'][_0x2960b8];_0x3af7af[_0x348a70(0x2cd)][_0x2960b8]=_0x5ea1d7;if(!_0x1c1250[_0x348a70(0x265)]&&_0x206aa0!=undefined&&_0x206aa0==_0x5ea1d7)return;const _0x59c516=(_0x1c1250[_0x348a70(0x2b6)]||'')[_0x348a70(0x283)](),_0x24efd7=_0x59c516[_0x348a70(0x18c)](_0x348a70(0x2dc))||_0x59c516[_0x348a70(0x18c)](_0x348a70(0x248))||_0x59c516[_0x348a70(0x18c)](_0x348a70(0x1f1))||_0x59c516[_0x348a70(0x18c)]('heizung');_0x3af7af[_0x348a70(0x242)]&&_0x24efd7&&recordThermodynamics(_0x3af7af,_0x2960b8,_0x5ea1d7,_0x1c1250[_0x348a70(0x284)]);const _0x407f5e={'timestamp':_0x1ead31,'id':_0x2960b8,'name':_0x1c1250['name'],'type':_0x1c1250[_0x348a70(0x2b6)],'location':_0x1c1250[_0x348a70(0x284)],'value':_0x5ea1d7};_0x3af7af[_0x348a70(0x1c2)][_0x348a70(0x23b)](_0x407f5e);if(_0x3af7af[_0x348a70(0x1c2)][_0x348a70(0x195)]>HISTORY_MAX_SIZE)_0x3af7af['eventHistory'][_0x348a70(0x2a4)]();await _0x3af7af[_0x348a70(0x1b4)](_0x348a70(0x180),{'val':JSON[_0x348a70(0x1b3)](_0x407f5e),'ack':!![]}),await _0x3af7af[_0x348a70(0x1b4)]('events.history',{'val':JSON[_0x348a70(0x1b3)](_0x3af7af[_0x348a70(0x1c2)]),'ack':!![]});_0x3af7af[_0x348a70(0x242)]&&(_0x3af7af['rawEventLog'][_0x348a70(0x1c0)](_0x407f5e),await saveRawEventLog(_0x3af7af),recordSequence(_0x3af7af,_0x407f5e));if(_0x1c1250[_0x348a70(0x2c4)]&&_0x5ea1d7===!![]){if(_0x3af7af[_0x348a70(0x20f)]&&!_0x3af7af['isGracePeriodActive'])startExitTimer(_0x3af7af);else{if(!_0x3af7af[_0x348a70(0x20f)])setPresence(_0x3af7af,!![]);}}else{if(_0x1c1250['type']===_0x348a70(0x30b)&&_0x5ea1d7===!![]){if(_0x3af7af[_0x348a70(0x17f)])abortExitTimer(_0x3af7af);if(!_0x3af7af['isPresent']&&_0x3af7af[_0x348a70(0x1cb)]===SYSTEM_MODES[_0x348a70(0x1ef)])setPresence(_0x3af7af,!![]);}}}async function recordThermodynamics(_0x4ae459,_0x637493,_0x11a627,_0x4d86b7){const _0x58eab7=a0_0x23a865,_0x7fecd7=await getOutsideTemperatureNumeric(_0x4ae459),_0x39fd22=await _0x4ae459[_0x58eab7(0x210)](_0x58eab7(0x288));let _0x249a0e=[];if(_0x39fd22&&_0x39fd22[_0x58eab7(0x204)])try{_0x249a0e=JSON[_0x58eab7(0x1ec)](_0x39fd22[_0x58eab7(0x204)]);}catch(_0x216c61){}_0x249a0e[_0x58eab7(0x1c0)]({'ts':Date[_0x58eab7(0x1e7)](),'room':_0x4d86b7||_0x58eab7(0x1c6),'t_in':_0x11a627,'t_out':_0x7fecd7});if(_0x249a0e[_0x58eab7(0x195)]>THERMO_LOG_SIZE)_0x249a0e[_0x58eab7(0x2cc)]();await _0x4ae459[_0x58eab7(0x1b4)]('LTM.trainingData.thermodynamics',{'val':JSON[_0x58eab7(0x1b3)](_0x249a0e),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x5a575d){const _0x1d687e=a0_0x23a865;if(_0x5a575d[_0x1d687e(0x320)][_0x1d687e(0x211)])try{const _0x39fba6=await _0x5a575d['getForeignStateAsync'](_0x5a575d['config'][_0x1d687e(0x211)]);if(_0x39fba6&&_0x39fba6[_0x1d687e(0x204)]!==undefined&&_0x39fba6[_0x1d687e(0x204)]!==null)return parseFloat(_0x39fba6[_0x1d687e(0x204)]);}catch(_0x31500c){}const _0xc88b58=_0x5a575d[_0x1d687e(0x320)][_0x1d687e(0x2ea)];if(!_0x5a575d['config'][_0x1d687e(0x249)]||!_0xc88b58)return null;try{let _0x1eaf46='';if(_0xc88b58[_0x1d687e(0x18c)](_0x1d687e(0x212)))_0x1eaf46=_0xc88b58+_0x1d687e(0x30c);else{if(_0xc88b58[_0x1d687e(0x18c)](_0x1d687e(0x1de)))_0x1eaf46=_0xc88b58+_0x1d687e(0x277);else{if(_0xc88b58[_0x1d687e(0x18c)](_0x1d687e(0x295)))_0x1eaf46=_0xc88b58+_0x1d687e(0x1a8);else{if(_0xc88b58[_0x1d687e(0x18c)](_0x1d687e(0x304)))_0x1eaf46=_0xc88b58+_0x1d687e(0x1a3);}}}if(_0x1eaf46){const _0xed9576=await _0x5a575d[_0x1d687e(0x237)](_0x1eaf46);if(_0xed9576&&_0xed9576['val']!==undefined&&_0xed9576['val']!==null)return parseFloat(_0xed9576[_0x1d687e(0x204)]);}}catch(_0x44cd09){}return null;}async function recordSequence(_0x172c49,_0x4b0a19){const _0x446c66=a0_0x23a865,_0x767ba3=(_0x4b0a19[_0x446c66(0x2b6)]||'')['toLowerCase'](),_0x1a5813=['motion','bewegung','prÃ¤senz','presence',_0x446c66(0x1a1),_0x446c66(0x1b1),'tÃ¼r','window',_0x446c66(0x206),_0x446c66(0x1c4),_0x446c66(0x23c),_0x446c66(0x315),'licht',_0x446c66(0x296),_0x446c66(0x31b),_0x446c66(0x1e6),_0x446c66(0x2b5)];if(!_0x1a5813[_0x446c66(0x20e)](_0x337c56=>_0x767ba3[_0x446c66(0x18c)](_0x337c56)))return;if(!_0x4b0a19[_0x446c66(0x1f3)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x446c66(0x1c0)]({'loc':_0x4b0a19[_0x446c66(0x284)]||_0x446c66(0x1c6),'id':_0x4b0a19['id'],'ts':Date[_0x446c66(0x1e7)]()}),sequenceTimer=setTimeout(async()=>{const _0x4e8fff=_0x446c66;if(activeSequence[_0x4e8fff(0x195)]>0x1)await saveCompletedSequence(_0x172c49);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x12bcb6){const _0x1c6687=a0_0x23a865;try{const _0x114add=await _0x12bcb6['getStateAsync'](_0x1c6687(0x30e));let _0x239439=[];if(_0x114add&&_0x114add[_0x1c6687(0x204)])try{_0x239439=JSON[_0x1c6687(0x1ec)](_0x114add[_0x1c6687(0x204)]);}catch(_0x324ecc){}const _0x9787c9=activeSequence[0x0]['ts'],_0x3019c9=activeSequence[_0x1c6687(0x2b0)](_0xc9365b=>({'loc':_0xc9365b['loc'],'t_delta':Math[_0x1c6687(0x1d0)]((_0xc9365b['ts']-_0x9787c9)/0x3e8)})),_0x5d349d={'timestamp':new Date(_0x9787c9)['toISOString'](),'steps':_0x3019c9,'duration':Math['round']((activeSequence[activeSequence[_0x1c6687(0x195)]-0x1]['ts']-_0x9787c9)/0x3e8),'daytime':new Date(_0x9787c9)[_0x1c6687(0x2c1)]()};_0x239439[_0x1c6687(0x1c0)](_0x5d349d);if(_0x239439[_0x1c6687(0x195)]>MAX_TRAINING_SET_SIZE)_0x239439[_0x1c6687(0x2cc)]();await _0x12bcb6['setStateAsync'](_0x1c6687(0x30e),{'val':JSON['stringify'](_0x239439),'ack':!![]}),runSecurityCheck(_0x12bcb6,_0x5d349d);}catch(_0x5b5468){_0x12bcb6['log'][_0x1c6687(0x2f8)](_0x1c6687(0x32a)+_0x5b5468[_0x1c6687(0x23d)]);}}function runSecurityCheck(_0x464d57,_0x5379c5){const _0x3a650b=a0_0x23a865;if(!_0x464d57[_0x3a650b(0x242)])return;sendToPython(_0x464d57,'ANALYZE_SEQUENCE',{'sequence':_0x5379c5});}function sendToPython(_0x2da994,_0x1a009e,_0x107832={}){const _0x99c119=a0_0x23a865;if(!_0x2da994[_0x99c119(0x339)]||!_0x2da994[_0x99c119(0x339)][_0x99c119(0x1eb)]['writable'])return;const _0x2dde9a=JSON[_0x99c119(0x1b3)]({'command':_0x1a009e,..._0x107832});try{_0x2da994[_0x99c119(0x339)]['stdin'][_0x99c119(0x2b7)](_0x2dde9a+'\x0a');}catch(_0x3ceb68){}}function startPythonService(_0x5d0dd4){const _0x32f659=a0_0x23a865;let _0x247907=_0x32f659(0x1db);if(fs[_0x32f659(0x1b2)](PYTHON_EXE))_0x247907=PYTHON_EXE;try{const _0x24a699=path[_0x32f659(0x1a0)](__dirname,'python_service',_0x32f659(0x290));_0x5d0dd4[_0x32f659(0x339)]=spawn(_0x247907,[_0x24a699]),_0x5d0dd4['pythonProcess'][_0x32f659(0x260)]['on']('data',_0x49dc6d=>{const _0x1da54d=_0x32f659,_0x1c0b34=_0x49dc6d[_0x1da54d(0x2af)]()[_0x1da54d(0x20a)]('\x0a');_0x1c0b34['forEach'](_0x484db2=>{const _0x1d061f=_0x1da54d,_0x5e2b5c=_0x484db2[_0x1d061f(0x1a6)]();if(!_0x5e2b5c)return;if(_0x5e2b5c['startsWith'](_0x1d061f(0x1ff)))_0x5d0dd4[_0x1d061f(0x1fe)][_0x1d061f(0x2a3)]('[PYTHON]\x20'+_0x5e2b5c[_0x1d061f(0x298)](0x5)[_0x1d061f(0x1a6)]());else{if(_0x5e2b5c[_0x1d061f(0x23e)](_0x1d061f(0x2ff)))try{const _0x3fe9ad=JSON[_0x1d061f(0x1ec)](_0x5e2b5c[_0x1d061f(0x298)](0x8)['trim']());handlePythonResult(_0x5d0dd4,_0x3fe9ad);}catch(_0x524657){}}});}),_0x5d0dd4['pythonProcess']['on']('close',_0x1f8fc7=>{_0x5d0dd4['pythonProcess']=null;});}catch(_0x2f253a){_0x5d0dd4[_0x32f659(0x1fe)]['error'](_0x32f659(0x2eb)+_0x2f253a['message']);}}function stopPythonService(_0x253d53){const _0x1ae0d6=a0_0x23a865;if(_0x253d53[_0x1ae0d6(0x339)]){try{_0x253d53[_0x1ae0d6(0x339)][_0x1ae0d6(0x28a)]();}catch(_0x28b4ea){}_0x253d53['pythonProcess']=null;}}function handlePythonResult(_0x72ae0c,_0x2404b0){const _0x3836c5=a0_0x23a865;if(_0x2404b0[_0x3836c5(0x2b6)]===_0x3836c5(0x203))_0x72ae0c[_0x3836c5(0x1fe)][_0x3836c5(0x2a3)](_0x3836c5(0x2b8));else{if(_0x2404b0[_0x3836c5(0x2b6)]===_0x3836c5(0x2d7)){const {anomaly_score:_0x4cfd14,is_anomaly:_0x136c79,threshold:_0x203676,explanation:_0x6f97b1}=_0x2404b0['payload'];_0x72ae0c[_0x3836c5(0x1fe)][_0x3836c5(0x268)](_0x3836c5(0x20c)+_0x4cfd14['toFixed'](0x5)+_0x3836c5(0x29e)+(_0x136c79?'ANOMALY':'OK')),_0x72ae0c[_0x3836c5(0x1b4)]('analysis.security.lastScore',{'val':_0x4cfd14,'ack':!![]}),_0x72ae0c[_0x3836c5(0x1b4)](_0x3836c5(0x2e5),{'val':new Date()[_0x3836c5(0x2ef)](),'ack':!![]});if(_0x203676)_0x72ae0c['setStateAsync'](_0x3836c5(0x185),{'val':_0x203676,'ack':!![]});if(_0x136c79){let _0x434b72=_0x3836c5(0x1a4)+_0x4cfd14[_0x3836c5(0x318)](0x4)+')';if(_0x6f97b1&&_0x6f97b1!==_0x3836c5(0x1c6))_0x434b72+='\x0aGrund:\x20'+_0x6f97b1;_0x72ae0c[_0x3836c5(0x1b4)](_0x3836c5(0x319),{'val':!![],'ack':!![]}),_0x72ae0c[_0x3836c5(0x1b4)]('analysis.alertReason',{'val':_0x434b72,'ack':!![]}),sendNotification(_0x72ae0c,_0x3836c5(0x1d5)+_0x434b72,![],!![]);}}else{if(_0x2404b0[_0x3836c5(0x2b6)]===_0x3836c5(0x222)){const _0x3783c0=_0x2404b0[_0x3836c5(0x309)][_0x3836c5(0x20b)]||'',_0x13b985=_0x2404b0[_0x3836c5(0x309)][_0x3836c5(0x236)],_0x52aace=_0x2404b0[_0x3836c5(0x309)][_0x3836c5(0x1e1)]?'Success:\x20'+new Date()[_0x3836c5(0x2f0)]()+'\x20('+_0x3783c0+')':_0x3836c5(0x2d1)+_0x2404b0[_0x3836c5(0x309)][_0x3836c5(0x1c1)];_0x72ae0c[_0x3836c5(0x1b4)](_0x3836c5(0x276),{'val':_0x52aace,'ack':!![]});if(_0x2404b0[_0x3836c5(0x309)][_0x3836c5(0x1e1)]&&_0x13b985)_0x72ae0c['setStateAsync'](_0x3836c5(0x185),{'val':_0x13b985,'ack':!![]});}else{if(_0x2404b0[_0x3836c5(0x2b6)]===_0x3836c5(0x2ee)){const {patterns:_0xd208b9}=_0x2404b0[_0x3836c5(0x309)];if(_0xd208b9&&_0xd208b9['length']>0x0){_0x72ae0c[_0x3836c5(0x1fe)]['info'](_0x3836c5(0x2cb)+_0xd208b9[_0x3836c5(0x195)]+_0x3836c5(0x257)),_0x72ae0c[_0x3836c5(0x1b4)](_0x3836c5(0x193),{'val':JSON[_0x3836c5(0x1b3)](_0xd208b9),'ack':!![]});const _0x3abb0e=_0xd208b9[0x0],_0x2bea6e=_0x3836c5(0x21b)+_0x3abb0e[_0x3836c5(0x2bd)]+'\x20('+(_0x3abb0e[_0x3836c5(0x1e0)]*0x64)[_0x3836c5(0x318)](0x0)+'%)';_0x72ae0c['setStateAsync']('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x72ae0c[_0x3836c5(0x1b4)]('analysis.automation.description',{'val':_0x2bea6e,'ack':!![]});}else _0x72ae0c[_0x3836c5(0x1fe)][_0x3836c5(0x268)](_0x3836c5(0x254)),_0x72ae0c[_0x3836c5(0x1b4)](_0x3836c5(0x1b5),{'val':![],'ack':!![]}),_0x72ae0c[_0x3836c5(0x1b4)]('analysis.automation.detectedPatterns',{'val':'[]','ack':!![]});}else{if(_0x2404b0['type']===_0x3836c5(0x220)){if(_0x2404b0[_0x3836c5(0x309)]['success'])try{const _0x1a066f=JSON[_0x3836c5(0x1ec)](_0x2404b0[_0x3836c5(0x309)][_0x3836c5(0x20b)]);if(_0x1a066f[_0x3836c5(0x31c)])_0x72ae0c[_0x3836c5(0x1b4)](_0x3836c5(0x330),{'val':JSON[_0x3836c5(0x1b3)](_0x1a066f[_0x3836c5(0x31c)]),'ack':!![]});if(_0x1a066f[_0x3836c5(0x21f)])_0x72ae0c[_0x3836c5(0x1b4)](_0x3836c5(0x2c8),{'val':JSON['stringify'](_0x1a066f['heating']),'ack':!![]});}catch(_0xe6fe7c){}}else{if(_0x2404b0[_0x3836c5(0x2b6)]===_0x3836c5(0x2a7)){if(_0x2404b0['payload'][_0x3836c5(0x1e1)])_0x72ae0c['log'][_0x3836c5(0x268)](_0x3836c5(0x1cf));}else{if(_0x2404b0['type']===_0x3836c5(0x187))_0x72ae0c[_0x3836c5(0x1b4)](_0x3836c5(0x267),{'val':new Date()[_0x3836c5(0x2ef)](),'ack':!![]}),_0x72ae0c[_0x3836c5(0x1b4)](_0x3836c5(0x286),{'val':_0x2404b0['payload']['is_anomaly'],'ack':!![]});else{if(_0x2404b0[_0x3836c5(0x2b6)]===_0x3836c5(0x23f))_0x72ae0c[_0x3836c5(0x1b4)]('analysis.health.trendDiagnosis',{'val':_0x2404b0['payload'][_0x3836c5(0x2c9)],'ack':!![]}),_0x72ae0c[_0x3836c5(0x1b4)](_0x3836c5(0x331),{'val':_0x2404b0[_0x3836c5(0x309)][_0x3836c5(0x1ad)],'ack':!![]});else{if(_0x2404b0[_0x3836c5(0x2b6)]===_0x3836c5(0x337)){const {speed_trend:_0x4e5f9e}=_0x2404b0[_0x3836c5(0x309)];_0x4e5f9e!==undefined&&_0x72ae0c[_0x3836c5(0x1b4)](_0x3836c5(0x247),{'val':_0x4e5f9e,'ack':!![]});}else{if(_0x2404b0[_0x3836c5(0x2b6)]==='ENERGY_PREDICT_RESULT'){const {forecast:_0x304810}=_0x2404b0[_0x3836c5(0x309)];_0x304810&&_0x72ae0c[_0x3836c5(0x1b4)](_0x3836c5(0x259),{'val':JSON[_0x3836c5(0x1b3)](_0x304810),'ack':!![]});}else{if(_0x2404b0['type']==='TOPOLOGY_RESULT'){const {data:_0x6df394}=_0x2404b0[_0x3836c5(0x309)];_0x6df394&&(_0x72ae0c[_0x3836c5(0x1fe)][_0x3836c5(0x268)](_0x3836c5(0x30d)),_0x72ae0c[_0x3836c5(0x1b4)](_0x3836c5(0x335),{'val':JSON[_0x3836c5(0x1b3)](_0x6df394),'ack':!![]}));}}}}}}}}}}}}function a0_0x2f17(_0x179e44,_0x2fc74f){const _0x844a8c=a0_0x5cdb();return a0_0x2f17=function(_0x1632ee,_0x3bf3cc){_0x1632ee=_0x1632ee-0x179;let _0x5cdbc2=_0x844a8c[_0x1632ee];return _0x5cdbc2;},a0_0x2f17(_0x179e44,_0x2fc74f);}function runPythonHealthCheck(_0x3aa4d9){const _0x4409ae=a0_0x23a865;if(!_0x3aa4d9[_0x4409ae(0x22c)]||_0x3aa4d9['dailyDigests']['length']<0x2)return;const _0x208720=_0x3aa4d9[_0x4409ae(0x22c)][_0x4409ae(0x2b0)](_0x337ef2=>{const _0x2be0f1=_0x4409ae,_0x9385d2=(_0x337ef2[_0x2be0f1(0x2ad)]||'')[_0x2be0f1(0x283)]();return ACTIVITY_LEVEL_MAP[_0x9385d2]||0x32;});sendToPython(_0x3aa4d9,_0x4409ae(0x32e),{'values':_0x208720,'tag':_0x4409ae(0x2c2)});}async function handleTelegramResponse(_0x42b945,_0x2db54e){const _0x452e0f=a0_0x23a865;let _0x2867f8=_0x2db54e;_0x2db54e['startsWith']('[')&&(_0x2867f8=_0x2db54e[_0x452e0f(0x298)](_0x2db54e[_0x452e0f(0x224)](']')+0x1));if(_0x2867f8===_0x452e0f(0x238))await _0x42b945[_0x452e0f(0x1b4)](_0x452e0f(0x319),{'val':![],'ack':!![]}),await _0x42b945[_0x452e0f(0x1b4)](_0x452e0f(0x25c),{'val':'Vom\x20Benutzer\x20bestÃ¤tigt\x20(OK).','ack':!![]}),_0x42b945[_0x452e0f(0x217)]=![],sendNotification(_0x42b945,_0x452e0f(0x18d),![]);else _0x2867f8===_0x452e0f(0x1ca)&&sendNotification(_0x42b945,_0x452e0f(0x2da),![],!![]);}async function sendNotification(_0x1d72eb,_0x47e104,_0x27f18d=![],_0xc9ee06=![]){const _0x1ef1bb=a0_0x23a865,_0x38c4ed=_0x1d72eb[_0x1ef1bb(0x320)];if(_0x38c4ed[_0x1ef1bb(0x19c)]){let _0x29288d={};(_0x47e104['includes']('Alarm')||_0xc9ee06)&&(_0x29288d={'reply_markup':{'inline_keyboard':[[{'text':_0x1ef1bb(0x21c),'callback_data':_0x1ef1bb(0x238)}],[{'text':'ðŸ“ž\x20RÃ¼ckruf\x20anfordern','callback_data':_0x1ef1bb(0x1ca)}]]}}),await _0x1d72eb['sendToAsync'](_0x38c4ed[_0x1ef1bb(0x251)],_0x1ef1bb(0x1b6),{'text':_0x47e104,'user':_0x38c4ed[_0x1ef1bb(0x1da)],..._0x29288d});}if(_0x38c4ed[_0x1ef1bb(0x2ba)]){let _0x212f8d={'message':_0x47e104,'title':_0xc9ee06?_0x1ef1bb(0x27f):'Cogni-Living','priority':_0xc9ee06?0x2:0x1,'device':_0x38c4ed[_0x1ef1bb(0x1ab)]};_0xc9ee06&&(_0x212f8d[_0x1ef1bb(0x182)]=0x1e,_0x212f8d[_0x1ef1bb(0x179)]=0xe10,_0x212f8d['sound']=_0x1ef1bb(0x323)),await _0x1d72eb[_0x1ef1bb(0x219)](_0x38c4ed[_0x1ef1bb(0x1a9)],_0x1ef1bb(0x1b6),_0x212f8d);}_0x38c4ed['notifyEmailEnabled']&&await _0x1d72eb[_0x1ef1bb(0x219)](_0x38c4ed[_0x1ef1bb(0x1ee)],_0x1ef1bb(0x1b6),{'text':_0x47e104,'to':_0x38c4ed[_0x1ef1bb(0x2e4)]});}class CogniLiving extends utils[a0_0x23a865(0x1e5)]{constructor(_0x4877d3){const _0x27f572=a0_0x23a865;super({..._0x4877d3,'name':_0x27f572(0x2df)}),this['eventHistory']=[],this[_0x27f572(0x230)]=[],this[_0x27f572(0x200)]=[],this['dailyDigests']=[],this[_0x27f572(0x2cd)]={},this[_0x27f572(0x26a)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x27f572(0x20f)]=!![],this[_0x27f572(0x17f)]=null,this['exitGraceTimer']=null,this['isGracePeriodActive']=![],this[_0x27f572(0x264)]=null,this[_0x27f572(0x2aa)]=null,this[_0x27f572(0x1cb)]=SYSTEM_MODES[_0x27f572(0x1ef)],this[_0x27f572(0x242)]=![],this[_0x27f572(0x217)]=![],this[_0x27f572(0x297)]=_0x27f572(0x2fa),this[_0x27f572(0x2fd)]=null,this['ltmJob']=null,this[_0x27f572(0x24c)]=null,this['driftAnalysisTimer']=null,this[_0x27f572(0x300)]=null,this[_0x27f572(0x339)]=null,this[_0x27f572(0x233)]=![],this['on'](_0x27f572(0x23a),this[_0x27f572(0x18b)][_0x27f572(0x24b)](this)),this['on']('stateChange',this['onStateChange'][_0x27f572(0x24b)](this)),this['on'](_0x27f572(0x322),this[_0x27f572(0x2f3)][_0x27f572(0x24b)](this)),this['on'](_0x27f572(0x23d),this[_0x27f572(0x17a)]['bind'](this));}async[a0_0x23a865(0x18b)](){const _0x3ef1a6=a0_0x23a865;this[_0x3ef1a6(0x1fe)]['info'](_0x3ef1a6(0x189)+this[_0x3ef1a6(0x275)]+_0x3ef1a6(0x2fb));if(!checkAndInstall(this))return;await startSystem(this);}['onUnload'](_0x5d4297){const _0x367e56=a0_0x23a865;if(this['analysisTimer'])clearInterval(this['analysisTimer']);if(this[_0x367e56(0x1a7)])clearInterval(this[_0x367e56(0x1a7)]);if(this[_0x367e56(0x1f0)])this[_0x367e56(0x1f0)]['cancel']();if(this[_0x367e56(0x24c)])this['modeResetJob'][_0x367e56(0x2b2)]();if(this[_0x367e56(0x300)])this[_0x367e56(0x300)]['cancel']();if(this[_0x367e56(0x17f)])clearTimeout(this[_0x367e56(0x17f)]);if(this[_0x367e56(0x293)])clearTimeout(this[_0x367e56(0x293)]);stopPythonService(this),_0x5d4297();}async['onStateChange'](_0x24aef2,_0x21a477){const _0x1e99c7=a0_0x23a865;if(!_0x21a477||this[_0x1e99c7(0x233)])return;if(_0x24aef2[_0x1e99c7(0x18c)]('telegram')&&_0x24aef2[_0x1e99c7(0x321)](_0x1e99c7(0x2a5))&&_0x21a477[_0x1e99c7(0x204)]){await handleTelegramResponse(this,_0x21a477['val']);return;}if(_0x24aef2===this[_0x1e99c7(0x32b)]+'.'+SYSTEM_DP_MODE){if(_0x21a477[_0x1e99c7(0x204)]&&Object[_0x1e99c7(0x280)](SYSTEM_MODES)[_0x1e99c7(0x18c)](_0x21a477[_0x1e99c7(0x204)])){this['currentSystemMode']=_0x21a477[_0x1e99c7(0x204)];if(_0x21a477[_0x1e99c7(0x204)]===SYSTEM_MODES[_0x1e99c7(0x1ae)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x21a477[_0x1e99c7(0x1f2)])this[_0x1e99c7(0x1d1)](_0x24aef2,{'val':this[_0x1e99c7(0x1cb)],'ack':!![]});return;}if(!_0x21a477[_0x1e99c7(0x1f2)]){_0x24aef2[_0x1e99c7(0x18c)]('analysis.trigger')&&_0x21a477[_0x1e99c7(0x204)]&&(this[_0x1e99c7(0x1d1)](_0x24aef2,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x24aef2[_0x1e99c7(0x18c)](_0x1e99c7(0x308))&&_0x21a477[_0x1e99c7(0x204)]){this['setState'](_0x24aef2,{'val':![],'ack':!![]});if(this[_0x1e99c7(0x242)])createDailyDigest(this);}_0x24aef2[_0x1e99c7(0x18c)](_0x1e99c7(0x18f))&&_0x21a477[_0x1e99c7(0x204)]&&(this[_0x1e99c7(0x1d1)](_0x24aef2,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x24aef2[_0x1e99c7(0x18c)]('automation.triggerAction')&&_0x21a477['val']&&(this[_0x1e99c7(0x1d1)](_0x24aef2,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x24aef2[_0x1e99c7(0x18c)]('analysis.training.triggerSecurity')&&_0x21a477[_0x1e99c7(0x204)]){this[_0x1e99c7(0x1d1)](_0x24aef2,{'val':![],'ack':!![]});if(this[_0x1e99c7(0x242)])try{const _0x5324bf=await this[_0x1e99c7(0x210)](_0x1e99c7(0x30e));if(_0x5324bf&&_0x5324bf[_0x1e99c7(0x204)]){const _0x33d468=JSON['parse'](_0x5324bf[_0x1e99c7(0x204)]);this[_0x1e99c7(0x1fe)][_0x1e99c7(0x268)](_0x1e99c7(0x25d)),this['setStateAsync'](_0x1e99c7(0x276),{'val':_0x1e99c7(0x202),'ack':!![]}),sendToPython(this,_0x1e99c7(0x1f8),{'sequences':_0x33d468});}}catch(_0x25eb2a){this[_0x1e99c7(0x1fe)]['error'](_0x1e99c7(0x2e1)+_0x25eb2a[_0x1e99c7(0x23d)]);}}if(_0x24aef2['includes'](_0x1e99c7(0x252))&&_0x21a477['val']){this[_0x1e99c7(0x1d1)](_0x24aef2,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x355421=await this[_0x1e99c7(0x210)](LTM_DP_DAILY_DIGESTS);if(_0x355421&&_0x355421[_0x1e99c7(0x204)])sendToPython(this,'TRAIN_HEALTH',{'digests':JSON[_0x1e99c7(0x1ec)](_0x355421[_0x1e99c7(0x204)])});}catch(_0x5719ab){}}if(_0x24aef2[_0x1e99c7(0x18c)]('analysis.training.triggerEnergy')&&_0x21a477[_0x1e99c7(0x204)]){this[_0x1e99c7(0x1d1)](_0x24aef2,{'val':![],'ack':!![]});if(this[_0x1e99c7(0x242)])try{const _0x52438b=await this['getStateAsync'](_0x1e99c7(0x288));if(_0x52438b&&_0x52438b['val'])sendToPython(this,_0x1e99c7(0x1c9),{'points':JSON[_0x1e99c7(0x1ec)](_0x52438b['val'])});}catch(_0xe77720){}}if(_0x24aef2['includes'](_0x1e99c7(0x270))&&_0x21a477[_0x1e99c7(0x204)]){this[_0x1e99c7(0x1d1)](_0x24aef2,{'val':![],'ack':!![]});if(this[_0x1e99c7(0x242)])try{const _0x211f28=await this['getStateAsync'](LTM_DP_RAW_LOG);_0x211f28&&_0x211f28[_0x1e99c7(0x204)]&&(this[_0x1e99c7(0x1fe)][_0x1e99c7(0x268)]('ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...'),sendToPython(this,'TRAIN_COMFORT',{'events':JSON[_0x1e99c7(0x1ec)](_0x211f28[_0x1e99c7(0x204)])}));}catch(_0x9fe3be){}}if(_0x24aef2[_0x1e99c7(0x18c)]('analysis.training.triggerTopology')&&_0x21a477['val']){this[_0x1e99c7(0x1d1)](_0x24aef2,{'val':![],'ack':!![]});if(this[_0x1e99c7(0x242)])try{const _0x506679=await this[_0x1e99c7(0x210)](_0x1e99c7(0x30e));if(_0x506679&&_0x506679[_0x1e99c7(0x204)]){const _0x61a4d=JSON[_0x1e99c7(0x1ec)](_0x506679[_0x1e99c7(0x204)]);this[_0x1e99c7(0x1fe)]['info'](_0x1e99c7(0x246)),sendToPython(this,_0x1e99c7(0x1e3),{'sequences':_0x61a4d});}}catch(_0xb19754){this[_0x1e99c7(0x1fe)][_0x1e99c7(0x2f8)](_0x1e99c7(0x2ce)+_0xb19754[_0x1e99c7(0x23d)]);}}return;}if(this['config'][_0x1e99c7(0x29d)]&&this['config'][_0x1e99c7(0x29d)][_0x1e99c7(0x18c)](_0x24aef2)){await checkWifiPresence(this);return;}const _0x25fffd=(this[_0x1e99c7(0x320)][_0x1e99c7(0x209)]||[])[_0x1e99c7(0x2c7)](_0x5f21aa=>_0x5f21aa['id']===_0x24aef2);if(_0x25fffd)processSensorEvent(this,_0x24aef2,_0x21a477,_0x25fffd);}async['onMessage'](_0x45551c){const _0x2c44fd=a0_0x23a865;if(typeof _0x45551c===_0x2c44fd(0x199)&&_0x45551c[_0x2c44fd(0x23d)]){if(_0x45551c[_0x2c44fd(0x2f5)]===_0x2c44fd(0x240)){const _0x5d3131=_0x45551c[_0x2c44fd(0x23d)][_0x2c44fd(0x218)]||this['config'][_0x2c44fd(0x22d)];if(!_0x5d3131)return this[_0x2c44fd(0x313)](_0x45551c[_0x2c44fd(0x19a)],_0x45551c[_0x2c44fd(0x2f5)],{'success':![],'message':_0x2c44fd(0x26c)},_0x45551c[_0x2c44fd(0x1c7)]);try{const _0xfb2a7b=new GoogleGenerativeAI(_0x5d3131),_0x104be0=_0xfb2a7b[_0x2c44fd(0x29b)]({'model':GEMINI_MODEL}),_0x53b2b3=await _0x104be0['generateContent']('Hi');this[_0x2c44fd(0x313)](_0x45551c[_0x2c44fd(0x19a)],_0x45551c[_0x2c44fd(0x2f5)],{'success':!![],'message':_0x2c44fd(0x302)+_0x53b2b3[_0x2c44fd(0x1f6)]['text']()},_0x45551c[_0x2c44fd(0x1c7)]);}catch(_0x5c539d){this[_0x2c44fd(0x313)](_0x45551c[_0x2c44fd(0x19a)],_0x45551c[_0x2c44fd(0x2f5)],{'success':![],'message':'Err:\x20'+_0x5c539d[_0x2c44fd(0x23d)]},_0x45551c['callback']);}}else{if(_0x45551c[_0x2c44fd(0x2f5)]===_0x2c44fd(0x2a9)){const _0x25b8e7=await getWeatherContext(this),_0xb9c3c7=await getCalendarContext(this);this['sendTo'](_0x45551c['from'],_0x45551c[_0x2c44fd(0x2f5)],{'success':!![],'weather':_0x25b8e7,'calendar':_0xb9c3c7},_0x45551c[_0x2c44fd(0x1c7)]);}else{if(_0x45551c['command']===_0x2c44fd(0x327)){if(!this[_0x2c44fd(0x242)])return this[_0x2c44fd(0x313)](_0x45551c[_0x2c44fd(0x19a)],_0x45551c['command'],{'success':![],'isPro':![]},_0x45551c[_0x2c44fd(0x1c7)]);let _0x29a0af={'status':_0x2c44fd(0x1aa)};try{const _0x1cd561=await this[_0x2c44fd(0x210)](LTM_DP_DRIFT_STATUS);_0x29a0af[_0x2c44fd(0x326)]=_0x1cd561?_0x1cd561[_0x2c44fd(0x204)]:_0x2c44fd(0x1aa);}catch(_0x22d6b8){}this[_0x2c44fd(0x313)](_0x45551c[_0x2c44fd(0x19a)],_0x45551c[_0x2c44fd(0x2f5)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x2c44fd(0x22c)],'driftAnalysis':_0x29a0af,'analysisHistory':this[_0x2c44fd(0x230)]},_0x45551c[_0x2c44fd(0x1c7)]);}else{if(_0x45551c[_0x2c44fd(0x2f5)]===_0x2c44fd(0x2ed)){const _0x1cc48d=this[_0x2c44fd(0x22c)][_0x2c44fd(0x195)],_0x430cb9=new Date(),_0x103395=new Date(_0x430cb9[_0x2c44fd(0x30a)](),_0x430cb9['getMonth'](),_0x430cb9[_0x2c44fd(0x191)]())[_0x2c44fd(0x21e)](),_0xd078a1=this[_0x2c44fd(0x200)][_0x2c44fd(0x231)](_0x25d6c1=>new Date(_0x25d6c1['timestamp'])['getTime']()>_0x103395)[_0x2c44fd(0x195)],_0x4c0b40=new Array(0x18)[_0x2c44fd(0x33b)](0x0);this[_0x2c44fd(0x200)][_0x2c44fd(0x2e8)](_0x44bae4=>{const _0x46d330=_0x2c44fd,_0xa4f00b=new Date(_0x44bae4[_0x46d330(0x2c5)]);if(_0xa4f00b[_0x46d330(0x21e)]()>_0x103395)_0x4c0b40[_0xa4f00b[_0x46d330(0x2c1)]()]++;});let _0x508ebb={'status':_0x2c44fd(0x1aa)};try{const _0xe86666=await this[_0x2c44fd(0x210)](LTM_DP_DRIFT_STATUS);_0x508ebb[_0x2c44fd(0x326)]=_0xe86666?_0xe86666[_0x2c44fd(0x204)]:_0x2c44fd(0x1aa);}catch(_0x29b97e){}let _0x22b935='';try{const _0x3c4c69=await this[_0x2c44fd(0x210)]('system.presenceWho');_0x22b935=_0x3c4c69?_0x3c4c69['val']:'';}catch(_0x3e7a06){}let _0x3a1d98=null;!this[_0x2c44fd(0x2aa)]&&(_0x3a1d98=this[_0x2c44fd(0x320)][_0x2c44fd(0x22d)]?_0x2c44fd(0x1e8):_0x2c44fd(0x1a2));let _0x20bcaf={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x25f330=await this[_0x2c44fd(0x210)](_0x2c44fd(0x1b5));if(_0x25f330&&_0x25f330[_0x2c44fd(0x204)]){_0x20bcaf[_0x2c44fd(0x32d)]=!![];const _0x2a25ca=await this[_0x2c44fd(0x210)](_0x2c44fd(0x184));_0x20bcaf[_0x2c44fd(0x273)]=_0x2a25ca?_0x2a25ca[_0x2c44fd(0x204)]:'';const _0xc29a7a=await this[_0x2c44fd(0x210)](_0x2c44fd(0x234));_0x20bcaf[_0x2c44fd(0x2f9)]=_0xc29a7a?_0xc29a7a['val']:'';const _0x25dd4f=await this[_0x2c44fd(0x210)]('analysis.automation.targetValue');_0x20bcaf[_0x2c44fd(0x2b9)]=_0x25dd4f?_0x25dd4f[_0x2c44fd(0x204)]:'';}const _0x6f15e8=await this[_0x2c44fd(0x210)](_0x2c44fd(0x1ce));_0x20bcaf[_0x2c44fd(0x1ac)]=_0x6f15e8?!!_0x6f15e8[_0x2c44fd(0x204)]:![];}catch(_0x3fb8b1){}this[_0x2c44fd(0x313)](_0x45551c[_0x2c44fd(0x19a)],_0x45551c[_0x2c44fd(0x2f5)],{'success':!![],'eventHistory':this[_0x2c44fd(0x1c2)]['slice'](0x0,0xf),'stats':{'digestCount':_0x1cc48d,'eventCountToday':_0xd078a1,'hourlyActivity':_0x4c0b40,'driftStatus':_0x508ebb[_0x2c44fd(0x326)],'isPresent':this[_0x2c44fd(0x20f)],'presenceWho':_0x22b935,'minDays':this[_0x2c44fd(0x320)][_0x2c44fd(0x196)]||0x7,'stbDays':this[_0x2c44fd(0x320)][_0x2c44fd(0x216)]||0xe,'ltbDays':this[_0x2c44fd(0x320)][_0x2c44fd(0x205)]||0x3c,'systemError':_0x3a1d98},'automation':_0x20bcaf},_0x45551c[_0x2c44fd(0x1c7)]);}else{if(_0x45551c[_0x2c44fd(0x2f5)]===_0x2c44fd(0x1fa))try{const _0x10c4ef=await scanForDevices(this,_0x45551c[_0x2c44fd(0x23d)]||{});this['sendTo'](_0x45551c[_0x2c44fd(0x19a)],_0x45551c['command'],{'success':!![],'devices':_0x10c4ef},_0x45551c[_0x2c44fd(0x1c7)]);}catch(_0x332ed8){this['sendTo'](_0x45551c[_0x2c44fd(0x19a)],_0x45551c[_0x2c44fd(0x2f5)],{'success':![],'error':_0x332ed8[_0x2c44fd(0x23d)]},_0x45551c[_0x2c44fd(0x1c7)]);}else{if(_0x45551c['command']===_0x2c44fd(0x1e2)){const _0x52a325=await this[_0x2c44fd(0x289)](_0x2c44fd(0x2dd),_0x2c44fd(0x22e)),_0x9b029b=[];if(_0x52a325)for(const _0x1b9b17 in _0x52a325){const _0x397c4b=_0x52a325[_0x1b9b17],_0x779a4e=(_0x397c4b[_0x2c44fd(0x24f)]&&typeof _0x397c4b[_0x2c44fd(0x24f)][_0x2c44fd(0x27e)]===_0x2c44fd(0x199)?_0x397c4b[_0x2c44fd(0x24f)]['name']['de']:_0x397c4b['common'][_0x2c44fd(0x27e)])||_0x397c4b[_0x2c44fd(0x24f)][_0x2c44fd(0x27e)];_0x9b029b[_0x2c44fd(0x1c0)]({'id':_0x1b9b17,'name':_0x779a4e});}const _0x338021=await this['getForeignObjectsAsync'](_0x2c44fd(0x294),'enum'),_0x58e0d4=[];if(_0x338021)for(const _0x495bba in _0x338021){const _0x454cac=_0x338021[_0x495bba],_0x41faeb=(_0x454cac['common']&&typeof _0x454cac[_0x2c44fd(0x24f)]['name']===_0x2c44fd(0x199)?_0x454cac[_0x2c44fd(0x24f)][_0x2c44fd(0x27e)]['de']:_0x454cac['common']['name'])||_0x495bba[_0x2c44fd(0x20a)]('.')[_0x2c44fd(0x2a4)]();_0x58e0d4[_0x2c44fd(0x1c0)](_0x41faeb);}this[_0x2c44fd(0x313)](_0x45551c[_0x2c44fd(0x19a)],_0x45551c[_0x2c44fd(0x2f5)],{'success':!![],'enums':_0x9b029b,'rooms':_0x58e0d4},_0x45551c['callback']);}else{if(_0x45551c[_0x2c44fd(0x2f5)]===_0x2c44fd(0x338)){const _0x692503=_0x45551c[_0x2c44fd(0x23d)][_0x2c44fd(0x2fe)];if(!_0x692503)return this[_0x2c44fd(0x313)](_0x45551c[_0x2c44fd(0x19a)],_0x45551c[_0x2c44fd(0x2f5)],{'success':![],'error':_0x2c44fd(0x1bd)},_0x45551c['callback']);const _0x8dda1f=await getCalendarNames(this,_0x692503);this[_0x2c44fd(0x313)](_0x45551c[_0x2c44fd(0x19a)],_0x45551c['command'],{'success':!![],'names':_0x8dda1f},_0x45551c[_0x2c44fd(0x1c7)]);}else{if(_0x45551c[_0x2c44fd(0x2f5)]===_0x2c44fd(0x306)){const {targetId:_0x18c812,targetValue:_0x5f5a2d}=_0x45551c[_0x2c44fd(0x23d)];this[_0x2c44fd(0x1fe)][_0x2c44fd(0x268)]('ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20'+_0x18c812+_0x2c44fd(0x256)+_0x5f5a2d),await this[_0x2c44fd(0x1b4)](_0x2c44fd(0x1b5),{'val':!![],'ack':!![]}),await this[_0x2c44fd(0x1b4)]('analysis.automation.description',{'val':_0x2c44fd(0x1df)+_0x18c812,'ack':!![]}),await this[_0x2c44fd(0x1b4)](_0x2c44fd(0x234),{'val':_0x18c812,'ack':!![]}),await this[_0x2c44fd(0x1b4)](_0x2c44fd(0x2d0),{'val':_0x5f5a2d,'ack':!![]}),this[_0x2c44fd(0x313)](_0x45551c[_0x2c44fd(0x19a)],_0x45551c[_0x2c44fd(0x2f5)],{'success':!![]},_0x45551c[_0x2c44fd(0x1c7)]);}else{if(_0x45551c[_0x2c44fd(0x2f5)]===_0x2c44fd(0x317)){const {historyId:_0x44c9a4,rating:_0x2f9f28,comment:_0x502b33,alertReason:_0x98b84f}=_0x45551c[_0x2c44fd(0x23d)];_0x44c9a4&&_0x2f9f28?(await saveFeedback(this,{'timestamp':Date[_0x2c44fd(0x1e7)](),'historyId':_0x44c9a4,'rating':_0x2f9f28,'comment':_0x502b33,'alertReason':_0x98b84f}),this[_0x2c44fd(0x313)](_0x45551c[_0x2c44fd(0x19a)],_0x45551c[_0x2c44fd(0x2f5)],{'success':!![]},_0x45551c[_0x2c44fd(0x1c7)])):this[_0x2c44fd(0x313)](_0x45551c[_0x2c44fd(0x19a)],_0x45551c[_0x2c44fd(0x2f5)],{'success':![],'error':_0x2c44fd(0x281)},_0x45551c[_0x2c44fd(0x1c7)]);}else _0x45551c[_0x2c44fd(0x2f5)]===_0x2c44fd(0x2d8)&&(this[_0x2c44fd(0x1fe)][_0x2c44fd(0x268)](_0x2c44fd(0x17d)),await this[_0x2c44fd(0x1b4)](_0x2c44fd(0x1b5),{'val':![],'ack':!![]}),await this[_0x2c44fd(0x1b4)]('analysis.automation.description',{'val':'','ack':!![]}),this['sendTo'](_0x45551c[_0x2c44fd(0x19a)],_0x45551c[_0x2c44fd(0x2f5)],{'success':!![]},_0x45551c[_0x2c44fd(0x1c7)]));}}}}}}}}}}}if(require[a0_0x23a865(0x25f)]!==module)module[a0_0x23a865(0x19e)]=_0xe003bb=>new CogniLiving(_0xe003bb);else new CogniLiving();