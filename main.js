const a0_0x4c5b80=a0_0x2470;(function(_0x4c5047,_0x13a376){const _0x52f11e=a0_0x2470,_0x1dba71=_0x4c5047();while(!![]){try{const _0x27e0e6=-parseInt(_0x52f11e(0x144))/0x1+-parseInt(_0x52f11e(0x1b8))/0x2+-parseInt(_0x52f11e(0x125))/0x3+parseInt(_0x52f11e(0xda))/0x4*(parseInt(_0x52f11e(0x1a3))/0x5)+parseInt(_0x52f11e(0x1a6))/0x6*(-parseInt(_0x52f11e(0xb6))/0x7)+-parseInt(_0x52f11e(0xf5))/0x8*(-parseInt(_0x52f11e(0x170))/0x9)+parseInt(_0x52f11e(0x182))/0xa;if(_0x27e0e6===_0x13a376)break;else _0x1dba71['push'](_0x1dba71['shift']());}catch(_0x246012){_0x1dba71['push'](_0x1dba71['shift']());}}}(a0_0x4e91,0x5893b));const a0_0xb8d5c1=(function(){let _0x365be6=!![];return function(_0x58ef51,_0x153485){const _0x2e91eb=_0x365be6?function(){const _0x2add90=a0_0x2470;if(_0x153485){const _0x165f11=_0x153485[_0x2add90(0x130)](_0x58ef51,arguments);return _0x153485=null,_0x165f11;}}:function(){};return _0x365be6=![],_0x2e91eb;};}()),a0_0x26312e=a0_0xb8d5c1(this,function(){const _0x4f7704=a0_0x2470;return a0_0x26312e[_0x4f7704(0x181)]()['search']('(((.+)+)+)+$')[_0x4f7704(0x181)]()[_0x4f7704(0x113)](a0_0x26312e)['search'](_0x4f7704(0xa3));});a0_0x26312e();'use strict';const utils=require(a0_0x4c5b80(0xa5)),{GoogleGenerativeAI}=require(a0_0x4c5b80(0x11a)),installer=require(a0_0x4c5b80(0xc5)),scanner=require('./lib/scanner'),schedulers=require(a0_0x4c5b80(0x1af)),topology=require(a0_0x4c5b80(0x171)),setup=require(a0_0x4c5b80(0x167)),recorder=require(a0_0x4c5b80(0x1c1)),pythonBridge=require(a0_0x4c5b80(0xe8)),aiAgent=require(a0_0x4c5b80(0x1d2)),deadMan=require('./lib/dead_man'),automation=require(a0_0x4c5b80(0x11c)),GEMINI_MODEL='models/gemini-flash-latest',ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x4c5b80(0x14d)]{constructor(_0x4bf303){const _0x482968=a0_0x4c5b80;super({..._0x4bf303,'name':_0x482968(0x107)}),this[_0x482968(0xfa)]=[],this[_0x482968(0x1bb)]=[],this[_0x482968(0x150)]=[],this[_0x482968(0x1c3)]=[],this[_0x482968(0xaf)]={},this[_0x482968(0x19f)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x482968(0x1a4)]=!![],this[_0x482968(0x1d4)]=null,this[_0x482968(0x13b)]=null,this['isGracePeriodActive']=![],this['genAI']=null,this['geminiModel']=null,this[_0x482968(0xd4)]=setup[_0x482968(0x18e)]['NORMAL'],this[_0x482968(0x12c)]=![],this['lastAlertState']=![],this[_0x482968(0x115)]=null,this[_0x482968(0x132)]=null,this['modeResetJob']=null,this[_0x482968(0x12f)]=null,this[_0x482968(0x1b1)]=null,this[_0x482968(0xbe)]=null,this[_0x482968(0xa1)]=null,this[_0x482968(0x1aa)]=![],this[_0x482968(0x106)]=Date['now'](),this['memoryCache']=null,this['bootTime']=Date[_0x482968(0x138)](),this[_0x482968(0x160)]=![],this[_0x482968(0x9e)]=[],this['on'](_0x482968(0x1bd),this['onReady'][_0x482968(0x176)](this)),this['on'](_0x482968(0x16d),this['onStateChange'][_0x482968(0x176)](this)),this['on']('unload',this[_0x482968(0x16c)][_0x482968(0x176)](this)),this['on'](_0x482968(0x148),this['onMessage'][_0x482968(0x176)](this));}async['onReady'](){const _0x253c06=a0_0x4c5b80;this['log'][_0x253c06(0x168)](_0x253c06(0x179)+this[_0x253c06(0x139)]+_0x253c06(0x97));if(!installer[_0x253c06(0x1ad)](this,()=>this[_0x253c06(0x163)]()))return;}async[a0_0x4c5b80(0x163)](){const _0x4d3f9d=a0_0x4c5b80;await setup['initZombies'](this);try{this[_0x4d3f9d(0x12c)]=await setup[_0x4d3f9d(0x10e)](this[_0x4d3f9d(0x10a)][_0x4d3f9d(0xec)]);}catch(_0x551503){}if(!this[_0x4d3f9d(0x10a)][_0x4d3f9d(0x190)]||this['config'][_0x4d3f9d(0x190)]<0.1)this['config'][_0x4d3f9d(0x190)]=0xc;await setup[_0x4d3f9d(0x101)](this),await setup[_0x4d3f9d(0xfb)](this);try{const _0x1c5c0b=await this[_0x4d3f9d(0x9d)](_0x4d3f9d(0x8f)),_0x323601=await this[_0x4d3f9d(0x9d)](_0x4d3f9d(0x17f));_0x1c5c0b&&_0x1c5c0b['val']&&_0x323601&&_0x323601['val']&&(Date[_0x4d3f9d(0x138)]()-_0x1c5c0b['ts']<0x4*0xe10*0x3e8&&(this[_0x4d3f9d(0xd5)]={'times':JSON[_0x4d3f9d(0x199)](_0x1c5c0b[_0x4d3f9d(0x15e)]),'sources':JSON[_0x4d3f9d(0x199)](_0x323601['val'])},this[_0x4d3f9d(0x1a5)][_0x4d3f9d(0x168)](_0x4d3f9d(0x184)+Object[_0x4d3f9d(0xb8)](this['memoryCache']['times'])['length']+_0x4d3f9d(0xad))));}catch(_0x431636){this[_0x4d3f9d(0x1a5)][_0x4d3f9d(0x126)](_0x4d3f9d(0x103)+_0x431636[_0x4d3f9d(0x148)]);}if(this[_0x4d3f9d(0x10a)][_0x4d3f9d(0x14f)])try{this['genAI']=new GoogleGenerativeAI(this['config'][_0x4d3f9d(0x14f)]),this[_0x4d3f9d(0xea)]=this[_0x4d3f9d(0x17c)][_0x4d3f9d(0x10f)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x4d3f9d(0xab)}}),this[_0x4d3f9d(0x1a5)][_0x4d3f9d(0x168)](_0x4d3f9d(0x91));}catch(_0x2a18c7){this[_0x4d3f9d(0x1a5)][_0x4d3f9d(0x183)]('Gemini\x20Init\x20Error:\x20'+_0x2a18c7[_0x4d3f9d(0x148)]);}await setup[_0x4d3f9d(0xd9)](this),await this[_0x4d3f9d(0xe3)](),await this[_0x4d3f9d(0x120)](_0x4d3f9d(0x186),{'type':_0x4d3f9d(0xfc),'common':{'name':_0x4d3f9d(0x15b),'type':_0x4d3f9d(0x137),'role':_0x4d3f9d(0x13e),'read':!![],'write':![]},'native':{}}),await this[_0x4d3f9d(0x120)](_0x4d3f9d(0x12a),{'type':_0x4d3f9d(0xfc),'common':{'name':_0x4d3f9d(0x143),'type':'string','role':_0x4d3f9d(0x13e),'read':!![],'write':![]},'native':{}}),await this[_0x4d3f9d(0x120)](_0x4d3f9d(0x8f),{'type':_0x4d3f9d(0xfc),'common':{'name':_0x4d3f9d(0x105),'type':_0x4d3f9d(0x137),'role':_0x4d3f9d(0x13e),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x4d3f9d(0xfe),{'type':_0x4d3f9d(0xfc),'common':{'name':_0x4d3f9d(0x127),'type':_0x4d3f9d(0x137),'role':_0x4d3f9d(0x13e),'read':!![],'write':!![],'def':'{\x22default\x22:\x2021}'},'native':{}}),await this[_0x4d3f9d(0x120)](_0x4d3f9d(0x164),{'type':_0x4d3f9d(0xfc),'common':{'name':_0x4d3f9d(0xc1),'type':_0x4d3f9d(0x137),'role':_0x4d3f9d(0x13e),'read':!![],'write':![],'def':'{}'},'native':{}}),await this[_0x4d3f9d(0x120)](_0x4d3f9d(0x1a1),{'type':_0x4d3f9d(0xfc),'common':{'name':_0x4d3f9d(0x8b),'type':_0x4d3f9d(0x198),'role':_0x4d3f9d(0x1b7),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x4d3f9d(0x120)](_0x4d3f9d(0xe9),{'type':'state','common':{'name':_0x4d3f9d(0x17d),'type':'string','role':_0x4d3f9d(0x8c),'read':!![],'write':![]},'native':{}}),await this[_0x4d3f9d(0x120)](_0x4d3f9d(0xf0),{'type':_0x4d3f9d(0xfc),'common':{'name':'Active\x20Calendar\x20Enforcements\x20(Locks)','type':_0x4d3f9d(0x137),'role':_0x4d3f9d(0x13e),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x4d3f9d(0x120)]('analysis.security.infrasoundLog',{'type':'state','common':{'name':_0x4d3f9d(0x17b),'type':_0x4d3f9d(0x137),'role':_0x4d3f9d(0x13e),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.gaitDebug',{'type':'state','common':{'name':_0x4d3f9d(0xdf),'type':_0x4d3f9d(0x137),'role':_0x4d3f9d(0x8c),'read':!![],'write':![]},'native':{}});try{const _0x16d2e5=await this[_0x4d3f9d(0x9d)](_0x4d3f9d(0x141));if(_0x16d2e5&&_0x16d2e5[_0x4d3f9d(0x15e)])this[_0x4d3f9d(0x150)]=JSON[_0x4d3f9d(0x199)](_0x16d2e5[_0x4d3f9d(0x15e)]);}catch(_0x300b35){this['rawEventLog']=[];}try{const _0x531517=await this[_0x4d3f9d(0x9d)](_0x4d3f9d(0x1b9));if(_0x531517&&_0x531517[_0x4d3f9d(0x15e)])this[_0x4d3f9d(0x1c3)]=JSON['parse'](_0x531517[_0x4d3f9d(0x15e)]);}catch(_0x4cea02){this[_0x4d3f9d(0x1c3)]=[];}const _0x3e1a23=this[_0x4d3f9d(0x1c3)][_0x4d3f9d(0xb5)]>=(this['config'][_0x4d3f9d(0x1c2)]||0x7)?'Aktiv\x20('+this[_0x4d3f9d(0x1c3)][_0x4d3f9d(0xb5)]+_0x4d3f9d(0xef):_0x4d3f9d(0x8e)+this[_0x4d3f9d(0x1c3)][_0x4d3f9d(0xb5)]+'/'+(this[_0x4d3f9d(0x10a)][_0x4d3f9d(0x1c2)]||0x7)+')';await this[_0x4d3f9d(0x117)](_0x4d3f9d(0xf1),{'val':_0x3e1a23,'ack':!![]}),this[_0x4d3f9d(0x15f)]('analysis.trigger'),this[_0x4d3f9d(0x15f)](_0x4d3f9d(0x151)),this[_0x4d3f9d(0x15f)](_0x4d3f9d(0xed)),this['subscribeStates']('analysis.triggerBriefing'),this[_0x4d3f9d(0x15f)](_0x4d3f9d(0x13d)),this['subscribeStates'](_0x4d3f9d(0xee)),this['subscribeStates']('analysis.training.triggerSecurity'),this[_0x4d3f9d(0x15f)](_0x4d3f9d(0x1ce)),this[_0x4d3f9d(0x15f)](_0x4d3f9d(0x9a)),this[_0x4d3f9d(0x15f)](_0x4d3f9d(0x1ab)),this[_0x4d3f9d(0x15f)](_0x4d3f9d(0x1c4)),this[_0x4d3f9d(0x15f)]('analysis.energy.mpcActive'),this[_0x4d3f9d(0x15f)](_0x4d3f9d(0x17f));this['config'][_0x4d3f9d(0x1ae)]&&this[_0x4d3f9d(0x10a)]['infrasoundSensorId']&&(this[_0x4d3f9d(0x1a5)][_0x4d3f9d(0x168)](_0x4d3f9d(0xb1)+this[_0x4d3f9d(0x10a)][_0x4d3f9d(0x131)]),this['subscribeForeignStates'](this[_0x4d3f9d(0x10a)][_0x4d3f9d(0x131)]));const _0x11d9b4=this[_0x4d3f9d(0x10a)][_0x4d3f9d(0x12b)];if(_0x11d9b4)for(const _0x12ca73 of _0x11d9b4){await this[_0x4d3f9d(0x165)](_0x12ca73['id']);}const _0x4ffb6c=this[_0x4d3f9d(0x10a)][_0x4d3f9d(0x192)];if(_0x4ffb6c)for(const _0x416376 of _0x4ffb6c){await this[_0x4d3f9d(0x165)](_0x416376);}if(this[_0x4d3f9d(0x10a)][_0x4d3f9d(0x166)]&&this[_0x4d3f9d(0x10a)][_0x4d3f9d(0x9c)])await this['subscribeForeignStatesAsync'](this[_0x4d3f9d(0x10a)]['notifyTelegramInstance']+'.communicate.request');setTimeout(()=>this[_0x4d3f9d(0xe6)](),0x1388);if(this[_0x4d3f9d(0x115)])clearInterval(this[_0x4d3f9d(0x115)]);const _0x2fb8b6=this[_0x4d3f9d(0x10a)][_0x4d3f9d(0xcd)]||0xf;_0x2fb8b6>0x0&&(this[_0x4d3f9d(0x115)]=setInterval(()=>{const _0x4984dc=_0x4d3f9d;this[_0x4984dc(0xac)](),automation[_0x4984dc(0xe4)](this),automation[_0x4984dc(0xdb)](this);},_0x2fb8b6*0x3c*0x3e8));setTimeout(()=>{const _0x18feff=_0x4d3f9d;automation[_0x18feff(0xe4)](this),automation['monitorEnforcements'](this);},0x2710);this[_0x4d3f9d(0x10a)][_0x4d3f9d(0x1c9)]!==![]&&(this['trackerHeartbeat']=setInterval(()=>{const _0x4a59d0=_0x4d3f9d;if(this[_0x4a59d0(0x12c)]){const _0x591221=Date[_0x4a59d0(0x138)](),_0x4b3ada=this[_0x4a59d0(0x106)]||_0x591221,_0x276653=(_0x591221-_0x4b3ada)/0x3e8;_0x276653>0x2&&(this['lastTrackerEventTime']=_0x591221,pythonBridge['send'](this,'TRACK_EVENT',{'room':null,'dt':_0x276653}));}},0xbb8));if(this[_0x4d3f9d(0xa1)])clearInterval(this[_0x4d3f9d(0xa1)]);this[_0x4d3f9d(0xa1)]=setInterval(()=>{const _0x5622c5=_0x4d3f9d;this[_0x5622c5(0x12c)]&&(this[_0x5622c5(0x1a5)]['info'](_0x5622c5(0x153)),this[_0x5622c5(0x1c6)]());},0x4*0x3c*0x3c*0x3e8),schedulers[_0x4d3f9d(0x94)](this,()=>aiAgent['createDailyDigest'](this,pythonBridge)),schedulers[_0x4d3f9d(0xc4)](this),schedulers['setupDriftAnalysisScheduler'](this,()=>aiAgent[_0x4d3f9d(0x15a)](this)),schedulers[_0x4d3f9d(0xb9)](this,()=>aiAgent[_0x4d3f9d(0xf4)](this)),pythonBridge['startService'](this,installer[_0x4d3f9d(0x1cf)]),setTimeout(async()=>{const _0x4bf1f1=_0x4d3f9d;await topology[_0x4bf1f1(0xa7)](this);try{const _0x56f4df=await this[_0x4bf1f1(0x9d)](_0x4bf1f1(0x17e));if(_0x56f4df&&_0x56f4df['val'])pythonBridge[_0x4bf1f1(0x133)](this,'SET_TOPOLOGY',JSON['parse'](_0x56f4df[_0x4bf1f1(0x15e)]));}catch(_0x1800c5){}this[_0x4bf1f1(0x1c6)](),this['triggerGaitAnalysis'](),this['triggerEnergyPrediction'](),this[_0x4bf1f1(0xc2)]();},0x1388);}[a0_0x4c5b80(0x16c)](_0x229c47){const _0x49b2f5=a0_0x4c5b80;if(this[_0x49b2f5(0x115)])clearInterval(this[_0x49b2f5(0x115)]);if(this['driftAnalysisTimer'])clearInterval(this['driftAnalysisTimer']);if(this[_0x49b2f5(0xbe)])clearInterval(this[_0x49b2f5(0xbe)]);if(this[_0x49b2f5(0xa1)])clearInterval(this['healthTrendInterval']);if(this['ltmJob'])this[_0x49b2f5(0x132)]['cancel']();if(this[_0x49b2f5(0x1b2)])this['modeResetJob'][_0x49b2f5(0x18c)]();if(this['briefingJob'])this['briefingJob']['cancel']();recorder[_0x49b2f5(0xa9)](this),pythonBridge[_0x49b2f5(0xba)](this),_0x229c47();}async[a0_0x4c5b80(0x17a)](_0x3f1873,_0x2771aa){const _0x60324e=a0_0x4c5b80;if(!_0x2771aa||this['dependencyInstallInProgress'])return;if(_0x3f1873['includes'](_0x60324e(0x136))&&_0x3f1873[_0x60324e(0xca)](_0x60324e(0x173))&&_0x2771aa['val'])return;if(this[_0x60324e(0x10a)]['infrasoundEnabled']&&_0x3f1873===this[_0x60324e(0x10a)][_0x60324e(0x131)]){this[_0x60324e(0x119)](_0x2771aa[_0x60324e(0x15e)]);return;}if(_0x3f1873===this['namespace']+_0x60324e(0x1bf)){if(_0x2771aa[_0x60324e(0x15e)]&&Object[_0x60324e(0xa2)](setup['SYSTEM_MODES'])['includes'](_0x2771aa['val'])){this[_0x60324e(0xd4)]=_0x2771aa['val'];if(_0x2771aa[_0x60324e(0x15e)]===setup[_0x60324e(0x18e)][_0x60324e(0xf8)])await recorder[_0x60324e(0x162)](this,![]);else await recorder['setPresence'](this,!![]);if(this[_0x60324e(0x12c)]){let _0x31ef0c=![],_0x16605c=0x0,_0x42660f=_0x60324e(0x161);if(this[_0x60324e(0xd4)]===_0x60324e(0x110))_0x31ef0c=!![],_0x16605c=0x168,_0x42660f=_0x60324e(0x95);else this[_0x60324e(0xd4)]===_0x60324e(0xb7)&&(_0x31ef0c=!![],_0x16605c=0x5a0,_0x42660f=_0x60324e(0xcc));pythonBridge[_0x60324e(0x133)](this,_0x60324e(0x13c),{'active':_0x31ef0c,'duration':_0x16605c,'label':_0x42660f}),await this[_0x60324e(0x117)](_0x60324e(0xc8),{'val':JSON[_0x60324e(0x11b)]({'active':_0x31ef0c,'label':_0x42660f,'timestamp':Date[_0x60324e(0x138)]()}),'ack':!![]});}}if(!_0x2771aa['ack'])this[_0x60324e(0xe1)](_0x3f1873,{'val':this[_0x60324e(0xd4)],'ack':!![]});return;}_0x3f1873['endsWith'](_0x60324e(0x17f))&&_0x2771aa[_0x60324e(0x93)]&&this[_0x60324e(0xb2)](_0x2771aa['val']);if(!_0x2771aa['ack']){if(_0x3f1873['includes']('analysis.trigger')&&_0x2771aa[_0x60324e(0x15e)]){this['setState'](_0x3f1873,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this);return;}if(_0x3f1873['includes'](_0x60324e(0xc3))&&_0x2771aa['val']){this[_0x60324e(0xe1)](_0x3f1873,{'val':![],'ack':!![]});if(this[_0x60324e(0x12c)])aiAgent[_0x60324e(0x11d)](this,pythonBridge);return;}if(_0x3f1873[_0x60324e(0x12e)](_0x60324e(0xc9))&&_0x2771aa[_0x60324e(0x15e)]){this['setState'](_0x3f1873,{'val':![],'ack':!![]}),aiAgent[_0x60324e(0xf4)](this);return;}if(_0x3f1873[_0x60324e(0x12e)]('automation.triggerAction')&&_0x2771aa['val']){this[_0x60324e(0xe1)](_0x3f1873,{'val':![],'ack':!![]}),aiAgent[_0x60324e(0xd2)](this);return;}if(_0x3f1873[_0x60324e(0x12e)](_0x60324e(0x98))&&_0x2771aa['val']){this['setState'](_0x3f1873,{'val':![],'ack':!![]});if(this[_0x60324e(0x12c)])try{const _0x4cca49=await this['getStateAsync'](_0x60324e(0x92));if(_0x4cca49&&_0x4cca49['val']){const _0x2befc8=JSON[_0x60324e(0x199)](_0x4cca49['val']);this[_0x60324e(0x117)](_0x60324e(0xcb),{'val':_0x60324e(0x100),'ack':!![]}),pythonBridge[_0x60324e(0x133)](this,'TRAIN_SECURITY',{'sequences':_0x2befc8});}}catch(_0x5c9751){}return;}if(_0x3f1873['includes']('analysis.training.triggerHealth')&&_0x2771aa['val']){this['setState'](_0x3f1873,{'val':![],'ack':!![]});if(this[_0x60324e(0x12c)])try{const _0x1f4729=await this[_0x60324e(0x9d)](_0x60324e(0x1b9));if(_0x1f4729&&_0x1f4729['val'])pythonBridge[_0x60324e(0x133)](this,'TRAIN_HEALTH',{'digests':JSON[_0x60324e(0x199)](_0x1f4729['val'])});}catch(_0x2c04d0){}return;}if(_0x3f1873[_0x60324e(0x12e)](_0x60324e(0x9a))&&_0x2771aa[_0x60324e(0x15e)]){this['setState'](_0x3f1873,{'val':![],'ack':!![]});if(this[_0x60324e(0x12c)])try{const _0x1bf5b9=await this['getStateAsync'](_0x60324e(0x134));if(_0x1bf5b9&&_0x1bf5b9['val'])pythonBridge[_0x60324e(0x133)](this,'TRAIN_ENERGY',{'points':JSON[_0x60324e(0x199)](_0x1bf5b9['val'])});}catch(_0x5d1d86){}return;}if(_0x3f1873[_0x60324e(0x12e)](_0x60324e(0x1ab))&&_0x2771aa[_0x60324e(0x15e)]){this[_0x60324e(0xe1)](_0x3f1873,{'val':![],'ack':!![]});if(this[_0x60324e(0x12c)])try{const _0x31ce71=await this[_0x60324e(0x9d)](_0x60324e(0x141));if(_0x31ce71&&_0x31ce71[_0x60324e(0x15e)])pythonBridge[_0x60324e(0x133)](this,_0x60324e(0x15d),{'events':JSON[_0x60324e(0x199)](_0x31ce71[_0x60324e(0x15e)])});}catch(_0x17c3ec){}return;}if(_0x3f1873[_0x60324e(0x12e)]('analysis.training.triggerTopology')&&_0x2771aa[_0x60324e(0x15e)]){this['setState'](_0x3f1873,{'val':![],'ack':!![]}),topology['updateTopology'](this);if(this[_0x60324e(0x12c)])try{const _0x56a1a3=await this['getStateAsync'](_0x60324e(0x92));if(_0x56a1a3&&_0x56a1a3['val']){const _0x4ec4ea=JSON[_0x60324e(0x199)](_0x56a1a3[_0x60324e(0x15e)]);this[_0x60324e(0x1a5)][_0x60324e(0x168)]('üß†\x20Graph-Brain:\x20Training\x20Behaviour\x20Matrix\x20based\x20on\x20'+_0x4ec4ea['length']+_0x60324e(0x10c)),pythonBridge[_0x60324e(0x133)](this,_0x60324e(0x14a),{'sequences':_0x4ec4ea});}else this['log'][_0x60324e(0x126)](_0x60324e(0xf7));}catch(_0x343203){this[_0x60324e(0x1a5)][_0x60324e(0x183)](_0x60324e(0x146)+_0x343203[_0x60324e(0x148)]);}return;}}if(this['config']['presenceDevices']&&this[_0x60324e(0x10a)][_0x60324e(0x192)][_0x60324e(0x12e)](_0x3f1873)){await this['checkWifiPresence']();return;}const _0x991307=(this[_0x60324e(0x10a)][_0x60324e(0x12b)]||[])[_0x60324e(0x12d)](_0xe5deae=>_0xe5deae['id']===_0x3f1873);if(_0x991307){const _0x2f86c9=await recorder[_0x60324e(0x10b)](this,_0x3f1873,_0x2771aa,_0x991307);_0x2f86c9&&_0x2f86c9[_0x60324e(0x135)]===_0x60324e(0x152)&&_0x2f86c9[_0x60324e(0xbc)]&&this[_0x60324e(0x12c)]&&deadMan[_0x60324e(0xd6)](this,_0x2f86c9[_0x60324e(0xbc)]),_0x2771aa[_0x60324e(0x15e)]&&(_0x2771aa[_0x60324e(0x15e)]===!![]||_0x2771aa[_0x60324e(0x15e)]===0x1||String(_0x2771aa['val'])[_0x60324e(0x16b)]()===_0x60324e(0x16e))&&(_0x991307['type']&&(_0x991307[_0x60324e(0x135)][_0x60324e(0x12e)](_0x60324e(0xc7))||_0x991307[_0x60324e(0x135)]['includes']('door')||_0x991307[_0x60324e(0x135)][_0x60324e(0x12e)](_0x60324e(0x1c0)))&&this[_0x60324e(0x1cc)](_0x991307)),(_0x991307[_0x60324e(0x135)]===_0x60324e(0x89)||_0x991307['type']==='thermostat')&&automation[_0x60324e(0xbf)](this);}}async[a0_0x4c5b80(0xb2)](_0x4d7c88){const _0x2d7f25=a0_0x4c5b80;if(!this['memoryCache']||Date[_0x2d7f25(0x138)]()-this[_0x2d7f25(0xaa)]>0x493e0)return;if(!this[_0x2d7f25(0xd5)][_0x2d7f25(0x159)]||!this['memoryCache'][_0x2d7f25(0x19d)])return;try{const _0x35a97f=JSON[_0x2d7f25(0x199)](_0x4d7c88),_0x581c8e=this[_0x2d7f25(0xd5)]['sources'];let _0x58322e=![];for(const _0x1d030f in _0x581c8e){if(_0x581c8e[_0x1d030f][_0x2d7f25(0x12e)]('AI')&&_0x35a97f[_0x1d030f]&&!_0x35a97f[_0x1d030f][_0x2d7f25(0x12e)]('AI')){_0x58322e=!![];break;}}_0x58322e&&(this[_0x2d7f25(0x1a5)][_0x2d7f25(0x168)](_0x2d7f25(0xc0)),await this['setStateAsync'](_0x2d7f25(0x8f),{'val':JSON['stringify'](this['memoryCache'][_0x2d7f25(0x19d)]),'ack':!![]}),await this[_0x2d7f25(0x117)](_0x2d7f25(0x17f),{'val':JSON[_0x2d7f25(0x11b)](this[_0x2d7f25(0xd5)]['sources']),'ack':!![]}));}catch(_0x53a5cb){}}async['onMessage'](_0x4e5b5e){const _0x2c6b1c=a0_0x4c5b80;if(typeof _0x4e5b5e===_0x2c6b1c(0x18d)&&_0x4e5b5e[_0x2c6b1c(0x148)]){if(_0x4e5b5e[_0x2c6b1c(0xb3)]==='checkThermostats')try{const _0x250bfc=await automation['scanThermostats'](this);this[_0x2c6b1c(0xa0)](_0x4e5b5e[_0x2c6b1c(0xf2)],_0x4e5b5e[_0x2c6b1c(0xb3)],{'success':!![],'results':_0x250bfc},_0x4e5b5e[_0x2c6b1c(0x1b6)]);}catch(_0x3adb7e){this[_0x2c6b1c(0xa0)](_0x4e5b5e['from'],_0x4e5b5e[_0x2c6b1c(0xb3)],{'success':![],'error':_0x3adb7e['message']},_0x4e5b5e[_0x2c6b1c(0x1b6)]);}else{if(_0x4e5b5e[_0x2c6b1c(0xb3)]===_0x2c6b1c(0x16f))try{const {current_temps:_0x554247,t_out:_0x591592,targets:_0x312cc8,t_forecast:_0x4a898b}=_0x4e5b5e[_0x2c6b1c(0x148)],_0x5ecbc8=[];let _0x51f0e3={};try{const _0x912769=await this[_0x2c6b1c(0x9d)](_0x2c6b1c(0x1be));if(_0x912769&&_0x912769[_0x2c6b1c(0x15e)]){const _0x3606bf=JSON[_0x2c6b1c(0x199)](_0x912769[_0x2c6b1c(0x15e)]);_0x51f0e3=_0x3606bf[_0x2c6b1c(0x1c7)]||_0x3606bf;}}catch(_0x29da7b){}const _0x3bc637=_0x4a898b!==undefined&&_0x4a898b!==null?(_0x591592+_0x4a898b)/0x2:_0x591592;for(const [_0x5b45cf,_0x3bdf35]of Object[_0x2c6b1c(0xf9)](_0x554247)){const _0x3539a8=_0x312cc8[_0x5b45cf]||0x15;if(_0x3bdf35<=_0x3539a8)continue;let _0x32fdd5=_0x51f0e3[_0x5b45cf]||-0.5;if(_0x32fdd5>=0x0)_0x32fdd5=-0.5;const _0xe0166b=Math[_0x2c6b1c(0x114)](_0x32fdd5),_0x1cb5c8=_0x3bdf35-_0x3539a8;let _0x31e997=Math[_0x2c6b1c(0xa8)](_0x1cb5c8/_0xe0166b*0x3c);const _0x4c6846=_0x3bdf35-_0x591592,_0x20f71a=_0x3bdf35-_0x3bc637;if(_0x20f71a!==0x0&&_0x4c6846!==0x0){const _0x3a6370=_0x4c6846/_0x20f71a;_0x31e997=Math[_0x2c6b1c(0xa8)](_0x31e997*_0x3a6370);}if(_0x31e997>0xf){if(_0x31e997>0xf0)_0x31e997=0xf0;_0x5ecbc8['push']({'room':_0x5b45cf,'minutes_safe':_0x31e997,'target':_0x3539a8,'current':_0x3bdf35,'savings_msg':'Heizung\x20kann\x20'+_0x31e997+_0x2c6b1c(0x8d)});}}_0x5ecbc8[_0x2c6b1c(0x193)]((_0x480a67,_0xa495a5)=>_0xa495a5[_0x2c6b1c(0x90)]-_0x480a67[_0x2c6b1c(0x90)]),this[_0x2c6b1c(0xa0)](_0x4e5b5e[_0x2c6b1c(0xf2)],_0x4e5b5e['command'],{'success':!![],'proposals':_0x5ecbc8},_0x4e5b5e[_0x2c6b1c(0x1b6)]);}catch(_0x315b38){this[_0x2c6b1c(0xa0)](_0x4e5b5e['from'],_0x4e5b5e['command'],{'success':![],'error':_0x315b38[_0x2c6b1c(0x148)]},_0x4e5b5e[_0x2c6b1c(0x1b6)]);}else{if(_0x4e5b5e['command']===_0x2c6b1c(0x14e))try{const _0x54e768=_0x4e5b5e[_0x2c6b1c(0x148)]['key'],_0x1b8545='analysis.energy.rlPenalties',_0x28fefb=await this[_0x2c6b1c(0x9d)](_0x1b8545);let _0x5bffa5={};if(_0x28fefb&&_0x28fefb['val'])try{_0x5bffa5=JSON[_0x2c6b1c(0x199)](_0x28fefb[_0x2c6b1c(0x15e)]);}catch(_0x5081c5){}_0x54e768&&_0x5bffa5[_0x54e768]?(delete _0x5bffa5[_0x54e768],await this[_0x2c6b1c(0x117)](_0x1b8545,{'val':JSON[_0x2c6b1c(0x11b)](_0x5bffa5),'ack':!![]}),this['log']['info'](_0x2c6b1c(0x147)+_0x54e768+_0x2c6b1c(0x1ac)),this[_0x2c6b1c(0xa0)](_0x4e5b5e[_0x2c6b1c(0xf2)],_0x4e5b5e['command'],{'success':!![]},_0x4e5b5e['callback'])):this[_0x2c6b1c(0xa0)](_0x4e5b5e[_0x2c6b1c(0xf2)],_0x4e5b5e[_0x2c6b1c(0xb3)],{'success':![],'error':_0x2c6b1c(0x116)},_0x4e5b5e['callback']);}catch(_0x349291){this['sendTo'](_0x4e5b5e[_0x2c6b1c(0xf2)],_0x4e5b5e[_0x2c6b1c(0xb3)],{'success':![],'error':_0x349291['message']},_0x4e5b5e[_0x2c6b1c(0x1b6)]);}else{if(_0x4e5b5e[_0x2c6b1c(0xb3)]===_0x2c6b1c(0x142))await this['setStateAsync'](_0x2c6b1c(0x158),{'val':![],'ack':!![]}),await this['setStateAsync']('analysis.automation.description',{'val':'','ack':!![]}),await this[_0x2c6b1c(0x117)](_0x2c6b1c(0xf3),{'val':'','ack':!![]}),this[_0x2c6b1c(0xa0)](_0x4e5b5e[_0x2c6b1c(0xf2)],_0x4e5b5e[_0x2c6b1c(0xb3)],{'success':!![]},_0x4e5b5e[_0x2c6b1c(0x1b6)]);else{if(_0x4e5b5e[_0x2c6b1c(0xb3)]==='simulateButler'){const {targetId:_0x4e213d,targetValue:_0x58987e}=_0x4e5b5e[_0x2c6b1c(0x148)];await this[_0x2c6b1c(0x117)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await this[_0x2c6b1c(0x117)](_0x2c6b1c(0x1b4),{'val':_0x2c6b1c(0x14b),'ack':!![]}),await this[_0x2c6b1c(0x117)](_0x2c6b1c(0xf3),{'val':_0x4e213d,'ack':!![]}),await this[_0x2c6b1c(0x117)](_0x2c6b1c(0xeb),{'val':String(_0x58987e),'ack':!![]}),this[_0x2c6b1c(0xa0)](_0x4e5b5e[_0x2c6b1c(0xf2)],_0x4e5b5e[_0x2c6b1c(0xb3)],{'success':!![]},_0x4e5b5e[_0x2c6b1c(0x1b6)]);}else{if(_0x4e5b5e[_0x2c6b1c(0xb3)]===_0x2c6b1c(0x157))try{const _0x18fe78=_0x4e5b5e[_0x2c6b1c(0x148)][_0x2c6b1c(0xe2)];if(!_0x18fe78)throw new Error('Kein\x20API\x20Key\x20√ºbergeben');const _0x5bc719=new GoogleGenerativeAI(_0x18fe78),_0x1e57b9=_0x5bc719[_0x2c6b1c(0x10f)]({'model':GEMINI_MODEL}),_0x30a02b=await _0x1e57b9['generateContent'](_0x2c6b1c(0x174)),_0x339361=await _0x30a02b[_0x2c6b1c(0x18f)];if(_0x339361['text']())this['sendTo'](_0x4e5b5e[_0x2c6b1c(0xf2)],_0x4e5b5e[_0x2c6b1c(0xb3)],{'success':!![],'message':_0x2c6b1c(0xdd)},_0x4e5b5e['callback']);else throw new Error('Keine\x20Antwort\x20von\x20Gemini');}catch(_0x5b5288){this[_0x2c6b1c(0xa0)](_0x4e5b5e[_0x2c6b1c(0xf2)],_0x4e5b5e[_0x2c6b1c(0xb3)],{'success':![],'message':_0x5b5288[_0x2c6b1c(0x148)]},_0x4e5b5e['callback']);}else{if(_0x4e5b5e['command']==='scanDevices')try{const _0x466a21=await scanner[_0x2c6b1c(0x102)](this,_0x4e5b5e[_0x2c6b1c(0x148)]||{});this[_0x2c6b1c(0xa0)](_0x4e5b5e[_0x2c6b1c(0xf2)],_0x4e5b5e[_0x2c6b1c(0xb3)],{'success':!![],'devices':_0x466a21},_0x4e5b5e[_0x2c6b1c(0x1b6)]);}catch(_0x220de0){this[_0x2c6b1c(0xa0)](_0x4e5b5e[_0x2c6b1c(0xf2)],_0x4e5b5e[_0x2c6b1c(0xb3)],{'success':![],'error':_0x220de0[_0x2c6b1c(0x148)]},_0x4e5b5e['callback']);}else{if(_0x4e5b5e[_0x2c6b1c(0xb3)]===_0x2c6b1c(0x1cd))try{const {matrix:_0x1ae1fe}=_0x4e5b5e[_0x2c6b1c(0x148)],_0x5c685d=await this[_0x2c6b1c(0x9d)](_0x2c6b1c(0x17e));if(_0x5c685d&&_0x5c685d[_0x2c6b1c(0x15e)]){const _0x1b8386=JSON['parse'](_0x5c685d['val']);_0x1b8386[_0x2c6b1c(0x185)]=_0x1ae1fe,_0x1b8386['updated']=Date[_0x2c6b1c(0x138)](),await this[_0x2c6b1c(0x117)](_0x2c6b1c(0x17e),{'val':JSON[_0x2c6b1c(0x11b)](_0x1b8386),'ack':!![]}),pythonBridge[_0x2c6b1c(0x133)](this,_0x2c6b1c(0xdc),_0x1b8386);}this[_0x2c6b1c(0xa0)](_0x4e5b5e[_0x2c6b1c(0xf2)],_0x4e5b5e['command'],{'success':!![]},_0x4e5b5e[_0x2c6b1c(0x1b6)]);}catch(_0x290828){this['log'][_0x2c6b1c(0x183)](_0x290828);}else{if(_0x4e5b5e['command']===_0x2c6b1c(0x1d1))this[_0x2c6b1c(0xa0)](_0x4e5b5e['from'],_0x4e5b5e[_0x2c6b1c(0xb3)],{'success':!![],'dailyDigests':this[_0x2c6b1c(0x1c3)]||[],'analysisHistory':this[_0x2c6b1c(0x1bb)]||[]},_0x4e5b5e['callback']);else{if(_0x4e5b5e[_0x2c6b1c(0xb3)]===_0x2c6b1c(0x1d0)){const _0x317fbc=this[_0x2c6b1c(0x1c3)][_0x2c6b1c(0xb5)],_0x546e71=new Array(0x18)[_0x2c6b1c(0x195)](0x0),_0x457f84=new Date()[_0x2c6b1c(0x1d5)](0x0,0x0,0x0,0x0);this[_0x2c6b1c(0xfa)]&&this[_0x2c6b1c(0xfa)]['forEach'](_0x2df334=>{const _0x44fb9a=_0x2c6b1c;if(_0x2df334[_0x44fb9a(0x156)]>=_0x457f84){const _0x219871=new Date(_0x2df334[_0x44fb9a(0x156)])[_0x44fb9a(0x19e)]();if(_0x219871>=0x0&&_0x219871<0x18)_0x546e71[_0x219871]++;}});let _0x34d737=![],_0x4d78c1='',_0x123b9d='',_0x29dda9='';try{const _0x28730a=await this[_0x2c6b1c(0x9d)](_0x2c6b1c(0x158));if(_0x28730a&&_0x28730a['val']){_0x34d737=!![];const _0x641549=await this[_0x2c6b1c(0x9d)](_0x2c6b1c(0x1b4));_0x4d78c1=_0x641549?_0x641549[_0x2c6b1c(0x15e)]:'';const _0x306859=await this[_0x2c6b1c(0x9d)](_0x2c6b1c(0xf3));_0x123b9d=_0x306859?_0x306859['val']:'';const _0x300725=await this[_0x2c6b1c(0x9d)](_0x2c6b1c(0xeb));_0x29dda9=_0x300725?_0x300725[_0x2c6b1c(0x15e)]:'';}}catch(_0x3246a9){}const _0x32738d=await this[_0x2c6b1c(0x19b)](),_0x5af366=(this['config'][_0x2c6b1c(0x12b)]||[])[_0x2c6b1c(0x149)](_0x26e216=>_0x26e216[_0x2c6b1c(0xe5)]),_0x13ec0a=_0x32738d&&_0x5af366;let _0x589963='';try{const _0x16e5a3=await this[_0x2c6b1c(0x9d)](_0x2c6b1c(0x187));if(_0x16e5a3&&_0x16e5a3[_0x2c6b1c(0x15e)])_0x589963=_0x16e5a3[_0x2c6b1c(0x15e)];}catch(_0x12bf82){}this[_0x2c6b1c(0xa0)](_0x4e5b5e['from'],_0x4e5b5e['command'],{'success':!![],'eventHistory':this[_0x2c6b1c(0xfa)][_0x2c6b1c(0xd7)](0x0,0xf),'stats':{'digestCount':_0x317fbc,'isPresent':this[_0x2c6b1c(0x1a4)],'hourlyActivity':_0x546e71,'solarActive':_0x13ec0a,'presenceWho':_0x589963},'automation':{'detected':_0x34d737,'description':_0x4d78c1,'targetId':_0x123b9d,'targetValue':_0x29dda9}},_0x4e5b5e[_0x2c6b1c(0x1b6)]);}else{if(_0x4e5b5e['command']==='getEnums'){const _0x539529=await this['getForeignObjectsAsync']('enum.functions.*','enum'),_0x281bc7=[];if(_0x539529)for(const _0x47a847 in _0x539529){const _0xc7486a=_0x539529[_0x47a847],_0x355d79=(_0xc7486a[_0x2c6b1c(0x11f)]&&typeof _0xc7486a[_0x2c6b1c(0x11f)]['name']===_0x2c6b1c(0x18d)?_0xc7486a[_0x2c6b1c(0x11f)][_0x2c6b1c(0x1a8)]['de']:_0xc7486a[_0x2c6b1c(0x11f)][_0x2c6b1c(0x1a8)])||_0xc7486a[_0x2c6b1c(0x11f)][_0x2c6b1c(0x1a8)];_0x281bc7[_0x2c6b1c(0xae)]({'id':_0x47a847,'name':_0x355d79});}const _0x561e5a=await this[_0x2c6b1c(0xa6)](_0x2c6b1c(0x180),_0x2c6b1c(0x15c)),_0x9010c2=[];if(_0x561e5a)for(const _0x18f28a in _0x561e5a){const _0x10c217=_0x561e5a[_0x18f28a],_0x324bbd=(_0x10c217[_0x2c6b1c(0x11f)]&&typeof _0x10c217[_0x2c6b1c(0x11f)]['name']===_0x2c6b1c(0x18d)?_0x10c217[_0x2c6b1c(0x11f)][_0x2c6b1c(0x1a8)]['de']:_0x10c217['common'][_0x2c6b1c(0x1a8)])||_0x18f28a[_0x2c6b1c(0x18b)]('.')[_0x2c6b1c(0x178)]();_0x9010c2[_0x2c6b1c(0xae)](_0x324bbd);}this[_0x2c6b1c(0xa0)](_0x4e5b5e['from'],_0x4e5b5e['command'],{'success':!![],'enums':_0x281bc7,'rooms':_0x9010c2},_0x4e5b5e['callback']);}else{if(_0x4e5b5e[_0x2c6b1c(0xb3)]===_0x2c6b1c(0xb0))try{let _0x1b6434=_0x2c6b1c(0x1b0),_0x3e811b=_0x2c6b1c(0x13f);if(this[_0x2c6b1c(0x10a)][_0x2c6b1c(0x121)]){const _0x5dccce=await recorder[_0x2c6b1c(0x154)](this);_0x1b6434=_0x5dccce!==null?_0x5dccce+'¬∞C':_0x2c6b1c(0x109);}if(this[_0x2c6b1c(0x10a)][_0x2c6b1c(0x10d)]){const _0x503fdc=await this[_0x2c6b1c(0x99)](_0x2c6b1c(0x194)+this[_0x2c6b1c(0x10a)][_0x2c6b1c(0x10d)]);_0x3e811b=_0x503fdc?_0x2c6b1c(0x19c):'Instanz\x20nicht\x20gefunden';}this[_0x2c6b1c(0xa0)](_0x4e5b5e[_0x2c6b1c(0xf2)],_0x4e5b5e[_0x2c6b1c(0xb3)],{'success':!![],'weather':_0x1b6434,'calendar':_0x3e811b},_0x4e5b5e['callback']);}catch(_0x3b8749){this[_0x2c6b1c(0xa0)](_0x4e5b5e[_0x2c6b1c(0xf2)],_0x4e5b5e[_0x2c6b1c(0xb3)],{'success':![],'error':_0x3b8749['message']},_0x4e5b5e[_0x2c6b1c(0x1b6)]);}else{if(_0x4e5b5e[_0x2c6b1c(0xb3)]===_0x2c6b1c(0x111))try{const _0x4db8e3=_0x4e5b5e[_0x2c6b1c(0x148)][_0x2c6b1c(0x1c5)],_0x12287c=await this[_0x2c6b1c(0xd1)](_0x4db8e3+'.data.table');let _0x2a480a=[];if(_0x12287c&&_0x12287c[_0x2c6b1c(0x15e)]){const _0x202af1=JSON[_0x2c6b1c(0x199)](_0x12287c[_0x2c6b1c(0x15e)]),_0x5a1084=new Set();Array['isArray'](_0x202af1)&&_0x202af1[_0x2c6b1c(0xb4)](_0x52295a=>{const _0x48af07=_0x2c6b1c;if(_0x52295a[_0x48af07(0xff)])_0x5a1084[_0x48af07(0xbd)](_0x52295a[_0x48af07(0xff)]);else{if(_0x52295a[_0x48af07(0xbb)])_0x5a1084[_0x48af07(0xbd)](_0x52295a[_0x48af07(0xbb)]);}}),_0x2a480a=Array['from'](_0x5a1084)[_0x2c6b1c(0x193)]();}if(_0x2a480a[_0x2c6b1c(0xb5)]===0x0)_0x2a480a=['Standard'];this[_0x2c6b1c(0xa0)](_0x4e5b5e[_0x2c6b1c(0xf2)],_0x4e5b5e[_0x2c6b1c(0xb3)],{'success':!![],'names':_0x2a480a},_0x4e5b5e[_0x2c6b1c(0x1b6)]);}catch(_0x3df748){this['sendTo'](_0x4e5b5e[_0x2c6b1c(0xf2)],_0x4e5b5e[_0x2c6b1c(0xb3)],{'success':![],'error':_0x3df748['message']},_0x4e5b5e[_0x2c6b1c(0x1b6)]);}else{if(_0x4e5b5e[_0x2c6b1c(0xb3)]==='testNotification')try{await setup[_0x2c6b1c(0x124)](this,_0x2c6b1c(0x169),![],![]),this[_0x2c6b1c(0xa0)](_0x4e5b5e[_0x2c6b1c(0xf2)],_0x4e5b5e[_0x2c6b1c(0xb3)],{'success':!![],'message':_0x2c6b1c(0x145)},_0x4e5b5e['callback']);}catch(_0x394638){this['log'][_0x2c6b1c(0x183)](_0x2c6b1c(0x1ba)+_0x394638[_0x2c6b1c(0x148)]),this[_0x2c6b1c(0xa0)](_0x4e5b5e[_0x2c6b1c(0xf2)],_0x4e5b5e['command'],{'success':![],'message':_0x2c6b1c(0x108)+_0x394638[_0x2c6b1c(0x148)]},_0x4e5b5e[_0x2c6b1c(0x1b6)]);}}}}}}}}}}}}}}}}async[a0_0x4c5b80(0xe3)](){const _0x365340=a0_0x4c5b80;try{const _0x5f1b29=await this['getStateAsync'](setup['SYSTEM_DP_MODE']);_0x5f1b29&&_0x5f1b29[_0x365340(0x15e)]&&Object[_0x365340(0xa2)](setup[_0x365340(0x18e)])[_0x365340(0x12e)](_0x5f1b29[_0x365340(0x15e)])?this['currentSystemMode']=_0x5f1b29[_0x365340(0x15e)]:(this[_0x365340(0xd4)]=setup['SYSTEM_MODES'][_0x365340(0x189)],await this[_0x365340(0x117)](setup[_0x365340(0x172)],{'val':setup['SYSTEM_MODES'][_0x365340(0x189)],'ack':!![]}));}catch(_0x1bab96){this['currentSystemMode']=setup[_0x365340(0x18e)]['NORMAL'];}}async[a0_0x4c5b80(0xe6)](){const _0x30550d=a0_0x4c5b80;try{const _0xf927fb=this[_0x30550d(0x10a)][_0x30550d(0x192)]||[];let _0x24a77e=![];const _0x18da8a=[];for(const _0x537b89 of _0xf927fb){try{const _0x18cddf=await this[_0x30550d(0xd1)](_0x537b89);_0x18cddf&&(_0x18cddf['val']===!![]||_0x18cddf[_0x30550d(0x15e)]==='online'||_0x18cddf[_0x30550d(0x15e)]===0x1)&&(_0x24a77e=!![],_0x18da8a[_0x30550d(0xae)](_0x537b89));}catch(_0x91c3d3){}}return await this['setStateAsync'](_0x30550d(0x187),{'val':_0x18da8a[_0x30550d(0xce)](',\x20'),'ack':!![]}),_0x24a77e&&(this[_0x30550d(0x1d4)]&&(this[_0x30550d(0x1a5)][_0x30550d(0x168)]('WiFi\x20Presence\x20detected.'),recorder['abortExitTimer'](this)),!this['isPresent']&&this[_0x30550d(0xd4)]===setup[_0x30550d(0x18e)][_0x30550d(0x189)]&&await recorder[_0x30550d(0x162)](this,!![])),_0x24a77e;}catch(_0x150969){return![];}}async[a0_0x4c5b80(0xac)](){const _0x40db00=a0_0x4c5b80;this[_0x40db00(0x1a5)]['debug'](_0x40db00(0x175)),await aiAgent['runGeminiAnalysis'](this),this[_0x40db00(0xc2)](),this[_0x40db00(0x122)](),this[_0x40db00(0x1ca)]();}async[a0_0x4c5b80(0x19b)](){const _0x2587e8=a0_0x4c5b80,_0x1466fd=['weatherunderground.0','accuweather.0',_0x2587e8(0x128)],_0x2347e4=[_0x2587e8(0x123),_0x2587e8(0xe7),'NextHours.Location_1.Day_1.current.symbol_desc'];for(const _0x3a067d of _0x1466fd){for(const _0xfdb8a5 of _0x2347e4){try{const _0x2de699=_0x3a067d+'.'+_0xfdb8a5,_0x50f164=await this[_0x2587e8(0xd1)](_0x2de699);if(_0x50f164&&_0x50f164[_0x2587e8(0x15e)]){const _0x3d4453=String(_0x50f164[_0x2587e8(0x15e)])[_0x2587e8(0x16b)]();if(_0x3d4453[_0x2587e8(0x12e)](_0x2587e8(0x177))||_0x3d4453[_0x2587e8(0x12e)](_0x2587e8(0xd8))||_0x3d4453[_0x2587e8(0x12e)](_0x2587e8(0x18a))||_0x3d4453[_0x2587e8(0x12e)]('clear')||_0x3d4453['includes'](_0x2587e8(0x1cb)))return!![];}}catch(_0xedf035){}}}return![];}[a0_0x4c5b80(0x122)](){const _0x147ec9=a0_0x4c5b80;if(!this[_0x147ec9(0x12c)])return;try{this['getState'](_0x147ec9(0x92),(_0x5ae87d,_0x5ee600)=>{const _0x325942=_0x147ec9;_0x5ee600&&_0x5ee600['val']&&pythonBridge[_0x325942(0x133)](this,_0x325942(0xcf),{'sequences':JSON['parse'](_0x5ee600['val'])});});}catch(_0x410301){}}async[a0_0x4c5b80(0x1ca)](){const _0x32267c=a0_0x4c5b80;if(!this['isProVersion'])return;try{const _0x281f79=await recorder[_0x32267c(0x154)](this);if(_0x281f79===null)return;const _0x2bacf7={},_0x27a891={},_0x42d52f=this[_0x32267c(0x10a)]['devices']||[];for(const _0x549fee of _0x42d52f){if(_0x549fee[_0x32267c(0x135)]===_0x32267c(0x89)&&_0x549fee[_0x32267c(0xbc)]){const _0x4d71e4=this['sensorLastValues'][_0x549fee['id']];if(_0x4d71e4!==undefined)_0x2bacf7[_0x549fee[_0x32267c(0xbc)]]=_0x4d71e4;if(_0x549fee[_0x32267c(0xe5)])_0x27a891[_0x549fee['location']]=!![];}}const _0x3d67bf=await this[_0x32267c(0x19b)]();let _0x4b5fb6={};try{const _0x41c860=await this['getStateAsync'](_0x32267c(0xfe));if(_0x41c860&&_0x41c860[_0x32267c(0x15e)])_0x4b5fb6=JSON[_0x32267c(0x199)](_0x41c860[_0x32267c(0x15e)]);}catch(_0x3863ee){}Object[_0x32267c(0xb8)](_0x2bacf7)['length']>0x0&&(pythonBridge[_0x32267c(0x133)](this,_0x32267c(0xe0),{'current_temps':_0x2bacf7,'t_out':_0x281f79,'is_sunny':_0x3d67bf,'solar_flags':_0x27a891,'warmup_targets':_0x4b5fb6}),pythonBridge['send'](this,'OPTIMIZE_ENERGY',{'current_temps':_0x2bacf7,'t_out':_0x281f79,'targets':{}}));}catch(_0x305520){}}[a0_0x4c5b80(0xc2)](){const _0x5cf8d9=a0_0x4c5b80;if(!this[_0x5cf8d9(0x150)]||this[_0x5cf8d9(0x150)][_0x5cf8d9(0xb5)]===0x0)return;const _0x4c2eaf=new Array(0x60)[_0x5cf8d9(0x195)](0x0),_0x3c3a78=new Date()[_0x5cf8d9(0x1d5)](0x0,0x0,0x0,0x0);this['rawEventLog'][_0x5cf8d9(0xb4)](_0x421026=>{const _0x540f39=_0x5cf8d9,_0x44549b=new Date(_0x421026[_0x540f39(0x156)]);if(_0x44549b['getTime']()>=_0x3c3a78){const _0x36560b=_0x44549b[_0x540f39(0x19e)](),_0x15fdcc=_0x44549b[_0x540f39(0xfd)](),_0x5b28c0=_0x36560b*0x4+Math[_0x540f39(0xa8)](_0x15fdcc/0xf);if(_0x5b28c0>=0x0&&_0x5b28c0<0x60)_0x4c2eaf[_0x5b28c0]++;}}),this[_0x5cf8d9(0x117)](_0x5cf8d9(0x96),{'val':JSON['stringify'](_0x4c2eaf),'ack':!![]});}[a0_0x4c5b80(0x1c6)](){const _0x11a202=a0_0x4c5b80;if(!this['dailyDigests']||this[_0x11a202(0x1c3)][_0x11a202(0xb5)]<0x2)return;const _0x43751f=this[_0x11a202(0x1c3)][_0x11a202(0x9f)](_0x1f9229=>{const _0x284ee2=_0x11a202,_0x10a6e3=(_0x1f9229[_0x284ee2(0xc6)]||'')[_0x284ee2(0x16b)]();return ACTIVITY_LEVEL_MAP[_0x10a6e3]||0x32;});pythonBridge[_0x11a202(0x133)](this,'ANALYZE_TREND',{'values':_0x43751f,'tag':_0x11a202(0x191)});}async['handleInfrasound'](_0x576219){const _0x19f745=a0_0x4c5b80;if(_0x576219==null||typeof _0x576219!=='number')return;const _0x1cb7b9=Date['now']();this[_0x19f745(0x9e)][_0x19f745(0xae)]({'ts':_0x1cb7b9,'val':_0x576219}),this[_0x19f745(0x9e)]=this[_0x19f745(0x9e)][_0x19f745(0x104)](_0x320dc9=>_0x1cb7b9-_0x320dc9['ts']<0x1388);if(this[_0x19f745(0x160)])return;if(this['config'][_0x19f745(0x1a0)]){const _0x52831c=await this[_0x19f745(0xd1)](this[_0x19f745(0x10a)][_0x19f745(0x1a0)]);if(_0x52831c&&!_0x52831c[_0x19f745(0x15e)])return;}const _0x364385=this['config'][_0x19f745(0xa4)]||0.04;if(Math[_0x19f745(0x114)](_0x576219)>=_0x364385){this['log'][_0x19f745(0x126)]('[Infrasound]\x20üö®\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20'+_0x576219+_0x19f745(0x19a)+_0x364385+')'),await this[_0x19f745(0x117)](_0x19f745(0xd3),{'val':!![],'ack':!![]});const _0x4dafab=this[_0x19f745(0x1a4)];_0x4dafab?(this[_0x19f745(0x1a5)][_0x19f745(0x168)](_0x19f745(0x1a2)),this[_0x19f745(0xd0)](_0x576219,_0x19f745(0x8a))):(this[_0x19f745(0xd0)](_0x576219,_0x19f745(0x1a9)),this[_0x19f745(0x124)]('üö®\x20DRUCKWELLEN-ALARM!\x20St√§rke:\x20'+_0x576219+_0x19f745(0x1b3))),this[_0x19f745(0x160)]=!![],setTimeout(()=>{const _0x22fac0=_0x19f745;this[_0x22fac0(0x160)]=![];},0x2710);}}async[a0_0x4c5b80(0xd0)](_0x22291e,_0x158c24=a0_0x4c5b80(0x1a9)){const _0x5a5490=a0_0x4c5b80,_0x3b83df=Date[_0x5a5490(0x138)](),_0x34fea3=this[_0x5a5490(0x10a)][_0x5a5490(0x12b)]||[];setTimeout(async()=>{const _0x45380b=_0x5a5490;let _0x2ec918=null,_0x4d199c=_0x45380b(0xde);const _0x532443=[],_0x5b8533=_0x34fea3[_0x45380b(0x104)](_0x50006d=>_0x50006d['type']&&(_0x50006d[_0x45380b(0x135)]['includes']('window')||_0x50006d['type'][_0x45380b(0x12e)](_0x45380b(0x1d3))||_0x50006d['type'][_0x45380b(0x12e)](_0x45380b(0x1c0))||_0x50006d['type']['includes'](_0x45380b(0x1b5)))||_0x50006d[_0x45380b(0x155)]&&(_0x50006d[_0x45380b(0x155)]['includes']('sensor.window')||_0x50006d[_0x45380b(0x155)][_0x45380b(0x12e)]('sensor.door')));for(const _0x2de568 of _0x5b8533){try{const _0xdf05c8=await this['getForeignStateAsync'](_0x2de568['id']);if(_0xdf05c8){if(_0xdf05c8['ts']>=_0x3b83df-0x7d0){_0x2ec918=_0x2de568[_0x45380b(0x1a8)]||_0x2de568['id'],_0x4d199c=_0x45380b(0x112)+_0x2ec918;break;}}}catch(_0x123ce9){}}const _0x290ee3={'timestamp':_0x3b83df,'pressure':_0x22291e,'isMatch':!!_0x2ec918,'explanation':_0x4d199c,'type':_0x158c24};await this[_0x45380b(0x11e)](_0x290ee3),this['log']['info'](_0x45380b(0xf6)+(!!_0x2ec918?_0x45380b(0x140):_0x45380b(0x13a)));},0x1388);}async[a0_0x4c5b80(0x1cc)](_0x2e1acf){const _0xbd4149=a0_0x4c5b80,_0x41e14a=Date[_0xbd4149(0x138)](),_0x39d1a8=_0x2e1acf[_0xbd4149(0x1a8)]||_0x2e1acf['id'][_0xbd4149(0x18b)]('.')[_0xbd4149(0x178)]();let _0x2da2f9=0x0;setTimeout(async()=>{const _0x1d50d4=_0xbd4149;this[_0x1d50d4(0x9e)][_0x1d50d4(0xb4)](_0x496add=>{const _0x2bdc4f=_0x1d50d4;_0x496add['ts']>=_0x41e14a-0xfa0&&_0x496add['ts']<=_0x41e14a+0x3e8&&(Math[_0x2bdc4f(0x114)](_0x496add[_0x2bdc4f(0x15e)])>Math['abs'](_0x2da2f9)&&(_0x2da2f9=_0x496add[_0x2bdc4f(0x15e)]));});const _0x33b768=this[_0x1d50d4(0x10a)]['infrasoundThreshold']||0.04,_0x919e4b=Math['abs'](_0x2da2f9)>=_0x33b768,_0xa3d70c={'timestamp':_0x41e14a,'pressure':_0x2da2f9,'isMatch':_0x919e4b,'explanation':_0x1d50d4(0x196)+_0x39d1a8,'type':_0x1d50d4(0x197)};await this[_0x1d50d4(0x11e)](_0xa3d70c),this[_0x1d50d4(0x1a5)][_0x1d50d4(0x16a)]('[Calibration]\x20Window\x20'+_0x39d1a8+'\x20opened.\x20Peak\x20Pressure:\x20'+_0x2da2f9['toFixed'](0x4)+_0x1d50d4(0x188)+_0x33b768+')');},0x1f4);}async['appendToLog'](_0x127409){const _0x262345=a0_0x4c5b80;try{const _0x4c0353=await this['getStateAsync'](_0x262345(0x1a7));let _0x23d840=[];if(_0x4c0353&&_0x4c0353[_0x262345(0x15e)])_0x23d840=JSON[_0x262345(0x199)](_0x4c0353[_0x262345(0x15e)]);_0x23d840[_0x262345(0x1bc)](_0x127409);if(_0x23d840[_0x262345(0xb5)]>0x14)_0x23d840=_0x23d840['slice'](0x0,0x14);await this[_0x262345(0x117)](_0x262345(0x1a7),{'val':JSON[_0x262345(0x11b)](_0x23d840),'ack':!![]});}catch(_0x5b98af){this[_0x262345(0x1a5)]['error']('[Forensics]\x20Save\x20failed:\x20'+_0x5b98af[_0x262345(0x148)]);}}[a0_0x4c5b80(0x124)](_0x219930){const _0x3c7005=a0_0x4c5b80;this['config'][_0x3c7005(0x1c8)]&&this[_0x3c7005(0x10a)][_0x3c7005(0x14c)]&&this[_0x3c7005(0xa0)](this[_0x3c7005(0x10a)]['notifyPushoverInstance'],_0x3c7005(0x133),{'message':_0x219930,'title':_0x3c7005(0x129),'priority':0x1}),this[_0x3c7005(0x10a)][_0x3c7005(0x166)]&&this[_0x3c7005(0x10a)][_0x3c7005(0x9c)]&&this['sendTo'](this[_0x3c7005(0x10a)][_0x3c7005(0x9c)],_0x3c7005(0x133),{'text':_0x219930});}}if(require[a0_0x4c5b80(0x118)]!==module)module[a0_0x4c5b80(0x9b)]=_0x246ae4=>new CogniLiving(_0x246ae4);else new CogniLiving();function a0_0x2470(_0x869cbc,_0x2b4157){const _0xdc507a=a0_0x4e91();return a0_0x2470=function(_0x26312e,_0xb8d5c1){_0x26312e=_0x26312e-0x89;let _0x4e917e=_0xdc507a[_0x26312e];return _0x4e917e;},a0_0x2470(_0x869cbc,_0x2b4157);}function a0_0x4e91(){const _0x4b866c=['abs','analysisTimer','Key\x20not\x20found\x20or\x20not\x20provided','setStateAsync','main','handleInfrasound','@google/generative-ai','stringify','./lib/automation','createDailyDigest','appendToLog','common','setObjectNotExistsAsync','useWeather','triggerGaitAnalysis','forecast.current.weather','sendNotification','113388mnhnjI','warn','Warm-Up\x20Target\x20Temps\x20(JSON)','daswetter.0','Nuukanni\x20Security','analysis.energy.ventilationAlerts','devices','isProVersion','find','includes','driftAnalysisTimer','apply','infrasoundSensorId','ltmJob','send','LTM.trainingData.thermodynamics','type','telegram','string','now','version','ANOMALY\x20(Real\x20Threat?)','exitGraceTimer','SET_LEARNING_MODE','analysis.automation.triggerAction','json','Kein\x20Kalender-Adapter','MATCH\x20(False\x20Positive)','LTM.rawEventLog','dismissAutomation','Active\x20Ventilation\x20Alerts','53424GwncJD','Gesendet','Graph-Brain\x20Train\x20Error:\x20','üéì\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20f√ºr\x20\x27','message','some','TRAIN_TOPOLOGY','Simulation\x20durch\x20Admin\x20(Test)','notifyPushoverInstance','Adapter','resetRLPenalty','geminiApiKey','rawEventLog','LTM.triggerDailyDigest','motion','‚ù§Ô∏è\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...','getOutsideTemperatureNumeric','role','timestamp','testApiKey','analysis.automation.patternDetected','sources','runBaselineDriftAnalysis','PINN\x20AI\x20Forecast','enum','TRAIN_COMFORT','val','subscribeStates','infrasoundLocked','manual','setPresence','startSystem','analysis.energy.rlPenalties','subscribeForeignStatesAsync','notifyTelegramEnabled','./lib/setup','info','üîî\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','debug','toLowerCase','onUnload','stateChange','open','simulateEnergyMPC','486990MHDDHZ','./lib/topology','SYSTEM_DP_MODE','communicate.request','Test','ü§ñ\x20Autopilot:\x20Running\x20periodic\x20analysis...','bind','sonn','pop','cogni-living\x20adapter\x20starting\x20(v','onStateChange','Forensic\x20Infrasound\x20Log','genAI','Sensors\x20used\x20for\x20Gait\x20Analysis','analysis.topology.structure','analysis.energy.warmupSources','enum.rooms.*','toString','4831130rCocKu','error','üß†\x20Memory:\x20Cache\x20hydrated\x20with\x20','matrix','analysis.energy.pinnForecast','system.presenceWho','\x20hPa\x20(Threshold:\x20','NORMAL','klar','split','cancel','object','SYSTEM_MODES','response','inactivityThresholdHours','Activity-Level','presenceDevices','sort','system.adapter.','fill','Fenster\x20ge√∂ffnet:\x20','CALIB','number','parse','\x20hPa\x20(Limit:\x20','checkSolarCondition','Verbunden','times','getHours','systemConfig','infrasoundArmingId','analysis.health.activityTrend','[Infrasound]\x20üü°\x20Debug-Mode:\x20Alarm\x20detected\x20but\x20suppressed\x20because\x20presence=true.','1475clYybb','isPresent','log','6ktoDpn','analysis.security.infrasoundLog','name','ALARM','dependencyInstallInProgress','analysis.training.triggerComfort','\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gel√∂scht.','checkAndInstall','infrasoundEnabled','./lib/scheduler','Kein\x20Wetter-Adapter','briefingJob','modeResetJob','\x20hPa.\x20Einbruch\x20wahrscheinlich.','analysis.automation.description','reed','callback','value','651176TaCrVQ','LTM.dailyDigests','Notification\x20Test\x20Failed:\x20','analysisHistory','unshift','ready','analysis.energy.insulationScore','.system.mode','magnet','./lib/recorder','minDaysForBaseline','dailyDigests','analysis.training.triggerTopology','instance','runPythonHealthCheck','scores','notifyPushoverEnabled','trackerEnabled','triggerEnergyPrediction','heiter','analyzeWindowOpening','updateTopologyMatrix','analysis.training.triggerHealth','PYTHON_EXE','getOverviewData','getLtmData','./lib/ai_agent','door','exitTimer','setHours','temperature','INTERNAL','General\x20Activity\x20Trend\x20(%)','text','\x20min\x20ausbleiben.','Lernphase\x20(','analysis.energy.warmupTimes','minutes_safe','Gemini\x20AI\x20initialized.','LTM.trainingData.sequences','ack','setupLtmScheduler','Party\x20Mode','analysis.health.todayVector',')\x20-\x20Phase\x20D\x20(Forensic\x20Calibration)','analysis.training.triggerSecurity','getForeignObjectAsync','analysis.training.triggerEnergy','exports','notifyTelegramInstance','getStateAsync','pressureBuffer','map','sendTo','healthTrendInterval','values','(((.+)+)+)+$','infrasoundThreshold','@iobroker/adapter-core','getForeignObjectsAsync','updateTopology','floor','abortExitTimer','bootTime','application/json','runAutopilot','\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).','push','sensorLastValues','testContext','[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20','protectAiMemory','command','forEach','length','3666523qSPAcs','guest','keys','setupBriefingScheduler','stopService','calendarName','location','add','trackerHeartbeat','cleanupGhostInterventions','üß†\x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).','Reinforcement\x20Learning\x20Penalties','updateHealthVector','triggerDailyDigest','setupModeResetScheduler','./lib/installer','activityLevel','window','analysis.security.learningStatus','triggerBriefing','endsWith','analysis.training.status','Guest\x20Mode','analysisInterval','join','ANALYZE_GAIT','triggerInfrasoundCorrelation','getForeignStateAsync','executeAutomationAction','security.alarm_triggered','currentSystemMode','memoryCache','updateLocation','slice','sunny','createAllObjects','3052Diiyby','monitorEnforcements','SET_TOPOLOGY','Verbindung\x20erfolgreich!','Keine\x20Sensor-Aktivit√§t','Gait\x20Speed\x20Calculation\x20Proof','PREDICT_ENERGY','setState','apiKey','loadSystemMode','checkCalendarTriggers','isSolar','checkWifiPresence','Current.WeatherText','./lib/python_bridge','analysis.health.gaitSensors','geminiModel','analysis.automation.targetValue','licenseKey','system.mode','analysis.automation.autoApply','\x20Tage)','analysis.energy.activeEnforcements','LTM.baselineStatus','from','analysis.automation.targetId','sendMorningBriefing','88JcvuMm','[Forensics]\x20Infrasound\x20Event\x20correlated:\x20','‚ö†Ô∏è\x20Graph-Brain:\x20No\x20training\x20sequences\x20found\x20in\x20LTM.','VACATION','entries','eventHistory','initSystemConfig','state','getMinutes','analysis.energy.warmupTargets','_calName','Sec-Training\x20started...','initHistory','scanForDevices','Memory\x20Hydration\x20Failed:\x20','filter','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','lastTrackerEventTime','cogni-living','Fehler:\x20','Daten\x20nicht\x20verf√ºgbar','config','processSensorEvent','\x20sequences...','calendarInstance','checkLicense','getGenerativeModel','party','getCalendarNames','Erkl√§rt\x20durch:\x20','constructor'];a0_0x4e91=function(){return _0x4b866c;};return a0_0x4e91();}