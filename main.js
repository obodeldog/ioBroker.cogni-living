const a0_0x1e0de3=a0_0x46bb;(function(_0x42e5f7,_0x169d28){const _0x563e9b=a0_0x46bb,_0x5bc0ed=_0x42e5f7();while(!![]){try{const _0x3e3f1f=parseInt(_0x563e9b(0x15e))/0x1+-parseInt(_0x563e9b(0x1a8))/0x2*(-parseInt(_0x563e9b(0x1be))/0x3)+-parseInt(_0x563e9b(0xe6))/0x4*(parseInt(_0x563e9b(0x1b8))/0x5)+parseInt(_0x563e9b(0xf8))/0x6*(parseInt(_0x563e9b(0x1c3))/0x7)+parseInt(_0x563e9b(0x1ac))/0x8*(parseInt(_0x563e9b(0x14c))/0x9)+-parseInt(_0x563e9b(0xbc))/0xa*(-parseInt(_0x563e9b(0xe3))/0xb)+-parseInt(_0x563e9b(0xcd))/0xc*(parseInt(_0x563e9b(0x17b))/0xd);if(_0x3e3f1f===_0x169d28)break;else _0x5bc0ed['push'](_0x5bc0ed['shift']());}catch(_0x5e595a){_0x5bc0ed['push'](_0x5bc0ed['shift']());}}}(a0_0xcacd,0xea666));const a0_0x1d3ad6=(function(){let _0x57d418=!![];return function(_0x5c94e4,_0x45985e){const _0x4abd47=_0x57d418?function(){const _0x2f12cd=a0_0x46bb;if(_0x45985e){const _0x2563e0=_0x45985e[_0x2f12cd(0x114)](_0x5c94e4,arguments);return _0x45985e=null,_0x2563e0;}}:function(){};return _0x57d418=![],_0x4abd47;};}()),a0_0x320c07=a0_0x1d3ad6(this,function(){const _0x215c00=a0_0x46bb;return a0_0x320c07['toString']()[_0x215c00(0x1e7)](_0x215c00(0x180))[_0x215c00(0x14f)]()[_0x215c00(0x10e)](a0_0x320c07)[_0x215c00(0x1e7)](_0x215c00(0x180));});a0_0x320c07();function a0_0xcacd(){const _0x3b6a6b=['CALCULATE_HEALTH_TREND','apiKey','handleInfrasound','testApiKey','LTM.rawEventLog','12ssBcct','name','currentSystemMode','...','checkCalendarTriggers','LTM.trainingData.sequences','checkLicense','health','forEach','main','appendToLog','Standard','SET_LEARNING_MODE','some','Unknown','‚úÖ\x20Dashboard\x20Data\x20(Rooms\x20&\x20Timeline\x20&\x20Details)\x20restored.','./lib/scanner','system.adapter.ical.È¶ô','analysis.training.triggerComfort','initHistory','onMessage','analysisTimer','1408HJtrfy','onUnload','eventHistory','44sRrJJL','application/json','History\x20Save\x20Error:\x20','getHistoryData','automation.triggerAction','sensorLastValues','writeFileSync','@google/generative-ai','substring','analysis.prediction.trackerTopRoom','info','licenseKey','config','‚ö†\x20Replay\x20skipped:\x20No\x20events\x20in\x20memory.','‚Ü∫\x20Replaying\x20','outdoorSensorId','healthTrendInterval','analysis.activity.roomHistory','1169058aBzvBK','DAY','moduleHealth','getCalendarNames','analysis.automation.targetValue','modeResetJob','updateLocation','moduleEnergy','analyzeWindowOpening','TRAIN_HEALTH','systemConfig','enum','VACATION',')\x20-\x20Phase\x20E\x20(Scheduler\x20Fix)','TRAIN_TOPOLOGY','ack','abortExitTimer','./lib/ai_agent','setObjectNotExistsAsync','message','getAbsoluteDefaultDataDir','window','constructor','NIGHT','getEnums','object','values','max','apply','getObjectViewAsync','analysisHistory','analysis.training.triggerSecurity','dependencyInstallInProgress','scheduleJob','getOverviewData','getHours',',\x20Temp:\x20','manual','getForeignStateAsync','enum.rooms.*','onStateChange','updateHealthVector','devices','reduce','filter','LTM.triggerDailyDigest','history','readFileSync','unload','Warte\x20auf\x20Analyse...','analysis.activity.roomStats','saveDailyHistory','error','sendNotification','generateHealthReport','\x22history\x22:{}','.json','loadSystemMode','moduleSecurity','thermostat','round','string','date','Sec-Training\x20started...','activeModules','enum.functions.*','\x20Kalender-Adapter\x20gefunden.','exitTimer','TRAIN_SECURITY','rows','setState','geminiApiKey','isPresent','analysis.health.todayVector','üêç\x20Triggering\x20Python\x20Health\x20Check\x20(Activity\x20Trend)...','toLocaleDateString','Corrupt','executeAutomationAction','.venv','val','Gemini\x20Init\x20Error:\x20','existsSync','isProVersion','./lib/installer','9oLNBIy','length','todayVector','toString','runAutopilot','sources','isGracePeriodActive','find','LTM.dailyDigests','triggerEnergyPrediction','./lib/scheduler','triggerDailyDigest','analysis.training.status','cogni-living\x20adapter\x20starting\x20(v','triggerGaitAnalysis','SYSTEM_MODES','setDate','Say\x20Hello','630456UniZDp','integrateRoomTime','path','analysis.security.lastScore','cleanupGhostInterventions','Room\x20Dwell\x20Time\x20Stats','cogni-living','runPythonHealthCheck','state','log','analysis.visualization.pulse','door','./lib/python_bridge','Party\x20Mode','stringify','Gemini\x20Report\x20Night','analysis.training.triggerEnergy','open','LTM.baselineStatus','times','subscribeStates','triggerBriefing','ready','fill','minDaysForBaseline','Failed\x20to\x20trigger\x20Python\x20Health\x20Check','analysis.trigger','Keine\x20Daten','send','38220598dwRkJU','runGeminiAnalysis','modules','lastAlertState','analysis.security.learningStatus','(((.+)+)+)+$','python','type','system.adapter.','processSensorEvent','Room\x20History\x20(24h\x20Buckets)','üíæ\x20Saving\x20Daily\x20History\x20for\x20','utf8','inactivityThresholdHours','protectAiMemory','text','haust√ºr','initSchedules','analysis.health.activityTrend','analysis.energy.warmupSources','location','temperature','dailyDigests','analysis.automation.targetId','models/gemini-flash-latest','json','./lib/topology','scanThermostats','.data.table','trackerHeartbeat','lastTrackerEventTime','checkThermostats','createDailyDigest','Daily\x20Room\x20Details\x20(48x30min)','comfort','communicate.request','getStateAsync','analysis.automation.patternDetected','calendarName','party','briefingJob','analysis.health.geminiNight','\x20events\x20from\x20standard\x20storage.','setHours','common','957318qOSQxw','infrasoundEnabled','{\x22history\x22:{}}','replayTodayEvents','11944304BjAFGk','Lernphase\x20(','infrasoundLocked','TRAIN_COMFORT','min','exitGraceTimer','roomIntegratorTimer','.system.mode','node-schedule','instance','endsWith','rawEventLog','23300nZYGGX','checkSolarCondition','updateTopology','infrasoundSensorId','split','getMinutes','3LKMuvd','NORMAL','setPresence','add','toISOString','35CEQtvf','from','üì¶\x20Restored\x20','memoryCache','warn','motion','genAI','debug','analysis.health.todayRoomDetails','Guest\x20Mode','refreshCalendar\x20failed:\x20','analysis.training.triggerTopology','Verbindung\x20erfolgreich:\x20','toLowerCase','parse','sendTo','pressureBuffer','energy','bind','analysis.energy.warmupTimes','testContext','then','Warm-Up\x20Time','stopService','geminiModel','historyJob','moduleComfort','events.history','includes','\x20Tage)','scanDevices','push','startService','59\x2023\x20*\x20*\x20*','[Integrator]\x20Error:\x20','security','search','command','system','getDate','TRAIN_ENERGY','analysis.automation.description','telegram','cancel','value','terrasse','29300LmalAb','timestamp','join','version','callback','refreshCalendar','mkdirSync','setStateAsync','Adapter','./lib/dead_man','now','exports'];a0_0xcacd=function(){return _0x3b6a6b;};return a0_0xcacd();}'use strict';function a0_0x46bb(_0x20fa5a,_0x1942cf){const _0x4d37ff=a0_0xcacd();return a0_0x46bb=function(_0x320c07,_0x1d3ad6){_0x320c07=_0x320c07-0xb6;let _0xcacdcb=_0x4d37ff[_0x320c07];return _0xcacdcb;},a0_0x46bb(_0x20fa5a,_0x1942cf);}const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x1e0de3(0xed)),path=require(a0_0x1e0de3(0x160)),fs=require('fs'),installer=require(a0_0x1e0de3(0x14b)),scanner=require(a0_0x1e0de3(0xdd)),schedulers=require(a0_0x1e0de3(0x156)),topology=require(a0_0x1e0de3(0x195)),setup=require('./lib/setup'),recorder=require('./lib/recorder'),pythonBridge=require(a0_0x1e0de3(0x16a)),aiAgent=require(a0_0x1e0de3(0x109)),deadMan=require(a0_0x1e0de3(0xc5)),automation=require('./lib/automation'),GEMINI_MODEL=a0_0x1e0de3(0x193);class CogniLiving extends utils[a0_0x1e0de3(0xc4)]{constructor(_0x4a585f){const _0x3c8611=a0_0x1e0de3;super({..._0x4a585f,'name':_0x3c8611(0x164)}),this['eventHistory']=[],this[_0x3c8611(0x116)]=[],this[_0x3c8611(0x1b7)]=[],this['dailyDigests']=[],this[_0x3c8611(0xeb)]={},this[_0x3c8611(0x102)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x3c8611(0x140)]=!![],this[_0x3c8611(0x13b)]=null,this[_0x3c8611(0x1b1)]=null,this[_0x3c8611(0x152)]=![],this[_0x3c8611(0x1c9)]=null,this[_0x3c8611(0x1db)]=null,this[_0x3c8611(0xcf)]=setup[_0x3c8611(0x15b)]['NORMAL'],this[_0x3c8611(0x14a)]=![],this[_0x3c8611(0x17e)]=![],this[_0x3c8611(0xe2)]=null,this['ltmJob']=null,this[_0x3c8611(0xfd)]=null,this['driftAnalysisTimer']=null,this[_0x3c8611(0x1a3)]=null,this[_0x3c8611(0x1dc)]=null,this[_0x3c8611(0x198)]=null,this['healthTrendInterval']=null,this[_0x3c8611(0x1b2)]=null,this['dependencyInstallInProgress']=![],this[_0x3c8611(0x199)]=Date['now'](),this['memoryCache']=null,this['bootTime']=Date['now'](),this[_0x3c8611(0x1ae)]=![],this[_0x3c8611(0x1d3)]=[],this[_0x3c8611(0x138)]={'health':!![],'security':!![],'energy':!![],'comfort':!![]},this['on'](_0x3c8611(0x174),this['onReady']['bind'](this)),this['on']('stateChange',this[_0x3c8611(0x120)][_0x3c8611(0x1d5)](this)),this['on'](_0x3c8611(0x128),this[_0x3c8611(0xe4)][_0x3c8611(0x1d5)](this)),this['on']('message',this['onMessage'][_0x3c8611(0x1d5)](this));}async['onReady'](){const _0x4f4168=a0_0x1e0de3;this[_0x4f4168(0x167)][_0x4f4168(0xf0)](_0x4f4168(0x159)+this[_0x4f4168(0xbf)]+_0x4f4168(0x105));if(this[_0x4f4168(0xf2)]['moduleHealth']!==undefined)this['activeModules'][_0x4f4168(0xd4)]=this[_0x4f4168(0xf2)][_0x4f4168(0xfa)];if(this[_0x4f4168(0xf2)][_0x4f4168(0x132)]!==undefined)this[_0x4f4168(0x138)][_0x4f4168(0x1e6)]=this[_0x4f4168(0xf2)]['moduleSecurity'];if(this[_0x4f4168(0xf2)][_0x4f4168(0xff)]!==undefined)this['activeModules'][_0x4f4168(0x1d4)]=this[_0x4f4168(0xf2)][_0x4f4168(0xff)];if(this[_0x4f4168(0xf2)][_0x4f4168(0x1dd)]!==undefined)this[_0x4f4168(0x138)][_0x4f4168(0x19d)]=this[_0x4f4168(0xf2)]['moduleComfort'];if(this[_0x4f4168(0xf2)][_0x4f4168(0x17d)])this[_0x4f4168(0x138)]={...this[_0x4f4168(0x138)],...this[_0x4f4168(0xf2)]['modules']};this['startSystem']();}async['startSystem'](){const _0x1cd87b=a0_0x1e0de3;await setup['initZombies'](this);try{this[_0x1cd87b(0x14a)]=await setup[_0x1cd87b(0xd3)](this[_0x1cd87b(0xf2)][_0x1cd87b(0xf1)]);}catch(_0x514082){}if(!this['config'][_0x1cd87b(0x188)]||this[_0x1cd87b(0xf2)][_0x1cd87b(0x188)]<0.1)this[_0x1cd87b(0xf2)][_0x1cd87b(0x188)]=0xc;await setup[_0x1cd87b(0xe0)](this),await setup['initSystemConfig'](this);try{const _0x541e27=await this[_0x1cd87b(0x19f)](_0x1cd87b(0x1d6)),_0x2a765e=await this[_0x1cd87b(0x19f)]('analysis.energy.warmupSources');_0x541e27&&_0x541e27[_0x1cd87b(0x147)]&&_0x2a765e&&_0x2a765e[_0x1cd87b(0x147)]&&(Date[_0x1cd87b(0xc6)]()-_0x541e27['ts']<0x4*0xe10*0x3e8&&(this[_0x1cd87b(0x1c6)]={'times':JSON['parse'](_0x541e27[_0x1cd87b(0x147)]),'sources':JSON['parse'](_0x2a765e[_0x1cd87b(0x147)])}));}catch(_0x230724){}if(this[_0x1cd87b(0xf2)][_0x1cd87b(0x13f)])try{this[_0x1cd87b(0x1c9)]=new GoogleGenerativeAI(this[_0x1cd87b(0xf2)][_0x1cd87b(0x13f)]),this[_0x1cd87b(0x1db)]=this[_0x1cd87b(0x1c9)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x1cd87b(0xe7)}});}catch(_0x17cead){this[_0x1cd87b(0x167)][_0x1cd87b(0x12c)](_0x1cd87b(0x148)+_0x17cead[_0x1cd87b(0x10b)]);}await setup['createAllObjects'](this),await this['loadSystemMode'](),schedulers[_0x1cd87b(0x18c)](this),await this[_0x1cd87b(0x10a)]('analysis.visualization.pulse',{'type':_0x1cd87b(0x166),'common':{'name':'Live\x20Event\x20Pulse','type':'number','role':_0x1cd87b(0xba),'read':!![],'write':![]},'native':{}}),await this[_0x1cd87b(0x10a)](_0x1cd87b(0x12a),{'type':_0x1cd87b(0x166),'common':{'name':_0x1cd87b(0x163),'type':'string','role':'json','read':!![],'write':![],'def':'{\x22today\x22:{},\x20\x22yesterday\x22:{},\x20\x22date\x22:\x22\x22}'},'native':{}}),await this[_0x1cd87b(0x10a)](_0x1cd87b(0xf7),{'type':_0x1cd87b(0x166),'common':{'name':_0x1cd87b(0x185),'type':'string','role':'json','read':!![],'write':![],'def':_0x1cd87b(0x1aa)},'native':{}}),await this[_0x1cd87b(0x10a)](_0x1cd87b(0x1a4),{'type':_0x1cd87b(0x166),'common':{'name':_0x1cd87b(0x16d),'type':_0x1cd87b(0x135),'role':_0x1cd87b(0x18a),'read':!![],'write':![],'def':_0x1cd87b(0x129)},'native':{}}),await this['setObjectNotExistsAsync']('analysis.health.geminiDay',{'type':_0x1cd87b(0x166),'common':{'name':'Gemini\x20Report\x20Day','type':_0x1cd87b(0x135),'role':'text','read':!![],'write':![],'def':'Warte\x20auf\x20Analyse...'},'native':{}}),await this[_0x1cd87b(0x10a)](_0x1cd87b(0x141),{'type':_0x1cd87b(0x166),'common':{'name':'Daily\x20Activity\x20Vector\x20(48x30min)','type':_0x1cd87b(0x135),'role':_0x1cd87b(0x194),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x1cd87b(0x10a)](_0x1cd87b(0x1cb),{'type':_0x1cd87b(0x166),'common':{'name':_0x1cd87b(0x19c),'type':_0x1cd87b(0x135),'role':_0x1cd87b(0x194),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x1cd87b(0x10a)](_0x1cd87b(0x18d),{'type':'state','common':{'name':'General\x20Activity\x20Trend','type':'number','role':_0x1cd87b(0xba),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x1cd87b(0x10a)]('analysis.energy.warmupTimes',{'type':'state','common':{'name':_0x1cd87b(0x1d9),'type':'string','role':_0x1cd87b(0x194),'read':!![],'write':![]},'native':{}});try{const _0x3b8aa4=await this[_0x1cd87b(0x19f)](_0x1cd87b(0x1de));if(_0x3b8aa4&&_0x3b8aa4[_0x1cd87b(0x147)]){this[_0x1cd87b(0xe5)]=JSON[_0x1cd87b(0x1d1)](_0x3b8aa4[_0x1cd87b(0x147)]);if(this[_0x1cd87b(0x14a)]){const _0x445b8c=await this['getStateAsync'](_0x1cd87b(0xcc));if(_0x445b8c&&_0x445b8c[_0x1cd87b(0x147)])this['rawEventLog']=JSON[_0x1cd87b(0x1d1)](_0x445b8c['val']);}this['log'][_0x1cd87b(0xf0)](_0x1cd87b(0x1c5)+this[_0x1cd87b(0xe5)][_0x1cd87b(0x14d)]+_0x1cd87b(0x1a5));}}catch(_0x20dfbc){this[_0x1cd87b(0xe5)]=[];}try{const _0x2f6926=await this[_0x1cd87b(0x19f)](_0x1cd87b(0x154));if(_0x2f6926&&_0x2f6926['val'])this[_0x1cd87b(0x191)]=JSON[_0x1cd87b(0x1d1)](_0x2f6926[_0x1cd87b(0x147)]);}catch(_0x4d697e){this[_0x1cd87b(0x191)]=[];}const _0x2c9036=this[_0x1cd87b(0x191)]['length']>=(this[_0x1cd87b(0xf2)][_0x1cd87b(0x176)]||0x7)?'Aktiv\x20('+this[_0x1cd87b(0x191)][_0x1cd87b(0x14d)]+_0x1cd87b(0x1e0):_0x1cd87b(0x1ad)+this[_0x1cd87b(0x191)]['length']+'/'+(this[_0x1cd87b(0xf2)][_0x1cd87b(0x176)]||0x7)+')';await this[_0x1cd87b(0xc3)](_0x1cd87b(0x170),{'val':_0x2c9036,'ack':!![]}),this[_0x1cd87b(0x172)](_0x1cd87b(0x178)),this['subscribeStates'](_0x1cd87b(0x125)),this[_0x1cd87b(0x172)]('analysis.training.triggerHealth');this[_0x1cd87b(0xf2)][_0x1cd87b(0x1a9)]&&this[_0x1cd87b(0xf2)][_0x1cd87b(0x1bb)]&&this[_0x1cd87b(0x138)][_0x1cd87b(0x1e6)]&&this['subscribeForeignStates'](this[_0x1cd87b(0xf2)][_0x1cd87b(0x1bb)]);const _0x18e11f=this[_0x1cd87b(0xf2)][_0x1cd87b(0x122)];if(_0x18e11f)for(const _0x3e99f8 of _0x18e11f){await this['subscribeForeignStatesAsync'](_0x3e99f8['id']);}const _0x2892fb=this[_0x1cd87b(0xf2)]['presenceDevices'];if(_0x2892fb)for(const _0xb16e9d of _0x2892fb){await this['subscribeForeignStatesAsync'](_0xb16e9d);}const _0x440e73=require(_0x1cd87b(0x1b4));if(this[_0x1cd87b(0x1dc)])this[_0x1cd87b(0x1dc)][_0x1cd87b(0xb9)]();this['historyJob']=_0x440e73[_0x1cd87b(0x119)](_0x1cd87b(0x1e4),()=>{this['saveDailyHistory']();}),setTimeout(()=>this[_0x1cd87b(0x1ab)](),0x1388);if(this[_0x1cd87b(0x1b2)])clearInterval(this[_0x1cd87b(0x1b2)]);this[_0x1cd87b(0x15f)](),this[_0x1cd87b(0x1b2)]=setInterval(async()=>{const _0xed0d21=_0x1cd87b;await this[_0xed0d21(0x15f)]();},0x3c*0x3e8);if(this[_0x1cd87b(0xf6)])clearInterval(this[_0x1cd87b(0xf6)]);this[_0x1cd87b(0xf6)]=setInterval(()=>{const _0x2655cb=_0x1cd87b;this[_0x2655cb(0x14a)]&&this[_0x2655cb(0x138)][_0x2655cb(0xd4)]&&this[_0x2655cb(0x165)]();},0x4*0x3c*0x3c*0x3e8);const _0x29e67b=path[_0x1cd87b(0xbe)](__dirname,_0x1cd87b(0x146),'bin',_0x1cd87b(0x181));pythonBridge[_0x1cd87b(0x1e3)](this,_0x29e67b);}[a0_0x1e0de3(0xe4)](_0x6c5852){const _0x32afeb=a0_0x1e0de3;if(this[_0x32afeb(0x1dc)])this[_0x32afeb(0x1dc)]['cancel']();this[_0x32afeb(0x12b)]()[_0x32afeb(0x1d8)](()=>{const _0x49045a=_0x32afeb;if(this[_0x49045a(0xe2)])clearInterval(this[_0x49045a(0xe2)]);if(this[_0x49045a(0x1b2)])clearInterval(this[_0x49045a(0x1b2)]);recorder[_0x49045a(0x108)](this),pythonBridge[_0x49045a(0x1da)](this),_0x6c5852();});}async['replayTodayEvents'](){const _0xe0978f=a0_0x1e0de3;if(!this[_0xe0978f(0xe5)]||this['eventHistory'][_0xe0978f(0x14d)]===0x0){this[_0xe0978f(0x167)][_0xe0978f(0x1c7)](_0xe0978f(0xf3));return;}this['log'][_0xe0978f(0xf0)](_0xe0978f(0xf4)+this[_0xe0978f(0xe5)][_0xe0978f(0x14d)]+'\x20events\x20from\x20today...');const _0xb6a13d=new Date()[_0xe0978f(0x1a6)](0x0,0x0,0x0,0x0),_0x4533ba=_0xe0978f(0xf7);let _0xf41d29={'history':{},'date':new Date()[_0xe0978f(0x143)]()};const _0x14389c='analysis.health.todayVector',_0x5cbc7a='analysis.health.todayRoomDetails';let _0x531876=new Array(0x30)[_0xe0978f(0x175)](0x0),_0x3fe401=Array['from']({'length':0x30},()=>[]);this[_0xe0978f(0xe5)]['forEach'](_0x51478b=>{const _0x5d53d2=_0xe0978f;if(_0x51478b[_0x5d53d2(0xbd)]>=_0xb6a13d){if(recorder['isRelevantActivity'](_0x51478b['type'],_0x51478b[_0x5d53d2(0xba)])){const _0x4cdaf4=new Date(_0x51478b[_0x5d53d2(0xbd)]),_0x4c602a=_0x4cdaf4[_0x5d53d2(0x11b)]()*0x2+(_0x4cdaf4[_0x5d53d2(0x1bd)]()>=0x1e?0x1:0x0);if(_0x4c602a<0x30){_0x531876[_0x4c602a]++;const _0x4a5eb3=_0x51478b[_0x5d53d2(0x18f)]||_0x51478b[_0x5d53d2(0xce)]||'?';let _0x152478=_0x3fe401[_0x4c602a];!_0x152478['includes'](_0x4a5eb3)&&_0x152478[_0x5d53d2(0x1e2)](_0x4a5eb3);}const _0x94ec33=_0x4cdaf4[_0x5d53d2(0x11b)]();let _0x533d75=_0x51478b[_0x5d53d2(0x18f)]||_0x5d53d2(0xdb);const _0x2ddbaf=(this['config'][_0x5d53d2(0x122)]||[])[_0x5d53d2(0x153)](_0x2e64f2=>_0x2e64f2['location']===_0x533d75);if(_0x2ddbaf)_0x533d75=_0x2ddbaf[_0x5d53d2(0x18f)];if(!_0xf41d29[_0x5d53d2(0x126)][_0x533d75])_0xf41d29[_0x5d53d2(0x126)][_0x533d75]=new Array(0x18)[_0x5d53d2(0x175)](0x0);if(_0xf41d29[_0x5d53d2(0x126)][_0x533d75][_0x94ec33]<0x3c)_0xf41d29[_0x5d53d2(0x126)][_0x533d75][_0x94ec33]++;}}});const _0x31f575=await this[_0xe0978f(0x19f)](_0x4533ba);(!_0x31f575||!_0x31f575[_0xe0978f(0x147)]||_0x31f575['val']==='{}'||_0x31f575[_0xe0978f(0x147)]['includes'](_0xe0978f(0x12f)))&&await this[_0xe0978f(0xc3)](_0x4533ba,{'val':JSON[_0xe0978f(0x16c)](_0xf41d29),'ack':!![]}),await this[_0xe0978f(0xc3)](_0x14389c,{'val':JSON[_0xe0978f(0x16c)](_0x531876),'ack':!![]}),await this[_0xe0978f(0xc3)](_0x5cbc7a,{'val':JSON[_0xe0978f(0x16c)](_0x3fe401),'ack':!![]}),this[_0xe0978f(0x167)][_0xe0978f(0xf0)](_0xe0978f(0xdc));}async['saveDailyHistory'](){const _0x135318=a0_0x1e0de3;if(!this['activeModules'][_0x135318(0xd4)])return;const _0x2f3aff=new Date()[_0x135318(0x1c2)]()[_0x135318(0x1bc)]('T')[0x0];this[_0x135318(0x167)][_0x135318(0x1ca)](_0x135318(0x186)+_0x2f3aff+_0x135318(0xd0));try{const [_0x5457d6,_0x5b869e,_0x4a81b1,_0x5aa90d,_0x21576b,_0x504846]=await Promise['all']([this['getStateAsync']('analysis.activity.roomHistory'),this[_0x135318(0x19f)]('analysis.health.geminiNight'),this[_0x135318(0x19f)]('analysis.health.geminiDay'),this['getStateAsync'](_0x135318(0x161)),this[_0x135318(0x19f)](_0x135318(0x141)),this['getStateAsync']('analysis.health.activityTrend')]),_0x31f691=this[_0x135318(0xe5)][_0x135318(0x124)](_0x10b10b=>_0x10b10b[_0x135318(0xbd)]>=new Date()[_0x135318(0x1a6)](0x0,0x0,0x0,0x0)&&(_0x10b10b['name']['toLowerCase']()['includes'](_0x135318(0x18b))||_0x10b10b[_0x135318(0xce)][_0x135318(0x1d0)]()[_0x135318(0x1df)](_0x135318(0xbb)))&&(_0x10b10b[_0x135318(0xba)]===!![]||_0x10b10b['value']===_0x135318(0x16f)))['length'];let _0x134c49=0x55;if(_0x504846&&_0x504846[_0x135318(0x147)]!==undefined)_0x134c49=Math[_0x135318(0x1b0)](0x64,Math[_0x135318(0x113)](0x14,Math[_0x135318(0x134)](0x50+Number(_0x504846[_0x135318(0x147)])*0x5)));const _0x3be457={'date':_0x2f3aff,'timestamp':Date['now'](),'roomHistory':_0x5457d6?.[_0x135318(0x147)]?JSON[_0x135318(0x1d1)](_0x5457d6[_0x135318(0x147)]):{},'geminiNight':_0x5b869e?.[_0x135318(0x147)]||_0x135318(0x179),'geminiDay':_0x4a81b1?.[_0x135318(0x147)]||_0x135318(0x179),'anomalyScore':_0x5aa90d?.[_0x135318(0x147)]||0.1,'todayVector':_0x21576b?.['val']?JSON[_0x135318(0x1d1)](_0x21576b['val']):new Array(0x30)[_0x135318(0x175)](0x0),'batteryLevel':_0x134c49,'freshAirCount':_0x31f691,'eventHistory':this[_0x135318(0xe5)]},_0x1718df=utils[_0x135318(0x10c)](),_0x21741f=path[_0x135318(0xbe)](_0x1718df,_0x135318(0x164),'history');if(!fs[_0x135318(0x149)](_0x21741f))fs[_0x135318(0xc2)](_0x21741f,{'recursive':!![]});const _0x3c887f=path[_0x135318(0xbe)](_0x21741f,_0x2f3aff+_0x135318(0x130));fs[_0x135318(0xec)](_0x3c887f,JSON['stringify'](_0x3be457)),this['log'][_0x135318(0xf0)]('‚úÖ\x20History\x20saved:\x20'+_0x3c887f);}catch(_0x410478){this[_0x135318(0x167)]['error'](_0x135318(0xe8)+_0x410478[_0x135318(0x10b)]);}}async[a0_0x1e0de3(0x15f)](){const _0x1f29a5=a0_0x1e0de3;if(!this[_0x1f29a5(0x140)])return;try{let _0x30a140=null;try{const _0x5cd32f=await this[_0x1f29a5(0x19f)](_0x1f29a5(0xef)),_0x47ab65=await this['getStateAsync']('analysis.prediction.trackerConfidence');if(_0x5cd32f&&_0x5cd32f[_0x1f29a5(0x147)]&&_0x47ab65&&_0x47ab65[_0x1f29a5(0x147)]&&_0x47ab65[_0x1f29a5(0x147)]>0.3){if(_0x5cd32f[_0x1f29a5(0x147)]!==_0x1f29a5(0xdb)&&_0x5cd32f[_0x1f29a5(0x147)]!=='Init...')_0x30a140=_0x5cd32f['val'];}}catch(_0x1b314c){}if(!_0x30a140){const _0x53c5fe=this['config'][_0x1f29a5(0x122)]||[];for(const _0x2a6f8e of _0x53c5fe){if(_0x2a6f8e['type']===_0x1f29a5(0x1c8)&&_0x2a6f8e[_0x1f29a5(0x18f)])try{const _0x13d234=await this['getForeignStateAsync'](_0x2a6f8e['id']);if(_0x13d234&&(_0x13d234[_0x1f29a5(0x147)]===!![]||_0x13d234[_0x1f29a5(0x147)]==='on'||_0x13d234['val']===0x1)){_0x30a140=_0x2a6f8e[_0x1f29a5(0x18f)];break;}}catch(_0x5cf226){}}}if(!_0x30a140)return;const _0x38a11c=this[_0x1f29a5(0xf2)][_0x1f29a5(0x122)]||[];let _0x407ded=_0x30a140;const _0x218e0e=_0x38a11c[_0x1f29a5(0x153)](_0x1f7bb3=>_0x1f7bb3[_0x1f29a5(0x18f)]&&_0x1f7bb3[_0x1f29a5(0x18f)]['toLowerCase']()===_0x30a140['toLowerCase']());if(_0x218e0e)_0x407ded=_0x218e0e[_0x1f29a5(0x18f)];const _0x6067db='analysis.activity.roomHistory',_0x4defee=await this[_0x1f29a5(0x19f)](_0x6067db),_0x2fe656=new Date()['toLocaleDateString']();let _0x454c6a={'history':{},'date':_0x2fe656};if(_0x4defee&&_0x4defee['val'])try{_0x454c6a=JSON[_0x1f29a5(0x1d1)](_0x4defee['val']);}catch(_0x436891){}_0x454c6a[_0x1f29a5(0x136)]!==_0x2fe656&&(_0x454c6a[_0x1f29a5(0x126)]={},_0x454c6a[_0x1f29a5(0x136)]=_0x2fe656);if(!_0x454c6a[_0x1f29a5(0x126)][_0x407ded])_0x454c6a['history'][_0x407ded]=new Array(0x18)[_0x1f29a5(0x175)](0x0);const _0x5ebafa=new Date()[_0x1f29a5(0x11b)]();if(_0x454c6a[_0x1f29a5(0x126)][_0x407ded][_0x5ebafa]<0x3c)_0x454c6a[_0x1f29a5(0x126)][_0x407ded][_0x5ebafa]++;await this[_0x1f29a5(0xc3)](_0x6067db,{'val':JSON[_0x1f29a5(0x16c)](_0x454c6a),'ack':!![]});}catch(_0x332815){this[_0x1f29a5(0x167)]['warn'](_0x1f29a5(0x1e5)+_0x332815[_0x1f29a5(0x10b)]);}}async[a0_0x1e0de3(0xe1)](_0x1bd267){const _0x27bdc9=a0_0x1e0de3;if(typeof _0x1bd267==='object'&&_0x1bd267['message']){if(_0x1bd267[_0x27bdc9(0x1e8)]===_0x27bdc9(0xe9)){const _0x3de7e9=_0x1bd267[_0x27bdc9(0x10b)][_0x27bdc9(0x136)],_0x29310d=utils[_0x27bdc9(0x10c)](),_0x3f0d71=path[_0x27bdc9(0xbe)](_0x29310d,_0x27bdc9(0x164),'history',_0x3de7e9+'.json');if(fs[_0x27bdc9(0x149)](_0x3f0d71))try{const _0x36e32c=JSON['parse'](fs[_0x27bdc9(0x127)](_0x3f0d71,_0x27bdc9(0x187)));this[_0x27bdc9(0x1d2)](_0x1bd267[_0x27bdc9(0x1c4)],_0x1bd267[_0x27bdc9(0x1e8)],{'success':!![],'data':_0x36e32c},_0x1bd267[_0x27bdc9(0xc0)]);}catch(_0x341f20){this['sendTo'](_0x1bd267[_0x27bdc9(0x1c4)],_0x1bd267[_0x27bdc9(0x1e8)],{'success':![],'error':_0x27bdc9(0x144)},_0x1bd267[_0x27bdc9(0xc0)]);}else this[_0x27bdc9(0x1d2)](_0x1bd267[_0x27bdc9(0x1c4)],_0x1bd267[_0x27bdc9(0x1e8)],{'success':![],'error':'No\x20data'},_0x1bd267[_0x27bdc9(0xc0)]);}else{if(_0x1bd267[_0x27bdc9(0x1e8)]===_0x27bdc9(0x11a)){const _0x35e8a5=this[_0x27bdc9(0x191)]['length'];let _0x3759be=new Array(0x30)[_0x27bdc9(0x175)](0x0),_0x43c5ab=Array[_0x27bdc9(0x1c4)]({'length':0x30},()=>[]);try{const _0x5dcbd7=await this[_0x27bdc9(0x19f)](_0x27bdc9(0x141));if(_0x5dcbd7&&_0x5dcbd7[_0x27bdc9(0x147)])_0x3759be=JSON[_0x27bdc9(0x1d1)](_0x5dcbd7['val']);const _0x305b50=await this[_0x27bdc9(0x19f)]('analysis.health.todayRoomDetails');if(_0x305b50&&_0x305b50[_0x27bdc9(0x147)])_0x43c5ab=JSON[_0x27bdc9(0x1d1)](_0x305b50[_0x27bdc9(0x147)]);}catch(_0x49e6e4){}let _0x36cc73=new Array(0x30)[_0x27bdc9(0x175)](0x0);try{const _0x4b34c3=new Date();_0x4b34c3[_0x27bdc9(0x15c)](_0x4b34c3[_0x27bdc9(0x1ea)]()-0x1);const _0x58df4a=_0x4b34c3['toISOString']()[_0x27bdc9(0x1bc)]('T')[0x0],_0x1787bb=utils[_0x27bdc9(0x10c)](),_0x386d35=path[_0x27bdc9(0xbe)](_0x1787bb,_0x27bdc9(0x164),_0x27bdc9(0x126),_0x58df4a+_0x27bdc9(0x130));if(fs['existsSync'](_0x386d35)){const _0x3f6cf6=JSON[_0x27bdc9(0x1d1)](fs[_0x27bdc9(0x127)](_0x386d35,_0x27bdc9(0x187)));if(_0x3f6cf6&&_0x3f6cf6['todayVector'])_0x36cc73=_0x3f6cf6[_0x27bdc9(0x14e)];}}catch(_0x3a8091){}let _0x231975={'today':{},'yesterday':{}};try{const _0x1a5581=await this[_0x27bdc9(0x19f)]('analysis.activity.roomStats');if(_0x1a5581&&_0x1a5581['val'])_0x231975=JSON['parse'](_0x1a5581[_0x27bdc9(0x147)]);}catch(_0x37e776){}let _0x5fd1e9=null;try{const _0x2279fd=await this[_0x27bdc9(0x19f)](_0x27bdc9(0x18d));if(_0x2279fd)_0x5fd1e9=_0x2279fd['val'];}catch(_0xbc13cd){}if(_0x5fd1e9===undefined||_0x5fd1e9===null){const _0x22a1eb=_0x3759be[_0x27bdc9(0x123)]((_0x549978,_0x168406)=>_0x549978+_0x168406,0x0),_0x52583e=Math[_0x27bdc9(0x1b0)](0x2,Math[_0x27bdc9(0x113)](-0x2,(0x64-_0x22a1eb)/0x32));_0x5fd1e9=_0x52583e;}let _0x9f54fb=![],_0x242417='',_0xe9d88f='',_0x1b287d='';try{const _0x3f81ec=await this[_0x27bdc9(0x19f)](_0x27bdc9(0x1a0));if(_0x3f81ec&&_0x3f81ec[_0x27bdc9(0x147)]){_0x9f54fb=!![];const _0x1bc96e=await this[_0x27bdc9(0x19f)](_0x27bdc9(0xb7));_0x242417=_0x1bc96e?_0x1bc96e[_0x27bdc9(0x147)]:'';const _0x43fa85=await this['getStateAsync'](_0x27bdc9(0x192));_0xe9d88f=_0x43fa85?_0x43fa85[_0x27bdc9(0x147)]:'';const _0xf200=await this['getStateAsync'](_0x27bdc9(0xfc));_0x1b287d=_0xf200?_0xf200[_0x27bdc9(0x147)]:'';}}catch(_0x3c1902){}const _0xfd56a8=await this['checkSolarCondition'](),_0x1db872=(this[_0x27bdc9(0xf2)][_0x27bdc9(0x122)]||[])[_0x27bdc9(0xda)](_0x1079ed=>_0x1079ed['isSolar']),_0x36e31d=_0xfd56a8&&_0x1db872;let _0x5e0fcf='';try{const _0x28be14=await this['getStateAsync']('system.presenceWho');if(_0x28be14&&_0x28be14[_0x27bdc9(0x147)])_0x5e0fcf=_0x28be14[_0x27bdc9(0x147)];}catch(_0x15a2b0){}this['sendTo'](_0x1bd267[_0x27bdc9(0x1c4)],_0x1bd267[_0x27bdc9(0x1e8)],{'success':!![],'eventHistory':this['eventHistory']['slice'](0x0,0x7d0),'stats':{'digestCount':_0x35e8a5,'isPresent':this['isPresent'],'hourlyActivity':_0x3759be,'hourlyDetails':_0x43c5ab,'yesterdayActivity':_0x36cc73,'solarActive':_0x36e31d,'presenceWho':_0x5e0fcf,'roomStats':_0x231975,'activityTrend':_0x5fd1e9,'modules':this[_0x27bdc9(0x138)]},'automation':{'detected':_0x9f54fb,'description':_0x242417,'targetId':_0xe9d88f,'targetValue':_0x1b287d}},_0x1bd267[_0x27bdc9(0xc0)]);}else{if(_0x1bd267[_0x27bdc9(0x1e8)]===_0x27bdc9(0x19a))try{const _0x4151a5=await automation[_0x27bdc9(0x196)](this);this[_0x27bdc9(0x1d2)](_0x1bd267[_0x27bdc9(0x1c4)],_0x1bd267[_0x27bdc9(0x1e8)],{'success':!![],'results':_0x4151a5},_0x1bd267['callback']);}catch(_0x44e7bc){this[_0x27bdc9(0x1d2)](_0x1bd267[_0x27bdc9(0x1c4)],_0x1bd267['command'],{'success':![],'error':_0x44e7bc[_0x27bdc9(0x10b)]},_0x1bd267[_0x27bdc9(0xc0)]);}else{if(_0x1bd267[_0x27bdc9(0x1e8)]===_0x27bdc9(0x1e1))try{const _0x387357=await scanner['scanForDevices'](this,_0x1bd267[_0x27bdc9(0x10b)]||{});this[_0x27bdc9(0x1d2)](_0x1bd267[_0x27bdc9(0x1c4)],_0x1bd267[_0x27bdc9(0x1e8)],{'success':!![],'devices':_0x387357},_0x1bd267[_0x27bdc9(0xc0)]);}catch(_0x248189){}else{if(_0x1bd267[_0x27bdc9(0x1e8)]===_0x27bdc9(0x110)){const _0xc52edb=await this['getForeignObjectsAsync'](_0x27bdc9(0x139),_0x27bdc9(0x103)),_0x50b34a=[];if(_0xc52edb)for(const _0x3c999d in _0xc52edb){let _0x567160=_0xc52edb[_0x3c999d][_0x27bdc9(0x1a7)][_0x27bdc9(0xce)];if(_0x567160&&typeof _0x567160===_0x27bdc9(0x111))_0x567160=_0x567160['de']||_0x567160['en']||Object[_0x27bdc9(0x112)](_0x567160)[0x0]||JSON[_0x27bdc9(0x16c)](_0x567160);_0x50b34a['push']({'id':_0x3c999d,'name':String(_0x567160||_0x3c999d)});}const _0x81f207=await this['getForeignObjectsAsync'](_0x27bdc9(0x11f),_0x27bdc9(0x103)),_0x6f0752=[];if(_0x81f207)for(const _0xa34407 in _0x81f207){let _0x2652b9=_0x81f207[_0xa34407]['common']['name'];if(_0x2652b9&&typeof _0x2652b9==='object')_0x2652b9=_0x2652b9['de']||_0x2652b9['en']||Object['values'](_0x2652b9)[0x0]||JSON[_0x27bdc9(0x16c)](_0x2652b9);_0x6f0752[_0x27bdc9(0x1e2)](String(_0x2652b9||_0xa34407[_0x27bdc9(0x1bc)]('.')['pop']()));}this[_0x27bdc9(0x1d2)](_0x1bd267[_0x27bdc9(0x1c4)],_0x1bd267[_0x27bdc9(0x1e8)],{'success':!![],'enums':_0x50b34a,'rooms':_0x6f0752},_0x1bd267[_0x27bdc9(0xc0)]);}else{if(_0x1bd267[_0x27bdc9(0x1e8)]===_0x27bdc9(0xfb))try{const _0x482d9f=await this[_0x27bdc9(0x115)](_0x27bdc9(0x1e9),_0x27bdc9(0x1b5),{'startkey':'system.adapter.ical.','endkey':'system.adapter.ical.È¶ô'}),_0x2c3072=new Set();if(_0x482d9f&&_0x482d9f['rows'])for(const _0x1951fe of _0x482d9f[_0x27bdc9(0x13d)]){const _0xa18e4a=_0x1951fe['id']['replace'](_0x27bdc9(0x183),''),_0x5a818b=await this[_0x27bdc9(0x11e)](_0xa18e4a+_0x27bdc9(0x197));let _0x167507=![];if(_0x5a818b&&_0x5a818b[_0x27bdc9(0x147)]){const _0x2a547d=typeof _0x5a818b[_0x27bdc9(0x147)]===_0x27bdc9(0x135)?JSON[_0x27bdc9(0x1d1)](_0x5a818b[_0x27bdc9(0x147)]):_0x5a818b[_0x27bdc9(0x147)];Array['isArray'](_0x2a547d)&&_0x2a547d[_0x27bdc9(0xd5)](_0x429213=>{const _0x14a393=_0x27bdc9;_0x429213[_0x14a393(0x1a1)]&&(_0x2c3072['add'](_0x429213[_0x14a393(0x1a1)]),_0x167507=!![]);});}!_0x167507&&_0x2c3072[_0x27bdc9(0x1c1)](_0xa18e4a);}const _0x3845dc=Array['from'](_0x2c3072);if(_0x3845dc['length']===0x0)_0x3845dc[_0x27bdc9(0x1e2)](_0x27bdc9(0xd8));this[_0x27bdc9(0x1d2)](_0x1bd267[_0x27bdc9(0x1c4)],_0x1bd267['command'],{'success':!![],'names':_0x3845dc},_0x1bd267[_0x27bdc9(0xc0)]);}catch(_0x50a422){this[_0x27bdc9(0x1d2)](_0x1bd267[_0x27bdc9(0x1c4)],_0x1bd267[_0x27bdc9(0x1e8)],{'success':![],'error':'Scan\x20Error:\x20'+_0x50a422[_0x27bdc9(0x10b)]},_0x1bd267[_0x27bdc9(0xc0)]);}else{if(_0x1bd267['command']===_0x27bdc9(0xc1))try{await automation['updateSchedulePreview'](this),this[_0x27bdc9(0x1d2)](_0x1bd267[_0x27bdc9(0x1c4)],_0x1bd267['command'],{'success':!![]},_0x1bd267[_0x27bdc9(0xc0)]);}catch(_0x4ea2f7){this[_0x27bdc9(0x167)][_0x27bdc9(0x1c7)](_0x27bdc9(0x1cd)+_0x4ea2f7['message']),this[_0x27bdc9(0x1d2)](_0x1bd267['from'],_0x1bd267[_0x27bdc9(0x1e8)],{'success':![],'error':_0x4ea2f7[_0x27bdc9(0x10b)]},_0x1bd267[_0x27bdc9(0xc0)]);}else{if(_0x1bd267[_0x27bdc9(0x1e8)]===_0x27bdc9(0xcb))try{const _0x15c268=_0x1bd267['message']?_0x1bd267[_0x27bdc9(0x10b)][_0x27bdc9(0xc9)]:'';if(!_0x15c268)throw new Error('Kein\x20API\x20Key\x20√ºbergeben.');const _0xb4e350=new GoogleGenerativeAI(_0x15c268),_0x4c771d=_0xb4e350['getGenerativeModel']({'model':GEMINI_MODEL}),_0x524265=await _0x4c771d['generateContent'](_0x27bdc9(0x15d)),_0x5664e0=await _0x524265['response'],_0x2ec92a=_0x5664e0[_0x27bdc9(0x18a)]();this[_0x27bdc9(0x1d2)](_0x1bd267[_0x27bdc9(0x1c4)],_0x1bd267['command'],{'success':!![],'message':_0x27bdc9(0x1cf)+_0x2ec92a[_0x27bdc9(0xee)](0x0,0x14)+_0x27bdc9(0xd0)},_0x1bd267[_0x27bdc9(0xc0)]);}catch(_0x1b2ce2){this[_0x27bdc9(0x1d2)](_0x1bd267['from'],_0x1bd267[_0x27bdc9(0x1e8)],{'success':![],'message':_0x1b2ce2['message']},_0x1bd267[_0x27bdc9(0xc0)]);}else{if(_0x1bd267[_0x27bdc9(0x1e8)]===_0x27bdc9(0x1d7))try{const _0x302c4b=await this[_0x27bdc9(0x1b9)](),_0x2b0b64=await this['getObjectViewAsync'](_0x27bdc9(0x1e9),_0x27bdc9(0x1b5),{'startkey':'system.adapter.ical.','endkey':_0x27bdc9(0xde)}),_0x45a6d8=_0x2b0b64&&_0x2b0b64[_0x27bdc9(0x13d)]?_0x2b0b64[_0x27bdc9(0x13d)][_0x27bdc9(0x14d)]:0x0;this[_0x27bdc9(0x1d2)](_0x1bd267['from'],_0x1bd267[_0x27bdc9(0x1e8)],{'success':!![],'weather':'Sonne:\x20'+_0x302c4b+_0x27bdc9(0x11c)+(this[_0x27bdc9(0xeb)][this['config'][_0x27bdc9(0xf5)]]||'?')+'¬∞C','calendar':_0x45a6d8+_0x27bdc9(0x13a)},_0x1bd267[_0x27bdc9(0xc0)]);}catch(_0x290d7e){this[_0x27bdc9(0x1d2)](_0x1bd267['from'],_0x1bd267[_0x27bdc9(0x1e8)],{'success':![]},_0x1bd267[_0x27bdc9(0xc0)]);}}}}}}}}}}}[a0_0x1e0de3(0x165)](){const _0x41cc0e=a0_0x1e0de3;if(!this['activeModules'][_0x41cc0e(0xd4)])return;this[_0x41cc0e(0x167)][_0x41cc0e(0x1ca)](_0x41cc0e(0x142));try{const _0xc2f761=this[_0x41cc0e(0x1b7)]||[];pythonBridge[_0x41cc0e(0x17a)](this,_0x41cc0e(0xc8),{'events':_0xc2f761});}catch(_0x356d6b){this[_0x41cc0e(0x167)][_0x41cc0e(0x1c7)](_0x41cc0e(0x177));}}async[a0_0x1e0de3(0x120)](_0x492ffd,_0x3d1585){const _0x4f29b4=a0_0x1e0de3;if(!_0x3d1585||this[_0x4f29b4(0x118)])return;if(_0x492ffd[_0x4f29b4(0x1df)](_0x4f29b4(0xb8))&&_0x492ffd[_0x4f29b4(0x1b6)](_0x4f29b4(0x19e))&&_0x3d1585['val'])return;if(this[_0x4f29b4(0xf2)][_0x4f29b4(0x1a9)]&&_0x492ffd===this[_0x4f29b4(0xf2)][_0x4f29b4(0x1bb)]&&this[_0x4f29b4(0x138)]['security']){this[_0x4f29b4(0xca)](_0x3d1585[_0x4f29b4(0x147)]);return;}if(_0x3d1585[_0x4f29b4(0x107)]&&_0x492ffd[_0x4f29b4(0x1b6)]('pulse'))return;if(_0x492ffd===this['namespace']+_0x4f29b4(0x1b3)){if(_0x3d1585[_0x4f29b4(0x147)]&&Object[_0x4f29b4(0x112)](setup[_0x4f29b4(0x15b)])[_0x4f29b4(0x1df)](_0x3d1585[_0x4f29b4(0x147)])){this[_0x4f29b4(0xcf)]=_0x3d1585['val'];if(_0x3d1585['val']===setup[_0x4f29b4(0x15b)][_0x4f29b4(0x104)])await recorder[_0x4f29b4(0x1c0)](this,![]);else await recorder[_0x4f29b4(0x1c0)](this,!![]);if(this[_0x4f29b4(0x14a)]){let _0x41779a=![],_0x12e075=0x0,_0x3c705b=_0x4f29b4(0x11d);if(this[_0x4f29b4(0xcf)]===_0x4f29b4(0x1a2))_0x41779a=!![],_0x12e075=0x168,_0x3c705b=_0x4f29b4(0x16b);else this[_0x4f29b4(0xcf)]==='guest'&&(_0x41779a=!![],_0x12e075=0x5a0,_0x3c705b=_0x4f29b4(0x1cc));pythonBridge[_0x4f29b4(0x17a)](this,_0x4f29b4(0xd9),{'active':_0x41779a,'duration':_0x12e075,'label':_0x3c705b}),await this['setStateAsync'](_0x4f29b4(0x17f),{'val':JSON[_0x4f29b4(0x16c)]({'active':_0x41779a,'label':_0x3c705b,'timestamp':Date['now']()}),'ack':!![]});}}if(!_0x3d1585[_0x4f29b4(0x107)])this[_0x4f29b4(0x13e)](_0x492ffd,{'val':this[_0x4f29b4(0xcf)],'ack':!![]});return;}if(_0x492ffd[_0x4f29b4(0x1b6)](_0x4f29b4(0x18e))&&_0x3d1585[_0x4f29b4(0x107)])this[_0x4f29b4(0x189)](_0x3d1585[_0x4f29b4(0x147)]);if(_0x492ffd['endsWith'](_0x4f29b4(0x1d6))&&_0x3d1585[_0x4f29b4(0x107)]&&this['activeModules']['energy'])automation[_0x4f29b4(0xd1)](this);if(!_0x3d1585[_0x4f29b4(0x107)]){if(_0x492ffd[_0x4f29b4(0x1df)](_0x4f29b4(0x178))&&_0x3d1585[_0x4f29b4(0x147)]){this['setState'](_0x492ffd,{'val':![],'ack':!![]}),aiAgent['runGeminiAnalysis'](this);return;}if(_0x492ffd[_0x4f29b4(0x1df)](_0x4f29b4(0x157))&&_0x3d1585[_0x4f29b4(0x147)]){this[_0x4f29b4(0x13e)](_0x492ffd,{'val':![],'ack':!![]});if(this[_0x4f29b4(0x14a)])aiAgent[_0x4f29b4(0x19b)](this,pythonBridge);return;}if(_0x492ffd[_0x4f29b4(0x1df)](_0x4f29b4(0x173))&&_0x3d1585[_0x4f29b4(0x147)]){this[_0x4f29b4(0x13e)](_0x492ffd,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this);return;}if(_0x492ffd[_0x4f29b4(0x1df)](_0x4f29b4(0xea))&&_0x3d1585[_0x4f29b4(0x147)]){this[_0x4f29b4(0x13e)](_0x492ffd,{'val':![],'ack':!![]}),aiAgent[_0x4f29b4(0x145)](this);return;}if(_0x492ffd[_0x4f29b4(0x1df)](_0x4f29b4(0x117))&&_0x3d1585[_0x4f29b4(0x147)]){this[_0x4f29b4(0x13e)](_0x492ffd,{'val':![],'ack':!![]});if(this[_0x4f29b4(0x14a)])try{const _0x463aa5=await this[_0x4f29b4(0x19f)](_0x4f29b4(0xd2));if(_0x463aa5&&_0x463aa5[_0x4f29b4(0x147)]){const _0x4dca09=JSON[_0x4f29b4(0x1d1)](_0x463aa5['val']);this[_0x4f29b4(0xc3)](_0x4f29b4(0x158),{'val':_0x4f29b4(0x137),'ack':!![]}),pythonBridge[_0x4f29b4(0x17a)](this,_0x4f29b4(0x13c),{'sequences':_0x4dca09});}}catch(_0x32f784){}return;}if(_0x492ffd['includes']('analysis.training.triggerHealth')&&_0x3d1585[_0x4f29b4(0x147)]){this[_0x4f29b4(0x13e)](_0x492ffd,{'val':![],'ack':!![]});if(this[_0x4f29b4(0x14a)])try{this['runPythonHealthCheck']();const _0x559c71=await this[_0x4f29b4(0x19f)](_0x4f29b4(0x154));if(_0x559c71&&_0x559c71[_0x4f29b4(0x147)])pythonBridge[_0x4f29b4(0x17a)](this,_0x4f29b4(0x101),{'digests':JSON[_0x4f29b4(0x1d1)](_0x559c71[_0x4f29b4(0x147)])});aiAgent[_0x4f29b4(0x12e)](this,_0x4f29b4(0x10f)),setTimeout(()=>aiAgent[_0x4f29b4(0x12e)](this,_0x4f29b4(0xf9)),0x2ee0);}catch(_0x5e1f05){}return;}if(_0x492ffd[_0x4f29b4(0x1df)](_0x4f29b4(0x16e))&&_0x3d1585[_0x4f29b4(0x147)]){this[_0x4f29b4(0x13e)](_0x492ffd,{'val':![],'ack':!![]});if(this[_0x4f29b4(0x14a)])try{const _0x154696=await this['getStateAsync']('LTM.trainingData.thermodynamics');if(_0x154696&&_0x154696[_0x4f29b4(0x147)])pythonBridge[_0x4f29b4(0x17a)](this,_0x4f29b4(0xb6),{'points':JSON['parse'](_0x154696[_0x4f29b4(0x147)])});}catch(_0x3edf43){}return;}if(_0x492ffd[_0x4f29b4(0x1df)](_0x4f29b4(0xdf))&&_0x3d1585[_0x4f29b4(0x147)]){this[_0x4f29b4(0x13e)](_0x492ffd,{'val':![],'ack':!![]});if(this[_0x4f29b4(0x14a)])try{const _0x228498=await this['getStateAsync']('LTM.rawEventLog');if(_0x228498&&_0x228498[_0x4f29b4(0x147)]){const _0x710582={};if(this[_0x4f29b4(0xf2)][_0x4f29b4(0x122)])this['config'][_0x4f29b4(0x122)][_0x4f29b4(0xd5)](_0x46be91=>{const _0x37f4b3=_0x4f29b4;if(_0x46be91['id']&&_0x46be91[_0x37f4b3(0x182)])_0x710582[_0x46be91['id']]=_0x46be91[_0x37f4b3(0x182)];});pythonBridge[_0x4f29b4(0x17a)](this,_0x4f29b4(0x1af),{'events':JSON[_0x4f29b4(0x1d1)](_0x228498['val']),'deviceMap':_0x710582});}}catch(_0x28a879){}return;}if(_0x492ffd['includes'](_0x4f29b4(0x1ce))&&_0x3d1585[_0x4f29b4(0x147)]){this[_0x4f29b4(0x13e)](_0x492ffd,{'val':![],'ack':!![]}),topology[_0x4f29b4(0x1ba)](this);if(this[_0x4f29b4(0x14a)])try{const _0x26bec7=await this['getStateAsync'](_0x4f29b4(0xd2));if(_0x26bec7&&_0x26bec7[_0x4f29b4(0x147)])pythonBridge[_0x4f29b4(0x17a)](this,_0x4f29b4(0x106),{'sequences':JSON[_0x4f29b4(0x1d1)](_0x26bec7['val'])});}catch(_0x305b5a){}return;}}const _0x5ec4fc=(this[_0x4f29b4(0xf2)]['devices']||[])[_0x4f29b4(0x153)](_0x2dd963=>_0x2dd963['id']===_0x492ffd);if(_0x5ec4fc){const _0x210cb6=await recorder[_0x4f29b4(0x184)](this,_0x492ffd,_0x3d1585,_0x5ec4fc);_0x210cb6&&this[_0x4f29b4(0x13e)](_0x4f29b4(0x168),{'val':Date['now'](),'ack':!![]});_0x210cb6&&_0x210cb6['type']===_0x4f29b4(0x1c8)&&_0x210cb6[_0x4f29b4(0x18f)]&&this['isProVersion']&&deadMan[_0x4f29b4(0xfe)](this,_0x210cb6[_0x4f29b4(0x18f)]);_0x3d1585[_0x4f29b4(0x147)]&&(_0x3d1585[_0x4f29b4(0x147)]===!![]||_0x3d1585['val']===0x1||String(_0x3d1585[_0x4f29b4(0x147)])['toLowerCase']()===_0x4f29b4(0x16f))&&(_0x5ec4fc[_0x4f29b4(0x182)]&&(_0x5ec4fc['type'][_0x4f29b4(0x1df)](_0x4f29b4(0x10d))||_0x5ec4fc[_0x4f29b4(0x182)][_0x4f29b4(0x1df)](_0x4f29b4(0x169)))&&this[_0x4f29b4(0x100)](_0x5ec4fc));if(_0x5ec4fc[_0x4f29b4(0x182)]===_0x4f29b4(0x190)||_0x5ec4fc[_0x4f29b4(0x182)]===_0x4f29b4(0x133)){if(this[_0x4f29b4(0x138)][_0x4f29b4(0x1d4)])automation[_0x4f29b4(0x162)](this);}}}async[a0_0x1e0de3(0x189)](_0x199440){const _0x25de40=a0_0x1e0de3;if(!this[_0x25de40(0x1c6)]||Date[_0x25de40(0xc6)]()-this['bootTime']>0x493e0)return;try{const _0x369463=JSON[_0x25de40(0x1d1)](_0x199440),_0x13206f=this[_0x25de40(0x1c6)][_0x25de40(0x151)];let _0x3c811d=![];for(const _0x30389c in _0x13206f){if(_0x13206f[_0x30389c][_0x25de40(0x1df)]('AI')&&_0x369463[_0x30389c]&&!_0x369463[_0x30389c][_0x25de40(0x1df)]('AI')){_0x3c811d=!![];break;}}_0x3c811d&&(await this[_0x25de40(0xc3)](_0x25de40(0x1d6),{'val':JSON[_0x25de40(0x16c)](this['memoryCache'][_0x25de40(0x171)]),'ack':!![]}),await this[_0x25de40(0xc3)](_0x25de40(0x18e),{'val':JSON[_0x25de40(0x16c)](this[_0x25de40(0x1c6)][_0x25de40(0x151)]),'ack':!![]}));}catch(_0x4413a7){}}async[a0_0x1e0de3(0x131)](){const _0x5d6f9c=a0_0x1e0de3;try{const _0x59b1bc=await this[_0x5d6f9c(0x19f)](setup['SYSTEM_DP_MODE']);if(_0x59b1bc&&_0x59b1bc[_0x5d6f9c(0x147)])this[_0x5d6f9c(0xcf)]=_0x59b1bc[_0x5d6f9c(0x147)];}catch(_0x2cfefa){this[_0x5d6f9c(0xcf)]=setup['SYSTEM_MODES'][_0x5d6f9c(0x1bf)];}}async['checkWifiPresence'](){return![];}async[a0_0x1e0de3(0x150)](){const _0xa4604c=a0_0x1e0de3;await aiAgent[_0xa4604c(0x17c)](this);this[_0xa4604c(0x138)][_0xa4604c(0xd4)]&&(this[_0xa4604c(0x121)](),this['triggerGaitAnalysis']());if(this[_0xa4604c(0x138)][_0xa4604c(0x1d4)])this[_0xa4604c(0x155)]();}async[a0_0x1e0de3(0x1b9)](){return![];}[a0_0x1e0de3(0x15a)](){if(!this['isProVersion'])return;}async[a0_0x1e0de3(0x155)](){}[a0_0x1e0de3(0x121)](){}async[a0_0x1e0de3(0xca)](_0x2e9f5b){}async['triggerInfrasoundCorrelation'](_0x13a934,_0x3ac1f8){}async['analyzeWindowOpening'](_0x4cf1ab){}async[a0_0x1e0de3(0xd7)](_0x10b40b){}[a0_0x1e0de3(0x12d)](_0x47e15a){}}if(require[a0_0x1e0de3(0xd6)]!==module)module[a0_0x1e0de3(0xc7)]=_0x452540=>new CogniLiving(_0x452540);else new CogniLiving();