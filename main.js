const a0_0x3f727b=a0_0x4e5f;(function(_0x4dcb45,_0x12c07d){const _0x1d5339=a0_0x4e5f,_0xa2ed32=_0x4dcb45();while(!![]){try{const _0x19391f=-parseInt(_0x1d5339(0x28f))/0x1*(-parseInt(_0x1d5339(0x21d))/0x2)+parseInt(_0x1d5339(0x29d))/0x3*(parseInt(_0x1d5339(0x28a))/0x4)+parseInt(_0x1d5339(0x2b4))/0x5*(parseInt(_0x1d5339(0x183))/0x6)+-parseInt(_0x1d5339(0x29c))/0x7*(-parseInt(_0x1d5339(0x282))/0x8)+-parseInt(_0x1d5339(0x2c7))/0x9*(parseInt(_0x1d5339(0x298))/0xa)+parseInt(_0x1d5339(0x241))/0xb+-parseInt(_0x1d5339(0x17e))/0xc;if(_0x19391f===_0x12c07d)break;else _0xa2ed32['push'](_0xa2ed32['shift']());}catch(_0x372b5c){_0xa2ed32['push'](_0xa2ed32['shift']());}}}(a0_0x1b18,0x7d5a9));const a0_0x449be0=(function(){let _0xfb56b8=!![];return function(_0x3509d1,_0x2cdd48){const _0x1618eb=_0xfb56b8?function(){const _0x159cf5=a0_0x4e5f;if(_0x2cdd48){const _0x2d69bf=_0x2cdd48[_0x159cf5(0x278)](_0x3509d1,arguments);return _0x2cdd48=null,_0x2d69bf;}}:function(){};return _0xfb56b8=![],_0x1618eb;};}()),a0_0x84ae69=a0_0x449be0(this,function(){const _0x3271c0=a0_0x4e5f;return a0_0x84ae69[_0x3271c0(0x273)]()[_0x3271c0(0x227)]('(((.+)+)+)+$')[_0x3271c0(0x273)]()['constructor'](a0_0x84ae69)[_0x3271c0(0x227)](_0x3271c0(0x17f));});a0_0x84ae69();'use strict';const utils=require(a0_0x3f727b(0x275)),{GoogleGenerativeAI}=require(a0_0x3f727b(0x23f)),{spawn}=require(a0_0x3f727b(0x293)),path=require(a0_0x3f727b(0x1a8)),fs=require('fs'),installer=require('./lib/installer'),scanner=require(a0_0x3f727b(0x264)),schedulers=require('./lib/scheduler'),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0x3f727b(0x299),LTM_DP_DAILY_DIGESTS='LTM.dailyDigests',LTM_DP_STATUS=a0_0x3f727b(0x290),LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS=a0_0x3f727b(0x1d5),LTM_DP_DRIFT_CHANNEL=a0_0x3f727b(0x1b7),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS=a0_0x3f727b(0x218),LTM_DP_DRIFT_LAST_CHECK=a0_0x3f727b(0x245),SYSTEM_DP_MODE=a0_0x3f727b(0x1ad),SYSTEM_MODES={'NORMAL':a0_0x3f727b(0x286),'VACATION':a0_0x3f727b(0x187),'PARTY':a0_0x3f727b(0x1bf),'GUEST':a0_0x3f727b(0x236)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0x3f727b(0x238)],SYSTEM_MODES[a0_0x3f727b(0x296)]],PERSONA_MAPPING={'generic':'Analysiere\x20ausgewogen.','senior_aal':a0_0x3f727b(0x2a9),'family':a0_0x3f727b(0x1a1),'single_comfort':a0_0x3f727b(0x2de),'security':'PRIORITÃ„T:\x20Sicherheit.'},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x119b3e){const _0x2f7551=a0_0x3f727b;try{const _0x2b0fbd=[_0x2f7551(0x24e),_0x2f7551(0x22f)];for(const _0x428423 of _0x2b0fbd){try{const _0x364370=await _0x119b3e[_0x2f7551(0x2c6)](_0x428423);if(_0x364370)await _0x119b3e[_0x2f7551(0x2bb)](_0x428423);}catch(_0x7e6ac8){}}}catch(_0x5d4c91){}}async function checkLicense(_0x2bae2d){return!![];}async function initHistory(_0x547c02){const _0x38d079=a0_0x3f727b;try{const _0x41b9bb=await _0x547c02['getStateAsync'](_0x38d079(0x232));_0x41b9bb&&_0x41b9bb['val']&&(_0x547c02[_0x38d079(0x2ae)]=JSON['parse'](_0x41b9bb[_0x38d079(0x18f)][_0x38d079(0x273)]()));}catch(_0x1ce715){_0x547c02[_0x38d079(0x2ae)]=[];}try{const _0x221a67=await _0x547c02[_0x38d079(0x1b3)](_0x38d079(0x17a));if(_0x221a67&&_0x221a67[_0x38d079(0x18f)])_0x547c02[_0x38d079(0x2a8)]=JSON[_0x38d079(0x168)](_0x221a67['val'][_0x38d079(0x273)]());}catch(_0x40f1c7){_0x547c02[_0x38d079(0x2a8)]=[];}if(_0x547c02[_0x38d079(0x2ae)]&&_0x547c02[_0x38d079(0x2ae)][_0x38d079(0x1ee)]>0x0){_0x547c02[_0x38d079(0x2e3)][_0x38d079(0x1e6)]('Restoring\x20sensor\x20cache...');for(let _0xa6380e=_0x547c02['eventHistory']['length']-0x1;_0xa6380e>=0x0;_0xa6380e--){const _0x5f1840=_0x547c02[_0x38d079(0x2ae)][_0xa6380e];if(_0x5f1840&&_0x5f1840['id']!==undefined&&_0x5f1840[_0x38d079(0x261)]!==undefined)_0x547c02[_0x38d079(0x29e)][_0x5f1840['id']]=_0x5f1840['value'];}}}async function initSystemConfig(_0x31360a){const _0x4f03d5=a0_0x3f727b;try{const _0x34716c=await _0x31360a[_0x4f03d5(0x20c)](_0x4f03d5(0x235));if(_0x34716c&&_0x34716c[_0x4f03d5(0x2f6)])_0x31360a[_0x4f03d5(0x25e)]={'latitude':_0x34716c[_0x4f03d5(0x2f6)]['latitude']||0x0,'longitude':_0x34716c[_0x4f03d5(0x2f6)][_0x4f03d5(0x2e4)]||0x0,'city':_0x34716c[_0x4f03d5(0x2f6)][_0x4f03d5(0x2fb)]||''};}catch(_0x239f6e){}}async function createAllObjects(_0x5dc965){const _0xf3a6e8=a0_0x3f727b;await _0x5dc965[_0xf3a6e8(0x221)](_0xf3a6e8(0x253),{'type':_0xf3a6e8(0x2ea),'common':{'name':_0xf3a6e8(0x1fe)},'native':{}}),await _0x5dc965[_0xf3a6e8(0x221)](SYSTEM_DP_MODE,{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x1f5),'type':_0xf3a6e8(0x2ac),'role':_0xf3a6e8(0x167),'read':!![],'write':!![],'def':SYSTEM_MODES[_0xf3a6e8(0x2ca)]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)]('system.presenceWho',{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x274),'type':_0xf3a6e8(0x2ac),'role':_0xf3a6e8(0x1cb),'read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x216),{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x1a7),'type':_0xf3a6e8(0x2ac),'role':_0xf3a6e8(0x2cf),'read':!![],'write':![]},'native':{}}),await _0x5dc965['setObjectNotExistsAsync']('events.history',{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x177),'type':_0xf3a6e8(0x2ac),'role':_0xf3a6e8(0x2cf),'read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x221)](_0xf3a6e8(0x247),{'type':_0xf3a6e8(0x2ea),'common':{'name':_0xf3a6e8(0x182)},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x260),{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x233),'type':_0xf3a6e8(0x265),'role':_0xf3a6e8(0x1cc),'read':!![],'write':!![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x2ee),{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x285),'type':'boolean','role':_0xf3a6e8(0x1cc),'read':!![],'write':!![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x2dc),{'type':_0xf3a6e8(0x167),'common':{'name':'Train\x20Energy','type':_0xf3a6e8(0x265),'role':_0xf3a6e8(0x1cc),'read':!![],'write':!![]},'native':{}}),await _0x5dc965['setObjectNotExistsAsync'](_0xf3a6e8(0x1bc),{'type':'state','common':{'name':'Train\x20Comfort','type':_0xf3a6e8(0x265),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x170),{'type':'state','common':{'name':_0xf3a6e8(0x1c3),'type':_0xf3a6e8(0x265),'role':'button','read':!![],'write':!![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x2d4),{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x207),'type':_0xf3a6e8(0x2ac),'role':_0xf3a6e8(0x1cb),'read':!![],'write':![]},'native':{}}),await _0x5dc965['extendObjectAsync']('analysis.security',{'type':_0xf3a6e8(0x2ea),'common':{'name':_0xf3a6e8(0x2a5)},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x22a),{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x252),'type':_0xf3a6e8(0x1e3),'role':'value','read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x1d1),{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x189),'type':_0xf3a6e8(0x1e3),'role':_0xf3a6e8(0x261),'read':!![],'write':![],'def':0.05},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)]('analysis.security.lastCheck',{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x228),'type':_0xf3a6e8(0x2ac),'role':_0xf3a6e8(0x27b),'read':!![],'write':![]},'native':{}}),await _0x5dc965['setObjectNotExistsAsync'](_0xf3a6e8(0x1b1),{'type':'state','common':{'name':'Topology\x20Matrix','type':_0xf3a6e8(0x2ac),'role':_0xf3a6e8(0x2cf),'read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x221)](_0xf3a6e8(0x1ca),{'type':_0xf3a6e8(0x2ea),'common':{'name':_0xf3a6e8(0x24d)},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)]('analysis.health.lastCheck',{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x228),'type':'string','role':_0xf3a6e8(0x27b),'read':!![],'write':![]},'native':{}}),await _0x5dc965['setObjectNotExistsAsync']('analysis.health.isAnomaly',{'type':'state','common':{'name':_0xf3a6e8(0x240),'type':'boolean','role':_0xf3a6e8(0x2e8),'read':!![],'write':![]},'native':{}}),await _0x5dc965['setObjectNotExistsAsync'](_0xf3a6e8(0x1a0),{'type':'state','common':{'name':_0xf3a6e8(0x205),'type':_0xf3a6e8(0x2ac),'role':_0xf3a6e8(0x1cb),'read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)]('analysis.health.trendValue',{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x169),'type':_0xf3a6e8(0x1e3),'role':'value','read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x1a4),{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x188),'type':'string','role':'json','read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x28c),{'type':_0xf3a6e8(0x167),'common':{'name':'Gait\x20Speed\x20Trend','type':_0xf3a6e8(0x1e3),'role':_0xf3a6e8(0x261),'read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x221)](_0xf3a6e8(0x1e1),{'type':_0xf3a6e8(0x2ea),'common':{'name':_0xf3a6e8(0x223)},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x220),{'type':_0xf3a6e8(0x167),'common':{'name':'Insulation\x20Score','type':_0xf3a6e8(0x2ac),'role':'text','read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)]('analysis.energy.heatingScore',{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x214),'type':_0xf3a6e8(0x2ac),'role':_0xf3a6e8(0x1cb),'read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x22e),{'type':_0xf3a6e8(0x167),'common':{'name':'Temperature\x20Forecast','type':_0xf3a6e8(0x2ac),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x221)](_0xf3a6e8(0x204),{'type':_0xf3a6e8(0x2ea),'common':{'name':_0xf3a6e8(0x204)},'native':{}}),await _0x5dc965[_0xf3a6e8(0x221)](LTM_DP_RAW_LOG,{'type':_0xf3a6e8(0x167),'common':{'name':'Raw\x20Log','type':_0xf3a6e8(0x2ac),'role':_0xf3a6e8(0x2cf),'read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x221)](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':'Daily\x20Digests','type':_0xf3a6e8(0x2ac),'role':'json','read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x1fb),{'type':_0xf3a6e8(0x167),'common':{'name':'Sequences','type':_0xf3a6e8(0x2ac),'role':_0xf3a6e8(0x2cf),'read':!![],'write':![]},'native':{}}),await _0x5dc965['setObjectNotExistsAsync'](_0xf3a6e8(0x288),{'type':'state','common':{'name':_0xf3a6e8(0x271),'type':_0xf3a6e8(0x2ac),'role':_0xf3a6e8(0x2cf),'read':!![],'write':![]},'native':{}}),await _0x5dc965['setObjectNotExistsAsync'](_0xf3a6e8(0x254),{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x266),'type':_0xf3a6e8(0x265),'role':_0xf3a6e8(0x1cc),'read':!![],'write':!![]},'native':{}}),await _0x5dc965['setObjectNotExistsAsync'](_0xf3a6e8(0x272),{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x2c0),'type':_0xf3a6e8(0x265),'role':_0xf3a6e8(0x1cc),'read':!![],'write':!![]},'native':{}}),await _0x5dc965['setObjectNotExistsAsync'](_0xf3a6e8(0x1ed),{'type':'state','common':{'name':_0xf3a6e8(0x19d),'type':_0xf3a6e8(0x265),'role':_0xf3a6e8(0x2f2),'read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x20b),{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x1a2),'type':_0xf3a6e8(0x2ac),'role':_0xf3a6e8(0x184),'read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x2e6),{'type':'state','common':{'name':_0xf3a6e8(0x294),'type':'string','role':_0xf3a6e8(0x1cb),'read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x2f4),{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x1fd),'type':_0xf3a6e8(0x265),'role':_0xf3a6e8(0x2e8),'read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x258),{'type':_0xf3a6e8(0x167),'common':{'name':'Description','type':_0xf3a6e8(0x2ac),'role':_0xf3a6e8(0x1cb),'read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x1f6),{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x1df),'type':_0xf3a6e8(0x2ac),'role':_0xf3a6e8(0x2cf),'read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x2f0),{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x1c6),'type':_0xf3a6e8(0x2ac),'role':_0xf3a6e8(0x1cb),'read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x1c1),{'type':'state','common':{'name':_0xf3a6e8(0x1cf),'type':_0xf3a6e8(0x2ac),'role':_0xf3a6e8(0x1cb),'read':!![],'write':![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x2dd),{'type':_0xf3a6e8(0x167),'common':{'name':'Auto\x20Apply','type':_0xf3a6e8(0x265),'role':_0xf3a6e8(0x23d),'read':!![],'write':!![]},'native':{}}),await _0x5dc965[_0xf3a6e8(0x2af)](_0xf3a6e8(0x19f),{'type':_0xf3a6e8(0x167),'common':{'name':_0xf3a6e8(0x237),'type':_0xf3a6e8(0x265),'role':_0xf3a6e8(0x1cc),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x2d2008){const _0x55d76c=a0_0x3f727b;try{const _0x2d717f=await _0x2d2008[_0x55d76c(0x1b3)](SYSTEM_DP_MODE);_0x2d717f&&_0x2d717f[_0x55d76c(0x18f)]&&Object['values'](SYSTEM_MODES)[_0x55d76c(0x281)](_0x2d717f[_0x55d76c(0x18f)])?_0x2d2008[_0x55d76c(0x2f7)]=_0x2d717f[_0x55d76c(0x18f)]:(_0x2d2008['currentSystemMode']=SYSTEM_MODES[_0x55d76c(0x2ca)],await _0x2d2008[_0x55d76c(0x2ed)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x55d76c(0x2ca)],'ack':!![]}));}catch(_0x5a1888){_0x2d2008[_0x55d76c(0x2f7)]=SYSTEM_MODES[_0x55d76c(0x2ca)];}}async function loadRawEventLog(_0x532f87){const _0x21aac8=a0_0x3f727b;try{const _0x10f27a=await _0x532f87['getStateAsync'](LTM_DP_RAW_LOG);if(_0x10f27a&&_0x10f27a[_0x21aac8(0x18f)])_0x532f87[_0x21aac8(0x17b)]=JSON[_0x21aac8(0x168)](_0x10f27a[_0x21aac8(0x18f)]);}catch(_0x2b1979){_0x532f87['rawEventLog']=[];}}async function saveRawEventLog(_0x5a1feb){const _0xef0cf1=a0_0x3f727b;if(_0x5a1feb[_0xef0cf1(0x17b)][_0xef0cf1(0x1ee)]>RAW_LOG_MAX_SIZE)_0x5a1feb[_0xef0cf1(0x17b)][_0xef0cf1(0x18e)](0x0,_0x5a1feb[_0xef0cf1(0x17b)]['length']-RAW_LOG_MAX_SIZE);await _0x5a1feb[_0xef0cf1(0x2ed)](LTM_DP_RAW_LOG,{'val':JSON[_0xef0cf1(0x1a9)](_0x5a1feb[_0xef0cf1(0x17b)]),'ack':!![]});}async function loadDailyDigests(_0x412f01){const _0x3f0c0a=a0_0x3f727b;try{const _0x42238f=await _0x412f01[_0x3f0c0a(0x1b3)](LTM_DP_DAILY_DIGESTS);if(_0x42238f&&_0x42238f['val'])_0x412f01[_0x3f0c0a(0x215)]=JSON['parse'](_0x42238f[_0x3f0c0a(0x18f)]);}catch(_0x41b60f){_0x412f01['dailyDigests']=[];}await updateBaselineStatus(_0x412f01);}async function saveDailyDigests(_0x4f4bda,_0x3d8fd3=!![]){const _0x16637c=a0_0x3f727b,_0x470c72=_0x4f4bda['config']['ltmLtbWindowDays']||0x3c;_0x4f4bda['dailyDigests'][_0x16637c(0x1ee)]>_0x470c72&&_0x4f4bda['dailyDigests']['splice'](0x0,_0x4f4bda['dailyDigests'][_0x16637c(0x1ee)]-_0x470c72);await _0x4f4bda['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x16637c(0x1a9)](_0x4f4bda[_0x16637c(0x215)]),'ack':!![]});if(_0x3d8fd3)await updateBaselineStatus(_0x4f4bda);}async function updateAnalysisHistory(_0x395ca1,_0x5b819d){const _0x8d40f7=a0_0x3f727b;_0x395ca1[_0x8d40f7(0x2a8)]['unshift'](_0x5b819d);if(_0x395ca1[_0x8d40f7(0x2a8)][_0x8d40f7(0x1ee)]>HISTORY_MAX_SIZE)_0x395ca1[_0x8d40f7(0x2a8)][_0x8d40f7(0x20a)]();await _0x395ca1['setStateAsync'](_0x8d40f7(0x17a),{'val':JSON[_0x8d40f7(0x1a9)](_0x395ca1[_0x8d40f7(0x2a8)]),'ack':!![]});}async function updateBaselineStatus(_0x67a95a){const _0x4d1868=a0_0x3f727b;if(!_0x67a95a[_0x4d1868(0x297)]){await _0x67a95a[_0x4d1868(0x2ed)](LTM_DP_BASELINE_STATUS,{'val':_0x4d1868(0x1ab),'ack':!![]});return;}const _0x3b904d=_0x67a95a[_0x4d1868(0x215)][_0x4d1868(0x1ee)]>=(_0x67a95a[_0x4d1868(0x25d)][_0x4d1868(0x1e7)]||0x7)?_0x4d1868(0x231)+_0x67a95a['dailyDigests'][_0x4d1868(0x1ee)]+_0x4d1868(0x16a):_0x4d1868(0x28d)+_0x67a95a['dailyDigests'][_0x4d1868(0x1ee)]+'/'+(_0x67a95a[_0x4d1868(0x25d)][_0x4d1868(0x1e7)]||0x7)+')';await _0x67a95a['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x3b904d,'ack':!![]});}async function initSensorSubscriptions(_0x2bd5f2){const _0x57b938=a0_0x3f727b,_0x2eddd0=_0x2bd5f2[_0x57b938(0x25d)][_0x57b938(0x20d)];if(_0x2eddd0)for(const _0x37107d of _0x2eddd0){await _0x2bd5f2[_0x57b938(0x181)](_0x37107d['id']);}}async function initPresenceSubscriptions(_0x57a742){const _0x20ba1c=a0_0x3f727b,_0x35a32b=_0x57a742['config'][_0x20ba1c(0x212)];if(_0x35a32b)for(const _0x202144 of _0x35a32b){await _0x57a742[_0x20ba1c(0x181)](_0x202144);}}async function setupTelegramListener(_0x55e420){const _0x3cc2f4=a0_0x3f727b,_0xec0fe6=_0x55e420[_0x3cc2f4(0x25d)][_0x3cc2f4(0x270)];if(_0x55e420[_0x3cc2f4(0x25d)]['notifyTelegramEnabled']&&_0xec0fe6)await _0x55e420[_0x3cc2f4(0x181)](_0xec0fe6+_0x3cc2f4(0x2d9));}async function checkWifiPresence(_0x407d62){const _0x3e7e90=a0_0x3f727b;try{const _0x33b457=_0x407d62['config'][_0x3e7e90(0x212)]||[];let _0x2753bc=![];const _0x4e7e15=[];for(const _0x43c65f of _0x33b457){try{const _0x3dddd9=await _0x407d62[_0x3e7e90(0x201)](_0x43c65f);_0x3dddd9&&(_0x3dddd9[_0x3e7e90(0x18f)]===!![]||_0x3dddd9['val']===_0x3e7e90(0x1de)||_0x3dddd9['val']===0x1)&&(_0x2753bc=!![],_0x4e7e15[_0x3e7e90(0x213)](_0x43c65f));}catch(_0xea4581){}}return await _0x407d62[_0x3e7e90(0x2ed)](_0x3e7e90(0x246),{'val':_0x4e7e15[_0x3e7e90(0x1c8)](',\x20'),'ack':!![]}),_0x2753bc&&(_0x407d62[_0x3e7e90(0x2be)]&&(_0x407d62['log'][_0x3e7e90(0x1e6)](_0x3e7e90(0x180)),abortExitTimer(_0x407d62)),!_0x407d62['isPresent']&&_0x407d62[_0x3e7e90(0x2f7)]===SYSTEM_MODES[_0x3e7e90(0x2ca)]&&await setPresence(_0x407d62,!![])),_0x2753bc;}catch(_0x4b57fc){return![];}}function startExitTimer(_0x4f3f19){const _0x57e934=a0_0x3f727b;abortExitTimer(_0x4f3f19),_0x4f3f19['isGracePeriodActive']=!![],_0x4f3f19[_0x57e934(0x1d6)]=setTimeout(()=>{const _0x13f69a=_0x57e934;_0x4f3f19[_0x13f69a(0x197)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x4f3f19['exitTimer']=setTimeout(()=>{setPresence(_0x4f3f19,![]),_0x4f3f19['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0x3182a5){const _0x3ba596=a0_0x3f727b;if(_0x3182a5[_0x3ba596(0x2be)])clearTimeout(_0x3182a5['exitTimer']);if(_0x3182a5['exitGraceTimer'])clearTimeout(_0x3182a5['exitGraceTimer']);_0x3182a5[_0x3ba596(0x2be)]=null,_0x3182a5[_0x3ba596(0x1d6)]=null,_0x3182a5[_0x3ba596(0x197)]=![];}async function setPresence(_0x5f1562,_0xe74169){const _0x5a6114=a0_0x3f727b;if(_0x5f1562[_0x5a6114(0x2e5)]===_0xe74169)return;_0x5f1562[_0x5a6114(0x2e5)]=_0xe74169,await _0x5f1562[_0x5a6114(0x2ed)](_0x5a6114(0x251),{'val':_0xe74169,'ack':!![]});}function a0_0x4e5f(_0x3a49df,_0x4b968d){const _0x41ef02=a0_0x1b18();return a0_0x4e5f=function(_0x84ae69,_0x449be0){_0x84ae69=_0x84ae69-0x164;let _0x1b18b7=_0x41ef02[_0x84ae69];return _0x1b18b7;},a0_0x4e5f(_0x3a49df,_0x4b968d);}async function executeAutomationAction(_0x49bf0d){const _0x36a153=a0_0x3f727b;try{const _0x34853d=await _0x49bf0d[_0x36a153(0x1b3)](_0x36a153(0x2f0)),_0x31d624=await _0x49bf0d[_0x36a153(0x1b3)](_0x36a153(0x1c1));if(_0x34853d&&_0x34853d[_0x36a153(0x18f)]&&_0x31d624){const _0x1ded51=_0x34853d[_0x36a153(0x18f)];let _0x5e5296=_0x31d624['val'];try{_0x5e5296=JSON['parse'](_0x5e5296);}catch(_0x5d5ccb){}_0x49bf0d[_0x36a153(0x2e3)][_0x36a153(0x1e6)](_0x36a153(0x16d)+_0x1ded51+_0x36a153(0x2c1)+_0x5e5296),await _0x49bf0d[_0x36a153(0x26d)](_0x1ded51,_0x5e5296);}else _0x49bf0d[_0x36a153(0x2e3)][_0x36a153(0x28e)](_0x36a153(0x26b));}catch(_0x35cf7e){_0x49bf0d['log'][_0x36a153(0x2aa)]('BUTLER\x20Execution\x20Error:\x20'+_0x35cf7e['message']);}}async function processSensorEvent(_0x567b77,_0x4ff9fd,_0x5e4f7e,_0x362ba5){const _0x5691e3=a0_0x3f727b;if(!_0x362ba5)return;const _0x2ee5b7=_0x5e4f7e[_0x5691e3(0x18f)],_0xf56dca=Date[_0x5691e3(0x1e9)](),_0x4b10ec=_0x567b77['sensorLastValues'][_0x4ff9fd];_0x567b77[_0x5691e3(0x29e)][_0x4ff9fd]=_0x2ee5b7;if(!_0x362ba5[_0x5691e3(0x22c)]&&_0x4b10ec!=undefined&&_0x4b10ec==_0x2ee5b7)return;const _0x1b16b9=(_0x362ba5[_0x5691e3(0x2b9)]||'')['toLowerCase'](),_0x17d888=_0x1b16b9['includes'](_0x5691e3(0x2d0))||_0x1b16b9['includes'](_0x5691e3(0x1e5))||_0x1b16b9['includes']('klima')||_0x1b16b9['includes'](_0x5691e3(0x23b));_0x567b77[_0x5691e3(0x297)]&&_0x17d888&&recordThermodynamics(_0x567b77,_0x4ff9fd,_0x2ee5b7,_0x362ba5[_0x5691e3(0x1c4)]);const _0x412ac3={'timestamp':_0xf56dca,'id':_0x4ff9fd,'name':_0x362ba5[_0x5691e3(0x27d)],'type':_0x362ba5['type'],'location':_0x362ba5['location'],'value':_0x2ee5b7};_0x567b77[_0x5691e3(0x2ae)][_0x5691e3(0x257)](_0x412ac3);if(_0x567b77[_0x5691e3(0x2ae)]['length']>HISTORY_MAX_SIZE)_0x567b77[_0x5691e3(0x2ae)]['pop']();await _0x567b77['setStateAsync'](_0x5691e3(0x216),{'val':JSON[_0x5691e3(0x1a9)](_0x412ac3),'ack':!![]}),await _0x567b77['setStateAsync']('events.history',{'val':JSON[_0x5691e3(0x1a9)](_0x567b77[_0x5691e3(0x2ae)]),'ack':!![]});_0x567b77[_0x5691e3(0x297)]&&(_0x567b77[_0x5691e3(0x17b)]['push'](_0x412ac3),await saveRawEventLog(_0x567b77),recordSequence(_0x567b77,_0x412ac3));if(_0x362ba5[_0x5691e3(0x1ae)]&&_0x2ee5b7===!![]){if(_0x567b77[_0x5691e3(0x2e5)]&&!_0x567b77[_0x5691e3(0x197)])startExitTimer(_0x567b77);else{if(!_0x567b77['isPresent'])setPresence(_0x567b77,!![]);}}else{if(_0x362ba5[_0x5691e3(0x2b9)]===_0x5691e3(0x289)&&_0x2ee5b7===!![]){if(_0x567b77[_0x5691e3(0x2be)])abortExitTimer(_0x567b77);if(!_0x567b77[_0x5691e3(0x2e5)]&&_0x567b77['currentSystemMode']===SYSTEM_MODES['NORMAL'])setPresence(_0x567b77,!![]);}}}async function recordThermodynamics(_0x3d6a68,_0x4a8d0b,_0x429ff8,_0x941b7a){const _0x28d51a=a0_0x3f727b,_0x576957=await getOutsideTemperatureNumeric(_0x3d6a68),_0x498d14=await _0x3d6a68['getStateAsync'](_0x28d51a(0x288));let _0x2bb2f4=[];if(_0x498d14&&_0x498d14[_0x28d51a(0x18f)])try{_0x2bb2f4=JSON[_0x28d51a(0x168)](_0x498d14[_0x28d51a(0x18f)]);}catch(_0x1ff16f){}_0x2bb2f4[_0x28d51a(0x213)]({'ts':Date['now'](),'room':_0x941b7a||_0x28d51a(0x1f2),'t_in':_0x429ff8,'t_out':_0x576957});if(_0x2bb2f4['length']>THERMO_LOG_SIZE)_0x2bb2f4[_0x28d51a(0x1eb)]();await _0x3d6a68[_0x28d51a(0x2ed)](_0x28d51a(0x288),{'val':JSON['stringify'](_0x2bb2f4),'ack':!![]});}function a0_0x1b18(){const _0x185748=['Target\x20Value','heating','analysis.security.currentThreshold','getMinutes','[RESULT]','timestamp','LTM.baselineStatus','exitGraceTimer','TOPOLOGY_RESULT','unload','âš ï¸\x20SECURITY\x20ALARM:\x20','message','targetValue','door','getLtmData','online','Detected\x20Patterns','service.py','analysis.energy','autoApply','number','trim','temperatur','info','minDaysForBaseline','ltmLtbWindowDays','now','.Current.Temperature','shift','write','analysis.isAlert','length','Kein\x20API\x20Key.','status','Err:\x20','Unknown','fill','Adapter','System\x20Mode','analysis.automation.detectedPatterns','cogni-living','onMessage','getEnums','getFullYear','LTM.trainingData.sequences','kill','Pattern\x20Detected','System','instance','submitFeedback','getForeignStateAsync','HEALTH_RESULT','ðŸ“\x20Feedback\x20received:\x20','LTM','Trend','daswetter','Training\x20Status','ltmJob','enum','pop','analysis.alertReason','getForeignObjectAsync','devices','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','setupModeResetScheduler','Missing\x20data','geminiApiKey','presenceDevices','push','Heating\x20Score','dailyDigests','events.lastEvent','generic','LTM.driftAnalysis.driftDetails','ANALYZE_HEALTH','response','N/A','presence','706zAtGxx','automationProposal','ltmStbWindowDays','analysis.energy.insulationScore','extendObjectAsync','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','Energy\x20Intelligence','weatherInstance','description','forEach','search','Last\x20Check','geminiModel','analysis.security.lastScore','onReady','logDuplicates','analysis.security.lastCheck','analysis.energy.forecast','events.history_debug_00','VACATION','Aktiv\x20(','events.history','Train\x20Security','ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...','system.config','guest','Trigger\x20Action','PARTY','\x20->\x20','unknown','heizung','dependencyInstallInProgress','switch','getMonth','@google/generative-ai','Anomaly\x20Detected','3151676ladctO','scanForDevices','toLocaleTimeString','setupLtmScheduler','LTM.driftAnalysis.lastCheck','system.presenceWho','analysis.training','ANALYZE_GAIT','openweathermap','targetId','ENERGY_PREDICT_RESULT','data','Health\x20Analysis','analysis.history_debug_00','lampe','cogni-living\x20adapter\x20starting\x20(v','system.isPresent','Anomaly\x20Score','system','analysis.trigger','TRAIN_ENERGY','replace','unshift','analysis.automation.description','PREDICT_ENERGY','TRAIN_HEALTH','.forecast.current.state','onStateChange','config','systemConfig','alertReason','analysis.training.triggerSecurity','value','substring','sendTo','./lib/scanner','boolean','Trigger\x20Analysis','accuweather','modeResetJob','contact','getHours','ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.','.\x20SYSTEM_MODE:\x20','setForeignStateAsync','main','testContext','notifyTelegramInstance','Thermodynamics','analysis.triggerBriefing','toString','Who\x20is\x20present?','@iobroker/adapter-core','Success:\x20','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','apply','reason','TRAIN_SECURITY','date','analysis.health.lastCheck','name','object','threshold','User\x20dismissed\x20automation\x20proposal.','includes','40rWmQzB','licht','generateContent','Train\x20Health','normal','livingContext','LTM.trainingData.thermodynamics','motion','4BNuvqE','payload','analysis.health.gaitSpeed','Lernphase\x20(','warn','680HDIKaR','LTM.processingStatus','window','setupBriefingScheduler','child_process','Activity\x20Summary','No\x20instance','GUEST','isProVersion','801650jlREjk','LTM.rawEventLog','setupDriftAnalysisScheduler','.\x20ANWESEND:\x20','961303Bazpsw','451203GNnvKv','sensorLastValues','stdin','inactivityThresholdHours','checkAndInstall','ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20','stateChange','find','Security\x20Monitor','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','python3','analysisHistory','PRIORITÃ„T:\x20Gesundheit/AAL.','error','getDate','string','namespace','eventHistory','setObjectNotExistsAsync','[LOG]','toLowerCase','is_anomaly','floor','2175995UZDxAF','map','change_percent','PYTHON_EXE','getOverviewData','type','occupancy','delObjectAsync','loc','Activity-Level','exitTimer','version','Trigger\x20Briefing','\x20=\x20','Failed:\x20','.\x20EVENTS:\x20','details','isEmergency','getObjectAsync','45GMvJuA','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','COMFORT_RESULT','NORMAL','cancel','driftAnalysisTimer','Success','application/json','json','temperature','KI-Modell\x20nicht\x20initialisiert','Wetterdaten\x20deaktiviert.','Gemini\x20Error:\x20','analysis.training.status','confidence','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','existsSync','Sec-Training\x20started...','.communicate.request','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','rating','analysis.training.triggerEnergy','analysis.automation.autoApply','Fokus\x20auf\x20Komfort.','Â°C,\x20','split','from','command','log','longitude','isPresent','analysis.activitySummary','diagnosis','indicator','bind','channel','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','ANALYZE_TREND','setStateAsync','analysis.training.triggerHealth','summary','analysis.automation.targetId','debug','indicator.alarm','testApiKey','analysis.automation.patternDetected','HEALTH_TRAIN_RESULT','common','currentSystemMode','Training\x20Error:\x20','Error\x20launching\x20Python:\x20','ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.','city','success','ðŸ\x20Python\x20Pong','some','state','parse','Trend\x20Value','\x20Tage)','analysisTimer','Gemini\x20Init\x20Error:\x20','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','âœ…\x20HEALTH\x20TRAINED.','enum.rooms.*','analysis.training.triggerTopology','calendarInstance','analysis.energy.heatingScore','stdout','Kalender\x20deaktiviert.','isAlert','round','Event\x20History','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','Skipped\x20(No\x20AI\x20or\x20Data)','analysis.analysisHistory','rawEventLog','SECURITY_RESULT','rule','10614324AdrYbU','(((.+)+)+)+$','WiFi\x20Presence\x20detected.','subscribeForeignStatesAsync','AI\x20Training','6WinRfx','text.alarm','setState','startsWith','vacation','Today\x20Vector\x20(15m)','Current\x20Threshold','TRAIN_COMFORT','analysis.lastResult','genAI','insulation','splice','val','analysis.health.isAnomaly','Unbekannt','Started...','getGenerativeModel','lastAlertState','triggerBriefing','briefingJob','isGracePeriodActive','\x20new\x20patterns.','slice','.forecast.current.temperature','light','Digest','Alert\x20Status','getCalendarNames','analysis.automation.triggerAction','analysis.health.trendDiagnosis','Fokus\x20auf\x20Familienroutinen.','Alert\x20Reason','outdoorSensorId','analysis.health.todayVector','licenseKey','getTime','Last\x20raw\x20event','path','stringify','Keine\x20Wetterdaten\x20verfÃ¼gbar.','Deaktiviert\x20(Pro-Feature)','subscribeStates','system.mode','isExit','ready','pythonProcess','analysis.security.topologyMatrix','toISOString','getStateAsync','Gemini\x20AI\x20initialized.','getForeignObjectsAsync','toFixed','LTM.driftAnalysis','detected','Regel\x20erkannt:\x20','filter','close','analysis.training.triggerComfort','Briefing\x20Error:\x20','useWeather','party','activityLevel','analysis.automation.targetValue','.NextHours.Location_1.Day_1.current.temp_value','Build\x20Topology','location','Kein\x20API\x20Key!','Target\x20ID','callback','join','tÃ¼r','analysis.health','text','button','writable','ack'];a0_0x1b18=function(){return _0x185748;};return a0_0x1b18();}async function getOutsideTemperatureNumeric(_0x4f74d9){const _0x294079=a0_0x3f727b;if(_0x4f74d9[_0x294079(0x25d)]['outdoorSensorId'])try{const _0x57ae46=await _0x4f74d9['getForeignStateAsync'](_0x4f74d9['config'][_0x294079(0x1a3)]);if(_0x57ae46&&_0x57ae46[_0x294079(0x18f)]!==undefined&&_0x57ae46[_0x294079(0x18f)]!==null)return parseFloat(_0x57ae46[_0x294079(0x18f)]);}catch(_0x2b52e1){}const _0x138041=_0x4f74d9['config'][_0x294079(0x224)];if(!_0x4f74d9[_0x294079(0x25d)][_0x294079(0x1be)]||!_0x138041)return null;try{let _0x166b1a='';if(_0x138041[_0x294079(0x281)](_0x294079(0x267)))_0x166b1a=_0x138041+_0x294079(0x1ea);else{if(_0x138041[_0x294079(0x281)](_0x294079(0x206)))_0x166b1a=_0x138041+_0x294079(0x1c2);else{if(_0x138041['includes'](_0x294079(0x249)))_0x166b1a=_0x138041+_0x294079(0x19a);else{if(_0x138041['includes']('weatherunderground'))_0x166b1a=_0x138041+'.forecast.current.temp';}}}if(_0x166b1a){const _0x2ff5f2=await _0x4f74d9['getForeignStateAsync'](_0x166b1a);if(_0x2ff5f2&&_0x2ff5f2[_0x294079(0x18f)]!==undefined&&_0x2ff5f2['val']!==null)return parseFloat(_0x2ff5f2[_0x294079(0x18f)]);}}catch(_0x1b583f){}return null;}async function recordSequence(_0x3d9ae0,_0x19daf2){const _0x3776af=a0_0x3f727b,_0x5064ca=(_0x19daf2[_0x3776af(0x2b9)]||'')[_0x3776af(0x2b1)](),_0x5495b4=[_0x3776af(0x289),'bewegung','prÃ¤senz',_0x3776af(0x21c),_0x3776af(0x2ba),_0x3776af(0x1dc),_0x3776af(0x1c9),_0x3776af(0x291),'fenster',_0x3776af(0x269),'kontakt',_0x3776af(0x19b),_0x3776af(0x283),_0x3776af(0x23d),'schalter','dimmer',_0x3776af(0x24f)];if(!_0x5495b4[_0x3776af(0x166)](_0x39873b=>_0x5064ca[_0x3776af(0x281)](_0x39873b)))return;if(!_0x19daf2[_0x3776af(0x261)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x3776af(0x213)]({'loc':_0x19daf2['location']||'Unknown','id':_0x19daf2['id'],'ts':Date[_0x3776af(0x1e9)]()}),sequenceTimer=setTimeout(async()=>{const _0x1e8b9e=_0x3776af;if(activeSequence[_0x1e8b9e(0x1ee)]>0x1)await saveCompletedSequence(_0x3d9ae0);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x451fc7){const _0x1e627b=a0_0x3f727b;try{const _0x38d0ca=await _0x451fc7[_0x1e627b(0x1b3)](_0x1e627b(0x1fb));let _0x562dea=[];if(_0x38d0ca&&_0x38d0ca[_0x1e627b(0x18f)])try{_0x562dea=JSON[_0x1e627b(0x168)](_0x38d0ca[_0x1e627b(0x18f)]);}catch(_0x439e7d){}const _0x3cf732=activeSequence[0x0]['ts'],_0x4554dc=activeSequence[_0x1e627b(0x2b5)](_0x594003=>({'loc':_0x594003[_0x1e627b(0x2bc)],'t_delta':Math[_0x1e627b(0x176)]((_0x594003['ts']-_0x3cf732)/0x3e8)})),_0x16a463={'timestamp':new Date(_0x3cf732)[_0x1e627b(0x1b2)](),'steps':_0x4554dc,'duration':Math[_0x1e627b(0x176)]((activeSequence[activeSequence[_0x1e627b(0x1ee)]-0x1]['ts']-_0x3cf732)/0x3e8),'daytime':new Date(_0x3cf732)[_0x1e627b(0x26a)]()};_0x562dea['push'](_0x16a463);if(_0x562dea[_0x1e627b(0x1ee)]>MAX_TRAINING_SET_SIZE)_0x562dea['shift']();await _0x451fc7['setStateAsync'](_0x1e627b(0x1fb),{'val':JSON[_0x1e627b(0x1a9)](_0x562dea),'ack':!![]}),runSecurityCheck(_0x451fc7,_0x16a463);}catch(_0x3c8628){_0x451fc7[_0x1e627b(0x2e3)][_0x1e627b(0x2aa)]('[RECORDER]\x20Error:\x20'+_0x3c8628[_0x1e627b(0x1da)]);}}function runSecurityCheck(_0x1b7409,_0x20bb4b){const _0x538abf=a0_0x3f727b;if(!_0x1b7409[_0x538abf(0x297)])return;sendToPython(_0x1b7409,'ANALYZE_SEQUENCE',{'sequence':_0x20bb4b});}async function createDailyDigest(_0x17f2c2){const _0x29d6e5=a0_0x3f727b;if(!_0x17f2c2[_0x29d6e5(0x297)])return;await _0x17f2c2[_0x29d6e5(0x2ed)](LTM_DP_STATUS,{'val':_0x29d6e5(0x192),'ack':!![]});if(!_0x17f2c2[_0x29d6e5(0x229)]||_0x17f2c2[_0x29d6e5(0x17b)][_0x29d6e5(0x1ee)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x17f2c2[_0x29d6e5(0x2ed)](LTM_DP_STATUS,{'val':_0x29d6e5(0x179),'ack':!![]});return;}const _0x1d5f7e=JSON['parse'](JSON[_0x29d6e5(0x1a9)](_0x17f2c2[_0x29d6e5(0x17b)])),_0x2a5322=_0x1d5f7e['length'],_0x43fb7a=_0x29d6e5(0x2d6)+JSON[_0x29d6e5(0x1a9)](_0x1d5f7e);try{const _0x1d25f3=await _0x17f2c2['geminiModel'][_0x29d6e5(0x284)](_0x43fb7a),_0x55effe=JSON[_0x29d6e5(0x168)](_0x1d25f3[_0x29d6e5(0x21a)][_0x29d6e5(0x1cb)]()[_0x29d6e5(0x256)](/```json|```/g,'')[_0x29d6e5(0x1e4)]()),_0x6ed940={'timestamp':new Date()['toISOString'](),'eventCount':_0x2a5322,'summary':_0x55effe[_0x29d6e5(0x2ef)]||_0x29d6e5(0x19c),'activityLevel':_0x55effe[_0x29d6e5(0x1c0)]||_0x29d6e5(0x286),'systemMode':_0x17f2c2[_0x29d6e5(0x2f7)]};_0x17f2c2[_0x29d6e5(0x215)]['push'](_0x6ed940),await saveDailyDigests(_0x17f2c2),_0x17f2c2[_0x29d6e5(0x17b)]=[],await saveRawEventLog(_0x17f2c2),await _0x17f2c2[_0x29d6e5(0x2ed)](LTM_DP_STATUS,{'val':_0x29d6e5(0x2cd),'ack':!![]});if(_0x17f2c2[_0x29d6e5(0x297)])sendToPython(_0x17f2c2,_0x29d6e5(0x219),{'digest':_0x6ed940});}catch(_0x178c78){_0x17f2c2['log'][_0x29d6e5(0x2aa)](_0x178c78[_0x29d6e5(0x1da)]);}}async function runBaselineDriftAnalysis(_0x55d1a2){const _0x1d387d=a0_0x3f727b;if(!_0x55d1a2[_0x1d387d(0x297)]||!_0x55d1a2[_0x1d387d(0x229)])return;const _0x38c07a=_0x55d1a2[_0x1d387d(0x25d)]['ltmStbWindowDays']||0xe;if(_0x55d1a2[_0x1d387d(0x215)][_0x1d387d(0x1ee)]<_0x38c07a+0x7){await _0x55d1a2[_0x1d387d(0x2ed)](LTM_DP_DRIFT_STATUS,{'val':'N/A\x20(Learning)','ack':!![]});return;}const _0x2da483=_0x55d1a2['dailyDigests']['slice'](-_0x38c07a),_0x15b606=_0x55d1a2[_0x1d387d(0x215)][_0x1d387d(0x199)](0x0,_0x55d1a2[_0x1d387d(0x215)][_0x1d387d(0x1ee)]-_0x38c07a),_0x36ccb4=_0x1d387d(0x20e)+JSON['stringify'](_0x15b606)+'\x0aSTB:\x20'+JSON[_0x1d387d(0x1a9)](_0x2da483);try{const _0x5df131=await _0x55d1a2[_0x1d387d(0x229)]['generateContent'](_0x36ccb4),_0x2e3889=JSON[_0x1d387d(0x168)](_0x5df131['response']['text']()[_0x1d387d(0x256)](/```json|```/g,'')['trim']());_0x2e3889['baselineDrift']&&(await _0x55d1a2[_0x1d387d(0x2ed)](LTM_DP_DRIFT_STATUS,{'val':_0x2e3889['baselineDrift'],'ack':!![]}),await _0x55d1a2[_0x1d387d(0x2ed)](LTM_DP_DRIFT_DETAILS,{'val':_0x2e3889['driftDetails'],'ack':!![]}),await _0x55d1a2[_0x1d387d(0x2ed)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x1d387d(0x1e9)](),'ack':!![]}));}catch(_0x10cd10){}}async function sendMorningBriefing(_0x3539a9){const _0x50185f=a0_0x3f727b;if(!_0x3539a9[_0x50185f(0x229)])return;try{const _0x335273=_0x50185f(0x222),_0x22c213=await _0x3539a9[_0x50185f(0x229)][_0x50185f(0x284)](_0x335273),_0x16c982=_0x22c213[_0x50185f(0x21a)][_0x50185f(0x1cb)]();sendNotification(_0x3539a9,'ðŸŒ…\x20Morning\x20Briefing:\x0a'+_0x16c982);}catch(_0x12d19c){_0x3539a9[_0x50185f(0x2e3)][_0x50185f(0x2aa)](_0x50185f(0x1bd)+_0x12d19c[_0x50185f(0x1da)]);}}function stopPythonService(_0x39915b){const _0x1fc8cc=a0_0x3f727b;if(_0x39915b[_0x1fc8cc(0x1b0)]){try{_0x39915b[_0x1fc8cc(0x1b0)][_0x1fc8cc(0x1fc)]();}catch(_0x4d19ec){}_0x39915b['pythonProcess']=null;}}function sendToPython(_0x7a669a,_0x4abaa8,_0x57d284={}){const _0x20f6b2=a0_0x3f727b;if(!_0x7a669a[_0x20f6b2(0x1b0)]||!_0x7a669a[_0x20f6b2(0x1b0)][_0x20f6b2(0x29f)][_0x20f6b2(0x1cd)])return;const _0x7258e=JSON['stringify']({'command':_0x4abaa8,..._0x57d284});try{_0x7a669a[_0x20f6b2(0x1b0)][_0x20f6b2(0x29f)][_0x20f6b2(0x1ec)](_0x7258e+'\x0a');}catch(_0x22f798){}}function runPythonHealthCheck(_0x2b162a){const _0x9a0192=a0_0x3f727b;if(!_0x2b162a['dailyDigests']||_0x2b162a[_0x9a0192(0x215)][_0x9a0192(0x1ee)]<0x2)return;const _0x2776ee=_0x2b162a[_0x9a0192(0x215)]['map'](_0x1b3e6f=>{const _0x107867=(_0x1b3e6f['activityLevel']||'')['toLowerCase']();return ACTIVITY_LEVEL_MAP[_0x107867]||0x32;});sendToPython(_0x2b162a,_0x9a0192(0x2ec),{'values':_0x2776ee,'tag':_0x9a0192(0x2bd)});}function handlePythonResult(_0x43e0b4,_0xd04b81){const _0x3133d0=a0_0x3f727b;if(_0xd04b81['type']==='PONG')_0x43e0b4[_0x3133d0(0x2e3)][_0x3133d0(0x2f1)](_0x3133d0(0x165));else{if(_0xd04b81[_0x3133d0(0x2b9)]===_0x3133d0(0x17c)){const {anomaly_score:_0xdaaca3,is_anomaly:_0x56a84a,threshold:_0x5785cc,explanation:_0x47b248}=_0xd04b81[_0x3133d0(0x28b)];_0x43e0b4[_0x3133d0(0x2e3)]['info'](_0x3133d0(0x178)+_0xdaaca3['toFixed'](0x5)+_0x3133d0(0x239)+(_0x56a84a?'ANOMALY':'OK')),_0x43e0b4['setStateAsync'](_0x3133d0(0x22a),{'val':_0xdaaca3,'ack':!![]}),_0x43e0b4[_0x3133d0(0x2ed)](_0x3133d0(0x22d),{'val':new Date()[_0x3133d0(0x1b2)](),'ack':!![]});if(_0x5785cc)_0x43e0b4[_0x3133d0(0x2ed)](_0x3133d0(0x1d1),{'val':_0x5785cc,'ack':!![]});if(_0x56a84a){let _0x53d5fb='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0xdaaca3[_0x3133d0(0x1b6)](0x4)+')';if(_0x47b248&&_0x47b248!==_0x3133d0(0x1f2))_0x53d5fb+='\x0aGrund:\x20'+_0x47b248;_0x43e0b4['setStateAsync'](_0x3133d0(0x1ed),{'val':!![],'ack':!![]}),_0x43e0b4['setStateAsync'](_0x3133d0(0x20b),{'val':_0x53d5fb,'ack':!![]}),sendNotification(_0x43e0b4,_0x3133d0(0x1d9)+_0x53d5fb,![],!![]);}}else{if(_0xd04b81['type']==='TRAINING_COMPLETE'){const _0x2c9d4d=_0xd04b81[_0x3133d0(0x28b)][_0x3133d0(0x2c4)]||'',_0x538173=_0xd04b81[_0x3133d0(0x28b)][_0x3133d0(0x27f)],_0x38c56b=_0xd04b81[_0x3133d0(0x28b)]['success']?_0x3133d0(0x276)+new Date()[_0x3133d0(0x243)]()+'\x20('+_0x2c9d4d+')':_0x3133d0(0x2c2)+_0xd04b81[_0x3133d0(0x28b)][_0x3133d0(0x279)];_0x43e0b4[_0x3133d0(0x2ed)](_0x3133d0(0x2d4),{'val':_0x38c56b,'ack':!![]});if(_0xd04b81['payload']['success']&&_0x538173)_0x43e0b4['setStateAsync']('analysis.security.currentThreshold',{'val':_0x538173,'ack':!![]});}else{if(_0xd04b81['type']===_0x3133d0(0x2c9)){const {patterns:_0x5054ad}=_0xd04b81['payload'];if(_0x5054ad&&_0x5054ad[_0x3133d0(0x1ee)]>0x0){_0x43e0b4['log'][_0x3133d0(0x1e6)](_0x3133d0(0x2c8)+_0x5054ad[_0x3133d0(0x1ee)]+_0x3133d0(0x198)),_0x43e0b4[_0x3133d0(0x2ed)](_0x3133d0(0x1f6),{'val':JSON[_0x3133d0(0x1a9)](_0x5054ad),'ack':!![]});const _0x326fce=_0x5054ad[0x0],_0x2f094c=_0x3133d0(0x1b9)+_0x326fce[_0x3133d0(0x17d)]+'\x20('+(_0x326fce[_0x3133d0(0x2d5)]*0x64)[_0x3133d0(0x1b6)](0x0)+'%)';_0x43e0b4[_0x3133d0(0x2ed)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),_0x43e0b4[_0x3133d0(0x2ed)](_0x3133d0(0x258),{'val':_0x2f094c,'ack':!![]});}else _0x43e0b4['log'][_0x3133d0(0x1e6)](_0x3133d0(0x2fa)),_0x43e0b4[_0x3133d0(0x2ed)](_0x3133d0(0x2f4),{'val':![],'ack':!![]}),_0x43e0b4[_0x3133d0(0x2ed)](_0x3133d0(0x1f6),{'val':'[]','ack':!![]});}else{if(_0xd04b81[_0x3133d0(0x2b9)]==='ENERGY_TRAIN_RESULT'){if(_0xd04b81[_0x3133d0(0x28b)][_0x3133d0(0x164)])try{const _0x3ccdef=JSON['parse'](_0xd04b81[_0x3133d0(0x28b)][_0x3133d0(0x2c4)]);if(_0x3ccdef[_0x3133d0(0x18d)])_0x43e0b4[_0x3133d0(0x2ed)](_0x3133d0(0x220),{'val':JSON['stringify'](_0x3ccdef[_0x3133d0(0x18d)]),'ack':!![]});if(_0x3ccdef[_0x3133d0(0x1d0)])_0x43e0b4['setStateAsync'](_0x3133d0(0x172),{'val':JSON[_0x3133d0(0x1a9)](_0x3ccdef[_0x3133d0(0x1d0)]),'ack':!![]});}catch(_0x84a034){}}else{if(_0xd04b81['type']===_0x3133d0(0x2f5)){if(_0xd04b81[_0x3133d0(0x28b)][_0x3133d0(0x164)])_0x43e0b4[_0x3133d0(0x2e3)][_0x3133d0(0x1e6)](_0x3133d0(0x16e));}else{if(_0xd04b81[_0x3133d0(0x2b9)]===_0x3133d0(0x202))_0x43e0b4[_0x3133d0(0x2ed)](_0x3133d0(0x27c),{'val':new Date()['toISOString'](),'ack':!![]}),_0x43e0b4['setStateAsync'](_0x3133d0(0x190),{'val':_0xd04b81[_0x3133d0(0x28b)][_0x3133d0(0x2b2)],'ack':!![]});else{if(_0xd04b81[_0x3133d0(0x2b9)]==='TREND_RESULT')_0x43e0b4[_0x3133d0(0x2ed)](_0x3133d0(0x1a0),{'val':_0xd04b81['payload'][_0x3133d0(0x2e7)],'ack':!![]}),_0x43e0b4[_0x3133d0(0x2ed)]('analysis.health.trendValue',{'val':_0xd04b81[_0x3133d0(0x28b)][_0x3133d0(0x2b6)],'ack':!![]});else{if(_0xd04b81[_0x3133d0(0x2b9)]==='GAIT_RESULT'){const {speed_trend:_0x67c5ab}=_0xd04b81[_0x3133d0(0x28b)];if(_0x67c5ab!==undefined)_0x43e0b4[_0x3133d0(0x2ed)](_0x3133d0(0x28c),{'val':_0x67c5ab,'ack':!![]});}else{if(_0xd04b81[_0x3133d0(0x2b9)]===_0x3133d0(0x24b)){const {forecast:_0x8d77ce}=_0xd04b81['payload'];if(_0x8d77ce)_0x43e0b4['setStateAsync'](_0x3133d0(0x22e),{'val':JSON['stringify'](_0x8d77ce),'ack':!![]});}else{if(_0xd04b81[_0x3133d0(0x2b9)]===_0x3133d0(0x1d7)){const {data:_0x305d7d}=_0xd04b81[_0x3133d0(0x28b)];_0x305d7d&&(_0x43e0b4[_0x3133d0(0x2e3)][_0x3133d0(0x1e6)](_0x3133d0(0x2da)),_0x43e0b4[_0x3133d0(0x2ed)](_0x3133d0(0x1b1),{'val':JSON[_0x3133d0(0x1a9)](_0x305d7d),'ack':!![]}));}}}}}}}}}}}}function startPythonService(_0x25f0fe){const _0x1a3298=a0_0x3f727b;let _0x12abf8=_0x1a3298(0x2a7);if(fs[_0x1a3298(0x2d7)](installer[_0x1a3298(0x2b7)]))_0x12abf8=installer['PYTHON_EXE'];try{const _0x278a96=path[_0x1a3298(0x1c8)](__dirname,'python_service',_0x1a3298(0x1e0));_0x25f0fe[_0x1a3298(0x1b0)]=spawn(_0x12abf8,[_0x278a96]),_0x25f0fe[_0x1a3298(0x1b0)][_0x1a3298(0x173)]['on'](_0x1a3298(0x24c),_0xb6a60b=>{const _0x2d5c89=_0x1a3298,_0x2b667d=_0xb6a60b['toString']()[_0x2d5c89(0x2e0)]('\x0a');_0x2b667d[_0x2d5c89(0x226)](_0x293a17=>{const _0x180e55=_0x2d5c89,_0x265e17=_0x293a17[_0x180e55(0x1e4)]();if(!_0x265e17)return;if(_0x265e17[_0x180e55(0x186)](_0x180e55(0x2b0)))_0x25f0fe[_0x180e55(0x2e3)][_0x180e55(0x2f1)]('[PYTHON]\x20'+_0x265e17[_0x180e55(0x262)](0x5)[_0x180e55(0x1e4)]());else{if(_0x265e17[_0x180e55(0x186)](_0x180e55(0x1d3)))try{const _0x19be99=JSON[_0x180e55(0x168)](_0x265e17[_0x180e55(0x262)](0x8)['trim']());handlePythonResult(_0x25f0fe,_0x19be99);}catch(_0x20025d){}}});}),_0x25f0fe[_0x1a3298(0x1b0)]['on'](_0x1a3298(0x1bb),_0x33668f=>{const _0x5d78fe=_0x1a3298;_0x25f0fe[_0x5d78fe(0x1b0)]=null;});}catch(_0x59a813){_0x25f0fe[_0x1a3298(0x2e3)][_0x1a3298(0x2aa)](_0x1a3298(0x2f9)+_0x59a813[_0x1a3298(0x1da)]);}}async function runAutopilot(_0x52fafb){const _0xec5420=a0_0x3f727b;_0x52fafb[_0xec5420(0x2e3)][_0xec5420(0x2f1)](_0xec5420(0x234)),await runGeminiAnalysis(_0x52fafb),updateHealthVector(_0x52fafb),triggerGaitAnalysis(_0x52fafb),triggerEnergyPrediction(_0x52fafb);}async function triggerGaitAnalysis(_0x365547){const _0x1b5059=a0_0x3f727b;if(!_0x365547[_0x1b5059(0x297)])return;try{const _0x5a72fe=await _0x365547[_0x1b5059(0x1b3)](_0x1b5059(0x1fb));_0x5a72fe&&_0x5a72fe['val']&&sendToPython(_0x365547,_0x1b5059(0x248),{'sequences':JSON[_0x1b5059(0x168)](_0x5a72fe[_0x1b5059(0x18f)])});}catch(_0x33415c){}}async function triggerEnergyPrediction(_0x890f4b){const _0x586cb0=a0_0x3f727b;if(!_0x890f4b[_0x586cb0(0x297)])return;try{const _0x3f6317=await getOutsideTemperatureNumeric(_0x890f4b);if(_0x3f6317===null)return;const _0x7b3017={},_0x5b0b52=_0x890f4b[_0x586cb0(0x25d)][_0x586cb0(0x20d)]||[];for(const _0x5709c0 of _0x5b0b52){if(_0x5709c0[_0x586cb0(0x2b9)]===_0x586cb0(0x2d0)&&_0x5709c0[_0x586cb0(0x1c4)]){const _0x15c0fc=_0x890f4b[_0x586cb0(0x29e)][_0x5709c0['id']];if(_0x15c0fc!==undefined)_0x7b3017[_0x5709c0[_0x586cb0(0x1c4)]]=_0x15c0fc;}}Object['keys'](_0x7b3017)[_0x586cb0(0x1ee)]>0x0&&sendToPython(_0x890f4b,_0x586cb0(0x259),{'current_temps':_0x7b3017,'t_out':_0x3f6317});}catch(_0x3ed053){}}function updateHealthVector(_0x2b8d82){const _0x565bf0=a0_0x3f727b;if(!_0x2b8d82['rawEventLog']||_0x2b8d82[_0x565bf0(0x17b)][_0x565bf0(0x1ee)]===0x0)return;const _0x48c106=new Array(0x60)[_0x565bf0(0x1f3)](0x0),_0xeb83be=new Date()['setHours'](0x0,0x0,0x0,0x0);_0x2b8d82[_0x565bf0(0x17b)][_0x565bf0(0x226)](_0x5d7e87=>{const _0x5b45f0=_0x565bf0,_0x5eaad0=new Date(_0x5d7e87[_0x5b45f0(0x1d4)]);if(_0x5eaad0[_0x5b45f0(0x1a6)]()>=_0xeb83be){const _0x2ea244=_0x5eaad0[_0x5b45f0(0x26a)](),_0x52417c=_0x5eaad0[_0x5b45f0(0x1d2)](),_0x53d2e0=_0x2ea244*0x4+Math[_0x5b45f0(0x2b3)](_0x52417c/0xf);if(_0x53d2e0>=0x0&&_0x53d2e0<0x60)_0x48c106[_0x53d2e0]++;}}),_0x2b8d82[_0x565bf0(0x2ed)]('analysis.health.todayVector',{'val':JSON[_0x565bf0(0x1a9)](_0x48c106),'ack':!![]});}async function getWeatherContext(_0x264dab){const _0x43e608=a0_0x3f727b;if(!_0x264dab[_0x43e608(0x25d)]['useWeather']||!_0x264dab[_0x43e608(0x25d)]['weatherInstance'])return _0x43e608(0x2d2);try{const _0x3d546a=_0x264dab[_0x43e608(0x25d)][_0x43e608(0x224)];let _0xc9aec0=await _0x264dab[_0x43e608(0x201)](_0x3d546a+_0x43e608(0x1ea));if(!_0xc9aec0)_0xc9aec0=await _0x264dab[_0x43e608(0x201)](_0x3d546a+'.forecast.current.temperature');let _0x59e189=await _0x264dab[_0x43e608(0x201)](_0x3d546a+'.Current.WeatherText');if(!_0x59e189)_0x59e189=await _0x264dab[_0x43e608(0x201)](_0x3d546a+_0x43e608(0x25b));if(_0xc9aec0&&_0x59e189)return _0xc9aec0[_0x43e608(0x18f)]+_0x43e608(0x2df)+_0x59e189[_0x43e608(0x18f)];}catch(_0x287db7){}return _0x43e608(0x1aa);}async function getCalendarContext(_0x541e37){const _0x2de86b=a0_0x3f727b;if(!_0x541e37['config']['useCalendar']||!_0x541e37[_0x2de86b(0x25d)][_0x2de86b(0x171)])return _0x2de86b(0x174);return'Keine\x20Termine.';}async function getCalendarNames(_0x25966f,_0x50b063){return[];}async function saveFeedback(_0x37d3d3,_0x3619df){const _0x166660=a0_0x3f727b;_0x37d3d3[_0x166660(0x2e3)][_0x166660(0x1e6)](_0x166660(0x203)+_0x3619df[_0x166660(0x2db)]);}async function runGeminiAnalysis(_0x35d995,_0x6c0ea6=''){const _0x3945f4=a0_0x3f727b;if(!_0x35d995[_0x3945f4(0x229)])return;if(_0x35d995['eventHistory'][_0x3945f4(0x1ee)]===0x0)return;const _0x16b285=_0x35d995[_0x3945f4(0x2ae)][_0x3945f4(0x199)](0x0,0xf),_0xf91836=await getWeatherContext(_0x35d995),_0x387c8f=_0x35d995[_0x3945f4(0x2f7)],_0x1b1713=PERSONA_MAPPING[_0x35d995[_0x3945f4(0x25d)]['aiPersona']||_0x3945f4(0x217)],_0x22d097=_0x35d995[_0x3945f4(0x25d)][_0x3945f4(0x287)]||'Keine\x20Details.';let _0x185d4d=_0x3945f4(0x191);try{const _0x556339=await _0x35d995['getStateAsync'](_0x3945f4(0x246));if(_0x556339&&_0x556339['val'])_0x185d4d=_0x556339[_0x3945f4(0x18f)];}catch(_0x322739){}let _0x4c5abe=![];try{const _0x1862e4=await _0x35d995[_0x3945f4(0x1b3)](_0x3945f4(0x2dd));if(_0x1862e4&&_0x1862e4['val'])_0x4c5abe=!![];}catch(_0x117852){}const _0x47c43c='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x1b1713+'.\x20KONTEXT:\x20'+_0x22d097+_0x3945f4(0x26c)+_0x387c8f+'.\x20WETTER:\x20'+_0xf91836+_0x3945f4(0x29b)+_0x185d4d+_0x3945f4(0x2c3)+JSON[_0x3945f4(0x1a9)](_0x16b285)+'.\x20EMERGENCY:\x20'+_0x6c0ea6+'.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}';try{const _0xb98a1f=await _0x35d995[_0x3945f4(0x229)][_0x3945f4(0x284)](_0x47c43c),_0x34544c=JSON['parse'](_0xb98a1f[_0x3945f4(0x21a)][_0x3945f4(0x1cb)]()[_0x3945f4(0x256)](/```json|```/g,'')[_0x3945f4(0x1e4)]());await _0x35d995[_0x3945f4(0x2ed)](_0x3945f4(0x18b),{'val':JSON[_0x3945f4(0x1a9)](_0x34544c),'ack':!![]});if(_0x34544c[_0x3945f4(0x2ef)])await _0x35d995[_0x3945f4(0x2ed)](_0x3945f4(0x2e6),{'val':_0x34544c[_0x3945f4(0x2ef)],'ack':!![]});const _0x1278f3={'timestamp':Date[_0x3945f4(0x1e9)](),'id':Date[_0x3945f4(0x1e9)]()['toString'](),'analysis':{'activity':{'summary':_0x34544c[_0x3945f4(0x2ef)],'isAlert':_0x34544c['isAlert'],'alertReason':_0x34544c[_0x3945f4(0x25f)]},'comfort':{'automationProposal':_0x34544c[_0x3945f4(0x21e)]}}};await updateAnalysisHistory(_0x35d995,_0x1278f3);const _0x10f4ef=_0x34544c[_0x3945f4(0x175)]||![];_0x10f4ef!==_0x35d995[_0x3945f4(0x194)]&&(await _0x35d995[_0x3945f4(0x2ed)](_0x3945f4(0x1ed),{'val':_0x10f4ef,'ack':!![]}),_0x35d995['lastAlertState']=_0x10f4ef,_0x10f4ef&&(await _0x35d995[_0x3945f4(0x2ed)](_0x3945f4(0x20b),{'val':_0x34544c['alertReason'],'ack':!![]}),sendNotification(_0x35d995,'âš ï¸\x20ALARM:\x20'+_0x34544c[_0x3945f4(0x25f)],![],_0x34544c[_0x3945f4(0x2c5)])));if(_0x34544c[_0x3945f4(0x21e)]&&_0x34544c['automationProposal'][_0x3945f4(0x1b8)]){await _0x35d995[_0x3945f4(0x2ed)](_0x3945f4(0x2f4),{'val':!![],'ack':!![]}),await _0x35d995[_0x3945f4(0x2ed)](_0x3945f4(0x258),{'val':_0x34544c[_0x3945f4(0x21e)][_0x3945f4(0x225)],'ack':!![]}),await _0x35d995['setStateAsync'](_0x3945f4(0x2f0),{'val':_0x34544c['automationProposal']['targetId'],'ack':!![]}),await _0x35d995[_0x3945f4(0x2ed)](_0x3945f4(0x1c1),{'val':JSON[_0x3945f4(0x1a9)](_0x34544c['automationProposal'][_0x3945f4(0x1db)]),'ack':!![]});if(_0x4c5abe)executeAutomationAction(_0x35d995);}}catch(_0x2720ed){_0x35d995['log'][_0x3945f4(0x2aa)](_0x3945f4(0x2d3)+_0x2720ed[_0x3945f4(0x1da)]);}}async function startSystem(_0x27d7a7){const _0x2e0e35=a0_0x3f727b;_0x27d7a7[_0x2e0e35(0x2e3)]['info']('ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...'),await initZombies(_0x27d7a7);try{_0x27d7a7[_0x2e0e35(0x297)]=await checkLicense(_0x27d7a7[_0x2e0e35(0x25d)][_0x2e0e35(0x1a5)]);}catch(_0x568637){}if(!_0x27d7a7[_0x2e0e35(0x25d)][_0x2e0e35(0x2a0)]||_0x27d7a7['config'][_0x2e0e35(0x2a0)]<0.1)_0x27d7a7[_0x2e0e35(0x25d)]['inactivityThresholdHours']=0xc;await initHistory(_0x27d7a7),await initSystemConfig(_0x27d7a7);if(_0x27d7a7[_0x2e0e35(0x25d)][_0x2e0e35(0x211)])try{_0x27d7a7[_0x2e0e35(0x18c)]=new GoogleGenerativeAI(_0x27d7a7[_0x2e0e35(0x25d)][_0x2e0e35(0x211)]),_0x27d7a7[_0x2e0e35(0x229)]=_0x27d7a7['genAI'][_0x2e0e35(0x193)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x2e0e35(0x2ce)}}),_0x27d7a7['log'][_0x2e0e35(0x1e6)](_0x2e0e35(0x1b4));}catch(_0xc23c27){_0x27d7a7['log']['error'](_0x2e0e35(0x16c)+_0xc23c27[_0x2e0e35(0x1da)]);}await createAllObjects(_0x27d7a7),await loadSystemMode(_0x27d7a7),await loadRawEventLog(_0x27d7a7),await loadDailyDigests(_0x27d7a7),_0x27d7a7[_0x2e0e35(0x1ac)](_0x2e0e35(0x254)),_0x27d7a7[_0x2e0e35(0x1ac)](LTM_DP_TRIGGER_DIGEST),_0x27d7a7[_0x2e0e35(0x1ac)](_0x2e0e35(0x1ad)),_0x27d7a7[_0x2e0e35(0x1ac)](_0x2e0e35(0x272)),_0x27d7a7[_0x2e0e35(0x1ac)](_0x2e0e35(0x19f)),_0x27d7a7['subscribeStates'](_0x2e0e35(0x2dd)),_0x27d7a7[_0x2e0e35(0x1ac)]('analysis.training.triggerSecurity'),_0x27d7a7[_0x2e0e35(0x1ac)](_0x2e0e35(0x2ee)),_0x27d7a7[_0x2e0e35(0x1ac)](_0x2e0e35(0x2dc)),_0x27d7a7[_0x2e0e35(0x1ac)](_0x2e0e35(0x1bc)),_0x27d7a7[_0x2e0e35(0x1ac)](_0x2e0e35(0x170)),await initSensorSubscriptions(_0x27d7a7),await initPresenceSubscriptions(_0x27d7a7),await setupTelegramListener(_0x27d7a7),setTimeout(()=>checkWifiPresence(_0x27d7a7),0x1388);if(_0x27d7a7[_0x2e0e35(0x16b)])clearInterval(_0x27d7a7[_0x2e0e35(0x16b)]);const _0x3d9381=_0x27d7a7[_0x2e0e35(0x25d)]['analysisInterval']||0xf;_0x3d9381>0x0&&(_0x27d7a7[_0x2e0e35(0x16b)]=setInterval(()=>{runAutopilot(_0x27d7a7);},_0x3d9381*0x3c*0x3e8)),schedulers[_0x2e0e35(0x244)](_0x27d7a7,()=>createDailyDigest(_0x27d7a7)),schedulers[_0x2e0e35(0x20f)](_0x27d7a7),schedulers[_0x2e0e35(0x29a)](_0x27d7a7,()=>runBaselineDriftAnalysis(_0x27d7a7)),schedulers[_0x2e0e35(0x292)](_0x27d7a7,()=>sendMorningBriefing(_0x27d7a7)),startPythonService(_0x27d7a7),setTimeout(()=>{const _0xfcfea8=_0x2e0e35;_0x27d7a7[_0xfcfea8(0x1b0)]&&(runPythonHealthCheck(_0x27d7a7),triggerGaitAnalysis(_0x27d7a7),triggerEnergyPrediction(_0x27d7a7)),updateHealthVector(_0x27d7a7);},0x1388);}class CogniLiving extends utils[a0_0x3f727b(0x1f4)]{constructor(_0x395dc3){const _0x3c10b9=a0_0x3f727b;super({..._0x395dc3,'name':_0x3c10b9(0x1f7)}),this[_0x3c10b9(0x2ae)]=[],this[_0x3c10b9(0x2a8)]=[],this[_0x3c10b9(0x17b)]=[],this[_0x3c10b9(0x215)]=[],this['sensorLastValues']={},this[_0x3c10b9(0x25e)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x3c10b9(0x2e5)]=!![],this[_0x3c10b9(0x2be)]=null,this[_0x3c10b9(0x1d6)]=null,this[_0x3c10b9(0x197)]=![],this[_0x3c10b9(0x18c)]=null,this[_0x3c10b9(0x229)]=null,this[_0x3c10b9(0x2f7)]=SYSTEM_MODES[_0x3c10b9(0x2ca)],this['isProVersion']=![],this[_0x3c10b9(0x194)]=![],this['systemUUID']=_0x3c10b9(0x23a),this[_0x3c10b9(0x16b)]=null,this['ltmJob']=null,this[_0x3c10b9(0x268)]=null,this[_0x3c10b9(0x2cc)]=null,this[_0x3c10b9(0x196)]=null,this['pythonProcess']=null,this['dependencyInstallInProgress']=![],this['on'](_0x3c10b9(0x1af),this[_0x3c10b9(0x22b)][_0x3c10b9(0x2e9)](this)),this['on'](_0x3c10b9(0x2a3),this[_0x3c10b9(0x25c)]['bind'](this)),this['on'](_0x3c10b9(0x1d8),this['onUnload'][_0x3c10b9(0x2e9)](this)),this['on'](_0x3c10b9(0x1da),this[_0x3c10b9(0x1f8)][_0x3c10b9(0x2e9)](this));}async[a0_0x3f727b(0x22b)](){const _0x25e3ea=a0_0x3f727b;this['log']['info'](_0x25e3ea(0x250)+this[_0x25e3ea(0x2bf)]+')\x20-\x20SAFE\x20BOOT');if(!installer[_0x25e3ea(0x2a1)](this,()=>startSystem(this)))return;}['onUnload'](_0x5b2ab1){const _0x543f72=a0_0x3f727b;if(this[_0x543f72(0x16b)])clearInterval(this[_0x543f72(0x16b)]);if(this[_0x543f72(0x2cc)])clearInterval(this[_0x543f72(0x2cc)]);if(this[_0x543f72(0x208)])this[_0x543f72(0x208)]['cancel']();if(this['modeResetJob'])this[_0x543f72(0x268)]['cancel']();if(this[_0x543f72(0x196)])this[_0x543f72(0x196)][_0x543f72(0x2cb)]();if(this['exitTimer'])clearTimeout(this[_0x543f72(0x2be)]);if(this['exitGraceTimer'])clearTimeout(this[_0x543f72(0x1d6)]);stopPythonService(this),_0x5b2ab1();}async[a0_0x3f727b(0x25c)](_0x4a9b71,_0x14cd02){const _0x47e385=a0_0x3f727b;if(!_0x14cd02||this[_0x47e385(0x23c)])return;if(_0x4a9b71[_0x47e385(0x281)]('telegram')&&_0x4a9b71['endsWith']('communicate.request')&&_0x14cd02['val']){await handleTelegramResponse(this,_0x14cd02[_0x47e385(0x18f)]);return;}if(_0x4a9b71===this[_0x47e385(0x2ad)]+'.'+SYSTEM_DP_MODE){if(_0x14cd02[_0x47e385(0x18f)]&&Object['values'](SYSTEM_MODES)[_0x47e385(0x281)](_0x14cd02[_0x47e385(0x18f)])){this[_0x47e385(0x2f7)]=_0x14cd02[_0x47e385(0x18f)];if(_0x14cd02[_0x47e385(0x18f)]===SYSTEM_MODES[_0x47e385(0x230)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x14cd02[_0x47e385(0x1ce)])this['setState'](_0x4a9b71,{'val':this['currentSystemMode'],'ack':!![]});return;}if(!_0x14cd02[_0x47e385(0x1ce)]){_0x4a9b71[_0x47e385(0x281)](_0x47e385(0x254))&&_0x14cd02['val']&&(this['setState'](_0x4a9b71,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x4a9b71[_0x47e385(0x281)]('triggerDailyDigest')&&_0x14cd02[_0x47e385(0x18f)]){this[_0x47e385(0x185)](_0x4a9b71,{'val':![],'ack':!![]});if(this[_0x47e385(0x297)])createDailyDigest(this);}_0x4a9b71[_0x47e385(0x281)](_0x47e385(0x195))&&_0x14cd02[_0x47e385(0x18f)]&&(this['setState'](_0x4a9b71,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x4a9b71[_0x47e385(0x281)]('automation.triggerAction')&&_0x14cd02[_0x47e385(0x18f)]&&(this['setState'](_0x4a9b71,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x4a9b71[_0x47e385(0x281)](_0x47e385(0x260))&&_0x14cd02[_0x47e385(0x18f)]){this['setState'](_0x4a9b71,{'val':![],'ack':!![]});if(this[_0x47e385(0x297)])try{const _0x1826e8=await this[_0x47e385(0x1b3)]('LTM.trainingData.sequences');if(_0x1826e8&&_0x1826e8['val']){const _0xd562b4=JSON[_0x47e385(0x168)](_0x1826e8[_0x47e385(0x18f)]);this['log'][_0x47e385(0x1e6)]('ðŸ§ \x20Triggering\x20Security\x20Training...'),this['setStateAsync']('analysis.training.status',{'val':_0x47e385(0x2d8),'ack':!![]}),sendToPython(this,_0x47e385(0x27a),{'sequences':_0xd562b4});}}catch(_0x2aec75){this[_0x47e385(0x2e3)]['error'](_0x47e385(0x2f8)+_0x2aec75['message']);}}if(_0x4a9b71[_0x47e385(0x281)](_0x47e385(0x2ee))&&_0x14cd02[_0x47e385(0x18f)]){this['setState'](_0x4a9b71,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x594196=await this[_0x47e385(0x1b3)](LTM_DP_DAILY_DIGESTS);if(_0x594196&&_0x594196['val'])sendToPython(this,_0x47e385(0x25a),{'digests':JSON[_0x47e385(0x168)](_0x594196[_0x47e385(0x18f)])});}catch(_0x4e1eac){}}if(_0x4a9b71[_0x47e385(0x281)](_0x47e385(0x2dc))&&_0x14cd02[_0x47e385(0x18f)]){this['setState'](_0x4a9b71,{'val':![],'ack':!![]});if(this[_0x47e385(0x297)])try{const _0x496f21=await this['getStateAsync'](_0x47e385(0x288));if(_0x496f21&&_0x496f21[_0x47e385(0x18f)])sendToPython(this,_0x47e385(0x255),{'points':JSON[_0x47e385(0x168)](_0x496f21[_0x47e385(0x18f)])});}catch(_0x5178c8){}}if(_0x4a9b71[_0x47e385(0x281)](_0x47e385(0x1bc))&&_0x14cd02[_0x47e385(0x18f)]){this['setState'](_0x4a9b71,{'val':![],'ack':!![]});if(this[_0x47e385(0x297)])try{const _0x48cc41=await this['getStateAsync'](LTM_DP_RAW_LOG);_0x48cc41&&_0x48cc41[_0x47e385(0x18f)]&&(this['log']['info'](_0x47e385(0x277)),sendToPython(this,_0x47e385(0x18a),{'events':JSON[_0x47e385(0x168)](_0x48cc41['val'])}));}catch(_0x2145bb){}}if(_0x4a9b71[_0x47e385(0x281)](_0x47e385(0x170))&&_0x14cd02[_0x47e385(0x18f)]){this['setState'](_0x4a9b71,{'val':![],'ack':!![]});if(this[_0x47e385(0x297)])try{const _0x331db6=await this[_0x47e385(0x1b3)](_0x47e385(0x1fb));if(_0x331db6&&_0x331db6[_0x47e385(0x18f)]){const _0x48bc02=JSON['parse'](_0x331db6[_0x47e385(0x18f)]);this[_0x47e385(0x2e3)][_0x47e385(0x1e6)](_0x47e385(0x2a6)),sendToPython(this,'BUILD_TOPOLOGY',{'sequences':_0x48bc02});}}catch(_0x64d66a){this['log'][_0x47e385(0x2aa)]('Topology\x20Error:\x20'+_0x64d66a[_0x47e385(0x1da)]);}}return;}if(this['config'][_0x47e385(0x212)]&&this[_0x47e385(0x25d)][_0x47e385(0x212)][_0x47e385(0x281)](_0x4a9b71)){await checkWifiPresence(this);return;}const _0x1bf23d=(this['config'][_0x47e385(0x20d)]||[])[_0x47e385(0x2a4)](_0x2b2fd4=>_0x2b2fd4['id']===_0x4a9b71);if(_0x1bf23d)processSensorEvent(this,_0x4a9b71,_0x14cd02,_0x1bf23d);}async['onMessage'](_0x54b753){const _0x363906=a0_0x3f727b;if(typeof _0x54b753==='object'&&_0x54b753['message']){if(_0x54b753[_0x363906(0x2e2)]===_0x363906(0x2f3)){const _0x36fbe9=_0x54b753[_0x363906(0x1da)]['apiKey']||this[_0x363906(0x25d)][_0x363906(0x211)];if(!_0x36fbe9)return this['sendTo'](_0x54b753[_0x363906(0x2e1)],_0x54b753['command'],{'success':![],'message':_0x363906(0x1ef)},_0x54b753[_0x363906(0x1c7)]);try{const _0x1effbc=new GoogleGenerativeAI(_0x36fbe9),_0x40e88c=_0x1effbc[_0x363906(0x193)]({'model':GEMINI_MODEL}),_0x52dcfe=await _0x40e88c[_0x363906(0x284)]('Hi');this['sendTo'](_0x54b753['from'],_0x54b753[_0x363906(0x2e2)],{'success':!![],'message':'OK:\x20'+_0x52dcfe[_0x363906(0x21a)][_0x363906(0x1cb)]()},_0x54b753[_0x363906(0x1c7)]);}catch(_0x5691af){this[_0x363906(0x263)](_0x54b753['from'],_0x54b753[_0x363906(0x2e2)],{'success':![],'message':_0x363906(0x1f1)+_0x5691af['message']},_0x54b753[_0x363906(0x1c7)]);}}else{if(_0x54b753[_0x363906(0x2e2)]===_0x363906(0x26f)){const _0x22c88d=await getWeatherContext(this),_0x57a4fc=await getCalendarContext(this);this[_0x363906(0x263)](_0x54b753[_0x363906(0x2e1)],_0x54b753[_0x363906(0x2e2)],{'success':!![],'weather':_0x22c88d,'calendar':_0x57a4fc},_0x54b753[_0x363906(0x1c7)]);}else{if(_0x54b753[_0x363906(0x2e2)]===_0x363906(0x1dd)){if(!this[_0x363906(0x297)])return this['sendTo'](_0x54b753[_0x363906(0x2e1)],_0x54b753[_0x363906(0x2e2)],{'success':![],'isPro':![]},_0x54b753[_0x363906(0x1c7)]);let _0x370770={'status':_0x363906(0x21b)};try{const _0x236ad5=await this[_0x363906(0x1b3)](LTM_DP_DRIFT_STATUS);_0x370770['status']=_0x236ad5?_0x236ad5['val']:_0x363906(0x21b);}catch(_0x3d58fc){}this[_0x363906(0x263)](_0x54b753[_0x363906(0x2e1)],_0x54b753[_0x363906(0x2e2)],{'success':!![],'isPro':!![],'dailyDigests':this[_0x363906(0x215)],'driftAnalysis':_0x370770,'analysisHistory':this[_0x363906(0x2a8)]},_0x54b753['callback']);}else{if(_0x54b753['command']===_0x363906(0x2b8)){const _0x4967fb=this[_0x363906(0x215)][_0x363906(0x1ee)],_0x58bafd=new Date(),_0x5d2b23=new Date(_0x58bafd[_0x363906(0x1fa)](),_0x58bafd[_0x363906(0x23e)](),_0x58bafd[_0x363906(0x2ab)]())[_0x363906(0x1a6)](),_0x4d260e=this[_0x363906(0x17b)][_0x363906(0x1ba)](_0x83103=>new Date(_0x83103[_0x363906(0x1d4)])[_0x363906(0x1a6)]()>_0x5d2b23)[_0x363906(0x1ee)],_0x1c34f0=new Array(0x18)['fill'](0x0);this[_0x363906(0x17b)][_0x363906(0x226)](_0x18cd30=>{const _0x21f276=_0x363906,_0x50822a=new Date(_0x18cd30['timestamp']);if(_0x50822a[_0x21f276(0x1a6)]()>_0x5d2b23)_0x1c34f0[_0x50822a[_0x21f276(0x26a)]()]++;});let _0x2d8442={'status':_0x363906(0x21b)};try{const _0x4f998b=await this[_0x363906(0x1b3)](LTM_DP_DRIFT_STATUS);_0x2d8442['status']=_0x4f998b?_0x4f998b['val']:_0x363906(0x21b);}catch(_0x5d6258){}let _0x497226='';try{const _0x26b94f=await this[_0x363906(0x1b3)](_0x363906(0x246));_0x497226=_0x26b94f?_0x26b94f[_0x363906(0x18f)]:'';}catch(_0x44478b){}let _0x280bbc=null;!this[_0x363906(0x229)]&&(_0x280bbc=this[_0x363906(0x25d)]['geminiApiKey']?_0x363906(0x2d1):_0x363906(0x1c5));let _0x1dd2cf={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0xc608f=await this[_0x363906(0x1b3)](_0x363906(0x2f4));if(_0xc608f&&_0xc608f[_0x363906(0x18f)]){_0x1dd2cf[_0x363906(0x1b8)]=!![];const _0x194aef=await this[_0x363906(0x1b3)](_0x363906(0x258));_0x1dd2cf['description']=_0x194aef?_0x194aef[_0x363906(0x18f)]:'';const _0x255199=await this[_0x363906(0x1b3)](_0x363906(0x2f0));_0x1dd2cf[_0x363906(0x24a)]=_0x255199?_0x255199[_0x363906(0x18f)]:'';const _0x82dd73=await this[_0x363906(0x1b3)](_0x363906(0x1c1));_0x1dd2cf[_0x363906(0x1db)]=_0x82dd73?_0x82dd73[_0x363906(0x18f)]:'';}const _0x295e24=await this['getStateAsync'](_0x363906(0x2dd));_0x1dd2cf[_0x363906(0x1e2)]=_0x295e24?!!_0x295e24[_0x363906(0x18f)]:![];}catch(_0x3903f9){}this[_0x363906(0x263)](_0x54b753[_0x363906(0x2e1)],_0x54b753['command'],{'success':!![],'eventHistory':this['eventHistory'][_0x363906(0x199)](0x0,0xf),'stats':{'digestCount':_0x4967fb,'eventCountToday':_0x4d260e,'hourlyActivity':_0x1c34f0,'driftStatus':_0x2d8442[_0x363906(0x1f0)],'isPresent':this[_0x363906(0x2e5)],'presenceWho':_0x497226,'minDays':this[_0x363906(0x25d)]['minDaysForBaseline']||0x7,'stbDays':this[_0x363906(0x25d)][_0x363906(0x21f)]||0xe,'ltbDays':this[_0x363906(0x25d)][_0x363906(0x1e8)]||0x3c,'systemError':_0x280bbc},'automation':_0x1dd2cf},_0x54b753[_0x363906(0x1c7)]);}else{if(_0x54b753[_0x363906(0x2e2)]==='scanDevices')try{const _0x3ed8b8=await scanner[_0x363906(0x242)](this,_0x54b753[_0x363906(0x1da)]||{});this['sendTo'](_0x54b753[_0x363906(0x2e1)],_0x54b753[_0x363906(0x2e2)],{'success':!![],'devices':_0x3ed8b8},_0x54b753[_0x363906(0x1c7)]);}catch(_0x22c565){this[_0x363906(0x263)](_0x54b753[_0x363906(0x2e1)],_0x54b753[_0x363906(0x2e2)],{'success':![],'error':_0x22c565['message']},_0x54b753[_0x363906(0x1c7)]);}else{if(_0x54b753[_0x363906(0x2e2)]===_0x363906(0x1f9)){const _0x3dc929=await this[_0x363906(0x1b5)]('enum.functions.*','enum'),_0x2d7e12=[];if(_0x3dc929)for(const _0x35dbc5 in _0x3dc929){const _0x387ea3=_0x3dc929[_0x35dbc5],_0x27b4e0=(_0x387ea3[_0x363906(0x2f6)]&&typeof _0x387ea3['common'][_0x363906(0x27d)]===_0x363906(0x27e)?_0x387ea3[_0x363906(0x2f6)]['name']['de']:_0x387ea3['common'][_0x363906(0x27d)])||_0x387ea3[_0x363906(0x2f6)][_0x363906(0x27d)];_0x2d7e12[_0x363906(0x213)]({'id':_0x35dbc5,'name':_0x27b4e0});}const _0x27ccd9=await this['getForeignObjectsAsync'](_0x363906(0x16f),_0x363906(0x209)),_0x295015=[];if(_0x27ccd9)for(const _0x10986c in _0x27ccd9){const _0x5dffcf=_0x27ccd9[_0x10986c],_0x24caf8=(_0x5dffcf['common']&&typeof _0x5dffcf[_0x363906(0x2f6)][_0x363906(0x27d)]===_0x363906(0x27e)?_0x5dffcf[_0x363906(0x2f6)][_0x363906(0x27d)]['de']:_0x5dffcf[_0x363906(0x2f6)]['name'])||_0x10986c[_0x363906(0x2e0)]('.')[_0x363906(0x20a)]();_0x295015[_0x363906(0x213)](_0x24caf8);}this[_0x363906(0x263)](_0x54b753[_0x363906(0x2e1)],_0x54b753[_0x363906(0x2e2)],{'success':!![],'enums':_0x2d7e12,'rooms':_0x295015},_0x54b753['callback']);}else{if(_0x54b753['command']===_0x363906(0x19e)){const _0x287651=_0x54b753[_0x363906(0x1da)][_0x363906(0x1ff)];if(!_0x287651)return this[_0x363906(0x263)](_0x54b753['from'],_0x54b753['command'],{'success':![],'error':_0x363906(0x295)},_0x54b753[_0x363906(0x1c7)]);const _0x3e60af=await getCalendarNames(this,_0x287651);this[_0x363906(0x263)](_0x54b753[_0x363906(0x2e1)],_0x54b753[_0x363906(0x2e2)],{'success':!![],'names':_0x3e60af},_0x54b753['callback']);}else{if(_0x54b753[_0x363906(0x2e2)]==='simulateButler'){const {targetId:_0x3a5a5f,targetValue:_0x3d8dfc}=_0x54b753['message'];this[_0x363906(0x2e3)][_0x363906(0x1e6)](_0x363906(0x2a2)+_0x3a5a5f+_0x363906(0x2c1)+_0x3d8dfc),await this[_0x363906(0x2ed)](_0x363906(0x2f4),{'val':!![],'ack':!![]}),await this[_0x363906(0x2ed)](_0x363906(0x258),{'val':_0x363906(0x2eb)+_0x3a5a5f,'ack':!![]}),await this[_0x363906(0x2ed)](_0x363906(0x2f0),{'val':_0x3a5a5f,'ack':!![]}),await this[_0x363906(0x2ed)](_0x363906(0x1c1),{'val':_0x3d8dfc,'ack':!![]}),this[_0x363906(0x263)](_0x54b753['from'],_0x54b753['command'],{'success':!![]},_0x54b753['callback']);}else{if(_0x54b753[_0x363906(0x2e2)]===_0x363906(0x200)){const {historyId:_0xe8260f,rating:_0x4bcaf9,comment:_0x35798c,alertReason:_0x1e80b4}=_0x54b753[_0x363906(0x1da)];_0xe8260f&&_0x4bcaf9?(await saveFeedback(this,{'timestamp':Date[_0x363906(0x1e9)](),'historyId':_0xe8260f,'rating':_0x4bcaf9,'comment':_0x35798c,'alertReason':_0x1e80b4}),this['sendTo'](_0x54b753[_0x363906(0x2e1)],_0x54b753[_0x363906(0x2e2)],{'success':!![]},_0x54b753['callback'])):this['sendTo'](_0x54b753['from'],_0x54b753[_0x363906(0x2e2)],{'success':![],'error':_0x363906(0x210)},_0x54b753[_0x363906(0x1c7)]);}else _0x54b753[_0x363906(0x2e2)]==='dismissAutomation'&&(this[_0x363906(0x2e3)][_0x363906(0x1e6)](_0x363906(0x280)),await this[_0x363906(0x2ed)](_0x363906(0x2f4),{'val':![],'ack':!![]}),await this[_0x363906(0x2ed)](_0x363906(0x258),{'val':'','ack':!![]}),this[_0x363906(0x263)](_0x54b753[_0x363906(0x2e1)],_0x54b753[_0x363906(0x2e2)],{'success':!![]},_0x54b753[_0x363906(0x1c7)]));}}}}}}}}}}}if(require[a0_0x3f727b(0x26e)]!==module)module['exports']=_0x24b10f=>new CogniLiving(_0x24b10f);else new CogniLiving();