const a0_0x429dcf=a0_0x52dc;function a0_0x52dc(_0x3b9684,_0x141966){const _0x174028=a0_0x5295();return a0_0x52dc=function(_0x44fb6d,_0x2f5a9b){_0x44fb6d=_0x44fb6d-0x14b;let _0x529533=_0x174028[_0x44fb6d];return _0x529533;},a0_0x52dc(_0x3b9684,_0x141966);}(function(_0x4076ef,_0x1d7c84){const _0x541750=a0_0x52dc,_0x160644=_0x4076ef();while(!![]){try{const _0x5bfb81=-parseInt(_0x541750(0x166))/0x1+parseInt(_0x541750(0x16d))/0x2*(-parseInt(_0x541750(0x20b))/0x3)+-parseInt(_0x541750(0x191))/0x4+-parseInt(_0x541750(0x231))/0x5+-parseInt(_0x541750(0x21d))/0x6*(-parseInt(_0x541750(0x1a2))/0x7)+-parseInt(_0x541750(0x1db))/0x8*(-parseInt(_0x541750(0x173))/0x9)+-parseInt(_0x541750(0x1b2))/0xa*(-parseInt(_0x541750(0x2b7))/0xb);if(_0x5bfb81===_0x1d7c84)break;else _0x160644['push'](_0x160644['shift']());}catch(_0x3f2315){_0x160644['push'](_0x160644['shift']());}}}(a0_0x5295,0x4e8ac));const a0_0x2f5a9b=(function(){let _0x1b1067=!![];return function(_0xa34505,_0x362d69){const _0x292cd5=_0x1b1067?function(){const _0xe3e356=a0_0x52dc;if(_0x362d69){const _0x11c460=_0x362d69[_0xe3e356(0x2da)](_0xa34505,arguments);return _0x362d69=null,_0x11c460;}}:function(){};return _0x1b1067=![],_0x292cd5;};}()),a0_0x44fb6d=a0_0x2f5a9b(this,function(){const _0x32020b=a0_0x52dc;return a0_0x44fb6d['toString']()[_0x32020b(0x210)]('(((.+)+)+)+$')[_0x32020b(0x155)]()[_0x32020b(0x16f)](a0_0x44fb6d)[_0x32020b(0x210)]('(((.+)+)+)+$');});a0_0x44fb6d();'use strict';const utils=require(a0_0x429dcf(0x184)),{GoogleGenerativeAI}=require(a0_0x429dcf(0x17c)),schedule=require(a0_0x429dcf(0x2d5)),axios=require('axios'),HISTORY_MAX_SIZE=0x32,FEEDBACK_MAX_SIZE=0x14,GEMINI_MODEL=a0_0x429dcf(0x186),ANALYSIS_HISTORY_MAX_SIZE=0x64,RAW_LOG_MAX_SIZE=0x5dc,DAILY_DIGEST_MAX_SIZE_LIMIT=0xb4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,LTM_SCHEDULE=a0_0x429dcf(0x2c5),LTM_DP_RAW_LOG=a0_0x429dcf(0x2db),LTM_DP_DAILY_DIGESTS=a0_0x429dcf(0x2b5),LTM_DP_STATUS=a0_0x429dcf(0x159),LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS=a0_0x429dcf(0x183),LTM_DP_DRIFT_CHANNEL=a0_0x429dcf(0x250),LTM_DP_DRIFT_STATUS='LTM.driftAnalysis.baselineDrift',LTM_DP_DRIFT_DETAILS='LTM.driftAnalysis.driftDetails',LTM_DP_DRIFT_LAST_CHECK=a0_0x429dcf(0x198),SYSTEM_DP_MODE='system.mode',MODE_RESET_SCHEDULE=a0_0x429dcf(0x194),SYSTEM_MODES={'NORMAL':a0_0x429dcf(0x27f),'VACATION':a0_0x429dcf(0x192),'PARTY':'party','GUEST':a0_0x429dcf(0x254)},AUTO_RESET_MODES=[SYSTEM_MODES['PARTY'],SYSTEM_MODES[a0_0x429dcf(0x2c2)]],PERSONA_MAPPING={'generic':a0_0x429dcf(0x282),'senior_aal':'PRIORIT√ÑT:\x20Gesundheit\x20und\x20Sicherheit\x20f√ºr\x20Senioren\x20(AAL).\x20Erkenne\x20Inaktivit√§t,\x20potenzielle\x20St√ºrze\x20(indirekt),\x20ungew√∂hnliche\x20n√§chtliche\x20Aktivit√§t.\x20Komfort\x20ist\x20sekund√§r.','family':a0_0x429dcf(0x200),'single_comfort':a0_0x429dcf(0x294),'security':a0_0x429dcf(0x2af)};function a0_0x5295(){const _0x5819db=['analysisHistory','wohn','analysis.automation.description','analysis.analysisHistory','Gast','Description','logDuplicates','level.dimmer','Fenster/T√ºr','hue','normal','isAlert','saveRawEventLog','Analysiere\x20ausgewogen\x20auf\x20Gesundheit,\x20Sicherheit\x20und\x20Komfort.','Success','loadSystemMode','Normal','aiPersona','value.humidity','longitude','material.','leuchte','.level',',\x20Lon\x20','Logbook','WEEK_PROGRAM','generateContent','sendToAsync','activityLevel','icons-mfd.','number','Fokus\x20auf\x20Maximierung\x20von\x20Komfort,\x20Automatisierungseffizienz\x20und\x20Energieeinsparung\x20f√ºr\x20einen\x20einzelnen\x20Bewohner.\x20Aktivit√§tsmuster\x20sind\x20flexibel.','manufacturer','isProVersion','scanDevices','diele','resetAnalysisStates','level','message','notifyWhatsappRecipient','deviationFromBaseline','setupLtmScheduler','process','Daily\x20Digests','checkSystemObjects','ALARM','join','DIRECTION','detectionState','bind','N/A\x20(Learning)','k√ºche','error','role','Adapter','cogni-living','Last\x20raw\x20event','t√ºr','PRIORIT√ÑT:\x20Sicherheit.\x20Erkenne\x20Eindringlinge,\x20ungew√∂hnliche\x20Anwesenheit\x20bei\x20Abwesenheit\x20der\x20Bewohner\x20oder\x20Fehlfunktionen,\x20die\x20auf\x20ein\x20Sicherheitsrisiko\x20hindeuten.','forecast','lastAlertState','‚ö†Ô∏è\x20DEV-MODE:\x20Lokaler\x20Test-Schl√ºssel\x20erkannt.\x20Pro-Features\x20aktiviert.','onUnload','sendTo','LTM.dailyDigests','analysis.trigger','55sUPrxZ','application/json','testApiKey','createDailyDigest','getLtmData','json','AI\x20Alert\x20Status','extendObjectAsync','long','No\x20comment','main','GUEST','\x20sent','cogni-living\x20adapter\x20starting\x20(v','0\x203\x20*\x20*\x20*','\x20f√ºr\x20Event\x20','ltmStbWindowDays','fire','last_seen','system.config','baselineDrift','substring','occupancy','now','\x22\x20at\x20','Pattern\x20Detected','Drift\x20Analysis','namespace','Last\x20Result','daswetter.','node-schedule','sort','scanForDevices','lastCheck','Trigger\x20Digest','apply','LTM.rawEventLog','bad','timestamp','presence','analysis.automation.suggestedAction','icon','unload','Feedback\x20gespeichert:\x20','PROCESS','Last\x20Check','apiKey','doors','sensorLastValues','garten','getGenerativeModel','geminiModel','[TEST]\x20','push','archetype','checkLtmDriftObjects','notifySignalRecipient','temperature','callback','toString','history','response','info.','LTM.processingStatus','mac\x20address','write','val','testNotification','date','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x202.\x20AUTOMATION:\x20patternDetected=true/false.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20EVENTS:\x20','getForeignObjectAsync','loadRawEventLog','1.\x20ANALYSE\x20&\x20DEVIATION:\x20Vergleiche\x20Events\x20mit\x20STB.\x20deviation=\x27none|slight|significant|critical\x27.','NORMAL','Feedback\x20Log','RSSI','200281pGYrOJ','System\x20Status\x20&\x20Control','boolean','system','weatherunderground.','capabilities','DUTY_CYCLE','18946KmpvLF','dailyDigests','constructor','cancel','comfort','summary','5499ELBzll','firmware','Rauchmelder','notifyPushoverRecipient','updateAnalysisHistory','analysis.activitySummary','sensor.motion','licht','automationProposal','@google/generative-ai','latitude','ack','Drift\x20Details','notifyEmailInstance','updateBaselineStatus','last\x20action','LTM.baselineStatus','@iobroker/adapter-core','generic','models/gemini-flash-latest','Deaktiviert\x20(Pro-Feature)','value.temperature','Action','notifyPushoverInstance','ready','activity','catch','-\x20User\x20Feedback:\x20Alarm\x20\x22','colormode','Garten','2432324eKXIns','vacation','history.','0\x204\x20*\x20*\x20*','driftAnalysisTimer','connection','geminiApiKey','LTM.driftAnalysis.lastCheck','weather','location','\x0a\x20\x20\x20\x20\x20\x20\x20\x20MODUS:\x20','historyId','notifySignalInstance','processSensorEvent','ON_TIME','version','common','65030SUdgNH','Bewegung','\x20Tage)','vis.','.\x20KONTEXT:\x20','shutter_contact','checkLtmObjects','includes','setupModeResetScheduler','OPERATING_VOLTAGE','Wohnzimmer','CONFIG_PENDING','toISOString','city','rating','ltmJob','1712060ihMpOs','getStateAsync','.on','values','openweathermap.','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20SCHEMA:\x20{\x20\x22activity\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22deviationFromBaseline\x22:\x20\x22string\x22,\x20\x22isAlert\x22:\x20bool,\x20\x22alertReason\x22:\x20\x22string\x22\x20},\x20\x22comfort\x22:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22suggestion\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22patternDetected\x22:\x20bool,\x20\x22description\x22:\x20\x22string\x22,\x20\x22suggestedAction\x22:\x20\x22string\x22\x20}\x20}\x20}','runAutopilot','enum','temp','config','string','split','toLocaleTimeString','analysis.lastResult','scriptProblem','.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','Alert','channel','notifyWhatsappInstance','Deviation','Started\x20at\x20','Lernphase\x20(','type','analysis.deviationFromBaseline','getSystemUUID','getForeignStateAsync','state','currentSystemMode','smoke','submitFeedback','LTM','scriptEnabled','No\x20Key','subscribeStates','triggerDailyDigest','Temperatur','getForeignObjectsAsync','Urlaub','native','warn','toLowerCase','776mBFXWy','Error:\x20','alertReason','eventHistory','analysisTimer','Konnte\x20System-Standort\x20nicht\x20laden.','AES_KEY','.\x20PERSONA:\x20','onMessage','unshift','admin.','runGeminiAnalysis','reverse','filter','info','VIRTUAL_CHANNEL','startsWith','LOW_BAT','flur','notifyTelegramInstance','runBaselineDriftAnalysis','ERROR','createAllObjects','livingContext','TEST-PRO-KEY','sendNotification','map','Success:\x20Compressed\x20','Gemini\x20AI\x20initialized.','uniqueid','members','notifyTelegramRecipient','log','.bri','\x20events','pr√§senz','1.\x20ANALYSE:\x20Bewerte\x20Sensor-Events.\x20deviation=\x27N/A\x27.','Fokus\x20auf\x20Familienroutinen,\x20Kindersicherheit\x20und\x20allgemeines\x20Haushaltsmanagement.\x20Erwarte\x20hohe\x20Aktivit√§tsniveaus.','stringify','productname','\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AUFGABE:\x20','setupDriftAnalysisScheduler','_score','CONNECTION','onStateChange','effect',',\x20Location:\x20','sensor.window','18JOstot','COMBINED_PARAMETER','VACATION','text','replace','search','No\x20recent\x20activity.','minDaysForBaseline','update','pressure','signal','analysisInterval','PRO-','scheduleJob','Skipped\x20(No\x20AI\x20or\x20Data)','Lizenzpr√ºfung\x20gestartet\x20f√ºr\x20System-UUID:\x20','motion','uuid','318AYEnMQ','setObjectNotExistsAsync','Starting\x20Autopilot\x20(','sat','parse','WORKING','Raw\x20Log','yr.','uuid-not-found','\x20sensors...','SECTION','slice','onReady','rawEventLog','licenseKey','de-DE','Schlafzimmer','ltmLtbWindowDays','sensor.door','uuid-error','1103795yKIIue','system.meta.uuid','Baseline\x20Status','endsWith','lights','Schalter/Licht','Starting\x20Smart\x20Scan\x20with\x20filters:\x20','trim','setStateAsync','button','feedbackHistory','system.','PARTY','2-digit','N/A','genAI','enum.rooms.*','modeResetJob','object','enum.functions.*','saveFeedback','toLocaleString','temperatur','.state','patternDetected','systemConfig','K√ºche','fenster','switch.light','indicator','notifyPushoverEnabled','LTM.driftAnalysis','status','checkLicense','ü§ñ\x20AI\x20Prompt\x20Context\x20-\x20Time:\x20','guest','subscribeForeignStatesAsync','Party','System\x20Mode','getEnums','javascript.0.script','SABOTAGE','ROLLE:\x20Data\x20Scientist.\x20VERGLEICHE:\x20Dataset\x20A\x20(Recent)\x20vs\x20B\x20(Established).\x20ZIEL:\x20Erkenne\x20Drift.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aB\x20(LTB):\x0a','setState','send','max','from','find','details','pop','selectedFunctionIds','some','systemUUID','ROLLE:\x20Smart\x20Home\x20Analyst.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20AKTUELLE\x20ZEIT:\x20','analysis.isAlert','STICKY_UNREACH','saveDailyDigests','length','STB\x20(Recent\x20History):\x20','\x0a\x0aUSER\x20FEEDBACK\x20/\x20LERN-CONTEXT\x20(Vermeide\x20diese\x20Fehler):\x0a','notifyEmailEnabled','notifyTelegramEnabled','command','wetter','name','Comfort\x20Summary','Sending\x20notification:\x20\x22','unknown'];a0_0x5295=function(){return _0x5819db;};return a0_0x5295();}class CogniLiving extends utils[a0_0x429dcf(0x2ab)]{constructor(_0x12b587){const _0x5ea967=a0_0x429dcf;super({..._0x12b587,'name':_0x5ea967(0x2ac)}),this[_0x5ea967(0x1de)]=[],this[_0x5ea967(0x275)]=[],this[_0x5ea967(0x23b)]=[],this['rawEventLog']=[],this['dailyDigests']=[],this[_0x5ea967(0x2e7)]={},this[_0x5ea967(0x24a)]={'latitude':0x0,'longitude':0x0,'city':''},this['genAI']=null,this[_0x5ea967(0x14d)]=null,this['currentSystemMode']=SYSTEM_MODES[_0x5ea967(0x163)],this[_0x5ea967(0x296)]=![],this[_0x5ea967(0x2b1)]=![],this[_0x5ea967(0x265)]=_0x5ea967(0x274),this['analysisTimer']=null,this[_0x5ea967(0x1b1)]=null,this[_0x5ea967(0x242)]=null,this[_0x5ea967(0x195)]=null,this['on'](_0x5ea967(0x18b),this[_0x5ea967(0x229)][_0x5ea967(0x2a6)](this)),this['on']('stateChange',this[_0x5ea967(0x207)][_0x5ea967(0x2a6)](this)),this['on'](_0x5ea967(0x2e1),this['onUnload'][_0x5ea967(0x2a6)](this)),this['on'](_0x5ea967(0x29b),this[_0x5ea967(0x1e3)]['bind'](this));}async[a0_0x429dcf(0x229)](){const _0x57d97a=a0_0x429dcf,_0x32eada=this['version']||_0x57d97a(0x274);this[_0x57d97a(0x1fb)][_0x57d97a(0x1e9)](_0x57d97a(0x2c4)+_0x32eada+')'),this['config']['licenseKey']=this[_0x57d97a(0x1bb)][_0x57d97a(0x22b)]||'',this[_0x57d97a(0x296)]=await this[_0x57d97a(0x252)](this['config'][_0x57d97a(0x22b)]);this['isProVersion']?this['log'][_0x57d97a(0x1e9)]('‚úÖ\x20License\x20check\x20successful:\x20PRO\x20features\x20enabled.'):this[_0x57d97a(0x1fb)][_0x57d97a(0x1e9)]('Running\x20in\x20FREE\x20mode\x20(LTM\x20&\x20Automation\x20disabled).');if(!this[_0x57d97a(0x1bb)][_0x57d97a(0x212)]||this[_0x57d97a(0x1bb)]['minDaysForBaseline']<0x1)this[_0x57d97a(0x1bb)][_0x57d97a(0x212)]=0x7;if(!this[_0x57d97a(0x1bb)][_0x57d97a(0x2c7)]||this[_0x57d97a(0x1bb)][_0x57d97a(0x2c7)]<0x1)this['config'][_0x57d97a(0x2c7)]=0xe;if(!this[_0x57d97a(0x1bb)][_0x57d97a(0x22e)]||this['config']['ltmLtbWindowDays']<0x1e)this[_0x57d97a(0x1bb)][_0x57d97a(0x22e)]=0x3c;this[_0x57d97a(0x1bb)]['ltmLtbWindowDays']=Math['min'](Math[_0x57d97a(0x25e)](this[_0x57d97a(0x1bb)][_0x57d97a(0x22e)],this[_0x57d97a(0x1bb)][_0x57d97a(0x2c7)]+0xe),DAILY_DIGEST_MAX_SIZE_LIMIT);try{const _0x4dd28b=await this['getForeignObjectAsync'](_0x57d97a(0x2ca));_0x4dd28b&&_0x4dd28b[_0x57d97a(0x1a1)]&&(this[_0x57d97a(0x24a)]['latitude']=_0x4dd28b[_0x57d97a(0x1a1)][_0x57d97a(0x17d)]||0x0,this[_0x57d97a(0x24a)][_0x57d97a(0x288)]=_0x4dd28b[_0x57d97a(0x1a1)][_0x57d97a(0x288)]||0x0,this['systemConfig'][_0x57d97a(0x1af)]=_0x4dd28b[_0x57d97a(0x1a1)][_0x57d97a(0x1af)]||'',this['log'][_0x57d97a(0x1e9)]('üìç\x20Standort\x20geladen:\x20'+(this[_0x57d97a(0x24a)]['city']||'Unbekannt')+'\x20('+this[_0x57d97a(0x24a)][_0x57d97a(0x17d)]+',\x20'+this[_0x57d97a(0x24a)]['longitude']+')'));}catch(_0xe43df6){this[_0x57d97a(0x1fb)][_0x57d97a(0x1d9)](_0x57d97a(0x1e0));}if(this[_0x57d97a(0x1bb)][_0x57d97a(0x197)])try{this[_0x57d97a(0x240)]=new GoogleGenerativeAI(this[_0x57d97a(0x1bb)][_0x57d97a(0x197)]),this[_0x57d97a(0x14d)]=this[_0x57d97a(0x240)][_0x57d97a(0x14c)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x57d97a(0x2b8)}}),this['log']['info'](_0x57d97a(0x1f7));}catch(_0x128c4b){this['log'][_0x57d97a(0x2a9)]('Gemini\x20Init\x20Error:\x20'+_0x128c4b[_0x57d97a(0x29b)]);}else this[_0x57d97a(0x1fb)][_0x57d97a(0x1d9)]('Gemini\x20API\x20Key\x20missing.\x20AI\x20features\x20disabled.');await this['createAllObjects'](),await this[_0x57d97a(0x284)]();const _0x485e0a=await this[_0x57d97a(0x1b3)]('analysis.isAlert');this[_0x57d97a(0x2b1)]=_0x485e0a?!!_0x485e0a[_0x57d97a(0x15c)]:![];try{const _0x1bd51a=await this[_0x57d97a(0x1b3)](_0x57d97a(0x278));if(_0x1bd51a&&_0x1bd51a[_0x57d97a(0x15c)])this[_0x57d97a(0x275)]=JSON[_0x57d97a(0x221)](_0x1bd51a['val'][_0x57d97a(0x155)]());}catch(_0x50fda6){this['analysisHistory']=[];}try{const _0x2d9e00=await this['getStateAsync']('analysis.feedbackHistory');if(_0x2d9e00&&_0x2d9e00[_0x57d97a(0x15c)])this[_0x57d97a(0x23b)]=JSON[_0x57d97a(0x221)](_0x2d9e00[_0x57d97a(0x15c)][_0x57d97a(0x155)]());}catch(_0x41d1c0){this[_0x57d97a(0x23b)]=[];}await this[_0x57d97a(0x161)](),await this['loadDailyDigests'](),this['subscribeStates'](_0x57d97a(0x2b6)),this[_0x57d97a(0x1d3)](LTM_DP_TRIGGER_DIGEST),this[_0x57d97a(0x1d3)](SYSTEM_DP_MODE);const _0x1352f6=this[_0x57d97a(0x1bb)]['devices'];if(_0x1352f6&&_0x1352f6['length']>0x0){this[_0x57d97a(0x1fb)][_0x57d97a(0x1e9)]('Subscribing\x20to\x20'+_0x1352f6[_0x57d97a(0x26a)]+_0x57d97a(0x226));for(const _0x466983 of _0x1352f6){if(_0x466983['id']){await this[_0x57d97a(0x255)](_0x466983['id']);try{const _0x18f169=await this[_0x57d97a(0x1cb)](_0x466983['id']);if(_0x18f169)this[_0x57d97a(0x2e7)][_0x466983['id']]=_0x18f169['val'];}catch(_0x1fc89c){}}}}if(this['analysisTimer'])clearInterval(this[_0x57d97a(0x1df)]);const _0x2d57c9=this[_0x57d97a(0x1bb)][_0x57d97a(0x216)]||0xf;_0x2d57c9>0x0&&(this['log']['info'](_0x57d97a(0x21f)+_0x2d57c9+'\x20min).'),this['analysisTimer']=setInterval(()=>this[_0x57d97a(0x1b8)](),_0x2d57c9*0x3c*0x3e8)),this[_0x57d97a(0x29e)](),this[_0x57d97a(0x1aa)](),this[_0x57d97a(0x204)]();}async[a0_0x429dcf(0x2d7)](_0x2f52eb={}){const _0x226876=a0_0x429dcf;this[_0x226876(0x1fb)][_0x226876(0x1e9)](_0x226876(0x237)+JSON[_0x226876(0x201)](_0x2f52eb));const _0x2fd246=[],_0x440573=_0x2f52eb['motion']!==![],_0x4783a9=_0x2f52eb[_0x226876(0x2e6)]!==![],_0x5a0232=_0x2f52eb[_0x226876(0x235)]!==![],_0x3180be=_0x2f52eb[_0x226876(0x153)]===!![],_0xd56ab5=_0x2f52eb[_0x226876(0x199)]===!![],_0x351657=_0x2f52eb[_0x226876(0x263)]||[],_0x2a55bb=await this[_0x226876(0x1d6)](_0x226876(0x241),_0x226876(0x1b9)),_0x376059=await this[_0x226876(0x1d6)](_0x226876(0x244),_0x226876(0x1b9)),_0x5167c7={},_0x1695e0={},_0x3cbf8b={},_0x2fbb8c=(_0x597819,_0x5d1cd4,_0x29a13f=![])=>{const _0x1f6d49=_0x226876;if(!_0x597819)return;for(const _0x64841 in _0x597819){const _0x3a5667=_0x597819[_0x64841];if(_0x3a5667&&_0x3a5667[_0x1f6d49(0x1a1)]&&_0x3a5667[_0x1f6d49(0x1a1)][_0x1f6d49(0x1f9)]){const _0x52362e=(typeof _0x3a5667[_0x1f6d49(0x1a1)]['name']===_0x1f6d49(0x243)?_0x3a5667[_0x1f6d49(0x1a1)]['name']['de']:_0x3a5667[_0x1f6d49(0x1a1)]['name'])||_0x3a5667['common'][_0x1f6d49(0x271)];if(_0x29a13f)_0x3cbf8b[_0x64841]=_0x52362e;for(const _0x4396b5 of _0x3a5667[_0x1f6d49(0x1a1)][_0x1f6d49(0x1f9)]){if(_0x29a13f){if(!_0x5d1cd4[_0x4396b5])_0x5d1cd4[_0x4396b5]=[];_0x5d1cd4[_0x4396b5][_0x1f6d49(0x14f)](_0x64841);}else _0x5d1cd4[_0x4396b5]=_0x52362e;}}}};_0x2fbb8c(_0x2a55bb,_0x5167c7),_0x2fbb8c(_0x376059,_0x1695e0,!![]);const _0x16f0a0=await this[_0x226876(0x1d6)]('*',_0x226876(0x1cc)),_0x25bc4c=['UNREACH','LOWBAT',_0x226876(0x1ec),_0x226876(0x165),_0x226876(0x1f0),'FAULT',_0x226876(0x25a),_0x226876(0x2a2),_0x226876(0x1ad),'DUTYCYCLE',_0x226876(0x16c),_0x226876(0x222),_0x226876(0x2a4),_0x226876(0x268),_0x226876(0x1ab),_0x226876(0x1ea),'INSTALL_TEST',_0x226876(0x20c),_0x226876(0x28e),_0x226876(0x19f),_0x226876(0x227),'ERROR_CODE',_0x226876(0x2e3),_0x226876(0x1e1),_0x226876(0x206),'reachable','link_quality','battery',_0x226876(0x213),_0x226876(0x174),_0x226876(0x1a0),_0x226876(0x196),_0x226876(0x1e9),_0x226876(0x215),_0x226876(0x2c9),_0x226876(0x182),_0x226876(0x150),'alert','mode',_0x226876(0x18f),_0x226876(0x208),'xy','ct',_0x226876(0x27e),_0x226876(0x220),_0x226876(0x202),_0x226876(0x295),'modelid',_0x226876(0x1f8),_0x226876(0x26f),_0x226876(0x15a),'description',_0x226876(0x16b),_0x226876(0x29f),_0x226876(0x1d1),_0x226876(0x1c0),_0x226876(0x259),_0x226876(0x2a5),_0x226876(0x172),_0x226876(0x2e0),_0x226876(0x156),_0x226876(0x2b0),_0x226876(0x1e9),_0x226876(0x2bc)];if(!_0xd56ab5)_0x25bc4c[_0x226876(0x14f)](_0x226876(0x270),_0x226876(0x199),'wind',_0x226876(0x214),'uv','rain','precip');const _0x3a6aff=[_0x226876(0x23c),_0x226876(0x1e5),_0x226876(0x158),_0x226876(0x1a5),_0x226876(0x193),_0x226876(0x289),_0x226876(0x292),'flot.'];if(!_0xd56ab5)_0x3a6aff[_0x226876(0x14f)](_0x226876(0x2d4),_0x226876(0x16a),'accuweather.',_0x226876(0x224),_0x226876(0x1b6));const _0x1a1fd6=(_0x2bd6de,_0x55d63c,_0x371c28=![])=>{const _0x2c6777=_0x226876,_0x55973a=_0x2bd6de[_0x2c6777(0x1bd)]('.');if(_0x55d63c[_0x2bd6de])return _0x55d63c[_0x2bd6de];if(_0x55973a[_0x2c6777(0x26a)]>0x2&&_0x55d63c[_0x55973a['slice'](0x0,-0x1)[_0x2c6777(0x2a3)]('.')])return _0x55d63c[_0x55973a[_0x2c6777(0x228)](0x0,-0x1)[_0x2c6777(0x2a3)]('.')];if(_0x55973a[_0x2c6777(0x26a)]>0x3&&_0x55d63c[_0x55973a[_0x2c6777(0x228)](0x0,-0x2)[_0x2c6777(0x2a3)]('.')])return _0x55d63c[_0x55973a[_0x2c6777(0x228)](0x0,-0x2)[_0x2c6777(0x2a3)]('.')];return _0x371c28?[]:null;};for(const _0x9dbb5a in _0x16f0a0){const _0x2bfdaa=_0x16f0a0[_0x9dbb5a];if(!_0x2bfdaa||!_0x2bfdaa[_0x226876(0x1a1)])continue;if(_0x3a6aff[_0x226876(0x264)](_0x3dc975=>_0x9dbb5a[_0x226876(0x1eb)](_0x3dc975)))continue;const _0x1ff6ca=_0x2bfdaa[_0x226876(0x1a1)][_0x226876(0x2aa)]||'',_0x3d1e61=(_0x2bfdaa[_0x226876(0x1a1)][_0x226876(0x271)]&&typeof _0x2bfdaa[_0x226876(0x1a1)][_0x226876(0x271)]===_0x226876(0x243)?_0x2bfdaa[_0x226876(0x1a1)][_0x226876(0x271)]['de']:_0x2bfdaa['common'][_0x226876(0x271)])||'',_0x1f9fd5=_0x9dbb5a['toUpperCase'](),_0x2c556b=_0x3d1e61?_0x3d1e61[_0x226876(0x1da)]():'',_0x5876ed=_0x9dbb5a['toLowerCase'](),_0x58c7d1=_0x1a1fd6(_0x9dbb5a,_0x5167c7),_0x1f2c41=_0x1a1fd6(_0x9dbb5a,_0x1695e0,!![]);let _0x57741b=null,_0x1f0e1=![];if(_0x1f2c41&&_0x1f2c41['length']>0x0){const _0x285007=_0x1f2c41[_0x226876(0x260)](_0x2ebc4b=>_0x351657['includes'](_0x2ebc4b));if(_0x285007){_0x1f0e1=!![];const _0x41f4d5=_0x3cbf8b[_0x285007];if(_0x5876ed['includes'](_0x226876(0x2de))||_0x5876ed[_0x226876(0x1a9)](_0x226876(0x21b)))_0x57741b='Bewegung';else{if(_0x5876ed[_0x226876(0x1a9)](_0x226876(0x1ce))||_0x5876ed[_0x226876(0x1a9)](_0x226876(0x2c8))||_0x2c556b[_0x226876(0x1a9)]('rauch'))_0x57741b=_0x226876(0x175);else{if(_0x5876ed[_0x226876(0x1a9)](_0x226876(0x1cc))||_0x5876ed[_0x226876(0x1a9)](_0x226876(0x29a))||_0x5876ed[_0x226876(0x1a9)]('on'))_0x57741b=_0x226876(0x236);else _0x57741b=_0x41f4d5;}}}}if(!_0x1f0e1&&!_0xd56ab5){if(_0x25bc4c[_0x226876(0x264)](_0x270434=>_0x2c556b['includes'](_0x270434)||_0x1f9fd5[_0x226876(0x1a9)](_0x270434)))continue;}if(!_0x57741b&&_0x440573){const _0x3a28dc=_0x1ff6ca['includes'](_0x226876(0x179))||_0x1ff6ca[_0x226876(0x1a9)](_0x226876(0x2cd)),_0x25d2f5=_0x2c556b[_0x226876(0x1a9)]('bewegung')||_0x2c556b[_0x226876(0x1a9)](_0x226876(0x1fe));if(_0x3a28dc||_0x25d2f5)_0x57741b=_0x226876(0x1a3);}if(!_0x57741b&&_0x4783a9){const _0x108121=_0x5876ed['includes'](_0x226876(0x1a7))&&_0x5876ed[_0x226876(0x234)]('.state');(_0x108121||_0x1ff6ca['includes'](_0x226876(0x22f))||_0x1ff6ca[_0x226876(0x1a9)](_0x226876(0x20a))||(_0x2c556b['includes'](_0x226876(0x24c))||_0x2c556b[_0x226876(0x1a9)](_0x226876(0x2ae)))&&!_0x2c556b[_0x226876(0x1a9)](_0x226876(0x1ba))&&!_0x2c556b[_0x226876(0x1a9)]('griff')&&(_0x2bfdaa[_0x226876(0x1a1)][_0x226876(0x1c8)]===_0x226876(0x168)||_0x2bfdaa[_0x226876(0x1a1)][_0x226876(0x1c8)]===_0x226876(0x293)))&&(_0x57741b=_0x226876(0x27d));}if(!_0x57741b&&_0x5a0232){const _0xf9802b=_0x1ff6ca['includes'](_0x226876(0x24d))||_0x1ff6ca[_0x226876(0x1a9)](_0x226876(0x27c)),_0x551a3f=_0x2c556b[_0x226876(0x1a9)](_0x226876(0x17a))||_0x2c556b['includes']('lampe')||_0x2c556b[_0x226876(0x1a9)](_0x226876(0x28a)),_0x289097=_0x5876ed[_0x226876(0x234)](_0x226876(0x248))||_0x5876ed[_0x226876(0x234)](_0x226876(0x1b4))||_0x5876ed[_0x226876(0x234)](_0x226876(0x28b))||_0x5876ed[_0x226876(0x234)](_0x226876(0x1fc))||_0x5876ed[_0x226876(0x234)]('.brightness');(_0xf9802b||_0x551a3f)&&_0x289097&&_0x2bfdaa[_0x226876(0x1a1)][_0x226876(0x15b)]&&(_0x57741b='Licht');}!_0x57741b&&_0x3180be&&((_0x1ff6ca[_0x226876(0x1a9)](_0x226876(0x188))||_0x1ff6ca['includes'](_0x226876(0x287))||_0x2c556b[_0x226876(0x1a9)](_0x226876(0x247)))&&(_0x57741b=_0x226876(0x1d5)));if(_0x57741b){let _0x38da46=_0x58c7d1||'';if(!_0x38da46){if(_0x2c556b[_0x226876(0x1a9)](_0x226876(0x2dc)))_0x38da46='Badezimmer';else{if(_0x2c556b[_0x226876(0x1a9)](_0x226876(0x2a8)))_0x38da46=_0x226876(0x24b);else{if(_0x2c556b[_0x226876(0x1a9)](_0x226876(0x276)))_0x38da46=_0x226876(0x1ac);else{if(_0x2c556b[_0x226876(0x1a9)]('schlaf'))_0x38da46=_0x226876(0x22d);else{if(_0x2c556b['includes'](_0x226876(0x1ed))||_0x2c556b[_0x226876(0x1a9)](_0x226876(0x298)))_0x38da46='Flur';else{if(_0x2c556b[_0x226876(0x1a9)](_0x226876(0x14b)))_0x38da46=_0x226876(0x190);}}}}}}let _0xac1a75=0x0;if(_0x1f0e1)_0xac1a75+=0x1e;else{if(_0x58c7d1)_0xac1a75+=0x14;else{if(_0x38da46)_0xac1a75+=0xa;}}_0x2fd246[_0x226876(0x14f)]({'id':_0x9dbb5a,'name':_0x3d1e61||_0x9dbb5a,'type':_0x57741b,'location':_0x38da46,'logDuplicates':_0x57741b===_0x226876(0x1a3),'_score':_0xac1a75});}}return _0x2fd246[_0x226876(0x2d6)]((_0x4711c3,_0xed2c1f)=>_0xed2c1f[_0x226876(0x205)]-_0x4711c3[_0x226876(0x205)]),_0x2fd246;}async[a0_0x429dcf(0x1ca)](){const _0x32e494=a0_0x429dcf;try{const _0x53e4a6=await this[_0x32e494(0x160)](_0x32e494(0x232));if(_0x53e4a6&&_0x53e4a6['native']&&_0x53e4a6[_0x32e494(0x1d8)][_0x32e494(0x21c)])return _0x53e4a6[_0x32e494(0x1d8)][_0x32e494(0x21c)];return _0x32e494(0x225);}catch(_0x406c79){return _0x32e494(0x230);}}async[a0_0x429dcf(0x252)](_0x613d7){const _0x324a5b=a0_0x429dcf;if(!_0x613d7)return![];this[_0x324a5b(0x265)]=await this[_0x324a5b(0x1ca)](),this[_0x324a5b(0x1fb)][_0x324a5b(0x1e9)](_0x324a5b(0x21a)+this[_0x324a5b(0x265)]);if(_0x613d7===_0x324a5b(0x1f3))return this['log'][_0x324a5b(0x1e9)](_0x324a5b(0x2b2)),!![];if(_0x613d7[_0x324a5b(0x1eb)](_0x324a5b(0x217)))return this[_0x324a5b(0x1fb)][_0x324a5b(0x1e9)]('‚úÖ\x20Server\x20(simuliert):\x20Lizenz\x20g√ºltig.'),!![];return![];}async[a0_0x429dcf(0x1f1)](){const _0x20af22=a0_0x429dcf;await this[_0x20af22(0x2a1)](),await this[_0x20af22(0x21e)]('events.lastEvent',{'type':_0x20af22(0x1cc),'common':{'name':_0x20af22(0x2ad),'type':_0x20af22(0x1bc),'role':_0x20af22(0x2bc),'read':!![],'write':![]},'native':{}}),await this[_0x20af22(0x21e)]('events.history',{'type':_0x20af22(0x1cc),'common':{'name':'Event\x20History','type':_0x20af22(0x1bc),'role':_0x20af22(0x2bc),'read':!![],'write':![]},'native':{}}),await this[_0x20af22(0x21e)](_0x20af22(0x2b6),{'type':_0x20af22(0x1cc),'common':{'name':'Trigger\x20Analysis','type':_0x20af22(0x168),'role':_0x20af22(0x23a),'read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x20af22(0x21e)](_0x20af22(0x1bf),{'type':_0x20af22(0x1cc),'common':{'name':_0x20af22(0x2d3),'type':_0x20af22(0x1bc),'role':_0x20af22(0x2bc),'read':!![],'write':![]},'native':{}}),await this[_0x20af22(0x21e)](_0x20af22(0x267),{'type':_0x20af22(0x1cc),'common':{'name':_0x20af22(0x2bd),'type':_0x20af22(0x168),'role':'indicator.alarm','read':!![],'write':![],'def':![]},'native':{}}),await this[_0x20af22(0x21e)]('analysis.alertReason',{'type':_0x20af22(0x1cc),'common':{'name':'Alert\x20Reason','type':'string','role':'text.alarm','read':!![],'write':![]},'native':{}}),await this[_0x20af22(0x21e)]('analysis.activitySummary',{'type':'state','common':{'name':'Activity\x20Summary','type':'string','role':_0x20af22(0x20e),'read':!![],'write':![]},'native':{}}),await this[_0x20af22(0x21e)](_0x20af22(0x1c9),{'type':_0x20af22(0x1cc),'common':{'name':_0x20af22(0x1c5),'type':_0x20af22(0x1bc),'role':_0x20af22(0x1cc),'read':!![],'write':![],'def':'N/A'},'native':{}}),await this['setObjectNotExistsAsync']('analysis.comfortSummary',{'type':_0x20af22(0x1cc),'common':{'name':_0x20af22(0x272),'type':_0x20af22(0x1bc),'role':_0x20af22(0x20e),'read':!![],'write':![]},'native':{}}),await this[_0x20af22(0x21e)]('analysis.comfortSuggestion',{'type':_0x20af22(0x1cc),'common':{'name':'Comfort\x20Suggestion','type':'string','role':_0x20af22(0x20e),'read':!![],'write':![]},'native':{}}),await this[_0x20af22(0x2be)]('analysis.automation',{'type':_0x20af22(0x1c3),'common':{'name':'Automation\x20Proposals'},'native':{}}),await this[_0x20af22(0x21e)]('analysis.automation.patternDetected',{'type':_0x20af22(0x1cc),'common':{'name':_0x20af22(0x2d0),'type':_0x20af22(0x168),'role':_0x20af22(0x24e),'read':!![],'write':![],'def':![]},'native':{}}),await this[_0x20af22(0x21e)](_0x20af22(0x277),{'type':_0x20af22(0x1cc),'common':{'name':_0x20af22(0x27a),'type':_0x20af22(0x1bc),'role':_0x20af22(0x20e),'read':!![],'write':![]},'native':{}}),await this[_0x20af22(0x21e)](_0x20af22(0x2df),{'type':_0x20af22(0x1cc),'common':{'name':_0x20af22(0x189),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await this[_0x20af22(0x21e)](_0x20af22(0x278),{'type':_0x20af22(0x1cc),'common':{'name':_0x20af22(0x28d),'type':'string','role':_0x20af22(0x2bc),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x20af22(0x21e)]('analysis.feedbackHistory',{'type':_0x20af22(0x1cc),'common':{'name':_0x20af22(0x164),'type':'string','role':_0x20af22(0x2bc),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x20af22(0x1a8)](),await this['checkLtmDriftObjects']();}[a0_0x429dcf(0x207)](_0x2a89bb,_0x5e3ab4){const _0x68bed7=a0_0x429dcf;if(!_0x5e3ab4)return;if(_0x2a89bb===this[_0x68bed7(0x2d2)]+'.'+SYSTEM_DP_MODE){_0x5e3ab4[_0x68bed7(0x15c)]&&Object[_0x68bed7(0x1b5)](SYSTEM_MODES)['includes'](_0x5e3ab4['val'])&&(this[_0x68bed7(0x1cd)]=_0x5e3ab4[_0x68bed7(0x15c)]);if(!_0x5e3ab4[_0x68bed7(0x17e)])this[_0x68bed7(0x25c)](_0x2a89bb,{'val':this[_0x68bed7(0x1cd)],'ack':!![]});return;}if(!_0x5e3ab4[_0x68bed7(0x17e)]){_0x2a89bb[_0x68bed7(0x1a9)](_0x68bed7(0x2b6))&&_0x5e3ab4[_0x68bed7(0x15c)]&&(this[_0x68bed7(0x25c)](_0x2a89bb,{'val':![],'ack':!![]}),this[_0x68bed7(0x1e6)]());if(_0x2a89bb[_0x68bed7(0x1a9)](_0x68bed7(0x1d4))&&_0x5e3ab4[_0x68bed7(0x15c)]){this['setState'](_0x2a89bb,{'val':![],'ack':!![]});if(this[_0x68bed7(0x296)])this[_0x68bed7(0x2ba)]();}return;}const _0xa780d6=(this[_0x68bed7(0x1bb)]['devices']||[])[_0x68bed7(0x260)](_0x336ae4=>_0x336ae4['id']===_0x2a89bb);if(_0xa780d6)this[_0x68bed7(0x19e)](_0x2a89bb,_0x5e3ab4,_0xa780d6);}async['processSensorEvent'](_0x2ca323,_0x22795c,_0x2d8c28){const _0x1465ea=a0_0x429dcf;if(!_0x2d8c28[_0x1465ea(0x27b)]&&this['sensorLastValues'][_0x2ca323]===_0x22795c[_0x1465ea(0x15c)])return;this[_0x1465ea(0x2e7)][_0x2ca323]=_0x22795c['val'];const _0x1a5607={'timestamp':_0x22795c['ts'],'id':_0x2ca323,'name':_0x2d8c28[_0x1465ea(0x271)],'value':_0x22795c[_0x1465ea(0x15c)],'location':_0x2d8c28[_0x1465ea(0x19a)],'type':_0x2d8c28['type']};this[_0x1465ea(0x1de)][_0x1465ea(0x1e4)](_0x1a5607);if(this[_0x1465ea(0x1de)][_0x1465ea(0x26a)]>HISTORY_MAX_SIZE)this[_0x1465ea(0x1de)][_0x1465ea(0x262)]();await this['setStateAsync']('events.lastEvent',{'val':JSON[_0x1465ea(0x201)](_0x1a5607),'ack':!![]}),this['rawEventLog'][_0x1465ea(0x14f)]({'timestamp':new Date(_0x22795c['ts'])[_0x1465ea(0x1ae)](),'sensorName':_0x2d8c28[_0x1465ea(0x271)],'location':_0x2d8c28[_0x1465ea(0x19a)],'value':_0x22795c[_0x1465ea(0x15c)]}),await this[_0x1465ea(0x281)]();}[a0_0x429dcf(0x1b8)](){const _0x3bc418=a0_0x429dcf;if(this[_0x3bc418(0x1de)][_0x3bc418(0x26a)]===0x0){this['setState']('analysis.isAlert',{'val':![],'ack':!![]}),this[_0x3bc418(0x299)]();return;}const _0x5c9a67=Date[_0x3bc418(0x2ce)]();if(_0x5c9a67-this[_0x3bc418(0x1de)][0x0][_0x3bc418(0x2dd)]>(this[_0x3bc418(0x1bb)][_0x3bc418(0x216)]||0xf)*0x3c*0x3e8){this[_0x3bc418(0x25c)](_0x3bc418(0x267),{'val':![],'ack':!![]}),this[_0x3bc418(0x299)]();return;}this[_0x3bc418(0x1e6)]()[_0x3bc418(0x18d)](_0x1de7ec=>this[_0x3bc418(0x1fb)][_0x3bc418(0x2a9)](_0x1de7ec));}async['runGeminiAnalysis'](){const _0xed2cf4=a0_0x429dcf;if(!this['geminiModel']||this['eventHistory'][_0xed2cf4(0x26a)]===0x0)return;const _0x1e5723=PERSONA_MAPPING[this['config'][_0xed2cf4(0x286)]||_0xed2cf4(0x185)],_0x58969a=this[_0xed2cf4(0x1bb)][_0xed2cf4(0x1f2)]||'',_0x41f9f2=this['currentSystemMode'],_0x4e5a65=new Date(),_0x1c89a9=_0x4e5a65[_0xed2cf4(0x246)](_0xed2cf4(0x22c),{'weekday':_0xed2cf4(0x2bf),'hour':_0xed2cf4(0x23e),'minute':'2-digit'}),_0x5bf4a9=this[_0xed2cf4(0x24a)],_0x31a3cd='STANDORT:\x20Lat\x20'+_0x5bf4a9[_0xed2cf4(0x17d)]+_0xed2cf4(0x28c)+_0x5bf4a9[_0xed2cf4(0x288)]+'\x20('+(_0x5bf4a9[_0xed2cf4(0x1af)]||'Unbekannt')+').\x20Nutze\x20dies\x20f√ºr\x20Sonnenstand/Lichtverh√§ltnisse.';this[_0xed2cf4(0x1fb)]['debug'](_0xed2cf4(0x253)+_0x1c89a9+_0xed2cf4(0x209)+_0x5bf4a9[_0xed2cf4(0x1af)]);let _0x2edfe1='Baseline:\x20Inactive.',_0x233bf1=_0xed2cf4(0x1ff);if(this[_0xed2cf4(0x296)]&&this['dailyDigests'][_0xed2cf4(0x26a)]>=(this[_0xed2cf4(0x1bb)][_0xed2cf4(0x212)]||0x7)&&_0x41f9f2===SYSTEM_MODES[_0xed2cf4(0x163)]){const _0x127c6f=this[_0xed2cf4(0x16e)][_0xed2cf4(0x228)](-(this['config'][_0xed2cf4(0x2c7)]||0xe))[_0xed2cf4(0x1e7)]();_0x2edfe1=_0xed2cf4(0x26b)+JSON[_0xed2cf4(0x201)](_0x127c6f),_0x233bf1=_0xed2cf4(0x162);}let _0x12d7db='';if(this[_0xed2cf4(0x23b)]['length']>0x0){const _0x1b2d1c=this['feedbackHistory'][_0xed2cf4(0x1e8)](_0x208dcc=>_0x208dcc[_0xed2cf4(0x1b0)]==='false_positive'||_0x208dcc['rating']==='needs_improvement')[_0xed2cf4(0x228)](0x0,0x3)[_0xed2cf4(0x1f5)](_0x247785=>_0xed2cf4(0x18e)+_0x247785[_0xed2cf4(0x1dd)]+_0xed2cf4(0x2cf)+new Date(_0x247785[_0xed2cf4(0x2dd)])[_0xed2cf4(0x1be)]()+'\x20was\x20FALSE.\x20Reason:\x20'+(_0x247785['comment']||_0xed2cf4(0x2c0))+'.')[_0xed2cf4(0x2a3)]('\x0a');_0x1b2d1c&&(_0x12d7db=_0xed2cf4(0x26c)+_0x1b2d1c+'\x0a');}const _0x1eb207=_0xed2cf4(0x266)+_0x1c89a9+'.\x20'+_0x31a3cd+_0xed2cf4(0x19b)+_0x41f9f2+_0xed2cf4(0x1a6)+_0x58969a+_0xed2cf4(0x1e2)+_0x1e5723+'.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x2edfe1+'\x20'+_0x12d7db+_0xed2cf4(0x203)+_0x233bf1+_0xed2cf4(0x15f)+JSON[_0xed2cf4(0x201)](this['eventHistory'])+_0xed2cf4(0x1b7);try{const _0x279a81=await this['geminiModel'][_0xed2cf4(0x28f)](_0x1eb207),_0x140cd5=JSON['parse'](_0x279a81[_0xed2cf4(0x157)][_0xed2cf4(0x20e)]()[_0xed2cf4(0x20f)](/```json|```/g,'')[_0xed2cf4(0x238)]());await this['setStateAsync'](_0xed2cf4(0x1bf),{'val':JSON['stringify'](_0x140cd5),'ack':!![]}),await this[_0xed2cf4(0x239)](_0xed2cf4(0x178),{'val':_0x140cd5['activity'][_0xed2cf4(0x172)]||_0xed2cf4(0x23f),'ack':!![]}),await this['setStateAsync'](_0xed2cf4(0x1c9),{'val':_0x140cd5[_0xed2cf4(0x18c)][_0xed2cf4(0x29d)]||_0xed2cf4(0x23f),'ack':!![]}),await this['setStateAsync']('analysis.alertReason',{'val':_0x140cd5[_0xed2cf4(0x18c)][_0xed2cf4(0x1dd)]||'','ack':!![]});const _0x426986=_0x140cd5[_0xed2cf4(0x171)][_0xed2cf4(0x17b)],_0x2797f7=this[_0xed2cf4(0x296)]?_0x426986[_0xed2cf4(0x249)]:![];await this[_0xed2cf4(0x239)]('analysis.automation.patternDetected',{'val':_0x2797f7,'ack':!![]}),await this[_0xed2cf4(0x239)](_0xed2cf4(0x277),{'val':_0x2797f7?_0x426986['description']:this[_0xed2cf4(0x296)]?'':'Pro\x20Feature','ack':!![]});if(_0x140cd5[_0xed2cf4(0x18c)]['isAlert']){await this[_0xed2cf4(0x239)](_0xed2cf4(0x267),{'val':!![],'ack':!![]});if(!this['lastAlertState'])this[_0xed2cf4(0x1f4)]('üö®\x20Alarm:\x20'+_0x140cd5[_0xed2cf4(0x18c)][_0xed2cf4(0x1dd)]);}else await this['setStateAsync'](_0xed2cf4(0x267),{'val':![],'ack':!![]});this[_0xed2cf4(0x2b1)]=_0x140cd5[_0xed2cf4(0x18c)][_0xed2cf4(0x280)];const _0x5442a1={'timestamp':Date[_0xed2cf4(0x2ce)](),'id':Date[_0xed2cf4(0x2ce)]()[_0xed2cf4(0x155)](),'analysis':_0x140cd5,'systemMode':_0x41f9f2,'isPro':this[_0xed2cf4(0x296)]};this[_0xed2cf4(0x177)](_0x5442a1);}catch(_0x2db349){this[_0xed2cf4(0x1fb)]['error']('Analysis\x20Error:\x20'+_0x2db349[_0xed2cf4(0x29b)]);}}async[a0_0x429dcf(0x2ba)](){const _0x3f83b9=a0_0x429dcf;if(!this['isProVersion'])return;await this[_0x3f83b9(0x239)](LTM_DP_STATUS,{'val':_0x3f83b9(0x1c6)+new Date()[_0x3f83b9(0x246)](),'ack':!![]});if(!this[_0x3f83b9(0x14d)]||this[_0x3f83b9(0x22a)][_0x3f83b9(0x26a)]<LTM_MIN_EVENTS_FOR_COMPRESSION){await this[_0x3f83b9(0x239)](LTM_DP_STATUS,{'val':_0x3f83b9(0x219),'ack':!![]});return;}const _0x589643=JSON[_0x3f83b9(0x221)](JSON[_0x3f83b9(0x201)](this[_0x3f83b9(0x22a)])),_0x199222=(this['config']['livingContext']||'')[_0x3f83b9(0x2cc)](0x0,0x3e8),_0x116d5f='ROLLE:\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20KONTEXT:\x20'+_0x199222+_0x3f83b9(0x1c1)+JSON['stringify'](_0x589643);try{const _0x399fbb=await this[_0x3f83b9(0x14d)][_0x3f83b9(0x28f)](_0x116d5f),_0x5a19da=JSON[_0x3f83b9(0x221)](_0x399fbb['response'][_0x3f83b9(0x20e)]()[_0x3f83b9(0x20f)](/```json|```/g,'')['trim']());_0x5a19da[_0x3f83b9(0x172)]&&(this[_0x3f83b9(0x16e)][_0x3f83b9(0x14f)]({'timestamp':new Date()[_0x3f83b9(0x1ae)](),'eventCount':_0x589643['length'],'summary':_0x5a19da['summary'],'activityLevel':_0x5a19da[_0x3f83b9(0x291)],'systemMode':this[_0x3f83b9(0x1cd)]}),await this[_0x3f83b9(0x269)](),this[_0x3f83b9(0x22a)]=[],await this[_0x3f83b9(0x281)](),await this['setStateAsync'](LTM_DP_STATUS,{'val':_0x3f83b9(0x1f6)+_0x589643['length']+_0x3f83b9(0x1fd),'ack':!![]}));}catch(_0x141980){await this[_0x3f83b9(0x239)](LTM_DP_STATUS,{'val':_0x3f83b9(0x1dc)+_0x141980[_0x3f83b9(0x29b)],'ack':!![]});}}async[a0_0x429dcf(0x1ef)](){const _0x3a3da4=a0_0x429dcf;if(!this[_0x3a3da4(0x296)]||!this['geminiModel'])return;const _0x339f5f=this['config']['ltmStbWindowDays']||0xe;if(this['dailyDigests']['length']<_0x339f5f+(this[_0x3a3da4(0x1bb)][_0x3a3da4(0x212)]||0x7)){await this[_0x3a3da4(0x239)](LTM_DP_DRIFT_STATUS,{'val':_0x3a3da4(0x2a7),'ack':!![]});return;}const _0x113e84=this[_0x3a3da4(0x16e)][_0x3a3da4(0x228)](-_0x339f5f),_0x2e72f0=this[_0x3a3da4(0x16e)][_0x3a3da4(0x228)](0x0,this[_0x3a3da4(0x16e)]['length']-_0x339f5f),_0x1340cd=_0x3a3da4(0x25b)+JSON[_0x3a3da4(0x201)](_0x2e72f0)+'\x0a\x0aA\x20(STB):\x0a'+JSON[_0x3a3da4(0x201)](_0x113e84);try{const _0x59147c=await this[_0x3a3da4(0x14d)][_0x3a3da4(0x28f)](_0x1340cd),_0x4d8b6e=JSON[_0x3a3da4(0x221)](_0x59147c[_0x3a3da4(0x157)][_0x3a3da4(0x20e)]()[_0x3a3da4(0x20f)](/```json|```/g,'')[_0x3a3da4(0x238)]());_0x4d8b6e[_0x3a3da4(0x2cb)]&&(await this['setStateAsync'](LTM_DP_DRIFT_STATUS,{'val':_0x4d8b6e[_0x3a3da4(0x2cb)],'ack':!![]}),await this[_0x3a3da4(0x239)](LTM_DP_DRIFT_DETAILS,{'val':_0x4d8b6e['driftDetails'],'ack':!![]}),await this[_0x3a3da4(0x239)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date['now'](),'ack':!![]}));}catch(_0x5412f4){}}async[a0_0x429dcf(0x2a1)](){const _0x3e2066=a0_0x429dcf;await this[_0x3e2066(0x2be)](_0x3e2066(0x169),{'type':_0x3e2066(0x1c3),'common':{'name':_0x3e2066(0x167)},'native':{}}),await this[_0x3e2066(0x2be)](SYSTEM_DP_MODE,{'type':_0x3e2066(0x1cc),'common':{'name':_0x3e2066(0x257),'type':_0x3e2066(0x1bc),'role':_0x3e2066(0x1cc),'read':!![],'write':!![],'def':SYSTEM_MODES[_0x3e2066(0x163)],'states':{[SYSTEM_MODES[_0x3e2066(0x163)]]:_0x3e2066(0x285),[SYSTEM_MODES[_0x3e2066(0x20d)]]:_0x3e2066(0x1d7),[SYSTEM_MODES[_0x3e2066(0x23d)]]:_0x3e2066(0x256),[SYSTEM_MODES[_0x3e2066(0x2c2)]]:_0x3e2066(0x279)}},'native':{}});}async['loadSystemMode'](){const _0x255919=a0_0x429dcf;try{const _0x17a7ea=await this['getStateAsync'](SYSTEM_DP_MODE);_0x17a7ea&&_0x17a7ea['val']&&Object[_0x255919(0x1b5)](SYSTEM_MODES)['includes'](_0x17a7ea[_0x255919(0x15c)])?this[_0x255919(0x1cd)]=_0x17a7ea[_0x255919(0x15c)]:(this[_0x255919(0x1cd)]=SYSTEM_MODES[_0x255919(0x163)],await this[_0x255919(0x239)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES[_0x255919(0x163)],'ack':!![]}));}catch(_0xf24d3){this['currentSystemMode']=SYSTEM_MODES[_0x255919(0x163)];}}['setupModeResetScheduler'](){const _0x17626f=a0_0x429dcf;if(this[_0x17626f(0x242)])this[_0x17626f(0x242)][_0x17626f(0x170)]();this[_0x17626f(0x242)]=schedule[_0x17626f(0x218)](MODE_RESET_SCHEDULE,async()=>{const _0x48a2ad=_0x17626f;await this[_0x48a2ad(0x284)](),AUTO_RESET_MODES[_0x48a2ad(0x1a9)](this[_0x48a2ad(0x1cd)])&&await this[_0x48a2ad(0x239)](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':![]});});}async[a0_0x429dcf(0x181)](){const _0x228b48=a0_0x429dcf;if(!this[_0x228b48(0x296)]){await this['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x228b48(0x187),'ack':!![]});return;}const _0x5b39ae=this['dailyDigests'][_0x228b48(0x26a)]>=(this[_0x228b48(0x1bb)][_0x228b48(0x212)]||0x7)?'Aktiv\x20('+this[_0x228b48(0x16e)][_0x228b48(0x26a)]+_0x228b48(0x1a4):_0x228b48(0x1c7)+this[_0x228b48(0x16e)][_0x228b48(0x26a)]+'/'+(this[_0x228b48(0x1bb)][_0x228b48(0x212)]||0x7)+')';await this['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x5b39ae,'ack':!![]});}async[a0_0x429dcf(0x1a8)](){const _0x68deee=a0_0x429dcf;await this[_0x68deee(0x2be)](_0x68deee(0x1d0),{'type':_0x68deee(0x1c3),'common':{'name':_0x68deee(0x1d0)},'native':{}}),await this[_0x68deee(0x2be)](LTM_DP_RAW_LOG,{'type':_0x68deee(0x1cc),'common':{'name':_0x68deee(0x223),'type':_0x68deee(0x1bc),'role':_0x68deee(0x2bc),'read':!![],'write':![]},'native':{}}),await this[_0x68deee(0x2be)](LTM_DP_DAILY_DIGESTS,{'type':'state','common':{'name':_0x68deee(0x2a0),'type':_0x68deee(0x1bc),'role':_0x68deee(0x2bc),'read':!![],'write':![]},'native':{}}),await this[_0x68deee(0x2be)](LTM_DP_STATUS,{'type':_0x68deee(0x1cc),'common':{'name':'Processing\x20Status','type':_0x68deee(0x1bc),'role':_0x68deee(0x20e),'read':!![],'write':![]},'native':{}}),await this['extendObjectAsync'](LTM_DP_TRIGGER_DIGEST,{'type':_0x68deee(0x1cc),'common':{'name':_0x68deee(0x2d9),'type':'boolean','role':'button','read':!![],'write':!![],'def':![]},'native':{}}),await this[_0x68deee(0x2be)](LTM_DP_BASELINE_STATUS,{'type':_0x68deee(0x1cc),'common':{'name':_0x68deee(0x233),'type':'string','role':'text','read':!![],'write':![]},'native':{}});}async[a0_0x429dcf(0x151)](){const _0xf7cb81=a0_0x429dcf;await this[_0xf7cb81(0x2be)](LTM_DP_DRIFT_CHANNEL,{'type':'channel','common':{'name':_0xf7cb81(0x2d1)},'native':{}}),await this[_0xf7cb81(0x2be)](LTM_DP_DRIFT_STATUS,{'type':_0xf7cb81(0x1cc),'common':{'name':'Drift\x20Status','type':_0xf7cb81(0x1bc),'role':'state','read':!![],'write':![],'def':_0xf7cb81(0x23f)},'native':{}}),await this[_0xf7cb81(0x2be)](LTM_DP_DRIFT_DETAILS,{'type':'state','common':{'name':_0xf7cb81(0x17f),'type':_0xf7cb81(0x1bc),'role':'text','read':!![],'write':![]},'native':{}}),await this[_0xf7cb81(0x2be)](LTM_DP_DRIFT_LAST_CHECK,{'type':_0xf7cb81(0x1cc),'common':{'name':_0xf7cb81(0x2e4),'type':_0xf7cb81(0x293),'role':_0xf7cb81(0x15e),'read':!![],'write':![]},'native':{}});}async[a0_0x429dcf(0x161)](){const _0x4e476=a0_0x429dcf;try{const _0x2ce0a7=await this[_0x4e476(0x1b3)](LTM_DP_RAW_LOG);if(_0x2ce0a7&&_0x2ce0a7[_0x4e476(0x15c)])this[_0x4e476(0x22a)]=JSON[_0x4e476(0x221)](_0x2ce0a7[_0x4e476(0x15c)]);}catch(_0xe38409){this[_0x4e476(0x22a)]=[];}}async['saveRawEventLog'](){const _0x4d8867=a0_0x429dcf;this['rawEventLog']['length']>RAW_LOG_MAX_SIZE&&this[_0x4d8867(0x22a)]['splice'](0x0,this[_0x4d8867(0x22a)][_0x4d8867(0x26a)]-RAW_LOG_MAX_SIZE),await this[_0x4d8867(0x239)](LTM_DP_RAW_LOG,{'val':JSON[_0x4d8867(0x201)](this[_0x4d8867(0x22a)]),'ack':!![]});}async['loadDailyDigests'](){const _0x5c5219=a0_0x429dcf;try{const _0x179f5f=await this['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x179f5f&&_0x179f5f[_0x5c5219(0x15c)])this[_0x5c5219(0x16e)]=JSON[_0x5c5219(0x221)](_0x179f5f[_0x5c5219(0x15c)]);}catch(_0x2211f0){this[_0x5c5219(0x16e)]=[];}await this[_0x5c5219(0x181)]();}async[a0_0x429dcf(0x269)](_0x555199=!![]){const _0x343f08=a0_0x429dcf,_0x12c165=this[_0x343f08(0x1bb)][_0x343f08(0x22e)]||0x3c;this['dailyDigests'][_0x343f08(0x26a)]>_0x12c165&&this[_0x343f08(0x16e)]['splice'](0x0,this[_0x343f08(0x16e)][_0x343f08(0x26a)]-_0x12c165);await this[_0x343f08(0x239)](LTM_DP_DAILY_DIGESTS,{'val':JSON['stringify'](this[_0x343f08(0x16e)]),'ack':!![]});if(_0x555199)await this['updateBaselineStatus']();}['setupLtmScheduler'](){const _0x5c480f=a0_0x429dcf;if(this[_0x5c480f(0x1b1)])this[_0x5c480f(0x1b1)][_0x5c480f(0x170)]();if(!this[_0x5c480f(0x296)]){this[_0x5c480f(0x239)](LTM_DP_STATUS,{'val':_0x5c480f(0x187),'ack':!![]});return;}this[_0x5c480f(0x1b1)]=schedule[_0x5c480f(0x218)](LTM_SCHEDULE,()=>this[_0x5c480f(0x2ba)]());}[a0_0x429dcf(0x204)](){const _0x51fb27=a0_0x429dcf;if(this['driftAnalysisTimer'])clearInterval(this[_0x51fb27(0x195)]);if(!this['isProVersion'])return;this[_0x51fb27(0x195)]=setInterval(()=>this[_0x51fb27(0x1ef)](),(this[_0x51fb27(0x1bb)]['ltmDriftCheckIntervalHours']||0x18)*0x36ee80),setTimeout(()=>this[_0x51fb27(0x1ef)](),0x1388);}async['resetAnalysisStates'](){const _0x29d433=a0_0x429dcf;await this[_0x29d433(0x239)](_0x29d433(0x178),{'val':_0x29d433(0x211),'ack':!![]}),await this[_0x29d433(0x239)](_0x29d433(0x1c9),{'val':this[_0x29d433(0x296)]?'N/A\x20(No\x20Activity)':'N/A\x20(Pro\x20Feature)','ack':!![]}),await this[_0x29d433(0x239)](_0x29d433(0x267),{'val':![],'ack':!![]}),this['lastAlertState']=![];}async[a0_0x429dcf(0x177)](_0x2449bc){const _0x2d5323=a0_0x429dcf;this[_0x2d5323(0x275)][_0x2d5323(0x1e4)](_0x2449bc);if(this[_0x2d5323(0x275)][_0x2d5323(0x26a)]>ANALYSIS_HISTORY_MAX_SIZE)this['analysisHistory'][_0x2d5323(0x262)]();await this[_0x2d5323(0x239)]('analysis.analysisHistory',{'val':JSON[_0x2d5323(0x201)](this[_0x2d5323(0x275)]),'ack':!![]});}async[a0_0x429dcf(0x1f4)](_0x13e22f,_0x32455e=![]){const _0x3aec06=a0_0x429dcf;this['log'][_0x3aec06(0x1e9)]((_0x32455e?_0x3aec06(0x14e):'')+_0x3aec06(0x273)+_0x13e22f+'\x22');const _0x63251f=this['config'];let _0x5917b1=0x0;return _0x63251f[_0x3aec06(0x26e)]&&_0x63251f['notifyTelegramInstance']&&(await this[_0x3aec06(0x290)](_0x63251f[_0x3aec06(0x1ee)],_0x3aec06(0x25d),{'text':_0x13e22f,'user':_0x63251f[_0x3aec06(0x1fa)]}),_0x5917b1++),_0x63251f[_0x3aec06(0x24f)]&&_0x63251f[_0x3aec06(0x18a)]&&(await this[_0x3aec06(0x290)](_0x63251f[_0x3aec06(0x18a)],'send',{'message':_0x13e22f,'title':_0x3aec06(0x1c2),'priority':0x1,'device':_0x63251f[_0x3aec06(0x176)]}),_0x5917b1++),_0x63251f[_0x3aec06(0x26d)]&&_0x63251f[_0x3aec06(0x180)]&&(await this['sendToAsync'](_0x63251f['notifyEmailInstance'],_0x3aec06(0x25d),{'text':_0x13e22f,'to':_0x63251f['notifyEmailRecipient']}),_0x5917b1++),_0x63251f['notifyWhatsappEnabled']&&_0x63251f[_0x3aec06(0x1c4)]&&(await this[_0x3aec06(0x290)](_0x63251f[_0x3aec06(0x1c4)],'send',{'text':_0x13e22f,'phone':_0x63251f[_0x3aec06(0x29c)]}),_0x5917b1++),_0x63251f['notifySignalEnabled']&&_0x63251f[_0x3aec06(0x19d)]&&(await this['sendToAsync'](_0x63251f[_0x3aec06(0x19d)],'send',{'text':_0x13e22f,'phone':_0x63251f[_0x3aec06(0x152)]}),_0x5917b1++),_0x5917b1;}async[a0_0x429dcf(0x245)](_0x56e383){const _0x30fc81=a0_0x429dcf;this[_0x30fc81(0x23b)][_0x30fc81(0x1e4)](_0x56e383);if(this['feedbackHistory'][_0x30fc81(0x26a)]>FEEDBACK_MAX_SIZE)this[_0x30fc81(0x23b)]['pop']();await this['setStateAsync']('analysis.feedbackHistory',{'val':JSON[_0x30fc81(0x201)](this[_0x30fc81(0x23b)]),'ack':!![]}),this[_0x30fc81(0x1fb)]['info'](_0x30fc81(0x2e2)+_0x56e383['rating']+_0x30fc81(0x2c6)+_0x56e383[_0x30fc81(0x19c)]);}[a0_0x429dcf(0x2b3)](_0x3f8bc0){const _0x4a2c1e=a0_0x429dcf;if(this[_0x4a2c1e(0x1df)])clearInterval(this[_0x4a2c1e(0x1df)]);if(this[_0x4a2c1e(0x195)])clearInterval(this[_0x4a2c1e(0x195)]);if(this['ltmJob'])this[_0x4a2c1e(0x1b1)][_0x4a2c1e(0x170)]();if(this[_0x4a2c1e(0x242)])this['modeResetJob'][_0x4a2c1e(0x170)]();_0x3f8bc0();}async['onMessage'](_0x3e245e){const _0x20b895=a0_0x429dcf;if(typeof _0x3e245e===_0x20b895(0x243)&&_0x3e245e[_0x20b895(0x29b)]){if(_0x3e245e[_0x20b895(0x26f)]===_0x20b895(0x2b9)){if(!_0x3e245e[_0x20b895(0x29b)]['apiKey'])return this[_0x20b895(0x2b4)](_0x3e245e[_0x20b895(0x25f)],_0x3e245e[_0x20b895(0x26f)],{'success':![],'message':_0x20b895(0x1d2)},_0x3e245e[_0x20b895(0x154)]);try{const _0x106b2f=new GoogleGenerativeAI(_0x3e245e[_0x20b895(0x29b)][_0x20b895(0x2e5)])['getGenerativeModel']({'model':_0x20b895(0x186)});await _0x106b2f[_0x20b895(0x28f)]('test'),this[_0x20b895(0x2b4)](_0x3e245e[_0x20b895(0x25f)],_0x3e245e['command'],{'success':!![],'message':_0x20b895(0x283)},_0x3e245e[_0x20b895(0x154)]);}catch(_0x5c79d3){this['sendTo'](_0x3e245e[_0x20b895(0x25f)],_0x3e245e[_0x20b895(0x26f)],{'success':![],'message':_0x5c79d3[_0x20b895(0x29b)]},_0x3e245e[_0x20b895(0x154)]);}}else{if(_0x3e245e['command']===_0x20b895(0x15d)){const _0x473699=await this[_0x20b895(0x1f4)]('[Test]\x20Notification',!![]);this[_0x20b895(0x2b4)](_0x3e245e[_0x20b895(0x25f)],_0x3e245e['command'],{'success':_0x473699>0x0,'message':_0x473699+_0x20b895(0x2c3)},_0x3e245e['callback']);}else{if(_0x3e245e[_0x20b895(0x26f)]===_0x20b895(0x2bb)){if(!this[_0x20b895(0x296)])return this[_0x20b895(0x2b4)](_0x3e245e[_0x20b895(0x25f)],_0x3e245e[_0x20b895(0x26f)],{'success':![],'isPro':![]},_0x3e245e[_0x20b895(0x154)]);let _0x2d4923={'status':_0x20b895(0x23f),'details':'','lastCheck':0x0};try{_0x2d4923[_0x20b895(0x251)]=(await this[_0x20b895(0x1b3)](LTM_DP_DRIFT_STATUS))['val'],_0x2d4923[_0x20b895(0x261)]=(await this['getStateAsync'](LTM_DP_DRIFT_DETAILS))[_0x20b895(0x15c)],_0x2d4923[_0x20b895(0x2d8)]=(await this[_0x20b895(0x1b3)](LTM_DP_DRIFT_LAST_CHECK))['val'];}catch(_0x400637){}this['sendTo'](_0x3e245e[_0x20b895(0x25f)],_0x3e245e['command'],{'success':!![],'isPro':!![],'dailyDigests':this[_0x20b895(0x16e)],'driftAnalysis':_0x2d4923,'analysisHistory':this[_0x20b895(0x275)]},_0x3e245e[_0x20b895(0x154)]);}else{if(_0x3e245e[_0x20b895(0x26f)]===_0x20b895(0x258)){const _0x62a39a=await this['getForeignObjectsAsync'](_0x20b895(0x244),_0x20b895(0x1b9)),_0x3630f0=[];if(_0x62a39a)for(const _0x2e3fe4 in _0x62a39a){const _0x1ef937=_0x62a39a[_0x2e3fe4],_0x5be7e3=(_0x1ef937[_0x20b895(0x1a1)]&&typeof _0x1ef937[_0x20b895(0x1a1)][_0x20b895(0x271)]===_0x20b895(0x243)?_0x1ef937['common']['name']['de']:_0x1ef937[_0x20b895(0x1a1)][_0x20b895(0x271)])||_0x1ef937[_0x20b895(0x1a1)][_0x20b895(0x271)];_0x3630f0[_0x20b895(0x14f)]({'id':_0x2e3fe4,'name':_0x5be7e3});}this['sendTo'](_0x3e245e[_0x20b895(0x25f)],_0x3e245e[_0x20b895(0x26f)],{'success':!![],'enums':_0x3630f0},_0x3e245e[_0x20b895(0x154)]);}else{if(_0x3e245e[_0x20b895(0x26f)]===_0x20b895(0x297)){this[_0x20b895(0x1fb)][_0x20b895(0x1e9)]('Received\x20scanDevices\x20request\x20from\x20Admin\x20UI.');const _0x40ab4a=_0x3e245e[_0x20b895(0x29b)]||{};try{const _0x3c7ec8=await this['scanForDevices'](_0x40ab4a);this['sendTo'](_0x3e245e[_0x20b895(0x25f)],_0x3e245e['command'],{'success':!![],'devices':_0x3c7ec8},_0x3e245e[_0x20b895(0x154)]);}catch(_0x99c984){this[_0x20b895(0x2b4)](_0x3e245e[_0x20b895(0x25f)],_0x3e245e['command'],{'success':![],'error':_0x99c984[_0x20b895(0x29b)]},_0x3e245e[_0x20b895(0x154)]);}}else{if(_0x3e245e[_0x20b895(0x26f)]===_0x20b895(0x1cf)){const {historyId:_0x347c63,rating:_0x574661,comment:_0x5c97cd,alertReason:_0x5825df}=_0x3e245e[_0x20b895(0x29b)];_0x347c63&&_0x574661?(await this[_0x20b895(0x245)]({'timestamp':Date['now'](),'historyId':_0x347c63,'rating':_0x574661,'comment':_0x5c97cd,'alertReason':_0x5825df}),this[_0x20b895(0x2b4)](_0x3e245e[_0x20b895(0x25f)],_0x3e245e[_0x20b895(0x26f)],{'success':!![]},_0x3e245e[_0x20b895(0x154)])):this[_0x20b895(0x2b4)](_0x3e245e[_0x20b895(0x25f)],_0x3e245e[_0x20b895(0x26f)],{'success':![],'error':'Missing\x20data'},_0x3e245e[_0x20b895(0x154)]);}}}}}}}}}if(require[a0_0x429dcf(0x2c1)]!==module)module['exports']=_0x4f0d60=>new CogniLiving(_0x4f0d60);else new CogniLiving();