const a0_0xbfa10c=a0_0x7d33;(function(_0x2c6082,_0x1edcd2){const _0x3020e2=a0_0x7d33,_0x2cb46b=_0x2c6082();while(!![]){try{const _0xba50e2=parseInt(_0x3020e2(0x191))/0x1+parseInt(_0x3020e2(0x1d3))/0x2+-parseInt(_0x3020e2(0x1e6))/0x3+-parseInt(_0x3020e2(0x1ac))/0x4*(parseInt(_0x3020e2(0x254))/0x5)+-parseInt(_0x3020e2(0x216))/0x6+parseInt(_0x3020e2(0x29d))/0x7+-parseInt(_0x3020e2(0x152))/0x8*(-parseInt(_0x3020e2(0x179))/0x9);if(_0xba50e2===_0x1edcd2)break;else _0x2cb46b['push'](_0x2cb46b['shift']());}catch(_0x22b014){_0x2cb46b['push'](_0x2cb46b['shift']());}}}(a0_0x1b83,0xbab28));const a0_0x4e2c2e=(function(){let _0x30ee69=!![];return function(_0x4c7ebf,_0x61aec2){const _0x4b9414=_0x30ee69?function(){const _0x411f85=a0_0x7d33;if(_0x61aec2){const _0x112c84=_0x61aec2[_0x411f85(0x15a)](_0x4c7ebf,arguments);return _0x61aec2=null,_0x112c84;}}:function(){};return _0x30ee69=![],_0x4b9414;};}()),a0_0x179a68=a0_0x4e2c2e(this,function(){const _0x5a5e42=a0_0x7d33;return a0_0x179a68[_0x5a5e42(0x156)]()[_0x5a5e42(0x24d)](_0x5a5e42(0x267))['toString']()['constructor'](a0_0x179a68)[_0x5a5e42(0x24d)](_0x5a5e42(0x267));});a0_0x179a68();'use strict';const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0xbfa10c(0x192)),{spawn}=require(a0_0xbfa10c(0x18a)),path=require(a0_0xbfa10c(0x150)),fs=require('fs'),installer=require(a0_0xbfa10c(0x1a4)),scanner=require(a0_0xbfa10c(0x1ab)),schedulers=require(a0_0xbfa10c(0x2a2)),HISTORY_MAX_SIZE=0x32,RAW_LOG_MAX_SIZE=0x9c4,LTM_MIN_EVENTS_FOR_COMPRESSION=0x5,GEMINI_MODEL='models/gemini-flash-latest',SEQUENCE_TIMEOUT_MS=0x5*0x3c*0x3e8,MAX_TRAINING_SET_SIZE=0x1f4,THERMO_LOG_SIZE=0x3e8,EXIT_TIMER_MINUTES=0xf,EXIT_GRACE_PERIOD_SECONDS=0x1e,LTM_DP_RAW_LOG=a0_0xbfa10c(0x21f),LTM_DP_DAILY_DIGESTS=a0_0xbfa10c(0x28f),LTM_DP_STATUS=a0_0xbfa10c(0x188),LTM_DP_TRIGGER_DIGEST='LTM.triggerDailyDigest',LTM_DP_BASELINE_STATUS='LTM.baselineStatus',LTM_DP_DRIFT_CHANNEL='LTM.driftAnalysis',LTM_DP_DRIFT_STATUS=a0_0xbfa10c(0x18c),LTM_DP_DRIFT_DETAILS=a0_0xbfa10c(0x1c2),LTM_DP_DRIFT_LAST_CHECK=a0_0xbfa10c(0x1ea),SYSTEM_DP_MODE='system.mode',SYSTEM_MODES={'NORMAL':'normal','VACATION':'vacation','PARTY':a0_0xbfa10c(0x11b),'GUEST':a0_0xbfa10c(0x12a)},AUTO_RESET_MODES=[SYSTEM_MODES[a0_0xbfa10c(0x11f)],SYSTEM_MODES[a0_0xbfa10c(0x224)]],PERSONA_MAPPING={'generic':a0_0xbfa10c(0x1ca),'senior_aal':a0_0xbfa10c(0x1a5),'family':a0_0xbfa10c(0x120),'single_comfort':a0_0xbfa10c(0x19f),'security':a0_0xbfa10c(0x19d)},ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};let activeSequence=[],sequenceTimer=null;async function initZombies(_0x2751e3){const _0x356bf8=a0_0xbfa10c;try{const _0x68528=[_0x356bf8(0x146),'events.history_debug_00'];for(const _0xa4a772 of _0x68528){try{const _0x5e948d=await _0x2751e3[_0x356bf8(0x175)](_0xa4a772);if(_0x5e948d)await _0x2751e3[_0x356bf8(0x181)](_0xa4a772);}catch(_0x22d5b8){}}}catch(_0x2defa4){}}async function checkLicense(_0x4a73b8){return!![];}async function initHistory(_0x55d343){const _0x232103=a0_0xbfa10c;try{const _0x233da1=await _0x55d343[_0x232103(0x170)](_0x232103(0x271));_0x233da1&&_0x233da1[_0x232103(0x25c)]&&(_0x55d343[_0x232103(0x20c)]=JSON['parse'](_0x233da1[_0x232103(0x25c)][_0x232103(0x156)]()));}catch(_0x3adf51){_0x55d343[_0x232103(0x20c)]=[];}try{const _0x7e7982=await _0x55d343['getStateAsync'](_0x232103(0x265));if(_0x7e7982&&_0x7e7982[_0x232103(0x25c)])_0x55d343[_0x232103(0x1c3)]=JSON['parse'](_0x7e7982[_0x232103(0x25c)][_0x232103(0x156)]());}catch(_0x290639){_0x55d343[_0x232103(0x1c3)]=[];}if(_0x55d343[_0x232103(0x20c)]&&_0x55d343['eventHistory'][_0x232103(0x20f)]>0x0){_0x55d343['log'][_0x232103(0x1cb)](_0x232103(0x136));for(let _0x2f7c4a=_0x55d343[_0x232103(0x20c)]['length']-0x1;_0x2f7c4a>=0x0;_0x2f7c4a--){const _0x26fe2c=_0x55d343[_0x232103(0x20c)][_0x2f7c4a];if(_0x26fe2c&&_0x26fe2c['id']!==undefined&&_0x26fe2c[_0x232103(0x26f)]!==undefined)_0x55d343[_0x232103(0x143)][_0x26fe2c['id']]=_0x26fe2c[_0x232103(0x26f)];}}}async function initSystemConfig(_0x5e2530){const _0x412ad3=a0_0xbfa10c;try{const _0x2d1147=await _0x5e2530[_0x412ad3(0x21e)]('system.config');if(_0x2d1147&&_0x2d1147[_0x412ad3(0x1ec)])_0x5e2530[_0x412ad3(0x184)]={'latitude':_0x2d1147[_0x412ad3(0x1ec)][_0x412ad3(0x1b7)]||0x0,'longitude':_0x2d1147[_0x412ad3(0x1ec)][_0x412ad3(0x248)]||0x0,'city':_0x2d1147[_0x412ad3(0x1ec)][_0x412ad3(0x223)]||''};}catch(_0x1b6fa5){}}async function createAllObjects(_0x4ac18e){const _0x292f76=a0_0xbfa10c;await _0x4ac18e[_0x292f76(0x147)]('system',{'type':'channel','common':{'name':_0x292f76(0x1e1)},'native':{}}),await _0x4ac18e[_0x292f76(0x147)](SYSTEM_DP_MODE,{'type':_0x292f76(0x128),'common':{'name':'System\x20Mode','type':'string','role':'state','read':!![],'write':!![],'def':SYSTEM_MODES['NORMAL']},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x236),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x22f),'type':_0x292f76(0x141),'role':_0x292f76(0x26c),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x154),{'type':'state','common':{'name':_0x292f76(0x232),'type':_0x292f76(0x141),'role':_0x292f76(0x163),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x271),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x263),'type':_0x292f76(0x141),'role':_0x292f76(0x163),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x147)](_0x292f76(0x287),{'type':'channel','common':{'name':_0x292f76(0x180)},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x183),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x23d),'type':_0x292f76(0x288),'role':_0x292f76(0x21a),'read':!![],'write':!![]},'native':{}}),await _0x4ac18e['setObjectNotExistsAsync']('analysis.training.triggerHealth',{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x1ad),'type':_0x292f76(0x288),'role':_0x292f76(0x21a),'read':!![],'write':!![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x26a),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x165),'type':_0x292f76(0x288),'role':_0x292f76(0x21a),'read':!![],'write':!![]},'native':{}}),await _0x4ac18e['setObjectNotExistsAsync'](_0x292f76(0x1fb),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x11d),'type':'boolean','role':'button','read':!![],'write':!![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x1c9),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x1a0),'type':_0x292f76(0x288),'role':_0x292f76(0x21a),'read':!![],'write':!![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x24e),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x1d9),'type':_0x292f76(0x141),'role':'text','read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x147)]('analysis.security',{'type':_0x292f76(0x186),'common':{'name':_0x292f76(0x14d)},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x24f),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x137),'type':_0x292f76(0x11e),'role':'value','read':!![],'write':![]},'native':{}}),await _0x4ac18e['setObjectNotExistsAsync']('analysis.security.currentThreshold',{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x1f7),'type':'number','role':'value','read':!![],'write':![],'def':0.05},'native':{}}),await _0x4ac18e['setObjectNotExistsAsync'](_0x292f76(0x289),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x1c1),'type':_0x292f76(0x141),'role':_0x292f76(0x23e),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x1e8),{'type':_0x292f76(0x128),'common':{'name':'Topology\x20Matrix','type':_0x292f76(0x141),'role':_0x292f76(0x163),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x147)]('analysis.health',{'type':_0x292f76(0x186),'common':{'name':_0x292f76(0x220)},'native':{}}),await _0x4ac18e['setObjectNotExistsAsync'](_0x292f76(0x1bf),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x1c1),'type':_0x292f76(0x141),'role':_0x292f76(0x23e),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x240),{'type':'state','common':{'name':_0x292f76(0x27a),'type':_0x292f76(0x288),'role':_0x292f76(0x1e2),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x25a),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x1da),'type':'string','role':_0x292f76(0x26c),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x13b),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x1e7),'type':_0x292f76(0x11e),'role':_0x292f76(0x26f),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x281),{'type':'state','common':{'name':_0x292f76(0x195),'type':_0x292f76(0x141),'role':_0x292f76(0x163),'read':!![],'write':![]},'native':{}}),await _0x4ac18e['setObjectNotExistsAsync']('analysis.health.gaitSpeed',{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x172),'type':_0x292f76(0x11e),'role':_0x292f76(0x26f),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x147)]('analysis.energy',{'type':_0x292f76(0x186),'common':{'name':'Energy\x20Intelligence'},'native':{}}),await _0x4ac18e[_0x292f76(0x245)]('analysis.energy.insulationScore',{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x134),'type':_0x292f76(0x141),'role':_0x292f76(0x26c),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x25f),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x202),'type':_0x292f76(0x141),'role':_0x292f76(0x26c),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x158),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x126),'type':_0x292f76(0x141),'role':_0x292f76(0x163),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x147)](_0x292f76(0x221),{'type':_0x292f76(0x186),'common':{'name':_0x292f76(0x221)},'native':{}}),await _0x4ac18e['extendObjectAsync'](LTM_DP_RAW_LOG,{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x210),'type':_0x292f76(0x141),'role':_0x292f76(0x163),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x147)](LTM_DP_DAILY_DIGESTS,{'type':_0x292f76(0x128),'common':{'name':'Daily\x20Digests','type':_0x292f76(0x141),'role':_0x292f76(0x163),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x256),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x246),'type':_0x292f76(0x141),'role':_0x292f76(0x163),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x214),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x1f9),'type':_0x292f76(0x141),'role':'json','read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x153),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x14e),'type':_0x292f76(0x288),'role':_0x292f76(0x21a),'read':!![],'write':!![]},'native':{}}),await _0x4ac18e['setObjectNotExistsAsync'](_0x292f76(0x242),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x253),'type':_0x292f76(0x288),'role':_0x292f76(0x21a),'read':!![],'write':!![]},'native':{}}),await _0x4ac18e['setObjectNotExistsAsync'](_0x292f76(0x151),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x130),'type':_0x292f76(0x288),'role':_0x292f76(0x1be),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)]('analysis.alertReason',{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x2ad),'type':_0x292f76(0x141),'role':_0x292f76(0x1f3),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x1f8),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x282),'type':_0x292f76(0x141),'role':_0x292f76(0x26c),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x15b),{'type':_0x292f76(0x128),'common':{'name':'Pattern\x20Detected','type':_0x292f76(0x288),'role':_0x292f76(0x1e2),'read':!![],'write':![]},'native':{}}),await _0x4ac18e['setObjectNotExistsAsync']('analysis.automation.description',{'type':'state','common':{'name':'Description','type':_0x292f76(0x141),'role':_0x292f76(0x26c),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x1fc),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x243),'type':_0x292f76(0x141),'role':'json','read':!![],'write':![]},'native':{}}),await _0x4ac18e['setObjectNotExistsAsync']('analysis.automation.targetId',{'type':_0x292f76(0x128),'common':{'name':'Target\x20ID','type':_0x292f76(0x141),'role':_0x292f76(0x26c),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x1c4),{'type':_0x292f76(0x128),'common':{'name':'Target\x20Value','type':_0x292f76(0x141),'role':_0x292f76(0x26c),'read':!![],'write':![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)](_0x292f76(0x2af),{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x1d0),'type':_0x292f76(0x288),'role':_0x292f76(0x194),'read':!![],'write':!![]},'native':{}}),await _0x4ac18e[_0x292f76(0x245)]('analysis.automation.triggerAction',{'type':_0x292f76(0x128),'common':{'name':_0x292f76(0x18f),'type':'boolean','role':_0x292f76(0x21a),'read':!![],'write':!![]},'native':{}});}async function loadSystemMode(_0x2a550b){const _0x3e8e90=a0_0xbfa10c;try{const _0x560fce=await _0x2a550b[_0x3e8e90(0x170)](SYSTEM_DP_MODE);_0x560fce&&_0x560fce[_0x3e8e90(0x25c)]&&Object['values'](SYSTEM_MODES)['includes'](_0x560fce[_0x3e8e90(0x25c)])?_0x2a550b['currentSystemMode']=_0x560fce['val']:(_0x2a550b[_0x3e8e90(0x15f)]=SYSTEM_MODES['NORMAL'],await _0x2a550b['setStateAsync'](SYSTEM_DP_MODE,{'val':SYSTEM_MODES['NORMAL'],'ack':!![]}));}catch(_0x15fa55){_0x2a550b[_0x3e8e90(0x15f)]=SYSTEM_MODES[_0x3e8e90(0x2a9)];}}async function loadRawEventLog(_0x5ec044){const _0x306e93=a0_0xbfa10c;try{const _0x1aad89=await _0x5ec044[_0x306e93(0x170)](LTM_DP_RAW_LOG);if(_0x1aad89&&_0x1aad89[_0x306e93(0x25c)])_0x5ec044[_0x306e93(0x278)]=JSON[_0x306e93(0x273)](_0x1aad89['val']);}catch(_0x50f7e0){_0x5ec044[_0x306e93(0x278)]=[];}}async function saveRawEventLog(_0x4176fc){const _0x2aedaf=a0_0xbfa10c;if(_0x4176fc[_0x2aedaf(0x278)][_0x2aedaf(0x20f)]>RAW_LOG_MAX_SIZE)_0x4176fc[_0x2aedaf(0x278)]['splice'](0x0,_0x4176fc[_0x2aedaf(0x278)][_0x2aedaf(0x20f)]-RAW_LOG_MAX_SIZE);await _0x4176fc[_0x2aedaf(0x266)](LTM_DP_RAW_LOG,{'val':JSON[_0x2aedaf(0x2a6)](_0x4176fc[_0x2aedaf(0x278)]),'ack':!![]});}async function loadDailyDigests(_0x1f8505){const _0x46fa41=a0_0xbfa10c;try{const _0x3029b5=await _0x1f8505['getStateAsync'](LTM_DP_DAILY_DIGESTS);if(_0x3029b5&&_0x3029b5[_0x46fa41(0x25c)])_0x1f8505[_0x46fa41(0x23c)]=JSON[_0x46fa41(0x273)](_0x3029b5[_0x46fa41(0x25c)]);}catch(_0x40d30a){_0x1f8505[_0x46fa41(0x23c)]=[];}await updateBaselineStatus(_0x1f8505);}async function saveDailyDigests(_0x25e9f8,_0x2f1e63=!![]){const _0x511eaf=a0_0xbfa10c,_0x129bc4=_0x25e9f8[_0x511eaf(0x213)][_0x511eaf(0x261)]||0x3c;_0x25e9f8['dailyDigests'][_0x511eaf(0x20f)]>_0x129bc4&&_0x25e9f8[_0x511eaf(0x23c)]['splice'](0x0,_0x25e9f8['dailyDigests']['length']-_0x129bc4);await _0x25e9f8['setStateAsync'](LTM_DP_DAILY_DIGESTS,{'val':JSON[_0x511eaf(0x2a6)](_0x25e9f8[_0x511eaf(0x23c)]),'ack':!![]});if(_0x2f1e63)await updateBaselineStatus(_0x25e9f8);}async function updateAnalysisHistory(_0x449dd0,_0x24d536){const _0x41f325=a0_0xbfa10c;_0x449dd0[_0x41f325(0x1c3)][_0x41f325(0x209)](_0x24d536);if(_0x449dd0[_0x41f325(0x1c3)]['length']>HISTORY_MAX_SIZE)_0x449dd0[_0x41f325(0x1c3)]['pop']();await _0x449dd0[_0x41f325(0x266)](_0x41f325(0x265),{'val':JSON[_0x41f325(0x2a6)](_0x449dd0['analysisHistory']),'ack':!![]});}async function updateBaselineStatus(_0x165f65){const _0x1ea30f=a0_0xbfa10c;if(!_0x165f65[_0x1ea30f(0x295)]){await _0x165f65[_0x1ea30f(0x266)](LTM_DP_BASELINE_STATUS,{'val':_0x1ea30f(0x28d),'ack':!![]});return;}const _0x54bf72=_0x165f65[_0x1ea30f(0x23c)]['length']>=(_0x165f65['config'][_0x1ea30f(0x17f)]||0x7)?_0x1ea30f(0x1b5)+_0x165f65[_0x1ea30f(0x23c)]['length']+_0x1ea30f(0x12d):_0x1ea30f(0x19e)+_0x165f65[_0x1ea30f(0x23c)][_0x1ea30f(0x20f)]+'/'+(_0x165f65[_0x1ea30f(0x213)][_0x1ea30f(0x17f)]||0x7)+')';await _0x165f65['setStateAsync'](LTM_DP_BASELINE_STATUS,{'val':_0x54bf72,'ack':!![]});}async function initSensorSubscriptions(_0x1dd6d3){const _0x2f42ea=a0_0xbfa10c,_0xe705b7=_0x1dd6d3['config'][_0x2f42ea(0x1b4)];if(_0xe705b7)for(const _0x1b1ca4 of _0xe705b7){await _0x1dd6d3[_0x2f42ea(0x119)](_0x1b1ca4['id']);}}async function initPresenceSubscriptions(_0x35bf8c){const _0x404f2c=a0_0xbfa10c,_0x112673=_0x35bf8c['config'][_0x404f2c(0x138)];if(_0x112673)for(const _0x47ea58 of _0x112673){await _0x35bf8c[_0x404f2c(0x119)](_0x47ea58);}}async function setupTelegramListener(_0x478df0){const _0x1418eb=a0_0xbfa10c,_0x2f42d8=_0x478df0[_0x1418eb(0x213)][_0x1418eb(0x22b)];if(_0x478df0[_0x1418eb(0x213)][_0x1418eb(0x2a7)]&&_0x2f42d8)await _0x478df0[_0x1418eb(0x119)](_0x2f42d8+_0x1418eb(0x173));}async function checkWifiPresence(_0x5e41b6){const _0x3f39e8=a0_0xbfa10c;try{const _0x580c59=_0x5e41b6[_0x3f39e8(0x213)][_0x3f39e8(0x138)]||[];let _0x463def=![];const _0x20ae75=[];for(const _0x163ac8 of _0x580c59){try{const _0x7e4f48=await _0x5e41b6[_0x3f39e8(0x25d)](_0x163ac8);_0x7e4f48&&(_0x7e4f48[_0x3f39e8(0x25c)]===!![]||_0x7e4f48[_0x3f39e8(0x25c)]==='online'||_0x7e4f48[_0x3f39e8(0x25c)]===0x1)&&(_0x463def=!![],_0x20ae75[_0x3f39e8(0x1c8)](_0x163ac8));}catch(_0x5a4dca){}}return await _0x5e41b6[_0x3f39e8(0x266)](_0x3f39e8(0x236),{'val':_0x20ae75[_0x3f39e8(0x171)](',\x20'),'ack':!![]}),_0x463def&&(_0x5e41b6[_0x3f39e8(0x206)]&&(_0x5e41b6[_0x3f39e8(0x12f)][_0x3f39e8(0x1cb)](_0x3f39e8(0x2ac)),abortExitTimer(_0x5e41b6)),!_0x5e41b6['isPresent']&&_0x5e41b6[_0x3f39e8(0x15f)]===SYSTEM_MODES[_0x3f39e8(0x2a9)]&&await setPresence(_0x5e41b6,!![])),_0x463def;}catch(_0x128b80){return![];}}function startExitTimer(_0x975945){const _0xb5b52f=a0_0xbfa10c;abortExitTimer(_0x975945),_0x975945[_0xb5b52f(0x177)]=!![],_0x975945[_0xb5b52f(0x1b6)]=setTimeout(()=>{const _0x23e056=_0xb5b52f;_0x975945[_0x23e056(0x177)]=![];},EXIT_GRACE_PERIOD_SECONDS*0x3e8),_0x975945[_0xb5b52f(0x206)]=setTimeout(()=>{setPresence(_0x975945,![]),_0x975945['exitTimer']=null;},EXIT_TIMER_MINUTES*0x3c*0x3e8);}function abortExitTimer(_0xc733da){const _0x1a7ccb=a0_0xbfa10c;if(_0xc733da[_0x1a7ccb(0x206)])clearTimeout(_0xc733da['exitTimer']);if(_0xc733da[_0x1a7ccb(0x1b6)])clearTimeout(_0xc733da[_0x1a7ccb(0x1b6)]);_0xc733da['exitTimer']=null,_0xc733da[_0x1a7ccb(0x1b6)]=null,_0xc733da[_0x1a7ccb(0x177)]=![];}async function setPresence(_0x46d489,_0x1a153c){const _0x308c27=a0_0xbfa10c;if(_0x46d489[_0x308c27(0x250)]===_0x1a153c)return;_0x46d489[_0x308c27(0x250)]=_0x1a153c,await _0x46d489['setStateAsync'](_0x308c27(0x1b0),{'val':_0x1a153c,'ack':!![]});}async function executeAutomationAction(_0x12d19f){const _0x54adc7=a0_0xbfa10c;try{const _0x5a78d5=await _0x12d19f[_0x54adc7(0x170)](_0x54adc7(0x241)),_0x4ecb45=await _0x12d19f['getStateAsync'](_0x54adc7(0x1c4));if(_0x5a78d5&&_0x5a78d5[_0x54adc7(0x25c)]&&_0x4ecb45){const _0x33d215=_0x5a78d5[_0x54adc7(0x25c)];let _0x1584a5=_0x4ecb45['val'];try{_0x1584a5=JSON[_0x54adc7(0x273)](_0x1584a5);}catch(_0x43f692){}_0x12d19f[_0x54adc7(0x12f)]['info'](_0x54adc7(0x2a5)+_0x33d215+'\x20=\x20'+_0x1584a5),await _0x12d19f[_0x54adc7(0x1d8)](_0x33d215,_0x1584a5);}else _0x12d19f[_0x54adc7(0x12f)][_0x54adc7(0x19a)]('ðŸ¤–\x20BUTLER:\x20No\x20valid\x20target\x20ID\x20or\x20value\x20stored\x20for\x20execution.');}catch(_0x29c13d){_0x12d19f[_0x54adc7(0x12f)][_0x54adc7(0x12b)](_0x54adc7(0x122)+_0x29c13d[_0x54adc7(0x159)]);}}async function processSensorEvent(_0xf47c24,_0x1e48db,_0x3cb19c,_0x9ad7e9){const _0x128e7a=a0_0xbfa10c;if(!_0x9ad7e9)return;const _0x512928=_0x3cb19c[_0x128e7a(0x25c)],_0x1e3933=Date['now'](),_0x45d0ef=_0xf47c24[_0x128e7a(0x143)][_0x1e48db];_0xf47c24[_0x128e7a(0x143)][_0x1e48db]=_0x512928;if(!_0x9ad7e9[_0x128e7a(0x24b)]&&_0x45d0ef!=undefined&&_0x45d0ef==_0x512928)return;const _0x44f237=(_0x9ad7e9['type']||'')[_0x128e7a(0x17c)](),_0x170dca=_0x44f237[_0x128e7a(0x1cc)]('temperature')||_0x44f237[_0x128e7a(0x1cc)](_0x128e7a(0x1eb))||_0x44f237[_0x128e7a(0x1cc)](_0x128e7a(0x1f4))||_0x44f237['includes'](_0x128e7a(0x131));_0xf47c24['isProVersion']&&_0x170dca&&recordThermodynamics(_0xf47c24,_0x1e48db,_0x512928,_0x9ad7e9[_0x128e7a(0x1dd)]);const _0x31831e={'timestamp':_0x1e3933,'id':_0x1e48db,'name':_0x9ad7e9[_0x128e7a(0x125)],'type':_0x9ad7e9['type'],'location':_0x9ad7e9[_0x128e7a(0x1dd)],'value':_0x512928};_0xf47c24['eventHistory'][_0x128e7a(0x209)](_0x31831e);if(_0xf47c24[_0x128e7a(0x20c)][_0x128e7a(0x20f)]>HISTORY_MAX_SIZE)_0xf47c24[_0x128e7a(0x20c)]['pop']();await _0xf47c24['setStateAsync'](_0x128e7a(0x154),{'val':JSON[_0x128e7a(0x2a6)](_0x31831e),'ack':!![]}),await _0xf47c24[_0x128e7a(0x266)]('events.history',{'val':JSON[_0x128e7a(0x2a6)](_0xf47c24['eventHistory']),'ack':!![]});_0xf47c24[_0x128e7a(0x295)]&&(_0xf47c24[_0x128e7a(0x278)][_0x128e7a(0x1c8)](_0x31831e),await saveRawEventLog(_0xf47c24),recordSequence(_0xf47c24,_0x31831e));if(_0x9ad7e9[_0x128e7a(0x255)]&&_0x512928===!![]){if(_0xf47c24[_0x128e7a(0x250)]&&!_0xf47c24[_0x128e7a(0x177)])startExitTimer(_0xf47c24);else{if(!_0xf47c24[_0x128e7a(0x250)])setPresence(_0xf47c24,!![]);}}else{if(_0x9ad7e9['type']===_0x128e7a(0x24a)&&_0x512928===!![]){if(_0xf47c24[_0x128e7a(0x206)])abortExitTimer(_0xf47c24);if(!_0xf47c24[_0x128e7a(0x250)]&&_0xf47c24[_0x128e7a(0x15f)]===SYSTEM_MODES[_0x128e7a(0x2a9)])setPresence(_0xf47c24,!![]);}}}async function recordThermodynamics(_0xfcc73c,_0x44ecd9,_0x16c695,_0x3cae7f){const _0x4359ae=a0_0xbfa10c,_0xe569c8=await getOutsideTemperatureNumeric(_0xfcc73c),_0x2b7e7e=await _0xfcc73c[_0x4359ae(0x170)](_0x4359ae(0x214));let _0x6d1e83=[];if(_0x2b7e7e&&_0x2b7e7e[_0x4359ae(0x25c)])try{_0x6d1e83=JSON[_0x4359ae(0x273)](_0x2b7e7e[_0x4359ae(0x25c)]);}catch(_0x1f5093){}_0x6d1e83[_0x4359ae(0x1c8)]({'ts':Date[_0x4359ae(0x27e)](),'room':_0x3cae7f||'Unknown','t_in':_0x16c695,'t_out':_0xe569c8});if(_0x6d1e83['length']>THERMO_LOG_SIZE)_0x6d1e83[_0x4359ae(0x29f)]();await _0xfcc73c[_0x4359ae(0x266)](_0x4359ae(0x214),{'val':JSON[_0x4359ae(0x2a6)](_0x6d1e83),'ack':!![]});}async function getOutsideTemperatureNumeric(_0x1931a3){const _0x409f02=a0_0xbfa10c;if(_0x1931a3['config'][_0x409f02(0x28e)])try{const _0x11f18d=await _0x1931a3[_0x409f02(0x25d)](_0x1931a3[_0x409f02(0x213)][_0x409f02(0x28e)]);if(_0x11f18d&&_0x11f18d[_0x409f02(0x25c)]!==undefined&&_0x11f18d['val']!==null)return parseFloat(_0x11f18d[_0x409f02(0x25c)]);}catch(_0x358bb3){}const _0x41bee2=_0x1931a3[_0x409f02(0x213)]['weatherInstance'];if(!_0x1931a3[_0x409f02(0x213)]['useWeather']||!_0x41bee2)return null;try{let _0x25aade='';if(_0x41bee2['includes']('accuweather'))_0x25aade=_0x41bee2+_0x409f02(0x27f);else{if(_0x41bee2[_0x409f02(0x1cc)](_0x409f02(0x13f)))_0x25aade=_0x41bee2+_0x409f02(0x127);else{if(_0x41bee2[_0x409f02(0x1cc)](_0x409f02(0x257)))_0x25aade=_0x41bee2+_0x409f02(0x13a);else{if(_0x41bee2[_0x409f02(0x1cc)](_0x409f02(0x17a)))_0x25aade=_0x41bee2+_0x409f02(0x1cf);}}}if(_0x25aade){const _0x18654e=await _0x1931a3[_0x409f02(0x25d)](_0x25aade);if(_0x18654e&&_0x18654e['val']!==undefined&&_0x18654e[_0x409f02(0x25c)]!==null)return parseFloat(_0x18654e[_0x409f02(0x25c)]);}}catch(_0x1a2c59){}return null;}async function recordSequence(_0x5d280e,_0x551137){const _0x136b33=a0_0xbfa10c,_0x318dd7=(_0x551137[_0x136b33(0x16e)]||'')[_0x136b33(0x17c)](),_0x4f4b91=[_0x136b33(0x24a),_0x136b33(0x166),'prÃ¤senz','presence',_0x136b33(0x139),_0x136b33(0x199),_0x136b33(0x204),_0x136b33(0x162),_0x136b33(0x1fd),'contact',_0x136b33(0x231),_0x136b33(0x140),_0x136b33(0x16a),_0x136b33(0x194),_0x136b33(0x2ae),_0x136b33(0x234),_0x136b33(0x17d)];if(!_0x4f4b91[_0x136b33(0x1a6)](_0x311ce6=>_0x318dd7[_0x136b33(0x1cc)](_0x311ce6)))return;if(!_0x551137[_0x136b33(0x26f)])return;if(sequenceTimer)clearTimeout(sequenceTimer);activeSequence[_0x136b33(0x1c8)]({'loc':_0x551137[_0x136b33(0x1dd)]||_0x136b33(0x1b2),'id':_0x551137['id'],'ts':Date[_0x136b33(0x27e)]()}),sequenceTimer=setTimeout(async()=>{const _0xa53fe4=_0x136b33;if(activeSequence[_0xa53fe4(0x20f)]>0x1)await saveCompletedSequence(_0x5d280e);activeSequence=[];},SEQUENCE_TIMEOUT_MS);}async function saveCompletedSequence(_0x1ebbcf){const _0xe5e055=a0_0xbfa10c;try{const _0x3223bd=await _0x1ebbcf[_0xe5e055(0x170)](_0xe5e055(0x256));let _0x2b8ea7=[];if(_0x3223bd&&_0x3223bd[_0xe5e055(0x25c)])try{_0x2b8ea7=JSON[_0xe5e055(0x273)](_0x3223bd[_0xe5e055(0x25c)]);}catch(_0x30bbd9){}const _0x234561=activeSequence[0x0]['ts'],_0x395073=activeSequence['map'](_0x57ec3f=>({'loc':_0x57ec3f[_0xe5e055(0x124)],'t_delta':Math[_0xe5e055(0x155)]((_0x57ec3f['ts']-_0x234561)/0x3e8)})),_0x5d9877={'timestamp':new Date(_0x234561)['toISOString'](),'steps':_0x395073,'duration':Math[_0xe5e055(0x155)]((activeSequence[activeSequence[_0xe5e055(0x20f)]-0x1]['ts']-_0x234561)/0x3e8),'daytime':new Date(_0x234561)[_0xe5e055(0x2a0)]()};_0x2b8ea7['push'](_0x5d9877);if(_0x2b8ea7['length']>MAX_TRAINING_SET_SIZE)_0x2b8ea7[_0xe5e055(0x29f)]();await _0x1ebbcf[_0xe5e055(0x266)](_0xe5e055(0x256),{'val':JSON['stringify'](_0x2b8ea7),'ack':!![]}),runSecurityCheck(_0x1ebbcf,_0x5d9877);}catch(_0x3855b4){_0x1ebbcf[_0xe5e055(0x12f)]['error'](_0xe5e055(0x215)+_0x3855b4[_0xe5e055(0x159)]);}}function runSecurityCheck(_0x4e0b6f,_0x20835f){const _0x3069d5=a0_0xbfa10c;if(!_0x4e0b6f['isProVersion'])return;sendToPython(_0x4e0b6f,_0x3069d5(0x187),{'sequence':_0x20835f});}async function createDailyDigest(_0x2d8eb2){const _0x362481=a0_0xbfa10c;if(!_0x2d8eb2[_0x362481(0x295)])return;await _0x2d8eb2[_0x362481(0x266)](LTM_DP_STATUS,{'val':_0x362481(0x15c),'ack':!![]});if(!_0x2d8eb2[_0x362481(0x218)]||_0x2d8eb2['rawEventLog']['length']<LTM_MIN_EVENTS_FOR_COMPRESSION){await _0x2d8eb2['setStateAsync'](LTM_DP_STATUS,{'val':_0x362481(0x219),'ack':!![]});return;}const _0x7a25bb=JSON[_0x362481(0x273)](JSON[_0x362481(0x2a6)](_0x2d8eb2['rawEventLog'])),_0x13c3cd=_0x7a25bb[_0x362481(0x20f)],_0x3455fa=_0x362481(0x291)+JSON[_0x362481(0x2a6)](_0x7a25bb);try{const _0x442262=await _0x2d8eb2[_0x362481(0x218)][_0x362481(0x189)](_0x3455fa),_0x5839c8=JSON[_0x362481(0x273)](_0x442262[_0x362481(0x275)][_0x362481(0x26c)]()[_0x362481(0x16d)](/```json|```/g,'')[_0x362481(0x203)]()),_0x1baf64={'timestamp':new Date()[_0x362481(0x279)](),'eventCount':_0x13c3cd,'summary':_0x5839c8[_0x362481(0x29e)]||_0x362481(0x21b),'activityLevel':_0x5839c8['activityLevel']||'normal','systemMode':_0x2d8eb2[_0x362481(0x15f)]};_0x2d8eb2[_0x362481(0x23c)][_0x362481(0x1c8)](_0x1baf64),await saveDailyDigests(_0x2d8eb2),_0x2d8eb2[_0x362481(0x278)]=[],await saveRawEventLog(_0x2d8eb2),await _0x2d8eb2[_0x362481(0x266)](LTM_DP_STATUS,{'val':_0x362481(0x252),'ack':!![]});if(_0x2d8eb2['isProVersion'])sendToPython(_0x2d8eb2,_0x362481(0x20e),{'digest':_0x1baf64});}catch(_0x20e5b6){_0x2d8eb2[_0x362481(0x12f)]['error'](_0x20e5b6['message']);}}function a0_0x1b83(){const _0x5ae8e1=['child_process','analysis.training.triggerHealth','LTM.driftAnalysis.baselineDrift','isAlert','description','Trigger\x20Action','cancel','823689QanZEW','@google/generative-ai','setupModeResetScheduler','switch','Today\x20Vector\x20(15m)','application/json','automationProposal','.\x20ANWESEND:\x20','door','warn','geminiApiKey','[LOG]','PRIORITÃ„T:\x20Sicherheit.','Lernphase\x20(','Fokus\x20auf\x20Komfort.','Build\x20Topology','.\x20AUFGABE:\x201.\x20Gesundheit?\x202.\x20Komfort?\x20FORMAT\x20(JSON):\x20{\x20\x22isAlert\x22:\x20boolean,\x20\x22alertReason\x22:\x20\x22string\x22,\x20\x22isEmergency\x22:\x20boolean,\x20\x22summary\x22:\x20\x22string\x22,\x20\x22automationProposal\x22:\x20{\x20\x22detected\x22:\x20boolean,\x20\x22description\x22:\x20\x22string\x22,\x20\x22targetId\x22:\x20\x22string\x22,\x20\x22targetValue\x22:\x20\x22any\x22\x20}\x20}','licenseKey','livingContext','./lib/installer','PRIORITÃ„T:\x20Gesundheit/AAL.','some','bind','Wetterdaten\x20deaktiviert.','command','.forecast.current.state','./lib/scanner','1039508qQopbX','Train\x20Health','SIMULATION:\x20Test-Vorschlag\x20fÃ¼r\x20','debug','system.isPresent','simulateButler','Unknown','triggerBriefing','devices','Aktiv\x20(','exitGraceTimer','latitude','ENERGY_TRAIN_RESULT','existsSync','.Current.WeatherText','heating','âš ï¸\x20ALARM:\x20','floor','indicator.alarm','analysis.health.lastCheck','TRAINING_COMPLETE','Last\x20Check','LTM.driftAnalysis.driftDetails','analysisHistory','analysis.automation.targetValue','substring','weatherInstance','HEALTH_TRAIN_RESULT','push','analysis.training.triggerTopology','Analysiere\x20ausgewogen.','info','includes','pop','Training\x20Error:\x20','.forecast.current.temp','Auto\x20Apply','targetValue','sendTo','1699788gIPtnx','ANALYZE_TREND','insulation','getFullYear','timestamp','setForeignStateAsync','Training\x20Status','Trend','Failed:\x20','success','location','N/A\x20(Learning)','TRAIN_ENERGY','service.py','System','indicator','Err:\x20','filter','ðŸ\x20Python\x20Pong','3338811mzkDkY','Trend\x20Value','analysis.security.topologyMatrix','submitFeedback','LTM.driftAnalysis.lastCheck','temperatur','common','N/A','dismissAutomation','COMFORT_RESULT','Â°C,\x20','rule','find','text.alarm','klima','namespace','analysisTimer','Current\x20Threshold','analysis.activitySummary','Thermodynamics','Topology\x20Error:\x20','analysis.training.triggerComfort','analysis.automation.detectedPatterns','fenster','generic','analysisInterval','getGenerativeModel','toFixed','Heating\x20Score','trim','tÃ¼r','genAI','exitTimer','writable','targetId','unshift','\x20new\x20patterns.','ðŸŒ…\x20Morning\x20Briefing:\x0a','eventHistory','Sec-Training\x20started...','ANALYZE_HEALTH','length','Raw\x20Log','automation.triggerAction','map','config','LTM.trainingData.thermodynamics','[RECORDER]\x20Error:\x20','4551648HoNfXC','subscribeStates','geminiModel','Skipped\x20(No\x20AI\x20or\x20Data)','button','Digest','enum','driftAnalysisTimer','getForeignObjectAsync','LTM.rawEventLog','Health\x20Analysis','LTM','scanDevices','city','GUEST','status','main','aiPersona','Unbekannt','No\x20instance','ðŸ›‹ï¸\x20Triggering\x20Comfort\x20Analysis\x20(Pattern\x20Mining)...','notifyTelegramInstance','cogni-living','driftDetails','toLocaleTimeString','Who\x20is\x20present?','ack','kontakt','Last\x20raw\x20event','ANOMALY','dimmer','threshold','system.presenceWho','TRAIN_HEALTH','ðŸ•¸ï¸\x20Topology\x20Map\x20updated.','PONG','detected','onUnload','dailyDigests','Train\x20Security','date','confidence','analysis.health.isAnomaly','analysis.automation.targetId','analysis.triggerBriefing','Detected\x20Patterns','.\x20SYSTEM_MODE:\x20','setObjectNotExistsAsync','Sequences','ðŸ›¡ï¸\x20SECURITY\x20CHECK:\x20Score\x20','longitude','unknown','motion','logDuplicates','TOPOLOGY_RESULT','search','analysis.training.status','analysis.security.lastScore','isPresent','rating','Success','Trigger\x20Briefing','10neuoLw','isExit','LTM.trainingData.sequences','openweathermap','enum.rooms.*','Gemini\x20AI\x20initialized.','analysis.health.trendDiagnosis','\x0aSTB:\x20','val','getForeignStateAsync','Kein\x20API\x20Key!','analysis.energy.heatingScore','pythonProcess','ltmLtbWindowDays','\x0aGrund:\x20','Event\x20History','split','analysis.analysisHistory','setStateAsync','(((.+)+)+)+$','scanForDevices','alertReason','analysis.training.triggerEnergy','Missing\x20data','text','reason','setupLtmScheduler','value','Kein\x20API\x20Key.','events.history','OK:\x20','parse','callback','response','startsWith','PYTHON_EXE','rawEventLog','toISOString','Anomaly\x20Detected','onReady','slice','âš ï¸\x20SECURITY\x20ALARM:\x20','now','.Current.Temperature','setupDriftAnalysisScheduler','analysis.health.todayVector','Activity\x20Summary','ENERGY_PREDICT_RESULT','instance','modeResetJob','ðŸ›‹ï¸\x20BUTLER:\x20Found\x20','analysis.training','boolean','analysis.security.lastCheck','ðŸ•¸ï¸\x20Building\x20Topology\x20Matrix...','getForeignObjectsAsync','from','Deaktiviert\x20(Pro-Feature)','outdoorSensorId','LTM.dailyDigests','analysis.security.currentThreshold','ROLLE:\x20Data\x20Compression\x20Agent.\x20SPRACHE:\x20DE.\x20FORMAT:\x20JSON.\x20ANWEISUNG:\x20Fasse\x20Sensor-Events\x20zusammen.\x20SCHEMA:\x20{\x20\x22summary\x22:\x20\x22string\x22,\x20\x22activityLevel\x22:\x20\x22string\x22\x20}\x20\x0a\x0aEVENTS:\x0a','change_percent',')\x20-\x20SAFE\x20BOOT','getCalendarNames','isProVersion','Gemini\x20Init\x20Error:\x20','analysis.alertReason','forEach','onMessage','Regel\x20erkannt:\x20','python_service','ROLLE:\x20Data\x20Scientist.\x20ZIEL:\x20Drift\x20erkennen.\x20SCHEMA:\x20{\x20\x22baselineDrift\x22:\x20\x22none|slight|significant|critical\x22,\x20\x22driftDetails\x22:\x20\x22string\x22\x20}\x0a\x0aLTB:\x20','8181292zLNRSu','summary','shift','getHours','testApiKey','./lib/scheduler','dependencyInstallInProgress','ANALYZE_GAIT','ðŸ¤–\x20BUTLER:\x20Executing\x20Action\x20->\x20','stringify','notifyTelegramEnabled','details','NORMAL','useCalendar','analysis.energy.insulationScore','WiFi\x20Presence\x20detected.','Alert\x20Reason','schalter','analysis.automation.autoApply','briefingJob','subscribeForeignStatesAsync','Keine\x20Termine.','party','write','Train\x20Comfort','number','PARTY','Fokus\x20auf\x20Familienroutinen.','TREND_RESULT','BUTLER\x20Execution\x20Error:\x20','inactivityThresholdHours','loc','name','Temperature\x20Forecast','.NextHours.Location_1.Day_1.current.temp_value','state','isEmergency','guest','error','stdin','\x20Tage)','communicate.request','log','Alert\x20Status','heizung','activityLevel','Gemini\x20Error:\x20','Insulation\x20Score','stdout','Restoring\x20sensor\x20cache...','Anomaly\x20Score','presenceDevices','occupancy','.forecast.current.temperature','analysis.health.trendValue','keys','setHours','analysis.automation.description','daswetter','light','string','object','sensorLastValues','getOverviewData','TRAIN_SECURITY','analysis.history_debug_00','extendObjectAsync','Kalender\x20deaktiviert.','calendarInstance','HEALTH_RESULT','systemUUID','User\x20dismissed\x20automation\x20proposal.','Security\x20Monitor','Trigger\x20Analysis','getTime','path','analysis.isAlert','64PoKRUa','analysis.trigger','events.lastEvent','round','toString','values','analysis.energy.forecast','message','apply','analysis.automation.patternDetected','Started...','Adapter','GAIT_RESULT','currentSystemMode','payload','VACATION','window','json','SECURITY_RESULT','Train\x20Energy','bewegung','getDate','ltmStbWindowDays','setState','licht','ltmJob','Erstelle\x20ein\x20kurzes\x20\x27Guten\x20Morgen\x27\x20Briefing\x20basierend\x20auf\x20den\x20Events\x20der\x20letzten\x20Nacht.','replace','type','onStateChange','getStateAsync','join','Gait\x20Speed\x20Trend','.communicate.request','.\x20EVENTS:\x20','getObjectAsync','fill','isGracePeriodActive','getEnums','352881utJRJW','weatherunderground','temperature','toLowerCase','lampe','exports','minDaysForBaseline','AI\x20Training','delObjectAsync','enum.functions.*','analysis.training.triggerSecurity','systemConfig','autoApply','channel','ANALYZE_SEQUENCE','LTM.processingStatus','generateContent'];a0_0x1b83=function(){return _0x5ae8e1;};return a0_0x1b83();}async function runBaselineDriftAnalysis(_0x1a692d){const _0x1e3988=a0_0xbfa10c;if(!_0x1a692d[_0x1e3988(0x295)]||!_0x1a692d[_0x1e3988(0x218)])return;const _0x563b9a=_0x1a692d[_0x1e3988(0x213)][_0x1e3988(0x168)]||0xe;if(_0x1a692d[_0x1e3988(0x23c)][_0x1e3988(0x20f)]<_0x563b9a+0x7){await _0x1a692d[_0x1e3988(0x266)](LTM_DP_DRIFT_STATUS,{'val':_0x1e3988(0x1de),'ack':!![]});return;}const _0x170891=_0x1a692d[_0x1e3988(0x23c)]['slice'](-_0x563b9a),_0x2c1101=_0x1a692d[_0x1e3988(0x23c)][_0x1e3988(0x27c)](0x0,_0x1a692d[_0x1e3988(0x23c)]['length']-_0x563b9a),_0x4f1c9d=_0x1e3988(0x29c)+JSON['stringify'](_0x2c1101)+_0x1e3988(0x25b)+JSON[_0x1e3988(0x2a6)](_0x170891);try{const _0x37afba=await _0x1a692d[_0x1e3988(0x218)][_0x1e3988(0x189)](_0x4f1c9d),_0x15910c=JSON[_0x1e3988(0x273)](_0x37afba[_0x1e3988(0x275)]['text']()[_0x1e3988(0x16d)](/```json|```/g,'')[_0x1e3988(0x203)]());_0x15910c['baselineDrift']&&(await _0x1a692d[_0x1e3988(0x266)](LTM_DP_DRIFT_STATUS,{'val':_0x15910c['baselineDrift'],'ack':!![]}),await _0x1a692d[_0x1e3988(0x266)](LTM_DP_DRIFT_DETAILS,{'val':_0x15910c[_0x1e3988(0x22d)],'ack':!![]}),await _0x1a692d[_0x1e3988(0x266)](LTM_DP_DRIFT_LAST_CHECK,{'val':Date[_0x1e3988(0x27e)](),'ack':!![]}));}catch(_0x51a332){}}async function sendMorningBriefing(_0x230261){const _0x54cd9b=a0_0xbfa10c;if(!_0x230261[_0x54cd9b(0x218)])return;try{const _0x39b75e=_0x54cd9b(0x16c),_0x2b0209=await _0x230261[_0x54cd9b(0x218)][_0x54cd9b(0x189)](_0x39b75e),_0x8683b2=_0x2b0209[_0x54cd9b(0x275)]['text']();sendNotification(_0x230261,_0x54cd9b(0x20b)+_0x8683b2);}catch(_0x5013d3){_0x230261[_0x54cd9b(0x12f)][_0x54cd9b(0x12b)]('Briefing\x20Error:\x20'+_0x5013d3['message']);}}function stopPythonService(_0xc1d9a6){const _0x39809d=a0_0xbfa10c;if(_0xc1d9a6['pythonProcess']){try{_0xc1d9a6[_0x39809d(0x260)]['kill']();}catch(_0x11f57b){}_0xc1d9a6['pythonProcess']=null;}}function sendToPython(_0x455111,_0xbd35d0,_0x38d50c={}){const _0x19c03a=a0_0xbfa10c;if(!_0x455111['pythonProcess']||!_0x455111['pythonProcess'][_0x19c03a(0x12c)][_0x19c03a(0x207)])return;const _0x35e68a=JSON[_0x19c03a(0x2a6)]({'command':_0xbd35d0,..._0x38d50c});try{_0x455111[_0x19c03a(0x260)][_0x19c03a(0x12c)][_0x19c03a(0x11c)](_0x35e68a+'\x0a');}catch(_0x596b50){}}function runPythonHealthCheck(_0x24d839){const _0x516c10=a0_0xbfa10c;if(!_0x24d839['dailyDigests']||_0x24d839['dailyDigests'][_0x516c10(0x20f)]<0x2)return;const _0x11be58=_0x24d839[_0x516c10(0x23c)][_0x516c10(0x212)](_0x17a74f=>{const _0x35c8d0=_0x516c10,_0x6825f2=(_0x17a74f[_0x35c8d0(0x132)]||'')[_0x35c8d0(0x17c)]();return ACTIVITY_LEVEL_MAP[_0x6825f2]||0x32;});sendToPython(_0x24d839,_0x516c10(0x1d4),{'values':_0x11be58,'tag':'Activity-Level'});}function handlePythonResult(_0x22baee,_0x1d424e){const _0x3a3290=a0_0xbfa10c;if(_0x1d424e[_0x3a3290(0x16e)]===_0x3a3290(0x239))_0x22baee[_0x3a3290(0x12f)][_0x3a3290(0x1af)](_0x3a3290(0x1e5));else{if(_0x1d424e['type']===_0x3a3290(0x164)){const {anomaly_score:_0x325882,is_anomaly:_0x38d3b9,threshold:_0x9a10a5,explanation:_0xfc74dd}=_0x1d424e['payload'];_0x22baee['log']['info'](_0x3a3290(0x247)+_0x325882[_0x3a3290(0x201)](0x5)+'\x20->\x20'+(_0x38d3b9?_0x3a3290(0x233):'OK')),_0x22baee[_0x3a3290(0x266)](_0x3a3290(0x24f),{'val':_0x325882,'ack':!![]}),_0x22baee['setStateAsync']('analysis.security.lastCheck',{'val':new Date()[_0x3a3290(0x279)](),'ack':!![]});if(_0x9a10a5)_0x22baee[_0x3a3290(0x266)](_0x3a3290(0x290),{'val':_0x9a10a5,'ack':!![]});if(_0x38d3b9){let _0x40e98b='UngewÃ¶hnliches\x20Bewegungsmuster!\x20(Score:\x20'+_0x325882[_0x3a3290(0x201)](0x4)+')';if(_0xfc74dd&&_0xfc74dd!=='Unknown')_0x40e98b+=_0x3a3290(0x262)+_0xfc74dd;_0x22baee[_0x3a3290(0x266)](_0x3a3290(0x151),{'val':!![],'ack':!![]}),_0x22baee[_0x3a3290(0x266)]('analysis.alertReason',{'val':_0x40e98b,'ack':!![]}),sendNotification(_0x22baee,_0x3a3290(0x27d)+_0x40e98b,![],!![]);}}else{if(_0x1d424e[_0x3a3290(0x16e)]===_0x3a3290(0x1c0)){const _0x94f3a0=_0x1d424e['payload'][_0x3a3290(0x2a8)]||'',_0x1092cf=_0x1d424e['payload'][_0x3a3290(0x235)],_0xa6a3af=_0x1d424e[_0x3a3290(0x160)][_0x3a3290(0x1dc)]?'Success:\x20'+new Date()[_0x3a3290(0x22e)]()+'\x20('+_0x94f3a0+')':_0x3a3290(0x1db)+_0x1d424e[_0x3a3290(0x160)][_0x3a3290(0x26d)];_0x22baee[_0x3a3290(0x266)]('analysis.training.status',{'val':_0xa6a3af,'ack':!![]});if(_0x1d424e['payload'][_0x3a3290(0x1dc)]&&_0x1092cf)_0x22baee['setStateAsync']('analysis.security.currentThreshold',{'val':_0x1092cf,'ack':!![]});}else{if(_0x1d424e[_0x3a3290(0x16e)]===_0x3a3290(0x1ef)){const {patterns:_0x283801}=_0x1d424e[_0x3a3290(0x160)];if(_0x283801&&_0x283801[_0x3a3290(0x20f)]>0x0){_0x22baee[_0x3a3290(0x12f)][_0x3a3290(0x1cb)](_0x3a3290(0x286)+_0x283801[_0x3a3290(0x20f)]+_0x3a3290(0x20a)),_0x22baee[_0x3a3290(0x266)](_0x3a3290(0x1fc),{'val':JSON[_0x3a3290(0x2a6)](_0x283801),'ack':!![]});const _0x306081=_0x283801[0x0],_0x85f398=_0x3a3290(0x29a)+_0x306081[_0x3a3290(0x1f1)]+'\x20('+(_0x306081[_0x3a3290(0x23f)]*0x64)[_0x3a3290(0x201)](0x0)+'%)';_0x22baee[_0x3a3290(0x266)](_0x3a3290(0x15b),{'val':!![],'ack':!![]}),_0x22baee[_0x3a3290(0x266)](_0x3a3290(0x13e),{'val':_0x85f398,'ack':!![]});}else _0x22baee[_0x3a3290(0x12f)][_0x3a3290(0x1cb)]('ðŸ›‹ï¸\x20BUTLER:\x20Keine\x20neuen\x20Muster\x20gefunden.'),_0x22baee[_0x3a3290(0x266)](_0x3a3290(0x15b),{'val':![],'ack':!![]}),_0x22baee[_0x3a3290(0x266)](_0x3a3290(0x1fc),{'val':'[]','ack':!![]});}else{if(_0x1d424e['type']===_0x3a3290(0x1b8)){if(_0x1d424e[_0x3a3290(0x160)][_0x3a3290(0x1dc)])try{const _0x32382a=JSON['parse'](_0x1d424e['payload'][_0x3a3290(0x2a8)]);if(_0x32382a['insulation'])_0x22baee['setStateAsync'](_0x3a3290(0x2ab),{'val':JSON['stringify'](_0x32382a[_0x3a3290(0x1d5)]),'ack':!![]});if(_0x32382a[_0x3a3290(0x1bb)])_0x22baee[_0x3a3290(0x266)](_0x3a3290(0x25f),{'val':JSON['stringify'](_0x32382a[_0x3a3290(0x1bb)]),'ack':!![]});}catch(_0x428158){}}else{if(_0x1d424e[_0x3a3290(0x16e)]===_0x3a3290(0x1c7)){if(_0x1d424e[_0x3a3290(0x160)]['success'])_0x22baee[_0x3a3290(0x12f)]['info']('âœ…\x20HEALTH\x20TRAINED.');}else{if(_0x1d424e[_0x3a3290(0x16e)]===_0x3a3290(0x14a))_0x22baee['setStateAsync'](_0x3a3290(0x1bf),{'val':new Date()['toISOString'](),'ack':!![]}),_0x22baee[_0x3a3290(0x266)](_0x3a3290(0x240),{'val':_0x1d424e['payload']['is_anomaly'],'ack':!![]});else{if(_0x1d424e['type']===_0x3a3290(0x121))_0x22baee[_0x3a3290(0x266)](_0x3a3290(0x25a),{'val':_0x1d424e[_0x3a3290(0x160)]['diagnosis'],'ack':!![]}),_0x22baee[_0x3a3290(0x266)](_0x3a3290(0x13b),{'val':_0x1d424e['payload'][_0x3a3290(0x292)],'ack':!![]});else{if(_0x1d424e[_0x3a3290(0x16e)]===_0x3a3290(0x15e)){const {speed_trend:_0xba81c5}=_0x1d424e[_0x3a3290(0x160)];if(_0xba81c5!==undefined)_0x22baee[_0x3a3290(0x266)]('analysis.health.gaitSpeed',{'val':_0xba81c5,'ack':!![]});}else{if(_0x1d424e[_0x3a3290(0x16e)]===_0x3a3290(0x283)){const {forecast:_0x354597}=_0x1d424e[_0x3a3290(0x160)];if(_0x354597)_0x22baee['setStateAsync'](_0x3a3290(0x158),{'val':JSON[_0x3a3290(0x2a6)](_0x354597),'ack':!![]});}else{if(_0x1d424e[_0x3a3290(0x16e)]===_0x3a3290(0x24c)){const {data:_0x5e87ad}=_0x1d424e[_0x3a3290(0x160)];_0x5e87ad&&(_0x22baee[_0x3a3290(0x12f)][_0x3a3290(0x1cb)](_0x3a3290(0x238)),_0x22baee[_0x3a3290(0x266)](_0x3a3290(0x1e8),{'val':JSON[_0x3a3290(0x2a6)](_0x5e87ad),'ack':!![]}));}}}}}}}}}}}}function a0_0x7d33(_0xa0be96,_0xa092d3){const _0x4e305e=a0_0x1b83();return a0_0x7d33=function(_0x179a68,_0x4e2c2e){_0x179a68=_0x179a68-0x119;let _0x1b83ad=_0x4e305e[_0x179a68];return _0x1b83ad;},a0_0x7d33(_0xa0be96,_0xa092d3);}function startPythonService(_0xe1e7e4){const _0x576160=a0_0xbfa10c;let _0x4c2193='python3';if(fs[_0x576160(0x1b9)](installer[_0x576160(0x277)]))_0x4c2193=installer[_0x576160(0x277)];try{const _0x32c14a=path[_0x576160(0x171)](__dirname,_0x576160(0x29b),_0x576160(0x1e0));_0xe1e7e4[_0x576160(0x260)]=spawn(_0x4c2193,[_0x32c14a]),_0xe1e7e4['pythonProcess'][_0x576160(0x135)]['on']('data',_0x41fa83=>{const _0x31eaaa=_0x576160,_0x22923e=_0x41fa83[_0x31eaaa(0x156)]()[_0x31eaaa(0x264)]('\x0a');_0x22923e[_0x31eaaa(0x298)](_0x10d3b7=>{const _0x41ffc3=_0x31eaaa,_0x54de67=_0x10d3b7[_0x41ffc3(0x203)]();if(!_0x54de67)return;if(_0x54de67[_0x41ffc3(0x276)](_0x41ffc3(0x19c)))_0xe1e7e4['log'][_0x41ffc3(0x1af)]('[PYTHON]\x20'+_0x54de67[_0x41ffc3(0x1c5)](0x5)[_0x41ffc3(0x203)]());else{if(_0x54de67['startsWith']('[RESULT]'))try{const _0x2637ef=JSON['parse'](_0x54de67[_0x41ffc3(0x1c5)](0x8)[_0x41ffc3(0x203)]());handlePythonResult(_0xe1e7e4,_0x2637ef);}catch(_0x53d3a5){}}});}),_0xe1e7e4[_0x576160(0x260)]['on']('close',_0x1c6f4b=>{const _0x445038=_0x576160;_0xe1e7e4[_0x445038(0x260)]=null;});}catch(_0x32a4f1){_0xe1e7e4[_0x576160(0x12f)][_0x576160(0x12b)]('Error\x20launching\x20Python:\x20'+_0x32a4f1['message']);}}async function runAutopilot(_0x45c606){const _0x12449b=a0_0xbfa10c;_0x45c606[_0x12449b(0x12f)][_0x12449b(0x1af)]('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await runGeminiAnalysis(_0x45c606),updateHealthVector(_0x45c606),triggerGaitAnalysis(_0x45c606),triggerEnergyPrediction(_0x45c606);}async function triggerGaitAnalysis(_0x287666){const _0x5a5130=a0_0xbfa10c;if(!_0x287666['isProVersion'])return;try{const _0x1d3cb5=await _0x287666['getStateAsync']('LTM.trainingData.sequences');_0x1d3cb5&&_0x1d3cb5[_0x5a5130(0x25c)]&&sendToPython(_0x287666,_0x5a5130(0x2a4),{'sequences':JSON[_0x5a5130(0x273)](_0x1d3cb5[_0x5a5130(0x25c)])});}catch(_0x475473){}}async function triggerEnergyPrediction(_0x34c0d2){const _0x206d5c=a0_0xbfa10c;if(!_0x34c0d2[_0x206d5c(0x295)])return;try{const _0x1b73e1=await getOutsideTemperatureNumeric(_0x34c0d2);if(_0x1b73e1===null)return;const _0x1b7dab={},_0x3d68cc=_0x34c0d2[_0x206d5c(0x213)]['devices']||[];for(const _0x245738 of _0x3d68cc){if(_0x245738[_0x206d5c(0x16e)]===_0x206d5c(0x17b)&&_0x245738[_0x206d5c(0x1dd)]){const _0x2664bc=_0x34c0d2[_0x206d5c(0x143)][_0x245738['id']];if(_0x2664bc!==undefined)_0x1b7dab[_0x245738[_0x206d5c(0x1dd)]]=_0x2664bc;}}Object[_0x206d5c(0x13c)](_0x1b7dab)[_0x206d5c(0x20f)]>0x0&&sendToPython(_0x34c0d2,'PREDICT_ENERGY',{'current_temps':_0x1b7dab,'t_out':_0x1b73e1});}catch(_0x1572b7){}}function updateHealthVector(_0x5673a4){const _0xcf020f=a0_0xbfa10c;if(!_0x5673a4[_0xcf020f(0x278)]||_0x5673a4['rawEventLog'][_0xcf020f(0x20f)]===0x0)return;const _0x2c0440=new Array(0x60)['fill'](0x0),_0x18d82b=new Date()[_0xcf020f(0x13d)](0x0,0x0,0x0,0x0);_0x5673a4[_0xcf020f(0x278)][_0xcf020f(0x298)](_0x2b5252=>{const _0x4cb590=_0xcf020f,_0xf18a91=new Date(_0x2b5252[_0x4cb590(0x1d7)]);if(_0xf18a91[_0x4cb590(0x14f)]()>=_0x18d82b){const _0x1c9671=_0xf18a91[_0x4cb590(0x2a0)](),_0x107feb=_0xf18a91['getMinutes'](),_0x38d7f4=_0x1c9671*0x4+Math[_0x4cb590(0x1bd)](_0x107feb/0xf);if(_0x38d7f4>=0x0&&_0x38d7f4<0x60)_0x2c0440[_0x38d7f4]++;}}),_0x5673a4[_0xcf020f(0x266)](_0xcf020f(0x281),{'val':JSON[_0xcf020f(0x2a6)](_0x2c0440),'ack':!![]});}async function getWeatherContext(_0x4ba934){const _0xa0da37=a0_0xbfa10c;if(!_0x4ba934[_0xa0da37(0x213)]['useWeather']||!_0x4ba934[_0xa0da37(0x213)][_0xa0da37(0x1c6)])return _0xa0da37(0x1a8);try{const _0x538e16=_0x4ba934['config'][_0xa0da37(0x1c6)];let _0x2563da=await _0x4ba934['getForeignStateAsync'](_0x538e16+_0xa0da37(0x27f));if(!_0x2563da)_0x2563da=await _0x4ba934[_0xa0da37(0x25d)](_0x538e16+'.forecast.current.temperature');let _0x1bf9a6=await _0x4ba934['getForeignStateAsync'](_0x538e16+_0xa0da37(0x1ba));if(!_0x1bf9a6)_0x1bf9a6=await _0x4ba934[_0xa0da37(0x25d)](_0x538e16+_0xa0da37(0x1aa));if(_0x2563da&&_0x1bf9a6)return _0x2563da[_0xa0da37(0x25c)]+_0xa0da37(0x1f0)+_0x1bf9a6[_0xa0da37(0x25c)];}catch(_0xaf7635){}return'Keine\x20Wetterdaten\x20verfÃ¼gbar.';}async function getCalendarContext(_0x23d8b3){const _0x141df9=a0_0xbfa10c;if(!_0x23d8b3[_0x141df9(0x213)][_0x141df9(0x2aa)]||!_0x23d8b3[_0x141df9(0x213)][_0x141df9(0x149)])return _0x141df9(0x148);return _0x141df9(0x11a);}async function getCalendarNames(_0xec058b,_0x519e5c){return[];}async function saveFeedback(_0x4ef91a,_0x2c638d){const _0x4a801b=a0_0xbfa10c;_0x4ef91a[_0x4a801b(0x12f)][_0x4a801b(0x1cb)]('ðŸ“\x20Feedback\x20received:\x20'+_0x2c638d[_0x4a801b(0x251)]);}async function runGeminiAnalysis(_0x34a7ad,_0x520df8=''){const _0x6ce06e=a0_0xbfa10c;if(!_0x34a7ad[_0x6ce06e(0x218)])return;if(_0x34a7ad[_0x6ce06e(0x20c)][_0x6ce06e(0x20f)]===0x0)return;const _0x393fbd=_0x34a7ad[_0x6ce06e(0x20c)][_0x6ce06e(0x27c)](0x0,0xf),_0x4fe247=await getWeatherContext(_0x34a7ad),_0x3c4781=_0x34a7ad[_0x6ce06e(0x15f)],_0x560447=PERSONA_MAPPING[_0x34a7ad[_0x6ce06e(0x213)][_0x6ce06e(0x227)]||_0x6ce06e(0x1fe)],_0x13c889=_0x34a7ad[_0x6ce06e(0x213)][_0x6ce06e(0x1a3)]||'Keine\x20Details.';let _0x50bb79=_0x6ce06e(0x228);try{const _0x12735a=await _0x34a7ad[_0x6ce06e(0x170)](_0x6ce06e(0x236));if(_0x12735a&&_0x12735a[_0x6ce06e(0x25c)])_0x50bb79=_0x12735a[_0x6ce06e(0x25c)];}catch(_0x3b75b3){}let _0x58743e=![];try{const _0x4d79ef=await _0x34a7ad[_0x6ce06e(0x170)]('analysis.automation.autoApply');if(_0x4d79ef&&_0x4d79ef[_0x6ce06e(0x25c)])_0x58743e=!![];}catch(_0x37d985){}const _0x2ea6e9='ROLLE:\x20KI-Hausverwalter.\x20PERSONA:\x20'+_0x560447+'.\x20KONTEXT:\x20'+_0x13c889+_0x6ce06e(0x244)+_0x3c4781+'.\x20WETTER:\x20'+_0x4fe247+_0x6ce06e(0x198)+_0x50bb79+_0x6ce06e(0x174)+JSON[_0x6ce06e(0x2a6)](_0x393fbd)+'.\x20EMERGENCY:\x20'+_0x520df8+_0x6ce06e(0x1a1);try{const _0x9415ca=await _0x34a7ad[_0x6ce06e(0x218)][_0x6ce06e(0x189)](_0x2ea6e9),_0x59cf8b=JSON['parse'](_0x9415ca[_0x6ce06e(0x275)]['text']()[_0x6ce06e(0x16d)](/```json|```/g,'')[_0x6ce06e(0x203)]());await _0x34a7ad[_0x6ce06e(0x266)]('analysis.lastResult',{'val':JSON[_0x6ce06e(0x2a6)](_0x59cf8b),'ack':!![]});if(_0x59cf8b[_0x6ce06e(0x29e)])await _0x34a7ad['setStateAsync'](_0x6ce06e(0x1f8),{'val':_0x59cf8b['summary'],'ack':!![]});const _0x775d0d={'timestamp':Date[_0x6ce06e(0x27e)](),'id':Date[_0x6ce06e(0x27e)]()[_0x6ce06e(0x156)](),'analysis':{'activity':{'summary':_0x59cf8b[_0x6ce06e(0x29e)],'isAlert':_0x59cf8b[_0x6ce06e(0x18d)],'alertReason':_0x59cf8b[_0x6ce06e(0x269)]},'comfort':{'automationProposal':_0x59cf8b['automationProposal']}}};await updateAnalysisHistory(_0x34a7ad,_0x775d0d);const _0x4675c0=_0x59cf8b['isAlert']||![];_0x4675c0!==_0x34a7ad['lastAlertState']&&(await _0x34a7ad[_0x6ce06e(0x266)](_0x6ce06e(0x151),{'val':_0x4675c0,'ack':!![]}),_0x34a7ad['lastAlertState']=_0x4675c0,_0x4675c0&&(await _0x34a7ad['setStateAsync'](_0x6ce06e(0x297),{'val':_0x59cf8b[_0x6ce06e(0x269)],'ack':!![]}),sendNotification(_0x34a7ad,_0x6ce06e(0x1bc)+_0x59cf8b[_0x6ce06e(0x269)],![],_0x59cf8b[_0x6ce06e(0x129)])));if(_0x59cf8b[_0x6ce06e(0x197)]&&_0x59cf8b[_0x6ce06e(0x197)][_0x6ce06e(0x23a)]){await _0x34a7ad[_0x6ce06e(0x266)]('analysis.automation.patternDetected',{'val':!![],'ack':!![]}),await _0x34a7ad[_0x6ce06e(0x266)](_0x6ce06e(0x13e),{'val':_0x59cf8b[_0x6ce06e(0x197)][_0x6ce06e(0x18e)],'ack':!![]}),await _0x34a7ad[_0x6ce06e(0x266)](_0x6ce06e(0x241),{'val':_0x59cf8b['automationProposal']['targetId'],'ack':!![]}),await _0x34a7ad['setStateAsync'](_0x6ce06e(0x1c4),{'val':JSON[_0x6ce06e(0x2a6)](_0x59cf8b[_0x6ce06e(0x197)][_0x6ce06e(0x1d1)]),'ack':!![]});if(_0x58743e)executeAutomationAction(_0x34a7ad);}}catch(_0x41d33f){_0x34a7ad[_0x6ce06e(0x12f)][_0x6ce06e(0x12b)](_0x6ce06e(0x133)+_0x41d33f[_0x6ce06e(0x159)]);}}async function startSystem(_0x191d29){const _0x614e4=a0_0xbfa10c;_0x191d29[_0x614e4(0x12f)][_0x614e4(0x1cb)]('ðŸš€\x20Starting\x20NUUKANNI\x20Logic\x20(v0.12.10)...'),await initZombies(_0x191d29);try{_0x191d29[_0x614e4(0x295)]=await checkLicense(_0x191d29[_0x614e4(0x213)][_0x614e4(0x1a2)]);}catch(_0x5742c9){}if(!_0x191d29[_0x614e4(0x213)][_0x614e4(0x123)]||_0x191d29[_0x614e4(0x213)]['inactivityThresholdHours']<0.1)_0x191d29[_0x614e4(0x213)][_0x614e4(0x123)]=0xc;await initHistory(_0x191d29),await initSystemConfig(_0x191d29);if(_0x191d29[_0x614e4(0x213)][_0x614e4(0x19b)])try{_0x191d29[_0x614e4(0x205)]=new GoogleGenerativeAI(_0x191d29['config'][_0x614e4(0x19b)]),_0x191d29[_0x614e4(0x218)]=_0x191d29[_0x614e4(0x205)][_0x614e4(0x200)]({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':_0x614e4(0x196)}}),_0x191d29[_0x614e4(0x12f)][_0x614e4(0x1cb)](_0x614e4(0x259));}catch(_0x527a3a){_0x191d29[_0x614e4(0x12f)]['error'](_0x614e4(0x296)+_0x527a3a['message']);}await createAllObjects(_0x191d29),await loadSystemMode(_0x191d29),await loadRawEventLog(_0x191d29),await loadDailyDigests(_0x191d29),_0x191d29[_0x614e4(0x217)](_0x614e4(0x153)),_0x191d29[_0x614e4(0x217)](LTM_DP_TRIGGER_DIGEST),_0x191d29[_0x614e4(0x217)]('system.mode'),_0x191d29[_0x614e4(0x217)]('analysis.triggerBriefing'),_0x191d29[_0x614e4(0x217)]('analysis.automation.triggerAction'),_0x191d29[_0x614e4(0x217)](_0x614e4(0x2af)),_0x191d29[_0x614e4(0x217)](_0x614e4(0x183)),_0x191d29[_0x614e4(0x217)]('analysis.training.triggerHealth'),_0x191d29[_0x614e4(0x217)]('analysis.training.triggerEnergy'),_0x191d29[_0x614e4(0x217)](_0x614e4(0x1fb)),_0x191d29[_0x614e4(0x217)]('analysis.training.triggerTopology'),await initSensorSubscriptions(_0x191d29),await initPresenceSubscriptions(_0x191d29),await setupTelegramListener(_0x191d29),setTimeout(()=>checkWifiPresence(_0x191d29),0x1388);if(_0x191d29[_0x614e4(0x1f6)])clearInterval(_0x191d29['analysisTimer']);const _0x5dd16c=_0x191d29[_0x614e4(0x213)][_0x614e4(0x1ff)]||0xf;_0x5dd16c>0x0&&(_0x191d29[_0x614e4(0x1f6)]=setInterval(()=>{runAutopilot(_0x191d29);},_0x5dd16c*0x3c*0x3e8)),schedulers[_0x614e4(0x26e)](_0x191d29,()=>createDailyDigest(_0x191d29)),schedulers[_0x614e4(0x193)](_0x191d29),schedulers[_0x614e4(0x280)](_0x191d29,()=>runBaselineDriftAnalysis(_0x191d29)),schedulers['setupBriefingScheduler'](_0x191d29,()=>sendMorningBriefing(_0x191d29)),startPythonService(_0x191d29),setTimeout(()=>{const _0x1c1e34=_0x614e4;_0x191d29[_0x1c1e34(0x260)]&&(runPythonHealthCheck(_0x191d29),triggerGaitAnalysis(_0x191d29),triggerEnergyPrediction(_0x191d29)),updateHealthVector(_0x191d29);},0x1388);}class CogniLiving extends utils[a0_0xbfa10c(0x15d)]{constructor(_0x4a9593){const _0x123911=a0_0xbfa10c;super({..._0x4a9593,'name':_0x123911(0x22c)}),this[_0x123911(0x20c)]=[],this[_0x123911(0x1c3)]=[],this[_0x123911(0x278)]=[],this['dailyDigests']=[],this[_0x123911(0x143)]={},this[_0x123911(0x184)]={'latitude':0x0,'longitude':0x0,'city':''},this[_0x123911(0x250)]=!![],this[_0x123911(0x206)]=null,this[_0x123911(0x1b6)]=null,this[_0x123911(0x177)]=![],this['genAI']=null,this[_0x123911(0x218)]=null,this['currentSystemMode']=SYSTEM_MODES[_0x123911(0x2a9)],this['isProVersion']=![],this['lastAlertState']=![],this[_0x123911(0x14b)]=_0x123911(0x249),this[_0x123911(0x1f6)]=null,this[_0x123911(0x16b)]=null,this['modeResetJob']=null,this[_0x123911(0x21d)]=null,this[_0x123911(0x2b0)]=null,this[_0x123911(0x260)]=null,this[_0x123911(0x2a3)]=![],this['on']('ready',this[_0x123911(0x27b)]['bind'](this)),this['on']('stateChange',this['onStateChange'][_0x123911(0x1a7)](this)),this['on']('unload',this['onUnload']['bind'](this)),this['on'](_0x123911(0x159),this[_0x123911(0x299)][_0x123911(0x1a7)](this));}async[a0_0xbfa10c(0x27b)](){const _0x2adf0d=a0_0xbfa10c;this[_0x2adf0d(0x12f)]['info']('cogni-living\x20adapter\x20starting\x20(v'+this['version']+_0x2adf0d(0x293));if(!installer['checkAndInstall'](this,()=>startSystem(this)))return;}[a0_0xbfa10c(0x23b)](_0x4073e0){const _0x17d7d2=a0_0xbfa10c;if(this[_0x17d7d2(0x1f6)])clearInterval(this[_0x17d7d2(0x1f6)]);if(this[_0x17d7d2(0x21d)])clearInterval(this['driftAnalysisTimer']);if(this[_0x17d7d2(0x16b)])this[_0x17d7d2(0x16b)][_0x17d7d2(0x190)]();if(this[_0x17d7d2(0x285)])this[_0x17d7d2(0x285)][_0x17d7d2(0x190)]();if(this[_0x17d7d2(0x2b0)])this['briefingJob'][_0x17d7d2(0x190)]();if(this['exitTimer'])clearTimeout(this[_0x17d7d2(0x206)]);if(this[_0x17d7d2(0x1b6)])clearTimeout(this[_0x17d7d2(0x1b6)]);stopPythonService(this),_0x4073e0();}async[a0_0xbfa10c(0x16f)](_0x2e73ac,_0x2423c5){const _0xbfd6d6=a0_0xbfa10c;if(!_0x2423c5||this[_0xbfd6d6(0x2a3)])return;if(_0x2e73ac[_0xbfd6d6(0x1cc)]('telegram')&&_0x2e73ac['endsWith'](_0xbfd6d6(0x12e))&&_0x2423c5[_0xbfd6d6(0x25c)]){await handleTelegramResponse(this,_0x2423c5[_0xbfd6d6(0x25c)]);return;}if(_0x2e73ac===this[_0xbfd6d6(0x1f5)]+'.'+SYSTEM_DP_MODE){if(_0x2423c5['val']&&Object[_0xbfd6d6(0x157)](SYSTEM_MODES)[_0xbfd6d6(0x1cc)](_0x2423c5[_0xbfd6d6(0x25c)])){this['currentSystemMode']=_0x2423c5[_0xbfd6d6(0x25c)];if(_0x2423c5[_0xbfd6d6(0x25c)]===SYSTEM_MODES[_0xbfd6d6(0x161)])await setPresence(this,![]);else await setPresence(this,!![]);}if(!_0x2423c5['ack'])this[_0xbfd6d6(0x169)](_0x2e73ac,{'val':this[_0xbfd6d6(0x15f)],'ack':!![]});return;}if(!_0x2423c5[_0xbfd6d6(0x230)]){_0x2e73ac['includes'](_0xbfd6d6(0x153))&&_0x2423c5[_0xbfd6d6(0x25c)]&&(this[_0xbfd6d6(0x169)](_0x2e73ac,{'val':![],'ack':!![]}),runGeminiAnalysis(this));if(_0x2e73ac[_0xbfd6d6(0x1cc)]('triggerDailyDigest')&&_0x2423c5[_0xbfd6d6(0x25c)]){this[_0xbfd6d6(0x169)](_0x2e73ac,{'val':![],'ack':!![]});if(this['isProVersion'])createDailyDigest(this);}_0x2e73ac[_0xbfd6d6(0x1cc)](_0xbfd6d6(0x1b3))&&_0x2423c5[_0xbfd6d6(0x25c)]&&(this[_0xbfd6d6(0x169)](_0x2e73ac,{'val':![],'ack':!![]}),sendMorningBriefing(this));_0x2e73ac[_0xbfd6d6(0x1cc)](_0xbfd6d6(0x211))&&_0x2423c5[_0xbfd6d6(0x25c)]&&(this[_0xbfd6d6(0x169)](_0x2e73ac,{'val':![],'ack':!![]}),executeAutomationAction(this));if(_0x2e73ac['includes'](_0xbfd6d6(0x183))&&_0x2423c5[_0xbfd6d6(0x25c)]){this['setState'](_0x2e73ac,{'val':![],'ack':!![]});if(this[_0xbfd6d6(0x295)])try{const _0x19c149=await this['getStateAsync'](_0xbfd6d6(0x256));if(_0x19c149&&_0x19c149['val']){const _0x3a763d=JSON[_0xbfd6d6(0x273)](_0x19c149[_0xbfd6d6(0x25c)]);this['log'][_0xbfd6d6(0x1cb)]('ðŸ§ \x20Triggering\x20Security\x20Training...'),this[_0xbfd6d6(0x266)](_0xbfd6d6(0x24e),{'val':_0xbfd6d6(0x20d),'ack':!![]}),sendToPython(this,_0xbfd6d6(0x145),{'sequences':_0x3a763d});}}catch(_0x617598){this[_0xbfd6d6(0x12f)][_0xbfd6d6(0x12b)](_0xbfd6d6(0x1ce)+_0x617598[_0xbfd6d6(0x159)]);}}if(_0x2e73ac['includes'](_0xbfd6d6(0x18b))&&_0x2423c5['val']){this[_0xbfd6d6(0x169)](_0x2e73ac,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x41ead3=await this[_0xbfd6d6(0x170)](LTM_DP_DAILY_DIGESTS);if(_0x41ead3&&_0x41ead3['val'])sendToPython(this,_0xbfd6d6(0x237),{'digests':JSON[_0xbfd6d6(0x273)](_0x41ead3[_0xbfd6d6(0x25c)])});}catch(_0x5f3d81){}}if(_0x2e73ac[_0xbfd6d6(0x1cc)](_0xbfd6d6(0x26a))&&_0x2423c5['val']){this[_0xbfd6d6(0x169)](_0x2e73ac,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x53f771=await this[_0xbfd6d6(0x170)](_0xbfd6d6(0x214));if(_0x53f771&&_0x53f771[_0xbfd6d6(0x25c)])sendToPython(this,_0xbfd6d6(0x1df),{'points':JSON[_0xbfd6d6(0x273)](_0x53f771[_0xbfd6d6(0x25c)])});}catch(_0x484be9){}}if(_0x2e73ac[_0xbfd6d6(0x1cc)](_0xbfd6d6(0x1fb))&&_0x2423c5[_0xbfd6d6(0x25c)]){this[_0xbfd6d6(0x169)](_0x2e73ac,{'val':![],'ack':!![]});if(this['isProVersion'])try{const _0x2ff73d=await this[_0xbfd6d6(0x170)](LTM_DP_RAW_LOG);_0x2ff73d&&_0x2ff73d[_0xbfd6d6(0x25c)]&&(this['log'][_0xbfd6d6(0x1cb)](_0xbfd6d6(0x22a)),sendToPython(this,'TRAIN_COMFORT',{'events':JSON['parse'](_0x2ff73d[_0xbfd6d6(0x25c)])}));}catch(_0x3c8622){}}if(_0x2e73ac['includes'](_0xbfd6d6(0x1c9))&&_0x2423c5[_0xbfd6d6(0x25c)]){this[_0xbfd6d6(0x169)](_0x2e73ac,{'val':![],'ack':!![]});if(this[_0xbfd6d6(0x295)])try{const _0x4643c9=await this['getStateAsync'](_0xbfd6d6(0x256));if(_0x4643c9&&_0x4643c9['val']){const _0x16fe8b=JSON[_0xbfd6d6(0x273)](_0x4643c9[_0xbfd6d6(0x25c)]);this['log']['info'](_0xbfd6d6(0x28a)),sendToPython(this,'BUILD_TOPOLOGY',{'sequences':_0x16fe8b});}}catch(_0x2dc4a4){this[_0xbfd6d6(0x12f)][_0xbfd6d6(0x12b)](_0xbfd6d6(0x1fa)+_0x2dc4a4[_0xbfd6d6(0x159)]);}}return;}if(this['config']['presenceDevices']&&this[_0xbfd6d6(0x213)][_0xbfd6d6(0x138)][_0xbfd6d6(0x1cc)](_0x2e73ac)){await checkWifiPresence(this);return;}const _0x582247=(this['config'][_0xbfd6d6(0x1b4)]||[])[_0xbfd6d6(0x1f2)](_0x1bd6e6=>_0x1bd6e6['id']===_0x2e73ac);if(_0x582247)processSensorEvent(this,_0x2e73ac,_0x2423c5,_0x582247);}async['onMessage'](_0xeac402){const _0x2a2645=a0_0xbfa10c;if(typeof _0xeac402===_0x2a2645(0x142)&&_0xeac402[_0x2a2645(0x159)]){if(_0xeac402[_0x2a2645(0x1a9)]===_0x2a2645(0x2a1)){const _0x5b92e7=_0xeac402['message']['apiKey']||this['config'][_0x2a2645(0x19b)];if(!_0x5b92e7)return this[_0x2a2645(0x1d2)](_0xeac402[_0x2a2645(0x28c)],_0xeac402[_0x2a2645(0x1a9)],{'success':![],'message':_0x2a2645(0x270)},_0xeac402[_0x2a2645(0x274)]);try{const _0x2a4924=new GoogleGenerativeAI(_0x5b92e7),_0x198aea=_0x2a4924['getGenerativeModel']({'model':GEMINI_MODEL}),_0x1e41ec=await _0x198aea['generateContent']('Hi');this['sendTo'](_0xeac402[_0x2a2645(0x28c)],_0xeac402[_0x2a2645(0x1a9)],{'success':!![],'message':_0x2a2645(0x272)+_0x1e41ec['response'][_0x2a2645(0x26c)]()},_0xeac402[_0x2a2645(0x274)]);}catch(_0x2e56ac){this[_0x2a2645(0x1d2)](_0xeac402['from'],_0xeac402[_0x2a2645(0x1a9)],{'success':![],'message':_0x2a2645(0x1e3)+_0x2e56ac[_0x2a2645(0x159)]},_0xeac402['callback']);}}else{if(_0xeac402['command']==='testContext'){const _0x15ff8c=await getWeatherContext(this),_0x26450b=await getCalendarContext(this);this[_0x2a2645(0x1d2)](_0xeac402[_0x2a2645(0x28c)],_0xeac402[_0x2a2645(0x1a9)],{'success':!![],'weather':_0x15ff8c,'calendar':_0x26450b},_0xeac402[_0x2a2645(0x274)]);}else{if(_0xeac402[_0x2a2645(0x1a9)]==='getLtmData'){if(!this['isProVersion'])return this['sendTo'](_0xeac402[_0x2a2645(0x28c)],_0xeac402[_0x2a2645(0x1a9)],{'success':![],'isPro':![]},_0xeac402[_0x2a2645(0x274)]);let _0x44eff7={'status':_0x2a2645(0x1ed)};try{const _0x57a38b=await this[_0x2a2645(0x170)](LTM_DP_DRIFT_STATUS);_0x44eff7[_0x2a2645(0x225)]=_0x57a38b?_0x57a38b[_0x2a2645(0x25c)]:_0x2a2645(0x1ed);}catch(_0x43a58d){}this[_0x2a2645(0x1d2)](_0xeac402[_0x2a2645(0x28c)],_0xeac402['command'],{'success':!![],'isPro':!![],'dailyDigests':this[_0x2a2645(0x23c)],'driftAnalysis':_0x44eff7,'analysisHistory':this[_0x2a2645(0x1c3)]},_0xeac402[_0x2a2645(0x274)]);}else{if(_0xeac402[_0x2a2645(0x1a9)]===_0x2a2645(0x144)){const _0x2bd84e=this[_0x2a2645(0x23c)][_0x2a2645(0x20f)],_0x3f4113=new Date(),_0x20c211=new Date(_0x3f4113[_0x2a2645(0x1d6)](),_0x3f4113['getMonth'](),_0x3f4113[_0x2a2645(0x167)]())['getTime'](),_0x15a5de=this['rawEventLog'][_0x2a2645(0x1e4)](_0x2b1696=>new Date(_0x2b1696[_0x2a2645(0x1d7)])['getTime']()>_0x20c211)['length'],_0x58468f=new Array(0x18)[_0x2a2645(0x176)](0x0);this['rawEventLog'][_0x2a2645(0x298)](_0x566cde=>{const _0x4e65f4=_0x2a2645,_0x1395b0=new Date(_0x566cde[_0x4e65f4(0x1d7)]);if(_0x1395b0[_0x4e65f4(0x14f)]()>_0x20c211)_0x58468f[_0x1395b0['getHours']()]++;});let _0x501781={'status':_0x2a2645(0x1ed)};try{const _0x205e82=await this[_0x2a2645(0x170)](LTM_DP_DRIFT_STATUS);_0x501781[_0x2a2645(0x225)]=_0x205e82?_0x205e82[_0x2a2645(0x25c)]:_0x2a2645(0x1ed);}catch(_0x317a79){}let _0x12e248='';try{const _0x503982=await this[_0x2a2645(0x170)]('system.presenceWho');_0x12e248=_0x503982?_0x503982[_0x2a2645(0x25c)]:'';}catch(_0x6e6b2b){}let _0x5103ec=null;!this[_0x2a2645(0x218)]&&(_0x5103ec=this[_0x2a2645(0x213)][_0x2a2645(0x19b)]?'KI-Modell\x20nicht\x20initialisiert':_0x2a2645(0x25e));let _0x35b643={'detected':![],'description':'','targetId':'','targetValue':'','autoApply':![]};try{const _0x1158ec=await this[_0x2a2645(0x170)](_0x2a2645(0x15b));if(_0x1158ec&&_0x1158ec[_0x2a2645(0x25c)]){_0x35b643[_0x2a2645(0x23a)]=!![];const _0x30e5fb=await this[_0x2a2645(0x170)](_0x2a2645(0x13e));_0x35b643[_0x2a2645(0x18e)]=_0x30e5fb?_0x30e5fb[_0x2a2645(0x25c)]:'';const _0x16ec27=await this[_0x2a2645(0x170)](_0x2a2645(0x241));_0x35b643[_0x2a2645(0x208)]=_0x16ec27?_0x16ec27[_0x2a2645(0x25c)]:'';const _0x3a623d=await this[_0x2a2645(0x170)](_0x2a2645(0x1c4));_0x35b643['targetValue']=_0x3a623d?_0x3a623d['val']:'';}const _0x4f1e0a=await this['getStateAsync']('analysis.automation.autoApply');_0x35b643[_0x2a2645(0x185)]=_0x4f1e0a?!!_0x4f1e0a['val']:![];}catch(_0x264448){}this['sendTo'](_0xeac402[_0x2a2645(0x28c)],_0xeac402[_0x2a2645(0x1a9)],{'success':!![],'eventHistory':this[_0x2a2645(0x20c)][_0x2a2645(0x27c)](0x0,0xf),'stats':{'digestCount':_0x2bd84e,'eventCountToday':_0x15a5de,'hourlyActivity':_0x58468f,'driftStatus':_0x501781[_0x2a2645(0x225)],'isPresent':this[_0x2a2645(0x250)],'presenceWho':_0x12e248,'minDays':this[_0x2a2645(0x213)]['minDaysForBaseline']||0x7,'stbDays':this[_0x2a2645(0x213)][_0x2a2645(0x168)]||0xe,'ltbDays':this[_0x2a2645(0x213)][_0x2a2645(0x261)]||0x3c,'systemError':_0x5103ec},'automation':_0x35b643},_0xeac402[_0x2a2645(0x274)]);}else{if(_0xeac402[_0x2a2645(0x1a9)]===_0x2a2645(0x222))try{const _0x1a8a24=await scanner[_0x2a2645(0x268)](this,_0xeac402[_0x2a2645(0x159)]||{});this[_0x2a2645(0x1d2)](_0xeac402[_0x2a2645(0x28c)],_0xeac402[_0x2a2645(0x1a9)],{'success':!![],'devices':_0x1a8a24},_0xeac402[_0x2a2645(0x274)]);}catch(_0x588683){this['sendTo'](_0xeac402[_0x2a2645(0x28c)],_0xeac402[_0x2a2645(0x1a9)],{'success':![],'error':_0x588683[_0x2a2645(0x159)]},_0xeac402[_0x2a2645(0x274)]);}else{if(_0xeac402[_0x2a2645(0x1a9)]===_0x2a2645(0x178)){const _0x1a8f16=await this[_0x2a2645(0x28b)](_0x2a2645(0x182),_0x2a2645(0x21c)),_0x1ea465=[];if(_0x1a8f16)for(const _0x4f8efe in _0x1a8f16){const _0xf6ad91=_0x1a8f16[_0x4f8efe],_0x369220=(_0xf6ad91[_0x2a2645(0x1ec)]&&typeof _0xf6ad91[_0x2a2645(0x1ec)][_0x2a2645(0x125)]==='object'?_0xf6ad91[_0x2a2645(0x1ec)][_0x2a2645(0x125)]['de']:_0xf6ad91[_0x2a2645(0x1ec)][_0x2a2645(0x125)])||_0xf6ad91[_0x2a2645(0x1ec)]['name'];_0x1ea465[_0x2a2645(0x1c8)]({'id':_0x4f8efe,'name':_0x369220});}const _0x185c43=await this['getForeignObjectsAsync'](_0x2a2645(0x258),_0x2a2645(0x21c)),_0xc9a1e4=[];if(_0x185c43)for(const _0x23cd1 in _0x185c43){const _0x4aba05=_0x185c43[_0x23cd1],_0x4c9328=(_0x4aba05['common']&&typeof _0x4aba05[_0x2a2645(0x1ec)][_0x2a2645(0x125)]===_0x2a2645(0x142)?_0x4aba05[_0x2a2645(0x1ec)]['name']['de']:_0x4aba05[_0x2a2645(0x1ec)][_0x2a2645(0x125)])||_0x23cd1[_0x2a2645(0x264)]('.')[_0x2a2645(0x1cd)]();_0xc9a1e4[_0x2a2645(0x1c8)](_0x4c9328);}this['sendTo'](_0xeac402['from'],_0xeac402[_0x2a2645(0x1a9)],{'success':!![],'enums':_0x1ea465,'rooms':_0xc9a1e4},_0xeac402[_0x2a2645(0x274)]);}else{if(_0xeac402[_0x2a2645(0x1a9)]===_0x2a2645(0x294)){const _0x551b38=_0xeac402[_0x2a2645(0x159)][_0x2a2645(0x284)];if(!_0x551b38)return this['sendTo'](_0xeac402[_0x2a2645(0x28c)],_0xeac402[_0x2a2645(0x1a9)],{'success':![],'error':_0x2a2645(0x229)},_0xeac402[_0x2a2645(0x274)]);const _0x44ae61=await getCalendarNames(this,_0x551b38);this[_0x2a2645(0x1d2)](_0xeac402['from'],_0xeac402[_0x2a2645(0x1a9)],{'success':!![],'names':_0x44ae61},_0xeac402[_0x2a2645(0x274)]);}else{if(_0xeac402['command']===_0x2a2645(0x1b1)){const {targetId:_0x2b6362,targetValue:_0x2c9032}=_0xeac402[_0x2a2645(0x159)];this[_0x2a2645(0x12f)][_0x2a2645(0x1cb)]('ðŸ§ª\x20Simulating\x20Butler\x20Proposal:\x20'+_0x2b6362+'\x20=\x20'+_0x2c9032),await this[_0x2a2645(0x266)](_0x2a2645(0x15b),{'val':!![],'ack':!![]}),await this[_0x2a2645(0x266)](_0x2a2645(0x13e),{'val':_0x2a2645(0x1ae)+_0x2b6362,'ack':!![]}),await this['setStateAsync'](_0x2a2645(0x241),{'val':_0x2b6362,'ack':!![]}),await this[_0x2a2645(0x266)](_0x2a2645(0x1c4),{'val':_0x2c9032,'ack':!![]}),this[_0x2a2645(0x1d2)](_0xeac402[_0x2a2645(0x28c)],_0xeac402[_0x2a2645(0x1a9)],{'success':!![]},_0xeac402[_0x2a2645(0x274)]);}else{if(_0xeac402[_0x2a2645(0x1a9)]===_0x2a2645(0x1e9)){const {historyId:_0x4e896a,rating:_0x4c91bb,comment:_0x5d9bfa,alertReason:_0x2d49ef}=_0xeac402['message'];_0x4e896a&&_0x4c91bb?(await saveFeedback(this,{'timestamp':Date[_0x2a2645(0x27e)](),'historyId':_0x4e896a,'rating':_0x4c91bb,'comment':_0x5d9bfa,'alertReason':_0x2d49ef}),this['sendTo'](_0xeac402['from'],_0xeac402['command'],{'success':!![]},_0xeac402[_0x2a2645(0x274)])):this[_0x2a2645(0x1d2)](_0xeac402['from'],_0xeac402[_0x2a2645(0x1a9)],{'success':![],'error':_0x2a2645(0x26b)},_0xeac402[_0x2a2645(0x274)]);}else _0xeac402[_0x2a2645(0x1a9)]===_0x2a2645(0x1ee)&&(this['log'][_0x2a2645(0x1cb)](_0x2a2645(0x14c)),await this[_0x2a2645(0x266)](_0x2a2645(0x15b),{'val':![],'ack':!![]}),await this[_0x2a2645(0x266)](_0x2a2645(0x13e),{'val':'','ack':!![]}),this[_0x2a2645(0x1d2)](_0xeac402[_0x2a2645(0x28c)],_0xeac402[_0x2a2645(0x1a9)],{'success':!![]},_0xeac402[_0x2a2645(0x274)]));}}}}}}}}}}}if(require[a0_0xbfa10c(0x226)]!==module)module[a0_0xbfa10c(0x17e)]=_0x4aea6d=>new CogniLiving(_0x4aea6d);else new CogniLiving();