const a0_0x581e9c=a0_0x34b2;(function(_0x1cbdc5,_0x446de6){const _0x51cf45=a0_0x34b2,_0x1f8b99=_0x1cbdc5();while(!![]){try{const _0x50218f=-parseInt(_0x51cf45(0x126))/0x1+parseInt(_0x51cf45(0x1dd))/0x2+parseInt(_0x51cf45(0x100))/0x3+-parseInt(_0x51cf45(0x1a7))/0x4+parseInt(_0x51cf45(0x154))/0x5*(-parseInt(_0x51cf45(0x1df))/0x6)+-parseInt(_0x51cf45(0x1e2))/0x7*(-parseInt(_0x51cf45(0x1d5))/0x8)+parseInt(_0x51cf45(0x12f))/0x9*(parseInt(_0x51cf45(0xb6))/0xa);if(_0x50218f===_0x446de6)break;else _0x1f8b99['push'](_0x1f8b99['shift']());}catch(_0x14224e){_0x1f8b99['push'](_0x1f8b99['shift']());}}}(a0_0x4106,0x66f07));const a0_0x47cafb=(function(){let _0x9c3224=!![];return function(_0x38f101,_0x16e9f0){const _0x27adf4=_0x9c3224?function(){const _0x53bde5=a0_0x34b2;if(_0x16e9f0){const _0x3f7a55=_0x16e9f0[_0x53bde5(0x1eb)](_0x38f101,arguments);return _0x16e9f0=null,_0x3f7a55;}}:function(){};return _0x9c3224=![],_0x27adf4;};}()),a0_0x3026c3=a0_0x47cafb(this,function(){const _0x3fc6d1=a0_0x34b2;return a0_0x3026c3[_0x3fc6d1(0xb7)]()[_0x3fc6d1(0x164)](_0x3fc6d1(0x16d))[_0x3fc6d1(0xb7)]()[_0x3fc6d1(0x15f)](a0_0x3026c3)[_0x3fc6d1(0x164)]('(((.+)+)+)+$');});a0_0x3026c3();'use strict';function a0_0x34b2(_0x3e9ba4,_0xc164dc){const _0x2b6890=a0_0x4106();return a0_0x34b2=function(_0x3026c3,_0x47cafb){_0x3026c3=_0x3026c3-0xaf;let _0x41068b=_0x2b6890[_0x3026c3];return _0x41068b;},a0_0x34b2(_0x3e9ba4,_0xc164dc);}const utils=require('@iobroker/adapter-core'),{GoogleGenerativeAI}=require(a0_0x581e9c(0x129)),installer=require(a0_0x581e9c(0x11c)),scanner=require(a0_0x581e9c(0x180)),schedulers=require('./lib/scheduler'),topology=require(a0_0x581e9c(0x192)),setup=require(a0_0x581e9c(0x19a)),recorder=require(a0_0x581e9c(0x178)),pythonBridge=require('./lib/python_bridge'),aiAgent=require(a0_0x581e9c(0x1f6)),deadMan=require(a0_0x581e9c(0x155)),automation=require('./lib/automation'),GEMINI_MODEL=a0_0x581e9c(0x102),ACTIVITY_LEVEL_MAP={'sehr\x20hoch':0x64,'hoch':0x50,'normal':0x3c,'niedrig':0x28,'sehr\x20niedrig':0x14,'inaktiv':0x0};class CogniLiving extends utils[a0_0x581e9c(0x131)]{constructor(_0x17ff20){const _0x1c05b9=a0_0x581e9c;super({..._0x17ff20,'name':_0x1c05b9(0x14c)}),this[_0x1c05b9(0x191)]=[],this['analysisHistory']=[],this['rawEventLog']=[],this[_0x1c05b9(0x1d9)]=[],this['sensorLastValues']={},this['systemConfig']={'latitude':0x0,'longitude':0x0,'city':''},this[_0x1c05b9(0x1fb)]=!![],this[_0x1c05b9(0x124)]=null,this[_0x1c05b9(0xf7)]=null,this[_0x1c05b9(0x1a1)]=![],this[_0x1c05b9(0x1b3)]=null,this[_0x1c05b9(0xec)]=null,this[_0x1c05b9(0x17b)]=setup[_0x1c05b9(0x127)][_0x1c05b9(0x1fe)],this[_0x1c05b9(0xc6)]=![],this[_0x1c05b9(0x1b1)]=![],this[_0x1c05b9(0x10c)]=null,this[_0x1c05b9(0x1c9)]=null,this[_0x1c05b9(0x17a)]=null,this['driftAnalysisTimer']=null,this[_0x1c05b9(0xb8)]=null,this[_0x1c05b9(0x1d0)]=null,this[_0x1c05b9(0x186)]=null,this[_0x1c05b9(0x174)]=![],this['lastTrackerEventTime']=Date[_0x1c05b9(0x13b)](),this[_0x1c05b9(0x171)]=null,this[_0x1c05b9(0x197)]=Date[_0x1c05b9(0x13b)](),this[_0x1c05b9(0x1a6)]=![],this['pressureBuffer']=[],this['on'](_0x1c05b9(0x1f7),this[_0x1c05b9(0x134)][_0x1c05b9(0x1af)](this)),this['on']('stateChange',this[_0x1c05b9(0xb3)][_0x1c05b9(0x1af)](this)),this['on']('unload',this[_0x1c05b9(0xaf)][_0x1c05b9(0x1af)](this)),this['on'](_0x1c05b9(0x1ee),this[_0x1c05b9(0x1da)][_0x1c05b9(0x1af)](this));}async[a0_0x581e9c(0x134)](){const _0x3054b7=a0_0x581e9c;this[_0x3054b7(0x1fc)]['info'](_0x3054b7(0x123)+this[_0x3054b7(0xb1)]+_0x3054b7(0x104));if(!installer[_0x3054b7(0x135)](this,()=>this[_0x3054b7(0x1fa)]()))return;}async[a0_0x581e9c(0x1fa)](){const _0x4ca282=a0_0x581e9c;await setup[_0x4ca282(0x147)](this);try{this['isProVersion']=await setup[_0x4ca282(0xbb)](this[_0x4ca282(0x1e4)][_0x4ca282(0xc3)]);}catch(_0x49a0c5){}if(!this[_0x4ca282(0x1e4)][_0x4ca282(0xdb)]||this[_0x4ca282(0x1e4)][_0x4ca282(0xdb)]<0.1)this[_0x4ca282(0x1e4)][_0x4ca282(0xdb)]=0xc;await setup[_0x4ca282(0x1b8)](this),await setup[_0x4ca282(0x1e8)](this);try{const _0x24194a=await this[_0x4ca282(0x16c)](_0x4ca282(0x116)),_0x545cac=await this[_0x4ca282(0x16c)](_0x4ca282(0x130));_0x24194a&&_0x24194a['val']&&_0x545cac&&_0x545cac[_0x4ca282(0x1fd)]&&(Date[_0x4ca282(0x13b)]()-_0x24194a['ts']<0x4*0xe10*0x3e8&&(this[_0x4ca282(0x171)]={'times':JSON[_0x4ca282(0x1d2)](_0x24194a[_0x4ca282(0x1fd)]),'sources':JSON[_0x4ca282(0x1d2)](_0x545cac[_0x4ca282(0x1fd)])},this['log'][_0x4ca282(0xf9)](_0x4ca282(0x1ff)+Object[_0x4ca282(0x185)](this[_0x4ca282(0x171)][_0x4ca282(0x11d)])[_0x4ca282(0xc1)]+_0x4ca282(0x136))));}catch(_0x5d8c6e){this[_0x4ca282(0x1fc)]['warn'](_0x4ca282(0x1de)+_0x5d8c6e['message']);}if(this[_0x4ca282(0x1e4)][_0x4ca282(0x140)])try{this[_0x4ca282(0x1b3)]=new GoogleGenerativeAI(this['config'][_0x4ca282(0x140)]),this['geminiModel']=this[_0x4ca282(0x1b3)]['getGenerativeModel']({'model':GEMINI_MODEL,'generationConfig':{'responseMimeType':'application/json'}}),this[_0x4ca282(0x1fc)][_0x4ca282(0xf9)]('Gemini\x20AI\x20initialized.');}catch(_0x26f862){this['log'][_0x4ca282(0x1ca)](_0x4ca282(0x14b)+_0x26f862['message']);}await setup[_0x4ca282(0xb5)](this),await this[_0x4ca282(0x13d)](),await this['setObjectNotExistsAsync'](_0x4ca282(0x195),{'type':_0x4ca282(0x19c),'common':{'name':_0x4ca282(0x1bc),'type':_0x4ca282(0x12d),'role':_0x4ca282(0x1ac),'read':!![],'write':![]},'native':{}}),await this[_0x4ca282(0x10e)](_0x4ca282(0x1c6),{'type':_0x4ca282(0x19c),'common':{'name':'Active\x20Ventilation\x20Alerts','type':_0x4ca282(0x12d),'role':_0x4ca282(0x1ac),'read':!![],'write':![]},'native':{}}),await this[_0x4ca282(0x10e)](_0x4ca282(0x116),{'type':_0x4ca282(0x19c),'common':{'name':_0x4ca282(0xbd),'type':_0x4ca282(0x12d),'role':_0x4ca282(0x1ac),'read':!![],'write':![]},'native':{}}),await this['setObjectNotExistsAsync'](_0x4ca282(0x176),{'type':_0x4ca282(0x19c),'common':{'name':_0x4ca282(0xfb),'type':_0x4ca282(0x12d),'role':'json','read':!![],'write':!![],'def':_0x4ca282(0xc7)},'native':{}}),await this[_0x4ca282(0x10e)](_0x4ca282(0x18e),{'type':_0x4ca282(0x19c),'common':{'name':_0x4ca282(0x11e),'type':_0x4ca282(0x12d),'role':'json','read':!![],'write':![],'def':'{}'},'native':{}}),await this[_0x4ca282(0x10e)]('analysis.health.activityTrend',{'type':'state','common':{'name':'General\x20Activity\x20Trend\x20(%)','type':_0x4ca282(0x1f1),'role':_0x4ca282(0x1ce),'unit':'%','read':!![],'write':![]},'native':{}}),await this[_0x4ca282(0x10e)]('analysis.health.gaitSensors',{'type':_0x4ca282(0x19c),'common':{'name':_0x4ca282(0xd4),'type':'string','role':'text','read':!![],'write':![]},'native':{}}),await this[_0x4ca282(0x10e)](_0x4ca282(0x15c),{'type':_0x4ca282(0x19c),'common':{'name':_0x4ca282(0x115),'type':_0x4ca282(0x12d),'role':_0x4ca282(0x1ac),'read':!![],'write':![],'def':'[]'},'native':{}}),await this[_0x4ca282(0x10e)](_0x4ca282(0x10f),{'type':_0x4ca282(0x19c),'common':{'name':_0x4ca282(0xb0),'type':'string','role':_0x4ca282(0x1ac),'read':!![],'write':![],'def':'[]'},'native':{}}),await this['setObjectNotExistsAsync'](_0x4ca282(0x189),{'type':'state','common':{'name':'Gait\x20Speed\x20Calculation\x20Proof','type':_0x4ca282(0x12d),'role':_0x4ca282(0xd8),'read':!![],'write':![]},'native':{}});try{const _0x478b0f=await this[_0x4ca282(0x16c)](_0x4ca282(0xb4));if(_0x478b0f&&_0x478b0f[_0x4ca282(0x1fd)])this[_0x4ca282(0x162)]=JSON[_0x4ca282(0x1d2)](_0x478b0f[_0x4ca282(0x1fd)]);}catch(_0xea8b7e){this[_0x4ca282(0x162)]=[];}try{const _0x34b772=await this[_0x4ca282(0x16c)](_0x4ca282(0x139));if(_0x34b772&&_0x34b772['val'])this[_0x4ca282(0x1d9)]=JSON['parse'](_0x34b772[_0x4ca282(0x1fd)]);}catch(_0x33adfc){this[_0x4ca282(0x1d9)]=[];}const _0x144124=this[_0x4ca282(0x1d9)][_0x4ca282(0xc1)]>=(this['config'][_0x4ca282(0x19e)]||0x7)?'Aktiv\x20('+this[_0x4ca282(0x1d9)]['length']+_0x4ca282(0x13f):_0x4ca282(0xca)+this[_0x4ca282(0x1d9)][_0x4ca282(0xc1)]+'/'+(this['config'][_0x4ca282(0x19e)]||0x7)+')';await this[_0x4ca282(0xda)](_0x4ca282(0x14e),{'val':_0x144124,'ack':!![]}),this[_0x4ca282(0x157)]('analysis.trigger'),this[_0x4ca282(0x157)](_0x4ca282(0x156)),this[_0x4ca282(0x157)](_0x4ca282(0x15a)),this[_0x4ca282(0x157)](_0x4ca282(0x16e)),this['subscribeStates'](_0x4ca282(0x12c)),this['subscribeStates']('analysis.automation.autoApply'),this[_0x4ca282(0x157)](_0x4ca282(0x14f)),this['subscribeStates'](_0x4ca282(0x1b9)),this['subscribeStates'](_0x4ca282(0x138)),this[_0x4ca282(0x157)](_0x4ca282(0xf1)),this[_0x4ca282(0x157)](_0x4ca282(0x1dc)),this[_0x4ca282(0x157)](_0x4ca282(0xfa)),this[_0x4ca282(0x157)](_0x4ca282(0x130));this[_0x4ca282(0x1e4)]['infrasoundEnabled']&&this[_0x4ca282(0x1e4)][_0x4ca282(0xdc)]&&(this[_0x4ca282(0x1fc)]['info'](_0x4ca282(0xce)+this['config'][_0x4ca282(0xdc)]),this[_0x4ca282(0x184)](this[_0x4ca282(0x1e4)][_0x4ca282(0xdc)]));const _0x2fc1c3=this[_0x4ca282(0x1e4)][_0x4ca282(0x1d4)];if(_0x2fc1c3)for(const _0x327fd0 of _0x2fc1c3){await this[_0x4ca282(0x119)](_0x327fd0['id']);}const _0x47a511=this[_0x4ca282(0x1e4)][_0x4ca282(0x108)];if(_0x47a511)for(const _0x9bd998 of _0x47a511){await this['subscribeForeignStatesAsync'](_0x9bd998);}if(this[_0x4ca282(0x1e4)][_0x4ca282(0x1cd)]&&this[_0x4ca282(0x1e4)][_0x4ca282(0x13c)])await this[_0x4ca282(0x119)](this[_0x4ca282(0x1e4)][_0x4ca282(0x13c)]+_0x4ca282(0xc2));setTimeout(()=>this[_0x4ca282(0x1bd)](),0x1388);if(this['analysisTimer'])clearInterval(this['analysisTimer']);const _0x2ab71f=this[_0x4ca282(0x1e4)][_0x4ca282(0x19f)]||0xf;_0x2ab71f>0x0&&(this[_0x4ca282(0x10c)]=setInterval(()=>{const _0x191939=_0x4ca282;this[_0x191939(0x1d6)](),automation[_0x191939(0x1ae)](this),automation[_0x191939(0x1d3)](this);},_0x2ab71f*0x3c*0x3e8));setTimeout(()=>{automation['checkCalendarTriggers'](this),automation['monitorEnforcements'](this);},0x2710);this[_0x4ca282(0x1e4)][_0x4ca282(0x1bf)]!==![]&&(this[_0x4ca282(0x1d0)]=setInterval(()=>{const _0x563393=_0x4ca282;if(this[_0x563393(0xc6)]){const _0x4a49b0=Date[_0x563393(0x13b)](),_0x26dc94=this['lastTrackerEventTime']||_0x4a49b0,_0x519b20=(_0x4a49b0-_0x26dc94)/0x3e8;_0x519b20>0x2&&(this[_0x563393(0xd2)]=_0x4a49b0,pythonBridge[_0x563393(0x166)](this,_0x563393(0x159),{'room':null,'dt':_0x519b20}));}},0xbb8));if(this[_0x4ca282(0x186)])clearInterval(this[_0x4ca282(0x186)]);this[_0x4ca282(0x186)]=setInterval(()=>{const _0x4e2bf8=_0x4ca282;this[_0x4e2bf8(0xc6)]&&(this[_0x4e2bf8(0x1fc)]['info'](_0x4e2bf8(0x117)),this[_0x4e2bf8(0x15e)]());},0x4*0x3c*0x3c*0x3e8),schedulers['setupLtmScheduler'](this,()=>aiAgent[_0x4ca282(0xeb)](this,pythonBridge)),schedulers[_0x4ca282(0x1ed)](this),schedulers[_0x4ca282(0xdd)](this,()=>aiAgent[_0x4ca282(0x1a5)](this)),schedulers[_0x4ca282(0x101)](this,()=>aiAgent[_0x4ca282(0x141)](this)),pythonBridge['startService'](this,installer[_0x4ca282(0x111)]),setTimeout(async()=>{const _0x10298a=_0x4ca282;await topology[_0x10298a(0x13e)](this);try{const _0x388fcb=await this['getStateAsync'](_0x10298a(0xe9));if(_0x388fcb&&_0x388fcb[_0x10298a(0x1fd)])pythonBridge[_0x10298a(0x166)](this,_0x10298a(0x175),JSON[_0x10298a(0x1d2)](_0x388fcb[_0x10298a(0x1fd)]));}catch(_0x55db7d){}this['runPythonHealthCheck'](),this['triggerGaitAnalysis'](),this[_0x10298a(0xba)](),this[_0x10298a(0x190)]();},0x1388);}[a0_0x581e9c(0xaf)](_0x3a0dad){const _0x5f07d8=a0_0x581e9c;if(this[_0x5f07d8(0x10c)])clearInterval(this[_0x5f07d8(0x10c)]);if(this[_0x5f07d8(0x1b7)])clearInterval(this[_0x5f07d8(0x1b7)]);if(this[_0x5f07d8(0x1d0)])clearInterval(this[_0x5f07d8(0x1d0)]);if(this['healthTrendInterval'])clearInterval(this[_0x5f07d8(0x186)]);if(this[_0x5f07d8(0x1c9)])this['ltmJob'][_0x5f07d8(0x1e1)]();if(this[_0x5f07d8(0x17a)])this['modeResetJob']['cancel']();if(this[_0x5f07d8(0xb8)])this[_0x5f07d8(0xb8)]['cancel']();recorder[_0x5f07d8(0x1f8)](this),pythonBridge[_0x5f07d8(0x11f)](this),_0x3a0dad();}async['onStateChange'](_0x3a5320,_0x585b89){const _0xff3a93=a0_0x581e9c;if(!_0x585b89||this[_0xff3a93(0x174)])return;if(_0x3a5320[_0xff3a93(0x198)]('telegram')&&_0x3a5320[_0xff3a93(0x1a9)](_0xff3a93(0xd1))&&_0x585b89[_0xff3a93(0x1fd)])return;if(this[_0xff3a93(0x1e4)]['infrasoundEnabled']&&_0x3a5320===this[_0xff3a93(0x1e4)][_0xff3a93(0xdc)]){this[_0xff3a93(0x11a)](_0x585b89[_0xff3a93(0x1fd)]);return;}if(_0x3a5320===this['namespace']+_0xff3a93(0xed)){if(_0x585b89[_0xff3a93(0x1fd)]&&Object['values'](setup['SYSTEM_MODES'])['includes'](_0x585b89['val'])){this[_0xff3a93(0x17b)]=_0x585b89[_0xff3a93(0x1fd)];if(_0x585b89[_0xff3a93(0x1fd)]===setup[_0xff3a93(0x127)][_0xff3a93(0x1e6)])await recorder['setPresence'](this,![]);else await recorder[_0xff3a93(0x103)](this,!![]);if(this[_0xff3a93(0xc6)]){let _0x536d16=![],_0x180f7e=0x0,_0x48eb6e=_0xff3a93(0xea);if(this['currentSystemMode']===_0xff3a93(0xd5))_0x536d16=!![],_0x180f7e=0x168,_0x48eb6e=_0xff3a93(0x107);else this[_0xff3a93(0x17b)]===_0xff3a93(0x188)&&(_0x536d16=!![],_0x180f7e=0x5a0,_0x48eb6e='Guest\x20Mode');pythonBridge[_0xff3a93(0x166)](this,_0xff3a93(0x1cb),{'active':_0x536d16,'duration':_0x180f7e,'label':_0x48eb6e}),await this[_0xff3a93(0xda)]('analysis.security.learningStatus',{'val':JSON[_0xff3a93(0x160)]({'active':_0x536d16,'label':_0x48eb6e,'timestamp':Date[_0xff3a93(0x13b)]()}),'ack':!![]});}}if(!_0x585b89[_0xff3a93(0x1a3)])this[_0xff3a93(0x1c0)](_0x3a5320,{'val':this[_0xff3a93(0x17b)],'ack':!![]});return;}_0x3a5320['endsWith'](_0xff3a93(0x130))&&_0x585b89[_0xff3a93(0x1a3)]&&this[_0xff3a93(0x1c4)](_0x585b89[_0xff3a93(0x1fd)]);if(!_0x585b89[_0xff3a93(0x1a3)]){if(_0x3a5320[_0xff3a93(0x198)](_0xff3a93(0xfc))&&_0x585b89[_0xff3a93(0x1fd)]){this['setState'](_0x3a5320,{'val':![],'ack':!![]}),aiAgent[_0xff3a93(0x1f5)](this);return;}if(_0x3a5320[_0xff3a93(0x198)](_0xff3a93(0x1e0))&&_0x585b89[_0xff3a93(0x1fd)]){this['setState'](_0x3a5320,{'val':![],'ack':!![]});if(this[_0xff3a93(0xc6)])aiAgent[_0xff3a93(0xeb)](this,pythonBridge);return;}if(_0x3a5320['includes'](_0xff3a93(0x1ba))&&_0x585b89['val']){this[_0xff3a93(0x1c0)](_0x3a5320,{'val':![],'ack':!![]}),aiAgent['sendMorningBriefing'](this);return;}if(_0x3a5320['includes'](_0xff3a93(0x1c1))&&_0x585b89['val']){this['setState'](_0x3a5320,{'val':![],'ack':!![]}),aiAgent['executeAutomationAction'](this);return;}if(_0x3a5320['includes'](_0xff3a93(0x14f))&&_0x585b89[_0xff3a93(0x1fd)]){this[_0xff3a93(0x1c0)](_0x3a5320,{'val':![],'ack':!![]});if(this[_0xff3a93(0xc6)])try{const _0x112d80=await this[_0xff3a93(0x16c)]('LTM.trainingData.sequences');if(_0x112d80&&_0x112d80[_0xff3a93(0x1fd)]){const _0x5e5770=JSON[_0xff3a93(0x1d2)](_0x112d80[_0xff3a93(0x1fd)]);this[_0xff3a93(0xda)](_0xff3a93(0xff),{'val':_0xff3a93(0xdf),'ack':!![]}),pythonBridge[_0xff3a93(0x166)](this,'TRAIN_SECURITY',{'sequences':_0x5e5770});}}catch(_0x18995f){}return;}if(_0x3a5320['includes'](_0xff3a93(0x1b9))&&_0x585b89[_0xff3a93(0x1fd)]){this[_0xff3a93(0x1c0)](_0x3a5320,{'val':![],'ack':!![]});if(this[_0xff3a93(0xc6)])try{const _0x45a854=await this['getStateAsync'](_0xff3a93(0x139));if(_0x45a854&&_0x45a854[_0xff3a93(0x1fd)])pythonBridge[_0xff3a93(0x166)](this,_0xff3a93(0x1b6),{'digests':JSON['parse'](_0x45a854[_0xff3a93(0x1fd)])});}catch(_0x546919){}return;}if(_0x3a5320[_0xff3a93(0x198)]('analysis.training.triggerEnergy')&&_0x585b89['val']){this[_0xff3a93(0x1c0)](_0x3a5320,{'val':![],'ack':!![]});if(this[_0xff3a93(0xc6)])try{const _0x3509fe=await this['getStateAsync'](_0xff3a93(0x17c));if(_0x3509fe&&_0x3509fe['val'])pythonBridge[_0xff3a93(0x166)](this,'TRAIN_ENERGY',{'points':JSON[_0xff3a93(0x1d2)](_0x3509fe[_0xff3a93(0x1fd)])});}catch(_0x4a2510){}return;}if(_0x3a5320[_0xff3a93(0x198)](_0xff3a93(0xf1))&&_0x585b89[_0xff3a93(0x1fd)]){this['setState'](_0x3a5320,{'val':![],'ack':!![]});if(this[_0xff3a93(0xc6)])try{const _0x11f2e1=await this[_0xff3a93(0x16c)]('LTM.rawEventLog');if(_0x11f2e1&&_0x11f2e1[_0xff3a93(0x1fd)])pythonBridge[_0xff3a93(0x166)](this,_0xff3a93(0xd0),{'events':JSON[_0xff3a93(0x1d2)](_0x11f2e1['val'])});}catch(_0x41833f){}return;}if(_0x3a5320[_0xff3a93(0x198)](_0xff3a93(0x1dc))&&_0x585b89[_0xff3a93(0x1fd)]){this[_0xff3a93(0x1c0)](_0x3a5320,{'val':![],'ack':!![]}),topology[_0xff3a93(0x13e)](this);if(this[_0xff3a93(0xc6)])try{const _0xd795a7=await this[_0xff3a93(0x16c)](_0xff3a93(0x105));if(_0xd795a7&&_0xd795a7[_0xff3a93(0x1fd)]){const _0x4eba05=JSON[_0xff3a93(0x1d2)](_0xd795a7[_0xff3a93(0x1fd)]);this[_0xff3a93(0x1fc)][_0xff3a93(0xf9)]('ðŸ§ \x20Graph-Brain:\x20Training\x20Behaviour\x20Matrix\x20based\x20on\x20'+_0x4eba05[_0xff3a93(0xc1)]+_0xff3a93(0x1c8)),pythonBridge[_0xff3a93(0x166)](this,_0xff3a93(0x1a2),{'sequences':_0x4eba05});}else this[_0xff3a93(0x1fc)][_0xff3a93(0x106)](_0xff3a93(0x122));}catch(_0x5f38c8){this['log'][_0xff3a93(0x1ca)](_0xff3a93(0x19d)+_0x5f38c8['message']);}return;}}if(this['config'][_0xff3a93(0x108)]&&this[_0xff3a93(0x1e4)][_0xff3a93(0x108)]['includes'](_0x3a5320)){await this[_0xff3a93(0x1bd)]();return;}const _0x3c8104=(this[_0xff3a93(0x1e4)][_0xff3a93(0x1d4)]||[])[_0xff3a93(0x17d)](_0x2d2a04=>_0x2d2a04['id']===_0x3a5320);if(_0x3c8104){const _0xa735db=await recorder[_0xff3a93(0xef)](this,_0x3a5320,_0x585b89,_0x3c8104);_0xa735db&&_0xa735db[_0xff3a93(0x1be)]==='motion'&&_0xa735db[_0xff3a93(0xbc)]&&this[_0xff3a93(0xc6)]&&deadMan[_0xff3a93(0x14a)](this,_0xa735db[_0xff3a93(0xbc)]),_0x585b89[_0xff3a93(0x1fd)]&&(_0x585b89[_0xff3a93(0x1fd)]===!![]||_0x585b89[_0xff3a93(0x1fd)]===0x1||String(_0x585b89[_0xff3a93(0x1fd)])[_0xff3a93(0x18c)]()===_0xff3a93(0xf2))&&(_0x3c8104[_0xff3a93(0x1be)]&&(_0x3c8104[_0xff3a93(0x1be)][_0xff3a93(0x198)](_0xff3a93(0x16f))||_0x3c8104[_0xff3a93(0x1be)][_0xff3a93(0x198)](_0xff3a93(0xe2))||_0x3c8104['type'][_0xff3a93(0x198)]('magnet'))&&this[_0xff3a93(0xc4)](_0x3c8104)),(_0x3c8104[_0xff3a93(0x1be)]===_0xff3a93(0xcb)||_0x3c8104[_0xff3a93(0x1be)]==='thermostat')&&automation[_0xff3a93(0x110)](this);}}async['protectAiMemory'](_0x1bba2c){const _0x1c7b72=a0_0x581e9c;if(!this[_0x1c7b72(0x171)]||Date[_0x1c7b72(0x13b)]()-this[_0x1c7b72(0x197)]>0x493e0)return;if(!this[_0x1c7b72(0x171)][_0x1c7b72(0x165)]||!this['memoryCache'][_0x1c7b72(0x11d)])return;try{const _0x3b5d90=JSON[_0x1c7b72(0x1d2)](_0x1bba2c),_0x374e32=this['memoryCache'][_0x1c7b72(0x165)];let _0x312470=![];for(const _0x28a491 in _0x374e32){if(_0x374e32[_0x28a491][_0x1c7b72(0x198)]('AI')&&_0x3b5d90[_0x28a491]&&!_0x3b5d90[_0x28a491][_0x1c7b72(0x198)]('AI')){_0x312470=!![];break;}}_0x312470&&(this[_0x1c7b72(0x1fc)]['info'](_0x1c7b72(0x167)),await this['setStateAsync'](_0x1c7b72(0x116),{'val':JSON['stringify'](this['memoryCache'][_0x1c7b72(0x11d)]),'ack':!![]}),await this['setStateAsync']('analysis.energy.warmupSources',{'val':JSON[_0x1c7b72(0x160)](this[_0x1c7b72(0x171)][_0x1c7b72(0x165)]),'ack':!![]}));}catch(_0x44f8be){}}async[a0_0x581e9c(0x1da)](_0x17df66){const _0x3a6864=a0_0x581e9c;if(typeof _0x17df66===_0x3a6864(0x112)&&_0x17df66[_0x3a6864(0x1ee)]){if(_0x17df66[_0x3a6864(0xd3)]===_0x3a6864(0x181))try{const _0x3f3fdf=await automation[_0x3a6864(0x14d)](this);this[_0x3a6864(0xb9)](_0x17df66['from'],_0x17df66[_0x3a6864(0xd3)],{'success':!![],'results':_0x3f3fdf},_0x17df66[_0x3a6864(0x114)]);}catch(_0xa4a5e6){this['sendTo'](_0x17df66['from'],_0x17df66[_0x3a6864(0xd3)],{'success':![],'error':_0xa4a5e6[_0x3a6864(0x1ee)]},_0x17df66[_0x3a6864(0x114)]);}else{if(_0x17df66['command']==='simulateEnergyMPC')try{const {current_temps:_0x4eb810,t_out:_0x3b7e4d,targets:_0x144ff3,t_forecast:_0x4047f3}=_0x17df66[_0x3a6864(0x1ee)],_0x2b4703=[];let _0x1864ec={};try{const _0x496ee2=await this['getStateAsync']('analysis.energy.insulationScore');if(_0x496ee2&&_0x496ee2[_0x3a6864(0x1fd)]){const _0x19b9e8=JSON['parse'](_0x496ee2['val']);_0x1864ec=_0x19b9e8[_0x3a6864(0xe4)]||_0x19b9e8;}}catch(_0x25080c){}const _0x52c3a1=_0x4047f3!==undefined&&_0x4047f3!==null?(_0x3b7e4d+_0x4047f3)/0x2:_0x3b7e4d;for(const [_0x57d757,_0x4047df]of Object['entries'](_0x4eb810)){const _0x910485=_0x144ff3[_0x57d757]||0x15;if(_0x4047df<=_0x910485)continue;let _0x318926=_0x1864ec[_0x57d757]||-0.5;if(_0x318926>=0x0)_0x318926=-0.5;const _0x3d3ca1=Math[_0x3a6864(0x121)](_0x318926),_0x5e3e51=_0x4047df-_0x910485;let _0x44d973=Math[_0x3a6864(0x1e3)](_0x5e3e51/_0x3d3ca1*0x3c);const _0x2be0f3=_0x4047df-_0x3b7e4d,_0x55ef13=_0x4047df-_0x52c3a1;if(_0x55ef13!==0x0&&_0x2be0f3!==0x0){const _0x533d68=_0x2be0f3/_0x55ef13;_0x44d973=Math[_0x3a6864(0x1e3)](_0x44d973*_0x533d68);}if(_0x44d973>0xf){if(_0x44d973>0xf0)_0x44d973=0xf0;_0x2b4703['push']({'room':_0x57d757,'minutes_safe':_0x44d973,'target':_0x910485,'current':_0x4047df,'savings_msg':_0x3a6864(0x15d)+_0x44d973+_0x3a6864(0x1f0)});}}_0x2b4703[_0x3a6864(0x163)]((_0x2f00df,_0x25744c)=>_0x25744c[_0x3a6864(0x152)]-_0x2f00df['minutes_safe']),this[_0x3a6864(0xb9)](_0x17df66[_0x3a6864(0x1b2)],_0x17df66['command'],{'success':!![],'proposals':_0x2b4703},_0x17df66['callback']);}catch(_0x4ccb10){this[_0x3a6864(0xb9)](_0x17df66[_0x3a6864(0x1b2)],_0x17df66[_0x3a6864(0xd3)],{'success':![],'error':_0x4ccb10[_0x3a6864(0x1ee)]},_0x17df66['callback']);}else{if(_0x17df66[_0x3a6864(0xd3)]===_0x3a6864(0x1c7))try{const _0xf88e1a=_0x17df66['message'][_0x3a6864(0xe6)],_0x566205=_0x3a6864(0x18e),_0x5017cb=await this[_0x3a6864(0x16c)](_0x566205);let _0x2323f7={};if(_0x5017cb&&_0x5017cb[_0x3a6864(0x1fd)])try{_0x2323f7=JSON[_0x3a6864(0x1d2)](_0x5017cb['val']);}catch(_0x118336){}_0xf88e1a&&_0x2323f7[_0xf88e1a]?(delete _0x2323f7[_0xf88e1a],await this[_0x3a6864(0xda)](_0x566205,{'val':JSON['stringify'](_0x2323f7),'ack':!![]}),this[_0x3a6864(0x1fc)][_0x3a6864(0xf9)](_0x3a6864(0x19b)+_0xf88e1a+_0x3a6864(0x128)),this['sendTo'](_0x17df66['from'],_0x17df66['command'],{'success':!![]},_0x17df66[_0x3a6864(0x114)])):this[_0x3a6864(0xb9)](_0x17df66[_0x3a6864(0x1b2)],_0x17df66[_0x3a6864(0xd3)],{'success':![],'error':_0x3a6864(0x1cf)},_0x17df66['callback']);}catch(_0x3cfa0f){this[_0x3a6864(0xb9)](_0x17df66['from'],_0x17df66[_0x3a6864(0xd3)],{'success':![],'error':_0x3cfa0f[_0x3a6864(0x1ee)]},_0x17df66['callback']);}else{if(_0x17df66[_0x3a6864(0xd3)]==='dismissAutomation')await this[_0x3a6864(0xda)](_0x3a6864(0x169),{'val':![],'ack':!![]}),await this[_0x3a6864(0xda)]('analysis.automation.description',{'val':'','ack':!![]}),await this[_0x3a6864(0xda)](_0x3a6864(0x144),{'val':'','ack':!![]}),this['sendTo'](_0x17df66[_0x3a6864(0x1b2)],_0x17df66['command'],{'success':!![]},_0x17df66[_0x3a6864(0x114)]);else{if(_0x17df66[_0x3a6864(0xd3)]==='simulateButler'){const {targetId:_0x28ce61,targetValue:_0x543ec3}=_0x17df66[_0x3a6864(0x1ee)];await this[_0x3a6864(0xda)](_0x3a6864(0x169),{'val':!![],'ack':!![]}),await this[_0x3a6864(0xda)](_0x3a6864(0x113),{'val':_0x3a6864(0x142),'ack':!![]}),await this[_0x3a6864(0xda)](_0x3a6864(0x144),{'val':_0x28ce61,'ack':!![]}),await this[_0x3a6864(0xda)]('analysis.automation.targetValue',{'val':String(_0x543ec3),'ack':!![]}),this[_0x3a6864(0xb9)](_0x17df66[_0x3a6864(0x1b2)],_0x17df66[_0x3a6864(0xd3)],{'success':!![]},_0x17df66['callback']);}else{if(_0x17df66['command']===_0x3a6864(0x182))try{const _0x3884d6=_0x17df66[_0x3a6864(0x1ee)][_0x3a6864(0x16b)];if(!_0x3884d6)throw new Error('Kein\x20API\x20Key\x20Ã¼bergeben');const _0x5633e8=new GoogleGenerativeAI(_0x3884d6),_0x452dc=_0x5633e8[_0x3a6864(0xd6)]({'model':GEMINI_MODEL}),_0x30d4e4=await _0x452dc[_0x3a6864(0x18d)]('Test'),_0xe30329=await _0x30d4e4[_0x3a6864(0x137)];if(_0xe30329[_0x3a6864(0xd8)]())this[_0x3a6864(0xb9)](_0x17df66[_0x3a6864(0x1b2)],_0x17df66['command'],{'success':!![],'message':'Verbindung\x20erfolgreich!'},_0x17df66[_0x3a6864(0x114)]);else throw new Error('Keine\x20Antwort\x20von\x20Gemini');}catch(_0x4ee3f5){this['sendTo'](_0x17df66[_0x3a6864(0x1b2)],_0x17df66[_0x3a6864(0xd3)],{'success':![],'message':_0x4ee3f5[_0x3a6864(0x1ee)]},_0x17df66[_0x3a6864(0x114)]);}else{if(_0x17df66[_0x3a6864(0xd3)]==='scanDevices')try{const _0x54e1ad=await scanner[_0x3a6864(0x1e9)](this,_0x17df66[_0x3a6864(0x1ee)]||{});this[_0x3a6864(0xb9)](_0x17df66['from'],_0x17df66[_0x3a6864(0xd3)],{'success':!![],'devices':_0x54e1ad},_0x17df66['callback']);}catch(_0x57e329){this[_0x3a6864(0xb9)](_0x17df66[_0x3a6864(0x1b2)],_0x17df66[_0x3a6864(0xd3)],{'success':![],'error':_0x57e329[_0x3a6864(0x1ee)]},_0x17df66[_0x3a6864(0x114)]);}else{if(_0x17df66[_0x3a6864(0xd3)]===_0x3a6864(0xcc))try{const {matrix:_0x1480d5}=_0x17df66[_0x3a6864(0x1ee)],_0x561b41=await this['getStateAsync'](_0x3a6864(0xe9));if(_0x561b41&&_0x561b41[_0x3a6864(0x1fd)]){const _0x4dede7=JSON[_0x3a6864(0x1d2)](_0x561b41[_0x3a6864(0x1fd)]);_0x4dede7[_0x3a6864(0x18f)]=_0x1480d5,_0x4dede7[_0x3a6864(0x132)]=Date[_0x3a6864(0x13b)](),await this[_0x3a6864(0xda)](_0x3a6864(0xe9),{'val':JSON[_0x3a6864(0x160)](_0x4dede7),'ack':!![]}),pythonBridge[_0x3a6864(0x166)](this,_0x3a6864(0x175),_0x4dede7);}this[_0x3a6864(0xb9)](_0x17df66[_0x3a6864(0x1b2)],_0x17df66[_0x3a6864(0xd3)],{'success':!![]},_0x17df66['callback']);}catch(_0x54afda){this[_0x3a6864(0x1fc)][_0x3a6864(0x1ca)](_0x54afda);}else{if(_0x17df66[_0x3a6864(0xd3)]===_0x3a6864(0x177))this[_0x3a6864(0xb9)](_0x17df66['from'],_0x17df66[_0x3a6864(0xd3)],{'success':!![],'dailyDigests':this[_0x3a6864(0x1d9)]||[],'analysisHistory':this[_0x3a6864(0x1e5)]||[]},_0x17df66[_0x3a6864(0x114)]);else{if(_0x17df66[_0x3a6864(0xd3)]===_0x3a6864(0x1b5)){const _0x897c5e=this[_0x3a6864(0x1d9)][_0x3a6864(0xc1)],_0x25c205=new Array(0x18)[_0x3a6864(0x11b)](0x0),_0x3412c0=new Date()['setHours'](0x0,0x0,0x0,0x0);this['eventHistory']&&this[_0x3a6864(0x191)]['forEach'](_0x4be2ea=>{const _0x1ecfba=_0x3a6864;if(_0x4be2ea[_0x1ecfba(0xf8)]>=_0x3412c0){const _0x29ed78=new Date(_0x4be2ea[_0x1ecfba(0xf8)])[_0x1ecfba(0x1a4)]();if(_0x29ed78>=0x0&&_0x29ed78<0x18)_0x25c205[_0x29ed78]++;}});let _0x19e9b7=![],_0x506d07='',_0x177980='',_0x3059c7='';try{const _0x215c0c=await this[_0x3a6864(0x16c)](_0x3a6864(0x169));if(_0x215c0c&&_0x215c0c[_0x3a6864(0x1fd)]){_0x19e9b7=!![];const _0x44c0cc=await this[_0x3a6864(0x16c)]('analysis.automation.description');_0x506d07=_0x44c0cc?_0x44c0cc[_0x3a6864(0x1fd)]:'';const _0x360c3d=await this[_0x3a6864(0x16c)]('analysis.automation.targetId');_0x177980=_0x360c3d?_0x360c3d[_0x3a6864(0x1fd)]:'';const _0x53e7ea=await this[_0x3a6864(0x16c)]('analysis.automation.targetValue');_0x3059c7=_0x53e7ea?_0x53e7ea['val']:'';}}catch(_0x34a10f){}const _0x4a0166=await this['checkSolarCondition'](),_0x2b9a9e=(this['config'][_0x3a6864(0x1d4)]||[])[_0x3a6864(0xd9)](_0x3973c8=>_0x3973c8[_0x3a6864(0x1f9)]),_0x2393b0=_0x4a0166&&_0x2b9a9e;let _0x2375be='';try{const _0x406669=await this[_0x3a6864(0x16c)](_0x3a6864(0x150));if(_0x406669&&_0x406669['val'])_0x2375be=_0x406669[_0x3a6864(0x1fd)];}catch(_0x1313d2){}this[_0x3a6864(0xb9)](_0x17df66['from'],_0x17df66['command'],{'success':!![],'eventHistory':this['eventHistory'][_0x3a6864(0xe5)](0x0,0xf),'stats':{'digestCount':_0x897c5e,'isPresent':this[_0x3a6864(0x1fb)],'hourlyActivity':_0x25c205,'solarActive':_0x2393b0,'presenceWho':_0x2375be},'automation':{'detected':_0x19e9b7,'description':_0x506d07,'targetId':_0x177980,'targetValue':_0x3059c7}},_0x17df66[_0x3a6864(0x114)]);}else{if(_0x17df66[_0x3a6864(0xd3)]===_0x3a6864(0xf3)){const _0x45c286=await this[_0x3a6864(0xe7)](_0x3a6864(0xf0),_0x3a6864(0x18b)),_0x28be13=[];if(_0x45c286)for(const _0xecbb20 in _0x45c286){const _0x171670=_0x45c286[_0xecbb20],_0x2b9ef2=(_0x171670['common']&&typeof _0x171670[_0x3a6864(0x187)][_0x3a6864(0x1ea)]===_0x3a6864(0x112)?_0x171670[_0x3a6864(0x187)][_0x3a6864(0x1ea)]['de']:_0x171670[_0x3a6864(0x187)]['name'])||_0x171670[_0x3a6864(0x187)][_0x3a6864(0x1ea)];_0x28be13[_0x3a6864(0xf6)]({'id':_0xecbb20,'name':_0x2b9ef2});}const _0x5be815=await this['getForeignObjectsAsync'](_0x3a6864(0xb2),_0x3a6864(0x18b)),_0x5c5685=[];if(_0x5be815)for(const _0x369560 in _0x5be815){const _0x2ceb86=_0x5be815[_0x369560],_0x5cb65f=(_0x2ceb86[_0x3a6864(0x187)]&&typeof _0x2ceb86[_0x3a6864(0x187)][_0x3a6864(0x1ea)]===_0x3a6864(0x112)?_0x2ceb86['common'][_0x3a6864(0x1ea)]['de']:_0x2ceb86[_0x3a6864(0x187)][_0x3a6864(0x1ea)])||_0x369560[_0x3a6864(0x1c5)]('.')[_0x3a6864(0x151)]();_0x5c5685['push'](_0x5cb65f);}this['sendTo'](_0x17df66[_0x3a6864(0x1b2)],_0x17df66[_0x3a6864(0xd3)],{'success':!![],'enums':_0x28be13,'rooms':_0x5c5685},_0x17df66[_0x3a6864(0x114)]);}else{if(_0x17df66[_0x3a6864(0xd3)]===_0x3a6864(0xbe))try{let _0x3db057='Kein\x20Wetter-Adapter',_0x24624e='Kein\x20Kalender-Adapter';if(this[_0x3a6864(0x1e4)][_0x3a6864(0x17f)]){const _0x544f9c=await recorder[_0x3a6864(0x145)](this);_0x3db057=_0x544f9c!==null?_0x544f9c+'Â°C':_0x3a6864(0x109);}if(this[_0x3a6864(0x1e4)][_0x3a6864(0x16a)]){const _0x215acb=await this[_0x3a6864(0x18a)]('system.adapter.'+this[_0x3a6864(0x1e4)]['calendarInstance']);_0x24624e=_0x215acb?_0x3a6864(0x194):'Instanz\x20nicht\x20gefunden';}this[_0x3a6864(0xb9)](_0x17df66[_0x3a6864(0x1b2)],_0x17df66[_0x3a6864(0xd3)],{'success':!![],'weather':_0x3db057,'calendar':_0x24624e},_0x17df66[_0x3a6864(0x114)]);}catch(_0x1a411e){this['sendTo'](_0x17df66['from'],_0x17df66[_0x3a6864(0xd3)],{'success':![],'error':_0x1a411e[_0x3a6864(0x1ee)]},_0x17df66['callback']);}else{if(_0x17df66['command']===_0x3a6864(0x1cc))try{const _0x3884d1=_0x17df66[_0x3a6864(0x1ee)][_0x3a6864(0x1ad)],_0x3c257b=await this['getForeignStateAsync'](_0x3884d1+'.data.table');let _0x2a169=[];if(_0x3c257b&&_0x3c257b['val']){const _0x3c2248=JSON[_0x3a6864(0x1d2)](_0x3c257b[_0x3a6864(0x1fd)]),_0x38f019=new Set();Array[_0x3a6864(0xfe)](_0x3c2248)&&_0x3c2248[_0x3a6864(0x143)](_0x336dc5=>{const _0x1d16f6=_0x3a6864;if(_0x336dc5[_0x1d16f6(0x158)])_0x38f019[_0x1d16f6(0x1a8)](_0x336dc5[_0x1d16f6(0x158)]);else{if(_0x336dc5[_0x1d16f6(0xc0)])_0x38f019[_0x1d16f6(0x1a8)](_0x336dc5[_0x1d16f6(0xc0)]);}}),_0x2a169=Array[_0x3a6864(0x1b2)](_0x38f019)[_0x3a6864(0x163)]();}if(_0x2a169[_0x3a6864(0xc1)]===0x0)_0x2a169=[_0x3a6864(0x1e7)];this['sendTo'](_0x17df66['from'],_0x17df66[_0x3a6864(0xd3)],{'success':!![],'names':_0x2a169},_0x17df66['callback']);}catch(_0x4c058a){this[_0x3a6864(0xb9)](_0x17df66[_0x3a6864(0x1b2)],_0x17df66[_0x3a6864(0xd3)],{'success':![],'error':_0x4c058a[_0x3a6864(0x1ee)]},_0x17df66['callback']);}else{if(_0x17df66[_0x3a6864(0xd3)]===_0x3a6864(0x172))try{await setup['sendNotification'](this,_0x3a6864(0x1f4),![],![]),this[_0x3a6864(0xb9)](_0x17df66[_0x3a6864(0x1b2)],_0x17df66[_0x3a6864(0xd3)],{'success':!![],'message':_0x3a6864(0x153)},_0x17df66[_0x3a6864(0x114)]);}catch(_0x2c7ae1){this[_0x3a6864(0x1fc)][_0x3a6864(0x1ca)](_0x3a6864(0x170)+_0x2c7ae1[_0x3a6864(0x1ee)]),this[_0x3a6864(0xb9)](_0x17df66[_0x3a6864(0x1b2)],_0x17df66[_0x3a6864(0xd3)],{'success':![],'message':_0x3a6864(0xd7)+_0x2c7ae1[_0x3a6864(0x1ee)]},_0x17df66[_0x3a6864(0x114)]);}}}}}}}}}}}}}}}}async[a0_0x581e9c(0x13d)](){const _0x4c4224=a0_0x581e9c;try{const _0x402731=await this['getStateAsync'](setup['SYSTEM_DP_MODE']);_0x402731&&_0x402731[_0x4c4224(0x1fd)]&&Object[_0x4c4224(0x13a)](setup[_0x4c4224(0x127)])[_0x4c4224(0x198)](_0x402731['val'])?this[_0x4c4224(0x17b)]=_0x402731[_0x4c4224(0x1fd)]:(this[_0x4c4224(0x17b)]=setup[_0x4c4224(0x127)]['NORMAL'],await this[_0x4c4224(0xda)](setup[_0x4c4224(0x1ec)],{'val':setup[_0x4c4224(0x127)][_0x4c4224(0x1fe)],'ack':!![]}));}catch(_0x5d38f5){this[_0x4c4224(0x17b)]=setup[_0x4c4224(0x127)][_0x4c4224(0x1fe)];}}async[a0_0x581e9c(0x1bd)](){const _0x4eb777=a0_0x581e9c;try{const _0x54f0c0=this[_0x4eb777(0x1e4)]['presenceDevices']||[];let _0xf250c6=![];const _0x145cde=[];for(const _0x24bd52 of _0x54f0c0){try{const _0x49fe73=await this[_0x4eb777(0x1db)](_0x24bd52);_0x49fe73&&(_0x49fe73[_0x4eb777(0x1fd)]===!![]||_0x49fe73[_0x4eb777(0x1fd)]==='online'||_0x49fe73['val']===0x1)&&(_0xf250c6=!![],_0x145cde[_0x4eb777(0xf6)](_0x24bd52));}catch(_0x5de057){}}return await this[_0x4eb777(0xda)]('system.presenceWho',{'val':_0x145cde[_0x4eb777(0x10b)](',\x20'),'ack':!![]}),_0xf250c6&&(this[_0x4eb777(0x124)]&&(this[_0x4eb777(0x1fc)][_0x4eb777(0xf9)](_0x4eb777(0x183)),recorder[_0x4eb777(0x1f8)](this)),!this[_0x4eb777(0x1fb)]&&this['currentSystemMode']===setup[_0x4eb777(0x127)]['NORMAL']&&await recorder[_0x4eb777(0x103)](this,!![])),_0xf250c6;}catch(_0x41590f){return![];}}async[a0_0x581e9c(0x1d6)](){const _0x2de8a4=a0_0x581e9c;this[_0x2de8a4(0x1fc)][_0x2de8a4(0x161)]('ðŸ¤–\x20Autopilot:\x20Running\x20periodic\x20analysis...'),await aiAgent[_0x2de8a4(0x1f5)](this),this['updateHealthVector'](),this['triggerGaitAnalysis'](),this[_0x2de8a4(0xba)]();}async['checkSolarCondition'](){const _0x4733db=a0_0x581e9c,_0x35f72c=['weatherunderground.0',_0x4733db(0xc8),_0x4733db(0x168)],_0x5c0d73=[_0x4733db(0x1bb),_0x4733db(0xe1),_0x4733db(0xf5)];for(const _0xe5dc6e of _0x35f72c){for(const _0x398d31 of _0x5c0d73){try{const _0x44569e=_0xe5dc6e+'.'+_0x398d31,_0x28da53=await this['getForeignStateAsync'](_0x44569e);if(_0x28da53&&_0x28da53[_0x4733db(0x1fd)]){const _0x5e4000=String(_0x28da53[_0x4733db(0x1fd)])['toLowerCase']();if(_0x5e4000[_0x4733db(0x198)](_0x4733db(0xbf))||_0x5e4000['includes'](_0x4733db(0x1d1))||_0x5e4000['includes'](_0x4733db(0x118))||_0x5e4000[_0x4733db(0x198)](_0x4733db(0x1b0))||_0x5e4000[_0x4733db(0x198)](_0x4733db(0xcd)))return!![];}}catch(_0x37e219){}}}return![];}['triggerGaitAnalysis'](){const _0x3ff14d=a0_0x581e9c;if(!this[_0x3ff14d(0xc6)])return;try{this[_0x3ff14d(0x17e)](_0x3ff14d(0x105),(_0x39bb80,_0x1fc965)=>{const _0x3013cc=_0x3ff14d;_0x1fc965&&_0x1fc965[_0x3013cc(0x1fd)]&&pythonBridge[_0x3013cc(0x166)](this,'ANALYZE_GAIT',{'sequences':JSON[_0x3013cc(0x1d2)](_0x1fc965[_0x3013cc(0x1fd)])});});}catch(_0x5b2ec1){}}async[a0_0x581e9c(0xba)](){const _0x1db4e1=a0_0x581e9c;if(!this[_0x1db4e1(0xc6)])return;try{const _0x34c38c=await recorder['getOutsideTemperatureNumeric'](this);if(_0x34c38c===null)return;const _0x540ef1={},_0x32b6d6={},_0x116699=this[_0x1db4e1(0x1e4)][_0x1db4e1(0x1d4)]||[];for(const _0x1168b5 of _0x116699){if(_0x1168b5['type']==='temperature'&&_0x1168b5[_0x1db4e1(0xbc)]){const _0x992e3d=this[_0x1db4e1(0x1ef)][_0x1168b5['id']];if(_0x992e3d!==undefined)_0x540ef1[_0x1168b5[_0x1db4e1(0xbc)]]=_0x992e3d;if(_0x1168b5[_0x1db4e1(0x1f9)])_0x32b6d6[_0x1168b5['location']]=!![];}}const _0x15a12a=await this['checkSolarCondition']();let _0x53e33b={};try{const _0x31d2df=await this['getStateAsync'](_0x1db4e1(0x176));if(_0x31d2df&&_0x31d2df[_0x1db4e1(0x1fd)])_0x53e33b=JSON['parse'](_0x31d2df[_0x1db4e1(0x1fd)]);}catch(_0x3792c0){}Object[_0x1db4e1(0x185)](_0x540ef1)[_0x1db4e1(0xc1)]>0x0&&(pythonBridge[_0x1db4e1(0x166)](this,_0x1db4e1(0x133),{'current_temps':_0x540ef1,'t_out':_0x34c38c,'is_sunny':_0x15a12a,'solar_flags':_0x32b6d6,'warmup_targets':_0x53e33b}),pythonBridge['send'](this,'OPTIMIZE_ENERGY',{'current_temps':_0x540ef1,'t_out':_0x34c38c,'targets':{}}));}catch(_0xd27755){}}[a0_0x581e9c(0x190)](){const _0x2f248b=a0_0x581e9c;if(!this[_0x2f248b(0x162)]||this[_0x2f248b(0x162)]['length']===0x0)return;const _0x3170d4=new Array(0x60)[_0x2f248b(0x11b)](0x0),_0x27b4d1=new Date()[_0x2f248b(0xf4)](0x0,0x0,0x0,0x0);this[_0x2f248b(0x162)][_0x2f248b(0x143)](_0x1be23e=>{const _0x4bbfd1=_0x2f248b,_0x39061f=new Date(_0x1be23e[_0x4bbfd1(0xf8)]);if(_0x39061f[_0x4bbfd1(0x1b4)]()>=_0x27b4d1){const _0x3f05c6=_0x39061f['getHours'](),_0x581f03=_0x39061f[_0x4bbfd1(0x149)](),_0x259d28=_0x3f05c6*0x4+Math['floor'](_0x581f03/0xf);if(_0x259d28>=0x0&&_0x259d28<0x60)_0x3170d4[_0x259d28]++;}}),this[_0x2f248b(0xda)]('analysis.health.todayVector',{'val':JSON['stringify'](_0x3170d4),'ack':!![]});}[a0_0x581e9c(0x15e)](){const _0x592a58=a0_0x581e9c;if(!this['dailyDigests']||this['dailyDigests'][_0x592a58(0xc1)]<0x2)return;const _0x3b9d03=this[_0x592a58(0x1d9)][_0x592a58(0x12a)](_0x14b6f4=>{const _0x3fe84a=_0x592a58,_0x13e0e2=(_0x14b6f4['activityLevel']||'')[_0x3fe84a(0x18c)]();return ACTIVITY_LEVEL_MAP[_0x13e0e2]||0x32;});pythonBridge['send'](this,_0x592a58(0x125),{'values':_0x3b9d03,'tag':'Activity-Level'});}async[a0_0x581e9c(0x11a)](_0x6d0b64){const _0x4daead=a0_0x581e9c;if(_0x6d0b64==null||typeof _0x6d0b64!=='number')return;const _0x4b3449=Date[_0x4daead(0x13b)]();this[_0x4daead(0x1aa)][_0x4daead(0xf6)]({'ts':_0x4b3449,'val':_0x6d0b64}),this[_0x4daead(0x1aa)]=this[_0x4daead(0x1aa)][_0x4daead(0xde)](_0x45b373=>_0x4b3449-_0x45b373['ts']<0x1388);if(this[_0x4daead(0x1a6)])return;if(this[_0x4daead(0x1e4)][_0x4daead(0x1d8)]){const _0x16d8ed=await this['getForeignStateAsync'](this['config'][_0x4daead(0x1d8)]);if(_0x16d8ed&&!_0x16d8ed['val'])return;}const _0x14e4bb=this[_0x4daead(0x1e4)][_0x4daead(0x146)]||0.04;if(Math[_0x4daead(0x121)](_0x6d0b64)>=_0x14e4bb){this[_0x4daead(0x1fc)][_0x4daead(0x106)](_0x4daead(0x179)+_0x6d0b64+_0x4daead(0x1a0)+_0x14e4bb+')'),await this[_0x4daead(0xda)]('security.alarm_triggered',{'val':!![],'ack':!![]});const _0x12091f=this[_0x4daead(0x1fb)];_0x12091f?(this[_0x4daead(0x1fc)][_0x4daead(0xf9)]('[Infrasound]\x20ðŸŸ¡\x20Debug-Mode:\x20Alarm\x20detected\x20but\x20suppressed\x20because\x20presence=true.'),this[_0x4daead(0x173)](_0x6d0b64,_0x4daead(0x15b))):(this[_0x4daead(0x173)](_0x6d0b64,_0x4daead(0x193)),this[_0x4daead(0x1c2)](_0x4daead(0xcf)+_0x6d0b64+_0x4daead(0xe3))),this['infrasoundLocked']=!![],setTimeout(()=>{const _0x56de6d=_0x4daead;this[_0x56de6d(0x1a6)]=![];},0x2710);}}async[a0_0x581e9c(0x173)](_0x2d3669,_0x318c22=a0_0x581e9c(0x193)){const _0x108445=a0_0x581e9c,_0x5b19ad=Date['now'](),_0x39dbb4=this[_0x108445(0x1e4)][_0x108445(0x1d4)]||[];setTimeout(async()=>{const _0x44233c=_0x108445;let _0x573992=null,_0x2b2252=_0x44233c(0x1f3);const _0x1e3046=[],_0x1658f9=_0x39dbb4['filter'](_0x55e011=>_0x55e011[_0x44233c(0x1be)]&&(_0x55e011['type'][_0x44233c(0x198)](_0x44233c(0x16f))||_0x55e011[_0x44233c(0x1be)][_0x44233c(0x198)]('door')||_0x55e011[_0x44233c(0x1be)][_0x44233c(0x198)](_0x44233c(0x199))||_0x55e011[_0x44233c(0x1be)][_0x44233c(0x198)]('reed'))||_0x55e011[_0x44233c(0x1f2)]&&(_0x55e011['role'][_0x44233c(0x198)](_0x44233c(0x1ab))||_0x55e011[_0x44233c(0x1f2)][_0x44233c(0x198)]('sensor.door')));for(const _0x5547e0 of _0x1658f9){try{const _0x200c78=await this[_0x44233c(0x1db)](_0x5547e0['id']);if(_0x200c78){if(_0x200c78['ts']>=_0x5b19ad-0x7d0){_0x573992=_0x5547e0[_0x44233c(0x1ea)]||_0x5547e0['id'],_0x2b2252=_0x44233c(0xc5)+_0x573992;break;}}}catch(_0x4d82bf){}}const _0xb114a7={'timestamp':_0x5b19ad,'pressure':_0x2d3669,'isMatch':!!_0x573992,'explanation':_0x2b2252,'type':_0x318c22};await this[_0x44233c(0x12e)](_0xb114a7),this[_0x44233c(0x1fc)][_0x44233c(0xf9)]('[Forensics]\x20Infrasound\x20Event\x20correlated:\x20'+(!!_0x573992?_0x44233c(0x1d7):_0x44233c(0xe8)));},0x1388);}async[a0_0x581e9c(0xc4)](_0x4065ba){const _0x20a4a8=a0_0x581e9c,_0x1d724c=Date[_0x20a4a8(0x13b)](),_0x21ecf5=_0x4065ba[_0x20a4a8(0x1ea)]||_0x4065ba['id'][_0x20a4a8(0x1c5)]('.')[_0x20a4a8(0x151)]();let _0x5c0487=0x0;setTimeout(async()=>{const _0x4572a2=_0x20a4a8;this[_0x4572a2(0x1aa)][_0x4572a2(0x143)](_0x460ff9=>{const _0x1a9572=_0x4572a2;_0x460ff9['ts']>=_0x1d724c-0xfa0&&_0x460ff9['ts']<=_0x1d724c+0x3e8&&(Math[_0x1a9572(0x121)](_0x460ff9['val'])>Math[_0x1a9572(0x121)](_0x5c0487)&&(_0x5c0487=_0x460ff9['val']));});const _0x3a9b7c=this[_0x4572a2(0x1e4)][_0x4572a2(0x146)]||0.04,_0x142314=Math[_0x4572a2(0x121)](_0x5c0487)>=_0x3a9b7c,_0x2794ba={'timestamp':_0x1d724c,'pressure':_0x5c0487,'isMatch':_0x142314,'explanation':_0x4572a2(0x10a)+_0x21ecf5,'type':_0x4572a2(0x196)};await this[_0x4572a2(0x12e)](_0x2794ba),this[_0x4572a2(0x1fc)][_0x4572a2(0x161)](_0x4572a2(0xe0)+_0x21ecf5+_0x4572a2(0x1c3)+_0x5c0487['toFixed'](0x4)+_0x4572a2(0x120)+_0x3a9b7c+')');},0x1f4);}async[a0_0x581e9c(0x12e)](_0x32feb2){const _0x2614da=a0_0x581e9c;try{const _0x4a0410=await this['getStateAsync'](_0x2614da(0x10f));let _0x1e5df2=[];if(_0x4a0410&&_0x4a0410[_0x2614da(0x1fd)])_0x1e5df2=JSON['parse'](_0x4a0410[_0x2614da(0x1fd)]);_0x1e5df2[_0x2614da(0xc9)](_0x32feb2);if(_0x1e5df2[_0x2614da(0xc1)]>0x14)_0x1e5df2=_0x1e5df2[_0x2614da(0xe5)](0x0,0x14);await this['setStateAsync'](_0x2614da(0x10f),{'val':JSON[_0x2614da(0x160)](_0x1e5df2),'ack':!![]});}catch(_0x37dab6){this[_0x2614da(0x1fc)]['error'](_0x2614da(0xfd)+_0x37dab6['message']);}}[a0_0x581e9c(0x1c2)](_0x1458bb){const _0x37f542=a0_0x581e9c;this[_0x37f542(0x1e4)][_0x37f542(0x12b)]&&this[_0x37f542(0x1e4)][_0x37f542(0x148)]&&this[_0x37f542(0xb9)](this[_0x37f542(0x1e4)][_0x37f542(0x148)],'send',{'message':_0x1458bb,'title':'Nuukanni\x20Security','priority':0x1}),this['config']['notifyTelegramEnabled']&&this[_0x37f542(0x1e4)][_0x37f542(0x13c)]&&this[_0x37f542(0xb9)](this[_0x37f542(0x1e4)][_0x37f542(0x13c)],_0x37f542(0x166),{'text':_0x1458bb});}}function a0_0x4106(){const _0x72b39=['number','role','Keine\x20Sensor-AktivitÃ¤t','ðŸ””\x20Dies\x20ist\x20ein\x20Test\x20von\x20Cogni-Living.','runGeminiAnalysis','./lib/ai_agent','ready','abortExitTimer','isSolar','startSystem','isPresent','log','val','NORMAL','ðŸ§ \x20Memory:\x20Cache\x20hydrated\x20with\x20','onUnload','Forensic\x20Infrasound\x20Log','version','enum.rooms.*','onStateChange','LTM.rawEventLog','createAllObjects','1543490IfJhMI','toString','briefingJob','sendTo','triggerEnergyPrediction','checkLicense','location','Warm-Up\x20Time\x20(Minutes\x20to\x20Target)','testContext','sonn','calendarName','length','.communicate.request','licenseKey','analyzeWindowOpening','ErklÃ¤rt\x20durch:\x20','isProVersion','{\x22default\x22:\x2021}','accuweather.0','unshift','Lernphase\x20(','temperature','updateTopologyMatrix','heiter','[Infrasound]\x20Subscribing\x20to\x20external\x20sensor:\x20','ðŸš¨\x20DRUCKWELLEN-ALARM!\x20StÃ¤rke:\x20','TRAIN_COMFORT','communicate.request','lastTrackerEventTime','command','Sensors\x20used\x20for\x20Gait\x20Analysis','party','getGenerativeModel','Fehler:\x20','text','some','setStateAsync','inactivityThresholdHours','infrasoundSensorId','setupDriftAnalysisScheduler','filter','Sec-Training\x20started...','[Calibration]\x20Window\x20','Current.WeatherText','door','\x20hPa.\x20Einbruch\x20wahrscheinlich.','scores','slice','key','getForeignObjectsAsync','ANOMALY\x20(Real\x20Threat?)','analysis.topology.structure','manual','createDailyDigest','geminiModel','.system.mode','main','processSensorEvent','enum.functions.*','analysis.training.triggerComfort','open','getEnums','setHours','NextHours.Location_1.Day_1.current.symbol_desc','push','exitGraceTimer','timestamp','info','analysis.energy.mpcActive','Warm-Up\x20Target\x20Temps\x20(JSON)','analysis.trigger','[Forensics]\x20Save\x20failed:\x20','isArray','analysis.training.status','347673nTzWIo','setupBriefingScheduler','models/gemini-flash-latest','setPresence',')\x20-\x20Phase\x20D\x20(Forensic\x20Calibration)','LTM.trainingData.sequences','warn','Party\x20Mode','presenceDevices','Daten\x20nicht\x20verfÃ¼gbar','Fenster\x20geÃ¶ffnet:\x20','join','analysisTimer','exports','setObjectNotExistsAsync','analysis.security.infrasoundLog','cleanupGhostInterventions','PYTHON_EXE','object','analysis.automation.description','callback','Active\x20Calendar\x20Enforcements\x20(Locks)','analysis.energy.warmupTimes','â¤ï¸\x20Auto-Heartbeat:\x20Aktualisiere\x20Gesundheits-Trends...','klar','subscribeForeignStatesAsync','handleInfrasound','fill','./lib/installer','times','Reinforcement\x20Learning\x20Penalties','stopService','\x20hPa\x20(Threshold:\x20','abs','âš ï¸\x20Graph-Brain:\x20No\x20training\x20sequences\x20found\x20in\x20LTM.','cogni-living\x20adapter\x20starting\x20(v','exitTimer','ANALYZE_TREND','372780iGRRHH','SYSTEM_MODES','\x27\x20wurde\x20manuell\x20vom\x20Benutzer\x20gelÃ¶scht.','@google/generative-ai','map','notifyPushoverEnabled','analysis.automation.triggerAction','string','appendToLog','27OvlzXq','analysis.energy.warmupSources','Adapter','updated','PREDICT_ENERGY','onReady','checkAndInstall','\x20rooms\x20(preventing\x20Cold\x20Start\x20Amnesia).','response','analysis.training.triggerEnergy','LTM.dailyDigests','values','now','notifyTelegramInstance','loadSystemMode','updateTopology','\x20Tage)','geminiApiKey','sendMorningBriefing','Simulation\x20durch\x20Admin\x20(Test)','forEach','analysis.automation.targetId','getOutsideTemperatureNumeric','infrasoundThreshold','initZombies','notifyPushoverInstance','getMinutes','updateLocation','Gemini\x20Init\x20Error:\x20','cogni-living','scanThermostats','LTM.baselineStatus','analysis.training.triggerSecurity','system.presenceWho','pop','minutes_safe','Gesendet','25fQCibo','./lib/dead_man','LTM.triggerDailyDigest','subscribeStates','_calName','TRACK_EVENT','system.mode','INTERNAL','analysis.energy.activeEnforcements','Heizung\x20kann\x20','runPythonHealthCheck','constructor','stringify','debug','rawEventLog','sort','search','sources','send','ðŸ§ \x20Memory\x20Protection:\x20Restoring\x20persisted\x20AI-Calculations\x20(preventing\x20\x27Cold\x20Start\x27\x20amnesia).','daswetter.0','analysis.automation.patternDetected','calendarInstance','apiKey','getStateAsync','(((.+)+)+)+$','analysis.triggerBriefing','window','Notification\x20Test\x20Failed:\x20','memoryCache','testNotification','triggerInfrasoundCorrelation','dependencyInstallInProgress','SET_TOPOLOGY','analysis.energy.warmupTargets','getLtmData','./lib/recorder','[Infrasound]\x20ðŸš¨\x20ALARM\x20TRIGGERED!\x20Pressure\x20Wave:\x20','modeResetJob','currentSystemMode','LTM.trainingData.thermodynamics','find','getState','useWeather','./lib/scanner','checkThermostats','testApiKey','WiFi\x20Presence\x20detected.','subscribeForeignStates','keys','healthTrendInterval','common','guest','analysis.health.gaitDebug','getForeignObjectAsync','enum','toLowerCase','generateContent','analysis.energy.rlPenalties','matrix','updateHealthVector','eventHistory','./lib/topology','ALARM','Verbunden','analysis.energy.pinnForecast','CALIB','bootTime','includes','magnet','./lib/setup','ðŸŽ“\x20[RL-RESET]\x20Lern-Sperre\x20(Penalty)\x20fÃ¼r\x20\x27','state','Graph-Brain\x20Train\x20Error:\x20','minDaysForBaseline','analysisInterval','\x20hPa\x20(Limit:\x20','isGracePeriodActive','TRAIN_TOPOLOGY','ack','getHours','runBaselineDriftAnalysis','infrasoundLocked','2013988NVpOnc','add','endsWith','pressureBuffer','sensor.window','json','instance','checkCalendarTriggers','bind','clear','lastAlertState','from','genAI','getTime','getOverviewData','TRAIN_HEALTH','driftAnalysisTimer','initHistory','analysis.training.triggerHealth','triggerBriefing','forecast.current.weather','PINN\x20AI\x20Forecast','checkWifiPresence','type','trackerEnabled','setState','automation.triggerAction','sendNotification','\x20opened.\x20Peak\x20Pressure:\x20','protectAiMemory','split','analysis.energy.ventilationAlerts','resetRLPenalty','\x20sequences...','ltmJob','error','SET_LEARNING_MODE','getCalendarNames','notifyTelegramEnabled','value','Key\x20not\x20found\x20or\x20not\x20provided','trackerHeartbeat','sunny','parse','monitorEnforcements','devices','32CpDOOn','runAutopilot','MATCH\x20(False\x20Positive)','infrasoundArmingId','dailyDigests','onMessage','getForeignStateAsync','analysis.training.triggerTopology','1391682bEzwHy','Memory\x20Hydration\x20Failed:\x20','480474HpNVaP','triggerDailyDigest','cancel','741181klhTjB','floor','config','analysisHistory','VACATION','Standard','initSystemConfig','scanForDevices','name','apply','SYSTEM_DP_MODE','setupModeResetScheduler','message','sensorLastValues','\x20min\x20ausbleiben.'];a0_0x4106=function(){return _0x72b39;};return a0_0x4106();}if(require[a0_0x581e9c(0xee)]!==module)module[a0_0x581e9c(0x10d)]=_0x2f0547=>new CogniLiving(_0x2f0547);else new CogniLiving();